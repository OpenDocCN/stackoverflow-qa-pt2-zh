# StackOverflow 问答 13877000-13877999

# python - Python smtplib 有时发送失败

> ID：13877000
> 
> 赞同：0
> 
> 时间：2012-12-14T10:37:39.233
> 
> 标签：python, smtp, smtplib

我用 Python 编写了一个简单的“POP3S to Secure SMTP over TLS”MRA 脚本（见下文）。

它工作正常，但有时它在尝试通过 SMTP 发送时返回“连接意外关闭”。再次运行脚本将成功传递该消息。

请给我一些建议，为什么它有时会无法传递消息，但在下一次运行时它会成功传递此消息！？

```
#! /usr/bin/env python

import poplib
import email

def forward_pop3_smtp( smtp_credentials, pop3_credentials, forward_address):
    pop3_server = pop3_credentials[0]
    pop3_port = pop3_credentials[1]
    pop3_user = pop3_credentials[2]
    pop3_password = pop3_credentials[3]

    message_recipient = forward_address

    server = poplib.POP3_SSL( pop3_server, pop3_port)
    server.user( pop3_user)
    server.pass_( pop3_password)

    for messages_iterator in range( len( server.list()[1])):
        message_list = server.retr( messages_iterator + 1)[1]

        message_string = ''
        for message_line in message_list:
            message_string += message_line + '\n'

        message_message = email.message_from_string( message_string)
        message_message_as_string = message_message.as_string()
        message_sender = message_message[ 'From']
        print( 'message_sender = ' + message_sender)

        smtp_return = send_smtp( smtp_credentials, message_sender, message_recipient, message_message_as_string)
        print( 'smtp_return = ' + str(smtp_return))
        if smtp_return == 0:
            print( 'Deleting message ' + message_message[ 'Subject'] + ':\n')
            return_delete = server.dele( messages_iterator + 1)
            print( 'return_delete = \n' + str(return_delete))
            print( '\n')
    server.quit()

def send_smtp( smtp_credentials, message_sender, message_recipient, message_message_as_string):
    smtp_server = smtp_credentials[0]
    smtp_port = smtp_credentials[1]
    smtp_user = smtp_credentials[2]
    smtp_password = smtp_credentials[3]

    import smtplib
    exception = 0
    try:
        server = smtplib.SMTP( smtp_server)
        server.starttls()
        server.login( smtp_user, smtp_password)
        smtp_sendmail_return = server.sendmail( message_sender, message_recipient, message_message_as_string)
        server.quit()
    except Exception, e:
        exception = 'SMTP Exception:\n' + str( e) + '\n' + str( smtp_sendmail_return)
    return exception

if __name__ == '__main_':
    print( 'This module needs to be imported!\n')
    quit() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:56:53.553

将端口 587 用于 TLS。我没有看到脚本使用 smtp_port

使用喜欢，

```
server = smtplib.SMTP( smtp_server, int(smtp_port) 
```

对于安全 SMTP (SMTP + SSL)，使用 smtplib.SMTP_SSL

# dart - 有没有办法限制 Dart Editor 使用的 RAM 量？

> ID：13877001
> 
> 赞同：4
> 
> 时间：2012-12-14T10:37:46.597
> 
> 标签：dart, dart-editor

我发现它使用了 600 MB 的 RAM，甚至超过了 Visual Studio（当它达到 400 MB 的 RAM 时我关闭了它）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T13:55:37.000

dart 编辑器基于 Eclipse，而 Eclipse 又基于 Java。您可以在 init 文件中告诉 java 限制应用程序在启动时可以使用的内存量。

在`DartEditor.ini`文件中，您可以设置要使用的最大内存大小。这里 1400 个月

```
-Xmx1400m 
```

这是 java 的命令行选项。有关 java 命令行选项的更多信息可以在这里找到：http: [//docs.oracle.com/javase/7/docs/technotes/tools/windows/java.html#options](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/java.html#options)

或java`man`页面。

# javascript - JavaScript 函数和 DOM

> ID：13877006
> 
> 赞同：1
> 
> 时间：2012-12-14T10:38:09.977
> 
> 标签：javascript, dom

我编写用于操作 DOM 对象的函数。此函数必须找到具有特定 ID 的元素并将新的子元素添加到具有特定 ID 的元素：

```
<html>
<head>
    <title> Text </title>
     <meta charset="utf-8">
</head>
<body id="tbody">
  <script>
    function add(){
       el = document.getElementById("testform");
       var nf=document.createElement("input");
       nf.type="text";
       el.appendChild(nf);
    }
  </script>

   <p>
     <form id="testform">
       <button onclick="add();"> create</button>
      </form>
   </p>

</body>
</html> 
```

文本输入元素不在页面上创建，但相同的代码被放置在脚本标签中，没有功能工作

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T10:41:10.563

您正在重新加载页面，并且需要在单击按钮以停止提交表单时返回 false ：

```
<html>
    <head>
        <title> Text </title>
        <meta charset="utf-8">
    </head>
    <body id="tbody">
        <script type="text/javascript">
            function add(){
                el = document.getElementById("testform");
                var nf=document.createElement("input");
                nf.type="text";
                el.appendChild(nf);
            }
       </script>
       <p>
       <form id="testform">
           <button onclick="add();return false;"> create</button>
       </form>
       </p>
   </body>
</html>​ 
```

此外，在段落中粘贴表格似乎没有必要？

[**小提琴**](http://jsfiddle.net/TNpty/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T10:48:37.683

由于按钮元素类型的默认操作是提交，因此每次单击时都会提交。您可以执行 return false 或创建标签标签而不是按钮，例如：

```
<html>
    <head>
    <title> Text </title>
     <meta charset="utf-8">
    </head>
    <body id="tbody">
    <script>
    function add(){
        el = document.getElementById("testform");
        var nf=document.createElement("input");
        nf.type="text";
        el.appendChild(nf);
    }
    </script>

   <p>
   <form id="testform">
   <label onclick="add();"> create</label>
   </form>
   </p>

   </body>
   </html> 
```

[**演示**](http://jsfiddle.net/refhat/TNpty/8/)

# wpf - 如何在巨大的 UniformGrids 中处理性能？

> ID：13877008
> 
> 赞同：6
> 
> 时间：2012-12-14T10:38:12.560
> 
> 标签：wpf, performance, xaml

我在我的应用程序中有一个视图，其中包含要显示的巨大数据表。数据显示在两个嵌套的 UniformGrid 中。UniformGrid 是 ItemsControls 中的 ItemPanel，并绑定到一些 ViewModel。请参阅下图和一些示例 XAML 代码：

[视图和视图模型 http://img593.imageshack.us/img593/8825/stackoverflowuniformgri.png](http://img593.imageshack.us/img593/8825/stackoverflowuniformgri.png)

```
<!-- The green boxes -->
<ItemsControl ItemsSource="{Binding BigCells}">

  <ItemsControl.ItemPanel>
    <PanelTemplate>
      <UniformGrid />
    </PanelTemplate>
  </ItemsControl.ItemPanel>

  <ItemsControl.ItemTemplate>
    <DataTemplate>

      <!-- The blue boxes -->
      <ItemsControl ItemsSource="{Binding SmallCells}">
        <ItemsControl.ItemPanel>
          <PanelTemplate>
            <UniformGrid />
          </PanelTemplate>
        </ItemsControl.ItemPanel>
      </ItemsControl>

    </DataTemplate>
  </ItemsControl.ItemTemplate>
</ItemsControl> 
```

现在，我希望我的视图可以调整大小，但这根本不能很好地执行，因为每个小盒子的布局都是计算出来的。
这至少可以对盒子大小进行一次，因为它对所有盒子都是相等的。

在 WPF 中显示大量控件的最佳做法是什么/我可以从哪里开始优化？关键字已经可以帮助我继续发现 WPF 中 UniformGrids 的性能优化。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T10:50:24.130

同时使用大量 WPF 时，我遇到了类似的问题`DataGrid`。最终归结为两个主要问题：

*   资源字典
*   绑定

**资源字典**

如果您不小心使用基本的 WPF 功能，这些可能会成为主要瓶颈。

`ItemsControl`就我而言，对于包含 my的单个逻辑滚动，我在 ResourceDictionary 上`DataGrids`收到了大约 1000 万次调用。处理时间超过 1 秒。`GetValue``GetValueWithoutLock`

访问的主要数量`ResourceDictionary`是由不同的来源引起的：

*   动态资源检索 ：如果您有`ControlTemplates`，更一般地说，资源放置在某些资源字典中，并且您通过 访问它们`{DynamicResource ...}`，请删除它们。在某处有一些静态并直接访问它们。
*   样式获取：如果您在使用的不同 Visual 上没有样式，或者如果您有样式但未设置[FrameworkElement.OverridesDefaultStyle](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.overridesdefaultstyle.aspx)属性，WPF 将尝试在所有资源中查找与控件匹配的样式，这会导致大量访问资源字典。为避免这种情况，请确保覆盖控件的所有控件模板，并`Style={x:Null}`在每个控件上进行设置（如果您需要控件样式，请将其设置为内联控件，然后添加`OverridesDefaultStyle = true`）
*   隐式数据模板：隐式数据模板非常有用，但远非免费。在寻找`DataTemplate`应用时，WPF 将再次浏览您的资源字典以查找`DataTemplate`匹配您的 ViewModels 类型。`DataTemplate`解决方案是为每个绑定到 ViewModel 的控件使用选择器，并实现一种优化的方式来检索正确的`DataTemplate`. （我个人为我的 dataTemplate 有一些静态字段，我只从 resourceDictionary 检索一次，并`DataTemplateSelector`根据需要返回它们的优化。）

**绑定**

绑定非常有用，但在内存和性能方面非常昂贵。在一个非常明智的环境中——从性能的角度来看——你不能不小心就使用它们。例如，绑定可以为每个绑定对象创建最多 3 个 WeakReference，可以使用反射等。我最终在 DataContext 的 PropertyChanged 事件上删除了几乎所有绑定和插入的事件处理程序。当`DataContext`我的控件（你有一个`DataContextChanged`事件）发生变化时，我会测试我是否`DataContext`支持`INotifyPropertyChanged`，如果是这样，我会在事件上附加一个事件处理程序`PropertyChanged`并根据需要更新属性。（我只有一种方式绑定，所以这就是我选择这种方式的原因，但还有其他解决方案）。

使用 MVVM 和 WPF 时不使用绑定似乎令人沮丧，但在我的情况下实际上没有办法优化绑定。

最后一件事：如果你有`Freezable`对象（例如画笔），`Freeze`如果可以的话，不要犹豫。

这些是一些可以帮助您优化代码的建议。您将需要一个分析器（我总是建议使用 dotTrace，因为这是我用过的最好的分析器）来监控真正发生的事情并根据结果调整您的情况。

祝你好运 ！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T18:12:11.777

如果您确定所有框都希望大小相同，则始终可以创建自己的`UniformGrid`类并覆盖`MeasureOverride`以仅测量一个孩子。在我当前的项目中，我最终可能会得到一些具有相同大小内部控件的大型 UniformGrid，所以你的想法引起了我的兴趣，我决定很快尝试一下：

我使用 Petzold 的[UniformGridAlmost](ftp://ftp.charlespetzold.com/AppsCodeMarkup/Chapter%2012/DuplicateUniformGrid/UniformGridAlmost.cs)类作为灵感，但是从而`UniformGrid`不是从子类化，`Panel`因此不需要复制 Rows 和 Columns 依赖属性。`UniformGrid`似乎没有向其派生类公开计算的行数和列数，因此我从[Silverlight 的 UniformGrid 类](http://searchco.de/codesearch/view/10444748)中借用了一个实现并使用了该`UpdateComputedValues`方法。

在`MeasureOverride`我的班级看起来像这样

```
 protected override Size MeasureOverride(Size sizeAvailable)
  {
     if (InternalChildren.Count == 0)
     {
        return new Size(0, 0);
     }

     UpdateComputedValues();

     // Calculate a child size based on uniform rows and columns.
     Size sizeChild = new Size(sizeAvailable.Width / ComputedColumns,
                               sizeAvailable.Height / ComputedRows);

     // Assume children will measure to at least a comparable size.
     UIElement child = InternalChildren[0];
     child.Measure(sizeChild);

     double width = Math.Max(width, child.DesiredSize.Width);
     double height = Math.Max(height, child.DesiredSize.Height);
     return new Size(ComputedColumns * width, ComputedRows * height);
  } 
```

所以，这里是最重要的，当我在具有 10000 个 TextBlocks 的 ItemsControl 上测试它时，我的 UniformGrid 版本更快，但只有一小部分（不到 1% - 我确认对 MeasureOverride 的调用快了大约 95%）。所以这可能没有帮助，但我想我会分享我的经验。您观察到不需要测量每个盒子来确定您的情况下的统一布局是正确的，但测量并不是让它陷入困境的原因。我确信那是因为所有这些控件仍然需要绘制，所以无论如何它们都会在以后进行测量。您很可能会从 ResourceDictionary/Binding 建议中获得更多信息。

# oracle - SSO 与 Oracle Application Express 和 Asp.Net 网站

> ID：13877011
> 
> 赞同：0
> 
> 时间：2012-12-14T10:38:21.147
> 
> 标签：oracle, authentication, windows-authentication, kerberos, oracle-apex

我有一个 .net 网站，它使用 iframe 访问 oracle application express web 应用程序，特别是使用不同页面的唯一 url。

现在，我需要 .net 网站和 oracle application express 都使用 Windows 身份验证作为单点登录。

请建议我如何实现同样的目标。

让我知道是否有任何我可以使用的开源技术。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:52:48.047

一种选择可能是使用[Thoth 网关在 IIS 中托管 Apex（与 Apache、EPG 或 Apex 侦听器相反）并使用](http://code.google.com/p/thoth-gateway/)[此处](http://ora-00001.blogspot.ca/2012/03/windows-ntlm-sso-with-apex.html)所述的集成 Windows 身份验证。

# xml - org.xml.sax.SAXParseException：在 CDATA 部分中发现了无效的 XML 字符（Unicode：0x1b）

> ID：13877013
> 
> 赞同：2
> 
> 时间：2012-12-14T10:38:25.940
> 
> 标签：xml, jsp, tags

嗨，我有一个 JSP 文件，我在其中加载了两个标签库：

```
taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"

taglib prefix="x" uri="http://java.sun.com/jsp/jstl/xml" 
```

我收到一个错误：

```
org.apache.jasper.JasperException: org.xml.sax.SAXParseException: An invalid XML character (Unicode: 0x1b) was found in the CDATA section. 
```

原因是这一行：

```
var enabledLoginCharacters = /^[\w \. \- \! \" \§ \$ \% \& \/ \( \) \= \? \* \+ \# \< \> \, \; \: \@]*$/; 
```

如何重写这一行，使其不会导致 XML 错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T13:05:43.720

问题可能出在 SECTION SIGN **§**因为它是唯一一个不在 ASCII 子集中的。

该错误可能是由文本编辑器使用与文档声明的编码不同的编码引起的。

你可以：

*   以声明的编码重新编码文档
*   将编码声明更改为用于编辑它的编码名称
*   用 Unicode 表达式替换文字 §`\u00A7`

# git - Git-Repo 在所有提交的文件中搜索字符串（未知分支和提交）

> ID：13877014
> 
> 赞同：36
> 
> 时间：2012-12-14T10:38:27.350
> 
> 标签：git

我在 git repo 中的当前分支之外有一段代码，我不确定哪个提交和哪个分支。如何在我之前提交的所有文件中搜索特定字符串（然后显示该代码行的周围）？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-12-14T11:41:59.373

用于`git grep`定位提交：

```
git grep "string" $(git rev-list --all) 
```

这`git rev-list --all`使得它搜索项目的整个历史。

这将给出如下输出：

```
<commit>:<path>:<matched line> 
```

然后你可以用`git branch --contains`它来找出提交在哪个分支上：

```
git branch --contains <commit> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-11-12T20:03:12.883

如果`git grep "string"`上面的变体给你“列表太长”的错误，你可以`git log -S`改用。-S 选项搜索已提交文件的内容：

```
git log -S "string"  # look for string in every file of every commit
git log -S "string" -- path/to/file  # only look at the history of the named file 
```

（更多在[“搜索”](http://git-scm.com/book/en/v2/Git-Tools-Searching#Git-Log-Searching)下的“Pro Git”一书中。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-03-12T20:01:11.790

如果[jszakmeister 的回答](https://stackoverflow.com/a/13878026/9636)给了你`Argument list too long`回应：

```
$ git grep "string" $(git rev-list --all)
-bash: /usr/local/bin/git: Argument list too long 
```

您可以将其通过管道输入`xargs`：

```
$ git rev-list --all | xargs git grep "string" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T10:44:02.603

更改分支，`git branch "branch-name"`然后`git grep "specific string"`在您的存储库根目录中执行。如果您没有太多分支机构，这应该可以让您足够快地到达那里。

# objective-c - 如何将文件从我的 iphone 应用程序上传到用户自己的保管箱？

> ID：13877018
> 
> 赞同：3
> 
> 时间：2012-12-14T10:38:36.430
> 
> 标签：objective-c, ios, api, dropbox

我创建了一个 iphone 应用程序，当用户使用该应用程序时，它可以生成一个 pdf 文件。用户如何选择将 pdf 文件发送到自己的保管箱？

我曾尝试使用保管箱示例：我可以在其中制作 api 并上传到我自己的保管箱。但这不是我想要的。

我希望我的应用程序这样做：当用户生成一个 pdf 文件时，Dropbox 的登录框就会出现，这样他就可以登录并将文件自动上传到他自己的 dropbox。

我有谷歌它，但我没有得到任何例子，包括这个解决方案。

如果可以，请你帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:43:59.907

您是否看过我认为描述您正在寻找的内容的博客文章。

[http://www.drdobbs.com/tools/working-with-dropbox/232600482?pgno=1](http://www.drdobbs.com/tools/working-with-dropbox/232600482?pgno=1)

# java - Double 函数不返回 Double 值？

> ID：13877020
> 
> 赞同：1
> 
> 时间：2012-12-14T10:38:52.010
> 
> 标签：java, double, return

```
public class Nitin12assignA6 {

    public static void main(String args[]) throws IOException {
        series ob = new series();
        ob.input();
        ob.findSum();
        ob.display();
    }
}
    class series {

        int x, n;

        double sum;

        series() {
            x = n = 0;
            sum = 0.0f;
        }

        void input() throws IOException {
            BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
            System.out.print("\nEnter the value of x = ");
            x = Integer.parseInt(in.readLine());
            System.out.print("Enter the value of n = ");
            n = Integer.parseInt(in.readLine());
        }

        void display() {
            System.out.println("The sum of Series upto " + n + " terms is: " + sum);
            System.out.println();
        }

        long fact(int num) {
            if(num == 1) {
                return 1;
            }
            return num * fact(num - 1);
        }

        int power(int num, int exp) {
            if(exp == 1) {
                return 1;
            }
            return num * power(num, exp - 1);
        }

        double term(int numr, long denom) {
            return(numr / denom);
        }

        void findSum() {
            int u = 2, l = 4;
            sum = 1.0f;
            for(int i = 0; i < n; i++) {
                if(l % 8 == 0) {
                    sum += term(power(x, u), fact(l));
                    // Test start
                    System.out.println("add" + sum + " power " + power(x, u) + " fact " + fact(l) + " x " + x + " u " + u
                            + " l " + l);
                    System.out.println("term " + term(power(x, u), fact(l)));
                    System.out.println("test term " + term(5, 2)); // printing 2.0
                                                                    // instead of 2.5
                    // Test end
                } else {
                    sum -= term(power(x, u), fact(l));
                    // Test start
                    System.out.println("minus" + sum + " power " + power(x, u) + " fact " + fact(l) + " x " + x + " u " + u
                            + " l " + l);
                    System.out.println("term " + term(power(x, u), fact(l)));
                    // Test end
                }
                u += 2;
                l += 4;
            }
        }
    } 
```

//double term(int numr,long denom) //{return (numr/denom);} 这个函数没有返回双精度值。请帮助... 这个程序是找到一个系列最多 n 项的总和。示例 - 测试项返回 2.0 而不是 2.5...谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T10:42:38.820

您需要在除法之前显式地转换为加倍。

```
double term(int numr, long denom) {
     return ((double)numr / denom);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T10:42:56.680

`double`对除法产生的值进行转换，因此您可以阅读

```
double term(int numr,long denom) {
    return (double) (numr/denom);
} 
```

所以`numr/denom`首先被评估，由于`int/long`类型很长，结果将是 2L。然后它被铸造成双倍。如果您希望对它进行双重评估，请执行

```
double term(int numr,long denom) {
    return  ((double)numr/denom);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T10:42:34.970

尝试

```
double term(int numr, long denom) {
    return ((double) numr/denom);
} 
```

你的版本`int/long`总是返回一个非浮点数。

看到这个：

```
int a = 2;
int b = 4;
double c = a/b; // 0.0
double d = ((double) a/b); // 0.5 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T10:43:06.583

```
double term(int numr, long denom) {
    return (numr / denom);
} 
```

返回值是`double`，但 devision`(numr / denom)`创建了一个`long`然后将其转换为双精度。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T10:50:57.580

这可能会有所帮助。

```
double term(int numr, long denom) {
    return ((double)numr / denom);
} 
```

# c# - Ajax 在 Visual Studio 2005 中不起作用

> ID：13877029
> 
> 赞同：0
> 
> 时间：2012-12-14T10:39:33.907
> 
> 标签：c#, asp.net, ajax

我正在尝试做一个 ajax 网站，但我的 ajax 无法正常工作。我检查了我的 GAC 和 system.web，扩展 dll 可用。为什么它不工作.? 我也没有收到任何错误。我尝试了很多方法。我写了下面的代码来测试ajax。

```
 <%@ Page Language="C#" AutoEventWireup="true"  CodeFile="Default.aspx.cs" Inherits="_Default" %>

<%@ Register Assembly="System.Web.Extensions" Namespace="System.Web.UI" TagPrefix="asp" %>

<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="cc1" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <title>Untitled Page</title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <cc1:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server">
        </cc1:ToolkitScriptManager>
        <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
        <cc1:CalendarExtender ID="CalendarExtender1" runat="server" TargetControlID="TextBox1">
        </cc1:CalendarExtender>
    </div>
    </form>
</body>
</html> 
```

我得到的 JAvascript 错误

```
 1.Type is not defined
    http://localhost:1467/testnew/Default.aspx?_TSM_HiddenField_=ToolkitScriptManager1_HiddenField&_TSM_CombinedScripts_=%3b%3bAjaxControlToolkit%2c+Version%3d1.0.20229.20821%2c+Culture%3dneutral%2c+PublicKeyToken%3d28f01b0e84b6d53e%3aen-US%3ac5c982cc-4942-4683-9b48-c2c58277700f%3ae2e86ef9%3aa9a7729d%3a9ea3f0e2%3a9e8e87e9%3a1df13a87%3a4c9865be%3aba594826%3a507fcf1b%3ac7a4182e 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:04:14.247

在尝试使用控件之前，您必须确保在您的机器上注册了 ajax 1.0.20229.20821

你可以在这里找到它：http: [//msdn.microsoft.com/en-us/library/bb861898 (v=office.12).aspx](http://msdn.microsoft.com/en-us/library/bb861898(v=office.12).aspx)

# ffmpeg - 打开输出流 #0.0 的编码器时出错 - 可能是不正确的参数，例如 bit_rate、rate、width 或 height

> ID：13877031
> 
> 赞同：18
> 
> 时间：2012-12-14T10:39:49.833
> 
> 标签：ffmpeg

我正在使用此命令通过 FFMPEG 将 avi、mov、m4v 视频文件转换为 flv 格式

```
/usr/local/bin/ffmpeg -i '/home/public_html/files/video_1355440448.m4v' -s '640x360' -sameq -ab '64k' -ar '44100' -f 'flv' -y /home/public_html/files/video_1355440448.flv

[flv @ 0x68b1a80] requested bitrate is too low
Output #0, flv, to '/home/files/1355472099-50cadce349290.flv':
    Stream #0.0: Video: flv, yuv420p, 640x360, q=2-31, pass 2, 200 kb/s, 90k tbn, 25 tbc
    Stream #0.1: Audio: adpcm_swf, 44100 Hz, 2 channels, s16, 64 kb/s
Stream mapping:
  Stream #0.0 -> #0.0
  Stream #0.1 -> #0.1
Error while opening encoder for output stream #0.0 - maybe incorrect parameters such as bit_rate, rate, width or height
-------------------------------
RESULT
-------------------------------
Execute error. Output for file "/home/public_html/files/video_1355472099.avi" was found, but the file contained no data. Please check the available codecs compiled with FFmpeg can support this type of conversion. You can check the encode decode availability by inspecting the output array from PHPVideoToolkit::getFFmpegInfo(). 
```

但是如果我手动使用这个命令，那么它的工作

```
/usr/local/bin/ffmpeg -i '/home/public_html/files/video_1355440448.m4v' -s '640x360' -sameq -ab '64k' -ar '44100' -f 'flv' -y /home/public_html/files/video_1355440448.flv 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-12-25T23:14:45.990

1.  这是因为您有两个流，输出将被编码然后调整大小，请参阅您的输出消息：

    ```
    Stream #0.0 -> #0.0
    Stream #0.1 -> #0.1 
    ```

    ...您使用`adpcm_swf`音频和`yuv420p`视频

    答案很简单，你需要把`copy`你的音频编解码器...

    **请参阅我的视频 mpeg4、yuv420p 和音频 ac3 示例...**

    ```
    ffmpeg -i input.mkv -vf scale=720:-1 -acodec copy -threads 12 output.mkv 
    ```

    这将改变第一个大小 = 720，纵横比 = -1（未知）。您还需要使用：

    ```
    -acodec copy -threads 12 
    ```

    如果不使用它，您将遇到一个错误。例如：当我使用它时，输出编码消息向我展示了这一点并且效果很好：

    ```
    [h624 @ 0x874e4a0] missing picture in access unit93 bitrate=1034.4kbits/s    
    Last message repeated 1163 times5974kB time=53.47 bitrate= 915.3kbits/s 
    ```

2.  您需要使用 flv 格式的文件，如下所示：

    ```
    ffmpeg -i input.mp4 -c:v libx264 -crf 19 output.flv 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-19T16:31:09.313

由于尺寸限制，我遇到了类似的问题。原始图像大小很奇怪（宽度=1343），这意味着当我尝试使用 -s 指定新大小时，*任何*舍入错误都会导致问题。确保新的图像尺寸可以具有完全相同的纵横比！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-14T11:11:42.503

您收到一条错误消息

```
[flv @ 0x68b1a80] requested bitrate is too low 
```

您需要将比特率更改为有效。如果您使用不同的编解码器会更好

```
-acodec libmp3lame 
```

并删除选项`-sameq`。此选项并不意味着“相同的质量”。实际上意味着“相同的量化器”！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-14T10:53:04.600

我有同样的问题

```
- requested bitrate is too low 
```

并通过降低比特率解决了这个问题

```
by adding -b:a 32k 
```

# javascript - 带有希伯来字符的 XMLHttpRequest

> ID：13877036
> 
> 赞同：0
> 
> 时间：2012-12-14T10:40:06.930
> 
> 标签：javascript, html, ajax, xmlhttprequest, hebrew

我有这段代码，当文本中`XMLHttpRequest`包含希伯来语字符时，它似乎搞砸了，所以我做了一个小例子来演示这个问题。

小代码示例加载页面，然后将 div 的内容替换为从服务器获取的内容。由于它调用相同的网页，所以它应该用相同的内容替换它。

当 div 内的按钮包含英文字母时，代码可以正常工作，但如果字母超出 ASCII 127，则它会拧紧按钮。

我做了一些测试，发现如果我将文件保存为 Unicode，那么它可以正常工作......问题是我无法将此文件保存为 Unicode，因为它：

1.  文件大小翻倍
2.  在该 html 文件中写入一些数据的硬件，以 ASCII 格式写入

小例子只是加载自己：

```
<HTML><HEAD><TITLE>Test</TITLE>
</HEAD>
<BODY onload="readPage()">
<Div id='Hello'>
<Button>שלום</Button>
</Div>
<Script>
var xmlHttp;
function readPage()
{
    xmlHttp=GetXmlHttpObject();

    if (xmlHttp==null)
    {
        alert ("Your browser does not support AJAX!");
        return;
    }

    var url="/xampp/2.html?dummy=" + new Date().getTime();
    xmlHttp.onreadystatechange=stateChanged;
    xmlHttp.open("GET",url, true);
    xmlHttp.setRequestHeader("Content-Type", "text/plain;charset=ISO-8859-1");
    xmlHttp.setRequestHeader("Accept-Charset", "ISO-8859-1");
    xmlHttp.send(null);
}

function stateChanged()
{
    if (xmlHttp.readyState==4)
    {
        var x = ""; 
        //alert(xmlHttp.responseXML);
        //alert(xmlHttp.responseText);
        if (xmlHttp.responseText.match(/<Div id='Hello'>([\s\S]*?)<\/Div>/i))
        {
            x = xmlHttp.responseText.match(/<Div id='Hello'>([\s\S]*?)<\/Div>/i)[1];
            //x = x.replace(/"/g,'');

            var pdata= document.all ? document.all["Hello"] :
                document.getElementById("Hello");

            alert(pdata.innerHTML);
            alert(x);
            pdata.innerHTML=x;
            alert(pdata.innerHTML);
        }

    }
}
function GetXmlHttpObject()
{
    var xmlHttp=null;
    try
    {
        // Firefox, Opera 8.0+, Safari
        xmlHttp=new XMLHttpRequest();
    }
    catch (e)
    {
        // Internet Explorer
        try
        {
            xmlHttp=new ActiveXObject("Msxml2.XMLHTTP");
        }
        catch (e)
        {
            xmlHttp=new ActiveXObject("Microsoft.XMLHTTP");
        }
    }
    return xmlHttp;
}
</Script>
</BODY></HTML> 
```

我尝试更改字符集和内容类型，但它不起作用。

我究竟做错了什么？

（顺便说一句，我不能使用任何`jQuery`东西）。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T10:53:10.240

您可以尝试手动编码字母。这是一个非常缓慢和糟糕的解决方案，但它可能会帮助您 q contains 希伯来语数据（在 javascript 上）

```
q=q.replace(/א/gi,"%E0");
q=q.replace(/ב/gi,"%E1");
q=q.replace(/ג/gi,"%E2");
q=q.replace(/ד/gi,"%E3");
q=q.replace(/ה/gi,"%E4");
q=q.replace(/ו/gi,"%E5");
q=q.replace(/ז/gi,"%E6");
q=q.replace(/ח/gi,"%E7");
q=q.replace(/ט/gi,"%E8");
q=q.replace(/י/gi,"%E9");
q=q.replace(/כ/gi,"%EB");
q=q.replace(/ך/gi,"%EA");
q=q.replace(/ל/gi,"%EC");
q=q.replace(/מ/gi,"%EE");
q=q.replace(/ם/gi,"%ED");
q=q.replace(/נ/gi,"%F0");
q=q.replace(/ן/gi,"%EF");
q=q.replace(/ס/gi,"%F1");
q=q.replace(/ע/gi,"%F2");
q=q.replace(/פ/gi,"%F4");
q=q.replace(/ף/gi,"%F3");
q=q.replace(/צ/gi,"%F6");
q=q.replace(/ץ/gi,"%F5");
q=q.replace(/ק/gi,"%F7");
q=q.replace(/ר/gi,"%F8");
q=q.replace(/ש/gi,"%F9");
q=q.replace(/ת/gi,"%FA"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T13:08:55.467

好的，我不确定 XAMPP 的 Web 服务器为我使用的特定 HTML 发送什么，但在特定硬件上，我们编写了 Web 服务器并发送：

```
HTTP/1.1 200 OK
MIME-version: 1.0
Content-Type: text/html
Content-length: 11280
Proxy-Connection: Keep-Alive
Connection: Keep-Alive
Age: 0 
```

一种解决方案是将网页保存为 Unicode，这对我们不利。另一个似乎可行的选项是告诉浏览器我们需要特定的编码。在这种情况下，Windows-1255。

我所要做的就是更改从网站发送的标题，这样它也将包含字符集，现在它可以正常工作了：

```
HTTP/1.1 200 OK
MIME-version: 1.0
Content-Type: text/html; charset=Windows-1255
Content-length: 11280
Proxy-Connection: Keep-Alive
Connection: Keep-Alive
Age: 0 
```

# mysql - 清除而不删除表 - mysql

> ID：13877040
> 
> 赞同：0
> 
> 时间：2012-12-14T10:40:26.087
> 
> 标签：mysql

我肯定有一个非常简单的问题：

知道它们是关键约束的数量，如何在不抑制它们的情况下清除表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:32:31.777

如下包装您的代码：

```
set foreign_key_checks = 0;
-- your code here
set foreign_key_checks = 1; 
```

...鲍勃是你的叔叔。

# android - 如何去除音轨中的背景噪音？

> ID：13877058
> 
> 赞同：0
> 
> 时间：2012-12-14T10:41:57.647
> 
> 标签：android, media, audio-streaming, audio-recording, audiotrack

我正在开发`VOIP`一种应用程序。发送声音是完美的，但是当我从网络服务器收到相同的声音时，我正在使用`AudioTrack`API 播放它。

我正在打电话`at.play()`并`at.write`在一个线程中，以便我应该获得从其他设备录制和发送的所有声音。

但是，现在我面临的问题是，如果没有声音而不是它仍然像子弹一样播放，我的意思是当我尝试播放时会有连续的背景声音。

我在线程中使用以下函数：

```
 if (at != null) {
                        if (at.getPlayState() != AudioTrack.PLAYSTATE_PLAYING) {
                            at.play();
                   } else {
                       if (playing == true) {
                                System.out.println("BEFORE WRITE");
                                at.write(playShortData, 0,
                                        playShortData.length);
                                System.out.println("AFTER WRITE");

                                at.flush();
                                playing = false;
                            }
                        }
                    } 
```

如果没有从其他设备发送语音，我如何消除背景噪音。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T04:59:36.620

我认为当他们都没有在其他方面说话时，它会发挥垃圾价值，它只是发送垃圾价值..

# jquery - css 防止事件

> ID：13877060
> 
> 赞同：2
> 
> 时间：2012-12-14T10:42:07.070
> 
> 标签：jquery, html, css

我遇到了奇怪的行为。我有一组复选框输入。以下代码本身可以正常工作。但是，如果在您按下全部按钮时将其集成到网站中，则不会发生任何事情

```
 $("[name*=group_]").live('click', function(){
        var id = $(this).attr('name').substr(6,1);
        var cnt = $("[value!='all'][name*=group_"+id+"]:checked").length;

        if(cnt > 0){
            $("[value='all'][name*=group_"+id+"]").removeAttr('checked');
        } else {
            $("[value='all'][name*=group_"+id+"]").attr('checked', 'checked');
        }
    })

<fieldset class="subject">

                        <input type="checkbox" value="all" name="group_4" id="group_4"><label title="All" for="all">All</label>
                                            <input type="checkbox" value="15" id="cat_15" name="group_4[]"><label title="Maths" for="cat_15">Maths</label>

                                            <input type="checkbox" value="16" id="cat_16" name="group_4[]"><label title="English" for="cat_16">English</label>

                                            <input type="checkbox" value="14" id="cat_14" name="group_4[]"><label title="Science" for="cat_14">Science</label>

                    </fieldset> 
```

请去那里[http://jsfiddle.net/XXQTT/1/](http://jsfiddle.net/XXQTT/1/)并尝试使用`Applicability`. 当您单击前：`Early Years`它可以工作，但是如果您单击`All`- 什么都没有。我想是因为 css 但无法弄清楚如何以及如何使其工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:46:46.190

问题是 [value!='all'] - 属性选择器没有！选项。尝试将其替换为`$(":not([value='all'])[name*group_"+id+"]:checked")`

**编辑**

根据以下反馈`John Travolta`：

> 1.  这对我有用并返回正确的值。2\. 没有事件产生的问题。我放了警报，当您单击全部时没有弹出窗口

很公平——你知道的越多！:D All 标签上没有冒泡的事件，经测试：

```
$('label').click(function() {
    window.alert('hi');
});

$('[type=checkbox]').click(function() {
    window.alert('hello');
}); 
```

@edit - 我将其归咎于处理标签/输入点击的脚本，而不是 css，因为以下使其正常工作：

```
$('label').click(function() {
    $(this).prev("input:first").click();
}); 
```

# python - 如何将numpy掩码数组保存到文件

> ID：13877063
> 
> 赞同：11
> 
> 时间：2012-12-14T10:42:19.037
> 
> 标签：python, numpy

保存 numpy 掩码数组的最有效方法是什么？不幸的是`numpy.save`不起作用：

```
import numpy as np
a = np.ma.zeros((500, 500))
np.save('test', a) 
```

这给出了一个：

```
NotImplementedError: Not implemented yet, sorry... 
```

一种方法似乎是使用pickle，但不幸的是效率不高（文件很大），并且与平台无关。此外，[netcdf4](http://code.google.com/p/netcdf4-python/)似乎可以工作，但只是为了保存一个简单的数组就需要很大的开销。

以前有人遇到过这个问题吗？我很想只做`numpy.save`一个`array.data`，另一个做面具。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-14T10:44:35.427

```
import numpy as np
a = np.ma.zeros((500, 500))
a.dump('test') 
```

然后阅读它

```
a = np.load('test') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-27T01:05:35.323

如果您有一个不需要保存的固定掩码，那么您可以只保存有效值：

```
a = np.ma.MaskedArray(values,mask)
np.save('test', a.compressed()) 
```

然后，您可以通过以下方式恢复它：

```
compressed = np.load('test')
values = np.zeros_like(mask, dtype=compressed.dtype)
np.place(values, ~mask, compressed)
a = np.ma.MaskedArray(values, mask) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-10T11:48:18.403

一种简单的方法是分别保存掩码数组的数据和掩码：

```
np.save('DIN_WOA09.npy',DIN_woa.data)

np.save('mask_WOA09.npy',DIN_woa.mask) 
```

然后稍后，您可以从数据和掩码中重建掩码数组。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-02-26T10:52:04.947

当前[接受的答案](https://stackoverflow.com/a/13877105/981499)有些过时，如果存储的数组是稀疏的（它依赖于数组的未压缩酸洗），效率会非常低。

保存/加载掩码数组的更好方法是使用`npz`文件：

```
import numpy as np

# Saving masked array 'arr':
np.savez_compressed('test.npz', data=arr.data, mask=arr.mask)

# Loading array back
with np.load('test.npz') as npz:
    arr = np.ma.MaskedArray(**npz) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-24T19:01:39.657

将其保存在字典中将使您可以毫无问题地保持其原始格式和掩码。就像是：

```
b={}
b['a'] = a
np.save('b', b) 
```

应该可以正常工作。

# android - 我想在按钮点击时获得搜索结果

> ID：13877064
> 
> 赞同：1
> 
> 时间：2012-12-14T10:42:20.123
> 
> 标签：android

我想通过在编辑文本上输入关键字然后输入按钮来从现有列表中检索匹配的结果。我正在尝试这段代码。但它不起作用。请注意，我想要按钮单击的结果。请整理一下问题。

```
edt = (EditText) findViewById(R.id.searchbar);
Button b = (Button)findViewById(R.id.search_button);

     b. setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
             edt.addTextChangedListener(new TextWatcher()
                {

                    @Override
                    public void onTextChanged( CharSequence arg0, int arg1, int arg2, int arg3)
                    {

                        // TODO Auto-generated method stub
                                    }

                    @Override
                    public void beforeTextChanged( CharSequence arg0, int arg1, int arg2, int arg3)
                    {
                        // TODO Auto-generated method stub

                    }

                    @Override
                    public void afterTextChanged( Editable arg0)
                    {
                        // TODO Auto-generated method stub
                        SearchListView.this.arrad.getFilter().filter(arg0);

                    }
           });

        }
    });

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:48:07.693

好的，首先取出`addTextChangedListener(new TextWatcher()..`按钮的点击..

把它放在`onCreate()`Activity中。

定义类级字符串变量

```
String filterString = ""; 
```

现在，在

```
@Override  
public void afterTextChanged( Editable arg0)  
{   
 filterString = arg0.toString();  
} 
```

和按钮的`onClick()`

只放这一行，

```
SearchListView.this.arrad.getFilter().filter(filterString); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T10:48:00.787

这不起作用的原因是您`TextChangedListener`在`onClickListener`.

这意味着当您单击按钮时，它将添加一个**等待文本更改**的侦听器。

您不需要此侦听器，因为您的文本已经更改。

`onClicklistener`从自身操作 SearchList

```
SearchListView.this.arrad.getFilter().filter(reqdString); 
```

# javascript - 使用 XHR 发送 blob 和其他数据

> ID：13877065
> 
> 赞同：0
> 
> 时间：2012-12-14T10:42:21.290
> 
> 标签：javascript, xmlhttprequest, blob

我正在使用 XHR 请求发送一个 blob 文件，但我需要用它发送一些其他数据；最好是一组数据。

我知道我不能只对 blob 数据调用 json_encode，因为它是二进制数据；但是有没有办法做到这一点？

编辑：我可以使用 formdata 来组合 blob 和数组吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-14T11:17:50.040

通常，您将数据编码为 base64，然后使用 multipart。文件数据以 base64 编码，您需要在服务器端解码。在客户端，您可以使用 window.btoa

```
Content-Type:multipart/form-data, boundary=xxxxxxxxx

--xxxxxxxxx
Content-Disposition: form-data; name='uploadfile'; filename='123_logo.jpg'
Content-Transfer-Encoding: base64
Content-Type: image/jpeg
/*base64data*/` 
```

如果附加数据很小，您可以将其设置为文件名（服务器上的自定义逻辑会对其进行解释。否则，请使用 multipart 的另一部分。

20MB 对于单次上传来说可能是一个大尺寸。您可能需要考虑以更小的块进行分块。

# java - 用于 java 连接问题的 Ganymed SSH

> ID：13877069
> 
> 赞同：0
> 
> 时间：2012-12-14T10:42:34.293
> 
> 标签：java, ssh

我们正在使用 Ganymed-SSH 库并在对另一台机器执行 SSH 时遇到此错误。

```
[root@XXXX test]# java -classpath .:ganymed-ssh2-build210.jar Basic 

ERROR:java.io.IOException: There was a problem while connecting to 10.X.X.X:22
java.io.IOException: There was a problem while connecting to 10.X.X.X:22
    at ch.ethz.ssh2.Connection.connect(Connection.java:699)
    at ch.ethz.ssh2.Connection.connect(Connection.java:490)
    at Basic.main(Basic.java:27)
Caused by: java.io.IOException: Key exchange was not finished, connection is closed.
    at ch.ethz.ssh2.transport.KexManager.getOrWaitForConnectionInfo(KexManager.java:91)
    at   ch.ethz.ssh2.transport.TransportManager.getConnectionInfo(TransportManager.java:229)
    at ch.ethz.ssh2.Connection.connect(Connection.java:655)
    ... 2 more
Caused by: java.io.IOException: Cannot read full block, EOF reached.
    at ch.ethz.ssh2.crypto.cipher.CipherInputStream.getBlock(CipherInputStream.java:81)
    at ch.ethz.ssh2.crypto.cipher.CipherInputStream.read(CipherInputStream.java:108)
    at ch.ethz.ssh2.transport.TransportConnection.receiveMessage(TransportConnection.java:231)
    at ch.ethz.ssh2.transport.TransportManager.receiveLoop(TransportManager.java:669)
    at ch.ethz.ssh2.transport.TransportManager$1.run(TransportManager.java:468)
    at java.lang.Thread.run(Thread.java:636) 
```

谁能解释这里可能是什么问题？我们应该从哪里开始调试？来自普通 shell 的 SSH 访问正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:54:00.167

可能你的公钥有问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T05:44:57.953

在 solaris 10 上的 141742-01/02 补丁后 ssh 失败！

在 ssh/sshd 中启用的 aes192/aes256 支持在 S10u3 或更早版本上不起作用

一种解决方法是禁用 ssh 和 sshd 的 aes192/aes256 密码。更改两个配置文件 /etc/ssh/ssh_config 和 /etc/ssh/sshd_config 并添加以下行：

密码 aes128-ctr、aes128-cbc、arcfour、3des-cbc、blowfish-cbc

您必须重新启动 sshd 以获取更改（“svcadm restart ssh”）。

资料来源： [http ://blog.mydream.com.hk/howto/matching-cipher-is-not-supported-aes256-cbc](http://blog.mydream.com.hk/howto/matching-cipher-is-not-supported-aes256-cbc)

# iphone - scrollView 上的触摸功能

> ID：13877076
> 
> 赞同：0
> 
> 时间：2012-12-14T10:42:46.440
> 
> 标签：iphone, objective-c, ios, ios5, uiscrollview

我正在开发一个应用程序，我的任务是从我创建滚动视图并将图像放在滚动条上的数据库中获取 url 链接。
我已经编写了一些代码，当我单击图像时，我必须在我放置在滚动视图上方的 web 视图中显示 url 页面。
为此，我编写了用于在单击图像时获取 url 的触摸代码，但我遇到了问题，例如我的单击不适用于图像和滚动视图，但它正在处理图像的下部和滚动视图，这是一个普通视图。你可以在下面找到我的触摸码

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{   
    UITouch * touch = [[event allTouches] anyObject];   
    for(int index=0;index<[array count];index++)
{

    UIImageView *imgView = [array objectAtIndex:index];  
      if(CGRectContainsPoint([imgView frame], [touch locationInView:scrollView]))
        {  
            NSString *strgetcontenturl = [[NSString alloc]initWithString:[arrayvideoFile objectAtIndex:index]];  
            NSURL *url = [NSURL URLWithString:strgetcontenturl];  
            [webview loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:strgetcontenturl]]];
            NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];  
             [webview loadRequest:requestObj];

        }}} 
```

这里**array**是我存储所有图像 init 的地方，而**arrayvideoFile**是我存储所有 url 的地方。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:43:00.987

使用下面的代码。

```
for(int Tag =0; Tag < [array count]; Tag++) {
    UIButton *btn_URL = [UIButton butttonWithType:UIButtonTypeCustom];

    UIImage * btn_URL = [btn_URL setImage:buttonImage forState:UIControlStateNormal];

    btn_URL.frame = CGRectMake(x, y, buttonImage.size.width, buttonImage.size.height);

    [btn_URL addTarget:self action:@selector(buttonAction:) forControlEvents:UIControlEventTouchUpInside];

    btn_URL.tag = Tag;

    [scrollview addSubview:btn_URL];
}

-(void)buttonAction:(id)sender {
    NSURL *URL = [NSURL URLWithString:[NSString stringWithFormat:@"%@",[array objectAtIndex:[sender Tag]]]];

} 
```

在这里，您可以将用户重定向到 URL。

如果您需要任何帮助，请告诉我。

谢谢，

鹤芒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:23:19.987

只需设置`imgView.userInteractionEnabled=YES;`它可能会对您有所帮助。

否则使用此代码

```
UIScrollView *scrollview4preview=[[UIScrollView alloc]initWithFrame:CGRectMake(0, 44, self.view.frame.size.width, self.view.frame.size.height-44)];
    scrollview4preview.backgroundColor=[UIColor clearColor];
    [self.view addSubview:scrollview4preview];

    int yval=0;
    for (int i=0; i<[arrary count]; i++) {
        UIButton *btn4preview=[[UIButton alloc]init];
        btn4preview.tag=i;
        btn4preview.frame=CGRectMake(scrollview4preview.frame.origin.x+10, i*yval, 150, 150);
        [btn4preview setImage:[UIImage imageNamed:@"YourImageName.png"] forState:UIControlStateNormal];
        [btn4preview addTarget:self action:@selector(btnPreviewSelect:) forControlEvents:UIControlEventTouchUpInside];
        btn4preview.autoresizingMask=UIViewAutoresizingFlexibleLeftMargin;
        [scrollview4preview addSubview:btn4preview];

    }

    scrollview4preview.contentSize=CGSizeMake(scrollview4preview.frame.size.width, yval+160);

-(void)btnPreviewSelect:(id)sender
{
    UIButton *btn=(UIButton *)sender;

NSString *strgetcontenturl = [[NSString alloc]initWithString:[arrary objectAtIndex:btn.tag]];
NSURL *url = [NSURL URLWithString:strgetcontenturl];
[webview loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:strgetcontenturl]]];
NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
[webview loadRequest:requestObj];

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T11:09:54.377

你是如何把你的图片放到你的 scollview 上的？图像视图？

我会将它们与 UIButton (CustomType) 一起放置，然后您可以将目标添加到该按钮而无需检测触摸。因为 UIButton 已经检测到触摸事件。

```
UIButton *button = [UIButton butttonWithType:UIButtonTypeCustom];
UIImage * buttonImage = ....
[button setImage:buttonImage forState:UIControlStateNormal];
button.frame = CGRectMake(x, y, buttonImage.size.width, buttonImage.size.height);
[button addTarget:self
           action:@selector(buttonAction:)
 forControlEvents:UIControlEventTouchUpInside];
[scrollview addSubview:button]; 
```

编辑：添加代码

# java - 如何在 Hadoop MapReduce 中将对象设置为 Map 输出的值？

> ID：13877077
> 
> 赞同：4
> 
> 时间：2012-12-14T10:42:48.000
> 
> 标签：java, hadoop, mapreduce, distributed-computing, hdfs

在 Hadoop MapReduce 中，对于中间输出（由 map() 生成），我希望中间输出的值是以下对象。

```
 MyObject{
  date:Date
  balance:Double
} 
```

我该怎么做。我应该创建自己的可写类吗？

我是 MapReduce 的新手。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-14T11:20:59.390

您可以编写可以作为映射器值发出的自定义类型。但是无论你想作为值发出什么，都必须实现可写接口。你可以这样做：

```
public class MyObj implements WritableComparable<MyObj>{

    private String date;
    private Double balance;

    public String getDate() { return date;}
    public Double getBalance() { return balance;}

    @Override
    public void readFields(DataInput in) throws IOException {

        //Define how you want to read the fields
        }
    @Override
    public void writeFields(DataOutput out) throws IOException {

        //Define how you want to write the fields
    }
        .......
        .......
        .......

} 
```

或者，您可以使用 Avro 序列化框架。

# mysql - 对 2 列使用 LIKE

> ID：13877080
> 
> 赞同：-1
> 
> 时间：2012-12-14T10:42:57.853
> 
> 标签：mysql

我需要在`hostel`表中搜索。

结构体：

```
CREATE TABLE hostel( 
p_id VARCHAR(5) NOT NULL,
hostel VARCHAR(50) NOT NULL,
address VARCHAR(50) NOT NULL
PRIMARY KEY(p_id)); 
```

我已在`$word`

```
select * from hostel where hostel like '%$word%' 
```

下面的查询会起作用吗？我需要在“hostel”和“address”列中搜索

```
select * from hostel where hostel like '%$word%' AND address like '%$word%' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T10:45:52.913

```
select * from hostel where hostel like '%$word%' OR address like '%$word%' 
```

会带来更好的结果

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T11:33:23.010

```
Better change those searchable fields(hostel,address) to full text which will fasten the search

SELECT MATCH('Content') AGAINST ('keyword1
keyword2') as Relevance FROM table 

select match($word) against (hostel,address)  as Relevance FROM table 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T10:45:22.403

这没有问题

```
select * from hostel where hostel like '%$word%' AND address like '%$word%' 
```

# java - 如何使用泽西岛下载 PDF 文件？

> ID：13877081
> 
> 赞同：16
> 
> 时间：2012-12-14T10:42:58.543
> 
> 标签：java, file, download, jersey

我需要使用 Jersey Web Services 下载 pdf 文件，我已经执行了以下操作，但收到的文件大小始终为 0（零）。

```
 @Produces({"application/pdf"})
 @GET
 @Path("/pdfsample")
 public Response getPDF()  {

    File f = new File("D:/Reports/Output/Testing.pdf");
    return Response.ok(f, "application/pdf").build();

 } 
```

请帮助做正确的方法，谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-07-26T17:55:09.367

Mkyong总是提供。看起来您唯一缺少的是正确的响应标头。

[http://www.mkyong.com/webservices/jax-rs/download-excel-file-from-jax-rs/](http://www.mkyong.com/webservices/jax-rs/download-excel-file-from-jax-rs/)

```
@GET
@Path("/get")
@Produces("application/pdf")
public Response getFile() {
    File file = new File(FILE_PATH);
    ResponseBuilder response = Response.ok((Object) file);
    response.header("Content-Disposition","attachment; filename=test.pdf");
    return response.build();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T10:45:51.497

您不能只给出 a`File`作为实体，它不会那样工作。

您需要自己阅读文件并将数据（作为 a `byte[]`）作为实体提供。

**编辑：**
您可能还想查看流式输出。这有两个优点；1）它允许您使用服务文件，而无需读取整个文件的内存开销；2）它可以立即开始向客户端发送数据，而无需您先读取整个文件。有关流式传输的示例，请参阅[https://stackoverflow.com/a/3503704/443515 。](https://stackoverflow.com/a/3503704/443515)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-19T07:35:47.507

对于未来的访客，

这将找到位于传递的 ID 处的 blob，并将其作为 PDF 文档在浏览器中返回（假设它是存储在数据库中的 pdf）：

```
@Path("Download/{id}")
@GET
@Produces("application/pdf")
public Response getPDF(@PathParam("id") Long id) throws Exception {
    Entity entity = em.find(ClientCase.class, id);
    return Response
            .ok()
            .type("application/pdf")
            .entity(entity.getDocument())
            .build();
} 
```

# wcf - 多用户 wcf 文件存储

> ID：13877084
> 
> 赞同：1
> 
> 时间：2012-12-14T10:43:10.577
> 
> 标签：wcf, file, load, storage

我考虑过使用 WCF 创建文件存储。我在 Internet 上搜索并找到了很多示例并编写了他的服务：

```
namespace CTFileStorage
{
 [ServiceContract(Namespace = "http://Microsoft.ServiceModel.Samples")]
    interface CTIFileStorageClass
    {
            [OperationContract]
            CTFileName UploadStream(CTRemoteFileInfo faInfo);
    }
    [MessageContract]
    public class CTRemoteFileInfo : IDisposable
    {
        [MessageHeader(MustUnderstand = true)]
        public string FileName;

        [MessageHeader(MustUnderstand = true)]
        public long Length;

        [MessageBodyMember(Order = 1)]
        public System.IO.Stream FileByteStream;

        public void Dispose()
        {
            if (FileByteStream != null)
            {
                FileByteStream.Close();
                FileByteStream = null;
            }
        }
    }
    [MessageContract]
    public class CTFileName 
    {
        [MessageHeader(MustUnderstand = true)]
        public string FileName;

    }
    public class CTFileStorageClass : CTIFileStorageClass
    {

        public CTFileName UploadStream(CTRemoteFileInfo faFileInfo)
        {
            try
            {
                Guid guid = Guid.NewGuid();
                FileStream targetStream = null;
                Stream sourceStream = faFileInfo.FileByteStream;

                string uploadFolder = @"D:\Storage\";
                string[] paths=faFileInfo.FileName.Split('.');
                string path=null;
                if (paths.Length>=2)
                {
                  path="."+paths[paths.Length-1]; 
                }
                string filePath = Path.Combine(uploadFolder, guid.ToString()+path);

                using (targetStream = new FileStream(filePath, FileMode.Create,
                                      FileAccess.Write, FileShare.None))
                {
                    //read from the input stream in 65000 byte chunks

                    const int bufferLen = 65000;
                    byte[] buffer = new byte[bufferLen];
                    int count = 0;
                    while ((count = sourceStream.Read(buffer, 0, bufferLen)) > 0)
                    {
                        // save to output stream
                        targetStream.Write(buffer, 0, count);
                        Thread.Sleep(10);
                    }
                    targetStream.Close();
                    sourceStream.Close();
                }
                CTFileName fileName = new CTFileName() { FileName = guid.ToString() };
                return fileName;
            }
            catch
            {
                return null;
            }
      }
    }
} 
```

WCF 托管在 windows service.app.config 服务上：`

```
<configuration>
  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="binding" openTimeout="04:00:00" sendTimeout="04:00:00" receiveTimeout="04:00:00" closeTimeout="04:00:00"
            allowCookies="true" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
            maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647"
            messageEncoding="Mtom" textEncoding="utf-8" transferMode="Streamed"
            useDefaultWebProxy="true">
          <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647"
              maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None"
                realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <services>
      <!-- This section is optional with the new configuration model
           introduced in .NET Framework 4\. -->
      <service name="CTFileStorage.CTFileStorageClass"
               behaviorConfiguration="CalculatorServiceBehavior">
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8000/ServiceModelSamples/service"/>
          </baseAddresses>
        </host>
        <!-- this endpoint is exposed at the base address provided by host: http://localhost:8000/ServiceModelSamples/service  -->
        <endpoint address=""

                  binding="basicHttpBinding" bindingConfiguration="binding" 
                  contract="CTFileStorage.CTIFileStorageClass" />
        <!-- the mex endpoint is exposed at http://localhost:8000/ServiceModelSamples/service/mex -->
        <endpoint address="mex"
                  binding="mexHttpBinding"
                  contract="IMetadataExchange" />
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="CalculatorServiceBehavior">
          <serviceMetadata httpGetEnabled="true"/>
          <dataContractSerializer maxItemsInObjectGraph="2147483647" />
          <serviceDebug includeExceptionDetailInFaults="False"/>
          <serviceThrottling
            maxConcurrentCalls="1000"
            maxConcurrentSessions="1000"
            maxConcurrentInstances="1000"
          />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
</configuration>` 
```

对于建模负载创建客户端控制台应用程序：

```
 static void Main(string[] args)
    {
        Thread thread = new Thread(new ParameterizedThreadStart(Copy));
        thread.Start("D:\\toad10513\\toad10513.rar");

        Thread thread1 = new Thread(new ParameterizedThreadStart(Copy));
        thread1.Start("D:\\toad10513\\toad105131.rar");
        Thread thread2 = new Thread(new ParameterizedThreadStart(Copy));
        thread2.Start("D:\\toad10513\\toad105132.rar");
        Thread thread3 = new Thread(new ParameterizedThreadStart(Copy));
        thread3.Start("D:\\toad10513\\toad105133.rar");
        Thread thread4 = new Thread(new ParameterizedThreadStart(Copy));
        thread4.Start("D:\\toad10513\\toad105134.rar");
        Thread thread5 = new Thread(new ParameterizedThreadStart(Copy));
        thread5.Start("D:\\toad10513\\toad105135.rar");

    }
    private static void Copy(object faFile)
    {
        string s = faFile as string;
        if (s != null)
        {
            StorageClient.Storage.CTIFileStorageClassClient client = new Storage.CTIFileStorageClassClient();
            Stream sw = File.Open(s, FileMode.Open);
            Console.WriteLine(faFile.ToString());
            client.UploadStream(ref s, sw.Length, sw);

            sw.Close();
        }
    }
}
} 
```

此应用程序在存储中上传，在不同的线程中文件大小为 400 MB。如果使用一个线程上传结束好。但是如果启动 6 个线程，那只能工作 3 个线程，其他线程滞后。工作几分钟后，我得到异常：“连接套接字失败”。

# sql - Informix - 从日期中提取月份中的某一天，并且只选择奇数天

> ID：13877085
> 
> 赞同：2
> 
> 时间：2012-12-14T10:43:14.250
> 
> 标签：sql, informix

如何从日期中提取月份中的某一天，并在 Informix SQL 中只选择奇数天？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T06:07:31.283

月份中的日期只是`DAY(date_or_datetime_column)`函数，与`MONTH()`和`YEAR()`函数相关。仅获取奇数是通过简单的模 2 表达式完成的。

所以我认为你只需要：

```
SELECT date_col, DAY(date_col)
  FROM table
  WHERE MOD(DAY(date_col), 2) = 1 
```

希望这很有用。

# java - 使用 Spring MVC 和 Html 上传图片

> ID：13877089
> 
> 赞同：4
> 
> 时间：2012-12-14T10:43:28.740
> 
> 标签：java, html, spring, spring-mvc, illegalargumentexception

当我使用我的 spring mvc 代码时，我不断收到此错误，我试图使用 spring mvc 进行图像上传，我缺少什么参数。

```
org.springframework.web.util.NestedServletException: Request processing failed; 
    nested exception is java.lang.IllegalArgumentException: argument type mismatch
java.lang.IllegalArgumentException: argument type mismatch
... 
```

我的调度程序 servlet 是

```
<context:component-scan base-package="com.ImageUploadSpring.Controller" />

<!-- <bean id="simpleHandler" class="org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter"/> -->
     <bean
        class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter" />

    <bean class="org.springframework.web.servlet.view.BeanNameViewResolver" />  

    <bean id="multipartResolver"
        class="org.springframework.web.multipart.commons.CommonsMultipartResolver" />

     <bean id="urlMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
        <property name="mappings">
           <props>              
                <prop key="/Upload.html">FileUpload</prop>                  
            </props>
        </property>
    </bean> 
      <bean id="FileUpload" class="com.ImageUploadSpring.Controller.FileUpload">
        <property name="commandName" value="ImageUpload"/>  
         <property name="commandClass" value="com.ImageUploadSpring.Bean.UploadItem"/>
         <property name="formView" value="ImageUpload"/>
        <property name="successView" value="message"/> 
    </bean>
 <bean id="FileUpload" class="com.ImageUploadSpring.Controller.FileUpload"></bean>
    <bean id="viewResolver"
        class="org.springframework.web.servlet.view.InternalResourceViewResolver">

        <property name="prefix" value="/WEB-INF/view/" />
        <property name="suffix" value=".html" />
    </bean> 
```

**控制器类是**

```
public class FileUpload extends SimpleFormController{

 @RequestMapping(value = "/Upload.html", method = RequestMethod.POST)
protected ModelAndView onSubmit(HttpServletRequest request,
        HttpServletResponse response, Object command, BindException errors,HttpSession session)  {
    System.out.println("inside submit method");
    try{

    UploadItem item=(UploadItem)command;

    MultipartFile file = item.getFile();

    InputStream inputStream = null;
    OutputStream outputStream = null;
    if (file.getSize() > 0) {
        inputStream = file.getInputStream();

        outputStream = new FileOutputStream("D:/UploadedFiles/Images/"
                + file.getOriginalFilename());

        System.out.println(file.getOriginalFilename());

        int readBytes = 0;
        byte[] buffer = new byte[8192];
        while ((readBytes = inputStream.read(buffer, 0, 8192)) != -1) {

            outputStream.write(buffer, 0, readBytes);
        }
        outputStream.close();
        inputStream.close();
        session.setAttribute("uploadFile", "D:/UploadedFiles/Images/"
                + file.getOriginalFilename());
    }       

    }catch (Exception e) {
        e.printStackTrace();
    }   

    return new ModelAndView("message");

}
@Override
 protected void initBinder(HttpServletRequest request, ServletRequestDataBinder binder)
 throws ServletException {

     binder.registerCustomEditor(byte[].class, new ByteArrayMultipartFileEditor());

} 
```

**我的html页面是**

```
<form name="ImageUpload" action="/ImageUploadSpring/service/Upload.html" method="POST" enctype="multipart/form-data">
<div>
Select images:  
<input type="text" id="box"/> 
<input type="file" id="UploadFile" name="UploadFile"  onchange="CopyMe(this,'box');" accept="image/*" size="40" style="width: 91px;" multiple />
<br><br>  
<input type="submit" value="Upload" /><br><br>
</div>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:59:20.413

试试这个：

```
protected ModelAndView onSubmit(HttpServletRequest request,HttpServletResponse response,@RequestParam(value="UploadFile") MultipartFile image, BindException errors,HttpSession session) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T12:46:24.720

在定义`<input type="file">`时，您已经指定了名称`name="UploadFile"`。而在您的 UploadItem 命令对象中，文件属性是`file`（从 item.getFile() 猜测）。你确定你正确地映射了文件名吗？

有关 Spring MVC 文件上传的工作教程，请参阅[本教程](http://viralpatel.net/blogs/spring-mvc-multiple-file-upload-example/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-14T07:30:47.747

本教程[http://www.journaldev.com/2573/spring-mvc-file-upload-example-tutorial-single-and-multiple-files](http://www.journaldev.com/2573/spring-mvc-file-upload-example-tutorial-single-and-multiple-files)也适合我。这很简单。重要的是当你使用

```
<bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
        <property name="maxUploadSize" value="100000" />
</bean> 
```

，不要忘记将 commons-fileupload 添加到您的 pom 依赖项中。

# android - Android webservice调用抛出异常

> ID：13877090
> 
> 赞同：0
> 
> 时间：2012-12-14T10:43:33.290
> 
> 标签：android, web-services, android-manifest

我正在使用 ksoap2 Web 服务开发一个 android 应用程序。Web 服务调用工作正常如果我设置

`android:minSdkVersion="8" and android:targetSdkVersion="8"`在清单文件中。

但我的应用程序应该需要

`android:minSdkVersion="14" and android:targetSdkVersion="16"`.

如果我这样设置，它会在调用 Web 服务时引发异常。可能是什么问题？你能分享你的建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T10:45:26.367

没有看到任何代码很难说，但可能你正在`UI Thread`. 直到`Android 3.0`. 由于`Android 3.0`被`NetworkOnMainThreadExecption`抛出

# jquery - 停止手风琴菜单的打开和关闭？

> ID：13877092
> 
> 赞同：2
> 
> 时间：2012-12-14T10:43:33.703
> 
> 标签：jquery

我将以下 jQuery 用于手风琴菜单：http: [//jsfiddle.net/fPWeq/](http://jsfiddle.net/fPWeq/)

```
rel = 0;
$('.sub-menu').hover(function(){ // findind mouse postion
        rel = 1; // if mouse on submenu
    }, function(){ 
        rel = 0;  // if mouse out submenu
});
$('.menu > li').live("click",function(){
        if(!$(this).hasClass("active")){ // if not already opened
            $('.sub-menu').slideUp();    // hide all other submenu
            $('.sub-menu',this).slideDown();  // show which your clicked
            $(".menu > li").remove('active');  //  remove all active class in li
            $(this).addClass('active'); //adding active class which your clicked li
        }
        else{
            if(rel==0){
                $('.sub-menu').slideUp(); // if clicked already opend parent that will close
                $(this).removeClass('active'); // remove all active class
            }
            else{
            }
        }
});
;​ 
```

当单击其中的子菜单链接时，我很难弄清楚如何停止活动（预先打开的）子菜单关闭和再次打开。

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:45:40.623

删除 `class="current-parent"` ，它不应该显示子打开。检查这里[http://jsfiddle.net/fPWeq/1/](http://jsfiddle.net/fPWeq/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T10:47:54.530

[`.toggleClass("current-parent")`](http://api.jquery.com/toggleClass/)如果您想再次激活打开/关闭，这也是一个不错的选择。

# windows - 在 windows 中创建服务

> ID：13877093
> 
> 赞同：0
> 
> 时间：2012-12-14T10:43:48.733
> 
> 标签：windows, windows-services

我想创建一个 Windows 服务来在启动时运行一个 exe。实际上我正在使用mongodb。每次我首先需要启动 mongod.exe 来执行所有操作。

请提供一些建议以创建服务以在启动时启动此 exe。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:53:58.027

Windows 服务需要与 Windows 的服务控制管理器进行通信。我猜想 mongodb 不支持这个开箱即用。因此，您要么需要创建一个启动 mongodb 的小型服务框架，要么可以使用 srvany.exe（[http://support.microsoft.com/kb/137890/en-us/](http://support.microsoft.com/kb/137890/en-us/)）之类的东西。

可以使用 SC.EXE 完成服务安装

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T06:28:10.097

我从这个链接得到了答案。

它工作正常。

```
http://docs.mongodb.org/manual/tutorial/install-mongodb-on-windows/#mongodb-as-a-windows-service 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T14:14:46.920

MongoDB 已经作为服务运行。你为什么不[按通常的方式安装它](http://api.mongodb.org/wiki/current/Windows%20Service.html)？

# php - 带有父子类别的 PHP json_encoding 数据

> ID：13877094
> 
> 赞同：6
> 
> 时间：2012-12-14T10:43:51.073
> 
> 标签：php, json

我尝试使用 json_encoding 大约两个小时，但没有得到所需的输出。实际上这是对移动应用程序开发人员的要求，他们以我将在此处解释的格式提出要求。下面的代码是我尝试过的：

```
include_once("class_connection.php");

//Getting the Parent Category

$sqlStr = mysql_query("select catname , id from `category` where `parentid`='0'");
$jsonArray = array();

while ($fetchStr = mysql_fetch_assoc($sqlStr)) {

    $jsonArray[] = array("ParentCategory" => $fetchStr["catname"]);
        $id = $fetchStr['id'];

    //Getting child categories from the above parent

    $sqlChildStr = mysql_query("SELECT catname,id,parentid FROM `category` where `parentid`='$id'");

    while ($fetchchildStr = mysql_fetch_assoc($sqlChildStr)) {

        $jsonArray[] = array("ChildCategory" => $fetchchildStr["catname"]);
    }

}

echo json_encode(array("JsonOutput" => $jsonArray)) . "<br />"; 
```

输出是：

```
"JsonOutput":[{"ParentCategory":"Animals"},{"ChildCategory":"Bear"},{"ChildCategory":"Deer"},{"ChildCategory":"Dolphins"},
{"ParentCategory":"Art"},{"ChildCategory":"Hand Painting"},{"ChildCategory":"Painting"},{"ChildCategory":"3D"},{"ChildCategory":"Abstract"}]} 
```

在这里，在上面的输出中，父类别数组是空的，没有子类别数组。我想将所有子类别数组存储在其父类别数组中，最后我必须将父类别和子类别都存储到 JsonOutput 数组中，所以我希望输出为

```
"JsonOutput":[{
"ParentCategory":"Animals" : [{
    {"ChildCategory":"Bear"},{"ChildCategory":"Deer"},{"ChildCategory":"Dolphins"}
]}
"ParentCategory":"Arts" : [{
    {"ChildCategory":"Hand Painting"},{"ChildCategory":"Painting"},{"ChildCategory":"3D"}, {"ChildCategory":"Abstract"}
]}
]} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T11:10:22.383

您可能需要这样做（仅显示重要位）：

```
$jsonArray = array();
while ($parentCat = mysql_fetch_assoc($sqlStr)) {
    $temp = array(
        "ParentCategory" => $parentCat["catname"]
    );
    while ($childCat = mysql_fetch_assoc($sqlChildStr)) {
        $temp["ChildCategory"][] = array(
            "ChildCategory" => $childCat["catname"]
        );
    }
    $jsonArray[] = $temp;
} 
```

我使用了一个临时变量来存储和操作父类别。这会在循环结束时添加到主数组中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-14T10:59:26.597

请使用以下代码，在while循环中给出索引...

```
$jsonArray = {};
while ($fetchStr = mysql_fetch_assoc($sqlStr)) {

    //$jsonArray[] = array("ParentCategory" => $fetchStr["catname"]);
        $id = $fetchStr['id'];

    //Getting child categories from the above parent

    $sqlChildStr = mysql_query("SELECT catname,id,parentid FROM `category` where `parentid`='$id'");

    while ($fetchchildStr = mysql_fetch_assoc($sqlChildStr)) {

        $jsonArray["ParentCategory"][$fetchStr["catname"]] = array("ChildCategory" => $fetchchildStr["catname"]);
    }

}

echo json_encode(array("JsonOutput" => $jsonArray)) . "<br />"; 
```

# c# - 如何使用多线程更新标签文本

> ID：13877096
> 
> 赞同：-1
> 
> 时间：2012-12-14T10:43:56.667
> 
> 标签：c#, asp.net, .net, multithreading, delegates

> **可能重复：**
> [如何在使用多线程时更新 aspx 页面](https://stackoverflow.com/questions/13861339/how-to-update-aspx-page-while-using-multithreading)

我想在 asp.net 网站中执行多线程时更新**标签文本，我的代码工作正常，但它不更新****标签**文本。当我调试它时，它工作正常，并在后面的代码中更新标签的值，但它不影响字体屏幕（页面）。我的代码是：

**.ASPX 代码：**

```
<form id="form1" runat="server">
    <div style="width:100%; text-align:center;">
        <asp:ScriptManager ID="ScriptManager1" runat="server">
        </asp:ScriptManager>
        <asp:UpdatePanel ID="UpdatePanel1" runat="server">
            <ContentTemplate>
        <br /> <br /> <br /> <br /> <br />
        Thread 1: <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>  <br /><br />
        Thread 2: <asp:Label ID="Label2" runat="server" Text="Label"></asp:Label> <br /><br />
        Thread 3: <asp:Label ID="Label3" runat="server" Text="Label"></asp:Label> <br /><br />
        Thread 4: <asp:Label ID="Label4" runat="server" Text="Label"></asp:Label> <br /><br />
        Thread 5: <asp:Label ID="Label5" runat="server" Text="Label"></asp:Label> <br /><br />
        Thread 6: <asp:Label ID="Label6" runat="server" Text="Label"></asp:Label> <br /><br />
        Thread 7: <asp:Label ID="Label7" runat="server" Text="Label"></asp:Label> <br />
            </ContentTemplate>
        </asp:UpdatePanel>
    </div>
    </form> 
```

**.CS 代码：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Threading;
using System.Runtime.Remoting.Messaging;

public partial class Default_test : System.Web.UI.Page
{
    public delegate string Delg_Method1(int a, int b);
    public delegate string Delg_Method2(int a, int b);
    public delegate string Delg_Method3(int a, int b);
    public delegate string Delg_Method4(int a, int b);
    public delegate string Delg_Method5(int a, int b);
    public delegate string Delg_Method6(int a, int b);
    public delegate string Delg_Method7(int a, int b);
    protected void Page_Load(object sender, EventArgs e)
    {
        Label1.Text = "Waiting ...";
        Label2.Text = "Waiting ...";
        Label3.Text = "Waiting ...";
        Label4.Text = "Waiting ...";
        Label5.Text = "Waiting ...";
        Label6.Text = "Waiting ...";
        Label7.Text = "Waiting ...";
        callingAsynchMultiThreads();

    }

    #region Threads

    public void callingAsynchMultiThreads()
    {

        AsyncCallback method1Callback = new AsyncCallback(Method1Complete);
        Delg_Method1 dlg_call1 = new Delg_Method1(Load_Method1);
        IAsyncResult iar1 = dlg_call1.BeginInvoke(1, 0, method1Callback, null);

        AsyncCallback method2Callback = new AsyncCallback(Method2Complete);
        Delg_Method2 dlg_call2 = new Delg_Method2(Load_Method2);
        IAsyncResult iar2 = dlg_call2.BeginInvoke(1, 1, method2Callback, null);

        AsyncCallback method3Callback = new AsyncCallback(Method3Complete);
        Delg_Method3 dlg_call3 = new Delg_Method3(Load_Method3);
        IAsyncResult iar3 = dlg_call3.BeginInvoke(1, 2, method3Callback, null);

        AsyncCallback method4Callback = new AsyncCallback(Method4Complete);
        Delg_Method4 dlg_call4 = new Delg_Method4(Load_Method4);
        IAsyncResult iar4 = dlg_call4.BeginInvoke(1, 3, method4Callback, null);

        AsyncCallback method5Callback = new AsyncCallback(Method5Complete);
        Delg_Method5 dlg_call5 = new Delg_Method5(Load_Method5);
        IAsyncResult iar5 = dlg_call5.BeginInvoke(1, 4, method5Callback, null);

        AsyncCallback method6Callback = new AsyncCallback(Method6Complete);
        Delg_Method6 dlg_call6 = new Delg_Method6(Load_Method6);
        IAsyncResult iar6 = dlg_call6.BeginInvoke(1, 5, method6Callback, null);

        AsyncCallback method7Callback = new AsyncCallback(Method7Complete);
        Delg_Method7 dlg_call7 = new Delg_Method7(Load_Method7);
        IAsyncResult iar7 = dlg_call7.BeginInvoke(1, 6, method7Callback, null);

    }
    public string Load_Method1(int a, int b)
    {
        int temp = a + b;
        return temp.ToString();
    }
    public string Load_Method2(int a, int b)
    {
        int temp = a + b;
        return temp.ToString();
    }
    public string Load_Method3(int a, int b)
    {
        int temp = a + b;
        return temp.ToString();
    }
    public string Load_Method4(int a, int b)
    {
        int temp = a + b;
        return temp.ToString();
    }
    public string Load_Method5(int a, int b)
    {
        int temp = a + b;
        return temp.ToString();
    }
    public string Load_Method6(int a, int b)
    {
        int temp = a + b;
        return temp.ToString();
    }
    public string Load_Method7(int a, int b)
    {
        int temp = a + b;
        return temp.ToString();
    }

    public void Method1Complete(IAsyncResult ar)
    {
        Thread.Sleep(500);
        Delg_Method1 dlgM1 = (Delg_Method1)((AsyncResult)ar).AsyncDelegate;
        //dlgM1.EndInvoke(ar);
        Label1.Text = dlgM1.EndInvoke(ar).ToString();

    }
    public void Method2Complete(IAsyncResult ar)
    {
        Thread.Sleep(1000);
        Delg_Method2 dlgM2 = (Delg_Method2)((AsyncResult)ar).AsyncDelegate;
        //dlgM2.EndInvoke(ar);
        Label2.Text = dlgM2.EndInvoke(ar).ToString();
    }
    public void Method3Complete(IAsyncResult ar)
    {
        Thread.Sleep(1500);
        Delg_Method3 dlgM3 = (Delg_Method3)((AsyncResult)ar).AsyncDelegate;
        //dlgM3.EndInvoke(ar);
        Label3.Text = dlgM3.EndInvoke(ar).ToString();
    }
    public void Method4Complete(IAsyncResult ar)
    {
        Thread.Sleep(2000);
        Delg_Method4 dlgM4 = (Delg_Method4)((AsyncResult)ar).AsyncDelegate;
        //dlgM4.EndInvoke(ar);
        Label4.Text = dlgM4.EndInvoke(ar).ToString();
    }
    public void Method5Complete(IAsyncResult ar)
    {
        Thread.Sleep(2500);
        Delg_Method5 dlgM5 = (Delg_Method5)((AsyncResult)ar).AsyncDelegate;
        //dlgM5.EndInvoke(ar);
        Label5.Text = dlgM5.EndInvoke(ar).ToString();
    }
    public void Method6Complete(IAsyncResult ar)
    {
        Thread.Sleep(3000);
        Delg_Method6 dlgM6 = (Delg_Method6)((AsyncResult)ar).AsyncDelegate;
        //dlgM6.EndInvoke(ar);
        Label6.Text = dlgM6.EndInvoke(ar).ToString();
    }
    public void Method7Complete(IAsyncResult ar)
    {
        Thread.Sleep(3500);
        Delg_Method7 dlgM7 = (Delg_Method7)((AsyncResult)ar).AsyncDelegate;
        //dlgM7.EndInvoke(ar);
        Label7.Text = dlgM7.EndInvoke(ar).ToString();

    }

    #endregion

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:52:15.007

这是因为页面生命周期已经完成，并且页面在线程完成更新其控件之前呈现/发送到浏览器。在调试期间，您可以看到线程完成了它们的工作，但正在更改已经发送到浏览器的标签。

一旦页面被发送到浏览器，服务器就不能在没有客户端请求“新版本”的情况下向客户端发送新版本。解决此问题的一种可能方法是让页面通过 AJAX / JavaScript 或类似方法不断检查更新，以便在线程完成时显示新值。

使用 an 每 5 秒更新一次页面的一个*非常*简单的示例`UpdatePanel`是：

**网页 (ASPX)**

```
<asp:UpdatePanel ID="updateView" runat="server" >
<ContentTemplate>

    <!-- Refresh the page automatically -->
    <asp:Timer ID="timAutoRefresh" runat="server" Interval="5000" OnTick="OnRefresh_Tick" />

</ContentTemplate>
</asp:UpdatePanel> 
```

**代码隐藏 (.cs)**

```
protected void OnRefresh_Tick(object sender, EventArgs e)
{       
    // Check values and update page...
} 
```

还有其他方法，这是一个非常简单的示例。您应该将标签添加到与计时器相同的 UpdatePanel 中并更改 UpdatePanel 以便它只更新自身以最小化回发等。

# c# - html帮助器中的可空枚举

> ID：13877100
> 
> 赞同：2
> 
> 时间：2012-12-14T10:44:10.280
> 
> 标签：c#, html-helper, nullable

我有一个视图模型，其中包含具有可空类型的枚举，如下所示：

```
public StudyLevel? studyLevel { get; set; } 
```

我已经制作了自定义 html 助手来显示一个下拉列表，用于将枚举呈现到视图中，可以使用的情况下显示为空

```
<option value="null">No value</option> 
```

问题是当我提交表单模型状态时给我错误：

```
studylevel cannot be "null" . 
```

你能建议我任何方法来帮助我处理视图中的可为空类型吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T10:45:35.787

我可能错了，但我很确定可空枚举和 MVC 默认模型绑定器存在一些限制。我会建议有一个代表“*没有价值*”的状态，而不是例如

```
StudyLevel.None 
```

这样你就不需要处理检查`null`等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T11:02:07.710

如果您更改您的 html 帮助程序以显示这样的 null 值怎么办？

```
<option>No value</option> 
```

还是像这样？

```
<option value="">No value</option> 
```

编辑：更好的选择（IMO）是创建一个集合，`SelectListItem`然后使用内置的 HTML 帮助器。请查看我几个月前创建的这篇文章，它可能会对您有所帮助。你可以像这样使用它：

```
@Html.EnumDropDownList<StudyLevel?>("studyLevel", "No value") 
```

更多信息在这里：

[ASP.NET MVC：为枚举创建本地化 DropDownLists](http://ruijarimba.wordpress.com/2012/02/17/asp-net-mvc-creating-localized-dropdownlists-for-enums/)

# objective-c - 将 UIBarButtonItem 更改为简单图标

> ID：13877101
> 
> 赞同：0
> 
> 时间：2012-12-14T10:44:20.450
> 
> 标签：objective-c, xcode, uinavigationbar, uibarbuttonitem

我试图在导航栏中显示“设置齿轮”而不是“设置”一词。有谁知道如何做到这一点？谢谢！

```
UIBarButtonItem *btnGo = [[UIBarButtonItem alloc] initWithTitle:@"Settings" 
style:UIBarButtonItemStyleBordered target:self action:@selector(settingsAction)];
self.navigationItem.rightBarButtonItem = btnGo; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:27:37.567

您可以先尝试制作一个 UIButton ，然后在其上设置齿轮图像

```
UIBarButtonItem *btnGo = [[UIBarButtonItem alloc] initWithCustomView:btn]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:23:21.533

不幸的是，没有获取此图像的默认方法。您应该使用`initWithImage:style:target:action:` 并添加自己的图像。您可以自己制作一个，或者从 Glyphish 之类的地方预先制作：[http ://www.glyphish.com](http://www.glyphish.com)

# php - PHP & PDO - 有什么方法可以建立“安全”的持久连接吗？

> ID：13877106
> 
> 赞同：3
> 
> 时间：2012-12-14T10:44:37.393
> 
> 标签：php, pdo, connection, persistent

我知道（通过阅读 SO 和其他网站上的无数帖子）持久连接并不是绝大多数开发人员非常喜欢的东西（如果脚本突然终止，连接没有关闭，你可能会结束锁定一些表等）但它真的那么糟糕吗？

在我的开发机器（T3400 双核 CPU、4 GB RAM 和 5400RPM 硬盘）上，页面加载时间因我使用的是持久连接还是非持久连接而有**很大不同。**非持久连接的 2.09 秒与持久连接的（大约）68 毫秒非常不同。这里有两个示例屏幕截图供您查看：[non-persistent](http://i46.tinypic.com/1125v8z.png)与[persistent](http://i49.tinypic.com/v65380.png)。

我了解持久连接的风险（我并没有真正每天使用它们，虽然我觉得这个概念很有趣并且我想探索它），但是没有任何方法可以检测非关闭连接吗？

例如，类似于 mysqli 的`change_user`但用于 PDO 的等价物，或者某种 PHP 脚本，服务器作为 cron 作业每 X 秒运行一次以检查剩余物并随后关闭它们？我正在阅读，`register_shutdown_function`但是，如果我理解正确，它会在脚本完成后被调用，所以在实践中，这可能意味着每次脚本完成时它都会结束关闭我的持久连接。还是我错了？

**编辑**

为了准确起见，我忘了提及我的软件堆栈，所以让我来弥补一下。我当前的堆栈由以下元素组成：`Windows 7 (x86) SP1`作为操作系统，，`Apache 2.4.3`（`PHP 5.4.9`我总是使用最新版本）和`MySQL 5.5.28`. 将堆栈运行为`localhost`（我可能正在将其迁移到专用机器，但现在它保持这样）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T15:17:41.640

为避免每次关机时连接都会关闭，您可以检查`error_get_last()`您的关机功能。

请注意，这`error_get_last()`也会返回 E_NOTICE 等“错误”。这应该根据您的需要被过滤掉。

```
<?php

register_shutdown_function('shutdown');

function shutdown() {

    static $ignore = array (
        E_STRICT,
        E_NOTICE,
        E_USER_NOTICE,
        E_DEPRECATED,
        E_USER_DEPRECATED, // ...
    );

    $error = error_get_last();
    // if no error has been queued or it should be ignored ...
    if(is_null($error) || in_array($error['type'], $ignore)) {
        return; // do nothing
    }

    // here comes your connection close code
    connection_close($your_connection);
} 
```

但这是一个非常老套的解决方案，有很多限制，[请参见 www.php.net](http://php.net/manual/en/function.register-shutdown-function.php)。

我想知道，因为使用非永久连接时服务页面需要大约 2 秒。这真的意味着建立与数据库服务器的连接需要大约 2 秒吗？如果是这样，我会注意这个，因为它看起来很长。您使用什么数据库服务器？数据库服务器是否位于不同的机器上？

# objective-c - 从 iPhone 发送消息而不打开 MFMessageComposeViewController

> ID：13877108
> 
> 赞同：-2
> 
> 时间：2012-12-14T10:44:41.863
> 
> 标签：objective-c, ios5, sms, phonegap-plugins, mfmessagecomposeview

我做了一个应用程序，在我的应用程序中，我想在某个手机号码上发送消息。我知道，这是使用 MFMessageComposeViewController 完成的。

但是，我们可以在不打开 MFMessageComposeViewController 的情况下发送消息吗？

我们可以在后台使用 MFMessageComposeViewController 并在某些手机上发送消息吗？

任何人有想法然后请帮助我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:50:46.323

正如我们之前所说（您可以在 StackOverFlow 中搜索此处），*必须调用*用户交互。如果您的应用程序发送垃圾邮件怎么办？如果它向您拥有的带有征税消息的平台发送消息怎么办？所以答案是否定的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T10:54:53.203

您可以在没有 UI 的情况下使用 ShareKit，但对于邮件或 SMS，您不能这样做

# iphone - 全屏查看活动指示器

> ID：13877109
> 
> 赞同：2
> 
> 时间：2012-12-14T10:44:46.327
> 
> 标签：iphone, ios, xcode, uiactivityindicatorview

我正在尝试全屏显示活动指示器，因此用户无法按下屏幕上的任何按钮，直到活动指示器作为警报查看过程关闭。我打过电话，`[activityView startAnimating]`但我可以按后面的按钮。有没有办法防止这种情况？

从现在开始感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:48:58.587

您可以将[MBProgressHUD](https://github.com/jdg/MBProgressHUD)用于此类加载指示符。这是一个很棒的 MIT 许可类，如果您想进一步定制它，它可以很好地扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T10:46:33.107

我建议最好的方法是在屏幕上显示带有活动指示器的 alertView。您可以为此使用以下代码：

声明`UIAlertView`如下属性：

```
@property (nonatomic, strong) UIAlertView *sendAlert;

self.sendAlert = [[UIAlertView alloc] initWithTitle:@"Loading" message:@"" delegate:nil cancelButtonTitle:nil otherButtonTitles:nil];
UIActivityIndicatorView *act = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
act setFrame:CGRectMake(115, 60, 50, 50)];
[act startAnimating];
[sendAlert addSubview:act];     
act = nil;
[sendAlert show]; 
```

当您想删除警报时，您可以使用：

```
[sendAlert dismissWithClickedButtonIndex:0 animated:YES];   
sendAlert = nil; 
```

另一种选择是，您可以将活动指示器添加到视图本身并将后退按钮的 userInteraction 设置为 false。当你完成任务时设置为 True。但这不会是一个好方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T10:47:55.917

你可以试试这个

```
 UIAlertView *alert= [[[UIAlertView alloc] initWithTitle:@"Loading\nPlease Wait..." message:nil delegate:self cancelButtonTitle:nil otherButtonTitles: nil] autorelease];
[alert show];
UIActivityIndicatorView *indicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];

indicator.center = CGPointMake(150, 100);
[indicator startAnimating];
[alert addSubview:indicator];

[indicator release]; 
```

并将此行添加到您要删除警报的位置

```
 [alert dismissWithClickedButtonIndex:0 animated:YES]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T10:47:45.003

嘿，对于您的此要求，请使用以下代码，您可以在每个视图使用中访问该代码..

在文件中添加此波纹管代码和对象，`AppDelegate.h`如下所示..

```
UIView *activityView;
UIView *loadingView;
UILabel *lblLoad; 
```

并将下面的代码粘贴到`AppDelegate.m`文件中

```
#pragma mark - Loading View
-(void) showLoadingView {
    //NSLog(@"show loading view called");
    if (loadingView == nil) 
    {
        loadingView = [[UIView alloc] initWithFrame:CGRectMake(0.0, 60.0, 320.0, 420.0)];
        loadingView.opaque = NO;
        loadingView.backgroundColor = [UIColor darkGrayColor];
        loadingView.alpha = 0.5;

        UIView *subloadview=[[UIView alloc] initWithFrame:CGRectMake(84.0, 190.0,150.0 ,50.0)];
        subloadview.backgroundColor=[UIColor blackColor];
        subloadview.opaque=NO;
        subloadview.alpha=0.8;

        subloadview.layer.masksToBounds = YES;
        subloadview.layer.cornerRadius = 6.0;

        lblLoad=[[UILabel alloc]initWithFrame:CGRectMake(50.0, 7.0,80.0, 33.0)];
        lblLoad.text=@"LoadingView";
        lblLoad.backgroundColor=[UIColor clearColor];
        lblLoad.textColor=[UIColor whiteColor];
        [subloadview addSubview:lblLoad];

        UIActivityIndicatorView *spinningWheel = [[UIActivityIndicatorView alloc] initWithFrame:CGRectMake(10.0, 11.0, 25.0, 25.0)];
        [spinningWheel startAnimating];
        spinningWheel.activityIndicatorViewStyle = UIActivityIndicatorViewStyleWhite;
        [subloadview addSubview:spinningWheel];
        [loadingView addSubview:subloadview];
        [spinningWheel release];
    }       
    [self.window addSubview:loadingView];

    //[[UIApplication sharedApplication] registerForRemoteNotificationTypes: UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound | UIRemoteNotificationTypeAlert];
}

-(void) hideLoadingView {
    if (loadingView) {
        [loadingView removeFromSuperview];
        [loadingView release];
        loadingView = nil;
    }

} 
```

并在需要时在任何类中调用此方法，就像下面一样。

```
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
[appDelegate showLoadingView]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T10:47:53.453

当活动指示器启动时，在当前视图上方添加一个 UIView ：

```
UIView *overlayView = [[UIView alloc] initWithFrame:[UIScreen mainScreen].bounds];
overlayView.backgroundColor = [UIColor colorWithRed:0 green:0 blue:0 alpha:0.5];
[self.navigationController.view addSubview:overlayView]; 
```

# git - Git fetch 但本地和远程之间没有差异

> ID：13877110
> 
> 赞同：1
> 
> 时间：2012-12-14T10:44:58.853
> 
> 标签：git, git-diff, git-fetch

我对命令有一些问题`git diff`。我知道`HEAD`在远程和本地不指向同一个提交。Remote 收到了更多的提交。但是当我运行`git fetch`然后`git diff HEAD...origin`, or `git diff HEAD...origin/master`, or`git log -p HEAD..origin`时，我没有显示差异。有人有想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T11:57:38.733

您使用错误的运算符来定义差异端点（授予[此答案](https://stackoverflow.com/a/463027/1761499)）。您可以使用`git diff origin/master`查看当前签出的提交 (HEAD) 和 origin/master 之间的差异，或者您可以使用`git log --all HEAD..origin/master`.

在您尝试使用“origin”作为提交描述符时会产生错误（它不是 commit'ish 或 tree'ish 引用），或者它可能会被隐式解析，您应该避免这种情况以获得您想要的确切结果。

# android - Android 4.x spinner 中不再有提示了吗？

> ID：13877114
> 
> 赞同：7
> 
> 时间：2012-12-14T10:45:14.133
> 
> 标签：android, spinner

我是 Android 开发的新手，发现我可以为小部件设置`android:prompt`属性`Spinner`。就像我的`layout/my_layout_fragment.xml`：

```
<Spinner
    android:id="@+id/boxFunction"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_column="0"
    android:layout_columnSpan="2"
    android:layout_gravity="left"
    android:layout_row="14"
    android:entries="@array/function_options"
    android:gravity="fill_horizontal"
    android:prompt="@string/function_prompt" /> 
```

我发现了几个来自 Android 2.x 时代的屏幕截图，它们清楚地显示了提示，但我没有任何运气找到任何显示提示的 4.x 屏幕截图。我在 Android 上编译的应用程序也没有显示它。

提示是否在 4.x 中被弃用（如果是，我在哪里可以获得弃用的信息）？还是我错过了什么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-14T11:04:04.557

我不认为它已被弃用。也许从 4.0 开始，它取决于另一个名为

> 安卓：微调模式

这是一个示例，它向您展示了提示如何与 Spinner Mode 属性一起使用。

在此之前让我明确一点，**spinnerMode**可以设置为**dialog**或**dropdown**。

```
<Spinner  android:layout_width="wrap_content"
    android:id="@+id/spinner"
    android:layout_height="wrap_content"
    android:prompt="@string/app_name"
    android:spinnerMode="dialog"/>

<Spinner  android:layout_width="wrap_content"
    android:id="@+id/spinner1"
    android:layout_height="wrap_content"
    android:prompt="@string/app_name"
    android:spinnerMode="dropdown"
    android:layout_below="@+id/spinner"
    /> 
```

如您所见，第一个微调器的[spinnerMode](http://developer.android.com/reference/android/widget/Spinner.html#attr_android:spinnerMode)设置为对话框，下一个微调器设置为下拉菜单。

这是输出，

**对话模式**

![在此处输入图像描述](../Images/20aa4647bff3cd4a846d0a595abdd524.png)

**落下**

![在此处输入图像描述](../Images/1dd1a8fe67ab0451512162c5af439c7f.png)

我在这里使用的提示标题是“Locale Test”。以为我已将其设置为两个微调器，它仅在对话模式微调器中可见。所以我认为它说明了这一点。

# java - java.lang.NoClassDefFoundError：JSP 文件中的 com/jcraft/jsch/JSch 错误

> ID：13877120
> 
> 赞同：0
> 
> 时间：2012-12-14T10:45:24.360
> 
> 标签：java, jsp, servlets, jsch

我编写了一个连接到远程 LINUX 机器并执行命令的程序。我使用`jsch-0.1.42.jar`文件连接到远程机器。我的程序运行良好并返回输出。现在我想调用方法，该方法在 JSP 的 Servlet 内部声明，使用以下代码

```
<% SSHCommandExecutor sshce = new SSHCommandExecutor();
sshce.runCommnad();
%> 
```

但我收到以下错误

```
HTTP Status 500 -java.lang.NoClassDefFoundError: com/jcraft/jsch/JSch Servlet.service() for servlet jsp threw exception: java.lang.ClassNotFoundException: com.jcraft.jsch.JSch 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:51:19.610

在使用它之前，您需要在 jsp 页面中导入该类，因为我们在普通 java 类中导入该类。

只是导入的方法不同。

我们在`package`语句之后（如果`package`语句存在）或作为第一条语句将类导入普通 java 类文件中。

在 jsp 中，我们提到指令`import`中的属性，如下所示：`page`

```
<%@ page language="java" contentType="text/html;charset=ISO-8859-1"   

import="com.jcraft.jsch.JSch"%>

the above lines comes at the top of the jsp page

.... 

rest of the jsp page 
```

# javascript - 在 D3 中将地理形状缩放到相似的大小

> ID：13877122
> 
> 赞同：0
> 
> 时间：2012-12-14T10:45:26.823
> 
> 标签：javascript, math, d3.js, computational-geometry, cartogram

我正在使用 D3 的[world-countries.json](https://github.com/mbostock/d3/blob/master/examples/data/world-countries.json)文件来创建世界国家的墨卡托地图，然后我将其绑定到一些数据以获得非连续制图。唉，加拿大、美国、澳大利亚等更大的面积意味着这些国家的一个单位相当于马耳他等几个单位的空间。

我认为我需要做的是规范化 geojson 形状，以便加拿大和马耳他在开始时大小相同。

知道我会怎么做吗？

谢谢！

更新：我已经尝试将所有路径的宽度和高度显式设置为一个小整数，但这似乎只是稍后被转换覆盖。代码如下：

```
// Our projection.
var xy = d3.geo.mercator(),
    path = d3.geo.path().projection(xy);

var states = d3.select("body")
  .append("svg")
  .append("g")
    .attr("id", "states");

function by_number() {

 function compute_by_number(collection, countries) {

    //update
     var shapes = states
            .selectAll("path")
              .data(collection.features, function(d){ return d.properties.name; });
    //enter       
         shapes.enter().append("path")
              .attr("d", path)
              .attr("width", 5) //Trying to set width here; seems to have no effect.
              .attr("height", 5) //Trying to set height here; seems to have no effect.
              .attr("transform", function(d) { //This works.
                var centroid = path.centroid(d),
                x = centroid[0],
                y = centroid[1];
                return "translate(" + x + "," + y + ")"
                + "scale(" + Math.sqrt(countries[d.properties.name] || 0) + ")"
                + "translate(" + -x + "," + -y + ")";
              })
            .append("title")
              .text(function(d) { return d.properties.name; });
    //exit
 }

 d3.text("../data/country_totals.csv", function(csvtext){
    var data = d3.csv.parse(csvtext);
    var countries = [];
    for (var i = 0; i < data.length; i++) {
        var countryName = data[i].country.charAt(0).toUpperCase() + data[i].country.slice(1).toLowerCase();
        countries[countryName] = data[i].total;
    }

    if (typeof window.country_json === "undefined") {
        d3.json("../data/world-countries.json", function(collection) {          
            window.country_json = collection;
            compute_by_number(collection, countries);           

        });
    } else {
            collection = window.country_json;
            compute_by_number(collection, countries);
    }

  });
} //end by_number

by_number(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T22:23:21.007

您也许可以使用我在此处发布的辅助功能：[https ://gist.github.com/1756257](https://gist.github.com/1756257)

这会缩放投影以使给定的 GeoJSON 对象适合给定的边界框。缩放投影而不是使用变换来缩放整个路径的一个优点是笔划可以在地图上保持一致。

另一个更简单的选择可能是：

1.  投影路径；
2.  用于`path.getBBox()`获取每个边界框（`.getBBox()`是原生 SVG 函数，不是 D3 方法）
3.  在路径上设置一个变换，类似于您现在的操作，以缩放和平移路径以适合您的边界框。

这有点简单，因为它不涉及投影，但是您需要通过逆 ( `1/scale`) 缩放笔触以保持一致（因此您将无法使用 CSS 设置笔触值）。它还需要首先实际渲染路径，然后对其进行缩放——这可能会影响复杂几何图形的性能。

# actionscript-3 - TextField htmlText+斜体最后一个字符的剪切

> ID：13877124
> 
> 赞同：2
> 
> 时间：2012-12-14T10:45:31.490
> 
> 标签：actionscript-3, textfield

htmlText + 斜体 – 最后一个字符被截断

下面是类似的问题，但我不使用 autosize [TextField autoSize+italics cut of last character](https://stackoverflow.com/questions/1516391/textfield-autosizeitalics-cuts-of-last-character)

有没有其他变体如何解决这个问题？有问题的文字在屏幕截图上：http: [//finmarkets.org/images/problem.jpg](http://finmarkets.org/images/problem.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:05:03.820

您应该尝试在输入文本字段的内容后向其宽度添加一些像素：`yourTextField.width += 3;`

# oracle - 从两个表格制作一个表格

> ID：13877128
> 
> 赞同：0
> 
> 时间：2012-12-14T10:45:41.920
> 
> 标签：oracle, oracle11g, oracle-apex

我在 Oracle APEX 工作。我想`form i-e A`从两个表中制作一个`B & C`。当我在 A 中`form A` 的数据中输入数据时，`form`应该转到它们各自的表`B & C`中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:48:13.517

一个视图，如果需要，一个 INSTEAD OF 触发器？

创建表 B 和 C 中数据的视图。基于此创建表单。当您插入/更新数据时，您可以针对视图执行此操作（如果它足够简单），也可以使用 INSTEAD OF 触发器来捕获更新/插入并运行触发器。Google INSTEAD OF 触发器。

# wpf - 在 WPF 中使用 BASS_StreamCreateFile

> ID：13877132
> 
> 赞同：0
> 
> 时间：2012-12-14T10:45:55.913
> 
> 标签：wpf, vb.net, bass

`BASS_StreamCreateFile(path,offset,length,BassFlags)`总是返回' `0`'。我不明白如何使用这个功能。在使用 BassFlags 方面需要帮助。

PS：在 WPF 声音可视化库的帮助下使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:50:55.860

由于`0`只通知您有错误，您应该检查它是什么类型的错误：

```
int BASS_ErrorGetCode(); 
```

这为您提供了**最近**错误的错误代码。

以下是可能的错误代码列表（= 返回值）：

```
BASS_ERROR_INIT // BASS_Init has not been successfully called.
BASS_ERROR_NOTAVAIL // Only decoding channels (BASS_STREAM_DECODE) are allowed when using the "no sound" device. The BASS_STREAM_AUTOFREE // flag is also unavailable to decoding channels.
BASS_ERROR_ILLPARAM // The length must be specified when streaming from memory.
BASS_ERROR_FILEOPEN // The file could not be opened.
BASS_ERROR_FILEFORM // The file's format is not recognised/supported.
BASS_ERROR_CODEC    // The file uses a codec that is not available/supported. This can apply to WAV and AIFF files, and also MP3 files when using the "MP3-free" BASS version.
BASS_ERROR_FORMAT   // The sample format is not supported by the device/drivers. If the stream is more than stereo or the BASS_SAMPLE_FLOAT flag is used, it could be that they are not supported.
BASS_ERROR_SPEAKER  // The specified SPEAKER flags are invalid. The device/drivers do not support them, they are attempting to assign a stereo stream to a mono speaker or 3D functionality is enabled.
BASS_ERROR_MEM  // There is insufficient memory.
BASS_ERROR_NO3D // Could not initialize 3D support.
BASS_ERROR_UNKNOWN  // Some other mystery problem! 
```

*（来自`bass.h`）*

还请确保您已正确**初始化**BASS -`BASS_Init()`必须在创建流*之前调用：*

```
BOOL BASS_Init(
    int device, // The device to use... -1 = default device, 0 = no sound, 1 = first real output device
    DWORD freq, // Output sample rate
    DWORD flags, // A combination of flags
    HWND win, // The application's main window... 0 = the current foreground window (use this for console applications)
    GUID *clsid // Class identifier of the object to create, that will be used to initialize DirectSound... NULL = use default
); 
```

**例子：**

```
int device = -1; // Default device
int freq = 44100; // Sample rate

BASS_Init(device, freq, 0, 0, NULL); // Init BASS 
```

# nhibernate - 强制休眠保存未更改的对象（将其标记为脏）

> ID：13877134
> 
> 赞同：3
> 
> 时间：2012-12-14T10:46:06.910
> 
> 标签：nhibernate, save

我需要通过 nhibernate 保存未更改的对象以触发数据库触发器。

那么我怎么能告诉 nhibernate 这个对象是脏的，即使没有属性改变呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T10:08:09.373

因此，关于我对 Radims 回答的评论，我做了以下事情：

我更改了实体的已加载状态数组的一个条目，因此 nhibernate 将在下次保存时将其视为已更改。

我知道这是一种解决方法，但对我来说它到目前为止有效。

```
EntityEntry entry = sessImpl.PersistenceContext.GetEntry(dbo);
entry.LoadedState[x] = y; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T11:11:56.177

有 NHibernate 扩展点，正是针对这种情况的。在这种情况下，我们可以附加 custom`EventListener`或引入`IInterceptor`.

检查这个问题[How to make NHibernate 考虑属性在使用动态更新或插入时始终是脏的？](https://stackoverflow.com/questions/13453591/)寻求解决方案[（基于 IInterceptor 的答案）](https://stackoverflow.com/a/13458713/1679310)

请参阅 NHibernate 文档[12\. 拦截器和事件](http://nhforge.org/doc/nh/en/index.html#events)

# objective-c - 向下滚动后，tableviews 单元格正在更改

> ID：13877137
> 
> 赞同：4
> 
> 时间：2012-12-14T10:46:24.313
> 
> 标签：objective-c, ios, xcode, uitableview

我正在分组的表格视图中制作表格。在这种形式中，我有 UIswitches 和文本字段。但向下滚动后，单元格样式正在发生变化。

这是我的 cellForRowAtIndex

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *cell = nil;
    static NSString *MyIdentifier = @"GenericCell";
    cell = [tableView dequeueReusableCellWithIdentifier:MyIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:MyIdentifier] ;
    }
        NSString *text = nil;

    if(indexPath.section == CREDENTIALS_SECTION){
        if (indexPath.row == 0) {
            NSLog(@"tot hier login");
            UITextField *login = [[UITextField alloc] initWithFrame:CGRectMake(110, 10, 185, 30)];
            login.adjustsFontSizeToFitWidth = YES;
            login.placeholder = @"example@gmail.com";
            login.keyboardType = UIKeyboardTypeEmailAddress;
            login.returnKeyType = UIReturnKeyNext;
            login.backgroundColor = [UIColor clearColor];
            login.tag = 0;
            login.delegate = self;

            [login setEnabled: YES];

            [cell addSubview:login];
        }else if (indexPath.row == 1){
            NSLog(@"tot hier pass");
            UITextField *pass = [[UITextField alloc] initWithFrame:CGRectMake(110, 10, 185, 30)];
            pass.adjustsFontSizeToFitWidth = YES;
            pass.placeholder = @"Required";
            pass.keyboardType = UIKeyboardTypeDefault;
            pass.returnKeyType = UIReturnKeyDone;
            pass.secureTextEntry = YES;

            pass.backgroundColor = [UIColor clearColor];
            pass.tag = 0;
            pass.delegate = self;
            [cell addSubview:pass];
        }

        if (indexPath.row == 0) { // Email
            text = @"Email";
        }
        else if(indexPath.row == 1) {
            text = @"Password";
        }
    }else  if(indexPath.section == METHODS_SECTION){
        UISwitch *toggleSwitch = [[UISwitch alloc]initWithFrame:CGRectMake(220, 10, 100, 30)];
        toggleSwitch.tag = indexPath.row;
        [toggleSwitch addTarget:self action:@selector(toggleSwitched:) forControlEvents:UIControlEventValueChanged];
        [cell addSubview:toggleSwitch];

        if (indexPath.row == 0) { // Web
            text = @"Web applicatie";
        }
        else if(indexPath.row == 1) { //Mobile
            text = @"Mobiele applicatie";
        }
        else if(indexPath.row == 2) { //Mail
            text = @"E-mail";
        }

    }else  if(indexPath.section == PHONE_SECTION){
        UITextField *phoneText = [[UITextField alloc] initWithFrame:CGRectMake(20, 10, 185, 30)];
        phoneText.adjustsFontSizeToFitWidth = YES;
        phoneText.font = [UIFont fontWithName:@"Arial-BoldMT" size:18];
        phoneText.keyboardType = UIKeyboardTypeNumberPad;
        phoneText.delegate = self;
        phoneText.textColor = [UIColor blackColor];
        phoneText.text = _person.phone;
        [cell addSubview:phoneText];

    }else  if(indexPath.section == REMARK_SECTION){
        UITextView *textView = [[UITextView alloc]initWithFrame:CGRectMake(20, 10, 280, 260)];
        textView.text = _person.remark;
        textView.delegate = self;
        textView.font = [UIFont fontWithName:@"Arial" size:15.0];
        textView.backgroundColor = [UIColor clearColor];

        [cell addSubview:textView];
        text = @"";

    }else  if(indexPath.section == BUTTON_SECTION){
        cell.backgroundColor = [UIColor redColor];
        text = @"test";

    }
    cell.textLabel.text = text;
    return cell;
} 
```

经过一番搜索，我发现更多人有这个问题。问题在于这段代码。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *cell = nil;
    static NSString *MyIdentifier = @"GenericCell";
    cell = [tableView dequeueReusableCellWithIdentifier:MyIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:MyIdentifier] ;
    }
        NSString *text = nil; 
```

但我没有找到解决方案。希望任何人都可以提供帮助！

亲切的问候！

**澄清**

好的，所以在这里您可以看到我的表格的屏幕截图。下面我有一个红色的单元格（保存按钮），当我向下滚动时，其他单元格的背景是红色的。有些单元格，文本属性正在发生变化。 ![在此处输入图像描述](../Images/258245bd4c11bed412c011299630013c.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T11:08:31.037

那是行不通的。显然你还没有完全理解重用机制是如何工作的。

你做什么工作？首先，您获取要重新使用的单元格。如果你得到一个 - 到目前为止，但问题来了。如果你没有得到一个，那么你创建一个新的。

当你创建了一个新的，这是在用户开始滚动之前开始的情况，然后你根据部分和行添加一些 UIItems。我将解释为什么这实际上不是一件明智的事情。

然后用户滚动。细胞将从屏幕上消失，然后可供重复使用。然后，您将获取单元格以供重复使用。但是很可能这些单元格上已经有额外的 UI 项，因为您以前以这种方式使用过它们。在接下来的过程中，您将添加新的 UI 项，无论该单元格上是否已经存在其他 UI 项。

你能做什么：

1.  创建您自己的自定义表格单元子类。您可能需要的每组附加 ui 项的一个子类。这可能是最简洁的方法。对于每个子类，使用不同的重用标识符（！！！）这是我推荐的！但是，还有其他选择：

2.  您仍然可以接受您的概念，但为每种类型的单元格发明一种单独类型的重用标识符，这些单元格上有某种类型的附加 ui 项。如果是这样，请确保这些 UI 项仅在`if (cell == nil)`代码分支中创建和添加为子视图。只创建一次，然后重新使用它们。单元重用 ID 可以是“email-display”、“email-input”、“password-display”、“password-input”、“switch”……

3.  上述解决方案的一个变化是，将行和部分计算为重用标识符。例如第 0 行和第 2 行的“cell-id-0.2” - 左右。但是您仍然必须确保您确实重用了额外的 UI 视图，并且不要在每次单元格充满数据时都重新创建它们。另外，第一部分的布局会根据您是要输入密码和电子邮件还是仅显示它们而有所不同。您仍然必须处理这些变化。

4.  如果单元格 == nil - 表示如果一个单元格被重复使用 - 那么首先从您之前添加的每个 UI 项目中清除它。您可以通过在创建时以及在重用所有子视图并删除具有标签 99 的子视图时使用 - 比如说 99 - （任何不同于 0 的东西都应该做）标记您的 UIViews 来做到这一点。尽管如此，您可以坚持使用以下代码你已经做了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T11:20:16.203

最简单的解决方法是：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"GenericCell"] ;
    //some more code
    return cell;
} 
```

这将删除 tableview 的可重用性，但由于它是一个有限的设置视图，它可以是好的。我仍然建议从 Hermann Klecker 的解决方案中选择 1 或 2。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T11:00:40.887

如果您还需要保持 UIControl 状态，请使用

```
static NSString *MyIdentifier = [NSString stringWithFormat:@"GenericCell%d",indexPath.row]; 
```

它将始终返回您唯一的表格行，您可以根据需要使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T10:53:29.297

在重用之前尝试从单元格中删除所有子视图。试试代码：

```
if (cell == nil) 
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:MyIdentifier] ;
}
else
{
   [cell.contentView.subviews makeObjectsPerformSelector:@selector(removeFromSuperview)];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T10:57:45.367

在单元格上添加子视图之前删除所有子视图。

```
if (cell == nil)
{
      cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault    reuseIdentifier:SimpleTableIdentifier]autorelease];
}
else 
{
    //To remove the subview of cell.
    for (UIView *vwSubviews in [cell.contentView subviews])
    {
            [vwSubviews removeFromSuperview];
    }
} 
```

它可能会解决您的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-14T11:00:28.813

实际上你这里有一些不好的代码。

在方法中

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

除非它不在，否则`if (cell == nil)`你不应该初始化和使用任何

```
-(void)addSubview:(UIView*)view 
```

为什么？

单元格是从 tableview 重用的视图。因此，如果您添加一些子视图，下次在重用单元格时，它将在其上添加更多子视图。只是它们重叠并可能导致 MEMORY LEAK。

不要忘记细胞是可重复使用的。所以;

如果我有以下代码，除非我没有在其他地方设置文本。预计所有单元格的文本标签中都有文本“这是一个文本”。因为它们是可重复使用的。

```
if (someChangingBool) {
   cell.textLabel.text = @"this is a text"; 
} 
```

所以我需要一个 else 来设置文本。

欲了解[更多信息](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/AboutTableViewsiPhone/AboutTableViewsiPhone.html)。

# tridion - 无法在 SDL Tridion 中获取呈现的内容错误

> ID：13877140
> 
> 赞同：10
> 
> 时间：2012-12-14T10:46:37.187
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

我想知道在 SDL Tridion 中可能出现“无法获取呈现的内容”错误的情况。我们使用 VBScript 进行模板化，我的事件日志中列出了一些场景。但我无法确定它的头或尾。

场景一：无法获取Page (tcm:48-215280-64)的渲染内容。

```
Error 5 occurred while rendering the Component Presentation (SMS gruppe:Artikkel): 
Invalid procedure call or argument: 'RemoveChild' (source:
        .RemoveChild .selectSingleNode("tcm). 
```

场景二：

```
Unable to get rendered content of Component (tcm:57-215271).
No data found. [ETA_ITEMS, U]
Cannot insert the value NULL into column 'ITEM_ID', table 'Tridion_cm_2011.dbo.ITEM_ASSOCIATIONS'; column does not allow nulls. INSERT fails.
The statement has been terminated. 
```

场景 3：

```
Unable to get rendered content of Page (tcm:52-213774-64).
Error 1017 occurred while rendering the Page: Expected 'Then' (source:
   If Rendermode() != "PreviewDynamic" Then). 
```

场景四：

```
Unable to retrieve rendered data from Component Presentation.
Error 3004 occurred while rendering the Component Presentation (Nytt dagstilbud iPhone 4S:Artikkel): 
Write to file failed. (source:
              .SaveToFile strTempFile, conSaveCreateOverWrite). 
```

场景 5：

```
Unable to get rendered content of Page (tcm:48-215164-64).
Error 3004 occurred while rendering the Component Presentation (Ring inn julen med Comoyo:Artikkel): 
Write to file failed. (source:
              .SaveToFile strTempFile, conSaveCreateOverWrite). 
```

场景 6：

```
Unable to get rendered content of Page (tcm:48-215164-64).
Invalid value for property 'BinaryContent'. Unable to open uploaded file: C:\Windows\TEMP\tcm-48-215158square940.jpg. 
```

如果你们中的任何人都可以给我任何关于问题可能出在哪里的线索，这将是有帮助的，这样我就可以有线索了。提前非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T11:42:26.240

场景 1 看起来像 VBScript 语法错误，因此很可能是模板代码中的拼写错误。场景 2 看起来有点问题，因为它是一个数据库错误。场景 3、4、5 和 6 看起来又像标准的 VBScript 语法错误。

一些例子，场景 3：

```
If Rendermode() != "PreviewDynamic" Then 
```

有一个语法错误，它提到了`Expected 'Then'`所以我们知道错误在`Then`语句之前的某个地方。仔细看，变量后面有双亲`RenderMode`，这是不正确的，应该是：

```
If RenderMode != "PreviewDynamic" Then 
```

# java - Java VM - Eclipse 使用我的内核？

> ID：13877142
> 
> 赞同：6
> 
> 时间：2012-12-14T10:46:47.777
> 
> 标签：java, eclipse, processor

我有关于`JVM`运行我的 Java 代码的问题。我的朋友有一个 2.4 或 2.5GHz 双核，而我有一个 2GHz 四核。现在我的问题是：Java 是使用所有内核还是只使用一个内核？我的朋友认为 Java 使用 1 个内核，因此他的运行时间会更好，因为他的内核的时钟频率比我的高。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T10:49:39.880

JVM 本身使用多个线程，这些线程很可能会使用多个内核（取决于 OS 调度程序的心情）。

您的程序使用的线程数与您要求它使用的线程数一样多。如果您的代码是单线程的，它将是顺序的，并且不会从您的多核架构中受益（但是请注意，您的单线程可能使用多个内核，但不能同时使用）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T10:49:57.480

> 如果操作系统在可用处理器上分配线程，Java 将从多核中受益。JVM 本身并没有做任何特别的事情来让它的线程在多个内核上均匀调度。

通常，Java 应用程序会尝试将每个活动线程调度到单独的内核上。这包括垃圾收集器线程。

看看以下链接：

1.  [java - 如何使用多核](https://stackoverflow.com/questions/4436422/how-does-java-makes-use-of-multiple-cores)

# php - 在动态单选按钮循环中获取提交的值和名称时遇到问题

> ID：13877143
> 
> 赞同：2
> 
> 时间：2012-12-14T10:46:55.227
> 
> 标签：php, mysql, while-loop, radio-button

我已经从 mysql 中选择了数据并将它们插入到一个单选按钮表单中，如图所示：

```
if($num_rows) {

    echo '<form name="fixtureform" method="POST" action="index.php">';

    while ($row = mysql_fetch_assoc($result)) {

    echo $row["home_team"] . " vs " . $row["away_team"]. '<br />' . " Home" . '<input type="radio" name="win'.$row["home_id"].'" value="'.$row["home_id"].'"/>' ." Draw" . '<input type="radio" name="'.$row["home_id"].$row["away_id"].'" value="draw"/>' ." Away" . '<input type="radio" name="win'.$row["away_id"].'" value="' . $row["away_id"] . '"/>' .'<br />';

}
    echo '<input type="Submit" Name="Submitacc" Value="Submit your teams">';
    echo '</form>';

} else { 
        echo "There are no fixtures today ";
        } 
```

然后我有一个提交值的 if 语句：

```
if($_POST['Submitacc']=='Submit your teams') {

    } 
```

如果单选按钮的选定名称是 win.$row[home_id]，我该怎么说 - 将值插入 mysql 表。我正在努力解决我无法在循环之外获得 $row[home_id] 的事实？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:07:41.270

尝试如下

```
$i=0;
while ($row = mysql_fetch_assoc($result)) {
    echo $row["home_team"] . " vs " . $row["away_team"]. '<br />' . " Home" . '<input type="radio" name="result['.$i.']" value="h_'.$row["home_id"].'"/>' ." Draw" . '<input type="radio" name="result['.$i.']" value="draw"/>' ." Away" . '<input type="radio" name="result['.$i.']" value="a_' . $row["away_id"] . '"/>' .'<br />';
  $i++;
} 
```

在你的 PHP 中

```
foreach($_POST['result'] as $value){
   if($value == 'draw') {
     //do stuff
   }
   else {
     $apart = explode('_',$value);
     if($apart[0]=='h'){
        //home team win
        echo $apart[1];
     }
     else {
        //away team win
        echo $apart[1];          
     }
   } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T10:53:05.810

将您的元素名称更改为`win.home`不带`id`，因为您将通过值获取它。

然后像这样：

```
if(isset($_POST['win.home'])) { } 
```

* * *

编辑：

如果你想这样做，试试这个：

3 个单选按钮，名为`win.home`, `draw`，`win.away`加上一个唯一的 id（mysql id？），这样`win.home.1234`您就可以使用任意数量的游戏。`explode()`您可以稍后取回该 ID 。

然后是值：

第一个：`$row["home_id"] . "-" . $row["away_id"]`

第二：`draw`

第三：`$row["away_id"] . "-" . $row["home_id"]`

然后在处理表格时：

`explode()`用at分割值`-`。所以第一个 id 总是赢家。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T10:59:45.253

我认为在这种情况下应该使用单选按钮机制的不同用法。

在您的示例中，您正在为每一行创建 3 个不同的单选按钮实例，而是根据给出的答案创建一个具有不同值的单选按钮实例

喜欢：

```
<input type="radio" name="game'.$row["game_id"].'" value="'.$row["home_id"].'">
<input type="radio" name="game'.$row["game_id"].'" value="draw">
<input type="radio" name="game'.$row["game_id"].'" value="'.$row["away_id"].'"> 
```

这意味着该变量`$_POST["game1"]`将具有为游戏选择的获胜者或平局的值，即`game_id 1`

希望这对你有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T10:52:17.930

用这个

```
echo"<input name='win' type='radio' value='".$row['home_id']."' />"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T10:52:24.700

因为你的收音机有不同的名字，它们都是独立的并且都被提交了，我建议将它们都命名为“结果”，并分别给它们“赢”、“画”和“松”的值。

```
<label>Win: <input type="radio" name="result" value="win" /></label>
<label>Draw: <input type="radio" name="result" value="draw" /></label>
<label>Loose: <input type="radio" name="result" value="loose" /></label>
<input type="hidden" name="home_team" value="<?php echo $row['home_team']; ?>" />
<input type="hidden" name="away_team" value="<?php echo $row['away_team']; ?>" /> 
```

您可以使用 $_POST['result'] 访问该值，并且由于您了解主队和客队，因此您可以相应地处理数据

# ruby-on-rails - 载波内容类型始终为零

> ID：13877144
> 
> 赞同：5
> 
> 时间：2012-12-14T10:46:59.667
> 
> 标签：ruby-on-rails, carrierwave

我正在开发 Rails 3.2.9 应用程序并使用 Carrierwave 作为文件上传器。Carriverwave 自述文件指出了获取正确 content_type 的方法：

1.  将 require 'carrierwave/processing/mime_types' 添加到初始化程序或您的上传者。
2.  将包含 CarrierWave::MimeTypes 添加到您的上传器。
3.  将进程 :set_content_type 添加到您的上传者。

基于此，我的上传者如下：

```
# encoding: utf-8
require 'carrierwave/processing/mime_types'
class AttachmentUploader < CarrierWave::Uploader::Base
  include CarrierWave::MimeTypes
  storage :file
  def store_dir
    "#{base_store_dir}/#{model.id}"
  end
  process :set_content_type

end 
```

在我的模型中，将上传器挂载为文件：

```
mount_uploader :file, AttachmentUploader 
```

但是，上传文件后我总是得到 content_type nil ：

```
1.9.3-p327 :013 > a.file.class
 => AttachmentUploader
1.9.3-p327 :010 > a.file.file
 => #<CarrierWave::SanitizedFile:0x00000004046330 @file="uploads/course/000/000/026/attachment_file/6/myIcon.png", @original_filename=nil, @content_type=nil> 
```

有什么建议吗？谢谢。

PS：我已经`gem "mime-types", "~> 1.19"`在我的`Gemfile`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-20T14:55:10.020

您需要按照此处列出的说明进行操作：[https ://github.com/carrierwaveuploader/carrierwave#setting-the-content-type](https://github.com/carrierwaveuploader/carrierwave#setting-the-content-type)

添加 mime-types gem，然后像这样设置您的上传器文件

```
require 'carrierwave/processing/mime_types'

class MyUploader < CarrierWave::Uploader::Base
    include CarrierWave::MimeTypes

    process :set_content_type
 end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-09T09:56:39.957

在我安装上传器的模型文件中尝试过同样的问题

```
before_save :set_mime_type                   

    def set_mime_type
      self.mimetype = Mime::Type.lookup_by_extension(File.extname(self.cf_filename.to_s)[1..-1]) 
    end 
```

注意：您需要在表中有一个 mimetype 字段

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T03:07:50.397

我刚刚遇到了完全相同的问题，但找不到简单的解决方法。

我的解决方法是在模型中添加一个 content_type 列，并在创建/更新过程中使用

```
@model.content_type = params[:file_upload][:attachment].content_type 
```

这可行，但希望问题得到解决。

# android - 如何自定义 Card.io 扫描仪 UI？

> ID：13877145
> 
> 赞同：1
> 
> 时间：2012-12-14T10:46:59.987
> 
> 标签：android, android-layout, android-intent, card.io

在 Android 的 card.io SDK 实现中，我们启动了 CardIOActivity 类。其中包含相机预览和“键盘”按钮。

是否可以自定义 CardIOActivity 类的布局。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-06-19T10:40:57.577

如果有人遇到同样的问题，这可能对某些人有帮助对于相机预览使用：

EXTRA_SCAN_OVERLAY_LAYOUT_ID public static final String EXTRA_SCAN_OVERLAY_LAYOUT_ID 额外的整数。可选的。如果提供此值，则视图将被放大并在扫描过程中覆盖相机。整数值必须是有效布局资源的 id。

对于禁用键盘按钮或手动输入：

EXTRA_SUPPRESS_MANUAL_ENTRY public static final String EXTRA_SUPPRESS_MANUAL_ENTRY 额外的布尔值。可选的。默认为假。从扫描屏幕中删除键盘按钮。

如果扫描不可用，Activity 结果将为 RESULT_SCAN_NOT_AVAILABLE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T18:48:11.873

最简洁的答案是不。

如果你能多说一点你想要完成的事情，我们可能会想出一些办法，但总的来说，布局是经过精心设计的，以优化用户体验。

# jquery - jQuery - 如何搜索 $variable.val() 包含某个字符

> ID：13877150
> 
> 赞同：0
> 
> 时间：2012-12-14T10:47:27.817
> 
> 标签：jquery

我有一个代码：

```
field_val = $(this).val(); 
```

我只需要检查 field_val 是否包含字符'%'。

喜欢

```
 if(field_val:contains('%')){
    console_log(field_val);
    } 
```

但这是未定义/不正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:48:49.993

```
var is_field_val = $(this).val().indexOf('%') != -1; //true or false

if (is_field_val) { ... } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T10:48:58.910

您可以使用[string.indexOf](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/indexOf)

```
if(field_val.indexOf('%') != -1){
    console_log(field_val);
} 
```

`$(this).val();`返回常规字符串，而不是 jquery 对象或类似的东西，因此没有任何特殊方法，只有那些可用于 JS 中的字符串变量的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T10:49:28.287

使用 indexOf()：

```
if(field_val.indexOf('%') != -1)){...} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T10:52:36.677

试试这个方法

```
field_val = "The string i am going to % check";

if (field_val.match("%")) {
     alert('Yes');
}​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T11:08:31.270

我发现了类似 的东西，`if('$(this)[value^="%"]')`因为它实际上以 %. 感谢大家。

# javascript - 当我尝试用这个 XMLHttpRequest 对象加载这个 xml 文件时，什么也没发生

> ID：13877151
> 
> 赞同：0
> 
> 时间：2012-12-14T10:47:28.803
> 
> 标签：javascript, xml

我很抱歉这个问题，但我是第一次这样做

这是我用于加载 xml 文件的 loadxml.js 文件

```
 function loadXMLDoc(dname)
 {
 if (window.XMLHttpRequest)
   {
   xhttp=new XMLHttpRequest();
   }
 else
   {
   xhttp=new ActiveXObject("Microsoft.XMLHTTP");
   }

 xhttp.onreadystatechange=function()
  {
  if (xhttp.readyState==4 && xmlhttp.status==200)
    {
    return xhttp.responseXML;
    }
  }

xhttp.open("GET",dname, true);

xhttp.send();

 } 
```

现在这是我使用 javascript 的 html 文件我尝试提取节点

```
<!DOCTYPE html>

<html>

<head>

<script src="loadxmldoc.js">
</script>

</head>

<body>

<script>

xmlDoc=loadXMLDoc("books.xml");

document.write(xmlDoc.getElementsByTagName("title")[0].childNodes[0].nodeValue + "<br>");

document.write(xmlDoc.getElementsByTagName("author")[0].childNodes[0].nodeValue + "<br>");

document.write(xmlDoc.getElementsByTagName("year")[0].childNodes[0].nodeValue);
</script>

</body>

</html> 
```

这是xml文件

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<bookstore> 
 <book category="cooking">
   <title lang="en">Everyday Italian</title> 
   <author>Giada De Laurentiis</author> 
   <year>2005</year> <price>30.00</price> 
 </book> -
 <book category="children"> 
   <title lang="en">Harry Potter</title> 
   <author>J K. Rowling</author> 
   <year>2005</year> 
   <price>29.99</price> 
 </book> 
 <book category="web"> 
   <title lang="en">XQuery Kick Start</title> 
   <author>James McGovern</author> 
   <author>Per Bothner</author> 
   <author>Kurt Cagle</author> 
   <author>James Linn</author> 
   <author>Vaidyanathan Nagarajan</author> 
   <year>2003</year> 
   <price>49.99</price> 
 </book> 
 <book category="web" cover="paperback"> 
  <title lang="en">Learning XML</title>
  <author>Erik T. Ray</author> 
  <year>2003</year> 
  <price>39.95</price> 
 </book> 
</bookstore> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:49:24.730

您正在执行异步请求。附加处理程序或使其同步以进行调试。

```
xhttp.open("GET",dname,false); 
```

或者更好地使用处理程序：

```
xhttp.open("GET",dname,true);
xhttp.onreadystatechange = function(){
    if(xhttp.readyState == 4){
        if(xhttp.status == 200)
            console.log(req.responseText);
         else
            console.log('Error getting data') ;
    }
}
xhttp.send(null);
return xhttp.responseXML; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:29:41.157

我建议您使用 jQuery，因为它会为您完成大部分工作。

```
$.ajax({
  url: 'ajax/test.html',
  success: function(data) {
    $('.result').html(data);
    alert('Load was performed.');
  }
}); 
```

# android - 在哪里检查 android 片段中的方向变化

> ID：13877154
> 
> 赞同：20
> 
> 时间：2012-12-14T10:47:49.303
> 
> 标签：android, android-fragments

在我的应用程序中，`FragmentActivity`除了`Fragment`一个特定的`Fragment`. 我在`Fragment`s 中通过页脚`View`s 在s 之间移动`FragmentActivity`。

当方向发生变化时，我有一个不同的布局（实际上具有相同的名称但不同`View`的小部件） 。`Fragment`在横向模式下，我想从`Fragment`布局`View`和页脚`View`中删除特定的小部件`FragmentActivity`，当返回纵向模式时，将所有内容添加回来。

我已经在 s 中保存了我需要的所有数据，但是我应该`onSavedInstanceState()`在`Fragment`哪里最好地测试方向变化，以便我可以`View`适当地恢复 s？

不确定我是否可以在其中覆盖`onConfigurationChange()`和测试，因为我`Fragment`的 android 中没有**android:configChanges="orientation"**`Manifest`。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-12-14T11:10:56.377

将此检查保留在 onCreate() 中。当您旋转设备时，应用程序会重新启动。因此，当应用重新启动时，会再次调用 onCreate。

```
int currentOrientation = getResources().getConfiguration().orientation;
if (currentOrientation == Configuration.ORIENTATION_LANDSCAPE) {
   // Landscape
}
else {
   // Portrait  
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-01-16T08:59:13.683

您也可以通过覆盖`onConfigurationChanged`片段的功能来控制方向变化。

```
 @Override
    public void onConfigurationChanged(Configuration newConfig) {

        super.onConfigurationChanged(newConfig);
        int currentOrientation = getResources().getConfiguration().orientation;

        if (currentOrientation == Configuration.ORIENTATION_LANDSCAPE){
           Log.v("TAG","Landscape !!!");
        }
        else { 
           Log.v("TAG","Portrait !!!");
       }
   } 
```

# wpf - WPF：内部内容不会滚动

> ID：13877166
> 
> 赞同：1
> 
> 时间：2012-12-14T10:48:28.927
> 
> 标签：wpf, xaml, scroll, scrollviewer

我有一个里面有一个网格的窗口：

```
<Grid KeyboardNavigation.TabNavigation="Local">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto" MinHeight="70" />
        <RowDefinition Height="*" />
        <RowDefinition Height="25" />
    </Grid.RowDefinitions>

    <ContentControl Grid.Row="0" Content="{Binding ChildViewModel.View}" />

    <DockPanel Grid.Row="1" Visibility="{Binding SearchResultViewVisibility}">
        <GridSplitter DockPanel.Dock="Top" Background="LightGray" Height="5" HorizontalAlignment="Stretch" VerticalAlignment="Top" IsTabStop="False"/>
        <Views:SearchResultView DataContext="{Binding SearchResultViewModel}" />
    </DockPanel>

    <UserControls:GradientBackgroundControl Grid.Row="2" Height="25">
        <Validators:FocusSummaryControl x:Name="FocusSummary" ValidateOnlyFocusedElement="False" />
    </UserControls:GradientBackgroundControl>
</Grid> 
```

ContentControl 使用此 Grid 集获取 UserControl：

```
<Grid KeyboardNavigation.TabNavigation="Local">
<Grid.RowDefinitions>
    <RowDefinition />
    <RowDefinition Height="35" />
</Grid.RowDefinitions>
<Grid.ColumnDefinitions>
    <ColumnDefinition Width="80" />
    <ColumnDefinition Width="*" />
    <ColumnDefinition Width="80" />
    <ColumnDefinition Width="80" />
</Grid.ColumnDefinitions>

<ScrollViewer Grid.Row="0" Grid.ColumnSpan="4">
    <StackPanel>
        ...
    </StackPanel>
</ScrollViewer> 
```

现在的问题是，UserControl 中的 ScrollViewer 不滚动。设置为 ContentControl 的 UserControl 的内容更高，溢出只是隐藏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T17:18:56.120

我认为你需要重新安排一些事情。我的建议（我确信有无限的变化会起作用）：

首先，在您的网格 ( `Height="Auto"`) 中添加一个新行并将顶行的高度（其中包含您`ContentControl`的）设置为`"*"`

```
<Grid.RowDefinitions>
  <RowDefinition Height="*" MinHeight="70" />
  <RowDefinition Height="Auto" />
  <RowDefinition Height="*" />
  <RowDefinition Height="25" />
</Grid.RowDefinitions> 
```

其次，将您`GridSplitter`的 DockPanel 移出。将分离器放在第 1 行，将停靠面板放在第 2 行。

```
<ContentControl Grid.Row="0" Content="{Binding ChildViewModel.View}" />

<GridSplitter Grid.Row="1" Background="LightGray" Height="5" HorizontalAlignment="Stretch" VerticalAlignment="Top" IsTabStop="False" ResizeBehavior="PreviousAndNext"/>

<DockPanel Grid.Row="2" Visibility="{Binding SearchResultViewVisibility}">
    <Views:SearchResultView DataContext="{Binding SearchResultViewModel}" />
</DockPanel> 
```

请注意，您可能还必须`ResizeBehavior`为您的 GridSplitter 设置 ，如上所示。我希望这会让你接近你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T12:04:38.787

如果我没记错的话，StackPanel 需要为滚动功能设置一个高度才能工作，因为 StackPanel 在设计上会朝一个方向增长（基于方向）。

要确认这是否是您的问题的原因，请通过将 StackPanel 的高度设置为固定高度进行测试。或者，您可能希望将 StackPanel 替换为 DockPanel 并查看行为。还有一个您可能想要摆弄的 ScrollViewer.CanContentScroll 属性。

让我们知道这个测试的结果。

# matlab - Matlab中数据加载时间长

> ID：13877167
> 
> 赞同：6
> 
> 时间：2012-12-14T10:48:33.683
> 
> 标签：matlab, matlab-load

我有四个变量，每个变量都保存在 365 个 mat 文件中（大小：8 x 92 x 240）。我尝试在 for-loop day=1:365 中将这些加载到我的函数中，每天一个变量文件。但是，前两个变量的加载时间总是异常长。我的加载代码如下所示：

```
load([eraFolder sprintf('Y%dD%d-tempSD.mat',year,day)], 'tempSD'); % took 5420 s to load

load([eraFolder sprintf('Y%dD%d-tempDewSD.mat',year,day)], 'tempDewSD') 

load([eraFolder sprintf('Y%dD%d-eEraSD.mat',year,day)], 'eEraSD'); % took 6 seconds to load

load([eraFolder sprintf('Y%dD%d-pEraSD.mat',year,day)], 'pEraSD'); 
```

使用 Profiler，我可以看到前两个变量在 365 次调用中加载需要 5420 秒，而后两个变量在 365 次调用中分别需要 6 和 4 秒加载。当我交换加载变量的顺序时，例如`eEraSD`before `tempSD`，仍然是前两个加载需要更多时间。

当`tic` `toc`用于跟踪加载所花费的时间时，加载第一个或第二个变量的时间似乎随着调用次数呈指数增长（最后一次调用需要 50 秒才能运行）。对于第三个和第四个变量，每个文件的加载时间保持在 0.02-0.04 秒左右，或多或少与我在 for 循环中走了多远无关。见下图。

![在此处输入图像描述](../Images/b8b4ce7afc3402cd24aced973f0dd25b.png) ![在此处输入图像描述](../Images/d5d1824a3b7d25fbebbab12915dd0703.png)

当使用`importdata`而不是“加载”时，第一行大约需要 8000 秒才能加载 365 次（加载呈指数增长，如第二张图中的 T 所示）。然后其他行大约需要 10 秒才能加载 365 次。

我不明白为什么它看起来像这样，以及我能做些什么来减少加载时间。将不胜感激任何可能的解决方案的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T22:07:36.947

我想您的数据集位于同一目录中（通过网络或本地）并具有相同的属性，例如访问属性等。

那么剩下的唯一选择就是存储在这些 matfile 中的 vairbales 的特性。您能否检查这些变量的大小，例如通过加载样本。这将缩小范围以解决您的问题。

希望有所帮助。

FS

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T17:52:02.970

谢谢你的帮助。我终于找到了导致问题的原因。在脚本后面的“for”循环中，我将其他数据保存到名为 temp 的文件夹中。将该文件夹重命名为其他文件夹（例如临时文件夹）后，数据加载问题就消失了。

（现在实际问题已经解决了，这并不重要，但我不能说我理解为什么后来的“保存”调用和这个“导入数据”或“加载”调用之间存在这种特殊的关系。）

[请查看有关`temp`文件夹的新问题](https://stackoverflow.com/questions/14334953/why-would-saving-to-a-folder-called-temp-cause-data-loading-to-slow-down-in-a-fo)

# java - 从 java 代码打开命令提示符并运行一些命令并阅读 cmd 提示符显示？

> ID：13877177
> 
> 赞同：2
> 
> 时间：2012-12-14T10:48:53.967
> 
> 标签：java, process, runtime.exec

我需要从 java 代码打开命令提示符并在其上运行一些命令，然后我需要实时读取 java 代码中的命令提示符输出。

我已尝试使用以下代码，但无法在 java 中读取 cmd 提示符显示/输出。

```
File file = new File("D://Projects/quantum");
Process proc = rt.exec("cmd.exe /c start cmd.exe /k \"ping localhost\"", null, file);

try {
    BufferedReader br = new BufferedReader(new InputStreamReader(proc.getInputStream()));
    StringBuffer buffer = new StringBuffer();
    String line = null;
    while ((line = br.readLine()) != null) {
        System.out.println(line);

    }
} catch (IOException ioe) {
    ioe.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T10:53:38.133

看看[这个](http://www.java-samples.com/showtutorial.php?tutorialid=8)

```
Process p=Runtime.getRuntime().exec("cmd /c dir"); 
p.waitFor(); 
BufferedReader reader=new BufferedReader(new InputStreamReader(p.getInputStream())); 
String line=reader.readLine(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T08:09:13.967

这是运行`Process`.

## 一般提示。

*   阅读并实施[When Runtime.exec() won't的](http://www.javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html)***所有***建议。
*   完成后，忽略文章明确引用该`Runtime.exec()`方法的事实并建立`Process`使用 a `ProcessBuilder`，这样更容易实施第一个链接文章的一些建议。
*   但即便如此，将命令分解为`String`命令的`String[]`参数。

# php - 正则表达式 php url 标题转义

> ID：13877181
> 
> 赞同：2
> 
> 时间：2012-12-14T10:48:58.880
> 
> 标签：php, regex, .htaccess, url-rewriting

您好，我正在创建一个网站，当用户添加 amps 或斜杠作为他提交的文章的标题时，我遇到了 htaccess clean url 重定向问题。我决定只允许特定字符，如字母数字、-、_ ，@，[，]。没有引号或双引号等...

我似乎无法使正则表达式工作我对正则表达式没有很好的经验，而不是使用字符串替换我想我应该问。

也将不胜感激有关此问题的任何其他建议

在我的 htaccess 中，我有以下设置：

```
RewriteRule ^([^/]*)(.*)$ /index.php?page=$1&request=$2 
```

在我的索引中，我有：

```
include 'db.php';
include 'generic.php';

$pages = array('','main','events','news','rss','search','add-event');

if(isset($_GET['page']) && in_array($_GET['page'], $pages))
{
    $event_category = null;
    $event_title = null;
    $search_string = null;
    $rss_category = null;
    $events_date = null;
    $search_page = null;

    validate_evented_page(trim(urldecode($_GET['page'])));
}
else
{
    evented_error_page(404);
}

function evented_error_page($err)
{
    include('errorpages/error.php');
}

function validate_evented_page($p)
{
    $page = strtolower($p);

    global $event_category;
    global $event_title;
    global $search_string;
    global $rss_category;
    global $events_date;
    global $search_page;

    if($page == 'main' || strlen($p) == 0)
    {   
        include 'main.php';
    }
    else if($page == 'events')
    {
        $params = explode_url($_GET['request']);

        if(count($params) == 0)
        {
            $events_date = "'';";
            include 'allevents.php';
        }
        else if(count($params) == 1)
        {   

            if(check_date($params[0]))
            {
                $date_split = explode('-',$params[0]);
                $events_date = "'".date("m/d/Y" , mktime(0, 0, 0, date('m'), $date_split[1], date('Y')))."';";
            }
            else
            {
                $events_date = "'';";
            }

            include 'allevents.php';
        }
        else if(count($params) == 2)
        {
            $event_category = trim(urldecode($params[0]));
            $event_title = trim(urldecode($params[1]));

            include 'event.php';
        }
        else
        {
            evented_error_page(404);
        }

    }
} 
```

以下网址：

```
/events/Drum+%26+Bass/Innersense+presents+ETHOS_v04-0 
```

给出 $_GET['request'] = /Drum

什么时候应该是 Drum & Bass（在数据库中，我将此类别存储为“Drum & Bass”）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T13:01:27.173

您需要告诉 mod_rewrite使用标志`&`对在反向引用中分组的内容进行编码：`B`

```
RewriteRule ^([^/]*)(.*)$ /index.php?page=$1&request=$2 [B,L] 
```

URI 在通过重写引擎发送时被解码。所以`%26`被解码为`&`，`B`标志确保它被重新编码为反向引用。

# java - 从文件中读取特殊字符并使用java写入另一个文件

> ID：13877187
> 
> 赞同：-2
> 
> 时间：2012-12-14T10:49:31.787
> 
> 标签：java, file, input, io, output

> **可能重复：**
> [从文件中读取特殊符号](https://stackoverflow.com/questions/13875794/read-special-symbols-from-file)

我正在尝试将文件复制到另一个文件。该文件使用编码标准 UTF8 并且文件还包含特殊字符。该程序无法以相同格式复制另一个文件中的特殊字符，该文件被特殊符号的框形干扰。

```
 try 
  {
   BufferedReader br= new BufferedReader(new InputStreamReader(new FileInputStream(new File("path of the file")),"UTF8") ;
  BufferedWriter bw= new BufferedWriter(new OutputStreamReader(new FileOutputStream(new File("path of the output file");
    while(br.readLine()!=null)
   {
     //code here to read and write from a file to another.

    }

   }
  catch(Exception ex  
 { 
 ex.printStackTrace();
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:52:50.857

```
BufferedWriter bw = new BufferedWriter(
        new OutputStreamWriter(
            new FileOutputStream(new File("path of the output file")),
            "UTF-8")); 
```

或者在 java 7 中使用`Files.copy`.

# opacity - kineticjs - 为不透明度 > 0 的像素创建ImageRegion 而不仅仅是 1

> ID：13877188
> 
> 赞同：3
> 
> 时间：2012-12-14T10:49:34.297
> 
> 标签：opacity, kineticjs

因此 createImageRegion 方法会忽略所有具有少量 alpha/opacity 的像素。

您如何制作此功能，以便不透明度为 0.5 或其他像素的像素也将被计算为命中检测？

我研究了 KineticJS。一个 colorKey 被添加到一个 hitregion，但它把键转换为一个没有 alpha 的十六进制键。我想不出一种方法来完成这项工作。

非常感谢您的帮助！

这就是魔法发生的地方。但我不明白我怎么能包含任何类型的透明度但 0 的像素

```
createImageHitRegion: function (callback) {
    var canvas = new Kinetic.Canvas(this.attrs.width, this.attrs.height);
    var context = canvas.getContext();
    context.drawImage(this.attrs.image, 0, 0);
    try {
        var imageData = context.getImageData(0, 0, canvas.getWidth(), canvas.getHeight());
        var data = imageData.data;
        var rgbColorKey = Kinetic.Type._hexToRgb(this.colorKey);
        // replace non transparent pixels with color key
        for (var i = 0, n = data.length; i < n; i += 4) {
            data[i] = rgbColorKey.r;
            data[i + 1] = rgbColorKey.g;
            data[i + 2] = rgbColorKey.b;
            // i+3 is alpha (the fourth element)
        }

        var that = this;
        Kinetic.Type._getImage(imageData, function (imageObj) {
            that.imageHitRegion = imageObj;
            if (callback) {
                callback();
            }
        });
    }
    catch (e) {
        Kinetic.Global.warn('Unable to create image hit region. ' + e.message);
    }
} 
```

当我包括： data[i + 3] = 255 (rgbColorKey.a) 不存在时，所有图像事件都不再起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T15:39:54.847

我找到了答案：

```
 for (var i = 0, n = data.length; i < n; i += 4) {
            data[i] = rgbColorKey.r;
            data[i + 1] = rgbColorKey.g;
            data[i + 2] = rgbColorKey.b;
            if (!ignoreAlpha && data[i + 3] > 0) {
                data[i + 3] = 255;
            }
        } 
```

这样，每个留下一点透明度的像素都会得到全彩色。因此，如果您将其原型化为 kinetixJS，它应该可以工作：

```
Kinetic.Image.prototype.createImageHitRegion = function (callback, ignoreTransparantPixels) {
var canvas = new Kinetic.Canvas(this.attrs.width, this.attrs.height);
var context = canvas.getContext();
var _ignoreTransparantPixels;
if(typeof ignoreTransparantPixels == 'undefined'){
    _ignoreTransparantPixels = false;
}

context.drawImage(this.attrs.image, 0, 0);

try {
    var imageData = context.getImageData(0, 0, canvas.getWidth(), canvas.getHeight());
    var data = imageData.data;

    var rgbColorKey = Kinetic.Type._hexToRgb(this.colorKey);
    // replace non transparent pixels with color key
    for (var i = 0, n = data.length; i < n; i += 4) {
        data[i] = rgbColorKey.r;
        data[i + 1] = rgbColorKey.g;
        data[i + 2] = rgbColorKey.b;
        if (!_ignoreTransparantPixels && data[i + 3] > 0) {
            data[i + 3] = 255;
        }

        //trace(data[i + 3]);
        // i+3 is alpha (the fourth element)
    }

    var that = this;
    Kinetic.Type._getImage(imageData, function (imageObj) {
        that.imageHitRegion = imageObj;
        if (callback) {
            callback();
        }
    });
}
catch (e) {
    Kinetic.Global.warn('Unable to create image hit region. ' + e.message);
} 
```

}

# android - 以编程方式添加时检索 SupportMapFragment 的 GoogleMap 成员时出错

> ID：13877193
> 
> 赞同：0
> 
> 时间：2012-12-14T10:50:05.557
> 
> 标签：android, google-maps, android-layout

在有一些解析问题[使 XML 膨胀](https://stackoverflow.com/questions/13859059/google-map-api-v2-inflator-fails-on-old-phones)后，我决定做一个程序化的解决方法。地图已正确添加到场景中，但我在将其缓存为类成员以供以后使用时遇到问题。这是带有爆炸点的代码片段。

活动：

```
public class MoogliActivity extends FragmentActivity {

public void onCreate(final Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  this.setContentView(R.layout.main);
  final SupportMapFragment supportMap = SupportMapFragment.newInstance();
  final FragmentTransaction fragmentTransaction = this.getSupportFragmentManager()
            .beginTransaction();
 fragmentTransaction.add(R.id.maplayout, supportMap);
 fragmentTransaction.commit();
 mGoogleMap = supportMap.getMap(); // mGoogleMap = null after this
 // mGoogleMap.setMyLocationEnabled(true); Obviously NullPointerException
}

} 
```

主要的.xml

```
<RelativeLayout
    android:id="@+id/maplayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignBottom="@+id/tracking"
    android:layout_below="@id/header" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T18:59:33.933

This code:

`mGoogleMap = supportMap.getMap()`;

Should be called after onCreate. Try onResume(), like this.

```
@Override
protected void onResume() {
    super.onResume();

    // here it should work
    mGoogleMap = supportMap.getMap(); 

    // In case Google Play services has since become available.
    setUpMapIfNeeded();
} 
```

# ios - 在 iPad 横向更改原点

> ID：13877195
> 
> 赞同：0
> 
> 时间：2012-12-14T10:50:09.283
> 
> 标签：ios, coordinates, uiinterfaceorientation

在我的 iPad 应用程序中，我只将支持的界面方向设置为两种横向模式。我有一个背景颜色设置为红色的 UIView，我用`frame x:0 y:706 w:1024 h:60`.

红色的 UIView 没有出现在我想要的位置。即使 iPad 模拟器以横向模式启动，原点也会位于右上角（就好像 iPad 仍处于纵向模式一样）。我希望在横向模式下原点更改为左上角。我怎样才能做到这一点？我不得不提一下，我不熟悉使用不同的风景模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:56:15.983

每当 iOS 应用程序启动时，如果您设置了两个横向方向，它的默认方向保持纵向。您可以通过转换它在右上角显示您的 UIView。

看到这里[旋转 UIView iPhone](https://stackoverflow.com/questions/5457122/rotate-uiview-iphone)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:07:21.223

线@iPhoneDeveloper 已经说过它以Portait 模式开始，然后旋转到Landscape。

您可以像纵向一样设置坐标并设置视图的 autoresizingMask，因此您的视图将被调整大小并放置为横向

或者

您可以在视图控制器中覆盖以下方法

```
- (void)viewDidLayoutSubviews 
```

并设置子视图的框架。在所有旋转后调用该方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T11:20:25.453

了解设备方向的一个好方法是检查状态栏方向：

```
if (UIDeviceOrientationIsLandscape([UIApplication sharedApplication].statusBarOrientation))... 
```

这样你就可以把你的按钮放在正确的位置。

# c++ - 将 file.lib 构建为可在 linux 上使用的 file.a

> ID：13877196
> 
> 赞同：0
> 
> 时间：2012-12-14T10:50:15.717
> 
> 标签：c++, linux, windows

我正在尝试将 api 从 windows 移植到 linux。到目前为止，我已经完成了 file.cpp 和 file.h 的工作，但我仍然有一个指定给 windows 的库 .lib，这是 api 工作所必需的。如何从这个库构建一个可在 linux 上使用的 file.a？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T10:52:57.033

Linux（或所有 POSIX 系统，如 Mac OSX）中的静态库实际上是包含所有目标文件的存档。这些档案是使用以下[`ar`](http://linux.die.net/man/1/ar)命令创建的：

```
ar crv some_library.a some_object_file.o 
```

上述命令`some_library.a`从目标文件创建“存档”（即静态库） `some_object_file.o`。现在可以在链接其他程序时使用此库。

# css - 为什么“rgb (224, 226, 213)”是一个无效的属性值？

> ID：13877198
> 
> 赞同：13
> 
> 时间：2012-12-14T10:50:34.053
> 
> 标签：css, css-selectors

为什么任何浏览器都不能应用此颜色 rgb 规则？

**HTML**

```
<header>
    <h1>Header</h1>
</header> 
```

**CSS**

```
header h1 {
    background-color: red;
    color: rgb (224, 226, 213);
} 
```

Chrome Web Developer 工具告诉我这是一个无效的属性值，但我不明白为什么。您可以在[JSFiddle](http://jsfiddle.net/ZwXdA/)中看到结果。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-14T10:51:43.667

`rgb`在和之间有一个空格`(`，这是不允许的：

```
header h1 {
    background-color: red;
    color: rgb(224, 226, 213);
} 
```

不，我是认真的，不是。

与许多编程语言不同，CSS 明确禁止在函数名和左括号之间使用空格。这不仅适用于`rgb()`and `rgba()`，还适用于其他函数值，例如`url()`and `attr()`，以及函数伪类，`:nth-child()`例如`:lang()`和`:not()`。

请参阅[CSS2.1 的第 4.3.6 节](http://www.w3.org/TR/CSS21/syndata.html#color-units)，其中指出：

> 函数符号中 RGB 值的格式为“rgb(”，后跟以逗号分隔的三个数值（三个整数值或三个百分比值）列表，后跟“)”。*[...]*数值周围允许使用空格字符。

并且还要参考[附录 G](http://www.w3.org/TR/CSS21/grammar.html)的语法，正是下面的标记化，它清楚地表明在标识符和左括号之间不需要空格：

```
{ident}"("      {return FUNCTION;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T10:53:33.853

您需要在之后删除空格`rgb` `rgb(224, 226, 213)`

# php - 如果变量传递给 empty() 或 isset()，PHP 不会为未定义变量发出任何通知

> ID：13877200
> 
> 赞同：2
> 
> 时间：2012-12-14T10:50:37.637
> 
> 标签：php, notice

```
<?php

function myFunction($yesNname) { } 

empty($noName);
print_r($noName);
isset($noName);

myFunction($noName); 
```

输出：

```
PHP Notice:  Undefined variable: noName ... on line 6 // print_r
PHP Notice:  Undefined variable: noName ... on line 9 // myFunction 
```

未定义变量用于*empty()*和*isset()*。但是 PHP 并没有发布关于它的通知。为什么 PHP 对某些函数有歧视？我怎样才能编写这种类型的函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T10:57:08.383

你的意思是像：

```
if(!empty($noName)) {
 // print_r
 // function($noName);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T10:58:52.383

函数也不`isset()`是`empty()`。正如手册所解释的：

> 这是一个语言结构，而不是一个函数

要获得这种行为，您需要调整用 C 编写的 PHP 源代码。

您也可以使用 PHP 扩展来获得这种行为，但您还需要用 C 语言编写它并将其安装在您的服务器中。

**更新：**

*   [isset() 的手册页](http://php.net/isset)
*   [empty() 的手册页](http://php.net/empty)
*   [Zend 引擎指南](http://php.net/manual/en/internals2.php)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-14T11:30:23.037

在功能方面没有办法做到这一点。如果您只是不想显示错误，您可以在调用函数之前先检查变量或使用[错误控制运算符 "@"](http://php.net/manual/en/language.operators.errorcontrol.php)。

# php - 如何检查我上传的图片是否正确？

> ID：13877201
> 
> 赞同：2
> 
> 时间：2012-12-14T10:50:37.820
> 
> 标签：php, android

我正在将图像从 Android 上传到 PHP 服务器。但有时服务器中的图像是错误的（图像不完全一样，不完整）。如何检查我上传的图片是否正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T10:53:32.703

您可以在 POST 请求中将图片尺寸与图片一起发送。然后在服务器端，检查接收到的大小是否与作为 POST 参数传递的大小匹配，如果不匹配，则在响应中发回错误。

也将提供更昂贵的选择：

*   发送文件的哈希（md5 或 sha1）并检查双方是否匹配
*   尝试在 PHP 中读取图片并检查它是否为有效文件
*   ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T10:59:47.963

将图像发送到 php 的最佳方法（如果您希望在不丢失数据的情况下发送数据）是使用 POST 方法（我认为是键值对）通过 BASE64 对图像进行编码。然后在 PHP 中您可以解码将 BASE64 字符串返回到 jpeg 并存储它。

# javascript - 切换图像 onClick

> ID：13877205
> 
> 赞同：1
> 
> 时间：2012-12-14T10:50:51.767
> 
> 标签：javascript, jquery

我正在使用一个很酷的 jQuery - 当我单击标题链接“文本 1”或“文本 2”时，它下方会出现一些文本。但是，除此之外，我还想**在点击时更改关联的图像**。

这可能吗？

**因此，单击链接将显示文本并将相关图像更改为[http://placehold.it/100x150](http://placehold.it/100x150)**。它*总是*会变成这个特定的图像。

这是一个 JSFiddle**演示**：http: [//jsfiddle.net/hbfbS/](http://jsfiddle.net/hbfbS/)

```
<!DOCTYPE html>
<!--[if lt IE 7 ]><html dir="ltr" lang="en-US" class="no-js ie ie6 lte7 lte8 lte9"><![endif]-->
<!--[if IE 7 ]><html dir="ltr" lang="en-US" class="no-js ie ie7 lte7 lte8 lte9"><![endif]-->
<!--[if IE 8 ]><html dir="ltr" lang="en-US" class="no-js ie ie8 lte8 lte9"><![endif]-->
<!--[if IE 9 ]><html dir="ltr" lang="en-US" class="no-js ie ie9 lte9"><![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--><html dir="ltr" lang="en-US" class="no-js"><!--<![endif]-->
    <head>
        <meta charset="UTF-8" />
        <title>News</title>

        <!-- jQuery -->
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script> 

        <script type="text/javascript">
        function slideonlyone(thechosenone) {
             $('.newboxes2').each(function(index) {
                  if ($(this).attr("id") == thechosenone) {
                       $(this).slideDown(200);
                  }
                  else {
                       $(this).slideUp(600);
                  }
             });
        }
        </script>

        <style type="text/css">
        .newboxes2 {    display: none;}
        </style>

</head>

        <body>

            <div class="wrapper">

                    <div class="grid_4" style="float:left;width:300px"> 
                    <h2><a href="javascript:slideonlyone('newboxes1');" style="color:#455560!important;">Test 1</a></h2>
                    <h3 class="head"><img src="http://placehold.it/100x187" class="small" /></h3>
                            <div class="newboxes2" id="newboxes1">
                                <p> test 1 </p>
                            </div>
                    </div>

                  <div class="grid_4" style="float:left;width:300px">   
                <h2><a href="javascript:slideonlyone('newboxes2');" style="color:#455560!important;">Test 2</a></h2>
                <h3 class="head"><img src="http://placehold.it/100x187" class="small" /></h3>
                        <div class="newboxes2" id="newboxes2">
                            <p>test 2 </p>
                        </div>
                </div>

            </div>

    </body>

</html> 
```

非常感谢一些帮助。我确定这很简单。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T10:58:33.117

[http://jsfiddle.net/hbfbS/1/](http://jsfiddle.net/hbfbS/1/)

这是修改后的功能：

```
function slideonlyone(thechosenone) {
             $('.newboxes2').each(function(index) {
                  if ($(this).attr("id") == thechosenone) {
                        jQuery(this).parent('.grid_4').children().find('img').attr('src', 'http://placehold.it/100x150');
                       $(this).slideDown(200);
                  }
                  else {
                       $(this).slideUp(600);
                  }
             });
        } 
```

快速解释我所做的更改：

我添加了这一行， `jQuery(this).parent('.grid_4').children().find('img').attr('src', 'http://placehold.it/100x150');`

它的作用是获取被点击的当前项目的父项。然后获取所有子元素并在其中找到图像标记，然后使用新图像 url 更新属性“src”。

您可能希望更好地选择 img 元素，因为这当前会将父容器中的所有图像更改为新图像源。

# java - 在 webdriver 中，如何使用 Java 验证下拉字段是否显示

> ID：13877206
> 
> 赞同：0
> 
> 时间：2012-12-14T10:50:51.217
> 
> 标签：java, webdriver, selenium-webdriver

我需要在 webdriver 中使用 Java 验证下拉字段是否显示在屏幕上。仅在另一个屏幕中选中复选框后，此下拉字段将显示在此屏幕中。我已使用以下代码验证该字段是否显示，但它没有返回任何值，如真或假。

```
driver.findElements(By.name("ctl00$MasterPlaceHolder$DdlPwdExp"));
driver.findElements(By.name("ctl00$MasterPlaceHolder$DdlSessionExp"));
driver.findElements(By.name("ctl00$MasterPlaceHolder$DdlfailedLogin")); 
```

谁可以帮我这个事。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:23:43.807

应使用 xUnit-system 和 Asserts 进行验证。例如 Java 的 JUnit 或 TestNG。您可以使用 TestNG 通过以下方式进行验证（对于 JUnit，参数的顺序略有不同）：

```
Assert.assertEquals(driver.findElements(By.name("ctl00$MasterPlaceHolder$DdlPwdExp")).size(), 1, 
    "Password field wasn't found"); 
Assert.assertEquals(driver.findElements(By.name("ctl00$MasterPlaceHolder$DdlSessionExp")).size(), 1,
    "Some other field wasn't found"); 
Assert.assertEquals(driver.findElements(By.name("ctl00$MasterPlaceHolder$DdlfailedLogin")).size(), 1, 
    "Whatever field wasn't found"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T12:47:47.650

首先，我通过使用 Khrol 的上述答案解决了我的问题，我也尝试了另一种方法，它完全解决了我的问题。

```
int size = driver.findElements(By.name("ctl00$MasterPlaceHolder$DdlPwdExp")).size();
if (size > 0)
{
System.out.println("No. of Days for Password Expiration field: is displayed");
}
else
{
System.out.println("No. of Days for Password Expiration field: is not displayed");
} 
```

# c++ - 如何以“优先级”进行多线程？

> ID：13877208
> 
> 赞同：1
> 
> 时间：2012-12-14T10:50:57.400
> 
> 标签：c++, c, multithreading, winapi, atl

我有多个线程在后台处理多个文件，而程序处于空闲状态。
为了提高磁盘吞吐量，我使用临界区来确保没有两个线程同时使用同一个*磁盘*。

（伪）代码看起来像这样：

```
void RunThread(HANDLE fileHandle)
{
    // Acquire CRITICAL_SECTION for disk
    CritSecLock diskLock(GetDiskLock(fileHandle));

    for (...)
    {
        // Do some processing on file
    }
} 
```

一旦用户请求处理一个文件，我需要*停止所有线程*——*除了*正在处理请求文件的线程。处理完文件后，我想再次恢复所有线程。

鉴于这`SuspendThread`是一个坏主意，我该如何停止除处理相关输入的线程之外的所有线程？

我需要什么样的线程对象/特性——互斥体、信号量、事件或其他东西？我将如何使用它们？（我希望与 Windows XP 兼容。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T10:59:49.327

我建议你以完全不同的方式去做。如果您真的希望每个磁盘只有一个线程（我不相信这是一个好主意），那么您应该为每个磁盘创建一个线程，并在排队处理文件时分发文件。

为了实现对特定文件的优先级请求，我将在其正常处理期间（当然在其主队列等待循环中）的几个点上让一个线程检查“优先级槽”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T11:00:53.357

您可以要求线程优雅地停止。只需检查线程内循环中的一些变量，然后根据其值继续或终止工作。

关于它的一些想法：

*   该值的设置和检查应在临界区内完成。
*   因为临界区会减慢线程的速度，所以检查应该经常进行，以便在需要时快速停止线程，并且很少进行检查，这样线程就不会因获取和释放临界区而停止。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T11:09:19.477

在每个工作线程处理文件后，检查与该线程关联的条件变量。条件变量可以简单地实现为布尔+临界区。或使用 InterlockedExchange* 功能。老实说，我通常只是在线程之间使用不受保护的布尔值来表示“需要退出”——如果工作线程可能正在休眠，有时会使用事件句柄。

为每个线程设置条件变量后，主线程通过 WaitForSingleObject 等待每个线程退出。

```
DWORD __stdcall WorkerThread(void* pThreadData)
{
    ThreadData* pData = (ThreadData*) pTheradData;

    while (pData->GetNeedToExit() == false)
    {
        ProcessNextFile();
    }
    return 0;
}

void StopWokerThread(HANDLE hThread, ThreadData* pData)
{
   pData->SetNeedToExit = true;
   WaitForSingleObject(hThread);
   CloseHandle(hThread);
}

struct ThreadData()
{
    CRITICAL_SECITON _cs;
    ThreadData()
    {
        InitializeCriticalSection(&_cs);
    }
    ~ThreadData()
    {
        DeleteCriticalSection(&_cs);
    }

    ThreadData::SetNeedToExit()
    {
        EnterCriticalSection(&_cs);
          _NeedToExit = true;
        LeaveCriticalSeciton(&_cs);
    }

    bool ThreadData::GetNeedToExit()
    {
        bool returnvalue;
        EnterCriticalSection(&_cs);
          returnvalue = _NeedToExit = true;
        LeaveCriticalSeciton(&_cs);
        return returnvalue;
    }

}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T11:20:29.540

您还可以使用线程池并通过使用[I/O 完成端口](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365198%28v=vs.85%29.aspx)来调节它们的工作。

通常，池中的线程会休眠等待 I/O 完成端口事件/活动。当您有请求时，I/O 完成端口会释放线程并开始执行工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-14T11:31:03.613

这里的困难不是优先级，而是你希望一个线程退出它所持有的锁，让另一个线程拿走它。“优先级”与应该安排运行一组可运行线程中的哪一个有关——你想让一个线程不是可运行的（因为它正在等待另一个线程持有的锁）。

所以，你想实现（如你所说）：

```
if (ThisThreadNeedsToSuspend()) { ReleaseDiskLock(); WaitForResume(); ReacquireDiskLock(); } 
```

由于您（明智地）使用范围锁，我想反转逻辑：

```
while (file_is_not_finished) {
    WaitUntilThisThreadCanContinue();
    CritSecLock diskLock(blah);
    process_part_of_the_file();
}
ReleasePriority();

...

void WaitUntilThisThreadCanContinue() {
    MutexLock lock(thread_priority_mutex);
    while (thread_with_priority != NOTHREAD and thread_with_priority != thisthread) {
        condition_variable_wait(thread_priority_condvar);
    }
}

void GiveAThreadThePriority(threadid) {
    MutexLock lock(thread_priority_mutex);
    thread_with_priority = threadid;
    condition_variable_broadcast(thread_priority_condvar);
}

void ReleasePriority() {
    MutexLock lock(thread_priority_mutex);
    if (thread_with_priority == thisthread) {
        thread_with_priority = NOTHREAD;
        condition_variable_broadcast(thread_priority_condvar);
    }
} 
```

阅读条件变量——所有最近的操作系统都有它们，具有类似的基本操作。它们也在 Boost 和 C++11 中。

如果你不可能编写一个函数`process_part_of_the_file`，那么你就不能以这种方式构造它。相反，您需要一个可以释放和重新获得磁盘锁的作用域锁。最简单的方法是使其成为互斥体，然后您可以使用相同的互斥体等待 condvar。您仍然可以`thread_with_priority`以几乎相同的方式使用 mutex/condvar 对和对象。

您可以根据您需要系统对优先级更改的响应程度来选择“文件的一部分”的大小。如果您需要它具有*极强*的响应能力，那么该方案就无法真正发挥作用——这是协作式多任务处理。

我对这个答案并不完全满意，如果有很多其他线程已经在同一个磁盘锁上等待，那么具有优先级的线程可能会饿死很长时间。为了避免这种情况，我会考虑更多。可能不应该有每个磁盘的锁，而是应该在条件变量及其关联的互斥锁下处理整个事情。不过，我希望这能让你开始。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-14T11:56:23.843

好的，这个怎么样：

每个磁盘有两个线程，用于高优先级和低优先级请求，每个线程都有自己的输入队列。

最初提交的高优先级磁盘任务随后将与正在运行的任何低优先级任务并行发出其磁盘请求。它可以重置低优先级线程等待的ManualResetEvent（WaitForSingleObject），如果高优先级线程正在执行磁盘操作，它将被阻塞。高优先级线程应该在完成任务后设置事件。

这应该将磁盘抖动限制在提交高优先级任务和低优先级线程可以在 MRE 上等待的时间间隔（如果有）。提高为高优先级队列服务的线程的 CPU 优先级可能有助于提高此时间间隔内高优先级工作的性能。

编辑：通过“队列”，我的意思是一个线程安全的、阻塞的、生产者-消费者队列，（只是为了清楚：）。

更多编辑 - 如果发布线程需要通知作业完成，则发布到队列的任务可能包含一个“OnCompletion”事件，以任务对象作为参数调用。例如，事件处理程序可以发出一个 AutoResetEvent 信号，表明发起线程正在等待，从而提供同步通知。

# apache-commons-beanutils - Bean Spec 和 apache-commons-beanutils（getter 的大写）

> ID：13877211
> 
> 赞同：1
> 
> 时间：2012-12-14T10:51:12.143
> 
> 标签：apache-commons-beanutils

我们有一个 Bean，其字段名为：

```
private String aBcde = ... ; 
```

吸气剂是这样写的：

```
public String getABcde() {
    return aBcde;
} 
```

但

[http://javasourcecode.org/html/open-source/commons-beanutils/commons-beanutils-1.8.0/org/apache/commons/beanutils/PropertyUtilsBean.java.html](http://javasourcecode.org/html/open-source/commons-beanutils/commons-beanutils-1.8.0/org/apache/commons/beanutils/PropertyUtilsBean.java.html)

报告“NoSuchMethodError”

**问题：getter 的名称是错误的，还是 BeanUtils 中的错误？**

请注意，这很好用：

```
public String getaBcde() {
  ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:59:50.093

根据[http://blog.950buy.com/article/javabean-specification-on-a-few-you-should-know/](http://blog.950buy.com/article/javabean-specification-on-a-few-you-should-know/)看来我的期望是错误的

```
public String getaBcde() {
  ...
} 
```

是正确的。

实际上，Bean Spec 说：

“然而，为了支持偶尔使用所有大写名称，我们检查名称的前两个字符是否都是大写的，如果是，则不要管它。例如：

*   “FooBah”变成“fooBah”</li>
*   “Z”变成“z”</li>
*   “网址”变成“网址””

所以在我的例子中，我有一个映射到属性“ABcde”的getter“getABcde”，参见。网址示例。

# c - 设置为空环境变量的附加包含目录会中断 Visual C++ 构建

> ID：13877213
> 
> 赞同：1
> 
> 时间：2012-12-14T10:51:26.957
> 
> 标签：c, visual-c++, environment-variables, include-path

我在 Visual C++ 2008 中有一个项目，其中包含目录的名称来自环境变量：

```
AdditionalIncludeDirectories="&quot;..\include&quot;;&quot;$(EXTRA_INCLUDE_DIR)&quot;" 
```

（项目属性 → 配置属性 → C/C++ → 常规 → GUI 中的附加包含目录）

未定义环境变量时`EXTRA_INCLUDE_DIR`，项目无法编译，并且出现奇怪的错误：。

```
1>Compiling...
1>WIN32
1>c1 : fatal error C1083: Cannot open source file: 'WIN32': No such file or directory
1>foo.c 
```

以及更多错误表明`WIN32`符号未定义。`WIN32`在`PreprocessorDefinitions`( `PreprocessorDefinitions="WIN32;MORE_STUFF"`)中定义

当我查看`BuildLog.htm`文件时，我想我明白发生了什么：

```
Creating temporary file "c:\foo\build\RSP00001273601360.rsp" with contents
[
/GL /I &quot;..\include&quot; /I &quot;&quot; /D &quot;WIN32&quot; /D &quot;MORE_STUFF&quot; …
&quot;..\src\foo.c&quot;
]
Creating command line "cl.exe @"c:\foo\build\RSP00001273601360.rsp" /nologo /errorReport:prompt" 
```

似乎`/I`后面是一个空参数，它以某种方式消失了（被 Windows 命令行解析的怪癖吃掉了？还是 Visual C++ 的？），因此`/D`成为参数`/I`并`WIN32`成为操作数（编译器将其解释为源文件姓名）。（如果您认为我的解释不正确，请随时发表评论。）

我确实需要该项目在`EXTRA_INCLUDE_DIR`定义和未定义时都可以工作，因为它在稍微不同的情况下用于自动和手动构建。

我怎样才能有一个由环境变量指定的附加包含目录，并且在未定义此环境变量时不破坏构建？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T12:58:36.260

愚蠢的解决方法：

```
AdditionalIncludeDirectories="&quot;..\include&quot;;&quot;$(EXTRA_INCLUDE_DIR)\.&quot;" 
```

因此，当变量存在时，将搜索正确的目录；当变量不存在时，`\.`（即当前驱动器的根目录）被搜索。希望开发人员不要将寄生`.h`文件存储在根目录中。

# javascript - 如何检查用户的 IP 地址并在我的网页中显示不同的内容

> ID：13877217
> 
> 赞同：0
> 
> 时间：2012-12-14T10:51:36.137
> 
> 标签：javascript, .net, geolocation, ip-address

我想为美国的用户/访问者使用 javascript 或任何其他更好的方法在一个特定的 div 标签内显示不同的内容。

***更新：***

好的，现在我明白为什么 SO 在高质量内容方面如此受欢迎了。我很抱歉没有正确解释他的问题。

我的网站是全球访问的，所以英式英语和美式英语的拼写不同。

例如：英国英语-旅行者，美国英语-旅行者

所以我想根据用户的位置更改拼写。我是新手，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T11:35:14.100

查看这篇文章，[ASP.NET MVC 中的地理定位/地理定位（反向 IP 地址查找）变得简单](http://www.hanselman.com/blog/TheWeeklySourceCode37GeolocationGeotargetingReverseIPAddressLookupInASPNETMVCMadeEasy.aspx)

# maven - Maven Central 中的 CGLIB 3

> ID：13877219
> 
> 赞同：2
> 
> 时间：2012-12-14T10:51:48.750
> 
> 标签：maven, dependencies, cglib

所以，[CGLIB 3 已经发布](http://sourceforge.net/projects/cglib/files/cglib3/)了几个月，看起来 Spring 3.2[现在也在使用它](https://jira.springsource.org/browse/SPR-9669)——但不确定为什么它[不在 Maven Central 上](http://search.maven.org/#search%7Cgav%7C1%7Cg%3a%22cglib%22%20AND%20a%3a%22cglib%22)。

是否存在另一个存在此依赖关系的 Maven 存储库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T11:47:30.783

不是对您问题的直接回答，但它可能对您有所帮助：[Spring 3.2 内联 CGLIB 3](http://blog.springsource.org/2012/12/13/spring-framework-3-2-goes-ga/)。不再需要依赖CGLIB...

# haskell - 使用 xml-conduit 进行灵活的属性处理

> ID：13877220
> 
> 赞同：1
> 
> 时间：2012-12-14T10:51:48.507
> 
> 标签：haskell, yesod

我想使用[xml-conduit](http://hackage.haskell.org/package/xml-conduit-1.0.3.3)来解析一些非常大的 XML 文件，因为它似乎是 Haskell 唯一可以使用[Text](http://hackage.haskell.org/package/text)的 XML 库。不幸的是，我的 XML 文件有很多实体的属性（超过 500 个！），而我只需要其中的几个（比如数字 5、55、265、421）。因此，我不能明确地处理所有属性。该函数`ignoreAttrs`并没有真正的帮助，因为它只是丢弃了所有剩余的属性。

我怎样才能创建一些`AttrParser`只允许我解析一些非常具体的属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:42:02.127

您可以使用[ignoreAttrs](http://hackage.haskell.org/packages/archive/xml-conduit/1.0.3.3/doc/html/Text-XML-Stream-Parse.html#v%3aignoreAttrs)来避免处理剩余的属性。

# c# - FluentValidation 调用规则集和通用规则

> ID：13877227
> 
> 赞同：13
> 
> 时间：2012-12-14T10:52:16.617
> 
> 标签：c#, fluentvalidation

我有以下课程

```
public class ValidProjectHeader : AbstractValidator<Projects.ProjectHeader>
    {
        public ValidProjectHeader()
        {

            RuleFor(x => x.LobId).Must(ValidateLOBIDExists);
            RuleFor(x => x.CreatedByUserId).NotEmpty();
            RuleFor(x => x.ProjectManagerId).NotEmpty();
            RuleFor(x => x.ProjectName).NotEmpty();
            RuleFor(x => x.SalesRepId).NotEmpty();
            RuleFor(x => x.DeliveryDate).NotEmpty();
            RuleFor(x => x.ProjectStatusId).NotEmpty();
            RuleFor(x => x.DeptartmentId).NotEmpty();
            RuleFor(x => x.CustomerId).NotEmpty();

            RuleSet("Insert", () =>
            {
                RuleFor(x => x.ProjectLines).Must(ValidateProjectLines).SetCollectionValidator(new ValidProjectLine());
            });
            RuleSet("Update", () =>
            {
                RuleFor(x => x.ProjectLines).SetCollectionValidator(new ValidProjectLine());
            });

        } 
```

我想做的是用 rulset 调用验证，但是当我用 RuleSet 调用验证时，我也想返回“通用”规则。

我调用验证的代码如下

```
public abstract class BaseValidator
    {
        private List<ValidationFailure> _errors;
        public bool IsValid { get; protected set; }
        public List<ValidationFailure> Errors
        {
            get { return _errors; }
            protected set { _errors = value; }
        }
        public virtual bool CallValidation()
        {
            Errors = new List<ValidationFailure>();
            ValidatorAttribute val = this.GetType().GetCustomAttributes(typeof(ValidatorAttribute), true)[0] as ValidatorAttribute;
            IValidator validator = Activator.CreateInstance(val.ValidatorType) as IValidator;
            FluentValidation.Results.ValidationResult result = validator.Validate(this);
            IsValid = result.IsValid;
            Errors = result.Errors.ToList();
            return result.IsValid;
        }

        public virtual bool CallValidation(string ruleSet)
        {
            Errors = new List<ValidationFailure>();
            ValidatorAttribute val = this.GetType().GetCustomAttributes(typeof(ValidatorAttribute), true)[0] as ValidatorAttribute;
            IValidator validator = Activator.CreateInstance(val.ValidatorType) as IValidator;
            FluentValidation.Results.ValidationResult result = validator.Validate(new FluentValidation.ValidationContext(this, new PropertyChain(), new RulesetValidatorSelector(ruleSet)));
            IsValid = result.IsValid;
            Errors = result.Errors.ToList();
            return result.IsValid;
        }

        public BaseValidator()
        {
            Errors = new List<ValidationFailure>();
        }
    } 
```

我可以`CallValidation`用成员调用方法，`ruleSet`但它也没有调用“通用”规则。

我知道我可以创建一个“通用”规则集来运行这些规则，但在这种情况下，我必须始终使用通用规则集调用验证。

有什么方法可以调用 RuleSet 并调用通用规则。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-03-31T20:02:42.367

相反，您可以这样做：

```
using FluentValidation;
...
FluentValidation.Results.ValidationResult resultCommon =
    validator.Validate(parameter, ruleSet: "default, Insert"); 
```

该`using`指令需要将`Validate()`扩展​​方法从`DefaultValidatorExtensions`具有`ruleSet`属性的范围中引入。否则，您将只能从没有参数`Validate()`的继承中获得该方法。`AbstractValidator<T>``ruleSet`

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-05-12T09:59:52.300

在您的 Validator 类中创建一个方法，其中包括需要始终应用的所有“通用”规则。现在你可以调用这个方法

*   从您的“创建”规则集中
*   从规则集之外

例子

```
public class MyEntityValidator : AbstractValidator<MyEntity>
{
    public MyEntityValidator()
    {
        RuleSet("Create", () =>
            {
                RuleFor(x => x.Email).EmailAddress();
                ExecuteCommonRules();
            });

        ExecuteCommonRules();
    }

    /// <summary>
    /// Rules that should be applied at all times
    /// </summary>
    private void ExecuteCommonRules()
    {
        RuleFor(x => x.Name).NotEmpty();
        RuleFor(x => x.City).NotEmpty();
    }
} 
```

您为控制器中的操作定义 RuleSet

```
[HttpPost]
public ActionResult Create([CustomizeValidator(RuleSet = "Create")]  MyEntity model) 
```

这将确保对操作 Create 的请求将通过 RuleSet Create 进行验证。所有其他操作将使用对控制器中 ExecuteCommonRules 的调用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-14T10:58:46.703

我找到了一种方法，方法是`validator.Validate` 在`CallValidation(string ruleSet)`方法中添加第二个，如下所示

```
public virtual bool CallValidation(string ruleSet)
        {
            Errors = new List<ValidationFailure>();
            ValidatorAttribute val = this.GetType().GetCustomAttributes(typeof(ValidatorAttribute), true)[0] as ValidatorAttribute;
            IValidator validator = Activator.CreateInstance(val.ValidatorType) as IValidator;
            FluentValidation.Results.ValidationResult result = validator.Validate(new FluentValidation.ValidationContext(this, new PropertyChain(), new RulesetValidatorSelector(ruleSet)));
            FluentValidation.Results.ValidationResult resultCommon = validator.Validate(this);
            IsValid = (result.IsValid && resultCommon.IsValid);
            Errors = result.Errors.Union(resultCommon.Errors).ToList();
            return IsValid;
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-13T08:23:40.430

我刚刚在下面尝试过，它可以工作

```
 [CustomizeValidator(RuleSet = "default, Create") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-28T22:16:52.380

```
 Fluent validation 10+ onwards.
      using FluentValidation;
     var validationResult = await 
     validator.ValidateAsync(account,options=>options("nameOfRuleSet")); 
```

# php - CakePHP 2.x 是否修复了深层嵌套可包含查询的性能问题

> ID：13877231
> 
> 赞同：1
> 
> 时间：2012-12-14T10:52:34.997
> 
> 标签：php, cakephp, cakephp-1.3, cakephp-2.0

我正在开发一个基于 1.3.x 分支的遗留 CakePHP 应用程序，它大量使用了 Containable 行为，特别是深度嵌套的包含。

很明显，由于 CakePHP 框架处理深层包含下的查询的方式，这是一个巨大的性能问题。在一个请求中，我们有超过 10K 的查询，随后 Cake 将数据合并到一个数组中。

任何人都可以确认这些问题是否在 Cake 2.x 分支中得到修复，并且通过升级框架，我们可以在性能问题上取得进展。

由于时间限制，我们目前可以升级或重写系统的部分以不使用 Containable，但不能同时使用两者。

我更愿意升级，因为还有其他好处，但我需要确保我们的性能问题将得到解决。

深层嵌套包含示例

```
$this->Event->find('all', array(
        'conditions' => $conditions,
        'contain' => array(
            'SessionDay' => array(
                    'Activity' => array(
                     'TimeSlot' => array(
                        'TimeSlotBooking',
                            'order' => array('slot_time' => 'asc')
                    )
                    )
            ),
            'Activity' => array(
                'TimeSlot' => array(
                    'TimeSlotBooking',
                    'order' => array('slot_time' => 'asc')
                )
            ),
            'Interview' => array(
                'InterviewBooking',
                'order' => array('interview_time' => 'asc')
            ),
            'EventCode'
            )
        )
    ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:11:47.503

我一直在使用 Cake 2.x 的项目中使用非常深的嵌套可包含查询，它们运行良好。

它仍然会产生多个查询，在某些情况下而不是做

```
SELECT * FROM table WHERE x IN (1,2,3) 
```

它会做：

```
SELECT * FROM table WHERE x = (1)
SELECT * FROM table WHERE x = (2)
SELECT * FROM table WHERE x = (3) 
```

因此，您最终可能会遇到很多查询。归根结底，这将取决于您实际需要从所有表中检索多少行。

我建议使用相同的数据库安装另一个 Cake 2 项目。只需快速复制您的模型并运行最大的查询，然后查看查询调试输出中的差异是否有任何差异。

# jquery - 使用 jQuery 滑动和旋转页面网站

> ID：13877234
> 
> 赞同：2
> 
> 时间：2012-12-14T10:52:52.987
> 
> 标签：jquery, animation, rotation, jquery-animate, slide

如果在这里，我们可以编写代码并构建一个具有左右滑动页面的网站，那就太好了。

但首先，让我解释一下这个概念。众所周知，一个网站由许多页面组成。为了将页面导航到页面，我们将用户重定向到正确的 url 并加载新页面。我想要做的是避免这个加载时间，加载所有页面，显示用户想要查看的页面并隐藏其他页面。

但是为什么我要加载所有页面？？？我想通过显示页面（活动页面 80% 宽度/屏幕中心）、右侧下一页的开头（下一页 10% 宽度/右侧）来创建最佳网站之一, 上一页的结束（上一页 10% 宽度/左）。

你明白了吗？好=）

我所做的： - 构建一个索引页面，我们正在加载所有不同的页面（目前是 5 个） - 将类添加到所有这些页面以检索 id 并使用它 - 添加我的 js 函数和滑动代码效果

这是我的js函数。没有动画，一切都像这样工作：

/* 让进程先工作--------------------------------*/

```
// When we are clicking on any element of the parent #navigation (the div)
// We are running this function 
// We are focusing this tag to get a list of all the pages
$('li.menu-item').live('click', function(event){

/* GET THE PAGE ID OF THE CLICKING ELEMENT 
-----------------------------*/
var page_id_target = event.target.id;

console.log("page id: "+page_id_target);

// this <> li.menu-item
var all_pages_menu = $('li.menu-item');
console.log(all_pages_menu);    

var pages_numbers = all_pages_menu.length;
console.log("Sum of pages: "+pages_numbers);    

//get the list of li menu
console.log("target class of the focus element: "+all_pages_menu[page_id_target-1].className);

//get the list of div
console.log($('#content .page'));

// Desactive all li class 
$('.page, .menu-item').removeClass('active').removeClass('next').removeClass('previous');
$('.page').addClass('hidden');

//Define the number id of the next page and the previous 
var next = parseInt(page_id_target)+1;
var previous = parseInt(page_id_target)-1;
    //  console.log("page_id_target: "+page_id_target);
    //  console.log("next: "+next);
    //  console.log("previous: "+previous);
if (page_id_target==1)
{
    //Update Menu
    $('ul#navigation #'+page_id_target).addClass('active');
    $('ul#navigation #'+next).addClass('next');
    $('ul#navigation #'+pages_numbers).addClass('previous');                        

    //Update DOM
    $('#content .'+page_id_target).addClass('active').removeClass('hidden');
    $('#content .'+next).addClass('next').removeClass('hidden');
    $('#content .'+pages_numbers).addClass('previous').removeClass('hidden');               
}

else if (page_id_target==pages_numbers)
{
    //Update Menu           
    $('ul#navigation #'+page_id_target).addClass('active');
    $('ul#navigation #'+1).addClass('next');
    $('ul#navigation #'+previous).addClass('previous');

    //Update DOM
    $('#content .'+page_id_target).addClass('active').removeClass('hidden');
    $('#content .'+1).addClass('next').removeClass('hidden');
    $('#content .'+previous).addClass('previous').removeClass('hidden');        
}

else
{
    //Update Menu
    $('ul#navigation #'+page_id_target).addClass('active');
    $('ul#navigation #'+next).addClass('next');
    $('ul#navigation #'+previous).addClass('previous');

    //Update DOM
    $('#content .'+page_id_target).addClass('active').removeClass('hidden');
    $('#content .'+next).addClass('next').removeClass('hidden');
    $('#content .'+previous).addClass('previous').removeClass('hidden');    
} 
```

但是当我试图在我的函数中添加一些动画时，例如：

```
 else
            {
                //Update Menu
                $('ul#navigation #'+page_id_target_right).addClass('active');
                $('ul#navigation #'+next_right).addClass('next');
                $('ul#navigation #'+previous_right).addClass('previous');

                /*
                // Update DOM
                // Work without Animations
                $('#content .'+page_id_target_right).addClass('active').removeClass('hidden');
                $('#content .'+next_right).addClass('next').removeClass('hidden');
                $('#content .'+previous_right).addClass('previous').removeClass('hidden');  
                */      

                // Retrieve the id of the previous old page 
                previous_right_old = previous_right-1;
                console.log("previous_right_old: "+previous_right_old);

                                /*  
                                    $('#content .'+page_id_target_right).addClass('hidden');
                                    $('#content .'+next_right).addClass('hidden');
                                    $('#content .'+previous_right).addClass('hidden');
                                    $('#content .'+previous_right_old).removeClass('hidden');

                                */

                // This is the old previous page
                // Set up the page on the left and the background (this is for initialise it, Otherwise the first the background won't follow)
                // Add the animate action to the left 
                // The size of one page is 78%
                // Adding the hiding class to let the page on the left (-151%)
                $('#content .'+previous_right_old).css({ 'left' : '-73%','background-color' : '#EAEAEA'}).animate({'left' : '-151%'}, duration, easing, function(){$('#content .'+previous_right_old).addClass('hidden')});

                // This is the previous page
                // Active to previous
                // Animate it 
                $('#content .'+previous_right).animate({'left' : '-73%', 'margin-right' : '0%', 'margin-left' : '0%', 'backgroundColor' : '#EFF0F1' }, duration, easing, function(){$('#content .'+previous_right).removeClass('hidden').addClass('previous')});                        

                // Add the left/right margin to respect the active class and attribute good classes after
                $('#content .'+page_id_target_right).animate({'left' : '5%', 'margin-right' : '6%', 'margin-left' : '6%', 'backgroundColor' : '#FFFFFF' }, duration, easing, function(){$('#content .'+page_id_target_right).addClass('active').removeClass('hidden')});

                // load the next page on the right of the screen
                // Adding the next class so the page will be correctly displaying
                // Set up the page on the right 
                // Animate it to the left with a page with of 78%
                $('#content .'+next_right).addClass('next').appendTo('#content').css({ 'left' : '173%', 'backgroundColor' : '#EFF0F1'}).animate({'left' : '95%'}, duration);

                            //animate previous to next
                            //$('#content .previous').css({ 'left' : '-73%'}).animate({'left' : '-151%'}, duration, easing, function(){$(this).remove();})
                            //.clone().addClass('next').removeClass('previous').appendTo('#content').css({ 'left' : '173%'}).animate({'left' : '95%'}, duration);               

            } 
```

我确实有一些错误要修复，但我真的不知道我的错误在哪里......

因此，如果有任何优秀的开发人员愿意与我一起开发这个很棒的模板，那就太好了。感谢阅读，不要问我更多代码。干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T17:48:09.383

我做了一个[类似的插件](http://dread.tk/js/flipit.js)，专门用于翻转到非顺序方式，所以它不显示 prev/next

它还允许上/下和淡入淡出效果

我为[这个网站](http://360degresud.com/)写的， 这里是全屏翻转，但可以在任何容器中完成（这里是在身体上）

旨在允许在每个页面状态回调和动态内容加载

它还使用 jquery.queue 系统将所有移动列表放入 fifo 列表并允许修剪无用的移动

所以，不完美，不是你真正想要的，但也许能给你一些启发，代码在 creative common 3.0 by-nc-sa 下

# android - 一个活动的多个过渡动画

> ID：13877235
> 
> 赞同：3
> 
> 时间：2012-12-14T10:52:55.650
> 
> 标签：android

我有 3 个活动 - 活动 A、活动 B 和活动 C。转换如下

A->B 和 B->A ， A->C 和 C->A

现在，当我返回 A 时，我需要不同的动画进行过渡，这取决于我是来自 B 还是来自 C。

活动 A 是应用程序的主页，所以我使用 Textviews 从 A->B 或 A->C 进行，但从它们两者中，我使用硬件后退按钮返回 A。

所以，我的问题是如何在 A 中检测到我是从 A 还是 B 返回并相应地应用过渡动画？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:59:27.097

使用静态变量整数类型，当你开始活动 B 时设置整数值 1，当你启动 C 时设置值 2。并且每次在 OnResum() 中检查 Integer 的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-15T17:58:48.523

我使用`startActivityForResult`方法解决了它，因为它更干净可靠。

# ruby-on-rails - 自引用“孪生”has_one 关联

> ID：13877237
> 
> 赞同：6
> 
> 时间：2012-12-14T10:53:01.733
> 
> 标签：ruby-on-rails, associations

我在 Rails 3.2.2 中，我有一个 Variant 类：

```
class Variant < ActiveRecord::Base

   has_one :twin_variant

end 
```

我希望能够将这个类中的两个对象关联成“双胞胎”。我想创建：

```
v1 = Variant.new
v1.name = "Fantastic variant"
v1.save 
```

然后我想有一种方法来创建一个双胞胎变体：

```
v2 = Variant.new
v2.name = "Fantastic variant twin"
v2.save

v1.twin_variant = v2 
```

然后这两个对象应该相互关联，这样：

```
v1.twin_variant
=> v2

v2.twin_variant
=> v1 
```

这可能吗？我应该如何建立协会？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-14T11:30:52.660

给定以下模型

```
class Variant < ActiveRecord::Base
  attr_accessible :name, :variant_id

  has_one :twin_variant, class_name: "Variant", foreign_key: :variant_id
  belongs_to :twin, class_name: "Variant", foreign_key: :variant_id
end 
```

您可以设置循环关系

```
v1 = Variant.create(name: "Variant #1")
v2 = Variant.create(name: "Variant #2")

v1.twin_variant = v2
v2.twin_variant = v1 
```

你可以检查一下

```
Variant.where(name: "Variant #2").first.twin_variant.name # "Variant #1"
Variant.where(name: "Variant #1").first.twin_variant.name # "Variant #2" 
```

# javascript - Javascript 事件触发器

> ID：13877246
> 
> 赞同：0
> 
> 时间：2012-12-14T10:53:25.633
> 
> 标签：javascript, jquery, javascript-events

下面是一系列应按所列运行的事件，但我使用计时器来延迟事件，这不是一个好习惯，有没有办法在没有延迟计时器的情况下依次运行它们

```
$(".component-select",closestTable).val(parseData.component).trigger("change");

setTimeout(function() {
    $(".key-select",closestTable).val(parseData.key).trigger("change");
},1000);  

setTimeout(function() {                                                 
    $.each(parseData.instance, function (dIndex, dValue){                             
        $(".add_instance",closestTable).trigger("click");
        $("tbody select:last",closestTable).val(dValue).trigger("change");
    });
},1500); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:59:47.673

您也许可以使用[jQuery 延迟承诺](http://api.jquery.com/jQuery.when/)

另一个可能有用的资源：

[http://net.tutsplus.com/tutorials/javascript-ajax/wrangle-async-tasks-with-jquery-promises/](http://net.tutsplus.com/tutorials/javascript-ajax/wrangle-async-tasks-with-jquery-promises/)

# java - 如何使用令牌拆分用户的输入？

> ID：13877252
> 
> 赞同：1
> 
> 时间：2012-12-14T10:53:40.233
> 
> 标签：java, user-input, token, java.util.scanner

我需要你的建议才能做某事......我想像我在我的程序中使用扫描仪所做的那样获取用户的输入行......但我想将每个命令（单词）拆分为令牌......我愿意不知道该怎么做，直到现在我都在玩子字符串，但是如果用户例如按两次空格键按钮，一切都是错误的！！！！！！

例如：
请插入命令：我今年 20 岁

使用 substring 或 .split(" ") ，它运行但考虑具有：

请插入命令：我今年 20 岁

这就是为什么我需要您的建议....问题是我如何将用户的输入与令牌分开。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T10:57:43.213

好吧，您需要在将字符串拆分为标记之前对其进行规范化。最简单的方法是删除重复的空白字符：

```
line = line.replaceAll("\\s+", " "); 
```

（这也会将所有选项卡替换为单个`" "`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T11:55:07.993

使用[StringTokenizer](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/StringTokenizer.html)类。从 API ：

> “[It] 允许应用程序将字符串分解为标记...... StringTokenizer 对象在内部维护要标记化的字符串中的当前位置。”

API 中的以下示例代码将为您提供一个想法：

```
 StringTokenizer st = new StringTokenizer("this is a test");
    while (st.hasMoreTokens()) {
        System.out.println(st.nextToken());
    } 
```

它产生以下结果：

```
 this
    is
    a
    test 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T14:08:08.590

好的，所以我编写的代码会要求您插入一个命令，然后它将接受您的命令，然后将其拆分为任意数量的空格（由于正则表达式）。然后它将这些单词、数字、语音标记等保存为标记。然后，您可以操作 for 循环中的每个单词。

```
import java.util.Scanner;

public class CommandReaderProgram{ 

  public static void main(String[] args){
    Scanner userInput = new Scanner(System.in);        
    System.out.println("Please insert a command:");
    String temp = userInput.nextLine();

        while(temp != null){
            String [] tokens = temp.split("\\s+");
            for(String word : tokens){
                System.out.print(word);
                System.out.print(" ");    
            } 
            break;    
        }   
        System.out.print("\n");
 }
} 
```

要测试每个单词、数字和语音标记是否已实际保存为标记，请更改 System.out.print(" "); 中的字符。代码到任何东西。例如 System.out.print(""); 或 System.out.print("abcdefg"); 它会将这些数据放在每个令牌之间，以证明令牌确实是分开的。

不幸的是，我目前无法在 for 循环之外调用令牌数组，但当我弄清楚时会告诉你。

我想听听您正在尝试制作什么类型的程序，因为我认为我们都在尝试制作非常相似的东西。

希望这是您正在寻找的。

问候。

# sql - 如何使用空字段执行查询？

> ID：13877254
> 
> 赞同：1
> 
> 时间：2012-12-14T10:53:42.643
> 
> 标签：sql, postgresql

我有一个 SQL 查询：

```
SELECT documents.*, t_rights.rights, documents_list.docs
FROM documents 
INNER JOIN t_rights on t_rights.num=documents.type_right 
INNER JOIN documents_list on documents_list.num=documents.document1 
WHERE code_document=1 or code_document=1 
```

如果我有字段`documents.document1`并且`documents.document1`具有某些值，则一切正常。但是如果这个字段为空，我会得到空的查询结果。
它可以用空字段进行这样的查询吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T10:55:34.437

在这种情况下，我认为您需要将您的替换`INNER JOIN`为`LEFT JOIN`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:02:22.393

`LEFT OUTER JOIN`即使没有匹配项，您也可以使用 a来包含行：

```
SELECT documents.*, t_rights.rights, documents_list.docs
    FROM documents 
    INNER JOIN t_rights on t_rights.num = documents.type_right 
    LEFT OUTER JOIN documents_list on
        documents_list.num = documents.document1 
    WHERE code_document=1 
```

现在您将从文档中获取行，即使它们与`documents_list`. 但是，也许您只想包含 字段为空*的*不匹配文档。`document1`在这种情况下，您需要更多：

```
SELECT documents.*, t_rights.rights, documents_list.docs
    FROM documents 
    INNER JOIN t_rights on t_rights.num = documents.type_right 
    LEFT OUTER JOIN documents_list on
        documents_list.num = documents.document1 
    WHERE code_document = 1 and (
        documents_list.num is not null or
        documents.document1 is null
    ) 
```

这只返回与 匹配的文档`document_list`，*除了*那些`document1`为 null 的情况（我假设“空”是指 null；如果不是，请将您自己的条件放在那里）。

# java - Java函数参数是否总是按值传递数组？

> ID：13877256
> 
> 赞同：4
> 
> 时间：2012-12-14T10:53:45.187
> 
> 标签：java, arrays, pass-by-value

> **可能的重复：**
> [Java 是“按引用传递”吗？](https://stackoverflow.com/questions/40480/is-java-pass-by-reference)

如果我们有大`byte[]`数组（比如 40Mb）并且我们想在方法中发送它

```
method(array); 
```

数组会被复制吗？**因此，Java env => 80Mb**中的内存将再增加 40Mb ，对吗？

如果是，我们如何在调用该方法后销毁“第一个”数组？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T10:57:19.433

不，不会复制数组。

在 Java 中，一切**都是按值传递的**。

非原始类型的变量是对对象的**引用。**数组是一个对象，数组类型的变量是对该数组对象的引用。

当您调用采用非原始类型参数的方法时，**引用是按值传递的**——这意味着，引用本身被复制，而不是它所引用的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T10:55:45.043

不会创建新`Object`的，只会将引用复制到函数参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T10:56:25.037

该变量`array`实际上只是对数组对象的引用。当您传递`array`给函数时，您只是在复制引用而不是引用所引用的实际数组。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T10:57:06.510

Java 总是按值传递。传递的值是原始类型情况下的变量值和对象情况下变量持有的引用值。

在这种情况下，数组是一个对象，通过值传递的是对该对象的引用。所以不，数组不会被复制。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T11:00:23.517

> Java 将对象作为按值传递的引用传递。

所以 Heap 中只会有一个 Object 的副本。查找以下示例：来自[Java “传递引用”吗？](https://stackoverflow.com/questions/40480/is-java-pass-by-reference)

```
public void foo(Dog d) {
  d.name.equals("Max"); // true
   d = new Dog("Fifi");
   d.name.equals("Fifi"); // true
 }

Dog aDog = new Dog("Max");
foo(aDog);
aDog.name.equals("Max"); // true 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-14T11:01:00.970

不，不会复制数组。事实上，因为：

1.  在 Java 中，一切都是按值传递的。

2.  数组本身就是一个对象。

因此，结果`array'`将是方法的复制，但它包含的内容：字节元素**不会**复制。因此，您为数组更改的所有内容`method`都会**影响**原始数组。

所以，内存不会像你看到的那样翻倍:)

# ios - OpenGL ES 2.0 平面变形/扭曲效果 GPUImage iOS

> ID：13877258
> 
> 赞同：0
> 
> 时间：2012-12-14T10:53:57.073
> 
> 标签：ios, image-processing, opengl-es-2.0, depth-buffer, gpuimage

正在玩一些很棒的 GPUImage 框架，并且能够使用片段着色器重现一些类似“凸”的效果。

但是，我想知道是否有可能使用 GPUImage 或任何其他 OpenGL 渲染到纹理来获得更复杂的 3D 平面弯曲。

我想要达到的效果看起来像这样 - 有没有机会使用深度缓冲区和顶点着色器获得类似的东西 - 或者只需要开发一些更复杂的片段着色器来模拟 Z 坐标？

![实时相机输出 - 这是一张普通的纸](../Images/d33568cebc5e16b154f68b05ad7b2de3.png)

这就是我现在只使用片段着色器和一些周期性膨胀得到的 ![这是我在 GPUImage 中使用片段着色器可以获得的结果 - 不是很酷](../Images/92d7b9b7d7e8988bd035a5728a01396a.png)

谢谢

另一个想法是，也许可以在一些 3D 建模应用程序中对曲面进行原型制作，并以某种方式将纹理映射到它？

# iphone - 如何从 rootViewController 中删除所有 UIView

> ID：13877260
> 
> 赞同：-1
> 
> 时间：2012-12-14T10:54:08.757
> 
> 标签：iphone, ios, uinavigationcontroller

我目前正在将`topViewController`a`UIView`添加到我的`rootViewController`. 有什么方法可以在通过`UIViews`之前删除所有内容吗？`rootViewController``popToRootViewContoller`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T11:07:13.470

在返回操作中，键入以下代码：

```
for (UIView *subview in self.view.subviews) {
    [subview removeFromSuperview];
} 
```

然后键入`popToRootViewContoller`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T10:56:21.537

在`viewWillDisappear`您可以执行此任务时，当您离开时，`rootViewController`此方法将调用，因此您可以在此时删除您的视图。

```
-(void)viewWillDisappear:(BOOL)animated
{
    for (UIView *view in [self.view subviews]) {
        [view removeFromSuperview];
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T11:01:34.607

`viewWillAppear:`在YourViewController的方法中添加这个

```
for (UIView *view in self.view.subviews) {
        [view removeFromSuperview];
    } 
```

希望对你有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T11:00:40.330

试试这个：

```
-(void)viewWillAppear:(BOOL)animated
{
NSArray *subviews = [self.view subviews];

    for (UIView *subview in subviews) {

        [subview removeFromSuperview];

    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T11:06:58.937

```
[yourView removeFromSuperView] 
```

但是当你弹出一个时添加`subviews`不会在那里`UIViewController`，所以我认为你不需要这样做

# c# - 从另一个用户控件刷新用户控件中的 ListView

> ID：13877264
> 
> 赞同：0
> 
> 时间：2012-12-14T10:54:32.493
> 
> 标签：c#, asp.net, event-handling

我有两个用户控件。每个用户控件都包含一个 ListView。这两个用户控件的目的是显示主/明细数据。引发事件 ResourceReassigned 时，始终会引发空引用异常。我做错了什么，这意味着我的事件处理程序分配不起作用？

```
<asp:ListView ID="lvStaffer" runat="server">
  <LayoutTemplate>
    <table>
      <tr id="itemplaceholder" runat="server"></tr>
    </table>
  </LayoutTemplate>
  <ItemTemplate>
    <tr>
      <td>                    
        <asp:UpdatePanel ID="upResourceListViewControlItem" runat="server">
          <ContentTemplate>
            <rw:ResourceListViewControl ID="ResourceListViewControlItem" runat="server" />
          </ContentTemplate>
        </asp:UpdatePanel>
      </td>
    </tr>
  </ItemTemplate>
</asp:ListView>

public partial class Control_ResourceListViewControl : StafferWebControlBase
{

  public event EventHandler ResourceReassigned;

  protected void lvResource_ItemUpdating(Object sender, ListViewUpdateEventArgs e)
  {
    // If an item in lvResource is updated we want to refresh the master lvStaffer
    // ListView so we raise an event. Null Reference Exception is thrown here. 
    ResourceReassigned(sender, new EventArgs());
  }

}

public partial class Control_StafferListViewControl : StafferWebControlBase
{

  protected void lvStaffer_ItemDataBound(Object sender, ListViewItemEventArgs e)
  {
    Control_ResourceListViewControl resourceListViewControlItem =
(Control_ResourceListViewControl)e.Item.FindControl("ResourceListViewControlItem");

    if (resourceListViewControlItem != null)
    {
      // Each item in lvStaffer contains an instance of the ResourceListViewControl object.
      // Each object is a subscriber of the ResourceReassigned event.
      resourceListViewControlItem.ResourceReassigned += new EventHandler(lvStaffer_ResourceReassigned);
    }

  }

  protected void lvStaffer_ResourceReassigned(object sender, EventArgs e)
  {
    // Repopulates and binds the lvStaffer ListView
    ResetStafferListView();
  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:16:12.590

被`NullReferenceException`抛出是因为在引发事件时没有订阅者。虽然您可以在 VB.NET 中安全地调用“RaiseEvent”，但在 C# 中，您首先需要检查事件对象是否不是`null`：

```
if (ResourceReassigned != null)
    ResourceReassigned(sender, EventArgs.Empty); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T08:34:59.847

我认为你应该每次都绑定你的事件（不仅在页面没有回发的情况下）。例如在 Page_Load 事件或控件 OnLoad 上。

```
 protected void Page_Load(object sender, EventArgs e){     
  foreach (ListViewItem item in lvStaffer.Items)
        {
           Control_ResourceListViewControl resourceListViewControlItem =
        (Control_ResourceListViewControl)e.Item.FindControl("ResourceListViewControlItem");

        if (resourceListViewControlItem != null)
        {
           // Each item in lvStaffer contains an instance of the          ResourceListViewControl object.
          // Each object is a subscriber of the ResourceReassigned event.
           resourceListViewControlItem.ResourceReassigned += new   EventHandler(lvStaffer_ResourceReassigned);
        }
       } 
```

}

# vbscript - 使用 Win7 的打开文件对话框

> ID：13877267
> 
> 赞同：0
> 
> 时间：2012-12-14T10:54:42.113
> 
> 标签：vbscript, openfiledialog, qlikview

我在 QLikView 中使用的旧打开文件对话框不再适用于 Win7。子使用“MSComDlg.CommonDialog”，这是子的代码。

```
' Sub to show open/save dialog
SUB OpenSave (varOpenSaveInputBox, varOpenSaveType, varOpenSaveFilter)   
   ' Create object
   SET objComDlg32 = CreateObject("MSComDlg.CommonDialog")
   ' Set memory buffer
   objComDlg32.MaxFileSize = 260
   ' Set filter
   objComDlg32.Filter = varOpenSaveFilter
   ' Show dialog 
   IF varOpenSaveType = 0 Then
      objComDlg32.ShowOpen
   ELSE
      objComDlg32.ShowSave
   End IF    
   ' Get filename from dialog
   strOpenSave = objComDlg32.FileName
   ' Check IF dialog is cancelled
   IF strOpenSave <> vbNullString Then
      ' Set to variable
      objOpenSave.SetContent strOpenSave, TRUE
   End If
END SUB 
```

任何人都可以建议一个有效的打开文件对话框吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:02:54.047

`MSComDlg.CommonDialog`在 Windows 7（已测试）下仍然有效且处于活动状态（已注册），它在 Windows 8 中已被废弃。我假设您在 64 位操作系统上运行，而该控件仅在 32 位环境中运行。因此，如果是这种情况，只需使用目录`WScript.exe/CScript.exe`中的版本将 .vbs 脚本作为 32 位进程运行`SysWOW64`。

```
%WinDir%\SysWOW64\WScript.exe script.vbs
%WinDir%\SysWOW64\CScript.exe script.vbs 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:30:58.280

comdlg32.dll 仅在您安装了 Visual Studio 或类似软件时才安装。

[http://support.microsoft.com/kb/957924](http://support.microsoft.com/kb/957924) 或从网上下载。

将它放在system32文件夹中并使用regsvr32.exe注册它

或 64 位

regsvr32 c:\Windows\SysWOW64\comdlg32.ocx

它有效。

# facebook - Facebook 评论 iframe 不会加载更多

> ID：13877268
> 
> 赞同：6
> 
> 时间：2012-12-14T10:54:42.580
> 
> 标签：facebook, iframe, facebook-comments, facebook-iframe

我们使用 facebook iframe 来处理客户产品页面上的 Facebook 评论。然而，“查看更多”评论似乎有问题；它在第一次单击时工作正常，但随后停止工作。

仅当您在查看评论时登录 Facebook 时才会出现此问题。您需要登录才能查看对评论的回复。

例如这个网址（网站是瑞典语）

[http://www.have2have.se/skor/stovletter-skoletter/have2have-brands/stovletter-carola-svart](http://www.have2have.se/skor/stovletter-skoletter/have2have-brands/stovletter-carola-svart)

共有 7 条评论。起初，链接显示“查看 5 更多”。

如果我单击查看更多按钮，将加载其他评论（但不是 5 条，但这是另一个问题），按钮将变为“查看更多 3 条”。

如果我再次单击“查看更多”按钮，它会显示一个加载指示器，然后更改为“查看 2 更多”。但没有加载新评论。如果我继续单击该按钮没有任何变化，它只会继续显示加载指示器和“查看 2 更多”。

我没有看到的 iframe 实现是否有问题，或者这是 Facebook 方面的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T20:42:05.997

我发现 Facebook 有时会拒绝加载额外的评论，经过多次毫无结果的调试后，我不得不得出结论，这是/是 Facebook 的问题，并且超出了我的控制范围。

我最近迁移到 Disqus，它提供 Facebook 连接，从用户的角度来看是相似的，并允许他们在通过 Facebook 登录后发表评论，Disqus 允许您通过 Twitter 和许多其他服务进行连接，这很不错。

我知道这可能不是您希望的答案，但是根据我对 Facebook 评论的个人经验，我可以说，Disqus 最终成为我们最好的解决方案。

# django - 如何使用 sql 2005 在 django 模型 1.3 中获取长文本字段

> ID：13877269
> 
> 赞同：2
> 
> 时间：2012-12-14T10:54:43.157
> 
> 标签：django, django-models

应该在模型中给出的字段名称是什么以获得长文本字段。我正在使用 django 1.3 和 sql 2005

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T11:03:46.727

在你的模型中写这个

```
name = models.CharField(max_length=200) 
```

链接

1）参考[访问](https://docs.djangoproject.com/en/dev/ref/models/fields/)this。

2）[这可能](https://docs.djangoproject.com/en/dev/topics/db/models/)很有用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T11:12:51.510

如果您需要更长的文本，那么这应该会有所帮助：

```
your_field = models.TextField("your field name") 
```

见：[https ://docs.djangoproject.com/en/dev/ref/models/fields/#textfield](https://docs.djangoproject.com/en/dev/ref/models/fields/#textfield)

# wordpress - Wordpress Apache 配置错误

> ID：13877271
> 
> 赞同：0
> 
> 时间：2012-12-14T10:54:51.060
> 
> 标签：wordpress, apache

我已经在 Apache 上安装了 Wordpress。它似乎工作正常，我得到了主页并在管理员上创建了页面。

我可以访问主页[页面正常。但是当我尝试访问这些页面时。我得到404。

[http://mysite.com/](http://mysite.com/)工作正常

[http://mysite.com/news](http://mysite.com/news)通过 404。

在日志文件中，我有以下错误：

[Fri Dec 14 10:21:58 2012] [error] [client 127.0.0.1] 文件不存在：/home/wordpress/mysite/news，引用者：http: [//mysite.com/](http://mysite.com/)

我在 Apache 中使用 NameBasedVirtual 托管。

```
<VirtualHost *:8080>
    ServerName mysite.com
    DocumentRoot /home/wordpress/mysite/

    ErrorLog /var/log/www/mysite-error.log
    CustomLog /var/log/www/mysite-access.log combined

    <FilesMatch \.php$>
          SetHandler application/x-httpd-php
    </FilesMatch>

    <Directory /home/wordpress/mysite>
        AllowOverride FileInfo Options
        Allow from all
        DirectoryIndex index.php
    </Directory>

    <Location /wp-admin/>
        Header set Cache-Control no-cache
    </Location>
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:41:35.463

我看着.htaccess。

它说 。

但是 Apache 在 Ubuntu 上默认没有安装 mod_rewrite。所以它没有工作并且没有通过一个很好的错误。

只需添加 mod_rewrite 即可解决此问题

# java - Java中的Python“itertools.chain”等价物？

> ID：13877281
> 
> 赞同：1
> 
> 时间：2012-12-14T10:55:33.133
> 
> 标签：java, python, collections, iteration, combinations

是否有等效[`itertools.chain`](http://docs.python.org/2/library/itertools.html#itertools.chain)于 Java 的 python（带有或不带有第三​​方库）？

```
itertools.chain([1, 2, 3], [4, 5, 6]) # -> [1, 2, 3, 4, 5, 6] 
```

像这样的东西：

```
new Iterable<E> {
       public Iterator<E> iterator() {
           return new Iterator<E>() {
               Iterator<E> i1 = list1.iterator();
               Iterator<E> i2 = list2.iterator();
               public boolean hasNext() {
                   return i1.hasNext() || i2.hasNext();
               }
               public E next() {
                   if(i1.hasNext()) {
                       return i1.next();
                   } else if(i2.hasNext()) {
                       return i2.next();
                   } else {
                       throw new NoSuchElementException("Lists exhausted");
                   }
               }
               public void remove() {
                   throw new UnsupportedOperationException("...");
               }
           }
       }
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T19:58:50.990

[Eclipse Collections](http://www.eclipse.org/collections/)在[`LazyIterate`](http://www.eclipse.org/collections/javadoc/8.0.0/org/eclipse/collections/impl/utility/LazyIterate.html).

```
public static <T> LazyIterable<T> concatenate(Iterable<T>... iterables) 
```

Any[`LazyIterable`](http://www.eclipse.org/collections/javadoc/8.0.0/org/eclipse/collections/api/LazyIterable.html)也可以使用以下方法将自身与另一个可迭代对象连接起来。

```
LazyIterable<T> concatenate(Iterable<T> iterable) 
```

注意：我是 Eclipse Collections 的提交者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T11:06:49.413

有：[`com.google.common.collect.Iterables#concat()`](http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/collect/Iterables.html#concat%28java.lang.Iterable...%29)

# python - 如何使用python编写可以在c中读取的二进制结构？

> ID：13877286
> 
> 赞同：2
> 
> 时间：2012-12-14T10:55:45.217
> 
> 标签：python, c

说一个这样的结构：

```
typedef struct testVertex_s {
       char *vert_name; //for test only...
       float x;
       float y;
       float z;
}testvertex_t; 
```

如何使用 python 将其写入二进制文件？我想在 c 中使用 fread 阅读它；

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-14T10:58:12.463

为什么必须是二进制的？文本是微不足道的，并且更容易与之交互。

如果您真的想要二进制文件，请使用[struct](http://docs.python.org/2/library/struct.html)模块。确保定义你的字节顺序，并在 C 中*分别读取每个字段，**不要*尝试将单个字段`fread()`放入 C 结构中。

您可以像这样进行包装：

```
import struct
out = open("myvertex.bin", "wb")
string = "hello"
fmt = "<%usfff" % (1 + len(string))
out.write(struct.pack(fmt, string, 3.14, 47.11, 17)) 
```

这会将字符串写为一个以 0 结尾的普通字符串，紧接着是浮点数。上面的结果数据是`"hello\x00\xc3\xf5H@\xa4p<B\x00\x00\x88A"`（表示为 Python 字符串文字）。

对于这种情况，您当然需要动态分配字符串，这应该是显而易见的。

# objective-c - 基于瞬态属性获取的结果控制器 sectionIndexTitle

> ID：13877287
> 
> 赞同：0
> 
> 时间：2012-12-14T10:55:53.813
> 
> 标签：objective-c, ios, core-data

我有一个核心数据实体“人”。我需要自定义部分索引标题，所以我想创建瞬态属性，根据我自己的逻辑将数据分离到某个特定部分。但是，当我使用 fetchedResultsController 创建获取请求时，并保留此瞬态属性“sectionNameKeyPath”来初始化 fetchedResultsController sectionNameKeyPath。所以，我不得不把它作为第一个排序描述符的关键。但是，这会使应用程序崩溃。是否可以在 fetchedResultsController 中使用瞬态属性作为 sectionNameKeyPath

我的崩溃日志是。

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'keypath sectionNameKeyPath not found in entity <NSSQLEntity Person id=1>' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T11:49:46.973

您可以将瞬态属性用作`sectionNameKeyPath`获取的结果控制器。但是您不能在排序描述符中使用瞬态属性。对于基于 SQLite 的 Core Data 存储，只能在排序描述符中使用非瞬态属性。

这在“核心数据编程指南”中的[Fetch Predicates and Sort Descriptors中有记录：](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/Articles/cdPersistentStores.html#//apple_ref/doc/uid/TP40002875-SW11)

> 另一方面，SQL 存储将谓词和排序描述符编译为 SQL，并在数据库本身中评估结果。这样做主要是为了性能，但这意味着评估发生在非 Cocoa 环境中，因此依赖 Cocoa 的排序描述符（或谓词）无法工作。支持的排序选择器是……
> **此外，您不能使用 SQLite 存储对瞬态属性进行排序。**

但第一个排序描述符不必与sectionNameKeyPath相同，参见[initWithFetchRequest:managedObjectContext:sectionNameKeyPath:cacheName的文档：](http://developer.apple.com/library/ios/#documentation/CoreData/Reference/NSFetchedResultsController_Class/Reference/Reference.html#//apple_ref/occ/instm/NSFetchedResultsController/initWithFetchRequest%3amanagedObjectContext%3asectionNameKeyPath%3acacheName%3a)

> *sectionNameKeyPath*
> ...
> 如果此键路径与 fetchRequest 中第一个排序描述符指定的不同，则它们必须生成相同的相对排序。例如， fetchRequest 中的第一个排序描述符可能会指定持久属性的键；sectionNameKeyPath 可能为从持久属性派生的瞬态属性指定一个键。

iOS 开发人员库中的[DateSectionTitles](http://developer.apple.com/library/ios/#samplecode/DateSectionTitles/Introduction/Intro.html)示例代码演示了它是如何工作的。

# java - 文件系统子树快照上的迭代器

> ID：13877288
> 
> 赞同：0
> 
> 时间：2012-12-14T10:55:55.833
> 
> 标签：java, oop, design-patterns, iterator

我需要在 Java 中的文件系统子树上开发一个迭代器。当迭代仍在进行时，文件系统的状态可能会发生变化（例如，创建和删除新文件夹和文件）。因此，迭代器应该首先捕获层次结构的快照（例如爬取树并将找到的所有文件的名称保存到列表中），然后迭代快照。

**我想知道将创建缓存的代码放入迭代器的构造函数中是否是个好主意。**另一种方法是为此指定一个特殊的方法（命名`init`）。

迭代子树的大小和深度可能会变得非常大，因此缓存会很耗时。此外，它可能会抛出 IOExceptions（我仍然不确定从 Java 的构造函数中抛出异常是否是一种好的设计实践）。

另一方面，创建一个专用的方法来初始化迭代器意味着客户端代码不能将迭代器用作迭代器接口的简单实现。

客户端代码还将负责在遍历之前调用 init 方法。我可以让`hasNext`/`next`方法首先确保迭代器已初始化，如果没有，`init`则从其中调用该方法。但这意味着对这些方法的第一次调用将比下一次调用慢得多，而客户端没有任何可见的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:38:41.933

正如您在评论中所说，我将把职责分成两个类：一个用于获取文件系统的快照（例如`FileSystemSnapshot`），另一个用于迭代它。根据您需要的灵活性，您可以`FileSystemSnapshot`在迭代器的构造函数中创建实例或将其作为构造函数参数传递。朝着第一个方向前进可以让客户端更灵活地配置迭代器，并且如果您计划使用不同的策略来获取文件系统快照，这将是很有价值的。它也更适合单元测试，因为它很容易创建[模拟或存根](http://martinfowler.com/articles/mocksArentStubs.html). 但是，您强制客户端了解遍历细节（即文件系统必须在遍历之前被缓存）。使用第二种方法对客户端隐藏了这个实现细节，但不太灵活并且测试起来有点棘手（在这里您可以定义一个`createFileSystemSnapshot()`方法，然后模拟该方法以返回不同的测试实例）。您可能还想检查[依赖注入](http://martinfowler.com/articles/injection.html)模式。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:21:44.257

在构造函数中创建缓存应该没问题。关于其中耗时的部分，您需要根据您将如何使用迭代器来决定。如果客户端在缓存完成之前无法迭代，无论是构造函数还是init方法都需要时间，这是一个同步阻塞操作。

如果您可以在缓存完成之前开始迭代，您可以启动一个执行缓存的线程，但您需要覆盖 hasNext() 以考虑到这一点，它将是 hasNext() 或 next() 谁等待。

# java - 我的阵列怎么可能坏了？

> ID：13877296
> 
> 赞同：-1
> 
> 时间：2012-12-14T10:56:14.663
> 
> 标签：java, arrays

我有这段代码：

```
public lot merge (lot otherlot){
    wafer[] mWaferarray = new wafer[16];
    byte[] bytearray = new byte[16];
    wafer resultwafer = new wafer(bytearray);
    wafer w1;
    wafer w2;
    int i;
    int[][] assignmentmatrix = HungarianAlgorithm.computeAssignments(convertinttofloat (solutionmatrix(otherlot)));

    for (i=0; i != assignmentmatrix.length ;i++){

        w1 = otherlot.getWaferarray()[assignmentmatrix[i][0]];

        w2 = getWaferarray()[assignmentmatrix[i][1]];

        resultwafer.setWafer(w1.wafercompare(w2));

        mWaferarray[i] = resultwafer;
        mWaferarray[i].print();

    }
    System.out.println("HERE\n");
    mWaferarray[5].toString();

    resultlot = new lot(mWaferarray);
    resultlot.print();// Problem occurs here.

    return resultlot;

} 
```

如您所见，我创建了一个晶圆数组（自定义类）。然后我用新的晶圆填充它。当我打印这个数组 (mWaferarray[i].print()) 时，它给了我想要的结果。但是当我退出“for”循环时，阵列被破坏了，就好像我添加到 mWaferarray 的最后一项将其填满（整个阵列，16 长，被这个晶片填满）。所以如果运行这个程序，这就是我得到的：

```
1011110010111100
0011011111111110
0111110111101101
1010111001101111
0110110111101111
1010110101111010
1010110111011110
1011111010111100
1111110011101110
0111111111011011
1111111111011010
1101111011111010
1010110101011110
0101111011011010
1011111011011000
0101111011011010
HERE

0101111011011010
0101111011011010
0101111011011010
0101111011011010
0101111011011010
0101111011011010
0101111011011010
0101111011011010
0101111011011010
0101111011011010
0101111011011010
0101111011011010
0101111011011010
0101111011011010
0101111011011010
0101111011011010 
```

如您所见，就好像阵列被最后一个晶片填充了一样。

我已经看这个有一段时间了，我希望你能帮助我。

提前谢谢

PS：我的打印功能是这样写的：

```
 void print(){
    int j;
    for (j=0; j != waferarray.length ;j++){
        waferarray[j].print();

        }

    } 
```

编辑：为很多添加代码

这是批次课程的开始

```
public class lot {

wafer[] waferarray = new wafer[16];
lot resultlot;

public lot (wafer wafer1,wafer wafer2,wafer wafer3,wafer wafer4,
        wafer wafer5,wafer wafer6,wafer wafer7,wafer wafer8,
        wafer wafer9,wafer wafer10,wafer wafer11,wafer wafer12,
        wafer wafer13,wafer wafer14,wafer wafer15,wafer wafer16){

    waferarray[0] = wafer1;
    waferarray[1] = wafer2;
    waferarray[2] = wafer3;
    waferarray[3] = wafer4;
    waferarray[4] = wafer5;
    waferarray[5] = wafer6;
    waferarray[6] = wafer7;
    waferarray[7] = wafer8;
    waferarray[8] = wafer9;
    waferarray[9] = wafer10;
    waferarray[10] = wafer11;
    waferarray[11] = wafer12;
    waferarray[12] = wafer13;
    waferarray[13] = wafer14;
    waferarray[14] = wafer15;
    waferarray[15] = wafer16;

}

public lot (wafer[] thiswaferarray){

    waferarray = thiswaferarray;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:01:25.603

也许它会像这样发生？

```
resultlot = new lot(mWaferarray); // Problem actually occurs in the constructor you did not show us
resultlot.print();// Problem only manifests itself here. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T11:26:50.933

看起来像是某种家庭作业:-)

问题是这样的：

```
 resultwafer.setWafer(w1.wafercompare(w2));

    mWaferarray[i] = resultwafer;
    mWaferarray[i].print(); 
```

您正在重用 resultwafer，只有 ruseultwafer 的内容被更改/替换。

最后，mWaferarray 的所有元素都指向同一个 resultwafer 实例，它只显示 lass 循环中的内容集。

要解决此问题，您必须在循环中创建新的晶片（可能还有新的字节数组）。

# java - 导入 org.jsoup.* 不工作

> ID：13877297
> 
> 赞同：0
> 
> 时间：2012-12-14T10:56:16.470
> 
> 标签：java, import, jsoup

我尝试使用 Jsoup 制作一个 java 应用程序。

而不是使用

（一种）

```
import org.jsoup.Jsoup;
import org.jsoup.helper.Validate;
import org.jsoup.helper.Validate;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements; 
```

我想用

(乙)

```
import org.jsoup.*; 
```

(A) 正在工作，但 (B) 没有...

我正在使用 IntelliJ 并导入了依赖项......为什么这不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T11:04:55.803

您应该像这样导入每个包：

```
import org.jsoup.*;
import org.jsoup.helper.*;
import org.jsoup.nodes.*;
import org.jsoup.select.*; 
```

由于`org.jsoup`和`org.jsoup.helper`是不同的包，您应该分别导入它们。

在 Eclipse 中，有一个函数叫做`Organize Import`，也许 InteliJ 中也有类似的功能。

# java - 抽象类数组和 oop 设计 - Java

> ID：13877298
> 
> 赞同：1
> 
> 时间：2012-12-14T10:56:18.547
> 
> 标签：java, oop, hashmap, abstract

我有一个类组件

```
abstract class Component{
    private componentType m_type;

    public Component(componentType type)
    {
        m_type = type;
    }
} 
```

和 2 个子类

```
class AmplifierComponent extends Component{
    public AmplifierComponent()
    {
        super(componentType.Amp);
        System.out.print(this.m_type);
    }
}

class AttenuatorComponent extends Component{
    public AttenuatorComponent()
    {
        super(componentType.Att);
        System.out.print(this.m_type);
    }
} 
```

我的问题是： 1.我无法实例化任何类型的组件，因为 m_type 不可见（这意味着什么？） 2.我
需要创建一个用户插入到链中的所有组件的数组。我无法创建组件类的数组。

有人可以帮我设计吗？
或有一些解决方法？

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T10:59:10.590

我不明白你为什么需要类型成员。这看起来是多余的。您可以改为简单地执行以下操作：

```
abstract class Component{
}

class AttenuatorComponent extends Component{
    public AttenuatorComponent() {
       // calls the default super constructor
    }
} 
```

并依靠[多态性](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)让你的类表现得恰到好处。当您声明了相应的类时，不需要使用类型成员来标识层次结构类型。如果您确实有一个成员变量需要在子类中可见但对客户端不可见，那么您可以制作它`protected`而不是`private`.

`Component`如果没有与之关联的功能/数据，则可能是一个接口。

你的数组声明看起来像

```
Component[] components = new Component[20];
components[0] = new AttenuatorComponent(); 
```

多态意味着您可以遍历这个组件数组，调用在 上声明（但不一定由其实现）的`Component`适当方法，并且将调用适当的子类方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:00:25.147

将 m_type 设置为 protected 以便能够从子类中看到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-05T23:03:35.210

```
abstract class Component {
    private componentType m_type;

    public Component(componentType type)
    {
        m_type = type;
    }

    public componentType getType()
    {
        return this.m_type;
    }
}

class AmplifierComponent extends Component{
    public AmplifierComponent()
    {
        super(componentType.Amp);
        System.out.print(super.getType());
    }
}

class AttenuatorComponent extends Component{
    public AttenuatorComponent()
    {
        super(componentType.Att);
        System.out.print(super.getType());
    }
} 
```

That way you can read m_type, but cannot change it. You could also make the getType() command protected, so it is only reachable through the classes which inherit it.

# html - 表格高度 100% 在 Div 元素内

> ID：13877302
> 
> 赞同：20
> 
> 时间：2012-12-14T10:56:36.670
> 
> 标签：html, css

嗨，我想将表格高度 100% 设置为其父 div 而不在 div 中定义高度。我的代码不起作用。我不知道我错过了什么。小提琴[链接](http://jsfiddle.net/6bqkL/344/)

```
<div style="overflow:hidden">
<div style="float:left">a<br />b</div>
<table cellpadding="0" cellspacing="0" height="100%" style="border:solid 1px #000000">
<tr>
<td valign="middle">c</td></tr>
</table>
</div> 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-12-14T11:00:36.060

如果不将高度值分配给 div，则不可能。

添加这个

```
body, html{height:100%}
div{height:100%}
table{background:green; width:450px}    ​ 
```

**[演示](http://jsfiddle.net/6bqkL/346/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T10:58:52.787

您需要在 div 中有一个高度，`<div style="overflow:hidden">`否则它不知道是什么`100%`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T11:07:54.743

这就是你可以做到的-

HTML-

```
<div style="overflow:hidden; height:100%">
     <div style="float:left">a<br>b</div>
     <table cellpadding="0" cellspacing="0" style="height:100%;">     
          <tr><td>This is the content of a table that takes 100% height</td></tr>  
      </table>
 </div> 
```

CSS-

```
html,body
{
    height:100%;
    background-color:grey;
}
table
{
    background-color:yellow;
} 
```

查看[**演示**](http://jsfiddle.net/ehDUq/2/)

**更新：**好吧，如果您不希望将 100% 高度应用到您的父容器，那么这里有一个 jQuery 解决方案可以帮助您-

[**演示**-*使用 jQuery*](http://jsfiddle.net/ehDUq/4/)

脚本-

```
 $(document).ready(function(){
    var b= $(window).height(); //gets the window's height, change the selector if you are looking for height relative to some other element
    $("#tab").css("height",b);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-19T17:46:20.540

有类似的问题。我的解决方案是给内表一个固定的高度 1px 并将内表中 td 的高度设置为 100%。无论如何，它运行良好，在 IE、Chrome 和 FF 中进行了测试！

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2017-07-22T06:07:44.137

要将表格的高度设置为其容器，我必须这样做：

1）设置“位置：绝对”

2）删除单元格的冗余内容（！）

# math - FPU 使用什么算法来计算超越函数？

> ID：13877303
> 
> 赞同：7
> 
> 时间：2012-12-14T10:56:39.120
> 
> 标签：math, floating-point, hardware, numerical-methods, fpu

现代 FPU 将使用哪些方法来计算[超越函数](http://en.wikipedia.org/wiki/Transcendental_function)？

例如，英特尔 CPU 提供诸如`FSIN`、`FCOS`、`FYL2X`等指令。我很好奇将使用哪些算法在硬件中实际实现这些指令。

我的天真猜测可能是泰勒级数可能与一些查找表相结合，但这只不过是一个疯狂的猜测。请赐教。

PS这个问题比英特尔硬件更笼统。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-14T11:08:18.077

一个起点可以是来自英特尔的 Shane Story 和 Ping Tak Peter Tang 的“ [IA-64 上改进的超越函数的新算法”。](http://www.acsel-lab.com/arithmetic/papers/ARITH14/ARITH14_Story.pdf)它可能没有您想要的那么多细节，但它包含几个参考。

## 2014 年 8 月 13 日更新

原来的链接坏了。IEEE 的公共摘要/引文页面可在此处找到：

[http://ieeexplore.ieee.org/xpls/abs_all.jsp?arnumber=762822&tag=1](http://ieeexplore.ieee.org/xpls/abs_all.jsp?arnumber=762822&tag=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-27T01:58:09.513

在硬件（以及硬件乘法指令不可用的软件）中，它通常在[CORDIC](http://en.wikipedia.org/wiki/Cordic)中实现，因为这只需要加法、减法、位移位和表查找

有关的：

*   [C 如何计算 sin() 和其他数学函数？](https://stackoverflow.com/q/2284860/995714)
*   [sin 和 cos 在硬件方面是如何实现的？](https://stackoverflow.com/q/21217418/995714)
*   [计算机使用什么算法来计算对数？](https://math.stackexchange.com/q/61209/90333)
*   [计算机如何计算 sin 值？](https://electronics.stackexchange.com/q/262262/27052)
*   [计算机如何计算平方根？](https://stackoverflow.com/q/12304577/995714)

# ruby - ruby 1.9.3 内置 sublime text 2

> ID：13877304
> 
> 赞同：1
> 
> 时间：2012-12-14T10:56:49.230
> 
> 标签：ruby, sublimetext2

我正在为 ruby​​ 1.9.3 寻找正确的 .sublime-build 到目前为止，我无法将 gem 与我尝试过的那些一起使用

使用 ST2 的快捷方式在终端启动我的 .rb 文件的方法对我来说应该很棒

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:24:42.733

在 macOS 中，相当于 windows`start`是`open`... 即：

**视窗**

`start .`（在当前路径打开 Windows 资源管理器）

**苹果电脑**

`open .`（在当前路径打开查找器）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T12:39:11.033

有两种可能的方法，一种是编辑 ST2 附带的 exec.py 文件，这样构建过程就不会被管道/捕获，但我没有运气，也许有 python 背景的人可以？

另一种方法对我有用，我编辑 ST2 附带的“c:\users\user\AppData\Roaming\Sublime Text 2\Packages\Ruby\Ruby.sublime-build”文件并将内容更改为此。使用像这样正确安装的 gem 没有问题。

```
{
  "cmd": ["ruby", "$file"],
  "shell": true,
  "file_regex": "^(...*?):([0-9]*):?([0-9]*)",
  "selector": "source.ruby, source.rb, source.rbw",
  "variants":
  [
    {
      "name": "Run",
      "cmd": ["start", "ruby", "$file"],
      "selector": "source.ruby, source.rb, source.rbw"
    }
  ]
} 
```

之后，您可以通过两种方式运行 Ruby 脚本，一种是使用 F7 的普通方式，另一种是在控制台中使用 Ctrl-Shift-B（来自 Build）。为了避免窗口在执行后关闭，您需要以系统“暂停”结束脚本。在开始/救援块中，最好也放置此命令。

所以脚本看起来像这样

```
puts "test"
system 'pause' 
```

编辑：将选项“在此处打开命令窗口..”添加到上下文菜单

首先创建并将以下内容放入文件中

```
c:\users\user\AppData\Roaming\Sublime Text 2 \Packages\User\opencommand.py
import sublime, sublime_plugin
import subprocess
import os

class OpenPromptCommand(sublime_plugin.TextCommand):
    def run(self, edit):
        dire = os.path.dirname(self.view.file_name())
        retcode = subprocess.Popen(["cmd", "/K", "cd", dire])

    def is_enabled(self):
        return self.view.file_name() and len(self.view.file_name()) > 0 
```

然后打开 C:\Users\user\AppData\Roaming\Sublime Text 2\Packages\Default\Context.sublime-menu 并在最后添加

```
{ "caption": "-", "id": "file" },
{ "command": "open_prompt", "caption": "Open Command Window Here…" },
{ "command": "open_dir", "caption": "Open Containing Folder…" },
{ "caption": "-", "id": "end" } 
```

从现在开始，您可以右键单击打开的脚本并在保存脚本的文件夹中打开资源管理器或命令提示符。

# iphone - 未调用 didFinishLaunchingWithOptions

> ID：13877309
> 
> 赞同：3
> 
> 时间：2012-12-14T10:57:10.653
> 
> 标签：iphone, xcode4, push-notification

我无法启用推送通知。

使用此代码，我尝试启用通知：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    [[UIApplication sharedApplication] registerForRemoteNotificationTypes:(UIRemoteNotificationType)(UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound | UIRemoteNotificationTypeAlert)];

    return YES;
} 
```

它不起作用，所以我在该行中添加了一个断点

```
[[UIApplication sharedApplication] registerForRemoteNotificationTypes:(UIRemoteNotificationType)(UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound | UIRemoteNotificationTypeAlert)]; 
```

但似乎这部分代码永远不会执行。

为什么这不起作用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-14T12:10:32.777

`- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions`

这应该在您的`UIApplicationDelegate`而不是在您的`UIViewController`. 如果你有它在你的`UIViewController`，它永远不会被调用。从那里取出代码并将其放入您的代码中`UIApplicationDelegate`。

# erlang - 从 N 倒数到 1

> ID：13877318
> 
> 赞同：0
> 
> 时间：2012-12-14T10:58:02.617
> 
> 标签：erlang

我正在尝试创建一个列表并将其打印出来，从 N 倒数到 1。这是我的尝试：

```
%% Create a list counting down from N to 1 %%
-module(list).
-export([create_list/1]).

create_list(N) when length(N)<hd(N) ->
 lists:append([N],lists:last([N])-1),
 create_list(lists:last([N])-1); 
create_list(N) ->
 N. 
```

这在 N 为 1 时有效，否则我会收到此错误：

```
172> list:create_list([2]).
** exception error: an error occurred when evaluating an arithmetic expression
     in function  list:create_list/1 (list.erl, line 6) 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T15:56:53.940

在构建列表时，您通常应该避免使用`append`or `++`，这是同一回事。它们都将元素添加到列表的**末尾**，这需要每次都制作列表的副本。有时它很实用，但在列表的前面工作总是更快。

有点不清楚您想要列表的顺序，所以这里有两种选择：

```
create_up(N) when N>=1 -> create_up(1, N).     %Create the list 

create_up(N, N) -> [N];
create_up(I, N) ->
    [I|create_up(I+1, N)].

create_down(N) when N>1 ->                     %Add guard test for safety
    [N|create_down(N-1)];
create_down(1) -> [1]. 
```

这些都不是尾递归的。虽然尾递归很好，但它并不总是像您想象的那样提供，尤其是当您需要调用 a`reverse`以按正确顺序获取列表时。有关更多信息，请参阅[Erlang 神话](http://www.erlang.org/doc/efficiency_guide/myths.html#tail_recursive)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T11:24:34.167

错误是`lists:last([N])-1`。由于 N 是一个数组作为您的输入，`lists:last([N])`因此将返回 N 本身。不是您期望的数字。如果您在编译代码时看到警告，还有另一个错误：`lists:append`不会将元素附加到 N 本身，而是在返回值中。在函数式编程中，变量的值不能改变。

这是我的实现：

```
create_list(N) ->
    create_list_iter(N, []).

create_list_iter(N, Acc) ->
    case N > 0 of
        true -> NewAcc = lists:append(Acc, [N]),
                create_list_iter(N-1, NewAcc);
        false -> Acc
    end. 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-14T11:32:35.097

如果我正确理解您的问题，这就是您需要的

```
create_list(N) when N > 0 ->
        create_list(N, []).

create_list(1, Acc) ->
        lists:reverse([1 | Acc]);
create_list(N, Acc) ->
        create_list(N - 1, [N | Acc]). 
```

如果您使用列表，我建议您**使用尾递归**和**列表构造语法**。

此外，为了简化您的代码 - 尝试在函数声明中**使用模式匹配**，而不是 case 表达式

**PS** 另一个，也许，最简单的解决方案是：

```
create_list(N) when N > 0 ->
        lists:reverse(lists:seq(1,N)). 
```

# sublimetext2 - Sublime Text 2 - 默认隐藏小地图

> ID：13877319
> 
> 赞同：37
> 
> 时间：2012-12-14T10:58:03.937
> 
> 标签：sublimetext2

有没有默认隐藏小地图的设置？

我打开的每个窗口都不方便`View > Hide Minimap`。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-25T09:49:42.617

您可以通过添加默认隐藏小地图

```
 "show_minimap": false 
```

到您的用户设置文件*（首选项 > 设置 - 用户）*

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-14T11:19:26.547

您可以通过命令面板访问“查看：切换小地图”命令（Mac os 上的 Command + Maj + P）+ Enter

或者可能定义一个可以在打开文件时执行的宏。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-10-25T19:35:48.580

对于 Ubuntu 12.04 Sublime 2221，添加

```
"hide_minimap": true 
```

到您的用户设置文件（首选项 > 设置 - 用户）

# hibernate - Oracle 驱动程序以及打包的战争文件

> ID：13877320
> 
> 赞同：0
> 
> 时间：2012-12-14T10:58:11.163
> 
> 标签：hibernate, oracle11g, jboss6.x

我打包为 .war 文件的 web 应用程序具有以下 maven 依赖项

```
 <dependency>
        <groupId>com.oracle</groupId>
        <artifactId>ojdbc6</artifactId>
        <version>11.2.0.2.0</version>
    </dependency> 
```

依赖关系在 maven 构建期间得到正确解决，并且打包的 .war 在其 /lib 目录中包含 ojdbc6 工件。但是应用程序会引发如下异常

15:00:00,409 WARN [org.hibernate.cfg.SettingsFactory] ​​无法获得与查询元数据的连接：java.sql.SQLException：找不到适合 jdbc:oracle:thin:@10.253.XX.165:1555/XXXX 的驱动程序在 java.sql.DriverManager.getConnection(DriverManager.java:602) [:1.6.0_31] 在 java.sql.DriverManager.getConnection(DriverManager.java:154) [:1.6.0_31] 在 org.hibernate.connection.DriverManagerConnectionProvider .getConnection(DriverManagerConnectionProvider.java:133) [:3.6.0.Final] 在 org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:114) [:3.6.0.Final] 在 org.hibernate.cfg.Configuration .buildSettingsInternal(Configuration.java:2833) [:3.6.0.Final] 在 org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2829) [:3.6.0.Final] 在 org.hibernate.cfg.Configuration .buildSessionFactory(Configuration.java:1840) [:3.6.0.Final]

当 ojdbc6.jar 手动放置在 JBoss 的 default/lib 文件夹中时工作正常。

我是否必须在 WAR 的清单条目中提及对 oracle 驱动程序模块的依赖？怎么做？

# sql - 如何根据任何索引差距编写任何 UDF 获取值？

> ID：13877324
> 
> 赞同：-1
> 
> 时间：2012-12-14T10:58:26.733
> 
> 标签：sql, sql-server, tsql

我想编写一个使用字符串值和起始索引号和计数的 UDF：

GetValueUDF("i am 18 years old.",6,2) output: 18 , 6: .nth 起点, 2: count

GetValueUDF("我 101 岁。",6,3) 输出：101

GetValueUDF("我 101 岁。",1,4) 输出："我是"

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T11:05:08.263

我不太确定你为什么要为此创建一个用户定义的函数，因为这就是`substring`函数的作用。但是您应该能够使用以下内容：

```
create function GetValueUDF
(
  @string varchar(max), 
  @startPosition int,
  @length int
)
returns varchar(max)
as

begin
  return substring(@string, @startPosition, @length)
end 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/1aa65/2)

# python - Django中的图像上传和操作

> ID：13877327
> 
> 赞同：1
> 
> 时间：2012-12-14T10:58:39.547
> 
> 标签：python, django, amazon-web-services, amazon-s3, django-uploads

我正在尝试上传图像，然后创建它的缩略图，然后将两者都存储在 S3 中。文件上传后，我首先将其上传到 S3，然后尝试创建缩略图，但它不起作用，因为 PIL 无法识别图像。其次，如果我先创建缩略图而不是上传原始图像，我会得到 EOF。

我认为Django只允许一次上传的文件只使用一次......请告诉我一种方法......提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T11:20:20.273

嗯，您的问题需要更具体，但我们正在做同样的事情，工作流程如下：

1）您从 request.FILES 获取文件上传的文件句柄并将其存储在本地文件系统中的某个位置，因此您不能在流上工作 - 我猜这就是导致您的问题的原因

2）您使用 PIL（或者更好的是 Pillow）来操作 FS 上的图像，调整大小，缩略图，等等。

3) 您使用 Boto (http://boto.cloudhackers.com/en/latest/) 上传到 S3，因为 Boto 将 AWS 的处理权交给您。

它非常简单并且效果很好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T05:01:41.120

I finally figured it out. The problem was that it was a stream that the uploaded file is stored into, so everytime i read the file it would reach the EOF.

The only and best way out is to seek(0) everytime we read the file.

This is also needed when playing with other files also in django.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T13:29:51.913

您的 PIL 安装是否在编译时找到了正确的库。您可以尝试卸载它并使用 pip 重新安装它。

查看编译输出的末尾，有一个部分详细说明了哪些库可用。

我花了很长时间试图找出为什么它没有发现我的 jpeg、png/zip 库，然后才意识到它在错误的地方寻找。

在 Debian 中，我需要下载 PIL/Pillow 源代码并添加：

```
_add_directory(library_dirs, "/usr/lib/x86_64-linux-gnu") 
```

到 settings.py 文件的“标准位置”部分 - 这是我的 libjpeg.so 安装到的目录

然后我需要运行

```
python setup.py install 
```

并检查输出以确保它找到了正确的库

希望这可以帮助

# python-2.7 - matplotlib 在圆柱坐标系和球坐标系中绘图

> ID：13877329
> 
> 赞同：1
> 
> 时间：2012-12-14T10:58:45.897
> 
> 标签：python-2.7, matplotlib

例如，如果我想创建极坐标图，我可以使用以下代码：

```
self.axes = self.figure.add_subplot(111, projection='polar') 
```

但我没有找到任何“圆柱形”或“球形”投影。

有谁知道如何创建这些情节？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:04:07.223

可能对您的任务有用：http: [//matplotlib.org/basemap/users/cyl.html](http://matplotlib.org/basemap/users/cyl.html)

# c++ - 为 qt 安装小部件

> ID：13877331
> 
> 赞同：1
> 
> 时间：2012-12-14T10:58:47.863
> 
> 标签：c++, qt, widget, installation

[我最近从http://www.wysota.eu.org/wwwidgets/](http://www.wysota.eu.org/wwwidgets/)找到了一组非常有用的 qt 小部件，我下载`wwWidgets 1.0 installer for MinGW`并简单地安装了它。现在我可以在 qt creator 中看到这些小部件，并且可以拖放它们。

但是在编译项目时，它说找不到那些包含文件。（例如： qwwled.h 未找到）但我看到该文件在`C:\Qt\4.8.3\include\wwWidgets`

如果有人可以在这个问题上帮助我，我将非常感激。

我使用 qt 4.8.3 和 mingw 4.4

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T11:01:26.680

你应该修复你的包含`PATH`并添加`C:\Qt\4.8.3\include\wwWidgets`到它

添加您的 .pro 文件：

```
INCLUDEPATH += "C:\\Qt\\4.8.3\\include\\wwWidgets" 
```

但这可能不是最好的方法，因为如果您共享您的项目，则必须编辑 .pro。你应该使用/添加一个环境变量

所以最好的解决方案是这个：

```
INCLUDEPATH += $$(WWWIDGETS_INCLUDE_PATH) 
```

并将环境变量设置`WWWIDGETS_INCLUDE_PATH`为`C:\Qt\4.8.3\include\wwWidgets`

不要忘记添加：

```
CONFIG(release, debug|release): LIBS += "C:\\Qt\\4.8.3\\lib\\libwwwidgets4.a"
else:CONFIG(debug, debug|release): LIBS += "C:\\Qt\\4.8.3\\lib\\libwwwidgets4d.a" 
```

或者添加这个，更好更干净：

```
CONFIG(release, debug|release): LIBS += -lwwwidgets4
else:CONFIG(debug, debug|release): LIBS += -lwwwidgets4d 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T12:24:13.110

您应该添加到您的项目文件

```
CONFIG+=wwwidgets 
```

* * *

wwWidgets 安装了它自己的*特性* （见文件`wwwidgets.prf`） 这个*特性*提供了有关使用小部件所需的库文件和头文件的信息。

# google-app-engine - 不在谷歌应用引擎中创建新项目

> ID：13877332
> 
> 赞同：1
> 
> 时间：2012-12-14T10:58:50.737
> 
> 标签：google-app-engine

我在谷歌应用引擎启动器中创建新项目时发现错误..我使用 32 位 Windows

**错误：**路径无效，无法制作项目...

**Python 版本：** Python 2.7.3 windows 安装程序

Edit->preference ---> **python path :** C:\Python27\pythonw.exe (python.exe 出现同样的问题) **App engine sdk:** C:\Program Files\Google\google_appengine **Editor :** c:/Prgram Files/Windows NT/附件/wordpad.exe

我还在控制面板 -> 系统 -> 高级 -> 环境变量 -> PATH **;C:\Python27 中进行了更改**

问候， Gowtham.V

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-07T15:25:54.233

创建应用程序时，您需要指定父目录（将存储应用程序的位置）。

# c# - 进程中的 Linq 查询阶段

> ID：13877335
> 
> 赞同：0
> 
> 时间：2012-12-14T10:58:52.717
> 
> 标签：c#, linq

我的模型是 - 员工

```
public class Employee
{
    public int EmployeeId { get; set; }
    public string GivenName { get; set; }
    public string Surname { get; set; }
    public virtual ICollection<EmployeeAudit> EmployeeAudits { get; set; }

} 
```

和员工审计

```
public class EmployeeAudit
 {
    public int EmployeeAuditId { get; set; }

    public DateTime DateCreated { get; set; }
    public string AuditCode { get; set; }

    public int EmployeeId { get; set; }
    public Employee Employee { get; set; }
} 
```

所以我会有员工，他们会有很多员工审计 -

员工
id-----name
1------bob
2------jim
3------sheila

audit
empid---auditcode------------ ------datecreated
1---------created---------------------13/12/12
2-------- ---已创建----------13/12/12
3---------已创建--------- ------------13/12/12
2---------SubmittedToHR------------13/12/12
3----- ----SubmittedToHR-----------13/12/12
3---------PassedForVerification---13/12/12

审计代表流程中的某个阶段，我如何使用 linq 查询以显示员工在流程中的位置。

例如，我想显示在 SubmittedToHr 但已创建但未通过 PassedForVerification 的所有员工。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:04:04.223

此查询将返回最后审核代码等于 SubmittedToHR 的所有员工（假设审核代码只能从 created > SubmittedToHR > PassedForVerification 更改）：

```
var query = from e in context.Employees
            join ea in context.EmployeeAudit 
                 on e.EmployeeId equals ea.EmployeeId into g
            where g.OrderByDescending(x => x.DateCreated)
                   .FirstOrDefault().AuditCode == "SubmittedToHR"
            select e; 
```

# jquery - JQuery - 使用嵌套 each() 来更新 XML 字符串。原始字符串未更新

> ID：13877336
> 
> 赞同：3
> 
> 时间：2012-12-14T10:58:54.940
> 
> 标签：jquery, xml-parsing

新用户和第一个问题..我使用嵌套的 each()s 解析 XML 字符串。我找到了我正在寻找的节点并更改了属性的值，但是原始的 xml 字符串保持不变。

下面是 XML 和 JQuery。在代码中查找警报以查看更新发生的位置。无论如何，在每个人都播放完原始的 xml 字符串之后是原样吗？我究竟做错了什么？

谢谢

XML：

```
<Test TestID="712" UserID="1231230192831039812">
  <Question id="713">
    <AnswerSet id="718" type="5">
      <AnswerSetOption id="740"  IsChecked="Foo" />
      <AnswerSetOption id="741"  IsChecked="Foo" />
      <AnswerSetOption id="742"  IsChecked="Foo" />
    </AnswerSet>
  <AnswerSet id="719" type="5">
    <AnswerSetOption id="740"  IsChecked="Foo" />
    <AnswerSetOption id="741"  IsChecked="Foo" />
    <AnswerSetOption id="742"  IsChecked="Foo" />
  </AnswerSet>
  <AnswerSet id="720" type="5">
    <AnswerSetOption id="740"  IsChecked="Foo" />
    <AnswerSetOption id="741"  IsChecked="Foo" />
    <AnswerSetOption id="742"  IsChecked="Foo" />
  </AnswerSet>
 </Question>
</Test> 
```

剧本：

```
 function TrackResponse(QuestionID, AnswerSetID, AnswerSetOptionID, InputType) {

        var xml;

        xml = $('#_uiCheckingAnswersHidden').val();

        $(xml).find('Question').each(function () {

            var xmlQuestionID = $(this).attr('id');

            $(this).find('AnswerSet').each(function () {

                var xmlAnswerSetID = $(this).attr('id');

                $(this).find('AnswerSetOption').each(function () {

                    var xmlAnswerSetOptionID = $(this).attr('ID');
                    var checkedValue = $(this).attr('IsChecked');

                    if (InputType == 'radio') {

                        if (QuestionID == xmlQuestionID && AnswerSetID == xmlAnswerSetID && AnswerSetOptionID == xmlAnswerSetOptionID) {

                            alert('Found it');

                            var oldValue;

                            oldValue = $(this).attr('IsChecked');

                            alert('Old value: ' + oldValue)

                            $(this).attr('IsChecked', 'Bar');

                            var newValue;

                            newValue  = $(this).attr('IsChecked');

                            alert('New value: ' + newValue)

                        }
                        else {
                            $(this).attr('IsChecked', 'pp');
                        }
                    }

                    //Checkbox -- if not found updated Checked Attribute to ''
                    if (InputType == 'check') {

                        var checked = $(this).attr('IsChecked');

                        if (QuestionID == xmlQuestionID && AnswerSetID == xmlAnswerSetID && AnswerSetOptionID == xmlAnswerSetOptionID) {

                            if (checked == 'true') {
                                $(this).attr('IsChecked', 'dd');
                            }
                            else {
                                $(this).attr('IsChecked', '');
                            }
                        }
                    }
                });
            });
        });

        alert(xml);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T03:40:11.957

您可以执行上述所有操作并通过引用访问原始 DOM 元素，或者您可以使用 .html(xml) 或其他内容替换或附加 XML 内容到当前内容。

# c# - 如何在自定义控件中选择项目

> ID：13877337
> 
> 赞同：0
> 
> 时间：2012-12-14T10:59:05.917
> 
> 标签：c#, wpf, custom-controls

我编写了一个自定义控件来在计算的位置显示来自 ItemsSource 的项目。

**通用的.xaml**

```
<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:Control="clr-namespace:MyControls.Control">

    <Style TargetType="{x:Type Control:MyControl}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Control:MyControl}">
                    <Border x:Name="DrawingArea"
                        BorderThickness="{TemplateBinding Border.BorderThickness}"
                        BorderBrush="{TemplateBinding Border.BorderBrush}"
                        Padding="{TemplateBinding Control.Padding}"
                        Background="{TemplateBinding Panel.Background}"                            
                        SnapsToDevicePixels="true">
                        <Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                            <Canvas IsItemsHost="True" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" ClipToBounds="true" />                            
                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>     
        </Setter>
        <Setter Property="ItemTemplate">
            <Setter.Value>
                <DataTemplate>
                    ...
                </DataTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary> 
```

**我的控制.cs**

```
public class MyControl : MultiSelector, INotifyPropertyChanged    
{
    private bool _layoutHandlingDone = false;
    private Border _drawingArea;
    private Border DrawingArea
    {
        get { return _drawingArea ?? (_drawingArea = (Border) Template.FindName("DrawingArea", this)); }
    }

    static MyControl()
    {
        DefaultStyleKeyProperty.OverrideMetadata(typeof(MyControl), new FrameworkPropertyMetadata(typeof(MyControl)));
    }

    protected override Size MeasureOverride(Size aviableSize) { ... }       
    protected override Size ArrangeOverride(Size finalSize) { ... }

    public override void OnApplyTemplate()
    {
        base.OnApplyTemplate();

        if (Template != null && _layoutHandlingDone == false)
        {
            _layoutHandlingDone = true;
            ItemContainerGenerator.StatusChanged += (sender, args) =>
                                                        {
                                                            if(ItemContainerGenerator.Status == GeneratorStatus.ContainersGenerated)
                                                                InvalidateMeasure();
                                                        };
            DrawingArea.SizeChanged += (sender, args) => UpdateLayout();
        }
    }   
} 
```

布局和绘制项目效果很好。现在我希望这些项目是可选择的。为此，我派生了我的控件表单 MultiSelector，但似乎这还不够。

MultiSelector 提供什么功能，我应该如何在我的控件中使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:10:11.680

我强烈建议在这里分开。管理项目集合并将它们安排在容器控件中是两个不同的问题，ItemsControl 为两者提供支持。

与其重写 MeasureOverride 和 ArrangeOverride，不如编写专门的[Panel类（并在那里重写 MeasureOverride 和 ArrangeOverride）并在 ItemsControl 的](http://msdn.microsoft.com/en-us/library/system.windows.controls.panel.aspx)[ItemsPanel](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemspanel.aspx)模板中使用该类。

然后，您可以轻松地从 ListBox 而不是 MultiSelector 派生，并免费获得所有选择功能。

# hibernate - 休眠一对一（在外键上）与一对一（在主键上）

> ID：13877338
> 
> 赞同：2
> 
> 时间：2012-12-14T10:59:07.390
> 
> 标签：hibernate, foreign-keys, primary-key, one-to-one

**我对使用外键**关联或**主键**关联有
什么好处有疑问？ `one-to-one`**`one-to-one`**

 ****我已经阅读了 Hibernate 的文档：http: [//docs.jboss.org/hibernate/orm/3.3/reference/en/html/associations.html#assoc-unidirectional-121](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/associations.html#assoc-unidirectional-121)

有人可以详细告诉我使用第一个或第二个实现的优点吗？

另一个问题，我在用户和周界之间有`one-to-one`单向关系。
（用户---->周界）我想使用基于外键的关联。
我可以将方向反转为 (User <---- Perimeter) 以使表格 User 保持不变吗？
我认为这是不合理的（perimeter.getUser() !!!）但它在技术上是可能的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T22:25:07.150

除了 JB Nizet 提到的优点之外，感谢另一个人告诉我，基于外键的一对一更加灵活。让我们考虑一下我在外键（用户 <--- 周界）上使用一对一，如果应用程序的要求更改为任何周界需要多个用户，如果我共享主键，我会有很多更多的重构要做。但是当我使用外键时，我所做的就是放松唯一约束；）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T11:14:04.460

我看到两个优点

*   有了选择权，您就可以映射现有模式，无论他们选择什么作为策略
*   使用 A 中的外键指向 B 中的 ID，如果外键为空，Hibernate 知道给定 A 没有 B。它无法知道何时使用主键。因此，如果关联是可选的，则使用外键会更有效。

对于第二个问题，是的，当然有可能。这称为双向 OneToOne 关联：

```
public class User {
    // ...

    @OneToOne
    @JoinColumn
    private Perimeter perimeter;
}

public class Perimeter {
    // ...

    @OneToOne(mappedBy = "perimeter")
    private User user;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-30T06:23:20.663

**使用主键关联的一对一关系**

在这种关联中，当一个实体与另一个实体中的一个事件恰好相关时，就会出现一对一的关系。

这是例如链接： [主键关联](http://www.mkyong.com/hibernate/hibernate-one-to-one-relationship-example/)

**使用外键关联的一对一关系**

在同一示例中进行以下更改：

在 StockDetail.java 中

```
 private Integer stockDetailsId;
    //with setter and getter
    //remove stockId and it's setter and getter 
```

在 stock.hbm.xml

```
 <id name="stockId" type="java.lang.Integer">
                <column name="STOCK_ID" />
                <generator class="assigned" />
      </id> 
```

在 StockDetail.hbm.xml 中

```
 <id name="stockDetailsId" type="java.lang.Integer">
                <column name="STOCK_DETAILS_ID" />
                <generator class="assigned"/>
     </id>
    <many-to-one name="stock" 

    class="com.test.common.Stock" column="STOCK_ID" /> 
```

在 hibernate.cfg.xml 中

```
 //this is optional property if you want to create database table's according to your hbm file's.

    <property name="hibernate.hbm2ddl.auto">create</property> 
```****

# iframe - 将 iframe 中的视频质量更改为其他设置

> ID：13877345
> 
> 赞同：0
> 
> 时间：2012-12-14T10:59:31.180
> 
> 标签：iframe, youtube

我将 youtube 视频嵌入到 iframe 中。现在视频质量有 2 个设置：360p 和 240p。现在 Youtube 每次都选择 240 作为默认值，看起来很垃圾。在这种情况下，如何将默认质量更改为最高的 360p？

我尝试在视频链接末尾设置参数 ?hd=1 ，但它不起作用：像这样：

```
<iframe title="Evolution of 4 String Quartet on BBC" width="560" height="315" src="http://www.youtube.com/embed/D1GEH6VxQ-k?hd=1" frameborder="0" allowfullscreen></iframe> 
```

有任何想法吗？甚至可能吗？

我也玩过谷歌的这个开发者工具，顺便说一句，这很酷，但 380p 没有运气...... [https://developers.google.com/youtube/youtube_player_demo](https://developers.google.com/youtube/youtube_player_demo)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-29T19:23:07.650

您只想使用 vq 参数而不是 hd：

```
 <iframe title="Evolution of 4 String Quartet on BBC" width="560" height="315" src="http://www.youtube.com/embed/D1GEH6VxQ-k?vq=medium" frameborder="0" allowfullscreen></iframe> 
```

vq 也可以是：小、大、hd720、hd1080。

# encoding - 编码后数据大小增加

> ID：13877353
> 
> 赞同：1
> 
> 时间：2012-12-14T11:00:03.040
> 
> 标签：encoding, compression

我有一个 XML 格式的文本数据，它的长度约为 816814 字节。它包含一些图像数据以及一些文本数据。我们使用ZLIB算法进行压缩，压缩后的压缩数据长度为487239字节。

压缩后，我们使用 BASE64Encoder 对数据进行编码。但是在对压缩数据进行编码后，大小在增加，编码数据的长度为 666748 字节。

为什么，编码后数据量越来越大？还有其他最好的编码技术吗？

问候， 西德什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T16:11:29.940

如前所述，当您将具有 256 个可能值的二进制 8 位字节编码为较小的字符集（在本例中为 64 个值）时，您必然会增加大小。对于一组允许的*n 个*字符，随机二进制输入的扩展因子至少为 log(256)/log( *n* )。

如果您想减少这种影响，请使用更多字符。很有可能，无论您使用什么媒体，它都可以透明地处理超过 64 个字符。通过简单地发送所有 256 个可能的字节来找出有多少，并查看哪些通过。彻底测试候选集，然后理想地找到支持*n* < 256 集的介质的文档。

一旦你有了这个集合，你就可以使用一个简单的硬连线算术代码将 256 的集合转换为*n*的集合，然后再转换回来。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T11:05:27.400

这是完全正常的。

如果您的传输介质不是设计用于传输二进制数据而仅用于传输文本数据（例如 XML），则需要完成 Base64

所以你的 zip 文件得到 base64 编码。

说白了就是需要转码器把“非ASCII”的字母转成ASCII形式但还记得回去的路

根据经验，它的大小增加了大约 33% ( [http://en.wikipedia.org/wiki/Base64#Examples](http://en.wikipedia.org/wiki/Base64#Examples) )

这是base64的缺点。你最好使用支持文件传输的协议......但是对于用 XML 编码的文件，你几乎没有选择。

# excel-2010 - 在 PowerPivot 中导入自定义 Atom 提要

> ID：13877354
> 
> 赞同：1
> 
> 时间：2012-12-14T11:00:06.693
> 
> 标签：excel-2010, powerpivot, atom-feed, datafeed

**问：**我创建了一个示例 xml 文档，其中包含符合 atom 1.0 模式的数据。当我在 PowerPivot 中导入此文件的内容（用于测试目的）时，它会为每个条目中的每个原子元素创建列，而不是为每个内容元素创建一个列。为什么是这样？

**背景：**客户想要从 Web 服务导入数据，该服务提供使用 PowerPivot 不支持的自定义 XML 架构的提要。该服务使调用者能够提供将应用于提要的 XSLT 模板。我希望能够将此提要转换为有效的原子提要，从而允许客户将数据导入 PowerPivot。

**示例原子 xml：**

```
<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns:d="http://schemas.microsoft.com/ado/2007/08/dataservices"
      xmlns="http://www.w3.org/2005/Atom"
      xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata">
   <title type="text">My Data Feed</title>
   <id>http://temp/feed</id>
   <updated>2012-12-13T00:00:00Z</updated>
   <entry>
      <id>http://temp/feed/1</id>
      <title type="text">Title</title>
      <author>
         <name>Author</name>
      </author>
      <updated>2012-12-13T00:00:00Z</updated>
      <content type="application/xml">
         <d:Name>John Smith</d:Name>
         <d:Address>Address</d:Address>
         <d:Zip>1234</d:Zip>
      </content>
   </entry>
</feed> 
```

导入 PowerPivot 时（选择“从数据馈送”，单击“浏览”并指出 xml 文件），它看起来像这样：

![PowerPivot 导入结果](../Images/76407a1be56b4b8fa6e7b1c6bf5d03d4.png)

我期待三列：名称、地址和邮编。如果我在连接配置中将“包含原子元素”从“**自动**”更改为“**假**” ，则不会导入任何列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T13:16:25.280

看来我只是错过了这个`m:properties`元素。最终结果 - 还包括空属性和数据类型的示例：

```
<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns:d="http://schemas.microsoft.com/ado/2007/08/dataservices"
      xmlns="http://www.w3.org/2005/Atom"
      xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata">
   <title type="text">My Data Feed</title>
   <id>http://temp/feed</id>
   <updated>2012-12-13T00:00:00Z</updated>
   <entry>
      <id>http://temp/feed/1</id>
      <title type="text">Title</title>
      <author>
         <name>Author</name>
      </author>
      <updated>2012-12-13T00:00:00Z</updated>
      <content type="application/xml">

         <!-- attributes placed under the properties element -->
         <m:properties>
            <d:Name>John Smith</d:Name>
            <d:Address>Address</d:Address>
            <d:Zip m:type="Edm.Int32">1234</d:Zip>
            <d:Comment m:null="true" />
         </m:properties>

      </content>
   </entry>
</feed> 
```

# python - 如何使用 py.test 收集我的测试？

> ID：13877355
> 
> 赞同：11
> 
> 时间：2012-12-14T11:00:07.787
> 
> 标签：python, pytest

我尝试使用 py.test 收集我的测试，但它没有这样做。

*   **我是否必须在命令行中提供其他选项？**

*   Py.test 在我的 .py 文件的目录中执行。**还有其他要求吗？**

*   **我的测试命名正确吗？**在我的代码中，我将“Test-”用于类，“test_”用于方法。

## 终端的结果：

```
> py.test

===============================  in 0.00 seconds ============================
user@host:~/workspace/my_project/src/html_extractor$ py.test

============================= test session starts ===========================
platform linux2 -- Python 2.7.3 -- pytest-2.3.4
plugins: xdist
collected 0 items 
```

## 我正在测试的代码：

```
class Factories(object):
    TEST_LINKS = ['http://www.burgtheater.at',
                  'http://www.musikverein.at/']

    def links(self):
        for link in self.TEST_LINKS:
            yield link

class TestHTMLExtractor(unittest.TestCase):

    def setUp(self):
        self.factory = Factories()
        self.extractor = HTMLExtractor()

    def test_extract_site_return(self):
        for link in self.factory.links():
             raw_html_page = self.extractor.run(link)

def test_whatever():
    pass

if __name__ == '__main__':
    unittest.main() 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-14T11:09:28.010

在默认配置中，测试文件应命名为`test_<something>.py`. 请参阅[更改标准 (Python) 测试发现](http://pytest.org/latest/example/pythoncollection.html#changing-standard-python-test-discovery)。

# jquery - 如何正确使用 jQuery Mobile 的 $(document).bind('pageinit')？

> ID：13877356
> 
> 赞同：0
> 
> 时间：2012-12-14T11:00:09.437
> 
> 标签：jquery, jquery-mobile, page-init

我的一个页面的头部有以下内容：

```
<script>
$(document).bind('pageinit' , function(){ alert("welcome"); });
//$(document).ready(function() {alert("welcome"); });
</script> 
```

被注释掉的工作正常（当未注释时），但最上面的没有。由于 jQuery Mobile pageinit 功能，我遇到了很多问题。我必须在导航到每个页面后单击刷新，否则我添加的滚动条以及其他功能将无法加载。我引用的滚动条插件如下：

```
<script type="text/javascript" src="cubiq-iscroll-bad88fb/src/iscroll.js"></script> 
```

然而，就像我说的，每次我从一个页面导航到另一个页面时，它都不会无缝加载。我需要点击刷新。我认为这是因为 Ajax，我认为通过正确使用可以解决问题， `$(document).bind('pageinit')`但我不知道该怎么做。任何建议都非常感谢。谢谢。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:36:05.480

您需要将事件附加到`div`代表页面，例如：

```
$( '#thePage' ).live( 'pageinit',function(event){
    alert( 'This page was just enhanced by jQuery Mobile!' );
}); 
```

`#thePage`您的`id`页面在哪里`div`。

有关此示例和更多信息，请参阅[JQuery Mobile 文档](http://jquerymobile.com/test/docs/api/events.html)。

# java - WSDL 生成可重复构建

> ID：13877357
> 
> 赞同：5
> 
> 时间：2012-12-14T11:00:16.613
> 
> 标签：java, maven, wsdl, axis, wsdl2java

我被要求查看现有基于服务的应用程序的构建过程。它有几个基于服务的模块，其中一些服务由第三方提供。构建过程中使用的 wsdls 通过 http 下载并进入构建。为了竞争力，我使用 maven 3 和 axistools-maven-plugin 从 wsdl 生成类。

这让我开始思考。如果远程服务器关闭，我的构建将失败。如果 wsdl 更改我的构建也可能失败。我想要这个吗？远程 wsdl 在 service/wsdl 名称中进行了版本控制，因此不应对 API 进行重大更改，但它们是第 3 方，我不能真正依赖此约定。

在本地下载 wsdl 并针对受源代码控制的文件进行构建不是更好吗？然后我将有一个适当的可重复构建，而不会有远程服务器不可用的危险。不过，这似乎不是很敏捷。如果我采用这种方法，那么我如何知道远程 wsdl 中的任何变化？

我确信我不是第一个想知道从 wsdls 构建的最佳实践的人。任何人都可以强调什么机制被认为是从远程 wsdls 生成的服务生成可重复构建的最佳实践方式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T20:02:17.520

如果你想要快速可靠的构建，那么黄金法则就是不要依赖任何你无法控制的东西！

在您的情况下，我将在本地缓存 WSDL，以便在原始源不可用或更改时构建不会失败。但是，如果您完全担心 WSDL 可能会更改，那么我还将创建一个单独的构建作业，该作业每天运行并将缓存的副本与原始副本进行比较，如果它们不同，则会失败。这为您提供了两全其美的优势......如果 WSDL 发生变化，可重复构建和早期警告。

您在哪里/如何缓存 WSDL 完全取决于您，但将其保留在版本控制中是一个快速而简单的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:11:33.157

我会下载 WSDL 文件并将它们与项目的其余部分一起放入源代码控制中。

主要优点是它保证了可重复的构建。如果您在每个版本上下载它们，则它是不可重复的。例如，假设您构建并部署到开发或测试环境，让应用程序签名，然后构建并部署到现场。如果 WSDL 已更改，那么您的实时构建与测试中签署的不同，并且工作方式可能会有所不同。如果您有网络通信问题，那么您甚至可能根本无法构建。

这意味着您不会自动获得最新版本的 WSDL，但这是一件好事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T12:18:12.900

如果您知道 Web 服务有一个固定的 wsdl，最好使用它的本地副本。

如果 wsdl 本身可能发生变化，最好始终使用 url 进行构建。

如果网络中断是一个问题，请制作两个单独的构建配置文件（在 Maven 中），一个用于本地，另一个用于 url。

# javascript - JQuery div 标签在 FireFox 中有子代，但在 Chrome 中没有

> ID：13877358
> 
> 赞同：4
> 
> 时间：2012-12-14T11:00:21.123
> 
> 标签：javascript, jquery, dom

我正在使用 JQuery ajax 从 url 加载图像，显示它们，然后在每个图像的顶部放置一个按钮。

该代码在 Firefox 中工作，但在 chrome 中，应该具有所有子项的 div 父“照片”（从 url 接收的每个图像的一个子 div“照片”）为 0。

我试过`read()`and `load()`，但似乎没有任何效果。如果我 `alert($('#photos').children().size());`在 Chrome 控制台中运行，它会返回孩子。但在执行时它返回 0。有什么想法吗？

```
$(window).load(function ()        
{
$("p").text("The DOM is now loaded and can be manipulated.");

 //returns 0 in chrome, but 10 in firefox
 alert($('#photos').children().size());

$('#photos').children().each(function() 
{   
//do stuff 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:05:37.057

我解决了这个问题。由于某种原因，本地 chrome 服务器没有运行，因此 javascript 似乎没有在正确的时间执行。谢谢。

# hibernate - 来自给定 SQL 查询的 HQL 查询

> ID：13877366
> 
> 赞同：0
> 
> 时间：2012-12-14T11:00:48.197
> 
> 标签：hibernate, count

我得到了这样的 SQL 查询：

```
SELECT COUNT(count) as ovcount from (SELECT COUNT(id) AS count FROM table WHERE
field1=value1 and field2=value2 GROUP BY something1, something2, something3)
as T WHERE count > 1 
```

该语句在 HQL 中的外观如何？如果查询在 FROM 之后包含子查询，Hibernate 不支持“简单方法”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:02:05.317

最后，我认为您要做的是仅在总数高于 1 时获取 COUNT(id) 。使用`HAVING`应该会给您相同的结果。

```
SELECT COUNT(id) AS count 
FROM table 
WHERE field1=value1 and field2=value2 
GROUP BY something1, something2, something3
HAVING COUNT(id) > 1 
```

# javascript - 正在发布 HTML/Javascript 禁用然后重新启用复选框

> ID：13877369
> 
> 赞同：1
> 
> 时间：2012-12-14T11:00:58.163
> 
> 标签：javascript, html

我有一个带有复选框的页面，该复选框在单击按钮时使用 javascript 禁用/重新启用。如果我从不禁用该复选框，则其值已正确发布，但是如果我禁用该复选框，即使它在没有值的情况下发布（即使选中，也会发布为“name =”）。我已经通过萤火虫检查了 POST 值。

为什么它会这样？我错过了什么吗？我在某处读到禁用控件未发布，没关系，但是单击提交时此控件未禁用。

我正在使用具有更复杂设置的 ASP.NET 来测试它，但本质上这是问题的核心。浏览器是FF最新的。

我发现了非常相似的问题，但是没有答案： [禁用控件被重新启用但仍然没有将内容回发到服务器](https://stackoverflow.com/questions/3856218/disabled-control-being-reenabled-but-still-not-posting-back-contents-to-server)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:18:00.617

错误似乎在于我对提交数据的解释。正如 TJ 正确指出的那样（它引导我找到解决方案，所以谢谢！）如果未选中该复选框，则不会提交任何内容，而不是像我的情况那样提交“cbName =”。

真正的问题（我提出这个问题的原因）是 ASP.NET 没有识别回发的选中复选框。但这是由于不同的原因：我的 javascript 禁用函数也这样做了 this.value = ''。但是，如果您对 asp:checkbox 执行此操作，则回发无法识别其值（状态），并且该复选框始终在服务器上显示为未选中。ASP.NET 必须具有 cbName=on 才能识别回发的检查状态。

好吧，至少我今天学到了一些东西。希望这也可以在将来对其他人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:19:09.060

您究竟如何禁用和重新启用该复选框？该[`disabled`属性](http://www.whatwg.org/specs/web-apps/current-work/multipage/association-of-controls-and-forms.html#enabling-and-disabling-form-controls%3a-the-disabled-attribute)是一个[布尔属性](http://www.whatwg.org/specs/web-apps/current-work/multipage/common-microsyntaxes.html#boolean-attribute)。属性的存在而不是值意味着它被禁用。所有这些复选框都被禁用：

```
<input type="checkbox" name="cheese" disabled>
<input type="checkbox" name="cheese" disabled="disabled">
<input type="checkbox" name="cheese" disabled="">
<input type="checkbox" name="cheese" disabled="true">
<input type="checkbox" name="cheese" disabled="false"> 
```

# html - Codeigniter HTML & Apache, JPG & jpg

> ID：13877371
> 
> 赞同：0
> 
> 时间：2012-12-14T11:01:00.377
> 
> 标签：html, codeigniter, jpeg, image-uploading

嗨，我正在使用 codeigniter 在网络服务器上保存一些 jpg/JPG 文件。问题是我不知道所有文件扩展名是否都相同：jpg/JPG 所以在渲染时我放了一个这样的标签

```
<img src="/.../name.JPG"/> 
```

这样如果上传的文件是.jpg就不会显示了。

我要使用的解决方案是标记 HTML 的简单冗余：

```
<img src="/.../name.JPG"/> 
<img src="/.../name.jpg"/> 
```

这样，如果一个没有被渲染，另一个是

我想知道这个问题是否可以通过在上传时更改文件扩展名在 php 或 codeigniter 中解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:06:15.740

```
$newname = basename($filename, ".JPG").".jpg";
rename($filename, $newname); 
```

# sql - 在 C# 中使用存储过程生成 RDLC 报告

> ID：13877374
> 
> 赞同：0
> 
> 时间：2012-12-14T11:01:18.833
> 
> 标签：sql, stored-procedures, rdlc

我正在制作一个为我的客户生成报告的应用程序。我正在使用他的数据库，其中包含返回报告所需数据的存储过程。问题是我不知道如何从应用程序中执行它们（更具体地说是我的数据集中的 TableAdapter）。当我使用可视化帮助创建 TableAdapter 时，它显示错误“名为 #table1 的对象无效”。这很奇怪，因为在存储过程中有一个名为#table1 的临时表。当我尝试以编程方式完成整个工作时，我得到了一个异常， `Incorrect syntax near '.'. An object or column name is missing or empty. For SELECT INTO statements, verify each column has a name. For other statements, look for empty alias names. Aliases defined as "" or [] are not allowed. Change the alias to a valid name.` 我创建了一个与存储过程的结果具有相同结构的 DataTable，但我仍然得到相同的异常

我添加了`command.CommandType = CommandType.StoredProcedure`, 并且有一个新的例外`No mapping exists from object type System.Data.DataRow[] to a known managed provider native type.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:15:45.720

TableAdapter 尝试使用无法识别 #temp 表的[SET FMTONLY](http://msdn.microsoft.com/en-us/library/ms173839.aspx) （或类似机制）来猜测结果集的列。

您可以用[@table 变量](http://msdn.microsoft.com/en-us/library/ms188927.aspx)替换#temp 表吗？

# php - php中多维数组的数组比较

> ID：13877379
> 
> 赞同：0
> 
> 时间：2012-12-14T11:01:47.660
> 
> 标签：php, arrays

> **可能重复：**
> [递归array_diff（）？](https://stackoverflow.com/questions/3876435/recursive-array-diff)

数组 1 =>

```
 pr($plan_data);
    Array
    (
        [0] => Array
            (
                [AveragePrice] => 9.631161
                [EFLUrl] => http://www.championenergyservices.com/register/EFL_API.asp?rateid=161456
                [EarlyTerminationFee] => 150
                [HurricaneRecovery] => 0.132
                [MeterSurcharge] => 3.05
                [OffCycle] => 5
                [PUCAssessment] => 0.00167
                [PlanDescription] => Savings Champ-6
                [PlanId] => 57
                [PlanIssueDate] => 12/10/2012
                [PlanMonthlyFee] => 0
                [PlanName] => PN1058
                [PlanRate] => 9.3
                [PlanRenewablePercent] => 7.2
                [PlanTerm] => 6
                [PriorityMoveIn] => 36
                [ProviderDisplayName] => CenterPoint Energy
                [ProviderId] => 21
                [ProviderInternalName] => CNP_COAST
                [RateId] => 161456
                [RegularMoveIn] => 16
                [TDSPPassThrough] => 0.03791
                [TOCUrl] => http://www.championenergyservices.com/register/termsandconditions.asp?rateid=161456
                [YRACUrl] => http://www.championenergyservices.com/register/\affiliatefiles\YRAC.PDF
                [provider] => ces
                [ProductType] => Fixed
                [Rep] => Champion Energy Services
                [Zone] => 77479
            )

        [1] => Array
            (
                [AveragePrice] => 10.1311693
                [EFLUrl] => http://www.championenergyservices.com/register/EFL_API.asp?rateid=161458
                [EarlyTerminationFee] => 150
                [HurricaneRecovery] => 0.132
                [MeterSurcharge] => 3.05
                [OffCycle] => 5
                [PUCAssessment] => 0.00167
                [PlanDescription] => Savings Champ-12
                [PlanId] => 59
                [PlanIssueDate] => 12/10/2012
                [PlanMonthlyFee] => 0
                [PlanName] => PN1060
                [PlanRate] => 9.8
                [PlanRenewablePercent] => 7.2
                [PlanTerm] => 12
                [PriorityMoveIn] => 36
                [ProviderDisplayName] => CenterPoint Energy
                [ProviderId] => 21
                [ProviderInternalName] => CNP_COAST
                [RateId] => 161458
                [RegularMoveIn] => 16
                [TDSPPassThrough] => 0.03791
                [TOCUrl] => http://www.championenergyservices.com/register/termsandconditions.asp?rateid=161458
                [YRACUrl] => http://www.championenergyservices.com/register/\affiliatefiles\YRAC.PDF
                [provider] => ces
                [ProductType] => Fixed
                [Rep] => Champion Energy Services
                [Zone] => 77479
            )

        [2] => Array
            (
                [AveragePrice] => 10.4311743
                [EFLUrl] => http://www.championenergyservices.com/register/EFL_API.asp?rateid=161459
                [EarlyTerminationFee] => 150
                [HurricaneRecovery] => 0.132
                [MeterSurcharge] => 3.05
                [OffCycle] => 5
                [PUCAssessment] => 0.00167
                [PlanDescription] => Green Power-12
                [PlanId] => 60
                [PlanIssueDate] => 12/10/2012
                [PlanMonthlyFee] => 0
                [PlanName] => PN1061
                [PlanRate] => 10.1
                [PlanRenewablePercent] => 100
                [PlanTerm] => 12
                [PriorityMoveIn] => 36
                [ProviderDisplayName] => CenterPoint Energy
                [ProviderId] => 21
                [ProviderInternalName] => CNP_COAST
                [RateId] => 161459
                [RegularMoveIn] => 16
                [TDSPPassThrough] => 0.03791
                [TOCUrl] => http://www.championenergyservices.com/register/termsandconditions.asp?rateid=161459
                [YRACUrl] => http://www.championenergyservices.com/register/\affiliatefiles\YRAC.PDF
                [provider] => ces
                [ProductType] => Fixed
                [Rep] => Champion Energy Services
                [Zone] => 77479
            )
) 
```

数组 2 =>

```
pr($temp_val);
Array
(
    [0] => Array
        (
            [id] => 6
            [PlanId] => 60
            [PlanName] => Bounce 12 + A/C Protection
            [PlanDescription] => Bounce 12 + A/C Protection - CNP
            [PlanTerm] => 12
            [PlanRate] => 
            [RateId] => 
            [PlanIssueDate] => 
            [PlanMonthlyFee] => 
            [EarlyTerminationFee] => 200.00000
            [AveragePrice] => 12.00000
            [HurricaneRecovery] => 
            [PlanRenewablePercent] => 
            [ProviderDisplayName] => 
            [ProviderId] => 1
            [provider] => bounce
            [ProductZoneId] => 353
            [Zone] => 77479
            [ProviderInternalName] => 
            [RegularMoveIn] => 
            [PriorityMoveIn] => 
            [OffCycle] => 
            [TDSPPassThrough] => 
            [PUCAssessment] => 
            [EFLUrl] => 
            [EFLLinkUrl] => http://www.bounceenergy.com/efls/bounce12.pdf
            [TOCUrl] => 
            [TOCLUrl] => http://www.bounceenergy.com/terms-of-service-fixed.pdf
            [YRACUrl] => 
            [YRACLUrl] => http://www.bounceenergy.com/yraac.pdf
            [REP_Name] => 
            [REP_PUCT] => 
            [customer_service_email] => 
            [toll_free_number] => 
            [status] => active
            [created] => 2012-12-14 12:40:05
            [modified] => 2012-12-14
        )

    [1] => Array
        (
            [id] => 18
            [PlanId] => 17
            [PlanName] => Online Only - 12
            [PlanDescription] => Online Only - 12
            [PlanTerm] => 12
            [PlanRate] => 
            [RateId] => 386
            [PlanIssueDate] => 
            [PlanMonthlyFee] => 100.00000
            [EarlyTerminationFee] => 175.00000
            [AveragePrice] => 10.00000
            [HurricaneRecovery] => 
            [PlanRenewablePercent] => 
            [ProviderDisplayName] => 
            [ProviderId] => 2
            [provider] => fulcrum
            [ProductZoneId] => 
            [Zone] => 77479
            [ProviderInternalName] => 
            [RegularMoveIn] => 
            [PriorityMoveIn] => 
            [OffCycle] => 
            [TDSPPassThrough] => 
            [PUCAssessment] => 
            [EFLUrl] => 
            [EFLLinkUrl] => 
            [TOCUrl] => 
            [TOCLUrl] => 
            [YRACUrl] => 
            [YRACLUrl] => 
            [REP_Name] => 
            [REP_PUCT] => 
            [customer_service_email] => 
            [toll_free_number] => 
            [status] => active
            [created] => 2012-12-14 12:40:15
            [modified] => 2012-12-14
        )
) 
```

我想比较这两个数组，如果任何键值不同，我想把它换成不同的数组。

```
$result_val= array_diff_assoc($plan_data, $temp_val); 
```

请帮帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:09:41.033

尝试这样的事情：

```
function array_diff_assoc($a, $b) {
    $result = array();
    foreach ($a as $k => $v) {
        if ($b[$k] != $v) {
            $result[$k] = [$v, $b[$k]];
        }
    }
    return $result;
} 
```

# html-table - HTML 电子邮件模板 需要表格帮助

> ID：13877380
> 
> 赞同：0
> 
> 时间：2012-12-14T11:02:02.420
> 
> 标签：html-table, html-email, newsletter, email-templates

我需要帮助设置电子邮件通讯模板，因为其中一列未正确显示，包含标题 2 的列未正确显示，它显示在页面右侧而不是与模板元素对齐。

这是代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
</head>
<body>
<!--Table Start-->&nbsp;&nbsp; &nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp;
<table border="0" align="center" cellpadding="0" cellspacing="0" class="cont-bg" bgcolor="#f1f1f1" style="background-color: #f1f1f1; padding: 27px 0px 0px; width: 100%; background-position: initial initial; background-repeat: initial initial;">
    <tbody>
        <tr>
            <td align="center" valign="top" width="1133">&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; <!--Main Part Start-->&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;
                <table border="0" align="center" cellpadding="0" cellspacing="0" style="width: 650px;">
                    <tbody>
                        <tr>
                            <td align="left" valign="top">&nbsp; &nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; <!--Header Part Start-->&nbsp; &nbsp;&nbsp; &nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;
                                <table border="0" align="center" cellpadding="0" cellspacing="0" style="width: 650px; height: 682px;">
                                    <tbody>
                                        <tr>
                                            <td colspan="2" align="right" valign="top" mc:edit="view" style="font: normal 12px arial, helvetica, sans-serif; color: #000000; padding-bottom: 22px;">You can&rsquo;t see this email?<a href="#"> View it in your browser.</a></td>
                                        </tr>
                                        <tr><!--Logo Start-->
                                            <td width="287" align="left" valign="top" bgcolor="#ffffff" style="background: #fff;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                                                <p align="left"><br />
                                                    <img src="commstellogo.png" width="208" height="45" border="0" align="left" /></p></td>
                                            <!--Logo End--><!--Menu Part Start-->
                                            <td width="363" height="94" align="left" valign="middle" bgcolor="#ffffff" style="background: #fff;">&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp;
                                                <table border="0" cellspacing="0" cellpadding="0" style="width: 340px;">
                                                    <tbody>
                                                        <tr>
                                                            <td align="right" valign="top" mc:edit="date" style="font: bold 18px arial, helvetica, sans-serif; color: #2f2f2f; text-transform: uppercase; padding-bottom: 8px;">01727 260 101</td>
                                                        </tr>
                                                        <tr>
                                                            <td align="left" valign="top">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;
                                                                <table border="0" cellspacing="0" cellpadding="0" style="width: 340px;">
                                                                    <tbody>
                                                                        <tr>
                                                                            <td width="16" align="left" valign="top"><img mc:edit="h-icin" src="images/home-icon.png" width="16" height="19" alt="" /></td>
                                                                            <td width="64" align="left" valign="middle" mc:edit="h-text" style="font: bold 12px arial, helvetica, sans-serif; color: #414141; padding-left: 9px;"><a href="#" style="color: #414141;">Home</a></td>
                                                                            <td width="16" align="left" valign="top"><img mc:edit="s-icon" src="images/setting.png" width="16" height="19" alt="" /></td>
                                                                            <td width="79" align="left" valign="middle" mc:edit="s-text" style="font: bold 12px arial, helvetica, sans-serif; color: #414141; padding-left: 9px;"><a href="#" style="color: #414141;">Services</a></td>
                                                                            <td width="16" align="left" valign="top"><img mc:edit="a-icon" src="images/about-us.png" width="16" height="19" alt="" /></td>
                                                                            <td width="77" align="left" valign="middle" mc:edit="a-text" style="font: bold 12px arial, helvetica, sans-serif; color: #414141; padding-left: 9px;"><a href="#" style="color: #414141;">About us</a></td>
                                                                            <td width="18" align="left" valign="top"><img mc:edit="s-icon" src="images/support.png" width="16" height="19" alt="" /></td>
                                                                            <td width="54" align="right" valign="middle" mc:edit="s-text" style="font: bold 12px arial, helvetica, sans-serif; color: #414141; padding-left: 9px;"><a href="#">Contact</a></td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table></td>
                                                        </tr>
                                                    </tbody>
                                                </table></td>
                                            <!--Menu Part End--></tr>
                                        <tr>
                                            <td colspan="2" align="left" valign="top" height="548">&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; <!--Banner Start-->&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
                                                <table border="0" cellspacing="0" cellpadding="0" style="width: 650px;">
                                                    <tbody>
                                                        <tr>
                                                            <td align="left" valign="top"><img mc:edit="banner-image" src="#" width="649" height="356" alt="" style="display: block;" /></td>
                                                        </tr>
                                                        <tr>
                                                            <td align="left" valign="top" bgcolor="#2f2f2f" style="padding: 25px 0px 18px 20px; background: #2f2f2f;">&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp;
                                                                <table border="0" cellspacing="0" cellpadding="0" style="width: 611px;">
                                                                    <tbody>
                                                                        <tr>
                                                                            <td align="left" valign="top" mc:edit="banner-title" style="font: normal 24px arial, helvetica, sans-serif; color: #fff; padding-bottom: 8px;">Heading Area</td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td align="left" valign="top" mc:edit="banner-text" style="font: normal 12px arial, helvetica, sans-serif; color: #fff; line-height: 18px; padding: 0px 0px 12px 4px;">Vivamus interdum mauris urna. Nullam egestas augue elit. Aliquam pretium elit varius metus hendrerit volutpat. <b>20% off</b> Vivamus interdum mauris urna. Nullam egestas augue elit. Aliquam pretium elit varius metus hendrerit volutpat.</td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td align="left" valign="top"><a href="#"><img mc:edit="banner-read-more" src="#" width="128" height="31" alt="" /></a></td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table></td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                                &nbsp; <!--Banner End--> &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;</td>
                                        </tr>
                                    </tbody>
                                </table>

                                <!--Header Part End--> &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;</td>
                        </tr>
                        <tr><!--Body Part Start--></tr>
                        <tr>
                            <td width="330" align="left" valign="top">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <!--Two column 1 Start-->&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                                <table border="0" cellspacing="0" cellpadding="0" style="width: 320px;">
                                    <tbody>
                                        <tr>
                                            <td align="left" valign="top"><img mc:edit="two-coulmn-image1" src="businesstelephone.png" width="320" height="172" alt="" style="display: block;" /></td>
                                        </tr>
                                        <tr>
                                            <td align="left" valign="top" bgcolor="#2f2f2f" style="padding: 15px 0px 18px 20px; background: #2f2f2f;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp;
                                                <table border="0" cellspacing="0" cellpadding="0" style="width: 288px;">
                                                    <tbody>
                                                        <tr>
                                                            <td align="left" valign="top" mc:edit="banner-title" style="font: normal 24px arial, helvetica, sans-serif; color: #fff; padding-bottom: 5px;">Heading 2</td>
                                                        </tr>
                                                        <tr>
                                                            <td align="left" valign="top" mc:edit="banner-text" style="font: normal 12px arial, helvetica, sans-serif; color: #fff; line-height: 18px; padding: 0px 0px 12px 4px;">Praesent viverra dui in orci pulvinar convallis. Nunc interdum, metus eget adipiscing rutrum, leo quam accumsan tellus, eget . It's easy and hassle free!</td>
                                                        </tr>
                                                        <tr>
                                                            <td align="left" valign="top"><a href="#"><img mc:edit="read-more" src="#" width="128" height="31" alt="" /></a></td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                                &nbsp; &nbsp;</td>
                                        </tr>
                                    </tbody>
                                </table>
                                &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <!--Two column 1 End--> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</td>
                            <td width="320" align="left" valign="top">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <!--Two column 2 Start-->&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                                <table border="0" cellspacing="0" cellpadding="0" style="width: 320px;">
                                    <tbody>
                                        <tr>
                                            <td align="left" valign="top"><img mc:edit="two-coulmn-image2" src="mobiles.png" width="320" height="172" alt="" style="display: block;" /></td>
                                        </tr>
                                        <tr>
                                            <td align="left" valign="top" bgcolor="#2f2f2f" style="padding: 15px 0px 18px 20px; background: #2f2f2f;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp;
                                                <table border="0" cellspacing="0" cellpadding="0" style="width: 288px;">
                                                    <tbody>
                                                        <tr>
                                                            <td align="left" valign="top" mc:edit="banner-title" style="font: normal 24px arial, helvetica, sans-serif; color: #fff; padding-bottom: 5px;">Heading 3</td>
                                                        </tr>
                                                        <tr>
                                                            <td align="left" valign="top" mc:edit="banner-text" style="font: normal 12px arial, helvetica, sans-serif; color: #fff; line-height: 18px; padding: 0px 0px 12px 4px;">Nunc vel massa metus, vel varius mi. Sed sagittis consectetur nisi, sed imperdiet ipsum interdum non. Nunc consectetur odio et turpis eleifend semper. Pellentesque lorem purus</td>
                                                        </tr>
                                                        <tr>
                                                            <td align="left" valign="top"><a href="#"><img mc:edit="read-more-1" src="images/read-more.png" width="128" height="31" alt="" /></a></td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                                &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</td>
                                        </tr>
                                    </tbody>
                                </table>
                                &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <!--Two column 2 End--> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</td>
                        </tr>
                        <!--Two column Part End-->
                        <tr>
                            <td>&nbsp;</td>
                        </tr>
                    </tbody>
                </table></td>
            <!--Body Part End--></tr>
        <tr><!--Footer Part Start-->
            <td align="left" valign="top">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;
                <table border="0" cellspacing="0" cellpadding="0" style="width: 687px;">
                    <tbody>
                        <tr>
                            <td align="center" valign="top" bgcolor="#ffffff" style="background: #fff; padding: 28px 0px 27px 0px;" width="687">&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp;
                                <table border="0" align="center" cellpadding="0" cellspacing="0" style="width: 675px;">
                                    <tbody>
                                        <tr>
                                            <td align="center" valign="top" mc:edit="un-sp-text" style="font: normal 12px arial, helvetica, sans-serif; color: #737373; line-height: 18px;" width="675">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                                                <p align="center"><b>Copyright &copy; 2012 Company - Registered &amp; Dales 07765116</b></p></td>
                                        </tr>
                                        <tr>
                                            <td align="center" valign="top" mc:edit="c-right-text" style="font: bold 12px arial, helvetica, sans-serif; color: #737373; line-height: 18px;" width="675">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                                                <p align="center">Company Address<br />
                                                    T: 023227 000 201 &nbsp;E: <a href="#">admin@admin.com</a> &nbsp;W: <a href="#">company</a></p></td>
                                        </tr>
                                    </tbody>
                                </table></td>
                        </tr>
                        <tr>
                            <td align="center" valign="top" style="padding: 20px 0px 35px 0px;" width="687">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                                <p align="center">If you wish to unsubscribe from this email, please click here</p></td>
                        </tr>
                    </tbody>
                </table></td>
            <!--Footer Part End--></tr>
    </tbody>
</table>
<!--Main Part End--> &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; <!--Table Start-->
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:11:15.987

您在代码中打开了很多`<table>`标签，但没有一个是关闭的。`parent-table`这意味着如果您愿意，每个表都会嵌套在其中。

特别是对于所有这些，对齐将失控。

我建议相应地关闭表格标签并删除`&nbsp;`它们为一些平均代码制作的标签。

# mysql - 如何在mysql中加快join查询

> ID：13877387
> 
> 赞同：0
> 
> 时间：2012-12-14T11:02:48.807
> 
> 标签：mysql, join

两个mysql表，如A和B

```
emp_A(id,name,some_text)     PK is: id

emp_B(sr_no,emp_id,loc,adrr) PK is: emp_id+sr_no

emp_sr(sr_no,a,b)            PK is: sr_no 
```

我的桌子是这样的。我要像这样查询

```
select A.name, B.loc 
from emp_A, emp_B B 
where A.id=B.em_id 
and sr_no =123 
```

emp_A 表有大约 3L 条记录 emp_B 表有大约 8L 条记录。

我怎样才能固定我的加入查询？

请帮我？？？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:08:52.827

而不是`WHERE`，请使用`ON`您的联接子句。

```
select A.name, B.loc from emp_A
    inner join emp_B B on A.id=B.em_id and sr_no =123 
```

当您只使用一个`WHERE`子句时，首先将 A 中的每条记录连接到 B 中的每条记录，然后过滤掉一些记录。因此，您正在构建一张巨大的桌子作为中间步骤。

当您使用`ON`子句时，不匹配的记录会在连接发生时被过滤掉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T11:09:30.100

```
Please try this

select A.name, B.loc from emp_A A join emp_B B on(A.id=B.emp_id) join emp_sr C on (B.sr_no=C.sr_no) where C.sr_no = 123 
```

# backbone.js - 骨干集合 0.9.9 - 添加事件不起作用

> ID：13877391
> 
> 赞同：2
> 
> 时间：2012-12-14T11:03:12.497
> 
> 标签：backbone.js

骨干集合 0.9.9 - 添加事件不起作用 将骨干更新到 0.9.9 后，我遇到了（添加）问题。

```
(function () {

var Model = Backbone.Model.extend({

    initialize: function () {
        console.log('initialize Model');
    }
});

var Collection = Backbone.Collection.extend({

    model: Model,
    url: "/json.json",

    initialize: function () {
        console.log('initialize Collection');
    }
});

var View = Backbone.View.extend({

    initialize: function () {
        console.log('initialize View');
    }
});

var collection = new Collection([
    {
        "id"    : "001",
        "name"  : "Дарья",
        "text"  : "1 Вопрос - Ответ 1"
    }
]);

collection.on('add', function () {
    console.log('edd event', this)
});

collection.fetch({
    add: true,
    //silent: false,
    success: function (model) {
        console.log('fetch')
    }
});

}()); 
```

console.log('edd event', this) - 无效（在旧版本中有效

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T12:36:49.390

似乎不再支持该`add`选项。`collection.fetch`

从 0.9.2 源（collection.fetch）：

```
collection[options.add ? 'add' : 'reset'](collection.parse(resp, xhr), options); 
```

从 0.9.9 源（collection.fetch）：

```
var method = options.update ? 'update' : 'reset';
collection[method](resp, options);
if (success) success(collection, resp, options); 
```

所以默认情况下`collection.fetch`会导致集合重置，并且`reset`事件将被触发。如果你通过 option `update:true`，并且`update`将被执行。

根据[新 collection.update 方法的文档](http://backbonejs.org/#Collection-update)，更新将触发`add`添加模型的事件，因此以下应该起作用：

```
collection.fetch({
    update: true,
    success: function (model) {
        console.log('fetch')
    }
}); 
```

只需测试并注意，如果模型被删除或更改，新的更新方法也将触发`remove`和事件。`change`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T12:59:20.547

根据我从查看 Backbone 0.9.9 源代码中收集到的信息，除非您也添加了- 选项，否则 - 选项`add`不会起作用。[资源](http://backbonejs.org/docs/backbone.html#section-100)`fetch``update`

因此，要使用它做一些有用的事情，请执行以下操作：

```
collection.fetch({
    add: true,
    update: true, // this is necessary as well
    //silent: false,
    success: function (model) {
        console.log('fetch')
    }
}); 
```

这也是你的问题的原因。获取时，获取后`Collection`自动默认为`reset`-function。[从 Backbone.js源](http://backbonejs.org/docs/backbone.html#section-105)`reset`中可以看出，使`add`-events 静音并选择仅触发`reset`事件

```
if (models) this.add(models, _.extend({silent: true}, options)); 
```

因此，`update`如果您想要`add`-events 并且不想在添加新模型之前清空集合，请使用该选项。如果您必须具有重置功能和`add`事件，那么您可能需要编写一些自定义实现`reset`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T12:27:07.923

您需要删除注释掉的行，因为否则它不会传播添加事件（请参阅主干.js 源代码的第 827 行）。所以以下应该工作

```
collection.fetch({
    add: true,
    silent: false,
    success: function (model) {
        console.log('fetch')
    }
}); 
```

我不确定这是否与以前的版本有所不同:)

# jquery - 查找包含多个类中的类名

> ID：13877393
> 
> 赞同：2
> 
> 时间：2012-12-14T11:03:20.877
> 
> 标签：jquery, string, class, find, contain

我想在课堂上获得id，比如......

```
<div class="main demo id_111 test"></div>

<div class="main demo test id_222 test demo"></div>

<div class="id_3 main demo test  test demo"></div> 
```

结果必须`111`是`222`和`3`

所以我这样编码

```
var id = $(".main").attr("class");
var id = id.split("id_");
var id = id[1].split(" ");
var id = id[0];

$("body").append(id); 
```

但是有人知道比我更好的编码吗？

**游乐场：http:** [//jsfiddle.net/UHyaD/](http://jsfiddle.net/UHyaD/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-14T11:07:52.067

您可以使用正则表达式：

```
var id = $(".main").attr("class").match(/id_(\d*)/)[1]; 
```

JSfiddle：http: [//jsfiddle.net/scaillerie/UHyaD/1/](http://jsfiddle.net/scaillerie/UHyaD/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T11:06:49.647

您可以使用`match`功能：

```
var id = $(".main").attr("class").match(/\d+/g).join(''); 
```

# c# - 在 GridView 中使用 devexpress TreeList 作为列编辑器

> ID：13877394
> 
> 赞同：0
> 
> 时间：2012-12-14T11:03:33.613
> 
> 标签：c#, winforms, devexpress, xtratreelist

是否可以在 gridView 列中使用 devexpress TreeList 作为就地编辑器？我想为产品表中的每一行选择类别并保存它们。我不知道该怎么做。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:13:24.143

查看“[如何在弹出窗口中使用 TreeList 创建一个 GridLookUpEdit 的模拟](http://www.devexpress.com/Support/Center/p/E4319.aspx)”知识库文章。

# c# - 如何将多个数组绑定到 DataGrid

> ID：13877396
> 
> 赞同：0
> 
> 时间：2012-12-14T11:03:53.230
> 
> 标签：c#, wpf, data-binding, datagrid

我有一个 Character 对象，其中有 10 个数组，代表角色的 10 个统计数据（敏捷、力量等 - 这是用于角色扮演游戏）。数组会跟踪统计数据并随着时间的推移而增加，所以我知道他们在哪个级别增加了哪个统计数据。数组是有限的，我一直跟踪到 50 级，所以我不需要跟踪可变数量的行或列的能力。一切都是固定的。

例如 string[] Agility = new string[50];

我想在 DataGrid 中显示此信息，并将每行中的每个单元格绑定到每个 stat 数组的元素。我找到并尝试了我认为是我最大的希望，一个名为 DataGrid2D 的库，但我无法尽我最大的努力让它工作。当我尝试更改 DataGrid 中的值时，我会收到错误消息：双向绑定需要 Path 或 XPath。当我从 ListBox 中选择字符时，填充了 10x50 的网格，即使这样也需要几秒钟来填充。

DataGrid2D 示例可在此处找到：[How to populate a WPF grid based on a 2-dimensional array](https://stackoverflow.com/questions/276808/how-to-populate-a-wpf-grid-based-on-a-2-dimensional-array/4002409#4002409)。我使用了 Meleak 的答案（第二个），将 m_intArray 更改为从每个统计数据（c.Stats）创建的二维数组。

```
var c = CE_Characters_charactersLB.SelectedItem as Character;
var dg = CE_Characters_statsDG;
dg.ItemsSource = GetBindable2DArray<string>(c.Stats); 
```

有没有更高效的解决方案？或者有谁知道为什么我会收到 DataGrid2D 的路径错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:12:30.013

我花了很长时间才弄清楚为什么你的程序不工作。

基本上，如果我是正确的，您的角色类将如下所示：

```
public class Character
{
      public string Name { get; set; }
      public int Level { get; set; }          
      public int[] Agility { get; set; }         
      public int[] Strength { get; set; }         
      public int[] Stamina { get; set; }         
      public int[] Intelligence { get; set; }
} 
```

Datagrid 不使用这些统计属性的原因是它们彼此分开。它不知道如何根据几个不同的属性创建行。

正如 Nathan Cooper 之前指出的那样，您真正需要的是另一个名为 Stat（或类似的东西）的类，它可以将这些属性中的每一个都保存为 int。然后，您需要这些类的集合来将您的数据网格绑定到。

像这样想。您目前将数据垂直分组到列中。数据网格用于将数据分组为行。所以你需要一个代表一行的对象集合。

我花时间创建了一个示例应用程序，它将展示这个概念的工作原理。

字符类如下所示：

```
 public class Character
 {
    public string Name { get; set; }

    public int Level { get; set; }

    public List<Stat> Stats { get; set; }

    public Character()
    {

    }

    public class Stat
    {
        public int Agility { get; set; }
        public int Strength { get; set; }
        public int Intelligence { get; set; }
        public int Stamina { get; set; }
    }
} 
```

在这里你可以看到我创建了一个类似于 Nathan 所说的 Stat 类。就像我说的那样，这个类将容纳数据网格的“行”，因此可以以数据网格易于理解的方式对数据进行分组。

表单的 XAML 如下所示：

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="auto"></RowDefinition>
        <RowDefinition></RowDefinition>
    </Grid.RowDefinitions>

    <ComboBox Margin="5,5,5,5" DisplayMemberPath="Name" Grid.Row="0"  ItemsSource="{Binding Path=Characters}"  SelectedItem="{Binding Path=SelectedCharacter}"></ComboBox>
    <DataGrid Grid.Row="1" Margin="5,5,5,5" AutoGenerateColumns="True" ItemsSource="{Binding Path=SelectedCharacter.Stats}" >
        <DataGrid.Columns>
            <DataGridTextColumn Header="Agility" Binding="{Binding Path=Agility}"></DataGridTextColumn>
            <DataGridTextColumn Header="Strength" Binding="{Binding Path=Strength}"></DataGridTextColumn>
            <DataGridTextColumn Header="Intelligence" Binding="{Binding Path=Intelligence}"></DataGridTextColumn>
            <DataGridTextColumn Header="Stamina" Binding="{Binding Path=Stamina}"></DataGridTextColumn>
        </DataGrid.Columns>

    </DataGrid>
</Grid> 
```

我创建了一个组合框，它将选择要在 DataGrid 中显示的字符。此字符统计信息绑定到数据网格的列。

最后是 ViewModel（不确定您是否使用 MVVM，但您应该这样做。无论如何，这段代码可以放在后面的代码中，几乎不需要更改）：

```
public class MainWindowViewModel:ViewModelBase
{
    private IList<Character> _characters;
    public IList<Character> Characters
    {
        get
        {
            return _characters;
        }
        set
        {
            _characters = value;
            RaisePropertyChanged(()=>Characters);
        }
    }

    private Character _character;
    public Character SelectedCharacter
    {
        get
        {
            return _character;
        }
        set
        {
            _character = value;
            RaisePropertyChanged(()=>SelectedCharacter);
        }
    }

    public MainWindowViewModel()
    {
        InitializeCharacters();
    }

    private void InitializeCharacters()
    {
        Characters = new List<Character>();
        SelectedCharacter = new Character();
        Characters.Add(new Character
        {
            Name = "Tank",
            Level = 3,
            Stats = new List<Character.Stat>()
            {
                new Character.Stat()
                {
                    Agility =       10,
                    Intelligence =  8, 
                    Strength =      14,
                    Stamina =       16
                },

                    new Character.Stat()
                {
                    Agility =      11,
                    Intelligence = 9, 
                    Strength =     16,
                    Stamina =      18
                },

                    new Character.Stat()
                {
                    Agility =       12,
                    Intelligence = 10, 
                    Strength =      17,
                    Stamina =       20
                }
            }

        });

        Characters.Add(new Character 
        { 
            Name = "Healer", 
            Level = 4, 

              Stats = new List<Character.Stat>()
            {
                new Character.Stat()
                {
                    Agility =       10,
                    Intelligence =  14,
                    Strength =       8,
                    Stamina =       10
                },

                    new Character.Stat()
                {
                    Agility =      11,
                    Intelligence = 16,
                    Strength =     9, 
                    Stamina =      11
                },

                    new Character.Stat()
                {
                    Agility =      12,
                    Intelligence = 17,
                    Strength =    10, 
                    Stamina =      13
                },
                    new Character.Stat()
                {
                    Agility =       14,
                    Intelligence =  20,
                    Strength =     10, 
                    Stamina =       14
                }
            }
        });

        Characters.Add(new Character 
        { 
            Name = "Ranger", 
            Level = 6,  

            Stats = new List<Character.Stat>()
            {
                new Character.Stat()
                {
                    Agility =        12,
                    Intelligence =   8, 
                    Strength =       10,
                    Stamina =        8
                },

                    new Character.Stat()
                {
                    Agility =      14,
                    Intelligence = 9,
                    Strength =     11,
                    Stamina =     10
                },

                    new Character.Stat()
                {
                    Agility =       17,
                    Intelligence = 10, 
                    Strength =     12,
                    Stamina =      11
                },
                    new Character.Stat()
                {
                    Agility =      18,
                    Intelligence =11,
                    Strength =    13,
                    Stamina =     12
                },

                    new Character.Stat()
                {
                    Agility =       20,
                    Intelligence = 12,
                    Strength =     15,
                    Stamina =      13
                },
                    new Character.Stat()
                {
                    Agility =      22,
                    Intelligence = 13,
                    Strength =     16,
                    Stamina =      13
                }
            }
        });

    }

} 
```

ViewModel 中的大部分空间都被我创建虚拟数据占用了，所以如果你愿意，可以随意删除它。重要的部分是创建 SelectedCharacter 和 Characters 类。

这是该项目的链接，因此您可以看到它的实际效果。（请原谅我的名字很糟糕） [https://docs.google.com/open?id=0B9JOiSJxT9vjZVl1SHd3UzBiZEE](https://docs.google.com/open?id=0B9JOiSJxT9vjZVl1SHd3UzBiZEE)

祝你好运

U_U

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:10:06.193

从您发布的链接中：“它是 DataGrid 的子类，并添加了一个名为 ItemsSource2D 的属性，用于绑定 2D 或 1D 源”

所以我想你必须使用该库提供的 DataGrid 并使用 ItemsSource2D 属性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T13:06:20.460

我有一个类似的问题，请看我的帖子： [双向 EntityCollection Binding to a Two Dimension Data Matrix](https://stackoverflow.com/questions/13265198/two-way-entitycollection-binding-to-a-two-dimension-data-matrix)

对于我也有一个固定数量并想要一个双向绑定的点，我定义了一个固定数量的 Columns 和 Rows，并将 Column 和 Row 属性动态分配给 ItemsControl 内的 TextBlock。

这是代码

```
<ItemsControl ItemsSource="{Binding Path=CustomerTankDayStructure,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                                              Grid.Column="1"
                                              Grid.Row="2">
                                    <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <Grid helper:EnterKeyTraversal.IsEnabled="True"
                                                  KeyboardNavigation.TabNavigation="Local">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="0" />
                                                    [...]
                                                    <ColumnDefinition Width="30" />
                                                </Grid.ColumnDefinitions>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="0" />
                                                    <RowDefinition Height="30" />
                                                    [...]
                                                    <RowDefinition Height="30" />
                                                </Grid.RowDefinitions>
                                            </Grid>
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel>
                                    <ItemsControl.ItemContainerStyle>
                                        <Style>
                                            <Setter Property="Grid.Column" Value="{Binding Path=DoW}" />
                                            <Setter Property="Grid.Row" Value="{Binding Path=HoD}" />
                                        </Style>
                                    </ItemsControl.ItemContainerStyle>
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <Border BorderThickness="0,0,1,1"
                                                    Style="{StaticResource ResourceKey=DefaultBorder}">
                                                <TextBox BorderThickness="0"
                                                         MaxLength="3"
                                                         Style="{StaticResource ResourceKey=EditableTextBoxWithoutWarningForTanks}"
                                                         TextAlignment="Center"
                                                         VerticalContentAlignment="Center"
                                                         IsTabStop="True">
                                                    <TextBox.TabIndex>
                                                        <MultiBinding Converter="{StaticResource ResourceKey=CustomerTankTabIndexConverter}">
                                                            <Binding Path="DoW" />
                                                            <Binding Path="HoD" />
                                                        </MultiBinding>
                                                    </TextBox.TabIndex>
                                                    <TextBox.Text>
                                                        <Binding Path="Value"
                                                                 Mode="TwoWay"
                                                                 NotifyOnValidationError="True"
                                                                 TargetNullValue=""
                                                                 UpdateSourceTrigger="PropertyChanged">
                                                            <Binding.ValidationRules>
                                                                <validator:Int32Validator Mandatory="True" 
                                                                                          Min="0" 
                                                                                          Max="100" />
                                                            </Binding.ValidationRules>
                                                        </Binding>

                                                    </TextBox.Text>
                                                </TextBox>
                                            </Border>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl> 
```

它有点“脏代码”但对于这个问题我没有找到任何其他解决方案:)

# php - 将 phpmailer_v5.1 use_gmail 与 paypal ipn 响应器相结合

> ID：13877397
> 
> 赞同：4
> 
> 时间：2012-12-14T11:04:01.390
> 
> 标签：php, phpmailer, paypal-ipn

我有两个脚本，想将它们组合在一行中。我已经用这条评论标记了这一行：'这里我需要堆栈溢出帮助'。

第一个脚本：这是 Paypal ipn 响应程序（[https://www.x.com/developers/PayPal/documentation-tools/code-sample/216623](https://www.x.com/developers/PayPal/documentation-tools/code-sample/216623)）：

```
<?php 
// STEP 1: Read POST data
// reading posted data from directly from $_POST causes serialization 
// issues with array data in POST
// reading raw POST data from input stream instead.

$raw_post_data = file_get_contents('php://input');
$raw_post_array = explode('&', $raw_post_data);
$myPost = array();

foreach ($raw_post_array as $keyval) {
  $keyval = explode ('=', $keyval);
  if (count($keyval) == 2)
     $myPost[$keyval[0]] = urldecode($keyval[1]);
}
// read the post from PayPal system and add 'cmd'
$req = 'cmd=_notify-validate';
if(function_exists('get_magic_quotes_gpc')) {
   $get_magic_quotes_exists = true;
} 
foreach ($myPost as $key => $value) {        
   if($get_magic_quotes_exists == true && get_magic_quotes_gpc() == 1) { 
        $value = urlencode(stripslashes($value)); 
   } else {
        $value = urlencode($value);
   }
   $req .= "&$key=$value";
}

// STEP 2: Post IPN data back to paypal to validate

$ch = curl_init('https://www.paypal.com/cgi-bin/webscr');
curl_setopt($ch, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_1);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $req);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 1);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($ch, CURLOPT_FORBID_REUSE, 1);
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Connection: Close'));

// In wamp like environments that do not come bundled with root authority certificates,
// please download 'cacert.pem' from "http://curl.haxx.se/docs/caextract.html" and set the directory path 
// of the certificate as shown below.
// curl_setopt($ch, CURLOPT_CAINFO, dirname(__FILE__) . '/cacert.pem');

if( !($res = curl_exec($ch)) ) {
    // error_log("Got " . curl_error($ch) . " when processing IPN data");
    curl_close($ch);
    exit;
}
curl_close($ch);

// STEP 3: Inspect IPN validation result and act accordingly

if (strcmp ($res, "VERIFIED") == 0) {
    // check whether the payment_status is Completed
    // check that txn_id has not been previously processed
    // check that receiver_email is your Primary PayPal email
    // check that payment_amount/payment_currency are correct
    // process payment
    // assign posted variables to local variables

    $item_name = $_POST['item_name'];
    $item_number = $_POST['item_number'];
    $payment_status = $_POST['payment_status'];
    $payment_amount = $_POST['mc_gross'];
    $payment_currency = $_POST['mc_currency'];
    $txn_id = $_POST['txn_id'];
    $receiver_email = $_POST['receiver_email'];
    $payer_email = $_POST['payer_email'];
} 
else if (strcmp ($res, "INVALID") == 0) {
    // log for manual investigation
}
?> 
```

第二个脚本：

这是 phpmailer_v5.1 use_gmail.php：

```
<?php
// example on using PHPMailer with GMAIL

include("class.phpmailer.php");
include("class.smtp.php"); // note, this is optional - gets called from main class if not already loaded

$mail             = new PHPMailer();
$body             = 'this is the body of the email';

$mail->IsSMTP();
$mail->SMTPAuth   = true;                  // enable SMTP authentication
$mail->SMTPSecure = "ssl";                 // sets the prefix to the servier
$mail->Host       = "smtp.gmail.com";      // sets GMAIL as the SMTP server
$mail->Port       = 465;                   // set the SMTP port

$mail->Username   = "yourname@gmail.com";  // GMAIL username
$mail->Password   = "password";            // GMAIL password

$mail->From       = "replyto@yourdomain.com";
$mail->FromName   = "Webmaster";
$mail->Subject    = "This is the subject";
$mail->AltBody    = "This is the body when user views in plain text format"; //Text Body
$mail->WordWrap   = 50; // set word wrap

$mail->MsgHTML($body);
$mail->AddReplyTo("replyto@yourdomain.com","Webmaster");
$mail->AddAttachment("/path/to/file.zip");             // attachment
$mail->AddAttachment("/path/to/image.jpg", "new.jpg"); // attachment
$mail->AddAddress("username@domain.com","First Last"); //here I need stackoverflow-help
$mail->IsHTML(true); // send as HTML

if(!$mail->Send()) {
    echo "Mailer Error: " . $mail->ErrorInfo;
} else {
    echo "Message has been sent";
}
?> 
```

我有`class.smtp`并且`class.phpmailer`在同一个文件夹中。use_gmail.php 已经过测试并且可以工作并发送电子邮件。但只有当我在这一行中写下目标电子邮件地址时：

```
$mail->AddAddress("username@domain.com","First Last"); 
```

我想给刚刚付款的客户发送邮件。如何从 Paypal 获取目的邮件地址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:17:52.000

在我们的电子商务配置中，我们使用了一种技巧来使真实用户的电子邮件（例如，他用来注册到我们客户数据库中的电子邮件）由 IPN 响应者发送。

当用户使用 Paypal 付款时，会向 Paypal 系统发送一个表单，其中包含有关付款金额、网址桥接等信息。这是一个例子：

```
<form name="autoPayFormSubmit" id="autoPayFormSubmit" method="post" action="https://securepayments.paypal.com/cgi-bin/acquiringweb"> 
    <input type="hidden" name="cmd" value="_hosted-payment" />
    <input type="hidden" name="subtotal" value="#SUBTOTAL#" />
    <input type="hidden" name="shipping" value="#SHIPCOST#" />
    <input type="hidden" name="business" value="#NUMBEROFBUSINESS#" />
    <input type="hidden" name="paymentaction" value="sale" />
    <input type="hidden" name="custom" value=" ## USE ME TO TRICK THE SYSTEM ##" />
    <input type="hidden" name="currency_code" value="EUR" />
    <input type="hidden" name="shopping_url" value="http://yourwebsite.domain/##" />
    <input type="hidden" name="cbt" value="Go back to the shopping" />
    <input type="hidden" name="notify_url" value="http://yourwebsite.domain/##" />
    <input type="hidden" name="cancel_return" value="http://yourwebsite.domain/##" />
    <input type="hidden" name="return" value="http://yourwebsite.domain/##" />
    <input type="submit" value="PAYPAL SAFE PAYMENT" onmouseover="this.style.backgroundColor='#CEE4F2';" onmouseout="this.style.backgroundColor='#EAF2F6';" style="font-weight: bold; font-size: 14px; padding: 10px 5px; border-radius: 10px; background: #EAF2F6 none no-repeat scroll 0 0; box-shadow: 3px 3px 5px #888; cursor:pointer;">
</form> 
```

“诀窍”是通过“自定义”输入发送注册到系统的用户的电子邮件以及其他有用的数据。例如，在我们的电子商务中，我们使用用户电子邮件、订单 ID 和其他“不妥协”值序列化一个数组。在它被序列化之后，我们使用我们自己创建的 crypt 类对其进行编码（或者您可以简单地使用 PHP 的 mcrypt 扩展）。

收到 IPN 响应后，您还将获得

```
$custom_encrypted_serialized_variables = $_POST['custom']; 
```

因此，您可以将步骤 3 中的 IPN 侦听器代码替换为以下内容：

```
...
...
// STEP 3: Inspect IPN validation result and act accordingly
if (strcmp ($res, "VERIFIED") == 0) {
    // check whether the payment_status is Completed
    // check that txn_id has not been previously processed
    // check that receiver_email is your Primary PayPal email
    // check that payment_amount/payment_currency are correct
    // process payment

    // assign posted variables to local variables
    $item_name = $_POST['item_name'];
    $item_number = $_POST['item_number'];
    $payment_status = $_POST['payment_status'];
    $payment_amount = $_POST['mc_gross'];
    $payment_currency = $_POST['mc_currency'];
    $txn_id = $_POST['txn_id'];
    $receiver_email = $_POST['receiver_email'];
    $payer_email = $_POST['payer_email'];
    $custom_encrypted_serialized_variables = $_POST['custom'];

    ...
    ...
} 
```

然后使用常用的 unserialize() 和解密函数对变量进行解密和反序列化。

连同其他有用的数据，您可以在贝宝结帐表单中使用“自定义”变量发送，发送客户的电子邮件，您就完成了！

PS：我知道这个解决方案不是最佳的，也许还有其他解决方案，但我发现这个解决方案快速有效。提示和更正表示赞赏！

# java - 如何在现有的 java 应用程序（不将其暴露给 GC）或我使用的第三方工具上使用我盒子的额外 RAM？

> ID：13877399
> 
> 赞同：1
> 
> 时间：2012-12-14T11:04:02.810
> 
> 标签：java, garbage-collection, memcached, terracotta, spymemcached

这些天来，我们有很多便宜的 RAM 可用，但我们不能使用它，因为它会导致大量垃圾收集并停止应用程序，这是不可取的。当我读兵马俑时；我觉得这解决了我的问题，因为我将在兵马俑上使用我的额外内存，并且该内存不会被垃圾收集。

是不是在我的应用程序中我可以创建一些分布式哈希图，而我放在这个哈希图上的数据不会计入我的 java 堆大小？但这将意味着代码更改。这看起来和 MemCached 一样。

有什么办法吗？这样无需对我现有的应用程序进行任何代码更改（或者如果我使用像 jmeter 这样的第三方）我可以使用这个额外的 RAM 吗？

如果不能用兵马俑；有可能以其他方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T11:15:20.573

看看[`ByteBuffer#allocateDirect(int)`](http://docs.oracle.com/javase/1.5.0/docs/api/java/nio/ByteBuffer.html#allocateDirect%28int%29)。它在堆外（因此在感兴趣的 CG 区域之外）分配一个字节缓冲区（您可以对其进行读写）。

它在后台所做的是通过对JVM 选项`com.sun.Unsafe`的一些额外检查来委托调用。`-XX:MaxDirectMemorySize`表示可以使用`-XX:MaxDirectMemorySize`多少直接内存进行直接分配。（默认为 64MB IIRC）。

这就是 Ehcache 和 Terracota 为避免大量 GC 而做的事情。

但是，这并不意味着您不必更改应用程序即可使用它。注意，分配的字节缓冲区只是内存中的一个连续区域，除了读/写位置的值之外没有其他接口。因此，要通过`Map`接口访问它，您必须自己实现此映射。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-01T13:18:35.727

Terracotta 有一个很好的特性，叫做[BigMemory](http://terracotta.org/documentation/bigmemorygo)。它允许将数据存储在 JVM 堆之外，以访问计算机上的额外内存。它可以在您的 JVM 之外使用数十/数百 GB 的数据。

您现有的 ehcache 调用不会更改任何代码。它在 ehcache.xml 和 JVM 启动参数 (-XX:MaxDirectMemorySize) 中的唯一配置更改。

在配置中，您可以为缓存明确指定堆外大小：

```
<cache name="MyCache" ...
       maxBytesLocalOffHeap="5G"
       ...
</cache> 
```

来自[兵马俑文档](http://terracotta.org/documentation/bigmemorygo/configuration/cache-size)：

> 要将堆外用作数据层，缓存必须将 overflowToOffHeap 设置为“true”。如果 CacheManager 有一个配置为使用堆外的池，则所有缓存的 overflowToOffHeap 属性自动设置为“true”。在这种情况下，您可以通过将其 overflowToOffHeap 属性显式设置为“false”来防止特定缓存溢出到堆外。

# c# - 为什么调试 ASP.net 可能会损害您的计算机？

> ID：13877403
> 
> 赞同：0
> 
> 时间：2012-12-14T11:04:14.317
> 
> 标签：c#, asp.net, visual-studio-2010, visual-studio, debugging

当我尝试附加该`w3wp.exe`进程以调试 asp.net 进程时，弹出窗口提醒我这“可能会损害您的计算机”。

![在此处输入图像描述](../Images/93374aca991a012da73385e9a28f77f3.png)

我只是想知道为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T11:07:42.727

您是否有机会不以管理员身份运行 Visual Studio？Visual Studio 需要以管理员身份运行才能附加到 ASP.NET 工作进程而不会弹出该警告。

编辑：看起来这个问题在[这个 SO 帖子中得到了回答](https://stackoverflow.com/questions/1414769/turn-off-visual-studio-attach-security-warning-when-debugging-iis)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T11:23:14.653

IIRC，一些较旧的木马/病毒使用调试附件作为连接其他程序/服务的手段。

现在你会收到警告。这里的重点不在于“损害您的计算机”一词。它要求您检查列出的过程是否是您所期望的。想象一下，当您只是空闲时，突然要求调试 chrome.exe 或 skype.exe。那肯定让我吓坏了。

# c# - What is wrong on this Decimal.TryParse?

> ID：13877405
> 
> 赞同：7
> 
> 时间：2012-12-14T11:04:28.503
> 
> 标签：c#, tryparse

Code :

```
Decimal kilometro = Decimal.TryParse(myRow[0].ToString(), out decimal 0); 
```

some arguments are not valid?

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-14T11:05:21.057

`out decimal 0` is not a valid parameter - `0` is not a valid variable name.

```
decimal output;
kilometro = decimal.TryParse(myRow[0].ToString(), out output); 
```

By the way, the return value will be a `bool` - from the name of the variable, your code should probably be:

```
if(decimal.TryParse(myRow[0].ToString(), out kilometro))
{ 
  // success - can use kilometro
} 
```

Since you want to return `kilometro`, you can do:

```
decimal kilometro = 0.0; // Not strictly required, as the default value is 0.0
decimal.TryParse(myRow[0].ToString(), out kilometro);

return kilometro; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-14T11:07:58.747

Well, the `decimal.TryParse` returns a `bool` type - so you need to do something like:

```
Decimal kilometro;

// if .TryParse is successful - you'll have the value in "kilometro"
if (!Decimal.TryParse(myRow[0].ToString(), out kilometro)
{ 
   // if .TryParse fails - set the value for "kilometro" to 0.0
   kilometro = 0.0m;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-14T11:09:56.933

The correct usage of the TryParse statement is given below. You must declare the decimal first and then pass it into the TryParse method. If the TryParse succeeds, `kilometro` will be the new value, otherwise it will be zero. I believe that was your desired outcome.

```
decimal kilometro = 0;
if (Decimal.TryParse(myRow[0].ToString(), out kilometro))
{
   //The row contained a decimal.
}
else {
   //The row could not be parsed as a decimal.
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-11-07T14:29:43.353

Just as an additional answer, you can now declare out parameters inline.

```
if (decimal.TryParse(myRow[0].ToString(), out decimal outParamName))
{
    // do stuff with decimal outParamName
} 
```

# android - 从 DatePicker 获取星期几和月份名称

> ID：13877406
> 
> 赞同：1
> 
> 时间：2012-12-14T11:04:32.843
> 
> 标签：android, datepicker, timepicker

我从以下位置获取日期和`DatePicker`时间`TimePicker`：

```
int dateofmonth = date.getDayOfMonth();
int month = date.getMonth() + 1;
int year = date.getYear();
int hour = time.getCurrentHour();
int minutes = time.getCurrentMinute(); 
```

但我想要这种格式的日期和时间：

> **2012 年 12 月 14 日星期五 - 下午 4:30**。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:16:42.797

随心所欲地形成它....

```
public void SetMyCustomFormat()
{
   // Set the Format type and the CustomFormat string.
   dateTimePicker1.Format = DateTimePickerFormat.Custom;
   dateTimePicker1.CustomFormat = "put your formate here ";
} 
```

寻求更多帮助

[http://msdn.microsoft.com/en-us/library/system.windows.forms.datetimepicker.customformat.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.datetimepicker.customformat.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:09:26.637

您可以尝试使用`SimpleDateFormat`，请参阅[SimpleDateFormat](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html) 在示例部分下是代表您所需格式的日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T11:11:06.233

如果您只需要`Date`在当前语言环境中格式化对象，您可以使用[`DateFormat`](http://developer.android.com/reference/java/text/DateFormat.html#getDateTimeInstance%28%29)：

```
Calendar date = Calendar.getInstance();
date.set(Calendar.YEAR, picker.getYear());
...
String str = DateFormat.getDateTimeInstance().format(date); 
```

该方法`getDateTimeInstance()`返回当前语言环境的首选显示，这对于国际化您的应用程序是可取的，因为不同的语言环境对组件的顺序有不同的偏好。例如：

```
US:    Friday, December 14,2012 - 4:30 PM
Italy: Venerdì 14 Dicembre 2012, 16:30 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T11:22:25.430

您需要先从日历中创建一个日期对象，您可以执行以下操作：

```
Calendar cal= Calendar.getInstance();
cal.setTime(new Date());
int dateofmonth = date.getDayOfMonth();
int month = date.getMonth();
int year = date.getYear();
cal.set(dateofmonth, month, year); 
```

现在创建一个 SimpleDateFormat 对象，使用您想要的格式，并使用该格式格式化日期，通过

```
String formattedDate=simpleDateFormat.format(cal.getTime()); 
```

# xcode - 在opencv中获取与聚焦对象的距离

> ID：13877416
> 
> 赞同：0
> 
> 时间：2012-12-14T11:05:07.397
> 
> 标签：xcode, opencv

我已经使用 OpenCV Framework 检测到了圆圈。现在我想计算与检测到的圆的距离。请告诉我如何做到这一点。任何想法将不胜感激。提前致谢 。如果我的问题不清楚，请告诉我。

# .net - 编写 .net 4 代码以编译为桌面和 Web 应用程序

> ID：13877417
> 
> 赞同：0
> 
> 时间：2012-12-14T11:05:13.357
> 
> 标签：.net

是否可以在 .net 4 中编写代码并对其进行编译以同时创建 Web 和桌面应用程序？

我必须支持应用程序的 Web 版本和桌面版本，并且想编写一个版本的代码并将其编译为可在 Web 上运行的 Web 版本（浏览器和 Web 服务器）以及可以运行的桌面应用程序非基于 Web 的客户端的桌面。这两个应用程序应该或多或少地做相同的事情和相同的界面。

我可以理解会有限制，但有可能吗？

如果您有任何教程，也请发布任何链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:10:18.890

这完全取决于您的应用程序的性质。如果您需要构建一个 Windows 窗体应用程序，那么显然这不能直接转换为 Web 应用程序。

您也许可以使用 Silverlight 创建一个在桌面和浏览器中都运行的应用程序。[在 MSDN 上](http://msdn.microsoft.com/en-us/silverlight/bb187401.aspx)阅读有关Silverlight 的更多信息。

另一种选择是编写一个 n 层应用程序；一个用于 Web 的 UI 和一个用于共享业务逻辑和数据的窗口的单独 UI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:08:22.003

您可以使用 3 个项目创建一个*解决方案*：

*   1个用于核心对象、逻辑、数据访问等的类库
*   1个用于Windows UI的windows-exe
*   1 个用于 Web UI 的 Web 应用程序

但是，尝试将 Web 和 Windows UI 硬塞到同一个项目中是不切实际的：项目结构和构建输出在两者之间必然不同

# javascript - 如何正确使用on方法？

> ID：13877419
> 
> 赞同：1
> 
> 时间：2012-12-14T11:05:14.263
> 
> 标签：javascript, jquery, html, dom

```
jQuery('#sbox-window').on('change', '#filter-by-site', function(){
    console.log(jQuery(this).val());
    console.log('change');
});

<div id="sbox-window">
    <div id="sbox-content">
        <p>
            <select id="filter-by-site">
                <option value="null">Filter cameras by site</option>
                <option value="1">Site 1</option>
                <option value="2">Site 2</option>
                <option value="3">Site 3</option>
            </select>
        </p>
    </div>
</div> 
```

什么都没有发生...弃用`live()`一切正常。问题出在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T11:15:41.930

实际上这有效。您是否有可能将事件附加到作为 Jquery 模板一部分的“sbox-window”或动态生成 div 的其他方式？根据实现，“sbox-window” div 在文档中不存在，准备好了，所以你需要冒泡到更高的 Dom-Object --- 文档的最坏情况......但我不会建议...这也是“现场”有效的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T11:10:38.543

采用：

```
jQuery(document).on('change', '#sbox-window #filter-by-site', function(){
    console.log(jQuery(this).val());
    console.log('change');
}); 
```

因为当你这样做`jQuery('#sbox-window')`的时候还没有这样的元素（因为 DOM 是按顺序构造的并且你定义了更低的块），所以你`on`为空元素数组调用方法，当然没有效果。

如前所述，还有另一种选择：

```
$(document).ready(function() {
   $('#sbox-window').on('change', '#filter-by-site', function(){
       console.log($(this).val());
       console.log('change');
   });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T11:10:37.183

这对我来说可以：

[演示](http://jsfiddle.net/yeqz6/2/)

该`on()`方法已添加到 jQuery 版本 1.7 中。请确保您已包含足够新版本的 jQuery。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T11:12:30.960

也许在你使用委托的时候，`#sbox-window`它还没有在 DOM 中。将其包装在就绪回调函数中：

```
$(function(){
   jQuery('#sbox-window').on('change', '#filter-by-site', function(){
       console.log(jQuery(this).val());
       console.log('change');
   });
}); 
```

.live() 使用文档作为委托。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T11:13:16.030

它工作正常，请参阅一个[**工作示例**](http://jsfiddle.net/AtncT/)，因此您似乎缺少的是在 DOM 就绪处理程序上执行您的查询代码。

```
$(document).ready(function() {
   $('#sbox-window').on('change', '#filter-by-site', function(){
       console.log($(this).val());
       console.log('change');
   });
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-14T11:14:20.400

您可以在元素上使用 $.bind 。

或者，更好的是，您可以在不使用 jquery 的情况下做到这一点，只需：

```
document.querySelector('#filter-by-site').addEventListener('change', changeHandler);

function changeHandler(e) {
    console.log('change');
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-14T11:18:36.377

你也可以使用这种方式：

```
jQuery(document).on('change', '#filter-by-site', function(){
   console.log(jQuery(this).val());
   console.log('change');
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-14T11:23:17.107

使用最新版本的 jquery 库，它工作正常

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

# mysql - MySQL按掩码选择

> ID：13877423
> 
> 赞同：1
> 
> 时间：2012-12-14T11:05:36.617
> 
> 标签：mysql, select, match

有一个 MySQL 表，内容如下：

```
id mask
1  abcd
2  vdskfw
...
212421 dijhaihwfaw 
```

我有一个传入字符串，例如**abcd** efghijkl，我需要检查它是否以表中的任何匹配项开头。我可以通过多个查询来做到这一点：

```
SELECT * FROM table WHERE mask = 'abcdefghijkl'; 
```

如果不匹配：

```
SELECT * FROM table WHERE mask = 'abcdefghijk';
SELECT * FROM table WHERE mask = 'abcdefghij';
SELECT * FROM table WHERE mask = 'abcdefghi'; 
```

...等等。

但也许有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T17:06:03.720

这些中的任何一个都可以满足您的要求。

```
SELECT * FROM table
WHERE locate(mask, 'abcdefghijkl') = 1; 
```

或者

```
SELECT * FROM table
WHERE 'abcdefghijkl' rlike concat('^', mask) 
```

或者

```
SELECT * FROM table
WHERE 'abcdefghijkl' like concat(mask, '%') 
```

[演示](http://sqlfiddle.com/#!2/dd970/19)

# varnish - 为什么在 Varnish 的请求中添加 Cookie 时 beresp.ttl 设置为 0？

> ID：13877427
> 
> 赞同：0
> 
> 时间：2012-12-14T11:06:24.370
> 
> 标签：varnish, http-caching, varnish-vcl

好的，所以我正在尝试让 Varnish 正常工作，但我有一个无法解释的奇怪行为（可能是由于缺乏理解）。

这是我正在尝试做的事情：

```
GET http://scm.dev:6081/articles
If-None-Match: "50a0794aaca51fce202e86da428b7dca9b4bbff93" 
```

我得到：

```
HTTP/1.1 200 OK
Age: 3                                    // Correctly using a cached result
Content-Length: 3878
Content-Type: application/json
Date: Fri, 14 Dec 2012 10:59:34 GMT
Via: 1.1 varnish
X-Cacheable: YES                          // It is correct
Cache-Control: max-age=10, public, s-maxage=20
Etag: "50a0794aca51fce202e86da428b7dca9b4bbff93"
Vary: Accept,Accept-Encoding 
```

现在，如果我在请求中添加 Cookie：

```
GET http://scm.dev:6081/articles
If-None-Match: "50a0794aaca51fce202e86da428b7dca9b4bbff93"
Cookie: foo=bar 
```

我得到一个非缓存的响应和一个不可缓存的警告：

```
HTTP/1.1 200 OK
Age: 0                                    // Always set to 0
Content-Length: 3878
Content-Type: application/json
Date: Fri, 14 Dec 2012 10:59:34 GMT
Via: 1.1 varnish
X-Cacheable: NO:Not Cacheable             // It is not correct
Cache-Control: max-age=10, public, s-maxage=20
Etag: "50a0794aca51fce202e86da428b7dca9b4bbff93"
Vary: Accept,Accept-Encoding 
```

如果检查后面的 vcl 配置，`X-Cacheable: NO:Not Cacheable`如果 beresp.ttl 小于或等于 0，则设置标头。

为什么？

我还假设一个`Cookie`返回 a的请求`Cache-Control: public`应该被缓存，只要后端承担正确设置`public`参数的责任。

我会假设在`X-Cacheable: NO:Got Session`使用 Cookie 发出请求时会设置 ，但它甚至没有更进一步。

启动 varnish 守护进程的命令行：

`/usr/sbin/varnishd -P /var/run/varnishd.pid -a :6081 -T 192.168.1.100:6082 -f /etc/varnish/custom.vcl -S /etc/varnish/secret -s malloc,256m`

这是我的`custom.vcl`

```
backend scm {
.host = "scm.dev";
.port = "80";
}

sub vcl_recv {
    set req.http.Surrogate-Capability = "abc=ESI/1.0";
}

sub vcl_fetch {
    if (beresp.http.Surrogate-Control ~ "ESI/1.0") {
        unset beresp.http.Surrogate-Control;
        set beresp.do_esi = true;
    }

    # Varnish determined the object was not cacheable
    if (beresp.ttl <= 0s) {
        set beresp.http.X-Cacheable = "NO:Not Cacheable";

    # You don't wish to cache content for logged in users
    } elsif (req.http.Cookie ~ "(foo)") {
        set beresp.http.X-Cacheable = "NO:Got Session";

        return(hit_for_pass);
    # You are respecting the Cache-Control=private header from the backend
    } elsif (beresp.http.Cache-Control ~ "private") {
        set beresp.http.X-Cacheable = "NO:Cache-Control=private";

        return(hit_for_pass);
    # Varnish determined the object was cacheable
    } else {
        set beresp.http.X-Cacheable = "YES";
    }

    return(deliver);
}

sub vcl_hit {
    if (req.request == "PURGE") {
        set obj.ttl = 0s;
        error 200 "Purged";
    }
}

sub vcl_miss {
    if (req.request == "PURGE") {
        error 404 "Not purged";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:15:07.127

如果存在 cookie，Varnish 不会按照[设计从缓存中获取任何请求。](https://www.varnish-software.com/blog/cookie-monster)通常 cookie 表明响应对于特定用户是唯一的。

如果您不关心 cookie，或者如果您想保留特定的 cookie，您可以完全`unset req.http.Cookie;`参与`vcl_recv()`

```
if(req.http.Cookie) {
  if (req.http.Cookie !~ "(important_cookie|php_session)" ) {
    remove req.http.Cookie;
  }
} 
```

# php - wordpress 自定义分页

> ID：13877428
> 
> 赞同：0
> 
> 时间：2012-12-14T11:06:31.013
> 
> 标签：php, wordpress, pagination

我做了一个简单的 wpquery 来获取所有事件。然后使用“如果”条件检查活动是否从今天开始，如果是，则显示标题帖子。我的问题是分页，因为我不知道根据循环结果进行分页。

```
 if ( get_query_var('paged') ) { $paged = get_query_var('paged'); }
 elseif ( get_query_var('page') ) { $paged = get_query_var('page'); }
 else { $paged = 1; }

 $args = array(
'post_type' => 'events',
'posts_per_page' => '5',
'order' => 'ASC',
'paged' => $paged   
 );

 query_posts($args); 

if ( have_posts() ) while ( have_posts() ) : the_post();
    $event_start = get('event_start');

    // if the event start is today show the title post
    if($event_start == date('d.m.Y')){
       the_title();
    }
endwhile;
// PROBLEM: show the pagination for all events
wp_pagenavi(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:29:03.207

我会使用[WP_Query](http://codex.wordpress.org/Class_Reference/WP_Query)并使用[自定义字段参数](http://codex.wordpress.org/Class_Reference/WP_Query#Custom_Field_Parameters)来仅提取相关结果。这样分页将直接工作，您将不会检索和循环不需要的帖子。

作为旁注，您可能还会发现[此答案](https://wordpress.stackexchange.com/questions/1753/when-should-you-use-wp-query-vs-query-posts-vs-get-posts)对您为什么不应该使用 query_posts 很有用。

# php - Joomla 使用 JUtility::sendMail 发送邮件发件人电子邮件问题

> ID：13877432
> 
> 赞同：0
> 
> 时间：2012-12-14T11:06:49.217
> 
> 标签：php, joomla, sendmail

我在 Joomla JUtility::sendMail 函数中遇到了一个问题

Joomla文档中提到的函数参数是[这样的](http://docs.joomla.org/JUtility/sendMail)

问题是我无法设置发件人电子邮件（发件人电子邮件）。当我设置发件人电子邮件并重播到电子邮件时。邮件中显示的重播电子邮件是来自 joomla 管理员配置电子邮件的邮件。当我将另一封电子邮件设置为重播或发件人电子邮件时，每次使用来自 joomla 管理配置的电子邮件时，它都没有正确发送。

我从谷歌得到了一个[几乎相同](http://forum.joomla.org/viewtopic.php?f=579&t=727297)的参考，但我试过这个它不起作用。

我正在使用 Joomla 1.7

我试过了

```
$your_email //can be array but here string one email
$your_name //name i will work fine
$user_email //admin email
$subject //subject
//last two argument is reply to and replay name Its showing inside mail but click on replay it will admin config email.
JUtility::sendMail($your_email, $your_name, $user_email, $subject, $fcontent,1,NULL,NULL,NULL,$your_email,$your_name); 
```

任何帮助将不胜感激..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T14:17:15.357

像这样试试

```
$mailer =& JFactory::getMailer(); 
```

//添加发件人信息。

```
$sender = array( 
    $your_email,
    $your_name
);

$mailer->setSender($sender); 
```

//添加收件人。$recipient = $user_email;

```
$mailer->addRecipient($recipient); 
```

//添加主题

```
$mailer->setSubject('Your subject string'); 
```

//添加正文

```
$mailer->setBody($fcontent);

$send =& $mailer->Send();

if ( $send !== true ) {
    echo 'Error sending email: ' . $send->message;
} else {
    echo 'Mail sent';
} 
```

完成。有关更多信息，请参阅此链接[从扩展发送电子邮件](http://docs.joomla.org/Sending_email_from_extensions)。

我认为它可以帮助你。

# java - Java Logger 不写入文件

> ID：13877435
> 
> 赞同：3
> 
> 时间：2012-12-14T11:07:09.163
> 
> 标签：java, logging, io

我正在尝试将 Logger 配置为写入应用程序配置文件夹中的文件，但我不知道该怎么做，这是我用来在程序启动时配置日志输出的函数：

```
private void ConfigureLogger(){
    Logger logger = Logger.getLogger(FormLogin.class.getName());

    try{
        FileHandler handler = new FileHandler(getConfigurationFolder()+"\\application.log", 10, 1, true);

        logger.addHandler(handler);
    }
    catch(IOException e){

    }
    logger.log(Level.SEVERE, "test message");
} 
```

application.log 文件已创建，但测试日志并未写入其中，而是写入控制台应用程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T11:20:18.743

你能试试：

```
FileHandler handler = new FileHandler("D:/temp/application.log", 8096, 1, true); 
```

## 参数：

*   pattern - 命名输出文件的模式
*   limit - 写入任何一个文件的最大字节数
*   count - 要使用的文件数
*   append - 指定附加模式

# java - android外部jar问题

> ID：13877437
> 
> 赞同：3
> 
> 时间：2012-12-14T11:07:14.083
> 
> 标签：java, android, jar, dex

为了寻找上传图片的方法，我按照这个简单的解释添加了很多外部 JAR：[using-multipartentity-in-android-applications](http://blog.tacticalnuclearstrike.com/2010/01/using-multipartentity-in-android-applications/)
但是当我尝试共同编译代码时，我收到了一个错误：

```
[2012-12-14 11:37:55 - Dex Loader] Unable to execute dex: Multiple dex files define Lorg/apache/http/ConnectionClosedException; 
```

我以前从未使用过外部库。有人可以告诉我如何解决吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T11:12:27.393

可以在多个库中定义相同的类/类。这就是您收到此错误的原因。您需要检查哪些类重叠并通过重新组织或删除一些外部库来解决问题。

这也可能是一个日食问题。尝试清理您的项目。

请参阅以下线程：

[无法执行dex：多个dex文件定义了Lcom/myapp/R$array；](https://stackoverflow.com/questions/7870265/unable-to-execute-dex-multiple-dex-files-define-lcom-myapp-rarray)

[无法执行dex：多个dex文件定义](https://stackoverflow.com/questions/8059719/unable-to-execute-dex-multiple-dex-files-define)

[构建 apk 时出错 - “多个 dex 文件定义 Lcom/google/ads/Ad”](https://stackoverflow.com/questions/8685864/error-when-building-apk-multiple-dex-files-define-lcom-google-ads-ad?lq=1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T09:50:18.730

如果你输入

```
org.apache.http.auth.AUTH auth; 
```

在您的代码中的某处，然后选择该`AUTH`部分，右键单击它并点击声明 > 工作区，您将在其中声明该类。它在 android.jar 中，但在我的项目中，它也在 httpclient-4.xxjar 的两个单独版本中（一个已作为项目另一部分的依赖项添加）。

删除早期版本的 httpclient-4.xxjar 似乎为我解决了这个问题；您可能会发现您的项目中包含多个声明此类（android.jar 除外）的库，删除一个或多个库也会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T01:07:07.770

右键单击 src 和 gen 文件夹，然后选择 Build Path > Remove from Build Path。然后右键单击>构建路径>用作源文件夹

# java - 由于无法读取源文件，因此未构建项目

> ID：13877442
> 
> 赞同：3
> 
> 时间：2012-12-14T11:07:37.707
> 
> 标签：java, android, eclipse

我正在尝试构建一个开源 android 项目，但在构建开始后，我收到此错误：

由于 `/android/build/tools/droiddoc/test/generics/src/com/android/generics/TestComparable.java`
无法读取源文件，因此未构建项目

我尝试了所有找到的方法，**Refresh > Clean > build / Restart > refresh > Clean > build**。

我知道这可能是一个编码问题，因为该文件可能来自存储库，并且存储在 Windows 或其他东西上。

如果您知道解决方案或可能的解决方案，请提供帮助，我没有想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T12:33:41.020

“最常见的原因是文件中的编码不兼容。当我得到一个带有 cp1252（或任何窗口编码）的文件时，我在 linux 上有时会得到这些”。

尝试将 Eclipse 的编码设置为[utf8](https://stackoverflow.com/a/2708219/1903960)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-07T10:56:48.337

我打开了 Project > Properties > Resources > Linked Resources 并删除了带有错误标记的资源，因为这些链接无论如何都被破坏了。这解决了问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-13T12:35:30.333

对我来说，有一个与这里提到的不同的解决方案。

我拒绝了，我导入了一个具有 .project 文件的项目，并且我的 eclipse 版本读取某些文件的方式出现了一些错误。包名和文件有一点！黄色背景的符号。

解决方案是删除包。明明做好备份。但是在大多数情况下，文件和包都被删除了。相反，eclipse 刷新并且所需的文件在那里。有时我不得不点击刷新 (F5)，有时我不得不恢复文件。

我发现最好删除这些包，因为那是 eclipse 读取数据的地方。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-10T10:28:22.680

Project -> Clean... 当找不到已删除的文件时为我工作。

# string - FoxPro 函数确定变量是字符串还是数字字符串

> ID：13877444
> 
> 赞同：2
> 
> 时间：2012-12-14T11:07:40.663
> 
> 标签：string, function, foxpro, visual-foxpro, digits

我正在寻找一个类似于 PHP 函数[is_numeric()](http://php.net/manual/en/function.is-numeric.php)的 Visual FoxPro 函数。
我找到[了这个](https://stackoverflow.com/questions/7563907/function-to-know-that-a-variable-is-string-or-number-on-foxpro)，但是我不能使用`VARTYPE`或者`TYPE`因为变量总是一个只包含数字的字符串。

我找到`ISDIGIT()`了功能，但手册说它只检查第一个字符。

> 确定指定字符表达式的最左边字符是否为数字（0 到 9）。
> 
> ```
>  ISDIGIT(cExpression) 
> ```
> 
> **参数**
> *cExpression*
> 
> 指定 ISDIGIT( ) 测试的字符表达式。cExpression 中第一个字符之后的任何字符都将被忽略。

我会使用正则表达式对象创建自己的函数`VBScript.RegExp`

```
FUNCTION isNumeric( tcValue )
    LOCAL oRE
    oRE = CreateObject("VBScript.RegExp")
    oRE.Pattern = '^[0-9]+$'
    RETURN oRE.test( tcValue )      
ENDFUNC

? isNumeric( '123' ) 
```

但是，FoxPro 是否为此提供了任何功能？
我只是俯瞰吗？

同样`ISALHPA()`决定字符表达式中最左边的字符是否是字母的。我想检查变量是否只包含字母。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T11:53:22.183

您可以像这样创建自己的函数。

```
FUNCTION IsAllDigits
    LPARAMETERS tcSearched, tcOptionalSearch

    * tcSearched = the string of characters to test.
    * tcOptionalSearch = optional, additional characters to allow.

    LOCAL lcSearch
    m.lcSearch = "01234567989" + IIF(VARTYPE(m.tcOptionalSearch) = "C", m.tcOptionalSearch, "")

    LOCAL lcRemaining
    m.lcRemaining = CHRTRAN(m.tcSearched, m.lcSearch, "")

    RETURN ( LEN(m.lcRemaining) = 0 )
ENDFUNC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T09:00:38.573

```
FUNCTION ISNUMERIC
    LPARAMETERS cVal
    LOCAL llNumeric, lnLen, lcChr, lnDecs, lnVal

    llNumeric = VARTYPE(cVal) = "N"      && Donkey has sent a numeric value
    lnDecs = 0

    DO CASE
        CASE llNumeric
        CASE VARTYPE(cVal)<>"C"          && Not a character
        OTHERWISE
            cVal = ALLTRIM(cVal)         && Trim spaces
            lnLen = LEN(cVal)            && How many characters
            llNumeric = .T.              && Assume
            i = 0
            DO WHILE llNumeric AND i<lnLen
                i = i+1
                lcChr = SUBSTR(cVal,i,1)        && Get next char
                    lnVal = VAL(lcChr)
                DO CASE
                CASE lcChr = "0"                && Allowed
                CASE lnVal>0                    && 1 - 9 OK
                CASE INLIST(lcChr, "-", "+")    && Allowed but ONLY at the start
                    llNumeric = i = 1
                CASE lcChr = "."                && Decimal point but ONLY one
                    lnDecs = lnDecs+1
                    llNumeric = lnDecs = 1
                OTHERWISE
                    llNumeric = .F.
            ENDCASE
        ENDDO
    ENDCASE
    RETURN llNumeric
ENDFUNC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T16:04:56.720

这可能适用于 ISDIGIT() 或 ISALPHA()。

```
Function IsAllDigits(myValue)
   lReturn = .t. 
   FOR i = 1 TO LEN(myvalue)
      IF !ISDIGIT( SUBSTR(myValue, i, 1)  )
         lReturn = .f.
         EXIT
      ENDIF
   ENDFOR
   RETURN lReturn
ENDFUNC 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-03T12:14:05.990

一个班轮怎么样？

```
Function IsNumeric
Lparameters pString
Return  m.pString == Chrtran(m.pString, Chrtran(m.pString, "0123456789", ""), "")
EndFunc 
```

您可以将任何其他有效字符改为“0123456789”，如“.”。或者 ”，”

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-16T12:38:37.730

测试字符串是否为数字更简单：

*   如果 String="123" => val('String')>0
*   如果 String="AB123" => val('String')=0

就这样...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-01T08:28:38.027

仅使用 Visual Fox Pro，您可以执行以下操作：

```
FUNCTION is_numeric(var_name)
    error_trigger=.f. &&** first initialization 
    &&** evaluate("any_char") will generate an error so I'm using TRY-CATCH-ENDTRY  
    TRY  
      EVALUATE(var_name)
    CATCH &&** evaluate() generates an error then the string is character
      WAIT WINDOW "character"   
      error_trigger=.t. &&** there was an error returned by evaluate()
      EXIT  && stop and jump after ENDTRY
    ENDTRY 
    IF error_trigger=.f. &&** there was no error returned by evaluate() then the string was numeric
       WAIT WINDOW "numeric"
    ENDIF 
ENDFUNC 
```

然后调用函数：
is_numeric("333") 将显示： numeric
is_numeric("aaa") 将显示： character
is_numeric("333a333") 将显示： character
希望对您有所帮助

# magento - Magento 可以进行这种类型的促销吗？

> ID：13877446
> 
> 赞同：0
> 
> 时间：2012-12-14T11:07:40.327
> 
> 标签：magento, magento-1.5

在 1.5.x 中，我花了两个多小时试图找出使这种提升工作的逻辑。**当您购买 A 时，我想以 10 美元的价格出售 B。**

当您将 A 和 B 放在同一个购物车中时，我正在使用购物车价格规则 10 美元。我尝试了几种不同的规则组合，最接近的是：每个规则组合 1 = 10 美元。每个 2 = 20 美元，依此类推。但是当我将 3 A 和 2 B（或 3 B 和 2 A）添加到购物车时，我可以减 30 美元，而显然应该是 20 美元。

**我如何让它发挥作用，以便每增加 PAIR PAIR 物品可享受 $10 的折扣？**

此外，如果可能使用 NATIVE 容量，我希望 10 美元的折扣仅适用于第 5 对。但在这一点上，这是次要需求。

我不知道还能尝试什么。请指教！

# c++ - VS2012 中的 is_directory() 对偶数目录返回 false

> ID：13877454
> 
> 赞同：0
> 
> 时间：2012-12-14T11:07:55.360
> 
> 标签：c++, visual-studio-2012, c++-tr2

我正在运行一个包含多个子目录的目录。我正在使用 recursive_directory_iterator。我有目录 asr->collections->(多个目录和几个文本文件)

```
#include <iostream>
#include <filesystem>
#include <conio.h>

using namespace std::tr2::sys;

int main () {
std::string path_;
std::cout << " Enter the path ";
std::cin >> path_;

auto dir_path = path(path_);

for (auto it = directory_iterator(dir_path); it != directory_iterator(); ++it)
{
    const auto& file = it->path();
    std::cout << " path : " << file << std::endl;

    if (is_directory (status(it->path()))) 
        std::cout << " It is a directory. " << std::endl;
    else 
        std::cout << " It is not a directory. " << std::endl;
}
_getch();
return 0;
} 
```

我知道我之前已经发布了这个。这是一个愚蠢的错误，我改变了它。但它仍然是错误的。我遇到的问题是 is-directory 对所有内容都返回 false。我是不是用错了。我已经链接了下面的 MSDN URL。

我安装了 boost 并运行了代码。有效 ！升压源

```
#include <iostream>
#include <boost\filesystem.hpp>
#include <conio.h>

using namespace boost::filesystem;

int main () {
std::string path_;
std::cout << " Enter the path ";
std::cin >> path_;

auto dir_path = path(path_);

for (auto it = directory_iterator(dir_path); it != directory_iterator(); ++it)
{
    const auto& file = it->path();
    std::cout << " path : " << file << std::endl;

    if (is_directory (status(it->path()))) 
        std::cout << " It is a directory. " << std::endl;
    else 
        std::cout << " It is not a directory. " << std::endl;
}
_getch();
return 0;
} 
```

[http://msdn.microsoft.com/en-us/library/hh874754.aspx](http://msdn.microsoft.com/en-us/library/hh874754.aspx)

另外，我可以使用 boost 文件系统文档作为教程，因为没有关于什么是什么以及如何使用它的好的文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T12:48:55.183

```
if (is_directory (status(dir_path)) ) 
```

是的，你用错了。尝试测试文件，而不是 dir_path。您已经知道 dir_path 是一个目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T06:01:02.297

好的，在我使用第一次重大更新更新 Visual Studio 后，问题已得到解决。

# git - 当代码中有 TODO 时如何禁用 git push？

> ID：13877469
> 
> 赞同：13
> 
> 时间：2012-12-14T11:08:33.713
> 
> 标签：git, push, todo

我们的团队遇到了一个问题，我们决定检查是否有方法或 git 命令来拒绝代码中存在 TODO 的 git push。有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-17T10:33:26.413

不可能在 github 中使用 pre-receive 钩子，所以我们在客户端使用 pre-commit 钩子：http: [//git-scm.com/book/en/Customizing-Git-Git-Hooks#Client-Side-挂钩](http://git-scm.com/book/en/Customizing-Git-Git-Hooks#Client-Side-Hooks)

我们的预提交脚本（基于[http://mark-story.com/posts/view/using-git-commit-hooks-to-prevent-stupid-mistakes](http://mark-story.com/posts/view/using-git-commit-hooks-to-prevent-stupid-mistakes)）如下所示：

```
#!/bin/sh

for FILE in `git diff-index -p -M --name-status HEAD -- | cut -c3-` ; do
    if [ "grep 'TODO' $FILE" ]
    then
        echo $FILE ' contains TODO'
        exit 1
    fi
done
exit 
```

我们在我们的控制版本系统下有这个脚本，并在 .git/hooks 中创建一个符号链接

谢谢您的帮助 ：）

编辑：由于 if 语句中的 grep 行为，我们需要编辑我们的脚本：

```
#!/bin/sh

for FILE in `git diff --name-only --cached`; do
    grep 'TODO' $FILE 2>&1 >/dev/null
    if [ $? -eq 0 ]; then
        echo $FILE ' contains TODO'
        exit 1
    fi
done
exit 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T11:11:51.400

服务器上的预接收挂钩，grep 文件并中止推送 :)

可以在此处找到有关预接收挂钩的更多信息：http: [//git-scm.com/book/en/Customizing-Git-Git-Hooks#Server-Side-Hooks](http://git-scm.com/book/en/Customizing-Git-Git-Hooks#Server-Side-Hooks)

# iphone - 在 Iphone SDK 中更改 Web 视图的字体大小

> ID：13877470
> 
> 赞同：4
> 
> 时间：2012-12-14T11:08:35.750
> 
> 标签：iphone, html, ios, xcode, uiwebview

我已经实现了提要解析并将内容作为字符串获取。现在，我正在以编程方式通过它制作 html 文件。在 Web 视图中加载该 HTML。我的网络视图是表格视图单元格中的子视图。

![在此处输入图像描述](../Images/f72b263ecfeb0fba3e5be554b0b17f9f.png)

但现在我想更改网页视图内容的字体大小，以便用户可以看到一些细节。

我的 HTML 生成代码是：

> ```
> NSString * postHTML=[[_parseResults objectAtIndex:indexPath.row]valueForKey:@"summary"];
> 
>  NSString *close =[NSString stringWithFormat:@"</body></html>"];
> 
>     NSString *HTMLString = [NSString stringWithFormat:@"%@%@", postHTML,close];
> 
>     [Web_view loadHTMLString:HTMLString baseURL:nil];
> 
> [cell.contentView addSubview:Web_view];
> 
> return cell; 
> ```

**如何更改网页视图内容的字体大小？**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-14T11:15:05.690

```
[myWeb loadHTMLString:[NSString stringWithFormat:@"<div style='text-align:justify; font-size:45px;font-family:HelveticaNeue-CondensedBold;color:#0000;'>%@%@",postHTML,close] baseURL:nil]; 
```

您可以在代码中设置字体大小：字体大小。

试试这个..让我知道它是否有效！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T11:23:48.393

在 UIWebView 中，您可以在传递数据的同时使用所有 HTML 标签。

```
[WebView loadHTMLString:[NSString stringWithFormat:@"<div style='text-align:justify; font-size:44px;font-family:HelveticaNeue-CondensedBold;color:#ffff;'>%@",Data] baseURL:nil]; 
```

使用上面的代码，其中“数据”将是您的内容。

谢谢，

鹤芒。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T11:10:18.010

在你的 html 中设置

```
NSString *string = [NSString stringWithFormat:
                        @"<html> \n" "<head> \n"
                        "<style type=\"text/css\"> \n"
                        "body {font-family: \"%@\"; font-size: %@;}\n"
                        "</style> \n"
                        "</head> \n"
                        "<body>%@</body> \n"
                        "</html>",@"Helvetica",[NSNumber numberWithInt:17],
                        @"<p><i>My data</p>"]; 
```

# c - 附加到链接列表 C

> ID：13877478
> 
> 赞同：0
> 
> 时间：2012-12-14T11:09:11.037
> 
> 标签：c, linked-list

我想将新值附加到链表尾部，但由于某种原因，这些值似乎没有被附加。对于新的链表分配：

```
struct checkPoints *checkPt = *checkPoint;

while (checkPt != NULL) {
    checkPt = checkPt->next;
}
if (checkPt == NULL) {
    checkPt = malloc(sizeof (struct checkPoints));
    scanf("%c %d %d %d %d\n", &checkPt->dropOut, &checkPt->currentPoint, &checkPt->competitor, &checkPt->hour, &checkPt->minute);
} 
```

想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T11:11:24.517

您没有将新项目添加到列表中（并且在分配新项目时也会忘记列表的末尾）。尝试

```
struct checkPoints *tail = *checkPoint;

struct checkPoints *newItem = malloc(sizeof (struct checkPoints));
scanf("%c %d %d %d %d\n", &checkPt->dropOut, &checkPt->currentPoint,
                          &checkPt->competitor, &checkPt->hour,
                          &checkPt->minute);
newItem->next = NULL;

if (tail == NULL) {
    *checkPoint = newItem
}
else {
    while (tail->next != NULL) {
        tail = tail->next;
    }
    tail->next = newItem;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:12:46.033

你差一个。

您循环直到`checkPt`is `NULL`，但此时您已经忘记了列表的*最后一个*元素（在它变为`checkPt` *之前*`NULL`）。

解决方案可能是循环直到该`next`字段为 NULL：

```
for( checkPt = *checkPoint;
     checkPt != NULL && checkPt->next != NULL;
     checkPt = checkPt->next)
{
   /* Nothing to do here. */
}

if( checkPt != NULL )
{
  struct checkPoints *np = malloc(sizeof *checkPt->next);
  scanf("%c %d %d %d %d\n", &np->dropOut, &np->currentPoint, &np->competitor, &np->hour, &np->minute);
  np->next = NULL;
  checkPt->next = np;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T11:14:29.717

这

```
while (checkPt != NULL) {
    checkPt = checkPt->next;
} 
```

将循环直到 checkPt 为 NULL 所以你没有指向最后一个元素。

最简单的方法是有一个额外的指针指向列表中的最后一个元素，这使得附加元素更有效，而不是总是通过每次附加来寻找它，例如

```
checkPt = malloc(sizeof (struct checkPoints));
lastitem->next = checkPt;
lastitem = checkPt; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T11:15:21.663

您正在覆盖尾节点内存。

您需要创建一个临时节点，

checktmp = (struct checkPoints*)malloc(sizeof (struct checkPoints));

然后将临时节点添加到尾部。

checkPt->下一个 = checktmp;

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T11:19:50.837

您循环直到`checkPt`为**NULL**

你可以看到这个：

> O1 --> O2 --> 03 --> ... --> On --> NULL

所以，`checkPt`是空的，当你创建对象并`checkPt`指向时，没问题。

问题是：on 现在不是指向 checkPt。它仍然指向NULL。（意思是：什么都没有）。

所以，你应该追踪到**最后一个节点**（在这种情况下是`On`），并创建新对象，并使这个 lastNode 指向。

这是我的示例代码：

```
struct checkPoints *tailPoint = *checkPoint;

  while (tailPoint->next != NULL) {
    tailPoint = tailPoint->next;
  }
  struct checkPoints *newPoints = malloc(sizeof (struct checkPoints));
  // modify newPoints here
  newPoints->next = NULL; // mark it as last node      
  tail->next = newPoint;  // now, mark you last node point to new node. and new node point to end --> NICE 
```

如您所见，我的代码有一个简单的不同点：我跟踪直到`tailPoint->next`为 NULL，所以我仍然保留**最后一个元素**，但在您的代码中，什么都没有。这是一个很大的区别。

正如 simonce 评论的那样，如果 checkPoint 为空，我的代码将失败：通常当列表中没有任何内容时。所以，这里是修改后的代码：

```
// i'm create newPoint first, because always need new points. this will make the code less redundant.

struct checkPoints *tailPoint = *checkPoint;
struct checkPoints *newPoint = malloc(sizeof (struct checkPoints));
// modified newPoint here
// newPoint always last node, so, it will point to NULL.
newPoint->next = NULL; 

if (checkPoint== NULL) {
    *checkPoint = newItem;  // base on new idea
}
else {
    while (tailPoint->next != NULL) {
        tailPoint = tailPoint->next;
    }
    tailPoint->next = newItem;  // as upper code, add last node to tailPoint.
} 
```

您应该注意到两种情况之间的不同：分配`newItem`给`checkPoint`（链表的第一个节点）和`tailPoint`（链表的最后一个节点）希望这有帮助:)

# java - 如果我们不从方法中分配返回值，我们还会增加内存使用吗？

> ID：13877490
> 
> 赞同：0
> 
> 时间：2012-12-14T11:10:05.757
> 
> 标签：java, memory

例如，

if 方法返回大量数据，例如：

```
Data[] data = getData(); //will return 100Mb. Java memory usage increased by 100 
```

如果我们在没有分配数据的情况下调用 getData，java 会使用这 100Mb 吗？

```
getData(); //returns huge data but we don't assign it to var. Memory usage wasn't increased 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T11:12:30.497

是的。`Data[]`data 只是对数据的引用。所以它将使用100MB。

但是，如果您没有将返回的数据分配给任何变量**并且它没有任何其他引用**，则数据将很快被垃圾收集并释放内存。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T11:18:00.080

是的，即使我们没有将数据分配给任何变量，数据也会被调用。变量仅用于引用该值。

例子：

使用变量

```
Object a = getData();
otherFunction1(a);  //calling any other using variable reference 
```

不使用变量

```
otherFunction1(getData());  //calling any other using variable reference 
```

不同之处在于我们没有引用 getData() 的值。因此，如果我们有任何其他函数，比如 otherFunction2，我们可以将值传递为：

例如1：

```
otherFunction2(a) 
```

例如 2

```
otherFunction2(getData()) //need to recall the function getData() 
```

谢谢

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-14T11:12:14.037

赋值本身不使用任何内存，创建这些对象会。所以如果你的方法创建了一个 100MB 的对象，那么这个内存需求不会减少。但是如果你不分配它，它会很快被垃圾收集（除非它被保留在其他地方）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T11:18:02.333

丢弃对象不会增加内存使用量，只会减少它。这是因为 GC 后使用的内存是被引用的对象的内存。更少引用的对象意味着更少的内存使用。

顺便说一句，100 MB 的 PC 内存成本约为 0.30 美元，并且可以重复使用，所以不是“巨大的”恕我直言。

# machine-learning - 词袋 - 图像分类

> ID：13877492
> 
> 赞同：7
> 
> 时间：2012-12-14T11:10:16.343
> 
> 标签：machine-learning, computer-vision

我对基于词袋的图像分类有一些疑问，我会首先告诉我我做了什么

1.  我使用 SURF 方法从具有两个不同类别的训练图像中提取了特征，

2.  然后我对这两个类别的特征进行了聚类。

3.  为了将我的测试图像分类（即）测试图像属于两个类别中的哪一个。为了这个分类目的，我正在使用 SVM 分类器，但我有一个疑问，我们如何输入测试图像，我们是否必须再次从 1 到 2 执行相同的步骤，然后将其用作测试集还是存在任何其他方法，

4.  也很高兴知道弓法的效率，

请有人给我一个澄清

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-14T15:52:52.553

分类器需要测试数据的表示与训练数据具有相同的含义。因此，当您评估测试图像时，您会提取特征，然后制作与原始词汇表中的哪些单词最接近的直方图。

那是：

1.  从整个训练集中提取特征。
2.  将这些特征聚类到词汇表 V 中；你会得到 K 个不同的聚类中心。
3.  将每个训练图像编码为每个词汇元素在图像中出现的次数的直方图。然后每个图像由一个长度为 K 的向量表示。
4.  训练分类器。
5.  给定测试图像时，提取特征。现在将测试图像表示为来自 V 的每个聚类中心最接近测试图像中的特征的次数的直方图。这又是一个长度为 K 的向量。

通过取条目的平方根来打折直方图通常也很有帮助。这[近似于图像特征的更真实的模型](http://hal.inria.fr/docs/00/68/59/43/PDF/paper_final.pdf)。

# javascript - html = $('html') 的跨浏览器替代方案

> ID：13877497
> 
> 赞同：2
> 
> 时间：2012-12-14T11:10:23.393
> 
> 标签：javascript, jquery, html, window, native

这样写是不是太坑爹了？

```
var html = $('html'); 
```

似乎`html`等于`$(window)`或`$(document)`？

如何用跨浏览器原生 javascript 替换它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T11:11:57.220

顶级元素（`html`在 HTML 文档的情况下）可用作`document.documentElement`（参考：[spec](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-87CD092) | [MDN](https://developer.mozilla.org/en-US/docs/DOM/document.documentElement)）。

当然，如果你想在上面使用 jQuery 的东西，获取一个 jQuery 包装器：`$(document.documentElement)`.

在跨浏览器支持方面，如果您发现任何不支持它（*包括*IE6）的模糊的最新内容，我会感到非常震惊，它实际上是在**很久**以前的 DOM1 中。请参阅有关该主题的[相关问题](https://stackoverflow.com/questions/8421212/is-any-significant-browser-missing-document-documentelement-for-an-html-doc)。

# c# - 为什么在传递“null”常量时出现异常，但在传递“null”字符串引用时却没有？

> ID：13877501
> 
> 赞同：59
> 
> 时间：2012-12-14T11:10:28.403
> 
> 标签：c#, .net, reference, argumentnullexception

如果我运行此代码：

```
Console.WriteLine( String.Format( "{0}", null ) ); 
```

我得到一个`ArgumentNullException`，但如果我运行这段代码：

```
String str = null;
Console.WriteLine( String.Format( "{0}", str ) ); 
```

它运行得很好，输出是一个空字符串。

现在这两块看起来和我一样——它们都传递了一个空引用，`String.Format()`但行为却不同。

在这里如何识别不同的行为？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-12-14T11:16:19.563

只需反编译代码即可了解发生了什么。

```
string.Format("{0}", null) 
```

调用最*具体*的适用重载，即[`string.Format(string, object[])`](http://msdn.microsoft.com/en-us/library/b1csw23d.aspx).

的重载`string.Format`是：

```
Format(String, Object)
Format(String, Object[])
Format(IFormatProvider, String, Object[])
Format(String, Object, Object)
Format(String, Object, Object, Object) 
```

希望很明显为什么最后三个选项无效。

为了确定使用前两个中的哪一个，编译器将转换 from `null`to`Object`与转换 from `null`to进行比较`Object[]`。转换为`Object[]`被认为是“更好”，因为存在从`Object[]`to的转换`Object`，但反之则不然。这与如果我们有相同的逻辑：

```
Foo(String)
Foo(Object) 
```

并打电话`Foo(null)`，它会接`Foo(String)`。

所以你的原始代码相当于：

```
object[] values = null;
string.Format("{0}", values); 
```

在这一点上，希望您*期望*-根据`ArgumentNullException`文档。

# android - 一个应用程序可以有几个根文件夹吗？安卓

> ID：13877502
> 
> 赞同：0
> 
> 时间：2012-12-14T11:10:29.087
> 
> 标签：android, package, sandbox

一个应用程序可以有几个根文件夹吗？例如，我在一个.apk 中有一个包`com.xxx.yyy`和一个包。`com.zzz.ooo`那么是否可以有两个像`/data/data/com.xxx.yyy`and这样的根文件夹`/data/data/com.zzz.ooo`？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:13:29.217

它将基于您文件中的文件系统的包`package="com.packagename.android"`名称`AndroidManifest.xml`。

因此，尽管您的 src 中可以有尽可能多的不同 java 包，这些都是 dex 的，但 android 包只能从您的`AndroidManifest.xml`.

原因是您的资源文件生成为单个包。

不同的构建系统这可能是可能的..但目前还不能使用 ADT/Ant。

# grails - grails 插件的推荐范围

> ID：13877506
> 
> 赞同：0
> 
> 时间：2012-12-14T11:10:44.003
> 
> 标签：grails

我的 1.3.7 应用程序中有一个 grails 插件列表。我将其转换为 2.1.0 并进行清理。

在我的 application.properties 我有以下内容：

```
plugins.build-test-data=2.0.3
plugins.fixtures=1.1
plugins.hibernate=2.1.0
plugins.pretty-time=0.3
plugins.mail=1.0
plugins.quartz=0.4.2
plugins.spring-security-core=1.2.7.3
plugins.tomcat=2.1.0 
```

我将它们全部移到我的 BuildConfig.groovy 中。

我很好奇每个插件最合适的范围是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T12:18:04.830

我通常的经验法则是

*   `build`作为构建过程的一部分但不应进入 WAR 进行生产部署的插件的范围
*   `test`应该对测试可用但对应用程序代码不可用的东西的范围
*   `runtime`应用程序运行所需的插件（或 JAR 依赖项）的范围，但您不想将应用程序紧密耦合到这些插件（或 JAR 依赖项）的范围（例如，您不能`import`将依赖项中的类`runtime`转换为应用程序自己的类之一）
*   `compile`其他一切的范围

如果有疑问，`compile`肯定会起作用，因为插件`application.properties`被视为在`compile`范围内声明。

所以`tomcat`肯定想要`build`范围，`spring-security-core`肯定想要`compile`，我猜`fixtures`也`build-test-data`应该是`test`，其他人`compile`或者`runtime`取决于你是否需要`import`他们的任何课程。

# java - 当我尝试使用网络 IP ping 我自己的电脑时，我收到 java.net.UnknownHostException 的原因可能是什么？

> ID：13877511
> 
> 赞同：0
> 
> 时间：2012-12-14T11:11:12.970
> 
> 标签：java, tomcat, web-applications, unknown-host

我尝试使用以下代码行 ping 作为我自己的 PC 的服务器：

```
InetAddress.getByName(serverResourceLocator).isReachable(5000)

// where serverResourceLocator is  192.168.43.187/server/ping?ip=Adarsh-PC/192.168.43.187&time=1355482205301 
```

这`192.168.43.187`是我的 PC 的网络 IP，我从命令中得知`ipconfig`

```
Wireless LAN adapter Wireless Network Connection:

Connection-specific DNS Suffix  . :
Link-local IPv6 Address . . . . . : fe80::f5be:cfa7:5c38:efff%14
IPv4 Address. . . . . . . . . . . : 192.168.43.187
Subnet Mask . . . . . . . . . . . : 255.255.255.0
Default Gateway . . . . . . . . . : 192.168.43.1 
```

在我的 PC 上，我正在运行 tomcat 作为服务器。为什么我会得到`UnknownHostException`？

* * *

```
java.net.UnknownHostException: 192.168.43.187/server/ping?ip=Adarsh-PC/192.168.43.187&time=1355482205301
at java.net.InetAddress.getAllByName0(InetAddress.java:1140)
at java.net.InetAddress.getAllByName0(InetAddress.java:1109)
at java.net.InetAddress.getAllByName(InetAddress.java:1072)
at java.net.InetAddress.getByName(InetAddress.java:969)
at internet.CommunicationWithServer.PingTheServer.ping(PingTheServer.java:35)
at internet.CommunicationWithServer.PingTheServer.access$000(PingTheServer.java:11)
at internet.CommunicationWithServer.PingTheServer$1.run(PingTheServer.java:21)
at java.lang.Thread.run(Thread.java:619) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T11:14:22.493

.getByName [() 方法](http://docs.oracle.com/javase/6/docs/api/java/net/InetAddress.html#getByName%28java.lang.String%29)需要一个主机名，而不是您提供的（半）URL。引用 JavaDoc：

> 主机名可以是**机器名**，例如“java.sun.com”，也可以是其**IP 地址**的文本表示。如果提供了文字 IP 地址，则仅检查地址格式的有效性。

（我的重点）。

试试看`InetAddress.getByName( "192.168.43.187" ).isReachable(5000)`，你会没事的。

我突然想到你编写了一个 servlet 来 ping 一个 IP。如果它例如。通过 HTTP 响应返回延迟，那么您应该使用例如。[HttpClient](http://hc.apache.org/httpcomponents-client-ga/index.html)包以编程方式获取该响应；SO上有几个线程来实现这一点。

干杯，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T11:14:26.467

`serverResourceLocator`更像是一个 URL，而[`InetAddress.getByName`](http://download.java.net/jdk7/archive/b123/docs/api/java/net/InetAddress.html#getByName%28java.lang.String%29)需要一个主机名：

尝试

```
InetAddress.getByName("192.168.43.187").isReachable(5000) 
```

# php - 使用 MySQL for PHP 获取适当的数组

> ID：13877513
> 
> 赞同：-1
> 
> 时间：2012-12-14T11:11:17.573
> 
> 标签：php, mysql

我必须显示商店的产品列表。我只有一个商店 ID，我必须关联 6 个表才能获得。我使用的查询是正确地获取记录，但不是以所需的数组格式。我不知道我想要的数组格式是否可行。我的SQL如下：

```
SELECT DISTINCT KR.knifename,KR.id,CAT.categoryname,KR.knifecode FROM assocknives AS AK
                                             INNER JOIN kniferegisters AS KR ON KR.id = AK.kniferegister_id
                                             INNER JOIN categories AS CAT ON CAT.id = KR.sub_category_id
                                             INNER JOIN stores AS STR ON STR.id = AK.store_id                                             
                                             INNER JOIN brands AS BRND ON BRND.id = AK.brand_id
                                             INNER JOIN assocknifeprices AS AKP ON AKP.assocknife_id = AK.id
                                             WHERE AK.store_id='.$storeId.' AND BRND.is_active ="1" AND STR.is_active ="1" 
```

这给了我数组

```
Array
(
    [0] => Array
        (
            [KR] => Array
                (
                    [knifename] => xxx
                    [id] => xxx
                    [knifecode] => xxx
                )

            [CAT] => Array
                (
                    [categoryname] => xxx
                )

        )

    [1] => Array
        (
            [KR] => Array
                (
                    [knifename] => xxx
                    [id] => xxx
                    [knifecode] => xxx
                )

            [CAT] => Array
                (
                    [categoryname] => xxx
                )

        )

) 
```

结果是正确的，但我想得到它

```
Array
(
    [categoryname1] => Array
        (
            [0] => Array
                (
                    [knifename] => xxx
                    [id] => xxx
                    [knifecode] => xxx
                )

            [1] => Array
                (                   
                    [knifename] => xxx
                    [id] => xxx
                    [knifecode] => xxx
                )

        )

    [categoryname2] => Array
        (
            [0] => Array
                (
                    [knifename] => xxx
                    [id] => xxx
                    [knifecode] => xxx
                )

            [1] => Array
                (                   
                    [knifename] => xxx
                    [id] => xxx
                    [knifecode] => xxx
                )

        ) 
```

) 对不起，如果这似乎是一件愚蠢的事情，但这种数组格式真的会帮助我的事业。谢谢大家的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:19:27.340

您需要自己处理数据以将其转换为与此类似的格式。通常您可以遍历行并将其转换为所需格式的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:23:22.597

有一个不错的函数（选项）可以按您的预期获得输出。**（即）使用 array_combine()**

使用如下，

**以 $arrayValue 形式获取一个数组中的结果，并使用数组键创建一个新数组作为 arrayKey，如下所示，**

```
 $arrayValue = SQL RESULT
    $arrayKey = array('categoryname1','categoryname2',....) 

    $expectedArrayResult = array_combine($arrayKey, $arrayValue)..

    print_r($expectedArrayResult); 
```

如果您需要附加相应的产品意味着使用以下功能，

您需要使用键传递类别，并且还需要使用类别键传递值数组

```
 function combine_assoc($map, $values) {
  $output = array();
  foreach($map as $key => $values) {
    if(!array_key_exists($key, $value)) return FALSE;
    $output[$value] = $values[$key];
  }
  return $output;
} 
```

# java - Java A->B->C 所以 A->C？

> ID：13877516
> 
> 赞同：0
> 
> 时间：2012-12-14T11:11:20.363
> 
> 标签：java, build

A 在构建路径中有 jar B，B 在构建路径中
有 jar C，

我可以在 A 中使用 C 中的类吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:17:59.493

是的，你可以使用它。因为如果所有 jars 都在您的类路径中，那么您可以在任何地方使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:19:35.110

在构建路径中有 jar b 和 jar c 是不够的。您可以使用这些选项中的任何一个来实现您想要的：

1.  在包含类路径的 jar b 清单中添加一个新行：c.jar 在包含类路径的 jar 清单中添加一个新行：b.jar

2.  `java -cp a.jar;b.jar;c.jar yourfullclassname`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T11:19:58.780

我认为您可能需要区分构建这些 jar 和后续使用。

例如，您可以构建 jar B 引用 jar C，但需要将两者部署在一起。如果你在构建 jar A 时不这样做，则引用 jar B，但如果没有 jar C，它将无法工作。

您的构建也可以选择 B 的代码，并将其与 jar C 的内容一起打包。*然后*您可以在 A 中同时使用 B 和 C。

这种依赖管理可能变得相当复杂（如您所见）。将代码打包在一起，这样您就不必提供多个 jar，这让生活变得轻松（您只引用一个 jar），但它使升级变得很痛苦（例如，您无法升级一个公共库）。像 Maven 这样的工具提供了处理这个问题的选项（我是否需要这个 jar 仅用于编译，我是否将它与我的程序一起打包，它是否仅用于测试等）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T11:13:32.660

如果您的类路径中有 A、B 和 C，您可以使用任何其他类中的任何这些类。您所需要的只是参考或对参考的参考等。

# java - 动态添加 UI 组件

> ID：13877519
> 
> 赞同：1
> 
> 时间：2012-12-14T11:11:30.480
> 
> 标签：java, javascript, jsf

> **可能重复：**
> [如何创建动态 JSF 1.2 表单字段](https://stackoverflow.com/questions/3510614/how-to-create-dynamic-jsf-1-2-form-fields)

我需要一个功能，每次单击“添加”按钮时，我都可以添加一组表单元素，例如（文本框、下拉菜单）。当我单击组件旁边的“删除”按钮时，它应该从页面中删除。我在 Java 中需要的这个功能。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:52:47.343

这是一个工作示例。您应该根据您的要求实现自己的代码。
将 a 添加`textBox`到您的页面，然后使用可迭代的组件，如`ui:repeat`,`a4j:repeat`或`c:forEach`创建多个组件。

```
<h:form id="test">  
  <ui:repeat value="#{myBean.myObjects}" var="obj">
    <h:inputText value="#{obj.text}" />
    <h:commandButton action="#{myBean.remove(obj)}" value="Remove"/><br/>
  </ui:repeat>
  <br/>
  <h:commandButton action="#{myBean.add()}" value="Add"/>  
</h:form> 
```

在您的托管 bean`getMyObjects()`方法中应该返回您添加项目的列表。

```
public class MyBean {
  private List<MyObject> objs = new ArrayList<MyObject>();

  public List<MyObject> getMyObjects() {
    return objs;
  }

  public void remove(MyObject t) {
    objs.remove(t);
  }

  public void add() {
    objs.add(new MyObject());
  }

  public class MyObject {
    private String text;

    public String getText() {
      return text;
    }

    public void setText(String text) {
      this.text = text;
    }

  }
} 
```

# tortoisesvn - 在 tortoisesvn 中使用 tsvn:* 属性格式化合并消息

> ID：13877521
> 
> 赞同：1
> 
> 时间：2012-12-14T11:11:38.687
> 
> 标签：tortoisesvn

我使用 tortoisesvn 1.7.10 Build 23359 - 64 位。 [http://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-dug-propertypage.html](http://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-dug-propertypage.html) 本手册说，tortoisesvn 有它自己的项目属性，从 tsvn: 开始。其中一些是“tsvn:mergelogtemplatetitle”和“tsvn:mergelogtemplatemsg”

但我在 svn 目录的属性编辑器中看不到它们。我使用从 svn 签出的根目录的上下文菜单。按“属性”。然后是“新”-“高级”，我看到![https://tortoisesvn.net/docs/nightly/TortoiseSVN_en/images/PropertyAdd.png](../Images/dcb3400b6133a1c6bf7eb91f0fff5f0f.png) [https://tortoisesvn.net/docs/nightly/TortoiseSVN_en/images/PropertyAdd.png](https://tortoisesvn.net/docs/nightly/TortoiseSVN_en/images/PropertyAdd.png)

并且没有这样的 tsvn 属性。

这些链接表示此功能是在 2012 年 5 月添加的： [一](http://code.google.com/p/tortoisesvn/source/detail?r=22915)、 [二](http://nightlybuilds.tortoisesvn.net/latest/changelog.html)。可能是只添加到 32 位版本？

如何找到它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T13:31:06.370

正如 Stefan 在上面的评论中所说，我只需在框中键入属性名称，即使它没有显示在下拉列表中。

# javascript - 自删除 jquery ui 脚本后显示未添加任何内容

> ID：13877525
> 
> 赞同：0
> 
> 时间：2012-12-14T11:11:47.390
> 
> 标签：javascript, jquery

我对 JavaScript 很陌生，这是我的第一个脚本之一。

基本上我正在尝试创建一个脚本，将基于网格的新闻列表转换为基于列表的新闻列表。当两者都有时，我一切都很好

```
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script> 
```

但我已经删除了 ui 脚本，因为我真的不需要它（我认为）

现在我的脚本无法正常运行。我的脚本是

```
//Javascript Start 

//SETTINGS
var settings = {
    //Header Slider Settings
    listBtn: 'input.toggle',
    listItem: '.wrapper ul',
    listStyleOne: 'listNews-tiled',
    listStyleTwo: 'listNews-list',
    fadeSpeed: 300
}

function NewsListSwitcher() {
    $(settings.listBtn).click(function () {
        //If News List has a certian class
        if ($(settings.listItem).hasClass(settings.listStyleOne)) {
            //Fade Out and remove Class
            $(settings.listItem).fadeOut(settings.fadeSpeed,
                function () {
                    $(settings.listItem).removeClass(settings.listStyleOne);
                }
            );
            //Add Class and Fade In
            $(settings.listItem).addClass(settings.listStyleTwo,
                function () {
                    $(settings.listItem).fadeIn(settings.fadeSpeed);
                }
            );
            //Change background Position Of List Button
            $(settings.listBtn).css("background-position","bottom");
        }
        else {
            //Fade Out and remove class
            $(settings.listItem).fadeOut(settings.fadeSpeed,
                function () {
                    $(settings.listItem).removeClass(settings.listStyleTwo);
                }
            );
            //Add Class and Fade In
            $(settings.listItem).addClass(settings.listStyleOne,
                function () {
                    $(settings.listItem).fadeIn(settings.fadeSpeed);
                }
            );
            //Change background Position Of List Button
            $(settings.listBtn).css("background-position","top");
        }
    });
}
//Javascript End 
```

我的 html 只是一个基本列表

```
<div class="wrapper">
    <input type="submit" class="toggle" value="">
    <hr />
    <ul class="listNews-tiled">
        <li>item</li>
        <li>item</li>
        <li>item</li>
        <li>item</li>
        <li>item</li>
        <li>item</li>
        <li>item</li>
        <li>item</li>
    </ul>
</div> 
```

发生的事情是当我单击我的图标时，脚本删除了 listNews-tiled 类并添加了 listNews-List 类，但它也添加了显示块：无；我不想要。

如果您能提供帮助，那就太棒了。

链接到预览 [http://www.psykestudios.co.uk/News%20List-Grid%20selector/](http://www.psykestudios.co.uk/News%20List-Grid%20selector/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:22:01.363

[jQuery.addClass](http://api.jquery.com/addClass/)不支持您显然认为的完成回调（与`fadeIn`or相反）。`fadeOut`含义代码如：`$(body).addClass('example', function() {...})`添加类后将不会运行该函数。课程立即添加。文档指出该函数可能会被传递给，`addClass`但预计它会返回将作为类名添加的字符串。

**作为修复**，当您将函数传递给 addClass 时，请使用以下内容替换部件：

```
$(settings.listItem).addClass(settings.listStyleTwo).fadeIn(settings.fadeSpeed); 
```

编辑：哈，这个问题比我最初想的要多得多。

我检查了一下，差异背后的原因（带有 jQ​​ueryUI 的版本与没有它的版本）实际上是 addClass 函数的实现。使用常规（普通）jQuery，addClass 的情况如上所述，而使用 jQueryUI 则完全不同。[如此处所述](http://api.jqueryui.com/addClass/)，jQueryUI 覆盖 addClass 函数并使其能够在没有和具有给定类名的状态之间进行动画转换。这就是为什么在附加 jQueryUI 之后你会获得更流畅的动画，因为你不仅可以使用淡入/淡出进行动画处理，还可以通过简单地使用`addClass`回调来为状态设置动画。

所以总结一下。如果你想摆脱 jQueryUI 坚持我上面粘贴的代码。如果您想要更流畅的动画，请嵌入 jQueryUI。如果您对 jQueryUI 的关注是它的大小，请创建自己的自定义下载并选择一个为您提供新版本 addClass 函数的部分（所以大概核心就足够了）。

# xslt - XML 使用 XSLT 2.0 将节点转换为字符串

> ID：13877529
> 
> 赞同：0
> 
> 时间：2012-12-14T11:11:54.210
> 
> 标签：xslt

我搜索了将 XML 节点重命名为字符串的方法。我在 XML 中找到了到节点的字符串示例，但不是相反。

是否可以执行以下操作

```
<par>
<run> Some text <break/> </run>
</par>

<par>
<run> some text with no carraige return</run>
</par> 
```

至：

```
<par>
<run> Some text &#10; </run>
</par> 
```

非常感谢您的任何回复。

多诺

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:21:22.423

这当然是可能的。只需使用身份转换并`<break>`专门处理即可。不要使用 复制它`<xsl:copy>`，而是输出您喜欢的任何文本：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="2.0">

  <xsl:template match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="break">
    <xsl:value-of select="'&#10;'"/>
  </xsl:template>

</xsl:stylesheet> 
```

我想要`&#10;`你可以使用的文字输出`disable-output-escaping`，比如

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="2.0">

  <xsl:template match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="break">
    <xsl:value-of select="'&amp;#10;'" disable-output-escaping="yes"/>
  </xsl:template>

</xsl:stylesheet> 
```

但是，这是一个可选功能，不保证任何 XSLT 处理器都支持。

# java - 如何在 JNI 中实例化一个类

> ID：13877543
> 
> 赞同：2
> 
> 时间：2012-12-14T11:12:31.917
> 
> 标签：java, android, android-ndk, java-native-interface

我很惊讶这个非常重要的细节在互联网上缺少一个全面的演练。或者也许我是一个最糟糕的谷歌用户。或者是一个完全愚蠢的程序员。

几个月以来我一直在研究 android，但最近我被告知要做 JNI。我的C技能已经生锈了。然而，当我坚持这一点并且无法继续前进时，我正在迎头赶上。

我想要一些简单的东西。这是我在 MainActivity 中的本机方法声明

公共原生对象 createObject();

这就是我打算使用它的方式

```
 Object abc = createObject();
    Integer num = (Integer) abc; 
```

我只想从 C 创建一个 java.lang.Integer 对象，并将其发送到 java。再简单不过了

```
 jobject Java_com_example_hellojni_HelloJni_callbackJava(JNIEnv * env, jobject this )
{
    jclass cls = (*env)->FindClass(env, "java/lang/Integer");
    jmethodID methodID = (*env)->GetMethodID(env, cls, "<init>", "(I)V");
    jint number = 8 ; 
    return (*env)->NewObject(cls, methodID, number);

} 
```

（android ndk r8c）我受到堆栈跟踪的欢迎，这使我的应用程序崩溃。

```
12-14 16:10:07.595: D/dalvikvm(302): Trying to load lib /data/data/com.example.hellojni/lib/libhello-jni.so 0x45f3da60
12-14 16:10:07.625: D/dalvikvm(302): Added shared lib /data/data/com.example.hellojni/lib/libhello-jni.so 0x45f3da60
12-14 16:10:07.625: D/dalvikvm(302): No JNI_OnLoad found in /data/data/com.example.hellojni/lib/libhello-jni.so 0x45f3da60, skipping init

12-14 16:10:07.684: W/dalvikvm(302): **JNI WARNING: threadid=1 using env from threadid=0**
12-14 16:10:07.684: W/dalvikvm(302):              in Lcom/example/hellojni/HelloJni;.callbackJava ()V (NewObject)
12-14 16:10:07.684: I/dalvikvm(302): "main" prio=5 tid=1 NATIVE
12-14 16:10:07.684: I/dalvikvm(302):   | group="main" sCount=0 dsCount=0 s=N obj=0x4001d8e0 self=0xccb0
12-14 16:10:07.684: I/dalvikvm(302):   | sysTid=302 nice=0 sched=0/0 cgrp=default handle=-1345026008
12-14 16:10:07.684: I/dalvikvm(302):   | schedstat=( 152515888 582639885 48 )
12-14 16:10:07.684: I/dalvikvm(302):   at com.example.hellojni.HelloJni.callbackJava(Native Method)
12-14 16:10:07.695: I/dalvikvm(302):   at com.example.hellojni.HelloJni.onCreate(HelloJni.java:59)
12-14 16:10:07.695: I/dalvikvm(302):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-14 16:10:07.695: I/dalvikvm(302):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
12-14 16:10:07.695: I/dalvikvm(302):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
12-14 16:10:07.695: I/dalvikvm(302):   at android.app.ActivityThread.access$2300(ActivityThread.java:125)
12-14 16:10:07.695: I/dalvikvm(302):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
12-14 16:10:07.695: I/dalvikvm(302):   at android.os.Handler.dispatchMessage(Handler.java:99)
12-14 16:10:07.695: I/dalvikvm(302):   at android.os.Looper.loop(Looper.java:123)
12-14 16:10:07.695: I/dalvikvm(302):   at android.app.ActivityThread.main(ActivityThread.java:4627)
12-14 16:10:07.695: I/dalvikvm(302):   at java.lang.reflect.Method.invokeNative(Native Method)
12-14 16:10:07.695: I/dalvikvm(302):   at java.lang.reflect.Method.invoke(Method.java:521)
12-14 16:10:07.695: I/dalvikvm(302):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
12-14 16:10:07.695: I/dalvikvm(302):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
12-14 16:10:07.695: I/dalvikvm(302):   at dalvik.system.NativeStart.main(Native Method)
12-14 16:10:07.704: E/dalvikvm(302): VM aborting 
```

请帮我 。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-14T12:53:20.400

我犯了一个小错误，我通过对 JNI 的更多搜索和研究发现了这个错误

我错过了将 env 放入 NewObject 的参数中。这是正确的代码，以防任何人需要它

```
jobject Java_com_example_hellojni_HelloJni_createObject(JNIEnv * env, jobject this )
{

    jclass cls = (*env)->FindClass(env, "java/lang/Integer");
    jmethodID methodID = (*env)->GetMethodID(env, cls, "<init>", "(I)V");
    jobject a=(*env)->NewObject(env,cls, methodID, 5);
    return a;
} 
```

# c - free() 是否跟随指针？

> ID：13877546
> 
> 赞同：6
> 
> 时间：2012-12-14T11:12:52.743
> 
> 标签：c, pointers, struct, malloc, free

我敢肯定它没有，但也许里面有黑魔法，所以这是我的问题：

如果我有这样的结构：

```
struct mystr {
    char * strp,
    unsigned int foo,
}; 
```

我为它分配内存并想稍后释放它。我必须做吗

```
free(mystr_var->strp);
free(mystr_var); 
```

或者最后一行是否足够，`free()`函数是否跟随指针并释放它们两个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T11:14:14.063

不，免费不遵循指针，您需要这两行。

我通常写一个函数，如：

```
void freemystr(mystr *mystr_var)
{
    if (mystr_var)
    {
        free(mystr_var->strp);
        mystr_var->strp = NULL;
        free(mystr_var);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T11:19:29.900

每个单独分配的内存块都必须单独释放。`free()`只会释放指针指向的内存块，并且它不知道该内存的内容是什么。

因此，在您的情况下，您通过首先释放结构中分配的最里面的内存并最终释放结构指针来以正确的方式进行操作。

如果您只是对结构指针执行 free 操作，则结构内存将被释放。, 持有的内存`char* strp`成为程序生命周期中的内存泄漏。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-14T11:14:09.920

不，它没有。

这根本不是魔法，对编译器来说它只是另一个函数调用。

问问你自己，你将如何`void free(void *);`以一种遵循指针的方式实现，当然不会被一个包含*任何内容*的二进制数据块所愚弄。你不能。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-14T11:14:11.883

不，它只是释放指向的块。

您需要显式释放引用的内存。您需要先执行此操作（即很可能与分配内存的方式相反）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-14T11:15:00.233

不`free`，不会为所有成员免费递归。您必须显式释放已为其分配内存的所有成员。

如果您了解如何为 struct 分配内存以及 free 是如何工作的，这将不是问题。

```
struct mystr {
    char * strp,
    unsigned int foo,
}; 
```

当您使用 malloc 和朋友分配内存时，它只为成员分配内存。在你的情况下 one`char*`和 one `unsigned int`。请注意，它不会分配任何内存来将数据存储在`char*`. `strp`因此，您必须在存储数据之前再次分配内存。除非您直接分配字符串文字或仅使用指针`strp`指向现有内存。

**例子：**

**情况1：**

```
struct mystr s;

s.strp = "literals"; // valid, no need to malloc 
```

**案例2：**

```
char *p="abc";

s.strp = p; // valid, no need to malloc 
```

在所有其他用途中，您必须`strp`在将数据存储到`strp`.

因此，当您调用`free`struct 变量时，它只释放分配给的指针`strp`，而不释放`strp`. 这仅仅是因为`free`没有关于`strp`指向何处的信息。

请注意，在上面的两个示例中，您没有释放`strp`，因为您没有在那里分配任何内存来将数据存储到`strp`. 简单的规则是一送一`malloc/calloc/realloc`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-14T11:20:07.947

C99 说，

free 函数会导致 ptr 指向的空间被释放，也就是说，可用于进一步分配。如果 ptr 是空指针，则不会发生任何操作。否则，如果参数与 calloc、malloc 或 realloc 函数先前返回的指针不匹配，或者如果空间已通过调用 free 或 realloc 被释放，则行为未定义。

# audio - 如何查找 AAC-LC（非 ADTS）音频数据包长度

> ID：13877549
> 
> 赞同：6
> 
> 时间：2012-12-14T11:13:08.297
> 
> 标签：audio, streaming, audio-streaming, aac

我有直接来自音频编码器的 AAC-LC 音频流。

它是一个原始流，没有 ADTS 标头，没有容器数据，因为我想在编码音频到达时直接流式传输。（在文件保存之前）。

我想确定传入编码的原始 AAC 流中的帧边界/帧长度/数据包长度。（AAC 具有可变的数据包长度。）

我可以搜索任何固定的帧头/模式，以便确定帧边界吗？

AAC可以吗？

提前感谢您的宝贵意见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T08:52:56.703

如果您直接从编码器获取 AAC 编码数据，则由编码器逐帧发送。它不应该发送“数据包”，而是发送单帧。否则，我看不到您可以解析帧的方法。

我首先检查它是否真的一次发送超过一帧？

如果是，那么一种解决方案是告诉编码器发送 ADTS 标头，然后解析来自 ADTS 的信息，最后从帧中剥离 ADTS 并将其作为原始数据流式传输。

这有帮助吗？

# javascript - TypeError：使用 ASP.NET MVC4 Bundles 时 f 为 null

> ID：13877552
> 
> 赞同：0
> 
> 时间：2012-12-14T11:13:16.050
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-4, bundle

在发布模式下使用捆绑包时出现以下错误：

> 类型错误：f 为空

在调试模式下运行时，我的 JS 代码没有任何问题。但由于某种原因，一旦文件实际捆绑，我就会收到错误消息。我定义了以下捆绑包：

```
 bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
                    "~/Scripts/Common/jquery/jquery-{version}.js", 
                    "~/Scripts/Common/jquery/jquery-ui-{version}.js",
                    "~/Scripts/Common/jquery/jquery.labelify.js"));

        bundles.Add(new ScriptBundle("~/bundles/login").Include(
            "~/Scripts/Common/knockout/knockout-2.1.0.js",
            "~/Scripts/Common/knockout/json2.js",
           "~/Scripts/Common/knockout/knockout.validation.min.js",
           "~/Scripts/Common/knockout/KnockoutValidationConfiguration.js",
           "~/Scripts/App/Common/LoginViewModel.js"
           )); 
```

我正在页面标题内渲染捆绑包。在我的文件底部`Login.cshtml`，我有以下代码：

```
<script type="text/javascript">
    $(function () {
        var context = new LoginViewModel();
        ko.applyBindings(context, document.getElementById('login_form'));
    });
</script> 
```

当我将其注释掉时，我不再收到错误消息。

我不确定这是否是由`LoginViewModel`正在使用的库或其中一个库引起的。无论如何，这是`LoginViewModel`代码：

```
function LoginViewModel() {
    var self = this;

    self.Username = ko.observable().extend({ required: { message: "Nom d'utilisateur est obligatoire" } });
    self.Password = ko.observable().extend({ required: { message: 'Mot de passe est obligatoire' } });
    self.ErrorMessage = ko.observable();
    self.enableButton = ko.computed(function () {
        var errors = ko.utils.unwrapObservable(ko.validation.group(self));
        return (errors.length == 0);
    });

    self.onLogin = function () {
        var credentials = ko.toJSON({
            Username: self.Username(),
            Password: self.Password()
        });
        $.ajax({
            url: "/Account/Login",
            type: "post",
            contentType: 'application/json',
            data: credentials,
            success: function (data) {
                if (data && data.result == "success") {
                    self.ErrorMessage("");
                    window.location = data.targetUrl;
                }
                else if (data && data.result == "failure") {
                    self.ErrorMessage(data.errorMessage);
                }
            }
        });
    }
}; 
```

有什么想法吗？我该如何调试它，为什么它只在发布模式下发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:16:17.467

不要使用`"~/Scripts/Common/knockout/knockout.validation.min.js"`，使用开发文件代替：`"~/Scripts/Common/knockout/knockout.validation.js"`.

# asp.net - 如何删除asp.net中的下拉列表箭头？

> ID：13877554
> 
> 赞同：3
> 
> 时间：2012-12-14T11:13:19.243
> 
> 标签：asp.net

如何在 asp.net 中删除下拉列表显示的箭头，我不想要箭头，因为我想使用自己的图像为下拉列表创建精美的外观。

```
 <asp:DropDownList ID="cboLang" Runat="server" AutoPostBack="True" onselectedindexchanged="cboLang_SelectedIndexChanged" Font-Size="XX-Small" Width="95" Height="26" >
                        <asp:ListItem Value="EN-US">ENGLISH</asp:ListItem>
                        <asp:ListItem Value="ZH-CN">&#20013;&#25991;</asp:ListItem>
                        <asp:ListItem Value="TH-TH">&#3616;&#3634;&#3625;&#3634;&#3652;&#3607;&#3618;</asp:ListItem>
                        <asp:ListItem Value="EN-IE">ti&#7871;ng Vi&#7879;t</asp:ListItem>
                        <asp:ListItem Value="EN-TT">Korean</asp:ListItem>
                        <asp:ListItem Value="EN-AU">Indo</asp:ListItem>
                        </asp:DropDownList> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-15T21:58:16.347

您可以将 cssClass 添加到下拉**cssClass="select"**中，例如：

```
<asp:DropDownList ID="cboLang" Runat="server" cssClass="select" AutoPostBack="True" onselectedindexchanged="cboLang_SelectedIndexChanged" Font-Size="XX-Small" Width="95" Height="26" >
                    <asp:ListItem Value="EN-US">ENGLISH</asp:ListItem>
                    <asp:ListItem Value="ZH-CN">&#20013;&#25991;</asp:ListItem>
                    <asp:ListItem Value="TH-TH">&#3616;&#3634;&#3625;&#3634;&#3652;&#3607;&#3618;</asp:ListItem>
                    <asp:ListItem Value="EN-IE">ti&#7871;ng Vi&#7879;t</asp:ListItem>
                    <asp:ListItem Value="EN-TT">Korean</asp:ListItem>
                    <asp:ListItem Value="EN-AU">Indo</asp:ListItem>
                    </asp:DropDownList> 
```

并将以下样式添加到 head 标签

```
<style>
.select
{
    border-radius: 5px;
   -webkit-appearance: none;
}
</style> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T11:23:50.873

你不能用 asp.net 下拉控件来做到这一点。你可以在那个地方使用自动完成文本框。也可以使用 Telerik 组合框隐藏箭头。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-14T11:28:22.320

无法更改`<select>`标记的呈现方式，您可以使用任何其他方式将多个值显示为自动完成文本框

检查这些链接：

[从下拉菜单中删除下拉（选择）按钮？](https://stackoverflow.com/questions/4273493/remove-dropdown-select-button-from-dropdown-menus)

[从 <select> 元素中删除下拉箭头？](https://stackoverflow.com/questions/10862050/remove-drop-down-arrow-from-select-element)

# c# - 从一个 Action 创建一个可取消的 IObservable

> ID：13877555
> 
> 赞同：2
> 
> 时间：2012-12-14T11:13:19.640
> 
> 标签：c#, system.reactive

我想创建一个实用方法，为仅在订阅时调用的操作创建 IObservable 并且！它遵循 SubscribeOn(...) 指令。这是我的实现，它基于我可以从[http://www.introtorx.com](http://www.introtorx.com)和其他资源中提取的内容，但在一种特定情况下它失败了：

```
 /// <summary>
    /// Makes an observable out of an action. Only at subscription the task will be executed. 
    /// </summary>
    /// <param name="action">The action.</param>
    /// <returns></returns>
    public static IObservable<Unit> MakeObservable_2(Action action)
    {
        return Observable.Create<Unit>(
            observer =>
            {
                return System.Reactive.Concurrency.CurrentThreadScheduler.Instance.Schedule(
                    () =>
                    {
                        try
                        {
                            action();
                            observer.OnNext(Unit.Default);
                            observer.OnCompleted();
                        }
                        catch (Exception ex)
                        {
                            observer.OnError(ex);
                        }
                    });
            });
    } 
```

我希望 CurrrentThreadScheduler 的使用会导致 SubscribeOn() 中给出的调度程序的使用。此实现适用于 .SubscribeOn(TaskPoolScheduler.Default)，但不适用于 .SubscribeOn(Dispatcher.CurrentDispatcher)。您能否更改上述实现以使下面的所有单元测试都通过？

```
 [Test]
    public void RxActionUtilities_MakeObservableFromAction_WorksAsExpected()
    {
        ManualResetEvent evt = new ManualResetEvent(false);

        // Timeout of this test if sth. goes wrong below
        Task.Factory.StartNew(() =>
        {
            Thread.Sleep(5000);
            Console.WriteLine("Test timed out!");
            evt.Set();
        });

        int threadIdOfAction = -42;
        int threadIdOfSubscriptionContect = -43;
        bool subscriptionWasCalled = false;

        Action action = () =>
            {
                threadIdOfAction = Thread.CurrentThread.ManagedThreadId;
                Console.WriteLine("This is an action on thread " + threadIdOfAction);
            };

        var observable = RxActionUtilities.MakeObservable_2(action);

        threadIdOfSubscriptionContect = Thread.CurrentThread.ManagedThreadId;
        Console.WriteLine("Before subscription on thread " + threadIdOfSubscriptionContect);

        // The next line is the one I want to have working, but the subscription is never executed
        observable.SubscribeOn(Dispatcher.CurrentDispatcher).Subscribe(
            //observable.Subscribe( // would pass
            (unit) =>
            {
                Console.WriteLine("Subscription: OnNext " + threadIdOfAction + ", " + threadIdOfSubscriptionContect);
                subscriptionWasCalled = true;
            },
            (ex) => evt.Set(), () => evt.Set());

        Console.WriteLine("After subscription");

        evt.WaitOne();

        Assert.AreNotEqual(-42, threadIdOfAction);
        Assert.AreNotEqual(-43, threadIdOfSubscriptionContect);

        Assert.AreEqual(threadIdOfAction, threadIdOfSubscriptionContect);
        Assert.That(subscriptionWasCalled);
    }

    [Test]
    // This test passes with the current implementation
    public void RxActionUtilities_MakeObservableFromActionSubscribeOnDifferentThread_WorksAsExpected()
    {
        ManualResetEvent evt = new ManualResetEvent(false);

        // Timeout of this test if sth. goes wrong below
        Task.Factory.StartNew(() =>
        {
            Thread.Sleep(5000);
            Console.WriteLine("Test timed out!");
            evt.Set();
        });

        int threadIdOfAction = 42;
        int threadIdOfSubscriptionContect = 43;
        bool subscriptionWasCalled = false;

        Action action = () =>
        {
            threadIdOfAction = Thread.CurrentThread.ManagedThreadId;
            Console.WriteLine("This is an action on thread " + threadIdOfAction);
        };

        var observable = RxActionUtilities.MakeObservable_2(action);

        threadIdOfSubscriptionContect = Thread.CurrentThread.ManagedThreadId;
        Console.WriteLine("Before subscription on thread " + threadIdOfSubscriptionContect);

        // The next line is the one I want to have working, but the subscription is never executed
        observable.SubscribeOn(TaskPoolScheduler.Default).Subscribe(
            (unit) =>
            {
                Console.WriteLine("Subscription: OnNext " + threadIdOfAction + ", " + threadIdOfSubscriptionContect);
                subscriptionWasCalled = true;
            },
            (ex) => evt.Set(), () => evt.Set());

        evt.WaitOne();

        Console.WriteLine("After subscription");

        Assert.AreNotEqual(-42, threadIdOfAction);
        Assert.AreNotEqual(-43, threadIdOfSubscriptionContect);
        Assert.AreNotEqual(threadIdOfAction, threadIdOfSubscriptionContect);
        Assert.That(subscriptionWasCalled);
    }

    [Test]
    public void RxActionUtilities_MakeObservableFromAction_IsCancellable()
    {
        ManualResetEvent evt = new ManualResetEvent(false);

        // Timeout of this test if sth. goes wrong below
        Task.Factory.StartNew(() =>
        {
            Thread.Sleep(5000);
            Console.WriteLine("Test timed out!");
            evt.Set();
        });

        int threadIdOfAction = -42;
        int threadIdOfSubscriptionContect = -43;
        bool subscriptionWasCalled = false;
        bool actionTerminated = false;

        Action action = () =>
        {
            threadIdOfAction = Thread.CurrentThread.ManagedThreadId;

            for (int i = 0; i < 10; ++i)
            {
                Console.WriteLine("Some action #" + i);

                Thread.Sleep(200);
            }

            actionTerminated = true;
            evt.Set();
        };

        var observable = RxActionUtilities.MakeObservable_2(action);

        threadIdOfSubscriptionContect = Thread.CurrentThread.ManagedThreadId;
        Console.WriteLine("Before subscription on thread " + threadIdOfSubscriptionContect);

        var subscription =
            observable.SubscribeOn(TaskPoolScheduler.Default).Subscribe(
                (unit) =>
                {
                    Console.WriteLine("Subscription: OnNext " + threadIdOfAction + ", " + threadIdOfSubscriptionContect);
                    subscriptionWasCalled = true;
                },
                (ex) => evt.Set(), () => evt.Set());

        Console.WriteLine("After subscription");

        Thread.Sleep(1000);
        Console.WriteLine("Killing subscription ...");
        subscription.Dispose();
        Console.WriteLine("... done.");

        evt.WaitOne();

        Assert.IsFalse(actionTerminated);

        Assert.AreNotEqual(-42, threadIdOfAction);
        Assert.AreNotEqual(-43, threadIdOfSubscriptionContect);

        Assert.AreEqual(threadIdOfAction, threadIdOfSubscriptionContect);
        Assert.That(subscriptionWasCalled);
    } 
```

### 更新

作为对李的详尽回答的回应，我再次尝试并重新提出我的问题。IIUC 我们可以总结一下

*   您无法停止已经开始的操作
*   我完全误解了 Dispatcher.CurrentDispatcher 以及它是如何工作的：AFAICS 它不应该用作 SubscribeOn() 的参数，而只能用作 ObserveOn 的参数。
*   我误解了 CurrentThreadScheduler

为了创建可取消的东西，我们需要一个知道取消的动作，例如通过使用`Action<CancellationToken>`. 这是我的下一次尝试。请告诉我你是否认为这个实现很适合 Rx 框架，或者我们是否可以再次改进它：

```
public static IObservable<Unit> 
    MakeObservable(Action<CancellationToken> action, IScheduler scheduler)
{
    return Observable.Create<Unit>(
        observer
        =>
        {
            // internally creates a new CancellationTokenSource
            var cancel = new CancellationDisposable(); 

            var scheduledAction = scheduler.Schedule(() =>
            {
                try
                {
                    action(cancel.Token);
                    observer.OnCompleted();
                }
                catch (Exception ex)
                {
                    observer.OnError(ex);
                }
            });

            // Cancellation before execution of action is performed 
            // by disposing scheduledAction
            // Cancellation during execution of action is performed 
            // by disposing cancel
            return new CompositeDisposable(cancel, scheduledAction);
        });
} 
```

如果你正在这样做：我不知道如何使用`TestScheduler`s 来测试它：

```
[Test]
public void MakeObservableFromCancelableAction_CancellationTakesPlaceWithTrueThread()
{
    var scheduler = NewThreadScheduler.Default;

    Action<CancellationToken> action =
        (cancellationToken) =>
        {
            for (int i = 0; i < 10; ++i)
            {
                Console.WriteLine("Some action #" + i);

                if (cancellationToken.IsCancellationRequested)
                {
                    break;
                }

                Thread.Sleep(20);
                // Hoping that the disposal of the subscription stops 
                // the loop before we reach i == 4.
                Assert.Less(i, 4);
            }
        };

    var observable = RxActionUtilities.MakeObservable(action, scheduler);

    var subscription = observable.Subscribe((unit) => { });

    Thread.Sleep(60);

    subscription.Dispose();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T17:04:39.190

我认为你可以让你的代码更简单，你也可以让你的测试更简单。Rx 的美妙之处在于您应该能够取消所有任务/线程/ManualResetEvent。另外我假设您也可以只使用 NUnit 的 [Timeout] 属性而不是您的自定义代码。

无论如何... @Per 是对的， Observable.Start 是您正在寻找的。你向它传递了一个 Action 和一个 IScheduler，这看起来正是你想要的。

```
[Test]
public void Run_Action_as_IOb_on_scheduler_with_ObStart()
{
    var scheduler = new TestScheduler();
    var flag = false;
    Action action = () => { flag = true; };

    var subscription = Observable.Start(action, scheduler)
                                    .Subscribe();

    Assert.IsFalse(flag);
    scheduler.AdvanceBy(1);
    Assert.IsTrue(flag);
    subscription.Dispose(); //Not required as the sequence will have completed and then auto-detached.
} 
```

但是您可能会注意到它确实有一些奇怪的行为（至少在我在这台 PC 上的 V1 中）。具体来说，Observable.Start 将立即运行 Action，而不是真正等待 observable 序列被订阅。同样由于这个原因，调用订阅，然后在操作应该执行之前处理订阅没有效果。嗯。

```
[Test]
public void Run_Action_as_IOb_on_scheduler_with_ObStart_dispose()
{
    var scheduler = new TestScheduler();
    var flag = false;
    Action action = () => { flag = true; };

    var subscription = Observable.Start(action, scheduler).Subscribe();

    Assert.IsFalse(flag);
    subscription.Dispose();
    scheduler.AdvanceBy(1);
    Assert.IsFalse(flag);   //FAILS. Oh no! this is true!
}
[Test]
public void Run_Action_as_IOb_on_scheduler_with_ObStart_no_subscribe()
{
    var scheduler = new TestScheduler();
    var flag = false;
    Action action = () => { flag = true; };

    Observable.Start(action, scheduler);
    //Note the lack of subscribe?!

    Assert.IsFalse(flag);
    scheduler.AdvanceBy(1);
    Assert.IsFalse(flag);//FAILS. Oh no! this is true!
} 
```

但是，我们可以按照您的方式使用 Observable.Create。但是，您非常接近，您不需要在 Create 委托中进行任何调度。相信 Rx 会为你做这件事。

```
[Test]
public void Run_Action_as_IOb_on_scheduler_with_ObCreate()
{
    var scheduler = new TestScheduler();
    var flag = false;
    Action action = () => { flag = true; };

    var subscription = Observable.Create<Unit>(observer =>
        {
            try
            {
                action();
                observer.OnNext(Unit.Default);
                observer.OnCompleted();
            }
            catch (Exception ex)
            {
                observer.OnError(ex);
            }
            return Disposable.Empty;
        })
        .SubscribeOn(scheduler)
        .Subscribe();   //Without subscribe, the action wont run.

    Assert.IsFalse(flag);
    scheduler.AdvanceBy(1);
    Assert.IsTrue(flag);
    subscription.Dispose(); //Not required as the sequence will have completed and then auto-detached.
}

[Test]
public void Run_Action_as_IOb_on_scheduler_with_ObCreate_dispose()
{
    var scheduler = new TestScheduler();
    var flag = false;
    Action action = () => { flag = true; };

    var subscription = Observable.Create<Unit>(observer =>
    {
        try
        {
            action();
            observer.OnNext(Unit.Default);
            observer.OnCompleted();
        }
        catch (Exception ex)
        {
            observer.OnError(ex);
        }
        return Disposable.Empty;
    })
        .SubscribeOn(scheduler)
        .Subscribe();   //Without subscribe, the action wont run.

    Assert.IsFalse(flag);
    subscription.Dispose();
    scheduler.AdvanceBy(1);
    Assert.IsFalse(flag);   //Subscription was disposed before the scheduler was able to run, so the action did not run.
} 
```

如果您希望能够在正在处理的动作中途取消实际动作，那么您将需要做一些比这更高级的事情。

最终实现很简单：

```
public static class RxActionUtilities
{
    /// <summary>
    /// Makes an observable out of an action. Only at subscription the task will be executed. 
    /// </summary>
    /// <param name="action">The action.</param>
    /// <returns></returns>
    /// <example>
    /// <code>
    /// <![CDATA[
    /// RxActionUtilities.MakeObservable_3(myAction)
    ///                  .SubscribeOn(_schedulerProvider.TaskPoolScheduler)
    ///                  .Subscribe(....);
    /// 
    /// ]]>
    /// </code>
    /// </example>
    public static IObservable<Unit> MakeObservable_3(Action action)
    {
        return Observable.Create<Unit>(observer =>
            {
                try
                {
                    action();
                    observer.OnNext(Unit.Default);
                    observer.OnCompleted();
                }
                catch (Exception ex)
                {
                    observer.OnError(ex);
                }
                return Disposable.Empty;
            });
    }
} 
```

我希望这会有所帮助。

编辑：在您的单元测试中使用 Dispatcher。我认为首先你应该尝试理解它是如何工作的，然后再应用另一个层（Rx）来增加混乱。在 WPF 中编码时，Rx 给我带来的主要好处之一是通过调度程序对调度程序进行抽象。它使我可以轻松地测试 WPF 中的并发性。例如，这里的这个简单测试失败了：

```
[Test, Timeout(2000)]
public void DispatcherFail()
{
    var wasRun = false;
    Action MyAction = () =>
        {
            Console.WriteLine("Running...");
            wasRun = true;
            Console.WriteLine("Run.");
        };
    Dispatcher.CurrentDispatcher.BeginInvoke(MyAction);

    Assert.IsTrue(wasRun);
} 
```

如果你运行它，你会注意到甚至没有任何东西打印到控制台，所以我们没有竞争条件，这个动作永远不会运行。原因是调度程序没有启动它的消息循环。为了纠正这个测试，我们必须用杂乱的基础设施代码来填充它。

```
[Test, Timeout(2000)]
public void Testing_with_Dispatcher_BeginInvoke()
{
    var frame = new DispatcherFrame();  //1 - The Message loop
    var wasRun = false;
    Action MyAction = () =>
    {
        Console.WriteLine("Running...");
        wasRun = true;
        Console.WriteLine("Run.");
        frame.Continue = false;         //2 - Stop the message loop, else we hang forever
    };
    Dispatcher.CurrentDispatcher.BeginInvoke(MyAction);

    Dispatcher.PushFrame(frame);        //3 - Start the message loop

    Assert.IsTrue(wasRun);
} 
```

因此，我们显然不想对所有需要 WPF 并发的测试执行此操作。尝试将 frame.Continue=false 注入我们无法控制的操作将是一场噩梦。幸运的是，IScheudler 通过它的 Schedule 方法公开了我们需要的所有东西。

Next CurrentThreadScheduler 应该被认为是一个 Trampoline，而不是一个 SynchronizationContext（我认为你认为它是这样的）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-17T13:25:37.083

我认为 Observable.Start 是您正在寻找的。 [http://msdn.microsoft.com/en-us/library/system.reactive.linq.observable.start(v=vs.103).aspx](http://msdn.microsoft.com/en-us/library/system.reactive.linq.observable.start(v=vs.103).aspx)

# ios - 键盘出现时 UITableViewController 没有向上滚动活动文本字段的任何原因？

> ID：13877556
> 
> 赞同：5
> 
> 时间：2012-12-14T11:13:20.513
> 
> 标签：ios, uitextfield, uitableview, uikeyboard

我有一个 UITableViewController，其中包含具有 UITextField 的单元格的表格。当键盘出现以在这些文本字段中添加或编辑文本时，这些字段必须向上移动，以免被键盘遮挡。这应该由 UITableViewController 自动处理：

来自[苹果：](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/TableViewAndDataModel/TableViewAndDataModel.html#//apple_ref/doc/uid/TP40007451-CH5-SW7)

> 注意：表格视图控制器支持表格视图行的内联编辑；例如，如果行在编辑模式下嵌入了文本字段，它会在显示的虚拟键盘上方滚动正在编辑的行。

问题可能是我使用的是 SplitViewController，UITableViewController 在右侧（较大的拆分），另一个视图在左侧拆分。

我错过了什么？是否只有某些情况 UITableViewController 会处理这个而不是其他情况？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-16T02:11:44.080

我有同样的问题。就我而言，我忘记打电话了：

```
[super viewWillAppear:animated]; 
```

请参阅：[当键盘出现时 UITableViewController 不滚动视图](https://stackoverflow.com/questions/11243712/uitableviewcontroller-not-scrolling-view-when-keyboard-appears)

# python - Django 是否有现成的模块用于按比例格式化距离？

> ID：13877559
> 
> 赞同：2
> 
> 时间：2012-12-14T11:13:23.947
> 
> 标签：python, django, django-templates

例如，距离以米为单位。
程序应按比例格式化值：

```
if distance < 100:
    return '%dm' % distance
elif distance < 1000:
    return '%.0fm' % round(distance, -1)
else:
    import math
    m, km = math.modf(distance / 1000.0)
    if m < 0.01:
        return '%.0fkm' % km
    else:
        return '%.1fkm' % km + round(m, 1) 
```

使用现有的解决方案会很棒。

更新：[django-distanceformatting](https://github.com/mhalairt/django-distanceformatting)已启动，但问题仍未解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T22:22:21.257

有一些用于 Python 的通用单元处理模块，它们可以包装在模板标签中（没有特定顺序）：

*   [数量](http://packages.python.org/quantities/)
*   [白金汉](https://code.google.com/p/buckingham/)
*   [单位](https://bitbucket.org/adonohue/units)
*   [乌姆](http://home.scarlet.be/be052320/Unum.html)

也许其中之一可以为您提供所需的东西。但我仍然坚持我之前的评论，如果你只需要这么少的功能，你不应该费心重新发明轮子（或你的一小部分）。

仔细查看您的代码后，我发现了一些不一致之处：

*   1.99999 返回为 1m（应该是 2m）
*   我假设您想保留两位有效数字，但 1.2 返回为 1m 或 0.12 作为 0m
*   最后一行需要在值元组周围加上括号

这是您的函数的更一致和简洁的版本（加上一些环绕测试）：

```
from math import modf
def old_dist_format(distance):
    if distance < 100:
        return '%dm' % distance
    elif distance < 1000:
        return '%.0fm' % round(distance, -1)
    else:
        m, km = modf(distance / 1000.0)
        if m < 0.01:
            return '%.0fkm' % km
        else:
            return '%.1fkm' % (km + round(m, 1))

def dist_format(distance):
    rounded = float('%.2g' % distance)
    km = modf(rounded / 1000.0)
    if km[1]:
        return "%gkm" % (km[0] + km[1])
    else:
        return "%gm" % rounded

if __name__ == "__main__":
    while True:
        try:
            s = raw_input("> ")
            try:
                d = float(s)
            except ValueError:
                print "Enter number"
                continue
            print "%s\t%s" % (dist_format(d), old_dist_format(d))
        except KeyboardInterrupt:
            print
            break 
```

新函数的第一行`dist_format()`始终保留两位有效数字。如果不需要，%g 会忽略小数点后的所有内容。警告：我的函数将为您提供（天文）距离 >= 1000000000 的指数符号。

# sql - 使用分层查询生成 BOM

> ID：13877568
> 
> 赞同：2
> 
> 时间：2012-12-14T11:13:48.903
> 
> 标签：sql, sql-server, recursion, hierarchy, sql-server-2012

我有 Microsoft SQL Server 2012，并且有一个表包含有关 BOM（物料清单）的所有信息。数据格式如下：

```
Item   | SubItem  | Quantity
item_1 | item_2   | 2
item_1 | item_3   | 3
item_1 | item_4   | 2
item_2 | item_5   | 2
item_2 | item_6   | 2 
```

等等...

因此，如果我想要 10 件 item_1，那么它必须将所有项目和项目子项目的数量乘以这个乘数。我想通过查询来实现这种结果：

```
item_1 - 10pcs - 1 lvl
  item_2 - 20pcs - 2 lvl
    item_5 - 40pcs - 3 lvl
    item_6 - 40pcs - 3 lvl 
  item_3 - 30pcs - 2 lvl
  item_4 - 20pcs - 2 lvl 
```

任何提示如何以一种好的方式实现这一点？如果这不可能与查询有关，那么我的另一个选择是在 Excel 的 VBA 中执行所有技巧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:42:35.993

这可以通过递归查询来完成。这里有一些让你开始的东西：

```
with all_item_counts as (
select item, subitem, quantity as q, 0 as level from bom
union all 
select all_item_counts.item, bom.subitem, quantity * q, level + 1 
    from all_item_counts
    join bom on bom.item = all_item_counts.subitem
)
select item,subitem,sum(q) from all_item_counts
   group by item, subitem
   order by item, subitem 
```

`subItem`查询的结果是每个需要的总数`item`。

您可以在[这里看到它在 SQLFiddle](http://sqlfiddle.com/#!6/0738b/1)中工作。我在您的示例数据中添加了一些内容，以表明更复杂的案例有效。

# android - 如何从图像视图中删除位图？

> ID：13877571
> 
> 赞同：1
> 
> 时间：2012-12-14T11:14:05.613
> 
> 标签：android

我正在从 url 解码图像，并且我有一组不同的 url，我想在 imageview 中显示从 url 解码的位图图像，但只显示来自最后一个 url 的图像。我无法理解这个问题。

```
String  [] imageLocation={"http://wallbase1.org/thumbs/rozne/thumb-499842.jpg","http:   //ns3002439.ovh.net/thumbs/rozne/thumb-2493796.jpg","http://ns3002439.ovh.net/thumbs/rozne/thumb-2486664.jpg"};
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
       image_view = (ImageView)findViewById(R.id.imageview);

   while(i<2)
    {
  bitmap=loadImage(imageLocation[i]);
    image_view.setImageBitmap(bitmap);

   Animation rotate = AnimationUtils.loadAnimation(LoadImageActivity.this, R.anim.rotate);
     findViewById(R.id.imageview).startAnimation(rotate);
     i++;
        }

 }

 public  Bitmap loadImage(String image_location){

      URL imageURL = null;

      try {
          imageURL = new URL(image_location);
        } 

      catch (MalformedURLException e) {
          e.printStackTrace();
        }

      try {
          HttpURLConnection connection= (HttpURLConnection)imageURL.openConnection();
          connection.setDoInput(true);
          connection.connect();
          InputStream inputStream = connection.getInputStream();

          bitmap = BitmapFactory.decodeStream(inputStream);//Convert to bitmap

      }
      catch (IOException e) {

           e.printStackTrace();
      }
    return bitmap;
 }
} 
```

# xcode - Xcode：Apple Mach-O 链接器错误：架构 i386 的未定义符号

> ID：13877574
> 
> 赞同：0
> 
> 时间：2012-12-14T11:14:12.183
> 
> 标签：xcode

这是我的代码。运行此程序时，出现以下错误。,,

> 体系结构 i386 的未定义符号：
> “_OBJC_CLASS_$_Reachability”，引用自：
> ASKViewController.o 中的 objc-class-ref
> ld：未找到体系结构 i386 的符号
> clang：错误：链接器命令失败，退出代码为 1（使用 -v查看调用）

```
-(void) checknetork{

    Reachability *reach=[Reachability reachabilityWithHostName:@"http://www.google.com.sg"];
    NetworkStatus netstatus=[reach currentReachabilityStatus];
    bool net;
    switch (netstatus)
    {
        case NotReachable:
            net=NO;
            break;
        case ReachableViaWiFi:
            net=YES;
            break;
        case ReachableViaWWAN:
            net=YES;
            break;
    }

    if (net)
    {
        HUD.labelText=@"Connecting.,,";
        HUD.customView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@""]];
        HUD.mode = MBProgressHUDModeCustomView;
        [HUD hide:YES afterDelay:2];
        return;
    }
    else
    {
        UIAlertView *alert=[[UIAlertView alloc] initWithTitle:@"Alert.!" message:@"Check Your Network Connection.!" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alert show];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:23:06.167

选择目标去构建阶段选择编译源点击+并选择rechability.m你排序

# javascript - 引用元素的id

> ID：13877576
> 
> 赞同：2
> 
> 时间：2012-12-14T11:14:14.313
> 
> 标签：javascript, html

我有几个链接可以在带有 javascript 的播放器中播放视频。从链接中引用玩家 id 以使这些链接可访问且语法正确的最佳方法是什么？这类似于在标签元素中使用 for 属性。

```
 <a href="video" rel="playerid">video</a>
    <a href="video" data-playerid="playerid">video</a>
    <a href="video" itemref="playerid">video</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T11:15:16.500

你的第二个，使用[`data-*`属性](http://www.w3.org/TR/html5/global-attributes.html#embedding-custom-non-visible-data-with-the-data-%2a-attributes)：

```
<a href="video" data-playerid="playerid">video</a> 
```

`rel`如果玩家 ID 不同，我不相信您使用的第一个示例有效，因为尽管您[可以添加到](http://www.w3.org/TR/html5/links.html#other-link-types)有效值[列表中](http://www.w3.org/TR/html5/links.html#linkTypes)（感谢您指出这一点！），但`rel`仍然表示关系*类型*（例如，`rel="icon"`或`rel="canonical"`），不是某物的 ID（即 URI 中的 URI `href`）。

您的第三个使用没有`data-`前缀的自定义属性，使 HTML 无效。

所以我认为第二个，the `data-*`，是要走的路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:32:49.503

我会用这样的东西

```
<a href="/js_error.html" onclick="Play('id'); return false;">...</a> 
```

这通常是我混合 javasript 和链接的首选方法。如果用户端 js 出现问题，会显示错误页面。“返回错误；” 只要 Play() 函数正确执行，bit 就应该让你留在页面上。以我的经验，这是处理此类问题的一种持久且兼容的方式。

问候

# android - 收到错误“指定的孩子已经有父母。您必须先在孩子的父母上调用 removeView()。”？

> ID：13877581
> 
> 赞同：-4
> 
> 时间：2012-12-14T11:14:36.080
> 
> 标签：android, layout, view

> **可能重复：**
> [首先在孩子的父母上调用 removeView()](https://stackoverflow.com/questions/6526874/call-removeview-on-the-childs-parent-first)

我的活动由 3 个相应的线性布局内的 3 个 Listview 组成。我得到“指定的孩子已经有一个父母。您必须首先在孩子的父母上调用 removeView()。” 当我尝试在列表视图之间切换时出现错误。当我一个接一个地进行时它工作正常。请帮助我提供一个片段或示例来解决这个问题。谢谢。

我的错误日志是

```
12-14 15:32:50.017: E/AndroidRuntime(5102): java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first.
12-14 15:32:50.017: E/AndroidRuntime(5102):     at android.view.ViewGroup.addViewInner(ViewGroup.java:1976)
12-14 15:32:50.017: E/AndroidRuntime(5102):     at android.view.ViewGroup.addView(ViewGroup.java:1871)
12-14 15:32:50.017: E/AndroidRuntime(5102):     at android.view.ViewGroup.addView(ViewGroup.java:1828)
12-14 15:32:50.017: E/AndroidRuntime(5102):     at android.view.ViewGroup.addView(ViewGroup.java:1808)
12-14 15:32:50.017: E/AndroidRuntime(5102):     at com.kk.World.TheWorld.getView(TheWorld.java:629)
12-14 15:32:50.017: E/AndroidRuntime(5102):     at com.kk.World.TheWorld.onClick(TheWorld.java:428)
12-14 15:32:50.017: E/AndroidRuntime(5102):     at android.view.View.performClick(View.java:2538)
12-14 15:32:50.017: E/AndroidRuntime(5102):     at android.view.View$PerformClick.run(View.java:9152)
12-14 15:32:50.017: E/AndroidRuntime(5102):     at android.os.Handler.handleCallback(Handler.java:587)
12-14 15:32:50.017: E/AndroidRuntime(5102):     at android.os.Handler.dispatchMessage(Handler.java:92)
12-14 15:32:50.017: E/AndroidRuntime(5102):     at android.os.Looper.loop(Looper.java:130)
12-14 15:32:50.017: E/AndroidRuntime(5102):     at android.app.ActivityThread.main(ActivityThread.java:3687)
12-14 15:32:50.017: E/AndroidRuntime(5102):     at java.lang.reflect.Method.invokeNative(Native Method)
12-14 15:32:50.017: E/AndroidRuntime(5102):     at java.lang.reflect.Method.invoke(Method.java:507)
12-14 15:32:50.017: E/AndroidRuntime(5102):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
12-14 15:32:50.017: E/AndroidRuntime(5102):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
12-14 15:32:50.017: E/AndroidRuntime(5102):     at dalvik.system.NativeStart.main(Native Method) 
```

我的看法是

```
 <ListView
        android:id="@id/android:list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@android:color/transparent"
        android:cacheColorHint="#00000000" />
</LinearLayout>

<LinearLayout
    android:id="@+id/statelayoutStg"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_below="@id/state_ll"
    android:background="@drawable/mesh"
    android:orientation="vertical"
    android:visibility="invisible" >

    <ListView
        android:id="@id/android:list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@android:color/transparent"
        android:cacheColorHint="#00000000" />
</LinearLayout>

<LinearLayout
    android:id="@+id/citylayoutStg"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_below="@id/city_ll"
    android:background="@drawable/mesh"
    android:orientation="vertical"
    android:visibility="invisible" >

    <ListView
        android:id="@id/android:list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@android:color/transparent"
        android:cacheColorHint="#00000000" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T11:17:13.783

我认为您不可能为`@id/android:list`单个`ListActivity`. 这应该是确切的原因。

如果您需要使用 3 个 ListView，那么我建议您扩展 Activity 并使用自定义适配器。由于您使用相同的 ID，因此会引发冲突。

但是从我的经验来看，在同一个屏幕上拥有多个 ListView 并不是设计 UI 的好方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T11:19:13.193

你有 3 个相同的列表视图，`android:id`你不能这样做。

```
<ListView
    android:id="@id/android:list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@android:color/transparent"
    android:cacheColorHint="#00000000" /> 
```

在没有看到您的 inflate getView 方法的情况下，我只能猜测它会尝试添加`ListView`视图膨胀时的第一个实例。

将 id 更改为类似 `@+id/list_view_1` `@+id/list_view_2` `@+id/list_view_3`

这应该可以解决问题。

此外，如果您正在使用`ListViewActivity`，或者`ListViewFragment`您将不得不使用默认类，并且`getViewById()`您将使用任何其他视图。

# jquery - Jquery Datepicker 上的区域 - Ruby On Rails

> ID：13877583
> 
> 赞同：0
> 
> 时间：2012-12-14T11:14:39.760
> 
> 标签：jquery, ruby-on-rails-3, jquery-ui-datepicker

我有 date.js.coffee

```
jQuery ->
  $('#school_date').datepicker({ dateFormat: 'yy-mm-dd' });
  $("#school_date").datepicker("option",
      $.datepicker.regional["id"]) 
```

但不工作..

如何在 jquery datapicker 上添加区域？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:32:21.393

所需的本地化文件应包含在主要日期选择器代码之后并初始化脚本

```
$("#school_tanggal").datepicker($.datepicker.regional[ "fr" ]); 
```

# c# - 如何配置 WCF 以使用带有客户端证书的 HTTP？

> ID：13877585
> 
> 赞同：1
> 
> 时间：2012-12-14T11:14:52.477
> 
> 标签：c#, asp.net, wcf, ssl, transport

如何配置 WCF 以使用带有客户端证书的 HTTP（无 ssl）？

在服务方面，我尝试了以下方法：

```
<bindings>
            <basicHttpBinding>
                <binding name="binding1">
                    <security mode="TransportCredentialOnly">
                        <transport clientCredentialType="Certificate"></transport>
                    </security>
                </binding>
            </basicHttpBinding>
        </bindings 
```

但它抱怨说：

```
Certificate-based client authentication is not supported in TransportCredentialOnly security mode. Select the Transport security mode. 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T13:25:56.560

I don't think I fully understand your question.

If you want to configure the security on you binding (basicHttpBinding) to use a client certificate (to authenticate the client) the only way to do this on http as far as I know is to use message security, you can find an example in the [wcf samples](http://msdn.microsoft.com/en-us/library/ms751503%28v=vs.100%29.aspx).

As stated by the resulting exception and also [on a Distributed Services Support Team blog](http://blogs.msdn.com/b/distributedservices/archive/2010/05/13/wcf-and-intermediate-devices.aspx):

> Note: With the TransportCredentialOnly mode, you cannot use Certificate-based client authentication: Certificate-based client authentication is not supported in TransportCredentialOnly security mode.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T13:30:05.503

我从您的问题中了解到，您想使用尚未由 CA（证书颁发机构）颁发的自定义证书。

在这种情况下，您需要在服务器上安装相同的，如果您在 .NET 中使用它们，它们也需要在 IIS 中附加到您的网站。

希望这有效

# android - Android 订阅取消 -> 如何获知以及如何测试？

> ID：13877595
> 
> 赞同：2
> 
> 时间：2012-12-14T11:15:22.647
> 
> 标签：android

我在 Google Play 上创建了每月订阅（包括 7 天试用）。

我刚买了它，回调通过`onPurchaseStateChange`完美。但后来我取消了订阅购买。

我仍然（10 小时后）收到订阅已购买未取消的信息。

*   试用期过后会取消吗？
*   或者这些信息将如何传输？
*   我如何测试取消行为？

感谢您提前回复。

问候， 约臣

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-24T17:04:38.000

是的，这有点令人困惑。以下是解释它发生原因的[文档：](http://developer.android.com/google/play/billing/billing_subscriptions.html#cancellation)

> 当用户取消订阅时，Google Play 不会为当前的结算周期提供退款。相反，它允许用户在当前计费周期结束之前访问已取消的订阅，届时它会终止订阅。例如，如果用户购买了每月订阅并在周期的第 15 天取消它，Google Play 将认为订阅在第 30 天（或其他日期，具体取决于月份）结束之前有效。

因此，即使您取消订阅，它仍然有效，直到当前周期结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-14T08:51:07.447

> 试用期过后会取消吗？

*   否，如果在试用期结束时被用户取消。

> 或者这些信息将如何传输？

*   当您的订阅到期（或取消）时，您将不会在库存中获得任何有关它的信息。因此库存大小将为零，因此您可以确定订阅（任何或全部）已取消。

> 我如何测试取消行为？

*   创建一个测试 SKU，将价格设置为 1 美元，然后进行测试。没有别的办法，而且是值得的。而不是花费数小时寻找没有结果。

# windows-installer - 用户是否卸载旧版本产品的选项

> ID：13877605
> 
> 赞同：0
> 
> 时间：2012-12-14T11:16:09.347
> 
> 标签：windows-installer, installscript, installshield-2012

我正在使用 InstallShield 12 创建安装程序，并希望为用户提供选项，例如用户是否要卸载或保留以前的版本并可以安装新版本的复选框。

有谁知道我怎么能实现上述目标？

我在对话框上添加了一个复选框并添加了一个属性，如果用户选择它，则卸载以前的版本，否则继续使用新版本而不卸载以前的版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T18:53:00.120

我认为您所描述的内容在 MSDN 文档中被称为[安装产品和补丁的多个实例](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/5147ecbd-c395-4a8f-972d-f5c5b2173eff)。您将需要编写实例转换（基本上是产品代码转换），因为如果产品代码保持不变，则只能在机器上下文中安装一个实例，并且在每个用户上下文中只能安装一个实例。

这里有一些关于如何创作和应用实例转换的信息：

[使用实例转换创作多个实例](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/aa367797)

[使用实例转换安装多个实例](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/aa369528)

# c# - 如何调用方法

> ID：13877617
> 
> 赞同：-5
> 
> 时间：2012-12-14T11:16:57.637
> 
> 标签：c#, methods

我的原始 DoWork 方法是：

```
private static void DoWork(string dirPath) 
```

我使用以下方法从我的 Main 方法中调用它：

```
DoWork(@"C:\location"); 
```

但是我已将 DoWork 方法更改为以下内容。

```
private static void DoWork(string sourceDir, string fileType) 
```

我很困惑如何从我的主要方法中调用它，我是 c# 的新手，并且查看了 MSDN 站点，但为了获得一些见解，但我似乎找不到与我的问题相关的任何内容。任何指导将不胜感激。

我的 DoWork 方法的片段：

```
 private static void DoWork(string sourceDir, string fileType)
    {

        // Function: Get specified files (fileType) form sub-directory (sourceDir)
        // Return: void
            {
    string[] dirEntries = Directory.GetDirectories(@"c:\fileDump");
    string fileName, filePath, fullFileName;

    foreach (string subDir in dirEntries)
{
    DirectoryInfo dir = new DirectoryInfo(subDir);
    FileInfo[] imgFiles = dir.GetFiles("*.xml");

    foreach (FileInfo imgFile in imgFiles)
{
    fileName = imgFile.Name;
    filePath = imgFile.DirectoryName;
    fullFileName = "filePath + “\\” + fileName"; 
```

[从这里开始的代码](http://devarea.wordpress.com/2008/06/25/how-to-loop-through-all-files-in-a-folder-using-c/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T11:45:53.380

所以，我想，你想调用一个只适用于某种文件的方法。
那么你的代码应该是这样的

```
 private static void DoWork(string sourceDir, string fileType)
 {
      string[] fileEntries = Directory.GetFiles(sourceDir, fileType, 
                             SearchOption.AllDirectories);
      foreach (string fullFileName in fileEntries)
      {
            ....
      }
 } 
```

并以这种方式从 Main 方法中调用它

```
 // Work on every JPG file in source location and subdirectory of the initial location
 DoWork(@"c:\location", "*.jpg"); 
```

[Directory.GetFiles](http://msdn.microsoft.com/en-US/library/ms143316%28v=vs.100%29.aspx)方法可以采用三个参数来指定源位置、匹配文件的文件模式以及触发对初始文件夹的所有子文件夹的递归搜索的枚举。

# c++ - 如何在 C++ builder 中隐藏任务栏的表单？

> ID：13877618
> 
> 赞同：1
> 
> 时间：2012-12-14T11:17:04.267
> 
> 标签：c++, c++builder, show-hide, taskbar

我有一个简单的 VCL Forms 应用程序，如果正在使用，它会在任务栏按钮上开始显示，我想做的是隐藏这些按钮，这意味着无论这些按钮不出现的表单发生了什么。情况可以是显示或隐藏表单或任何其他但必须隐藏按钮，怎么做？

PS我看到这样的问题存在，但它们对我的事业不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T11:24:06.140

尝试以下方法：

*   将 MainFormOnTaskBar 设置为 false
*   调用 ShowWindow(Application->Handle, SW_HIDE); 在主窗体的 OnShow 事件处理程序中。
*   调用 ShowWindow(Application->Handle, SW_HIDE); 在主窗体的 OnActivate 事件处理程序中。

来源：[http ://delphi.about.com/od/delphitips2008/qt/hide_taskbutton.htm](http://delphi.about.com/od/delphitips2008/qt/hide_taskbutton.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-06T01:05:31.243

我不仅必须做 Spook 回答的事情，而且（感谢[http://codeverge.com/embarcadero.cppbuilder.ide/builder-c++-xe-and-hiding-taskbar/1073223](http://codeverge.com/embarcadero.cppbuilder.ide/builder-c++-xe-and-hiding-taskbar/1073223)）

```
void __fastcall TForm1::FormCreate(TObject *Sender)
{
  Application->MainFormOnTaskBar = false;
  DWORD dwExStyle = GetWindowLong(Application->Handle, GWL_EXSTYLE);
    dwExStyle &= ~WS_EX_APPWINDOW;
    dwExStyle |= WS_EX_TOOLWINDOW;
    SetWindowLong(Application->Handle, GWL_EXSTYLE, dwExStyle);
}
void __fastcall TForm1::FormActivate(TObject *Sender)
{
    ShowWindow(Application->Handle, SW_HIDE);
}
//---------------------------------------------------------------------------
void __fastcall TForm1::CreateParams(TCreateParams &Params)
{
    TForm::CreateParams(Params);
    Params.ExStyle &= ~WS_EX_APPWINDOW;
    Params.ExStyle |= WS_EX_TOOLWINDOW;
} 
```

# c# - 从 C# 中的设备句柄获取驱动器号

> ID：13877622
> 
> 赞同：4
> 
> 时间：2012-12-14T11:17:29.027
> 
> 标签：c#, windows, events

我正在使用一个小工具来记录 USB 设备中的活动。我的工具用作捕获所有设备事件的 Windows 服务，基本上我一捕获`DBT_DEVICEARRIVAL`事件就开始监视 USB 设备。在此之后，我需要在收到显示器后立即停止显示器`DBT_DEVICEQUERYREMOVE`（否则我的服务将拒绝设备安全弹出）。问题是该工具应该能够监控多个设备，因此我需要能够确定用户试图弹出哪个设备。我发现这个`DBT_DEVICEQUERYREMOVE`事件带有一个[`DEV_BROADCAST_HANDLE`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363245%28v=vs.85%29.aspx)结构。我试图从这个结构中提取一些有用的信息，这些信息可以让我识别正在弹出的设备。我发现有一个设备句柄，我尝试使用系统函数提取驱动器号[`GetFinalPathNameByHandle`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364962%28v=vs.85%29.aspx)但不能正常工作（返回空值）。知道我该怎么做吗？

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:36:22.907

因为答案似乎没有我想象的那么明显：呼叫`RegisterDeviceNotification`您感兴趣的每个设备，通过其句柄识别设备。由于您创建了注册，您将知道哪个驱动器号映射到哪个通知句柄。

# java - 代理相关代码的Java集成测试

> ID：13877625
> 
> 赞同：3
> 
> 时间：2012-12-14T11:17:35.670
> 
> 标签：java, networking, proxy, integration-testing

我正在开发一个需要与远程 HTTP 服务器通信的 Swing 应用程序。该应用程序可能会在代理后面使用。

然后我必须： - 自动检测网络代理（可能在同一网络上有几个） - 让用户手动输入代理配置。

我想编写一个集成测试来验证这些方面，而不必在每台 CI 机器和每台开发者机器上安装代理。我如何看待事物：

*   集成测试（使用junit）启动一个“嵌入式”代理（@BeforeClass）和一个有点虚拟的http服务器
*   我的测试（@Test）
    *   测试是否可以自动检测到此代理并打开与我的虚拟 http 服务器的连接并成功从中检索数据
    *   手动设置代理并执行与上面相同的测试

我听说过“littleProxy”组件，但还没有尝试过。

任何人都可以就解决我的问题的最佳方法提供一些建议/帮助/指导吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T15:44:29.237

我会考虑你是否在测试正确的东西。您不需要测试代理服务器或 Java 的网络类。

考虑使用这种从 URL 读取数据的实用程序类型：

```
public final class Network {
    public interface UrlOpener {
        public InputStream open(URL url) throws IOException;
    }

    private static UrlOpener urlOpener = new UrlOpener() {
        public InputStream open(URL url) throws IOException {
            return url.openStream();
        }
    };

    public static InputStream openUrl(URL url) throws IOException {
        return urlOpener.open(url);
    }

    public static void setUrlOpener(UrlOpener urlOpener) {
        Network.urlOpener = urlOpener;
    }
} 
```

这可以用作您的代码和 Java 的网络 I/O 之间的抽象层：

```
public class SomeType {
    public void processData(URL url) throws IOException {
        InputStream input = Network.openUrl(url);
        // process the data
    }
} 
```

您的测试使用这一层来模拟数据：

```
@Before public void setup() throws IOException {
    final URL mockUrl = this.getClass().getResource("/foo/bar.txt");
    Network.UrlOpener opener = Mockito.mock(Network.UrlOpener.class);
    Answer<InputStream> substituteUrl = new Answer<InputStream>() {
        public InputStream answer(InvocationOnMock invocation) throws Throwable {
            return mockUrl.openStream();
        }
    };
    Mockito.when(opener.open(Mockito.any(URL.class))).then(substituteUrl);
    Network.setUrlOpener(opener);
}

@Test public void testSomething() throws IOException {
    SomeType something = new SomeType();
    something.processData(new URL("http://example.com"));
} 
```

这可以节省任何与防火墙等有关的东西。

为了使这种方法发挥作用，您需要对来自真实服务器的一组记录事务有信心，以便在您的测试中使用。

这种方法可以与运行更全面集成测试的专用机器相辅相成。

# javascript - 字符串：拆分/匹配大写、空格、特殊字符

> ID：13877626
> 
> 赞同：2
> 
> 时间：2012-12-14T11:17:35.873
> 
> 标签：javascript, string, split, match, uppercase

我知道他们已经对这个主题提出了很多问题，但
我已经尝试过一段时间没有回答这个问题：

```
var string = "ABC hereWeAre Againwith Those words"; 
```

到

```
['A','B','C','here','We','Are','Againwith','Those','words']; 
```

（当有大写或空格时）。

我试过了：

```
string.match(/[A-Z]+|[a-z]+|[0-9]+|[\S]+/g);
string.match(/[a-z]+/gi); 
```

但没有任何工作。
谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T11:40:07.897

正确的正则表达式是：

```
"ABC hereWeAre Againwith Those words".match(/[A-Z][a-z]*|[a-z]+/g); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T11:33:04.707

在这里（有点复杂但仍然有效）：

```
"ABC hereWeAre Againwith Those words".replace(/([A-Z])/g, ' $1').trim().split(/\s+/);
// returns ["A", "B", "C", "here", "We", "Are", "Againwith", "Those", "words"] 
```

想法是找到大写字母，在前面加上空格，然后用空格修剪和分割整个字符串。注意将正则表达式传入`.split`以消除一个接一个多个空格的问题。

# php - java查询链接错误

> ID：13877628
> 
> 赞同：1
> 
> 时间：2012-12-14T11:17:39.510
> 
> 标签：php, javascript, mysql, database

我正在用 php mysql 生成网页。

javascript 文件不工作。它抛出错误 - 未声明纯文本文档的字符编码。如果文档包含 US-ASCII 范围之外的字符，则文档将在某些浏览器配置中呈现乱码。文件的字符编码需要在传输协议中声明或文件需要使用字节顺序标记作为编码签名。

这三个文件是：

第一个文件代码是：indexmain1.php

```
<!doctype html>
<html lang="en">
<head>
<title> Searching sites</title>
</head>
<body>
<input type="text" id="go" name="go" size="80"/>&nbsp;
<input type="submit" name="searchsite" id="submit" value="search site"/>
<div id="search_query"></div>
</body>
</html> 
```

第二个文件名：instant1.js

```
$('#go').keyup(function(){
var search_query=$(this).val();

$.post('search1.php',{search_query:search_query},function(searchq){

$('#search_query').html(searchq);
 }); 
```

});

第三个文件名：search1.php

```
<?
 mysql_connect("localhost","root","root");
 mysql_select_db("sachin");

 if(isset($_POST['search_query'])){
 echo $_POST['searchquery'];
 ?> 
```

现在我只是想显示在 indexmain.php 中完成的搜索，但即使我只是尝试回显搜索到的查询，它也没有显示任何结果。请帮助队友...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T08:59:29.527

您可以将 HTML 文件中的字符编码声明为 META 标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:34:39.223

为了让您的查询显示所有字符，您需要在 search1.php 文件中的“if”之前替换为：

```
<?php
$conn = mysql_connect("localhost","root","root");

mysql_select_db("sachin");
mysql_set_charset("UTF8", $conn); 
```

我敢肯定，在您的 search1.php 文件中，您在此处编写的代码更多...您有一个 IF 语句，后面没有 else 并且没有结束“}”...

UTF8 就是一切。让我知道它是否有效。在我的剧本上做了。

# c# - 如何使用 EWS 托管 API 从 PublicFolders 的文件夹和子文件夹中获取所有项目

> ID：13877629
> 
> 赞同：14
> 
> 时间：2012-12-14T11:17:39.120
> 
> 标签：c#, api, exchange-server, exchangewebservices

如何从 Exchange server2010 uisng 托管 API 中的“公共文件夹”及其“子文件夹”中检索所有项目？？？

```
rootfolder = Folder.Bind(service,WellKnownFolderName.PublicFoldersRoot);
rootfolder.Load();                                             
foreach (Folder folder in rootfolder.FindFolders(new FolderView(int.MaxValue)))
{
FindItemsResults<Item> findResults = folder.FindItems(iv); 
 foreach (Item item in findResults)

         {
            //get item info;
         } 
} 
```

“如果我这样做，我不会得到它的子文件夹中存在的项目..公共文件夹也不支持深度遍历查询..我怎样才能从公共文件夹的子文件夹中获取项目？？？”

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-03-07T16:37:31.253

要获取所有文件夹，请使用以下代码：

```
public void GetAllFolders(ExchangeService service, List<Folder> completeListOfFolderIds)
    {
        FolderView folderView = new FolderView(int.MaxValue);
        FindFoldersResults findFolderResults = service.FindFolders(WellKnownFolderName.PublicFoldersRoot, folderView);
        foreach (Folder folder in findFolderResults)
        {
            completeListOfFolderIds.Add(folder);
            FindAllSubFolders(service, folder.Id, completeListOfFolderIds);
        }
    }

private void FindAllSubFolders(ExchangeService service, FolderId parentFolderId, List<Folder> completeListOfFolderIds)
    {
        //search for sub folders
        FolderView folderView = new FolderView(int.MaxValue);
        FindFoldersResults foundFolders = service.FindFolders(parentFolderId, folderView);

        // Add the list to the growing complete list
        completeListOfFolderIds.AddRange(foundFolders);

        // Now recurse
        foreach (Folder folder in foundFolders)
        {
            FindAllSubFolders(service, folder.Id, completeListOfFolderIds);
        }
    } 
```

获取所有项目：

```
List<Folder> completeListOfFolderIds = new List<Folder>();
//Fills list with all public folders and subfolders
GetAllFolders(service, completeListOfFolderIds);
foreach(Folder folder in completeListOfFolderIds)
{
ItemView itemView = new ItemView(int.MaxValue);
FindItemsResults<Item> searchResults = service.FindItems(folder.Id, itemView);
//do something with item list    
} 
```

仅供参考 FindFolders /FindItems 仅返回前 1000 个项目，因此如果您有大量结构，则必须更改此代码以克服该问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T16:10:07.283

您需要执行公共文件夹树的递归遍历。您不能对公用文件夹执行深度遍历。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-02-19T23:51:05.843

```
public IEnumerable<Item> FindItemsInSubfolders(FolderId root, SearchFilter itemsFilter)
{
    foreach (Folder folder in service.FindFolders(root, new FolderView(int.MaxValue) { Traversal = FolderTraversal.Deep }))
        foreach(Item item in service.FindItems(folder.Id, itemsFilter, new ItemView(int.MaxValue)))
            yield return item;

    foreach (Item item in service.FindItems(root, itemsFilter, new ItemView(int.MaxValue)))
        yield return item;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-17T21:06:08.940

```
List<Folder> completeListOfFolderIds = new List<Folder>();
GetAllFolders(service, completeListOfFolderIds);
foreach (Folder folder in completeListOfFolderIds)
{
    List<Item> results = GetItems(service, folder);
}

public void GetAllFolders(ExchangeService service, List<Folder> completeListOfFolderIds)
{
    ExtendedPropertyDefinition isHiddenProp = new ExtendedPropertyDefinition(0x10f4, MapiPropertyType.Boolean);
    FolderView folderView = new FolderView(int.MaxValue);
    folderView.PropertySet = new PropertySet(isHiddenProp,FolderSchema.DisplayName, FolderSchema.Id, FolderSchema.ChildFolderCount, FolderSchema.TotalCount, FolderSchema.ParentFolderId, FolderSchema.WellKnownFolderName);
    List<SearchFilter> searchFilterCollection = new List<SearchFilter>();
    searchFilterCollection.Add(new SearchFilter.IsEqualTo(isHiddenProp, false));
    SearchFilter searchFilter = new SearchFilter.SearchFilterCollection(LogicalOperator.And, searchFilterCollection.ToArray());
    Folder rootfolder = Folder.Bind(service, WellKnownFolderName.MsgFolderRoot);
    // Indicate a Traversal value of Deep, so that all subfolders are retrieved.
    folderView.Traversal = FolderTraversal.Deep;
    rootfolder.Load();
    //FindFoldersResults findFolderResults = service.FindFolders(WellKnownFolderName.MsgFolderRoot, folderView);
    FindFoldersResults findFolderResults = rootfolder.FindFolders(searchFilter, folderView);
    foreach (Folder folder in findFolderResults)
    {
        completeListOfFolderIds.Add(folder);
        //List<Item> results = GetItems(service, folder);
        FindAllSubFolders(service, folder.Id, completeListOfFolderIds);                
    }
}

private void FindAllSubFolders(ExchangeService service, FolderId parentFolderId, List<Folder> completeListOfFolderIds)
{
    FolderView folderView = new FolderView(int.MaxValue);
    FindFoldersResults foundFolders = service.FindFolders(parentFolderId, folderView);
    completeListOfFolderIds.AddRange(foundFolders);

    // Now recurse
    foreach (Folder folder in foundFolders)
    {
        FindAllSubFolders(service, folder.Id, completeListOfFolderIds);
    }
}

private List<Item> GetItems(ExchangeService service ,Folder folder)
{
    if (service == null)
    {
        return null;
    }
    List<Item> items = new List<Item>();
    PropertySet propertySet = new PropertySet(BasePropertySet.FirstClassProperties);
    const Int32 pageSize = 50;
    ItemView itemView = new ItemView(pageSize);
    itemView.PropertySet = propertySet;
    FindItemsResults<Item> searchResults = null;
    try
    {
        do
        {                    
            searchResults = service.FindItems(folder.Id,itemView);
            items.AddRange(searchResults.Items);
            itemView.Offset += pageSize;
        } while (searchResults.MoreAvailable);
    }
    catch (Exception ex)
    {                
    }
    return items;
} 
```

# node.js - 根的安装不起作用

> ID：13877633
> 
> 赞同：0
> 
> 时间：2012-12-14T11:17:53.613
> 
> 标签：node.js, roots-toolkit

我正在尝试安装[根](http://roots.cx/)，但它不起作用。我正在运行网站上提到的命令：

```
curl roots.cx/get | sh 
```

但我收到以下错误：

```
\e[31m✘\e[0m \e[1mlooks like you need to install or update node.js.\e[0m 
```

我确实安装了 node.js (v 0.8.16)，它可以从命令行运行。

知道问题可能是什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:23:46.200

看起来安装脚本已损坏。您可以通过 npm 安装根目录：

```
npm install roots -g 
```

# c# - C# rhash 生成的哈希值不同于 rhash.exe 和 utorrent

> ID：13877638
> 
> 赞同：9
> 
> 时间：2012-12-14T11:18:01.977
> 
> 标签：c#, hash, utorrent

我正在使用带有[RHash](http://sourceforge.net/projects/rhash/)的 C# 来计算文件的 btih 哈希值。目前我正在使用 3 个工具来生成 btih 哈希：

1.  `rhash-1.2.9-src\bindings\mono`带`librhash-1.2.9-win`dll
2.  `rhash-1.2.9-win32`命令行工具
3.  uTorrent

问题是每个工具都会为同一个[文件](https://s3.amazonaws.com/simsimy.pub/IMG_0400.JPG)生成不同的 btih 签名（照片是我拍的，它是免费的）：

```
1:  2FF7858CC0A0B216C3676A807D619FA30101E45F
2:  E6F07BB3C3B3B67531C84E3452980698AC1B0DAA  A:\IMG_0400.JPG
3:  D0B96839A14A8C45BB81AD157805AE73425998E5 
```

对于我 在 cmd 工具中使用`Hasher.GetHashForFile(f.Name, HashType.BTIH);`的C# 哈希生成。`rhash --bith`

我究竟做错了什么？还有另一种计算btih的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T21:39:15.090

前两者的区别在于，根据`RHash`源代码，`BTIH`哈希需要额外的数据才能正确计算。

中的`init_btih_data`功能`calc_sums.c`记录在：

> 初始化 BTIH 哈希函数。与其他算法不同，BTIH 需要更多数据才能正确计算。

在`test_hashes.c`中，`BTIH`示例实际上根据是否`USE_BTIH_WITH_TEST_FILENAME`已定义而被不同地对待。

该`init_btih_data`函数（似乎仅在运行命令行应用程序时才被调用）依次`rhash_trasmit`根据各种参数调用该函数多次。至少，它会调用它两次，这可能解释了前两者之间的区别。但是，它可以多次调用它，我认为这解释了我们在 uTorrent 上看到的差异。

困难在于，虽然非托管 DLL 公开了`rhash_trasmit`函数，但 .NET 绑定却没有，这意味着无法提供预期的附加数据。

# ios5 - phoneGap 1.4.1 中用于发送消息的任何插件

> ID：13877645
> 
> 赞同：0
> 
> 时间：2012-12-14T11:18:27.547
> 
> 标签：ios5, cordova, plugins, sms

我使用 PhoneGap 制作了一个移动应用程序。我使用的是 PhoneGap 1.4.1 版本。

在我的应用程序中，我想在某个手机号码上发送消息。

如果有任何插件可用，那么请告诉我......如果可用，那么如何在 ios 中使用它？

如果不打开本机消息编辑器，我们可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:32:32.623

这可能是您的问题的解决方案。以下页面提供了所有信息：

[https://github.com/phonegap/phonegap-plugins/tree/master/iPhone/SMSComposer](https://github.com/phonegap/phonegap-plugins/tree/master/iPhone/SMSComposer)

亲切的问候，迈克

# c# - 异常处理中的设计模式

> ID：13877647
> 
> 赞同：3
> 
> 时间：2012-12-14T11:18:54.423
> 
> 标签：c#, design-patterns

我实际上正在编写一个可以被多个类使用的库类。我只是简单地举例说明一下。假设我有三个班级：A、B 和 C：

```
public class B
{
  public static string B_Method()
  {
    string bstr = String.Empty;

    try
       {

        //Do Something

       }

    catch
        {

        //Do Something

        }

  return bstr;

} 
```

B 是我正在编写的库类。现在让我们说另外两个类说 A 和 C：

```
public class A
{
  public void A_Method()
  {
   string astr = B.B_Method();
  }

}

public class C
{
 public void C_Method()
  {
   string cstr = B.B_Method();
  }

} 
```

问题是关于异常处理。我希望两个类 A 和 B 的各自方法以各自不同的方式处理 B_Method 中发生的异常。

我寻找框架设计模式，但觉得没有用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-14T11:22:28.463

我通常遵循的方法是这样的：

*   如果我的方法*可以对异常做一些有用*的事情，我会抓住它并这样做。
*   如果没有，我不会抓住它，而是让调用代码来处理它。

我将放置“全部捕获”块的唯一地方是 UI 代码的入口点（例如按钮单击的事件处理程序等），因为不捕获异常可能会导致进程停止。

这也意味着异常子句应该捕获您可以处理的特定异常。

我有时看到的一种方法是捕获异常，将其包装在一个新的异常类型中并抛出它。虽然这为您提供了一些可追溯性，但我也觉得它删除了调用代码中异常处理中的一些选项，例如针对不同场景使用特定的 catch 子句。在这些情况下，您将需要使用 if 子句检查内部异常，但在我看来不太可读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T11:25:57.847

> B 是我正在编写的库类。

如果您可以控制`B`代码，`B`是否应该重新`throw`捕获异常：

```
public class B
{
    public static string B_Method()
    {
        string bstr = String.Empty;

        try
        {
            // Do Something
        }
        catch(Exception e)
        {
            // Do Something (Log the exception details)
            throw;
        }

        return bstr;
    }
} 
```

> 我希望两个类 A 和 B 的各自方法以各自不同的方式处理 B_Method 中发生的异常。

现在，`B`可以记录异常并且`A`可以`C`处理重新抛出的异常是他们自己的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T11:23:15.387

您可以重新抛出或只在 B_Method 中抛出异常并在 A 和 C 类中捕获它。

```
public class A
{
  public void A_Method()
  {
   try
   {
     string astr = B.B_Method();
   }
  catch(Exception ex)
  {
    //Handle it in A way
  }

}

public class C
{
 public void C_Method()
  {
   try
   {
     string astr = B.B_Method();
   }
  catch(Exception ex)
  {
    //Handle it in C way
  }
} 
```

我认为设计模式在这里并不适用。它只是面向对象编程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T11:26:34.360

从 b 类中删除 try 和 catch 块

```
public static string B_Method()throws Exception{
    boolean success=compute();
    if(!success){
       throw new Exception("an error occured");
     }
} 
private static boolean compute(){
    return false;
} 
```

# javascript - TypeScript 和 ExactEqual

> ID：13877649
> 
> 赞同：6
> 
> 时间：2012-12-14T11:19:04.737
> 
> 标签：javascript, typescript

如果两个对象相等，如何以最简单的方式检查？我注意到没有类似方法`ExactEqual()`，所以我想知道是否应该手动进行。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-14T11:31:55.377

没有这样的方法。看看这个[**jqfaq.com**](http://jqfaq.com/what-is-the-difference-between-and/)链接，在那里讨论并给出了最好的检查方法。这将适用于**打字稿**和 javascript。希望，这会帮助你！

引用该答案中最重要的部分：

```
//“===” means that they are identical.
//“==” means that they are equal in value.
//( == )
//Each JavaScript value is of a specific “type” (Numbers, strings, Booleans, functions, and objects). So if you try to compare a string with a number, the browser will try to convert the string into a number before doing the comparison.
//So the following will return true.
55 == “55″ //true
0 == false //true
1 == true //true
//(===)
//The === operator will not do the conversion, if two values are not the same type it will return false. In other words, this returns true only if the operands are strictly equal in value or if they are identical objects.
55 === “55″ //false
0 === false //false
1 === true //false
var a = [1, 2, 3];
var b = [1, 2, 3];
var c = a;
var is_ab_eql = (a === b); // false (Here a and b are the same type,and also have the same value)
var is_ac_eql = (a === c); // true.
//Value types (numbers):
//a === b returns true if a and b have the same value and are of the same type.
//Reference types:
//a === b returns true if a and b reference the exact same object.
//Strings:
//a === b returns true if a and b are both strings and contain the exact same characters.
var a = “ab” + “c”;
var b = “abc”;
a === b //true
a == b //true
//in thiss case the above condition will fail
var a = new String(“abc”);
var b = “abc”;
a === b //false
a == b// true
//… since a and b are not a same type.
typeof “abc”; // ‘string’
typeof new String(“abc”)); // ‘object 
```

# css - 与 CSS 重叠的 HTML div 标签

> ID：13877651
> 
> 赞同：0
> 
> 时间：2012-12-14T11:19:10.853
> 
> 标签：css, html

我正在创建一个具有基本 div 元素和基本 css 样式的网页。但是，我发现每当我在这些 div 标签之一中放置过多的内容时，使用该`overflow: auto;`技术时内容显示不正确。

视觉问题链接：http : [//i.stack.imgur.com/FGCQk.jpg](http://i.stack.imgur.com/FGCQk.jpg)

的HTML：

```
 <!doctype html> 
<html lang="eng"> 
<head>
<title> Car Hunt Jamaica || The Hunt Is On! </title>
<meta name="title" content="Car Hunt Jamaica">
<meta name="description" content="Buy and Sell New and User Motor Cars In Jamaica">
<meta name="keywords" content="Cars, Buses, Trucks, Buy, Vehicles">

<link href="styling/desktop.css" rel="stylesheet" type="text/css">
</head>

<body>
<div id="main_body">

<div id="header_left"> 
<p> header left</p> 
</div> <!-- header left ends here -->

<div id="header_right"> 
<p> header right </p> 
</div> <!-- header right ends here -->

<div id="right_sidebar"> 
<p> right side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side barright side bar </p>
</div> <!-- Right sidebar ends here -->

<div id="container"> 
<p> container </p>
</div> <!-- container ends here -->

</div> <!-- Main Body Ends  -->
<div id="footer">
<p> Footer </p>
</div> <!-- Footer ends here -->

</body>
</html> <!-- HTML page ends here --> 
```

CSS：

```
 @charset "utf-8";
/* CSS Document */

body{
    background-color:#000;
    overflow-y: auto;
}

#main_body{
    background-color:#fff;
    width: 990px;
    margin-top: 50px;
    margin-left:auto;
    margin-right:auto;
    height: 600px;
}

#header_left{
    background-color:#F00;
    width: 230px;
    height: 70px;
    float: left;
}

#header_right{
    background-color:#009;
    width: 760px;
    height: 70px;
    float:right;
}

#footer{
    background-color:#666;
    width: 990px;
    height: 30px;
    margin-top:0px;
    margin-left:auto;
    margin-right:auto;
}

#right_sidebar{
    margin-top: 30px;
    margin-left: 20px;
    background-color:#FF0;
    float: left;
    width: 230px;

}

#container{
    background-color:#0C0;
    width: 660px;
    float: right;
    margin-top: 30px;
    overflow-y: auto;
    margin-right: 20px; 
```

不要介意可怕的颜色，这样我就可以正确识别每个 div 标签

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:29:08.887

你`#main_body`有一个`height`，你需要添加`overflow:hidden;`或`overflow:scroll;``#main_body`

如果您希望 main_body 随着右侧的增长而伸展，则删除`height`并添加`overflow:hidden;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:29:24.800

添加：

```
#main_body{
  overflow:hidden;
} 
```

这是一个例子：http: [//jsfiddle.net/Tsu8n/](http://jsfiddle.net/Tsu8n/)

# oracle - 使用 AddNew 按钮在 FORM 中添加 TextBox

> ID：13877653
> 
> 赞同：1
> 
> 时间：2012-12-14T11:19:23.960
> 
> 标签：oracle, oracle11g, oracle-apex

我在 Oracle Apex 工作。我想`TextBox i-e Disease`从 AddNew 按钮添加，因为我有多个条目`TextBox`。条目将从另一个表中选择`POPUP LOV`。下面是图片。![在此处输入图像描述](../Images/58cbcc638bcb20e9fe41774e283f1758.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T18:09:02.817

我不认为我可以在这里一步一步地解释它，但听起来你可以在你的情况下使用表格形式。

在表格形式中，您可以使用按钮动态添加-更新-删除新行，并且对于每个字段，您可以使用 Poppop LOVS 或 Comboboxes 从中选择数据。

这里有几点需要注意：

*   当您在页面中插入表格形式时，您将立即获得三个流程；一个用于自动行提取，两个用于保存更新操作。默认情况下，这些过程是通过按钮触发的。您可能想要更改它，因为您的页面中还有其他项目要提交。

*   在表格形式中，您定义一个 SQL 查询，该查询的结果列将成为您的字段。对于每个字段，您可以选择是否希望它是 Combobox、Popup LOV 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T04:44:33.883

由于您想在处理表中使用单列“ `DISEASE`”，因此您可以使用支持多个值的列表项类型之一（通常用冒号 (:) 分隔） - 例如，Shuttle。

# php - PHP分层数组 - 父母和孩子

> ID：13877656
> 
> 赞同：27
> 
> 时间：2012-12-14T11:19:29.293
> 
> 标签：php, arrays, loops, recursion, parent-child

我将 PHP 和 mySQL 与[Idiorm](http://j4mie.github.com/idiormandparis/)一起使用。那可能不相关。

**我的 PHP 数组**

*   这是父母和孩子之间的关系。
*   0 是根父级。
*   示例：根父 0 有孩子 33，有孩子 27，有孩子 71。

*如果需要解决问题，可以更改此数组结构。*

```
array (
  33 => 
    array (
      0 => '27',
      1 => '41',
  ),
  27 => 
    array (
      0 => '64',
      1 => '71',
  ),
  0 => 
    array (
      0 => '28',
      1 => '29',
      2 => '33',
  ),
) 
```

**我的分层结果**

像这样的东西，但作为一个数组......

```
 0 => 
      28
      29
      33
         27 =>
               64
               71
         41 
```

**信息**

*   深度是未知的，它可以是无限的。我试过foreach，但可能不是这样。

**我自己的想法**

*   一些递归函数？
*   一些while循环？

我尝试了以上两种方法，只是弄得一团糟。这是个脑筋急转弯。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-12-14T12:25:13.113

@deceze 的建议奏效了。然而，输入数组需要改变一点，像这样......

```
$rows = array(
    array(
        'id' => 33,
        'parent_id' => 0,
    ),
    array(
        'id' => 34,
        'parent_id' => 0,
    ),
    array(
        'id' => 27,
        'parent_id' => 33,
    ),
    array(
        'id' => 17,
        'parent_id' => 27,
    ),
); 
```

来自[https://stackoverflow.com/a/8587437/476](https://stackoverflow.com/a/8587437/476)：

```
function buildTree(array $elements, $parentId = 0) {
    $branch = array();

    foreach ($elements as $element) {
        if ($element['parent_id'] == $parentId) {
            $children = buildTree($elements, $element['id']);
            if ($children) {
                $element['children'] = $children;
            }
            $branch[] = $element;
        }
    }

    return $branch;
}

$tree = buildTree($rows);

print_r( $tree ); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-01-09T09:55:46.257

我添加到@Jens Törnell 的答案中，以便能够定义 parent_id 的列名、子数组键名以及 id 的列名的选项。

```
/**
 * function buildTree
 * @param array $elements
 * @param array $options['parent_id_column_name', 'children_key_name', 'id_column_name'] 
 * @param int $parentId
 * @return array
 */
function buildTree(array $elements, $options = [
    'parent_id_column_name' => 'parent_id',
    'children_key_name' => 'children',
    'id_column_name' => 'id'], $parentId = 0)
    {
    $branch = array();
    foreach ($elements as $element) {
        if ($element[$options['parent_id_column_name']] == $parentId) {
            $children = buildTree($elements, $options, $element[$options['id_column_name']]);
            if ($children) {
                $element[$options['children_key_name']] = $children;
            }
            $branch[] = $element;
        }
    }
    return $branch;
} 
```

由于该功能非常**通用**，因此我在大多数项目中都设法使用了上述功能。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-02-03T06:39:18.550

@Jens Törnell 的好答案，只是想添加一点改进，如果您的 parent_id 和 id 实际上是字符串而不是数字，那么上述方法将失败，并且在创建子数组后，它将再次创建这些子数组作为单独的单独数组。为了解决这个问题，您应该进行三重相等检查并通过比较变量的数据类型，即（字符串）。

**对于数组中基于字符串的 Id 和 Parent_id**

```
function buildTree(array $elements, $parentId = 0) {
    $branch = array();

    foreach ($elements as $element) {
        if ((string)$element['parent_id']  === (string)$parentId) {
            $children = buildTree($elements, $element['id']);
            if ($children) {
                $element['children'] = $children;
            }
            $branch[] = $element;
        }
    }

    return $branch;
} 
```

此外，如果有人愿意，他也可以添加第三个参数来动态指定变量的数据类型，`function buildTree(array $elements, $parentId = 0, $datatype='string')`但随后您将不得不承担任何其他错误发生。

希望它会帮助别人！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-05T07:33:19.037

```
public function createTree (&$list, $parentId = null) {
    $tree = array();
    foreach ($list as $key => $eachNode) {
        if ($eachNode['parentId'] == $parentId) {
            $eachNode['children'] = $this->createTree ($list,$eachNode['id']);
            $tree[] = $eachNode;
            unset($list[$key]);
        }
    }
    return $tree;
} 
```

在该函数中传递关联数组，如果最父不为空，则只需将最父 id 作为第二个参数传递。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-25T16:27:19.633

我有一个不同的问题，在此页面上找不到适合我的解决方案。我需要创建一棵树，但**不知道根 id**。这意味着我必须遍历我的平面数组并在树的顶部构建具有最父项的分支。

如果其他人需要构建没有根父项 ID 的树，我就是这样做的。

```
<?php

$rows = [
    (object) [
        'id' => 1001,
        'parentid' => 1000,
        'name' => 'test1.1'
    ],
    (object) [
        'id' => 1000,
        'parentid' => 100,
        'name' => 'test1'
    ],
    (object) [
        'id' => 1002,
        'parentid' => 1000,
        'name' => 'test1.2'
    ],
    (object) [
        'id' => 1004,
        'parentid' => 1001,
        'name' => 'test1.1.1'
    ],
    (object) [
        'id' => 1005,
        'parentid' => 1004,
        'name' => 'test1.1.1.1'
    ],
    (object) [
        'id' => 100,
        'parentid' => 10,
        'name' => 'test 0'
    ],
    (object) [
        'id' => 1006,
        'parentid' => 1002,
        'name' => 'test1.2.1'
    ],
    (object) [
        'id' => 1007,
        'parentid' => 1002,
        'name' => 'test1.2.2'
    ],
];

function add_child(stdClass $parent, stdClass $child) {
    if ($child->parentid != $parent->id) {
        throw new Exception('Attempting to add child to wrong parent');
    }

    if (empty($parent->children)) {
        $parent->children = [];
    } else {
        // Deal where already in branch.
        foreach ($parent->children as $idx => $chd) {
            if ($chd->id === $child->id) {
                if (empty($chd->children)) {
                    // Go with $child, since $chd has no children.
                    $parent->children[$idx] = $child;
                    return;
                } else {
                    if (empty($child->children)) {
                        // Already has this child with children.
                        // Nothing to do.
                        return;
                    } else {
                        // Both childs have children - merge them.
                        $chd->children += $child->children;
                        $parent->children[$idx] = $child;
                        return;
                    }
                }
            }
        }
    }

    $parent->children[] = $child;
}

function build_branch(&$branch, &$rows, &$parent = null) {
    $hitbottom = false;
    while (!$hitbottom) {
        $foundsomething = false;
        // Pass 1 - find children.
        $removals = []; // Indexes of rows to remove after this loop.
        foreach ($rows as $idx => $row) {
            if ($row->parentid === $branch->id) {
                // Found a child.
                $foundsomething = true;
                // Recurse - find children of this child.
                build_branch($row, $rows, $branch);
                add_child($branch, $row);
                $removals[] = $idx;
            }
        }
        foreach ($removals as $idx) {
            unset($rows[$idx]);
        }
        // Pass 2 - find parents.
        if ($parent === null) {
            $foundparent = false;
            foreach ($rows as $idx => $row) {
                if ($row->id === $branch->parentid) {
                    // Found parent
                    $foundsomething = true;
                    $foundparent = true;

                    add_child($row, $branch);
                    unset ($rows[$idx]);
                    // Now the branch needs to become the parent since parent contains branch.
                    $branch = $row;
                    // No need to search for other parents of this branch.
                    break;
                }
            }
        }

        $hitbottom = !$foundsomething;
    }
}

function build_tree(array $rows) {
    $tree = [];
    while (!empty($rows)) {
        $row = array_shift($rows);
        build_branch($row, $rows);
        $tree[] = $row;
    }
    return $tree;
}

$tree = build_tree($rows);

print_r($tree); 
```

# mysql - 改进我的 MySQL 修订系统

> ID：13877658
> 
> 赞同：1
> 
> 时间：2012-12-14T11:19:30.100
> 
> 标签：mysql, revision

我在我的一个项目中运行了一个修订系统。一个数据库表如下所示：

```
objectID // (no primary/auto_increment!)
versionID
time
deletionTime
// (additionalFields) 
```

最新版本总是有`versionID = 0`. 在更新时，带有`versionID`= 0 的条目将更新为`MAX(versionID)+1`. 然后将使用 versionID = 0 插入更新的条目。此外，插入的时间将被保存。

修订系统运行良好，但我目前对系统有一些困难：

我有另一个没有与修订表相关的修订系统的表：

```
ID
parentID // the reference to the revision table
time 
```

如果我从该表中查询条目，我需要加入我的修订表并获取创建条目时相关的修订。这意味着我需要一个子查询来选择所有修订版，`revisionTable.time <= otherTable.time` 然后按 entryID 分组。

这对我来说似乎不是一个很好的解决方案。为此总会有一个子查询。

我使用此修订系统，当前修订为“versionID = 0”，因为能够轻松查询所有对象的所有当前修订。

我对更好的修订系统的解决方案如下：

```
ID // primary, auto_increment
objectID // multiple revisions share the same objectID
isRevision // bool, the current revision has it set to 0
time
// (additionalColumns) 
```

使用这个系统，我仍然可以查询所有当前的修订，并且可以使用我的另一个表中修订的主 ID。

你怎么看？更好的想法？

# macos - 无法在 MacBook Pro 中安装 npm

> ID：13877660
> 
> 赞同：1
> 
> 时间：2012-12-14T11:19:34.087
> 
> 标签：macos, node.js, npm

我的笔记本电脑现在无法运行命令“npm”。

我使用 Node.js plus Express 在一个小组中完成我的课程作业。第一次，我在笔记本电脑上安装了 node.js 和 express。小组成员之一将应用程序包放在 Git 上，我只需要连接 Git，无需单独安装 Node 和 Express。所以我尝试用命令连接 Git；$git pull，然后用 $ npm install 安装包，效果很好。

然后，我删除了笔记本电脑本地驱动程序中的 Node.js 和 Express 文件，并使用上面相同的代码与 Git 连接，而 $npm 不能正常工作。错误始终是“找不到命令”。帮助！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T18:37:57.130

Git 和 NPM 是不相关的，但是您可能将它们都用于您的项目。Git 是版本控制系统，NPM 是 Node.js 的包管理器

[从http://nodejs.org/](http://nodejs.org/)重新安装 Node.js（NPM 默认也自带）

# c - 用定时器处理 C 信号

> ID：13877662
> 
> 赞同：0
> 
> 时间：2012-12-14T11:19:37.433
> 
> 标签：c, signals, setitimer

[http://codepad.org/rHIKj7Cd](http://codepad.org/rHIKj7Cd)（不是整个代码）

我想要完成的是父母在共享内存中写一些东西，然后孩子做出相应的反应，然后每五秒钟写回一些东西。我考虑过使用 SIGUSR1-2，并且可能在处理程序中打开 signum，但我不知道如何编写代码，因为 setitimer 会抛出 SIGALRM。我显然不想在处理程序中分叉，因为我只需要一个孩子和一个父母，那么我如何定义不同的行为？我希望我的目标很明确：

每 5 秒：

*   SIGALRM 由定时器抛出
*   父级将其计算写入共享内存（正在使用信号量）
*   孩子从共享内存中读取，写回它的计算

我也知道不建议使用**signal()**，这不是重点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:41:51.267

计时器信号处理程序应该尽可能少地做，可能只对父进程等待的信号量进行“发布”操作。然后父进程开始工作，然后在子进程等待的信号量上使用“post”。孩子完成它的工作并通过另一个“帖子”向父母发信号，然后返回等待信号量，父母可以对孩子的结果做一些事情。最后，父进程返回等待来自计时器信号处理程序的信号量。

当然，进程之间的信号，以及从定时器信号处理程序到父进程的信号，实际上不一定是信号量。还有其他方法可以在 POSIX 系统中的进程之间进行通信和发送“信号”，包括从管道读取/写入管道、在共享内存中设置特殊位或字节或消息队列。

# opencv - 如何在 Eclipse 上使用 opencv 进行数字图像处理

> ID：13877664
> 
> 赞同：3
> 
> 时间：2012-12-14T11:19:41.590
> 
> 标签：opencv, cmake, eclipse-juno

我是数字图像处理的新手，想在 Eclipse 上使用 OpenCV。我只想知道如何开始做以及如何使用 CMAKE 配置 opencv 和 eclipse。请建议我一些好的教程。还请帮助我在 Eclipse 中添加 opencv 包含文件和库。我正在使用 Eclipse Juno。在 Windows 7 上。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:13:34.403

最好的办法是从 OpenCV 文档开始。他们的[入门](http://opencv.willowgarage.com/wiki/Getting_started)教程应该是您的第一站。他们有另一个使用自定义 FindOpenCV.cmake 文件[的](http://opencv.willowgarage.com/wiki/FindOpenCV.cmake)策略，如此处所述，但我建议坚持使用入门中概述的策略。

就 eclipse 而言，cmake 会为您生成 IDE 相关的元数据，Kitware 确实提供了一个 eclipse CDT 生成器，文档[在此处](https://stackoverflow.com/questions/9453851/how-to-configure-eclipse-cdt-for-cmake)。要记住两件重要的事情。首先 cmake 实际上会生成 eclipse 元数据，然后您将其作为现有项目导入。其次，他们给出的示例旨在与 Unix makefile 一起使用：

```
cmake -G"Eclipse CDT4 - Unix Makefiles" -D CMAKE_BUILD_TYPE=Debug ../certi_src 
```

如果您使用的是 Windows，您将需要选择合适的[生成器](http://www.cmake.org/Wiki/CMake_Generator_Specific_Information#Makefile_generators)而不是“Unix Makefiles”

# sql - 在列中获取 CSV 列表，保持列不同（SQL）

> ID：13877673
> 
> 赞同：2
> 
> 时间：2012-12-14T11:20:17.920
> 
> 标签：sql, sql-server

我需要帮助编写一个 SQL 查询，它可以让我得到我想要的结果。

我有一个文件上传功能，可以为多个位置的客户上传文件。表结构简单，只有5列；FileID、FileName、Title、Description 和 LocationID。如果用户上传 3 个位置的文档，则在此表中输入 3 个条目。让我们说

```
FileID 文件名 标题 描述 LocationID
1 文件 1 文件 1 说明 1 100
2 文件 1 文件 1 说明 1 21
4 文件 1 文件 1 说明 1 181

```

用户为 4 个位置上传另一个文件，数据被输入，表格现在看起来像这样

```
FileID 文件名 标题 描述 LocationID
1 File1.doc 文件 1 说明 1 100
2 文件 1.doc 文件 1 说明 1 21
4 文件 1.doc 文件 1 说明 1 181
5 文件 2.pdf 文件 2 说明 2 123
6 文件 2.pdf 文件 2 说明 2 12
7 文件 2.pdf 文件 2 说明 2 126
8 文件 2.pdf 文件 2 说明 2 100

```

现在我想要的结果是

```
文件名 标题 描述 LocationCSV
File1.doc 文件 1 说明 1 100、21、181
File2.pdf 文件 2 说明 2 123、12、126、100

```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T11:35:07.650

在 SQL Server 中，您可以使用`FOR XML PATH`：

```
SELECT DISTINCT FileName,
  Title,
  Description,
  STUFF((SELECT ', ' + cast(LocationID as varchar(20))
         from yourtable m
         where p.FileName = m.FileName
         group by LocationID, fileid
         order by fileid
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'') LocationCSV
from yourtable p 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/a4add/5)

或使用另一个版本`FOR XML PATH`：

```
SELECT FileName,
  Title,
  Description, LEFT(LocationCSV , LEN(LocationCSV)-1) LocationCSV
FROM yourtable p
CROSS APPLY
(
    SELECT cast(LocationID as varchar(20)) + ','
    FROM yourtable m
    WHERE p.FileName = m.FileName
    FOR XML PATH('')
) m (LocationCSV)
group by FileName, Title, Description, LocationCSV 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/a4add/13)

结果：

```
|  FILENAME | TITLE |   DESCRIPTION |        LOCATIONCSV |
----------------------------------------------------------
| File1.doc | File1 | Description 1 |       100, 21, 181 |
| File2.pdf | File2 | Description 2 |  123, 12, 126, 100 | 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T11:25:45.933

在 MySQL 中，您可以使用[GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

```
select FileName,
       Title,
       Description, 
       group_concat(LocationID) as  LocationCSV 
from t group by FileName,Title,Description 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T11:39:17.817

看看 Bradc 的回答。我喜欢这种连接列的方法。

[在 Microsoft SQL Server 2005 中模拟 group_concat MySQL 函数？](https://stackoverflow.com/questions/451415/simulating-group-concat-mysql-function-in-microsoft-sql-server-2005)

# sql - 将 char 数据类型转换为 datetime 数据类型导致超出范围的 datetime 值

> ID：13877680
> 
> 赞同：1
> 
> 时间：2012-12-14T11:20:35.837
> 
> 标签：sql, datetime, sqldatetime

我有以下查询，给出了一个错误，即将 char 数据类型转换为 datetime 数据类型导致 datetime 值超出范围。

> INSERT INTO ACCount (DocumentNo, AccNo, DueDate, [Description], DC, Amount, Amount1, Amount2, DateCreated, DateModified, [Type]) VALUES (40, 6000012, '14/12/2012 12:00:00 AM', N'', N'C', 365.70, 551292.750000000, 365.700000000, '14/12/2012 12:00:00 AM', '14/12/2012 12:00:00 AM', N'PI')

无法知道究竟是什么错误。

我该如何解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T11:24:57.460

在大多数服务器上，“14/12/2012”是第 14 个月的第 12 天。您必须使用正确的格式规范来表示日期，或者更好（但仅在应用程序代码中）：仅将其作为参数传递，使用调用代码中日期的自然表示（然后永远不会有任何字符串表示，所以它永远不会模棱两可）。

使其对服务器和人类读者都非常明确的另一种方法是：

```
'14 Dec 2012 12:00:00 AM' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:25:34.483

您使用的是模棱两可的日期时间格式，并且您的区域设置的默认值意味着它不接受它。尝试：

```
INSERT INTO ACCount (DocumentNo, AccNo, DueDate, [Description], DC, Amount,
       Amount1, Amount2, DateCreated, DateModified, [Type])
VALUES (40, 6000012, '2012-12-14T12:00:00 AM', N'', N'C', 365.70, 551292.750000000, 
        365.700000000, '2012-12-14T12:00:00 AM', '2012-12-14T12:00:00 AM', N'PI') 
```

当然，鉴于时间组件都是午夜，您可能更喜欢只使用`20121214`（这是一种明确的仅限日期格式）

# android - 如何向 Spinner 小部件添加提示？

> ID：13877681
> 
> 赞同：15
> 
> 时间：2012-12-14T11:20:36.150
> 
> 标签：android, user-interface, spinner, hint

我有一个`Spinner`模式`spinnerMode="dropdown"`。而不是预选的第一个项目，我想向用户显示一个提示，以便没有默认选择（如»请选择一个项目«）

这是我得到的用户界面：

![当前的用户界面](../Images/1bc8ca73301bb5a62774d4d66acb8753.png)

这是我想要实现的 UI：

![我想要实现的 UI](../Images/df57814efecea71f73494e69358a974a.png)

我认为`EditText`小部件有一个`android:hint`属性，但没有`Spinner`小部件，并且设置它不会给我带来我想要的 UI。这是一个仅限 Android 4.x 的应用程序，因此我不必为任何 4.0 之前的兼容性问题而烦恼。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-14T12:27:03.487

我还没有找到一个简单而干净的解决方案，只有这个使用自定义适配器和自定义项目类的解决方法：

首先，我们需要一个用于微调项目内容的类：

```
class SpinnerItem {
        private final String text;
        private final boolean isHint;

        public SpinnerItem(String strItem, boolean flag) {
            this.isHint = flag;
            this.text = strItem;
        }

        public String getItemString() {
            return text;
        }

        public boolean isHint() {
            return isHint;
        }
    } 
```

然后是我们的适配器类：

```
class MySpinnerAdapter extends ArrayAdapter<SpinnerItem> {
        public MySpinnerAdapter(Context context, int resource, List<SpinnerItem> objects) {
            super(context, resource, objects);
        }

        @Override
        public int getCount() {
            return super.getCount() - 1; // This makes the trick: do not show last item
        }

        @Override
        public SpinnerItem getItem(int position) {
            return super.getItem(position);
        }

        @Override
        public long getItemId(int position) {
            return super.getItemId(position);
        }

    } 
```

最后我们使用这样的解决方法：

```
ArrayList<SpinnerItem> items = new ArrayList<SpinnerItem>();
        items.add(new SpinnerItem("Item 1", false));
        items.add(new SpinnerItem("Item 2", false));
        items.add(new SpinnerItem("HINT", true)); // Last item 

        MySpinnerAdapter adapter = new MySpinnerAdapter(this, android.R.layout.simple_spinner_item, items);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinner.setAdapter(adapter);
        spinner.setSelection(items.size() - 1); 
```

然后，您可以使用 SpinnerItem 类中的标志来设置该项目的文本颜色或其他任何内容。

# iphone - 从其他控件继承的值

> ID：13877682
> 
> 赞同：1
> 
> 时间：2012-12-14T11:20:41.113
> 
> 标签：iphone, ios, uitableview, inheritance, uipickerview

我是编程新手。我对继承有一个基本的怀疑。`UITableView`当`ViewController`我选择第一行时，`Tableview`它带我进入`Picker`只有我必须从中选择值的页面，`UIPickerView`现在我必须`NSLOG`选择值`picker`在`ViewController`中。这`button`是我面临的小问题。

**视图控制器.m**

```
- (void)viewDidLoad
 {
 [super viewDidLoad];

tableview =[[UITableView alloc]initWithFrame:CGRectMake(0,0,([UIScreen mainScreen].bounds.size.width),([UIScreen mainScreen].bounds.size.height/2)) style:UITableViewStyleGrouped];
tableview.delegate=self;
tableview.dataSource=self;
[self.view addSubview:tableview];

button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[button addTarget:self action:@selector(pressed) forControlEvents:UIControlEventTouchDown];
[button setTitle:@"START " forState:UIControlStateNormal];
button.frame = CGRectMake(62, 250, 196, 37);
[self.view addSubview:button];

thearray= [[NSArray alloc]initWithObjects:@"A",@"B ",@"C",@"D",@"E" ,nil];

 [super viewDidUnload]; 
}

 -(void)pressed{
  // nslog value..i need here the picker value
   }

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
return 1;
}

 - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{

return 5;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

if(indexPath.row==0){

 Picker1 *pick= [[Picker1 alloc] init];

    [self navigationController] pushViewController:pick animated:YES]      
}

 }

 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NS IndexPath *)indexPath  
{  
static NSString *CellIdentifier = @"Cell";  

 UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
 if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier];
}

cell.textLabel.text=[thearray objectAtIndex:indexPath.row];

 return cell;
} 
```

**选择器.m**

```
- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView {

return 1;

}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component {

return [list count];

}

- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component {

return [list objectAtIndex:row];

}

- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {

// update label text to show selected option

string=[NSString stringWithFormat:@"%@",[list objectAtIndex:row]];

label.text=string;

[self dismissModalViewControllerAnimated:YES];

 }

- (void)viewDidLoad
{
[super viewDidLoad];

list =[[NSMutableArray alloc]init];
[list addObject:@"A"];
[list addObject:@"B"];
    [list addObject:@"C"];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:43:39.493

您可以使用委托

在picker.m，在@interface 部分上方执行此操作

```
@protocol pickerDelegate <NSObject> 
```

-(void)didFinishPicking:(NSString *)pickedStr;

```
@end 
```

使这个协议的财产

```
@property(nonatomic,weak)id<pickerDelegate>delegate 
```

并在 - (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component 方法中，执行此操作

```
string=[NSString stringWithFormat:@"%@",[list objectAtIndex:row]];

[self.delegate didFinsihPicking:string]; 
```

现在在 viewcontroller.h 中，在方法中

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath

 Picker1 *pick= [[Picker1 alloc] init];

[pick setDelegate : self]; 
```

并在 viewcontroler.h 中实现 dlegate 方法

```
 -(void)didFinishPicking:(NSString *)pickedStr
{
[self setStr:pickedStr]
} 
```

其中 str 是您需要在 viewcontroller.h 中声明并在按钮单击事件上打印此字符串的字符串变量

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T11:52:35.800

听起来您需要一个委托来让您的选择器将选定的值传递回表格视图。在 Picker.h 文件的顶部定义委托方法：

```
@class Picker;

@protocol PickerDelegate <NSObject>

- (void)picker:(Picker *)thePicker didPickValue:(NSString *)theValue;

@end 
```

同样在您的 Picker.h 文件中，创建与代理的弱连接，代理将是表视图控制器：

```
@property (nonatomic, weak) id <PickerDelegate> delegate; 
```

在您的表视图控制器中，将委托添加到头文件中：

```
@interface ViewController : UITableViewController <PickerDelegate> 
```

您从 Picker.m 调用委托方法并在 ViewController.m 中实现它：

```
[self.delegate picker:self didPickValue:[NSString stringWithFormat:@"%@",[list objectAtIndex:row]]]; 
```

重要提示：当您创建选择器时，您必须告诉它代表将是谁。您正在表格视图中执行此操作，因此您调用：

```
pick.delegate = self; 
```

# javascript - 如何根据javascript中的“值”或“文本”列为表格行着色？

> ID：13877686
> 
> 赞同：3
> 
> 时间：2012-12-14T11:20:49.173
> 
> 标签：javascript

我的列名称为“状态”。如果状态为“通过”，我需要以绿色显示该行。如果“失败”则为红色。如何在javascript中做到这一点？

```
for (i=0; i < rows.length; i++) {
    var value = rows[i].getElementsByTagName("td")[0].firstChild.nodeValue;
    if (value == 'Pass') {
        rows[i].style.backgroundColor = "red";
    }
} 
```

我试过了，但浏览器不支持。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:38:38.440

```
for (i=0; i < rows.length; i++) {
    var value = document.getElementsByTagName("td")[i].firstChild.nodeValue;
    if (value == 'Pass') {
        document.getElementsByTagName("td")[i].style.backgroundColor = "green";
    }
else{ document.getElementsByTagName("td")[i].style.backgroundColor = "red";}
} 
```

试试这段代码（虽然我还没试过，这就是你需要的想法）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:30:19.710

使用 jQuery，您可以尝试：

```
function CheckStatus(id) {
    var rows = $('#'+id).find("tr")
    $(rows).each(function(){
        var value =  $(this).find('td:first').text();
        if (value == 'Pass') {
            $(this).css('background', 'red');
        }
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T11:42:29.130

我会使用类名而不是设置样式，但试试这个：

```
for (i=0; i < rows.length; i++) { 
   var value =  = rows[i].cells[0].firstChild.nodeValue;
   if (value == 'Pass') {
        rows[i].className = "red";
    } 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-05T09:21:46.173

样式只能在 HTML 元素上实现，例如文本框、选择、文本等。在您的情况下，您尝试设置“行”值的样式，这是不正确的。您需要选择 HTML 元素，然后对其进行样式设置。

这样的事情可能会有所帮助：

```
for (i=0; i < rows.length; i++) {
    var value = rows[i].getElementsByTagName("td")[0].firstChild.nodeValue;
    if (value == 'Pass') {
        rows[i].getElementsByTagName("td")[0].firstChild.style.backgroundColor = "red";
    }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-14T11:34:12.493

you can try using the Jquery

```
 $(document).ready(function () { 
            $("#testResults tr").each(function () { 
                var row = $(this).find("td:nth-child(2)").text(); 
                if (row == 'Pass') { 
                    $(this).css('background-color', '#F00'); 
                } else { 
                    $(this).css({ 'background-color': '#0G0',}); 
                } 
            }); 
        }); 
```

# android - 下一个安卓活动

> ID：13877690
> 
> 赞同：0
> 
> 时间：2012-12-14T11:21:09.333
> 
> 标签：android

我是android的初学者。我有一个登录名，然后我想运行以下文件 Mainscreenactivity 但不是登录名如何显示 ok 但在 Mainscreenactivity 之后不显示

登录.java

```
 package test.Droidlogin;
    import java.util.ArrayList;
    import org.apache.http.NameValuePair;
    import org.apache.http.message.BasicNameValuePair;
    import org.json.JSONArray;
    import org.json.JSONException;
    import org.json.JSONObject;
    import test.Droidlogin.library.Httppostaux;
    import android.app.Activity;
    import android.app.ProgressDialog;
    import android.content.Context;
    import android.content.Intent;
    import android.net.Uri;
    import android.os.AsyncTask;
    import android.os.Bundle;
    import android.os.SystemClock;
    import android.os.Vibrator;
    import android.util.Log;
    import android.view.View;
    import android.widget.Button;
    import android.widget.EditText;
    import android.widget.TextView;
    import android.widget.Toast;

    public class Login extends Activity {
    /** Called when the activity is first created. */

    EditText user;
    EditText pass;
    Button blogin;
    TextView registrar;
    Httppostaux post;
    // String URL_connect="http://www.scandroidtest.site90.com/acces.php";
    String IP_Server="10.0.2.2";//IP DE NUESTRO PC
    String URL_connect="http://10.0.2.2/droidlogin/acces.php";//ruta en donde estan nuestros archivos

    boolean result_back;
    private ProgressDialog pDialog;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        post=new Httppostaux();

        user= (EditText) findViewById(R.id.edusuario);
        pass= (EditText) findViewById(R.id.edpassword);
        blogin= (Button) findViewById(R.id.Blogin);
        registrar=(TextView) findViewById(R.id.link_to_register);

        //Login button action
        blogin.setOnClickListener(new View.OnClickListener(){

            public void onClick(View view){

                //Extreamos datos de los EditText
                String usuario=user.getText().toString();
                String passw=pass.getText().toString();

                //verificamos si estan en blanco
                if( checklogindata( usuario , passw )==true){

                    //si pasamos esa validacion ejecutamos el asynctask pasando el usuario y clave como parametros

                new asynclogin().execute(usuario,passw);                               

                }else{
                    //si detecto un error en la primera validacion vibrar y mostrar un Toast con un mensaje de error.
                    err_login();
                }

            }
                                                            });

        registrar.setOnClickListener(new View.OnClickListener(){

            public void onClick(View view){

                //Abre el navegador al formulario adduser.html
                String url = "http://10.0.2.2/droidlogin/adduser.html";
                Intent i = new Intent(Intent.ACTION_VIEW);
                i.setData(Uri.parse(url));
                startActivity(i);               
                                        }           
                                                                });

    }

    //vibra y muestra un Toast
    public void err_login(){
        Vibrator vibrator =(Vibrator) getSystemService(Context.VIBRATOR_SERVICE);
        vibrator.vibrate(200);
        Toast toast1 = Toast.makeText(getApplicationContext(),"Error:Nombre de usuario o password incorrectos", Toast.LENGTH_SHORT);
        toast1.show();      
    }

    /*Valida el estado del logueo solamente necesita como parametros el usuario y passw*/
    public boolean loginstatus(String username ,String password ) {
        int logstatus=-1;

        ArrayList<NameValuePair> postparameters2send= new ArrayList<NameValuePair>();

                    postparameters2send.add(new BasicNameValuePair("usuario",username));
                    postparameters2send.add(new BasicNameValuePair("password",password));

           //realizamos una peticion y como respuesta obtenes un array JSON
            JSONArray jdata=post.getserverdata(postparameters2send, URL_connect);

            /*como estamos trabajando de manera local el ida y vuelta sera casi inmediato
             * para darle un poco realismo decimos que el proceso se pare por unos segundos para poder
             * observar el progressdialog
             * la podemos eliminar si queremos
             */
            SystemClock.sleep(950);

            //si lo que obtuvimos no es null
                if (jdata!=null && jdata.length() > 0){

                    JSONObject json_data; //creamos un objeto JSON
                    try {
                        json_data = jdata.getJSONObject(0); //leemos el primer segmento en nuestro caso el unico
                         logstatus=json_data.getInt("logstatus");//accedemos al valor 
                         Log.e("loginstatus","logstatus= "+logstatus);//muestro por log que obtuvimos
                    } catch (JSONException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }                   

                    //validamos el valor obtenido
                     if (logstatus==0){// [{"logstatus":"0"}] 
                         Log.e("loginstatus ", "invalido");
                         return false;
                     }
                     else{// [{"logstatus":"1"}]
                         Log.e("loginstatus ", "valido");
                         return true;
                     }

              }else{    //json obtenido invalido verificar parte WEB.
                         Log.e("JSON  ", "ERROR");
                        return false;
              }

    }

    //validamos si no hay ningun campo en blanco
    public boolean checklogindata(String username ,String password ){

    if  (username.equals("") || password.equals("")){
        Log.e("Login ui", "checklogindata user or pass error");
    return false;

    }else{

        return true;
    }

}           

    class asynclogin extends AsyncTask< String, String, String > {

        String user,pass;
        protected void onPreExecute() {
            //para el progress dialog
            pDialog = new ProgressDialog(Login.this);
            pDialog.setMessage("Autenticando....");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }

        protected String doInBackground(String... params) {
            //obtnemos usr y pass
            user=params[0];
            pass=params[1];

            //enviamos y recibimos y analizamos los datos en segundo plano.
            if (loginstatus(user,pass)==true){                      
                return "ok"; //login valido
            }else{          
                return "err"; //login invalido                    
            }

        }

        /*Una vez terminado doInBackground segun lo que halla ocurrido 
        pasamos a la sig. activity
        o mostramos error*/
        protected void onPostExecute(String result) {

           pDialog.dismiss();//ocultamos progess dialog.
           Log.e("onPostExecute=",""+result);

           if (result.equals("ok")){

                Intent i=new Intent(Login.this, HiScreen.class);
                i.putExtra("user",user);
                startActivity(i); 

            }else{
                err_login();
            }

                                                    }

        }

    }

    //----------------------------------------------------------------------- 
```

MainscreenActivity.java

```
package test.Droidlogin;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class MainScreenActivity extends Activity{

    Button btnViewProducts;
    Button btnNewProduct;

    boolean result_back;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // Buttons
        btnViewProducts = (Button) findViewById(R.id.btnViewProducts);
        btnNewProduct = (Button) findViewById(R.id.btnCreateProduct);

        // view products click event
        btnViewProducts.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View view) {
                // Launching All products Activity
                Intent i = new Intent(getApplicationContext(), AllProductsActivity.class);
                startActivity(i);

            }
        });

        // view products click event
        btnNewProduct.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View view) {
                // Launching create new product activity
                Intent i = new Intent(getApplicationContext(), NewProductActivity.class);
                startActivity(i);

            }
        });
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T11:26:56.367

> 我有一个登录名，然后我想运行以下文件 Mainscreenactivity 但不是登录名如何显示 ok 但在 Mainscreenactivity 之后不显示

从你的问题我的理解是，

```
if (result.equals("ok")){
    Intent i=new Intent(Login.this, HiScreen.class);
    i.putExtra("user",user);
    startActivity(i); 
} 
```

在上面的代码中，意图应该是，

```
Intent i = new Intent(Login.this, MainscreenActivity.class); 
```

实际上，您正在开始活动`HiScreen`而不是`MainscreenActivity`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T11:55:28.840

```
In manifest.xml

 <activity
            android:name=".MainscreenActivity"
            android:label="@string/app_name"/>

In login.java

if (result.equals("ok")){

                Intent intent=new Intent(Login.this,MainscreenActivity.class);
                i.putExtra("user",user);
                startActivity(intent); 

            }else{
                err_login();
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T11:34:40.927

for string match use equalsIgnoreCase and check your response is return ok, and your class name declare in Menifest or not.

```
 if (result.equalsIgnoreCase("ok")){

        Intent i=new Intent(Login.this,  MainscreenActivity.class);
        i.putExtra("user",user);
        startActivity(i); 

    }else{
        err_login();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T11:32:25.737

写在下面的代码行

```
Intent i=new Intent(Login.this, MainscreenActivity.class);
i.putExtra("user",user);
startActivity(i); 
```

代替

```
Intent i=new Intent(Login.this, HiScreen.class);
i.putExtra("user",user);
startActivity(i); 
```

并将 MainscreenActivity 添加到 androidmanifest 文件中。

```
<activity
    android:name=".MainscreenActivity"
    android:label="@string/title_activity_main" /> 
```

它会解决你的问题。

# cloud-foundry - 无法登录 https://api.cloudfoundry.com

> ID：13877691
> 
> 赞同：1
> 
> 时间：2012-12-14T11:21:12.233
> 
> 标签：cloud-foundry

尽管我已经设置了一切，但我仍然无法登录：

C:>vmc 目标

[https://api.cloudfoundry.com]

C:> vmc 信息

VMware 的云应用平台 如需支持，请访问[http://support.cloudfoundry.com](http://support.cloudfoundry.com)

目标： [https](https://api.cloudfoundry.com) ://api.cloudfoundry.com (v0.999) 客户端：v0.3.23

C:>vmc 登录 xxxxxxxxxxx -t

尝试登录 [https://api.cloudfoundry.com] 密码：***** *** 登录“https://api.cloudfoundry.com”时出现问题，连接尝试失败，因为连接方在一段时间后没有正确响应时间，或建立连接失败，因为连接的主机没有响应。- 连接（2），重试或注册一个帐户。

有谁知道我在这里可能缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:21:18.827

请更新您的 vmc 客户端

```
gem update vmc 
```

# iphone - 如何在页面视图控制器中获取当前视图控制器

> ID：13877692
> 
> 赞同：8
> 
> 时间：2012-12-14T11:21:16.993
> 
> 标签：iphone, objective-c, ios, ipad, uiviewcontroller

我想在页面视图控制器中获取当前的视图控制器。如何做到这一点。它是否有一些代表要打电话或什么。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-16T22:56:47.797

我只是有同样的问题。在您更改页面后，当前控制器看起来是列表中的最后一个。这对我有用，但我不知道它是否总是正确的。

```
- (void)pageViewController:(UIPageViewController *)pageViewController didFinishAnimating:(BOOL)finished previousViewControllers:(NSArray *)previousViewControllers transitionCompleted:(BOOL)completed
{
    UIViewController *vc = [pageViewController.viewControllers lastObject];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-06T17:38:24.897

**尝试在pageViewController.viewControllers**中获取第一个视图控制器

 **```
 if let vc = pageViewController.viewControllers?[0] {
        ... vc is current controller...
    } 
```

如果要处理页面更改，请在委托方法中进行：

```
func pageViewController(_ pageViewController: UIPageViewController, didFinishAnimating finished: Bool, previousViewControllers: [UIViewController], transitionCompleted completed: Bool) {
    if let vc = pageViewController.viewControllers?[0] {
        ... vc is current controller...
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T11:36:38.230

if you are in any UIView class (as UIButton, UITable or any other subclass) that is a subView of the UIViewController.view (or of any subView.subView.subView... of it)

you can check if there's a UIViewController in the superVew(s) chain, and stop when you find a UIViewController

something like this:

```
UIViewController* controllerFound = nil;
for (UIView* next = [self superview]; next; next = next.superview) {
    UIResponder* nextResponder = [next nextResponder];
    if ([nextResponder isKindOfClass:[UIViewController class]]) {
        controllerFound = (UIViewController*)nextResponder;
    }
} 
```**

# .net - 使用 ASP.NET MVC 中的“世界时间引擎”服务

> ID：13877694
> 
> 赞同：1
> 
> 时间：2012-12-14T11:21:21.193
> 
> 标签：.net, asp.net-mvc, session, timezone, ip-address

我正在使用 ASP.NET MVC。我需要本地时间，具体取决于用户 IP 地址。为此，我正在使用“世界时间引擎”服务。该服务需要 IP 地址作为输入并发送带有 XML 结果的响应，其中包括该特定 IP 地址的时区相关信息。

我必须使用 IP 地址向服务发送获取请求。

```
http://worldtimeengine.com/api/ip/<apikey>/<ipaddress> 
```

当 SessionStart() 将执行时，我需要从 Global.asax 文件中调用此服务，然后将服务响应存储在会话中以供将来使用。

我的问题是我无法从 SessionStart() 方法调用服务。如何从 SessionStart() 或我的控制器之一调用此 URL？语法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:01:09.720

您可以使用网络客户端

```
var url = "http://worldtimeengine.com/api/ip/<apikey>/<ipaddress>";
var worldTime = "";
using (var client = new WebClient())
{
    client.Headers.Add("Content-Type", "text/xml");
    worldTime  = client.DownloadString(url);
}
//add worldTime to session 
```

# actionscript-3 - 铸造向量。到向量。

> ID：13877695
> 
> 赞同：1
> 
> 时间：2012-12-14T11:21:29.350
> 
> 标签：actionscript-3, apache-flex

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T11:23:59.890

香蕉**是**水果。但是香蕉清单**不是**水果清单。否则，您可以将香蕉列表放入水果列​​表中，然后添加一个苹果。

# cakephp - 如何在 CakePHP 2.X 中使用初始化

> ID：13877697
> 
> 赞同：1
> 
> 时间：2012-12-14T11:21:48.493
> 
> 标签：cakephp

我正在将 Cake 1.3 应用程序迁移到 2.X 应用程序。它大部分运行良好，但我不明白如何为 Cake 2 重写这段代码。

```
 public function initialize(&$controller) {
        $this->Controller =& $controller;
    } 
```

错误警告是： *无法通过引用重载对象进行分配*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T11:26:37.970

你真的应该阅读 [http://book.cakephp.org/2.0/en/appendices/2-0-migration-guide.html上的迁移指南](http://book.cakephp.org/2.0/en/appendices/2-0-migration-guide.html)

```
public function initialize(Controller $controller) {
    $this->Controller = $controller;
} 
```

你可以尝试运行我的升级外壳。它应该自己修复大部分问题： [https ://github.com/dereuromark/upgrade](https://github.com/dereuromark/upgrade)

```
cake Upgrade.Correct reference 
```

应该做的伎俩

见[https://github.com/dereuromark/upgrade/blob/master/Console/Command/CorrectShell.php#L733](https://github.com/dereuromark/upgrade/blob/master/Console/Command/CorrectShell.php#L733)

# javascript - 在鼠标悬停时加载 js 文件

> ID：13877698
> 
> 赞同：0
> 
> 时间：2012-12-14T11:21:55.827
> 
> 标签：javascript, javascript-events

大家好，是否可以在鼠标悬停或单击等事件上加载 js 文件。我尝试加载整个 js 文件而不是特定功能。在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T11:29:25.637

`onClick()`此示例在按钮事件时加载指定的 js 文件

```
<button onclick="myFunction()">Click me</button>

<script type="text/javascript">
   function myFunction(){

          var file = document.createElement("script");
          file.setAttribute("type", "text/javascript");
          file.setAttribute("src", "js/js_file.js");
          document.getElementsByTagName("head")[0].appendChild(file);

   }
</script> 
```

同样，您也可以`onMouseOver()`在按钮或任何其他 HTML 元素的事件上加载 js。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:26:21.423

**使用 jQuery 的示例**

```
 <!DOCTYPE html>
    <html>
        <head>
            <title>Test</title>
            <script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
            <script type="text/javascript">
                $(document).ready(function() {
                    $('#myButton').mouseenter(function() {
                        $("head").append($("<script />").prop("type", "text/javascript").prop("src", "http://code.jquery.com/jquery.mobile-1.2.0.js"));
                    });
                });
            </script>
        </head>
        <body>
            <input type="button" id="myButton" value="CLICK" />
        </body>
    </html> 
```

# android - 数据库中的每个表都应该有一个 SQLiteOpenHelper 吗？

> ID：13877701
> 
> 赞同：20
> 
> 时间：2012-12-14T11:22:01.350
> 
> 标签：android, database, android-sqlite

是有一个大的`SQLiteOpenHelper`子类来为数据库中的每个表定义`onCreate`和`onUpgrade`方法更好，还是有很多`SQLiteOpenHelper`子类更好，每个表一个？

有最佳实践吗？或者两者都可以接受，但有不同的好坏副作用？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-14T11:25:11.957

您应该为所有表提供一个 SQLiteOpenHelper 类。检查[此](http://blog.foxxtrot.net/2009/01/a-sqliteopenhelper-is-not-a-sqlitetablehelper.html)链接。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-23T20:34:11.960

只是为了采用不同的方法：

您始终可以覆盖该`onOpen(..)`方法，将其称为您的`onCreate(..)`. 一定要使用`"CREATE TABLE IF NOT EXISTS..."`语句而不是`"CREATE TABLE"`

```
 @Override
public void onOpen(SQLiteDatabase db) {
    onCreate(db);
}

@Override
public void onCreate(SQLiteDatabase db) {
    String CREATE_FRIENDS_TABLE = "CREATE TABLE IF NOT EXISTS ...";
    db.execSQL(CREATE_FRIENDS_TABLE);
} 
```

您对从 SQLiteOpenHelper 扩展的每个类执行此操作

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-02T15:23:20.383

@TheReader 是对的。我更喜欢所有表的单个 SQLiteOpenHelper，这就是我所做的：将“表创建”sql 列表传递给 SQLiteOpenHelper 子类的构造函数，然后在 onCreate 函数中迭代列表以创建每个表。所以我的 SQLiteOpenHelper 子类看起来像这样：

```
public ModelReaderDbHelper(Context context, List<String> createSQLs, List<String> deleteSQLs){
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        this.TABLE_CREATION_SQLS = createSQLs;
        this.TABLE_DELETE_SQLS = deleteSQLs;
    }
    @Override
    public void onCreate(SQLiteDatabase sqLiteDatabase) {
        for(String oneCreation : TABLE_CREATION_SQLS){
            sqLiteDatabase.execSQL(oneCreation);
        }
    } 
```

但这又带来了另一个问题：添加新表后，安装新版本的应用程序并安装现有的旧表，新表将不会创建，因为旧数据库的存在会阻止 onCreate 函数叫。所以用户必须先卸载应用程序，然后完全安装应用程序。**DATABASE_VERSION 有帮助，当且仅当**存在具有相同名称和相同 DATABASE_VERSION 的数据库时，android 似乎**不会**执行 onCreate 函数

# ios - 我看不到使用适用于 IOS 的 Google Maps API 绘制多边形的方法

> ID：13877702
> 
> 赞同：1
> 
> 时间：2012-12-14T11:22:02.463
> 
> 标签：ios, google-maps-mobile

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-12T14:28:18.230

我知道这是一个非常古老的线程，但我花了一段时间才找到它，所以我想我会分享我现在使用的东西，因为问题仍然悬而未决。

首先使用纬度/经度为所有多边形点分配一个`GMSMutablePath`- 以下示例概述了英国萨福克海岸：

```
GMSMutablePath *poly = [GMSMutablePath path];
[poly addCoordinate:CLLocationCoordinate2DMake(52.506191, 1.83197)];
[poly addCoordinate:CLLocationCoordinate2DMake(52.05249, 1.650696)];
[poly addCoordinate:CLLocationCoordinate2DMake(51.92225, 1.321106)];
[poly addCoordinate:CLLocationCoordinate2DMake(51.996719, 1.219482)];
[poly addCoordinate:CLLocationCoordinate2DMake(52.049112, 1.244202)];
[poly addCoordinate:CLLocationCoordinate2DMake(52.197507, 1.334839)];
[poly addCoordinate:CLLocationCoordinate2DMake(52.519564, 1.801758)]; 
```

然后创建`GMSPolygon`使用路径，设置它的外观属性并将其分配给地图！

```
GMSPolygon *polygon = [GMSPolygon polygonWithPath:poly];
polygon.fillColor = [UIColor colorWithRed:0 green:0.25 blue:0 alpha:0.3];
polygon.strokeColor = [UIColor greenColor];
polygon.strokeWidth = 5;
polygon.map = self.googleMap; 
```

希望它可以帮助那里的人..

# javascript - 如何使facebook弹出应用程序身份验证居中

> ID：13877703
> 
> 赞同：0
> 
> 时间：2012-12-14T11:22:04.057
> 
> 标签：javascript, facebook, facebook-graph-api, popup

我正在使用 Facebook Graph 创建登录/注册，并在应用身份验证上弹出了一个弹出窗口。它工作正常，除了在前端，它不会使我的应用程序对话框居中。这是一个屏幕截图。 ![在此处输入图像描述](../Images/8b125fd4bb9aff332cf4bb30d92b2ce3.png)

我需要传递一个变量以使其适合我的弹出窗口吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T18:17:18.340

添加`display=popup`到参数 - 这将为您提供一个较小版本的对话框，旨在适合弹出窗口。

在此处查看文档：[https ://developers.facebook.com/docs/reference/dialogs/](https://developers.facebook.com/docs/reference/dialogs/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T18:31:40.983

You should use the JavaScript SDK for the login:

> [https://developers.facebook.com/docs/reference/javascript/FB.login/](https://developers.facebook.com/docs/reference/javascript/FB.login/)

It opens the Login in an iframe, so it looks better, is easier to program AND there is no problem with any popup blocker.

# c# - 以ajax方式将项目添加到列表框

> ID：13877710
> 
> 赞同：2
> 
> 时间：2012-12-14T11:22:32.637
> 
> 标签：c#, asp.net, ajax

我正在关注如何从 javascript 调用 ac# 函数的示例。我有一个应该自动完成用户输入的文本框。这在我将目标控件设置为文本框时有效，这意味着当用户键入文本框时将自动完成请求。

但是，我想要一个列表框来保存匹配的案例。

这是javascript代码：

```
function CallMe(src, dest) {
var ctrl = document.getElementById(src);
// call server side method
PageMethods.GetNews(ctrl.value, CallSuccess, CallFailed, dest);
}

function CallSuccess(res, destCtrl) {
var dest = document.getElementById(destCtrl);
dest.value = res;
}

function CallFailed(res, destCtrl) {
alert(res.get_message());
} 
```

下面是 c# 代码，它接受一个字符串输入并返回与输入匹配的条目。我已经通过使用遍历列表并将项目添加到列表框中的 foreach 循环对此进行了测试，我需要以 ajax 方式/样式执行此操作。

但是我希望它通过使用 javascript 不断更新。

```
 [System.Web.Services.WebMethod]
public static List<string> GetNews(string input)
{
    List<string> listan = new List<string>();
    SqlDataReader reader;
    string tempstr = "";
    if (input == null || input.Length == 0)
        return null;
    SqlConnection conn = null;
    try
    {
        string connection = "example";
        conn = new SqlConnection(connection);
        string sql2 = "Select News from Nyheter where News LIKE '%'+@News+'%'";
        SqlCommand cmd = new SqlCommand(sql2, conn);
        cmd.Parameters.AddWithValue("News", input);
        conn.Open();
        reader = cmd.ExecuteReader();
        while (reader.Read())
        {
            tempstr = (string)reader["News"];
            listan.Add(tempstr);
        }

        return listan;
    }
    catch (SqlException ex)
    {
        return null;
    }
    finally
    {
        conn.Close();
    }
} 
```

这是加载代码，第一个示例有效，Textie 是一个文本框，当找到匹配项时会自动完成。问题是我希望将匹配项添加到列表框中。第二个例子不起作用，我不知道为什么，项目没有被添加到列表框中。

```
 if (!Page.IsPostBack)
    {     

        Textie.Attributes.Add("onblur", "javascript:CallMe('" + Textie.ClientID + "',        '" + Textie.ClientID + "')");

        //ListBox1.Attributes.Add("onblur", "javascript:CallMe('" + Textie.ClientID + "', '" + ListBox1.ClientID + "')");

    } 
```

提示将不胜感激，有没有更简单的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T05:53:37.247

```
 Textie.Attributes.Add("onblur", "javascript:CallMe('" + Textie.ClientID + "',        '" + Textie.ClientID + "')"); 
```

将此代码放在页面加载中，但不要放在“不回发”代码中。

# c# - 一个静态类和一个普通类共享相同的配置？

> ID：13877712
> 
> 赞同：0
> 
> 时间：2012-12-14T11:22:45.327
> 
> 标签：c#, configuration

我有一个在我的项目中共享的配置类：

```
public class BarcodeConfig
{
    public string LotStandardDigits { get; set; }
    public string LotOldStandardDigits { get; set; }
    public int LotOldNumofDigits { get; set; }
    public int LotStandardNumofDigits { get; set; }
} 
```

在我的主类实现中，我有 2 个类。一个静态（用于实用程序，另一个包含我所有预期的逻辑：

```
public static class BarcodeUtil
{
...
}

public class BarcodeBLL
{
...        
} 
```

我希望能够为我的静态类和普通类使用相同的配置类。最好将配置类设为静态吗？或不？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T11:31:50.720

我更喜欢实例化配置对象。在这些静态方法的情况下，我会将配置作为参数分别传递给每个实用程序方法。

这允许完全不同的模块同时将实用方法用于完全不同的目的，并使它们更具弹性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:28:13.220

如果您使用单元测试，最好不要使用静态类，因为伪造它们要困难得多。这是一个有趣的讨论：

[何时使用静态类与实例化类](https://stackoverflow.com/questions/1185605/when-to-use-static-vs-instantiated-classes)

# php - 即使在页面刷新后如何保留表单中的选定值

> ID：13877716
> 
> 赞同：0
> 
> 时间：2012-12-14T11:22:57.223
> 
> 标签：php

实际上我是 php 新手，我正在开发一个项目`SIMILAR TO ONLINE EXAMINTAION`。所以我要显示问题`RANDOMLY FROM D`.B 是什么。我`ALONG WITH THEIR OPTIONS`在一个表单中显示 5 个问题。我从表单中选择了一个单选按钮并完成页面刷新。所选单选按钮在页面刷新后可以看到，就像未选中一样。所以我想显示一个单选按钮，这是用户在页面刷新之前选择的……是吗可能的。或者你可以建议一个代码来阻止浏览器刷新按钮...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:34:06.907

You can store selected values in the cookies using javascript and on load event read cookies back and populate the values back.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:26:40.610

试试 sisyphus [http://simsalabim.github.com/sisyphus/](http://simsalabim.github.com/sisyphus/) - 不错且易于使用的 JQuery 插件

# session - 防止同一会话中的用户多次登录

> ID：13877717
> 
> 赞同：1
> 
> 时间：2012-12-14T11:23:04.533
> 
> 标签：session, wicket

如何防止 Wicket 中同一会话中的用户多次登录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T09:16:45.493

您可以将 spring security 与 wicket 集成。Spring security 会自动处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:31:41.220

您可以在数据库中创建一个表来保存登录用户的 ID。当用户登录时，检查他的 id 是否在所述表中，否则将他的 id 插入该表中。用户注销后，您还需要从表中删除用户的 id

# python - pip install - 对等方重置连接

> ID：13877718
> 
> 赞同：7
> 
> 时间：2012-12-14T11:23:11.520
> 
> 标签：python, virtualenv, pip

当我尝试使用 pip 安装 lxml 时，出现“对等连接重置”异常：

```
Downloading/unpacking lxml
  Downloading lxml-3.0.1.tar.gz (3.2Mb): 643Kb downloaded
Exception:
Traceback (most recent call last):
  File "/home/dummyuser/work/virt-dev-env/local/lib/python2.7/site-packages/pip-1.1-py2.7.egg/pip/basecommand.py", line 104, in main
    status = self.run(options, args)
  File "/home/dummyuser/work/virt-dev-env/local/lib/python2.7/site-packages/pip-1.1-py2.7.egg/pip/commands/install.py", line 245, in run
    requirement_set.prepare_files(finder, force_root_egg_info=self.bundle, bundle=self.bundle)
  File "/home/dummyuser/work/virt-dev-env/local/lib/python2.7/site-packages/pip-1.1-py2.7.egg/pip/req.py", line 985, in prepare_files
    self.unpack_url(url, location, self.is_download)
  File "/home/dummyuser/work/virt-dev-env/local/lib/python2.7/site-packages/pip-1.1-py2.7.egg/pip/req.py", line 1109, in unpack_url
    retval = unpack_http_url(link, location, self.download_cache, self.download_dir)
  File "/home/dummyuser/work/virt-dev-env/local/lib/python2.7/site-packages/pip-1.1-py2.7.egg/pip/download.py", line 451, in unpack_http_url
    download_hash = _download_url(resp, link, temp_location)
  File "/home/dummyuser/work/virt-dev-env/local/lib/python2.7/site-packages/pip-1.1-py2.7.egg/pip/download.py", line 368, in _download_url
    chunk = resp.read(4096)
  File "/usr/lib/python2.7/socket.py", line 380, in read
    data = self._sock.recv(left)
  File "/usr/lib/python2.7/httplib.py", line 561, in read
    s = self.fp.read(amt)
  File "/usr/lib/python2.7/socket.py", line 380, in read
    data = self._sock.recv(left)
error: [Errno 104] Connection reset by peer 
```

这仅在安装 lxml 时发生，其他模块通过 pip 安装没有问题。有人有同样的问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-14T12:36:00.080

尝试选择另一个 PyPI 镜像，或者直接：

```
pip install -i http://e.pypi.python.org/simple lxml 
```

或者通过让`pip`找到最好的镜子：

```
pip install --use-mirrors lxml 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-04T08:44:25.350

就我而言，是一个 ipv6 问题。一些镜像仍然没有完整的 ipv6 访问权限。

禁用 ipv6 并重试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T13:11:17.803

事实证明，我使用的镜像无法从网络访问。我解决它的方法是直接通过操作系统安装它：

```
$ apt-get install python-lxml 
```

然后将其复制到我的虚拟环境中：

```
$ cp -r /usr/lib/python2.7/dist-packages/lxml* /home/dummyuser/work/virt-dev-env/local/lib/python2.7/site-packages/ 
```

然后我将它放在我的虚拟环境中：

```
$ pip freeze
........
lxml==2.3.2
........ 
```

# php - 使用一个 delete.php 文件从不同的表中删除数据库行？

> ID：13877721
> 
> 赞同：0
> 
> 时间：2012-12-14T11:23:15.510
> 
> 标签：php, mysql, database, sql-delete

我有两个表，我想从中删除单个行 - table1，table2

我将行的 ID 发布到 delete.php，在其中运行查询`mysql_query("DELETE FROM table1 WHERE id=$id")`

我应该使用 delete.php 对 table2 执行相同的操作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T13:26:40.647

Just post a new variable for the table name also, in the same way you have for the row ID.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:39:21.593

您可以从 ajax 调用中传递某种标志并区分不同的表。像 table1 的 flag = 1 和 table2 的 flag = 2 等...基于标志，您可以制作不同的案例或调用不同的函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T11:26:35.280

你可以把你的表名放入一个数组中..

```
$tables = array('table1', 'table2'); 
```

接着...

```
foreach ($tables as $table) {
    mysql_query("DELETE FROM $table WHERE id = $id");
} 
```

# python - 在 Tkinter 程序中运行我的程序

> ID：13877727
> 
> 赞同：2
> 
> 时间：2012-12-14T11:23:30.020
> 
> 标签：python, tkinter

是否可以在 Tkinter 中运行我的程序？

我有一个适合曲线的程序。我想让它成为 GUI 并寻找将其插入 Tkinter 的方法。

我希望我的程序在单击 BUTTON 小部件后运行。Tkinter 中是否有运行另一个*file.py*的选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T11:52:59.527

我假设你已经阅读[了教程](http://docs.python.org/2/library/tkinter.html#a-simple-hello-world-program)。从另一个 python 文件加载代码的最简洁方法是导入它，例如：

```
import myfile

...
mybutton['command'] = myfile.main
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:29:34.970

要运行另一个文件，您可以导入它，或使用

> 文件 = 打开（“文件名.txt”，“r”）

然后使用

> 执行（*字符串*）

运行里面的程序。

# facebook - Facebook 上的应用程序配置错误但没有错误？

> ID：13877733
> 
> 赞同：1
> 
> 时间：2012-12-14T11:23:55.977
> 
> 标签：facebook, facebook-apps

我正在尝试设置一个选项卡，其中包含指向我在 Facebook 网站上的联系表单的链接。

我通过开发者网站开发了“应用程序”并设置了页面选项卡。

我已经保存了应用程序并且它保存得很好（显示一条消息，说明更改已保存，但可能需要一些时间才能在所有服务器上传播。）

好吧，我等了一个小时，我仍然无法将标签添加到我的页面。我尝试使用命名空间直接定位应用程序页面，但我收到一条错误消息：

```
"[My App] cannot be displayed because the app is misconfigured." 
```

不知道怎么配置错了？保存时没有错误，所以我不知道问题是什么或如何解决它。我可以看到应用程序没有问题......我怎么知道它有什么问题？

它只是一个页面选项卡。我已将指向页面选项卡的链接放入，我没有安全页面 (https)，​​因此我将此框留空，但我现在不知道该怎么做。

有什么想法可以找出“配置错误”的方式吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T19:15:40.757

当您尝试查看应用程序的应用程序中心页面时，如果应用程序没有填充“应用程序详细信息”选项卡设置，通常会发生此错误。

所以而不是：

[https://www.facebook.com/appcenter/APP_NAMESPACE](https://www.facebook.com/appcenter/APP_NAMESPACE)

确保您正在加载：

[https://apps.facebook.com/APP_NAMESPACE](https://apps.facebook.com/APP_NAMESPACE)

该页面将显示有关您缺少的内容的提示（如果您是应用程序的管理员或开发人员）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-09-04T02:27:42.847

而且，除了@Donn Lee 已经给出的答案，它指出了正确的方法，您还必须在设置中添加一个平台，在[https://developers.facebook.com/apps/APP-ID/settings/](https://developers.facebook.com/apps/APP-ID/settings/)

# java - Hibernate：在同一个应用程序中使用两个不同的数据库模式

> ID：13877734
> 
> 赞同：3
> 
> 时间：2012-12-14T11:23:56.577
> 
> 标签：java, mysql, eclipse, hibernate

## 语境

我正在创建一个数据库环境，我想在几个不同的模式中拆分数据以用于不同的用户组。虽然，这些数据库之一应该与所有人共享，因为它包含公共实体。

假设数据库：

*   DB1 - 通用实体；
    *   车轮实体
*   DB2——“A”组；
    *   汽车实体
*   DB3 - “B”组；
    *   摩托车实体

我有三个不同的项目：

*   项目一：
    *   轮子豆
*   项目二：
    *   汽车构造器
*   项目 3：
    *   摩托车构造器

## 问题

我正在尝试从项目/模式（2，“A”）和（3，“B”）访问轮子（项目 1）

第一个问题：有可能吗？第二：我该怎么做？

`hibernate.cfg.xml`在项目 2 中配置为

```
<property name="hibernate.connection.url">jdbc:mysql://99.999.999.99:3306/DB2</property> 
```

这必然必须限制到 DB2 的所有连接，或者有另一种方法来添加新连接或使用 3306 端口中的所有数据库，或者至少是 DB1？

**在项目 2 中**映射 project1 中的实体似乎也没有成功，例如：

```
<mapping class="com.company.project1.Wheels"
        package="com.company.project1.Wheels" resource="com/company/project1/Wheels.hbm.xml"/> 
```

## 配置

*   日蚀靛蓝
*   mysql 5.5
*   Hibernate 3.0（通过 xml 映射而不是注解）
*   赢 7

感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T13:12:53.813

您可以使用`@Table(catalog="")`指定它们所属的数据库，然后也可以跨数据库建立关系。

在您的情况下，使用目录属性`Wheel`映射到 DB1、`Car`DB2 和DB3。`MotorCycle`

我已经将此解决方案与 MySQL 和 MSSQL 一起使用，并且运行良好。唯一的约束是所有三个数据库都必须位于同一数据库服务器中，并且用于访问数据库的用户应该对所有数据库具有适当的权限。

由于此解决方案仅在所有查询中针对表添加架构名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T11:39:08.020

我会将我的项目划分为多个自我维持的项目。Wheel 项目将是照顾 Wheel 实体的自给自足项目。

项目 1：Wheel 该项目将定义 Hibernate 实体和 DAO 以访问/修改 Wheel 定义。另外我会在这个项目中配置一个单独的数据源，它指向 DB1。实体类：

```
@Entity
public class Wheel {
} 
```

DAO 类：

```
@Repository
public class WheelDAO {
    @Persistence
    private EntityManager em;
} 
```

基本上，这个想法是在 DAO 级别分离应用程序。并在服务级别管理事务。成像 WheelDAO（连接到 DB1 数据源）和 CarDAO（连接到 DB2 数据源）并将它们注入 CarService。

```
DB1             DB2          DB2
 |               |            |
WheelDAO       CarDAO       MotorcycleDAO
  \_____________/                   |
   \_____|__________________________/     
         |                        |
         |                        | 
       CarService          MotorCycleService 
```

我建议使用 Spring 作为 IOC 容器来管理这些依赖项。尽管您也可以在不使用 Spring 的情况下实现这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T11:39:11.983

您需要的只是一个数据库连接工厂，它允许您在需要时使用您想要的数据库。

看看下面的课程，您可以调整它来解决您的问题

```
import java.net.URL;
import java.util.HashMap;

import javax.security.auth.login.Configuration;

public class HibernateUtil {

    private static Log log = LogFactory.getLog(HibernateUtil.class);

    private static HashMap<String, SessionFactory> sessionFactoryMap = new HashMap<String, SessionFactory>();

    public static final ThreadLocal sessionMapsThreadLocal = new ThreadLocal();

    public static Session currentSession(String key) throws HibernateException {

        HashMap<String, Session> sessionMaps = (HashMap<String, Session>) sessionMapsThreadLocal.get();

        if(sessionMaps == null) {
            sessionMaps = new HashMap();
            sessionMapsThreadLocal.set(sessionMaps);
        }

        // Open a new Session, if this Thread has none yet
        Session s = (Session) sessionMaps.get(key);
        if(s == null) {
            s = ((SessionFactory) sessionFactoryMap.get(key)).openSession();
            sessionMaps.put(key, s);
        }

        return s;
    }

    public static Session currentSession() throws HibernateException {
        return currentSession("");
    }

    public static void closeSessions() throws HibernateException {
        HashMap<String, Session> sessionMaps = (HashMap<String, Session>) sessionMapsThreadLocal.get();
        sessionMapsThreadLocal.set(null);
        if(sessionMaps != null) {
            for(Session session : sessionMaps.values()) {
                if(session.isOpen())
                    session.close();
            }
            ;
        }
    }

    public static void closeSession() {
        HashMap<String, Session> sessionMaps = (HashMap<String, Session>) sessionMapsThreadLocal.get();
        sessionMapsThreadLocal.set(null);
        if(sessionMaps != null) {
            Session session = sessionMaps.get("");
            if(session != null && session.isOpen())
                session.close();
        }
    }

    public static void buildSessionFactories(HashMap<String, String> configs) {
        try {
            // Create the SessionFactory
            for(String key : configs.keySet()) {
                URL url = HibernateUtil.class.getResource(configs.get(key));
                SessionFactory sessionFactory = new Configuration().configure(url).buildSessionFactory();
                sessionFactoryMap.put(key, sessionFactory);
            }

        } catch(Exception ex) {
            ex.printStackTrace(System.out);
            log.error("Initial SessionFactory creation failed.", ex);
            throw new ExceptionInInitializerError(ex);

        } // end of the try - catch block
    }

    public static void buildSessionFactory(String key, String path) {
        try {
            // Create the SessionFactory
            URL url = HibernateUtil.class.getResource(path);
            SessionFactory sessionFactory = new Configuration().configure(url).buildSessionFactory();
            sessionFactoryMap.put(key, sessionFactory);

        } catch(Throwable ex) {

            log.error("Initial SessionFactory creation failed.", ex);
            throw new ExceptionInInitializerError(ex);

        } // end of the try - catch block
    }

    public static void closeSession(String key) {
        HashMap<String, Session> sessionMaps = (HashMap<String, Session>) sessionMapsThreadLocal.get();
        if(sessionMaps != null) {
            Session session = sessionMaps.get(key);
            if(session != null && session.isOpen())
                session.close();
        }
    }

} // end of the class 
```

[http://www.java-forums.org/](http://www.java-forums.org/)

# c# - 使用 web.sitemap xml 的 asp.net 水平菜单 - 删除子菜单图标

> ID：13877740
> 
> 赞同：0
> 
> 时间：2012-12-14T11:24:17.723
> 
> 标签：c#, asp.net, menu

我使用该控件创建了水平 asp:menu 并成功创建，但我不想有子菜单正确的错误图标（来自 webresource 位置）。

如何删除该图标或禁用该图标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:28:40.970

完成..`<asp:menu StaticEnableDefaultPopOutImage="false"...`

# javascript - 如何用不同的类名包装 DIV 标签？

> ID：13877743
> 
> 赞同：3
> 
> 时间：2012-12-14T11:24:28.443
> 
> 标签：javascript, jquery, dom, parent-child, jquery-traversing

> **重复：**
> [如何将父元素添加到一组段落？](https://stackoverflow.com/q/3542779)

我在文档中重复了以下 HTML 块

```
<!-- first block -->
<div class="first">
   My first div
</div>
<div class="second">
   My second div
</div>

<!-- second block -->
<div class="first">
   My first div
</div>
<div class="second">
   My second div
</div>

... 
```

如何用 jQuery 包装 Div 以获得这样的 HTML ......

```
<!-- first block -->
<div class="container">
   <div class="first">
      My first div
   </div>    
   <div class="second">
      My second div
   </div>
</div>

<!-- second block -->
<div class="container">
   <div class="first">
      My first div
   </div>    
   <div class="second">
      My second div
   </div>
</div>

... 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-14T11:26:31.393

你很幸运，这正是[`wrapAll`](http://api.jquery.com/wrapAll/)它的用途：

```
$(".first, .second").wrapAll('<div class="container"></div>'); 
```

[实例](http://jsbin.com/ebuveh/1)| [来源](http://jsbin.com/ebuveh/1/edit)

* * *

您的编辑*明显*改变了问题。*如果您只需要在*某些包含块中执行上述操作，则可以循环遍历包含块并`wrapAll`仅应用于它们的内容。您需要一种方法来确定您想要对 div 进行分组的方式，而您没有在问题中指定。

如果 div 周围有某种容器，你可以这样做：

```
$(".block").each(function() {
  $(this).find(".first, .second").wrapAll('<div class="container"></div>');
}); 
```

在该示例中，我假设 div 位于带有 class 的容器中`"block"`。

[实例](http://jsbin.com/ebuveh/5)| [来源](http://jsbin.com/ebuveh/5/edit)

如果没有结构性的方法来识别它们，则必须以其他方式进行。例如，在这里我们假设任何时候我们看到 a `first`，我们都应该停止分组：

```
var current = $();

$(".first, .second").each(function() {
  var $this = $(this);
  if ($this.hasClass('first')) {
    doTheWrap(current);
    current = $();
  }
  current = current.add(this);
});
doTheWrap(current);

function doTheWrap(d) {
  d.wrapAll('<div class="container"></div>');
} 
```

[实例](http://jsbin.com/ebuveh/6)| [来源](http://jsbin.com/ebuveh/6/edit)

之所以有效，是因为按*文档顺序*`$()`为您提供了元素，因此，如果我们按顺序遍历它们，将它们保存起来，然后每当我们看到新的（当然，最后清理）时包装以前的元素，您会得到想要的结果。*`first`*

 *Or here's another way to do that same thing, which doesn't use `wrapAll`. It relies on the *first* matched element being a `first` (so no `second`s before `first`s!):

```
var current;

$(".first, .second").each(function() {
  var $this = $(this);
  if ($this.hasClass('first')) {
    current = $('<div class="container"></div>').insertBefore(this);
  }
  current.append(this);
}); 
```

[Live Example](http://jsbin.com/ebuveh/7) | [Source](http://jsbin.com/ebuveh/7/edit)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T11:26:07.487

```
$('div').wrapAll('<div class="container" />'); 
```

会这样做，但这也会包装任何其他div，所以也许：

```
$('.first, .second').wrapAll('<div class="container" />'); 
```

更好。*

# django - Django 身份验证、用户和权限

> ID：13877745
> 
> 赞同：1
> 
> 时间：2012-12-14T11:24:36.710
> 
> 标签：django, permissions

我有一个**组织**和**员工**模型

```
class Organization(models.Model):

    is_active = models.BooleanField()
    name = models.CharField(u'Name', max_length = 255)
    ...

class Employee(models.Model):
    user = models.OneToOneField(User)
    organization = models.ForeignKey(Organization)
    ... 
```

如果我使用**AUTH_PROFILE_MODULE**会不会很好，所以 Employee 成为用户个人资料？

这样我就可以使用 Django 权限系统来设置员工权限，比如

*   可以查看所有文件
*   可以看到自己的组织文件
*   可以看到自己的文件

是否可以拥有非全局权限，例如“**可以查看所有文档**”？

如果我还想拥有每个组织的权限怎么办？这该怎么做？以及如何区分每个组织和每个员工的权限？

编辑：我正在使用 Django 1.4

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T11:27:09.443

简而言之，是的，你没事。

因为：

1) 使用 AUTH_PROFILE_MODULE=Employee 将使 Employee 实例可用，例如：

```
def view(request):
    employee_instance = request.user.get_profile() 
```

2）使用自定义权限很容易，请参阅：[https ://docs.djangoproject.com/en/dev/topics/auth/#custom-permissions](https://docs.djangoproject.com/en/dev/topics/auth/#custom-permissions)

编辑：

对组织具有自定义权限也是可能的，如果您以编程方式创建权限（如手册中提到的那样），则可能最好这样：

```
content_type = ContentType.objects.get(app_label='myapp', model='Organization')
permission = Permission.objects.create(codename='can_do_something', name='Can Do something',
                                       content_type=content_type) 
```

现在，您有了权限感知组织模型，您只需将其分配给您的用户。

澄清更多：

Django 身份验证系统是一种固定的 ACL。您将角色分配给用户（或组），仅此而已。Django 提供了辅助包装功能，可以轻松过滤掉没有给定权限的用户。如果您需要在运行时和/或更通用的方式决定一个对象是否有权做某事，您要么需要完整的 ACL 系统（而 django.auth 不是），要么您自己编写这种行为。这取决于您的需求，并且显然取决于管理这些权限的需要。在 OP 的情况下，行为是固定的，因此我建议只编写代码并感到高兴。但是需求可能会有所不同，解决方案也会有所不同。Django auth 擅长将静态权限分配给用户、组或“配置文件”对象。这对您的应用意味着什么最终取决于您。

所以在这种情况下，好的解决方案是拥有一组固定的权限，例如分配给用户/组的“可以查看自己的文档”或“可以查看组织文档”。您的应用程序应该决定它的含义并相应地提供文档，在帐户中获取运行时状态或使用模型结构来确定要提供的正确数据集。

# c++builder - 突出显示 TMonthCalendar 组件中的某些日期

> ID：13877753
> 
> 赞同：1
> 
> 时间：2012-12-14T11:24:55.483
> 
> 标签：c++builder, highlight, vcl, monthcalendar

我正在使用 C++Builder 中的 TMonthCalendar VCL 组件，我想突出显示一个月中的某些日子，更改其颜色字体或前景色。

我已经看到组件中存在此属性，但更改适用于所有天，我只需要应用几天。另一方面，我尝试使用 bolddays 功能，但日子不够突出......

如何突出显示此组件中的特定日期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T22:37:12.873

抱歉，`TMonthCalendar`包装的标准 OS MonthCalendar 控件根本不支持自定义字体或颜色。使用`OnGetMonthInfo`and`OnGetMonthBoldInfo`事件和`BoldDays()`方法，您所能做的就是指定个别日期是否显示为粗体。如果这不适合您的需要，那么您将不得不从头开始创建自己的自定义 MonthCalendar 控件，或者找到第三方实现。

# php - 要在控制器或模型中执行的操作？

> ID：13877757
> 
> 赞同：0
> 
> 时间：2012-12-14T11:25:06.777
> 
> 标签：php, model-view-controller, model, controller

我有一个项目表，每个项目都可以分配给定数量的图像，其中一些是特色图像。一次只能启用其中之一。

我在图像表中有这些字段：特色（0 或 1）已启用（0 或 1）

遵循 MVC 架构，当我启用图像时，我不确定是否应该在控制器或模型中执行以下操作（我已经简化了示例，因为它有点复杂）：

1.  检查此图像是否有特色。
2.  如果它是特色图片，请禁用任何特色图片并启用此图片。

我可以从模型获取它的状态（有或没有）到控制器，让控制器命令模型禁用所有有特色的图像，然后告诉模型启用这个，或者让模型在内部管理这一切。

我的问题出现了，因为据我所知并且我有时读过，控制器被称为引擎，而模型只是按照控制器的命令执行。

但是我认为在这种情况下，模型可能会自力更生地将这些约束作为黑盒进行管理，而无需控制器知道它们。

你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T20:26:15.953

我建议您在项目表中增加一个字段。并存储启用图像的 id（可以是特色图像或启用图像）。

此方法将解决您的两个问题

```
1.Check if this image is featured.
2.In case it is featured, disable any featured image and enable this one. 
```

每次，只需存储启用或精选的图像的 id。因此，您不必在图像表中进行太多更新。

# postgresql - 对 PostgreSQL 使用 WITH 子句？

> ID：13877758
> 
> 赞同：0
> 
> 时间：2012-12-14T11:25:06.600
> 
> 标签：postgresql

我打算在`WITH`PostgreSQL 中使用该子句，但它似乎不支持该命令。有替代命令吗？

我想要做的是用一个查询选择几个子结果集并使用部分子结果集来创建我的最终结果集`SELECT`。

使用该`WITH`子句会很容易。

**更新**：

哎呀！我发现我误解了我收到的错误信息；并且 pgSQL 确实支持 WITH。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:18:20.513

PostgreSQL`WITH`在 8.4 及更高版本中支持公用表表达式（查询）。请参阅手册中的[公用表表达式](http://www.postgresql.org/docs/current/static/queries-with.html)。

您确实应该包括您的 PostgreSQL 版本、错误消息的确切文本以及您在问题中运行的任何查询的确切文本。在实际/相关的情况下，还包括表格定义、样本数据和预期结果。

# python - urlparse 和 '\n'

> ID：13877761
> 
> 赞同：0
> 
> 时间：2012-12-14T11:25:12.943
> 
> 标签：python, urlparse

我有：

```
from urlparse import urlparse
s = "http://google.com" + "\n" # this line is read from file, when I loop over file's lines 
urlparse(s)
ParseResult(scheme='http', netloc='google.com\n', path='', params='', query='', fragment='') 
```

它是否正确？解析期间不应该删除“\n”吗？或者我只是错误地使用了这个函数，或者我错过了一些参数/参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T11:33:43.280

解析文本行时，始终使用`str.rstrip()`删除尾随 CRLF。这也将对您的情况有所帮助：

```
for line in open('file.txt'):
    line = line.rstrip()  # strip the trailing CRLF
    # do what you need with the line 
```

# mysql - 为什么这对mysql复制不安全

> ID：13877763
> 
> 赞同：1
> 
> 时间：2012-12-14T11:25:26.987
> 
> 标签：mysql, replication

```
121214 11:54:30 [Warning] Unsafe statement written to the binary log using statement format since BINLOG_FORMAT = STATEMENT. Statements writing to a table with an auto-increment column after selecting from another table are unsafe because the order in which rows are retrieved determines what (if any) rows will be written. This order cannot be predicted and may differ on master and the slave. Statement: update db_ds_pax p
        set p.mbp_id = 8861912, updated_ts = now()
        where p.flight_id = 2506912 
        and p.logically_deleted = 0
        and (
            exists (
                    select * from db_bkg_passenger bkgp 
                    where bkgp.bkg_pax_id = p.bkg_pax_id
                    and bkgp.ticket_num = '2202326623256'
                    and bkgp.logically_deleted = 0 )
            or exists (
                    select * from db_dcs_pax dcsp 
                    where dcsp.dcs_pax_id = p.dcs_pax_id
                    and dcsp.ticket_num = '2202326623256'
                    and dcsp.logically_deleted = 0 )) 
```

这个声明中有什么不安全的？我没有插入任何东西，只是在更新。实际上，我什至没有选择任何将用于更新的东西。

我曾尝试使用左连接重写，但它仍然抱怨。我还认为可能`updated_ts = now()`是罪魁祸首并将其设置为固定时间，但仍然是相同的警告。

服务器是Oracle的5.5.27

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:28:37.653

> 从另一个表中选择后写入具有自动增量列的表的语句是不安全的，因为检索行的顺序决定了将写入哪些（如果有）行。此顺序无法预测，并且可能在主服务器和从服务器上有所不同

我什么也没做，只是从警告消息中复制粘贴了解释。

所以似乎`UPDATE`被视为“写入表格”

# dns - AWS 负载均衡器需要 @cname 记录，但这会覆盖我的 @MX 记录

> ID：13877764
> 
> 赞同：4
> 
> 时间：2012-12-14T11:25:29.820
> 
> 标签：dns, amazon-web-services, load-balancing, cname, mx-record

我需要为负载均衡的 AWS 站点 mywebsite.com 添加 CName 记录。记录应该是：

```
@   CNAME           mywebsite.us-east-1.elb.amazonaws.com 
```

但是，它似乎（根据 123-reg）这将覆盖我拥有的用于发送到该域的电子邮件的 @MX 记录：

```
@   MX  300     mail1.mywebsite.com.
@   MX  400     mail2.mywebsite.com.
@   MX  500     mail3.mywebsite.com. 
```

我很难过，因为这两个看起来都很明智，而且我没想到 CName 会以这种方式优先于 MX。

关于如何进行的任何想法？我认为必须有另一种方法来设置 MX 记录，但不确定如何。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T02:32:07.107

我建议您将 DNS 托管移至 Amazon Route 53。

您也不能在`CNAME`那里使用，因为这是一般的 DNS 限制（请参阅 RFC 1034 第 3.6.2 节 - [http://www.faqs.org/rfcs/rfc1034.html](http://www.faqs.org/rfcs/rfc1034.html)）。但是，对于`A`Route 53 的记录，您可以指定记录是“别名”（这是 AWS 的一项特殊功能），并选择您的 ELB 作为目标，而不是特定的 IP 地址。由于主机是通过 A 记录配置的，因此您应该也可以输入`MX`记录。

此外，Route 53 是一个非常先进的 DNS 系统，而且价格实惠，每月起价不到 1 美元 ( [http://aws.amazon.com/route53/pricing/](http://aws.amazon.com/route53/pricing/) )，因此您将获得很多其他的好处也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T02:36:32.363

是的，即使我在切换到 Route 53 后也遇到了同样的问题，这已经解决了。谈到定价 Route 53 一点也不贵，如果你有在 AWS 上运行的生产系统并且已经花费了很多，这就像为花生买单一样。

# python - 什么是动态语言中依赖注入的真实示例？

> ID：13877777
> 
> 赞同：17
> 
> 时间：2012-12-14T11:26:12.483
> 
> 标签：python, .net, ruby, dependency-injection, angularjs

我在 .NET 方面有全面的背景，但最近一直在使用 Python 和 Ruby。我发现自己在思考如何最好地为 Ruby 中需要它们的对象提供依赖关系。

起初，我实际上并不认为 DI 和 IoC 框架需要与依赖项进行交互，因为动态语言（例如重新定义、mixins、存根等）的宽松性。然而，然后，我遇到了为什么动态语言**不需要DI/IoC 框架的答案。**提供的理由对我来说不太合适。我希望我能看到一个可以解决问题的例子。

## 我有点不同意的推荐建议：

### 原因 1：可以在运行时更改依赖类（想想测试）

在[为什么动态语言不需要 IOC 容器中，](https://stackoverflow.com/questions/2273683/why-are-ioc-containers-unnecessary-with-dynamic-languages/2308494#2308494)我们看到依赖类（非注入）`X`可以在测试中被存根或模拟。当然，但这需要我们知道我们`System Under Test`依赖于一个叫做`X`. 如果我们`System Under Test`突然依赖于`N`而不是`X`，我们现在必须记住要模拟`N`而不是`X`。使用 DI 的好处是我们永远不会意外地使用生产依赖项运行测试，因为我们总是会传入模拟依赖项。

### 原因二：子类化或者使用构造函数注入进行测试

[在每个人最喜欢的关于 DI + Ruby、 LEGO、Play-Doh 和 Programming](http://weblog.jamisbuck.org/2008/11/9/legos-play-doh-and-programming)的所有东西的 goto 资源中，我们看到了一个将被测系统子类化以模拟依赖关系的示例。或者，我们可以使用构造函数注入。好的，所以`B`取决于`A`. 我们调用`B.get_dependency`which 提供`B`了一个`A`. 但是如果`A`取决于`N`哪个取决于`X`呢？我们必须调用`get_dependency`链中的每个连续对象吗？

### 原因3：依赖可以混入或者monkeypatched

[Fabio 提到](http://fabiokung.com/2010/05/06/ruby-and-dependency-injection-in-a-dynamic-world/)我们可以只使用 mixins/monkeypatch。所以`X`混入到`N`. 但问题是如果`X`取决于`A`哪个取决于`B`？我们是否只对链下的每个依赖项使用 mixins？我知道它是如何工作的，但它很快就会变得混乱和混乱。

* * *

旁注：[许多用户说](https://stackoverflow.com/search?q=dependency%20injection%20dynamic%20language)动态语言不需要 DI 框架。然而，Angular.JS 确实受益于实现了一个非常可靠的 DI 系统。Angular 是基于 JavaScript 构建的，这是一种动态语言。这种方法可以与 Ruby 或 Python 相媲美吗？

请记住，我并不是说我想将DI/IoC*强制*转换为 Ruby、Python 等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:57:32.047

虽然许多人认为不需要 DI，但我同意你的观点，它确实非常需要；但有时它会与 Python 提供的其他技术混合使用。我建议你看看[venusian](http://pypi.python.org/pypi/venusian)，它可能有点冗长，但如果你来自 .NET，你会看到这种关系。一句话：venusian 允许你在不改变它们的行为的情况下注释你的方法。因此，您可以编写 venusian 装饰器，这样您的单元测试就不会受到影响。[例如， Pyramid](http://docs.pylonsproject.org/en/latest/docs/pyramid.html)使用 venusian 来注释视图。

# selenium - Selenium 无法指向具有特殊符号的控件，例如 # 、 @ 、 $

> ID：13877778
> 
> 赞同：0
> 
> 时间：2012-12-14T11:26:14.850
> 
> 标签：selenium, web, driver, selenium-webdriver, xpath

我想单击 Xpath 和 Id 信息如下的单选选项按钮：-

```
<input id="ContentView_PageLayout_FlightFinderTab_HomepageTabs_FlightsTab_pnlTripType_TripType#0" 
type="radio" onclick="showHideReturningDate('return');" checked="checked" value="Return" 
name="ContentView$PageLayout$FlightFinderTab$HomepageTabs$FlightsTab$pnlTripType$TripType"> 
```

Xpath：

```
//*[@id="ContentView_PageLayout_FlightFinderTab_HomepageTabs_FlightsTab_pnlTripType_TripType#0"]

<input id="ContentView_PageLayout_FlightFinderTab_HomepageTabs_FlightsTab_pnlTripType_TripType#1" 
type="radio" onclick="showHideReturningDate('oneway');" 
value="One Way" name="ContentView$PageLayout$FlightFinderTab$HomepageTabs$FlightsTab$pnlTripType$TripType"> 
```

Xpath：

```
//*[@id="ContentView_PageLayout_FlightFinderTab_HomepageTabs_FlightsTab_pnlTripType_TripType#1"] 
```

我尝试了这些方法来获取 ID：

1：

```
return By.XPath("(//input[@id="++'ContentView_PageLayout_FlightFinderTab_HomepageTabs_FlightsTab_pnlTripType_TripType#1']"); 
```

2：

```
return By.Id("ContentView_PageLayout_FlightFinderTab_HomepageTabs_FlightsTab_pnlTripType_TripType#1"); 
```

3：

```
return By.XPath("//*[@id=" + '"' + "ContentView_PageLayout_FlightFinderTab_HomepageTabs_FlightsTab_pnlTripType_TripType#1" + '"' + "]"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:30:30.333

driver.findElementById("ContentView_PageLayout_FlightFinderTab_HomepageTabs_FlightsTab_pnlTripType_TripType#1").getAttribute("name") 这对我有用......返回正确的值。用 2.25 在 Firefox 上试过

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T00:31:10.540

为什么不使用带有 @FindBy 注释的 PageFactory.initElements(...) 方法？

在您的类中使用 @FindBy 注释创建一个字段，例如：

```
@FindBy(xpath = "//input[@id='IdValue']")
WebElement radioOption; 
```

之后，在您的方法调用之前调用 PageFactory.initElements(driver,this)。

这将为该字段创建一个动态代理，您可以以更简洁的方式访问代码中的单选选项。

# groovy - Groovy：在运行时检查对象是否为字符串

> ID：13877782
> 
> 赞同：5
> 
> 时间：2012-12-14T11:26:24.467
> 
> 标签：groovy

我即将重载leftShift运算符并想知道如何检查给定参数“other”是否为String？

```
def leftShift(other){
    if(other.getClass() instanceof String){
        println other.toString() + " is a string!"          
} 
```

但这不起作用..有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-14T14:43:48.943

您可以使用通常在 Java 中使用的测试。

```
def leftShift(other) {
    if(other instanceof String) {
        println "$other is a string!"
    }
} 
```

当您调用`other.getClass()`结果类时，您可以将其与*String.class进行比较的**java.lang.Class*实例。注意*other*可以为*null*，其中测试“other instanceof String”的计算结果为 false。

 ***更新：

这是一个简单的案例，它创建了一个不是字符串实例的 Groovy [GString](http://docs.groovy-lang.org/latest/html/api/groovy/lang/GString.html)实例：

```
def x = "It is currently ${ new Date() }"
println x.getClass().getName()
println x instanceof String
println x instanceof CharSequence 
```

输出：

```
It is currently Thu Aug 21 15:42:55 EDT 2014
org.codehaus.groovy.runtime.GStringImpl
false
true 
```

GStringImpl 扩展了 GString，它具有使其行为为 String 对象的方法，并像 String 类一样实现 CharSequence 接口。检查*其他*对象是否为 CharSequence，如果对象是 String 或 GS​​tring 实例，则为 true。

```
def leftShift(other) {
    if(other instanceof CharSequence) {
        println "$other is a string!"
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-14T11:36:09.820

It is

```
if (other.getClass() == String) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T14:49:12.903

编写的代码无法编译-您缺少大括号。就目前而言，`instanceof`正如其他人所提到的，它可以像在 Java 中一样工作。但是，在 Groovy 中，我会小心检查`instanceof`，`String`因为有时看起来确实如此`Strings`（`GStrings`请参阅[文档](http://groovy.codehaus.org/Strings+and+GString)，“GStrings are not Strings”部分）。快速示例：

```
assert "the quick brown $somevar jumped over the lazy dog" instanceof String == false 
```***

# vba - 如何仅用鼠标更改 Excel 单元格的值？

> ID：13877789
> 
> 赞同：6
> 
> 时间：2012-12-14T11:26:37.940
> 
> 标签：vba, excel, mouse

我希望能够仅使用鼠标轻松更改单元格值（常量，而不是公式），而无需使用键盘输入新值。

这样的滚动条将允许用户动态观察其他公式和图表发生的情况。

单击包含值的单元格后，一些滚动条（或其他设备）会显示在单元格下方（或单元格右侧）。仅使用此设备可以通过鼠标更改单元格的值。应该可以定义滚动条的最小值和最大值。如果未定义，则应假定最小值和最大值为当前值的 30%（最小值）和 170%（最大值）。单击另一个单元格时，“旧”滚动条会消失，并且在单击的单元格下方会出现一个新滚动条。应该有可能定义显示滚动条的单元格（对于其他单元格则不会）。

我需要的不是普通的 Excel 滚动条，它只改变一个单元格的值，我不想让数百个滚动条分散在我的工作表上。

从我的研究中，我发现我可以在工作表或工作簿中设置事件来响应被选中的单元格。我可以检查该单元格是否是允许显示滚动条的单元格。如果是这样，我可以让我的代码创建一个新的滚动条，或者使现有的滚动条可见，然后找到活动单元格下方的滚动条。更改滚动条可能会影响单元格的值。需要对值的更改方式进行一些控制，以避免使用 15 位十进制数字的值。当取消选择单元格时，滚动条可以被破坏或隐藏，直到下次使用。

## 更新

我已经提交了我的问题的答案。现在我期待着提高我的工具的速度。

## 更新 2

[以下是一些改进我的工具性能的后续建议](https://stackoverflow.com/questions/28855156/increase-speed-of-changing-excell-cells-value-with-just-a-mouse)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-02-07T22:04:08.040

在这个解决方案中`Workbook`和`ScrollBar`被绑定到一个类`ScrollValue`中。在`Workbook_Open`事件处理程序中创建此类的实例。

```
' ------------------------------------
' ThisWorkbook class module
' ------------------------------------
Option Explicit

Public ScrollValueWidget As ScrollValue

Private Sub Workbook_Open()
    Set ScrollValueWidget = New ScrollValue
    ScrollValueWidget.Max = 1000
    ScrollValueWidget.Min = 0
    ScrollValueWidget.Address = "C3:D10"
    ScrollValueWidget.DeleteScrollBars
End Sub

Private Sub Workbook_BeforeClose(Cancel As Boolean)
    Set ScrollValueWidget = Nothing
End Sub 
```

`ScrollValue`类负责`ScrollBar`并`SheetSelectionChange`在一个地方处理工作簿中所有工作表的事件。单元格更改后，将显示滚动条并链接到更改的单元格。滚动条变为最小和最大限制。滚动条的值根据目标单元格值自动设置。如果实际单元格值超出最小-最大范围，则会显示警告。

`Scrollbars`类使用一个`OLEObjects`集合。对于每个工作表，它都有自己的滚动条。因此，对于每张纸，一次只存在一个滚动条。

*注意：`ScrollBars Value`属性值不能为负数。将类的实例化属性设置`ScrollValue`为`PublicNotCreatable`。*

```
' ------------------------------------
' ScrollValue class module
' ------------------------------------

Option Explicit

Private minValue As Long
Private maxValue As Long
Private applyToAddress As String
Private WithEvents book As Workbook
Private scroll As OLEObject
Private scrolls As ScrollBars

Private Sub Class_Initialize()
    Set book = ThisWorkbook
    Set scrolls = New ScrollBars
End Sub

Private Sub Class_Terminate()
    Set scrolls = Nothing
    Set book = Nothing
End Sub

Private Sub book_SheetSelectionChange(ByVal Sh As Object, ByVal Target As Range)
    On Error GoTo ErrSheetSelectionChange

    Set scroll = scrolls.GetOrCreate(Sh) ' Get scroll for targer sheet
    Move Target ' Move scroll to new target cell

    Exit Sub

ErrSheetSelectionChange:
    MsgBox Err.Description, vbCritical
End Sub

Private Sub Move(targetRange As Range)
    ' Do not handle scroll for cells with formulas, not numeric or negative values
    If targetRange.HasFormula Then _
        Exit Sub

    If Not IsNumeric(targetRange.Value) Then _
        Exit Sub

    If targetRange.Value < 0 Then _
        Exit Sub

    If Application.Intersect(targetRange, ApplyToRange(targetRange.Worksheet)) Is Nothing Then _
        Exit Sub

    ' TODO: add code to handle when min/max not defined

    On Error GoTo ErrMove

    ' Move scroll to new target cell and show it
    With scroll
        .Top = targetRange.Top
        .Left = targetRange.Left + targetRange.Width + 2
        .Object.Min = Min
        .Object.Max = Max
        .LinkedCell = targetRange.Address
        .Visible = True
    End With

    Exit Sub

ErrMove:
    Dim errMsg As String
    errMsg = "Max = " & Max & " Min = " & Min & " Cell value = " & targetRange.Value & " must be between <Min, Max>." & Err.Description
    MsgBox errMsg, vbExclamation, "Scroll failed to show"
End Sub

Public Property Get Min() As Long
    Min = minValue
End Property

Public Property Let Min(ByVal newMin As Long)
    If newMin < 0 Then _
        Err.Raise vbObjectError + 1, "ScrollValue", "Min value musn't be less then zero"
    If newMin > maxValue Then _
        Err.Raise vbObjectError + 2, "ScrollValue", "Min value musn't be greater then max value"
    minValue = newMin
End Property

Public Property Get Max() As Long
    Max = maxValue
End Property

Public Property Let Max(ByVal newMax As Long)
    If newMax < 0 Then _
        Err.Raise vbObjectError + 3, "ScrollValue", "Max value musn't be less then zero"
    If newMax < minValue Then _
        Err.Raise vbObjectError + 4, "ScrollValue", "Max value musn't be less then min value"
    maxValue = newMax
End Property

Public Property Let Address(ByVal newAdress As String)
    If newAdress = "" Then _
        Err.Raise vbObjectError + 5, "ScrollValue", "Range address musn't be empty string"
    applyToAddress = newAdress
End Property

Public Property Get Address() As String
    Address = applyToAddress
End Property

Private Property Get ApplyToRange(ByVal targetSheet As Worksheet) As Range
    ' defines cell(s) for which scrollbar shows up
    Set ApplyToRange = targetSheet.Range(Address)
End Property

Public Sub DeleteScrollBars()
    scrolls.DelateAll
End Sub

' ------------------------------------
' ScrollBars class module
' ------------------------------------

Option Explicit

Private Const scrollNamePrefix As String = "ScrollWidget"

Private Sub Class_Terminate()
    DelateAll
End Sub

Private Function ScrollNameBySheet(ByVal targetSheet As Worksheet) As String
    ScrollNameBySheet = scrollNamePrefix & targetSheet.name
End Function

Public Function GetOrCreate(ByVal targetSheet As Worksheet) As OLEObject
    Dim scroll As OLEObject
    Dim scrollName As String

    scrollName = ScrollNameBySheet(targetSheet)

    On Error Resume Next
    Set scroll = targetSheet.OLEObjects(scrollName)
    On Error GoTo 0

    If scroll Is Nothing Then
        Set scroll = targetSheet.OLEObjects.Add(ClassType:="Forms.ScrollBar.1", _
            Left:=0, Top:=0, Width:=250, Height:=16)
        scroll.name = scrollName
        scroll.AutoLoad = True
        scroll.Object.Orientation = fmOrientationHorizontal
        scroll.Object.BackColor = &H808080
        scroll.Object.ForeColor = &HFFFFFF
    End If

    scroll.Enabled = True
    scroll.Locked = False
    scroll.LinkedCell = ""
    scroll.Visible = False

    Set GetOrCreate = scroll
End Function

Public Sub DelateAll()
    ' Deletes all scroll bars on all sheets if its name beginns with scrollNamePrefix

    Dim scrollItem As OLEObject
    Dim Sh As Worksheet

    For Each Sh In Worksheets
        For Each scrollItem In Sh.OLEObjects
            If scrollItem.name Like scrollNamePrefix & "*" Then
                scrollItem.Locked = False
                scrollItem.delete
            End If
        Next scrollItem
    Next Sh
End Sub 
```

![在此处输入图像描述](../Images/4f0506563cebb98c8abb58a188fa2141.png)

*观看 ScrollValue 的实际操作：* [youtube 视频](http://youtu.be/GaivloEgOcA)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-13T09:38:02.593

**这是完整的工具**

您可以在[此处下载](https://docs.google.com/uc?authuser=0&id=0B3TGVycQLkZ_RDVjMXUyanZVQm8&export=download)*scrollbar.xlsm*文件：

我发布这个问题已经两年了。我想出了以下解决方案。为了获得解决问题的新概念，我以前没有分享过它。以我的经验，用鼠标改变单元格值的功能有时比表格中的复杂模型和计算更能引起观众的印象:-)

将此代码放在您希望滚动条出现的工作表中。工作表的名称无关紧要。右键单击工作表的名称，然后单击`View Code`。这是地方：

![在此处输入图像描述](../Images/ef5e2630b1c16d05b4dc5ef0ac53de6f.png)

在此处插入以下代码：

```
Option Explicit
Dim previousRow, c
Const scrlName As String = "scrlSh" ' the name of the scrollbar

Private Sub scrlSh_GotFocus()
    ActiveSheet.Range(ActiveSheet.OLEObjects(scrlName).TopLeftCell.Offset(0, -1).Address).Activate
End Sub

Private Sub scrlSh_Scroll()
Dim rngCell As Range

Set rngCell = Sheets("Param").Range(ActiveSheet.OLEObjects(scrlName).LinkedCell)

    ActiveSheet.OLEObjects(scrlName).TopLeftCell.Offset(0, -1).Value = _
        rngCell.Offset(0, 1).Value + (ActiveSheet.OLEObjects(scrlName).Object.Value * rngCell.Offset(0, 3).Value)

Set rngCell = Nothing
End Sub

Private Sub Worksheet_SelectionChange(ByVal Target As Range)
' Macro concept by Przemyslaw Remin, VBA code written by Jaroslaw Smolinski
' The Sub Worksheet_SelectionChange and function SearchAdr have to be on each sheet where scrollbars are to appear
' Sheet Param is one for all sheets, only the columns A-G are used, othre columns can be used for something else
' Do not change the layout of A-G columns unless you want to modify the code
' Addresses in Param have to be with dollars (i.e. $A$3) or it may be named ranges of single cells
' (if it starts with $ it is a cell, otherwise it is a named range)
' the lower or upper case in addresses does not matter

Dim SheetFly As String, adr As String
Dim cCell As Range
Dim actSheet As Worksheet
Dim shScroll As Object

    Set actSheet = ActiveSheet

    ' checks if scrollbar exists
    If actSheet.Shapes.Count > 0 Then
        For Each shScroll In actSheet.Shapes
            If shScroll.Type = msoOLEControlObject And shScroll.Name = scrlName Then
                Exit For ' scrollbar found, and the variable is set
            End If
        Next shScroll
    End If
    ' if scrollbar does not exists then it is created
    If shScroll Is Nothing Then
        Set shScroll = ActiveSheet.OLEObjects.Add(ClassType:="Forms.ScrollBar.1", Link:=False, _
            DisplayAsIcon:=False, Left:=0, Top:=0, Width:=64 * 3, Height:=15)
            ' scrollbar length is set as three adjesent columns
        shScroll.Visible = False
        shScroll.Name = scrlName
        shScroll.Placement = xlMoveAndSize
    End If

    shScroll.Visible = False
    adr = Target.AddressLocal
    SheetFly = actSheet.Name

    ' here we set up in which cells the scrollbar has to appear. We set up only the number of rows
    Set cCell = SearchAdr(SheetFly, adr, Sheets("Param").Range("B2:B40")) ' If needed it can be longer i.e. B2:B400
    If Not cCell Is Nothing Then
        With ActiveSheet.OLEObjects(scrlName)
            .LinkedCell = "" ' temporary turn off of the link to the cell to avoid stange behaviour
            .Object.Min = 0 ' the scale begins from 0, not negative
            .Object.Max = Abs((cCell.Offset(0, 4).Value - cCell.Offset(0, 3).Value) / cCell.Offset(0, 5).Value)
            .Object.SmallChange = 10   ' single change by one step
            .Object.LargeChange = 10   ' change by jumps after clicking on scrollbar bar ("page up", "page down")
            If Target.Value <> cCell.Offset(0, 2).Value And Target.Value >= cCell.Offset(0, 3).Value And Target.Value <= cCell.Offset(0, 4).Value Then
                ' setting up the cells value as close as possible to the value of input by hand
                ' rounded by step
                ' if value is out of defined range then the last value will be used
                cCell.Offset(0, 2).Value = Abs((Target.Value - cCell.Offset(0, 3).Value) / cCell.Offset(0, 5).Value)
            End If
            'Protection in case the value is out of min and max range
            If cCell.Offset(0, 2).Value > .Object.Max Then
                cCell.Offset(0, 2).Value = .Object.Max
            ElseIf cCell.Offset(0, 2).Value < .Object.Min Then
                cCell.Offset(0, 2).Value = .Object.Min
            End If
            Target.Value = cCell.Offset(0, 3).Value + (cCell.Offset(0, 5).Value * cCell.Offset(0, 2).Value)
            .Object.Value = cCell.Offset(0, 2).Value
            .LinkedCell = "Param!" & cCell.Offset(0, 2).Address 'setting up linked cell
        End With
        ' Setting up the position and width of scrollbar with reference to the cell
        shScroll.Top = Target.Top
        shScroll.Left = Target.Offset(0, 1).Left + 2 'position to the right + small margin
        shScroll.Width = Target.Offset(0, 5).Left - Target.Offset(0, 1).Left - 2 'width of 5 columns
        shScroll.Visible = True
    End If

    Set actSheet = Nothing
    Set shScroll = Nothing
    Set cCell = Nothing
End Sub

Private Function SearchAdr(SheetFly As String, kom As String, rng As Range) As Range
Dim cCell As Range
Dim oOOo As Name

' Searching for the row with parameter for chosen cell
' The parameter have to be in one, continouse range

For Each cCell In rng
    If cCell.Text = "" Then ' check if parameters have not finished
        Set SearchAdr = Nothing
        Exit Function ' stop if you find first empty cell for speeding
    ElseIf Left(cCell.Text, 1) = "$" Then ' normal address
        If cCell.Offset(0, 1).Text & "!" & UCase(cCell.Text) = SheetFly & "!" & UCase(kom) Then
            Set SearchAdr = cCell
            Exit Function   ' exit if find proper row with parameters
        End If
    Else ' means that found is a name
        For Each oOOo In ActiveWorkbook.Names
            If (oOOo.RefersTo = "=" & SheetFly & "!" & UCase(kom)) And (UCase(oOOo.Name) = UCase(cCell.Text)) Then
                Set SearchAdr = cCell
                Exit Function   ' exit if find proper row with parameters
            End If
        Next oOOo
    End If
Next cCell

End Function 
```

在您的工作簿中，您必须将工作表命名`Param`为存储滚动条参数的位置。在 A 列和 C 列中，将工作表的名称放在您希望滚动条出现的位置。工作表如下所示：

![在此处输入图像描述](../Images/196d85bdd711970d58b6f6e44e7822a6.png)

现在，您可以在单击工作表中的单元格后享受滚动条`model`。

![在此处输入图像描述](../Images/ab9f90c560e9da2bb4a34dfc3c153cee.png)

请注意，您可以为每个单元格分别定义不同的最小、最大范围和滚动条更改的步长。此外，最小和最大范围可以是负数。

我的解决方案很简单，但我希望它可以在速度方面得到进一步改进。在工作簿中进行复杂计算时，滚动条的性能可能会更好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-06T17:09:24.297

您需要使用 Workbook_SheetSelectionChange 事件来捕获新单元格的选择。您必须构建一些控件以确保仅在选择一个单元格而不是区域时显示滚动条，该单元格不包含公式，单元格值为数字。您需要考虑当 baseValue = 0 时值如何变化（因为 0 的 30% 仍然为 0）。

对于滚动条，您可以使用 Form 控件或 ActiveX 控件将其直接定位到工作表中。前者实现起来更简单，但使用该解决方案时，单元格值不会在您滚动时更新。如果你需要这个，你必须使用 ActiveX 控件。但在这种情况下，您必须使用 CreateEventProc 动态生成事件处理程序。如评论中所述，此解决方案具有一些严重的缺点。

所以第三种解决方案是使用用户表单。此方法的一个优点是您可以在其上添加其他控件，例如将单元格值重置为其原始值的按钮。该解决方案如下所述。

创建一个带有滚动条和按钮的用户窗体，如下所示，并将其命名为 MagicScrollBar：

![在此处输入图像描述](../Images/469dfd01464efd5f2cc307704211471d.png)

滚动条必须具有以下滚动属性：

![在此处输入图像描述](../Images/23fa4625d4e66c670d54b66e601dbf4e.png)

右键单击用户窗体，选择查看代码并复制此代码：

```
Option Explicit

Private Sub CommandButton1_Click()
    ActiveCell.Value = baseValue
    ScrollBar1.Value = 100
End Sub

Private Sub ScrollBar1_Change()
    UpdateCellValue
End Sub

Private Sub ScrollBar1_scroll()
    UpdateCellValue
End Sub

Private Sub UpdateCellValue()
    ActiveCell.Value = baseValue * ScrollBar1.Value / 100
End Sub 
```

在 ThisWorkbook 中复制此代码：

```
Option Explicit

Private Sub Workbook_SheetSelectionChange(ByVal Sh As Object, ByVal Target As Range)

    Dim l As Double
    Dim t As Double
    Dim w As Double
    Dim h As Double

    MagicScrollBar.Hide

    If Selection.CountLarge = 1 Then
        If Not Intersect(Target, ActiveSheet.Cells) Is Nothing Then 'Replace ActiveSheet.Cells by range where scroll bar should appear
            If Target.HasFormula = False Then
                If IsNumeric(Target.Value) Then
                    If Target.Value <> 0 Then 'TO DO: Add some logic to handle cells with value = 0

                        baseValue = Target.Value

                         With MagicScrollBar
                            .ScrollBar1.Value = 100
                            .StartUpPosition = 0
                            .top = convertMouseToForm.top + Target.Height
                            .left = convertMouseToForm.left
                        End With

                        MagicScrollBar.Show vbModeless

                    End If
                End If
            End If
        End If
    End If

End Sub 
```

最后在模块中复制此代码（请注意，最复杂的部分是以像素为单位的鼠标坐标转换为以点/英寸为单位的用户窗体坐标，我使用此处的代码[http://ramblings.mcpher.com/Home/excelquirks/片段/鼠标位置](http://ramblings.mcpher.com/Home/excelquirks/snippets/mouseposition)）

```
 Option Explicit

    Public baseValue As Double

    'Source: http://ramblings.mcpher.com/Home/excelquirks/snippets/mouseposition
    Declare Function GetDC Lib "user32" (ByVal hwnd As Long) As Long
    Declare Function GetDeviceCaps Lib "Gdi32" (ByVal hDC As Long, ByVal nIndex As Long) As Long
    Declare Function ReleaseDC Lib "user32" (ByVal hwnd As Long, ByVal hDC As Long) As Long

    Const LOGPIXELSX = 88
    Const LOGPIXELSY = 90

    Public Type tCursor
        left As Long
        top As Long
    End Type

    Private Declare Function GetCursorPos Lib "user32" (p As tCursor) As Long

Public Function pointsPerPixelX() As Double
    Dim hDC As Long
    hDC = GetDC(0)
    pointsPerPixelX = 72 / GetDeviceCaps(hDC, LOGPIXELSX)
    ReleaseDC 0, hDC
End Function

Public Function pointsPerPixelY() As Double
    Dim hDC As Long
    hDC = GetDC(0)
    pointsPerPixelY = 72 / GetDeviceCaps(hDC, LOGPIXELSY)
    ReleaseDC 0, hDC
End Function

Public Function WhereIsTheMouseAt() As tCursor
    Dim mPos As tCursor
    GetCursorPos mPos
    WhereIsTheMouseAt = mPos
End Function

Public Function convertMouseToForm() As tCursor
    Dim mPos As tCursor
    mPos = WhereIsTheMouseAt
    mPos.left = pointsPerPixelY * mPos.left
    mPos.top = pointsPerPixelX * mPos.top
    convertMouseToForm = mPos
End Function 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T00:15:06.083

我不完全确定你的要求，但在我看来你是对的尝试

```
Worksheet_SelectionChange(ByVal Target As Range) 
```

同样，我不确定哪些单元格允许滚动条的逻辑要求，但从你的问题来看，你自己已经明白了。所以我会做些什么来让所选单元格下方的滚动条是这样的：

```
Set oYourScrollBar = ActiveSheet.Shapes("YourScrollBar")

If isSrollBarCell Then  'It is assumed you figured this part out!

  oYourScrollBar.Visible = True  'You may want to get rid of ScreenUpdating first for stylistic reasons.

  oYourScrollBar.Top = Target.Top + Target.Height  'Vert Distance to clicked cell + Height of clicked cell puts you under the cell
  oYourScrollBar.Left = Target.Left + (Target.Width - oYourScrollBar.Width) / 2  'Follow that one?

  oYourScrollBar.ControlFormat.LinkedCell = target.Address  'Change the linked cell of the scroll bar

Else

  oYourScrollBar.Visible = False  'Since there is no scrolling here, hide the scroll bar

End If 
```

我想提醒一下，这段代码是通过参考 MSDN 在线文档编写的。我现在在一台 Linux 机器上，无法为您进行任何确切的调试，而且我无权访问您的文件和确切的结构。帮助文件起初很难导航，但您可以在那里找到大部分内容（检查“对象成员”下的内容）。我会警告你，Shapes 和 Controls 对象层次结构非常挑剔。我建议进行大量调试测试并阅读文档中的对象成员。

为了让您知道，我对位置代码的逻辑基于：

顶部（距文件顶部边缘的距离）- 到被点击单元格（目标）的距离 + 被点击单元格的高度使您位于被点击单元格的底部。

左（到文件左边缘的距离）- 到单击的单元格（目标）的距离加上单击的单元格宽度的一半，使滚动条的边缘位于目标的中心线。减去滚动条宽度的一半，使滚动条的中心线位于目标的中心线上。这说明滚动条和单元格的大小不同。

我以前做过这样的项目，所以它应该可以工作，但和往常一样，自己验证一下。您可能需要显式转换一些 int 到 double 转换，以使代码的位置部分正确运行（在 vba 中不常见，但当运行时引擎猜错时会发生这种情况）。如果您以前没有使用过这些，请参阅帮助文件中的 CInt()、CLng、CDbl() 等。

希望这一切都有帮助。让我们知道是否有问题。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-02-09T18:45:06.800

我认为最简单的解决方案是使用带有单元内下拉列表的列表以编程方式分配数据验证。因此，在工作簿中，您将有一张工作`SourceDropDown`表。

以下是我将采取的步骤：

1.  确保要为其设置下拉菜单的所有单元格都是命名范围。如果您决定插入/删除行，这将是非常宝贵的。
2.  创建一个包含列表所有值的工作表
3.  使用 Worksheet Change 事件确保在复制和粘贴时不会覆盖验证

以下是帮助您入门的示例代码。

```
Private Sub Worksheet_Change(ByVal Target As Range)
    Dim cell As Range
    Set cell = ThisWorkbook.Worksheets(1).Range("MyNamedRange") ' change to whatever you have
    If Not Application.Intersect(cell, Range(Target.Address)) Is Nothing Then
        With cell.Validation
            .Delete
            .Add Type:=xlValidateList, AlertStyle:=xlValidAlertStop, Operator:= _
            xlBetween, Formula1:="=SourceDropDown!$T$2:$T$20"
            .ShowError = False
        End With
    End If
End Sub 
```

# java - ConcurrentSkipListMap 的自定义比较器

> ID：13877796
> 
> 赞同：0
> 
> 时间：2012-12-14T11:26:53.793
> 
> 标签：java, sorting, map

我需要为 ConcurrentSkipListMap 定义一个自定义比较器，我使用此代码根据“LogicalClock”进行排序，但结果与我预期的不符。我创建这样的密钥：“ClientId”+“：”+“LogicalClock”

```
class Qentry{
    int  AckCount;
    int ClientID; 
    long LogicalClock;
}

Comparator<String> LogicalClockComparator = new Comparator<String>() {
        @Override public int compare(String k1, String k2) {
            if  (k1.compareTo(k2)==0)
                    return 0;
            return   (int)( Long.valueOf(k1.substring(k1.indexOf(":")+1)) -Long.valueOf(k2.substring(k1.indexOf(":")+1) ));
        }
ConcurrentSkipListMap<String,Qentry> q;
q =new ConcurrentSkipListMap<String,Qentry>(LogicalClockComparator); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T11:34:54.623

对我来说看起来像是一个错字（或复制/粘贴错误），也许你想使用（看看行尾）

```
return   (int)( Long.valueOf(k1.substring(k1.indexOf(":")+1)) -Long.valueOf(k2.substring(k2.indexOf(":")+1) )); 
```

而不是你所拥有的：

```
return   (int)( Long.valueOf(k1.substring(k1.indexOf(":")+1)) -Long.valueOf(k2.substring(k1.indexOf(":")+1) )); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T11:36:48.603

对于较大的时间差异，这将产生令人惊讶的结果。compare 应该只返回 -1、0 或 +1，但您可以使用更大的范围。因为`long`您希望将溢出转换为具有意外行为的 int。

我建议你使用`Long.compare()`它是否可用，`Double.compare`如果它不可用。

顺便说一句，由于地图不允许重复键，当您返回 0 时，它会将其视为重复项，因此如果您有`a:1`，`b:1`并且`c:1`它们都是重复项。解决此问题的方法是在比较相等的情况下比较整个字符串。

BTW2 虽然这是非常低效的代码，但您可以使用`parseLong`而不是`valueOf`稍微改进它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T11:37:37.100

除了错字之外，请注意您有 2 个潜在的溢出源：减去 2 个 long 和转换为 int 时。使用它可能会更好：

```
Long value1 = Long.valueOf(k1.substring(k1.indexOf(":")+1));
Long value2 = Long.valueOf(k2.substring(k2.indexOf(":")+1));
return value1.compareTo(value2); 
```

# html - 使用 tomcat 7 运行 JSP 文件

> ID：13877797
> 
> 赞同：2
> 
> 时间：2012-12-14T11:26:54.407
> 
> 标签：html, jsp, tomcat

嗨，我刚刚安装了 Apache Tomcat 7 并让服务器运行正常。当我输入 localhost:8089（8089 是我分配给 Tomcat 7 的端口）时，弹出 apache 网站，我必须运行一些 jsp 示例并且它们正确打开。

但是现在我希望自己创建一个 jsp 文件（我是第一次尝试教程），当我打开它们时，只有我编写的源代码显示在浏览器中。

我正在尝试的示例是这样的：

```
<html>
<head>
</head>

<body>
Hello World. <%= new java.util.Date() %>
</body>

</html> 
```

我在 Chrome 中看到的只是： `"Hello World. <%= new java.util.Date() %>"`

我将此文件保存在此路径中：

```
C:\Program Files\Apache Software Foundation\Tomcat 7.0\webapps\host-manager\WEB-INF\jsp 
```

在 WEB-INF 中有一个 index.html 文件准备好了。

难道我做错了什么？我应该在哪里保存我的文件？我尝试在 youtube 上观看教程，但其中大部分都是阿拉伯语，我什么也听不懂！

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-14T11:37:30.470

您的 JSP 文件不得在 WEB-INF 中。

您必须根据需要创建一个目录（`myFirstWebApp`例如），将您的 JSP 放在除 WEB-INF 之外的任何子目录中（例如`myFirstWebApp/foo/bar/hello.jsp`），然后通过将 myFirstWebApp firectory 复制到`webapps`Tomcat 目录来部署 webapp。然后可以使用 URL 访问 JSP

```
http://localhost:8089/myFirstWebApp/foo/bar/hello.jsp 
```

WEB-INF 是您放置不想从外部访问的文件的位置：

*   罐子（下`WEB-INF/lib`），
*   类（下`WEB-INF/classes`），
*   部署描述符（web.xml，在通过注解配置的 servlet 3.0 webapps 中是可选的），
*   以及您想要在 WEB-INF 下的任何其他文件（通常是配置文件）。

你为什么不阅读文档？[http://tomcat.apache.org/tomcat-7.0-doc/appdev/deployment.html](http://tomcat.apache.org/tomcat-7.0-doc/appdev/deployment.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T11:57:31.250

将您的 jsp 文件重命名为：

```
C:\Program Files\Apache Software Foundation\Tomcat 7.0\webapps\ROOT\index.jsp 
```

现在，导航到

```
http://localhost:8089/ 
```

简短易懂。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-21T05:34:06.207

将您的 jsp 文件放在 ROOT 文件夹中

```
/Users/<username>/Desktop/tomcat/webapps/ROOT/test.jsp 
```

像这样运行您的应用程序

[http://localhost:8080/test.jsp](http://localhost:8080/test.jsp)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-10T17:41:32.420

使用 .jsp 扩展名将 jsp 文件保存在 webapps 目录中

C:\Program Files\Apache Software Foundation\Tomcat 7.0\webapps 并在浏览器地址栏输入- http:\localhost:8089/exmp.jsp 并回车

# php - PHP - 左侧包含 0 的数字的长度

> ID：13877801
> 
> 赞同：1
> 
> 时间：2012-12-14T11:27:03.010
> 
> 标签：php

我试图通过它的长度来验证一个数字。此号码必须有 4 位数字才能通过验证。问题是当这个数字左边有 0 时，比如 0035。

现在我在这个：

```
echo (strlen ((string) 0025  )); 
```

总共有 2 个，但我希望它计算左边的 0，所以它总共有 4 个。显然，将整数转换为字符串不起作用，我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T11:31:12.703

你不能那样做，左零表示数字是[八进制而不是十进制](http://php.net/manual/en/language.types.integer.php)，你可以使用[sprintf()](http://br2.php.net/sprintf)来做到这一点。

例子：

```
echo strlen(sprintf("%04d", 25)); 
```

现场测试： [http ://codepad.viper-7.com/VQr7Xz](http://codepad.viper-7.com/VQr7Xz)

## 评论答案：

> 我不想将 0 添加到数字中，我想检测数字是否有 0。如果收到的号码是 25，则它不是有效号码。如果是 0025 则有效。我想要的是仅验证 4 位数字。——克劳迪奥·里贝罗

Cláudio，数字有无限的左零，虽然用户明确输入了 2 或 3 个左零，但还有更多隐藏的左零，这是一个数学基础，这就是为什么如果你收到一个，就不可能知道用户输入了多少左零`integer`多变的。如果变量具有恒定大小并且您想知道它有多少个左零，您可以这样做：

```
<?php
$int = 25;

echo  4 - strlen($int); 
```

现场测试：[http ://codepad.viper-7.com/fT2jSn](http://codepad.viper-7.com/fT2jSn)

但是，如果您的变量具有可变长度，则它必须是`string`类型而不是`numeric`类型。

收到的变量是 a 的示例`string`：

```
<?php
$strs = array("0025","000035","01","2");
foreach($strs as $str)
{
    preg_match("/^0+/", $str, $matches);
    echo strlen(@$matches[0]);
    echo "<br>";
} 
```

现场测试：[http ://codepad.viper-7.com/BTRTgR](http://codepad.viper-7.com/BTRTgR)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T11:31:52.893

那应该工作：

```
$str = "0025";
if( is_numeric($str) && strlen($str) == 4)
{
    echo "pass";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T11:48:06.080

如果是*数字*，而不是字符串，则数字没有*数字*。它有一个*价值*。您可以将该值格式化为一个用 0 填充的 4 位数字的字符串。但是验证一个数字是否有 4 位数字是无稽之谈，因为数字*值*没有格式。当您将其格式化为以 10 为底的数字时，该值仅变为“4 位”。在那之前，该值是一个可以用多种基数表示的值，并且在所有基数中都有不同数量的“数字”。

您要么想将数字格式化为 0 填充的 4 位字符串，要么您想检查该值是否在 0 和 9999 之间（或者如果它必须恰好是“4 位”，则为 1000 和 9999）。

```
if (0 <= $num && $num <= 9999) {
    $numStr = sprintf('%04d', $num);
} else {
    trigger_error('Number out of range');
} 
```

# java - jdb中的文本导航在bash中不起作用

> ID：13877802
> 
> 赞同：8
> 
> 时间：2012-12-14T11:27:07.393
> 
> 标签：java, bash, debugging, arrow-keys, jdb

当我在 bash 中运行 jdb 时，箭头键会产生奇怪的垃圾：

```
up: ^[[A
down: ^[[B
left: ^[[D
right: ^[[C 
```

所以我不能使用命令历史，或者更正一个拼写错误，因为我根本无法浏览文本，这很烦人。有针对这个的解决方法吗？

Java 版本信息：

```
"1.6.0_24"                                                                             
OpenJDK Runtime Environment (IcedTea6 1.11.5) (fedora-68.1.11.5.fc16-x86_64)                        
OpenJDK 64-Bit Server VM (build 20.0-b12, mixed mode) 
```

Bash 版本信息：

```
GNU bash, version 4.2.28(1)-release (x86_64-redhat-linux-gnu) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-07-03T04:34:30.943

你试过`rlwrap`吗？您可以安装`rlwrap`并运行

```
rlwrap jdb MyMainClass <args> 
```

而不仅仅是

```
jdb MyMainClass <args> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T11:30:06.293

你试过用 JDB运行[JLine吗？](http://jline.sourceforge.net/)

> 我可以使用 JLine 作为 jdb（java 调试器）的输入处理程序吗？
> 
> 是的。尝试运行：
> 
> java jline.ConsoleRunner com.sun.tools.example.debug.tty.TTY 参数

JLine 为您提供光标交互和命令行历史记录。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-27T05:26:26.747

按照布赖恩关于使用 JLine 的建议，这工作得相当好。

我终于可以使用 up/down 来浏览命令历史，但它有一些缺点，例如不支持 ALT+DEL（删除最后一个单词）、CTRL+LEFT/RIGHT（将光标向后/向前移动一个单词）和 CTRL+R（反向搜索过去的命令）。

[然后我了解到JLine2](https://github.com/jline/jline2)正在提供这些设施，所以我花了一些时间来尝试一下。

这是一段相当痛苦的旅程，因为我目前正在使用 OpenSUSE 12.3，我不会对所有细节感到厌烦，但我会概述它们，以防你真的热衷于此并且发现自己不得不遵循类似的旅程：

*   JLine2 仅提供源代码（至少在 OS12.3 上），因此没有简单的 rpm 安装
*   它需要 maven 来构建它（官方 OpenSUSE 12.3 存储库不提供，但幸运的是有人为它制作了[一个非官方的 rpm ）](http://software.opensuse.org/package/maven2)
*   由于我是在工作中构建的，因此 Maven 存在代理问题，因此我需要在“ **/usr/share/maven2/conf/settings.xml** ”文件中提供代理详细信息。
*   然后当我输入“ **mvn install** ”时，一些maven项目依赖项出现问题，我必须手动下载+安装（“maven-scm-api-1.5.jar”、“jansi-1.11.jar”和“bsh- 2.0b4.jar")
*   在此之后，它终于建成了，但运行时出现问题，但我通过[此处提到的调整解决了这些问题](https://github.com/jline/jline2/issues/157)

在此之后，它工作得相当好，我得到了我在 JLine1 上错过的大部分好处，但不幸的是，jdb 的“>”提示似乎在 CTRL+LEFT/RIGHT 操作期间干扰了光标的移动，即丢人现眼。

现在，我通过输入 CTRL+P 后跟 CTRL+N 来解决这个问题（这似乎清除了 ">" 提示并使一切正常工作）

旁注：我发现输入一个很长的命令来用 jline 运行 jdb 很痛苦，所以我发现通过 bash 脚本运行 jline2+jdb 更好，如下所示：

```
#!/bin/sh
#GI: This is a version of jdb that runs via jline, so that you can up/down through command history

# JLINE V1.0 METHOD
# =================
#/usr/local/jdk1.6.0_29/bin/java -classpath /usr/share/java/jline.jar:/usr/local/jdk1.6.0_29/lib/tools.jar jline.ConsoleRunner com.sun.tools.example.debug.tty.TTY $*

# JLINE V2.* METHOD
# =================
/usr/local/jdk1.6.0_29/bin/java -classpath /usr/share/java/jline.jar:/usr/local/jdk1.6.0_29/lib/tools.jar jline.console.internal.ConsoleRunner com.sun.tools.example.debug.tty.TTY $* 
```

例如，您可以通过 jline+jdb 运行您的程序，并且更简单：

```
jjdb.sh -classpath './*':'../lib/*' myprogram.MyMainClass 
```

好的，希望对任何渴望更多的人有所帮助。如果您需要有关我的任何旅程的更多详细信息，请告诉我，我保留了相当详细的日志，但只是不想让读者负担太多细节（除非事实证明您真的需要它！:)）

# javascript - 在 JS 中定义一个类似 const 的数组

> ID：13877825
> 
> 赞同：0
> 
> 时间：2012-12-14T11:28:44.813
> 
> 标签：javascript, arrays, constants

我想做这样的事情（c ++）：

```
const int SIZE = 5;
int array[SIZE]; 
```

但在 JS 中。我`SIZE`多次使用该值（对于许多数组以及稍后在代码中），并且我不想放置许多具有相同值的文字（以防我以后必须编辑它）。我在某处读到`const`JS 中有一个关键字，但它不适用于每个浏览器（不确定这是否属实，但我想要一个通用的解决方案）。越短/越简单越好！;)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:33:13.530

你可以分配一个

```
var arr = new Array(5); 
```

它初始化一个`length`属性为`5`但没有值的数组（稀疏数组）。

在 C++ 中声明变量类型是不可能的，因为 JS 是一种[松散类型](http://en.wikipedia.org/wiki/Weak_typing)的语言，也没有固定长度的数组 - `Array`s 更像是列表。对于`const`关键字，看看[这个问题](https://stackoverflow.com/q/12272836/1048572)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T11:36:15.240

该`const`关键字实际上是非标准的，~~并且仅由 Mozilla 实现，~~因此不能保证跨浏览器工作（但显然有些浏览器实现了它，请参阅 Bergi 答案上的链接）。只需使用常规变量，大写名称表示它应该是一个常量：

```
var SIZE = 5;
var arr = new Array(SIZE); 
```

注意：如果您将除数字以外的任何内容传递给`Array`构造函数，它将创建一个数组，其中包含`length`您在 index 处传递的值`0`。在这种情况下，最好只使用文字符号 ( `var arr = ['foo']`)。另请记住，当您将数字传递给构造函数时，您只是设置了初始值`length`，之后始终可以添加或删除元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-01T07:12:25.317

```
Object.defineProperty(window, PI, {
    configurable: false,
    writeable: false,
    value: 3.1415
});

console.log(PI); // 3.1415

/* if 'use strict', the acts below would throw error */

PI = 0; // nothing happened

window.PI = 0; // nothing happened

delete window.PI;  // nothing happened

Object.defineProperty(window, PI, {
    configurable: true,
    writeable: true,
    value: 0
}); // nothing happened

console.log(PI); // 3.1415 
```

数组或对象也可以将其属性定义为“常量”

```
Object.defineProperties 
```

但最快的方法是

```
Object.freeze(obj_name) 
```

但是您必须确保对象本身是“常量”，然后它的属性才是真正安全的

# jquery - 在 jQuery 中定位后代元素时没有得到想要的输出

> ID：13877826
> 
> 赞同：0
> 
> 时间：2012-12-14T11:28:53.777
> 
> 标签：jquery

我没有得到给定代码的彩色输出。

```
<html>
<head>
<title>the title</title>
   <script type="text/javascript" 
   src="/jquery/jquery-1.3.2.min.js"></script>

   <script type="text/javascript" language="javascript">

   $(document).ready(function() {
      $("p").find("span").addClass("selected");
   });

   </script>
   <style>
      .selected { color:red; }
  </style>
</head>
<body>

   <p>This is 1st paragraph and <span>THIS IS RED</span></p>
   <p>This is 2nd paragraph and <span>THIS IS ALSO RED</span></p>
</body>
</html> 
```

有什么我想念的吗？谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:32:25.290

您是否在控制台日志中得到任何信息？代码很好看它在这里工作，确保你的 Jquery src 是正确的

```
$("p").find("span").addClass("selected");​ 
```

[JS小提琴](http://jsfiddle.net/YjCWw/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:47:47.187

使用这个：http: **[//jsfiddle.net/gaHhv/1/](http://jsfiddle.net/gaHhv/1/)**

```
 <script type="text/javascript" src="http://code.jquery.com/jquery-1.3.2.js"></script> 
```

虽然`you should use latest jquery`.

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.js"></script> 
```

# node.js - NodeJS - 需要错误密码

> ID：13877831
> 
> 赞同：11
> 
> 时间：2012-12-14T11:29:11.007
> 
> 标签：node.js, express

我是使用 nodejs 的新手，我只是想启动一个已经与我的队友一起工作的服务器。我在 Mac 上，并且已经使用“npm install”安装了所有需要的模块。现在模块“cookie-signature”似乎有问题，它已经包含在“express”模块中。我正在尝试启动程序并且没有收到任何错误，但是当我尝试在 localhost:3000 上打开页面时，出现以下错误：

```
/Users/kevinglaap/Sites/Uni/git/node_server/node_modules/express/node_modules/cookie-signature/index.js:19
  if ('string' != typeof secret) throw new TypeError('secret required');
                                       ^
TypeError: secret required
    at Object.exports.sign (/Users/kevinglaap/Sites/Uni/git/node_server/node_modules/express/node_modules/cookie-signature/index.js:19:40)
    at ServerResponse.end (/Users/kevinglaap/Sites/Uni/git/node_server/node_modules/express/node_modules/connect/lib/middleware/session.js:267:34)
    at ServerResponse.EventEmitter.emit (events.js:93:17)
    at ServerResponse.res.writeHead (/Users/kevinglaap/Sites/Uni/git/node_server/node_modules/express/node_modules/connect/lib/patch.js:73:36)
    at ServerResponse._implicitHeader (http.js:932:8)
    at ServerResponse.OutgoingMessage.end (http.js:767:10)
    at res.end (/Users/kevinglaap/Sites/Uni/git/node_server/node_modules/express/node_modules/connect/lib/middleware/session.js:282:13)
    at /Users/kevinglaap/Sites/Uni/git/node_server/node_modules/express/node_modules/connect/lib/middleware/session/memory.js:73:11
    at process.startup.processNextTick.process._tickCallback (node.js:244:9) 
```

该模块从不在服务器资源中使用。我已经检查了“sign”函数的用法，因为错误是一个获取的错误，这表明资源可能做错了什么，但它只被 express 或 express 中的其他模块使用。我已经在网上搜索了几天，还没有找到解决方案。我错过了什么？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-14T18:34:50.543

在配置您的 express 实例时，您需要：

```
app.use(express.cookieParser('your secret here'));
app.use(express.session()); 
```

确保您的 cookieParser（带有您的秘密字符串）在`express.session()`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-12-15T20:40:30.383

使用更新的快速版本：

```
var app = express();
app.use(require('express-session')({ secret: 'keyboard cat', resave: true, saveUninitialized: true })); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-04T07:32:50.633

**在中间件中创建 express-session 实例时应该添加一个秘密。**

拥有 .env 文件来存储所有秘密，而不仅仅是添加字符串，这始终是一个好习惯。

在 .env 中：

```
secret='my_secret' 
```

在 server.js 中：

```
app.use(cookieParser())
app.use(session({
  resave:true,
  saveUninitialized:true,
  secret:process.env.secret,
  cookie:{maxAge:3600000*24}
})) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-15T10:55:59.563

```
app.use(session({
    secret: process.env.SECRET,
    reserve: true,
    saveUninitialized: true,
    cookie:{secure: false}
})
)
    .env
PORT=6000
CONNECTION_STRING=mongodb://localhost:27017//bookingApp
SECRET=[thinkbeforactingalwas]
MODE_ENV=development 
```

# java - Java HotSpot(TM) Embedded Client VM 警告：无法检测初始线程堆栈位置：find_vma failed

> ID：13877832
> 
> 赞同：1
> 
> 时间：2012-12-14T11:29:12.233
> 
> 标签：java, linux, raspberry-pi

我正在使用`raspberry pi`它`Linux Kernel`。安装后，当文件执行`rootfs`时，我收到以下错误消息。`/etc/init.d/rcS`

```
Java HotSpot(TM) Embedded Client VM warning: Can't detect initial thread stack location: find_vma failed 
Hello World Java is executing fine //It is the output of HelloWorld 
```

这是我的`/etc/init.d/rcS`文件包含

```
export LD_LIBRARY_PATH=/usr/lib/arm/jli/
cd /etc/sample_javaTest
exec java HelloWorld 
```

我的问题是我的 java 代码运行良好，那么为什么会出现警告？

如果我做错了什么或以不正确的方式做事，请纠正我。

谢谢

# android - 如何从 Android 应用程序通过 PHP 连接 MySQL 服务器？

> ID：13877833
> 
> 赞同：0
> 
> 时间：2012-12-14T11:29:17.697
> 
> 标签：android, mysql, web-services, listview

我正在开发一个 android 应用程序，其中一些歌曲存储在服务器中。我必须在主屏幕中以`ListView`. 当用户单击任何歌曲时，它应该在*Media Player*中播放该歌曲。

我在本地工作（来自 SD 卡上的文件），但我想将这些文件放在服务器上。我已经尝试了很多来自谷歌的例子，但我没有得到正确的例子。

任何人都知道如何通过 PHP 连接到 MySQL 服务器然后请帮助我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:33:45.600

你可以在这里找到很好的教程

[如何将Android与PHP、MySQL连接起来](http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/)

# ios - 使用 Cordova/PhoneGap 模拟器命令模拟 iPad

> ID：13877840
> 
> 赞同：9
> 
> 时间：2012-12-14T11:29:50.300
> 
> 标签：ios, ipad, cordova, ios-simulator

我想使用包含的 ./emulator 命令和 Cordova/PhoneGap 从命令行在 iPad 模拟器中运行我的应用程序。

基本说明在这里：

*   [http://docs.phonegap.com/en/2.2.0/guide_command-line_index.md.html](http://docs.phonegap.com/en/2.2.0/guide_command-line_index.md.html)

我从这里安装了 iOS 模拟器：

*   [https://github.com/phonegap/ios-sim](https://github.com/phonegap/ios-sim)

文档说它支持从命令行模拟 iPad。但是，默认情况下它会在 iPhone 上打开，将设备更改为“iPad”会关闭应用程序（并且它不会安装在主屏幕上）。我已经搜索但找不到要启动以模拟 iPad 的文档。

如何运行 Cordova ./emulator 命令以打开 iPad？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-05-05T21:29:49.970

可能是您使用的是旧版本的 phonegap/cordova，但在 3.4 版中，以下对我有用：

```
cordova emulate ios --target="iPad" 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-07T23:12:40.137

Cordova`emulate`脚本只是`ios-sim`您可以直接从命令行使用的命令的包装器。假设您当前的工作目录是其中包含 emulate 脚本的目录，您可以使用以下命令在 iPad 模式下在模拟器中启动构建：

```
ios-sim launch ../build/myApp.app --family ipad --stderr console.log --stdout console.log & 
```

以下内容无疑是幼稚的（我不知道 shell 脚本），但我已经破解了`emulate`脚本以支持第二个命令行参数，该参数允许我指定设备系列。您可能不知道脚本已经接受了第一个参数，该参数允许您指定项目`.app`文件的路径，因为如果未指定参数，它会计算出路径。

[使用以下内容更新您的脚本版本（此处](https://github.com/net-uk-sweet/cordova-ios)为 GitHub fork ）：

```
#! /bin/sh
#
# Licensing info removed for brevity
#

set -e

XCODE_VER=$(xcodebuild -version | head -n 1 | sed -e 's/Xcode //')
XCODE_MIN_VERSION="4.5"

if [[ "$XCODE_VER" < "$XCODE_MIN_VERSION" ]]; then
    echo "Cordova can only run in Xcode version $XCODE_MIN_VERSION or greater."
    exit 1
fi

CORDOVA_PATH=$( cd "$( dirname "$0" )" && pwd -P)
PROJECT_PATH="$(dirname "$CORDOVA_PATH")"
XCODEPROJ=$( ls "$PROJECT_PATH" | grep .xcodeproj  )
PROJECT_NAME=$(basename "$XCODEPROJ" .xcodeproj)

APP_PATH=$1
DEVICE_FAMILY=$2

if [ $# -lt 1 ]; then
    APP_PATH="$PROJECT_PATH/build/$PROJECT_NAME.app"
    DEVICE_FAMILY=iphone
fi

if [ ! -d "$APP_PATH" ]; then
    echo "Project '$APP_PATH' is not built. Building."
    $CORDOVA_PATH/build || exit $?
fi

if [ ! -d "$APP_PATH" ]; then
    echo "$APP_PATH not found to emulate."
    exit 1
fi

# launch using ios-sim
if which ios-sim >/dev/null; then
    ios-sim launch "$APP_PATH" --family "$DEVICE_FAMILY" --stderr "$CORDOVA_PATH/console.log" --stdout "$CORDOVA_PATH/console.log" &
else
    echo -e '\033[31mError: ios-sim was not found. Please download, build and install version 1.4 or greater from https://github.com/phonegap/ios-sim into your path. Or "brew install ios-sim" using homebrew: http://mxcl.github.com/homebrew/\033[m'; exit 1;
fi 
```

然后，您可以像这样运行脚本（假设您当前的工作目录是包含脚本的 cordova 目录）：

```
./emulate ../build/myApp.app ipad 
```

如果您总是要在 iPad 上进行测试，并且您不想每次都指定应用程序的路径，您可以像这样将首选设备系列硬编码到脚本中，然后像以前一样启动模拟器：

```
ios-sim launch "$APP_PATH" --family ipad  --stderr "$CORDOVA_PATH/console.log" --stdout "$CORDOVA_PATH/console.log" & 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-06T15:12:56.130

对我来说，这里提到的所有选项都不起作用，我不得不用这个命令调用它来显示 iPad Retina：

```
``ios-sim launch [DIR_OF_APP]platforms/ios/build/emulator/My-App.app --devicetypeid "com.apple.CoreSimulator.SimDeviceType.iPad-Retina, 8.2" 
```

检索所有`devicetypeid's`类型`ios-sim showdevicetypes`

# javascript - 在 javascript ajax 调用上运行基准测试

> ID：13877843
> 
> 赞同：1
> 
> 时间：2012-12-14T11:30:07.887
> 
> 标签：javascript, ajax, benchmarking, design-patterns

一个函数为一个 id 返回一个项目。另一个函数返回 3 个项目的 3 个 id 我只想进行基准测试，这将是最好的，为了简单起见，我更喜欢单个请求。不过需要证明。

我正在使用 jQuery $.ajax 来执行获取请求。数字似乎不对：

*   我从**100 个三元组**开始，耗时**0.16s**。
*   **10k 三元组**需要**约 17 秒**（我原本预计**约 300 秒**），后端发出 Endeca 请求。

我选择了 20 个左右的**ID**号来请求 [Endeca 默认缓存，但对于这些查询，它是关闭的]

问题的核心是如何对 ajax 调用进行基准测试。电话被解雇，开始和结束时间需要事后结婚以获得时间。然而，异步调用飞过。在我看来，我只是在测量一系列函数调用。

# jquery - Create a variable from a html selector and then check for items within it

> ID：13877846
> 
> 赞同：0
> 
> 时间：2012-12-14T11:30:20.940
> 
> 标签：jquery, html

I create a variable from a html object

```
var li = $(this).closest('li'); 
```

How do I now select inner html objects from this variable eg span. I have tried

```
li.span 
```

but no luck.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T11:31:32.157

You can use context to pass the variable with selector. You can learn more about selector and context [**here**](http://api.jquery.com/jQuery/)

```
var li = $(this).closest('li');
$('span', li)
htmlOfFirstSpan = $('span', li).html(); 
```

*This will give you span elements within li*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T11:34:28.873

This should work:

```
var li = $(this).closest('li');
$(li).innerHtml(); 
```

You could also do:

```
$(li).('span').html();
$(li).('.someClass').html(); 
```

# android - 遍历 LinearLayout 视图中的所有子项时获取 ClassCastException？

> ID：13877849
> 
> 赞同：0
> 
> 时间：2012-12-14T11:30:22.660
> 
> 标签：android

我想遍历所有视图的线性布局heiarchiy，但我在最后一个元素、框架布局及其正确的类中遇到异常。

```
public void traverseRootsViewAndSetLayoutParam(View view,
        double heightRatio, double widthRatio) {
    view.setLayoutParams(new LinearLayout.LayoutParams(
            (int) (((double) widthRatio) * (view.getWidth())),
            (int) (((double) heightRatio) * (view.getHeight()))));
    if (view instanceof LinearLayout || view instanceof FrameLayout) {
        if (view instanceof LinearLayout) {
            System.out.println(">>> LinearLayout Class >>> "
                    + view.getClass());
            int childcount = ((LinearLayout) view).getChildCount();
            for (int i = 0; i < childcount; i++) {
                View childView = ((LinearLayout) view).getChildAt(i);
                traverseRootViewAndSetLayoutParam(childView, heightRatio,
                        widthRatio);
            }
        } else if (view instanceof FrameLayout) {
            System.out.println(">>> FrameLayout Class >>> "
                    + view.getClass());
            // getting error here , even the view is framelayout???
            int childcount = ((FrameLayout) view).getChildCount();
            for (int i = 0; i < childcount; i++) {
                View childView = ((FrameLayout) view).getChildAt(i);
                traverseRootViewAndSetLayoutParam(childView, heightRatio,
                        widthRatio);
            }
        }
    }
} 
```

# javascript - 如何清空另一个文本框上的文本框

> ID：13877852
> 
> 赞同：0
> 
> 时间：2012-12-14T11:30:40.897
> 
> 标签：javascript, asp.net, ajax

我在 asp.net 页面中有两个文本框。我想检查 onkeypress 或第一个文本框的任何其他事件，如果用户删除其中的文本，那么第二个文本框的文本也应该被删除。
我在 onkeypress 、 onkeyup 和 onkeydown 上尝试了不同的方法，但它不起作用。
不幸的是，我现在没有代码。任何人都可以为此任务提供一个javascript方法。

```
I know it can be done on textchange event of textbox in codebehind but i want it to be done on client side. 
```

此外，还有一个与文本框关联的 AJAX AutoCompleteExtender。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:48:02.600

似乎你在寻找这样的东西

```
<input id="txt1" type="text"  />
<input id="txt2" type="text" /> 
```

如果仅当 textbox1 值为空时才需要删除文本

```
$('#txt1').keyup(function() {
     var str = $('#txt1').val();
    if(str==''){
     $('#txt2').val(str );
    }
}); 
```

如果需要保持相同的文本删除 if 条件

jsfiddle[示例](http://jsfiddle.net/VFYZw/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T11:48:44.780

```
 <input type="text" id="text1" onKeyUp="myFunction(event)" />
 <input type="text" id="text2" />

<script type="text/javascript">

   function myFunction(event){
         if(document.getElementById('text1').value == ""){
             document.getElementById('text2').value = "";
         }
   }
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T11:49:11.957

试试这个

```
<asp:TextBox ID="txt1" Runat= "Server" onkeyup="javascript:keyUP(this);" ></asp:TextBox>
<asp:TextBox ID="txt2" Runat= "Server" ></asp:TextBox>

var txt2= document.getelementByID('txt2.ClientID');

function keyUP(txt) 
{
    if(txt.value == '')
    {
        txt2.value == '';
    }   
} 
```

谢谢

# javascript - 使用 JQuery slidetoggle() 时屏幕不向下滚动

> ID：13877855
> 
> 赞同：4
> 
> 时间：2012-12-14T11:30:51.363
> 
> 标签：javascript, jquery, html, css, slidetoggle

我有一个站点，其中有一个名为 .slidingDiv 的站点，当单击锚点 .show_hide 时，它​​会出现并向下滑动，当它是页面上唯一的内容时，这很棒。

如果此 div 上方有其他内容，它不会向下滚动并显示。相反，它显示了 div，但它不在站点内，因此它确实可以工作，但不会将其余内容向上推。

这是JQuery：

```
<script type="text/javascript">

$(document).ready(function(){

        $(".slidingDiv").hide();
        $(".show_hide").show();

    $('.show_hide').click(function(){
    $(".slidingDiv").slideToggle(), 1000;
    scrollTop: $(this).offset().top
    });

});

</script> 
```

非常感谢

皮特

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-14T14:27:35.677

`scrollTop`在函数的回调中`slideToggle`或在调用函数之后（如您所做的那样）设置`slideToggle`最多会导致跳跃行为。如果您正在寻找流畅的动画，最好先启动幻灯片然后`animate`向下滚动页面。这个[fiddle](http://jsfiddle.net/NPXLF/)证明了这一点。这是js：

```
$(document).ready(function() {
  $(".slidingDiv").hide();
  $(".show_hide").show();

  $('.show_hide').click(function() {
    $(".slidingDiv").slideToggle(1000);
    $('html, body').animate({
      scrollTop: $(".slidingDiv").offset().top + $('window').height()
    }, 2000);
  });
});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-15T07:08:42.240

只需在 scrollTop 之前进行检查

```
<script type="text/javascript">

$(document).ready(function(){

	$(".slidingDiv").hide();
	$(".show_hide").show();

	$('.show_hide').on('click',function(){
		$(".slidingDiv").slideToggle(function(){
			if($('.slidingDiv').height() > 0) {
				$('html, body').animate({
			        scrollTop: $(".slidingDiv").offset().top
			    }, 1000);
			}
		});
	});

});

</script>
```

# java - java中字符串、数字和括号的模式匹配

> ID：13877856
> 
> 赞同：-4
> 
> 时间：2012-12-14T11:30:55.563
> 
> 标签：java, regex

我想知道以下字符串的模式。

例子：`test [123],test,123test,1234`

如果字符串包含字母、数字和方括号（开头、结尾），那么模式应该匹配相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:35:20.833

```
"[a-zA-Z\\d\\[\\]]+" 
```

Your request is ambiguous... What about the commas? And spaces?

# android - 获取 AUTHORIZE_SERVICE 的未知权限错误

> ID：13877859
> 
> 赞同：0
> 
> 时间：2012-12-14T11:31:09.303
> 
> 标签：android, facebook, permissions

我已经在我的应用程序中集成了 facebook。应用程序在设备 Gallexy 2.3 中运行，但应用程序未在与 4.0.3 兼容的索尼爱立信设备中运行并生成异常

`com.sonyericsson.facebook.permission.AUTHORIZE_SERVICE`包中的未知权限`com.sonyericsson`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T06:39:11.767

将您的设备与 Facebook 帐户同步。

# c++ - Tkinter 创建的 C++ 对话框中的嵌入式 Python

> ID：13877862
> 
> 赞同：1
> 
> 时间：2012-12-14T11:31:32.503
> 
> 标签：c++, python, mfc, tkinter, python-embedding

我已成功地将 python 嵌入到我的 c++ 应用程序中，该应用程序运行 mfc 并在 Visual Studio 2010 中编译。

我嵌入的 Python 版本是：2.7.3（默认，2012 年 4 月 10 日，23:31:26）[MSC v.1500 32 位（英特尔）]

我什至有几种方法可以让我在加载的脚本中调用主程序的选定函数。

当我尝试使用 Tkinter 使用我的 python 脚本创建对话框时，就会出现问题。在显示这些对话框时，当我再次尝试初始化 Tkinter 和 Python 解释器时，程序会崩溃。我找不到关于这个问题的太多信息：

[http://mail.python.org/pipermail/python-list/2001-July/114106.html](http://mail.python.org/pipermail/python-list/2001-July/114106.html)

和一个潜在的解决方案：http: [//www.python.org/workshops/1995-12/papers/ahlstrom1.html](http://www.python.org/workshops/1995-12/papers/ahlstrom1.html)

我是使用 mfc 和 python 编程的新手，所以任何正确方向的指针都将不胜感激。

谢谢

# android - android 应用程序通过互联网更新

> ID：13877875
> 
> 赞同：-1
> 
> 时间：2012-12-14T11:32:16.383
> 
> 标签：android, google-app-engine, google-cloud-messaging

我想做一个安卓应用程序。即这是一个测验应用程序。就像发布我的应用程序后，我添加了一些新问题。我想当用户连接到互联网应用程序时应该更新。

那么如何从互联网更新应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:35:18.920

Do you have the data held in sqlite within the app? If so, you could look for updates to data on the internet (presumably on a website you already host) everytime the app starts. Do this in an async task so that it doesn't affect the user experience.

If newer data is found, you could fetch it and update the sqlite tables in the background.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:36:07.423

*   Data bundled with app : If you compile and upload a new apk file to play store, update will show in users play store. This is good for occasional updates, like a new version of app or so.

*   Data not bundled with app : you can make your app fetch its question data from a remote server. This is easier for very frequent updates, like you add questions daily on a web site. But you will need a server.

# java - java中的加密和解密密码

> ID：13877882
> 
> 赞同：0
> 
> 时间：2012-12-14T11:32:33.577
> 
> 标签：java, mysql, jdbc, encryption

我想将加密的密码存储在我的 mysql 数据库中。

我已经插入了像 ari 这样的密码意味着必须保存像 B-dd2c1cd0250859d32754fdd85ffc0531 这样的密码。

但我必须插入数据（**ari**）意味着 ari 显示在我的数据库中。我怎样才能加密密码并像上面的格式一样保存密码。

例如：ari 保存在数据库中，格式为 B-dd2c1cd0250859d32754fdd85ffc0531。我该怎么做。请帮帮我。

我写了代码：

```
public class Insert {

   public String insertData(String userName,String userPassword){

   try{

   Class.forName("com.mysql.jdbc.Driver");
  Connection con =  DriverManager.getConnection("jdbc:mysql://server:3306/android","XXXX","XXX");
   PreparedStatement statement =  con.prepareStatement("INSERT INTO xcart_customers(login,password) VALUES ('"+userName+"','"+userPassword+"');");
       int result = statement.executeUpdate();
       }

          catch(Exception exc){
            System.out.println(exc.getMessage());
          }

          return "Insertion successfull!!";
        }} 
```

这是我的 Demo.java 类：

```
public class Demo {
public static void main(String[] args){
    Insert obj = new Insert();
    System.out.println(obj.insertData("krishna", "ari"));
   }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:42:35.167

您需要查看密码哈希和加盐。看看[这个](http://viralpatel.net/blogs/java-md5-hashing-salting-password/)帖子。

**编辑：**

记住散列是一种方法！所以你不能指望将散列值转换回明文（在本例中为 ari）。您可以做的是，当登录工作时，您可以检查用户输入的值是否等于数据库值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:47:28.373

在不知道使用哪种方案加密现有数据的情况下，无法判断如何实现兼容性。如果您可以重新开始，[bcrypt 是您的最佳选择](http://codahale.com/how-to-safely-store-a-password/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T11:49:36.973

查看 sql 查询`INSERT INTO xcart_customers(login,password)`，我猜您正在尝试加密 X-CART 的密码。

X-CART 使用基于 Blowfish 密钥的加密。您可以从 config.php -file 中找到您的密钥。

这是一个已经回答的关于用 java 中的密钥加密河豚的问题，这可能有助于弄清楚如何加密它

[在 Java 中使用 BlowFish 进行加密](https://stackoverflow.com/questions/5244950/encryption-with-blowfish-in-java)

# javascript - 如何在谷歌图表工具中连接两点 - 散点图

> ID：13877883
> 
> 赞同：4
> 
> 时间：2012-12-14T11:32:32.450
> 
> 标签：javascript, google-visualization, scatter-plot

我使用谷歌图表工具来绘制带有一些缺失数据的简单图表。使用我的代码，我在这张图片上得到了类似的东西：

![](../Images/3a6e2f89248009910744ead54d962c05.png)

是否可以用类似于 (4) - (5) 连接的线连接点 (1) 和 (4)？也许我可以使用另一种类型的图表来实现相同的结果？我尝试了带选项的面积图`interpolateNulls`，但结果是一样的。它只能插入`NULL`被某个日期包围的 s，而不是连续插入两个或更多`NULLs`。

下面是示例代码：

```
google.load('visualization', '1.0', {'packages':['corechart']});
google.setOnLoadCallback(drawChart);
function drawChart() {
  var data = new google.visualization.DataTable();
  data.addColumn('number', 'Year');
  data.addColumn('number', 'Sales');
  data.addRows([
    [1, 1000],
    [2, null],
    [3, null],
    [4, 1030],
    [5, 1080]
  ]);
  var options = {
    'title'     : 'Line chart',
    'width'     : 400,
    'height'    : 300,
    'lineWidth' : 2
  };

  var chart = new google.visualization.ScatterChart(document.getElementById('chart_div'));
  chart.draw(data, options);
}
```

```
<html>
    <body>
        <div id="chart_div"></div>
    </body>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
</html>
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-09-20T17:55:39.433

类似的问题：[谷歌图表线：如何使用连续轴正确连接点](https://stackoverflow.com/questions/27078528/google-chart-line-how-to-connect-dots-properly-using-a-continuous-axes)

您的问题的答案是关于其中一条评论：

'如果您尝试传递的值是通过某些 xml 或 json 传递的，并且其中包含空值，它将无法正确绘制并且将分散或作为折线图中的虚线以便绘制它们，有条件删除所有空值然后它将正确绘制。通过@Taher SK

# sitecore - 如何为所有后端用户设置 Sitecore 默认应用程序选项？

> ID：13877886
> 
> 赞同：3
> 
> 时间：2012-12-14T11:32:43.097
> 
> 标签：sitecore, sitecore6

从提高我们的 Sitecore 安装的后端性能来看，我可以看到调整一些应用程序设置会带来可观的收益 - 例如，取消选中“预取折叠部分”会产生奇迹，隐藏验证栏和标准字段也是如此。

但是有没有办法为用户设置这些选项而不要求他们自己做，有没有办法限制他们实际可以设置的选项？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T00:48:49.213

John West 最近发表了一篇关于通过`LoggedIn`管道处理器为特定设置执行此操作的博客。您可以将其用作模型来处理任何设置：

[在 Sitecore ASP.NET CMS 的内容编辑器中自动显示快速信息部分](http://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2012/12/Automatically-Show-the-Quick-Info-Section-in-the-Content-Editor-of-the-Sitecore-ASPNET-CMS.aspx)

# jquery - jQuery工具提示重叠图像

> ID：13877890
> 
> 赞同：0
> 
> 时间：2012-12-14T11:33:12.513
> 
> 标签：jquery, tooltip

我正在使用 jQuery 工具提示，但它与页面上的图像重叠。无论如何我可以阻止这种行为。

```
<div class="tooltip">
<div class="box">
<p class="info">
Some text in tooltip
</p>
</div>
</div> 
```

CSS：

```
.tooltip { position: absolute; z-index: 500; width: 240px; }
.tooltip .box { float: left; background: #4b8aa2; width: 199px; border-radius: 2px; -moz-border-radius: 2px; padding: 10px 15px; }
.tooltip .box p.info { color: #fff; font-size: 1.2em; line-height: 1.2em; } 
```

谢谢

# junit - 如何防止 sbt 运行集成测试？

> ID：13877892
> 
> 赞同：13
> 
> 时间：2012-12-14T11:33:14.597
> 
> 标签：junit, sbt, scalatest

Maven surefire-plugin 不运行集成测试（按照惯例，它们以“IT”后缀命名），但 sbt 同时运行：单元和集成。那么，如何防止这种行为呢？有没有一种通用的方法来区分 ScalaTest 的集成和单元测试（默认情况下不运行 FeatureSpec-tests）

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-14T18:30:18.200

如何做到这一点完全记录在[http://www.scala-sbt.org/release/docs/Detailed-Topics/Testing#additional-test-configurations-with-shared-sources](http://www.scala-sbt.org/release/docs/Detailed-Topics/Testing#additional-test-configurations-with-shared-sources)上的 sbt 手册中：

```
//Build.scala
import sbt._
import Keys._

object B extends Build {
  lazy val root =
    Project("root", file("."))
      .configs( FunTest )
      .settings( inConfig(FunTest)(Defaults.testTasks) : _*)
      .settings(
         libraryDependencies += specs,
         testOptions in Test := Seq(Tests.Filter(itFilter)),
         testOptions in FunTest := Seq(Tests.Filter(unitFilter))
         )

  def itFilter(name: String): Boolean = name endsWith "ITest"
  def unitFilter(name: String): Boolean = (name endsWith "Test") && !itFilter(name)

  lazy val FunTest = config("fun") extend(Test)
  lazy val specs = "org.scala-tools.testing" %% "specs" % "1.6.8" % "test"
} 
```

呼吁`sbt test`进行单元测试和`sbt fun:test`集成测试以及`sbt test fun:test`两者兼而有之。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-05T18:24:17.537

使用最新的 sbt 最简单的方法就是应用`IntegrationTest`配置和相应的设置，如此[处](http://www.scala-sbt.org/0.13.0/docs/Detailed-Topics/Testing#integration-tests)所述，-然后将测试放在`src/it/scala`项目的目录中。

# sql - SQL 查询 - 限制不符合我的预期

> ID：13877893
> 
> 赞同：0
> 
> 时间：2012-12-14T11:33:17.280
> 
> 标签：sql, oracle

我有以下查询：

```
SELECT 
(substr(REGEXP_SUBSTR(qot_sup_xpressfeed, ',[^,]+,'), 2, length(REGEXP_SUBSTR(qot_sup_xpressfeed, ',[^,]+,')) - 2)) ,
xex.xex_xexc_k,
  FROM qot, sec, exc, ctr, xcx, xex, xexc, xcrr, crr
 WHERE qot_source = 'X'
       AND qot_id = 2029557521
       AND nvl(qot_real_exc_id, qot_exc_id) = exc_id
       AND exc_ctr_id = ctr_id
       AND qot_sec_id = sec_id
       AND nvl(qot_real_exc_id, qot_exc_id) = xex_exc_id(+)
       AND qot_crr_id = xcx_crr_id(+)
       AND xex_xexc_k = xexc_k(+)
       AND xcx_xcrr_k = xcrr_k(+)
       AND qot_crr_id = crr_id(+)
       AND qot_status IN (1, 2)
      AND (qot_sup_xpressfeed IS NULL OR to_number(substr(REGEXP_SUBSTR(qot_sup_xpressfeed, ',[^,]+,'), 2, length(REGEXP_SUBSTR(qot_sup_xpressfeed, ',[^,]+,')) - 2)) = xexc_k); 
```

当我注释掉最后一个限制时`AND (qot_sup_xpressfeed IS NULL OR to_number(substr(REGEXP_SUBSTR(qot_sup_xpressfeed, ',[^,]+,'), 2, length(REGEXP_SUBSTR(qot_sup_xpressfeed, ',[^,]+,')) - 2)) = xexc_k);`，我得到了结果：

```
1135    67
1135    111
1135    549
1135    246
1135    103
1135    564
1135    1135
1135    21 
```

如您所见，我有一排：

1135 1135

但是当我添加最后一个限制时，我没有得到任何结果：

```
 AND (qot_sup_xpressfeed IS NULL OR to_number(substr(REGEXP_SUBSTR(qot_sup_xpressfeed, ',[^,]+,'), 2, length(REGEXP_SUBSTR(qot_sup_xpressfeed, ',[^,]+,')) - 2)) = xexc_k); 
```

我希望我会得到 1 个结果（提到的`1135 1135`）。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:41:40.123

您正在选择`xex.xex_xexc_k`，而您的测试正在进行`xexc_k`。由于这是一个 OUTER JOIN，它们可能会有所不同。当你与`xex.xex_xexc_k`而不是比较时会发生什么？

# javascript - JavaScript HTML：具有悬停功能的图像消失

> ID：13877896
> 
> 赞同：3
> 
> 时间：2012-12-14T11:33:26.790
> 
> 标签：javascript, html, onmouseover, onmouseout

我在两个图像上的 JavaScript 悬停功能遇到了一些问题。当用户将鼠标悬停在箭头图像上时，它应该变成该图像的悬停版本，如果用户单击它，它应该启动另一个 javascript 函数来展开/折叠下面的选项卡。[这里](http://www.lenenaevdal.com/cv.html)是现场直播。问题在于导航下方右侧的箭头。

起初我尝试只使用 HTML 代码（onMouseOver 和 onMouseOut，并且只加载不同的图像）来执行此操作，但是遇到了一个令人讨厌的错误，如果用户将鼠标悬停在第一个箭头上，然后是第二个，然后回到第一个，然后是第二个会完全消失。

现在我尝试使用 JavaScript，但现在您只能看到第一个箭头，如果您将鼠标悬停在它的右侧，它就会消失。

烦人的部分是它在本地服务器上工作得很好，但在 Web 服务器上却不行。我以前没有使用过多的 HTML/Javascript，也从未使用过 JQuery。如果可以通过类似的方法轻松解决此问题，我将非常感谢您提供有关如何做到这一点的帮助。我已经阅读了一些具有 CSS 背景的解决方案，但不认为这会起作用，因为图像也必须作为按钮工作？

这是更改图像的JS代码

```
var images= new Array();
images[0] = "img/ArrowDown.png";
images[1] = "img/ArrowDownHover.png";
images[2] = "img/ArrowUp.png";
images[3] = "img/ArrowUpHover.png";

function DownChange()
{
    document.getElementById("expandAll").src = images[1];
}

function DownGoBack()
{
    document.getElementById("expandAll").src = images[0];
}

function UpChange()
{
    document.getElementById("collapseAll").src = images[3];
}

function UpGoBack()
{
    document.getElementById("collapseAll").src = images[2];
} 
```

这是HTML代码

```
<div id="collapse"> 
    <img src="img/arrowDown.png" id="expandAll" onMouseOver="DownChange()" onMouseOut="DownGoBack()" onClick="openAll()"></img>
    <img src="img/arrowUp.png" id="collapseAll" onMouseOver="UpChange()" onMouseOut="UpGoBack()" onClick="closeAll()"></img>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T11:41:23.977

如果它在您的本地机器上运行，则问题不是来自您的 JS。

我猜的问题是您的图像在您的网络服务器上没有正确引用。尝试在本地和远程机器上使用来自服务器根目录的显式路径，并尝试让两台机器镜像彼此的文件夹结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T12:14:38.873

img 标签没有像 </img> 这样的结束对。试试这个代码

```
<div id="collapse"> 
    <img src="img/arrowDown.png" id="expandAll" onMouseOver="DownChange();" onMouseOut="DownGoBack();" onClick="openAll();" />
    <img src="img/arrowUp.png" id="collapseAll" onMouseOver="UpChange();" onMouseOut="UpGoBack();" onClick="closeAll();" />
</div> 
```

如果这不起作用，请尝试查找图像是否在正确的文件夹中或图像的名称是否正确。

***编辑：***

我使用了这段代码并且在 mozilla firefox 和 IE 6 上运行良好 -

```
<script type="text/javascript">
<!--
var images= new Array();
images[0] = "img/ArrowDown.png";
images[1] = "img/ArrowDownHover.png";
images[2] = "img/ArrowUp.png";
images[3] = "img/ArrowUpHover.png";

function DownChange()
{
    document.getElementById("expandAll").src = images[1];
}

function DownGoBack()
{
    document.getElementById("expandAll").src = images[0];
}

function UpChange()
{
    document.getElementById("collapseAll").src = images[3];
}

function UpGoBack()
{
    document.getElementById("collapseAll").src = images[2];
}
-->
</script>

<div id="collapse"> 
    <img src="img/arrowDown.png" id="expandAll" onMouseOver="DownChange();" onMouseOut="DownGoBack();" onClick="openAll();" />
    <img src="img/arrowUp.png" id="collapseAll" onMouseOver="UpChange();" onMouseOut="UpGoBack();" onClick="closeAll();" />
</div> 
```

# linux - prevent the terminal from closing when the custom bash function is run

> ID：13877897
> 
> 赞同：0
> 
> 时间：2012-12-14T11:33:32.323
> 
> 标签：linux, bash

I wrote the following program in my linux bashrc

```
open()
{
  echo enter file name
  read fname
  locate $fname> /home/vvajendla/Desktop/backup/loc;
  cat loc
  exec < /home/vvajendla/Desktop/backup/loc;
  value=0
  while read line
  do
    value=`expr $value + 1`;
    echo $value 
    echo $line
    if [ $value -le 6 ]
    then
      gedit $line;
    else 
      echo too many files to open
    fi 
  done 
```

}

The above function searches all the directories for the file-string match and opens them using GEDIT if they are less than or equal to 6\.

whenever i run this function in the terminal,it gets closed. Can you please tell me what i can do to keep it open?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T12:13:36.670

这`exec`会导致调用 shell 的标准输入从文件中永久重定向。一旦文件关闭，shell 就会用完输入并退出。我假设你用`source`;导入这个函数 独立运行它应该可以工作。

编写此类函数的常用方法是让它接受一个参数，因此您可以像“open fnord”一样调用它，而不是运行“open”并在提示符下输入“fnord”。

```
open () {
  local fname
  fname=$1            # notice this arrangement instead of read
  local value
  value=0

  locate "$fname" |   # notice double quotes
  tee /dev/stderr |   # as a superior alternative to using a temporary file
  while read line
  do
    value=`expr $value + 1`
    if [ $value -le 6 ]
    then
      gedit "$line"  # notice double quotes
    else 
      echo too many files to open >&2  # notice redirection to stderr
    fi 
  done

} 
```

诊断具有误导性；此代码仍将打开前六个文件，然后在第七个文件中显示错误消息。那是你的意图吗？还是应该计算输出的数量，如果超过六个就拒绝运行？

如果您不关心其他改进，最小的解决方法是从临时文件中删除`exec`并读取`while`循环的输入。（您应该注意正确清理；如果您可以避免临时文件，那基本上总是一个更好的解决方案。）

```
while read line; do
    ....
done <tempfile 
```

我很想添加行号`nl`以摆脱不吸引人的`expr`，但这可能会在开头用空格破坏文件名。（另一方面，`locate`总是产生一个完整的路径名，对吧？）

作为替代方案，并假设`gedit`可以读取多个文件名参数，试试这个：

```
locate "$fname" | head -n 6 | xargs gedit 
```

如果有超过六个文件，这将无法产生警告，但我实际上会认为这是一个功能。

# vim - vim 有没有办法打开目录及其所有子目录中的所有 .C 和 .H 文件？

> ID：13877898
> 
> 赞同：4
> 
> 时间：2012-12-14T11:33:35.870
> 
> 标签：vim

我想在 vim 中对大约 20 个 *.C 和 *.H 文件执行替换，并且我想一次打开它们。所有文件分布在多个嵌套目录中，命令在顶层父目录中执行。我可以仅使用 vim 执行此操作，还是需要[此答案](https://stackoverflow.com/a/437283/735756)中显示的“find”命令和“-p”选项？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T12:46:35.203

1.  在项目的根目录下启动 Vim：

    ```
    $ vim /path/to/project 
    ```

2.  递归地将相关文件添加到 arglist 中：

    ```
    :argadd **/*.C **/*.H 
    ```

    见`:h starstar`和`:h :argadd`。

3.  对 arglist 中的每个文件执行替换：

    ```
    :argdo s/foo/bar/gc 
    ```

    见`:h argdo`和`:h s_flags`。

# java - 确定最大整数“保存的空值”

> ID：13877901
> 
> 赞同：0
> 
> 时间：2012-12-14T11:33:45.193
> 
> 标签：java, max

我需要对我编写的函数进行最终审查和一些提示。

```
 public static Integer max(Integer... pNumber) {
    Integer lResult = null;
    for (Integer lNumber : pNumber) {
      if (lResult == null || (null != lNumber && lNumber > lResult)) {
        lResult = lNumber;
      }
    }
    return lResult;
  } 
```

我不确定我的代码是否优雅。空参数以及空结果是可能的。但是......我感觉我在代码中解决了一些复杂的问题。该函数是公司使用的实用程序类的一部分。不允许使用第三方库。

这里对应的测试：

```
@Test
public void testMaxWithInteger() {
  assertEquals(new Integer(9), NumberUtils.max(4, 2, -4, null, 9, 5));    
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T11:42:56.720

恕我直言，我不会使用`null`对象，因为`Integer[]`它可以使用 6 倍的内存`int[]`

```
public static Integer max(Integer... ints) {
    long ret = Long.MIN_VALUE;
    for (Integer i: ints) 
      if (null != i && i > ret) 
        ret = i;
    return ret >= Integer.MIN_VALUE? (int) ret : null;
} 
```

而不是`Integer[]`我会使用`int[]`并离开`0`或`Integer.MIN_VALUE`作为我的“未初始化”值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:50:02.417

我会避免像@Peter建议的那样进行空检查或将值分配给`Integer.MIN_VALUE`

```
public static Integer max(Integer... pNumber) {
    Integer lResult = Integer.MIN_VALUE;
    for (Integer lNumber : pNumber) {
        if (lNumber == null) { //continue if null value encountered. 
            continue;
        }
        if (lNumber > lResult) {
            lResult = lNumber;
        }
    }
    return lResult;
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-14T11:36:18.220

```
Collections.max(Arrays.asList(pNumber)); 
```

# java - Java query call to sybase db is not returning any value

> ID：13877903
> 
> 赞同：1
> 
> 时间：2012-12-14T11:33:44.820
> 
> 标签：java, websphere, sap-ase, jrules

This is my application request flow:

An XML request is going to service layer, where the XML got parsed and set the value in to a domain object build in java. Then the builded domain object validated against the rules in JRules.

While validating, there is a complex query call from JRules BOM method to the sybase database. This method call is returning the values in my DEV and SIT environments with out any issue . But fails to return the value in UAT environment for few requests.

I had a chance to check the UAT logs and what i found is, that particular query failing to return any value if it's execution time is more than 800 ms. I found for few requests whose execution time is less than 750ms is returning the values with out issue. I couldn't see any errors related to query timeout.

Is any where at the websphere level settings or at sybase level settings(DEFAULT_TIMEOUT_VALUE) affect this query execution to return nothing?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T17:40:54.963

我得到了这个问题的原因。在该特定查询调用中似乎发生了死锁。这在服务日志中被注意到。我们计划引入重试机制。

# python - Python reload issue in interpereter mode

> ID：13877907
> 
> 赞同：1
> 
> 时间：2012-12-14T11:34:03.490
> 
> 标签：python

```
 # python
  enter code herePython 2.6.5 (r265:79063, Apr 16 2010, 13:09:56)
  [GCC 4.4.3] on linux2
   Type "help", "copyright", "credits" or "license" for more information.
  >>> import os,sys
  >>> import setup
  ..........
  ..........
  ..........
 >>> reload(setup)
 <module 'setup' from 'setup.pyc'>
 >>> 
```

But after executing reload its not taking updated 'setup' module

For example: Doing some change in 'setup' file in another session and reloading in interpreter mode. But unable to use updated 'setup'

Could any will help me, how to overcome from this issue or where i am doing wrong

Thanks in Advance Abhishek

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T11:38:25.570

`reload`重新加载一个模块，但不重新编译它。

```
>>> reload(setup)
<module 'setup' from 'setup.pyc'> 
```

它是从编译后重新加载的`setup.pyc`，而不是`setup.py`. `setup.pyc`解决此问题的最简单方法是在进行更改后简单地删除。然后当它重新加载时`setup.py`，它将首先重新编译它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T11:42:37.257

尝试将返回的值分配给`reload`同一个变量：

```
setup = reload(setup) 
```

# jquery - multiselect table elements

> ID：13877908
> 
> 赞同：0
> 
> 时间：2012-12-14T11:34:05.363
> 
> 标签：jquery

I have a calender that shows date in table format. I have click event on each of the `<td>` elements for some additional function processing. Can multi-select with **Ctrl** be enabled on the table elements and do the function call for all the dates selected in one go? Thanks.

Below is the code :

```
$("#table_calender td").live('click', function(e){

    if($(this).hasClass('booked')){
     alert('already booked');
    }
    else{
          if(e.ctrlKey) {
            alert('ctrl clicked');
          }
          else {
            alert('not booked');
          }
    }

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T11:39:22.450

当然。你能行的。但是您可能必须编写一些代码。

添加隐藏输入。在点击 td. 使用所选日期更新隐藏。在选择时选择日期。

# message - Posting messages after DestroyWindow

> ID：13877912
> 
> 赞同：1
> 
> 时间：2012-12-14T11:34:15.963
> 
> 标签：message, win32gui

In win32, what happens if a message is posted to a window handle after its been destroyed?

It's been said that DestroyWindow flushes the message queue? Will it flush only the messages posted to that window? It should be so right? If it flushes the entire message queue then if multiple windows are created by that thread, that would be problem right?

consider multiple windows are created with single message loop,

If I destroy a winow and post a message to that window handle what will happen? Will it be dispatched and crash?

Can someone explain me in-depth of Message queue?

# java - Esper 基于客户的查询非常适合多个客户

> ID：13877913
> 
> 赞同：1
> 
> 时间：2012-12-14T11:34:16.673
> 
> 标签：java, esper, complex-event-processing

据我了解，Esper 是使用查询构建的，以区分传入事件中的相关内容和不相关内容。

我正在考虑使用 Esper，但我不确定它是否适合我的场景。

**我的场景：**

我需要为大量客户跟踪一些事情。我每秒会收到大量事件，每个事件都需要确定某个客户的进度速率。

示例一：假设我卖火柴，因此我卖得很快。所以我一直有很多交易，我想跟踪每个客户购买了多少匹配项。当一位顾客购买了 10 支火柴时，我希望他得到一个免费的火柴盒。所以对于这个简单的例子，我会说，不要使用 Esper。

但是随着这种情况的发展，问题可能是客户应该为他购买的第 10 场比赛获得一个免费盒子，之后每第 3 场他将获得 2 场比赛的奖金。

购买 50 根火柴后，他会得到一个 XL 大小的火柴盒，里面装满了火柴。

依此类推，多个规则相互叠加。

**我对 Esper 如何解决它的猜测：**

所以，我认为这应该在 Esper 中完成的方式是，在运行时为每个客户创建一个查询。但由于我有 2 000 000 名客户，我售出的每场比赛的查询量都会以极快的速度增长。（也许我误解了埃斯珀的工作原理？）

**现在我只被问题困住了......**

随着查询的增加，Esper 的性能下降了多少？是否可以让 Esper 在不创建客户特定查询的情况下在客户级别进行计算？

我还听说 Esper 有时缺乏线程和稳定性，有人对此有任何问题吗？

总的来说，我对 Esper 真的很陌生，可能根本不是我想要的。或者，也许我只是误解了 Esper 的用法。:)

感谢您的阅读！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:53:00.963

我是Esper的组长。Esper 团队希望听到稳定性或线程问题或问题。我们在许多大公司中有大量运行 Esper/EsperHA 的生产应用程序没有问题。我们总是热衷于进一步改进产品。

性能下降多少取决于查询和配置和线程的类型以及 CPU/内存等。是的，计算可以按客户运行，例如分组和其他构造。

# android - 缺少共享库 - android

> ID：13877914
> 
> 赞同：1
> 
> 时间：2012-12-14T11:34:18.567
> 
> 标签：android, google-maps

我尝试使用 Android 4.1.1 在设备 (Ainol Crystal) 上测试我的应用程序。在模拟器中一切正常，但在设备上我得到：

```
12-14 12:22:13.437: E/PackageManager(3372): Package com.capgemini.navi4uni requires unavailable shared library com.google.android.maps; failing! 
```

本机 Google 地图应用程序已安装并且可以正常工作。还有文件：

```
/system/framework/com.google.android.maps.jar
/system/framework/com.google.android.maps.xml
/system/etc/permissions/com.google.android.maps.xml 
```

应用程序使用 api 版本 1（已弃用）。有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:48:02.463

您正在使用的设备中可能不存在地图库。尝试将库与 apk 一起导出。在 Eclipse 中，您可以通过 RightclickOnProject->Build Path->Configure BuildPath->Order and Export->.. 现在检查 google maps library..

# c# - SQLite error : Failed to find or load the registered .Net Framework Data Provider

> ID：13877920
> 
> 赞同：4
> 
> 时间：2012-12-14T11:34:31.423
> 
> 标签：c#, winforms, sqlite, ado.net

I am using `SQLite` in my Winforms application. I am copying `System.Data.SQLite.dll` and `System.Data.SQLite.Linq.dll` in output directory.

**App.config**

```
 <system.data>
    <DbProviderFactories>
      <remove invariant="System.Data.SQLite" />
      <add name="SQLite Data Provider" invariant="System.Data.SQLite" description=".Net Framework Data Provider for SQLite" 
           type="System.Data.SQLite.SQLiteFactory, System.Data.SQLite" />
    </DbProviderFactories>
  </system.data> 
```

The application is throwing `"Failed to find or load the registered .Net Framework Data Provider"` error in some client's machines.

Please suggest me what should i do to fix this.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T19:30:57.160

**System.Data.SQLite.dll**完全依赖于原生库 - 'sqlite3.dll'。因此，您应该在每台机器上安装适当的包，无论是 x32 版本还是 x64，并创建应用程序的两个版本 - 用于 x32 架构和 x64。

您可以在*包类型*部分中找到有关包类型及其依赖项[的](http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki)更多信息。

# c++ - 带有 gtkmm 派生小部件的空白窗口

> ID：13877924
> 
> 赞同：0
> 
> 时间：2012-12-14T11:34:48.763
> 
> 标签：c++, glade, gtkmm

我目前正在用 c++ 编写一个小型桌面应用程序，这是我第一次使用 gtkmm。

[我按照这里](http://developer.gnome.org/gtkmm-tutorial/3.0/sec-builder-using-derived-widgets.html.en)的教程进行操作，但我得到的只是一个空白窗口。它在将 MainWindow 重构为自己的类之前工作......

请注意：我已经省略了包含、使用和信号处理程序的实现。

这是我的主要功能：

```
int main(int argc, char **argv)
{
    RefPtr<Application> app = Application::create(argc, argv, "org.mw88.adbtool");
    //Main kit(argc, argv);

    RefPtr<Builder> builder = Builder::create();
    try
    {
        builder->add_from_file("Gui.glade");

        MainWindow *window = NULL;
        builder->get_widget_derived("MainWindow", window);
        app->run(*window);
        //kit.run(*window);
    }
    catch (const FileError& ex)
    {
        cerr << "FileError: " << ex.what() << endl;        
        return EXIT_FAILURE;
    }
    catch (const MarkupError& ex)
    {
        cerr << "MarkupError: " << ex.what() << endl;        
        return EXIT_FAILURE;
    }
    catch (const BuilderError& ex)
    {
        cerr << "BuilderError: " << ex.what() << endl;
        return EXIT_FAILURE;
    }

    return EXIT_SUCCESS;
} 
```

我的主窗口标题：

```
class MainWindow : public Window
{
public:
    MainWindow(BaseObjectType* cobject, const RefPtr<Builder>& refBuilder);
    virtual ~MainWindow();
    void show(RefPtr<Application> &app);

private:
    RefPtr<Builder>     builder;
    ToolButton          *addButton;
    ToolButton          *editButton;
    ToolButton          *deleteButton;
    ToolButton          *connectButton;
    TreeView            *hostList;
    RefPtr<ListStore>   listStore; 
    Columns             cols;

    //Signal handlers:
    virtual void onAddClicked();
    virtual void onEditClicked();
    virtual void onDeleteClicked();
    virtual void onConnectClicked();  
}; 
```

这是 MainWindow 类的构造函数：

```
MainWindow::MainWindow(BaseObjectType* cobject, const RefPtr<Builder>& refBuilder)
{
    this->builder = refBuilder;

    addButton = NULL;
    editButton = NULL;
    deleteButton = NULL;
    connectButton = NULL;
    hostList = NULL;

    builder->get_widget("hostList", hostList);

    builder->get_widget("addButton", addButton);
    addButton->signal_clicked().connect(sigc::mem_fun(*this, &MainWindow::onAddClicked));

    builder->get_widget("editButton", editButton);
    editButton->signal_clicked().connect(sigc::mem_fun(*this, &MainWindow::onEditClicked));

    builder->get_widget("deleteButton", deleteButton);
    deleteButton->signal_clicked().connect(sigc::mem_fun(*this, &MainWindow::onDeleteClicked));

    builder->get_widget("connectButton", connectButton);
    connectButton->signal_clicked().connect(sigc::mem_fun(*this, &MainWindow::onConnectClicked));

    hostList->set_model(listStore = ListStore::create(cols));
    hostList->append_column("Host", cols.host);
    hostList->append_column("Port", cols.port);

    for (int i = 0; i < 20; i++)
    {
        TreeModel::Row row = *(listStore->append());
        row[cols.host] = "Testhost";
        row[cols.port] = i;
    }

    show_all_children();
} 
```

似乎所有小部件都从构建器正确返回，但 app->run 仅显示一个空窗口。这可能是什么原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T19:26:11.617

您的构造函数不完整，您需要使用 cObject 初始化基类：

```
MainWindow::MainWindow(BaseObjectType* cobject, const RefPtr<Builder>& refBuilder)
  : Gtk::Window(cObject)  // add this
{
    this->builder = refBuilder;
    ... 
```

# blackberry - How can I add shadow to the text in a Blackberry LabelField?

> ID：13877925
> 
> 赞同：2
> 
> 时间：2012-12-14T11:34:47.377
> 
> 标签：blackberry, java-me

I have tried it overriding `paint()` method inside my own class which extends `LabelField`, but I ignore if there is another simpler way.

My code:

```
protected void paint(Graphics graphics) {
    int previousColor = graphics.getColor();
    graphics.setColor(0xFFFFFF);
    graphics.drawText(getText(), 2, -2);
    graphics.setColor(previousColor);
    super.paint(graphics);
} 
```

What I want to achieve is this:

![enter image description here](../Images/f414b51892188bfdd53c3ca235ccbe17.png)

EDIT: The [answer by Abhisek](https://stackoverflow.com/a/13878396/1047055) produces the following result, in case anyone is interested:

![enter image description here](../Images/50a16d86103ab35e2e2924140c70a947.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T12:26:21.463

如果[Abhishek 的回答](https://stackoverflow.com/a/13878396/813951)不起作用，您可以尝试直接在`paint`方法中进行操作。这很简单，只需以 bg 颜色绘制一次，然后以 fg 颜色在其上再次绘制（向下几个像素并离开之前的文本）。像这样的东西：

```
 protected void paint(Graphics graphics) {
        graphics.setColor(0xFFFFFF);
        graphics.drawText(getText(), 2, 0);
        graphics.setColor(0x000000);
        graphics.drawText(getText(), 0, 2);
    } 
```

请注意您需要 2 个额外的高度和宽度像素，因此您可能必须覆盖`getPreferredWidth`,`getPreferredHeight`和/或`layout`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T12:08:25.947

在黑暗中刺伤，但尝试使用 派生字体`Font.derive(style, height, units, aAntialiasMode, aEffects)`，传入参数并将其应用于相关字段`Font.DROP_SHADOW_RIGHT_EFFECT`。`aEffects`

请告诉我们它是否有效；我没有使用它，因为它没有记录！

# c# - How to display in value in dropdown list in grideview on selected index change

> ID：13877926
> 
> 赞同：0
> 
> 时间：2012-12-14T11:34:52.673
> 
> 标签：c#, asp.net

I have a dropdown down after postback i want to bind the second dropdown . i get the value but that is not displayed in the second data:EntityDropDownList .

```
 <ItemTemplate>
                                                            <data:EntityDropDownList runat="server" ID="dataServiceTypeId" Enabled="false"  DataSourceID="ServiceTypeIdServiceTypesDataSource"
                                                                DataTextField="ServiceCode" DataValueField="ServiceTypeId" SelectedValue='<%# Bind("ServiceTypeID") %>'
                                                                AppendNullItem="true" Required="true" NullItemText="< Please Choose ...>" ErrorText="Required" />
                                                            <data:ServiceTypesDataSource ID="ServiceTypeIdServiceTypesDataSource" runat="server"
                                                                SelectMethod="GetAll" />
                                                        </ItemTemplate>
                                                        <EditItemTemplate>
                                                        <data:EntityDropDownList runat="server" ID="dataServiceTypeId"  DataSourceID="ServiceTypeIdServiceTypesDataSource"  OnSelectedIndexChanged="Service_SelectChange" AutoPostBack="true" 
                                                                DataTextField="ServiceCode" DataValueField="ServiceTypeId" SelectedValue='<%# Bind("ServiceTypeID") %>'
                                                                AppendNullItem="true" Required="true" NullItemText="< Please Choose ...>" ErrorText="Required" />
                                                            <data:ServiceTypesDataSource ID="ServiceTypeIdServiceTypesDataSource" runat="server"
                                                              SelectMethod="GetAll" />

                                                        </EditItemTemplate>
                                                    </asp:TemplateField>

                                                    <asp:TemplateField HeaderText="Default">
                                                        <ItemTemplate>
                                                            <asp:CheckBox ID="chkDefault" Checked='<%# Bind("IsDefault") %>' Enabled="false"  runat="server" />
                                                        </ItemTemplate>
                                                        <EditItemTemplate>
                                                         <asp:CheckBox ID="chkDefault" Checked='<%# Bind("IsDefault") %>'    runat="server" />

                                                        </EditItemTemplate>
                                                    </asp:TemplateField>
                                                    <asp:TemplateField HeaderText="Plan">
                                                        <ItemTemplate>

                                                             <data:EntityDropDownList runat="server" ID="dataPricePlanId" Width="200px"  />
                                                        </ItemTemplate>
                                                        <EditItemTemplate>
                                                             <data:EntityDropDownList runat="server" ID="dataPricePlanId" Width="200px" AppendNullItem="true" NullItemText="< Please Choose ...>"  />

                                                        </EditItemTemplate>
                                                    </asp:TemplateField> 
```

And my code is this

```
 protected void Service_SelectChange(object sender, EventArgs e)
{
    dataPricePlanId.Items.Clear();

    string sValue = ((EntityDropDownList)sender).SelectedValue;

    int ServiceTypeId = Convert.ToInt32(sValue);
    TList<PricePlans> _pricePlans = _pricePlanService.GetByServiceTypeId(ServiceTypeId);
    _pricePlanService.DeepLoad(_pricePlans);
    if (_pricePlans.Count > 0)
    {
        dataPricePlanId.DataSource = _pricePlans;
        dataPricePlanId.DataTextField = "Description";
        dataPricePlanId.DataValueField = "PricePlanId";
        dataPricePlanId.DataBind();

    }
    else
    {
        dataPricePlanId.Items.Insert(0, new ListItem("No Plan For this Service", "0"));

    }
} 
```

i get value but my grid is not binding in second dropdownlist. Can you please help me .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:00:42.447

尝试在 itemdatabound 事件中执行此操作

首先使用 e.item.findcontrol("dropdownname") 找到下拉菜单。然后将其与数据源绑定，然后设置所选值。

谢谢

# sharepoint - Sharepoint 2010 Live to Development VM Copy Setup (backwards deployment)

> ID：13877928
> 
> 赞同：0
> 
> 时间：2012-12-14T11:34:59.277
> 
> 标签：sharepoint, sharepoint-2010, migration, setup-deployment

> **Live to Development Migration**

We are currently migrating some sharepoint sites from external live environments to development environments hosted on vm's. The sites are a mixture of websites and intranets. We have not had access to the live environments so can not specify structure of the sites.

The sites do have some **customisations applied**. Some are customisations are packaged via wsp packages for which we have the source code (somewhere previous developers have left it need to find it)

The sites setup we have no knowledge so the objective is to restore live back to a development vm so we can bug fix and make enhancements moving forward.

What steps should be go through for this.

We have outlined the following steps:

1.  Take a copy of the content databases/s
2.  Take a copy of the wsp packages straight from the live environment (using powershell)
3.  Create site collections from live on dev
4.  Restore the content databases from live on to these.
5.  Deploy the wsps from live on to dev.
6.  Activate the features from live on our development vm's.

What other steps are missing as I am sure they are.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:43:19.110

我要在这里补充的是：

*   确保您的通知不会发送给实时环境的用户
*   确保您的 BDC 和自定义连接组件不会修改或以其他方式加载生产外部数据源
*   记录并验证（使用 PowerShell）所有资产都已准确部署，因为有时您会遇到事件接收器注册等问题。
*   确保将 InfoPath 表单重新配置为使用更新的数据源
*   确保您的备用访问映射和传入/传出电子邮件设置足够

# objective-c - Objective C framework which serializes object trees into XML

> ID：13877937
> 
> 赞同：1
> 
> 时间：2012-12-14T11:35:38.267
> 
> 标签：objective-c, xml, object, serialization

I am searching a framework or library which serializes objects in Objective C into XML. There are libraries like WonderXML, but they only serialize properties with simple data types like string, int etc. I consider big object trees with references to other objects. It is required that the library detects reference loops in this tree (this is not difficult). Can anyone provide some links or help for that problem?

# android - 从移动蓝牙打印机 (ESC/POS) 请求电池状态

> ID：13877938
> 
> 赞同：1
> 
> 时间：2012-12-14T11:35:46.050
> 
> 标签：android, printing, bluetooth

我正在成功打印到 Bixolon SPP-R200 移动蓝牙打印机。

我现在想询问打印机当前的电池电量。根据 Bixolon 命令手册，以下命令应完成此操作：

![在此处输入图像描述](../Images/1319f54895b4b3169ab0da9570bf18da.png)

我能够成功地将数据发送到打印机并从打印机读取数据（所以据我所知，这不是问题的一部分）。我的问题是理解上面给出的命令：

1.  是否有特殊原因将 fn 和 m 的值直接写入格式，然后再定义 fn 和 m 的值？在前面的命令中，它的做法有所不同：不是将普通数字写入格式，而是使用变量，然后在范围中定义。
2.  我是否正确假设来自打印机的 4 字节长响应？

我的第二个问题是 ESC= n （选择外围设备）命令：

![在此处输入图像描述](../Images/5342e91201cbef2af57712d99f2ca280.png)

1.  我的打印机没有显示屏，它是一个简单的 ESC/POS 蓝牙打印机。在另一端，我有一部智能手机（运行 Android，因此我的代码是 Java），它将这些命令发送到打印机。该命令的目的是将数据发送到打印机内的不同接口（显示器、打印单元本身等）吗？
2.  如果我在问题一结尾的假设是正确的，那么我想我必须通过 n = 2，因为打印机电池命令明确表示：“**当打印机被 ESC = n 禁用时，此命令有效**”
3.  发送电池命令并评估响应后如何“恢复正常”，以便继续打印到打印机？它会像写 ESC = 1 一样简单（这将再次启用打印机）？

在此先感谢，如果还有其他问题，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T13:52:49.557

> 我的打印机没有显示屏，它是一个简单的 ESC/POS 蓝牙打印机。在另一端，我有一部智能手机（运行 Android，因此我的代码是 Java），它将这些命令发送到打印机。该命令的目的是将数据发送到打印机内的不同接口（显示器、打印单元本身等）吗？

该命令的重点是确定您感兴趣的设备的电池状态。您的假设是正确的。所以对于你的 ESC/POS n=1 应该足够了

> 如果我在问题一结尾的假设是正确的，那么我想我必须通过 n = 2，因为打印机电池命令明确表示：“当打印机被 ESC = n 禁用时，此命令有效”

该指令没有意义。我相信 ESC 指向我们需要数据的外围设备。

> 如何在发送电池命令并评估响应后“恢复正常”，以便继续打印到打印机？它会像写 ESC = 1 一样简单（这将再次启用打印机）？

这是一个与信息相关的命令，据我了解，它不应干扰打印机功能。在收到电池状态后，您可以进行正常的打印活动。

# linq - 包含语句中的逗号分隔值实体框架

> ID：13877944
> 
> 赞同：0
> 
> 时间：2012-12-14T11:36:18.463
> 
> 标签：linq, entity-framework

我有具有逗号分隔值的 LINQ 语句。我想查看我的字段是否与任何逗号分隔值匹配。

```
 public string IdentifyProductSKU(string Serial)
    {
        int Len = Serial.Length;

        var Split = from ModelSplitter in entities.Models
                     select ModelSplitter.m_validationMask.Split(',');

        var Product = (from ModelI in entities.Models
                       where ModelI.m_validation == 0 &&
                             ModelI.m_validationLength == Len &&
                             ModelI.m_validationMask.Contains(Serial.Substring(ModelI.m_validationStart, ModelI.m_validationEnd))
                       select ModelI.m_name).SingleOrDefault();

        return Product;
    } 
```

解释代码：每个模型都有多个识别属性，例如。XX1,XX5,XX7 都是同一个产品。现在，当我传入序列号时，我想根据验证掩码识别产品。例如：XX511122441141 是 ProductA，YY123414124 是 ProductC。我只想在此查询中拆分，因此在此行中：

```
ModelI.m_validationMask.Contains(Serial.Substring(ModelI.m_validationStart, ModelI.m_validationEnd)) 
```

我想拆分验证掩码以查看序列是否包含任何验证掩码字符。这有意义吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T08:15:59.777

这是您将值拆分为列表的方式

```
 var split = context.Packs.Select(u => u.m_validationMask).ToList();
            List<String[]> list=new List<String[]>();
            foreach (var name in split)
            {
                String[] str = name.Split(',');
                list.Add(str);
            } 
```

现在我需要知道如何在我的最终 EF 查询中使用该列表：

```
int Len = Serial.Length;

        var split = entities.Models.Select(u => u.m_validationMask).ToList();
        List<String[]> list = new List<String[]>();
        foreach (var name in split)
        {
            String[] str = name.Split(',');
            list.Add(str);
        }

        var Product = (from ModelI in entities.Models
                       where ModelI.m_validation == 0 &&
                             ModelI.m_validationLength == Len &&
                             list.Contains(Serial.Substring(ModelI.m_validationStart, ModelI.m_validationEnd))
                       select ModelI.m_name).SingleOrDefault();

        return Product; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T13:01:22.177

我不完全理解你的意思或你想要做什么。但...

如果您的 ModelSplitter.m_malicationMask 可以像您所演示的那样被拆分，那么 Split 就是一个 List 。我不明白的是，如果你想匹配整个产品 A，或者只是前三个字符，你可以修改你的查询

```
var Product = (from ModelI in entities.Models
               where ModelI.m_validation == 0 &&
                         ModelI.m_validationLength == Len &&
                         ModelI.m_validationMask.Contains(Serial.Substring(ModelI.m_validationStart, ModelI.m_validationEnd))

               let productId = ModelI.m_name.Substring(0, 3)
               where split.Contains(productId)
               select ModelI.m_name).SingleOrDefault(); 
```

如果不匹配，产品现在应该为空，如果匹配，则为实际产品。

# c# - 使用 RegAsm 后覆盖 DLL

> ID：13877947
> 
> 赞同：0
> 
> 时间：2012-12-14T11:36:39.890
> 
> 标签：c#, vba, com, class-library, regasm

我创建了一个要从 Excel VBA 使用的 C# DLL。我在我的开发机器上编译了 DLL，并将 DLL 和 TLB 文件移到了开发服务器上。

我使用 RegAsm 注册 DLL，效果很好。然后我打开 VBA 并添加了对 .TLB 文件的引用。然后我在 VBA 中使用了这个类，一切都很好。

我现在对 c# 类库进行了更改，编译了库，但是当我尝试覆盖开发服务器上的文件时，它们被锁定为被另一个进程使用。

我尝试使用 RegAsm /unregister，但这仍然没有帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T11:57:16.240

确保您已关闭所有 Excel 实例，因为它们将锁定插件。此外，您可能在任务管理器中有一些可以杀死的幽灵 Excel 进程。下面是一个批处理脚本，它将杀死所有 Excel 实例：

```
taskkill /F /IM EXCEL.EXE 
```

# javascript - "Miss a drag as we are waiting for WebCore's response" with only one touch container

> ID：13877948
> 
> 赞同：2
> 
> 时间：2012-12-14T11:36:41.230
> 
> 标签：javascript, android, css, android-webview, css-transitions

I have something like this:

```
<div class='hscroller'>
    <div class='carousel'><ul></ul></div>
</div> 
```

`.hscroller` is a horizontal scrollable container (scroll via `transform3d` on touch Events)

`.carousel` is an horizontal scrollable image list (scroll via `transform3d` without any touch events)

Well, when I try to touch `.hscroller` I get the following error and I can’t scroll anymore:

```
W/webview (23193): Miss a drag as we are waiting for WebCore's response for touch down. 
```

I already have `e.preventDefault()` on `touchMove` and `touchStart` Events and of course if I `display:none` the carousel, everything works fine, even after the carousel made some transitions.

I know there are other issues with this error but i think this is a different use-case.

Any idea how can I can solve this?

# ios - ios - ASIHTTPRequest 和 HUD 加载视图开始和停止

> ID：13877956
> 
> 赞同：0
> 
> 时间：2012-12-14T11:37:02.893
> 
> 标签：ios, progress-bar, asihttprequest, hud

我已经成功实现了 ASIHTTPRequest 框架以从 URL 下载文件并将其保存在我的文档目录中 - YIPPIE !!!

现在我想显示某种进度，以便用户可以了解正在发生的事情。

使用 UIWebViewDelegate 有以下方法 - 我希望使用类似的方法。

```
-(void)webViewDidStartLoad:(UIWebView *)webView

-(void)webViewDidFinishLoad:(UIWebView *)webView 
```

有没有类似与 ASIHTTP 一起使用的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T13:56:23.907

这是一个混合[MBProgressHUD](https://github.com/jdg/MBProgressHUD)和 ASI 的示例。

这个想法是您在开始请求之前开始更新，并在完成或失败的块中结束更新。

```
MBProgressHUD *hud = [MBProgressHUD showHUDAddedTo:self.view animated:YES];
hud.labelText = @"Updating…";

NSURL *url = [NSURL URLWithString:@"http://allseeing-i.com"];
__block ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
[request setCompletionBlock:^{
   [MBProgressHUD hideHUDForView:self.view animated:YES];

   // Use when fetching text data
   NSString *responseString = [request responseString];

   // Use when fetching binary data
   NSData *responseData = [request responseData];
}];
[request setFailedBlock:^{
   [MBProgressHUD hideHUDForView:self.view animated:YES];
   NSError *error = [request error];
}];
[request startAsynchronous]; 
```

# html - 如何将 302 临时重定向代码更改为 301 永久重定向代码？

> ID：13877957
> 
> 赞同：1
> 
> 时间：2012-12-14T11:37:02.187
> 
> 标签：html, web, http-status-code-301

我目前在我的一个网站上有一个 302 临时代码。虽然我可以识别此代码，但我找不到它。我在哪里可以找到它，如何将它从 302 临时更改为 301 永久重定向代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T12:26:18.580

如果您的站点在 apache 服务器上，原则上您可以使用 .htaccess 文件设置重定向。下面的指南以及来自 Webado 的有用编码页面：

[http://www.htaccess-guide.com/index.php?a=1](http://www.htaccess-guide.com/index.php?a=1)

[http://groups.google.com/group/only-validation/web/fix-canonical-issues-www-vs-non-www-and-more-on-apache-server](http://groups.google.com/group/only-validation/web/fix-canonical-issues-www-vs-non-www-and-more-on-apache-server)

# c#-4.0 - 花式框弹出窗口不起作用

> ID：13877959
> 
> 赞同：1
> 
> 时间：2012-12-14T11:37:06.710
> 
> 标签：c#-4.0

我创建了一个 Web 应用程序，它需要从称为 rippolls 的 Fancy 框中弹出图像和视频。在这里，我的“Rippolls”加载在弹出框中，用户可以为这些 rippolls 投票。我的问题是，在一个页面中，我列出了所有 rippoll，当我单击带有图像或视频的 rippoll 时，它会加载我们的精美盒子和精美盒子 css。

我参考过

```
 <script src="../../Content/Scripts/jquery.fancybox-1.3.4.pack.js" type="text/javascript"></script>
<link href="../../Content/Styles/jquery.fancybox-1.3.4.css" rel="stylesheet" type="text/css" /> 
```

在 _layout.cshtml 中引用了 _RippollList.chtml 页面。_RippollList.chtml 中的代码是：

```
$("a.btnVotePop@(poll.Id)").fancybox({

        'onComplete' : function() {
                  alert('hello');
                 try {
                  FB.XFBML.parse();
                  twttr.widgets.load();
                  history.pushState({}, "@poll.Name.Trim()", "/polls/@poll.Id");
                  document.getElementsByTagName("title")[0].innerHTML = "@poll.Name.Trim()";
                  //history.replaceState({}, "title", "@poll.Name.Trim()");
                  //$("#rippoll_image_path").attr("content", $("#polltitle").val());
                  }
                  catch (ex) {
                        alert('Error parsing response.');
                  }

            },

            'onClosed' : function(){
                 alert("closed");
                try {
                history.pushState({}, "Rippoll", "/home/mypage");
                document.getElementsByTagName("title")[0].innerHTML = "My Page";
                 $('#divDetailCont').css('display', 'none');
                }
                catch (ex) {

                }
            },  

             ajax : {
                 type   : "GET"
             },

            'width': '560px'         

    }); 
```

*网页：*

```
<div id="videoDeftImgContainer" class="videoDefultImg">
<a class="btnVotePop@(poll.Id)" href="RippollCardPopup/@(poll.Id)">
<img class="inImgSize" src="@poll.ImagePath" />
</a>
<div id="plyBtnClk" class="playBtn" onclick="">
 <a class="btnVotePop@(poll.Id)" href="RippollCardPopup/@(poll.Id)">
<img src="../../Content/images/newImages/hoverPlay.png" />
</a></div></div> 
```

*脚本参考：*

```
 <script src="../../Content/Scripts/jquery.fancybox-1.3.4.pack.js" type="text/javascript"></script>
<link href="../../Content/Styles/jquery.fancybox-1.3.4.css" rel="stylesheet" type="text/css" /> 
```

但我仍然得到一个没有fancybox 及其样式的页面。

我有疑问，因为我在 rippoll 中添加了一些文本值（例如：rippoll 名称、rippoll 问题等），并且它可能还有一些特殊字符（@%$#{}），这是否是不要在花哨的盒子里打开 rippolls。

帮我解决这个问题。请发布您成功的任何代码段。

# c# - 'GameStates'：不能通过表达式引用类型；尝试“menuinterface.Game1.GameStates”

> ID：13877960
> 
> 赞同：0
> 
> 时间：2012-12-14T11:37:18.617
> 
> 标签：c#, xna

我更改了我的代码，但它仍然无法正常工作。我在 Intro 类中收到此错误消息：“GameStates”：无法通过表达式引用类型；尝试“menuinterface.Game1.GameStates”

怎么了？如果玩家按下空格键，我想将游戏状态设置为 MenuState。
游戏1类：

```
public class Game1 : Microsoft.Xna.Framework.Game
{
    GraphicsDeviceManager graphics;
    SpriteBatch spriteBatch;
    private IState currentState;

    public enum GameStates
    {
        IntroState = 0,
        MenuState = 1,
        MaingameState = 2,
    }

    public GameStates CurrentState
    {
        get { return currentGameState; }
        set { currentGameState = value; }
    }

    private GameStates currentGameState = GameStates.IntroState;

    public Game1()
    {
        graphics = new GraphicsDeviceManager(this);
        Content.RootDirectory = "Content";
    }

    protected override void Initialize()
    {
        currentState = new Intro(this);
        base.Initialize();
    }

    protected override void LoadContent()
    {       
        spriteBatch = new SpriteBatch(GraphicsDevice);
        currentState.Load(Content);
    }

    protected override void Update(GameTime gameTime)
    {
        currentState.Update(gameTime);     
        KeyboardState kbState = Keyboard.GetState();
        base.Update(gameTime);
    }

    protected override void Draw(GameTime gameTime)
    {
        GraphicsDevice.Clear(Color.CornflowerBlue);
        spriteBatch.Begin();
        currentState.Render(spriteBatch);
        spriteBatch.End();

        base.Draw(gameTime);
    }
} 
```

界面：

```
public interface IState         
{ 
        void Load(ContentManager content); 
        void Update(GameTime gametime); 
        void Render(SpriteBatch batch); 
} 
```

介绍班：

```
public class Intro : IState
{
    private IState currentState;
    Texture2D Menuscreen;
    private Game1 game1;       

    public Intro(Game1 game)
    {
        game1 = game;
    }

    public void Load(ContentManager content)
    {
       Menuscreen = content.Load<Texture2D>("menu");
    }

    public void Update(GameTime gametime)
    {
        KeyboardState kbState = Keyboard.GetState();
        if (kbState.IsKeyDown(Keys.Space))
            game1.CurrentState = game1.GameStates.IntroState;
          currentState = new Menu(game1);
    }

    public void Render(SpriteBatch batch)
    {
        batch.Draw(Menuscreen, new Rectangle(0, 0, 1280, 720), Color.White);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T11:58:48.923

您的问题是不了解枚举类型的工作原理。具体来说，这一行：

```
game1.GameStates = IntroState; 
```

首先，让我们讨论一下枚举实际上是什么。它是一个简单地将名称分配给整数值的结构，然后可以按名称引用每个值，从而使代码更具可读性（因为它比 更容易理解`direction = Dir.Up`）`direction = 1`。

不过请注意我是如何使用这两个示例语句的。在代码中，您将枚举视为*类型*而不是*变量*，这就是您遇到的问题。事实上，你的问题是双重的。您尝试为结构分配值的第一个问题 id 类似于写作`int = 4`- 即它没有意义。您的第二个问题是枚举不是全局的，因此`IntroState`在外部没有意义`game1`。

有趣的是，您已经正确设置了系统，因为您拥有`currentGameState`变量，这正是您真正打算更改的内容。但是，它是一个`private`变量，不允许从 game1 类外部访问它。您可以创建变量`public`，也可以创建一个`property`来访问它。后者是很好的做法，因为它允许您控制变量的设置方式。要创建它，您可以使用以下内容：

```
public GameStates CurrentState
{
    get { return currentGameState; }
    set { currentGameState = value; }
} 
```

一旦你在你的 game1 类中有这个，你可以像这样设置游戏状态：

```
game1.CurrentState = Game1.GameStates.IntroState; 
```

注意这段代码是如何告诉程序去哪里寻找你想要的东西的。`IntroState`是`GameStates`game1 中结构 ( ) 的一部分，因此需要显式访问。

Hopefully, this has helped you to understand how enumerative types work, and why the code you wrote doesn't make sense, and thus why it breaks.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:49:34.663

执行错误消息中的说明：

```
game1.GameStates = Game1.GameStates.IntroState; 
```

您需要完全限定该枚举值。

# php - 回显 file_get_contents 时出现错误 324 EMPTY_RESPONSE

> ID：13877961
> 
> 赞同：1
> 
> 时间：2012-12-14T11:37:27.703
> 
> 标签：php, file-get-contents

我正在尝试制作类似 ftp 的东西。我有一个在 wamp 上设置了应用程序的自制服务器。而且我不想将我的所有文件都保存在 wamp 文件夹中，所以我也可以从此应用程序中访问本地文件。

已经读过很多员工说我不能这样做，而且没有浏览器让我做这样的事情。但我设法做到了。

这是我用来下载文件的代码：

```
 function getFile($name,$path) {
    if(file_exists($path.$name)) {
        $name = urldecode($name);
        $fsize = filesize($path.$name); 

        header("Content-disposition: attachment; filename=\"".$name."\"");
        header("Content-type: application/force-download");
        header("Content-length: ".$fsize);

        echo file_get_contents($path.$name);
    } 
```

它适用于小文件，无论它们有什么扩展名，但我还必须下载一些超过 200Mb 的 .exe 文件。

我已经在 php.ini 中设置了 memory_limit，因为这是我遇到的第一个麻烦的原因，但现在我得到了 ERROR:324。

任何想法如何克服它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:45:21.897

file_get_contents 在内存中首先读取文件，然后返回它。对于 200MB 的文件大小，一个脚本需要超过 200MB 的内存。

要修复它，您应该逐块读取文件并输出它。

例如

```
$fp = fopen($path.$name, "rb");
if ($fp) {
    while(!feof($fp)) {
        $str = fread($fp, 1024);
        echo $str;
    }
    fclose($fp);
} 
```

# titanium - 如何禁用 iPhone 表格视图行上的滑动删除动画 - 钛？

> ID：13877967
> 
> 赞同：0
> 
> 时间：2012-12-14T11:38:15.457
> 
> 标签：titanium

我想禁用 iPhone 表格视图行上的滑动删除动画 - 钛？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:44:37.750

尝试将TableView 中的*可编辑属性设置为***false**。

```
var tableView = Ti.UI.createTableView({
    editable: false
}); 
```

文档：[http ://docs.appcelerator.com/titanium/latest/#!/api/Titanium.UI.TableView-property-editable](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.UI.TableView-property-editable)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:36:40.313

删除按钮的动画是原生的，无法更改。正如 Rafel 所说，您可以将 tableView 的[可编辑](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.UI.TableView-property-editable)和可[编辑](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.UI.TableView-property-editing)属性设置为 false。但这将不允许删除该行。如果您想删除行，您可以创建自定义按钮来帮助您删除特定行。

**注意：如果上述任何一个属性为真，则可以删除**

# node.js - $push 在嵌套字段中的工作在猫鼬中不稳定？

> ID：13877975
> 
> 赞同：0
> 
> 时间：2012-12-14T11:38:50.247
> 
> 标签：node.js, mongodb, mongoose

我有一个类似这样的模式

```
firstfield :{
    secondfield:{
        thirdfield  : [ObjectId]
    }
} 
```

我做这样的事情

```
models.mymodel.update({_id:ObjectId(logId)}, {$push: {"firstfield.secondfield.thirdfield" : ObjectId(userId)}}, function(err, result) {
    console.dir(result);
}) 
```

这就是问题所在。当我给它一个现有的 logId 来搜索...完成后，它会删除整行..并创建另一个，以某种方式设法增加一些字段（假设我将名称字段设置为：mylog_6（当前行我想修改），最大值为 105 .. 它将删除该行并创建一个，并将名称设置为 mylog_106。

是什么赋予了？:)

# spring - Spring LDAP 事务

> ID：13877976
> 
> 赞同：2
> 
> 时间：2012-12-14T11:38:51.903
> 
> 标签：spring, transactions, ldap

我是这个小世界的新手，我正在尝试开发一个 Spring Ldap 事务，我在创建 Spring bean 时遇到了严重的问题。

我有这个配置 XML 文件：

```
<bean id="ldapContextSource" class="org.springframework.ldap.core.support.LdapContextSource">
    <property name="url" value="ldap://localhost:10389" />
    <property name="base" value="dc=***,dc=com" />
    <property name="authenticationSource" ref="authenticationSource" />
    <property name="pooled" value="false" />
    <property name="baseEnvironmentProperties">
        <map>
            <entry key="com.sun.jndi.ldap.connect.timeout" value="500" />
            <entry key="java.naming.referral" value="follow" />
        </map>
    </property>
</bean>

<bean id="authenticationSource"
    class="org.springframework.ldap.authentication.DefaultValuesAuthenticationSourceDecorator">
    <property name="target" ref="springSecurityAuthenticationSource" />
    <property name="defaultUser" value="uid=admin,ou=system" />
    <property name="defaultPassword" value="secret" />
</bean>

<bean id="springSecurityAuthenticationSource"
    class="org.springframework.security.ldap.authentication.SpringSecurityAuthenticationSource" />

<bean id="ldapTransactionContextSource"
    class="org.springframework.ldap.transaction.compensating.manager.TransactionAwareContextSourceProxy">
    <constructor-arg ref="ldapContextSource" />
</bean>

<bean id="ldapTemplate" class="org.springframework.ldap.core.LdapTemplate">
    <constructor-arg ref="ldapTransactionContextSource" />
</bean>

<bean id="transactionManager"
    class="org.springframework.ldap.transaction.compensating.manager.ContextSourceTransactionManager">
    <property name="contextSource" ref="ldapTransactionContextSource" />
</bean>

<bean id="userDaoTarget" class="com.***.daos.UserDao">
    <property name="ldapTemplate" ref="ldapTemplate" />
</bean>

<bean id="userDao"
    class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
    <property name="transactionManager" ref="transactionManager" />
    <property name="target" ref="userDaoTarget" />
    <property name="transactionAttributes">
        <props>
            <prop key="*">PROPAGATION_REQUIRES_NEW</prop>
        </props>
    </property>
</bean> 
```

我在创建“userDaoTarget”bean 时遇到问题，因为它引发了这个异常：

```
java.lang.NoClassDefFoundError: org.springframework.beans.FatalBeanException
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:997)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:943)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:605)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:925)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:472)
    at org.springframework.context.support.FileSystemXmlApplicationContext.<init>(FileSystemXmlApplicationContext.java:140)
    at org.springframework.context.support.FileSystemXmlApplicationContext.<init>(FileSystemXmlApplicationContext.java:84) 
```

最后我的 UserDao.class 是下一个代码：

```
public class UserDao extends CommonDao implements ICommonDao<User> {

    private LdapTemplate ldapTemplate;

    public void setLdapTemplate(LdapTemplate ldapTemplate) {
        this.ldapTemplate = ldapTemplate;
    }
} 
```

有人可以帮我创建 bean 吗？我认为代码是正确的，但我不知道会发生什么......

谢谢大家的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:54:51.540

您的类路径上有哪些 Spring 依赖项？具体来说，你有没有

```
org.springframework.beans-<version>.jar 
```

神器？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T07:23:46.937

这是依赖项。

```
 <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>3.1.3.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-ldap</artifactId>
        <version>3.1.3.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-config</artifactId>
        <version>3.1.3.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.ldap</groupId>
        <artifactId>spring-ldap-core</artifactId>
        <version>1.3.1.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>commons-pool</groupId>
        <artifactId>commons-pool</artifactId>
        <version>1.5.5</version>
    </dependency>
    <dependency>
        <groupId>org.apache.directory.server</groupId>
        <artifactId>apacheds-all</artifactId>
        <version>1.5.5</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>1.5.6</version>
    </dependency>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.10</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>3.1.3.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-beans</artifactId>
        <version>3.1.3.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>commons-logging</groupId>
        <artifactId>commons-logging</artifactId>
        <version>1.0.4</version>
    </dependency>
    <dependency>
        <groupId>commons-lang</groupId>
        <artifactId>commons-lang</artifactId>
        <version>2.5</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-core</artifactId>
        <version>3.1.3.RELEASE</version>
    </dependency> 
```

# c# - 读取公共方法值并分配给文本框

> ID：13877978
> 
> 赞同：-1
> 
> 时间：2012-12-14T11:39:02.060
> 
> 标签：c#, asp.net

我正在使用下面的代码从其他页面获取一些值并将名称和值分配给文本框。但是下面的代码，我可以读取 new_ 和 new_1 字符串的名称和值。但我不能将这两个值分配给文本框。它返回错误消息`"Object reference not set to an instance of an object."`

我的部分代码在这里..

```
public void load_directions(string name, string value)
        {
            try
            {
                txt_name.Text = name.ToString();
                txt_value.Text = value.ToString();
            }
            catch(Exception e1)
            {

            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:12:21.637

更改您的代码 txt_name.Text = name as string; txt_value.Text = 值作为字符串；

也让我们知道 load_directions 方法的调用

# iphone - 如何在应用程序启动时创建一个默认视图以呈现

> ID：13877982
> 
> 赞同：2
> 
> 时间：2012-12-14T11:39:14.933
> 
> 标签：iphone, ios

我是 iOS 应用程序开发的新手。我正在制作一个应用程序，我想在滚动视图上显示自定义视图并在滚动视图上添加视图，但它显示的是第一个视图的视图。我可以先获得第二个视图吗？

```
scrollview=[[UIScrollView alloc]initWithFrame:CGRectMake(0,80,320,360)];
[scrollview setContentSize:CGSizeMake(2550,360)];
[scrollview setScrollEnabled:YES];
[scrollview setPagingEnabled:YES];
[scrollview setBackgroundColor:[UIColor clearColor]];
scrollview .indicatorStyle = UIScrollViewIndicatorStyleDefault;
scrollview.showsHorizontalScrollIndicator = NO;
scrollview.showsVerticalScrollIndicator = NO;
scrollview.scrollsToTop = NO;
scrollview.delegate = self;
scrollview.tag=500;
[self.view addSubview:scrollview];

afterloginPageControl=[[UIPageControl alloc]initWithFrame:CGRectMake(0, 440, 320, 25)];
afterloginPageControl.numberOfPages = 8;
afterloginPageControl.backgroundColor = [UIColor darkGrayColor];

afterloginPageControl.highlighted = YES;
afterloginPageControl.hidesForSinglePage = YES;
afterloginPageControl.currentPage = 0;
afterloginPageControl.selected = YES;
[afterloginPageControl addTarget:self action:@selector(changePage:) forControlEvents:UIControlEventTouchUpInside];
// create Pages..
//[self createPages];
// add View
[self.view addSubview:afterloginPageControl];

info=[[InfoView alloc]initWithFrame:CGRectMake(0,  80,315, 350)];
info.delegate=self;

info.backgroundColor=[UIColor whiteColor];

[scrollview addSubview:info];

update=[[UpdateViewControll alloc]initWithFrame:CGRectMake(320,  80,320, 350)];
update .delegate=self;
update.backgroundColor=[UIColor whiteColor];
[scrollview addSubview:update];

search=[[SearchViewControll alloc]initWithFrame:CGRectMake(640,  80,320, 350)];
//info.delegate=self;
search.backgroundColor=[UIColor whiteColor];
[scrollview addSubview:search]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T11:41:43.413

在滚动视图中添加视图后使用此代码`viewDidLoad`。

```
[scrollview scrollRectToVisible:CGRectMake(320,  80,320, 350) animated:YES]; 
```

# ruby-on-rails - Rails 回形针 - 添加动态多个图像

> ID：13877991
> 
> 赞同：0
> 
> 时间：2012-12-14T11:39:39.847
> 
> 标签：ruby-on-rails, image, paperclip

我正在尝试将动态数量的图片添加到一个名为“组件”的元素中。环顾四周，我创建了以下代码：

组件.rb

```
class Component < ActiveRecord::Base
    has_many :images
    accepts_nested_attributes_for :images, :allow_destroy => true
end 
```

图片.rb

```
class Image < ActiveRecord::Base
    attr_accessible :component_id, :photo_file_size

    belongs_to :component, :foreign_key => :component_id
    has_attached_file :photo,
    :styles => {
         :thumb => "75x75>",
         :small => "200x200>"
    }
end 
```

_form.html.erb

```
<%= form_for setup_component(@component) , :html => { :multipart => true } do |f| %>
...
  <h2> PHOTOS </h2>
<% f.fields_for @component.images.build do |p| %>
        <h2>Photo</h2>
          <p><%= f.label :data %><br /><%= f.file_field :data %></p>
<% end %> 
```

application_helper.rb

```
def setup_component(comp)

    return comp.images.build if comp.images.empty?
end 
```

因此，当我尝试形成时，出现以下错误：

```
undefined method `images_path' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-22T09:05:19.087

您收到`images_path`错误是因为您没有正确设置表单

**为什么此代码不在您的控制器中？**

```
def setup_component(comp)
    return comp.images.build if comp.images.empty?
end 
```

您的 form_for 对象需要有明确的变量定义，以允许创建 ActiveRecord 对象。Rails 获取您分配给 的变量`form_for`，并使用它为表单构建一个完整的结构，以及一个返回路径（以防出错）。目前，您的表单构建了一个新图像，这就是它返回 images_path 错误的原因。

```
<%= form_for setup_component(@component) 
```

你最好写这个：

```
#app/controllers/component_controller.rb
def new_image
    @comp = Comp.new
    @comp.images.build
end 
```

然后可以从 /new/ 路由中调用您的表单，从而为 rails 提供一条真正的路线，让您返回。

* * *

其次，你的表格有这个：

```
<% f.fields_for @component.images.build do |p| %>
        <h2>Photo</h2>
          <p><%= f.label :data %><br /><%= f.file_field :data %></p>
<% end %> 
```

这应该更改为：

```
<%= f.fields_for :images do |p| %>
        <h2>Photo</h2>
          <p><%= p.label :data %><br /><%= p.file_field :data %></p>
<% end %> 
```

# c++ - C++ PathFileExists 限制为 260 个字符

> ID：13877994
> 
> 赞同：3
> 
> 时间：2012-12-14T11:39:50.767
> 
> 标签：c++, winapi

根据[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773584%28v=vs.85%29.aspx) `PathFileExists()`功能仅支持文件路径 < 260

我想检查远程位置是否存在路径。现在合法地我可以创建一个名称为 256 个字母长的文件，当我向其中添加服务器名称时，总长度超过 260，因此`PathFileExists()`无法使用它。

我还有什么其他选项可以检查文件是否存在？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T20:12:57.463

由于所有[Shell 路径处理函数](http://msdn.microsoft.com/en-us/library/bb773559.aspx "Shell 路径处理函数")都限制为`MAX_PATH`- 1 个字符，因此如果您需要支持更长的文件名，则必须使用 kernel32 函数。您的选择是：

1.  [查找第一个文件](http://msdn.microsoft.com/en-us/library/aa364418.aspx "FindFirstFile 函数")
2.  [创建文件](http://msdn.microsoft.com/en-us/library/aa363858.aspx "创建文件函数")
3.  [获取文件属性](http://msdn.microsoft.com/en-us/library/aa364944.aspx "获取文件属性函数")

虽然[FindFirstFile](http://msdn.microsoft.com/en-us/library/aa364418.aspx "FindFirstFile 函数")相当简单，但如果函数不返回错误代码，则需要调用[FindClose 。](http://msdn.microsoft.com/en-us/library/aa364413.aspx "查找关闭功能")如果您在网络上查询文件，这会触发额外的网络往返。额外的网络往返也会为[CreateFile](http://msdn.microsoft.com/en-us/library/aa363858.aspx "创建文件函数")触发，您必须在其中清理`HANDLE`调用[CloseHandle](http://msdn.microsoft.com/en-us/library/ms724211.aspx "关闭句柄函数")。加上它可能会给出[错误的答案](http://blogs.msdn.com/b/oldnewthing/archive/2007/10/23/5612082.aspx "迷信：为什么 GetFileAttributes 是老前辈测试文件存在的方式？")。

如果您需要支持长于字符的文件名，则使用[GetFileAttributes](http://msdn.microsoft.com/en-us/library/aa364944.aspx "获取文件属性函数")的其余选项是查询文件是否存在的建议方法。`MAX_PATH`

# mixpanel - MixPanel 用户跟踪

> ID：13877995
> 
> 赞同：0
> 
> 时间：2012-12-14T11:39:52.527
> 
> 标签：mixpanel, user-tracking

我想用 MixPanel 跟踪用户。我正在使用以下代码（数据是硬编码的，因为它目前处于概念验证状态）：

```
 if ("@Auth.UserID" !== "0") {
        if ("@SessionWrapper.UserInitialized" === "False") {
            mixpanel.people.identify("@Auth.UserID");
            mixpanel.people.set({
                "$email": "@Auth.UserEmail",    // only special properties need the $
                "$created": "@SessionWrapper.UserCreated",
                "$name": "@Auth.FullName"
            });
        }
    } 
```

mixpanel 已初始化，UserID 已登录控制台，但我认为这不起作用。我做错了什么，如何在 mixpanel.com 上测试此功能？我单击了左侧的流选项卡，并在面板中选择了用户选项卡。

我是否正确使用了 set 功能？我是否正确查看流？谢谢。

编辑：我正在使用 mixpanel-2.1.min.js

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T21:54:51.300

所以实际上人们的数据并没有显示在流中，所以我不会担心你在那里看不到它。

尝试检查人员分析部分中的探索选项卡，以查看是否已创建新记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-01T16:28:08.203

所有 MixPanel 人员数据应显示在屏幕左侧“人员”下方的“探索”选项卡中。

# jsf - PrimeFaces 上传器：如何根据需要标记此组件？

> ID：13877996
> 
> 赞同：0
> 
> 时间：2012-12-14T11:40:03.137
> 
> 标签：jsf, jsf-2, primefaces

在我的应用程序中，我有一个简单模式下包含多个 primefaces fileUploader 的表单。这些上传器组件是动态生成的，一个用于数据表的每一行。
我想将它们标记为必需，所以我尝试了这个：

```
<h:form enctype="multipart/form-data" id="aform">
   <p:dialog id="dlgId">
    <p:dataTable var="foo" id="table"
        value="#{myBean.fooList}">
        <p:column>
           <p:fileUpload value="#{foo.file}" mode="simple" required="true"/>
        </p:column>
    </p:dataTable>

    <p:commandButton id="submit" value="Submit" ajax="false"
        actionListener="#{myBean.listener}" update="dlgId">
    </p:commandButton>
  </p:dialog>
</h:form> 
```

问题是，如果我上传所有文件但未执行验证，则表单工作正常。PrimeFaces 版本是 3.4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:35:20.090

根据评论，您实际上在一个对话框中拥有此表单，该表单在提交后被关闭/隐藏。当对话框[内的表单被提交](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIForm.html#isSubmitted%28%29)并且[出现验证错误](http://docs.oracle.com/javaee/6/api/javax/faces/context/FacesContext.html#isValidationFailed%28%29)时，您基本上需要让`visible`对话框的属性进行评估。`true`

您可以按如下方式实现：

```
<p:dialog ... visible="#{dialogForm.submitted and facesContext.validationFailed}">
    <h:form binding="#{dialogForm}">
        ...
    </h:form>
</p:dialog> 
```

* * *

**与具体问题无关**，对话框不应该进入表单，而是对话框应该有自己的表单（因为 1）对话框可能被 JS 隐式重定位到正文的末尾，2）你不想提交/处理对话框视图之外的所有其他输入）。因此，如果对话框当前位于具有所有其他输入控件的表单内，则应将其移到外部，例如移到正文的最底部。

# wpf - 我可以在 Xaml 中指定 DataGrid 项目的类型吗？

> ID：13877999
> 
> 赞同：7
> 
> 时间：2012-12-14T11:40:11.560
> 
> 标签：wpf, xaml, resharper

在 Xaml 创建数据模板时，我可以指定 DataTemplate 将应用于的项目的类型，如下所示：

```
<DataTemplate DataType="{x:Type Vehicle}">
  <!-- do some stuff with the Vehicle class's properties -->
</DataTemplate> 
```

我希望在创建 DataGrid 时能够做同样的事情，但这不是 DataType 属性的选项：

```
<DataGrid ItemsSource="{Binding Cars}" DataType="{x:Type Vehicle}">
     <!-- Create columns that bind to the Vehicle class's properties -->
</DataGrid> 
```

一个相当糟糕的解决方法是分别在每一列上执行此操作：

```
<DataGrid ItemsSource="{Binding Cars}" DataType="{x:Type Vehicle}">
  <DataGrid.Columns>
    <DataGridTemplateColumn>
      <DataGridTemplateColumn.Header />
      <DataGridTemplateColumn.CellTemplate>
        <DataTemplate DataType="{x:Type Vehicle}">
          <!-- bind to a Vehicle class property -->
        </DataTemplate>
      </DataGridTemplateColumn.CellTemplate>
    </DataGridTemplateColumn>
    <DataGridTemplateColumn>
      <DataGridTemplateColumn.Header />
      <DataGridTemplateColumn.CellTemplate>
        <DataTemplate DataType="{x:Type Vehicle}">
          <!-- bind to a Vehicle class property -->
        </DataTemplate>
      </DataGridTemplateColumn.CellTemplate>
    </DataGridTemplateColumn>
    <DataGridTemplateColumn>
      <DataGridTemplateColumn.Header />
      <DataGridTemplateColumn.CellTemplate>
        <DataTemplate DataType="{x:Type Vehicle}">
          <!-- bind to a Vehicle class property -->
        </DataTemplate>
      </DataGridTemplateColumn.CellTemplate>
    </DataGridTemplateColumn>
  </DataGrid.Columns>
</DataGrid> 
```

有没有更好的方法来做到这一点我不知道？如果我不这样做，ReSharper 的各个部分就不能很好地应对。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:49:00.497

尝试这个：

```
<DataGrid ItemsSource="{Binding Cars}"
          d:DesignSource="{d:DesignInstance Type={x:Type Vehicle}, CreateList=True}">
     <!-- Create columns that bind to the Vehicle class's properties -->
</DataGrid> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-30T09:47:34.627

您可以指定设计的数据上下文。

这有效：

```
<DataGrid ItemsSource="{Binding Cars}" d:DataContext="{d:DesignInstance Type=Vehicle}">
    <!-- Create columns that bind to the Vehicle class's properties -->
    <!-- The pop-up window will not suggest using the Vehicle class's properties :) -->
</DataGrid> 
```