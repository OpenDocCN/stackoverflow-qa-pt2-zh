# StackOverflow 问答 14594000-14594999

# xml - Sharepoint 2010 - 在自定义内容类型中隐藏“标题”字段

> ID：14594004
> 
> 赞同：4
> 
> 时间：2013-01-29T23:27:44.183
> 
> 标签：xml, sharepoint, sharepoint-2010, custom-lists

现在我在 a 中定义一个新`Custom List Definition`的`Custom Content Type`，问题只是`Title`与列表关联的字段无法隐藏，我遵循了以下链接中的一些方法，但没有成功。

*   [无法隐藏自定义内容类型中的标题列](https://sharepoint.stackexchange.com/questions/38219/cant-hide-the-title-column-in-a-custom-content-type)

*   [如何删除/隐藏列表定义中的内置标题字段](http://social.msdn.microsoft.com/Forums/en/sharepointcustomization/thread/5f39ab7d-1332-444d-a5ae-2a2851c398ad)

简单地添加`List definition`而不实现内容类型会使 Title 字段消失，但在定义内容类型及其字段时，它总是可见的。

**元素.xml**

```
 <ContentType ID="0x01003EBF692DD17B4F71966712180C0D23D8" Name="ContactUsAssignments"  
               Description="Contact Us Assignments content type">
    <FieldRefs>
      <FieldRef ID="{4B888F48-A039-46D0-B2E1-C67802097069}"/>
      <FieldRef ID="{6238a52d-2975-4e8a-9a1e-31b9cdc74129}"/>
      <RemoveFieldRef ID="{D3D0DDF1-F791-4FFF-893C-0C100B724F1A}" />
    </FieldRefs>
  </ContentType> 
```

我也尝试过 `Inherits="FALSE" Version="0"`，但不幸的是没有任何改变。

**架构.xml**

```
 <ContentTypes>
    <ContentTypeRef ID="0x01003EBF692DD17B4F71966712180C0D23D8"></ContentTypeRef>
</ContentTypes>
<Fields>
  <Field Type="Text" DisplayName="Title" Required="FALSE"
   ID="{D3D0DDF1-F791-4FFF-893C-0C100B724F1A}" StaticName="Title" Name="Title" Hidden="TRUE" />
</Fields> 
```

我不知道我是否错过了什么，但方法很清楚。谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-17T09:14:33.813

这里提到的所有答案都经过测试，但没有成功。经过多次调查和属性组合，我想出了以下答案作为工作答案。

一种。在`Elements.xml`每个文件上`list Definition`确保

> **继承=“假”**

对于`Content Type`.

> **隐藏="TRUE" 必需="FALSE" 显示名称="_hidden"**

对于“ `Title`”字段定义。

```
<ContentType ID="0x01007F465964D8114436BD7D7CF2C2D8CF01" Name="Categories" Group="Category CT" Description="Category content type" Inherits="FALSE">
    <FieldRefs>
      <FieldRef ID="{BA7EBEF9-338B-45DE-9743-E394873060A7}"/>
      <FieldRef ID="{fa564e0f-0c70-4ab9-b863-0177e6ddd247}" Hidden="TRUE" Required="FALSE" DisplayName="_hidden" />
    </FieldRefs>
  </ContentType> 
```

湾。删除对`Title`Field on的任何引用`schema.xml`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T07:46:00.200

这是适用于我们所有项目的方法：

在定义了所有自定义内容类型的 element.xml 中，添加下一行以隐藏“标题”字段。确保具有相同的 GUID，因为它是 OOTB SharePoint 标题字段：

```
<FieldRef ID="{fa564e0f-0c70-4ab9-b863-0177e6ddd247}" Name="Title" DisplayName="Title" Required="FALSE" Hidden="TRUE" /> 
```

属性Required="FALSE" 和Hidden="TRUE" 很重要。这些行将在内容类型中起作用。

另一个修改是内容类型定义。它应该看起来像：

```
<ContentType ID="0x01005E47745D75A5422A9688FDCC0E6E855A"
               Name="Links"
               Group="YourGroup"
               Description="YouDescription
               Inherits="FALSE"
               Version="0"> 
```

Inherits="FALSE" 也很重要，因为内容类型应该停止继承默认项目属性，以便隐藏字段并使其成为可选。

希望能帮助到你，

安德鲁

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T04:41:42.087

您是否尝试在 ContentType 定义上方的 Elements.xml 文件中添加标题字段定义？我在下面找到了两个将字段定义添加到 elements.xml 文件的示例。您可以尝试这样做并将Required 设置为False 并将Hidden 设置为True，看看是否有效。

[http://msdn.microsoft.com/en-us/library/gg295290%28v=office.14%29.aspx](http://msdn.microsoft.com/en-us/library/gg295290%28v=office.14%29.aspx)

[http://www.codeproject.com/Articles/410880/SharePoint-2010-Creating-a-Custom-Content-Type-usi](http://www.codeproject.com/Articles/410880/SharePoint-2010-Creating-a-Custom-Content-Type-usi)

我从来没有完全这样做过，但是我有时会作弊并从列表定义中完全删除内容类型（保留为 < ContentTypes />）并像在 Schema.xml 中一样声明字段。以这种方式执行此操作会覆盖我的默认标题字段。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T21:00:45.633

尝试使用 Inherits="False" 来指定删除 Title 字段。例如

```
<?xml version="1.0" encoding="utf-8"?>
<Elements xmlns="http://schemas.microsoft.com/sharepoint/">
  <!-- Parent ContentType: Item (0x01) 
       Tracked user activity. -->
  <ContentType ID="0x0100c592d12a1dfa42ae8614d54f45118f83"
               Name="User Activity"
               Group="User Activity Tracking"
               Description="Tracked user activity."
               Inherits="FALSE"
               Version="0">
    <FieldRefs>
      <!--Title field inherited from parent Item content type is not required.-->
      <RemoveFieldRef ID="{fa564e0f-0c70-4ab9-b863-0177e6ddd247}" Name="Title" />
      <FieldRef ID="{B2FCBA31-5888-4CB9-BCC8-7B1943161B40}" Name="UserActivityCreatedBy"/>
      <FieldRef ID="{B3F666F7-2DA3-402C-A1A2-A6AA9F4E3E86}" Name="UserActivityType"/>
      <FieldRef ID="{ABF63CC0-6201-44E7-BA8E-4C0116E5B09F}" Name="UserActivityTimeStamp"/>
    </FieldRefs>
  </ContentType>
</Elements> 
```

在列表定义中添加 ref 到内容类型

```
 <ContentTypes>
      <ContentTypeRef ID="0x0100c592d12a1dfa42ae8614d54f45118f83"/>
    </ContentTypes> 
```

并且在字段部分不描述标题字段

```
<Fields>
      <Field ID="{b2fcba31-5888-4cb9-bcc8-7b1943161b40}" Name="UserActivityCreatedBy" Type="User" List="UserInfo" ShowField="Title" UserSelectionMode="0" UserSelectionScope="0" ReadOnlyEnforced="TRUE" Required="TRUE" DisplayName="Created By" StaticName="UserActivityCreatedBy" Group="User Activity Tracking"/>
      <Field ID="{b3f666f7-2da3-402c-a1a2-a6aa9f4e3e86}" Name="UserActivityType" Type="Choice" Format="Dropdown" FillInChoice="FALSE" DisplayName="Type" StaticName="UserActivityType" Group="User Activity Tracking">
        <Default>HttpRequest</Default>
        <CHOICES>
          <CHOICE>Login</CHOICE>
          <CHOICE>HttpRequest</CHOICE>
          <CHOICE>TermsOfUsageAcceptance</CHOICE>
        </CHOICES>
      </Field>
      <Field ID="{abf63cc0-6201-44e7-ba8e-4c0116e5b09f}" Name="UserActivityTimeStamp" Type="DateTime" Format="DateTime" StorageTZ="UTC" DisplayName="Time Stamp" StaticName="UserActivityTimeStamp" Group="User Activity Tracking"/>
    </Fields> 
```

也不要忘记描述适当的视图 - ViewFields 部分

```
 <ViewFields>
          <FieldRef Name="UserActivityCreatedBy" />
          <FieldRef Name="UserActivityType" />
          <FieldRef Name="UserActivityTimeStamp" />
        </ViewFields> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-17T16:34:09.940

这是一个对我来说很好的解决方案：

这是我的内容类型

```
<ContentType ID="0x0100a2045db65601406a95f8f050642655b7"
               Name="MyContentType"
               Group="Custom Content Types"
               Description="Content Type Description"
               Inherits="FALSE"
               Version="0">
<FieldRefs>
     <!--removing the reference from the Title field-->
      <RemoveFieldRef ID="{fa564e0f-0c70-4ab9-b863-0177e6ddd247}" Name="Title" />

  ....

</FieldRefs> 
```

这是我的 Schema.xml 部分，其中包含我的内容类型的引用。您必须从 schema.xml 视图中删除 titlefield。

```
 <ContentTypes>
        <ContentTypeRef ID="0x0100a2045db65601406a95f8f050642655b7"/>
    </ContentTypes>

.....

    <View BaseViewID="1" Type="HTML" WebPartZoneID="Main" DisplayName="MyView" DefaultView="TRUE" MobileView="TRUE" MobileDefaultView="TRUE" SetupPath="pages\viewpage.aspx" ImageUrl="/_layouts/images/generic.png" Url="AllItems.aspx">
            <Toolbar Type="Standard" />
            <XslLink Default="TRUE">main.xsl</XslLink>
            <RowLimit Paged="TRUE">30</RowLimit>
            <ViewFields>
              <FieldRef Name="ID"></FieldRef>

              <!--Delete the reference below -->
              <FieldRef Name="LinkTitle"></FieldRef>

            </ViewFields>

..... 
```

这对我来说很好！我的列表中还有一个名为 title 的列，但在我的内容类型中没有任何名为 Title 的列，因此它在 newform、editform 和 viewform 页面中是隐藏的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-26T01:51:08.970

您可以考虑在事件接收器中使用一些代码：

```
 private void HideTitleFormField(SPList list)
    {
        SPContentTypeCollection listCTCollection = list.ContentTypes;

        foreach (SPContentType ct in listCTCollection)
        {
            SPFieldLinkCollection fieldLinks = ct.FieldLinks;

            //whilst we are here: hide the file name so it cant be edited.
            fieldLinks["Title"].Hidden = true;
            fieldLinks["Title"].Required = false;

            ct.Update();          
        }
    } 
```

# python - matplotlib python 改变轴

> ID：14594005
> 
> 赞同：0
> 
> 时间：2013-01-29T23:27:48.670
> 
> 标签：python, image, matplotlib

我对轴的变化没有什么问题。

```
import matplotlib.pyplot as plt
import numpy as np
from pylab import *

im = plt.imshow(np.flipud(plt.imread('tas.png')), origin='lower')

plt.show() 
```

我已经加载了图像并获得了图像的轴。对于 X(0-800)&对于 Y(0-600)。我不需要诸如缩放我需要的所有东西，它是一个图像作为我绘制的背景，坐标在另一个轴 X(35 77) Y(0 16) 但是当我写

```
import matplotlib.pyplot as plt
import numpy as np
from pylab import *

im = plt.imshow(np.flipud(plt.imread('tas.png')), origin='lower')

plt.axis([35, 75, 0, 16]) 
plt.show() 
```

我只得到了图像的一小部分。有人可以帮忙吗？我会很感激一些帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T01:52:21.443

你想要的`extent`关键字：

```
im = plt.imshow(np.flipud(plt.imread('tas.png')), 
                origin='lower', 
                extent=[35, 75, 0, 16]) 
```

[`imshow`文档](http://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes.imshow)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T09:41:08.057

使用以下代码

```
fig = plt.figure()
extax = fig.add_axes([0,0,1,1])
extax.imshow(np.flipud(plt.imread('pnggrad16rgb.png')), origin='lower')

ax = fig.add_axes([0.2,0.2, 0.6, 0.6], axisbg='none')
ax.plot([1,2,3], [3,6,1], color='w') 
```

我得到这个数字![这个图](../Images/8f9356084b4d6c3a14fe39625651814f.png)。

您应该使用轴、刻度标签和刻度的可见性`extax`来隐藏背景图像中所有不需要的东西。应该可以添加一个带有底层图形坐标的轴：看看[这里](http://matplotlib.org/users/transforms_tutorial.html)。[画廊](http://matplotlib.org/gallery.html)还可以就什么是可能的以及如何做到这一点提供一些想法

底层图像取自[这里](http://www.fnordware.com/superpng/pnggrad16rgb.png)

# javascript - 从 Ajax 响应提交表单

> ID：14594008
> 
> 赞同：1
> 
> 时间：2013-01-29T23:28:16.203
> 
> 标签：javascript, jquery, ajax

我有一个项目列表，每当添加新项目时，它都会通过 ajax 调用动态更新。这些列表项中的每一个都包含一个评论表单，该表单具有一个评论字段和一个隐藏字段，该字段指示已评论的项目。

我正在使用 jquery 表单插件使用 ajax 提交这些表单。我一直遇到的问题是插件无法识别表单，因此它们可以正常运行（发布并重定向到 ajax/comment.php）。在进行了一些挖掘之后，我认为这是因为表单正在动态加载并且脚本无法“看到”它们。我已经阅读了关于 eval() 是让脚本正确运行的可能解决方案。现在，如果我不使用 ajax 填充页面，代码将正确执行。

```
 <script>
$(document).ready(function() { 
var options = {  
    url: 'ajax/comment.php',
}; 
$('.commentsubmit').submit(function() { 
    $(this).ajaxSubmit(options); 

    return false; 
}); 
}); 

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T23:36:16.443

如果表单是动态加载的，请更改`.submit`为：

```
$(document).on('submit', '.commentsubmit', function () { 
```

这会将事件委托给在您调用时可能未添加到 DOM 的`submit`任何表单。`.commentsubmit``.on`

在不相关的说明中，使用`e.preventDefault()`，而不是`return false`： http: [//fuelyourcoding.com/jquery-events-stop-misusing-return-false/](http://fuelyourcoding.com/jquery-events-stop-misusing-return-false/)

# python - 根据 igraph 中的源/目标选择边

> ID：14594009
> 
> 赞同：9
> 
> 时间：2013-01-29T23:28:19.733
> 
> 标签：python, igraph

有没有一种简单的方法可以根据 igraph 中的源和目标来选择/删除边缘？

我使用的是本质上

```
g.es["source"] = [e.source for e in g.es]
g.es["target"] = [e.target for e in g.es]    
g.es["tuple"]  = [e.tuple  for e in g.es]        

g.es.select(target=root) 
```

但我觉得应该有一种方法可以做到这一点，而无需两次存储源/目标信息。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-30T09:27:27.873

只需使用`_source=whatever`and`_target=whatever`作为关键字参数`select`，例如：

```
g.es.select(_source=root) 
```

或者，您可以使用图表的方法，如果这对您的目的更好`incident`，它会为您提供边缘 ID 列表而不是过滤：`EdgeSeq`

```
g.incident(root, mode="out") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-23T14:17:18.950

顺便说一句，对于“元组”，您要使用`_between`：

```
g.es.find(_between=((source_id,), (target_id,))) 
```

看起来很奇怪——如果你使用`select`而不是`find`，并传入具有多个索引的元组，你实际上会得到一个边列表而不是单个边。但是对于单个边缘，仍然必须为开始和结束传递一个元组。

由于某种原因，这比使用`_source`and的组合要快得多（例如快 3 个数量级！） `_target`，但提供完全相同的信息。

# java - java图形绘制组件

> ID：14594013
> 
> 赞同：1
> 
> 时间：2013-01-29T23:28:41.133
> 
> 标签：java, swing, graphics, jpanel, paintcomponent

我有三个类 - TableApp/Diner/TablePanel。我不太明白图形类是如何工作的。我需要从我的 main 方法向我的paintComponent 发送一个 Graphics 对象引用，但我不确定如何将它链接在一起。任何关于如何如此有帮助的解释！

### TableApp 类

```
import javax.swing.*;
public class TableApp{
  public static void main(String[]args){    
  JFrame frame = new JFrame();
  TablePanel table = new TablePanel();
  frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
  frame.setVisible(true);
  frame.setSize(500,500);  //I dont understand how to send my paintComponent a                    reference of a Graphics object
  } 
} 
```

### 表面板类

```
import java.awt.*;
import javax.swing.*;

public class TablePanel extends JPanel{

  Diner diner1,diner2,diner3,diner4,diner5,diner6;

  public TablePanel(){
    diner1 = new Diner(50,50,300,1,"Murray",Color.blue);
    diner2 = new Diner(50,50,300,1,"Murray",Color.blue);//will change once program runs
    diner3 = new Diner(50,50,300,1,"Murray",Color.blue);
    diner4 = new Diner(50,50,300,1,"Murray",Color.blue);
    diner5 = new Diner(50,50,300,1,"Murray",Color.blue);
    diner6 = new Diner(50,50,300,1,"Murray",Color.blue);

    setPreferredSize(new Dimension(300,200));
    setBackground(Color.white);

  }
  public void paintComponent(Graphics g){//need call from main
    super.paintComponent(g);
    diner1.draw(g);
    diner2.draw(g);
    diner3.draw(g);
    diner4.draw(g);
    diner5.draw(g);
    diner6.draw(g);
  }

} 
```

### 晚餐班

```
 import java.awt.*;
    import javax.swing.*;

    public class Diner{
      private int X,Y,diameter=50,seatNumber;
      private String name;
      private Color colour;

      public Diner(int x,int y,int d,int sN,String n,Color col){//construct
        X=x;
        Y=y;
        name=n;
        diameter=d;
        name=n;
        colour=col;

    }
      public void draw(Graphics g){
            g.setColor(Color.blue);
            g.fillOval(X,Y,diameter,diameter);
        }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T00:14:40.283

*   `paintComponent(..)`如果需要，您不要调用，只需调用`repaint()`它将通过调用`update(..)`,`paint(..)`等来刷新容器`paintComponent(..)`。

*   在您的代码中，您永远不会添加`TablePanel` `table`到您`JFrame`应该做的事情以使其可见`add(..)`

*   `300`此外，每个`Diner`相同的直径`x`和`y`的坐标将在每个顶部`50x50`绘制所有s 并且具有首选尺寸的将不适合所有表格。所以基本上坐标需要返工和/或面板尺寸需要改变。`Diner``TablePanel``200x300`

*   您不应该调用`setSize(..)`而是`JFrame`实现正确`LayoutManager`和/或覆盖`getPreferredSize()`以适应图纸的内容`JPanel`（注意不是使用的好习惯`setPreferredSize(..)`），而不是`pack()`在添加组件之后和设置`JFrame`可见之前调用。

*   `Event Dispatch Thread`请记住在via`SwingUtilities.invokeXXX`块上创建和操作 Swing 组件。

*   还有一些怎么样`Graphics2D`，`RenderingHints`让这些圆圈看起来很完美:)

*   我没有展示的进一步增强是使用 a`List`添加（通过`TablePanel`like中的方法调用`addDiner(Diner d)`）并跟踪`Diner`您添加到`TablePanel`. 这您将简单地迭代列表`paintComponent`而不是冗余的代码行。

这是带有上述修复的代码：

![在此处输入图像描述](../Images/ab445c6114e503400a2850d2655c2d93.png)

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.RenderingHints;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class TableApp {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                JFrame frame = new JFrame();
                TablePanel table = new TablePanel();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.add(table);
                frame.pack();
                frame.setVisible(true);
            }
        });
    }
}

class TablePanel extends JPanel {

    Diner diner1, diner2, diner3, diner4, diner5, diner6;

    public TablePanel() {
        diner1 = new Diner(10, 90, 20, 1, "Murray", Color.blue);
        diner2 = new Diner(70, 30, 20, 1, "Murray", Color.blue);//will change once program runs
        diner3 = new Diner(50, 60, 20, 1, "Murray", Color.blue);
        diner4 = new Diner(100, 90, 20, 1, "Murray", Color.blue);
        diner5 = new Diner(80, 120, 20, 1, "Murray", Color.blue);
        diner6 = new Diner(100, 30, 20, 1, "Murray", Color.blue);
        setBackground(Color.white);
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(200, 200);
    }

    public void paintComponent(Graphics g) {//need call from main
        super.paintComponent(g);
        Graphics2D g2d = (Graphics2D) g;
        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
        g2d.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);
        diner1.draw(g2d);
        diner2.draw(g2d);
        diner3.draw(g2d);
        diner4.draw(g2d);
        diner5.draw(g2d);
        diner6.draw(g2d);
    }
}

class Diner {

    private int X, Y, diameter = 50, seatNumber;
    private String name;
    private Color colour;

    public Diner(int x, int y, int d, int sN, String n, Color col) {//construct
        X = x;
        Y = y;
        name = n;
        diameter = d;
        name = n;
        colour = col;

    }

    public void draw(Graphics2D g2d) {
        g2d.setColor(Color.blue);
        g2d.fillOval(X, Y, diameter, diameter);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T00:13:49.437

您不会将 Graphics 对象传递给paintComponent。当您将组件添加到框架时，这将由 Swing 完成并调用（正如有人所说）。所以你在 main 中没有做的是以下

```
frame.add(table) 
```

将组件添加到框架后，它将在框架上绘制。

# python - 带有 Fanstatic 和 Flask 的图像

> ID：14594014
> 
> 赞同：0
> 
> 时间：2013-01-29T23:28:44.533
> 
> 标签：python, flask, fanstatic

我让[Fanstatic](http://fanstatic.org)与 Flask for CSS 和 JS 一起工作得很好。该库将允许您使用散列生成散列文件名。如果哈希`click.js`是，`a0sd2lfu12v18fhac4ias0o7if`那么您可以在烧瓶应用程序中呈现`click-a0sd2lfu12v18fhac4ias0o7if.js`。这样做的目的是使浏览器和 CDN 缓存失效。当文件的内容改变时，文件的名称也会改变。

我需要一个为我的图像生成哈希的库，就像 Fanstatic 为 CSS/JS 所做的那样，这样当我更新我的图像并部署到生产环境时，浏览器就会使用新图像。

Fanstatic 的文档提到它可以提供图像，但没有给出任何示例。如何使用 Flask 使用我的图像资产获取这个基于哈希的文件名？如果你知道如何用 fanstatic 做到这一点，你能告诉我怎么做吗？如果有更好的库来渲染基于哈希的文件名的图像，你能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-04T05:06:44.793

假设您已设置 fanstatic Publisher，以下是`qux`在请求周期内计算资源 URL 的方法：

```
import fanstatic
needed = fanstatic.get_needed()
# The NeededResources object is where the configuration 
#(base_url, versionining, etc) is stored during the request.
url = '%s/%s' % (needed.library_url(qux.library), qux.relpath) 
```

# javascript - 支持锚点/对接的 JavaScript 库，例如 winforms 应用程序

> ID：14594017
> 
> 赞同：2
> 
> 时间：2013-01-29T23:28:48.177
> 
> 标签：javascript, jquery, web-applications

jQuery 或任何其他 JavaScript 库中是否有任何东西可以让您轻松布局网页，就像您可以在其中为每个元素设置“锚点”的 Windows 窗体（即-.NET WinForms）应用程序一样？因此，如果我为 Top、Left 和 Right 设置一个锚点...元素将随着包含的扩展而扩展其宽度，但不会扩展高度（但将保持在相同的 Y/顶部位置）。如果我不设置任何锚点，则元素保持相同的宽度和高度并居中。

我知道这与大多数优秀的网页设计相反（页面需要在各种屏幕尺寸/等上工作），但就我而言，我正在尝试创建一个非常丰富的 UI，而使用可用的 HTML/CSS 是不可能的布局规则。在您说这不是真的之前，我认为有几个流行的网站使用 JavaScript 在页面调整大小时重新定位项目。例如，我认为谷歌日历就是这样做的。

我的整体 UI 设计类似于这个 Dojo 示例：[http ://demos.dojotoolkit.org/demos/themePreviewer/demo.html](http://demos.dojotoolkit.org/demos/themePreviewer/demo.html)

我的页面将始终适合浏览器窗口（从不在窗口本身上的垂直/水平滚动条） - 当然，最大尺寸，在这种情况下，如果您不能使用该页面（与 Dojo 示例相同，它只是裁剪零件并变得无法使用）。我将有几个带有拆分器的面板来调整每个面板的大小，以及面板内需要锚定到各个点（底部/右侧/左侧/顶部/填充）的内容。

我不知道 Dojo - 它看起来相当庞大。我主要想知道我的选择是什么，并倾向于一个较小的库，专门用于添加锚/对接支持。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T23:37:44.970

Ext JS 有一个强大/灵活的布局引擎，支持锚定和完整的浏览器流体布局。 [http://dev.sencha.com/deploy/ext-4.0.0/examples/layout-browser/layout-browser.html](http://dev.sencha.com/deploy/ext-4.0.0/examples/layout-browser/layout-browser.html)

检查他们的`border`布局。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-16T18:35:57.087

我正在编写自己的类似布局框架，我即将完成其核心功能，这可能对您有用。我的设计允许用户随意移动停靠面板，但如果你真的想的话，这个功能“可以”在你的停靠面板上被禁用。

在这里查看：http: [//docker.webcabin.org/](http://docker.webcabin.org/)

编辑：布局框架现已完成并可以正式使用！

# mvvm - 当我尝试创建 DependencyProperty：找不到管理 FrameworkElement 或 FrameworkContentElement

> ID：14594018
> 
> 赞同：1
> 
> 时间：2013-01-29T23:28:49.763
> 
> 标签：mvvm, datagridcomboboxcolumn

我正在`DataGridColumn`通过继承来构建自定义，`DataGridBoundColumn`但是当我尝试使`DependencyProperty`此错误出现在输出窗口中时

> System.Windows.Data 错误：2：找不到目标元素的管理 FrameworkElement 或 FrameworkContentElement。绑定表达式：路径=myViewModelProperty；数据项=空；目标元素是“CustomDataGridComboBoxColumn”（HashCode=24500989）；目标属性是“ItemsSourcePath”（类型“对象”）

我在 DataGridColumns 中阅读过有关 DataContext 的信息，并且听说此对象不属于可视树。但我找不到让他们从父级继承 DataContext 的方法

这是我使用的代码

```
 public partial class CustomGridComboBoxColumn : DataGridBoundColumn
    {
        //The value indicating where to get the itemsSource
        public static readonly DependencyProperty ItemsSourcePathProperty = DependencyProperty.Register(
                "ItemsSourcePath",
                typeof(string),
                typeof(CustomGridComboBoxColumn));
    }
    /// <summary>
    /// Gets or set the related collection 
    /// </summary>
    public string ItemsSourcePath
    {
        get
        {
          return (string)GetValue(ItemsSourcePathProperty);
        }
        set
        {
           SetValue(ItemsSourcePathProperty, value);
        }
    } 
```

然后我重写了创建编辑样式的方法

```
protected override FrameworkElement GenerateEditingElement(DataGridCell cell, object dataItem)
        {
            ComboBox comboBox = new ComboBox();
            Binding binding = new Binding(ItemsSourcePath.ToString());
            binding.Source = (this.DataGridOwner as DataGrid).DataContext;
            BindingOperations.SetBinding(comboBox, ComboBox.ItemsSourceProperty,
            binding);

            return comboBox;
        } 
```

我正在尝试像这样使用它

```
<cc:CustomDataGridComboBoxColumn Header="New Column" ItemsSourcePath="{Binding myViewModelProperty}"/> 
```

# c# - 在定义的事件函数中发送参数

> ID：14594022
> 
> 赞同：0
> 
> 时间：2013-01-29T23:29:22.733
> 
> 标签：c#, events, ip-address

我正在使用`Ping`来自的类`System.Net.NetworkInformation`，我需要将一些字符串数据发送到`PingCompleted`事件处理程序的事件函数。我试过这个：

```
void ex_ping_PingCompleted(object sender, PingCompletedEventArgs e, string adress)
{

} 
```

...

```
ex_ping.PingCompleted += (sender1, args) => ex_ping_PingCompleted(sender1, new 
PingCompletedEventArgs(), adress); 
```

但它告诉我`PingCompletedEventArgs`没有构造函数。我试图制作自己的事件参数：

```
public class ProgressEventArgs : PingCompletedEventArgs
{
            public string adress;
            public ProgressEventArgs(string ex_adress)
            {
                adress = ex_adress;
            }
} 
```

这里同样的错误。我只想知道我 ping 了哪个地址，`e.Reply.Address`在事件函数中给了我 IP，我需要站点名称。

编辑：我自己想出来的：

```
 ex_ping.PingCompleted += (sender1, args) => ex_ping_PingCompleted(sender1, args,adress); 

    void ex_ping_PingCompleted(object sender, PingCompletedEventArgs e,string ex_adress)        {
    } 
```

工作正常，/关闭

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:33:13.167

订阅活动

```
 ex_ping.PingCompleted += ex_ping_PingCompleted; 
```

并在处理程序中获取地址

```
void ex_ping_PingCompleted(object sender, PingCompletedEventArgs e)
{
   // verify if operation was not canceled or some error occured

   var address = e.Reply.Address;
   IPHostEntry entry = Dns.GetHostEntry(address);
   var siteName = entry.HostName;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-13T06:53:33.907

你在`UserState`财产之后：

```
void Ping()
{
    string address = "google.com";
    ex_ping.PingCompleted+=ex_ping_PingCompleted;
    ex_ping.SendAsync(address, 500, buffer, options, address);
}

void ex_ping_PingCompleted(object sender, PingCompletedEventArgs e)
{
    // Will give you the hostname
    var address = e.UserState;
} 
```

# php - 尝试使用 Google Maps API 根据 mySQL 数据库中的城市制作一组纬度和经度

> ID：14594023
> 
> 赞同：-1
> 
> 时间：2013-01-29T23:29:24.807
> 
> 标签：php, mysql, google-maps

我正在尝试使用 Google Maps API 制作存储在 mySQL 数据库中的城市的经纬度数组。

数组应如下所示：

```
var markers = [
    { lat: 45.5235, lng: -122.6762, name: "Portland" },
    { lat: 47.6062, lng: -122.3321, name: "Seattle" },
    { lat: 34.0522, lng: -118.2437, name: "Los Angeles" },
    { lat: 32.7153, lng: -117.1573, name: "San Diego" }
]; 
```

这是我用来尝试实现此目的的代码：

```
var geocoder = new GClientGeocoder();

    var markers = [

    <?php

    //orgnize fans by city
    $query = "SELECT city, state, COUNT(*) fans FROM users GROUP BY city ORDER BY fans DESC";
    $result = mysql_query($query) or die(mysql_error());
    while($row = mysql_fetch_array($result)){
        var address = echo '"'$row['city'].", ".$row['state']'"';

        geocoder.getLatLng(address, function(point) {
                           var latitude = point.y;
                           var longitude = point.x;
        });
        echo "{ lat: \"".latitude.", lng: ".longitude.", name: "'"'.$row['city'].", ".$row['state'].'"'"},\n ";
        echo "<br/>";
    }

    ?>

    ]; 
```

我收到以下错误：

> 解析错误：语法错误，意外的 T_VAR

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T23:37:48.513

```
geocoder.getLatLng(address, function(point) {
                           var latitude = point.y;
                           var longitude = point.x;
        }); 
```

此代码不是 PHP。很少有回声丢失。上面的线也很奇怪。

# javascript - SO如何动态获取其标签？

> ID：14594025
> 
> 赞同：2
> 
> 时间：2013-01-29T23:29:25.793
> 
> 标签：javascript, jquery, ajax, stack-overflow

当您提出问题时，stackoverflow 如何在下面的标签输入中加载其可用标签？他们是在页面加载时填充可用标签还是根据用户输入或用户按键发出请求？我计划在我的应用程序中实现相同的方式，但我不知道如何实现这一目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:33:10.593

他们*肯定*不会在页面加载时加载所有可用的标签，因为太多了。我在 Firefox 的 Web 控制台下进行了快速测试，看起来他们使用 AJAX 执行 JSON 请求。一个例子是：

[https://stackoverflow.com/filter/tags?q=visual&newstyle=true&_=1359502308905](https://stackoverflow.com/filter/tags?q=visual&newstyle=true&_=1359502308905)

导致响应：

```
[{"Name":"c#","Synonyms":"visual-c#","Count":409187,"Excerpt":"C# is a multi-paradigm programming language encompassing strong typing, imperative, declarative, functional, generic, object-oriented (class-based), and component-oriented programming disciplines. It was developed by Microsoft for use with their .NET framework and later approved as a standard by Ecma (ECMA-334) and ISO (ISO/IEC 23270:2006). It is now also available on different platforms (Android, Linux, iOS) via the MONO project."},{"Name":"visual-studio-2010","Synonyms":"visual-studio-2010-rtm","Count":30434,"Excerpt":"Visual Studio is an integrated development environment (IDE) from Microsoft."},{"Name":"visual-studio","Synonyms":"visualstudio","Count":25157,"Excerpt":"Visual Studio is an integrated development environment (IDE) from Microsoft. It supports many different programming languages."},{"Name":"visual-studio-2008","Synonyms":"visualstudio2008","Count":13539,"Excerpt":"This tag refers to the Visual Studio line of software development products from Microsoft, the 2008 version."},{"Name":"visual-c++","Synonyms":"visualc++","Count":12298,"Excerpt":"Microsoft Visual C++ is a C and C++ compiler for Windows. The most recent version of the compiler is Visual C++ 2012, which is available in both commercial editions and in a free Express Edition.\r\n\r\nThe compiler supports the following languages:\r\n\r\n\r\nC: Only the C90 standard is supported; there is very limited C99 support\r\nC++: Also includes support for several major C++11 features as of Visual Studio 2010\r\nC++/CLI and .NET Managed Extensions for C++"},{"Name":"vba","Synonyms":"visual-basic-applications","Count":12195,"Excerpt":"Visual Basic for Applications (VBA) is an event-driven programming language which was first introduced by Microsoft in 1993 to give Excel 5.0 a more robust object-oriented language for writing macros and automating the use of Excel.  It is now used for the entire Office suite. If your question is specifically about programming Excel, Access, Word or Outlook, use the appropriate tag: excel-vba, access-vba, word-vba or outlook-vba."}] 
```

它们似乎也有点滞后，因此它们不会一次触发太多 HTTP 请求。在它发出请求之前，您必须停止输入一两秒钟。

# iphone - iPhone 应用程序在部署目标为 5.0 时在 iOS 4.3 上运行，而在部署目标为 4.3 时不在 iOS 5.1 上运行

> ID：14594028
> 
> 赞同：0
> 
> 时间：2013-01-29T23:29:34.557
> 
> 标签：iphone, ios, cocos2d-iphone

当部署目标为 时，我的 iPhone 应用程序在`iOS 4.3`( `iPhone 3GS`) 上运行，而当部署目标为 时`5.0`，我的 iPhone 应用程序不在`iOS 5.1`( `iPod 4`)上运行`4.3`。

我很困惑为什么会发生这种情况，我想确保我设置了正确的部署目标。

`iPhone 3GS`我希望我的应用程序与更好的手机兼容。

我一直在使用 iOS 5.0 部署目标测试我的应用程序，它在我测试过的设备上一直运行良好，但是我读到有必要将部署目标设置为最低兼容 iOS 版本，但是这样做似乎与我期望发生的相反。

`cocos2d`如果这有什么不同，我正在使用我的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:53:30.747

这似乎更像是一个架构问题。尝试在 armv7 和 armv7s 之外添加 armv6 架构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:49:45.453

您的部署目标应设置为您想要支持的最低 iOS 版本，在您的情况下为 4.3。但是您的 Base SDK 应该设置为最新的 iOS ![在此处输入图像描述](../Images/962c394ba9798764c57099e2ef1f9bbd.png)

# python - 'NoneType' 对象不是 HoughCircles 的可下标错误

> ID：14594032
> 
> 赞同：0
> 
> 时间：2013-01-29T23:29:48.213
> 
> 标签：python, opencv, nonetype

我正在尝试重新创建此代码以绘制圆的霍夫变换，但在“圆的霍夫变换”行上出现 TypeError。请帮助我了解为什么我可能会收到该错误。

```
def fit_circle_houghtransform(vec_x, vec_y):
"""
    use hough transform to fit circle:
    http://www.janeriksolem.net/2012/08/reading-gauges-detecting-lines-and.html
    """

#load image
im = cv2.imread("gauge1.jpg")

#create a version to draw on and blurred version
draw_im = cv2.cvtColor(im, cv2.COLOR_GRAY2BGR)

m,n = im.shape

#Hough transform for circles
circles = cv2.HoughCircles(im, cv2.cv.CV_HOUGH_GRADIENT, 2, 10, np.array([]), 20, 60, m/10)[0]
c = circles[0]

cv2.circle(draw_im, (c[0],c[1]), c[2], (0,255,0), 2)
cv2.imshow("circles", im)
cv2.waitKey()

#save imgae
cv2.imwrite("ell.jpg", draw_im) 
```

确切的错误是：

```
File "fit_circle_houghtransform.py", line 43, in fit_circle_houghtransform
circles = cv2.HoughCircles(im, cv2.cv.CV_HOUGH_GRADIENT, 2, 10, np.array([]), 20, 60, m/10)[0]
TypeError: 'NoneType' object is not subscriptable 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:31:47.900

函数调用：

```
cv2.HoughCircles(im, cv2.cv.CV_HOUGH_GRADIENT, 2, 10, np.array([]), 20, 60, m/10) 
```

return `None`，因此`[0]`项目索引失败。我猜没有检测到图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T23:57:32.707

回答你问题的第二部分（在你的评论中......）

> > 因此，我尝试加载新图像，但现在出现此错误：
> > 
> > draw_im = cv2.cvtColor(im, cv2.COLOR_GRAY2BGR)
> > cv2.error: /Users/sumrania/packages/OpenCV-2.4.3/modules/imgproc/src/color.cpp:3355:
> > 错误: (-215) scn == 1 && (dcn == 3 || dcn == 4) 在函数 cvtColor

您的新输入图像是彩色的，您的代码需要灰度（这是 HoughCircles 需要的）。

首先，您需要将其转换为灰色以用于 HoughCircles 过程。假设原件是RGB：

```
 gray_im = cv2.cvtColor(im, cv2.COLOR_RGB2GRAY) 
```

这一行：

```
 draw_im = cv2.cvtColor(im, cv2.COLOR_GRAY2BGR) 
```

创建灰度图像的彩色版本，用于在 gray_im 中找到圆圈*后将*其绘制到上面。这只是为了获得带有彩色圆圈的灰度结果。如果您想在原始图像上绘制圆圈，则实际上并不需要它。

巧合的是，我今天早些时候回答了关于 C++ 版本的相同问题...
[将图像颜色从灰度转换为 RGB OpenCV C++](https://stackoverflow.com/questions/14571790/convert-image-color-from-grayscale-to-rgb-opencv-c/14572028#14572028)

# linux - `dash` 是否支持 `bash` 样式数组？

> ID：14594033
> 
> 赞同：5
> 
> 时间：2013-01-29T23:29:52.747
> 
> 标签：linux, dash-shell

在`dash`shell 环境中，我希望将字符串拆分为数组。以下代码适用于`bash`但不适用于`dash`.

```
IFS=""
var="this is a test|second test|the quick brown fox jumped over the lazy dog"
IFS="|"
test=( $var )
echo ${test[0]}
echo ${test[1]}
echo ${test[2]} 
```

我的问题

是否`dash`支持这种风格的数组。如果没有，是否有任何建议可以在**不**使用循环的情况下将其解析为另一种类型的变量？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-21T14:28:19.440

`dash`不支持数组。你可以尝试这样的事情：

```
var="this is a test|second test|the quick brown fox jumped over the lazy dog"
oldIFS=$IFS
IFS="|"
set -- $var
echo "$1"
echo "$2"
echo "$3"      # Note: if more than $9 you need curly braces e.g. "${10}"
IFS=$oldIFS 
```

* * *

注意：由于变量扩展未加引号，因此根据设置为竖线将`$var`其拆分为字段。`IFS`这些字段成为`set`命令的参数，因此`$1` `$2`等包含寻求的值。

`--`(end of options) 用于使变量扩展的结果不能被解释为 set 命令的选项。

# php - php 如果返回意外错误

> ID：14594034
> 
> 赞同：1
> 
> 时间：2013-01-29T23:29:54.557
> 
> 标签：php

我有一个php，如果它返回一个错误，这个错误：解析错误：语法错误，意外'='，包含此代码的行：`$result -= 'tm_year' = 1900;`有人知道如何解决这个问题吗？

```
if (!function_exists( 'strptime' )) {
        function strptime($strdate, $format) {
            $plop = array( 's' => 'tm_sec', 'i' => 'tm_min', 'H' => 'tm_hour', 'd' => 'tm_mday', 'm' => 'tm_mon', 'Y' => 'tm_year' );
            $regexp = preg_quote( $format, '/' );
            $regexp = str_replace( array( '%d', '%m', '%Y', '%H', '%i', '%s' ), array( '(\d{2})', '(\d{2})', '(\d{4})', '(\d{2})', '(\d{2})', '(\d{2})' ), $regexp );

            if (preg_match( '/^' . $regexp . '$/', $strdate, $m )) {
                $result = array( 'tm_sec' => 0, 'tm_min' => 0, 'tm_hour' => 0, 'tm_mday' => 0, 'tm_mon' => 0, 'tm_year' => 0, 'tm_wday' => 0, 'tm_yday' => 0, 'unparsed' => '' );
                preg_match_all( '/%(\w)/', $format, $patt );
                foreach ($patt[1] as $k => $v) {
                    if (!isset( $plop[$v] )) {
                        continue;
                    }

                    $result[$plop[$v]] = intval( $m[$k + 1] );

                    if ($plop[$v] == 'tm_mon') {
                        $result -= $plop[$v] = 1;
                        continue;
                    }
                }

                $result -= 'tm_year' = 1900;
                return $result;
            }

            return false;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T23:31:43.747

'tm_year' 是您尝试为其分配值 1900 的字符串。你不能这样做，因此错误。似乎是在编写速记代码时试图变得太可爱，因为老实说，您无法说出您的意图是什么。

# android - 如何在 android 1.6 到 2.2 中取回相机信息？

> ID：14594040
> 
> 赞同：0
> 
> 时间：2013-01-29T23:30:16.150
> 
> 标签：android, camera, android-camera

在 Android 2.3 (API 9) 中，谷歌引入了 CameraInfo 来检查给定的摄像头是带有两个摄像头的手机中的后置摄像头还是前置摄像头：http: [//developer.android.com/reference/android/hardware/Camera。相机信息.html](http://developer.android.com/reference/android/hardware/Camera.CameraInfo.html)

通过这个例子，您可以从 FRONT 摄像头获取信息：[如何在 Android 平台上打开“前置摄像头”？](https://stackoverflow.com/questions/2779002/how-to-open-front-camera-on-android-platform)BACK相机也是如此。

好的，但问题是我需要从带有 android 2.2 的手机中的 BACK 摄像头获取信息。手机有前后两个摄像头，当我试图获取摄像头的信息时，它会返回前置摄像头的信息。我使用了这段代码：

```
 if (Build.VERSION.SDK_INT <= 8){
            Camera cam = Camera.open();
            s +="<b><u>Main Camera:</u></b><br><br>";
            s += "<b>Megapixels: </b>"+getCameraMegapixels(cam) +" megapixels"; 
            s += getCamExtraInfo(cam);
            cam.release();
    } 
```

我想从主摄像头（后置摄像头）获取信息，但该代码为我提供了前置摄像头的信息....我确信有一种方法可以从 Android 2.2 上的后置摄像头获取信息和较低的设备。

有人知道吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T02:25:06.317

任何运行带有双摄像头的 Android 2.2 的 Android 设备都没有 Android SDK。请联系设备制造商以了解如何使用他们的不同相机，假设可以在他们的设备上使用。

# ruby-on-rails - 生成的网址中的句点而不是正斜杠

> ID：14594041
> 
> 赞同：3
> 
> 时间：2013-01-29T23:30:22.433
> 
> 标签：ruby-on-rails, routes

我的应用程序路线出现了奇怪的状态。

这是我正在使用 Rails 构建的基本讨论论坛。我正在使用嵌套资源，例如：

```
 resources :forums do
  resources :discussions
 end 
```

并生成一个视图以显示所有讨论，并要求单击这些讨论中的任何一个应路由到适当的讨论，例如“forum/2/discussions/3”。然而，当我使用：

```
<% Discussion.find_each do |discussion| %>
 <%= link_to discussion.title, forum_discussions_path(discussion.forum_id, discussion) %>
<% end %> 
```

生成的 url/链接是“forums/2/discussion.3”任何想法为什么有一个“。” 代替 ”/”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T23:41:23.017

您需要使用`forum_discussion`路线，而不是`forum_discussions`路线

```
forum_discussion GET /forums/:forum_id/discussions/:id(.:format) discussions#show 
```

总而言之，看起来像

```
<% Discussion.find_each do |discussion| %>
  <%= link_to discussion.title, forum_discussion_path(discussion.forum_id, discussion) %>
<% end %> 
```

* * *

你把它指向这条路线

```
forum_discussions GET /forums/:forum_id/discussions(.:format) discussions#index 
```

因此该`discussion.id`值被用作`:format`选项。

# javascript - 防止键盘在 iOS 中弹出

> ID：14594048
> 
> 赞同：0
> 
> 时间：2013-01-29T23:31:06.387
> 
> 标签：javascript, jquery, html, ios, keyboard

我正在开发一个主要在 iPad 设备 (iOS 6) 上运行的网站我有一个使用 HTML、CSS 和 Javscript 构建的自定义屏幕键盘。我的键盘会将信息放入输入字段。是否可以*仅*使用HTML、CSS 或 JS 来防止出现默认的 iOS 键盘？

请注意，这只是一个网站，而不是一个应用程序。我只能使用 HTML、CSS 和 Javascript。没有服务器端代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T23:32:29.147

在您的输入字段上设置`readonly="true"`以阻止 iOS 键盘弹出。确保您只对 iOS 设备执行此操作，否则其他设备上的用户将无法与您的表单交互。

# blogengine.net - BlogEngine 语法荧光笔被 CoolBlue 主题破坏

> ID：14594049
> 
> 赞同：1
> 
> 时间：2013-01-29T23:31:09.117
> 
> 标签：blogengine.net, syntaxhighlighter

我最近安装了新的 BlogEngine 2.7 副本。我一直在尝试添加一个带有一些 c# 代码的新帖子，我想`Syntax Highlighter`在我的帖子中使用扩展。这是我的代码：

```
<pre class="brush: c-sharp;">
using System;
</pre> 
```

但即使添加如此简单的 c# 语句也会导致我帖子中的代码看起来格式不正确：

![在此处输入图像描述](../Images/d17b5906d1b5a172bfef02b2e5a407e3.png)

想象一下它在使用大量代码时的样子。

我尝试了许多不同的事情（下载不同版本的扩展程序和人们的修复程序）但没有任何成功。我正在使用 CoolBlue 主题，我认为这是导致此问题的原因。

你们中有人遇到过这个问题吗？你能指导我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T19:30:47.470

我能够在本地重现它并将问题追踪到coolblue.css。

如果您仍想修复它，请修改 coolblue.css 并将以下行添加到文件末尾：

```
.syntaxhighlighter code {
    display: inline-block;
} 
```

这会将位于语法荧光笔内的代码元素重置为内联元素。

# sql - SQL Server 交叉应用速度问题

> ID：14594050
> 
> 赞同：0
> 
> 时间：2013-01-29T23:31:08.990
> 
> 标签：sql, sql-server, sql-server-2012

我在单独的服务器上有两个视图，我将它们合并到一个视图中。

这是我的查询：

```
SELECT *
FROM
(
 SELECT v1.Name COLLATE DATABASE_DEFAULT as Name, v1.Year as Year
 FROM AgentCallsByMonth v1
 UNION
 SELECT v2.Name as Name, v2.Year as Year
 FROM BH1PCIMD01.eGActiveDB.dbo.AgentChatsByMonth v2
 ) as u CROSS APPLY (
              SELECT       
                     ISNULL(v1.[Month],v2.[Month]) as [Month],
                     ISNULL(v2.[Chats], 0) AS [Chats], ISNULL(v1.[Calls], 0) AS [Calls]               
              FROM master..spt_values v 
                LEFT JOIN AgentCallsByMonth v1 ON v.number = v1.[MM] AND v1.Name = u.Name and v1.Year=u.Year
                LEFT JOIN BH1PCIMD01.eGActiveDB.dbo.AgentChatCountByMonth v2 ON v.number = v2.[MM] AND v2.Name = u.Name and v2.Year=u.Year
              WHERE v.type = 'P' AND v.number < 12 and u.Year = 2012
              ) o 
```

出于某种原因，这将永远持续下去。如果我单独从表中提取数据，则只需不到 30 秒。上述查询的最后一次运行是 24 分钟并且还在计数。

关于需要发生什么的一点背景。

我有两个表，它们有一个用户名、00-mon 格式的月份和一个计数。现在有些月份是空的，因为用户没有任何计数项目，因此它们不会填充。因此，我们正在创建月份并将 0 放入其中。但是，在另一张表中，他们可以计数一个月的某些项目，而在另一张表中却没有计数。

例如。

**表格1**

```
JoeUser 01-Jan 48
JoeUser 03-Mar 12
JoeUser 09-Sep 3 
```

**表 2**

```
JoeUser 01-Jan 12
JoeUser 02-Feb 4
JoeUser 05-May 6 
```

这是结果输出：

```
JoeUser 01-Jan 48 12
JoeUser 02-Feb 0 4
JoeUser 03-Mar 12 0
JoeUser 04-Apr 0 0
JoeUser 05-May 0 6
JoeUser 06-June 0 0
etc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:22:10.263

我同意我之前的所有评论，但我应该指出的其他一点是使用“COLLATE DATABASE_DEFAULT”添加排序规则 - 很可能会导致速度变慢，特别是如果你的表相当大。请记住，它必须对返回的每一行执行此操作。

# git - 从 git format-patch 上传到 ReviewBoard 失败，原因是“在存储库中找不到文件”

> ID：14594051
> 
> 赞同：3
> 
> 时间：2013-01-29T23:31:13.883
> 
> 标签：git, review-board, format-patch

`The file “&lt;file>” (revision <revision>) was not found in the repository`有没有人在使用 ReviewBoard GUI 时看到投诉？

例如，我 `The file "agent/src/com/cloud/agent/resource/HypervResource.java" (revision 8b8e89d) was not found in the repository`在上传使用`git format-patch`.

但是，该文件是我的差异的一部分，并且从未在我的补丁引用的 git 存储库中。

背景是我为master分支创建了一个补丁。例如

`$ git format-patch origin/master --stdout > ../hyperV-plugin.patch`

补丁本身描述了文件的创建，应用索引 8b8e89d，如下所示。

```
1.7.9

From 13f9c118c724afb52b0694de539b4e1b3c38e7f7 Mon Sep 17 00:00:00 2001
From: "U-CC-SVR11\\Administrator" <Administrator@CC-SVR11.(none)>
Date: Thu, 15 Nov 2012 19:19:08 +0000
Subject: [PATCH 07/96] Starting point for ServerResource for Hyper-V is DummyResource.

---
.../com/cloud/agent/resource/HypervResource.java   |  227
++++++++++++++++++++
1 files changed, 227 insertions(+), 0 deletions(-) create mode 100755 agent/src/com/cloud/agent/resource/HypervResource.java

diff --git a/agent/src/com/cloud/agent/resource/HypervResource.java
b/agent/src/com/cloud/agent/resource/HypervResource.java
new file mode 100755
index 0000000..8b8e89d
--- /dev/null
+++ b/agent/src/com/cloud/agent/resource/HypervResource.java
@@ -0,0 +1,227 @@
+// Licensed to the Apache Software Foundation (ASF) under one // or 
+more contributor license agreements.  See the NOTICE file // 
+distributed with this work for additional information // regarding 
+copyright ownership.  The ASF licenses this file // to you under the 
+Apache License, Version 2.0 (the // "License"); you may not use this 
+file except in compliance // with the License.  You may obtain a copy 
+of the License at 
```

稍后，当文件被编辑时，文件索引会发生变化。例如

```
1.7.9

From fef4e3f291264224ed1430b3dff1e49bea7930c9 Mon Sep 17 00:00:00 2001
From: "U-CC-SVR11\\Administrator" <Administrator@CC-SVR11.(none)>
Date: Mon, 19 Nov 2012 15:41:26 +0000
Subject: [PATCH 09/96] Add min messages for host to register with the management server when it starts up.

---
.../com/cloud/agent/resource/HypervResource.java   |  200
++++++++++++++++++-
1 files changed, 189 insertions(+), 11 deletions(-)

diff --git a/agent/src/com/cloud/agent/resource/HypervResource.java
b/agent/src/com/cloud/agent/resource/HypervResource.java
index 8b8e89d..e810ce4 100755
--- a/agent/src/com/cloud/agent/resource/HypervResource.java
+++ b/agent/src/com/cloud/agent/resource/HypervResource.java
@@ -20,14 +20,15 @@ import java.util.ArrayList; import java.util.HashMap; import java.util.List; import java.util.Map;
+import java.util.Set;
import java.util.UUID; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T23:31:13.883

在我有机会提交上述问题之前，我想出了答案。由于答案不明显，我将在此处发布：

**对于多提交补丁，通过“post-review”而不是 ReviewBoard GUI 创建。**

问题在于添加一个聚合一堆补丁的差异文件。就我而言，我有大约 97 次提交。为每个提交生成一个补丁会`git format-patch -s master`为您提供 97 个不同的补丁来查看，这是无法管理的。Apache 建议将补丁转储到单个文件中`git format-patch master --stdout > ~/patch-name.patch`（请参阅[以非提交者的身份为 Apache CloudStack 做出贡献](http://incubator.apache.org/cloudstack/develop/non-contributors.html)）不幸的是，当一个补丁依赖于另一个补丁时，这会导致问题。

为避免这些问题，请通过 RBTools 中的命令将提交作为单个补丁提交`post-review`（查看板工具，请参阅[安装说明](http://www.reviewboard.org/docs/manual/dev/users/tools/post-review/)。安装 RBTools 后，验证您的本地 git repo 的源/主服务器正在跟踪代码合并的目标。例如

```
$ git remote -v
origin  https://git-wip-us.apache.org/repos/asf/incubator-cloudstack.git (fetch)
origin  https://git-wip-us.apache.org/repos/asf/incubator-cloudstack.git (push) 
```

另外，设定目标审查委员会。例如，要为 repo 设置，请在 repo 的根文件夹中使用以下命令。

```
git config reviewboard.url https://reviews.apache.org 
```

从本地 git 存储库的根目录中，只需调用`post-review`. 它将汇总本地 repo 中的 HEAD 和 origin/master 之间的更改，创建评论并返回 URL。然后，您使用浏览器充实评论/摘要/组。

享受！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-19T09:28:54.593

就我而言，可能是 RB 没有正确呈现真正的问题。`fake`您可以一一解决这些问题。最后你会看到真正的问题。

就我而言，真正的问题是：

```
(1153, "Got a packet bigger than 'max_allowed_packet' bytes") 
```

您不能将大文件（如 6MB）发布到 RB

# mysql - 重新索引目录上的 Magento 和错误 1452（违反完整性约束）

> ID：14594063
> 
> 赞同：3
> 
> 时间：2013-01-29T23:31:45.723
> 
> 标签：mysql, magento

Magento 拒绝重新索引我的产品目录。它正在记录此错误：

```
2013-01-29T23:24:51+00:00 DEBUG (7): Exception message: SQLSTATE[23000]: 
Integrity constraint violation: 1452 Cannot add or update a child row: 
a foreign key constraint fails (`cjsquash_mgnt1`.`catalog_category_product_index`, 
CONSTRAINT `FK_CAT_CTGR_PRD_IDX_CTGR_ID_CAT_CTGR_ENTT_ENTT_ID` FOREIGN KEY (`category_id`) REFERENCES `catalog_category_entity` (`entity_id`)) 
```

我认为这意味着 catalog_category_product_index 中有一个无效行，并且 catalog_category_entity 表中缺少一个值，但我运行了这个查询：

```
SELECT *
FROM catalog_category_product_index
where category_id not in (select entity_id from 
catalog_category_entity) 
```

它返回 0 行，因此情况似乎并非如此。我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T09:06:22.127

在考虑了更多之后，我自己弄清楚了这一点 - 问题来自索引过程，希望在 product_id 或 category_id 不存在的 catalog_category_product_index 表中插入一行。这就是导致违规的原因。

如果此步骤中的索引处理失败随后会运行查询以识别导致问题的行，那就太好了，但在此之前，您可以运行这两个查询，这将告诉您哪个 product_id 或 category_id 导致了问题。这两个查询都应该返回 0 条记录。如果他们返回记录，您将确切知道哪个产品属于不存在的类别或哪个类别具有不存在的产品。你可以

```
SELECT * FROM `catalog_category_product` WHERE 
product_id not in (select entity_id from catalog_product_entity)

SELECT * FROM `catalog_category_product` WHERE 
category_id not in (select entity_id from catalog_category_entity) 
```

然后，您可以删除有问题的行，或者更加谨慎，编辑有问题的产品或类别并重新保存其类别或产品，以便将良好的数据放入问题表中。然后索引将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-22T09:43:02.850

首先**创建一个备份**。

一个根本的解决方法是删除所有这些错误的引用：

```
Delete FROM `catalog_category_product` 
WHERE product_id not in (select entity_id from catalog_product_entity) 
  OR category_id not in (select entity_id from catalog_category_entity); 
```

为我工作，但可能会为你破坏一些产品。

# javascript - 在 beforeSend 之后调用 JQuery Ajax 成功函数

> ID：14594068
> 
> 赞同：4
> 
> 时间：2013-01-29T23:32:03.003
> 
> 标签：javascript, jquery, ajax, blockui

我有以下 javascript：

```
function someFunction(string) {
    $.ajax({
        type: "GET",
        url: "some_endpoint_returning_json",
        async: false,
        data: "param=" + string,
        beforeSend: function() {
            $.blockUI({ message: '<h1><img src="static/busy.gif" /> Just a moment...</h1>' });
        },
        complete: function () {
            $.unblockUI();
         },
        dataType: "json",
        success: function(data) {
            window.alert(data.status);
        }
    });
} 
```

我希望 UI 在发送 ajax 请求之前阻止包含的消息，然后删除消息，取消阻止 ui，然后执行成功功能。

目前这是正在发生的事情：

1.  UI 阻塞，但不显示消息
2.  弹出成功窗口提示
3.  确认警报窗口后，会弹出 BlockUI 消息一瞬间，然后 UI 解除阻塞，页面返回其初始状态

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T00:28:12.207

如果设置`async`为`false`，浏览器将在提供 ajax 请求时停止执行所有内容。尽管`beforeSend`确实在发送 ajax 请求之前执行，但同步请求可能会发生得太快，以至于浏览器实际上并没有刷新屏幕并显示您的`$.blockUI`更改。在 ajax 完成后（当它们立即被删除时），您确实可以在很短的时间内看到它们。

如果您*必须*使用异步，您可以通过`$.blockUI`单独调用并在启动 ajax 请求之前设置一个短暂的超时（可能为 100 毫秒）来解决这个问题。

# sql-server - 使用 BULK INSERT 命令将 CSV 文件导入 SQL Server 表

> ID：14594072
> 
> 赞同：2
> 
> 时间：2013-01-29T23:32:25.090
> 
> 标签：sql-server, insert, bulk

我有 CSV 文件，其中有几个数据列。

CSV 文件看起来像

> 字段 1：测试 1
> 字段 2：测试 2
> 字段 3：测试 3、测试 4、测试 5

在这种情况下，我可以使用哪个库作为字段终止符我的意思是如果我使用此查询将 CSV 文件插入`shopifyitem`表中，因为您假设插入的数据字段不正确

```
BULK INSERT shopifyitem
FROM 'c:\test.csv'
WITH
(
   FIELDTERMINATOR = ',',
   ROWTERMINATOR = '\n'
) 
```

那么我可以使用哪个*字段终止符*？

非常感谢您提前......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-16T12:39:08.977

尝试使用：
`ROWTERMINATOR = '0x0a'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T03:04:13.907

我认为如果没有某种类型的预处理，您将无法导入该格式。正如 Aaron 暗示的那样，这不是标准的 CSV。

如果您无法重新格式化文件，有几种方法可以将数据转换为可导入的格式：

[http://www.timmitchell.net/post/2013/01/14/ragged-flat-file-processing-in-ssis/](http://www.timmitchell.net/post/2013/01/14/ragged-flat-file-processing-in-ssis/)

[http://www.rad.pasfu.com/index.php?/archives/38-Script-Component-as-Source-SSIS.html](http://www.rad.pasfu.com/index.php?/archives/38-Script-Component-as-Source-SSIS.html)

[http://msdn.microsoft.com/en-us/library/ms136060.aspx](http://msdn.microsoft.com/en-us/library/ms136060.aspx)（向下滚动到“平面文件源示例”）

这些都是利用 .NET 完成大部分工作的 SSIS 解决方案。我更喜欢 SSIS 仅仅是因为内置的生产力工具。它可以使用任何文本处理器来完成，例如控制台应用程序或 powershell 脚本（如果您真的有时间的话）。

我更喜欢带有流阅读器的脚本组件源，但 Tim Mitchell 有一个有趣的替代方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-17T12:09:09.550

这是将文本或 csv 文件导入数据库的代码：

```
String SQL = "BULK INSERT [staging_db].[dbo].[TEST] FROM 'D:\\test.txt' WITH (FIELDTERMINATOR = ',',ROWTERMINATOR = '\n')"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-30T04:24:04.217

```
using System;
using System.Data;
using System.Data.SqlClient;

namespace SqlBulkInsertExample
{
    class Program
    {
      static void Main(string[] args)
        {
            DataTable prodSalesData = new DataTable("ProductSalesData");

            // Create Column 1: SaleDate
            DataColumn dateColumn = new DataColumn();
            dateColumn.DataType = Type.GetType("System.DateTime");
            dateColumn.ColumnName = "SaleDate";

            // Create Column 2: ProductName
            DataColumn productNameColumn = new DataColumn();
            productNameColumn.ColumnName = "ProductName";

            // Create Column 3: TotalSales
            DataColumn totalSalesColumn = new DataColumn();
            totalSalesColumn.DataType = Type.GetType("System.Int32");
            totalSalesColumn.ColumnName = "TotalSales";

            // Add the columns to the ProductSalesData DataTable
            prodSalesData.Columns.Add(dateColumn);
            prodSalesData.Columns.Add(productNameColumn);
            prodSalesData.Columns.Add(totalSalesColumn);

            // Let's populate the datatable with our stats.
            // You can add as many rows as you want here!

            // Create a new row
            DataRow dailyProductSalesRow = prodSalesData.NewRow();
            dailyProductSalesRow["SaleDate"] = DateTime.Now.Date;
            dailyProductSalesRow["ProductName"] = "Nike";
            dailyProductSalesRow["TotalSales"] = 10;

            // Add the row to the ProductSalesData DataTable
            prodSalesData.Rows.Add(dailyProductSalesRow);

            // Copy the DataTable to SQL Server using SqlBulkCopy
            using (SqlConnection dbConnection = new SqlConnection("Data Source=ProductHost;Initial Catalog=dbProduct;Integrated Security=SSPI;Connection Timeout=60;Min Pool Size=2;Max Pool Size=20;"))
            {
                dbConnection.Open();
                using (SqlBulkCopy s = new SqlBulkCopy(dbConnection))
                {
                    s.DestinationTableName = prodSalesData.TableName;

                    foreach (var column in prodSalesData.Columns)
                        s.ColumnMappings.Add(column.ToString(), column.ToString());

                    s.WriteToServer(prodSalesData);
                }
            }
        }
    }
} 
```

# emacs - 为scala配置emacs错误

> ID：14594080
> 
> 赞同：0
> 
> 时间：2013-01-29T23:33:08.240
> 
> 标签：emacs, elisp

我按照[http://jawher.net/2011/01/17/scala-development-environment-emacs-sbt-ensime/](http://jawher.net/2011/01/17/scala-development-environment-emacs-sbt-ensime/)中的过程为 scala 配置 emacs。

但是，我遇到了一个问题

```
(require 'scala-mode) 
```

因为在 scala-emacs/scala-mode-constants.el 中，它正在引用

```
(let* ((charmap (make-char-table 'case-table)) 
```

它抱怨`unrecognized char table type: case-table`

我想知道是否有人可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:03:21.527

我的猜测是您使用的是 XEmacs，而 Scala 模式代码仅适用于 Emacs。

# php - 无需登录即可显示公开 Facebook 帖子流

> ID：14594088
> 
> 赞同：2
> 
> 时间：2013-01-29T23:33:55.897
> 
> 标签：php, facebook, facebook-graph-api, authentication

我正在建立一个网站，我想从我的公共 Facebook 页面显示一个简单的帖子列表。我使用 GraphAPI 并在服务器端格式化了数据，但后来我的访问令牌过期了。

现在我完全迷路了。似乎没有办法轻松创建新的访问令牌。这可能是真的吗？为什么仅仅查看公共页面的帖子会受到限制？不仅如此，即使我愿意为我的网页使用预先构建的 facebook 应用程序，他们似乎也没有任何东西可以显示来自你墙上的流。

提前感谢您可能需要恢复我的理智的任何澄清。

****编辑****

显然这个问题比我一开始想的要深一些。*我不是在构建应用程序*。我只想在网页上创建一个相当基本的单个用户帖子列表。真的没有简单的非应用程序方法可以做到这一点吗？对于这样一个简单的项目，学习 facebook 的服务器端身份验证流程似乎有点吓人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T23:39:42.213

看看这个页面：操作方法：处理过期的访问令牌[https://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/](https://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/)

**编辑：**

我认为这应该回答你的问题： http: [//facebook.stackoverflow.com/questions/9663700/how-to-show-facebook-feed-messages-from-my-site/9663836#9663836](http://facebook.stackoverflow.com/questions/9663700/how-to-show-facebook-feed-messages-from-my-site/9663836#9663836)

通过玩这个，我可以看到注销会破坏您的访问令牌，您可以在再次登录时创建一个新的。看起来 Graph API Explore 是为学习 Graph API 而设计的。如果您想要一个持续存在的访问令牌，我认为您将需要制作一个 Facebook 应用程序，即使这些应用程序会在一段时间后过期并需要刷新（简单过程）。

不确定您如何尝试在您的网站上显示帖子，但 Facebook Likebox 或 Activity Feed 可能会达到您想要的效果。[http://developers.facebook.com/docs/plugins/](http://developers.facebook.com/docs/plugins/)

您也可以尝试使用 simpleXML 来解析您的页面：[http ://www.php.net/manual/en/simplexml.examples-basic.php](http://www.php.net/manual/en/simplexml.examples-basic.php)

# algorithm - 如何找到此块的 theta 符号？

> ID：14594089
> 
> 赞同：2
> 
> 时间：2013-01-29T23:33:57.647
> 
> 标签：algorithm, math, big-o, notation, big-theta

该块是：

```
 i=2  
    while(i<n){  
        i=i*i;  
        x=x+1;  
    } 
```

我需要找到 x=x+1 执行次数的 theta 符号。我创建了一个包含一些示例值的表格，但我不知道如何从那里继续前进。这是我的示例值：

```
(n) - (# times looped)  
  3 - 1  
  5 - 2  
 20 - 3  
400 - 4 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T00:18:19.810

考虑这一点的一种方法是跟踪循环中 i 的值。在第一次迭代之前，该值为 2 = 2 ¹。在第二次迭代之后，它是 4 = 2 ²。第三次迭代后，它是 16 = 2 ⁴。在第四次迭代之后，它是 256 = 2 ⁸。在第五个之后，它是 65,536 = 2 ^(16)。

如您所见，经过 k 次循环迭代后， i 的值为 2 ^(2 ^k)。这意味着迭代次数将（大致）对应于 k 的最小值，使得

> 2 ^(2 ^k) ≥ n

两边取对数两次，我们得到

> 2 ^(2 ^k) ≥ n
> 
> 2 ^k ≥ 对数[2] n
> 
> k ≥ log [2] log [2] n

所以循环迭代的次数大致是log [2] log [2] n。因此，循环运行 O(log log n) 次。更准确地说，循环运行 Θ(log log n) 次，因为循环在 k 次迭代结束之前不会停止。

希望这可以帮助！

# ruby - 为什么 Bundler 安装了错误的 gem 版本？

> ID：14594093
> 
> 赞同：1
> 
> 时间：2013-01-29T23:34:23.017
> 
> 标签：ruby, bundler

我正在尝试`composite_primary_keys`使用 Bundler 安装 gem 的自定义版本，该版本根据版本进行了一些我们需要的更改`2.2.2`。我们的 gem 版本是`2.2.2.0`并且托管在我们的内部 gem 服务器上（这个 4 位版本控制方案仅存在于我们的内部 gem 服务器上）。应用程序要求我们使用 jruby-1.6.7 ( `RUBY_VERSION`= 1.8.7)、RubyGems 版本 ( `gem -v`) 1.3.6 和 Bundler 的最新稳定版本 1.2.3。

无论如何，我的 Gemfile 看起来像这样：

```
source 'http://rubygems.org'
source 'http://gems.internal'

gem 'composite_primary_keys', '2.2.2.0'
gem 'hoe',                    '1.8.3' 
```

执行`bundle`输出：

```
$ bundle
Fetching gem metadata from http://rubygems.org/........
Fetching gem metadata from http://gems.internal/...
Installing rake (10.0.3) 
Installing i18n (0.6.1) 
Installing multi_json (1.5.0) 
Installing activesupport (3.2.11) 
Installing builder (3.0.4) 
Installing activemodel (3.2.11) 
Installing arel (3.0.2) 
Installing tzinfo (0.3.35) 
Installing activerecord (3.2.11) 
Installing json_pure (1.7.6) 
Installing rubyforge (2.0.4) 
Installing hoe (1.8.3) 
Installing composite_primary_keys (2.2.2) 
Using bundler (1.2.3) 
Your bundle is complete! Use `bundle show [gemname]` to see where a bundled gem is installed. 
```

如您所见，`composite_primary_keys`实际安装的是 2.2.2，而不是 2.2.2.0。这是生成的 Gemfile.lock：

```
GEM
  remote: http://rubygems.org/
  remote: http://gems.internal/
  specs:
    activemodel (3.2.11)
      activesupport (= 3.2.11)
      builder (~> 3.0.0)
    activerecord (3.2.11)
      activemodel (= 3.2.11)
      activesupport (= 3.2.11)
      arel (~> 3.0.2)
      tzinfo (~> 0.3.29)
    activesupport (3.2.11)
      i18n (~> 0.6)
      multi_json (~> 1.0)
    arel (3.0.2)
    builder (3.0.4)
    composite_primary_keys (2.2.2)
      activerecord (>= 2.2.0)
      hoe (>= 1.8.3)
    hoe (1.8.3)
      rake (>= 0.8.3)
      rubyforge (>= 1.0.2)
    i18n (0.6.1)
    json_pure (1.7.6)
    multi_json (1.5.0)
    rake (10.0.3)
    rubyforge (2.0.4)
      json_pure (>= 1.1.7)
    tzinfo (0.3.35)

PLATFORMS
  java

DEPENDENCIES
  composite_primary_keys (= 2.2.2.0)
  hoe (= 1.8.3) 
```

现在，如果我手动卸载`composite_primary_keys`并安装我的版本：

```
$ gem uninstall composite_primary_keys
Successfully uninstalled composite_primary_keys-2.2.2
$ gem install composite_primary_keys -v 2.2.2.0
Successfully installed composite_primary_keys-2.2.2.0
1 gem installed
Installing ri documentation for composite_primary_keys-2.2.2.0...
Installing RDoc documentation for composite_primary_keys-2.2.2.0... 
```

然后执行`bundle`：

```
$ bundle        
Using rake (10.0.3) 
Using i18n (0.6.1) 
Using multi_json (1.5.0) 
Using activesupport (3.2.11) 
Using builder (3.0.4) 
Using activemodel (3.2.11) 
Using arel (3.0.2) 
Using tzinfo (0.3.35) 
Using activerecord (3.2.11) 
Using composite_primary_keys (2.2.2.0) 
Using json_pure (1.7.6) 
Using rubyforge (2.0.4) 
Using hoe (1.8.3) 
Using bundler (1.2.3) 
Your bundle is complete! Use `bundle show [gemname]` to see where a bundled gem is installed. 
```

它保留了我的自定义宝石。此时运行 bundle update 会更新`Gemfile.lock`：

```
$ bundle update composite_primary_keys
Fetching gem metadata from http://rubygems.org/........
Fetching gem metadata from http://gems.internal/...
Using rake (10.0.3) 
Using i18n (0.6.1) 
Using multi_json (1.5.0) 
Using activesupport (3.2.11) 
Using builder (3.0.4) 
Using activemodel (3.2.11) 
Using arel (3.0.2) 
Using tzinfo (0.3.35) 
Using activerecord (3.2.11) 
Using composite_primary_keys (2.2.2.0) 
Using json_pure (1.7.6) 
Using rubyforge (2.0.4) 
Using hoe (1.8.3) 
Using bundler (1.2.3) 
Your bundle is updated! Use `bundle show [gemname]` to see where a bundled gem is installed. 
```

Gemfile.lock 现在看起来像这样：

```
GEM
  remote: http://rubygems.org/
  remote: http://gems.internal/
  specs:
    activemodel (3.2.11)
      activesupport (= 3.2.11)
      builder (~> 3.0.0)
    activerecord (3.2.11)
      activemodel (= 3.2.11)
      activesupport (= 3.2.11)
      arel (~> 3.0.2)
      tzinfo (~> 0.3.29)
    activesupport (3.2.11)
      i18n (~> 0.6)
      multi_json (~> 1.0)
    arel (3.0.2)
    builder (3.0.4)
    composite_primary_keys (2.2.2.0)
      activerecord (>= 2.2.0)
    hoe (1.8.3)
      rake (>= 0.8.3)
      rubyforge (>= 1.0.2)
    i18n (0.6.1)
    json_pure (1.7.6)
    multi_json (1.5.0)
    rake (10.0.3)
    rubyforge (2.0.4)
      json_pure (>= 1.1.7)
    tzinfo (0.3.35)

PLATFORMS
  java

DEPENDENCIES
  composite_primary_keys (= 2.2.2.0)
  hoe (= 1.8.3) 
```

# 我猜

我的怀疑是 Bundler 以某种方式依赖于 RubyGems 如何实现 <=> 运算符...

```
require 'rubygems'
Gem::Version.new('2.2.2') <=> Gem::Version.new('2.2.2.0') # => 0
Gem::Version.new('2.2.2') == Gem::Version.new('2.2.2.0') # => true 
```

任何人都可以确认吗？这是预期的行为吗？如果版本号丢失一个数字，这是否是避免次要版本号为 0 的一个很好的论据？例如

```
Gem::Version.new('2') == Gem::Version.new('2.0.0.0.0.0.0.0.0') # => true 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T00:33:52.873

尽管这并不能直接回答您的问题。过去我遇到过类似的问题，最终使自定义 gem 成为另一个 gem 的扩展。即修补“my-awesome-gem”中的功能，您可以将其称为“my-awesome-gem-custom”或类似名称。相信我，你要走的路充满了依赖噩梦。:)

一个注意事项是要注意扩展 gem 所需的[自定义 Gem 命名](http://guides.rubygems.org/patterns/#consistent-naming)的差异，因为它们略有不同。“要求 /x/y/z”与“要求 x_y_z”。这样做应该允许您根据需要使用 Ruby 的开放类来分层或覆盖功能。

# macos - 如何让BOINC循环活跃项目

> ID：14594100
> 
> 赞同：0
> 
> 时间：2013-01-29T23:35:09.413
> 
> 标签：macos, distributed-computing, boinc

我在 OSX 上安装了 BOINC 管理器，并且订阅了 3 个项目

有没有办法安排 BOINC 经理在每个项目的特定时间后在这些项目之间循环？

PS：它不一定是 BOINC 管理器设置。如果也可以从命令行执行此操作，我很好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-29T22:24:49.060

BOINC 调度器定义了项目之间的资源共享。如果你有三个，那么每个项目的资源份额为 33.33%。这意味着他们的工作将被平等分享。

现在，去

```
tools > computing preferences 
```

你可以选择`Switch between applications every...`

只需定义您想要的任何时间。由于资源份额相等，并且每个项目的工作单位数量相同，因此项目之间的工作时间可能与您在上一个选项中定义的时间相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-23T10:43:00.050

boinccmd 行实用程序应该提供您所追求的控制权，特别是

> --project URL op 项目操作 op=reset | 分离 | 更新 | 暂停 | 简历 | 不再工作 | 允许更多工作 | detach_when_done | dont_detach_when_done

然后，您可以使用例如 cron 来暂停/恢复任务。类型

> crontab -e

假设您在通常的 os x 位置安装了命令行版本，您可以粘贴类似这样的内容（在 cron 上阅读语法）以在 12 时从 worldcommunitygrid 切换到 Rosetta：

> 0 12 * * * cd /Library/Application\ Support/BOINC\ Data/ && boinccmd --project www.worldcommunitygrid.org 暂停 && boinccmd --project boinc.bakerlab.org/rosetta/ resume

希望这能让你开始

# java - Java - 最适合查找最频繁元素的数据结构

> ID：14594102
> 
> 赞同：2
> 
> 时间：2013-01-29T23:35:11.720
> 
> 标签：java, string, data-structures

我的程序包含输出文本（字符串）的算法。最终我想打印出出现次数最多的单词。但在我这样做之前，我需要将它存储在一个数据结构中。所以我想知道什么数据结构是最好的（简单有效的）存储字符串然后能够获得最频繁的元素？我不想使用任何库。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T23:41:00.787

我不认为任何数据结构都能做到这一点，但这就是我的做法。

将每个单词的a 保留`Map<String, Integer>`为遇到它的次数，并在更新地图时跟踪与存储的最大数字相对应的字符串。例如：

```
String maxWord = null;
Integer maxCount = -1;
Map<String, Integer> wordCount = new HashMap<String, Integer>();
for (String str : getMyProgramOutput()) {
  if (!wordCount.containsKey(str)) { wordCount.put(str, 0); }
  int count = wordCount.get(str) + 1;
  if (count > maxCount) {
    maxWord = str;
    maxCount = count;
  }
  wordCount.put(str, count);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T23:47:19.573

你为什么不建立一个最大堆，在每个节点中都有`String`and `integer_occurrence`。获取最频繁的单词，获取堆的根

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T23:39:33.767

创建一个`Map<String, Integer>`. 每次输入`String`增量时`Integer`（您可能必须创建自己的`MutableInteger`类。完成搜索后（或保持运行计数）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T01:01:03.117

您可能要考虑在数据库中使用字典。因为这些数据通常必须保存在物理介质中，以防止系统重启后丢失。在这种情况下，字典很有帮助。您唯一需要做的就是建立一个字典表和其他表来存储频率和定位等信息。

# symfony - 同一页面中的两个表单

> ID：14594103
> 
> 赞同：0
> 
> 时间：2013-01-29T23:35:13.720
> 
> 标签：symfony, symfony-2.1, symfony-forms, fosuserbundle

我正在使用 FOSUserBundle 并试图将编辑配置文件表单和重置密码表单集成到一个页面中。但我失败了！那可能吗 ？

有人能帮助我吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T02:16:20.427

您需要将这两个模板合二为一。复制下面的表格。他们将具有与其表单操作相关联的单独控制器操作。

如果您说您想为两者使用一种形式，那么这将很困难，因为您必须在一个控制器中调用相应的函数

# java - java SingleInstanceService 并不总是有效

> ID：14594104
> 
> 赞同：1
> 
> 时间：2013-01-29T23:35:33.453
> 
> 标签：java, javascript, jnlp, java-web-start, single-instance

我有一个 javafx 应用程序通过网页上的链接从 web start 开始。当我有一个正在运行的实例并尝试打开另一个实例时，SingleInstanceService 工作正常。但是，当没有实例在运行时，我双击网页上的链接或桌面链接，就会启动两个实例。

Windows 7、Java 7 u11

在日志文件中，我可以看到这两个实例在不到 100 毫秒的时间内启动。这是最后一个实例的一些控制台输出：

```
2013-01-29 14:03:17,246 [thread App-1]
 DEBUG App - SingleInstanceService found !

server running at port: 61065

temp: connect to: http://www.test.net/App.jnlp 61065

network: Connecting socket://127.0.0.1:61065 with proxy=DIRECT

temp: no server is running - continue launch!

basic: unique id: http://www.test.net//App.jnlp

basic: server port at: 61109

basic: getSingleInstanceFilename: C:\Users\me\AppData\LocalLow\Sun\Java\Deployment\tmp\si\http___www.test.net_App.jnlp-x86_61109

basic: file should be removed: C:\Users\me\AppData\LocalLow\Sun\Java\Deployment\tmp\si\http___www.test.net_App.jnlp-x86_61065 
```

如您所见，web start 实际上找到了第一个实例的单实例文件，但只是将其删除。

我可以看到，Java 控制面板也使用了这种技术。它还将单个实例文件放置在`C:\Users\me\AppData\LocalLow\Sun\Java\Deployment\tmp\si`

当我在桌面上放置 JCP 的快捷方式时，如果我快速按两次回车键，我可以启动 2 个实例。

这是一个错误吗？我该如何解决？

# c# - 向 KML 添加属性的指南

> ID：14594106
> 
> 赞同：0
> 
> 时间：2013-01-29T23:35:57.783
> 
> 标签：c#, kml, sharpkml

我可以毫无问题地在 KML 中绘制路径。现在我需要用速度和航向来注释顶点。我可以将其视为地标的进展，但在我继续之前，我认为最好看看其他人在这种情况下做了什么。

碰巧我在 C# 中使用 SharpKML，但这是方法问题的附带问题。

那么，推荐？

* * *

嗯，看起来就是这样。地标，如果您不介意供应商扩展，可能还有 gx:Track。

我不确定您是否可以在 gx:Track 中注释各个点，我没有尝试过。尽管如此，杰森还是获得了提交唯一答案的积分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:35:32.303

您应该考虑使用[gx:Track](https://developers.google.com/kml/documentation/kmlreference#gxtrack)作为路径的几何图形，其中速度和高度可以显示在[Elevation profile](http://support.google.com/earth/bin/answer.py?hl=en&answer=181393)中。

在这篇文章中可以找到一个很好的例子：http: [//google-latlong.blogspot.com/2010/06/relive-your-hiking-biking-and-other.html](http://google-latlong.blogspot.com/2010/06/relive-your-hiking-biking-and-other.html)

对于每个顶点，您都有一个时间-位置对，其中*time*为 time ，位置为*gx:coord*。您还可以使用带有*gx:SimpleArrayData的**ExtendedData*元素在每个时间-位置对添加自定义元数据。请参阅ExtendedData 的[跟踪示例](https://developers.google.com/kml/documentation/kmlreference#trackexample)。

 *```
 <gx:SimpleArrayData name="cadence">
            <gx:value>86</gx:value>
            <gx:value>103</gx:value>
            <gx:value>108</gx:value>
            <gx:value>113</gx:value>
            <gx:value>113</gx:value>
            <gx:value>113</gx:value>
            <gx:value>113</gx:value>
          </gx:SimpleArrayData> 
```

如果您使用轨道图标样式，则在为路径设置动画时，标题会动态地指向当前标题。

更新：正如彼得评论的那样，使用 gx: 命名空间是一个谷歌扩展，它适用于谷歌产品，但 KML 可能无法像预期的那样适用于非谷歌产品。*

# ruby-on-rails - 使用 koala、Ruby on Rails 发布到 Facebook 上的朋友墙

> ID：14594107
> 
> 赞同：1
> 
> 时间：2013-01-29T23:36:01.823
> 
> 标签：ruby-on-rails, facebook, facebook-oauth, facebook-wall, koala

我正在尝试代表使用 koala gem 的用户发布到人墙（用户的朋友）。

我配置了publish_stream权限，可以发布到用户墙，但是当我尝试发布到朋友墙时，像这样

`@graph.put_wall_post("testing this posting on wall!", {:name => "..."}, "id")`

我收到一个错误

`OAuthException, code: 200, message: (#200) The user hasn't authorized the application to perform this action [HTTP 403]`

我错过了什么？提前致谢。

# gradle - 覆盖主项目生成输出目录

> ID：14594113
> 
> 赞同：0
> 
> 时间：2013-01-29T23:36:20.063
> 
> 标签：gradle

在 gradle 中，如果我有一个主项目和两个子项目，我可以让主项目根本不生成输出目录吗？我已经覆盖了它，所以没有 .classpath 和 .project 生成，因为主项目从来都不是 Eclipse 项目（这使得将 5 个项目导入 ecipse 非常容易，因为您只需单击主项目而不是导入哪个自动导入 5 个子项目，但是仅当 master 中不存在 .classpath/.project 时）。

我的完整 gradle 构建文件在这篇文章中

[https://stackoverflow.com/questions/14594074/gradle-command-line-ordering-not-working-in-this-case-or-source-dirs-being-ignor](https://stackoverflow.com/questions/14594074/gradle-command-line-ordering-not-working-in-this-case-or-source-dirs-being-ignor)

目前，除了“输出/库”中的清单之外，gradle 生成一个非常空的 jar（我覆盖了构建目录，因为我们有一个名称为 build 的文件冲突）。

谢谢，院长

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:20:10.017

听起来您可能正在将`java`插件应用到根项目（例如通过`allprojects { ... }`. 如果根项目没有任何 Java 代码，您应该只将插件应用到`subprojects { ... }`.

# java - 在 CMD（格式化的 txt）java 中从 .txt 读取 INT

> ID：14594115
> 
> 赞同：-4
> 
> 时间：2013-01-29T23:36:25.717
> 
> 标签：java

我必须为一个项目编写一个程序。该程序本身运行良好。但我有一个额外的要求：

程序需要通过控制台通过 java MyProgramm input.txt 2 3 打开（这是一个示例输入语句，其中输入是一个 txt 文件，其中包含一个数字，后跟两个数字对（整数）。对由分隔换行符，对的数量用空格分隔）。

我需要将这些数字读入一个 int 和一个 int array[][] 和两个 int。

我怎样才能做到这一点？我已经解决了一个类似的问题，其中所有数字都在一个新行上单个整数。但在这里我被困住了。

这里有一些解决方案，但似乎没有一个适合我的具体问题！？

谢谢，戴夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T23:42:08.223

[http://docs.oracle.com/javase/7/docs/api/java/lang/String.html](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html)

退房，`String.split();`你可以使用类似的东西：

```
String[] str = inputLine.split(","); 
```

以上将用逗号分隔传入的行并将它们放入字符串数组中。这不是答案，但类似。

# actionscript-3 - 空中移动应用屏幕滚动内容

> ID：14594116
> 
> 赞同：1
> 
> 时间：2013-01-29T23:36:52.337
> 
> 标签：actionscript-3, air

我正在使用 AS3、Starling 和 Feathers UI 构建一个移动应用程序（iOS 和 Android）。

一切都很好，布局也适合 iPad。我现在要求该应用程序支持 iPhone，并且界面有点紧凑，所以我希望屏幕能够滚动以显示整个页面。

不过，我有一个包含后退按钮、附加信息等的标题类和一个包含菜单项的页脚类，以便用户可以浏览。有些页面允许所有信息都适合，但其他页面则不允许（需要某种解释的较长页面）。

我只想（如果可能）让中间内容可滚动并保持页眉和页脚固定。

```
----------------------------
Header - Fixed
----------------------------

Scrollable content here

----------------------------
Footer - Fixed
---------------------------- 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:54:31.883

我刚刚意识到 Feathers UI 包含一个滚动内容组件！

# python - 何时应将属性设为私有并设为只读属性？

> ID：14594120
> 
> 赞同：118
> 
> 时间：2013-01-29T23:37:12.763
> 
> 标签：python, properties, private, readonly

**我不知道什么时候属性应该是私有的以及我是否应该使用`property`.**

我最近读到 setter 和 getter 不是 pythonic，但使用`property`装饰器是可以的。

但是如果我有属性，那不能从类外设置，但可以读取（只读属性）。这个属性是否应该是私有的，我所说的私有是指下划线，就像那样`self._x`？如果是，那么我如何在不使用 getter 的情况下阅读它？我现在唯一知道的方法是写

```
@property
def x(self):
    return self._x 
```

这样我可以读取属性，`obj.x`但我不能设置它`obj.x = 1`，所以没关系。

但是我真的应该关心设置不能设置的对象吗？也许我应该离开它。但是我又不能使用下划线，因为阅读`obj._x`对用户来说很奇怪，所以我应该使用`obj.x`然后用户不知道他不能设置这个属性。

你的观点和做法是什么？

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2013-04-04T13:30:24.703

只要我的两分钱，[Silas Ray](https://stackoverflow.com/users/683020)就在正确的轨道上，但我想添加一个例子。;-)

Python 是一种类型不安全的语言，因此您必须始终信任代码的用户才能像一个合理（明智）的人一样使用代码。

根据[PEP 8](https://www.python.org/dev/peps/pep-0008/#id46)：

> 仅对非公共方法和实例变量使用一个前导下划线。

要在类中拥有“只读”属性，您可以使用装饰，当您这样做时`@property`需要继承才能使用新样式类。`object`

**例子：**

```
>>> class A(object):
...     def __init__(self, a):
...         self._a = a
...
...     @property
...     def a(self):
...         return self._a
... 
>>> a = A('test')
>>> a.a
'test'
>>> a.a = 'pleh'
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: can't set attribute 
```

* * *

## 回答 #2

> 赞同：82
> 
> 时间：2013-01-29T23:42:35.503

一般来说，Python 程序的编写应该假设所有用户都是同意的成年人，因此他们自己有责任正确使用事物。但是，在极少数情况下，可设置属性（例如派生值或从某些静态数据源读取的值）没有意义，仅 getter 属性通常是首选模式。

* * *

## 回答 #3

> 赞同：67
> 
> 时间：2016-09-27T04:31:27.267

这是一种避免假设的方法

> 所有用户都是同意的成年人，因此有责任自己正确使用事物。

### 请在下面查看我的更新

使用`@property`, 非常冗长，例如：

```
 class AClassWithManyAttributes:
        '''refactored to properties'''
        def __init__(a, b, c, d, e ...)
             self._a = a
             self._b = b
             self._c = c
             self.d = d
             self.e = e

        @property
        def a(self):
            return self._a
        @property
        def b(self):
            return self._b
        @property
        def c(self):
            return self._c
        # you get this ... it's long 
```

使用

> 没有下划线：它是一个公共变量。
> 一个下划线：它是一个受保护的变量。
> 两个下划线：它是一个私有变量。

除了最后一个，这是一个约定。如果您真的很努力，您仍然可以使用双下划线访问变量。

### 那么我们该怎么办？我们是否放弃在 Python 中拥有只读属性？

看哪！`read_only_properties`装修师傅来救场！

```
@read_only_properties('readonly', 'forbidden')
class MyClass(object):
    def __init__(self, a, b, c):
        self.readonly = a
        self.forbidden = b
        self.ok = c

m = MyClass(1, 2, 3)
m.ok = 4
# we can re-assign a value to m.ok
# read only access to m.readonly is OK 
print(m.ok, m.readonly) 
print("This worked...")
# this will explode, and raise AttributeError
m.forbidden = 4 
```

你问：

> `read_only_properties`来自哪里？

很高兴你问，这里是[read_only_properties](https://github.com/oz123/oz123.github.com/blob/master/media/uploads/readonly_properties.py)的来源：

```
def read_only_properties(*attrs):

    def class_rebuilder(cls):
        "The class decorator"

        class NewClass(cls):
            "This is the overwritten class"
            def __setattr__(self, name, value):
                if name not in attrs:
                    pass
                elif name not in self.__dict__:
                    pass
                else:
                    raise AttributeError("Can't modify {}".format(name))

                super().__setattr__(name, value)
        return NewClass
    return class_rebuilder 
```

### 更新

没想到这个答案会引起这么多关注。令人惊讶的是它确实如此。这鼓励我创建一个你可以使用的包。

```
$ pip install read-only-properties 
```

在你的 python 外壳中：

```
In [1]: from rop import read_only_properties

In [2]: @read_only_properties('a')
   ...: class Foo:
   ...:     def __init__(self, a, b):
   ...:         self.a = a
   ...:         self.b = b
   ...:         

In [3]: f=Foo('explodes', 'ok-to-overwrite')

In [4]: f.b = 5

In [5]: f.a = 'boom'
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
<ipython-input-5-a5226072b3b4> in <module>()
----> 1 f.a = 'boom'

/home/oznt/.virtualenvs/tracker/lib/python3.5/site-packages/rop.py in __setattr__(self, name, value)
    116                     pass
    117                 else:
--> 118                     raise AttributeError("Can't touch {}".format(name))
    119 
    120                 super().__setattr__(name, value)

AttributeError: Can't touch a 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-01-27T15:07:07.160

这是只读属性的一种稍微不同的方法，可能应该称为一次写入属性，因为它们必须被初始化，不是吗？对于我们当中那些担心能够通过直接访问对象的字典来修改属性的偏执狂，我引入了“极端”的名称修饰：

```
from uuid import uuid4

class ReadOnlyProperty:
    def __init__(self, name):
        self.name = name
        self.dict_name = uuid4().hex
        self.initialized = False

    def __get__(self, instance, cls):
        if instance is None:
            return self
        else:
            return instance.__dict__[self.dict_name]

    def __set__(self, instance, value):
        if self.initialized:
            raise AttributeError("Attempt to modify read-only property '%s'." % self.name)
        instance.__dict__[self.dict_name] = value
        self.initialized = True

class Point:
    x = ReadOnlyProperty('x')
    y = ReadOnlyProperty('y')
    def __init__(self, x, y):
        self.x = x
        self.y = y

if __name__ == '__main__':
    try:
        p = Point(2, 3)
        print(p.x, p.y)
        p.x = 9
    except Exception as e:
        print(e) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-05-21T16:49:22.893

我对创建只读属性的前两个答案不满意，因为第一个解决方案允许删除只读属性然后设置并且不会阻止`__dict__`. 第二种解决方案可以通过测试来解决 - 找到等于您设置的两个值并最终更改它的值。

现在，对于代码。

```
def final(cls):
    clss = cls
    @classmethod
    def __init_subclass__(cls, **kwargs):
        raise TypeError("type '{}' is not an acceptable base type".format(clss.__name__))
    cls.__init_subclass__ = __init_subclass__
    return cls

def methoddefiner(cls, method_name):
    for clss in cls.mro():
        try:
            getattr(clss, method_name)
            return clss
        except(AttributeError):
            pass
    return None

def readonlyattributes(*attrs):
    """Method to create readonly attributes in a class

    Use as a decorator for a class. This function takes in unlimited 
    string arguments for names of readonly attributes and returns a
    function to make the readonly attributes readonly. 

    The original class's __getattribute__, __setattr__, and __delattr__ methods
    are redefined so avoid defining those methods in the decorated class

    You may create setters and deleters for readonly attributes, however
    if they are overwritten by the subclass, they lose access to the readonly
    attributes. 

    Any method which sets or deletes a readonly attribute within
    the class loses access if overwritten by the subclass besides the __new__
    or __init__ constructors.

    This decorator doesn't support subclassing of these classes
    """
    def classrebuilder(cls):
        def __getattribute__(self, name):
            if name == '__dict__':
                    from types import MappingProxyType
                    return MappingProxyType(super(cls, self).__getattribute__('__dict__'))
            return super(cls, self).__getattribute__(name)
        def __setattr__(self, name, value): 
                if name == '__dict__' or name in attrs:
                    import inspect
                    stack = inspect.stack()
                    try:
                        the_class = stack[1][0].f_locals['self'].__class__
                    except(KeyError):
                        the_class = None
                    the_method = stack[1][0].f_code.co_name
                    if the_class != cls: 
                         if methoddefiner(type(self), the_method) != cls:
                            raise AttributeError("Cannot set readonly attribute '{}'".format(name))                        
                return super(cls, self).__setattr__(name, value)
        def __delattr__(self, name):                
                if name == '__dict__' or name in attrs:
                    import inspect
                    stack = inspect.stack()
                    try:
                        the_class = stack[1][0].f_locals['self'].__class__
                    except(KeyError):
                        the_class = None
                    the_method = stack[1][0].f_code.co_name
                    if the_class != cls:
                        if methoddefiner(type(self), the_method) != cls:
                            raise AttributeError("Cannot delete readonly attribute '{}'".format(name))                        
                return super(cls, self).__delattr__(name)
        clss = cls
        cls.__getattribute__ = __getattribute__
        cls.__setattr__ = __setattr__
        cls.__delattr__ = __delattr__
        #This line will be moved when this algorithm will be compatible with inheritance
        cls = final(cls)
        return cls
    return classrebuilder

def setreadonlyattributes(cls, *readonlyattrs):
    return readonlyattributes(*readonlyattrs)(cls)

if __name__ == '__main__':
    #test readonlyattributes only as an indpendent module
    @readonlyattributes('readonlyfield')
    class ReadonlyFieldClass(object):
        def __init__(self, a, b):
            #Prevent initalization of the internal, unmodified PrivateFieldClass
            #External PrivateFieldClass can be initalized
            self.readonlyfield = a
            self.publicfield = b

    attr = None
    def main():
        global attr
        pfi = ReadonlyFieldClass('forbidden', 'changable')
        ###---test publicfield, ensure its mutable---###
        try:
            #get publicfield
            print(pfi.publicfield)
            print('__getattribute__ works')
            #set publicfield
            pfi.publicfield = 'mutable'
            print('__setattr__ seems to work')
            #get previously set publicfield
            print(pfi.publicfield)
            print('__setattr__ definitely works')
            #delete publicfield
            del pfi.publicfield 
            print('__delattr__ seems to work')
            #get publicfield which was supposed to be deleted therefore should raise AttributeError
            print(pfi.publlicfield)
            #publicfield wasn't deleted, raise RuntimeError
            raise RuntimeError('__delattr__ doesn\'t work')
        except(AttributeError):
            print('__delattr__ works')

        try:
            ###---test readonly, make sure its readonly---###
            #get readonlyfield
            print(pfi.readonlyfield)
            print('__getattribute__ works')
            #set readonlyfield, should raise AttributeError
            pfi.readonlyfield = 'readonly'
            #apparently readonlyfield was set, notify user
            raise RuntimeError('__setattr__ doesn\'t work')
        except(AttributeError):
            print('__setattr__ seems to work')
            try:
                #ensure readonlyfield wasn't set
                print(pfi.readonlyfield)
                print('__setattr__ works')
                #delete readonlyfield
                del pfi.readonlyfield
                #readonlyfield was deleted, raise RuntimeError
                raise RuntimeError('__delattr__ doesn\'t work')
            except(AttributeError):
                print('__delattr__ works')
        try:
            print("Dict testing")
            print(pfi.__dict__, type(pfi.__dict__))
            attr = pfi.readonlyfield
            print(attr)
            print("__getattribute__ works")
            if pfi.readonlyfield != 'forbidden':
                print(pfi.readonlyfield)
                raise RuntimeError("__getattr__ doesn't work")
            try:
                pfi.__dict__ = {}
                raise RuntimeError("__setattr__ doesn't work")
            except(AttributeError):
                print("__setattr__ works")
            del pfi.__dict__
            raise RuntimeError("__delattr__ doesn't work")
        except(AttributeError):
            print(pfi.__dict__)
            print("__delattr__ works")
            print("Basic things work")

main() 
```

设置只读属性是没有意义的，除非您编写 **库代码**，将代码分发给其他人作为代码使用以增强他们的程序，而不是用于任何其他目的的代码，例如应用程序开发。`__dict__`问题解决了，因为现在`__dict__`是不可变的`types.MappingProxyType`，所以属性不能通过`__dict__`. 设置或删除`__dict__`也被阻止。更改只读属性的唯一方法是更改​​类本身的方法。

虽然我相信我的解决方案比前两个更好，但它可以改进。这些是这段代码的弱点：

1.  不允许添加到设置或删除只读属性的子类中的方法。子类中定义的方法被自动禁止访问只读属性，即使调用超类的方法版本也是如此。

2.  可以更改类的只读方法以克服只读限制。

但是，没有办法不编辑类来设置或删除只读属性。这不依赖于命名约定，这很好，因为 Python 与命名约定不太一致。这提供了一种方法，可以在不编辑类本身的情况下制作无法通过隐藏漏洞更改的只读属性。当调用装饰器作为参数时，只需列出要只读的属性，它们就会变成只读的。

感谢Brice对获取调用者类和方法[的回答。](https://stackoverflow.com/questions/17065086/how-to-get-the-caller-class-name-inside-a-function-of-another-class-in-python)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-05-21T08:24:50.863

这是我的解决方法。

```
@property
def language(self):
    return self._language
@language.setter
def language(self, value):
    # WORKAROUND to get a "getter-only" behavior
    # set the value only if the attribute does not exist
    try:
        if self.language == value:
            pass
        print("WARNING: Cannot set attribute \'language\'.")
    except AttributeError:
        self._language = value 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-05T09:57:32.000

虽然我喜欢 Oz123 中的类装饰器，但您也可以执行以下操作，它使用显式类包装器和 __new__ 以及在闭包中返回类的类工厂方法：

```
class B(object):
    def __new__(cls, val):
        return cls.factory(val)

@classmethod
def factory(cls, val):
    private = {'var': 'test'}

    class InnerB(object):
        def __init__(self):
            self.variable = val
            pass

        @property
        def var(self):
            return private['var']

    return InnerB() 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-03-10T01:41:06.877

请注意，实例方法也是（类的）属性，如果您真的想成为坏蛋，可以在类或实例级别设置它们。或者您可以设置一个类变量（这也是该类的一个属性），其中方便的只读属性不能开箱即用。我想说的是，“只读属性”问题实际上比通常认为的更普遍。幸运的是，在工作中存在如此强烈的传统期望，以至于我们对这些其他情况视而不见（毕竟，几乎所有东西都是 python 中的某种属性）。

基于这些期望，我认为最通用和最轻量级的方法是采用“公共”（没有前导下划线）属性是只读的约定，除非明确记录为可写。这包含了通常的期望，即方法不会被修补，并且指示实例默认值的类变量更好更不用说。如果您对某些特殊属性感到非常偏执，请使用只读描述符作为最后的资源度量。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-03-20T18:25:13.437

有人提到使用代理对象，我没有看到这样的例子，所以我最终尝试了一下，[糟糕]。

### /!\ 如果可能，请优先使用类定义和类构造函数

这段代码实际上是重写`class.__new__`（类构造函数），但在各方面都更糟。避免痛苦，如果可以的话，不要使用这种模式。

```
def attr_proxy(obj):
    """ Use dynamic class definition to bind obj and proxy_attrs.
        If you can extend the target class constructor that is 
        cleaner, but its not always trivial to do so.
    """
    proxy_attrs = dict()

    class MyObjAttrProxy():
        def __getattr__(self, name):
            if name in proxy_attrs:
                return proxy_attrs[name]  # overloaded

            return getattr(obj, name)  # proxy

        def __setattr__(self, name, value):
            """ note, self is not bound when overloading methods
            """
            proxy_attrs[name] = value

    return MyObjAttrProxy()

myobj = attr_proxy(Object())
setattr(myobj, 'foo_str', 'foo')

def func_bind_obj_as_self(func, self):
    def _method(*args, **kwargs):
        return func(self, *args, **kwargs)
    return _method

def mymethod(self, foo_ct):
    """ self is not bound because we aren't using object __new__
        you can write the __setattr__ method to bind a self 
        argument, or declare your functions dynamically to bind in 
        a static object reference.
    """
    return self.foo_str + foo_ct

setattr(myobj, 'foo', func_bind_obj_as_self(mymethod, myobj)) 
```

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2017-06-22T18:49:56.137

我知道我正在从死里复活这个线程，但我正在研究如何将属性设为只读，在找到这个主题后，我对已经共享的解决方案不满意。

所以，回到最初的问题，如果你从这段代码开始：

```
@property
def x(self):
    return self._x 
```

你想让 X 只读，你可以添加：

```
@x.setter
def x(self, value):
    raise Exception("Member readonly") 
```

然后，如果您运行以下命令：

```
print (x) # Will print whatever X value is
x = 3 # Will raise exception "Member readonly" 
```

# node.js - Express res.sendfile 抛出禁止错误

> ID：14594121
> 
> 赞同：181
> 
> 时间：2013-01-29T23:37:25.073
> 
> 标签：node.js, express

我有这个代码：

```
res.sendfile( '../../temp/index.html' ) 
```

但是，它会引发此错误：

```
Error: Forbidden
at SendStream.error (/Users/Oliver/Development/Personal/Reader/node_modules/express/node_modules/send/lib/send.js:145:16)
at SendStream.pipe (/Users/Oliver/Development/Personal/Reader/node_modules/express/node_modules/send/lib/send.js:307:39)
at ServerResponse.res.sendfile (/Users/Oliver/Development/Personal/Reader/node_modules/express/lib/response.js:339:8)
at exports.boot (/Users/Oliver/Development/Personal/Reader/server/config/routes.js:18:9)
at callbacks (/Users/Oliver/Development/Personal/Reader/node_modules/express/lib/router/index.js:161:37)
at param (/Users/Oliver/Development/Personal/Reader/node_modules/express/lib/router/index.js:135:11)
at pass (/Users/Oliver/Development/Personal/Reader/node_modules/express/lib/router/index.js:142:5)
at Router._dispatch (/Users/Oliver/Development/Personal/Reader/node_modules/express/lib/router/index.js:170:5)
at Object.router (/Users/Oliver/Development/Personal/Reader/node_modules/express/lib/router/index.js:33:10)
at next (/Users/Oliver/Development/Personal/Reader/node_modules/express/node_modules/connect/lib/proto.js:199:15) 
```

谁能告诉我为什么会这样？

* * *

## 回答 #1

> 赞同：321
> 
> 时间：2013-01-29T23:52:21.547

我相信这是因为相对路径；“../”被认为是恶意的。先解析本地路径，再调用`res.sendfile`. `path.resolve`您可以预先解决路径。

```
var path = require('path');
res.sendFile(path.resolve('temp/index.html')); 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2014-03-02T22:01:34.053

这个答案收集了来自其他答案/评论的信息。

这取决于您是否要包含与进程工作目录（cwd）或文件目录相关的内容。两者都使用该`path.resolve`功能（放在`var path = require('path')`文件的顶部。

*   相对于 cwd：`path.resolve('../../some/path/to/file.txt');`
*   相对于文件：`path.resolve(__dirname+'../../some/path/to/file.txt');`

`sendfile('../.ssh/id_rsa')`通过阅读@Joe 评论中的链接，如果您接受用户对路径的输入（例如，可能是黑客的第一次尝试），听起来相对路径会带来安全风险。

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2016-02-09T19:45:27.783

[Express 文档](http://expressjs.com/en/api.html#res.sendFile)建议以不同的方式进行操作，在我看来，它比当前的解决方案更有意义。

`res.sendFile('index.html', {root: './temp'});`

root 选项似乎设置`./`为项目的根目录。因此，我无法完全确定您的文件与项目根目录的关系，但如果您的临时文件夹在那里，您可以将其设置`./temp`为您要发送的文件的根目录。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-05-22T08:59:23.567

此外，您可以使用`path.join`

```
const path = require("path");

router.get("/", (req, res) => {
  let indexPath = path.join(__dirname, "../public/index.html");
  res.sendFile(indexPath);
}); 
```

# iphone - 检测 AVFoundation 相机何时完成对焦

> ID：14594129
> 
> 赞同：10
> 
> 时间：2013-01-29T23:38:14.163
> 
> 标签：iphone, ios, avfoundation

我目前正在使用 AVFoundation 来运行我的相机，但我希望能够检测到相机何时完成对焦。有没有办法做到这一点？

非常感谢！！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T05:00:25.737

根据[文档](http://developer.apple.com/library/mac/#documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/04_MediaCapture.html)

> 您可以使用该`adjustingFocus`属性来确定设备当前是否正在聚焦。您可以观察`key-value observing`用于在设备启动和停止对焦时收到通知的属性。
> 
> 如果您更改对焦模式设置，您可以将它们恢复为默认配置，如下所示：

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-17T11:59:46.193

在初始化中：

```
[[[captureManager videoInput] device] addObserver:self forKeyPath:@"adjustingFocus" options:NSKeyValueObservingOptionNew context:nil]; 
```

进而：

```
bool focusing = false;  
bool finishedFocus = false;
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
    //[super observeValueForKeyPath:keyPath ofObject:object change:change context:context];
    if( [keyPath isEqualToString:@"adjustingFocus"] ){
        BOOL adjustingFocus = [ [change objectForKey:NSKeyValueChangeNewKey] isEqualToNumber:[NSNumber numberWithInt:1] ];

        if (adjustingFocus) {
             focusing=true;
        }
        else {
           if (focusing) {
                focusing = false;
                finishedFocus = true;
           }
        }
    }
} 
```

# sql - 休眠不填充集合但查询匹配

> ID：14594131
> 
> 赞同：1
> 
> 时间：2013-01-29T23:38:38.917
> 
> 标签：sql, hibernate, hibernate-mapping

我在休眠中有一个对象层次结构。我只是通过遍历层次结构来打印层次结构。

在我到达层次结构的底部之前，一切都很好。我有一个 Group 对象，其中包含 Artifact 对象的集合。我通过休眠映射设置为 Group 对象检索一组工件。我在名为 ratio 的列上执行此操作，而不是 id 列。Group 对象与工件具有一对多的关系。两个对象都有比率字段。

组映射如下所示：

```
<hibernate-mapping>
    <class name="Group" table="Group">
        <id name="id" type="int">
            <generator class="native" />
        </id>
        <property name="ratio" type="string"></property>
          <set name="artifacts" table="Artifact" 
                inverse="true" lazy="true" fetch="select">
            <key>
                <column name="ratio" not-null="true" />
            </key>
            <one-to-many class="Artifact" />
        </set>
    </class>
</hibernate-mapping> 
```

工件映射：

```
<hibernate-mapping>
    <class name="Artifact" table="Artifact">
        <id name="id" type="int">
            <generator class="native" />
        </id>
        <property name="ratio" type="string"></property>
    </class>
</hibernate-mapping> 
```

问题是组对象打印出来，但工件在查询中没有返回任何内容。我已经打印了从每组返回的比率。然后，我将 sql 语句复制到了休眠输出中，并在 where 语句条件中替换了比率，一切都正确返回：

```
 select artifact0_.ratio as rat2_3_1_, artifact0_.id as id1_, artifact0_.id as id4_0_, artifact0_.ratio as rat2_4_0_from Artifact artifact0_ where artifact0_.ratio='1' 
```

有谁知道为什么休眠集合没有返回任何东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:00:32.103

如果您的语句在替换了 ratio 参数的情况下在 sql 中正确执行，但在 Hibernate 执行时却没有执行，那么这是因为您替换了与 Hibernate 实际具有的值不同的值。您可以使用 log4jdbc 之类的工具来查看生成的 SQL 语句中参数的实际值。

映射中的问题是：在集合中，您将键定义为`ratio`. 这使得`ratio`表中的外键`Artifact`并将其与父键连接起来，这是`Group.id`（而不是`Group.ratio`您可能想要的）。

有两种解决方案：

1.  您定义`ratio`为 中的唯一键`Group`。然后在您的映射`Artifact.ratio`中加入`Group.ratio`.

2.  如果你不能做1.因为`ratio`不是唯一的`Group`（或者你不想做1.），那么和之间的关系`Group`是`Artifact`多对多关系，你应该使用`<many-to-many>`标签。在这里，您拥有属性`column`并`property-ref`命名两个表中的连接列。

# iphone - Amazon s3 快速文件集下载？

> ID：14594141
> 
> 赞同：0
> 
> 时间：2013-01-29T23:39:43.437
> 
> 标签：iphone, amazon-web-services, amazon-s3, amazon

我有一个 iphone 应用程序，有时必须从 Amazon AWS S3 帐户的存储桶中下载一组文件。

典型的此类下载可能涉及 100 个文件。尽管这些文件中的大多数都非常小，但全部加起来，我们仍然不到 3MB。

目前，我使用 listObjectsInBucket 函数，然后对所有文件进行循环，并使用 API/SDK 函数 getObject 将它们一一获取。

问题是这样做需要很长时间，所以我想就在我的场景中工作的更快策略提供一些建议（许多小文件必须单独保持可用，以便它们可以被修改CMS）。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:53:50.957

如果您希望文件保留在应用程序的本地存储中，则将所有文件连同文件上的元数据（即校验和、上次修改的时间戳等）一起存储在本地可能是有意义的。然后，您可以将此元数据与您存储在 S3 元数据字段中的元数据进行比较，仅同步元数据不同的那些文件。

# css - Google Chrome 开发者工具有时无法打开 css 文件？

> ID：14594147
> 
> 赞同：2
> 
> 时间：2013-01-29T23:40:10.800
> 
> 标签：css, google-chrome, google-chrome-devtools

我有一个我检查过的课程：

![在此处输入图像描述](../Images/65e5e2198bd7676eb68594e65c3445f4.png)

有时，正确的文本引用了错误的类定义来源。它不是说`screen-site.css:783`，而是显示 url ( ) 的最后一部分`web-upload`，以及`..:13`

当我单击该链接时，它会将我带到源文件，而不是 css 文件：

![在此处输入图像描述](../Images/60082badca781054e2f1ac0513e6448c.png)

`13`即使我在源代码和 css 中添加/删除行，该值也不会改变。

它看起来像 Chrome 中的一个错误，但我想我会在这里询问我是否做错了什么。

**更新**

根据要求，这里是 HTML 摘录：

```
<!DOCTYPE html>
<html>
  <head>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
    <link href="/assets/screen-site.css?body=1" media="all" rel="stylesheet" type="text/css" />
  </head> 
```

请记住， css 中定义的*每个*类都会发生这种情况，而不仅仅是我提到的那个。css相当大，但很多行下来，类定义：

```
#main {
   height: 100%;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:07:45.180

我相信我找到了罪魁祸首。`Support for SASS`打破它的实验选项。

![在此处输入图像描述](../Images/69509780ade2e3cd0e74d50551b6381d.png)

关闭该选项并重新打开工具会使名称和链接正确显示。我早些时候打开它，看看它会做什么而不记得关闭它。:)

# javascript - Dajaxice 安装演练

> ID：14594148
> 
> 赞同：0
> 
> 时间：2013-01-29T23:40:25.010
> 
> 标签：javascript, django, dajax

我已经尝试了各种安装 Dajaxice 的方法来测试它，但无论如何，我似乎可以适当地提供所有 JS 文件，但似乎永远无法真正调用 ajax.py 中的函数。具体来说，在我的模板中，我有一个按钮

```
onclick="Dajaxice.dajaxtest.exampleapp.sayhello(my_js_callback);" 
```

但我总是得到（在 Chrome 的开发者控制台中）

```
Uncaught TypeError: Cannot read property 'exampleapp' of undefined 
```

在这种特殊情况下，它是“exampleapp”，但是根据其他建议，我尝试了很多不同的参考。似乎我的索引页面上的 Dajaxice 对象根本没有任何预期的属性，它没有“myprojectname”（dajaxtest），也没有“myappname”（exampleapp），也没有简单的“myfunction”。

顺便说一句，安装 Dajaxice 的文档没有提到包括

```
from dajax.core import Dajax 
```

在 ajax.py 中，但另一个答案确实如此，所以我尝试了它无济于事。

如果您有兴趣，我正在尝试制作的确切代码库已压缩并在此处提供：[https](https://docs.google.com/file/d/0B16ANo4rID0PZld5V0p0enlRdUU/edit) ://docs.google.com/file/d/0B16ANo4rID0PZld5V0p0enlRdUU/edit （Dajax/Dajax ice 安装通过`pip install django-dajax`但真的，我的问题的一个完美答案是，如果你已经启动并运行了 Dajaxice，你到底是如何安装它的，有详细的步骤，因为官方文档似乎不是很实用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:12:32.183

我完全按照[文档所说](http://django-dajaxice.readthedocs.org/en/latest/installation.html)的做了，而且效果很好（尽管我只是真正让示例问题正常工作）。

我注意到的几件事：

1）您不必导入 Dajax 来让 Dajaxice 工作（因为前者位于后者之上）。

2）我认为你的按钮 onclick 应该是`onclick="Dajaxice.exampleapp.sayhello(my_js_callback);"`

3）您需要添加`urlpatterns += staticfiles_urlpatterns()`到 urls.py 的底部

我希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-24T02:33:23.033

我想您还没有在 INSTALLED_APPS 中的项目 settings.py 中添加 appname。像这样：

```
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'dajaxice',
    'simple',
) 
```

# .net - Windows 窗体关闭时 ArrayList 意外清空？

> ID：14594150
> 
> 赞同：2
> 
> 时间：2013-01-29T23:40:28.773
> 
> 标签：.net, powershell

我正在创建一个 PowerShell 函数，用于使用 GUI 在 AD 中搜索用户。该函数将 ShowDialog() 一个 Windows 表单供用户进行搜索，然后当用户单击“确定”时，该表单将关闭，并且该函数将返回一个包含他们选择的 AD 用户的 ArrayList。

一切正常，直到表格关闭。表单关闭后，我的 ArrayList 突然计数为 0，而不是包含他们选择的 AD 用户。

我不明白为什么 ArrayList ($alRetrievedSelection) 被清空。我实际上只有一行代码可以修改这个 ArrayList。其他一切都只是出于我自己的调试目的的写警告。

```
#This function returns an arraylist that contains the items selected by the user
function Retrieve-DataGridSelection{...}

#Fake sample data
$array = "Item 1","Item 2","Item 3","Item 4"
$arraylist = New-Object System.Collections.ArrayList(,$array)

#Create the basic form
$frmWindow = New-Object System.Windows.Forms.Form

#Create the OK button
$btnOK = New-Object System.Windows.Forms.Button
$btnOK.Add_Click({
    $alRetrievedSelection = Retrieve-DataGridSelection -dgDataGridView $datagrid
    #This warning always shows the correct Count
    Write-Warning("Received from Retrieve-DataGridSelection: " + $alRetrievedSelection.Count)
})
$frmWindow.Controls.Add($btnOK)

#Create the datagrid where users will select rows
$datagrid = New-object System.Windows.Forms.DataGridView
$datagrid.DataSource = $arraylist
$frmWindow.Controls.Add($datagrid)

#Give focus to the form
$frmWindow.Add_Shown({$frmWindow.Activate()})

#Display the form on the screen
$frmWindow.ShowDialog()

#This warning keeps telling me the Count is 0 when it should not be
Write-Warning("After the form closes: " + $alRetrievedSelection.Count) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T02:57:54.577

这是由于 PS 的范围规则。来自`Get-Help about_Scopes`：

> [I] 您在子范围内创建和更改的项目不会影响父范围，除非您在创建项目时明确指定范围。

这意味着当您在`Click`处理程序脚本块（等效于 C# lambda）中设置变量时，您只能在该块的本地范围内设置它，而不是在全局范围内。

要在全局范围内设置变量，请使用`global`范围修饰符：

```
$global:alRetrievedSelection = Retrieve-DataGridSelection … 
```

# linux - 在 bash 中检测公共 IP 地址的方法

> ID：14594151
> 
> 赞同：41
> 
> 时间：2013-01-29T23:40:35.740
> 
> 标签：linux, bash, shell, ubuntu, centos

作为安装脚本的一部分，我想对机器的**公共**IP 地址进行“有根据的猜测”。它应该尽可能健壮，可以在各种主机和平台上工作。这是一个例子：

[https://gist.github.com/4669037](https://gist.github.com/4669037)

此脚本使用 3 种方法，然后默认为`/etc/hostname`. 到目前为止，我只在 Ubuntu 上对此进行了测试。这可能适用于其他发行版吗？还有我可以添加的其他方法吗？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2013-01-29T23:54:01.427

```
curl ipinfo.io/ip 
```

或者

```
wget -q -O - ipinfo.io/ip 
```

或者

```
lynx -source ipinfo.io/ip 
```

[获取公共 IP 地址](http://commandlinefu.com/commands/view/7368/get-you-pub)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-30T12:32:10.747

`curl ifconfig.me`将是最好的选择，如果你没有卷曲：

`wget -qO- ifconfig.me/ip`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-29T23:56:03.887

您在寻找多少公共公共 IP？如果机器在 NAT 后面怎么办？

*   `curl`// `wget`( `netcat`)`nc`其中`<URL>`包含请求者的地址：大部分时间应该可以工作，但可能该站点可能无法从机器访问（无论是防火墙还是临时/永久不可用）。您将获得尽可能多的公共 IP。

*   `ifconfig`: 必须以root身份运行，否则您必须尝试`/sbin/ifconfig`或`/usr/sbin/ifconfig`也一样。如果机器有更多的网卡怎么办？您如何判断哪个 IP 是正确的？如果机器的 LAN 上只使用 IPv6 会怎样？在任何情况下，您都将获得尽可能少的公共 IP（如果在机器上配置了更多接口，则可能是错误的 IP - 如今使用网络分流设备和/或无处不在的虚拟化通常就是这种情况）。

*   `/etc/hostname`: 不需要存在，在许多系统上它是`/etc/HOSTNAME`，并且它不包含 IP 地址，而应该包含主机名（通常是 FQDN）。

关键是，它可能失败的方式很多，您可能应该考虑a）更准确地指定您的目标系统或b）您是否真的需要知道IP - 这是一个似乎当它在稍微复杂的设置中惨遭失败时，在值得使用的简单情况下工作？如果您认为自己需要 IP，请准备一种方法来优雅地处理故障，以防您根本没有获得 IP 或获得错误的 IP。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-06-12T06:00:45.420

如果在 AWS EC2 上，您可以使用：

```
curl checkip.amazonaws.com 
```

注意：可以从任何 Web 客户端使用此服务。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-04-25T20:07:33.130

试试这个命令：

```
wget -O - -q icanhazip.com 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-03-05T21:36:47.167

如果您落后于 nat 或其他东西，则此解决方案不起作用。它在没有 3rd 方服务的情况下提供帮助。如果机器上有连接，例如服务器或 ppp 连接，它就可以工作。

*   不是一个完全正确的问题答案，但可能会帮助其他人（比如我）
*   *在大多数（或所有？）*情况下都需要root

您可以从中获取（第一个）默认路由`route -n`，找到它使用的接口，并找到它拥有的 ip。

```
MAINIF=$( route -n | grep '^0\.0\.0\.0' | head -n 1 | awk '{print $NF}' )
IP=$( ifconfig $MAINIF | { IFS=' :';read r;read r r a r;echo $a; } ) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-05-26T00:29:31.237

仅使用 bash（在[icanhazip.com](https://major.io/icanhazip-com-faq/)的帮助下）：

```
exec 3<>/dev/tcp/icanhazip.com/80 
echo -e 'GET / HTTP/1.0\r\nhost: icanhazip.com\r\n\r' >&3 
while read i
do
 [ "$i" ] && myip="$i" 
done <&3 
echo "$myip" 
```

bash 打开一个到 icanhazip 的套接字并发送一个 http 请求，在返回的数据的最后一个非空行上返回 IP 地址。（前几行是 http 标头）

这避免了需要像 wget 或 curl 这样的 http 客户端。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-07-02T13:58:04.603

使用 curl 访问 [shtuff.it IP 服务](http://shtuff.it/article/8/Find_your_public_IP_address_in_bash_with_curl_or_wget)

```
curl http://shtuff.it/myip/short 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-01-04T14:57:22.687

我使用 IPGrab 是因为我很容易记住它。

```
curl http://ipgrab.io 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-07-28T07:37:31.843

使用**[ipify](https://www.ipify.org)** API：

```
curl 'https://api.ipify.org?format=json' 
```

bash 脚本：

```
#!/bin/bash

ip=$(curl -s https://api.ipify.org)
echo "My public IP address is: $ip" 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-07-01T20:25:17.623

我在其他命令的末尾得到了空白字符：

```
$ curl -s https://api.ipify.org
255.255.255.255% 
```

我发现使用 jsonip.com 结合[jq](https://stedolan.github.io/jq/)摆脱了这个。这样，解析 IP 地址就像 jq 表达式一样简单：

```
$ curl -s https://jsonip.com | jq -r '.ip'
255.255.255.255 
```

看这个[jq玩](https://jqplay.org/s/qc7Vq0ac2o)。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-02-28T01:56:16.587

我在这里找到了我个人喜欢的方法：</p>

*   `dig +short myip.opendns.com @resolver1.opendns.com`
*   `dig +short txt ch whoami.cloudflare @1.0.0.1`
*   `dig +short txt o-o.myaddr.l.google.com @ns1.google.com`
    *   `dig +short txt o-o.myaddr.l.google.com @ns1.google.com | awk -F'"' '{print $2}'`

# c# - Ajax.RouteLink 中的 HTML 链接文本

> ID：14594154
> 
> 赞同：0
> 
> 时间：2013-01-29T23:40:50.183
> 
> 标签：c#, asp.net-mvc, razor, asp.net-mvc-4

如何为`linkText`to发出 HTML（纯文本以外的内容） `Ajax.RouteLink`？

而不是这个：

```
@Ajax.RouteLink("X",  ...) 
```

我想：

```
@Ajax.RouteLink("<i class='icon-check'></i>", ...) 
```

但是，这会发出 HTML 编码。

# javascript - 未捕获的 ReferenceError：未定义纬度

> ID：14594157
> 
> 赞同：3
> 
> 时间：2013-01-29T23:41:05.973
> 
> 标签：javascript, geolocation

> **可能重复：**
> [JavaScript 变量范围](https://stackoverflow.com/questions/500431/javascript-variable-scope)

我的脚本有问题，我想从 pos 函数中获取值 lat, lng，但是当我在控制台中检查元素时，我得到了这个错误：

“未捕获的 ReferenceError：lat 未定义 TEST.html:30（匿名函数）”

第 30 行是：var latlng = new google.maps.LatLng (lat, lng); 这是我的完整代码：

```
<script type="text/javascript">

navigator.geolocation.getCurrentPosition (function (pos){
  lat = pos.coords.latitude;
  lng = pos.coords.longitude;
});

  var directionsDisplay;
  var directionsService = new google.maps.DirectionsService();
  var map;
  var latlng = new google.maps.LatLng (lat, lng);
  var oceanBeach = new google.maps.LatLng(-6.2501199999999999,106.75937);

  function initialize() {
    directionsDisplay = new google.maps.DirectionsRenderer();
    var mapOptions = {
      zoom: 14,
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      center: latlng
    }
    map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
    directionsDisplay.setMap(map);
  }

  function calcRoute() {
    var selectedMode = document.getElementById("mode").value;
    var request = {
        origin: latlng,
        destination: oceanBeach,
        // Note that Javascript allows us to access the constant
        // using square brackets and a string value as its
        // "property."
        travelMode: google.maps.TravelMode[selectedMode]
    };
    directionsService.route(request, function(response, status) {
      if (status == google.maps.DirectionsStatus.OK) {
        directionsDisplay.setDirections(response);
      }
    });
  }
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T23:55:03.753

如果你这样写会不会是一个问题：

```
navigator.geolocation.getCurrentPosition (function (pos){
     var lat = pos.coords.latitude;
     var lng = pos.coords.longitude;
     var latlng = new google.maps.LatLng (lat, lng);
     var oceanBeach = new google.maps.LatLng(37.7683909618184, -122.51089453697205);
}); 
```

它大喊大叫的原因是因为 lat 与在回调函数之外定义的 latlng 和 oceanBeach 定义在不同的范围内，并且在那里无法访问它

**更新**

考虑到您的情况，您可以使用回调来解决您的问题，即将 getCurrentPosition 变成自己的函数，例如：

```
 function getCurrentLocation(callback) {
   if(navigator.geolocation) {
     navigator.geolocation.getCurrentPosition(function(pos) {
     var lat = pos.coords.latitude;
     var lng = pos.coords.longitude;
     callback(new google.maps.LatLng(lat,lng), new google.maps.LatLng(-6.2501199999999999,106.75937));
   });
  }
  else {
   throw new Error("Your browser does not support geolocation.");     
  }
} 
```

并为每个即做单独的回调调用它们

```
 getCurrentLocation(function(latlng,oceanBeach){
  // work with latlng and ocean beach here
  }); 
```

现在终于从每个函数调用函数，即

```
<script type="text/javascript">

var directionsDisplay;
var directionsService = new google.maps.DirectionsService();

function initialize() {
 getCurrentLocation(function(latlng,oceanBeach){
   directionsDisplay = new google.maps.DirectionsRenderer();
   var mapOptions = {
   zoom: 14,
   mapTypeId: google.maps.MapTypeId.ROADMAP,
   center: latlng
   }
   map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
   directionsDisplay.setMap(map);
 });

}

</script> 
```

并对 calcRoute 使用相同的技术。注意：而不是保持方向显示和方向服务全局，你应该把这整个东西变成一个类，这样它就更干净了，更面向对象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T23:53:13.363

你至少有两个问题：

1.  变量的范围（它们在子函数中定义，在您尝试使用它们的范围内不可用）

2.  该`getCurrentPosition()`函数是异步的。这意味着它会在您调用它之后完成一段时间，并且仅在它调用完成回调函数时才完成。因此，在您尝试使用函数调用后的结果时，它还没有完成。

要处理`getCurrentPosition()`异步，您必须这样做：

```
navigator.geolocation.getCurrentPosition (function (pos){
    var lat = pos.coords.latitude;
    var lng = pos.coords.longitude;
    var latlng = new google.maps.LatLng (lat, lng);
    var oceanBeach = new google.maps.LatLng(37.7683909618184, -122.51089453697205);      
    // any further code that uses these variables
});

// no code here that uses the results of getCurrentPosition() 
// because it has not completed yet 
```

您可以在这里看到类似的问题和答案：[无法应对 navigator.geolocation 的异步性质](https://stackoverflow.com/questions/2707191/unable-to-cope-with-the-asynchronous-nature-of-navigator-geolocation)

# python - 文件的第一行被跳过。Python

> ID：14594158
> 
> 赞同：0
> 
> 时间：2013-01-29T23:41:07.307
> 
> 标签：python

下面是一个简单的搜索。它可以工作，除了`iterator`跳过文件的第一行。内部`iterator`第一个`print`语句有正确的单词，但第二个`print`语句（`for`循环之后）有第二行文本，而不是第一行。

`for`我错过了这个循环行为怎么办？

```
"""Searches for the query inside a file
"""
def lines(the_file, query):
    lines = open(the_file)
    line(lines, query)

def line(lines, query):
    line = lines.readline()
    iterator(line, lines, word, query)

def word(line, query):
    word = line.strip()
    conditional(query, word)

def iterator(this, that, function, query):
    print this
    for this in that:
        print this
        function(this, query)

def conditional(this, that):
    if this in that:
        output(that, True)
    else:
        None

def output(query, result):
    print query

def search(the_file, query):
    lines(the_file, query)

search('c:/py/myfile.txt', 'a') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:44:47.857

变量`lines`是一个文件对象，当您创建 a 时，`readline()`您将指针移动到第二行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T23:45:38.297

我认为你的问题在这里：

```
def line(lines, query):
    line = lines.readline()
    iterator(line, lines, word, query) 
```

这一行：`line = lines.readline()`在开始迭代之前从文件中读取一行。然后在您的`for`循环中，您实际上是在覆盖`this`变量，它不再指向您的原始变量`line`。

# php - 将xml属性存储在php数组中

> ID：14594160
> 
> 赞同：0
> 
> 时间：2013-01-29T23:41:19.827
> 
> 标签：php, xml, simplexml

我有一个这种格式的 xml 文件：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<adp_report name="Average Draft Position - Mixed 5x5" rundate="2013-01-29 17:22:10.0" begin="2013-01-26" end="2013-01-29" draftcount="126">
     <player id="500736" name="Mike Trout" position="OF" team="ANA" adp="1.66" early="1" late="4" selections="126" />
     <player id="291154" name="Ryan Braun" position="OF" team="MIL" adp="2.01" early="1" late="4" selections="126" />
     <player id="213968" name="Miguel Cabrera" position="3B" team="DET" adp="2.55" early="1" late="4" selections="126" />
</adp_report> 
```

我需要将它加载到 php 中，我可以通过查找 name 属性和相应的 adp 来访问它。我正在使用它来执行一些计算并将结果插入到从 MYSQL 数据库调用的表中。这是我到目前为止所拥有的：

```
$url = '...some url';
$xml = simplexml_load_file($url);    
while($row = mysqli_fetch_array($resultbat, MYSQLI_ASSOC))
  {
       echo "<td>" . $row['NAME'] . "</td>";
       ...print out some more player data from database...

       foreach($xml->player as $player)
            {
                $attr = $player->attributes();

                if($attr['name'] == $row['NAME']) //$row['NAME'] is the players name from my database
                {
                    $adp = (float) $attr['adp'];
                    $early = (int) $attr['early'];      

                    $stdev = -0.42+0.42*($adp-$early);
                    if($stdev<0)
                        $stdev = 1;
                    $chance =number_format(((1-NORMDIST($pickNumber,$adp,$stdev,TRUE))*100), 0);

                  echo "<td class='adp'>".$adp."</td>";
                  echo "<td class='chance'>".$chance."%</td>";
                  break;
                }
            }
} 
```

这需要一些时间来处理，因为我正在浏览我的玩家数据库中的每一行，然后`foreach`用于查看 xml 文件，如果找到匹配项，我会进行计算。我不得不想象有一种更有效的方法来解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:00:02.070

您可以使用 XPath（请参阅：[SimpleXMLElement::xpath()](http://php.net/manual/en/simplexmlelement.xpath.php)和[XPath 文档](https://developer.mozilla.org/en-US/docs/XPath)）。所以，而不是你的`foreach`循环，这个：

```
$player = $xml->xpath('//player[@name="' . $row['NAME'] . '"]');
if (is_array($player) && count($player)) {
    $player = $player[0];
} else {
    continue; // not found
}
$attr = $player->attributes();
// and so on... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T23:49:50.037

我会将 XML 文件预处理为关联数组（用户 ID/用户名 => 属性）；

```
$url = '...some url';
$xml = simplexml_load_file($url);

$players = array();

foreach($xml->player as $player) {
    $attr = $player->attributes();

    // cast the SimpleXMLElement to a string
    $username = (string) $attr['name'];
    $players[$username] = $attr;
} 
```

然后从数据库中检索数据并匹配 XML 中的结果

```
while($row = mysqli_fetch_array($resultbat, MYSQLI_ASSOC)) {
     if(!array_key_exists($row['NAME'], $players)) {
          // player was not found in the XML
          continue;
     }

     // get the player's properties by matching the 'name'
     $player_stats = $players[$row['NAME']];

     // here, process player_stats

} 
```

但是，您的代码假定玩家名称是唯一的，可能多个玩家共享相同的名称（这个问题已经存在于您当前的代码中）

# c# - 是否可以在 NUnit 测试夹具中使用类似于 BDD 风格的方法 Given,When,Then？

> ID：14594163
> 
> 赞同：0
> 
> 时间：2013-01-29T23:41:25.783
> 
> 标签：c#, nunit, bdd

我希望我的测试夹具看起来像这样：

```
public class Adding_two_and_three
{
    [Given]
    public void Two_and_three()
    {
         ....
    }
    [When]
    public void Adding_Them()
    {
        ...
    }
    [Then]
    public void Result_should_be(5)
    {
        ...
    } 
```

`Given``Then`可以分别使用和属性`TestFixtureSetUp`来实现。`Test`- 方法的参数`Then`也可以使用`Values`属性来完成。但是有没有`When`使用 NUnit 的方法？另请注意，我希望能够拥有多个`Then`方法，因此该`When`方法只能执行一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T01:17:39.733

**免责声明：**这种*工作*，但在尝试之前我会寻找不同的框架。

我已经用与 NUnit 中的 G/W/T 方法类似的方式编写了一些测试，但看起来更像这样：

```
[TestFixture]
public class Adding_two_and_three
{
    [TestFixtureSetUp]
    public void Given_two_and_three()
    {
        // ...
    }

    [SetUp]
    public void Two_and_three()
    {
        // ...
    }

    [Test]
    public void Result_should_be(int expected = 5)
    {
        // ...
    }
} 
```

与传统的 G/W/T 测试夹具相比，您可能会遇到这种方法的许多缺点，但如果这对您有用，那就太好了！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T08:02:32.423

刚刚意识到可以将构造函数用作`Given`, `TestFixtureSetUp`as`When`和`Test`as `Then`：

```
public class Adding_two_and_three
{
   [Given]
   public Adding_two_and_three()
   {
     ....
   }

   [When]
   public void Adding_Them()
   {
     ...
   }

   [Then]
   public void Result_should_be(5)
   {
     ...
   }
} 
```

这解决了问题，但会限制命名`Given`不是最佳的。

# windows-runtime - C++/CX 接口可以从 IClosable 继承吗？

> ID：14594171
> 
> 赞同：1
> 
> 时间：2013-01-29T23:42:25.137
> 
> 标签：windows-runtime, c++-cx

如何声明一个继承自`Windows.Foundation.IClosable`C++/CX 的运行时接口？

这两种尝试都会产生编译器错误：

```
public interface class MyInterface : Windows::Foundation::IClosable {
   /* bla bla */
};
==> error C2039: 'IClosable' : is not a member of 'Windows::Foundation' 
```

和

```
public interface class MyInterface {
   /* bla bla */
   ~MyInterface();
};
==> error C2849: 'MyInterface' : an interface cannot have a destructor 
```

然而，这种继承在 Windows 运行时中是绝对禁止的，因为某些系统提供的接口确实继承自`IClosable`——例如，`IInputStream`.

我想我可以在 IDL 中定义，然后在编译 C++ 代码之前使用 midlrt.exe`MyInterface`将其转换为外部文件。`.winmd`不过，这对我的构建过程来说是一个不受欢迎的复杂化。有没有办法将其指定为 C++/CX 源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T07:23:04.753

只有在不使用 C++/CX 时才能从 IClosable 继承。

你得到第一个错误的原因是因为这个接口不是 Windows.winmd 元数据的一部分。此接口在 windows.foundation.h 文件 ABI::Windows::Foundation 命名空间中声明。

出现第二个错误是因为接口不能有析构函数。

MSDN：当您声明公共析构函数时，编译器会生成代码，以便 ref 类实现 Platform::IDisposable 并且析构函数实现 Dispose 方法。Platform::IDisposable 是 Windows::Foundation::IClosable 的 C++/CX 投影。**永远不要显式地实现这些接口。**

# sql-server-2008 - Shell 脚本条件

> ID：14594188
> 
> 赞同：0
> 
> 时间：2013-01-29T23:44:22.453
> 
> 标签：sql-server-2008, shell

我正在尝试通过在具有多个条件的某些行中搜索来使用 shell 脚本从文本文件中获取数据。例如在这个文件中：

```
TX VIDEO ID 34 B 33 SIZE 672 SRC -1 DST 11 
TX CBR ID 35 B 35 SIZE 10 SRC -1 DST 11  
RX VOIP ID 0 B 0 SIZE 32 SRC -1 DST 3 D  
RX VOIP ID 8 B 8 SIZE 32 SRC -1 DST 5 D 
RX VOIP ID 20 B 20 SIZE 32 SRC -1 DST 8 D 
RX VIDEO ID 9 B 9 SIZE 1490 SRC -1 DST 5 D 
RX VIDEO ID 21 B 21 SIZE 1490 SRC -1 DST 8 D 
TX INF_BUF ID 37 B 10 SIZE 776 SRC 1 DST 5 T 
TX INF_BUF ID 39 B 22 SIZE 776 SRC 2 DST 8 T 
```

我有`"RX VIDEO"`和`"TX VIDEO"`线。`"RX VIDEO"`第一个条件是，从`"DST 3 && DST 5"`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:46:51.820

对于多个条件，您可以将 grep 输出通过管道传输到另一个 grep。

如果要在文件中搜索带有 AAA 和 BBB 的行，可以执行以下操作：

```
grep 'AAA' file | grep 'BBB' 
```

或者你可以用正则表达式搜索它，只用一个 grep：

```
grep -e 'AAA.*BBB' -e 'BBB.*AAA' file 
```

`-e`如果匹配任何选项后的表达式，您将得到一个结果。这意味着它的行为类似于*or*。

这两个示例都会找到类似这样的行：

```
AAABBB
AAA BBB
BBB AAA
BBBAAA
AAA-BBB
AAA---BBB
AAAA BBB
xAAAAAAA BBB AAAAA 
```

等等。

**对于您的示例，它可能是：**

```
grep 'RX VIDEO' file | grep -e 'DST 3\>' -e 'DST 5\>' 
```

或者：

```
grep 'RX VIDEO.*DST [35]\>' file 
```

这将与或`RX VIDEO`一起搜索。`DST 3``DST 5`

编辑：我在表达式末尾添加了一个单词以抑制例如 DST 37 beeeing found。见基思的评论。

# c# - c#泛型接口解决方案

> ID：14594191
> 
> 赞同：3
> 
> 时间：2013-01-29T23:44:25.277
> 
> 标签：c#, generics, interface

我有一个名为`Man`. 在这个接口中，我有一个`getList()`返回类型 T 列表的方法（依赖于实现接口的类）。我有 3 个实现`Man`: `small`、`normal`和`big`. 每个类都有方法`getList()`tart 返回一个列表`small`或列表`normal`或列表`big`。

```
interface Man<T>{
  List<T>getList();
}

class small : Man<small>{
  List<small> getList(){
    return new List<small>(); 
  }
}

class normal : Man<normal>{
  List<normal> getList(){
    return new List<normal>(); 
  }
}

class big : Man<big>{
  List<big> getList(){
    return new List<big>(); 
  }
} 
```

现在我有了类：`Home` 它包含一个参数`bed`，它是`Man`. `Bed`可以有多种类型：`small`, `normal`, `big`. 如何声明类型参数`bed`？

```
class Home{
  Man bed<> // what i must insert between '<' and '>'??
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T23:46:15.327

您还需要`Home`通用：

```
class Home<T> 
{
    Man<T> bed; 
```

* * *

根据评论进行编辑：

如果您不知道将存在哪种类型的“Man”，另一种选择是让您的泛型类实现非泛型接口：

```
public interface IBed { // bed related things here

public class Man<T> : IBed
{
   // Man + Bed related stuff...

class Home
{
     IBed bed; // Use the interface 
```

然后，您可以针对接口定义的共享合约进行开发，并允许`IBed`在`Home`.

* * *

在不相关的旁注中，我建议在这里使用更好的命名方案-名称没有多大意义……为什么“男人”被命名为“床”？您可能还想查看标准的[大写约定](http://msdn.microsoft.com/en-us/library/vstudio/ms229043%28v=vs.100%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T23:56:34.817

我无法准确确定您的要求，因此我将推断您在弄清楚如何为房屋设置参数“床尺寸”时遇到了麻烦。

使用枚举可能会更好地解决这个问题。这样你就可以有一个对象来描述床的大小。

```
public interface IBed
{
    BedSize BedSize { get; set; }
}

public enum BedSize
{
   Small,
   Medium,
   Large
}

public class House : IBed
{
  public BedSize BedSize { get; set; }
} 
```

这降低了稍后确定床尺寸的复杂性，因此您不必进行反思或类似的讨厌的事情。

# c# - microsoft azure - 获取目录完整路径

> ID：14594193
> 
> 赞同：1
> 
> 时间：2013-01-29T23:44:30.597
> 
> 标签：c#, azure, directory

我正在使用 microsoft azure 网站。当我尝试**在本地主机中使用以下代码时，我已将文件保存在 wwwroot 目录之外的 FTP 托管中（出于安全问题），它工作正常** ****但是当我将代码上传到 azure 服务器时，结果是：“d:\窗口\数据"* ***

我获取目录的方法是：

```
 string path = System.IO.Path.GetFullPath("../data/"); 
```

如何使用**Azure**网站找到完整路径？（再次 - 它在本地主机中工作）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T02:20:52.187

我认为您可以使用它`Sever.MapPath("../data/")`来获取物理路径。

# python - 使用结构将模块文件放在远程服务器上

> ID：14594194
> 
> 赞同：1
> 
> 时间：2013-01-29T23:44:34.577
> 
> 标签：python, fabric

我正在编写一个结构文件，它将获取数据集，将其发送到服务器，在其上运行分析脚本并检索结果。如果我硬编码我的脚本的位置，`process_script`我一切都很好。但是，我想将脚本作为文件包含在模块中，因此希望能够访问该文件而无需对位置进行硬编码。我可以使用导入系统吗？我不知道。这是我想做的工作版本：

```
#data, script
datafile       = 'data.txt' 
process_script = 'process.py'

#simple function    
def upload_and_run():
    newdir = remote_dir + '/process_temp'
    put(datafile, newdir)
    put(process_script, newdir)
    with cd(newdir):
        run('python2.6 process.py {0}'.format(datafile))
    get(newdir,'%(path)s')

#pseudocode of how I'd like to access the process_script
process_script = from module import script
put(process_script, newdir) 
```

任何建议表示赞赏，谢谢，zach cp

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T00:25:22.693

根据[this](https://stackoverflow.com/questions/729583/getting-file-path-of-imported-module)和[this](https://stackoverflow.com/questions/247770/retrieving-python-module-path)`.__file__` ，我可以使用模块的属性访问模块路径。然后使用该路径对脚本进行硬编码。

```
import os
path = os.path.dirname(my_module.__file__)
process_script = path+ 'process.py'
put(process_script) 
```

# css - 如何为客人通过图像模块上传的图像设置最大高度和宽度

> ID：14594196
> 
> 赞同：1
> 
> 时间：2013-01-29T23:44:38.060
> 
> 标签：css, orchardcms, orchardcms-1.6

My Orchard 网站允许人们为自己的个人资料上传图片。但是，我需要设置一个最大高度和宽度，这样当其他人查看他们的个人资料时，他们的图片不会太大。

我正在使用附加到“配置文件”模块的“图像字段”模块。

我认为这可以在 ImageFieldSetting.cshtml 或 ImageField.cs 文件中设置，但不确定在这些文件中的确切位置。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:46:11.000

转到用户内容类型的编辑屏幕

/Admin/ContentTypes/编辑/用户

并单击配置文件旁边的“>”，以便您看到配置文件字段的一些额外设置。

在您的图像字段下，将宽度和高度设置为您想要的，然后在下面的下拉菜单中选择调整大小。

# php - 如何在jquery中的php上传递点击的图像值

> ID：14594202
> 
> 赞同：0
> 
> 时间：2013-01-29T23:45:29.930
> 
> 标签：php, jquery

如果任何人单击图像而不是仅单击图像 sl 编号传递到 php 页面，我想这样做。但我没有得到任何 imge sl 号码。我试图找出问题所在。但我不能请，任何人帮助我。谢谢。这是我的代码

```
 <?php
$query="select * from image_content order by sl";
$result=mysql_query($query) or die (mysql_error());
$num=mysql_num_rows($result);

for ($i=0; $i<$num; $i++)
{

    $sl=mysql_result($result, $i, "sl");
    $title=mysql_result($result, $i, "title");
    $image_name=mysql_result($result, $i, "image_name");

    echo"
        <div id='image_style'>

    <div id='upload_image'>
        <a class='picture_description' href='#' title='$title'>
        <img src='../download/$image_name' />
     <div align='center'>Title: $title</div>
    </a>
   </div>
<input type='hidden' class='picture_sl' name='picture_sl' value='$sl'/>
</div>";
}
?> 
```

jQuery代码：

```
<script type="text/javascript">
$(document).ready(function() {

    $(".picture_description").click(function() {

        var action = $("#form1").attr('action');
        var form_data = {
            picture_sl: $(".picture_sl").val(),
            is_ajax: 1
        };

        $.ajax({
            type: "POST",
            url: action,
            data: form_data,
            success: function(response)
            {

                        $("#div_1").html(response);

                }
        });

        return false;
    });

});
</script> 
```

加载的php：

```
<?php

echo $picture_sl=$_POST['picture_sl'];
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T00:04:25.343

您似乎没有为图像和描述 HTML 编制索引，这意味着它们都将具有以下输出`<input type='hidden' class='picture_sl' name='picture_sl' value='X'/>`。您希望它们看起来像什么`<input type='hidden' class='picture_sX' name='picture_sX' value='X'/>`。为此，只需将您的代码更新为以下内容

```
<?php
$query="select * from image_content order by sl";
$result=mysql_query($query) or die (mysql_error());
$num=mysql_num_rows($result);

for ($i=0; $i<$num; $i++) {

  $sl=mysql_result($result, $i, "sl");
  $title=mysql_result($result, $i, "title");
  $image_name=mysql_result($result, $i, "image_name");

  echo"
  <div class='image_style'>
    <div class='upload_image'>
      <a class='picture_description' href='#' title='$title'>
        <img src='../download/$image_name' />
        <div align='center'>Title: $title</div>
      </a>
    </div>
    <input type='hidden' class='picture_s".$i."' name='picture_s".$i."' value='".$sl."'/>
  </div>";
}
?> 
```

我在您的代码中所做的一件事是`<div id='image_style'>`并且`<div id='upload_image'>`仅仅是因为您不应该在 html 页面中有多个相同的 ID。

这是JavaScript

```
$(document).ready(function () {
  $(".test").click(function () {
    $(event.target).children('div').each(function(){
      var action = $("#form1").attr('action');
      var form_data = {
        picture_sl: $(this).attr('value'),
        is_ajax: 1
      });

      $.ajax({
        type: "POST",
        url: action,
        data: form_data,
        success: function(response) {
          $("#div_1").html(response);
        }
      });
      return false;
    });
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T00:11:24.473

在您的点击处理程序中，您正在选择任何具有“picture_sl”类的输入元素，而不是被点击的那个。

您可以像这样在锚标记上使用数据属性

```
<a class='picture_description' href='#' title='$title' data-picture='$sl'> 
```

然后使用 jQuery data() 方法检索它：

```
 $(".picture_description").click(function() {

    var action = $("#form1").attr('action');
    var form_data = {
        picture_sl: $(this).data('picture'),
        is_ajax: 1
    }); 
```

# android - 复选框首选项和跳过活动

> ID：14594207
> 
> 赞同：0
> 
> 时间：2013-01-29T23:45:55.597
> 
> 标签：android, checkbox, sharedpreferences, android-linearlayout

我有一个对话框自定义布局，我包含了一些文本视图和图像，但是我有一个复选框，如果用户选中应用程序/活动的第一个初始启动器上的复选框，我希望能够弹出这个对话框.

我不知道从哪里获取我当前的代码，任何建议或更正都会非常有帮助和赞赏。

## 你开悟了吗

```
public class AreYouEnlighten extends Activity{

Button yes;
Button no;

public static final String PREFS_NAME = "MyPrefsFile1";
public CheckBox dontShowAgain;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_areyouenlighten);

    dontShowAgain = (CheckBox) findViewById(R.id.checkBox1);

    final Button yes = (Button) findViewById(R.id.continuebutton);
    yes.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            // Perform action on click

            String checkBoxResult = "NOT checked";
            if (dontShowAgain.isChecked())
                checkBoxResult = "checked";
            SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
            SharedPreferences.Editor editor = settings.edit();
            editor.putString("skipMessage", checkBoxResult);
            // Commit the edits!
            editor.commit();
            return;

        }
    });

    SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
    String skipMessage = settings.getString("skipMessage", "NOT checked");
    if (!skipMessage.equals("checked")) {
        // if (skipMessage !=("checked") )

    final Button no = (Button) findViewById(R.id.learnmore);
    no.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            // Perform action on click

            Intent i = new Intent(Intent.ACTION_VIEW, Uri.parse("vnd.youtube:3S6PTpCyW1I"));
         List<ResolveInfo> list = getPackageManager().queryIntentActivities(i, PackageManager.MATCH_DEFAULT_ONLY);
         if (list.size() == 0) {
          // default youtube app not present or doesn't conform to the standard we know
          // use our own activity
          i = new Intent(getApplicationContext(), AreYouEnlighten.class);
        //  i.putExtra("3S6PTpCyW1I", videoID);
         }
         startActivity(i);
        }
    });
} 
```

## activity_areyouenlighten.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_alignParentLeft="true"
android:layout_alignParentTop="true"
android:orientation="vertical" >

<ImageView
    android:id="@+id/imageView2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:paddingBottom="8dp"
    android:paddingTop="10dp"
    android:src="@drawable/logoheader" />

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="fill_parent"
    android:layout_height="3dp"
    android:layout_weight="1"
    android:src="@color/dialog_text" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:padding="15dp"
    android:text="Hello, World" />

<CheckBox
    android:id="@+id/checkBox1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:paddingRight="10dp"
    android:text="Disable This Notification" />

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:paddingTop="15dp" >

    <Button
        android:id="@+id/continuebutton"
        android:layout_width="120dp"
        android:layout_height="wrap_content"
        android:text="Continue" />

    <Button
        android:id="@+id/learnmore"
        android:layout_width="120dp"
        android:layout_height="wrap_content"
        android:text="Learn More" />
  </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T00:16:03.253

你的yes-Button有什么用？现在，它只保存当前的 CheckBox 状态。你最好在你的 CheckBox 上设置一个 OnCheckedChangeListener。

如果用户之前启用了跳过框，则将执行 if 子句。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_areyouenlighten);

    SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
    SharedPreferences.Editor editor = settings.edit();

    if (settings.getBoolean("skipMessage", false) {
         // skipping message, so eg. start another activity here
         Intent in = ...
         startActivity(in);
         return;
    }

    CheckBox dontShowAgain = (CheckBox) findViewById(R.id.checkBox1);
    dontShowAgain.setOnCheckedChangeListener(new OnCheckedChangeListener() {
        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            editor.putBoolean("skipMessage", isChecked);
            editor.commit();
        }
    });

    ...

} 
```

# android - 在 Windows 上使用 jCIFS 列出慢速文件

> ID：14594208
> 
> 赞同：6
> 
> 时间：2013-01-29T23:46:06.343
> 
> 标签：android, jcifs

jCIFS 是一个很棒的库，用于连接到 Android 上的 SMB 共享，它几乎适用于我测试过的所有设置。

但是，在基于 Windows 的网络共享上使用该方法时，我确实会遇到非常慢的性能`SmbFile.listFiles()`，但仅限于在 PC 上以实际用户身份登录时。简单地获取文件夹列表可能需要几分钟时间，有时根本没有任何反应。

如果我选择以访客身份登录（通过使用“访客”作为用户，并将密码留空），一切都很快。通常不到一秒钟。

以下代码有效并且速度很快：

```
try {
   NtlmPasswordAuthentication authentication = new NtlmPasswordAuthentication("", "guest", ""); // domain, user, password
   currentFolder = new SmbFile("smb://host-name-for-my-pc", authentication);
   SmbFile[] listFiles = currentFolder.listFiles();
} catch (Exception e) { // Using Exception for the sake of demonstration... 
```

但是，此代码不起作用/非常慢：

```
try {
   NtlmPasswordAuthentication authentication = new NtlmPasswordAuthentication("", "my-username", "my-password"); // domain, user, password
   currentFolder = new SmbFile("smb://host-name-for-my-pc", authentication);
   SmbFile[] listFiles = currentFolder.listFiles();
} catch (Exception e) { // Using Exception for the sake of demonstration... 
```

我与另一个正在使用 jCIFS 的人交谈，他遇到了同样的问题。

我尝试使用 ES File Explorer 连接到同一个共享，它也使用 jCIFS，无论使用真实帐户还是以访客身份登录，它都很快。

**更新：**

如果我改用`SmbFile("username:password@server/")`它，它会起作用！不过，我真的希望它与`NtlmPasswordAuthentication`. 有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T17:09:51.763

使用`new SmbFile("username:password@server/")`作品，所以我只是使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-16T06:56:49.500

在实例化任何 jCIFS 类之前尝试使用以下代码：

```
jcifs.Config.setProperty("resolveOrder", "DNS"); 
```

感谢[Glenn](https://stackoverflow.com/users/49608/glenn)在 JCIFS 中的回答 [：文件检索太慢而无法使用](https://stackoverflow.com/questions/10533653/jcifs-file-retrieval-is-too-slow-to-be-usable)

参考： [https ://jcifs.samba.org/src/docs/api/overview-summary.html](https://jcifs.samba.org/src/docs/api/overview-summary.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T19:01:31.930

尝试使用`new SmbFile("smb://host-name-for-my-pc/", authentication);`. 以斜线结尾。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-13T15:07:22.783

我在图书馆遇到了同样的问题。我可以看到解决问题的所有答案都没有域属性，我尝试不使用该属性并且我看到问题已解决，我认为该库默认用于 LAN，但如果您明确放置域执行很慢。

关于密码，我认为登录共享文件夹较慢是正常的。

# java - 了解 Java 接口？

> ID：14594221
> 
> 赞同：1
> 
> 时间：2013-01-29T23:47:01.617
> 
> 标签：java, interface

于是我上网查了一些资源来了解Java接口。我相信我对它们有一个很好的总体了解，但是在对它们进行编程时我有点困惑......

我创建了一个名为 A 的接口，里面有以下内容......

```
 public interface A {
    public int sum(int first, int second);
} 
```

然后我创建了一个名为 B 的类。

```
public class B implements A {

    public static void main(String [] args){
        int result = sum(3, 5);
    }

    public int sum(int first, int second) {
        int total = first + second;
        return total;
    }

} 
```

现在我想弄清楚的是如何正确调用/使用方法“sum”。在 Eclipse 中，“int result = sum(3, 5);”行出现错误 它告诉我将方法设为静态。如果我将其设为静态，则该方法需要在接口中匹配它。但是，我不能在接口中使用静态方法？

感谢您提供任何帮助，并感谢您花时间阅读我的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T23:49:20.207

您遇到的问题不是接口而是`static`方法。

`main`是一种`static`方法。这意味着它不链接到对象/实例，而是链接到类本身。

由于要使用`sum`实例方法，因此首先需要创建一个对象来调用其方法。

```
A a = new B();
int result = a.sum(5, 6); 
```

通常，实例方法更多地与对象状态相关联，而静态方法更像是非 OO 语言中的“过程”。在 的情况下`sum`，您的方法作为静态方法会更有意义。但是，如果您使用`B`包装一个值（状态），并使用 sum 添加到您的内部状态，这将结束（以更 OO 友好的方式）。

```
A a = new B(5);
a.sum(6);
int result = a.getValue(); 
```

请注意，这两种方法都是有效的，并且都在 Java 中编译，只是选择在每种情况下更有意义的修饰符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T23:49:14.087

您不能`sum()`从您的 main 方法调用，因为 sum 是一个实例方法，而不是静态方法。它需要从类的实例中调用。

您需要实例化您的类：

```
public static void main(String [] args) {
    B b = new B();
    int result = b.sum(3, 5);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T23:49:19.660

```
public class B implements A {

    public static void main(String [] args){
        int result = new B.sum(3, 5); 
        // Create an instance of B so you can access 
        // the non-static method from a static reference
        // Or if you want to see the power of the interface...
        A a = new B();
        int result = a.sum(3, 5); 
    }

    public int sum(int first, int second) {
        int total = first + second;
        return total;
    }

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T23:49:20.477

通过像这样创建 B 的实例：

```
A a =  new B();
    int result = a.sum(3, 5); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T01:46:29.620

这是静态的问题，而不是界面的问题。您不能从静态方法调用非静态方法。您可以通过创建 sum 对象来调用 sum 方法。

像，

```
int result = new B.sum(3, 5); 
```

内部静态方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-29T15:02:41.303

我将通过举另一个例子来说明这一点：

制作一个名为 Animal 的分类。

```
public interface Animal {
  String speak();
} 
```

现在创建一个名为 Cat 的类

```
public class Cat implements Animal {
  public String speak() {
    return "meow"
  }
} 
```

还有一个名为 Dog 的类

```
public class Dog implements Animal {
  public String speak() {
    return "woof"
  }
} 
```

现在你可以这样做

```
public String speak(Animal a) {
  System.out.printf("%s\n", a.speak());
}

Cat cat = new Animal();
Dog dog = new Animal();
speak(cat); //prints meow
speak(dog); //prints woof 
```

这意味着`Cat`is an`Animal`并且`Dog`is an `Animal`too，因此您可以将 a`Cat`或`Dog`object 传递给接受`Animal`参数的函数。

这就像继承，但由于在 Java 中一个类只能从另一个类继承，您可以使用接口来解决这个问题。您只在接口中声明方法；您必须在实现它的类中定义它们。

它也可以用于诸如`ActionListeners`或之类的东西`MouseListeners`。你可以有一个实现它的 GUI 类，然后有一个函数来处理你`ActionEvents`喜欢的按钮点击和鼠标点击。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-08-29T16:33:41.250

问题似乎很简单，要么将 sum 方法设为静态，要么创建 B 类的实例并使用它来调用 sum 方法：

```
B b=new B();
int result=b.sum(3,5); 
```

或者

只需在 sum 方法之前写 static

例如：

```
 public static  int sum(int first, int second)

 {

     int total = first + second;
     return total;

 } 
```

# android - 无法将 UDP 数据包从开发机器发送到 Android 模拟器

> ID：14594222
> 
> 赞同：4
> 
> 时间：2013-01-29T23:47:05.613
> 
> 标签：android, android-emulator, udp

因为 Android 模拟器不支持[这里](http://developer.android.com/tools/devices/emulator.html#limitations)描述的多播，所以我一直在尝试解决我的情况。

为此，我编写了一个小型 Java 程序，它侦听多播数据包，然后将其重复到 localhost 地址。因为这个“多播中继器”与安卓模拟器在同一台机器上运行，我希望我可以将多播数据包环回模拟器。不幸的是，这似乎不起作用。

这是我在 Eclipse 和模拟器之外运行的“多播转发器”方法。我检查了它是否从网络上其他地方的另一台机器接收到 UDP 消息，该机器传输包含时间的 UDP 数据包：

```
public static void main(String[] args) throws IOException{
        boolean loop = true;
        MulticastSocket socket = new MulticastSocket(4446);
        InetAddress address = InetAddress.getByName("230.0.0.1");
    socket.joinGroup(address);
        DatagramSocket txSocket = new DatagramSocket();   // UDP socket to re transmit on
        DatagramPacket packet;
        while (loop){
        byte[] buf = new byte[256];
            packet = new DatagramPacket(buf, buf.length);
            socket.receive(packet);

            String received = new String(packet.getData(), 0, packet.getLength());
            System.out.println("Quote of the Moment: " + received);
            packet = new DatagramPacket(received.getBytes(), received.getBytes().length, InetAddress.getLocalHost, 4448);
            txSocket.send(packet);
    }

    socket.leaveGroup(address);
    socket.close();
    } 
```

这是我在 android 应用程序中运行的“接收器”代码：

```
ConnectivityManager connMgr = (ConnectivityManager) 
                getSystemService(Context.CONNECTIVITY_SERVICE);
            NetworkInfo networkInfo = connMgr.getActiveNetworkInfo();
            if (networkInfo != null && networkInfo.isConnected()) {
                txtView.append("Network connected.\r\n");
                WifiManager wm = (WifiManager)getSystemService(Context.WIFI_SERVICE);
                WifiManager.MulticastLock wmmc = wm.createMulticastLock("MulticastTest");
                if (wmmc.isHeld()){
                    txtView.append("Multicast lock is held\r\n");
                }else{
                    txtView.append("Multicast lock NOT held, attempting to acquire.\r\n");
                    wmmc.acquire();
                }
                if (wmmc.isHeld()){
                    try{
                        DatagramSocket rxSocket = new DatagramSocket(4448);
                        rxSocket.setSoTimeout(5000);
                        DatagramPacket packet;

                            // get a few quotes
                        for (int i = 0; i < 5; i++) {

                            byte[] buf = new byte[256];
                                packet = new DatagramPacket(buf, buf.length);
                                try{
                                    rxSocket.receive(packet);
                                    String received = new String(packet.getData(), 0, packet.getLength());
                                    txtView.append(received + "\r\n");
                                } catch (InterruptedIOException ex){
                                    txtView.append("Socket timed out.\r\n");
                                }
                                //System.out.println("Quote of the Moment: " + received);
                        }

                        //socket.leaveGroup(address);
                        //socket.close();
                    }catch (Exception ex){
                        txtView.append(ex.toString() + "\r\n");
                    }finally{
                        wmmc.release();
                    }
                }else{
                    txtView.append("Could not acquire multicast lock.\r\n");
                }
            }else{
                txtView.append("Network NOT connected");
            } 
```

不幸的是，接收套接字刚刚超时。我尝试绑定到“10.0.2.2”（[在此处](http://developer.android.com/tools/devices/emulator.html#networkaddresses)描述），但这会引发异常，尽管这似乎只有在我想从模拟器访问我的开发机器而我想从我的开发机器访问模拟器时才有用。有没有人有什么建议？

# azure - Windows Azure 云服务中的 UDP 多播

> ID：14594223
> 
> 赞同：4
> 
> 时间：2013-01-29T23:47:14.877
> 
> 标签：azure, multicast, azure-web-roles, azure-worker-roles

Windows Azure 云服务中是否支持多播 UDP？我已经在我的角色中为 UDP 协议设置了内部端点，但我的猜测是它们只为分配给我的云服务中的 web/worker 角色的 IP 地址打开，并且角色不监听224.0.0.0 - 239.255.255.255。

基于单播和其他配置，我可以想象一种针对我的情况的解决方法，但默认情况下我们在多播上运行，所以它会很可爱。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-31T13:27:38.463

Windows Azure 当前不支持多播 UDP。出于安全考虑，他们决定支持 UDP，但不支持多播。根据 Corey Sanders 最近在[我的 windows azure idea 网站](http://www.mygreatwindowsazureidea.com/forums/169386-cloud-services-web-and-worker-role-/suggestions/547215-multicast-support)上发表的评论，他们不打算在不久的将来实施此功能。

# wordpress - 相同类型的 Wordpress 嵌套短代码

> ID：14594227
> 
> 赞同：0
> 
> 时间：2013-01-29T23:47:27.100
> 
> 标签：wordpress

[http://codex.wordpress.org/Shortcode_API#Nested_Shortcodes](http://codex.wordpress.org/Shortcode_API#Nested_Shortcodes) - 你可以在这里阅读短代码，如：

```
[tag-a]
   [tag-a]
   [/tag-a]
[/tag-a] 
```

不管用。而且我没有看到任何关于它的解释。所以我的问题是如何制作，是否有可能 - 在 wordpress 中创建相同类型的嵌套短代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-24T13:38:11.900

您可以为同一个 shorcode 创建不同的别名

```
add_shortcode('tag','my_shortcode_function');
add_shortcode('sub-tag','my_shortcode_function');
function my_shortcode_function($atts,$content) {
    // do things here
} 
```

然后像这样使用它

```
[tag]
  [sub-tag]
  [/sub-tag]
[/tag] 
```

它们会做同样的事情，但解析器会知道如何关闭它们。

# mysql - Ruby App 中的 DataMapper 数据库池

> ID：14594232
> 
> 赞同：0
> 
> 时间：2013-01-29T23:48:12.113
> 
> 标签：mysql, ruby, ruby-datamapper

我正在编写一个多线程 Ruby 应用程序，该应用程序通过[dm-sweatshop](https://github.com/datamapper/dm-sweatshop)生成数据并将其加载到旧版 MySQL 数据库中以用于负载测试。一切工作正常，有一个例外，我正在加载几百万条记录，但我似乎无法增加数据库连接池的大小来更快地完成工作。它似乎卡在 10 个连接上。我已经尝试增加应用程序本身的线程池大小，但是看着 MySQL，我似乎无法建立超过 10 个连接。

我最初只是使用 URL 进行 DataMapper 设置：

```
DataMapper.setup(:default, 'mysql://user:password@db-server/testing') 
```

但我已移至此尝试设置数据库池大小：

```
DataMapper.setup(:default, {
  :adapter  => 'mysql',
  :pool     => 20,
  :host     => 'db-server',
  :database => 'testing',
  :username => 'user',
  :password => 'password'
}) 
```

如何增加池大小？我觉得我已经倾注了在 DataMapper 上可以找到的所有 RDoc 和文档，但我找不到如何去做。在这一点上，我会切换到 ActiveRecord 来完成这项工作，但它不支持复合主键，我需要这个旧数据库。

作为参考，我将“线程/池”gem 用于多线程，并且该应用程序在 Ruby 1.9.3 中运行。这是我在多个线程中使用 DataMapper 的方式：

```
pool = Thread::Pool.new(@config[:thread_pool_size])
...
10000.times { pool.process {Customer.gen} }
...
pool.shutdown
sleep 5
puts "DONE!" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-04-23T11:20:54.670

考虑到这个问题很老而且 DataMapper 不再维护它有点过时了，但为了完整起见：DataMapper 使用硬编码的池大小为[8](https://github.com/datamapper/do/blob/16564e6dba587e92e41aba376b46ef765f3bffea/data_objects/lib/data_objects/pooling.rb#L128-L130)并且忽略了您的配置。

另请参阅：[Datamapper 和连接池逻辑](https://stackoverflow.com/questions/12865104/datamapper-connection-pool-logic)

# python - 设置一个属性等于另一个

> ID：14594233
> 
> 赞同：0
> 
> 时间：2013-01-29T23:48:11.000
> 
> 标签：python, class, inheritance, attributes

对新手问题感到抱歉，但我对编程很陌生。我的问题是，当从父类继承的属性多于我需要的属性时，如何将其中一个属性设置为等于另一个属性？这是一个例子：

```
class numbers():
     def __init__(self, x, y, z):
     # x, y and z initialized here

class new_numbers(numbers):
     def __init__(self, x, y):
        numbers.__init__(self, x, y=x, z)
        # what im trying to do is get the y attribute in the subclass to be equal to the x attribute, so that when the user is prompted, they enter the x and z values only. 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T23:51:35.720

你需要这样的东西：

```
class numbers(object):
    def __init__(self,x,y,z):
        # numbers initialisation code

class new_numbers(numbers):
    def __init__(self,x,z):
        super(new_numbers,self).__init__(x,x,z)
        # new_numbers initialisation code (if any) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T23:54:14.517

你的意思是这样的吗？

```
class numbers():
     def __init__(self, x, y, z):
         # x, y and z initialized here

class new_numbers(numbers):
     def __init__(self, x, z):
        numbers.__init__(self, x, x, z) 
```

您不能在函数/方法调用中的关键字之后使用非关键字参数。

# php - 编码php文件

> ID：14594235
> 
> 赞同：1
> 
> 时间：2013-01-29T23:48:19.590
> 
> 标签：php, obfuscation, encode

我正在寻找免费的 php 编码器/混淆器。看了[http://adromil.myxednotes.com/](http://adromil.myxednotes.com/)输出很好，但是它使用脚本文件pencode.php 解码这个页面有多难，它使用，

```
eval()
gzinflate()
str_rot13()
base64_decode() 
```

如果我用这个脚本编码一个文件，如果 pencode.php 将与 php 文件一起分发，那么解码同样的难度有多大。

有人可以展示如何使用上述相同的功能进行逆向工程，

pencode.php 的内容，

```
<?php $f='zUZ6YtowEP5cJP7DqU8imTJ1dkparZDWApvYCu1FSXbapsgkF2/NJJHtsIZ2/30XJ6GwvnX7tigE32Zqz50fn7svmo37F96oeblxMofiGbuDMVwngnjuMwEDam9PAke+5KnmVgw36HSS6xww9nJeb24W+8XCBK9DqgIsnsPOROfAoCEXCNWTRXcSYCeNReNwmY4STPrGgicKXEdWJn1HwOIABonKhHOxnzswjv0OS5HW6Xa3y4vgl7IO7vjJ0jaMfhJ45njD+Gd5twrLR9VXlZvmki8iWmjrSO/gsPdKrTnAhACTpICKoVxu0KmodBFKQ3OD0YPMQyISFuofWaIDTBygBOQ6oj/6wLvrWEv1QGMfcIVAMrGC6uJzCFfnxERsqPCKZMHmBDF9TcQAYCZLVN/pLSsNwsKqf2KJMEBamQpFgYxXVQyL2snpM8p6QtB/+2mbjXOjHlqgE/YCNCN4tdQtExl21kU0zhL1B8x2Y342G3txcTIGqSVfTXHvLVrKJrWA9iYD9/P1zGbH76fD89Gl13to4oDxeRFJyJw0PTku8nbk68pp5ayIJkrDkTcaXDgGrCoSDdPo8UhMs4YXqAnzFF9w5Wu0nV1KXaBR6+qbxPPp0ABp8SXv/teDfU3adM3GrwciSff+n1GsUSjvvbW9y5p6t6GHO9kRaUZtJ3ijIuwI9qeOzwj5zME+peW9mNt32pXQpaobTh9ERyffMQ6tFhOLpN+mdRYIlFQ9TbV2o2bF70+6av02XWDCrob+wWf9dj2dfexaF/0+TuQwkVYi+iETCnrYOgOlpUGyNFJ2UllSljkSRo3aKo26hl2x2A+7XDI/4jHywCrJW+tIv61vDHLWPit5MjVfoDzsvWmOWChgmk4fWUiKaoAEjxKl5zkLAna1vJuReztlv7Td0eR3NvLOh1C3/c1nUhfk7OkttIjLsDtD7tf0+xs='; eval(gzinflate(str_rot13(base64_decode('WC1YzNFVr8rMWMtWLFbVKC4pii/KLzE01lVXLEE1M4lCVlrOQlbVQ1bTBAJ4AA==')))); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:37:19.923

我可以解码这个

```
<?php
/**
*
* @ By Mr.Dm4r 
* @ http://hotm-il.com
*
*/

/*
*
*
*
* @summary     IRCI Political CRM
* @description Security encryption function
* @version     1.3.0
* @file        pencode.php
* @author      Ilios Resources and Cosultancy, Inc. (http://ilios-resources.com)
* @contact     http://ilios-resources.com/contactus.php
*
* @copyright Copyright 2012 Ilios Resources and Cosultancy, Inc., all rights reserved.
*
* This source file is free software, under either the GPL v2 license or a
* BSD style license, available at:
*   eula.txt
*   eula.pdf
* 
* 
* For details please refer to: http://ilios-resources.com
*
*/

function php_decrypt($sValue, $sSecretKey)
{
    return rtrim(
        mcrypt_decrypt(
            MCRYPT_RIJNDAEL_256, 
            $sSecretKey, 
            base64_decode($sValue), 
            MCRYPT_MODE_ECB,
            mcrypt_create_iv(
                mcrypt_get_iv_size(
                    MCRYPT_RIJNDAEL_256,
                    MCRYPT_MODE_ECB
                ), 
            MCRYPT_RAND
        )
    ), "\0"
    );
}

function php_encrypt($sValue, $sSecretKey)
{
    return rtrim(
    base64_encode(
            mcrypt_encrypt(
                MCRYPT_RIJNDAEL_256,
                $sSecretKey, $sValue, 
                MCRYPT_MODE_ECB, 
                mcrypt_create_iv(
                    mcrypt_get_iv_size(
                        MCRYPT_RIJNDAEL_256, 
                        MCRYPT_MODE_ECB
                    ), 
                    MCRYPT_RAND)
                )
            ), "\0"
        );
}

function tokenf($algo='         adler32         ', $bsixfour='                  ODc0NzUzNTQ2Ng==               ', $bool=false) {
    return strtoupper(hash(trim($algo), trim($bsixfour), $bool));
}

function machineid() {
    $zv='snefru';
    $v='tiger128,4';
    $data = hash($zv, gethostbyaddr($_SERVER['REMOTE_ADDR']), true);
    return strtoupper(hash($v, $data, false));
}
?> 
```

# matlab - 矩阵列乘法

> ID：14594237
> 
> 赞同：-5
> 
> 时间：2013-01-29T23:48:21.787
> 
> 标签：matlab, matrix, multiplication

我有一个矩阵 NV，但现在我只想将第二列乘以`2`
我应该如何去做？这是我当前的代码：

```
NV=zeros(10,10);

g1= 1:1:10;

n=2;
for b=1:n
NV(:,b)=10.^(g1/10);

end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T00:03:21.317

只需执行以下操作：

```
NV(:,2)= 2*NV(:,2) 
```

# firefox - FF/IE 10 的 ApplicationCache 是否完全实现（或正确实现）？

> ID：14594239
> 
> 赞同：3
> 
> 时间：2013-01-29T23:48:33.513
> 
> 标签：firefox, internet-explorer-10, application-cache

**问题：**

当浏览器设置为“脱机工作”时，无法从 applicationCache（脱机缓存）获取备用资源。

**环境细节：**

*   Windows 7 64 位 SP 1
*   IE 10 版本。10.0.9200.16438
*   火狐版 18.0.1
*   IIS 版本 7.5.7600.16385
*   .manifest MIME 类型为 text/cache-manifest

**清单详情：**

FALLBACK：/AppCacheDemo/Home/CarNew /Sandbox/Car/AppCacheDemo

**如何触发离线模式：**

*   IIS 已停止
*   文件菜单中的脱机工作菜单项被选中

**演示应用程序详细信息：**

随附的演示包含 3 页。

登录页面 (/AppCacheDemo/Home/Index)，它是唯一具有清单文件属性的页面。由于具有 manifest 属性，它会自动放置在 applicationCache 中。

页面的在线版本和对应的离线版本，分别为 /AppCacheDemo/Home/CarNew、/AppCacheDemo/Home/CarNewOffline。

**预期功能：**

浏览器在请求 /AppCacheDemo/Home/Index 时检测到 manifest 属性的存在，并下载 manifest 中列出的所有资源。

用户单击 /AppCacheDemo/Home/Index 上存在的链接并被重定向到 /AppCacheDemo/Home/CarNew

当浏览器检测到互联网连接时，/AppCacheDemo/Home/CarNew 会提供给用户。如果未检测到 Internet 连接，则在向 /AppCacheDemo/Home/CarNew 发出请求时，会从 applicationCache 提供 /AppCacheDemo/Home/CarNewOffline。

**在 Firefox 中重现的步骤（实际功能）：**

1.  打开 FF 并清除缓存（alt + ctrl + delete）。
2.  请求关于：缓存 观察磁盘/离线缓存中列出的“条目数”都列为零。
3.  一个新选项卡并请求 /AppCacheDemo/Home/Index
4.  单击允许按钮以允许 Firefox 存储离线数据。
5.  返回 about:cache 并刷新页面。一个。磁盘缓存条目数应列为 3（可能更多，具体取决于您的环境） b。离线缓存条目数应列为 3。
6.  单击磁盘缓存部分下的链接“列出缓存条目”（或在新选项卡中打开链接），并注意没有指向 /AppCacheDemo/Home/CarNew 的条目
7.  返回打开 /AppCacheDemo/Home/Index 的选项卡，然后单击“让我们建立一个新的汽车链接” 您应该被重定向到 /AppCacheDemo/Home/CarNew
8.  返回 about:cache?device=disk 并注意 /AppCacheDemo/Home/CarNew 存在一个新条目，它的 Fetch count 列为 1。
9.  停止 IIS
10.  从文件菜单中选择“脱机工作”菜单项
11.  刷新当前页面（/AppCacheDemo/Home/CarNew）
12.  返回 about:cache?device=disk 并注意 /AppCacheDemo/Home/CarNew 存在一个新条目，它的 Fetch count 现在列在 2 处。

根据 about:cache?device=disk for /AppCacheDemo/Home/CarNew 中列出的信息，Firefox 似乎正在向用户提供该版本的页面。我期待 /AppCacheDemo/Home/CarNewOffline 改为从 applicationCache 获得服务，因为我在清单中定义了一个后备规则，说明何时请求 /AppCacheDemo/Home/CarNew 并且不存在互联网连接，从 /AppCacheDemo/Home/CarNewOffline 提供服务applicationCache 代替。

**在 Firefox 中重现的步骤（预期功能）：**

在执行以下步骤之前，不要忘记取消选择“脱机工作”。

1.  打开 FF 并清除缓存（alt + ctrl + delete）。
2.  请求关于：缓存 观察磁盘/离线缓存中列出的“条目数”都列为零。
3.  一个新选项卡并请求 /AppCacheDemo/Home/Index
4.  单击允许按钮以允许 Firefox 存储离线数据。
5.  返回 about:cache 并刷新页面。一个。磁盘缓存条目数应列为 3（可能更多，具体取决于您的环境）。一个。离线缓存条目数应列为 3。
6.  单击磁盘缓存部分下的链接“列出缓存条目”（或在新选项卡中打开链接），并注意没有指向 /AppCacheDemo/Home/CarNew 的条目
7.  停止 IIS
8.  从文件菜单中选择“脱机工作”菜单项
9.  在地址栏中键入 /AppCacheDemo/Home/CarNew。一个。您应该被重定向到 /AppCacheDemo/Home/CarNewOffline。地址栏中的 URL 仍应为 /AppCacheDemo/Home/CarNew，但文档的内容应为 /AppCacheDemo/Home/CarNewOffline
10.  在一个新选项卡中，请求 about:cache?device=disk 并注意 /AppCacheDemo/Home/CarNew 不存在任何条目。

因为 /AppCacheDemo/Home/CarNew 不存在于磁盘缓存中，FF 尊重我在清单中定义的后备规则，并改为提供 /AppCacheDemo/Home/CarNewOffline。如果我要

**在 IE 中测试：**

除了导航到 about:cache 之外，上面的步骤或多或少都可以遵循。不同之处在于，当 IE 设置为“离线工作”并请求 /AppCacheDemo/Home/CarNew 时，IE 会显示一个页面，并显示“无法显示此页面”消息。如果直接请求 /AppCacheDemo/Home/CarNewOffline，IE 将提供页面。由于清单中指定了回退规则，我希望 /AppCacheDemo/Home/CarNewOffline 得到服务，但事实并非如此。

**在 Safari/Chrome 中测试：**

Safari/Chrome 没有“脱机工作”菜单项，因此在将 navigator.onLine 报告为 false 之前需要执行一些额外的步骤。我必须从物理上拔下我的 CAT 5 电缆并断开与任何 VPN 的连接，以使浏览器处于真正断开连接的状态；但是，当 /AppCacheDemo/Home/CarNew 没有可用的互联网连接时，会遵守回退规则并提供 /AppCacheDemo/Home/CarNewOffline。

**AppCacheDemo 项目（配置为使用 IIS 的 Microsoft MVC 4 Web 应用程序）：**

[http://www.filedropper.com/appcachedemo](http://www.filedropper.com/appcachedemo)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T01:21:22.913

事实证明，在 Internet Explorer 中测试 AppCache 有点令人沮丧。看来脱机工作模式存在一些问题，确实让调试很痛苦。例如，当我前段时间通过这种方法进行测试时，我发现浏览器会检测到互联网连接，并自动上线以满足请求。这真的让我很烦。

我[联系了](https://twitter.com/jonathansampson/status/296760770455302144)[Eric Lawrence](http://www.ericlawrence.com/)，他是[Fiddler](http://www.fiddler2.com/fiddler2/) （Web 调试器）的作者，也是微软的前任项目经理。埃里克确认确实有问题。我怀疑像 Fiddler 这样的工具可以解决这些问题，这在 Eric 在 Telerik 网站上写的题为[使用 Fiddler 测试 HTML5 AppCache](http://www.telerik.com/automated-testing-tools/blog/13-02-15/testing-html5-appcache-with-fiddler.aspx)的博文中得到了证实。

Eric 的建议对我有用，我能够使用 Fiddler 的 AutoResponder 功能在 Internet Explorer 中毫无问题地测试 AppCache。我希望这对你也有帮助。

# c++ - 使用 c++ 求解 2 个线性方程组

> ID：14594240
> 
> 赞同：-1
> 
> 时间：2013-01-29T23:48:33.550
> 
> 标签：c++, linear-equation

您好，我无法为我的作业编写解决方案代码。我需要要求用户为两个方程输入 6 个变量。仅在成功提取数字后，如果有解决方案，我需要找到每条线的斜率、每条线的 y 截距、每条线上的两个点（有序对，例如 (2,1)）。还有什么关系。我搜索并搜索了大多数数字检查和方程式。我遇到的麻烦是找到方程的点和解。

```
#include <iostream>
#include <limits>

int main()
{
std::cout<<"This program is designed to test two linear equations. \n";
std::cout<<"In order to best solve the system, \n";
std::cout<<"equations will be in the form of a*x + b*y = c. \n";
std::cout<<"and d*x + e*y =f. \n";
std::cout<<"Please enter an integer for a, b, and c. \n";
double a, b, c, d, e, f;

while ((std::cout << "Enter a.") 
     && !(std::cin >> a))
{
    std::cout << "That's not a number ";
    std::cin.clear();
    std::cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n');
}
while ((std::cout << "Enter b.")
          && !(std::cin >> b))
{
    std::cout << "That's not a number ";
    std::cin.clear();
    std::cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n');
}
while ((std::cout << "Enter c.")
          && !(std::cin >> c))
{
    std::cout << "That's not a number ";
    std::cin.clear();
    std::cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n');
}
std::cout<<"Equation 1 is "<<a<<"x +"<<b<<"y ="<<c;

std::cout<<"Please enter an integer for d, e, and f. \n";

while ((std::cout << "Enter d.")
         && !(std::cin >> d))
{
    std::cout << "That's not a number ";
    std::cin.clear();
    std::cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n');
}
while ((std::cout << "Enter e.")
          && !(std::cin >> e))
{
    std::cout << "That's not a number ";
    std::cin.clear();
    std::cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n');
}
while ((std::cout << "Enter f.")
          && !(std::cin >> f))
{
    std::cout << "That's not a number ";
    std::cin.clear();
    std::cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n');
    }
    std::cout<<"Equation 2 is "<<d<<"x +"<<e<<"y ="<<f;

    double slope1, slope2;
    double x1, x2, y1, y2;
    slope1 = (b / a);
    slope2 = (e / d);
    std::cout<<" Slope of Equation 1 is "<<slope1<<"\n";
    std::cout<<" Slope of Equation 2 is "<<slope2<<"\n";

    x1 = ((c*e)-(b*f))/ ((a*e)-(b*d));
    y1 = ((a*f)-(c*d))/ ((a*e)-(b*d));

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:03:08.387

您应该考虑的其他事情是使用矩阵来求解线性方程。

许多计算机使用增强矩阵的梯形形式进行计算。

IE。

2x + 3y = 36 x + 9y = 8

[2 3 36] [1 9 8]

所以这是你的增强矩阵，然后你处理它以将其转换为梯形形式。我的线性代数教授告诉我，这是程序员用来编写方程组计算的最常用方法。

我不完全有资格教它，所以这里有一篇漂亮的文章。

[http://stattrek.com/matrix-algebra/echelon-form.aspx](http://stattrek.com/matrix-algebra/echelon-form.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T23:56:40.447

请参阅[使用行列式求解方程组](http://www.mathnstuff.com/math/algebra/adeterm.htm)

![在此处输入图像描述](../Images/c8a2c1d82ea465822d71ef0a8edbc728.png)

让用户输入`A, B, C, and D, E, F`并接受`cin`您已经在做的使用。（尽管让代码更简单！）（建议：为每个方程使用一个 3 元素数组。）

一旦你有了它，你就可以使用基于行列式的公式来直接计算解决方案。

# java - 递归地反转Java中的链表

> ID：14594241
> 
> 赞同：-2
> 
> 时间：2013-01-29T23:48:34.893
> 
> 标签：java, linked-list, singly-linked-list

我有两个班，`ListNode`和`MyList`。

列表节点：

```
public class ListNode {
    private String str;
    private ListNode next;
    public ListNode(String str) {
        this.str = str;
        next = null;
    }
    public String getString() {
        return str;
    }
    public ListNode getNext() {
        return next;
    }
    public void setNext(ListNode next) {
        this.next = next;
    }
} 
```

我的列表

```
public MyList RecReverse() { //my attempt at the recursive method
    if (head.getNext() == null) {
        return this;
    }
    MyList remainder = new MyList();
    remainder.head = head.getNext(); //start rest of list at the 2nd thing
    ListNode temp = new ListNode(head.getString()); //get the first thing in list
    temp.setNext(null); //set to null to indicate end of list

    remainder.RecReverse(); //reverse the remaining things in the list
    remainder.head.setNext(temp); //then add it to the end of the reversed list

    return remainder;

} 
```

所以你可以看到这个`MyList`类有一个`ListNode`我们需要使用的变量。要求该`RecReverse`方法不带参数并返回一个`MyList`对象。该方法还必须使用函数`Rev(L) = Rev(L`).x`，其中`L``是列表的其余部分，并且`x`是列表中的第一件事。

目前，当我反转列表并打印它时，它只打印以下内容：

> 二
> 
> 一

在控制台中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T00:04:18.323

```
public MyList RecReverse() { //my attempt at the recursive method
    if (head.getNext() == null) {
        return this;
    }

    MyList remainder = new MyList();
    remainder.head = head.getNext(); // New list has rest of this list (after head)
    ListNode temp = new ListNode(head.getString()); // save the first thing in list

    remainder = remainder.RecReverse(); //reverse the things in the new 2nd part list

    remainder.end().setNext(temp); // put old head on the end

    return remainder;

}

private ListNode end() {
    ListNode curr = head;
    while (curr.getNext() != null) {
        curr = curr.getNext();
    }
    return curr;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T00:10:08.493

如果您设法保留原始列表的尾部，您将得到正确的结果。问题在于，在每个递归调用中，您都组装了正确的列表，但返回了包含 2 个元素的列表。有关正确解决方案，请参阅 Lee Meador 的答案；如果将末尾保留在列表结构中，则可以对其进行优化。

# git - Git 在合并多个冲突文件时有错误？

> ID：14594243
> 
> 赞同：0
> 
> 时间：2013-01-29T23:48:51.663
> 
> 标签：git

我最近将我的项目从 CVS 转移到了 Git，因为它听起来很受欢迎。但是，当我尝试合并主要分支时，我感到非常失望。简单来说，有两大分支，master和quickfix。master 从分支点有 4 次提交；quickfix 有 15 次提交，所以这两个分支有很多不同的代码。所以我决定合并它们以使生活更轻松。检查了我输入的主分支

```
ezthumb$ git merge quickfix
Auto-merging eznotify.c
Auto-merging ezthumb.c
Auto-merging ezthumb.h
CONFLICT (content): Merge conflict in ezthumb.h
Auto-merging main.c
Automatic merge failed; fix conflicts and then commit the result. 
```

它只合并了一个文件。显然应该有更多，因为

```
ezthumb$ git status
# On branch master
# Changes to be committed:
#
#   modified:   ChangeLog
#   modified:   Makefile
#   modified:   ezgui.c
#   modified:   eznotify.c
#   modified:   ezthumb.1
#   modified:   ezthumb.c
#   modified:   ezthumb.lsm
#   new file:   ezthumb.pdf
#   modified:   id_lookup.c
#   modified:   libsmm/libsmm.h
#   modified:   libsmm/main.c
#   modified:   libsmm/smm_chdir.c
#   modified:   libsmm/smm_codepage.c
#   modified:   libsmm/smm_cwd_alloc.c
#   modified:   libsmm/smm_cwd_pop.c
#   modified:   libsmm/smm_cwd_push.c
#   modified:   libsmm/smm_filesize.c
#   modified:   libsmm/smm_fstat.c
#   modified:   libsmm/smm_init.c
#   modified:   libsmm/smm_mbstowcs.c
#   modified:   libsmm/smm_pathtrek.c
#   modified:   libsmm/smm_pwuid.c
#   modified:   libsmm/smm_wcstombs.c
#   modified:   main.c
#   modified:   version.c
#
# Unmerged paths:
#   (use "git add/rm <file>..." as appropriate to mark resolution)
#
#   both modified:      ezthumb.h
#
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#   output.map 
```

我将 ezthumb.h 和 git commit -a 修改为存储库。变得更麻烦了。现在 Git 相信这两个分支已经成功合并，所以拒绝接受任何进一步的合并命令。实际上还有十多个不同的文件。我花了两个小时才弄清楚如何摆脱错误的合并。我建立了一个小项目，试图确认 Git 在多个文件合并中的能力。它工作得很好：

```
testproj$ git merge quickfix
Auto-merging fixtoken.c
CONFLICT (content): Merge conflict in fixtoken.c
Auto-merging misc.c
CONFLICT (content): Merge conflict in misc.c
Auto-merging rename.c
CONFLICT (content): Merge conflict in rename.c
Automatic merge failed; fix conflicts and then commit the result. 
```

结果是我所期待的：Git 标出了这些文件中的冲突，以便我可以手动合并它们。对我来说，Git 在两个项目中的行为不同，这听起来很糟糕。我已经为这个问题搜索了两个晚上，没有什么相似之处。有谁知道如何解决这个问题？当然，我可以一个一个地手动区分和合并文件，但是对于版本控制系统来说这将毫无意义。我的 Git 在 Fedora 14 中是 1.7.4.4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:18:04.917

下次，使用`git mergetool`. git 对新手来说要友好得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T00:25:05.597

I don't see any bug. Without any more details, I can only guess that the merge was successful on all but one of your files. The output states that git was unable to automatically merge ezthumb.h. This is because both branches have changes to the same line (or lines) in that file. You need to open the file and edit it the way you want it to appear after the merge. Then do a regular `git add` and then a `git commit`.

# facebook - 有官方的 Facebook Graph Search API 吗？

> ID：14594245
> 
> 赞同：18
> 
> 时间：2013-01-29T23:49:05.200
> 
> 标签：facebook, facebook-graph-api

你们中的大多数人一定听说过新的 Facebook Graph 搜索。我浏览了几十个文档页面，但找不到完整的 API。

我知道使用当前的 Graph API 可以实现非常相似的结果，但是从头开始构建它不值得麻烦。

我的问题是：是否有官方的 Facebook Graph Search API？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-15T14:13:19.403

Graph Search 甚至还没有向整个公众推出。

> 我们在 Graph Search 的开发方面还处于早期阶段。它今天仅提供英文版，您只能在 Facebook 上搜索一部分内容。帖子和 Open Graph 操作（例如，歌曲收听）尚不可用。在接下来的几个月里，我们将致力于这些事情。

[[http://newsroom.fb.com/News/562/Introducing-Graph-Search-Beta](http://newsroom.fb.com/News/562/Introducing-Graph-Search-Beta)]

开发人员现在只优化他们的应用程序，以便通过 Graph Search 发现

> 现在，使用 Graph Search 在 Facebook 上更容易发现应用程序。除了根据您的应用名称显示在搜索结果中之外，它们还可以根据“我的朋友玩的策略游戏”或“我住在旧金山的朋友使用的应用”等条件​​显示在搜索结果中。要针对 Graph Search 优化您的应用程序，请确保您的应用程序详细信息是最新的并且您的应用程序已正确分类。

[[https://developers.facebook.com/blog/post/2013/01/16/platform-updates--operation-developer-love/](https://developers.facebook.com/blog/post/2013/01/16/platform-updates--operation-developer-love/)]

最新的 API 开发是集合和部分

[https://developers.facebook.com/blog/post/2013/05/14/create-beautiful-sections-for-your-app-on-timeline/](https://developers.facebook.com/blog/post/2013/05/14/create-beautiful-sections-for-your-app-on-timeline/)

目前还没有官方的 Graph Search API，如果有的话，它会通过以下地方之一公布

*   开发者博客 - [https://developers.facebook.com/blog/](https://developers.facebook.com/blog/)
*   路线图 - [https://developers.facebook.com/roadmap/](https://developers.facebook.com/roadmap/)

并出现在这里

[https://developers.facebook.com/docs/reference/api/](https://developers.facebook.com/docs/reference/api/)

[https://developers.facebook.com/docs/graph-api/reference/v2.2/](https://developers.facebook.com/docs/graph-api/reference/v2.2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-10T10:04:28.027

Facebook 有一个名为 Graph explorer 的工具：[https ://developers.facebook.com/tools/explorer](https://developers.facebook.com/tools/explorer)

您可能会发现 FQL 查询很有用，例如搜索居住在特定位置附近的用户的朋友：

```
SELECT name, uid, current_location.latitude, current_location.longitude FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1=me()) AND current_location.latitude > 41 AND current_location.latitude < 42 
```

# php - 将 XML 放入数组然后排序？

> ID：14594246
> 
> 赞同：0
> 
> 时间：2013-01-29T23:49:05.140
> 
> 标签：php, arrays

所以假设我有一个这样的 XML 文件

```
<allAnimals>
  <animal>
   <aniID>1</aniID>
   <name>Joo</name>
  </animal>
  <animal>
   <aniID>2</aniID>
   <name>Moo</name>
  </animal>
  <animal>
   <aniID>1</aniID>
   <name>Foo</name>
  </animal>
</allAnimals> 
```

我需要把它变成一个下拉列表，其中显示的值是动物名称，但按字母顺序排列，与该显示值关联的值是动物 ID。

在我看来，我应该能够执行以下操作：

```
<?php
 $xml=simplexml_load_file("animal.xml")
 $animalArray = array();
 foreach($xml->animal as $child)
 {
   $animalArray[$child->name]= $child->aniID;
 }
 ksort($animalArray);
 $page.="<Select>";
 foreach($animalArray AS $key=>$value)
 {
   $page.='<option value="'.$value.'">'.$key."</option>";
 }
 return $page;
 ?> 
```

**更新**

所以这就是我现在所拥有的

```
$xml = simplexml_load_file("animal.xml");

$animals = array();
foreach($xml->organization as $child) {
    $animals[] = array('id' => $child->aniID, 'name' => $child->Name);
}
$page.="<select>";

foreach($animals AS $aniId=>$name)
{
    $page.='<option value="'.$aniId.'">'.$name."</option>";
}
$page.="</select>"; 
```

我们现在不用担心排序，因为现在我在选择列表中得到的只是“array”“array”“array”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T23:52:04.493

很难说出您的期望，但我认为您可能正在寻找这个：

```
foreach($xml->animal as $child)
{
    $animalArray[$child->Name] = $child->aniID;
} 
```

也就是说，如果您希望 $animalArray 看起来像这样：

```
array(
    "Joo" => 1,
    "Moo" => 1,
    "Foo" => 1,
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T23:52:27.580

您没有正确分配数组元素。尝试这个：

```
foreach($xml->animal as $child)
 {
   $animalArray[$child->Name] = $child->aniID;
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T23:53:28.280

尝试这个：

```
foreach($xml->animal as $child) {
  // cast to integer to prevent SimpleXmlElement being used as key
  $aniID = (int) $child->aniID;
  $animalArray[$aniID] = (string) $child->Name;
}

// sort by value
asort($animalArray); 
```

我在这里假设“aniID”是唯一的，而“名称”可能不是唯一的，因此我选择 aniID 作为关联数组的键

然后输出结果

```
foreach($animalArray AS $aniId=>$name)
{
   $page.='<option value="'.$aniId.'">'.$name."</option>";
} 
```

[更新] 添加了强制转换以防止使用 SimpleXml 对象而不是值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T00:37:03.670

小题外话：附加到字符串是相当慢的操作。使用输出缓冲区和回显要快得多。见[http://php.net/manual/en/function.ob-start.php](http://php.net/manual/en/function.ob-start.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T23:52:07.683

如果您尝试向[accociative 数组](http://www.php.net/manual/en/language.types.array.php)添加新索引，请使用以下代码

```
foreach($xml->animal as $child)
{
   $animalArray[$child->Name] = $child->aniID;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-29T23:59:00.050

看看usort函数： http: [//php.net/manual/en/function.usort.php](http://php.net/manual/en/function.usort.php)

```
$xml = simplexml_load_file("animal.xml");

$animals = array();
foreach($xml->animal as $child) {
    $animals[] = array('id' => $child->aniID, 'name' => $child->Name);
}

usort($animals, function($a, $b) { return strcoll($a['name'], $b['name']); });

// Now $animals are sorted by name. 
```

# c# - itextsharp 将点转换为厘米

> ID：14594249
> 
> 赞同：10
> 
> 时间：2013-01-29T23:49:17.170
> 
> 标签：c#, itextsharp

我正在使用`iTextsharp`- 一个 java pdf lib - 动态生成 pdf。现在据我了解，测量值以点为单位。我知道在哪里放置什么以厘米为单位。所以我需要转换：points <-> cm

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-30T07:33:21.193

iText(Sharp) 有一个`Utilities`类（包`com.itextpdf.text`/命名空间`iTextSharp.text`），其中包含几种静态转换方法，特别是：

```
// iText
public static final float millimetersToPoints(final float value);
public static final float millimetersToInches(final float value);
public static final float pointsToMillimeters(final float value);
public static final float pointsToInches(final float value);
public static final float inchesToMillimeters(final float value);
public static final float inchesToPoints(final float value);

// iTextSharp
public static float MillimetersToPoints(float value);
public static float MillimetersToInches(float value);
public static float PointsToMillimeters(float value);
public static float PointsToInches(float value);
public static float InchesToMillimeters(float value);
public static float InchesToPoints(float value); 
```

*您以点为单位指定测量值的*假设仅部分正确，但在您的用例*中动态生成 pdf*就足够了。

不过，一般来说，测量是在**用户空间单位**中指定的，并且默认用户空间单位（即在任何转换到位之前）可以基于每页配置为任何浮点倍数（受实现特定限制） 1/72 英寸：

> **UserUnit** number *（可选；PDF 1.6）*一个正数，应给出默认用户空间单位的大小，以 1⁄72 英寸的倍数表示。支持值的范围应取决于实现。
> 
> 默认值：1.0（用户空间单位为 1⁄72 英寸）。

*[（表 30，第 7.7.3.3 节，ISO 32000-1）](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)*

由于该默认设置，如果没有选择其他选项，您的假设仍然成立。

# java - Graphics2D 没有绘制正确的字体

> ID：14594255
> 
> 赞同：-1
> 
> 时间：2013-01-29T23:49:38.473
> 
> 标签：java, graphics, fonts, awt, graphics2d

我想绘制不同的字体，特别是 Times New Roman（在我使用的 iMac 上可用）

我设置了正确的字体并绘制了字符串，`FontMetrics`我使用的 - 测量了正确的字体 - 但它没有绘制正确的字体！相反，我认为被绘制的是 Arial。

下面我使用了 Graphics2D 对象，但它也不适用于普通的 Graphics 对象。

```
 // FONTS
    Font fBank = new Font("Times New Roman", Font.PLAIN, 9);
    Font fPrice = new Font("Times New Roman", Font.PLAIN, 17);
    Font fnormalText = new Font("Times New Roman", Font.PLAIN, 13);
    Font fHeadlineText = new Font("Times New Roman", Font.PLAIN, 27);
    Font fPayAndDiagnose = new Font("Times New Roman", Font.PLAIN, 12);
    Font fHeadlineNumber = new Font("Times New Roman", Font.PLAIN, 17);

    // FONTMETRIC
    FontMetrics fMetric = _parent.getFontMetrics(fnormalText);

    // LOGO
    int imgPosX = (int) pageFormat.getImageableX() + 30;
    int imgPosY = (int) pageFormat.getImageableY() + 30;

    Image logo = new ImageIcon(getClass().getResource("/at/corgler/images/Print_Header_Plain.jpg")).getImage();
    g.drawImage(logo, imgPosX, imgPosY, 184, 117, null);

    // BILLDATE
    String dateText = "XX, " + new SimpleDateFormat("dd. MMMM yyyy").format(_billDate);

    int datePosY = imgPosY + 105;
    int datePosX = (int) pageFormat.getImageableWidth() - fMetric.stringWidth(dateText);

    g.setFont(fnormalText);
    g.drawString(dateText, datePosX, datePosY);

    // HEADLINE WITH NUMBER
    String headlineText = "Honorarnote";
    String numberText = "Nr. " + _payNumber + "/" + new SimpleDateFormat("yy").format(new Date());

    fMetric = _parent.getFontMetrics(fHeadlineText);
    int headlineWidth = fMetric.stringWidth(headlineText);

    fMetric = _parent.getFontMetrics(fHeadlineNumber);
    int numberWidth = fMetric.stringWidth(numberText);

    int headlinePosY = datePosY + 65;
    int headlineTextPosX = (int) ((pageFormat.getImageableWidth() / 2) - ((headlineWidth + numberWidth) / 2));
    int headlineNumberPosX = headlineTextPosX + headlineWidth + 3;

    g.setFont(fHeadlineText);
    g.drawString(headlineText, headlineTextPosX, headlinePosY);

    g.setFont(fHeadlineNumber);
    g.drawString(numberText, headlineNumberPosX, headlinePosY);

    g.drawLine(headlineTextPosX - 1, headlinePosY + 2, headlineTextPosX + headlineWidth, headlinePosY + 2);
    g.setStroke(new BasicStroke(0.5f));
    g.dispose(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:12:49.483

我认为您没有向我们提供足够的信息来充分帮助您。

一些可运行的代码或您预期和实际结果的图片会很好。

文本渲染有很多陷阱，第一个是，你需要补偿字体的上升，以确保它在基线上绘制......

您可能想查看2D 图形教程中的[使用文本 API](http://docs.oracle.com/javase/tutorial/2d/text/fontconcepts.html)进行复习...

![在此处输入图像描述](../Images/f20ba7fee2b59beddda52bbd6d6e3d81.png)

```
public class TestFontGraphics {

    public static void main(String[] args) {
        new TestFontGraphics();
    }

    public TestFontGraphics() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);                
            }
        });
    }

    public class TestPane extends JPanel {

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            int x = 10;
            int y = 10;
            y += drawFont("Arial", x, y, g);
            y += drawFont("Times New Roman", x, y, g);
        }

        private int drawFont(String fontName, int x, int y, Graphics g) {

            Font font = new Font(fontName, Font.PLAIN, 24);
            g.setFont(font);
            FontMetrics fm = g.getFontMetrics();

            g.setColor(Color.RED);
            g.drawLine(x, y, x + fm.stringWidth(fontName), y);
            g.setColor(Color.GREEN);
            g.drawLine(x, y + fm.getAscent(), x + fm.stringWidth(fontName), y + fm.getAscent());
            g.setColor(Color.BLUE);
            g.drawLine(x, y + (fm.getDescent() + fm.getAscent()), x + fm.stringWidth(fontName), y + (fm.getDescent() + fm.getAscent()));
            g.setColor(Color.BLACK);
            g.drawString(fontName, x, y + fm.getAscent());

            return fm.getHeight();

        }

    }

} 
```

# ruby-on-rails - 最新迁移到 Heroku 似乎不起作用

> ID：14594256
> 
> 赞同：0
> 
> 时间：2013-01-29T23:49:47.310
> 
> 标签：ruby-on-rails, heroku, migration

在我最近的提交中，我在名为 Submissions 的表/模型中添加了一个名为“accepted”的布尔列。它在我的测试和开发环境中迁移得很好，但是当我将它推送到 Heroku 时，它似乎不起作用。推动后我使用：

```
heroku run rake db:migrate 
```

这是输出：

```
Running `rake db:migrate` attached to terminal... up, run.2430
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/Rakefile:7)
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/Rakefile:7)
** [NewRelic][01/29/13 23:23:10 +0000 0d3d429d-5437-42d0-9c57-e15606717231 (2)] INFO : Starting the New Relic Agent.
** [NewRelic][01/29/13 23:23:10 +0000 0d3d429d-5437-42d0-9c57-e15606717231 (2)] INFO : Environment: production
** [NewRelic][01/29/13 23:23:10 +0000 0d3d429d-5437-42d0-9c57-e15606717231 (2)] INFO : Dispatcher: thin
** [NewRelic][01/29/13 23:23:10 +0000 0d3d429d-5437-42d0-9c57-e15606717231 (2)] INFO : Application: chicagoimprovfestival
** [NewRelic][01/29/13 23:23:10 +0000 0d3d429d-5437-42d0-9c57-e15606717231 (2)] INFO : Installing ActiveRecord instrumentation
** [NewRelic][01/29/13 23:23:10 +0000 0d3d429d-5437-42d0-9c57-e15606717231 (2)] INFO : Installing Net instrumentation
** [NewRelic][01/29/13 23:23:10 +0000 0d3d429d-5437-42d0-9c57-e15606717231 (2)] INFO : Installing Rails 3 Controller instrumentation
** [NewRelic][01/29/13 23:23:10 +0000 0d3d429d-5437-42d0-9c57-e15606717231 (2)] INFO : Installing Rails 3.1/3.2 view instrumentation
** [NewRelic][01/29/13 23:23:10 +0000 0d3d429d-5437-42d0-9c57-e15606717231 (2)] INFO : Installing Rails3 Error instrumentation
** [NewRelic][01/29/13 23:23:10 +0000 0d3d429d-5437-42d0-9c57-e15606717231 (2)] INFO : Finished instrumentation
** [NewRelic][01/29/13 23:23:12 +0000 0d3d429d-5437-42d0-9c57-e15606717231 (2)] INFO : Starting Agent shutdown 
```

在日志中，我收到此错误：

```
ActionView::Template::Error (undefined method `accepted' for #<Submission:0x00000005e71080>): 
```

当然，我在开发中不会遇到这样的错误。有什么建议吗？我的迁移失败了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T00:27:01.600

迁移没有添加到提交中。我修复了它，现在它似乎正在工作。

# sql-server - freeproccache 之后的缓慢

> ID：14594258
> 
> 赞同：-2
> 
> 时间：2013-01-29T23:49:50.240
> 
> 标签：sql-server, tsql

所以我有一个在应用程序中很慢，但在 SSMS 中很快，就像在[Sommarskog 的查询计划之谜文章中](http://www.sommarskog.se/query-plan-mysteries.html#dmvgettingplans)一样。

查询是具有许多可能变化的参数的搜索。奇怪的是，当我重新索引时，它会在 2 秒内执行。然后我调用 dbcc freeproccache，无论我再次执行多少次存储过程，它都需要 40 秒。如果我再次重新索引，性能就会恢复。如果我释放 proc cachec，它会回到 40 秒。

如何在重新索引后立即执行以保留在缓存中并可供应用程序使用的良好执行计划？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T23:58:13.133

可能是[参数嗅探](http://blogs.technet.com/b/mdegre/archive/2012/03/19/what-is-parameter-sniffing.aspx)问题。参数嗅探基本上是 SQL Server 使用您传入的第一组参数来确定将用于所有未来执行的执行计划。如果这些参数生成的执行计划适用于将要执行的所有各种条件，这可能会很好，但有时可能会出现问题。

检查这一点的一种快速方法是使用 `RECOMPILE` [查询提示](http://msdn.microsoft.com/en-us/library/ms181714.aspx)并查看加快速度的 fi。如果您决定走这条路，请确保在将其投入生产环境之前完全了解您所做的事情的后果。

# c - 无法将 char 数组分配给我的结构数组的第三个插槽

> ID：14594263
> 
> 赞同：0
> 
> 时间：2013-01-29T23:50:33.650
> 
> 标签：c, arrays, struct

```
#include <stdio.h>
#include <string.h>

#define NAMELENGTH 20
#define MAXPEOPLE 10

struct people{
    char name[NAMELENGTH];

    int ratings[MAXPEOPLE];
};

int main(void)
{
    struct people *men[MAXPEOPLE];
    strcpy(men[2]->name,"pie");

    return 0;
} 
```

它在尝试为 men[2]->name men[]->name 分配任何值时崩溃，它是一个字符数组，前两个插槽 men[0]->name 和 men[1]->name 工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:52:27.670

`men[2]`不是指针，因此当您使用`->`运算符时，您会尝试取消引用不是指针的东西。你必须使用`malloc`，然后你可以使用指向分配空间的指针

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

#define NAMELENGTH 20
#define MAXPEOPLE 10

struct people{
    char name[NAMELENGTH];

    int ratings[MAXPEOPLE];
};

int main(void)
{
    struct people *men[MAXPEOPLE];
    men[2] = malloc(sizeof(struct people));
    strcpy(men[2]->name,"pie");

    return 0;
} 
```

关于它对前 2 个“插槽”有效（对您而言）这一事实，它确实不应该，因为这些指针也未定义。对我来说，它仅适用于索引 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T23:54:16.597

您只创建了一个指针数组，而不是一个数组`struct people`：

```
struct people *men[MAXPEOPLE]; 
```

这只会创建一个指针数组，但指针还没有指向任何东西，因为您没有为它们分配任何空间。这意味着您正在复制到一个`name`实际上并不存在的文件中。`struct people`要创建一个你想要的数组：

```
struct people men[MAXPEOPLE];
strcpy(men[2].name,"pie"); 
```

# ios - 从矩形缩放 UIView 的正确转换？

> ID：14594267
> 
> 赞同：10
> 
> 时间：2013-01-29T23:51:03.473
> 
> 标签：ios, objective-c, cgaffinetransform, cgrect, rect

我想在视图上模拟“放大”。较大的视图将作为子视图添加到较小的视图的超级视图中，并且较大的视图应该看起来像是从较小的视图放大。给定小视图的矩形`fromRect`和放大的大视图的最后一帧，`finalRect`正确的变换是什么？

![在此处输入图像描述](../Images/f8e92233d121edd06b1b7d03f53158db.png)

我想方法签名将如下所示，并且`view`是超级视图。我写了这个来帮助自己，但还无法弄清楚。

```
-(CGAffineTransform) translatedAndScaledTransformUsingViewRect:(CGRect)viewRect fromRect:(CGRect)fromRect inView:(UIView*) view
{
//calculate the scaling based on the final frame of viewToBeStretched (viewRect) vs the "fromRect"
CGFloat scaleX = ?, scaleY = ?;
CGAffineTransform scaleTransform = CGAffineTransformMakeScale(scaleX, scaleY);

//use translation instead of modifying the view's center, since frame changes with transforms are no good
CGFloat translationX = ?, translationY =?;
CGAffineTransform translationTransform = CGAffineTransformMakeTranslation(translationX, translationY);

CGAffineTransform final = CGAffineTransformConcat(scaleTransform, translationTransform);

return final;
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-08T01:27:42.887

所以实际实现非常简单：

```
- (CGAffineTransform)translatedAndScaledTransformUsingViewRect:(CGRect)viewRect fromRect:(CGRect)fromRect {

    CGSize scales = CGSizeMake(viewRect.size.width/fromRect.size.width, viewRect.size.height/fromRect.size.height);
    CGPoint offset = CGPointMake(CGRectGetMidX(viewRect) - CGRectGetMidX(fromRect), CGRectGetMidY(viewRect) - CGRectGetMidY(fromRect));
    return CGAffineTransformMake(scales.width, 0, 0, scales.height, offset.x, offset.y);

} 
```

您可以在此处查看完整示例：[https ://github.com/vGubriienko/TransformTest](https://github.com/vGubriienko/TransformTest)

（我仍然需要更新它以使用身份作为完整图像）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T01:34:07.033

如果只处理图像，则可以利用 UIImageView 的 contentMode 属性并将其设置为 UIViewContentModeScaleAspectFill。然后你可以做一个 [UIView transitionWithView:] 并将你的 UIImageView 的框架设置为你的最终 CGRect （或你的整个屏幕，因为它会正确填充）。它会做你正在寻找的放大效果。

最好的方法是创建 UIImageView 的副本作为您的 superview 的子视图，并将其放在原始 UIImageView 的顶部并从那里执行转换。

我写了一些函数来将它扩展到 UITableViewController 一段时间，它可以让你放大任何 UIImageView 并带有淡入黑色和缩放过渡，最终图像是可缩放的并且可以被关闭。

[https://github.com/PeterCen/iOS-Image-Presenter/](https://github.com/PeterCen/iOS-Image-Presenter/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T01:18:14.383

事实证明，最好的解决方案是使用矩阵手动创建变换。

# mysql - MySQL Query 中的 CASE 子句有问题

> ID：14594268
> 
> 赞同：0
> 
> 时间：2013-01-29T23:51:16.453
> 
> 标签：mysql, case

```
UPDATE main_cats set cat_order=(
    CASE         
         when cat_order='4' THEN (4-1) 
         WHEN cat_order=(4-1) THEN '4'
    END) 
```

当我对得到的底部数据运行上述查询时。

```
cat_id  cat_name     cat_order cat_visible
 0      NO MAIN CAT  0           N
 5      CLOTHES      1           N
 6      GIFTS        2           N
 7      ARTWORK      3           Y
 8      TEST CATEGO  4           N 
```

我最终得到

```
cat_id  cat_name     cat_order cat_visible
 0      NO MAIN CAT  0           N
 5      CLOTHES      0           N
 6      GIFTS        0           N 
 7      ARTWORK      3           Y
 8      TEST CATEGO  3           N 
```

不知道为什么其他人在 CASE 语句中归零。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:56:45.273

这是因为您在没有 where 的情况下更新列，而您的条件仅在两种情况下设置值。其余的我猜它假设为零而没有输入。我认为这可以工作：

```
UPDATE main_cats set cat_order=(
CASE         
     when cat_order='4' THEN (4-1) 
     WHEN cat_order=(4-1) THEN '4'
     ELSE cat_order
END) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T23:57:48.607

首先，在您的案例语句中，您有数字（4-1）和字符串值“4”。没有默认 case 语句，因此如果您的 cat_order 是表 db 中的数字字段，请检查默认值。它必须是 0，因此零来自表 db 列的默认值，并且与您的 case 语句无关。

# javascript - 如何使用 javascript 制作淡入/淡出标语

> ID：14594270
> 
> 赞同：1
> 
> 时间：2013-01-29T23:51:34.997
> 
> 标签：javascript, jquery

所以我有这段代码可以在刷新时修改 div 的内容。

但我也希望它在一段时间内淡入淡出一个新的随机文本。我不知道从哪里开始这是我的原始代码：

HTML：

```
<div id="logo" class="container">
    <h1>InsiderIndy</h1>
    <p id="myQuote">Slogan</p>
</div> 
```

JavaScript：

```
<script type="text/javascript">
var myQuotes = new Array();

myQuotes[0] = "Quote1";
myQuotes[1] = "Quote2";
myQuotes[2] = "Quote3"
myQuotes[3] = "Quote4"
myQuotes[4] = "Quote5"
myQuotes[5] = "Quote6"

var myRandom = Math.floor(Math.random()*myQuotes.length);

$('#myQuote').html(myQuotes[myRandom]);
</script> 
```

有任何想法吗？谢谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T00:00:26.240

完整的工作示例，具有渐变速度、旋转之间的暂停时间和开始位置的可调节功能。当它到达结尾时也返回到开头：

编辑：我第一次读你的问题太快了，写了一个顺序轮换的函数。我已经更新了我的答案以包含两个函数——一个用于顺序旋转`startSeq()`，第二个用于随机旋转`startRandom()`。

[提琴手](http://jsfiddle.net/GdmQE/)

```
function startSeq(i,iSpeed, iPause) {

    $('#myQuote').html(myQuotes[i]);
    $('#myQuote').fadeIn(iSpeed,function() {
        setTimeout(function() {
            $('#myQuote').fadeOut(iSpeed,function() {
                setTimeout(function() {
                     if (i++ == myQuotes.length) i =0;
                    startSeq(i,iSpeed,iPause); 
                },iPause);
            });
        },iPause);
    });
}

function startRandom(iSpeed, iPause) {
    var i = Math.floor(Math.random()*myQuotes.length);
    $('#myQuote').html(myQuotes[i]);
    $('#myQuote').fadeIn(iSpeed,function() {
        setTimeout(function() {
            $('#myQuote').fadeOut(iSpeed,function() {
                setTimeout(function() {
                    startRandom(iSpeed,iPause); 
                },iPause);
            });
        },iPause);
    });
}

//startSeq(0,1000,1000);
startRandom(1000,1000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T23:57:02.987

看起来像 jQuery，所以...

```
(function quote() {
    var myRandom = Math.floor(Math.random()*myQuotes.length);

    $('#myQuote').delay(5000)
                 .fadeOut(500, function() {
                     $(this).text(myQuotes[myRandom])
                            .fadeIn(500, quote);
                  });
})(); 
```

您可能应该花一些时间研究一下[jQuery 文档](http://api.jquery.com)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T23:57:10.520

使用 jQuery：

```
var refreshMillis = 10 * 1000; // 10 seconds.
setInterval(function() {
  var myRandom = Math.floor(Math.random()*myQuotes.length)
    , $myQuote = $('#myQuote');
  $myQuote.fadeOut(function() {
    $myQuote.html(myQuotes[myRandom]).fadeIn();
  });
}, refreshMillis); 
```

这是一个[有效的 jsFiddle](http://jsfiddle.net/beku2/)。

# android - 如何在 Android 项目的 Ant build.xml 中包含 .jar 文件

> ID：14594272
> 
> 赞同：1
> 
> 时间：2013-01-29T23:51:43.493
> 
> 标签：android, ant

我正在开发我的第一个 Android 应用程序，而*不是*使用 Eclipse。我正在尝试按照[此处](http://developer.samsung.com/s-pen-sdk/technical-docs/S-Pen-SDK-2-2-5-Tutorial)的说明进行操作，该说明是为在 Eclipse 中开发而编写的，尽管我将 Emacs 与 Ant 的`build.xml`. 您将如何执行以下操作：

> 1.  在 Eclipse 中，将 .jar 文件添加到构建路径。

与蚂蚁`build.xml`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:58:41.193

您想将它添加到您的`javac`任务的类路径中：

如果你有这样的东西，那么你只需将它与其余的 jars 添加到同一个文件夹中

```
<path id="master-classpath">
  <fileset dir="lib">
    <include name="*.jar"/>
  </fileset>
</path>
<javac destdir="build">
  <src path="src"/>
   <classpath refid="master-classpath"/>
</javac> 
```

# c# - 从日期列表中获取日期格式

> ID：14594274
> 
> 赞同：0
> 
> 时间：2013-01-29T23:51:48.457
> 
> 标签：c#, validation, datetime

我正在编写一个小程序，它获取 CSV 文件并将它们更新到数据库中。其中一个文件有一个`date-of-birth`列，并且该列的格式并不总是相同。

我已经开始编写代码来检查整个列表以确定格式，因为单个日期可能不明确（例如 '10/12/12'、'10/12/2012'、'12/10/2012'、'2012 /12/10' 可以是同一日期）。我假设给定列表的格式是一致的。

这是我到目前为止的代码，

```
private static string GetDateFormat(string[] date)
{
    DateTime result;
    CultureInfo ci = CultureInfo.InvariantCulture;
    string[] fmts = ci.DateTimeFormat.GetAllDateTimePatterns();
    bool error;
    date = date.Where(x => !string.IsNullOrEmpty(x)).ToArray();
    foreach (string a in fmts)
    {
        error = false;
        for (int i = 0; i < date.Count(); i++)
        {
            if (!DateTime.TryParseExact(date[i], a, ci, DateTimeStyles.AssumeLocal, out result))
            {
                error = true;
            }

        }
        if (error == false)
        {
            return a;
        }            
    }
    throw new CsvToImsException("Error: Date Format is inconsistant or unrecognised");
} 
```

`'4/5/2012'`但由于每个列表中的小问题（一个列表的日期设置为而不是`'04/05/2012'`，另一个有`'4/05/2012 0:00'`等） ，我无法让它与我拥有的任何示例日期一起使用。

这一定是一个普遍的问题。有没有人为这个应用程序编写了足够广泛的库？我正在考虑按`'/'`字符拆分日期以进行解析，但是有没有更简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:49:58.473

这里有一些东西可以让您走上您需要的正确轨道 请阅读示例代码中的注释，因为如果日期带有单月值和单日值，您只需要添加 2 个条件 if 语句

```
//of course you will not hard code the dates you will replace DateString with your 
//Date Variable you can also convert the code below into a method if you so 
string DateString = "04/05/2012";
var dateLength = DateString.Length;
IFormatProvider culture = new CultureInfo("en-US", true);
DateTime dateVal;
switch (dateLength)
{
     case 8:
        {
          dateVal = DateTime.ParseExact(DateString, "M/d/yyyy", culture);
            break;
        }
    case 9:
        {
            // he you can add your own additional if(){} condition to check if date value Day has a length of 2 
            // if so then you know that the date is in m/dd/yyyy format
            // otherwise you know it's in mm/d/yyyy but 
            dateVal = DateTime.ParseExact(DateString, "M/dd/yyyy", culture);
            break;
        }
    case 10:
        {
            dateVal = DateTime.ParseExact(DateString, "MM/dd/yyyy", culture);
            break;
        }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T05:52:36.157

我最终使用了一种类似于我原来的方法，并从 DJ KRAZE 的代码中添加了一些内容。这适用于除了真正奇怪的之外的所有`4/05/2012 0:00`情况，但即使是这样也可以通过添加特殊情况来解决`fmts.Add("d/MM/yyyy h:mm")`。

```
//Parse DOB to check format
string[] dateList = new string[PersonList.Count()];
for (int i = 0; i < PersonList.Count(); i++)
{
    PersonList[i].DOB = PersonList[i].DOB.Replace('-', '/').Replace('.', '/').Trim();
    dateList[i] = PersonList[i].DOB;
}
string dateFormat = GetDateFormat(dateList);

private static string GetDateFormat(string[] date)
{
    DateTime result;
    CultureInfo ci = CultureInfo.InvariantCulture;
    List<string> fmts = ci.DateTimeFormat.GetAllDateTimePatterns().ToList();
    fmts.Add("yyyy/MM/d");
    fmts.Add("d/MM/yyyy");
    bool error;
    date = date.Where(x => !string.IsNullOrEmpty(x)).ToArray();
    foreach (string a in fmts)
    {
        error = false;
        for (int i = 0; i < date.Count(); i++)
        {
            if (!DateTime.TryParseExact(date[i], a, ci, DateTimeStyles.AssumeLocal, out result))
            {
                error = true;
            }
        }
        if (error == false)
        {
            return a;
        }          
    }
    throw new CsvToImsException("Error: Date Format is inconsistant or unrecognised");
} 
```

然后我可以在 for 循环中使用日期格式来解析列表中的每个日期：

```
IFormatProvider culture = new CultureInfo("en-US", true);
BirthDate birthDate = DateTime.ParseExact(person.DOB, dateFormat, culture); 
```

# jquery - Js：添加嵌套对象文字项-无法弄清楚

> ID：14594275
> 
> 赞同：0
> 
> 时间：2013-01-29T23:51:52.450
> 
> 标签：jquery, object, nested, extend, literals

这是我的代码：

```
Cart = {
    items: {
        id1: { cost: 55 },
        id3: { cost: 20 },
        id2: { cost: 15 }
    },

    blah blah blah
} 
```

现在我想用动态键和值向 Cart.items 添加值，但我被卡住了。

```
var id = 5;
Cart.items["id"+id].cost = 20; 
```

我也在使用 jquery 库，所以我不确定 .extend 是否更适合这个。

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:57:36.823

`Cart.items["id"+id]`可能不存在。首先添加此检查：

```
if (!Cart.items.hasOwnProperty("id" + id) {
   Cart.items["id" + id] = {};
} 
```

然后，您可以在该级别随意添加键/值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T23:57:01.737

它应该是：

```
Cart.items["id"+id] = {cost: 20}; 
```

这是因为您必须先声明一个新对象。`Cart.items["id"+id]`此时仍未定义。

# php - 确定调用 `GET_LOCK` 失败的原因

> ID：14594280
> 
> 赞同：0
> 
> 时间：2013-01-29T23:52:09.500
> 
> 标签：php, mysql

有没有办法确定**为什么**调用 MySQL 的`GET_LOCK`函数失败（即返回 0？），或者告诉我为什么我对下面问题的天真理解是不正确的？

根据[手册](http://dev.mysql.com/doc/refman/5.0/en/miscellaneous-functions.html#function_get-lock)

> 尝试使用由字符串 str 给出的名称获取锁，使用 timeout 秒的超时。如果锁定成功返回 1，如果尝试超时返回 0（例如，因为另一个客户端之前锁定了该名称）

我正在调试一个尝试使用以下 SQL 获取锁的应用程序

```
SELECT GET_LOCK('thinkup_2_b2_dev.crawler', 1) AS result 
```

每当此代码从 PHP 上下文运行时，`result`始终为零。这发生在我的本地开发机器上，并且发生在我第一次运行应用程序时。在其他世界中，我相对确定没有以前的锁。

~~这是因为，当我使用第三方工具（特别是 SequelPro）连接到数据库并运行以下命令时~~

~~`SHOW FULL PROCESSLIST`~~;

~~我没有看到任何关于锁的提及（据我了解，这些锁会在我运行时出现`SHOW FULL PROCESSLIST`）。我所看到的只是单行（我相信这与我当前使用的连接相对应。）~~

~~`9617 root localhost thinkup_2_b2_dev Query 0 NULL SHOW FULL PROCESSLIST`~~

（根据一些独立测试，似乎`SHOW FULL PROCESSLIST`没有显示这些锁）

有没有办法让 MySQL 告诉我为什么它从调用返回零`get_lock`？如果没有，是否有人对进一步调试此问题有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-05-08T05:00:32.660

正如文档所述，该函数仅在超时时才返回零。这表明即使没有会话持有锁，也会遇到 1 秒的超时。为了验证确实如此，我建议尝试使用更大的超时时间（例如 10 秒）。

如果即使超时时间较长，该函数仍返回零，则特定锁存在系统性问题。如果 1 秒的超时确实太短并且 10 秒的超时解决了它，我建议打开一个错误报告，因为它不是预期的行为。

# jquery-plugins - 用于选择 HTML/Dom 节点的 jQuery 扩展

> ID：14594281
> 
> 赞同：0
> 
> 时间：2013-01-29T23:52:12.757
> 
> 标签：jquery-plugins

我正在寻找一个 jQuery 插件/扩展，它允许我选择特定的 DOM 元素/节点，就像 Firebug 的 Chrome 网络检查器一样。

例如：：

![在此处输入图像描述](../Images/5309c538fb805db5af55bfc516b4ab64.png)

除了突出显示节点并能够访问 DOM 节点之外，我不需要任何功能。

任何想法或方向将不胜感激。

# orchardcms - 自定义模块页面的页面未找到错误

> ID：14594286
> 
> 赞同：2
> 
> 时间：2013-01-29T23:52:31.813
> 
> 标签：orchardcms

我在尝试在 VS 中调试某些东西时遇到了一些问题。所以我关闭了 Visual Studio，删除了 .suo 文件并再次打开了解决方案。当我尝试运行该项目时，我收到了 404 page not found 错误。我删除了 appdata 文件夹，删除了数据库表，然后再次设置了 orchard。没运气。所有 Orchard 页面都可以正常工作（主页、管理仪表板..），但是我的任何自定义模块中的页面都不能正常工作，所有这些页面都出现 404 错误。我检查了管理仪表板，所有模块都已启用。

知道如何解决这个问题吗？

谢谢。

# visual-studio-2010 - 在 VS2010 中编辑 Crystal Reports RPC 文件

> ID：14594288
> 
> 赞同：1
> 
> 时间：2013-01-29T23:52:45.023
> 
> 标签：visual-studio-2010, crystal-reports

我有 VS2010 的 Crystal Reports 13.0.5。我有一些需要编辑的 *.rpc 格式的报告模板（只是轻微的布局更改），但我无法在 Visual Studio 中打开。我可以很好地打开 *.rpt 文件，但不能打开 *.rpc 文件。

关于如何在无需购买完整版 Crystal 的情况下编辑这些内容的任何想法？

另外，*.rpc 和 *.rpt 文件有什么区别？几乎我所有的“水晶报告 rpc 文件”或“编辑水晶报告 rpc vs2010”的谷歌搜索都返回有关远程过程调用的结果，我知道这不是我想要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-10T21:53:08.550

显然，只需将文件从 *.rpc 重命名为 *.rpt 就足以在 Visual Sutido 中编辑报告。

# java - Json.getString() 上的 NullPointerException

> ID：14594289
> 
> 赞同：0
> 
> 时间：2013-01-29T23:52:57.363
> 
> 标签：java, android, nullpointerexception

我正在尝试使用我的第一个 android 应用程序从 mysql 数据库登录用户，因此我使用用户名和密码来识别每个用户。

我的问题是 eclipse`NullPointerException`在这一行中抛出了一个错误：

```
if (json.getString(KEY_SUCCESS) != null 
```

日志：

```
FATAL EXCEPTION: AsyncTask #1
01-29 23:32:18.583: E/AndroidRuntime(17340): java.lang.RuntimeException: An error occured while executing doInBackground()
01-29 23:32:18.583: E/AndroidRuntime(17340):    at android.os.AsyncTask$3.done(AsyncTask.java:278)
01-29 23:32:18.583: E/AndroidRuntime(17340):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
01-29 23:32:18.583: E/AndroidRuntime(17340):    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
01-29 23:32:18.583: E/AndroidRuntime(17340):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
01-29 23:32:18.583: E/AndroidRuntime(17340):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
01-29 23:32:18.583: E/AndroidRuntime(17340):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
01-29 23:32:18.583: E/AndroidRuntime(17340):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
01-29 23:32:18.583: E/AndroidRuntime(17340):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
01-29 23:32:18.583: E/AndroidRuntime(17340):    at java.lang.Thread.run(Thread.java:856)
01-29 23:32:18.583: E/AndroidRuntime(17340): Caused by: java.lang.NullPointerException
01-29 23:32:18.583: E/AndroidRuntime(17340):    at com.example.androidhive.AsyncLogin.doInBackground(LoginScreen.java:109)
01-29 23:32:18.583: E/AndroidRuntime(17340):    at com.example.androidhive.AsyncLogin.doInBackground(LoginScreen.java:1)
01-29 23:32:18.583: E/AndroidRuntime(17340):    at android.os.AsyncTask$2.call(AsyncTask.java:264)
01-29 23:32:18.583: E/AndroidRuntime(17340):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
01-29 23:32:18.583: E/AndroidRuntime(17340):    ... 5 more 
```

* * *

```
public class LoginScreen extends Activity {

Button buttonConnecter;
EditText inputUserName, inputPassword;
TextView tv;

StringBuffer buffer;

String codsinc;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.login);

    inputUserName = (EditText) findViewById(R.id.inputUserName);
    inputPassword = (EditText) findViewById(R.id.inputPassword);
    buttonConnecter = (Button) findViewById(R.id.buttonConnecter);

    tv = (TextView) findViewById(R.id.tv);

    // Login button Click Event
    buttonConnecter.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {

            String username = inputUserName.getText().toString();
            String password = inputPassword.getText().toString();

            AsyncLogin LoginPass = new AsyncLogin();
            Boolean Result = null;
            try {
                Result = LoginPass.execute(username, password).get();
                if (Result == true) {

                    // Launch Dashboard Screen
                    Intent dashboard = new Intent(LoginScreen.this,
                            Account.class);

                    startActivity(dashboard);

                    // Close Login Screen
                    finish();
                } else {
                    // Error in login
                    tv.setText("Password ou identifiant incorrects");
                }
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (ExecutionException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }

    });

}

} 
```

* * *

```
class AsyncLogin extends AsyncTask<String, Void, Boolean> {

private static String KEY_SUCCESS = "success";

protected Boolean doInBackground(String... params) {
    // TODO Auto-generated method stub
    UserFunctions userFunction = new UserFunctions();
    Log.d("Button", "Login");
    JSONObject json = userFunction.loginUser(params[0], params[1]);

    // check for login response
    try {
        if (json.getString(KEY_SUCCESS) != null) {

            String res = json.getString(KEY_SUCCESS);

            if (Integer.parseInt(res) == 1) {

                return true;

            } else {
                return false;
            }
        }
    } catch (JSONException e) {
        e.printStackTrace();
    }

    return null;
}

} 
```

公共类用户函数{

```
private JSONParser jsonParser;

private static String loginURL = "http://website.org/android_login_api/";
private static String login_tag = "login";

// constructor
public UserFunctions(){
    jsonParser = new JSONParser();
}

/**
 * function make Login Request
 * @param username
 * @param password
 * */
public JSONObject loginUser(String username, String password){
    // Building Parameters
    List<NameValuePair> params = new ArrayList<NameValuePair>();
    params.add(new BasicNameValuePair("tag", login_tag));
    params.add(new BasicNameValuePair("username", username));
    params.add(new BasicNameValuePair("password", password));
    JSONObject json = jsonParser.getJSONFromUrl(loginURL, params);
    //Log.e("JSON", json.toString());
    return json;
}

/**
 * Function get Login status
 * */
public boolean isUserLoggedIn(Context context){
    DatabaseHandler db = new DatabaseHandler(context);
    int count = db.getRowCount();
    if(count > 0){
        // user logged in
        return true;
    }
    return false;
}

/**
 * Function to logout user
 * Reset Database
 * */
public boolean logoutUser(Context context){
    DatabaseHandler db = new DatabaseHandler(context);
    db.resetTables();
    return true;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:14:41.560

检查您的 json 文本的实际外观，我在网上搜索了 getJSONFromUrl 并从此处找到的源代码：

```
http://www.androidhive.info/2012/01/android-json-parsing-tutorial/ 
```

如果 json 错误，它实际上会返回 null。

# python - 是否有 python 模块来求解/集成随机微分方程系统？

> ID：14594290
> 
> 赞同：7
> 
> 时间：2013-01-29T23:52:59.693
> 
> 标签：python, stochastic, integrator

我有一个我想解决的随机微分方程系统。我希望这个问题已经得到解决。我有点担心构建自己的求解器，因为我担心我的求解器会太慢，并且可能存在数值稳定性问题。

是否有针对此类问题的 python 模块？

如果没有，是否有解决此类系统的标准方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T01:01:50.317

有一个：[http ://diffusion.cgu.edu.tw/ftp/sde/](http://diffusion.cgu.edu.tw/ftp/sde/)

来自网站的示例：

```
""" add required Python packages """
from pysde import *
from sympy import *
""" Variables acclaimed """
x,dx=symbols('x dx')
r,G,e,d=symbols('r G epsilon delta')
""" Solve Kolmogorov Forward Equation """
l=sde.KolmogorovFE_Spdf(r*(G-x),e*x*(1-x),0,1)
sol=l.subs({e:r*d})

pprint(sol) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-07-05T19:23:14.060

已接受答案中的链接不再起作用。还有sdeint：

[https://pypi.org/project/sdeint/#description](https://pypi.org/project/sdeint/#description)

它是在接受答案几年后发布的，看起来处于半主动开发阶段。文档中的第二个示例有一个具有恒定系数的 SDE 系统。我不确定他们是否支持更复杂的 SDE 系统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-17T03:29:37.893

[diffeqpy](https://github.com/SciML/diffeqpy)包将 Julia 的*DifferentialEquations.jl*引入了 Python。这可以做很多事情，包括随机微分方程。

# directions - 默认情况下，我们如何从 Google Direction API 获得从 A 点到 B 点的最短距离路线

> ID：14594291
> 
> 赞同：9
> 
> 时间：2013-01-29T23:53:01.610
> 
> 标签：directions, google-directions-api

默认情况下，我们如何从 Google Direction API 建议的替代路线中获得从 A 点到 B 点的最短距离路线？默认情况下，它会根据当前的交通状况为我们提供最短持续时间的路线。我注意到如果您打开“provideRouteAlternatives = true”，谷歌会响应多个替代路线，我想知道我们是否可以向 Google API 发送一个参数，以便默认情况下它总是返回最短距离路线

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-15T19:16:12.580

正如 Rameshwor 所提到的，谷歌返回的建议路线可能会针对行程时间而不是行程距离进行优化。如果指定了一个或多个航路点，那么无论如何只能返回一条路线，但最好以编程方式假设始终返回多条路线。

下面的例子展示了一个简单的方法，使用 jQuery 找到最短路程的路线；请注意，此代码未优化，但应该可以工作：

```
var route_options = [];

for (var i = 0; i < response.routes.length; i++)
{
    var route = response.routes[i];
    var distance = 0;

    // Total the legs to find the overall journey distance for each route option
    for (var j = 0; j < route.legs.length; j++)
    {
        distance += route.legs[j].distance.value; // metres
    }

    route_options.push({
        'route_id': i,
        'distance': distance
    });
}

/*
route_options = [
    {route_id:0, distance:35125},
    {route_id:1, distance:22918},
    {route_id:2, distance:20561}
];
*/

// Sort the route options; shortest to longest distance in ascending order
route_options.sort(function(a, b) {
    return parseInt(a.distance) - parseInt(b.distance);
});

/*
route_options = [
    {route_id:2, distance:20561},
    {route_id:1, distance:22918},
    {route_id:0, distance:35125}
];
*/    

var shortest_distance = (route_options[0]['distance'] * 0.001); // convert metres to kilometres 
```

然后，您可以访问“route_id”值以访问响应对象中的正确路由。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-09T07:09:28.257

默认情况下，Google 会根据当前的交通状况为我们提供持续时间最短的路线。我注意到，如果您打开“provideRouteAlternatives=true”，谷歌会响应多个替代路线。当您不要求备用路线时，默认情况下您会获得最优化的路线，尽管这不一定针对距离进行优化。如果您试图获得最短的路线，那么执行此操作的方法是让您的应用程序评估响应中每条路线的总距离，并以编程方式选择距离最短的路线。在请求中没有可以传递给 Google 的查询参数来表示“仅返回最短路径”。

检查此演示[http://webavenue.com.au/demo/google-shortest-distance/route.html](http://webavenue.com.au/demo/google-shortest-distance/route.html)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2016-07-07T10:11:19.293

在实践中，使用最短路线而不是最快路线通常不是一个好主意。

当最短的路线不是最快的时候，就时间、燃油效率，有时甚至是人身安全而言，它很可能是一条质量较低的路线。这些因素对大多数在路上的司机来说更为重要。

有一些解决方法可能会产生更短的路线，但它们有很大的缺点，所以我建议不要使用它们：

1.  请求双向路由。由于单向街道、转弯限制和高速公路出口位置不同等情况，从 A 到 B 的方向可能无法得出从 B 到 A 的可行路线。在两个方向上请求路线并采用最短路线可能会产生一条在一个方向上不可用的路线。

2.  请求替代路线。询问替代路线并选择最短路线可以产生比默认返回的路线更短的路线。但是，替代路线通常不稳定（可能会随着短期路况的变化而变化），也不能保证包括最短的路线。这意味着最短路径可能仍然不可用，而且这种方法找到的最短路径可能会随着时间的推移而改变，给人一种不稳定的印象。

我经常看到对最短路线的请求来自于目标是在一天和一周的特定时间相当现实的驾驶距离的用例，例如上班/下班的工人。在这些情况下，可以通过`departure_time`设置为一周内（未来，而不是过去）内一天中的相关时间（和一周中的某天）来请求行车路线，以获得受当时典型交通状况影响的路线一天和一周。

**注意**：这仅在请求包含 API 密钥或 Google Maps API 高级计划客户端 ID 时可用。

# python - 为什么浮点值在python中四舍五入？

> ID：14594293
> 
> 赞同：0
> 
> 时间：2013-01-29T23:53:17.887
> 
> 标签：python, floating-point, floating-accuracy

我已经读过 Python 支持的最小浮点值是 power -308。确切的数字并不重要，因为：

```
>>> -1.42108547152e-14 + 360.0 == 360.0
True 
```

那个怎么样？我在 Windows 上有 CPython 2.7.3。

它导致我的错误。如果我将我的值 -1.42108547152e-14 （以某种方式计算）与某个“增量”进行比较并执行以下操作，我的问题将得到解决：

```
if v < delta:
    v = 0 
```

我应该选择什么三角洲？换句话说，如果值小于这个效果会发生什么？

请注意，NumPy 不可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T13:05:25.897

一个（过度）简化的解释是：一个（正常的）双精度浮点数持有（相当于）*大约* **16 个**十进制数字。让我们尝试手动添加：

```
 360.0000000000000000000000000
-  0.0000000000000142108547152
______________________________
 359.9999999999999857891452848 
```

如果将其四舍五入为 16 位（点前 3 位，点后 13 位），则得到 360。

现在，实际上这是以二进制形式完成的。因此，“16 位十进制数字”不是一个精确的规则。实际上，此处（介于`256.0`和之间`512.0`）的精度是数字的小数部分的 44 个二进制数字。所以最接近`360`可以表示的数字是减`360`{次方}，它给出：`2``-44`

```
 359.9999999999999431565811391 (truncated) 
```

但是由于我们之前的结果`360.0`比这个数字更接近，这`360.0`就是你得到的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:16:54.347

大多数处理器使用 IEEE 754 二进制浮点运算。在这种格式中，数字表示为符号*s*、分数*f*和指数*e*。分数也称为有效数。

符号*s*是位 0 或 1，分别表示 + 或 -。

在双精度中，尾数*f*是 53 位二进制数字，第一位后有小数点，例如 1.1010000100100110011100011011001100101010000000100011 [2]。

在双精度中，指数*e*是从 –1022 到 +1023 的整数。

由符号、有效数和指数表示的组合值是 (-1) ^(*s*) •2 ^(*e*) •<em>f。

当您添加两个数字时，处理器会计算出结果使用的指数。然后，给定该指数，它会计算出用于结果的分数。当您添加一个大数字和一个小数字时，整个结果将不适合有效数字。因此，处理器必须将数学结果四舍五入，使其适合有效数字。

在您询问的情况下，第二个添加的数字非常小，以至于四舍五入产生与第一个数字相同的值。为了更改第一个数字，您必须添加一个值，该值至少是第一个数字有效位中最低位值的一半。（四舍五入时，如果不适合有效数字的部分超过有效数字的最低位的一半，则向上舍入。如果恰好是一半，则如果使最低位为零则向上舍入，如果使最低位为零则向下舍入使最低位为零。）

浮点数还有其他问题，例如次正规数、无穷大、指数的存储方式等等，但上面解释了您询问的行为。

在您询问的特定情况下，添加到 360，添加任何大于 2 ^(-45)的值将产生大于 360 的总和。添加任何小于或等于 2 ^(-45)的正值将恰好产生 360。这是因为最高360 中的位是 2 ⁸，因此其有效位的最低位是 2 ^(-44)。

# c# - Oracle linq 到实体查询返回重复的列

> ID：14594300
> 
> 赞同：0
> 
> 时间：2013-01-29T23:53:47.813
> 
> 标签：c#, linq, oracle, ado.net, linq-to-entities

我正在尝试在使用 ADO.NET 的项目中查询 Oracle DB（版本 11.2.0.2.0），在 .NET 4 上编译（如果 Windows XP 与之兼容，我将在 .NET 4.5 上编译），并使用linq 到实体以执行查询。我还在使用 Oracle Developer Tools for Visual Studio 和 ODP.NET 版本 11.2.0.3.20。但是，每当在应用程序中执行查询时，我都会返回一个包含不正确数据的对象列表。我所说的不正确数据的意思是：我在实体对象中有 5 个属性，其中两个属性没有设置为实体键。未设置为实体键的两个属性包含返回的所有记录的相同数据......但是当我使用数据库查询客户端手动对数据库进行查询时，我在每条记录的这些列中得到不同的值！

这是我得到的自动生成的代码（使用 DBContext，但我已经验证过 ObjectContext 也会发生这种情况）：

```
public partial class EntityObj
{
    public string EntityKey1 { get; set; }
    public string EntityKey2 { get; set; }
    public string EntityKey3 { get; set; }
    public Nullable<decimal> NonEntityKey1 { get; set; }
    public string NonEntityKey2 { get; set; }
} 
```

这是我对实体的 linq 代码：

```
using (Entities context = new Entities())
{
    string formattedStr = Decimal.Parse(str).ToString();
    var objs = (from obj in context.EntityObjs
                where obj.Number == formattedStr
                orderby obj.EntityKey3 , obj.NonEntityKey2, obj.NonEntityKey1
                select obj);
    // Process results...
} 
```

以下是我手动执行查询时得到的结果集示例：

```
| 实体密钥1 | 实体键2 | 实体键3 | 非实体键1 | 非实体键2 |
-------------------------------------------------- --------------------------------
| Val1.1 | VAL1.2 | Val1.3 | 1 | Val1.4 |
-------------------------------------------------- --------------------------------
| Val2.1 | Val2.2 | Val2.3 | 2 | Val2.4 |
-------------------------------------------------- --------------------------------
| Val3.1 | Val3.2 | Val3.3 | 3 | Val3.4 |
-------------------------------------------------- --------------------------------
| Val4.1 | Val4.2 | Val4.3 | 4 | Val4.4 |

```

这是我使用 linq to 实体时得到的结果集示例：

```
| 实体密钥1 | 实体键2 | 实体键3 | 非实体键1 | 非实体键2 |
-------------------------------------------------- --------------------------------
| Val1.1 | VAL1.2 | Val1.3 | 1 | Val1.4 |
-------------------------------------------------- --------------------------------
| Val2.1 | Val2.2 | Val2.3 | 1 | Val1.4 |
-------------------------------------------------- --------------------------------
| Val3.1 | Val3.2 | Val3.3 | 1 | Val1.4 |
-------------------------------------------------- --------------------------------
| Val4.1 | Val4.2 | Val4.3 | 1 | Val1.4 |

```

**为什么我会看到我看到的结果以及如何修复它以返回正确的数据而不使非实体键字段实体键？（它们不能是键，因为它们可以为空）**

**编辑：**
我还应该指出，当我执行以下查询时，我没有看到相同的问题......但我真的希望事情能像我所说的那样工作前。

```
using (Entities context = new Entities())
{
    string formattedStr = Decimal.Parse(str).ToString();
    var objs = (from obj in context.EntityObjs
                where obj.Number == formattedStr
                orderby obj.EntityKey3 , obj.NonEntityKey2, obj.NonEntityKey1
                select new
                {
                    EntityKey1 = obj.EntityKey1,
                    EntityKey2 = obj.EntityKey2,
                    EntityKey3 = obj.EntityKey3,
                    NonEntityKey1 = obj.NonEntityKey1,
                    NonEntityKey2 = obj.NonEntityKey2
                });
    // Process results...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:40:45.903

我想问题可能是因为您的实体对象中可能没有好的主键。看看[这里给出的解决方案。](https://stackoverflow.com/a/1023997/1203288). 如果这是您的问题，这可能会解决您的问题。

# spring - 带有 Spring、Spring MVC、Hibernate、JPA 的项目的 Maven 3 原型

> ID：14594303
> 
> 赞同：19
> 
> 时间：2013-01-29T23:53:58.307
> 
> 标签：spring, hibernate, maven, jpa, archetypes

我正在尝试使用 Maven 3 创建一个使用 Spring 3、Spring MVC、Hibernate 4 和 JPA 的项目。但是，当我执行时：

```
mvn archetype:generate 
```

列出的原型都不包括所有这些；甚至那些接近的似乎都是特殊项目，例如与 Flex 的项目。我想避免使用额外的模块，例如 Flex 会挤满项目和配置文件。那么，我可以使用 Maven 3 的原型来创建这样的项目吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-08-05T01:22:48.420

GitHub 上提供了一个很棒的[Spring MVC 快速入门原型，由](https://github.com/kolorobot/spring-mvc-quickstart-archetype)[kolorobot](https://github.com/kolorobot)提供。提供了有关如何将其安装到本地 Maven 存储库并使用它来创建新的 Spring MVC 项目的良好说明。他甚至在原型项目中包含了 Tomcat 7 Maven 插件，这样新创建的 Spring MVC 就可以从命令行运行，而无需手动将其部署到应用程序服务器。

Kolorobot 的示例应用程序包括以下内容：

*   Servlet 3.0 环境的 No-xml Spring MVC 3.2 Web 应用程序
*   配置到位的 Apache Tiles，
*   引导程序
*   JPA 2.0（休眠/HSQLDB）
*   JUnit/Mockito
*   弹簧安全 3.1

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-30T01:30:45.823

可能重复：[spring 3 MVC 应用程序是否有 maven 2 原型？](https://stackoverflow.com/questions/2757269/is-there-a-maven-2-archetype-for-spring-3-mvc-applications)

也就是说，我鼓励您考虑制作自己的原型。原因是，不管你最终从别人那里得到什么，你都可以在不长的时间内做得更好，一个体面的 Java 项目最终会产生很多 jar 项目。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-04-09T18:14:10.213

看看[http://start.spring.io/](http://start.spring.io/)它基本上为您提供了一个 maven 或 gradle 构建的启动器。

注意：这是一个基于 Spring Boot 的原型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-15T21:19:17.877

使用[appFuse](http://appfuse.org/display/APF/Home)框架，您可以创建一个支持 jpa 等的 Spring MVC 原型......

查看它的[快速入门指南](http://appfuse.org/display/APF/AppFuse+QuickStart)，了解如何基于此框架创建原型。

AppFuse 中的基础框架：

*   引导程序和 jQuery
*   Maven、Hibernate、Spring 和 Spring 安全性
*   Java 7、注释、JSP 2.1、Servlet 3.0
*   Web 框架：JSF、Struts 2、Spring MVC、Tapestry 5、Wicket
*   JPA 支持

例如创建一个 appFuse 灯原型：

```
mvn archetype:generate -B -DarchetypeGroupId=org.appfuse.archetypes 
-DarchetypeArtifactId=appfuse-light-struts-archetype -DarchetypeVersion=2.2.1 
-DgroupId=com.mycompany -DartifactId=myproject 
```

# mysql - Doctrine Native SQL 多对多查询

> ID：14594313
> 
> 赞同：1
> 
> 时间：2013-01-29T23:54:48.040
> 
> 标签：mysql, symfony, doctrine

我的数据库中的表、表`Students`和表之间存在多对多关系。`Programs``student``program``student_program`

我正在尝试加入这两个实体并执行一些需要子查询的自定义查询。这意味着 Doctrine QueryBuilder 不能工作，因为它不支持子查询。

相反，我正在尝试 NativeSQL 功能，并且取得了不错的进展。但是，当我尝试`SELECT`从`Program`实体中获取某些内容时，我收到错误消息`Notice: Undefined index: Bundle\Entity\Program in vendor/doctrine/orm/lib/Doctrine/ORM/Internal/Hydration/ObjectHydrator.php line 180`。

```
 $mapping = new \Doctrine\ORM\Query\ResultSetMappingBuilder($em);
    $mapping->addRootEntityFromClassMetadata('Student', 's');
    $mapping->addJoinedEntityFromClassMetadata('Program', 'p', 's', 'programs', array('id' => 'program_id'));
    // Query based on form 
    $sql = 'SELECT s.id, s.last_name, p.name <---- problem when this is added
            FROM student s
            JOIN program p
            ';

    $query = $em->createNativeQuery($sql, $mapping);

    $students = $query->getResult(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T01:49:24.840

不是直接答案，但学说 2 确实支持子查询。只需创建一个查询，然后将 dql 输入 where 类。这个例子有点冗长，但它工作得很好：

```
public function queryGames($search)
{
    // Pull params
    $ages    = $this->getValues($search,'ages');
    $genders = $this->getValues($search,'genders');
    $regions = $this->getValues($search,'regions');

    $sortBy  = $this->getValues($search,'sortBy',1);
    $date1   = $this->getValues($search,'date1');
    $date2   = $this->getValues($search,'date2');
    $time1   = $this->getValues($search,'time1');
    $time2   = $this->getValues($search,'time2');

    $projectId = $this->getValues($search,'projectId');

    // Build query
    $em = $this->getEntityManager();
    $qbGameId = $em->createQueryBuilder(); // ### SUB QUERY ###

    $qbGameId->addSelect('distinct gameGameId.id');

    $qbGameId->from('ZaysoCoreBundle:Event','gameGameId');

    $qbGameId->leftJoin('gameGameId.teams',   'gameTeamGameId');
    $qbGameId->leftJoin('gameTeamGameId.team','teamGameId');

    if ($projectId) $qbGameId->andWhere($qbGameId->expr()->in('gameGameId.projectId',$projectId));

    if ($date1) $qbGameId->andWhere($qbGameId->expr()->gte('gameGameId.date',$date1));
    if ($date2) $qbGameId->andWhere($qbGameId->expr()->lte('gameGameId.date',$date2));

    if ($time1) $qbGameId->andWhere($qbGameId->expr()->gte('gameGameId.time',$time1));
    if ($time2) $qbGameId->andWhere($qbGameId->expr()->lte('gameGameId.time',$time2));

    if ($ages)    $qbGameId->andWhere($qbGameId->expr()->in('teamGameId.age',   $ages));
    if ($genders) $qbGameId->andWhere($qbGameId->expr()->in('teamGameId.gender',$genders));

    if ($regions) 
    {
        // $regions[] = NULL;
        // $qbGameId->andWhere($qbGameId->expr()->in('teamGameId.org',   $regions));

        $qbGameId->andWhere($qbGameId->expr()->orX(
            $qbGameId->expr()->in('teamGameId.org',$regions),
            $qbGameId->expr()->isNull('teamGameId.org')
        ));

    }
    //$gameIds = $qbGameId->getQuery()->getArrayResult();
    //Debug::dump($gameIds);die();
    //return $gameIds;

    // Games
    $qbGames = $em->createQueryBuilder();

    $qbGames->addSelect('game');
    $qbGames->addSelect('gameTeam');
    $qbGames->addSelect('team');
    $qbGames->addSelect('field');

    $qbGames->addSelect('gamePerson');
    $qbGames->addSelect('person');

    $qbGames->from('ZaysoCoreBundle:Event','game');

    $qbGames->leftJoin('game.teams',   'gameTeam');
    $qbGames->leftJoin('game.persons', 'gamePerson');
    $qbGames->leftJoin('game.field',   'field');

    $qbGames->leftJoin('gameTeam.team',     'team');
    $qbGames->leftJoin('gamePerson.person', 'person');

    $qbGames->andWhere($qbGames->expr()->in('game.id',$qbGameId->getDQL())); // ### THE TRICK ###

    switch($sortBy)
    {
        case 1:
            $qbGames->addOrderBy('game.date');
            $qbGames->addOrderBy('game.time');
            $qbGames->addOrderBy('field.key1');
            break;
        case 2:
            $qbGames->addOrderBy('game.date');
            $qbGames->addOrderBy('field.key1');
            $qbGames->addOrderBy('game.time');
            break;
        case 3:
            $qbGames->addOrderBy('game.date');
            $qbGames->addOrderBy('team.age');
            $qbGames->addOrderBy('game.time');
            $qbGames->addOrderBy('field.key1');
            break;
    }

    // Always get an array even if no records found
    $query = $qbGames->getQuery();
    $items = $query->getResult();

    return $items;
} 
```

# c++ - 构建开放资产导入库 (Assimp) 时遇到问题

> ID：14594315
> 
> 赞同：8
> 
> 时间：2013-01-29T23:55:01.570
> 
> 标签：c++, import, cmake, build, shared-libraries

我刚刚下载了 Open Asset Import Library (Assimp)，这是一个用于将 .3DS 和 .Obj 等 3D 文件格式导入源代码的 API。这样做可以更轻松地使用 openGL 渲染网格。

问题是，我无法建立图书馆。它提供了关于如何构建它并连接到诸如 XCode（我正在使用）之类的编译器的非常模糊和神秘的指示。它说我应该使用一个名为 CMake 的程序来构建库。我已经下载了 CMake 并尝试使用它，但它还没有为我工作。

这里有没有人使用 CMake 或其他工具成功构建和安装 Assimp？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-09-20T17:38:23.763

我完全同意 Mac 的文档有点缺乏，但我已经设法（经过几次尝试）来构建和安装库。

开始之前的几件事：确保您已安装 XCode 命令行工具（即安装 GNU 编译器）。这些是我遵循的步骤：

1.  下载最新版本的 Assimp 并解压（我从这里得到文件，只有源代码的文件：http: [//sourceforge.net/projects/assimp/files/assimp-3.0/](http://sourceforge.net/projects/assimp/files/assimp-3.0/)）
2.  如果没有，请安装 CMake（[http://www.cmake.org/cmake/resources/software.html](http://www.cmake.org/cmake/resources/software.html)；我目前使用的是旧版本，但最新版本也应该可以正常工作）
3.  创建一个构建目录（应该在源目录之外）
4.  打开 CMake 并将其指向您在步骤 1 中创建的文件夹（其中显示“源代码在哪里”）；另一个文件夹（“在哪里构建二进制文件”）应指向在步骤 3 中创建的文件夹
5.  点击底部的“配置”；它会询问您要使用哪个环境。我选择了“Eclipse CDT 4 - Unix Makefiles”
6.  你应该得到一个选项列表；我选择的两个是“BUILD_STATIC_LIB”和“ENABLE_BOOST_WORKAROUND”
7.  点击“生成”
8.  现在您应该移动到终端并转到在步骤 3 中创建的文件夹
9.  输入“make”并启动它；你应该看到构建没有问题
10.  构建完成后，输入“sudo make install”；它会询问您的密码并安装库

在最后一步之后，您应该能够在代码中包含该库：

```
#include <assimp/cimport.h>
#include <assimp/scene.h>
#include <assimp/postprocess.h> 
```

确保您还包括用于链接的库；链接时，您应该将 -lassimp 添加到列表中

如果您对上述步骤有任何问题，请告诉我！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-29T22:41:36.213

我有一种稍微不同的方法，可以帮助我在 Mac 上构建 assimp。如果它对任何人有帮助，这是我采取的步骤。

## 第 1 步 - 使用 Homebrew 安装库

`brew install glm glew assimp`

## 第 2 步 - 使用以下内容更新我的 CMake

```
FIND_PACKAGE(ASSIMP REQUIRED)
LINK_DIRECTORIES(/usr/local/lib)

add_executable(
    myExecutable
    ...
)

TARGET_LINK_LIBRARIES( myExecutable PRIVATE ${ASSIMP_LIBRARIES} ) 
```

# mysql - 在ubuntu上卸载mysql worbench后如何完全删除模式数据

> ID：14594316
> 
> 赞同：0
> 
> 时间：2013-01-29T23:55:01.927
> 
> 标签：mysql, ubuntu, workbench

我用突触包完全删除了我的工作台应用程序并安装了一个新的工作台。当我打开它时，所有已保存的旧数据库（带表）再次显示。因此，如果工作台将我的旧数据保存在我的 ubuntu 上，那么我可以删除它吗？只是为了给你更多的细节，我已经删除了缓存，甚至 /.mysql/workbench/ 文件夹，它没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:45:23.373

MySQL Workbench 只是一个与您的 MySQL 实例交互的程序，因此卸载它不会删除您的任何数据或结构。如果您想彻底清除实例中的所有内容，可能最简单的方法是卸载，然后重新安装 mysql-server，如下所示：

```
sudo apt-get purge mysql-server && sudo apt-get install mysql-server 
```

如果你有依赖它的包，你可以通过命令行界面删除所有数据库。确保您已安装 mysql-client，然后打开终端并键入

```
mysql -u root -p 
```

系统将提示您输入 root 密码，然后您将看到交互式提示。类型

```
show databases; 
```

获取实例中的数据库列表，然后键入

```
drop database `<database name>`; 
```

对于列表中的每个数据库（除了 information_schema）。按Ctrl-D，你就完成了！

# amazon-web-services - 从 Cloudbees 部署到 Amazon EC2

> ID：14594318
> 
> 赞同：1
> 
> 时间：2013-01-29T23:55:04.893
> 
> 标签：amazon-web-services, amazon-ec2, cloudbees

是否可以设置 Cloudbees 以在成功构建后部署到 Amazon EC2 实例？

谢谢，W

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:26:08.467

是的，但是您没有提供许多有关“部署”的详细信息。我想你的意思是使用scp？如果是这样，您必须将您的[Jenkins 公钥](https://wiki.cloudbees.com/bin/view/DEV/How+to+use+Private+GitHub+Repositories+with+CloudBees)复制到授权密钥文件中，并确保您的[安全组规则](https://wiki.cloudbees.com/bin/view/DEV/Allowing+Access+to+EC2+Resources+From+CloudBees+Slaves)允许 CloudBees 的构建机器与您的 EC2 实例通信。

# php - 使用 mod_rewrite 时如何显示结果路径？

> ID：14594319
> 
> 赞同：0
> 
> 时间：2013-01-29T23:55:12.037
> 
> 标签：php, apache, mod-rewrite, redirect, localhost

我有一段时间试图让 apache mod_rewrite 规则起作用。使这个过程最困难的事情是我无法知道最终的输出字符串是什么。我继续得到 404 页，但这并没有告诉我太多，只是我做错了什么。是否有某种方法可以呼出最终的重写而不是将我重定向到 404？

. . . 以防万一有人想帮助我解决我最初的问题，我正在努力做到这一点，以便任何去的人都会`/server/root/to/folder/public_html/`被重定向到`/server/root/to/folder/public_html/destinationFolder/`. 以下是我尝试过的数百种变体之一：

```
<IfModule mod_rewrite.c>

    RewriteEngine On

    RewriteCond $1 !^(favicon\.ico|assets)

    RewriteRule ^public_html/(.*) destinationFolder/$1 [L]

</IfModule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T03:13:18.510

您正在使用系统路径。Apache mod_rewrite 仅适用于 URL（.htaccess 文件中隐含 PT 标志），这是您的第一个错误。

`public_html`通常是根目录。例如：`http://mydomain.com`

那么，一个完整的规则集可能是这样的：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI}  !^(favicon\.ico|assets)  [NC]
RewriteRule  ^(.*)/?$    DestinationFolder/$1        [L] 
```

静默地图

`http://mydomain.com/Anything`

到：

`http://mydomain.com/DestinationFolder/Anything`

除非`anything`是文件`favicon.ico`或文件夹`/assets`

对于永久重定向，替换`[L]`为`[R=301,L]`

这只是一个例子。必须修改规则和参数以满足实际要求。

# c# - AForge.NET 比较并找到两个图像中的 Blob（连接组件）

> ID：14594320
> 
> 赞同：2
> 
> 时间：2013-01-29T23:55:11.663
> 
> 标签：c#, image-processing, aforge

我想使用 AForge.NET 库来检查相似的图像并定位差异。我可以想象以下算法。

一个。比较 2 个图像，生成二进制图像，其中白色像素表示差异，黑色像素表示匹配。

湾。使用 BlobCounter 搜索连接的像素。

a) 可以使用什么过滤器？如何计算每个 Blob 中的像素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-05T09:17:48.260

看看我之前的回答[Aforge Blob Detection](https://stackoverflow.com/questions/10578365/aforge-blob-detection/19781814#19781814)

对于 A)，您可以使用 ThresholdDifference，这将在没有变化时为您提供黑色像素，在有差异时为您提供白色像素。您可以使用 Image>Invert 来反转它（[http://www.aforgenet.com/framework/docs/html/458e1304-0858-ae29-113f-e2ec9072c626.htm](http://www.aforgenet.com/framework/docs/html/458e1304-0858-ae29-113f-e2ec9072c626.htm)）

至于 B)，您可以使用 Connected Component Labeling（参见帖子），这将给出对象的大致宽度和高度。如果您想准确计算有多少像素不同，您可能需要为此编写一个程序。这不是很困难，它只是一个两个嵌套的 For 循环，它将遍历每个 X、Y 像素，然后每次在其上找到特定颜色时都会增加一个计数器。

# objective-c - 以编程方式在网络（以太网或 WiFi）之间进行选择

> ID：14594321
> 
> 赞同：2
> 
> 时间：2013-01-29T23:55:12.847
> 
> 标签：objective-c, macos, cocoa

在我的 Mac 上，我有两种可用的网络 - 以太网、WiFi。

在进行服务器调用时，我可以以某种方式控制用于进行服务器调用的网络通道吗？因此，在进行服务器调用之前，我想指定用于该调用的网络通道 - 以太网或 WiFi。

如何使用目标 C 来实现这一点。我正在开发一个可可应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T01:41:17.163

您可以使用系统配置框架修改可用的路由。在 scutil(8) 中，您可以看到当前安装在`State:/Network/Service/*`字典中的路由，并且为了以编程方式操作这些路由，您必须使用`SCDynamicStore`C 框架。

但是，如果您只想在 WLAN 上做一些临时服务，您可以使用`CoreWLAN`Objective-C 中的框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T00:09:51.410

我假设两个 NIC 都连接到 Internet（所以都有一个 IP）：

我认为您无法在代码中解决它（不是 100% 确定）。但是您可以做的是设置一些本地路由，配置哪些流量通过哪个 NIC。

查看路由命令（'man route'）。

这可能会帮助您：

[https://serverfault.com/questions/100613/public-traffic-to-go-over-1-nic-and-private-traffic-to-use-another-nic](https://serverfault.com/questions/100613/public-traffic-to-go-over-1-nic-and-private-traffic-to-use-another-nic)

# php - 在页面加载时显示一个随机列表

> ID：14594322
> 
> 赞同：-4
> 
> 时间：2013-01-29T23:55:19.260
> 
> 标签：php

帮助伙计们

```
<ul>
<li><p>“I should say upfront that I have never been in a cellar in my life. In fact, I can see no reason why anyone should ever go into a cellar unless there is wine involved.”&lt;/p>
<span class="author">~Rachel Hawkins, Hex Hall</span></li>
<li><p>“There is truth in wine, but you never see it listed in the ingredients on the label”&lt;/p><span class="author">~Josh Stern</span></li>
<li><p>Wine is bottled poetry.</p><span class="author">~Robert Louis Stevenson</span></li>
</ul> 
```

只是想在每次页面刷新或加载时显示 1 个随机列表

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T00:13:06.630

这可以通过使用 PHP[数组](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDMQFjAA&url=http://php.net/manual/en/language.types.array.php&ei=TmQIUZagH8ebrQHkt4HwCQ&usg=AFQjCNF-MzMu2teC7wnhAZOTmjhTGC9Zcg&bvm=bv.41642243,d.aWM)和[array_rand()](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDMQFjAA&url=http://php.net/manual/en/function.array-rand.php&ei=Z2QIUfTNNY_OqwGx74HoCA&usg=AFQjCNF8F0jAGopK0kfX4npnAeJVPksGfQ&bvm=bv.41642243,d.aWM) 函数轻松完成。这是一个简单的例子：

```
<?php
 $quote_list = array("<li>Quote 1</li>", "<li>Quote 2</li>", "<li>Quote 3</li>");
  $rand_quote = $quote_list[array_rand($quote_list)];
   echo $rand_quote;
?> 
```

由于 PHP 只在页面加载时执行，因此每次刷新页面时，都会随机生成一个新的数组值并从 $quote_list 数组中打印出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T23:59:22.267

```
$array = array('I should say upfront that I have never been in a cellar in my life. In fact, I can see no reason why anyone should ever go into a cellar unless there is wine involved.”&lt;/p><span class="author">~Rachel Hawkins, Hex Hall</span></li>',
'<p>“There is truth in wine, but you never see it listed in the ingredients on the label”&lt;/p><span class="author">~Josh Stern</span></li>');

$rand = rand( 0, count( $array));
echo $array($rand); 
```

# python - 如何在linux中控制后台进程

> ID：14594324
> 
> 赞同：0
> 
> 时间：2013-01-29T23:55:25.767
> 
> 标签：python, linux, perl, scripting, adb

我需要在 Linux 中编写一个脚本，它可以使用一个命令启动后台进程并使用另一个命令停止该进程。

具体应用是为android取用户空间和内核日志。

以下命令应该开始记录日志

```
$ mylogscript start 
```

以下命令应该停止记录

```
$ mylogscript stop 
```

此外，这些命令不应阻塞终端。例如，一旦我发送启动命令，脚本在后台运行，我应该能够在终端上做其他工作。

有关如何在 perl 或 python 中实现这一点的任何指示都会有所帮助。

编辑：已解决：[https ://stackoverflow.com/a/14596380/443889](https://stackoverflow.com/a/14596380/443889)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T03:51:17.933

我得到了我的问题的解决方案。解决方案本质上包括在 python 中启动一个子进程，并在完成后发送一个信号以终止该进程。这是供参考的代码：

```
#!/usr/bin/python

import subprocess
import sys
import os
import signal

U_LOG_FILE_PATH = "u.log"
K_LOG_FILE_PATH = "k.log"
U_COMMAND = "adb logcat > " + U_LOG_FILE_PATH
K_COMMAND = "adb shell cat /proc/kmsg > " + K_LOG_FILE_PATH

LOG_PID_PATH="log-pid"

def start_log():
    if(os.path.isfile(LOG_PID_PATH) == True):
        print "log process already started, found file: ", LOG_PID_PATH
        return
    file = open(LOG_PID_PATH, "w")
    print "starting log process: ", U_COMMAND
    proc = subprocess.Popen(U_COMMAND,
        stdout=subprocess.PIPE, stderr=subprocess.PIPE,
        shell=True, preexec_fn=os.setsid)
    print "log process1 id = ", proc.pid
    file.write(str(proc.pid) + "\n")
    print "starting log process: ", K_COMMAND
    proc = subprocess.Popen(K_COMMAND,
        stdout=subprocess.PIPE, stderr=subprocess.PIPE,
        shell=True, preexec_fn=os.setsid)
    print "log process2 id = ", proc.pid
    file.write(str(proc.pid) + "\n")
    file.close()

def stop_log():
    if(os.path.isfile(LOG_PID_PATH) != True):
        print "log process not started, can not find file: ", LOG_PID_PATH
        return
    print "terminating log processes"
    file = open(LOG_PID_PATH, "r")
    log_pid1 = int(file.readline())
    log_pid2 = int(file.readline())
    file.close()
    print "log-pid1 = ", log_pid1
    print "log-pid2 = ", log_pid2
    os.killpg(log_pid1, signal.SIGTERM)
    print "logprocess1 killed"
    os.killpg(log_pid2, signal.SIGTERM)
    print "logprocess2 killed"
    subprocess.call("rm " + LOG_PID_PATH, shell=True)

def print_usage(str):
    print "usage: ", str, "[start|stop]"

# Main script
if(len(sys.argv) != 2):
    print_usage(sys.argv[0])
    sys.exit(1)

if(sys.argv[1] == "start"):
    start_log()
elif(sys.argv[1] == "stop"):
    stop_log()
else:
    print_usage(sys.argv[0])
    sys.exit(1)

sys.exit(0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T00:47:08.377

您可以采取以下几种不同的方法： 1\. 信号 - 您使用信号处理程序，并且通常使用“SIGHUP”来指示进程重新启动（“start”），使用 SIGTERM 来停止它（“stop” ）。2\. 使用命名管道或其他 IPC 机制。后台进程有一个单独的线程，它只是从管道中读取数据，当有东西进来时，就对其进行操作。这种方法依赖于有一个单独的可执行文件来打开管道并发送消息（“start”、“stop”、“set loglevel 1”或任何你喜欢的）。

对不起，我还没有在 Python 中实现这些 [perl 我还没有真正写过任何东西]，但我怀疑这很难 - 肯定有一套现成的 python 代码可以处理命名管道。

编辑：另一种让我印象深刻的方法是，您只需在启动时对程序进行守护，然后让“停止”版本找到您的守护进程[例如，通过读取您存放在合适位置的“pidfile”]，然后发送一个 SIGTERM让它终止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T00:47:09.690

我不知道这是否是在 perl 中执行此操作的最佳方法，但例如：

```
system("sleep 60 &") 
```

这将启动一个后台进程，该进程将在不阻塞终端的情况下休眠 60 秒。shell 中的 & 表示在后台做某事。

告诉进程何时停止的一个简单机制是让它定期检查某个文件是否存在。如果文件存在，则退出。

# apache-flex - Flex TextInput maxChars 并按下插入

> ID：14594325
> 
> 赞同：0
> 
> 时间：2013-01-29T23:55:27.480
> 
> 标签：apache-flex, insert, textinput

因此，当我在其上设置了 maxChars 属性时，我注意到 Flex 中的 TextInput 这种奇怪的行为。例如，maxChars="1"。

如果您有此设置并且 TextInput 中有 1 个字符，然后按另一个键，则不会发生任何事情，因为最大字符已经存在。但是，如果您按 Insert 键，然后按另一个键，则该字符将显示在 TextInput 中，在 TextInput 中留下 2 个字符，最多只允许 1 个字符。

我相信这发生在所有 TextInput 中，而不仅仅是自定义的。

任何人都知道如何解决这个问题？我可以在自定义 TextInput 中覆盖某些方法来覆盖此行为？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:44:48.283

您可以收听[TextOperationEvent.CHANGE](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/supportClasses/SkinnableTextBase.html#event%3achange)，然后从 .text 属性中删除多余的字符

# javascript - 主干事件名称的有效值是什么？

> ID：14594327
> 
> 赞同：4
> 
> 时间：2013-01-29T23:55:35.720
> 
> 标签：javascript, backbone.js

使用 JavaScript 原生事件时，我习惯于使用

```
element.addEventListener(named_event, callback); 
```

在事件的[主干 api](http://backbonejs.org/#Events)中，它看起来完全不同。

在他们使用的示例中，该事件称为“警报”。

```
object.on("alert", function(msg) {
    alert("Triggered " + msg);
}); 
```

是否有一部分名称可以用于事件，或者您可以使用您选择的任何名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T00:07:46.787

文档中似乎有开放命名和特殊事件名称的“目录”。

**活动目录**

[您可以在Backbone.js docs#Events-catalog](http://backbonejs.org/#Events-catalog)中找到内置 Backbone 事件的完整列表以及参数。您还可以根据需要在模型、集合和视图上自由触发自己的事件。Backbone 对象本身混合了事件，可用于发出应用程序需要的任何全局事件。

# css - 在 HTML 页面中将字段集居中

> ID：14594328
> 
> 赞同：0
> 
> 时间：2013-01-29T23:55:50.433
> 
> 标签：css

我想`fieldset`在我的页面中居中，但我不知道如何。

我使用了这个 CSS 代码：

```
fieldset
{
    margin:auto;
    display: inline-block;
    text-align:center;
} 
```

但它只将`fieldset` 我也使用的内容居中，`<p style="text-align:center;"> <fieldset> ...</fieldset></p>` 但它不会工作。

那么我该如何居中呢？

**编辑 ：**

`CSS`我现在使用的代码：

```
fieldset
{
    text-align:left;
    display: inline-block;
    vertical-align:middle;
}

div
{
    text-align:center;
    vertical-align:middle;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T00:01:40.730

您将不得不添加`text-align:center`到父元素（也许将它包装在一个 div 中并使用它，如果它是单独的。）以实际居中*元素*而不是内容。看看这是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T00:58:36.147

解决方案是绝对定位元素，将 div 从窗口的左侧和顶部偏移 50%，并将 div 移动到左侧和顶部，其宽度和高度的一半带有负边距，以拥有它完全居中。

这是`CSS`代码：

```
 position:absolute;
    left:50%;
    top:50%;
    margin:-100px 0 0 -150px; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T00:00:45.303

删除`display`属性。它需要是一个块元素（默认情况下）`margin: auto`才能工作。或者你需要它来做什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-10T02:00:12.593

这对我有用

```
 #fieldset{
   border-color:blue;
   border-radius:10px;
   margin:-100px 0 0 -150px;
   position:absolute;
   left:50%;
   top:50%;
    } 
```

但是我没有行边距：-100px 0 0 -150px;

# mysql - MySQL 是否可以在单个多处理器机器上扩展？

> ID：14594329
> 
> 赞同：0
> 
> 时间：2013-01-29T23:55:55.193
> 
> 标签：mysql

我的应用程序的典型 DB 用法是在一张大表上读取/更新。我想知道 MySQL 是否在单个多处理器机器上扩展读取操作？写操作怎么样 - 他们能够利用多处理器吗？

顺便说一句 - 不幸的是我无法优化表模式。

谢谢你。

设置细节：

*   X64，四核
*   单硬盘（无RAID）
*   充足的内存（4GB+）
*   Linux 2.6
*   MySQL 5.5

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T23:58:38.930

如果您使用的是传统硬盘，您经常会发现在 CPU 内核用完之前就已经用完了 IO 带宽。固定四核机器的唯一方法是拥有一个非常高性能的 SSD 条带 RAID 阵列。

如果您无法优化架构，那么您的选择非常有限。这就像要求在不打开引擎盖的情况下调整汽车。也许您可以更换轮胎或使用更好的汽油，但基本性能提升来自多个因素，其中最值得注意的是，额外的索引和战略性的非规范化数据。

在数据库领域，4GB 内存几乎算不了什么，8GB 对于任何负载的系统来说绝对是最低限度，而单个磁盘是**一个非常糟糕的主意**。出于数据完整性的原因，您至少应该有某种形式的镜像。

# git - 主干中的版本 1，SVN 中的分支中的版本 2，我应该怎么做？

> ID：14594330
> 
> 赞同：0
> 
> 时间：2013-01-29T23:56:03.460
> 
> 标签：git, svn, version-control

现在我的项目 v1（生产中）在 Trunk 中，而 v2（开发中）在 SVN 的一个分支中。v2 不太可能合并到 v1 中。

我想在不久的将来迁移到 Git，因为在 SVN 中在 v1 和 v2 之间切换非常慢，而分支驱动的开发在 SVN 中是一个痛苦。

我正在考虑使用本地 Git 存储库并暂时使用`git svn`，稍后在团队准备好时将 Git 存储库推送到集中式服务器。

`dcommit`如果我想在 SVN 中处理 v2 和 v2 分支，我的 git 工作流程应该如何？有没有更好的方法来同时管理 v1 和 v2？

谢谢！

**更新：**我正在考虑执行以下操作，请评论这是否是个好主意：

1.  SVN 分支头到 /branches/v1
2.  git rebase 分支/v2 在 master
3.  git svn dcommit 到主干
4.  继续在 Master（主干）上工作

你怎么看？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T00:12:18.857

最好的办法是让每个人尽早迁移到 git。它只是更好地处理这样的事情。Git svn 并不是为很好地处理分支而设计的，虽然它有时可以工作，但它确实不是那么安全。恕我直言，但我不是一个 git 开发人员，我只是从尝试它和痛苦的经验中说出来。对我来说，如果上游（您自己、您的团队或其他人）可以转换为 git 总是容易得多。突然间，问题就消失了。

将来，您可以像我在[Net-SNMP 转换为 git 和分支管理](http://www.net-snmp.org/wiki/index.php/Git_Workflow)中所做的那样：合并所有内容，并使用 -s ours 将 v1 项目初始合并到主开发分支中。这基本上将版本历史设置为忽略新分支之间所有过去的开发差异，但允许您将新补丁应用到 v1 到树中，并且仍然将这些新补丁合并到 v2 中。这样，在 Net-SNMP 中，我们通常有 4-5 个活动分支。补丁进入最古老的最相关的分支并向上合并。突然间，我们不再有记住将补丁应用到每个分支的问题了！

[简单的 git 包装脚本](http://www.net-snmp.org/wiki/index.php/Git_Branch_Management)自动执行多分支补丁管理，整个工作几乎是无害的。只有一些主要的架构更改会引起轻微的麻烦，并且需要手动合并/移植。

# transactions - 在 Visual Fox Pro 中关闭自动提交？

> ID：14594337
> 
> 赞同：0
> 
> 时间：2013-01-29T23:56:44.923
> 
> 标签：transactions, visual-foxpro, autocommit

我在 VFP9 中开始我的事务并以`BEGIN TRANSACTION`它们结束，`ROLLBACK`但无论如何更改仍然存在。

我正在使用免费表目录，我认为问题可能与缓冲有关，但我不知道如何将其应用于免费表数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:27:10.773

查看 CursorSetProp()

在表或记录级别的默认设置是 NO BUFFERING。表打开后，发出 cursorsetprop （即使它是一个实际的表），事务处理将被尊重......

```
USE YourTable
CURSORSETPROP("Buffering", 4, "YourTable" )

1 = no buffering
2 = pessimistic row buffering
3 = optimistic row buffering
4 = Pessimistic Table Buffering
5 = Optimistic Table Buffering 
```

# shell - 用于检查修改键是否被按下的 Ubuntu shell 实用程序

> ID：14594340
> 
> 赞同：1
> 
> 时间：2013-01-29T23:56:52.627
> 
> 标签：shell, ubuntu, key, utility, modifier

Ubuntu中是否有任何shell实用程序可以定义修改键（Ctrl，Shift，Super，Alt）是否在我运行它的那一刻被按下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:04:55.297

有一个`xev`实用程序可以打印有关 X 事件（包括按键事件）的信息。如果您正在运行 X11，则可以使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T00:17:28.170

使用`showkey`. 手册页在[这里](http://manpages.ubuntu.com/manpages/lucid/man1/showkey.1.html)。

# greasemonkey - 为 Greasemonkey 脚本创建“配置”或“选项”页面

> ID：14594346
> 
> 赞同：22
> 
> 时间：2013-01-29T23:57:22.433
> 
> 标签：greasemonkey

我写了一个简单的 Greasemonkey 脚本，我正在尝试为这个脚本创建一个“配置”页面（就像用于 Google Chrome 扩展的那个。）有没有办法为用户脚本创建一个配置页面，比如 Google Chrome 扩展的“选项”页面？没有任何方法可以将 .html 页面作为 Greasemonkey 脚本的一部分（据我所知），因此我正在寻找其他选项。

```
// ==UserScript==
// @name       Redirector
// @namespace  http://use.i.E.your.homepage/
// @version    0.1
// @description  enter something useful
// @match      http://*/*
// @copyright  2012+, You
// @run-at document-start
// ==/UserScript==

redirectToPage("http://www.youtube.com/", "http://www.google.com");

function redirectToPage(page1, page2){
if(window.location.href.indexOf(page1) != -1){
    window.location.href = page2;
}
} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2017-04-18T02:06:37.337

有一些库为用户脚本提供配置页面：

### 1) [GM_配置](https://github.com/sizzlemctwizzle/GM_config/)

[![GM_config 对话框示例](../Images/50e9c2c267f04bbb0a9a383e5e4bd814.png)](https://i.stack.imgur.com/TEkAT.png)

### 2）[猴子配置](https://github.com/odyniec/MonkeyConfig)

[![示例 MonkeyConfig 对话框](../Images/f893cedf5a95b8b11f10fbc64ae4dce7.png)](https://i.stack.imgur.com/nLtcz.png)

### 3) [GM_registerMenuCommand 子菜单 JS 模块](https://github.com/SloaneFox/code)

* * *

每个库的用法各不相同，但通常您授予他们所需的权限，例如`GM_getValue`and ，并通过指令`GM_setValue`要求该库，例如：`@require`

```
// ==UserScript==
// @name          My Userscript
// @description   An example userscript with a config page
// @version       0.0.1
// @require       https://www.example.com/lib/myconfig.js
// @grant         GM_getValue
// @grant         GM_setValue
// @grant         GM_addStyle
// @grant         GM_registerMenuCommand
// ==/UserScript==

const config = new MyConfig({ ... }) 
```

然后，您注册一个打开配置页面/对话框的菜单命令，例如：

```
GM_registerMenuCommand('Configure My Userscript!', () => {
    config.open()
}) 
```

在 MonkeyConfig 的情况下，它可以为您注册命令：

```
const config = new MonkeyConfig({
    title: 'Configure My Userscript!',
    menuCommand: true,
    // ...
}) 
```

对于高级用途，配置器可以允许为关闭/取消/保存事件注册[侦听](https://github.com/sizzlemctwizzle/GM_config/wiki/Event-Callbacks)器，并提供对 CSS 和其他选项的控制。详细说明可以在[GM_config wiki](https://github.com/sizzlemctwizzle/GM_config/wiki)和[MonkeyConfig 主页](https://web.archive.org/web/20190924061647/http://odyniec.net/projects/monkeyconfig/usage.html)上找到。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-30T11:36:58.347

如果您将它用于 chrome，那么它不是 Greasemonkey 而是 Tampermonkey。

您可以考虑使用 GM_getResourceText，将您的 html 粘贴到 pastebin.com（或类似网站）并将链接作为 @resource 之一添加到元数据块中。至少，我知道它对 Greasemonkey 有效。

例如：

```
// @resource configHtml http://pastebin.com/raw.php?i=2RjKfwJQ

// ... some DOM node that you will append to the current page
node.innerHTML = GM_getResourceText("configHtml"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-16T14:58:24.377

这是非常需要的，但现在两种方法的组合应该可以工作。

1）为了个人使用，我在脚本顶部只有一堆变量。这里的问题是，如果其他人使用我的脚本，更新最终会删除他的偏好。

2）在您的网站上有一个配置页面。虽然这非常有效，但网站总是被删除。脚本没有充分的理由依赖网站来工作。

如果您同时执行这两项操作，则用户可以在脚本网站消失时编辑脚本中的首选项。

这是一个示例，其中不需要的功能被 // 注释掉了。

[http://go-here.nl/gm/wikipedia-clean-up.php](http://go-here.nl/gm/wikipedia-clean-up.php)

祝你好运，享受

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-05T16:12:57.063

对您已经包含的页面使用参数，如果已设置，则清除整个文档： [http://page.my.script.runs.on/?configPage=true](http://page.my.script.runs.on/?configPage=true)

```
if(getUrlParameter("configPage") === "true") {
    $(document).empty
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-10-02T14:35:47.997

此用户脚本不使用任何外部库。通过修改你可以做出好的用户界面。

```
// ==UserScript==
// @name         UI development
// @namespace    http://tampermonkey.net/
// @version      0.1
// @description  try to take over the world!
// @author       ManojBhakarPCM
// @match        https://www.google.com/
// @grant        none
// ==/UserScript==

(function() {
    'use strict';
    function ui_create(contentss){
        var div = document.createElement('div');
        //var contentss = "<h1>TESTsssss</h1>";
        div.innerHTML = '<div id="mbpcm_modal" style="position: fixed;z-index: 1;left: 0;top: 0;width: 100%;height: 100%;overflow: auto;display:none;"><div id="mbpcm_content" style="background-color: pink;margin: 15% auto;padding: 20px;border: 1px solid black;width: 20%;box-shadow:20px 20px 30px 2px gray;border-radius:7px;"><span id="mbpcm_close" style="float: right;font-size:25px;cursor: pointer;">&times;</span>'+ contentss +'</div></div>';
        document.body.appendChild(div);
        var modal = document.getElementById("mbpcm_modal");
        var close = document.getElementById("mbpcm_close");
        close.onclick = function(){modal.style.display = "none";}
    }
    function ui_add_opener(parent,classs,stylee){
        var btn = document.createElement("button");
        btn.setAttribute("class",classs);
        btn.setAttribute("style",stylee);
        btn.setAttribute("id","mbpcm_ui_opener");
        btn.innerHTML = "Settings";
        parent.appendChild(btn);
        var modal = document.getElementById("mbpcm_modal");
        var btnn = document.getElementById("mbpcm_ui_opener");
        btnn.onclick = function(){modal.style.display = "block";}
    }
    function ui_addElement(el,cls,styl,val,innerHtml){
        var modal = document.getElementById("mbpcm_content");
        var e = document.createElement(el);
        e.setAttribute("class",cls);
        e.setAttribute("style",styl);
        e.setAttribute("value",val);
        e.innerHTML = innerHtml;
        modal.appendChild(e);
        return e;
    }

    ui_create("<h1>Title</h1><span>discription</span><br>");
    ui_add_opener(document.getElementById("gbw"),"RNmpXc","nothing");
    ui_addElement("button","modal","none","none","TestButton").onclick = function(){alert("hellow ji ");}
    ui_addElement("br","","","","");
    ui_addElement("button","none","none","none","TestButton").onclick = function(){alert("How are you");}
    ui_addElement("button","none","none","none","TestButton").onclick = function(){alert("Kaise ho");}
})(); 
```

# javascript - 从html调用jquery函数而不传递这个

> ID：14594354
> 
> 赞同：-3
> 
> 时间：2013-01-29T23:57:58.093
> 
> 标签：javascript, jquery, html

**我知道的方式：**

HTML：

```
<input type="button" id="msg" onclick="foo(this);" /> 
```

JS：

```
function foo(elementObj) { elementObj.toggle(); } 
```

有没有办法在不将其作为函数参数传递的情况下获取对`elementObj`内部的引用？`foo()`

**我想怎么做：**

HTML：

```
<input type="button" id="msg" onclick="foo();" /> 
```

JS：

```
function foo() { elementObj = <any way I can get ref to html element here?>; elementObj.toggle(); } 
```

附言

调用函数如下：`$("#msg").click(function(elementObj ) {elementObj.toggle();}`

不是我需要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T00:00:36.413

> 有没有办法在不将其作为函数参数传递的情况下获取对`elementObj`内部的引用？`foo()`

是的，只需使用适当的不显眼的 jQuery 事件处理程序附加，例如[`.on`](http://api.jquery.com/on/)或其简写：

```
$('#msg').click(function() {
    //`this` references the clicked DOM element #msg
}); 
```

或者，如果您需要在`foo`其他地方使用该功能..

```
function foo(eventObject) { 
    //`this` reference the #msg element
}
$('#msg').click(foo); 
```

* * *

根据 OP 编辑​​：

```
function foo() {
   elementObj = <any way I can get ref to html element here?>;
   elementObj.toggle();
} 
```

是的，只需使用 ID 选择器`$('#msg')`，或者`$(this)`如果您想引用单击的元素。

```
function foo() {
   var elementObj = $(this);
   elementObj.toggle();
   //or more directly $(this).toggle()
}
$('#msg').click(foo); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T00:03:39.760

你的例子对我来说很好。

仅仅因为你在函数中传递了一个参数，并不意味着你必须使用它。

您可以在函数中获取对所需**任何元素**的引用：

```
<input type="button" onclick="foo(this);" />

<script>

    function foo(thisIsNotUsed) {
        var anotherElement = document.getElementById("someId");
        // create a jQuery object before invoking toggle
        jQuery(anotherElement).toggle();
    }

</script> 
```

NOTE:

I'm pretty sure it's consensus opinion that registering a handler with HTML is a horrible practice.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-30T00:01:37.560

您可以使用 jquery 获取参考，尝试以下操作：

```
<input type="button" onclick="foo(this);" />

//javascript
$(document).ready(function(){
   $('input').on('click', function(){
      var theElement = $(this);
   });
}); 
```

# performance - 在服务器 2012 上设置每个用户的 CPU 限制

> ID：14594361
> 
> 赞同：1
> 
> 时间：2013-01-29T23:58:43.517
> 
> 标签：performance, powershell, window, windows-server

在服务器 2008 R2 上，我使用以下 PowerShell 以编程方式将 CPU LIMIT 设置为某个百分比

```
function Set-UserAccountCPUThrottle
{
[CmdletBinding()]
Param(
[ValidateNotNullOrEmpty()]
[parameter(Mandatory = $true)]
$UserNameToRestrict,
[Parameter(Mandatory = $false)]
[int]$CpuPercentage = 5
)

write-host "about to restrict user account $UserNameToRestrict to use ${CpuPercentage}% CPU"

  try
    {     
      $objUser = New-Object System.Security.Principal.NTAccount($UserNameToRestrict)
      $local:ResolvedSID= $objUser.Translate([System.Security.Principal.SecurityIdentifier]).Value.trim()   
    }
  catch
    {
      throw "Cannot resolve the User (or find its SID) for $UserNameToRestrict"
    }    
 $regpath = "HKLM:\SYSTEM\CurrentControlSet\Control\Session Manager\Quota System\${local:ResolvedSID}"
 #in creating a new key for this sid, it will remove any old item
mkdir $regpath -Force -ErrorAction stop | out-null
#as the old key if existing was removed by the above code, this will create a new value
 New-ItemProperty -Path $regpath  -Name "CpuRateLimit" -Value $CpuPercentage -PropertyType "DWord" -Force -ErrorAction stop | out-null   

} 
```

[但是，虽然这确实会根据http://technet.microsoft.com/en-us/library/ff384148(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/ff384148(v=ws.10).aspx)创建注册表项

它对服务器 2012 或 Windows 8 无效。这是损坏的还是在服务器 2012 中有新的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T23:18:12.943

根据[TechNet 上的此页面](http://technet.microsoft.com/en-us/library/cc753280.aspx)，除非总 CPU 使用率大于 70%，否则不会强制执行资源管理。

你的机器这么忙吗？该页面还描述了其他一些可能不会进行资源管理的情况。

您没有准确提及您要控制的内容。如果您的工作负载是 RDS（虚拟桌面、基于会话的桌面或 RemoteApp 程序），Windows Server 2012 的“FairShare”功能可能对您更有用。相关片段：

> “RD 会话主机中资源的公平共享。在 Windows Server 2012 中，RD 会话主机服务器分配 CPU、磁盘 I/O 和网络 I/O，以便单个用户无法消耗会对同一主机上的其他用户产生负面影响的资源。每个用户都将获得“公平份额”。这是以最小的开销完成的，因此 CPU、磁盘和网络资源被用于最大容量。

该片段可以在[这个 technet 页面的中间找到。](http://blogs.technet.com/b/windowsserver/archive/2012/05/09/windows-server-2012-remote-desktop-services-rds.aspx)

# lua - lua循环在15个数字后卡住

> ID：14594362
> 
> 赞同：1
> 
> 时间：2013-01-29T23:58:50.790
> 
> 标签：lua

我的代码旨在读取数字并将其转换为中文拼音：

```
function digitconverter (digit)
    if digit == "0" then
        cnumber = "ying2 "
    elseif digit == "1" then
        cnumber = "yi1 "
    elseif digit == "2" then
        cnumber = "er2 "
    elseif digit == "3" then
        cnumber = "san1 "
    elseif digit == "4" then
        cnumber = "si4 "
    elseif digit == "5" then
        cnumber = "wu3 "
    elseif digit == "6" then
        cnumber = "liu4 "
    elseif digit == "7" then
        cnumber = "qi1 "
    elseif digit == "8" then
        cnumber = "ba1 "
    elseif digit == "9" then
        cnumber = "jiu3 "
    end
    return cnumber
end

print("Enter a number to be converted:")

repeat
    strnumber = io.read("*line")
    number = tonumber(strnumber)
    if number ~= nil then
        continue = true
    else
        print("Invalid input. Please try again:")
        continue = false
    end
until continue == true
nlength = #strnumber

digits = {}
for d in string.gmatch(number, "%d") do
    digits[#digits + 1] = d
end

convnumber = ""
for d=1,nlength do
    convnumber = convnumber .. digitconverter(digits[d])
end
print(convnumber)

    io.read() 
```

如果我输入超过 15 位数字，它就会卡住（因为没有更好的术语）。它会转换每个数字，但第 16 位将是随机的，第 17 位及以后将重复另一个随机数字。我已经完成了它，但我无法弄清楚它挂在哪里。想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T00:33:04.797

您正在遍历`number`, not的数字`strnumber`。问题是当你得到太多数字时，字符串表示将采用科学计数法：

```
strnumber = '1234567890123456789'
number = tonumber(strnumber)
print(number) --> 1.2345678901235e+018 
```

* * *

旁注：Lua 基于哈希表，它为您提供（除非哈希冲突）恒定时间查找。所以你的数字转换器可以简单地写成一张地图：

```
local digitmap = {
   ["0"] = "ying2 ",
   ["1"] = "yi1 ",
   ["2"] = "er2 ",
   ["3"] = "san1 ",
   ["4"] = "si4 ",
   ["5"] = "wu3 ",
   ["6"] = "liu4 ",
   ["7"] = "qi1 ",
   ["8"] = "ba1 ",
   ["9"] = "jiu3 ",
} 
```

此外，像这样构建字符串效率非常低：

```
for d=1,nlength do
   convnumber = convnumber .. digitconverter(digits[d])
end 
```

您正在生成大量中间字符串，这需要大量分配并产生大量垃圾。将需要连接的所有值放入表中，然后调用`table.concat`. 另一个优点是您可以指定分隔符（现在，您正在将分隔符硬编码到字符串表中）。

使用这些技术，我们可以像这样重写您的代码：

```
local digitmap = {
   ['0'] = 'ying2',
   ['1'] = 'yi1',
   ['2'] = 'er2',
   ['3'] = 'san1',
   ['4'] = 'si4',
   ['5'] = 'wu3',
   ['6'] = 'liu4',
   ['7'] = 'qi1',
   ['8'] = 'ba1',
   ['9'] = 'jiu3',
}

print('Enter a number to be converted:')
while true do
   strnumber = io.read('*line')
   if not strnumber:match('%D') then
      break
   end
   print('Invalid input. Please try again:')
end

local digits = {}
for digit in string.gmatch(strnumber, '%d') do
   digits[#digits + 1] = digitmap[digit]
end

print(table.concat(digits, ' ')) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T00:26:19.293

可能，您想扫描`strnumber`而不是`number`在代码的以下行中：

```
for d in string.gmatch(number, "%d") do 
```

您的`number`变量包含`double`格式为 15-16 位十进制数字的数值。

# string - 在 Delphi 2007 中对多维数组进行排序

> ID：14594364
> 
> 赞同：2
> 
> 时间：2013-01-29T23:58:56.553
> 
> 标签：string, delphi, sorting, multidimensional-array, delphi-2007

我有一个类似于下面描述的多维数组：

```
Matrix => array(
 [0] => array( [0] => 7, [1] => 'hello' ),
 [1] => array( [0] => 3, [1] => 'there' ),
 [2] => array( [0] => 1, [1] => 'world' ),
) 
```

我想要实现的是使用 Matrix[i][0] 的值对这个数组进行排序。最有效的方法是什么？我研究了递归 QuickSort 函数的可能性，但它相当复杂，因为我是多维数组。有许多快速排序的示例，但没有一个可以处理将“字符串数组的数组”作为输入。

如果我的文字看起来乱码，请要求澄清。我对德尔福还是很陌生。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T00:07:54.937

正如 Rob 在他的评论中指出的那样，没有办法拥有一个存储整数和字符串的多维数组（不诉诸变体）。

`TStringList`如果它真的只是一个包含整数/字符串对的数组，那么使用`Strings`and属性将它们存储在 a 中会容易得多`Objects`，然后使用`CustomSort`对`Object`值进行排序：

```
program Project2;

{$APPTYPE CONSOLE}

uses
  SysUtils, Classes;

function MySortProc(List: TStringList; Index1, Index2: Integer): Integer;
begin
  Result := Integer(List.Objects[Index1]) - Integer(List.Objects[Index2]);
end;

var
  SL: TStringList;
  i: Integer;
begin
  SL := TStringList.Create;
  try
    for i := 0 to 10 do
      SL.AddObject(Format('Item %d', [i]),  TObject(Random(i)));
    SL.CustomSort(@MySortProc);
    for i := 0 to SL.Count - 1 do
      WriteLn(Format('%d: %s', [Integer(SL.Objects[i]), SL[i]]));
    ReadLn;
  finally
    SL.Free;
  end;
end. 
```

这产生

![在此处输入图像描述](../Images/6294662ffd99fa8a4b716a8623ad5350.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T08:11:20.487

首先，我质疑您是否选择了正确的类型来表示您的数据结构。你说你的类型是

```
array of array of string 
```

但看起来内部数组总是有两个元素，第一个是整数，第二个是字符串。在这种情况下，内部数组应替换为记录。

```
type
  TMyElement = record
    ID: Integer;
    Name: string;
  end;

  TMyArray = array of TMyElement; 
```

现在你只有一个一维数组。我假设您对其中之一进行排序没有困难。

* * *

但是假设您确实需要一个多维数组。假设数组是参差不齐的，即不同的内部数组有不同的长度。您仍然可以将该数组视为一维数组。像这样声明它：

```
 TStringArray = array of string;
  TMyArray = array of TStringArray; 
```

现在您可以将其排序`TMyArray`为一维数组。

请注意，我需要为内部数组声明一个类型。原因是排序函数需要能够比较和交换外部数组的元素。所以你需要函数来做到这一点。你需要定义一个类型来实现它。例如，您的交换函数可能如下所示：

```
procedure Exchange(Index1, Index2: Integer);
var
  temp: TStringArray;
begin
  temp := MyArray[Index1];
  MyArray[Index1] := MyArray[Index2];
  MyArray[Index2] := temp;
end; 
```

没有定义`TStringArray`，这是不可能的。这是因为动态数组的分配兼容性规则相当严格。

* * *

您可以根据需要扩展到任意多个维度：

```
 TString2DArray = array of TStringArray;
  TMyArray = array of TString2DArray; 
```

同样，您可以使用标准数组排序来对`TMyArray`.

# c# - 使用 PostSharp 在编译时生成和序列化元数据

> ID：14594366
> 
> 赞同：1
> 
> 时间：2013-01-29T23:59:01.460
> 
> 标签：c#, .net, serialization, reflection, postsharp

我正在尝试做一些我认为应该直截了当且简单易行的事情，但就我的一生而言，我无法让它发挥作用。使用 PostSharp，我想创建一个应用于类（或接口）定义的方面，并且该方面在编译时反映它已应用于的类型，然后将该反射信息存储在一个变量中，以便在运行。

我知道应该使用 CompileTimeInitialize 函数来生成反射信息并将其保存到变量中。然后这一切都被序列化了。但是，我无法在运行时获取存储的信息。RuntimeInitialize 可以看到变量和其中的数据，但是当我使用 GetCustomAttributes 从代码中其他位置的类型获取属性时，该属性为空。

这是我到目前为止的一些代码：

```
[Serializable]
[MulticastAttributeUsage(MulticastTargets.Class, AllowMultiple = false, PersistMetaData = true)]
[AttributeUsage(AttributeTargets.Class, AllowMultiple = false, Inherited = false)]
public class MetadataAttribute : TypeLevelAspect {

    public MetadataAttribute() { }

    private int test;

    public override bool CompileTimeValidate(Type type) {
        this.test = 11;
        return true;
    }

    public override void CompileTimeInitialize(Type type, AspectInfo aspectInfo) {
        this.test = 9;
    }

    public override void RuntimeInitialize(Type type) {
        // When I break here, I can see during debugging, that test is 11 (I would have expected 9 to be honest, but I suspect that CompileTimeInitialize is not executed for a TypeLevelAspect - unless I am mistaken?)            
    }

} 
```

这是我试图用来提取数字的控制台应用程序：

```
class Program {
    static void Main(string[] args) {
        var ma = typeof(Test).GetCustomAttribute<MetadataAttribute>();
        var test = new Test();
        var ma2 = test.GetType().GetCustomAttribute<MetadataAttribute>();
        // When I break here, both ma and ma2 have test set to 0.
    }
}

[Metadata]
public class Test { } 
```

在此先感谢您的帮助，非常感谢，并且让我的头发在头上的寿命比在我手中的时间长:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:18:37.517

当您使用`Type.GetCustomAttributes`时，您需要 CLR 从存储在元数据中的自定义属性的定义构建一个新实例，即通过调用构造函数并设置字段和属性。因此，您获得的不是 PostSharp 创建和初始化的实例，而是一个全新的实例。

如果您想访问 PostSharp 实例，您应该使用`RuntimeInitialize`将此实例存储在方面实例的某种共享存储库中，然后从代码中访问它们。请注意，PostSharp`RuntimeInitialize`延迟运行，因此在初始化之前您将无法访问您的实例。

# jquery - jquery中显示的子菜单

> ID：14594373
> 
> 赞同：1
> 
> 时间：2013-01-29T23:59:46.480
> 
> 标签：jquery, html, css, drop-down-menu, submenu

这是测试站点链接。我遇到了显示子菜单 [链接的问题](http://vygears.com/stockholm/index.html)

在那个导航栏中“为什么斯德哥尔摩”当我悬停它时，也显示了子菜单，当我悬停子菜单时它的工作正常，我做错了任何人都非常感谢..

```
(function($){

    //cache nav
    var nav = $("#topNav");

    //add indicator and hovers to submenu parents
    nav.find("li").each(function() {
        if ($(this).find("ul").length > 0) {
            $("<span>").text("").appendTo($(this).children(":first"));

            //show subnav on hover
            $(this).mouseenter(function() {
                $(this).find("ul").stop(true, true).slideDown();
            });

            //hide submenus on exit
            $(this).mouseleave(function() {
                $(this).find("ul").stop(true, true).slideUp();
            });
        }
    });
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:10:21.573

您应该使用`children()`而不是`find()`. 当您使用`find('ul')`它时，它会在您的选择器中使用所有`ul`内容。

[**这是工作的jsFiddle。**](http://jsfiddle.net/wzh74/3/)

```
 //show subnav on hover
        $(this).mouseenter(function() {
            $(this).children("ul").stop(true, true).slideDown();
        });

        //hide submenus on exit
        $(this).mouseleave(function() {
            $(this).children("ul").stop(true, true).slideUp();
        }); 
```

# iphone - MFMailComposeViewController.h 损坏

> ID：14594378
> 
> 赞同：0
> 
> 时间：2013-01-30T00:00:20.430
> 
> 标签：iphone, xcode, mfmailcomposeviewcontroller

在我的应用程序中成功实现 MFMailComposeViewController 后，在模拟器和我的 iPhone 中运行它，它仍然可以正常工作，只是崩溃了。我收到 5 个 MFMailComposeViewController.h 问题：找不到协议声明、预期标识符或“（”等...

我的 Controller 标头包括：

```
MessageUI/MessageUI.h

MessageUI/MFMailComposeViewController.h 
```

并符合协议：

```
@interface DetallViewController : UIViewController < UIActionSheetDelegate,
 MFMailComposeViewControllerDelegate> 
```

我尝试过：1）删除并添加框架 2）按照许多帖子中的建议重新启动设备和 Xcode 3）创建一个单独的控制器来处理 MFMailComposeViewController

在解决这个问题 3 天后，我完全陷入了困境。您可以想象，任何帮助将不胜感激。

我认为这是一种参考问题，因为无论是否选择框架都会出现。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T23:03:31.320

只是对任何可能有帮助的人，我终于找到了问题：

导入的标头中缺少 @end。

感谢大家的努力。

# python - 确定 Python 函数中返回值的数量

> ID：14594379
> 
> 赞同：2
> 
> 时间：2013-01-30T00:00:24.430
> 
> 标签：python, function, decorator, python-decorators

我正在创建一个装饰器，它在它的目标函数中捕获一个引发的错误，并允许用户继续执行脚本（绕过函数）或退出脚本。

```
def catch_error(func):
    """
    This decorator is used to make sure that if a decorated function breaks 
    in the execution of a script, the script doesn't automatically crash. 
    Instead, it gives you the choice to continue or gracefully exit.    

    """
    def caught(*args):
        try:
            return func(*args)
        except Exception as err:
            question = '\n{0} failed. Continue? (yes/no): '.format(func.func_name)
            answer = raw_input(question)
            if answer.lower() in ['yes','y']:
                pass
            else:
                print "   Aborting! Error that caused failure:\n"
                raise err 
            return None
    return caught 
```

请注意，如果用户选择绕过错误返回函数并继续执行脚本，则装饰器将返回 None。这适用于只返回单个值的函数，但它会在尝试解包多个值的函数上崩溃。例如，

```
# Both function and decorator return single value, so works fine
one_val = decorator_works_for_this_func() 
# Function nominally returns two values, but decorator only one, so this breaks script
one_val, two_val = decorator_doesnt_work_for_this_func() 
```

有没有办法可以确定我的目标函数应该返回的值的数量？例如，类似：

```
def better_catch_error(func):
    def caught(*args):
        try:
            return func(*args)
        except Exception as err:
            ...
            num_rvals = determine_num_rvals(func)
            if num_rvals > 1:
                return [ None for count in range(num_rvals) ]
            else:
                return None               
    return caught 
```

与往常一样，如果有更好的方法来做这种事情，请告诉我。谢谢！

更新：

感谢所有的建议。我决定将 catch_error 的范围缩小到一个函数类，它们只返回一个字符串值。我只是将返回多个值的所有函数拆分为返回单个值的单独函数以使它们兼容。我一直希望让 catch_error 更通用（并且有一些关于如何做到这一点的有用建议），但对于我的应用程序来说这有点过头了。再次感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T00:01:48.753

不，你无法确定这一点。

Python 是一种动态语言，给定的函数可以根据输入和其他因素返回任意大小的任意序列或根本不返回序列。

例如：

```
import random

def foo():
    if random.random() < 0.5:
        return ('spam', 'eggs')
    return None 
```

这个函数一半的时间会返回一个元组，但`None`另一半，所以 Python 无法告诉你`foo()`会返回什么。

顺便说一句，你的装饰器可能会失败的方式还有很多，不仅仅是当函数返回一个调用者然后解包的序列时。如果调用者期望字典并开始尝试访问键或列表并想知道长度怎么办？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T00:40:21.457

Martijn Pieters 的回答是正确的，这是[Halting Problem的一个具体案例](http://en.wikipedia.org/wiki/Halting_problem)

但是，您可以通过将错误返回值传递给装饰器来解决它。像这样的东西：

```
def catch_error(err_val):
    def wrapper(func):
        def caught(*args):
            try:
                return func(*args)
            except Exception as err:
                question = '\n{0} failed. Continue? (yes/no): '.format(func.func_name)
                answer = raw_input(question)
                if answer.lower() in ['yes','y']:
                    pass
                else:
                    print "   Aborting! Error that caused failure:\n"
                    raise err 
                return err_val
        return caught
    return wrapper 
```

然后你可以装饰使用：

```
@catch_error({})
def returns_a_dict(*args, **kwargs):
    return {'a': 'foo', 'b': 'bar'} 
```

同样作为一种风格，如果您`*args`在包装函数中抓取，您可能还应该抓取`**kwargs`，以便您可以正确包装带有关键字参数的函数。否则，如果您调用，您的包装函数将失败`wrapped_function(something=value)`

最后，作为另一种风格，看到`if a: pass`使用 else 的代码是令人困惑的。尝试`if !a`在这些情况下使用。所以最后的代码：

```
def catch_error(err_val):
    def wrapper(func):
        def caught(*args, **kwargs):
            try:
                return func(*args, **kwargs)
            except Exception as err:
                question = '\n{0} failed. Continue? (yes/no): '.format(func.func_name)
                answer = raw_input(question)
                if answer.lower() not in ['yes','y']:
                    print "   Aborting! Error that caused failure:\n"
                    raise err
                return err_val
        return caught
    return wrapper 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-30T01:09:05.753

您的装饰器无法预测您的函数将返回什么，但没有什么能阻止您*告诉*装饰器要模拟什么返回签名：

```
@catch_error([None, None])
def tuple_returner(n):
    raise Exception
    return [2, 3] 
```

`None`你的装饰器不会返回，而是返回它的参数 ( `[None, None]`)。

编写一个接受参数的装饰器有点棘手：表达式`catch_error([None, None])`将被评估，并且必须返回将应用于装饰函数的实际装饰器。它看起来像这样：

```
def catch_error(signature=None):
    def _decorator(func):
        def caught(*args):
            try:
                return func(*args)
            except Exception as err:
                # Interactive code suppressed
                return signature

        return caught

    return _decorator 
```

请注意，即使您只是希望它返回`None`，也需要执行一次：

```
@catch_error()
def some_function(x):
    ... 
```

# windows - ssl 部署到 IIS7 Windows 2008 的 ec2 单个实例

> ID：14594385
> 
> 赞同：-1
> 
> 时间：2013-01-30T00:01:00.453
> 
> 标签：windows, visual-studio-2010, iis-7, amazon-web-services

正如标题所说，我想从 VS2010 AWS 工具包或 Jenkins（最好）部署一个 ssl 证书到在 AWS Win2008/IIS7 上运行的网站。作为重新部署或新部署。

我环顾四周，没有任何东西，为什么？ElasticBeanstalk 似乎是可能的，但这不是我现阶段正在运行的。

这是不可能的，我不知道这一点很傻吗？

如果是这样，我有什么选择？我是 AWS 的新手，所以对所有建议持开放态度！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:23:50.050

无法从 VS2010 将证书部署到 EC2 实例。我不相信 IIS 提供命令行实用程序来导入证书，因此 AWS 工具包很难为您引导它。如果您曾经接触过 Cloud Formation，您可能会找到一种使用 cfn-init 和 PowerShell 的方法。在启动时将证书导入 Windows 实例并创建使用该证书的 https 绑定并不是快速设置的事情。

使用 Elastic Beanstalk，您不必将证书部署到实例，只需将其导入 IAM，然后在启动 beantalk 时指定导入的证书。您的实例可以通过 http 端口 80 与 Beanstalk 的负载均衡器通信，或者您可以在您的实例上使用自签名证书来保护实例与负载均衡器之间的通信。

# sorting - wordpress 3.5在插入媒体模式窗口中按媒体类别排序

> ID：14594386
> 
> 赞同：0
> 
> 时间：2013-01-30T00:01:04.500
> 
> 标签：sorting, wordpress, modal-dialog, media

我使用[media-categories-2](http://wordpress.org/extend/plugins/media-categories-2/)插件对我的媒体文件进行排序，但我没有在 page->insert media modal 窗口中对我的媒体文件进行排序，我找不到为此所需的插件。请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T18:10:50.307

我也一直在试图弄清楚如何做到这一点。我已经使用functions.php中的这些片段[http://sumtips.com自己创建了类别](http://sumtips.com)

```
 add_action('init', 'create_media_categories');

function create_media_categories() {
$labels = array(
    'name' => 'Media Category'
);

$args = array(
    'labels' => $labels,
    'public' => true
);

register_taxonomy('imagetype', 'attachment', $args);
} 
```

之后，我想出了如何在“插入媒体”框中创建一个新选项：

```
function custom_media_upload_tab_name( $tabs ) {
    $newtab = array( 'tab_slug' => 'Your Tab Name' );
    return array_merge( $tabs, $newtab );
}

add_filter( 'media_upload_tabs', 'custom_media_upload_tab_name' );

function custom_media_upload_tab_content() {
    // I haven't gotten to this part yet
}
add_action( 'media_upload_tab_slug', 'custom_media_upload_tab_content' ); 
```

当我弄清楚下一部分时，我会更新它！

# jquery - 使用 jQuery 获取嵌套列表项的索引

> ID：14594387
> 
> 赞同：0
> 
> 时间：2013-01-30T00:01:08.477
> 
> 标签：jquery, css

试图获取包含在活动部分中选择的类的锚标记的列表项的索引号

我想检索的 LI：

```
<li>
            <a href="#" data-id="3" class="scene unchecked selected">The Health Care Delivery System</a>
        </li> 
```

在这个例子中，我应该得到一个索引 1

```
<ul>
<li>
    <a href="#" class="scene expanded checked">Introduction</a>
</li>
<li class="active-section">
    <a class="expanded">The Section 2</a>
    <ul style="display: block;">
        <li>
            <a href="#" data-id="2" class="scene checked">Introduction</a>
        </li>
        <li>
            <a href="#" data-id="3" class="scene unchecked selected">The Health Care Delivery System</a>
        </li>
        <li>
            <a href="#" data-id="4" class="scene unchecked">Determining Payments from External Customers</a>
        </li>
        <li>
            <a href="#" data-id="5" class="scene unchecked">Checkpoint</a>
        </li>
    </ul>
</li>
<li>
    <a class="collapsed">Paying for Health Care</a>
    <ul class="collapsed" style="">
        <li>
            <a href="#" data-id="6" class="scene unchecked">Health Care Systems</a>
        </li>
        <li>
            <a href="#" data-id="7" class="scene unchecked">Find Savings with a Discount</a>
        </li>
        <li>
            <a href="#" data-id="8" class="scene unchecked">Checkpoint</a>
        </li>
        <li>
            <a href="#" data-id="9" class="scene unchecked">Defects in Ice Skate Pairs</a>
        </li>
    </ul>
</li>
<li>
    <a href="#" data-id="22" class="collapsed scene unchecked">Summary</a>
</li>
</ul> 
```

这是我尝试过的，但它不起作用

```
var innerIndex = $("li.active-section").index("li:has(a.selected)"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T00:09:31.620

```
$(".active-section li:has(a.selected)").index(); 
```

您需要获取正确`li`元素的索引。

[http://jsfiddle.net/ExplosionPIlls/PKEBv/](http://jsfiddle.net/ExplosionPIlls/PKEBv/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T00:10:52.087

另一种方法

```
var innerIndex = $("li.active-section li > a.selected").parent().index(); 
```

[jsFiddle](http://jsfiddle.net/pmatseykanets/GZ9Hq/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T00:11:46.543

我想您可能正在寻找使用[类选择器？](http://api.jquery.com/class-selector/)以列表中的链接元素为目标？

```
var selectedElement = $(".scene").class("selected"); 
```

虽然不是一个完整的代码答案（我的头顶答案..甚至不确定它是否按原样工作）它应该以更简单的方式为您提供相同的结果。您只需要确保只有一个类具有“选定”属性，但这是非常明显和预期的。

快乐编码！

# javascript - 检查字符串的前 x 个字母

> ID：14594396
> 
> 赞同：0
> 
> 时间：2013-01-30T00:01:40.690
> 
> 标签：javascript

有没有一种简单的方法来检查 JavaScript 中的字符串是否与某个事物匹配，例如：

假设您要检查具有以下内容的第一个单词：

`/admin this is a message`

然后用JS查找，`/admin`以便我可以在我的聊天窗口中引导消息？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T00:05:01.823

一种方法是使用 indexOf() 查看 /admin 是否位于 pos 0。

```
var msg = "/admin this is a message";
var n = msg.indexOf("/admin"); 
```

如果 n = 0，那么您知道 /admin 位于消息的开头。

如果消息中不存在该字符串，则 n 将等于 -1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T07:00:29.950

或者，

```
string.match(/^\/admin/) 
```

根据[http://jsperf.com/matching-initial-substring](http://jsperf.com/matching-initial-substring)`indexOf` ，这比任何一个或`slice`在没有匹配的情况下快两倍，但在匹配时速度较慢。因此，如果您希望主要有不匹配，这会更快，它会出现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T00:07:51.123

你可以使用[`Array.slice(beg, end)`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice)：

```
var message = '/admin this is a message';
if (message.slice(0, 6) === '/admin') {
  var adminMessage = message.slice(6).trim();
  // Now do something with the "adminMessage".
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T00:09:48.517

为此，您可以查找“特殊命令字符” `/`，如果找到，获取文本直到下一个空格/行尾，根据您的命令列表检查此内容，如果匹配，请执行一些特殊操作

```
var msg = "/admin this is a message", command, i;
if (msg.charAt(0) === '/') { // special
    i = msg.indexOf(' ', 1);
    i===-1 ? i = msg.length : i; // end of line if no space
    command = msg.slice(1, i); // command (this case "admin")
    if (command === 'admin') {
        msg = msg.slice(i+1); // rest of message
        // .. etc
    } /* else if (command === foo) {
    } */ else {
        // warn about unknown command
    }
} else {
    // treat as normal message
} 
```

# php - 将 Google 电子表格 API 导出到我的 PHP 网站的简单方法？

> ID：14594400
> 
> 赞同：1
> 
> 时间：2013-01-30T00:02:22.053
> 
> 标签：php, web

我正在利用我的假期来测试网络编程的一些新功能。我对 Google 电子表格 API 有过感触。

并被告知可以用它在网站上“打印”？

我试图弄清楚如何获取例如 (3,3) = 链接 qer.dk 打印到 HTML/PHP 文件？

电子表格： [https ://docs.google.com/spreadsheet/pub?key=0Au2byfLzGSxddHExR​​zYtNUFVWDlWa0VHQ3NGdTNiS2c&output=html](https://docs.google.com/spreadsheet/pub?key=0Au2byfLzGSxddHExRzYtNUFVWDlWa0VHQ3NGdTNiS2c&output=html)

我必须将什么代码行放入我的 HTML 中？有人获得有关电子表格和 Web 编码的教程的链接吗？我似乎什么也没找到：/

此致

# javascript - 我怎么能用 Jquery 做到这一点？

> ID：14594401
> 
> 赞同：-1
> 
> 时间：2013-01-30T00:02:25.377
> 
> 标签：javascript, jquery

我怎样才能做到这一点，以便 Jquery 检查 HTML 表单中的 ESNStart 和 ESNEND 是否在同一范围内，否则它会在输入 ESNEnd 的值后向用户抛出一个警告，指出两个数字需要在同一范围内？我仍然不明白我是如何做到的，因此 ESNList 会检查其在文本字段中输入的所有多个值是否在同一范围内，否则它还会向用户发出警报，以输入与相同范围内的数字if 语句显示 ? 证明这一点的小提琴将帮助我学到很多东西，非常感谢！

```
<html>
    <head>
        <script type="text/javascript" src="jquery/jquery-1.8.3.js"></script>
        <script type="text/javascript">
            $(function() {
                $(":text").css("border", "2px solid red");
                $(":text").keyup(function() {
                    var enteredData = $(this).val()
                    console.log(enteredData);
                    if (enteredData == "") {
                        $(this).css("border", "2px solid red");
                    } else {
                        $(this).css("border", "inherit");
                    }
                    if ($(this).attr("id") == "ESNList") {
                        esnList = parseInt(enteredData);
                        switch (true) {
                            case (esnList >= 986329 && esnList <= 999999):
                                $("#ddl_StxName").val("stx2");
                                $("#ddl_rtumodel").val("globalstar");
                                break;
                            case (esnList >= 660000 && esnList <= 699999):
                                $("#ddl_StxName").val("mmt");
                                $("#ddl_rtumodel").val("globalstar");
                                break;
                            case (esnList >= 200000 && esnList <= 299999):
                                $("#ddl_StxName").val("stm3");
                                $("#ddl_rtumodel").val("stmcomtech");
                                break;
                            case (esnList >= 1202114 && esnList <= 1299999):
                                $("#ddl_StxName").val("smartone");
                                $("#ddl_rtumodel").val("globalstar");
                                break;
                        }

                    }
                });
            });
        </script>
    </head>

    <body>
        <form id="provision">ESNList:
            <input type="text" id="ESNList" name="ESNList" size="30" />
            <br />ESN Start:
            <input type="text" id="ESNStart" name="ESNStart" size="10" />
            <br />ESN End:
            <input type="text" id="ESNStart" name="ESNStart" size="10" />
            <br />UnitName:
            <input type="text" id="STxName" name="STxName" size="30" />
            <br />Unit Model:
            <select name="STxName" id="ddl_StxName">
                <option value="stx2">STX2</option>
                <option value="stm3" selected>STM3</option>
                <option value="acutec">Acutec</option>
                <option value="trackpack">Trackpack</option>
                <option value="mmt">MMT</option>
                <option value="smartone">Smartone</option>
                <option value="smartoneb">SmartOneB</option>
            </select>
            <br />RTU Model Type:
            <select name="rtumodel" id="ddl_rtumodel">
                <option value="globalstar">GlobalStar</option>
                <option value="both">Both</option>
                <option value="comtech">Comtech</option>
                <option value="stmcomtech">STMComtech</option>
            </select>
            <br />
            <input type="submit" value="submit" />
        </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T01:47:37.600

尽管我没有创建超出范围的数字组，但我创建了一些似乎有效的方法。

我强烈建议你不要让用户输入逗号分隔的列表，因为它很难指向用户无效的条目。在自己的输入中包含每个数字会更干净。您可以轻松添加“添加新号码”按钮并为其创建新输入。

我使用数组来存储范围和为其他字段更改的有效范围的值。这个模块不是微不足道的，建议您创建一个测试沙箱，其中包含可以测试的各种数字。

```
$('#ESNList').keyup(function(){
    var enteredData = $(this).val();
    $(this).removeClass('valid');
    if( enteredData == ''){
        return;
    }
    if(hasMultipleValues(enteredData)){
        var range=rangeCheckMultipleNumbers(enteredData)
      if( range===false){
        log('Numbers not in same range');
        return;
      } else{
          setRangeValues(range);

        $(this).addClass('valid');
      }
    }
    var rangeIdx = getRangeIndex(enteredData);
    if(rangeIdx===false){
        log('Number not in range');
    }else{
        setRangeValues(rangeIdx);           
        $(this).addClass('valid');
    }
});

function hasMultipleValues( str){ 
     /* second test for a singel entry with comma at end*/   
    return str.indexOf(',') !=-1 && str.indexOf(',') != str.length-1;   
}

var ranges = [
    [986329, 999999],
    [660000, 699999],
    [200000, 299999],
    [1202114, 1299999]
];

var rangeText = [
    ["stx2", "globalstar"],
    ["mmt", "globalstar"],
    ["stm3", "stmcomtech"],
    ["smartone", "globalstar"]
]

/* returns range index if all in same range, otherwise returns false*/
function rangeCheckMultipleNumbers(str) {
    var nums = str.split(',');
    var rangeMatch = true; /* clean array to remove empty values if extra commas*/
    nums = $.grep(array, function(item, index) {
        return parseInt(item);
    });

    var groupRange = getRangeIndex(nums[0]);
    if(nums.length > 1) {
        for(i = 1; i < nums.length; i++) {
            if(!checkSameRange(nums[i - 1], nums[i])) {
                rangeMatch = false;
            }
        }
    }

    return rangeMatch ? groupRange : false;
}

function setRangeValues(rangeIndex) {
    $("#ddl_StxName").val(rangeText[rangeIndex][0]);
    $("#ddl_rtumodel").val(rangeText[rangeIndex][1]);
}

function checkSameRange(num1, num2) {
    return getRangeIndex(parseInt(num1, 10)) == getRangeIndex(parseInt(num2, 10));
}
/* returns false if out of range, otherwise returns range index*/
function getRangeIndex(num) {
    var idx = false;
    $.each(ranges, function(i, range) {
        if(num >= range[0] && num <= range[1]) {
            idx = i;
            return false;
        }
    });
    return idx;
} 
```

演示：http: [//jsfiddle.net/hXsQ8/1/](http://jsfiddle.net/hXsQ8/1/)

# python - 如何使动态导入的模块在另一个模块或文件中可用？

> ID：14594402
> 
> 赞同：1
> 
> 时间：2013-01-30T00:02:31.950
> 
> 标签：python, import, eval

我有 3 个文件 a.py、b.py、c.py

我正在尝试从 a.py 中动态导入在 c.py 中定义的名为“C”的类，并在 b.py 中提供评估的名称

python a.py 当前正在捕获 NameError。我试图避免这种情况并在 b.py 中创建一个调用 C.do_int(10) 的实例

一个.py

```
import b

#older
#services = __import__('services')
#interface = eval('services.MyRestInterface')

# python2.7
import importlib
module = importlib.import_module('c')
interface = eval('module.C')

# will work
i = interface()
print i.do_int(10)

# interface isn't defined in b.py after call to eval
try:
  print b.call_eval('interface')
except NameError:
  print "b.call_eval('interface'): interface is not defined in b.py" 
```

* * *

b.py

```
def call_eval(name):
  interface = eval(name)
  i = interface()
  return i.do_int(10) 
```

* * *

py

```
class C(object):
  my_int = 32
  def do_int(self, number):
    self.my_int += number
    return self.my_int 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:41:00.597

如果 a.py 已经加载了该类，我看不到按名称传递它的原因。相反，做

```
# b.py
def call_eval(klass):
  j = klass()
  return i.do_int(10) 
```

并且，在 a.py 中，执行

```
import importlib
module = importlib.import_module('c')
interface = getattr(module, 'C')
b.call_eval(interface) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T01:49:16.803

我确信完全避免这种情况应该有更好的解决方案。

但这可以解决问题：

一个.py：

```
shared_variables = {}
import b

import c
shared_variables['C'] = c.C

b.do_something_with('C') 
```

b.py：

```
from __main__ import shared_variables

def do_something_with(name):
    print(shared_variables[name]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T00:16:38.327

`interface`仅存在于`a`的命名空间中。您可以像这样将接口的引用放入`b`'s 命名空间

```
b.interface = interface
try:
  print b.call_eval('interface')
except NameError:
  print "b.call_eval('interface'): interface is not defined in b.py" 
```

我不确定你为什么不只是将接口传递`call_eval`给

# symfony - Symfony2 输入要求

> ID：14594404
> 
> 赞同：0
> 
> 时间：2013-01-30T00:02:41.293
> 
> 标签：symfony

我正在尝试创建一个包含一些可选字段（将它们留空）的表单，为此我在表单构建器中添加了 required => false 选项...

```
$builder->add('twitter', 'url', array('required' => 'false')); 
```

该实体没有任何验证约束...

```
/**
 * @var string
 *
 * @ORM\Column(name="twitter", type="string", length=50)
 */
private $twitter; 
```

还尝试使用调试 true/false 清除 dev 中的缓存。但是表单在加载时仍然具有必需的属性：$

```
<input type="url" id="post_add_twitter" name="post_add[twitter]" required="required" /> 
```

我的设置通过了**php app/check.php**

我做错了什么？

已编辑：Symfony 2.1.7 版，PHP 5.4.7 版

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T00:25:10.203

'required' 属性采用布尔值，而不是字符串：

```
$builder->add('twitter', 'url', array('required' => false)); 
```

我没有看得太深，但我想这个属性在某些时候是类型转换的，这意味着任何字符串（''除外）都会评估为真，并强制你的字段被要求

# xml - 实现这个 xslt 翻译

> ID：14594406
> 
> 赞同：0
> 
> 时间：2013-01-30T00:03:03.467
> 
> 标签：xml, xslt, xslt-1.0

我有一个要求，我必须使用 xslt 进行转换，已知标签要被替换，但是对于任何未识别的标签都应该放在一个属性包中（比如在 c# 中）类型的模式。例如。我想转换以下 XML：

```
<Envelope>
    <body>
        <MyOperation_reply_data>
            <operation_name>1211</operation_name>
            <operation_short_desc>SCAMA</operation_short_desc>
            <operation_long_desc>C4 SCAM PIECE PART ASSEMBLY
            </operation_long_desc>
            <primary_units>UNITS</primary_units>
            <firstAttribute>123</firstAttribute>
            <sampleone>554</sampleone>
            <area>newarea</area>
            <group>samplegroup</group>
            <whatever>uuu</whatever>
        </MyOperation_reply_data>
    </body>
</Envelope> 
```

到这种格式：

```
<Envelope>
<Body>
    <OperationInfo OperationName="MyOperation">
        <OperationData>
            <Operation>MyOperation</Operation>
            <ShortDescription>MyDescription</ShortDescription>
            <LongDescription>MyLongDescription</LongDescription>
            <PrimaryUnits>UNITS</PrimaryUnits>
            <Attributes>
                <Attribute Name="firstAttribute" Value="123" />
                <Attribute Name="sampleone" Value="554" />
                <Attribute Name="area" Value="newarea" />
                <Attribute Name="group" Value="samplegroup" />
                <Attribute Name="whatever" Value="uuu" />
            </Attributes>
        </OperationData>
    </OperationInfo>
</Body> 
```

如您所见，只有操作、操作长/短描述和主要单位是可识别的标签。我还想把它放在上面的属性列表中。“其他”标签列表可能会增长 - 所以我们的想法是将所有其他标签放入这种属性包类型的模式中。

我面临的挑战是我无法为每个或识别“其他”标签。我尝试了 selected not(self:: with or 语句，但没有太大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T01:18:13.430

在 XSLT 1.0 中，您可以使用`xsl:key`创建元素的“白名单”。

**XML 输入**

```
<Envelope>
    <body>
        <MyOperation_reply_data>
            <operation_name>1211</operation_name>
            <operation_short_desc>SCAMA</operation_short_desc>
            <operation_long_desc>C4 SCAM PIECE PART ASSEMBLY</operation_long_desc>
            <primary_units>UNITS</primary_units>
            <firstAttribute>123</firstAttribute>
            <sampleone>554</sampleone>
            <area>newarea</area>
            <group>samplegroup</group>
            <whatever>uuu</whatever>
        </MyOperation_reply_data>
    </body>
</Envelope> 
```

**XSLT 1.0**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:key name="whiteList" match="*[self::primary_units or 
                                       self::operation_name or
                                       self::operation_short_desc or
                                       self::operation_long_desc]" use="name()"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="body">
        <Body>
            <xsl:apply-templates select="@*|node()"/>
        </Body>
    </xsl:template>

    <xsl:template match="MyOperation_reply_data">
        <OperationInfo OperationName="{operation_name}">
            <OperationData>
                <xsl:apply-templates select="*[key('whiteList',name())]"/>
                <Attributes>
                    <xsl:apply-templates select="*[not(key('whiteList',name()))]"/>                 
                </Attributes>
            </OperationData>
        </OperationInfo>
    </xsl:template>

    <xsl:template match="operation_name">
        <Operation><xsl:apply-templates/></Operation>
    </xsl:template>

    <xsl:template match="operation_short_desc">
        <ShortDescription><xsl:apply-templates/></ShortDescription>
    </xsl:template>

    <xsl:template match="operation_long_desc">
        <LongDescription><xsl:apply-templates/></LongDescription>
    </xsl:template>

    <xsl:template match="primary_units">
        <PrimaryUnits><xsl:apply-templates/></PrimaryUnits>
    </xsl:template>

    <xsl:template match="MyOperation_reply_data/*[not(key('whiteList',name()))]">
        <Attribute name="{name()}" value="{.}"/>
    </xsl:template>

</xsl:stylesheet> 
```

**XML 输出**

```
<Envelope>
   <Body>
      <OperationInfo OperationName="1211">
         <OperationData>
            <Operation>1211</Operation>
            <ShortDescription>SCAMA</ShortDescription>
            <LongDescription>C4 SCAM PIECE PART ASSEMBLY</LongDescription>
            <PrimaryUnits>UNITS</PrimaryUnits>
            <Attributes>
               <Attribute name="firstAttribute" value="123"/>
               <Attribute name="sampleone" value="554"/>
               <Attribute name="area" value="newarea"/>
               <Attribute name="group" value="samplegroup"/>
               <Attribute name="whatever" value="uuu"/>
            </Attributes>
         </OperationData>
      </OperationInfo>
   </Body>
</Envelope> 
```

# php - 如何区分对嵌入页面的图像的请求与对图像的直接请求

> ID：14594407
> 
> 赞同：0
> 
> 时间：2013-01-30T00:03:04.813
> 
> 标签：php, asp.net, html

有没有办法在服务器上判断对图像的请求是否像：

```
http://www.myserver.com/test.jpg 
```

是直接请求（在浏览器地址栏中输入），还是图像标签的结果？

```
<img src="http://www.myserver.com/test.jpg" alt="blah blah"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:07:43.743

不，不可能区分。浏览器将以相同的方式请求两者

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T00:08:53.283

您可以检查`Referer`请求中的字段，以确定该图像是直接请求的还是被其他页面引用的；但是，这不允许您区分**嵌入**图像和**链接**图像。

编辑：另外，正如 tmuguet 所指出的，在请求中欺骗或掩盖引用者非常容易。

# php - 在多个 mysql 连接中根据最近的条目获取和排序

> ID：14594409
> 
> 赞同：0
> 
> 时间：2013-01-30T00:03:06.510
> 
> 标签：php, mysql, date, join, max

我有以下语句可以找到当前赛季一支球队的所有球员。球员按他们的差点排序。如果他们的差点相同，则按最老的排序`added_date`，这意味着较新的成员在列表的下方。

```
SELECT players.playerid_p,
       players.fname, 
       players.sname, 
       players.tel, 
       players.mob, 
       players.email,
       season_players.captain 
FROM season_players 
     LEFT JOIN players ON (season_players.playerid_f = players.playerid_p)
     LEFT JOIN handicaps ON (handicaps.playerid_f = players.playerid_p)
WHERE season_players.seasonid_f = '$currentSeason'
      AND season_players.teamid_f = '".$row["teamid_p"]."'
GROUP BY players.playerid_p
ORDER BY handicaps.handicap ASC, handicaps.added_date ASC 
```

对于每个玩家的任何评论，该`handicaps`表可以有多个条目。

我不知道如何制作用于订购的最新让分（可能与added_date上的MAX有关？）但同时如果两个或更多让分相同，它会按最旧的注册优先顺序排序在添加日期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T00:39:16.453

```
SELECT x.*
  FROM my_table x
  JOIN 
     ( SELECT id,MAX(other_column) max_other_column FROM my_table GROUP BY id) y
    ON y.id = x.id
   AND y.max_other_column = x.other_column; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T00:21:13.923

与其试图弄清楚如何在当前查询中满足您的需求，不如创建一个单独的表，比如说“Handicaps_latest”，它只存储 player_id 和所需的最新评论信息。这样做的原因是因为您只是试图获取（选择子句中的列）有关玩家的信息，而没有真正需要从让分表中获取。在这种情况下，每个玩家有多个条目的让分盘可能不适合加入。但考虑到其他逻辑可能需要这些数据，因此将它们留在那里并创建一个仅存储最新评论数据的分支新表可能是您的案例的一个选项。但这显然需要一些额外的工作，也就是说，每当您将新条目插入原始障碍表时，

# umbraco - umbraco 会员 获取会员资料

> ID：14594414
> 
> 赞同：1
> 
> 时间：2013-01-30T00:03:16.110
> 
> 标签：umbraco, profile, membership

在使用默认会员提供程序的 Umbraco 4.11 中，是否可以访问未登录用户的个人资料？

我已将自定义配置文件属性添加到 web.config，在后台的 MemberType 上添加了相同的道具，我正在通过执行以下操作创建配置文件：

```
MembershipUser member = System.Web.Security.Membership.CreateUser(username, password, email);
var profile = System.Web.Profile.ProfileBase.Create(member.UserName);
profile["FirstName"] = "John";
profile.Save(); 
```

我可以通过执行以下操作获取当前登录的用户配置文件：

```
var currentUser = umbraco.cms.businesslogic.member.Member.GetCurrentMember(); 
```

但是如何获取未登录用户的个人资料？

例如。我试过了：

```
var profile =  System.Web.Profile.ProfileManager.FindProfilesByUserName(System.Web.Profile.ProfileAuthenticationOption.All, username); 
```

但这会导致“不支持指定方法”异常。

这将在管理服务中使用，该服务与外部提供者执行定期同步，因此不会有用户上下文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:34:50.283

你`ProfileBase.Create()`再用。别担心，它实际上并没有再次“创建”配置文件。

```
var profile = ProfileBase.Create(username);
string firstName = profile["FirstName"]; 
```

如需更多信息，请参阅：

*   [如何在 ASP.NET MVC 中获取另一个用户的配置文件？](https://stackoverflow.com/questions/1536086/how-to-get-another-users-profile-in-asp-net-mvc)
*   [会员提供者](http://our.umbraco.org/wiki/how-tos/membership-providers)

# .net - .NET 可执行文件如何运行？

> ID：14594418
> 
> 赞同：2
> 
> 时间：2013-01-30T00:03:27.277
> 
> 标签：.net, architecture, executable

我知道它的作用，但我还没有找到它是如何执行的解释。与 Java 不同，我们不需要调用虚拟机可执行文件来运行我们的程序。

在 .NET 中，只需正常运行可执行文件。它是 Windows 服务吗？它是.Net可执行文件引用的DLL吗？它与操作系统内核绑定吗？它是一种类似于杀毒软件的拦截器吗？它是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T00:09:12.940

Windows NT 用于可执行文件的[Portable Executable格式以及后来使用](http://en.wikipedia.org/wiki/Portable_Executable)[PE 标头中的元数据来支持 CLR 可执行文件](http://en.wikipedia.org/wiki/Portable_Executable#.NET.2C_metadata.2C_and_the_PE_format)。

Windows 在安装 .NET Framework 时知道此信息，并使用它来启动带有可执行文件的 CLR。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T00:30:39.910

这取决于您拥有的 Windows 版本。但基本机制是每个 .NET 程序集都包含*五个*字节的非托管代码。对于 EXE，它是指向 c:\windows\system32\mscoree.dll 中 _CorExeMain() 的 JMP 指令。然后完成初始化 CLR 和启动程序的 Main() 方法的繁重工作。

更高版本的 Windows 有一个加载程序，它知道 .NET 程序集的格式并直接与 mscoree.dll 集成。需要支持非常不寻常的功能，即 32 位可执行文件可以启动 64 位进程。更多关于那个[此答案](https://stackoverflow.com/a/10392396/17034)的更多信息。

这是10,000英尺的视图。.NET 和 Java 的本质区别在于 .NET 程序集可以包含非托管代码（如 JMP）和数据（程序集清单和 IL）。Java .class 或 .jar 文件是纯数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T00:26:54.363

如果我没记错的话，早期版本的 .net 不是由 Windows 自动加载的，但是多年来，随着 Windows 的更多版本，该过程的引导现在是无缝的。

.Net 的 CLR 是 Microsoft 对 CLI[公共语言基础结构](http://en.wikipedia.org/wiki/Common_Language_Infrastructure)的实现。Mono 是它的另一种实现。

从技术上讲，CLR 被实现为在 Windows 中运行并管理 .net 程序集的执行的 COM 服务器组件。

如果你真的想了解细节，你应该看看 Jeffrey Richter 的书：[CLR via C#](https://rads.stackoverflow.com/amzn/click/com/0735667454)

# mysql - 为 SQL PreparedStatement 动态添加列 - 仍然可以安全地防止注入？

> ID：14594419
> 
> 赞同：1
> 
> 时间：2013-01-30T00:03:27.293
> 
> 标签：mysql, jdbc, prepared-statement, sql-injection

我试图在我的 Java 程序中防止 SQL 注入。我想使用 PreparedStatements 来执行此操作，但我事先不知道列数或其名称（该程序允许管理员在表中添加和删除列）。我是新手，所以这可能是一个愚蠢的问题，但我想知道这种方法是否安全：

```
public static int executeInsert( String table, Vector<String> values)
{
    Connection con;
    try {
        con = connect();

        // Construct INSERT statement
        int numCols = values.size();
        String selectStatement = "INSERT INTO " + table + " VALUES  (?";
        for (int i=1; i<numCols; i++) {
            selectStatement += ", ?";
        }
        selectStatement += ")";     
        PreparedStatement prepStmt = con.prepareStatement(selectStatement);

        // Set the parameters for the statement
        for (int j=0; j<numCols; j++) {
            prepStmt.setString(j, values.get(j));
        }

        System.out.println( "SQL: " + prepStmt) ;
        int result = prepStmt.executeUpdate();
        con.close() ;
        return( result) ;
    } catch (SQLException e) {
        System.err.println( "SQL EXCEPTION" ) ;
        System.err.println( "Inserting values " + values + " into " + table);
        e.printStackTrace();
    }
    return -1;
} 
```

基本上，我根据传入的值的数量（以及表中有多少列）动态地为语句创建字符串。我觉得它是安全的，因为 PreparedStatement 直到创建此字符串后才真正创建。我可能会制作类似的函数，它们接受实际的列名并将它们合并到 SQL 语句中，但这些将由我的程序生成，而不是基于用户输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:05:59.230

任何时候，只要您将值`table`插入到查询中而不转义，您就应该针对已知良好值的白名单进行测试。这可以防止人们发挥创造力并造成麻烦。一个简单的字典或有效条目数组通常就足够了。

使用准备好的语句是个好主意，但请确保您准备的语句从一开始就不允许注入。

# sas - 将来自两个不同过程的输出与按值交错

> ID：14594422
> 
> 赞同：1
> 
> 时间：2013-01-30T00:03:43.533
> 
> 标签：sas

我有一个大型 SAS 数据集，我想使用按值处理制作一系列表格和图表。我将这些输出到 PDF。

有没有办法让 SAS 在遍历数据时在表格和图表之间交替？现在，我必须先打印所有表格，然后再打印图表。如果只是 4 个表格/图表，那么我可以写

这是一个简单的例子：

```
data sample;
  input byval $ item $ amount;
  datalines;
A X 15
A Y 16
A Z 12
B X 25
B Y 10
B Z 18
;
run;

symbol1 i=j;

proc print data=sample;
  by byval;
  var item amount;
run;

proc gplot uniform data=sample;
  by byval;
  plot amount*item;
run; 
```

这将打印 2 个表格，然后是 2 个图表。我希望“A”的图表出现在“A”的表格之后，以便读者可以翻阅 pdf 并始终一起看到相关的图表和表格。

我可以为每一个编写单独的过程，但是 gplot 不会有一个统一的轴（如果我有 100 个不同的组而不是 2 个，它会变得混乱）。

我考虑过将它们注入 greplay，但是你不能使用带有“#BYVAL1”的标题。

有什么简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:06:44.477

我从未使用过它，但可能值得查看 ODS 文档。这允许您存储所有过程的输出，然后使用 PROC DOCUMENT 从它们中引用特定项目。

以下是 SAS 网站的链接，其中包含有关这方面的有用信息，特别是 Cynthia Zender 为 2009 年 SAS 全球论坛撰写的论文。

[http://support.sas.com/rnd/base/ods/odsdocument/index.html](http://support.sas.com/rnd/base/ods/odsdocument/index.html)

Cynthia 还定期为 SAS 支持社区网站 ( [https://communities.sas.com/community/support-communities](https://communities.sas.com/community/support-communities) ) 做出贡献，因此如果您仍然卡住，可能值得在那里询问。

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T05:43:46.240

我不知道有什么方法可以直接做你问的事情。GREPLAY 可能是您最接近的；主要问题是 SAS 线性处理 PROC，首先处理整个 PROC PRINT，然后处理整个 PROC GPLOT。GREPLAY 将允许您重新显示输出，但如果由于#BYVAL 问题而无法满足您的需求，我不确定是否有更好的解决方案。也许您可以在之后修改标题（不确定 GREPLAY 是否允许这样做）？

您可以尝试使用 ODS LAYOUT，但我认为这不会更好。*可能*更好的一种方法是，如果您可以计算出在“页面”上有两列，一列是 PROC PRINT 输出，一列是 PROC GPLOT，然后将列打印一页而不是另一页。我认为这是不可能的，但可能值得探索。

您也可以尝试设置一个宏来分别执行每个 BYVAL，手动以统一的方式定义轴（即，根据您自己对正确轴参数的计算来定义它，作为宏的参数）。这可能是仍然允许#BYVAL 正常工作的最简单的解决方案。

您也可以尝试浏览 Richard DeVenezia 的网站 ( [http://www.devenezia.com/downloads/sas/samples/](http://www.devenezia.com/downloads/sas/samples/) )，其中有很多 SAS/GRAPH 解决方案的示例。他有时也会在 SAS-L (sasl@listserv.uga.edu) 上发帖，不确定我是否在 StackOverflow 上见过他。他可能是最有可能回答我所知道的问题的人。

# sql-server-2008 - 为不同时区的数据库操作getdate()的结果

> ID：14594423
> 
> 赞同：0
> 
> 时间：2013-01-30T00:03:45.807
> 
> 标签：sql-server-2008, tsql

我的应用程序对在不同时区运行的支持有限。从本质上讲，该应用程序有一个用于西方成本的数据库/环境，以及一个用于东方成本的数据库/环境。

应用程序使用 getdate() 计算当前时间。

我们没有源代码，因此无法使用自定义函数替换 getdate。有什么方法可以覆盖 Getdate 函数吗？或者是否可以为不同的数据库配置不同的时区？不同的实例呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T00:05:30.173

SQL Server 直接从主机操作系统获取时间 - 它不支持时区，并且无法在一台服务器上说此数据库或此实例位于此时区，而此其他数据库或其他实例位于此其他时区。您能够做到这一点的唯一方法是拥有完全不同的服务器并关闭任何日期/时间同步服务（如果它们是虚拟机，则包括来自主机的同步服务）。

[`GETUTCDATE()`](http://msdn.microsoft.com/en-us/library/ms178635(v=sql.100).aspx)您应该使用or存储 UTC 时间[`SYSUTCDATETIME()`](http://msdn.microsoft.com/en-us/library/bb630387(v=sql.100).aspx)。然后，您不需要知道一条数据来自哪个时区，并且总是很容易将其转换为这些时区中的任何一个（或您以后需要支持的任何其他时区）。例如，ASP.NET 具有[非常广泛的时区支持](https://stackoverflow.com/questions/832986/how-to-work-with-timezone-in-asp-net)。

您可以使用[`INSTEAD OF INSERT`触发器](http://msdn.microsoft.com/en-us/library/ms175521(v=sql.100).aspx)覆盖源代码发送的任何内容，而忽略它们发送的任何内容`GETDATE()`。一个简单的例子：

```
CREATE TRIGGER dbo.whatever
ON dbo.tablename
INSTEAD OF INSERT
AS
BEGIN
  SET NOCOUNT ON;

  INSERT dbo.tablename(col1, col2, date_created)
    SELECT col1, col2, SYSUTCDATETIME() FROM inserted;
    -------------------^^^^^^^^^^^^^^ this overrides what they passed
END
GO 
```

您也可以考虑新的[`TIMEZONEOFFSET`](http://msdn.microsoft.com/en-us/library/bb630289(v=sql.100).aspx)数据类型，但由于它不支持 DST，我不确定它是否对您的方案有价值。

# c++ - 使用 C++ lambda 模仿 Obj-C 块行为

> ID：14594427
> 
> 赞同：4
> 
> 时间：2013-01-30T00:04:29.883
> 
> 标签：c++, objective-c, c++11, lambda, block

是否可以像使用 Objective-C 块一样使用 C++ lambda？

以下面的 Objective-C 代码为例：

```
@interface MyClass : NSObject
// ...
- (void)myMethodWithBlockParam:(void(^)(void))block;
//
@end 
```

该消息将按如下方式发送：

```
[myClassInstance myMethodWithBlockParam:^{
     // Do something inside block
}]; 
```

有没有办法在 C++ 中使用 lambda 实现相同的效果？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T00:23:09.860

在 C++ 中你可以做

```
struct MyClass {
  void myMethodWithBlockParam(std::function<void()> block);
}; 
```

这将使用 lambda 调用

```
myClassInstance.myMethodWithBlockParam([]()->void {
   // Do something inside block
}); 
```

这很容易扩展到带有参数和返回类型的函数。使用 std::function 的特殊化作为函数参数类型允许传递具有指定签名的任何可调用对象（函数、函数对象、lambdas）。

Lambda 也可以是闭包，即通过引用或值（作为副本）从其定义上下文中绑定变量。

# linux - Mac 上的 TideSDK 应用

> ID：14594430
> 
> 赞同：0
> 
> 时间：2013-01-30T00:04:50.347
> 
> 标签：linux, windows, macos, tidesdk

我在 OSX 上通过 TideSDK 开发了一个应用程序。我有一个 .app，它正在 OSX 上运行。但是，您知道它不能在 linux 或 windows 上运行。我想在 linux 或 windows 上运行我的应用程序。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T11:14:23.570

简而言之，您为每个平台打包。如您所知，mac 应用程序不能在 Windows 上运行，并且 TideSDK 也是如此，因为您正在为每个平台创建本机的东西。必须在每个平台上安装 TideSDK 才能为其创建可执行文件和捆绑包。

要为每个系统生成安装程序，您需要在每个系统（windows / linux 32bit / linux 64bit）上使用命令行中的tidebuilder.py 运行命令。

我们很快就会谈论更多关于打包的内容，这将使构建和分发您的应用程序的任务变得更容易。请继续关注更新！！

# android - 初始地图视图和缩放级别

> ID：14594432
> 
> 赞同：0
> 
> 时间：2013-01-30T00:04:55.430
> 
> 标签：android, google-maps-android-api-2

我是安卓新手。我用 a 制作了一个应用程序，`MapView`我想设置它，当我运行我的应用程序时，它会显示一个具有定义缩放级别的定义位置（城镇）。知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T01:46:08.223

你可以按照这个：

```
MapController mc;
    GeoPoint p;
mapView = (MapView) findViewById(R.id.mapView);
 mc = mapView.getController();
        String coordinates[] = {"1.352566007", "103.78921587"};// Change this value to your desire position.
        double lat = Double.parseDouble(coordinates[0]);
        double lng = Double.parseDouble(coordinates[1]);

        p = new GeoPoint(
            (int) (lat * 1E6), 
            (int) (lng * 1E6));

        mc.animateTo(p); // set map center to your desire place
        mc.setZoom(17); //set zoom level.
        mapView.invalidate(); 
```

您可以使用此[页面](http://universimmedia.pagesperso-orange.fr/geo/loc.htm)获取地点的经度/纬度

# listview - 设置 WinJS.UI.ListView 数据源时的对象预期错误

> ID：14594433
> 
> 赞同：1
> 
> 时间：2013-01-30T00:04:57.357
> 
> 标签：listview, windows-8, winjs

当我尝试使用对象数组的静态数据源设置 ListView 控件时，我得到了以下堆栈跟踪。此行的 ui.js 中的应用程序错误：

```
var rendered = WinJS.Promise.as(this.renderer(itemForRendererPromise, recycledElement)).
            then(WinJS.UI._normalizeRendererReturn); 
```

> TypeError：在匿名函数 (ms-appx://microsoft.winjs.1.0/js/ui.js) 处的 renderItemAsync (ms-appx://microsoft.winjs.1.0/js/ui.js:20074:9) 预期对象:22477:54) 在 _renderItem (ms-appx://microsoft.winjs.1.0/js/ui.js:10557:9) 在 _elementForItem (ms-appx://microsoft.winjs.1.0/js/ui.js :10637:13) 在 _itemFromItemPromise (ms-appx://microsoft.winjs.1.0/js/ui.js:10333:9) 在 _itemAtIndex (ms-appx://microsoft.winjs.1.0/js/ui.js :10341:9) 在匿名函数 (ms-appx://microsoft.winjs.1.0/js/ui.js:17393:21) 在 Promise_ctor (ms-appx://microsoft.winjs.1.0/js/base. js:1865:17) 在 _LayoutCommon_measureItems (ms-appx://microsoft.winjs.1.0/js/ui.js:17338:17) 在匿名函数 (ms-appx://microsoft.winjs.1.0/js/ui .js:17296:29)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T00:04:57.357

事实证明，这是因为我将使用的列表项模板 (WinJS.Binding.Template) 移到了 HTML 页面的底部。如果您不将模板放在列表视图之前，则会出现此错误。很奇怪，但至少这是一个简单的修复。

# javascript - 我不知道如何将我创建的工具提示连接到图像映射。

> ID：14594438
> 
> 赞同：1
> 
> 时间：2013-01-30T00:05:15.647
> 
> 标签：javascript, html, css

我不知道如何将我创建的自定义工具提示连接到图像映射。基本上，我不知道在我的区域标签中放置什么来调用工具提示功能。我尝试过的所有东西都不起作用，或者它显示在默认工具提示中。如果有人想查看它，我已经在 jsFiddle 上创建了一个示例。所有帮助将不胜感激！

这是示例，[http://jsfiddle.net/edocurug15/yNAsy/](http://jsfiddle.net/edocurug15/yNAsy/)

```
$(document).ready(function () {
//Tooltips
$(".tip_trigger").hover(function () {
    tip = $(this).find('.tip');
    tip.show(); //Show tooltip
}, function () {
    tip.hide(); //Hide tooltip        
}).mousemove(function (e) {
    var mousex = e.pageX + 20;
    var mousey = e.pageY + 20;
    var tipWidth = tip.width();
    var tipHeight = tip.height();

area title="This is the left eye" shape="rect" coords="373,365,404,402" href="#" 
```

我在我的区域标签中放了什么来显示工具提示？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:46:01.643

您可以通过使用事件目标从触发事件的区域获取文本来做到这一点。

```
$(".tip_trigger").hover(function (e) {
    tip = $(this).find('.tip');
    var tipText = $(e.target).attr('title');
    tip.html(tipText);
    tip.show(); //Show tooltip
} 
```

看到这个更新的小提琴：http: [//jsfiddle.net/yNAsy/3/](http://jsfiddle.net/yNAsy/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T00:38:22.610

您的小提琴中缺少一些代码（例如 example.js 和具有类“tip”的元素）。您应该对区域使用悬停（mouseenter、mouseleave）事件，并将标题属性复制到您的元素中，并使用“tip”类。

```
$("area").hover(function () {
    console.log("hover");
    $(".tip").html($(this).attr("title"));
} 
```

# c++ - 坚持从文本文件中删除“\r”！C++

> ID：14594439
> 
> 赞同：0
> 
> 时间：2013-01-30T00:05:16.177
> 
> 标签：c++, string, replace, std

好的，所以我几乎完成了一个程序。然而，虽然它可以在 Windows 上运行，但我更愿意在我的 Mac 上运行它来测试性能差异（我的 Mac 有更快的硬件）。

我有一个无序映射，它存储在文本文件中的值中，我也在复制这个映射来反转键/值对。

文本文件不断添加新行，从研究中我发现这是因为 Windows 添加了它自己的回车符（为什么？！）并且它位于我的地图中每个第二个元素的末尾。该文件是“stringx,stringy”，因此我使用 stringstream 将字符串 x 和 y 拆分为键/值对。

编辑：感谢各位的回答，辛苦了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T00:10:29.540

这不是工作原理，您应该在[此处](http://en.cppreference.com/w/cpp/string/basic_string/replace)`std::string::replace`阅读它的工作原理。

为了进行基本替换，您可以编写自己的函数来执行此操作，但是在您的情况下，这似乎是一个修剪问题，因为回车通常位于字符串的右侧。

您可以通过执行以下操作删除回车符和换行符：

```
std::string& rtrim(std::string& str) {
    size_t endpos = str.find_last_not_of("\r\n");
    if(endpos != std::string::npos) {
        str.substr(0,endpos+1).swap(str);
    }
    return str;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T00:08:57.283

在某些实现上，例如 Windows，使用“r”的读取模式或“w”的写入模式将导致“\r\n”在您打算通过“\n”时被读取/写入。使用“wb”或“rb”。对于 iostream 函数，我相信你需要传入 ios::binary 标志。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T00:21:08.567

我想我明白现在的问题是什么了。这与处理代码的差异无关——您实际上是在尝试在非 Dos/Windows 机器上使用“DOS/Windows”文件——您需要使用它`dos2unix`来修复文件的行尾！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T00:14:09.717

Windows 使用 "\r\n"[结束行](http://en.wikipedia.org/wiki/Newline)。通常应该在各种平台上运行的程序使用一些`#ifdef`来处理类似的差异。

# php - 使用 cookie 进行基于网站重定向的查询

> ID：14594440
> 
> 赞同：0
> 
> 时间：2013-01-30T00:05:23.533
> 
> 标签：php, javascript, cookies, session-cookies

我有一个网站，以前只是一个新闻页面，但随着我们的成长，我不得不将新闻部分从主页移动到 domainname.com/news

为了不让我们的忠实用户在他们登陆新主页时感到困惑，我想给他们一个选项（灯箱）。当您第一次到达主页时，您会收到一条消息，如果您想直接转到新闻并将其保留为默认设置（或取消）。如果您选择是，下次您输入我们的域名时，它将带您进入新闻部分。

我希望有一个 javascript 可以完成这项工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T00:29:38.613

使用 JavaScript 发出警报 confirm() 以找出用户想要做什么。从那设置一个cookie。

下一次加载，让 PHP 检查 cookie 以找出要去的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T00:31:26.107

```
function checkCookie()
{
var wellcome=getCookie("firstime");
  if (wellcome!==null && wellcome!=="")
  {
     alert("Welcome");
  }
  else 
  {
    alert("is your first time");
    setCookie("firstime",true,365);
  }
} 
```

# emacs - 有没有办法让组织模式以文字显示日期？

> ID：14594449
> 
> 赞同：2
> 
> 时间：2013-01-30T00:06:18.420
> 
> 标签：emacs, org-mode

有没有办法让 org-mode 将时间戳日期插入和显示为单词，而不是在导出中，而是在 org-mode 缓冲区中？

因此，即不是插入日期为 <2013-01-28 Mon>，而是显示 2013 年 1 月 28 日星期一？

我正在查看 org-time-stamp-custom-formats 和 format-time-string 但我没有看到任何答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:14:02.050

您可以自定义 org-mode 变量`org-time-stamp-custom-formats`：

```
M-x customize-variable <RET> org-time-stamp-custom-formats <RET> 
```

然后将格式从 更改`%m/%d/%y %a`为`%A, %B %d, %Y`。要更改时间戳在缓冲区中的显示方式，请将点放在时间戳上并按`C-c C-x C-t`。

您可以通过查看帮助来查看日期格式的语法`C-h f org-time-stamp-custom-formats`。

# ios - 导致冲突的神秘 NSLayoutConstraints

> ID：14594450
> 
> 赞同：0
> 
> 时间：2013-01-30T00:06:24.250
> 
> 标签：ios, autolayout

我正在使用 MGSplitViewClass [（链接）](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDUQFjAA&url=https%3A%2F%2Fgithub.com%2Fmattgemmell%2FMGSplitViewController&ei=MF4IUbydNMyLqQH2jYG4BQ&usg=AFQjCNErwaoN6XZri_9QcsGE-vdT7Rfwjw&sig2=Dbcy4UFn5CNCt_d_a9MLqw&bvm=bv.41642243,d.aWM)并且我很难正确设置 UICollectionView 的大小。在所说的拆分视图中，我在主视图中有一组四个 UIView，它们包含更强大的视图（表格视图、标签组和集合视图）。

首先，我尝试在我的 nib 中添加 UICollectionView 并以编程方式创建一个集合视图控制器并将其连接到我的 nib 的集合视图。我一尝试就失败了 `_collectionViewController.collectionView = myCollectionView;`。这给出了关于我的笔尖在子树之外的视图的错误 `'NSGenericException', reason: 'Unable to install constraint on view. Does the constraint reference something from outside the subtree of the view? That's illegal.`

好的，现在我将从我的 nib 中删除集合视图并添加集合视图控制器附带的视图，就像这样。

```
_collectionViewController = [[[MyCollectionViewController alloc] initWithCollectionViewLayout: [[[MyCollectionLayout alloc] init] autorelease]] retain];
[_collectionViewController.collectionView registerClass:[UICollectionViewCell class] forCellWithReuseIdentifier:@"Cell"];
UICollectionView* collectionView = _attachmentController.collectionView;
[_collectionViewContainer addSubview:collectionView]; 
```

这可行，但集合视图显着溢出了视图容器的大小和其他布局问题。现在显然视图不会像这样正确滚动，所以我必须修复它。

所以我添加了一些约束来调整视图大小以填充容器视图。

```
NSMutableArray* constraints = [[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[collectionView]|" options:NSLayoutFormatAlignAllCenterY metrics:nil views:NSDictionaryOfVariableBindings(collectionView)] mutableCopy];
[constraints addObjectsFromArray:[NSLayoutConstraint constraintsWithVisualFormat:@"|[collectionView]|" options:NSLayoutFormatAlignAllCenterX metrics:nil views:NSDictionaryOfVariableBindings(collectionView)]];
for (NSLayoutConstraint* lc in constraints)
    [_attachmentViewContainer addConstraint:lc]; 
```

但这就是它变得棘手的地方。运行此程序后，我会遇到更多布局错误。

```
Unable to simultaneously satisfy constraints.
Probably at least one of the constraints in the following list is one you don't want.
"<NSAutoresizingMaskLayoutConstraint:0x1d8c0b80 h=-&- v=-&- UICollectionView:0x1cb55400.midX == UIView:0x1d894300.midX - 10>",
"<NSLayoutConstraint:0x1c5a74b0 H:[UICollectionView:0x1cb55400]-(0)-|   (Names: '|':UIView:0x1d894300 )>",
"<NSLayoutConstraint:0x1c5a7440 H:|-(0)-[UICollectionView:0x1cb55400]   (Names: '|':UIView:0x1d894300 )>" 
```

和

```
"<NSAutoresizingMaskLayoutConstraint:0x1d8c0d10 h=-&- v=-&- UICollectionView:0x1cb55400.midY == UIView:0x1d894300.midY + 437>",
"<NSLayoutConstraint:0x1c5a71a0 V:[UICollectionView:0x1cb55400]-(0)-|   (Names: '|':UIView:0x1d894300 )>",
"<NSLayoutConstraint:0x1c5a6f30 V:|-(0)-[UICollectionView:0x1cb55400]   (Names: '|':UIView:0x1d894300 )>" 
```

那些看起来随机的 NSAutoresizingMaskLayoutConstraints 是从哪里来的？一个更好的问题是我在哪里可以摆脱它们？我似乎无法在代码中找到一个点来杀死他们。`-viewWillAppear:`没有通过 UIViewController 传播，所以我有点卡住了。

任何想法都非常受欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T00:10:40.550

在添加这些约束之前，请尝试添加以下行：

[collectionView setTranslatesAutoresizingMaskIntoConstraints:NO];

除非您将其设置为 NO，否则系统将自动将默认的自动调整大小掩码转换为约束。

# perl - 在 Perl 中将文件句柄作为函数 arg 传递

> ID：14594451
> 
> 赞同：3
> 
> 时间：2013-01-30T00:06:26.450
> 
> 标签：perl

我希望能够拥有一个打印到文件但不打开文件的函数——而是应该将一个已经打开的文件句柄传递给它。这样文件打开和关闭只在调用代码块中发生一次。

我试过了：

```
sub teeOutput
{
    my $str = $_[0];
    my $hndl = $_[1];

    #print to file
    print $hndl $str;
    #print to STDOUT
    print $str;
} 
```

然后在调用时

```
open(RPTHANDLE, ">", $rptFilePath) || die("Could not open file ".$rptFilePath);

&teeOutput('blahblah', RPTHANDLE);
&teeOutput('xyz', RPTHANDLE);

close(RPTHANDLE); 
```

但这没有用。

知道如何做到这一点吗？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T00:11:10.687

首先，停止对文件句柄使用全局变量。

```
open(my $RPTHANDLE, ">", $rptFilePath)
   or die("Could not open file $rptFilePath: $!\n"); 
```

那么……嗯，没有“那么”。

```
teeOutput($RPTHANDLE, 'blahblah');
teeOutput($RPTHANDLE, 'xyz');
close($RPTHANDLE); 
```

笔记：

*   我将论点反转为`teeOutput`更理智的东西。
*   我删除了指令 ( `&`) 以覆盖`teeOutput`的原型。`teeOutput`甚至没有。

（但如果您必须处理 glob，请使用`teeOutput(\*STDERR, ...);`.）

# html - 超过一条时对齐线

> ID：14594453
> 
> 赞同：1
> 
> 时间：2013-01-30T00:06:56.110
> 
> 标签：html, css

我在 subnav 上有一个项目列表，如下所示...

![在此处输入图像描述](../Images/989f1fc9a03c8329a67703d875c378eb.png)

每个代码的html如下

```
<label for="DOG - BARK CONTROL TRAINING &amp; BEHAVIOURAL_searchSubCategories" class="facet_block-label"><span>DOG - BARK CONTROL TRAINING &amp; BEHAVIOURAL (2)</span>                         </label> 
```

CSS如下

```
label {
    color: #FFFFFF;
    font: 12px Arial,Helvetica,sans-serif;
    text-transform: lowercase;
}

label span {
    float: none;
    position: inherit;
    width: auto;
} 
```

问题是当线条更长而不是正确对齐时，它不会这样做。例如，我希望行为（2）这个词与狗很好地对齐。知道如何用 css 轻松地做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T00:25:54.840

解决方案是`display`将标签更改为`inline-block` Look at this [fiddle](http://jsfiddle.net/kdEmH/23/)。

# asp.net-mvc - Asp.net mvc 下拉列表

> ID：14594455
> 
> 赞同：0
> 
> 时间：2013-01-30T00:07:19.713
> 
> 标签：asp.net-mvc, entity-framework

我有一段时间试图找出我哪里出错了。情景是这样的。尝试使用 mvc 实体框架添加一个具有外键的对象。

```
public class Person
{
    [Key]
    public virtual int PersonId { get; set; }
    [Display(Name = "First Name")]
    [Required]
    [MaxLength(50)]
    public virtual string FirstName { get; set; }
    [Display(Name = "Last Name")]
    [Required]
    [MaxLength(50)]
    public virtual string LastName { get; set; }
    [Required]
    public virtual int TestItem { get; set; }
    [Required(ErrorMessage = "Please Select an Employee Type")]
    public virtual EmployeeType EmployeeTypeId { get; set; }
}

 public class EmployeeType
{
    [Key]
    public virtual int EmployeeTypeId { get; set; }
    [Required]
    public virtual string EmployeeTypeName { get; set; }

} 
```

这些是实体的两个 pocos。

```
 public ActionResult Create()
    {
        PersonViewModel pv = new PersonViewModel();
        ViewBag.EmployeeTypeSelect= new SelectList(db.EmployeeTypes, "EmployeeTypeId", "EmployeeTypeName");
        return View(pv);
    }

    //
    // POST: /Person/Create

    [HttpPost]
    public ActionResult Create(PersonViewModel personVM)
    {
        if (ModelState.IsValid)
        {
            Person person = new Person();
            person.EmployeeTypeId = personVM.EmployeeTypeId;
            person.FirstName = personVM.FirstName;
            person.LastName = personVM.LastName;
            person.TestItem = personVM.TestItem;
            db.Persons.Add(person);
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        return View(personVM);
    } 
```

那是控制器。

```
@model MvcApplication3.Models.PersonViewModel

@{
ViewBag.Title = "Create";
}

<h2>Create</h2>

@using (Html.BeginForm()) {
@Html.ValidationSummary(true)

<fieldset>
    <legend>PersonViewModel</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.FirstName)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.FirstName)
        @Html.ValidationMessageFor(model => model.FirstName)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.LastName)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.LastName)
        @Html.ValidationMessageFor(model => model.LastName)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.TestItem)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.TestItem)
        @Html.ValidationMessageFor(model => model.TestItem)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.EmployeeTypeId)
    </div>
    <div class="editor-field">
        @Html.DropDownListFor(model=>model.EmployeeTypeId,(SelectList)ViewBag.EmployeeTypeSelect)
        @Html.ValidationMessageFor(model => model.EmployeeTypeId)
    </div>

    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div>

@section Scripts {
@Scripts.Render("~/bundles/jqueryval")
} 
```

这就是观点。

初始获取的视图一切正常，但是当我发布 EmployeeTypeId 有一个空值。我检查了来源，选择列表很好，有正确的值和文本。请帮忙，因为我不知道我哪里出错了。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T00:35:56.567

您的 Person 和 EmployeeType 类需要有一个默认（空）构造函数才能使模型绑定起作用 -

```
 public class EmployeeType
{
    [Key]
    public virtual int EmployeeTypeId { get; set; }
    [Required]
    public virtual string EmployeeTypeName { get; set; }

    public EmployeeType()
    {
    }
}

public class Person {
    [Key]
    public virtual int PersonId { get; set; }
    [Display(Name = "First Name")]
    [Required]
    [MaxLength(50)]
    public virtual string FirstName { get; set; }
    [Display(Name = "Last Name")]
    [Required]
    [MaxLength(50)]
    public virtual string LastName { get; set; }
    [Required]
    public virtual int TestItem { get; set; }
    [Required(ErrorMessage = "Please Select an Employee Type")]
    public virtual EmployeeType EmployeeTypeId { get; set; }

    public Person()
    {
       EmployeeTypeId = new EmployeeType();
    }
} 
```

另外，尝试在您的视图中，使其

`@Html.DropDownListFor(model=>model.EmployeeTypeId.EmployeeTypeId,(SelectList)ViewBag.EmployeeTypeSelect)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T00:23:59.373

尝试在您希望发布的所有值之后在 HTML 中添加 Html.EndForm() 并查看是否可以解决问题？

# regex - 带有可选分隔符的最佳 UUID RegEx

> ID：14594457
> 
> 赞同：3
> 
> 时间：2013-01-30T00:07:23.813
> 
> 标签：regex, uuid

我已经在这里找到了一个关于 UUID 正则表达式的问题[，](https://stackoverflow.com/questions/136505/searching-for-uuids-in-text-with-regex)但是这些表达式不考虑缺少分隔符。

我想出了[以下表达式](http://regexpal.com/?flags=gi&regex=%5Cb(%5B0-9a-f%5D%7B8%7D-%3F(%5B0-9a-f%5D%7B4%7D-%3F)%7B3%7D%5B0-9a-f%5D%7B12%7D)%5Cb&input=foo%7Cbar%3Af81d4fae-7dec-11d0-a765-00a0c91e6bf6%7Cbaz)，但是有没有更优化的正则表达式？

`/\b([0-9a-f]{8}-?([0-9a-f]{4}-?){3}[0-9a-f]{12})\b/i`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-31T05:11:15.930

我假设您的意思是更短的表达式。我将您的正则表达式简化为以下内容：

`/[\da-f]{8}-?([\da-f]{4}-?){3}[\da-f]{12}/i`，你可以在[这里](http://regexpal.com/?flags=gi&regex=%5B%5Cda-f%5D%7B8%7D-%3F%28%5B%5Cda-f%5D%7B4%7D-%3F%29%7B3%7D%5B%5Cda-f%5D%7B12%7D&input=foo%7Cbar%3Af81d4fae-7dec-11d0-a765-00a0c91e6bf6%7Cbaz%0A%0Aca761232ed4211cebacd00aa0057b223%0A%0ACA761232-ED42-11CE-BACD-00AA0057B223%0A%0AAb761232-fd42-11cE-BdAc-00Ff0057c223%0A%0A%7BCA761232-ED42-11CE-BACD-00AA0057B223%7D%0A%0A%28CA761232-ED42-11CE-BACD-00AA0057B223%29)看到它的作用。

我删除了外括号，`\b`因为没有它们，一切都正确匹配。我还可以通过替换`[0-9a-f]`为`[\da-f]`.

我最初有`[0-F]`，但在检查 ASCII 序列后，我意识到 `0123456789:;<=>?@ABCDEF`match ，其中包括一些我们不想匹配的额外符号。

总之，我的表达与你的表达是同义的，但包含的字符少了九个。

# html - HTML 为什么在 IE 8 中

> ID：14594458
> 
> 赞同：1
> 
> 时间：2013-01-30T00:07:30.087
> 
> 标签：html, internet-explorer-8, hyperlink

为什么在 IE 8 中（我无法升级，因为在 Windows XP 上它只能升级到 v8）这有效：

```
<body>
   <a href="page.html">
      <img src="myimage.jpg" />
   </a>
</body> 
```

这不会：

```
<body>
   <a href="page.html">
      <input type="button" name="mybutton" value="Go to page" />
   </a>
</body> 
```

我只需要按钮查看链接，它可以在所有其他浏览器中使用，并且可以在这里验证[http://validator.w3.org](http://validator.w3.org)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T01:26:17.347

如果您需要一个看起来像按钮的链接，您可以将链接设置为看起来像一个按钮：

```
<a href="page.html" class="btn">Go to Page</a> 
```

```
.btn {
    color: #000;
    padding: 1px 6px;
    background: #EEE;
    text-decoration: none;
    border: 1px solid #999;
    font: 13px Helvetica, Arial, FreeSans, Verdana, Tahoma;
}

.btn:hover {
    cursor: pointer;
    background: lightblue;
    border-color: #7EB4EA;
} 
```

其中，当与类似样式的按钮并排放置时，如下所示：

![在此处输入图像描述](../Images/15fdce442f8b360ed413db18bfef1ad5.png)

小提琴：http: [//jsfiddle.net/jonathansampson/g6faB/](http://jsfiddle.net/jonathansampson/g6faB/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T00:19:13.077

只需使用 onClick 事件。

```
<input type="button" value="Google" onClick="javascript:location.href = 'http://google.com';" /> 
```

应使用按钮通过服务器启动操作，例如表单提交。

超链接应该用于导航到另一个页面或客户端操作（例如 Javascript）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T00:33:08.113

```
<form action="page.html">
    <input type="submit" value="Go to page" />
</form> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T00:39:50.737

尝试这个：

```
<input type="image" src="myimage.jpg" alt="Submit" width="48" height="48"> 
```

如上所述，当你使用 input 时，不要忘记在里面使用它`<form>`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T02:03:10.020

在 HTML5 中，`input`不允许该元素作为 element 的子[`a`元素](http://www.w3.org/TR/html5/text-level-semantics.html#the-a-element)，因为两者都是[交互式](http://www.w3.org/TR/html5/dom.html#interactive-content-0)元素。

在 HTML 4.01 中似乎是允许的（但是，您需要在元素周围添加一个块元素`a`，例如 a `div`）。

# windows - 如何在 lua 中递归地遍历 Windows 注册表？

> ID：14594465
> 
> 赞同：2
> 
> 时间：2013-01-30T00:08:13.033
> 
> 标签：windows, recursion, lua, registry

我来自 linux 领域，所以请多多包涵。

我想递归地浏览 Windows 注册表。到目前为止，我所做的一切都得到了各个键的值

```
> require 'luacom'
> sh = luacom.CreateObject "WScript.Shell"
> = sh:RegRead "HKCU\\Console\\ColorTable01"
8388608 
```

但看不到迭代注册表节点的方法......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T03:21:13.543

如果你需要用 Lua 做任何 Windows 特定的事情，你的第一个调用端口应该是[winapi](https://github.com/stevedonovan/winapi)库；[在这种情况下，您可以使用open_reg_key()](http://stevedonovan.github.com/winapi/api.html#Registry_Functions)和[Regkey:get_keys()](http://stevedonovan.github.com/winapi/api.html#Regkey:get_keys)枚举注册表项，如下所示：

```
require "winapi"
local key, err = winapi.open_reg_key [[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows]]
local t = key:get_keys()
for k,v in ipairs(t) do print(k,v) end
-- 1       CurrentVersion
-- 2       HTML Help
-- ... 
```

# jquery - jQuery添加ajax值

> ID：14594467
> 
> 赞同：0
> 
> 时间：2013-01-30T00:08:36.717
> 
> 标签：jquery

使用 jQuery，我创建了一个弹出对话框，然后使用 .load() 从文章 URL 中提取的信息填充 div .side-article-title、.side-article-subtitle 和 .side-article-detail。

但是 .side-article-detail 的高度需要根据上面提到的其他 2 个的高度而改变，我似乎无法获得变量 detailheight 来从 .height() 的 ajax 返回值中减去这些值；

**jQuery**

```
$('body').prepend('<div class="side-article"><div class="side-article-close">X</div><div class="like">Like This</div><div class="article-inner"><div class="side-article-title"></div><div class="side-article-subtitle"></div><div class="side-article-detail"></div></div></div>');

var titleheight = null;
var subtitleheight = null;
var articleHeight = null;
$('.side-article-title').load(thisURL+' #item-title',function(){
        titleheight = $('.side-article-title').height();
        console.log(titleheight);
    });
    $('.side-article-subtitle').load(thisURL+' #item-subtitle',function(){
        subtitleheight = $('.side-article-subtitle').height();
        console.log(subtitleheight);
    });
    $('.side-article-detail').load(thisURL+' #item-detail',function(){
        $('#item-detail').jScrollPane();
    }); 
```

**将高度设置为的元素**

```
 var detailheight = articleHeight -  titleheight - subtitleheight;
    $('.side-article-detail, .jspContainer').css('height',detailheight); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:12:34.873

ajax 的所有功能都需要在完成后在回调中完成。你不能依赖他们以任何顺序工作：

```
$.when($('.side-article-title').load(thisURL+' #item-title', function () {...}),
   $("...").load(...),
   $("...").load(...)
).done(function () {
   var detailheight = articleHeight -  titleheight - subtitleheight;
}); 
```

*只有当所有*ajax 请求都完成后，`.done`回调才会触发。

# ios - 在核心图中设置轴文本样式

> ID：14594469
> 
> 赞同：2
> 
> 时间：2013-01-30T00:08:54.277
> 
> 标签：ios, objective-c, uilabel, core-plot, cptbarplot

所以我正在实现一个带有核心图的条形图，目前我的 y 轴是这样的

![在此处输入图像描述](../Images/befbe389d2b62e191a259c8ce1564bed.png)

我想要做的是从所有实例中删除尾随的 .0 并且不确定我需要设置什么属性，我需要覆盖什么方法或者我需要子类化什么类来编辑显示样式。

非常感谢任何可以提供帮助的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T00:58:08.863

尝试使用合适的`NSNumberFormatter`.

例如：-

```
NSNumberFormatter *numberFormatter = [[NSNumberFormatter alloc] init];
[numberFormatter setNumberStyle:NSNumberFormatterDecimalStyle];
[numberFormatter setMaximumFractionDigits:0];
[numberFormatter setMinimumFractionDigits:0];
CPTXYAxis *y = axisSet.yAxis;
y.labelFormatter = numberFormatter; 
```

# mod-rewrite - 从域的子目录内部重定向到本地主机上的另一台服务器（使用不同的端口）

> ID：14594474
> 
> 赞同：0
> 
> 时间：2013-01-30T00:09:05.023
> 
> 标签：mod-rewrite, localhost

如何在不更改浏览器中的 url 的情况下从 subdir (at `/var/www/vhosts/mydomain.net/httpdocs/subdir`) 重定向到内部 url ( )？`http:// localhost:8992/anApp`

我想要的是在`.htaccess`文件中这样的东西`/var/www/vhosts/mydomain.net/httpdocs/subdir`：

```
RewriteEngine On

RewriteRule /subdir http://localhost:8992/anApp 
```

但它不起作用。为什么？更好/有效的解决方案如何？

# python - Python：如果列表元素的第一项更改，如何交替选择？

> ID：14594478
> 
> 赞同：1
> 
> 时间：2013-01-30T00:09:18.190
> 
> 标签：python, list, iteration, alternate

我找不到解决这个简单问题的算法：

一个列表：

```
 lista:  [[1,a],[1,b],[1,a],[2,s],[2,r],[3,e],[3,k],[3,t],[3,y]....] 
```

我正在迭代这个列表，对于内部列表的第一项与下一个迭代相同的迭代，在 x 和 y 之间交替

```
[1,a] --> x
[1,b] --> x
[1,a] --> x
[2,s] --> y
[2,r] --> y
[3,e] --> x
[3,k] --> x
[3,t] --> x
[3,y] --> x 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T00:17:50.240

```
lista = [[1,'a'],[1,'b'],[1,'a'],[2,'s'],[2,'r'],[3,'e'],[3,'k'],[3,'t'],[3,'y']]

>>> last_a = None
>>> toggle = 'y'
>>> for a, b in lista:
...     if last_a != a:
...         toggle = 'x' if toggle != 'x' else 'y'
...         last_a = a
...     print(a, b, toggle)
... 
(1, 'a', 'x')
(1, 'b', 'x')
(1, 'a', 'x')
(2, 's', 'y')
(2, 'r', 'y')
(3, 'e', 'x')
(3, 'k', 'x')
(3, 't', 'x')
(3, 'y', 'x') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T00:26:38.537

所以，可能有更有效的方法可以做到这一点，但我喜欢使用 itertools 的任何借口！

```
from itertools import cycle

lista = [[1, 'x'], [1, 'x'], [1, 'x'], [2, 'x'], [2, 'x'], [3, 'x'], [3, 'x'], [3, 'x'], [3, 'x']]
r = cycle(['x','y'])

last = None
for first, second in lista:
  current = first
  if current != last:
    output = r.next()
  last = current
  print output 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T00:44:08.570

另一种`itertools`方法：

```
>>> from itertools import chain, cycle, groupby
>>> c = cycle('xy')
>>> grouped = groupby(lista, lambda x: x[0])
>>> xy = (next(c)*len(list(g)) for _, g in grouped)
>>> list(chain(*xy))
['x', 'x', 'x', 'y', 'y', 'x', 'x', 'x', 'x'] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T00:41:19.377

这是一个有趣的方法：

```
lista = [[1,'a'],[1,'b'],[1,'a'],[2,'s'],[2,'r'],[3,'e'],[3,'k'],[3,'t'],[3,'y']]
def function(acc,val):
    if acc[0] != val[0]:
        print acc[1]
        return (val[0],acc[2],acc[1])
    else:
        print acc[2]
        return acc
reduce(function,lista,(lista[0][0],'y','x')) 
```

打印：

```
x
x
x
y
y
x
x
x
x 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-30T00:46:08.387

```
import itertools as it
import operator as op

one, other = 'x', 'y'
for k, g in it.groupby(lista, op.itemgetter(0)):
    for e in g:
        print e, one
    one, other = other, one 
```

印刷

```
[1, 'a'] x
[1, 'b'] x
[1, 'a'] x
[2, 's'] y
[2, 'r'] y
[3, 'e'] x
[3, 'k'] x
[3, 't'] x
[3, 'y'] x 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-30T00:17:16.550

这会打印 x 和 y，我不确定您想对列表中的实际项目做什么。

```
a = [[1, "a"],[1,"b"],[1, "a"],[2, "s"],[2, "r"],[3, "e"],[3, "k"],[3, "t"],[3, "y"]]

def alternate(lst):
    current = lst[0][0]
    swap_vals = {"x": "y", "y": "x"}
    val = "x"
    print(val)
    for i in lst[1:]:
        next = i[0]
        if not current == next:
            val = swap_vals[val]
            current = next
        print(val)

alternate(a) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-30T00:25:06.533

又快又脏：

```
first = lista[0][0]
toprint = 'x'

print toprint

for i in range(len(lista)-1):
    new = lista[i+1][0]
    if first != new:
        toprint = 'y' if toprint != 'y' else 'x'
        first = new
    print toprint 
```

# c# - 混淆一个 5 位数字

> ID：14594479
> 
> 赞同：1
> 
> 时间：2013-01-30T00:09:25.873
> 
> 标签：c#, algorithm, hash

我想混淆一个 5 位数字

我关心的混淆数字的属性：

*   不可能（或作为后备，极不可能）与其他混淆数字发生冲突
*   它也是一个 5 位数字（请不要使用字母字符）
*   在没有计算帮助的情况下，普通人不容易确定（例如，它不是像“乘以 2 并减去 5”这样的显而易见的东西
*   这是一种算法......而不是将所有可能的 5 位数字的查找表存储到它们相应的哈希或其他一些“蛮力”技术

我不关心的混淆数字的属性：

*   无论它是否可重复，即如果“12345”总是导致“73624”，我可以
*   是否加密安全

到目前为止，我还没有找到任何符合我要求的东西……但我希望这是由于记忆力差、教育不完整或生活方式选择可疑，而不是没有“好的”解决方案。

一个可以轻松转换为 C# 的示例将是一个额外的好处。

**更新：**

我目前正在研究使用做一个简单的位映射的想法。

```
 static List<int> bitMapping = new List<int>() { 8, 6, 9, 3, 7, 5, ... etc... };

    private static int Obfuscate(int number)
    {
        var bits = new bool[bitMapping.Count];
        foreach (var ordinal in bitMapping)
        {
            var mask = (int)Math.Pow(2, ordinal);
            var bit = (mask & number) == mask;
            var mappedOrdinal = bitMapping[ordinal];
            bits[mappedOrdinal] = bit;
        }

        var obfuscatedNumber = 0;
        for (var ordinal = 0; ordinal < bits.Length; ordinal++)
        {
            if (bits[ordinal])
            {
                obfuscatedNumber += (int)Math.Pow(2, ordinal);
            }
        }
        return obfuscatedNumber; 
```

到目前为止，它似乎满足了我的大部分要求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T00:31:40.880

That might be too simple for your needs, but something that works and might not be as obvious as an addition is the XOR operation :

```
12345 ^ 65535 = 53190
53190 ^ 65535 = 12345 
```

As noted in comments it is important that the second operand is of the form (2^n - 1) to avoid collisions (so that every bit in the original number is inverted). It also needs to be long enough that its number of bits is greater or equal than the first operand.

You might also have to pad-left with 0's to make the result a 5-digit number.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T00:18:04.783

如果你不想发生冲突，那么乘法/除法就不行了。在这种情况下，我会

1.  为您的号码添加一个 5 位数的种子值，如果它溢出到六位数，则丢弃第六个。

2.  以某种一致的方式重新排列数字。

例如

丢弃溢出后 12345 + 97531 = 109876 或 09876 重新排序为 68097

# sql - 访问sql 交叉表查询到sql

> ID：14594480
> 
> 赞同：0
> 
> 时间：2013-01-30T00:09:26.443
> 
> 标签：sql, ms-access, pivot

我正在尝试将此访问查询转换为 sql 2008

任何人都可以将此访问查询转换为 sql 吗？

```
TRANSFORM Sum(q_INTERMONTH_Union_ILIs.Total) AS SumOfTotal
SELECT q_INTERMONTH_Union_ILIs.[Billable Identifier], 
   q_INTERMONTH_Union_ILIs.[Entity Identifier]
FROM q_INTERMONTH_Union_ILIs
GROUP BY q_INTERMONTH_Union_ILIs.[Billable Identifier], 
   q_INTERMONTH_Union_ILIs.[Entity Identifier]
PIVOT q_INTERMONTH_Union_ILIs.Period; 
```

但是收到此错误...任何人都可以帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T00:27:41.647

您当前在 SQL Server 中的查询将与此类似：

```
select *
from
(
  SELECT q_INTERMONTH_Union_ILIs.[Billable Identifier], 
    q_INTERMONTH_Union_ILIs.[Entity Identifier],
    q_INTERMONTH_Union_ILIs.Period
  FROM q_INTERMONTH_Union_ILIs
) src
pivot
(
  Sum(Total)
  for Period in (yourPeriodValues go here)
) piv 
```

在这一行：

```
for Period in (yourPeriodValues go here) 
```

您将把所需的值作为括号内的列`(yourPeriodValues go here)`。

# css - 链接 + div + 悬停 + 背景

> ID：14594482
> 
> 赞同：2
> 
> 时间：2013-01-30T00:09:35.423
> 
> 标签：css, html, hover

我想在我的新主页上显示菜单点。

一个菜单点包含几个元素 -> 图标 + 标题 + 描述。那些菜单点应该是链接，所以我只是写 `a href`在它前面。它有效，但看起来令人毛骨悚然，因为它将背景颜色更改为灰色。（即使我将其声明为白色）。

**CSS**

```
@font-face {
font-family: 'WebSymbolsRegular';
src: url('websymbols/websymbols-regular-webfont.eot');
src: url('websymbols/websymbols-regular-webfont.eot?#iefix') format('embedded-opentype'),
    url('websymbols/websymbols-regular-webfont.woff') format('woff'),
    url('websymbols/websymbols-regular-webfont.ttf') format('truetype'),
    url('websymbols/websymbols-regular-webfont.svg#WebSymbolsRegular') format('svg');
font-weight: normal;
font-style: normal;
}

A { text-decoration: none; }
A:link {text-decoration: none}
A:visited {text-decoration: none}
A:active {text-decoration: none}
A:hover { text-decoration: none; }
A:focus { outline: none; }

.menuePoint {
width: 300px;
height: 70px;
position: relative;
display: inline-block;
float: none;
overflow: hidden;
text-align: left;
background: #fff;
padding-left: 10px;
}

.menuePointIcon {
font-family: 'WebSymbolsRegular', cursive;
font-size: 20px;
float:left;
display:block;
text-shadow: 0px 0px 25px #0f76a6;
color: #0f76a6;
line-height: 66px;
width: 90px;
left: 0px;
text-align: center;
-webkit-transition: all 400ms linear;
-moz-transition: all 400ms linear;
-o-transition: all 400ms linear;
-ms-transition: all 400ms linear;
transition: all 400ms linear;
}

.menuePointTitle {
font-size: 25px;
-webkit-transition: all 300ms linear;
-moz-transition: all 300ms linear;
-o-transition: all 300ms linear;
-ms-transition: all 300ms linear;
}

.menuePointDesc {
font-size: 18px;
color: #666;
-webkit-transition: all 300ms linear;
-moz-transition: all 300ms linear;
-o-transition: all 300ms linear;
-ms-transition: all 300ms linear;
transition: all 300ms linear;
}

.menuePoint:hover .menuePointTitle {
opacity: 1;
color:#2676ac;
-webkit-animation:menuePointTitleAnimation 2s;
}

.menuePoint:hover .menuePointDesc {
-webkit-animation:menuePointDescAnimation 2s;
}

.menuePoint:hover .menuePointIcon {
font-size: 35px;
color: #0f76a6;
text-shadow: 0px 0px 20px #0f76a6;
opacity: 1;
}

@-webkit-keyframes menuePointTitleAnimation /* Safari and Chrome */
{
  from {
     -webkit-transform: translateX(110%);
  }

  50% {
     -webkit-transform: translateX(0%);
  }

  to {
     -webkit-transform: translateX(0%);
  }
}

@-webkit-keyframes menuePointDescAnimation /* Safari and Chrome */
{
  from {
     -webkit-transform: translateX(-110%);
  }

  50% {
     -webkit-transform: translateX(0%);
  }

  to {
     -webkit-transform: translateX(0%);
  }
} 
```

**HTML**

```
 <div style="text-align: center;">
        <div class="menuePoint">
            <div class="menuePointIcon">A</div>
            <div class="menuePointTitle">Test</div>
            <div class="menuePointDesc">Test</div>
        </div>

        <div class="menuePoint">
            <div class="menuePointIcon">B</div>
            <div class="menuePointTitle">WiFi</div>
            <div class="menuePointDesc">Educ</div>
        </div>

        <a href="#">
        <div class="menuePoint">
            <div class="menuePointIcon">C</div>
            <div class="menuePointTitle">Kontakt</div>
            <div class="menuePointDesc">Email / Jobs</div>
        </div>
        </a>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T00:24:23.777

尝试指定一个`border-width: 0px`.

# javascript - 为什么在尝试单击 Bing 地图时出现错误：DISPATCH_REQUEST_ERR？

> ID：14594483
> 
> 赞同：2
> 
> 时间：2013-01-30T00:09:38.320
> 
> 标签：javascript, jquery, ajax, bing-maps, polygon

我正在使用 Bing Maps Ajax Control 6.3，之前我成功地附加了一个点击事件，但现在我在另一个页面上收到以下错误，我试图重复相同的行为：

`Error: DISPATCH_REQUEST_ERR: DOM Events Exception 1`

该错误在 Chrome 中引发。我尝试了 IE10，控制台抛出：

`error TypeError: Unable to get property 'GetCurrentDefaultSymbol' of undefined or null reference`

这是我加载地图并附加事件的功能：

```
function GetMap() {
    map = new VEMap('myMap');
    map.SetDashboardSize(VEDashboardSize.Tiny);
    var latLong = new VELatLong(16.864061, -99.882588);
    map.LoadMap();
    map.SetCenterAndZoom(latLong, 15);

    map.AttachEvent("onclick", MouseHandler);
    map.AttachEvent("ondoubleclick", MouseHandler);
} 
```

这是我的处理程序：

```
function MouseHandler(e) {
    try{
        var pixel = new VEPixel(e.mapX, e.mapY);
        var latLong = map.PixelToLatLong(pixel);
        points.push(latLong);
        if (points.length > 2 && shapeCreated) {
            shape.SetPoints(points);
        }
        if (points.length == 3 && !shapeCreated) {
            shape = new VEShape(VEShapeType.Polygon, points);
            map.AddShape(shape);
            shapeCreated = true;
        }
    }
    catch(e)
    {
        console.error(e);
    }
} 
```

它处理在地图上完成的点击，并在点击 3 次后绘制一个多边形，并在多次点击地图时继续重绘多边形。

我正在做与我之前的尝试完全相同的事情，但我不明白为什么它不起作用。我在[这里](http://www.coursevector.com/dommanual/dom/events/EventExceptionCode.html)读到了这个错误，它说这是因为事件已经被调度了，为什么会发生这种情况？

**编辑**

我将一些变量初始化为null，我删除了null并开始工作，但是当我加载使用形状点的页面时，当我单击时开始显示以下错误：

`Invalid argument; input argument 'points[0]' is not a valid 'VELatLong' value.`

我在控制台上打印点数组，我看不出有什么问题。这是数组。

```
[
    {
        "Latitude": 16.86689437290364,
        "Longitude": -99.90971088343942,
        "Altitude": null,
        "AltitudeMode": null,
        "_reserved": null
    },
    {
        "Latitude": 16.861596373665986,
        "Longitude": -99.905676841081,
        "Altitude": null,
        "AltitudeMode": null,
        "_reserved": null
    },
    {
        "Latitude": 16.860199977046786,
        "Longitude": -99.89400386744819,
        "Altitude": null,
        "AltitudeMode": null,
        "_reserved": null
    },
    {
        "Latitude": 16.864265926727835,
        "Longitude": -99.89550590515138,
        "Altitude": null,
        "AltitudeMode": null,
        "_reserved": null
    }
] 
```

因此，例如，如果我在调用该页面并将其插入 div 之前创建一个具有 3 个点的形状，我会在地图上显示一个具有 3 个边的多边形，但在该页面加载并插入 div 的那一刻，然后我点击地图，点被添加到点数组中，并尝试用新数组替换当前形状的点，即使在点数组上看到没有问题，也会显示该错误。

此外，发生这种情况后，当我将鼠标悬停在图钉上时，会出现另一个错误：

`Unable to get property '1359639624430' of undefined or null reference`

这只发生在 IE 上。Chrome 设法更新了形状，但一直显示`DISPATCH_REQUEST_ERR: DOM Events Exception 1`错误，而 Firefox 没有显示任何错误关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-16T03:56:25.143

`new VEMap('myMap').LoadMap();` **您的代码没有任何问题，只需使用以下示例**在 Chrome 中单击 Bing 地图，您就会遇到相同的错误：[Fiddle](http://jsfiddle.net/daniellmb/XD4sU/)。

问题出在 Bing Maps`Web.Browser.AttachSafariCompatibility`方法中，当`navigator.userAgent.indexOf("KHTML") !== -1`.

正如您所提到的，当“[事件对象已在树中分派](http://www.w3.org/TR/2006/WD-DOM-Level-3-Events-20060413/events.html#DISPATCH_REQUEST_ERR)”时会发生此错误。这是因为 Bing Maps 正在重新分派事件**示例**：[小提琴](http://jsfiddle.net/daniellmb/TDLN6/)。

![必应地图错误](../Images/7274b1fc6e0970de07c262ea58c97ebd.png)

事件调度和 DOM 事件流 ![事件分派和 DOM 事件流](../Images/8eea12a0b7f5e58b8396f1d05118c5ed.png) [http://www.w3.org/TR/DOM-Level-3-Events/#event-flow](http://www.w3.org/TR/DOM-Level-3-Events/#event-flow)

由于浏览器根据 W3C 事件规范工作，并且问题出在您无法控制的第三方代码中，因此您的选择是有限的。您可以尝试在页面**Example** : [Fiddle](http://jsfiddle.net/daniellmb/f9XVa/)上简单地捕获（和记录）JavaScript 错误。

# svg - 如何防止 AngularJS 制作小写 HTML 属性

> ID：14594497
> 
> 赞同：7
> 
> 时间：2013-01-30T00:10:45.057
> 
> 标签：svg, angularjs

我正在尝试使用 AngularJS 渲染一些 SVG，但我无法动态更改 svg 元素的视图框。

Angular 呈现一个“viewbox”属性，但浏览器需要一个“viewBox”属性。所以结果是：

```
<svg height="151px" width="1366px" viewBox="{{ mapViewbox }}" viewbox="-183 425 1366 151"> 
```

我怎样才能得到我期望的结果：

```
<svg height="151px" width="1366px" viewBox="-183 425 1366 151"> 
```

谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-30T03:44:05.257

看看这个指令是否有效：

```
app.directive('vbox', function() {
  return {
    link: function(scope, element, attrs) {
      attrs.$observe('vbox', function(value) {
        element.attr('viewBox', value);
      })
    }
  };
}); 
```

HTML：

```
<svg height="151px" width="1366px" vbox="{{ mapViewbox }}"> 
```

[普兰克](http://plnkr.co/edit/GAitczSyGR7ACrHuPVfx?p=preview)。您需要“检查元素”或“查看源代码”才能看到 svg 标记。

**更新：**如果您的应用程序包含 jQuery，请参阅 jQuery[中的 attr() 是否强制小写？](https://stackoverflow.com/questions/12361971/does-the-attr-in-jquery-force-lowercase)

@Niahoo 发现如果包含 jQuery，这将起作用（他对这篇文章进行了编辑，但由于某种原因，其他 SO 版主拒绝了它......不过我喜欢它，所以在这里）：

```
 element.get(0).setAttribute("viewBox", value); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-09-14T04:05:33.493

我自己寻找解决方案我遇到了这个答案，实现这一目标的正确方法是使用模式转换`ng-attr-view_box`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-28T18:36:22.290

建议的解决方案不起作用。我不是 javascript 专业人士，但确实如此。

```
app.directive('vbox', function () {
    return {
        link: function (scope, element, attrs) {
            attrs.$observe('vbox', function (value) {
                element.context.setAttribute('viewBox', value);
            })
        }
    };
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-12T23:32:54.707

在指令链接函数中是这样的（想象一个使用变量的范围）：

```
 var svg = $compile(
            $interpolate('<svg width="{{w}}" height="{{h}}" class="vis-sample" id="vis-sample-{{$id}}" viewBox="0 0 {{w}} {{h}}" preserveAspectRatio="xMidYMid meet"></svg>')( scope )
        )( scope ); 
```

关键是使用`$interpolate`before `$compile`。必须有一个更好的解决方案，但这是我所知道的最直接的选项，用于变量最初都可用的单通道模板。

# iphone - Amazon S3 getDate() API 调用？

> ID：14594499
> 
> 赞同：2
> 
> 时间：2013-01-30T00:10:49.300
> 
> 标签：iphone, date, amazon-web-services, amazon-s3

有没有办法（API 调用）知道 Amazon S3 服务器上的当前时间？

这里有一些背景来解释我为什么需要这个：

我有一个 iphone 应用程序，有时必须从 Amazon AWS S3 帐户的存储桶中下载一组文件。

在两次这样的下载之间，服务器文件可能会被 CMS（Web 内容管理系统）修改，也可能不会。

因此，当发生第二次下载时，客户端应用程序会尝试通过仅下载自上次此类下载以来在服务器上已修改的文件来提高效率。

为了实现这一点，应用程序存储上次下载的日期，当发生新下载时，它只关注自上次下载日期以来在服务器上修改过的文件（使用“修改日期”属性访问SDK listObjects() 函数）。

这样做的问题是手机上的日期和s3服务器上的修改日期可能不兼容。电话用户可能更改了他的电话日期和时间设置等。

为实现此目的，保存的“最后下载日期”应来自 Amazon S3 API 调用，以确保应用逻辑使用的所有日期同步。

有这种事吗？或者也许是替代方案或解决方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T00:37:37.797

您可以使用文件哈希而不是修改日期。亚马逊`S3Object`有一个`etag`确实是这种哈希的属性。您检索此属性的方式与您访问的方式相同`date`。

让您的客户端设备将此哈希与文件一起保存。下次连接服务器时，请求`etag`使用该方法`about`并将返回的值与本地副本进行比较。

不同的`etag`值将向客户端指示自上次下载以来文件已更改。这种方法将完全独立于任何日期时间功能。

# twitter - HybridAuth Twitter 失败 401

> ID：14594503
> 
> 赞同：4
> 
> 时间：2013-01-30T00:10:55.157
> 
> 标签：twitter, oauth, hybridauth

**问题** 我能够连接到 Twitter 的 HybridAuth 库，但它停止工作。发布到 Twitter 帐户也很实用。

**我有什么尝试** 重置我的 Twitter 应用访问令牌。创建一个全新的 Twitter 应用程序。使用 HybridAuth 调试模式进行故障排除。

**错误消息** “身份验证失败。用户已取消身份验证或提供商拒绝连接。

原始错误消息：身份验证失败！推特返回错误。401 未经授权。”

**我的研究** 这似乎归因于缺少密钥和秘密，但我在 Twitter 配置文件中设置了这些。

**编码**

```
 $hybridauth = new Hybrid_Auth( $config );

            $adapter = $hybridauth->authenticate( "Twitter" );
            $hybridauth_session_data = $hybridauth->getSessionData();
            store_session_data($hybridauth_session_data);

            // get the user profile 
            $user_profile = $adapter->getUserProfile(); 
```

身份验证方法正在引发异常。在它要求我允许通过应用程序访问之前，现在它会抛出错误。

如果您需要更多信息，请告诉我。瑞克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T16:37:00.763

所以这里是发生了什么，你应该知道什么：

1.  Twitter 跟踪当前时间
2.  如果用于身份验证的 API 请求来自声称其时间超出 Twitter 时间 15 分钟的服务器，它将失败并出现 401 错误。

* * *

**我如何修复它：**

[我使用USNO Master Clock](http://tycho.usno.navy.mil/what.html)将我的服务器时间设置为正确的时间。它恰好偏移了15分钟多一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-13T08:45:08.833

这只是我的另一种解决方案：

**在 Twitter App 中设置“回调 URL”（如果您在本地测试，可以使用示例 URL）。**

他们没有将此指定为必填字段，并且允许使用 HybridAuth 请求中的 URL 覆盖此 URL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-16T04:49:40.463

万一其他人也不能编辑他们的服务器时间，有一个解决方法。最基本但可能不是最干净的方法就是转到 Hybrid/thirdparty/OAuth/OAuth.php 找到 generate_timestamp() 函数，并将服务器和 gtm+0 之间的时间差异添加到 time() 中。像这样：

```
private static function generate_timestamp() {
return time() + 7200; 
```

}

就我而言，我的服务器是 gtm-2，所以我必须在 time() 函数中添加 2 小时（以秒为单位）才能使其正常工作。

# javascript - 定位类中的所有 HREF 标记时，ChildBrowser 崩溃

> ID：14594504
> 
> 赞同：0
> 
> 时间：2013-01-30T00:10:57.073
> 
> 标签：javascript, cordova, childbrowser

通过以下函数，我一直在我的代码上愉快地使用 ChildBrowser，没有任何问题：

```
var app = {
    ready: false,
    initialize: function() {
        this.bind();
    },
    bind: function() {
        document.addEventListener('deviceready', this.deviceready, false);
    },
    deviceready: function() {
        app.report('deviceready');
        app.report('Installing child browser');
        app.ready = true;
        //ChildBorwser init
        cb = ChildBrowser.install();
    },
    report: function(id) { 
    console.log("report:" + id);
    }
};

var layout = {
    showUrl: function(url) {
        if(app.ready == true){
            window.plugins.childBrowser.showWebPage(url);
            event.preventDefault();
            event.stopImmediatePropagation();
            return false;
        }
        else { document.location.href = url; return false; }
    },
} 
```

但是当我尝试在我的 javascript 'layout' 对象之外调用函数时，我得到一个 Xcode 错误，如下所示：

```
$('.text a').on('click', function(e) { 
    e.preventDefault();
    var thisUrl = $('.text a').attr('href'); 
    layout.showUrl(thisUrl);
}); 
```

我在模拟器和设备中遇到的 Xcode 错误是：

*** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“应用程序试图以模态方式呈现活动控制器。” *** First throw call stack: (0x167012 0x25a0e7e 0x48b721 0x48c777 0x48c7b7 0x35fd 0x6d914 0x6d147 0x6cd2d 0x6ce96 0x6cdd3 0x25b46b0 0x113c035 0xeaf3f 0xea96f 0x10d734 0x10cf44 0x10ce1b 0x33d17e3 0x33d1668 0x3a265c 0x283c 0x2795) libc++abi.dylib: terminate called throwing an exception.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T01:03:11.717

```
<script src="cordova.js"></script>
<script charset="utf-8" src="Plugins/Child Browser/childbrowser.js"></script>

function onDeviceReady() {
    window.plugins.childBrowser.showWebPage("http://www.google.com");
} 
```

看到这个： [https ://github.com/Icenium/sample-childbrowser/tree/master/sample-childbrowser](https://github.com/Icenium/sample-childbrowser/tree/master/sample-childbrowser)

# php - Symfony2 - 具有多个模块的应用程序

> ID：14594505
> 
> 赞同：2
> 
> 时间：2013-01-30T00:10:58.917
> 
> 标签：php, symfony, bundle

我正在构建 Symfony2 应用程序，该应用程序将具有 3 个不同的“模块”——第一个用于尝试将文本从一种语言翻译成另一种语言的用户，第二个用于翻译人员，第三个用于管理员。我想知道什么是最好的应用程序结构。

我应该有：

*   三个捆绑包 UserBundle、TranslatorBundle 和 AdminBundle 或
*   具有用于翻译等功能的捆绑包，并使用此类捆绑包划分用户/翻译/管理员访问权限。

最好的方法是什么？我在网上找不到任何涵盖该主题的好文章。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T02:33:37.757

马特是对的。有时，即使是单个 Bundle 也足以满足您的所有需求。除非您在不同的应用程序之间共享捆绑包。

我认为您需要将`admin`捆绑包分开。否则，您最终会得到两倍的捆绑包数量，一个用于前端，一个用于后端。只需设置`firewall`管理部分。

看看这个 [Symfony2 中的捆绑包应该代表什么](https://stackoverflow.com/questions/5770753/what-should-a-bundle-in-symfony2-represent)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T00:13:58.443

Symfony 网站上有一些关于这个主题的精彩文章：

[http://symfony.com/doc/2.0/cookbook/bundles/best_practices.html](http://symfony.com/doc/2.0/cookbook/bundles/best_practices.html)

不过一般来说，不要为此苦恼。Symfony 非常灵活，因此您可以随时在以后进行重组而不会带来太多痛苦。以我个人的经验，我总是过早地将东西放入单独的包中，并为自己做了额外的工作，因为我必须不断地在包之间跳跃以完成（相对）简单的任务。

# xml - 你能从 XML 中提取原始 XSD 吗？

> ID：14594506
> 
> 赞同：0
> 
> 时间：2013-01-30T00:11:10.433
> 
> 标签：xml, xsd

`XSD`是否可以从`XML`文档中生成原件？

如果一个`XML`文档没有使用原始模式的一些可选数据元素，那么生成的任何数据元素都不会与原始模式`XSD`不同`XSD`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T08:30:53.977

不，这是不可能的。对于任何给定的 XML 文档，它所遵循的模式有无数种，并且没有一种比其他模式具有任何“原始”的特殊要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T00:18:48.037

无法确定生成的 XSD 是否与原始 XSD 相同，部分原因是您提到的（即未使用的可选元素）。

事实上，大多数限制对于自动过程来说都很难正确推断。当然 maxOccurs 理论上可以是大于或等于文件中最大观察值的任何值。

我认为，最好的结果是原始 XML 是有效文件的 XSD，并且可以手动调整以接受更广泛的有效输入。

# c - FIFO 管道在 select() 中始终是可读的

> ID：14594508
> 
> 赞同：13
> 
> 时间：2013-01-30T00:11:14.743
> 
> 标签：c, select, file-descriptor, fifo

在 C 伪代码中：

```
while (1) {
    fifo = open("fifo", O_RDONLY | O_NONBLOCK);
    fd_set read;
    FD_SET(fifo, &read);
    select(nfds, &read, NULL, NULL, NULL);
} 
```

进程休眠，`select()`直到另一个进程写入`fifo`. 之后它总是会找到`fifo`一个可读的文件描述符。

如何避免这种行为（即，在`fifo`被读取一次之后，如何使其在再次写入之前被发现为不可读？）

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-08-11T20:47:09.820

您以只读方式打开该 FIFO (O_RDONLY)，只要 FIFO 没有写入器，读取端就会收到一个`EOF`.

Select 系统调用将返回，`EOF`并且对于`EOF`您处理的每个操作都会有一个新的`EOF`. 这就是观察到的行为的原因。

To avoid this open that FIFO for both reading and writing (O_RDWR). This ensures that you have at least one writer on the FIFO thus there wont be an `EOF` and as a result select won't return unless someone writes to that FIFO.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T00:33:06.293

The simple answer is to read until `read()` returns `EWOULDBLOCK` (or `EAGAIN`), or craps out with an error.

What you are saying simply cannot be happening unless the operating system (or runtime) that you are using is buggy. Otherwise you must be doing something wrong. For example, `select()` is using level-triggered I/O. I'd think that, most likely, you are not draining the socket completely, and so `select()` always indicates that you have something left in there (this does not happen with edge-triggered event notifications).

Below is a simple example that shows how one should read until the `read()` returns `EWOULDBLOCK` in order to avoid leaving descriptor in readable state (I've compiled and tested this on OS X, and there is also mostly no error checking, but you should get the idea):

```
/*
 * FIFO example using select.
 *
 * $ mkfifo /tmp/fifo
 * $ clang -Wall -o test ./test.c
 * $ ./test &
 * $ echo 'hello' > /tmp/fifo
 * $ echo 'hello world' > /tmp/fifo
 * $ killall test
 */

#include <sys/types.h>
#include <sys/select.h>
#include <errno.h>
#include <stdlib.h>
#include <stdio.h>
#include <fcntl.h>
#include <unistd.h>

int main()
{
    int fd;
    int n;
    fd_set set;
    ssize_t bytes;
    size_t total_bytes;
    char buf[1024];

    fd = open("/tmp/fifo", O_RDWR | O_NONBLOCK);
    if (fd == -1) {
        perror("open");
        return EXIT_FAILURE;
    }

    FD_ZERO(&set);
    FD_SET(fd, &set);

    for (;;) {
        n = select(fd+1, &set, NULL, NULL, NULL);
        if (!n)
            continue;
        if (n == -1) {
            perror("select");
            return EXIT_FAILURE;
        }
        if (FD_ISSET(fd, &set)) {
            printf("Descriptor %d is ready.\n", fd);
            total_bytes = 0;
            for (;;) {
                bytes = read(fd, buf, sizeof(buf));
                if (bytes > 0) {
                    total_bytes += (size_t)bytes;
                } else {
                    if (errno == EWOULDBLOCK) {
                        /* Done reading */
                        printf("done reading (%lu bytes)\n", total_bytes);
                        break;
                    } else {
                        perror("read");
                        return EXIT_FAILURE;
                    }
                }
            }
        }
    }

    return EXIT_SUCCESS;
} 
```

Basically, level-triggered I/O means that you get notified all the time if there is something to read, even though you might have been notified of this before. On a contrary, edge-triggered I/O means that you are getting notified only once every time new data arrives and it doesn't matter whether you read it or not. `select()` is a level-triggered I/O interface.

Hope it helps. Good Luck!

# node.js - 猫鼬填充在一个对象中？

> ID：14594511
> 
> 赞同：25
> 
> 时间：2013-01-30T00:11:44.047
> 
> 标签：node.js, mongoose

我不确定如何填充下面的示例模式，或者是否可能。引用可以在如下对象中吗？如果可以，您将如何填充它？例如`.populate('map_data.location');`？

```
var sampleSchema = new Schema({
  name: String,
  map_data: [{
    location: {type: Schema.Types.ObjectId, ref: 'location'},
    count: Number
  }]
}); 
```

或者我是否必须有两个单独的数组用于位置和计数，如下所示：

```
// Locations and counts should act as one object. They should
// Be synced together perfectly.  E.g. locations[i] correlates to counts[i]
locations: [{ type: Schema.Types.ObjectId, ref: 'location'}],
counts: [Number] 
```

我觉得第一个解决方案是最好的，但我不完全确定如何让它在 Mongoose 中工作。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-30T00:41:04.590

第一种解决方案是可能的。

Mongoose 目前在填充多个级别的嵌入式文档时存在局限性（[请参阅此处的票证），但](https://github.com/LearnBoost/mongoose/issues/601)*它*非常擅长理解单个文档中的嵌套路径 - 在这种情况下您所追求的。

示例语法为：

`YourSchema.find().populate('map_data.location').exec(...)`

其他功能，例如在路径上指定 getter / setter、orderBy 和 where 子句等，也接受嵌套路径，例如[文档](http://mongoosejs.com/docs/guide.html)中的这个示例：

```
personSchema.virtual('name.full').get(function () {
  return this.name.first + ' ' + this.name.last;
}); 
```

在内部，Mongoose 在点处拆分字符串并为您整理所有内容。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2016-08-17T20:41:43.743

第一个选项没问题，但是如果有人对该查询有疑问`map_data.location`- Mongoose 返回空数组而不是对象 - 我发现这会起作用：

```
.populate({
     path: 'map_data.location',
     model: 'Location'
}) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-05-23T22:26:17.433

```
 YourSchema.find()
       .populate({
            path: 'map_data',
            populate: {
                path: 'location' 
            }
    }).exec(...) 
```

上述语句将填充 map_data 数组以及每个 map_data 的位置对象。

希望这可以帮助某人。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-05-15T15:41:42.490

我想你会需要这个：

如果您的架构是这样的：

```
var sampleSchema = new Schema({
name: String,
map_data: [{
location: {type: Schema.Types.ObjectId, ref: 'location'},
count: Number
}]
}); 
```

你 mongosse 查询必须是：

```
const responseMap=await YourSchema.find()
.populate(
path: 'map_data._id',
model: 'location'
select:['nameLocation','geoPoints','count'],
).exec();
console.log(responseMap); 
```

但是您**计数**变量必须在**位置模式**中，并且 map_data 必须仅包含 id 位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T00:25:06.110

第一个选项是最好的。“count”是对象“map_data”的一部分。

# asp.net - 更新后数据丢失

> ID：14594513
> 
> 赞同：1
> 
> 时间：2013-01-30T00:11:58.703
> 
> 标签：asp.net, gridview, rows, insert-update

好的，我将用图像讨论我的问题，以便我们轻松解决。希望。

首先，下图显示了 PersonalInfo.aspx 下的 PersonalInfo gridview ![在此处输入图像描述](../Images/9885a0b4dac56651da251d25057da41b.png)

二、下图是MobileINfo.aspx下的MobileInfo gridview![在此处输入图像描述](../Images/47f6e6edd1abbdba0754c5af23745439.png)

三、现在我们要编辑这个页面MobileInfo.aspx中的记录![在此处输入图像描述](../Images/3dccd2c692078d3f6cf863934b5cb022.png)

第四，下图我认为一切正常，因为数据已经更新。但...![在此处输入图像描述](../Images/f54b7c50debb2df3ba60132900b3a355.png)

第五次也是最后一次，我回到 PersonalInfo.aspx 但它给了我这个...数据已被删除![在此处输入图像描述](../Images/471264fb463a1e24134b89c9b584ca90.png)

这是我的 PersonalInfo.aspx 代码

```
<asp:AccessDataSource runat="server" ID="AccessDataSource1" DeleteCommand="DELETE FROM [DriversRecords] WHERE [ID] = ?" InsertCommand="INSERT INTO [DriversRecords] ([Username], [Password], [FirstName], [LastName], [MiddleName], [Address], [Age], [Gender], [ContactNumber], [PlateNumber], [Color], [Brand], [LiscensedNumber], [SSSNumber], [TIN], [Type], [Model], [BirthDay], [BirthMonth], [BirthYear]) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)" UpdateCommand="UPDATE [DriversRecords] SET [Username] = ?, [Password] = ?, [FirstName] = ?, [LastName] = ?, [MiddleName] = ?, [Address] = ?, [Age] = ?, [Gender] = ?, [ContactNumber] = ?, [PlateNumber] = ?, [Color] = ?, [Brand] = ?, [LiscensedNumber] = ?, [SSSNumber] = ?, [TIN] = ?, [Type] = ?, [Model] = ?, [BirthDay] = ?, [BirthMonth] = ?, [BirthYear] = ? WHERE [ID] = ?" DataFile="_private/records.mdb" SelectCommand="SELECT * FROM [DriversRecords]">
            <DeleteParameters>
                <asp:parameter Name="ID" Type="Int32" />
            </DeleteParameters>
            <UpdateParameters>
                <asp:parameter Name="Username" Type="String" />
                <asp:parameter Name="Password" Type="String" />
                <asp:parameter Name="FirstName" Type="String" />
                <asp:parameter Name="LastName" Type="String" />
                <asp:parameter Name="MiddleName" Type="String" />
                <asp:parameter Name="Address" Type="String" />
                <asp:parameter Name="Age" Type="String" />
                <asp:parameter Name="Gender" Type="String" />
                <asp:parameter Name="ContactNumber" Type="String" />
                <asp:parameter Name="PlateNumber" Type="String" />
                <asp:parameter Name="Color" Type="String" />
                <asp:parameter Name="Brand" Type="String" />
                <asp:parameter Name="LiscensedNumber" Type="String" />
                <asp:parameter Name="SSSNumber" Type="String" />
                <asp:parameter Name="TIN" Type="String" />
                <asp:parameter Name="Type" Type="String" />
                <asp:parameter Name="Model" Type="String" />
                <asp:parameter Name="BirthDay" Type="String" />
                <asp:parameter Name="BirthMonth" Type="String" />
                <asp:parameter Name="BirthYear" Type="String" />
                <asp:parameter Name="ID" Type="Int32" />
            </UpdateParameters>
            <InsertParameters>
                <asp:parameter Name="Username" Type="String" />
                <asp:parameter Name="Password" Type="String" />
                <asp:parameter Name="FirstName" Type="String" />
                <asp:parameter Name="LastName" Type="String" />
                <asp:parameter Name="MiddleName" Type="String" />
                <asp:parameter Name="Address" Type="String" />
                <asp:parameter Name="Age" Type="String" />
                <asp:parameter Name="Gender" Type="String" />
                <asp:parameter Name="ContactNumber" Type="String" />
                <asp:parameter Name="PlateNumber" Type="String" />
                <asp:parameter Name="Color" Type="String" />
                <asp:parameter Name="Brand" Type="String" />
                <asp:parameter Name="LiscensedNumber" Type="String" />
                <asp:parameter Name="SSSNumber" Type="String" />
                <asp:parameter Name="TIN" Type="String" />
                <asp:parameter Name="Type" Type="String" />
                <asp:parameter Name="Model" Type="String" />
                <asp:parameter Name="BirthDay" Type="String" />
                <asp:parameter Name="BirthMonth" Type="String" />
                <asp:parameter Name="BirthYear" Type="String" />
            </InsertParameters>
        </asp:AccessDataSource> 
```

这是我的 MobileInfo.aspx 代码

```
<asp:AccessDataSource runat="server" ID="AccessDataSource1" DeleteCommand="DELETE FROM [DriversRecords] WHERE [ID] = ?" InsertCommand="INSERT INTO [DriversRecords] ([Username], [Password], [FirstName], [LastName], [MiddleName], [Address], [Age], [Gender], [ContactNumber], [PlateNumber], [Color], [Brand], [LiscensedNumber], [SSSNumber], [TIN], [Type], [Model], [BirthDay], [BirthMonth], [BirthYear]) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)" UpdateCommand="UPDATE [DriversRecords] SET [Username] = ?, [Password] = ?, [FirstName] = ?, [LastName] = ?, [MiddleName] = ?, [Address] = ?, [Age] = ?, [Gender] = ?, [ContactNumber] = ?, [PlateNumber] = ?, [Color] = ?, [Brand] = ?, [LiscensedNumber] = ?, [SSSNumber] = ?, [TIN] = ?, [Type] = ?, [Model] = ?, [BirthDay] = ?, [BirthMonth] = ?, [BirthYear] = ? WHERE [ID] = ?" DataFile="_private/records.mdb" SelectCommand="SELECT * FROM [DriversRecords]">
            <DeleteParameters>
                <asp:parameter Name="ID" Type="Int32" />
            </DeleteParameters>
            <UpdateParameters>
                <asp:parameter Name="Username" Type="String" />
                <asp:parameter Name="Password" Type="String" />
                <asp:parameter Name="FirstName" Type="String" />
                <asp:parameter Name="LastName" Type="String" />
                <asp:parameter Name="MiddleName" Type="String" />
                <asp:parameter Name="Address" Type="String" />
                <asp:parameter Name="Age" Type="String" />
                <asp:parameter Name="Gender" Type="String" />
                <asp:parameter Name="ContactNumber" Type="String" />
                <asp:parameter Name="PlateNumber" Type="String" />
                <asp:parameter Name="Color" Type="String" />
                <asp:parameter Name="Brand" Type="String" />
                <asp:parameter Name="LiscensedNumber" Type="String" />
                <asp:parameter Name="SSSNumber" Type="String" />
                <asp:parameter Name="TIN" Type="String" />
                <asp:parameter Name="Type" Type="String" />
                <asp:parameter Name="Model" Type="String" />
                <asp:parameter Name="BirthDay" Type="String" />
                <asp:parameter Name="BirthMonth" Type="String" />
                <asp:parameter Name="BirthYear" Type="String" />
                <asp:parameter Name="ID" Type="Int32" />
            </UpdateParameters>
            <InsertParameters>
                <asp:parameter Name="Username" Type="String" />
                <asp:parameter Name="Password" Type="String" />
                <asp:parameter Name="FirstName" Type="String" />
                <asp:parameter Name="LastName" Type="String" />
                <asp:parameter Name="MiddleName" Type="String" />
                <asp:parameter Name="Address" Type="String" />
                <asp:parameter Name="Age" Type="String" />
                <asp:parameter Name="Gender" Type="String" />
                <asp:parameter Name="ContactNumber" Type="String" />
                <asp:parameter Name="PlateNumber" Type="String" />
                <asp:parameter Name="Color" Type="String" />
                <asp:parameter Name="Brand" Type="String" />
                <asp:parameter Name="LiscensedNumber" Type="String" />
                <asp:parameter Name="SSSNumber" Type="String" />
                <asp:parameter Name="TIN" Type="String" />
                <asp:parameter Name="Type" Type="String" />
                <asp:parameter Name="Model" Type="String" />
                <asp:parameter Name="BirthDay" Type="String" />
                <asp:parameter Name="BirthMonth" Type="String" />
                <asp:parameter Name="BirthYear" Type="String" />
            </InsertParameters>
        </asp:AccessDataSource> 
```

我希望有人可以在这里帮助我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:44:58.517

我在这里看到的是您`UpdateCommand`在两个页面上具有相同的内容，但是在您进行更新的第二个页面上，这些值全部为空或不存在，结果是您实际上删除了它们。

继续页面的此 UpdateCommand`MobileINfo.aspx`并删除您实际上不使用的字段 - 仅保留您实际更改它们的字段 - 或者将其余部分引用到不存在的数据，因此它们被删除。

`UpdateCommand="UPDATE [DriversRecords] SET [Username] = ?, [Password] = ?, [FirstName] = ?, [LastName] = ?, [MiddleName] = ?, [Address] = ?, [Age] = ?, [Gender] = ?, [ContactNumber] = ?, [PlateNumber] = ?, [Color] = ?, [Brand] = ?, [LiscensedNumber] = ?, [SSSNumber] = ?, [TIN] = ?, [Type] = ?, [Model] = ?, [BirthDay] = ?, [BirthMonth] = ?, [BirthYear] = ? WHERE [ID] = ?"`

例如，在第二页`LiscensedNumber`退出，但`Gender`不是。更新后，性别将更新为 null 或空字符串。

# python - 我怎样才能修复这个文件“ “python中的错误

> ID：14594518
> 
> 赞同：1
> 
> 时间：2013-01-30T00:12:56.183
> 
> 标签：python, websphere, jython, wsadmin

我试图做一个简单的脚本，并在 for 循环中抛出以下错误，

```
WASX7017E: Exception received while running file "/abc/websphere/wasad/createusers.py"; 
exception information: com.ibm.bsf.BSFException: exception from Jython:
Traceback (innermost last):
File "<string>", line 22, in ?
AttributeError: __getitem__

filename=sys.argv[0]
file_read= open( filename)   ---- this is line 22
for row in file_read: 
```

请让我知道原因。

在这里你可以找到我的代码，

```
 import sys

  filename="/usr/websphere/onefolder/Userlist.txt"
  fileread = open(filename, 'r')
  for row in fileread:
     column=row.strip().split(';')
     user_name=column[0]
     pass_word=column[1]
     AdminTask.createUser(['-uid',user_name, '-password', pass_word, '-confirmPassword',   pass_word])
     AdminTask.mapUsersToAdminRole(['-roleName','Administrator','-userids',user_name])
     AdminTask.addMemberToGroup('[-memberUniqueName user_name,o=defaultWIMFileBasedRealm -groupUniqueName cn=webarch,o=defaultWIMFileBasedRealm]')

  fileread.close()

  AdminConfig.save()

  print 'Saving Configuration is completed' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:40:07.717

看起来您想要遍历文件中的每一行。`open`Python 中的方法返回一个文件对象。如果要遍历文件中的每一行，则需要调用`readlines`以检索文件的内容，然后循环遍历该文件。

这应该有效：

```
import sys

filename="/usr/websphere/onefolder/Userlist.txt"
fileread = open(filename, 'r')

filelines = fileread.readlines()  

for row in filelines:
   column=row.strip().split(';')
   user_name=column[0]
   pass_word=column[1]
   AdminTask.createUser(['-uid',user_name, '-password', pass_word, '-confirmPassword',   pass_word])
   AdminTask.mapUsersToAdminRole(['-roleName','Administrator','-userids',user_name])
   AdminTask.addMemberToGroup('[-memberUniqueName user_name,o=defaultWIMFileBasedRealm -groupUniqueName cn=webarch,o=defaultWIMFileBasedRealm]')

fileread.close()

AdminConfig.save()

print 'Saving Configuration is completed' 
```

# ios - 如何在带有标签的 TextField 中设置文本

> ID：14594521
> 
> 赞同：2
> 
> 时间：2013-01-30T00:13:08.460
> 
> 标签：ios, textfield

我使用一种方法以编程方式创建 12 个文本字段，并为每个文本字段添加一个标签。下面是创建文本字段的方法，这被调用了 12 次来创建每个文本字段。这行得通。

```
textField = [[UITextField alloc] initWithFrame:CGRectMake(x, y, w, h)];
textField.borderStyle = UITextBorderStyleRoundedRect;
textField.font = [UIFont systemFontOfSize:15];
textField.placeholder = name;
[textField setTag:tag];
textField.autocorrectionType = UITextAutocorrectionTypeNo;
textField.keyboardType = UIKeyboardTypeDefault;
textField.returnKeyType = UIReturnKeyDone;
textField.clearButtonMode = UITextFieldViewModeWhileEditing;
textField.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
[self.view addSubview:textField]; 
```

我的问题是如何在每个文本字段中设置文本，或者如何使用标签访问它。

我试过了：

```
[textField.2 setText: [NSString stringWithFormat : @"HEY"]]; 
```

那是行不通的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T00:15:40.110

```
[(UITextField *)[self.view viewWithTag:2] setText:@"foobar"]; 
```

不过，创建一个`NSArray`包含文本字段的属性通常是一个更好的主意。

# python - 如何在 Python 中跳出 while 循环？

> ID：14594522
> 
> 赞同：35
> 
> 时间：2013-01-30T00:13:08.453
> 
> 标签：python, while-loop, break

我必须为我的比赛课程制作这个游戏，我不知道如何打破这个循环。看，我必须通过滚动更大的数字来对抗“计算机”，看看谁的分数更大。但我不知道如何从轮到我“打破”，并过渡到计算机轮到。我需要“Q”（退出）来表示计算机开始转动，但我不知道该怎么做。

```
ans=(R)
while True:
    print('Your score is so far '+str(myScore)+'.')
    print("Would you like to roll or quit?")
    ans=input("Roll...")
    if ans=='R':
        R=random.randint(1, 8)
        print("You rolled a "+str(R)+".")
        myScore=R+myScore
    if ans=='Q':
        print("Now I'll see if I can break your score...")
        break 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-30T00:30:14.670

一些变化意味着只有一个`R`或`r`将滚动。任何其他角色都会退出

```
import random

while True:
    print('Your score so far is {}.'.format(myScore))
    print("Would you like to roll or quit?")
    ans = input("Roll...")
    if ans.lower() == 'r':
        R = np.random.randint(1, 8)
        print("You rolled a {}.".format(R))
        myScore = R + myScore
    else:
        print("Now I'll see if I can break your score...")
        break 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-30T00:21:39.680

我要做的是运行循环，直到 ans 是 Q

```
ans=(R)
while not ans=='Q':
    print('Your score is so far '+str(myScore)+'.')
    print("Would you like to roll or quit?")
    ans=input("Roll...")
    if ans=='R':
        R=random.randint(1, 8)
        print("You rolled a "+str(R)+".")
        myScore=R+myScore 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-01-30T12:51:43.933

不要使用 while True 和 break 语句。这是糟糕的编程。

想象一下，你来调试别人的代码，你在第 1 行看到了一段时间 True，然后不得不在另外 200 行代码中搜索，其中包含 15 个 break 语句，必须阅读无数行代码才能解决问题实际上是什么导致它中断。你会想杀了他们……很多。

导致 while 循环停止迭代的条件应该始终从 while 循环代码行本身中清楚，而无需查看其他地方。

Phil 有“正确”的解决方案，因为它在 while 循环语句本身中有一个明确的结束条件。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-30T00:21:34.793

```
ans=(R)
while True:
    print('Your score is so far '+str(myScore)+'.')
    print("Would you like to roll or quit?")
    ans=input("Roll...")
    if ans=='R':
        R=random.randint(1, 8)
        print("You rolled a "+str(R)+".")
        myScore=R+myScore
    else:
        print("Now I'll see if I can break your score...")
        ans = False
        break 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-22T05:07:52.100

[Walrus 运算符](https://realpython.com/lessons/assignment-expressions/)（添加到 python 3.8 的赋值表达式）和[while-loop-else-clause](https://realpython.com/lessons/while-loop-else-clause/)可以做得更 Pythonic：

```
myScore = 0
while ans := input("Roll...").lower() == "r":
    # ... do something
else:
    print("Now I'll see if I can break your score...") 
```

# c# - Windows 8 Metro 本地主机查找

> ID：14594523
> 
> 赞同：3
> 
> 时间：2013-01-30T00:13:13.890
> 
> 标签：c#, windows, microsoft-metro, localhost

是否可以在不运行以下命令的情况下让 Windows 8 Metro 应用程序与 localhost（localhost/dir 或 127.0.0.1/dir）通信：

```
%windir%\system32\CheckNetIsolation.exe LoopbackExempt -a -n=[packageid] 
```

如果不运行上述内容，应用程序将拒绝通过 http/wcf 与 localhost 通信。根据我的研究，我发现脚本是目前唯一的解决方法？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:45:36.940

如果您尝试通过 localhost 与另一个应用程序通信，我认为您的应用程序不会通过认证并在 MS Store 中列出。据我所知，所有 Metro 应用程序都必须提供功能，无论可能安装（或丢失）其他软件。

有关更多详细信息，请查看： [http ://social.msdn.microsoft.com/Forums/en/winappswithcsharp/thread/0268dbe3-4ea9-4889-bc26-583ff2760708](http://social.msdn.microsoft.com/Forums/en/winappswithcsharp/thread/0268dbe3-4ea9-4889-bc26-583ff2760708)

[http://social.msdn.microsoft.com/Forums/en-US/winappswithnativecode/thread/0005b94f-8409-4804-88c5-e2f5fcce460a/](http://social.msdn.microsoft.com/Forums/en-US/winappswithnativecode/thread/0005b94f-8409-4804-88c5-e2f5fcce460a/)

如果是通过 localhost 进行的通信仅用于测试目的，则可以。但如果您打算将其提交到 Windows 应用商店，也许您应该重新考虑您的应用程序。

# hadoop - Hadoop Pig 无法存储到现有文件夹

> ID：14594524
> 
> 赞同：3
> 
> 时间：2013-01-30T00:13:19.040
> 
> 标签：hadoop, store, apache-pig, bigdata

我创建了一个文件夹，使用 Store 命令从 Pig 进程中删除结果文件。它第一次工作，但第二次它认为该文件夹已经存在。这种情况的最佳做法是什么？关于这个主题的文档很少。

我的下一步是将文件夹重命名为原始文件名，以减少这种影响。有什么想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T01:22:57.133

您可以在 Pig 中执行[fs 命令](http://pig.apache.org/docs/r0.10.0/cmds.html#fs)，并且应该能够通过在运行 STORE 命令之前发出 fs -rmr 命令来删除目录：

```
fs -rmr dir
STORE A into 'dir' using PigStorage(); 
```

唯一微妙的是 fs 命令不需要在目录名两边加上引号，而 store 命令确实需要在目录名两边加上引号。

# c# - System.OutOfMemoryException 即使我们有很多 RAM

> ID：14594525
> 
> 赞同：-4
> 
> 时间：2013-01-30T00:13:38.833
> 
> 标签：c#, sql, windows-7

我正在运行带有 Windows 7 PRO 和 64 GB RAM 的 SQL Server 2012 开发人员版。

当我们执行大量内存请求时，我们会抛出 System.OutOfMemoryException。

是否有允许 SQL 使用更多物理 RAM 的快速修复方法？

代码：

```
// int count = MAX_BARS_IN_MEMORY / tf.timeperiod + 1;
                    hCommandBars.CommandText = String.Format(@"SELECT top " +     MAX_BARS_IN_MEMORY + " * FROM {0} WHERE {0}.timeperiod = " + tf.timeperiod + " ORDER BY     {0}.bartime desc", tableName);
                    barTimesAdapter = new SqlDataAdapter(hCommandBars);
                    barTimesAdapter.Fill(dTimeset);
                    foreach (DataTable table in dTimeset.Tables)
                    {
                        if (table.Rows.Count > 0)
                        {

                            foreach (DataRow row in table.Rows)
                            {
                                InMemoryTable inMemorytable = new InMemoryTable();
                                inMemorytable.BarTime = Convert.ToDateTime((row["bartime"].ToString()));
                                inMemorytable.High = Convert.ToDouble(row["high"].ToString());
                                inMemorytable.Low = Convert.ToDouble(row["low"].ToString());
                                inMemorytable.Open = Convert.ToDouble(row["open"].ToString());
                                inMemorytable.Close = Convert.ToDouble(row["close"].ToString());
                                inMemorytable.C1 = Convert.ToDouble(row["c1"].ToString());
                                inMemorytable.C2 = Convert.ToDouble(row["c2"].ToString());
                                inMemorytable.SNR2 = false;
                                inMemorytable.Symbol = symbol.Key;//symbol name
                                inMemorytable.TimePeriod = Convert.ToInt32(row["timeperiod"].ToString());

                                _SessAndBarTableList.Add(inMemorytable);
                            }
                        }
                    }
                    dTimeset.AcceptChanges();
                    dTimeset.Clear();
                }

            hConnectionBars.Close();
            hConnectionBars.Dispose();
            hConnectionBars = null;
        //});
        }

         _SessAndBarTableList = _SessAndBarTableList.OrderBy(x => x.BarTime).ToList();
         _1MinuteTableList = _1MinuteTableList.OrderBy(x => x.BarTime).ToList();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:35:05.063

一种解决方案是使用 a`SqlDataReader`而不是 a `DataSet`。这将阻止您从服务器中获取一大块的所有数据，这可能会解决问题。但是，如果您要返回很多行，您可能仍然会遇到向表添加项目的问题。

这些大查询返回了多少行？

# python - linux 行数不能使用 python 代码

> ID：14594533
> 
> 赞同：1
> 
> 时间：2013-01-30T00:14:19.067
> 
> 标签：python

我正在使用 WC -l 来计算文本文档中的行数。但是我在这里遇到了问题。

我得到了一个 python 代码，它将不同的数字组合写入不同的文件。每个文件在单独的行中包含每个组合的编号。

当我使用 wc -l 时，它没有计算最后一行！

下面是python代码：

```
import os
import itertools
lst = [6,7,8,9,12,19,20,21,23,24,26,27,28,29,43,44]
combs = []
for i in xrange(1, len(lst)+1):
els = [list(x) for x in itertools.combinations(lst, i)]
combs.extend(els)
for combination in els:
  combination_as_strings = map(str, combination)
  filename = "_".join(combination_as_strings) + ".txt"
  filename = os.path.join("Features", filename)
  with open(filename, 'w') as output_file:
     output_file.write("\n".join(combination_as_strings)) 
```

提前致谢，

艾哈迈德

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T00:21:19.793

您正在使用的`join`是在行之间放置换行符，但不是在最后一行的末尾。因此，`wc`不计算最后一行（它计算换行符的数量）。

`output_file.write("\n")`在脚本末尾的`with`子句中添加：

```
 with open(filename, 'w') as output_file:
     output_file.write("\n".join(combination_as_strings))
     output_file.write("\n") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T00:22:27.457

我认为您看到的是这种情况的变体：

```
$ printf '1\n2\n3' | wc -l 
```

在 Bash 提示符下输入 -- 打印`2`，因为没有 final`\n`

相比于：

```
$ printf '1\n2\n3\n' | wc -l 
```

打印 3 因为 final `\n`。

Python 文件方法不会将 a 附加`\n`到它们的输出中。要修复您的代码，请使用[如下 writelines](http://docs.python.org/2/library/stdtypes.html?highlight=writeline#file.writelines)：

```
with open(filename, 'w') as output_file:
    output_file.writelines(["\n".join(combination_as_strings),'\n']) 
```

或打印到文件：

```
with open(filename, 'w') as output_file:
     print >>output_file, "\n".join(combination_as_strings) 
```

或使用格式模板：

```
with open(filename, 'w') as output_file:
     output_file.write("%s\n" % '\n'.join(combination_as_strings)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T00:21:50.057

为什么不使用`writelines`？

```
output_file.writelines(line+"\n" for line in combination_as_strings) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T00:21:57.983

该命令计算文件 ( )`wc`中换行符的数量。`\n`

因此，如果文件中有 10 行，它将返回 9，因为您将有 9 个换行符。

您可以通过在每个文件的末尾添加一个空的新行来使其工作。

# javascript - 如何在渲染融合图之前禁用一个图例

> ID：14594534
> 
> 赞同：0
> 
> 时间：2013-01-30T00:14:24.233
> 
> 标签：javascript, charts, fusioncharts

我在 2D 条形图中有 3 个图例，我需要在第一次向用户显示它们时禁用其中一个，禁用意味着我想显示图例按钮但隐藏条形图，以便用户可以单击图例按钮显示后来的酒吧。

有人有答案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:54:51.090

默认情况下，FusionCharts 以启用模式呈现数据集。因此，在图表最初呈现时，不可能隐藏少量数据集。

# php - 使用 PHP 将“wmode”参数添加到 iframe 的 src

> ID：14594540
> 
> 赞同：3
> 
> 时间：2013-01-30T00:15:34.930
> 
> 标签：php, regex, iframe, wmode

我在使用 FLASH 的 z-index 和覆盖的 DIV 元素时遇到了一些问题。

我使用了这个 jQuery/Javascript 解决方案，它将“wmode=transparent”参数添加到每个（YouTube 和 Vimeo）iframe 的“src”中，以解决 z-index 问题（例如闪烁等）。

```
...

content.find('iframe').each(function() {

   var iframe_source = $(this).attr('src');
   var iframe_wmode = "wmode=transparent";

   if ( iframe_source.indexOf('?') != -1 )
   {
       iframe_source = iframe_source.split('?');
       $(this).attr('src',iframe_source[0]+'?'+iframe_wmode+'&'+iframe_source[1]);
   }
   else
   {
       $(this).attr('src',iframe_source+'?'+iframe_wmode);
   }

});

... 
```

现在我需要**PHP**中的这个解决方案，因为我仍然有一些 z-index-flickering（在渲染 DOM 期间），直到 jQuery/Javascript 解决方案纠正了这个问题*（在 $(window).load(function(){} 上。 .. $(document).ready(function(){} 对我来说是不可能的)*。

例如，我的 PHP 内容如下所示...

```
...

$content = '
foo bar foo bar
<iframe width="1280" height="720" src="http://www.youtube.com/embed/GASFa7rkLtM" frameborder="0" allowfullscreen></iframe>
foo bar foo bar
<iframe width="100" height="100" src="http://www.youtube.com/embed/GASFa7rkLtM?rel=0" frameborder="0" allowfullscreen></iframe>
foo bar foo bar
<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/GASFa7rkLtM" frameborder="0" allowfullscreen></iframe>
foo bar foo bar
<iframe src="http://player.vimeo.com/video/57959739?autoplay=1&amp;loop=1" width="500" height="281" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
foo bar foo bar';

... 
```

...在一些 preg_match/regex-magic 之后应该看起来像这样；)

```
...

$content = '
foo bar foo bar
<iframe width="1280" height="720" src="http://www.youtube.com/embed/GASFa7rkLtM?wmode=transparent" frameborder="0" allowfullscreen></iframe>
foo bar foo bar
<iframe width="100" height="100" src="http://www.youtube.com/embed/GASFa7rkLtM?rel=0&wmode=transparent" frameborder="0" allowfullscreen></iframe>
foo bar foo bar
<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/GASFa7rkLtM?wmode=transparent" frameborder="0" allowfullscreen></iframe>
foo bar foo bar
<iframe src="http://player.vimeo.com/video/57959739?autoplay=1&amp;loop=1&wmode=transparent" width="500" height="281" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
foo bar foo bar';

... 
```

提前谢谢了！

最好的迈克 =)

PS：我的想法是提前通过PHP解决z-index问题（服务器端，而不是客户端）。

PPS：仅供参考 - 我从 MySQL-DB 中获取带有 HTML-content/-tags 的“内容”字符串，我想修改这些字符串，而不是通过 jQuery/Javascript 修改 DOM。

* * *

**更新/编辑：**

建立在“One Trick Pony”中的正则表达式解决方案对我有用。我编辑了第一个并添加了第二个“preg_replace”。第一个将“?wmode=transparent”添加到每个 iframe-src 的末尾，第二个替换“？” 如果 URL 中存在两次，则使用“&”。

```
$content = preg_replace('#\<iframe(.*?)\ssrc\=\"(.*?)\"(.*?)\>#i',
                        '<iframe$1 src="$2?wmode=transparent"$3>', $content);

$content = preg_replace('#\<iframe(.*?)\ssrc\=\"(.*?)\?(.*?)\?(.*?)\"(.*?)\>#i',
                        '<iframe$1 src="$2?$3&$4"$5>', $content); 
```

不是一个漂亮的解决方案，但它非常适合我的目的。

有更好的建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T01:48:28.170

使用[DomDocument](http://www.php.net/manual/en/class.domdocument.php)：

```
$dom = new DomDocument();
$dom->loadHtml($content);

foreach($dom->getElementsByTagName('iframe') as $ifr){

  // use parse_url here, change query and rebuild it if you want to be 100% sure 
  $src = rtrim($ifr->getAttribute('src'), '&') . '&wmode=transparent';

  $ifr->setAttribute('src', $src);
}

$content = $dom->saveHtml(); 
```

* * *

使用贪婪匹配的正则表达式的基本尝试：

```
$content = preg_replace('#\<iframe(.*?)\ssrc\=\"(.*?)\"(.*?)\>#i', 
                        '<iframe$1 src="$2&wmode=transparent"$3>',  $content); 
```

# c# - 查询本地管理员组

> ID：14594545
> 
> 赞同：1
> 
> 时间：2013-01-30T00:16:10.587
> 
> 标签：c#, .net-2.0, windows-server-2008

所以，我有点卡在这里......

我正在编写一个程序，它应该能够列出 MS Windows Server 2008 R2 上本地管理员组中的所有用户。

这里的问题是我只被允许使用 .NET 2.0 - 所以我不能使用 GroupPrincipal 类......这会使这变得非常容易。

任何指针都会被应用！

干杯!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T23:30:57.983

天哪！

不知道我在想什么——太简单了！

[对 Masoud Tabatabaei 的所有信任 - 在以下位置找到以下代码片段： http](http://csharptuning.blogspot.se/2007/09/how-to-get-list-of-windows-user-in-c.html) ://csharptuning.blogspot.se/2007/09/how-to-get-list-of-windows-user-in-c.html

```
DirectoryEntry localMachine = new DirectoryEntry("WinNT://" + Environment.MachineName);
DirectoryEntry admGroup = localMachine.Children.Find("administrators","group");
object members = admGroup.Invoke("members", null);
foreach (object groupMember in (IEnumerable)members)
{
    DirectoryEntry member = new DirectoryEntry(groupMember);
    lstUsers.Items.Add(member.Name);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T04:45:32.803

你试过 WMI 吗？

例如

```
ManagementObjectSearcher   search = new ManagementObjectSearcher(@"SELECT * FROM Win32_UserAccount where LocalAccount = true");
ManagementObjectCollection userList = search.Get();

foreach (ManagementObject user in userList)
{
    Console.WriteLine("User name: {0}, Full Name: {1}", 
        user["Name"].ToString(), user["FullName"].ToString());
} 
```

将为您提供本地 SAM 中的用户列表。您可以将其他属性添加到查询并优化您的列表。

不要忘记添加对 System.Management.dll 的引用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-26T07:48:47.450

***If your are still looking for an answer, here:***

If you'd like to get the administrator group, you can use this code:

```
public static DirectoryEntry GetLocalAdminstratorGroup()
{
    using (var WindowsActiveDirectory = new DirectoryEntry("WinNT://" + Environment.MachineName + ",computer"))
    {
        return WindowsActiveDirectory.Children.Find(GetLocalizedAdministratorGroupName(), "group");
    }
}

//Localized == Language Independent
public static string GetLocalizedAdministratorGroupName()
{
    //For English Windows version, this equals "BUILTIN\Administrators".
    var adminGroupName = new SecurityIdentifier(WellKnownSidType.BuiltinAdministratorsSid, null).Translate(typeof(NTAccount)).Value;

    //Remove the "BUILTIN\" part, get the local name of the group
    return adminGroupName.Split('\\')[1];
} 
```

If you'd also like to enumerate it (like you need a username), you can do this, using the methods before:

```
object members = AdminGroup.Invoke("members", null);
foreach (object groupMember in (IEnumerable)members)
{
    DirectoryEntry member = new DirectoryEntry(groupMember);
    Console.WriteLine(member.Name);
} 
```

# android - 使用 Samsung Galaxy SII / Eclipse 进行 USB 调试

> ID：14594546
> 
> 赞同：2
> 
> 时间：2013-01-30T00:16:14.533
> 
> 标签：android, eclipse, debugging, usb, galaxy

我能够在两台不同的计算机上调试我的 Android 应用程序，但已经有一段时间没有这样做了。昨天，我尝试在这两台计算机上调试我的 Android 应用程序，但未能成功。

1.  当我使用命令“adb devices”时，我的设备会被列出。
2.  我的设备是三星 S II LTE，但操作系统版本已更改。当一切正常时，它是 Android 4.0.3，现在是 4.0.4。
3.  我的设备确实出现在 Eclipse“Android 设备选择器”>“选择一个正在运行的 Android 设备”中，但“调试”列是空白的，如果我尝试使用该条目进行调试，我的应用程序将安装到设备中并执行，但未调试。
4.  是的，我在应用程序清单中明确指定了“可调试”，尽管它实际上不应该是必需的。
5.  我尝试安装最新版本的 Kies（以及随附的 USB 驱动器）。
6.  我尝试直接从三星安装 USB 驱动程序。
7.  是的，“设置”>“开发者选项”>“USB调试”被选中。

然而，所有这些努力并没有使 Eclipse/Samsung Android S II LTE (4.0.4) 调试成为可能。我还注意到有一个适用于 Android 4.0.3 的 SDK，但没有适用于 Android 4.0.4 的 SDK。

由于 Android 4.0.4，我无法调试我的应用程序吗？SDK 不可用？

更好的是......我是否可以再次在我的设备上调试我的应用程序，如果可以，我该怎么做？

非常感谢任何可以帮助我的人！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T00:24:42.440

你的问题听起来还不错。确保您已更新 Eclipse 和您的 SDK/工具。确保您已关闭并打开手机。

您应该首先尝试调试一个新的空 Android 项目。那样有用吗？

可以通过 DDMS 访问 logcat 吗？如果没有，您可以通过命令行运行和访问 logcat（无需通过 Eclipse）吗？

你设置了一些断点吗？在您的项目中，您是否右键单击它，然后选择 Debug as Android Application？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-11T12:02:04.830

您的问题是 Windows 无法识别您的设备。

我建议您为您的三星 Galaxy SII 安装正确的驱动程序，或者您可以安装三星 Kies，它附带一组适用于您的 Android 开发的驱动程序。

# sql - 当只有 IN（值）和 NOT IN（其他值）时选择关联的 id

> ID：14594551
> 
> 赞同：0
> 
> 时间：2013-01-30T00:16:36.480
> 
> 标签：sql, select

抱歉标题很糟糕，我想不出更好的方式来描述我的问题，所以我通过示例很好地解释它来弥补它。

## 设置

如果您想继续，这里是为我的问题创建表的 SQL：

```
CREATE TABLE `student_sections` (`student_id` int(11) NOT NULL, `section_id` int(11) NOT NULL);
INSERT INTO `student_sections` (`student_id`,`section_id`) VALUES (1,11);
INSERT INTO `student_sections` (`student_id`,`section_id`) VALUES (1,12);
INSERT INTO `student_sections` (`student_id`,`section_id`) VALUES (1,13);
INSERT INTO `student_sections` (`student_id`,`section_id`) VALUES (1,14);
INSERT INTO `student_sections` (`student_id`,`section_id`) VALUES (1,15);
INSERT INTO `student_sections` (`student_id`,`section_id`) VALUES (2,12);
INSERT INTO `student_sections` (`student_id`,`section_id`) VALUES (2,13);
INSERT INTO `student_sections` (`student_id`,`section_id`) VALUES (2,14);
INSERT INTO `student_sections` (`student_id`,`section_id`) VALUES (2,21);
INSERT INTO `student_sections` (`student_id`,`section_id`) VALUES (2,22);
INSERT INTO `student_sections` (`student_id`,`section_id`) VALUES (2,23); 
```

结果如下表：

```
| student_sections        |
|-------------------------|
| student_id | section_id |
|------------|------------|
| 1          | 11         |
| 1          | 12         |
| 1          | 13         |
| 1          | 14         |
| 1          | 15         |
| 2          | 12         |
| 2          | 13         |
| 2          | 14         |
| 2          | 21         |
| 2          | 22         |
| 2          | 23         | 
```

## 设想

我有一个“组”的部分，我必须找到与部分组合相关联的所有学生。我的应用程序将有几个“组”的部分。

对于 section_id 的“组 1”：(11,12,13,14,15) 学生 1 与所有部分 (11,12,13,14,15) 相关联。学生 2 与 (12,13,14) 相关联，但不与 (11,15) 相关联。

对于 section_id 的“组 2”：(21,22,23,24,25) 学生 2 与 (21,22,23) 相关联，但不与 (24,25) 相关联。

给定 section_id's (12,13,14) 我需要选择与那些 section_id's 相关联的 student_id，而不是与 section_id's (11,15) 相关联。

例如，如果给定 section_id's (12,13,14) 我想选择 student_id (2)。即使 student_id 1 与 section_id (12,13,14) 相关联，她也与 11 和 15 相关联，所以我不希望她的 id 返回。

此查询的更高目的是我将使用它作为子查询来选择给定部分组合的学生列表。

例如，如果给定 section_id 的 (12,13)​​，则不会返回任何结果。

## 我试过的

我尝试混合使用 IN 和 NOT IN，但因为 5 行的 student_id 1 和 3 行与 (12,13,14) 相关联，所以以下查询中的 DISTINT() 返回 student_id 1 和 2。

```
SELECT
    DISTINCT(student_id)
FROM
    student_sections
WHERE
    section_id IN (12,13,14)
    AND section_id NOT IN (11,15) 
```

### 2月1日更新

我添加了一些额外的用例数据，稍微改变了查询的要求。一个学生将被安排针对几个“组”的部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T00:21:21.890

对于这种类型的查询，我建议使用`having`子句进行聚合：

```
select ss.student_id
from student_sections ss
group by ss.student_id
having max(case when section_id = 12 then 1 else 0 end) = 1 and
       max(case when section_id = 13 then 1 else 0 end) = 1 and
       max(case when section_id = 14 then 1 else 0 end) = 1 and
       max(case when section_id not in (12, 13, 14) then 1 else 0 end) = 0 
```

这是相同想法的一个更简单的版本：

```
select ss.student_id
from student_sections ss
group by ss.student_id
having count(distinct section_id) = 3 and
       count(distinct case when section_id in (12, 13, 14) then section_id end) = 3 
```

我喜欢第一个版本，因为它概括了许多“组内组”问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T00:45:14.683

您需要 INTERSECT 两个选择：

```
SELECT student_id FROM student_sections
WHERE section_id IN (12,13,14)
   INTERSECT
SELECT student_id WHERE
   section_id NOT IN (11,15) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T00:25:21.883

```
SELECT student_id
     , COUNT(*) x
     , COUNT(CASE WHEN section_id IN(12,13,14) THEN 'foo' END) y
  FROM student_sections 
 GROUP 
    BY student_id; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T00:27:45.320

这是另一种选择，但我喜欢@Gordon 的回答：

```
SELECT ss.student_id
FROM student_sections ss
     left join (select student_id 
                  from student_sections 
                  where section_id NOT IN (12,13,14)
                  ) s on ss.student_id = s.student_id
WHERE s.student_id is null
GROUP BY ss.student_id
HAVING Count(distinct ss.section_id) = 3 
```

还有[小提琴](http://sqlfiddle.com/#!2/77f96d/8)。

或使用不存在：

```
SELECT ss.student_id
FROM student_sections ss
WHERE NOT EXISTS (
  select null
  from student_sections 
  where section_id NOT IN (12,13,14)
    and student_id = ss.student_id
  )
GROUP BY ss.student_id
HAVING Count(distinct ss.section_id) = 3 
```

祝你好运。

# php - RabbitMQ 实现

> ID：14594569
> 
> 赞同：3
> 
> 时间：2013-01-30T00:19:06.967
> 
> 标签：php, design-patterns, rabbitmq, message-queue, amqp

这里有一点关于我目前的设置。

*   REST API 将 (POST) 数据推送到队列中
*   队列有一个始终在运行的消费者，并生产到 en Exchange
*   Exchange 路由到其他几个队列（如 20+）
*   每个（20+）队列都执行一项特定任务（消费者也总是运行）
*   Cron 作业运行以检查所有 (20+) 任务是否已完成并生成到另一个队列

我不确定我是否喜欢消费者一直运行，因为每个消费者使用大约 300MB 的 Ram（我认为它是 MB，目前不在我面前），我正在寻找另一种实现方式。

```
 M <-- Message coming from REST API
    |
    |
    +-First Queue
    |
    |
    | <-- The Exchange
   /|\
  / | \
 /  |  \ <-- bind to multiple queues ( 20+ )
Q1  Q2  Q3 <-- Each Queue is a task that must be completed

    | <-- CRON runs to check if all queues above have completed
    |
    |
    Q4 <-- Queues 1,2 and 3 must finish first before Queue 4 can start
    |
    C <-- Consumer 
```

我在下面的相关问题中建议使用 RPC，但这个问题是 RPC（据我了解）将有多个实例。这是一个资源密集型过程，我认为通过添加 RPC 调用它只会让服务器陷入困境，然后变得无响应（如果我错了，请纠正我）。

另一种方法是使用聚合器模式

*   [http://www.eaipatterns.com/Aggregator.html](http://www.eaipatterns.com/Aggregator.html)

这看起来正是我需要的，但我发现文档有限。有人做过这种模式吗？

我的问题是我对它目前的实施方式不满意，我正在寻找改进流程的方法。我希望摆脱 CRON，实施新模式，而不是让消费者一直运行。

该流程目前也只支持每个消费者的单个实例。它可以有多个消费者，但我们如何实现它，我们当时只想要一个。

这是使用 RabbitMQBundle 在 PHP、Symfony2 框架中实现的

相关问题：

*   [RabbitMQ 等待多个队列完成](https://stackoverflow.com/questions/13861459/rabbitmq-wait-for-multiple-queues-to-finish)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T19:32:35.063

OldSound 这里是 RabbitMQ Bundle 的创建者。

捆绑包本身不支持开箱即用的聚合器模式，但您可以使用底层 php-amqplib 来实现它。

要执行聚合，您需要沿处理链发布具有相关 ID 和该 ID 的线程的消息。然后聚合器将等待 X 条消息，具体取决于您必须处理该特定任务的不同工作人员的数量。等待消息的一种方法是拥有一个数组，如果它们被相关 id 索引，则保留它们。

因此，每当您收到传入消息时，您将执行以下操作：

```
$correlation_id = $msg->get('correlation_id');
$this->receivedMessages[$correlation_id]['msgs'][] = $msg; 
```

然后在你做的某个地方：

```
if ($someNumber == count($this->receivedMessages[$correlation_id]['msgs']) {
// proceed to next step
} 
```

我现在实际上正在为 Symfony 开发一个 Workflow 包，我计划很快将其开源。该捆绑包可用于以非常简单的方式实现您提出的用例（即您只需要为每个任务提供服务）。

现在我想知道为什么每个消费者要占用 300 MB 的 RAM？您是否需要与它们一起运行完整的堆栈框架？如果可能的话，为消费者应用程序创建一个新的 Symfony 内核，并且只加载你需要的内容以减少开销。

# pdf - 有没有办法修复 PDF 文件中的截断文本？

> ID：14594571
> 
> 赞同：4
> 
> 时间：2013-01-30T00:19:23.363
> 
> 标签：pdf, ghostscript

我有一个库手册，创建者更改了一些 LaTeX 代码并更改了页面位置和大小，但在编译、提取和发送之前没有检查它。他目前不可用，所以如果我想打印它，我必须自己修复它。

我能够使用一些 ghostscript 命令将整个文本向下推送到页面中心的位置，命令如下所示：

```
/usr/bin/gs -sDEVICE=pdfwrite -o /home/user/shiftdown.pdf -dPDFSETTINGS=/prepress -c "<</PageOffset [0 -35]>> setpagedevice" -f /home/user/brokendoc.pdf 
```

问题是，虽然页面现在可以打印而不会碰到硬件边距，但章节标题仍然在顶部被截断了一半。如果我在 Acrobat 或 Reader 中打开 PDF，我可以选择章节标题并复制它，然后它将全文粘贴到我选择的程序中。当我尝试在带有部分不兼容驱动程序的 Xerox MFP 上打印它时，它打印了标题，但它不会双面打印，我不想打印 700 多页，然后使用复制到 1 -> 2 功能。

有谁知道修复这些截断的标题的方法，以便它们在 PDF 文件中正确显示或至少可靠地正确打印？我有很容易获得的 ghostscript、相对容易获得的 TeX 和 Acrobat X 的标准版本。

[更新：]

下载 Acrobat Pro XI 的演示后，我可以转到“印刷制作”选项卡并单击“编辑对象”。当我点击截断的章节标题时，它显示了两个边界框，覆盖了整个页面，其中一个比另一个高一点。当我右键单击它时，我可以选择添加剪辑和删除剪辑。当我单击删除剪辑时，它会显示整个章节标题。如果我单击添加剪辑，它会显示“一个或多个选定区域已经有一个剪辑区域。继续为选定对象设置剪辑区域？[否] [是]”

有了这些附加信息，我知道必须有一种方法可以在批处理模式下解决问题，有人知道什么命令可以转换成这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T18:06:25.397

没有看到“brokendoc.pdf”就很难知道。如果我看到该文件，我可以告诉您发生了什么，以及（可能）如何修复它或解决它。

我不需要整个文件，所以只需一个只有几页显示问题的缩短版本就足够了。您可以使用以下命令从完整的 brokendoc.pdf 中获取此信息：
gs -sDEVICE=pdfwrite -o part.pdf -dLastPage=10 brokendoc.pdf

此外，您可能想尝试：
gs -sDEVICE=pdfwrite -o compatible.pdf -dPDFFitPage -sPAPERSIZE=letter -dFIXEDMEDIA brokendoc.pdf

以上将缩放（和居中）页面到指定的页面大小。您可以指定 'letter' 或 'a4' 或使用 -dMEDIAWIDTHPOINTS= **_ -dMEDIAHEIGHTPOINTS=_**来获取特定的输出页面大小。-dFIXEDMEDIA 选项使 gs 忽略文件中的 MediaBox。

# jquery - 如果 getJSON 调用的值是特定值，则通过 Jquery 添加 CSS 样式

> ID：14594572
> 
> 赞同：0
> 
> 时间：2013-01-30T00:19:38.527
> 
> 标签：jquery, css, getjson

我是 jquery 的新手，希望能得到一点帮助。

我有一个页面，它以格式获取数据`getJSON`并将所述数据插入页面上的元素中。然后页面每 2 秒刷新一次以获取更新的数据。

页面上正在更新的元素示例：

```
<abbr title="mouse hover description" id="User004">..updated by getJSON..</abbr> 
```

这是我获取和刷新`abbr`元素内容的方式（可行）：

```
function refreshData()
    {
        $.getJSON('http://domain.com/Data.php',function(User) {
            $.each(User, function(key, val) {
                $('#'+key).text(val);
              });
            });

    }
    window.setInterval("refreshData()", 2000); 
```

我想要完成的是：
A）如果键`user004`的值为 2，
则添加 CSS 样式。B）如果键`user004`的值为，而另一个键`user007`为 3，则添加 CSS 样式。

这是我今天第一个问题的内容，但我知道这是不正确的：

```
$.getJSON('http://domain.com/Data.php',function(User) {
            $.each(User, function(key, val) {
                $('#'+key).text(val) {
                    if ($('#user004:contains("2")'))
                    {
                        $("#"+key).css({color: '#9a4d9e', cursor: 'default'});
                    }
                }
              });
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:31:18.383

我认为您在执行 $('#user004:contains("2")') 时误解了 jQuery 在做什么。在这种情况下，jQuery 将始终返回一个对象（恰好是 jQuery 本身）。如果你想检查是否有匹配，你可以使用

```
if ($('#user004:contains("2")').length > 0) 
```

虽然老实说，我不太确定你为什么会这样做。你既有键又有值，为什么不直接使用它们而不是从 DOM 中提取它们呢？这似乎效率低下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T11:15:36.760

感谢用户 1545858 的反馈。

我结束了以下解决方案，目前效果很好：

```
 function refreshData()
    {
        $.getJSON('http://domain.com/Data.php',function(Callcenter) {
            $.each(Callcenter, function(key, val) {
                $('#'+key).text(val);
              });
            });

        // Add custom style if value equals
        if (($("#User004").text() == "0") && (($("#User007").text() < "4"))) {
            $("#User004").css("color","red");
        }
    }

        // Refresh the above every 2 seconds...
        window.setInterval("refreshData()", 2000); 
```

# c# - NHibernate Criteria 查询与 Postgresql Timestamp 列，.NET DateTime 在查询参数中截断毫秒

> ID：14594573
> 
> 赞同：1
> 
> 时间：2013-01-30T00:19:50.760
> 
> 标签：c#, postgresql, nhibernate

我有一个 NHibernate 标准查询，如下所示：

```
using (var unitOfWork = this.UnitOfWorkFactory.CreateUnitOfWork())
{
    const string fromstring = "2013-01-29 23:30:33.5993";
    var from = DateTime.Parse(fromstring);

    const string tostring = "2013-01-29 23:30:33.63434";
    var to = DateTime.Parse(tostring);

    var criteria = unitOfWork.Session.CreateCriteria<DataModel>();

    criteria.Add(Restrictions.Ge("Created", from));
    criteria.Add(Restrictions.Le("Created", to));

    items = criteria.List<DataModel>();
} 
```

我正在使用 Postgresql，这是表映射：

```
-- Table: data

-- DROP TABLE data;

CREATE TABLE data
(
  id integer NOT NULL DEFAULT nextval('data__sequence'::regclass),
  created timestamp without time zone NOT NULL,
  CONSTRAINT itemsupdatelog_pkey PRIMARY KEY (id )
)
WITH (
  OIDS=FALSE
);
ALTER TABLE data
  OWNER TO ubuntu; 
```

和 NHibernate 映射：

```
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="Data" namespace="Data.Models">
  <class name="DataModel" table="Data" mutable="false">
    <id name="Id">
      <generator class="sequence">
        <param name="sequence">Data__Sequence</param>
      </generator>
    </id>

    <property name="Created" not-null="true" type="Timestamp" />

  </class>
</hibernate-mapping> 
```

我可以确认表中的数据看起来不错（即，所有 Created 值肯定有毫秒，当我使用 NHibernate 查询数据库的值 OUT 时，DateTime 对象具有正确的毫秒）。

但是，当我使用 NHProf 检查查询时，NHibernate 不会在查询中发送正确的毫秒数：

```
 SELECT this_.Id            as Id1_0_,
       this_.Created       as Created1_0_,
FROM   Data this_
WHERE  this_.Created >= '2013-01-29T23:30:33.00' /* :p1 */
       and this_.Created <= '2013-01-29T23:30:33.00' /* :p2 */
ORDER  BY this_.Created desc 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T18:21:15.913

**更新：** 问题似乎出在 NHProf 中。NHProf 报告的 SQL：

```
SELECT this_.Id      as Id0_0_,
   this_.Created as Created0_0_
FROM   data this_
WHERE  this_.Created >= '2013-01-29T23:30:33.00' /* :p0 */
       and this_.Created <= '2013-01-29T23:30:33.00' /* :p1 */ 
```

在 postgres 日志中报告的 SQL：

```
SELECT this_.Id as Id0_0_, this_.Created as Created0_0_ 
FROM data this_ 
WHERE this_.Created >= ((E'2013-01-29 23:30:33.599300')::timestamp) 
and this_.Created <= ((E'2013-01-29 23:30:33.634340')::timestamp) 
```

为了仔细检查，我在查询中插入了几毫秒之间的行：

```
insert into data (created) values ('2013-01-29 23:30:33.600') 
```

并返回这一行。

# javascript - Jslint 不喜欢 !==，似乎更喜欢 ===，与 typeof 的关系

> ID：14594576
> 
> 赞同：5
> 
> 时间：2013-01-30T00:20:09.243
> 
> 标签：javascript, backbone.js, jslint

```
Unexpected 'typeof'. Use '===' to compare directly with undefined.

    if (typeof exports !== 'undefined') { 
```

这是来自backbone.js 的代码。

它似乎不喜欢这种语法。

如何更改此代码以使 jslint.com 满意？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T00:47:21.217

Underscore 库（由制作 Backbone 和 CoffeeScript 的同一个人创建，因此您知道这是经过深思熟虑的）其`isUndefined`功能使用以下内容：

```
obj === void 0 
```

如果您想要一个完全安全的（即使在某人重新定义的奇怪情况下`undefined`）方法，那仍然会让脾气暴躁的老 Crockford（编写 JSLint 的人）高兴，我会使用该检查。虽然看起来有点尴尬，所以至少我会对此进行解释性评论。

更好的是，您可以将其汇总到您自己的`isUndefined`函数中，例如下划线。或者更好的是，您可以首先使用 Underscore 的功能；如果您使用 Backbone，则您已经有了 Underscore，因为 Backbone 需要它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T00:32:51.480

It appears as though jsLint expects a direct comparison to `undefined` instead of using the `typeof foo === "undefined"` trick.

Using `typeof exports === "undefined"` gives the same error, but using `exports === undefined` passes jsLint:

```
var exports;
var test;

if (exports === undefined) {
    test = "foobar";
} 
```

This is a cleaner way to check for `undefined`, and probably less prone to mistakes like `exports === "undefined"` or `typeof exports === undefined`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T06:36:13.637

为了确保 undefined 没有被重新定义：

```
var is_undefined=(function(undefined){
  return function(a){return a===undefined;};
}(/*omitted argument is undefined*/)); 
```

利用省略的参数未定义的事实。

**更新**

更简单的方法是

```
function is_undefined(x){return x===[][0];} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-25T21:09:06.610

回答如何在不使用函数或替代`typeof`.

JSLint 错误消息可以通过声明使用的结果来绕过`typeof`。

```
var hasExports = typeof exports;
if (hasExports !== 'undefined') {
   //...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-24T00:32:12.847

您可以编写一个不会打扰 jsLint 的函数。

```
function getTypeof(obj) {
  'use strict';
  return typeof obj;
} 
```

然后你可以调用 getTypeof 函数而不是直接使用 typeof。

```
var exports,
    test;

if (getTypeof(exports) === "undefined") {
    test = "foobar";
} 
```

似乎需要做很多额外的工作，但我仍然不明白为什么 Crockford 反对在 if 语句中使用 typeof。

# ruby-on-rails-3 - 如何使用确认密码验证密码 [Rails 3.2]

> ID：14594580
> 
> 赞同：0
> 
> 时间：2013-01-30T00:20:34.623
> 
> 标签：ruby-on-rails-3

**如何在rails 3.2中使用确认密码验证密码**

**我的代码不起作用**

**你可以告诉我的错误在哪里**

我尝试了许多变化来更改控制器中的代码。

密码保存但未验证到密码确认字段和密码字段。

请帮帮我，帮帮我）））

**意见**

```
<%= form_for :password, :url => { :action => "change_password" }, :id => @user do |f| %> 
<% if @user.errors.any? %>
    <div class="error_messages">
      <h2>Form is invalid</h2>
      <ul>
        <% for message in @user.errors.full_messages %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>
<%= f.password_field :password %>
<%= f.password_field :password_confirmation %>
<%= f.submit "Save", :class => "button blue" %>
<% end %> 
```

**用户控制器**

```
 def change_password
    @page_title = "Changing Zetfon account password"
    @user = current_user
    if request.post?

       @user.password = Digest::SHA1.hexdigest(params[:password][:password]) 
    if @user.save
        redirect_to :action => 'profile'
        flash[:status] = "Your password was changed. Next time you sign in use your new password."
      else
     flash[:status] = _('Your password not changed')
        render :action => "change_password"
      end
    end
  end 
```

**用户模型**

```
 validates_confirmation_of :password
  attr_accessible :password_confirmation
  attr_accessor :password 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-01-31T05:36:50.413

将以下行添加到您的模型中

```
 validates :password, confirmation: true 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T19:56:07.987

简单地使用是否为时已晚`has_secure_password`？你可以在这个 RailsCast 中了解它：

[http://railscasts.com/episodes/270-authentication-in-rails-3-1](http://railscasts.com/episodes/270-authentication-in-rails-3-1)

我不确定你为什么有`if request.post?`. 这不是已经由你的路线决定了吗？

根据文档`validates_confirmation_of`，我认为您可能需要添加：

```
validates_presence_of :password_confirmation, :if => :password_changed? 
```

这是文档：

[http://apidock.com/rails/ActiveModel/Validations/HelperMethods/validates_confirmation_of](http://apidock.com/rails/ActiveModel/Validations/HelperMethods/validates_confirmation_of)

该文档似乎表明您也不需要`attr_accessible :password_confirmation`。

我希望这会有所帮助。

# mvvm - 依赖注入以及何时使用静态类

> ID：14594582
> 
> 赞同：1
> 
> 时间：2013-01-30T00:20:50.140
> 
> 标签：mvvm, dependency-injection, mef

静态类几乎总是不受欢迎，还是有使用它们的好时机？

例如，在您的应用程序中实现一些无处不在的东西（例如静态类中的安全性）是否有意义？您仍然可以在静态类上使用属性注入来更改实现，如果您要使用 MEF 之类的东西来注入实现，那么我认为它不会妨碍您的测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:48:53.027

我主要将静态类用于无状态辅助类以及当我想创建扩展方法时。我尽量避免具有状态的静态类，因为正如您提到的那样，它可能会妨碍测试。

假设您决定将状态添加到静态类。要测试依赖于其状态的此类的方法，您必须找到一种在测试期间更改此状态的方法。这意味着您必须：

1.  准备好每次测试前的状态。
2.  每次测试后清除状态。

这意味着该类将需要提供一种方法（通过内部方法或内部属性设置器）来更改其可能很危险的状态。如果您想创建不可变的类或完全封装其实现细节的类，那么您将无法轻松测试它们（如果根本没有），并且您的测试可能会因更改实现而中断。即使使用 MEF，也不容易做到这一点。

当然，静态类有时会为诸如日志记录之类的问题提供有吸引力的解决方案，正如您在问题中提到的，安全性。在这些情况下，我会选择一个`static class`将所有调用委托给一个`private readonly`字段的方法。这样该字段的类就可以正常进行单元测试了。然后，您可以在集成测试中测试静态类。

顺便看看 .NET 的[静态类设计指南](http://msdn.microsoft.com/en-us/library/vstudio/ms229038%28v=vs.100%29.aspx)。它不包含与您的问题相关的任何内容，但包含有价值的建议。

# ruby-on-rails - 轨道操作员

> ID：14594583
> 
> 赞同：0
> 
> 时间：2013-01-30T00:20:52.293
> 
> 标签：ruby-on-rails

这段代码的有效方法是什么？我认为应该有更好的方法。我想重新编码。

```
if @project.contest_entries.where("view_in_showcase = ?", true)
 entries = @project.contest_entries.where("view_in_showcase = ?", true).count
else
 entries = 1 
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T00:35:23.007

你可以使用`max`：

```
entries = [1, @project.contest_entries.where(view_in_showcase: true).count].max 
```

我会定义一个范围`ContestEntry`来摆脱该`where`子句：

```
scope :showcased, where(view_in_showcase: true) 
```

那么那将成为

```
entries = [1, @project.contest_entries.showcased.count].max 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T00:26:45.833

```
showcased_project_entries =
    @project.contest_entries.where("view_in_showcase = ?", true)
entries = showcased_project_entries ? showcased_project_entries.count : 1 
```

或者

```
entries =
    @project.contest_entries.where("view_in_showcase = ?", true).try(:count) || 1 
```

虽然，我必须承认我不确定在哪种情况下会`where`返回虚假值。

编辑：如评论中所述，该`else`子句确实永远不会触发，因此您的代码可能不会执行您想要的操作。如果这就是您的意思，请参阅 Andy H 的解决方案，了解您在没有发现任何结果时想要的情况`entries`。`1`

# tcl - 双引号变量有什么区别吗？

> ID：14594597
> 
> 赞同：1
> 
> 时间：2013-01-30T00:22:01.983
> 
> 标签：tcl

对于以下代码：

```
set str "a bb ccc"
if {[string first bb "$str"] >= 0} {
    puts "yes"
} 
```

我的大学说我不应该双引号 $str 因为存在性能差异，比如 TCL 在内部使用 $str 创建一个新对象。

我在这方面找不到令人信服的文件。你知道索赔是否准确吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T14:14:05.917

你的同事实际上是错的，因为 Tcl 的解析器足够聪明，知道它`"$str"`与`$str`. 让我们看看生成的字节码（这是使用 Tcl 8.6.0，但我们要详细查看的部分实际上在旧版本中一直到 8.0a1 都是相同的）：

```
% tcl::unsupported::disassemble script {
set str "a bb ccc"
if {[string first bb "$str"] >= 0} {
    puts "yes"
}
}
ByteCode 0x0x78710, refCt 1, epoch 15, interp 0x0x2dc10 (epoch 15)
  Source "\nset str \"a bb ccc\"\nif {[string first bb \"$str\"] >= 0} "
  Cmds 4, src 74, inst 37, litObjs 7, aux 0, stkDepth 2, code/src 0.00
  Commands 4:
      1: pc 0-5, src 1-18        2: pc 6-35, src 20-72
      3: pc 15-20, src 25-46        4: pc 26-31, src 61-70
  Command 1: "set str \"a bb ccc\""
    (0) push1 0     # "str"
    (2) push1 1     # "a bb ccc"
    (4) storeScalarStk 
    (5) pop 
  Command 2: "if {[string first bb \"$str\"] >= 0} {\n    puts \"yes\"\n}"
    (6) startCommand +30 2  # next cmd at pc 36, 2 cmds start here
  Command 3: "string first bb \"$str\""
    (15) push1 2    # "bb"
    (17) push1 0    # "str"
    (19) loadScalarStk 
    (20) strfind 
    (21) push1 3    # "0"
    (23) ge 
    (24) jumpFalse1 +10     # pc 34
  Command 4: "puts \"yes\""
    (26) push1 4    # "puts"
    (28) push1 5    # "yes"
    (30) invokeStk1 2 
    (32) jump1 +4   # pc 36
    (34) push1 6    # ""
    (36) done 
```

如您所见（查看`(17)`–<code>(19)），它`"$str"`被编译为变量名称的推送和取消引用 ( `loadScalarStk`)。鉴于没有局部变量表（即，我们不在过程中），这是最优化的序列。编译器不进行非本地优化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T08:23:17.240

我认为您的同事是正确的：如果 Tcl`$str`在预期单词的地方看到了简单的内容，它会将“str”解析为变量的名称，在适当的范围内查找它，然后从该变量中提取一个表示其值[*的内部对象*](http://www.tcl.tk/man/tcl8.6/TclLib/Object.htm)然后要求该对象生成该值的字符串表示形式。此时，字符串表示要么已经可用并被缓存（在对象中）——在你的情况下，它将被缓存——或者它将由对象透明地生成并缓存。

如果将变量 ( `$str`) 的取消引用放在双引号字符串中，那么 Tcl 会这样：当它`"`在预期单词的地方看到第一个时，它会进入解析以下字符的模式，执行变量-和命令替换，直到它看到下一个 unescaped `"`，此时从开头累积的替换文本`"`被认为是一个单词，它最终位于表示该单词值的（新创建的）内部对象中。

如您所见，在第二种（您的）情况下，将询问保存名为“str”变量值的原始对象的值，然后它将用于构造另一个值，而在第一种情况下，第一个值将立即使用。

现在有一个更微妙的问题。对于它评估的脚本，Tcl 只保证它的解释器遵守[某些评估规则](http://www.tcl.tk/man/tcl8.6/TclCmd/Tcl.htm)，仅此而已；其他一切都是实现细节。这些细节可能会因版本而异；例如，在 Tcl 8.6 中，引擎已使用非递归评估 (NRE) 重新实现，虽然这些对 Tcl 内部结构进行了相当彻底的更改，但*您现有的脚本并没有注意到。*

我要引导你的是，讨论*隐式*性能“黑客”，例如我们现在所讨论的，只有在应用于特定版本的运行时才有意义。我非常怀疑 Tcl 目前优化`"$str"`只是重新使用对象，`$str`但理论上它最终可能会开始。

您的方法的真正“问题”不是性能下降，而是您似乎适用于自己的明显自欺欺人，这导致 Tcl 代码风格可疑。让我解释。与“更传统”的语言（通常受 C 等语言的影响）相反，Tcl 没有字符串的特殊语法。这是因为它没有字符串文字：从文字开始在脚本中生命的每个值*最初都是字符串。*任何值的实际类型是在运行时由对这些值进行操作的命令定义的。为了演示，`set x 10; incr x`将字符串“10”放入名为“x”的变量中，然后`incr`命令将强制该变量“x”中的值将其保存的字符串“10”转换为整数（值为 10）；然后这个整数将增加 1（产生 11），使字符串表示无效作为副作用。如果你稍后会这样做`puts $x`，字符串表示将从整数重新生成（产生“11”），缓存在值中，然后打印。

因此，您采用的代码风格实际上试图使 Tcl 代码看起来更像 Python（或 Perl 或任何您以前的语言），但没有真正的价值，而且对于经验丰富的 Tcl 开发人员来说也显得格格不入。双引号和花括号都在 Tcl*中用于分组，*而不是分别用于生成字符串值和代码块——这些只是不同分组方式的特定用例。考虑阅读[此线程](https://stackoverflow.com/q/7299320/720999)以获取更多背景信息。

**更新：**[教程](http://www.tcl.tk/man/tcl8.5/tutorial/tcltutorial.html)中对各种类型的分组进行了很好的解释，值得一读。

# google-app-engine - Richface 弹出窗口在 GAE 中不起作用

> ID：14594600
> 
> 赞同：0
> 
> 时间：2013-01-30T00:22:27.287
> 
> 标签：google-app-engine, popup, richfaces

基于来自 Richface 展示的示例： [http ://showcase.richfaces.org/richfaces/component-sample.jsf?demo=popup&sample=simplePopup&skin=blueSky](http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=popup&sample=simplePopup&skin=blueSky)

当我使用#{rich:component 调用弹出窗口时，什么也没有发生（即没有弹出窗口）：

```
<a4j:commandLink styleClass="no-decor" execute="@this"
   oncomplete="#{rich:component('popup')}.show()"> 
```

但是，当我更改为使用rich:componentControl 时，会出现弹出窗口

```
<a4j:commandLink styleClass="no-decor" execute="@this">
  <rich:componentControl target="popup" operation="show" /> 
```

注意：当我从本地笔记本运行时，这两个工作都从 GAE 中找到，但是当我在线部署到 GAE 时会出现问题（[http://cloudenterpriseapps.appspot.com/public/test/testPopup.jsf](http://cloudenterpriseapps.appspot.com/public/test/testPopup.jsf)）

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:39:42.727

刚刚通过添加解决

```
<a4j:status onstart="#{rich:component('statPane')}.show()"
    onstop="#{rich:component('statPane')}.hide()" />
...
<rich:popupPanel id="statPane" autosized="true">
    <h:graphicImage value="/images/common/ai.gif" alt="ai" />
    Please wait...
</rich:popupPanel> 
```

这是完整的代码，现在可以正常工作了。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:c="http://java.sun.com/jsp/jstl/core">

<ui:composition>
    <h:head>
        <title>RichFaces Showcase</title>
    </h:head>
    <h:body>

        <a4j:status onstart="#{rich:component('statPane')}.show()"
            onstop="#{rich:component('statPane')}.hide()" />

        <a4j:commandLink styleClass="no-decor" execute="@this" render="@none"
            action="#{dummyBean.methodCall}"
            oncomplete="#{rich:component('popup')}.show()">
            <h:graphicImage value="/images/icons/common/edit.gif" alt="edit" />
        </a4j:commandLink>

        <h:form id="myform">
            <rich:popupPanel id="popup" modal="false" autosized="true"
                resizeable="false">

                <f:facet name="header">
                    <h:outputText value="Simple popup panel" />
                </f:facet>
                <f:facet name="controls">
                    <h:outputLink value="#"
                        onclick="#{rich:component('popup')}.hide(); return false;">
                X
            </h:outputLink>
                </f:facet>
                <p>Any content might be inside this panel.</p>

                <p>
                    The popup panel is open and closed from the javascript function of
                    component client side object. The following code <a href="#"
                        onclick="#{rich:component('popup')}.hide()">hide this panel</a>:
                    <f:verbatim>&#35;</f:verbatim>
                    {rich:component('popup')}.hide()
                </p>

                <a4j:commandButton value="Close" styleClass="no-decor"
                    execute="@this" render="@none" action="#{dummyBean.methodCall2}"
                    oncomplete="#{rich:component('popup')}.hide()"/>

                <br />
            </rich:popupPanel>
        </h:form>

        <rich:popupPanel id="statPane" autosized="true">
            <h:graphicImage value="/images/common/ai.gif" alt="ai" />
            Please wait...
        </rich:popupPanel>

    </h:body>
</ui:composition>
</html> 
```

# design-patterns - 数据结构：有没有类似于双向观察者模式的东西？

> ID：14594602
> 
> 赞同：1
> 
> 时间：2013-01-30T00:22:37.930
> 
> 标签：design-patterns, data-structures, observer-pattern

所以我有这样的场景，学生和课程

学生 A 就读于课程 1、2

学生 B 参加课程 1、2、3

学生 C 就读于课程 2

所以有两种事件：

学生 A 被删除 -> 需要通知两个对象：Course 1 和 Course 2

课程 1 取消 -> 需要通知两个对象：学生 A 和学生 B

我知道如果每个学生只能注册一门课程，观察者模式就可以工作，在这种情况下，我有一个观察者模式中每个课程对象的学生列表。

我想知道我是否应该做一些两种方式的观察者模式（学生保留课程列表，课程也保留学生列表）。那么处理这个问题的好方法是什么？主要关注的是速度/空间权衡（我现在最多能想到的是从 1 个学生到 1 组课程和 1 个课程到 1 组学生的双向哈希/树）。任何指针将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T01:24:33.047

您真正要问的是域模型中的级联语义。例如，如果删除了课程，是否应该删除学生？当然不是。如果学生被删除，课程是否应该被删除？不。

我认为您可能要考虑的是另一门课：注册。这表示学生 A 在日期 Y 注册了课程 X。然后，如果一门课程被取消，您将级联删除注册，然后当您去该学生查看他注册的内容时，您再也看不到该课程了。

此策略的另一个好处是，如果您想保留信息（他已注册并且课程已被取消），则在 Enrollment 类（这是一个 Association 类）中。

# actionscript-3 - as3 将 swf 阶段保存到桌面 - 仅适用于 IDE

> ID：14594603
> 
> 赞同：1
> 
> 时间：2013-01-30T00:22:37.717
> 
> 标签：actionscript-3, actionscript, flash

我在这里遵循了将舞台保存为 png 的提示（[flash AS3 是否有办法拍摄帧的快照，然后将其保存为 jpeg](https://stackoverflow.com/questions/9404723/is-there-a-way-for-flash-as3-to-take-a-snapshot-of-a-frame-then-save-it-as-jpeg)，但改用 PNGEncoder）。它在 Flash 中运行时有效 - 我得到一个对话框，询问将文件保存在哪里。但是在浏览器中，它只是在不显示对话框的情况下停止运行 - 并且在该命令之后不运行代码。在浏览器中使用此类代码是否存在安全问题？还是这里发生了其他事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:10:20.540

保存图像存在安全问题 - 它必须响应用户操作（即鼠标或键盘事件）

# remote-desktop - AHK模拟ctrl+alt+break退出远程桌面全屏模式

> ID：14594605
> 
> 赞同：3
> 
> 时间：2013-01-30T00:22:49.570
> 
> 标签：remote-desktop, autohotkey

我想用 AHK 来模拟`Ctrl`++ 。`Alt``break`

下面的代码什么都不做。我还粘贴了键历史记录，首先使用 Num - 然后实际按下一组三重奏键。AHK 键不起作用，而实际按下键起作用。两者生成的代码对我来说似乎相同，除了 Break 与 AHK 有 d & u。但这应该没关系。我还介绍了延迟，但这也不起作用。

```
SetKeyDelay, 2,2
NumpadSub::
send {LCtrl Down}{LAlt Down}{vk03sc146}{LCtrl Up}{LAlt Up}
return 
```

我还尝试使用 {CtrlBreak} 和以下在 Win XP 远程桌面中没有成功。发送！^{vk03sc146} 这段代码可以在我的win 7中找到。但是我需要远程访问Win XP。请帮忙。

```
6D  04A     d   1.33    Num -           
A2  01D i   d   0.00    Ctrl            
A4  038 i   d   0.02    Alt             
03  146 i   d   0.02    Break           
03  146 i   u   0.02    Break           
A2  01D i   u   0.02    Ctrl            
A4  038 i   u   0.02    Alt             
6D  04A     u   0.16    Num -           
74  03F     d   1.00    F5              
74  03F     u   0.09    F5              
74  03F     d   2.02    F5              
74  03F     u   0.13    F5              
74  03F     d   0.19    F5              
74  03F     u   0.11    F5              
A2  01D     d   1.31    Ctrl            
A4  038     d   0.00    Alt             
03  146     u   0.39    Break           
A2  01D     u   0.06    Ctrl            
A4  038     u   0.03    Alt             
74  03F     d   3.08    F5 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T14:18:22.937

`CapsLock`即使它在 RDP 之前启动，也可以从 AHK捕获键，它是 RDP 传递给其他键盘挂钩的唯一键。

这可以在本地机器上完成。当您在本地机器上而不是在远程机器上执行此操作时，您可以使用 AHK 获取 MSTSC 的窗口 id，并将恢复命令传递给窗口（不发送密钥，这非常不可靠）

```
;Get MSTSC window (this may have to be "ahk_class TSSHELLWND" for systems other than Win7)
If WinActive("ahk_class TscShellContainerClass") {
    WinGet, active_id, ID, A
    PostMessage, 0x112, 0xF120,,, ahk_id %active_id%   ; 0x112 = WM_SYSCOMMAND, 0xF120 = SC_RESTORE
} 
```

上述命令将使 MSTSC 从全屏中断。

在这里可以看到一个完整的例子（[http://code.ecomerc.com/Articles/RotateCube/](http://code.ecomerc.com/Articles/RotateCube/)），它用于从全屏中断 MSTSC 并旋转 Dexpot（一个 3d 窗口管理器）的立方体功能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T07:21:31.910

如果激活了 RDP 客户端的键盘钩子，则除非在 RDP 客户端之后启动脚本，否则不会使用任何 auhotkey 热键。

这是编写该行代码的更好方法；^!休息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-26T01:31:05.617

上面彼得的[答案](https://stackoverflow.com/a/14855592/7822932)的所有功劳，这是经过一小时搜索后迄今为止唯一有效的解决方案。我稍微修改了一下，让它稍微完整一点。

此 AHK 脚本允许使用`alt + capslock`退出全屏模式，然后在选择远程桌面窗口时，`alt + capslock`再次按恢复全屏。在主机上启动 AHK 脚本。

```
;Get MSTSC window (this may have to be "ahk_class TSSHELLWND" for systems other than Win7)
!Capslock::
T := !T
If WinActive("ahk_class TscShellContainerClass") {
    WinGet, active_id, ID, A
    if T
        PostMessage, 0x112, 0xF120,,, ahk_id %active_id%   ; 0x112 = WM_SYSCOMMAND, 0xF120 = SC_RESTORE
    else
        PostMessage, 0x112, 0xF030,,, ahk_id %active_id%   ; 0x112 = WM_SYSCOMMAND, 0xF030 = SC_MAXIMIZE
}
return 
```

# android - 在Android中设置自定义ListActivity的字体

> ID：14594606
> 
> 赞同：0
> 
> 时间：2013-01-30T00:22:55.210
> 
> 标签：android, fonts, listactivity

我有一个自定义 ListActivity 作为多项选择题，我正在尝试更改列表中项目的字体。这就是我所拥有的...

```
public class MultipleChoiceActivity extends ListActivity {

private TextView questionView;
private String[] items = { "a", "b", "c", "d" };

@Override
public void onCreate(Bundle savedInstanceState) {
    //do some stuff like populate items array from db

    setContentView(R.layout.multichoice_activity);
    setListAdapter(new ArrayAdapter(this, R.layout.custom_list_item, items));
    questionView = (TextView) findViewById(R.id.question);
    Typeface typeFace=Typeface.createFromAsset(getAssets(),"fonts/Schalk.ttf");
    questionView.setText(question);
    questionView.setTypeface(typeFace);
}

public void onListItemClick(ListView parent, View v, int position, long id) {
    userAnswer = position + 1;
} 
```

因此，我已经能够使用我的资产中的正确字体设置名为“问题”的 TextView，但我无法使用该资产为列表中的元素设置它。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:47:27.943

您需要为所需`TypeFace`的每个特定视图设置 。通常这意味着，至少，您需要为*适配器中*`TypeFace`的每个视图设置而不是其本身。*`ListView`*

# kohana - Kohana Formo 是否会阻止 CSRF

> ID：14594611
> 
> 赞同：0
> 
> 时间：2013-01-30T00:23:23.790
> 
> 标签：kohana, csrf

Kohana 的 Formo 模块会阻止 CSRF 吗？我还没有看到任何代码（令牌等）形成保护表单免受它的影响。那么，Formo 中是否有任何内置解决方案，或者我必须自己保护表单？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:31:11.883

Kohana 对 CSRF 保护有基本的支持。

检查这些链接：

文档：http: [//forum.kohanaframework.org/discussion/2052/csrf-helper/p1](http://forum.kohanaframework.org/discussion/2052/csrf-helper/p1)

论坛： http: [//kohanaframework.org/3.2/guide/api/Security#token](http://kohanaframework.org/3.2/guide/api/Security#token)

这基本上意味着您必须手动在表单中放置一个令牌`Security::token();`

像这样：

`echo Form::hidden('csrf', Security::token());`

然后，您可以通过验证检查处理表单的令牌：

```
$array->rules('csrf', array(
    'not_empty'       => NULL,
    'Security::check' => NULL,
)); 
```

# batch-file - 使用 .bat 文件集成到客户端

> ID：14594612
> 
> 赞同：0
> 
> 时间：2013-01-30T00:23:27.097
> 
> 标签：batch-file

我试图组合一个呈现可读信息的 .bat 文件程序。基本上，我们有一个名为 vSphere 的应用程序，它直接从 xml 文件中读取自定义脚本。所以有 xml 元素被传递到客户端。现在，我遇到了类似的情况，我们正在使用 vCloud 做同样的事情。不同之处在于 vCloud 只从 .bat 文件而不是 xml 文件中读取数据。如果我想做这样的事情会是什么样子。下面是我的伪代码，因为我对 .bat 并不完全熟悉文件语法。这是我如何呈现要由 vCloud 客户端读取的信息的方式吗？客户端已经知道如何读取 .bat 文件，我只需要一个 .bat 文件的控制结构示例来解决这个问题。

xml版本：

```
<_type>viss.CustomizationExample</_type>
<changeExample>1341932956</changeExample> 
```

.bat 文件版本：

```
@echo off
SET ChangeExample=1341932956
if changeExample==""(
echo changeExample==ChangeExample
) 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T08:52:38.713

此代码可能对您有用

```
@echo off   
set changeExample=1341932956  
echo %changeExample% 
```

如果您运行批处理文件，这将`changeExample 1341932956`在 cmd 屏幕上显示您想要的值...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T09:38:35.703

你快到了，只有几件事。

设置好后访问一个变量，没有任何特殊情况，你需要`%`在它的每一边都放 ' 来告诉 cmd 你想要它包含的值。

默认`if`情况下区分大小写，因此您必须首先确保您的变量拼写正确，并且在`if`条件末尾和括号之间需要一个空格。

如果这是批处理的正确格式（我不知道它实际想要读取什么），那么这是正确的语法

```
@echo off
SET ChangeExample=1341932956
if %ChangeExample%=="" (
echo changeExample==%ChangeExample%
) 
```

我假设您想要`echo`变量 contents 而不是 string `ChangeExample`，如果您只想让字符串删除`%`'s.

# file-upload - 如何使用 Netty 实现服务器将大文件上传存储到 HDFS？

> ID：14594615
> 
> 赞同：1
> 
> 时间：2013-01-30T00:24:05.903
> 
> 标签：file-upload, netty, blocking, hdfs

我要做的是使用 Netty 实现一个 Web 服务器，将上传到 HDFS 的大文件作为 HDFS 文件存储。

我的基本工作流程如下：

1.  最终用户向我的 Netty 服务器发送 HTTP PUT/POST 请求（有效负载为 1GB）

2.  服务器接受 HTTP 连接并解析方法/uri/headers

3.  服务器在 DFSClient 中调用 HDFS 创建文件并获取句柄（DFSClient.create 是阻塞调用）

4.  服务器在 HTTP 请求中接收上游的其余部分，并逐块写入 HDFS 句柄（将每个块写入 HDFS 句柄是一个阻塞调用）

5.  服务器关闭 HDFS 句柄并向客户端确认（关闭 HDFS 句柄是阻塞调用）

我在使上述步骤起作用时遇到问题。因为我不知道在 Netty 中有效地进行阻塞调用的最佳方法是什么（尽可能少地阻塞整个事件循环）。

谁能告诉我实现上述逻辑的正确方法？提前谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T05:47:18.403

If you need to block you will need to put an ExecutionHandler in front of the handler that will perform the blocking operation to not affect the other channels on the same IO-Thread.

# php - 解析错误：语法错误，意外的 '('，需要 T_STRING 或 T_VARIABLE 或 '$'

> ID：14594618
> 
> 赞同：1
> 
> 时间：2013-01-30T00:24:38.560
> 
> 标签：php, exception, exception-handling

下面的 PHP 函数产生了这个错误： Parse error: syntax error, unexpected '(', expecting T_STRING or T_VARIABLE or '$', on this line:`throw new ( '' . 'Illigal name for service name "' . $name . '" is given' );`

有谁知道出了什么问题？

```
function registerService($name, $provider) {
    if (strlen( $name ) < 1) {
        Exception;
        throw new ( '' . 'Illigal name for service name "' . $name . '" is given' );
    }

    $this->_Services[$name] = $provider;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:27:26.127

改变这个：

```
 Exception;
    throw new ( '' . 'Illigal name for service name "' . $name . '" is given' ); 
```

对此：

```
throw new Exception('Illegal name for service name "' .$name .'" is given' ); 
```

此外，通常你会在 try catch 块中抛出一个异常：

```
try {
    throw new Exception('Just testing');
} catch (Exception $e) {
    echo 'Caught exception: ',  $e->getMessage(), "\n";
}
//Output: Caught exception: Just testing 
```

# android - Android，我们可以以编程方式找到主要和次要外部存储的路径吗？

> ID：14594619
> 
> 赞同：1
> 
> 时间：2013-01-30T00:24:41.940
> 
> 标签：android, storage, android-sdcard

是否有任何 API 或任何方法可以分别找出主要和次要外部存储的路径？

请告诉我。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T02:02:46.553

不。“辅助外部存储”不是标准的（供应商扩展）。有一些环境变量可能有用，但这是设备/版本/相关的。您始终可以检查当前安装的内容并从那里开始。

# c++ - 我将如何以更面向对象的方式表示这一点？

> ID：14594621
> 
> 赞同：1
> 
> 时间：2013-01-30T00:24:47.687
> 
> 标签：c++, oop, hashtable

```
typedef char STR10[10+1];
typedef char STR20[20+1];

typdef struct Slot
{
    STR10 key;
    STR10 value;
};

const int MAX_SLOTS = 3;
const int MAX_BUCKETS = 30;

typedef struct Bucket
{

        short int count;
        short int overflow;
        Slot slots[MAX_SLOTS]; 
};

typedef Bucket HashTable[MAX_BUCKETS]; 
```

大多数情况下，我只是对最后一行的概念感到困惑。我知道我可以将结构更改为类，这很好，但最后一行对我来说很重要。它基本上是在说 HashTable 是一个桶数组。该代码是否足够好，或者有没有办法在 HashTable 类中表示它？

```
class HashTable 
{
private:
   Bucket table[MAX_BUCKETS];
} 
```

那会代表同样的想法吗？我真的很难开始这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T00:30:48.687

如果可以的话，我可以用[std::string替换 char 数组，用](http://en.cppreference.com/w/cpp/string/basic_string)[std::vector](http://en.cppreference.com/w/cpp/container/vector)替换Slot 数组，用枚举替换 define：

```
enum SlotSize
{
   MaxSlots = 3
};

enum BucketSize
{
    MaxBuckets = 30
};

struct Slot
{
    std::string key;
    std::string value;
};

struct Bucket
{

    int count;
    int overflow;
    std::vector<Slot> slots;
};

class HashTable 
{
private:
   std::vector<Bucket> table;
} 
```

# php - 正则表达式没有停在我认为应该的地方

> ID：14594628
> 
> 赞同：0
> 
> 时间：2013-01-30T00:25:16.360
> 
> 标签：php, regex

我不明白为什么这没有在我认为应该停止的地方停止。

这是示例字符串。

```
<div class="blah"><a href="www.foo.bar">foo bar</a></div>
<div class="blah2"><span><a href="www.bar.foo">bar foo</a></span></div> 
```

这种分组一遍又一遍地重复，所以我使用以下内容。

```
preg_match('@<div class="blah">.*</span></div>@', $page, $matches); 
```

它可以工作，但一次获得每个分组，而不是一次一个。我在这里错过了一些简单的东西吗？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T00:27:59.163

尝试：

```
<div class="blah">.*?</span></div> 
```

`.*`贪婪地匹配，所以它会`.*`在匹配正则表达式的其余部分之前尽可能多地封装在其中。 `.*?`不情愿地匹配，因此在继续匹配正则表达式的其余部分之前，它会尽可能少地匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T00:33:38.430

另一种解决方案是使用`U`( `PCRE_UNGREEDY`) 选项，默认情况下所有搜索都是不贪婪的：

```
preg_match('@<div class="blah">.*</span></div>@U', $page, $matches); 
```

# html - 为什么我不能让 960.gs 与 Meteor 一起正常工作？

> ID：14594632
> 
> 赞同：0
> 
> 时间：2013-01-30T00:25:25.960
> 
> 标签：html, css, meteor, 960.gs

我在让 CSS 框架[960.gs](http://960.gs/)与[Meteor](http://meteor.com)一起工作时遇到问题。我已将 reset.css 放在*lib/*文件夹中，以便它首先加载。之后，从*css/文件夹加载**960.css*和 *960_12_col.css* 。[但是，当我将http://960.gs/demo_24_col.html](http://960.gs/demo_24_col.html)中的示例（仅来自 body-tags 内部的内容）复制到我的 Meteor 应用程序中时，它根本不起作用。我不希望颜色和其他样式跟随，但网格系统应该可以工作。我已经检查过，所有内容都按正确的顺序加载，但找不到更多方法来解决这个问题。

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:31:40.973

这听起来可能很难过，但是您是否尝试过在演示页面上加载所有的 css？在您的 html 中从上到下排序是加载具有特异性概念的 css 的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T00:38:21.877

只是一个愚蠢的错误。该演示使用 24 列网格。我使用了 12 列网格文件。一旦我使用了 24 列，一切都解决了。*

# opentbs - 简化使用'getpart'参数来加速OpenTBS的子模板

> ID：14594633
> 
> 赞同：0
> 
> 时间：2013-01-30T00:25:37.057
> 
> 标签：opentbs, tinybutstrong

[作为我上一个问题](https://stackoverflow.com/questions/14573228/prevent-word-2010-from-saving-ogfxdata-base64-or-uuencoded-vml/14594215)的后续，我试图真正简化从 Word 2010 中创建的文件中`xml`提取的几个模板，`.docx`并在 OpenTBS 中用作子模板，以加快我的文档创建速度。子模板包含`mc:AlternateContent`我在主模板中使用的所有块，如下所示：

```
[LineItem.template;block=w:r;file='templates/[val].xml';getpart=(mc:AlternateContent)] 
```

我注意到多个 (20) 个大 (>100KB) 子模板会严重影响 OpenTBS 的速度，所以我想删除我不使用的代码（在 mc:AlternateContent 之外）。我已经计划通过 TBS 对我的模板进行其他处理并缓存简化版本，所以如果我可以使用 OpenTBS 的 getpart 功能同时从更大的模板中提取这些数据，那就太好了。这可能吗？

例如，为了能够将此（伪）代码放入我的处理中：

```
foreach($templates as $template){ //loop through xml templates
    $TBS->LoadTemplate($template);
    $simpleTemplate = $template->getpart('mc:AlternateContent'); 
    /* 
    / simpleTemplate now holds all the xml inside the mc:AlternateContent tags
    / (everything that would have been included in my template had I used attribute
    / getpart=(mc:AlternateContent) in my file inclusion) 
    */
    $simpleTemplate->save('simple/'.$template);
} 
```

*PS我应该[在TBS论坛](http://www.tinybutstrong.com/forum.php)上问这个吗？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:03:35.523

这是从一组文件（它们是 TBS 子模板）中提取 XML 元素的两种解决方案。

1)

TBS 有一个记录方法，使您能够获取 TBS 块的源代码，无论是否包含定义块的 TBS 字段。

见[$TBS->GetBlockSource()](http://www.tinybutstrong.com/manual.php#php_getblocksource)

如果您已经有该部分的 TBS 块，或者您可以在子模板中创建专用块，则可以使用此方法。

2)

否则，您可以使用`clsTbsXmlLoc`OpenTBS 提供的未记录类：

```
foreach ($templates as $template) {
   $contents = file_get_contents($template);
   $x = clsTbsXmlLoc::FindElement($contents, 'mc:AlternateContent', 0);
   if ($x) {
      $src = $x->GetSrc();
      // use $x->GetInnerSrc() in order to get the content of <mc:AlternateContent>
      // but wihtout the <mc:AlternateContent> tags.
      file_put_contents('simple/'.$template);
   } else {
      echo "Element no found in sub-template $template";
   }
} 
```

# openejb - 如何使用 Tomee/Openejb 设置预编译的 jsps？

> ID：14594638
> 
> 赞同：0
> 
> 时间：2013-01-30T00:26:18.433
> 
> 标签：openejb, apache-tomee

我有这个错误：

```
Caused by: org.apache.tomee.catalina.TomEERuntimeException: org.apache.openejb.OpenEJBException: Unable to load servlet class: org.apache.jsp.versionMessage_jsp: org.apache.jsp.versionMessage_jsp
    at org.apache.openejb.config.AnnotationDeployer$ProcessAnnotatedBeans.deploy(AnnotationDeployer.java:1924)
    at org.apache.openejb.config.AnnotationDeployer$ProcessAnnotatedBeans.deploy(AnnotationDeployer.java:1691)
    at org.apache.openejb.config.AnnotationDeployer.deploy(AnnotationDeployer.java:336)
    at org.apache.openejb.config.ConfigurationFactory$Chain.deploy(ConfigurationFactory.java:363)
    at org.apache.openejb.config.ConfigurationFactory.configureApplication(ConfigurationFactory.java:850)
    at org.apache.tomee.catalina.TomcatWebAppBuilder.startInternal(TomcatWebAppBuilder.java:881)
    ... 17 more
Caused by: java.lang.ClassNotFoundException: org.apache.jsp.versionMessage_jsp
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:264)
    at org.apache.openejb.core.TempClassLoader.loadClass(TempClassLoader.java:94)
    at org.apache.openejb.core.TempClassLoader.loadClass(TempClassLoader.java:67) 
```

这个设置：
1\. versionMessage.jsp 通过 org.apache.jasper.JspC 预编译
2\. web.xml 声明如下：

```
 <servlet>
        <servlet-name>org.apache.jsp.versionMessage_jsp</servlet-name>
        <servlet-class>org.apache.jsp.versionMessage_jsp</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>org.apache.jsp.versionMessage_jsp</servlet-name>
        <url-pattern>/versionMessage.jsp</url-pattern>
    </servlet-mapping> 
```

1.  如果我不预编译，只是原始的jsp包含在战争中，没有问题。

我会错过什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T03:22:19.470

我在[这里的 openejb 用户论坛中得到了答案](http://openejb.979440.n4.nabble.com/Tomee-Openejb-can-t-seem-to-find-jsp-precompiled-servlet-class-td4660481.html#a4660528)

# xcode4 - 无法使用构建变量在 Xcode 4 中获取最终二进制文件的完整路径

> ID：14594639
> 
> 赞同：0
> 
> 时间：2013-01-30T00:26:25.223
> 
> 标签：xcode4, build, mpi

我正在尝试从 Xcode 中运行命令行 MPI 程序，这需要我这样运行我的程序：

```
 /usr/bin/mpiexec -np 4 {my binary} 
```

我正在尝试编辑方案，使用[Xcode 4 文档](https://developer.apple.com/library/mac/#documentation/DeveloperTools/Reference/XcodeBuildSettingRef)并`xcodebuild -showBuildSettings`从命令行作为我的指南来定位正确的变量。我有一个运行 mpiexec 并传递以下参数的方案：

```
-np 4 $CONFIGURATION_BUILD_DIR/$TARGET_NAME 
```

如果我按照他们在 中的值`xcodebuild`，应该给我这个：

```
/Users/<excluding full path>/MyProject/build/Debug/MyTarget 
```

但是，当在 Xcode 中运行时，我得到了这个：

```
build/Debug/MyTarget 
```

以此为前缀：

```
-np 2 ${PROJECT_DIR}/${TARGET_BUILD_DIR}/${TARGET_NAME} 
```

导致完整路径***到路径名中的第一个空格，***然后仅此而已，这告诉我空间转义可能存在一些问题。

这还不足以让 mpiexec 找到我的二进制文件。使用 Xcode 方案和参数识别我构建的可执行文件的绝对路径的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:31:10.890

如果我这样做，它工作正常：

```
 -np 2 "${PROJECT_DIR}/${TARGET_BUILD_DIR}/${TARGET_NAME}" 
```

也许它只需要双引号来避免路径中的空格？

我暂时不接受这个，以防有人发布正确的答案，这对我来说就像一个黑客

# delphi - 从 Delphi 在 Outlook 中查找已删除的约会

> ID：14594643
> 
> 赞同：2
> 
> 时间：2013-01-30T00:26:40.883
> 
> 标签：delphi, outlook, appointment

我正在尝试将我们的程序与 Outlook 和下面的测试代码（有点工作）集成，但有以下问题。

在测试中，我能够添加约会。然后手动将约会移动到另一个日期/时间并重新运行测试程序，然后它移回（如预期的那样）。但...

当一个项目被删除时，下面的代码仍然能够找到该项目（不知何故！）。我什至从 Outlook 的已删除邮件文件夹中手动删除了该项目。

结果，既然它“找到”了约会，它就会尝试更新它，从而产生一个 AV。我怀疑我使用 find 功能有问题，但我想做的是使用 userProperties 从我们的系统中添加一些内容，以添加到 Outlook 中的约会项目中，并在需要时进行更新。但还需要能够处理用户可能手动从日历中删除项目的情况。

任何帮助将不胜感激。

```
folder := ns.GetDefaultFolder(olFolderCalendar);

if not VarIsNull(folder) and not VarIsEmpty(folder) then
begin
try
  appointment := folder.Items.Find('[MyRecProperty2]=' + quotedStr(1001));
  entryFound := true;
except
end;

if (not entryFound) or
  (varType(Appointment)=varNull) or
  (varType(Appointment)=varEmpty) then
begin
  appointment := folder.Items.Add(olAppointmentItem);
  prop := appointment.UserProperties.Add('MyRecProperty2',olText,True);
  prop.Value := '1001';
  NewAppointment(appointment);
end
else
begin
  showmessage('updating appointment!');
  FillAppointment(appointment, false);
end;

showmessage('saving appointment!');
appointment.Save;

//showmessage('display appointment!');
//appointment.Display(true); 
```

# c# - 为什么创建 GraphicsDevice 会导致实例化时出现“意外错误”？

> ID：14594647
> 
> 赞同：2
> 
> 时间：2013-01-30T00:27:04.203
> 
> 标签：c#, xna

我正在尝试在 Winforms MDI 应用程序中嵌入一个简单的 XNA 应用程序，我似乎遇到了问题。我正在关注[http://xbox.create.msdn.com/en-US/education/catalog/sample/winforms_series_1](http://xbox.create.msdn.com/en-US/education/catalog/sample/winforms_series_1)的示例，但我不确定自己做错了什么。

在我的 MDI 父级中，我通过以下方式实例化渲染表单：

```
 private void MainForm_Load(object sender, EventArgs e)
    {
        var render = new RenderForm();
        render.MdiParent = this;
        render.Show();
    } 
```

我的渲染表单的代码是：

```
public class RenderForm : Form
{
    private XnaRenderer _renderer;

    protected override void OnCreateControl()
    {
        if (!DesignMode)
            _renderer = new XnaRenderer(Handle, ClientSize.Width, ClientSize.Height);

        base.OnCreateControl();
    }

    protected override void OnPaint(PaintEventArgs e)
    {
        _renderer.RenderScene(null);
    }
} 
```

因此，当创建表单时，它会尝试创建我的`XnaRenderer`类的实例。 `ClientSize.Width`是 284 和`ClientSize.Height`261，`Handle`看起来是有效的。构造函数的代码是：

```
 public XnaRenderer(IntPtr windowHandle, int width, int height)
    {
        _graphicsService = new GraphicsDeviceService(windowHandle, width, height);

        SetViewport(width, height);
    } 
```

该类与示例代码中的`GraphicsDeviceService`类基本相同，但它不是单例。构造函数的代码是：

```
 public GraphicsDeviceService(IntPtr windowHandle, int width, int height)
    {
        _presentationParams = new PresentationParameters
        {
            BackBufferFormat = SurfaceFormat.Color,
            BackBufferHeight = Math.Max(height, 1),
            BackBufferWidth = Math.Max(width, 1),
            DepthStencilFormat = DepthFormat.Depth24,
            DeviceWindowHandle = windowHandle,
            PresentationInterval = PresentInterval.Immediate
        };

        _graphicsDevice = new GraphicsDevice(GraphicsAdapter.DefaultAdapter, GraphicsProfile.Reach,
                                             _presentationParams);
    } 
```

但是，当`GraphicsDevice`对象被实例化时，我得到以下信息`InvalidOperationException`：

> 发生意外的错误。

没有更多的异常消息，也没有内部异常，如果没有很多 XNA 知识，这很难调试。

有没有人看到我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T00:50:16.463

弄清楚了！

在我构建演示参数时，我需要添加`IsFullScreen = false`.

如果它给出了一个很好的异常消息会更容易弄清楚

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T00:42:24.180

尝试使用`OnHandleCreated`而不是`OnCreateControl`：

```
protected override void OnHandleCreated()
{
    if (!DesignMode)
        _renderer = new XnaRenderer(Handle, ClientSize.Width, ClientSize.Height);

    base.OnHandleCreated ();
} 
```

如果它不起作用，请尝试使用`HiDef`配置文件而不是`Reach`配置文件。

否则，我看不出有什么不对。

# c - C 中的指针。为什么该函数不起作用？

> ID：14594649
> 
> 赞同：-2
> 
> 时间：2013-01-30T00:27:09.803
> 
> 标签：c, function, pointers

> **可能重复：**
> [为什么 strcmp() 在其输入相等时返回 0？](https://stackoverflow.com/questions/595450/why-does-strcmp-return-0-when-its-inputs-are-equal)
> [当字符串相等时 strcmp 导致 false](https://stackoverflow.com/questions/13380181/strcmp-results-in-false-when-strings-are-equal)

我真的不明白为什么函数检查返回真！！！我使用 strcmp 来比较 char[] 指针（hello）和字符数组“bar”。

```
bool check(const char* word);
char pointer[] = "hello";  

int main (void)
{
    bool answer = check(pointer) ;

    if(answer == true)
        printf("true");
    else
        printf("false");

    return 0;
}

bool check(const char* word)
{
    printf(" word = %s ", word);

    if(strcmp( word , "bar"))
        return true;
    else
        return false;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T01:38:40.973

`I really can´t get why the function check return true!!!`

有趣的是，在原始的基本 C 代码中没有“真”或“假”（或“布尔”），不包括一些额外的头文件（如 stdbool.h）......但我离题了......

它没有返回真实。阅读手册[`strcmp()`](http://linux.die.net/man/3/strcmp)。您可以`man 3 strcmp`在 Linux 上执行此操作，也可以在谷歌搜索“man strcmp”。

手册会告诉你函数的返回值是：

> ...如果发现 s1（或其前 n 个字节）分别小于、匹配或大于 s2，则为小于、等于或大于零的整数。

请记住，对于条件检查，所有非 0 的整数值都将被视为“真”。也就是说，在这段代码中：

```
if(strcmp(word, "bar")) 
```

任何***不是***“bar”的词都将是“true”。你想要的匹配是它是否等于零：

```
if(strcmp(word, "bar") == 0) 
```

* * *

旁注，如果你要像你一样在全局范围内声明一些东西

```
char pointer[] = "hello"; 
```

不需要将其传递给函数，您可以全局访问它，这就是全局的要点。然而，全球人通常不被接受。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T00:29:27.307

`0`如果字符串相等，[strcmp](http://www.cplusplus.com/reference/cstring/strcmp/)返回。

你的条件应该被否定：

```
if(!strcmp( word , "bar"))
    return true; 
```

或比较`0`：

```
if(strcmp( word , "bar") == 0)
    return true; 
```

# jquery - jQueryUI 效果：多次点击问题

> ID：14594650
> 
> 赞同：0
> 
> 时间：2013-01-30T00:27:17.123
> 
> 标签：jquery, jquery-ui

我有一个需要同时弹跳和突出显示的框。

我使用此代码来实现效果并完美运行：

```
$(".box").click(function () {
    $("#id1").effect("highlight", {color:"#669966"}, 2000).effect("bounce", { times:3 }, 300).dequeue().unbind(click);
}); 
```

但是如果你在动画结束前第二次点击，盒子就不会变成原来的颜色。

这是 jFiddle 来测试它：http: [//jsfiddle.net/EyeD4/](http://jsfiddle.net/EyeD4/)

感谢您的意见

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T00:30:00.157

更改`unbind(click)`为`unbind('click')`。

您试图取消绑定一个名为 的变量`click`，但这是无效的。

[http://jsfiddle.net/ExplosionPIlls/EyeD4/1/](http://jsfiddle.net/ExplosionPIlls/EyeD4/1/)

不相关，但我建议分别使用`.on('click')`and`.off('click')`而不是`.click`and `.unbind('click')`。

# postgresql-9.2 - PostgreSQL：如何获得第一天？

> ID：14594652
> 
> 赞同：0
> 
> 时间：2013-01-30T00:27:37.737
> 
> 标签：postgresql-9.2, date-math

尝试将 T-SQL CTE 移植到 PostgreSQL。在 T-SQL 中`cast(0 as datetime)`返回

```
1900-01-01 00:00:00.000 
```

在 pg 中是否有等效的“副作用”来获得新纪元的第一天？

编辑：

```
to_timestamp(0) on my machine --returns 1969-12-31 19:00:00-05\. 

select '1970-01-01 00:00:00'::timestamptz --returns 1970-01-01 00:00:00-05
select '1970-01-01 00:00:00'::timestamp --returns 1/1/1970 which is the same as
select '1970-01-01 00:00:00'::date    -- returns 1/1/1970 
```

我希望转换时间戳返回 1970-01-01 00:00:00，即删除时区而不是时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T00:50:15.487

如果你的时代是指 1970 年 1 月 1 日 00:00（不是 1900 年），你可以这样做：

```
to_timestamp(0) 
```

要获取特定时区的时间，请尝试：

```
to_timestamp(0) AT TIME ZONE 'GMT' 
```

或者

```
to_timestamp(0) AT TIME ZONE 'UTC' 
```

# sql - 仅使用字母数字字符的 Postgresql 搜索

> ID：14594657
> 
> 赞同：6
> 
> 时间：2013-01-30T00:27:50.430
> 
> 标签：sql, postgresql

从搜索词中去除非字母数字字符非常简单，但是您如何将其与数据库中值的非字母数字字符进行比较？

例如，如果我搜索`stack's`，我怎样才能让它同时匹配`stacks`和`stack's`？

我需要对`what-do-i-do`下面的变量做什么才能使上述情况发生？

```
SELECT * FROM table WHERE <what-do-i-do> ilike 'stacks' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T00:34:00.380

一种方法是使用翻译：

```
select *
from table
where translate(lower(WhatIDo), translate(lower(WhatIDo), 'abcdefghijklmnopqrstuvwxyz', ''), '') = 'stacks' 
```

内部翻译查找所有非字母字符。然后外部将这些从字符串中删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T00:33:44.527

您可以尝试用通配符 ('%') 替换所有非字母数字字符实例。在您的示例中：

```
SELECT * FROM table WHERE data like 'stack%s' 
```

# spring - 是否可以在只有一个表单的单个页面上触发不同的 HTTP 方法？

> ID：14594658
> 
> 赞同：1
> 
> 时间：2013-01-30T00:27:58.003
> 
> 标签：spring, spring-mvc, http-method

到目前为止，我已经使用 jQuery AJAX（或 XMLHttp）处理了 HTTP 方法，`PUT`包括Spring （目前我正在使用 Spring 3.2.0）。我有一个关于使用这些方法的一般性问题。`DELETE`[`HiddenHttpMethodFilter`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/filter/HiddenHttpMethodFilter.html)`GET``POST`

基本上，我想使用**单个**表单在同一页面 (JSP) 上执行基本的数据库操作，例如 、`INSERT`和。在这种情况下，是否可以在适当的操作中触发这些方法？`EDIT``UPDATE``UPDATE`

 **例如，当用户按下删除按钮时，`DELETE`应该引发该方法，当他按下更新按钮时，`PUT`应该触发该方法，在按下插入按钮时，`POST`应该调用该方法，在检索数据时，该`GET`方法应该是使用，因此应该调用在控制器中映射的适当方法（再次在具有单个表单的同一页面上`<form:form>...</form:form>`）。

当然，通过 AJAX 是可能的，但在任何地方都使用 AJAX 是不合适的。

也许我错过了 RESTFul API 的一些重要方面。显然，这是不可能的（在不知不觉中）。实际答案是什么？

* * *

**编辑：**

假设，我想处理该`PUT`方法，那么 Spring 表单将如下所示。

```
<form:form id="mainForm" name="mainForm" method="put" action="Temp.htm" commandName="tempBean" enctype="multipart/form-data">
    <input type="submit" id="btnSubmit" name="btnSubmit" value="Submit"/>
</form:form> 
```

其生成的 HTML 如下所示。

```
<form id="mainForm" name="mainForm" action="Temp.htm" method="post" enctype="multipart/form-data">
    <input type="hidden" name="_method" value="put"/>
    <input type="submit" id="btnSubmit" name="btnSubmit" value="Submit"/>
</form> 
```

隐藏`<input type="hidden" name="_method" value="put"/>`字段被自动添加到处理`PUT`方法[`HiddenHttpMethodFilter`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/filter/HiddenHttpMethodFilter.html)

* * *

如果我现在需要提出该`DELETE`方法，则应分别修改表单及其生成的 HTML，如下所示。

```
<form:form id="mainForm" name="mainForm" method="delete" action="Temp.htm" commandName="tempBean" enctype="multipart/form-data">
   <input type="submit" id="btnSubmit" name="btnSubmit" value="Submit"/>
</form:form> 
```

生成的 HTML

```
<form id="mainForm" name="mainForm" action="Temp.htm" method="post" enctype="multipart/form-data">
    <input type="hidden" name="_method" value="delete"/>
    <input type="submit" id="btnSubmit" name="btnSubmit" value="Submit"/>
</form> 
```

在运行时动态执行此操作的可能性有多大？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T00:32:33.047

You could do something like:

```
<form id="mainForm" name="mainForm" action="Temp.htm" method="post" enctype="multipart/form-data">
    <input type="hidden" name="_method" value="delete"/>
    <input type="submit" name="btnUpdate" value="Update"/>
    <input type="submit" name="btnDelete" value="Delete"/>
    <input type="submit" name="btnCreate" value="Create"/>
</form> 
```

Then on your processing page just check to see which button submitted the form.**

# regex - 非工作 htaccess Rewriterule 以匹配 URL 的结尾

> ID：14594664
> 
> 赞同：1
> 
> 时间：2013-01-30T00:28:36.637
> 
> 标签：regex, .htaccess, mod-rewrite

我正在尝试编写一个 .htaccess 规则来重定向所有以结尾的 URL `Fizzle/xxxx_showabstract`（其中`xxxx`可以是任意字符串）。我写的规则是：

```
RewriteRule .*/Fizzle/(.*)_showabstract$ /abstractdisplay.php?journal=Fizzle&article=$1 
```

但这对我来说虽然简单明了，但似乎与预期的 URL 不匹配。我究竟做错了什么？所有帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T06:00:49.237

这可能有效。

```
RewriteRule ^.*/Fizzle/([^/]*)_showabstract$ /abstractdisplay.php?journal=Fizzle&article=$1 [L] 
```

您遇到的问题可能是由执行正则表达式的特定顺序引起的。但是如果你使用它，`^`它只会匹配一个完整的 URL。

# c++ - 如何使用终端参数在 Netbeans 中运行我的 C++ 应用程序？

> ID：14594668
> 
> 赞同：0
> 
> 时间：2013-01-30T00:29:14.840
> 
> 标签：c++, netbeans

我想用 2 个终端参数在 Netbeans 中运行我的 C++ 应用程序。我尝试在 Project Properties > Run 下查看，但我只看到以下屏幕。

![在此处输入图像描述](../Images/a8eb3553351bac1cd7fa9ad3a147a666.png)

我尝试修改所有字段，但没有一个更改终端参数。如何指定终端参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:40:10.873

你把它们放在`"${OUTPUT_PATH}"`in之后`Run Command`。例如，如果你想`1`作为参数传递，它应该是这样的：`"${OUTPUT_PATH}" 1`

# wcf - 默认网站在 TFS/Build 框上返回 503

> ID：14594671
> 
> 赞同：0
> 
> 时间：2013-01-30T00:29:32.507
> 
> 标签：wcf, iis, iis-7.5

好的，这里是：我们的开发人员正在 Win 7 机器上运行 VS 2012。我在装有 IIS 7.5 的 Win Server 2008 R2 机器上运行 TFS 11。它运行良好。但是，我的门控单元测试失败了。虽然我不完全确定问题出在哪里，但我似乎无法让默认网站或我在其下安装的应用程序运行。默认网站甚至不会返回 test.htm 文件，而是选择返回 503。到目前为止，我已经尝试过......

*   设置 WCF 以访问安装在盒子上的测试证书
*   更改应用程序池并授予其访问相关目录的权限
*   烧小供神斜IIS问题
*   其他各种我暂时想不起来的事情

我会在这篇文章的结尾听取 Sean Walsh 的建议：[http](http://forums.iis.net/t/1183179.aspx/2/10) ://forums.iis.net/t/1183179.aspx/2/10但我需要 SQL 报告服务才能使我的 TFS 正常工作。

想法？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T20:52:20.287

肖恩沃尔什把它钉牢了。事实证明，这是因为 SQL Server 报告服务在 TFS 的要求下使用该端口。我可以通过在虚拟机上设置一个专用的构建框来解决这个问题。

# matlab - 如何在 Matlab 中更改簇图的字体大小？

> ID：14594674
> 
> 赞同：2
> 
> 时间：2013-01-30T00:29:45.373
> 
> 标签：matlab, plot, font-size, heatmap, axis-labels

我一直在尝试手动或通过编写命令来更改 Matlab 中 clustergram 的字体大小。然而，他们都没有工作。我不知道我哪里做错了。我也在网上搜索过，但只能找到没有答案的类似问题。这是我尝试过的。

```
clusterobj = clustergram(data,'Rowlabel',c) % c is a cell array of strings for rowlabel
h = addYLabel(clusterobj);
set(h,'FontSize',2); 
```

或类似的东西

```
addYLabel(clusterobj, c, 'FontSize', 2); 
```

或者

```
set(gca,'FontSize',2); 
```

他们都没有工作。我只是希望将 c 数组中字符串的字体大小更改为更小的大小。有人知道吗？非常感谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T00:54:40.213

尝试这个

```
addYLabel(clusterobj , 'YourLabel', 'FontSize', 4) 
```

这将改变将出现在绘图右侧的 y 标签“YourLabel”的大小。

但是，如果要更改所有的文本标签，那么路要长一些。[使用我在TMW 支持页面](http://www.mathworks.com/support/solutions/en/data/1-8E9WQ9/?solution=1-8E9WQ9)中找到的代码：

```
% Make all handles visible. This is necessary because clustergram
% objects are created with 'HandleVisibility' property set to 'off'.
set(0,'ShowHiddenHandles','on')

% Get all handles from root
allhnds = get(0,'Children');

% Find the handles that correspond to clustergram objects
cgfigidx = strmatch('Clustergram',get(allhnds,'Tag'));
cffighnd = allhnds(cgfigidx);
fch = get(cffighnd,'Children');
fch = fch(strmatch('axes',get(fch,'Type')));

% Find all the text objects
txtobj = findall(fch,'Type','Text');

% Set the font size of all text objects in clustergram (at last!)
set(txtobj,'FontSize',5) 
```

**编辑：** 只需阅读@Jonas 评论，有一种更简单、更优雅的方式，而不是复杂的代码：

```
figureHandle = gcf;
%# make all text in the figure to size 14 and bold
set(findall(figureHandle,'type','text'),'fontSize',4,'fontWeight','bold') 
```

起首，乔纳斯先生。

# ruby-on-rails - 未在 HAML 中评估的 ActionView Ruby 代码

> ID：14594677
> 
> 赞同：1
> 
> 时间：2013-01-30T00:30:03.147
> 
> 标签：ruby-on-rails, ruby, haml, actionview

我在 HAML 视图中有以下 Rails 代码：

```
= form_tag ..... do
  - @someArray.each do |age|
    = age
    = check_box_tag "ages[#{age}]", @keys.has_key? age ? checked : unchecked 
```

我在这里要做的是根据`age`变量是否在控制器的实例变量中选中或取消选中此复选框`@keys`。但是，这会引发`syntax error, unexpected '\n', expecting tASSOC`错误。

任何想法为什么这个 Ruby 代码不评估？它`=`在 HAML 之后，这正是评估 Ruby 代码所需要的。我错了吗？对不起，我是 Rails 的新手，一开始事情很混乱。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:43:20.653

确定优先级后`@keys.has_key?(age)`，您必须注意方法中的参数**顺序**`check_box_tag`。请参阅[文档](http://apidock.com/rails/ActionView/Helpers/FormTagHelper/check_box_tag)：

`check_box_tag(name, value = "1", checked = false, options = {})`

所以试试：

```
= check_box_tag age, age, @keys.has_key?(age) ? true : false 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T00:34:20.907

`checked`并且`unchecked`在这里是变量；我想你想写`"checked"`and `"unchecked"`。

此外，优先级可能存在问题：`@a.b? c ? d : e`被评估为`@a.b?(c ? d : e)`，而不是`(@a.b?(c)) ? d : e`您可能希望的那样。

# delphi - Delphi在页面控件中按标签号显示框架

> ID：14594679
> 
> 赞同：4
> 
> 时间：2013-01-30T00:30:18.923
> 
> 标签：delphi, delphi-2007

我有一个独特的问题。我在 Windows XP 上使用 Delphi 2007。我有一个带有 TPageControl 组件的表单。我创建了一个要在该 PageControl 中显示的框架。我将创建许多其他将基于按钮单击事件显示的框架。无论如何都要使用框架的标签属性，以便在按下按钮时标签号可以传递给通用函数或过程，以便可以将函数或过程重用于所有按钮。另一个想法是使用 tabsheets 索引属性并将其与框架标记号匹配。任何建议都会很棒。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T01:12:37.360

您需要一个将标签号映射到框架类的函数，如下所示：

```
type
  TFrameClass = class of TFrame;

function GetFrameClass(const aClassID: Integer): TFrameClass;
begin
  case aClassID of
    1 : Result := TFrameFoo;
    2 : Result := TFrameBar;
    else Result := nil;
  end;
end; 
```

然后你可以创建框架：

```
var FrClass: TFrameClass;
    Frame: TFrame;
begin
  FrClass := GetFrameClass(btn.Tag);
  if(FrClass <> nil)then begin
     Frame := FrClass.Create(tabsheet);
     Frame.Parent := tabsheet;
  end; 
```

# pdf - PowerShell 和 ITextSharp - 基于模板创建新的 PDF

> ID：14594683
> 
> 赞同：1
> 
> 时间：2013-01-30T00:30:40.097
> 
> 标签：pdf, powershell, replace, itextsharp

我正在使用 ITextSharp 和 PowerShell 创建 PDF 文档。

我希望能够加载一个现有的模板 PDF 文件，该文件最好有占位符，然后用我提供的值替换占位符。

然后我想将带有更改的文档保存为新的 PDF。

这可能吗？

现在这是我用于创建 PDF 的代码

```
[System.Reflection.Assembly]::LoadFrom("c:\\itextsharp.dll")
[void][iTextSharp.text.pdf.PdfWriter]::GetInstance($Doc, [System.IO.File]::Create("c:\existing.pdf") )
# Need to edit $Doc (replace values, add elements) then save as new file
$Doc.Close() 
```

任何帮助表示赞赏。

谢谢，安德鲁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T06:53:54.353

您将使用该`AcroFields.SetFields`方法在可填写的 PDF 表单的每个字段中指定所需的值：

```
[System.Reflection.Assembly]::LoadFrom($iTextSharpLibFullname)

$reader = New-Object iTextSharp.text.pdf.PdfReader($templateFileFullname)

$stamper = New-Object iTextSharp.text.pdf.PdfStamper($reader, 
                                                     [System.IO.File]::Create($outputFileFullname)) 

$stamper.AcroFields.SetField('Field1_Name', 'Field1_Value')
$stamper.AcroFields.SetField('Field2_Name', 'Field2_Value')
#etc. for each field in your form...     

$stamper.Close() 
```

其中：
`$iTextSharpLibFullname`是对 iTextSharp.dll 的引用
`$templateFileFullname`是您的可填写 PDF 模板
`$outputFileFullname`的名称 表单是您将创建的 PDF 的名称

# drupal - Ubercart Marketplace 卖家自己的订单为空

> ID：14594685
> 
> 赞同：1
> 
> 时间：2013-01-30T00:30:44.637
> 
> 标签：drupal, ubercart, marketplace

x-2.11 和 Ubercart 市场 6.x-1.0-beta1。一切正常，但卖家看不到自己的订单。我搜索了解决方案，但找不到。我读过它可能是关于传导设置的。我仍然没有解决方案。我必须设置什么条件设置？或者它的解决方案是什么？谢谢。

# bash - 从文本中提取字段

> ID：14594690
> 
> 赞同：-4
> 
> 时间：2013-01-30T00:31:16.077
> 
> 标签：bash, sed, awk, grep

根据以下文件

*   打印屏幕上每条记录的第一个和第三个字段的脚本。

*   只是每条记录的第二个字段并将其存储在 file.txt

*   打印包含大写字符的行的第二个字段。

> 27、紫色、恐龙、136
> 
> 152,粉色,大象,136

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:39:53.730

```
awk -F, '{print $1,$3}' inputfile.txt 
awk -F, '{print $2}' inputfile.txt > file.txt
awk -F, '/[[:upper:]]/ {print $2}' inputfile.txt 
```

祝你的任务好运。希望TA不会找到这个帖子。

# imap - javamail IMAPS 连接上的 IOException 是什么意思？

> ID：14594695
> 
> 赞同：0
> 
> 时间：2013-01-30T00:31:32.290
> 
> 标签：imap, jakarta-mail, websphere-7, exchange-server

我正在尝试使用以下代码在端口 443 上使用 IMAPS 连接到交换服务器（在另一端已以这种方式配置）：. .

```
 props.setProperty("javax.net.ssl.trustStore", "C:/Program Files/Java/jdk1.6.0_30/jre/lib/security/cacerts");
            props.setProperty("javax.net.ssl.trustStorePassword", "changeit");
            props.setProperty("javax.net.ssl.trustStoreType", "jks");
            props.setProperty("javax.net.debug", "ssl");

            System.setProperties(props);

            props = System.getProperties();

            final Session session = Session.getInstance(props, null);
            session.setDebug(debug);
            com.sun.mail.imap.IMAPFolder inbox = null;
            Store store = null;

            store = session.getStore("imaps");
            store.connect(host, 443, username, password);
            inbox = (com.sun.mail.imap.IMAPFolder) store.getFolder("INBOX"); 
```

. . .

从我没有收到证书错误的事实来看，它们是从商店位置正确加载的。但是，一旦代码到达连接语句，我就会得到以下跟踪："

```
[29/01/13 18:23:02:811 CST] 0000007d SystemOut     O DEBUG: getProvider() returning javax.mail.Provider[STORE,imaps,com.sun.mail.imap.IMAPSSLStore,Sun Microsystems, Inc]
[29/01/13 18:23:02:812 CST] 0000007d SystemOut     O DEBUG: mail.imap.fetchsize: 16384

[29/01/13 18:18:42:814 CST] 0000007d SystemErr     R javax.mail.MessagingException;
nested exception is:
java.io.IOException
[29/01/13 18:18:42:814 CST] 0000007d SystemErr     R    at com.sun.mail.imap.IMAPStore.protocolConnect(IMAPStore.java:479)
[29/01/13 18:18:42:814 CST] 0000007d SystemErr     R    at javax.mail.Service.connect(Service.java:275)
[29/01/13 18:18:42:814 CST] 0000007d SystemErr     R    at com.scots.utils.MailPoller$1.run(MailPoller.java:74)
[29/01/13 18:18:42:815 CST] 0000007d SystemErr     R    at java.lang.Thread.run(Thread.java:738)
[29/01/13 18:18:42:815 CST] 0000007d SystemErr     R Caused by: java.io.IOException
[29/01/13 18:18:42:815 CST] 0000007d SystemErr     R    at com.sun.mail.iap.ResponseInputStream.read0(ResponseInputStream.java:99)
[29/01/13 18:18:42:815 CST] 0000007d SystemErr     R    at com.sun.mail.iap.ResponseInputStream.readResponse(ResponseInputStream.java:67)
[29/01/13 18:18:42:815 CST] 0000007d SystemErr     R    at com.sun.mail.iap.Response.<init>(Response.java:83)
[29/01/13 18:18:42:815 CST] 0000007d SystemErr     R    at com.sun.mail.imap.protocol.IMAPResponse.<init>(IMAPResponse.java:48)
[29/01/13 18:18:42:815 CST] 0000007d SystemErr     R    at com.sun.mail.imap.protocol.IMAPResponse.readResponse(IMAPResponse.java:122)
[29/01/13 18:18:42:815 CST] 0000007d SystemErr     R    at com.sun.mail.imap.protocol.IMAPProtocol.readResponse(IMAPProtocol.java:230)
[29/01/13 18:18:42:815 CST] 0000007d SystemErr     R    at com.sun.mail.iap.Protocol.<init>(Protocol.java:91)
[29/01/13 18:18:42:815 CST] 0000007d SystemErr     R    at com.sun.mail.imap.protocol.IMAPProtocol.<init>(IMAPProtocol.java:87)
[29/01/13 18:18:42:815 CST] 0000007d SystemErr     R    at com.sun.mail.imap.IMAPStore.protocolConnect(IMAPStore.java:446)
[29/01/13 18:18:42:816 CST] 0000007d SystemErr     R    ... 3 more 
```

没有别的！我到处搜索在连接执行期间抛出 IOException 的可能含义或原因，但到目前为止我一无所获。

鉴于堆栈跟踪没有更进一步，并且我自己的代码中引用的唯一行是连接语句本身（com.scots.utils.MailPoller$1.run(MailPoller.java:74)，我真的不有很多事情要做。

唯一想到的可能会引起麻烦的是，我已将邮件轮询机制放在另一个线程中（运行方法）。会不会惹麻烦？

您可以提供的任何想法将不胜感激！

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T04:28:34.827

异常中没有太多信息，但我认为根本原因很可能是您确实没有正确处理 SSL 连接。JavaMail [SSLNOTES.txt](http://www.oracle.com/technetwork/java/javamail145sslnotes-1562622.html)文件有一些调试技巧和指针。

# javascript - 显示/折叠文本

> ID：14594696
> 
> 赞同：0
> 
> 时间：2013-01-30T00:31:33.873
> 
> 标签：javascript, jquery, html, css

jsfiddle 中的结果可能不起作用，但在我的文档中可以。

[http://jsfiddle.net/hXzrA/](http://jsfiddle.net/hXzrA/)

起作用的是我的文本是隐藏的，当我单击**Read More...**时，它会显示段落中的更多文本。如果我再次单击“**阅读更多...”**，它会将段落中的文本折叠回正常状态。

我一直想弄清楚的是：

1.  将鼠标悬停在**Read More....**链接上。有点像蓝色突出显示，以便人们知道它是鼠标悬停。
2.  当文本显示时，**Read More...**文本应该消失，并且在现在显示的文本的底部，应该是**Collapse text...**（鼠标悬停时相同的蓝色突出显示）。Collapse 应该将文本恢复到它的折叠状态。我如何在以下方面实现这一目标：

    ```
    $(document).ready(function(){

      var open = false;
      $('.reveal').click(function() {
        if (open) {
          $(this).animate({height:'20px'}); 
        }
        else {
          $(this).animate({height:'100%'});
        }
        open = !open;
      });
    }); 
    ```

3.  此外，如果您能够让文本在显示/隐藏时内爆/爆炸，那也太好了。我一直在尝试和尝试，但无法做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:40:01.273

你不能`animate`，`100%`你需要先计算元素的原始高度而不是操纵高度。

[**这是工作的jsFiddle。**](http://jsfiddle.net/wey3a/1/)

```
var orgHeight = parseInt($('.reveal').css('height'));
$('.reveal').css('height','20px');

$('.reveal').click(function() {
    var target = parseInt($(this).css('height'));

    if (target != orgHeight) {
        $(this).animate({'height':orgHeight+'px'},500);
    }else{
        $(this).animate({'height':'20px'},500); 
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T00:43:20.530

看看它在这个小提琴中的简化程度：http: [//jsfiddle.net/syEM3/](http://jsfiddle.net/syEM3/)

Javascript：

```
$('.reveal').click(function() {
    $(this).next().slideToggle();
}); 
```

编辑：对于显示/折叠的效果：

```
$('.reveal').click(function() {
    $(this).slideUp(100).next().slideToggle();
    $(".collapse").slideDown(100);
});

$('.collapse').click(function() {
    $(this).slideUp(100).prev().slideToggle();
    $(".reveal").slideDown(100);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T00:39:53.227

对于悬停效果，只需使用 CSS：

```
.readmore:hover, .readless:hover {
   text-shadow: 2px 2px 3px blue;
} 
```

至于单独的链接，我认为将它们放在您的标记中更容易：

```
<a class="readmore">Click Here to READ MORE...</a>
TEXT TEXT TEXT
<a class="readless">Collapse Text...</a> 
```

然后只是`.show`//酌情基于`.hide` `.readmore`.`.readless``open`

[http://jsfiddle.net/ExplosionPIlls/hXzrA/4/](http://jsfiddle.net/ExplosionPIlls/hXzrA/4/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T00:40:14.030

在选择器上粘贴 :hover ，然后放置悬停规则。那应该在你的 css 中，而不是 jquery 函数中。

用一个类在“阅读更多”文本周围包裹一个跨度，在 jquery 中，在上面的 click 函数上，您可以执行以下操作： $('spanClass').hide();

恰恰相反： $('spanClass').show();

# ios - How to integrate Flurry analytics into iOS app

> ID：14594700
> 
> 赞同：6
> 
> 时间：2013-01-30T00:31:42.490
> 
> 标签：ios, flurry

I have `Flurry.h` and `libFlurry.a` added to my project from the Flurry 4.1 SDK. In my app delegate I have the following in `didFinishLaunchingWithOptions`.

```
[Flurry startSession:@"[apikey]"]; 
```

I've also added `[Flurry logEvent:@"callAPIPath"];` in the codebase such that it will get called 5 or 6 times in a typical session. However, I don't see any data on my Flurry dashboard. I'm testing in the iOS simulator and click the home button to quit the app since that was suggested in [https://stackoverflow.com/a/12054855/99683](https://stackoverflow.com/a/12054855/99683). I've given it over 24 hours to process but still no data.

I don't see any obvious problems in the debug output.

```
2013-01-29 16:04:04.579 TumTiki[7578:c07] Flurry: startSession called for the first time
2013-01-29 16:04:04.580 TumTiki[7578:c07] Flurry: Start session called with apiKey[APIKEY]
2013-01-29 16:04:04.580 TumTiki[7578:c07] Flurry: Trim white space and use apiKey[APIKEY]
2013-01-29 16:04:04.581 TumTiki[7578:c07] initial network status [1] ========= 
2013-01-29 16:04:04.583 TumTiki[7578:c07] FlurrySession: Add session with startTime[2013-01-29 23:04:37 +0000] to saved sessions
2013-01-29 16:04:04.587 TumTiki[7578:c07] FlurrySession: Add crashed former session
2013-01-29 16:04:04.589 TumTiki[7578:c07] FlurrySession: Initialized session from scratch with startTime[2013-01-30 00:04:04 +0000]
2013-01-29 16:04:04.590 TumTiki[7578:c07] FlurrySession: Created active session with API[APIKEY]
2013-01-29 16:04:04.590 TumTiki[7578:c07] FlurrySession: Session reports on close enabled[1]
2013-01-29 16:04:04.590 TumTiki[7578:c07] FlurrySession: Session reports on pause enabled[1]
2013-01-29 16:04:04.591 TumTiki[7578:c07] FlurrySession: Event logging enabled[1]
2013-01-29 16:04:04.591 TumTiki[7578:c07] FlurrySession: Sending sessions to server withTimeout[0]
2013-01-29 16:04:04.593 TumTiki[7578:c07] FlurrySession: Initial timestamp[2013-01-29 18:12:18 +0000] from saved source
2013-01-29 16:04:04.594 TumTiki[7578:c07] Flurry: Finish starting session with apiKey[APIKEY]
2013-01-29 16:04:04.603 TumTiki[7578:c07] FlurrySession: Recording event eventName[callAPIPath] with parameters[(null)]
2013-01-29 16:04:04.603 TumTiki[7578:c07] FlurrySession: Event count for eventName[callAPIPath] updated to count[1]
2013-01-29 16:04:04.603 TumTiki[7578:c07] FlurrySession: Event log for eventName[callAPIPath] updated
2013-01-29 16:04:04.604 TumTiki[7578:c07] FlurrySession: Recording event eventName[callAPIPath] with parameters[(null)] complete
2013-01-29 16:04:04.660 TumTiki[7578:c07] FlurrySession: dealloc session
2013-01-29 16:04:04.687 TumTiki[7578:c07] updated network status [1] ======== 
2013-01-29 16:04:04.786 TumTiki[7578:c07] Flurry: HTTP connection delegate received response[<NSHTTPURLResponse: 0xa4b82e0>]
2013-01-29 16:04:04.787 TumTiki[7578:c07] FlurrySession: async http response code: 200
2013-01-29 16:04:04.788 TumTiki[7578:c07] FlurrySession: application sent session[1]
2013-01-29 16:04:04.788 TumTiki[7578:c07] FlurrySession: Sent 1 session(s). 
```

[pressed home button]

```
2013-01-29 16:07:08.166 TumTiki[7578:c07] FlurrySession: Pause session with pauseTime[2013-01-30 00:07:08 +0000]
2013-01-29 16:07:08.166 TumTiki[7578:c07] FlurrySession: Ending session with endTime[2013-01-30 00:07:08 +0000]
2013-01-29 16:07:08.167 TumTiki[7578:c07] FlurrySession: ending all unterminated timed events with _endTime[2013-01-30 00:07:08 +0000]...
2013-01-29 16:07:08.167 TumTiki[7578:c07] FlurrySession: ...finished ending un-ended timed events.
2013-01-29 16:07:08.168 TumTiki[7578:c07] FlurrySession: Ending session with endTime[2013-01-30 00:07:08 +0000] complete
2013-01-29 16:07:08.168 TumTiki[7578:c07] Flurry: start background task
2013-01-29 16:07:08.169 TumTiki[7578:c07] FlurrySession: Sending sessions to server withTimeout[1]
2013-01-29 16:07:08.171 TumTiki[7578:c07] FlurrySession: Initial timestamp[2013-01-29 18:12:18 +0000] from saved source
2013-01-29 16:07:08.387 TumTiki[7578:c07] Flurry: HTTP connection delegate received response[<NSHTTPURLResponse: 0x1127cf30>]
2013-01-29 16:07:08.389 TumTiki[7578:c07] FlurrySession: async http response code: 200
2013-01-29 16:07:08.390 TumTiki[7578:c07] Flurry: stop background task 
```

I'm using the API Key provided by Flurry which is a 20 character string. Is there a different application key I should be using instead? I'm doing something wrong here but haven't been able to figure it out yet.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-22T00:33:16.043

原来我用错了钥匙。我需要应用程序特定的密钥，它可以在应用程序仪表板上的“管理”菜单项中找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T06:56:52.450

调试输出表明会话正在发送到 Flurry。如果您可以将您的集成片段和 API 密钥发送到 support@flurry.com 并让支持人员查看，那就太好了。

全面披露：我在 Flurry 的支持团队工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T02:44:27.970

20 个字符的字符串是正确的。也许是一个建议：试试设备。

尝试添加 FlurryAds.h、FlurryAdDelegate.h 和 libFlurryAds.a。除了 Flurry.h 和 libFlurry.a

# ruby-on-rails-3 - pg gem error with Ruby on Rails

> ID：14594701
> 
> 赞同：0
> 
> 时间：2013-01-30T00:31:48.033
> 
> 标签：ruby-on-rails-3, postgresql, bundler, pg

I'm on Mac OS X 10.8.2\. I install Ruby+RVM using the RailsInstaller, so I am currently on ruby-1.9.3-p194\. My application uses Rails 3.2.11.

When I run bundle install, here's the error I see:

```
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /usr/local/rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb --with-pg-config=/usr/bin/pg_config
Using config values from /usr/bin/pg_config
checking for libpq-fe.h... yes
checking for libpq/libpq-fs.h... yes
checking for pg_config_manual.h... yes
checking for PQconnectdb() in -lpq... yes
checking for PQconnectionUsedPassword()... yes
checking for PQisthreadsafe()... yes
checking for PQprepare()... yes
checking for PQexecParams()... yes
checking for PQescapeString()... yes
checking for PQescapeStringConn()... yes
checking for PQescapeLiteral()... yes
checking for PQescapeIdentifier()... yes
checking for PQgetCancel()... yes
checking for lo_create()... yes
checking for pg_encoding_to_char()... yes
checking for pg_char_to_encoding()... yes
checking for PQsetClientEncoding()... yes
checking for PQlibVersion()... yes
checking for PQping()... yes
checking for rb_encdb_alias()... yes
checking for rb_enc_alias()... no
checking for PGRES_COPY_BOTH in libpq-fe.h... no
checking for PGRES_SINGLE_TUPLE in libpq-fe.h... no
checking for struct pgNotify.extra in libpq-fe.h... yes
checking for unistd.h... yes
checking for ruby/st.h... yes
creating extconf.h
creating Makefile

make
compiling pg.c
pg.c: In function ‘Init_pg_ext’:
pg.c:384: error: ‘PQPING_OK’ undeclared (first use in this function)
pg.c:384: error: (Each undeclared identifier is reported only once
pg.c:384: error: for each function it appears in.)
pg.c:386: error: ‘PQPING_REJECT’ undeclared (first use in this function)
pg.c:388: error: ‘PQPING_NO_RESPONSE’ undeclared (first use in this function)
pg.c:390: error: ‘PQPING_NO_ATTEMPT’ undeclared (first use in this function)
make: *** [pg.o] Error 1 
```

Please note that this is not an issue with pg_config. The responses to similar questions here on StackOverflow all indicate that this binary is missing (or is not found), hence the issue for the error. This seems to be a different problem, as far as I can see.

Any ideas on how I can go about fixing this issue?

Thanks!

Ringo

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T21:47:56.390

我使用自制软件安装 pg 并解决了我的问题：

```
$ brew install postgres 
```

# xcode - Does XCode or gcc have a macro for developer name?

> ID：14594702
> 
> 赞同：1
> 
> 时间：2013-01-30T00:31:48.563
> 
> 标签：xcode, gcc

XCode obviously knows my name because it puts it at the top of each new file I create (created by Quentin Liedtke) and also has my first name in the xcuserdata folder (Quentin.xcuserdatad).

I'd like to be able to harness this in my code. Is there a preprocessor macro or configuration function or some other way that I can get this string in my code?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T18:30:24.720

我找到了自己问题的答案：

在 Build Settings -> Preprocess Macros 添加：

```
DEVELOPER_NAME=@\""$USER"\" 
```

然后它可以在代码中使用：

```
NSLog("%@", DEVELOPER_NAME); 
```

# node.js - ubuntu server time

> ID：14594704
> 
> 赞同：0
> 
> 时间：2013-01-30T00:31:57.837
> 
> 标签：node.js, ubuntu

I have a ubuntu server on aws, and when I do `new Date().getTime()` on the server the time seems a bit off (a couple of minutes).

How do I get it to be more accurate.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T00:39:22.863

```
sudo apt-get install ntp 
```

有关更多信息，请参阅[文档](https://help.ubuntu.com/community/UbuntuTime)。

# c# - Getting the watch_later as playlist in youtube api

> ID：14594705
> 
> 赞同：0
> 
> 时间：2013-01-30T00:32:06.783
> 
> 标签：c#, youtube-api

How do you do it? I simply can't figure it out :P

Here's how i get the standard playlists

```
Feed<Playlist> feed = mainRequest.Get<Playlist>(new Uri("https://gdata.youtube.com/feeds/api/users/default/playlists"));
Playlist playlist = feed.Entries.ElementAt<Playlist>(0); 
```

But using the same method on getting the watch_later playlist like so

```
Feed<Playlist> feed = mainRequest.Get<Playlist>(new Uri("https://gdata.youtube.com/feeds/api/users/default/watch_later")); 
```

returns the videos in the watch_later playlist... i've tried pretty much everything i could come up with and nothing works. So how to do it?

I need the playlist since i'm trying to add videos to it.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T06:46:05.333

如果您只是想查找播放列表 id，您可以使用数据 api 的 v3，您可以使用[Channels List](https://developers.google.com/youtube/v3/docs/channels/list)方法。

使用 oAuth 进行身份验证后，可以在 items.contentDetails.relatedPlaylists.watchLater 中找到播放列表

我不太了解 C#，但 url 本身是：

> [https://www.googleapis.com/youtube/v3/channels?part=contentDetails&id={CHANNEL_ID}&key={YOUR_API_KEY}](https://www.googleapis.com/youtube/v3/channels?part=contentDetails&id=%7BCHANNEL_ID%7D&key=%7BYOUR_API_KEY%7D)

然后，您可以使用[播放列表插入](https://developers.google.com/youtube/v3/docs/playlists/insert)方法添加视频。

# playframework-2.0 - install play-authenticate plugin

> ID：14594708
> 
> 赞同：1
> 
> 时间：2013-01-30T00:32:18.117
> 
> 标签：playframework-2.0, play-authenticate

It seems the "play-authentication" plugin is not installed if i follow instructions at github [https://github.com/joscha/play-authenticate/blob/master/samples/java/Getting%20Started.md](https://github.com/joscha/play-authenticate/blob/master/samples/java/Getting%20Started.md)

my eclipse IDE cannot find packages starting with "com.feth". i add the dependencies to Scala.build as described in readme above, then run clean and dependencies then compile..but the com.feth packages are not found. which means the play-auth plugin was not installed correctly. i wonder if there is a way to install the play-authenticate module correctly . am i missing something in the beside what is mentioned in readme above? it seems both dependencies of deadbolt-2 and play-authenticate are not resolved and installed. i also remarked a '%%' in the dependencies declaration in Scala.Build. but even if i use a single '%' the dependencies are not resolved and plugins are not installed. any help is much appreciated

my /project/Scala.Build file is below:

```
import sbt._
import Keys._
import PlayProject._

object ApplicationBuild extends Build {

    val appName         = "r2s2"
    val appVersion      = "1.0-SNAPSHOT"

 val appDependencies = Seq(
      "play-aws"      % "play-aws_2.9.1"      % "0.1",
      "be.objectify"  %%  "deadbolt-2"        % "1.1.3-SNAPSHOT",
      "com.feth"      %%  "play-authenticate" % "0.2.3-SNAPSHOT"
    )

    val main = PlayProject(appName, appVersion, appDependencies, mainLang = JAVA).settings(

      resolvers += Resolver.url("Objectify Play Repository", url("http://schaloner.github.com/releases/"))(Resolver.ivyStylePatterns),
      resolvers += Resolver.url("Objectify Play Repository", url("http://schaloner.github.com/snapshots/"))(Resolver.ivyStylePatterns),

      resolvers += Resolver.url("play-easymail (release)", url("http://joscha.github.com/play-easymail/repo/releases/"))(Resolver.ivyStylePatterns),
      resolvers += Resolver.url("play-easymail (snapshot)", url("http://joscha.github.com/play-easymail/repo/snapshots/"))(Resolver.ivyStylePatterns),

      resolvers += Resolver.url("play-authenticate (release)", url("http://joscha.github.com/play-authenticate/repo/releases/"))(Resolver.ivyStylePatterns),
      resolvers += Resolver.url("play-authenticate (snapshot)", url("http://joscha.github.com/play-authenticate/repo/snapshots/"))(Resolver.ivyStylePatterns),
      resolvers += "Local Play Repository" at "/home/othman/play-2.0.4/repository/local"
    )

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T07:12:56.130

当您向 play 项目添加新的依赖项时，首先您必须使用“**重新加载**”命令从 Internet 下载更新的 jar，然后再次触发“ **eclipse** ”命令以重新创建与 eclipse 相关的配置文件。然后你应该能够在你的 Eclipse 类路径中找到更新的 jar。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-04T17:56:15.897

在尝试将播放身份验证依赖项添加到我的项目时，我遇到了与 Play-2.2.1 类似的问题。上面提到的[入门指南](https://github.com/joscha/play-authenticate/blob/master/samples/java/Getting%20Started.md)建议使用这样的解析器：

```
resolvers += Resolver.url("play-authenticate (snapshot)", url("http://joscha.github.com/play-authenticate/repo/snapshots/"))(Resolver.ivyStylePatterns) 
```

但我终于发现 Resolver.ivyStylePatterns 不起作用！使用此设置，我总是收到“未解决的依赖项”错误。

适合我的解决方案：

```
resolvers += Resolver.url("play-authenticate (snapshot)", url("http://joscha.github.io/play-authenticate/repo/snapshots/"))( Patterns("com.feth/[module]/[revision]/[type]s/[artifact].[ext]") ) 
```

更改列表和要点：

1.  github 的顶级域从 com 更改为 io（但旧的看起来也可以）
2.  而不是 Resolver.ivyStylePatterns 我使用我自己的 Patterns helper 构建的模式。您可以在 ivy 文档中找到有关令牌的更多信息。
3.  注意！我不使用 [organization] 令牌，因为它以 'com/feth' 结尾 - 而不是 github 需要的 'com.feth'。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T15:04:55.360

如果您更改 Build.scala，您必须使用 reload 命令或重新启动播放环境。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T14:29:54.363

在我看来，您没有将“com”文件夹复制到正确的位置，这会导致该错误。它应该被复制到/app/com。不确定这是否是您的问题，您可能已正确完成此操作。

# msbuild - Solution Files with MSBuild With TFS2012 on large projects

> ID：14594709
> 
> 赞同：0
> 
> 时间：2013-01-30T00:32:19.290
> 
> 标签：msbuild

I came across this article and wondered if there are any changes in this for TFS2012 and .Net4.5 version of MSBuild?

[http://msdn.microsoft.com/en-us/magazine/dd483291.aspx#id0100082](http://msdn.microsoft.com/en-us/magazine/dd483291.aspx#id0100082)

Did they make solutions more managable for large projects?

Or is compiling .csproj files still best practice using traversal targets ?

Double B

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:13:41.003

我假设您的意思是从解决方案文件构建大量项目。

VS2012 中的解决方案与它们一直以来的相同，它们只是项目的容器。如果您使用 TFS 自动化构建，那么您将使用 Windows 工作流来创建构建定义。但是，如果需要，您仍然可以创建自己的 msbuild 项目文件并创建要构建的项目顺序。MSBuild 在技术上不知道解决方案文件是什么，因此它会在构建期间为您转换。

您引用的文章来自 2009 ，但如果您想深入了解 msubild 项目文件并完全控制您的构建功能，它仍然很好。

# javascript - How can I get the Rails asset pipeline to produce source maps?

> ID：14594717
> 
> 赞同：44
> 
> 时间：2013-01-30T00:33:02.087
> 
> 标签：javascript, ruby-on-rails, heroku, asset-pipeline, sprockets

I'd like to have Rails produce source maps alongside the compiled coffeescript/minified JS, for better error logging. There doesn't seem to be comprehensive documentation on the net on how to do this, yet, though. Has anyone done this?

I'm on Rails 3.2 and Heroku.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-01-08T21:55:27.513

Rails 支持缩小 JavaScript 的源映射！Rails 依赖[Sprockets](https://github.com/rails/sprockets)进行资产编译，并且在[此 pull request](https://github.com/sstephenson/sprockets/pull/311)中将 source maps 支持添加到 Sprockets 中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-28T04:53:13.167

如果您真的不想要源映射，而只是想要**咖啡脚本编译异常中的行号，**请尝试以下操作：

过去，仅在 Gemfile 中包含咖啡轨会在原始咖啡脚本源中产生带有行号的异常。然后，它们以无行号的异常消失了。我做了一些挖掘，发现`coffee-script-source`1.5.x 在编译异常中给出了行号，而`coffee-script-source`1.6.x 没有。我相信这是一个错误，如果这在未来被“修复”，我不会感到惊讶。

```
# Gemfile
gem 'coffee-rails', '~> 4.0.0'
  gem 'coffee-script-source', '~> 1.5.0' # 1.6 doesn't include line numbers in exceptions 
```

然后你会得到像 ('coffee-script-source', '~> 1.5.0') 这样的异常

```
Showing /Users/.../app/views/layouts/application.html.erb where line #12 raised:

SyntaxError: missing } on line 15
  (in /Users/.../app/assets/javascripts/app.js.coffee) 
```

而不是 ('coffee-script-source', '~> 1.6.3')

```
Showing /Users/.../app/views/layouts/application.html.erb where line #12 raised:

SyntaxError: missing }
  (in /Users/.../app/assets/javascripts/app.js.coffee) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-30T12:49:08.667

测试了这个。有用。[https://github.com/markbates/coffee-rails-source-maps](https://github.com/markbates/coffee-rails-source-maps)。但是，它会使您的资产渲染速度慢得多。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-24T07:02:39.673

这看起来应该可以工作：[http ://alexspeller.com/2012/09/15/Source_maps_for_coffeescript_in_rails.html](http://alexspeller.com/2012/09/15/Source_maps_for_coffeescript_in_rails.html)

不过，请记住最后的警告：

> **重要提示**：这个相当残酷的 hack 替换了普通的 coffeescript 编译器，它使用的是 CoffeeScriptRedux 编译器，实际上这还没有完成。这只是一个概念证明，您可能不应该使用它。

所以我不建议在生产环境中运行它，但如果你有一个暂存环境（也在 Heroku 上，也有缩小的 Javascript），它可能会很有用。

# linux-device-driver - ioctl failing "No such File or Directory"

> ID：14594723
> 
> 赞同：0
> 
> 时间：2013-01-30T00:33:21.290
> 
> 标签：linux-device-driver, embedded-linux, ioctl

I am trying to control a LED on a custom board. I have written the device driver and successfully loaded it. I have created a device file in /dev directory with the correct major number. Then I wrote a program in user plane to control the LED on the board, but my ioctl is failing with error number as 2 (No such File or Directory), the file descriptor returned is 3\. Below is the application in user space.

```
int main(int argc, char **argv)
{
    struct  s_LEDControl sLedControlParam;  
    int     ledNumber;
    int     command;
    int     fDDevice;
    int     ioctlReturn;

    ledNumber   = atoi(argv[1]);
    command     = atoi(argv[2]);

    /* Prepare the message to be sent to Kernel Space */
    sLedControlParam.led = ledNumber;
    sLedControlParam.cmd = command;

    /* Open the device */
    fDDevice = open("/dev/newdevice_drv", O_RDWR);

    if(fDDevice == -1)
    {
         printf("ERROR: Cannot open the device /dev/newdevice_drv\n");
         exit(0);
    }

    ioctlReturn = ioctl(fDDevice, c_controlLED1, &sLedControlParam);

    if(ioctlReturn != 0)
    {
         printf("ERROR: ioctl failed Reason:%s FD:%d\n", strerror(errno), fDDevice);
    }

    close(fDDevice);
    return 0;
} 
```

Just to check if something was wrong with the file descriptor, I passed a dummy file descriptor to ioctl and I got the correct error number. I am new to linux and device drivers, any help would be appreciated.

The above C program is cross compiled to PPC environment.

Below is some part of the driver code

```
MODULE_LICENSE("XXX");
MODULE_DESCRIPTION(DRIVER_DESC);
MODULE_AUTHOR(DRIVER_AUTHOR);
MODULE_SUPPORTED_DEVICE("XXXX");

/** Assign device functions to file_operation structure */
struct file_operations fops= {
        .owner=THIS_MODULE,
        .open=device_open,
        .release=device_release,
        .read=device_read,
        .write=device_write,
        .unlocked_ioctl=device_ioctl,
        .llseek=NULL,
};

static int device_ioctl( struct inode *inode, struct file *filp, unsigned int cmd, unsigned long arg)
{
        enum e_FPGACommand e_cmd;
        e_cmd = (enum e_FPGACommand)cmd;

        printk("DEBUG: device_ioctl entered\n");

        switch(e_cmd)
        {
            case c_controlLED1: controlLED1_ioctl(arg);
            break;

            default: printk("ERROR: Invalid command %d\n", e_cmd);
                     return INVALID_IOCTL;
            break;
        }

        printk("DEBUG: device_ioctl exited\n");

        return OK;
}

static int controlLED1_ioctl(unsigned int arg)
{
    struct s_LEDControl *sLedControlParam;
    int result;

    sLedControlParam = (struct s_LEDControl *)kmalloc(sizeof(struct s_LEDControl), GFP_KERNEL);

    if(sLedControlParam == GLO_NULL)
    {
        printk("ERROR: Memory allocation failed in controlLED1_ioctl\n");
        return FAILURE_MEMORY_ALLOCATION;
    }

    result = copy_from_user(sLedControlParam, (struct s_LEDControl *)arg, sizeof(struct s_LEDControl));

    if(result > 0) 
    {
        printk("ERROR: copy_from_user in controlLED1_ioctl returned unfinished bytes\n");
        kfree(sLedControlParam);
        return FAILURE_COPY_FROM_USER;
    }

    if(sLedControlParam->cmd == On)
    {
        /* On - Do something */
    }

    return OK;
} 
```

I can't see any error messages, when the device driver is loaded I get all the prints. When I try to run my application I can see that the device was opened and immediately closed but can't see any prints from my ioctl function.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T07:56:19.873

检查这个[答案](https://stackoverflow.com/questions/1063564/unlocked-ioctl-vs-normal-ioctl/1063590#1063590)。

你有

```
static int device_ioctl( struct inode *inode, struct file *filp, unsigned int cmd, unsigned long arg) 
```

但他说必须

```
static long device_ioctl(struct file *file, unsigned int cmd_in, unsigned long arg) 
```

我还没有验证它，但也许它有帮助。我只是好奇，因为它以前从未见过 unlocked_ioctl。

# .net - Is there anything similar to Kirby or Jekyll for .NET?

> ID：14594724
> 
> 赞同：3
> 
> 时间：2013-01-30T00:33:30.613
> 
> 标签：.net, content-management-system, jekyll

I'm looking into CMS solutions for my company (Because I'm sick of coding press releases and other things that people should be able to do themselves). I've run into [Kirby](http://getkirby.com) and [Jekyll](http://jekyllrb.com/) that generate database-free sites that can be edited through standard markdown. This is very appealing to me and I think it could be a great solution for our team but the problem is we run on .NET and it's very unlikely that we will change anytime soon as it would require some serious restructuring and our resource are currently tied up with other things.

I was just wondering if there are any comprable solutions out there for .NET?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T21:42:54.160

留意[椒盐卷饼](https://github.com/Code52/pretzel)：

> 一个简单的、可插入的站点生成工具，适用于 .NET 开发人员和 Windows 用户

[https://github.com/Code52/pretzel](https://github.com/Code52/pretzel)

# api - 如何跟踪谷歌方向api中的替代路线？

> ID：14594725
> 
> 赞同：1
> 
> 时间：2013-01-30T00:33:36.003
> 
> 标签：api, maps

这不起作用：

```
directionsDisplay.setDirections(response.routes[1]); 
```

这有效：

```
directionsDisplay.setDirections(response); 
```

你能解释一下这个原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T16:02:02.967

您需要设置路线索引。要显示第二条路线，请使用：

```
var route_num = 1;
var first_load = false;
directionsDisplay.setRouteIndex(route_num);
if (first_load) {
    // only execute this when the directions are first displayed
    directionsDisplay.setDirections(objRoutesResponse);
} 
```

# iphone - PhoneGap中的Sencha键盘在隐藏时会导致间隙

> ID：14594729
> 
> 赞同：0
> 
> 时间：2013-01-30T00:33:45.673
> 
> 标签：iphone, cordova, extjs

最近，当我隐藏键盘时，我的 Phonegap + Sencha 应用程序在屏幕底部留下了一个空白区域，从而导致了一些问题。如果我在隐藏键盘之前滚动浏览多个字段，这最终会成为一个很大的空间。请帮忙！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T17:32:59.443

所以我发现我的问题可能与其他任何人的不同，但如果这适用于你，我希望它有所帮助。

问题是我在加载指示器中使用了初始图像。它位于 index.html 中，是加载 sencha 应用程序时的占位符。我的初始图像延伸到屏幕下方 20 像素左右，当键盘隐藏时，sencha 应用程序的主面板将重置为屏幕底部上方 20 像素。

解决方案：如果您使用启动画面作为加载指示器，请将其设为底部：0px。

# c# - 使用 ASP .NET MVC WebGrid打印标签

> ID：14594733
> 
> 赞同：0
> 
> 时间：2013-01-30T00:33:54.773
> 
> 标签：c#, asp.net-mvc, webgrid

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:44:44.183

它不会是可见的，它没有特定的风格（正如@Travis 所说），而且你`<a>`是空的，我的意思是开头`<a>`和结尾之间`</a>`没有任何东西，这就是为什么什么都看不到，试着放你可能会看到里面的一些文字

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T00:39:13.670

给它一些基本的最小样式？这是一个空锚标记的简单示例。

演示：http: [//jsfiddle.net/v6S5m/1](http://jsfiddle.net/v6S5m/1)

标记：

```
<a 
  href="http://www.google.com"
  style="display:inline-block;min-height: 10px; min-width:20px;background-color:blue;"
</a> 
```

# permissions - 编辑器更改权限的能力是否可以在任何 Docs/Drive 的 API 中设置（可见）？

> ID：14594734
> 
> 赞同：0
> 
> 时间：2013-01-30T00:33:56.207
> 
> 标签：permissions, google-drive-api

在 Google Drive 中，当我与其他编辑者共享内容时，我可以限制他们更改他人权限或移动项目的能力。可以通过 API 或 SDK 获得吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:50:04.653

是的，您要修改 writersCanShare 属性：

[https://developers.google.com/drive/v2/reference/files#resource](https://developers.google.com/drive/v2/reference/files#resource)

# php - 使用 PHP 动态生成 JavaScript

> ID：14594739
> 
> 赞同：0
> 
> 时间：2013-01-30T00:34:33.117
> 
> 标签：php, javascript

我通常包括这样的javascript：

```
<script type="text/javascript" src="js/somejs.js"> 
```

有没有这样的方法：

```
<script type="text/javascript" src="js/somephp.php?js=somejs"> 
```

以便 PHP 脚本回显自定义生成的字符串或请求名称的文件

如果这是可能的，基本的 php 语法应该如何？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T00:39:07.367

是的，这是可能的。标签不关心它指向的`script`URL 是否以 '.js' 结尾。如果您将它指向某个将提供有效 javascript 的 URL，那么无论该 URL 是否以“.js”或“.php”或其他任何内容结尾，以及提供它的机制是否是您的 apache 服务器服务，您都很好直接来自文件系统的文件，回显 javascript 的 PHP 文件，或您喜欢的任何其他文件。

如果您决定通过 PHP 回显 JavaScript 来提供 JavaScript，为了整洁和正确，您应该通过`header('Content-type: application/javascript');`分别调用将内容类型标头设置为“应用程序/javascript”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T00:42:49.973

正如@Mark Amery 所说，它可以像你展示的那样完成，但你可能应该包括

```
header('Content-Type: application/javascript'); 
```

即使没有它，它也很可能适用于所有浏览器，但浏览器会默默地抱怨它。

例如，如果您不包含`header`部分，Chrome 会在控制台中抛出这个：

> 资源解释为脚本，但使用 MIME 类型 text/plain 传输

# android - Osmdroid 绘制不连续路径

> ID：14594745
> 
> 赞同：0
> 
> 时间：2013-01-30T00:35:29.663
> 
> 标签：android, osmdroid

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T19:28:13.847

您可以创建一个扩展 PathOverlay 的 InvisiblePathOverlay 类。覆盖 draw 方法的函数，使其实际上不在 Map 上绘制任何内容。然后，您将其用作中断的路径段。

# xcode - 自定义 UITableViewCell 中 UITextField 的 resignFirstResponder

> ID：14594746
> 
> 赞同：2
> 
> 时间：2013-01-30T00:35:29.953
> 
> 标签：xcode, uitableview, uitextfield

我像这样创建表格单元格（它是第一部分的第一个单元格，也是唯一一个带有 textField 的单元格）：

```
if (indexPath.section == 0 && indexPath.row == 0) {
        GroupedTableViewCellWithTextField *cell = (GroupedTableViewCellWithTextField *) [tableView dequeueReusableCellWithIdentifier: nameCellIdentifier];
        if (!cell && !_nameCell) {
            cell = [[GroupedTableViewCellWithTextField alloc] initWithStyle: UITableViewCellStyleValue1
                                                            reuseIdentifier: nameCellIdentifier];
            cell.textField.delegate = self;
            if (!_adding)
                cell.textField.text = @"Some Text";
            _nameCell = cell;
        }
        if (!cell) {
            cell = _nameCell;
        }
        return cell;
    } 
```

textField 是由一个简单的

```
- (UITextField *)textField {
    if (!_textField) {
        CGRect rect = self.bounds;
        CGFloat cellWidth = rect.size.width;
        CGFloat cellHeight = rect.size.height;
        CGRect cellRect = CGRectMake(rect.origin.x + 15, rect.origin.y, cellWidth - 48, cellHeight);

        _textField = [[SSTextField alloc] initWithFrame: cellRect];
        _textField.textColor = self.textLabel.textColor;
        _textField.placeholderTextColor = [UIColor grayColor];
        _textField.placeholder = @"Name";
        _textField.backgroundColor = [UIColor clearColor];
        _textField.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
        _textField.textAlignment = UITextAlignmentCenter;
        _textField.returnKeyType = UIReturnKeyDone;
        _textField.alpha = 1.0f;
        [_textField becomeFirstResponder];
        [self.contentView addSubview:_textField];
    }
    return _textField;
} 
```

然后我有：

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField {
    if ([_nameCell.textField isFirstResponder]) {
        [_nameCell.textField resignFirstResponder];
    return YES;
} 
```

问题如下：如果我向下滚动，直到带有 textField 的单元格超出屏幕并且我 resignFirstResponder，我得到

```
no index path for table cell being reused 
```

但只有一次。如果我用 textField 触摸单元格内部，它的 textField 再次获得 firstResponder，然后再次向下滚动并 resignFirstResponder，我不会再次收到该错误......它只显示第一次。

如果我

```
[self.tableView scrollToRowAtIndexPath: [NSIndexPath indexPathForRow: 0 inSection: 0]
                atScrollPosition: UITableViewRowAnimationTop
                    animated: YES]; 
```

滚动太慢了，我仍然得到错误。如果我不做动画，我就不会再收到错误了，因为单元格的显示速度比调用 resignFirstResponder 的速度快；但它看起来和感觉都很丑。

我也尝试过辞职FirstResponder

```
-(void)scrollViewDidScroll:(UIScrollView *)scrollView 
```

和

```
-(void)scrollViewWillBeginDragging:(UIScrollView *)scrollView 
```

所以它发生在单元格离开视图之前，但动画很不稳定：滚动开始，然后在键盘开始向下移动时停止一秒钟，然后再次开始。

只是为了让自己清楚，resignFirstResponder 有效。

我应该注意，表格足够大，需要在显示键盘时滚动，但足够小以在不显示键盘时适合屏幕。

此外，如果向下滚动表格直到单元格不再出现在屏幕上，如果我弹出视图，也会出现错误。

我想保持表格可滚动，我知道我可以关闭它。

关于如何阻止错误出现的任何想法，但又不会让应用程序感觉不稳定或没有动画效果？其他一切正常：数据保存、数据显示、响应程序、我没有崩溃等。

我知道这不是一个严重错误，我可以让它成为，但我仍然希望没有错误:)

谢谢你。

# svn - 在 repo 中具有更新版本的修改文件的 Subversion 列表

> ID：14594748
> 
> 赞同：0
> 
> 时间：2013-01-30T00:35:41.690
> 
> 标签：svn

我如何知道我修改后的本地文件副本是否在存储库中有更新版本？

请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T00:46:25.740

命令行：`svn status -u`

```
 The out-of-date information appears in the ninth column (with -u):
      '*' a newer revision exists on the server
      ' ' the working copy is up to date 
```

TortoiseSVN：CM - “检查修改” - “检查存储库”按钮

# c - 在 C 中非法使用浮点数

> ID：14594749
> 
> 赞同：-1
> 
> 时间：2013-01-30T00:35:43.110
> 
> 标签：c, floating-point, floating-point-conversion

在检查变量是否为空或为空的行上，我不断收到非法使用字符。

有谁知道为什么会这样？

错误点在这里：

```
if((fa == "" && fp == "") || (fb == "" && fp == "")){ 
```

虽然它在我只是不知道是什么导致这个错误之前有效。

编辑：

现在更改了代码，错误是函数 sinfa 的参数太少。

我只想一次将一个参数传递给这个函数，是否有可能或者我必须创建另一个函数来做到这一点，以便我可以单独满足它们？

谢谢你。:)

```
#include<stdio.h>

#include<conio.h>
#include<math.h>
#define PI 3.14159265359

float sinfa(float num1,float num2)
{
    float fc;
    float powers;
    float rad_angle;

    if(num1 != 0){
    rad_angle = num1 * (PI / 180.0);
    powers = pow(rad_angle,4);
    fc = sin(rad_angle)-powers+1;
    }else{
    rad_angle = num2 * (PI / 180.0);
    powers = pow(rad_angle,4);
    fc = sin(rad_angle)-powers+1;
    }
    return (fc);
}

float sinp(float p1)
{
    float fop;
    float ppowers;
    printf("%f",p1);
    ppowers = pow(p1,4);
    fop = sin(p1)-ppowers+1;
    return (fop);
}

float tp(float fa,float fb,int num1,int num2)
{
    float p;
    float fm2 = fa*num2;
    float fm1 = fb*num1;
    p = fm2-fm1/fa-fb;
    return (p);
}

float main()
{
    float num1;
    float num2;
    float fa;
    float fb;
    float p1;
    float fp;

    clrscr();
    printf("Enter number 1: \n");
    scanf("%f", &num1);
    getch();
    printf("Enter number 2: \n");
    scanf("%f", &num2);
    getch();
    clrscr();

    if((fa == 0 && fp == 0) || (fb == 0 && fp == 0)){
        fa = sinfa(num1);
        fb = sinfa(num2);
        p1 = tp(fa,fb,num1,num2);
        fp = sinp(p1);
    }else{
        if((fa*fp) < 0){
            num1 = num1;
            num2 = p1;
            fa = sinfa(num1);
            fb = sinfa(num2);
            p1 = tp(fa,fb,num1,num2);
            fp = sinp(p1);
        }
        if((fb*fp)< 0){
            printf("\n 2");
            getch();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T00:38:59.973

`""`不是一个数字。您无法将数字与它进行比较。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T00:40:11.223

出现错误是因为您尝试将文字字符串与浮点值进行比较。

您对空字符串的测试也是错误的。要检查字符串是否为空或空，您应该使用以下代码（假设类型为`fp`is `char *`）：

```
if(fp == NULL || *fp == '\0') 
```

该`sinfa`函数没有有效的原型。在函数定义中的参数中添加类型说明符`num1`。`num2`

根据标准，`main`函数的原型应该是

```
int main(void) 
```

或者

```
int main(int argc, char *argv[]) 
```

你的错了。

我想您正在尝试检查`scanf`输入转换期间是否有错误。为此，您应该`scanf`使用函数检查结果并检查 gloval 错误状态`ferror`（或`errno`直接检查值）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T00:46:12.530

出现错误是因为您将浮点数与字符串文字进行比较，即：

```
if((fa == "") 
```

您只能将浮点数与数字/浮点文字进行比较，即：

```
if((fa == 0.0 
```

回想一下，对于浮点等原始类型，没有诸如 NULL / uninitialized 之类的概念。相反，它们通常默认为 0。

因此具有以下意味着 f 值将是文字 0

```
float f; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T01:24:57.750

```
float fa;
float fb;
float p1;
float fp;

clrscr();
printf("Enter number 1: \n");
scanf("%f", &num1);
getch();
printf("Enter number 2: \n");
scanf("%f", &num2);
getch();
clrscr();

if((fa == 0 && fp == 0) || (fb == 0 && fp == 0)){ 
```

您在哪里为 fa、fb 或 fp 赋值？无处。这是未定义的行为。

# symfony - 查询实体内的集合

> ID：14594759
> 
> 赞同：0
> 
> 时间：2013-01-30T00:36:32.547
> 
> 标签：symfony, doctrine-orm, twig

我目前在产品和与产品相关的多个交易（总共 100 万笔交易的表）之间有一个简单的一对多关系。

我正在尝试做的是遍历前 10 名产品并选择与该产品相关的顶级交易。

在教义 2 中实现这一目标的最佳方法是什么？我正在考虑在产品实体中添加诸如 getTopDeals 之类的方法，然后在遍历每个产品时在 twig 中调用它，如下所示：

```
{% for product in popular_products %}
    {% set deal = product.getTopDeal() %}
    {{ product.title }} - {{ deal.title }}, {{deal.price }}
{% endfor %} 
```

但是，我读过通常不赞成将诸如此类的方法添加到模型中，因此我不知道最好的方法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T16:56:32.110

在您的 Deals 存储库中创建一个方法来接受参数并返回 topdeal。在您的控制器中， array_map() 您的产品以生成由产品键入的一系列交易。然后将交易数组与您的产品数组一起传递给您的模板。

编辑：要求的样品：

存储库：

```
public function getTopDealProduct($productid)
{
    $em=$this->getEntityManager();
    $qb = $em->getRepository('Bundle:Deal')->createQueryBuilder('d');
    $qb->join('d.product', 'p');
    $qb->setMaxResults(1);
    $qb->addOrderBy('d.price');
    $query = $qb->getQuery();
    $results = $query->getResult();

    return $results;
} 
```

控制器：

```
public function s2JUsorAction(Request $request, $id)
{
    $dealrep = $this->em->getRepository('Bundle:Deal');
    $prodrep = $this->em->getRepository('Bundle:Product');
    $products= $prodrep->getProducts();  // Not shown here, write this
    $deals= array_map(function($element) use ($dealrep){
         return $dealrep->getTopDealProduct($element->getId());
    }
    ,$products);

    return $this->render('Bundle:Product:Deal.html.twig', array(
        'products'  => $products
       ,'deals'     => $deals
    ));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T22:19:46.740

最佳实践是“胖模型，瘦控制器”。如果模型本身能够进行这种过滤，例如，为产品选择最高交易的逻辑肯定在模型中占有一席之地。它只需要与它有关系的交易对象。为此，您可以使用[Criteria API](http://docs.doctrine-project.org/en/latest/reference/working-with-associations.html#filtering-collections)，例如：

```
use Doctrine\Common\Collections\Criteria;
class Product {
    private $deals; // many-to-many to Products

    public function getTopDeals() {
        $criteria = Criteria::create()->orderBy(array('price', 'DESC'))->setMaxResults(10);
        return $this->deals->matching($criteria);
    }
} 
```

如果选择逻辑更复杂，并且需要进入实体管理器，那么它更适合放置在 EntityRepository 上。

# scalatest - Scalatest：Iterable 不应包含以下任何集合？

> ID：14594761
> 
> 赞同：4
> 
> 时间：2013-01-30T00:36:44.327
> 
> 标签：scalatest

目前在 ScalaTest 中，我们可以做

```
Set(1,2,3,4) should not contain (5)
Set(1,2,3,4) should not contain (6) 
```

什么是好的ScalaTest风格：

Set(1,2,3,4) 不应包含任何 Set(5,6)

目前，我只能想到

```
Set(1,2,3,4) & Set(5,6) should be ('empty) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-17T13:00:49.930

在 Scalatest 1.x 中，您只能使用以下内容：

> Set(1,2,3,4) 不应该（包含 (5) 或包含 (6)）

或者

> set2.foreach(set1 不应包含 _)

但是没有优雅的方式来表达有两个集合，它们不应该相交。在 Scalatest 2.0（目前处于 RC1 状态）中，您可以将上述版本稍微调整为：

> Set(1,2,3,4) 应该包含 noneOf (5, 6)

但是你仍然不能使用 Set 类型的值，你必须直接给出元素。

# iphone - 使 UICollectionView 中的 insertItemsAtIndexPath 不设置动画

> ID：14594763
> 
> 赞同：5
> 
> 时间：2013-01-30T00:36:56.010
> 
> 标签：iphone, ios, objective-c, ipad

我正在使用 UICollectionsView insertItemsAtIndexPath，这很烦人，以至于当我在 UICollectionView 上滚动然后它调用 insertItemsAtIndexPath 时，它会随着项目滑动。我希望这种插入是无缝的，只需将其附加到顶部，而用户不知道顶部已附加了某些内容。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T00:42:05.333

我想你将不得不继承 UICollectionViewFlowLayout，然后`- (UICollectionViewLayoutAttributes *)initialLayoutAttributesForAppearingItemAtIndexPath:(NSIndexPath *)itemIndexPath`只返回 nil。这样，它将直接将其放置到最终位置，因此不应发生动画。

# c++ - 除了从输入文件中提取文本之外的空白，C++？

> ID：14594767
> 
> 赞同：0
> 
> 时间：2013-01-30T00:37:12.267
> 
> 标签：c++

我必须编写一个从文件中读取输入的函数。文件设置：一个字符，空格，单词，空格，整个文件，像这样：

`A space 1 space 2 space...`ETC

我需要提取一个字符后面的空格，而不是单词后面的空格。

我该怎么做呢？我应该让函数自己写入空格而不是提取它吗？

另外，我将此信息导入二维字符数组。尝试将整数写入 char 数组时会遇到问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T01:08:48.433

可能是这样的？

```
#include <iostream>
#include <fstream>

int main() {
    char myChar;
    char theWS;
    std::string word;
    std::ifstream in("example.txt");

    while(in >> myChar >> std::noskipws >> theWS >> word >> std::skipws) {
        std::cout << myChar << theWS << word << '\n';
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T00:40:25.287

您现在应该已经了解了[标记](http://en.wikipedia.org/wiki/Tokenization)器的想法。这是您需要的结构。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-30T01:15:15.790

您可以将整数写入字符数组。由于 C 和 C++ 无论如何都将 ascii 字符表示为小数字，因此处理它们很容易。对应于特定字符的数值示例：'0' => 48、'1' => 49、...、'A' => 65、'B' => 66 等。

查看[http://www.asciitable.com/](http://www.asciitable.com/)了解完整的 ascii 字符集及其对应值。

这还允许您对字符执行数学运算，例如`'A' + 1 => 'B'` 数字和字符之间的转换`(char) 65 => 'A'`

# php - 我的 PHP 表单无法正确刷新

> ID：14594772
> 
> 赞同：0
> 
> 时间：2013-01-30T00:37:41.890
> 
> 标签：php, web

因此，当我在显示的表单上点击提交时，页面（如果工作正常）应该刷新，并且应该显示 ELSE 语句，但是我有两个问题

在我手动刷新页面之前不会显示 else 语句 Pub Score 在手动刷新页面之前不会更新，我认为我的代码放置可能是导致它的原因，但我试图将我的表单尽可能地放低，我没有想法，任何帮助都会非常感谢。

```
<?php
require_once('header.php');
require_once('connectdb.php');
require_once('sessioncheck.php');
if (isset($_SESSION['user_id'])) {
$dbc = mysqli_connect(DB_HOST, DB_USER, DB_PASS, DB_DATA);

$user_name = mysqli_real_escape_string($dbc, trim($_GET['username']));

$query = "SELECT * FROM blah WHERE username = '$user_name'";

$data = mysqli_query($dbc, $query);
$row = mysqli_fetch_array($data); 

if (mysqli_num_rows($data) != 0) {

if ($row['havemic'] == 1) {
    $micstatus = "Yes";
} else {
    $micstatus = "No";
}
?>

<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<title><?php echo $user_name . ' profile' ?></title>
</head>

<body>

<?php 
$commenduser = $user_name;
$query = "SELECT * FROM blah where commenduser = '$commenduser'";
$data = mysqli_query($dbc, $query);
$row = mysqli_fetch_array($data);
$lowerusername = strtolower($username);
$loweruser_name = strtolower($user_name);
    if (mysqli_num_rows($data) == 0) {
    if (isset($_POST['submit'])) {

        $commendplayer = mysqli_real_escape_string($dbc, trim($_POST['commendplayer']));
        $commend = mysqli_real_escape_string($dbc, trim($_POST['commend']));
        $comment = mysqli_real_escape_string($dbc, trim($_POST['comment']));

        if (empty($comment)) {
            echo '<p class="error">Please fillout a comment before submitting</p>';
        } else {

        $query = "INSERT INTO commend (commendby, commenduser, comment) VALUES ('$username', '$user_name', '$comment')";
        mysqli_query($dbc, $query);

        if ($commend == true) {
            $query = "UPDATE blah SET points=points+1 WHERE username='$user_name'";
            mysqli_query($dbc, $query);
            echo '<p class="success">Your commendation has been submitted with + 1 account points.</p>';
        } else {
            echo '<p class="success">Your commendation has been submitted with no affect on the users account points.</p>';
        }

    }
}
}  else {
    echo '<p class="success">You have already submitted a commendation for this player.</p>';
}
?>

<div id="accsettings">
<table cellpadding="5">

<tr><td><label for="username" class="reglabel">Username: </label></td>
<td><label for="username" class="reglabel"><?php echo $row['username']; ?></label></td></tr>
<tr><td><label class="reglabel">Pub Score: </label></td><td><label class="reglabel">

/*This value 'points' should be updated to the new value after form submit */
/*As well the ELSE statement near the bottom should be displayed*/
<?php echo $row['points'] ?></label></td></tr>
<tr><td><label for="steamname" class="reglabel">Steam Name: </label></td>
<td><label for="steamname" id="acclink"><?php echo '<a href="http://steamcommunity.com/id/' . $row['steamname'] . '">' . $row['steamname'] . '</a>'; ?></label>
<tr><td><label for="favchar" class="reglabel">Prefered Hero: </label></td>
<td><label for="favchar" class="reglabel"><?php echo $row['favchar']; ?></label></td></tr>
<tr><td><label for="language" class="reglabel">Spoken Language: </label></td>
<td><label for="language" class="reglabel"><?php echo $row['language']; ?></label></td></tr>
<tr><td><label for="playernote" class="reglabel">Player Note: </label></td>
<td><label for="playernote" class="reglabel"><?php echo $row['note']; ?></label></td></tr>
<tr><td><label for="micstatus" class="reglabel">Has a Mic and VO-IP?</label></td>
<td><label for="micstatus" class="reglabel"><?php echo $micstatus; ?></label></td></tr>

<tr><td colspan="2">Players Comments</td></tr>

<?php
if ($row['commendby'] != $username && $lowerusername != $loweruser_name) {
?>
<tr><td><br></td></tr>
<tr><td colspan="2"><p class="success">Player Commendations/Comments</p></td></tr>
<tr><td><br></td></tr>

<form method="post" action="<?php echo $_SERVER['PHP_SELF'] . '?username=' . $user_name; ?>">
<tr><td><label for="comment">Leave a comment</label></td>
<td><input type="text" name="comment" class="regtext" /></td></td>
<tr><td colspan="2"><label for="commend" class="right">Commend Player?</label><input type="checkbox"  class="right" name="commend" value="yes" /></td></tr>
<tr><td colspan="2"><input id ="submit" type="submit" class="button1" name="submit" value="Submit" /></td></tr>
</form>

<?php
} else {
/*This is what should be being displayed after the form is submitted. But it is not.*/
    $query = "SELECT * FROM blah where commenduser = '$commenduser'";
    $data = mysqli_query($dbc, $query);
    while($row = mysqli_fetch_array($data)) {
        echo '<tr><td><br></td></tr>';
        echo '<tr><td><br></td></tr>';
        echo '<tr><td><label  class="reglabel" for="commendedbyy">Comment From: ' . $row['commendby'] . '</label></td>';
        echo '<td><label class="reglabel">' . $row['comment'];
        echo '<input type="hidden" name="submit" />';
        echo '</form>';

    }

}
?>  

</table>

<?php
} else {
    echo '<p class="error">' . $user_name . ' is not a registered account.</p>';
}
}
else {
    echo '<p class="error">You must <a href="login.php">Log In</a> to view this profile.</p>';
}
?>

</div>
</body>
</html>
<?php
require_once('footer.php');
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T00:46:15.730

首先`$row`从数据库中获取，然后更新数据库。

您可以做三件事之一，最后一件是最简单的：

1.  您可以重构代码以更改顺序
2.  更新后使用另一个查询重新加载数据
3.  一旦你更新了点然后更新数组（即做`$row['points'] = $row['points'] + 1;`）

# opencv - OpenCV 2.4.3 Haar 分类器错误 AdaBoost misclass

> ID：14594774
> 
> 赞同：1
> 
> 时间：2013-01-30T00:37:55.183
> 
> 标签：opencv, boost, computer-vision, haar-wavelet

我在 Ubuntu 12.10 64 位上使用 OpenCV 2.4.3，当我运行 opencv_training 时，我收到如下所示的错误消息。培训仍在继续，所以我不认为这是一个严重错误，但它仍然公然说“错误”。我似乎找不到任何解决方案 - 这是什么意思（什么是 AdaBoost ），为什么它抱怨“错误分类”，我该如何解决？我在 Google 上找到的任何内容都将其称为简单的“警告”，基本上是为了忘记它。谢谢！

```
cd dots ; nice -20 opencv_haartraining -data dots_haarcascade -vec samples.vec -bg negatives.dat -nstages 20 -nsplits 2 -minhitrate 0.999 -maxfalsealarm 0.5 -npos 13 -nneg 10 -w 10 -h 10 -nonsym -mem 4000 -mode ALL
Data dir name: dots_w10_h10_haarcascade
Vec file name: samples.vec
BG  file name: negatives.dat, is a vecfile: no
Num pos: 13
Num neg: 10
Num stages: 20
Num splits: 2 (tree as weak classifier)
Mem: 4000 MB
Symmetric: FALSE
Min hit rate: 0.999000
Max false alarm rate: 0.500000
Weight trimming: 0.950000
Equal weights: FALSE
Mode: ALL
Width: 10
Height: 10
Applied boosting algorithm: GAB
Error (valid only for Discrete and Real AdaBoost): misclass
Max number of splits in tree cascade: 0
Min number of positive samples per cluster: 500
Required leaf false alarm rate: 9.53674e-07
Stage 0 loaded
Stage 1 loaded
Stage 2 loaded
Stage 3 loaded
Stage 4 loaded
Stage 5 loaded
Stage 6 loaded
Stage 7 loaded

Tree Classifier
Stage
+---+---+---+---+---+---+---+---+
|  0|  1|  2|  3|  4|  5|  6|  7|
+---+---+---+---+---+---+---+---+

   0---1---2---3---4---5---6---7

Number of features used : 7544

Parent node: 7

*** 1 cluster ***
POS: 13 96 0.135417 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T01:34:18.750

我不认为这是一条错误消息，而是描述算法如何测量其内部错误率的打印输出。在这种情况下，它使用了示例的错误分类。真实和离散的 adaboost 将输入样本映射到输出范围 [0,1]，因此有一种有意义的方法来衡量算法的不准确性。如果正在使用不同的 adaboost 变体，则此错误度量可能不再有意义。

# c - 在哪里物理编写 C 中的输入重定向命令？

> ID：14594775
> 
> 赞同：1
> 
> 时间：2013-01-30T00:38:00.020
> 
> 标签：c

这听起来像是一个迟钝的问题，但我只是在学习 C，我查看的所有网站都向您展示了执行此操作的命令（project < somefile.txt），但没有在哪里执行。它是在我的项目中的某个地方还是命令提示符中？如果是命令提示符，我该如何到达需要输入的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:41:44.747

它出现在您的命令提示符下。您首先需要 cd 到您编译的二进制文件所在的位置。该命令基本上说“运行项目并将 somefile.txt 的内容输入其中”

如果您在 Windows 上，请按 Win+R 并运行 cmd。在 UNIX 上，您应该在菜单的某处找到[终端应用程序。](http://en.wikipedia.org/wiki/Terminal_emulator)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T00:57:05.553

`FILE`编写 C 代码以使用`stdio.h`. 读取`STDIN`和写入`STDOUT`. 当您像这样运行命令时：`project < somefile.txt`，shell 将`somefile.txt`像`STDIN`您的程序运行之前一样打开。

# html - 如何在没有 html 文件的情况下创建特定于某些数据集的 url？

> ID：14594779
> 
> 赞同：0
> 
> 时间：2013-01-30T00:38:21.140
> 
> 标签：html, url

例如，脸书。我有一个不同团队的列表，其中显示了该团队的整体数据，但目标是用户将单击他们的团队并将他们发送到有关其团队的详细信息的页面。我的客户希望用户的团队名称包含在 url 中，以便他们可以将页面保存为收藏夹。

我如何做到这一点而不为每个团队制作一个 html 文件？我使用 Django 作为后端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T00:46:01.553

如果您使用的是 django，那么为每个团队制作 html 肯定是没有意义的。您应该制作一个模板并根据 url (urls.py) 和适当的视图 (views.py) 使用从数据库 (models.py) 获取的数据填充此模板。

这是官方教程和 django 文档中广泛涵盖的相当基本的 django 用法。阅读并使用它，因为没有捷径。最后但并非最不重要的一点 - 享受你不会每天看到的优秀教程和文档。

# objective-c - 如何以编程方式制作 UIImage？

> ID：14594782
> 
> 赞同：24
> 
> 时间：2013-01-30T00:38:38.897
> 
> 标签：objective-c, cocoa-touch, uiimage

这不是您可能认为的开始。我知道如何使用 UIImage，但我现在需要知道如何使用以下方法创建“空白” UIImage：

`CGRect screenRect = [self.view bounds];`

嗯，这些尺寸。无论如何，我想知道如何创建一个 UIImage ，这些尺寸全是白色的。这里没有实际图像。

这甚至可能吗？我敢肯定，但也许我错了。

## 编辑

这需要是“白色”图像。不是空的。:)

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-01-30T02:23:59.220

您需要使用`CoreGraphics`，如下所示。

```
CGSize size = CGSizeMake(desiredWidth, desiredHeight);
UIGraphicsBeginImageContextWithOptions(size, YES, 0);
[[UIColor whiteColor] setFill];
UIRectFill(CGRectMake(0, 0, size.width, size.height));
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

`CoreGraphics`该代码使用作为参数传递的选项创建一个新的图像上下文；大小、不透明度和比例。通过传递`0`比例，iOS 会自动为当前设备选择合适的值。

然后，上下文填充颜色设置为`[UIColor whiteColor]`。`UIRectFill()`立即，通过使用并传递一个填充画布的矩形，画布实际上被填充了该颜色。

然后从当前上下文创建A `UIImage`，并关闭上下文。因此，图像变量包含`UIImage`所需大小的 a，填充为白色。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-08-24T09:37:23.173

斯威夫特版本：

```
extension UIImage {

    static func emptyImage(with size: CGSize) -> UIImage? {
        UIGraphicsBeginImageContext(size)
        let image = UIGraphicsGetImageFromCurrentImageContext()
        UIGraphicsEndImageContext()
        return image
    }

} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-30T00:47:18.117

如果你只想绘制一个空图像，你可以使用 UIKit UIImageBeginImageContextWithOptions: 方法。

```
 UIGraphicsBeginImageContext(CGSizeMake(width, height));
    CGContextAddRect(UIGraphicsGetCurrentContext(), CGRectMake(0, 0, width, height)); // this may not be necessary
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext(); 
```

上面的代码假设您绘制一个宽度 x 高度的图像。它将矩形添加到图形上下文中，但可能不是必需的。自己试试。这是要走的路。:)

或者，如果您想创建当前视图的快照，您可以键入如下代码；

```
 UIGraphicsBeginImageContext(CGSizeMake(self.view.size.width, self.view.size.height));
    [self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext(); 
```

如果您使用图层，请不要忘记包含 Quartz 库。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-14T03:59:27.297

基于@HixField 和@Rudolf Adamkovič 的回答。这是一个返回可选的扩展，我相信这是正确的方法（如果我错了，请纠正我！）？

此扩展程序允许您创建一个空的 UIImage，其大小为您需要的任何大小（直至内存限制），并使用您想要的任何填充颜色，默认为白色，如果您希望图像是清晰的颜色，您可以使用类似的东西以下：

```
let size = CGSize(width: 32.0, height: 32.0)
if var image = UIImage.imageWithSize(size:size, UIColor.clear) {
    //image was successfully created, do additional stuff with it here.
} 
```

**这适用于 swift 3.x：**

```
extension UIImage {
     static func imageWithSize(size : CGSize, color : UIColor = UIColor.white) -> UIImage? {
         var image:UIImage? = nil
         UIGraphicsBeginImageContext(size)
         if let context = UIGraphicsGetCurrentContext() {
               context.setFillColor(color.cgColor)
               context.addRect(CGRect(origin: CGPoint.zero, size: size));
               context.drawPath(using: .fill)
               image = UIGraphicsGetImageFromCurrentImageContext();
        }
        UIGraphicsEndImageContext()
        return image
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-10T10:44:33.913

使用最新的 UIGraphics 类，并且在 swift 中，这看起来像这样（注意 user1834305 的答案中缺少的 CGContextDrawPath，这是产生透明图像的原因）：

```
static func imageWithSize(size : CGSize, color : UIColor) -> UIImage {
    UIGraphicsBeginImageContext(size)
    let context = UIGraphicsGetCurrentContext()
    CGContextSetFillColorWithColor(context, color.CGColor)
    CGContextAddRect(context, CGRect(x: 0, y: 0, width: size.width, height: size.height));
    CGContextDrawPath(context, .Fill)
    let image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return image
} 
```

# python - FancyArrowPatch 到已知大小的标记边缘？

> ID：14594786
> 
> 赞同：3
> 
> 时间：2013-01-30T00:38:49.723
> 
> 标签：python, matplotlib

我之前在 matplotlib-user 邮件列表中询问过，因此为交叉帖子道歉。

假设我有一个以点为单位的已知大小的标记，我想在这一点上画一个箭头。如何获得箭头的终点？正如您在下面看到的，它与标记重叠。我想去边缘。我可以使用shrinkA 和shrinkB 来做我想做的事，但我看不出它们与点大小**.5 有什么关系。或者我应该以某种方式使用两点与点本身之间的已知角度进行转换。我不知道如何在数据坐标中平移一个点，并将其在某个方向上偏移 size**.5 个点。任何人都可以帮助解决这个问题吗？

```
import matplotlib.pyplot as plt
from matplotlib.patches import FancyArrowPatch

point1 = (138.21, 19.5)
x1, y1 = point1
point2 = (67.0, 30.19)
x2, y2 = point2
size = 700

fig, ax = plt.subplots()
ax.scatter(*zip(point1, point2), marker='o', s=size)

# if I need to get and use the angles
dx = x2 - x1
dy = y2 - y1
d = np.sqrt(dx**2 + dy**2)

arrows = FancyArrowPatch(posA=(x1, y1), posB=(x2, y2),
                            color = 'k',
                            arrowstyle="-|>",
                            mutation_scale=700**.5,
                            connectionstyle="arc3")

ax.add_patch(arrows) 
```

**编辑**：我取得了更多进展。如果我正确阅读了[翻译教程](http://matplotlib.org/users/transforms_tutorial.html)，那么这应该会给我一个关于标记半径的点。但是，一旦您调整轴的大小，转换就会关闭。我不知道还能用什么。

```
from matplotlib.transforms import ScaledTranslation
# shift size points over and size points down so you should be on radius
# a point is 1/72 inches
dpi = ax.figure.get_dpi()
node_size = size**.5 / 2\. # this is the radius of the marker
offset = ScaledTranslation(node_size/dpi, -node_size/dpi, fig.dpi_scale_trans)
shadow_transform = ax.transData + offset
ax.plot([x2], [y2], 'o', transform=shadow_transform, color='r') 
```

![例子](../Images/f2512f8fb21ae97ffbb69bd85e6302f5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T04:38:57.517

```
import matplotlib.pyplot as plt
from matplotlib.patches import FancyArrowPatch
from matplotlib.transforms import ScaledTranslation

point1 = (138.21, 19.5)
x1, y1 = point1
point2 = (67.0, 30.19)
x2, y2 = point2
size = 700

fig, ax = plt.subplots()
ax.scatter(*zip(point1, point2), marker='o', s=size)

# if I need to get and use the angles
dx = x2 - x1
dy = y2 - y1
d = np.sqrt(dx**2 + dy**2)

arrows = FancyArrowPatch(posA=(x1, y1), posB=(x2, y2),
                            color = 'k',
                            arrowstyle="-|>",
                            mutation_scale=700**.5,
                            connectionstyle="arc3")

ax.add_patch(arrows)

# shift size points over and size points down so you should be on radius
# a point is 1/72 inches
def trans_callback(event):
    dpi = fig.get_dpi()
    node_size = size**.5 / 2\. # this is the radius of the marker
    offset = ScaledTranslation(node_size/dpi, -node_size/dpi, fig.dpi_scale_trans)
    shadow_transform = ax.transData + offset
    arrows.set_transform(shadow_transform)

cid = fig.canvas.mpl_connect('resize_event', trans_callback) 
```

您还需要在点的边缘包含有关轴的纵横比获取点的信息（因为除非纵横比 = 1，否则椭圆中数据单元中的标记形状）

# angularjs - Angular 应用程序在 save() 时不更新 UI

> ID：14594787
> 
> 赞同：1
> 
> 时间：2013-01-30T00:38:57.877
> 
> 标签：angularjs

我有以下简单的基于 CRUD 的代码（大部分来自 AwesomeTodo 教程）。这是一个 html 文件，只是一个网格，当调用 create() 时，我希望 UI 会更新。这个应用程序有效！当我创建新记录时它只是不刷新视图，我必须刷新显然重新加载资源的浏览器。

```
<div id="apps-table" compile="html">
<table ng-controller="AppCtrl" class="table table-striped table-bordered table-hover">
    <thead>
    <tr>
        <th>Name</th>
        <th>URL</th>
        <th>Label</th>
        <th>Description</th>
        <th>Status</th>
        <th>Location</th>
        <th><a ng-click="promptForNew()"><li class="icon-plus"></li>&nbsp;New App</a></th>
    </tr>
    </thead>
    <tbody>
    <tr style="display:none" id="add-app-row">
        <td><input class="input-small" type="text" ng-change = "formChanged()" ng-model="app.fields.name"></td>
        <td><input class="input-small" type="text" ng-change = "formChanged()" ng-model="app.fields.url"></td>
        <td><input class="input-small" type="text" ng-change = "formChanged()" ng-model="app.fields.label"></td>
        <td><input class="input-small" type="text" ng-change = "formChanged()" ng-model="app.fields.description"></td>
        <td><select ng-model="app.fields.is_active" ng-change = "formChanged()">
            <option value=1>Active</option>
            <option value=0>Inactive</option>
        </select>
        </td>
        <td><select ng-model="app.fields.is_url_external" ng-change = "formChanged()">
            <option value=0>Internal</option>
            <option value=1>External</option>

        </select></td>
        <td>
            <a ng-click="create()" id="save_new" class="btn btn-small btn-primary disabled" href=""><i class="icon-save"></i></a>
        </td>
    </tr>
    <tr ng-repeat="app in Apps.record" id="row_{{app.fields.id}}">
        <td><input class="input-small" type="text" ng-change = "formChanged()" ng-model="app.fields.name"></td>
        <td><input class="input-small" type="text" ng-change = "formChanged()" ng-model="app.fields.url"></td>
        <td><input class="input-small" type="text" ng-change = "formChanged()" ng-model="app.fields.label"></td>
        <td><input class="input-small" type="text" ng-change = "formChanged()" ng-model="app.fields.description"></td>
        <td><select ng-model="app.fields.is_active" ng-change = "formChanged()">
                <option value=1>Active</option>
                <option value=0>Inactive</option>
            </select>
        </td>
        <td><select ng-model="app.fields.is_url_external" ng-change = "formChanged()">
            <option value=0>Internal</option>
            <option value=1>External</option>
        </select></td>
        <td>
            <a ng-click="save()" id="save_{{app.fields.id}}" class="btn btn-small btn-primary disabled" href=""><i class="icon-save"></i></a>
            <a class="btn btn-small btn-danger" ng-click="delete()"><i class="icon-trash"></i></a>
        </td>
    </tr>

    </tbody>
</table> 
```

```
var AdminApp = angular.module("AdminApp", ["ngResource"]).
config(function($routeProvider) {
    $routeProvider.
        when('/', { controller: AppCtrl, templateUrl: 'applications.html' }).
        otherwise({ redirectTo: '/' });
});
AdminApp.factory('App', function($resource) {
return $resource('/rest/system/app/:id/?app_name=admin', {}, { update: { method: 'PUT'}});});
var AppCtrl = function ($scope, App) {
$scope.Apps = App.get();
$scope.formChanged = function(){
    $('#save_' + this.app.fields.id).removeClass('disabled');
};
$scope.promptForNew = function(){
    $('#add-app-row').show();
};
$scope.save = function () {
    var records = {};
    var record = {};
    record.fields = this.app.fields;
    delete record.fields.name;
    records.record = record;
    var id = this.app.fields.id;
    App.update({id:id}, records, function () {
        $('#save_' + id).addClass('disabled');

    });
};
$scope.create = function() {
    var currentScope = $scope;
    var records = {};
    var record = {};
    record.fields = this.app.fields;
    records.record = record;
    App.save(records, function() {
        $('#add-app-row').hide();
    });
};
$scope.delete = function () {
    var id = this.app.fields.id;
    App.delete({ id: id }, function () {
        $("#row_" + id).fadeOut();
    });
}; 
```

};

这是 index.html：

```
<!DOCTYPE html>
<html ng-app="AdminApp">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">
<link rel="stylesheet" href="/lib/web-core/css/bootstrap.min.css" type="text/css"/>
<link rel="stylesheet" href="/lib/web-core/css/font-awesome.min.css" type="text/css"/>
<link rel="stylesheet" href="css/style.css" type="text/css"/>
</head>
<body>
<div class="container">
<div ng-view></div>
</div>
<script src="/lib/web-core/js/angular.js"></script>
<script src="js/app.js"></script>
<script src="js/resource.js"></script>
<script src="/lib/web-core/js/jquery.js"></script>
<script src="/lib/web-core/js/bootstrap.min.js"></script>

</body>
</html> 
```

我所有的操作都是通过 ng-click，所以我似乎没有在“Angular 之外”做任何事情

问题是，这段代码是否正常工作？还是应该真正更新？

我可以更新范围的唯一方法是手动使用：

```
$scope.Apps.record.push($scope.app); 
```

那太可怕了。不能使用 apply 或 digest，我也不应该这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:15:39.710

浏览您的代码和 jsFiddle，到目前为止，我遇到了以下问题：

*   框架加载需要在jsFiddle设置中设置为“no wrap(head)”而不是“onLoad”
*   该`ngApp`指令不在任何地方用于引导应用程序
*   有一个`ngController`指令指定`AppCtrl`控制器，但该控制器未使用应用程序模块注册`module.controller`（它只是一个独立变量）
*   通过`ngClick`使用 jQuery 调用的控制器函数来操作 DOM——这不仅是 Angular 中的一个大禁忌（使用指令，而不是控制器，用于您的 DOM 操作），而且 jQuery 库甚至不包含在 jsFiddle 中。

# python - 将浮点格式的量化颜色转换为 RGB 整数

> ID：14594811
> 
> 赞同：0
> 
> 时间：2013-01-30T00:40:51.777
> 
> 标签：python, colors

我正在做的是通过量化减少图像中的颜色，但我需要转换为 RGB（例如数组（255、255、255））而不是使用浮点数。我发现了类似的问题，但不是一个直接/直接的解决方案。

返回`clustered`产生浮点数组。**如何将浮点数转换为 RGB 等效值？**

```
 # Pixel Matrix
pixel = reshape(img,(img.shape[0]*img.shape[1],3))

# Clustering
centroids,_ = kmeans(pixel,8) # six colors will be found

# Quantization
qnt,_ = vq(pixel,centroids)

# Shape Quantization Result
centers_idx = reshape(qnt,(img.shape[0],img.shape[1]))
clustered = centroids[centers_idx] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:48:35.553

如果要将任何浮点数组转换为字节数组（8 位无符号整数，从 0 到 255），您有一些选择。我更喜欢更一般的转换是这样的：

```
bytearray = (floatarray*255).astype('uint8') 
```

如果您有任何正浮点数组，其每个通道的像素值在 0.0 和 1.0 之间变化，这应该可以工作。如果您有任意正值，您可以`floatarray /= floatarray.max()`首先对值进行标准化。

希望这可以帮助！

# ruby-on-rails - 为什么 Rails 2.3.16 在表单字段中转义引号字符？

> ID：14594815
> 
> 赞同：1
> 
> 时间：2013-01-30T00:41:24.867
> 
> 标签：ruby-on-rails

考虑一个简单的对象 Shop，它有一个字符串属性 'name'。

我们的示例商店名称为：

```
Sam's Diner & Cafe - "deelicious" 
```

如果我们的观点有

```
<% form_for(@shop) do |f| %>
<%= f.text_field :name %>
<% end -%> 
```

Rails 2.3.15 将为文本字段生成

```
<input id="shop_name" name="shop[name]" type="text" value="Sam's Diner &amp; Cafe - &quot;deelicious&quot;" /> 
```

它在表单文本字段的屏幕上的浏览器（Chrome、Firefox）中显示为

```
Sam's Diner & Cafe - "deelicious" 
```

Rails 2.3.16 将生成

```
<input id="shop_name" name="shop[name]" type="text" value="Sam&amp;#x27;s Diner &amp; Cafe - &quot;deelicious&quot;" /> 
```

它在表单文本字段的屏幕上的浏览器（Chrome、Firefox）中显示为

```
Sam&amp;#x27;s Diner & Cafe - "deelicious" 
```

这对我来说在文本字段中是不受欢迎的行为......

这是由现在转义撇号的这种变化 [引起](https://github.com/rails/rails/compare/v2.3.15...v2.3.16#L20L22)[的](https://github.com/rails/rails/commit/d549df7133f2b0bad8112890d478c33e990e12bc)

我想我的问题是：这是一个轨道问题吗？如果不是，问题出在哪里？

* * *

编辑：此问题已在 Rails 2.3.17 中解决

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T03:43:49.847

This appears to have been something broken in 2.3.16\. See [https://github.com/rails/rails/issues/9108](https://github.com/rails/rails/issues/9108) for a fix that worked for me at least.

# java - 使用同一个 eclipse.ini 文件安装多个 eclipse 的最简单方法是什么？

> ID：14594816
> 
> 赞同：0
> 
> 时间：2013-01-30T00:41:32.367
> 
> 标签：java, eclipse

我正在测试不同的 Eclipse 配置，所有这些配置都应该使用相同的 JVM（我有很多）、堆大小等等来执行……将常规设置应用于所有这些 Eclipse 安装的最简单方法是什么？我在`eclipse.ini`文档中读到：

> Eclipse 启动由 $ECLIPSE_HOME/eclipse.ini 中的选项控制。如果未定义 $ECLIPSE_HOME，则使用 E​​clipse 安装目录中的默认 eclipse.ini（如果是 Mac，则为 Eclipse.app/Contents/MacOS 目录）。

所以我想到了创建一个配置文件： `~/ECLIPSE_CONFIG/eclipse.ini`

然后指向`ECLIPSE_HOME`，`~/ECLIPSE_CONFIG`但不确定这是否是个好主意（不确定是否`ECLIPSE_HOME`应该指向完整的 Eclipse 安装）。

感谢您的反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:43:56.807

我认为最好的方法是使用命令行参数：

```
--launcher.ini <location> (Executable)
the location of the product .ini file to use.
If not specified the executable will look for a file beside the launcher with 
the same name and the extension .ini.  (ie eclipse.exe looks for eclipse.ini, 
product.exe looks for product.ini) 
```

参考：[Eclipse 运行时选项](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/misc/runtime-options.html)

# ruby - 以编程方式访问 Resque 失败作业队列

> ID：14594819
> 
> 赞同：6
> 
> 时间：2013-01-30T00:41:54.457
> 
> 标签：ruby, resque

如何编写代码以通过 Resque 失败队列并有选择地删除作业？现在，我在那里遇到了一些重要的失败，散布在重复运行的失控工作的数千次失败之间。我想删除失控作业生成的那些。我熟悉的唯一 API 是用于排队作业。（我会继续 RTFMing，但我有点着急。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-03-14T15:14:55.600

我需要这样做：

```
# loop over all failure indices, instantiating as needed  
(Resque::Failure.count-1).downto(0).each do |error_index_number|     

  failure = Resque::Failure.all(error_index_number)

  # here :failure is the hash that has all the data about the failed job, perform any check you need here      

  if failure["error"][/regex_identifying_runaway_job/].present?        
    Resque::Failure.remove(error_index_number)
    # or
    # Resque::Failure.requeue(error_index_number)
  end 
```

正如@Winfield 提到的，看看[Resque 的失败后端](https://github.com/resque/resque/blob/master/lib/resque/failure/base.rb)很有用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-30T18:26:26.730

您可以按照您要求的方式手动修改故障队列，但最好编写一个自定义故障处理程序，以便在作业失败时删除/重新排队作业。

您可以在此处找到基本故障后端，并[在此处](https://github.com/resque/resque/blob/master/lib/resque/failure/base.rb)找到将失败作业记录到 Hoptoad 异常跟踪服务的[实现](https://github.com/resque/resque/blob/master/lib/resque/failure/thoughtbot.rb)。

例如：

```
module Resque
  module Failure
    class RemoveRunaways < Base
      def save
        i=0
        while job = Resque::Failure.all(i)
          # Selectively remove all MyRunawayJobs from failure queue whenever they fail
          if job.fetch('payload').fetch('class') == 'MyRunawayJob'
            remove(i) 
          else
            i = i + 1
          end
        end
      end
    end
  end
end 
```

编辑：忘了提到如何指定这个后端来处理失败。

在您的 Resque 初始化程序中（例如：config/initializers/resque.rb）：

```
# Use Resque Multi failure handler: standard handler and your custom handler
Resque::Failure::Multiple.classes = [Resque::Failure::Redis, Resque::Failure::RemoveRunaways]
Resque::Failure.backend = Resque::Failure::Multiple 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-30T19:36:43.110

## 使用 bool 函数示例删除

我使用了高阶函数方法，它评估删除失败

```
 def remove_failures(should_remove_failure_func)
      (Resque::Failure.count-1).downto(0).each do |i|
        failure = Resque::Failure.all(i)
        Resque::Failure.remove(i) if should_remove_failure_func.call(failure)
      end
    end

    def remove_failed_validation_jobs
      has_failed_for_validation_reason = -> (failure) do
        failure["error"] == "Validation failed: Example has already been taken"
      end
      remove_failures(has_failed_for_validation_reason)
    end 
```

# ruby-on-rails - rails 块范围

> ID：14594820
> 
> 赞同：0
> 
> 时间：2013-01-30T00:41:58.770
> 
> 标签：ruby-on-rails, ruby

我想计算这个块中的条目。由于 ruby​​ 块变量范围，我不处理这个代码。有什么办法解决这个问题吗？

```
 arr_showcase.each do |entry|
          @entry = ContestEntry.find_by_id(entry)
          if @entry.view_in_showcase == true
            @entry.view_in_showcase = false
            @entry.save
            entry_added_showcase += 1 
          else
            @entry.view_in_showcase = true
            @entry.save
            entry_removed_showcase += 1 
          end
    end
    redirect_to :back, :notice => "#{entry_added_showcase} Desings added, #{entry_removed_showcase} Designs removed." 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:51:03.643

你在哪里声明`entry_added_showcase`and `entry_removed_showcase`？你必须在块外初始化它们。

```
entry_added_showcase = entry_removed_showcase = 0
arr_showcase.each do |entry|
      @entry = ContestEntry.find_by_id(entry)
      if @entry.view_in_showcase == true
        @entry.view_in_showcase = false
        @entry.save
        entry_added_showcase += 1 
      else
        @entry.view_in_showcase = true
        @entry.save
        entry_removed_showcase += 1 
      end
end
redirect_to :back, :notice => "#{entry_added_showcase} Desings added, #{entry_removed_showcase} Designs removed." 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T00:51:38.767

您需要在块范围之外定义变量，如下所示：

```
entry_added_showcase = 0
entry_removed_showcase = 0
arr_showcase.each do |entry|
      @entry = ContestEntry.find_by_id(entry)
      if @entry.view_in_showcase == true
        @entry.view_in_showcase = false
        @entry.save
        entry_added_showcase += 1 
      else
        @entry.view_in_showcase = true
        @entry.save
        entry_removed_showcase += 1 
      end
end
redirect_to :back, :notice => "#{entry_added_showcase} Desings added, #{entry_removed_showcase} Designs removed." 
```

# r - 将两个日期向量与 R 中的函数进行比较以避免循环并处理 NA

> ID：14594827
> 
> 赞同：4
> 
> 时间：2013-01-30T00:43:07.427
> 
> 标签：r, date, vector

可能有一个非常简单的解决方法，但是这里有......我正在尝试比较 R 中的两个日期向量（最初不是作为日期向量输入）：如果第二个是 NA 并且第一个不是，则返回第一个值失踪; 如果第二个日期不丢失，则返回两个日期中最大的一个；如果两个值都缺失，则返回 NA。例如，对于下面显示的数据，我想`lastdate`计算如下：

```
v1        v2         lastdate
1/2/2006  NA         1/2/2006
1/2/2006  12/2/2006  12/2/2006
NA        NA         NA 
```

我写了一个公式来避免遍历每一行（这些数据中有 85K），如下所示：

```
lastdate <- function(lastdate1,lastdate2){
    if (is.na(lastdate1)==T & is.na(lastdate2)==T) {NA}
    else if (is.na(lastdate2)==T & !is.na(lastdate1)) {as.Date(lastdate1,format="%m/%d/%Y")}
    else {max(as.Date(lastdate2,format="%m/%d/%Y"),as.Date(lastdate1,format="%m/%d/%Y"))}
}
dfbobs$leaveobsdate <- lastdate(as.Date(dfbobs$leavedate1,format="%m/%d/%Y"),as.Date(dfbobs$leavedate2,format="%m/%d/%Y")) 
```

最后一行告诉它比较两个日期向量，但不太正确，因为我得到了错误

```
Warning messages:
1: In if (is.na(lastdate1) == T & is.na(lastdate2) == T) { :
  the condition has length > 1 and only the first element will be used
2: In if (is.na(lastdate2) == T & !is.na(lastdate1)) { :
  the condition has length > 1 and only the first element will be used 
```

我敢肯定这很愚蠢，可能有一种更简单的方法可以做到这一点，但我们将不胜感激。

编辑：我现在尝试使用 ifelse 函数来处理向量，如建议的那样，但是如果我输入单个值（例如，lastdate("1/1/2006","1/2/ 2006"))，如果我在数据帧向量上尝试它会产生 NA。代码如下：

```
lastdate <- function(lastdate1,lastdate2){
ifelse(is.na(lastdate1==T) & is.na(lastdate2==T), NA, 
    ifelse(is.na(lastdate2)==T & !is.na(lastdate1), as.Date(lastdate1,format="%m/%d/%Y"), 
        ifelse(!is.na(lastdate2) & !is.na(lastdate1), max(as.Date(lastdate2,format="%m/%d/%Y"),as.Date(lastdate1,format="%m/%d/%Y")),NA)))
}
dfbobs$leaveobsdate <- as.Date(lastdate(as.Date(dfbobs$leavedate1,format="%m/%d/%Y"),as.Date(dfbobs$leavedate2,format="%m/%d/%Y")),origin="1970-01-01") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T03:37:29.657

尝试这个：

像这样将日期转换为数字形式

```
v1<-as.character(v1); v2<-as.character(v2);
v1<-as.numeric(strftime(strptime(v1,"%m/%d/%Y"),"%Y%m%d"));
v2<-as.numeric(strftime(strptime(v2,"%m/%d/%Y"),"%Y%m%d")); 
```

现在计算结果

```
result<-ifelse(!is.na(v1) | !is.na(v2),max(v1,v2,na.rm=TRUE),NA); 
```

转换回您选择的格式

```
result<-strptime(result,"%Y%m%d");
result<-strftime(result,"%m/%d/%Y"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T01:31:52.610

`if`未矢量化 - 它需要一个参数。使用`ifelse`.

或者，您可以使用`mapply`现有功能：

```
mapply(lastdate, as.Date(df$leavedate1, ...), as.Date(df$v2, ...)) 
```

# php - php date 函数返回一个我没想到的结果

> ID：14594828
> 
> 赞同：2
> 
> 时间：2013-01-30T00:43:14.893
> 
> 标签：php, mysql, date, datetime

在我的 mysql 数据库中，我得到了一个时间戳字段，其值为：

```
2013-01-30 01:15:00
2013-01-30 01:20:00 
```

我使用日期函数将其打印为 24HOUR:MINUTE 格式，但我得到了错误的时间结果。

```
mysql_query('SELECT time FROM locations ORDER BY time ASC');
...
echo "<td>" . date('H:i',$row['time']) . "</td>"; 
```

两条记录的输出都是：00:33，为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T00:44:53.080

第二个参数`date()`是 Unix 时间戳。

> **描述**
> 
> 字符串日期 ( 字符串 $format [, int $timestamp = time() ] )
> 
> 返回根据给定格式字符串格式化的字符串，使用给定的整数时间戳或当前时间（如果没有给出时间戳）。换句话说，timestamp 是可选的，默认为 time() 的值。

```
echo "<td>" . date('H:i', strtotime($row['time'])) . "</td>"; 
```

另一种解决方案是使用 DateTime：

```
$datetime = new DateTime($row['time']);
echo $datetime->format('H:i');

// or in PHP5.5+
echo (new DateTime($row['time']))->format('H:i'); 
```

参考：

*   [`date()`](http://us3.php.net/manual/en/function.date.php)
*   [`strtotime()`](http://us3.php.net/manual/en/function.strtotime.php)
*   [日期时间类](http://us3.php.net/manual/en/book.datetime.php)

# emacs - 扩展乳胶的emacs次要模式

> ID：14594830
> 
> 赞同：1
> 
> 时间：2013-01-30T00:43:24.043
> 
> 标签：emacs, latex, notation

当我做笔记时，我喜欢写“ascii math”。

例如连续的定义

```
all eps > 0, exist del > 0 . |f(x)-f(y)| < eps . |x-y| < del 
```

我希望它在我输入时自动内联 unicode

```
Ɐ ε > 0, ∃ δ > 0 . |f(x)-f(y)| < ε . |x-y| < δ 
```

1）这是否存在，以次要模式并且独立于任何乳胶主要模式？

2）我如何在emacs中替换“令牌”。例如正则表达式“\W+all\W+”=>“Ɐ”（因为写“all”比“\forall”容易）？

# android - savedInstanceState 始终为 null，但始终调用 onSaveInstanceState()

> ID：14594833
> 
> 赞同：15
> 
> 时间：2013-01-30T00:43:37.177
> 
> 标签：android, android-activity

*首先，我是 Android 新手——这个问题可能看起来很愚蠢 :)*

我创建了一个包含 ViewPager 的主 Activity。ViewPager 链接到我的 ActionBar 选项卡。目前我的主要活动以这种方式包含 3 个选项卡。

我的问题如下：当我在第三个选项卡上并创建一个新活动然后返回我的主活动时，我总是返回到我的第一个选项卡。

我在主要活动中尝试了以下方法：

```
// debugger breakpoints tell me this method is always called when other activity is shown ...
@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);

    int pos = getActionBar().getSelectedNavigationIndex();
    outState.putInt("tab", pos);
}

// however, in onCreate() my savedInstanceState is always 'null' ...
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    this.invalidateOptionsMenu();

    setContentView(R.layout.activity_main);

    final ActionBar actionBar = getActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    mSectionsPagerAdapter = new SectionsPagerAdapter(
            getSupportFragmentManager());

    mViewPager = (ViewPager) findViewById(R.id.pager);
    mViewPager.setAdapter(mSectionsPagerAdapter);

    mViewPager
            .setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
                @Override
                public void onPageSelected(int position) {
                    actionBar.setSelectedNavigationItem(position);
                }
            });

    for (int i = 0; i < mSectionsPagerAdapter.getCount(); i++) {
        actionBar.addTab(actionBar.newTab()
                .setText(mSectionsPagerAdapter.getPageTitle(i))
                .setTabListener(this));
    }

    // trying to restore state here, yet savedInstanceState is _always_ null ...
    if (savedInstanceState != null) {
        actionBar.setSelectedNavigationItem(savedInstanceState.getInt("tab", 0));
    }
} 
```

我已经读过，当没有定义 id 时，savedInstanceState 将始终为 null。我的 XML 布局虽然定义了一个 id，所以这应该不是问题。我还读到“onSaveInstanceState()”方法应该总是首先调用超类上的方法，所以我已经相应地实现了该方法。

有人知道如何解决我的问题吗？重新创建主 Activity 时，如何让 ViewPager 显示正确的选项卡/片段？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-30T12:51:47.003

谢谢*她微笑*，您的建议帮助我解决了我的问题，因为它帮助我找到了问题的根源。

显然`onCreate()`只有`savedInstanceState`当 Activity 被完全销毁并重新创建时才能有一个参数。就我而言，活动仍然存在，因此我不会有`savedInstanceState`参数。我的“修复”是创建一个包含所选选项卡索引的静态 int。我意识到这可能不是最好的解决方案，因为这个变量将在 Activity 的所有实例之间共享，但是因为在我的情况下，我的 Activity 甚至只有一个实例，它应该没问题。

```
public class MainActivity extends Activity implements ActionBar.TabListener {
    private static int tabIdx;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        if (savedInstanceState != null) {
            tabIdx = savedInstanceState.getInt("tab", 0);
        }
        getActionBar().setSelectedNavigationItem(tabIdx);
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);

        tabIdx = getActionBar().getSelectedNavigationIndex();
        outState.putInt("tab", tabIdx);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T02:39:53.300

所以如果 onSaveInstance 被调用

你可以为你的声明一个全局变量

```
 int pos=0; 
```

在 onSaveInstance() 被调用之后，下面的方法被调用：

```
@Override
protected void onRestoreInstanceState(Bundle savedInstanceState) {
super.onRestoreInstanceState(savedInstanceState);
pos=savedInstanceState.getInt("tab", 0); 
```

}

所以在你的 onCreate() 函数中替换这个条件：

```
if (savedInstanceState != null) {
    actionBar.setSelectedNavigationItem(savedInstanceState.getInt("tab", 0));
} 
```

对此：

```
if(pos>0){
actionBar.setSelectedNavigationItem(pos);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-25T17:59:57.547

onRestoreInstanceState() 方法仅在有要从中恢复的 Bundle 对象时调用，即它不是 NULL。否则，将不会调用 restore 方法。

# html-email - 通过消息 API 显示/隐藏 Mandrill mc:hideable 字段

> ID：14594835
> 
> 赞同：2
> 
> 时间：2013-01-30T00:43:47.403
> 
> 标签：html-email, mailchimp, transactional-email

Mandrill 允许您`mc:hideable`在 HTML 电子邮件中的元素上附加属性，如

```
<p mc:edit="section_1" mc:hideable>
  Content that I only want to show on some emails.
  <a href="http://link.to/do/something">
    Because it has a link that only applies sometimes
  </a>
</p>

<p mc:edit="section_2">
  Variable content that I want to show every time.
</p> 
```

使用此示例模板，使用该`mc:edit="name"`属性，我可以通过消息 API 编辑“template_content”字段非常轻松地更改“section_2”中的内容，如下所示：

```
"template_content": [{"name": "section_2", "content": "Some content"}] 
```

有没有办法隐藏“section_1”中的内容？看起来这应该很容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:22:46.500

Mandrill 当前支持 MailChimp 模板语言的子集（特别是具有 mc:edit 属性的区域）。虽然可能有 mc:hideable 属性并且在使用模板时不会导致错误，但 Mandrill 尚不支持在发送电子邮件时隐藏这些元素。其他 MailChimp 模板语言属性也是如此，例如 mc:repeatable 和可编辑的图像区域 - 它们不会损坏，但目前无法在 send-template API 调用中替换它们。

有关在 Mandrill 中使用模板的更多信息，请访问：http: [//help.mandrill.com/forums/20689686-Templates-and-Dynamic-Content](http://help.mandrill.com/forums/20689686-Templates-and-Dynamic-Content)

# javascript - 如何使用 Javascript（在 contenteditable div 中）在新添加的空范围内设置光标？

> ID：14594837
> 
> 赞同：6
> 
> 时间：2013-01-30T00:43:56.760
> 
> 标签：javascript, contenteditable

我有一个包含格式选项的内容可编辑的 div。我希望能够单击，说粗体按钮，然后分别插入光标的左侧`<span class="bold">`和`</span>`右侧。我相信我已经成功地做到了这一点。但是，我不知道如何将光标放在跨度内，以便用户可以开始输入粗体文本。

我目前正在使用的功能：

```
function bold(text,clearSelection) {
    text = text.replace(/\r\n/g,"<br>");
    var sel, range, html;
    var tn = false;
    //Here i am adding the span element
    if (window.getSelection) {
        sel = window.getSelection();
        if (sel.getRangeAt && sel.rangeCount) {
            range = sel.getRangeAt(0);
            range.deleteContents();
            tn = document.createElement("span");
            tn.className="bold";
            tn.innerHTML=text;
            range.insertNode(tn);           
        }
    }
    if(clearSelection){
        //if the selection length is longer than 0, move cursor to end of selection
        if(sel.toString().length >0){
            range = window.getSelection().getRangeAt(0);
            range.setStart(range.endContainer,range.endOffset);
            document.getElementById('text').focus();
        } else {  
            /*Do something if the selection length is zero to place the cursor inside the span?*/
        }
    }
} 
```

编辑：以下最终工作

```
if(clearSelection){
    //if the selection length is longer than 0, move cursor to end of selection
    if(sel.toString().length >0){
        range = window.getSelection().getRangeAt(0);
        range.setStart(range.endContainer,range.endOffset);
        document.getElementById('text').focus();
    } else {
        if(tn!==false){
            range.selectNodeContents(tn);
            document.getElementById('text').focus();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T00:53:11.400

没有什么可以尝试的，但是如何将 var tn = ... 放在第一个 if 语句之上，然后在上面使用 focus() ，比如

```
var tn = false;
if (window.getSelection) {
    sel = window.getSelection();
    if (sel.getRangeAt && sel.rangeCount) {
...
        tn = document.createElement("span");
...          
    }
}
if(clearSelection){
    if(sel.toString().length >0){

    } else {
    /*Do something if the selection length is zero to place the cursor inside the span?*/
        if (tn !== false) {
            tn.focus();
        }

    }
} 
```

# sql - 在 SQL Server 中创建表值函数时出错

> ID：14594838
> 
> 赞同：1
> 
> 时间：2013-01-30T00:44:02.510
> 
> 标签：sql, sql-server, sql-function

我真的是 SQL Server 编程的初学者。我正在编写一个表值用户定义函数，但是当我执行它时，我得到了这个错误：

> *消息 178，级别 15，状态 1，过程 Select_info_FN，第 10 行
> 在此上下文中不能使用具有返回值的 RETURN 语句。
> 消息 102，级别 15，状态 31，过程 Select_info_FN，第 12 行“开始
> ”附近的语法不正确。*

这是我的代码：

```
create function Select_info_FN() returns table
as
begin
    declare @count int
    SELECT @count = COUNT(*) FROM dbo.info  
    if @count = 0
    begin
        INSERT INTO dbo.info VALUES (NULL, NULL, NULL, NULL, NULL)  
    end
    return (SELECT * FROM dbo.info)
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:57:04.103

尝试类似以下的操作。我不知道列名和类型是什么，但你可以`Column*`用你的列模式替换。

```
CREATE FUNCTION Select_info_FN()
RETURNS @result TABLE
(
    Column1 INT,
    Column2 INT,
    Column3 INT,
    Column4 INT,
    Column5 INT
)
AS
BEGIN
    IF (SELECT COUNT(*) FROM dbo.info) = 0
    BEGIN
        INSERT INTO @result VALUES (NULL, NULL, NULL, NULL, NULL)  
    END
    ELSE
    BEGIN
        INSERT INTO @result
                SELECT Column1, Column2, Column3, Column4, Column5 FROM dbo.info
    END
    RETURN
END
GO 
```

但是，如果您的目标是修改现有表而不是构建用于查询的数据表，那么[Aaron Bertrand](https://stackoverflow.com/users/61305/aaron-bertrand)是正确的，您不能在函数中执行插入操作，而[sgeddes](https://stackoverflow.com/users/1073631/sgeddes)是正确的，您应该使用存储的程序。在这种情况下，请尝试以下操作。

```
CREATE PROCEDURE Select_info
AS
BEGIN
    IF (SELECT COUNT(*) FROM dbo.info) = 0
    BEGIN
        INSERT INTO dbo.info (Column1, Column2, Column3, Column4, Column5)
                VALUES (NULL, NULL, NULL, NULL, NULL)  
    END
    SELECT * FROM dbo.info
END
GO 
```

# java - Http客户端408状态码

> ID：14594840
> 
> 赞同：1
> 
> 时间：2013-01-30T00:44:43.560
> 
> 标签：java, post, get, httpclient, http-status-code-408

我正在构建自己的 http 客户端。我让它工作，但试图清理代码并使其更有效率。没有语法错误或运行时错误。但是由于某种原因，当我运行程序时，它在尝试发送第一个 GET 请求时挂起，并最终超时并显示以下消息：

**408 Request Time-out：服务器等待来自客户端的HTTP请求超时。**

这是我的整个班级。

```
public class MyHttpClient {

//Variables
String host;//Host name
int port; //port number to connect to
String path; //Path of resource being requested
String method; //Type of method (GET or POST)
String blankLine = "\r\n"; //Carriage return
String line; //Hold Strings returned from server
int status; //Hold the response code
String description; //Hold the response code description
String name; //Hold name of NameValuePair
String value;//Hold value of NameValuePair
String body; //Hold the body of the response
String queryString;//Hold the query string of the request
int length; //Hold the content length being sent to server

public MyHttpResponse execute(MyHttpRequest request) throws IOException {

    //Create the Http response object
    MyHttpResponse response = new MyHttpResponse();
    //Establish a connection to the server
    //Get host and port
    host = request.getHost();
    port = request.getPort();

    Socket connectionSocket = new Socket(host,port);

    //Create I/O streams
    //input
    BufferedReader inFromServer = new BufferedReader(new InputStreamReader(connectionSocket.getInputStream()));
    //output
    DataOutputStream outToServer = new DataOutputStream(connectionSocket.getOutputStream());

    //Get the file path
    path = request.getPath();

    //Get the type of method
    method = request.getMethod();

    //Handle GET request
    if(method.equalsIgnoreCase("GET")){
        System.out.println(host + " " + port + " " + path);
        //REQUEST
        //Construct the GET request and send to server via output stream
        outToServer.writeBytes("GET " + path + " HTTP/1.0" + "\r\n"); //Request line
        outToServer.writeBytes("Host: localhost.com" + "\r\n"); //GET request headers
        outToServer.flush();

        //RESPONSE
        //Read in the response from the server
        line = inFromServer.readLine();

        //Check the status code & assign to response - if not 200 throw error!
        status = Integer.parseInt(line.substring(9,12));
        response.setStatus(status);

        //Get the status code description & assign to response - if 200 should be OK.
        description = line.substring(13);
        response.setDescription(description);

        //Get the response headers
        do{
            line = inFromServer.readLine();
            if(line != null){
                name = line.substring(0, line.indexOf(":"));//Key
                value = line.substring(line.indexOf(":"));//Value
                response.addHeader(name, value);//Add to response object
            }
        }while(line != null && line.length() == 0);
        //Do the above loop until a blank line is reached. This indicates
        //the end of the headers and the start of the content.

        //Get the body (content) - After a blank line
        StringBuilder sb = new StringBuilder();
        do{
            line = inFromServer.readLine();
            if(line != null){
                sb.append(line).append("\n");
            }
        }while(line != null);
        //Loop until there is no more lines left.

        //Convert the data to a string and set it as the response object's body.
        body = sb.toString();
        response.setBody(body);
    }

    //Handle POST request
    if(method.equalsIgnoreCase("POST")){
        //REQUEST
        //Get the query string from request and it's length
        queryString = request.getQueryString();
        length = queryString.length();

        //Construct the POST request and send to the server via the output stream
        outToServer.writeBytes("POST: " + path + " HTTP/1.0" + blankLine);//Request line
        outToServer.writeBytes("Host: localhost.com" + blankLine);//Header lines
        outToServer.writeBytes("Content-Type: application/x-www-form-urlencoded" + blankLine);
        outToServer.writeBytes("Content-Length: " + String.valueOf(length) + blankLine);
        outToServer.writeBytes(blankLine); //blank line to indicate end of headers and start of body
        outToServer.writeBytes(queryString);//query string "hidden" in POST request body, in GET this query string is "visible",added to the url.
        outToServer.flush();

        //RESPONSE
        //read the response and get the status code and assign to the response
        line = inFromServer.readLine();
        status = Integer.parseInt(line.substring(9,12));
        response.setStatus(status);

        //get the response status description and assign to response
        description = line.substring(13);
        response.setDescription(description);

        //read the response headers
        do{
            line = inFromServer.readLine();
            if(line != null){
                name = line.substring(0, line.indexOf(":"));
                value = line.substring(line.indexOf(":"));
                response.addHeader(name, value);
            }
        }while(line != null && line.length() == 0);
        //(above)Same as GET - loop through the headers until blank line reached
        //indicating the start of the response body.

        //read the response body (content)
        StringBuilder sb = new StringBuilder();
        do{
            line = inFromServer.readLine();
            if(line != null){
                sb.append(line).append("\n");
            }
        }while(line != null && line.length() == 0);
        //(above)Loop through until there is a blank line - end of the content

        //Convert to string and assign as response body.
        body = sb.toString();
        response.setBody(body);

    }
    //Close the connection to the server
    connectionSocket.close();

    //Return the response
    return response; 
} 
```

}//课程结束

任何人都可以看到可能导致它的原因吗？我从原始工作代码中改变的一件事是输出流来自：

`s.getOutputStream().write(("GET " + path + " HTTP/1.0\r\n").getBytes("ASCII"));`

使用一个`DataOutputStream`

`outToServer.writeBytes("GET " + path + " HTTP/1.0" + "\r\n");`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T00:47:51.840

当我发布问题时，我意识到我的错误。我忘了在 GET 请求标头后放一个空行。

这修复了它：

```
//Construct the GET request and send to server via output stream
outToServer.writeBytes("GET " + path + " HTTP/1.0" + "\r\n"); //Request line
outToServer.writeBytes("Host: localhost.com" + "\r\n"); //GET request headers
outToServer.writeBytes(blankLine);
outToServer.flush(); 
```

# switch-statement - VHDL - 去抖按钮按下

> ID：14594845
> 
> 赞同：1
> 
> 时间：2013-01-30T00:44:56.333
> 
> 标签：switch-statement, vhdl, fpga

我的代码中有以下按钮按下逻辑。我尝试过使用等待延迟对其进行去抖动，但编译器不允许这样做。我的 FPGA 上有四个按钮，下面的“键”数组反映了这些按钮：

```
process(clock)
        begin
            if rising_edge(clock) then
                if(key(3)/='1' or key(2)/='1' or key(1)/='1' or key(0)/='1') then --MY ATTEMPT AT DEBOUNCING
                    wait for 200 ns; ----MY ATTEMPT AT DEBOUNCING
                    if (key(3)='1' and key(2)='1' and key(1)='0' and last_key_state="1111" and key(0)='1') then
                        ...
                    elsif (key(3)='1' and key(2)='1' and key(1)='1' and key(0)='0' and last_key_state="1111") then  
                        ...
                    elsif (key(3)='0' and key(2)='1' and key(1)='1' and key(0)='1' and last_key_state="1111") then
                        ...
                    elsif (key(3)='1' and key(2)='0' and key(1)='1' and key(0)='1' and last_key_state="1111") then
                        ...
                    end if;
                    last_key_state<=key;
                end if;
            end if;
    end process; 
```

谁能给出一些非常简单的示例代码来展示我如何像上面的设置那样去抖动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T00:52:04.520

好吧，如果您考虑如何使用真正的电子设备来做到这一点，您可能会使用电容器......它有充电时间。同样的想法也适用于此，只需确定开关弹跳的时间（通常是时钟速度的函数），然后实际设置寄存器。

[带有 4 位移位寄存器的简单示例](http://www.tek-tips.com/viewthread.cfm?qid=941196)

所以你可以把它放在你的开关和任何其他逻辑块之间

```
process 
  begin
   if rising_edge(clock) then --You're clock

     SHIFT_PB(2 Downto 0) <= SHIFT_PB(3 Downto 1); --Shifting each cycle
     SHIFT_PB(3) <= NOT PB; --PB is the pre-bounced signal

     If SHIFT_PB(3 Downto 0)="0000" THEN --once the bounce has settled set the debounced value
      PB_DEBOUNCED <= '1'; 
     ELSE 
      PB_DEBOUNCED <= '0'; 
   End if;
end process; 
```

它基本上将你的信号延迟了 4 个时钟周期（你试图用等待做什么）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T16:33:48.763

其他人已经用计数器展示了方法......您还需要在将信号输入到计数器之前将信号同步到时钟，否则偶尔，信号会在不同的时间到达计数器的不同部分，并且计数器会错误计数.

这是否重要取决于应用程序 - 如果正确操作很重要，那么正确同步很重要！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T08:46:06.697

You get the error because of wait ... wait is not synthesizeable.

I would do it with a simple counter. So you can use the same code for different clock speeds by adjusting the counter.

```
-- adjust the counter to you special needs
-- depending on how good your buttons are hardware debounced
-- you can easily think in ms
signal counter : std_logic_vector(7 DOWNTO 0) := "10000000";

process 
  begin
    if rising_edge(clock) then --You're clock
      if(key(3) = '0') or (key(2) = '0') or (key(1) = '0') or (key(0) = '0') then
        start_debouncing <= '1';
        key_vector_out <= key(3) & key(2) & key(1) & key(0); 
      end if;

      if(start_debouncing = '1') then
        key_vector_out <= "0000";
        counter <= std_logic_vector(unsigned(counter) - 1);                        
      end if;

      if(counter = "00000000") then
        counter <= "10000000";
        start_debouncing <= '0';
      end if;
end process; 
```

Your code can produce another problem. What will happen if you button is released so your input is .. key = "0000" .. right you never get you output. Perhaps it will work 99 out of 100 times but you can get an really hard to find error.

# c# - DateTime 时间被验证为日期和时间

> ID：14594850
> 
> 赞同：0
> 
> 时间：2013-01-30T00:45:29.403
> 
> 标签：c#, datetime, asp.net-mvc-4

所以我有这个表格，用户可以在其中输入开始时间和结束时间（预订）。数据库中的值是 DateTimes，但 Date 部分被完全忽略。目前，当我进入例如。“5:00 pm”（通过 jQuery 时间选择器），它说这不是一个有效的日期。如果我键入“2013 年 1 月 30 日下午 5:00”，它会认为这是有效的......如何将这种行为更改为仅作为时间验证？（或者如果这不理想，我怎样才能完全关闭该字段的验证 - 我将在控制器中手动处理验证）

我看到了这个：[http ://connect.microsoft.com/VisualStudio/feedback/details/705643/a-data-val-date-attribute-is-generated-for-time-fields-in-asp-net-mvc- 4#](http://connect.microsoft.com/VisualStudio/feedback/details/705643/a-data-val-date-attribute-is-generated-for-time-fields-in-asp-net-mvc-4#)但微软声称已修复；不确定这是否是同一个问题。我不想将数据库定义更改为 TimeSpan，因为我相信它会破坏现有数据（不会吗？）。

**控制器：**

```
[HttpPost]
    public ActionResult Create(BookingDetailsDate bookingdetailsdates) //, FormCollection collection)
    {
        if (ModelState.IsValid)
        {
            try
            {
                //bookingdetailsdates.StartTime = DateTime.Parse(collection["StartTime"]); // TODO: do this better
                //bookingdetailsdates.EndTime   = DateTime.Parse(collection["EndTime"]);
                bookingdetailsdatesRepository.Add(bookingdetailsdates);
                bookingdetailsdatesRepository.Save();
                return RedirectToAction("Index", new { id = bookingdetailsdates.BookingDetailsID });
            }
            catch { }
        }
        return View(bookingdetailsdates);
    } 
```

**看法：**

```
@using (Html.BeginForm()) {
@Html.ValidationSummary(true)
<fieldset>
    <legend></legend>
...
    @Html.EditorFor(model => model.StartTime)

    @Html.EditorFor(model => model.EndTime)

    <p>
        <input type="submit" value="Save" />
    </p>
</fieldset>
} 
```

**编辑器模板：**

```
<div class="editor-label">
    @Html.LabelFor(m => m)
</div>
<div class="editor-field">
    @if (Model.HasValue==true)
    {
        @Html.TextBox("", Model.Value.ToShortTimeString(), new { @class = "TimePicker" })
    }
    else
    {
        @Html.TextBoxFor(m => m, new { @class = "TimePicker" })
    }

    @Html.ValidationMessageFor(m => m)

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T02:44:33.223

所以问题在于 jQuery 的验证，即使我的字段的元数据指定它只是一个时间（这甚至不是严格必要的），jQuery 的验证要求该框包含完整的日期时间字符串......

注释掉这些行可以解决问题：

```
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T01:29:40.067

我认为“DateTime”这种数据类型不是一个好的选择，如果你只是想节省用户保存的时间然后在某个地方比较它们我建议使用“nchar”类型。为什么？让我解释一下，datetime是一个非常复杂的类型，它有很多种形式。比如“2013-1-29 5:00 pm”、“2013/1/29 5:00pm”。如果您的目的是比较和检查是否过时，您可以使用这种方式。“201301291700”，它是一个固定长度，即12。这样做的好处是1。您可以通过键入字符串轻松地将其保存在任何地方。2\. 你可以通过转换为 int 类型或 long 类型来轻松比较。（数字更容易比较，不是吗？）

根据我的经验回答，希望对你有帮助！

# android - 你好 OpenCV 安卓

> ID：14594857
> 
> 赞同：1
> 
> 时间：2013-01-30T00:46:02.563
> 
> 标签：android

我正在尝试位于[此处的教程](http://docs.opencv.org/doc/tutorials/introduction/android_binary_package/dev_with_OCV_on_Android.html "OpenCV 你好教程")

我已经为 openCV 编译了示例代码，没有任何问题 - 所以我确定我已经为 opencv 安装了所有必要的东西。我已将 opencv 库添加到我的项目中，并且正在使用 java 1.6 进行编译（java 7 目前不适用于 opencv4android AFAIK）。我也将 opencv 库添加为资源。

但是，一旦进入 Hello OpenCV 示例下的第 5 步，示例代码对我来说就没有意义了。

```
public void onCreate (Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     mView = new HelloOpenCVView(this);
     setContentView (mView);
} 
```

是我正在谈论的代码，我立即得到错误“mView无法解析为变量”。mview 在整个代码中一直使用而没有声明——它是来自我应该导入的另一个文件吗？有任何想法吗？谢谢乙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T01:29:22.660

中的“m”`mView`表示它是一个成员变量。[这是大多数 Android 应用程序中使用的语言命名约定（如果您愿意，可以在此处](http://source.android.com/source/code-style.html#follow-field-naming-conventions)阅读有关它的更多信息）。所以只需在 MyActivity 中添加以下内容：

```
public class MyActivity extends Activity implements HelperCallbackInterface
{
    private HelloOpenCVView mView;

    ... // rest of class
} 
```

这应该可以解决您的`mView cannot be resolved to a variable`错误，这只是一个范围问题。

在该页面上，它说要参考`15-puzzle`示例以获取更多详细信息。[我建议在这里](https://github.com/Itseez/opencv/blob/master/samples/android/15-puzzle/src/org/opencv/samples/puzzle15/Puzzle15Activity.java)看看。

我同意这有点令人困惑。由于 OpenCV 是开源的，请随时向他们发送 GitHub 拉取请求，并对文档的这一部分进行修改。

# c# - 使用 Awesomium 从 YouTube API 捕获 C# 中的 JavaScript 事件

> ID：14594865
> 
> 赞同：1
> 
> 时间：2013-01-30T00:46:55.297
> 
> 标签：c#, javascript, wpf, youtube-api, awesomium

当在 Awesomium 中运行时由 YouTube API 生成时，我是否能够在 C# 中捕获 JavaScript 事件？

我将以下 HTML 加载到我的 Awesomium 浏览器中：

```
<body>
    <div id="player"></div>

    <script src="http://www.youtube.com/player_api"></script>
    <script>
        var player;

        function onYouTubePlayerAPIReady() {
            player = new YT.Player('player', {
                height: '390',
                width: '640',
                videoId: '0Bmhjf0rKe8',
                events: {
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange
                }
            });
        }

        function onPlayerReady(event) {
            event.target.playVideo();
        }

        function onPlayerStateChange(event) {
            if (event.data == 0) {
                alert('done');
            }
        }
    </script>
</body> 
```

如何`onPlayerStateChange`在 C# 中捕获（或由它生成的另一个事件），以便我的应用程序可以在视频结束时做出反应？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T21:32:01.410

如果您使用的是 Awesomium.NET 1.7 RC，请按照以下步骤操作：

*   创建一个全局 JavaScript 对象。看：[`CreateGlobalJavascriptObject`](http://docs.awesomium.net/?tc=M_Awesomium_Core_IWebView_CreateGlobalJavascriptObject)
*   将自定义方法添加到全局 JS 对象，并绑定到它。看：[`JSObject.Bind`](http://docs.awesomium.net/?tc=M_Awesomium_Core_JSObject_Bind)
*   从处理程序内部调用自定义方法`onPlayerStateChange`：

    ```
    function onPlayerStateChange(event) {
        if (event.data == 0) {
            myGlobalObject.onPlayerStateChange();
        }
    } 
    ```

（该示例假设您创建了一个名为*myGlobalObject*的全局 JS 对象，并为其添加了*onPlayerStateChange*自定义方法。）

这将触发`JavascriptMethodEventHandler`您在`JSObject.Bind`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T20:32:12.523

简而言之，您希望 c# 监听 javascript 事件！好的。

这很容易使用 Awesomium.NET。

将 awesomium 控件放入表单后，默认情况下会创建一个对象

网络控制1

在 form_load 方法中创建一个类似 document.ready 的事件处理程序，当文档准备好时将调用添加的事件

```
webControl1.DocumentReady += webControl1_DocumentReady; 
```

让我们从 c#（比如说`myGlobalObject.myMethod(){ }`）创建一个 javascript 方法。脚本将由 awesomium 注入页面。然后，我们将侦听从 javascript 调用该函数的事件。

你甚至可以从你的`onPlayerStateChange`

```
function onPlayerStateChange(event) {
   myGlobalObject.myMethod();
} 
```

这样当您的 javascript 事件触发时，它会调用`(myGlobalObject.myMethod();)`在 c# 中创建的 javascript 方法

所以我们需要创建全局对象，然后像这样的关联方法

```
using (JSObject myGlobalObject = webControl1.CreateGlobalJavascriptObject("myGlobalObject"))
        {
            // The handler is of type JavascriptMethodEventHandler. Here we define it
            // using a lambda expression.
            myGlobalObject.Bind("myMethod", true, (s, ee) =>
            {
                // Provide a response.
                ee.Result = "My response";
            });
        } 
```

这将在您的页面中执行必要的 javascript 对象和方法注入。所以

在 webControl1_DocumentReady 方法（我们之前附加）中，您将拥有

```
 void webControl1_DocumentReady(object sender, UrlEventArgs e)
        {

            dynamic myGlobalObject_ = (JSObject)webControl1.ExecuteJavascriptWithResult("myGlobalObject");
            using (myGlobalObject_)
            {
                myGlobalObject_.myMethod = (JavascriptMethodEventHandler)OnCustomJavascriptMethod;

            }
        } 
```

您将不得不像这样创建 OnCustomJavascriptMethod 方法（例如）

```
private void OnCustomJavascriptMethod(object sender, JavascriptMethodEventArgs e)
        {
            MessageBox.Show("hi");
        } 
```

当你的javascript事件onPlayerStateChange被调用时，这个方法（OnCustomJavascriptMethod）将在你的c#中被调用（因为它会调用myGlobalObject.myMethod();）

就这样！等待你的 onPlayerStateChange 触发并且你在 c# 中的方法 OnCustomJavascriptMethod(object sender, JavascriptMethodEventArgs e) 将被调用，从而使 javascript “控制 C# 方法”

[您可以在https://awesomium.com/](https://awesomium.com/)上找到有关 awesomium 的更多信息。您可以在[http://awesomium.com/downloads/awesomium_1_7_0_sdk_win.exe](http://awesomium.com/downloads/awesomium_1_7_0_sdk_win.exe)下载适用于 Windows 的 sdk并开始使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T01:22:47.337

我真的不知道 awesomium（从未使用过），所以我不知道是否有“本机”方式来做到这一点，但总是可以选择使用 ajax 向您的程序发送消息

[您可以按照此处](http://www.codeproject.com/Articles/25050/Embedded-NET-HTTP-Server)`HttpServer`的说明设置本地，然后获取所需的通知。

您也可以使用`TcpListener`我认为的简单方法，这会更简单，但需要一些工作来处理 http 标头（但我想我在网络上的某个地方看到了一个用 C# 编写的类，但事实并非如此非常复杂，因为您只需要管理 GET 请求）。如果您认为这可能是一种方法，我可以在这篇文章的编辑中写一些更明确的东西。

无论如何，希望这有帮助

# python - Python - 创建支持用户输入的链接列表

> ID：14594877
> 
> 赞同：0
> 
> 时间：2013-01-30T00:47:39.787
> 
> 标签：python, python-2.7, beautifulsoup

使用 BeautifulSoup4 提取的 href 属性（也使用 urllib2、webbrowser）...我想要一个类似的输出，它支持用户输入：

有任何想法吗？

```
(0) - http://www.example1.com
(1) - http://www.example2.com
(2) - http://www.example3.com
(3) - http://www.example4.com
(4) - http://www.example5.com
(5) - http://www.example6.com

>>> 0 (opens http://www.example1.com in browser)
>>> 1 (opens http://www.example2.com in browser) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T00:55:06.197

您可以将链接写入 html 文件，并使用类似`os.popen('firefox file.html')`打开文件的方式，以便用户可以直接单击链接，或者您可以使用该`raw_input()`功能向用户询问某些选项，然后调用 firefox（或其他浏览器) 使用命令行参数，再次使用`os.popen()`.

这对我有用（仅作为示例）：

```
import os

link1 = 'www.google.com'
link2 = 'www.yahoo.com'

s = raw_input("1 = %s\n2 = %s\n\n" % (link1, link2))

if s == '1':
    os.popen("firefox %s" % link1)
elif s == '2':
    os.popen("firefox %s" % link2) 
```

# jquery - 隐藏 div 失败

> ID：14594881
> 
> 赞同：0
> 
> 时间：2013-01-30T00:47:53.497
> 
> 标签：jquery, html

我有两个 div，我希望在单击链接时能够替换它们。现在我可以在页面加载时隐藏登录 div，当我点击登录链接时，登录 div 可以再次显示。但是，我的问题是 normaldisplay div 不会消失。两个 div 现在都显示在我的页面上。我该如何解决？提前致谢。

这是html：

```
<div id="normaldisplay"><a href="#" id="signinlink">Sign In</a></div>

<div id="signedin">
    Username: <input type="text" name="username" size="10">
    Password: <input type="password" name="pwd" size="10">
    <a href="#" id="signinlink2">Sign Me In</a>     
</div> 
```

这是Jquery

```
$(document).ready(function(){

 // Hide div 2 by default
 $('#signedin').hide();

  $('#signinlink').click(function(){ 
         $('normaldisplay').hide();
         $('#signedin').show();
  });

  $('signinlink2').click(function(){ 
         $('#signedin').hide();
         $('#normaldisplay').show();
  }); 
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T00:50:25.177

您似乎`#`在调用 `$('normaldisplay').hide();`. 尝试 `$('#normaldisplay').hide()`

# php - 在页面上设置 PHP 错误消息的位置

> ID：14594882
> 
> 赞同：0
> 
> 时间：2013-01-30T00:48:00.707
> 
> 标签：php, forms

我正在创建一个登录和注册系统。验证表格时，会通过此代码将错误消息发送到相关页面 -

```
echo '<div class="errormsgbox"> <ol>';
    foreach ($error as $key => $values) {

     echo ' <li>'.$values.'</li>'; 
```

它创建的 div 总是出现在我所有内容的页面顶部。我已将我的 CSS 设置为绝对，我可以控制该框。但是，我不希望它是绝对的。我想准确地告诉错误消息要在页面上填写哪个 div。我尝试使用 .errormsgbox 类创建一个 div，但它忽略它并创建它自己的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T01:02:21.973

解决了。

该消息出现在我的 PHP 包含已发布文件的任何位置。移动它，现在一切都好。万岁。

# php - 位置：不在Firefox中工作

> ID：14594883
> 
> 赞同：0
> 
> 时间：2013-01-30T00:48:01.860
> 
> 标签：php, firefox, backend

```
 if($query->num_rows===1)
            {
                    while($row = $query->fetch_object()){
                              $_SESSION['user'] = $row->user;
                              header('Location: http://www.URLISSECRETGOSH.com/index.php');
                             }
                    exit(); 
```

这在 chrome 中运行良好，但我无法在 Firefox 中运行。

人们说把它移到顶部，但在这种情况下这不是一个真正的选择。

谢谢你，小羊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T00:56:20.850

您的位置标题上方不应有任何字符，包括新行。在将标头位置设置为新位置之前，PHP 不应打印任何字符。

所以如果你有这样的东西

```
[newlinehere]
<?php

header('Location: http://www.URLISSECRETGOSH.com/index.php');
?> 
```

不起作用。您的 php 标签和之前的 php 标签不应该打印任何字符。检查 php 中的 echo，检查 php 标签外的新行。什么都不应该在那里，然后它将起作用。

# javascript - 通过在 phantomjs 上运行 highcharts-convert.js 生成图像

> ID：14594884
> 
> 赞同：1
> 
> 时间：2013-01-30T00:48:03.140
> 
> 标签：javascript, highcharts, phantomjs

我是 highcharts-convert & phantomjs 的新手，我试图运行这些以在服务器端获取图像。

当我在处理它时，图像的每个角落都有一个很小的圆形边缘..

（该死的..stackoverflow 不允许我上传图片..）

我不确定是哪个属性导致它..

如果有人有任何线索，请告诉我。

感谢您阅读：）

（我也去了官方的highchart论坛，显然它失败了，并建议在这里发帖..）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T16:47:34.530

您正在寻找的选项是[http://api.highcharts.com/highcharts#chart.borderRadius](http://api.highcharts.com/highcharts#chart.borderRadius)。

# c# - 图形 DrawImage 导致大红色 X 错误

> ID：14594886
> 
> 赞同：2
> 
> 时间：2013-01-30T00:48:23.497
> 
> 标签：c#, windows, graphics, bitmap, drawimage

我有一组位图图像，我正在循环并将它们全部写入一个新位图。基本上，我正在收集一组松散的位图，并将它们一个接一个地写入一个位图，以便它们作为一个图像可见。

当我从集合中的一个位图调用 dc.DrawImage 到新位图上时，我的 winform 在表单中显示了一个大的红色 X。当我将 PictureBox.Image 设置为新绘制的位图时，我得到一个大的红色 X。

出于某种原因，我无法在任何地方找到错误。我无法通过调试找到错误。

现在，如果我只是将 PictureBox.Image 设置为图像集合中的一个图像而不循环并绘制到新的位图上，一切正常。

为了使一切变得容易，我只使用集合中的一个位图并将一个位图绘制到新位图。所以我知道我只有一个位图可以工作，然后我可以添加其他位图。

如果我只是在集合中设置图片的picturebox.image，下面的图片就是表单的样子。第二个图像是在我循环并将集合中的位图绘制到另一个位图之后显示的错误。

下面的代码是需要工作的，但会引发错误。

请注意我在哪里设置 PictureBox.Image 的属性，如下所示： this.picBx.Image = schedule; 这会导致错误。

但是如果我像这样设置picturebox.image：

this.picBx.Image = schedules[0].Door; 它工作得很好。

```
 DoorSchedules schedules = GetDoorDrawing(elev, projInfo.ProjectName);
            int prevWidth = 0;
            //
            using (Bitmap schedule = new Bitmap(schedules.Width + 50, schedules.Height + 50))
            {
                using (Graphics dc = Graphics.FromImage(schedule))
                {
                    using (Pen pen = new Pen(LINE_COLOR))
                    {
                        pen.Width = 4;
                        pen.Color =
                            Color.FromArgb(50, LINE_COLOR.R, LINE_COLOR.G, LINE_COLOR.B);
                        //
                        for (byte i = 0; i < schedules.Count; i++)
                        {
                            if (i > 0)
                            {
                                dc.DrawLine(pen, prevWidth - 25, 0,
                                                 prevWidth - 25, schedule.Height);
                            };

                            dc.DrawImage(schedules[i].Door, prevWidth, 0);

                            prevWidth += schedules[i].Door.Width;
                        };
                    };
                };
                this.picBx.Image = schedule;
                this.picBx.BackColor = BACK_COLOR;
                this.Size = new System.Drawing.Size(schedule.Width, schedule.Height);
            }; 
```

![在此处输入图像描述](../Images/d314c12cfca5f8111812fe042a08d396.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:59:50.070

您已`Bitmap schedule`在 using 语句中定义。

当使用块结束时，位图被释放。

# vba - 基于公式的vba条件格式

> ID：14594887
> 
> 赞同：0
> 
> 时间：2013-01-30T00:48:33.840
> 
> 标签：vba, formatting, conditional

我想要一个相当大的电子表格上的简单颜色代码（数百个单元格要着色）。如果我使用 CF，它会减慢计算机的速度，而 Excel 只会崩溃。我想尝试用 VBA 来做。我尝试了下面的代码，但它只有在我输入值（1、2 或 3）时才有效。如果值是公式的结果，则它不起作用。任何想法？

```
Private Sub Worksheet_Change(ByVal Target As Range)

Dim icol As Integer, c As Range, rng As Range

If Target.Count > 1 Then Exit Sub

Set rng = Range("D2:s1000")

If Intersect(Target, rng) Is Nothing Then Exit Sub

For Each c In Intersect(Target, rng)

    Select Case UCase(c.Value)
        Case 1: icol = 3
        Case 2: icol = 4
        Case 3: icol = 18
        Case Else: icol = 0
    End Select
    c.Interior.ColorIndex = icol
Next c
End Sub 
```

如果让·弗朗索瓦·科贝特（Jean Francois Corbett）能回答那就太好了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T04:04:50.110

@TimWilliams 是正确的，但是，您可以递归地扩展目标范围以包括 target.dependants，例如

```
Private Function TargetDependents(ByRef Target As Range) As Range
    Dim c As Range

    If Not Target.Dependents Is Nothing Then
        Set TargetDependents = Union(Target, Target.Dependents)
    End If

    If TargetDependents.Cells.Count > Target.Cells.Count Then
        TargetDependents = TargetDependents(TargetDependents)
    End If
End Function 
```

并改变这个：

```
For Each c In Intersect(Target, rng) 
```

至：

```
For Each c In Intersect(TargetDependents(Target), rng) 
```

**更新**以响应评论，编辑后的代码应如下所示

```
Private Function TargetDependents(ByRef Target As Range) As Range
    Dim c As Range

    If Not Target.Dependents Is Nothing Then
        Set TargetDependents = Union(Target, Target.Dependents)
    End If

    If TargetDependents.Cells.Count > Target.Cells.Count Then
        TargetDependents = TargetDependents(TargetDependents)
    End If
End Function

Private Sub Worksheet_Change(ByVal Target As Range)

Dim icol As Integer, c As Range, rng As Range

If Target.Count > 1 Then Exit Sub

Set rng = Range("D2:s1000")

For Each c In Intersect(TargetDependents(Target), rng)

    Select Case UCase(c.Value)
        Case 1: icol = 3
        Case 2: icol = 4
        Case 3: icol = 18
        Case Else: icol = 0
    End Select
    c.Interior.ColorIndex = icol
Next c
End Sub 
```

# php - 如何计算多个选定的学生ID

> ID：14594889
> 
> 赞同：0
> 
> 时间：2013-01-30T00:48:46.723
> 
> 标签：php

我有两个表，initial_vote 和 studinfo。在initial_vote 表上，它由用户ID 和choices1-4(studid) 组成，我在这里存储尚未计算所选学生ID 的信息。在 studinfo 表中，这是我想指望 numvote 列的地方。

初始投票表

```
 userid     choice1    choice2     choice3     choice4
     12345      c-1234     c-1134      c-1222      c-1345 
     23456      c-1674     c-1534      c-1342      c-1444 
```

螺柱信息表

```
 studid     fname    lname     mname     numvote
     c-1234     maria    cruz      santos       
     c-1134     juan     santos    cris
     c-1222     borg     sample    bern
     c-1345     joy      girl      cute 
```

我设法从如下所示的 initial_vote 中获得用户选择 1-4 的研究

```
 $vote$_SESSION['userid'];
     function getinfo2($info2){
    global $voter; //lets say the userid here is 12345
    $info_select = "SELECT `$info2` FROM `initial_vote` WHERE `voter_studid`='".mysql_real_escape_string($voter)."'";
            if ($query_get = mysql_query($info_select)) { 
            if ($result = mysql_result($query_get, 0, $info2)) {
            return $result;
            }
            }
            }
     $c1 = getinfo2('choice1'); $c2 = getinfo2('choice2'); 
     $c3 = getinfo2('choice3'); $c4 = getinfo2('choice4'); 
```

但我现在的问题是，当我单击提交按钮时，如何添加或创建一个函数来计算 final_vote 表（numvote 列）中选定的学生。我尽力而为，但没有用。

```
 if($_POST['submit']{
    // ????
 }else { echo "Not added"; } 
```

# mysql - Mysql在文本中查找关键字

> ID：14594890
> 
> 赞同：3
> 
> 时间：2013-01-30T00:48:50.493
> 
> 标签：mysql, string, match, keyword

我有一个包含 10k 个关键字的 Mysql InnoDB 表，我想将它们与多个文本进行匹配。

有些关键字有几个词，我只想要完全匹配。

示例：关键字 - brown fox、lazy cat、dog、fox、rabbit

文本 - 敏捷的棕色狐狸跳过懒惰的狗

我希望查询返回 - brown fox, dog, fox

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T01:10:42.657

```
SELECT * FROM tenKTable 
WHERE 'The quick brown fox jumps over the lazy dog' LIKE CONCAT('%',keyword,'%') 
```

来源：[MySQL SELECT 查询字符串匹配](https://stackoverflow.com/questions/4916195/mysql-select-query-string-matching)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T01:10:15.380

这是一个想法：

```
SELECT keyword 
FROM Keywords
 JOIN (SELECT 'The quick brown fox jumps over the lazy dog' as col) k
   on k.col like Concat('%',keywords.keyword,'%') 
```

还有[SQL 小提琴](http://sqlfiddle.com/#!2/71c80/4)。

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-27T09:32:33.960

接受的答案非常好。一个改进将是

```
SELECT kw FROM keyword
WHERE ' text ' LIKE CONCAT('% ',kw,' %') 
```

请记住在文本前面加上空格。这样，您可以完全避免部分匹配。

# wcf - 使用路由服务对 WCF 服务进行版本控制

> ID：14594895
> 
> 赞同：2
> 
> 时间：2013-01-30T00:49:31.073
> 
> 标签：wcf, api, versioning, wcf-routing

我的任务是为一套新的 WCF 服务制定版本控制策略。我所做的大部分阅读都建议使用中间路由服务将呼叫转发到适当的服务版本。我理解这是如何工作的，但我质疑这在保护客户免受重大变化方面有多大好处。

例如，我有两个具有不同端点的服务版本：

```
mycompany.com/API/v1.0/GetCustomer
mycompany.com/API/v2.0/GetCustomer 
```

路由服务解决方案将在 SOAP 消息中查找自定义“版本”标头，并将调用路由到适当的服务。如果没有找到版本标头，则可以使用最新版本。

或者，我可以只公开两个端点，消费者可以调用所需的版本。

一种解决方案如何优于另一种解决方案？添加路由服务似乎增加了额外的配置级别。这两种解决方案都要求消费者在想要升级时更改他们的代码......

在单独的帖子中提出这个问题可能会更好，但维护服务的多个版本意味着我们将需要在源代码中并发版本的合约。有没有推荐的管理方式（例如命名空间）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:07:32.417

您可以将路由与 WCF 操作筛选结合使用。你可以看看[http://www.dotnetcurry.com/ShowArticle.aspx?ID=470](http://www.dotnetcurry.com/ShowArticle.aspx?ID=470)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:01:34.780

您可以通过向 GetCustomer 操作发送版本参数来重建您的服务，并将其作为单个服务进行维护。

# heroku - 如何限制 Heroku 中应用程序协作者的数据库/控制台访问？

> ID：14594898
> 
> 赞同：2
> 
> 时间：2013-01-30T00:49:47.333
> 
> 标签：heroku

Heroku 不允许不同的协作者拥有不同的权限，因为在 Dashboard -> YourAppName -> Collaborators 中没有此选项。

我有兴趣在 Rails 应用程序中限制对生产数据库的访问——本质上是删除控制台访问。我仍然希望合作者能够推动代码和规模工人等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:36:36.607

你不能——我害怕要么全有，要么全无。

# r - 如何将无序值设置为 NA？

> ID：14594899
> 
> 赞同：3
> 
> 时间：2013-01-30T00:49:49.810
> 
> 标签：r

我正在使用 R 来累积来自传感器的每分钟数据。“宽度”和“高度”应该增加。不幸的是，数据包含 NA 和乱序值（例如，第 8 行的值 12.0、13.0 超出范围）。 **我想要的是将无序值设置为 NA。**

然后我将自己估算数据集'ex'。由于数据可能很大，我做了一个如下的程序：

```
m<-15 
for(i in 2:m){
  ex$WIDTH[i]<- ifelse(ex$WIDTH [i]- ex$WIDTH [i-1]<0,NA, ex$WIDTH [i])
  ex$HEIGHT[i]<- ifelse(ex$HEIGHT[i]- ex$HEIGHT [i-1]<0,NA, ex$HEIGHT [i])
} 
```

但结果是错误的。

**原始数据集**

```
 ID    CTIME         WIDTH HEIGHT
1  HM001 201212121301 1201.9 1115.5
2  HM001 201212121302 1202.2 1115.8
3  HM001 201212121303 1202.8 1115.8
4  HM001 201212121304     NA 1116.1
5  HM001 201212121305 1203.9 1116.7
6  HM001 201212121306     NA 1116.7
7  HM001 201212121307     NA 1116.7
8  HM001 201212121308   12.0   31.0
9  HM001 201212121309 1206.0 1118.2
10 HM001 201212121310 1206.3 1118.6
11 HM001 201212121311 1206.5 1118.8
12 HM001 201212121312     NA     NA
13 HM001 201212121313 1207.3     NA
14 HM001 201212121314 1207.9 1121.1
15 HM001 201212121315 1208.4 1121.3 
```

**for 语句的结果**

```
 ID    CTIME        ACTIVE_KWH REACTIVE_KWH
1  HM001 201212121301     1201.9       1115.5
2  HM001 201212121302     1202.2       1115.8
3  HM001 201212121303     1202.8       1115.8
4  HM001 201212121304         NA       1116.1
5  HM001 201212121305         NA       1116.7
6  HM001 201212121306         NA       1116.7
7  HM001 201212121307         NA       1116.7
8  HM001 201212121308         NA           NA
9  HM001 201212121309         NA           NA
10 HM001 201212121310         NA           NA
11 HM001 201212121311         NA           NA
12 HM001 201212121312         NA           NA
13 HM001 201212121313         NA           NA
14 HM001 201212121314         NA           NA
15 HM001 201212121315         NA           NA 
```

**我的期望（第 8 行宽度=NA，高度=NA）**

```
 ID    CTIME         WIDTH HEIGHT
1  HM001 201212121301 1201.9 1115.5
2  HM001 201212121302 1202.2 1115.8
3  HM001 201212121303 1202.8 1115.8
4  HM001 201212121304     NA 1116.1
5  HM001 201212121305 1203.9 1116.7
6  HM001 201212121306     NA 1116.7
7  HM001 201212121307     NA 1116.7
8  HM001 201212121308     NA     NA
9  HM001 201212121309 1206.0 1118.2
10 HM001 201212121310 1206.3 1118.6
11 HM001 201212121311 1206.5 1118.8
12 HM001 201212121312     NA     NA
13 HM001 201212121313 1207.3     NA
14 HM001 201212121314 1207.9 1121.1
15 HM001 201212121315 1208.4 1121.3 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T01:08:38.137

**更新**。我原来的解决方案有两个缺陷：如果数据包含`NA`s 则不起作用，并且对于两个连续的乱序值不起作用。下面的解决方案解决了这两个问题；`cummax`由于没有`na.rm`参数，因此需要使用 min 的技巧。

```
SetOutOfOrderValuesToNA <- function(x) {
  min <- min(x, na.rm = TRUE)
  x[is.na(x)] <- min - 1
  x[x < cummax(x)] <- NA
  x
}

> x <- c(1.1, 2.2, 3.3, 0.1, NA, 0.1, 0.2, 0.3, 6, 0.2, 7, 8)
> SetOutOfOrderValuesToNA(x)
 [1] 1.1 2.2 3.3  NA  NA  NA  NA  NA 6.0  NA 7.0 8.0 
```

**原始解决方案。**

让我们先从一个向量开始。如果

```
x <- c(1, 2, 3, 0.1, 4, 5, 6, 0.2, 7, 8) 
```

然后以下代码将*奇怪*（例如乱序）值设置为`NA`：

```
n <- length(x)
x[-1][x[-n] > x[-1]] <- NA
> x
[1]  1  2  3 NA  4  5  6 NA  7  8 
```

这是一个很好的练习，可以理解为什么会这样。接下来定义一个函数

```
SetOutOfOrderValuesToNA <- function(x) {
  n <- length(x)
  x[-1][x[-n] > x[-1]] <- NA
  x
} 
```

并在您的数据框上调用它：

```
ex$WIDTH <- SetOutOfOrderValuesToNA(ex$WIDTH)
ex$HEIGTH <- SetOutOfOrderValuesToNA(ex$HEIGHT) 
```

# internationalization - Propel orm 1.6, symfony 1.4 内嵌 I18N 形式

> ID：14594900
> 
> 赞同：1
> 
> 时间：2013-01-30T00:49:54.200
> 
> 标签：internationalization, symfony1, symfony-1.4, propel, symfony-forms

我使用 propelorm (propel 1.6) 插件和 symfony 1.4.20。

我有 I18n 的书桌，这本书与也有 I18n 的画廊桌有关系。我填写了所有书籍表单字段，添加了两个画廊图像，填写了所有图像字段。单击保存 - 似乎一切正常：书籍字段正常，第一张和第二张图片已上传，但只有第一张图片已填充 i18n 字段，第二张图片所有 i18n 字段为空。有什么问题？

（没有重新声明doSave()、save()、bind()等表单方法）

# 架构：

```
 book:
    id:                   ~
    title:                { type: varchar(255), required: true }
    author:               { type: varchar(255), required: true }
    description:          { type: longvarchar, required: true }
    sortable_rank:        { type: integer, required: true }
    is_active:            { type: boolean, default: 1 }
    _indexes:
      active_sort:        [ is_active, sortable_rank ]
    _propel_behaviors:
      sortable:
        rank_column:      sortable_rank
      i18n:
        i18n_columns:     [title, description, author]
        locale_column:    culture
        locale_alias:     culture
        default_locale:   en

  book_gallery:

    id:                 ~
    book_id: { type: integer, foreignTable: book, foreignReference: id, required: true, onDelete: cascade }
    title:              { type: varchar(255), required: true }
    image:              { type: varchar(255), required: true }
    _propel_behaviors:
      i18n:
        i18n_columns:    [title]
        locale_column:   culture
        locale_alias:    culture
        default_locale:  en 
```

# 书本形式：

```
$languages = LanguageQuery::create()->getAllAsArray(); // returns like array('en' => 'english', ...);
$this->embedI18n(array_keys($languages));
$this->widgetSchema->setLabels($languages);
$this->embedRelation('BookGallery', array(
  'title'               => 'Application book store list',
  'item_pattern'        => 'Application book store %index%',
)); 
```

# 书廊形式：

```
$languages = LanguageQuery::create()->getAllAsArray(); // same as in book form
$this->embedI18n(array_keys($languages));
$this->widgetSchema->setLabels($languages); 
```

# animation - css3 淡入淡出

> ID：14594902
> 
> 赞同：1
> 
> 时间：2013-01-30T00:49:59.170
> 
> 标签：animation, css-transitions, fadein, fade, fadeout

那里有很多 css3 淡入/淡出动画。有没有什么东西可以在没有触发（例如，没有悬停或点击）的情况下以动画持续时间自行运行的淡入淡出？

谢谢，乙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T22:34:16.347

您应该考虑[css3 动画框架](http://daneden.me/animate/)。有很多代码。

还要考虑不透明度的动画（从 1 到 0）

# actionscript-3 - ActionScript 3.0：加载外部字体 (.ttf)

> ID：14594909
> 
> 赞同：2
> 
> 时间：2013-01-30T00:50:22.977
> 
> 标签：actionscript-3, fonts, truetype

是否可以在不使用 [embed] 元标记或将字体编译成 .swf 的情况下从字节码加载 .ttf 字体？
接下来的情况：我的应用程序获取带有图形的 zip 存档，我想增加更改可视化字体的机会。
但在这种情况下，我不能使用 swf 编译。工具：FlexSDK、FLashDevelop。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T05:24:42.920

使用运行时加载的 ttf/otf 字体的唯一方法是做与 mxmlc 相同的操作：将字体文件转码为 AS3 类，构造新的 swf，将其加载到 Loader 并获取字体类（即将 ttf 文件嵌入到新创建的 swf 中运行）。您必须检查[swf 规范](http://www.adobe.com/content/dam/Adobe/en/devnet/swf/pdf/swf_file_format_spec_v10.pdf)，我猜[Flex SDK 4.6](http://sourceforge.net/adobe/flexsdk/wiki/Download%20Flex%204.6/)源代码会有所帮助。也许您将能够找到实现，我无法做到这一点。

仍然是简单的方法-将每个字体文件预编译为 swf 并将其包含到您的图形 zip 中，我不认为即使对于非开发人员专业人士来说单击 bat 文件也太难了（您可以使用 as 文件制作模板并放置sdk 和构建 bat 文件，艺术家需要的只是将具有给定名称的字体文件放在 bat 文件附近，您可以在 bat 中询问字体名称并在模板中替换它）:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-21T18:53:36.663

实际上这不是答案，但我还没有足够的声誉来添加评论。

我看到这个问题已经有一年多了。从那以后情况发生了变化吗？对于我正在开发的 VJ 应用程序，如果用户可以将 TTF 文件放到资源目录中以使用它，而不是我必须制作所有可能有趣使用的字体的 SWF，那就太好了 - 这将是无论如何都太费时了，而且会造成我想避免的许可问题。

# python - python中的socket.recv（）在换行符上截断输出？

> ID：14594923
> 
> 赞同：0
> 
> 时间：2013-01-30T00:51:50.037
> 
> 标签：python, sockets, networking

## 底线

*   该脚本不会打印从 socket.recv() 到 linux 终端的所有内容。
*   如果我在解释器中做同样的事情，它会将所有数据打印到终端。

（假设我使用本地网关作为 ip 和 23 作为端口，所以远程登录到我的路由器）

```
import socket
q = socket.socket()
q.connect(ip, port)
data = q.recv(1024)
print data 
```

## 解释器的输出是四行：

（一些 alt 代码乱码或第一行的任何内容）
RT v24-sp2 std (c) 2012 NewMedia-NET GmbH
发布：03/21/12（SVN 修订：18795）
DD-WRT 登录：

## 脚本的输出：

（只是第一行的替代代码乱码）

任何关于为什么会发生这种情况以及如何纠正它的建议将不胜感激。

谢谢，

安德鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T02:26:05.780

当一次缓慢地运行命令时，您的路由器有时间在您有机会调用之前发送它计划发送的所有内容`q.recv(1024)`。

当您从脚本运行它时，命令会快速连续执行。当脚本执行`q.recv(1024)`时，路由器只发送了一些数据，而不是全部。

由于您不使用循环返回并尝试读取更多数据，这就是结束，您将不再接收（或打印）任何数据。

（顺便说一句，“alt-code 乱码”到底是什么？你应该在这里得到一些二进制数据，它是 telnet 协议协商的一部分。）

# concurrency - s3 并发写入

> ID：14594924
> 
> 赞同：12
> 
> 时间：2013-01-30T00:51:50.747
> 
> 标签：concurrency, amazon-s3, cloud

我认为我在并发 s3 写入时遇到了问题。两个（或更多）进程同时将*几乎*相同的内容写入同一个 s3 位置。我想确定控制这种情况如何发展的并发规则。

按照设计，在写入 s3 时，除一个之外的所有进程都会被杀死。（我说过他们正在写“几乎”相同的内容，因为除了一个进程之外的所有进程都被杀死了。如果所有进程都被允许生存，他们最终会写出完全相同的内容。）

我的理论是，被杀死的进程在 s3 上留下了一个不完整的文件，而另一个文件（可能是完整编写的）没有被选为在 s3 上存在的文件。我想证明或反驳这个理论。（我试图找出问题是否是由写入 s3 期间的并发问题或其他时间引起的）。

来自[http://aws.amazon.com/s3/faqs/](http://aws.amazon.com/s3/faqs/)的常见问题解答：

> 问：Amazon S3 采用什么数据一致性模型？
> 
> 美国西部（俄勒冈）、美国西部（加利福尼亚北部）、欧洲（爱尔兰）、亚太地区（新加坡）、亚太地区（东京）、亚太地区（悉尼）和南美洲（圣保罗）区域的 Amazon S3 存储桶提供读取- 新对象的 PUTS 写入后一致性和覆盖 PUTS 和 DELETES 的最终一致性。美国标准区域中的 Amazon S3 存储桶提供最终一致性。

我使用的是美国标准区域。

*   这个答案对并发写入有什么看法？我想我理解“写后读一致性”与“最终一致性”之间的区别，但仅限于在写入完成后*读取对象时所看到的上下文。*
*   被杀死的进程是否有可能“获胜”并因此在 s3 上得到一个不完整的文件？或者，如果整个 PUT 操作完成，s3 是否以某种方式确保文件只会放在 s3 上？
*   s3 如何决定哪个文件“获胜”？这是真正的问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-28T23:42:41.660

我不认为那个常见问题条目中的一致性声明说明了在并发写入同一个键期间会发生什么。

但是，在 S3 中不可能有不完整的文件：http: [//docs.aws.amazon.com/AmazonS3/latest/API/RESTObjectPUT.html](http://docs.aws.amazon.com/AmazonS3/latest/API/RESTObjectPUT.html)说

> Amazon S3 从不添加部分对象；如果您收到成功响应，Amazon S3 会将整个对象添加到存储桶中。

这意味着只有完全上传的文件才会存在于指定的键中，但我想这种并发写入可能会引起一些错误情况，导致没有文件被成功上传。我会做一些测试来确定；您可能还希望在使用对象版本控制时尝试使用它，看看它的行为是否不同。

# string - 如何将字符串列表作为隐藏输入从 jsf 页面传递到请求范围的支持 bean

> ID：14594927
> 
> 赞同：3
> 
> 时间：2013-01-30T00:52:05.707
> 
> 标签：string, jsf

我想将字符串列表作为隐藏输入从 jsf 页面传递到支持 bean。

支持 bean 是请求范围的，并且必须是它。

试图这样做，但它似乎不起作用。任何想法如何以更好的方式完成？

```
<ui:repeat value="#{bean.strings}" var="#{string}">
    <h:inputHidden value="#{string}"/>
</ui:repeat> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T01:46:40.497

只需对列表值使用转换器：

```
<h:inputHidden value="#{bean.strings}" converter="myStringListConverter" /> 
```

*这是一个使用@@@*作为分隔符的字符串转换/转换的转换器：

```
@FacesConverter("myStringListConverter")
public class StringListConverter implements Converter {

    // this is used as a regex, so choose other separator carefully
    private static final String MY_SEPARATOR = "@@@";

    @Override
    public Object getAsObject(FacesContext context, UIComponent component,
            String value) {
        if (value == null) {
            return new ArrayList<String>();
        }
        return new ArrayList<String>(Arrays.asList(value.split(MY_SEPARATOR)));
    }

    @Override
    public String getAsString(FacesContext context, UIComponent component,
            Object value) {
        if (value == null) {
            return "";
        }
        return join((List<String>) value, MY_SEPARATOR);
    }

    /**
     * Joins a String list, src: http://stackoverflow.com/q/1751844/149872
     * 
     * @param list
     * @param conjunction
     * @return
     */
    public static String join(List<String> list, String conjunction) {
        StringBuilder sb = new StringBuilder();
        boolean first = true;
        for (String item : list) {
            if (first) {
                first = false;
            } else {
                sb.append(conjunction);
            }
            sb.append(item);
        }
        return sb.toString();
    }

} 
```

如果您使用的是 JSF 2，那么它应该已经为您工作了。

如果您使用的是 JSF 1.2，您只需删除`@FacesConverter`注释并`faces-config.xml`像这样注册转换器：

```
<converter>
    <description>Simple String List Converer</description>
    <converter-id>myStringListConverter</converter-id>
    <converter-class>com.your.package.StringListConverter</converter-class>
</converter> 
```

# prolog - Prolog 列表成员资格，返回多个结果

> ID：14594928
> 
> 赞同：7
> 
> 时间：2013-01-30T00:52:09.260
> 
> 标签：prolog, swi-prolog, prolog-toplevel

我有一个确定列表成员资格的标准程序：

```
member(X, [X|_]).  
member(X, [_|T]) :- member(X, T). 
```

我不明白为什么当我提出以下查询时：

```
?- member(a,[a,b]). 
```

结果是

```
True;  
False. 
```

我会认为在使用第一条规则（因为 a 是列表的头部）满足目标时，将返回 True，这将是 if 的结束。似乎它正在尝试使用第二条规则来满足目标并且失败了？

Prolog 解释器是 SWI-Prolog。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T02:00:27.143

让我们首先考虑一个类似的查询：[编辑：在**不**添加您自己的定义的情况下执行此操作；`member/2`已经定义]

```
?- member(a,[b,a]).
true. 
```

在这种情况下，您会得到最佳答案：只有一种解决方案。但是当交换列表中的元素时，我们得到：

```
?- member(a,[a,b]).
true ;
false. 
```

从逻辑上讲，两者都只是对查询为真的肯定。

差异的原因是，在第二个查询中，答案是在找到列表元素后`true`立即给出的。`a`其余列表`[b]`不包含拟合元素，但尚未检查。仅根据请求（点击`SPACE`或`;`）尝试列表的其余部分，结果没有进一步的解决方案。

本质上，当计算完全完成以及仍有一些工作要做时，这个微小的差异会给你一个提示。对于简单的查询，这并没有什么不同，但在更复杂的查询中，这些开放的备选方案（选择点）可能会累积并耗尽内存。

较早的顶层总是询问您是否想查看进一步的解决方案，即使没有。

编辑：

避免询问下一个答案（如果没有）的能力非常依赖于实现细节。即使在同一个系统中，加载同一个程序，你也可能得到不同的结果。但是，在这种情况下，我使用的是 SWI 的内置定义，`member/2`而您使用的是您自己的定义，它会覆盖内置定义。

SWI 使用以下定义作为内置定义，这在逻辑上与您的定义等价，但使 SWI 更容易避免不必要的选择点——但许多其他系统无法从中受益：

```
member(B, [C|A]) :-
        member_(A, B, C).

member_(_, A, A).
member_([C|A], B, _) :-
        member_(A, B, C). 
```

使事情变得更加复杂：许多 Prolog 具有不同的顶层，当查询不包含变量时，它从不要求进一步的答案。所以在那些系统（比如 YAP）中，你会得到一个错误的印象。

尝试以下查询来查看：

```
?- member(X,[1]).
X = 1. 
```

SWI 再次能够确定这是唯一的答案。但是，例如，YAP 不是。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T01:05:53.613

你用的是“;” 运算符在第一个结果之后然后推返回？我相信这是要求查询寻找更多结果，因为没有结果，所以它是错误的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T02:37:47.220

你知道 Prolog 的 cut -`!`吗？

如果您更改`member(X, [X|_]).`为`member(X, [X|_]) :- !.`Prolog，将不会在第一个解决方案之后尝试找到另一个解决方案。

# jquery - jQuery，在表单发布或运行时做一些事情

> ID：14594929
> 
> 赞同：0
> 
> 时间：2013-01-30T00:52:13.553
> 
> 标签：jquery

我得到了以下表格：

```
<form name="x" method="post" action="/message.jsp" onsubmit="validate(this)">

<input type="button" name="Export" value="Export" onclick="this.form.action='ReportExecute.jsp';this.form.submit();">

</form> 
```

我想要做的是，当单击导出按钮时，我正在尝试做一些事情（例如显示微调器或禁用按钮）（此按钮创建一个 csv 文件以在加载表单中指定的一些特定数据后最终下载字段），直到表单操作（正在导出数据）或表单发布完成。

我所做的是这样的：

```
$(document).ready(function(){
    $('form[name="x"]').submit(function() {
        alert("test");
    });
}); 
```

我希望在单击导出按钮时收到警报，因为表单通过单击此按钮执行了一些操作，但它从未起作用！好像表格根本没有发布任何东西！

将不胜感激一些帮助。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T01:03:55.507

您试图在错误的 HTML 元素上触发提交。

提交导出按钮的处理程序`this.form`中`onclick`的 正在尝试`form`在`Export`按钮下查找不存在的。

您想将第二行更改为以下内容：

```
<input type="button" name="Export" value="Export" onclick="submitForm();"> 
```

并在页面中添加以下 JavaScript 函数：

```
function submitForm() {
    // write whatever you want to do before the form begins to post here
    $('form[name="x"]').attr('action', 'ReportExecute.jsp').submit();
} 
```

在您提供的事件处理程序中（您当前在其中调用`alert`.

# android - 有没有在 iOS 设备上显示 Android PhotoSphere 的方法？

> ID：14594934
> 
> 赞同：0
> 
> 时间：2013-01-30T00:53:05.330
> 
> 标签：android, ios, ipad, ios6, photosphere

我正在用 HTML5 / CSS / Javascript 创建一个 iOS 应用程序，并希望在浏览器中显示 Android Photosphere（VR JPEG），特别是在装有 iOS 6 的 iPad 上。我看过这个出色的工作，但它不会运行我的 iPad。

代码库： [https ://github.com/kennydude/photosphere](https://github.com/kennydude/photosphere)

示例： http: [//kennydude.github.com/photosphere/test.html](http://kennydude.github.com/photosphere/test.html)

有什么解决方案吗？在此先感谢，格雷格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:03:29.147

该代码似乎需要移动设备不支持的 WebGL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T18:12:27.077

刚刚发布 - [https://developers.google.com/panorama/web/](https://developers.google.com/panorama/web/)

那应该做的工作。在我的 IOS 6 iPhone 4S 上运行良好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-12T11:41:24.457

根据 gdt 提到的开发人员指南，我创建了一个“游览”和一个普通的 photosphere 查看器。[您可以在此处](https://sites.google.com/site/anynamethatisavailable/virtualtourphotosphere)查看和下载示例

我收到了反馈，它似乎在 iPad 上运行良好。加载时间可能比他们需要的要长，因为我将 Photo Sphere 照片保持在 50MP 所以每个大约 7-8MB

# linux - 是什么导致在 find 中执行 -type f 的时间增加

> ID：14594935
> 
> 赞同：1
> 
> 时间：2013-01-30T00:53:06.347
> 
> 标签：linux, bash, unix, find

我在包含大约 1M 文件的卷组合上完成了以下命令。

```
$ sudo find "$FULFILLMENT" "$ARCH1" "$ARCH2" "$MASTERING"
Tue Jan 29 15:04:05 PST 2013
Tue Jan 29 15:22:46 PST 2013
18m41s

$ sudo find "$FULFILLMENT" "$ARCH1" "$ARCH2" "$MASTERING" -type f
Tue Jan 29 15:24:06 PST 2013
Tue Jan 29 15:49:10 PST 2013
25m4s 
```

为什么 using`-type f`比普通的 find 命令花费这么多时间？我认为它会更快，因为它不必遍历所有文件（可能减少 20% 的文件）。时间增加的原因是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T01:32:47.387

没有该`-type f`参数，`find`将不会`stat`每个文件，而是使用`readdir`系统调用来获取目录条目，减少系统调用、上下文切换、inode 查找等次数。

在这种特定情况下，`find`可以使用查询优化器。`-O2`在手册页中查找`find`. 您的查询将变为：

```
$ sudo find -O2 "$FULFILLMENT" "$ARCH1" "$ARCH2" "$MASTERING" -type f 
```

这应该与不带 的查找具有相同的性能，`-type f`因为它将尝试使用`readdir`系统调用返回的文件类型信息（如果可用），而不是要求对每个文件单独`stat`调用。

**进一步背景：**

并非所有文件系统都支持`type`在调用中返回文件信息`readdir`，并且并非所有版本的`find`编译都会支持此扩展类型信息。

如果`find --version`报告该`D_TYPE`功能，则您的查找支持阅读此附加类型信息。文件系统类型 ext2、ext3、ext4 支持该`D_TYPE`字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T00:57:40.103

它必须遍历目录并对`stat`它们进行操作以找出它们是否是文件（不是目录、符号链接等）。

PS：我正在对值“$FULFILLMENT”“$ARCH1”“$ARCH2”“$MASTERING”做出一些假设

# ruby-on-rails - Rails：model.save 返回 false 但 models.errors 是一个空哈希

> ID：14594938
> 
> 赞同：3
> 
> 时间：2013-01-30T00:53:12.083
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个模型对象，其 .save 返回错误。它随后有一个 .errors 属性，它是一个空哈希。散列不应该包含出错的列表吗？我还能如何确定保存不起作用的原因？

泰，弗雷德

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-30T00:57:17.373

这意味着您的回调之一可能正在停止保存，但没有列出验证错误。

检查返回值，尤其是任何`before_`回调，并确保它们没有返回`false`

如果它们返回`false`，则活动记录将停止未来的回调并从保存中返回 false。

您可以在“取消回调”下阅读一些关于它的[信息](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-04T17:02:52.847

1) 禁用**before_create、before_save、before_update**并检查它保存一天的位置

2) 如果回滚是由其中一种方法引起的，请在您不打算回滚时检查这些方法是否返回 true。

例如，如果您为布尔字段设置默认值以避免 nil，您可能会这样做

```
def set_defaults_before_create
  self.my_boolean_field ||= false
end 
```

在此示例方法中， **set_defaults_before_create**始终返回**false**并因此回滚您的事务。所以重构它以返回 true

```
def set_defaults_before_create
  self.my_boolean_field ||= false
  true
end 
```

# php - 如何使用 html5/动态站点创建 URL

> ID：14594939
> 
> 赞同：-9
> 
> 时间：2013-01-30T00:53:14.333
> 
> 标签：php, jquery, html, web-applications, dynamic

我正在创建一个完全 jQuery HTML5 网站。内容全部由 xml 提要填充。这都是程序化的。由于没有任何静态页面（只有一个 index.php），如何为搜索引擎索引内容？当站点只是动态创建时，开发人员通常会做什么？如果我想（例如）在每个页面上放置一个“tweet this”按钮怎么办。我怎样才能让那个按钮创建一个 URL，然后（可能）触发一个显示正确内容的函数？

编辑问题

我在问这个 - 因为，对于我正在构建的动态站点，只有一个 URL - index.php。现在通常搜索引擎会爬过网站的“页面”。但这没有任何页面 - 它只是动态内容。搜索引擎真的没有什么可以抓取的。接下来，如果我单击站点中的链接（再次动态创建链接并链接到动态创建的其他内容），例如，我单击“小部件 1”，它会将我带到该产品的描述页面。我无法发送该描述页面 URL，因为它没有。那么你会如何解决这个问题呢？在 php 情况下（也是动态的），您可以将查询字符串放在 url 中。但这就是 Jquery 的全部内容——所有内容都导入到 index.php 中。那有意义吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:31:55.813

您可以做些什么来制作唯一的 URL（不刷新页面）是使用

```
window.location.hash = '#whatever';" 
```

这将为您提供一个 URL，如果用户共享该 URL，您将能够解析和处理以显示正确的产品

但是...从 SEO 的角度来看，这可能不会给出您想要的结果，因为当 Google/Bing 索引页面时，该位置的哈希将被忽略，因此您可能还希望支持使用查询字符串参数 (?product=无论如何）虽然这会导致页面重新加载。

有关更多详细信息和其他建议的解决方案，请参阅[更改浏览器中的 URL 而无需使用 JavaScript 加载新页面](https://stackoverflow.com/questions/136458/change-the-url-in-the-browser-without-loading-the-new-page-using-javascript)

# java - Java 服务器基本计算器

> ID：14594941
> 
> 赞同：0
> 
> 时间：2013-01-30T00:53:43.083
> 
> 标签：java

在这个程序中，我的服务器从客户端获取一个命令，后跟 1 或 2 个操作数，并返回操作结果。

我在扫描客户端输入行和在 switch 语句中执行实际操作时遇到问题，如果有人能指出我正确的方向，我将不胜感激。

这是代码：

```
import java.io.*;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.Scanner;

// Takes in a mathematical operation and the operands from a client and returns the result
// Valid operations are add, sub, multiply, power, divide, remainder, square 
public class MathServer 
{ 
    public static void main(String [] args) throws IOException 
    { 
        ServerSocket yourSock = new ServerSocket(50000); //put server online
        while(true)  
        { 
            System.out.println("Waiting to accept connection");
            Socket clientSock = yourSock.accept();  //open server to connections
            System.out.println("Connection accepted");
            process(clientSock);                    //process accepted connection
            System.out.println("Connection closed");
        } 
    }  

    //BufferedReader(Reader r)
    static void process(Socket sock) throws IOException 
    {  
        InputStream in = sock.getInputStream(); 
        BufferedReader br = new BufferedReader(new InputStreamReader(in)); 
        OutputStream out = sock.getOutputStream(); 
        PrintWriter pw = new PrintWriter(out, true);       

        String input = br.readLine(); //get user input from client         

        while(input != null && !input.equals("bye")) //check for input, if bye exit connection
        {              
            int answer = operate(input); //perform desired operation on user input
            pw.println(answer);          //print out result
            input = br.readLine();       //get next line of input 
        } 
        sock.close(); 
    }  

    //Talk to the client          
    static int operate(String s) 
    { 
        System.out.println(s); //check if same as client input

        Scanner myScanner = new Scanner(s); 
        String opType = myScanner.next();   //gets desired operation

        System.out.println(opType); //checks for correct operation 

        switch (opType) { 
            case "add": 
                return (myScanner.nextInt() + myScanner.nextInt());
            case "sub":
                return (myScanner.nextInt() - myScanner.nextInt());
            case "multiply":
                return (myScanner.nextInt() * myScanner.nextInt());
            case "power":
                return (int) Math.pow(myScanner.nextInt(), myScanner.nextInt());
            case "divide":
                return myScanner.nextInt() / myScanner.nextInt();
            case "remainder":
                return myScanner.nextInt() % myScanner.nextInt();
            case "square":
                return (int) Math.pow(myScanner.nextInt(), 2);
            default:
                return (int) Math.pow(myScanner.nextInt(), 3);
        }        
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T01:08:36.560

当您`BufferedReade.readLine()`在服务器中阅读时，请确保从客户端发送换行符（常见错误）。此外，您可能需要`OutputStream`从客户端刷新。由于您`Scanner`读取变量的方式，您需要从客户的单行发送值，例如

```
add 100 200 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T00:59:02.700

`switch(opType)`不适用于字符串。

检查类似的东西

```
if(opType.equals("add")){ //do Add }
else if(opType.equals("sub")){ //do subtraction } 
```

等等

# ruby-on-rails - Rails：简化控制器代码的建议

> ID：14594942
> 
> 赞同：2
> 
> 时间：2013-01-30T00:54:06.490
> 
> 标签：ruby-on-rails, controller, cancan

我想我可能正在接近这个错误。寻求 Rails 社区关于 Rails 处理此类问题的建议：

我有一个预订资源。模型属性看起来像：

```
# == Schema Information
#
# Table name: reservations
#
#  id              :integer          not null, primary key
   ...
#  amount_received :integer
#  party_size      :integer          default(1)
#  user_id         :integer
#  event_id        :integer
#  confirmed_at    :datetime
#  edited_by       :integer
#  comped_by       :integer
#  created_at      :datetime         not null
#  updated_at      :datetime         not null
   ... 
```

这些对象可能会发生很多事情：

*   它可以被创建
*   付款可以应用于一个
*   可以确认。
*   它可以被压缩（内部由具有适当授权的人）
*   可以取消
*   ETC...

我的问题是基本的，但如何处理这些事件？它们都是`update`控制器上动作的一部分（嗯，除了第一个和最后一个）。我的控制器变得松鼠并开始“闻”起来。现在我通过添加一个`param`然后检查`param`控制器中是否存在来识别一个“动作”。然后根据它是什么，我检查用户是否被授权执行所述操作（尽管操作我的意思是更新的子操作，因为它们*都是* `update`“操作”），然后，只有这样，我才调用模型上的方法`receive_payment(amount)`.

虽然这变得很麻烦，因为用户可以更新*他们的*预订（取消和更改party_size）但他们不能“接收付款”或“补偿”它等等......我正在使用 Ryan Bates 的 Can Can gem授权，但我不知道它对我有这么好的帮助......

例如，`flash`消息应该更具体，例如`"Payment received from #{@reservation.user.name}"`或`"Could not comp reservation for {@reservation.user.name}"`

控制器部分：

```
 def update
    @reservation = Reservation.find(params[:id])
    # authorize! :update, @reservation #handled by load_and_authorize_resource up top
    authorize! :accept_payment, @reservation if params[:reservation][:comped_by]
    @reservation.edited_by = current_user.id if params.has_key?(:amount_received)
    ... 
    if @reservation.update_attributes params[:reservation]
      redirect_to event_reservations_path(@reservation.event_id), flash: { success: "Reservation updated" }
    else
      render action: "show", error: "Error updating reservation"
    end
  end 
```

想法？

似乎有可能接近这个错误？！？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:28:13.187

您可以在模型中创建一个方法并像这样在控制器中使用它。

```
def update
Reservation.method_for_all_actions(params[:some_parameter])
end 
```

params[:some_parameter] 应该包含正在执行的操作类型，即

*   它可以被创建

*   付款可以应用于一个

*   可以确认。

*   它可以被压缩（内部由具有适当授权的人）

*   它可以被取消等等...

然后检查模型正在传递哪种类型的参数[：some_parameter]并执行功能。

# r - 对 ggplot2 箱线图进行排序

> ID：14594944
> 
> 赞同：0
> 
> 时间：2013-01-30T00:54:22.210
> 
> 标签：r, sorting, ggplot2, dataframe, boxplot

> **可能重复：**
> [ggplot2条形图中的顺序条](https://stackoverflow.com/questions/5208679/order-bars-in-ggplot2-bar-graph)

我在 R 中有以下数据框 ( `df`)，我希望为其创建一个箱线图：

```
 Entity  Mean    Min Q1      Med     Q3      Max
1   ABCD    88.65   0   75.0    100.0   100.0   100
2   BAAF    88.73   0   91.0    100.0   100.0   100
3   BCC4    70.26   0   20.0    100.0   100.0   100
4   C9FE    77.98   0   66.0    86.0    100.0   100
5   D3AA    71.97   0   51.0    82.0    100.0   100 
```

我使用的代码如下：

```
Lplot <- ggplot(df, aes(Entity, ymin=Min, lower=Q1, middle=Med, upper=Q3, ymax=Max,
         fill=Mean))
mth <- theme(axis.text.x = element_text(angle = 90, hjust = 1))
bplot <- geom_boxplot(stat="identity")
sfg <- scale_fill_gradient("Mean", low="green", high="red")

Lplot + mth + sfg + bplot 
```

这在 x 轴上绘制了数据框，`Entity`在 y 轴上绘制了适当的分位数。但是，我想按`Mean`. 我可以通过替换来实现这种效果`aes(Entity,...`，但是当我仍然想要那里的名称`aes(factor(Mean),...`时，平均值会出现在 x 轴上。`Entity`

基本上我所追求的是一个按 排序`Mean`但由 标记的箱线图`Entity`。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T01:01:41.933

`Entity`需要是按正确顺序排序的级别的一个因素：

```
df$Entity <- factor(df$Entity, levels = df$Entity[rank(df$Mean)]) 
```

# c++ - 当一对在向量中时，如何设置两对彼此相等？

> ID：14594945
> 
> 赞同：-2
> 
> 时间：2013-01-30T00:54:27.233
> 
> 标签：c++

如果你有类似的东西`vector<pair<int, int> > one`，`one.push_back(make_pair(1,2))`如果我声明另一对，我`pair<int, int> thisOne`怎样才能使它等于从向量中弹出的向量元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:56:08.060

要比较[std::pair](http://en.cppreference.com/w/cpp/utility/pair)，您可以只使用[对](http://en.cppreference.com/w/cpp/utility/pair/operator_cmp)比较运算符，它定义了所有比较运算符：

```
operator==,!=,<,<=,>,>=(std::pair) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T01:24:49.863

什么元素从向量中弹出，你还没有说任何关于弹出的内容。

也许你想要：

```
thisOne = one.back(); 
```

# oop - MATLAB OOP 和慢速运算符重载

> ID：14594946
> 
> 赞同：1
> 
> 时间：2013-01-30T00:54:30.950
> 
> 标签：oop, matlab, optimization

是否有可能从以下简单类中获得 3-6 倍的加速？

我正在尝试创建一个伪装成内联函数的类，但括号/subsref 运算符重载对我来说速度不够快。

我创建了一个类`CTestOp`来替换内联函数 ，方法`f = @(x) A*x`是让 subsref 获取一个向量并将其与类属性相乘`A`。

基准测试表明，对于小尺寸`A`和`x`（例如，m = 5），使用内联函数需要 4-7 倍的时间，因为使用内联函数`A*x`需要 4-7 倍的时间来使用类使用内联函数：

```
Elapsed time is 0.327328 seconds for the class
Elapsed time is 0.053322 seconds for the inline function.
Elapsed time is 0.011704 seconds for just writing A*x. 
```

我已经进行了一系列改进才能到达这里，但存在问题。例如，我可以看到实质性的收获，不要求`this.A`但随后违背了整个目的。我本来希望使用一个允许我们编写各种`operation`函数的抽象类——但是，虽然使类抽象并没有增加太多时间，但使实际的函数调用却增加了时间。

有任何想法吗？

课程是：

```
classdef CTestOp < handle

    properties     
        A = [];
    end

    methods
        function this = CTestOp(A)
            this.A = A;
        end

        function result = operation(this, x)
            result = this.A*x;
        end

        function result = subsref(this, S)

%             switch S.type
%                 case '()'
                    %   result = this.operation(S.subs{1});  % Killed because this was really slow
                    %   result = operation(this, S.subs{1}); % I wanted this, but it was too slow
                    result = this.A*S.subs{1};
%                 otherwise
%                     result = builtin('subsref', this, S);
%             end

        end
    end

end 
```

虽然测试代码是：

```
m = 5;
A = randn(m,m);
x = randn(m,1);

f = @(x) A*x;

myOp = CTestOp(A);

nc = 10000;

% Try with the class:
tic
for ind  = 1:nc
r_abs = myOp(x);
end
toc

% Try with the inline function:
tic
for ind = 1:nc
r_fp = f(x);
end
toc

% Try just inline. so fast!
tic
for ind = 1:nc
r_inline = A*x;
end
toc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:43:03.050

如果您想在 Matlab 中编写快速代码，诀窍始终是对代码进行矢量化。使用 Matlab OO 也是如此。虽然我目前无法对其进行测试，但我非常有信心您可以通过执行一项大操作而不是许多小操作来减少开销。

在您的具体示例中，您可以再次运行基准测试，并通过更改这两行来查看我的声明是否真的成立：

```
m = 500; % Work with one big matrix rather than many tiny ones

nc = 99; % Just some number that should give you reasonable run times 
```

# wpf - WPF 上下文菜单鼠标悬停

> ID：14594956
> 
> 赞同：0
> 
> 时间：2013-01-30T00:55:42.077
> 
> 标签：wpf, binding, click, contextmenu, mouseevent

我想知道是否有一种方法可以将当前`ContextMenu`项目绑定到 WPF 中的属性，而无需先单击它。

例如：

```
<MenuItem MaxHeight="20"
          HorizontalAlignment="left"
          Header="Radio Group"
          Name="cmRadio"
          ItemsSource="{Binding RadioGroups, Mode=OneWay}" /> 
```

我希望能够在单击之前弄清楚鼠标在哪个项目上。

抱歉没有提前说明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T01:08:25.283

您可以使用许多“鼠标悬停”事件，其中一些完全在 XAML 中。

[类似问题](https://stackoverflow.com/questions/3734061/event-for-mouseover-action-in-wpf)

进一步了解 XAML 答案。

# java - Dagger：POJO 中的字段注入

> ID：14594957
> 
> 赞同：3
> 
> 时间：2013-01-30T00:55:50.187
> 
> 标签：java, android, dependency-injection, dagger

我从未尝试过 Guide 或其他 DI 库，而是尝试将来自 Square 的 Dagger 用于 Android 应用程序。它适用于 Frgements，但不适用于 POJO。[用户指南](http://square.github.com/dagger/)假定对 DI 有一定的了解，因为它没有更详细地解释。我应该怎么做才能注入`restAdapater`我的 POJO。如果我使用相同的代码进行字段注入，它可以在 Fragment 中工作。

```
public class MyApplication extends Application {
    private ObjectGraph objectGraph;

    @Override
    public void onCreate() {
        super.onCreate();
        objectGraph = ObjectGraph.create(new DIModule(this));

    }

    public ObjectGraph objectGraph() {
        return objectGraph;
    }

    public void inject(Object object) {
        objectGraph.inject(object);
    }

    ...
    @Module(entryPoints = { 
    MainActivity.class,  
    .....,
    Auth.class, 
    RestAdapter.class
    })
    static class DIModule {@Provides
        @Singleton
        public RestAdapter provideRestAdapter() {
            return new RestAdapter.Builder().setServer(
                    new Server(Const.BASE_URL)).build();
        }
    }
} 
```

//POJO

```
public class Auth {

    @Inject
    RestAdapter restAdapater;

    String Username;
    String Password;

    public String authenticate() {
     ...

     Api api = restAdapater.create(..)  // **restAdapater is null**

     }
} 
```

所有的片段都是从下面派生的，DI 在其中工作得很好。在[Eric burke 最近的一次演讲中](http://www.infoq.com/presentations/Android-Design)，他解释说这是必要的，因为 Android 会构造对象。

```
public class BaseFragment extends Fragment {
    @Override
    public void onCreate(Bundle state) {
        super.onCreate(state);

        ((MyApplication) getActivity()
                .getApplication())
                .inject(this);
    }

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T12:35:17.457

如果你自己创建了一个 Auth 实例，那么 Dagger 不会知道这个实例并且不能为你注入依赖。

由于您已经在 Module entryPoints 中声明了 Auth.class，您只需向 ObjectGraph 询问 Auth 实例：

```
Auth auth = objectGraph.get(Auth.class); 
```

然后，Dagger 会知道提供 Auth 实例需要什么，即将它与您的 RestAdapter 一起注入。

# mysql - AES_ENCRYPT 是否会减少加密文本的字节大小？

> ID：14594958
> 
> 赞同：1
> 
> 时间：2013-01-30T00:55:55.830
> 
> 标签：mysql, sql, aes

我知道这`base64`会将特定图像或文本的总“大小”增加 1/3，但是呢`AES_ENCRYPT`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T01:17:06.303

AES 是一种分组密码，因此仅以指定块大小的倍数处理数据。它的输入（结果是输出）用足够的字节填充，以将大小向上舍入为块大小的倍数。由于手册[说](http://dev.mysql.com/doc/refman/5.1/en/encryption-functions.html#function_aes-encrypt)使用 128 位密钥，我们知道块大小为 16 字节。

该手册还给出了一个数学描述的公式：

> 可以使用以下公式计算结果字符串长度：
> 
> ```
> 16 * (trunc(string_length / 16) + 1) 
> ```

# php - 使用 ajax 提交表单并发布到页面

> ID：14594960
> 
> 赞同：0
> 
> 时间：2013-01-30T00:56:00.977
> 
> 标签：php, jquery, jquery-validate

这里有点棘手有没有一种方法可以将下面的两个脚本合并为一个，所以当表单发布时，它实际上将两个不同的命名 url 加载到 2 个不同的命名 div 中

```
 <script type="text/javascript">
$(document).ready(function(){
$("#profile").validate({
     debug: false,
    submitHandler: function(form) {$.post('brides_Includes/edit-profile-top.php', $("#profile").serialize(), function(data) {
       $('#results').html(data);
        //This executes the JavaScript passed back by the ajax.
        $("#results").find("script").each(function(i) {
          eval($(this).text());
        });

        $("form#profile")[0].reset();
      });
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){
$("#profile").validate({
     debug: false,
    submitHandler: function(form) {$.post('brides_Includes/welcome-menu.php', $("#profile").serialize(), function(data) {
       $('#mymenu').html(data);
        //This executes the JavaScript passed back by the ajax.
        $("#mymenu").find("script").each(function(i) {
          eval($(this).text());
        });

        $("form#profile")[0].reset();
      });
    }
  });
});
</script> 
```

我不确定这是否可能，但如果是的话会很棒:)非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T01:04:33.417

只需将第二个的内容`submitHandler`放入第一个：

```
submitHandler: function(form) {
   var jqxhr1 = $.post('brides_Includes/edit-profile-top.php', $("#prof...
   function(data) {
       $('#results').html(data);
        //This executes the JavaScript passed back by the ajax.
        $("#results").find("script").each(function(i) {
          eval($(this).text());
        });
      });
    }
  var jqxhr2 = $.post('brides_Includes/welcome-menu.php', $("#pro...
  function(data) {
   $('#mymenu').html(data);
    //This executes the JavaScript passed back by the ajax.
    $("#mymenu").find("script").each(function(i) {
      eval($(this).text());
    });

  $.when(jqxhr1, jqhxr2).done(function() { $("#profile")[0].reset(); });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T08:46:06.307

```
<script>
function ajax_loadpage(loadUrl,output_container)
    {
        $.post
        (
            loadUrl,
            {language: "php", version: 5},function(responseText){$(output_container).html(responseText);},"html"
        );
    }

ajax_loadpage("url1.php","#div1");
ajax_loadpage("url2.php","#div2");

</script> 
```

the first parameter should be supplied with the URL you want to load, the second will be the name of the id of the element you want to load it into.

# asp.net - asp.net 网站子文件夹上的 Wordpress

> ID：14594961
> 
> 赞同：1
> 
> 时间：2013-01-30T00:56:02.720
> 
> 标签：asp.net, wordpress

我希望我的网站域子文件夹指向我在 wordpress.com 上的网站，并保持 url 栏中的网站地址相同。

例如，网站是 www.domain.com，博客是 www.domain.com/blog，而我的 wordpress 网站是 mysite.wordpress.com。我希望 www.domain.com/blog 指向 mysite.wordpress.com，但不更改 url 栏中的 url。

该网站建立在 asp.net 上。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T01:15:30.260

呃呃呃，一般来说，没有。

10 年前，当框架可以接受时`<frameset>`，您的网站上会有一个页面，并且您会将您的 wordpress 博客加载到框架中，而您的访问者不会在地址栏中看到 wordpress.com 域名 - 但框架很糟糕并破坏诸如书签和站点导航之类的东西，这就是它们从 XHTML 和 HTML5 中删除的原因（它们的替代品 XFrames 是 DoA）。

在 IIS 中设置一个简单的重定向会有点工作，但不会在地址栏中保留您的域名，因为您的访问者*需要*直接连接到 Wordpress。

因此，唯一的解决方案是在您的网站上设置代理服务，将对您网站的请求代理到 Wordpress。这不是一件容易的事，但它是可行的。您只需要代理 HTML（可以很好地链接图像和其他资产之类的东西）。您可以在 IIS 中执行此操作，该`IHttpHandler`IIS 会伪造对 Wordpress 的新请求，然后使用 HtmlAgilityPack 之类的库将 HTML 中的适当 URI 替换为代理服务的 URI。

诸如 POSTable 表单和 Ajax 请求之类的东西可能会中断——我个人认为不值得这么麻烦。我会为高级 Wordpress.com 子域付费，或者在本地安装 Wordpress。

# xml - 如何从 XML 文档生成文档？

> ID：14594964
> 
> 赞同：0
> 
> 时间：2013-01-30T00:56:14.533
> 
> 标签：xml, documentation, xsd, documentation-generation

我`XML`从一家公司获得了一组文档，这些文档旨在包含`XML`架构的“文档”。没有`XSDs`提供。

如何从这些包含如下所示文档的 XML 文档生成文档（例如`HTML`或）？`CHM`

以下是 XML 内容的示例：

```
<ELEMENT1>

  <!--
  documentation text ....
  -->
  <ELEMENT2>
    <ELEMENT3>ABC</ELEMENT3>
  </ELEMENT3>

  <!--
  documentation text ....
  -->
  <ELEMENT4>
    <ELEMENT5>0534564117</ELEMENT5>
    <ELEMENT6>123456</ELEMENT6>
    <ELEMENT7>090314b4-fc7d-42c5-b382-a5b745671ee32b</ELEMENT7>
  </ELEMENT4>

</ELEMENT1> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T01:28:37.633

要解决您的问题，可能会有解决方案。但这需要一些工作：

1.  从 XML 文件生成 XSD（例如使用[trang ->](http://www.thaiopensource.com/relaxng/trang.html) [tutorial](http://www.dotkam.com/2008/05/28/generate-xsd-from-xml/)）
2.  将文档添加到生成的 XSD 文件中（使用`<xs:annotation/>`元素）
3.  从 XSD 生成文档（使用[xs3p](http://xml.fiforms.org/xs3p/)）

这里的所有工具都是免费的。但是如果可以付费的话，[oXygen](http://oxygenxml.com/)似乎有很强大的功能。

# javascript - 如何缩短 url 以仅使用 angular.js 过滤器显示域

> ID：14594965
> 
> 赞同：4
> 
> 时间：2013-01-30T00:56:19.603
> 
> 标签：javascript, angularjs

我的 Json 中有一些长网址，我试图找出使用 angular 过滤器或仅显示一些 javascript 的域的最佳方法？

[http://www.example.com/page-with-a-long-long-long-OMG-so-long-name.html](http://www.example.com/page-with-a-long-long-long-OMG-so-long-name.html)

至

www.example.com

谢谢你 ！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-30T01:15:59.207

在 AngularJS 中创建自己的过滤器真的很容易：

```
app.filter( 'domain', function () {
  return function ( input ) {
    var matches,
        output = "",
        urls = /\w+:\/\/([\w|\.]+)/;

    matches = urls.exec( input );

    if ( matches !== null ) output = matches[1];

    return output;
  };
}); 
```

您可以在视图中轻松调用：

```
<span>{{ myUrl | domain }}</span> 
```

这是一个 Plunker：[http ://plnkr.co/edit/bVSv7n?builder&p=preview](http://plnkr.co/edit/bVSv7n?builder&p=preview)

这是一个超级简单的正则表达式，您可能想要扩展它，但它确实有效！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-04-05T21:11:29.837

这个角度过滤器也可以工作！

它真的很酷很简单，因为它利用了浏览器内置的 URI 解析功能，而不是依赖于正则表达式。

```
angular.module('myCoolApp')
  .filter('urlFilter', function ($document) {
    return function (input) {
      var parser = document.createElement('a');
      parser.href = input;
      return parser.hostname;
  };
}); 
```

您可以像这样在您的视图中实现它。

```
{{ myLongURL | urlFilter }} 
```

如果`myLongURL`是[http://www.example.com/page-with-a-long-long-long-OMG-so-long-name.html](http://www.example.com/page-with-a-long-long-long-OMG-so-long-name.html)，那么它将`example.com`在通过过滤器后显示。如果你想要一`www.`开始你可以这样做！

```
www.{{myLongURL | urlFilter}} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T01:10:29.113

用于[`location.hostname`](https://developer.mozilla.org/en-US/docs/DOM/window.location)获取没有应计的域。

[http://fiddle.jshell.net/TUeJ7/](http://fiddle.jshell.net/TUeJ7/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-31T13:45:56.657

我创建了这个过滤器

```
angular.module('App').filter( 'domainOfUrl',['$filter',function ($filter) {
  return function ( input ) {
     var urlParts = input.split('/');      
    return urlParts[2];
  };
}]); 
```

上面的过滤器是这样工作的：

输入 ：`https://www.amazon.in/b/ref=s9_acss_bw_***_x`

输出：`www.amazon.in`

**`$filter`如果需要，请使用。**

# ruby - Ruby 类对象中的实例变量

> ID：14594968
> 
> 赞同：0
> 
> 时间：2013-01-30T00:56:29.783
> 
> 标签：ruby

`@v`鉴于下面的 Ruby 代码，有人可以帮助我理解和之间的不同用例`@@w`吗？我知道类`C`是类的对象，`Class`因此，`@v`是类`C`对象的实例变量。

```
class C
  @v = "I'm an instance variable of the class C object."
  puts @v

  @@w = "I'm a class variable of the class C."
  puts @@w
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T01:02:13.103

每次创建对象时都会使用实例变量，如果它们未初始化，则它们有一个`nil`值，并且类变量需要初始化，如果没有，它们会产生错误。

最大的原因之一是子分类。如果您计划子类化，则需要使用类变量。这是一个讨论两者以及何时使用什么的链接：

[http://www.railstips.org/blog/archives/2006/11/18/class-and-instance-variables-in-ruby/](http://www.railstips.org/blog/archives/2006/11/18/class-and-instance-variables-in-ruby/)

这是一个链接，应该有助于描述两者之间的区别：

[http://www.tutorialspoint.com/ruby/ruby_variables.htm](http://www.tutorialspoint.com/ruby/ruby_variables.htm)

这是我刚才提到的网站上的一些代码，显示两者都在使用：

```
 #!/usr/bin/ruby

class Customer
   @@no_of_customers=0
   def initialize(id, name, addr)
      @cust_id=id
      @cust_name=name
      @cust_addr=addr
   end
   def display_details()
      puts "Customer id #@cust_id"
      puts "Customer name #@cust_name"
      puts "Customer address #@cust_addr"
    end
    def total_no_of_customers()
       @@no_of_customers += 1
       puts "Total number of customers: #@@no_of_customers"
    end
end

# Create Objects
cust1=Customer.new("1", "John", "Wisdom Apartments, Ludhiya")
cust2=Customer.new("2", "Poul", "New Empire road, Khandala")

# Call Methods
cust1.total_no_of_customers()
cust2.total_no_of_customers() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T01:06:58.913

实例变量的范围仅限于类的对象。例如。如果您通过创建对象来实例化 C 类，那么您可以访问 @v。

当类变量跨越类时，即它们对类（即对象）和其他类方法的实例也是可见的。

**相关阅读：**

[类变量和类实例变量的区别？](https://stackoverflow.com/questions/3802540/difference-between-class-variables-and-class-instance-variables)

[http://www.railstips.org/blog/archives/2006/11/18/class-and-instance-variables-in-ruby/](http://www.railstips.org/blog/archives/2006/11/18/class-and-instance-variables-in-ruby/)

# sql - SQL查询将一列分成单独的列

> ID：14594969
> 
> 赞同：1
> 
> 时间：2013-01-30T00:56:50.093
> 
> 标签：sql, dataframe

我想为 H 和 T 的价格设置单独的列，以“句点”作为通用索引。关于我应该如何解决这个问题的任何建议？

这是我的 SQL 查询目前产生的结果：

![在此处输入图像描述](../Images/badff1eae0bbfaee95ae962ed3a65cf3.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T01:00:49.670

您可以使用`GROUP BY`and 条件，如下所示：

```
SELECT
    period
,   SUM(CASE NAME WHEN 'H' THEN price ELSE 0 END) as HPrice
,   SUM(CASE NAME WHEN 'T' THEN price ELSE 0 END) as TPrice
FROM MyTable
GROUP BY period 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T01:01:16.447

您可以执行以下操作：

```
SELECT period, 
    max(CASE WHEN name = 'H' THEN price END) as h_price,
    max(CASE WHEN name = 'T' THEN price END) as t_price
FROM myTable
GROUP by period 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T01:06:00.897

如果您的意思是重新创建表？

1) 创建一个包含列的新表：period、price_h 和 price_t。

2）将所有（不同的）从周期复制到新表的周期。

3) 将 name = H 的所有价格复制到新表的 price_h 加入期间列

4) 对 price_t 重复 3....

祝你好运！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T01:21:22.697

对此游戏有点晚了，但您也可以旋转数据。

让我们创建一个示例表。

```
CREATE TABLE myData(period int, price decimal(12,4), name varchar(10))
GO
-- Inserting Data into Table

INSERT INTO myData
(period, price, name)
VALUES
(1, 53.0450, 'H'),
(1, 55.7445, 'T'),
(2, 61.2827, 'H'),
(2, 66.0544, 'T'),
(3, 61.3405, 'H'),
(3, 66.0327, 'T'); 
```

现在执行带有枢轴的选择。

```
SELECT period, H, T
FROM (
SELECT period, price, name
FROM myData) d
PIVOT (SUM(price) FOR name IN (H, T)) AS pvt
ORDER BY period 
```

当我需要构建一个动态 sql 脚本来获取将在表头上显示的列时，我使用了这种技术。不需要案例陈述。

我不确定机箱和支点的性能。也许有更多经验的人可以添加一些评论，以提供更好的性能。

# php - $this 在类中的闭包数组中

> ID：14594972
> 
> 赞同：0
> 
> 时间：2013-01-30T00:57:16.157
> 
> 标签：php, class, closures

假设有一个对象类，让我们以 User 为例。User 类包含它自己的规则，用于在提交之前验证它的数据。在保存到数据库之前，将检查规则并返回任何错误。否则更新将运行。

```
class User extends DBTable // contains $Rules, $Data, $Updates, and other stuff
{
    public __construct($ID)
    {
        parent::__construct($ID);
        // I'll only list a couple rules here...
        $this->Rules['Email'] = array(
            'Empty' => 'ValidateEmpty', // pre-written functions, somewhere else
            'Invalid' => 'ValidateBadEmail', // they return TRUE on error
            'Duplicate' => function($val) { return existInDatabase('user_table', 'ID_USER', '`Email`="'. $val .'" AND `ID_USER`!='. $this->ID);}
        );
        $this->Rules['Password'] = array(
            'Empty' => 'ValidateEmpty',
            'Short' => function($val) { return strlen($val) < 8; }
        );
        this->Rules['PasswordConfirm'] = array(
            'Empty' => 'ValidateEmpty',
            'Wrong' => function($val) { return $val != $this->Updates['Password']; }
        );
    }

    public function Save(&$Errors = NULL)
    {
        $Data = array_merge($this->Data, $this->Updates);
        foreach($this->Rules as $Fields => $Checks)
        {
            foreach($Checks as $Error => $Check)
            {
                if($Check($Data[$Field])) // TRUE means the data was bad
                {
                    $Errors[$Field] = $Error; // Say what error it was for this field
                    break; // don't check any others
                }
            }
        }
        if(!empty($Errors))
            return FALSE;

        /* Run the save... */

        return TRUE; // the save was successful
    }
} 
```

希望我在这里张贴的足够多。所以你会注意到，在电子邮件的**重复**错误中，我想检查他们的新电子邮件对于除他们自己以外的任何其他用户是否不存在。**PasswordConfirm**还尝试使用 $this->Updates['Password'] 来确保他们两次输入相同的内容。

运行 Save 时，它​​会遍历规则并设置存在的任何错误。

**这是我的问题：**

```
Fatal error: Using $this when not in object context in /home/run/its/ze/germans/Class.User.php on line 19 
```

我想使用 $this 的所有闭包都会出现此错误。

似乎数组中的闭包和类中的数组的组合导致了问题。这个规则数组的东西在类之外工作正常（通常涉及“使用”），AFAIK 闭包应该能够在类中使用 $this。

那么，解决方案？变通？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T01:01:52.217

问题出在`Wrong`验证器上。从这里调用验证方法：

```
if($Check($Data[$Field])) // TRUE means the data was bad 
```

此调用不是在对象上下文中进行的（lambda 不是类方法）。因此`$this`，在 lambda 的主体内部会导致错误，因为它仅在对象上下文中存在。

对于 PHP >= 5.4.0，您可以通过捕获以下内容来解决问题`$this`：

```
function($val) { return $val != $this->Updates['Password']; } 
```

`Updates`在这种情况下，无论其可见性如何，您都可以访问。

对于 PHP >= 5.3.0，您需要复制对象引用并捕获它：

```
$self = $this;
function($val) use($self) { return $val != $self->Updates['Password']; } 
```

但是，在这种情况下，您只能`Updates`在`public`.

# java - 从多个属性文件中读取 Ant 变量

> ID：14594975
> 
> 赞同：1
> 
> 时间：2013-01-30T00:57:47.163
> 
> 标签：java, ant, build

我有一个 Ant 构建文件，它在文件顶部导入以下内容：

```
<project name="..." ...>
    <property file="build.properties"/>
    ... 
```

在项目根目录中，我有两个属性文件：`build.properties`和`special-config.properties`. 我正在定义一个需要从中读取以下属性的目标`special-config.properties`：

> 总是问=真

所以目标需要是*这样*的（请记住，`build.properties`在这个目标执行之前很久就已经设置为属性文件）：

```
<target name="exec-special-logic">
    <!-- Somehow read special-config.properties#always.ask and set it to a local variable... -->
</target> 
```

但我确信如何加载第二个属性文件并使其属性（例如`always.ask`）对 Ant 可用。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T01:02:24.587

您可以从任意数量的不同文件中读取属性，因此您可以拥有

```
<property file="build.properties"/>
<property file="build.properties.part2"/> 
```

等等。在 Ant 中，为属性设置的第一个值是固定的——属性是不可变的。因此，如果您有：

```
<property name="my.prop" value="one" /> 
```

在第一个文件中的某处和

```
<property name="my.prop" value="two" /> 
```

稍后 - 也许在第二个文件中，该属性在构建期间将具有值“一”。

最近版本的一个特点是属性可以本地化到一个执行块——这让你“绕过”不变性。这是一个直接从 Ant[本地任务](http://ant.apache.org/manual/Tasks/local.html)的文档中提取的示例：

```
<property name="foo" value="foo"/>

<target name="step1">
    <echo>Before local: foo is ${foo}</echo>
    <local name="foo"/>
    <property name="foo" value="bar"/>
    <echo>After local: foo is ${foo}</echo>
</target>

<target name="step2" depends="step1">
    <echo>In step2: foo is ${foo}</echo>
</target> 
```

输出

```
step1:
     [echo] Before local: foo is foo
     [echo] After local: foo is bar

step2:
     [echo] In step2: foo is foo 
```

# android - 高端设备的 Android 布局问题

> ID：14594986
> 
> 赞同：0
> 
> 时间：2013-01-30T01:00:06.360
> 
> 标签：android

我是 Android UI 的新手......我得到了下面的布局，它基本上是一个图像视图、一个图像按钮（在满足特定逻辑之前一直隐藏）和底部的另一个图像视图。

这种布局在 ldpi 设备上运行良好，但在其他设备上看起来很糟糕......我还必须通过改变图像的高度来调整图像的大小，以影响图像的质量。

我怎样才能通过有一个可行的标准视图来解决这个问题？

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:id="@+id/welcomeTutorialImage"
        android:layout_width="wrap_content"
        android:layout_height="250dp"
        android:contentDescription="@string/welcome_tutorial"
        android:src="@drawable/welcome_tutorial_browse" />

    <ImageButton
        android:id="@+id/welcome_tutorial_start_btn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/welcomeTutorialImage"
        android:layout_centerInParent="true"
        android:layout_centerVertical="false"
        android:adjustViewBounds="true"
        android:background="@android:color/transparent"
        android:contentDescription="@null"
        android:src="@drawable/btn_startsavingstatic" />

    <ImageView
        android:id="@+id/welcomeTutorialProgressBar"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/welcome_tutorial_start_btn"
        android:layout_centerInParent="true"
        android:contentDescription="@string/welcome_tutorial"
        android:src="@drawable/welcome_tutorial_bar1" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T01:04:54.750

您可能想查看 ImageView 的 android:fitXY 属性。此外，发布可以进一步解释问题的屏幕截图。可能需要为不同的屏幕尺寸/分辨率（ldpi、mdpi、hdpi、xhdpi）提供不同尺寸的图像

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T02:22:45.720

大多数情况下，您必须调整应用程序的布局和图像分辨率，以便通过将它们放置在正确的文件夹中来使其与其他设备兼容，例如：

```
-drawable
-drawable-1280x752
-drawable-800x480
-drawable-hdpi
-drawable-ldpi
-drawable-mdpi etc.

-layout
-layout-land-1280x752
-layout-800x480
-layout-land
etc. 
```

通过将布局和图像放置到指定的文件夹中，您必须更改每个布局和图像大小，这将满足每个文件夹的要求。

如果您需要进一步参考，可以查看 [http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

# php - 带有解析错误的php函数：语法错误，意外'，'

> ID：14594988
> 
> 赞同：0
> 
> 时间：2013-01-30T01:00:22.207
> 
> 标签：php

下面的 PHP 函数产生了这个错误： Parse error: syntax error, unexpected ',', on this line that content this code：`( $className, new $this->registerService( $service ) );`

有谁知道出了什么问题？

```
function lazyCreateSingletonServiceByClassName($className) {
    $service = $this->createContextAwareObjectOfClass( $className );

    if (method_exists( $service, 'init' )) {
        $service->init(  );
    }

    SingletonServiceProvider;
    ( $className, new $this->registerService( $service ) );

} 
```

坦克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T01:01:31.607

我不能确切地说出这里发生了什么，但我*认为*

```
SingletonServiceProvider;
( $className, new $this->registerService( $service ) ); 
```

应该

```
SingletonServiceProvider( $className, new $this->registerService( $service ) ); 
```

# php - 如何在php中连接空格

> ID：14594992
> 
> 赞同：-4
> 
> 时间：2013-01-30T01:01:16.910
> 
> 标签：php, arrays, concatenation

那么我究竟如何在 $book 和括号之间添加一个空格？

```
<?php foreach($books as $isbn => $book) { ?>
<li><?php echo $book . "(" . $isbn . ")"; ?></li> 
```

我得到的显然是 $book($isbn)，而我想要的是 $book ($isbn)

我需要添加吗

```
. " " . 
```

在我的连接变量和第一个括号之间？

```
<li><?php echo $book . " " . "(" . $isbn . ")"; ?></li> ? 
```

请帮助我似乎无法让它工作，谢谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T01:02:04.000

这应该可以解决问题：

```
<li><?php echo $book . " (" . $isbn . ")"; ?></li> 
```

# backbone.js - 转换为 TypeScript 时，骨干路由不起作用

> ID：14594996
> 
> 赞同：2
> 
> 时间：2013-01-30T01:01:34.947
> 
> 标签：backbone.js, typescript, backbone-routing

我正在尝试将基本的 Backbone.js 路由器声明转换为 TypeScript。

```
var AppRouter = Backbone.Router.extend({
    routes: {
        "*actions": "defaultRoute"
    },

    defaultRoute: function () {
        document.write("Default Route Invoked");
    }
});

var app_router = new AppRouter();

Backbone.history.start(); 
```

我转换后的代码如下不起作用：

```
class AppRouter extends Backbone.Router {
    routes = {
        "*actions": "defaultRoute"
    }

    defaultRoute() {
        document.write("Default Route Invoked");
    }
}

var app_router = new AppRouter();

Backbone.history.start(); 
```

我没有得到编译时或运行时错误，但代码不起作用。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T10:52:41.770

正如史蒂夫芬顿所说，这是因为 Typescripts 扩展与下划线 / backones 扩展方法的工作方式不同。

主要问题是路由器在类型脚本层次结构的“子类”中设置*路由*字段之前调用*_bindRoutes() 。*

 *如 orad 所述，在您的 ts 类的构造函数中调用*Backbone.Router.apply(this, arguments)*可确保在设置*routes*字段后进行此调用。

手动调用此函数也可以解决问题。

仅供参考：如果您希望元素中的 dom 事件被触发，请在视图类的构造函数中调用*delegateEvents(this.events)*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T10:34:27.760

我看过了`Backbone.Router.extends`，它不是一个基本的原型扩展——所以你不能只是切换`Backbone.Router.extends`到 TypeScript 类扩展。

我会更改您的 TypeScript 文件，使其看起来更像您的原始 JavaScript - 您仍将受益于智能感知和类型检查 - 您只是没有使用类：

```
var AppRouter = Backbone.Router.extend({
    routes: {
        "*actions": "defaultRoute"
    },

    defaultRoute: function () {
        document.write("Default Route Invoked");
    }
});

var app_router = new AppRouter();

Backbone.history.start(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T03:17:47.987

在构造函数中添加所有已初始化的字段并在最后调用`super`：

```
class AppRouter extends Backbone.Router {

    routes: any;
    constructor(options?: Backbone.RouterOptions) {

        this.routes = {
            "*actions": "defaultRoute"
        }

        super(options);
    }

    initialize() {
        // can put more init code here to run after constructor
    }

    defaultRoute() {
        document.write("Default Route Invoked");
    }
}

var app_router = new AppRouter();

Backbone.history.start(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-30T06:50:25.957

接受的答案似乎不适用于 typescript 3.x 。该`super()`方法应在使用前调用`this`。重新排序代码将不起作用，因为主干正在`super()`方法中初始化路由。这是路由配置直接传递给`super()`.

```
class AppRouter extends Backbone.Router {

    constructor() {

        super({
            routes: {
                "*actions": "defaultRoute"
            }
        });
    }
} 
```*