# StackOverflow 问答 14004000-14004999

# c# - 是否有 C# 无法使用类型约束推断泛型类型参数的解决方法？

> ID：14004000
> 
> 赞同：10
> 
> 时间：2012-12-22T15:25:39.497
> 
> 标签：c#, generics, type-inference

Eric Lippert 在他的博客文章中解释了[http://blogs.msdn.com/b/ericlippert/archive/2009/12/10/constraints-are-not-part-of-the-signature.aspx](http://blogs.msdn.com/b/ericlippert/archive/2009/12/10/constraints-are-not-part-of-the-signature.aspx)为什么没有约束考虑类型推断，这是有道理的，因为不能通过简单地更改类型约束来重载方法。但是，我想找到一种使用两种通用类型实例化对象的方法，一种可以推断，另一种可以在考虑约束时推断，而无需指定任何类型。

给定类型：

```
public interface I<T>
{
    Other<T> CreateOther();
}

public class C : I<string>
{
    public Other<string> CreateOther()
    {
        return new Other<string>();
    }
}

public class Other<T>
{
} 
```

和工厂：

```
public static class Factory1
{
    public static Tuple<T, Other<T1>> Create<T, T1>(T o) where T : I<T1>
    {
        return new Tuple<T, Other<T1>>(o, o.CreateOther());
    }
} 
```

以下所需代码将无法编译：

```
 public void WontCompile()
    {
        C c = new C();
        var v = Factory1.Create(c); // won't compile
    } 
```

错误消息是“错误 CS0411：无法从用法中推断方法 'yo.Factory1.Create(T)' 的类型参数。尝试显式指定类型参数。”，这与 Eric 在他的博客中所说的一致邮政。

因此，我们可以简单地明确指定泛型类型参数，如错误消息所示：

```
 public void SpecifyAllTypes()
    {
        C c = new C();
        var v = Factory1.Create<C, string>(c); // type is Tuple<C, Other<string>>
    } 
```

如果我们不想指定类型参数并且我们不需要保留类型 C，我们可以使用以下工厂：

```
public static class Factory2
{
    public static Tuple<I<T1>, Other<T1>> CreateUntyped<T1>(I<T1> o)
    {
        return new Tuple<I<T1>, Other<T1>>(o, o.CreateOther());
    }
} 
```

现在指定：

```
 public void Untyped()
    {
        C c = new C();
        var v = Factory2.CreateUntyped(c); // type is Tuple<I<string>, Other<string>>
    } 
```

但是，我希望在返回的对象中保留类型 C 而不是指定类型。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T15:25:39.497

我想出了一个解决这个问题的方法，但这似乎是一种变通方法的组合，其中 C 类型的对象在两步工厂调用中使用了两次。

为此，使用了以下工厂：

```
public static class Factory3
{
    public static Factory<T1> CreateFactory<T1>(I<T1> o)
    {
        return new Factory<T1>();
    }
}

public class Factory<T1>
{
    public Tuple<T, Other<T1>> Create<T>(T o) where T : I<T1>
    {
        return new Tuple<T, Other<T1>>(o, o.CreateOther());
    }
} 
```

然后可以按如下方式使用：

```
 public void Inferred()
    {
        C c = new C();
        var v = Factory3.CreateFactory(c).Create(c); // type is Tuple<C, Other<string>>
    } 
```

这感觉很奇怪，因为 c 被使用了两次。第一次使用它时，它实际上被丢弃了，因为它只是用于推断基本类型参​​数。

有没有更好的解决方案，对象不需要使用两次，类型也不需要指定？

**编辑：**我刚刚意识到，虽然该对象必须使用两次，但不需要第二个工厂类。相反，这两个参数都可以在同一个工厂方法中使用，如下所示：

```
public class Factory
{
    public Tuple<T, Other<T1>> Create<T, T1>(T o, I<T1> o2) where T : I<T1>
    {
        return new Tuple<T, Other<T1>>(o, o.CreateOther());
    }
} 
```

这将按如下方式使用：

```
public void Inferred()
{
    C c = new C();
    var v = Factory.Create(c, c); // type is Tuple<C, Other<string>>
} 
```

它仍然不理想，但比必须创建第二个工厂类更好，并且至少可以使用 XMLDoc 注释来指示两个参数应该是同一个对象。再一次，一个参数（`o2`在这种情况下）仅用于推断 的约束类型`T`。

# visual-studio - 为什么我的项目继续寻找过时的子文件夹？

> ID：14004004
> 
> 赞同：0
> 
> 时间：2012-12-22T15:26:22.493
> 
> 标签：visual-studio, namespaces, winrt-xaml, windows-store-apps

我将项目中的子文件夹名称从“SOs_Forms”更改为“SOs_Pages”

但是，现在，在注意到我的项目中的几个地方仍然引用旧的“SOs_Forms”时，我将它们更改为更新后的名称。但是现在项目无法编译，说“*无法解析符号'Bla'* ”，然后通过智能感知提供让我添加对旧子文件夹/命名空间的引用。

所以现在我在整个项目中都引用了“SOs_Forms”和“SOs_Pages”；似乎有时两者都被接受，但其他时候它*必须*是 SOs_Forms，它不再存在！

奇怪的是，如果我默认并允许添加“旧”子文件夹命名空间（“SOs_Forms”）以便编译项目，然后右键单击以前顽固的对象名称并选择“转到声明， ” 对于 xaml 和 xaml.cs 文件，它会在“\SOs_Pages”中弹出。IOW，它知道它存在于“SOs_Pages”中，但仍强迫我添加对“SOs_Forms”的引用，以便可以找到它……奇怪！

我怎样才能一劳永逸地告诉项目 SOs_Forms 已经消失并且不会回来了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T15:42:43.833

如果您进行全局查找和替换，您应该解决此问题（我不得不这样做几次）。

首先，在理想情况下执行此类操作之前，您应该控制代码源并签入，以便您可以轻松地撤消它。如果您没有源代码控制系统，那么请停止一切​​并认真地获得一个。（但如果您至少不能照原样复制代码并将其放在安全的地方）

现在去编辑，查找和替换，替换文件。现在输入旧的命名空间，然后输入新的命名空间。然后点击开始按钮。

那应该为你解决它。

# c# - 通过单击按钮增加条形图值

> ID：14004009
> 
> 赞同：5
> 
> 时间：2012-12-22T15:26:35.660
> 
> 标签：c#, winforms, graph, charts

我正在尝试创建一个显示锻炼进度的图表。每五个按钮点击一个勾号应该添加到图表中。这是一个外观示例。

[![1](../Images/e18e7034d19d1d797206d71f0259875d.png)](https://i.stack.imgur.com/AigBq.png)

出于演示目的，我使用了按钮点击，在生产中，点击将是每二十转轮子。

```
 private int counter = 0;
    private void button1_Click(object sender, EventArgs e)
    {
        counter++;
        // code will go here
    } 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T16:44:38.887

您可以使用 a`Bitmap Buffer`或 a`panel`来绘制。这是一个先机：**只是一个示例**。 [参考](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.fromhwnd.aspx)。

该解决方案基于`WinForms`& `Panel_Paint()`。**您可以尝试添加垂直进度标签和图表的 Y 轴值标签**。

代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1(){
            InitializeComponent();
        }

        private int counter = 0;
        private int px = 10;
        private int py = 180;
        private int total5Clicks = 0;

        private void button1_Click(object sender, EventArgs e)
        {
            counter++;
            label1.Text = "Total Clicks = " + counter.ToString();
            if (Math.Abs(counter % 5) == 0){
                if (Math.Abs(counter / 5) > 0){
                    total5Clicks = total5Clicks + 1;
                    PaintOnChartPanel(total5Clicks);}
             }
         }

      private void panel1_Paint(object sender, PaintEventArgs e){           
      }

      private void PaintOnChartPanel(int total5Times)
      {            
        //Add a new Panel Paint EventHandler
        panel1.Paint += new PaintEventHandler(panel1_Paint);

        using (Graphics g = this.panel1.CreateGraphics())
        {
            Brush brush = new SolidBrush(Color.Green);
            g.FillRectangle(brush, px, py, 20, 20);                           
            Pen pen = new Pen(new SolidBrush(Color.White));
            g.DrawRectangle(pen, px, py, 20, 20);                    

            //add each total5Click into chart block
            g.DrawString((total5Times).ToString(), new Font("Arial", 7), 
            new SolidBrush(Color.AntiqueWhite),
            px + 1, py+8, StringFormat.GenericDefault);
            pen.Dispose();}

            if (py > 20){
                py = py - 20;}
            else{
                MessageBox.Show("Reached Top of the Panel");
                if (px < 200){
                    px = px + 20;
                    py = 180;}
                else{
                    MessageBox.Show("Reached Right of the Panel");
                }
            }
        }
    }
} 
```

输出形式：

![在此处输入图像描述](../Images/86a5ff05fa3216b7d9e2a879863117d1.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T16:52:37.367

您可以确定是否有五的倍数

```
bool drawTickMark = clicks % 5 == 0; 
```

`%`是返回整数除法余数的模运算符。例如`13 % 5 = 3`，`13 / 5 = 2`因为`2 * 5 + 3 = 13`。

`clicks % 5`将为零`clicks = 0, 5, 10, 15, ...`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T18:18:19.773

我不是一个 ASP.NET 人，但这里有一个算法可以用来绘制正方形

```
 int perColumn = Height / squareSize;
        int totalColumns = (squareCount / perColumn) + 1;

        for (int y = 0; y <= totalColumns - 1; y++)
        {
            int itemCount = squareCount - (y * perColumn);
            if (itemCount > perColumn)
                itemCount = perColumn;

            for (int x = 0; x <= itemCount - 1; x++)
                e.Graphics.FillRectangle(RandomBrush, New Rectangle((column * SquareSize) + 3, (i * SquareSize) + 3, SquareSize - 2, SquareSize - 2)) 
```

![在此处输入图像描述](../Images/a701b468786d4e48295da51bfa53e5b6.png)

```
public sealed class ClickGraph : Control
{
    private int squareCount = 1;
    public int SquareCount
    {
        get
        {
            return squareCount;
        }
        set
        {
            squareCount = value;
            Invalidate();
        }
    }

    private int squareSize = 25;
    public int SquareSize
    {
        get
        {
            return squareSize;
        }
        set
        {
            squareSize = value;
            Invalidate();
        }
    }

    public ClickGraph()
    {
        SetStyle(ControlStyles.ResizeRedraw, true);
    }

    protected override void OnPaint(PaintEventArgs e)
    {
        e.Graphics.Clear(BackColor);

        int perColumn = Height / squareSize;
        int totalColumns = (squareCount / perColumn) + 1;

        for (int y = 0; y <= totalColumns - 1; y++)
        {
            int itemCount = squareCount - (y * perColumn);
            if (itemCount > perColumn)
                itemCount = perColumn;

            for (int x = 0; x <= itemCount - 1; x++)
                e.Graphics.FillRectangle(RandomBrush, New Rectangle((column * SquareSize) + 3, (i * SquareSize) + 3, SquareSize - 2, SquareSize - 2))

        }
    }

} 
```

# git - Git / SSH 问题 - 被要求输入密码

> ID：14004010
> 
> 赞同：0
> 
> 时间：2012-12-22T15:26:52.430
> 
> 标签：git, github, ssh, ssh-keys

我正在使用 Ubuntu。我正在尝试将 Git 推送到大学服务器。我已经在我的大学电脑上成功设置了 git。反过来，我保存了我的私钥并将其添加到`.ssh`我笔记本电脑上的文件夹中。当我对 Git 进行配置时，它显示如下：

```
remote.origin.url=git@gitlab.mycollege.com:bosra/LinuxTest.git 
```

但是，当我尝试进行第一次推送时（如下所示），我被要求提供密码。没有设置密码。我相信从发布的配置中我使用了正确的协议。谁能建议这里可能存在什么问题？我的 .ssh 文件夹中有两个私钥。一个是从笔记本电脑生成的，另一个是在大学电脑上生成的。在大学电脑上生成的公钥被添加到服务器以允许访问。

```
bosra@bosra-Apple:~/workspace/LinuxTest$ git push -u origin master
git@mycollege.com's password: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T15:36:50.813

这可能是因为您`ssh-agent`没有运行或没有密钥。尝试运行：

```
ssh-add ~/.ssh/your_private_college_key 
```

我*相信*`ssh-agent`如果它没有运行，这也应该开始。如果没有，请运行`ssh-agent`并重试。

# coldfusion - Fusebox 在代码中调用保险丝

> ID：14004014
> 
> 赞同：3
> 
> 时间：2012-12-22T15:27:25.330
> 
> 标签：coldfusion, fusebox

有谁知道是否可以在冷融合模板中调用融合动作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T15:53:45.013

*（您尚未指定哪个 Fusebox 版本；此答案适用于 Fusebox 5.x）*

您的标题和问题是在问两个不同的事情-保险丝和保险丝动作是两个不同的事情。fuse 只是一个 CFML 模板，而 fuseaction 表示执行特定操作（类似于函数）的一组逻辑。

### 保险丝：

要调用熔断器，只需像往常一样**包含**该文件 - 这不需要特殊的 FB 功能。

### 熔断器：

要调用 fuseaction，请使用**do**动词，如下所示：

```
<cfset myFusebox.do('circuit.fuseaction') /> 
```

要存储结果，请使用 content 变量的第二个参数：

```
<cfset myFusebox.do('circuit.fuseaction',varname) /> 
```

这是这个 XML 的等价物：

```
<do action="circuit.fuseaction" contentvariable="varname" /> 
```

还有其他可用的参数，请参阅[**此 Fusebox 备忘单**](http://www.dopefly.com/projects/fuseboxxmlcheatsheet.cfm)，其中还包含许多其他有用的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T15:34:14.973

使用 MVC，您应该通过单个入口点工作。因此，在您的请求期间应该只调用一个 fuseaction。

但是 fuseaction 可以根据需要调用其他一些模型和视图模板。而且我相信 Fusebox 允许您将该逻辑重构为可以被多个操作使用的东西。（虽然我对我的 Fusebox 功能有点生疏，但我敢打赌一些谷歌搜索会引导你。）

作为一个可怕的最后手段，您可以使用`<cfhttp>`在您的应用程序中调用一个 URL 来调用该 fuseaction。但是，为什么不直接运行一些代码，而不需要通过另一个 HTTP 调用给您的服务器带来负担呢？

# ruby-on-rails - rails : heroku 错误日志

> ID：14004021
> 
> 赞同：0
> 
> 时间：2012-12-22T15:28:57.297
> 
> 标签：ruby-on-rails, logging, deployment, heroku

Okau，我有一个在我的本地主机上运行良好的 rails 应用程序。现在我在日志上有一个新问题，似乎语法有问题。我有 javascript 包含如下标签：

好的，这是主要错误

```
ActionView::Template::Error (/app/app/assets/javascripts/jq_scroll/jq_animate.js has a invalid UTF-8 byte sequence): 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T18:56:45.543

您是在 JS 文件中插入任何 I18n 字符串还是包含任何非 ASCII 字符？如果是这样，请尝试在文件顶部添加“魔术注释”（假设文件具有扩展名 .js.erb）：

```
<% # coding: utf-8 %>
// JS file content... 
```

# php - MySQL - 根据它们的值选择列

> ID：14004022
> 
> 赞同：1
> 
> 时间：2012-12-22T15:29:39.017
> 
> 标签：php, mysql, sql

我的数据库中有一个事件表，每个事件最多可以有 5 个不同的日期。表中的 Date1 总是在 date2 之前，date2 在 date3 之前等等。

给定搜索表单中的 2 个日期，我试图找到它们之间的事件。

我的表设计如下：

```
id | name  | date1     | date2      | date3     | date4     | date5
1  | test1 | 2013-05-24| 2013-05-25 | 0000-00-00| 0000-00-00| 0000-00-00
2  | test2 | 2013-06-01| 2013-06-08 | 2013-06-15| 2013-06-23| 2013-06-30
3  | test3 | 2013-03-15| 0000-00-00 | 0000-00-00| 0000-00-00| 0000-00-00 
```

$datefrom ， $dateto 是搜索表单中的两个变量。例如，现在 $datefrom 将始终在表的 date1 中搜索。但是 $dateto 必须在 date5 中搜索，如果它为 null 到 date4 等等。

到目前为止，我想出的最好的查询是：

```
SELECT * FROM events 
WHERE 
IF(date1 != '0000-00-00', IF(date1>='2012-12-19', 1, 0),0) = 1 
AND CASE 
WHEN date5!='0000-00-00' THEN IF(date5<='2012-12-31', 1, 0)     
WHEN date4!='0000-00-00' THEN IF(date4<='2012-12-31', 1, 0)     
WHEN date3!='0000-00-00' THEN IF(date3<='2012-12-31', 1, 0) 
WHEN date2!='0000-00-00' THEN IF(date2<='2012-12-31', 1, 0) 
END 
```

但它运行得不是很好，例如这个查询返回最旧日期为 2013 年的行。我不知道 CASE 是否是正确的开始方法。有任何想法吗？？谢谢你的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T16:55:12.580

你可以这么简单地使用它`GREATEST`

```
SELECT name , date1 date_start, GREATEST(date2,date3,date4,date5) date_end
FROM events 
```

并会像这样输出

```
 NAME   DATE_START  DATE_END
 jack   2013-05-24  2013-05-25
 peter  2013-06-01  2013-06-30 
```

这里[**是演示 SQLFIDDLE**](http://sqlfiddle.com/#!2/9741f/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T16:09:29.857

试试这个：

```
SELECT 
  id, 
  name
FROM
(
    SELECT 
      id, 
      name, 
      MIN(EventDate) AS "FromDate",
      MAX(EventDate) AS "ToDate"
    FROM
    (
      SELECT id, name, date1 As "EventDate" FROM events
      UNION ALL
      SELECT id, name, date2                FROM events
      UNION ALL
      SELECT id, name, date3                FROM events
      UNION ALL
      SELECT id, name, date4                FROM events
      UNION ALL
      SELECT id, name, date5                FROM events
    ) t 
    GROUP BY id, name
) t
WHERE FromDate > @fromdate
  AND ToDate   < @todate; 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/ab1a5/6)

**但是**，如果您想以与事件表中相同的方式获取数据，您可以这样做：

```
SELECT 
  e.*
FROM
(
    SELECT 
      id, 
      name, 
      MIN(EventDate) AS "FromDate",
      MAX(EventDate) AS "ToDate"
    FROM
    (
      SELECT id, name, date1 As "EventDate" FROM events
      UNION ALL
      SELECT id, name, date2                FROM events
      UNION ALL
      SELECT id, name, date3                FROM events
      UNION ALL
      SELECT id, name, date4                FROM events
      UNION ALL
      SELECT id, name, date5                FROM events
    ) t 
    GROUP BY id, name
) t
INNER JOIN events e ON t.id = e.id
WHERE t.FromDate > @fromdate
  AND t.ToDate   < @todate; 
```

例如，对于`@fromdate = '2012-05-01'`and `@todate = '2012-06-15'`，这将为您提供：

```
| ID |  NAME |                      DATE1 |                      DATE2 |  DATE3 |  DATE4 |  DATE5 |
---------------------------------------------------------------------------------------------------
|  1 | test1 | May, 24 2013 00:00:00+0000 | May, 25 2013 00:00:00+0000 | (null) | (null) | (null) | 
```

# android - Android：向状态栏添加通知

> ID：14004023
> 
> 赞同：0
> 
> 时间：2012-12-22T15:29:40.510
> 
> 标签：android, notifications

我已经使用**NotificationCompat.Builder**创建了一个通知，但我不知道如何在状态栏中显示它。我尝试使用

```
NotificationManager notificationManager = (NotificationManager)
                               getSystemService(Context.NOTIFICATION_SERVICE);
notificationManager.notify(mId, mBuilder.build()); 
```

但它在 2.2 上不起作用，所以我需要另一种方法......

这是我的通知

```
NotificationCompat.Builder mBuilder =
            new NotificationCompat.Builder(this)
            .setSmallIcon(R.drawable.notification)
            .setContentTitle("Message")
            .setContentText("Notification"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T15:34:32.717

> 但它不适用于 2.2

是的，它确实。

[此示例应用程序](https://github.com/commonsguy/cw-omnibus/tree/master/Notifications/DownloadNotify)显示`IntentService`下载文件并显示`Notification`使用`NotificationCompat.Builder`. 它使用与您的代码非常相似的代码来实际提高`Notification`：

```
NotificationManager mgr = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
mgr.notify(NOTIFY_ID, b.build()); 
```

此代码在 Android 2.2 上运行良好，因为我刚刚在模拟器上（再次）尝试过它，并且`Notification`按预期显示。

# mysql - 更新查询在 mySQL 中不起作用

> ID：14004024
> 
> 赞同：3
> 
> 时间：2012-12-22T15:30:00.073
> 
> 标签：mysql, sql

我想在 MySQL 中执行查询，但它不起作用。这是查询：

```
Update chambre set nombre_lit = 5 and prix = 10000 where code_ch = 2 
```

如果我执行此脚本，它将起作用：

```
Update chambre set  prix = 10000 where code_ch = 2
Update chambre set nombre_lit = 5  where code_ch = 2 
```

但我只想使用一条线。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T15:30:54.703

`COMMA`如果您有多个列要更新而不是使用`AND`

```
UPDATE chambre 
SET    nombre_lit = 5, 
       prix = 10000 
WHERE  code_ch = 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T15:31:20.773

试试这个：-

```
Update chambre set nombre_lit = 5 , prix = 10000 where code_ch = 2 
```

# php - 如何让php输出一个链接？

> ID：14004030
> 
> 赞同：-3
> 
> 时间：2012-12-22T15:30:57.060
> 
> 标签：php, html, hyperlink

以下代码很好地输出了我在浏览器的 mysql 数据库表中拥有的用户列。

```
<?php
$len = count($name);
for($i=0;$i<$len;$i++){
echo $name[$i];
echo "<p/>";
}
?> 
```

但是，我希望每个名称都用作外部网站的链接。数组中每个 $name[] 对应的网站在同一张表的同一行。所以让我们说 $name[0] 有网站 w[0]。

我到底将如何在浏览器中输出 php，以便每个名称都链接到相应的网站？提前谢谢了。我希望我已经足够清楚了。干杯

抱歉，我可能应该添加上面出现在我的 php 脚本中的内容：

```
$name = array();
$w = array();
$i=0;
while($result = mysql_fetch_array($hof)){
$name[$i] = $result['username'];
$w[$i] = $result['website'];
$i++;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T15:36:02.787

```
while($result = mysql_fetch_array($hof)){
    echo '<a href="'.$result['website'].'">'.$result['username'].'</a><br>';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T15:35:20.623

```
<?php
$len = count($name);
echo '<p>'
for($i=0;$i<$len;$i++){
  echo '<a href="' . $w[$i] . '">' . $name[$i] . '</a>';
}
echo "<p/>";
?> 
```

但是，在此处提问之前，您应该开始学习一些 HTML 基础知识。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T15:46:42.170

我们走吧！

**步骤#1**。

Mysql 用户表示例：

```
ID  |  Username | Website
1   |  user_1   | user-1.com
2   |  user_2   | user-2.com
3   |  user-3   | user-3.com 
```

**第2步**

PHP

```
$mysqli = new mysqli("mhost", "muser", "mpassword", "databse");
if (! mysqli_connect_errno()) {
   $query = "SELECT Username,Website FROM Users ORDER by ID DESC LIMIT 50,5";

   if ($result = $mysqli->query($query)) {
      while ($row = $result->fetch_row()) {
         echo '<a href="' . $row[0] . '">' . $row[1] . '</a>';
      }
      $result->close();
   } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-28T15:35:11.683

很容易在 echo 或字符串变量中使用 ' 而不是 " 。就像

<?php echo ' [Power Point 网站](https://powerpoint.base.pk)'; ?>

# nstextview - NSTextView 替换大文件

> ID：14004031
> 
> 赞同：1
> 
> 时间：2012-12-22T15:31:17.687
> 
> 标签：nstextview, replace

NSTextview 不是为大文件设计的。在我自己开始编写替代品之前（对于简单的 ascii 文件），我想问一下是否已经有替代品可以处理这些文件。NSTextview 很棒，但是如果你加载一个大于 100 到 200mb 的大文件，例如，当你向下滚动到最后时，它会变得非常慢。

那么，有谁知道有替代品吗？

# c++ - 使用非固定整数（int、long）而不是固定大小的整数（int64_t、int32_t）有什么好处吗？

> ID：14004032
> 
> 赞同：5
> 
> 时间：2012-12-22T15:31:17.953
> 
> 标签：c++, portability

也许是性能？我觉得使用非固定整数只会使程序更复杂，并且在移植到另一个架构时容易失败。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T15:41:49.697

`std::intN_t`[仅当实现可以直接支持它们时才](http://en.cppreference.com/w/cpp/types/integer)提供。所以移植使用它们的代码可能会失败。

我更喜欢`std::intfastN_t`一般用途，因为它们的限制较少，并且应该与`int`.

此外，大多数 C++ 代码在任何地方都使用，因此在将 a 传递给接受 a 的函数`int`时，您可能会遇到提升怪异，特别是如果只有 16 位。`std::int32_t``int``sizeof(int)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T16:03:05.313

许多 API 接受或返回非固定类型的值。例如，文件描述符是 type `int`，文件偏移量或大小是 type`off_t`并`strtol()`返回一个`long`. 盲目地将这些值从固定大小类型转换为固定大小类型可能会导致某些机器上的溢出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T16:07:46.847

保证宽度类型 ( `intN_t`) 只是适当“标准”整数类型的类型定义。如果平台没有合适的类型（例如，它使用 36 位整数），那么它不能也不能提供保证宽度的 typedef。这意味着性能很难成为一个论据。

最大可移植性（在这方面）的一般准则是默认使用“标准”整数类型，并且仅当您的算法需要精确的位数时才使用保证宽度类型。应该假设“标准”整数类型仅与相关标准所保证的一样宽（如果您只查看 C++ 标准，那将是： 8-bits `char`、 16-bits `int`、 32-bits `long`，如果您的编译器支持它，64位`long long`）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T16:54:04.607

如果您的数据类型的大小对其功能至关重要，那么您应该使用具有定义大小的类型。但是，例如一段代码完全在 [你可以合理预期的] int 范围内（例如 1 ... 1000 循环计数器），没有理由仅仅因为你想定义你的变量而使用 int_32t . 它适用于 16、32、64、36、18 或 49 位整数，都一样。所以让编译器选择最好的大小。

编译器可能会为固定大小的整数生成更糟糕的代码，这些代码不是架构的“最佳选择”。

显然，通过网络或文件呈现的任何数据都需要具有固定大小。同样，如果您的接口需要跨接口边界的二进制兼容性，那么使用定义的大小类型对于避免大小成为问题非常有用。

# assembly - 为什么是“或啊，啊”？

> ID：14004035
> 
> 赞同：5
> 
> 时间：2012-12-22T15:31:23.643
> 
> 标签：assembly, x86

我正在慢慢尝试进入 osdev 只是为了玩。

[本教程](http://www.osdever.net/tutorials/view/mixing-assembly-c)有一个等待驱动器准备好的程序集：

```
reset_drive:
   mov ah, 0
   int 13h
   or ah, ah
   jnz reset_drive 
```

我知道中断后，`ah`如果设备准备好，它将为零。但是有什么作用`or ah,ah`呢？似乎有点多余……它似乎什么也没做。（至少按照我的逻辑）它有什么作用？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-22T15:36:48.490

它根据是否`ah`为零设置/取消设置零标志。

根据标志的状态，`jnz reset_drive`将跳转：仅当`ah`不为零*时。*

换句话说，它等待设备准备好，因为它在`ah`变为零后停止重复。

# python - 我如何知道我的 Python 进程绑定到了哪个核心？

> ID：14004036
> 
> 赞同：2
> 
> 时间：2012-12-22T15:31:28.730
> 
> 标签：python, process

如何知道我的 Python 进程绑定到了哪个进程？仅这些相同的行，子进程是否会在父进程当前正在执行的同一个核心（即 CPU）上执行？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-22T15:59:59.907

如果有人特别要求发生这种情况，进程和本机操作系统线程只会绑定到特定的处理器。默认情况下，进程和线程可以（并且将）安排在任何可用的处理器上。

现代操作系统使用抢占式多线程，可以随时中断线程的执行。当该线程下一次计划运行时，它可以在不同的处理器上执行。这称为上下文切换。线程的整个执行上下文被操作系统存储起来，然后当线程被重新调度时，执行上下文被恢复。

由于这一切，询问您的线程正在哪个处理器上执行是没有意义的，因为答案随时可能改变。即使在执行查询当前线程的处理器的函数期间。

同样，默认情况下，两个独立进程在其上执行的处理器之间没有关系。这两个进程可以在同一处理器或不同处理器上执行。这完全取决于操作系统如何决定调度不同的线程。

在您声明的评论中：

> 由于 GIL 锁，Python 进程将仅在一个内核上执行。

这种说法是完全不正确的。例如，一段 Python 代码将声明 GIL，获取所有可用处理器的上下文切换，然后释放 GIL。

在我所说的答案的开头，我提到了将进程或线程绑定到特定处理器的可能性。例如，在 Windows 上，您可以使用`SetProcessAffinityMask`and`SetThreadAffinityMask`来执行此操作。但是，这样做是不寻常的。我只记得曾经这样做过一次，那是为了确保执行`CPUID`在特定处理器上运行。在事物的正常运行中，进程和线程与所有处理器都有关联。

在另一条评论中，您说：

> 我正在创建子进程以使用 CPU 的多核。

在这种情况下，您无需担心。通常，您将创建与逻辑处理器一样多的进程。操作系统调度程序是明智的，它将调度每个不同的进程在不同的处理器上运行。从而优化利用可用的硬件资源。

# git - 将 'git diff' 结果留在终端中

> ID：14004039
> 
> 赞同：7
> 
> 时间：2012-12-22T15:31:46.783
> 
> 标签：git

我在终端中使用 Git。当我必须做出一些改变时，我会用`git diff`来看我改变了什么。我希望该输出结果保留在终端中，这样我可以在按下 后查看它`Q`，因为当我按下 时`Q`，结果都消失了。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-22T15:35:45.073

发生这种情况是因为 Git 通过寻呼机输出它。相反，使用：

```
git --no-pager diff 
```

它被默认配置设置为使用寻呼机，您可以更改此默认设置以`cat`代替使用，以防止您必须`--no-pager`使用`git config --global core.pager cat`. [您可以在此处](http://linux.die.net/man/1/git-config)的文档中阅读更多信息。

* * *

通过寻呼机输出`STDOUT`和通过寻呼机要复杂得多，并且需要超出常规 Unix 重定向和管道范围的工具。您可以将输出重定向到`STDERR`with`tee`和 pipe to `less`，这会产生您想要的错觉。请注意，这是一个 hack 并且滥用了`STDERR`

```
git diff | tee /dev/stderr | less 
```

如果您打算经常使用它，您可能希望将其设为别名。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-23T10:43:30.373

一般来说，我也不喜欢`less`随着内容消失。我通常将我的`LESS`环境变量设置为`eFRX`：

```
export LESS=eFRX 
```

正是它`X`使它停止带走内容。`F`如果只有一个屏幕的内容，则表示退出。`R`有助于解释 ANSI 颜色代码（您需要它）`git diff`，并`X`使其在退出前停止清除屏幕。

它会让你对使用的其他一些程序更满意`less`。

# asp.net-mvc - 在 mvc 3 应用程序中创建控制器时出现 InvalidOperationException。我创建了一个新的 DBMl 文件

> ID：14004042
> 
> 赞同：0
> 
> 时间：2012-12-22T15:32:20.417
> 
> 标签：asp.net-mvc, database, asp.net-mvc-3, exception, linq-to-sql

在 Mvc 3 项目中，我在 myApp.designer.cs 文件中有一个错误。我不知道如何修复它，所以我删除了 .dbml 文件（linq to sql 类）并创建了之前在其中的新的药物和删除表。项目构建，但是当我运行它时，每次应创建控制器时都会得到 InvalidOperationExcaption：“请确保控制器具有不带参数的构造函数”。我使用 ninject 和 DependencyResolver 将接口与实现绑定，每个控制器都有一些接口参数。

在我删除构建的 .dbml 文件控制器之前。

有没有办法解决这个问题？

# ios - malloc: *** mmap(size=1048576) failed (error code=12) *** error: can't allocate region secure

> ID：14004049
> 
> 赞同：1
> 
> 时间：2012-12-22T15:33:43.027
> 
> 标签：ios, memory-leaks, crash

我有一个应用程序，当我运行它几分钟时，它总是崩溃。我检查了崩溃日志，它总是说 malloc: *** mmap(size=1048576) failed (error code=12) *** error: can't allocate region secure 我使用仪器工具检查内存泄漏，但没有找到任何内存泄漏。我想知道是否有一些仪器无法找到的内存泄漏，或者其他一些导致崩溃的原因。任何帮助将不胜感激！

**编辑：**

我使用时间分析器来检查性能。但我不知道关键点是什么，因为最重要的项目是：

运行时间 Self Symbol Name 6494.0ms 9.4% 6494.0 -[DLStarView initWithDefault:highlighted:position:allowFractions:] （我的应用有很多列表，每个项目都有一个自制的星形视图）

运行时间自身符号名称 5848.0ms 8.4% 5848.0 +[ASIHTTPRequest runRequests]（我的应用程序总是从服务器获取数据）

运行时间自身符号名称 2169.0ms 3.1% 2169.0 -[BMKUserLocationInternal updateLocationInfo]

运行时间自身符号名称 1435.0ms 2.0% 1435.0 -[EGOCache imageForKey:]

运行时间自身符号名称 1252.0ms 1.8% 1252.0 -[KLRESTDetailViewController tableView:cellForRowAtIndexPath:]

有用吗？我如何检查我是否塞了一堆东西？

PS：这个crash只出现在真机上，我在模拟器里跑了20分钟左右，app还是运行流畅，我的设备是iPhone4S iOS 6.0.1

我设置了一个断点并收到了消息：

崩溃线程消息并不总是相同，但在控制台输出中，它总是说 malloc: *** mmap(size=1048576) failed (error code=12)** **错误：无法安全分配区域 ** * 在 malloc_error_break 中设置断点以进行调试*

 *我被这个错误迷惑了几天，有什么想法吗？谢谢！

* * *

我使用时间分析器来检查性能。但我不知道关键点是什么，因为最重要的项目是：

运行时间 Self Symbol Name 6494.0ms 9.4% 6494.0 -[DLStarView initWithDefault:highlighted:position:allowFractions:] （我的应用有很多列表，每个项目都有一个自制的星形视图）

运行时间自身符号名称 5848.0ms 8.4% 5848.0 +[ASIHTTPRequest runRequests]（我的应用程序总是从服务器获取数据）

运行时间自身符号名称 2169.0ms 3.1% 2169.0 -[BMKUserLocationInternal updateLocationInfo]

运行时间自身符号名称 1435.0ms 2.0% 1435.0 -[EGOCache imageForKey:]

运行时间自身符号名称 1252.0ms 1.8% 1252.0 -[KLRESTDetailViewController tableView:cellForRowAtIndexPath:]

有用吗？我如何检查我是否塞了一堆东西？

PS：这个crash只出现在真机上，我在模拟器里跑了20分钟左右，app还是运行流畅，我的设备是iPhone4S iOS 6.0.1

我设置了一个断点并收到了消息：

libsystem_c.dylib`malloc_error_break：0x33c742e8：push {r7，lr}
0x33c742ea：mov r7，sp
0x33c742ec：nop 0x333c742ee ：

nop
0x33c742f0：pop nop 0x33c742f0：pop n ; r0] 0x3393ed8a：ldr r0，[r4，r0] 0x3393ed8c：blx 0x33aaf1c0；符号存根：-[NSUUID copyWithZone:] 0x3393ed90: movw r0, # 52700 0x3393ed94: movt r0, #1571 0x3393ed98: add r0, pc 0x3393ed9a: ldr r1, [r0]

0x23ac72：mov r0，r5
0x23ac74：str.w r8，[sp]
0x23ac78：blx 0x2c7d04；符号存根：objc_msgSend
0x23ac7c: b 0x23aca4；-[BMKUserLocationInternal updateLocationInfo]
+ 912 在 BMKUserLocationInternal.mm:131
0x23ac7e: bl 0x1cbcd8 ；bmengine::GetGlobalMan() 在
IphoneBaiduMaps.mm:61

0x33941b7e：mov r0，r11
0x33941b80：mov r1，r8
0x33941b82：mov r2，r10
0x33941b84：blx 0x33aace80；符号存根：CFDictionarySetValue$shim
0x33941b88: movw r0, #36884
0x33941b8c: movt r0, #1571
0x33941b90: add r0, pc
0x33941b92: ldr r4, [r0]
0x33941b94: mov r0, r

0x23acd6: movs r3, #1
0x23acd8: str r3, [sp]
0x23acda: movs r3, #0
0x23acdc: blx 0x2c7d04; 符号存根：objc_msgSend
0x23ace0：添加 sp，#4
0x23ace2：pop {r7，pc}

0x35bee92e：ldr r1，[sp，#224]
0x35bee930：ldr r2，[sp，#136]
0x35bee932：ldr r3，[sp，#232]
0x35bee934：blx 0x35c268e4；符号存根：
CLLocationDictionaryUtilitiesGetTransitionInterval
0x35bee938: movw r0, #1732
0x35bee93c: movt r0, #1078
0x35bee940: add r0, pc
0x35bee942: ldr r1, [r0]

崩溃线程消息并不总是相同，但在控制台输出中，它总是说 malloc: *** mmap(size=1048576) failed (error code=12)** **错误：无法安全分配区域 ** * 在 malloc_error_break 中设置断点以进行调试*

 *我被这个错误迷惑了几天，有什么想法吗？谢谢！**

# objective-c - 如何使用 Core Data 模型而不保存它们？

> ID：14004055
> 
> 赞同：8
> 
> 时间：2012-12-22T15:34:08.907
> 
> 标签：objective-c, ios, core-data, magicalrecord

我正在编写一个应用程序，我正在使用 MagicalRecord 作为与 Core Data 交互的框架。该应用程序从服务器获取一组海报，然后显示它们。如果用户需要，也可以在应用程序上创建海报，然后上传到服务器。

因此，用户创建的海报使用 Core Data 存储在本地数据库中，而从服务器获取的海报应该只显示在应用程序中，而不是保存在本地。如何使用相同的 Poster 类（现在是 NSManagedObject 的子类）来处理这两种情况？

这是我的课：

```
@interface Poster : NSObject
@property (nonatomic, retain) NSNumber * posterID;
@property (nonatomic, retain) NSString * artists;
@end 
```

当我从服务器获取海报数组时，我分配一个新海报，然后分配属性：

```
Poster *poster = [[Poster alloc] init];
if ([dict objectForKey:@"id"]) poster.posterID = [dict objectForKey:@"id"];
if ([dict objectForKey:@"artists"]) poster.artists = [dict objectForKey:@"artists"]; 
```

但是当到达链接的 poster.posterID = [dict etc 等时，应用程序崩溃并出现此错误

> 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[Poster setPosterID:]: unrecognized selector sent to instance 0xaa8b160”

`Poster *poster = [Poster createEntity];`如果我使用而不是创建新对象`Poster *poster = [[Poster alloc] init];`，应用程序不会崩溃，但是当我保存上下文时，我发现从服务器获取的所有海报都保存在本地。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-22T17:55:31.457

您不能只是`alloc/init`一个托管对象，因为托管对象必须与托管对象上下文相关联。`poster.posterID = ...`崩溃是因为动态创建的访问器方法在没有托管对象上下文的情况下无法工作。（*更正：*正如@noa 正确所说，您可以在没有托管对象上下文的情况下创建对象，只要您使用指定的初始化程序。但是这些对象对任何获取​​请求都不“可见”。）

要创建不应保存到磁盘的托管对象，您可以使用两个持久存储：一个 SQLite 存储和一个单独的内存存储。

我不能告诉你如何使用 MagicalRecord 来做到这一点，但使用“普通核心数据”它会像这样工作：

创建托管对象上下文和持久核心协调器后，将*两个* 持久存储分配给存储协调器：

```
NSPersistentStore *sqliteStore, *memStore;

sqliteStore = [coordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeUrl options:nil error:&error];
if (sqliteStore == nil) {
    // ...
}
memStore = [coordinator addPersistentStoreWithType:NSInMemoryStoreType configuration:nil URL:nil options:nil error:&error];
if (memStore == nil) {
    // ...
} 
```

稍后，当您将新对象插入上下文时，您会将新对象与 SQLite 存储或内存存储相关联：

```
Poster *poster = [NSEntityDescription insertNewObjectForEntityForName:@"Poster" inManagedObjectContext:context];
[context assignObject:poster toPersistentStore:memStore];
// or: [context assignObject:poster toPersistentStore:sqliteStore];
poster.posterID = ...;
poster.artists = ...; 
```

只有分配给 SQLite 存储的对象才会保存到磁盘。如果您重新启动应用程序，分配给内存存储的对象将消失。我*认为*没有明确分配给商店的对象会自动分配给第一个商店，在这种情况下是 SQLite 商店。

我还没有使用 MagicalRecord，但我看到有方法`MR_addInMemoryStore`和`MR_addSqliteStoreNamed`，这将是此配置的适当方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-22T18:11:07.263

您也可以尝试将指定的初始化程序`-initWithEntity:insertIntoManagedObjectContext:`与 nil 一起用于第二个参数。（根据我的经验，托管对象的某些方面在没有上下文的情况下可以正常工作；其他方面则不行。）

[这个答案](https://stackoverflow.com/questions/3751340/create-a-core-date-entity-instance-but-not-want-it-to-be-storednon-persistent/3758459#3758459)有一些进一步的解释。

# javascript - 使用帧计时器的 Raphaël 动画

> ID：14004056
> 
> 赞同：1
> 
> 时间：2012-12-22T15:34:12.480
> 
> 标签：javascript, raphael, kineticjs

我目前从 Raphaël 开始，我很难弄清楚如何使用带有计时器的框架以灵活的方式制作动画。

使用 KineticJS，这非常容易。我所需要的只是写一些类似的东西：

```
var anim = new Kinetic.Animation(function(frame){
  circle.setSomeAttribute(someFunction(frame.time));
}, layer);
anim.start(); 
```

通过这种方式，我实际上可以将任何我想要的东西放入`someFunction()`其中，并且随着时间的推移更好地控制传递给属性的值。无论如何，我可以用 Raphaël 轻松做到这一点吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T18:31:04.330

RaphaelJS 将让您按百分比分解动画步骤。例如：

```
 gear.stop().animate({
        "0%": { transform: gear.__start },
        "20%": { transform: gear.__start + ' r' + gear.__dir + '180'},
        "40%": { transform: gear.__start + ' r0'},
        "80%": { transform: gear.__start + ' r' + gear.__dir + '180'},
        "100%": { transform: gear.__start + ' r0'},
    }, 3000 ); 
```

这将绕过宽松，AFAIK。无论如何，请参阅[http://jsfiddle.net/Cy8DQ/](http://jsfiddle.net/Cy8DQ/)以获取工作示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T18:09:42.510

不完全确定您要问什么，但您可能只想定义自己的缓动公式。

```
Raphael.easing_formulas.myEasingFormula = function(n) { 
        //n is fraction of time elapsed
        return myOperationOn(n);    
    }; 
```

如果烘焙的缓动方法都不能满足您的需求，那么制作自己的方法很容易。[您可以在源代码](https://github.com/DmitryBaranovskiy/raphael/blob/master/raphael.js#L2763)中查看Raphael 中标准缓动的公式。您只是返回一个新的小数值以应用于您选择的元素的转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T22:42:09.823

我相信每个与 Raphael 共度时光的人都有机会发现它的路径动画严重不足。我在 SO 上看到了一些很好的解决方法（[这](https://stackoverflow.com/questions/4631019/how-to-draw-a-vector-path-progressively-raphael-js)是最全面的）。最重要的是，没有开箱即用的好解决方案。

我通常使用这个实用功能（很容易转换为 Raphael 插件，如果您发现这样的打包更方便）：

```
function drawpath( canvas, pathstr, duration, attr, callback )
{
    var guide_path = canvas.path( pathstr ).attr( { stroke: "none", fill: "none" } );
    var path = canvas.path( guide_path.getSubpath( 0, 1 ) ).attr( attr );
    var total_length = guide_path.getTotalLength( guide_path );
    var last_point = guide_path.getPointAtLength( 0 );
    var start_time = new Date().getTime();
    var interval_length = 50;
    var result = path;        

    var interval_id = setInterval( function()
    {
        var elapsed_time = new Date().getTime() - start_time;
        var this_length = elapsed_time / duration * total_length;
        var subpathstr = guide_path.getSubpath( 0, this_length );            
        attr.path = subpathstr;

        path.animate( attr, interval_length );
        if ( elapsed_time >= duration )
        {
            clearInterval( interval_id );
            if ( callback != undefined ) callback();
            guide_path.remove();
        }                                       
    }, interval_length );  
    return result;
} 
```

您可以使用它来逐渐“绘制”一条几乎无限复杂的线。Firefox 仍然不够快，无法实时计算复杂路径，但 Chrome 很棒，而且它仍然对 VML 友好。

[在此处](http://voidblossom.com/tests/cursive.php)和[此处](http://voidblossom.com/tests/pathTransform.php)查看我的一些应用程序。

# asp.net-mvc - 在我的情况下使用扩展方法是否正确？

> ID：14004062
> 
> 赞同：5
> 
> 时间：2012-12-22T15:34:52.793
> 
> 标签：asp.net-mvc, entity-framework, extension-methods

我在我的项目中使用 MVC4 和实体框架 5，并且我有很多表。作为我们项目的规则，我们不会从数据库中删除任何记录，每条记录都有一个 isActive 字段，如果该字段为 false，则认为它已删除。我想编写一个扩展方法来获取活动记录，经过一番谷歌搜索后，我写了这个：

```
public static IQueryable<Company> GetAll(this IQueryable<Company> source)
{
   return source.Where(p => p.isActive);
} 
```

现在我可以使用我的扩展方法来仅获取活动记录，例如

```
Context db = new Context();
db.Company.GetAll(); 
```

但是假设我的数据库中有 50 多个表，为我的每个表编写相同的扩展方法是否是一种好方法。有没有更好的方法来为我们所有的表编写一个唯一的 GetAll() 扩展方法？实际上我什至不确定在这个实例中使用扩展方法是否正确？

有人可以帮助我并告诉我正确的方法吗？如果您对代码示例提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T16:03:22.270

这取决于你如何使用实体框架，如果你依赖于普通的生成器（我认为你这样做），你的案例会变得更难，而且我从未有过类似的案例研究。但是，如果您使用普通的 POCO 类生成器，您可以使用一个基类，我们称之为它`CEntity`，它是您的每个其他类（表）的基类。

我们到了吗？不，要继续这个，我更喜欢使用存储库模式，您可以使该存储库通用（CEntity），例如：

```
public class Repository<CEntity> where CEntity : class
{
    public IQueryable<CEntity> GetAll()
    {
       return source.Where(p => p.isActive);
    }

} 
```

这是如何使用它：

```
Repository<Company> com = new Repository<Company>();
Repository<Employee> emp = new Repository<Employee>();

var coms = com.GetAll();    // will get all ACTIVE companies
var emps = emp.GetAll();    // will get all ACTIVE employees 
```

这是我的头顶，如果您有任何其他问题，请将它们作为评论，很乐意提供帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T04:39:15.880

正如一个兴趣点，这正是我实现数据层的方式，我认为它很棒:)

我也在中间堵塞了一个存储库，但一般概念应该可以使用或不使用。

下面是一些工作代码示例，说明我如何在我的博客中使用此方法来处理一些类似的用例。

[https://github.com/lukemcgregor/StaticVoid.Blog/blob/master/Blog/Data/Entities/Post/PostRepositoryExtensions.cs](https://github.com/lukemcgregor/StaticVoid.Blog/blob/master/Blog/Data/Entities/Post/PostRepositoryExtensions.cs)

我发现它可以编写一些非常优雅的代码，同时仍然不会过多地限制您可以做的事情。就像我说的，我认为这种方法很棒，真的推荐它的用法。

# android - ClassCastException LinearLayout LayoutParams

> ID：14004063
> 
> 赞同：10
> 
> 时间：2012-12-22T15:35:12.787
> 
> 标签：android, android-linearlayout, classcastexception, android-framelayout

我有一个操作栏和一些片段。问题是我的主屏幕。左侧有一个概览片段，右侧有一个详细片段。我的 TabListener 是动态的，所以我想以编程方式设置布局的权​​重。每当我尝试获取我的 LinearLayout 的 Layoutparams 时，我都会得到一个 ClassCastException：

```
12-22 16:00:37.620: W/System.err(7235): java.lang.ClassCastException: android.widget.FrameLayout$LayoutParams cannot be cast to android.widget.LinearLayout$LayoutParams
12-22 16:00:37.625: W/System.err(7235):     at com.coover.eu.lostandfound.ListSearchFragment.onViewCreated(ListSearchFragment.java:184)
12-22 16:00:37.625: W/System.err(7235):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:884)
12-22 16:00:37.630: W/System.err(7235):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1080)
12-22 16:00:37.630: W/System.err(7235):     at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:622)
12-22 16:00:37.630: W/System.err(7235):     at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1416)
12-22 16:00:37.630: W/System.err(7235):     at android.support.v4.app.FragmentActivity.onStart(FragmentActivity.java:505)
12-22 16:00:37.630: W/System.err(7235):     at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1178)
12-22 16:00:37.635: W/System.err(7235):     at android.app.Activity.performStart(Activity.java:5216)
12-22 16:00:37.635: W/System.err(7235):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2083)
12-22 16:00:37.635: W/System.err(7235):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2135)
12-22 16:00:37.635: W/System.err(7235):     at android.app.ActivityThread.access$700(ActivityThread.java:140)
12-22 16:00:37.635: W/System.err(7235):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1237)
12-22 16:00:37.640: W/System.err(7235):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-22 16:00:37.640: W/System.err(7235):     at android.os.Looper.loop(Looper.java:137)
12-22 16:00:37.640: W/System.err(7235):     at android.app.ActivityThread.main(ActivityThread.java:4921)
12-22 16:00:37.640: W/System.err(7235):     at java.lang.reflect.Method.invokeNative(Native Method)
12-22 16:00:37.640: W/System.err(7235):     at java.lang.reflect.Method.invoke(Method.java:511)
12-22 16:00:37.645: W/System.err(7235):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1038)
12-22 16:00:37.645: W/System.err(7235):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:805)
12-22 16:00:37.645: W/System.err(7235):     at dalvik.system.NativeStart.main(Native Method) 
```

膨胀的布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" 
    android:id="@+id/container_found_list_overview">

    <EditText android:id="@+id/search_box" 
        android:layout_width="fill_parent"
        android:layout_height="50dp"
        android:padding="5dp"
        android:textSize="35sp"
        android:hint="@string/search"
        android:inputType="text"
        android:maxLines="1"/>
    <ListView 
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:id="@+id/overview_list_view">
    </ListView>

</LinearLayout> 
```

编码：

```
 LinearLayout myView = (LinearLayout)this.getView().findViewById(R.id.container_found_list_overview);
            Log.d("found container", ""+(myView != null));
            try{
                LayoutParams lp = (LayoutParams) myView.getLayoutParams();
                lp.weight = 1;
                lp.width = 0;
                myView.setLayoutParams(lp);
            }
            catch(RuntimeException e){
                Log.e("cant get layoutparams",e.getMessage());
                e.printStackTrace();
            } 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-22T16:05:02.207

发生的事情是视图的 LayoutParams 实际上是*parent*的类型。在这种情况下，您会得到一个`FrameLayout$LayoutParams`，因为您的 LinearLayout 在 FrameLayout 内。

为什么它是父母的类型？那是因为它们存储了对父级布局有用的信息。如果您要检索 EditText 或 ListView 的布局参数，您将获得`LinearLayout$LayoutParams`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T15:43:38.827

异常清楚地表明您正在尝试转换`FrameLayout`为`LinearLayout`. 这发生在`onViewCreated()`ListSearchFragment.java 文件第 184 行的方法中。所以替换它：

```
LayoutParams lp = (LayoutParams) myView.getLayoutParams(); 
```

有了这个：

```
LinearLayout.LayoutParams lp = 
                  (LinearLayout.LayoutParams) myView.getLayoutParams(); 
```

在您这样做之前，您可以将鼠标指针悬停`LayoutParams`在当前代码中，并在气泡中看到它实际上是`android.widget.RelativeLayout.LayoutParams`您的异常。看：

![在此处输入图像描述](../Images/703f7759baf3ff6a539f6c8ca997b801.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-24T10:31:10.773

此异常还有另一个原因（或错误）：

如果视图的 ID 也在另一个布局中使用，那么它将尝试为两个布局中使用的父视图转换 LayoutParams。

解决方案：不要在不同的布局中使用相同的 id :)

# linq-to-sql - 强制 linq dbml 文件获取数据库值

> ID：14004065
> 
> 赞同：0
> 
> 时间：2012-12-22T15:35:26.040
> 
> 标签：linq-to-sql, instance

我有两个站点，一个管理站点，我可以在其中编辑数据库中的所有值，以及一个仅从数据库读取数据的公共站点。两个站点都有相同的 dbml 文件来处理数据库。当我插入一辆新车（网站是关于汽车的，所以所有值都与汽车相关）并且它是数据时，插入的值会立即显示在公共网站上......当我更新汽车的数据时，数据库中的值会改变立即但公共站点继续显示旧值...我读到我可以为每个查询使用 dbml 文件的新实例来强制 dbml 文件读取数据库中的值...

我在代码文件中使用以下代码执行此操作，我在其中放置了所有查询...但这不起作用...

```
 Public Shared AixamReader As FrontstoreAdministrationDataClassesDataContext = New FrontstoreAdministrationDataClassesDataContext 
```

然后我在每个查询中调用 AixamReader ...

有没有更好的方法来强制 dbml 文件从数据库中获取更新的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T10:22:58.980

问题的原因不是 DBML 文件。DBML 不会读取或查询您的数据，它只是生成执行实际工作的类的基础。

因此，在实际数据库中更新/插入数据对您的 DBML 文件的影响为零。

我认为您在这里调用的 DMBL 文件实际上是 DataContext。

是的，如果您使用“旧”DataContext 进行查询，同时您的数据由另一个进程更新，它不会显示在您使用该 DataContext 执行的查询中。这也称为“**陈旧的数据上下文**”。

因此，为每个请求使用一个新的 DataContext，您的问题就解决了。无论如何，DataContexts 是相当轻量级的，并且被设计成以这种方式使用（每个工作单元一个新的）。

# database - 如何在 Scala 中将异常结果列表从两字段数据表转换为 Tuple2

> ID：14004066
> 
> 赞同：1
> 
> 时间：2012-12-22T15:35:34.590
> 
> 标签：database, tuples, implicit-conversion, scala-collections, anorm

我有下表（最大记录数 999）用于查找：

```
CREATE TABLE lga
(
  lgacode character varying(3) NOT NULL DEFAULT '000'::character varying,
  lganame character varying(32) NOT NULL,
  CONSTRAINT pk_lga PRIMARY KEY (lganame),
  CONSTRAINT uk_lga UNIQUE (lgacode)
); 
```

使用 Anorm，我很容易得到一个`lgas`类型的结果列表`List[models.LgaTable]`
如何将这个结果列表放入表单中`List[Tuple2[String,String]]`？

我搜索了 Stack Overflow 并找到了一些接近的东西（[a link]http://stackoverflow.com/questions/4927260/filling-a-scala-immutable-map-from-a-database-table）但是这个包含`Set`，我有同时厌恶：我只需要一些简单的东西。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:03:28.140

只需在您的结果上调用地图：

```
val lgas: List[models.LgaTable] = ...
val lgas_tupled = lags.map(row => (row.lgacode, lganame)) 
```

# logic - 广度优先分辨率算法

> ID：14004081
> 
> 赞同：0
> 
> 时间：2012-12-22T15:37:36.433
> 
> 标签：logic, computer-science, unification

我想实现一个解析算法，它在解析候选子句时尝试获取空集。

我希望算法以广度优先顺序解决候选父子句。但是，我有一点困惑：

令 S 为知识库中所有子句的合取和目标子句的否定

当我们尝试用 S 中的候选子句解析 S 中的候选子句时，我们得到 S'

作为算法的第二步，我们应该尝试用 S' 本身来解决 S 和 S' 还是 S'？它应该如何进行？

例如;

假设知识库+否定。目标集由一组子句组成，例如

p(a,b) ^ q(z),~p(z,b) ^ ~q(y) ((我们称这个集合为 S)

当我们在集合 S 上运行解析算法时，我们得到如下子句：

q(a) ^ ~p(z,b)（我们称这个集合为 S'）

现在，如果我们必须采用 BFS 策略，我们是否应该首先找到其第一个父级在 S 中，第二个在 S' 中的解析器？或尝试检查其父母都来自S'的解析器？

在某些示例中，当您第一次使用 S' 和 S' 检查解析剂时，您会得到解决方案。但是，当您继续检查一对集合 (S, S') (S, (S, S')) 时，您会得到另一种导致空子句的方法。那么，BFS 对应的是哪个顺序呢？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T08:55:54.953

[这里指出：](https://docs.google.com/viewer?a=v&q=cache:4tE7wSLNR5QJ%3acoitweb.uncc.edu/~ras/Logic.pdf%20&hl=en&gl=tr&pid=bl&srcid=ADGEESjhVdqk92RgsPNMAiUzajt6zg-PFKppimrqyt5STtf0k0p_ylg4VjSTt1fsytxm9Iq5RRxFaCUKqecFpjhmmPxaR1h69rEzwSkAY5LE1rJA-xhCKBRpUKfWD_HAd1AAUhtDZUrV&sig=AHIEtbS4KYOm1oCag0sbXjFrVw6anIGQ8Q)

*首先计算所有第一级解析器，然后是第二级解析器，依此类推。一级解析器是基本集中两个子句之间的一个；第 i 级解析器是其最深的父级是第 (i-1) 级解析器。*

在这里[：](https://docs.google.com/viewer?a=v&pid=gmail&attid=0.1&thid=13bc3bf9fe9a8730&mt=application/vnd.ms-powerpoint&url=https://mail.google.com/mail/u/0/?ui=2&ik=3c3cfc6ae4&view=att&th=13bc3bf9fe9a8730&attid=0.1&disp=safe&realattid=f_hb11r3dd0&zw&sig=AHIEtbTnuoBUJ-nbJ7Iny5GPx-TkIeRCdg)

*   *0级子句是原始公理和目标的否定*
*   *k 级子句是从两个子句计算的解析器，其中一个必须来自 k-1 级，另一个必须来自任何更早的级别。*

我从这些陈述和评论中的意思如下：

*   0级包括原始从句和目标的否定。设这个集合为 X。
*   级别 1 包括 (X,X) 的分辨率，这是唯一可能的候选者。设这个集合为 Y。
*   级别 2 包括 (Y,X) 和 (Y,Y) 的分辨率。

等等。

我的解释适用于第二个陈述。实际上，它会给出与第一个相同的结果，只是您将在每个级别解决相同的集合，这是不必要的。广度优先策略已经非常低效，错误的方法会使情况变得更糟。

我希望这能澄清你的问题。

# iphone - iPhone App：如何从应用程序ID获取应用程序图标？

> ID：14004087
> 
> 赞同：14
> 
> 时间：2012-12-22T15:38:13.597
> 
> 标签：iphone, ios, itunes

我正在寻找一种从应用程序 ID 获取应用程序图标的方法。你知道怎么做吗？请分享方法。谢谢。

例如 Instagram，我要查找的 id 是：id389801252

[https://itunes.apple.com/jp/app/instagram/id389801252?mt=8](https://itunes.apple.com/jp/app/instagram/id389801252?mt=8)

我想得到这张图片：

![在此处输入图像描述](../Images/857c0af709cea48f9b8973e990b0a400.png)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-22T15:56:19.247

（我在谷歌搜索 2 分钟后撰写了这个答案......这只是正确关键字的问题！）

这可以使用iTunes Store 中~~未~~ [记录的 API 来实现。](http://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html)它在未来可能会改变，但在不久的过去似乎没有改变，所以你在这里......

```
NSString *idString = @"id389801252";

NSString *numericIDStr = [idString substringFromIndex:2]; // @"389801252"
NSString *urlStr = [NSString stringWithFormat:@"http://itunes.apple.com/lookup?id=%@", numericIDStr];
NSURL *url = [NSURL URLWithString:urlStr];
NSData *json = [NSData dataWithContentsOfURL:url];

NSDictionary *dict = [NSJSONSerialization JSONObjectWithData:json options:0 error:NULL];
NSArray *results = [dict objectForKey:@"results"];
NSDictionary *result = [results objectAtIndex:0];
NSString *imageUrlStr = [result objectForKey:@"artworkUrl100"]; // or 512, or 60

NSURL *artworkURL = [NSURL URLWithString:imageUrlStr];
NSData *imageData = [NSData dataWithContentsOfURL:artworkURL];
UIImage *artworkImage = [UIImage imageWithData:imageData]; 
```

请注意，这会使用 API 执行两次同步往返`NSURL`，因此您最好将其包装在 backgorund 线程中以获得最大的用户体验。为这个程序提供一个 ID 字符串（`idString`在上面的代码中），最后，`artworkImage`将包含一个带有所需图像的 UIImage。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-12-19T09:23:06.937

仅供参考，您也可以使用应用程序的捆绑包 ID：

[http://itunes.apple.com/lookup?bundleId=com.burbn.instagram](http://itunes.apple.com/lookup?bundleId=com.burbn.instagram)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-11T02:16:17.790

不确定这是否完全相关，但 Apple 提供了[iTunes Link Maker](http://itunes.apple.com/linkmaker/)工具。如果您使用此工具查找您的应用程序，您还将看到它显示应用程序图标部分的位置。单击`embed`并从那里获取 img 链接。需要注意的一点是，我确实最终使用了 url 来找到我需要的正确大小和格式（例如，您可以获得 jpg 渲染而不是 png 或选择任意大小，如 128x128）

# git - 我希望接收器在任何 git push 时自动执行命令

> ID：14004088
> 
> 赞同：0
> 
> 时间：2012-12-22T15:38:17.730
> 
> 标签：git

我有一个 git 服务器，我想根据任何推送请求自动运行 CI 测试。如何将命令挂钩到 git？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T15:40:30.490

看看[Server-Side Hooks](http://git-scm.com/book/ch7-3.html#Server-Side-Hooks)。

# c# - WPF 中的 RichTextBox - 获取最后一个文本块

> ID：14004091
> 
> 赞同：1
> 
> 时间：2012-12-22T15:39:19.807
> 
> 标签：c#, wpf, richtextbox, textblock

任何人都可以分享如何`RichTextBox`在 WPF 中获取 a 文档的最后一个块的想法吗？我尝试了代码：

```
Block pg = box.Document.ContentEnd.Paragraph.PreviousBlock;
box.Document.Blocks.Remove(pg); 
```

但它不起作用（第一行是抛出异常）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T16:49:25.320

我认为这必须帮助你：

```
box.Document.Blocks.Remove(box.Document.Blocks.LastBlock) 
```

# jquery - 延迟执行 AJAX 下载脚本，以便将值返回给调用它的函数

> ID：14004093
> 
> 赞同：0
> 
> 时间：2012-12-22T15:39:28.930
> 
> 标签：jquery

我不确定如何问这个问题，但这里是。请注意，这是基于我的场景的过度提示代码。

如下所述，我在客户端上有一个 JavaScript 函数，它调用服务器来检索数据，可能是 HTML 或 JS。我想在很多场景中重用被调用的函数，所以我不想硬编码服务器返回的内容类型。我遇到的问题是当 AJAX 返回时，它已经评估了 JS，我不确定如何从 JS 获取结果以附加到我想要它去的 DOM。

我确信我不必解释，但事件链是：

1.  用户点击按钮
2.  点击路由到功能虚拟
3.  Function dummy 通过 AJAX 从 Server 加载数据，可能是 HTML 或 JS

我希望将 AJAX 调用的结果路由回函数 dummy，以便它可以将数据附加到 id 为“canvas”的 div。我不想使用 eval，而且我对 call 和 apply 方法感到困惑，它们看起来好像很有用，但我不知道。我不想在服务器上创建内容并发送它。我希望客户端处理 UI 元素。

我应该怎么做才能解决这个问题，或者有没有更好的方法来做我需要做的事情？

谢谢

客户端 JS/JQuery：

```
 $(document).ready(function() {
        $(".getcanvas").click(function(e){
            dummy("/someurl");
        });
    }
    function fetch(obj) {
        var defaults, settings, oD, oS, oX;
        if (!(obj.url === undefined)) {
            defaults = {type:"GET",timeout:4000,async:false,success:function(iD,iS,iX){oD=iD;oS=iS;oX=iX;}};
            settings = $.extend({}, defaults, obj); 
            $.ajax(settings);          
        } 
        return {"data":oD, "status":oS, "state":oX};        
    }
    function get(url) {
        var s = fetch({url: url});
        return s.data;
    }
    function dummy(url) {
        $("div#canvas").append(get(url));
    }
    function dothis(json) {
        var res = '';
        json = $.parseJSON(json);

        $.each(json.objects, function(index, object) {
            res += '<div id="+object.id+">'+object.message+'</div>';
        }
        return res;
    } 
```

HTML：

```
 <html>
    <head><title>Something</title></head>
    <body>
        <div id="canvas"/>
        <input type="button" class="getcanvas" />
    </body>
    </html> 
```

服务器@/someurl：

```
 <script>
    var o = '{objects:[{id:57,message:"testing"},{id:45,"somethingnew"}]}';
    dothis(o);
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T15:50:12.770

为什么不直接从服务器返回不带`<script>`标签的代码，然后在后面附加脚本标签。

**编辑**

您可以像这样附加它：

```
$("div#canvas").append("<script>" + get(url) + "</script>"); 
```

# c# - 如何在精灵批次中只应用一次技术？

> ID：14004094
> 
> 赞同：1
> 
> 时间：2012-12-22T15:40:13.530
> 
> 标签：c#, xna, directx, xna-4.0, hlsl

问题是，当我尝试在精灵批次中绘制前一个渲染目标的纹理时，每个通道都被应用。在精灵批次中应用通行证似乎不起作用。

我发现的一个解决方案是将每个通道移动到它自己的技术中，但这不是多通道效果应该实现的方式。**如何在精灵批次中只应用一次技术？**

我正在尝试做一个多通道效果，用阴影和高光绘制一个窗口边框。

在**Pass0**中，顶点缓冲区设置为形状中的顶点。顶点着色器将顶点转换为屏幕空间，像素着色器使用 FillColor 填充形状。

![Pass0 图像](../Images/81701dafe9922453351b6ea1e4c8a2b4.png)

在**Pass1**中，第一遍的渲染目标用于此遍的像素着色器。现在它只是将其设置为用于调试的颜色。最后，它将使用 TEXCOORDn 语义和采样器获取相邻像素的颜色。

![第 1 张图片](../Images/81805c7be39b2a2cf836c19327be97ef.png)

最后一个通道**Pass2**与 Pass1 完全相同，只是它检查不同的颜色并在阴影下方放置一个高光。

![Pass2 图像](../Images/aa89b06ca6bee8e0b818205d7f646804.png)

*Window.cs Window::Draw*

```
public void Draw(MainGame game) {
    Matrix vp = game.view * projection;
    game.GraphicsDevice.SetRenderTarget(target[0]);
    game.GraphicsDevice.Clear(ClearOptions.Target, Color.Transparent, 0, 0);
    game.GraphicsDevice.SetVertexBuffer(vertexbuffer);
    game.effect.Parameters["VPMatrix"].SetValue(vp);
    game.effect.Parameters["FillColor"].SetValue(new float[] { 103, 103, 103, 255 });
    game.effect.CurrentTechnique = game.effect.Techniques["Border"];
    game.effect.CurrentTechnique.Passes[0].Apply();
    game.GraphicsDevice.DrawPrimitives(PrimitiveType.TriangleList, 0, 1);

    game.GraphicsDevice.SetRenderTarget(target[1]);
    game.GraphicsDevice.Clear(ClearOptions.Target, Color.Transparent, 0, 0);
    game.spriteBatch.Begin(SpriteSortMode.Immediate, BlendState.Opaque, SamplerState.PointClamp, DepthStencilState.None, RasterizerState.CullCounterClockwise, game.effect);
    game.effect.CurrentTechnique.Passes[1].Apply();
    game.spriteBatch.Draw(target[0], Vector2.Zero, Color.White);
    game.spriteBatch.End();

    game.GraphicsDevice.SetRenderTarget(target[0]);
    game.GraphicsDevice.Clear(ClearOptions.Target, Color.Transparent, 0, 0);
    game.spriteBatch.Begin(SpriteSortMode.Immediate, BlendState.Opaque, SamplerState.PointClamp, DepthStencilState.None, RasterizerState.CullCounterClockwise, game.effect);
    game.effect.CurrentTechnique.Passes[2].Apply();
    game.spriteBatch.Draw(target[1], Vector2.Zero, Color.White);
    game.spriteBatch.End();

    game.GraphicsDevice.SetRenderTarget(game.backBuffer);
    game.spriteBatch.Begin();
    game.spriteBatch.Draw(target[0], rectangle, Color.White);
    game.spriteBatch.End();
} 
```

*窗口.fx*

```
float4x4 VPMatrix : register(c0);
float4 FillColor : register(c4);
float2 SHPercent : register(c5) = { 0.36893203883495145631067961165049, 1.262135922330097087378640776699 };
sampler ShapeSampler : register(s0) = sampler_state{ };

struct Fill_VS_Input {
    float4 position : POSITION0;
};

struct Fill_PS_Input {
    float4 position : POSITION0;
};

struct Shadow_PS_Input {
    float4 position : TEXCOORD0;
};

struct Highlight_PS_Input {
    float4 position : TEXCOORD0;
};

float4 ClampColor(float4 color) {
    return float4(color[0] / 255, color[1] / 255, color[2] / 255, color[3] / 255);
}

float4 ShiftValue(float4 color, float percent) {
    return float4(clamp(color[0] * percent, 0, 1), clamp(color[1] * percent, 0, 1), clamp(color[2] * percent, 0, 1), 1);
}

Fill_PS_Input Fill_VS(Fill_VS_Input input) {
    Fill_PS_Input output;
    output.position = mul(input.position, VPMatrix);
    return output;
}

float4 Fill_PS(Fill_PS_Input input) : COLOR0 {
    return ClampColor(FillColor);
}

float4 Shadow_PS(Shadow_PS_Input input) : COLOR0 {
    if (tex2D(ShapeSampler, float2(input.position.x, input.position.y))[3] == 0)
        return float4(0, 255, 0, 255);

    /*if (input.position.x == 0)
        return ShiftValue(ClampColor(FillColor), SHPercent[0]);

    if (input.position.x == 1)
        return ShiftValue(ClampColor(FillColor), SHPercent[0]);

    if (input.position.y == 0)
        return ShiftValue(ClampColor(FillColor), SHPercent[0]);

    if (input.position.y == 1)
        return ShiftValue(ClampColor(FillColor), SHPercent[0]);

    if (tex2D(ShapeSampler, float2(input.position.x, input.position.y - 1))[3] = 0)
        return ShiftValue(ClampColor(FillColor), SHPercent[0]);

    if (tex2D(ShapeSampler, float2(input.position.x + 1, input.position.y))[3] = 0)
        return ShiftValue(ClampColor(FillColor), SHPercent[0]);

    if (tex2D(ShapeSampler, float2(input.position.x, input.position.y + 1))[3] = 0)
        return ShiftValue(ClampColor(FillColor), SHPercent[0]);

    if (tex2D(ShapeSampler, float2(input.position.x - 1, input.position.y))[3] = 0)
        return ShiftValue(ClampColor(FillColor), SHPercent[0]);*/

    return float4(255, 0, 0, 255);
}

float4 Highlight_PS(Highlight_PS_Input input) : COLOR0 {
    return tex2D(ShapeSampler, float2(input.position.x, input.position.y)).rbga;
}

technique Border {
    pass Pass0 {
        VertexShader = compile vs_2_0 Fill_VS();
        PixelShader = compile ps_2_0 Fill_PS();
    }

    pass Pass1 {
        PixelShader = compile ps_2_0 Shadow_PS();
    }

    pass Pass2 {
        PixelShader = compile ps_2_0 Highlight_PS();
    }
} 
```

# symfony - 检查是否定义了功能/扩展

> ID：14004106
> 
> 赞同：5
> 
> 时间：2012-12-22T15:42:03.600
> 
> 标签：symfony, twig, knpmenubundle

在我的 Symfony2 包中，我需要检查是否定义了函数（扩展）。更具体地说，如果安装了 KnpMenuBundle，我会在我的包中使用它，否则我将自己渲染插件。

我试过这个，但这当然不起作用：

```
{% if knp_menu_render() is defined %}
    {# do something #}
{% else %}
    {# do something else #}
{% endif %} 
```

是否有测试/函数/过滤器来检查是否定义了函数？如果没有，是否有另一种方法来检查 KnpMenuBundle 是否安装在应用程序中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T16:37:55.840

[在Twig 扩展](http://symfony.com/doc/current/cookbook/templating/twig_extension.html)中编写一个函数，该函数将检查捆绑包是否已启用。

已注册捆绑包的列表存储在`kernel.bundles`参数中。

Twig 扩展被注册为服务。这意味着您可以将任何其他服务或参数传递给您的扩展：

```
<services>
    <service id="acme.twig.acme_extension" class="Acme\DemoBundle\Twig\AcmeExtension">

        <argument>%kernel.bundles%</argument>

        <tag name="twig.extension" />
    </service>
</services> 
```

在您的 Twig 函数或过滤器中，您稍后可以使用已传递给扩展的服务或参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-27T18:50:07.463

我有同样的需求，所以我创建了自己的扩展：

```
class IsLoadedExtension extends \Twig_Extension
{
    /**
     * @var \Twig_Environment
     */
    protected $environment;

    public function initRuntime(\Twig_Environment $environment)
    {
        $this->environment = $environment;
    }

    /**
     * Returns a list of functions to add to the existing list.
     *
     * @return array An array of functions
     */
    public function getTests()
    {
        return array(
                new \Twig_SimpleTest('loaded', [$this, 'hasExtension']),
        );
    }

    /**
     * @param string $name
     * @return boolean
     */
    function hasExtension($name)
    {
        return $this->environment->hasExtension($name);
    }

    /**
     * Returns the name of the extension.
     *
     * @return string The extension name
     */
    public function getName()
    {
        return 'amce_extension_exists';
    }
} 
```

然后在 Twig 中注册：

```
services:
    acme_somebundle.twig.is_loaded_extension:
        class: Acme\SomeBundle\Twig\IsLoadedExtension
        tags: [{ name: twig.extension }] 
```

并像这样在树枝模板中使用它：

```
{% if 'knp_menu' is loaded %}
  {# use knp menu #}
{% endif %} 
```

# excel - Excel，从同一行但不同列获取值

> ID：14004108
> 
> 赞同：5
> 
> 时间：2012-12-22T15:42:33.207
> 
> 标签：excel, formula, libreoffice

我正在尝试在 Excel 中编写 GPA 计算器（实际上是 LibreOffice，但它的工作原理相同），而我需要帮助的是计算质量点。我只用 C 和类似语言编写过代码，所以电子表格及其符号对我来说非常陌生。

如果您不知道，GPA 的计算方法是将您的总质量分除以您的总学分，质量分是您在特定班级中设置为 4 级的成绩乘以该班级的学分值。因此，例如，如果我在 4 小时的课程中获得 B，我将获得 3*4 = 12 的质量分。如果我参加了一个 17 小时的学期并获得了 63 个质量分数，那么我该学期的 GPA 为 63/17 = 3.706。

言归正传，我的电子表格是这样设置的

```
 A          B           C
       GRADE     CREDITS     QUALITY
1        B          3           9
2        A          4          16
3        B          1           3
... 
```

所以我的公式看起来像这样

```
IF(A1="A",4*B1,
IF(A1="B",3*B1,
IF(A1="C",2*B1,
IF(A1="D",  B1,0)))) 
```

问题是，此代码仅适用于第一行。对于任何其他行，我必须用正在计算的行号替换所有 1。必须有更好的方法来编写这个公式。我将如何概括这一点，以便我可以复制和粘贴公式而不进行编辑？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T15:54:52.210

In Excel you can copy and paste a formula, or fill-down a formula and it will automatically update the references for you. Have you tried copying the formula down? Otherwise you can do indirect formulas that use commands like INDIRECT and ROW, but I cannot guarantee those will convert to LibreOffice.

If you need to use INDIRECT formulas, it'd look something like this:

```
=IF(INDIRECT("A" & ROW())="A",4*INDIRECT("B" & ROW()),
IF(INDIRECT("A" & ROW())="B",3*INDIRECT("B" & ROW()),
IF(INDIRECT("A" & ROW())="C",2*INDIRECT("B" & ROW()),
IF(INDIRECT("A" & ROW())="D",  INDIRECT("B" & ROW()),0)))) 
```

# ios - 仅在一台设备上出现无效区域错误

> ID：14004109
> 
> 赞同：3
> 
> 时间：2012-12-22T15:42:37.013
> 
> 标签：ios, maps, mapkit, cllocationmanager, region

我正在尝试在我的应用程序中显示地图，它适用于我的模拟器和我的 ipod touch 4g。

但我的 iPhone 总是出错，我不知道为什么会这样。也许你可以解释为什么它失败了。错误是：

> 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“无效区域`<center:nan, nan span:nan, nan>`”

我已经在 google 和 stackoverflow 上搜索了解决方案，但似乎没有人有这个问题。

那是我的代码：

```
//setup mapview
mapView.delegate = self;
mapView.showsUserLocation = YES;

//set up core location
locationManager = [[CLLocationManager alloc] init];
locationManager.delegate = self;

//Set up zoom location
CLLocationCoordinate2D zoomLocation;
zoomLocation.latitude = locationManager.location.coordinate.latitude;
zoomLocation.longitude= locationManager.location.coordinate.longitude;

debug(@"Location: %f und %f",locationManager.location.coordinate.latitude,locationManager.location.coordinate.longitude);

//zoom to location
MKCoordinateRegion viewRegion = MKCoordinateRegionMakeWithDistance(zoomLocation, 0.5*METERS_PER_MILE, 0.5*METERS_PER_MILE);
MKCoordinateRegion adjustedRegion = [mapView regionThatFits:viewRegion];                
[mapView setRegion:adjustedRegion animated:YES]; 
```

正如我所说，它适用于 iPod 和模拟器，但不适用于 iPhone。

希望你能帮我

**解决方案：**

我太早使用locationManager，所以应用程序崩溃了。现在我这样使用它：

```
 - (void)viewDidLoad {
[super viewDidLoad];

//setup mapview
mapView.delegate = self;
mapView.showsUserLocation = YES;

//set up core location
locationManager = [[CLLocationManager alloc] init];
locationManager.delegate = self;

[locationManager startUpdatingLocation];

    }

   - (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation{
//Set up zoom location
CLLocationCoordinate2D zoomLocation;
zoomLocation.latitude = newLocation.coordinate.latitude;
zoomLocation.longitude= newLocation.coordinate.longitude;

MKCoordinateRegion viewRegion = MKCoordinateRegionMakeWithDistance(zoomLocation, 0.5*METERS_PER_MILE, 0.5*METERS_PER_MILE);
MKCoordinateRegion adjustedRegion = [mapView regionThatFits:viewRegion];
[mapView setRegion:adjustedRegion animated:YES];

debug(@"Location: %f und %f",newLocation.coordinate.latitude,newLocation.coordinate.longitude);

    } 
```

不知道这种方法是否 100% 正确，但它确实有效。

# c# - 使用 RSS 提要内容将 HTML 转换为 Xaml

> ID：14004112
> 
> 赞同：0
> 
> 时间：2012-12-22T15:42:43.540
> 
> 标签：c#, richtextblock

我正在用 C# 构建一个 Windows 8 应用程序，以在应用程序[http://blogs.msdn.com/b/jasonz/rss.aspx](http://blogs.msdn.com/b/jasonz/rss.aspx)中显示 RSS 提要。当我阅读 RSS 提要并将所有内容转换为文本并将所有提要项绑定到 XAML 属性时，这可以正常工作。下一步是将 (x)HTML 转换为 XAML，以便布局和标记将被翻译并显示在 RichTextBlock 中。

为此，我使用此代码 ( [https://github.com/MacawNL/WinRT-RichTextBlock.Html2Xaml](https://github.com/MacawNL/WinRT-RichTextBlock.Html2Xaml) ) 将 html 绑定并转换为 xaml 到 RichTextBlock。当我使用带有一些示例 HTML 的字符串 var 时，这似乎工作正常。var content = “<strong>测试和测试二”; 测试和示例字符串也可以正常工作。

但是，一旦我尝试将我的 RSS 提要内容（带有 (x)HTML）放入 WinRt-RichTechtBlock.Html2Xaml 中，我就会在这一行收到异常错误： `xhtmlDoc.LoadXml(xhtml);`在 RichTextBlockProperties.cs 中。

这是异常错误

> > mscorlib.dll 中出现“System.ArgumentException”类型的异常，但未在用户代码中处理附加信息：值不在预期范围内。

我一直在尝试找到一种方法来解析/加载从 RSS 提要下载的内容到 xhtmlDoc.LoadXml 函数中，但没有成功。

我怎样才能让 WinRT-RichTextBlock.Html2Xaml 理解来自 RSS 提要的内容，它可以将 HTML 转换为正确的 XAML 标记？

**更新**

xHTML 确实可能是无效的（正如您在查看 RSSfeed 时看到的那样），它只是 HTML 的某些部分，而不是整个文档）。但我想忽略这些错误，并处理它可以找到的正确错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:21:14.850

错误是由于无效的 HTML。一旦我剥离了无效部分（例如 target=_blank vs target="_blank" ），异常错误就消失了。

# javascript - 创造 并附加 动态的

> ID：14004117
> 
> 赞同：141
> 
> 时间：2012-12-22T15:43:32.260
> 
> 标签：javascript

我正在尝试`<div>`动态创建一个，并在里面附加一个`<div>`。到目前为止，我有这个工作：

```
var iDiv = document.createElement('div');
iDiv.id = 'block';
iDiv.className = 'block';
document.getElementsByTagName('body')[0].appendChild(iDiv); 
```

我只是在创建第二个 div 并将其附加到第一个 div 时遇到问题。

我基本上想将其作为最终标记：

```
<div id="block" class="block">
   <div class="block-2"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：250
> 
> 时间：2012-12-22T15:46:50.867

使用相同的过程。您已经拥有`iDiv`仍然引用`<div id='block'>`您创建的原始元素的变量。您只需要创建另一个`<div>`并调用`appendChild()`.

```
// Your existing code unmodified...
var iDiv = document.createElement('div');
iDiv.id = 'block';
iDiv.className = 'block';
document.getElementsByTagName('body')[0].appendChild(iDiv);

// Now create and append to iDiv
var innerDiv = document.createElement('div');
innerDiv.className = 'block-2';

// The variable iDiv is still good... Just append to it.
iDiv.appendChild(innerDiv); 
```

[http://jsfiddle.net/W4Sup/1/](http://jsfiddle.net/W4Sup/1/)

事件创建的顺序不必像我上面所说的那样。`innerDiv`在将两者都添加到`<body>`.

```
var iDiv = document.createElement('div');
iDiv.id = 'block';
iDiv.className = 'block';

// Create the inner div before appending to the body
var innerDiv = document.createElement('div');
innerDiv.className = 'block-2';

// The variable iDiv is still good... Just append to it.
iDiv.appendChild(innerDiv);

// Then append the whole thing onto the body
document.getElementsByTagName('body')[0].appendChild(iDiv); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-22T15:53:14.283

```
var iDiv = document.createElement('div');

iDiv.id = 'block';
iDiv.className = 'block';
document.getElementsByTagName('body')[0].appendChild(iDiv);

var div2 = document.createElement('div');

div2.className = 'block-2';
iDiv.appendChild(div2); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-22T15:47:06.880

```
var iDiv = document.createElement('div'),
    jDiv = document.createElement('div');
iDiv.id = 'block';
iDiv.className = 'block';
jDiv.className = 'block-2';
iDiv.appendChild(jDiv);
document.getElementsByTagName('body')[0].appendChild(iDiv); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-22T16:02:48.210

```
window.onload = function() {
  var iDiv = document.createElement('div');
  iDiv.id = 'block';
  iDiv.className = 'block';
  document.body.appendChild(iDiv);

  var iiDiv = document.createElement('div');
  iiDiv.className = 'block-2';

  var s = document.getElementById('block');
  s.appendChild(iiDiv);
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-09-07T14:45:02.637

好吧，我不知道这是多么动态，但有时这可能会节省您的调试寿命：

```
var daString="<div id=\'block\' class=\'block\'><div class=\'block-2\'></div></div>";
var daParent=document.getElementById("the ID of whatever your parent is goes in here");
daParent.innerHTML=daString; 
```

“Rat javascript”如果我做得正确的话。当然，当 div 和内容本身不是动态的时，直接为我工作，或者你甚至可以操纵字符串来改变它，尽管字符串操纵比“element.property=bla”方法复杂，这很受欢迎灵活性，并且也是一个很好的调试工具:) 希望它有所帮助。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-07-09T06:04:33.320

```
var i=0,length=2;

     for(i; i<=length;i++)
 {
  $('#footer-div'+[i]).append($('<div class="ui-footer ui-bar-b ui-footer-fixed slideup" data-theme="b" data-position="fixed" data-role="footer" role="contentinfo" ><h3 class="ui-title" role="heading" aria-level="1">Advertisement </h3></div>')); 

 } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-03-06T09:14:49.360

```
var arrayDiv = new Array();
    for(var i=0; i <= 1; i++){
        arrayDiv[i] = document.createElement('div');
        arrayDiv[i].id = 'block' + i;
        arrayDiv[i].className = 'block' + i;
    }
    document.body.appendChild(arrayDiv[0].appendChild(arrayDiv[1])); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-22T17:21:14.140

```
var iDiv = document.createElement('div');
iDiv.id = 'block';
iDiv.className = 'block';

var iDiv2 = document.createElement('div');
iDiv2.className = "block-2";

iDiv.appendChild(iDiv2);
// Append to the document last so that the first append is more efficient.
document.body.appendChild(iDiv); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-04-16T09:27:00.383

```
 while(i<10){
               $('#Postsoutput').prepend('<div id="first'+i+'">'+i+'</div>');
               /* get the dynamic Div*/
               $('#first'+i).hide(1000);
               $('#first'+i).show(1000);
                i++;
                } 
```

# javascript - div的循环滚动

> ID：14004120
> 
> 赞同：0
> 
> 时间：2012-12-22T15:43:39.603
> 
> 标签：javascript, jquery, animation, round-robin

考虑以下安排（[jsfiddle](http://jsfiddle.net/HZRSZ/)）：

```
 <------- Full width occupied ------->
---------------------------------------------------------
| Div A | Div B | Div C | Div D | Div E | Div F | Div G | .... H, I, J
---------------------------------------------------------

/* There are Div H, I & J currently not visible */

Button: Left Scroll 
Button: Right Scroll 
```

如果用户按下，Left Scroll - Div H, I & J 依次进入显示区域，但在 J 之后而不是 Div 向左更深地移动，它应该循环回到 A 然后 B 等等。

我已经能够实现运动（见小提琴）但无法使其循环。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T17:06:52.047

您的方法的主要问题是您正在移动容器而不是其子级。为了实现轮播，孩子们必须在屏幕外被洗牌到他们在队列中的适当位置。

我已经使用示例解决方案修改了您的 jsfiddle。 [http://jsfiddle.net/HZRSZ/4/](http://jsfiddle.net/HZRSZ/4/)

javascript 看起来像这样：

```
$('#scroll-left').click(function() {
    $('.inner').first()  //select the first child

        //animate its movement left by using the left margin
        .animate({'margin-left':'-=100px'}, function() {

            //then once the item is off screen move it to the other side
            //of the list and reset its margin
            $(this).appendTo('.wrapper').css('margin-left', '');
        });
}); 
```

并且向右的运动与刚刚反转的向左相同

```
$('#scroll-right').click(function() {
    $('.inner').last()
        .css('margin-left', '-=100')
        .prependTo('.wrapper')
        .animate({'margin-left':'+=100'});
}); 
```

​</p>

# c# - 在 NotifyIcon 应用程序中使用多个项目

> ID：14004121
> 
> 赞同：0
> 
> 时间：2012-12-22T15:44:05.920
> 
> 标签：c#, entity-framework, project-management, notifyicon, applicationcontext

所以我有所有问题中最奇怪的。我只是想写一个简单的 c# WinForms 工具供个人使用时遇到它。我将从头开始，真正的问题将在最后。

所以我做了一个 NotifyIcon 应用程序。这很简单，我刚刚做了：

```
public class MyApp: ApplicationContext
{
    NotifyIcon icon;
    public MyApp()
    {
        // ...
    }

    // ...
} 
```

并像所有其他 WinForms 应用程序一样启动该应用程序：

```
Application.Run(new MyApp()); 
```

现在我添加了一个新的 MyApp.Data 类项目，其中包含一个本地数据库，并使用 edmx 帮助程序来生成我的 EF 模型。我添加了一个名为 Database 的静态类，它应该包含我的所有查询。

```
public static class DataBase
{
    static MyAppModel db = new MyAppModel();

    public static void AddEntry(SomeThing st) 
    {
        db.SomeThings.AddObject(st);
        db.SaveChanges();
    }

    public static String[] GetSomeThings(int numberOfEntries)
    {
        return db.SomeThings.OrderBy(x => x.Date).Select(x => x.Title).Take(numberOfEntries).ToArray();
    }
} 
```

回到 WinForms NotifyIcon 项目，我添加了 MyApp.Data 程序集（和 EF 程序集），当我调用时`DataBase.AddEntry(x)`一切正常，但是当我使用时`Database.GetSomeThings(10)`一切都中断了。

```
var x = Database.GetSomeThings(10);
String[] y = Database.GetSomeThings(10); 
```

只是默默地失败而没有错误。`x`并且`y`两者都不会出现在当地人中，也无法观看。有人有想法吗？

编辑：我直接绑定到组合框，它神奇地起作用了。现在我打开了自动完成模式和源，我收到一条错误消息：

*Für den aktuellen Thread muss der STA-Modus (Single Thread Apartment) festgelegt werden, bevor OLE-Aufrufe ausgeführt werden können。Stellen Sie sicher, dass die Hauptfunktion mit STAThreadAttribute gekennzeichnet ist。*

不幸的是德语，但我想我可以解决这个问题：

[http://msdn.microsoft.com/de-de/library/ms182351%28vs.80%29.aspx](http://msdn.microsoft.com/de-de/library/ms182351%28vs.80%29.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T16:20:53.027

所以我认为这解决了这个问题（为应用程序创建一个起点，并且我把它做成了单例，其他一切都是愚蠢的恕我直言）。

```
 public static class Program
    {
        private static MyApp activeInstance;

        [STAThread]
        public static void Main()
        {
            if (activeInstance == null)
            {
                activeInstance = new MyApp();
                Application.Run(activeInstance);
            }
        }
    } 
```

不过，如果有人知道我在这里做了什么，我将不胜感激。这些`[ tags ]`可能是我不理解的编程中的最后一件事。

# facebook-graph-api - 从我所有的 Facebook 页面获取帖子？

> ID：14004122
> 
> 赞同：1
> 
> 时间：2012-12-22T15:44:09.483
> 
> 标签：facebook-graph-api, filter, facebook-fql

我想从我喜欢的 Facebook 页面 (graph.facebook.com/me/likes/) 获取最新更新。我以为我可以通过以下语句使用 FQL

```
SELECT source_id, share_count,likes, FROM stream WHERE source_id in (select target_id from connection where source_id=me() and target_type='page')  LIMIT 100 
```

然而，由于其各种算法，FB 似乎正在过滤掉一堆页面。有没有直接的方法来解决这个问题？我只想查看所有消息并自己决定相关的内容。

我之前通过图形 api 跳转到我喜欢的每一页，但如果我的个人资料中有 700 多个喜欢，这显然会有点疯狂。

# c++ - “未解析的外部符号”错误

> ID：14004123
> 
> 赞同：0
> 
> 时间：2012-12-22T15:44:09.870
> 
> 标签：c++, visual-studio-2010, pointers

请看下面的代码

**主文件**

```
#include <iostream>
#include <string>

using namespace std;

int main()
{
    system("pause");

    return 0;
} 
```

**魔法.h**

```
#pragma once

class Magic
{
public:
    Magic();
    ~Magic();
    virtual void display()=0;
}; 
```

**拼写.h**

```
#pragma once
#include "Magic.h"
#include <iostream>
#include <string>

using namespace std;

class Spell :
    public Magic
{
public:
    Spell(void);
    Spell(string words);
    ~Spell(void);
    void display();

private:
    string words;
}; 
```

**拼写.cpp**

```
#include "Spell.h"
#include "Magic.h"
#include <iostream>
#include <string>

using namespace std;

Spell::Spell(void)
{
}

Spell::Spell(string words)
{
    this->words = words;
}

Spell::~Spell(void)
{
    cout << "Delete Spell" << endl;
}

void Spell::display()
{
    cout << "Spell Words: " << words << endl;
} 
```

在这里，我收到错误

```
1>------ Build started: Project: Revision1_1, Configuration: Debug Win32 ------
1>Spell.obj : error LNK2019: unresolved external symbol "public: __thiscall Magic::~Magic(void)" (??1Magic@@QAE@XZ) referenced in function __unwindfunclet$??0Spell@@QAE@XZ$0
1>Spell.obj : error LNK2019: unresolved external symbol "public: __thiscall Magic::Magic(void)" (??0Magic@@QAE@XZ) referenced in function "public: __thiscall Spell::Spell(void)" (??0Spell@@QAE@XZ)
1>C:\Users\yohan\Documents\Visual Studio 2010\Projects\Revision1_1\Debug\Revision1_1.exe : fatal error LNK1120: 2 unresolved externals
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

我不明白在这里做什么。为什么会这样？请帮忙！反正我是 C++ 新手..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T15:46:12.257

`Magic`没有实现它的构造函数和析构函数（也应该是`virtual`）。

如果没有必要，甚至不要声明构造函数，例如

```
class Magic {
public:
  virtual ~Magic() {}
  virtual void display() = 0;
}; 
```

无关：我不知道你会施展魔法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T15:45:55.037

你没有实现

```
Magic();
~Magic(); 
```

您需要在实现文件中内联实现它们，或者将它们标记为`= default`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-22T15:47:23.283

You have declared a destructor in your `Magic` class but did not define it. That's why the linker complains (and the compiler doesn't).

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-22T15:46:52.060

您没有 Magic 的实现。如果您的意图是让 Magic 成为一个抽象基类，那么只需将其声明更改为：

```
#pragma once

class Magic
{
public:
    virtual void display()=0;
}; 
```

Remember, any method that is not followed by = 0 in the interface must be implemented in the class.

# jsf - 如何使用 JSF 在 Liferay 门户中重定向

> ID：14004124
> 
> 赞同：1
> 
> 时间：2012-12-22T15:44:50.260
> 
> 标签：jsf, jsf-2, liferay, liferay-6

使用jsf重定向到liferay中portlet内的另一个页面的方法是什么？我一直在尝试通过 javascript window.location.href 但它尝试重定向页面而不是门户。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T03:27:23.177

这取决于您要重定向到哪个页面。

*   重定向到另一个 portlet 的第一页。

    假设您有portlet1，并且您想从portlet1 重定向到portlet2。如果 portlet2 的 URL 是 http:/yourDomain/ **web/portal/portlet2**那么下面的代码将从 portlet1 重定向到 portlet2 的第一页

    `FacesContext context = FacesContext.getCurrentInstance();` `javax.faces.context.ExternalContext externalContext = context.getExternalContext();` `externalContext.redirect("/web/portal/portlet2");`

上面的代码将命中 portlet2 并取决于您的欢迎页面配置（在您的第一页中`phaselistener`或在`portlet.xml`您的第一页中将显示。

*   从 Portlet1 重定向到 Portlet2 的其他页面（而不是欢迎页面）。

假设您想从 Portlet1 重定向到 Portlet2 的第三页。在这种情况下，使用上面的代码可以点击 Portlet2。这将调用`PhaseListenter`. 在这里，您可以检查要重定向到哪个页面，并相应地使用以下代码。

```
if(someConditionIsMet)
{   
 FacesContext context = FacesContext.getCurrentInstance();
UIViewRoot newPage = context.getApplication().getViewHandler().createView(context,"/your3rdPage.jsf");
 context.setViewRoot(newPage);
context.renderResponse();
} 
```

*   重定向到同一 Portlet 中的某个页面

我认为您不是在寻找此案的答案。不过，我认为我对你的问题并不完全清楚。

假设您正在通过`h:commandLink`or调用链接`h:commandButton`。你正在调用一个方法（它返回`String`）。然后可以使用下面的代码。

```
public String someMethod()
{
 //Do your checks here
return "success";
  } 
```

这必须在您的`faces-config.xml`文件中进行配置。

```
<navigation-rule>
  <navigation-case>
   <from-outcome>success</from-outcome>
   <to-view-id>/yourRequiredPage.jsf</to-view-id>
  </navigation-case>
</navigation-rule> 
```

# ruby-on-rails - Rails HTTParty 超时::错误

> ID：14004130
> 
> 赞同：1
> 
> 时间：2012-12-22T15:45:04.880
> 
> 标签：ruby-on-rails, httparty

我有一个以 API 为中心的应用程序 (/api/v1/users)，它只是以 JSON 格式简单地返回所有用户。

我的问题是，如果我在控制器上调用该路由，它会返回“Timeout::Error”，这是什么问题？

```
class BaseController < ApplicationController
  def index
    return HTTParty.get('http://localhost:3000/api/v1/users').body
  end
end 
```

**更新**

*   users_controller.rb (/api/v1/users)
*   application_controller.rb

[https://gist.github.com/4359591](https://gist.github.com/4359591)

**日志**

[http://pastie.org/5565618](http://pastie.org/5565618)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T16:43:24.997

如果我理解正确，您有一个 API 端点 at `/api/v1/users`，并且您`BaseController#index`正在调用该方法？

如果这是正确的，在同一个 rails 进程中，并且您正在开发模式下进行测试（我可以从您的 url 中看出），那么您只有一个进程正在运行，它一次只能处理一个请求。因此，如果您向 发起请求`BaseController#index`，它将向您自己的测试服务器发起另一个请求，该服务器正忙，它会一直等到超时。

如果你想测试你的 API，我会看看像[Postman](https://chrome.google.com/webstore/detail/postman-rest-client/fdmmgilgnpjigdojojpjoooidkmcomcm?hl=en)这样的客户端工具。

HTH。

# android - 无法正确打印字符串

> ID：14004133
> 
> 赞同：4
> 
> 时间：2012-12-22T15:45:28.093
> 
> 标签：android

我想在`EditText`. 但我只得到最后一个问题。可能是因为它正在覆盖该值。谁能帮我。

```
 String question[]={
            "Is the condition of the security post organized and clean?",
            "Is the officer aware of the U.S. Security ISO 9001:2008 Quality Program?",
            "Does the officer have a security officer guidebook?",
            "Does the officer have a current, valid security guard license?",
            "Are the post orders complete?",
            "Are the security officer key goals included in the post orders?",
            "Is there a client emergency list of phone numbers?",
            "Has the officer signed off that he/she read and understands the post orders",
            "Has the officer received US Security Academy training or state mandated training?",
            "Has the officer received site specific training?",
            "If the officer drives a vehicle on duty, does he/she have a verified valid drivers license?",
            "Is the officer in proper uniform?",
            "Does the officer know the client contact?",
            "Does the officer know how to contact his/her supervisor?",
            "Is the site on Post Positive?",
            "Is the officer trained and knowledgeable on the use of Post Positive?",
            "Are the daily activity reports up to date?",
            "Did the inspecting supervisor sign daily activity reports indicating date and time of inspection?",
            "Does the security officer have any safety or security concerns regarding this client location?",   
    };
    for(int i=0;i<19;i++)
    {
        //summ+=summ;
        s=sq[i].split("&");

        summ=question[i]+" "+s[0];
        //Toast.makeText(getApplicationContext(),summ, Toast.LENGTH_LONG).show();
         mQuestions.setText(summ);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T15:47:55.727

**第一个解决方案：**

使用[EditText.append](http://developer.android.com/reference/android/widget/TextView.html#append%28java.lang.CharSequence%29) 将新字符串添加到 EditText 中的现有文本

```
 mQuestions.append(summ); 
```

代替

```
 mQuestions.setText(summ); 
```

**第二种解决方案：**

```
String summ="";
for(int i=0;i<19;i++)
    {
        //summ+=summ;
        s=sq[i].split("&");

        summ +=question[i]+" "+s[0];

        mQuestions.setText(summ);
    } 
```

# svn - svn版本还原

> ID：14004134
> 
> 赞同：0
> 
> 时间：2012-12-22T15:45:28.323
> 
> 标签：svn, version

我不小心将 svn 升级到了一个错误的版本，这破坏了一些东西。我不知道最后一个工作版本的版本号。我想恢复到上一个​​工作版本，怎么做？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T20:36:42.623

svn 本身不记得您在上次“svn up”之前检查过的版本。因此，对于糟糕的更新，没有简单的“撤消”方法。

如果您知道*上次*更新到工作版本的时间，并且当时没有明确指定修订号，那么您可以将该时间传递给“svn up”以返回“当时的 HEAD”。

或者，您可以尝试向后移动修订历史，测试每一个，直到找到一个“好”的。该命令`svn up -rPREV`将使您向后移动一个更改。

如果您知道更新带来了大量新修订，因此逐个后退需要很长时间，那么[此答案中描述](https://stackoverflow.com/questions/3376892/how-to-find-out-which-revision-contained-a-certain-line-in-svn/3385779#3385779)的二进制搜索会有所帮助。

# xcode - Objective C/Xcode- 将用户输入的数据格式化为货币到 UIAlertView

> ID：14004135
> 
> 赞同：0
> 
> 时间：2012-12-22T15:45:47.110
> 
> 标签：xcode, delegates, uitextfield, uialertview

我有一个 UITextField 委托方法的工作实现（如下）。我的界面中弹出了一个 UIAlertView，它使用 UIAlertViewStyleLoginAndPassWordInput 进行样式设置，第二个文本字段的安全文本输入属性设置为 NO（实际上给了我一个带有两个文本字段的 UIAlertView）。UIKeyboardTypeDecimalPad 成为每个文本字段的第一响应者。

我想调整这些文本字段以使用下面发布的委托方法，将这些文本字段中的所有输入格式化为货币。我知道我可以手动调用委托方法并将文本字段作为第一个参数传递，但我不确定作为 Range 和 Replacement String 参数传递什么。

这是 UITextField 委托方法：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    NSString *text = [textField.text stringByReplacingCharactersInRange:range withString:string];
    text = [text stringByReplacingOccurrencesOfString:@"." withString:@""];
    text = [text stringByReplacingOccurrencesOfString:@"$" withString:@""];
    text = [text stringByReplacingOccurrencesOfString:@"\"" withString:@""];
    double number = [text intValue] * 0.01;
    textField.text = [NSString stringWithFormat:@"%@%.2lf", @"$",number];
    return NO;
} 
```

谢谢

最好的...SL

# assembly - 外部符号的目标文件链接如何工作？

> ID：14004137
> 
> 赞同：2
> 
> 时间：2012-12-22T15:45:58.347
> 
> 标签：assembly, linker, x86, x86-64

假设你有一个这样的 C 文件：

```
extern void foo(void);

int main(int argc, char** argv) {
    foo();
    return 0;
} 
```

这会生成以下 x86-64 程序集：

```
extern _foo
global _main:
    callq foo
    retq 
```

当编译器为此编写目标文件时，它如何告诉链接器返回并填写“foo”的实际地址？它会在 callq 指令的地址字段中留下特殊代码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T15:59:49.210

我想我想通了（也许有人发表评论让我知道这是否正确）。

编译器在目标文件中发出“重定位条目”。这是一个表格，列出了目标文件中指向需要更新的地址的偏移量。在上面的示例中，“callq foo”将有一个重定位条目，它将指向 callq 中地址字段的第一个字节。

在链接期间，链接器会遍历所有重定位条目并填写正确的地址。

我看了[这里](https://developer.apple.com/library/mac/#documentation/developertools/conceptual/MachORuntime/Reference/reference.html)和[这里](http://www.iecc.com/linker/linker01.html)来解决这个问题。

# indexeddb - 对索引数据库删除感到困惑

> ID：14004142
> 
> 赞同：0
> 
> 时间：2012-12-22T15:46:25.487
> 
> 标签：indexeddb, delete-record

我的场景：

我有一个索引数据库页面，它检索多个文件（图片），每张图片旁边都有一个“删除文件”按钮。此外，每张图片旁边都有复选框，用于删除要删除的多个文件。“删除文件”按钮调用“deleteRecord”函数并将密钥传递给它......它可以很好地删除文件。但是，当批量删除按钮调用相同的“deleteRecord”函数进行批量删除并将密钥传递给它时，不会删除任何文件。'deleteRecord' 贯穿每个键并有一个 onsuccess 事件。但是，什么都没有被删除？

> deleteFile 函数（这适用于单个按钮）：

```
function deleteRecord (id) {
    console.log('inside deleteRecord.  id: ' + id);
    var transaction = db.transaction("patient", "readwrite");
    var objectStore = transaction.objectStore("patient");
    var request = objectStore.delete(id);
    request.onsuccess = function(evt) {
    console.log("It's gone!");
}; 
```

它被成功调用：

```
inputBttn.onclick = function () {
    var prompt = 'Are you sure you want to delete this record?'
    answer = confirm(prompt);
    if (answer) {
    deleteRecord(key);
    console.log('Key = ' + key + ' Record Deleted');
} 
```

并且不成功：

```
function massDelete() {
    console.log('inside massDelete');
    var checkboxes = document.getElementsByName('c1');                  
    var prompt = 'You are about to delete Multiple Records.  Are you sure?'
    var answer = confirm(prompt);
    if (answer) {
    console.log('Delete confirmed...starting mass delete');
    for (var x = 0; x < checkboxes.length; x++) {
        if (checkboxes[x].checked) {
        var key = checkboxes[x].value;
        console.log('checkbox value = ' + key);
        deleteRecord (key);
    }
}; 
```

任何关于为什么会发生这种情况的解释都将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-18T00:25:25.517

在尝试了这里的代码之后，我搜索了很长时间以获得答案，有趣的是，它没有被标记为解决方案。Kyaw Tun 的回答对我不起作用，但给了我一些想法。因此，尽管这是一个旧线程，但我会发布一个真正有效的完整解决方案，因为我在网上找不到任何解决这个非常常见问题的东西。我的解决方案是在主干中，所以有一点上下文（主要是`this`参考）很容易被忽略：

```
deleteFromDb: function(keys, callback) {
    var _this = this,
        request = indexedDB.open(_this.LOCAL_DB, _this.DB_VERSION);

    request.onsuccess = function(event) {
        var db = event.target.result,
            tx = db.transaction([_this.URL_TABLE], "readwrite"),
            store = tx.objectStore(_this.URL_TABLE),
            recursiveDelete;

        recursiveDelete = function(_index) {
            var deleteRequest;

            // base case
            if (_index >= keys.length) {
                callback();
                return;
            }   
            deleteRequest = store.delete(keys[_index]);
            deleteRequest.onsuccess = function(event) {
                recursiveDelete(_index + 1); 
            }   
        }   
        recursiveDelete(0);
    }   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-10T19:04:33.190

1.  尝试删除多条记录时，请确保**事务保持活动状态**。关于这个马歇尔的回答是正确的。
2.  我在删除记录时遇到的另一个问题是，确定键是数字还是字符串。如果您使用了错误的**typeof key**，则该记录可能不会被删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T01:56:17.773

代码看起来不错，但是我将通过以下方式避免异步循环：

```
function deleteRecords (ids) {    
  var transaction = db.transaction("patient", "readwrite");
  var objectStore = transaction.objectStore("patient");
  var id = ids.shift();
  var request = objectStore.delete(id);
  request.onsuccess = function(evt) {
    console.log(id + " deleted");
    if (ids.length > 0) {
      id = ids.shift();
      objectStore.delete(id);
    }
  }
  request.onerror = function(evt) {
    console.log(id + " delete fail");
  }
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T21:11:38.953

我看不出代码有任何明显错误。一些建议：

1.  在 deleteRecord 中，为完成和中止事件的事务添加一个处理程序，看看哪个被触发：

    ```
    transaction.onabort = function(e) { console.log("abort"); };
    transaction.oncomplete = function(e) { console.log("complete"); }; 
    ```

2.  deleteRecord 缺少右括号，因此它可能不是您正在使用的实际代码。如果您还有其他问题，请考虑将代码的简化版本上传到 jsfiddle。

3.  你在哪些浏览器上试过这个？他们都表现出相同的行为吗？

编辑：`key`从哪里来`inputBttn.onclick`？您确定`massDelete`将正确的值传递给`deleteRecord`?

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-06T14:19:35.317

根据 MDN，对象存储在任何给定时间只能打开一个“读/写”事务。该循环将尝试在彼此之上打开多个“读/写”事务，这可能会导致失败。我假设 Chrome 中存在相同的限制。Kyaw Tun 的解决方案应该可以防止多个“读/写”事务，尽管您不需要继续重新打开事务。

[链接到 IDBTransaction MDN 参考](https://developer.mozilla.org/en-US/docs/Web/API/IDBTransaction)

# python - Numpy：计算矩阵的边缘

> ID：14004147
> 
> 赞同：2
> 
> 时间：2012-12-22T15:46:56.703
> 
> 标签：python, arrays, numpy

我有以下计算矩阵的差异，即第 i 个元素 - (i-1) 元素。

如何（轻松）计算每个元素的水平和垂直差异？用转置？

```
inputarr = np.arange(12)
inputarr.shape = (3,4)
inputarr+=1

#shift one position
newarr = list()
for x in inputarr:
    newarr.append(np.hstack((np.array([0]),x[:-1])))

z = np.array(newarr)    
print inputarr
print 'first differences'
print inputarr-z 
```

输出

```
[[ 1  2  3  4]
 [ 5  6  7  8]
 [ 9 10 11 12]]

first differences
[[1 1 1 1]
 [5 1 1 1]
 [9 1 1 1]] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T15:57:20.013

退房[`numpy.diff`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.diff.html)。

从文档中：

> 计算沿给定轴的 n 阶离散差。
> 
> 一阶差分`out[n] = a[n+1] - a[n]`沿给定轴给出，高阶差分通过递归使用 diff 计算。

一个例子：

```
>>> import numpy as np
>>> a = np.arange(12).reshape((3,4))
>>> a
array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11]])
>>> np.diff(a,axis = 1) # row-wise
array([[1, 1, 1],
       [1, 1, 1],
       [1, 1, 1]])
>>> np.diff(a, axis = 0) # column-wise
array([[4, 4, 4, 4],
       [4, 4, 4, 4]]) 
```

# windows-phone-7 - 是否有适用于 Windows Phone 应用程序的测试条件清单？

> ID：14004149
> 
> 赞同：0
> 
> 时间：2012-12-22T15:47:02.027
> 
> 标签：windows-phone-7, windows-phone, windows-phone-8

我已经构建了一个 Windows Phone 应用程序，并成功地将其放入商店。我做了一些改进并创建了一个 Windows Phone 8 版本并提交了更新。但是，它一直未能通过认证过程（现在 3 次）。我发现了 Windows Phone 7.x 版本的一个问题，并且能够修复它，但现在我收到一个错误，即我的应用程序无法运行并出现静默故障。

我已经尝试了所有我能想到的模拟器和设备，但我似乎无法让失败发生。如果微软能给你更多的信息，那就太好了。由于他们没有，我想知道是否有人列出了所有不同的条件、设备和步骤，以便在提交之前测试您的应用程序。

那么在将应用程序提交到商店之前，推荐的测试场景是什么？

（真正好的是看看微软在测试应用程序时使用了哪些步骤）

顺便说一句 - 我应该提到我在自己的测试中使用了[认证工具](https://stackoverflow.com/questions/13962397/is-there-any-certification-toolkit-for-wp8-apps)和[模拟仪表板。](http://blogs.windows.com/windows_phone/b/wpdev/archive/2012/12/19/simulation-dashboard-for-windows-phone-apps.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T23:59:30.307

用于 WP7/WP8 认证的大部分测试都是公开的，可以看作是 Windows Phone 认证指南的一部分：Windows Phone 的[应用提交要求、Windows Phone](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh184844%28v=vs.105%29.aspx)的[技术认证要求和 Windows Phone](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh184840%28v=vs.105%29.aspx)特定[应用类型的附加要求](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh184838%28v=vs.105%29.aspx)。查看标题为“**测试步骤**”的列。

关于您的具体问题的一些想法：

1.  你能分享你具体的失败报告NSTL测试结果pdf文件吗？
2.  确保您的第二次提交通过的一个好方法是简单地修复第一次提交的失败，并在“测试员说明”下说它与 XAP 完全相同，只是有一个小修复以及它是如何修复的。
3.  如果您无法重现测试人员遇到的问题，您可以随时重新提交并在“测试人员说明”下这样说，并在再次失败时询问更多详细信息。
4.  测试团队可能使用 256MB 设备 (Lumia 610) 进行 WP7 测试，使用 512MB 设备 (Lumia 620) 进行 WP8 测试。您是否在这些配置下在模拟器中测试了您的应用程序？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-02T06:03:04.933

我们最近在我们的两个应用程序上遇到了这个问题，另一个是我们只做了一些文本更改的应用程序。以前的版本通过并启动良好，而新版本则没有。我们的理由与科比所说的非常相似。

我们所做的是，在我们进行更改后，我们运行“市场应用程序的抢先解决方案 Dotfuscator”并上传 dotfuscated xap 文件。在我们的案例中，Dotfuscator 改变了我们自己的 DLL 文件的大小（我们有自己的自定义按钮控件，按钮上有两个标题行）。目前我不知道这样做的原因，但我觉得 Dotfuscator 在 dotfuscating 时以某种方式没有正确找到我们自己的 DLL（我们的 DLL 在我们项目的引用中））。

因此，一个原因可能是在 dotfuscating 时出现问题。出于这个原因，应该通过使用“应用程序部署工具”将其安装到手机上来测试 dotfuscated xap 文件。

通过将文件重命名为 yourapp.zip 然后解压缩，可以查看 yourapp.xap 文件中的文件，尤其是 DLL 文件。

塔帕尼

# command - 对 imap 获取请求使用多个参数

> ID：14004152
> 
> 赞同：0
> 
> 时间：2012-12-22T15:47:25.570
> 
> 标签：command, imap, fetch

我希望 imap 的命令语法从没有附件的消息中获取只是标题和文本正文。

我尝试了这个命令但不起作用：UID FETCH uid (BODY[HEADER] BODY[1])

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T05:38:44.453

存在用于获取邮件数据的原始提取命令

```
UID FETCH 2 (BODY[]<0.size>) 
```

例如，如果你想获取前 100 个字节的邮件，那么你可以触发一个命令

```
UID FETCH 2 (BODY[]<0.100>) 
```

但是您将不得不自己解析数据。

# html - 初学者：在 HTML 和 CSS 中创建存储桶

> ID：14004155
> 
> 赞同：1
> 
> 时间：2012-12-22T15:48:07.823
> 
> 标签：html, css, web

我正在尝试通过将标题图像放在底部图像的顶部来创建 HTML 和 CSS 中的存储桶。当我在 Dreamweaver 中执行此操作时，两个对象之间没有间隙。但是，当我将其上传到服务器时，两个图像之间会出现差距。有什么帮助或建议吗？

![在此处输入图像描述](../Images/b6e7844575332d14ebc7f55e9e8c3995.png)

```
 <div class="wrapBucketInnerLeft">
        <div class="bucketLeft">
            <h2 class="bucketHeader"><img src="images/bucket_header_text_basic.png" width="212" height="36" alt="Basic Plan" /></h2></td></tr>

            <div class="bucketDetails">
            <ul>
                <li>Feature 1</li>
                <li>Feature 2</li>
                <li>Feature 3</li>
                <li>Feature 4</li>
            </ul> 
            <div class="bucketBottom">               
            <p class="cost">$1.95</p>
            <a href="#"><img class="button" src="images/button_bucket.png" width="117" height="42" alt="Learn More" /></a></div>
        </div>
        </div>
         <!--Bucket 2-->

        <div class="bucketRight">
            <h2 class="bucketHeader"><img src="images/bucket_header_text_economy.png" width="212" height="36" alt="Basic Plan" /></h2>
            <div class="bucketDetails">
                <ul>
                    <li>Feature 1</li>
                    <li>Feature 2</li>
                    <li>Feature 3</li>
                    <li>Feature 4</li>
                </ul>                
                <div class="bucketBottom">               
                <p class="cost">$1.95</p>
                <a href="#"><img class="button" src="images/button_bucket.png" width="117" height="42" alt="Learn More" /></a></div>
        </div>
        </div>
        </div> 
```

CSS：

```
.bucketHeader {
background-image:url(images/bg_header_bucket.png);
background-repeat:no-repeat;
background-position:top center;
height:46px;
margin:0px 0px 0px 0px;
    padding:14px 0px 0px 18px;
}

.bucketDetails {
    background-image:url(images/bg_bucket.png);
    background-repeat:no-repeat;
    background-position:top center;
    height:278px;
    margin:0px 0px 0px 0px;
    padding:0px;
}

.bucketBottom p.cost {
    font-size:28px;
    font-weight:bold;
    color:#335191;
    margin:0px 0px 6px 0px;
    padding:0px;
}
.bucketBottom{
    text-align:center;

}
a img.button {
    border:none;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T15:55:17.857

well i know what is it! padding of `.bucketHeader`

```
.bucketHeader {
background-image:url(images/bg_header_bucket.png);
background-repeat:no-repeat;
background-position:top center;
height:46px; // here reduce the height of this div until the gap between them is removed, i think it should be 28px
margin:0px 0px 0px 0px;
padding:14px 0px 0px 18px; // here you see you have given padding of 14px of both top and bottom, this increases the height of div magically which you can't see because your image has background-repeat:no-repeat
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T15:58:34.650

Why are you using background-image? Do you see how the header and bottom images have like a pixel offset on the right side like this? Why don't you use div's with the images in them instead and don't put position:relative; top:0px to get the job done. You can put whatever text you want within a div with higher z-index ontop of the divs with the images and ofset top:-(whatever the height of the other div is)px or left:(whatever the width is)px?

Just a thought.

Cheers!

# c# - 我需要能够在不导致 SelectionChanged 事件的情况下输入 ComboBox

> ID：14004158
> 
> 赞同：3
> 
> 时间：2012-12-22T15:49:24.167
> 
> 标签：c#, wpf, combobox

我有一个作为配置文件列表的组合框。当用户单击下拉列表并选择配置文件时，它会加载基于该配置文件的设置。我希望用户能够修改设置，并将它们保存为自己的配置文件。为此，我希望他们通过在 ComboBox 中键入来命名他们的个人资料。问题是，在键入时，SelectionChanged 事件正在触发，导致加载任何具有相似名称的配置文件。我需要用户能够在组合框中输入内容，而无需选择其中一项。或者，我需要使在 SelectionChanged 事件上触发的代码仅在用户通过单击下拉框选择项目时触发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T16:36:44.653

您可以定义一个局部布尔变量 m_dontHandleSelection 并将其设置为 true，然后再更新后面代码中的组合。

这样你就可以在 SelectionChanged 处理程序中检查它并返回而不做任何事情，除了将布尔值设置为 false

# javascript - cakephp 函数，如 Javascript 中的 Set::combine

> ID：14004162
> 
> 赞同：2
> 
> 时间：2012-12-22T15:50:04.177
> 
> 标签：javascript, cakephp, set

是否已经有一些 javascript 函数与浏览器客户端的 cakephp 函数 Set::combine 和 Set::classicExtract 相同？ [http://book.cakephp.org/2.0/en/core-utility-libraries/set.html](http://book.cakephp.org/2.0/en/core-utility-libraries/set.html)

这样我就可以带上这个数组：

```
a = [
   {
        'User' : {
            'id' : 2,
            'group_id' : 1,
            'name' : 'Alfred'
         }
    },
    {
        'User' : {
            'id' : 12,
            'group_id' : 2,
            'name' : 'Albert'
         }
    }
] 
```

具有类似的功能

```
Set::combine(a, '{n}.User.id', '{n}.User.name') 
```

进入格式

```
a = {
  2 : 'Alfred',
  12 : 'Albert' 
} 
```

例如。但这不仅仅是这个简单的例子，我真的在寻找一个库或可以以类似于 cakephp 的方式完成它的东西。提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T07:40:04.123

我很想***看到***一个等效于 CakePHP 的 Hash 类的 JS，但遗憾的是，经过一个小时的谷歌搜索，我找不到任何东西...... Underscore.js 和 Sugar.js 都有一些过滤功能，但似乎都不适用于多维数组。

在蛋糕里我经常做这样的事情......

```
Hash::extract($users, '{n}.User.Posts.{n}.Comments.{n}[published=1]'); 
```

如果有人知道执行此操作的 JS 库，将非常感谢您的提示。

* * *

**编辑：从那以后，我发现了一些**允许对 JSON 数据进行这种查询的选项（以及它们使用的语法示例）。

*   [JMESPath](https://jmespath.org/)（可能是最成熟的选项）
    `automobiles[?maker == 'Honda' && year > 2009].model`

*   [JS路径](https://github.com/dfilatov/jspath)
    `.automobiles{.maker === "Honda" && .year > 2009}.model`

*   [json:select()](http://jsonselect.org/)（更多灵感来自 CSS 选择器）
    `.automobiles .maker:val("Honda") .model`

*   [JSONPath](http://goessner.net/articles/JsonPath/)（更多灵感来自 XPath）
    `$.automobiles[?(@.maker='Honda')].model`

JMESPath 是我的首选。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T16:10:23.747

不，Javascript 没有这样的内置功能。

要么你自己制作这些函数，要么使用像[Underscore.js](http://underscorejs.org/)这样的库，它提供了很多这样的实用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T16:17:17.797

这在纯 javascript 中相当容易：

```
result = {}
a.forEach(function(item) {
    result[item.User.id] = item.User.name;
}) 
```

我意识到这只是一个简单的例子，但关键是javascript支持回调和一流的函数，根本不需要像“{n}.User.name”这样的魔法。

# node.js - Node.js 破坏了我的输出

> ID：14004165
> 
> 赞同：0
> 
> 时间：2012-12-22T15:50:27.933
> 
> 标签：node.js

我基本上有一些东西，例如：

```
var escape = function ( x ) {
    if ( ! x ) return '\\N';
    return '"' + x.replace( /\r\n/g, '\n' ) + '"';
};

array.forEach( function ( item ) {
    process.stdout.write( 'foo:' + [ a, b, d ].map( escape ).join( '\t' ) + '\n' );
    item.child.forEach( function ( sub ) {
        process.stdout.write( 'bar:' + [ e, f, g ].map( escape ).join( '\t' ) + '\n' );
    } );
} ); 
```

但是，输出文件在明显随机的位置包含字符串，例如：

```
bar:\N        "1981258"       "Can't Get N^@^@^@^@^@^@^@^@^@^@Her Bones In Thefoo:"1981259" "164264"
bar:\N        ^@ Left"        \N      \N
bar:^@^@^@    \N 
```

这对我来说没有意义，因为程序不应该能够打印任何东西而不将其包装成双引号。

由于这条线，我认为这是一个 Node.js 错误，但我只想知道是否有解决方法。

```
b^@^@^@^@^@^@^@^@^@x 1 root root 1,5G 17 d\303\251c.  19:14 /D/Release.cs 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T16:07:43.423

您不必转义 crlf 序列。

```
$ node
> var crlf = '\n';
undefined
> process.stdout.write( 'foo:' + crlf + 'bar:');
foo:
bar:true
> process.stdout.write( 'foo:' + crlf + 'bar:' + crlf + '\\n' + 'foobar?');
foo:
bar:
\nfoobar?true
> 
```

（两行末尾的“true”是 REPL 中 process.stdout.write 的返回值）也就是说，您能否发布一个带有示例输入和更多代码的要点（我不知道什么 a，b , d, e, f, g,... 参考）。

此外，根据您的输入（并查看您的输出），使用缓冲区而不是原始字符串可能更有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T17:42:15.323

如果文件被写入（vmhgfs），这可能是与文件系统相关的问题。第二个生成的文件没有这个垃圾。

# javascript - 什么可能导致片段着色器中的纹理变黑？

> ID：14004166
> 
> 赞同：1
> 
> 时间：2012-12-22T15:50:29.910
> 
> 标签：javascript, glsl, textures, webgl

我一直在使用 WebGL，但似乎我无法再显示纹理了。片段着色器的输出始终为黑色（轮廓可见）。

我知道这个问题可能会出现在不是 2 次方的纹理上。不幸的是我的是（256x256）。此外，我确实让他们在某些时候工作过（但我改变太多以回溯问题）。

编辑：我已经大大简化了我的程序，并且按照 gman 的建议使用了 WebGL Inspector（顺便说一句很棒的提示）。WebGL Inspector 中的纹理看起来不错。当我注意到时，我正要发布整个代码

```
var textureUniformLocation = gl.getUniformLocation(shaderProgram, "uSampler");
console.log(textureUniformLocation);
gl.activeTexture(gl.TEXTURE0);
gl.bindTexture(gl.TEXTURE_2D, neheTexture);
gl.uniform1i(textureUniformLocation, 0); 
```

不行，加个`alert(textureUniformLocation);`after`console.log(...)`会让贴图出现……我现在想知道的是：我的显卡是不是吸毒了？

EDIT2：如果我也将一个简单的字符串放入警报中，它将起作用。

我能想到会发生这种情况的唯一原因是糟糕的内存管理或多个执行线程。他们都不是这里的情况。什么样的事情甚至可能在javascript中导致这样的问题？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T12:00:43.350

如果检查员看到纹理，那么......它们*可能*正在加载。Chrome 和 Firefox 中的行为是否一致？关于 alert() 的报告行为让我认为渲染可能发生在纹理加载之前，并且 alert() 导致刷新（在纹理加载之后）。

还要确保这不是顶点属性（如顶点颜色或退化的 UV 坐标）的问题。

# scala - 我应该将我的库发布到哪个版本的 scala？

> ID：14004168
> 
> 赞同：10
> 
> 时间：2012-12-22T15:50:45.993
> 
> 标签：scala, sbt, scala-2.10

当我为 scala 发布时`2.9.x`，我只是在 build.sbt 中有这一行：

```
crossScalaVersions := Seq("2.9.0", "2.9.0-1", "2.9.1", "2.9.1-1", "2.9.2") 
```

但是现在，scala`2.10`出来了，我很困惑。我的直觉是我应该有这样的东西：

```
crossScalaVersions := Seq("2.10.0") 
```

但我注意到，当我将 scala 版本设置为 时`2.10.0`，sbt 会搜索以`2.10`, not结尾的工件`2.10.0`。这里发生了什么？我应该使用什么版本？

**编辑：**另外，如果我这样做`publish-local`，工件也会以“_2.10”而不是“_2.10.0”为后缀。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-23T09:48:00.513

“ [Scala 2.10.0 staged”](https://groups.google.com/forum/#!msg/scala-internals/3R7xTJhcN0I/969mjmP_-9AJ)线程说

> 您确实可以简单地将版本与 2.10 交叉。

# linux - 什么是单元测试？以及如何为Linux C程序制作一个？

> ID：14004170
> 
> 赞同：3
> 
> 时间：2012-12-22T15:50:48.473
> 
> 标签：linux, testing

我经常听人们谈论单元测试。但我不知道它的确切外观，尤其是在 Linux C 代码中。我知道VisualStudio这种工具会提供一些模板吗？做单元测试，但是如何为Linux通用C代码制作一个。谁能给我举个例子？或者也许告诉我如何为 Linux C 代码做 TDD？这对我来说很神秘。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T15:54:11.537

单元测试是一种自动化测试，它测试单个功能单元。它在初始开发和确保更改不会破坏您的程序时特别有用，这在您重构时非常宝贵。你可以在这里阅读更多： [http ://en.wikipedia.org/wiki/Unit_testing](http://en.wikipedia.org/wiki/Unit_testing)

单元测试成为极限编程和测试驱动开发的大事。于是，大量的单元测试框架如雨后春笋般涌现。

这回答了你的第二个问题。要在 C 中进行单元测试，您需要该语言的单元测试框架。幸运的是，您可以使用多种可用的，因此您不必担心创建自己的： [http ://en.wikipedia.org/wiki/List_of_unit_testing_frameworks#C](http://en.wikipedia.org/wiki/List_of_unit_testing_frameworks#C)

如果你选择自己做，你需要找到一种方法来附加带有功能单元的测试，确保它们在你运行程序时都运行，并且有一种方法可以轻松地删除它们以进行部署。宏可能是关键。

# javascript - 在 optgroup 中选择一个选项

> ID：14004174
> 
> 赞同：0
> 
> 时间：2012-12-22T15:51:41.217
> 
> 标签：javascript

我正在尝试在包含 optgroup 的选择菜单中选择一个选项。我已经尝试过 `document.getElementsByName("dob_year")[0].selectedIndex = "1980";`，它似乎适用于不包含“optgroups”的选择菜单，它确实适用于它们。如何选择“1980”选项？

```
<select name="dob_year"> 
    <optgroup label="Morning"> 
        <option value="1980">80</option> 
        <option value="1981">81</option> 
        <option value="1982">82</option> 
        <option value="1983">83</option> 
    </optgroup> 
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T15:55:36.063

顾名思义， selectedIndex 是一个**index**。

所以你必须使用以下内容：

```
document.querySelector('select').selectedIndex = 2; 
```

工作jsfiddle：http: [//jsfiddle.net/vkSKy/](http://jsfiddle.net/vkSKy/)

# vb.net - 使用枚举或字符串表示对象类型的优缺点

> ID：14004178
> 
> 赞同：2
> 
> 时间：2012-12-22T15:52:03.563
> 
> 标签：vb.net, string, oop, object, enums

我在 vb.net 中有一个 winform 应用程序，并且正在开发一个石头剪刀布游戏。

我在一个地方使用枚举，在另一个地方使用字符串来表示某种武器类型，如下所示：

**枚举示例：**

```
 Imports RockPaperScissors.Weapon

    Public Class PlayerComputerRandom
    Inherits Player

    Private Enum weaponsList
        Rock
        Paper
        Scissors
    End Enum

    Public Overloads Sub pickWeapon()

        Dim randomChoice = New Random()
        Dim CompChoice As Integer = randomChoice.Next(0, [Enum].GetValues(GetType(weaponsList)).Length)

        If CompChoice = "0" Then
            pWeapon = New Rock()

        ElseIf CompChoice = "1" Then
            pWeapon = New Paper()

        Else
            pWeapon = New Scissors()

        End If

    End Sub

End Class 
```

**字符串示例：**

```
Public Class Player

    Public pWeapon As Weapon

    Public Sub pickWeapon(ByVal WeaponType As String)
        If WeaponType = "Rock" Then
            pWeapon = New Rock()

        ElseIf WeaponType = "Paper" Then
            pWeapon = New Paper()

        Else
            pWeapon = New Scissors()

        End If

    End Sub

End Class 
```

你能告诉我每种方法的优缺点吗？我是 OOP 和编码的新手，所以我只想知道这种方法的问题是什么，更好的方法是什么？

任何帮助将不胜感激。

非常感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T16:32:26.370

如果要使用字符串，至少应该使用常量。在任何地方都使用字符串文字只是一个坏主意，因为您很容易输入错误的内容。通过始终使用常量，至少可以避免该问题。其次，通过使用常量，如果需要的话，可以很容易地更改字符串值，或者在代码中找到使用常量的所有位置：

```
Global Const RockWeapon As String = "Rock"
Global Const PaperWeapon As String = "Paper"
Global Const ScissorsWeapon As String = "Scissors" 
```

但是，问题仍然存在，一点也不明显，在阅读代码时，所有可能的值是什么。这可以通过将所有字符串常量分组到一个类中来进一步缓解，这样它基本上就像一个枚举一样工作，如下所示：

```
Public Class Weapons
    Public Const RockWeapon As String = "Rock"
    Public Const PaperWeapon As String = "Paper"
    Public Const ScissorsWeapon As String = "Scissors"
End Class 
```

然后，您可以像这样使用常量：

```
Public Sub pickWeapon(ByVal WeaponType As String)
    If WeaponType = Weapons.Rock Then
        pWeapon = New Rock()
    ElseIf WeaponType = Weapons.Paper Then
        pWeapon = New Paper()
    Else
        pWeapon = New Scissors()
    End If
End Sub 
```

但是，代码仍然比它需要的更令人困惑，因为当您调用该`pickWeapon`方法时，它告诉您的只是您需要向它传递一个字符串。因此，为了清楚起见，您需要添加一条注释，说明您必须传递`Weapons`类中的一个常量。

如果可能的话，让代码自我记录总是更好的。当您要求枚举时，您会立即知道该方法期望的可能值，因此无需为该影响添加注释。

此外，由于您想在任何地方设置或比较值，您都想使用常量而不是文字，因此实际值是什么对其余代码没有影响。Rock 可以等于“Rock”、“ROCK”或“Hey Look, I'm a String!”。只要代码中的任何地方都使用该常量，它仍然可以工作。因此，如果是这种情况，那么与仅在枚举中使用整数值相比，使用字符串确实没有任何优势。

有时字符串常量确实更有意义。例如，如果您将值保存到数据库，并且数据库中的值作为人类可读的值更有用，则使用“Rock”而不是 0 可能是有意义的。但只要你不有任何情有可原的情况下您需要将其作为字符串，出于上述所有原因，我绝对建议您坚持使用枚举。

# jbox2d - Box2d：在图形上设置质量

> ID：14004179
> 
> 赞同：1
> 
> 时间：2012-12-22T15:52:06.223
> 
> 标签：jbox2d

目前，图形上的质量是使用形状的面积及其密度来设置的。如果我已经知道质量，我该如何设置？

我尝试使用具有一定质量的盒子形状创建夹具

```
 public FixtureDef  createfixture()
{
    PolygonShape ps = new PolygonShape();

    ps.setAsBox(w*12.5f, h*12.5f, new Vec2(attachx,attachy), (float) Math.toRadians(atrot));

    float area = (w*12.5f)*(h*12.5f);

    FixtureDef fd = new FixtureDef();
    fd.density=mass/area;
    fd.shape=ps;

    return fd;
} 
```

但是，当我调用 getmass() 时，身体的质量是不正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T06:51:13.133

setAsBox 的宽度和高度只是盒子尺寸的一半。也就是说，盒子是两倍的宽度和两倍的高度。因此，您需要将您的面积乘以 4.0。

# c# - 正则表达式匹配重复模式

> ID：14004180
> 
> 赞同：1
> 
> 时间：2012-12-22T15:52:09.070
> 
> 标签：c#, regex

我想使用正则表达式验证 C# TextBox 中的输入。预期的输入格式如下： `CCCCC-CCCCC-CCCCC-CCCCC-CCCCC-CCCCC-C`

所以我有六个元素，五个分隔字符，最后一个分隔字符。

现在我的正则表达式匹配 5 到 255 个字符之间的任何字符：`.{5,255}`

我需要如何修改它以匹配上述格式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T15:56:10.273

**更新： -**

如果要匹配任何字符，则可以使用：-

```
^(?:[a-zA-Z0-9]{5}-){6}[a-zA-Z0-9]$ 
```

**解释： -**

```
(?:                // Non-capturing group
    [a-zA-Z0-9]{5} // Match any character or digit of length 5
    -              // Followed by a `-`
){6}               // Match the pattern 6 times (ABCD4-) -> 6 times
[a-zA-Z0-9]        // At the end match any character or digit. 
```

* * *

**注意：-**下面的正则表达式只会匹配您发布的模式：-

```
CCCCC-CCCCC-CCCCC-CCCCC-CCCCC-CCCCC-C 
```

你可以试试这个正则表达式： -

```
^(?:([a-zA-Z0-9])\1{4}-){6}\1$ 
```

**解释： -**

```
(?:                // Non-capturing group
  (                // First capture group
    [a-zA-Z0-9]    // Match any character or digit, and capture in group 1
  )
  \1{4}            // Match the same character as in group 1 - 4 times
  -                // Followed by a `-`
){6}               // Match the pattern 6 times (CCCCC-) -> 6 times
\1                 // At the end match a single character. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T15:55:49.167

未经测试，但我认为这会起作用：

```
([A-Za-z0-9]{5}-){6}[A-Za-z0-9] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T15:56:30.557

对于您的示例，通常替换`C`为您想要的字符类：

```
^(C{5}-){6}C$

^([a-z]{5}-){6}[a-z]$        # Just letter, use case insensitive modifier 

^([a-z0-9]{5}-){6}[a-z0-9]$  # Letters and digits.. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T15:59:54.487

试试这个：

```
^(C{5}-){6}C$ 
```

`^`和分别表示字符串的`$`开头和结尾，并确保没有输入其他字符。

# jquery - jQuery UI + 大量按钮 = 慢？

> ID：14004181
> 
> 赞同：2
> 
> 时间：2012-12-22T15:52:20.200
> 
> 标签：jquery, jquery-ui

我目前遇到 jQuery UI 和许多按钮的问题。我有一个包含 500 条记录的列表，每条记录都有三个按钮。我正在尝试使用一些 jQuery UI 按钮微调结果集。

不幸的是，这完全阻塞了我的浏览器。Internet Explorer（当然）是其中最慢的。

在此链接上亲自查看（尽管是测试页面）：http: [//jesperveldhuizen.com/ui/test.php](http://jesperveldhuizen.com/ui/test.php)

有没有解决这个问题的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T16:34:03.807

jQuery UI 在鼠标悬停和鼠标移出元素时添加和删除 CSS 类名。这可能会影响性能，因此建议使用标准 CSS 选择器来创建悬停和活动事件。

像这样：

```
.css3button { background-color: blue; }
.css3button:hover { background-color: green; }
.css3button:active { background-color: red; } 
```

尽管如果您进行了足够的研究，您会发现 jQuery 通过添加/删除类名来实现，因此它可以 100% 跨浏览器。只要这种悬停，主动 CSS 选择器方法对您有效（并且适用于主要浏览器），您会没事的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T16:34:11.150

因此，要使其成为官方答案：

Javascript调用`$('button').button()`使它变慢。如果您只使用该调用来设置按钮样式，您也可以使用 CSS 来执行此操作。它看起来一样，性能会好得多。唯一的缺点是您不能使用[此处](http://docs.jquery.com/UI/API/1.8/Button)提到的方法，但您可以轻松克服，甚至可能不需要它们。

因此，总而言之，使用 CSS 会更好。

# java - 在我的 spring 3.2 测试中自动装配 webapplicationcotnext

> ID：14004183
> 
> 赞同：0
> 
> 时间：2012-12-22T15:52:55.233
> 
> 标签：java, spring, testing, web-applications

按照[此处](http://blog.springsource.org/2012/11/12/spring-framework-3-2-rc1-spring-mvc-test-framework/)的说明进行操作，但出现无法自动装配 WebApplicationContext 的错误。

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration("applicationContext-test.xml")
@WebAppConfiguration
public class AjaxTest {

@Autowired
private WebApplicationContext webApplicationContext; //FAILS 
```

但这编译：

```
@Autowired
ServletContext servletContext;

private WebApplicationContext webApplicationContext = WebApplicationContextUtils.getRequiredWebApplicationContext(servletContext); 
```

我不明白为什么。

**编辑** 它使用 maven 运行良好，这是我的编辑器 intellij 显示不正确的自动编译消息，[实际上是一个错误](http://youtrack.jetbrains.com/issue/IDEA-98019)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T15:56:44.990

Your test class should implement `ApplicationContextAware` interface:

```
public class ApplicationContextProvider implements ApplicationContextAware {
           private static ApplicationContext applicationContext = null;

            public static ApplicationContext getApplicationContext() {
                return applicationContext;
            }
            public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {
                 this.applicationContext = applicationContext;
            }
      } 
```

Spring will automatically inject the application context.

# javascript - 根据另一个数组的排序索引对数组进行排序

> ID：14004188
> 
> 赞同：1
> 
> 时间：2012-12-22T15:53:19.997
> 
> 标签：javascript

我有两个数组。我应该对一个（降序或升序）进行正常排序，并根据第一个数组的排序方式对另一个进行排序。这是因为第一个数组中的每个元素都与第二个数组上的相同索引元素有关系，我必须保持这种关系为真。例如：

```
sortThis=[3,1,2];
sortAccording=["With 3","With 1","With 2]; 
```

我找不到任何方法从 JavaScript 的`sort`函数中获取索引更改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T16:40:53.670

**解决方案：** 要实现这一点，您必须将两个数组**压缩为一个。**这是，假设你有这两个数组：

```
sortThis=[3,1,2];
sortAccording=["With 3","With 1","With 2]; 
```

**压缩**它们后，您将拥有以下数组：

```
zipped = [{a: 3, b: "With 3"}, {a: 1, b: "With 1"}, {a: 2, b: "With 2"}]; 
```

然后，您按**a**对其进行排序以获得：

```
zippedAndSorted = [{a: 1, b: "With 1"}, {a: 2, b: "With 2"}, {a: 3, b: "With 3"}]; 
```

**接下来是什么？**

好吧，一旦你按照你想要的排序了这个数组，你必须使用**map**函数提取它们的值，最后你将让你的两个数组按照相同的标准排序：

**编码：**

```
// your arrays
sortThis=[3,1,2];
sortAccording=["With 3","With 1","With 2"];

// the zip function    
function zip(a,b) {
    return a.map(function(aa, i){ return { i: aa, j: b[i]};} )
};               

// ziping and sorting the arrays
var zipped = zip(sortThis, sortAccording);
zippedAndSorted = zipped.sort(function(a,b){ return a.i - b.i; });

// your two sorted arrays
sortedThis = zippedAndSorted.map(function(a){ return a.i;});
sortedAccording = zippedAndSorted.map(function(a){ return a.j;}); 
```

你也可以看到它在这里工作：http: [//jsfiddle.net/lontivero/cfpcJ/](http://jsfiddle.net/lontivero/cfpcJ/)

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T16:06:03.927

例如：

```
function zip(a, b) {
    var i = 0, j = 0, r = [];
    while(i < a.length && j < b.length)
        r.push([a[i++], b[j++]]);
    return r;
}

function unzip(r) {
    var a = [], b = [];
    for(var i = 0; i < r.length; i++) {
        a.push(r[i][0]);
        b.push(r[i][1]);
    }
    return [a, b];
}

r = zip(sortAccording, sortThis);
r.sort();
r = unzip(r);

sortAccording = r[0]
sortThis = r[1] 
```

另一种方式：

```
result = sortAccording.
    map(function(elem, pos) { return [elem, pos]}).
    sort().
    map(function(elem) { return sortThis[elem[1]]}) 
```

更好的 zip 和 unzip 实现（都使用可变数量的参数）：

```
zip = function() {
    var args = [].slice.call(arguments, 0);
    return args[0].map(function(_, i) {
        return args.map(function(a) {
            return a[i]
        })
    })
}

unzip = function(a) {
    return a[0].map(function(_, i) {
        return a.reduce(function(y, e) {
            return y.concat(e[i])
        }, [])
    })
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T16:11:06.413

我有一个简单的解决方案。创建第三个索引数组。只需根据第一个数组的排序对该索引数组进行排序。

```
 var indexArray = [];
  for (var i=0; i < sortThis.length; i++) {
    indexArray[i] = i;
  }

  indexArray.sort(function(a, b) {
    return (sortThis[a] > sortThis[b]) ? 1 : (sortThis[a] === sortThis[b]) ? 0 : -1;
  });

  // Now you have the sorted index ready
  console.log("The first elements in the arrays are: " + sortThis(indexArray[0]) + " and " +  sortAccording(indexArray[0])); 
```

# binaryfiles - WinJS 中的文件到字节数组

> ID：14004190
> 
> 赞同：4
> 
> 时间：2012-12-22T15:53:37.547
> 
> 标签：binaryfiles, windows-store-apps, winjs

我正在用 JavaScript 修改一些 Windows Store 开发，我似乎被困在如何从二进制文件中获取字节数组上。我在网上找到了几个示例，但它们似乎都只读取文本，而我的文件是图像。我正在像这样打开文件：

```
Windows.Storage.FileIO.readBufferAsync(photos[currentIndex]).done(function (buffer) {

    var dataReader = Windows.Storage.Streams.DataReader.fromBuffer(buffer);
    var fileContent = dataReader.readString(buffer.length);
    dataReader.close();

    // do something with fileContent

}); 
```

文件在哪里`photos[currentIndex]`（从 加载`getFilesAsync()`）。当然，这种情况下的错误是`readString`二进制数据失败。它不能将“字符”映射到字符串中。我也试过这个：

```
Windows.Storage.FileIO.readBufferAsync(photos[currentIndex]).done(function (buffer) {

    var bytes = [];
    var dataReader = Windows.Storage.Streams.DataReader.fromBuffer(buffer);
    dataReader.readBytes(bytes);
    dataReader.close();

    // do something with bytes

}); 
```

但是`bytes`是空的，所以我认为我使用不正确。我想我只是在这里忽略了一些简单的事情，但由于某种原因，我似乎无法找到将二进制文件读入字节数组的正确方法。有人可以提供第二双眼睛来帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-22T16:06:07.670

发布问题后几乎立即想通了，但我想我会把答案留给后代......

我需要在第二个示例中以不同的方式声明数组：

```
Windows.Storage.FileIO.readBufferAsync(photos[currentIndex]).done(function (buffer) {

    var bytes = new Uint8Array(buffer.length);
    var dataReader = Windows.Storage.Streams.DataReader.fromBuffer(buffer);
    dataReader.readBytes(bytes);
    dataReader.close();

    // do something with bytes

}); 
```

我的 JavaScript 没有达到标准，所以我想我不明白数组声明应该如何工作。（当我在浏览器中执行 vanilla JavaScript 时，我总是像最初那样声明空数组并附加到它们。）但这可以解决问题。

# xaml - 如何在不绑定的情况下重用 XAML 代码块？

> ID：14004193
> 
> 赞同：0
> 
> 时间：2012-12-22T15:53:59.477
> 
> 标签：xaml, templates, custom-controls, windows-store-apps

我有这个 XAML 代码块：

```
 <StackPanel Orientation="Horizontal">
        <TextBlock Text="Hello " />
        <TextBlock Text="World" />
    </StackPanel> 
```

我想定义这个块（例如在**/Common/CustomStyles.xaml**中）以将它包含在不同的 XAML 页面上。它是如何工作的？

我不需要 DataTemplate 或类似的东西，因为文本是静态的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T16:28:25.333

您可以将它放在[用户控件](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.usercontrol.aspx)中并以这种方式重新使用它。如果它只是您感兴趣的文本，那么您可以使用[资源文件](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh965329.aspx)- 只要它具有正确的 uid，这将更新任何屏幕上的文本框。

# google-app-engine - 将 Dropbox Java API 与 Google App Engine 结合使用

> ID：14004195
> 
> 赞同：0
> 
> 时间：2012-12-22T15:54:04.703
> 
> 标签：google-app-engine, dropbox-api

我正在尝试在 GAE 中使用 Dropbox 的 java API 来覆盖 Dropbox 文件。

我正在使用 putFileOverwrite API 来覆盖文件内容，但是 api 会引发“访问被拒绝（java.lang.RuntimePermission modifyThreadGroup）”错误。我发现这是由于 GAE 中不允许多线程编程，所以我更新了 AbstractSession.java 中的代码，其中我将 IdleConnectionCloserThread 设为普通类而不是线程。

现在，当我尝试运行该函数时，我得到 java.net.Socket 异常。

any1 对如何使 Dropbox + GAE 设置正常工作有任何建议吗？

源代码：

```
 AccessType ACCESS_TYPE = AccessType.APP_FOLDER;
    AppKeyPair appKeys = new AppKeyPair(APP_KEY, APP_SECRET);
    AccessTokenPair accessTokenPair = new AccessTokenPair(ACCESS_TOKEN, ACCESS_KEY);
    WebAuthSession session = new WebAuthSession(appKeys, ACCESS_TYPE, accessTokenPair);

    DropboxAPI<WebAuthSession> dropboxApi = new DropboxAPI<WebAuthSession>(session);

    String fileContents = "Hello world";
    ByteArrayInputStream inputStream = new ByteArrayInputStream(fileContents.getBytes());
    try
    {
        dropboxApi.putFileOverwrite("/myFile.txt", inputStream, fileContents.length(), null);
    }
    catch(DropboxException e)
    {
    } 
```

使用保管箱的 jar AS-IS 后我得到的异常：

```
java.security.AccessControlException: access denied (java.lang.RuntimePermission modifyThreadGroup)
at java.security.AccessControlContext.checkPermission(AccessControlContext.java:374)
at java.security.AccessController.checkPermission(AccessController.java:549)
at java.lang.SecurityManager.checkPermission(SecurityManager.java:532)
at com.google.appengine.tools.development.DevAppServerFactory$CustomSecurityManager.checkPermission(DevAppServerFactory.java:289)
at com.google.appengine.tools.development.DevAppServerFactory$CustomSecurityManager.checkAccess(DevAppServerFactory.java:314)
at java.lang.ThreadGroup.checkAccess(ThreadGroup.java:299)
at java.lang.Thread.init(Thread.java:336)
at java.lang.Thread.<init>(Thread.java:422)
at com.dropbox.client2.session.AbstractSession$IdleConnectionCloserThread.<init>(AbstractSession.java:507)
at com.dropbox.client2.session.AbstractSession$IdleConnectionCloserThread.ensureRunning(AbstractSession.java:517)
at com.dropbox.client2.session.AbstractSession$DBClientConnManager.requestConnection(AbstractSession.java:494)
at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:383)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:641)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:576)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:554)
at com.dropbox.client2.RESTUtility.execute(RESTUtility.java:385)
at com.dropbox.client2.DropboxAPI$BasicUploadRequest.upload(DropboxAPI.java:1081)
at com.dropbox.client2.DropboxAPI.putFileOverwrite(DropboxAPI.java:1501)
at a.b.c.DropboxTestServlet.doGet(DropboxTestServlet.java:33)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
at com.google.appengine.api.socket.dev.DevSocketFilter.doFilter(DevSocketFilter.java:74)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.ResponseRewriterFilter.doFilter(ResponseRewriterFilter.java:123)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:34)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:61)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:383)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:326)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:547)
at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 
```

然后，如果我让 IdleConnectionCloserThread 不继承“线程”，我会得到以下异常：

```
java.net.SocketException: Permission denied: Not allowed to issue a socket connect: permission denied.
at com.google.appengine.api.socket.SocketApiHelper.translateError(SocketApiHelper.java:94)
at com.google.appengine.api.socket.SocketApiHelper.translateError(SocketApiHelper.java:105)
at com.google.appengine.api.socket.SocketApiHelper.makeSyncCall(SocketApiHelper.java:71)
at com.google.appengine.api.socket.AppEngineSocketImpl.connectSocket(AppEngineSocketImpl.java:399)
at com.google.appengine.api.socket.AppEngineSocketImpl.connectToAddress(AppEngineSocketImpl.java:346)
at com.google.appengine.api.socket.AppEngineSocketImpl.connect(AppEngineSocketImpl.java:335)
at java.net.Socket.connect(Socket.java:529)
at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:123)
at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:133)
at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:149)
at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:108)
at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:415)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:641)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:576)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:554)
at com.dropbox.client2.RESTUtility.execute(RESTUtility.java:385)
at com.dropbox.client2.DropboxAPI$BasicUploadRequest.upload(DropboxAPI.java:1081)
at com.dropbox.client2.DropboxAPI.putFileOverwrite(DropboxAPI.java:1501)
at a.b.c.DropboxTestServlet.doGet(DropboxTestServlet.java:33)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
at com.google.appengine.api.socket.dev.DevSocketFilter.doFilter(DevSocketFilter.java:74)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.ResponseRewriterFilter.doFilter(ResponseRewriterFilter.java:123)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:34)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:61)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:383)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:326)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:547)
at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-21T04:42:15.177

这在 Dropbox gae 的 Google 搜索中显示得非常高，因此对于那些偶然发现它的人：本文中的 java sdk 将与 GAE 一起使用，前提是您将 HttpsURLConnection 的使用替换为 HttpURLConnection。GAE 会自动处理 https。

# canvas - 在 safari 5.x 中将画布转换为 Blob

> ID：14004197
> 
> 赞同：0
> 
> 时间：2012-12-22T15:54:20.530
> 
> 标签：canvas, safari, blob

我正在使用以下插件转换`canvas`为`blob`.

[https://github.com/blueimp/JavaScript-Canvas-to-Blob](https://github.com/blueimp/JavaScript-Canvas-to-Blob)

`new Blob()`自从投掷以来，它似乎无法在 safari 上运行`message: "'[object BlobConstructor]' is not a function (evaluating 'Blob()')"`

有没有其他方法可以转换`canvas`为`blob`safari

# java - 使用 bukkit 转换 Java 中的自定义类型

> ID：14004200
> 
> 赞同：0
> 
> 时间：2012-12-22T15:54:37.517
> 
> 标签：java, type-conversion, bukkit, custom-type

如何将字符串转换为（自定义类型）附魔？以下代码警报“*类型不匹配：无法从字符串转换为附魔*”

```
String s = "DAMAGE_ALL.2";
String[] enchantINFO = s.split(".");

Enchantment enchantTYPE = enchantINFO[0]; //TODO Type mismatch: cannot convert from String to Enchantment
int enchantLVL = enchantINFO[1];

player.getItemInHand().addEnchantment( enchantTYPE , enchantLVL ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T15:57:36.360

You are trying to fit a `String` object into an `Enchantment` object. Unfortunately, a `String` is not an `Enchantment`.

I'm not intimately familiar with the Bukkit API, however you will need to use one of the `Enchantment` constructors. I would recommend you become more familiar with the Java programming language basics before writing your own mods and plugins, though, as a general rule.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T16:08:43.403

知道了：

```
Enchantment enchantTYPE = Enchantment.getByName(enchantINFO[0]); 
```

# bash - Bash 运动风格...？

> ID：14004201
> 
> 赞同：0
> 
> 时间：2012-12-22T15:54:41.460
> 
> 标签：bash

我有一个练习，我必须打印当前目录中的所有文件，这些文件以字母开头`[a-z]`，或者以任意数量的结尾：`[1/3/5/7/9]`

因为我认为它必须是 globstyle ......并且代码是：

```
ls a[-z]* || *[13579] 
```

但由于某种原因，这不起作用。也许我应该使用扩展正则表达式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T15:57:00.100

The arguments to your ls command are not regular expressions at all but shell globs. And shell globs are interpreted by the shell *before* the command is executed. You can do:

```
ls [a-z]* *[13579] 
```

Note that this may contain duplicated (file `a1` will be listed twice) so you can do:

```
ls [a-z]* *[13579] | sort | uniq 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T16:32:04.357

尝试这样做：

```
printf '%s\n' [0-9]* *[a-z] 
```

仅使用`globs`

见[http://mywiki.wooledge.org/glob](http://mywiki.wooledge.org/glob)

# c - 为什么这个程序给我一个“分段错误”？

> ID：14004202
> 
> 赞同：0
> 
> 时间：2012-12-22T15:54:45.050
> 
> 标签：c, segmentation-fault

所以我的兄弟正在制作一个程序，将字符串中的所有单词都转换为标签，但由于某种原因，它总是在执行结束时给出“分段错误”错误。我试图找到可能导致它的原因，但没有找到。这是代码：

```
#include <stdio.h>
#include <string.h>

char* setHashtag(char text[10000])
{
    int i, j;

    printf("Initial text = %s\n", text);

    for (i = 9998; i >= 0; i--)
    {
        text[i+1] = text[i];
    }
    text[0] = ' ';

    for (i = 0; text[i+1] != '\0'; i++)
    {
        if(text[i] == ' ' && text[i+1] != ' ')
        {
            for (j = 9998; j > i; j--)
            {
                text[j+1] = text[j];
            }
            text[i+1] = '#';

            printf("Partial text = %s\n", text);
        }
    }

    return text;
}

void execute() {
    char text[5000], textFinal[10000];

    gets(text);

    strcpy(textFinal, setHashtag(text));
    printf("%s\n", textFinal);
}

int main()
{
    execute();
    printf("Back to main\n");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-22T15:56:15.033

您将一个大小数组传递`5000`给您的函数，但您可以访问其中的`10000`元素。当然，它会崩溃。

函数声明中指定的数组大小无关紧要。它被编译器忽略。这

```
char* setHashtag(char text[10000]) 
```

相当于这个

```
char* setHashtag(char *text) 
```

即函数接收指向原始参数数组开头的指针，而不是参数数组的新本地副本（C 中的裸数组不可复制）。

这意味着当您将函数调用为

```
char text[5000];
...
setHashtag(text) 
```

`text`数组不会神奇地变成数组`char [10000]`。`char [5000]`正如最初声明的那样，它仍然是一个数组。尝试`text[9998]`在函数内部访问等会导致未定义的行为。

由于您的`setHashtag`函数需要一个固定大小的 size 数组`10000`，因此将函数声明为

```
char* setHashtag(char (*text)[10000]) 
```

并将数组参数作为`setHashing(&text)`. 这将确保您将无法传递错误大小的数组。在函数内部，您必须以`(*text)[i]`.

# cordova - PhoneGap - 不断发送/获取车队的位置 - 最佳方法？

> ID：14004210
> 
> 赞同：1
> 
> 时间：2012-12-22T15:55:42.040
> 
> 标签：cordova, gps, location

我必须开发一个出租车应用程序。

计划/需求是这样的：
    司机的设备：
*- 当位置发生变化时将位置发送到服务器（频率取决于司机的状态 - 忙碌、可用等。 - 我对可用司机的准确位置更感兴趣，而不是忙碌的一个，但这不是很重要..）*    请求者的设备：
*- 尽可能更新地图上所有司机的位置（最有可能是谷歌）* 

我担心的是：***性能***、***净流量***和***电池经济性***。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T17:59:17.790

你需要解决这个问题，你是为少数司机还是为大量司机创建这个应用程序。

*   这就是选择合适的js框架很重要的方式。当然，Phonegap 将是一个包装器。实时 java 脚本客户端/服务器通信架构的顶级组合是 Node.js 和 SOCKET.IO 框架。不幸的是，它们仅在干净的混合应用程序中有用（应用程序构建时没有一些 js 移动应用程序框架，如 jQuery Mobile、jQMoby ....）。

如果您要使用 js 移动应用程序框架，则需要将其与骨干 js 框架结合使用。不如 node.js 和套接字 IO 好，但仍然是一个很好的组合。Node.js 和 socket IO 不能很好地与其他 js 移动应用程序框架配合使用。

*   使用 phonegap 地理定位 API 获取汽车的 lat 和 lng 位置。与运动 GPS 应用程序不同，您不需要每秒刷新一次。汽车正在通过预定义的路线，因此 30 秒的刷新时间就足够了。

*   不要将 30 秒间隔与实时时间（11:00:00、11:00:30、11:01:00 ...）联系起来，因为每个设备都会尝试同时发送位置刷新，并且将杀死服务器基础架构。最好在应用程序初始化后每 30 秒计时一次。

*   司机的设备应用程序可以是一个小应用程序。它将作为后台进程工作。因为数据将每 30 秒发送一次，净流量和电池寿命是一个真正的问题。

*   请求者设备将在每个预定义的时间获取大量数据（围绕请求者设备的某个半径范围内的每辆可能的汽车）。在服务器可以发送批量数据之前，请求者必须发送其位置。它将用于获取最近的汽车。

*   Google Maps mobile API v3 将用作请求者设备上的地图。因为这是一个移动设备，而移动框架并不知道它们的出色性能，所以不要使用它来显示超过 100 辆汽车（在桌面 Web 应用程序的情况下最多只有几百辆）。

*   我最后的建议是，如果可能的话，创建一个原生移动应用程序，因为混合移动应用程序不擅长处理实时数据。至少没有大量的数据。坚持更长的过渡间隔，它将节省您的电池。并且不要考虑使用 XML 作为客户端/服务器数据。它有很大的数据开销。

[节点.js](http://nodejs.org/)

[套接字.IO](http://socket.io/)

# google-maps - 服务帐号下访问谷歌驱动融合表数据

> ID：14004212
> 
> 赞同：0
> 
> 时间：2012-12-22T15:55:48.543
> 
> 标签：google-maps, google-drive-api, google-fusion-tables

当我尝试使用组在我的服务中插入对融合表的权限时，它工作正常，但我不能在我使用融合层 API 的地图应用程序中访问同一个表

```
insertPermission(drive, tableid, "XXXXXXXXX@developer.gserviceaccount.com","group", "writer"); 
```

但是，当我尝试使用相同的代码向任何人插入权限时，我得到的响应是 500（内部服务器错误）

```
insertPermission(drive, tableid, "XXXXXXXXX@developer.gserviceaccount.com","anyone", "writer"); 
```

我的主要目标是在我的地图应用程序的服务帐户中使用融合表中的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T03:17:23.310

您不能对任何人拥有访问权限。我尝试使用 **insertPermission(drive, tableid, "XXXXXXXXX@developer.gserviceaccount.com","anyone", "reader");** 它对我来说很好，我也可以在地图中填充它。

# c++ - Plugin/module communication method in multi-threaded C++ app

> ID：14004213
> 
> 赞同：0
> 
> 时间：2012-12-22T15:55:55.350
> 
> 标签：c++, multithreading

I am designing a C++ app which consists of largely independent plugins or modules which produce from time to time results useful for other plugins. For example, analysis module comes across some useful piece of data and sends it to action modules. Each module will run in its own thread; this is so analysis modules can continue gathering data while action modules handle the data at the rate they can.

I am looking for a suitable message passing architecture/design pattern. [This stackoverflow thread](https://stackoverflow.com/questions/1755670/architecture-for-extension-plugin-communication) gives some suggestions, but I'm not sure a plain interface will work in multi-threaded environment.

I was thinking of having some sort of channel based architecture, where each module broadcasts something on the channel and whichever module is interested in it - listens to. If there are some ready made libraries under liberal licence - the better.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T16:16:31.087

我一直在使用 ACE（自适应通信环境）进行线程管理、TCP/UDP 通信、互斥关系和编程。

ACE 是一个高度可移植的平台核心模式调用集合。最重要的是，它是免费的、开源的，并且目前正在积极开发中。

[http://www.cs.wustl.edu/~schmidt/ACE.html](http://www.cs.wustl.edu/~schmidt/ACE.html)

对于您的应用程序，我建议专门查看“ACE_Task_Base”类以提供多线程，以及“ACE_Reactor”类为您的异步回调架构注册所有处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T16:03:11.257

您可能有兴趣查看也类似于并发框架的[ZeroMQ库。](http://www.zeromq.org/)使用这个库，您的组件将通过向命名的 ZeroMQ 套接字发送消息来相互通信。有许多套接字类型（TCP、IPC、inproc）和几种可用于请求-回复和发布-订阅消息传递的模式。

# javascript - Placeholder while an image is loading with Ember.js

> ID：14004216
> 
> 赞同：1
> 
> 时间：2012-12-22T15:56:10.010
> 
> 标签：javascript, image, ember.js

> **Possible Duplicate:**
> [How to show a spinner while loading an image via JavaScript](https://stackoverflow.com/questions/51352/how-to-show-a-spinner-while-loading-an-image-via-javascript)

I'm displaying a list of Articles, where each article has an image. It looks something like this

![mockup](../Images/5a398e7dceb2dfdcbd449fd96b2cc692.png)

The issue is that the view renders before the images are downloaded and it displays an empty box before the image is loaded.

Is there a good way that I could display some kind of a placeholder while the image is being loaded, and then just swap it once the image loads?

# sharepoint - Option missing for content type: 'BI Semantic Model Connection' in SP2013

> ID：14004228
> 
> 赞同：1
> 
> 时间：2012-12-22T15:57:07.123
> 
> 标签：sharepoint, sql-server-2012, business-intelligence, sharepoint-2013

I am trying to add a new content type : BI Semantic Model Connection. But I don’t see it in the list of Available Site Content Types.

![Screenshot shows the missing option for BI Semantic Model Content type](../Images/790ed70d7075fb2a5421bef453ccaea5.png)

What is required to enable BISM Connection content type? Do I need to install any binary?

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-19T04:38:32.390

您可能需要在管理中心为网站集激活 Power Pivot 功能集成。

[https://msdn.microsoft.com/en-us/library/hh230813.aspx](https://msdn.microsoft.com/en-us/library/hh230813.aspx)

[https://msdn.microsoft.com/en-us/library/ee637271.aspx](https://msdn.microsoft.com/en-us/library/ee637271.aspx)

# ruby-on-rails - Validation of fields from some box on the view - Rails

> ID：14004234
> 
> 赞同：0
> 
> 时间：2012-12-22T15:57:32.200
> 
> 标签：ruby-on-rails, ruby, validation

I have an User model. It has next fields:

```
attr_accessible :user_name, :first_name, :last_name, :email .... 
```

There is a profile view for the User with 6 blocks. Each of them associated with the various fields. Box 1 - **first_name** and **last_name**, Box 2 - **user_name** and **email**, etc.

I need to validate all the fields (presence, format, etc). But validators must trigger only for those fields, that has came from a particular block (Box 1 or Box 2, for example).

If I write something like next:

```
validates :user_name, :presence => true 
```

and I will not edit the block with the *user_name*, I will see the error "user Name can't be blank". I can't use *:allow_blank => true* or nil because it can't(!) be blank!

In two words: I must validate only those fields, that was past from the resquest.

What I can do to solve my problem? Thx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T16:04:10.197

您可以添加`if`或`unless`选择跳过特定条件。

```
validates :user_name, :presence => true, :if => "first_name.blank? and last_name.blank?" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T16:30:34.400

您可以从模型中提取特定字段并为每个块创建一个模型，然后将 one_to_one 关系添加到您的用户模型。

# python - python (matplotlib) __NSAutoreleaseNoPool error ... - just leaking

> ID：14004243
> 
> 赞同：2
> 
> 时间：2012-12-22T15:59:01.047
> 
> 标签：python, macos, matplotlib

[I originally posted this in serverfault, but was advised there to post it here instead.]

Matplotlib is a python library for data visualization. When I attempt to display a graph on the screen, I get the following error/warnings:

```
2012-12-21 16:40:05.532 python[9705:903] *** __NSAutoreleaseNoPool(): Object 0x103e25d80 of class NSCFArray autoreleased with no pool in place - just leaking
2012-12-21 16:40:05.534 python[9705:903] *** __NSAutoreleaseNoPool(): Object 0x103e26820 of class __NSFastEnumerationEnumerator autoreleased with no pool in place - just leaking
2012-12-21 16:40:05.535 python[9705:903] *** __NSAutoreleaseNoPool(): Object 0x103e9f080 of class NSObject autoreleased with no pool in place - just leaking 
```

FWIW, one way to produce these results is shown below; all the steps shown (including the call to ipython) are taken from a matplotlib tutorial:

```
% ipython
...
In [1]: import matplotlib.pyplot as plt

In [2]: plt.plot([1, 3, 2, 4])
Out[3]: [<matplotlib.lines.Line2D at 0x106aabd90>]

In [3]: plt.show() 
```

ALso, FWIW, I've observed *exactly the same behavior* with multiple styles of installation (on the same machine) of python+numpy+matplotlib+ipython, including installs that use the system-supplied python, those that use the python installed by `homebrew`, or those that use a python installed directly from source into a location off my home directory.

Any ideas of what may be going on, or what I could do about it?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T22:23:48.393

我遇到了同样的问题，我找到的一种解决方案是添加以下行：

```
plt.ion() 
```

在第一个绘图命令之前。这将打开交互式绘图模式并且错误消息消失。这仅在命令行上绘图时对我有用，如果我在脚本中执行 ion() 然后 show() 绘图根本不会显示，如果我将 ion() 排除在外，我可以看到我的情节，但我收到错误消息。自从更新到版本 1.2.0 后才发生这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T22:25:25.057

它试图用 Cocoa 做一些事情，但 Cocoa 并没有真正被初始化或任何东西。您可以通过在此之前运行此命令来消除错误并解决问题：

```
from Foundation import NSAutoreleasePool
pool = NSAutoreleasePool() 
```

而这之后：

```
from AppKit import NSApplication
NSApplication.sharedApplication().run() 
```

这需要 PyObjC。不幸的是，这可能只允许在每个 IPython 会话中显示一个图。您可能希望改用 IPython 笔记本，它消除了对 Cocoa 的依赖。

# javascript - 在 Meteor JS 应用程序中访问用户电子邮件地址

> ID：14004245
> 
> 赞同：17
> 
> 时间：2012-12-22T15:59:06.867
> 
> 标签：javascript, json, meteor

我正在使用 Meteor 构建一个应用程序，并且需要访问已登录用户的存储电子邮件地址。

我目前正在使用：

```
var userObj = Meteor.user();
console.log(userObj); 
```

访问用户。但是，我只能访问 id。电子邮件地址存储在一个嵌套对象中，如下所示：

```
[Object {address="address@gmail.com", verified=false}] 
```

我尝试了各种方法来遍历 JSON 对象，但无法弄清楚如何访问我需要的值。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-22T17:35:08.997

`Meteor.user().emails[0].address`为我工作。

这是文档所说的：

> 默认情况下，服务器会发布用户名、电子邮件和个人资料。有关用户文档中使用的字段的更多信息，请参阅 [Meteor.users](http://docs.meteor.com/#meteor_users)。

示例用户文档：

```
{
  _id: "bbca5d6a-2156-41c4-89da-0329e8c99a4f",  // Meteor.userId()
  username: "cool_kid_13", // unique name
  emails: [
    // each email address can only belong to one user.
    { address: "cool@example.com", verified: true },
    { address: "another@different.com", verified: false }
  ],
  createdAt: 1349761684042,
  profile: {
    // The profile is writable by the user by default.
    name: "Joe Schmoe"
  },
  services: {
    facebook: {
      id: "709050", // facebook id
      accessToken: "AAACCgdX7G2...AbV9AZDZD"
    },
    resume: {
      loginTokens: [
        { token: "97e8c205-c7e4-47c9-9bea-8e2ccc0694cd",
          when: 1349761684048 }
      ]
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-23T03:34:36.863

您没有指定如何对用户进行身份验证。例如，如果您仅使用 Google 身份验证，则电子邮件地址只能在

```
Meteor.user().services.google.email 
```

所以，这取决于。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-02-24T00:05:35.300

试试这个：

Meteor.user().emails[0].address

问候，

# c# - 确定三个字段之一是否具有任何关键字列表

> ID：14004252
> 
> 赞同：2
> 
> 时间：2012-12-22T15:59:41.397
> 
> 标签：c#, string, list, contains

假设我们有一个模型

```
public Foo 
{
    string Something {get;set;}
    string SomethingElse {get;set;}
    string AnotherThing {get;set;}
} 
```

确定这些字段中的任何一个是否包含来自 a 的任何字符串的最简洁方法是什么`List`？

```
var foo = new Foo 
{
    Something = "If Liverpool don't beat Fulham this evening I will cry",
    SomethingElse = "I hope I have that TekPub membership for Xmas",
    AnotherThing = "I wish NCrunch was a bit cheaper"
};

var keywords = new List<string> { "Liverpool", "glosrob", "stackoverflow" }; 
```

会继续`foo.Something`包含“利物浦”这个词。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T16:12:36.217

```
var entriesSet = new HashSet<string>(foo.Something.Split());
entriesSet.UnionWith(foo.SomethingElse.Split());
entriesSet.UnionWith(foo.AnotherThing.Split());

if (entriesSet.Overlaps(keywords)) {
    ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T16:12:30.413

就像是

```
new[] { foo.Something, foo.SomethingElse, foo.AnotherThing }.Any(s => keywords.Any(w => s.Contains(w))) 
```

# javascript - 每 15 秒读取一个文本文件的内容

> ID：14004256
> 
> 赞同：8
> 
> 时间：2012-12-22T16:00:06.980
> 
> 标签：javascript, jquery, setinterval, partial-page-refresh

我在一个音乐网站上工作：我在服务器上有一个文本文件，其中包含当前播放歌曲的名称。我想每十五秒阅读一次文本文件，并更改我网站上显示的文本，而无需刷新。

现在，使用一点 jQuery 和 javascript，我实际上已经达到了第一次读取和显示文件的地步，但它不会刷新。我尝试了各种 setInterval 函数，但在我的一生中，我无法让这部分工作。任何帮助将不胜感激。

这是我所拥有的：

```
<script type="text/javascript"> 
$(document).ready(function() {
    jQuery.get('http://www.XXXXX.com/nowplaying/NowPlaying.txt', function(data) {
        var myvar = data;
        var parts = myvar.split(/\n/);
        var songtitle = parts[0];
        var songartist = parts[1];
        var songalbum = parts[2];
        var songtime = parts[3];
        $('#songtitleholder').html(songtitle);
        $('#songartistholder').html(songartist);
        $('#songalbumholder').html(songalbum);
    });
});​
</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-22T16:03:53.363

您可以将要执行的代码`repeatedly`放在函数中，并将该函数传递给[`setTimeout`](http://www.w3schools.com/jsref/met_win_settimeout.asp). setTimeout 的第二个参数将在`millisecond`.

在此处使用 setTimeout IMO 更多`appropriate`，因为它将排除发送请求和接收响应所花费的时间。它会`send request every 5 second after receiving response.`

```
<script type="text/javascript"> 

 $(document).ready(function() {

    function functionToLoadFile(){
      jQuery.get('http://www.XXXXX.com/nowplaying/NowPlaying.txt', function(data) {
       var myvar = data;
       var parts = myvar.split(/\n/);
       var songtitle = parts[0];
       var songartist = parts[1];
       var songalbum = parts[2];
       var songtime = parts[3];

       $('#songtitleholder').html(songtitle);
       $('#songartistholder').html(songartist);
       $('#songalbumholder').html(songalbum);
       setTimeout(functionToLoadFile, 5000);
    });
    }

    setTimeout(functionToLoadFile, 10);
});

</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-22T16:03:46.140

您应该能够将示例包装在 setInterval 调用中，如下所示：

```
$(document).ready(function() {
    setInterval( function(){
    jQuery.get('http://www.XXXXX.com/nowplaying/NowPlaying.txt', function(data) {
        var myvar = data;
        var parts = myvar.split(/\n/);
        var songtitle = parts[0];
        var songartist = parts[1];
        var songalbum = parts[2];
        var songtime = parts[3];
        $('#songtitleholder').html(songtitle);
        $('#songartistholder').html(songartist);
        $('#songalbumholder').html(songalbum);
    });
    }, 15000);
});​ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-22T16:04:04.843

创建一个函数并调用它`setInterval`（*您可能希望在 URL 中添加一个时间戳，以便结果不会缓存*）

```
$(document).ready(function() {
    function refresh(){
        jQuery.get('http://www.XXXXX.com/nowplaying/NowPlaying.txt', { "t": $.now() }, function(data) {
            var myvar = data,
                parts = myvar.split(/\n/),
                songtitle = parts[0],
                songartist = parts[1],
                songalbum = parts[2],
                songtime = parts[3];

            $('#songtitleholder').html(songtitle);
            $('#songartistholder').html(songartist);
            $('#songalbumholder').html(songalbum);
        });
    }
    setInterval(refresh, 15000);
});​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-22T16:07:44.003

解决方案使用`setTimeout`. `setInterval`当窗口在切换浏览器选项卡时失去焦点时，往往会排队。

```
$(document).ready(function() {
    getData();
});​

function getData() {
    setTimeout(function() {
        jQuery.get('http://www.XXXXX.com/nowplaying/NowPlaying.txt', function(data) {
            var myvar = data;
            var parts = myvar.split(/\n/);
            var songtitle = parts[0];
            var songartist = parts[1];
            var songalbum = parts[2];
            var songtime = parts[3];
            $('#songtitleholder').html(songtitle);
            $('#songartistholder').html(songartist);
            $('#songalbumholder').html(songalbum);

            /* repeat getData*/
            getData();
        });
    }, 15000)

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-22T16:04:13.397

为什么不试试这个？

```
 window.setInterval(function(){

    /// call your function here

    }, 15000); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-22T16:05:09.087

除了`setInterval`按照其他人的答案使用之外，请确保文件没有通过请求被缓存：

```
jQuery.get("http://......./NowPlaying.txt?t="+new Date().getTime(), function....); 
```

# asp.net - 如何阻止访问目录列表和 asp.net 中的某些页面？

> ID：14004258
> 
> 赞同：0
> 
> 时间：2012-12-22T16:00:29.290
> 
> 标签：asp.net, web-config

由于缺乏经验，我在如何配置 web.config 时遇到了几个问题。

我想将一个页面 login.aspx 设置为我的默认页面。如果用户成功登录，他将被重定向到受保护文件夹 /Protect/Edit.aspx 中的页面。所有用户仍然可以访问名为 Show.aspx 的根文件夹中的页面，如果他们尝试单击或写入 Edit.aspx 的路径，将被重定向到 login.aspx，我不确定如何执行此操作。

我的另一个问题是，如果我只写 localhost 它会显示目录列表，我想避免这种情况，但是设置

仍然给我目录列表。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T20:23:45.717

1.  您需要为您的应用程序实施表单身份验证。这是一个[教程](http://support.microsoft.com/kb/301240)
2.  好像您没有 default.aspx 页面，所以 IIS 找不到要首先加载的任何文档。您可以将 IIS 配置为使用 Show.aspx 作为默认页面，或者只添加默认的 .aspx。

# perl - 如何使用 Perl 列出所有没有后缀的文件？

> ID：14004261
> 
> 赞同：0
> 
> 时间：2012-12-22T16:00:52.577
> 
> 标签：perl, file-io

我想在内容混合的目录中为所有没有后缀的文件添加后缀。

1.  我只想获取没有后缀的文件
2.  然后我想给它们添加一个后缀（比如，说，`.txt`或`.html`）

这是我遇到麻烦的第一部分。

我`glob`用来获取所有文件。这是代码摘录：

```
 my @files = grep ( -f, <*> ); 
```

`-f`确保只添加文件，`*`通配符允许所有名称。

但是我如何重写它以只获取没有后缀的文件？或者至少，我如何清洗后缀文件的数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T16:06:20.400

您可以添加另一个 grep 语句：

```
my @files = grep !/\.\w{1,4}$/, grep -f, <*>;
#           ------------------- 
```

或者，正如 Borodin 指出的那样，您可以一次性完成：

```
my @files = grep !/\.\w{1,4}$/ && -f, <*>; 
```

您可以根据您拥有的后缀类型更改正则表达式以更好地适应。正则表达式查找与句点不匹配的文件，其后跟 1 到 4 个字母数字字符，位于字符串的末尾。我选择了一个相当松散的正则表达式来匹配大量可能的后缀。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T16:46:51.760

没有后缀的文件就是名称中没有点的文件。

```
my @files = grep { -f and not /\./ } <*>; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T16:07:40.633

使用`grep`，您只需要添加一个正则表达式：

```
my @files = grep { !/\.\w+\z/ && -f } ( <*> ); 
```

# java - 切换 JPanel 后 Java KeyListener 没有响应

> ID：14004263
> 
> 赞同：0
> 
> 时间：2012-12-22T16:01:02.487
> 
> 标签：java, swing, timer, jpanel, keylistener

当我在 JPanel 之间切换时，我遇到了 KeyListener 没有响应（由于没有获得焦点）的问题。

我已经谷歌了这个并且知道要解决这个问题我需要使用 KeyBindings，但我不喜欢 KeyBindings。所以我想知道，还有其他方法吗？

这是具有无响应 KeyListener 的 JPanel 的初始化代码：

```
 public void init()
{
    setFocusable(true);
    requestFocusInWindow();
    requestFocus();
    addMouseListener(new MouseInput());
    addMouseMotionListener(new MouseInput());
    addMouseWheelListener(new MouseInput());
    addKeyListener(new KeyInput(p));

    t = new Timer(10, this);
    t.start();
} 
```

如果需要，请随时索取更多代码示例！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-22T18:05:07.017

hacky 的解决方案是调用`requestFocusInWindow()`以`JPanel`确保它具有焦点`KeyListener`/`KeyAdapter`这应该只在添加 Componnet 之后调用（尽管为了确保我的组件具有焦点，我在`JFrame`通过`revalidate()`and刷新之后调用它`repaint()`）例如：

```
public class MyUI {

    //will switch to the gamepanel by removing all components from the frame and adding GamePanel
    public void switchToGamePanel() {
        frame.getContentPane().removeAll();

        GamePanel gp = new GamePanel();//keylistener/keyadapter was added to Jpanel here

        frame.add(gp);//add component. we could call requestFocusInWindow() after this but to be 98%  sure it works lets call after refreshing JFrame

        //refresh JFrame
        frame.pack();
        frame.revalidate();
        frame.repaint();

        gp.requestFocusInWindow();
    }

}
class GamePanel extends JPanel { 

      public GamePanel() {
          //initiate Jpanel and Keylistener/adapter
      }

} 
```

但是，您应该使用 Swing `KeyBinding`s（+1 到 @Reimeus 评论）。

在这里阅读以熟悉它们：

*   [如何使用键绑定](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)

现在您已经阅读了，让我们展示另一个示例来帮助澄清（尽管 Oracle 做得很好）

如果我们想为您添加`KeyBinding`一个特定的`JComponent`ie `JButton`，`Esc`可以这样做：

```
void addKeyBinding(JComponent jc) {
        jc.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke(KeyEvent.VK_ESCAPE, 0, false), "esc pressed");
        jc.getActionMap().put("esc pressed", new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                System.out.println("Esc pressed");
            }
        });

        jc.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke(KeyEvent.VK_ESCAPE, 0, true), "esc released");
        jc.getActionMap().put("esc released", new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                System.out.println("Esc released");
            }
        });
} 
```

上述方法将被称为：

```
JButton b=..;//create an instance of component which is swing

addKeyBinding(b);//add keybinding to the component 
```

请注意：

1）你不需要两者`KeyBindings`，我只是展示了如何获得不同的关键状态并使用`Keybindings`.

2）此方法将添加一个`Keybinding`只要`Esc`按下并且组件位于具有焦点的窗口中就会激活的，您可以通过指定另一个来更改它，`InputMap`即：

```
jc.getInputMap(JComponent.WHEN_FOCUSED).put(..);//will only activated when component has focus 
```

# algorithm - k 表示聚类样本数据

> ID：14004264
> 
> 赞同：1
> 
> 时间：2012-12-22T16:01:06.287
> 
> 标签：algorithm, cluster-analysis, graph-algorithm, k-means

我正在编写程序来实现 k-means 聚类。

```
consider a simple input with 4 vertices a,b,c and d with following edge costs

[vertex1] [vertex2] [edge cost]
a b 1
a c 2
a d 3
b d 4
c d 5 
```

现在我需要让程序运行，直到我得到 2 个集群。

我的疑问是，在计算最小距离的第一步中，它是 a->b（边缘成本 1）。现在我应该将 ab 视为单个集群。如果是这样，ab 到 c 和 d 的距离是多少？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T16:10:24.063

K-means 算法的工作原理如下：

1.  选择 k 个点作为初始质心（因此，K-*）；
2.  计算所有顶点到所选择的 k 个质心的距离；
3.  将每个顶点分配给最近的质心；
4.  通过生成属于质心的所有顶点之间的平均值来重新计算质心的位置（因此，k-means，对每个 k 质心进行一次平均计算）；
5.  当在 step中没有顶点被分配给另一个质心时，转到 step`2`并停止- 或者直到您的错误条件得到满足。`3`

在您的情况下，由于您有一个无向图，因此最好考虑边缘距离来生成每个顶点的坐标，然后应用该算法。

如果您不想执行此初始过程，您可以计算从一个顶点到所有其他可到达顶点的距离，但是您必须为每次迭代都执行此操作——这是相当不必要的开销。

对于您的无向图：

```
[vertex1] [vertex2] [edge cost]
a b 1
a c 2
a d 3
b d 4
c d 5 
```

距离表将类似于：

```
 a    b    c    d
a    0    1    2    3
b    1    0   (1)   4
c    2   (1)   0    5
d    3    4    5    0

(1) - b to c = (b to a, a to c) = 3 
```

如果这应该是您的表格，只需在您的图表上应用 Dijkstra 算法，对于每个顶点，并将结果表格视为您的距离表格。

该表将具有最小距离，但是，如果您有任何其他策略来计算它，则完全由您决定如何计算它。

另请注意，如果您的图是有向的，则矩阵将不是对称的，因为在这种情况下是对称的。

# c# - 信息反复记录在数据库中

> ID：14004266
> 
> 赞同：0
> 
> 时间：2012-12-22T16:01:45.787
> 
> 标签：c#, sql

![在此处输入图像描述](../Images/44b7976e6c006beeba9eb0529b4b8bd9.png)我有一个表格，我在其中将记录插入数据库。有两个表，table_1 被调用`members`，table_2 被调用`Amount`。

我正在使用两个 SQL`INSERT`语句将记录发送到数据库，因为这是我想出的方式——可能还有其他方式，我不知道。

当我插入记录时，我收到一条消息，它已成功插入，但是当我检查数据库时，插入的记录替换了当前的记录，所以我在数据库中的最后一条记录重复了几次。请协助。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Data.SqlClient;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace CemiyetAidatSistem
{
    public partial class AddMember : Form
    {
        public AddMember()
        {
            InitializeComponent();
        }
        SqlConnection con = new SqlConnection("Data Source=My-PC\\SQLSERVER;Initial Catalog=FredericiaDernek;Integrated Security=True");

        private void btnInsert_Click(object sender, EventArgs e)
        {
            SqlCommand cmd = new SqlCommand();
            string Sql = "INSERT INTO Uyeleri ( dID, FullName, Address, Mobile, Email, Comments ) VALUES ('" + txtdID.Text + "', '" + txtAdiSoyadi.Text + "','" + txtAddress.Text + "','" + txtMobile.Text + "','" + txtEmail.Text + "','" + txtComments.Text + "')";
            cmd.CommandText = Sql;
            cmd.Connection = con;
            con.Open();
            cmd.ExecuteNonQuery();
            con.Close();

            Sql = "INSERT INTO Aidat (dID Year, Amount ) VALUES ('"+ txtdID.Text +"','" + txtYear.Text + "','" + txtAmount.Text + "')";
            cmd.CommandText = Sql;
            cmd.Connection = con;
            con.Open();
            cmd.ExecuteNonQuery();
            con.Close();

            for (int i = 0; i < this.Controls.Count; i++)
            {
                if (this.Controls[i] is TextBox)
                {
                    this.Controls[i].Text = "";
                }
            }
            MessageBox.Show("Data Added Scuessfully");
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T16:15:46.870

我已经重写了您的代码以纠正错误和不良做法

```
string connString = "Data Source=My-PC\\SQLSERVER;Initial Catalog=FredericiaDernek;Integrated Security=True";

private void btnInsert_Click(object sender, EventArgs e)
{
    using(SqlConnection con = new SqlConnection(connString))
    {
        con.Open();
        string Sql = "INSERT INTO Uyeleri (dID, FullName, Address, Mobile, Email, Comments ) " + 
                     "VALUES (@id, @name, @address, @mobile, @email, @comments");
        using(SqlCommand cmd = new SqlCommand(Sql, con))
        {
            cmd.Parameters.AddWithValue("@id", txtdID.Text);
            cmd.Parameters.AddWithValue("@name", txtAdiSoyadi.Text);
            cmd.Parameters.AddWithValue("@address", txtAddress.Text);
            cmd.Parameters.AddWithValue("@mobile", txtMobile.Text);
            cmd.Parameters.AddWithValue("@email", txtEmail.Text);
            cmd.Parameters.AddWithValue("@comments", txtComments.Text);
            cmd.ExecuteNonQuery();

            Sql = "INSERT INTO Aidat (dID, [Year], Amount ) VALUES " + 
                  "(@id, @year, @amount)";
            cmd.Parameters.Clear();
            cmd.CommandText = Sql;  // <- missing this in the previous version.....
            cmd.Parameters.AddWithValue("@id", txtdID.Text);
            cmd.Parameters.AddWithValue("@name", txtYear.Text);
            cmd.Parameters.AddWithValue("@amount", txtAmount.Text);
            cmd.ExecuteNonQuery();
        }
    } 
```

我改变了什么：

*   第二个插入语句是错误的。第一列和第二列之间缺少逗号
*   删除了在全局级别创建 SqlConnection
*   添加了适当的 using 语句以在出现异常时处理 SqlConnection 和 SqlCommand
*   两个插入语句使用的参数
*   在 Year 字段周围添加方括号（Year 是 T-SQL 中的保留关键字）

在全局级别创建 SqlConnection 是不好的，因为您获取系统资源并且您不会在应用程序的生命周期内释放它们。如果异常处理不正确，情况可能会失控。

现在我对你的桌子有些怀疑。字段 dID（两个表）和 Amount 是文本类型（varchar，nvarchar）？。如果它们是数字类型，则需要在将值添加到参数集合之前添加转换

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T16:23:53.870

我还建议更改您的 for 循环以清除控件替换此

```
for (int i = 0; i < this.Controls.Count; i++)
{
    if (this.Controls[i] is TextBox)
    {
        this.Controls[i].Text = "";
    }
} 
```

使用 linq 使用以下代码。

```
this.Controls.OfType<TextBox>().ToList().ForEach(textBox => textBox.Clear()); 
```

请记住，**“this”**指的是您的表单名称

所以它会是

```
(YourWinFormsName).Controls.OfType<TextBox>().ToList().ForEach(textBox => textBox.Clear()); 
```

# xcode - 弹簧和支柱或自动调整大小

> ID：14004270
> 
> 赞同：1
> 
> 时间：2012-12-22T16:01:48.963
> 
> 标签：xcode, storyboard, struts, autolayout, autosize

-重新编辑-

刚刚在这篇文章上批准了一个编辑，因为它“修正了语法 [原文如此] 并澄清了问题”。

实际上，这让两者都变得更糟，所以我把它改回来了。

-编辑-

我有一个这样的故事板布局：

![在此处输入图像描述](../Images/fd0834f786886a2c98c2a9506bc8b934.png)

如果我使用自动布局，我会在模拟器中得到这个：

![在此处输入图像描述](../Images/cc2418ef69360076d0b961d332044a60.png)

如果我将其关闭并使用此设置：

![在此处输入图像描述](../Images/60794590e4422856b1f7e5405c50e04d.png)

我明白了：

![在此处输入图像描述](../Images/8319cf10e073f9a7da860ace40853af2.png)

这与我通过反复试验可以管理的尽可能接近所需的布局。

任何人都提供有关如何设置它以使其与情节提要相匹配的任何提示？

# android - 浏览器打不开网址

> ID：14004271
> 
> 赞同：1
> 
> 时间：2012-12-22T16:02:00.237
> 
> 标签：android

我正在尝试使用以下代码在网络浏览器中打开一个网址，

**不工作**

```
Bundle ex=in.getExtras();
link=ex.getString("link");
public void onClick(View arg0) {
    Intent t=new Intent(Intent.ACTION_VIEW);
    Uri u=Uri.parse(link);
    t.setData(u);
    startActivity(t);   
} 
```

但我遇到了一个奇怪的问题。当我使用确切的 url 而不是字符串“链接”时，一切正常，但是当我使用我创建的字符串链接时，我得到“没有找到处理意图的活动”异常.但我确定该链接包含正确的网址，与我之前使用的相同。

**这行得通**

```
 public void onClick(View arg0) {
    Intent t=new Intent(Intent.ACTION_VIEW);
    Uri u=Uri.parse("http://google.com");
    t.setData(u);
    startActivity(t);   
} 
```

我确定在第一种情况下链接包含 url (http://google.com)，除了我打印在 textview 上检查！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:03:52.943

好吧，问题是由“链接”处的空格引起的。我使用了 link.trim() 并且它工作正常。谢谢你们的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T16:12:17.707

那是因为`Intent.ACTION_VIEW`根据您传递的数据，行为会有所不同`setData`。因此，如果您传递一个 Uri/URL 它将打开浏览器，但如果您传递一个字符串（字符串实际上包含一个 url 并不重要）它不知道如何处理它。

如果您需要从代码创建链接，您可以使用[Uri.withAppendedPath](http://developer.android.com/reference/android/net/Uri.html#withAppendedPath%28android.net.Uri,%20java.lang.String%29)

# mysql - 如何合并这些 SQL 查询

> ID：14004274
> 
> 赞同：0
> 
> 时间：2012-12-22T16:02:25.723
> 
> 标签：mysql

我需要合并这个查询

```
SELECT 
*,
(SELECT 
        CONCAT(c.firstname, ' ', c.lastname)
    FROM
        wwwpser_customer c
    WHERE
        c.customer_id = o.customer_id) AS customer
FROM
wwwpser_order o
WHERE
o.order_id = '20' 
```

和

```
SELECT 
orders . *, wwwpser_comuna.provincia_id AS payment_provincia_id
FROM
wwwpser_order orders
    LEFT JOIN
wwwpser_comuna ON (orders.payment_city = wwwpser_comuna.comuna_id) 
```

SQL 语法对我来说是新的，所以我需要一些帮助，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T16:05:03.300

```
SELECT CONCAT(c.firstname, ' ', c.lastname)
,      wc.provincia_id 
,      o.*
FROM   wwwpser_order o
LEFT JOIN   
       wwwpser_customer c
ON     c.customer_id = o.customer_id
LEFT JOIN
       wwwpser_comuna wc
ON     wc.comuna_id = o.payment_city
WHERE  o.order_id = 20 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T16:32:52.403

看起来这应该是您的解决方案。

```
SELECT 
o.*,                                                -- modified (qualified the
(SELECT                                             -- asterisk)
        CONCAT(c.firstname, ' ', c.lastname)
    FROM
        wwwpser_customer c
    WHERE
        c.customer_id = o.customer_id) AS customer, 
c.provincia_id AS payment_provincia_id              -- added from second query
FROM
wwwpser_order o
    LEFT JOIN                                       -- added from second query
wwwpser_comuna c ON (o.payment_city = c.comuna_id)  -- added from second query
WHERE
o.order_id = '20' 
```

不过，我强烈建议您学习通用 SQL 语法。[MySQL 教程](http://dev.mysql.com/doc/refman/5.6/en/retrieving-data.html)中有一些有用的示例

# android - Android drawables - 将 xhdpi 用于 hdpi

> ID：14004286
> 
> 赞同：2
> 
> 时间：2012-12-22T16:03:51.537
> 
> 标签：android, drawable, dpi, hdpi

最后两个问题没有回答，我希望“第三个的魅力”有效:)

我希望 HDPI 应用程序使用文件夹“drawable-xhdpi”中的那些可绘制对象和“drawable-mdpi”中的那些 LDPI 设备。所以我不必复制相同的图像。这可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-22T16:54:32.530

是的，Android 会缩放可绘制对象，选择会产生最佳结果的可绘制对象。但并不是所有的缩放组合都能很好地工作。缩小到 MDPI 会产生明显较差的结果。XHDPI 到 HDPI 通常会产生非常好的结果。但鉴于当今绝大多数设备都是 HDPI，因此拥有 HDPI 资源可能是值得的。HDPI 到 XHDPI 的缩放并不可怕。一些 1280x720 设备使用 XHDPI 资源。这些通常看起来没问题。Google TV 也使用 XHDPI。在大屏幕上，可以看到缩放错误。

出于所有实际目的，LDPI 设备现在不存在。

诚然，生成规模化资源是一个巨大的 PITA。但是，在我看来，你真的需要做 MDPI 和 HDPI。一旦你解决了令人不快的工作流程，就不需要做很多额外的工作来生成 XHDPI。对于它的价值，如果您的作品是矢量格式，那么绝大多数资源都不需要针对特定​​分辨率进行调整。例如，似乎没有任何迫切需要对正方形对象的边缘进行像素对齐。通常，只有复杂图标和艺术品中的内部特征才能受益于一定程度的像素推动。

很明显，XHDPI 将会越来越普遍。相信我，你不会想在事后回过头来用 XHDPI 重新制作所有作品。我的建议：如果你打算从现在开始一年后仍然发布你的应用程序，那就把它收拾起来，然后随心所欲地去做，虽然它仍然相对容易。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-22T16:11:57.800

根据我的经验，如果您仅将图像放置在一些可绘制文件夹中，但不是全部，操作系统将为您正在使用的设备选择“最佳”图像，即使它并不完全适合。例如，如果您将名为 arrow.png 的图像仅放在 drawable-hdpi 文件夹中，则所有设备都会将该图像用于可绘制箭头，并适当地缩小或放大它，拉伸或缩小图像。

话虽如此，您应该能够通过简单地将图像放在正确的文件夹中并允许设备选择正确的文件夹来完成您想要的。例如，如果您尝试仅使用一张图片来完成任务，arrow.png：

drawable-xhdpi/ -> 箭头.png

drawable-hdpi/ -> 空的

drawable-mdpi/ -> 箭头.png

drawable-ldpi/ -> 空的

可绘制/-> 空的

如果您在 ldpi 设备上使用该应用程序，该设备将使用您想要的 mdpi 图像，因为它最接近正确的分辨率。在 hdpi 手机上，它将使用 xhdpi 图像，因为它又是最接近正确分辨率的图像。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-22T16:11:06.653

是的。Android 会自动缩小/放大它无法找到的资源。如果您只将资源放在 XHDPI 文件夹中，它就可以工作，Android 会负责调整它们的大小以在所有其他密度下工作。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-08-14T03:15:59.073

我们应该将此代码添加到 MainActivity 类中，并将图像复制到 dhpi 文件夹，其中 ic_launcher、ic_launcher2、ic_launcher3 和 ic_1 是图像名称，我们可以更改大小：宽度和高度

```
int array_image[]={R.drawable.ic_launcher,
    R.drawable.ic_launcher2,
    R.drawable.ic_launcher3,
    R.drawable.ic_1 
```

}

# google-maps-android-api-2 - 在android中嵌入google maps android v2

> ID：14004289
> 
> 赞同：2
> 
> 时间：2012-12-22T16:03:57.573
> 
> 标签：google-maps-android-api-2

我在 android 2.33 中创建了应用程序。我使用了 apk v2 密钥，我遵循了所有步骤，但仍然显示错误

```
**xml**
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/map"
android:layout_width="match_parent"
android:layout_height="match_parent"
class="com.google.android.gms.maps.MapFragment" />

**Mainfest**
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.Maps.mappv2"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />
<uses-feature
 android:glEsVersion="0x00020000"
 android:required="true"/>

<permission
      android:name="com.Maps.mappv2.permission.MAPS_RECEIVE"
      android:protectionLevel="signature"/>
    <uses-permission android:name="com.Maps.mappv2.permission.MAPS_RECEIVE"/>
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission            android:name="com.google.android.providers.gsf.
     permission.READ_GSERVICES"/>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

   <application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
         <intent-filter >
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
            </intent-filter>
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="mm" />
    </activity>
    <meta-data
      android:name="com.google.android.maps.v2.API_KEY"
      android:value="AIzaSyA64MFhpngQBkXP5__fvHeLE0xAXWKwfgU"/>
  </application>

</manifest>

**Activity**
 public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
 } 
```

我包含了 google-play-services jar 库文件，但它仍然显示意外停止...

```
 **The error are**
  12-22 20:51:59.344: E/Trace(698): error opening trace file: No such file or directory (2)
12-22 20:52:00.165: E/AndroidRuntime(698): FATAL EXCEPTION: main
12-22 20:52:00.165: E/AndroidRuntime(698): java.lang.NoClassDefFoundError:  com.google.android.gms.R$styleable
12-22 20:52:00.165: E/AndroidRuntime(698):  at com.google.android.gms.maps.GoogleMapOptions.createFromAttributes(Unknown Source)
12-22 20:52:00.165: E/AndroidRuntime(698):  at com.google.android.gms.maps.MapFragment.onInflate(Unknown Source)
12-22 20:52:00.165: E/AndroidRuntime(698):  at android.app.Activity.onCreateView(Activity.java:4663)
12-22 20:52:00.165: E/AndroidRuntime(698):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)
12-22 20:52:00.165: E/AndroidRuntime(698):  at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
12-22 20:52:00.165: E/AndroidRuntime(698):  at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
12-22 20:52:00.165: E/AndroidRuntime(698):  at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
12-22 20:52:00.165: E/AndroidRuntime(698):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:256)
12-22 20:52:00.165: E/AndroidRuntime(698):  at android.app.Activity.setContentView(Activity.java:1867)
12-22 20:52:00.165: E/AndroidRuntime(698):  at com.Maps.mappv2.MainActivity.onCreate(MainActivity.java:13)
12-22 20:52:00.165: E/AndroidRuntime(698):  at android.app.Activity.performCreate(Activity.java:5008)
12-22 20:52:00.165: E/AndroidRuntime(698):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
12-22 20:52:00.165: E/AndroidRuntime(698):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
12-22 20:52:00.165: E/AndroidRuntime(698):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
12-22 20:52:00.165: E/AndroidRuntime(698):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
12-22 20:52:00.165: E/AndroidRuntime(698):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
12-22 20:52:00.165: E/AndroidRuntime(698):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-22 20:52:00.165: E/AndroidRuntime(698):  at android.os.Looper.loop(Looper.java:137)
12-22 20:52:00.165: E/AndroidRuntime(698):  at android.app.ActivityThread.main(ActivityThread.java:4745)
12-22 20:52:00.165: E/AndroidRuntime(698):  at java.lang.reflect.Method.invokeNative(Native Method)
12-22 20:52:00.165: E/AndroidRuntime(698):  at java.lang.reflect.Method.invoke(Method.java:511)
12-22 20:52:00.165: E/AndroidRuntime(698):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
12-22 20:52:00.165: E/AndroidRuntime(698):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
12-22 20:52:00.165: E/AndroidRuntime(698):  at dalvik.system.NativeStart.main(Native Method)
12-22 20:52:39.734: E/Trace(724): error opening trace file: No such file or directory (2)
12-22 20:52:40.244: E/AndroidRuntime(724): FATAL EXCEPTION: main
12-22 20:52:40.244: E/AndroidRuntime(724): java.lang.NoClassDefFoundError: com.google.android.gms.R$styleable
12-22 20:52:40.244: E/AndroidRuntime(724):  at com.google.android.gms.maps.GoogleMapOptions.createFromAttributes(Unknown Source)
12-22 20:52:40.244: E/AndroidRuntime(724):  at com.google.android.gms.maps.MapFragment.onInflate(Unknown Source)
12-22 20:52:40.244: E/AndroidRuntime(724):  at android.app.Activity.onCreateView(Activity.java:4663)
12-22 20:52:40.244: E/AndroidRuntime(724):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)
12-22 20:52:40.244: E/AndroidRuntime(724):  at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
12-22 20:52:40.244: E/AndroidRuntime(724):  at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
12-22 20:52:40.244: E/AndroidRuntime(724):  at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
12-22 20:52:40.244: E/AndroidRuntime(724):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:256)
12-22 20:52:40.244: E/AndroidRuntime(724):  at android.app.Activity.setContentView(Activity.java:1867)
12-22 20:52:40.244: E/AndroidRuntime(724):  at com.Maps.mappv2.MainActivity.onCreate(MainActivity.java:13)
12-22 20:52:40.244: E/AndroidRuntime(724):  at android.app.Activity.performCreate(Activity.java:5008)
12-22 20:52:40.244: E/AndroidRuntime(724):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
12-22 20:52:40.244: E/AndroidRuntime(724):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
12-22 20:52:40.244: E/AndroidRuntime(724):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
12-22 20:52:40.244: E/AndroidRuntime(724):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
12-22 20:52:40.244: E/AndroidRuntime(724):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
12-22 20:52:40.244: E/AndroidRuntime(724):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-22 20:52:40.244: E/AndroidRuntime(724):  at android.os.Looper.loop(Looper.java:137)
12-22 20:52:40.244: E/AndroidRuntime(724):  at android.app.ActivityThread.main(ActivityThread.java:4745)
12-22 20:52:40.244: E/AndroidRuntime(724):  at java.lang.reflect.Method.invokeNative(Native Method)
12-22 20:52:40.244: E/AndroidRuntime(724):  at java.lang.reflect.Method.invoke(Method.java:511)
12-22 20:52:40.244: E/AndroidRuntime(724):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
12-22 20:52:40.244: E/AndroidRuntime(724):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
12-22 20:52:40.244: E/AndroidRuntime(724):  at dalvik.system.NativeStart.main(Native Method)
12-22 20:52:49.084: E/Trace(738): error opening trace file: No such file or directory (2)
12-22 20:52:49.624: E/AndroidRuntime(738): FATAL EXCEPTION: main
12-22 20:52:49.624: E/AndroidRuntime(738): java.lang.NoClassDefFoundError: com.google.android.gms.R$styleable
12-22 20:52:49.624: E/AndroidRuntime(738):  at com.google.android.gms.maps.GoogleMapOptions.createFromAttributes(Unknown Source)
12-22 20:52:49.624: E/AndroidRuntime(738):  at com.google.android.gms.maps.MapFragment.onInflate(Unknown Source)
12-22 20:52:49.624: E/AndroidRuntime(738):  at android.app.Activity.onCreateView(Activity.java:4663)
12-22 20:52:49.624: E/AndroidRuntime(738):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)
12-22 20:52:49.624: E/AndroidRuntime(738):  at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
12-22 20:52:49.624: E/AndroidRuntime(738):  at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
12-22 20:52:49.624: E/AndroidRuntime(738):  at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
12-22 20:52:49.624: E/AndroidRuntime(738):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:256)
12-22 20:52:49.624: E/AndroidRuntime(738):  at android.app.Activity.setContentView(Activity.java:1867)
12-22 20:52:49.624: E/AndroidRuntime(738):  at com.Maps.mappv2.MainActivity.onCreate(MainActivity.java:13)
12-22 20:52:49.624: E/AndroidRuntime(738):  at android.app.Activity.performCreate(Activity.java:5008)
12-22 20:52:49.624: E/AndroidRuntime(738):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
12-22 20:52:49.624: E/AndroidRuntime(738):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
12-22 20:52:49.624: E/AndroidRuntime(738):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
12-22 20:52:49.624: E/AndroidRuntime(738):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
12-22 20:52:49.624: E/AndroidRuntime(738):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
12-22 20:52:49.624: E/AndroidRuntime(738):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-22 20:52:49.624: E/AndroidRuntime(738):  at android.os.Looper.loop(Looper.java:137)
12-22 20:52:49.624: E/AndroidRuntime(738):  at android.app.ActivityThread.main(ActivityThread.java:4745)
12-22 20:52:49.624: E/AndroidRuntime(738):  at  java.lang.reflect.Method.invokeNative(Native Method)
12-22 20:52:49.624: E/AndroidRuntime(738):  at java.lang.reflect.Method.invoke(Method.java:511)
12-22 20:52:49.624: E/AndroidRuntime(738):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
12-22 20:52:49.624: E/AndroidRuntime(738):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
12-22 20:52:49.624: E/AndroidRuntime(738):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T13:17:29.277

首先尝试**干净构建**库项目和普通项目。不工作检查以下：

> 我包含了 google-play-services jar 库文件

您不必包括罐子。您必须导入为**android 库项目**。

1.  在您的工作区中导入库项目
2.  将其作为库添加到您的项目中
3.  然后构建应用程序

原因：库项目有一些xml资源。所以项目不能作为jar导入。

![在此处输入图像描述](../Images/f6a69cdeee632bdfcb6e7935ffec5ea6.png)

> java.lang.NoClassDefFoundError: com.google.android.gms.R$styleable

正如日志所说，由于您尚未构建资源，因此无法引用 styleable。

R 文件是一个生成的文件。

从罐子里你不能得到参考

1.  可绘制对象（图像）
2.  xml 资源 [样式、字符串等]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T05:16:43.220

如果您使用的是 Android 2.3.3，则需要使用`SupportMapFragment`代替`MapFragment`和`FragmentActivity`代替`Activity`.

在`onCreate`您的活动中，您可以添加`SupportMapFragment`...

```
 SupportMapFragment fragment = new SupportMapFragment();
    getSupportFragmentManager().beginTransaction()
            .add(android.R.id.content, fragment).commit(); 
```

# c# - 对类方法的动态控制访问

> ID：14004290
> 
> 赞同：-1
> 
> 时间：2012-12-22T16:03:58.993
> 
> 标签：c#, design-patterns

考虑以下情况 -

我有一个类（Fruits），它有一些方法，如 PackTheFruit()、CutTheFruit()、CleanTheFruit()。这个类不能修改。

我还有一组包含水果类型对象的类。在某些类中，我想访问 PackTheFruit() 方法，但不是全部。

我曾想过创建两个接口，它们将由 Fruits 类实现。一个会公开 PackTheFruit() ，一个会只公开其他方法，每个类将有一个这些接口类型的对象，而不是取决于它们是否需要访问该方法。

这个解决方案的问题是，当我向 Fruits 类添加另一个方法时，我将不得不更新接口。至少在我看来，这将是一个糟糕的设计。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T16:07:28.137

你的意思是这样的？

```
class Fruit
{
    public float Weight { get; set; }   
}

interface IPackable { }

class Apple : Fruit, IPackable
{

}

class FruitPacker
{
    void Pack(IPackable fruit)
    {
        // pack fruit
    }
} 
```

水果不必知道它是*如何*包装的，因此您不必在水果中实现它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T16:22:49.297

也许您的 PackTheFruit()、CutTheFruit() 和 CleanTheFruit() 方法不应该是 Fruit 类的固有方法。这些名字听起来像是*用*水果做的，但不是*用*水果做的。

如果您提供一个知道如何包装水果的 FruitPacker 类，您可以为应该能够调用该操作的类提供此类的实例。其他方法也是如此。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T17:17:48.473

I depends what these operations are doing. Let's assume that packing consists of adding fruits to a basket up to a maximum weight, then you will need to know the weight of a fruit in order to make it packable. If you want to pack different kinds of fruits it would be better to have a separate packer class. It feels strange to have fruits packing themselves.

```
public interface IPackable
{
    public float Weight { get; set; }
}

public interface IPacker
{
    // Returns a list of packages represented by lists of fruits.
    List<List<Fruit>> GetPackages(IEnumerable<Fruit> fruits, float maxPackageWeight);
}

public class Packer : IPacker
{
    public List<List<Fruit>> GetPackages(IEnumerable<Fruit> fruits,
                                         float maxPackageWeight)
    {
        var currentPackage = new List<Fruit>();
        var packages = new List<List<Fruit>>(currentPackage);
        float currentWeight = 0.0f;
        foreach (Fruit fruit in fruits) {
            var packable = fruit as IPackable;
            if (packable != null && packable.Weight <= maxPackageWeight) {
                if (currentWeight + packable.Weight <= maxPackageWeight) {
                    currentPackage.Add(fruit);
                    currentWeight += packable.Weight;
                } else {
                    var currentPackage = new List<Fruit>(fruit);
                    packages.Add(currentPackage);
                    currentWeight = packable.Weight;
                }
            }
        }
        return packages;
    }
} 
```

If you add new interfaces for new functionalities, you will not have to change existing interfaces. This is called [Interface segregation principle](http://en.wikipedia.org/wiki/Interface_segregation_principle) (ISP) and is one of the five SOLID principles of Object-Oriented Design.

Note: Having an `IPacker` interface allows you to implement different kinds of packers. An implementation might mix different kinds of fruits within a package, while another one might sort the fruits.

# php - 如何获取行数据MySql的max(id)

> ID：14004295
> 
> 赞同：2
> 
> 时间：2012-12-22T16:04:12.473
> 
> 标签：php, mysql, codeigniter

我想获取行数据的最大 id。在我的表中，第一列是 id 然后是 firstname 等等。这是我用来获取行数据的 max(id) 的 sql 命令。

```
<?PHP  $maxid=$this->db->query("SELECT MAX(id) FROM `emplyee_personal_details`");
                print_r( $maxid) ;?> 
```

但它打印一堆数据，因为它是一个数组。但在数据插入和更新之前，我只需要行数据的最大 id 进行验证。

如何获得最大值。我使用 codeigniter 框架。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-22T16:06:05.770

尝试这个：

```
$maxid = $this->db->query('SELECT MAX(id) AS `maxid` FROM `emplyee_personal_details`')->row()->maxid; 
```

更新

即使您的表是空的，这也将起作用（与我上面的示例不同）：

```
$maxid = 0;
$row = $this->db->query('SELECT MAX(id) AS `maxid` FROM `emplyee_personal_details`')->row();
if ($row) {
    $maxid = $row->maxid; 
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-22T16:18:20.333

使用像“SELECT MAX(id) ...”这样的原始查询的问题在于它不是抽象的，并且可能不适用于每个 SQL 引擎。我认为主动记录的方式是这样的：

```
$this->db->select_max('id');
$query = $this->db->get('emplyee_personal_details');
// Produces: SELECT MAX(id) as age FROM emplyee_personal_details 
```

请参阅：[http ://ellislab.com/codeigniter/user-guide/database/active_record.html](http://ellislab.com/codeigniter/user-guide/database/active_record.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T16:06:30.447

```
SELECT id FROM table ORDER BY id DESC LIMIT 1 
```

这将为您提供最高的 id 值，当我阅读此内容时，“它会打印一堆数据，因为它是一个数组”，我觉得您真正想要的是该数组的一部分。DB 查询总是返回复杂的结构，如数组或对象。因此，如果您只想要标量值（作为整数的数字），您可以使用如下内容：

```
$maxid = (int)$maxid['id']; 
```

或者像这样（如果你有一个对象）：

```
$maxid = (int)$maxid->id; 
```

HTH，~雷

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-02T05:08:35.823

试试这个，希望对你有帮助

```
return $this->db->select_max('id')
                        ->get('your_table_name')
                        ->row()->id; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-06T09:50:02.940

```
public function getMaxCategoryId() {
    $query = $this->db->query("SELECT category_id+1 AS maxid FROM " . DB_PREFIX . "category ORDER BY category_id DESC LIMIT 1");
    return $query->row['maxid'];
} 
```

错误未定义索引最大值

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-12T15:39:41.237

```
<?php`$qry = "select max(ID)+1 As ID from records";`
$result = $con->query($qry);
$row = $result->fetch_assoc();`echo "New ID To Enter = ".$row["ID"];?> 
```

**连接后只需编写此代码即可**

# actionscript-3 - 如何定义关于 MVC 设计模式的绑定？

> ID：14004296
> 
> 赞同：0
> 
> 时间：2012-12-22T16:04:44.770
> 
> 标签：actionscript-3, model-view-controller

我对我们所说的“绑定”有些困惑？

是不是：1）[Bindable] 模型的变化导致视图的自动变化（绑定到该模型）

或者

2) View 的变化，然后 [Bindable] 模型的自动变化（视图被绑定）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T16:36:31.457

Flex 中数据绑定的典型用途是将一些模型对象绑定到视图对象（#1）。

在 Flex 4 中，引入了两种方式绑定。这对#1 和#2 都有效。也就是说，模型中所做的任何更改都会反映在视图中。而且，对视图中的值所做的任何更改都会更新模型值。

要使用双向绑定，请将 @ 符号添加到视图中的绑定表达式：

```
<s:TextInput text="@{model.someValue}" /> 
```

请注意，当您制作 Bindable 时，mxml 编译器会为您的 Bindable 变量生成一个 setter 方法，该方法会在变量更改时调度事件。然后，mxml 编译器将此事件的事件侦听器添加到绑定到变量的视图对象中。所以从技术上讲，任何对象（无论是视图、模型、控制器还是其他）都可以绑定到变量，只要它可以接收事件。

# php - 哪个正则表达式可以找到一组数字？

> ID：14004298
> 
> 赞同：2
> 
> 时间：2012-12-22T16:04:59.417
> 
> 标签：php, regex, preg-match

我很难找到可以检索数字的正则`989552`表达式 `/boards/989552-lettersandnumbers-morelettersandnumbers`

我特别要搜索的是我可以检索介于`/boards/`和第一个之间的内容`-`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T16:06:58.357

```
/boards/(\d+)- 
```

应该将数字存储在第一个匹配组中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T16:10:25.187

`.*/(\d+)-`贪婪地使用`.*`它将匹配到最后一个`/`：

```
$string = "/boards/989552-dgw25235-42352gdsgw";

echo preg_match('#.*/(\d+)-#',$string,$match);

echo $match[1];

>>> 989552 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T16:47:52.680

这是一个带注释的解决方案。

```
<?php // RAY_temp_user1722791.php
error_reporting(E_ALL);

/*
I'm having troubles finding a regex that can retrieve the numbers 989552 in /boards/989552-lettersandnumbers-morelettersandnumbers

What I'm searching in particular is can I retrieve what stands between /boards/ and the first -?
*/

// A REGULAR EXPRESSION
$rgx
= '#'         // REGEX DELIMITER
. '/boards/'  // THE SEARCH STRING
. '('         // START A GROUP
. '\d+'       // SOME DIGITS
. ')'         // END OF THE GROUP
. '-'         // THE DASH
. '#'         // REGEX DELIMITER
;

// A TEST STRING
$str = 'in /boards/989552-lettersandnumbers';

// PEFORM THE MATCH
preg_match($rgx, $str, $mat);

// FIND THE NUMBERS IN THE FIRST MATCHED GROUP
var_dump($mat[1]); 
```

当我像这样用垂直符号写出正则表达式时，我发现它们更容易理解。

# c - C 字符串如何在内存中分配？

> ID：14004302
> 
> 赞同：15
> 
> 时间：2012-12-22T16:05:04.847
> 
> 标签：c

假设我有一个以这种方式返回 C 字符串的简单函数：

```
const char * getString()
{
  const char * ptr = "blah blah";
  return ptr; 
} 
```

我这样从 main() 调用 getString() ：

> ```
>  const char * s = getString(); 
> ```

1）根据gdb，变量**ptr**存储在栈上，但是*ptr指向的字符串*却没有：

```
(gdb) p &ptr
$1 = (const char **) 0x7fffffffe688

(gdb) p ptr
$2 = 0x4009fc "blah blah" 
```

这是否意味着“blah blah”不是getString() 中的局部变量？

我想如果它是一个局部变量，我将无法将它传递给我的 main() 函数......但如果不是，它存储在哪里？在堆上？这是操作系统每次遇到字符串时都会实现的“一种”动态内存分配，还是什么？

2）如果我使用数组而不是指针，这样：

```
const char *getString2()
{
  const char a[] = "blah blah blah";
  return a;
} 
```

编译器警告我：

`warning: address of local variable ‘a’ returned`

（当然程序可以编译，但它不起作用）。

实际上，如果我问 gdb，我会得到

```
(gdb) p &a
$2 = (const char (*)[15]) 0x7fffffffe690 
```

但我认为**const char * ptr**和**const char a[]**基本上是一回事。看起来他们不是。

我错了吗？这两个版本之间究竟有什么区别？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-22T16:12:00.033

当你写

```
const char *ptr = "blah blah"; 
```

然后发生以下情况：编译器生成一个`char []`包含内容的常量字符串（类型为 ）并将其存储在可执行文件的数据段中的某个位置（它基本上具有与使用关键字`"blah blah"`声明的变量相似的存储持续时间）。`static`

然后，这个字符串的地址，它*在程序的整个生命周期内都是有效的，*存储在`ptr`指针中，然后返回。一切皆好。

> 这是否意味着它`"blah blah"`不是 getString() 中的局部变量？

让我用一句残缺的英文句子来回应：是的，不是。

但是，当您声明一个数组时，如

```
const char a[] = "blah blah"; 
```

那么编译器不会生成静态字符串。`a` **（实际上，这是初始化字符串时的一种特殊情况。）然后它会生成代码，为数组**分配足够大的堆栈内存（它不是指针！）并用字符串的字节填充它。这`a` **实际上是一个局部变量**，返回其地址会导致未定义的行为。

所以...

> 但我是这么想的，`const char *ptr`而且`const char a[]`基本上是一样的。

不，一点也不，因为[数组不是指针](http://c-faq.com/aryptr/index.html)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-22T16:16:05.033

> 我想如果它是一个局部变量，我将无法将它传递给我的 main() 函数......但如果不是，它存储在哪里？

字符串文字通常存储在只读数据部分 ( `.rodata`) 中。C标准只是说它们具有静态存储持续时间。因此，您可以返回指向此类文字的指针，但数组并非如此。

在以下示例中，指向的对象`p1`具有静态存储持续时间，而数组`p2`具有自动存储持续时间。

```
char *f(void)
{
    const char *p1 = "hello, world";
    char p2[] = "hello, world";

    return p1; /* allowed */
    return p2, /* forbidden */
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-22T16:07:43.580

在您的函数中， `a[]`数组的范围在函数内`getString2()`。它的**局部数组变量**。

```
const char *getString2()
{
  const char a[] = "blah blah blah";
  return a;
} 
```

在上述情况下，字符串`"blah blah blah"`复制了第一个`a[]`，并且您尝试使用`return a`语句返回该数组，但不是常量字符串。

在第一个代码中`getString()`：`ptr = "blah blah";`ptr 指向具有全局范围的内存。

```
const char * getString()
{
  const char * ptr = "blah blah";
  return ptr; 
} 
```

`"blah blah"`在这种情况下，您返回合法的常量字符串的地址。

所以实际上它的范围问题。

了解C 程序的[**内存**](http://icecube.wisc.edu/~dglo/c_class/scope.html)[**布局**](http://www.geeksforgeeks.org/archives/14268)和.[](http://icecube.wisc.edu/~dglo/c_class/scope.html)**`C`**

 *** * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-22T16:09:00.023

你是对的，因为它们不是一回事。char a[] 是在堆栈上形成的数组，然后用“blah..”填充 - 在函数内部，您基本上有 `const char a[15]; strcpy(a, "胡说八道");"

`The const char *ptr = "blah blah blah";`另一方面，它只是一个指针（指针本身在堆栈上），并且指针指向字符串“blah blah blah”，该字符串存储在其他地方[最有可能在“只读数据”中]。

如果您尝试更改某些内容，您会注意到很大的不同，例如： `a[2] = 'e';`vs `ptr[2] = 'e';`- 第一个将成功，因为您正在修改堆栈值，而第二个（可能）将失败，因为您正在修改只读内存，这当然不应该工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-22T16:07:47.780

它们是不相同的。

第一个是指向字符串文字的指针。指针本身是自动存储的。该字符串位于静态的只读内存中。它是不可变的。

第二个是自动（堆栈）`char`数组（正如警告所说，返回是不合法的）。**

# android - 添加授权标头导致android抛出filenotfound异常

> ID：14004304
> 
> 赞同：0
> 
> 时间：2012-12-22T16:05:09.293
> 
> 标签：android

当我添加授权标头时，android 会引发 filenotfound 异常。如果我删除

```
con.setRequestProperty ("Authorization", basicAuth); 
```

一切都很好？

```
con = (HttpsURLConnection)url.openConnection();
            String userpass = userNameEditText.getText() + ":" +  passwordEditText.getText();

            String basicAuth = "Basic " + Base64.encodeToString(userpass.getBytes(), Base64.NO_WRAP);

            con.setRequestProperty ("Authorization", basicAuth); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-27T18:10:35.490

我没有验证它为什么起作用，但请尝试执行以下操作

从[http://developer.android.com/reference/java/net/HttpURLConnection.html](http://developer.android.com/reference/java/net/HttpURLConnection.html)使用以下代码

```
Authenticator.setDefault(new Authenticator() {
     protected PasswordAuthentication getPasswordAuthentication() {
       return new PasswordAuthentication(username, password.toCharArray());

   });
 } 
```

完成后，无需添加 Authorization 标头，因为此类会自动为您添加它。

我有一个应用程序仅在某些设备上出现异常，并且将您的代码更改为此代码为我在所有设备上修复它。

我希望它会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T16:18:53.297

我使用了以下内容，它就像一个魅力。

```
//Base64 basic http authentication
String textToBeEncoded = mName+":"+mPassword;
byte[] data = null;
data = textToBeEncoded.getBytes("UTF-8");
encoding = Base64.encodeToString(data,Base64.NO_WRAP);
Log.d(TAG,"encoded string: "+encoding);
//--------------------------------
HttpGet httpRequest = new HttpGet("//REQUEST URL//");
httpRequest.addHeader("Authorization", "Basic "+encoding);
HttpClient httpclient = new DefaultHttpClient();
response = httpclient.execute(httpRequest); 
```

尝试改用这种方式..

希望它有效。

# javascript - JQuery 全局占位符替换

> ID：14004306
> 
> 赞同：0
> 
> 时间：2012-12-22T16:05:26.063
> 
> 标签：javascript, jquery, html, placeholder

由于我对某些浏览器不支持“占位符”-Tag这一事实不满意，我想：“为什么不开发一个JS-Workaround，当JS大部分可用时”。

所以我构建了一个表单输入搜索，它使所有占位符在 JS 中的行为具有一个优点：onFocus 将清除该字段！占位符不清除 onFocus 字段的事实是这样做的另一个原因。所以这里是代码，请随意使用和更改它：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T16:05:26.063

```
$('form').each(function(){
                var f = $(this);
                f.find('input[type=text]').each(function(){
                    var s = $(this);
                    var attr = s.attr('placeholder'); 
                    if (attr && $.trim(attr)!='') {
                        $.extend(this,{oldPlaceholder: s.attr('placeholder')})
                        s.removeAttr('placeholder');

                        if ($.trim(this.value)=='') {
                            this.value = this.oldPlaceholder;
                        }

                        s.focus(function(){
                            if ($.trim(s.val())==this.oldPlaceholder) {
                                s.val('');
                            }
                        });

                        s.blur(function(){
                            if ($.trim(s.val())=='') {
                                s.val(this.oldPlaceholder);
                            }
                        });
                    }
                });

                f.submit(function(){
                    $(this).find('input[type=text]').each(function(){
                        if (this.oldPlaceholder && $.trim(this.value)==this.oldPlaceholder) {
                            this.value = '';
                        }
                    });
                });
            }); 
```

# java - 弹簧自动装配无法达到我的 DAO 类方法

> ID：14004308
> 
> 赞同：0
> 
> 时间：2012-12-22T16:05:30.090
> 
> 标签：java, spring, spring-mvc

无法访问我的 DAO 课程。以下是我的应用程序文件

```
 @Controller
    public class HelloWorldController1 {
        @Autowired
        EmpServiceIntf empService;

        public EmpServiceIntf getEmpService() {
            return empService;
        }

         public myMethod(){
            List<Employee> empList = new ArrayList<Employee>();
            empList = empService.getAllemp(abc,pqr);
          }

    --------------------my interface class-----------------

    public interface EmpServiceIntf {
    List<Employee> getAllemp(String abc, String pqr);
    }

    -------------my implementation class----------------

    public class EmpServiceImpl implements EmpServiceIntf {
    private EmpServiceDAO empDAO = new EmpServiceDAO ();
        public List<Employee> getAllemp(String abc, String pqr) {
            return empDAO.getAllemp(abc, pqr);
        }
    }

------------------------applicationContext.xml------------------------
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:mvc="http://www.springframework.org/schema/mvc"   
    xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.0.xsd
        http://www.springframework.org/schema/mvc
        http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

<!-- Activates various annotations to be detected in bean classes-->
<context:annotation-config />
<context:component-scan base-package="org.nea.rest.unsr" />
<context:component-scan base-package="org.nea.spring.services.implementations.Uniserv" />
<context:component-scan base-package="org.nea.spring.services.interfaces.uniservs" />

<bean id="uniservService"  class="org.nea.spring.services.implementations.Uniserv.UniservServiceJPAImpl" />

    <!--bean class="org.nea.rest.unsr.HelloWorldController1">
        <property name="uniservService" ref="uniservService"></property>
    </bean-->

<!-- Configures the annotation-driven Spring MVC Controller programming model.
Note that, with Spring 3.0, this tag works in Servlet MVC only! -->
<mvc:annotation-driven />

</beans>
---------------------------------- 
```

现在我的问题是；使用上述配置，当我点击 myMethod() 时，它会上升到我的 EmpServiceImpl 类方法并返回到我的 HelloWorldController1 类。但它没有命中我的 EmpServiceDAO 方法。任何人都可以帮助我在哪里添加 n 以便它命中我的 EmpServiceDAO getAllemp 方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T17:18:40.203

这只是从“Controller”到“DaoImpl”的骨架示例。

`@Controller`- 为您的控制器 `@Service`- 为您的服务 `@Repository`- 为您的道

```
@Controller
class YourController {
   @Autowire
   private YourService yourService;

   public String yourControllerMethod() {
       yourService.serviceMethod();
   }
}

interface YourService {
   void serviceMethod();
}

@Service
class YourServiceImpl implements YourService {
   @Autowire
   private YourDao yourDao;

   void serviceMethod(){
      yourDao.daoMethod();
   }
}

interface YourDao {
    void daoMethod();
}

@Repository
class YourDaoImpl implements YourDao {
    void daoMethod() {
    }
} 
```

在你的“spring-mvc.xml”中 `<mvc:annotation-driven />`

```
and 
```

`<context:component-scan base-package="com.yourcompany.example" />`

```
to drive @Controller, @Service and @Repository annotations. 
```

# javascript - 在javascript中显示来自数组的随机图像

> ID：14004318
> 
> 赞同：3
> 
> 时间：2012-12-22T16:06:19.203
> 
> 标签：javascript, html

我想从 imgArray 中选择随机图像同时打印 16 张不同的图像，但无法填充 imgRandom 函数。

```
img = new imgArray(7);
img[0]='1.png';
img[1]='2.png';
img[2]='3.png';
img[3]='4.png';
img[4]='5.png';
img[5]='6.png';
img[6]='7.png';
img[7]='8.png';

var rand=imgArray[math.floor(math.random*imgArray.length)];

function imgRandom(){

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-22T16:12:26.660

试试这个功能

```
function getRandomImage(imgAr, path) {
    path = path || 'images/'; // default path here
    var num = Math.floor( Math.random() * imgAr.length );
    var img = imgAr[ num ];
    var imgStr = '<img src="' + path + img + '" alt = "">';
    document.write(imgStr); document.close();
} 
```

调用函数

```
getRandomImage(ARRAY-VARIABLE, '/images/') 
```

请参阅**[现场演示](http://jsfiddle.net/SivaCharan/JmYpZ/)**。每次刷新都会看到图像的变化

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-22T16:17:30.663

使用以下代码：

```
var imgArray = ['1.png', '2.png', '3.png', '4.png', '5.png', '6.png', '7.png', '8.png'];
var basePath="YOUR_FOLDER_PATH_HERE";

function imgRandom() {
    for (var i = 0; i < 18; i++) {
        var rand = imgArray[Math.floor(Math.random() * imgArray.length)];
        var image = new Image();
        image.src = basePath+rand;
        document.body.appendChild(image);
    }
} 
```

[现场演示](http://fiddle.jshell.net/SJ4rY/show/)| [来源](http://jsfiddle.net/SJ4rY/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-22T16:29:44.233

您的代码中有一些东西我想指出

*   `imgArray`默认情况下，javascript中没有（也许它是你的构造函数）
*   你想要一个`Array`

*   Javascript区分大小写，`Math`js中的对象有大写M

    *   `math`->`Math`
*   并且对象的`random`属性`Math`，必须被调用才能返回一个随机数
    *   `random`->`random()`
    *   `Math.random()`

但是对你的问题

1.  函数接受参数，因此可以为一组图像接受一个参数

    `function (imgArr) {...`
    *有了这个，您可以访问传递的参数`imgArr`*

2.  函数可以返回值，所以`Math.random`我们可以继续

    函数 (imgArr) { return imgArr[Math.floor(Math.random() * imgArr.length)] }

3.  您不必“暗淡”阵列，并预定义要放入的元素，您可以做某事。像

    `var imgArr = ["img01.png","img02.png",...]`
    *并且`var arr=[]`会等于`var arr = new Array()`*

4.  所以用你的数组调用这个函数看起来像

* * *

```
 var img = ["1.png", "2.png", "3.png", "4.png", "5.png", "6.png", "7.png", "8.png"]
     function imgRandom(imgArr) {
        return imgArr[Math.floor(Math.random() * imgArr.length)];
    }
 console.log(imgRandom(img)); 
```

# c# - 带有 Aforge.net 感知器神经网络的 OCR 回答错误

> ID：14004319
> 
> 赞同：8
> 
> 时间：2012-12-22T16:06:28.400
> 
> 标签：c#, artificial-intelligence, neural-network, ocr, aforge

我试图用 C# 中的 Aforge.Net 通过感知器制作 OCR。我用九张 30*30 的二进制图片学习了我的网络。但在结果中，它将所有内容都识别为“C”。这是代码：

```
 private void button1_Click(object sender, EventArgs e)
    {
        AForge.Neuro.ActivationNetwork network = new AForge.Neuro.ActivationNetwork(new AForge.Neuro.BipolarSigmoidFunction(2), 900, 3);
        network.Randomize();
        AForge.Neuro.Learning.PerceptronLearning learning = new AForge.Neuro.Learning.PerceptronLearning(network);
        learning.LearningRate =1 ;
        double[][] input = new double[9][];
        for (int i = 0; i < 9; i++)
        {
            input[i] = new double[900];
        }
   //Reading A images
        for (int i = 1; i <= 3; i++)
        {
            Bitmap a = AForge.Imaging.Image.FromFile(path + "\\a" + i + ".bmp");
            for (int j = 0; j < 30; j++)
                for (int k = 0; k < 30; k++)
                {
                    if (a.GetPixel(j, k).ToKnownColor() == KnownColor.White)
                    {
                        input[i-1][j * 10 + k] = -1;
                    }
                    else
                        input[i-1][j * 10 + k] = 1;
                }
           // showImage(a);

        }
   //Reading B images
        for (int i = 1; i <= 3; i++)
        {
            Bitmap a = AForge.Imaging.Image.FromFile(path + "\\b" + i + ".bmp");
            for (int j = 0; j < 30; j++)
                for (int k = 0; k < 30; k++)
                {
                    if (a.GetPixel(j , k).ToKnownColor() == KnownColor.White)
                    {
                        input[i + 2][j * 10 + k] = -1;
                    }
                    else
                        input[i + 2][j * 10 + k] = 1;
                }
           // showImage(a);

        }
   //Reading C images
        for (int i = 1; i <= 3; i++)
        {
            Bitmap a = AForge.Imaging.Image.FromFile(path + "\\c" + i + ".bmp");
            for (int j = 0; j < 30; j++)
                for (int k = 0; k < 30; k++)
                {
                    if (a.GetPixel(j , k ).ToKnownColor() == KnownColor.White)
                    {
                        input[i + 5][j * 10 + k] = -1;
                    }
                    else
                        input[i + 5][j * 10 + k] = 1;
                }
           // showImage(a);

        }

        bool needToStop = false;
        int iteration = 0;
        while (!needToStop)
        {
            double error = learning.RunEpoch(input, new double[9][] { new double[3] { 1, -1, -1 },new double[3] { 1, -1, -1 },new double[3] { 1, -1, -1 },//A
                new double[3] { -1, 1, -1 },new double[3] { -1, 1, -1 },new double[3] { -1, 1, -1 },//B
                new double[3] { -1, -1, 1 },new double[3] { -1, -1, 1 },new double[3] { -1, -1, 1 } }//C
                    /*new double[9][]{ input[0],input[0],input[0],input[1],input[1],input[1],input[2],input[2],input[2]}*/
                );
            //learning.LearningRate -= learning.LearningRate / 1000;
            if (error == 0)
                break;
            else if (iteration < 1000)
                iteration++;
            else
                needToStop = true;
            System.Diagnostics.Debug.WriteLine("{0} {1}", error, iteration);
        }
        Bitmap b = AForge.Imaging.Image.FromFile(path + "\\b1.bmp");
    //Reading A Sample to test Netwok
        double[] sample = new double[900];
        for (int j = 0; j < 30; j++)
            for (int k = 0; k < 30; k++)
            {
                if (b.GetPixel(j , k ).ToKnownColor() == KnownColor.White)
                {
                    sample[j * 30 + k] = -1;
                }
                else
                    sample[j * 30 + k] = 1;
            }
        foreach (double d in network.Compute(sample))
            System.Diagnostics.Debug.WriteLine(d);//Output is Always C = {-1,-1,1}
    } 
```

我真的很想知道为什么它回答错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T22:15:47.420

在将初始 30x30 图像加载到`input`结构中的 double[900] 数组中时，您正在使用以下计算：

```
for (int j = 0; j < 30; j++)
    for (int k = 0; k < 30; k++)
    {
        if (a.GetPixel(j, k).ToKnownColor() == KnownColor.White)
            input[i-1][j * 10 + k] = -1;
        else
            input[i-1][j * 10 + k] = 1;
    } 
```

您的偏移量计算在这里是错误的。您需要更改`j * 10 + k`为，`j * 30 + k`否则您将获得无效的结果。稍后您在加载测试图像时使用正确的偏移量计算，这就是为什么它没有与损坏的样本正确匹配的原因。

您应该编写一个方法来将位图加载到`double[900]`数组中并为每个图像调用它，而不是多次编写相同的代码。这有助于减少这样的问题，其中不同的结果由应该返回相同结果的两段代码给出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-11T12:30:31.997

我试过你的代码。它也帮助了我，非常感谢。我可以通过对从图像中获取位数组进行一些更改来使您的代码正常工作。这是我使用的方法。

```
`
        private double[] GetImageData(Bitmap bmp)
        {
        double[] imageData = null;

        //Make the image grayscale
        Grayscale filter = new Grayscale(0.2125, 0.7154, 0.0721);
        bmp = filter.Apply(bmp);

        //Binarize the image
        AForge.Imaging.Filters.Threshold thFilter = new AForge.Imaging.Filters.Threshold(128);
        thFilter.ApplyInPlace(bmp);

        int height = bmp.Height;
        int width = bmp.Width;
        imageData = new double[height * width];
        int imagePointer = 0;
        System.Diagnostics.Debug.WriteLine("Height : " + height);
        System.Diagnostics.Debug.WriteLine("Width  : " + width);

        for (int i = 0; i < height; i++)
        {
            for (int j = 0; j < width; j++)
            {
                System.Diagnostics.Debug.Write(string.Format("({0}  , {1})     Color : {2}\n", i, j, bmp.GetPixel(i, j)));

                //Identify the black points of the image
                if (bmp.GetPixel(i, j) == Color.FromArgb(255, 0,  0, 0))
                {
                    imageData[imagePointer] = 1;
                }
                else
                {
                    imageData[imagePointer] = 0;
                }
                imagePointer++;
            }
            System.Diagnostics.Debug.WriteLine("");
        }
        System.Diagnostics.Debug.WriteLine("Bits  : " + imagePointer );
        return imageData;
    }` 
```

希望这会有所帮助。谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-27T17:20:00.990

**尝试这个**

```
double error = learning.RunEpoch(input, new double[9][] { new double[3] **{ 1, -1, -1 }**,new double[3] **{ -1, 1, -1 }**,new double[3] **{ -1, -1, 1 }**,//A
                new double[3] **{ 1, -1, -1 }**,new double[3] **{ -1, 1, -1 }**,new double[3] **{ -1, -1, 1 }**,//B
                new double[3] **{ 1, -1, -1 }**,new double[3] **{ -1, 1, -1 }**,new double[3] **{ -1, -1, 1 }** }//C

                ); 
```

或者这样

```
double[][] output = new double[patterns][];
            for (int j = 0; j < patterns; j++)
            {
                output[j] = new double[patterns];
                for (int i = 0; i < patterns; i++)
                {
                    if (i != j)
                    {
                        output[j][i] = -1;
                    }
                    else
                    {
                        output[j][i] = 1;
                    }
                }
            }

double error = learning.RunEpoch(input,output)

double[] netout = neuralNet.Compute(pattern);

 int maxIndex = 0;
            double max = netout[0];

            for (int i = 1; i < netout.Length; i++)
            {
                if (netout[i] > max)
                {
                    max = netout[i];
                    maxIndex = i;
                }
            } 
```

**如果 maxIndex=0 答案是 A**

**如果 maxIndex=1 答案是 B**

**如果 maxIndex=2 答案是 C**

我还认为您必须从图像创建矩阵并将其用作图案，例如 20/20 或 15/15 或小，您的 30/30 大。

我使用不同的方式获取图像方案。我将图像分割为 20/20，如果矩形中的一个像素是黑色（或您想要的另一种颜色），则在矩阵中保存 1，否则为 0。

我替换了所有像素，之后我只有两种颜色，白色和黑色，我可以用轮廓进行操作。

```
private void Cmd_ReplaceColors(ref WriteableBitmap Par_WriteableBitmap,int Par_Limit=180)
        {

            for (int y = 0; y < Par_WriteableBitmap.PixelHeight; y++)
            {
                for (int x = 0; x < Par_WriteableBitmap.PixelWidth; x++)
                {

                    Color color = Par_WriteableBitmap.GetPixel(x, y);

                    if (color == Colors.White)
                    {

                    }
                    else
                    {
                        if (color.R < Par_Limit)
                        {
                            Par_WriteableBitmap.SetPixel(x, y, Colors.Black);
                        }
                        else
                        {
                            Par_WriteableBitmap.SetPixel(x, y, Colors.White);
                        }

                    }

                }
            }

            Par_WriteableBitmap.Invalidate();
        } 
```

在我看来 1000 次迭代很小，最好 100 000 :)

# php - 活动流的智能 MySQL GROUP BY

> ID：14004322
> 
> 赞同：28
> 
> 时间：2012-12-22T16:06:39.793
> 
> 标签：php, mysql, social-networking

我正在为我们的网站构建一个活动流，并且在一些运行良好的东西上取得了不错的进展。

它由两个表提供支持：

**流**：

*   `id`- 唯一的流项目 ID
*   `user_id`- 创建流项目的用户 ID
*   `object_type`- 对象类型（当前为“卖家”或“产品”）
*   `object_id`- 对象的内部 ID（当前为卖家 ID 或产品 ID）
*   `action_name`- 对对象采取的行动（当前为“购买”或“心”）
*   `stream_date`- 创建操作的时间戳。
*   `hidden`- 用户是否选择隐藏项目的布尔值。

**如下**：

*   `id`- 唯一的关注 ID
*   `user_id`- 发起“关注”操作的用户 ID。
*   `following_user`- 被关注用户的 ID。
*   `followed`- 执行后续操作的时间戳。

目前我正在使用以下查询从数据库中提取内容：

**询问：**

```
SELECT stream.*,
   COUNT(stream.id) AS rows_in_group,
   GROUP_CONCAT(stream.id) AS in_collection
FROM stream
INNER JOIN follows ON stream.user_id = follows.following_user
WHERE follows.user_id = '1'
  AND stream.hidden = '0'
GROUP BY stream.user_id,
     stream.action_name,
     stream.object_type,
     date(stream.stream_date)
ORDER BY stream.stream_date DESC; 
```

这个查询实际上工作得很好，并且使用一点 PHP 来解析 MySQL 返回的数据，我们可以创建一个很好的活动流，如果操作之间的时间不太长，同一用户的相同类型的操作被分组在一起（见下面的例子）。

![当前流输出示例](../Images/ddf196fc88f4c95902fb6db70011ea68.png)

我的问题是，我怎样才能让它更聪明？目前它按一个轴“用户”活动分组，当特定用户在特定时间范围内有多个项目时，MySQL 知道将它们分组。

我怎样才能使它更智能并按另一个轴分组，例如“object_id”，所以如果按顺序对同一个对象有多个操作，这些项​​目将被分组，但保持我们当前用于按用户分组操作/对象的分组逻辑. 并在没有数据重复的情况下实现这一点？

多个对象依次出现的示例：

![多个对象依次出现](../Images/fbf80c14a14c3b00835ee3234cc9a911.png)

我了解此类问题的解决方案可能会变得非常复杂，非常迅速，但我想知道在 MySQL 中是否有一个优雅且相当简单的解决方案（希望如此）。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-22T17:37:43.977

关于您想要的结果的一些观察：

一些物品是汇总的（杰克斯普拉特有七个卖家），其他物品是逐项列出的（纳尔逊勋爵特许了金鹿）。您可能需要在查询中有一个 UNION，它将来自两个单独子查询的这两类项目组合在一起。

您使用一个相当粗略的时间戳接近函数来对您的项目进行分组`DATE()`......。您可能想要使用更复杂和可调整的方案......像这样，也许

```
 GROUP BY TIMESTAMPDIFF(HOUR,CURRENT_TIME(),stream_date) DIV hourchunk 
```

这将使您可以按年龄组对内容进行分组。例如，如果您使用 48 表示，`hourchunk`您会将 0-48 小时前的内容组合在一起。当您向系统添加流量和操作时，您可能希望减小该`hourchunk`值。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-05T10:43:29.733

我的印象是，您需要像您一样按用户分组，但在分组之后，还需要按操作分组。

在我看来，您需要这样的子查询：

```
SELECT *, -- or whatever columns
   SUM(actions_in_group) AS total_rows_in_group,
   GROUP_CONCAT(in_collection) AS complete_collection
   FROM
     ( SELECT stream.*, -- or whatever columns
          COUNT(stream.id) AS actions_in_user_group,
          GROUP_CONCAT(stream.id) AS actions_in_user_collection
       FROM stream
       INNER JOIN follows
       ON stream.user_id = follows.following_user
       WHERE follows.user_id = '1'
         AND stream.hidden = '0'
       GROUP BY stream.user_id,
            date(stream.stream_date)
     )
   GROUP BY object_id,
            date(stream.stream_date)
   ORDER BY stream.stream_date DESC; 
```

您的初始查询（现在是内部查询）按用户分组，但随后用户组通过相同的操作重新分组 - 即，从一个卖家购买的相同产品或销售将放在一起。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-05-30T12:59:50.780

在 Fashiolista，我们已经开源了我们构建饲料系统的方法。 [https://github.com/tschellenbach/Feedly](https://github.com/tschellenbach/Feedly) 是目前最大的旨在解决这个问题的开源库。（但用 Python 编写）

构建 Feedly 的同一团队还提供了一个托管 API，可以为您处理复杂性。看看[getstream.io](https://getstream.io)有 PHP、Node、Ruby 和 Python 的客户端。 [https://github.com/tbarbugli/stream-php](https://github.com/tbarbugli/stream-php) 它还提供对您正在寻找的自定义聚合的支持。

另外看看这篇高可扩展性帖子，我们解释了一些涉及的设计决策：http: [//highscalability.com/blog/2013/10/28/design-decisions-for-scaling-your-high-traffic-提要.html](http://highscalability.com/blog/2013/10/28/design-decisions-for-scaling-your-high-traffic-feeds.html)

[本教程](http://www.mellowmorning.com/2013/10/18/scalable-pinterest-tutorial-feedly-redis/)将帮助您使用 Redis 设置像 Pinterest 的提要这样的系统。这很容易上手。

要了解有关提要设计的更多信息，我强烈建议阅读我们基于提要的一些文章：

*   [雅虎研究论文](http://research.yahoo.com/files/sigmod278-silberstein.pdf)
*   [Twitter 2013 基于 Redis](http://highscalability.com/blog/2013/7/8/the-architecture-twitter-uses-to-deal-with-150m-active-users.html)，带有回退
*   [Instagram 上的卡桑德拉](http://planetcassandra.org/blog/post/instagram-making-the-switch-to-cassandra-from-redis-75-instasavings)
*   [Etsy 饲料缩放](http://www.slideshare.net/danmckinley/etsy-activity-feeds-architecture/)
*   [脸书历史](http://www.infoq.com/presentations/Facebook-Software-Stack)
*   [Django 项目](http://justquick.github.com/django-activity-stream/)，具有良好的命名约定。（但仅限数据库）
*   [http://activitystrea.ms/specs/atom/1.0/](http://activitystrea.ms/specs/atom/1.0/)（演员、动词、宾语、目标）
*   [Quora 上关于最佳实践的帖子](http://www.quora.com/What-are-best-practices-for-building-something-like-a-News-Feed?q=news%20feeds)
*   [Quora 扩展社交网络提要](http://www.quora.com/What-are-the-scaling-issues-to-keep-in-mind-while-developing-a-social-network-feed)
*   [Redis 红宝石示例](http://web.archive.org/web/20130525202810/http://blog.waxman.me/how-to-build-a-fast-news-feed-in-redis)
*   [FriendFeed 方法](http://backchannel.org/blog/friendfeed-schemaless-mysql)
*   [Thoonk 设置](http://blog.thoonk.com/)
*   [Twitter的方法](http://www.slideshare.net/nkallen/q-con-3770885)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-09-06T15:34:39.970

我们已经通过使用“物化视图”方法解决了类似的问题——我们正在使用在插入/更新/删除事件时更新的专用表。所有用户活动都登录到此表中，并为简单的选择和呈现做好了准备。

好处是简单快速的选择，缺点是插入/更新/删除有点慢，因为日志表也必须更新。

如果这个系统设计得很好 - 这是一个成功的解决方案。

如果您将 ORM 与 post insert/update/delete 事件（如 Doctrine）一起使用，这很容易实现

# css - “未指定宽度固定”+流体布局

> ID：14004323
> 
> 赞同：0
> 
> 时间：2012-12-22T16:06:47.917
> 
> 标签：css, layout, fluid-layout

这在 2012 年应该很容易：P

我需要做的是并排放置 2 个 div。左边包含一张桌子。右边是一张谷歌地图。

左边的 div 需要尽可能多地扩展以适应表格的宽度（所以它是一个“固定宽度”列，但宽度不是我指定的）。它是固定宽度，因为如果调整浏览器大小，表格会占用相同数量的像素。我不想指定宽度，因为表格可以是任何大小。

正确的 div 需要占用其余的空间。

有人知道怎么做吗？我什至不知道如何在谷歌上搜索这个。我在网上看到的每个“固定/流体”布局都有固定列的*指定宽度*。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T16:44:37.833

试试这个：

**HTML 标记**

```
<div id="container">
    <div class="gmap"></div>
    <div class="table"></div>
</div>​ 
```

**与 CSS**

```
#container {
    position: relative;
}
.table, .gmap {
    position: absolute;
    top: 0;
    height: 300px;
}
.table {
    left: 0;
    right: 150px; /* width of gmap */
}
.gmap {
    right: 0;
    width: 150px;
} 
```

**或使用 jQuery**

```
var containerWidth = jQuery('#container').innerWidth();
var tableWidth = jQuery('.table').outerWidth();

jQuery('.gmap').width(containerWidth -tableWidth); 
```

[​​JSFIDDLE_WITH_CSS](http://jsfiddle.net/nhUDV/) [JSFIDDLE_WITH_JAVASCRIPT](http://jsfiddle.net/gMfX4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T16:10:06.813

CSS怎么样：

```
#firstTable{
    display:inline;
    width:auto;
}

#secondTable{
    display:inline;
    width:auto;
}

#myTable{
    width :"100px"
} 
```

HTML

```
<div id="firstTable"><table id="myTable"><tr><td>Hello World!</td></tr></table></div>
<div id="secondTable"><div id="myMap"></div></div> 
```

# ruby - 如果元素尚不存在，则将元素添加到数组中

> ID：14004325
> 
> 赞同：104
> 
> 时间：2012-12-22T16:07:10.670
> 
> 标签：ruby

我有一个 Ruby 课

```
class MyClass
  attr_writer :item1, :item2
end

my_array = get_array_of_my_class() #my_array is an array of MyClass
unique_array_of_item1 = [] 
```

我想推`MyClass#item1`到`unique_array_of_item1`，但前提是`unique_array_of_item1`还没有包含它`item1`。我知道一个简单的解决方案：只需遍历`my_array`并检查是否`unique_array_of_item1`已经包含当前`item1`。

有没有更有效的解决方案？

* * *

## 回答 #1

> 赞同：146
> 
> 时间：2013-11-05T19:28:15.413

[@Coorasse](https://stackoverflow.com/users/837638/coorasse)有一个[很好的答案](https://stackoverflow.com/a/18331074/293280)，尽管它应该是：

```
my_array | [item] 
```

并`my_array`就地更新：

```
my_array |= [item] 
```

* * *

## 回答 #2

> 赞同：84
> 
> 时间：2012-12-22T16:09:42.733

您可以使用[Set](http://ruby-doc.org/stdlib/libdoc/set/rdoc/Set.html)而不是 Array。

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2012-12-23T02:17:20.797

您无需`my_array`手动迭代。

```
my_array.push(item1) unless my_array.include?(item1) 
```

编辑：

正如 Tombart 在他的评论中指出的那样，使用`Array#include?`效率不是很高。我想说小型阵列的性能影响可以忽略不计，但您可能希望使用`Set`更大的阵列。

* * *

## 回答 #4

> 赞同：34
> 
> 时间：2013-08-20T09:04:54.860

您可以将 item1 转换为数组并加入它们：

```
my_array | [item1] 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-03-14T08:43:59.040

重要的是要记住 Set 类和 | 方法（也称为“Set Union”）将产生一个*唯一*元素数组，如果您不希望重复，这很好，但如果您的原始数组中设计有非唯一元素，这将是一个令人不快的惊喜。

如果您的原始数组中至少有一个您不想丢失的重复元素，那么以提前返回的方式遍历数组是最坏情况 O(n)，这在总体方案中并不算太糟糕.

```
class Array
  def add_if_unique element
    return self if include? element
    push element
  end
end 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-08T17:24:22.207

我不确定这是否是完美的解决方案，但对我有用：

```
 host_group = Array.new if not host_group.kind_of?(Array)
    host_group.push(host) 
```

# html - xhtml 看不到 as text

> ID：14004339
> 
> 赞同：0
> 
> 时间：2012-12-22T16:08:33.830
> 
> 标签：html, xhtml, epub

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T16:10:45.073

You should escape the `<` inside the "code block" as `&lt;`. Or you might be able to enclode the code block in a `<![CDATA[ ... ]]>` block.

# c - 关于多线程实现睡眠理发师时的同步

> ID：14004342
> 
> 赞同：1
> 
> 时间：2012-12-22T16:08:45.690
> 
> 标签：c, multithreading, synchronization, pthreads, posix

您好，我正在实现一个称为睡眠理发师问题的多线程程序。问题是有一个理发店有N把椅子，如果没有顾客理发师就会睡着，每当顾客进入店理发师就会醒来并开始剪顾客的头发。我使用条件变量而不是信号量。问题是我无法得到我期望的输出。

```
 #include <stdlib.h>
    #include <stdio.h>
    #include <pthread.h>
    #include <time.h>

    #define TRUE 1

    pthread_mutex_t mutex;
    pthread_cond_t fill;

    int counter;

    int* buffer;
    int size;

    void* producer(void*);
    void* consumer(void*);

    void initialize_variables();
    void insert(void);
    void remove_item(void);

    int main(int argc, char *argv[]) {

        int random_num;
        int num=0;
        pthread_t barber;

        srand( time(NULL) );

        if(argc!=2){
            printf("Not enough parameters\n");
            exit(0);
        }

        size=atoi(argv[1]);

        initialize_variables();

        pthread_create(&barber,NULL,consumer,NULL);

        while(TRUE){

            pthread_t customer;
            pthread_create(&customer,NULL,producer,NULL);

        }

        printf("Exit the program\n");
        return 0;
    }

    void initialize_variables(){

        int i;

        if(! (buffer=(int*)malloc(size*sizeof(int))) ){
            printf("Error while allocating memory for buffer\n");
            exit(1);
        }

        for(i=0; i<size; i++)
            buffer[i]=0;

        pthread_mutex_init(&mutex,NULL);

        pthread_cond_init(&empty, NULL);
        pthread_cond_init(&fill, NULL);

        counter = 0;
    }

  void* producer(void* arg){

    pthread_mutex_lock(&mutex);

        while(counter==size)
            pthread_cond_wait(&empty,&mutex);

        printf("One Customer has arrived and sit on the  #%d chair\n", counter);
        insert();
        sleep(1);
        pthread_cond_signal(&fill);

    pthread_mutex_unlock(&mutex);

    pthread_exit(NULL);
}

void* consumer(void* arg){

    while(TRUE){

        pthread_mutex_lock(&mutex);

            while(counter==0){
                printf("Barber is sleeping now\n");
                pthread_cond_wait(&fill,&mutex);
            }

            remove_item();
            sleep(1);
            pthread_cond_broadcast(&empty);

        pthread_mutex_unlock(&mutex);

    }
}

void insert(void){

    buffer[counter]=1;
    counter++;
}

void remove_item(void){

    buffer[counter]=0;
    printf("The barber is started to cut the hair of the customer at chair #%d\n", counter);
    counter--;
} 
```

此外，当我开始编程输出时应该`"Barber is sleeping now"`首先打印，但是主线程首先开始运行生产者线程，然后当计数器等于 0 时它打印`"Barber is sleeping now"`你能帮我解释为什么序列开始错误吗？另一个问题是主线程填满整个缓冲区并开始倒计时（这意味着理发师将在商店满员后开始他的工作。这是一个输出示例，将为您说明。并假设缓冲区大小为 10。

```
One Customer has arrived and sit on the  #0 chair
One Customer has arrived and sit on the  #1 chair
One Customer has arrived and sit on the  #2 chair
One Customer has arrived and sit on the  #3 chair
One Customer has arrived and sit on the  #4 chair
One Customer has arrived and sit on the  #5 chair
One Customer has arrived and sit on the  #6 chair
One Customer has arrived and sit on the  #7 chair
One Customer has arrived and sit on the  #8 chair
One Customer has arrived and sit on the  #9 chair
The barber is started to cut the hair of the customer at chair #10
The barber is started to cut the hair of the customer at chair #9
The barber is started to cut the hair of the customer at chair #8
The barber is started to cut the hair of the customer at chair #7
The barber is started to cut the hair of the customer at chair #6
The barber is started to cut the hair of the customer at chair #5
The barber is started to cut the hair of the customer at chair #4
The barber is started to cut the hair of the customer at chair #3
The barber is started to cut the hair of the customer at chair #2
The barber is started to cut the hair of the customer at chair #1
Barber is sleeping now
One Customer has arrived and sit on the  #0 chair 
```

我将不胜感激每一个回复，无论如何谢谢

编辑：第一个代码无法正常工作，对此我感到抱歉，我更新了真正的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T16:33:19.913

您不能假设任何线程将执行的顺序。这是出乎意料的行为，它不是确定性的。如果您需要确保一个线程先于另一个线程启动。使用互斥锁或信号量。

# c++ - c++中没有名字的模板类

> ID：14004343
> 
> 赞同：0
> 
> 时间：2012-12-22T16:08:54.617
> 
> 标签：c++

我有两个并行类，一个解析 .xlsx 文件，一个解析 xls 文件。我自己编写了 xlsx 解析器，但继承自另一个 xls 解析器以使其适合我的类模型。到现在为止还挺好。

两个类最终都使用同一段代码，使用 rapidjson 创建一个 json 数组以插入到数据库中。但是，在xlsx端，一切正常，但在xls端，包含和使用rapidjson库会导致以下错误：

```
excelparser/lib/rapidjson/rapidjson.h:370:1: error: template class without a name 
```

即使我从 xls.cpp 中删除所有代码并且只在 xls.h 中留下一个简单的#include，我也会遇到同样的错误。

头文件中的行是：

```
//! UTF-16 encoding.
/*! http://en.wikipedia.org/wiki/UTF-16
    \tparam CharType Type for storing 16-bit UTF-16 data. Default is wchar_t. C++11 may use char16_t instead.
    \implements Encoding
*/
template<typename CharType = wchar_t>
struct UTF16 {                                    // <-- Line 370
    typedef CharType Ch;

    static Ch* Encode(Ch* buffer, unsigned codepoint) {
        if (codepoint <= 0xFFFF) {
            RAPIDJSON_ASSERT(codepoint < 0xD800 || codepoint > 0xDFFF); // Code point itself cannot be surrogate pair 
            *buffer++ = static_cast<Ch>(codepoint);
        }
        else {
            RAPIDJSON_ASSERT(codepoint <= 0x10FFFF);
            unsigned v = codepoint - 0x10000;
            *buffer++ = static_cast<Ch>((v >> 10) + 0xD800);
            *buffer++ = (v & 0x3FF) + 0xDC00;
        }
        return buffer;
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T17:16:46.600

问题的根本原因是外部 xls 解析器正在使用`UTF16`扩展为空字符串的宏。

这个结论可以通过以下推演过程得出：

*   xls 和 xlsx 解析器都使用`rapidjson.h`头文件，但只有 xls 解析器（使用外部库）有问题，因此外部库是一个促成因素。
*   来自编译器的错误消息表明文本`UTF16`不知何故消失了。
*   代码片段

    ```
    #ifdef UTF16
    #error
    #endif 
    ```

    由于`#error`指令跳闸而产生错误。这两个都表明具有该名称的预处理器 marco`UTF16`正在发挥作用。

有几种方法可以解决这些类型的错误：

*   重新排序`#include`指令，以使导致宏存在的标头包含在`rapidjson.h`.
*   将行添加到`rapidjson.h`标题的开头

    ```
    #undef UTF16 
    ```

    以确保在处理文件时宏不存在。

请注意，包含保护无法解决此类问题，因为它是由两个不同的标头（甚至来自不同的库）之间的干扰引起的，而不是因为单个标头被多次使用（这是标头保护保护您的原因）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T16:54:22.577

我将在这里为后代写这个，并将其归结为缺乏经验。

我完全忘记的关键细节是，由于指针相关的原因，这两个类都继承了一个名为电子表格的纯虚拟类。

将 #include "rapidjson.h" 添加到 spreadsheet.h 并将其从 xls.h 和 xlsx.h 中删除即可解决问题。

我不明白的是，我认为包括警卫应该防止这种情况发生。

# c++ - c++内在类型之间的隐式类型转换

> ID：14004346
> 
> 赞同：1
> 
> 时间：2012-12-22T16:08:56.437
> 
> 标签：c++, type-conversion

在内部类型的 C++ 二元运算符中，两个操作数应该具有相同的类型，如果不是，则其中一个操作数将根据层次结构转换为另一个操作数的类型：

```
long double
double
float
unsigned long long int
long long int
unsigned long int
long int
unsigned int
int 
```

我的问题是：为什么`unsigned T`比`T`. 它只是一个任意的选择，还是转换`T`成`Unsigned T`而不是相反有一些优势。

**更新：**

```
//where `unsigned int` to `int` work better.
int a=-3;
unsigned int b=3;
cout << a+b; /* this will output the right result if b get converted to int,
which is not what really happen.*/ 
```

* * *

```
//where `int` to `unsigned int` work better.
int a=3;
unsigned int b=pow(2,20);
cout << a+b; /* this will output the right result if a get converted to unsigned int,
which is fortunately what really happen.*/ 
```

因此，我看不出与其他方式相比，convering `T`to`Unsigned T`具有更多优势。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T16:43:24.747

它本质上是一个任意的选择，可以追溯到 C 的早期。

据我所知，在准标准 K&R C 中，规则基本上是，如果运算符的操作数具有无符号类型，则结果也将是无符号的（这称为无符号保留）。

当 C 标准化时，该规则更改为 C 和 C++ 目前使用的规则，允许删除无符号属性，只要值可以在目标类型中表示（这称为值保留）。原因是新规则在执行混合有符号/无符号算术时为毫无戒心的程序员提供了更少的惊喜。

从`T`to的转换`unsigned T`可以有两种解释：

1.  它是旧（未签名保留）规则的延续。
2.  这是唯一明智的做法，它不需要比`unsigned long long`以下内容更大的类型：`1ULL > -1LL`，因为始终定义有符号到无符号的转换（凭借无符号整数的环绕特性），但反向转换不是.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T16:14:14.017

我猜逻辑是因为 MSB 用于符号，所以实际大小`int`比 of 小 1 位。`unsigned int`因此，有符号变量的绝对值范围是无符号变量范围的一半。

# jquery - 如何从php获取变量ID到jquery

> ID：14004352
> 
> 赞同：-4
> 
> 时间：2012-12-22T16:09:40.637
> 
> 标签：jquery

这是我有史以来的第一个问题。我寻找解决方案一周，虽然我尝试了很多方法，但仍然不起作用。

我不知道如何从 php 获取变量 ID 到 jquery；在我下面的短代码：

```
 $(document).ready(function(){

    var ID = $(this).attr('id');   //here I would like to get <?php echo $id; ?>

        $('#itemCode_'+ ID ).autocomplete({
            source: 'data/item-data.php',
            minLength: 1,
            select: function(event, ui) {

var ID = $(this).attr('id');

    $(this).closest('tr').find('#itemCode_' + ID).val(ui.item.itemCode);    
    $(this).closest('tr').find('#itemDut').val(ui.item.itemDut);
    $(this).closest('tr').find('#itemDesc').val(ui.item.itemDesc);

       $('#itemQty').focus();

      return false;   } 
```

下面是我的 php 乘以 loom while($row=mysql_fetch_array($sql))

```
<tr class="item-row">
<td><input id="itemCode_<?php echo $id; ?>" name="itemCode[]" class="itemCode" value="<?php echo $part_nr;?>"  ></td>
<td><input name="itemDut[]" value="<?php  echo $itemDut;?>"  ></td>
<td><input name="itemDesc[]" value="<?php  echo $forecast;?>"  ></td>
</tr> 
```

请帮我找到解决方案，但我真的被卡住了。我想补充一点，我也尝试使用 . 班级。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T16:12:04.980

```
var ID = $('.itemCode').prop('id').split('_')[1]; 
```

获取该类的唯一项目`itemCode`。获取其 ID (itemCode_ID)。拆分在`_`. 获取第二部分；身份证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T16:23:55.610

假设您有多个需要自动完成的行，您可以通过为每个不同的输入添加一个公共类来简化这一点

```
<td><input class="itemCode" id="itemCode_<?php echo $id; ?>" name="itemCode[]" value="<?php echo $part_nr;?>"  ></td>
<td><input class="itemDut" name="itemDut[]" value="<?php  echo $itemDut;?>"  ></td>
<td><input class="itemDesc" name="itemDesc[]" value="<?php  echo $forecast;?>"  ></td> 
```

现在为整个类调用 autocomplete`itemCode`并在 select 事件中搜索相应的类。

进行此遍历或调用自动完成初始化不需要 ID：

```
 $(document).ready(function() {

    $('.itemCode').autocomplete({
        source: 'data/item-data.php',
        minLength: 1,
        select: function(event, ui) {

            $(this).closest('tr').find('.itemCode').val(ui.item.itemCode);
            $(this).closest('tr').find('.itemDut').val(ui.item.itemDut);
            $(this).closest('tr').find('.itemDesc').val(ui.item.itemDesc);

            $('#itemQty').focus();

            return false;
        }
    })
  }) 
```

# v8 - v8::FunctionTemplate 引用非全局变量

> ID：14004361
> 
> 赞同：5
> 
> 时间：2012-12-22T16:10:31.250
> 
> 标签：v8, embedded-v8

Google 的 v8 文档描述了如何将全局函数添加到 JavaScript 上下文。我们可以使用 C++11 中的新 lambda 特性轻松实现类似 printf 的函数：

```
Handle<ObjectTemplate> global = ObjectTemplate::New();
global->Set(String::New("print"), FunctionTemplate::New(
[](const v8::Arguments &args) -> v8::Handle<v8::Value>
{
  v8::String::AsciiValue ascii(args[0]);
  std::cout << *ascii << "\n";
} ));
Persistent<Context> context = Context::New(NULL, global); 
```

这适用于任何无状态或引用全局 C++ 变量（即`std::cout`）的全局 JavaScript 函数。但是如果我们希望我们的全局 JavaScript 函数引用一个非全局 C++ 变量呢？例如，假设我们正在创建几个不同的 JavaScript 上下文，每个上下文都有自己的`print`使用不同 C++ 的全局函数`std::ostream`？如果 v8 函数模板使用`std::function`对象而不是函数指针，我们会这样做：

```
Persistent<Context> create_context(std::ostream &out)
{
  Handle<ObjectTemplate> global = ObjectTemplate::New();
  global->Set(String::New("print"), FunctionTemplate::New(
  [&out](const v8::Arguments &args) -> v8::Handle<v8::Value>
  {
    v8::String::AsciiValue ascii(args[0]);
    out << *ascii << "\n";
  } ));
  return Context::New(NULL, global);
} 
```

不幸的是，v8 似乎不支持这一点。我假设（希望？）v8 有一种做功能等效的方法，但我发现自己被 Doxygen 迷惑了`v8::FunctionTemplate`。尝试过类似事情的人会愿意将这个过程提炼成更容易理解的东西吗？我还想了解如何创建绑定到现有的 C++ 对象的非全局实例的 JavaScript 对象的全局实例。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-22T21:40:22.560

在回答我自己的问题时......关键是要意识到 v8::Arguments 不仅仅是一个参数数组。它还包含非常有用的`Callee()`和`Data()`方法。如果该函数是 JavaScript 对象的方法，那么`Callee()`我认为可以用于获取调用该方法的该对象的任何实例。然后可以将有用的状态信息存储在对象实例中。`void*`在将函数模板添加到对象时，您还可以提供数据句柄，该句柄可以通过 指向任何 C++对象。然后可以通过该`Data()`方法访问这个特定于函数的数据句柄。

下面是一个相当完整的示例，说明我在使用`v8::Arguments::Data()`. 希望这对任何想做类似事情的人都有用。如果您有自己喜欢的替代策略（并且我确信这样做的方法不止一种），请随时将其添加到另一个答案中！

```
#include <iostream>
#include <ostream>
#include <v8.h>

// add print() function to an object template
void add_print(v8::Handle<v8::ObjectTemplate>& ot, std::ostream* out)
{
  // add function template to ot
  ot->Set(v8::String::New("print"), v8::FunctionTemplate::New(
    // parameter 1 is the function callback (implemented here as a lambda)
    [](const v8::Arguments& args)->v8::Handle<v8::Value>
    {
      // recover our pointer to an std::ostream from the
      // function template's data handle
      v8::Handle<v8::External> data = v8::Handle<v8::External>::Cast(args.Data());
      std::ostream* out = static_cast<std::ostream*>(data->Value());

      // verify that we have the correct number of function arguments
      if ( args.Length() != 1 )
        return v8::ThrowException(v8::String::New("Too many arguments to print()."));

      // print the ascii representation of the argument to the output stream
      v8::String::AsciiValue ascii(args[0]);
      *out << *ascii << "\n";

      // like 'return void;' only in JavaScript
      return v8::Undefined();
    },

    // parameter 2 is the data handle with the pointer to an std::ostream
    v8::External::New(out)
  ));
}

int main()
{
  // create a stack-allocated handle scope
  v8::HandleScope handle_scope;

  // create a global template
  v8::Local<v8::ObjectTemplate> global = v8::ObjectTemplate::New();

  // add a print() function using std::cout to the global template
  add_print(global, &std::cout);

  // create a context
  v8::Persistent<v8::Context> context = v8::Context::New(nullptr, global);

  // enter the created context
  v8::Context::Scope context_scope(context);

  // create a string containing the JavaScript source code
  v8::Local<v8::String> source = v8::String::New("print('1 + 1 = ' + (1 + 1));");

  // compile the source code
  v8::Local<v8::Script> script = v8::Script::Compile(source);

  // run the script
  script->Run();

  // dispose of the persistent context
  context.Dispose();

  return 0;
} 
```

# windows-8 - 系统启动时的 WinRT 动态磁贴

> ID：14004368
> 
> 赞同：0
> 
> 时间：2012-12-22T16:10:53.123
> 
> 标签：windows-8, windows-runtime, live-tile

我有一个实时磁贴，它可以更新有多少用户在线以及在应用程序中打开了多少大厅。当我的应用程序失去可见性时，它开始更新（在应用程序运行时更新动态磁贴毫无意义），但我希望它在我第一次打开计算机时更新。

我环顾四周，并提到让应用程序成为锁屏应用程序，但仅此而已，没有解释如何做到这一点。

有谁知道如何做到这一点并提供一个很好的小解释或如何做到这一点的链接？

非常感谢，凯文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T16:37:23.767

您的假设是正确的，您需要锁定屏幕功能才能运行后台任务，而无需启动您的应用程序一次。主要过程是将应用程序中获取数据的部分提取到可能由计时器触发的后台任务中，并编写一些代码以显示在锁定屏幕上。

当我第一次遇到这个限制时，我有点惊讶，但就电池性能而言，这个设计决定是有道理的：只有在数据绝对值得时才消耗电池电量。如果值得，将它放在锁定屏幕上也很有趣。

在[MSDN](http://msdn.microsoft.com/en-us/library/windows/apps/Hh779720.aspx)上有一个关于锁屏的很好的概述以及进一步的阅读链接。这比我在这里输入的要好得多。回来解决与实现相关的问题（实际上更符合 SO 的目的）。这个[博客](http://blogs.msdn.com/b/windowsappdev/archive/2012/05/24/being-productive-in-the-background-background-tasks.aspx)也可能有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T16:55:56.433

对于这种行为，您应该使用推送通知。这个[msdn](http://msdn.microsoft.com/en-gb/library/windows/apps/hh465403.aspx)链接有更多信息：-

> 使用磁贴通知 选择正确的通知方法来更新磁贴 有多种机制可用于更新动态磁贴： 本地 API 调用 使用本地内容的一次性预定通知 推送通知，从云服务器发送 定期通知，这以固定的时间间隔从云服务器中提取信息 使用哪种机制的选择很大程度上取决于您要显示的内容以及更新该内容的频率。大多数应用程序可能会在应用程序启动或应用程序内的状态更改时使用本地 API 调用来更新磁贴。这可确保磁贴在启动和退出时是最新的。选择使用本地通知、推送通知、计划通知或轮询通知，单独或组合使用，完全取决于应用程序。例如，当玩家达到新的高分时，游戏可以使用本地 API 调用来更新图块。同时，同一个游戏应用程序可以使用推送通知向同一个用户发送他们的朋友取得的新高分。

# delphi - 按名称动态创建表单？

> ID：14004373
> 
> 赞同：1
> 
> 时间：2012-12-22T16:11:29.440
> 
> 标签：delphi, delphi-xe3, firemonkey-fm2

有没有办法仅通过名称动态创建表单？这个概念是这样的。我有一个主表单，并且通过一些用户选择，必须创建一些预定义的表单并将其停靠在主表单上的 pagecontols 上的 tabitems 上。我确实知道表单的名称，并且我确实知道何时创建每个表单，但我想知道是否有更好的方法通过单个过程调用来创建这些表单，并且在我的代码中没有所有这些信息.

它的 Delphi XE3 firemonkey，在 win 7 上。

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-23T11:47:28.600

显然在 Firemonkey Delphi 上不会自动注册表单类以按名称使用，因此您首先需要在包含表单类的单元的末尾添加类似这样的内容：

```
unit Form10;
[ ... ]
// Right before the final "end."
initialization
  RegisterFmxClasses([TForm10]);
end. 
```

这将自动注册`TForm10`，因此可以按名称使用。接下来，您可以使用这种代码在运行时通过它的类名创建一个表单：

```
procedure TForm10.Button1Click(Sender: TObject);
var ObjClass: TFmxObjectClass;
    NewForm: TCustomForm;
begin
  ObjClass := TFmxObjectClass(GetClass(ClassName));
  if ObjClass <> nil then
  begin
    NewForm := ObjClass.Create(Self) as TCustomForm;
    if Assigned(NewForm) then
      NewForm.Show;
  end
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T07:04:42.680

*只有当您有一个类引用*时，您才能创建对象。要获取给定字符串名称的某项的类引用，请调用[`FindClass`](http://docwiki.embarcadero.com/VCL/2010/en/Classes.FindClass). 在结果上调用构造函数。在编译器允许您访问所需的构造函数之前，您可能必须将结果类型转换为不同的元类。在 VCL 中，您可以使用`TFormClass`，但普通的 old[`TComponentClass`](http://docwiki.embarcadero.com/Libraries/XE3/en/System.Classes.TComponentClass)也可以，因为所有 FireMonkey 对象都是 ; 的后代`TComponent`。重要的部分是您可以访问正确的构造函数，这就是您需要的构造函数的介绍。

它仅适用于已*注册*的课程。您的表单类应该由 Delphi 自动注册，但如果没有，您可以[`RegisterClasses`](http://docwiki.embarcadero.com/VCL/2010/en/Classes.RegisterClasses)手动调用，或者[`RegisterFmxClasses`](http://docwiki.embarcadero.com/Libraries/XE3/en/FMX.Types.RegisterFmxClasses)如果您需要将类放在组中。

[Delphi.About.com 有一个 VCL 演示。](http://delphi.about.com/library/weekly/aa080905a.htm)

# jquery - 在 HTML 链接中调用 jQuery 选择器？

> ID：14004374
> 
> 赞同：0
> 
> 时间：2012-12-22T16:11:43.317
> 
> 标签：jquery, html

我试图让这些 jQuery 命令稍后通过 html 中的链接执行：

```
 $(document).ready(function(){
                    $('#2wa').click(function() {
                           $('#ownstream').hide();
                           $('#movstream').hide();                               
                           $('#2wastream').fadeIn();                               
                    });
                $(document).ready(function(){                      
                    $('#own').click(function() {
                            $('#2wastream').hide();
                            $('#movstream').hide();
                            $('#ownstream').fadeIn();
                            return false;
                    });
                $(document).ready(function(){
                    $('#mov').click(function() {
                            $('#2wastream').hide();
                            $('#ownstream').hide();                                     
                            $('#movstream').fadeIn();
                            return false;
                    }); 
```

这三个选择器命令应该隐藏两个项目并在显示第二行上的 ID 时显示一个，但是当我单击它时没有任何反应。链接的格式如下：

```
 <a href="test/#" id="own"> 
```

以及这样显示/隐藏的元素：

```
 <div id="ownstream"></div> 
```

对于这些我有两个问题：链接本身没有导致任何更改发生，并且在页面加载时没有发生任何更改，导致所有三个元素都出现。我该如何解决这个问题？另外，我应该将 jquery 脚本放在头部还是身体下方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T16:19:09.033

您应该将您的 jquery 脚本放在您的 head 标签中。然后你可以在它下面的任何地方使用这个代码。

确保您的锚标记具有匹配的 ID 名称，如下所示：

```
<a href="" id="2wa"> 
```

并不是：

```
<a href="" class="2wa"> 
```

对于要在加载时隐藏的链接，请使用以下命令：

```
$(document).ready(function(){
    $('#2wastream').hide();
    $('#ownstream').hide();                                     
}); 
```

或者像这样添加一个 CSS 样式属性：

```
 <a href="" id="2wastream" style="display:none;"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T16:30:00.277

您可以尝试做一些事情来使其正常工作。

确保您的脚本被拉入页面，一种检查方法是使用 Chrome 调试器中的“源”选项卡并在 html 头部分中搜索其他文件

确保在包含 jQuery 之后包含了 datatale 脚本，因为它肯定依赖于它。

检查是否正确包含 jQuery，并且只包含一次。

注意 jQuery 冲突。还有一些其他库覆盖了 $，因此您的代码无法正常工作，因为 $ 不再是 jQuery 的别名。您可以使用 jQuery.noConflict() 来避免与页面上使用相同变量 $ 的其他库发生冲突。

根据您的代码，为什么不将所有代码拉到一个文档中。准备好并正确关闭它，如下所示

```
 $(document).ready(function(){

                    $('#2wa').click(function() {
                           $('#ownstream').hide();
                           $('#movstream').hide();                               
                           $('#2wastream').fadeIn();                               
                    });

                    $('#own').click(function() {
                            $('#2wastream').hide();
                            $('#movstream').hide();
                            $('#ownstream').fadeIn();
                            return false;
                    });

                    $('#mov').click(function() {
                            $('#2wastream').hide();
                            $('#ownstream').hide();                                     
                            $('#movstream').fadeIn();
                            return false;
                    });
}); 
```

最后确保您引用的元素（2wastream、ownstream、movstream）确实与 id 一起存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T16:32:22.417

首先，您没有正确关闭`$(document).ready(function(){` 第二个，您只需要其中一个..不是每个绑定一个..

最后为链接添加一个公共类，例如`stream-opener`

```
<a href="test/#" id="own" class="stream-opener"> 
<a href="test/#" id="mov" class="stream-opener"> 
```

另一个关于显示/隐藏的元素

```
<div id="ownstream" class="stream"></div>
<div id="movstream" class="stream"></div> 
```

并使用这个脚本

```
$(document).ready(function(){
   $('.stream-opener').click(function(e){
       e.preventDefault();
       var targetStream = '#' + this.id + 'stream';
       $('.stream').hide().filter( targetStream ).fadeIn();
   });
}); 
```

# c++ - 为什么这段代码会导致 SIGSEGV（gcc 编译器，cygwin 下的 Android NDK 工具链）？

> ID：14004377
> 
> 赞同：0
> 
> 时间：2012-12-22T16:11:49.663
> 
> 标签：c++, gcc, segmentation-fault

该`TryIt()`函数会导致 SIGSEGV 错误，但仅适用于 GCC 而不是 Visual C：

```
string strs[] = 
{
 "str1",
 "str2",
 "str3",
 ""
};

void Tryit()
{
    int cnt = 0;
    while ( strs[cnt] != "" )
       cnt++;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T18:07:32.993

发布的代码是正确的，假设在构造`TryIt()`后调用。`strs`既然您提到它是从全局对象的构造函数中调用的，那么它可能是在`strs`构造之前调用的。解决方法是包装`strs`一个函数并调用此函数以获取数组的基地址：

```
std::string* strs() {
    static std::string rc[] p {
         ...
    };
    return rc;
} 
```

# java - Java JPanel 绘制形状

> ID：14004382
> 
> 赞同：2
> 
> 时间：2012-12-22T16:12:07.133
> 
> 标签：java, swing, drawing, jpanel, shapes

我是第一次使用 JPanel 并在 JPanel 上绘制基本形状。

我已经为这样的形状编写了代码：

```
public class Shape extends JPanel{

int x,y;

public Shape(int x, int y){
    this.x = x;
    this.y = y;
}

public void paint(Graphics g){
    super.paint(g);
    g.setColor(Color.black);
    g.drawRect(x, y, 20, 20);
    }
} 
```

我有另一堂课，我将使用这个形状。它扩展了 JFrame 并实现了 MouseListener。在这个 JFrame 上，我将 JPanel 简单地称为“面板”。

我有读取鼠标位置并在“面板”上绘制形状的方法。

```
public void mouseClicked(MouseEvent e){
    Shape shape = new Shape(e.getX(),e.getY());
    panel.add(shape);
    panel.revalidate();
    panel.repaint();
} 
```

问题是它没有在我的鼠标所在的坐标上绘制形状。它只是在上面的面板上绘制并将它们绘制成一条线。

谢谢你的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T05:02:04.033

```
public class ShapesPanel extends JPanel {

    private java.util.List shapesList ;

    /**
     * Constructs <code>ShapesPanel</code>
     */
    public ShapesPanel() {
        shapesList = new java.util.ArrayList() ;
        this.addMouseListener(new MouseClickListener())  ;
    }

    /**
     * Creates a shape
     * @param bounds
     * @return
     */
    private Shape createShape( Rectangle bounds ) {
        Shape shape = new Ellipse2D.Double(bounds.x, bounds.y, bounds.width, bounds.height );

/*
        To use the following shapes, you need to have java shapes library, which can
        be downloaded from <a href="http://wwww.jshapes.com">Java Shapes Library</a>
*/
/*
        // To create star shape
        Shape shape = new Star( bounds, 50, Star.STAR_8_POINTS );
        // To create triangle shape
        Shape shape = new Triangle( bounds, Triangle.UP );
        // To create diamond shape
        Shape shape = new Diamond( bounds );
        // To create Parallelogram shape
        Shape shape = new Parallelogram( bounds  );
*/

        return shape ;
    }

    /**
     *  MouseClickListener
     */
    private class MouseClickListener extends MouseAdapter {
        @Override
        public void mouseClicked(MouseEvent e) {
            Point pt = e.getPoint();
            Dimension size = new Dimension(100, 100 );
            Rectangle bounds = new Rectangle(pt.x, pt.y, size.width, size.height );
            Shape shape = createShape(bounds);
            shapesList.add( shape );
            repaint();
        }
    }

    /**
     * Paints the component
     * @param g
     */
    protected void paintComponent(Graphics g) {

        Graphics2D g2 = (Graphics2D) g;
        Rectangle bounds = new Rectangle(0,0,getWidth(), getHeight() );
        g2.setPaint( Color.white );
        g2.fill( bounds );

        for (Iterator iterator = shapesList.iterator(); iterator.hasNext(); ) {
            Shape shape = (Shape) iterator.next();
            g2.setPaint( Color.cyan );
            g2.fill( shape );
            g2.setPaint( Color.black );
            g2.draw( shape );
        }
    }

    /**
     * Driver
     * @param args
     */
    public static void main(String[] args) {
        JFrame frame = new JFrame("Draw Shapes") ;
        frame.getContentPane().add( new ShapesPanel() );
        frame.setSize(600, 600);
        frame.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE);
        frame.setVisible( true );

    }
} 
```

希望这有助于在面板中绘制 java 形状。

# java - 处理是否支持迭代器？

> ID：14004391
> 
> 赞同：4
> 
> 时间：2012-12-22T16:13:30.460
> 
> 标签：java, iterator, processing

我希望在Processing中使用一个hashmap，我希望使用一个迭代器来遍历hashmap中的所有条目。但是，当我希望使用迭代器时，我被告知“找不到名为 Iterator 的类或类型”。部分代码如下所示。

```
Iterator i = nodeTable.entrySet().iterator();  // Get an iterator
while (i.hasNext()) 
{
  Node nodeDisplay = (Node)i.next();
  nodeDisplay.drawSelf();
} 
```

从处理网站[http://processing.org/reference/HashMap.html](http://processing.org/reference/HashMap.html)我知道迭代器可以用来遍历hashmap。但是，我找不到有关迭代器的更多信息。我想知道处理中是否支持迭代器？或者我应该导入一些库以便我能够使用它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T18:04:52.307

只要我解决了问题，我就会把我的部分代码放在这里，以防其他人遇到这个问题。再次感谢您的帮助。

```
import java.util.Iterator;  // Import the class of Iterator
// Class definition and the setup() function are omitted for simplicity

// The iterator is used here
HashMap<String, Node> nodeTable = new HashMap<String, Node>();
void draw(){
    // Part of this function is omitted
    Iterator<Node> i = nodeTable.values().iterator();
    // Here I use the iterator to get the nodes stored the hashtable and I use the function values() here. entrySet() or keySet() can also be used when necessary
    while (i.hasNext()) {
        Node nodeDisplay = (Node)i.next();
        // Now you can use the node from the hashmap
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T17:37:32.400

很高兴您解决了您的问题，但是对于遇到此问题的其他人，如果您想在 上进行迭代`entrySet()`，有两种方法可以做到。第一种方法：

```
import java.util.HashMap;
import java.util.Iterator;
import java.util.Map;
import java.util.Map.Entry;

public class Testing {

    public static void main(String[] args) {
        Map<String, String> strMap = new HashMap<String, String>();
        strMap.put("foo", "bar");
        strMap.put("alpha", "beta");
        for (Iterator<Entry<String, String>> iter = strMap.entrySet().iterator(); iter.hasNext(); )
        {
            Entry<String, String> entry = iter.next();
            System.out.println(entry.getKey() + "=" + entry.getValue());
        }
    }
} 
```

请注意代码顶部的导入，您可能缺少`Iterator`.

第二个：

```
import java.util.HashMap;
import java.util.Map;
import java.util.Map.Entry;

public class Testing {

    public static void main(String[] args) {
        Map<String, String> strMap = new HashMap<String, String>();
        strMap.put("foo", "bar");
        strMap.put("alpha", "beta");
        for (Entry<String, String> entry : strMap.entrySet())
            System.out.println(entry.getKey() + "=" + entry.getValue());
    }
} 
```

这称为[for-each 循环](http://en.wikipedia.org/wiki/Foreach_loop)，`Iterator`完全不需要使用 an 并且使代码更加简单。请注意，这也可以用于数组以消除对索引的需求：

```
String[] strs = {"foo", "bar"};
for (String str : strs)
    System.out.println(str); 
```

# javascript - three.js - 修复管几何的旋转轴

> ID：14004399
> 
> 赞同：0
> 
> 时间：2012-12-22T16:14:19.353
> 
> 标签：javascript, html5-canvas, three.js

我有一个用存储为 JSON 数据的 2000 个点构建的管几何结构。管子也有带（曲线）。我正在使用`TrackBallControls`.

现在，当我旋转管子时，它会在所有三个维度上旋转。旋转不限于任何特定的轴。

我在创建后使用以下代码`tubeMesh`。

```
// to make rotation only on x-axis
var v = new THREE.Vector3(1,0,0).normalize();           
var matrix = new THREE.Matrix4();
tubeMesh.applyMatrix(matrix.makeRotationAxis(v, 0));            
tubeMesh.applyMatrix(matrix.makeTranslation(0,-1500,0));

if ( tube.debug ) tubeMesh.add( tube.debug );
scene.add(tubeMesh); 
```

此代码不起作用，因为管子在所有三个维度上都在旋转。即使我已经尝试过以下问题中定义的功能。

[三.js旋转](https://stackoverflow.com/questions/11060734/how-to-rotate-a-3d-object-on-axis-three-js)

**如何固定旋转轴，使管子仅在指定轴上旋转？**

使用 r53

# c# - 从 windows phone 中的 webservice 读取 json 文件

> ID：14004401
> 
> 赞同：-1
> 
> 时间：2012-12-22T16:14:33.620
> 
> 标签：c#, json, windows-phone-7, data-binding

我对 Windows Phone 应用程序非常陌生。我有一个从以下 URL 获得的 JSON 文件。

```
http://www.krcgenk.be/mobile/json/request/news/ 
```

现在我希望标题显示在我的 Windows Phone 的列表中。为此，我有以下 XAML。

```
<Grid>
    <ListBox x:Name="News" Height="532">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <StackPanel Orientation="Horizontal">
                   <TextBlock Text="{Binding Title}" Margin="0,0,12,0" />
                    <TextBlock Text="{Binding Description}"/>
                </StackPanel>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
</Grid> 
```

现在我需要知道如何将标题和描述放入我的列表中。经过一些谷歌工作后，我发现我应该使用 JSON.net 框架。这给了我以下代码。

```
var w = new WebClient();

Observable
  .FromEvent<DownloadStringCompletedEventArgs>(w, "DownloadStringCompleted")
  .Subscribe(r =>
  {
      var deserialized =
        JsonConvert.DeserializeObject<List<News>>(r.EventArgs.Result);
      PhoneList.ItemsSource = deserialized;
  });
w.DownloadStringAsync(
  new Uri("http://www.krcgenk.be/mobile/json/request/news/")); 
```

我还创建了一个带有 getter 和 setter 的新闻类。但是当我构建和运行时。我收到以下错误。

```
Cannot deserialize the current JSON object (e.g. {"name":"value"}) into 
type 'System.Collections.Generic.List`1[KrcGenk.Classes.News]' because the 
type requires a JSON array (e.g. [1,2,3]) to deserialize correctly.

To fix this error either change the JSON to a JSON array (e.g. [1,2,3]) 
or change the deserialized type so that it is a normal .NET type (e.g. not 
a primitive type like integer, not a collection type like an array or 
List<T>) that can be deserialized from a JSON object. JsonObjectAttribute 
can also be added to the type to force it to deserialize from a JSON object.

Path 'news', line 1, position 8. 
```

希望有人能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T16:24:16.907

看看这篇博文[http://dotnetbyexample.blogspot.gr/2012/01/json-deserialization-with-jsonnet.html](http://dotnetbyexample.blogspot.gr/2012/01/json-deserialization-with-jsonnet.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T16:24:28.430

url 返回一个对象（这就是错误消息所说的）。因此，您不应该将其反序列化为列表。反序列化应如下所示：

```
var deserialized =
                JsonConvert.DeserializeObject<NewsEntry>(r.EventArgs.Result); 
```

NewsEntry 应该包含一个新闻列表

```
class NewsEntry {
    public List<News> News { get; set; }
    public NewsEntry() {
        News = new List<News>();
    }
} 
```

注意：我假设 News 类具有所有属性。也许你需要调整这个。

# sharepoint - SharePoint 2010 解决方案

> ID：14004402
> 
> 赞同：0
> 
> 时间：2012-12-22T16:14:35.130
> 
> 标签：sharepoint

我正在使用 VS 2010 为 SharePoint 2010 创建站点定义。有一些问题：

1.  如何将页面布局限制为我创建的自定义布局？
2.  我创建了一个自定义主页布局。默认情况下，如何根据此页面布局创建页面并将其设置为站点的欢迎页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T03:40:54.070

您的问题中没有说明您的实现方法（声明式或程序式），所以我只是假设您正在以声明方式（使用 CAML）构建自定义站点定义。您会发现以声明方式创建自定义站点定义非常痛苦，尤其是在调试时。它通常涉及对**onet.xml**文件进行更改，并希望在部署和/或站点创建期间一切顺利。

在开发自定义站点定义时，我发现更容易放弃声明性混乱并将自定义功能固定到我的自定义站点定义中，从而允许我使用代码构建站点。Andrew Connell 有一篇关于此效果的博文：

[http://www.andrewconnell.com/blog/archive/2008/02/15/You-dont-need-to-create-site-definitions.aspx](http://www.andrewconnell.com/blog/archive/2008/02/15/You-dont-need-to-create-site-definitions.aspx)

（**免责声明**：是的，它很旧，但在我看来仍然很相关）

现在您的任务是程序化的（允许您调试、记录错误，并且通常对 SharePoint 魔术有更多的可见性），您可以通过 SharePoint 对象模型按照您认为合适的方式初始化新的 SPWeb 对象。

1.  [设置可用的页面布局](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.publishing.publishingweb.setavailablepagelayouts.aspx)。
2.  [将您的自定义页面设置为主页](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spfolder.welcomepage.aspx)（在将其添加到页面库之后）。

也许其他人可以列举 100% 的声明式方法；我敢肯定它很丑，就像大多数 CAML 一样。

# java - 如何将 JSlider 选择的值设置为全局变量？

> ID：14004404
> 
> 赞同：0
> 
> 时间：2012-12-22T16:14:37.640
> 
> 标签：java, swing, global-variables, return, jslider

有谁知道我如何能够在 JSlider 的事件处理程序中发送选定的值，`stateChanged`并将其设置为全局变量？

例如

```
public class Slider extends JPanel {

    public JSlider slider;
    public UserFrame frame;
    public double[] priceRange;

    public static void main(String[] args) throws ClassNotFoundException, SQLException {
        new Slider();
    }

    public Slider() throws ClassNotFoundException, SQLException {
        slider = new JSlider();
        priceRange = new double[2];

        slider.setBorder(BorderFactory.createTitledBorder("Maximum Price in SEK"));

    /*
     * The minimum and maximum values are queried from the database. Those
     * values are then rounded up (maximum) to the nearest 10 SEK.
     * For example, if the minimum is 67 SEK and the maximum 95 SEK, then
     * the displayed range is [70, 100].
     */
        int min = (getMinimumPrice() / 10) * 10 + 10;
        int max = (getMaximumPrice() / 10) * 10 + 10;

        slider.setMajorTickSpacing(10);
        slider.setMinorTickSpacing(5);
        slider.setMinimum(min);
        slider.setMaximum(max);
        slider.setPaintTicks(true);
        slider.setPaintLabels(true);
        add(slider);
    }

    public void stateChanged(ChangeEvent e) {
        JSlider source = (JSlider)e.getSource();
        if (!source.getValueIsAdjusting()) {
            slider.getModel().setValue(slider.getModel().getValue());
            priceRange[0] = slider.getModel().getValue();
        }
    }
} 
```

...等等，忽略这些方法`getMinimum`，`getMaximum`它们只是检索我数据库中的最高值和最低值，但是可以说，当用户释放 JSlider 旋钮时，我想要发生的只是将其设置为`priceRange[0]`. 我怎么能做到这一点？我尝试创建一个模型并设置它，每次使用 stateChanged 我也在我的主要代码集中的 actionListener 之外分配类似的东西......

```
priceRange[0] = slider.getModel().getValue(); 
```

然后打印出该结果并获得我设置的最小值。

我真的很感激任何进一步的建议。

有一个伟大的即将到来的假期！:)

一切顺利，马库斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T17:18:54.480

只需删除这些行：

```
slider.getModel().setValue(slider.getModel().getValue());
priceRange[0] = slider.getModel().getValue(); 
```

并插入这个：

```
priceRange[0] = (double)slider.getValue(); 
```

祝你好运！

PS你在哪里实现了你的`ChangeListener`接口？

# php - 使用 PHP 将图像添加到 MySQL 数据库中

> ID：14004405
> 
> 赞同：-4
> 
> 时间：2012-12-22T16:14:40.357
> 
> 标签：php, mysql

将图像添加到 MySQL 数据库的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T16:17:01.817

不要添加它。将图像存储在服务器上的文件夹中，然后添加文件的路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T16:16:51.397

存储图像的数据是一个坏主意。它体积庞大，一旦检索到数据，就必须对其重新编码以生成图像。最简单的方法是将图像存储在您的服务器上，并将位置存储在数据库中。然后你可以使用你的行来指向图像。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T16:18:41.763

最好的方法显然是**不要**将图像添加到 MySQL 数据库
中。这种不自然的东西可以使用的情况很少，而在 Web 开发领域中则没有。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T16:21:29.430

以前的答案说不存储图像。如果您仍然选择这样做，请查看用于大数据块的 BLOB。

# java - com.mysql.jdbc.Driver 怎么办？

> ID：14004413
> 
> 赞同：0
> 
> 时间：2012-12-22T16:17:09.350
> 
> 标签：java, mysql-connector

当我尝试启动我们的 java 服务器时，我得到了这个：java.lang.ClassNotFoundException: com.mysql.jdbc.Driver

但是我在脚本所在的同一文件夹中有 mysql-connector-java-5.1.22-bin.jar，并在我运行脚本时进行此操作：

```
 java -cp mysql-connector-java-5.1.22-bin.jar  -jar AvatarServer.jar 
```

但仍然得到这个。该怎么办？我正在使用 af CentOS 服务器。

```
 root@host [/home/nagoom/Server_Example]# java -cp mysql-connector-java-5.1.22-bin.jar       -jar AvatarServer.jar
 ************************
  **  FIRING UP SERVER! **
  ************************
   Running MySQLChatMessageSaver
   java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:169)
at database.DatabaseConnection.connect(DatabaseConnection.java:13)
at items.ItemsDatabase.DownloadData(ItemsDatabase.java:35)
at items.ItemsDatabase.InitializeData(ItemsDatabase.java:24)
at network.SocketHandler.startListening(SocketHandler.java:84)
at server.AvatarServer.run(AvatarServer.java:44)
 java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:169)
at database.DatabaseConnection.connect(DatabaseConnection.java:13)
at gameInstances.RoomController.DownloadRoomData(RoomController.java:46)
at gameInstances.RoomController.InitializeRooms(RoomController.java:32)
at network.SocketHandler.startListening(SocketHandler.java:85)
at server.AvatarServer.run(AvatarServer.java:44)
  java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:169)
at database.DatabaseConnection.connect(DatabaseConnection.java:13)
at gameInstances.RoomController.LoadLockedSeatsForAll(RoomController.java:121)
at gameInstances.RoomController.InitializeRooms(RoomController.java:33)
at network.SocketHandler.startListening(SocketHandler.java:85)
at server.AvatarServer.run(AvatarServer.java:44)
 java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:169)
at database.DatabaseConnection.connect(DatabaseConnection.java:13)
at gameInstances.RoomController.DownloadApartmentData(RoomController.java:89)
at gameInstances.RoomController.InitializeRooms(RoomController.java:34)
at network.SocketHandler.startListening(SocketHandler.java:85)
at server.AvatarServer.run(AvatarServer.java:44)
    java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:169)
at database.DatabaseConnection.connect(DatabaseConnection.java:13)
at gameInstances.RoomController.LoadItemsForAllRooms(RoomController.java:160)
at gameInstances.RoomController.InitializeRooms(RoomController.java:35)
at network.SocketHandler.startListening(SocketHandler.java:85)
at server.AvatarServer.run(AvatarServer.java:44)
    java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:169)
at database.DatabaseConnection.connect(DatabaseConnection.java:13)
at clothes.ClothesDatabase.DownloadGraphicsData(ClothesDatabase.java:42)
at clothes.ClothesDatabase.InitializeGraphics(ClothesDatabase.java:31)
at network.SocketHandler.startListening(SocketHandler.java:86)
at server.AvatarServer.run(AvatarServer.java:44)
      MySQL exception: java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
     MySQL exception: java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
      java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:169)
at database.DatabaseConnection.connect(DatabaseConnection.java:13)
at moods.MoodsDatabase.DownloadData(MoodsDatabase.java:29)
at moods.MoodsDatabase.InitializeData(MoodsDatabase.java:16)
at network.SocketHandler.startListening(SocketHandler.java:89)
at server.AvatarServer.run(AvatarServer.java:44)
     java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:169)
at database.DatabaseConnection.connect(DatabaseConnection.java:13)
at robots.RobotHandler.downloadBots(RobotHandler.java:31)
at network.SocketHandler.startListening(SocketHandler.java:90)
at server.AvatarServer.run(AvatarServer.java:44)
     java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:169)
at database.DatabaseConnection.connect(DatabaseConnection.java:13)
at levels.LevelDatabase.DownloadData(LevelDatabase.java:21)
at network.SocketHandler.startListening(SocketHandler.java:91)
at server.AvatarServer.run(AvatarServer.java:44)
    java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:169)
at database.DatabaseConnection.connect(DatabaseConnection.java:13)
at network.SocketHandler.resetOnlineStatuses(SocketHandler.java:172)
at network.SocketHandler.startListening(SocketHandler.java:93)
at server.AvatarServer.run(AvatarServer.java:44) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T16:21:54.390

`-jar`并且`-cp`是互斥的。`-jar`说：类路径是以下 jar，以及其清单文件中引用的所有库。所以你必须使用：

```
java -cp mysql-connector-java-5.1.22-bin.jar;AvatarServer.jar com.foo.bar.AvatarMainClass 
```

或者，如果您想使用 运行您的应用程序`-jar`，请参考 jar 清单文件中的 mysql 驱动程序 jar，如[jar 教程中所述](http://docs.oracle.com/javase/tutorial/deployment/jar/downman.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T16:23:13.230

添加`mysql-connector-java-5.1.22-bin.jar`到**MANIFEST.MF**文件中的类路径`AvatarServer.jar`。例子：

```
Class-Path: mysql-connector-java-5.1.22-bin.jar 
```

# php - PDO 异常找不到驱动程序

> ID：14004421
> 
> 赞同：2
> 
> 时间：2012-12-22T16:18:22.597
> 
> 标签：php, postgresql, symfony, pdo, mamp

我知道这个问题已经被问了一千次了，但我找不到解决办法。我正在使用**PostgreSql数据库运行****Symfony 2**（在 MAMP 中运行 php，在另一个端口上运行 PG DB 并安装）。

 **我运行良好（可以使用 app/console create cmd 安装数据库）但是现在我不能再使用它来更新架构了。得到错误：

```
PDO Exception, could not find driver error 
```

我尝试了一切：

*   php.ini 验证：OK
*   `CLI`在and中使用相同的`phpInfo();`
*   phpInfo 中的 PDO 验证：为 pgSQL mySQL 等启用了驱动程序...
*   重新启动 Mamp + OSX apache 服务器：好的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T13:04:08.887

找到了一个解决方案，我只是在我的 .bash_profile 中为服务器使用的 php 创建了一个别名，以确保 CLI 将使用好的那个。

# 别名 PHP -> Mamp CLI

别名 phpmamp='/Applications/MAMP/bin/php/php5.4.4/bin/php'

现在它起作用了。**

# android - 带有叠加层的 Android 可缩放/可滚动 ImageView

> ID：14004424
> 
> 赞同：18
> 
> 时间：2012-12-22T16:18:28.337
> 
> 标签：android, android-layout, android-webview, android-imageview

我想显示图像（包括滚动和缩放功能）。此外，我需要动态地为图像添加一些叠加层。叠加层与图像中的内容有关。

*   如果用户滚动，覆盖也应该移动
*   如果用户缩放，则不应缩放叠加层，而是保持它们与图像的相对位置

换句话说：我想实现一个带有一些标记的地图，但我提供了我自己的地图材料。

我的主要问题是：我怎么能这样做？

**到目前为止我尝试过的**

*   我尝试在[WebView](http://developer.android.com/reference/android/webkit/WebView.html)中实现它，因为它提供了基本的缩放和缩放功能。但是，在不使用 Javascript 和 HTML 的情况下，我没有成功添加叠加层（我认为这不是解决问题的一种非常方便的方法）
*   有些项目（即[TouchImageView](https://github.com/MikeOrtiz/TouchImageView/blob/master/src/com/example/touch/TouchImageView.java)）正在实现滚动/缩放功能，但从我的角度来看，它们使添加自己的叠加功能变得更加困难。

**问题**

我的问题有简单的解决方案或方法吗？

在 Android 运行时添加和移动视图的正确方法是什么？（通常，我会使用基本布局并使用边距 - 这是最佳实践吗？）

请有人指出我正确的方向。

分钟。API 级别：10

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T06:09:20.550

我建议扩展`View`类和覆盖`onDraw`方法。看看[Canvas API](http://developer.android.com/reference/android/graphics/Canvas.html)。

您可能会有一个如下所示的 onDraw 方法：

```
@Override
public void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    canvas.save();
    canvas.translate(mPosX, mPosY); //position of your actual data
    canvas.scale(mScaleFactor, mScaleFactor); // zoom factor
    map.draw(canvas); //you draw your map here
    canvas.restore(); //go back to saved state 
    //for each marker you have, do the same "save - translate - scale - draw" loop        
} 
```

由于您不需要标记可缩放，因此您可能不需要缩放步长，但您需要正确计算它们的位置。

根据您的对象数量等，您可能需要采用更优化的方式来绘制标记（例如，仅重新绘制更改的矩形区域）。见[View.invalidate(Rect)](http://developer.android.com/reference/android/view/View.html#invalidate%28android.graphics.Rect%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T17:40:18.890

我认为这个可以帮助你

参考这个项目[链接](https://github.com/blessenm/SlideshowDemo)

当您单击它时，它会自动滚动图像并缩放图像。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T13:05:43.233

您是否尝试过继承 View 并处理自己的用户手势？对于此类复杂行为，这是我的首选。它应该看起来像这样：

*   在扩展 View 的类中，您应该在创建时将所需的图像和叠加层实例化为位图对象
*   OnScroll 事件，您将计算滚动后图像和叠加层应该如何，刷新位图并使当前视图无效
*   使用 GestureDetector，您可以处理捏合事件并将放大/缩小事件视为滚动事件
*   请记住在更改位图后始终调用 invalidate
*   在 onDraw 方法期间绘制位图

StackOverflow 上有大量关于这些单独任务的材料，如果您在其中任何一个方面需要额外帮助，请告诉我。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T12:03:32.983

查看此示例项目[https://github.com/jzafrila/AndroidImageHostpot](https://github.com/jzafrilla/AndroidImageHostpot)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-07T13:40:07.247

找了半天，找到了我的解决方案的确切答案：[TileView](https://github.com/moagrius/TileView)

**设置地图视图：**

```
@Override
protected void onCreate( Bundle savedInstanceState ) {
  super.onCreate( savedInstanceState );
  TileView tileView = new TileView( this );
  tileView.setSize( 2000, 3000 );  // the original size of the untiled image
  tileView.addDetailLevel( 1f, "tile-%d-%d.png");
  setContentView( tileView );
} 
```

**添加标记：**

```
tileView.addMarker( someView, 250, 500, -0.5f, -1.0f ); 
```

文档中的代码。

# iphone - 使用 UIImagePickerController 从手机中删除照片

> ID：14004426
> 
> 赞同：1
> 
> 时间：2012-12-22T16:18:40.623
> 
> 标签：iphone, ios

该文档表明：从库或相机胶卷中选择一张照片并在用户许可下删除。

这可能使用`UIImagePickerController`吗？还是用户必须明确删除所选照片？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T16:23:29.687

无论您使用什么来尝试完成它，这都是不可能的。UIImagePickerController 仅用于选择照片，不会以任何方式修改它们。更有前途的方法是使用[资产库](http://developer.apple.com/library/ios/#documentation/AssetsLibrary/Reference/AssetsLibraryFramework/_index.html)，但即使使用此框架，您也无法删除用户照片。话虽如此，如果您想在您的应用程序中使用此功能，它必须仅适用于越狱设备。

简而言之，用户必须导航到照片应用程序并自己删除图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-26T19:14:25.793

感谢 iOS 8 照片框架，您现在可以从用户库中删除图像！我建议您查看[使用照片框架](https://developer.apple.com/library/ios/samplecode/UsingPhotosFramework/Introduction/Intro.html#//apple_ref/doc/uid/TP40014575-Intro-DontLinkElementID_2)的 Apple 示例应用程序，以获取有关如何使用它的更详细示例，但相关的部分是：

```
//under SamplePhotosApp/AAPLAssetViewController.m

// Delete asset from library
[[PHPhotoLibrary sharedPhotoLibrary] performChanges:^{
    [PHAssetChangeRequest deleteAssets:@[self.asset]];
} completionHandler:completionHandler]; 
```

哪里`self.asset`是指您要删除的照片的`PHAsset`对象（[可以通过多种方式获取）。](https://developer.apple.com/library/IOs/documentation/Photos/Reference/PHAsset_Class/index.html#//apple_ref/occ/clm/PHAsset/fetchAssetsWithALAssetURLs:options:)哦，别忘了导入照片框架！

希望这可以帮助！

# asp.net - 是否可以创建一个选择另一个母版页的母版页？

> ID：14004429
> 
> 赞同：1
> 
> 时间：2012-12-22T16:19:13.080
> 
> 标签：asp.net, master-pages

我有一个带有 name 的母版页`MasterPage.master`。

现在我想创建另一个母版页 ( `MasterPage2.master`)，它`MasterPageFile`是`MasterPage.master`，但是当我创建`MasterPage2`然后创建一个 web 表单时`MasterPage2`，这个 web 表单中没有任何内容`ContentPlaceHolder`。

请为我解释...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T16:21:30.497

您正在寻找的是*嵌套母版页*。
谷歌它，你会得到大量的教程。来自谷歌的前 2 个结果：

[http://msdn.microsoft.com/en-us/library/x2b3ktt7(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/x2b3ktt7%28v=vs.100%29.aspx)
[http://msdn.microsoft.com/en-us/library/bb547109(v=vs.100) .aspx](http://msdn.microsoft.com/en-us/library/bb547109%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T16:24:40.990

最有可能的是：

*   MasterPage2 正在使用`ContentPlaceHolder`来自 MasterPage 但未添加另一个`ContentPlaceHolder`供您的内容页面使用
*   MasterPage2 上的 ID与`ContentPlaceHolder`MasterPage 上的 ID 相同

确保 MasterPage2 具有`ContentPlaceHolder`唯一标识符。

# vb.net - 如何解决 SEHException，VB .NET 2010

> ID：14004430
> 
> 赞同：2
> 
> 时间：2012-12-22T16:19:24.343
> 
> 标签：vb.net

```
System.Runtime.InteropServices.SEHException was unhandled
  Message=External component has thrown an exception.
  Source=mscorlib
  ErrorCode=-2147467259
  StackTrace:
       at Microsoft.Win32.Win32Native.CloseHandle(IntPtr handle)
       at Microsoft.Win32.SafeHandles.SafeFileHandle.ReleaseHandle()
       at System.Runtime.InteropServices.SafeHandle.InternalFinalize()
       at System.Runtime.InteropServices.SafeHandle.Dispose(Boolean disposing)
       at System.Runtime.InteropServices.SafeHandle.Finalize()
  InnerException: 
```

我阅读了所有关于 SEHException 的帖子，但我无法解决我的问题，请帮忙。这是我怀疑的代码：

```
If hWinUSBInterface = INVALID_HANDLE_VALUE And hDevice = INVALID_HANDLE_VALUE Then

    If Not tmrAutoConnect.Enabled Then
        RaiseEvent Notify(2, "Not connected")
    End If
    Return
End If

Try
    If hWinUSBInterface <> INVALID_HANDLE_VALUE Then
        WinUsb_Free(hWinUSBInterface)
        hWinUSBInterface = INVALID_HANDLE_VALUE
    End If

    If hDevice <> INVALID_HANDLE_VALUE Then

        If CloseHandle(hDevice) Then
            hDevice = INVALID_HANDLE_VALUE
            RaiseEvent Disconnected()
        Else
            Dim ErrorStatus As Integer = Err.LastDllError
            RaiseEvent Error(1, ErrorStatus, "Disconnect")
        End If

    End If
Catch ex As Exception

End Try 
```

任何想法？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T10:38:18.440

您似乎在 SafeFileHandle hDevice 上使用 kernel32.dll CloseHandle。垃圾收集器不知道这些 CloseHandle 调用，并且在尝试清理 SafeFileHandle 时会生成此错误。尝试使用 hDevice.Close() 代替。

# objective-c - iPhone UIButton 操作不起作用

> ID：14004434
> 
> 赞同：0
> 
> 时间：2012-12-22T16:20:32.223
> 
> 标签：objective-c, uiview, uibutton

我创建 UIView，然后将 UIButton 添加为带有操作的子视图，但从未调用此操作。

有人知道为什么吗？

这是我的代码：

```
- (void)viewDidLoad{

    UIView *roundResultView = [[UIView alloc] initWithFrame:CGRectMake(10, 10, 200, 150)];
    UIImageView *_popUpBg = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"NotificationBg.png"]];
    _popUpBg.frame = CGRectMake(0, 0, roundViewWidth, roundViewHeight);

    UIButton *closeButton = [[UIButton alloc]initWithFrame:CGRectMake(30, 30, 100, 30)];
    [closeButton addTarget:self action:@selector(closeAndBack) forControlEvents:UIControlEventTouchUpInside];
    [closeButton setTitle:@"Back") forState:UIControlStateNormal];
    [roundResultView addSubview:_popUpBg];
    [roundResultView addSubview:closeButton];
    [self.view addSubview:roundResultView];
}

-(void)closeAndBack{
    NSLog(@"closeAndBack"); //never called
} 
```

我已经检查过了：

```
NSLog(@"%@", [closeButton allControlEvents]);
NSLog(@"%@", [closeButton allTargets]); 
```

它打印：

```
... Sedmica[2192:14f03] 64
... Sedmica[2192:14f03] {(
    <ViewController: 0x8631e10>
)} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T16:54:45.560

用这个更新你的代码，请告诉我：

```
UIButton *closeButton  = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[closeButton addTarget:self 
                action:@selector(closeAndBack:)
      forControlEvents:UIControlEventTouchDown];
[closeButton setTitle:@"Back"
             forState:UIControlStateNormal];
closeButton.frame = CGRectMake(30.0, 30.0, 100.0, 30.0);
[self.view addSubview:closeButton]; 
```

* * *

```
- (IBAction)closeAndBack:(UIButton *)button{
      NSLog(@"Button  clicked.");
} 
```

# jquery - jQuery追加到嵌套的div不滚动

> ID：14004435
> 
> 赞同：0
> 
> 时间：2012-12-22T16:20:39.003
> 
> 标签：jquery, html, css, ajax

我正在通过 AJAX 请求提取一些 JSON 内容，但是当我尝试将其附加到嵌套 div 时，它不会滚动 - 滚动条出现但它处于非活动状态。

```
<style>
.tbox {
    width:440px;
    height: 500px;
    background-color:white;
    border:1px solid #E8E8E8;
    border-color:rgba(0,0,0,0.1);
    border-radius:5px;
    position:relative;
    -moz-box-shadow:3px 3px 14px #000;
    -webkit-box-shadow:3px 3px 14px #000;
    box-shadow:3px 3px 14px #000;
    margin:20px 0 0 50px;
    overflow: hidden;
}
.tbox .tbox-header {
    padding:12px;
    border-bottom:1px solid #E8E8E8;
    border-bottom-color:rgba(0,0,0,0.1);
    width: 100%;
    height: auto;
    overflow: hidden;
}
h1.ttitle {
    font-size:18px;
    line-height:18px;
    font-weight:bold;
}
.tbox .tbox-body {
    width: 100%;
    height: auto;
    overflow-x:hidden;
    overflow-y: scroll;
    position: relative;
}
ol {
    list-style-type:none;
    padding:2px;
}
ol li {
    clear:both;
    border-bottom:1px solid #E8E8E8;
    border-color:rgba(0,0,0,0.1);
    margin-bottom:15px;
    overflow:hidden;
    width:auto;
    height:auto;
}
</style>
<div class="tbox">
    <div class="tbox-header">
        <h1 class="ttitle">My Title</h1>
    </div>
    <div class="tbox-body">
        <ol>
        </ol>
    </div>
</div>

<script>
$.ajax({
    type: "GET",
    url: "[my PHP api]",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function (data) {
        $.each(data, function (i, t) {
            $('.tbox-body ol').append(t.content);
        });
    }
});
</script> 
```

如果我删除两个嵌套类（`.tbox-header`和`.tbox-body`）并直接附加到`.tbox`它工作正常，但是当我尝试将内容附加到嵌套 div`.tbox-body`时，滚动条处于非活动状态。将 overflow-y 选项更改`.tbox`为 auto 或 scroll 并不能解决问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T16:33:23.747

您遇到的问题是`tbox-body`不知道它需要在什么时候滚动。`tbox`设置为 500px 的固定高度。最简单的解决方案是计算可用高度`tbox-tbody`并在 css 中设置它的高度。

作为概念的快速证明，如果您更改`.tbox-tbody`from：

```
height:auto; 
```

到：

```
height:300px; 
```

您应该看到它现在滚动。一旦您在其上设置了预定的高度，`tbox-tbody`它也消除了`overflow:hidden`您对元素的各种需求。您应该只需要`overflow`在`tbox-tbody`.

# xpath - scrapy HtmlXPathSelector 通过搜索关键字确定xpath

> ID：14004439
> 
> 赞同：0
> 
> 时间：2012-12-22T16:21:10.953
> 
> 标签：xpath, lxml, scrapy

我有一部分 html 如下所示

```
<li><label>The Keyword:</label><span><a href="../../..">The text</a></span></li> 
```

我想得到字符串“关键字：文本”。

我知道我可以使用 Chrome 检查或 FF firebug 获取上述 html 的 xpath，然后使用 hxs.select(xpath).extract()，然后剥离 html 标签以获取字符串。但是，该方法不够通用，因为 xpath 在不同页面之间并不一致。

因此，我正在考虑以下方法：首先，使用搜索“关键字：”

```
hxs = HtmlXPathSelector(response)
hxs.select('//*[contains(text(), "The Keyword:")]') 
```

什么时候做 pprint 我得到一些回报：

```
>>> pprint( hxs.select('//*[contains(text(), "The Keyword:")]') )
<HtmlXPathSelector xpath='//*[contains(text(), "The Keyword:")]' data=u'<label>The Keyword:</label>'> 
```

我的问题是如何获得想要的字符串：“关键字：文本”。我正在考虑如何确定 xpath，如果 xpath 已知，那么我当然可以得到想要的字符串。

除了scrapy HtmlXPathSelector之外，我对任何解决方案都持开放态度。（例如 lxml.html 可能有更多功能，但我对它很陌生）。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T15:03:38.477

如果我正确理解了您的问题，那么“跟随兄弟”就是您所要照顾的。

```
 //*[contains(text(), "The Keyword:")]/following-sibling::span/a/text() 
```

[Xpath 轴](http://www.w3schools.com/xpath/xpath_axes.asp)

# extjs - 在 EXTJS 面板中禁用水平滚动条

> ID：14004440
> 
> 赞同：7
> 
> 时间：2012-12-22T16:21:10.940
> 
> 标签：extjs

团队，

有谁知道如何禁用面板中的水平滚动条。我正在使用 EXTJS 3.4

基本上我只希望垂直滚动条可见而不是水平的。

我尝试将 autoScroll=true 作为面板属性，但如果这样做，我可以同时看到水平和垂直滚动条。

这是代码。

```
<html>
<head>
<title>Hello World Window</title>
<link rel="stylesheet" type="text/css" href="ext-3.4.0/resources/css/ext-all.css" />
<script type="text/javascript" src="ext-3.4.0/adapter/ext/ext-base.js"></script>
<script type="text/javascript" src="ext-3.4.0/ext-all.js"></script>
</head>

<body>
<script type="text/javascript">

    Ext.onReady(function(){
        var tab2 = new Ext.FormPanel({
            labelAlign: 'left',
            labelStyle: 'font-weight:bold;',
            labelWidth: 85,
            title: 'Run Report',
            bodyStyle:'padding:5px',
            border : true,
            style: 'margin:0 auto;margin-top:50px;margin-left:50',
            width: 900,
            height:600, 
                  items:
                  [{

                      xtype:'panel',
                      border:true,
                      height:75,
                      title:'Inner Panel',
                      bodyStyle:'padding:5px',
                      autoScroll:true,
                  items: [{
                    layout:'column',
                    border :false,
                    items:[{
                        columnWidth:.3,
                        layout: 'form',
                        border :false,
                        items: [{
                            xtype:'textfield',
                            fieldLabel: 'First Name',
                            name: 'first',
                            anchor:'95%'
                        }, {
                            xtype:'textfield',
                            fieldLabel: 'Company',
                            name: 'company',
                            anchor:'95%'
                        }]
                    },{
                        columnWidth:.3,
                        layout: 'form',
                        border :false,
                        items: [{
                            xtype:'textfield',
                            fieldLabel: 'Last Name',
                            name: 'last',
                                          anchor:'95%'
                        },{
                            xtype:'textfield',
                            fieldLabel: 'Email',
                            name: 'email',
                            vtype:'email',
                            anchor:'95%'
                        }]
                    }]
                }]
             }]
        ,
            buttons: [{
            text: 'Save'
            },{
            text: 'Cancel'
            }]
        });

    tab2.render(document.body); 

});
</script> 

</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-08-06T17:22:37.687

解决方案是将 overflowY 设置为 'auto'，然后完全删除 autoScroll。

```
xtype:'panel',
border:true,
height:75,
title:'Inner Panel',
bodyStyle:'padding:5px',
//autoScroll:true,
overflowY: 'auto' 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-05-01T08:13:57.460

使用 4.2.1 在 Chrome、FF 和 IE11 中对我有用的是使用这个：

```
style: 'overflow-y: scroll; overflow-x: hidden;' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-10T17:03:34.097

我知道这已经晚了，但这是要使用的实际设置：

```
bodyStyle:'overflowY: auto', 
```

希望它可以帮助某人。也应该能够让它在 4.x 实现中工作。到目前为止，我只在 3.4 中对其进行了测试。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-12T03:51:38.713

```
// autoScroll:true,
// style:'overflow-y:auto;overflow-x:hidden;',
overflowY: 'auto', 
```

它适用于用 overflowY 替换评论。

# django - 反向地理编码 + Google Maps API + Django

> ID：14004441
> 
> 赞同：-1
> 
> 时间：2012-12-22T16:21:15.233
> 
> 标签：django, google-maps

如何让 Google Maps API 返回国家名称和城市，并将其保存在变量 django 中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T22:13:14.620

由于您的问题缺少信息，以下是 Google 自动完整文本输入。您输入位置，它将返回显示在`li`标签中的城市、州、国家、邮政编码、纬度、经度（它找到的）。您可以使用该方法存储在其他变量中，而不是`li`. [这](http://jsfiddle.net/qb68p/)是它的jsfiddle。

```
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?libraries=places&sensor=true"></script>
<script>
    $(document).ready(function(){
        var geocoder;
        geocoder = new google.maps.Geocoder();
        var defaultBounds = new google.maps.LatLngBounds(
          new google.maps.LatLng(-33.8902, 151.1759),
          new google.maps.LatLng(-33.8474, 151.2631));

        var input = document.getElementById('location');
        var options = {
          bounds: defaultBounds,
          types: ['(regions)']
        };

        autocomplete = new google.maps.places.Autocomplete(input, options);

        google.maps.event.addListener(autocomplete, 'place_changed', function() {
            var place = autocomplete.getPlace(); 
            var city;
            var state;
            var country;
            var postcode;
            var latitude;
            var longitude;

            if (place){
                address_components = place.address_components;
                if (address_components){
                    for (index in address_components){
                        component = address_components[index];
                        if (component.types.indexOf('locality') > -1){
                            city = component.long_name;
                        }
                        if (component.types.indexOf('administrative_area_level_1') > -1){
                            state = component.long_name;
                            if (!state){
                                if (component.types.indexOf('administrative_area_level_2') > -1){
                                    state = component.long_name;
                                    if (!state){
                                        if (component.types.indexOf('administrative_area_level_3') > -1){
                                            state = component.long_name;
                                        }
                                    }
                                }
                            }
                        }
                        if (component.types.indexOf('country') > -1){
                            country = component.long_name;
                        }
                        if (component.types.indexOf('postal_code') > -1){
                            postcode = component.long_name;
                        }
                    }
                }
                if (place.geometry){
                    if (place.geometry.location){
                        latitude = place.geometry.location.lat();
                        longitude = place.geometry.location.lng();
                    }
                }
            }
            if (city){
                $('.city').text('City: ' + city);
            }else{$('.city').text('City: ');}
            if (state){
                $('.state').text('State: ' + state);
            }else{$('.state').text('State: ');}
            if (country){
                $('.country').text('Country: ' + country);
            }else{$('.country').text('Country: ');}
            if (postcode){
                $('.postcode').text('Postcode: ' + postcode);
            }else{$('.postcode').text('Postcode: ');}
            if (latitude){
                $('.latitude').text('Latitude: ' + latitude);
            }else{$('.latitude').text('Latitude: ');}
            if (longitude){
                $('.longitude').text('Longitude: ' + longitude);
            }else{$('.longitude').text('Longitude: ');}
        });
    });
</script>
</head>
<body>
<input type="text" id="location" name="location">
<ul>
    <li class="city">City: </li>
    <li class="state">State: </li>
    <li class="country">Country: </li>
    <li class="postcode">Postcode: </li>
    <li class="latitude">Latitude: </li>
    <li class="longitude">Longitude: </li>
</ul>
</body>
</html> 
```

# c# - 无法使用 [] 将索引应用于“对象”类型的表达式

> ID：14004442
> 
> 赞同：15
> 
> 时间：2012-12-22T16:21:19.440
> 
> 标签：c#, object, arraylist, indexing

**这是我的代码：返回浮点数的ArrayList**的 ArrayList：

```
public ArrayList walls=new ArrayList(); 

public void Start()
{
    walls[0] = ReturnInArrayList(279,275,0,0,90);
    walls[1] = ReturnInArrayList(62,275,0,0,0);
    walls[2] = ReturnInArrayList(62,275,62,0,90);
    walls[3] = ReturnInArrayList(217,275,62,-62,0);
    walls[4] = ReturnInArrayList(62,275,279,0,90);
    walls[5] = ReturnInArrayList(41,275,279,0,0);
    walls[6] = ReturnInArrayList(279,275,320,0,9);
    walls[7] = ReturnInArrayList(320,275,0,-279,0); 

    for (int i = 0; i < walls.Length; i++) {
        float a = (float)walls[i][0];
        float b = (float)walls[i][1];
        float c = (float)walls[i][2];
        float d = (float)walls[i][3];
        float e = (float)walls[i][4];
    }
}

ArrayList ReturnInArrayList(float a,float b,float c, float d, float e)
{
    ArrayList arrayList = new ArrayList();
    arrayList.Add(a);
    arrayList.Add(b);
    arrayList.Add(c);
    arrayList.Add(d);
    arrayList.Add(e);
    return arrayList;
} 
```

它给了我以下错误：

> 错误 CS0021：无法使用 [] 将索引应用于“对象”类型的表达式

我已经做了选角，有什么问题吗？:(

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-22T16:28:04.753

问题是`paredes[i]`返回的是索引器`object`的返回类型。`ArrayList`您需要将其转换为 an`ArrayList`才能访问它：

```
float a= (float)((ArrayList)paredes[i])[0]; 
```

不过，更好的解决方案是使用泛型并填充 a `List<float>`：

```
List<float> RetornaEmList(float a,float b,float c, float d, float e)
{
    return new List<float> { a, b, c, d, e };
} 
```

然后`paredes`是 a`List<List<float>>`并且您的访问器可以更改为：

```
float a = paredes[i][0]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-22T16:32:15.370

`ArrayList`存储对象而不限制这些对象的类型。当您访问存储在 中的对象时`ArrayList`，编译器不知道它们是什么类型，所以它只给您 type `object`。

你在你的 external 中存储一个`ArrayList`of 。由于您总是存储浮点数，因此最好将 a用于内部列表，将 a用于外部列表。这样您就不必键入 cast from ：`float``ArrayList``List<float>``List<List<float>>``object`

```
using System.Collections.Generic;

public List<List<float>> paredes = new List<List<float>>();   

Start() {
    paredes[0]=RetornaEmList(279,275,0,0,90);
    paredes[1]=RetornaEmList(62,275,0,0,0);
    paredes[2]=RetornaEmList(62,275,62,0,90);
    paredes[3]=RetornaEmList(217,275,62,-62,0);
    paredes[4]=RetornaEmList(62,275,279,0,90);
    paredes[5]=RetornaEmList(41,275,279,0,0);
    paredes[6]=RetornaEmList(279,275,320,0,9);
    paredes[7]=RetornaEmList(320,275,0,-279,0);    

    for (int i=0;i<paredes.Length;i++)
    {           
        float a=paredes[i][0];
        float b=paredes[i][1];
        float c=paredes[i][2];
        float d=paredes[i][3];
        float e=paredes[i][4];                   
    }
}

List<float> RetornaEmList(float a,float b,float c, float d, float e)
{
    return new List<float> { a, b, c, d, e };
} 
```

由于内部列表始终有 5 个浮点数，因此您也可以使用 a`float[]`而不是 a`List<float>`

如果您只想使代码工作而不移动 from `ArrayList`to `List`，则需要额外的演员表：

```
float a = (float)((ArrayList)paredes[i])[0]; 
```

但只是使用它会更清洁`List<float>`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T16:28:10.100

你在哪里做选角？

我会说它必须是（没有尝试使用编译器）：

```
for (int i = 0; i < paredes.Length; i++)
{           
    float a=(float)((ArrayList)paredes[i])[0];
    ...                   
} 
```

您是否考虑过使用泛型集合？

```
public List<List<float>> paredes = new List<List<float>>(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T16:32:31.723

代码应该是这样的：

```
//Adding List

paredes.Add(RetornaEmArrayList(279,275,0,0,90));
paredes.Add(RetornaEmArrayList(62,275,0,0,0));
paredes.Add(RetornaEmArrayList(62,275,62,0,90));
paredes.Add(RetornaEmArrayList(217,275,62,-62,0));
paredes.Add(RetornaEmArrayList(62,275,279,0,90));
paredes.Add(RetornaEmArrayList(41,275,279,0,0));
paredes.Add(RetornaEmArrayList(279,275,320,0,9));
paredes.Add(RetornaEmArrayList(320,275,0,-279,0));

//Traversing List

foreach(ArrayList item in paredes)
{
    float a=(float)item[0];
    float b=(float)item[1];
    float c=(float)item[2];
    float d=(float)item[3];
    float e=(float)item[4];
} 
```

# java - 使用自定义排序规则对 int（非整数）数组进行排序

> ID：14004456
> 
> 赞同：0
> 
> 时间：2012-12-22T16:23:14.260
> 
> 标签：java, android

我需要使用自定义排序规则对大约 100000 个整数进行排序。如果我使用 Comparator，我需要一个数组 Integer 实例，它创建速度较慢，排序速度较慢并且占用更多内存。

在装有 Android 4.2 的 Galaxy Nexus 上进行快速基准测试：

```
createIntArrayAndFillWith1to100000; // 18 ms
createIntegerArrayAndFillWith1to100000; // 191 ms (using Integer.valueOf(i))
Arrays.sort(randomInts); // 354 ms
Arrays.sort(randomIntegers, simpleComparator); // 1734 ms 
```

实施自定义排序是我的最佳选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T16:30:30.753

*我认为唯一的方法是自己对元素数据类型int*的数组实现排序算法。Java 库不提供每个基本数据类型的版本。装箱/拆箱就是答案。

我会简单地为这种特殊需要实现一个排序算法。（如果速度真的如此重要）使用快速排序的就地排序很容易实现[快速排序（维基百科）](http://en.wikipedia.org/wiki/Quicksort)

# python - DLL 加载失败：执行“从 mpi4py 导入 MPI”时找不到指定的模块

> ID：14004457
> 
> 赞同：16
> 
> 时间：2012-12-22T16:23:21.427
> 
> 标签：python, python-2.7, openmpi

我正在尝试在 Windows 7 64 位上使用 Mpi4py 1.3 和 python 2.7。我从[这里](http://www.lfd.uci.edu/%7Egohlke/pythonlibs/)下载了包含 OpenMPI 1.6.3 的可安装版本，因此在安装目录 (*/Python27\Lib\site-packages\mpi4py\lib) 中存在以下库：libmpi.lib、libmpi_cxx.lib、libopen-pal.lib , 和 libopen-rte.lib。现在在我的代码中尝试导入它时：

```
from mpi4py import MPI 
```

它返回以下错误：

> ImportError：DLL 加载失败：找不到指定的模块。

我试图在 */Python27\Lib\site-packages\mpi4py\MPI.pyd 旁边复制一个 lib 文件，甚至复制到 Windows/System32，但它没有用。感谢您就缺少哪些 DLL 以及如何修复错误提供帮助？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2019-02-27T14:33:14.130

在 Windows 10 上使用 Mpi4py 1.3 和 python 3.5，我可以`import mpi4py`成功运行但不是`from mpi4py import MPI`. 要修复它，只需通过 MPI 重新安装[MPI](https://docs.microsoft.com/en-us/message-passing-interface/microsoft-mpi)。这对我有用。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-09-04T04:54:40.707

我解决了这个问题。我的环境是 Win10、python 3.6.6、pycharm 2019.2 并链接到 anaconda visual env。
1.下载[MS MPI](https://www.microsoft.com/en-us/download/details.aspx?id=57467)，安装.mis和SDK。
2.设置环境变量
控制面板-->高级系统设置-->环境变量-->添加
(1) C:\Program Files (x86)\Microsoft SDKs\MPI 和
(2) C:\Program Files\Microsoft MPI\斌。有我的路径，你可能需要在这里改变路径。
3.安装MS Visual Studio，社区版就够了
4\. Anaconda提示，使用***conda install -c intel mpi4py***。我阅读了大多数回复，但没有这样提及。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-08-23T15:37:23.913

我有同样的问题，没有答案解决了这个问题。

对我来说，以下解决了这个问题。我手动编译并安装`mpi4py`如下：

*   [从https://duongtrungnghia.wordpress.com/2017/03/28/install-mpi4py-on-windows-10/](https://duongtrungnghia.wordpress.com/2017/03/28/install-mpi4py-on-windows-10/)安装适用于 Windows 的 MPI SDK 10
*   添加`C:\Program Files (x86)\Microsoft SDKs\MPI\Lib`和`C:\Program Files (x86)\Microsoft SDKs\MPI`到您的 Windows 环境变量（不确定是否需要）
*   您需要带有 MSVC 140 或纯 Visual Studio 的 Visual Studio 构建工具。不确定是什么版本。就我而言，`C:\Program Files (x86)\Microsoft Visual Studio 14.0\....`尽管我目前使用的是 VS2017，但还是使用了 mpi4py setup.py。
*   安装 Windows SDK/Kits 和开发工具 ( [https://developer.microsoft.com/en-us/windows/downloads/windows-10-sdk](https://developer.microsoft.com/en-us/windows/downloads/windows-10-sdk) )
    *   打开开发人员命令提示符（它就像一个带有一些附加功能的 CMD）
    *   如果您使用 Virtualenv，请执行 (venv/Scripts/activate) 激活您的 venv
    *   创建并更改到临时目录并执行以下操作：
        *   `git clone https://github.com/mpi4py/mpi4py.git`
        *   `cd mpi4py`
        *   `python -m pip install Cython`
        *   `python setup.py build`
        *   `python setup.py install`

我的设置：

*   视窗 10
*   蟒蛇 3.7

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-08T15:23:49.620

在第 37 行左右使用`sys.prefix\lib\site-packages\mpi4py\bin\python-mpi.exe`或添加以下代码：`sys.prefix\lib\site-packages\mpi4py\__init__.py`

```
def _init_openmpi():
    """Pre-load libmpi.dll and register OpenMPI distribution."""
    import os
    import ctypes
    if os.name != 'nt' or 'OPENMPI_HOME' in os.environ:
        return
    try:
        openmpi_home = os.path.abspath(os.path.dirname(__file__))
        openmpi_bin = os.path.join(openmpi_home, 'bin')
        os.environ['OPENMPI_HOME'] = openmpi_home
        os.environ['PATH'] = ';'.join((openmpi_bin, os.environ['PATH']))
        ctypes.cdll.LoadLibrary(os.path.join(openmpi_bin, 'libmpi.dll'))
    except Exception:
        pass

_init_openmpi() 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-02-28T12:45:52.660

对于收到此错误的任何人“从 mpi4py import MPI ImportError：DLL 加载失败：找不到指定的过程。” 我通过将 MSMPI 降级到 V10.0 来解决它，它不适用于 V10.2。并使用 MPISdk V8.0 你必须卸载你现在拥有的 MSMPI 并从这个链接安装 V10.0 [MSMPIV10.0](https://www.microsoft.com/en-us/download/details.aspx?id=57467) 它不接受在不卸载旧版本的情况下安装新版本，希望它会工作

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-06-01T15:52:55.990

我尝试了以下方法，它奏效了。

1.  卸载 OpenMPI
2.  卸载`mpi4py`
3.  安装微软 MPI
4.  重新安装`mpi4py`，`pip`以便安装轮子

来源：[https ://groups.google.com/d/msg/mpi4py/VA7Aihi64R0/jnxAT2HtCgAJ](https://groups.google.com/d/msg/mpi4py/VA7Aihi64R0/jnxAT2HtCgAJ)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-03-26T10:21:18.140

[我通过从https://github.com/Microsoft/Microsoft-MPI](https://github.com/Microsoft/Microsoft-MPI)安装最新版本的 MSMPI 修复了该错误

# javascript - 对 ASP.NET MVC 操作进行 jquery ajax 调用

> ID：14004461
> 
> 赞同：1
> 
> 时间：2012-12-22T16:23:34.820
> 
> 标签：javascript, jquery, ajax, asp.net-mvc, action

我在 ASP.NET MVC 中有一个简单的编辑操作，如下所示：

```
[HttpPost]
public ActionResult Edit(EditPostViewModel data)
{
} 
```

我正在尝试像这样发布此操作的帖子：

```
function SendPost(actionPath) {
    $.ajax({
        url: actionPath,
        type: 'POST',
        dataType: 'json',
        data: '{Text=' + $('#EditPostViewModel_Text').val() + 'Title=' + $('#EditPostViewModel_Title').val() + '}',
        success: function (data) {
            alert('success');
        },
        error: function () {
            alert('error');
        }
    });
} 
```

该动作将被触发，但 EditPostViewModel 不会填充文本和标题？

我希望我可以使用常规的 ASP.NET MVC 操作来使用 ModelState 在服务器端处理验证。

稍后将有处理返回数据的成功和错误代码。

这应该如何工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T16:26:43.037

试试这个：

```
data: 
{
     Text: $('#EditPostViewModel_Text').val(),
     Title: $('#EditPostViewModel_Title').val() 
} 
```

# java - 为什么我的服务器没有从我的客户端接收数据？

> ID：14004474
> 
> 赞同：-1
> 
> 时间：2012-12-22T16:24:57.370
> 
> 标签：java, sockets, java-io

当我学习 Java 中的网络和 io 时，我正在慢慢地构建客户端/服务器应用程序以应用我在不同教程中阅读的内容。不过我很困惑，我一直在试图弄清楚为什么我的代码很长一段时间都不起作用。所以我决定求助于 SO 的无限智慧 :)

在接受来自 localhost 的客户端套接字连接后，我的服务器上有这个：

```
BufferedInputStream in = new BufferedInputStream(socket.getInputStream(),Config.BUFFER_SIZE_NET);
BufferedOutputStream out = new BufferedOutputStream(socket.getOutputStream(),Config.BUFFER_SIZE_NET);
String msg = "";
byte buffer[] = new byte[Config.BUFFER_SIZE_READ];
int bytesRead;
System.out.println("Server is waiting for data");
while ((bytesRead = in.read(buffer)) > 0) {
    msg = msg + new String(buffer,Config.CHARSET);
}
System.out.println("Server received: "+msg); 
```

连接到服务器后，在我按下 JButton 后在客户端执行此操作：

```
BufferedInputStream in = new BufferedInputStream(socket.getInputStream(),Config.BUFFER_SIZE_NET);
BufferedOutputStream out = new BufferedOutputStream(socket.getOutputStream(),Config.BUFFER_SIZE_NET);
String msg = "msg";
try{
    out.write(msg.getBytes(Config.CHARSET));
    out.flush();
    System.out.println("Client sent: "+msg);
}catch(Throwable e){e.printStackTrace();} 
```

按下客户端上的按钮后，我得到以下输出：

```
Client sent: msg 
```

在服务器端，我得到：

```
Server is waiting for data 
```

如果我调试服务器，我会在以下行看到它永远被阻塞：

```
while ((bytesRead = in.read(buffer)) > 0) { 
```

不抛出异常。我在这里想念什么？我以前让它工作，但我做了很多改变，现在我无法让它恢复工作。

注意：这是实际代码的略微修改版本，以便于查看。如果您认为缺少相关内容，请告诉我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T20:21:39.090

我从我自己挖的坑里爬了出来。事实证明，我没有检查接收到的数据是否结束，因此代码要么阻塞读取，要么处于随后的循环中。通过检查服务器读取的数据中的特定字节序列，在 while 循环内，我能够识别数据的结尾并从循环中中断。

我不知道这是否是上述问题的（最）正确答案，但我以这种方式解决了它，所以我将其作为答案提交。

# ruby - 具有硬编码数据的 Mongoid 模型

> ID：14004475
> 
> 赞同：1
> 
> 时间：2012-12-22T16:25:01.363
> 
> 标签：ruby, mongodb, mongoid, rack

我有一个 mongoid 模型

```
class MyMongoidModel
  include Mongoid::Document
  include Mongoid::Timestamps

  field :name, :type => String
  field :data_id, :type => Integer

  has_and_belongs_to_many :the_other_model, :class_name => 'class_name_model'
  has_many :model2

  def self.all
        [  
               #.... the hardcoded data that will never be changed
        ]
  end
end 
```

它被另一个模型使用，它也使用它们。但是，它包含在很长一段时间内**都不会更改**的数据，比方说。因此，我不想从 db 中检索它，我希望它被硬编码，同时，我希望它**像**一个普通的 mongoid 模型一样工作。使用缓存不是我想要的。

我希望你明白我的意思。

如何实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T16:53:02.907

有一个很棒的 gem，叫做 active_hash，它为 ActiveRecord 提供了这个功能：将一组固定的数据定义为可以引用/关联到普通模型的模型，但是在代码中定义并加载到内存中（而不是从 DB 中存储/检索）。

[https://github.com/zilkey/active_hash](https://github.com/zilkey/active_hash)

有趣的是，由于 Mongoid 和 ActiveRecord 都共享共同的 ActiveModel 基础，您现在可以将 active_hash 与 Mongoid 文档一起使用。

例如：

```
class Country < ActiveHash::Base
  self.data = [
    {:id => 1, :name => "US"},
    {:id => 2, :name => "Canada"}
  ]
end

class Order
  include Mongoid::Document
  include Mongoid::Timestamps

  has_one :country
end 
```

# php - 在设置引荐来源网址脚本时调用未定义的函数

> ID：14004476
> 
> 赞同：0
> 
> 时间：2012-12-22T16:25:12.633
> 
> 标签：php, curl, undefined

我正在使用此脚本将引荐来源网址设置为 url，或者如果引荐来源网址为空或设置了 cookie，请点击图片。下面的代码是我到目前为止所拥有的，如果我将 curl 函数部分单独放在一个文件中，但我无法将它与 cookie 部分放在一起，则它可以工作。

错误是调用未定义的函数 geturl()

```
<?php
$image = 'image_url';

if($_COOKIE["6346"] == 1) {
$show = 0;
} 

else {
$show = 1;
$hours = rand(24,68);
setcookie('6346', 1, time()+(60*60*$hours));

}

if (!empty($_SERVER['HTTP_REFERER'])) {
$goodreferer = 0;
}
else {
$goodreferer = 1;
}

if ($show == 1 && $goodreferer == 0) {
echo geturl('url(dot)com', 'referer(dot)com');

function geturl($url, $referer) { 

    $headers[] = 'Accept: image/gif, image/x-bitmap, image/jpeg, image/pjpeg,text/html,application/xhtml+xml'; 
    $headers[] = 'Connection: Keep-Alive'; 
    $headers[] = 'Content-type: application/x-www-form-urlencoded;charset=UTF-8'; 
    $useragent = 'Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.0.3705; .NET CLR 1.1.4322; Media Center PC 4.0)'; 

    $process = curl_init($url); 
    curl_setopt($process, CURLOPT_HTTPHEADER, $headers); 
    curl_setopt($process, CURLOPT_HEADER, 0); 
    curl_setopt($process, CURLOPT_USERAGENT, $useragent);
    curl_setopt($process, CURLOPT_REFERER, $referer);
    curl_setopt($process, CURLOPT_TIMEOUT, 30); 
    curl_setopt($process, CURLOPT_RETURNTRANSFER, 1); 
    curl_setopt($process, CURLOPT_FOLLOWLOCATION, 1); 

    $return = curl_exec($process); 
    curl_close($process); 

    return $return; 

} 
}
else {
header('Location: ' . $image);

exit;
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T16:32:07.167

`When a function is defined in a conditional manner its definition must be processed prior to being called.`来自 PHP Manual [Conditional functions](http://www.php.net/manual/en/functions.user-defined.php#example-148)。

所以尝试`geturl()`在它被调用之前定义它。
也试试这个 SO 帖子[Php - if 结构中的一个函数](https://stackoverflow.com/questions/5912830/php-a-function-inside-an-if-structure)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T16:59:13.550

不要在 if() 控制结构中定义你的函数。这肯定是造成混乱的秘诀。这就像多重继承——仅仅因为你可以并不意味着你应该！

我认为如果你使用良好的控制结构缩进，你会发现你的逻辑更容易理解，代码也更容易调试。此版本的脚本工作正常。 [http://www.laprbass.com/RAY_temp_user1923808.php](http://www.laprbass.com/RAY_temp_user1923808.php)

```
<?php // RAY_temp_user1923808.php
error_reporting(E_ALL);

$image = 'image_url';

if( isset($_COOKIE["6346"]) && ( $_COOKIE["6346"] == 1) )
{
    $show = 0;
}
else
{
    $show = 1;
    $hours = rand(24,68);
    setcookie('6346', 1, time()+(60*60*$hours));
}

if (!empty($_SERVER['HTTP_REFERER']))
{
    $goodreferer = 0;
}
else
{
    $goodreferer = 1;
}

if ($show == 1 && $goodreferer == 0)
{
    echo geturl('url(dot)com', 'referer(dot)com');
}
else
{
    header('Location: ' . $image);
    exit;
}

function geturl($url, $referer) {

    $headers[] = 'Accept: image/gif, image/x-bitmap, image/jpeg, image/pjpeg,text/html,application/xhtml+xml';
    $headers[] = 'Connection: Keep-Alive';
    $headers[] = 'Content-type: application/x-www-form-urlencoded;charset=UTF-8';
    $useragent = 'Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.0.3705; .NET CLR 1.1.4322; Media Center PC 4.0)';

    $process = curl_init($url);
    curl_setopt($process, CURLOPT_HTTPHEADER, $headers);
    curl_setopt($process, CURLOPT_HEADER, 0);
    curl_setopt($process, CURLOPT_USERAGENT, $useragent);
    curl_setopt($process, CURLOPT_REFERER, $referer);
    curl_setopt($process, CURLOPT_TIMEOUT, 30);
    curl_setopt($process, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($process, CURLOPT_FOLLOWLOCATION, 1);

    $return = curl_exec($process);
    curl_close($process);

    return $return;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T16:31:09.357

您在定义之前调用该函数。将函数移动到文件顶部。此外，您不应在 if 语句中定义函数。

# python - 背后的逻辑是什么 为timeit设计？

> ID：14004483
> 
> 赞同：0
> 
> 时间：2012-12-22T16:26:49.763
> 
> 标签：python, debugging, timeit

我是 Python 新手，我想我会在 Project Euler 上解决问题，同时做一些具体的事情。

我遇到了对不同解决方案进行计时的想法，以查看它们如何相互评价。然而，这个简单的任务对我来说太复杂了。我读到这些`time.clock()`调用在 unix 系统上不够准确（秒分辨率对于现代处理器来说简直是可悲的）。因此，我偶然发现了该`timeit`模块，它似乎是分析任务的首选。

我不得不说我真的不明白他们为什么要以这种违反直觉的方式去做。我似乎无法让它工作，而无需重写/重组我的代码，我觉得这非常令人沮丧。

看下面的代码，不要介意它既不漂亮也不特别有效：

```
import math
import sys
from timeit import Timer

def digitsum(number):
    rem = 0 
    while number > 0:
        rem += number % 10
        number //= 10
    return rem

def prime_form(p):
    if p == 2 or p == 3 or p == 5:
        return True
    elif (p-1) % 6 != 0 and (p+1) % 6 != 0:
        return False
    elif digitsum(p) % 3 == 0: 
        return False
    elif p % 10 == 0 or p % 10 == 5:
        return False
    else:
        return True

def lfactor(n):

    if n <= 3:
        return 1

    limit = int(math.sqrt(n))
    if limit % 2 == 0:
        limit -= 1

    lfac = 1
    for i in range(3,limit+1,2):
        if prime_form(i):
            (div,rem) = divmod(n,i)
            if rem == 0:
                lfac = max(lfac, max(lfactor(div) ,lfactor(i)))

    return lfac if lfac != 1 else n

number = int(sys.argv[1])
t = Timer("""print lfactor(number)""", """import primefacs""")
t.timeit(100)
#print lfactor(number) 
```

如果我想为这条线计时，`print lfactor(number)`为什么我应该经历一堆循环，试图定义一个设置语句等。我理解为什么人们想要拥有与正在测试的代码分离的调试工具（la unit testing ) 但不应该有一种简单直接的方法来获得一大块代码的处理时间而没有太多麻烦（导入/定义设置等）吗？我在这里的想法类似于这样做的方式：

```
long t0 = System.currentTimeInMillis();
// do something
long t = System.currentTimeInMillis() - t0; 
```

.. 使用 tic/toc 命令，使用 MATLAB 甚至更好：

```
tic
x = A\b;
t(n) = toc; 
```

希望这不会让人觉得这是一种咆哮，我真的在努力理解“pythonian 的思维方式”，但老实说，这并不是自然而然的，根本不是......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T16:50:21.447

很简单，语句和设置背后的逻辑是设置不是您要进行基准测试的代码的一部分。通常一个python模块被加载一次，而其中的函数运行不止一个，更多。

pythonic的使用方式`timeit`？

```
$ python -m timeit -h

Tool for measuring execution time of small code snippets.

This module avoids a number of common traps for measuring execution
times.  See also Tim Peters' introduction to the Algorithms chapter in
the Python Cookbook, published by O'Reilly.

Library usage: see the Timer class.

Command line usage:
    python timeit.py [-n N] [-r N] [-s S] [-t] [-c] [-h] [--] [statement]

Options:
  -n/--number N: how many times to execute 'statement' (default: see below)
  -r/--repeat N: how many times to repeat the timer (default 3)
  -s/--setup S: statement to be executed once initially (default 'pass')
  -t/--time: use time.time() (default on Unix)
  -c/--clock: use time.clock() (default on Windows)
  -v/--verbose: print raw timing results; repeat for more digits precision
  -h/--help: print this usage message and exit
  --: separate options from statement, use when statement starts with -
  statement: statement to be timed (default 'pass')

[cut]

$ python -m timeit -s 'from primefacs import lfactor' 'lfactor(42)'

$ # this does not work, primefacs is not binded, ie. not loaded
$ python -m timeit 'primefacts.lfactor(42)'

$ # this does not work too, lfactor is not defined
$ python -m timeit 'lfactor(42)'

$ # this works but the time to import primefacs is benchmarked too
$ # but only the first time is loaded, the successive ones the cache is used. 
$ python -m timeit 'import primefacts; primefacts.lfactor(42)' 
```

如您所见，`timeit`工作方式比您想象的要直观得多。

**编辑添加：**

> 我读到 time.clock() 调用在 unix 系统上不够准确（秒分辨率对于现代处理器来说简直是可悲的）。

引用文档：

> 在 Unix 上，以浮点数形式返回当前处理器时间，以秒为单位。精度，实际上是“处理器时间”含义的定义，取决于同名 C 函数的精度，但无论如何，这是用于对 Python 或计时算法进行基准测试的函数......分辨率通常优于一微秒。

进行中。。

> 我不得不说我真的不明白他们为什么要以这种违反直觉的方式去做。我似乎无法让它工作，而无需重写/重组我的代码，我觉得这非常令人沮丧。

是的，可能是这样，但这是文档可以帮助您的情况之一，这里是凤仙花[示例的链接。](http://docs.python.org/3/library/timeit.html)这里比较[温和的介绍](http://www.doughellmann.com/PyMOTW/timeit/index.html#module-timeit)一下`timeit`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T16:45:21.127

为语句计时时，您只想为该语句计时，而不是设置。设置可能比被测语句慢得多。

请注意，`timeit`运行您的语句数千次以获得合理的平均值。它这样做是为了消除操作系统调度和其他进程（包括但不限于磁盘缓冲区刷新、cronjob 执行、内存交换等）的影响；在比较不同的代码替代方案时，只有平均时间才有意义。

对于您的情况，只需`lfactor(number)`直接测试，然后使用以下`timeit()`功能：

```
timeit.timeit('lfactor(number)', 'from __main__ import lfactor, number') 
```

设置代码检索`lfactor()`函数，以及`number`从`sys.argv`主脚本中获取；否则将不会看到功能和编号。

对语句进行性能测试绝对*没有*`print`意义，这不是您要计时的。使用`timeit`不是查看调用的结果，*而是*查看运行它所需的时间。由于被测代码运行了数千次，因此您得到的只是（可能）相同结果的数千次打印。

请注意，通常`timeit`用于比较短 python 片段的性能特征；要在更复杂的代码中找到性能瓶颈，请改用[分析](https://stackoverflow.com/questions/582336/how-can-you-profile-a-python-script)。

如果您只想计时一次，请使用该`timeit.default_timer()`功能为您的平台获取最准确的计时器：

```
timer = timeit.default_timer
start = timer()
print lfactor(number)
time_taken = timer() - start 
```

# processing - 如何从周长连接两个椭圆？

> ID：14004485
> 
> 赞同：1
> 
> 时间：2012-12-22T16:27:21.413
> 
> 标签：processing

我正在练习使用向量。在这个草图中，我画了一条连接两个椭圆中心的线。如何缩短线以使其接触每个椭圆的周长（而不是中心）？

```
PVector v1, v2;

void setup(){
  noLoop();
  v1 = new PVector(40, 20);
  v2 = new PVector(25, 50);
}

void draw(){
  ellipse(v1.x, v1.y, 12, 12);
  ellipse(v2.x, v2.y, 12, 12);

  line(v1.x, v1.y, v2.x, v2.y);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T16:31:09.833

首先，您需要计算线与圆边缘相交的点。幸运的是，这很容易：（注意我不知道处理，所以把它当作伪代码）

```
direction = atan2(v2.y-v1.y,v2.x-v1.x)
x1 = v1.x+cos(direction)*radius
y1 = v1.y+sin(direction)*radius
x2 = v2.x-cos(direction)*radius
y2 = v2.y-sin(direction)*radius 
```

然后画线`(x1,y1,x2,y2)`

# objective-c - Facebook SDK 对帖子 iOS 的评论

> ID：14004486
> 
> 赞同：1
> 
> 时间：2012-12-22T16:27:30.497
> 
> 标签：objective-c, ios, cocoa-touch, facebook-ios-sdk

据我了解，对帖子发表评论。我需要帖子的ID。但就我而言，我想在发布消息之前知道帖子 ID。这可能吗？现在我使用 FBRequestConnection 将消息发布到墙上。但我希望 id 包含在消息中，因为将有一个 url 方案来打开我的应用程序。

# java - 在大量java源文件中替换一行

> ID：14004487
> 
> 赞同：3
> 
> 时间：2012-12-22T16:27:31.770
> 
> 标签：java, eclipse, rad

我在一个项目中有大约 600 个 Java 类，它们的名称是随机的（它们的名称中没有模式）。

我想用另一行替换这些类中的特定行。

例如，这些文件中的行是

```
System.out.println("Product is: "+myProduct); 
```

我想用

```
System.out.println("Object is: "+myObject); 
```

上面的行只是一个例子，展示了我想要实现的目标。

我正在使用 RAD 7.5 进行开发。

有没有一种简单的方法可以一次在所有 600 个文件中执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T16:31:50.053

是的。通过打开 Search - File... 对话框，输入您要搜索的内容和所需的文件过滤器，然后单击*Replace*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T16:32:51.747

> 不，不能访问 UNIX 系统。

这是你的第一个问题。安装[Cygwin](http://www.cygwin.com/)让你有一个坚实的外壳，然后你可以学习如何对源代码进行批处理操作。能够`grep`轻松解决问题可以更轻松地学习大型代码库，并减少可能导致棘手问题的代码量。

一旦你安装了它，你可以解决你的直接问题

```
perl -i.bak \
  -pe 's/System.out.println\("Product is: "+myProduct\);/System.out.println("Object is: "+myObject);/' \
  file0.java file1.java ... 
```

分解它：

1.  `-i`意味着将参数视为文件以就地修改
2.  `.bak`意味着在进行更改之前制作带有`.bak`扩展名的输入文件的副本
3.  `-p`意味着将程序包装在一个循环中，该循环抓取一行，运行程序并打印该行
4.  `-e 's/.../.../'`表示引用的部分是要运行的程序，它会进行正则表达式替换。
5.  其余的是运行它的文件。

或者，

```
find . -name \*.java 
```

应该列出当前目录下的所有 java 源文件。

假设该目录的路径中没有空格，那么您可以执行

```
find . -name \*.java | xargs perl -i.bak -pe 's/.../.../' 
```

其中`...`是上面的替换以在工作目录下的所有 Java 源上运行它。

# c - 不同字节大小之间的文件和网络可移植性

> ID：14004492
> 
> 赞同：1
> 
> 时间：2012-12-22T16:28:40.637
> 
> 标签：c, byte, portability

在 C 中，fread 函数是这样的：

```
size_t fread(void *buf, size_t max, FILE *file); 
```

通常 char* 数组用作 buf。人们通常假设 char = 8 位。但如果不是真的呢？如果用 8 位字节系统编写的文件在 10 位字节系统上读取会发生什么？对于不同大小字节的系统之间的文件和网络流的可移植性，是否有任何单一标准？最重要的是，如何编写这方面的可移植代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T17:44:21.767

关于网络通信，物理访问协议（如以太网）定义了“信息单元”中有多少位，并由实现将其映射到适当的类型。因此，对于网络通信来说，支持奇怪的架构是没有问题的。

对于文件访问，如果您想支持奇怪的架构，事情会变得更有趣，因为没有可参考的标准，甚至将文件放在系统上的方法也可能会影响您访问它们的方式。幸运的是，目前使用的唯一不支持 8 位字节的系统是 DSP 和根本不支持文件系统的类似小型嵌入式系统，所以这个问题基本上没有实际意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T16:36:57.180

如今，位大小不是 8 的系统非常罕见。但是也有其他大小的机器，文件不能保证可以移植到这些机器上。

如果需要超级可移植性，那么您必须在文件中使用某种编码来处理 char != 8 位。

你有没有想过这可能必须在 DEC 10 或真正旧的 IBM 大型机、DSP 或类似的主机上运行，​​或者你只是为了“我想知道”的目的而询问。如果是后者，我只会“忽略此案”。这是非常特殊的机器，没有 8 位字符 - 你很可能会遇到其他问题，而不是每个字符的位数，然后才能在系统上使用你的“文件” - 比如如何首先在那里获取文件，因为您可能无法插入 USB 记忆棒或使用 FTP 传输它（尽管后者可能是最有可能的）

# windows-phone-7 - 数据绑定 + 动态枢轴

> ID：14004493
> 
> 赞同：3
> 
> 时间：2012-12-22T16:29:42.493
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone, windows-phone-8

我在将 PivotItem 动态添加到模板化和数据绑定的 Pivot 时遇到问题。

正在使用的类（稍微简化以使其易于理解）；

```
class Menu {
    string Name
    List<Dish> Dishes_1;
    List<Dish> Dishes_2;
    List<Dish> Dishes_3;    
}
class Dish {
    string Description
    string Price;     
} 
```

我想使用 Pivot 来显示菜单对象列表。我根据该列表中的项目数动态创建 PivotItems。因此，每个 PivotElement 都应遵循相同的布局并表现相同。布局模板和数据绑定在 .xaml 中完成，如下所示；

```
 <phone:Pivot x:Name="Mainpivot">
        <phone:Pivot.HeaderTemplate>
          <DataTemplate>
            <TextBlock Text="{Binding Name}" />
          </DataTemplate>
        </phone:Pivot.HeaderTemplate>    
        <phone:Pivot.ItemTemplate>
           <DataTemplate>
                <ListBox>

                    <TextBlock Text="Dishes_1"/>
                    <ListBox ItemsSource="{Binding Dishes_1}">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <Grid>
                                    <TextBlock Text="{Binding Description}"/>
                                    <TextBlock Text="{Binding Price}"/>
                                </Grid>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>

                   // ...
                   // this is repeated 3 times; 
                   //a textblock and listbox per List<Dishes> in the Menu-class

                </ListBox>
            </DataTemplate>
        </phone:Pivot.ItemTemplate>
    </phone:Pivot> 
```

我使用以下内容填充 de .cs 文件中的 Pivot：

```
foreach (Menu m in List_Menus) {
    PivotItem p = new PivotItem();
    p.DataContext = m;
    Mainpivot.Items.Add(p);
} 
```

当我将 DataContext 设置为 Menu-Object 时，DataBinding（通过 xaml）在这里不需要更多代码（所以我认为？）。

现在的问题是；它不起作用...

通过使用调试器查看，创建的 PivotItem 的行为似乎与 Mainpivot 中定义的模板不同（或者我认为如此）。查看 Mainpivot 确实表明已添加 PivotItems，但仅此而已，我相信它们只是空的全空 PivotItems。在模拟器中执行时，它只显示一个空的 Pivot。

有什么想法吗？

//PS：我不使用 ViewModel，因为我发现它们（作为初学者）作为概念很混乱。我不认为这与问题有任何关系吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T18:34:04.070

这里有几件事。首先，要使您的绑定工作，您需要使用属性而不是字段。

```
public class Menu {
    public string Name {get;set;}
    public List<Dish> Dishes_1 { get; set; }
    public List<Dish> Dishes_2 { get; set; }
    public List<Dish> Dishes_3 { get; set; }   
}

public class Dish {
    public string Description { get; set; }
    public string Price { get; set; }     
} 
```

接下来，而不是您的 foreach 循环将项目添加到枢轴，只需设置项目源：

```
Mainpivot.ItemsSource = List_Menus; 
```

顺便说一句 - 你真的应该研究学习 MVVM。值得花时间。

# javascript - 点击获取嵌套 DIV 的类

> ID：14004498
> 
> 赞同：0
> 
> 时间：2012-12-22T16:30:15.267
> 
> 标签：javascript, jquery, html

这是HTML：

```
<div id="star" class="star1">
<div id="star" class="star2">
<div id="star" class="star3">
<div id="star" class="star4">
<div id="star" class="star5">
</div>
</div>
</div>
</div>
</div> 
```

和 Javascript：

```
$(document).ready(function() {

$('#star').click(function(e){

    e.stopPropagation();
    var class_name = $(this).attr('class');
    alert(class_name);
});

}); 
```

我遇到的问题是我只能获得第一个父 div 的类。我想从单击的任何 div 中获取课程。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T16:33:01.840

您的代码似乎试图为每个 div 找到一个唯一标识符。如果这是您要尝试做的，那么您可以将 class 属性的值与 id 属性的值进行切换。

**HTML**

```
<div id="star1" class="star">
</div> 
```

**JavaScript**

```
$(document).ready(function() {

    $('.star').click(function(e){

        e.stopPropagation();
        var id = $(this).attr('id');
        alert(id);
    });

}); 
```

在 HTML 中，元素的 ID 是唯一的，而 class 属性可以用于多个元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T16:36:10.517

的`ids`html 元素应该是唯一的。分配唯一的 id 并使用类选择器并分配`common`类来对它们进行分组。

**[现场演示](http://jsfiddle.net/e3k3t/1/)**

```
<div id="star1" class="star">1
<div id="star2" class="star">2
<div id="star3" class="star">3
<div id="star4" class="star">4
<div id="star4" class="star">5
</div>
</div>
</div>
</div>
</div>​

$('.star').click(function(e){

    e.stopPropagation();
    var id = $(this).attr('id');
    alert(id);
}); 
```

`approach you are using is not correct but`有时您一定会使用这种错误的模式，如果是这样，您就可以这样做。

**[现场演示](http://jsfiddle.net/LuLQ9/1/)**

```
$('[id=star]').click(function(e){

    e.stopPropagation();
    var class_name = $(this).attr('class');
    alert(class_name);
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T16:48:28.890

首先要记住这一点，**不要对多个标签使用相同的 id**。

```
<div id="star1" class="star">1
    <div id="star2" class="star">2
        <div id="star3" class="star">3
            <div id="star4" class="star">4
                <div id="star5" class="star">5
                </div>
            </div>
        </div>
    </div>
</div>
<script>
 jQuery(function($){
$('.star').click(function(e) {
        e.stopPropagation();
        $('#out').html("My Class: "+$(this).attr('class')+ " My Id:" + $(this).attr('id'));
    });​
}); 
```

请检查这个[小提琴](http://jsfiddle.net/jeykeu/RBDZt/1/)，这可能是你正在寻找的东西

# php - PHP - 函数调用中的变量赋值

> ID：14004499
> 
> 赞同：1
> 
> 时间：2012-12-22T16:30:22.253
> 
> 标签：php

我有以下代码，我尝试为变量赋值，然后评估它是否为空：

```
if(!empty($user = User::find($id))){
   // do some operations on the $user
} 
```

但是我遇到了一个错误...... PHP 编译器是否允许这样做？

PS。我正在使用 PHP 5.3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T16:37:40.470

> PHP 编译器是否允许这样做？

查看[有关空的手册页](http://php.net/empty)：

> 在 PHP 5.5 之前，empty() 只支持变量；其他任何事情都会导致解析错误。

在您的代码中，您有赋值操作而不是普通变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T16:32:34.900

通常，如果一个函数找不到某些东西，即一个用户，那么它`false`无论如何都会返回 - 所以这是我通常做的：

```
if($user = User::find($id))
   // do some operations on the $user
}
else
{
   // no user found 
} 
```

# java - 转换集合 > 到二维数组 T[][]

> ID：14004503
> 
> 赞同：2
> 
> 时间：2012-12-22T16:30:38.047
> 
> 标签：java

> **可能重复：**
> [将 ArrayList 转换为包含不同长度数组的二维数组](https://stackoverflow.com/questions/10043209/convert-arraylist-into-2d-array-containing-varying-lengths-of-arrays)

如何将 a`Collection<List<Foo>>`转换为类型的二维数组`Foo[][]`？

我正在尝试使用该`toArray`方法，但我不确定语法。例如，这不起作用：

```
import com.google.common.collect.Collections2;
Collection<List<Foo>> permuted = Collections2.permutations(bar);
Foo[][] permutedArray = permuted.toArray(new Foo[10][10]);//exception here 
```

它在扔`ArrayStoreException`。在这种情况下，类型应该是什么`permutedArray`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T16:50:15.230

`.toArray`只能将集合转换为`List<Foo>[]`. 您需要再次调用`.toArray`list 数组的每个元素才能真正获得`Foo[][]`.

```
 @SuppressWarnings("unchecked")
    final List<Foo>[] permutedList = permuted.toArray(new List[10]);
    final Foo[][] permutedArray = new Foo[10][10];
    for (int j = 0; j < 10; ++j) {
        permutedArray[j] = permutedList[j].toArray(new Foo[10]);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T17:03:09.097

这似乎做一组嵌套循环可能更有意义：

```
//Untested, I might have made some silly mistake
T[][] array = new T[collection.size()[];
int collection = 0;
int list = 0;

for(List<T> list : collection)
{
  list = 0;
  array[collection] = new T[list.size()];
  for(T t : list)
    array[collection][list++] = t;

  collection++;
} 
```

“toArray”方法很方便，但由于泛型类型，我通常觉得使用起来很沮丧。像这样的实用方法通常更容易阅读并避免您遇到的问题。

*编辑：我应该注意：您需要知道或强制转换 T。它会生成一个未经检查的类型异常（这当然是未经检查的！）。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T18:22:40.763

如果您尝试以下通用实用程序函数会怎样：

```
public static <T> T[][] asMatrix(
    Collection<? extends Collection<? extends T>> source,
    T[][] target) {

    // Create a zero-sized array which we may need when converting a row.
    @SuppressWarnings("unchecked") T[] emptyRow =
        (T[])Array.newInstance(target.getClass().getComponentType().getComponentType(), 0);

    List<T[]> rows = new ArrayList<T[]>(source.size());
    int i = 0;
    for (Collection<? extends T> row : source) {
        T[] targetRow = i < target.length ? target[i] : null;
        rows.add(row.toArray(targetRow != null ? targetRow : emptyRow));
        i += 1;
    }
    return rows.toArray(target);
} 
```

用法：

```
Collection<List<Foo>> permuted = ...;
Foo[][] result = asMatrix(permuted, new Foo[][] {}); 
```

它的工作方式是访问每个子集合（即行），将其转换为数组。我们将这些数组缓存在一个集合中。然后我们要求该集合将自己转换为一个数组，我们将其用作函数的结果。

这个效用函数的好处是：

1.  它`Collection.toArray`用于所有的数组构造和复制。
2.  该函数是通用的，因此可以处理任何类型的引用类型（不幸的是，像 , 等原生类型`int`需要`long`更多的工作）。
3.  您传入目标数组，它甚至可能被预先分配到一定的大小，其行为与所做的完全相同`Collection.toArray`。
4.  该函数可以容忍同时改变其大小的集合（只要集合本身是可以容忍的）。
5.  转换是类型安全*且*类型严格的。

更多示例：

```
List<List<Integer>> list =
    Arrays.asList(Arrays.asList(1, 2), Arrays.asList(3, 4));

Integer[][] result;

result = asMatrix(list, new Integer[][] {});
System.out.println(Arrays.deepToString(result));

result = asMatrix(list, new Integer[][] {new Integer[] {9, 9, 9, 9}, null});
System.out.println(Arrays.deepToString(result)); 
```

结果：

```
[[1, 2], [3, 4]]
[[1, 2, null, 9], [3, 4]] 
```

# jakarta-ee - 如何判断事务在 Java EE 6 拦截器中是否处于活动状态？

> ID：14004504
> 
> 赞同：11
> 
> 时间：2012-12-22T16:30:39.007
> 
> 标签：jakarta-ee, transactions, interceptor

我打算为 EJB 编写一个拦截器，它基本上会执行以下操作：

```
@AroundInvoke
public Object setContext(InvocationContext ctx) throws Exception {
    em.createQuery("... set something [database specific] ...").getSingleResult();
    try {
        return ctx.proceed();
    } finally {
        em.flush();
        em.createQuery("... unset something [database specific] ...").getSingleResult();
    }
} 
```

问题是如果将 em.flush() 应用于使用 @TransactionAttribute(NOT_SUPPORTED) 或 @TransactionAttribute(SUPPORTS) 注释的方法（即只读方法），则 em.flush() 会引发异常，而它适用于使用默认 @ 的方法TransactionAttribute(REQUIRED)（即更改数据库的方法）。

**有没有办法判断事务是否处于活动状态**，以避免在当前没有事务运行时调用 em.flush()，或者我必须创建两个拦截器，一个带有 em.flush()，一个不带它？

我无法注入 UserTransaction，因为 bean 使用容器管理的事务。EntityManager 的 (em) 事务方法仅适用于 resource_local 事务，不适用于 JTA 事务。我需要 em.flush() 调用以确保未*设置*的查询是运行的最后一件事。

作为奖励问题，有谁知道我想要做的是否是某种不好的做法？我知道拦截器在与 bean 相同的上下文中运行，因此通过数据库会话共享内容是安全的，但我必须*非常小心*地在退出时取消设置所有内容，因为连接被汇集在容器中。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-22T19:25:05.267

您可以注入一个[TransactionSynchronizationRegistry](http://docs.oracle.com/javaee/6/api/javax/transaction/TransactionSynchronizationRegistry.html)并使用[getTransactionStatus](http://docs.oracle.com/javaee/6/api/javax/transaction/TransactionSynchronizationRegistry.html#getTransactionStatus%28%29)在当前上下文中获取事务的状态，它返回一个[状态](http://docs.oracle.com/javaee/6/api/javax/transaction/Status.html)`int`类中的常量，在您正在寻找的情况下`STATUS_NO_TRANSACTION`

注入：

```
@Resource
TransactionSynchronizationRegistry tsr; 
```

检查交易状态：

```
if (Status.STATUS_NO_TRANSACTION == tsr.getTransactionStatus()) {
   // no transaction
} 
```

# javascript - 提交图像表单验证

> ID：14004505
> 
> 赞同：0
> 
> 时间：2012-12-22T16:30:44.863
> 
> 标签：javascript, image, forms, validation

```
$('#submit-img').on('click', function() {
    $('#img').attr('src', $('#url').val());     
});

function validate() {
    if ($('#img').attr('src') === '../static/img/placeholder.png'){
        return false;
    }
}

<form method="post" action="/{{ curr_user }}" enctype="multipart/form-data" onSubmit="return validate(this);" >
    <div class="imagey">
        <img id="img" src="../static/img/placeholder.png" onerror="this.src = '../static/img/placeholder.png'" alt="image" />
    </div>
    <span class="input-url">
         <input type="text" name = "url" id="url" placeholder="http://" maxlength="320"/>
    </span>
    <input type="submit" id="submit-img" name="op" value="Submit" class="form-submit"/>
</form> 
```

此验证码对我不起作用。任何猜测为什么？

此外，如果将 validate 函数中的 if 语句替换为 just`alert($('#img').attr('src'))`

警报说`Undefined`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T16:46:49.833

您的代码中有多个错误。

首先，这会在浏览器中创建无限循环的 404

```
<img id="img" src="../static/img/placeholder.png" onerror="this.src = '../static/img/placeholder.png'" alt="image" /> 
```

其次，它应该是 $('.submit-img')，而不是 $('#submit-img')，因为您设置了 class 属性，而不是 id 属性。

第三，您需要将 jQuery 代码包装到 $(document).ready(function() { ... });

修复后，代码[在 jsfiddle 上适用于我](http://jsfiddle.net/GKYdP/)

[编辑：]好的，可能这就是你要找的：

```
$(document).ready(function() {
    $('#url').on('keyup', function() {
        $('#img').attr('src', $('#url').val());
    });
}); 
```

当用户输入 URL 时，将显示图像。

[jsfiddle 上的示例](http://jsfiddle.net/GKYdP/1/)

# android - 如何克隆 Andengine 文件？

> ID：14004508
> 
> 赞同：-1
> 
> 时间：2012-12-22T16:30:50.560
> 
> 标签：android, andengine

我看过许多建议使用 Mercurial 克隆 andengine 及其扩展的教程。

网址是[https://code.google.com/p/andengine](https://code.google.com/p/andengine)。但是，当我使用此 URL 进行克隆时，我得到一个 README 文件，告诉我所有内容都已移至[https://github.com/nicolasgramlich/AndEngine](https://github.com/nicolasgramlich/AndEngine)

但是我无法从这里克隆。我应该如何克隆文件

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T16:33:27.237

他们搬到了 Github，所以你需要使用[Git](http://git-scm.com/)来获取文件。有关详细信息，请参阅[安装 Git](http://git-scm.com/book/en/Getting-Started-Installing-Git)。

```
git clone git://github.com/nicolasgramlich/AndEngine.git 
```

# java - Struts 自定义标签

> ID：14004514
> 
> 赞同：2
> 
> 时间：2012-12-22T16:31:39.547
> 
> 标签：java, jsp, tags, struts, custom-tag

晚上好！
*我正在使用 Struts 1x*
我想编写自定义标签，这取决于数据，以 struts 形式存储。现在我有这样的代码：

```
<tr>
    <td>
        <nested:form action="/action.do?method=index" method="post">
            <div class="className">
                <nested:text property="form.value"/>
                    some value
                <nested:submit/> 
            </div>
        </nested:form>
    </td>
</tr> 
```

我想把这段代码放到我的自定义标签中，但我想保持`text input`和表单字段之间的关系。很明显，这段代码的输出，用起来`pageContext.getOut().write(code);`没用。我试图用谷歌搜索“struts custom tags”，但没有发现任何有用的东西。我知道，我可以将`text input`值作为参数传递，有点难看。你可以帮帮我吗？

最诚挚的问候。

# matlab - 如何在 Matlab 中将 svmtrain() 与自定义内核一起使用？

> ID：14004517
> 
> 赞同：0
> 
> 时间：2012-12-22T16:31:52.377
> 
> 标签：matlab, machine-learning

svmtain() 是 MATLAB 中用于 SVM 学习的函数。帮助文档在这里：

[http://www.mathworks.com/help/bioinfo/ref/svmtrain.html](http://www.mathworks.com/help/bioinfo/ref/svmtrain.html)

如何将它与自定义内核一起使用？在帮助文档中，它说：

* * *

> `@kfun`— 内核函数的函数句柄。核函数必须是以下形式
> 
> ```
>  function K = kfun(U, V) 
> ```
> 
> 返回值 ,`K`是一个大小为 M×N 的矩阵，其中`U`和`V`have`M`和`N`rows 分别为。

* * *

它没有提到 U 和 V 是什么以及 M 和 N 的含义。我只是不知道如何以正确的格式使用它。谁能告诉我U和V是什么，M和N是什么意思？例如，训练数据是 5 维向量，核函数是向量长度之和。如何编写核函数？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T09:50:57.123

只是一个猜测：

根据：[http](http://www.tech.dmu.ac.uk/~hseker/Statistics%20in%20Genetics/Statistical%20Learning%20and%20Visualization%20in%20MATLAB.doc) ://www.tech.dmu.ac.uk/~hseker/Statistics%20in%20Genetics/Statistical%20Learning%20and%20Visualization%20in%20MATLAB.doc ，U，V 应该只是函数中的参数处方 K，例如，如果您的内核是`tanh`，那么：

```
function K = kfun(U,V,P1,P2)
K = tanh(U*V'); 
```

并且`P1, P2`是针对您各自内核的一些附加功能。但正如我在评论中所写，您需要成为优秀的数学家才能获得比已定义内核获得的结果更好的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T19:21:36.010

内核函数是机器学习算法中最常用的技术之一。这是来自维基百科的定义：

> 对于机器学习算法，内核技巧是一种将观察从一般集合 S 映射到内积空间 V（配备其自然范数）的方法，而无需显式计算映射，希望观察得到V中有意义的线性结构。

即这个内核用于RBF：

```
K(x,y) = (x*y + c)^d 
```

以下是内核的详细解释：[http](http://www.youtube.com/watch?v=bUv9bfMPMb4) ://www.youtube.com/watch?v=bUv9bfMPMb4 by Andrew Ng。

有一些内核（即高斯内核），内核具有相同的约定，这就是为什么它被概括为 K(u,v)。您可以尝试不同的内核性能，也可以搜索有关您从事的工作的相关作品并尝试使用那种内核。

# php - 注销后重定向 Tank Auth CodeIgniter

> ID：14004521
> 
> 赞同：0
> 
> 时间：2012-12-22T16:32:05.030
> 
> 标签：php, codeigniter, tankauth

我用谷歌搜索，搜索再搜索，我在任何地方都找不到这个问题的答案。

我正在使用带有 CodeIgniter 的 Tank Auth。我在加载登录、注册等视图时没有问题。我的问题是，当我创建注销链接时，它会很好地注销，但随后会将我重定向到登录页面。我想重定向到我的家庭控制器。登录后我可以做到这一点就好了，但我一辈子都找不到注销后重定向的地方。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T16:51:09.863

```
function logout()
{
    $this->tank_auth->logout();

    // Redirect to home page
    redirect('', 'refresh');
} 
```

# linux - 清理此命令

> ID：14004531
> 
> 赞同：3
> 
> 时间：2012-12-22T16:32:49.880
> 
> 标签：linux, grep, ps

我想知道如何减少此命令中使用的 grep 或管道的数量。

```
ps h -eo pid:1,uid,command | grep -v "screen" | grep java | grep -v "bash" | grep -v "grep" 
```

可以减少吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T16:36:54.337

这符合您的需求吗？

```
ps h -eo pid:1,uid,command | grep -Ev "screen|bash" | grep '[j]ava' 
```

# 解释

*   `[j]ava``regex`是避免使用的已知技巧`grep -v 'grep'`

# .net - 如何在 Windows 8/RT xaml 中显示消息框？

> ID：14004537
> 
> 赞同：4
> 
> 时间：2012-12-22T16:33:19.143
> 
> 标签：.net, vb.net, windows-runtime, winrt-xaml

> **可能重复：**
> [Windows 8 应用商店应用程序是否具有等效的 MessageBox？](https://stackoverflow.com/questions/13903494/do-windows-8-store-apps-have-a-messagebox-equivalent)

是否有与此代码等效的代码：

```
If MessageBox.Show("Text","Title", MessageBoxButtons.YesNo) = MessageBoxButton.No Then
   Blah()
End If 
```

我一直在寻找类似的东西，但没有运气。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-22T16:53:00.377

[MessageDialog](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.popups.messagedialog)类可以实现这一点。

# git - Git 工作流程拉取与获取

> ID：14004539
> 
> 赞同：3
> 
> 时间：2012-12-22T16:33:24.120
> 
> 标签：git, workflow, fetch, pull

我知道以前有人问过这个问题，但在我看来答案已经随着时间而改变，所以我很困惑。因此，一劳永逸地在 2012 年 12 月 22 日末日之后，（我们这些幸存下来的人）当您想从远程分支中提取最新更改时，推荐使用 git 的方式说“开发”。

我使用拉，老实说从未使用过获取。我只是感到震惊，我可能会让自己陷入某种奇怪的境地。

这是我的工作流程示例：

```
git pull origin develop
git checkout -b story-001
...do some work
git commit -am "fixed utests"
.. do some more work
git commit -am "fixed impl for service x"
git rebase develop
git checkout develop
git merge --squash story-001
git commit -m "Story 001 completed <testinfo>"
git push origin develop
..error.. master is head..
git pull origin develop
..maybe merge issue
git mergetool
..resolved problem
git commit -am "resolved merge for story 001"
git push origin develop
git branch -D story-001
....
... and so on
... after a while some changes on remote <develop>
... 
git pull origin develop 
```

正如你所见，我的世界里没有 fetch，为什么会有？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-22T16:37:55.043

好吧，[`git pull`](http://git-scm.com/docs/git-pull)确实[`git fetch`](http://git-scm.com/docs/git-fetch)其次[`git merge`](http://git-scm.com/docs/git-merge)。因此，如果您希望自动合并`pull`ed 存储库，那么您不需要`git fetch`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-04T23:08:40.710

如果您希望您当前的（本地）工作保持领先，您可以

```
git fetch
git rebase origin/develop 
```

或者

```
git pull --rebase 
```

在远程和本地更改时合并代码，即拉取，可能会导致您的本地工作以错误的顺序放置并被远程更改覆盖。

因此，如果您只想抓住遥控器，如果您在本地完成了一些工作，则应该进行拉取操作。只是为了保持简单。但大多数时候，如果你幸运的话，拉动会起作用。

这是我通过更多研究了解到的。但是我不确定，直到我尝试一个小实验来验证。

我认为最好的解决方案是大多数时候使用 git pull --rebase ，以某种方式更有意义。据我了解，您可以更改 git pull 的默认行为，但这可能很危险，因为您可能会忘记它并使自己更加困惑。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-22T16:47:02.620

我通常是这样工作的：

```
git pull origin develop
git checkout -b story-001
git commit -am "..."
# more commits, squash the commits, reorganize 
```

而在这个阶段，我经常做`git fetch`以获得最新的变化。如果有任何新的变化，我会`git rebase origin/develop`在新的变化之上移动我在特性分支上的工作。

```
# work some more
git checkout develop
git merge # defaults to origin
git merge story-001
git push 
```

使用这个工作流程，我没有合并提交，历史非常干净。另外我通常不写这些命令，试试[git-smart 之](https://github.com/geelen/git-smart)类的。

# datetime - 如何转换熊猫系列值的时区

> ID：14004545
> 
> 赞同：8
> 
> 时间：2012-12-22T16:34:15.983
> 
> 标签：datetime, numpy, timezone, pandas

我有一个熊猫系列，其值为 type `datetime64[ns]`。日期在 EST 时区，我想将它们转换为 UTC 时区。

例如，

```
 s=pd.Series(pd.date_range('2012-1-1 1:30',periods=3,freq='min')) 
```

如何转换`s`为UTC？

（请注意，我实际上并没有使用`date_range()`，所以使用它的`tz`参数不是一个选项。）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-23T15:55:17.313

更新：在最近的 pandas 中，您可以使用 dt 访问器来广播：

```
In [11]: s.dt.tz_localize('UTC')
Out[11]:
0   2012-01-01 01:30:00+00:00
1   2012-01-01 01:31:00+00:00
2   2012-01-01 01:32:00+00:00
dtype: datetime64[ns, UTC] 
```

* * *

这是一种方法（取决于 tz 是否已经设置，它可能是 a[`tz_convert`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.tz_convert.html#pandas.Series.tz_convert)而不是[`tz_localize`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.tz_localize.html#pandas.Series.tz_localize)）：

```
In [21]: from pandas.lib import Timestamp

In [22]: s.apply(lambda x: x.tz_localize('UTC')) 
Out[22]: 
0    2012-01-01 06:30:00+00:00
1    2012-01-01 06:31:00+00:00
2    2012-01-01 06:32:00+00:00 
```

# c++ - 向量元素未更新

> ID：14004546
> 
> 赞同：0
> 
> 时间：2012-12-22T16:34:19.563
> 
> 标签：c++

fb.Entities 集合中的 iX 和 iY 怎么没有更新？

难道我做错了什么？我正在学习，这是更新向量中某些值的正确方法吗？

```
 for (Entity i : fb.Entities) 
    {
        if (i.Serial == SerialID)
        {
            i.X = (USHORT)((data[5] << 8) + data[6]);
            i.Y = (USHORT)((data[7] << 8) + data[8]);
            break;
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T16:37:10.643

你需要

```
for (Entity& i : fb.Entities) 
```

取实际实体，而不是副本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-22T16:37:24.573

您需要*引用*容器元素：

```
for (Entity & i : fb.Entities)  { /* ... */ }
//         ^^^ 
```

或者：

```
for (auto & i : fb.Entities) 
```

（否则，`i`将是容器元素的*副本*，因此对它的任何更改都会丢失。）

# c++ - C++ 中的 HTTP 获取请求

> ID：14004550
> 
> 赞同：3
> 
> 时间：2012-12-22T16:35:03.557
> 
> 标签：c++, http, get

我需要向我的站点发送一个 HTTP GET 请求，然后获取页面内容并对其进行解析。我宁愿不使用 libCURL 之类的库，因为我希望最终应用程序完全独立（这是从个人经验中引用的，我可能是错的，但如果我记得客户端必须有某些动态链接库才能使用 libCURL 运行应用程序库。），我在 Visual Studio 2012 中使用 C++。

代码示例也很好。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-22T16:39:33.873

当您不想使用外部库时，您将不得不自己实现 HTTP。当您只需要基本功能（直接下载文件、无重定向、无代理、无 cookie、无身份验证、无加密、无压缩、无其他恶作剧）时，这甚至不是那么难。

创建一个套接字，将其连接到 Web 服务器的 80 端口，并将以下字符串发送到服务器：

```
"GET /example.html HTTP/1.1\r\n"
"Host: www.example.com\r\n"
"\r\n" 
```

这会从您连接的服务器请求文件 www.example.com/example.html。

服务器将使用自己的 HTTP 响应标头进行响应，后跟数据（或错误描述）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-22T17:16:16.583

1.  大多数库都可以静态编译。当您使用静态库时，它会链接到您的可执行文件中，您不必发送库的 dll。也许这会有所帮助：[演练：创建和使用静态库（C++）](http://msdn.microsoft.com/en-us/library/vstudio/ms235627.aspx)

2.  一些库可以是仅标头或以仅标头模式使用：编译器将库拉入您的源代码。同样，没有为库生成 dll。例如，您可以尝试[让 Asio](https://stackoverflow.com/a/5089464/257568)和[cpp-netlib](https://github.com/cpp-netlib/cpp-netlib)在仅标头模式下为您工作。还有一个简单的 http 客户端示例，仅适用于某处的 Asio。
3.  我**认为**您可以使用[WinINet](http://msdn.microsoft.com/en-us/library/aa385331)或[WinHTTP](http://msdn.microsoft.com/en-us/library/aa384273)而无需提供任何 DLL。

# php - php彗星：吃CPU资源

> ID：14004552
> 
> 赞同：1
> 
> 时间：2012-12-22T16:35:29.290
> 
> 标签：php, comet

我建立了一个网站，我在其中使用了彗星和 php。只要我做了一些研究并找到了教程，它似乎很容易实现，对服务器也没有特殊要求，只是它会使用大量资源。现在，我收到来自托管的通知，说我的脚本正在以 90% 的速度消耗 cpu 资源 :( 我关闭了脚本，但我的问题是现在最好使用什么？我阅读了有关 node.js 的信息，但也阅读了他们会需要一些关于服务器的要求吗？在这种情况下有什么好的且易于实施的解决方案吗？

如果假设我在这个彗星脚本中每天有 2000 个用户，那么 VPS 或专用服务器可以吗？

编辑：

```
/*CLOSE THE SESSION WITH USER DATA*/
session_write_close();

// set time expire unlimited
set_time_limit(0);  

$OldPostID      = isset($_REQUEST['OldPostID']) ? intval($_REQUEST['OldPostID']) : 0;

$result_set_query_1 = $MClass->MyPostings($PageOwner); 

if (mysql_num_rows($result_set_query_1))
{
    $o = 0;
    while ($r = @mysql_fetch_array($result_set_query_1))
    {
        $PID = $r['PID'];
    }
}

$NewPostID = $PID;

while ($NewPostID <= $OldPostID)    
{
    usleep(10000); // sleep 10ms to unload the CPU
    clearstatcache();

    $result_set_query_2 = $MClass->MyPostings($PageOwner);

    if (mysql_num_rows($result_set_query_2))
    {
        $o = 0;
        while ($rs = @mysql_fetch_array($result_set_query_2))
        {
            $PID = $rs['PID'];
        }
    }

    $NewPostID = $PID;
}

// return a json array
$result_set_posts   = $MClass->GetAllMyPostings( $PageOwner, $OldPostID, 0); 

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T16:46:12.463

2000 个用户/天是一个小数字，除非典型的会话是 1 小时左右。标准 PHP 部署不能用于服务器推送场景，因为每个请求都由不同的进程处理。

如果您不想购买专用服务器，可以尝试回退到重复轮询（如果可以接受 30 秒的延迟）。但是，这是否真的有助于 CPU 使用取决于您的实际导航模式，所以这只是一个尝试。

否则，如果您负担得起专用硬件，请使用您更熟悉的语言。既然你命名为 Node.js，我猜你可以用 Javascript 编写代码，那么学习 Node 可能不是那么难的任务。Python (Twisted)、Java、Scala 以及任何你精通的语言都有替代方案。只需选择语言，然后相应地选择框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T16:52:34.247

Comet 本身不会使用大量资源，除非得到指示——它是脚本。如果您要在 JavaScript 中为 Node.js 服务器重写看似 CPU 密集型的脚本，它很可能会以相同的方式执行。

将“推送”系统组合在一起通常涉及设置一个云实例——例如，从 Heroku 中免费——或者设置一个可以访问 shell 的专用/VPS 服务器。

Node.Js 是一种较新的，虽然“推送”技术的实现相对不成熟。为了让节点运行，您需要安装一个 node.Js 服务器。很少有主机可以安装——但可以通过一些简单的 shell 命令轻松安装。

但从上述情况来看，很少有用户能够同时使用你的应用程序，因为它已经以 90% 的 CPU 运行，只有一个用户。如果用户在每个会话中使用该应用程序的时间很短，那么可以肯定，每天 2000 个用户是可行的，具体取决于同时使用的用户数量和时间。也许。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T17:06:28.393

PHP 服务器脚本通常通过循环运行服务器逻辑来保持活动状态。当我添加到循环末尾时，当我在运行 24/7 的 bcakground 脚本中遇到类似问题时，CPU 使用率从 90% 以上下降到 1% 以下`time_nanosleep(0, 10000000);`。这不是万无一失的方法，但它对我有用。

# ios - 如何创建用于 CoronaSDK 的虚假配置文件？

> ID：14004553
> 
> 赞同：1
> 
> 时间：2012-12-22T16:35:31.067
> 
> 标签：ios, coronasdk

我正在使用 Corona 创建游戏，但要为 iOS 构建应用程序，我需要在 Corona 中指定要使用的配置文件（我必须将其复制到他们的特定文件夹）。

如何创建虚假的临时配置文件？

我的设备已越狱，但我需要在我的设备上配置配置文件，即使它是 JB，以便在设备上构建电晕。

另一种方法是为 xcode 设备模拟器创建并在设备上运行它，但是当我从通过这种方法生成的应用程序制作 ipa 时，当我尝试将它同步到我的设备时，我得到“安装失败”。

我正在使用 xCode 4.5.2 运行 Mac OSX 10.7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T12:27:41.693

没有这样的事情。

Corona 使用 Apple 官方工具来构建它需要的东西，并且官方工具会在 Apple 服务器上检查配置文件，您需要为 Apple 开发人员计划付费并正确执行，或者坚持使用更骇人听闻的方法。

此外，当您为模拟器构建时，它构建了一个 x86 版本的应用程序，它永远不会在任何 iOS 设备（他们使用 ARM）上工作，模拟器不是模拟器，实际上是在本机运行应用程序。

# sql - 无法绑定多部分标识符

> ID：14004554
> 
> 赞同：3
> 
> 时间：2012-12-22T16:35:33.890
> 
> 标签：sql, sql-server

为什么我会收到此错误：

> *无法在第 18 行绑定多部分标识符 无法绑定
> 多部分标识符“ShipTB.sh_Type”。
> 第 32 行的多部分标识符“ShipTB.sh_Type”无法绑定。*

```
CREATE PROCEDURE DocumentReportProc   
(
   @searchOpt tinyint,
   @keyser nvarchar (50),
   @usertypeid tinyint output
)
as
SELECT     
    ExceptionTB.excep_ref, ExceptionTB.emo_no, ShipTB.sh_Type
FROM ExceptionTB 
INNER JOIN ShipTB ON ExceptionTB.emo_no = ShipTB.Emo_No 
where ExceptionTB.excep_ref like cast(@keyser as varchar(50)) + '%'

IF  ((ShipTB.sh_Type)=('تجارية'))
BEGIN

 SELECT 
    ExceptionTB.excep_ref, 
    ExceptionTB.emo_no, 
    ExceptionTB.broker, 
    ExceptionTB.r_date, 
    ShipTB.S_Name, 
    ShipTB.sh_Type, 
    ArrivalNotiDate.Arri_noti_date, 
    ArrivalNotiDate.port, 
    CargoCertificate.[1], 
    CargoCertificate.[2], 
    CargoCertificate.[3], 
    CargoCertificate.[4], 
    CargoCertificate.[5],  
    CargoCertificate.[6], 
    CargoCertificate.[7], 
    CargoCertificate.[8]
  FROM         ExceptionTB 
  INNER JOIN  ShipTB ON ExceptionTB.emo_no = ShipTB.Emo_No 
  INNER JOIN  ArrivalNotiDate ON ExceptionTB.excep_ref = ArrivalNotiDate.exp_ref 
  INNER JOIN  CargoCertificate ON ExceptionTB.excep_ref = CargoCertificate.excep_ref    
  where ExceptionTB.excep_ref like cast(@keyser as varchar(50)) + '%'   

END      
IF  (ShipTB.sh_Type='سياحية')
BEGIN
 SELECT     
    ExceptionTB.excep_ref,
    ExceptionTB.emo_no, 
    ExceptionTB.broker, 
    ExceptionTB.r_date, 
    ShipTB.S_Name, 
    ShipTB.sh_Type, 
    ArrivalNotiDate.Arri_noti_date, 
    ArrivalNotiDate.port, 
    PassengerCertificate.[1], 
    PassengerCertificate.[2], 
    PassengerCertificate.[3], 
    PassengerCertificate.[4], 
    PassengerCertificate.[5], 
    PassengerCertificate.[6]
  FROM         dbo.ExceptionTB 
  INNER JOIN ShipTB ON ExceptionTB.emo_no = ShipTB.Emo_No  
  INNER JOIN ArrivalNotiDate ON ExceptionTB.excep_ref = ArrivalNotiDate.exp_ref  
  INNER JOIN PassengerCertificate ON ExceptionTB.excep_ref = PassengerCertificate.excep_ref  
  where ExceptionTB.excep_ref like cast(@keyser as varchar(50)) + '%'                     
END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T16:58:00.477

你不能这样做，这样。IF 语句中的`ShipTB.sh_Type`是一个结果集，它是一个包含多个值的字段。此外，它不能在`SELECT`子句之外引用。如果该字段`ShipTB.sh_Type`应该只包含一个值，那么您可以将其选择为标量变量，`@type`然后将其放入条件中。

否则，如果此字段`ShipTB.sh_Type`包含更多值，那么我认为您正在尝试进行条件连接，在这种情况下，您可以在一个查询中执行此操作，如下所示：

```
...

SELECT     
  ExceptionTB.excep_ref,
  ExceptionTB.emo_no, 
  ExceptionTB.broker, 
  ExceptionTB.r_date, 
  ShipTB.S_Name, 
  ShipTB.sh_Type, 
  ArrivalNotiDate.Arri_noti_date, 
  ArrivalNotiDate.port, 
  PassengerCertificate.[1], 
  PassengerCertificate.[2], 
  PassengerCertificate.[3], 
  PassengerCertificate.[4], 
  PassengerCertificate.[5], 
  PassengerCertificate.[6]
  CargoCertificate.[1], 
  CargoCertificate.[2], 
  CargoCertificate.[3], 
  CargoCertificate.[4], 
  CargoCertificate.[5],  
  CargoCertificate.[6], 
  CargoCertificate.[7], 
  CargoCertificate.[8]
FROM       ExceptionTB 
INNER JOIN ShipTB                
        ON ExceptionTB.emo_no    = ShipTB.Emo_No 
INNER JOIN ArrivalNotiDate       
        ON ExceptionTB.excep_ref = ArrivalNotiDate.exp_ref 
INNER JOIN CargoCertificate      
        ON ExceptionTB.excep_ref = CargoCertificate.excep_ref 
       AND ShipTB.sh_Type        = 'تجارية'
INNER JOIN PassengerCertificate  
        ON ExceptionTB.excep_ref = PassengerCertificate.excep_ref  
       AND ShipTB.sh_Type        = 'سياحية'
WHERE      ExceptionTB.excep_ref LIKE CAST(@keyser as varchar(50)) + '%';

... 
```

# c++ - 智能指针数组删除器

> ID：14004576
> 
> 赞同：2
> 
> 时间：2012-12-22T16:38:30.690
> 
> 标签：c++, smart-pointers

到目前为止，我已经为一些数据处理分配了一个缓冲区，然后将其删除。由于代码变得更大并且可能会在某些时候捕获异常，因此我考虑使用 a 使其更安全`std::unique_ptr`并提出了这些解决方案：

```
unique_ptr<char, void (*)(void *)> p1( (char*)operator new(bufSize), operator delete);
unique_ptr<char[], void (*)(void *) > p2( (char*)operator new(bufSize), operator delete);

memcpy(&((p1.get())[0]), "xyz", 3);
memcpy(&(p2[0]), "xyz", 3);

char x1 = p1.get()[0];
char x2 = p2[0]; 
```

对我来说，第一个解决方案 (p1) 似乎是正确的，但是编写 (p1.get())[...] 很乏味

第二种解决方案是方便的，但这是我的问题：

`std::unique_ptr<T[]>`似乎以一种特殊的方式支持模板化`operator[]`，这让我想知道，如果我使用`std::unique_ptr<T[]>`自定义的 new 和 delete 操作，``operator[] 或任何其他功能是否有任何问题，或者是第二种解决方案（ p2) 好吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-22T16:41:19.270

[`std::unique_ptr`专门用于数组](http://en.cppreference.com/w/cpp/memory/unique_ptr)。你可以只写以下内容：

```
std::unique_ptr<char[]> str(new char[4]);
char foo[] = "str";
std::copy(foo, foo + sizeof(foo), &str[0]); 
```

如果不存在，您可以自己做类似的事情，或者您可以编写一个`using`别名和一个`make_array`为您进行设置并返回正确类型的函数，那么使用它就像

```
auto str = make_array<char>(4); 
```

… 或类似的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T16:51:56.260

除非绝对需要，否则不要使用原始缓冲区（并且很少需要使用原始缓冲区）。您可能最好将 normal`new char[n]`与 一起使用`std::unique_ptr<char[]>`：

```
std::unique_ptr<char[]> array(new char[n]); 
```

如果您绝对需要分配原始内存，则可以使用`std::unique_ptr<char[], void (*)(void*)>`，但删除函数需要与分配函数匹配，即，`operator delete[]`如果您使用`operator new[]`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-20T04:24:49.937

`std::unique_ptr`支持动态数组的管理。您不需要编写自己的删除器：

例子：

```
int main()
{
    int letter{97};
    int size{26};

    unique_ptr<char[]> arr(new char[size]());

    for (int i{}; i != size; ++i)
        arr[i] = static_cast<char>(letter++); // supports subscript

    for (int i{}; i != size; ++i)
        cout << arr[i];
} 
```

While`std::shared_ptr`不直接支持动态数组的管理，需要自己编写删除器：

例子：

```
int main()
{
    int letter{97};
    int size{26};

    shared_ptr<char> arr(new char[size](), [](char *p) { delete [] p; }); // own deleter

    for (int i{}; i != size; ++i)
        *(arr.get() + i) = static_cast<char>(letter++);

    for (int i{}; i != size; ++i)
        cout << *(arr.get() + i);
} 
```

由于`std::shared_ptr`没有下标运算符并且不支持指针运算，我们可以使用`get()`来获取内置指针。

# html - 是否可以通过css和html实现以下文字效果？

> ID：14004577
> 
> 赞同：2
> 
> 时间：2012-12-22T16:38:38.350
> 
> 标签：html, css, text, styling

我被卡住了，不知道如何完成以下任务。我在网上搜索过，但没有发现类似的东西。

这是我想要实现的文字效果：

![在此处输入图像描述](../Images/d1be110ede0833d650ed87b0054f6e8c.png)

如您所见，它有多种颜色（中间为棕色，边缘为白色。）是否有可能完全在 css 和 html 中实现类似的效果（如果可以，请指出正确的方向）还是只能通过以下方式实现使用图形？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T17:09:54.643

[演示 jsfiddle](http://jsfiddle.net/dEs8w/)

这似乎目前只有 webkit 支持（FF/IE 没有`text-fill-color`属性）

```
h1{
    font-size:40px;
    font-weight:bold;
    font-family:Helvetica,Arial,sans-serif;
    margin:0;
    padding:0;
    float:left;
    background:-webkit-linear-gradient(-60deg, #ffffff 0%,#ffffff 25%,#000000 25%,#000000 75%,#ffffff 75%,#ffffff 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}​ 
```

这是基于[@Blowsie 在类似帖子中的回答](https://stackoverflow.com/a/5634892/222714)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T16:46:31.137

我自己从来没有测试过这个，但我几乎 100% 肯定这会奏效。

```
h1{
    content:'Hello';//this isn't needed but it's your content I'm guessing
    mask-image:linear-gradient(45deg, #FFFFFF 0%, #FFFFFF 20%, #000000 20%, #000000 80%, #FFFFFF 80%, #FFFFFF 100%);//WW3
} 
```

分别使用`webkit`扩展。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T16:49:39.413

您可以使用图像和 CSS 属性`background-clip: text`来实现类似的东西

[http://trentwalton.com/2010/03/24/css3-background-clip-text/](http://trentwalton.com/2010/03/24/css3-background-clip-text/)

它仍在开发中，仅适用于 webkit

您可以将它与 css 渐变结合在一起
[http://gradients.glrzad.com/](http://gradients.glrzad.com/)

# python - 使用 Ableton Live Python API 创建剪辑

> ID：14004580
> 
> 赞同：2
> 
> 时间：2012-12-22T16:38:58.290
> 
> 标签：python, midi, ableton-live

是否可以使用 Python API 以编程方式在 Ableton Live 的会话视图中创建剪辑？

更多上下文：我正在使用 _Framework 类破解[MIDI 远程脚本](http://remotescripts.blogspot.com)。为了响应事件触发，我想用新的 MIDI 剪辑填充 ClipSlot。

[Live Object Model](http://cycling74.com/docs/max5/refpages/m4l-ref/m4l_live_object_model.html#ClipSlot)似乎对动作有很大限制——`create`甚至可以在 Ableton Live 中以编程方式创建剪辑吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-13T19:40:29.997

不确定这是否令人不悦，但我试图做同样的事情，显然现在可以使用`Live.ClipSlot.ClipSlot.create_clip()`

来自[http://julienbayle.net/PythonLiveAPI_documentation/Live9.1.xml](http://julienbayle.net/PythonLiveAPI_documentation/Live9.1.xml)（反编译的 Live 9.1 API）

> `Live.ClipSlot.ClipSlot.create_clip()`方法
> 
> `create_clip( (ClipSlot)arg1, (float)arg2)`-> 无：
> 
> 在插槽中创建具有给定长度的空剪辑。在非空插槽或非 MIDI > 轨道中的插槽上调用时引发错误。C++ 签名：void create_clip(TPyHandle,double)

# android - 与 RFCOMM 设备配对的 Android 无法连接

> ID：14004582
> 
> 赞同：2
> 
> 时间：2012-12-22T16:39:06.620
> 
> 标签：android, bluetooth, connection, rfcomm

首先，我不得不说，我是 android 的初学者。我正在开发一个应用程序，它应该通过蓝牙连接到没有任何操作元件（无按钮、无显示器）的测量仪器并接收测量数据。不幸的是，我对测量仪器和制造商也不太了解。我所知道的是，我必须通过 RFCOMM 进行通信，当我与 android 配对时，我必须将序列号作为 PIN (09000) 发送。到目前为止，这有效。Andorid 与设备配对。尝试连接时，它首先建立连接，然后几秒钟后中断。我正在使用三星 Galaxy S3 和 HTC Sensation。

在这里你可以找到我完整的蓝牙连接类：

[http://iukp.chefti.com/JAVA/AndroidBluetooth.java](http://iukp.chefti.com/JAVA/AndroidBluetooth.java)

这是 logcat 输出以供更多参考：

```
 12-22 17:24:56.104: I/System.out(6079): ConnectThread()
    12-22 17:24:56.104: V/BluetoothSocket.cpp(6079): initSocketNative
    12-22 17:24:56.104: V/BluetoothSocket.cpp(6079): ...fd 51 created (RFCOMM, lm = 26)
    12-22 17:24:56.104: V/BluetoothSocket.cpp(6079): initSocketFromFdNative
    12-22 17:24:56.109: I/System.out(6079): ConnectThread() try succesfull
    12-22 17:24:56.114: I/System.out(6079): ConnectThread.run()
    12-22 17:24:56.114: I/System.out(6079): mmSocket.connect 0.1()
    12-22 17:24:56.124: D/BluetoothUtils(6079): isSocketAllowedBySecurityPolicy start :         device null
    12-22 17:24:57.109: V/BluetoothSocket.cpp(6079): connectNative
    12-22 17:24:57.174: V/BluetoothSocket.cpp(6079): ...connect(51, RFCOMM) = 0 (errno 115)
    12-22 17:24:57.179: I/System.out(6079): true
    12-22 17:24:57.184: I/System.out(6079): ConnectedThread()
    12-22 17:24:57.184: I/System.out(6079): socket.X tried
    12-22 17:24:57.184: I/System.out(6079): manageConnectedSocket()
    12-22 17:24:57.184: I/System.out(6079): run()
    12-22 17:24:57.184: I/System.out(6079): ConnectThread() try succesfull - run()
    12-22 17:24:57.184: I/System.out(6079): SON F BICHT
    12-22 17:24:57.184: I/Choreographer(6079): Skipped 67 frames!  The application may         be doing too much work on its main thread.
    12-22 17:24:58.189: D/dalvikvm(6079): GC_CONCURRENT freed 91K, 6% free 12469K/13191K, paused 21ms+4ms, total 76ms
    12-22 17:24:58.209: V/BluetoothSocket.cpp(6079): abortNative
    12-22 17:24:58.209: V/BluetoothSocket.cpp(6079): ...asocket_abort(51) complete
    12-22 17:24:58.209: V/BluetoothSocket.cpp(6079): destroyNative
    12-22 17:24:58.209: V/BluetoothSocket.cpp(6079): ...asocket_destroy(51) complete 
```

任何提示或建议将不胜感激。对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-04T10:24:30.893

自从你大约六个月前问过这个问题以来，我希望你已经解决了你的问题，但对于其他人来说，你的问题可能与此有关：

[带有 Galaxy S3 的 Android 蓝牙 SPP](https://stackoverflow.com/questions/12274210/android-bluetooth-spp-with-galaxy-s3)

查看该问题的答案。

# excel - VbScript 抛出错误“未知的运行时错误”

> ID：14004586
> 
> 赞同：0
> 
> 时间：2012-12-22T16:39:42.333
> 
> 标签：excel, vbscript, vba

我编写了一个代码来从 excel 表中删除行，但它给了我一个主题中提到的错误。

**代码**

```
 Sub ChildPidDelt(ob3,DeletArr)

Dim height,row,str,i
Dim dataArray
Dim d
height = objExcel1.Application.WorksheetFunction.CountA(ob3.Columns(1))
'MsgBox(height)
ReDim dataArray(height - 2, 0) ' -1 for 0 index, -1 for the first row as header row, excluded
str = ""
dataArray = ob3.Range(ob3.Cells(2, 1),ob3.Cells(height, 1)).Value
Set d = CreateObject("scripting.dictionary")
MsgBox(LBound(DeletArr) & ":" & UBound(DeletArr))
For i = LBound(DeletArr) To UBound(DeletArr)
    If Not d.exists(DeletArr(i)) Then
        d(DeletArr(i)) =  0
    End If
Next
MsgBox(LBound(dataArray,1) & ":" & UBound(dataArray,1))
For i = LBound(dataArray, 1) To UBound(dataArray, 1)
    If d.exists(dataArray(i, 1)) Then

        str = str & (i+1) & ":" & (i+1) & ","

    Else
        'found = False
    End If
Next
If Len(str) > 0 Then
    MsgBox(Len(str))
    str = Mid(str, 1, Len(str) - 1)
    MsgBox(str)
    ob3.Range(str).Delete

End If

End Sub 
```

请在下面找到调试屏幕：

![屏幕1](../Images/bb55365f11b0922848eec670af1f8540.png) ![屏幕2](../Images/993d7f38d5a5260854b9344e3421f15f.png) ![屏幕3](../Images/58656cf3e09d561d0689b5eeb23c74d0.png) ![屏幕4](../Images/45a4468f45848b10c3b2be7c148049b2.png) ![屏幕5](../Images/592b6166d5141475b66d5ab096f7ade9.png)

你能帮我说一下原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T18:52:06.027

`Range()`不能处理超过 255 个字符的字符串。

您可以通过将删除分成几部分来解决此问题。这是一个简单的方法：直接放在最后一个 msgbox 之后

```
dim x
dim rangesToRemove
rangesToRemove = Split(str,",")
for x = UBOUND(rangesToRemove) to LBOUND(RangesToRemove) Step -1
   ob3.Range(rangesToRemove(x)).delete
next 
```

编辑：好的，由于您的评论，这里有一种更复杂的方法，可以将删除分成块。

```
dim x
dim rangesToRemove
dim strToRemove : strToRemove = ""
rangesToRemove = Split(str,",")
for x = UBOUND(rangesToRemove) to LBOUND(RangesToRemove) Step -1
   strToRemove = strToRemove & rangesToRemove(x)
   If Len(strToRemove) > 200 then
       ob3.Range(strToRemove).delete
       strToRemove = ""
   else
       strToRemove = strToRemove & ","
   end if
next
If len(strToRemove) > 0 then
   strToRemove = Left(strToRemove, Len(strToRemove) -1)
   ob3.Range(strToRemove).delete
end if 
```

# vb.net - vb.Net 时间跨度计算

> ID：14004588
> 
> 赞同：3
> 
> 时间：2012-12-22T16:39:48.133
> 
> 标签：vb.net, date, format, timespan

我可以使用给定的代码计算 vb.net 中的时间跨度

```
 Dim dtStartDate As Date = "17/12/2032"
    Dim iNumberOfDays As Integer
    Dim tsTimeSpan As TimeSpan
    tsTimeSpan = Now.Subtract(dtStartDate)
    iNumberOfDays = tsTimeSpan.Days   'Where iNumberOfDays is the result of the timespan 
```

当我的计算机时间格式为

> **dd-MMM-yy**（位于控制面板> 日期和时间> 更改日期和时间> 更改日历设置> 日期格式。

如果我将计算机日期格式更改为类似**MM/dd/yy**的内容，我的应用程序会在该行中给出错误

> 将 dtStartDate 调暗为日期 = "17/12/2032"

错误是“从字符串“17/12/2032”到类型日期的转换无效。

我需要计算所有日期格式的时间跨度。如何解决问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T21:04:09.067

您可以改用日期文字，它们与文化无关。请参阅[MSDN 上的这篇文章](http://msdn.microsoft.com/en-us/library/3eaydw6e%28v=vs.90%29.aspx)：

> 您必须将日期文字括在数字符号 (# #) 内。您必须以 M/d/yyyy... 格式指定日期值... 此要求与您的区域设置和计算机的日期和时间格式设置无关。

所以你可以这样写：

```
Dim dtStartDate As Date = #12/17/2032# 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T16:45:45.463

您不应该使用这样的字符串文字来设置日期，因为日期字符串的解析方式将根据当前的文化而有所不同（正如您所发现的那样）。`DateTime.ParseExact`如果它必须是一个字符串，您可以使用以下方法绕过它：

```
Dim start As Date = Date.ParseExact("17/12/2032", "dd/MM/yyyy) 
```

但是，如果它不需要是字符串，我建议使用`DateTime`构造函数将各个参数作为单独的整数文字传递：

```
Dim start As New Date(2032, 12, 17) 
```

一旦你有了开始日期，你可以这样计算：

```
Dim span As TimeSpan = Date.Now - start
Dim days As Integer = span.Days 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T16:47:32.073

从字符串转换为 DateTime 是 VB.NET 特有的功能，您无法用任何其他常见的 .NET 语言编写此代码。如果 Option Strict On 生效，它也不会在 VB.NET 中编译，这样的转换太容易出错。好吧，你找到了原因。

请改用以下任一解决方案：

```
 Dim dtStartDate As Date = New DateTime(2032, 12, 17) 
```

或者如果你被字符串卡住了：

```
 Dim dtStartDate As Date = DateTime.Parse("17/12/2032", _
      System.Globalization.CultureInfo.InvariantCulture.DateTimeFormat) 
```

使用该选项时，您需要记住调整 CultureInfo 以匹配输入字符串的格式。

# c++ - 不能从继承的类调用析构函数

> ID：14004589
> 
> 赞同：1
> 
> 时间：2012-12-22T16:39:53.283
> 
> 标签：c++, inheritance, destructor

我有一个抽象类，我从中继承。为了清楚起见-我在继承器中实现了所有抽象方法。

使用继承类创建的对象完成后，我试图破坏它，但不是调用继承的析构函数，而是将我发送到抽象方法。

在我的程序中它看起来像这样

```
class LinkedHash {

private:
      LinkedHashEntry **table;
      int max_size;
public:
      /* Creates a hashtable of size maxSize*/
      LinkedHash(int);
      LinkedHash(){}       
      /* deletes all members of the hashtable */
      virtual ~LinkedHash();

      virtual int hashFunction(int key) = 0;

      void insert(int key, Process* value);

      void remove(int  key);
      int getMaxSize(){return max_size;}
      LinkedHashEntry* search(int x);
};

class LinkedHashinheritor: public LinkedHash {

    public:
        LinkedHashinheritor():LinkedHash(1000){}
        int hashFunction(int key);
}; 
```

这是我的 cpp 文件相关代码：

```
int LinkedHashinheritor::hashFunction(int key)
{
    return key%1000;
} 
```

并且有对相关对象的构造函数和析构函数的调用：

```
 Scheduler::Scheduler()
{tmp_lh=new LinkedHashinheritor();}

Scheduler::~Scheduler()
{
    delete tmp_lh;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T16:56:01.970

预先说明这一点：使类抽象并**不会**阻止调用其析构函数。*将始终调用继承层次结构中**所有*类的析构函数（按照从派生类到基类的顺序）。

 *由于您没有在派生类中声明析构函数，并且编译器提供的析构函数非常简单（例如，它只需要从基类调用析构函数），因此编译器很可能已经优化了派生类析构函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T16:57:32.203

请注意，`virtual`析构函数是特殊`virtual`函数：基类析构函数总是在销毁派生对象时被调用。制作析构函数的效果`virtual`是，您可以`delete`通过指向基类型的指针来创建派生类型的对象（如果在没有析构函数的情况下执行此操作，`virtual`则会得到未定义的行为。*

# jquery - 我如何移动到 FlowSlider jquery 插件中的特定幻灯片

> ID：14004591
> 
> 赞同：1
> 
> 时间：2012-12-22T16:40:03.703
> 
> 标签：jquery

我正在使用**FlowSlider jquery 插件**来水平显示一些图像。[您可以在FlowSlider 网站](http://www.flowslider.com)中看到一些示例和 API 文档

但我的问题是，通过单击按钮例如转到特定幻灯片（例如＃6）的方法是什么。我找不到任何解决方案。
如果你知道请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T16:57:56.543

该插件似乎不处理项目。

它将整个滑块区域视为单个动画元素。

您唯一能做的就是设置滑块的位置

```
var API = $('#slideid')[0].FlowSlider;
API.position(0.4); // where 0.4 means 40% of the total allowed movement of the slider.. 
```

# django - 如何在 Django 中加载不同内容的块

> ID：14004593
> 
> 赞同：0
> 
> 时间：2012-12-22T16:40:23.577
> 
> 标签：django, django-templates, django-views

在 Django 中，如果我有一个页面，假设它包含以下块：

1) 主要内容
2) 相关内容
3) 新文章
4) 广告块
5) 全站标签云

我是否应该在视图中为这些块准备所有数据，然后通过上下文将其传递给模板？如果我这样做，每次我需要某个页面上的块时，我都需要在视图中为其准备数据。但是，如果我想在网站的每个页面上放置一个新的文章块怎么办？这意味着我需要在每个视图中为此块准备数据并将其传递给模板，这不是很干燥。

我看到的另一个选项是创建一个模板标签，它查询数据库并获取最新文章，然后您只需将此标签放在您需要的每个模板上，但据我了解，这违反了主要准则，该准则告诉您应该使用标签仅用于显示目的（这对在模板标签中进行数据库查询没有好处）。

您使用/推荐哪种方式在 Django 中显示块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T16:59:20.557

你在哪里读到你不应该为此使用模板标签？相反，这正是您应该使用它们的目的。[例如，这里](http://www.b-list.org/weblog/2006/jun/07/django-tips-write-better-template-tags/)是 Django 的早期开发者之一 James Bennett 的博客文章，准确地描述了这一点（请注意，该文章中的语法已经过时，但原则仍然有效）。

# java - 用自己的 DSL-xtext 编写的安全模型转换

> ID：14004597
> 
> 赞同：0
> 
> 时间：2012-12-22T16:40:58.603
> 
> 标签：java, xtext, activiti, xtend, xpand

我有一个使用 xtext 编辑器用自己的 DSL 编写的业务流程安全工程模型。例如，我有一个用于 Activiti 的安全模型，它具有安全控制，例如保护传输通道、加密进程之间的消息、用户访问控制等。我想做的是编写一些实现来获取 myfile.mydsl，解析它并自动保护环境（Activiti），即在 tomcat 中为 SSL 配置 tomcat 的 server.xml，使用 keytool 等创建密钥库（因此通道是安全的）。

它不是模型转换的模型，因此 ATL-eclipse 可能没有帮助。xpand-eclipse 会因为 xpand 进行模型到文本转换而有所帮助吗？

我还想从 xtext 生成 XMI​​ 并在 java 中解析它并执行实现。xtext 编辑器是否提供了一些其他方法来解析 DSL 以帮助实现？

如果我的帖子模棱两可，那么我可以解释更多。

感谢期待。

最好的祝福，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T07:14:50.480

无需创建模型的中间 XMI 序列化形式。如果该对象图被加载到内存中，则对象图与您从 Xtext DSL 获得的对象图几乎相同。我建议使用[Xtend](http://www.xtend-lang.org)来实现代码生成器。

# ios - 动画 setToolbarHidden 不动画

> ID：14004598
> 
> 赞同：3
> 
> 时间：2012-12-22T16:41:06.637
> 
> 标签：ios

您是否为工具栏的外观设置了动画 - 我无法让它动画

这个：

```
 [self.navigationController setToolbarHidden:NO animated:YES]; 
```

或这个：

```
 [UIView animateWithDuration:2.0
                         animations:^{
                             [self.navigationController setToolbarHidden:NO
                                                                animated:YES];
                         }
                         completion:^(BOOL finished){
                             // whatever
                         }];
    } 
```

同时

```
- (void)viewDidAppear:(BOOL)animated{

- (void)viewWillAppear:(BOOL)animated{
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T18:02:50.667

这确实有效：

```
- (void)viewDidAppear:(BOOL)animated{
  [self.navigationController setToolbarHidden:NO animated:YES];
} 
```

在视图可见之前，动画不应开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T17:01:27.887

这应该可以解决问题，使用从 IB 创建和链接的 UIToolbar：

```
[UIView beginAnimations:@"animate" context:nil];
[UIView setAnimationBeginsFromCurrentState:YES];
[UIView setAnimationDuration:0.25f];
self.toolbar.frame = CGRectOffset(self.toolbar.frame, 0, direction*self.test.toolbar.size.height);
[UIView commitAnimations]; 
```

其中“方向”为 +/-1，具体取决于移动方向（+ 向下移动，- 向上移动）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T16:57:04.460

如果您的工具栏实际上是由导航控制器添加的，这应该可以工作。但是，由于它不是让我相信您已经通过在界面生成器中的拖放手动添加了工具栏。如果是这种情况，您必须为工具栏创建一个 IBOutlet，链接它，然后使用：

```
[UIView animateWithDuration:0.2 animations:^{
    [myToolBar setFrame:CGRectMake(myToolBar.frame.origin.x, myToolBar.frame.origin.y + myToolBar.frame.size.height, myToolBar.frame.size.width, myToolBar.frame.size.height)];
}]; 
```

# java - 生成总和为给定数字及其复杂性的所有数字的算法

> ID：14004600
> 
> 赞同：4
> 
> 时间：2012-12-22T16:41:12.813
> 
> 标签：java, big-o, asymptotic-complexity

我在准备面试时发现了以下问题：

> 3可以写成1+1+1、1+2、2+1；4可以写成1+1+1+1、1+1+2、2+2、1+2+1、2+1+1、3+1、1+3；给定一个整数，存在多少个可能的表达式？（1+2和2+1不同）

因此，编写一个蛮力算法来计算它并获得所有执行它的数字集的集合是相当简单的：

```
private static Set<List<Integer>> getIntegersSum(int num) {
  Set<List<Integer>> returnSet = new HashSet<List<Integer>>();

  if (num == 0) {
   returnSet.add(new LinkedList<Integer>());
   return returnSet;
  }

  for (int i = 1; i <= num; i++) {
    Set<List<Integer>> listNMinI = getIntegersSum(num - i);
    for (List<Integer> l : listNMinI) {
      l.add(0, i);
      returnSet.add(l);
    }
  }

  return returnSet;
} 
```

现在我相信描述这个算法复杂性的递归关系是：

```
T(0) = \Theta (1)
T(n) = O(n) + \Sum_{i=0}^{n-1} T(i) 
```

我不太确定如何从这种递归关系中得出很大的复杂性。我还想知道这个问题是否有一个封闭形式的解决方案（每个数字我们会有多少这样的组合）。

我也不确定如果我们通过缓存每个调用的结果来记忆这个算法（类似于如何加速斐波那契），那么复杂性会是多少。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T17:29:02.030

有 2 ^(n - 1) - 1 个这样的表达式。

有很多方法可以解决这个问题。

我使用这个问题的结果：

> 有 n 颗糖果。有多少种方法可以将所有 n 颗糖果分给 k 个人（可以给 0 颗糖果）？

顺序很重要，因为这些部分是分给不同的人的。解是 (n + k - 1)C(k - 1)。我们将 k - 1 个分隔符添加到混合中（这使得总和为 n + k - 1），并且我们尝试找到插入分隔符以将糖果分成 k 个部分的方法的数量。考虑在一行中放置 n + k - 1 个盒子来放置糖果和分隔符，我们想要找到多种方法来为分隔符选择 k - 1 个插槽，从而将盒子分成 k 个部分。

* * *

回到这个问题，我们需要回答这个子问题：

> 有多少种方法可以将 n 表示为 k 个正数之和？

我们可以重用上面糖果分裂问题的结果，但是我们需要保留 k 以防止项为 0。所以结果将是 ((n - k) + k - 1)C(k - 1)，即简化为 (n - 1)C(k - 1)。（(n - k) 是由于我们为 k 项中的每一项都放了 k 项）。

所以最终结果将是 Sum [i = 2..n] (n - 1)C(i - 1)，因为表达式包含至少 2 个项，最多 n 个项。我们知道 Sum [i = 1..n] (n - 1)C(i - 1) = 2 ^(n - 1)，所以 Sum [i = 2..n] (n - 1)C(i - 1) = 2 ^(n - 1) - 1。

@MarkDickinson 在评论中解释了解决此问题的另一种方法。推理更直接。

> 在每对糖果之间，要么有分隔符，要么没有。这立即提供了`2^(n-1)`可能性。无论出于何种原因，OP 都排除了我们只有 1 部分的单一情况，因此减去 1 得到`2^(n-1) - 1`.

使论据更加扎实。由于该问题只允许正项，我们只能在糖果之间插入 1 个分隔符，我们只能在糖果之间插入它们，而不是 2 端。因此，有 (n - 1) 个位置可以出现分隔符。

# jquery - 如何在进行多页搜索时恢复选择框中的原始选择选项值

> ID：14004601
> 
> 赞同：0
> 
> 时间：2012-12-22T16:41:15.230
> 
> 标签：jquery, jsp, servlets, jstl

我有一个 JSP 页面 1，在这个 JSP 页面中我有一个可以说 link1。当我单击该链接时，它转到 JSP 2。现在在 JSP 2 中，我有 4 个包含 jspf 页面。页眉/页脚/搜索框/主要内容页面。现在在此搜索框 jspf 页面中，我有搜索页面 html 代码，其中我有选择字段，用户在搜索时选择一个选项。现在，当我执行多个页面搜索相同的选项值字段时，它没有在整个搜索页面中保持其价值。我需要为同一个用户会话保持该价值，我该如何实现？

我尝试的一些事情，对于搜索页面，我将选择框的值存储在会话中，然后在 jspf 页面中，我尝试通过类似这样的 jstl 检索它。，

```
<

select name="Name" class="cl-search" id="id-search"  lang="en">
                        <c:choose>
                            <c:when test="${ empty sessionScope.TEST1}">
                                <option id="bt" value="test1">TEST1</option>
                            </c:when>
                            <c:otherwise>
                                <option id="bt" value="test1"><c:out value="${sessionScope.TEST1}"/></option>
                            </c:otherwise>
                        </c:choose> 
                        <c:choose>
                            <c:when test="${ empty sessionScope.TEST2}">
                                <option id="gt" value="test2">TEST2</option>
                            </c:when>
                            <c:otherwise>
                                <option id="gt" value="test2"><c:out value="${sessionScope.TEST2}"/></option>
                            </c:otherwise>
                        </c:choose> 
                         <c:choose>
                            <c:when test="${ empty sessionScope.TEST3}">
                              <option id="tod" value="test3">TEST3</option>
                            </c:when>
                            <c:otherwise>
                                <option id="gt" value="test3"><c:out value="${sessionScope.TEST3}"/></option>
                            </c:otherwise>
                        </c:choose> 
```

在servlet中我有这样的东西，

```
String selectvalue = request.getParameter("selectname");
        HttpSession session = request.getSession();
        if(selectvalue.equals("test1")){
            session.setAttribute("TEST1",test1);
        }else if(selectvalue.equals("test2")){
             session.setAttribute("TEST2",test2);
        }else if(selectvalue.equals("TEST3")){
            session.setAttribute("TEST3",test3);
        } 
```

不确定我是否正确解释了我的问题，我只希望用户从选择框中选择一个值并进行搜索，如果搜索结果跨越多个页面，我如何在该类别的所有页面中保持相同的选择值对于用户的那个会话。我在选择字段中有接近 10 个值，取决于这个值是否调用了不同的 DAO 类。

# javascript - Mustache.js 对象# 没有方法“搜索”

> ID：14004605
> 
> 赞同：3
> 
> 时间：2012-12-22T16:42:06.653
> 
> 标签：javascript, template-engine, mustache

我使用 mustache.js 作为我的客户端模板解决方案，但我遇到了一个问题，我不知道为什么会这样：

首先，这是我的模板：

```
<ul>
    {{#steps}}
    <li>
        <a href="{{url}}">
            <div class="step_visual {{step_status}}">
                <span class="step_description">{{description}}</span>
            </div>
        </a>
    </li>
    {{/steps}}
</ul> 
```

这是我试图传入的 json 对象：

```
var view = {
    "steps": [
        {
            "url": "complete_profile",
            "step_status": "done",
            "description": "Complete Proflie"
        },
        {
            "url": "complete_form1",
            "step_status": "active",
            "description": "Submission of Form 1"
        }
    ]
} 
```

我尝试运行此脚本以在我的应用程序中呈现它

```
var content = Mustache.render(template, view);
$(target).html(content).hide().fadeIn(); 
```

其中`template`= 上面的模板 | `view`= 视图对象，并且`target`是我希望更改内容的 html 元素

让我感到困惑的是，当我的模板看起来像

```
{{#steps}}
    {{url}}
    {{description}}
    {{step_status}}
{{/steps}} 
```

或者如果我的模板没有任何可循环的内容。

可能是什么错误？你认为这是胡须虫吗？

**编辑** 正如我所见，代码有效，

我调用函数的方式可能有问题吗？

```
tmplReplaceContent : function(json, tmpl, target) {
    var regex = new RegExp("\{{[a-zA-Z\.\_]*\}}"),
    view = '';
    function setOutput(template) {
        var content = Mustache.render(template, view);
        $(target).html(content).hide().fadeIn();
    }
    function doJSON(json) {
        view = json;
        if(!regex.test(tmpl)){
            /* get mustache tmpl from the path */
            $.get(msi.vars.tmpl_url + tmpl + '.mustache', setOutput);
        } else {
            setOutput(tmpl);
        }
    }
    /* json -> check if object */
    if (typeof json === 'object') {
        doJSON(json);
    } else {
        /* getJSON from the path */
        $.getJSON(msi.vars.base_url + json, doJSON);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T10:58:59.860

我从来没有感到这种解脱的感觉，因为我已经自己解决了我的问题，首先感谢[Tomalak](https://stackoverflow.com/users/18771/tomalak)一直关注我的评论并帮助我解决问题。

如果我继续处理 console.logging 事情，我本可以早点解决问题，但我停了下来。

我注意到的一件事是，该`$.get`函数给了我`#<Document>`，这几乎是一个对象，我本可以早些时候推断出响应是一个对象，从我的问题的标题中可以看出它显然正在返回一个对象。

那么为什么不添加`dataType`属性呢？

```
function doJSON(data){
    dataSource = data;
    if (!regex.test(tpl)) {
        $.get(msi.vars.tmpl_url + tpl + '.mustache', render, 'text'); // see here
    } else {
        render(tpl);
    }
} 
```

这最终解决了问题。

# javascript - Html2Canvas 无法在谷歌浏览器上运行

> ID：14004607
> 
> 赞同：2
> 
> 时间：2012-12-22T16:42:49.427
> 
> 标签：javascript, jquery, google-chrome, html2canvas

我有以下代码，它在 Firefox 上运行良好，但由于某种原因，图像没有在 Chrome 上呈现，有什么想法吗？

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Test Html2Canvas</title>
<script type="text/javascript" src="jquery-1.6.3.js"></script> 
<script type="text/javascript" src="html2canvas.js"></script> 
<script type="text/javascript" src="jquery.plugin.html2canvas.js"></script> 
</head>
<body>
testing
<img src="someImage.jpg"/>
<script type="text/javascript">
window.onload = function() {
    html2canvas( [ document.body ], {
        onrendered: function( canvas ) {
              document.body.appendChild( canvas );
            }
    });
};
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T16:53:06.100

`html2canvas`在尝试绘制图像之前，图像可能尚未加载。尝试绘制尚未静默加载的图像不会执行任何操作，因此您什么也得不到。

尝试将您的`html2canvas`呼叫包装在`window.onload`处理程序中。不是 jQuery `ready`，因为您只需要在所有图像等已完全加载时运行代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-05T03:19:55.137

如果您在没有任何 Web 服务器的情况下运行此 html 文件，它将无法工作。如果您在 PC 上玩耍，请安装 XAMPP 或任何其他 Web 服务器（最简单的选项[http://www.apachefriends.org/en/xampp.html](http://www.apachefriends.org/en/xampp.html)）并将图像、JavaScript 和 HTML 代码放在 C:\xampp\ htdocs（如果 C 驱动器是您的安装驱动器）并使用服务器运行。我已经在 Chrome 和它的工作中测试了它。

# c# - WebBrowser 不希望页面在 Yandex 上加载

> ID：14004613
> 
> 赞同：1
> 
> 时间：2012-12-22T16:43:49.727
> 
> 标签：c#, .net, browser, webbrowser-control

```
public partial class WebBrowserForm : Form
{
    public WebBrowserForm()
    {
        InitializeComponent();
        webBrowser.Navigate("http://ya.ru");
    }
    private void PlayButtonClick(object sender, EventArgs e)
    {
    _documentCompleted = false;
    webBrowser.DocumentCompleted += BrowserDocumentCompleted;
    var input = webBrowser.Document.All
        .Cast<HtmlElement>()
        .Where(elem => elem.GetAttribute("id") == "text")
        .First();

    input.Focus();
    SendKeys.SendWait("mercedes");
    SendKeys.SendWait("{ENTER}");

    while (webBrowser.ReadyState != WebBrowserReadyState.Complete || !_documentCompleted)
        Application.DoEvents();

    webBrowser.DocumentCompleted -= BrowserDocumentCompleted;

    return; // (!!!)
}

void BrowserDocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
    _documentCompleted = true;
}
private bool _documentCompleted;
} 
```

我有以下情况。上面表单上的按钮尝试在搜索引擎 Yandex 请求 Mercedes 中输入查询，激活搜索（按 Enter）并分析将返回搜索引擎的 html 代码。问题是，如果您在代码中放置一个带有注释的断点（!!!），那么在 webBrowser.Document.Body.InnerHtml html 代码中的给定点处不会存储搜索结果。我徒劳地尝试了不同的浏览器事件。 [c-sharp-webbrowser-button-click-then-go-to-another-page](https://stackoverflow.com/questions/7904091/c-sharp-webbrowser-button-click-then-go-to-another-page)这个链接有类似的问题，但在我的情况下没有实现。

框架 4.0 VS2010 Windows 7 Ultimate x64 IE9.0。提前致谢。

# entity-framework - EF5 代码首先使用 MVC 4 UserProfile

> ID：14004617
> 
> 赞同：0
> 
> 时间：2012-12-22T16:44:20.297
> 
> 标签：entity-framework

这一定很简单，但我今天感觉很愚蠢，所以这里是：

我使用 VS2012 提供的模板创建了一个新的 MVC 4 Internet 应用程序。该应用程序附带 AccountModels，其中定义了 UserProfile。还有 UserContext 有

```
public DbSet<UserProfile> UserProfiles { get; set; } 
```

到目前为止，一切都很好。现在我开始我自己的模型，添加一个我想引用 UserProfile 的项目类。我有自己的 DataContext 定义

```
public DbSet<Project>   Projects { get; set; } 
```

我还没有运行一次迁移，所以我的 Project 表不存在。但是 UserProfile 已经是我的数据库的一部分，以及 SimpleMembership 使用的 pages_* 表。如何在 Project 中添加指向 UserProfile 的导航属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T02:33:57.507

我不认为向 UsersProfile 表添加关系是不好的做法。您将需要创建您的 POCO 类，启用迁移，配置您的帐户模型以与您的 Projects 类形成您想要的关系，然后更新数据库以反映模型更改。[在http://evonet.com.au/code-first-development-with-the-entity-framework/](http://evonet.com.au/code-first-development-with-the-entity-framework/)有一个演练

# android - 用户定义的设备未显示在设备定义列表中

> ID：14004621
> 
> 赞同：1
> 
> 时间：2012-12-22T16:44:39.090
> 
> 标签：android, android-emulator, avd

我刚刚开始一个应用程序的想法，我必须自动化我的电脑通过手机完成的一些事情。我之前下载了 sdk，但无法让我定义用户设备。我认为这是旧版 sdk 安装的错误，所以我删除了包括`.android`文件夹在内的所有内容并重新安装，但无济于事。我的自定义设备仍未显示在列表中。

当我尝试添加自定义设备定义时，我会执行所有步骤，设备显示在“设备定义”选项卡下，它以 XML 格式写入（格式不正确）`<username>/.android/devices.xml`但它没有显示在设备列表中我尝试创建一个新的 AVD，当我重新启动时，该设备也从设备定义列表中消失了。

我正在使用带有 Eclipse Juno、SDK Manager 21.0.1 的 Windows 8 Pro x64（这是在 2012 年 12 月 22 日凌晨 2 点左右下载的）。如果重要的话，我在 Eclipse 中拥有的唯一插件是 Subversive、ADT 和 Eclipse Marketplace。

这里还有以下内容`<username>/.android/devices.xml`：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<d:devices xmlns:d="http://schemas.android.com/sdk/devices/1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <d:device>
    <d:name>Droid DNA</d:name>
    <d:manufacturer>User</d:manufacturer>
    <d:meta/>
    <d:hardware>
      <d:screen>
        <d:screen-size>large</d:screen-size>
        <d:diagonal-length>5.00</d:diagonal-length>
        <d:pixel-density>xxhdpi</d:pixel-density>
        <d:screen-ratio>long</d:screen-ratio>
        <d:dimensions>
          <d:x-dimension>1080</d:x-dimension>
          <d:y-dimension>1920</d:y-dimension>
        </d:dimensions>
        <d:xdpi>440.58</d:xdpi>
        <d:ydpi>440.58</d:ydpi>
        <d:touch>
          <d:multitouch>jazz-hands</d:multitouch>
          <d:mechanism>finger</d:mechanism>
          <d:screen-type>capacitive</d:screen-type>
        </d:touch>
      </d:screen>
      <d:networking>
NFC
Wifi
Bluetooth</d:networking>
      <d:sensors>
ProximitySensor
Gyroscope
LightSensor
Barometer
Compass
Accelerometer
GPS</d:sensors>
      <d:mic>true</d:mic>
      <d:camera>
        <d:location>front</d:location>
        <d:autofocus>true</d:autofocus>
        <d:flash>true</d:flash>
      </d:camera>
      <d:camera>
        <d:location>back</d:location>
        <d:autofocus>true</d:autofocus>
        <d:flash>true</d:flash>
      </d:camera>
      <d:keyboard>nokeys</d:keyboard>
      <d:nav>nonav</d:nav>
      <d:ram unit="GiB">2</d:ram>
      <d:buttons>hard</d:buttons>
      <d:internal-storage unit="GiB">
4</d:internal-storage>
      <d:removable-storage unit="TiB"/>
      <d:cpu>Generic CPU</d:cpu>
      <d:gpu>Generic GPU</d:gpu>
      <d:abi>
armeabi
mips
armeabi-v7a
x86</d:abi>
      <d:dock/>
      <d:power-type>battery</d:power-type>
    </d:hardware>
    <d:software>
      <d:api-level>-</d:api-level>
      <d:live-wallpaper-support>true</d:live-wallpaper-support>
      <d:bluetooth-profiles/>
      <d:gl-version>2.0</d:gl-version>
      <d:gl-extensions/>
      <d:status-bar>false</d:status-bar>
    </d:software>
    <d:state default="true" name="Portrait">
      <d:description>The device in portrait orientation</d:description>
      <d:screen-orientation>port</d:screen-orientation>
      <d:keyboard-state>keyssoft</d:keyboard-state>
      <d:nav-state>navhidden</d:nav-state>
    </d:state>
    <d:state name="Landscape">
      <d:description>The device in landscape orientation</d:description>
      <d:screen-orientation>land</d:screen-orientation>
      <d:keyboard-state>keyssoft</d:keyboard-state>
      <d:nav-state>navhidden</d:nav-state>
    </d:state>
  </d:device>
</d:devices> 
```

请帮帮我，我在尝试用谷歌搜索这个问题时找到了一个解决方案，其中 AVD 会写“，”而不是“。” 指定小数位，但这更像是一个语言环境问题，尽管我检查了我的无论如何都没有这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T06:36:20.370

我们也遇到了这个问题。经过几次实验，我们发现将 xxhdpi 替换为 xhdpi 可以正常显示。我认为这可能是这个版本中的一个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:10:20.777

实际上，这听起来像是一个不止一个人遇到过一些问题的问题。在 Android SDK Tools 21.1 之前（实际上我认为这在 RC2 中也得到了解决），解析 xxhdpi 设备定义和 AVD 设备列表时存在问题。如果您尝试将 Android SDK 工具更新到 21.1 版，我相信您的问题将得到解决。

# python - lxml.html 通过搜索关键字提取字符串

> ID：14004623
> 
> 赞同：0
> 
> 时间：2012-12-22T16:44:48.033
> 
> 标签：python, lxml

我有一部分 html 如下所示

```
<li><label>The Keyword:</label><span><a href="../../..">The text</a></span></li> 
```

我想得到字符串“关键字：文本”。

我知道我可以使用 Chrome 检查或 FF firebug 获取上述 html 的 xpath，然后选择（xpath）.extract（），然后剥离 html 标签以获取字符串。但是，该方法不够通用，因为 xpath 在不同页面之间并不一致。

因此，我正在考虑以下方法：首先，使用搜索“关键字：”（代码用于scrapy HtmlXPathSelector，因为我不确定如何在lxml.html中执行相同操作）

```
hxs = HtmlXPathSelector(response)
hxs.select('//*[contains(text(), "The Keyword:")]') 
```

什么时候做 pprint 我得到一些回报：

```
>>> pprint( hxs.select('//*[contains(text(), "The Keyword:")]') )
<HtmlXPathSelector xpath='//*[contains(text(), "The Keyword:")]' data=u'<label>The Keyword:</label>'> 
```

我的问题是如何获得想要的字符串：“关键字：文本”。我正在考虑如何确定 xpath，如果 xpath 已知，那么我当然可以得到想要的字符串。

我对 lxml.html 以外的任何解决方案持开放态度。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T16:53:04.820

```
from lxml import html

s = '<li><label>The Keyword:</label><span><a href="../../..">The text</a></span></li>'

tree = html.fromstring(s)
text = tree.text_content()
print text 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T16:54:11.130

You can modify the XPath slightly to work with your current structure - by getting the parent of the label, then looking back for the fist `a` element, and taking the text from that...

```
>>> tree.xpath('//*[contains(text(), "The Keyword:")]/..//a/text()')
['The text'] 
```

But that may not be flexible enough...

# jquery - 使用 jQuery 将 Html 元素转换为数组

> ID：14004626
> 
> 赞同：0
> 
> 时间：2012-12-22T16:45:06.770
> 
> 标签：jquery, html

我有无限数量

```
<div class="item-1">text</div>
<div class="item-2">text</div>
<div class="item-3">text</div>
<div class="item-4">text</div>
<div class="item-5">text</div>
... 
```

我想搜索所有可用的`div`并将它们存储在带有 jQ​​uery 的数组中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T16:46:47.920

您可以使用通配符，以[**selector**](http://api.jquery.com/category/selectors/)开头。

```
arr = $('[class^=item-]'); 
```

**[现场演示](http://jsfiddle.net/afsBx/1/)**

```
arr = $('[class^=item-]');

arr.each(function(){
    alert($(this).text());
});​ 
```

# java - KeyPressed 调用 JInternalFrame 返回 NullException

> ID：14004627
> 
> 赞同：0
> 
> 时间：2012-12-22T16:45:18.610
> 
> 标签：java, keyevent, jinternalframe

我有一个 JInternalFrame，当我在 JTextField 中按 F1 时我想调用另一个 JInternalFrame，但是我得到了 NullPointerException。这是我的代码

图形用户界面：

```
jLabel2.setText("ID:");
    getContentPane().add(jLabel2);
    jLabel2.setBounds(10, 240, 15, 25);
    getContentPane().add(jTextField11);
    jTextField11.setBounds(30, 240, 70, 25);
    jTextField11.addKeyListener(this); 
```

关键事件：

```
public void keyPressed(KeyEvent arg0) {
    // TODO Auto-generated method stub
    if( arg0.getKeyCode() == KeyEvent.VK_F1 ){
        listProducto.setVisible(true);******ERROR******
        Main.getInstance().getPortada().getDesktop().add(listProducto);
        Main.getInstance().getPortada().getDesktop()
                .moveToFront(listProducto);
        try {
            listProducto.setSelected(true);
        } catch (PropertyVetoException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T17:06:35.617

问题是我忘记在 initComponents(); 中初始化 searchForm;

这是我缺少的代码。

```
listProducto = new ListProducto();
    listProducto.addSearchEventListener(new searchEventListener() {
        public void resultFound(EventObject e) {
            listProductoSearchPerformed();
        }
    }); 
```

对于我的搜索，我创建了一个 searchForm 来处理 searchListeners。我也添加了它的代码。

```
package com.mbpe.search;

import java.beans.PropertyVetoException;
import java.util.ArrayList;
import java.util.Iterator;
import javax.swing.JInternalFrame;
import javax.swing.JInternalFrame;
import com.mbpe.gui.Portada;
import com.mbpe.main.Main;
import com.mbpe.main.searchEvent;
import com.mbpe.main.searchEventListener;

@SuppressWarnings("serial")
public class searchForm extends JInternalFrame {
public searchForm(String title, boolean resizable, boolean closable,
        boolean maximizable, boolean iconifiable) {
    super(title, resizable, closable, maximizable, iconifiable);
}

private List _listeners = new ArrayList();
public synchronized void addSearchEventListener(searchEventListener listener) {
    _listeners.add(listener);
}
public synchronized void removeSearchEventListener(searchEventListener listener) {
    _listeners.remove(listener);
}
public synchronized void fireEvent() {
    searchEvent event = new searchEvent(this);
    Iterator i = _listeners.iterator();
    while (i.hasNext()) {
        ((searchEventListener) i.next()).resultFound(event);
    }
}

public void onClose() {

}

public void onClosing() {
    dispose();
} 
```

}

# javascript - 无法调用空 dhtmlx 网格的方法“appendChild”

> ID：14004631
> 
> 赞同：0
> 
> 时间：2012-12-22T16:45:23.007
> 
> 标签：javascript, jquery, dhtmlx

这是我的网格 xml：

```
<rows>  
    <row>  
        <cell>101</cell>  
        <cell>some name</cell>  
        <cell>917</cell>
    </row>
</rows> 
```

我通过 Ajax 将其作为 data.data 获取。

在 Ajax 调用的成功中，我有这个：

```
myGrid.attachHeader(data.filters);
if (data.widths != undefined) myGrid.setInitWidths(data.widths);
myGrid.setColTypes(data.types);
myGrid.init();
myGrid.loadXMLString(data.data, function () { }); 
```

它在这条线上崩溃：

```
myGrid.loadXMLString(data.data, function () { }); 
```

我收到错误**“无法调用 null 的方法 'appendChild'”**。

但一切都有很好的价值。myGrid 没问题， data.data 的值没问题。似乎是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T12:46:43.220

appendChild 方法与 xml 解析没有直接关系，可能是由于某些网格配置错误，或者将网格附加到不存在的 html 容器。

网格进程 loadXMLString 时会尝试第一次渲染列结构，如果配置不正确会导致上述错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T16:58:06.863

我假设有一个内部问题`loadXMLString`阻止它解析您传入的 xml。鉴于我们看不到 dhtmlx 正在使用的代码，我不太确定它可能是什么。

*   解析节点之间的空白时出现问题？
*   节点之间的意外文本文字（如不正确转义的 \r 或 \n）？
*   你能成功执行`$.parseXML(data.data)`吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-06T11:18:57.977

我使用下面的代码来解决这个问题，

```
myGrid.setHeader(...);
myGrid.setColumnIds(...);
myGrid.Init(); 
```

然后我打电话 `myGrid.loadXmlString`

# database-design - 电子商务数据库设计

> ID：14004632
> 
> 赞同：2
> 
> 时间：2012-12-22T16:45:30.887
> 
> 标签：database-design

嗨，我正在开发我的第一个电子商务网站，数据库设计中的一些挑战使我无法前进。该网站将是一个电子商店，将销售电脑、电视、电话、平板电脑等。这是我的数据库图至今：

![在此处输入图像描述](../Images/ae1dc47ad0e300f195a9360cf5f6f97f.png)

现在我的问题是关于每种产品类型，例如，如果我有一台笔记本电脑和一台电视，这两种产品在表格中会有不同的属性。我认为笔记本电脑会有一个用于 CPU、主板、视频卡等的列，并且类型、英寸等的电视栏目。

我有大约 38 种不同的产品类型，每种都有不同的产品描述。

我坚持的方式是，对于每种产品类型，我都会创建一个表格，但这将产生 38 个表格，我不知道这是否是正确的做法。

如果有任何其他方法可以解决这个问题，谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T16:55:04.247

我认为这张 db pic 对你有帮助。但是如果你还没有开始你的开发或者你可以在表格中添加这些字段。这是完整的描述

![数据库设计模式](../Images/bfaa3f1d50554320c753b00837e7f187.png)

# android - android c2dm push 仅适用于 android 4.0 但更低

> ID：14004643
> 
> 赞同：0
> 
> 时间：2012-12-22T16:46:52.617
> 
> 标签：android, push-notification, android-c2dm

我有一个应用程序。并具有推送通知功能。但我发现它只适用于 android 4.0 或 4.1，但不适用于 2.2 或 3.x。是什么原因？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T22:50:47.137

C2dm 现在已弃用，您可以改用 GCM，它支持 API 8 到 17

[你可以从这里开始](http://developer.android.com/google/gcm/index.html)

# java - GAE/JPA/Datastore 如何查询无主列表

> ID：14004646
> 
> 赞同：2
> 
> 时间：2012-12-22T16:47:13.743
> 
> 标签：java, google-app-engine, jpa, datanucleus

我正在尝试做一些我认为简单的事情，但使用 Big Table 和 JPA 并没有按预期工作，我正在使用 datanucleus jpa v2。

```
@Entity
public class Inventory extends DatastoreObject {
...

    /**
     * List of all inventory items in this object.
     */
    @OneToMany(mappedBy = "inventory", fetch = FetchType.LAZY, cascade={CascadeType.ALL})
    private List<InventoryItem> inventoryItems = new ArrayList<InventoryItem>();

...

}

@Entity
public class InventoryItem extends DatastoreObject {

    ...

    @ManyToOne
    private Inventory inventory;

    ...    
} 
```

当我查看数据存储查看器时，我会看到实体及其相关关系列。这是库存表，其中包含库存项目的 ID 列表。

```
Inventory Table
    Key    Write Ops    ID/Name         inventoryItems 
    agxzbWFydGJhcnNpdGVyDwsSCUludmVudG9yeRgwDA  8   48      [InventoryItem(69)] 

Inventory Item Table
    Key    Write Ops    ID/Name     inventory_id
    agxzbWFydGJhcnNpdGVyEwsSDUludmVudG9yeUl0ZW0YRQw     14  69  Inventory(48) 
```

我的问题是如何获取它们的inventory_id 为例如48 的所有库存项目。我知道我可以获取库存对象并执行数组子列表，但这似乎效率很低。

当我尝试进行查询时，它没有按预期工作，我理解不支持连接的一些原因，但如果我可以访问库存项目表的 inventory_id 列，它似乎会起作用，但似乎我不能。

当我尝试简单的查询时，这将不起作用。

```
"Select from InventoryItem.class.getName() item where item.inventory.id = :inventoryId" 
```

我希望这可以在 datanucleus 中工作，我知道它通常是一个连接，但是如果 datanucleus 知道它是一个无主关系并且库存对象是由它的 id 映射的，这不能以某种方式工作吗？我知道 .id 属性没有任何意义，因为它是一个任意标记，但似乎应该有一种方法可以使用无主的 @OneToMany(mappedBy="inventory") 配置进行此类查询。

我也尝试了另一种方法，将对象分配为参数，但令我惊讶的是，这也不起作用。

```
"Select from InventoryItem.class.getName() item where item.inventory = :inventory" 
```

在这里，我通过首先获取对象然后尝试使用该对象作为参数进行查询来尝试查询，但除非对象被“嵌入”，否则这同样不起作用

我首选的解决方案是第一个查询操作，但我很确定这是不可能使用大表的。我仍然很困惑为什么第二个操作不起作用。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T18:19:28.400

那么在这种情况下，我更喜欢什么而不是在实体之间放置任何关系，我只是为我的一个实体创建密钥，并将另一个实体中的相同密钥保存为外键，所以如果我需要查询我使用的子实体外键作为取回我的结果。

我最近开始使用 Objectify，我建议您如果需要此类问题，可以使用 Objectify 将数据持久化到 Appengine Datastore。它非常高效且易于学习和使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T00:15:58.437

那个 JPA 查询可以吗？它应该如下所示：

```
select item from InventoryItem item where item.inventory.id = :inventoryId 
```

# c# - 命令中的项目与 UI 之间的绑定（初学者）

> ID：14004649
> 
> 赞同：3
> 
> 时间：2012-12-22T16:48:04.177
> 
> 标签：c#, wpf, mvvm

我有一个`Obseravable Collection`项目。集合显示在树视图中。我想启用使用上下文菜单从集合中删除项目。我不知道我该怎么做。

例如，假设我有 4 个树视图项（这意味着我有 4 个项目`Obseravable Collection`）现在，用户想要删除第二个项目，他右键单击第二个树视图项，打开一个上下文菜单并按下“删除。 ." 如何确定要从集合中删除的项目？（我正在使用`Command`）

上下文菜单如下所示：

```
 <ContextMenu x:Key="RemoveItemMenu">
        <MenuItem Header="Remove..." Command="RemoveItem"/>
     </ContextMenu> 
```

以及将要执行的命令函数：

```
 private void RemoveItemExcecute()
    {
        //Removing the clicked Item out of the collection
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T18:15:20.667

您可以`CommandParameter`在`MenuItem`. 这样，您就可以将要删除的项目传递给命令。

```
<ContextMenu x:Key="RemoveItemMenu">
    <MenuItem Header="Remove..." Command="RemoveItem" CommandParameter="{Binding}" />
</ContextMenu> 
```

您可能需要修改绑定以传递您需要的信息。然后，当您处理命令时，您可以使用该信息：

```
private void RemoveItemExcecute(object param)
{
    // "param" is the command parameter passed to the command.
    MyItem item = (MyItem)param;
    MyItemCollection.Remove(item);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T18:21:01.037

我会参考[这个答案](https://stackoverflow.com/a/5118406/264575)，它解释了如何使用 Behaviors 将`SelectedItem`字段添加到您的`TreeView`.

从那里您可以只在 ViewModel 的`RemoveItemExecute`方法中引用 SelectedTreeItem。

**XAML：**

```
<TreeView ItemsSource="{Binding MyCollection}">
    <e:Interaction.Behaviors>
        <behaviours:BindableSelectedItemBehavior SelectedItem="{Binding MySelectedItem, Mode=TwoWay}" />
    </e:Interaction.Behaviors>
</TreeView> 
```

**C＃：**

```
public ObservableCollection<MyObject> MyCollection { get; set; }

public MyObject MySelectedItem { get; set; } // You'll want to use INotifyPropertyChanged magic here

private void RemoveItemExcecute()
{
    MyCollection.Remove(MySelectedItem);
} 
```

另一种选择是使用 a`CommandParameter`传递`MySelectedItem`给函数。

**XAML：**

```
<ContextMenu x:Key="RemoveItemMenu">
    <MenuItem Header="Remove..." Command="RemoveItem" CommandParameter="{Binding MySelectedItem}"/>
 </ContextMenu> 
```

**C＃：**

```
private void RemoveItemExcecute(object param)
{
    var selectedItem = (MyObject)param;
    MyCollection.Remove(selectedItem);
} 
```

# programming-languages - 编程语言在其语法中不允许的东西

> ID：14004651
> 
> 赞同：1
> 
> 时间：2012-12-22T16:48:27.300
> 
> 标签：programming-languages, compiler-theory

有些东西我在任何编程语言中都从未见过，我会知道为什么。我相信这些东西可能有用。嗯，也许当你指出时解释会很明显。但我们走吧。

为什么**10²**的**语法无效**？有时，我们希望使用这样的符号（就像在论文中一样）而不是预先计算的值（有时，是一个很大的数字，而且，第一次看到时会有些困难，我相信这是目的_ 在 D 和 Java 编程语言中）或仍然为此调用数学函数。当然，我是说编译器将此变量的值替换为计算值，不要在运行时将其保留。

-在标识符中**。**为什么 - 像 _ 一样不可接受？（只是 lisp 方言）对我来说，`int name-size = 14;`并不意味着不可读。或者这个“限制”是计算机字符集的属性？

当有人回答我的问题时，我会很高兴。另外，如果您有其他要问的指针，只需编辑我的答案并在其版本上发布注释或作为评论发布。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-22T16:56:31.333

好的，所以你给出的两个具体问题：

1.  10 ² - 你希望如何输入这个？除了标识符，编程语言倾向于坚持使用 ASCII。请注意，您*可以*`double x = 10e2;`在 Java 和 C# 中使用...但该表单`e`仅对浮点文字有效，对整数无效。

    正如评论中所指出的，[某些语言支持](http://en.wikipedia.org/wiki/Exponentiation#In_programming_languages)[*求*](http://en.wikipedia.org/wiki/Exponentiation#In_programming_languages)[幂](http://en.wikipedia.org/wiki/Exponentiation#In_programming_languages)*- 但我怀疑它只是被认为不够有用，不值得在大多数情况下增加额外的复杂性。*

**   带有 in的标识符`-`会在带有中缀运算符的语言中导致明显的歧义：

    ```
    int x = 10;
    int y = 4;
    int x-y = 3;
    int z = x-y; 
    ```

    `z`等于 3（`x-y`变量的值）还是等于 6（减去的`y`值`x`）？显然，您可以想出关于会发生什么的规则，但是通过`-`从标识符中的有效字符列表中删除，可以消除这种歧义。使用`_`或仅使用大小写 ( `nameSize`) 比在语言中提供额外规则更简单。无论如何，你会在哪里停下来？`.`作为标识符的一部分，或者`+`？* 

 *一般来说，您应该意识到语言*很容易*受到太多特性的影响。尤其是 C# 团队对于将新功能纳入语言的门槛非常开放。每个新功能都必须经过设计、指定、实现、测试、记录，然后开发人员必须了解它才能理解使用它的代码。这并不便宜，所以优秀的语言设计者自然是保守的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T17:53:41.167

[可以做到吗？](https://github.com/collectiveidea/unicode_math)

> 2.⁷</p>
> 
> 1.617 * 10.ⁿ(13)

显然是的。您可以修改诸如 ruby​​ 之类的语言（定义 utf-8 命名函数和猴子补丁数字类）或[在 C++ 中创建用户定义的文字](http://en.wikipedia.org/wiki/C++11#User-defined_literals)以实现额外的表现力。

应该这样做吗？

您将如何输入这些字符？

你会使用哪个 unicode 来表示欧拉常数？[U+2107](http://www.unicode.org/mail-arch/unicode-ml/y2010-m07/0303.html) ?

我想说我们坚持我们可以输入并同意的代码。*

# ruby - 我可以设置 Vim 的“嵌入式”红宝石路径吗？

> ID：14004653
> 
> 赞同：5
> 
> 时间：2012-12-22T16:48:32.190
> 
> 标签：ruby, vim

当我运行时：

```
:ruby print VERSION 
```

在 Vim 中，我得到 1.8.7。

我安装了 1.9.3，我想改用它。有没有办法改变它？

它会使用相同的宝石路径吗？

我不是在谈论`!ruby`命令。我说的是作为 Vim 一部分的“嵌入式”Ruby。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-22T17:20:19.843

是的，但你必须重新编译 Vim。Vim 将`$PATH`在编译时针对您首先出现的任何 Ruby 进行编译，因此您应该能够下载源代码并运行：

```
./configure --enable-rubyinterp # + other options you want
make
make install 
```

如果您在 OS X 上使用 Homebrew，您可能希望只使用`brew install vim`或`brew install macvim --override-system-vim`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T17:20:00.127

> 我安装了 1.9.3，我想改用它。有没有办法改变它？

您必须重新编译 Vim 才能更改版本。只是谷歌的东西，包括`vim "--enable-rubyinterp"`。

请注意，您需要重新编译使用旧 ruby​​ 版本编译的所有本机插件。

# android - 安卓应用程序设计的分辨率

> ID：14004655
> 
> 赞同：3
> 
> 时间：2012-12-22T16:49:19.147
> 
> 标签：android, resolution, dpi

我开始为安卓设计小应用程序。但这是我的第一个 android 应用程序设计。我有一个关于设备和显示器的问题。我已阅读[http://developer.android.com/](http://developer.android.com/)上的所有开发人员指南，所有关于 DPI 和像素的内容。仍然不清楚问题。我想在 Photoshop CS6 中进行设计，因为这对我来说是最好的方式。

在指南中，我读到***“一种方法是在基本标准（正常尺寸和 MDPI）下工作，并为其他存储桶放大或缩小它。另一种方法是从具有最大屏幕尺寸的设备开始，然后缩小和找出你需要在小屏幕上做出的 UI 妥协。”***

我想从最大的屏幕尺寸开始，所以这是 XHDPI 320DPI。例如，我想选择 Nexus 4。我需要为 PSD 选择什么分辨率（像素和 DPI）？

我想我需要用 1280x768px 和 320dpi 创建 PSD。那正确吗？如果是这样，当我需要缩小到 160dpi 时，我必须使用 160dpi 创建新的 PSD 并从 320dpi 调整元素的大小？

请帮助我困惑的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T17:16:55.727

密度和屏幕尺寸不是一回事。

XHDPI 是密度。1280x768 是屏幕分辨率，而不是屏幕尺寸。Nexus 4 有一个 4 英寸的屏幕，这被认为是“正常”尺寸。如果你的设备有一个 8 英寸的屏幕和 1280x768 的分辨率，它将是 160dpi，并且是 MDPI。但是，您仍然可以使用为 Nexus 4 创建的 1280x768 资源，并且系统不必缩放图像。

以下是这一切的关系：使用 Nexus 4 的“正常”大小的屏幕，您可以显示各种 UI 元素，记住它们需要足够大才能阅读、点击等。如果您在7" 屏幕，被认为是“大”的，您可以添加额外的 UI 元素，因为您拥有更多的空间。到目前为止还好吗？

现在，假设 4" 屏幕和 7" 屏幕具有相同的分辨率 (1280x768)，它们将具有不同的密度。4" 是 XHDPI，7" 是 HDPI（我的 Nexus 7 报告 213dpi）。

如果你有一个 80x80 的图像，它在 Nexus 4 上是 1/4" 正方形，但在 Nexus 7 上是 1/3" 正方形。整个 UI 看起来会更大，而且有点费雪。幸运的是，只要您使用“dp”来声明 UI 元素的大小，Android 就会为您缩放 UI。您可以提供不同密度的资产，这样 Android 就不必过多地缩放位图——尽管它仍然会。

因此，如果您正在开发手机应用程序，请首先针对普通屏幕（如果那是您的开发设备，则使用 XHDPI），并在 XHDPI 中提供所有资产。如果您想让 UI 更适用于平板电脑，请为大屏幕创建备用布局。最后缩放您的图像以获得其他支持的分辨率。

您可以使用 PSD，但就我个人而言，我更喜欢矢量图形，因为它们可以很好地缩放。

我不是 PhotoShop 用户，但由于它是基于光栅的，我会从比您预期使用的分辨率更高的分辨率开始，然后按比例缩小。至少，我会设计一个 1600x2560 的 Nexus 10，然后从那里缩小。在我的过程中，我使用 CorelDraw（长篇故事），在 1"x1" 框中设计图标，然后以各种分辨率导出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T16:59:17.617

关于您正在尝试做的事情的更多细节会有所帮助。你是想设计你的图标，还是整个用户界面，还是什么？

在android中，UI主要是通过xml来设计的，应该尽可能使用默认样式，以保持与操作系统的其余部分保持一致并且看起来不错。对于许多应用程序，没有真正的图形工作要做，可能接受启动器图标，开发人员网站上有指南。

如果您正在尝试设计一些元素，例如图标，请弄清楚它们在最大屏幕尺寸上需要多大，然后从那里开始。然后你可以缩小它们，但你实际上不应该绘制整个 UI 或任何东西。看看一些 android 示例中的图形是如何完成的，我发现它们在试图弄清楚如何做事时非常有用。

# google-fusion-tables - 融合表动态地图 strokeOpacity

> ID：14004656
> 
> 赞同：0
> 
> 时间：2012-12-22T16:49:21.233
> 
> 标签：google-fusion-tables

我已经为我的地图调整了这个例子：

[https://developers.google.com/fusiontables/docs/samples/dynamic_styling_template](https://developers.google.com/fusiontables/docs/samples/dynamic_styling_template)

但我希望边界的不透明度为 0（所以没有人看到它）。我想我必须用 strokeOpacity: 0.0 做一些代码和平的事情，但我无法让它工作

```
 // Apply the style to the layer & generate corresponding legend
  function applyStyle(map, layer, column) {
    var columnStyle = COLUMN_STYLES[column];
    var styles = [];

    for (var i in columnStyle) {
      var style = columnStyle[i];
      styles.push({
        where: generateWhere(column, style.min, style.max),
        polygonOptions: {
          fillColor: style.color,
          fillOpacity: style.opacity ? style.opacity : 0.8
        }
      });
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T05:35:25.137

您必须将其设置为 1%，即：

中风不透明度：0.01

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T19:25:03.820

你看过[PolygonOptions](https://developers.google.com/maps/documentation/javascript/reference#PolygonOptions)

这似乎是你能做的最好的：

```
 strokeOpacity: 0.0001,
 strokeWeight: 0,
 strokeColor: style.color, 
```

[例子](http://www.geocodezip.com/v3_FusionTables_dynamic_styling_template.html)

更新：看起来 strokeOpacity: 0.0 不起作用；尝试一些非常小的东西，比如 0.0001。

# ios - 在 Storyboard 中转至 ABPersonViewController

> ID：14004658
> 
> 赞同：2
> 
> 时间：2012-12-22T16:49:26.193
> 
> 标签：ios, objective-c, uistoryboard, uistoryboardsegue, abpersonviewcontroller

我正在尝试`ABPersonViewController`从情节提要中的按钮转到 a 。但如果我这样做，屏幕就完全黑了。

如果我使用 a`IBAction`作为按钮并使用以下代码，它可以工作：

```
ABPersonViewController *person = [[ABPersonViewController alloc]init];
    [self.navigationController pushViewController:person animated:YES]; 
```

这是为什么？我做错了吗？

**编辑**：我找到了解决方法，但我认为这不是正确的方法。我`ABPersonViewControlle`将 r 子类化并使用以下内容覆盖了该`initWithCoder`方法：

```
-(id)initWithCoder:(NSCoder *)aDecoder{

    self = [self initWithNibName:nil bundle:nil];
    return self;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:56:07.400

由于您使用的是故事板，您应该命名您正在使用的 segue，然后在您的 IBAction 中命名：

```
[self performSegueWithIdentifier:@"abPersonViewControllerSegue" sender:self]; 
```

这样你甚至不需要手动调用 alloc/init。然后在您的 prepareForSegue 中，您可以设置任何属性：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"abPersonViewControllerSegue"]) 
    {
        [segue.destinationViewController setAttribute:@"whatever you want"];
        ...      
    }
} 
```

如果这不是您要找的东西，请告诉我。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-23T00:02:37.327

您没有设置 displayPerson 属性...

```
@property(nonatomic, readwrite) ABRecordRef displayedPerson 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-30T23:13:50.207

既然你在使用 Storyboard，为什么还要调用 [[ABPersonViewController alloc]init]？Storyboard 会处理 ABPersonViewController 的创建和推送（如果你为 segue 指定了 Push 动作）。只要您将控件从 Button 拖到 Storyboard 中的 ABPersonViewController 中，就不需要编写一行代码。如果您控制从包含按钮的视图控制器拖动，那么您应该调用 performSegue 来触发将 ABPersonViewController 添加到导航控制器的 segue（在这种情况下您需要设置 segue 的标识符）。

# java - Android 文本在地图叠加层上消失

> ID：14004659
> 
> 赞同：0
> 
> 时间：2012-12-22T16:49:28.743
> 
> 标签：java, android, eclipse, google-maps, ondraw

我为我的地图视图做了一个覆盖。我已经绘制了标记以显示发生地震的位置，但我正在尝试绘制文本以在标记旁边显示地震的震级。问题是文本出现了，但是一旦触摸地图（我认为那是执行覆盖的 onDraw 时），文本就会消失。这是我的代码。任何将不胜感激。这是我的代码：

```
import java.util.ArrayList;

import android.content.Context;
import android.database.Cursor;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Point;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;
import com.google.android.maps.Projection;

public class EarthquakeOverlay extends Overlay {
Context c;
int counter = 0;
Cursor earthquakes;
ArrayList<GeoPoint> quakeLocations;
ArrayList<String> mags;
int rad = 5;
String g;

public EarthquakeOverlay(Cursor cursor, Context con) {
    super();
    earthquakes = cursor;
    c = con;
    mags = new ArrayList<String>();
    quakeLocations = new ArrayList<GeoPoint>();
    refreshQuakeLocations();
}

public void swapCursor(Cursor cursor) {
    earthquakes = cursor;
    refreshQuakeLocations();
}

private void refreshQuakeLocations() {
    quakeLocations.clear();

    if (earthquakes != null && earthquakes.moveToFirst())
        do {
            int magIndex = earthquakes
                    .getColumnIndexOrThrow(EarthquakeProvider.KEY_MAGNITUDE);

            String mag = earthquakes.getString(magIndex);

            mags.add(mag);

            int latIndex = earthquakes
                    .getColumnIndexOrThrow(EarthquakeProvider.KEY_LOCATION_LAT);
            int lngIndex = earthquakes
                    .getColumnIndexOrThrow(EarthquakeProvider.KEY_LOCATION_LNG);

            Double lat = earthquakes.getFloat(latIndex) * 1E6;
            Double lng = earthquakes.getFloat(lngIndex) * 1E6;

            GeoPoint geoPoint = new GeoPoint(lat.intValue(), lng.intValue());
            quakeLocations.add(geoPoint);

        } while (earthquakes.moveToNext());
}

public void draw(Canvas canvas, MapView mapView, boolean shadow) {
    Projection projection = mapView.getProjection();

    Bitmap flag = BitmapFactory.decodeResource(c.getResources(),
            R.drawable.marker);

    Paint bitmapPaint = new Paint();
    bitmapPaint.setFilterBitmap(false);
    bitmapPaint.setAntiAlias(true);

    Point globalPoint = new Point();

    // Create and setup your paint brush
    Paint paint = new Paint();
    paint.setColor(Color.BLUE);
    paint.setAntiAlias(true);
    paint.setFakeBoldText(true);

    if (shadow == false) {
        for (GeoPoint point : quakeLocations) {
            Point myPoint = new Point();
            projection.toPixels(point, myPoint);
            globalPoint = myPoint;

            if (c != null) {
                canvas.drawBitmap(flag, myPoint.x - rad, myPoint.y - rad,
                        bitmapPaint);
                if(mags.isEmpty()){
                // do nothing
                }else{
                    canvas.drawText(mags.get(0), myPoint.x - rad, myPoint.y - rad,
                            paint);
                    mags.remove(0);
                }
            }// end of if stetment

            }// end of quakeLocations for statment

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T18:12:24.897

我认为您的问题是以下行-

```
 mags.remove(0); 
```

第一次绘制后，您从列表中删除所有量级，因此下一次`draw`调用`mags.isEmpty()`将是真实的。

查看您的逻辑，您可能需要重做循环以遍历您的两个并行数组`quakeLocations`和`mags`.

类似于更改`for (GeoPoint point : quakeLocations)`为

```
final int numQuakes = 0;
for(int i=0; i < numQuakes; i++) {
// in here use quakeLocations.get(i) and mags.get(i)
} 
```

# mysql - group by 减慢查询速度

> ID：14004661
> 
> 赞同：3
> 
> 时间：2012-12-22T16:49:37.757
> 
> 标签：mysql, sql

我在产品表上有以下索引：**(product_t,productid,forsale)**。MySQL手册说：

*GROUP BY 只命名构成索引最左前缀的列，而不命名其他列。* [http://dev.mysql.com/doc/refman/5.0/en/group-by-optimization.html](http://dev.mysql.com/doc/refman/5.0/en/group-by-optimization.html)

当我执行以下查询时

```
SELECT z.product_t, COUNT(z.productid)
FROM xcart_products z
JOIN xcart_products_lng w ON z.productid = w.productid
AND w.code =  'US'
WHERE z.forsale =  'Y'
group by z.product_t 
```

因此使用最左边的索引字段（product_t），执行时间仍然很长：

```
+-----------+--------------------+
| product_t | COUNT(z.productid) |
+-----------+--------------------+
| B         |                  4 |
| C         |              10521 |
| D         |                  1 |
| F         |                 16 |
| G         |                363 |
| J         |                 16 |
| L         |                749 |
| M         |                 22 |
| O         |                279 |
| P         |               5304 |
| S         |                 22 |
| W         |                662 |
+-----------+--------------------+
12 rows in set (0.81 sec) 
```

当我使用整个索引（product_t、productid、forsale）时，执行时间非常快（0.005 秒）。我应该如何更改它以使查询更快？

![在此处输入图像描述](../Images/c1c5089d5663ac1f8a1354baf3513c03.png)

**我认为可以通过使用半连接以某种方式改进查询...但是我不确定如何...**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T17:32:35.367

减速可能与 GROUP BY 子句无关。尝试分别为 w.code 和 z.forsale 添加索引。

[MySQL Profiling](http://webmonkeyuk.wordpress.com/2011/04/18/mysql-servers-built-in-profiling-support/)也可以帮助你的努力

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T16:54:11.233

最明显的答案是仅为 product_t 创建一个新索引。你能创建新的索引吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T18:44:57.747

谢天谢地，我找到了一种提高速度的方法。我确实有另一个表，其中定义了所有 product_t。那里的每个 product_t 还使用“代码”字段（指定每个 product_t 的翻译）。在此表中，我还在 product_t 和代码上定义了一个索引。通过将查询更改为：

```
SELECT z.product_t, COUNT(z.productid)
FROM xcart_products z
JOIN xcart_products_lng w ON z.productid = w.productid
JOIN xcart_products_product_t_lng p ON z.product_t = p.product_t
AND p.code =  'US'
WHERE z.forsale =  'Y'
group by p.product_t,p.code 
```

我设法将速度提高到 0.10 秒。它更快的原因是因为分组依据现在是在整个索引上完成的。其次，将 where code='US' 从大 products_lng 表替换为小 product_t_lng 表。我认为这是最有效的查询......

```
mysql> SELECT z.product_t, COUNT( z.productid )
        -> FROM xcart_products z
        -> JOIN xcart_products_lng w ON z.productid = w.productid
        -> JOIN xcart_products_product_t_lng p ON z.product_t = p.product_t
        -> AND p.code =  'US'
        -> WHERE z.forsale =  'Y'
        -> GROUP BY p.product_t, p.code
        -> ;
    +-----------+----------------------+
    | product_t | COUNT( z.productid ) |
    +-----------+----------------------+
    | B         |                    4 |
    | C         |                10521 |
    | F         |                   16 |
    | G         |                  363 |
    | L         |                  749 |
    | M         |                   22 |
    | O         |                  279 |
    | P         |                 5304 |
    | S         |                   22 |
    | W         |                  662 |
    +-----------+----------------------+
    10 rows in set (0.14 sec) 
```

# android - Android 保证金未按预期工作

> ID：14004665
> 
> 赞同：0
> 
> 时间：2012-12-22T16:50:13.730
> 
> 标签：android, android-layout

考虑以下代码和输出：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <Button
        android:id="@+id/button1"
        android:layout_width="100dp"
        android:layout_height="wrap_content"
        android:layout_margin="0dp"
        android:text="A" />

    <Button
        android:id="@+id/button2"
        android:layout_width="100dp"
        android:layout_height="wrap_content"
        android:layout_margin="0dp"
        android:text="B" />

    <Button
        android:id="@+id/button3"
        android:layout_width="100dp"
        android:layout_height="wrap_content"
        android:layout_margin="0dp"
        android:text="C" />

</LinearLayout> 
```

![在此处输入图像描述](../Images/ec20628f0b557be1c4d7bee5bb6e1ce4.png)

因为`android:layout_margin="0dp"`，按钮应该相互接触，但这并没有发生。请解释这种行为。我该怎么做才能消除按钮之间的间隙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T17:00:29.377

这是由于应用于按钮的样式。
您可以通过设置来避免这种情况，`android:background`但您会失去点击效果和所有 .

# android - Google Maps Android v2 无法与 ActionBarSherlock 片段活动一起使用

> ID：14004668
> 
> 赞同：5
> 
> 时间：2012-12-22T16:50:39.160
> 
> 标签：android, maven, actionbarsherlock, google-maps-android-api-2

我已按照将[ActionBarSherlock 与新的 SupportMapFragment](https://stackoverflow.com/questions/13721929/using-actionbarsherlock-with-the-new-supportmapfragment)一起使用的步骤来使用新的 Google Maps Android v2 API，但我遇到了一些错误，导致应用程序在启动时崩溃。

我在我的应用程序上使用 Maven，所以我也发布了我的 AndroidManifest 和 POM 文件。

你能帮我吗？

这是来自 logcat 的错误：

> 12-22 14:35:41.319: 错误/AndroidRuntime(8565): 致命异常: main java.lang.NoClassDefFoundError: com.google.android.gms.R$styleable at com.google.android.gms.maps.GoogleMapOptions。 createFromAttributes(Unknown Source) at com.google.android.gms.maps.SupportMapFragment.onInflate(Unknown Source) at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:269) at android.view.LayoutInflater.createViewFromTag (LayoutInflater.java:563) 在 android.view.LayoutInflater.rInflate(LayoutInflater.java:623) 在 android.view.LayoutInflater.inflate(LayoutInflater.java:408) 在 android.view.LayoutInflater.inflate(LayoutInflater.java: 320) 在 com.actionbarsherlock.internal 的 android.view.LayoutInflater.inflate(LayoutInflater.java:276)。ActionBarSherlockCompat.setContentView(ActionBarSherlockCompat.java:853) at com.actionbarsherlock.app.SherlockFragmentActivity.setContentView(SherlockFragmentActivity.java:262) at br.com.myapp.activities.MainActivity.onCreate(MainActivity.java:19) at android.app .Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615) 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667) 在 android.app.ActivityThread.access$1500 (ActivityThread.java:117) 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:935) 在 android.os.Handler.dispatchMessage(Handler.java:99) 在 android.os.Looper.loop(Looper. java:130) 在 android.app.ActivityThread。main(ActivityThread.java:3687) at java.lang.reflect.Method.invokeNative(Native Method) at java.lang.reflect.Method.invoke(Method.java:507) at com.android.internal.os.ZygoteInit$ MethodAndArgsCaller.run(ZygoteInit.java:867) at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625) at dalvik.system.NativeStart.main(Native Method)

安卓清单：

```
 <?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="br.com.myapp" android:versionCode="1" android:versionName="2.0.0">
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="17"></uses-sdk>
<uses-feature
    android:name="android.hardware.touchscreen"
    android:required="false" />

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" >
</uses-permission>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" >
</uses-permission>
<permission android:name="br.com.myapp.permission.MAPS_RECEIVE"
            android:protectionLevel="signature" />
<uses-permission android:name="br.com.myapp.permission.MAPS_RECEIVE" />
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />

<application android:label="@string/app_name" android:icon="@drawable/rp_icon"
             android:logo="@drawable/logo_actionbar" android:theme="@style/Theme.Sherlock.Light.DarkActionBar">

    <uses-library android:name="com.google.android.maps" />
    <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="MyKeyXXXXXXXXXXXXXXXXXXXXXXXXX" />

    <activity android:name=".activities.MainActivity">
        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter>
    </activity>
</application>
    </manifest> 
```

POM.xml：

```
 <?xml version="1.0" encoding="UTF-8"?> 
```

http://maven.apache.org/maven-v4_0_0.xsd"> 4.0.0 br.com.myapp myapp-android 2.0.0 apk myapp

```
<properties>
    <platform.version>4.2
        </platform.version>
</properties>

<dependencies>
    <dependency>
        <groupId>com.google.android</groupId>
        <artifactId>android</artifactId>
        <version>4.2</version>
    </dependency>
    <dependency>
        <groupId>com.loopj.android.http</groupId>
        <artifactId>async-http-client</artifactId>
        <version>1.4.2</version>
    </dependency>
    <dependency>
        <groupId>com.google.android</groupId>
        <artifactId>support-v4</artifactId>
        <version>r7</version>
    </dependency>
    <dependency>
        <groupId>com.actionbarsherlock</groupId>
        <artifactId>actionbarsherlock</artifactId>
        <version>4.2.0</version>
        <type>apklib</type>
    </dependency>
    <dependency>
        <groupId>com.google.android.gms</groupId>
        <artifactId>google-play-services</artifactId>
        <version>4</version>
    </dependency>
</dependencies>

<build>
    <plugins>
        <plugin>
            <groupId>com.jayway.maven.plugins.android.generation2</groupId>
            <artifactId>android-maven-plugin</artifactId>
            <version>3.1.1</version>
            <configuration>
                <androidManifestFile>${project.basedir}/AndroidManifest.xml</androidManifestFile>
                <assetsDirectory>${project.basedir}/assets</assetsDirectory>
                <resourceDirectory>${project.basedir}/res</resourceDirectory>
                <nativeLibrariesDirectory>${project.basedir}/src/main/native</nativeLibrariesDirectory>
                <sdk>
                    <platform>10</platform>
                </sdk>
                <undeployBeforeDeploy>true</undeployBeforeDeploy>
            </configuration>
            <extensions>true</extensions>
        </plugin>

        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T10:02:30.693

在我的项目中发现了同样的问题。
解决方案是将*com.google.android.gms*的*apklib*和*jar*的 2 个依赖项添加到 maven 构建脚本中：

```
 <!-- google-play-services. -->
    <dependency>
        <groupId>com.google.android.gms</groupId>
        <artifactId>google-play-services</artifactId>
        <version>4</version>
        <type>apklib</type>
    </dependency>

    <dependency>
        <groupId>com.google.android.gms</groupId>
        <artifactId>google-play-services</artifactId>
        <version>4</version>
        <type>jar</type>
    </dependency> 
```

此外，地图 v2 不需要依赖*com.google.android.maps 。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T20:41:07.267

您是否包含了来自 Google 地图库的完整资源？那里有资源（因此引用 java.lang.NoClassDefFoundError: com.google.android.gms.R$styleable at com.google.android.gms.maps.GoogleMapOptions.createFromAttributes(Unknown Source)）。

仅引用 google-play-services.jar 文件是不够的。仔细检查 Google Play 服务项目根目录下的 README.txt 文件。

# jcrop - 使用 Jcrop，更改图像时无法正确刷新预览窗格

> ID：14004671
> 
> 赞同：0
> 
> 时间：2012-12-22T16:51:29.647
> 
> 标签：jcrop

我正在尝试在更改头像的页面中使用带有预览窗格的 Jcrop。但是，在上传新图像文件后，当我调用 setImage 设置新图像（具有不同的宽度/高度）并设置预览图像的属性时，预览窗格显示不正确。我使用萤火虫追踪，似乎img仍在使用前一张图像的高度，宽度。我修改了下载包中的tutorial3，简单的添加了一个按钮来改变图像，看看预览窗格是否正确。我似乎是同样的错误。下面是按钮单击功能的代码。有什么解决办法吗？

```
 $('#img1').click(function(e) {
        $('#preview').attr('src','demo_files/img50d5753eb067c.jpg');
        jcrop_api.setImage('demo_files/img50d5753eb067c.jpg');
          $('#target').Jcrop({
            onChange: updatePreview,
            onSelect: updatePreview,
            aspectRatio: 1,
            boxWidth: 450
          },function(){
            // Use the API to get the real image size
            var bounds = this.getBounds();
            boundx = bounds[0];
            boundy = bounds[1];
            // Store the API in the jcrop_api variable
            jcrop_api = this;
          });           

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:13:08.257

我[在使用 JCrop 时更改图像](https://stackoverflow.com/questions/2767927/change-an-image-while-using-jcrop)这个主题和 AdmSteck 的答案中看到了与您相同的问题，这是最好的一个。

希望这有帮助！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-13T13:07:47.743

在插件的未缩小版本中，“boundx 和 boundy”被声明为不会在 setImage 函数之外更新的局部变量。您需要做的就是删除这两个变量的 'var' 并使它们成为全局变量。

从第 328 行开始，

```
var boundx = $img.width(),
    boundy = $img.height(),

    $div = $('<div />').width(boundx).height(boundy).addClass(cssClass('holder')).css({
    position: 'relative',
    backgroundColor: options.bgColor
  }).insertAfter($origimg).append($img); 
```

改成

```
 boundx = $img.width();
  boundy = $img.height();

  var $div = $('<div />').width(boundx).height(boundy).addClass(cssClass('holder')).css({
    position: 'relative',
    backgroundColor: options.bgColor
  }).insertAfter($origimg).append($img); 
```

# ios - 适用于 iOS 的简化加密库

> ID：14004675
> 
> 赞同：7
> 
> 时间：2012-12-22T16:52:15.650
> 
> 标签：ios, security, cryptography, libraries

我使用 Java 密码学已经很多年了。现在，我们需要编写一个 iOS 应用程序，它将加密的有效负载从移动设备发送到 Java 服务。我已经开始使用 iOS 加密支持（CommonCrypto 等）并且发现它有点困难。JCE 有一个非常干净、简洁的 API，所以我显然被宠坏了。相比之下，iOS 密码学是一个更难使用的 API。

CommonCrypto 周围是否有任何简化的加密库或包装器提供更简洁的 API？特别是，我们需要：

*   密钥生成（对称和非对称）
*   数据加密/解密
*   数字签名（例如 SHA1withRSA）
*   散列
*   RSA、3DES 和 AES 支持

例如，我知道我已经看到了一两个包装 AES 加密的示例类。我正在寻找更丰富、更全功能的东西。有人有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T17:01:50.147

您可以在您的 iOS 应用程序中使用 openSSL，为了便于使用，您可以使用 septicus 的[SSCrypto 库](http://septicus.com/products/opensource/)。

从败血症部位：

> SSCrypto.framework 围绕 OpenSSL 库函数提供了一个简单的包装器，用于加密、解密（对称和 RSA）和校验和。它还对 base64 数据进行编码和解码，并且可以生成私有和公共 RSA 密钥。项目中包含一个测试工具。单击此处查看SSCrypto 附带的[main.m文件以获取其使用示例。](http://septicus.com/products/opensource/main.html)

# java - Java - 全局变量与全局方法

> ID：14004684
> 
> 赞同：-2
> 
> 时间：2012-12-22T16:53:32.563
> 
> 标签：java, resources, global-variables, global-methods

我正在研究一个包含 5000 多个课程的项目，然后我在每个课程中都看到了这个：

```
private static int foo = 1;

private static void setfoo(int value)
{
     foo = value;
}

private static int getfoo()
{
     return foo;
} 
```

所以，我想为什么不使用全局变量并设置它，如果无论如何都是静态的。

全局方法和变量之间存在资源使用差异吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T16:57:58.780

如果您想在将来添加验证（或添加日志记录，或进行访问统计或...），Getter 和 Setter 很有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T17:08:23.850

**如果 getter/setter 存在，请始终使用它们。** `getFoo`并`setFoo`有效地定义一个名为“Foo”的*属性*，它在概念上与您的 variable 不同`foo`。 `foo`只是持有该属性当前值的变量，可以认为属于该属性。

但请记住，属性不必只是获取/设置其支持变量。它还可以在设置之前验证您传入的值。它可以同步对变量的访问。和/或将来，setter 可能会改变其他事物的特性，而 getter 可以返回其他事物的当前状态，甚至不需要支持变量。通过直接设置变量，您会在将来/将要更改属性以执行任何操作的情况下创建兼容性问题。

但是，如果您知道`setFoo`除了设置一个名为 的变量之外什么都不做（并且在不久的将来仍然会这样做）`foo`，那么**实际上最好*没有*getter/setter。** 它们不是更干净、更易读，当然也不是更有效；`a = 3; doStuffWith(a);`在所有方面都节拍`setA(3); doStuffWith(getA());`。他们的缺席让你摆脱了只需要一个变量的属性的概念包袱。*仅当您需要（或肯定*很快需要）属性可以提供的特殊行为 时才添加 getter/setter 。**但是一旦你添加了它们，就可以在任何地方使用它们。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T18:02:21.600

字段、getter 和 setter 都是私有的和静态的。这意味着它们的预期目的只能在类中使用。因此，如果您在某个所有类可访问的地方（全局可访问）创建它，另一个公共类那么您也必须跟踪该字段，因为在每个类中它必须在使用之前初始化为某个值（在你的情况下它1 我觉得）。此外，您必须使此代码互斥以始终保持正确（如果调用 5000 次，它真的会变慢）.. 接听您的电话.. 一切由您决定..

# ios - 主/详细应用程序中的 NavigationItem

> ID：14004685
> 
> 赞同：6
> 
> 时间：2012-12-22T16:53:48.333
> 
> 标签：ios, uinavigationitem

我使用 XCode 的 Master/Detail 模板编写了一个 Master/Detail 应用程序。启动应用程序后，主视图导航按钮的标题为“Master”。现在我想重命名那个按钮，但不幸的是我不知道如何访问这个按钮。在 appdelegate.m 中有以下代码来初始化视图：

```
MasterViewController *masterViewController = [[MasterViewController alloc] init];
UINavigationController *masterNavigationController = [[UINavigationController alloc] initWithRootViewController:masterViewController];

DetailViewController *detailViewController = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:nil];
UINavigationController *detailNavigationController = [[UINavigationController alloc] initWithRootViewController:detailViewController] 
```

我尝试了这些方法但没有成功：

```
masterViewController.navigationItem.title = @"newTitle"; 
```

或者

```
masterNavigationController.navigationItem.title = @"newTitle"; 
```

我不确定，如果按钮的名称只是 idt 后面的视图的标题，我也尝试过：

masterViewController.title = @"newTitle";

没有任何效果。但是由于按钮的标题是“大师”，我肯定没有设置它，我相信一定有什么方法可以设置它。有谁知道该怎么做？

只是为了显示按钮： ![在此处输入图像描述](../Images/178c5fb26ed4e789a14a928ec4441a89.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-22T17:58:09.783

如果您已经使用 Master/Detail 模板创建了 Master/Detail 应用程序，请转到您的`"MasterViewController.m"`文件并根据需要更改字符串“Master”。请参阅下图，您的`MasterViewController.m`. ![在此处输入图像描述](../Images/f5fca2a45f6b82c4bdcbece656b687cb.png)

**更新：** 并更改`barButtonItem`名称，`DetailViewController.m`如下所示。这会成功的。 ![在此处输入图像描述](../Images/65876494eaab8b6f7183f76c0f4f15ba.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T16:57:33.393

`self.navigationItem.title = @"newTitle";`在 MasterViewController.m 文件的 viewDidLoad() 中尝试。或`self.title = @"newTitle"`在 init() 方法中。HTH。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T19:08:12.097

我假设您正在尝试更改后退按钮属性的标题。这是通过将以下代码放入`-viewDidLoad`.`MasterViewController`

```
self.navigationItem.backBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"newTitle" style:UIBarButtonItemStyleBordered target:nil action:nil]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-23T06:05:18.743

已经有一段时间了，不知何故，与当前的 Xcode 版本 8.3.2 不同的是：

如果您已经使用主/明细模板创建了主/明细应用程序，请转到您的并在其中`Main.storyboard`选择，然后显示“属性检查器”。在导航项区域中，您可以更改.`Master``Master Scene``Title`

您可以`Master`为 以及执行此操作`Detail`。 [![在此处输入图像描述](../Images/a966e821d5801473aa243e1d99337f80.png)](https://i.stack.imgur.com/ANBmx.png)

# mysql - MySQL 子查询与左连接中的 group by - 优化

> ID：14004693
> 
> 赞同：3
> 
> 时间：2012-12-22T16:54:42.467
> 
> 标签：mysql, optimization, group-by, subquery, left-join

MySQL 似乎无法使用 GROUP BY 子查询优化选择，并最终导致执行时间很长。对于这种常见场景，必须有已知的优化。

假设我们试图从数据库中返回所有订单，并带有一个标志，表明它是否是客户的第一个订单。

```
CREATE TABLE orders (order int, customer int, date date); 
```

检索客户的第一笔订单非常快。

```
SELECT customer, min(order) as first_order FROM orders GROUP BY customer; 
```

但是，一旦我们使用子查询将其与完整的订单集连接起来，它就会变得非常慢

```
SELECT order, first_order FROM orders LEFT JOIN ( 
  SELECT customer, min(order) as first_order FROM orders GROUP BY customer
) AS first_orders ON orders.order=first_orders.first_order; 
```

我希望我们缺少一个简单的技巧，否则它会快 1000 倍

```
CREATE TEMPORARY TABLE tmp_first_order AS 
  SELECT customer, min(order) as first_order FROM orders GROUP BY customer;
CREATE INDEX tmp_boost ON tmp_first_order (first_order)

SELECT order, first_order FROM orders LEFT JOIN tmp_first_order 
  ON orders.order=tmp_first_order.first_order; 
```

**编辑**：
受@ruakh 提出的选项 3 的启发，使用 and 确实有一个不那么难看的解决方法`INNER JOIN`，`UNION`它具有可接受的性能但不需要临时表。但是，它对我们的案例有点特殊，我想知道是否存在更通用的优化。

```
SELECT order, "YES" as first FROM orders INNER JOIN ( 
    SELECT min(order) as first_order FROM orders GROUP BY customer
  ) AS first_orders_1 ON orders.order=first_orders_1.first_order
UNION
SELECT order, "NO" as first FROM orders INNER JOIN ( 
    SELECT customer, min(order) as first_order FROM orders GROUP BY customer
  ) AS first_orders_2 ON first_orders_2.customer = orders.customer 
    AND orders.order > first_orders_2.first_order; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T17:22:29.350

以下是您可以尝试的几件事：

1.  从子查询的字段列表中删除`customer`，因为它没有做任何事情：

    ```
    SELECT order,
           first_order
      FROM orders
      LEFT
      JOIN ( SELECT MIN(order) AS first_order
               FROM orders
              GROUP
                 BY customer
           ) AS first_orders
        ON orders.order = first_orders.first_order
    ; 
    ```

2.  相反，添加`customer`到`ON`子句，所以它实际上为你做了一些事情：

    ```
    SELECT order,
           first_order
      FROM orders
      LEFT
      JOIN ( SELECT customer,
                    MIN(order) AS first_order
               FROM orders
              GROUP
                 BY customer
           ) AS first_orders
        ON orders.customer = first_orders.customer
       AND orders.order = first_orders.first_order
    ; 
    ```

3.  与以前相同，但使用 an`INNER JOIN`而不是 a `LEFT JOIN`，并将原始`ON`子句转换为`CASE`表达式：

    ```
    SELECT order,
           CASE WHEN first_order = order THEN first_order END AS first_order
      FROM orders
     INNER
      JOIN ( SELECT customer,
                    MIN(order) AS first_order
               FROM orders
              GROUP
                 BY customer
           ) AS first_orders
        ON orders.customer = first_orders.customer
    ; 
    ```

4.  用表达式中不相关的子查询替换整个`JOIN`方法：`IN``CASE`

    ```
    SELECT order,
           CASE WHEN order IN
                      ( SELECT MIN(order)
                          FROM orders
                         GROUP
                            BY customer
                      )
                THEN order
            END AS first_order
      FROM orders
    ; 
    ```

5.  `JOIN`用表达式中的相关`EXISTS`子查询替换整个方法`CASE`：

    ```
    SELECT order,
           CASE WHEN NOT EXISTS
                      ( SELECT 1
                          FROM orders AS o2
                         WHERE o2.customer = o1.customer
                           AND o2.order < o1.order
                      )
                THEN order
            END AS first_order
      FROM orders AS o1
    ; 
    ```

（很可能上面的一些实际上会表现*得更差*，但我认为它们都值得尝试。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T17:25:46.283

我希望在使用变量而不是 LEFT JOIN 时这会更快：

```
SELECT
  `order`,
  If(@previous_customer<>(@previous_customer:=`customer`),
    `order`,
    NULL
  ) AS first_order
FROM orders
JOIN ( SELECT @previous_customer := -1 ) x
ORDER BY customer, `order`; 
```

这就是我在[SQL Fiddle](http://sqlfiddle.com/#!2/a0f8a/21)上的示例返回的内容：

```
CUSTOMER    ORDER    FIRST_ORDER
1           1        1
1           2        (null)
1           3        (null)
2           4        4
2           5        (null)
3           6        6
4           7        7 
```

# .htaccess - .htaccess - 修复重复内容问题

> ID：14004695
> 
> 赞同：0
> 
> 时间：2012-12-22T16:54:56.323
> 
> 标签：.htaccess, mod-rewrite

当我使用 seoMOZ 运行页面爬网时，某些页面显示为重复内容。

例如：

```
/index.php 
```

和

```
/index.php/ 
```

正在作为两个单独的页面进行爬网。我将如何实现 mod-rewrite 以仅从 .php 文件中删除尾部斜杠？

还

```
mysite.com/dir/ 
```

和

```
mysite.com/dir/index.php 
```

被标记为重复内容。出于美学原因，我希望将所有“/dir/file.php”链接重定向到“/dir/”，但我不确定如何执行此操作，或者从 SEO 的角度来看这是否是最好的选择.

感谢您的帮助和建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T17:18:35.867

几个想法：

将 rel="canonical" 链接添加到每个 HTML 页面的非规范版本部分。

取自[http://support.google.com/webmasters/bin/answer.py?hl=en&answer=139394](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=139394)

这意味着您只能将一个页面设置为要索引的“原始”或“权威”页面，而不是包含相同内容的页面。例如，这对于按标签显示帖子的页面非常有用。

还

你可以做一个重定向。破解打开您的 htaccess 并使用查询字符串重定向所有查询。

```
RewriteCond %{QUERY_STRING} .
RewriteRule (.*) $1? 
```

然而，有很多方法可以处理这个问题。

# r - 循环脚本遍历当前目录中的所有子目录？

> ID：14004700
> 
> 赞同：0
> 
> 时间：2012-12-22T16:55:15.510
> 
> 标签：r, loops, for-loop, dataframe

我想这采用 for 循环的形式？我有大约 100 行代码可以读取 csv 并将其内容添加到数据框中，但我需要遍历当前工作目录中的所有子目录

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T16:58:15.067

你没有提供很多细节，但是

```
for (subdir in list.dirs(recursive=FALSE)) {
   ## do stuff ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T19:21:50.147

Ben 的解决方案可能接近发帖人的要求，但这可能更接近他想要的：

```
d = NULL
for (csv in dir(pattern = "\\.csv$",full.names=TRUE,recursive=TRUE)){
  d = rbind(d, read.table(csv))
} 
```

# c - extern 关键字的作用

> ID：14004701
> 
> 赞同：1
> 
> 时间：2012-12-22T16:55:19.863
> 
> 标签：c, gcc

我在一个文件中定义了一个变量，并使用 extern 关键字在另一个文件中声明了它。但我已经用不同的数据类型声明了它..

```
file1.c  
    char i;
    main()  
    {   
        foo();  
    } 
```

文件2.c

```
void foo()  
{  
    extern int i;  
    i = 130;  
    printf("%d", i);  
} 
```

在上面的程序中，内存分配给主函数中的 'i' 作为 char 数据类型。执行后的答案应该是否定的（-127）。但它会打印 130。无论在 foo() 函数中分配给“i”的值如何，都不仅会打印 130。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-22T17:04:53.077

*“我在一个文件中定义了一个变量，并使用 extern 关键字在另一个文件中声明了它”*。这不是真的。`char i`并且 in 与 in没有`main`任何关系。`int i``foo`

`char i`您在内部定义的变量`main`没有链接。`main`除了该函数之外，程序中的任何其他地方都不能通过名称引用它。在 C 中根本没有办法做到这一点。它是一个局部变量。

您`extern int i;`在里面的声明`foo`与`char i;`来自`main`. 它声明了一个完全不同的独立变量`i`。in 中的`extern int i`声明`foo`指的是`i`具有外部链接的变量，即*全局*变量`i`。您仍然需要在某个地方*定义*它`i`。这`i`必须在文件范围内定义（因为这是*定义*具有外部链接的变量的唯一方法）。如果您不定义它，您的程序将无法编译。

具有外部链接的实体和没有链接的实体生活在完全不同的世界中。他们对彼此一无所知，从不互动或相互干扰。

正如我上面所说，您在问题中发布的代码根本无法编译。链接器会告诉您，您忘记`int i`使用您在中声明的外部链接定义变量`foo`。然而，您的帖子表明代码编译成功。这只是意味着您发布的代码不准确或不完整。如果代码是准确的，那么您在代码的其他地方也定义了一个全局变量`int i`。这是您`foo`使用的全局变量，而`char i`in`main`绝对与任何事情无关。

* * *

你现在拥有的，在你编辑之后，又是一个无效的程序，尽管出于不同的原因。您在 中定义了一个全局变量`char i`，`file1.c`然后您尝试在 中链接到它`file2.c`。但是，`file2.c`您通过告诉编译器全局变量`i`具有 type来欺骗编译器`int`，而实际上它具有 type `char`。

这种程序的行为是未定义的。在声明具有外部链接的实体时使用不一致的类型是非法的。如果您`char`在一个翻译单元中声明了一个类型的全局变量，则不允许在其他翻译单元中声明与任何其他类型相同的全局变量。

一些编译器可能会捕捉到您的错误并拒绝编译程序。但大多数 C 编译器不会捕获此错误。相反，它将产生一个导致未定义行为的程序。这就是你的情况。`130`在您的情况下，未定义的行为恰好在您分配`130`给变量后通过打印来表现出来。为什么你突然觉得奇怪我不知道。为什么你期望它打印`-127`我也不知道。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T17:20:44.747

## 分析——代码有什么问题

在您的代码中：

### 文件1.c

```
int main(void)  
{  
    char i;   // Warning: unused variable
    foo();  
} 
```

### 文件2.c

```
void foo(void)  
{  
    extern int i;  
    i = 130;  
    printf("%d", i);  
} 
```

变量`i`in与 in 所引用的变量`main()`完全无关。变量in是严格本地的，不会传递给; 无法看到。`i``foo()``i``main()``main()``foo()``foo()``i`

在带有 GCC 4.7.1 的 Mac OS X 10.7.5 上，文件单独编译，但无法链接，因为没有 variable 的定义`i`。

如果我们将变量移到`i`之外`main()`，则程序链接：

### 文件2.h

```
extern void foo(void); 
```

### 文件1.c

```
#include <stdio.h>
#include "file2.h"

char i = 'A';

int main(void)
{
    printf("i = %d (%c)\n", i, i);
    foo();
    printf("i = %d (%c)\n", i, i);
    return(0);
} 
```

### 文件2.c

```
#include "file2.h"
#include <stdio.h>

void foo(void)
{
    extern int i;
    i = 130;
    printf("i = %d (%c)\n", i, i);
} 
```

这现在链接并运行，但它调用未定义的行为。链接器没有注意到`i`应该是`sizeof(int)`但是的大小`sizeof(char)`。但是，中的分配`foo()`超出了`i`分配的范围。它不会在该程序中造成明显的损坏，但这纯粹是运气。

当我在 little-endian 机器（Intel x86/64）上运行它时，输出为：

```
i = 65 (A)
i = 130 (?)
i = -126 (?) 
```

当我在大端机器 (SPARC) 上运行它时，我得到了不同的结果（这并不奇怪；行为未定义，因此任何结果都是有效的）：

```
i = 65 (A)
i = 130 (?)
i = 0 () 
```

4 字节整数的最高有效字节被写入 1 字节字符的唯一字节，因此第三行输出中的零。还要注意，幸运的是，该字符被分配了一个 4 字节的倍数的地址；这并不能保证，并且 an 的未对齐地址`int`会导致总线错误（尽管实验表明它不会在 SPARC 上发生，即使`i`强制使用奇数地址；我不确定发生了什么）。

## 合成——正确处理`extern`

处理这个问题的正确方法是避免`extern int i;`在任何源文件中编写外部变量声明；此类声明应仅出现在需要使用变量的任何地方使用的标头中。

### 文件2.h

```
extern char i;
extern void foo(void); 
```

有了该更改（并`extern int i;`删除了相应的更改），则输出是自洽的：

```
i = 65 (A)
i = -126 (?)
i = -126 (?) 
```

请注意标题在保持两者`file1.c`并`file2.c`相互一致方面的作用。它确保 in 中的定义与 in`file1.c`中的声明相匹配`file2.h`，并且 in 的使用`file2.h`确保`file2.c`在那里使用的声明也是正确的。另请参阅[什么是`extern`C 中的变量](https://stackoverflow.com/questions/1433204/what-are-extern-variables-in-c)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T16:59:14.550

foo 中的`extern`声明与该局部 char 变量完全没有关系。

据我所知，`extern`前面可以放一个变量声明。也许这有点令人困惑。这样做会告诉编译器您要在不同`.c`文件之间共享变量。但是，必须有一个`.c`文件，其中声明变量的`extern`前面没有。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T17:05:03.827

注意：您的示例无论如何都不起作用，因为`extern`对局部变量没有影响。

`extern`是一种告诉编译器您正在使用的某个变量在另一个目标文件中实现的方法，您承诺将在链接时链接。它常用于涉及全局变量的库头文件中，以告诉编译器该变量实际上是在库文件中实现的。

例如：file1.c：

```
int thing;
int bork(int val) {
  return thing += val
} 
```

文件2.c

```
extern int thing
int main() {
  thing + 2;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-22T17:05:51.477

`i`在一个文件中声明的情况下，`global variable`只有它具有外部链接。

链接器只查找将在链接时解析的符号`i`，但链接器不解析类型，所以我认为它`Undefined Behavior`是`i`不同类型的，并在一个文件中定义为全局变量，而 extern 声明在另一个文件中完成。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-22T17:04:34.073

在 file1.c 中，`i`全局定义（并隐式声明）。

```
char i;
main()  
{    
    foo();  
} 
```

file2.c extern 与变量一起使用`i`，它只是声明为未定义。

```
extern char i; 
void foo()  
{  
   printf("%d", i);  
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-12-22T17:06:35.057

你在向编译器撒谎关于`i`. 编译器按照您在 foo 中告诉它的内容运行，因此您将获得整数表示。不幸的是，它不会真正可靠地工作，因为您还写了三个字节超出您的`char i;`

如果在调用后添加`char j = 11;`然后`j`在 main 中打印`foo();`，您会注意到 j 不再是 11。

对编译器撒谎是个坏主意。你迟早会被发现的！

# regex - htaccess 规则不起作用

> ID：14004702
> 
> 赞同：1
> 
> 时间：2012-12-22T16:55:40.007
> 
> 标签：regex, .htaccess

这是我的原始链接

```
http://localhost/xx/xx/public_html/news.php?id=7 
```

我想把它改成

```
http://localhost/xx/xx/public_html/news-7-TitleOfNews.html 
```

这是我的 htaccess

```
Options -Indexes 
ErrorDocument 404 www.site.com/404.html
RewriteEngine On
RewriteRule ^news-([0-9]*)(?:-([0-9a-zA-Z*]))?(?:\.html)?$ news.php?id=$1 [L] 
```

但它不起作用（重定向到 404 页面）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T17:02:26.183

我想你正在寻找这个：

```
RewriteRule ^news-([0-9]*)(?:-[0-9a-zA-Z]*)?(?:\.html)?$ news.php?id=$1 [L] 
```

不同之处在于`*`量词应该在字符类表达式之外。并且将单个字符类包装到括号中是多余的。

# jquery - 将日期选择器分配给多个输入，并允许在每个输入中选择某些日期

> ID：14004703
> 
> 赞同：1
> 
> 时间：2012-12-22T16:55:48.367
> 
> 标签：jquery, jquery-ui-datepicker

我想将 jquery UI datepicker 附加到同一页面上的多个输入。然后我希望每个日期选择器都有某些可点击的日期。似乎有效，但我为所有日期选择器获得了相同的可选日期。

我的代码是这个

**html 2个字段的示例代码**

```
<input id="packid17" class="lollydate form_field_style" size="12" data-avdates17="12/01/2012,12/04/2012,12/08/2012,12/11/2012,12/15/2012,12/18/2012,12/22/2012,12/25/2012,12/29/2012,01/01/2013,01/05/2013,01/08/2013,01/12/2013,01/15/2013,01/19/2013,01/22/2013,01/26/2013,01/29/2013,02/02/2013,02/05/2013,02/09/2013,02/12/2013,02/16/2013,02/19/2013,02/23/2013,02/26/2013,03/02/2013,03/05/2013,03/09/2013,03/12/2013,03/16/2013,03/19/2013,03/23/2013,03/26/2013,03/30/2013,04/02/2013,04/03/2013,04/04/2013,04/06/2013,04/09/2013,04/10/2013,04/11/2013,04/13/2013,04/16/2013,04/17/2013,04/18/2013,04/20/2013,04/23/2013,04/24/2013,04/25/2013,04/27/2013,04/30/2013,05/01/2013,05/02/2013,05/04/2013,05/07/2013,05/08/2013,05/09/2013,05/11/2013,05/14/2013,05/15/2013,05/16/2013,05/18/2013,05/21/2013,05/22/2013,05/23/2013,05/25/2013,05/28/2013,05/29/2013,05/30/2013,06/01/2013,06/04/2013,06/05/2013,06/06/2013,06/08/2013,06/11/2013,06/12/2013,06/13/2013,06/15/2013,06/18/2013,06/19/2013,06/20/2013,06/22/2013,06/25/2013,06/26/2013,06/27/2013,06/29/2013,07/02/2013,07/03/2013,07/04/2013,07/06/2013,07/09/2013,07/10/2013,07/11/2013,07/13/2013,07/16/2013,07/17/2013,07/18/2013,07/20/2013,07/23/2013,07/24/2013,07/25/2013,07/27/2013,07/30/2013,07/31/2013,08/01/2013,08/03/2013,08/06/2013,08/07/2013,08/08/2013,08/10/2013,08/13/2013,08/14/2013,08/15/2013,08/17/2013,08/20/2013,08/21/2013,08/22/2013,08/24/2013,08/27/2013,08/28/2013,08/29/2013,08/31/2013,09/03/2013,09/04/2013,09/05/2013,09/07/2013,09/10/2013,09/11/2013,09/12/2013,09/14/2013,09/17/2013,09/18/2013,09/19/2013,09/21/2013,09/24/2013,09/25/2013,09/26/2013,09/28/2013,10/01/2013,10/02/2013,10/03/2013,10/05/2013,10/08/2013,10/09/2013,10/10/2013,10/12/2013,10/15/2013,10/16/2013,10/17/2013,10/19/2013,10/22/2013,10/23/2013,10/24/2013,10/26/2013,10/29/2013,10/30/2013,10/31/2013,11/02/2013,11/05/2013,11/09/2013,11/12/2013,11/16/2013,11/19/2013,11/23/2013,11/26/2013,11/30/2013" data-packid="17" type="text" name="date" value="">

<input id="packid23" class="lollydate form_field_style" size="12" data-avdates23="04/19/2013,04/22/2013,04/26/2013,04/29/2013,05/03/2013,05/06/2013,05/10/2013,05/13/2013,05/17/2013,05/20/2013,05/24/2013,05/27/2013,05/31/2013,06/03/2013,06/07/2013,06/10/2013,06/14/2013,06/17/2013,06/21/2013,06/24/2013,06/28/2013,07/01/2013,07/05/2013,07/08/2013,07/12/2013,07/15/2013,07/19/2013,07/22/2013,07/26/2013,07/29/2013,08/02/2013,08/05/2013,08/09/2013,08/12/2013,08/16/2013,08/19/2013,08/23/2013,08/26/2013,08/30/2013,09/02/2013,09/06/2013,09/09/2013,09/13/2013,09/16/2013,09/20/2013,09/23/2013,09/27/2013,09/30/2013,10/04/2013,10/07/2013,10/11/2013,10/14/2013,10/18/2013,10/21/2013,10/25/2013" data-packid="23" type="text" name="date" value=""> 
```

**我的 Jquery 代码是这样的**

```
(function(){
            var lollydate = $(".lollydate");

            lollydate.each(function(){
                $this = $(this);
                $this.datepicker({
                dateformat:'mm/dd/yy',
                showAnim : 'fold',
                changeMonth: true,
                changeYear: true,
                minDate:"-10d",
                maxDate: "+18M",
                beforeShowDay: function(d){
                    var dateid = lollydate.data('packid');
                    //console.log(dateid);
                     var datelist = lollydate.data('avdates'+dateid).split(",");
                    // normalize the date for searching in array
                    var dmy = "";
                    dmy += ("00" + d.getDate()).slice(-2) + "/";
                    dmy += ("00" + (d.getMonth() + 1)).slice(-2) + "/";
                    dmy += d.getFullYear();
                    if ($.inArray(dmy, datelist) >= 0) {
                        return [true, ""];
                    }
                    else {
                        return [false, ""];
                    }
                }
            });
            }); // end each

        })(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T17:02:14.733

我假设您的页面上有多个具有`lollydate`类名的元素。如果是这样，则您的`lollydate`变量的长度大于一。

在您的`each`循环中，您正在`beforeShowDay`使用 设置函数的变量`lollydate.data`，这并不精确。尝试将其更改为`$(this)`.

```
beforeShowDay: function(d){
    var dateid = $(this).data('packid');
    //console.log(dateid);
     var datelist = $(this).data('avdates'+dateid).split(",");
    // normalize the date for searching in array
    var dmy = "";
    dmy += ("00" + d.getDate()).slice(-2) + "/";
    dmy += ("00" + (d.getMonth() + 1)).slice(-2) + "/";
    dmy += d.getFullYear();
    if ($.inArray(dmy, datelist) >= 0) {
        return [true, ""];
    }
    else {
        return [false, ""];
    }
}​ 
```

**编辑**

```
$(function(){
    var lollydate = $(".lollydate");

    lollydate.each(function(){
        var $this = $(this);
        $this.datepicker({
            dateformat:'mm/dd/yy',
            showAnim : 'fold',
            changeMonth: true,
            changeYear: true,
            minDate:"-10d",
            maxDate: "+18M",
            beforeShowDay: function(d){
                var dateid = $this.attr('data-packid');
                //console.log(dateid);
                 var datelist = $this.attr('data-avdates').split(",");
                // normalize the date for searching in array
                var dmy = "";
                dmy += ("00" + d.getDate()).slice(-2) + "/";
                dmy += ("00" + (d.getMonth() + 1)).slice(-2) + "/";
                dmy += d.getFullYear();
                if ($.inArray(dmy, datelist) >= 0) {
                    return [true, ""];
                }
                else {
                    return [false, ""];
                }
            }
        });
    }); // end each
});​ 
```

在您的原始脚本中，您没有`$this`使用`var`，这导致`$this`始终是`each`循环中的最后一项。

您也不能使用`.data("packid")`，而是需要使用`.attr("data-packid")`.

此外，`$this`需要使用而不是`lollydate`.

一旦这些问题得到解决，脚本应该可以按预期工作。它甚至可能允许您删除该`data-packid`属性，因为它似乎不再被使用。

**编辑 2**

如果你想看看我在行动中做了什么，这里是一个[JSFiddle 。](http://jsfiddle.net/vYdjD/)

*笔记*

我不得不交换`data-avdates`属性中的月份和日期。不知道您的目标是哪种日期格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T17:30:15.267

我发现了问题所在。我在比较错误的值。

我的日期格式在 data-avdates 和 jquery 部分中不一样。所以我像这样转换了jquery部分并且它工作得很好

```
 var dmy = "";
    dmy += ("00" + (d.getMonth() + 1)).slice(-2) + "/";
    dmy += ("00" + d.getDate()).slice(-2) + "/";
    dmy += d.getFullYear(); 
```

谢谢大家的超级快速帮助:-)

# c - 在 C 中查找 malloc() 数组长度？

> ID：14004704
> 
> 赞同：23
> 
> 时间：2012-12-22T16:55:51.907
> 
> 标签：c, arrays, malloc

> **可能重复：**
> [如何找到 sizeof（指向数组的指针）](https://stackoverflow.com/questions/492384/how-to-find-the-sizeofa-pointer-pointing-to-an-array)

我正在学习如何在 C 中创建动态数组，但遇到了一个我无法弄清楚的问题。

如果我使用代码：

```
int num[10];
for (int i = 0; i < 10; i++) {
    num[i] = i;
}
printf("sizeof num = %li\n sizeof num[0] = %li", sizeof(num), sizeof(num[0])); 
```

我得到输出：

```
sizeof num = 40
sizeof num[0] = 4 
```

这是我期望发生的。但是，如果我 malloc 数组的大小，例如：

```
int *num;
num = malloc(10 * sizeof(int));
for (int i = 0; i < 10; i++) {
    num[i] = i;
}
printf("sizeof num = %li\n sizeof num[0] = %li", sizeof(num), sizeof(num[0])); 
```

然后我得到输出：

```
sizeof num = 8
sizeof num[0] = 4 
```

我很想知道为什么当我使用固定长度方法时数组的大小是 40，而当我使用`malloc()`.

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-22T16:57:58.297

第二种情况，`num`不是数组，是指针。`sizeof`给你指针的大小，在你的平台上似乎是 8 个字节。

无法知道动态分配的数组的大小，您必须将其保存在其他地方。`sizeof`看类型，但是不能以任何方式`int[5]`从 的结果中获取完整的数组类型（指定大小的数组类型，比如 type ） ，并且参数不能应用于不完整的类型，比如.`malloc``sizeof``int[]`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-22T16:58:22.410

数组不是指针（在某些情况下衰减到指针，而不是在这里）。

第一个是一个数组 - 所以`sizeof`给你数组的大小 = 40 字节。

第二个是指针（无论它指向多少个元素） -`sizeof`给你`sizeof(int*)`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-22T17:02:12.577

如果你想知道你分配的东西的大小，那么你需要自己“记住”这一点，因为你的代码做了分配。如果您的代码没有完成分配，那么[在标准意义上] 就无法找出指针指向的内存有多大。你只需要以其他方式“知道”。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-22T16:58:20.597

第二个大小指的是指针的大小，在你的机器上——可能是 64 位——是 8 个字节。

您不能使用它`sizeof()`来恢复动态分配结构的大小，但可以对静态分配的结构这样做。

# android - 片段特定 onResume

> ID：14004708
> 
> 赞同：0
> 
> 时间：2012-12-22T16:56:44.870
> 
> 标签：android, android-fragments, actionbarsherlock, android-viewpager

我在我的应用程序的新版本中使用 ActionBarSherlock 和 TabViewPager，并且我试图**仅**在某个选项卡处于活动状态时执行某些代码。首先，让我向您展示我是如何设置我的 TabHost 并向其中添加片段的。

```
 private void intialiseViewPager() {

    List<Fragment> fragments = new Vector<Fragment>();
    fragments.add(Fragment.instantiate(this, TabFragment1.class.getName()));
    fragments.add(Fragment.instantiate(this, TabFragment2.class.getName()));
    if (appVersionV3()) {
        fragments.add(Fragment.instantiate(this, TabFragment3.class.getName()));
    }

    this.mPagerAdapter  = new PagerAdapter(super.getSupportFragmentManager(), fragments);
    //
    this.mViewPager = (ViewPager)super.findViewById(R.id.viewpager);
    this.mViewPager.setAdapter(this.mPagerAdapter);
    this.mViewPager.setOnPageChangeListener(this);
}

/**
 * Initialise the Tab Host
 */
private void initialiseTabHost(Bundle args) {
    mTabHost = (TabHost)findViewById(android.R.id.tabhost);
    mTabHost.setup();
    TabInfo tabInfo = null;
    TabsViewPagerFragmentActivity.AddTab(this, this.mTabHost, this.mTabHost.newTabSpec("Tab1").setIndicator("Calculator"), ( tabInfo = new TabInfo("Calculator", TabFragment1.class, args)));
    this.mapTabInfo.put(tabInfo.tag, tabInfo);

    TabsViewPagerFragmentActivity.AddTab(this, this.mTabHost, this.mTabHost.newTabSpec("Tab2").setIndicator("Tracker"), ( tabInfo = new TabInfo("Tracker", TabFragment2.class, args)));
    this.mapTabInfo.put(tabInfo.tag, tabInfo);

    if (appVersionV3()) {
        TabsViewPagerFragmentActivity.AddTab(this, this.mTabHost, this.mTabHost.newTabSpec("Tab3").setIndicator("Food List"), ( tabInfo = new TabInfo("FoodList", TabFragment3.class, args)));
        this.mapTabInfo.put(tabInfo.tag, tabInfo);
    }

    // Default to first tab
    //this.onTabChanged("Tab1");
    //
    mTabHost.setOnTabChangedListener(this);

}

private static void AddTab(TabsViewPagerFragmentActivity activity, TabHost tabHost, TabHost.TabSpec tabSpec, TabInfo tabInfo) {
    // Attach a Tab view factory to the spec
    tabSpec.setContent(activity.new TabFactory(activity));
    tabHost.addTab(tabSpec);
} 
```

我的第一个想法是从 Activity onTabChanged 中调用一个片段的方法，但是什么不起作用。请参阅下面的尝试 - 它所做的只是强制关闭应用程序，如果需要，我可以获得此崩溃的日志。

```
 public void onTabChanged(String tag) {
    //TabInfo newTab = this.mapTabInfo.get(tag);
    int pos = this.mTabHost.getCurrentTab();
    mTabHost.getCurrentTabView().invalidate();

    this.mViewPager.setCurrentItem(pos);

    if (pos == 1) {
        TabFragment2 tabFragment = (TabFragment2) getSupportFragmentManager().findFragmentByTag("Tracker");

tabFragment.calculatePoints();
        }
    } 
```

* * *

似乎一旦主活动启动，片段的 onResume 就会被调用，因此我无法在其中调用片段特定的代码来检测更改。

我唯一的另一个想法是使用`onResumeFragments()`，但似乎没有为该类型定义`SherlockFragment`- 不确定这是否是 ActionBarSherlock 错误的错误，或者它应该是这样的。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T15:23:43.517

有人提到，因为我的片段在一个列表中，并且只是从列表中获取我需要的片段。我全局初始化了我的列表/向量，然后能够从列表中检索片段并在选项卡更改时根据需要调用其各自的函数，它就像一个魅力。

```
public void onTabChanged(String tag) {
    //TabInfo newTab = this.mapTabInfo.get(tag);
    int pos = this.mTabHost.getCurrentTab();
    mTabHost.getCurrentTabView().invalidate();
    this.mViewPager.setCurrentItem(pos);

    // calculatePoints on TabChange
    if (pos == 1) {
        TabFragment2 fragTrack = (TabFragment2) fragments.get(1);
        fragTrack.calculatePoints();
        fragTrack.createAndFillDatabase();
    }

    else if (pos ==2) {
        TabFragment3 fragFoodList = (TabFragment3) fragments.get(2);
        fragFoodList.createAndFillDatabase("none");
    }

    this.supportInvalidateOptionsMenu();
} 
```

# javascript - Javascript：如果存在一个类，我如何修改一个类的属性？

> ID：14004711
> 
> 赞同：0
> 
> 时间：2012-12-22T16:57:04.813
> 
> 标签：javascript, css, class

我试图让我的脚本只在一页上更改元素的样式。我认为这样做的最佳方法可能是检测并查看页面是否存在唯一的 id ( `profile-advanced-details`)，如果有，则将另一个 id ( `page-body`) 高度修改为 1500px。

我已经尝试过了，但它似乎不起作用......我的语法错误吗？还是有更好的方法来做到这一点？

```
var wrap = document.getElementById("page-body");

if (!document.getElementsById('profile-advanced-details').length){
  return;  //if profile-advanced-details doesn't exist, do nothing
}

else {
  wrap.style.height = "1500px";//if it does exist, change the height of page-body
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T17:03:16.570

`getElementById`是单数，不是复数。您也不需要`.length`，因为它的含义因节点而异。

```
if( document.getElementById('profile-advanced-details')) {
  document.getElementById('page-body').style.height = "1500px";
} 
```

您也可以使用 CSS，但前提是参考元素（“profile-advanced-details”）位于目标（“page-body”）之前。这可能不是这里的情况，但这是一个很好的技巧：

```
#profile-advanced-details + #page-body,
    #profile-advanced-details + * page-body {height:1500px}
/* the following may work in CSS4: */
!#page-body #profile-advanced-details,
    !#page_body + #profile-advanced-details,
    !#page_body + * #profile-advanced-details {height:1500px}
$#page-body #profile-advanced-details,
    $#page_body + #profile-advanced-details,
    $#page_body + * #profile-advanced-details {height:1500px}
#page-body! #profile-advanced-details,
    #page_body! + #profile-advanced-details,
    #page_body! + * #profile-advanced-details {height:1500px}
#page-body$ #profile-advanced-details,
    #page_body$ + #profile-advanced-details,
    #page_body$ + * #profile-advanced-details {height:1500px}
/* The different ones are partially because I don't remember the spec,
          but mostly because it's changing */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T17:03:34.607

你应该能够做到

```
var wrap = document.getElementById("page-body");

if (document.getElementById('profile-advanced-details')){
    // profile-advanced-details does exist
    wrap.style.height = "1500px";
} 
```

这是因为“profile-advanced-details”的 getElementById 将在不存在时返回 null，这意味着条件不会评估为 true，并且不会调用其中的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T17:04:30.703

由于元素 id 是唯一的，因此您应该为元素指定类名`'profile-advanced-details'`并使用它`document.getElementsByClassName`来检查是否存在

因此，使用您提供的代码将如下所示：

```
var wrap = document.getElementById("page-body");

if (document.getElementsByClassName('profile-advanced-details').length == 0){
  return;  //if profile-advanced-details doesn't exist, do nothing
}

else {
  wrap.style.height = "1500px";//if it does exist, change the height of page-body
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T17:07:04.100

你说上课，对吧？然后改变

```
 if (!document.getElementsById('profile-advanced-details').length) 
```

至

```
 if (!document.getElementByClass('profile-advanced-details').length) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-22T17:00:24.283

`id`s 是独一无二的。没有这样的方法`document.getElementsById()`。改为使用`document.getElementById()`，这将返回具有指定`id`或. 的元素`null`。

# ruby-on-rails - 为暂存和生产环境使用不同的 gemset 是个好主意吗？

> ID：14004712
> 
> 赞同：3
> 
> 时间：2012-12-22T16:57:29.513
> 
> 标签：ruby-on-rails, rvm, capistrano

我有想法将我的应用程序配置为使用不同的 gemset 进行登台和生产。我的想法是，通过将环境拆分为单独的 gemset，当/如果我需要更新 gems/ruby/rails 时，我将有更多的自由。我将能够做出这种改变，并在不影响生产应用程序/gemset 的情况下在暂存时测试整个事情。

为此，我将在服务器上有两个文件，一个位于每个环境的共享目录中，名为 rvmrc。这包含`rvm use ree-1.8.7-2012.02@appname-production --create`用于生产和`rvm use ree-1.8.7-2012.02@appname-staging --create`登台。

我会在部署脚本中包含一个任务，以将相应的`shared/rvmrc`文件链接到应用程序中`.rvmrc`：

```
namespace :deploy do
  task :rvmrc do
    run "rm #{latest_release}/.rvmrc; ln -s #{shared_path}/rvmrc #{latest_release}/.rvmrc"
  end
end

before "bundle:install", "deploy:rvmrc" 
```

这实际上是一个好主意，还是我把事情复杂化了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T07:34:33.653

理想情况下，您希望在开发时使用您在生产中使用的所有 gem。我只会拆分特定于特定环境而在另一个环境中不需要的宝石。在我的大多数应用程序中，我通常只有开发所需的特定 gem。如果您需要拆分宝石，您可以简单地将它们分组，例如：

```
group :development do 
  gem 'development gem'
end

group :production do
  gem 'production gem'
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T00:55:11.050

[上面， house9](https://stackoverflow.com/users/317989/house9)是正确的，他说：

> 我很确定'bundler/capistrano'会将所有gem安装到安装目录下的shared/bundle，如果在同一台机器上运行staging和production，你的安装目录需要不同，所以我认为你可以通过gem隔离默认？

`cd /path/to/staging; bundle list`您可以通过运行和在您的服务器上看到这一点`cd /path/to/production; bundle list`。如果您在每个环境中安装了不同的 gem，您将从每个命令中获得不同的列表。

正如[house9](https://stackoverflow.com/users/317989/house9)还提到的，您只需要确保`bundle exec`从登台或生产运行时所做的一切都使用：rake 任务、启动服务器等。

由于在使用 bundler/capistrano 时默认存在 gem 隔离，因此没有理由将您的环境放在单独的 gemset 中。

# algorithm - 对于某些给定任务，最好的任务调度算法是什么？

> ID：14004721
> 
> 赞同：1
> 
> 时间：2012-12-22T16:58:10.960
> 
> 标签：algorithm, scheduling

我们有*一个具有不同长度*、*多个 cpu 内核*和*上下文切换时间*的任务列表。我们希望在内核之间找到最佳的任务调度，以最大限度地提高处理器利用率。我们怎么能找到这个？如果我们从列表中选择最大的可用任务并将它们一一分配给当前准备好的核心，这不是最好的，还是您认为我们必须尝试所有命令才能找出哪个是最好的？

我必须补充一点，所有核心都在时间单元 0 准备就绪，并且任务应该同时工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T17:12:48.300

这里的想法是没有灵丹妙药，您必须考虑正在执行的任务类型，并尝试尽可能好地安排它们。

*   CPU 密集型任务不使用太多通信 (I/O)，因此需要持续执行，并且仅在必要时才中断——根据所使用的策略；

*   I/O 密集型任务可能会在执行过程中不断地搁置一边，让其他进程继续工作，因为它会`sleeping`持续很多时间，等待将数据检索到主内存；

*   交互任务必须连续执行，但不能不中断执行，因为它会产生中断，等待用户输入，但需要有高优先级，以免让用户注意到执行延迟。

考虑到这一点以及上下文切换成本，您必须评估您拥有的任务类型，从而为您的调度程序选择一个或多个策略。

**编辑**：

我认为这是一个简单的概念问题。考虑到您必须实施解决方案，您必须分析需求。

由于您有任务的长度和上下文切换时间，并且您必须保持核心繁忙，这成为一个优化问题，您必须在进程结束时保持最少数量的核心空闲，但是您需要保持最少的上下文切换次数，以便您的整体执行时间不会增长太多。

正如 svick 所指出的，这听起来像是一个分区问题，它是 NP 完全的，您需要将一个数字序列划分为给定数量的列表，以便每个列表的总和彼此相等。

在您的问题中，您可以放松目标，这样您就不再需要所有核心执行相同的时间，但您希望任何两个核心执行时间之间的差异尽可能小。

在 svick 提供的参考资料中，您可以看到一种动态编程方法，您可以将其映射到您的问题上。

# .htaccess - 如何防止打开特定链接，例如“？a = page”

> ID：14004723
> 
> 赞同：2
> 
> 时间：2012-12-22T16:58:15.377
> 
> 标签：.htaccess, smarty

我有一个使用“Smarty Engine”和“?a=link”链接方法的网站（我不知道这种链接方法叫什么）

我已经在 .htaccess 中使用了 RewriteEngine 来使用 .php 链接，例如 home.php 而不是 ?a=home

**但我怎样才能防止 ?a=home 打开？所以页面只能用 home.php 链接打开**

编辑：例如登录页面是**?a=login**，我已经使用这些行将其打开为**login.php**

```
RewriteEngine on
RewriteRule ^/*login.php$   ./?a=login [L] 
```

但我还需要**禁用 ?a=login**，因此用户只能使用“login.php”打开登录页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T17:39:43.760

根据您的示例，您所要做的就是这样：

```
RewriteEngine on
RewriteRule ^(.*)$   $1? [L] 
```

最后`?`删除任何查询

# php - PDO 登录验证

> ID：14004730
> 
> 赞同：0
> 
> 时间：2012-12-22T16:59:12.943
> 
> 标签：php, mysql, pdo, prepared-statement, bcrypt

**我正在尝试创建用户登录验证脚本。我有两页，其中一页叫做 checklogin.php，代码如下：**

```
<?php 
session_start();

$host="localhost"; // Host name
$username="root"; // Mysql username
$password="testdbpass"; // Mysql password
$db_name="test"; // Database name
$table = "users";

// Connect to server via PHP Data Object
$db = new PDO("mysql:host=localhost;dbname=test;", $username, $password);

$username = $_POST['username'];
$password = $_POST['password'];

if(isset($_POST['username']) && !empty($_POST['username']) 
AND
isset($_POST['password']) && !empty($_POST['password']))

$pass = crypt($password . $row['salt']);
$statement->bindParam(':username', $username);
$query = ("SELECT * FROM $table WHERE username = :username");
$statement = $db->prepare($query);
$output = 'Login Error';

if ($statement->execute() && $row = $statement->fetch())

{
    if ($row['password'] === $pass)

        {
        if ( $row['activated'] !== 0 ) {
        $output = 'Not activiated wait for Administrator Approval';
        $_SESSION['username'] = $username;
        }
        $output = 'Logged In';
        }
    }

    echo $output;

   $db = null;
   ?> 
```

**我有一个 register_script.php 页面，它是这个代码：**

```
<?php 

$host="localhost"; // Host name
$username="root"; // Mysql username
$password="testdbpass"; // Mysql password
$db_name="test"; // Database name

// Connect to server via PHP Data Object
$dbh = new PDO("mysql:host=localhost;dbname=test;", $username, $password);

CRYPT_BLOWFISH or die ('No Blowfish found.');

//This string tells crypt to use blowfish for 15 rounds.
$Blowfish_Pre = '$2y$15$';
$Blowfish_End = '$';

// Blowfish accepts these characters for salts.
$Allowed_Chars =
'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789./';
$Chars_Len = 63;

$Salt_Length = 45;
$salt = "";

for($x=0;$x<5000;$x++)
{
$salt .= $Allowed_Chars[mt_rand(0,$Chars_Len)];
}
$bcrypt_salt = $Blowfish_Pre . $salt . $Blowfish_End;

$password = $_POST['password'];

$hashed_password = crypt($password, $bcrypt_salt);

// Insert statements with PDO 

try {
$query = $dbh->prepare("INSERT INTO `users_blowfish` (username, email,   fname, lname,   salt, password) 
                           VALUES (:username, :email,   :first, :last, :salt, :hash)");

    $params = array(
                    'username' => $_POST['username'],
                    'email' => $_POST['email'], 
                    'first' => $_POST['fname'],
                    'last' => $_POST['lname'],
                    'salt' => $bcrypt_salt,
                    'hash' => $hashed_password);

        $query->execute($params);

}

catch (PDOException $e) {
    error_log($e->getMessage());
    die("An error occured, contact admin");
}

$dbh= null;

?>

 <html>
<body>
    <p> 
        Thank you for registering your account. Please wait for   administrator approval before doing anything else. Thank you - System Administrator. 
    </p>
</body>
</html> 
```

我尝试登录，但在我的 apache2 错误文件状态中收到错误日志：

**[2012 年 12 月 22 日星期六 11:47:36] [错误] [客户端桌面] PHP 解析错误：语法错误，第 23 行 /var/www/version2/checklogin.php 中的意外 T_VARIABLE，引用者：* *`http://localhost/version2/`****

我似乎无法确定这个问题。我已经参考了 php.net 关于如何使用 PDO 但无济于事。问题是由 checklogin.php 引起的，因为 register_script.php 工作正常（几天前测试过）。任何帮助都会很可爱，谢谢。

编辑1：

第 23 行闲置：`$statement->bindParam(':username', $username);`

编辑 2：可能导致问题的行：

```
`$pass = crypt($password . $row['salt']);
 $statement->bindParam(':username', $username);
 $query = ("SELECT * FROM $table WHERE username = :username");
 $statement = $db->prepare($query);
 $output = 'Login Error';` 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T17:17:36.150

您正在使用 $db->prepare() 两次，但您应该只使用一次，如下所示：

```
$query = "SELECT * FROM $table WHERE username = :username";
$statement = $db->prepare($query); 
```

并确保您没有忘记这种情况下的花括号：

```
if(isset($_POST['username']) && !empty($_POST['username']) 
AND
isset($_POST['password']) && !empty($_POST['password'])) 
```

# android - 带有 SlidingMenu 的片段中的 ViewPager

> ID：14004738
> 
> 赞同：1
> 
> 时间：2012-12-22T16:59:34.283
> 
> 标签：android, android-viewpager, fragment, android-sliding

我想知道一般方法是如何在 SlidingMenu 的帮助下在 Fragment 中显示 ViewPager： [https ://github.com/jfeinstein10/SlidingMenu](https://github.com/jfeinstein10/SlidingMenu)

有两个示例，第一个是具有工作菜单的 ResponsiveUI 示例（它更改了鸟类的图片），但是，我不知道如何成功地将其更改为显示不同的 ViewPager。

另一个示例是 ViewPager 示例。它创建了一个 ViewPager 来在颜色之间滑动，但是，这并没有一个有效的滑动菜单。

甚至有可能这样做吗？

我试图简单地用 ViewPagerFragment 替换内容

```
mContent = new ViewPagerFragment(); 
    getSupportFragmentManager()
    .beginTransaction()
    .replace(R.id.content_frame, mContent)
    .commit(); 
```

但我收到以下错误：

```
java.lang.IllegalStateException: Recursive entry to executePendingTransactions 
```

在此处完成 logcat：http: [//pastebin.com/aD2BSAja](http://pastebin.com/aD2BSAja)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T20:43:33.873

```
public class MainActivity extends SlidingFragmentActivity {

    ViewPager mViewPager;
    FragmentPagerAdapter mPagerAdapter;
    protected ListFragment mFrag;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.view_pager_and_titles);

        // set the Behind View
        setBehindContentView(R.layout.menu_frame);
        FragmentTransaction t = this.getSupportFragmentManager()
                .beginTransaction();
        mFrag = new SampleListFragment();
        t.replace(R.id.menu_frame, mFrag);
        t.commit();

        // customize the SlidingMenu
        SlidingMenu sm = getSlidingMenu();
        sm.setShadowWidthRes(R.dimen.shadow_width);
        sm.setShadowDrawable(R.drawable.shadow);
        sm.setBehindOffsetRes(R.dimen.actionbar_home_width);
        setSlidingActionBarEnabled(true);

                //ViewPager adapter
        mPagerAdapter = new FragmentPagerAdapter(getSupportFragmentManager());
        final ActionBar mActionBar = getSupportActionBar();
        mActionBar.setDisplayHomeAsUpEnabled(true);

        mViewPager = (ViewPager) findViewById(R.id.pager);
        mViewPager.setAdapter(mPagerAdapter);

    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case android.R.id.home:
            toggle();
            return true;
        }
        return super.onOptionsItemSelected(item);
    }

} 
```

# ruby-on-rails - 如何配置 Capistrano 以将不同的 gemset 用于暂存和生产环境？

> ID：14004740
> 
> 赞同：1
> 
> 时间：2012-12-22T17:00:15.220
> 
> 标签：ruby-on-rails, rvm, capistrano, bundler

我在服务器上有两个文件，一个在每个环境的共享目录中，名为 rvmrc。这包含`rvm use ree-1.8.7-2012.02@appname-production --create`用于生产和`rvm use ree-1.8.7-2012.02@appname-staging --create`登台。这应该允许应用程序在其自己的 gemset 下运行，因为我已经在部署脚本中构建了一个任务，以将相应的`shared/rvmrc`文件链接到应用程序中`.rvmrc`。在我的`deploy.rb`示例中，该任务显示在下面。

不过，我仍然需要让 bundler 在部署期间使用正确的 gemset。我想我可以通过使用`set :rvm_ruby_string, "ree-1.8.7-2012.02@appname-#{rails_env}"`动态设置`rvm_ruby_string`环境的 gemset 来做到这一点。但是，我发现我的部署仅使用生产 gemset - 即使在使用`cap staging deploy`.

有关我的思考过程的更多信息，请参阅[这个问题](https://stackoverflow.com/questions/14004712/is-it-a-good-idea-to-use-a-different-gemset-for-staging-and-production-environme)，甚至尝试这样做（如果您认为这只是一个坏主意，请加入）。

我需要更改什么才能让我的部署使用基于环境的正确 gemset？

在我的部署文件中，我拥有的相关行（我已经剥离了很多）是：

```
require 'rvm/capistrano'
require 'capistrano/ext/multistage'
require 'bundler/capistrano'

set :stages, %w(staging production)
set :default_stage, "staging"
set :rvm_ruby_string, "ree-1.8.7-2012.02@appname-#{rails_env}"
set :rvm_type, :system
set :bundle_without,  [:development]

namespace :deploy do
  task :rvmrc do
    run "rm #{latest_release}/.rvmrc; ln -s #{shared_path}/rvmrc #{latest_release}/.rvmrc"
  end
end

before "bundle:install", "deploy:rvmrc" 
```

在我的 production.rb 文件中，我拥有的相关行（我已经删除了很多）是：

```
set :branch, "master"
set :rails_env, "production" 
```

在我的 staging.rb 文件中，我拥有的相关行（我已经删除了很多）是：

```
set :branch, "staging"
set :rails_env, "staging" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T08:48:07.063

您可以在启动应用程序时设置 ruby​​ 版本和 gemset。即使用[rvm 包装器](https://rvm.io/integration/god/)，因为它在链接中描述为与上帝一起使用。这种方式不需要 .rvmrc 符号链接杂耍。

即，如果您使用的是 Unicorn，请创建一个包装器：

```
rvm use ree-1.8.7-2012.02@appname-production
rvm wrapper ree-1.8.7-2012.02@appname-production ree187prod unicorn 
```

这给了你 ~.rvm/bin/ree187prod_unicorn。在您的启动脚本中使用它而不是独角兽。Unicorn 然后将使用正确的 ruby​​ 版本和 gemset。

# javascript - 如何给 Ember Data 模型一个 TTL 并在它过期后重新加载它？

> ID：14004743
> 
> 赞同：3
> 
> 时间：2012-12-22T17:00:28.730
> 
> 标签：javascript, ember.js, ember-data

如果应用程序应该在多个用户操作相同数据的较长时间内使用，则可能会发生一个用户在其本地缓存中的内容不再存在的情况。

例如，用户可能会查看带有评论的帖子，这些评论作为嵌套数据加载到帖子下。这意味着他一开始只会做一个请求`GET /posts/1`，但在那之后，帖子总是会从缓存中加载。

但是如果另一个用户发表评论，他永远不会发现，除非他重新加载整个页面，这将重置身份映射。

**有什么方法可以让数据在一段时间后过期，例如每 5 分钟强制它重新加载一次？或者有没有我应该考虑解决这个问题的替代方法？**

***编辑：到目前为止，实际上没有任何方法可以做到这一点。我创建了一个[拉取请求](https://github.com/emberjs/data/issues/545)并继续处理它，并在完成后将结果作为答案发布在这里。***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T15:00:43.700

使用`setInterval`（[文档](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)）重新加载它。也许您可以在路由器中进行设置。进入路由器后，设置每 5 分钟重新加载一次模型的时间间隔（可能仅当它处于某种状态时）。退出路线时，清除间隔。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T08:33:58.090

使用 websockets 将是一个更好的解决方案。不幸的是，目前还没有用于 Ember-data 的 websockets 适配器。

# database - 数据库访问 excel 格式或 if 语句或分组

> ID：14004744
> 
> 赞同：2
> 
> 时间：2012-12-22T17:00:50.960
> 
> 标签：database, excel, if-statement, concatenation, ms-access-2010

我有一个数据库格式问题，我试图根据列“A”行连接列“B”行。像这样：

[https://docs.google.com/spreadsheet/ccc?key=0Am8J-Fv99YModE5Va3hLSFdnU0RibmQwNVFNelJCWHc](https://docs.google.com/spreadsheet/ccc?key=0Am8J-Fv99YModE5Va3hLSFdnU0RibmQwNVFNelJCWHc)

抱歉我不能发图片。我还没有足够的声望点。我最终会得到它们

所以我想在 Excel 或 Access 中解决这个问题。它目前是一个访问数据库，但我可以轻松地将其导出到 Excel。如您所见，我想在 A 列中找到“userid”，并且在有多个 A 列的地方，例如“shawn”，我想组合 shawn 的多个实例并像这样连接属性 num。

即使仍然有 A 列的多个实例，我也可以稍后过滤表的所有唯一实例。我关心的是如何将 B 列与“|”连接起来 如果 A 列有多个实例，则在中间。

这只是我数据的一部分（还有很多），所以我非常感谢您的帮助。

到目前为止，我脑海中的伪代码是：

If( Column A 有多个实例) Then Concatenate(Column B with "#"+ "|" +"#")

我也想知道是否有办法通过分组访问来做到这一点。

无论如何，请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T17:38:00.000

我相信您可以使用 SQL GROUP BY 函数解决这个问题。至少，这是我在 MySQL 或类似工具中的做法：

```
SELECT userid, GROUP_CONCAT(propertynum SEPARATOR '|') FROM Names GROUP BY userid 
```

如此堆栈溢出帖子中所述：[如何使用 GROUP BY 在 MySQL 中连接字符串？](https://stackoverflow.com/questions/149772/how-to-use-group-by-to-concatenate-strings-in-mysql)

这是一个关于如何在 MS Access 中使用 SQL 的链接：[http ://www.igetit.net/newsletters/Y03_10/SQLInAccess.aspx](http://www.igetit.net/newsletters/Y03_10/SQLInAccess.aspx)

不幸的是，MSAccess 中没有 GROUP_CONCAT 函数，但另一篇 SO 帖子解释了一些方法：[ms-access 中有 group_concat 函数吗？](https://stackoverflow.com/questions/2852892/is-there-a-group-concat-function-in-ms-access)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T17:53:57.753

在excel中，我们可以通过vba模块中的自定义函数轻松实现。希望使用 vba(Macros) 对您来说不是问题。

这是可以在 vba 中添加的函数的代码。（按 Alt+F11，这将带您进入可视化编辑器，右键单击项目并添加一个模块。在模块中添加以下代码）

```
Public Function ConcatenatePipe(ByVal lst As Range, ByVal values As Range, ByVal name As Range) As String
ConcatenatePipe = ""
Dim i As Integer

For i = 1 To lst.Count
    If name.Value = lst.Item(i).Value Then ConcatenatePipe = ConcatenatePipe & "|" & values.Item(i).Value
Next
ConcatenatePipe = Mid(ConcatenatePipe, 2)
End Function 
```

您可以在示例的 F 列中的 excel 中使用此功能。在 F2 中复制以下公式，然后将单元格复制粘贴到 F 列的其余部分。`=ConcatenatePipe($A$2:$A$20,$B$2:$B$20,E2)`

# opengl - OpenGL多VBO

> ID：14004746
> 
> 赞同：0
> 
> 时间：2012-12-22T17:01:18.660
> 
> 标签：opengl

如果我有两种根据用户输入动态绘制的不同图元类型，我应该使用 2 个单独的 VBO，还是有办法使用一个并以某种方式识别不同图元顶点的开始和结束位置？

原始类型是三角形带和点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T17:03:10.737

# sql-server-2005 - 使用 (c#)ado.net 在数据库中插入 checkboxlist 值

> ID：14004748
> 
> 赞同：-1
> 
> 时间：2012-12-22T17:01:29.400
> 
> 标签：sql-server-2005, ado.net

我想知道如何在 sql server 数据库中插入 checkboxlist 值实际上我在 asp.net 中知道如何在数据库中插入 checkboxlist 值但我没有进入 c#.net

```
foreach (ListBox lb in checkedListBox1.Items)
{
    if (lb.SelectedItem)
    {
        str += lb.ValueMember + ",";
    }
} 
```

我只是尝试上面的代码，但它给了我错误，而不是 listitem 我使用列表框

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T10:41:54.653

ListBox 和 CheckedListBox 是两个不同的控件。然后，您必须使用 ado.net 创建与数据库的连接，然后使用插入的 SqlCommand。为了能够帮助您，您需要更准确地解释它。

# matlab - Matlab中的正态分布计算？

> ID：14004755
> 
> 赞同：-2
> 
> 时间：2012-12-22T17:02:28.647
> 
> 标签：matlab, normal-distribution

我尝试计算正常的 pdf，但是因为我从协方差矩阵行列式中得到 0，所以我的所有计算都搞砸了。我该如何处理这个问题> 正态分布还有其他近似方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T20:17:24.883

由于您没有提供任何合理的信息，您的问题到底是什么，我将尝试以两种方式回答您的问题。

* * *

### 您有一些数据点并想估计它们的分布参数

假设您的数据在向量`Y`中，您可以这样做

```
mu = mean(Y);
sigma = std(Y); 
```

如果我们谈论的是多元正态分布，则必须替换`std`为`cov`并获得协方差矩阵。如果你有`std(Y) == 0`你总是记录相同的值。在这种情况下，估计分布是微不足道的 - 只需采用记录值的概率为 1 的分布。在多变量情况下，矩阵的对角线上不应有零 - 否则，您在此变量中再次具有相同的值。

* * *

### 您有一些分布参数并想计算相应的分布函数：

在这种情况下，您只需调用内置的 MATLAB 函数`normpdf`，如

```
normpdf(X,mu,sigma) 
```

其中`X`是要在 和 处评估函数的点向量`mu`，`sigma`是均值和标准差的分布参数。但是请注意，它`sigma`必须大于零（否则分布会非常退化）

对于多变量情况，您可以使用

```
mvnpdf(X,MU,SIGMA) 
```

其中 sigma 是协方差矩阵。

所有这些函数都可以在 MATLAB 文档中找到。

如果我的回答对您没有帮助，您当然应该修改您的问题。

# bash - 在 bash 脚本中读取函数中的标准输入

> ID：14004756
> 
> 赞同：60
> 
> 时间：2012-12-22T17:02:28.820
> 
> 标签：bash, shell, pipe, bash-function

我有一些输出一些信息的 bash 函数：

*   **在 epson-ppds 中查找模型名称**
*   **在三星 ppds 中查找型号名称**
*   **在 hp-ppds 中查找模型名称**
*   ETC ...

我一直在编写读取输出并对其进行过滤的函数：

```
function filter-epson {
    find-modelname-in-epson-ppds | sed <bla-blah-blah>
}

function filter-hp {
    find-modelname-in-hp-ppds | sed <the same bla-blah-blah>
}
etc ... 
```

但我认为这样做会更好：

```
function filter-general {
    (somehow get input) | sed <bla-blah-blah>
} 
```

然后调用另一个高级函数：

```
function high-level-func {
    # outputs filtered information
    find-modelname-in-hp/epson/...-ppds | filter-general 
} 
```

如何通过最佳 bash 实践实现这一目标？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2014-01-06T18:02:16.140

如果问题是`How do I pass stdin to a bash function?`，那么答案是：

Shellscript 函数以普通方式采用标准输入，就好像它们是命令或程序一样。:)

输入.txt：

```
HELLO WORLD
HELLO BOB
NO MATCH 
```

测试.sh：

```
#!/bin/sh

myfunction() {
    grep HELLO
}

cat input.txt | myfunction 
```

输出：

```
hobbes@metalbaby:~/scratch$ ./test.sh 
 HELLO WORLD 
 HELLO BOB 
```

请注意，命令行参数也以普通方式处理，如下所示：

测试2.sh：

```
#!/bin/sh

myfunction() {
    grep "$1"
}

cat input.txt | myfunction BOB 
```

输出：

```
hobbes@metalbaby:~/scratch/$ ./test2.sh 
 HELLO BOB 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-12-23T07:51:32.050

为了痛苦地明确表示我正在从标准输入管道传输，我有时会写

```
cat - | ... 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2019-10-18T14:27:11.043

将stdin 放入变量的一种**非常简单**`read`的方法是使用. 默认情况下，它读取文件描述符“0”，即标准输入，即`/dev/stdin`.

示例功能：

```
input(){ local in; read in; echo you said $in; } 
```

示例实现：

```
echo "Hello World" | input 
```

结果：

> 你说你好世界

### 附加信息

当然，您不需要将变量声明为本地变量。我只是为了形式好而将其包括在内。普通旧`read in`的可以满足您的需要。

所以你了解它是如何`read`工作的，默认情况下它会从给定的文件描述符（或隐式标准输入）中读取数据并**阻塞**，直到遇到换行符。很多时候，您会发现它会隐含地附加到您的输入中，即使您没有意识到这一点。如果您有一个似乎与此机制挂钩的功能，请记住这个细节（还有其他使用方法`read`来处理......）。

## 更强大的解决方案

除了基本示例之外，还有一个变体，可让您通过标准输入或参数传递输入：

```
input()
{ 
    local in=$1 if [ -z "$in" ]; then read in; fi
    echo you said $in
} 
```

通过该调整，您还可以调用如下函数：

```
input "Hello World" 
```

如何处理标准输入选项和**其他参数**？许多标准 nix 实用程序，尤其是那些通常与 stdin/stdout 一起使用的实用程序，都遵循将破折号`-`视为“默认”的常见做法，这在上下文中表示标准输入或标准输出，因此您可以遵循约定，并将指定的参数视为`-`意思是“标准输入”：

```
input()
{ 
    local a=$1; if [ "$a" == "-" ]; then read a; fi
    local b=$2
    echo you said $a $b
} 
```

像这样称呼它：

```
input "Hello" "World" 
```

或者

```
echo "Hello" | input - "World" 
```

更进一步，实际上没有理由仅将 stdin 限制为仅用于*第一个*参数的选项！您可以创建一个超级灵活的功能，可以将它用于其中任何一个......

```
input()
{ 
    local a=$1; if [ "$a" == "-" ]; then read a; fi
    local b=$2; if [ "$b" == "-" ]; then read b; fi
    echo you said $a $b
} 
```

你为什么要那个？因为您可以制定并输入您可能需要的任何论点...

```
myFunc | input "Hello" - 
```

在这种情况下，我在第二个参数中使用管道的结果`myFunc`而不是唯一的第一个选项。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-12-22T17:08:24.847

直接打电话`sed`。就是这样。

```
function filter-general {
    sed <bla-blah-blah>
} 
```

# xml - WinRT信息：禁止DTD

> ID：14004764
> 
> 赞同：1
> 
> 时间：2012-12-22T17:03:13.387
> 
> 标签：xml, windows-8, rss, windows-runtime

我正在尝试使用以下代码检索 RSS 提要：

```
feed = await client.RetrieveFeedAsync(feedUri); 
```

但是，它正在产生上述异常。我环顾四周，尽管其中一个 MS 示例项目似乎有相同的错误，但它似乎相对没有记录。有人可以指出正确的方向，或者解释这个错误的含义吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-10-25T14:40:02.000

**实际上，请检查源的响应。**例如，如果是 Tumblr，您实际上可能会获得 HTML 同意页面而不是 RSS 数据。

我必须让用户先填写该表格，然后登录，然后尝试 RSS 检索……这为我解决了问题。

# exception - 系统调用和陷阱之间的区别

> ID：14004766
> 
> 赞同：3
> 
> 时间：2012-12-22T17:03:22.430
> 
> 标签：exception, exception-handling, mips, system-calls, mips32

我想知道 MIPS 系统调用和陷阱指令之间是否有任何区别。我找不到任何涉及这个的东西，所以我不确定是否有区别。陷阱似乎只是一个有条件的系统调用，但一些澄清可能会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T17:15:16.070

和指令都触发异常`SYSCALL`，`TRAP`但产生的异常类型不同（SystemCall 与 Trap），操作系统可能会以不同方式处理它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T18:07:41.363

A`Trap`是通过调用内核子例程（任何[系统调用）](http://en.wikipedia.org/wiki/System_call)切换到内核模式的异常。通常陷阱创建任何类型的控制转移到操作系统。哪里`SYSCALL`是同步和计划的用户进程到内核模式。

# java - 在静态块 Eclipse-java 中断言

> ID：14004773
> 
> 赞同：1
> 
> 时间：2012-12-22T17:04:32.843
> 
> 标签：java, eclipse, exception, runtime-error, assert

我在学习assert，所以写了如下代码

```
public class AssertionDemo
{
    static
    {
        int i=7;
        assert i>10:i;
    }
 public static void main(String args[])
 {
     int i=8;
     assert (i<10):8;
     assert (i>10):9;
 }
} 
```

在控制台输出之前，我得到以下对话框

![在此处输入图像描述](../Images/4f5a1f5b4aeda69584e7f4d338fb80f8.png)

**输出：**

```
Exception in thread "main" java.lang.AssertionError: 7
at logicBuliding.AssertionDemo.<clinit>(AssertionDemo.java:8) 
```

对话框是怎么回事？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T17:08:15.747

`main`我怀疑这不是专门关于断言的——它只是在启动应用程序时甚至无法访问该方法。在大多数情况下，这将表明一个非常严重的错误，并且启动器代码可能没有太多信息可以轻松掌握它到底走了多远。显示一个对话框可能比依赖已经连接的控制台更安全（鉴于我们肯定处于糟糕的情况）。

这是一个稍微简单的程序，其行为方式相同：

```
public class Test {
    static {
        if (true) {
            throw new RuntimeException("Bang!");
        }
    }

    public static void main(String[] args) {
    }    
} 
```

您不需要 Eclipse 来演示这一点 - 只需使用`javaw`就会产生相同的效果，[如文档](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/java.html)所述。`java`对我来说，从命令行运行只是显示异常：

```
c:\Users\Jon\Test>java Test
Exception in thread "main" java.lang.ExceptionInInitializerError
Caused by: java.lang.RuntimeException: Bang!
        at Test.<clinit>(Test.java:4) 
```

# java - 在数据库路径中嵌入 SPACE 的 Derby

> ID：14004776
> 
> 赞同：1
> 
> 时间：2012-12-22T17:04:48.303
> 
> 标签：java, derby

我使用嵌入在桌面应用程序中的 derby。但是当数据库路径（在任何级别的目录中）中有**空格时，derby 驱动程序无法连接到数据库。**

问候， ：）

更新

```
public static final String connectionUrl = "jdbc:derby:[path]database;user=app;password=pass;";
String path = Utils.getPathOfJar();
String dbPath = connectionUrl.replace("[path]", path);
dbConnection = DriverManager.getConnection(dbPath); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T13:23:34.347

**首先这个问题只发生在Linux中。**

数据库的路径应在系统属性中设置，如下所示：

**德比系统主页**

像这样：

```
String path = Utils.getPathOfJar();    
path = path.jarFilePath.replaceAll("%20", "\\ ");
System.setProperty("derby.system.home", path);

public static final String connectionUrl = "jdbc:derby:database;user=app;password=pass;";
dbConnection = DriverManager.getConnection(connectionUrl); 
```

# xcode - 如何在xcode中模拟iphone4S？

> ID：14004778
> 
> 赞同：0
> 
> 时间：2012-12-22T17:04:57.023
> 
> 标签：xcode

我发现我的应用程序仅在 iPhone 4s 上存在问题。在 xcode 中，在硬件下，我看不到 iPhone4s，但只有`3.5 and 4.5 inch iphones`. 如何在 xcode 中测试特定设备的应用程序？我不知何故找不到答案。（我的设备是 iPhone4 ）

非常感谢 。

# javascript - Box2dWeb 自定义形状交互

> ID：14004779
> 
> 赞同：0
> 
> 时间：2012-12-22T17:05:01.080
> 
> 标签：javascript, box2d, box2dweb

我有一个带有自定义形状主体的 Box2DWeb 模拟，但它根本不与其他主体交互。调试图显示检测到碰撞但没有效果。阅读有关自定义形状的信息，我没有找到任何设置来启用碰撞，我不知道出了什么问题。自定义形状体是这样创建的，我也在[此处](http://www.lelloman.altervista.org/rota.html)发布了示例：

```
bodyDef = new b2BodyDef;
bodyDef.type = b2Body.b2_dynamicBody;
bodyDef.position.x = canvas.width/30/2;
bodyDef.position.y = 2;
body = world.CreateBody(bodyDef);
v = [[2,0],
[2,2],
[0,2],
[0,3],
[2,3],
[2,5],
[3,5],
[3,3],
[5,3],
[5,2],
[3,2],
[3,0]];
vecs = [];
for(i=0;i<v.length;i++){
cc = new b2Vec2();
cc.Set(v[i][0],v[i][1]);
vecs[i] = cc;
}
fixDef.shape = new b2PolygonShape;
fixDef.shape.SetAsArray(vecs,vecs.length);
body.CreateFixture(fixDef); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T22:35:00.760

Box2D 只知道如何处理凸多边形，因此您必须从多个夹具制作十字形以考虑凹面部分。例如，您可以有两个在中间相互交叉的长矩形。

# python - 执行工人特定的代码

> ID：14004781
> 
> 赞同：3
> 
> 时间：2012-12-22T17:05:10.863
> 
> 标签：python, celery

我有以下项目：[https ://github.com/gonvaled/celery-test](https://github.com/gonvaled/celery-test)

我想要一些仅在工作人员中执行的代码，但我不知道该怎么做。

这是正在运行的工人：

```
pegasus $ celery worker --app=proj
This should only be executed in the worker

 -------------- celery@pegasus v3.0.9 (Chiastic Slide)
---- **** ----- 
--- * ***  * -- [Configuration]
-- * - **** --- . broker:      amqp://guest@localhost:5672//
- ** ---------- . app:         tasks:0x98d188c
- ** ---------- . concurrency: 2 (processes)
- ** ---------- . events:      OFF (enable -E to monitor this worker)
- ** ---------- 
- *** --- * --- [Queues]
-- ******* ---- . celery:      exchange:celery(direct) binding:celery
--- ***** ----- 

[2012-12-22 17:50:31,868: WARNING/MainProcess] celery@pegasus has started. 
```

这是正在运行的客户端：

```
$ python client.py 
This should only be executed in the worker
8 
```

客户端不应打印`This should only be executed in the worker`。显然，我需要以某种方式保护那部分代码，但我不知道如何。如何确保某些代码仅在工作人员中运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:38:25.127

我的解决方案基于模块（全局数据）中的全局变量，我在导入客户端时以及*在*导入任何工作代码之前`gd.py`对其进行实例化。

 *这是我的客户代码：

```
import gd
gd.CLIENT_ACTIVE = True
# import worker here
.... 
```

在我的工人中，我这样做：

```
import gd
if not getattr(gd, 'CLIENT_ACTIVE', None)
    # worker specific code here 
```*

# android - 无法从 db 获取 ColumnIndex

> ID：14004783
> 
> 赞同：0
> 
> 时间：2012-12-22T17:05:12.920
> 
> 标签：android, database

我只是无法获得我的数据库列的索引，而其他列索引工作正常。该列是图像（item4）和我得到-1的索引

```
CursorDb.moveToFirst();
            if (CursorDb.getCount()>0)
                do
                { 
                    int i=CursorDb.getColumnIndex(item2);//ok
                    int t=CursorDb.getColumnIndex(item3);//ok
                    int z=CursorDb.getColumnIndex(item4);//not ok
                    byte b[]=CursorDb.getBlob(4); 
```

我的创建代码和插入工作正常。创建是

```
private static final String DATABASE_CREATE =
        "create table if not exists  titles (_id integer primary key autoincrement, "
                + "link text not null UNIQUE, RssTitle text not null,Rtl text not null,image BLOB);"; 
```

感谢帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T17:07:28.307

如果`getColumnIndex()`返回 -1，则表示该列不在您的查询中。仔细检查您的 SELECT 语句并添加`item4`.

```
"SELECT " + item2 + ", " + item3 + ", " + item4 + ", FROM " + TABLE_NAME.... 
```

还`Cursor#moveToFirst()`返回 true 或 false，具体取决于 Cursor 是否为空。您不需要同时使用`moveToFirst()`and `getCount()`：

```
if(CursorDb.moveToFirst())
    do 
    { 
```

# objective-c - 加载错误的xib文件

> ID：14004785
> 
> 赞同：0
> 
> 时间：2012-12-22T17:05:15.627
> 
> 标签：objective-c, xcode, xib, nscollectionview, nscollectionviewitem

也许我很愚蠢，但我花了整个下午试图弄清楚这一点。我是一名 Objective C 新手，但在其他语言方面有丰富的经验。

我有两个`NSCollectionView`-在一个菜单内`*eventsView`。`*projectsView`每个都有自己`itemPrototype`的两个子类，`NSCollectionViewItem`它们都有自己的 .xib 文件。

问题是它始终是第一个加载的 .xib 文件 - 对于两者`NSCollectionViewItem`。所以`projectsView`不会加载它自己的 .xib 但它会加载`eventsView`一个。有趣的是，如果我删除了那个 .xib，两者都会加载第二个 .xib，而之前没有人加载过。

我已经用完了在 Google 上搜索的关键字，所以我来了。

代码（虽然我不知道这很重要）是：

```
NSMenuItem *events = [[NSMenuItem alloc] init];
self.eventsView = [[NSCollectionView alloc] initWithFrame:NSZeroRect];
HeadquartersEventsViewItem *eventsPrototype = [[HeadquartersEventsViewItem alloc] init];
[self.eventsView setItemPrototype:eventsPrototype];
[events setView:self.eventsView];
[self.menu addItem:events];

[self fetchEvents];

[self.menu addItem:[NSMenuItem separatorItem]];

NSMenuItem *projects = [[NSMenuItem alloc] init];
self.projectsView = [[NSCollectionView alloc] initWithFrame:NSZeroRect];
HeadquartersProjectsViewItem *projectsPrototype = [[HeadquartersProjectsViewItem alloc] init];
[self.projectsView setItemPrototype:projectsPrototype];
[projects setView:self.projectsView];
[self.menu addItem:projects];

[self fetchProjects]; 
```

问题在哪里？为什么 Xcode 不区分这两个 .xib？

# php - 如何在jquery函数中使用keyup获取不同的id值

> ID：14004786
> 
> 赞同：1
> 
> 时间：2012-12-22T17:05:36.257
> 
> 标签：php, html, jquery

```
$(document).keyup(function(e){
         var idd = $(".hidd").val();// Here i can't get the correct value of "class hidd" and always get value 1

         var sss = ".comment_tarea" + idd;
          $tArea = $(sss);
          alert(sss);
        if ($tArea.is(":focus") && e.keyCode == 13) {
        var t = $tArea.val();  
    }  
     }); 
        $id1=0;
     while(...){
                $id1++;
        <form >
          <?  $t =$id1; $comment_tarea = "comment_tarea".$t; 
              echo("comment");
              echo($comment_tarea);
          ?>
        <textarea class="<? echo $comment_tarea; ?>" name="tarea"></textarea>
    <input type="hidden" class="hidd" value="<?php  echo htmlspecialchars($id1); ?>" />
        </form> 
```

}

在 Jquery 函数中，所有 textarea 类“hidd”的变量 idd 中始终存在值 1，这意味着 $comment_tarea 的所有类，例如“comment_trea1”、“comment_trea2”、“comment_trea3”、“comment_trea4”…… ……等等。这里的 textarea 输入值由唯一的 $id1 更改。如何获得正确的 idd 值意味着为“comment_trea1”获取 idd=1，为“comment_trea2”获取 idd=2，为“comment_trea3”获取 idd=3，等等...请帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T17:09:00.533

.val() 仅返回第一个匹配元素的值。

您需要做的是在每个匹配的元素上调用 .val() ：

```
$(".hidd").each(function() {
  alert($(this).val());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T17:08:52.697

您正在使用`val()`选择器，它将始终返回零索引处的元素值。要获取`one`索引处元素的值（如果存在），您可以使用`$(".hidd").eq(1).val();`

您最好将其`keyup`与文本区域绑定，而不是与文档绑定。当您在循环中生成表单时，每次循环迭代都会生成带有隐藏字段的文本区域。您可以使用表单textarea`relate`隐藏字段。`enclosing`

```
$("textarea[name=tarea]").keyup(function(e){
     var idd = $(this).closest('form').find('.hidd').val();
      //your code
} 
```

# pdf-generation - gnuplot：无法识别的终端选项

> ID：14004797
> 
> 赞同：20
> 
> 时间：2012-12-22T17:07:41.907
> 
> 标签：pdf-generation, gnuplot

谁能告诉我为什么我得到“无法识别的终端选项”

> 设置输出“out.pdf”

我需要为 gnuplot 4.4 安装任何软件包吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-22T19:50:25.433

你设置终端了吗？命令

```
print GPVAL_TERMINALS 
```

在 gnuplot 中将列出所有可用的终端；如果 pdfcairo 在列表中，你应该很高兴。一般来说，在设置输出之前，您需要设置终端，例如

```
set terminal pdf
set output 'out.pdf' 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-07-14T10:31:03.693

好吧，我有同样的问题。我使用`home-brew`.

a）首先检查哪些选项可用`gnuplot`

```
brew options gnuplot 
```

这将产生类似的东西：

```
--with-aquaterm
    Build with AquaTerm support
--with-cairo
    Build the Cairo based terminals
--with-libcerf
    Build with libcerf support
--with-pdflib-lite
    Build with pdflib-lite support
--with-qt@5.7
    Build with qt@5.7 support
--with-test
    Verify the build with make check
--with-wxmac
    Build wxmac support. Need with-cairo to build wxt terminal
--with-x11
    Build with x11 support
--without-gd
    Build without gd based terminals
--without-lua
    Build without the lua/TikZ terminal
--HEAD
    Install HEAD version 
```

b) 卸载 gnuplot

```
brew uninstall gnuplot 
```

c) 使用选项 cairo 重新安装

```
brew install gnuplot --with-cairo 
```

就是这样。之后，只需设置终端并提供输出文件。它对我有用。

```
set term pdf
set output 'myFile.pdf' 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-08-31T13:29:07.777

另一种方法是使用管道 gnuplot 功能。例如`ps2pdf`：

```
set term postscript eps enhanced color 
set output '|ps2pdf - outputfile.pdf' 
```

或`gs`直接使用：

```
set output '|gs -sDEVICE=pdfwrite -sOutputFile=outputfile.pdf -dBATCH -dNOPAUSE  -f -' 
```

其中符号`-`表示管道输入文件

# sql - array_append 如果元素不存在

> ID：14004801
> 
> 赞同：4
> 
> 时间：2012-12-22T17:08:23.943
> 
> 标签：sql, arrays, postgresql

> **可能重复：**
> [将 MySQL SET 数据类型转换为 Postgres](https://stackoverflow.com/questions/8424283/convert-mysql-set-data-type-to-postgres)

我有postgresql 8.4。

我正在尝试建立一个查询但没有成功。如果相关行中不存在元素，我想将元素插入到数组中。

表“测试”：

```
+------------------+------------------+
| id               | varchar(20)      |
| timestp          | timestamp        |
| place            | varchar(20)      |
| myarray[][]      | varchar[14][254] |
+------------------+------------------+

+---------+---------------------+-----------+----------------+
|  xyz    | 2010-01-01 10:10:10 | nowhere   |  "{abc,qwert}" |
+---------+---------------------+-----------+----------------+ 
```

所以我想将“{fgh,gfdsa}”添加到 myarray WHERE (id='xyz' AND timestp="2010-01-01 10:10:10" AND place='nowhere')**如果它还没有在数组**

我试过这样的>

```
UPDATE test
SET myarray = array_append(wascon2,'{fgh,gfdsa}') 
WHERE (id='xyz' AND timestp="2010-01-01 10:10:10" AND place='nowhere'
AND NOT EXISTS 1 FROM test WHERE (myarray='{fgh,gfdsa}'))); 
```

这不起作用，每次我调用它时它都会附加数组。

```
+---+---------------------------+-------------------------------------------+
|xyz|2010-01-01 10:10:10|nowhere|{"{abc,qwert}","{fgh,gfdsa}","{fgh,gfdsa}"}|
+---+---------------------------+-------------------------------------------+ 
```

如果认为我应该使用 >

```
myarray = ANY ('{fgh,gfds}'::varchar[]) 
```

不知何故，但我不知道如何..

对我来说最好的方法是一个 plpgsql 函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T18:30:17.177

```
UPDATE test
    SET myarray = myarray || array['fgh','gfdsa']::varchar[][]
    WHERE
        id = 'xyz'
        AND timestp = '2010-01-01 10:10:10'
        AND place = 'nowhere'
        AND not(myarray @> array['fgh','gfdsa']::varchar[][])
    ; 
```

# django - Django-Haystack elasticsearch 预取错误

> ID：14004803
> 
> 赞同：2
> 
> 时间：2012-12-22T17:08:30.620
> 
> 标签：django, elasticsearch, django-haystack

我是 haystack 和 elasticsearch 的新手，对于一个可能很蹩脚的问题，我很抱歉

尝试 ./manage.py rebuild_index 时，出现错误：

```
TypeError: request() got an unexpected keyword argument 'prefetch' 
```

所有依赖项都按照手册中的说明进行安装，为当前版本的 django-haystack (2.0.0-beta) 正确配置。该项目存在于 mac os x lion、python 2.7.1、django 1.4、elasticsearch 0.20.1、JVM：20.12-b

我到处搜索，但找不到有关此错误的任何信息。请帮忙

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T22:33:31.403

最新版本的 requests 库与 pyelasticsearch 编写的库不向后兼容。您可以将请求库降级为与您安装的 pyelasticsearch 一起使用的库，也可以从 github 上的源安装 pyelasticsearch。

[https://github.com/rhec/pyelasticsearch](https://github.com/rhec/pyelasticsearch)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T08:57:19.763

我在使用 pyelasticsearch 0.2 版时遇到了这个错误。当我升级到 0.3 时，错误消失了。所以我认为最新版本适用于最新版本的请求。

# unit-testing - Python 的 UnitTest 是否有测试观察器类型接口？

> ID：14004811
> 
> 赞同：0
> 
> 时间：2012-12-22T17:09:30.077
> 
> 标签：unit-testing, python-2.7

我来自一个`JUnit`背景。过去，我使用`TestWatcher`Java 中的规则和接口实现了在测试失败时捕获屏幕截图。Python中有类似的东西吗？

[http://kentbeck.github.com/junit/javadoc/4.10/org/junit/rules/TestWatcher.html](http://kentbeck.github.com/junit/javadoc/4.10/org/junit/rules/TestWatcher.html)

```
public static class WatchmanTest {
    private static String watchedLog;

    @Rule
    public MethodRule watchman= new TestWatcher() {
            @Override
            protected void failed(Description d) {
                    watchedLog+= d + "\n";
            }

            @Override
            protected void succeeded(Description d) {
                    watchedLog+= d + " " + "success!\n";
            }
    };

    @Test
    public void fails() {
            fail();
    }

    @Test
    public void succeeds() {
    }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T10:25:31.170

通过覆盖我的 BaseTest 类中的 TestCase.run() 方法，我找到了一种解决方法。

我从这个帖子中得到了线索，该帖子谈到了通过覆盖 run 方法来改变运行特性：

[PyUnit：第一次失败测试后停止？](https://stackoverflow.com/questions/685424/pyunit-stop-after-first-failing-test)

# javascript - 如何使用Javascript更改表单中按钮的值

> ID：14004812
> 
> 赞同：0
> 
> 时间：2012-12-22T17:09:45.883
> 
> 标签：javascript, forms

我有这样的表格：

```
<form action="#contact-form" method="post" class="th_contact-form" id="id-59907491">

<div class="form_line">
        <label for="widget-2-your-email" class="th-field-label email" style="display:none;">Your Email<span>(required)</span></label>
        <input type="text" name="widget-2-your-email" id="widget-2-your-email" placeholder="Your Email" class="email">
</div>
<div class="th_contact-submit">
        <input type="submit" value="submit" class="th_button">
</div> 
```

我想将**value="submit"**更改为 value **="click here"**

我如何使用 javascript 做到这一点？我没有更改表单代码的自由，因为它是通过 wordpress 中的主题自动生成的，并且他们没有更改按钮文本的选项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T17:13:30.133

最快的方式：`document.querySelector("#id-59907491 [type=submit]").value = "click here";`

最稳定的方式：

```
var frm = document.getElementById('id-59907491'),
    inp = frm.getElementsByTagName('input'),
    l = inp.length, i;
for(i=0;i<l;i++) {
    if( inp[i].type == "submit") {
        inp[i].value = "click here";
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T17:12:43.173

假设类只有一个按钮`th_button`：

```
window.onload = function () {

    var button = document.getElementsByClassName( 'th_button' )[0];
    button.value = "Click Here";

}; 
```

# android - Android中的XML解析不会破坏元素

> ID：14004814
> 
> 赞同：-1
> 
> 时间：2012-12-22T17:09:59.513
> 
> 标签：android, xml, parsing

我有以下 XML，我需要在 Android 应用程序中解析它。我已经构建了一个运行良好的解析器，但是对于像这样的 XML 格式[http://dl.dropbox.com/u/6751304/Nicosia.xml](http://dl.dropbox.com/u/6751304/Nicosia.xml)

现在我必须解析这样的东西[http://www.cytanet.com.cy/Services/connectivity/basic/wireless/GoogleMaps/wifimarkers.xml](http://www.cytanet.com.cy/Services/connectivity/basic/wireless/GoogleMaps/wifimarkers.xml)

我以前使用的解析器不显示任何结果。我得到一个空白的 loooooong 列表，所以我猜它读取了标记标签。我也知道 xml 已被解析，因为我可以在 logcat 中记录它，但未读取元素

有人可以识别第二个 XML 文件的格式并指向有关如何解析它的教程/信息吗？

（如果需要，我可以发布当前代码）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T17:32:58.497

由于您的 xml 文件较大，因此使用 sax 解析器更好。对于从 sax 解析器使用，您应该使用 DeafaultHandler 并且在其 startElement 方法中您应该编写以下相同的内容：

```
public void startElement(String arg0, String localName, String arg2,
        Attributes attributes) throws SAXException {
    currentElement = true;

if (localName.equals("marker")) {

        String lat = attributes.getValue("lat");

        String  lng = attributes.getValue("lng");

        String city= attributes.getValue("city");

      //and ...

    }
}

   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T17:34:56.450

我通常使用 SAX 解析器，但您正在寻找不同的属性和不同的标签。

看起来这篇文章应该让你开始（涵盖萨克斯解析） [http://xjaphx.wordpress.com/2011/10/09/android-xml-adventure-parsing-data-with-saxparser/](http://xjaphx.wordpress.com/2011/10/09/android-xml-adventure-parsing-data-with-saxparser/)

基本上在您的 StartElement 中，您将获取属性 atts.getValue(MyAttribute.ID)

拥有两者的一个原因是这样的：并添加到这个.. 拥有两者的一个原因是解析这样的东西：你想给一个元素一个描述它的属性。

```
<Contact>
    <Name>John Smith</Name>
    <PhoneNumber primary="true">
          <Number>214-555-1235</Number>
          <Type>Work</Type>
    </PhoneNumber>
    <PhoneNumber>
          <Number>214-555-1111</Number>
          <Type>Home</Type>
    </PhoneNumber>
</Contact> 
```

# c# - C# 中的引用类型比较

> ID：14004817
> 
> 赞同：0
> 
> 时间：2012-12-22T17:10:27.410
> 
> 标签：c#, .net, oop, class, reference-type

我试图理解以下问题。我想知道为什么`B == A`并且`C == B`在以下程序中是错误的。

```
using System;

namespace Mk
{
    public class Class1
    {
        public int i = 10;
    }
    class Program
    {
        static void Main(string[] args)
        {
            Class1 A = new Class1();
            Class1 B = new Class1();
            Class1 C = A;

            Console.WriteLine(B == A);
            Console.WriteLine(C == B);
        }
    }
} 
```

**输出：**

> 假
> 假

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T17:13:49.117

A 和 B 是不同的对象。它们属于同一类，但不是同一实例。就像两个人都可以是人，但他们不是同一个人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T17:26:15.770

在 .NET 中，类是*引用类型*。引用类型有两件事。***Object***和***对 object 的引用***。

在您的情况下，`A`是对 的引用`ObjectA`，`B`是对 的引用`ObjectB`。

当你定义`Class1 C = A;`

> *   首先，你创建了两个东西。一个名为**ObjectC**的对象和一个对名为**C**的对象的引用。
> *   然后你将参考复制`A`到参考`C`。现在，**A 和 C 是对同一个对象的引用**。

与引用对象一起使用`==`时，如果它们引用相同的对象，则返回`true`，否则返回`false`。

在您的情况下，这就是为什么`B == A`并且`C == B`返回`false`，但是如果您尝试使用`A == C`，它会返回`true`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T17:15:00.627

您正在比较两个类实例的引用。由于 A 和 B 位于不同的内存位置，因此它们的引用不相等。如果要测试类相等性，则需要覆盖该`Equals()`方法。 [http://msdn.microsoft.com/en-us/library/bsc2ak47.aspx](http://msdn.microsoft.com/en-us/library/bsc2ak47.aspx)

在您的示例中，如果您要进行测试`A == C`，您会看到它返回`true`，因为它们都指向内存中的相同位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T17:12:11.520

当您尝试比较参考时，输出是正确的。这里 A 和 B 是不同的对象，因此它们在比较时会导致错误。A、B 都位于不同的内存位置，因此它们的引用不相等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-22T17:13:06.157

引用类型将地址保存在内存中。在您的情况下，A 和 B 完全指向不同的地址。但是，由于您将 A 分配给 C，因此 C 指向的地址与 A 相同。

# java - FileWriter不写入文件java

> ID：14004818
> 
> 赞同：-2
> 
> 时间：2012-12-22T17:10:34.293
> 
> 标签：java, file-io

我正在使用 FileWriter 写入 java 中的文件，但它的行为很奇怪。

```
try
{
    newFile = new File(typeOfData);
    if (!newFile.exists())
    {
        newFile.createNewFile();
        writer = new FileWriter(newFile);

        for (Map<String, Double> tfidf : tfidfs)
        {
            Set<String> keys = tfidf.keySet();
            Iterator<String> iterator = keys.iterator();

            //int i = 1;
            while(iterator.hasNext())
            {
                String featureValue = iterator.next() + ":" + tfidf.get(iterator.next()) + " ";
                //System.out.print(featureValue);
                writer.write(featureValue);

                //i++;
            }
            writer.write("\n");
            //System.out.println();
            writer.flush();
        }
        //writer.flush();
        writer.close();
    }
} 
```

在 while 循环中，如果，而不是`iterator.next()`，我使用变量`int i = 1`，`i++`它写得很好，包含所有值和所有内容。但是当我使用它编写的代码时，它只会创建一个空白文件，其中没有任何内容。我不明白为什么会这样。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T17:12:01.863

```
String featureValue = iterator.next() + ":" + tfidf.get(iterator.next()) + " "; 
```

你刚刚打`next()`了两次电话，从`Set`. 您的结果`String featureValue`将包含第一个键和第二个键的值。

```
String key = iterator.next();
String featureValue = key + ":" + tfidf.get(key) + " "; 
```

**编辑添加：**然后猜测为什么你目前没有输出......你有奇数个键，最后，当第二个没有键时`next()`，它抛出异常（我'我猜你忽略了），你没有刷新到文件，你没有得到任何输出。如果你有偶数个键......它实际上会“工作”，你只会有一个文件，其中包含你期望的一半的行；）

# entity-framework - 值不能为空。参数名称：source”Entity Framework Code First

> ID：14004819
> 
> 赞同：1
> 
> 时间：2012-12-22T17:10:58.787
> 
> 标签：entity-framework, code-first

嗨，我正在尝试将 EF 与代码优先工作流一起用于现有数据库，但出现错误：

{“值不能为空。参数名称：源”}

使用以下行时：

```
 Dim ctx = New MVCTest1
    Dim t = ctx.Companies.ToList() 
```

我的 POCO 课程包括以下内容：

我有一个名为 MVCTest1 的标准 conn 字符串，它指向 SQL Server。我认为 EF 正在使用它，因为我可以在 dbContext 的连接字符串中看到它。conn 字符串是否需要采用特殊格式。我还注意到 onmodelcreated 没有被调用。我不确定这是否相关。对此非常新，所以我怀疑这很明显干杯，克里斯

```
Imports System.Data.Entity

Public Class Company
    Public CompanyID As Integer
    Public CompanyName As String
    Public Overridable Property Contacts As ICollection(Of Contact)
End Class

Public Class Contact
    Public ContactID As Integer
    Public FirstName As String
    Public LastName As String
    Public Overridable Property Company As Company
End Class

Public Class MVCTest1
    Inherits DbContext

    Public Contacts As DbSet(Of Contact)
    Public Companies As DbSet(Of Company)

    Protected Overrides Sub OnModelCreating(ByVal modelBuilder As System.Data.Entity.DbModelBuilder)

---Not being called

  End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T19:21:12.767

问题是`Contacts`and `Companies`in`MVCTest1`是公共成员变量而不是属性。因此，当您寻址它们时，它们不会被初始化。

# javascript - 不要在点击时删除课程

> ID：14004820
> 
> 赞同：1
> 
> 时间：2012-12-22T17:11:12.910
> 
> 标签：javascript, jquery

我有以下 jQuery 代码，它补充了 CSS 创建的导航栏。`active`目前，当按下单独的导航按钮时，代码会删除该类。

我希望代码不删除`active`该类并允许一次激活多个按钮。如何实现？

```
$(function(){
  $(".uibutton").click(function(e){
    e.preventDefault();
    $(".uibutton").addClass("active").not(this).removeClass("active");
  });
});​ 
```

**jsFiddle 上的完整代码：http:** [//jsfiddle.net/KhyK7/](http://jsfiddle.net/KhyK7/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T17:13:05.283

您可以将该[`toggleClass`](http://api.jquery.com/toggleClass/)功能与删除一起使用`removeClass("active")`：

**[演示](http://jsfiddle.net/KhyK7/1/)**

**旁注：**如果您使用的是 jQuery UI，您还可以考虑[复选框按钮](http://jqueryui.com/button/#checkbox)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T17:17:29.143

你可以像这样修改你的代码

```
$(function(){
  $(".uibutton").click(function(e){
    e.preventDefault();
    var button = $(this);

    button.toggleClass("active");
  });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T17:18:18.570

这样做： -

```
$(function(){
  $(".uibutton").click(function(e){
    $(this).addClass("active");
  });
});​ 
```

根据 UI，您想要的是错误的。

参考**[现场演示](http://jsfiddle.net/SivaCharan/KhyK7/4/)**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-22T17:31:32.977

您可以定位单击的事件项并添加类，简单...

```
$(function(){
  $(".uibutton").click(function(e){
    e.preventDefault();
    $(e.target).addClass("active");
  });
});​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-22T17:22:11.533

```
$(function(){
    $(".uibutton").click(function(e){
        e.preventDefault();
        if ($(this).hasClass('active')) {
            $(this).removeClass("active");
        } else {
            $(this).addClass('active');
        }
    });
});​ 
```

# extjs - Sencha Touch 2 无法读取 undefined (amfphp2) 的属性

> ID：14004822
> 
> 赞同：0
> 
> 时间：2012-12-22T17:11:21.637
> 
> 标签：extjs, touch, amfphp

我想创建一个包含商店和模型的嵌套列表。我的商店在不同的文件中，我的 model.js 也是如此。

当心我正在使用 amfPHP => 2 ！

当我将我的商店“eventStore”称为“商店：App.stores.eventStore”时，我收到以下错误：

**未捕获的类型错误：无法读取未定义的属性“eventStore”**

我的商店的代码是这样的：

```
App.stores.eventStore = new Ext.data.TreeStore({
    model: 'Events',
    proxy: {
        type: 'ajax',
        params: JSON.stringify(
            {serviceName: 'EventService',
            methodName: 'getEvents'}),
        url: 'http://localhost/amfphp/Amfphp/?contentType=application/json',
        reader: {
            type: 'tree',
            root: 'items'
        }
    }
}); 
```

知道我的错误是什么吗？

（EventService.php运行正常，在amfphp的网关浏览器中测试）

提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T10:27:50.503

您尝试分配对象 App.Stores 的值，但未定义。也许那是你的命名空间？然后定义它：

```
Ext.ns("App.stores"); 
```

# php - 没有 PHP5-MySQLi/PDO 的 Linux 灯？

> ID：14004823
> 
> 赞同：0
> 
> 时间：2012-12-22T17:11:23.847
> 
> 标签：php, linux

我最近用这个 php 安装参数安装了一个 LAMP 服务器：

`php5-sybase`, `php5-mysql`, `php`,`php-libabachemod`等等。我的安装中没有 MySQLI 或 PDO 类？我怎样才能做到这一点？我已经在安装时检查了 php.net，这对我来说毫无意义。我想知道是否有人可以澄清？

我试过 `sudo apt-get install php5-mysqli php5-pdo`但这不起作用

跑步：

```
 if (function_exists('PDO')) {
    echo "functions are available.<br />\n";
} else {
    echo "functions are not available.<br />\n";
} 
```

返回函数不可用

如果我跑也一样`if (function_exists('mysqli'))`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T17:32:27.733

就您的安装而言，不`PDO`使用 PECL 将无法正常工作，因为 PDO 现在位于**`php5-sqlite`**

and`MySQLi`是 and 的核心**`php5-mysqlnd`**包**`php5-mysql`**

如果您已经尝试过

```
pecl install PDO

pecl install PDO_MYSQL 
```

那么您将收到一个错误，并且需要清除您的安装包才能与 PDO/MySQLi 一起运行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T17:14:36.087

在位于的 php.ini 文件中`/etc/php5/apache2/php.ini`添加以下行：

```
extension=pdo.so
extension=pdo_mysql.so 
```

然后重启：

```
sudo invoke-rc.d apache2 restart 
```

# python - nodelay() 导致 python curses 程序退出

> ID：14004835
> 
> 赞同：7
> 
> 时间：2012-12-22T17:13:04.503
> 
> 标签：python, ncurses, curses

我用python写了一个curses程序。它运行良好。但是，当我使用 时`nodelay()`，程序在终端启动后立即退出，根本没有显示任何内容（只是一个新提示）。

**编辑**

此代码将重现该错误：

```
sc = curses.initscr()

sc.nodelay(1) # 但是去掉这行可以让程序正常运行

对于范围内的愤怒（20）：
        sc.addstr（愤怒，1，“嗨”）

```

这是我的完整代码

```
导入诅咒，时间，系统，随机

定义油漆（x，y，i）：
        #...
定义字符串（s，y）：
        #...

定义饲料（）：
        #...

sc = curses.initscr()
curses.start_color()
curses.curs_set(0)
sc.nodelay(1) ########################################

 # vars + 颜色初始化

对于范围内的愤怒（20）：
        尝试：
                dir = chr(sc.getch())

                sc.clear()

                喂养（）

                #很多ifs

                body.append([x, y])
                body.pop(0)

                对于身体点：
                        油漆（*点，我=2）

                sc.move(height-1, 1)
                sc.refresh()
                时间.睡眠（等待）

        例外为 e：
                打印 sys.exc_info()[0], e

sc.getch()
诅咒.beep()

诅咒.endwin()

```

为什么会发生这种情况，如何`nodelay()`安全使用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-22T22:13:16.743

我已经重写了您的缩小演示以使基本功能正常工作。它有一个非阻塞的 getch()。如果在调用 getch() 时按住 Q 键，则程序结束，否则循环继续。

```
import curses, time

def main(sc):
    sc.nodelay(1)

    for angry in range(20):
        sc.addstr(angry, 1, "hi")
        sc.refresh()

        if sc.getch() == ord('q'):
            break

        time.sleep(1)

if __name__=='__main__':
    curses.wrapper(main) 
```

我所做的最重要的更改是使用[curses.wrapper](http://docs.python.org/2/library/curses.html#curses.wrapper)来获取屏幕上下文，而不是使用curses.initscr()。好处是，如果您的程序遇到未捕获的异常（例如，点击 ^C），它将撤消您对终端所做的所有更改，例如在退出之前禁用光标。在调试时它很有帮助。

从这里开始，我建议您以非常小的步骤重新添加程序的功能。使用诅咒是一种痛苦，如果您一次进行大量更改，则很难弄清楚是哪一个导致了事情的崩溃。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T21:06:58.960

*在有*或*没有*这`sc.nodelay()`条线的情况下运行你的小测试程序时，我看不出有什么区别。

两种情况都不会在屏幕上打印任何内容...

# php - 在 php 代码中操作重音符号

> ID：14004838
> 
> 赞同：1
> 
> 时间：2012-12-22T17:13:05.927
> 
> 标签：php, mysql, utf-8, collation

我想以 JSON 格式从 MySQL 数据库中检索一些数据。

我的表的排序规则设置为`utf8_general_ci`. 在我的 PHP 代码中，我有以下代码：

```
/* change character set to utf8 */
if (!$mysqli->set_charset("utf8")) {
    printf("Error loading character set utf8: %s\n", $mysqli->error);
} else {
    printf("Current character set: %s\n", $mysqli->character_set_name());
} 
```

但是当浏览器检索页面时，带有重音符号的单词无法正确显示。例如，“á”表示为“\u00e1”。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T09:55:07.173

您只是在查看编码的 JSON，没有真正的问题。当你解码 JSON 时，你会`á`再次得到。

```
$a = json_encode( 'á' );
echo $a; //'"\u00e1"'
echon json_decode( $a ); // 'á' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T17:20:59.910

HTML：`<meta charset="utf-8" />`

信息：[http ://www.joelonsoftware.com/articles/Unicode.html](http://www.joelonsoftware.com/articles/Unicode.html)

# python - 使用带有 virtualenv 的 Flask-Babel 失败

> ID：14004839
> 
> 赞同：1
> 
> 时间：2012-12-22T17:13:06.673
> 
> 标签：python, flask, virtualenv, flask-extensions, flask-babel

我在全局包中安装了 Flask、Babel 和 Flask-Babel。运行python时我输入这个，没有错误

```
>>> from flaskext.babel import Babel
>>> 
```

使用虚拟环境，启动 python 并输入我看到的相同命令

```
>>> from flaskext.babel import Babel
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named flaskext.babel
>>> 
```

问题是我正在使用 Ninja-IDE，我显然被迫使用 virtualenv。只要它不破坏 Flask 包装系统，我不介意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T15:24:10.720

是的！我解决了这个问题！

在 babel.py 文件旁边的全局 Lib/site-packages/flaskext 中创建一个空的*_init _py 即可解决问题。*

从本地环境导入 Babel 现在可以按预期工作，并且在全局环境中工作。

我们可以使用*from flaskext.babel import Babel*和*from babel.ext.babel import Babel*两种形式。但是表格 *from flask_babel import Babel* 或 *import flask_babel* 不起作用。

请注意，我在 C:\Python27 中使用 Python 2.7 在 Windows 7 64 位上运行。在 unix 计算机上，缺少**init** .py 文件可能不是问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T11:23:15.773

我认为您应该从 0.8 版开始导入以下 Flask 扩展：

```
from flask.ext.babel import Babel 
```

我尝试了旧方法（`import flaskext.babel`），但它也对我不起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T13:34:21.320

导入 Flask 扩展的旧方法是：

```
import flaskext.babel 
```

[然而，命名空间包](https://stackoverflow.com/questions/1675734/how-do-i-create-a-namespace-package-in-python)“对每个参与的人来说都太痛苦了”，所以现在 Flask 扩展应该可以像这样导入：

```
import flask_babel 
```

[`flask.ext`](https://github.com/mitsuhiko/flask/blob/master/flask/ext/__init__.py)是一个特殊的包。如果你`import flask.ext.babel`，它将尝试上述两种变体，因此它应该在任何情况下都可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-17T13:07:39.387

对于 python 3 像这样安装：**pip install Flask-Babel** 在安装这样的导入后：**from flask.ext.babel import Babel**但请注意，您会收到弃用警告，因此您可以像这样导入：**from flask_babel import Babel**

# multithreading - c++中带有winapi线程的sqlite

> ID：14004848
> 
> 赞同：-2
> 
> 时间：2012-12-22T17:13:52.527
> 
> 标签：multithreading, winapi

嗨，我正在尝试在 winapi 线程中使用 sqlite，但 sqlite 准备语句不起作用我不知道为什么请帮忙看看我的代码 sqlite3_prepare_v2 没有返回 SQLITE_OK

```
DWORD WINAPI dloader(LPVOID lpParameter)
{
    sqlite3 *db;     // databse handler 
    sqlite3_stmt *stat;    // statment ....  
    char *q;
    q="INSERT INTO search (id,fname,fpath) VALUES (NULL,?,?)";
    LPSTR f = (LPSTR)lpParameter, ff;
    size_t s = lstrlen(f); DWORD bw;
cout<<"\nin loader";
    if ((s > 0) && (lstrcmp(&f[s-4], ".jpg") == 0))
    {
        ff = PathFindFileNameA(f);
        s = lstrlen(f);
        if(sqlite3_prepare_v2(db, q, strlen(q), &stat, 0) == SQLITE_OK){
        // Bind values 
        cout<<"\nvalues binded";
        sqlite3_bind_text(stat, 1, ff, strlen(ff), 0); // file name
        sqlite3_bind_text(stat, 2, f, strlen(f), 0);   // file path + file name
        sqlite3_step(stat);   // prepare statemnt Ready
        sqlite3_finalize(stat);    
   }
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T17:15:43.937

`INSET`不是命令。那应该是`INSERT`。您需要熟悉错误处理。不要在未检查返回码并记录错误消息的情况下运行命令。[如果您遵循此文档](http://www.sqlite.org/c3ref/errcode.html)，您就不必问这个问题。

# javascript - javascripts中基于onclicks的if语句

> ID：14004849
> 
> 赞同：0
> 
> 时间：2012-12-22T17:13:53.273
> 
> 标签：javascript

我正在使用一个功能，当您单击窗口中的某个位置时，它会更改浏览器中的图像。我想在点击一定次数后弹出一条警报消息。我以为您只需将 window.onclick 函数设置为一个变量，并在其中创建一个 if 语句，检查点击次数是否大于 imageArray 中的长度。我是否应该将 onlick 函数设置为一个数字以便可以正确比较它？谢谢！

```
var myImage = document.getElementById("mainImage");

var imageArray = [
  "_images/hurley.png", "_images/lopate.png", "_images/pat.png",
  "_images/saveaya_b.png", "_images/saveaya.png", "_images/stanely.png"
]

var imageIndex = 0;

function changeImage(){
  myImage.setAttribute("src", imageArray[imageIndex]);
  imageIndex++;
  if(imageIndex >= imageArray.length){
    imageIndex = 0;
  }
}

var a = window.onclick = function(){
    changeImage();
    if (a >=  imageArray.length[3]){
        alert("you clicked me!");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T17:17:53.183

你的`a`变量是多余的和错误的。您已经`imageindex`在`changeImage`函数中检查了，我不知道您为什么要尝试将它与数字的第三个索引进行比较...

只需将警报添加到设置为零的`if`块即可。`imageIndex`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T17:18:06.023

您可能希望将方法中的 if 语句更改`.onclick`为：

```
if (imageIndex > imageArray.length) {
    alert("you clicked me!");
} 
```

该`a`变量被错误地声明和使用。如果您的目的是将点击次数与数组长度进行比较，那么您没有理由首先拥有它。您的首字母`imageArray.length[3]`也不正确。如果是一个数组，则`x.length`返回元素的数量。`x``x`

# java - javaw.exe 找不到路径

> ID：14004851
> 
> 赞同：14
> 
> 时间：2012-12-22T17:14:29.053
> 
> 标签：java, virtual-machine

> **可能重复：**
> [由于环境变量，Eclipse 无法打开](https://stackoverflow.com/questions/2162121/eclipse-will-not-open-due-to-environment-variables)

我正在使用 Eclipse IDE 并尝试运行一个项目，但出现错误。它说 javaw.exe 无法运行。

我重新安装了 Java，现在我有了 JRE 7，还安装了 Jdk，但仍然没有运气。

我打开 cmd 运行 javaw.exe，它说：

C:\Program Files\Java\jre7\bin>javaw.exe 系统找不到文件 C:\Program Files\Java\jre7\bin\javaw.exe

我认为 eclipse 安装正确，但我在使用 Java 时遇到了一些问题。我重新安装了 Java 4 次。我不知道该怎么办。我无法转发我试图理解的教程。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-12-22T17:38:08.827

确保从[这里](http://www.oracle.com/technetwork/java/javase/downloads/index.html)下载这些：

![在此处输入图像描述](../Images/642d2767f50b96ab4b301206e3856078.png)

还像这样在您的计算机上创建`PATH`环境变量（如果它不存在）：

1.  右键单击我的电脑/计算机
2.  特性
3.  高级系统设置（或只是高级）
4.  环境变量
5.  如果`PATH`“用户变量”中不存在变量，请单击`New`（变量名称：PATH，变量值：`C:\Program Files\Java\jdk1.8.0\bin;`<--请检查正确的版本，这可能会随着Oracle不断更新Java而有所不同）。`;`最后可以将多个值分配给`PATH`变量。
6.  点击确定！完毕

![在此处输入图像描述](../Images/dccf248e9c303e55e4111a22c71434ee.png)

为确保一切正常，打开 CMD Prompt 并输入：`java -version`检查 Java 版本并`javac`确保编译器响应。

![在此处输入图像描述](../Images/366bf413aae9839e3cdb3da05dc6d9aa.png)

我希望这有帮助。祝你好运！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-22T17:56:25.217

只需通过以下方式更新您的 eclipse.ini 文件（您可以在 eclipse 的根目录中找到它）：

```
-vm
path/javaw.exe 
```

例如：

```
-vm 
C:/Program Files/Java/jdk1.7.0_09/jre/bin/javaw.exe 
```

# java - 与杰克逊的循环泛型

> ID：14004854
> 
> 赞同：1
> 
> 时间：2012-12-22T17:14:47.527
> 
> 标签：java, generics, jackson

使用 Jackson 2.1.2（`com.fasterxml.jackson`包），我试图定义一个带有 a 的通用接口，`@JsonValue`它可能与关联的子类具有不同的类型，但是当接口的泛型是循环时遇到问题，即使循环generic 不直接在实现类中使用。

我有一个看起来像这样的界面：

```
public interface C<S, R extends C<S,R>> { 

} 
```

（有一些方法，但事实证明它们对我们的目的并不重要）。

```
public class TestSet<E> extends ForwardingSet<E> implements
        C<Set<E>, TestSet<E>> { 
    @JsonIgnore
    private final Set<E> delegate = Sets.newLinkedHashSet();

    @Override
    protected Set<E> delegate() {
        return delegate;
    }

    @JsonValue
    public Set<E> view() {
        return delegate;
    }
} 
```

当我尝试运行以下测试用例时：

```
@Test
public void test() throws Exception {
    TestSet<String> tst = new TestSet<String>();

    tst.add("one");

    System.out.println(mapper.writeValueAsString(tst));
} 
```

它生成一个`java.lang.StackOverflowError`：

```
java.lang.StackOverflowError
    at java.lang.Class.getDeclaringClass(Native Method)
    at com.fasterxml.jackson.databind.type.TypeBindings._resolveBindings(TypeBindings.java:269)
    at com.fasterxml.jackson.databind.type.TypeBindings._resolve(TypeBindings.java:203)
    at com.fasterxml.jackson.databind.type.TypeBindings.findType(TypeBindings.java:121)
    at com.fasterxml.jackson.databind.type.TypeFactory._fromVariable(TypeFactory.java:807)
    at ... 
```

调查显示在这种情况下从未调用 view() 方法。

我发现了两个可能的更改，可以防止这种情况发生并显示所需的行为。首先是不要在接口中使用循环泛型。仅仅删除它就足以防止问题发生。第二种是使用使用创建的显式类型的编写器`mapper.writerWithType(Set.class)`（使用`@JsonSerialize`注释`as`似乎不会这样做）。后者对于我的用例来说并不是一个很好的解决方法，除非我能以某种方式弄清楚如何在注释中反映它。

不完全属于同一类别，但到目前为止，我只在`R`某种形式的`java.util.Collection`. 如果我声明它`class TestSet<E> implements CRDT<Integer, TestSet<E>>`没有错误。

我的问题是：我是否缺少一些基本的东西或一些已知的注释方法？

# android - Android - 重构后的 ClassNotFoundException

> ID：14004858
> 
> 赞同：2
> 
> 时间：2012-12-22T17:15:12.777
> 
> 标签：android, classnotfoundexception

我最近使用 Eclipse 的重构命令重构了我的应用程序（目前称为 MyApp）中的类、包和文件夹名称，但我没有收到 ClassNotFoundException。我确保代码库中的任何地方都不再有旧名称的实例。我还删除了其中的所有类文件`\bin\classes`并在其中生成了 Java 文件`\gen`（这两个文件都已重新生成，我已经检查过）。为了解决这个问题，我还将 API 级别从 16 更新到了 17。这是堆栈跟踪：

```
12-22 17:00:46.690: E/AndroidRuntime(25466): FATAL EXCEPTION: main
12-22 17:00:46.690: E/AndroidRuntime(25466): java.lang.RuntimeException: Unable to instantiate application com.myapp.MyApp: java.lang.ClassNotFoundException: Didn't find class "com.myapp.MyApp" on path: /data/app/com.myapp-2.apk
12-22 17:00:46.690: E/AndroidRuntime(25466):    at android.app.LoadedApk.makeApplication(LoadedApk.java:504)
12-22 17:00:46.690: E/AndroidRuntime(25466):    at android.app.ActivityThread.handleBindApplication(ActivityThread.java:4364)
12-22 17:00:46.690: E/AndroidRuntime(25466):    at android.app.ActivityThread.access$1300(ActivityThread.java:141)
12-22 17:00:46.690: E/AndroidRuntime(25466):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1294)
12-22 17:00:46.690: E/AndroidRuntime(25466):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-22 17:00:46.690: E/AndroidRuntime(25466):    at android.os.Looper.loop(Looper.java:137)
12-22 17:00:46.690: E/AndroidRuntime(25466):    at android.app.ActivityThread.main(ActivityThread.java:5039)
12-22 17:00:46.690: E/AndroidRuntime(25466):    at java.lang.reflect.Method.invokeNative(Native Method)
12-22 17:00:46.690: E/AndroidRuntime(25466):    at java.lang.reflect.Method.invoke(Method.java:511)
12-22 17:00:46.690: E/AndroidRuntime(25466):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-22 17:00:46.690: E/AndroidRuntime(25466):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-22 17:00:46.690: E/AndroidRuntime(25466):    at dalvik.system.NativeStart.main(Native Method)
12-22 17:00:46.690: E/AndroidRuntime(25466): Caused by: java.lang.ClassNotFoundException: Didn't find class "com.myapp.MyApp" on path: /data/app/com.myapp-2.apk
12-22 17:00:46.690: E/AndroidRuntime(25466):    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:65)
12-22 17:00:46.690: E/AndroidRuntime(25466):    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
12-22 17:00:46.690: E/AndroidRuntime(25466):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
12-22 17:00:46.690: E/AndroidRuntime(25466):    at android.app.Instrumentation.newApplication(Instrumentation.java:968)
12-22 17:00:46.690: E/AndroidRuntime(25466):    at android.app.LoadedApk.makeApplication(LoadedApk.java:499)
12-22 17:00:46.690: E/AndroidRuntime(25466):    ... 11 more 
```

这是我的清单。我知道硬编码字符串是不好的风格。

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.myapp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />
    <uses-permission 
        android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <application
        android:icon="@drawable/ic_launcher"
        android:name="MyApp"
        android:label="MyApp"
        android:theme="@style/NoActionBar">
        <activity
            android:name=".Otheractivity"
            android:label="Otheractivity">
        </activity>
        <activity 
            android:name=".MainMenu"
            android:label="MainMenu">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

关于问题可能是什么的任何想法？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-05-19T13:59:54.373

有同样的问题，通过以下方式解决：

右键单击您的项目-> Java 构建路径-> 排序和导出（选项卡）-> 在“android 私有库”上制作'v'

告诉我它是否有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-23T05:31:13.903

`android:name="MyApp"`在你的清单中意味着你需要有`MyApp.java`，声明在你的包中`MyApp`扩展的类。`Application``com.myapp`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T17:57:06.160

使用最新版本的 eclipse/adt 时，有时当我包含外部库时会得到这个。从构建路径中删除它们，然后重新添加通常可以修复它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-09T16:01:19.370

对于那些在 Android Studio 中仍然出现此错误的人，我通过从根目录中删除 .gradle 文件夹来解决此问题 -> 清理并构建 -> 再次运行应用程序。

# iphone - Cocos2d 2.0 错误 xcode 5.2

> ID：14004860
> 
> 赞同：1
> 
> 时间：2012-12-22T17:15:18.227
> 
> 标签：iphone, for-loop, cocos2d-iphone, xcode4.5, cgrect

```
for (CCSprite *body in bodyArray) {
    if (CGRectIntersectsRect(snakeHead.boundingBox, body.boundingBox)) {
        [self unscheduleUpdate];
        [self gameOver];
    }
} 
```

这是我在 xcode4.2 osx 10.6.8 上完美运行的代码，但是当我不得不升级到 xcode 4.5 时，这给了我一个警告“'body' 的本地声明隐藏了实例变量”我不知道这意味着什么，并且我已经搜索了问题，但没有找到任何解决方案。这里有人理解这个警告吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T17:37:31.807

`body`您的文件中有一个名为的实例变量`.h`。您在下一行也使用了相同的名称
`for (CCSprite *body in bodyArray)`。

所以这个警告信息意味着文件中`body`声明的实例变量`.h`不会在你的`for`循环范围内使用

# c++ - 如何实现.h文件中定义的类c ++

> ID：14004861
> 
> 赞同：2
> 
> 时间：2012-12-22T17:15:37.550
> 
> 标签：c++, build, header-files

好吧，我来自 Java 和 Python，所以请耐心等待。我一直在互联网上四处寻找，试图学习如何在 C++ 中使用头文件，在我定义一个类之前我做得很好。这是我的代码。

notALock.h

```
#ifndef NOTACLOCK_H_
#define NOTACLOCK_H_

namespace thenewboston {

class notAClock {
public:
    notAClock();
    virtual ~notAClock();
    int isAClock();
};

} /* namespace thenewboston */
#endif /* NOTACLOCK_H_ */ 
```

notALock.cpp

```
 /*
 * notAClock.cpp
 *
 *  Created on: Dec 22, 2012
 *      Author: pipsqueaker
 */

#include "notAClock.h"

namespace thenewboston {

notAClock::notAClock() {
    // TODO Auto-generated constructor stub

}

notAClock::~notAClock() {
    // TODO Auto-generated destructor stub
}

int notAClock::isAClock() {
    return 0;
}
} /* namespace thenewboston */ 
```

最后，我的主文件

```
#include <iostream>
#include "notAClock.h"
using namespace std;

int main() {
    cout << "program works" << endl;
    notAClock play;
} 
```

当 Eclipse 尝试为我编译这个（我正在使用 CDT 插件）时，它会抛出一个错误，其相关部分是

```
../src/main.cpp:13: error: 'notAClock' was not declared in this scope
../src/main.cpp:13: error: expected `;' before 'play'
make: *** [src/main.o] Error 1 
```

我能从中得到的最大好处是 notAClock 在主类中是未定义的。我究竟做错了什么？

-pipsqueaker117

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T17:17:51.157

你有一个命名空间内的类。它需要有资格使用它：

```
thenewboston::notAClock play; 
```

或者添加一个`using`指令以允许对类进行非限定访问：

```
using thenewboston::notAClock;
notAClock play; 
```

或者一个`using namespace`指令来拉入整个命名空间：

```
using namespace std;
using namespace thenewboston;

int main() {
    cout << "program works" << endl;
    notAClock play;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T18:50:16.620

为了解决问题的“如何在 C++ 中使用头文件”部分，请注意以下几点：

1）C++中的头文件与java或python中的包导入不同：当你在C++中#include时，文件的文本在编译期间被包含到源文件中（忽略预编译的头文件，这是一种优化），并且与正在编译的文件一起编译的内容。因此，这意味着在整个项目中经常#included 的任何头文件最终都会被一遍又一遍地编译。这就是为什么在 C++ 中将#includes 保持在绝对最小值的原因之一。

2) 在风格方面，许多人更喜欢在公共头文件中只保留公共接口类声明（例如，参见“pimpl”习语），并将具体的类定义放入 .cpp 文件中。这使类实现的内部细节与其公共接口物理分离。当类的实现发生变化时，只需要重新编译带有实现代码的文件。如果一个类的实现被放置在广泛的头文件中，那么你不仅会在开发过程中产生更多和更长的构建，而且不相关的代码更有可能“弄乱”类的实现并导致难以-调试问题。

# php - Javascript ajax 调用未捕获的引用错误

> ID：14004862
> 
> 赞同：0
> 
> 时间：2012-12-22T17:15:39.470
> 
> 标签：php, javascript, ajax, amazon-elastic-beanstalk

嗨，我有一个 php 应用程序，但是我的 javascript 导致错误，它在 localhost 上完美运行，但是当我上传到亚马逊 elasticbeanstalk 时，它显示这个错误`Uncaught ReferenceError: getEvent is not defined` 这是我的代码：

索引.phtml

```
<script type="text/javascript" src="../public/js/page/home.js"></script>
$(document).ready(function(){
getEvent();
}); 
```

主页.js

```
function getEvent()
{
    var count=1;
    $.ajax({
        url:baseUrl + "event/popularevent",
        data:{'count':count},
        dataType:"json",
        type:"POST",
        async:false,
        success:function(data){
            var eventHtml = '';
            eventHtml = '<li class="clearfix media-block module-li">' +
                    '<div class="media-avatar-passport">' +
                        '<div class="photo-box pb-60s">' +
        '<a class="event-photo" href="/events/san-francisco-halloween-beer-olympics-halloween-drinking-games-1-beer-free">' +
            '<img class="photo-img" alt="Photo of HALLOWEEN BEER OLYMPICS! Halloween Drinking Games + $1 Beer!  FREE!" height="60" src="#" width="60"></a></div>' +

        '</div><div class="media-story">' +
                '<div class="item-title clearfix">' +
        '<a href="/events/san-francisco-halloween-beer-olympics-halloween-drinking-games-1-beer-free" class="url summary">HALLOWEEN BEER OLYMPICS! Halloween Drinking Games + $1 Beer! &nbsp;FREE!</a></div>'+

        '<div class="item-description">'+
        '<span class="extra">'+
        '   Tomorrow, Oct 26, 8:30 pm'+
        '</span><p class="fine-print">140 are interested</p></div>'+
        '</div></li>';
            //alert('ok');
            $('#popular-events .module-list').html(eventHtml);
        }
    });
} 
```

在我犯了错误的地方，它在本地主机上而不是在部署服务器上运行没有错误。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T17:27:57.833

没有看到环境很难说，但我猜两件事之一正在发生。

home.js 被上传到错误的位置，或者它的文件权限设置不正确

# ruby-on-rails - 在属于视图的索引视图中显示特定数据

> ID：14004867
> 
> 赞同：1
> 
> 时间：2012-12-22T17:16:28.017
> 
> 标签：ruby-on-rails, ruby-on-rails-3

创建一个简单的 todolist。试图在**列表索引视图**中显示属于列表的**任务**的描述。**使用当前代码，当我使用list.tasks**时，所有数据字段都会从属于列表的所有任务中显示，但我只想要**task.desc。**我如何明确告诉 Rails 我只希望 task.desc 显示？

 *******列表/index.html.erb*

```
<h1>My Lists</h1>

        <%= link_to 'New List', new_list_path, class: "btn btn-primary" %>

        <h3>Name | Time Ago</h3>

    <% @lists.each do |list| %>

        <h4><%= link_to list.name, list %></td></h4>

        <% if list.created_at > Time.now.beginning_of_day %>
        <%="#{time_ago_in_words(list.created_at)} ago"%>
        <% else %>
        <h6><%= list.created_at.strftime("%b %d, %Y") %></h6>

        <%= list.tasks %><br />
            <% end %>

        <%= link_to 'Edit', edit_list_path(list) %> | 
        <%= link_to 'Destroy', list, method: :delete, data: { confirm: 'Are you sure?' } %>
        <br />
    <% end %>
    <br /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T17:37:49.170

获取每个描述的数组

list.tasks.collect(&:desc)

& 是进入 Ruby 1.9 的 Rails 快捷方式 - 它说，将 & 之后的方法应用于集合的每个成员。

我想你**可能**想要

list.tasks.collect(&:desc).join("<br />").html_safe

:)

（您可能不需要 html_safe，它用于表明您故意将标记放在字符串中并且您不希望它被转义）

如果这对您有用，我会将其从视图中取出并将其放入列表类中。如在

```
def current_tasks
  tasks.collect(&:desc)
end 
```

这意味着您可以对此进行测试并在以后重用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T17:31:37.857

如果我正确理解您的问题，您可以使用用于列表迭代的 .each：

```
<% list.tasks.each do |task| %>
  <%= task.desc %><br />
<% end %> 
```******

# django - 使用了哪种技术？

> ID：14004869
> 
> 赞同：-2
> 
> 时间：2012-12-22T17:16:38.317
> 
> 标签：django

我正在考虑制作这个网络服务的副本需要哪种技术：[http](http://dziswieczorem.pl/) : //dziswieczorem.pl/ 有人知道在 django 中实现的任何准备就绪的解决方案（尤其是地图事物）吗？或者也许有人可以给我提示，哪些技术更容易实现类似的东西？

更具体地说：是否有一些现成的模板包含我上面写的页面上的世界地图？我还需要一个聊天功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T17:35:44.723

对于地图功能，您可能会从中受益`django-gmapi`，但我从未尝试过，所以我不知道它是否正是您想要的。

至于聊天，这里似乎有几个选项可供您考虑： http: [//www.djangopackages.com/grids/g/chat/](http://www.djangopackages.com/grids/g/chat/)

# java - Java - JFrame 中的计算器 - 除法不起作用？

> ID：14004870
> 
> 赞同：1
> 
> 时间：2012-12-22T17:16:38.627
> 
> 标签：java, user-interface, jframe, calculator, division

我已经使用 JFrame 用 java 制作了一个计算器，除了除法之外一切正常。这是计算答案并显示它的代码位：

```
public void actionPerformed(ActionEvent e) {
        try {
            num1 = Double.parseDouble(resultl.getText());
            num2 = Double.parseDouble(resultl.getText());
            if (oper.equals("+")) {
                answer = num1 + num2;
                resultm.setText("" + answer);
                resultl.setText("");
                resultr.setText("");
                oper = "";
                currentNuml = "";
                currentNumr = "";
            } else if (oper.equals("-")) {
                answer = num1 - num2;
                resultm.setText("" + answer);
                resultl.setText("");
                resultr.setText("");
                oper = "";
                currentNuml = "";
                currentNumr = "";   
            } else if (oper.equals("*")) {
                answer = num1 * num2;
                resultm.setText("" + answer);
                resultl.setText("");
                resultr.setText("");
                oper = "";
                currentNuml = "";
                currentNumr = "";
            } else if (oper.equals("/")) {
                answer = num1 / num2;
                resultm.setText("" + answer);
                resultl.setText("");
                resultr.setText("");
                oper = "";
                currentNuml = "";
                currentNumr = "";
            }
            } catch (NumberFormatException ex) {
                resultl.setText("Unexpected Error, try again.");
        }
    } 
```

我粘贴了生成比较答案的整个内容，但实际上除法位是问题所在。如果我对除法做任何事情，它总是说答案是 1.0 - 任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T17:18:26.023

您正在阅读相同`JTextField`的内容，`num2`因此值将相同。任何`double`除以自身将产生`1.0`。

```
num2 = Double.parseDouble(resultl.getText()); 
```

你可能想要：

```
num2 = Double.parseDouble(result2.getText()); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-22T17:19:13.993

```
 num1 = Double.parseDouble(resultl.getText());
        num2 = Double.parseDouble(resultl.getText()); 
```

num1 和 num2 是相同的值 => 除法提供 1.0

# iphone - 旋转MKMapView？

> ID：14004876
> 
> 赞同：1
> 
> 时间：2012-12-22T17:17:19.207
> 
> 标签：iphone, ios, ipad, cocoa-touch, mkmapview

> **可能重复：**
> [旋转 MKMapView 的内容](https://stackoverflow.com/questions/1551282/rotate-the-content-of-a-mkmapview)

我想知道是否有办法旋转 MKMapView。默认情况下，北上锁南下，有没有办法解锁它并允许用户用两根手指转动地图的角度？有没有办法以编程方式改变地图的角度？

# java - JSP/Servlet 如何识别 HTTP 请求是否来自 ajax 请求

> ID：14004877
> 
> 赞同：5
> 
> 时间：2012-12-22T17:17:24.950
> 
> 标签：java, jsp, servlets, struts2, request

我正在为我的网络应用程序使用 JQuery-Ajax 和 History.js，无论如何我可以确定请求是来自 AJAX 请求还是只是普通请求？我的目标是这样的

```
<%if(isRequestAjax()){%>
<jsp:include page="/views/header.jsp" />        
}
<%}%>

<div id ="profilePage>
    <!-- user profile will be loaded here !-->
</div> 
```

我也像 MVC 框架一样使用 Struts2

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-22T17:23:09.383

您必须检查请求标头`X-Requested-With`，它将是`XMLHttpRequest`

```
 if ("XMLHttpRequest".equals(req.getHeader("X-Requested-With")) ){
           // include other file
  } 
```

# python - 字符串切片出错？

> ID：14004880
> 
> 赞同：0
> 
> 时间：2012-12-22T17:17:40.923
> 
> 标签：python, string, split

我正在开发一个相当简单的程序，将给定的非编码 DNA 链转换为所有对应物（编码、mRNA、tRNA 和氨基酸链）。

`IndexError`但是，当我尝试对字符串进行切片时，我得到了一个：

```
mRNA_parts = mRNA.split(' ')
print mRNA_parts,  # using for debugging purposes

for base in mRNA_parts:
    print base # again, for debugging
    partA = base[0]
    partB = base[1]
    partC = base[2]
    my_acid = (amino_acids[partA][partB][partC]) + ' '
    # 'amino_acids' is a 3D (thrice-nested) dictionary with the corresponding parts of mRNA to convert to the amino acid chain.
    # part of the nested dictionary: amino_acids = {'U': {'U': {'U': 'Phe'}}}. This is only one part (out of 64) of it.
    # Thus, if  the mRNA section was 'UUU', the amino acid would be 'Phe '.
    acid_strand += my_acid 
```

这是我得到的错误：

```
['GAU', '']
GAU

Traceback (most recent call last):
  File "D:\my_stuff\Google Drive\documents\SCHOOL\Programming\Python\DNA to RNA Converter.py", line 83, in <module>
    main()
  File "D:\my_stuff\Google Drive\documents\SCHOOL\Programming\Python\DNA to RNA Converter.py", line 3, in main
    convert(non_coding)
  File "D:\my_stuff\Google Drive\documents\SCHOOL\Programming\Python\DNA to RNA Converter.py", line 58, in convert
    partA = base[0]
IndexError: string index out of range 
```

`base[0]`基地是'GAU'怎么办？

根据它打印的内容，'GAU' 不是字符串吗？它周围没有任何引用。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T17:19:16.617

它没有显示错误`GAU`，而是显示空字符串`''`，您将其作为列表的第二个元素。在循环开始时添加一个测试以忽略它。

# python - 使用 Tkinter 绑定和画布进行线程处理

> ID：14004888
> 
> 赞同：0
> 
> 时间：2012-12-22T17:18:07.240
> 
> 标签：python, multithreading, tkinter, bind

我对 Tkinter 的`canvas.coords()`方法有疑问。我试图每 1/60 秒更新一次画布，并尝试检测何时按下右箭头键。问题是当我按住右箭头一段时间时出现错误：

[http://postimage.org/image/bdfk3m8gx/](http://postimage.org/image/bdfk3m8gx/)

我的脚本是“novo.py”，代码如下。有什么帮助吗？我只是一个初学者。

```
import Tkinter, threading, time

def real_time(td, canvas):
    while True:
        time.sleep(1/60.0)
        canvas.coords('line',1,1,200,200)

def func(event):
    print 'key pressed'

root = Tkinter.Tk()
canvas = Tkinter.Canvas(root)
canvas.pack()
canvas.create_line(1,1,100,100, tag='line')
root.bind('<Right>', func)
thread = threading.Thread(target = real_time, args = (1/60.0, canvas))
thread.start()
root.mainloop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T14:53:08.903

Tkinter 不是线程安全的，而且很多时候根本不需要线程。

在您的情况下，您可以使用`after`每隔 N 毫秒定期运行一次。例如，要每秒运行大约 60 次，您可以执行以下操作：

```
def real_time():
    <do something here>
    self.after(16, real_time) 
```

然后，在程序启动时调用此函数一次：

```
real_time() 
```

# facebook - 使用 CRON 更新 FB 页面的最简单解决方案

> ID：14004895
> 
> 赞同：-1
> 
> 时间：2012-12-22T17:18:51.987
> 
> 标签：facebook, cron, facebook-php-sdk, facebook-page, facebook-access-token

我花了很长时间在 API 文档和 google 上搜索解决方案，但确实无法找到满足我需求的解决方案。所以我的问题很简单，对我来说，使用 cron + php 为页面制作 Facebook 帖子的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T18:45:29.727

将 fb 的 Simple **Feed** API 与**access_token**一起使用。

1.  如果您作为应用发布，您将需要应用的 access_token（永不过期）。您可以从这里获取令牌：[AccessTokens](https://developers.facebook.com/tools/access_token/)

2.  如果您代表用户发帖，您将需要用户的 access_token。普通访问令牌在 2 小时后过期，扩展令牌有效期为 2 个月。将扩展令牌用于 cron 作业。参考：[自offline_access弃用以来如何扩展访问令牌的有效性](https://stackoverflow.com/questions/8982025/how-to-extend-access-token-validity-since-offline-access-deprecation/9035036#9035036)

# google-app-engine - 将数据上传到 Google App Engine 数据存储区所需的配方

> ID：14004903
> 
> 赞同：3
> 
> 时间：2012-12-22T17:19:47.130
> 
> 标签：google-app-engine, google-cloud-datastore

虽然过去几个月我一直忙于完成我的 Google App Engine 解决方案，但我现在发现由于本地 dev_server 和 apppot 之间的变化和差异，Google 让我陷入了困境。

场景：我的应用部署在带有联合 OpenID 身份验证的 apppot 上。

问题：当应用程序配置为使用 OpenID 时，Google 不支持数据上传。（他们知道这个[问题](http://code.google.com/p/googleappengine/issues/detail?id=8133)，不认为这是一个错误。）

几年前，尼克约翰逊在他的博客上发布了一个[remote_api 和 OpenID 解决方法](http://blog.notdot.net/2010/06/Using-remote-api-with-OpenID-authentication)，但有几个人报告它不再有效。

此外，Dan Sanderson 的《Programming Google App Engine》一书的最新（第 2 版）不再包含有关数据上传的章节。有备份和恢复的章节，但是我要备份才能恢复数据，要等数据存在才能备份！

我不敢相信我是这个困境中唯一的人——它似乎应该是一个非常普遍的需求——我只需要在我的应用程序使用 OpenID 时上传数据。

请记住，关于我的本地 dev_server Python 应用程序的所有内容都运行良好（appcfg.py、upload_data、remote_api、CSV yaml 配置等），但是 apppot 上的这个问题阻止了我发布我的应用程序！

有没有人有一个简单的、最新的、记录在案的方法来将数千条记录上传到应用程序引擎？自定义上传处理程序端点？将数据文件与新的应用程序版本捆绑在一起，然后以某种方式读取它们？将 CSV 文件发布到 Google Drive 并从任务队列中读取它们？

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-22T17:37:37.517

您可以尝试将此作为解决方法：

1.  使用“普通”Google 帐户身份验证创建一个新应用程序。
2.  将数据上传到该应用程序。
3.  将数据备份到 Google Cloud Storage。
4.  将 Google Cloud Storage 中的日期恢复到原始应用程序中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T00:26:50.107

从 SDK 1.7.3 开始，谷歌表示您可以更改身份验证方法 [http://code.google.com/p/googleappengine/wiki/SdkReleaseNotes](http://code.google.com/p/googleappengine/wiki/SdkReleaseNotes)。在通过远程 api 进行初始数据加载时，您始终可以恢复为“google 帐户 api”，然后在完成后将身份验证设置回联合登录。

# actionscript-3 - [AS3]使用 hitTestObject 与墙壁碰撞

> ID：14004912
> 
> 赞同：0
> 
> 时间：2012-12-22T17:20:45.823
> 
> 标签：actionscript-3, flash, collision-detection, collision, maze

所以我目前正在尝试做一个几乎像迷宫一样的游戏。问题在于墙壁碰撞，一旦角色撞到墙壁，我就无法再将他弄出来，无论我在碰撞后尝试将他带向哪个方向，他都会“卡住”。我想的解决方案之一是每当角色撞到墙上时，“支持他”，这样就不会再检测到碰撞。然而，当我这样做时，他以一种奇怪的方式穿过墙壁。这是我的代码，所以你们可以知道我在做什么：

```
function keyPressed(event:KeyboardEvent):void
{

    if (event.keyCode == Keyboard.LEFT)
    {
       leftArrow = true;
       if(char.hitTestObject(test))
       {
           leftHit= true;
       } else { 
           leftHit = false;
       }
    }
    if (event.keyCode == Keyboard.RIGHT)
    {
       rightArrow = true;
       if(char.hitTestObject(test))
       {
           rightHit= true;
       } else { 
           rightHit = false;
       }
    }

}

function keyReleased(event:KeyboardEvent):void 
{

    if (event.keyCode == Keyboard.LEFT) 
    {
        leftArrow = false;
    }
    if (event.keyCode == Keyboard.RIGHT)
    {
       rightArrow = false;
    }

}

function walking(event:Event):void {
    if (rightArrow) {
        if(rightHit)
            char.x -= speed;
        else
            char.x += speed;    
    }

    if (leftArrow) {
        if(leftHit)
            char.x += speed;
        else
            char.x -= speed;
    }
} 
```

这段代码的很大一部分实际上是从另一个问同样问题的人那里得到的。即使按照其他主题中的建议进行操作，问题仍然存在。非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-20T15:08:16.510

根据要求，这是我的解决方案：

```
 if (rightArrow) {
                if (!test.hitTestPoint(MovieClip(root).char.x+speed, MovieClip(root).char.y, true))
                {
                    MovieClip(root).char.x += speed;    
                    x = x-speed; //moving the background
                }
            }

            if (leftArrow) {
                if (!test.hitTestPoint(MovieClip(root).char.x-speed, MovieClip(root).char.y, true))
                {
                    MovieClip(root).char.x -= speed;
                    x = x+speed; //moving the background
                }
            }
            if (upArrow) {
                if (!test.hitTestPoint(MovieClip(root).char.x, MovieClip(root).char.y-speed, true))
                {
                    MovieClip(root).char.y -= speed;    
                    y = y+speed; //moving the background
                }
            }

            if (downArrow) {
                if (!test.hitTestPoint(MovieClip(root).char.x, MovieClip(root).char.y+speed, true))
                {
                    MovieClip(root).char.y += speed;
                    y = y-speed; //moving the background
                }
            } 
```

已经有一段时间了，有些东西我真的不记得了，但据我所知，我检查了增加我的角色的速度是否会使其与墙壁发生碰撞。如果发生这种情况，即使我看起来有足够的空间，我也不会移动角色。我认为差不多就是这样。

希望能帮助到你。

# wpf - 验证按钮单击事件wpf c#

> ID：14004913
> 
> 赞同：5
> 
> 时间：2012-12-22T17:20:53.163
> 
> 标签：wpf, validation, combobox, textbox

我有一个 WPF 应用程序，我必须在其中检查一个`TextBox`值和一个`ComboBox`. 如果它为空或不在格式上，则按钮单击事件应触发错误，如果`ComboBox`再次选择的索引为 0，则应触发错误。（如在错误提供程序中）。

我在互联网上做了很多研究，发现了*IDataErrorInfo*的解决方案。但问题是我如何在按钮单击事件上执行此操作。所有示例都是在表单加载时执行的。

我对 WPF 很陌生。以下是我的代码

```
public class ClientMap : IDataErrorInfo
{
    public string CDSNo { get; set; }

    public ClientMap(int ID)
    {
        Id = ID;
    }
    public ClientMap()
    {

    }

    public string Error
    {
        get { throw new NotImplementedException(); }
    }

    public string this[string columnName]
    {
        get
        {
            string result = null;
            if (columnName == "CDSNo")
            {
                if (string.IsNullOrEmpty(CDSNo))
                    result = "Please enter a CDS No";
                else
                {
                    string regEx = "[A-Z]{3}-\\d{9}-[A-Z]{2}-\\d{2}";
                    if (!Regex.IsMatch(CDSNo, regEx))
                    {
                        result = "Invalid CDS No";
                    }
                }
            }

            return result;
        }
    }

    public int Id { get; set; }
    public CE.Data.Customer Customer { get; set; }
    public CE.Data.Institute Institute { get; set; }
    public bool Archived { get; set; }
    public DateTime DateCreated { get; set; }

} 
```

XAML 是

```
<Window.Resources>
    <validation:ClientMap x:Key="data"/>
</Window.Resources>

<control:AutoCompleteTextBox Style="{StaticResource textBoxInError}">
    <TextBox.Text>
        <Binding Path="CDSNo" Source="{StaticResource data}"
                ValidatesOnDataErrors="True"   
                UpdateSourceTrigger="Explicit">

            <Binding.ValidationRules>
                <ExceptionValidationRule/>
            </Binding.ValidationRules>
        </Binding>
    </TextBox.Text>
</control:AutoCompleteTextBox> 
```

请帮我。谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-23T23:49:44.837

这是[本文](http://www.switchonthecode.com/tutorials/wpf-tutorial-binding-validation-rules)的修改代码。您将需要从该站点的下载中获取参考资料和其他类。

**Window1.xaml**

```
<Window x:Class="SOTCBindingValidation.Window1" x:Name="This"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:SOTCBindingValidation"
    Title="SOTC Validation Test" Height="184" Width="390">
    <Window.Resources>
        <local:ErrorsToMessageConverter x:Key="eToMConverter" />
    </Window.Resources>
    <StackPanel Margin="5">
        <TextBlock Margin="2">Enter An IPv4 Address:</TextBlock>
            <TextBox x:Name="AddressBox">
                <TextBox.Text>
                    <Binding ElementName="This" Path="IPAddress" 
                             UpdateSourceTrigger="Explicit">
                        <Binding.ValidationRules>
                            <local:IPv4ValidationRule />
                        </Binding.ValidationRules>
                    </Binding>
                </TextBox.Text>
            </TextBox>
        <TextBlock Margin="2" Foreground="Red" FontWeight="Bold" 
            Text="{Binding ElementName=AddressBox, 
                          Path=(Validation.Errors),
                          Converter={StaticResource eToMConverter}}" />
            <Button Name="Btn1" Height ="30" Width="70" Click="Btn1_Click"></Button>
    </StackPanel>

</Window> 
```

**Window1.xaml.cs**

```
using System.Windows;
using System.Windows.Controls;
namespace SOTCBindingValidation
{

    public partial class Window1 : Window
    {
        public static readonly DependencyProperty IPAddressProperty =
            DependencyProperty.Register("IPAddress", typeof(string),
            typeof(Window1), new UIPropertyMetadata(""));

        public string IPAddress
        {
            get { return (string)GetValue(IPAddressProperty); }
            set { SetValue(IPAddressProperty, value); }
        }

        public Window1()
        { InitializeComponent(); }

        private void Btn1_Click(object sender, RoutedEventArgs e)
        {
            ForceValidation();
            if (!Validation.GetHasError(AddressBox))
            {
                // Put the code you want to execute if the validation succeeds here
            }
        }
        private void ForceValidation()
        {
            AddressBox.GetBindingExpression(TextBox.TextProperty).UpdateSource();
        }

    }
} 
```

# ruby-on-rails - 重用 RSpec 行为验证

> ID：14004916
> 
> 赞同：5
> 
> 时间：2012-12-22T17:21:34.123
> 
> 标签：ruby-on-rails, rspec, code-reuse

在我的 Rails 3 应用程序中，我有一个 RSpec 规范，它检查给定字段（**用户**模型中的**角色**）的行为，以保证该值在有效值列表中。

 **现在我将在另一个具有另一组有效值的模型中为另一个字段提供完全相同的规范。我想提取公共代码，而不是仅仅复制和粘贴它，更改变量。

我想知道是否会使用*共享示例*或其他 RSpec 重用技术。

这是相关的 RSpec 代码：

```
describe "validation" do  
  describe "#role" do
    context "with a valid role value" do
      it "is valid" do
        User::ROLES.each do |role|
          build(:user, :role => role).should be_valid
        end
      end
    end

    context "with an empty role" do
      subject { build(:user, :role => nil) }

      it "is invalid" do
        subject.should_not be_valid
      end

      it "adds an error message for the role" do
        subject.save.should be_false
        subject.errors.messages[:role].first.should == "can't be blank"
      end
    end

    context "with an invalid role value" do
      subject { build(:user, :role => 'unknown') }

      it "is invalid" do
        subject.should_not be_valid
      end

      it "adds an error message for the role" do
        subject.save.should be_false
        subject.errors.messages[:role].first.should =~ /unknown isn't a valid role/
      end
    end
  end
end 
```

重用此代码的最佳情况是什么，但将**角色**（正在验证的字段）和**User::ROLES**（有效值的集合）提取到传递给此代码的参数中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T17:46:07.003

`shared_examples`您可以通过以下方式使用技术干燥您的规格：

```
 shared_examples "no role" do
    it "is invalid" do
      subject.should_not be_valid
    end
  end

  context "with an empty role" do
    subject { Factory.build(:user, :name => nil) }
    it_behaves_like "no role"
  end

  context "with an invalid role value" do
    subject { Factory.build(:user, :name => '') }
    it_behaves_like "no role"
  end 
```

但是你的想法来干燥几个规格呢……我认为这太过分了。我相信规范必须首先可读，然后才能干燥。如果您 DRY 几个规范，那么将来阅读/重构/更改此代码可能会令人头疼。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T16:38:47.093

我认为这是共享示例的一个完全合理的用例。例如这样的：

```
shared_examples_for "attribute in collection" do |attr_name, valid_values|

  context "with a valid role value" do
    it "is valid" do
      valid_values.each do |role|
        build(:user, attr_name => role).should be_valid
      end
    end
  end

  context "with an empty #{attr_name}" do
    subject { build(:user, attr_name => nil) }

    it "is invalid" do
      subject.should_not be_valid
    end

    it "adds an error message for the #{attr_name}" do
      subject.save.should be_false
      subject.errors.messages[attr_name].first.should == "can't be blank"
    end
  end

  context "with an invalid #{attr_name} value" do
    subject { build(:user, attr_name => 'unknown') }

    it "is invalid" do
      subject.should_not be_valid
    end

    it "adds an error message for the #{attr_name}" do
      subject.save.should be_false
      subject.errors.messages[attr_name].first.should =~ /unknown isn't a valid #{attr_name}/
    end
  end
end 
```

然后你可以像这样在你的规范中调用它：

```
describe "validation" do  
  describe "#role" do
    behaves_like "attribute in collection", :role, User::ROLES
  end
end 
```

尚未对此进行测试，但我认为它应该可以工作。**

# ember.js - 如何将对象添加到与 ember 数据的 hasMany 关系

> ID：14004917
> 
> 赞同：14
> 
> 时间：2012-12-22T17:21:35.403
> 
> 标签：ember.js, ember-data

我有这两个模型：

```
App.Items = DS.Model.extend({
    provider: DS.attr('string'),
    name: DS.attr('string'),
    description: DS.attr('string'),
});

App.Baskets = DS.Model.extend({
    selectedItems: DS.hasMany('App.Items'),
    name: DS.attr('string'),
    username: DS.attr('string'),
}) 
```

现在我想做的是在用户选择它时将一个新项目添加到篮子中。我试图这样做：

```
basket = App.Baskets.find(1);
item = App.Items.find(1);
basket.set("selectedItems", item)  ; 
App.store.commit(); 
```

这不会返回任何错误，但不会触发对服务器的任何请求。

或者，我试过这个：

```
basket = App.Baskets.find(1);
selectedItems = basket.get("selectedItems")
selectedItems.pushObject(App.Items.find(1))
App.store.commit(); 
```

此方法返回错误：

```
Uncaught TypeError: Cannot call method 'indexOf' of undefined ember.js:1691
get ember.js:1691
DS.OneToManyChange.sync ember-data.js:4572
(anonymous function) ember-data.js:424
OrderedSet.forEach ember.js:1410
DS.ManyArray.DS.RecordArray.extend.arrayContentDidChange ember-data.js:423
newFunc ember.js:1167
Ember.ArrayProxy.Ember.Object.extend.arrangedContentArrayDidChange ember.js:10600
sendEvent ember.js:3792
Ember.Array.Ember.Mixin.create.arrayContentDidChange ember.js:7933
Ember.Mixin.create.replace ember.js:11011
Ember.ArrayProxy.Ember.Object.extend.replaceContent ember.js:10476
DS.ManyArray.DS.RecordArray.extend.replaceContent ember-data.js:351
newFunc ember.js:1167
Ember.ArrayProxy.Ember.Object.extend.replace ember.js:10591
Ember.MutableArray.Ember.Mixin.create.insertAt ember.js:8398
Ember.MutableArray.Ember.Mixin.create.pushObject ember.js:8450
App.Router.Ember.Router.extend.root.Ember.Route.extend.items.Ember.Route.extend.savePreferences dashboard-app.js:218
sendRecursively ember.js:17303
sendEvent ember.js:17320
Ember.StateManager.Ember.State.extend.send ember.js:17845
ActionHelper.registeredActions.(anonymous function).handler ember.js:22673
(anonymous function) ember.js:13009
Ember.handleErrors ember.js:379
(anonymous function) ember.js:13003
v.event.dispatch jquery.min.js:2
o.handle.u 
```

奇怪的是，当我尝试设置同一模型的普通属性时，比如说设置篮子的名称，一切正常。Ember 数据向服务器发出 PUT 请求，并且我的模型已更新。所以很明显，问题是当我更新关系时。我这样做是错误的方式还是余烬数据错误？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-23T09:16:57.210

您的代码失败了，因为在当前版本的 Ember Data 中，您必须为每个关系指定一个逆向关系。

```
App.Item = DS.Model.extend({
    provider: DS.attr('string'),
    name: DS.attr('string'),
    description: DS.attr('string'),
    basket: DS.belongsTo('App.Basket')
});

App.Basket = DS.Model.extend({
    items: DS.hasMany('App.Item'),
    name: DS.attr('string'),
    username: DS.attr('string'),
})

basket = App.Basket.find(1);
basket.get("items").pushObject(App.Item.find(1));
App.store.commit(); 
```

查看 Github 上的问题以获取更多详细信息。

特别是关于与 inverse:null 和 manyToMany 关系的 WIP。

# java - asm 3.1 和 org.eclipse.persistence.asm-2.3.2.jar (jersey-moxy 1.15) 的兼容性问题

> ID：14004924
> 
> 赞同：2
> 
> 时间：2012-12-22T17:22:45.070
> 
> 标签：java, jersey, eclipselink, jax-rs, moxy

[与ASM 3.1 和 HIbernate 和 JAX-RS](https://stackoverflow.com/questions/969693/compatibility-issue-of-asm-3-1-and-hibernate-and-jax-rs)的兼容性问题类似的问题 似乎已经击中了我：我的基于 Jersey / JPA 的休息应用程序也使用 jersey-moxy（泽西的 1.15 版）引发错误：

```
Caused by: java.lang.NoSuchMethodError: org.eclipse.persistence.internal.libraries.asm.ClassReader.accept(Lorg/eclipse/persistence/internal/libraries/asm/ClassVisitor;[Lorg/eclipse/persistence/internal/libraries/asm/Attribute;Z)V 
```

我的 Maven 依赖列表显示：

*   asm-3.1.jar
*   jersey-moxy-1.15.jar
*   org.eclipse.persistence.asm-2.3.2.jar

如果我从依赖项中删除 jersey-moxy 1.15，问题就会消失，但是我不能使用额外的 MOXy 功能。

如果排除 org.eclipse.persistence.asm 依赖项，我得到：

```
Internal Exception: java.lang.SecurityException: class "org.eclipse.persistence.sessions.factories.SessionManager"'s signer information does not match signer information of other classes in the same package 
```

有什么办法可以解决这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T13:42:45.313

此问题[与 ASM 3.1 和 HIbernate 和 JAX-RS 的兼容性问题不同](https://stackoverflow.com/questions/969693/compatibility-issue-of-asm-3-1-and-hibernate-and-jax-rs)。 [**EclipseLink**](http://www.eclipse.org/eclipselink/)专门提供了一个重新打包的 ASM 版本来专门避免这个问题。

我不熟悉`jersey-moxy-1.15.jar`（你能提供关于这个的更多信息吗？）。MOXy 需要以下捆绑包：

*   org.eclipse.persistence.moxy_2.4.1.v20121003-ad44345.jar
*   org.eclipse.persistence.core_2.4.1.v20121003-ad44345.jar
*   org.eclipse.persistence.asm_3.3.1.v201206041142.jar

如果您使用 MOXy 进行 JSON 绑定（请参阅[http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html](http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html)），那么您还需要以下捆绑包：

*   org.eclipse.persistence.antlr_3.2.0.v201206041011.jar

# ios - 为什么 Xcode 不将某些工件作为文件夹上下文提交的一部分提交？

> ID：14004926
> 
> 赞同：2
> 
> 时间：2012-12-22T17:22:56.963
> 
> 标签：ios, xcode, git

在 Xcode 中，我创建了一个新项目，并在向导中选择创建一个 git 存储库。向导完成后，所有工件都已提交到 git。

正如我一直在编辑的那样，每当我右键单击项目导航器中的顶部/第一个黄色文件夹并选择“源代码管理 > 提交选定文件”时，某些文件类型（.storyboard、main.m、.xcdatamodeld）不能从显示的提交窗口提交。

项目管理器在所有这些文件的右侧显示“M”图标，因此它知道它们已被修改。此外，如果我右键单击单个文件并进行提交，它允许我提交。

我正在使用 Xcode v4.5.2。

两个问题：

1.  为什么它在提交窗口中列出了“.storyboard”，但不允许我选择它进行提交？

2.  为什么其他文件（main.m、.xcdatamodeld）甚至没有显示在提交窗口中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T15:42:05.427

使用“文件”菜单中的“源代码管理 -> 提交...”或 Option-Command-C，您将能够提交 .storyboard 以及项目中的其他文件。

上下文菜单“提交选定的文件...”似乎只允许使用在进入提交窗口之前明确选择的文件。即使它显示已修改的文件，您也无法选择它们。

# javascript - 如何在 JSON 字符串中包含 Javascript 字符串构造函数？

> ID：14004929
> 
> 赞同：4
> 
> 时间：2012-12-22T17:24:02.033
> 
> 标签：javascript, jquery, html, json

我正在为 Jquery Mobile 列表视图构建一个模板。为了使模板完全通用，我需要传递 listitem 文本。所以目前我的列表视图配置如下所示：

```
<ul data-role="listview" data-create="false" class="template" data-config='{
    "type":"listview",
    "data":"getRetailers",
    "custom_classes":["embedded_filter updateResults f-875","nMT pickList f-875 widget_listview","f-n",""],
    "lib":"static_listview.html",
    "tmp":"tmp_listview_inset",
    "lang":"locale_search",
    ...
    }'></ul> 
```

我的问题是如何为列表项文本包含一个 Javascript 构造函数。这应该是以下内容：

```
inv.company+', '+ inv.zip + ', ' + inv.city 
```

但是像这样插入它：

```
...
"text":"inv.company+', '+ inv.zip + ', ' + inv.city"
} 
```

不起作用。

**问题**：
如何在 JSON 中包含 Javascript 构造函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T17:38:14.963

试试这个代码：

```
"text":"'"+ inv.company+ "', '"+ inv.zip + "','" + inv.city+ "'"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T17:56:15.010

行。不好，但工作：

1) 在我的 JSON 中，我只传递一个函数名，如下所示：

```
<ul data-role="listview" data-create="false" class="template" data-config='{  
    "type":"listview",
    "data":"getRetailers",
    "custom_classes":["embedded_filter updateResults f-875","nMT pickList f-875 widget_listview","f-n",""],
    "lib":"static_listview.html",
    "tmp":"tmp_listview_inset",
    "lang":"locale_search",
    "text":"buildRetailers",
    ...
}'></ul> 
```

2）然后在我的脚本中我添加`buildRetailers`到我的`dynoData`模块中：

```
var dynoData = {
    ...
    buildRetailers: function (inv) {
        return inv.company+', '+ inv.zip + ', '+ inv.city;
    },
    ...
} 
```

3）并从我的列表视图字符串生成器中调用它：

```
....
listItem = listItem.replace( widget.options.re_theme, li_theme );
listItem = listItem.replace( widget.options.re_iconpos, li_iconpos );
listItem = listItem.replace( widget.options.re_icon, li_icon );
// call the function to return the list item text
listItem = listItem.replace( widget.options.re_text, dynoData[ li_text ](inv) ); 
```

所以我似乎无法在 JSON 配置中传递函数字符串，所以我需要添加一个函数来构造我需要的东西。如果有人知道更好的方法，请发布。我会测试和检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T18:18:35.457

你不能只传递 inv 对象的对象文字版本是什么。

```
"text" : {
    "company": "some value here",
    "zip": "another value here",
    "city": "another value"
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-22T17:29:27.707

通常你会这样做：

```
"text": function(){ return inv.company+', '+ inv.zip + ', ' + inv.city } 
```

但我不确定它是否有效。无论如何你都可以试试。

# sql-server - 电子邮件地址作为用户名 BUG

> ID：14004930
> 
> 赞同：12
> 
> 时间：2012-12-22T17:24:39.400
> 
> 标签：sql-server, asp.net-mvc

我正在开发一个带有 SQL Server 数据库的 MVC4 网站。我想用他们的电子邮件地址注册人。

但是，如果电子邮件地址包含该字符`i`，则`WebSecurity.CreateUserAndAccount`方法会抛出异常：

> *身份验证提供程序返回错误。请验证您的输入并重试。如果问题仍然存在，请联系您的系统管理员。*

我研究了很多，找到了一些关于它的帖子，但没有解决方案。

[http://forums.asp.net/t/1862233.aspx/1?How+can+i+use+email+address+for+username+in+MVC4+Membership](http://forums.asp.net/t/1862233.aspx/1?How+can+i+use+email+address+for+username+in+MVC4+Membership)

[http://aspnetwebstack.codeplex.com/workitem/714](http://aspnetwebstack.codeplex.com/workitem/714)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T20:05:33.007

您的基本问题是您试图输入非 ASCII 字符作为电子邮件地址。

“ASCII 字符集”将您限制为美国英语字母表，恰好是拉丁字母表。

[我不会说土耳其语，但正如http://aspnetwebstack.codeplex.com/workitem/714](http://aspnetwebstack.codeplex.com/workitem/714)中指出的那样

在土耳其语中，“i”是小写，而“İ”是“i”的大写。
在您（和我）碰巧没有 IT 方面的拉丁字母表中，“i”是小写字母，而“I”是 i 的大写字母。

所以你有一个字符不是 EN-US ASCII 字符集的成员。
因此，排序规则设置会阻止您将非 ASCII 字符输入到数据库中，从而导致错误。
因此，您不应更改排序规则设置的评论（这将允许无效的邮件地址）。

正如所指出的，ToUpper（应该是 ToUpperInvariant）是罪魁祸首，因为它在幕后将 'i' 更改为 'İ'，这不是有效的 ASCII 字符。

这是字符串/字符的 ToUpper 方法的常见问题。
例如，德语字母表包含字母 ß（Unicode U+00DF），也称为“双 s”，它首先没有对应的大写字符，因此如果您尝试使用 toUpper 比较字符串，它总是会失败，这就是为什么你应该总是使用 ToLower() 来比较字符串 - 另一个微软失败了。

ToUpper 也发生了类似的事情。

您首先需要做的是确保您的用户输入 ASCII 字符。
这是不可能的，因为他们有土耳其语键盘和语言环境，虽然小 i 看起来与 ASCII 小 i 相似，但它有不同的数字表示，因此有不同的大写字符（顺便说一句，小写也是）。

因此，在调用成员资格方法之前，您需要做的是“拉丁化/罗马化”您的输入字符串。

我在使用第三方提供的仅支持 ASCII 的软件时遇到了类似的问题，该软件在变音符号和法语重音字符上失败，并使用以下方法解决了这个问题。
您可能想检查土耳其 äöü 是否与我在这里使用的（瑞士）德语 äöü 没有不同的数字表示。

有关风险和副作用，请阅读包装说明书并咨询您的医生或药剂师。

```
 // string str = ApertureSucks.Latinize("(æøå âôû?aè");
    public static string Latinize(string stIn)
    {
        // Special treatment for German Umlauts
        stIn = stIn.Replace("ä", "ae");
        stIn = stIn.Replace("ö", "oe");
        stIn = stIn.Replace("ü", "ue");

        stIn = stIn.Replace("Ä", "Ae");
        stIn = stIn.Replace("Ö", "Oe");
        stIn = stIn.Replace("Ü", "Ue");
        // End special treatment for German Umlauts

        string stFormD = stIn.Normalize(System.Text.NormalizationForm.FormD);
        System.Text.StringBuilder sb = new System.Text.StringBuilder();

        for (int ich = 0; ich < stFormD.Length; ich++)
        {
            System.Globalization.UnicodeCategory uc = System.Globalization.CharUnicodeInfo.GetUnicodeCategory(stFormD[ich]);

            if (uc != System.Globalization.UnicodeCategory.NonSpacingMark)
            {
                sb.Append(stFormD[ich]);
            } // End if (uc != System.Globalization.UnicodeCategory.NonSpacingMark)

        } // Next ich

        //return (sb.ToString().Normalize(System.Text.NormalizationForm.FormC));
        return (sb.ToString().Normalize(System.Text.NormalizationForm.FormKC));
    } // End Function Latinize 
```

最后但同样重要的是，我不会使用内置的 ASP.NET 成员资格提供程序，因为它通过用户名 + 应用程序名将表连接到角色名，而不是使用唯一的 id。这意味着您将无法在不更改所有映射表的情况下更改用户或组/角色名称。我认为这样做是非常不可取的，而且绝对是愚蠢和粗心的，如果不是微软的完全危险的话。
我什至会说将这些垃圾释放到野外是无礼的。

下面的“东西”展示了这个问题的完全愚蠢，不应该被使用

```
CREATE TABLE [dbo].[UsersInRoles](
    [Username] [varchar](255) NOT NULL,
    [Rolename] [varchar](255) NOT NULL,
    [ApplicationName] [varchar](255) NOT NULL,
 CONSTRAINT [usersinroles_pkey] PRIMARY KEY CLUSTERED 
(
    [Username] ASC,
    [Rolename] ASC,
    [ApplicationName] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

原因如下：

*   问题 1：字符串连接会使用户加入角色非常慢 - 对性能非常不利
*   问题 2：varchar - 应该是 nvarchar，除非你生活在一个只有英语的世界里
*   问题3：字段用户名和角色名的长度必须符合最新活动目录的最小规格，否则与活动目录同步会出现问题。Plus Active Directory 允许使用 Unicode 字符。
*   问题 4：没有对用户和角色表的外键引用 - 迟早会出现数据垃圾（通常更快）
*   问题 5：如果现在您更改用户名或组名，UserInRoles 将不会更新，并且用户的组映射将孤立 - 最终导致数据垃圾，左连接将带来空列，程序可能由于未处理的 NullReferenceException 而崩溃。
*   问题6：由于缺少外键引用，可以更改用户名/组名
*   问题7：数据垃圾迟早会导致上报/显示数据时出现多行
*   问题8：这里使用的主键应该是唯一约束
*   问题 9：只有一个组名，但例如组“管理员”需要本地化为多种语言，而成员资格提供者不支持。另外，组名属于一个映射表，因为一个组可以有N种语言的N个名称，因此必须确保组名在特定语言中是唯一的。
*   问题 10：此处不可见，但用户表包含字段电子邮件。这是一个彻底的失败，因为一个用户可以拥有 n 个电子邮件地址，而聪明的会员提供商应该考虑到这一点，而不是愚蠢地将用户限制为一个电子邮件地址。
*   问题 11：另外，提到的电子邮件字段限制为 128 个字符，这小于 rfc 中允许的电子邮件地址中允许的最大字符数。失败 - 迟早会有人无法输入他的邮件地址 - 即使他只有一个。[有效电子邮件地址的最大长度是多少？](https://stackoverflow.com/questions/386294/maximum-length-of-a-valid-email-address)

而且我确信 MS 提供的会员服务提供商的惨败还有很多问题。例如，使用快速散列算法 (MD5)，这是这种情况下的反模式，因为它允许彩虹表攻击，尤其是在散列未加盐的情况下。如果 MS 会员提供者展示了一件事，那么这就是不设计会员提供者的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-18T09:51:25.993

是的，解决方案是在创建用户和帐户时使用**ToUpperInvariant() WebSecurity.CreateUserAndAccount(** **model.UserName.ToUpperInvariant());** . 这将解决问题。值将以大写字母 (IIIIII@GMAIL.COM) 存储到表中。

# php - Jpgraph：如何在 php 中为组条形柱形图设置标签

> ID：14004932
> 
> 赞同：2
> 
> 时间：2012-12-22T17:24:50.320
> 
> 标签：php, jpgraph

这是我的 jpgraph 演示代码：

```
<?php // content="text/plain; charset=utf-8"
// $Id: groupbarex1.php,v 1.2 2002/07/11 23:27:28 aditus Exp $
require_once ('jpgraph/jpgraph.php');
require_once ('jpgraph/jpgraph_bar.php');

$datay1=array(35,160,0,0,0,0);
$datay2=array(35,190,190,190,190,190);
$datay3=array(20,70,70,140,230,260);

$graph = new Graph(450,200,'auto');    
$graph->SetScale("textlin");
$graph->SetShadow();
$graph->img->SetMargin(40,30,40,40);
$graph->xaxis->SetTickLabels($gDateLocale->GetShortMonth());

$graph->xaxis->title->Set('Year 2002');
$graph->xaxis->title->SetFont(FF_FONT1,FS_BOLD);

$graph->title->Set('Group bar plot');
$graph->title->SetFont(FF_FONT1,FS_BOLD);

$bplot1 = new BarPlot($datay1);
$bplot2 = new BarPlot($datay2);
$bplot3 = new BarPlot($datay3);

$bplot1->SetFillColor("orange");
$bplot2->SetFillColor("brown");
$bplot3->SetFillColor("darkgreen");

$gbarplot = new GroupBarPlot(array($bplot1,$bplot2,$bplot3));
$gbarplot->SetWidth(0.6);
$graph->Add($gbarplot);

$graph->Stroke();
?> 
```

此代码没有错误，并且运行良好...我的问题是如何为这个多条设置标签以进行识别...

我怎样才能设置一个标签..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T11:04:37.147

```
$graph->legend->SetPos(0.5,0.98,'center','bottom');
$bplot1->SetLegend("Pass");
$bplot2->SetLegend("---");
$bplot3->SetLegend("---");

$gbarplot = new GroupBarPlot(array($bplot1,$bplot2,$bplot3));
$gbarplot->SetWidth(0.6);
$graph->Add($gbarplot);

$graph->Stroke(); 
```

在你的代码中写下这一行。有关更多信息，请参阅此网址：

[类参考](http://jpgraph.net/download/manuals/classref/Legend.html)

[举例](http://jpgraph.net/download/manuals/chunkhtml/ch14s04.html)

# java - 将大流转换为字符串时内存不足

> ID：14004933
> 
> 赞同：3
> 
> 时间：2012-12-22T17:25:09.133
> 
> 标签：java, android, memory, heap-memory, inputstreamreader

我正在尝试将大流（4mb）转换为字符串，我最终将其转换为 JSON 数组。

当流大小很小（以 KB 为单位）时，一切正常，当它开始处理 4mb 流时，它会耗尽内存

下面是我用来将流转换为字符串的方法，我几乎尝试了所有方法，我怀疑问题出在 while 循环上。有人可以帮忙吗？

```
 public String convertStreamToString(InputStream is)
            throws IOException {

        if (is != null) {
            Writer writer = new StringWriter();

            char[] buffer = new char[1024];
            try
            {
                Reader reader = new BufferedReader(
                        new InputStreamReader(is, "UTF-8"));
                int n;
                while ((n = reader.read(buffer)) != -1) 
                {
                    writer.write(buffer, 0, n);
                }
            }
            finally 
            {
                is.close();
            }
            return writer.toString();
        } else {       
            return "";
        }
    } 
```

* * *

更新：好的，这是我目前到达的地方，我在正确的轨道上吗？我想我已经接近了..不确定我还能关闭或刷新什么来恢复记忆..

```
public String convertStreamToString(InputStream is)
        throws IOException {

    String encoding = "UTF-8";
    int maxlines = 2000;
    StringWriter sWriter = new StringWriter(7168);
    BufferedWriter writer = new BufferedWriter(sWriter);
    BufferedReader reader = null;
    if (is == null) {
        return "";
    } else {     

        try {
            int count = 0;
            reader = new BufferedReader(new InputStreamReader(is, encoding));
            for (String line; (line = reader.readLine()) != null;) {
                if (count++ % maxlines == 0) {
                    sWriter.close();
                    // not sure what else to close or flush here to regain memory
                    //Log.v("Max Lines Reached", "Max Lines Reached");;
                }

                writer.write(line);

            }
            Log.v("Finished Loop", "Looping over");

    } finally {
        is.close();
        writer.close();

    }
        return writer.toString();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T18:21:39.543

`StringWriter`写入到`StringBuffer`内部。A`StringBuffer`基本上是一个`char`数组的包装器。那阵有一定的容量。当该容量不足时，`StringBuffer`将分配一个新的更大的`char`数组并复制前一个的内容。最后调用`toString()`StringWriter，它将再次将数组的内容复制`char`到`char`结果字符串的数组中。

如果您有任何方法事先知道所需的容量是多少，您应该使用 StringWriter 的构造函数来设置初始容量。这将避免不必要地复制数组以增加缓冲区。

然而，这并不能避免发生在`toString()`. 如果您正在处理可能很大的流，您可能需要重新考虑是否真的需要该输入流作为`String`. 直接使用足够大的`char`数组将避免所有复制，并会大大减少内存使用。

最终的解决方案是在所有输入进入之前对输入进行一些处理，以便可以丢弃已处理的字符。这样，您只需要在内存中保存与处理步骤所需的一样多的内存。

# ruby-on-rails - 从本地网络访问 Webrick Rails Server

> ID：14004934
> 
> 赞同：0
> 
> 时间：2012-12-22T17:25:42.567
> 
> 标签：ruby-on-rails, webrick, windows-firewall

您好，我正在尝试将我在 ubuntu 上启动的 Webrick rails 服务器访问到本地的 Windows 7 电脑。我在我的虚拟框中检查了 ifconfig 并在运行我的 rails 服务器时使用了 inet:10.0.2.15 并且还像这样使用了端口 80：

```
rails server -b 10.0.2.15 -p 80 
```

它没有在终端中给我一个错误，但是当我尝试在我的 Windows 浏览器上转到 10.0.2.15 时，它说它无法连接。我尝试在 Windows 中禁用防火墙，但仍然无法正常工作。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T17:42:16.100

为您的 VM ubuntu 选择另一种网络类型。我建议桥接网络。重新启动 vm，它应该在与您的 windows 主机相同的网络中获取 ip（例如 192.168.0.XXX）。然后，您将能够从网络的任何端口 80 或 3000 访问您的 Rails 服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T17:32:49.573

您也可以通过 apache 服务器与 vm 共享您的 ubuntu 吗？开始了吗？在 Mac 中，您必须启用网络共享（或类似的措辞）。在ubuntu上，当你这样做时会发生什么`localhost:80`......如果我记得它应该说它有效！或类似的东西。

# php - CodeIgniter 分页总是显示第 1 页

> ID：14004940
> 
> 赞同：0
> 
> 时间：2012-12-22T17:26:46.630
> 
> 标签：php, codeigniter

我已经在近十个模块中使用了分页库，没有问题，但在最后一个（也是最重要的）中失败了。

我这部分的路线是：

`$route['candidate/sort/(:any)/(:any)/page/(:num)'] = 'candidate/sort/$1/$2/$3';`

我的控制器

```
public function sort($type, $id, $page = 1) {
    /* Load Config */
    $data = $this->data;
    $data['sub_active'] = 'candidate';
    $data['type'] = $type;
    /* Get Candidates */
    $total = $this->candidates->getTotal($type, $id);
    if(($this->limit >= $total) && ($page > 1)) {
        $data['candidates'] = $this->candidates->getCandidates(1, $this->limit, $type, $id);
    }elseif(((($this->limit * $page) - $this->limit) >= $total) && ($page > 1)) {
        $data['candidates'] = $this->candidates->getCandidates(ceil($total / $this->limit), $this->limit, $type, $id);
    }else{
        $data['candidates'] = $this->candidates->getCandidates($page, $this->limit, $type, $id);
    }
    /* Pagination */
    $this->load->library('pagination');
    # Config Pagination
    $data['cms']['tables']['total_rows'] = $total;
    $data['cms']['tables']['per_page'] = $this->limit; 
    $data['cms']['tables']['first_url'] = base_url($data['sub_active'].'/sort'.'/'.$type.'/'.$id);
    $data['cms']['tables']['base_url'] = base_url($data['sub_active'].'/sort'.'/'.$type.'/'.$id.'/page');
    $data['page'] = $page;
    $data['total_pages'] = ceil($total / $this->limit);
    $data['total'] = $total;
    # Initialize Pagination
    $this->pagination->initialize($data['cms']['tables']); 
    $data['pagination'] = $this->pagination->create_links();
    /* Display Template */
    $this->twig->display('pages/list_candidate.htm', $data);
} 
```

基本第一个 url =`myweb.com/candidate/sort/$type/$id`和基本 url =`myweb.com/candidate/sort/$type/$id/page`

但是分页不起作用，它总是在同一页（本例为第 1 页）。我在其他控制器中使用相同的模式，它工作正常，只是失败了。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T18:13:45.877

我终于找到了答案：

`$config['uri_segment'] = 6;`

那是因为 codeigniter 不能很好地检测 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-06T13:48:28.063

很好，我很高兴你找到了 Tunnecino 的答案！但我认为它需要进一步解释，为什么

根据我们[精彩的 CI 用户指南](http://ellislab.com/codeigniter/user-guide/libraries/uri.html)，这是我们确定 uri_segment 的方法，以免再次犯同样的错误 :)

```
$this->uri->segment(n) 
```

允许您检索特定段。其中 n 是您要检索的段号。段从左到右编号。例如，如果您的完整 URL 是这样的：

```
http://example.com/index.php/news/local/metro/crime_is_up 
```

段号是这样的：

```
1.news

2.local

3.metro

4.crime_is_up 
```

默认情况下，如果段不存在，该函数将返回 FALSE（布尔值）。如果段丢失，则有一个可选的第二个参数允许您设置自己的默认值。例如，这将告诉函数在失败时返回数字零：

```
$product_id = $this->uri->segment(3, 0); 
```

# visual-studio-2012 - StubObserver：如何验证是否使用正确的参数调用了存根方法？

> ID：14004941
> 
> 赞同：0
> 
> 时间：2012-12-22T17:27:08.493
> 
> 标签：visual-studio-2012, microsoft-fakes

我参考了 Peter Provost 的这篇文章：

[Visual Studio 2012 Fakes - 第 3 部分 - 观察存根行为](http://www.peterprovost.org/blog/2012/11/29/visual-studio-2012-fakes-part-3/)

问题是我是否以及如何验证该方法是否使用定义的参数调用？例如像这样的东西：

```
var wasCalled = observer.GetCalls().Any(call => call.StubbedMethod.Name == methodName && call.StubMethod.Parameter == "Hello there!"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T01:29:14.093

我认为这就是你所需要的。

var wasCalled = observer.GetCalls().Any(call => call.StubbedMethod.Name == methodName && (string)call.GetArguments() == "你好！");

HTH Patrick Tseng Microsoft ALM 团队

# javascript - 闭包编译器中的递归类型

> ID：14004943
> 
> 赞同：1
> 
> 时间：2012-12-22T17:27:42.560
> 
> 标签：javascript, google-closure-compiler

有没有办法在闭包编译器的类型语法中定义[递归类型？](http://en.wikipedia.org/wiki/Recursive_data_type)换句话说，我可以定义一个在其定义中包含自身的类型吗？

```
/**
 * A node on the tree.
 * @type {{left: (Tree|null)}}
 */
var Tree = {
    left: null
}; 
```

（旁注：是的，树的这个定义是错误的）

尽管上面通过简单的优化进行编译，但它会因高级抛出以下错误而失败：

> JSC_TYPE_PARSE_ERROR：错误的类型注释。第 3 行字符 17 处的未知类型树 * @type {{left: (Tree|null)}}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T23:00:29.133

/** * @typedef{{left:Tree}} */ var Tree;

或者

/** * @interface */ var Tree =function(){}

/** @type {Tree} */ Tree.prototype.left;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T18:05:26.587

只是一个猜测，但你能把类型放在左边吗？

```
/**
 * Not sure what goes here
 */
var Tree = {
    /**
     * @type {Tree}
     */
    left: null
}; 
```

你也不需要一个类型的构造函数

```
/**
 * @constructor
 */
var Tree = function(){

    this.left = new Tree()
};

/**
 * @type {Tree}
 */
Tree.prototype.left = null; 
```

就像你知道的，如果你实例化类型，你现在有无限递归

```
var test = new Tree(); 
```

# algorithm - 对超集进行分区并获取每个分区的原始集列表

> ID：14004945
> 
> 赞同：2
> 
> 时间：2012-12-22T17:27:55.797
> 
> 标签：algorithm, python-3.x, categories, categorization

# 介绍

在尝试对图中的节点进行一些分类（将呈现不同）时，我发现自己面临以下问题：

# 问题

给定一个元素的超集及其`S = {0, 1, ... M}`许多**不相交的**子集，其中，找出集合的划分的最佳算法是什么？`n`**`T_i``0 <= i < n``S``P`**

 **`P = S`是原始超集的所有**不相交**分区的并集，其中，对于所有元素，每个“原始”集合中的“父”列表都相同。`P_j``S``0 <= j < M``x in P_j``x``T_i`

# 例子

```
S = [1, 2, 3, 4, 5, 6,   8, 9]

T_1 = [1, 4]
T_2 = [2, 3]
T_3 = [1, 3, 4] 
```

所以所有`P_j`的 s 都是：

```
P_1 = [1, 4] # all elements x have the same list of "parents": T_1, T_3
P_2 = [2] # all elements x have the same list of "parents": T_2
P_3 = [3] # all elements x have the same list of "parents": T_2, T_3
P_4 = [5, 6, 8, 9] #  all elements x have the same list of "parents": S (so they're not in any of the P_j 
```

# 问题

1.  python 包中有哪些好的函数/类来计算所有`P_j`s**及其**“父母”列表，理想情况下仅限于`numpy`and `scipy`？也许已经有一个功能可以做到这一点
2.  找到这些分区**以及**每个分区`P_j`的“父母”列表的最佳算法是什么？让我们注意**`T_0 = S`**

 ***我认为*蛮力方法是生成所有 2 个集合的组合`T`并将它们分成最多 3 个不相交的集合，这些集合将被添加回`T`集合池，然后重复该过程直到所有结果`T`s 不相交，因此我们已经得到了我们的答案——`P`集合。一个小问题可能是在途中缓存所有“父母”。

*我怀疑*可以使用*动态编程*方法来优化算法。

*注意：我很想用乳胶（通过MathJax）编写数学部分，但不幸的是这没有被激活**:-(***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T23:08:30.657

我这样做的方法是构造一个`M × n`布尔数组`In`where . 您可以在 中构造它，前提是您可以通过扫描所有集合并在中标记相应位来将元素映射到其整数索引中。`In(i, j) = S[i] ∈ T[j]``O(Σ[j]|T[j]|)``S``O(1)``T``In`

然后，您可以通过将行连接成二进制位数来`i`直接读取每个元素的“签名” 。签名正是你正在寻找的分区的等价关系。`In``i``n`

顺便说一句，关于数学标记，我完全同意你的看法。也许是时候发起一场新的竞选活动了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T23:01:12.497

以下应该是线性时间（以 s 中的元素数量计`T`）。

```
from collections import defaultdict

S = [1, 2, 3, 4, 5, 6,   8, 9]

T_1 = [1, 4]
T_2 = [2, 3]
T_3 = [1, 3, 4]

Ts = [S, T_1, T_2, T_3]

parents = defaultdict(int)
for i, T in enumerate(Ts):
    for elem in T:
        parents[elem] += 2 ** i

children = defaultdict(list)
for elem, p in parents.items():
    children[p].append(elem)

print(list(children.values())) 
```

结果：

```
[[5, 6, 8, 9], [1, 4], [2], [3]] 
```****

# android - 未保存在 onSaveInstanceState 中的字段

> ID：14004948
> 
> 赞同：0
> 
> 时间：2012-12-22T17:28:00.483
> 
> 标签：android, android-progressbar

我正在阅读`ProgressBar`源代码并达到`onSaveInstanceState`：

```
public Parcelable onSaveInstanceState() {
    // Force our ancestor class to save its state
    Parcelable superState = super.onSaveInstanceState();
    SavedState ss = new SavedState(superState);

    ss.progress = mProgress;
    ss.secondaryProgress = mSecondaryProgress;

    return ss;
} 
```

可以看出，只保存了`progress`and`secondaryProgress`字段，那么用户可以设置的所有其他字段会发生什么，例如`max`？为什么他们也没有得救？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T17:31:50.053

用户不能`android:max`直接通过小部件进行设置。

一般来说，`onSaveInstanceState()`倾向于担心用户可变状态，例如是否`CompoundButton`检查 a ，或者在运行时由于用户操作而极有可能发生变化的状态，例如 a 的进度状态`ProgressBar`。

当然，欢迎您`ProgressBar`使用`onSaveInstanceState()`保存您想要的其他数据的 subclass 或 fork ，或者让您的活动或片段在其实现中保存数据`onSaveInstanceState()`。

# javascript - javascript 使用 if 语句禁用文本框

> ID：14004950
> 
> 赞同：1
> 
> 时间：2012-12-22T17:28:15.313
> 
> 标签：javascript

我正在尝试使用 javascript 来检测“remote_server”是否设置为 0，如果是则禁用文本框“ftp_hostname”。如果我取消注释它可以工作的警报，但是该字段仍然没有被禁用。

文本框：

```
<label for="ftp_hostname">
FTP Hostname
</label>
<input type="text" value="<?php echo $row['ftphost']; ?>" class="required" name="ftp_hostname" class="text"> 
```

Javascript：

```
var e = document.getElementsByName("remote_server")[0]
var strUser = e.options[e.selectedIndex].value;

if ( strUser == 0 ) {
document.getElementsByName("ftp_hostname")[0].disabled
//alert("selected!");
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T17:31:28.087

尝试使用

```
document.getElementsByName("ftp_hostname")[0].setAttribute("disabled", "disabled"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T17:30:49.923

你必须添加`=true`

```
document.getElementsByName("ftp_hostname")[0].disabled=true; 
```

# html - TD 内容上的 CSS 选择器

> ID：14004954
> 
> 赞同：3
> 
> 时间：2012-12-22T17:28:31.623
> 
> 标签：html, css, css-selectors

我有一张表，其 TD 包含普通文本。有没有办法根据 TD 的内容在 TD 上设置样式（例如设置背景颜色）？例如，我可能希望 GO 有绿色背景，而 RED 应该有红色背景。

我试过这些但没有成功：

```
td[innerText='GO']
td[innerHtml='GO']
td[outerText='GO'] 
```

当然，我可以根据其内容为每个 TD 设置一个类或显式样式，但我宁愿避免这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T17:31:20.000

您必须使用 javascript 检查内容，然后更改`td`标签的样式。

您可能在文件中有一个函数`script.js`：

```
function tdStyle(current_table) {

    var tds = current_table.getElementsByTagName("td");

    for (i = 0; i < tds.length; i++) {

        if (tds[i].textContent == "string1" || tds[i].innerText == "string1") {
            tds[i].style.backgroundColor = "green";
        } else if (td_tag.textContent == "string2" || tds[i].innerHTML == "string2") {
            tds[i].style.backgroundColor = "red";
        } else if (td_tag.textContent == "string3" || tds[i].innerHTML == "string3") {
            tds[i].style.backgroundColor = "blue";
        }

    }

} 
```

然后你在你的`table`标签中使用这个函数，比如：

```
<table onload="tdStyle(this);">
<tr><td>...</td></tr>
<tr><td>...</td></tr>
<tr><td>...</td></tr>
...
</table> 
```

请注意，比较是用`tds[i].textContent`和进行`tds[i].innerText`的，因为后者是 IE 所必需的。

# cocoa-touch - UIPageViewController PageCurl 一次滚动一页

> ID：14004956
> 
> 赞同：0
> 
> 时间：2012-12-22T17:28:38.133
> 
> 标签：cocoa-touch, scroll, uikit, uipageviewcontroller, page-curl

用户滑动到页面（PageCurl 效果）后，我想禁用滑动到下一页，直到他在当前页面上执行某些操作。我在 viewDidAppear 方法中有 [self checkScrolling]；这实际上有效，但有延迟。如果我以正常速度滑动页面，一切正常（它被调用），但如果我连续几次快速滑动，页面会滚动，但不会调用方法。

关于在获得许可之前只允许滚动一页的方式的任何建议允许滚动到他下一个？

贾尼斯

# android - 使用 GCM 以阿拉伯语发送通知

> ID：14004960
> 
> 赞同：5
> 
> 时间：2012-12-22T17:29:11.873
> 
> 标签：android, asp.net, google-cloud-messaging

我正在使用 GCM 向 android 设备发送通知。

我用来在 GCMIntentService 中获取消息的代码如下：

```
@Override
    protected void onMessage(Context ctx, Intent intent) {
        // TODO Auto-generated method stub
        String j =intent.getStringExtra("message");
        generateNotification(ctx, j);
    } 
```

我在服务器端用来推送或发送这些通知的代码如下：

```
Dim request As WebRequest = WebRequest.Create("https://android.googleapis.com/gcm/send")
request.Method = "POST"
request.ContentType = "application/x-www-form-urlencoded"
request.Headers.Add("Authorization: key=AIzaSyA47-XMaePL1mmI0P1yQ9V4sntMVn9q-1o")
request.Headers.Add("Sender: id=648406549877")
Dim collapsKey = Guid.NewGuid.ToString("n")
Dim postdata As String = "registration_id=" + regid_String_reveived_from_device_after_registering_with_GCM + "&data.message=" + TextBox1.Text + "&collapse_key=" + collapsKey
Dim byteArray As Byte() = Encoding.UTF8.GetBytes(postdata)
request.ContentLength = byteArray.Length
Dim dataStream As Stream = request.GetRequestStream
dataStream.Write(byteArray, 0, byteArray.Length)
dataStream.Close()
Dim resposne As WebResponse = request.GetResponse
Dim dataresponse As Stream = resposne.GetResponseStream
Dim reader As New StreamReader(dataresponse)
Dim sResponseFromServer As String = reader.ReadToEnd
Label2.Text = sResponseFromServer
reader.Close()
dataresponse.Close()
resposne.Close 
```

当我使用上面的代码以英语发送任何通知时，我在设备中收到它完全没有问题，但是当我使用上面的代码以阿拉伯语发送通知时，我没有收到任何消息，在两个 Logcat 中都显示为空白和通知。我用来开发这个应用程序的 android API 是 16。

那么我怎样才能得到用阿拉伯语写成的消息作为通知，就像我用英语发送这些消息一样。

是来自 ASP.Net 端还是 android 端的问题。

任何帮助或重定向将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T00:21:45.787

我通过执行以下操作解决了我面临一周的上述问题：

我从 ASP.net 端发送的消息表示为`TextBox1.Text`放置在请求的正文中，它需要进行 URL 编码，因为我只是对`TextBox1.Text`解决我的问题的值进行了编码，并让我的 android 应用程序接收到阿拉伯语的通知：

我只改变了我的 asp.net 代码：

```
Dim postdata As String = "registration_id=" + regid(i) + "&data.message=" + TextBox1.Text + "&collapse_key=" + collapsKey 
```

要像下面这样：

```
Dim postdata As String = "registration_id=" + regid(i) + "&data.message=" + HttpUtility.UrlEncode(TextBox1.Text) + "&collapse_key=" + collapsKey 
```

并保留我的android代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T17:56:33.983

您的问题似乎是您的请求未正确编码。Google[在其 Google Maps API 中有一篇文章](https://developers.google.com/maps/documentation/webservices/#BuildingURLs)概述了应该如何构建 URL。简而言之，请求应该是 UTF-8 编码的（尽管空格可能是`+`）。

一个片段：

> 所有要进行 URL 编码的字符都使用一个`%`字符和一个与它们的 UTF-8 字符相对应的两个字符的十六进制值进行编码。例如，UTF-8 中的上海+中国将被 URL 编码为`%E4%B8%8A%E6%B5%B7%2B%E4%B8%AD%E5%9C%8B`. 该字符串`? and the Mysterians`将被 URL 编码为`%3F+and+the+Mysterians`.

该文章指向[此 Wikipedia 文章](http://en.wikipedia.org/wiki/URL_encoding)，其中可以找到有关百分比编码的详细信息。

[GCM 架构概述](http://developer.android.com/google/gcm/gcm.html#request)没有提到上述任何内容，但它确实特别概述了：

> HTTP 标头必须包含以下标头：
> 
> *   `Authorization: key=YOUR_API_KEY`
> *   `Content-Type: application/json`对于 JSON；`application/x-www-form-urlencoded;charset=UTF-8`对于纯文本。

您可能需要考虑更改`Content-Type`标头以相应地指定`charset=UTF-8`和编码您的请求。或者，您可以尝试不编码您的请求并尝试使用其他字符集，例如[ISO-8859-6](http://www.charset.org/charactersets.php?charset=iso-8859-6)。

# python - 在 python 脚本中拥有漂亮的打印选项

> ID：14004961
> 
> 赞同：-1
> 
> 时间：2012-12-22T17:29:18.810
> 
> 标签：python, string, pretty-print

我正在向文件输出相当大的 XML 结构，我希望用户能够启用/禁用漂亮的打印。

我正在处理大约 150MB 的数据，当我尝试`xml.etree.ElementTree`从它的元素对象构建树结构时，它使用了非常多的内存，所以我通过存储原始字符串并通过`.write()`. 我的输出序列如下所示：

```
ofile.write(pretty_print(u'\
\t\t<LexicalEntry id="%s">\n\
\t\t\t<feat att="languageCode" val="cz"/>\n\
\t\t\t<Lemma>\n\
\t\t\t\t<FormRepresentation>\n\
\t\t\t\t\t<feat att="writtenForm" val="%s"/>\n\
\t\t\t\t</FormRepresentation>\n\
\t\t\t</Lemma>\n\
\t\t\t<Sense>%s\n' % (str(lex_id), word['word'], '' if word['pos']=='' else '\n\t\t\t\t<feat att="partOfSpeech" val="%s"/>' % word['pos']))) 
```

在`.write()`我调用我的函数`pretty_print` 中，根据命令行选项，应该删除所有制表符和换行符

```
o_parser = OptionParser()
# ....
o_parser.add_option("-p", "--prettyprint", action="store_true", dest="pprint", default=False)
# ....

def pretty_print(string):
    if not options.pprint:
        return string.strip('\n\t')
    return string 
```

我写了“应该”，因为它没有，在这种特殊情况下，它不会删除任何字符。

但在这种情况下，它工作正常：

```
for ss in word['synsets']:
    ofile.write(pretty_print(u'\t\t\t\t<Sense synset="%s-synset"/>\n' % ss)) 
```

我想到的第一件事是替换可能存在一些问题，但是当我在`pretty_print` 函数内打印传递的字符串时，它看起来非常好。

有什么建议可能导致`.strip()`不起作用？
或者如果有更好的方法可以做到这一点，我会接受任何建议

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T17:30:55.227

您的问题是`str.strip()`仅从字符串的开头和结尾删除。

如果要从行的开头和结尾删除它们，您要么想要`str.replace()`删除*所有*实例，要么将其拆分为行并剥离每一行。

另请注意，对于您的大量字符串，Python 支持带有三引号的多行字符串，这将使其更容易输入，并且旧样式的字符串格式`%`已被取代`str.format()`- 您可能希望在新代码中使用它.

# email - cakephp 电子邮件插件通过 imap 提取电子邮件

> ID：14004966
> 
> 赞同：0
> 
> 时间：2012-12-22T17:29:47.817
> 
> 标签：email, cakephp, imap

我正在使用[这个](https://github.com/nicolasramy/cakephp-emails-plugin)cakephp 电子邮件插件从帐户中提取电子邮件。这是我的参数

```
'datasource' => 'Emails.Imap',
'server' => 'mail.example.com',
'connect' => 'imap/novalidate-cert',
'username' => 'username',
'password' => 'password',
'port' => '143',
'ssl' => false,
'encoding' => 'UTF-8',
'error_handler' => 'php', 
```

我按照文档中的说明进行查询

```
$ticketEmails = $this->TicketEmail->find('first', array('recursive' => -1)); 
```

但是当我调试结果时，以下字段显示这样的数据

```
Array
(
    [TicketEmail] => Array
        (

. . . other fields

            [body] => CjxIVE1MPjxCT0RZPnNvbWUgbWVzc2FnZTxicj48L0JPRFk+PC9IVE1MPgo=

            [plainmsg] => IHNvbWUgbWVzc2FnZQo=

 . . . other fields
        )

) 
```

我不明白为什么它显示这些字符串，例如在电子邮件帐户的消息正文中就是这个文本`some message`。

我的蛋糕版本是1.3

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T14:09:26.567

那是[Base64](http://en.wikipedia.org/wiki/Base64)编码，看起来插件没有处理它，它只[检查`quoted-printable`格式](https://github.com/nicolasramy/cakephp-emails-plugin/blob/master/models/datasources/imap_source.php#L892)。

您可以[解码](http://php.net/base64_decode)模型中的数据，例如在[Model::afterFind()](http://book.cakephp.org/1.3/en/The-Manual/Developing-with-CakePHP/Models.html#afterfind)回调或自定义方法中，或者您可以尝试修改插件以使其返回解码后的数据（未经测试）：

```
protected function _fetchPart ($Part) {
    $data = imap_fetchbody($this->Stream, $Part->uid, $Part->path, FT_UID | FT_PEEK);
    if ($data) {
        // remove the attachment check to decode them too
        if ($Part->format === 'base64' && $Part->is_attachment === false) {
            return base64_decode($data);
        }
        if ($Part->format === 'quoted-printable') {
            return quoted_printable_decode($data);
        }
    }
    return $data;
} 
```

# iphone - 无法在 iOS 6 上的分组 UITableView 背景中删除渐变

> ID：14004971
> 
> 赞同：1
> 
> 时间：2012-12-22T17:30:15.583
> 
> 标签：iphone, uitableview, ios6

自从升级到 iOS 6 以来，我在另一个 UITableView 的 headerview 中的分组 UITableView 的背景上得到了这个奇怪的渐变（它没有相同的渐变问题）。这是它的样子：

![在此处输入图像描述](../Images/9bb1129e3e9b74c61895054e2db04c7f.png)

您可以在表格底部看到它，显示“全名”、“公司”、“职务”。有没有其他人有这个问题/有人知道如何去除渐变吗？

我已经尝试过设置表格的背景颜色和背景视图的背景颜色，但是这些解决方案都没有奏效。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T11:40:10.333

也许有点晚了，但最近我遇到了同样的问题，终于发现了

`[[self mTableView] setBackgroundView:nil];`

为您添加的分组表将解决问题。

# php - 如何将始终使用的属性从控制器传递到 MVC 中的其他类？

> ID：14004972
> 
> 赞同：1
> 
> 时间：2012-12-22T17:30:20.593
> 
> 标签：php, class, model, controller

我目前正在改进我自己的 MVC，但我无法为以下场景找到一个好的解决方案：从控制器（我基本上告诉模型如何处理输入）到各种模型。目前，我将每个用户输入都放入一个属性中：

```
 foreach($this->properties as $property => $empty)
    {
        if(isset($_POST[$property]))
        {
            $this->properties[$property] = htmlspecialchars(trim($_POST[$property]));
        }
    } 
```

最终，当我需要一个新模型来做某事时，我会这样称呼它：

```
 new view('calendar',$data,$this->properties); 
```

最后在模型中，我通过将输入/变量放入模型属性中来接收它们……</p>

```
class validation
{   

    public function __construct($values)
    {
        foreach($values as $property => $value)
        {
            $this->{$property} = $value;
        }
    }
} 
```

这样我就不必考虑变量的来源（在验证用户输入之后，我不再关心）并且总是可以为我写一个干净的阅读版本`$this->user_input`

但不知何故，我觉得这不是最简单的方法，也可能不是一个好方法。最困扰我的是，在编写新的类/模型时，我总是要告诉模型将输入带入自己的属性中，并且在调用新类时总是要传递参数。

有没有什么方法可以让我在调用新类时从用户那里继承这些变量，而无需让控制器成为父类 - 或者让控制器成为父类实际上是否有意义？我认为当另一个控制器使用该模型时会令人困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T12:45:41.150

好的，这里要记住的重要一点是，您的控制器“**有一个**”变量容器（保存所有属性），而不是控制器是（或“**是**”）一个变量容器。所以首先，你应该使用组合，而**不是**继承。

对下面的以下片段进行了注释以更详细地解释。一些注意事项：

*   InputData 实例可以在控制器级别之上创建（例如，在不同的控制器中，以便可以在许多控制器之间共享），这回答了您问题的主要部分。关键是你只写了一次，你可以放心地说，一旦它在那里，就可以了

*   您可以在 InputData 中包含所有验证方法，因为 InputData 的作用是安全地容纳/存储数据 - 在我看来这是一个很好的抽象级别，或者换句话说“它负责输入数据，如果出现问题输入数据，我知道去哪里看”

*   最后，为了增加一点亮点，我添加了一些位操作，因此当通过 input_data->add 添加值时，它们可以针对多种类型进行验证（例如，可以添加一些需要验证为数字和帖子的内容代码）。

**索引.php**

```
require_once( "Controller.php" );

$controller = new Controller();
$controller->print_current_user(); 
```

**控制器.php**

```
<?
require_once( "Input_Data.php" );

class Controller 
{
    // Variables    
    private $input_data;

    // Models
    // private $model_user;

    public function __construct() 
    {
        $this->input_data = new Input_Data();
        //$this->model_user = new Model_User();

        // Process input (might not happen in the constructor,
        // in fact, it might happen higher up, so it can be shared

        // Possibly looping over GET / POST data
        // for each one, add it to the inputData
        $_GET[ 'name' ] = 'Chris';
        $_GET[ 'country' ] = 'Australia';        

        // example iteration 1        
        $this->input_data->add( 'name', $_GET[ 'name' ], Input_Data::TYPE_VALIDATE_NAME | Input_Data::TYPE_VALIDATE_TEXT );
        // example iteration 2
        $this->input_data->add( 'country', $_GET[ 'country' ], Input_Data::TYPE_VALIDATE_COUNTRY );
    }

    // later on in controller, model needs to find the user by name
    public function print_current_user() 
    {
        // Example Usage to Model:
        // $this->$model_user->get_by_name( $this->input_data->get( 'name' ) );
        //
        // For now, we'll settle with just printing it out
        echo $this->input_data->get( 'name' );
    }
}
?> 
```

**输入数据**

```
<?
class Input_Data 
{
    const TYPE_VALIDATE_TEXT = 0;
    const TYPE_VALIDATE_NAME = 1;
    const TYPE_VALIDATE_EMAIL = 2;
    const TYPE_VALIDATE_ADDRESS = 4;
    const TYPE_VALIDATE_COUNTRY = 8;

    protected $data;

    public function __construct() {
        $this->data = array();
    }

    public function add( $name, $value, $type )
    {
        if( $type & TYPE_VALIDATE_TEXT )        
        {
            // validate input as text
            // if valid, flag as such, to be inserted
            // or alternatively return a safe version
            // depending on your application, an empty string
        }    
        if( $type & TYPE_VALIDATE_NAME )        
        {
            // validate input as name
        }
        if( $type & TYPE_VALIDATE_EMAIL )        
        {
            // validate input as email
        }    
        if( $type & TYPE_VALIDATE_ADDRESS )        
        {
            // validate input as address
        }    
        if( $type & TYPE_VALIDATE_COUNTRY )        
        {
            // validate input as country
        }    

        // If its valid or is now santised
        // insert into the $data variable
        // if( $valid ) {
        $this->data[ $name ] = $value;
        // }
        // data[ name ] now contains a safe value that can be accessed
    }

    public function get( $name )
    {
        // do checking to ensure it exists
        // then return it
        return $this->data[ $name ];
    }
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T21:46:00.560

根据您的需要，将用户输入存储在[单例类](http://www.talkphp.com/advanced-php-programming/1304-how-use-singleton-design-pattern.html)（例如 UserRequest 类）的属性中可能是有意义的：

```
class UserRequest extends Singleton
{
    protected $userProperties;
    public function getUserProperties()
    {
        return $this->userProperties;
    }
    ...other methods...
} 
```

在您的引导程序或路由类中，当您捕获用户输入时，将它们保存在您的请求实例中，然后让所有控制器扩展一个读取此属性的基类：

```
class baseController
{
    protected $userProperties;
    public function __construct()
    {
        $this->userProperties = Request::getInstance()->getUserProperties();
    }
} 
```

然后所有控制器都可以访问它，您只需捕获它一次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T13:55:42.130

> 最困扰我的是，在编写新的类/模型时，我总是要告诉模型将输入带入自己的属性中，并且在调用新类时总是要传递参数。

因此，假设您在这里有两个问题：

1.  重复定义每个类定义的属性。
2.  为每个类创建传递参数。

从最简单和最基本的意义上说，您无法同时规避两者。如果你不告诉类（至少*以某种方式*）它代表哪些属性，它就不会知道。第二点有点类似，如果数据没有设置到类，就不行了。

因此，由于在技术上根本不可能阻止这两个，问题是如何让它更舒适并减少重复 - 如果可能的话。

一种可行的方法是将所有这些对象都归为同一类型。我的意思是实际上这些只是一些改进的数组，不是吗？

因此，您可以自己创建一个基类，您可以从中扩展它，其中包含所有需要的代码，例如导入数组、定义属性。

因此，您只需编写一次代码并根据需要创建尽可能多的对象和不同的“类型”。

举个例子，让我们创建一个这样的对象，它有一个可以完成工作的基类：

```
class TestModel extends SelfDefinedVariableObjectBase
{
    protected $properties = ['bar' => 'hello world'];
} 
```

就是这样。对象定义。现在让我们使用它：

```
// $_POST['bar'] = '<h1>test</h1> let\'s throw some HTML in';

$foo = new TestModel($_POST);
echo $foo->bar, "\n"; 
```

这确实会从中导入一些`$_POST`与对象属性匹配的数据（类似于您所拥有的）。但是输出是一样的：

```
<h1>test</h1> let's throw some HTML in 
```

你现在可能想要那个。因此，您可以创建一些装饰器，例如，这里有一个与回调函数一起使用的装饰器：

```
class VariableObjectCallbackDecorator
{
    private $subject;
    private $callback;

    public function __construct(VariableObjectBase $object, callable $callback) {
        $this->subject = $object;
        $this->callback = $callback;
    }
    public function __get($name) {
        return call_user_func($this->callback, $this->subject->__get($name));
    }
} 
```

让我们将它与上一个示例中的测试对象一起使用：

```
$bar = new VariableObjectCallbackDecorator($foo, 'htmlspecialchars');
echo $bar->bar, "\n"; 
```

现在这一次的输出是：

```
&lt;h1&gt;test&lt;/h1&gt; let's throw some HTML in 
```

希望这会有所帮助。你可以在这里找到代码：[Demo](http://eval.in/5459)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-26T21:59:55.350

我认为更好的解决方案是将所有输入存储在一个对象中，让我们调用它`data`。每个模型都可以有一个`data`属性。控制器完成输入验证后，您可以将对象传递给第一个模型并将其存储在那里。此时，您可以自由地将对象从模型传递到模型。如果您要更改其中的值，`data`您应该稍后使用方法调用`$this->data = $Model->GetData();`或其他方法更新控制器对象。

使用 MVC 范式，让模型访问控制器的属性是不明智的。控制器基本上应该启动所有通信，即控制器将数据传递给对其进行操作的模型，然后控制器请求该数据并将其放入视图中。让控制器持有数据和模型直接在其上运行并不是一个好习惯。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-22T17:41:47.300

> 让控制器成为父母真的有意义吗？

是的，这可能正是我会做的。然后，您可以将*protected*用于要共享/继承的属性。

# dci - 可以在 DCI 上下文中拥有未绑定的角色吗？

> ID：14004973
> 
> 赞同：0
> 
> 时间：2012-12-22T17:30:32.590
> 
> 标签：dci

我正在研究 CreditCardPayment 上下文，并发现某些上下文方法并不需要所有角色。例如，该方法`CreateSecurityHash`可能需要所有角色，但`VerifyHash`只需要一个。不绑定所有角色可以吗？如果是这样，那么引入多个构造函数并只绑定需要的内容怎么样，如下所示：

```
public CreditCardPayment(objectA, objectB, objectC)
{
  BindRoles(objectA, objectB, objectC)
}

public CreditCardPayment(objectA)
{
  BindRoles(objectA, null, null)
} 
```

虽然很难知道在执行此操作时允许调用哪些上下文方法。所以我想知道：

*   这还可以吗（如果可以，为什么？），或者
*   整个场景是否表明需要另一个上下文，或者
*   我是否应该始终保留上下文并提供角色所需的所有对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T10:14:40.050

如果您不想绑定所有角色，那么您应该去问自己几个问题。您已经问过其中一位“我应该创建两个上下文吗？” 要回答这个问题，我会将上下文视为一个漏洞。如果它确实模拟了一个过程，那么不要将它分成几个。我们希望对最终用户的心智模型进行建模。如果该模型很复杂，我们无法改变它，但我们可以通过反映它来提供帮助。

在您的特定情况下，您似乎确实在建模一个过程，在这种情况下，您应该将上下文保持为一个。绑定角色一次，并知道从那时起您可以安全地调用使用交互。

不绑定角色将导致代码难以推理。“调用这个方法安全吗？” 只有在运行时您可以看到已绑定哪些角色时，您才能回答这个问题。所有角色总是同时绑定在这发生在交互之前或者是交互的第一部分

# jquery - 内部没有图像的链接的 jQuery 选择器

> ID：14004978
> 
> 赞同：10
> 
> 时间：2012-12-22T17:31:07.320
> 
> 标签：jquery, jquery-selectors

我将一个`click`函数绑定到一个链接：

```
$("body").on("click", "a", function() {
    //do something
}); 
```

现在我正在寻找一个仅在链接不包含图像标签时才匹配的选择器。有点类似于`a:not(img)`但是`img`子元素。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-22T17:38:12.793

试试这个：

```
$("body").on("click", "a:not(a:has(img))", function() {
    //do whatever you want here
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T17:33:42.257

您可以使用[`not`](http://api.jquery.com/not-selector/)with[`has`](http://api.jquery.com/has-selector/)过滤没有的锚点`img`

**[现场演示](http://jsfiddle.net/kuWk6/3/)**

```
$("body").on("click", "a:not(a:has(img))", function() {
    //do something
    alert("");
}); 
```

​</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T17:39:40.937

试试这个

```
$('a:not(:has(>img))').click(function(){
    alert('click');
})​; 
```

# javascript - 下载期间的Javascript解密

> ID：14004986
> 
> 赞同：2
> 
> 时间：2012-12-22T17:31:57.457
> 
> 标签：javascript, encryption, proxy, download

我正在构建一个 ASPX 网站，该网站应该允许用户下载 CSV/Excel 文件（包括“保存到”对话框）。CSV 包含加密数据 - 解密密钥在用户端可用，并且应该对 Web 服务保密。所以解密实际上应该在浏览器中执行，一个javascript实现（sjcl）已经证明可以正常工作。但是如何影响文件下载过程中的传入数据流呢？类似于执行 javascript 解密的浏览器托管代理？

@closure：非常感谢！Ajax没问题，思路

```
<a href='data:application/csv;base64,aGVsbG87d29ybGQNCg=='>click</a> 
```

真的很酷，但它有两个问题：它似乎不适用于 IE，而且对于非常大的表来说，这不是正确的方法。该解决方案应该能够处理数千条记录，因此我们需要某种下载流编码器/解密器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T17:58:21.693

以下是实现此目的的步骤：

1.  不是直接将 CSV 下载到客户端计算机，而是通过 ajax 获取它
2.  通过 Ajax 接收数据后，通过 Internet 上的许多可用功能解析 CSV。如果您需要这方面的帮助，请告诉我。此函数会将 CSV 转换为原生 Javascript 数组。
3.  遍历阵列并将加密数据转换为未加密数据。在同一个数组中进行本机操作。
4.  将数组转换为 CSV（公共域中同样有函数）
5.  创建一个链接（一个元素）并将 href 设置为本地数据，例如`data:text/csv;charset=utf-8, + encodeURIComponent(csv)`
6.  将此链接呈现给用户并让他单击它以在本地保存文件。

# python - python中的fft没有在正确的位置显示峰值

> ID：14004990
> 
> 赞同：7
> 
> 时间：2012-12-22T17:32:38.437
> 
> 标签：python, fft

我试图理解 numpy fft 函数，因为我的数据减少行为很奇怪。但是现在我已经转换了两个正弦的简单和，我得到了奇怪的结果。我的山峰非常高，在零附近有几个点宽，其余的都变平了。有人知道我可能做错了什么吗？

```
import numpy as np
from numpy import exp, sqrt, pi, linspace
from matplotlib import cm
import matplotlib.pyplot as plt
import scipy as sp
import pylab

#fourier
tdata = np.arange(5999.)/300
datay = 3*np.sin(tdata)+6*np.sin(2*tdata)
fouriery =  np.fft.fft(datay)

freqs = np.fft.fftfreq(datay.size, d=0.1)

pylab.plot(freqs,fouriery)
pylab.show() 
```

我得到的是： ![在此处输入图像描述](../Images/41f97cdc58de1d22ff94400c99a1eae4.png) 虽然它的两侧应该有两个侧峰，但其中一个比另一个高 2 倍

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T18:11:58.970

*   您`datay`是真实的，所以也许您应该使用 FFT 对真实序列进行`scipy.fftpack.rfft`.
*   如果您正在寻找具有两个不同峰值的 FFT，那么您必须为其提供数据，该数据是正弦波的总和，其项的周期是 的整数倍`2*pi/n`，其中`n = len(datay)`。如果不是，将需要许多这样的正弦波来近似数据。

* * *

```
import numpy as np
import matplotlib.pyplot as plt
import scipy.fftpack as fftpack

pi = np.pi
tdata = np.arange(5999.)/300
datay = 3*np.sin(2*pi*tdata)+6*np.sin(2*pi*2*tdata)
fouriery = fftpack.rfft(datay)
freqs = fftpack.rfftfreq(len(datay), d=(tdata[1]-tdata[0]))
plt.plot(freqs, fouriery, 'b-')
plt.xlim(0,3)
plt.show() 
```

![在此处输入图像描述](../Images/833bfc0b08fb19c1d2c138fa9588f0d1.png)

# c - 线程无法计数，给出错误的结果

> ID：14004993
> 
> 赞同：2
> 
> 时间：2012-12-22T17:32:49.123
> 
> 标签：c, multithreading, pthreads, global-variables

我写了这段代码

```
#include <stdio.h>      /* Input/Output */
#include <stdlib.h>     /* General Utilities */
#include <pthread.h>    /* POSIX Threads */
unsigned int cnt=0;  /*Count  variable%*/
const int NITERS=1000;
void count()
{
    int i=0;
    for(i=0; i<NITERS; i++)
    {
        cnt++;
    }
    pthread_exit(0);
}
int main()
{
    pthread_t tid1,tid2;
     /* create threads 1 and 2 */  
    pthread_create(&tid1,NULL,count,NULL);
    pthread_create(&tid2,NULL,count,NULL);
    /* Main block now waits for both threads to terminate, before it exits
       If main block exits, both threads exit, even if the threads have not
       finished their work */ 
    pthread_join(tid1,NULL);
    pthread_join(tid2,NULL);
    if(cnt!=(unsigned)NITERS*2)
    {
        printf("BOOM! cnt=%d, it should be %d\n",cnt,NITERS*2);
    }
    else
    {
        printf("OK! cnt=%d\n",cnt);
    }
    exit(0);
} 
```

它展示了这个结果。 ![结果到代码](../Images/c611fe07bcd954229790cefffeb0eb6e.png)

有时它的 cnt 为 2000，但大多数时候它给出的结果小于 2000。你能解释一下为什么会发生这种情况或这背后的原因是什么？如何修复它。你的回答和理由肯定会大有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T17:35:31.147

`unsigned int cnt=0;`在线程之间是可共享的，并且操作`++`不是原子增加`cnt`的。两个线程可能读取相同的值`cnt`并增加，并覆盖`cnt`。您需要应用一些并发控制机制，例如信号量或互斥量。

* * *

如果您要使用以下命令反汇编代码（假设代码名称为`thread1.c`）

```
~$ gcc thread.c -lpthread -S 
```

输出汇编代码名称为`thread1.s`.

您会发现`cnt++`代码中的低级指令不止一条：

```
 movl    $0, -12(%ebp)
    jmp .L2
.L3:
    movl    cnt, %eax
    addl    $1, %eax
    movl    %eax, cnt
    addl    $1, -12(%ebp)
.L2:
    movl    NITERS, %eax 
```

(1)`cnt`拳头移动到`%eax`
(2) 然后加一个到`%exc`
(3) 移动`%eax`到`cnt`后面

并且由于这一行之间的线程上下文切换，相同的值`cnt`被多个线程读取。因此`cnt++`不是原子的。

**注意：**全局变量是线程可共享的，像你声明的`cnt`局部变量是线程特定的。 `i``count()`

* * *

我修改了您的代码并使用信号量进行了并发控制，现在它可以正常工作了。

**仅显示修改后的代码**

```
#include <pthread.h>    /* POSIX Threads */
#include <semaphore.h>
unsigned int cnt=0;  /*Count  variable%*/
const int NITERS=1000;

sem_t mysem;

void count()
{
    int i=0;
    for(i=0; i<NITERS; i++)
    {
        sem_wait(&mysem);
        cnt++;
        sem_post(&mysem);
    }
    pthread_exit(0);
}
int main()
{
    if ( sem_init(&mysem,0,1) ) {
     perror("init");
    }
    // rest of your code 
} 
```

这会很好用！一些例子：

```
nms@NMS:~$ ./thread 
OK! cnt=2000
nms@NMS:~$ ./thread 
OK! cnt=2000
nms@NMS:~$ ./thread 
OK! cnt=2000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T17:38:19.030

增量运算符通常由非原子的读-修改-写实现。

跨线程的非原子读取-修改-写入有时可以这样做：

```
Thread 1:    Thread 2:     count
Read count   ...           1
Add 1        Read count    1
Write count  Add 1         2 
...          Write count   2 
```

导致计数低于预期。

如果您将跨多个线程访问共享资源，则需要使用某种线程感知锁定机制（例如互斥锁）来保护它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T17:38:46.580

您的 2 个线程在没有保护的情况下访问共享资源，因此适用竞争条件。增加操作不是原子的，所以你实际上可以在机器操作方面有这样的东西：

```
Thread 1                   Thread 2
Load value of cnt        
                           Load value of cnt
Increase value of cnt      
Write value of cnt         Increase value of cnt
                           Write value of cnt 
```

请注意，虽然两个线程都增加了`cnt`，但实际上只增加了 1。如果您希望结果是确定性的，您需要保护共享资源 ( `cnt`)，例如在访问之前锁定它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-22T17:45:24.470

你有一个比赛条件问题。更多信息（我知道它谈到了视觉基础，只是跳过这些东西）[在这里](http://support.microsoft.com/kb/317723)。
要解决它，您需要一个互斥锁，将其声明为全局变量：

```
pthread_mutex_t mux; 
```

初始化它：

```
pthread_mutex_init(&mux,NULL); 
```

然后用它来读取共享变量：

```
void count()
{
    int i=0;
    for(i=0; i<NITERS; i++)
    {
        pthread_mutex_lock(&mux);
        cnt++;
        pthread_mutex_unlock(&mux);
    }
    pthread_exit(0);
} 
```

所有这一切都是因为有两个线程递增同一个变量，他们在递增变量之前获取变量并将其放入寄存器中。所以他们认为他们正在读取的值不是唯一的：每个线程都有它自己的副本，所以每个线程可能会忽略另一个的变化，直到他们有效地将其写入内存中的地址。
**注意**：如果您希望线程以有序的方式更新变量（即：线程 1 计数到 NITERS 而不会被中断，当线程 2 开始计数时），您必须在 for 之前锁定互斥锁。

# android - 类中没有方法可用

> ID：14004996
> 
> 赞同：0
> 
> 时间：2012-12-22T17:33:04.487
> 
> 标签：android, timezone, method-missing

我有一个项目需要确定时区。[TimeZone](https://developer.android.com/reference/java/util/TimeZone.html#getRawOffset%28%29)类似乎非常适合这项任务：

```
import java.util.TimeZone;

long tzo = TimeZone.getRawOffset(); 
```

但是，getRawOffset 方法不可用。我不明白什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T17:36:55.753

`getRawOffset()`不是静态的，所以你不能调用它`TimeZone`。相反，您需要一个实际的`TimeZone`对象。

大概是这样的：

```
int tzo = TimeZone.getDefault().getRawOffset(); 
```