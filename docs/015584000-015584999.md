# StackOverflow 问答 15584000-15584999

# c# - 如何使用 Sql 在矩形内搜索（预定义）位置（纬度/经度）？

> ID：15584000
> 
> 赞同：5
> 
> 时间：2013-03-23T06:21:48.060
> 
> 标签：c#, sql-server, google-maps, google-maps-api-3

我有一个矩形位置的北、东、南和西值，如何仅搜索该矩形位置范围内的那些位置（纬度/经度）？

![在此处输入图像描述](../Images/359866bbec7645799938cb49ff993857.png)

请注意，我需要在数据库中搜索位置（纬度/经度）。我需要在数据库中找到给定矩形范围内的位置，然后在地图上为它们绘制标记。

我不是在谈论[Google 搜索](https://developers.google.com/places/documentation/search)，搜索 API 已经支持传递矩形绑定来过滤搜索。

`googlemaps`API 可以为我做到这一点，例如：

```
var request = {
    bounds: myMapObject.getBounds(), // Search only within the Bound of the Map
    query: someTextToFind
}; 
```

或者

```
var isWithInMapsBounds = myMapObject.getBounds().contains(myLocation); 
```

**但是我需要在从数据库中获取位置时这样做，我的意思是在服务器端**。

有人可以指导我正确的方向，如何实现此功能？

**编辑：**

我想在数据库中搜索；所以我需要一个 SQL 解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T07:34:52.980

```
DECLARE @Bounds AS Geography = GEOMETRY::STGeomFromText('polygon-wkt-here',0)

SELECT columns-list
FROM   table
WHERE  1 = @Bounds.STIntersects(table.point-column) 
```

对于那些在黑暗中的人的快速说明，为什么您不能将您的点位置与边界框的北/南/东/西坐标进行比较：

边界框可能不是纬度/经度对齐的（例如，它的北/南/东/西线可能不遵循纬度/长轴）。如果您在纬度/经度地图投影上绘制平面矩形，就会发生这种情况。点越靠近边界框的边缘，离赤道越远，失真会越明显。

使用 Geography 数据类型的第二个原因是，它提供了一种对*任何*多边形执行此类操作的统一方法，而不仅仅是矩形。所以现在你可以比较一个点是否在你的盒子里，或者找到一个邮政编码中的所有地址，所有地址都使用相同的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T09:22:18.603

SQL 查询

```
SELECT *  FROM mytable WHERE lat >= bottomlat  AND lat <= toplat AND lng >= leftlng AND lng <= rightlng 
```

如果穿越本初子午线或赤道，您将需要修改查询

```
SELECT * FROM mytable WHERE lat >=bottomlat AND lat <= toplat  AND   lng >= leftLng AND lng < 0 
UNION
SELECT * FROM mytable WHERE lat >=bottomlat AND lat <= toplat  AND  lng >= 0 AND lng  <= rightLng 
```

# javascript - Javascript 函数不正确？

> ID：15584006
> 
> 赞同：0
> 
> 时间：2013-03-23T06:22:44.000
> 
> 标签：javascript, html

我对 Javascript 完全陌生。事实上，我只是一个希望在我的应用程序中实现一点 Javascript 的 Objective-C 程序员。所以，问题是无论出于何种原因，当我调用我的第一个函数时，那里什么都没有发生，我没有收到警报。当我调用我的第二个函数时，我只收到警报，实际上并没有点击该按钮。

代码：

```
function myFunction(username, password) {
    alert("Data will be entered");
    document.getElementById('ctl00_plnMain_txtLogin').value = username;
    document.getElementById('ctl00_plnMain_txtPassword').value = password;
}

function click() {
    alert("The button was clicked");
    document.getElementById("ctl00_plnMain_Submit1").click();
} 
```

我似乎可以正常运行警报，但没有别的？？？我的功能有问题吗？

如果有帮助，在网站上这里是“用户名”框：

```
<input name="ctl00$plnMain$txtLogin" type="text" maxlength="50" id="ctl00_plnMain_txtLogin" tabindex="1"> 
```

“密码”框：

```
<input name="ctl00$plnMain$txtPassword" type="password" maxlength="255" id="ctl00_plnMain_txtPassword" tabindex="2"> 
```

按钮：

```
<input onclick="if (typeof(Page_ClientValidate) == 'function') Page_ClientValidate(''); " name="ctl00$plnMain$Submit1" type="submit" id="ctl00_plnMain_Submit1" tabindex="3" value="Log In" title="Log in"> 
```

- 编辑

另外，我正在通过我的目标 C 代码启动这些功能。我抓取一个 js 文件，然后我可以在网页上使用它的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T06:35:57.563

我建议使用像[jQuery这样的](http://jquery.com/)[DOM](http://en.wikipedia.org/wiki/Document_Object_Model)抽象库

jQuery 提供了一个 'on' 方法，它用于将事件绑定到 DOM 元素：

```
$('#ctl00_plnMain_Submit1').on('click', function (event) {
    alert("The button was clicked");
} 
```

它还为收集输入值提供了一个很好的抽象：

```
var userName = $('#ctl00_plnMain_txtLogin').val(); 
```

您还可以使用它来设置输入的值：

```
$('#ctl00_plnMain_txtLogin').val('New Value for This Input'); 
```

用函数填充输入：

```
function populateInputs (username, password) {
    $('#ctl00_plnMain_txtLogin').val(username);
    $('#ctl00_plnMain_txtPassword').val(password);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T06:26:16.523

我猜您希望在单击按钮时调用单击函数

您需要指定然后

```
 <input onclick="click()" .... 
```

# visual-studio-2010 - 发生错误：“生成报告时无法加载文件或程序集 'Microsoft.Reportviewer.Winforms Version=10.0.0.0”

> ID：15584009
> 
> 赞同：4
> 
> 时间：2013-03-23T06:22:55.983
> 
> 标签：visual-studio-2010, .net-4.0, reporting-services, .net-3.5

我使用 .net 4.0 创建了一个应用程序，其中有两种形式。第一个表单接受来自用户的数据，第二个表单包含生成账单的报表查看器控件。

数据输入表格的图片是[这个](http://i.imgur.com/sN7czz6.png)

生成的账单的图片是[这个](http://i.imgur.com/jcybLHy.png)

当我想在不同的计算机系统上运行这个应用程序时，我使这个应用程序与 .net 3.5 框架兼容。

它已成功转换，但是当我单击打印按钮时出现此[错误。](http://i.imgur.com/54SZ1kJ.jpg)

请帮助我如何解决这个错误？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-23T08:34:55.920

您需要在出现此错误的 PC 上安装**[ReportViewer 。](http://www.microsoft.com/en-us/download/details.aspx?id=6442)**

# mysql - 如何找到树表示的层次结构路径

> ID：15584013
> 
> 赞同：8
> 
> 时间：2013-03-23T06:23:11.623
> 
> 标签：mysql, sql, hierarchical-data

我有一个树层次结构，它内置在一个表中，其 parent_id 指向前一个根节点。

我正在遍历所有根节点（root1、root2），并且我正在为 root1 和 child1 设置 root1 或 root1/child1 的路径。为了找到 child1 的路径，我必须至少进行 2 次调用来形成路径。有没有一种有效的方法来填充路径，因为我们处理了大量嵌套 5-7 层深的根节点和子节点。

```
create table foo (id, name, parent_id, path)
insert into foo (1, "root1', null, null)
insert into foo (2, "child1', 1, null)

root1 (path = null)
  child1 (path = root1)
    subchild1 (path = root1/child1)

root2
   child2
     subchild2 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-07T10:17:28.153

正如您在问题中提到的那样，您可以使用存储过程，因为嵌套最多可以达到 7 级。

## **存储过程**

```
CREATE PROCEDURE updatePath()
BEGIN
declare cnt, n int;
    select count(*) into n from foo where parent_id is null;
    update foo a, foo b set a.path = b.name where b.parent_id is null and a.parent_id = b.id;
    select count(*) into cnt from foo where path is null;
    while cnt > n do
        update foo a, foo b set a.path = concat(b.path, '/', b.name) where b.path is not null and a.parent_id = b.id;
        select count(*) into cnt from foo where path is null;
    end while;
END// 
```

为了检查实际记录，我们刚刚打印了路径列中具有空值的普通记录

```
select * from foo 
```

**结果**：

```
| ID |         NAME | PARENT_ID |   PATH |
------------------------------------------
|  1 |        root1 |    (null) | (null) |
|  2 |       child1 |         1 | (null) |
|  3 |    subchild1 |         2 | (null) |
|  4 |       child2 |         1 | (null) |
|  5 |       child3 |         1 | (null) |
|  6 |    subchild2 |         4 | (null) |
|  7 | subsubchild1 |         6 | (null) | 
```

**调用程序**：

```
call updatepath 
```

**程序执行后的结果**：

```
select * from foo 
```

**结果**：

```
| ID |         NAME | PARENT_ID |                   PATH |
----------------------------------------------------------
|  1 |        root1 |    (null) |                 (null) |
|  2 |       child1 |         1 |                  root1 |
|  3 |    subchild1 |         2 |           root1/child1 |
|  4 |       child2 |         1 |                  root1 |
|  5 |       child3 |         1 |                  root1 |
|  6 |    subchild2 |         4 |           root1/child2 |
|  7 | subsubchild1 |         6 | root1/child2/subchild2 | 
```

## **[SQLFIDDLE](http://sqlfiddle.com/#!2/53558/1)**

希望这可以帮助....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T12:41:16.143

我真的很喜欢 Modified Preorder Tree Traversal。它允许您在单个查询中获取整个树的层次结构。这是一个详细的教程：[http ://www.sitepoint.com/hierarchical-data-database-2/](http://www.sitepoint.com/hierarchical-data-database-2/)

如果您对 MPTT 有任何疑问，请告诉我，我很乐意为您提供帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T18:08:11.417

您可以考虑添加一个包含从每个树根到叶子的所有[路径的](http://dirtsimple.org/2010/11/simplest-way-to-do-tree-based-queries.html)[闭包表。](http://www.slideshare.net/billkarwin/models-for-hierarchical-data)[在 SQL 中维护图的传递闭包](http://homepages.inf.ed.ac.uk/libkin/papers/tc-sql.pdf)（从 1999 年开始）描述了一些理论背景。

关于分层数据的 stackoverflow[审查问题描述了许多替代方法。](https://stackoverflow.com/questions/4048151/what-are-the-options-for-storing-hierarchical-data-in-a-relational-database)在那里，[Tegiri Nenashi](https://stackoverflow.com/users/432426/tegiri-nenashi)指出了一个综合参考书目，其中包括[RDBMS 中的分层数据](http://troels.arvin.dk/db/rdbms/links/#hierarchical)。

闭表的优点是查询效率高，解决方案不影响你当前的数据结构。您将需要扩展您的闭包表并在修改森林时对其进行维护。

您用短路径表示表中的大量项目。这使得闭包表的性能在适当的索引下几乎保持线性。您还可以在关闭表中保留每个节点的路径以避免重新计算。该方法对每个操作都有恒定数量的查询，并支持任何深度的层次结构。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T11:59:19.723

您应该使用嵌套集模型 [http://en.wikipedia.org/wiki/Nested_set_model](http://en.wikipedia.org/wiki/Nested_set_model)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T16:07:09.743

虽然在单个调用中严格来说不可能，但您可以隐藏多个调用，但将它们放入您从 SQL 调用的 MySQL 函数中，该函数返回父路径。

虽然这可能比在脚本中执行它更有效，但我不认为它会那么有效。

如果最大级别数是固定的，您可能会使用 JOIN，如下所示：-

```
SELECT foo.id, foo.name, CONCAT_WS(',', d.name, c.name, b.name, a.name)
FROM foo
LEFT OUTER JOIN foo a ON foo.parent_id = a.id
LEFT OUTER JOIN foo b ON a.parent_id = b.id
LEFT OUTER JOIN foo c ON b.parent_id = c.id
LEFT OUTER JOIN foo d ON c.parent_id = d.id 
```

虽然这会起作用，但它的限制很大（即，如果最大级别数发生变化，您将不得不使用它来更改 SQL 的每一位），而且如果级别数不小，它将变得难以理解。

# javafx-2 - Javafx在webview中使用鼠标选择文本时选择的单词被分割或重叠

> ID：15584017
> 
> 赞同：0
> 
> 时间：2013-03-23T06:23:34.853
> 
> 标签：javafx-2

我想在 webview 中使用鼠标选择文本内容时选择 webview 中的文本，所选文本单词被拆分或鼠标选择第一个单词对齐重叠。如何解决这个问题。

只是我在 javafx weview 组件中加载了一个简单的 html 文件。在 webview 中选择文本时，单词被拆分或重叠。我没有使用任何 JavaScript。

您可以在以下链接中找到疑问： [在此处输入链接描述](http://www.flickr.com/photos/94297692@N04/8581160685/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T15:54:02.113

WebView 无法正确呈现选择区域是 JavaFX 2.2 中的一个已知问题：

*   [RT-18883 Google 文档编辑问题](https://javafx-jira.kenai.com/browse/RT-18883)
*   [RT-11239 为 Prism 图形添加绘制字形类型支持](https://javafx-jira.kenai.com/browse/RT-11239)

# php - PHP Switch 是否注意大小写？

> ID：15584020
> 
> 赞同：-1
> 
> 时间：2013-03-23T06:24:08.047
> 
> 标签：php

我已经将一个字符串拉出到一个数组中，并使用 PHP 开关循环遍历它。我唯一的问题是我需要我的开关对大写字母敏感。

这是一个示例字符串：

```
$string = "AAaa BBbb CCcc DDDD" 
```

爆炸后你会得到这样的东西：

```
Array ( [0] => AAaa [1] => BBbb [2] => CCcc [3] => DDDD ) 
```

我的开关需要在数组中找到多个东西，并根据它找到的结果返回不同的结果。例如：

```
switch (true) {
    case ($array[0]='AAaa'):
        echo "There is an AAaa";
        break;
    case (($array[0]='AAaa') && ($array[3]='DDDD')):
            echo "AAaa and DDDD are both there";
            break;
    default:
            echo "Nothing is there! ):";
 } 
```

当你在寻找不同的字母时它工作得很好，但有时我的字符串会有“aaaa”、“AAAA”等，我需要我的开关来区分它们。

我知道这可以通过 if-elseif-else 语句来完成，但在我看来，开关更容易阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T06:31:26.257

这是因为您正在使用`=`而不是`==`进行比较

代替：

```
($array[0]='AAaa') 
```

和：

```
($array[0]=='AAaa') 
```

# php - 用来自 html 表单的用户输入替换预定义代码

> ID：15584024
> 
> 赞同：0
> 
> 时间：2013-03-23T06:25:35.693
> 
> 标签：php, html, mysql

我创建了一个评论的网站。人们访问它并在其上放置评论，然后将其放入数据库中。

我在网站上创建了一个简单的表单和区域，以便他们能够编辑和删除他们的评论。

但是，我必须从每个用户的数据库中提取他们的评论信息的代码不起作用。我需要替换**"WHERE FirstName='peter'");** 使用允许脚本获取和显示已与用户在表单上输入的电子邮件一起提交的评论的东西。

```
<?php
    $con=mysqli_connect("example.com","peter","abc123","my_db");
    // Check connection
    if (mysqli_connect_errno())
{
    echo "Failed to connect to MySQL: " . mysqli_connect_error();
}

    $result = mysqli_query($con,"SELECT * FROM Persons
    **WHERE FirstName='Peter'");**

    while($row = mysqli_fetch_array($result))
{
    echo $row['FirstName'] . " " . $row['LastName'];
    echo "<br>";
}

?> 
```

这是html表单（很简单，还没有做很多工作）

```
<form action="myReviews.php" method="post"> 

<label>Please enter your email:</label>

<input type="email" id="email" name="email" placeholder="email">

<input type="submit" value="submit"> 

</form> 
```

我已经尝试并尝试通过使用“回声”以及介于两者之间的所有内容来解决这个问题！请帮帮我。谷歌搜索它并去教程网站没有好处！一旦找到，我将用答案更新问题。

**基于以下用户更新的帮助**

我将 php 脚本编辑为如下所示：

```
<?php
     $con=mysqli_connect("example.com","peter","abc123","my_db");
     // Check connection
     if (mysqli_connect_errno())
{
     echo "Failed to connect to MySQL: " . mysqli_connect_error();
}

    $result = mysqli_query($con,"SELECT * FROM Persons
    WHERE $email = mysqli_real_escape_string($_POST['email']);");

    while($row = mysqli_fetch_array($result))
{
    echo $row['FirstName'] . " " . $row['LastName'];
    echo "<br>";
}

?> 
```

在表单中点击提交后，我现在在浏览器中收到此错误。

```
Parse error: syntax error, unexpected T_ENCAPSED_AND_WHITESPACE, expecting T_STRING or         T_VARIABLE or T_NUM_STRING in /home/content/38/10473938/html/review-pratt/business_profiles/myReviews.php on line 106 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T06:58:27.750

我认为你的代码有问题。试试这个：

```
<?php
$result = mysqli_query($con,sprintf("SELECT * FROM Persons WHERE email = '%s'",mysqli_real_escape_string($con,$_POST['email']))); 
```

# xml - Testng.xml 缺少 testng 运行选项

> ID：15584025
> 
> 赞同：1
> 
> 时间：2013-03-23T06:25:47.123
> 
> 标签：xml, eclipse, testng

![在此处输入图像描述](../Images/21ed49f8231ec7c175266fc1f541332e.png)

大家好，我的 Eclipse 中的每个人我都安装了 Testng，但是对于某些 xml，没有显示 testng 选项，如图所示。所以请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-18T17:13:23.137

我遇到过同样的问题。当我在下面删除多余的行和空格时，它得到了修复。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd">
<suite name="Suite" parallel="tests" thread-count="5"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T15:45:46.057

TestNG 插件似乎没有安装，您可以通过进入“关于 Eclipse”对话框然后进入“安装详细信息”来验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-16T14:18:26.173

将 testng-failed.xml 或任何工作 xml 的内容复制到 testng.xml 并使用您的信息更新必要的行并尝试。它应该工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-20T13:58:06.190

您一定是使用了错误的标签约定，这就是它没有出现的原因 在项目中创建一个名为 testng.xml 的新文件，并将以下代码复制粘贴到您的 testng.xml 文件中，并根据您的包更改 packagename.class_name。你必须得到那个选项。如果你还是不明白，请告诉我

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd" >
<suite name="SuiteA"  > 
<!-- suite name="Suite Name" AND Please remember all the tag names should be lowered case otherwise the sytem will throw an error --> 

             <test name="TestA1" allow-return-values="true">
                     <classes>
                       <!-- packagename.Testcase class name  -->
                             <class name ="com.qtpselenium.suiteA.TestCaseA1" />
                     </classes>
             </test>

             <test name="TestA2" allow-return-values="true">
                     <classes>
                       <!-- packagename.Testcase class name  -->
                             <class name ="com.qtpselenium.suiteA.TestCaseA1" />
                     </classes>
             </test>

</suite> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-23T06:37:03.600

而不是右键单击 testing.xml 尝试右键单击 Agency_test 然后尝试运行它。

# multithreading - 事件驱动有什么魔力？

> ID：15584035
> 
> 赞同：3
> 
> 时间：2013-03-23T06:27:33.993
> 
> 标签：multithreading, node.js, load-balancing, event-driven

在阅读了几篇关于事件驱动和 nodejs 的帖子后，我看到的唯一优点是事件驱动避免了线程的内存分配，并在可能的情况下用通知代替了轮询。

其他优点都是有争议的：

1.  多线程程序比单线程程序更容易出错。

    **争论：**对于 web 应用来说，请求是相互独立的，只要处理函数没有副作用；如果所有 IO 部分都由数据库服务器处理，则无需担心多线程。

2.  事件驱动的方法不会阻塞 IO，因此可以处理更多的请求。这种优势似乎是事件驱动的最重要特征。在[这个](http://code.danyork.com/2011/01/25/node-js-doctors-offices-and-fast-food-restaurants-understanding-event-driven-programming/)例子中，它与医生办公室进行了比较，我认为这是不合适的。

    **争论：**在医生办公室的例子中，接待员不等待病人填写表格，而是在前一个病人填写表格时为其他病人服务。这是一个误导性的例子。

    一个。如果我们将患者解释为向服务器发送请求的客户端。服务器当然不会阻止客户在自己的浏览器中填写表格。当客户端完成表单并向服务器发送 http POST 时，服务器将开始工作。在 nodejs 存在之前，Web 已经是一个事件驱动的系统。所以这个例子对于解释服务器端事件驱动编程是无效的。

    湾。有人会说，我们应该把患者填表理解为服务端IO密集型操作。但不同的是：我们不为患者填写表格付费，但我们为 IO 密集型手术付费。

    所以我的观点是，即使耗时的操作没有阻塞你当前的线程，也会有其他线程，或者进程或数据库服务器被阻塞。我多次看到 nodejs 可以提供 10k 个并发连接，因为它没有阻塞。我想说，如果没有足够的其他线程或进程或服务器来处理耗时的部分，那是不可能的。

在这种情况下，事件驱动无非就是使用 Nginx 进行负载均衡，只不过负载均衡是对应用程序的请求进行均衡，而事件驱动则是将请求均衡到耗时的操作，这将负载均衡层向后移动。这样做的唯一好处是我在这个问题开头提到的两个：1.它避免了线程的内存分配。2\. 尽可能用通知代替轮询。

感谢您阅读至此，我的问题是：我的理解是否正确？我在论证中犯了什么错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T06:57:47.803

正如 ChaosPandion 在评论中所说，您似乎正在追赶时尚。基于事件的编程只是通过不同权衡来管理通过程序的数据流的另一种方法。对于某些应用程序，它使事情变得非常容易，对于其他应用程序（例如 CPU 驱动的问题），它并不是特别好。

许多应用程序没有任何非常耗时的操作。在您访问数据库的示例中，这只是等待响应（事件）的应用程序。

基于事件还可以节省大量管理线程之间通信的编程工作。

对于另一个观点，请参阅“[并发不是并行](http://blog.golang.org/2013/01/concurrency-is-not-parallelism.html)”和[Effective Go 中的并发部分](http://golang.org/doc/effective_go.html#concurrency)。

# c# - 不只按姓氏搜索

> ID：15584036
> 
> 赞同：2
> 
> 时间：2013-03-23T06:27:34.470
> 
> 标签：c#, sql

在我的网络应用程序中，我有一个搜索框，以便我可以使用名字或姓氏搜索我的数据库，它将在我的网络应用程序中显示结果。用户输入名字或姓氏。如果按名字查询搜索运行正常，但如果用户仅按姓氏搜索它显示表中的所有数据不显示像姓氏这样的数据

```
 string sql = @"SELECT opd_id AS [OPD No]
       , opd_date AS DATE
       , opd_dpt AS DEPARTMENT
       , opd_pfname + ' ' + opd_plname AS [Patient NAME]
       , opd_age AS AGE
       , opd_gender AS GENDER
       , opd_mob AS [MOBILE NO]
       , opd_fthrname AS [FATHER NAME]
       , opd_hsbndname AS [HUSBAND NAME]
       FROM tbl_OPD 
        WHERE opd_pfname like'%" + fname + @"%' 
        OR opd_plname like'%" + lname + @"% '
        ORDER BY DATE DESC"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T06:49:56.633

额外的空白区域

```
OR opd_plname like'%" + lname + @"% ' 
```

空白^

另外，请注意[sql injection](http://en.wikipedia.org/wiki/SQL_injection)，您可以使用[准备好的 sql 语句](http://en.wikipedia.org/wiki/Prepared_statement)和参数绑定来修复它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T06:51:58.480

如果没有看到更多代码，**可能**是您只填充了`fname`or变量中的一个。`lname`假设是这种情况，您可以使用此代码。

```
// this assumes that you have only have 1 input for both the first name and lastname 
// and are storing it in a variable named searchForName
using (var connection = new SqlConnection("YOUR_CONFIGURATION_CONNECTION_STRING"))
{
    using (var command = new SqlCommand("SELECT opd_id AS [OPD No], opd_date AS DATE, opd_dpt AS DEPARTMENT, opd_pfname + ' ' + opd_plname AS [Patient NAME], opd_age AS AGE, opd_gender AS GENDER, opd_mob AS [MOBILE NO], opd_fthrname AS [FATHER NAME], opd_hsbndname AS [HUSBAND NAME] FROM tbl_OPD WHERE (opd_pfname like @p0 OR opd_plname like @p0) ORDER BY DATE DESC", connection))
    {
        command.Parameters.Add(new SqlParameter("@p0", string.Format("%{0}%", searchForName)));

        // rest of your code here E.G., sComm.ExecuteNonQuery();
    }
} 
```

如果您知道两个变量都已填充，请尝试此代码块

```
using (var connection = new SqlConnection("YOUR_CONFIGURATION_CONNECTION_STRING"))
{
    using (var command = new SqlCommand("SELECT opd_id AS [OPD No], opd_date AS DATE, opd_dpt AS DEPARTMENT, opd_pfname + ' ' + opd_plname AS [Patient NAME], opd_age AS AGE, opd_gender AS GENDER, opd_mob AS [MOBILE NO], opd_fthrname AS [FATHER NAME], opd_hsbndname AS [HUSBAND NAME] FROM tbl_OPD WHERE (opd_pfname like @p0 OR opd_plname like @p1) ORDER BY DATE DESC", connection))
    {
        command.Parameters.Add(new SqlParameter("@p0", string.Format("%{0}%", searchForFirstName)));
        command.Parameters.Add(new SqlParameter("@p1", string.Format("%{0}%", searchForLastName)));

        // rest of your code here E.G., sComm.ExecuteNonQuery();
    }
} 
```

PS。正如其他人所说，此处显示的代码有些不安全，您应该尽一切努力避免 Sql Injection 攻击。

# cocoa - 归档具有关系的核心数据实体

> ID：15584042
> 
> 赞同：0
> 
> 时间：2013-03-23T06:28:43.417
> 
> 标签：cocoa, core-data

我希望能够支持显示核心数据实体的 tableview 行的复制和粘贴。这个实体有一个属性和两个关系。当我使用 Apple 推荐的字典归档技术（来自“NSPersistentDocument 核心数据教程”）时，我发现关系会引发错误。这是发生问题的基本代码：

```
for (id sectionObject in selectedSectionsArray){
    NSDictionary *thisDictionary = [sectionObject dictionaryRepresentation];   // 'sectionObject' has 1 attribute and 2 relationships (one-to-many)
    [copyObjectsArray addObject:[sectionObject dictionaryRepresentation]];
}
NSPasteboard *generalPasteboard = [NSPasteboard generalPasteboard];
[generalPasteboard declareTypes:[NSArray arrayWithObjects:MSSectionsPBoardType, NSStringPboardType, nil] owner:self];
NSData *copyData = [NSKeyedArchiver archivedDataWithRootObject:copyObjectsArray];   // Here's where it crashes. ERROR MESSAGE: "-[NSManagedObject encodeWithCoder:] unrecognized selector sent to instance 0x22fd410" 
```

因此，似乎将关系复制到粘贴板的唯一方法必须是归档其 URI。在这种情况下，我必须处理引用临时 ID 的麻烦。有人可以确认是这种情况吗？有必要这么难吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T19:23:17.167

你没有仔细阅读那个文件。在**Custom Employee Logic**部分中，它解释了由于那里描述的几个原因，*不会复制关系。*然后解释代码如何处理仅复制特定属性。就选择要复制的特定属性而言，您似乎遵循了文档，而不是忽略了关系。

至于你看到的错误，

```
-[NSManagedObject encodeWithCoder:] unrecognized selector sent to instance 0x22fd410 
```

发生这种情况是因为您正在调用`archivedDataWithRootObject:`包含不符合的对象的字典`NSCoding`，特别是您的托管对象。像这样的归档仅适用于属性列表类型——对于其他所有内容，您必须实现`NSCoding`，否则会出现此错误。

如果要复制关系，复制托管对象 ID 的 URI 可能是合理的。如果您在使用临时对象 ID 时遇到问题，请执行以下操作之一：

*   保存更改
*   调用`obtainPermanentIDsForObjects:error:`对象获取永久 ID 而不保存。

# c# - 数据寻呼机不显示

> ID：15584048
> 
> 赞同：0
> 
> 时间：2013-03-23T06:29:11.117
> 
> 标签：c#, asp.net, logic

大家好，这是我的产品展示页面。我在其中包含了 Datapager 控件。所有产品都显示在单个页面中...但未显示用于在页面之间导航的寻呼机控件

这是我的代码....需要帮助来修复此代码

```
 <asp:ListView runat="server" ID="listView" GroupItemCount="4">
        <LayoutTemplate>
            <div style="width: 650px;">
                <asp:PlaceHolder runat="server" ID="groupPlaceHolder" />
            </div>
        </LayoutTemplate>
        <GroupTemplate>
            <div style="clear: both;">
                <asp:PlaceHolder runat="server" ID="itemPlaceHolder" />
            </div>
        </GroupTemplate>
        <ItemTemplate>
            <div class="productItem">
                <img src='<%# Eval("p_location") %>' height="120" width="120" alt="Not found" />
                <div>
                    <b>
                        <%# Eval("p_name") %></b></div>
                <div>
                    Price: $<%# Eval("p_price") %></div>

            </div>
        </ItemTemplate>
        <ItemSeparatorTemplate>
            <div class="itemSeparator">
            </div>
        </ItemSeparatorTemplate>
        <GroupSeparatorTemplate>
            <div class="groupSeparator">
            </div>
        </GroupSeparatorTemplate>           
    </asp:ListView>
    <div class="datapager">
        <asp:DataPager ID="DataPager1" PageSize="8" PagedControlID="listView" runat="server">
            <Fields>
                <asp:NextPreviousPagerField ButtonType="Button" />
            </Fields>
        </asp:DataPager>
    </div> 
```

代码隐藏 C#：

```
 protected void Page_Load(object sender, EventArgs e)
    {
    SqlConnection conn = new SqlConnection("ConnectionString");
    conn.Open();
    SqlDataAdapter da = new SqlDataAdapter("SELECT * FROM p_detail", conn);
    DataTable dt = new DataTable();
    da.Fill(dt);
    conn.Close();
    listView.DataSource = dt;
    listView.DataBind();
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T06:59:30.390

您需要创建该列表视图的事件。
1\. 转到 listview 属性
2\. 双击名为“PagePropertyChanging”的事件。这将创建一个事件，例如`onpagepropertieschanging="ListView_PagePropertiesChanging"`
3.source code

```
protected void ListView_PagePropertiesChanging(object sender, PagePropertiesChangingEventArgs e)

{
    DataPager1.SetPageProperties(e.StartRowIndex, e.MaximumRows, false);
    ListView.DataSource = dt;
    ListView.DataBind();
} 
```

# c# - CDO.Message.Fields[].Name 包含奇怪的字符

> ID：15584049
> 
> 赞同：2
> 
> 时间：2013-03-23T06:29:41.743
> 
> 标签：c#, smtp, mime, adodb, cdo.message

我正在阅读一个电子邮件文件，其中文件中的第一行（因此标题中的第一行）是：

X-RCPT-TO-LIST: 1,2,3

我正在使用 CDO 和 ADODB 加载它，如下所示：

```
 ADODB.Stream stream = new ADODB.Stream();
        stream.Open(Type.Missing, ADODB.ConnectModeEnum.adModeUnknown, ADODB.StreamOpenOptionsEnum.adOpenStreamUnspecified, String.Empty, string.Empty);
        stream.LoadFromFile(filename);
        stream.Flush();
        CDO.Message msg = new CDO.Message();
        msg.DataSource.OpenObject(stream, "_Stream");
        msg.DataSource.Save(); 
```

然后我试图得到这样的领域：

```
ADODB.Field f = msg.Fields["urn:schemas:httpmail:X-RCPT-TO-LIST"]; 
```

这不起作用，它返回一个空字段（空值）。

查看调试器中的字段，我看到字段名称是：

```
urn:schemas:mailheader:ÿþx-rcpt-to-list 
```

我假设如果我寻找那些奇怪的字符，我的代码可能会起作用，但我担心它们可能会从一封电子邮件更改为下一封。任何想法为什么要添加这些奇怪的字符？有没有更好的方法来访问自定义标头字段（无需自己读取文件并解析它）？

我正在使用所有最新补丁（我认为是 SP3）在 Windows XP 上运行此测试。

抱歉，如果我标记错了，我很难找到这个标记。如果不明显，我正在使用 C#。

这是整个电子邮件文件，我删除了一些垃圾（一些出于隐私原因），但我确实使用这个确切的版本重新测试并得到了相同的结果：

```
X-RCPT-TO-LIST: 1,2,3
Received: by mail-ia0-f172.google.com with SMTP id l29so4135896iag.3
        for <423a777e2af27f463b801fe2eb2242cbdf1d934000000001@users.domain.com>; Fri, 22 Mar 2013 19:52:00 -0700 (PDT)
MIME-Version: 1.0
X-Received: by 10.50.195.134 with SMTP id ie6mr6320542igc.6.1364007120542;
 Fri, 22 Mar 2013 19:52:00 -0700 (PDT)
Received: by 10.50.169.39 with HTTP; Fri, 22 Mar 2013 19:52:00 -0700 (PDT)
Date: Fri, 22 Mar 2013 19:52:00 -0700
Message-ID: <XXXXXXXX63pPLB9QYu=04W3mU3Ynhkjf2bdYYZqv5oVvQ__u1vg@mail.gmail.com>
Subject: test4
From: <xxxxx2003@gmail.com>
To: 423a777e2af27f463b801fe2eb2242cbdf1d934000000001 <423a777e2af27f463b801fe2eb2242cbdf1d934000000001@users.domain.com>
Content-Type: multipart/alternative; boundary=14dae9340b45e63f6204d88ea7fa

--14dae9340b45e63f6204d88ea7fa
Content-Type: text/plain; charset=UTF-8

test4

-- 
xxxxxx@gmail.com
I don't check *this account* very often

--14dae9340b45e63f6204d88ea7fa
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr">test4<br clear=3D"all"><div><br>-- <br><div><a href=3D"mai=
lto:xxxxx@gmail.com" target=3D"_blank">xxxxx@gmail.com</a></div>
<div>I don&#39;t check <b>this account</b> very often</div>
<div>=C2=A0</div>
</div></div>

--14dae9340b45e63f6204d88ea7fa-- 
```

X-RCPT-TO-LIST 行是由我的电子邮件服务器中的代码添加的，该代码将 RCPT TO:<> 行转换为内部用户 ID。这样我处理这些文件的线程以后就知道将邮件放在哪里。我不想将信息保存在单独的文件或类似的文件中，因为我喜欢我当前的设计，我只想知道为什么 CDO/ADODB 将我的消息头转换为一些奇怪的名称，比如混合匹配Unicode vs ASCII 或者一些愚蠢的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T17:25:19.943

大多数时候，作为文本流的第一个符号的“ÿþ”是所谓的“字节顺序标记”。参见例如。[维基百科条目](http://en.wikipedia.org/wiki/Byte_order_mark)。它们出现在流中是因为它们位于正在读取的文件中。如果使用十六进制编辑器打开文件并检查其第一个字节，则必须显示 BOM。例如，“ÿþ”是 0xFFFE 的文本表示。

为什么这些符号首先存在于文件中？这取决于文件的创建方式。这个问题可能看起来很有帮助：[我可以在没有 BOM 的情况下使用 UTF-8 导出 excel 数据吗？](https://stackoverflow.com/questions/4143524/can-i-export-excel-data-with-utf-8-without-bom).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T18:01:50.330

除非有人有更好的答案，比如我加载消息的代码可能有错误，否则我将接受这个作为答案......

它似乎是 CDO 或 ADODB 中的一个错误，它对任何消息的第一行执行此操作。我通过删除我的 X-RCPT-TO-LIST 行进行了测试，因此第一行是标准的“Received:”行，在这种情况下，Received 行的名称中添加了奇怪的字符。我还测试了其他几封以不同项目作为第一行的电子邮件，在所有情况下，第一行总是在名称中添加了奇怪的字符。我只能想象这个错误要么已经修复（我使用的是相当老的 XP），要么大多数使用 CDO 的人没有注意到，因为他们没有对 Received: 行做任何事情，这通常是第一行在标题中。

对我来说，为了避免这个问题，我将在顶部添加一个额外的行，所以我将拥有：

X-CDO-FIX: 修复 X-RCPT-TO-LIST: 1,2,3 ...此处为正常标头...

测试和工作，所以我很高兴。将开放几天，以防有人可以提供更多值得我开始的赏金的信息，这也可能对其他人有所帮助。

# android - 如何在android中构建动画

> ID：15584051
> 
> 赞同：0
> 
> 时间：2013-03-23T06:29:58.173
> 
> 标签：android, animation

我想给我的菜单添加动画，例如当它出现时它的大小很大并且在外观大小减小一点后，如何四处走动

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T12:56:10.270

您应该使用 set 内的 scale 属性。像这样的东西：

```
<set xmlns:android="schemas.android.com/apk/res/android"
android:interpolator="@android:anim/linear_interpolator">
   <scale android:fromXScale="2.0" android:fromYScale="2.0"
          android:toXScale="1.0" android:toYScale="1.0" 
          android:duration="700" />
</set> 
```

# vb.net - 对象的深拷贝

> ID：15584053
> 
> 赞同：9
> 
> 时间：2013-03-23T06:30:12.837
> 
> 标签：vb.net, class, object, visual-studio-2012, deep-copy

我可以请一些帮助来执行对象的深层复制吗？

这是我的代码：

```
Option Explicit On
Option Strict On

<Serializable> Public Class [Class]
Private _Name As String
Private _ListOfFields As New List(Of Field)

Public Property Name As String
    Get
        Return _Name
    End Get
    Set(value As String)
        _Name = value
    End Set
End Property

Public Property ListOfFields As List(Of Field)
    Get
        Return _ListOfFields
    End Get
    Set(value As List(Of Field))
        _ListOfFields = value
    End Set
End Property

Public Function Clone() As [Class]
    Return DirectCast(Me.MemberwiseClone, [Class])
End Function

End Class 
```

Field 也是我自己编写的一个类。

我需要修改哪些 Clone() 函数才能返回深层副本？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-03-09T19:07:28.563

您可以通过调用此辅助函数来创建任何类的克隆：

```
Function DeepClone(Of T)(ByRef orig As T) As T

    ' Don't serialize a null object, simply return the default for that object
    If (Object.ReferenceEquals(orig, Nothing)) Then Return Nothing

    Dim formatter As New BinaryFormatter()
    Dim stream As New MemoryStream()

    formatter.Serialize(stream, orig)
    stream.Seek(0, SeekOrigin.Begin)

    Return CType(formatter.Deserialize(stream), T)

End Function 
```

这是通过将类中的所有信息序列化为可移植对象然后重写它以切断任何引用指针来实现的。

> **注意**：必须标记传入的类和它作为属性公开的任何其他类[`<Serializable()>`](https://msdn.microsoft.com/en-us/library/System.SerializableAttribute(v=vs.110).aspx)才能使用[`BinaryFormatter.Serialize`](https://msdn.microsoft.com/en-us/library/System.Runtime.Serialization.Formatters.Binary.BinaryFormatter.Serialize(v=vs.110).aspx)

如果你想让你自己的类暴露可克隆方法本身，你可以[`ICloneable`](https://msdn.microsoft.com/en-us/library/system.icloneable(v=vs.110).aspx)像这样添加方法并实现接口：

```
<Serializable()>
Public Class MyClass : Implements ICloneable

    'NOTE - The Account class must also be Serializable
    Public Property PersonAccount as Account
    Public Property FirstName As String

    Function Clone(ByRef orig As MyClass) As MyClass Implements ICloneable.Clone

        ' Don't serialize a null object, simply return the default for that object
        If (Object.ReferenceEquals(orig, Nothing)) Then Return Nothing

        Dim formatter As New BinaryFormatter()
        Dim stream As New MemoryStream()

        formatter.Serialize(stream, orig)
        stream.Seek(0, SeekOrigin.Begin)

        Return CType(formatter.Deserialize(stream), T)

    End Function

End Class 
```

> **注意**：请注意，ICloneable[存在争议](https://stackoverflow.com/q/699210/1366033)，因为它不会向调用者指示它是执行深层克隆还是浅层克隆。实际上，您不需要接口就可以将方法添加到您的类中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-23T06:49:05.560

（顺便说一句，我可能会将您的班级命名为“班级”以外的名称）。

如果您想手动完成所有操作，则需要执行以下步骤：

1.  确保您的 Field 类也实现了深拷贝`Clone()`方法。如果您还没有这样做，那么这可能涉及它的`Clone()`方法创建一个新的类型对象，`Field`然后根据当前对象填充它的每个属性。如果您的`Field`类具有其他类/复杂类型的属性（例如您自己创建的类），那么它们也应该实现`Clone()`并且您应该调用`Clone()`它们来创建新的深层副本
2.  在`Clone()`类的方法中，您将创建一个 [Class] 类型的新对象，例如通过调用其构造函数
3.  将`Name`新对象的`Name`属性设置为当前对象的属性
4.  创建一个新`List(Of Field)`的，我们称之为 listA 作为示例
5.  遍历当前列表并将每个列表项的克隆分配给 listA。例如：

* * *

```
For Each item in _ListOfFields
    listA.Add(item.Clone())
End 
```

* * *

6.  之后，您可以将新列表（listA）分配给您在`Clone()`方法中创建的对象

[在此处](http://programmingcorner.blogspot.com/2007/01/deep-cloning-in-net.html)描述的 VB.NET 中有一种替代（可能更好）的手动方法。

如果您想作弊，那么您可以序列化现有对象，然后将其反序列化为一个新对象，就像[这里的技术一样](http://headjoints.blogspot.com/2006/09/create-deep-copy-of-object-vbnet.html)

我会说先序列化然后反序列化技术是“最简单”的技术。

# fonts - 如何“解码”字体文件的 eexec？

> ID：15584054
> 
> 赞同：4
> 
> 时间：2013-03-23T06:30:37.457
> 
> 标签：fonts, adobe, postscript, glyph

我有一个[.pfa 字体文件](http://www.postscript.org/FAQs/language/node39.html)，我想阅读渲染字体的“算法”。但是，大部分信息都隐藏在行中的二进制中：

```
currentfile eexec
743F8413F3636CA85A9FFEFB50B4BB27302A5F6C876586CCC1670A7EF5521E6ADE15AAB4
DD2DDDB83735311FC63DB80D2C96AECFA05BB67F865EA35934B4B79A203A8DD489B09C79
FF6EB9DBCFD889C3E73F8C94BC342AF671D6F688870A62EE1A0DF216E150FFEC64A8C2B7
509AD05C011599C1AD84E6C4B668E07EA219BD72663D8AF4CA8EC8E23AA90DE90BE940C6
6DB849CEDB3B64961365A7CCE47F4FC9E30FDEE4B14B90C2E0D8C344EBC974EABF417B3D
28251A78ACEE2BFC4212B1E3E9C7EBC3262821EE98E538713C64DF0BC13C19337B1307DB
D795D285F959C924FC14AEF7E9D406406CDEE1A35377887A16B13DD51717A86284369FA7
6ABB6A4488B9174A561DA854C33821F3172E4CF956EC9B65F829D69E02BC0EE23044DB1D
9A4D45A14A3998115BEE5DDC582F158DB2E.................. 
```

我们如何“解码”这些信息？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-23T09:48:59.757

除非您真的想编写自己的 eexec 解密，然后自己的 charstring 解密，否则我建议您简单地使用 t1disasm。如果您在 Linux 发行版上运行，您可能会找到一个 t1utils 的软件包，其中应该包含这个，或者您可以在许多地方获取源代码（Google 是您的朋友），这是一个：

[http://freepcb.googlecode.com/svn/clibpdf/trunk/util/t1utils-1.9/t1disasm.c](http://freepcb.googlecode.com/svn/clibpdf/trunk/util/t1utils-1.9/t1disasm.c)

如果您使用的是 Windows，您可以在此处查找 t1utils 软件包 fopr WINdows ：

[http://gnuwin32.sourceforge.net/packages/t1utils.htm](http://gnuwin32.sourceforge.net/packages/t1utils.htm)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-11-14T12:48:19.173

我发现[这个文档对解密 eexec 加密](https://www.math.ubc.ca/~cass/piscript/type1.pdf) **很有帮助**。使用那里提到的代码在[python](/questions/tagged/python "显示标记为“python”的问题")中的一个简单示例。

```
#Getting the eexec binary, make sure you exclude the ascii part in the end, after the binary portion 
text = open('fontfile.pfa').read()
raw_hex = text.split('eexec')[1]
decarr = list()
count = 0
hex_code = str()

#Converting pairs of the hexadecimal digits to decimal, e.g. ff -> 255, and storing it in an array decarr
for i in range(len(raw_hex)):
    if raw_hex[i] == '\n':
        decarr.append(raw_hex[i])
        continue
    else:
        hex_code = hex_code + raw_hex[i]
        count += 1
        if count == 2:
            decarr.append(int(hex_code, 16))
            count = 0
            hex_code = str() 
```

一旦我们有了一个十六进制数字对的十进制等效数组，我们就可以按照[Adob​​e Type 1 Font Format Specification](http://www.adobe.com/content/dam/acom/en/devnet/font/pdfs/T1_SPEC.pdf)的第 7 章中的说明进行解密。常量如规范中所述。

```
c1 = 52845
c2 =  22719
R = 55665
p = list()
for i in range(0,len(decarr)):
    if decarr[i] is not '\n':
        p.append(decarr[i]^(R >> 8))
        R = ((decarr[i] + R)*c1 + c2) & ((1 << 16) - 1)
    else:
        p.append(decarr[i])
decrypted = list()
for i in range(len(p)):
    if p[i] is not '\n':
        decrypted.append(chr(p[i]))
    else:
        decrypted.append(p[i]) 
```

希望能帮助到你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-17T06:42:11.697

我认为 KenS 的答案更好，但是，出于好奇，这里有一个 emacs 函数，它对二元输入进行 eexec 解密（即不解密十六进制输入，也不解密字符串）。该算法来自亨利回答中的文档。

```
(defun eexec-decrypt ()
  "decrypt eexec binary block (see Type1 font);
   NB: no charstring decryption"
  (interactive)
  (search-forward "currentfile eexec")(forward-char 1)
  (with-output-to-temp-buffer (concat (buffer-name) "-eexec-decripted")
    (setq r 55665)
    (setq c1 52845)
    (setq c2 22719)
    (setq here (point))
    (setq count 4)
    (while (< here (point-max)) ; I'm not really sure where to stop...
      (setq cipher (get-byte here))
      (setq plain (logxor cipher (lsh r -8)))
      (cond ((> count 0) ; skip first 4 bytes
         (setq count (- count 1)))
        (t (princ (byte-to-string plain))))

      (setq r (mod (+ c2 (* c1 (+ cipher r))) 65536))
      (setq here (+ 1 here))))) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-02-06T02:35:23.497

真正巧妙的是，任何有耐心的七年级学生都可以通过视觉阅读 eexec 文件！

只需插入一个随机字符并查看您的堆栈和错误报告。每隔几十个字符重复一次。

就像语音响应保险箱一样“尝试向左单击三下”。

# android - 如何在 ImageView 上设置外发光效果？

> ID：15584067
> 
> 赞同：4
> 
> 时间：2013-03-23T06:32:27.627
> 
> 标签：android, android-imageview, glow

我试过这个。但它不适用于 ImageView。但此代码未在 Image 上设置任何外发光。

```
 android:shadowColor="#7ccb16"
    android:shadowDx="0"
    android:shadowDy="0"
    android:shadowRadius="3" 
```

指导我如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T06:37:17.973

参考表格[在这里](https://stackoverflow.com/questions/3693234/custom-imageview-with-drop-shadow)

在 android sdk 中使用 Ninepatch 工具。

```
<ImageView
        android:id="@+id/image_test"
        android:background="@drawable/drop_shadow"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="6px"
        android:paddingTop="4px"
        android:paddingRight="8px"
        android:paddingBottom="9px"
        android:src="@drawable/pic1"
        /> 
```

我希望这对你有用。

# javascript - 在 Html 页面中显示 Excel 图表

> ID：15584068
> 
> 赞同：1
> 
> 时间：2013-03-23T06:32:32.323
> 
> 标签：javascript, html, excel, charts

我有一个包含多个表格和图表的 EXCEL 文件。我想创建一个网页来显示特定的表格和图表。我使用 java 脚本来显示表格。但找不到显示图表的方法。图表我的意思是它包含一个饼图或条形图。

是否可以使用 java 脚本显示？还是我必须使用 JSP/其他东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T07:03:10.390

看看[谷歌图表工具](https://developers.google.com/chart/)。这是一个带有 javascript 源代码的[示例。](https://google-developers.appspot.com/chart/interactive/docs/gallery/piechart)如果您在服务器端构建表格，您可能希望将数据向下传递 JSON 编码，然后同时构建表格和图表，而无需两次传递数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T13:26:16.440

一种更简单的方法是使用像 oomfo 这样的免费工具，它是一个用于创建图表的 PowerPoint 插件。它允许您从 excel 中提取数据、创建图表，然后将整个幻灯片导出为 HTML - 图表采用 Flash 和 JavaScript（备用）。只需在输出网页中添加一行代码即可仅呈现 JavaScript 图表。

# uitableview - 图像中的这些 UITableView 行是什么？

> ID：15584069
> 
> 赞同：1
> 
> 时间：2013-03-23T06:32:43.123
> 
> 标签：uitableview, uicollectionview

我在 UIView 上有一个 UITableView。此 UIView 在 UICollectionViewCell 中，这意味着我可以执行您在图像中看到的操作。一个新的 UICollectionViewCell 从右侧出现。当一个新单元格出现在可见矩形上时，它会稍微调整大小，您可以看到右边的单元格稍微小一些。

当这个新单元格“滑动”时，表格视图有一些黑线显示出来。它不是实际的分隔线，因为您可以清楚地看到它们，进一步关闭它们或使它们与单元格相同的颜色不会改变任何事情。

所以谁能告诉我这些黑线是什么，我是否可以直接摆脱它们或以某种方式覆盖它们。

![在此处输入图像描述](../Images/2832247574269df681552dbd665559c5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T07:28:09.373

我相信这些线是细胞分离器。您可以将[separatorStyle](https://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)属性设置为[UITableViewCellSeparatorStyleNone](https://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewCell_Class/Reference/Reference.html)。

```
tableView.separatorStyle = UITableViewCellSeparatorStyleNone; 
```

# java - 如何在迭代它时从arraylist中仅删除一个元素

> ID：15584071
> 
> 赞同：0
> 
> 时间：2013-03-23T06:32:55.933
> 
> 标签：java

我想删除与 orderID = 542 匹配的单个元素。但问题是这个程序正在从该列表中删除两个元素。在真正的程序中，通过一个 arraylist 进行迭代，我调用一个函数来检查是否要从该列表中删除该元素列表和该函数假设从列表中删除元素

```
package testMap;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.Iterator;
import java.util.Map;
import java.util.Map.Entry;
import java.util.Set;

public class TestHashMap {
    static ArrayList<LimitOrder> a = new ArrayList<>();

    public static void main(String args[]) {
        create();
    }

    public static void create() {
        LimitOrder l1 = new LimitOrder(1, 100, "145");

        LimitOrder l2 = new LimitOrder(1, 100, "542");

        LimitOrder l3 = new LimitOrder(1, 100, "355");

        a.add(0, l1);
        a.add(1, l2);
        a.add(2, l3);

        Iterator<LimitOrder> i = a.iterator();
        while (i.hasNext()) {
            boolean toremove = false;
            LimitOrder l = i.next();
            toremove=remove();
            if (toremove == true)
            {
                System.out.println("Removed "+l.orderID);
                i.remove();
            }
        }

    }

    public static boolean remove() {
        boolean flag = false;
        Iterator<LimitOrder> i = a.iterator();
        while (i.hasNext()) {
            LimitOrder l = i.next();
            if (l.orderID.equals("542")) {
                flag = true;
            }
        }
        return flag;

    }

} 
```

请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T06:37:15.927

方法中不需要有迭代器，您可以从方法`remove`中传递当前。`LimitOrder``create`

```
static ArrayList<LimitOrder> a = new ArrayList<>();

public static void main(String args[]) {
    create();
}

public static void create() {
    LimitOrder l1 = new LimitOrder(1, 100, "145");

    LimitOrder l2 = new LimitOrder(1, 100, "542");

    LimitOrder l3 = new LimitOrder(1, 100, "355");

    a.add(0, l1);
    a.add(1, l2);
    a.add(2, l3);

    Iterator<LimitOrder> i = a.iterator();
    while (i.hasNext()) {
        LimitOrder l = i.next();
        if (remove(l))
        {
            System.out.println("Removed "+l.orderID);
            i.remove();
        }
    }

}

public static boolean remove(LimitOrder l) {
    if (l.orderID.equals("542")) {
        flag = true;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T07:35:28.787

The problem is that you are removing elements from the list that do not match. And that is happening because your test to decide if an element should be removed is wrong. You should be testing if *this* element matches ... not if *any* element matches.

The fix is to change the test to test just the current element; e.g.

```
 ...
    Iterator<LimitOrder> i = a.iterator();
    while (i.hasNext()) {
        LimitOrder l = i.next();
        if (isMatch(l)) {
            i.remove();
            System.out.println("Removed " + l.orderID);
        }
    }
    ...

public static boolean isMatch(LimitOrder l) {
    return l.orderID.equals("542");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T06:42:30.570

更新您的函数 remove() 以接收和检查当前迭代器值。

# php - 将mysql数据（其他语言的数据或具有某些特殊字符的数据）导出为php中的CSV文件

> ID：15584072
> 
> 赞同：0
> 
> 时间：2013-03-23T06:33:16.670
> 
> 标签：php, mysql, csv, export

在我的应用程序中，我从 mysql 表中获取内容并将其导出为 csv。该表包含其他语言字符和特殊字符，例如

```
 *♣ Joy ♣, 观弈路人, Qυееп ☺̐ '*̣, معين الاسلام,அரவிந்* 
```

但它不是 CSV 格式，而是显示为

```
 * ë¶€ì‚°ë¹„ì—”ë‚ ë ˆ, QÏ…ÐµÐµÐ¿ â˜ºÌ '*Ì£, Ù…Ø¹ÙŠÙ† Ø§Ù„Ø§Ø³Ù„Ø§Ù*….... 
```

是否可以显示像 DB 中的字符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-27T07:00:14.123

由于我对“非英语”字符进行了很多工作，因此正确显示和存储这些字符需要几件事。

没有特别的顺序（因为我不知道什么字符集最适合波斯语，我将使用 UTF-8，如果它不同，你只需使用你需要的那个）：

通过从 PHP header('Content-type: text/html; charset=utf-8'); 设置正确的标头，告诉您的浏览器您正在使用什么字符集。或在您的 html 中设置元标记，如下所示：

在数据库中，避免在列/表中混合不同的排序规则和字符集。我总是将数据库、表和列设置为 utf8_general_ci，这可以满足我的需要（英语、德语、塞尔维亚语、匈牙利语等语言）。

正如 Jan 所说，请阅读[http://dev.mysql.com/doc/refman/5.0/en/charset-connection.html](http://dev.mysql.com/doc/refman/5.0/en/charset-connection.html)您很可能需要在连接到数据库后立即执行类似 SET NAMES utf8 的查询。

所有这些都应确保正确显示 unicode 字符。然而，还有一件事可以覆盖这一切——网络服务器。Apache（不知道其他服务器）有一个 AddDefaultCharset 指令。在大多数设置中，这被保留为关闭，但我确实遇到了默认字符集设置为 latin1 的设置，因此覆盖了我所有的字符集设置。如果已设置，则在 httpd.conf（或类似的配置文件）中设置。如果您可以访问它，我建议将其设置为关闭。如果您不这样做，那么您可以使用放置在您的 webroot 中的 .htaccess 覆盖全局值，例如：AddDefaultCharset utf-8

# ruby-on-rails - 在创建新记录时使用 before_filter 时，如果发现重复，我如何跳到下一条记录？

> ID：15584073
> 
> 赞同：0
> 
> 时间：2013-03-23T06:33:43.033
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个`Question`和`Tag`模型。

我在我的`Question`模型中这样做：

```
 has_and_belongs_to_many :tags, before_add: :validates_tag

  def validates_tag(tag)
    if self.tags.include? tag
      next
    end
  end 
```

但我得到一个：

```
SyntaxError: /app/models/question.rb:30: Invalid next
    from /app/models/question.rb 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T07:04:56.613

更改`#validates_tag`为：

```
def validates_tag(tag)
  self.tags.include? tag
end 
```

# perl - Perl - 数组哈希：按值查找键

> ID：15584079
> 
> 赞同：2
> 
> 时间：2013-03-23T06:34:22.603
> 
> 标签：perl, search, hash, grep

我有一个数组哈希（HoA）。我一直在使用`$arrayrefs`. 但是，现在我需要检索`$key`基于`$arrayrefs`.

```
my %a =  ( 1 => "ONE" , 
           2 => "TWO" ,
           3 => " Three", );

my %aa =  ( 4 => [ 'ONE' , 'TWO', 'THREE'], 
            5 => ['one' , 'two', 'three'],
            6 => ['more', 'dos', 'some'],
);

my @array = ('ONE' , 'TWO', 'THREE');
my $array_ref = \@array;

# returns the $key where the $value is 'ONE'
my ($any_match) = grep { $a{$_} eq 'ONE' } keys %a;
print $any_match."\n"; # this returns '1', as expected.. Good!

my ($match) = grep { $aa{$_} eq @$array_ref } keys %aa;
print $match."\n";  # <--- error: says that match is uninitialized 
```

在最后一个`print`语句中，我希望它返回 4。有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T06:48:41.010

您不能将数组与`eq`. 一个简单的解决方案是将两个数组都转换为字符串并使用以下方法比较字符串`eq`：

```
my ($match) = grep { join("", @{$aa{$_}}) eq join("", @$array_ref) } keys %aa; 
```

为了比较数组，您还可以使用 CPAN 中的许多模块之一，例如[`Array::Compare`](http://search.cpan.org/perldoc?Array%3a%3aCompare),[`List::Compare`](http://search.cpan.org/perldoc?List%3A%3ACompare)等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T06:54:06.477

总是`use strict; use warnings;`。添加`use v5.10;`因为 Perl (v5.10+) 的智能匹配将用于比较数组。请执行下列操作：

```
my ($match) = grep { @{$aa{$_}} ~~ @$array_ref } keys %aa; 
```

此处使用智能运算符`~~`来比较数组。

# java - 无法创建将检查字段类别的规范

> ID：15584080
> 
> 赞同：0
> 
> 时间：2013-03-23T06:34:31.633
> 
> 标签：java, spring, jpa, predicate

实体订单包含字段：

`@ManyToOne(optional = false) private AbstractRequester requester;`

我想通过输入这个字段来获取数据。

我在文档中创建了规范，但是在

`page = orderRepository.findAll(spec, pageable);`

获取异常

`org.springframework.dao.InvalidDataAccessApiUsageException: org.hibernate.QueryException: could not resolve property: class of: ...order.Order`

我的规格：

```
@Override
    public Predicate toPredicate(Root<Order> root, CriteriaQuery<?> query, CriteriaBuilder cb) {
    Predicate megaPredicate = cb.conjunction();`
    ...
megaPredicate = cb.and(megaPredicate, cb.and(
                            cb.equal(root.get("requester").type(), cb.literal(PersonRequester.class))
...
return megaPredicate;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T08:08:35.350

您试图在查询中使用鉴别器列，这是非法的。

相反，直接在 上执行您的查询`PersonRequester`并从中删除有问题的子句`megaPredicate`。

# android - 在android中访问短信的电话号码

> ID：15584081
> 
> 赞同：2
> 
> 时间：2013-03-23T06:34:37.150
> 
> 标签：android, android-intent, android-broadcast

我是 android 的新手，我试图在收到新消息时获取短信的编号，我为此使用广播接收器。但是当收到一条新消息时，我的“广播接收器”课程无法正常工作。谁能帮我找出问题所在。在下面给出我的代码..

```
public class MainActivity extends Activity
{
     @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.test_layout);
    }

     public class MyBroadcastReciever extends BroadcastReceiver
{

    @Override
    public void onReceive(Context context, Intent intent) 
    {
        Bundle bundle = intent.getExtras();        
        SmsMessage[] msgs = null;
        String smsnumber = "";         
        if (bundle != null)
        {
            //---retrieve the sender number SMS received---
            Object[] pdus = (Object[]) bundle.get("pdus");
            msgs = new SmsMessage[pdus.length];            
            for (int i=0; i<msgs.length; i++)
            {
                msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                
                smsnumber =  msgs[i].getOriginatingAddress();         
            }
        } 
    }
}

} 
```

我已经在清单中给出了接收标签。

```
 <receiver android:name="com.aucupa.iack.MyBroadcastReciever" >
    <intent-filter>
        <action android:name="android.provider.Telephony.SMS_RECEIVED" />
    </intent-filter>
</receiver> 
```

也获得了接收短信的使用权限..

```
<uses-permission android:name="android.permission.RECEIVE_SMS" /> 
```

但是当一条短信没有来自 MyBroadcastReciever 类的响应时。当我调试控件时，MyBroadcastReciever 类没有响应。请帮我找出问题所在

最后我从你的帮助中得到了答案，在这里给出我的答案..

```
 public class MainActivity extends Activity
{

  MyBroadcastReciever broadcastreciever = new MyBroadcastReciever();
  static final String SOME_ACTION = "android.provider.Telephony.SMS_RECEIVED";
  IntentFilter intentFilter = new IntentFilter(SOME_ACTION);

  Intent i = new Intent(SOME_ACTION);
 @Override
protected void onCreate(Bundle savedInstanceState) 
{
super.onCreate(savedInstanceState);
setContentView(R.layout.test_layout);

sendBroadcast(i);
context.registerReceiver(broadcastreciever, intentFilter);
}

 public class MyBroadcastReciever extends BroadcastReceiver
{

@Override
public void onReceive(Context context, Intent intent) 
{
   if (intent.getAction() == "android.provider.Telephony.SMS_RECEIVED"){
    Bundle bundle = intent.getExtras();        
    SmsMessage[] msgs = null;
    String smsnumber = "";         
    if (bundle != null)
    {
        //---retrieve the sender number SMS received---
        Object[] pdus = (Object[]) bundle.get("pdus");
        msgs = new SmsMessage[pdus.length];            
        for (int i=0; i<msgs.length; i++)
        {
            msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                
            smsnumber =  msgs[i].getOriginatingAddress();         
        }
    } 
 }
}
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T04:56:30.527

在扩展 BroadcastReceiver 的 MyBroadcastReciever 中，在 onReceive() 中尝试此代码

```
 if (intent.getAction() == android.provider.Telephony.SMS_RECEIVED) {
                Bundle bundle = intent.getExtras();
                if (bundle != null) {
                       // your rest of code

                }
            } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T06:50:06.887

我认为问题在于注册/注销`BroadcastReceiver`以及删除清单声明。

定义`ReceiveMessages`为`Activity`需要监听来自`Service`.

然后，声明类变量，例如...

```
 ReceiveMessages myReceiver = null;
 Boolean myReceiverIsRegistered = false; 
```

`onCreate()`使用中`myReceiver = new ReceiveMessages();`

然后在`onResume()`...

```
if (!myReceiverIsRegistered) {
    registerReceiver(myRecever, new IntentFilter("com.mycompany.myapp.SOME_MESSAGE"));
    myReceiverIsRegistered = true;
} 
```

……在`onPause()`……

```
if (myReceiverIsRegistered) {
    unregisterReceiver(myReceiver);
    myReceiverIsRegistered = false;
} 
```

在`Service`创建和广播`Intent`...

```
Intent i = new Intent("com.mycompany.myapp.SOME_MESSAGE");
sendBroadcast(i); 
```

就是这样。使“动作”对您的包/应用程序是唯一的，即，`com.mycompany...`如我的示例所示。这有助于避免其他应用程序或系统组件可能尝试处理它的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T07:56:09.437

尝试清理和重建您的代码。有时我们需要在更新代码时进行清理。

您必须通过两种方式注册。

**静态和动态**

更多信息你可以看到这个[链接](http://www.vogella.com/articles/AndroidBroadcastReceiver/article.html)。

**或者**

```
Uri uriSMSURI = Uri.parse("content://sms/");
    Cursor cur = mContext.getContentResolver().query(uriSMSURI, null, null,null, null);
    cur.moveToFirst();
       id = cur.getString(cur.getColumnIndex("thread_id"));        
       protocol = cur.getString(cur.getColumnIndex("protocol"));
       Long date=cur.getLong(cur.getColumnIndex("date"));
       type = cur.getInt(cur.getColumnIndex("type"));
       String address=cur.getString(cur.getColumnIndex("address"));

       System.out.println("READING LOG...."+"\n thread_id:"+id+"\n protocol:"+protocol+"\n type:"+type+"\n address"+address);
           if(protocol==null && (type==2 || type==4 || type==6)){
             Log.i("======TEST====", "MESSAGE SENT.......number:"+address);
           }else if(protocol!=null && type==1){               
                Log.i("======TEST====", "MESSAGE RECEIVE.......number:"+address);
           }else{
            //something message
           } 
```

试试这个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T06:41:48.643

在清单中使用此前提

```
 <uses-permission android:name="android.permission.RECEIVE_SMS" />
   <uses-permission android:name="android.permission.SEND_SMS" /> 
```

和

```
 <receiver android:name="net.app.sms.MessageReceiver" >
        <intent-filter>
            <action android:name="android.provider.Telephony.SMS_RECEIVED" />
        </intent-filter>
    </receiver> 
```

尝试这个...

**已编辑**

```
 <receiver android:name="Your PackageName.ClassName" >
        <intent-filter>
            <action android:name="android.provider.Telephony.SMS_RECEIVED" />
        </intent-filter>
    </receiver> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-23T07:04:36.203

要接收定义的 BroadcastReceiver 的意图，您可以像这样在 AndroidManifest.xml 中删除接收器：

```
<receiver android:name="full qualified name of your receiver">
    <action android:name="the action interests you"/>
</receiver> 
```

或使用 Context.registerReceiver 注册它：

```
Context.registerReceiver(receiver, intentFilter); 
```

否则，系统无法知道您的接收器存在。对于一些特殊的敏感意图（如短信），您还需要在 AndroidManifest.xml 中删除权限。

# asp.net - 如何在运行时创建和编辑gridview以及添加行？

> ID：15584083
> 
> 赞同：0
> 
> 时间：2013-03-23T06:34:48.693
> 
> 标签：asp.net, gridview

我有一个由日历按钮和文本框组成的 aspx 页面。当我们单击日历按钮时，会出现一个日历，并且我在日历上选择的日期会出现在文本框中。现在我想要的是根据选择的日期从数据库中加载数据并允许用户编辑它。我还想让用户在运行时添加行。我需要在运行时创建网格视图吗？有人可以指点我一个方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T06:57:49.807

您不需要在运行时创建 gridview。您可以在标记中定义网格视图，而最初没有任何数据。您可以将日历设置为自动回发，并在服务器端捕获所选的新日期，根据该日期获取数据并将其绑定到您的网格视图。

就编辑数据而言，Gridviews 已经为此提供了支持，您需要编写的代码量在很大程度上取决于如何设置 gridview 的数据源。如果您使用具有适当设置的 SQL 数据源，您实际上不必编写除标记之外的任何一行代码（Google：Gridview SQLdatasurce 编辑 ASP.net）。

# algorithm - 查找子序列序列的算法

> ID：15584086
> 
> 赞同：2
> 
> 时间：2013-03-23T06:35:01.517
> 
> 标签：algorithm, sequence

序列 [1,2,3] 考虑。该序列有以下 6 种不同的序列：[1]and [2]and [3] and [1,2] and [2,3] and [1,2,3]

笔记！初始序列的长度最多可达 100 位。请帮我。如何制作以下序列？我喜欢更多地研究这种算法。请告诉我这种算法的名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T08:04:07.387

这是打印所有子序列的 ac 代码。算法使用嵌套循环。

```
 #include<stdio.h>

  void seq_print(int A[],int n)
{
    int k;
    for(int i =0;i<=n-1;i++)
    {
        for(int j=0;j<=i;j++)
        {
            k=j;
            while(k<=i)
            {
                printf("%d",A[k]);
                k++;

            }
            printf("\n");
        }
}

}

void main()
{
    int A[]={1,2,3,4,5,6,7,8,9,0};
    int n=10;
    seq_print(A,n);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T03:53:13.633

它被称为[幂集](http://en.wikipedia.org/wiki/Power_set)（在您的情况下，不包括空集）。

要构建幂集，请从其中包含空集的集开始；然后对于输入集中的每个项目，扩展幂集，其中包含迄今为止累积的所有子集，包括当前项目（在 Python 中）：

```
def powerset(lst):
    S = [[]]
    for item in lst:
        S += [subset + [item] for subset in S]
    return S 
```

例子：

```
print(powerset([1, 2, 3]))
# -> [[], [1], [2], [1, 2], [3], [1, 3], [2, 3], [1, 2, 3]] 
```

为了避免一次生成所有子集，可以使用递归定义：

*   空集的幂集是其中包含空集的集合
*   具有项目的`n`集合的幂集包含来自具有项目的集合的幂集的所有子集以及包含第-项`n - 1`的所有这些子集`n`。

```
def ipowerset(lst):
    if not lst: # empty list
        yield []
    else:
        item, *rest = lst
        for subset in ipowerset(rest):
            yield subset
            yield [item] + subset 
```

例子：

```
print(list(ipowerset([1, 2, 3])))
# -> [[], [1], [2], [1, 2], [3], [1, 3], [2, 3], [1, 2, 3]] 
```

生成幂集的另一种方法是为从零到输入集（[配方](http://docs.python.org/3/library/itertools.html#itertools-recipes)`r`）大小的所有子序列（组合）生成 -length 子序列（组合）：`r`[`itertools`](http://docs.python.org/3/library/itertools.html#itertools-recipes)

```
from itertools import chain, combinations

def powerset_comb(iterable):
    s = list(iterable)
    return chain.from_iterable(combinations(s, r) for r in range(len(s)+1)) 
```

例子：

```
print(list(powerset_comb([1, 2, 3])))
# -> [(), (1,), (2,), (3,), (1,2), (1,3), (2,3), (1,2,3)] 
```

另请参阅[通过集合进行组合的好方法是什么？](https://stackoverflow.com/q/1482308/4279).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T13:40:23.863

您的问题可以简化为[组合](https://en.wikipedia.org/wiki/Combination)问题。stackoverflow 中已经有很多解决方案。你可以检查[一下](https://stackoverflow.com/questions/127704/algorithm-to-return-all-combinations-of-k-elements-from-n)，它可能对你有用。

# ruby - 在 Excel-Ruby Watir 脚本中使用循环条件

> ID：15584091
> 
> 赞同：-1
> 
> 时间：2013-03-23T06:36:36.313
> 
> 标签：ruby, loops

我是 Ruby-Watir 的新手 ..并且正在检查一个应用程序的登录功能，该应用程序有多个值，如（无效的用户和密码，有效的用户名和密码）来自 Excel 表。

```
reqire'watir-webdriver'
require 'win32ole'
require 'roo'

b = Watir::Browser.new

b.goto 'http://tech/mellingcarsweb/Admin/Login.aspx'

xl = WIN32OLE.new('excel.application')

wrkbook= xl.Workbooks.Open("C:\\Excel\\cars.xlsx")

wrksheet= wrkbook.Worksheets(1)

wrksheet.select

$username= wrksheet.Range("A1").Value

$password= wrksheet.Range("B1").Value

b.text_field(:id, "MainContent_txtUsername").set($username)

b.text_field(:id, "MainContent_txtPassword").set($password)

b.button(:id, "MainContent_btnLogin").click

b.alert.ok

$username1= wrksheet.Range("A2").Value

$password1= wrksheet.Range("B2").Value

b.text_field(:id, "MainContent_txtUsername").set($username1)

b.text_field(:id, "MainContent_txtPassword").set($password1)

b.button(:id, "MainContent_btnLogin").click

puts "Authorised Entry" 
```

这段代码运行良好。我需要的是..**使用循环语句我需要执行多次。**

我不知道如何在 Excel 中使用循环条件。我已经看过很多示例，但没有一个是清楚的。对不起，我无法理解。有人能以正确的方式解释我在 Excel ruby​​ 中使用循环条件的正确方式吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T02:41:32.203

鉴于您正在测试有效和无效的登录，我不确定编写循环是否最有意义。循环的问题在于，每次迭代都需要知道预期的结果是什么。您可能需要在电子表格中包含该信息。您最好为每个有效和无效场景创建特定的单独测试（即每个测试一个断言）。

要回答您的问题，您可以将 excel 范围转换为二维数组，然后遍历每一行数据。获取二维数组：

```
require 'win32ole'

#Open the spreadsheet
xl = WIN32OLE.new('excel.application')
wrkbook= xl.Workbooks.Open('C:\Users\Someone\Desktop\Logins.xlsx')
wrksheet= wrkbook.Worksheets(1)

#Convert the range of cells to a 2D array
login_data = wrksheet.range("A1:B2").value

#Output of the 2D array
p login_data
#=> [["jsmith", "password1"], ["jdoe", "password2"]] 
```

二维数组的每个元素都是一行 excel 数据。您可以使用该`each`方法对其进行迭代。

```
#Start your browser
b = Watir::Browser.new    

#Loop through the login data
login_data.each do |data|

    #Determine the user id and password for the row of data
    user = data[0]
    password = data[1]

    #Go to the login page
    b.goto 'http://tech/mellingcarsweb/Admin/Login.aspx'

    #Input the fields and submit
    b.text_field(:id, "MainContent_txtUsername").set(user)
    b.text_field(:id, "MainContent_txtPassword").set(password)
    b.button(:id, "MainContent_btnLogin").click

    #Do something to validate the result
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T07:53:07.397

谷歌为`ruby loops`. 这看起来是一个很好的介绍：[http ://www.tutorialspoint.com/ruby/ruby_loops.htm](http://www.tutorialspoint.com/ruby/ruby_loops.htm)

# ios - 使用 goBack 时未触发 webViewDidFinishLoad

> ID：15584093
> 
> 赞同：5
> 
> 时间：2013-03-23T06:37:00.577
> 
> 标签：ios, uiwebview, uiwebviewdelegate

我想在网页加载后做一些额外的工作，所以我在 webViewDidFinished 中添加了一些代码，但在这种情况下它似乎不起作用。

情况：我使用 UIWebview 访问一个网页，然后单击另一个链接，然后运行

```
[webview goback]; 
```

页面似乎是从缓存中加载的，只有

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType; 
```

叫做，

```
- (void)webViewDidFinishLoad:(UIWebView *)webView; 
```

不叫。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T08:05:06.287

真的。仍然有一种方法可以了解历史堆栈的更改：

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(webViewHistoryDidChange:)
                                             name:@"WebHistoryItemChangedNotification"
                                           object:nil]; 
```

由于`UIWebView`不符合 KVO，`canGoBack`这似乎是启用/禁用潜在后退按钮的唯一方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T08:54:13.990

不管多么古怪，我怀疑这是正确的行为。来自苹果文档：

> webViewDidFinishLoad：
> 
> 在 Web 视图完成加载框架后发送。

我敢打赌，UIWebView 缓存了一定数量的页面，`goBack`and`goForward`方法不保证存储在后向列表中的位置被重新加载。因而不火`webViewDidFinishLoad`。

但即使这可能是正确的行为，我当然同意这是糟糕的 API 设计。绝对应该有一个`finishLoad`-ish 方法来挂钩后/前进/页内导航。

# php - 将 XML 存储在数组中

> ID：15584094
> 
> 赞同：0
> 
> 时间：2013-03-23T06:37:01.920
> 
> 标签：php, javascript, xml, arrays

这是我想将 xml 转换为数组的链接
[http://services.gisgraphy.com/geoloc/search?lat=22.298569900000000000&lng=70.794301799999970000&radius=7000](http://services.gisgraphy.com/geoloc/search?lat=22.298569900000000000&lng=70.794301799999970000&radius=7000)
点击上面的链接它返回一个 XML 文件
我想将它存储在数组中
请帮助...
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T08:15:37.143

你可以`simplexml_load_string`使用`php`

例如：**_**

```
<?php
$string = <<<XML
<?xml version='1.0'?> 
<document>
 <title>Forty What?</title>
 <from>Joe</from>
 <to>Jane</to>
 <body>
  I know that's the answer -- but what's the question?
 </body>
</document>
XML;

$xml = simplexml_load_string($string);

print_r($xml);
?> 
```

**输出**

```
SimpleXMLElement Object
(
  [title] => Forty What?
  [from] => Joe
  [to] => Jane
  [body] =>
   I know that's the answer -- but what's the question?
) 
```

阅读[http://php.net/manual/en/function.simplexml-load-string.php](http://php.net/manual/en/function.simplexml-load-string.php)了解更多信息。

您也可以使用[https://github.com/gaarf/XML-string-to-PHP-array/blob/master/xmlstr_to_array.php](https://github.com/gaarf/XML-string-to-PHP-array/blob/master/xmlstr_to_array.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T08:32:28.050

只是一个小提示..转换为数组很容易，就像强制转换 (array)

```
$xml = file_get_contents('http://services.gisgraphy.com/geoloc/search?lat=22.298569900000000000&lng=70.794301799999970000&radius=7000', true);
$xml = (array)simplexml_load_string($xml);
print_r($xml); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T08:16:08.717

您必须获取它，然后转换为简单的 xml 对象。

`$responce = file_get_contents('[http://services.gisgraphy.com/geoloc/search?lat=22.298569900000000000&lng=70.794301799999970000&radius=7000](http://services.gisgraphy.com/geoloc/search?lat=22.298569900000000000&lng=70.794301799999970000&radius=7000)', true); print_r(simplexml_load_string($responce));`

# jquery - 我需要在 jquery 中向字符串值添加一个数字但得到 NaN

> ID：15584100
> 
> 赞同：0
> 
> 时间：2013-03-23T06:37:33.413
> 
> 标签：jquery

. 我在数据库中有一个数字 abc-13-001，我想通过添加 1 来增加数字，例如 abc-13-002、abc-13-003 等，当有人单击按钮时，新增加的数字将保存在 input_1_9 的值中，在数据库中，该值将显示在我的管理面板中。我将拥有所有代码，并且每次用户提交表单时，它都应将最大 id（如 abc-13-001）增加到 abc-13-002 并将其保存在输入和数据库的值中。

```
 <?php
     $maxValue = "SELECT value FROM wp_rg_lead_detail WHERE field_number = '9' ORDER BY id DESC Limit 1";
$result = mysql_query($maxValue) Or DIE(mysql_error());
$client_id = mysql_result($result, 0);
echo $client_id;
    ?>
    <script type="text/javascript">
        var counter = 0;
        $(document).ready(function() {
            $("#gform_submit_button_1").click(function(){
                counter++;
                var result = parseInt("<?php echo  $client_id; ?>") + 1; 
                $("#input_1_9").val(result) ;
                $("#theCount").text(ouput);
            });

        });
        </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T06:40:18.437

的`<?php echo $client_id; ?>`输出可能是一个字符串，比如 PHP 错误！所以检查它正在打印什么。此外，在调用 之前，请`parseInt()`确保使用 . 检查特定字符串是否为数字`isNum()`。

在你的情况下，`abc-13-001`不是一个数字。您需要删除`abc`和破折号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T06:52:16.137

这样做

```
<?php
     $maxValue = "SELECT value FROM wp_rg_lead_detail WHERE field_number = '9' ORDER BY id DESC Limit 1";
    $result = mysql_query($maxValue) Or DIE(mysql_error());
    $client_id = mysql_result($result, 0);
    $client_id_new = explode('-',$client_id);
    $new_value =$client_id_new[0]."-".$client_id_new[1]."-".$client_id_new[2]+1;
    ?>

    <script type="text/javascript">
        var counter = 0;
        $(document).ready(function() {
            $("#gform_submit_button_1").click(function(){
                counter++;
                var result = parseInt("<?php echo $new_value; ?>"); 
                $("#input_1_9").val(result) ;
                $("#theCount").text(ouput);
            });

        });
        </script> 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T07:01:13.727

```
 <script type="text/javascript">
        var counter = 0;
        $(document).ready(function() {
            $("#gform_submit_button_1").click(function(){
                counter++;
                var clientIdStr = "<?php echo  $client_id; ?>";
                var clientidArr = clientIdStr.split("-")
                var clientID = clientidArr[2];                    
                var result = 1+clientID; 
                clientIdStr = clientidArr[0]+clientidArr[1]+result;
                $("#input_1_9").val(clientIdStr) ;
                $("#theCount").text(ouput);
            });

        });
        </script> 
```

为您检查这项工作

# iphone - UIRefreshControl - 如何在释放触摸后进行刷新操作？

> ID：15584104
> 
> 赞同：29
> 
> 时间：2013-03-23T06:38:49.083
> 
> 标签：iphone, ios, objective-c, uirefreshcontrol

长时间的监听器，第一次调用堆栈溢出。要温柔。

我正在 UITableView 上实现 UIRefreshControl 以刷新表的数据。在其他下拉刷新实现中，刷新过程不会开始，直到用户的手指在拉动的刷新距离内抬起。UIRefreshControl 似乎并没有立即进行这种自定义。

我的 UIRefreshControl 初始化代码：

```
UIRefreshControl *refreshControl = [[UIRefreshControl alloc] init];
[refreshControl addTarget:self action:@selector(refresh:) forControlEvents:UIControlEventValueChanged];
[self.tableView addSubview:refreshControl]; 
```

我的刷新：代码相当基本：

```
-(void)refresh:(id)sender {
(... refresh code ...)
[sender endRefreshing];
} 
```

如何延迟刷新：功能，直到用户将手指从拉动中移开？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-23T20:58:22.947

我也遇到了同样的问题。我认为我的方法不是很好，但似乎可行。

1.  在里面`UIRefreshControl`

    ```
    UIRefreshControl *refreshControl = [[UIRefreshControl alloc] init];
    self.refreshControl = refreshControl; 
    ```

2.  检查`UIRefreshControl`用户完成拖动表格时的状态（`UITableViewDelegate`符合`UIScrollViewDelegate`）

    ```
    - (void)scrollViewDidEndDecelerating:(UIScrollView*)scrollView
    {    
        if( self.refreshControl.isRefreshing )
            [self refresh];
    } 
    ```

3.  更新表

    ```
    - (void)refresh
    {
        [self.refreshControl endRefreshing];

        // TODO: Update here your items

        [self.tableView reloadData];
    } 
    ```

希望它会帮助你。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-03-23T22:10:31.680

`UIRefreshControl`已经有了在“正确”时间开始的住宿。下拉刷新控件的正确行为是在用户超过某个“足够远”的阈值后开始刷新，而不是在用户释放拖动时开始刷新。

为了实现这一点，您需要修改`-refresh:`方法以检查控件何时转换为`refreshing`状态：

```
-(void)refresh:(id)sender {
    UIRefreshControl *refreshControl = (UIRefreshControl *)sender;
    if(refreshControl.refreshing) {
        (... refresh code ...)
    }
} 
```

请注意，您调用的任何方法都`(... refresh code ...)`应该是异步的，这样您的 UI 就不会冻结。您应该更改到主队列并`-endRefreshing`在您的`(... refresh code ...)`块结束时调用，而不是在结束时调用`-refresh:`：

```
- (void)refresh:(id)sender {
    __weak UIRefreshControl *refreshControl = (UIRefreshControl *)sender;
    if(refreshControl.refreshing) {
        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
            /* (... refresh code ...) */
            dispatch_sync(dispatch_get_main_queue(), ^{
                [refreshControl endRefreshing];
                //reload the table here, too
            });
        });
    }
} 
```

* * *

将控件事件更改为`UIControlEventTouchUpInside`将不起作用，因为`UIRefreshControl`它不是旨在直接与之交互的 UI 组件。用户永远不会*触摸*，`UIRefreshControl`因此不会`UIControlEventTouchUpInside`触发任何事件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-10-12T11:12:38.107

可以使用 来安排刷新仅在手指抬起时发生`NSRunLoop`。在数组中调用`-(void)performInModes:(NSArray<NSRunLoopMode> *)modes block:(void (^)(void))block;`with 。`NSRunLoopDefaultMode`

当触摸仍然保持时，runloop 模式是`UITrackingRunLoopMode`，它只会在liftoff 后恢复到默认值。

# r - 如何将 wordcloud 放在一个 grob 中？

> ID：15584105
> 
> 赞同：2
> 
> 时间：2013-03-23T06:39:12.013
> 
> 标签：r, ggplot2, gridextra, r-grid, word-cloud

我创建了一个简单的 wordcloud：

```
require(wordcloud)    
words <- c('affectionate', 'ambitious', 'anxious', 'articulate', 'artistic', 'caring', 'contented', 'creative', 'cynical', 'daring', 'dependable', 'easygoing', 'energetic', 'funny', 'generous', 'genuine', 'goodlistener', 'goodtalker', 'happy', 'hardworking', 'humerous', 'impulsive', 'intelligent', 'kind', 'loyal', 'modest', 'optimistic', 'outgoing', 'outrageous', 'passionate', 'perceptive', 'physicallyfit', 'quiet', 'rational', 'respectful', 'romantic', 'shy', 'spiritual', 'spontaneous', 'sweet', 'thoughtful', 'warm')
freqs <- c(134, 53, 0, 5, 0, 247, 0, 78, 0, 0, 134, 178, 79, 344, 63, 65, 257, 0, 109, 113, 0, 0, 107, 51, 199, 24, 67, 232, 0, 109, 24, 28, 29, 2, 105, 70, 0, 35, 64, 156, 66, 45)
wordcloud(words, freqs) 
```

我想把它放到一个“grob”中，这样​​我就可以将它与包中使用`grid.arrange()`的其他几个图一起安排`gridExtra`：

```
require(ggplot2)
p1 <- qplot(1:10, rnorm(10), colour = runif(10))
require(gridExtra)
grid.arrange(p1, my.wordcloud) 
```

我知道我的 wordcloud 必须是一个“grob”才能做到这一点，但我不明白如何做到这一点。我尝试使用包`grob()`中的函数`gridExtra`，但这不起作用。建议？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-23T08:54:12.057

调整代码`wordcloud`以构建需要在网格中填写 text.grob 的数据应该不难。在指定限制为 0,0 和 1, 1 的窗口后`wordcloud`，代码将 x、y、文本和 rot 值发送到基本函数。`text`

我需要在 for 循环之前添加这个：

```
textmat <- data.frame(x1=rep(NA, length(words)), y1=NA, words=NA_character_, 
                       rotWord=NA, cexw=NA, stringsAsFactors=FALSE ) 
```

这在 for 循环的末尾：

```
 textmat[i, c(1,2,4,5) ] <-  c(x1=x1, y1=y1, rotWord=rotWord*90, cexw = size[i] )
 textmat[i, 3] <- words[i] 
```

并且需要修改对 的调用`.overlap`，因为它显然没有导出：

```
if (!use.r.layout) 
         return(wordcloud:::.overlap(x1, y1, sw1, sh1, boxes)) 
```

循环完成后，我无形地返回了它：

```
return(invisible(textmat[-1, ]))  # to get rid of the NA row at the beginning 
```

将其命名为 wordcloud2 后：

```
> tmat <- wordcloud2(c(letters, LETTERS, 0:9), seq(1, 1000, len = 62))
> str(tmat)
'data.frame':   61 obs. of  5 variables:
 $ x1     : num  0.493 0.531 0.538 0.487 ...
 $ y1     : num  0.497 0.479 0.532 0.475 ...
 $ words  : chr  "b" "O" "M" ...
 $ rotWord: num  0 0 0 0 0 0 0 0 0 ...
 $ cexw   : num  0.561 2.796 2.682 1.421 ...

draw.text <- function(x,y,words,rotW,cexw) {
     grid.text(words, x=x,y=y, rot=rotW, gp=gpar( fontsize=9*cexw)) }

for(i in 1:nrow(tmat) ) { draw.text(x=tmat[i,"x1"], y=tmat[i,"y1"], 
                                    words=tmat[i,"words"], rot=tmat[i,"rotWord"], 
                                    cexw=tmat[i,"cexw"]) } 
```

如建议：

```
 with(tmat, grid.text(x=x1, y=y1, label=words, rot=rotWord, 
                      gp=gpar( fontsize=9*cexw)) }  # untested 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T09:39:37.500

你可以使用`gridBase`包但有一个聪明的视口。在这里，我`vpStack`用来获得良好的尺寸。

```
par(mfrow=c(1, 2))
wordcloud(words, freqs)
plot.new()              
vps <- baseViewports()
p <- qplot(1:10, rnorm(10), colour = runif(10))
print(p,vp = vpStack(vps$figure,vps$plot)) 
```

![在此处输入图像描述](../Images/5e546312bc95cbe08e54bba92ffe102e.png)

**编辑**`knitr`如果您只想生成 pdf，请使用。

如果您只想创建一个可以使用的 pdf，则另一种选择`Knitr`。混合网格和基本图形非常简单。乳胶将为您完成这项工作。例如，通过这个chunk就可以得到上面的结果。

```
<<mixgridwithggplot, fig.show='hold',out.width='.5\\linewidth'>>=
wordcloud(words, freqs)
qplot(1:10, rnorm(10), colour = runif(10))
@ 
```

我很确定`knitr`可以在代码后面的单个 png 中创建 2 个图的 png。

# reference - 为什么链接器会给我一个“未定义的引用”错误？

> ID：15584108
> 
> 赞同：1
> 
> 时间：2013-03-23T06:39:56.703
> 
> 标签：reference, makefile, undefined, gnu, gnu-make

我在构建输出中得到了这个（filter_setup() 在 ./obj/local/armeabi-v7a/libmyapp-dsp.a 中定义，您可以在链接器输出中看到它。为什么 filter_setup 是未定义的引用？

注意：我使用的是 Android NDK，但此时这是一个通用的链接器问题。

/Applications/SDK/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/arm-linux-androideabi-g++ -Wl,-soname,libapplication.so -shared --sysroot =/Applications/SDK/android-ndk-r8d/platforms/android-8/arch-arm ./obj/local/armeabi-v7a/objs-debug/application/src/broov_gui.o ./obj/local/armeabi- v7a/objs-debug/application/src/broov_player.o ./obj/local/armeabi-v7a/objs-debug/application/src/native_main.o ./obj/local/armeabi-v7a/objs-debug/application/ src/video_player.o ./obj/local/armeabi-v7a/objs-debug/application/src/b_sdl.o ./obj/local/armeabi-v7a/objs-debug/application/src/broov_font.o ./obj /local/armeabi-v7a/objs-debug/application/src/broov_queue.o ./obj/local/armeabi-v7a/objs-debug/application/src/ffplay.o ./obj/local/armeabi-v7a/objs -debug/application/src/optimization.o。/obj/local/armeabi-v7a/objs-debug/application/src/subreader.o ./obj/local/armeabi-v7a/objs-debug/application/src/universalchardet.o ./obj/local/armeabi-v7a /objs-debug/application/resources/bg_loading.o ./obj/local/armeabi-v7a/objs-debug/application/resources/dejavu_sans.o ./obj/local/armeabi-v7a/libmyapp-dsp.a ./ obj/local/armeabi-v7a/libfreetype.a ./obj/local/armeabi-v7a/libstlport_static.a ./obj/local/armeabi-v7a/libsdl.so ./obj/local/armeabi-v7a/libsdl_ttf.so ./obj/local/armeabi-v7a/libsdl_image.so ./obj/local/armeabi-v7a/libiconv.so ./obj/local/armeabi-v7a/libuniversalchardet.so ./obj/local/armeabi-v7a/libyuv2rgb .so -no-canonical-prefixes -march=armv7-a -Wl,--fix-cortex-a8 -Wl,--no-undefined -Wl,-z,noexecstack -Wl,-z,relro -Wl,- z,now -L/Applications/SDK/android-ndk-r8d/platforms/android-8/arch-arm/usr/lib -lGLESv1_CM -ldl -llog "/Users/nobody/Development/repositories/git-remote/myapp-dolphin/myappDolphin"/"native/ffmpeg/ffmpeg-0.11.1/android/armv6_vfp/libffmpeg.so" -lc -lm -o ./obj/local /armeabi-v7a/libapplication.so /Applications/SDK/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/../lib/gcc/arm-linux-androideabi/ 4.6/../../../../arm-linux-androideabi/bin/ld: ./obj/local/armeabi-v7a/objs-debug/application/src/broov_player.o: 在函数 broov_init_global_values( int，int，int，int，int，int，int，int，int，int，int，int，int，int，int）：jni/app/src/broov_player.cpp:3414：错误：未定义对“filter_setup”的引用()' collect2: ld 返回 1 退出状态 make:/obj/local/armeabi-v7a/libapplication.so /Applications/SDK/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/../lib/gcc/arm- linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld: ./obj/local/armeabi-v7a/objs-debug/application/src/broov_player.o:在函数 broov_init_global_values（int，int，int，int，int，int，int，int，int，int，int，int，int，int，int）：jni/app/src/broov_player.cpp:3414：错误：未定义参考 'filter_setup()' collect2: ld 返回 1 退出状态 make:/obj/local/armeabi-v7a/libapplication.so /Applications/SDK/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/../lib/gcc/arm- linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld: ./obj/local/armeabi-v7a/objs-debug/application/src/broov_player.o:在函数 broov_init_global_values（int，int，int，int，int，int，int，int，int，int，int，int，int，int，int）：jni/app/src/broov_player.cpp:3414：错误：未定义参考 'filter_setup()' collect2: ld 返回 1 退出状态 make:int, int, int, int, int, int, int, int, int):jni/app/src/broov_player.cpp:3414: error: undefined reference to 'filter_setup()' collect2: ld returned 1 exit status制作：int, int, int, int, int, int, int, int, int):jni/app/src/broov_player.cpp:3414: error: undefined reference to 'filter_setup()' collect2: ld returned 1 exit status制作：*** [obj/local/armeabi-v7a/libapplication.so] 错误1~

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T06:42:58.407

链接库的顺序很重要。您可能需要尝试重新排序`libapplication.so`和`libmyapp-dsp.a`链接行。

有关讨论，请参阅[为什么链接库的顺序有时会导致 GCC 中的错误？](https://stackoverflow.com/questions/45135/linker-order-gcc)

# php - 用户嵌入的 YouTube 视频未显示

> ID：15584109
> 
> 赞同：0
> 
> 时间：2013-03-23T06:40:04.257
> 
> 标签：php, html

所以我试图在我的网站中实现一个功能，让用户嵌入他们自己的视频。我一直在使用 PHP，因为它过去对我有其他类似的目标。

```
$find = array("[video]","[/video]");
$replace = array("<iframe width='560' height='315' src='","' frameborder='0' allowfullscreen></iframe>");
echo str_replace($find,$replace,"" . nl2br("" . htmlspecialchars($forumPost) . "") . ""); 
```

这两部分代码取自 YouTube 的“嵌入”选项，并经过简单的组织，以便用户可以输入他们想要的任何 YouTube URL 并显示视频。

但是，当我用这个嵌入代码（取自 YouTube）测试它时遇到了一个问题：

```
<iframe width='560' height='315' src='http://www.youtube.com/embed/oPmUjjo02bg' frameborder='0' allowfullscreen></iframe> 
```

奇怪的是，当我将它直接嵌入到源代码中时，这个测试可以完美运行，但是当 PHP 将相同的确切代码拼凑在一起时，页面中会留下一个空白框——在这种情况下，当我将它输入到像这样的论坛：

```
[video]http://www.youtube.com/watch?v=oPmUjjo02bg[/video] 
```

我已经三重检查了拼写或 URL 本身没有错误，所以它肯定与 PHP 将它放在一起的事实有关。

根据互联网，似乎没有其他人遇到这个问题，所以我不得不转向这里，因为我完全感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T14:55:35.943

这是因为您使用的不是嵌入 URL ( [http://www.youtube.com/embed/oPmUjjo02bg](http://www.youtube.com/embed/oPmUjjo02bg) )，而是视频完整 URL ( [http://www.youtube.com/watch?v=oPmUjjo02bg](http://www.youtube.com/watch?v=oPmUjjo02bg) )。

您必须更改链接才能使嵌入工作。

# ruby-on-rails - Orders#new 中的 ArgumentError，参数数量错误（3 对 2）

> ID：15584112
> 
> 赞同：0
> 
> 时间：2013-03-23T06:40:44.093
> 
> 标签：ruby-on-rails

我是 Rails 新手，我正在关注实用敏捷这本书。当我考虑客户详细信息时，我面临着这种错误......

```
 wrong number of arguments (3 for 2) 
```

我在views/orders/_form.html.erb中的代码

```
</div>
<div class="field">
   <%= f.label :pay_type %><br />
   <%= f.text_field :pay_type, Order::PAYMENT_TYPES,
                             :prompt => 'select a payment method' %>
</div>
<div class="actions"> 
```

我在 app/model/order.rb 中给出了论点

```
 class Order < ActiveRecord::Base
    attr_accessible :email, :address, :name, :pay_type
    PAYMENT_TYPES = [ 'Check', 'Credit card', 'Purchase order' ]

 end 
```

我能得到任何帮助吗！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T06:52:25.700

```
</div>
<div class="field">
   <%= f.label :pay_type %><br />
   <%= f.select :pay_type, Order::PAYMENT_TYPES,
                         :prompt => 'select a payment method' %>
</div>
<div class="actions"> 
```

注意它应该是“选择”

# asp.net - IIS 中的表单身份验证错误

> ID：15584114
> 
> 赞同：3
> 
> 时间：2013-03-23T06:40:58.793
> 
> 标签：asp.net

```
Server Error in '/' Application.

Configuration Error

Description: An error occurred during the processing of a configuration file required to service this request. Please review the specific error details below and modify your configuration file appropriately. 

Parser Error Message: It is an error to use a section registered as allowDefinition='MachineToApplication' beyond application level.  This error can be caused by a virtual directory not being configured as an application in IIS.

Source Error: 

Line 59:             ASP.NET to identify an incoming user. 
Line 60:         -->
Line 61:     <authentication mode="Forms">
Line 62:       <forms loginUrl="Login.aspx" name=".ASPXAUTH" defaultUrl="Login.aspx" protection="All" path="/"></forms>
Line 63:     </authentication>

Source File: D:\Etool Project\ERecruitmentfinal2\WebClient\web.config    Line: 61 

Show Additional Configuration Errors: D:\Etool Project\ERecruitmentfinal2\WebClient\web.config 
```

这是我在将 iis 中的文件配置为虚拟目录时遇到的错误。我尝试在 iis 中配置虚拟目录并启用表单身份验证，但它也显示错误：**不允许在应用程序下方设置配置部分**

我的 web.config 文件是

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
  <appSettings>
    <add key="smtpcon" value="smtp.gmail.com"></add>
    <add key="USERNAME" value="radiantsofthrms@gmail.com"></add>
    <add key="PASSWORD" value="Hrms123$"></add>
    <add key="LogAudit" value="true"></add>
    <add key="PhotoURL" value="http://localhost/photo/"></add>
  </appSettings>
    <connectionStrings>
        <add name="PORTAL" providerName="System.Data.SqlClient" connectionString="Password=sql;User ID=sa;Data Source=(local);database=Etool;" />
    </connectionStrings>
  <location path="Css">
    <system.web>
      <authorization>
        <allow users="*" />
      </authorization>
    </system.web>
  </location>
  <location path="Js">
    <system.web>
      <authorization>
        <allow users="*" />
      </authorization>
    </system.web>
  </location>
  <location path="images">
    <system.web>
      <authorization>
        <allow users="*" />
      </authorization>
    </system.web>
  </location>
  <location path="ForgotPassword.aspx">
    <system.web>
      <authorization>
        <allow users="*" />
      </authorization>
    </system.web>
  </location>
    <system.web>
        <!-- 
            Set compilation debug="true" to insert debugging 
            symbols into the compiled page. Because this 
            affects performance, set this value to true only 
            during development.
        -->
        <compilation debug="true" targetFramework="4.0">
            <assemblies>
                <add assembly="System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
                <add assembly="System.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A" />
                <add assembly="System.Web.Extensions.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
                <add assembly="System.Windows.Forms, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
            </assemblies>
        </compilation>
        <!--
            The <authentication> section enables configuration 
            of the security authentication mode used by 
            ASP.NET to identify an incoming user. 
        -->
    <authentication mode="Forms">
      <forms loginUrl="Login.aspx" name=".ASPXAUTH" defaultUrl="Login.aspx" protection="All" path="/"></forms>
    </authentication>
    <machineKey validationKey="282487E295028E59B8F411ACB689CCD6F39DDD21E6055A3EE480424315994760ADF21B580D8587DB675FA02F79167413044E25309CCCDB647174D5B3D0DD9141" decryptionKey="8B6697227CBCA902B1A0925D40FAA00B353F2DF4359D2099" validation="SHA1" />
    <authorization>
      <deny users="?" />
      <allow users="*" />
    </authorization>
        <!--
            The <customErrors> section enables configuration 
            of what to do if/when an unhandled error occurs 
            during the execution of a request. Specifically, 
            it enables developers to configure html error pages 
            to be displayed in place of a error stack trace.

        <customErrors mode="RemoteOnly" defaultRedirect="GenericErrorPage.htm">
            <error statusCode="403" redirect="NoAccess.htm" />
            <error statusCode="404" redirect="FileNotFound.htm" />
        </customErrors>
        -->
        <httpRuntime requestValidationMode="2.0" />
        <pages controlRenderingCompatibilityVersion="3.5" clientIDMode="AutoID" validateRequest="false" />
    </system.web>
    <system.webServer>
        <defaultDocument>
            <files>
                <add value="login.aspx" />
            </files>
        </defaultDocument>
        <directoryBrowse enabled="true" />
    </system.webServer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T06:46:24.273

将您的虚拟目录转换为消息中建议的应用程序。右键单击 IIS 中的虚拟目录，您将看到该选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T06:43:23.340

很可能问题出在您的授权部分。在此处发布整个 web.config 文件，以便对其进行修复。您的 IIS 配置没有问题，只是 web.config 文件有问题。

另一个想法是，创建一个新项目，看看 web.config 文件有什么不同，以及 web.config 文件的授权部分是如何配置的。这会给你一个 web.config 文件中的问题提示。

**编辑**

明白了，原因是你的项目中有多个 web.config 文件。请检查整个项目目录，确保项目目录中只有一个 web.config 文件。

# linux - 如何连接匹配模式的行？

> ID：15584115
> 
> 赞同：-2
> 
> 时间：2013-03-23T06:41:42.753
> 
> 标签：linux, perl, unix, sed, awk

我有一个很大的文件，其中大多数行都很长，但有几行只是几个词：

```
这是一个很长的句子。
这个
是
一个
短的
线。
这是一个很长的句子。
这是一个很长的句子。
这个
是
其他
短的
线。
这是一个很长的句子。

```

所有短行都以独特的单词开头。在此示例中，短行以“This”开头并以“line”结尾。它们跨越的行数完全相同。我需要一个*仅*连接文件中短行的命令，以便我得到

```
这是一个很长的句子。
这是一条短线。
这是一个很长的句子。
这是一个很长的句子。
这是另一条短线。
这是一个很长的句子。

```

有没有可以完成这项工作的命令？如果不需要的话，我不想写脚本程序...

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T06:44:08.803

```
perl -pe's/\n/ / if ($j ||= /^This$/) &&= !/^line\.$/' 
```

用法：

```
perl -pe'...' file.in >file.out    # From file
perl -pe'...' <file.in >file.out   # From STDIN
perl -i~ -pe'...' file             # "In-place" with backup
perl -i -pe'...' file              # "In-place" without backup 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T23:44:27.820

```
sed -e :a -e '/line\.$/{p;d;}' -e '/^This/{N;s/\n/ /g;};ta' file.in > file.out 
```

# qt - 对 Linux 相关术语的困惑

> ID：15584117
> 
> 赞同：-3
> 
> 时间：2013-03-23T06:41:47.143
> 
> 标签：qt, ubuntu, gtk, pygtk

我对与 linux 相关的各种术语感到困惑。

> *   GNU
> *   侏儒
> *   克德
> *   gtk2 和 gtk3
> *   pygtk
> *   qt
> *   gtk+

我正在尝试学习 ubuntu 的应用程序开发。我遇到了`Quickly` ，我正在学习，我发现它使用`pygtk`. 在他们的网站上，他们说它只`GTK 2.2.4`支持并建议移至`GObject`. 我在 developer.gnome.org 中也看到了用于开发应用程序的链接，它们是一样的吗？哪种开发工具或方法好学好用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T06:50:00.440

GNU 是 GNU 项目开发的基于 UNIX/LINUX 的操作系统。

GNOME 和 KDE 是在计算机操作系统之上运行的桌面环境和图形用户界面。

Qt 是一个跨平台的应用程序框架，广泛用于开发具有图形用户界面的应用程序软件，也用于开发非 GUI 程序，例如服务器的命令行工具和控制台。

GTK+ (GIMP Toolkit) 是一个用于创建图形用户界面的跨平台小部件工具包。我相信 GTK 2 和 GTK 3 是 GTK+ 的旧版本。

PyGTK 是一组用于 GTK+ 图形用户界面库的 Python 包装器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T07:06:13.653

GNU 是由 GNU 项目开发的类 unix 操作系统。

GNOME 是一个桌面环境，是 GNU 项目的一部分。

Kde 也是一个桌面环境，但独立于 GNU。

GTK2 和 3 是 GTK+ 的版本，它是用于 GUI 开发的免费库，例如用于 GNOME 桌面环境。

PyGTK 是使用 Python 使用 GTK+ 的包装器。

Qt 是一个应用程序开发框架，包括 GUI 和基于控制台的应用程序，与 GTK 库不同，它可以跨平台使用。

尽管我自己没有使用过 Quickly，但它似乎更像是一个平台，可以将您需要的技术包含到您的项目中并将项目作为一个整体而不是编程资源包装起来。

在我看来，寻求建议从这一切中学到什么似乎是错误的方法。试着勾勒出一个你想要实现的简单项目想法，然后探索你需要哪些工具和库来完成它，然后学习它们。亲自动手并尝试这些是了解这些工具的用途的更好方法。

*编辑*

关于 Quickly 和 GTK3 的兼容性，请参阅[AskUbuntu 上的这个问题](https://askubuntu.com/questions/63127/does-quickly-support-gtk3)

# php - PHP facebook如何用故事情节替换story_tags？

> ID：15584118
> 
> 赞同：1
> 
> 时间：2013-03-23T06:41:47.727
> 
> 标签：php, facebook, facebook-graph-api, replace

我有以下故事“**另一个 Feed 在 Facebook 的照片上分享了非营利组织。** ”我想用链接替换它的标签。

facebook api 数据故事和story_tags

```
 [story] => Another Feed shared Non-Profits on Facebook's photo.
                    [story_tags] => Array
                        (
                            [0] => Array
                                (
                                    [0] => Array
                                        (
                                            [id] => 1.7153566624E+14
                                            [name] => Another Feed
                                            [offset] => 0
                                            [length] => 12
                                            [type] => page
                                        )

                                )

                            [20] => Array
                                (
                                    [0] => Array
                                        (
                                            [id] => 41130665917
                                            [name] => Non-Profits on Facebook
                                            [offset] => 20
                                            [length] => 23
                                            [type] => page
                                        )

                                )

                        ) 
```

如果我用 str_ireplace 替换故事标签，那么有可能两个不同的标签可以具有相同的名称，所以它不会很好玩。

如果我用 substr_replace(...) 替换它，那么在替换后故事的长度会变得更长，所以新标签不能很好地与它一起使用。

用故事情节替换故事标签的最佳方法是什么？我确定人们已经这样做了，但找不到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-02T13:36:27.350

Have a look here at my implementation:

```
 public function mapMentions($message, $tags) {
    if (empty($tags)) {
      return $message;
    }

    $offsetBuffer = 0;

    foreach (json_decode($tags, true) as $tag) {
      $link = $this->Html->link($tag['name'], $tag['link'], ['target' => '_blank']);
      $message = substr_replace($message, $link, $tag['offset'] + $offsetBuffer, $tag['length']);
      $offsetBuffer += (strlen($link) - $tag['length']);
    }

    return $message;
  } 
```

1.  First, you need the length of the generated link (graph.facebook.com/ID)
2.  Now, you need to save the the difference between old length and new link length to a temp variable (in my case "offsetBuffer").
3.  In the loop append the offsetBuffer to the old offset.

Voila! ;)

# ruby - 数组排序{ |x,y| }，x 总是较小的吗？

> ID：15584125
> 
> 赞同：0
> 
> 时间：2013-03-23T06:43:03.167
> 
> 标签：ruby, arrays, sorting

我是 Ruby 新手，对排序方法很困惑

例如：

```
person.sort{|x, y| x.age<=> y.age} 
```

我知道如果我将其更改为`y.age<=> x.age`，它将反转排序顺序。

我读了[另一个问题](https://stackoverflow.com/questions/2637419/understanding-ruby-array-sort)，他们都只说，`x`并且是算法`y`选择的数组中的两个元素。`sort`

但`x`总是较小的对象吗？我的意思是，如果我像第一种方式那样写，它总是从最年轻到最年长吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T06:54:12.570

您可以通过以下方式自己回答这个问题，用一种*[归约](http://en.wikipedia.org/wiki/Reductio_ad_absurdum)*`x` *法*的形式：如果总是较小的对象怎么办？如果是这样，那么您就不必费心将其与 进行比较，对`y`吗？你可以这样写：

```
person.sort { |x, y| 1 } 
```

或者也许我把它倒过来了，你可以这样写：

```
person.sort { |x, y| -1 } 
```

但不管怎样，这有点荒谬，不是吗？当然，如果你尝试它，它不会起作用。

所以这告诉我们，在这个排序块的主体中​​，我们不知道是否`x`是`y`较小的对象。事实上，`x`并且`y`可以是任意两个`person`数组中的任意元素。这就是我们必须写出比较的全部原因。

这有助于澄清它，还是我误解了你的问题？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T07:10:35.440

这是对正在发生的事情的简化，而*不是*Ruby 使用的排序算法（希望如此），但它可能有助于理解正在发生的事情。

假设您有一系列想要排序的年龄：

```
[15, 25, 12] 
```

现在排序算法开始遍历数组以确定正确的排序。首先它选择前两个元素并比较它们：

```
|15, 25|  15 <=> 25 
```

结果是 -1，所以现在它知道 15 应该排在 25 之前。

接下来需要 25 和 12。

```
|25, 12|  25 <=> 12 
```

结果是 1。12 也应该排在 25 之前。

现在我们知道 25 应该排在每个其他元素之后。我们只需要知道 15 到 12 之间的顺序。

```
|15, 12|  15 <=> 12 
```

结果是 1，所以 12 应该排在 15 之前。现在知道最终的排序：

```
[12, 15, 25] 
```

如您所见，比较算法被多次调用。`x`和`y`in`|x, y|`是传递给比较方法的数组元素的占位符。

# c++ - 确保文件名不会超出范围

> ID：15584126
> 
> 赞同：0
> 
> 时间：2013-03-23T06:43:19.447
> 
> 标签：c++, qt, filenames

我想选择一个文件并将文件名存储为`char *`我的 QT 表单的成员变量。我有以下

```
void MainWindow::SelectVolFile(){
    QString qFileName = QFileDialog::getOpenFileName(this, 
        tr("Select VOL file..."), QDir::currentPath(), tr("Files (*.VOL)"));
    if (!qFileName.isEmpty()){
        QByteArray byteFileName = qFileName.toLatin1();
        this->fileName = byteFileName->data();
    }
} 
```

但是，我认为一旦这个函数返回，`byteFileName->data()`就会超出范围。有什么好的方法可以解决这种情况？我不确定应该将哪个变量放在堆上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T06:49:23.503

这在很大程度上取决于`this->fileName`. 如果`fileName`是 a `char*`，那么您是对的：`byteFileName`超出范围`byteFileName->data()`并将被释放，这会导致悬空指针`this->fileName`.

解决这种情况的最简单方法是将 的类型设置`this->fileName`为`QString`，`std::string`或者设置实际复制 的内容的其他类型`byteFileName->data()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T06:50:36.603

您可以定义`this->filename`为`QString`，它将起作用。

如果你想使用`char*`文件名，你应该使用`new`在该函数中分配内存并复制`byteFileName->data()`到它。

```
this->filename = new char[strlen(byteFileName->data())+1];
strcpy(this->filename, byteFileName->data()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T13:12:39.100

最好不要将 qFileName 转换为其他任何内容（fileName 字段必须更改为 QString）：

```
void MainWindow::SelectVolFile(){
    QString qFileName = QFileDialog::getOpenFileName(this, 
        tr("Select VOL file..."), QDir::currentPath(), tr("Files (*.VOL)"));
    if (!qFileName.isEmpty()){
        this->fileName = qFileName;
    }
} 
```

使用您的代码，您将无法正确处理名称包含 latin1 字符集之外的字符的文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T13:21:40.457

一般来说，我可以想到三种可能的解决方案：

*   复制对象
*   使用引用计数
*   移动对象

我会选择最容易与给定库一起使用的那个。

# visual-studio-2010 - Visual Studio 中的 F10 和 F11 键有什么区别？

> ID：15584132
> 
> 赞同：24
> 
> 时间：2013-03-23T06:44:02.447
> 
> 标签：visual-studio-2010

我是 C# 的新手。我打了一个断点并按下`F10`or `F11`。

应该使用哪个键进行编译？

请帮帮我。你能解释一下这个键的作用吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-03-23T06:50:28.787

`F10`("step over") 不会进一步下降到调用堆栈中。它移动到当前函数的下一行。

`F11`("step into") 深入到被调用的函数。

```
void function1()
{
    function2();
    function3();
} 
```

如果上断点`function2()`，`F10`就会前进到该行`function3()`。 `F11`会推进到第一行里面`function2`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-08-01T17:23:32.190

**如果您是 Visual Studio 的绝对初学者，请说 Visual Studio 2017**：

功能键 F10 和 F11 有助于跟踪代码中的执行路径，从而有助于检查中间结果和调试代码。

您需要在自己的代码中的任何行（在方法（函数）内）放置一个“断点”。在执行程序之前，只需单击代码窗口的最左边框对应的代码语句，您需要从该代码语句开始调试。您可以在代码中放置多个断点。

现在执行（运行）程序，它将在您的第一个断点处自动运行。现在继续按 F10 从一个语句移动到另一个语句以继续执行程序（按顺序）。

但是，如果您当前处于包含函数（方法）调用的语句中，例如`FindSum(a,b);` 现在如果您按 F11，它将带您到函数的第一行`FindSum(a,b)`并继续。请注意，当您的当前语句涉及函数调用时按 F10，它将只执行该函数（而不会将您带到函数体中的语句）并移至代码中的下一行。

简而言之，按 F11 会将您带到包括函数体在内的每一行，但 F10 允许从一行移动到下一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T06:49:10.310

`F10`一步一步调试。如果您可以调用此类或任何系统类中的任何函数，则`F10`不要转到该类或方法的定义部分，它们只是逐步进行，但是如果您可以`F11`用于调试，则它可以转到函数的定义部分或班级。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-18T10:10:42.407

`F10`-> 执行下一行代码，但不执行任何函数调用（Step Over）。

`F11`-> 每次执行代码一条语句，然后执行到函数调用（Step Into）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-04T04:04:18.407

一个例子。假设我们有下面的代码片段

使用系统；

命名空间 ConsoleApplication1 { 类程序 { 静态无效 Main(string[] args) {
var add = AddFunction(10,20); Console.WriteLine(添加); Console.ReadKey(); }

```
 static int AddFunction(int a,int b)
    {
            return a+b; 
    }
} 
```

}

现在在 var add = AddFunction(10,20); 处设置断点

如果我们执行 Step Over（或 F10），那么在该行之后，控件将转到下一行，即 Console.WriteLine(add); 其次是 Console.ReadKey(); 最后 } 最后返回值 0 给 OS。

如果我们执行 Step Into（或 F11），那么在 var add = AddFunction(10,20); 之后 ，控件将进入 AddFunciton 的调用函数实现，即 return a+b 和之后的 Console.WriteLine(add); 等等。

希望这会有所帮助。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2016-10-04T03:57:32.383

`F10`=>Step Over(去执行函数的每一行)

`F11`=>Step Into（去执行每个函数）

# neo4j - 来自 PHP 的 Neo4j，检查节点是否存在，如果不存在则创建它

> ID：15584133
> 
> 赞同：0
> 
> 时间：2013-03-23T06:44:04.523
> 
> 标签：neo4j

我正在通过 PHP 访问 neo4j。我是新手，想知道解决简单案例的最佳方法。

我需要检查一个特定节点是否已经存在（基于 auto_index 比较），如果存在，设置一些属性，如果它不存在，则使用一些属性创建它。

请考虑我正在通过 PHP 使用 Cypher 查询。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T21:18:11.283

您可以为此使用 Cypher：http: [//docs.neo4j.org/chunked/milestone/query-create-unique.html#create-unique-create-node-if-missing](http://docs.neo4j.org/chunked/milestone/query-create-unique.html#create-unique-create-node-if-missing) 或使用 Composer（首选方法）。可以通过 REST 接口执行查询（如果从 PHP 访问，则必须使用该接口。）此处的文档：http: [//docs.neo4j.org/chunked/milestone/rest-api-cypher.html#rest-api-send-带参数的查询](http://docs.neo4j.org/chunked/milestone/rest-api-cypher.html#rest-api-send-queries-with-parameters)

快速插件：我是 Neo4jPHP 的作者，它处理 Cypher 查询等。您可以使用 Composer（首选方法）或直接从 github（[https://github.com/jadell/neo4jphp](https://github.com/jadell/neo4jphp)）获取

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-01T07:43:25.403

这直接来自于用密码创建唯一节点下的 Neo4j 文档。请注意，如果具有该特定唯一属性的节点已经存在，则不会再次创建它。这是链接[http://docs.neo4j.org/chunked/stable/rest-api-unique-indexes.html](http://docs.neo4j.org/chunked/stable/rest-api-unique-indexes.html)

**获取或创建唯一节点（创建）**

如果唯一索引中不存在该节点，则创建该节点。

示例请求

```
POST http://localhost:7474/db/data/index/node/people?uniqueness=get_or_create
Accept: application/json; charset=UTF-8
Content-Type: application/json
{
  "key" : "name",
  "value" : "Tobias",
  "properties" : {
  "name" : "Tobias",
  "sequence" : 1
 }
} 
```

# c# - 向匿名列表添加默认选项 - Linq

> ID：15584135
> 
> 赞同：0
> 
> 时间：2013-03-23T06:44:21.170
> 
> 标签：c#, jquery, linq

我正在使用下面的 Linq 查询绑定下拉列表。

```
var RecordList = objContext.Categories
    .Select(c => new { DisplayText = c.CatName, Value = c.CategoryId })
    .ToList(); 
```

在这里，我还希望向列表框中添加一个选项： -- 选择 -- 具有 0 值。

如何修改上面的 RecordList 并显式添加一个默认选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T06:48:56.877

只要匿名类型的属性名称和类型相同，编译器就会重用匿名类型。这使得答案非常简单：

```
var RecordList = objContext.Categories
    .Select(c => new { DisplayText = c.CatName, Value = c.CategoryId })
    .ToList();
RecordList.Insert(0, new { DisplayText = "-- Select --", Value = 0 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T06:55:40.220

绑定列表时插入项目 -

listItem.Items.Insert(0, new ListItem("Select", "0"));

# python - cython - distutils vs cmake：链接到libpython？

> ID：15584144
> 
> 赞同：6
> 
> 时间：2013-03-23T06:46:30.443
> 
> 标签：python, cmake, cython, distutils

我问了另一个问题，这个问题对于一个直接的答案来说有点太复杂了，所以我把它归结为这个基本问题......

当我`aModule.so`使用标准 cython distutils 构建我的时，它似乎没有链接到`libpython`：

```
$ otool -L aModule.so
aModule.so:
    /usr/local/lib/libboost_thread-mt.dylib (compatibility version 0.0.0, current version 0.0.0)
    /usr/local/opt/thrift/lib/libthrift-0.9.0.dylib (compatibility version 0.0.0, current version 0.0.0)
    /usr/lib/libstdc++.6.dylib (compatibility version 7.0.0, current version 7.9.0)
    /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 125.2.11) 
```

但是当我使用 cmake 设置构建时，它会不断生成链接`libpython`到 .so 的链接器命令：

```
$ otool -L aModule.so 
aModule.so:
    /System/Library/Frameworks/Python.framework/Versions/2.7/Python (compatibility version 2.7.0, current version 2.7.1)
    /usr/local/opt/thrift/lib/libthrift-0.9.0.dylib (compatibility version 0.0.0, current version 0.0.0)
    /usr/local/lib/libboost_thread-mt.dylib (compatibility version 0.0.0, current version 0.0.0)
    /usr/lib/libstdc++.6.dylib (compatibility version 7.0.0, current version 52.0.0)
    /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 159.1.0) 
```

distutils 生成的模块似乎适用于我的任何 python2.7 安装（系统或我的项目的 virtualenv）。而当我尝试使用除链接系统 python 之外的任何内容导入 cmake 时，cmake 会因版本不匹配而崩溃。

为什么 distutils 模块没有链接就可以正常工作？如果是这样的话，为什么我需要让 cmake 构建链接 libpython，如果是这样，我怎么能阻止它，以便它与我的任何 python2.7 解释器一起工作而不会崩溃？

目前我可以使用以下命令将 cmake 指向正确的 python：`CXX=g++ cmake -DPYTHON_LIBRARY=/path/to/another/Python`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T19:55:58.410

我意识到问题的根源与 libpython[`cython-cmake-example`](https://github.com/thewtex/cython-cmake-example)以及它的`UseCython.cmake` [`cython_add_module()`](https://github.com/thewtex/cython-cmake-example/blob/master/cmake/UseCython.cmake#L245)函数如何将库显式链接到 libpython 有关。

由于我不知道这是否是一个完全可移植的解决方案，我最终为自己使用做了什么，我在该函数中添加了一个标志来表示`DYNAMIC_LOOKUP`：

```
function( cython_add_module _name _dynamic_lookup )
  set( pyx_module_sources "" )
  set( other_module_sources "" )
  foreach( _file ${ARGN} )
    if( ${_file} MATCHES ".*\\.py[x]?$" )
      list( APPEND pyx_module_sources ${_file} )
    else()
      list( APPEND other_module_sources ${_file} )
    endif()
  endforeach()
  compile_pyx( ${_name} generated_file ${pyx_module_sources} )
  include_directories( ${PYTHON_INCLUDE_DIRS} )
  python_add_module( ${_name} ${generated_file} ${other_module_sources} )
  ### Added here ##
  if( ${_dynamic_lookup} )
    message( STATUS "Not linking target ${_name} against libpython" )
    set_target_properties( ${_name} PROPERTIES LINK_FLAGS "-undefined dynamic_lookup")
  else()
    target_link_libraries( ${_name} ${PYTHON_LIBRARIES} )
  endif()
endfunction() 
```

现在我可以打电话`cython_add_module`了，它不会链接到 libpython。

# matlab - matlab 到 vhdl 代码生成。浮点到定点转换不支持函数 rand

> ID：15584150
> 
> 赞同：1
> 
> 时间：2013-03-23T06:48:11.367
> 
> 标签：matlab, vhdl, hdl

我正在尝试将我的 matlab 文件转换为 vhdl 代码。我正在使用 hdl 编码器。在 hdl 代码生成过程中，我在步骤 3“生成定点代码”中遇到错误。显示的错误是 Function 'rand ' 在浮点到定点转换中不受支持。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:00:12.917

错误很明显 - 您需要使用一个函数，而不是`rand()`希望从中生成 VHDL 代码。

您可能想研究伪随机数生成器。

# c++ - IP 摄像机和 OPENCV

> ID：15584161
> 
> 赞同：1
> 
> 时间：2013-03-23T06:49:18.553
> 
> 标签：c++, opencv, image-processing, dev-c++

再会！

我使用 Dev-C++ 作为我的 IDE 和 OpenCV 库。我需要获取我的 IP 摄像机拍摄的视频并使用 OpenCV 处理它。有人可以教我怎么做。我的操作系统是 Windows 7 64 位。非常感谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T07:12:37.230

如果它是最近的 opencv 版本，这可能有效：

```
Mat frame;
namedWindow("video", 1);
VideoCapture cap("http://150.214.93.55/mjpg/video.mjpg");
while ( cap.isOpened() )
{
    cap >> frame;
    if(frame.empty()) break;

    imshow("video", frame);
    if(waitKey(30) >= 0) break;
} 
```

无论如何，opencv 似乎坚持认为 url 必须以“.mjpg”（点 mjpg）结尾，所以如果不是，请添加一个虚拟参数，例如： `my/fancy/url?type=.mjpg`

# javascript - HTML 到 ASP.net 通过 JSON 进行通信

> ID：15584164
> 
> 赞同：0
> 
> 时间：2013-03-23T06:49:36.850
> 
> 标签：javascript, asp.net, json, jquery

以下是我的 html 代码和 C# 代码。问题是我无法正常工作

html代码---

```
 <!doctype html>

    <html lang="en">
   <head>
  <meta charset="utf-8" />
  <title></title>
   <link rel="shortcut icon" type="img/ico" href="Images/favicon.ico"/>
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
   <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
   <link rel="stylesheet" href="/resources/demos/style.css" />
   <script type="text/javascript">
        $("#btn_login").live("click", function () {
       var GetLogDet = {};
       GetLogDet.username = document.getElementById('password').value;
       GetLogDet.password = document.getElementById('password').value;

       $.ajax({
           type: 'POST',
           url: 'Login.cs/GetLogDet',
           data: "{GetLogDet:" + JSON.stringify(GetLogDet) + "}",
           contentType: 'application/json; charset=utf-8',
           dataType: 'json',
           success: function (r) {
               alert(r.d.username);
               alert(r.d.password);
           }
       });
   });
   </script>
 <script>
 $(function() {
   $( "#dialog" ).dialog();
  });
  </script>
 </head>
 <body>
  <form id="form1" runat="server">
<div id="dialog" title= " Login" >
 <div>
   <table>
     <tr>
      <td><img src="Images/pics.gif"/></td>
      <td><input type="text" id="username" name="uname"></td>
     </tr>

     <tr>
       <td><img src="Images/pics2.gif" /></td>
       <td><input type="password" id="password" name="pwrd"></td>
     </tr>
       <tr>
       <td></td>
       <td align="right"><input type="button" id="btn_login" class="login" value=">" onclick="searchKeyPress()"></td>
     </tr>
</table>
   </div>
   <div>

  </div>

   </div>
    </form>

  </body>
  </html> 
```

我的 C# 代码是

```
 using System;
using System.Collections.Generic;
using System.Linq;
 using System.Web;

public partial class _Default : System.Web.UI.Page
{
    [System.Web.Services.WebMethod]
    public static Login GetLogDet(Login Logindet)
    {
        return Logindet;
    }
}

public class Login
{
    String username, password;
    public String Username
    {
        get
        {
            return username;
        }
        set
        {
            username = value;
        }
    }

    public String Password
    {
        get
        {
            return password;
        }
        set
        {
            password = value;
        }
    }

   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T06:51:18.193

您需要将代码包装在`document.ready()`.

并且也使用`.on()`而不是`.live()`因为`.live`已弃用。

**例子**

```
$(function()
{
   $( "#dialog" ).dialog();

   $("#btn_login").on("click", function ()
   {
        var GetLogDet = {};
        GetLogDet.username = document.getElementById('password').value;
        GetLogDet.password = document.getElementById('password').value;
        $.ajax(
        {
            type: 'POST',
            url: 'Login.cs/GetLogDet',
            data: "{GetLogDet:" + JSON.stringify(GetLogDet) + "}",
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            success: function (r)
            {
                alert(r.d.username);
                alert(r.d.password);
            }
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T10:35:56.203

btn_login 必须在页面完全加载之前点击。应该使用 document.ready 事件来绑定这个按钮。同样正如@dipesh 所说，使用“on”而不是“live”

# c# - 如何使用该系统的 ip 获取网络系统 DateTime

> ID：15584166
> 
> 赞同：0
> 
> 时间：2013-03-23T06:49:47.257
> 
> 标签：c#, datetime, network-programming

我在网络上有一个 Windows 应用程序，可以在该网络的多个位置执行，但问题是，它取决于日期和时间。

我是否有可能使用 IP 或任何其他方式从服务器获取 DateTime？所以我可以保持相同的日期和时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T06:54:13.277

尝试实现以下>>

```
public static DateTime GetNistTime()
{
    DateTime dt = DateTime.MinValue;

    HttpWebRequest req = (HttpWebRequest)WebRequest.Create("http://....");
    req.Method = "GET";
    req.Accept = "text/html, application/xhtml+xml, */*";
    req.UserAgent = "Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Trident/5.0)";
    req.CachePolicy = new RequestCachePolicy(RequestCacheLevel.NoCacheNoStore); //No caching
    HttpWebResponse res = (HttpWebResponse)req.GetResponse();
    if (res.StatusCode == HttpStatusCode.OK)
    {
        StreamReader st = new StreamReader(res.GetResponseStream());
        string html = st.ReadToEnd().ToUpper();
        string time = Regex.Match(html, @">\d+:\d+:\d+<").Value; //HH:mm:ss format
        string date = Regex.Match(html, @">\w+,\s\w+\s\d+,\s\d+<").Value; //dddd, MMMM dd, yyyy
        dt= DateTime.Parse((date + " " + time).Replace(">", "").Replace("<", ""));
    }

    return dt;
} 
```

# delphi - 在 Delphi 的 TImage 控件上绘制 Sphere

> ID：15584170
> 
> 赞同：8
> 
> 时间：2013-03-23T06:50:24.623
> 
> 标签：delphi, 3d, geometry

我想画这样的球体： ![在此处输入图像描述](../Images/e9ad4623e39dd66acc997abba37ee760.png)

下面的代码是生成圆的顶点并在 TIMAGE 上绘制一个圆，但我希望它用于 SPHERE：

```
for i := 0 to 360 do begin 
   //Find value of X and Y 
   pntCordXY.X := Radius * Cos(DegToRad(i)); 
   pntCordXY.Y := Radius * Sin(DegToRad(i)); 
   if i = 0 then 
      image1.Canvas.MoveTo(Round(pntCordXY.X), Round(pntCordXY.Y)) 
   else 
      image1.Canvas.LineTo(Round(pntCordXY.X), Round(pntCordXY.Y)); 
end; 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-23T12:25:42.443

结果证明这是一个有趣的练习。好问题！

起初，您专门要求在 a 上绘制这样的球体`TImage`，但该组件应该用于显示图形。当然，它有一个可以在其上绘制的画布，但在下文中我使用的`TPaintBox`是自己绘画的首选组件。因为，你必须自己画这个。完全。

### 所需材料：

*   用于计算球体上的 3D 点、围绕多个轴旋转地球以及可能用于将 3D 点转换为 2D 屏幕坐标系的一些数学运算。基本情况是：

    ```
    type
      TPoint3D = record
        X: Double;
        Y: Double;
        Z: Double;
      end;

    function Sphere(Phi, Lambda: Double): TPoint3D;
    begin
      Result.X := Cos(Phi) * Sin(Lambda);
      Result.Y := Sin(Phi);
      Result.Z := Cos(Phi) * Cos(Lambda);
    end;

    function RotateAroundX(const P: TPoint3D; Alfa: Double): TPoint3D;
    begin
      Result.X := P.X;
      Result.Y := P.Y * Cos(Alfa) + P.Z * Sin(Alfa);
      Result.Z := P.Y * -Sin(Alfa) + P.Z * Cos(Alfa);
    end;

    function RotateAroundY(const P: TPoint3D; Beta: Double): TPoint3D;
    begin
      Result.X := P.X * Cos(Beta) + P.Z * Sin(Beta);
      Result.Y := P.Y;
      Result.Z := P.X * -Sin(Beta) + P.Z * Cos(Beta);
    end; 
    ```

*   一些全局变量可以使用：

    ```
    var
      Alfa: Integer;   //Rotation around X axis
      Beta: Integer;   //Rotation around Y axis
      C: TPoint;       //Center
      R: Integer;      //Radius
      Phi: Integer;    //Angle relative to XY plane
      Lambda: Integer; //Angle around Z axis (from pole to pole)
      P: TPoint3D;     //2D projection of a 3D point on the sphere's surface 
    ```

*   计算纬度圈所有点的代码：

    ```
    for Phi := -8 to 8 do
      for Lambda := 0 to 360 do
      begin
        P := Sphere(DegToRad(Phi * 10), DegToRad(Lambda));
        P := RotateAroundX(P, Alfa);
        P := RotateAroundY(P, Beta);
      end; 
    ```

*   计算经线所有点的代码：

    ```
    for Lambda := 0 to 17 do
      for Phi := 0 to 360 do
      begin
        P := Sphere(DegToRad(Phi), DegToRad(Lambda * 10));
        P := RotateAroundX(P, Alfa);
        P := RotateAroundY(P, Beta);
      end; 
    ```

    这些点可用于在颜料盒上绘制直线或曲线。这些点的 Z 值不用于绘图，但它们有助于确定该点位于地球的背面还是正面。

*   逻辑和辅助。在绘制地球前面的所有点、线或曲线之前，必须先绘制地球后面的点、线或曲线，以保持*深度*。

*   绘图框架或绘图库。Delphi 默认配备标准 Windows GDI，可通过`Canvas`绘图盒的属性获得。另一种可能性是 GDI+，它更先进，效率更高。特别是考虑抗锯齿。这是我使用的两个框架，但还有其他框架。例如：OpenGL，它可以自动将 3D 对象转换为 2D，并且能够添加 3D 表面、灯光、材质、着色器和更多功能。

*   一个测试应用程序，添加在此问题的底部。

*   双缓冲技术使油漆工作无闪烁。我选择了一个单独的位图对象，在该对象上绘制了所有内容，然后在画框上绘制该位图。演示程序还演示了没有它的性能（例程：）`GDIMultipleColorsDirect`。

### 设置：

在表单上放置一个绘画框，并将其`Align`属性设置为`alClient`，添加一个用于模拟的计时器组件，为 、 、 和 添加表单事件处理程序`OnCreate`，并`OnDestroy`为添加一个事件处理程序。`OnKeyPress``OnResize``PaintBox1.OnPaint`

```
object Form1: TForm1
  Left = 497
  Top = 394
  Width = 450
  Height = 450
  Caption = 'Sphere'
  Color = clWhite
  Font.Charset = DEFAULT_CHARSET
  Font.Color = clWindowText
  Font.Height = -11
  Font.Name = 'MS Sans Serif'
  Font.Style = []
  OldCreateOrder = False
  OnCreate = FormCreate
  OnDestroy = FormDestroy
  OnKeyPress = FormKeyPress
  OnResize = FormResize
  PixelsPerInch = 96
  TextHeight = 13
  object PaintBox1: TPaintBox
    Left = 0
    Top = 0
    Width = 434
    Height = 414
    Align = alClient
    OnPaint = PaintBox1Paint
  end
  object Timer1: TTimer
    Interval = 25
    OnTimer = Timer1Timer
    Left = 7
    Top = 7
  end
end 
```

### 第一次尝试：

使用默认 GDI，我从每个点到下一个点画线。为了增加深度感（透视），我给前面的线条增加了宽度。此外，我逐渐让线条的颜色从深到浅溢出（例程：）`GDIMultipleColors`。

![球体 1](../Images/918e72be7680784a9cee54bd9e4965cc.png)

### 第二次尝试：

不错，但所有像素都太难了！让我们自己尝试做一些抗锯齿... ;) 此外，我将颜色数量减少到两种：前面是暗的，后面是亮的。这是为了摆脱所有单独的线段：现在每个圆圈和子午线都分为两条折线。我在中间使用了第三种颜色来实现抗锯齿效果（例程：）`GDIThreeColors`。

![球体 2](../Images/d000dee4810abe18a05ead945a28c51c.png)

### GDI+ 救援：

这种抗锯齿并不是最迷人的。为了获得真正流畅的绘制工作，让我们将代码转换为 GDI+ 样式。对于 Delphi 2009 及更高版本，可[从此处](http://www.bilsen.com/gdiplus/index.shtml)获得该库。对于较旧的 Delphi 版本，该库可[从此处](http://www.progdigy.com/?page_id=7)获得。

在 GDI+ 中，绘图的工作方式略有不同。创建一个`TGPGraphics`对象并使用其构造函数将其附加到设备上下文。随后，对象上的绘图操作由 API 翻译，并将输出到目标上下文，在本例中为位图（例程：）`GDIPlusDualLinewidths`。

![球体 3](../Images/3d06f76fb59f62e2667a3de49ce428de.png)

### 还能更好吗？

嗯，这已经很重要了。但是这个地球是由只有两种不同线宽的折线组成的。让我们在两者之间添加一些。每个圆圈或子午线中的段数由`Precision`常数控制（例程：`GDIPlusMultipleLinewidths`）。

![在此处输入图像描述](../Images/408b5051cee9221c6866c6d2a063b67e.png)

### 示例应用：

按一个键循环通过上述例程。

```
unit Globe;

interface

uses
  Windows, SysUtils, Classes, Graphics, Controls, Forms, ExtCtrls, Math,
  GDIPAPI, GDIPOBJ;

type
  TForm1 = class(TForm)
    PaintBox1: TPaintBox;
    Timer1: TTimer;
    procedure FormCreate(Sender: TObject);
    procedure FormDestroy(Sender: TObject);
    procedure FormResize(Sender: TObject);
    procedure Timer1Timer(Sender: TObject);
    procedure FormKeyPress(Sender: TObject; var Key: Char);
    procedure PaintBox1Paint(Sender: TObject);
  private
    FBmp: TBitmap;
    FPen: TGPPen;
    procedure GDIMultipleColorsDirect;
    procedure GDIMultipleColors;
    procedure GDIThreeColors;
    procedure GDIPlusDualLinewidths;
    procedure GDIPlusMultipleLinewidths;
  public
    A: Integer; //Alfa, rotation round X axis
    B: Integer; //Beta, rotation round Y axis
    C: TPoint;  //Center
    R: Integer; //Radius
  end;

var
  Form1: TForm1;

implementation

{$R *.DFM}

const
  LineColorFore = $00552B00;
  LineColorMiddle = $00AA957F;
  LineColorBack = $00FFDFBF;
  BackColor = clWhite;
  LineWidthFore = 4.5;
  LineWidthBack = 1.5;
  Precision = 10; //Should be even!

type
  TCycle = 0..Precision - 1;

  TPoint3D = record
    X: Double;
    Y: Double;
    Z: Double;
  end;

function Sphere(Phi, Lambda: Double): TPoint3D;
begin
  Result.X := Cos(Phi) * Sin(Lambda);
  Result.Y := Sin(Phi);
  Result.Z := Cos(Phi) * Cos(Lambda);
end;

function RotateAroundX(const P: TPoint3D; Alfa: Double): TPoint3D;
begin
  Result.X := P.X;
  Result.Y := P.Y * Cos(Alfa) + P.Z * Sin(Alfa);
  Result.Z := P.Y * -Sin(Alfa) + P.Z * Cos(Alfa);
end;

function RotateAroundY(const P: TPoint3D; Beta: Double): TPoint3D;
begin
  Result.X := P.X * Cos(Beta) + P.Z * Sin(Beta);
  Result.Y := P.Y;
  Result.Z := P.X * -Sin(Beta) + P.Z * Cos(Beta);
end;

{ TForm1 }

procedure TForm1.FormCreate(Sender: TObject);
begin
  Brush.Style := bsClear; //This is múch cheaper then DoubleBuffered := True
  FBmp := TBitmap.Create;
  FPen := TGPPen.Create(ColorRefToARGB(ColorToRGB(clBlack)));
  A := 35;
  B := 25;
end;

procedure TForm1.FormDestroy(Sender: TObject);
begin
  FPen.Free;
  FBmp.Free;
end;

procedure TForm1.FormResize(Sender: TObject);
begin
  C.X := PaintBox1.ClientWidth div 2;
  C.Y := PaintBox1.ClientHeight div 2;
  R := Min(C.X, C.Y) - 10;
  FBmp.Width := PaintBox1.ClientWidth;
  FBmp.Height := PaintBox1.ClientHeight;
end;

procedure TForm1.Timer1Timer(Sender: TObject);
begin
  A := A + 2;
  B := B + 1;
  PaintBox1.Invalidate;
end;

procedure TForm1.FormKeyPress(Sender: TObject; var Key: Char);
begin
  Tag := Tag + 1;
  PaintBox1.Invalidate;
end;

procedure TForm1.PaintBox1Paint(Sender: TObject);
begin
  case Tag mod 5 of
    0: GDIMultipleColorsDirect;
    1: GDIMultipleColors;
    2: GDIThreeColors;
    3: GDIPlusDualLinewidths;
    4: GDIPlusMultipleLinewidths;
  end;
end;

procedure TForm1.GDIPlusMultipleLinewidths;
var
  Lines: array of TPointFDynArray;
  PointCount: Integer;
  LineCount: Integer;
  Drawing: TGPGraphics;
  Alfa: Double;
  Beta: Double;
  Cycle: TCycle;
  Phi: Integer;
  Lambda: Integer;
  P: TPoint3D;
  Filter: TCycle;
  PrevFilter: TCycle;
  I: Integer;

  procedure ResetLines;
  begin
    SetLength(Lines, 0);
    LineCount := 0;
    PointCount := 0;
  end;

  procedure FinishLastLine;
  begin
    if PointCount < 2 then
      Dec(LineCount)
    else
      SetLength(Lines[LineCount - 1], PointCount);
  end;

  procedure NewLine;
  begin
    if LineCount > 0 then
      FinishLastLine;
    SetLength(Lines, LineCount + 1);
    SetLength(Lines[LineCount], 361);
    Inc(LineCount);
    PointCount := 0;
  end;

  procedure AddPoint(X, Y: Single);
  begin
    Lines[LineCount - 1][PointCount] := MakePoint(X, Y);
    Inc(PointCount);
  end;

  function CycleFromZ(Z: Single): TCycle;
  begin
    Result := Round((Z + 1) / 2 * High(TCycle));
  end;

  function CycleToLineWidth(ACycle: TCycle): Single;
  begin
    Result := LineWidthBack +
      (LineWidthFore - LineWidthBack) * (ACycle / High(TCycle));
  end;

  function CycleToLineColor(ACycle: TCycle): TGPColor;
  begin
    if ACycle <= (High(TCycle) div 2) then
      Result := ColorRefToARGB(ColorToRGB(LineColorBack))
    else
      Result := ColorRefToARGB(ColorToRGB(LineColorFore));
  end;

begin
  Drawing := TGPGraphics.Create(FBmp.Canvas.Handle);
  try
    Drawing.Clear(ColorRefToARGB(ColorToRGB(clWhite)));
    Drawing.SetSmoothingMode(SmoothingModeAntiAlias);
    Alfa := DegToRad(A);
    Beta := DegToRad(B);
    for Cycle := Low(TCycle) to High(TCycle) do
    begin
      ResetLines;
      //Latitude
      for Phi := -8 to 8 do
      begin
        NewLine;
        PrevFilter := 0;
        for Lambda := 0 to 360 do
        begin
          P := Sphere(DegToRad(Phi * 10), DegToRad(Lambda));
          P := RotateAroundX(P, Alfa);
          P := RotateAroundY(P, Beta);
          Filter := CycleFromZ(P.Z);
          if Filter <> PrevFilter then
          begin
            AddPoint(C.X + P.X * R, C.Y + P.Y * R);
            NewLine;
          end;
          if Filter = Cycle then
            AddPoint(C.X + P.X * R, C.Y + P.Y * R);
          PrevFilter := Filter;
        end;
      end;
      //Longitude
      for Lambda := 0 to 17 do
      begin
        NewLine;
        PrevFilter := 0;
        for Phi := 0 to 360 do
        begin
          P := Sphere(DegToRad(Phi), DegToRad(Lambda * 10));
          P := RotateAroundX(P, Alfa);
          P := RotateAroundY(P, Beta);
          Filter := CycleFromZ(P.Z);
          if Filter <> PrevFilter then
          begin
            AddPoint(C.X + P.X * R, C.Y + P.Y * R);
            NewLine;
          end;
          if Filter = Cycle then
            AddPoint(C.X + P.X * R, C.Y + P.Y * R);
          PrevFilter := Filter;
        end;
      end;
      FinishLastLine;
      FPen.SetColor(CycleToLineColor(Cycle));
      FPen.SetWidth(CycleToLineWidth(Cycle));
      for I := 0 to LineCount - 1 do
        Drawing.DrawLines(FPen, PGPPointF(@(Lines[I][0])), Length(Lines[I]));
      if Cycle = (High(TCycle) div 2 + 1) then
        Drawing.DrawEllipse(FPen, C.X - R, C.Y - R, 2 * R, 2 * R);
    end;
  finally
    Drawing.Free;
  end;
  PaintBox1.Canvas.Draw(0, 0, FBmp);
end;

procedure TForm1.GDIPlusDualLinewidths;
const
  LineColors: array[Boolean] of TColor = (LineColorFore, LineColorBack);
  LineWidths: array[Boolean] of Single = (LineWidthFore, LineWidthBack);
  BackColor = clWhite;
var
  Lines: array of TPointFDynArray;
  PointCount: Integer;
  LineCount: Integer;
  Drawing: TGPGraphics;
  Alfa: Double;
  Beta: Double;
  Phi: Integer;
  Lambda: Integer;
  BackSide: Boolean;
  P: TPoint3D;
  PrevZ: Double;
  I: Integer;

  procedure ResetLines;
  begin
    SetLength(Lines, 0);
    LineCount := 0;
    PointCount := 0;
  end;

  procedure FinishLastLine;
  begin
    if PointCount < 2 then
      Dec(LineCount)
    else
      SetLength(Lines[LineCount - 1], PointCount);
  end;

  procedure NewLine;
  begin
    if LineCount > 0 then
      FinishLastLine;
    SetLength(Lines, LineCount + 1);
    SetLength(Lines[LineCount], 361);
    Inc(LineCount);
    PointCount := 0;
  end;

  procedure AddPoint(X, Y: Single);
  begin
    Lines[LineCount - 1][PointCount] := MakePoint(X, Y);
    Inc(PointCount);
  end;

begin
  Drawing := TGPGraphics.Create(FBmp.Canvas.Handle);
  try
    Drawing.Clear(ColorRefToARGB(ColorToRGB(clWhite)));
    Drawing.SetSmoothingMode(SmoothingModeAntiAlias);
    Alfa := DegToRad(A);
    Beta := DegToRad(B);
    for BackSide := True downto False do
    begin
      ResetLines;
      //Latitude
      for Phi := -8 to 8 do
      begin
        NewLine;
        PrevZ := 0;
        for Lambda := 0 to 360 do
        begin
          P := Sphere(DegToRad(Phi * 10), DegToRad(Lambda));
          P := RotateAroundX(P, Alfa);
          P := RotateAroundY(P, Beta);
          if Sign(P.Z) <> Sign(PrevZ) then
            NewLine;
          if (BackSide and (P.Z < 0)) or (not BackSide and (P.Z >= 0)) then
            AddPoint(C.X + P.X * R, C.Y + P.Y * R);
          PrevZ := P.Z;
        end;
      end;
      //Longitude
      for Lambda := 0 to 17 do
      begin
        NewLine;
        PrevZ := 0;
        for Phi := 0 to 360 do
        begin
          P := Sphere(DegToRad(Phi), DegToRad(Lambda * 10));
          P := RotateAroundX(P, Alfa);
          P := RotateAroundY(P, Beta);
          if Sign(P.Z) <> Sign(PrevZ) then
            NewLine;
          if (BackSide and (P.Z < 0)) or (not BackSide and (P.Z >= 0)) then
            AddPoint(C.X + P.X * R, C.Y + P.Y * R);
          PrevZ := P.Z;
        end;
      end;
      FinishLastLine;
      FPen.SetColor(ColorRefToARGB(ColorToRGB(LineColors[BackSide])));
      FPen.SetWidth(LineWidths[BackSide]);
      for I := 0 to LineCount - 1 do
        Drawing.DrawLines(FPen, PGPPointF(@(Lines[I][0])), Length(Lines[I]));
    end;
    Drawing.DrawEllipse(FPen, C.X - R, C.Y - R, 2 * R, 2 * R);
  finally
    Drawing.Free;
  end;
  PaintBox1.Canvas.Draw(0, 0, FBmp);
end;

procedure TForm1.GDIThreeColors;
const
  LineColors: array[TValueSign] of TColor = (LineColorBack, LineColorMiddle,
    LineColorFore);
  LineWidths: array[TValueSign] of Integer = (2, 4, 2);
var
  Lines: array of array of TPoint;
  PointCount: Integer;
  LineCount: Integer;
  Alfa: Double;
  Beta: Double;
  Phi: Integer;
  Lambda: Integer;
  BackSide: Boolean;
  P: TPoint3D;
  PrevZ: Double;
  I: TValueSign;
  J: Integer;

  procedure ResetLines;
  begin
    SetLength(Lines, 0);
    LineCount := 0;
    PointCount := 0;
  end;

  procedure FinishLastLine;
  begin
    if PointCount < 2 then
      Dec(LineCount)
    else
      SetLength(Lines[LineCount - 1], PointCount);
  end;

  procedure NewLine;
  begin
    if LineCount > 0 then
      FinishLastLine;
    SetLength(Lines, LineCount + 1);
    SetLength(Lines[LineCount], 361);
    Inc(LineCount);
    PointCount := 0;
  end;

  procedure AddPoint(APoint: TPoint); overload;
  var
    Last: TPoint;
  begin
    if PointCount > 0 then
    begin
      Last := Lines[LineCount - 1][PointCount - 1];
      if (APoint.X = Last.X) and (APoint.Y = Last.Y) then
        Exit;
    end;
    Lines[LineCount - 1][PointCount] := APoint;
    Inc(PointCount);
  end;

  procedure AddPoint(X, Y: Integer); overload;
  begin
    AddPoint(Point(X, Y));
  end;

begin
  FBmp.Canvas.Brush.Color := BackColor;
  FBmp.Canvas.FillRect(Rect(0, 0, FBmp.Width, FBmp.Height));
  Alfa := DegToRad(A);
  Beta := DegToRad(B);
  for BackSide := True downto False do
  begin
    ResetLines;
    //Latitude
    for Phi := -8 to 8 do
    begin
      NewLine;
      PrevZ := 0;
      for Lambda := 0 to 360 do
      begin
        P := Sphere(DegToRad(Phi * 10), DegToRad(Lambda));
        P := RotateAroundX(P, Alfa);
        P := RotateAroundY(P, Beta);
        if Sign(P.Z) <> Sign(PrevZ) then
          NewLine;
        if (BackSide and (P.Z < 0)) or (not BackSide and (P.Z >= 0)) then
          AddPoint(Round(C.X + P.X * R), Round(C.Y + P.Y * R));
        PrevZ := P.Z;
      end;
    end;
    //Longitude
    for Lambda := 0 to 17 do
    begin
      NewLine;
      PrevZ := 0;
      for Phi := 0 to 360 do
      begin
        P := Sphere(DegToRad(Phi), DegToRad(Lambda * 10));
        P := RotateAroundX(P, Alfa);
        P := RotateAroundY(P, Beta);
        if Sign(P.Z) <> Sign(PrevZ) then
          NewLine;
        if (BackSide and (P.Z < 0)) or (not BackSide and (P.Z >= 0)) then
          AddPoint(Round(C.X + P.X * R), Round(C.Y + P.Y * R));
        PrevZ := P.Z;
      end;
    end;
    FinishLastLine;
    if BackSide then
    begin
      FBmp.Canvas.Pen.Color := LineColors[-1];
      FBmp.Canvas.Pen.Width := LineWidths[-1];
      for J := 0 to LineCount - 1 do
        FBmp.Canvas.Polyline(Lines[J]);
    end
    else
      for I := 0 to 1 do
      begin
        FBmp.Canvas.Pen.Color := LineColors[I];
        FBmp.Canvas.Pen.Width := LineWidths[I];
        for J := 0 to LineCount - 1 do
          FBmp.Canvas.Polyline(Lines[J])
      end
  end;
  FBmp.Canvas.Brush.Style := bsClear;
  FBmp.Canvas.Ellipse(C.X - R, C.Y - R, C.X + R, C.Y + R);
  PaintBox1.Canvas.Draw(0, 0, FBmp);
end;

procedure TForm1.GDIMultipleColors;
var
  Alfa: Double;
  Beta: Double;
  Phi: Integer;
  Lambda: Integer;
  P: TPoint3D;
  Backside: Boolean;

  function ColorFromZ(Z: Single): TColorRef;
  var
    R: Integer;
    G: Integer;
    B: Integer;
  begin
    Z := (Z + 1) / 2;
    R := GetRValue(LineColorFore) - GetRValue(LineColorBack);
    R := GetRValue(LineColorBack) + Round(Z * R);
    G := GetGValue(LineColorFore) - GetGValue(LineColorBack);
    G := GetGValue(LineColorBack) + Round(Z * G);
    B := GetBValue(LineColorFore) - GetBValue(LineColorBack);
    B := GetBValue(LineColorBack) + Round(Z * B);
    Result := RGB(R, G, B);
  end;

begin
  FBmp.Canvas.Pen.Width := 2;
  FBmp.Canvas.Brush.Color := BackColor;
  FBmp.Canvas.FillRect(PaintBox1.ClientRect);
  Alfa := DegToRad(A);
  Beta := DegToRad(B);
  for Backside := True downto False do
  begin
    if not BackSide then
      FBmp.Canvas.Pen.Width := 3;
    //Latitude
    for Phi := -8 to 8 do
      for Lambda := 0 to 360 do
      begin
        P := Sphere(DegToRad(Phi * 10), DegToRad(Lambda));
        P := RotateAroundX(P, Alfa);
        P := RotateAroundY(P, Beta);
        if (Lambda = 0) or (Backside and (P.Z >= 0)) or
          (not Backside and (P.Z < 0)) then
            FBmp.Canvas.MoveTo(C.X + Round(P.X * R), C.Y + Round(P.Y * R))
        else
        begin
          FBmp.Canvas.Pen.Color := ColorFromZ(P.Z);
          FBmp.Canvas.LineTo(C.X + Round(P.X * R), C.Y + Round(P.Y * R));
        end;
      end;
    //Longitude
    for Lambda := 0 to 17 do
      for Phi := 0 to 360 do
      begin
        P := Sphere(DegToRad(Phi), DegToRad(Lambda * 10));
        P := RotateAroundX(P, Alfa);
        P := RotateAroundY(P, Beta);
        if (Phi = 0) or (Backside and (P.Z >= 0)) or
          (not Backside and (P.Z < 0)) then
            FBmp.Canvas.MoveTo(C.X + Round(P.X * R), C.Y + Round(P.Y * R))
        else
        begin
          FBmp.Canvas.Pen.Color := ColorFromZ(P.Z);
          FBmp.Canvas.LineTo(C.X + Round(P.X * R), C.Y + Round(P.Y * R));
        end;
      end;
  end;
  PaintBox1.Canvas.Draw(0, 0, FBmp);
end;

procedure TForm1.GDIMultipleColorsDirect;
var
  Alfa: Double;
  Beta: Double;
  Phi: Integer;
  Lambda: Integer;
  P: TPoint3D;
  Backside: Boolean;

  function ColorFromZ(Z: Single): TColorRef;
  var
    R: Integer;
    G: Integer;
    B: Integer;
  begin
    Z := (Z + 1) / 2;
    R := GetRValue(LineColorFore) - GetRValue(LineColorBack);
    R := GetRValue(LineColorBack) + Round(Z * R);
    G := GetGValue(LineColorFore) - GetGValue(LineColorBack);
    G := GetGValue(LineColorBack) + Round(Z * G);
    B := GetBValue(LineColorFore) - GetBValue(LineColorBack);
    B := GetBValue(LineColorBack) + Round(Z * B);
    Result := RGB(R, G, B);
  end;

begin
  PaintBox1.Canvas.Pen.Width := 2;
  PaintBox1.Canvas.Brush.Color := BackColor;
  PaintBox1.Canvas.FillRect(PaintBox1.ClientRect);
  Alfa := DegToRad(A);
  Beta := DegToRad(B);
  for Backside := True downto False do
  begin
    if not BackSide then
      PaintBox1.Canvas.Pen.Width := 3;
    //Latitude
    for Phi := -8 to 8 do
      for Lambda := 0 to 360 do
      begin
        P := Sphere(DegToRad(Phi * 10), DegToRad(Lambda));
        P := RotateAroundX(P, Alfa);
        P := RotateAroundY(P, Beta);
        if (Lambda = 0) or (Backside and (P.Z >= 0)) or
          (not Backside and (P.Z < 0)) then
            PaintBox1.Canvas.MoveTo(C.X + Round(P.X * R), C.Y + Round(P.Y * R))
        else
        begin
          PaintBox1.Canvas.Pen.Color := ColorFromZ(P.Z);
          PaintBox1.Canvas.LineTo(C.X + Round(P.X * R), C.Y + Round(P.Y * R));
        end;
      end;
    //Longitude
    for Lambda := 0 to 17 do
      for Phi := 0 to 360 do
      begin
        P := Sphere(DegToRad(Phi), DegToRad(Lambda * 10));
        P := RotateAroundX(P, Alfa);
        P := RotateAroundY(P, Beta);
        if (Phi = 0) or (Backside and (P.Z >= 0)) or
          (not Backside and (P.Z < 0)) then
            PaintBox1.Canvas.MoveTo(C.X + Round(P.X * R), C.Y + Round(P.Y * R))
        else
        begin
          PaintBox1.Canvas.Pen.Color := ColorFromZ(P.Z);
          PaintBox1.Canvas.LineTo(C.X + Round(P.X * R), C.Y + Round(P.Y * R));
        end;
      end;
  end;
end;

end. 
```

（感谢 bummi 的[评论](https://stackoverflow.com/users/1699210/bummi)。）

# oracle - Oracle PL/SQL：检查视图中是否存在记录的有效方法？

> ID：15584175
> 
> 赞同：0
> 
> 时间：2013-03-23T06:51:07.257
> 
> 标签：oracle, plsql, oracle11g

我有一个视图，它建立在具有大量数据的多个表（日常事务表）上。我有一个 Oracle 作业，它从该表中提取数据，如果数据不存在于 VIEW 中，那么它会记录一条适当的消息 -

```
DECLARE
ln_countOfRecords NUMBER;
BEGIN
      SELECT COUNT(1)
      INTO ln_countOfRecords
      FROM v_view_with_huge_data; --Data is also coming from DBLink tables

      IF ln_countOfRecords > 0
      THEN
         p_log_message('data found');
         --further processing
         ...
         ...
      ELSE
         p_log_message('no data found');
      END IF;
END 
```

现在该 select 语句花费的时间比预期的要长。谁能告诉我如何有效地检查是否至少有一条记录在视图中。

**请注意：：**这不是重复的问题，因为我指的是 VIEW 而不是 TABLE。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T07:03:49.530

```
DECLARE
    ln_exists NUMBER;
BEGIN
      SELECT COUNT(*)
      INTO ln_exists
      FROM v_view_with_huge_data --Data is also coming from DBLink tables
 /**/ WHERE rownum <= 1 /**/

      IF ln_exists > 0
      THEN
         p_log_message('data found');
         --further processing
         ...
         ...
      ELSE
         p_log_message('no data found');
      END IF;
END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T23:20:07.447

尽管我知道我们都这样做（我也是，尽管我知道得更好:-)，但不要使用 COUNT，除非您真的需要知道给定条件存在多少行。在您的示例中，您不关心存在*多少*行，只存在一个或多个行。找出结果是否存在的更好方法如下：

```
DECLARE
  nField_value
  bRows_exist        BOOLEAN := FALSE;
BEGIN
  BEGIN
    SELECT some_field_from_view
      INTO nField_value
      FROM v_view_with_huge_data;

    -- Handle the case where only one row exists in the view

    bRows_exist := TRUE;
  EXCEPTION
    WHEN TOO_MANY_ROWS THEN  -- multiple rows exist in the view
      bRows_exist := TRUE;

    WHEN NO_DATA_FOUND THEN  -- no rows in the view
      bRows_exist := FALSE;
  END;

  IF bRows_exist = TRUE THEN
    p_log_message('data found');
    --further processing
         ...
         ...
  ELSE
    p_log_message('no data found');
  END IF;
END; 
```

在某些情况下，我发现消除 COUNT(*) 会使程序表现出较差的性能并使其成为合适的运行程序。

YMMV。

分享和享受。

# android - 无法通过本地 HTML 在 Android WebView 上呈现 Facebook 评论

> ID：15584176
> 
> 赞同：8
> 
> 时间：2013-03-23T06:51:11.987
> 
> 标签：android, android-activity, facebook-javascript-sdk, android-webview, facebook-comments

我有一个简单的活动来创建一个`WebView`加载 Facebook 评论的活动，例如

```
 protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        WebView myWebView = (WebView) findViewById(R.id.webView);
        WebSettings webSettings = myWebView.getSettings();
        webSettings.setJavaScriptEnabled(true);
        // myWebView.loadUrl("http://192.168.0.2/facebook.html"); // See 1st image
        myWebView.loadUrl("file:///android_asset/facebook.html"); // See 2nd image
    } 
```

只有对远程 html 文件的调用有效，但本地无效。请参阅以下图片：

**通过远程文件**

![通过远程文件](../Images/2db468ea9a51eec62d2eaffa581c2c5a.png)

**通过本地文件**

![通过本地文件](../Images/470b9c8fcd39803e515e2d4b37c494c4.png)

以及内容`facebook.html`

```
![<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  </head>
  <body>

<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)\[0\];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "http://connect.facebook.net/en_US/all.js#xfbml=1&appId=xxx";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div class="fb-comments" data-href="http://example.com" data-width="470" data-num-posts="10"></div>

  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T07:19:53.577

您需要指定一个基本 URL。

```
myWebView.loadDataWithBaseURL("http://www.example.com", "YOUR_HTML", "text/html", null, null) 
```

要完全替换上面的行：

```
BufferedReader reader = new BufferedReader(new FileReader("file:///android_asset/facebook.html"));
String line;
String html = "";
while((line = reader.readLine()) != null) {
    html += line;
}
reader.close();
myWebView.loadDataWithBaseURL("http://www.example.com", html, "text/html", null, null) 
```

# javascript - Javascript 元素选择器

> ID：15584180
> 
> 赞同：1
> 
> 时间：2013-03-23T06:51:20.807
> 
> 标签：javascript, css-selectors

我正在创建一个 Javascript 选择器，以便它有助​​于在其他方法中操作这些元素。

我的函数是这样调用的：

```
//  Selecting three groups of elements in context 'document'
myFunc(["p", "div#id", "ul li"], document); 
```

到目前为止，我的函数填充了一个表示要选择的元素的数组：

```
//  Representation corresponding to the selection above
matches[0] = [["p"]]
matches[1] = [["div", "#id"]]
matches[2] = [["ul"], ["li"]] 
```

尽管我尝试过，但除了最简单的，我无法获得这些元素中的任何一个：`"p"`.

任何提示或帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T07:21:18.263

DOM 搜索匹配 CSS 选择器的项目是一个已解决的问题。我认为没有理由重新发明那个轮子并处理所有不同的浏览器和性能优化。对于现代浏览器，只需使用`document.querySelectorAll()`并传递一个合法的 CSS 选择器。

为了与旧浏览器（如 IE7）兼容，您可以选择一个现成且经过测试的选择器库。如果您将进行大量 DOM 操作，那么您可能需要像 jQuery 这样的内置跨浏览器选择器引擎并支持许多其他 DOM 操作的东西。在 jQuery 中，您的选择器将是这样的：

```
// returns jQuery object that has array of DOM objects in it
var objects = $("p, div#id, ul li"); 
```

或者，如果您只想要一个经过验证的选择器库，您可以选择 Sizzle（这是 jQuery 内部使用的引擎）。在 Sizzle 中，它将是：

```
// returns array of DOM elements
var objects = Sizzle("p, div#id, ul li"); 
```

如果你真的想让你自己的选择器匹配代码，你将不得不编写代码来解析你的选择，然后编写代码来遍历整个 DOM，然后创建代码来匹配每种类型的选择器和给定的对象DOM。当免费、经过测试和性能优化的库已经可供您使用时，我看不出为什么要重新发明所有代码。你可以在几分钟内完成。

或者，如果您不需要 IE 7 支持，您可以使用`document.querySelectorAll()`. 如果您确实需要 IE 7 支持，可以在 IE7 中提供一些可用`document.querySelectorAll()`的 polyfill，但此时，您可能只想使用更好的预构建选择器库之一来解决这个问题，这些库也更优化了性能。

```
// returns a NodeList (an array-like list of nodes)
var objects = document.querySelectorAll("p, div#id, ul li"); 
```

如果您真的想构建自己的选择器库，请解释为什么以及您需要支持哪些选择器，以便我们更好地建议如何进行。

# android - 如何从 ShoutCast 7.html 获取内容类型

> ID：15584183
> 
> 赞同：6
> 
> 时间：2013-03-23T06:51:46.713
> 
> 标签：android, streaming, media-player, audio-streaming, shoutcast

这里我正在开发无线电，无线电链接可以是 aacp、aac 或 mpeg 格式。我正在使用`MultiPlayer`jar 播放 aacp 格式并使用 Default`MediaPlayer`播放 mpeg 格式，我知道`MultiPlayer`可以播放这两种格式，但我根据客户要求使用了不同的 jar，有没有办法知道流 url 是`ShoutCast`7中的 aacp、aac 或 mpeg .html 页面？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T06:54:04.850

不，`7.html`不包含流内容类型。

```
<HTML><meta http-equiv="Pragma" content="no-cache"></head><body>9,1,47,50,9,56,</body></html> 
```

**您应该做的是对流发出请求，并在响应标头完成后断开连接。** （在您`\r\n\r\n`从服务器中看到之后。）从这些标头中提取内容类型。这将保证您拥有正确的内容类型，并确保您与各种 HTTP 和类似 HTTP 的流服务器兼容，包括 Icecast。

我不知道您为什么要这样做，但唯一可用的其他来源是管理页面。您可以在没有凭据的情况下访问它，但您可以解析 HTML。同样，这仅与 SHOUTcast 服务器兼容。你不应该这样做。

```
<tr><td width=100 nowrap><font class=default>Content Type: </font></td><td><font class=default><b>audio/mpeg</b></td></tr> 
```

# image - 如何使插件在wordpress中的每个模板中工作

> ID：15584184
> 
> 赞同：0
> 
> 时间：2013-03-23T06:51:49.800
> 
> 标签：image, wordpress, templates, plugins

我是插件开发的新手。我想获取特定页面/帖子的所有图像，并希望将它们显示为页面下方的幻灯片。目前我能够收集媒体库中的所有图像并显示它......但我如果该特定页面想要图像..我已经了解到要获取特定模板的图像，您需要在该特定帖子模板中添加代码行..但是如何使用插件来完成

```
$query_images_args = array(
        'post_type' => 'attachment', 'post_mime_type' =>'image', 'post_status' => 'inherit', 'posts_per_page' => -1,
    );

    $query_images = new WP_Query( $query_images_args );
    $images = array();
    foreach ( $query_images->posts as $image) {
        $images[]= wp_get_attachment_url( $image->ID );
    }
foreach($images as $item){

   /// any function not yet decided
}
echo($item); 
```

我在 $item 中获取图像 url .. 我想更改图像属性并将原始图像替换为原始位置的经过处理的图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T09:53:01.540

通过使用[投资组合幻灯片](http://wordpress.org/extend/plugins/portfolio-slideshow/)......一个（但这个得到了很高的评价，它很受尊重）

# python - 可能的多处理/多线程等价物？

> ID：15584193
> 
> 赞同：0
> 
> 时间：2013-03-23T06:53:05.397
> 
> 标签：python, multithreading, set, multiprocessing, bigdata

我创建了一个形式的字典

```
a={'t1':[{seta1},{seta2},{seta3},{seta4}],
   't2':[{setb1},{setb2},{setb3},{setb4}],
    .
    .
    .
   't100':[{someset1,someset2,someset3,someset4}]} 
```

在哪里

```
't1','t2','t3',...,'t100'=>timestamps
{seta1},{seta2},{seta3},{seta4}...=>clusters at those respective timestamps 
```

和

```
 b={} #my resulting dictionary 
```

现在我需要在不同的时间戳找到集合的交集，如果有交集，我需要将它们包含在 b 中。
最初，b 是空的，所以整个 a['t1'] 使用键 't1' 进入 b。IE，

```
if len(b)==0:
  b['t1']=a['t1'] 
```

现在我从 a 中的第二个键 't2' 开始，像这样找到 b['t1'] 和 a['t2'] 之间的交集

```
k=[i&j for i in a[key1] for j in b[key2]] 
```

如果 a 和 b 的集合之间存在长度大于或等于 2 的公共交集，那么我创建一个键 't1,t2' 并以这种方式将交集附加到 b

```
if key2+','+key1 not in b.keys(): #t1,t2 not in b.keys()
    b[key2+','+key1]=[]
b[key2+','+key1].append(k) 
```

如果 b[key2] (ie,.b['t1']) 和 a[key1] (ie,.a['t2']) 之间没有交集，那么我需要在 b 中创建 key 't2' 并追加a['t2'] 的非相交集到 b['t2']

所以关键是，在迭代结束时，a['t2'] 和 b['t1'] 中每个集合的迭代部分会让我在 b 中拥有键。't1'，'t2'，'t1，t2'

在下一次迭代中，我将考虑 't3' 并找到所有具有键 't1' 、 't2' 、 't1,t2' 的集合的交集。这可能会导致键 't1' , 't2' ,'t1,t2' ,'t1,t3' ,'t1,t2,t3' ,'t2,t3' ,'t3' 。

我正在迭代地做交叉点。IE

```
for key1 in a.keys():
  if len(b)==0:
     b[key1]=a[key1]
  else:
    for key2 in b.keys():
      k=[i&j for i in a[key1] for j in b[key2]]
       #no intersections? if so, create key1 in b and append the corresponding set of a[key1]
       #if intersection of length>1 found, create key2,key1 in     b     and append the intersecting set. also pop the set from dictionary a if it is a total intersection: which means the complete set in a[key1] is intersecting. 
```

这样做，我正在迭代地寻找交叉点。有没有可能我可以在 python 中使用多处理工具并行执行交叉点？即， t3&t1, t3&t2, t3&(t1,t2) 并行完成，而不是通过为每个交叉点建立一个过程来进行迭代？我不知道多线程/多处理是如何工作的，但到目前为止，我已经了解多线程不会提高性能，但我希望程序加快其执行速度。但是创建过程不是密集型的吗？

请帮忙！

# html - 视觉错觉/不明“漂浮”物体

> ID：15584194
> 
> 赞同：0
> 
> 时间：2013-03-23T06:53:07.783
> 
> 标签：html, css, wordpress

幻灯片的左上角似乎有一个“下划线”（Yootheme/Widgetkit 插件），但源代码中没有。然而它随着每一帧进出！

[http://www.la-belle-equipe.org/](http://www.la-belle-equipe.org/)

你能看见它吗 ？有人知道它是什么吗？几天（几周！）我一直在彻底检查每个元素，但找不到任何相关的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T07:02:59.540

这是你的罪魁祸首：

```
.wp-caption .wp-caption-text:before {
color: #666;
content: '—2014'; <- this line inserts the dash before each caption.
font-size: 14px;
font-style: normal;
font-weight: bold;
margin-right: 5px;
position: absolute;
left: 10px;
top: 7px;
} 
```

`.wp-caption .wp-caption-text:before { content: '' }`您必须从 css 中删除该行或在该规则之后使用 include 覆盖它

# android - Android License App 显示未授权？

> ID：15584197
> 
> 赞同：4
> 
> 时间：2013-03-23T06:53:16.277
> 
> 标签：android, google-play, android-lvl

我正在为付费应用程序制作应用程序 android 许可证。在这个应用程序中，我根据我的应用程序详细信息提供了 base 64 公钥和 salt 20 个随机数。我的代码如下：

初始化变量如下：

```
 private static final String BASE64_PUBLIC_KEY = "xxxxxx";
  private static final byte[] SALT = new byte[] {xxxxxxxxxxxxxxxx};
  private LicenseChecker mChecker;
  private LicenseCheckerCallback mLicenseCheckerCallback; 
```

在 oncreate() 中这样做：

```
 String deviceId = Secure.getString(getContentResolver(),Secure.ANDROID_ID);
   mLicenseCheckerCallback = new MyLicenseCheckerCallback();
   mChecker = new LicenseChecker(this, (Policy) new ServerManagedPolicy(this,
                   new AESObfuscator(SALT, getPackageName(), deviceId)),
                   BASE64_PUBLIC_KEY);
   mChecker.checkAccess(mLicenseCheckerCallback); 
```

和我的许可证检查器回调函数是这样的：

```
 private class MyLicenseCheckerCallback implements LicenseCheckerCallback {
           @Override
           public void allow(int result) {
                   if (isFinishing()) {
                           return;
                   }
           }

           @Override
           public void applicationError(int errorCode) {
                   if (isFinishing()) {
                           return;
                   }
           }
           @SuppressWarnings("deprecation")
           @Override
           public void dontAllow(int result) {
                   if (isFinishing()) {
                           return;
                   }
                   showDialog(0);
           }
    } 
```

从这里我导出了apk文件并作为草稿存储在google play中，并使用google play中提供的测试帐户作为测试帐户和我的设备中使用的相同帐户进行了测试。我多次测试这个应用程序，每次它只显示未许可的对话。问题是什么？请帮助我..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T09:10:40.650

由于您的公钥导致此错误，在 google play 中，`Base64-encoded RSA public key`对于从您的 google 帐户发布的每个新应用程序都会产生不同的结果。`apk`在为您的应用程序创建之前检查该密钥。

# android - 适用于 Android 的原生 opencv

> ID：15584200
> 
> 赞同：3
> 
> 时间：2013-03-23T06:53:55.780
> 
> 标签：android, opencv, android-ndk

我试图在我的android项目中集成opencv库，所以我点击了这个链接： [Building native Opencv for Android with Eclipse give "undefined reference to `cvCreateFileCapture'"](https://stackoverflow.com/questions/13353647/building-native-opencv-for-android-with-eclipse-gives-undefined-reference-to-c?answertab=oldest#tab-top) 但现在我仍然有这些错误：

> jni/DetectionBasedTracker.cpp:5:23: 错误: opencv/cv.h: 没有这样的文件或目录 jni/DetectionBasedTracker.cpp:6:28: 错误: opencv/highgui.h: 没有这样的文件或目录

我应该改变`application.mk`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T06:46:21.970

您是否在项目中引用 OpenCV Library-2.4.4，在**Project Properties > Android > Library**中？

您是否包含`<path_to_OpenCV4Android_sdk>/sdk/native/jni/include`在**Project Properties > C/C++ General > Paths and Symbols > GNU C++**中？

# c# - 图片来自.File()。内存不足异常

> ID：15584202
> 
> 赞同：0
> 
> 时间：2013-03-23T06:54:03.340
> 
> 标签：c#, winforms, imagelist

我正在尝试在列表中加载大约 60 张图片。每张图片大约1MB。对于 20 张图片没问题，但在上面我在下面的代码行中出现内存不足异常。我已经搜索了很多相关的问题，一些关于“使用”关键字和流的说明，但由于我是初学者，有人可以帮助我。

```
Image image = Bitmap.FromFile(Filename); 
```

这是我的代码

```
 private void LoadBtn_Click_1(object sender, EventArgs e)
    {
        OpenFileDialog newDialog = new OpenFileDialog();
        if (newDialog.ShowDialog() == DialogResult.OK)
        {
            images.Clear();

            string dirPath  = System.IO.Path.GetDirectoryName(newDialog.FileName.ToLower()); 
            DirectoryInfo di = new DirectoryInfo(dirPath);
            FileInfo[] finfos = di.GetFiles("*.*");

            foreach (FileInfo fi in finfos)
            {
                string ext = fi.Extension.ToLower();
                if ((ext.Equals(".png")) || (ext.Equals(".jpg")) || (ext.Equals(".tif")) ||                  (ext.Equals(".gif")))
                {
                    string Filename = fi.FullName;
                    Image image = Bitmap.FromFile(Filename); //exception occurs HERE
                    images.Add(image);
                    //this.imageList1.Images.Add(image);
                    //image.Dispose();
                }
            } 
        }

        pictureBox3.Image = images[0];

    } 
```

我正在使用 C#，Windows 窗体。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T08:10:57.287

在查看了您提到的软件后，正如我告诉您的那样，如果您只需要缩略图，则不需要将整个图像加载到内存中。

所以我会创建我的班级

```
class ImageAndThumb
{
    public Image Thumb;
    public Image Big;
    private string ImagePath;
    public ImageAndThumb(string fileName)
    {         
        ImagePath = fileName;
        Image image = Image.FromFile(fileName)
        Image thumb = img.GetThumbnailImage(200, 200, ()=>false, IntPtr.Zero);
    }
    public Image LoadBigImage()
    {
        Big = Image.FromFile(ImagePath);
        return Big;
    }
    public void UnloadImage()
    {
        Big = null;
    }

} 
```

现在我们使用那个类：

```
List<ImageAndThumb> Images = new List<ImageAndThumb>();
  private void LoadBtn_Click_1(object sender, EventArgs e)
    {
        OpenFileDialog newDialog = new OpenFileDialog();
        if (newDialog.ShowDialog() == DialogResult.OK)
        {
            Images.Clear();

            string dirPath  = System.IO.Path.GetDirectoryName(newDialog.FileName.ToLower()); 
            DirectoryInfo di = new DirectoryInfo(dirPath);
            FileInfo[] finfos = di.GetFiles("*.*");

            foreach (FileInfo fi in finfos)
            {
                string ext = fi.Extension.ToLower();
                if ((ext.Equals(".png")) || (ext.Equals(".jpg")) || (ext.Equals(".tif")) ||                  (ext.Equals(".gif")))
                {
                    string Filename = fi.FullName;
                    ImageAndThumb image = new ImageAndThumb(Filename); 
                    Images.Add(image);
                }
            } 
        }

        pictureBox3.Image = Images[0].Thumb; // << Much less memory usage;

    } 
```

现在，每当您需要使用图像时，首先加载它例如：

```
void ShowPicture(int index)
{
    Images[index].LoadBigImage();
    PictureBoxBig.image = Images[index].Big;
}
void ClosePicture(int index)
{
    Images[index].UnloadImage();
} 
```

一个好主意是在加载另一个图像后卸载图像：

```
int currentPictureIndex = -1;
    void ShowPicture(int index)
    {
        Images[index].LoadBigImage();
        PictureBoxBig.image = Images[index].Big;
        if(CurrentPictureIndex > -1) ClosePicture(CurrentPictureIndex);
        currentPictureIndex = index;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T08:15:27.703

首先，你的内存不足了吗？因为如果你是那么错误是有效的。

如果您没有耗尽内存，您需要做的第一件事是将代码包装在 try/catch 块中的 foreach 循环中，如下所示：

```
foreach (FileInfo fi in finfos)
{
    string ext = fi.Extension.ToLower();
    if ((ext.Equals(".png")) || (ext.Equals(".jpg")) || (ext.Equals(".tif")) || (ext.Equals(".gif")))
    {
        try 
        {
            string Filename = fi.FullName;
            Image image = Bitmap.FromFile(Filename); //exception occurs HERE
            images.Add(image);
            //this.imageList1.Images.Add(image);
            //image.Dispose();
        }
        catch {}
    }
} 
```

原因是，正如 Jason Watkins 在评论中提到的那样，它也可能是另一种形式的错误，由于类中缺少错误消息，它只是显示为内存不足异常。

# python - subprocess.Popen() 替换 os.system() 的问题

> ID：15584204
> 
> 赞同：1
> 
> 时间：2013-03-23T06:54:09.553
> 
> 标签：python, subprocess

我试图通过一个 48 核集群上的 python 脚本生成一组文件，该集群实际上有一个主机器和 3 个从机器。我需要生成一组文件，在它们上运行一些脚本，收集结果然后删除它们。我再次重复该过程-重新生成文件，执行，删除等，当我删除并重新生成具有相同名称的文件时，我看到从机抱怨它找不到文件。我正在运行python脚本`os.system()`

我从[这篇文章](https://stackoverflow.com/questions/4837127/how-can-i-delay-execution-until-after-os-system-finishes)中了解到，最好使用它`subprocess.Popen()`而不是`os.system`让它实际上等待我的脚本生成我的文件，然后再继续执行。我可以使用`os.system("pause")`or`time.sleep(whatever)`等​​待，但我想将我的 os.systems 转换为 subprocess.popens 或 subprocess.calls 我被困在这里。

我浏览了 python 文档并尝试了`subprocess.Popen('ls')`，但我无法获得像`subprocess.Popen('cd /whatever_directory')`工作这样简单的东西。

听起来可能很傻，但是我如何执行这样一个简单的命令，比如`cd`through`subprocess`而不是`os.system('cd')`？

然后，我实际上想将以下内容转换为子流程。我该怎么做？

```
import os,optparse
from optparse import OptionParser

parser.add_option("-m", "--mod",dest='module', help='Enter the entity name')
parser.add_option("-f", "--folder", dest="path",help="Enter the path")

module=options.module
path=options.path

os.system('python %s/python_repeat_deckgen_remote.py -m %s' %(path,module)) 
```

我刚刚用 subprocess.Popen 替换了 os.system。但它给了我很多抱怨：

```
File "/usr/lib64/python2.6/subprocess.py", line 633, in __init__
    errread, errwrite)
  File "/usr/lib64/python2.6/subprocess.py", line 1139, in _execute_child
    raise child_exception
OSError: [Errno 2] No such file or directory 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T06:58:42.150

> 我无法得到像`subprocess.Popen('cd /whatever_directory')`工作这样简单的事情。

每个进程的当前工作目录独立于系统中的其他进程。

当您启动子进程（使用这些机制中的任何一种）并将其`cd`放入另一个目录时，这对父进程没有影响，即对您的 Python 脚本没有影响。

要更改脚本的当前工作目录，您应该使用[`os.chdir()`](http://docs.python.org/2/library/os.html#os.chdir).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T09:47:09.093

正如 NPE 已经指出的那样，新流程不会影响现有流程（这意味着`os.system('cd /some/where')`对当前流程也没有影响）。但是，在这种情况下，我认为您会因为`os.system`调用 shell 来解释您传入的命令这一事实而绊倒，而**默认情况下**`subprocess.Popen`不会这样做。但是你可以告诉它这样做：

 **```
proc = subprocess.Popen(
    'python %s/python_repeat_deckgen_remote.py -m %s' % (path, module),
    shell = True)
status = proc.wait() 
```

如果您正在调用 shell 内置命令或使用 shell 扩展，则有必要调用 shell（假设您不愿意模拟它）：

```
>>> import subprocess
>>> x = subprocess.Popen('echo $$')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python2.7/subprocess.py", line 679, in __init__
    errread, errwrite)
  File "/usr/local/lib/python2.7/subprocess.py", line 1249, in _execute_child
    raise child_exception
OSError: [Errno 2] No such file or directory
>>> x = subprocess.Popen('echo $$', shell = True); x.wait()
81628
0
>>> 
```

但是如果您的问题允许，您可以绕过 shell（这有助于解决安全问题），方法是将命令参数分解为一个列表：

```
>>> x = subprocess.Popen(['echo', '$$']); x.wait()
$$
0
>>> 
```

请注意，这里的输出是字符串`$$`，而不是进程 ID，因为这一次 shell 没有解释字符串。

例如，对于您的原始示例，您可以使用：

```
proc = subprocess.Popen(['python',
    os.path.join(path, 'python_repeat_deckgen_remote.py'),
    '-m',
    module]) 
```

`path`如果和/或`module`包含外壳特殊的字符，这可以避免问题。

（您甚至可能想调用`subprocess.Popen`并`cwd = path`消除对 的调用`os.path.join`，尽管这取决于其他事情。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T09:33:10.293

我可能不会直接回答您的问题，但是对于需要运行子流程的此类任务，我总是使用[plumbum](http://plumbum.readthedocs.org)。

IMO，它使任务更加简单和直观，包括在远程机器上运行。

使用 plumbum，为了设置子进程的工作目录，您可以在`with local.cwd(path): my_cmd()`上下文中运行命令。**

# .net - TransformToVisual 的 System.ArgumentException 错误

> ID：15584207
> 
> 赞同：1
> 
> 时间：2013-03-23T06:54:41.260
> 
> 标签：.net, windows-phone-7, silverlight-4.0

我在页面上显示了一个弹出窗口，我试图获取它的（x，y）坐标，即使弹出窗口在屏幕上可见，我也得到了异常。

```
 private void showPopup_Click(object sender, RoutedEventArgs e)
{
      Popup p = new Popup();
      StackPanel panel1 = new StackPanel();
    // Create some content to show in the popup. Typically you would 
    // create a user control.
    Border border = new Border();
    border.BorderBrush = new SolidColorBrush(Colors.Black);
    border.BorderThickness = new Thickness(5.0);

    panel1.Height = 200;
    panel1.Width = 100;
    panel1.Background = new SolidColorBrush(Colors.LightGray);
    p.Height = 200;
    p.Width = 100;

    Button button1 = new Button();
    button1.Content = "Close";
    button1.Margin = new Thickness(5.0);
    button1.Click += new RoutedEventHandler(button1_Click);
    TextBlock textblock1 = new TextBlock();
    textblock1.Text = "The popup control";
    textblock1.Margin = new Thickness(5.0);
    panel1.Children.Add(textblock1);
    panel1.Children.Add(button1);
    border.Child = panel1;

    // Set the Child property of Popup to the border 
    // which contains a stackpanel, textblock and button.
    p.Child = border;

    // Set where the popup will show up on the screen.
    p.VerticalOffset = 100;
    p.HorizontalOffset = 200;

    // Open the popup.
    p.IsOpen = true;

} 
```

> </弹出>-->

# windows - 如何在 windows env 中自动启动我自己的应用程序？

> ID：15584208
> 
> 赞同：0
> 
> 时间：2013-03-23T06:55:04.310
> 
> 标签：windows, load

我正在开发一个应用程序，我们必须将它部署在 Windows 环境中。我希望 Windows 可以在操作系统启动时自动加载我的应用程序。

你能给我一些建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T10:38:40.143

有很多方法可以做到这一点：

1）您在以下位置创建应用程序的快捷方式：

> ```
> C:\Documents and Settings\All Users\Start Menu\Programs\Startup 
> ```

如果您想特定于某个用户，请将“所有用户”更改为您的特定用户名。

2）另一种方法是在以下位置添加注册表项：

> HKLM/软件/微软/Windows/CurrentVersion/运行

3) 在 Win.ini 中添加一个条目。从开始菜单运行 msconfig.exe 以查看各种选项。

对于不想弄乱系统的新手，通常首选第一种方法。

# android - 安卓模拟器4.0以上无法显示图片？

> ID：15584212
> 
> 赞同：2
> 
> 时间：2013-03-23T06:56:34.913
> 
> 标签：android, image, web-services

我正在尝试通过使用它来显示来自 Web 服务的一张图像。它工作正常。如果我用 2-3 版本的 android 版本测试我的项目，它工作正常。但它不支持超过 4.0 及更高版本。为什么？

如何克服这个问题？

以下是我的代码，

```
Bitmap bitmap = BitmapFactory.decodeStream((InputStream)new URL(img_url).getContent());
imgvw.setImageBitmap(bitmap); 
```

**日志猫**

```
03-23 14:59:17.696: I/System.out(386): Intent { cmp=com.example.png/.tab_cameraActivity }
03-23 14:59:17.696: I/System.out(386): LB 3
03-23 14:59:17.716: D/AndroidRuntime(386): Shutting down VM
03-23 14:59:17.716: W/dalvikvm(386): threadid=1: thread exiting with uncaught exception (group=0x40014760)
03-23 14:59:17.736: E/AndroidRuntime(386): FATAL EXCEPTION: main
03-23 14:59:17.736: E/AndroidRuntime(386): java.lang.RuntimeException: Unable to start  activity ComponentInfo{com.example.png/com.example.png.tab_cameraActivity}: android.os.NetworkOnMainThreadException
03-23 14:59:17.736: E/AndroidRuntime(386):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1736)
03-23 14:59:17.736: E/AndroidRuntime(386):  at android.app.ActivityThread.startActivityNow(ActivityThread.java:1577)
03-23 14:59:17.736: E/AndroidRuntime(386):  at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:130)
03-23 14:59:17.736: E/AndroidRuntime(386):  at  android.app.LocalActivityManager.startActivity(LocalActivityManager.java:342)
03-23 14:59:17.736: E/AndroidRuntime(386):  at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:680)
03-23 14:59:17.736: E/AndroidRuntime(386):  at android.widget.TabHost.setCurrentTab(TabHost.java:349)
03-23 14:59:17.736: E/AndroidRuntime(386):  at android.widget.TabHost$2.onTabSelectionChanged(TabHost.java:149)
03-23 14:59:17.736: E/AndroidRuntime(386):  at android.widget.TabWidget$TabClickListener.onClick(TabWidget.java:556)
03-23 14:59:17.736: E/AndroidRuntime(386):  at android.view.View.performClick(View.java:3100)
03-23 14:59:17.736: E/AndroidRuntime(386):  at android.view.View$PerformClick.run(View.java:11644)
03-23 14:59:17.736: E/AndroidRuntime(386):  at android.os.Handler.handleCallback(Handler.java:587)
03-23 14:59:17.736: E/AndroidRuntime(386):  at android.os.Handler.dispatchMessage(Handler.java:92)
03-23 14:59:17.736: E/AndroidRuntime(386):  at android.os.Looper.loop(Looper.java:126)
03-23 14:59:17.736: E/AndroidRuntime(386):  at android.app.ActivityThread.main(ActivityThread.java:3997)
03-23 14:59:17.736: E/AndroidRuntime(386):  at java.lang.reflect.Method.invokeNative(Native Method)
03-23 14:59:17.736: E/AndroidRuntime(386):  at java.lang.reflect.Method.invoke(Method.java:491)
03-23 14:59:17.736: E/AndroidRuntime(386):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
03-23 14:59:17.736: E/AndroidRuntime(386):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
03-23 14:59:17.736: E/AndroidRuntime(386):  at dalvik.system.NativeStart.main(Native Method)
03-23 14:59:17.736: E/AndroidRuntime(386): Caused by: android.os.NetworkOnMainThreadException
03-23 14:59:17.736: E/AndroidRuntime(386):  at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1077)
03-23 14:59:17.736: E/AndroidRuntime(386):  at java.net.InetAddress.lookupHostByName(InetAddress.java:481)
03-23 14:59:17.736: E/AndroidRuntime(386):  at java.net.InetAddress.getAllByNameImpl(InetAddress.java:281)
03-23 14:59:17.736: E/AndroidRuntime(386):  at java.net.InetAddress.getAllByName(InetAddress.java:249)
03-23 14:59:17.736: E/AndroidRuntime(386):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.<init>(HttpConnection.java:69)
03-23 14:59:17.736: E/AndroidRuntime(386):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.<init>(HttpConnection.java:48)
03-23 14:59:17.736: E/AndroidRuntime(386):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection$Address.connect(HttpConnection.java:304)
03-23 14:59:17.736: E/AndroidRuntime(386):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnectionPool.get(HttpConnectionPool.java:89)
03-23 14:59:17.736: E/AndroidRuntime(386):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getHttpConnection(HttpURLConnectionImpl.java:292)
03-23 14:59:17.736: E/AndroidRuntime(386):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.makeConnection(HttpURLConnectionImpl.java:274)
03-23 14:59:17.736: E/AndroidRuntime(386):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:217)
 03-23 14:59:17.736: E/AndroidRuntime(386):     at org.ksoap2.transport.ServiceConnectionSE.connect(ServiceConnectionSE.java:76)
03-23 14:59:17.736: E/AndroidRuntime(386):  at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:153)
03-23 14:59:17.736: E/AndroidRuntime(386):  at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:95)
03-23 14:59:17.736: E/AndroidRuntime(386):  at com.example.png.tab_cameraActivity.getImagesDetails(tab_cameraActivity.java:73)
03-23 14:59:17.736: E/AndroidRuntime(386):  at   com.example.png.tab_cameraActivity.onCreate(tab_cameraActivity.java:57)
03-23 14:59:17.736: E/AndroidRuntime(386):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1048)
 03-23 14:59:17.736: E/AndroidRuntime(386):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1700)
03-23 14:59:17.736: E/AndroidRuntime(386):  ... 18 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T09:45:00.400

你得到了例外。

**NetworkOnMainThreadException：**当应用程序尝试在其主线程上执行网络操作时引发的异常。

所以你必须使用**AsyncTask**。

这是 AsyncTask 的示例。

[http://android-developers.blogspot.in/2009/05/painless-threading.html](http://android-developers.blogspot.in/2009/05/painless-threading.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T07:11:44.917

您可能会在 UI 线程中执行此代码。这在 Android HoneyComb 及更高版本中是被禁止的。您应该考虑使用 AsyncTask 或 Android Service 来执行此请求。可以使用不同的选项来帮助您。作为[RoboSpice](https://github.com/octo-online/robospice)的贡献者，我相信这个库会有所帮助。

# c# - 如何在应用重启时为社交 API 重用 Auth Tokens

> ID：15584214
> 
> 赞同：0
> 
> 时间：2013-03-23T06:56:52.723
> 
> 标签：c#, .net, twitter, spring.net

在使用一些 twitter 应用程序时，例如 Tweetings Janetter 等。您验证一次并输入您的验证密码，从那时起我不必再次验证至少 3 周以上

在使用 Spring.Net Social Twitter 示例 ConsoleQuickStart 等 .net api 时，跳过该行

```
 Process.Start(authenticateUrl); 
```

并且从以前的应用程序运行时输入代码不起作用并抛出异常

而关闭其他推特应用程序（例如推文）不需要重新验证！

关于如何重用令牌和关于这种重用的良好行为的一般规则的任何帮助？

谢谢

该示例位于 [https://github.com/SpringSource/spring-net-social-twitter/blob/master/examples/Spring.ConsoleQuickStart/src/Spring.ConsoleQuickStart/Program.cs](https://github.com/SpringSource/spring-net-social-twitter/blob/master/examples/Spring.ConsoleQuickStart/src/Spring.ConsoleQuickStart/Program.cs)

更新 -

现在在将代码更改为此后获得 HTTP 401 Unauthorized -

```
if ( ! haveOAuthAndPin )
{
                    var oauthToken = twitterServiceProvider.OAuthOperations.FetchRequestTokenAsync("oob", null).Result;

                    string authenticateUrl = twitterServiceProvider.OAuthOperations.BuildAuthorizeUrl(oauthToken.Value, null);
                    Console.WriteLine("Redirect user for authentication: " + authenticateUrl);
                    Process.Start(authenticateUrl);
                    Console.WriteLine("Enter PIN Code from Twitter authorization page:");
                    pinCode = Console.ReadLine();

                    StoreAuthTokenAndPin(oAuthToken, pinCode);
}
else
{
      var oAuthToken = new oAuthToken(storedValue, storedSecret)
      pinCode = storedPinCode ;
} 
```

完整的错误堆栈是 -

```
System.AggregateException was unhandled
  HResult=-2146233088
  Message=One or more errors occurred.
  Source=mscorlib
  StackTrace:
       at System.AggregateException.Handle(Func`2 predicate)
       at Spring.ConsoleQuickStart.Program.Main(String[] args) in C:\downloads\_source-code\Spring.net\Spring.Social.Twitter-2.0.0-M1\examples\Spring.ConsoleQuickStart\src\Spring.ConsoleQuickStart\Program.cs:line 168
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: System.AggregateException
       HResult=-2146233088
       Message=One or more errors occurred.
       Source=mscorlib
       StackTrace:
            at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
            at Spring.Social.OAuth1.OAuth1Template.<ExchangeForAccessTokenAsync>b__1(Task`1 task) in f:\bamboo-home\xml-data\build-dir\SPRNETSOCIAL-RELEASE-JOB1\src\Spring.Social.Core\Social\OAuth1\OAuth1Template.cs:line 233
            at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
            at System.Threading.Tasks.Task.Execute()
       InnerException: Spring.Rest.Client.HttpClientErrorException
            HResult=-2146233088
            Message=POST request for 'https://api.twitter.com/oauth/access_token' resulted in 401 - Unauthorized (Unauthorized).
            Source=Spring.Rest
            StackTrace:
                 at Spring.Rest.Client.Support.DefaultResponseErrorHandler.HandleError(Uri requestUri, HttpMethod requestMethod, HttpResponseMessage`1 response) in f:\bamboo-home\xml-data\build-dir\SPRNETREST-RELEASE-JOB1\src\Spring.Rest\Rest\Client\Support\DefaultResponseErrorHandler.cs:line 121
                 at Spring.Rest.Client.Support.DefaultResponseErrorHandler.HandleError(Uri requestUri, HttpMethod requestMethod, IClientHttpResponse response) in f:\bamboo-home\xml-data\build-dir\SPRNETREST-RELEASE-JOB1\src\Spring.Rest\Rest\Client\Support\DefaultResponseErrorHandler.cs:line 86
                 at Spring.Rest.Client.RestTemplate.HandleResponseError(Uri uri, HttpMethod method, IClientHttpResponse response, IResponseErrorHandler errorHandler) in f:\bamboo-home\xml-data\build-dir\SPRNETREST-RELEASE-JOB1\src\Spring.Rest\Rest\Client\RestTemplate.cs:line 2959
                 at Spring.Rest.Client.RestTemplate.ResponseReceivedCallback[T](ClientHttpRequestCompletedEventArgs responseReceived) in f:\bamboo-home\xml-data\build-dir\SPRNETREST-RELEASE-JOB1\src\Spring.Rest\Rest\Client\RestTemplate.cs:line 2777
            InnerException: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:22:21.080

Twitter 不会过期 ACCESS 令牌：[https ://dev.twitter.com/docs/auth/oauth/faq](https://dev.twitter.com/docs/auth/oauth/faq)

了解 OAuth 的工作原理以确保您不会犯一个简单的错误，这一点很重要。您的应用程序使用其应用程序 ID 从 twitter 请求“Request_Token”，然后将其提供给身份验证页面。然后用户登录以授予对与 Request_Token 关联的此应用程序的访问权限，如果用户成功登录，您的回调位置将收到 OAuth_Access_Token 和 OAuth_Access_Token_Secret（以及其他一些东西）。

您是否尝试重用 OAuth_Access_Tokens 而不仅仅是 Request_Token？您是否更改了应用程序的 ID？您是否保留了两个 OAuth_Access_Tokens？

编辑：

刚刚看了示例代码。

```
AuthorizedRequestToken requestToken = new AuthorizedRequestToken(oauthToken, pinCode); 
```

如果您跳过您提到的行，您的 oauthToken 将不正确。

oauthToken 和 pinCode 是相关的。最初，您使用一个 oauthToken 来获取 pinCode。当您第二次从 Twitter 获得新的 oauthToken 时，它与您尝试使用的 pinCode 无关。

解决方案是也存储 oauthToken 并在第二次运行程序时将其与 pinCode 一起重新使用。

# preg-match-all - 最后两个点之间的条带

> ID：15584217
> 
> 赞同：0
> 
> 时间：2013-03-23T06:57:23.110
> 
> 标签：preg-match-all

我有一个网站，我想在最后两个点内编写 uniqueid 脚本。我有一些工作正常，但不是 100%。有机会请帮帮我，谢谢！

获取 file_contents 时，您会看到如下内容：

```
http://www.alkdjfsadf.com/masdfsdfv/i-want-to-grab-the-following.z3jTdIcaSlGR.html 
```

我只想要其中包含“masdfsdfv”的链接来获取ID ...

我想抓住：z3jTdIcaSlGR 变成一个变量。

这是我的做法：

```
$dp = "http://www.alkdjfsadf.com/masdfsdfv/grab-moi.html?page=1";
$sp = @file_get_contents($dp);

preg_match_all("(./(.*?).html/)", $sp, $content); 

foreach($content[0] as $surl) {
echo $nctid
} 
```

非常感谢我能得到的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T08:16:18.007

这是否符合您的要求：

```
preg_match_all('(/masdfsdfv/.*\\.(.*?)\\.html)', $sp, $content);
foreach ($content[1] as $surl) {
    echo $surl, "\n";
} 
```

`/`您在 URL 的末尾有一个额外的内容，而忘记转义文字`.`. 捕获组的匹配列表在 中`$content[1]`，而不是`$content[0]`。而你在呼应`$nctid`而不是`$surl`.

# mysql - 如何在mysql中的同一张表的两个查询中获取不常见的数据？

> ID：15584218
> 
> 赞同：1
> 
> 时间：2013-03-23T06:57:24.217
> 
> 标签：mysql

我有三个mysql表如下

## msg_table

```
msg_id  | msg_to | msg_from |msg

1 | 55 | 54 | hello

2 |55 |45 |Nice

3 |16 |55 |world

4 |54 |55 |Nice job 
```

我需要得到的是

获取**msg_from** ids，即**msg_to='55'**和**msg_to** ids，即**msg_from='55'**并将它们连接在一起并从中获取不同的值。

因此，对于应该返回的示例

54,45,16

这可能吗？还是我必须遵循任何其他规则才能做到这一点。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T07:01:07.200

使用`UNION`（隐式不同）：

```
SELECT msg_from AS id FROM msg_table WHERE msg_to   = 55
UNION 
SELECT msg_to         FROM msg_table WHERE msg_from = 55; 
```

[**SQL 小提琴演示**](http://sqlfiddle.com/#!2/163837/1)

这会给你：

```
| ID |
------
| 54 |
| 45 |
| 16 | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T07:01:12.473

您可以简单地使用`UNION`来组合仅给出 unique 的查询的结果`ID`。

```
SELECT  msg_to to_from FROM msg_Table WHERE msg_from = 55
UNION
SELECT  msg_from to_from FROM msg_Table WHERE msg_to = 55 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/163837/3)

输出

```
╔═════════╗
║ TO_FROM ║
╠═════════╣
║      16 ║
║      54 ║
║      45 ║
╚═════════╝ 
```

# r - 格拉姆施密特与 R

> ID：15584221
> 
> 赞同：8
> 
> 时间：2013-03-23T06:57:46.393
> 
> 标签：r, matlab

这是第 1 页中用于执行 Gram Schmidt 的 MATLAB 代码 [http://web.mit.edu/18.06/www/Essays/gramschmidtmat.pdf](http://web.mit.edu/18.06/www/Essays/gramschmidtmat.pdf)

因为我没有 MATLAB，所以我正在尝试用 R 执行此操作数小时这是我的 R

```
f=function(x){
m=nrow(x);
n=ncol(x);
Q=matrix(0,m,n);
R=matrix(0,n,n);

for(j in 1:n){
v=x[,j,drop=FALSE];

for(i in 1:j-1){
R[i,j]=t(Q[,i,drop=FALSE])%*%x[,j,drop=FALSE];
v=v-R[i,j]%*%Q[,i,drop=FALSE]
}

R[j,j]=max(svd(v)$d);
Q[,j,,drop=FALSE]=v/R[j,j]}

return(list(Q,R))} 
```

它一直说有以下任何一个错误：

```
v=v-R[i,j]%*%Q[,i,drop=FALSE] 
```

或者

```
R[j,j]=max(svd(v)$d); 
```

我在将 MATLAB 代码转换为 R 时做错了什么？？？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-23T16:51:50.307

只是为了好玩，我添加了此代码的犰狳版本并对其进行基准测试

犰狳代码：

```
#include <RcppArmadillo.h>
// [[Rcpp::depends(RcppArmadillo)]]

using namespace Rcpp;

//[[Rcpp::export]]
List grahm_schimdtCpp(arma::mat A) {
    int n = A.n_cols;
    int m = A.n_rows;
    arma::mat Q(m, n);
    Q.fill(0);
    arma::mat R(n, n);
    R.fill(0);  
    for (int j = 0; j < n; j++) {
    arma::vec v = A.col(j);
    if (j > 0) {
        for(int i = 0; i < j; i++) {
        R(i, j) = arma::as_scalar(Q.col(i).t() *  A.col(j));
        v = v - R(i, j) * Q.col(i);
        }
    }
    R(j, j) = arma::norm(v, 2);
    Q.col(j) = v / R(j, j);
    }
    return List::create(_["Q"] = Q,
                     _["R"] = R
    );
    } 
```

R代码未优化（直接基于算法）

```
grahm_schimdtR <- function(A) {
    m <- nrow(A)
    n <- ncol(A)
    Q <- matrix(0, nrow = m, ncol = n)
    R <- matrix(0, nrow = n, ncol = n)
    for (j in 1:n) {
    v <- A[ , j, drop = FALSE]
        if (j > 1) {
    for(i in 1:(j-1)) {
            R[i, j] <- t(Q[,i,drop = FALSE]) %*% A[ , j, drop = FALSE]
            v <- v - R[i, j] * Q[ ,i]
    }
    }
    R[j, j] = norm(v, type = "2")
    Q[ ,j] = v / R[j, j]
    }

    list("Q" = Q, "R" = R)

} 
```

R中的本机QR分解

```
qrNative <- function(A) {
    qrdec <- qr(A)
    list(Q = qr.R(qrdec), R = qr.Q(qrdec))
} 
```

我们将使用与原始文档中相同的矩阵对其进行测试（上面帖子中的链接）

```
A <- matrix(c(4, 3, -2, 1), ncol = 2)

all.equal(grahm_schimdtR(A)$Q %*% grahm_schimdtR(A)$R, A)
## [1] TRUE

all.equal(grahm_schimdtCpp(A)$Q %*% grahm_schimdtCpp(A)$R, A)
## [1] TRUE

all.equal(qrNative(A)$Q %*% qrNative(A)$R, A)
## [1] TRUE 
```

现在让我们对其进行基准测试

```
require(rbenchmark)
set.seed(123)
A <- matrix(rnorm(10000), 100, 100)
benchmark(qrNative(A),
          grahm_schimdtR(A),
          grahm_schimdtCpp(A),
          order = "elapsed")
##                  test replications elapsed relative user.self
## 3 grahm_schimdtCpp(A)          100   0.272    1.000     0.272
## 1         qrNative(A)          100   1.013    3.724     1.144
## 2   grahm_schimdtR(A)          100  84.279  309.849    95.042
##   sys.self user.child sys.child
## 3    0.000          0         0
## 1    0.872          0         0
## 2   72.577          0         0 
```

我真的很喜欢将代码移植到 Rcpp 中是多么容易......

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-23T08:43:53.023

如果您将 Matlab 中的代码翻译成 R，那么代码语义（代码逻辑）应该保持不变。例如，在您的代码中，您`t(Q[,i,drop=FALSE])`按照给定的 Matlab 代码转置 Q 。但`Q[,i,drop=FALSE]`不返回列向量中的列。因此，我们可以使用以下语句将其设为列向量：

```
matrix(Q[,i],n,1); # n is the number of rows. 
```

`R[j,j]=max(svd(v)$d)`if`v`是一个向量（行或列）没有错误。

是的，有一个错误

```
v=v-R[i,j]%*%Q[,i,drop=FALSE] 
```

因为您使用的是矩阵乘法。相反，您应该使用正常的乘法：

```
v=v-R[i,j] * Q[,i,drop=FALSE] 
```

这`R[i,j]`是一个数字，而`Q[,i,drop=FALSE]`是一个向量。因此，尺寸不匹配出现在这里。

还有一件事，如果`j`是 3 ，则`1:j-1`返回 [0,1,2]。因此，它应该更改为`1:(j-1)`，它返回 [1,2] 的相同值`j`。但是有一个问题！如果`j`为 2，则`1:(j-1)`返回 [1,0]。因此，对于向量或矩阵，第 0 个索引是未定义的。`0`因此，我们可以通过放置条件表达式来绕过值。

这是 Gram Schmidt 算法的工作代码：

```
A = matrix(c(4,3,-2,1),2,2)
m = nrow(A)
n = ncol(A)
Q = matrix(0,m,n)
R = matrix(0,n,n)

for(j in 1:n)
{
    v = matrix(A[,j],n,1)
    for(i in 1:(j-1))
    {
        if(i!=0)
        {
            R[i,j] = t(matrix(Q[,i],n,1))%*%matrix(A[,j],n,1)
            v = v - (R[i,j] * matrix(Q[,i],n,1))
        }
    }
    R[j,j] = svd(v)$d 
    Q[,j] = v/R[j,j]
} 
```

如果您需要将代码包装到一个函数中，您可以根据自己的方便进行操作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-23T09:04:23.020

这里的版本与您的非常相似，但没有使用额外的变量 v。我直接使用 Q 矩阵。所以不需要使用`drop`. 当然，既然你`j-1`在索引中，你需要添加条件`j>1`。

```
f=function(x){
  m <- nrow(x)
  n <- ncol(x)
  Q <- matrix(0, m, n)
  R <- matrix(0, n, n)
  for (j in 1:n) {
    Q[, j] <- x[, j]
    if (j > 1) {
      for (i in 1:(j - 1)) {
        R[i, j] <- t(Q[, i]) %*% Q[, j]
        Q[, j] <- Q[, j] - R[i, j] * Q[, i]
      }
    }
    R[j, j] <- max(svd(Q[, j])$d)
    Q[, j] <- Q[, j]/R[j, j]
  }
  return(list(Q = Q, R = R))
} 
```

**编辑**添加一些基准测试：

为了得到一些真实的案例，我使用`Hilbert`了包中的矩阵`Matrix`。

```
library(microbenchmark)
library(Matrix)
A <- as.matrix(Hilbert(100))
microbenchmark(grahm_schimdtR(A),
               grahm_schimdtCpp(A),times = 100L)

Unit: milliseconds
expr       min         lq     median        uq        max neval
grahm_schimdtR(A) 330.77424 335.648063 337.443273 343.72888 601.793201   100
grahm_schimdtCpp(A)   1.45445   1.510768   1.615255   1.66816   2.062018   100 
```

正如预期的那样， **CPP**解决方案确实更快。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-24T10:25:37.277

您可以简单地使用 Hans W. Borchers 的[pracma 包](http://cran.r-project.org/web/packages/pracma/index.html)，它提供了许多用 R 语言翻译的 Octave/Matlab 函数。

```
> library(pracma)
> gramSchmidt
function (A, tol = .Machine$double.eps^0.5) 
{
    stopifnot(is.numeric(A), is.matrix(A))
    m <- nrow(A)
    n <- ncol(A)
    if (m < n) 
        stop("No. of rows of 'A' must be greater or equal no. of colums.")
    Q <- matrix(0, m, n)
    R <- matrix(0, n, n)
    for (k in 1:n) {
        Q[, k] <- A[, k]
        if (k > 1) {
            for (i in 1:(k - 1)) {
                R[i, k] <- t(Q[, i]) %*% Q[, k]
                Q[, k] <- Q[, k] - R[i, k] * Q[, i]
            }
        }
        R[k, k] <- Norm(Q[, k])
        if (abs(R[k, k]) <= tol) 
            stop("Matrix 'A' does not have full rank.")
        Q[, k] <- Q[, k]/R[k, k]
    }
    return(list(Q = Q, R = R))
}
<environment: namespace:pracma> 
```

# php - charset utf-8 无法导出为 excel seet

> ID：15584227
> 
> 赞同：1
> 
> 时间：2013-03-23T06:58:11.847
> 
> 标签：php, utf-8

我正在尝试在 php 中导出 excel 表。一切都很好，但德语字符不起作用

我的标题是这样的：

```
header("Pragma: public");
header("Expires: 0");
header("Content-Type:application/vnd.ms-excel; charset=utf-8");
header("Content-type:application/x-msexcel; charset=utf-8");
header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
header("Content-Type: application/force-download");
header("Content-Type: application/octet-stream");
header("Content-Type: application/download");
header("Content-Disposition: attachment;filename=report.xls");
header("Content-Transfer-Encoding: binary "); 
```

在 html 实时页面中，它显示德语字符 n utf8，`ßäöü`但是当我导出为 excel 然后在 excel 表中它就像`ÃŸÃ¤Ã¶Ã¼`为什么？

# c# - 使用 c# 在 asp.net 中创建动态拖动面板

> ID：15584229
> 
> 赞同：1
> 
> 时间：2013-03-23T06:58:12.777
> 
> 标签：c#, asp.net, ajax

我想动态创建ajax dragpanel并动态添加控件和面板。我使用下面的代码动态创建控件。但是我不能拖动它。

```
enter code here

protected void Page_PreInit(object sender, EventArgs e)
{
    DragPanelExtender drg = new DragPanelExtender();
    drg.ID = "drg_1";
    drg.DragHandleID = "pnl_1";
    drg.TargetControlID = "pnl_2";
    Panel p1 = new Panel();
    p1.ID = "pnl_1";
    Panel p2 = new Panel();
    p2.ID = "pnl_2";
    Label l1 = new Label();
    l1.Text = "First";
    TextBox t = new TextBox();
    t.Text = "Enter text";
    p2.Controls.Add(l1);
    p2.Controls.Add(t);
    p1.Controls.Add(p2);
    Page.Controls.Add(p1);
} 
```

如何在面板内创建拖动控件

# objective-c - 获取未来时间作为 NSDate

> ID：15584238
> 
> 赞同：0
> 
> 时间：2013-03-23T06:59:09.697
> 
> 标签：objective-c, datetime, nscalendar

我有一个日期选择器。从中选择时间后，我想获得下一个 30 分钟和 1 小时的日期和时间。

我将如何编写一个方法来获取日期和时间，并在该日期时间后的接下来的 30 分钟和 1 小时内以两个 NSDate 的形式返回。

示例：我从日期选择器中选择了下午 1:30 的时间，然后我想获取下一个 30 分钟时间和 1 小时时间并设置时间。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T07:08:11.843

```
 NSCalendar *calendar = [NSCalendar currentCalendar];
    NSDateComponents *components = [NSDateComponents new];
    components.minute = 30;
    components.hour = 1;
    NSDate *date = [calendar dateByAddingComponents:components toDate:< your date > options:0]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T07:02:50.997

您可以只使用[NSDate](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDate_Class/Reference/Reference.html)的 dateByAddingTimeInterval 方法。

例子 ：

```
NSDate *NextDateOneHour = [oldDate dateByAddingTimeInterval:3600];    //3600 second equivalent to 60 mins
NSDate *NextDateHalfAnHour = [oldDate dateByAddingTimeInterval:1800]; //1800 second equivalent to 30 mins 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T07:07:38.613

```
NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *comps = [[NSDateComponents alloc] init];
[comps setHour:1];

NSDate *afterHour = [gregorian dateByAddingComponents:comps toDate:[NSDate date]  options:0];

[comps setMinute:30];

NSDate *afterHalfHour = [gregorian dateByAddingComponents:comps toDate:[NSDate date]  options:0]; 
```

# python - pythonanywhere 404错误

> ID：15584241
> 
> 赞同：5
> 
> 时间：2013-03-23T06:59:57.513
> 
> 标签：python, http-status-code-404, flask, pythonanywhere

我正在使用[Flask Mega 教程](http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-i-hello-world)在 pythonanywhere 中构建一个应用程序，当我在我的电脑上运行时它运行良好。当我将它上传到 PA 时，它会收到 404 错误。

我的结构

```
/microblog
    /flask (virtualenv setup)
    /app
        __init__.py
        views.py 
```

我的 wsgi 文件

```
import sys
project_home = u'/home/thefritobandit/microblog/app'
if project_home not in sys.path:
    sys.path = [project_home] + sys.path
from __init__ import app as application 
```

我的**初始化**.py 文件

```
from flask import Flask
app = Flask(__name__)
from app import views 
```

我的views.py文件

```
from app import app
@app.route('/')
@app.route('/index')
def index():
    return "Hello World!" 
```

我敢肯定这是愚蠢的，但任何帮助将不胜感激！谢谢！

--edit-- 忘记复制初始化文件底部的导入

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T07:04:09.740

更改
`project_home = u'/home/thefritobandit/microblog/app`
为
`project_home = u'/home/thefritobandit/microblog`

并在您的 wsgi 文件中更改
`from __init__ import app as application`
为
`from app import app as application`.

# jquery - $.ajax 和 $.post 之间的区别

> ID：15584250
> 
> 赞同：-3
> 
> 时间：2013-03-23T07:02:48.477
> 
> 标签：jquery, ajax

```
$.post( url, data, callback, type ); 
$.ajax () 
```

我能知道 $.post 和 $.ajax 之间的区别吗？哪个更可取，我们可以将多少个参数传递给 $.ajax。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T07:06:13.013

它们非常相似（除了默认`$.ajax`使用 type=get，您必须将其更改为 type=post）。您可以使用 对内容进行更多控制`$.ajax`，但`$.post`更简单一些。将`$.post`其视为进行 AJAX POST 的一种简写方式。

有关更多信息，`$.ajax`请参阅：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

更多信息`$.post`请参见：[http ://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

# machine-learning - 将因变量估计为自变量函数的总和

> ID：15584255
> 
> 赞同：0
> 
> 时间：2013-03-23T07:03:32.483
> 
> 标签：machine-learning, classification, linear-regression, svm

我有 5 列的训练数据，其中 c1 是因变量，列 c2、c3、c4、c5 是自变量。

我想以最小化残差的方式将 c1 估计为 ci（其中 i = 2、3、4、5）的函数之和。

```
c1 ~ ( a2 F2(c2) + a3 F3(c3) + a4 F4(c4) + a5 F5(c5) ) 
```

我编写了一个 Python 脚本来读取列 c2、c3、c4、c5 进行训练。现在，如果我用 c2、c3、c4、c5 输入一个新行，那么我的脚本可以为该行生成 c1。

但实际上，我应该通过这个语句“以最小化残余误差的方式将 c1 估计为 ci（其中 i = 2、3、4、5）的函数之和”来做什么？我对机器学习一无所知，如果有人能阐明估计 c1 的含义，我将不胜感激。

谢谢你。

# javascript - 相当于 jquery 1.10 中的 $.curCSS 方法

> ID：15584259
> 
> 赞同：2
> 
> 时间：2013-03-23T07:03:50.347
> 
> 标签：javascript, jquery

我正在使用一个使用 $.curCSS 方法的库 mcdropdown ( [http://www.givainc.com/labs/ )。](http://www.givainc.com/labs/)我正在使用不再支持 $.curCSS 方法的最新 jquery 库。根据文档， $().css 在最新的 jquery 中是等价的。所以我将其替换如下：

为了

```
marginTop: parseInt($.curCSS($el[0], "marginTop", true), 10) || 0 
```

到

```
marginTop: parseInt($($el[0]).css("marginTop", true), 10) || 0 
```

尽管控制台日志中没有错误，但此转换对我不起作用。使用 $().css 方法对上述代码的正确转换是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T07:06:46.563

当您将第二个参数传递给`.css()`它时，它会尝试应用该值。如果您只是想推断该值，则应使用：

```
parseInt($(el[0]).css('marginTop'), 10) 
```

# ios - 如何在 UIWebView 中下载多层次的网页？

> ID：15584264
> 
> 赞同：1
> 
> 时间：2013-03-23T07:04:21.320
> 
> 标签：ios, objective-c, uiwebview, asihttprequest, offline-caching

我使用 ASIWebPageRequest 将网页保存到本地磁盘，但它只能下载当前正在查看的页面。有没有办法下载网站的多个级别，例如下载第一页和它链接的所有第二甚至第三级页面。非常感谢！

# javascript - jQuery 如何按列的值选择表行组？

> ID：15584265
> 
> 赞同：2
> 
> 时间：2013-03-23T07:04:23.597
> 
> 标签：javascript, jquery, gridview, jquery-selectors, onclick

我有一个关于 jQuery 选择器的问题，我有一个如下的表格结构（**HTML 部分**），并且表格列中有一个链接，用于单击并使用 jQuery 移动表格行“向上”和“向下”（**jQuery 部分**，来自[这篇文章的](https://stackoverflow.com/questions/1569889/jquery-move-table-row/1569919#comment22056889_1569919)参考）。

**jQuery部分：**

```
 $(".up,.down").click(function() {
    var row = $(this).parents("tr:first");
    if ($(this).is(".up")) {
        row.insertBefore(row.prev("tr:has(td)"));
    } else {
        row.insertAfter(row.next());
    }
}); 
```

**HTML部分：**

```
 <table cellspacing="0" border="0" id="Table1" style="text-align:center" >
    <tr>
        <th scope="col" width="80px">Column A</th><th scope="col" width="80px">Column B</th><th scope="col">&nbsp;</th>
    </tr>
    <tr>
        <td>
                <span id="GridView1_ctl02_lbl1">A</span>
            </td><td>
                <span id="GridView1_ctl02_lbl2">0</span>
            </td><td>
                <a href="#" class="up">Up</a> <a href="#" class="down">Down</a>
            </td>
    </tr><tr>
        <td>
                <span id="GridView1_ctl03_lbl1">B</span>
            </td><td>
                <span id="GridView1_ctl03_lbl2">2</span>
            </td><td>
                <a href="#" class="up">Up</a> <a href="#" class="down">Down</a>
            </td>
    </tr><tr>
        <td>
                <span id="GridView1_ctl04_lbl1">C</span>
            </td><td>
                <span id="GridView1_ctl04_lbl2">2</span>
            </td><td>
            </td>
    </tr><tr>
        <td>
                <span id="GridView1_ctl05_lbl1">D</span>
            </td><td>
                <span id="GridView1_ctl05_lbl2">2</span>
            </td><td>
            </td>
    </tr><tr>
        <td>
                <span id="GridView1_ctl06_lbl1">E</span>
            </td><td>
                <span id="GridView1_ctl06_lbl2">3</span>
            </td><td>
                <a href="#" class="up">Up</a> <a href="#" class="down">Down</a>
            </td>
    </tr>
</table> 
```

我希望行按**“B 列”中的值移动“向上”和“向下”分组**（根据用红色框突出显示）而不是普通的逐行。根据图表的示例，行的移动应该被红框移动。

![在此处输入图像描述](../Images/e41ddfde3461a60c1bb01dcf2e3b60a2.png)

所以我的问题是，如何使用 jQuery 选择器在“B 列”中按值分组选择行？onclick 事件是在链接（“向上”和“向下”）点击时触发的。

提前谢谢你:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T08:38:52.310

我认为您不能**仅**使用选择器和单个命令来做到这一点！但你可以使用一些循环：

```
 $(".up,.down").click(function () {
     var row = $(this).parents("tr:first");
     if ($(this).is(".up")) {

         myRow = row;
         prevRow = row.prev("tr");

         currentValue = myRow.children("td").eq(1).text();
         prevValue = prevRow.children("td").eq(1).text();
         parNode = myRow.parent();

         i = 0;
         family = [];
         parNode.children("tr").each(function(){
             if($(this).children("td").eq(1).text() == currentValue){
                 family[i] =  $(this);
                 i++;
             }
         });

         for(var j = 0; j <= i; j++ ){
             while(prevRow.children("td").eq(1).text() == prevValue){
                prevRow = prevRow.prev("tr");
             }
             family[j].insertAfter(prevRow);
         }

     } else {
         row.insertAfter(row.next());
     }
 }); 
```

演示在这里：http: [//jsfiddle.net/shahverdy/PSDEs/2/](http://jsfiddle.net/shahverdy/PSDEs/2/) 在这个演示中我只实现了`Up`. 单击`Up`值*2*和*3*以查看其工作原理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T09:17:38.133

给定上面的表结构，**如果 B 列中具有相同值的所有行都是相邻的，则可以创建一个映射存储***(b 列中的值，对应`tr`数组)*对。当您单击*Up/Down*链接时，分离具有相同值的所有行并获取上面（对于*Up*）或波纹管（对于*Down*）的行。然后你知道在哪里附加这些分离的行。

 *****```
$(function() {
    var column_index = 1;
    function get_value(tr) {
        return $('td', tr).eq(column_index).text().trim();
    }
    function group_by(trs, column_index) {
        var map = {};
        trs.each(function (idx) {
            var value = get_value($(this));
            if (map[value])
                map[value].push($(this));
            else
                map[value] = [$(this)];
        });
        return map;
    }
    var map = group_by($('#Table1 tr:gt(0)'), column_index);

    $('a.up').click(function () {
        var tr = $(this).closest('tr');
        var value = get_value(tr);
        var group = map[value];
        var prev = group[0].prev('tr');
        if (prev.length == 0 || $('th', prev).length != 0)
            return;
        var prev_value = get_value(prev);
        var prev_group = map[prev_value];
        for (var i = 0; i < group.length; i++) {
            group[i].detach();
            prev_group[0].before(group[i]);
        }
    });

    $('a.down').click(function () {
        var tr = $(this).closest('tr');
        var value = get_value(tr);
        var group = map[value];
        var next = group[group.length - 1].next('tr');
        if (next.length == 0)
            return;
        var next_value = get_value(next);
        var next_group = map[next_value];
        for (var i = group.length - 1; i >= 0; i--) {
            group[i].detach();
            next_group[next_group.length - 1].after(group[i]);
        }
    });
}); 
```

[请参阅jsFiddle](http://jsfiddle.net/52fP5/)的代码示例。

如果你在服务器端动态生成表，最好用SQL或服务器端语言做组，并附加一些类`tr`来识别组。*****

# arrays - Verilog中基于计数器的内存数组

> ID：15584269
> 
> 赞同：1
> 
> 时间：2013-03-23T07:04:47.397
> 
> 标签：arrays, counter, verilog

我有问题。我是 Verilog 新手，我必须编写一个基于计数器的内存数组。基本上，我的数组是 16 x 8 位（16 x 1 字节）。我有 8 位数据进入我的记忆，16 次。所以我制作了一个内存块和一个计数器，它通过在时钟的上升沿递增来为这个内存块提供地址（实际上，在每个上升沿，8 位数据被馈送到内存中，所以我递增我的计数器）。现在我已经完成了 16 次这个过程，现在我的内存块存储和提供了 128 位数据。但现在我想重置我的计数器，并在稍作延迟后再次重复整个过程。我对如何做到这一点感到困惑。请查看我的代码并提供建议。

提前感谢大家。

```
// creation of counter & a dummy variable
wire cnt;
wire cnt_next;
reg [3:0] counter;
  always @(posedge clock)
    assign cnt_next=cnt+1'b1;   
        counter <= cnt_next
        wire [3:0] write_address  = counter;

//creation of ram function
module single_port_ram
(   
    input [7:0] data,
    input [3:0] addr,
    input wr, clk, rd
    output [127:0] q
);

reg [15:0] ram[0:7];

always @ (posedge clk or posedge reset)
    begin
    // Code for writing the data
        if (wr)
        {
          addr <= write_address 
          case {addr}
                4'b0000: ram[0] <= data
            4'b0001: ram[1] <= data
            4'b0010: ram[2] <= data
            4'b0011: ram[3] <= data
            4'b0100: ram[4] <= data
            4'b0101: ram[5] <= data
            4'b0110: ram[6] <= data
            4'b0111: ram[7] <= data
            4'b1000: ram[8] <= data
            4'b1001: ram[8] <= data
            4'b1010: ram[10] <= data
            4'b1011: ram[11] <= data
            4'b1100: ram[12] <= data
            4'b1101: ram[13] <= data
            4'b1110: ram[14] <= data
            4'b1111: ram[15] <= data
         end

always @ (posedge clk or posedge reset)
    begin
    //Code for reading the data
        if (rd)
        {
        q <= {ram[15],ram[14],ram[13],ram[12],ram[11],ram[10],ram[9],ram[8],ram[7],ram[6],ram[5],ram[4],ram [3],ram[2],ram[1],ram[0]}   
        } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-11-05T16:38:38.043

有 16 x 8 位（16 x 1 字节）

首先声明 RAM 宽度的大小，然后声明 RAM 的实际深度，例如，如果我想要一个包含 512 个 reg 变量（深度）并且每个都是 8 位（宽度）的数组，那么它将被写成：

```
reg [7:0] ram[511:0]; 
```

所以你的代码应该是这样的：

```
reg [7:0] ram[15:0]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-23T18:35:29.670

让你的计数器更大一点，说最多 31 而不是 15。对于前 16 个时钟，像你一样写内存地址，接下来的 16 个时钟只做增量（你想要的小延迟），然后当计数器达到 31 时，只需将其重置为 0。然后该过程应该重新启动。

# c# - 注册站点用户并发送电子邮件

> ID：15584271
> 
> 赞同：-1
> 
> 时间：2013-03-23T07:05:01.240
> 
> 标签：c#, asp.net, security, web-applications, passwords

为网站注册用户并发送带有用户名和密码的链接的最佳方式是什么？

管理员将通过输入用户名而不是密码来创建用户

密码需要生成并作为哈希文本存储在数据库中，并将其发送到用户的电子邮件中，并带有链接和用户名。（在这里我不能将哈希文本反转回纯文本并通过电子邮件发送）:(

我怎样才能做到这一点？我在数据库中以散列格式存储了一些随机文本。不知道每当管理员创建新用户时我将如何通过电子邮件发送给用户。

任何想法/文章或建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T07:34:55.270

就我个人而言，我不喜欢以纯文本形式发送密码。但是我可以理解为什么有时需要它。例如，管理员为用户创建帐户。

**发送带有凭据的初始电子邮件**

当用户在网站上注册时。将电子邮件地址和随机生成的密码（散列）保存到数据库中。成功插入后，使用原始随机生成的密码（不是散列密码）向用户发送电子邮件。

**如果电子邮件失败**

如果电子邮件无法发送或到达收件人，或者他们将其删除，那么他们就丢失了密码。您的网站将需要一个忘记密码部分，用户可以在其中请求重置密码。执行此操作时，您的脚本将创建另一个随机生成的密码，将散列版本存储到数据库并将未散列版本发送给用户。

将重置密码与主帐户详细信息分开是个好主意，以防万一不是所有者尝试重置它。否则，当他们登录时，他们的已知密码将不再有效，因为重置密码会覆盖它。

**登录时更改密码**

在这两种情况下，都应该强制用户在登录时更改密码。

**其他选项**

如果您愿意，您可以将时间戳与帐户凭据一起存储，以了解他们必须重置或首次登录的时间。如果带有电子邮件凭据的登录请求在该时间内，则您允许他们访问。如果不是，那么您说对不起凭据已过期并允许它们再次重置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T07:10:17.407

您可以`authentication`用于管理员登录并授予他创建新登录的权限。

你可以`authentication and authorizations`在这里获得帮助>>

[http://msdn.microsoft.com/en-IN/library/eeyk640h%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-IN/library/eeyk640h%28v=vs.100%29.aspx)

和

[http://www.codeproject.com/Articles/98950/ASP-NET-authentication-and-authorization](http://www.codeproject.com/Articles/98950/ASP-NET-authentication-and-authorization)

**您可以简单地使用此功能发送电子邮件>>**

```
public int sendMail(string to,string cc,string bcc,string subject,string body)

{ 

    try 

        {  

       SmtpMail.SmtpServer="your_server_address"; 

       MailMessage msg = new MailMessage(); 

            msg.From = "your_email_id";

       msg.To = to; 

            msg.Cc = cc; 

            msg.Bcc = bcc; 

            msg.Subject = subject; 

            msg.Body = body; 

       SmtpMail.Send(msg); 

            return(1); 
        } 
        catch 
        { 
               return (0); 
        } 
} 
```

**在发送电子邮件按钮上单击>>**

```
private void Button1_ServerClick(object sender, System.EventArgs e) 
{ 
    String to = “to_email_id”; 
    String cc = “cc_email_id”; 
    String bcc = “bcc_email_id”; 
    String subject = “your subject goes here”; 
    String body = “your body text goes here”; 

    int status = sendMail(to,cc,bcc,subject,body); 

    if(status == 1) 
        Response.Write("your mail has been sent successfully"); 
    else 
        Response.Write("sorry! your mail could not be sent”); 
} 
```

希望它有帮助。

# jquery - 如何在gebo饼图中显示数据值而不是百分比？

> ID：15584277
> 
> 赞同：0
> 
> 时间：2013-03-23T07:06:00.630
> 
> 标签：jquery, charts, tooltip, pie-chart

```
$.plot(elem, data, {
//
                        //
                        series : {
                            pie : {
                                show : true,
                                highlight : {
                                    opacity : 0.2
                                }
                            }
                        },
                        grid : {
                            hoverable : true,
                            clickable : true
                        },
                        colors : [ "#245779", "#85c441", "#e88b2f", "#bb43f2",
                                "#3073a0", "#9C2323", "#183b52", "#8cc7e0",
                                "#64b4d5", "#3ca0ca", "#2d83a6", "#22637e",
                                "#174356", "#0c242e" ]
                    // colors: [ "#b4dbeb", "#8cc7e0", "#64b4d5", "#3ca0ca",
                    // "#2d83a6", "#22637e", "#174356", "#0c242e" ]
                    });
                    // Create a tooltip on our chart
                    elem.qtip({
                        prerender : true,
                        content : 'Loading...', // Use a loading message
                        // primarily
                        position : {
                            viewport : $(window), // Keep it visible within
                            // the window if possible
                            target : 'mouse', // Position it in relation to
                            // the mouse
                            adjust : {
                                x : 7
                            }
                        // ...but adjust it a bit so it doesn't overlap it.
                        },
                        show : true, // We'll show it programatically, so no
                        // show event is needed
                        style : {
                            classes : 'ui-tooltip-shadow ui-tooltip-tipsy',
                            tip : false
                        // Remove the default tip.
                        }
                    });

                    // Bind the plot hover
                    elem
                            .on(
                                    'plothover',
                                    function(event, pos, obj) {

                                        // Grab the API reference
                                        var self = $(this), api = $(this)
                                                .qtip(), previousPoint, content,

                                        // Setup a visually pleasing rounding
                                        // function
                                        round = function(x) {
                                            return Math.round(x * 1000) / 1000;
                                        };

                                        // If we weren't passed the item object,
                                        // hide the tooltip and remove cached
                                        // point data
                                        if (!obj) {
                                            api.cache.point = false;
                                            return api.hide(event);
                                        }

                                        // Proceed only if the data point has
                                        // changed
                                        previousPoint = api.cache.point;
                                        if (previousPoint !== obj.seriesIndex) {
                                            percent = parseFloat(
                                                    obj.series.percent)
                                                    .toFixed(2);
                                            // Update the cached point data
                                            api.cache.point = obj.seriesIndex;
                                            // Setup new content
                                            content = obj.series.label + ' ( '
                                                    + percent + '% )';
                                            alert(content);
                                            // Update the tooltip content
                                            api.set('content.text', content);
                                            // Make sure we don't get problems
                                            // with animations
                                            // api.elements.tooltip.stop(1, 1);
                                            // Show the tooltip, passing the
                                            // coordinates
                                            api.show(pos);
                                        }
                                    });

                }
            }); 
```

以上是来自 gebo admin Charts 的带有 j 查询的函数

现在我想要的是在饼图的工具提示中显示数据值而不是百分比..我已经看了很多..但找不到任何东西..有人可以指导我吗？

以下来自上述函数的代码设置百分比，但我只想使用数据..而不是它的百分比......

```
(previousPoint !== obj.seriesIndex) {
                                                percent = parseFloat(
                                                        obj.series.percent)
                                                        .toFixed(2);
                                                // Update the cached point data
                                                api.cache.point = obj.seriesIndex;
                                                // Setup new content
                                                content = obj.series.label + ' ( '
                                                        + percent + '% )';
                                                alert(content);
                                                // Update the tooltip content
                                                api.set('content.text', content); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:47:43.793

好的，就这样……经过太多谷歌搜索，我成功了……

```
if (previousPoint !== obj.seriesIndex) {
                                            percent = parseFloat(
                                                    obj.series.percent)
                                                    .toFixed(2);
                                            // Update the cached point data
                                            api.cache.point = obj.seriesIndex;
                                            // Setup new content
                                            content = obj.series.label + ' ('
                                            + obj.series.data[0][1] + ')';

                                            // Update the tooltip content
                                            api.set('content.text', content);
                                            // Make sure we don't get problems
                                            // with animations
                                            // api.elements.tooltip.stop(1, 1);
                                            // Show the tooltip, passing the
                                            // coordinates
                                            api.show(pos);
                                        } 
```

与

```
content = obj.series.label + ' ('
                                            + obj.series.data[0][1] + ')'; 
```

obj.series.data[0][1] 给了我数据点的值而不是百分比

# c# - 什么原因导致 INSERT 语句与 FOREIGN KEY 约束冲突？

> ID：15584278
> 
> 赞同：11
> 
> 时间：2013-03-23T07:06:03.277
> 
> 标签：c#, asp.net-mvc-4, visual-studio-2012, ef-code-first, entity-framework-ctp5

这段代码以前对我有用，但我不确定是什么导致了这个错误。我唯一的猜测是，当我尝试创建玩家时，团队数据被发送回团队表并尝试复制，但由于 TeamId 是唯一的，因此出现此错误。

**错误**

> *INSERT 语句与 FOREIGN KEY 约束“FK_dbo.Players_dbo.Teams_TeamId”冲突。冲突发生在数据库“Web”、表“dbo.Teams”、列“TeamId”中。该语句已终止。*

**播放器**

```
public class Player
{
    ...
    ...

    [HiddenInput(DisplayValue = false)]
    [ForeignKey("Team")]
    public int TeamId { get; set; }        

    public virtual Team Team { get; set; }

    ...
} 
```

团队

```
public class Team
{
    [Key]
    [HiddenInput(DisplayValue = false)]
    public int TeamId { get; set; }

    ....

    public virtual ICollection<Player> Players { get; set; }
} 
```

**控制器**

```
//
    // GET: /Player/
    [HttpGet]
    public ActionResult Create()
    {
        PopulateTeamsDropDownList();
        return View();
    }

    //
    // POST: /Player/
    [HttpPost]
    public ActionResult Create(Player model)
    {
        if (ModelState.IsValid)
        {
            using (var db = new EfDb())
            {
                var userProfile = db.UserProfiles.Single(u => u.UserName == User.Identity.Name);
                if (userProfile != null)
                {
                    var player = new Player
                                     {
                                         UserProfile = userProfile,                                             
                                         ....
                                         ....                                              
                                     };                        
                    db.Players.Add(player);                          

                    db.SaveChanges();
                }
            }
        }
        PopulateTeamsDropDownList(model.TeamId);
        return View(model);
    }

    private void PopulateTeamsDropDownList(object selectedTeams = null)
    {
        var teamsQuery = from d in _iService.Teams
                         orderby d.Name
                         select d;
        ViewBag.TeamID = new SelectList(teamsQuery, "TeamId", "Name", selectedTeams);
    } 
```

**看法**

```
<div class="editor-label">
            @Html.LabelFor(model => model.TeamId, "Pick Your Team")
    </div>
    <div class="editor-field">
        @Html.DropDownList("TeamId", String.Empty)
        @Html.ValidationMessageFor(model => model.TeamId)
    </div> 
```

如何解决此错误？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-23T07:08:04.623

这背后的原因是当您在表上插入一条记录时，该`child`表上的引用列的值尚不存在`parent`。

考虑以下场景：

```
// PARENT TABLE
CREATE TABLE TableA
(
   ID INT PRIMARY KEY
);

// CHILD TABLE
CREATE TABLE TableB
(
   ID INT PRIMARY KEY,
   TableA_ID INT,
   CONSTRAINT tb_FK FOREIGN KEY (TableA_ID) REFERENCES TableA(ID)
);

// RECORDS OF PARENT TABLE
INSERT INTO TableA (ID) VALUES (1);
INSERT INTO TableA (ID) VALUES (2);

// RECORDS OF CHILD TABLE
INSERT INTO TableB (ID, TableA_ID) VALUES (1,1);
INSERT INTO TableB (ID, TableA_ID) VALUES (2,1);
INSERT INTO TableB (ID, TableA_ID) VALUES (3,2); 
```

如果执行上述语句，它不会失败，因为它们都没有违反参照完整性规则。

尝试执行以下语句：

```
INSERT INTO TableB (ID, TableA_ID) VALUES (3,4); 
```

它失败是因为要插入`4`的值在`TableA_ID`上不存在`Table1.ID`。外键保留了记录之间的参照完整性。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-23T07:07:54.597

您应该尝试为您的玩家实体完成诸如团队之类的实体。尤其是外键。

```
[HttpPost]
    public ActionResult Create(Player model)
    {
        if (ModelState.IsValid)
        {
            using (var db = new EfDb())
            {
                //Since you have the username cached, you can check the local EF cache for the object before hitting the db.
                //var userProfile = db.UserProfiles.Single(u => u.UserName == User.Identity.Name);
                var userProfile = db.UserProfiles.Local.SingleOrDefault(u => u.UserName == User.Identity.Name) 
                               ?? db.UserProfiles.SingleOrDefault(u => u.UserName == User.Identity.Name);
                if (userProfile != null)
                {
                    var player = new Player
                                     {
                                         UserProfile = userProfile,                                             
                                         ....
                                         ....                                              
                                     };  
                    player.TeamId = 5;                      
                    db.Players.Add(player);                          

                    db.SaveChanges();
                }
            }
        }
        PopulateTeamsDropDownList(model.TeamId);
        return View(model);
    } 
```

并确保您视图中的 Dropdown 是必需的，并将正确的值发送到 post 方法。

# javascript - 在 KineticJS 中沿光标路径绘制线条

> ID：15584286
> 
> 赞同：1
> 
> 时间：2013-03-23T07:06:51.680
> 
> 标签：javascript, jquery, ajax, html, kineticjs

我正在使用 KineticJS 来实现绘图应用程序。我用它来绘制形状，直线。我使用了[KineticJS - Draw Lines with Mouse](https://stackoverflow.com/questions/12311535/kineticjs-drawing-lines-with-mouse)中描述的方式来绘制直线。但现在我的要求是沿着鼠标路径画线！这应该是什么程序？我们可以使用 Kinetic.Path 来做到这一点吗？

以下代码用于绘制直线，

```
 var Object,startingPoint;
    var down = false;

    layer.on("mousedown", function(e) {
        down = true;
        Object = new Kinetic.Line({
            points: [e.layerX, e.layerY,e.layerX+1, e.layerY+1],
            stroke: "red"
        });

        layer.add(Object);
    });

    layer.on("mousemove", function(e) {
         if (down) {
                var x = e.layerX;
                var y = e.layerY;
                Object.getPoints()[1].x = e.layerX;
                Object.getPoints()[1].y = e.layerY;
                down = true;
                layer.draw();
         }        
    });

    layer.on("mouseup", function(e) {
        down = false;
    }); 
```

我已将 Kinetic.Line 替换为 Kinetic.Path 以实现目标。但它没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T21:35:31.607

这是我如何实现它的。关键是在 mousemove 和 mouseup 期间使用 kineticJS 的样条形状并在其中推动点。[ev._x, ev._y 是根据这篇文章Tracking mouse position in canvas when no](https://stackoverflow.com/questions/5085689/tracking-mouse-position-in-canvas-when-no-surrounding-element-exists/5086147#5086147) around element exists 计算的 x 和 y 点

请让我知道是否有帮助

```
 tools.pencil = function () {
    var tool = this;
    this.started = false;
    var drawObject;

    this.mousedown = function (ev) {
     drawObject = new DrawObject();
     drawObject.Tool = DrawTool.Pencil;
     tool.started = true;
     drawObject.currentState = DrawState.Started;
     drawObject.StartX = ev._x;
     drawObject.StartY = ev._y;
     tool.DrawIt(drawObject);

   };

    this.mousemove = function (ev) {
        if (tool.started) {
           drawObject.currentState = DrawState.Inprogress;
           drawObject.CurrentX = ev._x;
           drawObject.CurrentY = ev._y;
           tool.DrawIt(drawObject);

    };

    this.mouseup = function (ev) {
        if (tool.started) {
            tool.started = false;
            drawObject.currentState = DrawState.Completed;
             drawObject.CurrentX = ev._x;
            drawObject.CurrentY = ev._y;
           tool.DrawIt(drawObject);
       }
    };

    this.mouseout = function (ev) {
        if (tool.started) {
        }
        tool.started = false;

    };

    this.DrawIt = function (drawObject) {

            switch (drawObject.currentState) {
                case DrawState.Started:
                    var x= drawObject.StartX, 
                        y = drawObject.StartY;
                    var pencil = new Kinetic.Spline({
                        points: [{
                            x: x,
                            y: y
                        }],
                        stroke: 'red',
                        strokeWidth: 2,
                        lineCap: 'round',
                        tension: 1,
                        name: shapes.length
                    });

                    drawObject.Shape = pencil;
                    layer.add(pencil);
                    layer.draw();

                    break;
                case DrawState.Inprogress:
                case DrawState.Completed:
                    var x = drawObject.CurrentX,
                        y = drawObject.CurrentY;

                    var pencil = drawObject.Shape;
                    pencil.attrs.points.push({ x: x, y: y });
                    pencil.setPoints(pencil.attrs.points);
                    layer.draw();
                    if (drawObject.currentState == DrawState.Completed) {
                        // dosomething
                    }

                    break;
            } 
```

哪里绘制对象是javascript中的简单空函数

```
function DrawObject()
{
} 
```

而drawstate是铅笔工具的所有可用状态

```
var DrawState =
{
 Started: 0,
 Inprogress: 1,
 Completed: 2
} 
```

并且“层”是在 KineticJS 阶段已经添加的简单 KineticJS 层

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T15:07:10.700

如果您需要将点添加到一条线上，您可以这样做：

```
 var points = line.getPoints();
  var pos = stage.getUserPosition();
  points = points.push(pos.x, pos.y);
  line.setPoints(points); 
```

# ios - 在目标 c 中找到重力

> ID：15584295
> 
> 赞同：0
> 
> 时间：2013-03-23T07:08:20.897
> 
> 标签：ios, objective-c, accelerometer

我想在目标 c 中查找重力，我在我的项目中使用加速度计。但我在谷歌上没有找到重力的好教程，所以我需要帮助

我想在重力仪内移动红色的小圆圈，如附图所示。

我目前正在使用加速度计，我可以使用加速度计找到重力。

```
- (void)accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration {

 ...............

  labelX.text = [NSString stringWithFormat:@"%@%f", @"X: ", acceleration.x];
  labelY.text = [NSString stringWithFormat:@"%@%f", @"Y: ", acceleration.y];
  labelZ.text = [NSString stringWithFormat:@"%@%f", @"Z: ", acceleration.z];  
![enter image description here][1]} 
```

谢谢

![在此处输入图像描述](../Images/e8e7d54209a35fadbdef6a314b434d68.png)m.png

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T19:16:20.900

查看该应用程序（视频计），您似乎正在寻找正在施加的 G 力。G 力不是重力 - 它是一种外部机械力（用户摆动设备等），特别定义为不是来自地球重力。这很重要，因为在 iPhone 或任何其他支持加速计的设备上，当没有运动时它会报告全 0。如果它报告重力，则任何读数都会不断报告 Y/向下轴的运动（地球将您拉下）。

您正在寻找 G-force，这意味着您需要：

1.  运动方向
2.  运动的力量

查看 Apple 的[UIAcceleration 对象](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIAcceleration_Class/Reference/UIAcceleration.html#//apple_ref/doc/uid/TP40006901)文档- 您将根据哪些变量正在更改获得方向 - `x`, `y`, `z`. 这些变量的值会为您提供一个力（1.0 近似为 g，即 9.8m/s2 - 地球重力）。如何在图表上显示该数据取决于您 - 您可以存储加速事件的历史记录，然后为它们设置动画，并在加速停止时将点重置为中间（当加速停止时，UIAccelerometer 共享对象将开始报告 0 值） .

# jquery - 有没有办法在带有过滤结果的fancyBox灯箱中使用RoyalSlider？

> ID：15584298
> 
> 赞同：1
> 
> 时间：2013-03-23T07:08:45.437
> 
> 标签：jquery, fancybox, colorbox, jquery-isotope

我已经能够设置一个可以按类别过滤的照片库。当点击一张照片时，它会启动一个 fancyBox 灯箱，它只循环过滤的结果。

我想做的是用 RoyalSlider 替换 fancyBox 中的幻灯片，因为它更易于配置并且转换效果更好。我曾尝试使用托管 RoyalSlider 的 ColorBox 设置示例，但它似乎不允许我像迄今为止设置的那样通过过滤结果。

这是我的 jsfiddle 的链接，其中包含我到目前为止所做的工作，尝试使用过滤器按钮，您会看到幻灯片仅循环显示过滤后的结果：

[**http://jsfiddle.net/lalush/G448F/embedded/result/**](http://jsfiddle.net/lalush/G448F/embedded/result/)

这是我用来过滤结果的代码。有什么方法可以翻译这个让 RoyalSlider 识别过滤的结果？

```
// filter items when filter link is clicked
    $('#filters a').on("click", function () {
        var selector = $(this).attr('data-filter');
        $('#container').isotope({
            filter: selector
        }, function () {
            if (selector == "*") {
                $(".fancybox").attr("data-fancybox-group", "gallery");
            } else {
                $(selector).find(".fancybox").attr("data-fancybox-group", selector);
            }
        });
        return false;
    });
}); 
```

我可以使用 RoyalSlider 显示过滤结果吗？我不太擅长 javascript，但到目前为止，我已经设法从我找到的示例中配置了这个画廊。我一直找不到任何使用 fancyBox 来托管 RoyalSlider 的示例，尽管据说它能够在 RoyalSlider 的功能中与 ColorBox 和 fancyBox 一起使用。

任何帮助是极大的赞赏！

# php - 如何在php中创建一个在线购物车

> ID：15584300
> 
> 赞同：0
> 
> 时间：2013-03-23T07:09:03.870
> 
> 标签：php, mysql, session-variables

我正在创建一个有四个按钮的购物车继续购物、清除购物车、更新购物车和下订单

```
 undefined index cart 
```

但是购物车来自会话，当我按下清除购物车按钮时

```
it unsets the session of cart 
```

那么我在哪里做错了？谁能帮忙？这是我的代码

```
<?php
    include("includes/db.php");
    include("includes/functions.php");

    if($_REQUEST['command']=='delete' && $_REQUEST['pid']>0){
        remove_product($_REQUEST['pid']);
    }
    else if($_REQUEST['command']=='clear'){
        unset($_SESSION['cart']);
    }
    else if($_REQUEST['command']=='update'){
        $max=count($_SESSION['cart']);
        for($i=0;$i<$max;$i++){
            $pid=$_SESSION['cart'][$i]['productid'];
            $q=intval($_REQUEST['product'.$pid]);
            if($q>0 && $q<=999){
                $_SESSION['cart'][$i]['qty']=$q;

            }
            else{
                $msg='Some proudcts not updated!, quantity must be a number between 1 and 999';
            }
        }
    }

?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Shopping Cart</title>
<script language="javascript">
    function del(pid){
        if(confirm('Do you really mean to delete this item')){
            document.form1.pid.value=pid;
            document.form1.command.value='delete';
            document.form1.submit();
        }
    }
    function clear_cart(){
        if(confirm('This will empty your shopping cart, continue?')){
            document.form1.command.value='clear';
            document.form1.submit();
        }
    }
    function update_cart(){
        document.form1.command.value='update';
        document.form1.submit();
    }

</script>
</head>

<body>
<form name="form1" method="post">
<input type="hidden" name="pid" />
<input type="hidden" name="command" />
    <div style="margin:0px auto; width:600px;" >
    <div style="padding-bottom:10px">
        <h1 align="center">Your Shopping Cart</h1>
    <input type="button" value="Continue Shopping" onclick="window.location='products.php'" />
    </div>
        <div style="color:#F00"><?php echo'' ;?></div>
        <table border="0" cellpadding="5px" cellspacing="1px" style="font-family:Verdana, Geneva, sans-serif; font-size:11px; background-color:#E1E1E1" width="100%">
        <?php
            if(is_array($_SESSION['cart'])){
                echo '<tr bgcolor="#FFFFFF" style="font-weight:bold"><td>Serial</td><td>Name</td><td>Price</td><td>Qty</td><td>Amount</td><td>Options</td></tr>';
                $max=count($_SESSION['cart']);
                for($i=0;$i<$max;$i++){
                    $pid=$_SESSION['cart'][$i]['productid'];
                    $q=$_SESSION['cart'][$i]['qty'];
                    $pname=get_product_name($pid);
                    if($q==0) continue;
            ?>
                    <tr bgcolor="#FFFFFF"><td><?php echo $i+1?></td><td><?php echo $pname?></td>
                    <td>$ <?php echo get_price($pid)?></td>
                    <td><input type="text" name="product<?php echo $pid?>" value="<?php echo $q?>" maxlength="3" size="2" /></td>                    
                    <td>$ <?php echo get_price($pid)*$q?></td>
                    <td><a href="javascript:del(<?php echo $pid?>)">Remove</a></td></tr>
            <?php                   
                }
            ?>
                <tr><td><b>Order Total: $<?php echo get_order_total()?></b></td><td colspan="5" align="right"><input type="button" value="Clear Cart" onclick="clear_cart()"><input type="button" value="Update Cart" onclick="update_cart()"><input type="button" value="Place Order" onclick="window.location='billing.php'"></td></tr>
            <?php
            }
            else{
                echo "<tr bgColor='#FFFFFF'><td>There are no items in your shopping cart!</td>";
            }
        ?>
        </table>
    </div>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T07:43:21.263

如果您还没有开始填充您的购物车，那么该元素将是未定义的。在处理数组元素时，最好添加额外的测试 array_key_exists()。但是，在您的情况下，问题更多在于您通常处理数组的方式。

PHP 非常宽容，因此您必须在编码方式上执行自己的纪律。一个值得使用的非常好的做法是在开始使用变量之前显式初始化变量。

```
// somewhere near the top of your code
$_SESSION['cart'] = array_key_exists('cart', $_SESSION)?$_SESSION['cart']:array(); 
```

并且不要在清除测试中取消设置它......只需将其设置回一个空数组。

```
else if($_REQUEST['command']=='clear'){
    $_SESSION['cart'] = array();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T07:17:17.807

这是*简单的 PHP 购物车教程*

```
$product_id = $_GET['id']; //the product id from the URL 
$action = $_GET['action']; //the action from the URL 

//if there is an product_id and that product_id doesn't exist display an error message
if($product_id && !productExists($product_id)) {
    die("Error. Product Doesn't Exist");
}

switch($action) { //decide what to do 

    case "add":
        $_SESSION['cart'][$product_id]++; //add one to the quantity of the product with id $product_id 
    break;

    case "remove":
        $_SESSION['cart'][$product_id]--; //remove one from the quantity of the product with id $product_id 
        if($_SESSION['cart'][$product_id] == 0) unset($_SESSION['cart'][$product_id]); //if the quantity is zero, remove it completely (using the 'unset' function) - otherwise is will show zero, then -1, -2 etc when the user keeps removing items. 
    break;

    case "empty":
        unset($_SESSION['cart']); //unset the whole cart, i.e. empty the cart. 
    break;

}

?> 
```

从[这里](http://jameshamilton.eu/content/simple-php-shopping-cart-tutorial)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-21T02:03:09.673

```
switch($action) { //decide what to do 

    case "add":
        $_SESSION['cart'][$product_id]++; //add one to the quantity of the product with id $product_id 
    break;

    case "remove":
        $_SESSION['cart'][$product_id]--; //remove one from the quantity of the product with id $product_id 
        if($_SESSION['cart'][$product_id] == 0) unset($_SESSION['cart'][$product_id]); //if the quantity is zero, remove it completely (using the 'unset' function) - otherwise is will show zero, then -1, -2 etc when the user keeps removing items. 
    break;

    case "empty":
        unset($_SESSION['cart']); //unset the whole cart, i.e. empty the cart. 
    break; 
```

# ruby-on-rails - Select2 没有从令牌列表中删除 id

> ID：15584301
> 
> 赞同：0
> 
> 时间：2013-03-23T07:09:07.950
> 
> 标签：ruby-on-rails, coffeescript, jquery-select2

我正在使用 Select2 将内容分配给其他用户（多个标签）。一切都很好，除了我无法找到添加后如何删除受让人。

将用户添加到模态中的受让人列表后，单击带有 class 的叉号后，从输入字段中删除`select2-search-choice-close`带有 class 的相应列表项`select2-search-choice`，但不会从受让人令牌中删除 id （因此通过当我提交表格时给控制器）​​。

我错过了什么？

注意：我不是 100% 确定这是否相关，但我注意到当我提交表单时传递的 assignee_ids 有时包含多次相同的 id（例如：assignee_ids => "12,1,4,4"）。

这就是我初始化输入的方式：

```
 $('#assignable_item_assignment_assignee_ids').select2({
      minimumInputLength: 2
      tags: true
      tokenSeparators:[',', ' ']
      createSearchChoice: (term, data) ->
        {id: term, new_choice: true}
      multiple: true
      ajax:
        url: url
        dataType: 'json'
        quietMillis: 150
        data: (term, page) ->
          query: term
        results: (data, page) ->
          return {results: data}
      formatResult: userFormatResult
      formatSelection: userFormatSelection
      formatInputTooShort: (term, minLength) ->
        "Search existing users or assign by email"
      dropdownCssClass: 'select2'
    }) 
```

这是我正在使用的表格：

```
 <%= form_for AssignableItemAssignment.new, url: assignable_items_assignments_path, html: { class: "form-horizontal", id: "new-assignment" }  do |f| -%>
    <fieldset>
      <div class="control-group">
        <%= f.label :to %>
        <div class="with-spinner">              
          <%= f.text_field :assignee_ids, placeholder: "Search users by name or email", class: 'select2'  %>
        </div>
      </div>

      <div class="control-group">
        <%= f.label :add_a_message %>
        <%= f.text_area :message, rows: 3, placeholder: "Add a message for your recipients (optional)" %>
      </div>

      <%= f.button "Submit", disable_with: 'Submiting' %>
    </fieldset>
  <% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:58:00.757

我有一个类似的问题，安装最新版本（3.3.2）后修复

# java - Tomcat 7 在 Safari 中关闭 websocket 时崩溃（不在 Firefox 中）

> ID：15584303
> 
> 赞同：1
> 
> 时间：2013-03-23T07:09:36.223
> 
> 标签：java, tomcat, crash, websocket

[我和这个未回答](https://stackoverflow.com/questions/13671046/wsoutbound-close-function-causes-tomcat-to-crash)的问题有同样的问题

找不到解决方案。在我的设置中，它适用于 Firefox，但不适用于 Safari 或 Chrome。整个 Tomcat 服务器宕机了……

# algorithm - 如何在快速排序中获得 O(log n) 空间复杂度？

> ID：15584310
> 
> 赞同：0
> 
> 时间：2013-03-23T07:10:34.173
> 
> 标签：algorithm, sorting, quicksort

### quicksort 的朴素递归版本：

```
QUICKSORT(A,p,r)
 if p < r then 
   q=PARTITION(A,p,r)
   QUICKSORT(A,p,q-1)
   QUICKSORT(A,q+1,r) 
```

这使用了 O(n) 额外空间

在 Cormen ch 7-4 "Stack depth for quick sort" 中提到
- QUICKSORT 中的第二次递归调用不是必需的，它可以通过迭代控制结构来避免。这种方法称为尾递归

### 修改版的快速排序：

```
QUICKSORT'(A,p,r)
 while p < r
   q=PARTiTION(A,p,r)
   QUICKSORT'(A,p,q-1)
   p=q-1 
```

空间复杂度 O(log n)

我无法理解空间复杂度是如何降低的。
我不认为它的尾递归

谁能解释一下空间复杂度如何降低（调用如何使用堆栈）或任何其他更好的方法来实现这一点。

# youtube-api - YouTube API 评论流式传输

> ID：15584314
> 
> 赞同：4
> 
> 时间：2013-03-23T07:10:43.837
> 
> 标签：youtube-api

是否有任何 YouTube API 可以让外部应用程序在 YouTube 上的所有视频评论中搜索关键字/品牌名称并将其发送回某个 URL？此外，如果建议的推送想法不存在，拉方法也可以。

所以我想知道我的品牌是否在 YouTube 上的任何视频评论中被提及，类似于 Twitter 允许的用户/站点流。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T13:17:06.827

YouTube API (v2.0) 将评论定义为视频对象的属性。此处有关此关系的详细信息：

[https://developers.google.com/youtube/2.0/developers_guide_protocol_comments?hl=en#Retrieve_comments](https://developers.google.com/youtube/2.0/developers_guide_protocol_comments?hl=en#Retrieve_comments)

因此，为了搜索每条 YouTube 评论，您需要遍历整个视频集合。如果您要尝试这样的事情，首先关注与您的品牌最相关的提要或类别来验证您的概念是有意义的。此处有关提要和类别的详细信息：

[https://developers.google.com/youtube/2.0/developers_guide_protocol_video_feeds](https://developers.google.com/youtube/2.0/developers_guide_protocol_video_feeds) [https://developers.google.com/youtube/2.0/developers_guide_protocol_category_keyword_browsing](https://developers.google.com/youtube/2.0/developers_guide_protocol_category_keyword_browsing)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T22:15:55.560

不，现有的 youtube api（V2 和 V3 都没有）没有类似的东西

# html - 无法通过visual basic登录网站（几乎在那里）

> ID：15584320
> 
> 赞同：0
> 
> 时间：2013-03-23T07:11:26.347
> 
> 标签：html, vb.net, browser, login

我有一个 Visual Basic 应用程序，我正在尝试登录 live.com，它包含两个文本框（1 个用于用户，1 个用于传递）一个提交按钮和一个网络浏览器。我将 webbrowser 的 URL 设置为 live.com（以便我可以登录），然后我为 btnLogin 输入了此代码（登录按钮）

```
 WebBrowser1.Document.GetElementById("login").SetAttribute("value", txtUsername.Text)
    WebBrowser1.Document.GetElementById("passwd").SetAttribute("value", txtPassword.Text)
    WebBrowser1.Document.GetElementById("SI").InvokeMember("submit") 
```

现在，当我点击提交时，输入了信息，但页面似乎只是刷新（不确定），但似乎没有提交信息。现在还让我解释一下代码，名称登录、passwd 和 SI 均来自 live.com。所以我相信这是 live.com 上的 HTML 提交按钮代码

```
 <input type="submit" name="SI" id="idSIButton9" value="Sign in" class="default"> 
```

但是当我输入名称 SI 时，它似乎没有提交。如果有人可以帮助我，那就太好了。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T07:14:06.453

你试过了`GetElementsById("idSIButton9").InvokeMember("submit")`吗？

# asp.net-mvc-3 - 在返回数据集的 MVC3 中调用存储过程

> ID：15584326
> 
> 赞同：0
> 
> 时间：2013-03-23T07:12:29.917
> 
> 标签：asp.net-mvc-3, sql-server-2008, c#-4.0

我正在使用一个返回数据集的存储过程。我的程序是这样的

```
ALTER procedure [dbo].[USP_DisplaySaldetails]
 as begin
DECLARE @cols AS NVARCHAR(MAX),
 @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT ',' + QUOTENAME(SST_Name) 
                from CM_SalType where SST_isdeleted='false'
                group by SST_id, SST_Name
                order by SST_id 
        FOR XML PATH(''), TYPE
        ).value('.', 'NVARCHAR(MAX)') 
    ,1,1,'')

set @query = 'SELECT U_id, ' + @cols + ' 
          from 
         (
            select t.SST_Name,
              s.U_id,u.U_Fname,u.U_lname,
              s.SSV_Value
            from CM_SalType t
            left join CM_StaffSal s
              on t.SST_id = s.SST_id inner join CM_User u on u.U_id=s.U_id
        ) x
        pivot 
        (                max(SSV_Value)
            for SST_Name in (' + @cols + ')
        ) p '

        execute(@query)
end 
```

结果集是

```
| U_ID | BASIC |  HRA |   DA |
------------------------------
|   11 | 15000 |  0.1 | 0.75 |
|   12 | 10000 | 0.01 |  0.5 | 
```

这里的列名是动态的。所以如何从 mvc3 调用此过程以及如何将数据集放入我的控制器中。没有参数传递给存储过程

我的表结构的详细信息在[将表中列的值分配为另一个表的列名](https://stackoverflow.com/questions/15543908/assign-value-of-a-column-in-a-table-as-columname-of-another-table/15544707#15544707)。我正在使用实体框架

# scala - 由于缺少 ClassTag，Scala Future mapTo 无法编译

> ID：15584328
> 
> 赞同：10
> 
> 时间：2013-03-23T07:12:47.810
> 
> 标签：scala, akka, future

简单的问题，我有一个问题，在 ask 结果上使用 mapTo 会导致编译器错误，如下所示：

```
not found: value ClassTag 
```

例如：

```
(job ? "Run").mapTo[Result]
                   ^ 
```

我不明白为什么它需要一个 ClassTag 来进行演员表？如果我用 Predef 替换一个标准类，就像`String`编译`(job ? "Run").mapTo[String]`好的一样。

当我在相关行的正上方定义类时会发生这种情况，如下所示：

```
class Result {}
(job ? "Run").mapTo[Result] 
```

我仍然遇到同样的问题。

谢谢，杰森。

我还应该声明我正在使用 Scala 2.10.0 和 Akka 2.1.0（如果这有区别的话）。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-23T10:59:34.263

这似乎是 Scala 2.10.0 版本的一个特殊问题

添加后

```
import reflect.ClassTag 
```

隐式使用的`ClassTag`参数`mapTo`应该可以工作。

要么更新到更新版本的 Akka/Scala（如果可能的话，应该首选）。

# php - 是否可以在操作系统级别限制 php 可以通过 exec 传递的命令？

> ID：15584335
> 
> 赞同：12
> 
> 时间：2013-03-23T07:15:03.490
> 
> 标签：php, drupal, command-line, centos, exec

我目前在 CentOS 机器上托管[Drupal](http://drupal.org/) 6 站点。Drupal ( [CMS](http://en.wikipedia.org/wiki/Content_management_system) ) 配置包含几十个第三方模块，它们不应该作为一般的最佳编码实践进行[分叉。](http://en.wikipedia.org/wiki/Fork_%28software_development%29)但是，其中一些模块使用[php`exec`](http://php.net/manual/en/function.exec.php)命令才能正常运行。

该站点允许管理员通过 UI 配置在任何页面中嵌入 php 代码片段，前提是他们有权访问 php 代码输入格式。我需要让管理员可以使用这种输入格式，因为有几个节点（页面）和面板窗格使用小的、无害的 php 代码片段，例如将特定表单嵌入到内容区域中。

问题是，如果有人要破坏管理员帐户，那么他们可以在站点上运行任意 php 代码，从而通过 php 的`exec`,[`passthru`](http://php.net/manual/en/function.passthru.php)等运行 shell 命令。有没有办法从操作系统级别限制什么 shell命令php可以传递给机器吗？这可以通过限制来自 php 的某些程序的文件权限来完成吗？

**注意：**我不能使用 php.ini [disable_functions](http://www.php.net/manual/en/ini.core.php#ini.disable-functions)指令，因为`exec`在许多情况下我仍然需要正常运行，其中模块使用某些 shell 命令，例如视频编码。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-03T23:14:49.227

如果您的管理员帐户被黑客入侵，您就完蛋了。你试图减少注定的命运，但这不会奏效。

## 禁用 exec()

这只是能够调用系统的所有函数的一小部分。还有更多，例如`passthru()`, `shell_exec()`, `popen()`, `proc_open()`, 反引号运算符等等。不会有帮助。

## 限制可用的可执行文件

只有当攻击者不能带来他自己的可执行文件时才会起作用。但`file_put_contents()`将能够将可执行文件写入硬盘，然后可以调用它。也不会帮忙。

## PHP 本身不会造成任何伤害，不是吗？

错误的。在服务器上执行东西`exec()`似乎是最好的主意，但 PHP 本身功能强大，足以对您的服务器以及与之连接的任何东西造成严重破坏。

我认为唯一真正的解决方案是：

# 不要让您的管理员帐户被黑客入侵。

如果他们被黑客入侵，可以立即知道。能够将攻击追溯到管理员。能够知道攻击者对您的机器做了什么，以便您可以撤消它。一个非常重要的部分是您实现了一个审计跟踪记录器，它将其数据保存在不同的机器上。

而且您可能首先对谁可以以管理员身份登录实施更严格的限制。例如，如果您确定某个管理员总是使用其本地 ISP 的 IP 范围工作，则可能不需要允许整个世界的 IP 范围登录。至少，敲响铃并通知其他人，如果这不是预期的（除非您在中国经营:-)），正在从中国登录。

并且有两个因素身份验证。您可以使用额外的登录代码向电话号码发送短信。或者，您可以通过实施 Google 或 Facebook 身份验证来完全外包登录。这些参与者已经拥有支持这一点的基础设施。

此外，您对内部工作的抵抗力更高。人们确实比雇主的登录更重视他们的个人社交网络登录。获取某人的 facebook 密码平均需要 30 美元，但公司登录已经共享 8 美元。去搞清楚...

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-30T04:05:54.317

回答您的问题：理论上，如果您使用 PHP 可以运行命令的极其受限的帐户创建用户帐户，您可以调整您的安装以更安全。然而，真正的问题是管理员用户能够执行任意命令。如果发生这种情况，您将面临更大的问题。

这里真正的解决方案是：

*   从 Drupal 中提交和运行任意代码的能力是一个重大风险，您可以通过**不这样做**来减轻风险。我强烈建议重新设计那些“无害”的代码，因为它们会导致妥协；任意代码执行只是一种利用方式，还有很多其他需要担心的。
*   需要运行 shell 命令的模块也是重大的安全漏洞。在某些情况下，我已经能够对执行命令的模块进行 fork/patch 或替换为不执行命令的模块，但在某些情况下（例如视频编码），这是无法避免的。在这种情况下，我会设置一个非常受限的后端服务，前端可以与之通信。这将您的关注点分开，并让 Drupal 做它打算做的事情：管理和提供内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T15:09:25.193

这不在操作系统级别，但在 Drupal 核心内部有一个名为 PHP 的模块。您可以使用它作为基础并创建一个自定义模块来扩展此模块的功能，然后只需启用此模块而不是 Drupal 6 核心模块。然而，最大的问题在于禁用 Drupal 6 核心模块，然后启用新模块。我会在开发安装上对其进行测试，以确保没有删除以前的内容并且新模块正确解析存储的 PHP 输入。应该没问题，因为模块安装只有一个禁用钩子警告，针对现在以纯文本显示的 PHP 内容。

至于扩展核心模块，这是一个非常简单的模块。您可以在允许或不允许执行的命令列表中进行硬编码。然后，您可以根据此列表检查带有已解析变量的 exec 语句，并执行任何适当的操作。与简单地阻塞在操作系统级别的程序本身相比，这并不是完美的匹配，但总比没有好。要对列表进行硬编码，您只需修改模块文件底部的 php_filter 钩子，然后在执行 drupal_eval 之前进行测试。

您还可以扩展此模块以在 Drupal 管理界面中进行配置，以创建该列表而不是对其进行硬编码。希望这个想法有所帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-05T20:42:15.457

另一种方法：

我们认为，我们需要创建一个只能访问系统的测试用户，以便对网络上的另一台机器执行 telnet。由于我们只需要运行 telnet，因此需要限制标准 bash 会话中可用的其他命令。让我们一步一步地配置一切。

1）我们创建用户测试

这将是系统的普通用户，我们作为普通用户也应该如此。唯一的特点是我们更改了该用户的外壳。默认通常是/bin/bash，我们将设置/bin/rbash。rbash 实际上是 bash 的副本，但它确实是“受限制的 bash”。

```
shell> adduser --shell /bin/test rbash 
```

2）我们创建文件。bash_profile

我们必须在已创建的用户家中创建此文件，并且我们要为其应用权限。文件内容如下，

```
if [-f ~/.bashrc]; then
    . ~/.bashrc
fi

PATH = $HOME/apps
export PATH 
```

3)我们避免改变

创建文件后，我们将阻止任何人对文件进行更改。

```
shell> chattr +i /home/test/.bash_profile 
```

4）我们创建应用程序目录并安装程序“访问”

现在，一旦您完成了所有设置并且只需要创建应用程序并在其中创建一个链接，该链接将指向您希望用户拥有权限的程序。应用程序中的所有程序，用户都可以运行，但是不行。

```
shell> mkdir apps
shell> ln-s /usr/bin/telnet /home/test/apps/ 
```

5）我们发现可行

现在您可以访问系统并验证它是否正常工作。

```
shell> ssh test@remote
test@remote password:

shell@remote> ls
-rbash: ls: command not found
shell@remote> cd
-rbash: cd: command not found
shell@remote> telnet
telnet> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T15:22:24.330

团队：

这是我的方法......

我创建了一个包含已接受命令列表的小脚本，根据命令，将控制执行以避免出现问题。我不确定它是否在问题的范围内。示例代码在 Windows 中具有命令，但您也可以在 Linux 中使用它...

```
<?php
ini_set('display_errors',1); 
error_reporting(E_ALL);

function executeCommand($my_command){
    $commandExclusions = array ('format', 'del');

    if (in_array(strtolower($my_command),$commandExclusions)) {
        echo "Sorry, <strong>".$my_command." </strong> command is not allowed";
        exit();
    }
    else{
        echo exec($my_command, $result, $errorCode);
        implode("n", $result);
    }
}
echo "<h3>Is it possible to restrict what commands php can pass through exec at an OS level?</h3><br>";
echo "********************************<br>";
//test of an accepted command
echo "test of an accepted command:<br>";
executeCommand("dir");
echo "<br>********************************<br>";
echo "test of an unaccepted command:<br>";
//test of an unaccepted command
executeCommand("format");
echo "<br>********************************<br>";
?> 
```

**输出：**

是否可以在操作系统级别限制 php 可以通过 exec 传递的命令？

* * *

接受命令的测试：117 Dir(s) 11,937,468,416 字节空闲

* * *

测试未接受的命令：对不起，格式命令是不允许的

# ios - 在 iPhone 地图上显示多条路线的选项 (iOS 4+)

> ID：15584336
> 
> 赞同：2
> 
> 时间：2013-03-23T07:15:30.777
> 
> 标签：ios, google-maps, mapkit, routes, apple-maps

我正在尝试开发一个iPhone应用程序（具有地图路由功能），我需要大家的建议（指导）。

以下是一些规格：

1.  该应用程序将在装有 iOS 4+ 的 iPhone 上运行。
2.  该应用程序将具有地图功能。
3.  在应用程序中，按照给定的顺序给定“几个位置”（为了让事情变得不那么复杂），地图将在地图上的每个位置之间绘制路线。
4.  单击任何位置将显示另一个页面，其中显示有关该位置的一些信息。
5.  可以在两个位置之间选择替代路线（我认为这是不可能的，但如果有人知道任何可以做到这一点的框架，请告诉我）。

我做了一些研究，在 iPhone 上使用 Map 很容易使用 MapKit（它在 iOS 3.0 之后可用）。我按照[本](http://www.raywenderlich.com/21365/introduction-to-mapkit-in-ios-6-tutorial)教程进行操作，一切似乎都很简单。但是，如果我想在地图上绘制路线，我需要 CSV 格式的路线数据。但是，我没有这些数据（是的！我很烂）。

在 iOS 5.1 之前，MapKit 使用谷歌地图，我在某处读到谷歌地图的使用条款和条件，它禁止人们在地图上绘图（如果我错了，请纠正我）。

为了检索路线数据，我想我必须通过谷歌或苹果来获取它（我不知道是否可能）。我只是想知道 Apple Map 或 Google Map 是否有 API 来检索这些？

如果没有，我想出的另一种选择是使用网络视图，并在 Google 地图上显示我的地图路线。我只是想知道 Google Map API 是否允许我插入多个位置并显示所有路线？

我真的需要一些建议......我被所有这些问题所困扰......谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T08:47:11.070

按照[这个示例](http://developer.apple.com/library/ios/#samplecode/Breadcrumb/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010048)- MKOverlay 是要走的路。另一个[例子是here](http://iosguy.com/tag/mkoverlayview/)。

# java - 我应该使用哪个流在 java 中通过网络传输自定义文件（如 jpeg 或 mp3）？

> ID：15584338
> 
> 赞同：0
> 
> 时间：2013-03-23T07:15:40.837
> 
> 标签：java, sockets, file-upload

我试图用java编写服务器和客户端来传输文件。但是接收到的文件很奇怪，看起来充满了奇怪的字节，并且不会被任何应用程序打开，但是它的大小与源文件完全相同。我不知道问题出在哪里！是关于编码的吗？

服务器端：

```
import java.net.*;
import java.io.*;

public class MyServer {

public static void main(String[] args) {
    char sp = File.separatorChar;
    String home = System.getProperty("user.home");
    try {
        ServerSocket server = new ServerSocket(5776);
        while (true){
            Socket connection = server.accept();
            try {
                String FileName=home+sp+"33.jpg";
                File inputFile = new File(FileName);
                FileInputStream Fin = new FileInputStream(inputFile);
                long fileLength = inputFile.length();
                byte[] bt= new byte[(int) fileLength];
                DataOutputStream Oout = new DataOutputStream(connection.getOutputStream());
                Oout.writeLong(fileLength);
                Oout.write(bt);
                Oout.flush();
                Oout.close();
                connection.close();
            } catch (IOException ex) {}
            finally {
                try {
                    if(connection!= null) connection.close();
                } catch (IOException e) {}
            }
        }
    } catch (IOException e) {

        System.err.println("There is a server on port 5776");
    }

}

} 
```

客户端：

```
import java.net.*;
import java.io.*;

public class Client {

public static void main(String[] args) {
    byte[] IP={(byte)192,(byte)168,1,7};
    char sp = File.separatorChar;
    String home = System.getProperty("user.home");
    String SharingPathString = home+sp+"File Sharing";
    String FileName = SharingPathString+sp+"file.jpg";
    try {
        InetAddress add = InetAddress.getByAddress(IP);
        Socket theSocket= new Socket("Shayan-8",5776);
        DataInputStream in= new DataInputStream(theSocket.getInputStream());
        final long FileLength = in.readLong();
        System.out.println("FileLength: "+FileLength);
        File SharingPath = new File(SharingPathString);
        if(!SharingPath.exists())
            SharingPath.mkdir();
        File outputFile = new File(FileName);
        if(outputFile.exists())
            outputFile.delete();
        //outputFile.createNewFile();
        FileOutputStream Fos = new FileOutputStream(FileName);
        DataOutputStream dos = new DataOutputStream(Fos);
        byte[] buffer = new byte[100];
        int count=0;
        long current=0;
        while(current < FileLength && (count=in.read(buffer,0,(int)Math.min(FileLength-current, buffer.length)))!=-1)
            {Fos.write(buffer, 0, count);
                current+=count;
                }
//      while((count=in.read())!=-1)
//          dos.write(count);
        dos.close();
        Fos.close();
    } catch (UnknownHostException uhe) {
        System.err.println(uhe);
    } catch (IOException e) {
        System.err.println(e);
        }

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T09:17:46.297

您还没有将任何内容读*入* `bt[]`. 因此，您正在编写正确数量的空字节。

# ruby-on-rails - 在 Heroku 上正确配置 Unicorn 和 Sidekiq

> ID：15584339
> 
> 赞同：10
> 
> 时间：2013-03-23T07:15:41.953
> 
> 标签：ruby-on-rails, heroku, ruby-on-rails-3.2, unicorn, sidekiq

我遇到了`ActiveRecord::StatementInvalid (PG::Error: SSL error: decryption failed or bad record mac`错误，所以我遵循了[关于将 Unicorn 部署到 Heroku 的指南](https://devcenter.heroku.com/articles/rails-unicorn)，它似乎已经修复了它。然而，在[警告](https://devcenter.heroku.com/articles/rails-unicorn#caveats)下，它显示了如何`Resque`为这样的设置进行配置 - 我是否必须做类似的事情`Sidekiq`？

Heroku 的示例代码：

```
before_fork do |server, worker|

  ...

  # If you are using Redis but not Resque, change this
  if defined?(Resque)
    Resque.redis.quit
    Rails.logger.info('Disconnected from Redis')
  end
end

after_fork do |server, worker|

  ...

  # If you are using Redis but not Resque, change this
  if defined?(Resque)
    Resque.redis = ENV['REDIS_URI']
    Rails.logger.info('Connected to Redis')
  end
end 
```

这是我目前设置的：

配置/独角兽.rb

```
worker_processes 2
timeout 30
preload_app true

before_fork do |server, worker|
  Signal.trap 'TERM' do
    puts 'Unicorn master intercepting TERM and sending myself QUIT instead'
    Process.kill 'QUIT', Process.pid
  end
  defined?(ActiveRecord::Base) and ActiveRecord::Base.connection.disconnect!
end  

after_fork do |server, worker|
  Signal.trap 'TERM' do
    puts 'Unicorn worker intercepting TERM and doing nothing. Wait for master to send QUIT'
  end
  defined?(ActiveRecord::Base) and ActiveRecord::Base.establish_connection
end 
```

配置/初始化程序/sidekiq.rb

```
require 'sidekiq'

Sidekiq.configure_client do |config|
  config.redis = { :size => 1 }
end

Sidekiq.configure_server do |config|
  config.redis = { :size => 6 }
end 
```

档案

```
web: bundle exec unicorn -p $PORT -E $RACK_ENV -c ./config/unicorn.rb
worker: bundle exec sidekiq -e production -c 4 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-05-04T23:04:28.167

从 sidekiq 的 2.9.0 版本开始，在 unicorn/passenger 中不需要配置`after_fork`。

以下是[版本 2.9.0 的发行说明，](https://github.com/mperham/sidekiq/blob/master/Changes.md#290)其中提到了该问题。

这是解决分叉连接的已[解决问题。](https://github.com/mperham/sidekiq/issues/794)

最后，这里是[维护者的评论，](https://github.com/mperham/sidekiq/issues/120#issuecomment-17149729)确认`after_fork`不再需要配置。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-15T07:11:58.717

这就是我所拥有的并且它有效：

配置/独角兽.rb

```
worker_processes Integer(ENV["WEB_CONCURRENCY"] || 5)
timeout 15
preload_app true

before_fork do |server, worker|
  Signal.trap 'TERM' do
    puts 'Unicorn master intercepting TERM and sending myself QUIT instead'
    Process.kill 'QUIT', Process.pid
  end

  defined?(ActiveRecord::Base) and ActiveRecord::Base.connection.disconnect!
end

after_fork do |server, worker|
  Signal.trap 'TERM' do
    puts 'Unicorn worker intercepting TERM and doing nothing. Wait for master to send QUIT'
  end

  defined?(ActiveRecord::Base) and ActiveRecord::Base.establish_connection

  Sidekiq.configure_client do |config|
    config.redis = { size: 1, namespace: 'sidekiq' }
  end
end 
```

配置/初始化程序/sidekiq.rb

```
ENV["REDIS_URL"] ||= "redis://localhost:6379"

Sidekiq.configure_server do |config|
  config.redis = { url: ENV["REDIS_URL"], namespace: 'sidekiq' }
end

unless Rails.env.production?
  Sidekiq.configure_client do |config|
    config.redis = { url: ENV["REDIS_URL"], namespace: 'sidekiq'  }
  end
end 
```

注意：我`thin`在开发和`unicorn`heroku 上使用。

# apache - 仅通过公共密钥访问 Apache 服务器

> ID：15584344
> 
> 赞同：0
> 
> 时间：2013-03-23T07:16:39.580
> 
> 标签：apache, security

是否可以以类似于 ssh-server 可以通过公钥限制访问的方式限制对 apache Web 服务器的公共访问？

**设置：**
我有一个带有 apache 和 web 应用程序的微型服务器。此应用程序只需少于 10 个用户访问。我想排除所有其他人，尤其是。机器人、黑客等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T10:52:54.197

这是一个想法：使用 ssh 隧道和防火墙网络服务器，因此它只接受本地地址。

# excel - 在 Excel 中根据下拉列表隐藏行

> ID：15584345
> 
> 赞同：1
> 
> 时间：2013-03-23T07:16:54.437
> 
> 标签：excel, excel-formula, vba

这基本上是一个邮件模板，包含 3 种不同类型的内容。
我有一个带有组合框列表的 Excel 表。该列表具有值 1,2 和 3。以及 3 种不同类型的内容。当其中任何一个被选中时。其余内容必须隐藏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T07:44:09.823

假设您`Range("A1")`使用不同的选项设置了验证选项（在我的示例中为 1-3）。在适当的 Sheet 模块中放入以下代码并根据需要进行更改。

```
Private Sub Worksheet_Change(ByVal Target As Range)
If Target.Address = "$A$1" Then
Dim rngOpt1 As Range
Dim rngOpt2 As Range
Dim rngOpt3 As Range
'you doesn't need to put rows references here
'as we deal with it later
    Set rngOpt1 = Range("b10:c15")   'first area to be hidden
    Set rngOpt2 = Range("d16:e20")   'second...
    Set rngOpt3 = Range("f21:g25")   'you can guess
If Range("A1") = 1 Then 'your validation cell
    rngOpt1.EntireRow.Hidden = False
    rngOpt2.EntireRow.Hidden = True
    rngOpt2.EntireRow.Hidden = True
ElseIf Range("A1") = 2 Then
    rngOpt1.EntireRow.Hidden = True
    rngOpt2.EntireRow.Hidden = False
    rngOpt2.EntireRow.Hidden = True
Else
    'you can do it on you own... :)
End If
End If
End Sub 
```

每次更改 A1 中的值时，都会隐藏相应的行范围。我并不特别为它的效率感到自豪，但这是我的第一个想法。

# c# - 如何为 EF 5.0 Code First WCF DataService 添加安全性

> ID：15584351
> 
> 赞同：1
> 
> 时间：2013-03-23T07:18:01.987
> 
> 标签：c#, entity-framework, wcf-data-services, wcf-security

我创建了几个 POCO 然后创建了一个 DbContext (FooDbContext) - 然后我从 DataService< FooDbContext > calll FooDatService 创建了一个 DataService 类设备。我可以在我的 silverlight 应用程序中访问我的所有数据，如果我启动 Web 浏览器，我可以按预期通过 URL 访问它。现在我只想在成功登录后才允许使用 DataService。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T22:28:55.147

您可以向 WCF 服务添加服务授权管理器，以将该服务的所有方法和端点置于访问控制之下，而无需修改服务的任何实现。

创建并启动您的 WCF 服务：

```
 Uri[] restUris = new Uri[] { new Uri(baseUri, "Api/v1/") };
    // substitute your service host type here. I'm using WCF OData DataServiceHost
    restAPIServiceHost = new DataServiceHost(typeof(API.RestAPIService), restUris);

    var saz = restAPIServiceHost.Description.Behaviors.Find<ServiceAuthorizationBehavior>();
    if (saz == null)
    {
        saz = new ServiceAuthorizationBehavior();
        restAPIServiceHost.Description.Behaviors.Add(saz);
    }

    saz.ServiceAuthorizationManager = new MyServiceAuthorizationManager();

    restAPIServiceHost.Open(); 
```

以上也可以通过 web.config 魔术来完成。

在您的 MyServiceAuthorizationManager 实现中：

```
 public class MyServiceAuthorizationManager: System.ServiceModel.ServiceAuthorizationManager
        {
            public override bool CheckAccess(OperationContext operationContext, ref Message message)
            {
                var reqProp = message.Properties[HttpRequestMessageProperty.Name] as HttpRequestMessageProperty;
                var authHeader = new AuthorizationHeader(reqProp.Headers[HttpRequestHeader.Authorization]);

                bool authorized = // your code to decide if caller is authorized;

                if (!authorized)
                {
                    var webContext = new WebOperationContext(operationContext);
                    webContext.OutgoingResponse.StatusCode = HttpStatusCode.Unauthorized;

                    // optional: give caller hints where to go to login
                    webContext.OutgoingResponse.Headers.Add( HttpResponseHeader.WwwAuthenticate, String.Format("Bearer realm=\"{0}\"", baseUri.AbsoluteUri));
                }

                return authorized;
            }
        } 
```

在将请求分派到 WCF 实现方法之前，将为 WCF 服务收到的每个请求调用此`CheckAccess`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T09:27:56.193

我在 3 年前写过这样的博客

[http://netpl.blogspot.com/2010/04/aspnet-forms-authentication-sharing-for.html](http://netpl.blogspot.com/2010/04/aspnet-forms-authentication-sharing-for.html)

这个想法是重用表单cookie来保护您的调用，以便只允许登录用户调用服务。

# mysql - SQL 排序依据和 SQL 日期

> ID：15584352
> 
> 赞同：0
> 
> 时间：2013-03-23T07:18:04.610
> 
> 标签：mysql

我有 2 个与 SQL 查询相关的疑问

```
身份证名称更新
1 一些 2013-05-03
2 索姆 2013-05-08
3 smee 2013-06-05

```

1.  我如何列出特定月份的项目（我想要所有记录，不指定年份和日期我只想检查月份）

2.  如何按字母顺序排列名称并将其排列为名称组，例如（限制记录数=10）

数组 A = 以 A 开头的名称 数组 B = 以 B 开头的名称

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T07:27:12.313

`MONTH`从一个`DATE`或类型的字段中获取最简单的方法`DATETIME`是使用 MySQL 的 date-time 函数[`MONTH()`](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_month)。

对于您的查询，应为：

```
SELECT *
FROM tblName
WHERE MONTH( `update` ) = <month Number such as 5> 
```

* * *

第二个需要更复杂的查询。我宁愿使用 php 更好地进行分组（因为我对该语言有更多的控制权）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T07:26:50.337

您可以简单地使用字段的数据类型 as`DATE`或者您可以将任何日期存储为[**unix 时间戳**](http://en.wikipedia.org/wiki/Unix_time)，然后在您想要显示它时进行转换。

```
Example: 1363979714 (ISO 8601:2013-03-22T19:15:14Z) 
```

如果您想在特定日期列出项目，您可以这样编写查询：

月：

```
 Select * from tableName where update like '%-5-%' 
```

天：

```
 Select * from tableName where update like '%-16' 
```

年：

```
 Select * from tableName where update like '2013-%' 
```

# c# - 操作背后的代码/为变量提供自定义名称/组合名称

> ID：15584353
> 
> 赞同：0
> 
> 时间：2013-03-23T07:18:16.567
> 
> 标签：c#, windows-phone-8, windows-phone

所以我的问题是，我想要动态设置名称，如下所示：

```
for(int i=0;i<5;i++)
        {
            CheckBox i = new CheckBox();

        } 
```

2 不好它不起作用^^ 是否甚至可以从变量中获取类似的值，并将它们转换为变量名？还是我应该静态设置这些东西？

哦，是的，在设置类似的东西之后，我想做这样的事情来设置内容，基本上它会进入同一个循环

费。我想要 5 个按钮，我在 AppResources 中创建了 5 个字符串，它们的名称如下：a0、a1、a2、a3、a4；

所以现在我正在创建按钮并使用内容。

```
for(int i=0;i<5;i++)
        {
            CheckBox i = new CheckBox();
            i.Content = Resources.AppResources.a+"i";

        } 
```

那么，有谁可以帮忙呢？^^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T07:23:05.733

您需要使用一个数组：

```
ArrayList<CheckBox> checkboxes = new ArrayList<CheckBox>();
for(int i=0;i<5;i++)
{
    checkboxes.Add(new CheckBox());
} 
```

# javascript - 使每个表格列可见的按钮

> ID：15584361
> 
> 赞同：0
> 
> 时间：2013-03-23T07:20:06.577
> 
> 标签：javascript, jquery, jquery-ui, datatables

我使用以下代码来切换表中列数组的可见性（使用 DataTables JQuery 插件）

```
function fnShowHide( iCols )
    {
    var i, iCol;
    var oTable = $('#statstable').dataTable();

    for (i = 0; i < iCols.length; i += 1)
        {
        iCol = iCols[i];
        var bVis = oTable.fnSettings().aoColumns[iCol].bVisible;
        oTable.fnSetColumnVis( iCol, bVis ? false : true );
        }
    } 
```

我会让它像这样工作......

```
<button id="button">
    <a href="javascript:void(0);" onclick="fnShowHide([0,4,10,11,12,13,14,15,16,17,18]);">Simplify</a>
</button> 
```

问题是......如果我在一个页面上有多个这样的按钮，列就会混淆。

如何创建一个显示所有列的新函数，无论其可见性如何，甚至更好，如何使此按钮使所有内容可见，然后关闭数组中的那些？

谢谢 - 这可能很简单，但我对 javascript 还是很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T07:25:16.947

如何拥有以下代码：

```
<input id="myButton" value="Click Me!" />

$("#myButton").click(function () {
    showAllColumns();
});

function showAllColumns() {

    var i, iCol;
    var oTable = $('#statstable').dataTable();

    var length = /* get the number of columns */;

    for (i = 0; i < length; i += 1) {
        iCol = i;
        oTable.fnSetColumnVis( iCol, true );
    }
} 
```

# android - 如何处理 Android 中有关 Image Uploader 的代码？

> ID：15584363
> 
> 赞同：1
> 
> 时间：2013-03-23T07:20:47.080
> 
> 标签：android, image, upload, httpclient

最新更新..我有上传图片的代码..但我不知道这个代码要做什么..？[来自http://monstercoda.wordpress.com/2012/04/15/android-image-upload-tutorial-part-i/](http://monstercoda.wordpress.com/2012/04/15/android-image-upload-tutorial-part-i/)的源代码

代码如下：

```
public class MainActivity extends Activity {
Uri currImageURI;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Button gallery_btn = (Button)findViewById(R.id.gallerybtn);
    gallery_btn.setOnClickListener(new OnClickListener(){
        public void onClick(View view){
            //to open up a gallery browser
            Intent intent = new Intent();
            intent.setType("image/*");
            intent.setAction(Intent.ACTION_GET_CONTENT);
            startActivityForResult(Intent.createChooser(intent,"Select Picture.."),1);

            (getRealPathFromURI(currImageURI);
        }

    });

}

// To handle when an image is selected from the browser
public void onActivityResult(int requestCode, int resultCode, Intent data){
    if (resultCode == RESULT_OK) {
        if (requestCode == 1) {
            // currImageURI is the global variable I’m using to hold the content:
            currImageURI = data.getData();
            String s = ("Current image Path is ----->" + getRealPathFromURI(currImageURI));
            TextView tv_path = (TextView) findViewById(R.id.path);
            tv_path.setText(getRealPathFromURI(currImageURI));
        }
 HttpUploader uploader = new HttpUploader();
            try {
                uploader.execute(getRealPathFromURI(currImageURI));
    }
}

//Convert the image URI to the direct file system path of the image file
public String getRealPathFromURI( Uri contentUri) {
    String [] proj={MediaStore.Images.Media.DATA};
    android.database.Cursor cursor = managedQuery(contentUri,
            proj,     // Which columns to return
            null,     // WHERE clause; which rows to return (all rows)
            null,     // WHERE clause selection arguments (none)
            null);     // Order-by clause (ascending by name)
    int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
    cursor.moveToFirst();
    String c = cursor.getString(column_index); 
    return c;
}
} 
```

我的 httpUploader 就像他们提供的一样简单：

```
public class HttpUploader extends AsyncTask<String, Void, String> {

 protected String doInBackground(String... path) {

     String outPut = null;

     for (String sdPath : path) {

         Bitmap bitmapOrg = BitmapFactory.decodeFile(sdPath);
         ByteArrayOutputStream bao = new ByteArrayOutputStream();

         //Resize the image
         double width = bitmapOrg.getWidth();
         double height = bitmapOrg.getHeight();
         double ratio = 400/width;
         int newheight = (int)(ratio*height);

         System.out.println("———-width" + width);
         System.out.println("———-height" + height);

         bitmapOrg = Bitmap.createScaledBitmap(bitmapOrg, 400, newheight, true);

         //Here you can define .PNG as well
         bitmapOrg.compress(Bitmap.CompressFormat.JPEG, 95, bao);
         byte[] ba = bao.toByteArray();
         String ba1=Base64.encodeBytes(ba);

         String k = "uploading image now ——–" + ba1 ;
         Log.e("k contains", k);

         ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
         //store path for image name and id for each profile id.
         nameValuePairs.add(new BasicNameValuePair("image", ba1));
         nameValuePairs.add(new BasicNameValuePair("path", sdPath));
         nameValuePairs.add(new BasicNameValuePair("id", id));

         try {
             HttpClient httpclient = new DefaultHttpClient();
             HttpPost httppost = new HttpPost("192.168.1.1/upload.php"); // which request for $_POST['image'];
             httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

             HttpResponse response = httpclient.execute(httppost);
             HttpEntity entity = response.getEntity();                

             // print responce
             outPut = EntityUtils.toString(entity);
             Log.i("GET RESPONSE—-", outPut);

             //is = entity.getContent();
             Log.e("log_tag ******", "good connection");

             bitmapOrg.recycle();

         } catch (Exception e) {
             Log.e("log_tag ******", "Error in http connection " + e.toString());
         }
     }
     return outPut;
 }      
 } 
```

PHP文件保存到数据库：

```
 if (isset($base)) {
$base = $_REQUEST["image"];
$filepath = $_REQUEST["path"];
$id = $_REQUEST["id"];

 $image_name = "/image/".$filepath;

 // base64 encoded utf-8 string
 $binary = base64_decode($base);

 // binary, utf-8 bytes

header("Content-Type: bitmap; charset=utf-8");

 $file = fopen($image_name, "wb");

fwrite($file, $binary);

fclose($file);

$result = "UPDATE profile SET image = '$image_name' WHERE RID = '$id'");

if(mysql_affected_rows > 0){
echo json_encode ("success!");
}else{
echo json_encode ("failed!");
}

} else {

die("No POST");
}

?> 
```

或者如果代码不合适......可以为初学者提供任何指导吗？那里有太多版本的代码..我可以稍微理解这一点，因为它比其他版本更简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T07:34:40.067

`.get()`从您的`asynctask`通话中删除。放入`HttpUploader uploader = new HttpUploader();`和`Object image_name = uploader.execute(getRealPathFromURI(currImageURI));` 没有`.get()`in `onActivityResult()`。因为只有`onActivityResult()`你知道文件名。

# matlab - 在 MATLAB 中通过单行语句替换 for 循环

> ID：15584364
> 
> 赞同：1
> 
> 时间：2013-03-23T07:20:51.227
> 
> 标签：matlab, for-loop, vectorization

我有这个需要运行数百次的功能。它包含一个`for`循环，我试图删除它以使函数更快。有人可以帮我用单行命令替换循环。

```
nn = 4;
T = [5 1 2; 5 2 3; 5 3 4; 5 4 1];
p = [0 0; 1 0; 1 1; 0 1; 0.5 0.5];
A = zeros(nn,1);    
for i=1:nn
    sctr = T(i,:); pT = p(sctr,:);
    A(i) = 1/2*det([pT,ones(3,1)]);  
end 
```

也许删除`det`并用实际公式替换它来计算行列式会有所帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T08:46:29.137

您拥有的 For 循环解决方案可能是最快的。其他选项包括：

```
B = [p(T',:),ones(3*size(T,1),1)] 
C= mat2cell(B,[3,3,3,3],3)
D= cellfun(@det,C); 
```

或者你也可以写而不是`D`这个表达式

```
D = arrayfun(@(x) det(C{x}), 1 : size(C, 1)); 
```

ETC...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T07:54:15.370

我认为这会起作用（我无法测试它，因为我没有我的环境）

```
pT = p(T(1:nn,:),:);
A = 1/2 * det([pT, ones(3, 1)]); 
```

您显然可以从上面的代码中编写一行代码，但这会不太可读。

如果它不起作用并且您保留 for 循环，至少考虑矩阵预分配（对于 A、pT 和 sctr）这将加快您的程序。

# jquery - jquery on search hide不隐藏所有出现的id

> ID：15584368
> 
> 赞同：0
> 
> 时间：2013-03-23T07:21:21.797
> 
> 标签：jquery, findall

我正在使用

`$(list).find("#disappear").hide();`

**在搜索**中隐藏我的标题。它正在工作，但它只隐藏第一次出现的 li 和 id 消失。它不会隐藏所有具有#disappear 的内容

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T07:23:41.663

使用 ID 的类实例，因为所有 id 属性值在网页上都是唯一的。

```
$(list).find(".disappear").hide(); 
```

# r - 使用一组样本插入新值

> ID：15584371
> 
> 赞同：2
> 
> 时间：2013-03-23T07:22:18.960
> 
> 标签：r, curve-fitting, linear-regression

我是 R 新手。有一组样本和目标，我想拟合一个数值函数来解决新样本的目标。我的示例是以秒为单位的时间，表示用户在这个地方停留的持续时间：

```
>b <- c(101,25711,13451,19442,26,3083,133,184,4403,9713,6918,10056,12201,10624,14984,5241,
+21619,44285,3262,2115,1822,11291,3243,12989,3607,12882,4462,11553,7596,2926,12955,
+1832,3539,6897,13571,16668,813,1824,10304,2508,1493,4407,7820,507,15866,7442,7738,
+5705,2869,10137,11276,12884,11298,...) 
```

首先，我将它们转换为除以 3600 的小时数，并且我想将函数拟合为持续时间的 pdf：

```
> b <- b/3600
> hist(c,xlim=c(0,13),prob=T,breaks=seq(0,24,by=0.5))
> lines(density(x), col=red) 
```

![在此处输入图像描述](../Images/e3aed9e2a2b60505258dbfede18dab01.png)

我想拟合图中的红线，并插入新值以找到这个地方特定持续时间的概率，例如 p(duration = 1.5hours)。

感谢您的关注！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T20:50:15.930

如上所述，您可以`fitdistr`在`MASS`包中安装发行版。如果您使用连续分布，您将有时间在一个区间内的概率。如果您使用离散分布，您可以计算某个时间（以小时为单位）的概率。

对于连续情况，您可以使用 Gamma 分布：`fitdistr(b, "Gamma")`将为您提供参数估计值，然后您可以使用`pgamma`这些估计值和区间。

对于离散情况，您可以使用泊松分布：`fitdistr(b, "Poisson")`然后使用`dpois`具有估计值和所需值的函数。

要决定使用哪一个，我只需用直方图绘制 pdf 并查看一下。

# php - 使用 xampp 发送电子邮件

> ID：15584372
> 
> 赞同：0
> 
> 时间：2013-03-23T07:22:21.750
> 
> 标签：php, windows, email, xampp

我可以使用发送电子邮件`XAMPP`吗？目前我正在`Mercury`作为`XAMPP`邮件服务器运行。

我想在我的笔记本电脑上测试一个需要在 2 小时后发送电子邮件的应用程序。我一直在尝试使用该`mail`功能发送电子邮件，但我没有收到任何邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T07:32:25.357

# java - 最大输入不正确

> ID：15584379
> 
> 赞同：-1
> 
> 时间：2013-03-23T07:22:49.333
> 
> 标签：java, numbers

正如标题所述，我试图找到最大值和最小值、偶数和奇数的数量以及所有输入数字的平均值。

问题。当我运行我的代码时，我的奇数和偶数计数器似乎读取它们的相反值，奇数会读取偶数输入，偶数会读取奇数输入。至于我的平均值，我不知道它有什么问题，我只知道它只会找到适当分数的平均值。

另外，当我输入退出时，我得到了我最大的数字 214XXXXXXXX

我的输出示例将粘贴在最后。

```
System.out.println("Enter a sequence of integers. Any non-integer to quit");
Scanner scan = new Scanner(System.in);
int min = Integer.MAX_VALUE;
int max = 0;
int count = 0;
int sum = 0;
int oddsCounter = 0;
int evensCounter = 0;
int getInt;
double average = 0;

while (scan.hasNextInt()) {

    getInt = scan.nextInt();
    if (getInt % 2 == 0) {
        evensCounter++;
        System.out.println("even: " + evensCounter);
    } else {
        oddsCounter++;
        System.out.println("odd: " + oddsCounter);
    }

    if (getInt < min) {
        min = getInt;
    } else if (getInt > max) {
        max = getInt;
    }

    sum += getInt;
    System.out.println("sum " + sum);
    count++;
    System.out.println("count " + count);
    average = (double) sum / (count);
    System.out.println("average " + average);
}

System.out.println("smallest: " + min);
System.out.println("largest: " + max);
System.out.println("even: " + oddsCounter);
System.out.println("odd: " + evensCounter);
System.out.println("average: " + average); 
```

结果：

```
Enter a sequence of integers. Any non-integer to quit
9 //input 1
odd: 1
sum 9
count 1
average 9.0
3 //input 2
odd: 2
sum 12
count 2
average 6.0
7 //input 3
odd: 3
sum 19
count 3
average 6.333333333333333
1 //input 4
odd: 4
sum 20
count 4
average 5.0
q //input 5: QUIT
smallest: 1
largest: 7 //This should be 9
even: 0
odd: 4
average: 5.0 
```

结果 2：

```
Enter a sequence of integers. Any non-integer to quit
q //quit
smallest: 2147483647 //This should be 0
largest: 0
even: 0
odd: 0
average: 0.0 
```

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T07:45:30.483

至于您的其他问题，您必须将 min 初始化为 0。之后，检查输入是否是您的第一个，如果是，请设置 min 。

```
boolean isFirst = true;
while (scan.hasNextInt()) {

getInt = scan.nextInt();
if(isFirst)
{
     min = getInt;
     isFirst=false;
}
//Rest of your code 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T07:48:03.987

```
if (getInt < min) {
        min = getInt;
    } else if (getInt > max) {
        max = getInt;
    } 
```

如下所述更改上面的代码。您必须检查这两个条件，因此将 else if 更改为 if。

在如果 - 否则如果

> 一旦满足一个条件，就会执行相应的语句并且不评估剩余的条件。

```
if (getInt < min) {
        min = getInt;
    } 
if (getInt > max) {
        max = getInt;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T07:26:58.120

# 第一的

9 未分配给最大值。由于`9 < min`，代码评估`min = getInt;`并跳过 else if 部分。

它应该是 ：

```
if (getInt < min) 
{
     min = getInt;
} 

if (getInt > max) 
{
     max = getInt;
} 
```

因为一个数字可以同时是`min`和`max`。

# 第二

```
smallest: 2147483647 //This should be 0 
```

发生这种情况是因为您输入了一个字符，但通过使用将输入作为整数扫描`getInt = scan.nextInt();`（以及将输入存储为 int）。

您可以先在输入中将此扫描修复为字符串。[然后，您可以通过创建一个检查方法](https://stackoverflow.com/a/5439547/1031955)来确定输入是否为 int 。：

```
public static boolean isInteger(String s) 
{
    try 
    { 
        Integer.parseInt(s); 
    } 
    catch(NumberFormatException e) 
    { 
        return false; 
    }
    // only got here if we didn't return false
    return true;
} 
```

然后，在进行计算之前检查输入是否为整数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T07:27:08.650

在检查 getInt 是否大于最大值之前取出 else。你需要检查这两个条件，所以不要在那里放其他东西。

# sql-server-2008 - 如何通过子查询获取多列？

> ID：15584381
> 
> 赞同：0
> 
> 时间：2013-03-23T07:23:01.140
> 
> 标签：sql-server-2008, tsql

我想获得会员和他们的照片。每个成员都有 2 张照片。（我不是在谈论个人资料图片）

有 2 个名为 Members 和 MemberPhotos 的表。

这是我的查询不起作用（预期）：

```
SELECT
M.Name as MemberName,
M.LastName as MemberLastName,

(
    SELECT
        TOP 1
        MP.PhotoName
    FROM
        MemberPhotos MP
    WHERE
        MP.MemberID = M.ID
        AND
        MP.IsFirst = 1
) as MemberFirstPhoto,

(
    SELECT
        TOP 1
        MP.PhotoName
    FROM
        MemberPhotos MP
    WHERE
        MP.MemberID = M.ID
        AND
        MP.IsFirst = 0
) as MemberSecondPhoto,

FROM
    Members M 
```

也许有人会说我应该改用内连接，我不想使用内连接，如果我使用它，我会得到多个数据，例如：

```
Name       Surname       PhotoName

Bill       Gates         bill.png
Bill       Gates         bill2.png
Steve      Jobs          steve.jpg
Steve      Jobs          steve2.jpg 
```

你对查询有什么建议？

谢谢。

**编辑：** 这是我想要得到的输出：

```
Name       Surname       FirstPhoto       SecondPhoto

Bill       Gates         bill.png         bill2.png
Steve      Jobs          steve.jpg        steve2.png 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T12:00:44.447

您的示例查询的唯一问题是后面有一个额外的逗号

```
as MemberSecondPhoto 
```

如果你删除它，它工作正常。

[SQL Fiddle 与演示](http://sqlfiddle.com/#!3/85f1b/2)。

但是，虽然该查询现在正在运行，因为您知道每个成员只有两张照片，您可以使用更简单的查询：

```
SELECT
  M.Name as MemberName,
  M.LastName as MemberLastName,
  MPF.PhotoName as MemberFirstPhoto,
  MPS.PhotoName as MemberSecondPhoto
FROM Members M
  LEFT JOIN MemberPhotos MPF ON M.ID = MPF.MemberID AND MPF.IsFirst = 1
  LEFT JOIN MemberPhotos MPS ON M.ID = MPS.MemberID AND MPS.IsFirst = 0 
```

[SQL Fiddle 与演示](http://sqlfiddle.com/#!3/85f1b/4)。

# c# - 如何使用 wpf 应用程序在 Twitter 上共享数据或消息？

> ID：15584383
> 
> 赞同：2
> 
> 时间：2013-03-23T07:23:23.660
> 
> 标签：c#, wpf

我在 Twitter 上实现共享数据时遇到问题。有没有人有使用 wpf 应用程序共享数据的示例代码？

这是 WPF 中遵循的代码：

在这里，我收到 HttpRequest 错误。

```
 private void button1_Click(object sender, RoutedEventArgs e)
    {

        var oauth_consumer_key = "XXX";
        var oauth_consumer_secret = "YYY";

        if(Request["oauth_token"] == null)
        {
            OAuthTokenResponse reqToken = OAuthUtility.GetRequestToken(
                oauth_consumer_key,
                oauth_consumer_secret,
                Request.Url.AbsoluteUri);

            NavigationService nav = NavigationService.GetNavigationService(this);
            nav.Navigate(string.Format("http://twitter.com/oauth/authorize?oauth_token={0}", reqToken.Token, UriKind.Relative));               
        }
        else
        {
            string requestToken = Request["oauth_token"].ToString();
            string pin = Request["oauth_verifier"].ToString();
            var tokens = OAuthUtility.GetAccessToken(
                oauth_consumer_key,
                oauth_consumer_secret,
                requestToken,
                pin);

            OAuthTokens accesstoken = new OAuthTokens()
            {
                AccessToken = tokens.Token,
                AccessTokenSecret = tokens.TokenSecret,
                ConsumerKey = oauth_consumer_key,
                ConsumerSecret = oauth_consumer_secret
            };

            TwitterResponse<TwitterStatus> response = TwitterStatus.Update(
                accesstoken,
                "Testing!! It works (hopefully).");

            if (response.Result == RequestResult.Success)
            {
                MessageBox.Show("we did it!");
            }
            else
            {
                MessageBox.Show("it's all bad.");
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T07:29:47.397

该视频是关于 WebFormApplication asp.net C#。我希望你有一个想法。

首先观看视频并了解概念。

视频：

[https://www.youtube.com/watch?v=TGE1sgMMqU](https://www.youtube.com/watch?v=TGEA1sgMMqU)

源代码：

[http://www.markhagan.me/Samples/Grant-Access-And-Tw​​eet-As-Twitter-User-ASPNet](http://www.markhagan.me/Samples/Grant-Access-And-Tweet-As-Twitter-User-ASPNet)

此外，您可以从该视频下载源代码（请参阅视频下方的链接）

问候

# python - nltk中的退避标记器

> ID：15584387
> 
> 赞同：3
> 
> 时间：2013-03-23T07:23:46.593
> 
> 标签：python, regex, nltk, pos-tagger

我是 python 编码的新手。我想使用 UnigramTagger 和退避（在我的情况下是 RegexpTagger），我一直在努力弄清楚下面的错误是什么。感谢您对此的任何帮助。

```
>>> train_sents = (['@Sakshi', 'Hi', 'I', 'am', 'meeting', 'my', 'friend', 'today'])    
>>> from tag_util import patterns  
>>> from nltk.tag import RegexpTagger  
>>> re_tagger = RegexpTagger(patterns)  
>>> from nltk.tag import UnigramTagger  
>>> from tag_util import backoff_tagger  
>>> tagger = backoff_tagger(train_sents, UnigramTagger, backoff=re_tagger)

Traceback (most recent call last):  
 File "<pyshell#6>", line 1, in <module>  
    tagger = backoff_tagger(train_sents, UnigramTagger, backoff=re_tagger)  
  File "tag_util.py", line 12, in backoff_tagger  
     for cls in tagger_classes:  
TypeError: 'YAMLObjectMetaclass' object is not iterable 
```

这是我在 tag_util 中用于模式和 backoff_tagger 的代码

```
import re  
patterns = [  
    (r'^@\w+', 'NNP'),  
    (r'^\d+$', 'CD'),  
    (r'.*ing$', 'VBG'), # gerunds, i.e. wondering  
    (r'.*ment$', 'NN'),  
    (r'.*ful$', 'JJ'), # i.e. wonderful  
    (r'.*', 'NN')  
]  

def backoff_tagger(train_sents, tagger_classes, backoff=None):
    for cls in tagger_classes:
        backoff = cls(train_sents, backoff=backoff)
    return backoff 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T08:07:14.640

你只需要改变一些东西就可以了。

您得到的错误是因为您无法遍历该类`UnigramTagger`。我不确定您是否还有其他想法，但只需删除`for`循环即可。此外，您需要传递`UnigramTagger`一个表示为s of (word, tag) s`list`的*标记句子*，而不仅仅是一个单词列表。否则，它不知道如何训练。其中一部分可能如下所示：`list``tuple`

```
[[('@Sakshi', 'NN'), ('Hi', 'NN'),...],...[('Another', 'NN'), ('sentence', 'NN')]] 
```

请注意，每个句子本身都是一个`list`. 此外，您可以为此使用来自 NTLK 的标记语料库（我推荐）。

编辑：

在阅读了您的帖子后，在我看来，您既对某些功能的输入/输出期望感到困惑，又缺乏对NLP 意义上的*培训的理解。*[我认为从一开始就阅读 NLTK 书](http://nltk.org/book/ch01.html)会让您受益匪浅。

我很高兴向您展示如何解决此问题，但我认为如果不进行更多研究，您将无法完全了解底层机制。

**tag_util.py （基于您的代码）**

```
from nltk.tag import RegexpTagger, UnigramTagger
from nltk.corpus import brown

patterns = [
    (r'^@\w+', 'NNP'),
    (r'^\d+$', 'CD'),
    (r'.*ing$', 'VBG'),
    (r'.*ment$', 'NN'),
    (r'.*ful$', 'JJ'),
    (r'.*', 'NN')
]
re_tagger = RegexpTagger(patterns)
tagger = UnigramTagger(brown.tagged_sents(), backoff=re_tagger) # train tagger 
```

**在 Python 解释器中**

```
>>> import tag_util
>>> tag_util.brown.tagged_sents()[:2]
[[('The', 'AT'), ('Fulton', 'NP-TL'), ('County', 'NN-TL'), ('Grand', 'JJ-TL'), ('Jury', 'NN-TL'), ('said', 'VBD'), ('Friday', 'NR'), ('an', 'AT'), ('investigation', 'NN'), ('of', 'IN'), ("Atlanta's", 'NP$'), ('recent', 'JJ'), ('primary', 'NN'), ('election', 'NN'), ('produced', 'VBD'), ('``', '``'), ('no', 'AT'), ('evidence', 'NN'), ("''", "''"), ('that', 'CS'), ('any', 'DTI'), ('irregularities', 'NNS'), ('took', 'VBD'), ('place', 'NN'), ('.', '.')], [('The', 'AT'), ('jury', 'NN'), ('further', 'RBR'), ('said', 'VBD'), ('in', 'IN'), ('term-end', 'NN'), ('presentments', 'NNS'), ('that', 'CS'), ('the', 'AT'), ('City', 'NN-TL'), ('Executive', 'JJ-TL'), ('Committee', 'NN-TL'), (',', ','), ('which', 'WDT'), ('had', 'HVD'), ('over-all', 'JJ'), ('charge', 'NN'), ('of', 'IN'), ('the', 'AT'), ('election', 'NN'), (',', ','), ('``', '``'), ('deserves', 'VBZ'), ('the', 'AT'), ('praise', 'NN'), ('and', 'CC'), ('thanks', 'NNS'), ('of', 'IN'), ('the', 'AT'), ('City', 'NN-TL'), ('of', 'IN-TL'), ('Atlanta', 'NP-TL'), ("''", "''"), ('for', 'IN'), ('the', 'AT'), ('manner', 'NN'), ('in', 'IN'), ('which', 'WDT'), ('the', 'AT'), ('election', 'NN'), ('was', 'BEDZ'), ('conducted', 'VBN'), ('.', '.')]] 
```

注意这里的输出。我从标记句子的布朗语料库中得到前两个句子。这是您需要传递给标记器作为输入（如 UnigramTagger）来训练它的那种数据。现在让我们使用我们训练过的标注器`tag_util.py`。

**回到 Python 解释器**

```
>>> tag_util.tagger.tag(['I', 'just', 'drank', 'some', 'coffee', '.'])
[('I', 'PPSS'), ('just', 'RB'), ('drank', 'VBD'), ('some', 'DTI'), ('coffee', 'NN'), ('.', '.')] 
```

有了它，POS 使用您的方法标记了一个句子的单词。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-03T05:44:13.037

如果你正在使用`backoff_tagger`我在想。`UnigramTagger`应该是如下列表中的一项：

```
tagger = backoff_tagger(train_sents, [UnigramTagger], backoff=re_tagger) 
```

我希望它有所帮助。

# android - 如何将文本文件转换为xml文件？

> ID：15584388
> 
> 赞同：2
> 
> 时间：2013-03-23T07:24:07.547
> 
> 标签：android

这是这种情况，我从服务器下载了一个文本文件，它看起来像这样：

```
Home  
Address  
Suburb  
State   
Post Code       
Latitude    
Longitude   
Phone    
Fax   
Curfew Hours Start  
Curfew Hours End  
Website

FirstHome Address   
"123 Street sd" 
FirstHome Address   
HMH  
2223 "Addresss,dsdsd"   
-54.000012  
120.000000  
(03) 1232 1242    
(03) 1232 3244  
Mon-Sun 10pm    
"Mon-Sun 6am"   
http:www.dsdsdsfirsthome.com

2ndHome     
2903 Building 1     
2ndHome         
2HMF     
3875    "2nd Adddedere" 
-00.00001   
002.323232  
(03) 2223 2323  
(03) 1233 4343      
http:dsdd

asdsfadf.com 
```

现在我需要将它转换为一个 XML 文件，应该是这样的：

![在此处输入图像描述](../Images/44728a48c3a8d0decc33397064fe8687.png)

有任何想法吗？先感谢您。

我使用 BufferedReader 从 sdcard 读取文本文件，使用 StreamResult 写入 XML 文件。然后执行这个：

```
TransformerConfigurationException, SAXException {      
SAXTransformerFactory tf = (SAXTransformerFactory) SAXTransformerFactory.newInstance();     
th = tf.newTransformerHandler();   
Transformer serializer = th.getTransformer();     
serializer.setOutputProperty(OutputKeys.ENCODING, "ISO-8859-1");       serializer.setOutputProperty("{http://xml.apache.org/xslt}indent-amount", "4");  serializer.setOutputProperty(OutputKeys.INDENT, "yes");        
th.setResult(aStreamResult);    
th.startDocument();     
atts = new AttributesImpl();    
th.startElement("", "", "Homes", atts); 
```

之后，调用while循环：

```
while ((aString = aBufferedReader.readLine()) != null){          
process(word)          
} 
```

方法 process(word) 是这样的：

TransformerHandler th; AttributesImpl atts;

```
public void process(String s) throws SAXException {         
String[] elements = s.split(" ");           
atts.clear();         
th.startElement("", "", "Home", atts);          
th.startElement("", "", "1stHome", atts);          
th.characters(elements[0].toCharArray(), 0, elements[0].length());         
th.endElement("", "", "1stHome");              
th.startElement("", "", "Address", atts);          
 th.characters(elements[0].toCharArray(), 0, elements[0].length());           
th.endElement("", "", "Address");          
th.endElement("", "", "Home");               
} 
```

之后只需通过调用 closeXML(); 来关闭标签。

```
public void closeXML() throws SAXException {            
th.endElement("", "", "Homes");          
th.endDocument();         
} 
```

问题是我逐行阅读它..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T07:33:30.893

Extract the text form the file first. and then you can create xml document with tags as below using the W3C DOM. Modify the code accordingly.

[http://www.mkyong.com/java/how-to-create-xml-file-in-java-dom/](http://www.mkyong.com/java/how-to-create-xml-file-in-java-dom/). Example of how to create a xml file.

```
 public class modifyXML {

   public modifyXML()
{
 try {

DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
    DocumentBuilder docBuilder = docFactory.newDocumentBuilder();

    // root elements
Document doc = docBuilder.newDocument();
Element question = doc.createElement("question");
doc.appendChild(rootElement);

    Node  option= doc.createElement("option1");
    option.setTextContent("option1");
    question.appendChild(option);

//set up a transformer
TransformerFactory transfac = TransformerFactory.newInstance();
Transformer trans = transfac.newTransformer();

    //create string from xml tree
    StringWriter sw = new StringWriter();
    StreamResult result = new StreamResult(sw);
    DOMSource source = new DOMSource(doc);
    trans.transform(source, result);
    String xmlString = sw.toString();

    OutputStream f0;
byte buf[] = xmlString.getBytes();
f0 = new FileOutputStream("pathofxmlfile"+filename);
for(int i=0;i<buf .length;i++) {
   f0.write(buf[i]);
}
f0.close();
buf = null;
 }
 catch(SAXException e) {
e.printStackTrace();
 }
 catch(IOException e) {
    e.printStackTrace();
 }
 catch(ParserConfigurationException e) {
   e.printStackTrace();
 }
 catch(TransformerConfigurationException e) {
   e.printStackTrace();
 }
 catch(TransformerException e) {
   e.printStackTrace();
 }

}
} 
```

# windows - 如何在批处理文件中正确使用算术和 if 语句？

> ID：15584391
> 
> 赞同：0
> 
> 时间：2013-03-23T07:24:42.840
> 
> 标签：windows, if-statement, batch-file

我刚刚开始在 Windows 上处理我的第一个批处理文件，但我无法通过这部分：

```
SET /p exp= "Enter Arthimetic Expression:"
SET /p ans1= "Enter Expression's Product:"
REM calculating the arthimetic expression:
SET /a ans2= %exp%
IF %ans1% == %ans2% (
ECHO Your answer is right!
) ELSE(
ECHO Your answer is wrong!
ECHO %exp% = %ans2%
) 
```

这个脚本不起作用*，我真的不知道问题出在哪里..（但我估计它涉及 IF 和 ELSE）

*它只是崩溃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T07:53:32.703

我能找到的唯一错误是 ELSE 和 (

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T09:25:32.427

实际上有两个错误。好吧 - 三，也许。

当然在 the`ELSE`和 the之间缺少空格`(`

然后是奇怪的拼写`arithmetic`- 这很关键。DOS 无法处理糟糕的拼写。

好吧，实际上我只是在固定空间后尝试了批处理。它崩溃了。它真的做到了！一次，`it crashed`是准确的。*好吧 - CMD实际上*并没有崩溃，它只是返回到提示符。没有错误信息 - 没有。刚刚再次弹出提示。

所以我`set /p`通过删除`=`. 这似乎解决了问题，因为下次提示愉快地出现，然后一切顺利。

所以我决定解决`jeb`问题。当然 - 输入一个类似的表达式`(3*3)+42`，然后输入一个不正确的结果，你会得到一个丑陋的反对意见。

最后一个行为的原因是语句被解析（解码和验证）任何 %var% 都被它在解析时的值替换。**然后执行语句**。

因此，如果我输入`(3*3)+42`and `56`，原始表达式将被解析为

`IF 56 == 51 (ECHO Your...right!) ELSE (ECHO Your...wrong!&ECHO (3*3)+42 = 51)`

[在批处理中，您可以通过用 分隔命令来级联命令`&`]

现在验证失败，因为在解析器看来，`ELSE`表达式以右括号结尾`3*3`

```
@ECHO OFF
setlocal
SET /p exp="Enter Arithmetic Expression:"
SET /p ans1="Enter Expression's Product:"
REM calculating the arithmetic expression:
SET /a ans2= %exp%
::
:: Way the first
::
FOR /f "delims=" %%i IN ("%exp%") DO (
IF %ans1% == %ans2% (
ECHO Your answer is right!
) ELSE (
ECHO Your answer is wrong!
ECHO %%i = %ans2%
)
)
::
:: Way the second
::
FOR /f "tokens=1*delims==" %%i IN ('set exp') DO (
IF %ans1% == %ans2% (
ECHO Your answer is right!
) ELSE (
ECHO Your answer is wrong!
ECHO %%j = %ans2%
)
)
::
:: Way the third
::
SET refexp=%exp:)=^^)%
IF %ans1% == %ans2% (
ECHO Your answer is right!
) ELSE (
ECHO Your answer is wrong!
ECHO %refexp% = %ans2%
)

ECHO Note: 'SET exp' returns
SET exp 
```

第一个和第二个解决方案使用`FOR /F`命令的分析能力（从提示中看到`FOR /?`。）这里的关键是如果表达式可以被哄到`metavariable`（循环控制变量）中，那么它直到运行时才能被评估，到那时解析器已经验证了表达式。

第三种解决方案是在`"escape"`任何右括号前加上插入符号 ( `^`) - 请参阅`SET /?`文档。当一个字符被转义时，它在批处理语言中的特殊含义被忽略，它变得就像任何其他字符一样。在这种情况下，由于插入符号本身就是具有特殊含义的特殊字符，因此它本身需要通过插入符号进行转义...

但奇怪的是，当我用`=`重新插入后的空格重新运行程序时，它运行得很愉快。奇怪的...

# c# - 如何在函数C#中传递图像

> ID：15584393
> 
> 赞同：1
> 
> 时间：2013-03-23T07:25:04.967
> 
> 标签：c#, image, function

我需要将图像值传递给函数，但我不知道应该使用哪种数据类型？我真的很感谢你的回答...

典型的函数如下所示：

```
void UserInfo(string userName, string userEmail,((image type? )) userImagel)
{

// code here

} 
```

成功登录后，我正在使用 Twitter API。我想使用函数将用户信息保存在数据库中。这样他们就可以将他们的个人资料信息从 twitter 导入我们的网站。

在 Default.aspx 中有这样一行代码：

```
<img src="<%=profileImage%>" /> 
```

在我使用的 Default.aspx.cs

```
public string profileImage=""; 
.
.
.
     profileImage = Convert.ToString(o["profile_image_url"]); 
```

因此，通过使用这种方式，个人资料图片会出现在网页上。很明显，它是作为链接 (URL) 提供的。现在，如何从我的数据库中的那个 URL 保存该图像？以及如何在函数中传递它的值？

此致

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T07:26:58.703

怎么样：

```
void UserInfo(string userName, string userEmail, System.Drawing.Image userImagel)
{

// code here

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T08:02:49.820

通常，除非有特殊原因，否则我会避免将图像二进制文件存储在数据库中。无论如何，正如您所描述的，您还没有图像，您有图像的 URL：

```
private void UserInfo(string userName, string userEmail, string imageURL); 
```

问题是如何处理图像。

如果要获取实际图像，可以使用 下载`System.Net.WebClient`，例如：

```
private void UserInfo(string userName, string userEmail, string imageURL)
{
    WebClient client = new WebClient();
    byte[] imgData = client.DownloadData(imageURL);

    // store imgData in database (code depends on what API you're 
    // using to access the DB
} 
```

但是，还有更多可能和可扩展的场景：

*   您可以将图像的 URL 存储在您的数据库中并在您的网页中使用它，让 Twitter 提供图像（节省您的带宽）。

*   您可以下载图像（如上），然后将其存储在 Web 服务器的硬盘上而不是数据库上。这样，图像请求可以由 Web 服务器而不是数据库来处理，如果您的服务增长（缓存、CDN 等），这通常有很多优势

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T07:30:25.813

创建图像文件的对象：

```
Bitmap bimage = new Bitmap(@"C:\Pictures\2765.jpg"); 
```

并通过你的函数传递这个对象：

```
UserInfo("abc", "abc@yahoo.com", bimage); 
```

接收图像：

```
void UserInfo(string userName, string userEmail, Bitmap userImagel)
{    
// code here    
} 
```

# jquery - 防止子按钮触发分配给父级的 jquery 事件

> ID：15584398
> 
> 赞同：1
> 
> 时间：2013-03-23T07:26:14.317
> 
> 标签：jquery

我试图阻止表格行内的按钮触发附加到该行的事件

此解决方案有效，但我不喜欢它：

```
$('table.orders tr.item').live('click',function(){
    var id=$(this).attr('hrf');
    document.location.href = id;
});
$('table.orders tr.item .pdfIcon').live('click',function(e){
e.stopPropagation();
}); 
```

我不喜欢附加第二个事件以防止第一个事件工作的想法。我应该能够从选择中删除它。

任何人都可以提出更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T07:32:15.590

```
$('table.orders').on('click', 'tr.item', function (event) {
    if (!$(event.target).hasClass('pdfIcon')){
        var id=$(this).attr('hrf');
        document.location.href = id;
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T08:10:54.637

尝试

```
$('table.orders').on('click', 'tr.item', function(event) {
    if ($(event.target).hasClass('pdfIcon')) {
        return;
    }
    var id = $(this).attr('hrf');
    document.location.href = id;
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/qxLvY/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T07:31:09.953

怎么样

```
$('table.orders tr.item').live('click',function(e){
    if ($(e.target).is('.pdfIcon')) return;
    var id=$(this).attr('hrf');
    document.location.href = id;
}); 
```

# sublimetext2 - 你明白这个崇高的片段吗？

> ID：15584399
> 
> 赞同：0
> 
> 时间：2013-03-23T07:26:18.920
> 
> 标签：sublimetext2

```
<snippet>
    <content><![CDATA[getElement${1/(T)|.*/(?1:s)/}By${1:T}${1/(T)|(I)|.*/(?1:agName)(?2:d)/}('$2')]]></content>
    <tabTrigger>get</tabTrigger>
    <scope>source.js</scope>
    <description>Get Elements</description>
</snippet> 
```

我不知道这是什么意思。我明白`$1`，但是什么是`(?1:agName)(?2:d) ???`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:35:10.787

您指出的是用于替换的格式化字符串。它们是 Sublime Text 片段替换的一部分，如[文档](http://sublimetext.info/docs/en/extensibility/snippets.html#substitutions)所述-

```
In addition to the place holder syntax, tab stops can specify more complex operations with substitutions. Use substitutions to dynamically generate text based on a mirrored tab stop.

The substitution syntax has the following syntaxes:

${var_name/regex/format_string/}
${var_name/regex/format_string/options} 
```

因此，在您的代码段中，这些是替换 - `${1/(T)|.*/(?1:s)/}`, `${1:T}`, `${1/(T)|(I)|.*/(?1:agName)(?2:d)/}`。

# iphone - 测试 iPhone 应用

> ID：15584400
> 
> 赞同：-5
> 
> 时间：2013-03-23T07:26:19.833
> 
> 标签：iphone, ios, xcode

嗨，我刚刚在 xcode 上完成了一个 iPhone 应用程序的开发。我确实有 99 美元的开发计划。我在 iPhone 模拟器和实际设备 (iPad) 上测试了该应用程序，它似乎没问题，程序运行良好。我的问题是，在我实际将它发布到苹果商店之前，我如何将这个应用程序发送给我的客户（国外）进行审查？

我尝试发布 IPA，并在我使用的 iPad 设备上进行了测试，但似乎无法正常工作？是否有任何链接逐步正确地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T07:32:11.873

有一个很棒的资源，名为“试飞”。只要您有您希望测试的设备的设备 ID 号，您就可以将您的应用程序发送给任何人。

[https://testflightapp.com/](https://testflightapp.com/)

快乐测试！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T07:29:06.343

您必须注册 Apple 开发计划才能进行分发，即使是 AD-Hoc 分发。

对于 AD-Hoc 发行版，您需要注册每个设备，为此您需要设备的 UDID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T07:33:11.640

如果您希望您的应用仅发布给您的客户，您可以使用 testflight。在此处查看指南

[http://changhoward.blogspot.in/2012/02/ios-developer-how-to-use-testflight-to.html](http://changhoward.blogspot.in/2012/02/ios-developer-how-to-use-testflight-to.html)[测试飞行指南](http://changhoward.blogspot.in/2012/02/ios-developer-how-to-use-testflight-to.html)

在这里您可以发布您的 .ipa 文件。

如果你想发布 .app 文件，你可以查看[diawi 的 .app](http://www.diawi.com/)

& 还有很多其他方法可以做到这一点。但是你会发现这些更好，分别适用于 .ipa 和 .app

享受编程！！

# android - 如何使用android ndk r8e中引入的静态代码分析器？

> ID：15584401
> 
> 赞同：5
> 
> 时间：2013-03-23T07:26:36.953
> 
> 标签：android, android-ndk, analyzer

[http://developer.android.com/tools/sdk/ndk/index.html](http://developer.android.com/tools/sdk/ndk/index.html)

正如上面的链接所暗示的， android ndk r8e ：

> 为 Linux/MacOSX 主机添加了静态代码分析器。有关使用分析器的信息，请参阅 CHANGES.HTML。

在 CHANGES.HTML 中：

> *   为 Linux/MacOSX 主机添加了静态代码分析器
>     1.  对于 ndk-build，导出 NDK_ANALYZE=1 或将其添加到命令行。
>     2.  对于单机版，请参考 ndk-build 示例，以使用 /path/to/standalone/bin//analyzer 运行 scan-build。

我添加了 ndk-build NDK_ANALYZE=1 来构建命令，它构建得很好。但是我究竟如何使用分析器来检测内存问题呢？我没有找到任何文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T01:17:30.667

I found the following line in "Console" of eclipse when building the NDK project. I think it' s the answer.

> scan-build: Using '/opt/android-ndk/toolchains/llvm-3.2/prebuilt/linux-x86_64/bin/armeabi/analyzer' for static analysis

And in the console at last it shows:

> scan-build: 1 bugs found. scan-build: Run 'scan-view /tmp/scan-build-2013-03-29-4' to examine bug reports.

It detects basic errors such as divide by zero, not memory issues, though.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T05:21:42.633

我不确定 NDK_ANALYZE 是否有助于检测内存泄漏。目前我正在使用 Eclipse 的插件 cppcheclipse，可以在[这里](http://code.google.com/a/eclipselabs.org/p/cppcheclipse/)找到。它具有静态分析来检查您的代码是否容易出现内存泄漏。

# c# - c#在同一个foreach循环中设置combobox和texbox的值

> ID：15584410
> 
> 赞同：0
> 
> 时间：2013-03-23T07:27:15.907
> 
> 标签：c#, arrays, combobox, textbox, foreach

我有一组文本框和组合框，我想根据我要进行的循环设置它们的值。preinput1 和 postinput1 是文本框，但是 preinput5 和 postinput5 是组合框。试图将组合框称为文本框的错误：“TextBox tb”。

```
 var StringInput = new object[] { preInput1, preInput5, postInput1, postInput5};
    int stringCount1 = 0;
    int toto = (ArrayCount + StringInput.Length);

    foreach (TextBox tb in StringInput)
    {
      tb.Text = Convert.ToString(energyCalculation.Cells[place[xCSV]].Value);
      xCSV++;
      //stringCount1++;
      ArrayCount++;
    } 
```

我想避免分解它来一一解决。我还能写什么来代替TextBox，或者有更好的方法。

干杯，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T07:31:27.220

尝试以下操作：

```
var StringInput = new Control[] { preInput1, preInput5, postInput1, postInput5};
int stringCount1 = 0;
int toto = (ArrayCount + StringInput.Length);

foreach (var c in StringInput)
{
  c.Text = Convert.ToString(energyCalculation.Cells[place[xCSV]].Value);
  xCSV++;
  //stringCount1++;
  ArrayCount++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T07:34:53.327

试试这个：

```
foreach (object control in StringInput)
{
  var value = Convert.ToString(energyCalculation.Cells[place[xCSV]].Value);

  var textBox = control as TextBox;
  if (textBox != null)
  {
    textBox.Text = value;
  }
  else
  {
    var comboBox = control as ComboBox;
    if (comboBox != null)
    {
      comboBox.Text = value;
    }
  }

  xCSV++;
  //stringCount1++;
  ArrayCount++;
} 
```

# android - 追踪浏览器

> ID：15584411
> 
> 赞同：3
> 
> 时间：2013-03-23T07:27:25.440
> 
> 标签：android, youtube, android-service, browser-history

对于某些客户端的内部应用程序，我们需要实现一个后台服务来跟踪浏览器访问的网站和观看的 YouTube 视频，并将数据报告回 Web 服务。是否有特定的 API 可以即时捕获 URL 和视频并向 Web 服务报告，或者我们的应用程序是否需要定期读取和解析浏览历史记录？

感谢您的回答。

# python - 在 Python 中获取标点符号的字符串常量

> ID：15584412
> 
> 赞同：3
> 
> 时间：2013-03-23T07:28:08.013
> 
> 标签：python, string, punctuation

如何访问 Python 的字符串常量？

我需要获取 Python 文档所说的标点符号列表[`string.punctuation`](https://docs.python.org/3/library/string.html#string.punctuation)

这行不通

```
''.punctuation
''.get_value("punctuation") 
```

我正在尝试的甚至可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-23T07:30:01.200

`string`in`string.punctuation`不是指类型`str`，而是指[字符串模块](http://docs.python.org/2/library/string.html)：

```
In [32]: import string

In [33]: string.punctuation
Out[33]: '!"#$%&\'()*+,-./:;<=>?@[\\]^_`{|}~' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T07:31:14.430

像这样：

```
>>> import string
>>> string
<module 'string' from '/usr/lib/python2.7/string.pyc'>
>>> string.punctuation
'!"#$%&\'()*+,-./:;<=>?@[\\]^_`{|}~' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T07:31:51.287

这些是模块中的变量，因此您不需要使用模块名称的实例。其他人请注意，我假设问题中提到的 python 文档在[这里，](http://docs.python.org/2/library/string.html)
例如

```
import string
print(string.punctuation) 
```

给

```
!"#$%&'()*+,-./:;<=>?@[\]^_`{|}~ 
```

# database - Windows 7 中的 archive_command 错误

> ID：15584413
> 
> 赞同：0
> 
> 时间：2013-03-23T07:28:08.697
> 
> 标签：database, postgresql-9.0

我已经完成了这些步骤：

1.  打开`postgresql.conf`
2.  设置这些参数：

    ```
    wal_level = archive
    archive_mode =on
    archive_command = ''copy %p \\\\192.168.1.10\\Archive\\wals\\%f'' 
    ```

其中 192.168.1.10 是我的 PC IP 地址，Archive 是 D 盘中的共享文件夹。

当我重新启动 postgres 服务时，我在存档文件夹中找到了存档文件。

这就是我想做的。

但现在我想将归档文件存储在另一台 IP 地址为“192.168.1.41”的 PC 中，为此我执行了以下步骤：

1.  我在其中创建了一个文件夹 Archive 和一个子文件夹 WALs。
2.  让每个人都可以共享和完全访问。
3.  `archive_command = ''copy %p \\\\192.168.1.41\\Archive\\wals\\%f''`在我的电脑中更新

现在，当我重新启动 postgres 服务时，远程 PC“192.168.1.41”中没有收到存档文件。

当我打开`pg_log`文件夹查看日志文件时，我发现错误类似于：

```
 The failed archive command was: 
     copy pg_xlog\000000010000000000000009 \\192.168.1.41\PGArchivewals\000000010000000000000009
    The referenced account is currently locked out and may not be logged on to. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T11:39:42.607

您的问题是 PostgreSQL 服务器不在您自己的用户帐户下运行。它在`postgres`用户下运行（对于 PostgreSQL 9.1 和更早版本）或在`NETWORKSERVICE`用户下运行（对于 PostgreSQL 9.2 和更新版本）。

这些帐户都无法访问您保存的密码和连接。他们也无权访问您的用户帐户可能拥有的任何 Active Directory 域权限，因为它们是仅限本地帐户。

要通过服务帐户的 UNC 路径使用 Windows 网络 (SMB/CIFS)，需要进行额外配置，尤其是在连接到本地 PC 以外的地址时。您可能需要一个设置脚本，该脚本`net use`使用指定的密码执行操作。

您可以在远程计算机上的共享上添加权限，以便该`postgres`帐户可以通过在远程计算机上创建一个`postgres`帐户（如果不存在）并确保它具有相同的密码来连接。这不适用于`NETWORKSERVICE`9.2，也不适用于 AD 域。

“正确”的解决方案是更改 PostgreSQL，使其在具有网络访问权限的特权帐户下运行。这并不太难，但需要您编辑或创建 Windows 服务并正确更改 PostgreSQL 数据目录的权限。如果您弄错了，您的 PostgreSQL 安装将停止工作并且可能难以修复。出于这个原因，我不推荐它，除非您非常了解 Windows 服务和配置——在这种情况下，您已经知道为什么您尝试的方法不起作用。

一个更简单的解决方法是使用 FTP 之类的东西在机器之间传输文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T11:31:24.037

在 PC（主从）上设置防火墙并检查您访问 postgres 数据库的帐户的权限

# java - 从其他活动/布局获取路径的问题

> ID：15584423
> 
> 赞同：2
> 
> 时间：2013-03-23T07:29:17.883
> 
> 标签：java, android

首先。我仍然是 android 的菜鸟...我有两个活动/布局

1.  activity_main (Class Main.java) 使用户可以从图库中选择图片
2.  activity_upload (Class Upload.java) 应该显示选中的图片。（以后会有上传到服务器）

我的问题是：activity_upload 中的视图不显示所选图片的预览。我有一个变量“图片路径”。我尝试使用“bundle ...”在activity_upload中提供这个变量

有人可以帮助我吗？谢谢

我现在已经尝试过了，但它也不起作用。

主.java

```
 if (requestCode == RESULT_LOAD_IMAGE && resultCode == RESULT_OK && null != data) {
    Uri selectedImage = data.getData();
    String[] filePathColumn = { MediaStore.Images.Media.DATA };

    Cursor cursor = getContentResolver().query(selectedImage,
            filePathColumn, null, null, null);
    cursor.moveToFirst();

    int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
    String picturePath = cursor.getString(columnIndex);
    cursor.close();
    Intent in = new Intent(Main.this, Upload.class);
    in.putExtra("Path", picturePath);
    startActivity(in);
} 
```

上传.java

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
        String picturePath = getIntent().getStringExtra("Path");
        ImageView imageView = (ImageView) findViewById(R.id.imgView);
        imageView.setImageBitmap(BitmapFactory.decodeFile(picturePath));        
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T07:45:36.130

您的问题是您无法通过 Intent 显式调用 Upload 类，因此您的 Upload 类将不知道图片的路径。

您需要创建 Intent 以切换到 Upload Activity，并且需要使用它打包一些数据。可以用`putExtra()`方法来实现。然后你可以在课堂上通过

```
getIntent().getStringExtra("key"); 
```

**伪代码：**

```
Intent i = new Intent(Main.this, Upload.class);
i.putExtra("picPath", "<someValue>");
startActivity(i); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T07:40:00.373

我看到了几个问题。首先，我不明白你希望得到什么

```
 String picturePath = ptarget.getString("Bilderpfad"); 
```

为此，您必须执行类似的操作

```
intent.putExtra("Bilderpfad", value)"; 
```

当你发送`Intent`到这个`Activity`。其次，你打电话`onActivityResult()`，但这只会在你`Intent`从这个类开始`startActivityForResult()`，然后`setResult()`从被调用的类调用时调用，我看不到你这样做。除非我遗漏了什么，否则您需要[阅读意图文档](http://developer.android.com/reference/android/content/Intent.html)

我认为你很接近，但我相信你缺少一些关于如何`Activities`和`Intents`工作的关键基础知识

# javascript - 使用 CSS 媒体查询时不打印背景

> ID：15584424
> 
> 赞同：0
> 
> 时间：2013-03-23T07:29:19.703
> 
> 标签：javascript, html, css

我想使用 JavaScript 打印支持 CSS 的网页，这是我的简单脚本：

打印.css：

```
@media print {
 body { background-color:red;}
 } 
```

网页.html：

```
<HTML>
<head>
<link rel="stylesheet" type="text/css" href="print.css" media="print" />
</head>
<BODY>
          Hello World!
</BODY>
</HTML> 
```

然后我试了一下，为什么结果（我网页的背景）还是给我白色？我使用 PDF 创建器打印它。

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T08:20:35.840

如果用户在其打印设置中关闭了“打印背景颜色和图像”，则没有 CSS 会覆盖它，因此请始终考虑这一点。这是默认设置。

一旦设置好它就会打印背景颜色和图像，你在那里的东西就会起作用。

它存在于不同的地方。

在 IE9 中，它位于纸张选项下的打印->页面选项中

在 FireFox 中，它位于页面设置 -> 选项下的 [格式和选项] 选项卡中。

# javascript - 我们如何在 jquery on function 中获取特定的动态添加的 td 的 id

> ID：15584439
> 
> 赞同：1
> 
> 时间：2013-03-23T07:31:17.307
> 
> 标签：javascript, jquery

例如我有如下动态内容

```
<table>
<tr>
    <td id='id_1' class='myclass'>1</td>
    <td id='id_2' class='myclass'>2</td>
    <td id='id_3' class='myclass'>3</td> 
```

....我的功能是

```
$(body).on('click','.myclass', function() {
    console.log($(this).attr('id'));        
}); 
```

现在，当我单击 td 时，我得到一些整数，可以说 671 而不是我的 td 的 ID。

请建议我这样做的正确方法以及上面的代码有什么问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T07:37:52.753

我不相信 $(body) 是有效的语法。尝试 $(document) ，它似乎工作得很好：[jsfiddle working](http://jsfiddle.net/p9wmL/1/)

```
$(document).on('click','.myclass', function() {
    alert($(this).attr('id'));        
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T07:38:01.347

尝试使用 $('body') 而不是 $(body)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T07:39:09.497

尝试以下

```
$('body td').click(function() {
    console.log($(this).attr('id'));        
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T07:54:42.873

我检查了您的代码，除了上面提到的正文问题外，它似乎运行良好，因此您的问题必须与您动态添加项目的方式或您正在使用的 jQuery 版本有关。

这是适用于动态添加项目的代码，与您的非常相似。我将所选项目输出到 div 只是为了让它更明显。

```
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"> </script>
<script>
    $(document).ready(function () {
      var counter = 1;
      window.setInterval(function() {
        $('tr').append("<td id='id_"+counter+"' class='myclass'>"+counter+"</td>");
        counter++;
      }, 3000);
      $('body').on('click','.myclass', function() {
        $('#selectedtd').html($(this).attr('id'));  
      });
    });
</script>
</head>
<body>
  <div id="selectedtd"></div>
  <table>
  <tr>
  </tr>
  </table>
</body>
</html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-23T08:23:29.383

您正在使用标签选择器 $(body)，因此它应该用单引号或双引号括起来。否则随它去-

```
$(document).on('click','.myclass', function() {
    alert($(this).attr('id'));        
}); 
```

# php - jQuery Mobile 页面未显示在移动设备上

> ID：15584449
> 
> 赞同：1
> 
> 时间：2013-03-23T07:32:35.703
> 
> 标签：php, javascript, jquery, jquery-mobile, jplayer

我遇到了一些问题，我不确定它可能来自 jQuery Mobile 或 jPlayer。

我试图打开这个页面： http: [//music.x7dtv.com/m/radio/cool93](http://music.x7dtv.com/m/radio/cool93)

它在桌面（Chrome）上正常工作，但当我在移动设备（iOS 和 Android）上尝试时；它显示空白页。除了我包含 jPlayer 的页面外，其他页面（[http://music.x7dtv.com/m/radio ）工作正常。](http://music.x7dtv.com/m/radio)

jPlayer Core 看起来不错，这是我的代码：

```
$(document).ready(function() {
    $("#jquery_jplayer_1").jPlayer({
        swfPath: "http://www.jplayer.org/latest/js/Jplayer.swf",
        ready: function() {
            $(this).jPlayer("setMedia", {
                mp3: "http://ip:8000/;stream/1"
            }).jPlayer("play");
        },
        supplied:"mp3"
    });
}); 
```

编辑：响应代码是 200。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T04:49:04.870

固定的：

它在我的代码中，我通过标签包含`src`在内`<script>`。

# java - 当按下某个组合键时，JFrame 会重新出现吗？

> ID：15584460
> 
> 赞同：1
> 
> 时间：2013-03-23T07:34:07.827
> 
> 标签：java, swing, jframe

在`defaultCloseOperation()`我的 JFrame 中设置为`DO_NOTHING_ON_CLOSE`. IDE显示程序还在运行，没有办法找`JFrame`回来。

我想知道，如果按下某个组合键，如何让`JFrame`再次可见`SHIFT+V`？就像在一些家长控制和监视软件中一样

我知道`KeyListener`不能使用，因为它需要一些可以发送输入的可聚焦的东西......那么有什么办法呢？
当某些键被按下时它会重新出现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T07:37:59.457

*   不能直接使用 Java，如果在屏幕上不可见并且没有焦点所有者，Swing GUI 不会对任何键或鼠标事件做出反应

*   您可以使用[SystemTray](http://docs.oracle.com/javase/tutorial/uiswing/misc/systemtray.html)作为标准解决方法，[在那里您可以从 JMenuItems Action 再次显示您的容器](https://stackoverflow.com/a/12707482/714968)

编辑

*   1号通知。点，一些[鼠标事件是可访问的，并且可以对这些事件进行处理，对 Win7/8 和 JButtons 组件、JTableHeader... 有效](https://stackoverflow.com/questions/15548238/getrootpane-default-button-is-this-a-bug/15550077#15550077)，但 contianer 必须在屏幕上可见

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T07:41:57.223

首先，您制作一个 Windows 适配器，以便您可以在其中使用 windowClosing 方法。此方法会覆盖默认的 EXIT_ON_CLOSE 或在您的情况下为 DO_NOTHING_ON_CLOSE 并写下您想要在程序尝试退出红色 X 时发生的事情。希望对您有所帮助

# android - Android: Database backup issue

> ID：15584461
> 
> 赞同：1
> 
> 时间：2013-03-23T07:34:17.500
> 
> 标签：android, android-sqlite, database-backups

In my application I have an option to export the database file to sdcard. Exporting is working fine and the problem is, (to put it clear) for example

*   I took a backup of the database file containing some data.
*   After that I have modified some data in my application.
*   When I try to import the saved backup file, the changes what I did in my application(after exporting the database file) are being modified in this backup file too.

I'm kind of confused with this weird behavior. I think the backup database file and internal app database has a link and whatever I modify in my application is being reflected in the backup file.

If anyone know why and how to overcome this, please suggest. Any kind of help or suggestion is much appreciated. Thanks !

# java - 如何在 JTextField 中对齐文本？

> ID：15584463
> 
> 赞同：7
> 
> 时间：2013-03-23T07:34:34.480
> 
> 标签：java, swing, alignment, jtextfield

我有一个边界相当大的 JTextField，但是文本的行为不像我想要的那样。

```
 _________________
|                 |
|                 |
|text             |
|                 |
|_________________| 
```

我该怎么做才能让我的文字像这样对齐

```
 _________________
|text             |
|                 |
|                 |
|                 |
|_________________| 
```

编辑：使用`JTextArea`解决了我的问题。谢谢你。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-23T08:15:08.663

`JTextArea`与顶部对齐。

或使用`JLabel`：

```
JLabel myLabel = new JLabel("my text"); 
```

和电话：

```
myLabel.setHorizontalAlignment(SwingConstants.LEFT);
myLabel.setVerticalAlignment(SwingConstants.TOP); 
```

布局管理器是另一种方法：http: [//docs.oracle.com/javase/tutorial/uiswing/layout/using.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-12-14T20:42:31.277

```
mytext.setHorizontalAlignment(SwingConstants.LEFT);
mytext.setVerticalAlignment(SwingConstants.TOP); 
```

这已经足够了，适用于 JTextField

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-23T15:01:58.537

这是一个很老的问题，但我需要它，这为我解决了它。

请注意：此解决方案假定不使用 i18n。如果您启用了 i18n 函数，请查看 javax.swing.plaf.basic.BasicTextFieldUI.create(Element) 以找到正确的类。

您可以自定义 FieldView 中的垂直文本位置：

```
public static class MyTextfieldUI extends com.sun.java.swing.plaf.windows.WindowsTextFieldUI /* TODO which UI class is really used? */ {

    public static ComponentUI createUI(JComponent c) {
        return new MyTextfieldUI();
    }

    @Override
    public View create(Element elem) {
        return new FieldView(elem) {

            @Override
            protected Shape adjustAllocation(final Shape shape) {
                if (shape instanceof Rectangle) {
                    final Rectangle result = (Rectangle) super.adjustAllocation(shape);
                    /* set vertical text position to top */
                    result.y = ((Rectangle) shape).y;
                    return result;
                }

                return super.adjustAllocation(shape);
            }
        };
    }
}

public class Test extends JPanel {

private Test() {
    super(new BorderLayout());

    final JTextField northField = new JTextField();
    northField.setBackground(Color.YELLOW);
    northField.setText("north");

    final JTextField eastField = new JTextField();
    eastField.setBackground(Color.GREEN);
    eastField.setText("east");
    eastField.setPreferredSize(new Dimension(200, -1));

    final JTextField centerField = new JTextField();
    centerField.setBackground(Color.CYAN);
    centerField.setText("center");
    centerField.setHorizontalAlignment(SwingConstants.CENTER);

    final JTextField westField = new JTextField();
    westField.setBackground(Color.GRAY);
    westField.setText("west");
    westField.setHorizontalAlignment(SwingConstants.RIGHT);
    westField.setPreferredSize(new Dimension(200, -1));

    final JTextField southField = new JTextField();
    southField.setBackground(Color.MAGENTA);
    southField.setText("south");
    southField.setHorizontalAlignment(SwingConstants.RIGHT);

    add(northField, BorderLayout.NORTH);
    add(eastField, BorderLayout.EAST);
    add(centerField, BorderLayout.CENTER);
    add(westField, BorderLayout.WEST);
    add(southField, BorderLayout.SOUTH);
}

public static void main(String[] args) throws Exception {
    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());

    /* Set custom look and feel for all text fields */
    UIManager.put("TextFieldUI", MyTextfieldUI.class.getName());

    final JFrame frame = new JFrame("TextDemo");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    frame.add(new Test());
    frame.setSize(800, 500);
    frame.setVisible(true);
} 
```

}

# java - Integrating annotation processors with Gradle

> ID：15584472
> 
> 赞同：28
> 
> 时间：2013-03-23T07:35:31.340
> 
> 标签：java, intellij-idea, annotations, gradle

I need to write some annotation processors. I found [this blog post](http://deors.wordpress.com/2011/10/08/annotation-processors/) which mentions how that can be done in a general setting and with Eclipse.

However I am using IntelliJ IDEA and Gradle, and woud like it if there were a better (as in, less tedious) approach to do it. What I am looking for:

1.  I should be able to write both annotation processors and the code that will be consuming them in the same project and Gradle should handle adding the processors to class path and invoking them with javac at approrpiate stage.
    OR
2.  If the above is not possible and I have to create two separate projects, then at least it should be possible to keep them in the same git repository. Gradle should handle the build seamlessly.
    OR
3.  If neither is possible and I have to create two separate git repositories, then at the very least, Gradle should handle the things mentioned in the linked blog post seamlessly without further manual intervention.

My git and Gradle skills are beginner level. I would appreciate any help with this task. Thank you.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-23T10:33:00.193

是的，可以将处理器移动到单独的模块并从另一个模块使用它（见`querydslapt`下文）。

我会推荐你​​实现自己的[AbstractProcessor](http://docs.oracle.com/javase/6/docs/api/javax/annotation/processing/AbstractProcessor.html)

并像这样使用它：

```
dependencies {
    ....
    // put dependency to your module with processor inside
    querydslapt "com.mysema.querydsl:querydsl-apt:$querydslVersion" 
}

task generateQueryDSL(type: JavaCompile, group: 'build', description: 'Generates the QueryDSL query types') {
    source = sourceSets.main.java // input source set
    classpath = configurations.compile + configurations.querydslapt // add processor module to classpath
    // specify javac arguments
    options.compilerArgs = [
            "-proc:only",
            "-processor", "com.mysema.query.apt.jpa.JPAAnnotationProcessor" // your processor here
    ]
    // specify output of generated code
    destinationDir = sourceSets.generated.java.srcDirs.iterator().next()
} 
```

[你可以在这里](https://github.com/michail-nikolaev/vaadin-querydsl-spring-jpa-gradle-test/blob/master/domain/build.gradle)找到完整的例子

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-23T11:37:08.813

另一种解决方案（在我看来更简洁）可能是拥有两个[子项目](http://www.gradle.org/docs/current/userguide/multi_project_builds.html)，然后简单地将包含注释处理器的那个作为主项目的依赖项。因此，给定两个包含子项目的目录：在项目`core`的`annotation-processors`根目录中，您还需要一个`settings.gradle`包含以下内容的文件：

```
include 'core'
include 'annotation-processors' 
```

然后在核心项目的 gradle 文件中：

```
dependencies {
    compile project(':annotation-processors')
} 
```

应该这样做，您不必处理自定义编译任务及其类路径。

# cuda - calling CUDA printf float from kernel returning garbage?

> ID：15584477
> 
> 赞同：0
> 
> 时间：2013-03-23T07:36:13.243
> 
> 标签：cuda, nvidia

I'm trying to print float values from kernel using calls to `printf`. I'm doing this to check on another program I'm working on that requires copying float arrays from host to device. I wrote a kernel to check the values stored inside the float array in the device, only to get `0` in return.

So I wrote this code to check :

```
#include <stdio.h>

#define ARR_LENGTH 3

__global__ void checkArr(float* arr);

int main(void)  
{  
    float* arr = (float*) malloc(sizeof(float) * ARR_LENGTH);

    float cont = 0;
    for(int i = 0 ; i < ARR_LENGTH ; i++) {
        arr[i] = cont;
        cont++;
    }

    for(int i = 0 ; i < ARR_LENGTH ; i++) {
        printf("arr[%d] : %f\n", i , arr[i]);
    }

    float* d_arr;
    cudaMalloc((void**) &d_arr, sizeof(float) * ARR_LENGTH);
    cudaMemcpy(d_arr, arr, sizeof(float) * ARR_LENGTH, cudaMemcpyHostToDevice);

    printf("got here\n");

    checkArr<<<1,1>>>(d_arr);

    printf("got here\n");

    float* check = (float*) malloc(sizeof(float) * ARR_LENGTH);
    cudaMemcpy(check, d_arr, sizeof(float) * ARR_LENGTH, cudaMemcpyDeviceToHost);   
    for(int i = 0 ; i < ARR_LENGTH ; i++) {
        printf("arr[%d] : %f\n", i , check[i]);
    }

}

__global__ void checkArr(float* arr ) 
{
    float check = 5.0;
    printf("float check : %f\n", check);
    printf("float check : %f\n", check + 1.0);
    printf("float check : %f\n", check + 2.0);

    for(int i = 0 ; i < ARR_LENGTH ; i++) {
        printf("arr[%d] : %f\n", i , arr[i]);
    }
} 
```

with the output :

```
arr[0] : 0.000000
arr[1] : 1.000000
arr[2] : 2.000000
got here
float check : 0
float check : 0
float check : 0
arr[0] : 2.4375
arr[1] : 2.4375
arr[2] : 2.4375
got here
arr[0] : 0.000000
arr[1] : 1.000000
arr[2] : 2.000000 
```

if I didn't put the 'float checks :' before printing the values of the array, the values of the array will return `0`. It's kinda weird.. any explanation? Does it mean I can't inspect the value of float values inside the device memory? (as you can see, `int` seems to be returned fine)

I compile the program with `-arch=sm_20`. As I don't have a CUDA compatible device at home, I compiled and run the check using [GPUOcelot](https://code.google.com/p/gpuocelot/). Can you reproduce this error with a compatible device?

Cheers, AErlaut

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T15:49:04.447

当我在实际的`sm_20`gpu (M2090) 上编译并运行您的代码时，我得到以下输出。

```
$ ./t97
arr[0] : 0.000000
arr[1] : 1.000000
arr[2] : 2.000000
got here
got here
float check : 5.000000
float check : 6.000000
float check : 7.000000
arr[0] : 0.000000
arr[1] : 1.000000
arr[2] : 2.000000
arr[0] : 0.000000
arr[1] : 1.000000
arr[2] : 2.000000
$ 
```

请注意，真实设备上内核中的 printf 与来自主机的 printf 队列有些异步，因此输出的顺序可能不同。

我的意思是向您建议 GPU 行为和 Ocelot 行为可能不同。如果您继续发布“请帮我在真正的 GPU 上检查我的 Ocelot 程序”，我将不会回复这些内容。

# java - Java ArrayList remove() 意外结果？

> ID：15584479
> 
> 赞同：0
> 
> 时间：2013-03-23T07:37:13.877
> 
> 标签：java

这是我的代码

```
void reduce() {
    KeyVal reducer1 = new KeyVal();
    for (int i=0; i< m1.size(); i++) {
        reducer1.setKey(m1.get(i).getKey());
        reducer1.setValue(m1.get(i).getValue());

        for (int j=i+1; j < m1.size(); j++) {
              if (m1.get(i).getKey().compareTo(m1.get(j).getKey()) == 0) {
                  m1.remove(j);
                  //System.out.println(i + "-->" + j);
                  reducer1.setValue(reducer1.getValue() + 1);
              }
          }         

        System.out.println(reducer1.getKey());
        System.out.println(reducer1.getValue());
        //r1.add(reducer1);
      } 
```

基本上是用来数数的。特定条目的出现次数。如果我提供输入

```
3494702579
3494702579
3494702579 
```

我正进入（状态

```
3494702579
2
3494702579
1 
```

但我应该得到

```
3494702579
3 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T07:39:35.010

`m1`您在对其进行迭代时从中删除元素。这会导致内部循环跳过一些元素。发生这种情况是因为，在您删除`j`-th 元素后，您仍在递增`j`.

在您的示例中，其中一个`3494702579`被跳过，并被外循环的第二次迭代拾取。

您的方法的整个逻辑可以使用一个`Map`计数键和一次遍历输入列表来重写。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T07:42:28.507

在您的内部循环中，当您删除一个元素然后增加`j`您实际上可能会跳过一个元素。

但一般来说，做你想做的更好的方法是使用多集的 HashMap 实现。您当前的解决方案是`O(n^2)`，而 HashMap 非常接近`O(N)`。

```
void reduce() {
    HashMap<xxx, Integer> reducer1 = new HashMap<xxx, Integer>();
    for (int i=0; i< m1.size(); i++) {
        xxx key = m1.get(i).getKey();

        int count = 0;
        if ( reducer1.containsKey(key) ) count = reducer1.get(key);

        reducer1.put(key, count+1);  
     }
     //print the values
} 
```

# java - 如果不重新调整应用程序窗口的大小，Java 窗口将不会更新

> ID：15584481
> 
> 赞同：1
> 
> 时间：2013-03-23T07:37:16.033
> 
> 标签：java, swing, jpanel, paint, repaint

我试图使“剩余时间”附近的整数减一并每秒重新绘制一次，**但我只能在不断调整窗口大小时看到变化**。我已经在 Windows 中的 Jcreator 3 和 Ububtu 11.10 命令行中尝试过这个，但它仍然不起作用。

```
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;
import java.io.*;
import javax.imageio.*;

class StatusPanel extends JPanel implements ActionListener {

    int time = 60;
    int round = 1;
    Timer timer;

    public StatusPanel() {
        this.timer = new Timer(1000, this);
        this.timer.start();
        this.setVisible(true);
        this.setDoubleBuffered(true);
    }

    public void updateTime() {
        if (time > 0) {
            time--;
        }
    }

    public void paint(Graphics page) {

        super.paint(page);

        page.setFont(new Font("TimesRoman", Font.PLAIN, 30));
        String sTime = String.valueOf(time);
        String sRound = String.valueOf(round);

        page.setColor(Color.WHITE);
        page.drawString(sTime, 253, 149);
        page.drawString(sRound, 230, 105);
    }

    public void actionPerformed(ActionEvent event) {

        this.updateTime();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T07:52:39.873

```
public void updateTime(){
    if (time>0) time--;
} 
```

当`time`被改变时，你的组件应该被重绘。然而，Swing 通常将组件视为静态对象，并且不会连续重绘它们。你需要告诉 Swing 你想要重绘你的组件：

```
public void updateTime(){
    if (time>0){
        time--;
        this.repaint();
    }
} 
```

附带说明一下，也许您应该在达到零时停止计时器。好像已经不用了。

# php - 在两个循环内设置数组

> ID：15584483
> 
> 赞同：0
> 
> 时间：2013-03-23T07:37:46.407
> 
> 标签：php

我将一个文本区域发布到我的 php 脚本中，然后我对文本区域的每一行执行一个循环，然后再次使用来自文本区域循环的数据。然后我尝试为每个数组设置一个数组，最后为所有数组检索一个数组。但是我的代码给了我错误：

```
if (isset($_POST['submit'])) {
        $entries = array();
    $text    = trim($_POST['facebookpage']);
    $text    = explode("\n", $text);
    foreach ($text as $line) {
        $data = $html2->find("table.profileInfoTable");
        $text2 = trim($data[0]);
        $text2 = explode("<tr>", $text2);
        foreach ($text2 as $line) {
            if (strpos($line, 'Location') !== false) {
                $location = $line;
            }
        }
        $data1 = $html2->find("table.profileInfoTable");
        $text2 = trim($data1[0]);
        $text2 = explode("<tr>", $text2);
        foreach ($text2 as $line) {
            if (strpos($line, 'Email') !== false) {
                $email = $line;
            }
        }
    $mainarray = array("Email" => $email, "Location" => $location);
    array_push(($mainarray),$entries);
    }
    var_dump($entries);
}` 
```

错误也是：

```
Fatal error: Only variables can be passed by reference in /home2/statonme/public_html/scraper.php on line 61 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T07:42:46.317

Usually, the error messages of PHP give you a very good idea of what's wrong with your script.

I don't know where 'Line 61' in your script is, but I believe that if you put anything into brackets, it is considered an 'equation'...meaning that `($main_array)` is not a variable...and you can't change an equation. You can only change variables.

Try removing the brackets around `$main_array` in `array_push(($mainarray),$entries);` (making it: `array_push($mainarray, $entries);`) and come back with results please.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T08:01:18.937

我认为你有`array_push`倒退的论据。您要添加的数组应该是第一个参数，其余参数是要添加的元素。所以应该是：

```
array_push($entries, $mainarray); 
```

或者，更简单地说：

```
$entries[] = array("Email" => $email, "Location" => $location); 
```

# sql - 使用数据库和 DSN 创建 VB6 安装程序

> ID：15584490
> 
> 赞同：-1
> 
> 时间：2013-03-23T07:38:30.010
> 
> 标签：sql, vb6, installation, package, dsn

我使用 ODBC DSN 在 VB6 With SQL 2000 中创建了一个项目。现在我想创建一个软件安装程序，它可以在一个安装向导中安装软件、安装 SQL 2000 和创建 DSN。目前我正在安装 SQL 2000，然后创建 DSN，然后手动安装软件。

是否有任何软件或程序可以为所有进程制作单个安装程序。我已经看到一些安装程序只为我的应用程序制作安装程序（不安装 SQL 和创建 DSN），但这不是我的要求，因为我已经可以使用打包和部署向导进行设置。

谢谢，

优素福

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T03:19:52.323

有几种方法可以完成您所需要的。您可以使用像 Install Shield 这样复杂的东西来与 ODBC API 交互，或者您可以简单地使用 Visual Basic 6 代码来创建 DSN 条目。

听起来 VB6 对您来说是最简单的：http: [//support.microsoft.com/kb/184608](http://support.microsoft.com/kb/184608)

# java - 对象作为未声明的参数传递

> ID：15584497
> 
> 赞同：-2
> 
> 时间：2013-03-23T07:39:35.763
> 
> 标签：java

这段代码的问题是，每当我运行它时，它都会显示编译错误：

> 找不到符号：构造函数 mywindowadapter(frame1)
> 
> 位置：class mywindowadapter
> 
> mywindowadapter mwa=新的 mywindowadapter()"

```
import java.awt.*;
import java.awt.event.*;
/*<applet code=frame2 width=500 height=500>
</applet>*/
class frame2 extends Frame
{
    frame2(String title)
    {
        super(title);
        mywindowadapter mwa=new mywindowadapter();
        addWindowListener(mwa);     
    }
    public static void main(String ar[])
    {
        frame2 f=new frame2("my frame");
        f.setVisible(true);
        f.setSize(200,100);

     }
    public void paint(Graphics g)
    {
        g.drawString("hello frame",60,70);
    }
}
class mywindowadapter extends WindowAdapter
{

    mywindowadapter()
    {
        frame2 f=new frame2();  
    }
    public void windowClosing(WindowEvent we)
    {
        f.setVisible(false);
        System.exit(0);
    }
} 
```

下面的代码是上面代码的修正版。我无法理解前面代码中生成的错误。请帮忙！！

```
import java.awt.*;
import java.awt.event.*;
/*<applet code=frame2 width=500 height=500>
</applet>*/
class frame2 extends Frame
 {
    frame2(String title)
    {
        super(title);
        mywindowadapter mwa=new mywindowadapter(this);
        addWindowListener(mwa);     
    }
    public static void main(String ar[])
    {
        frame2 f=new frame2("my frame");
        f.setVisible(true);
        f.setSize(200,100);

    }
   public void paint(Graphics g)
    {
        g.drawString("hello frame",60,70);
    }
}
class mywindowadapter extends WindowAdapter
{
    frame2 f;
    mywindowadapter(frame2 f)
    {
        this.f=f;   
    }
    public void windowClosing(WindowEvent we)
    {
        f.setVisible(false);
        System.exit(0);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T07:49:20.673

frame2 没有默认构造函数，您正在尝试在适配器中使用它。

要么为 frame2 提供默认构造函数，要么将适当的参数传递给现有的构造函数。

第一个代码肯定有很多编译错误，请修复它们。就像在 windowClosing() 中一样，您不能引用 f。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T08:04:15.833

对我来说，看起来你有两个版本的`mywindowadapter`类，一个带有带参数的构造函数，另一个带有不带参数的构造函数。两者都在同一个包中。因此，当编译`mywindowadapter`没有参数的构造函数时，会覆盖另一个。

此外，具有参数的构造函数的类可能不在您调用其构造函数的包中。

检查它是否属于这些情况之一。

# wordpress - 为什么 TEMPLATEPATH 返回子目录的绝对路径？

> ID：15584502
> 
> 赞同：0
> 
> 时间：2013-03-23T07:40:27.010
> 
> 标签：wordpress, wordpress-theming

我正在使用框架为 wordpress 开发主题。安装框架后，我创建子主题并将框架中的文件包含在 functions.php 中。

在其他 2 个项目中一切正常，但在我的新项目中我有一个错误。当我调用 TEMPLATEPATH 时，它返回子目录的绝对路径，但它必须返回父主题的路径。

有什么问题？

PS Framework 使用 TEMPLATEPATH 来包含他自己的文件，所以我需要了解如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T16:39:58.050

您应该尝试使用`get_template_directory_uri()`来获取父主题目录，如下所示：

```
 echo get_template_directory_uri()/img/icon.png 
```

如果你想从你的子主题目录中得到一些东西，你可以使用`get_stylesheet_directory_uri()`.

**更多信息：**

*   [http://codex.wordpress.org/Function_Reference/get_template_directory_uri](http://codex.wordpress.org/Function_Reference/get_template_directory_uri)
*   [http://codex.wordpress.org/Function_Reference/get_stylesheet_directory_uri](http://codex.wordpress.org/Function_Reference/get_stylesheet_directory_uri)

*编辑：刚刚注意到**McNab**在问题评论中的回复，也给这个人一些支持。:)*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T06:49:26.203

我找到了我的问题的解决方案。
我的父主题路径错误，因为在字段“模板”中的表“wp_options”中的数据库中是子主题名称。当我将此字段的值更改为父主题名称时，TEMPLATEPATH 开始返回父主题的路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-21T17:36:19.513

这发生在我身上，因为我首先创建了我的子主题，并在创建我的父主题 style.css 文件之前激活了它。

解决此问题所需要做的就是激活任何其他主题，然后重新激活您的子主题。这将更正 wp_options 表中的“模板”值。

# php - 如何使用 PHP 将分数四舍五入到下一个数字

> ID：15584504
> 
> 赞同：0
> 
> 时间：2013-03-23T07:41:05.270
> 
> 标签：php, rounding

我知道 php 的内置`round()`函数，它返回`2`. `1.6`但它返回`1`. `1.1`如果给定的数字有小数部分，我想返回下一个数字。例如，我想返回`2`for `1.1`, or `1.01`, or even `1.0001`。但我不想返回相同的 for `1.0`，它可能会返回`1`自己。我怎样才能在 PHP 中实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T07:42:45.943

看看 php 的[`ceil()`](http://php.net/manual/en/function.ceil.php).

```
echo ceil(4.3);    // 5
echo ceil(9.999);  // 10
echo ceil(-3.14);  // -3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T07:43:56.170

用于`ceil()`向上舍入到下一个数字

`echo ceil(1.0); // will echo 1`

[http://www.php.net/manual/en/function.ceil.php](http://www.php.net/manual/en/function.ceil.php)

# html - 制作 整体（链接）垂直菜单

> ID：15584505
> 
> 赞同：1
> 
> 时间：2013-03-23T07:41:07.673
> 
> 标签：html, css

 有什么想法可以让 LI 成为整个链接吗？

```
#nav{
position: relative;
width: 120px;
}
#nav a {
display: inline;
width: 100%
text-decoration: none;
}
#nav ul{
list-style-type: none;
}
#nav ul li{
background: #c0c0c0;
border-bottom: 1px dotted #404040;
}
#nav ul ul{
position: absolute;
left: 81px;
display: none;
}
#nav ul ul li{
background: #c0c0c0;
}
#nav ul li:hover ul{
display: inline;
} 
``` 

这是链接： [jsfiddle](http://jsfiddle.net/seaamx/wX2ss/)

我尝试过的选项：

> 1.  一个{显示：块；} --> 这行得通，但第二个 UL 下降了。
> 2.  a {display: inline-block;} -->第二个 UL 问题已修复，但 LI 不是链接。
> 3.  一个{显示：内联块；宽度：100%；高度：100%；} --> 与 2 相同。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T07:54:23.397

It's because of the padding that it doesn't work. The element is actually overlapping the others.

```
#nav ul ul{
    position: absolute;
    top:0px;
    left: 80px;
    display: none;
    padding-left:0px;
} 
```

You can find the full demo here: [**Working Demo**](http://jsfiddle.net/wX2ss/27/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T07:49:36.097

```
#nav a {
    display: block;
    text-decoration: none;
    float: left;
    width: 80px;
}

#nav ul li{
    background: #c0c0c0;
    border-bottom: 1px dotted #404040;
    overflow:hidden;
} 
```

工作示例：http: [//jsfiddle.net/wX2ss/16/](http://jsfiddle.net/wX2ss/16/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T07:50:58.693

你需要改变这个CSS

```
 #nav a {
    display: block;
    text-decoration: none;
    } 
```

你可以在这里查看

[http://jsfiddle.net/wX2ss/30/](http://jsfiddle.net/wX2ss/30/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T07:54:44.093

Try

```
#nav{
    position: relative;
    width: 120px;
}
#nav a {
    display: inline-block;
    text-decoration: none;
    width: 100%;
    background-color: lightblue;
}
#nav ul{
    list-style-type: none;
}
#nav ul li{
    background: #c0c0c0;
    border-bottom: 1px dotted #404040;
    position: relative;
}
#nav ul ul{
    position: absolute;
    left: 43px;
    display: none;
    top: 0;
}
#nav ul ul li{
    background: #c0c0c0;
}
#nav ul li:hover ul{
    display: inline;
} 
```

Demo: [Fiddle](http://jsfiddle.net/arunpjohny/ThHrA/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-23T08:03:27.847

试试这样

```
 #navbar ul li {
            display: inline;
            position: relative;
            }

            #navbar ul li ul  {
            position: absolute;
            visibility: hidden;
            }

            #navbar ul li:hover>ul {
            visibility: visible;
            position: absolute;
            display: block;
            }

            <div id="navbar">
                <ul>
                    <li><a href="link">1</a></li>
                    <li><a href="#">2</a>
                        <ul>
                            <li><a href="link">x</a></li>
                            <li><a href="link">y</a></li>
                            <li><a href="link">z</a></li>
                        </ul>
                    </li>
                    <li><a href="link">3</a></li>
                </ul>
            </div> 
```

# node.js - 在 node.js 中，如何将变量从玉中传递给 :stylus 过滤器？

> ID：15584506
> 
> 赞同：3
> 
> 时间：2013-03-23T07:41:16.830
> 
> 标签：node.js, pug, stylus

`jade`在我希望`stylus`过滤器使用的变量中创建一个变量。

using`#{var}`似乎不起作用。例如，这段代码：

```
  - var color1 = '蓝色'
  手写笔：
    div
      背景色粉红色
      颜色#{color1}

```

给出结果错误：

```
/home/data/tnt/server/node/www/tech/cool.jade:2
   1| div
   2| 背景色粉红色
 > 3| 颜色#{color1}
   4|   

预期“缩进”，得到“缩进”

```

如何让`jade`变量`color1`在`stylus`过滤器中可见？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T11:15:03.210

过滤器（如 stylus、markdown 等）在“编译时”期间执行，并且只执行一次。

但是文本替换是在运行时完成的，因此**过滤器无法访问变量。**

过滤器只能访问原始文本，例如。`color #{color1}`并不是`color blue`

作为一种解决方法，您可以创建一个辅助方法，您可以在其中按照多个地方的建议进行手写笔模板化和渲染（我只找到了使用降价过滤器的示例，但过滤器的工作方式相同，因此它们也适用于`stylus`过滤器）：

*   [Jade：通过 markdown 过滤一个变量。](https://groups.google.com/forum/?fromgroups=#!topic/express-js/8H4HNcoeekk)
*   [:markdown 过滤器处理字符串变量的文本](https://github.com/visionmedia/jade/issues/404)
*   [:markdown 变量](https://github.com/visionmedia/jade/issues/895)

# git - 无法使用 git 扩展加载我的私钥

> ID：15584516
> 
> 赞同：16
> 
> 时间：2013-03-23T07:42:54.150
> 
> 标签：git, git-extensions

最近2个小时我一直在努力。我正在使用 xp-dev 作为 git 存储库提供程序（因为我已经付款并且那里有 svn repo）我已经给了 xp-dev 我的公钥。

但是在克隆我的回购时，我被拒绝了。

```
"C:\Program Files (x86)\Git\bin\git.exe" clone -v --recurse-submodules --progress "ssh://xp-dev.com/repogit" "c:/ProjetPerso/repogit"
Cloning into 'c:/ProjetPerso/repogit'...
Permission denied (publickey).
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists.
Done 
```

根据我从各种博客中了解到的情况，git 扩展应该要求我加载我的私钥，除非它没有。

我尝试启动 putty 身份验证客户端（即使我选择了 openSSH）并在其中加载了我的私钥，但它没有任何改变。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2015-08-27T09:02:29.690

我遇到了这个问题，因为我使用 ssh-keygen 生成了一个 SSH 密钥，并尝试将它与仅理解 OpenSSH 密钥的 GitExtensions 一起使用。

你需要做的是，来自 GitExtensions：

*   工具 > Putty > 生成或导入密钥（打开一个新窗口）
*   转化 > 导入键
*   导入您的私钥
*   保存私钥
*   键入文件名，例如`mykey.ppk`

您现在应该可以在 GitExtensions 中使用这个新的 .ppk 文件了！

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-27T22:09:20.080

仅当您使用 Putty 时，GitExtension 才会要求加载私钥。您应该为 OpenSSH 手动执行此操作，如 GitHub [https://help.github.com/articles/generating-ssh-keys所述](https://help.github.com/articles/generating-ssh-keys)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-07-03T04:57:53.560

使用 Git-Extensions 很容易做到这一点；

1.  打开 Git Gui
2.  帮助 > 显示 SSH 密钥
3.  生成密钥
4.  复制到剪贴板
5.  将其粘贴到您的个人资料中 GitHub、Bitbucket 等中的 SSH 密钥

[![Git 扩展 - SSH 密钥生成](../Images/729fbbe49f02f5a1faacfb6a2c23e391.png)](https://i.stack.imgur.com/D7L1r.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-11T07:35:05.663

我现在面临这个问题。我能够通过 GitExtension 本身的以下链接获得解决方案。

[PuTTy 和 Github](https://git-extensions-documentation.readthedocs.io/en/latest/remote_feature.html#putty-and-github)

GitLab 也同样适用。您需要在设置页面下将生成的 ppk 文件添加到 GitHub 或 GitLab。

# c - #ifndef in c file?

> ID：15584520
> 
> 赞同：2
> 
> 时间：2013-03-23T07:43:53.997
> 
> 标签：c, header, c-preprocessor

Is it possible to put `#ifndef` at the top of a c file? Basically I need to check whether a certain preprocessor constant was declared when running the program and my program will change accordingly.

I need to check if `-D DESCENDING_ORDER=1` is added as an argument (doesn't matter what value given).

I have this code at the top of my main c file:

```
#ifndef DESCENDING_ORDER
int ascending = 1;
#else
int ascending = 0;
#endif 
```

Works when compiling by itself, but I get errors when I try compiling with a Makefile, something along the lines of "expected identifier before 'int' for `int ascending = 1`.

Thanks.

EDIT - Added Makefile code

```
CC=gcc
CFLAGS=-g -Wall
INC=-include
RES_OBS=res.o
LIBS=
all: res

res:    $(RES_OBS)

    $(CC) $(CFLAGS) -o res $(RES_OBS) $(LIBS) $(INC) res.h -D DESCENDING_ORDER=1

clean:
        rm -f *.o

clobber:
        make clean
        rm -f res 
```

Kind of guessed and added `$(INC)....DESCENDING_ORDER=1` to the end of the command, so that's probably why it's not working. Command I'm using without makefile:

```
gcc res -include res.h -D DESCENDING_ORDER=1 
```

EDIT 2 - Had a little play with different arguments and found that I get the same error if I remove `-include res.h` in the command. Still not sure how to correctly reference the header file in the makefile? I've added the `#include "res.h"` in my res.c file but still get the error.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T08:10:37.970

`Makefile`你的since `$(CLAGS)`should be中有一个错字`$(CFLAGS)`。了解更多关于 的信息`make`，特别是通过运行`make -p`它向您显示许多内置规则`make`并使用它们（例如考虑使用`$(COMPILE.c)`等`$(LINK.c)`）

不要忘记添加`-Wall`到您的`CFLAGS`，因为您想要来自编译器的所有警告。您可能也需要调试信息，所以`g`也添加。

在 Linux 上，我建议使用[remake](http://bashdb.sourceforge.net/remake/)通过运行来调试`Makefile`-s，`remake -x`这很有帮助。

标准做法是：

*   避免传递`-include`到`gcc`，而是在相关源文件`#include "res.h"`的开头附近添加一个`*.c`

*   将 粘贴`-D`到定义的符号上，例如`-DDESCENDING_ORDER=1`

*   将您`Makefile`对相关目标文件的依赖项添加到新的`#include`-d 文件中`res.h`；请注意，这些依赖项可以自动生成（通过传递例如`-MD`to`gcc`等...）

*   通过`-DDESCENDING_ORDER=1` 或`CFLAGS`更好`CPPFLAGS`

不要忘记程序参数的顺序`gcc`很重要。

### 附加物

您可能希望使用生成源代码的预处理形式，`res.i`并且可以有如下规则`res.c``gcc -C -E`

```
 res.i: res.c res.h
           $(CC) -C -E $(CFLAGS) $(CPPFLAGS) $^ -o $@ 
```

然后`make res.i`用一些编辑器或寻呼机（也许`less`）检查预处理器输出`res.i`；或者，在命令行上执行此操作

```
 gcc -C -E -I. -DDESCENDING_ORDER=1  res.c | less 
```

您可以删除生成的行信息并执行

```
 gcc -C -E -I. -DDESCENDING_ORDER=1  res.c | grep -v '^#' > res_.i
  gcc -Wall -c res_.i 
```

关键是*C*中的预处理是文本操作，而您的预处理形式是错误的。

顺便说一句，最近的 Clang/LLVM（3.2 版）或 GCC（刚刚发布的 4.8 版）编译器为您提供了更好的关于预处理的消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T07:46:03.383

代码很好。使用 Makefile 时遇到的错误与其他事情有关（如果没有看到之前的内容`#ifndef`并看到 Makefile，很难确定）。

# nginx - Rewrite /anything/index.php to /anything/ in Nginx

> ID：15584522
> 
> 赞同：0
> 
> 时间：2013-03-23T07:43:56.837
> 
> 标签：nginx

I'm trying to rewrite /anything/index.php to /anything/ in Nginx. I've Bing'd but nothing helps. Can anyone help me please.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T03:07:04.673

这样的事情怎么样？

```
rewrite ^/(.*)/index.php /$1/ last; 
```

# php - 如何在前端按受欢迎程度对 Magento 产品进行排序？

> ID：15584524
> 
> 赞同：0
> 
> 时间：2013-03-23T07:44:10.003
> 
> 标签：php, sorting, magento-1.7, product

我创建了一个模块来在类别页面的“排序依据”下拉框中添加一个新选项。新选项应显示在每个类别页面中，与已经存在的“位置”选项相同。我想添加“人气”作为选项。我的模型类正在执行，它正在将选项添加到选项数组。但是该块不起作用。请问我需要你的帮助来找到我的代码中的问题吗？

这是块类

```
<?php
class Tal_Popularity_Block_Product_List_Toolbar extends Mage_Catalog_Block_Product_List_Toolbar
{
    public function setCollection($collection)
   {
       $this->_collection = $collection;
       $this->_collection->setCurPage($this->getCurrentPage());
       // we need to set pagination only if passed value integer and more that 0
       $limit = (int)$this->getLimit();
       if ($limit) {
           $this->_collection->setPageSize($limit);
       }
        if($this->getCurrentOrder() == 'popularity'){
           $this->_collection->sortByReview($this->getCurrentDirection());
       }
     else if ($this->getCurrentOrder()) {

           $this->_collection->setOrder($this->getCurrentOrder(), $this->getCurrentDirection());
    }

       return $this;
   }
} 
```

以下是我的 config.xml

```
<?xml version="1.0" ?>
 <config>
    <modules>
        <Tal_Popularity>
            <version>0.1.0</version>
        </Tal_Popularity>
    </modules>
    <frontend>
        <routers>
            <popularity>
                <use>standard</use>
                <args>
                    <module>Tal_Popularity</module>
                    <frontName>popularity</frontName>
                </args>
            </popularity>
        </routers>
    </frontend>
    <global>
    <models>
        <catalog>
            <rewrite>
                <config>Tal_Popularity_Model_Config</config>
            </rewrite>
        </catalog>
    </models>
     <blocks>
        <catalog>
            <rewrite>
                <catalog>Tal_Popularity_Block</catalog>
            </rewrite>
           </catalog>
        </blocks>
         <resources>
            <popularity_setup>
                <setup>
                    <module>Tal_Popularity</module>
                </setup>
                <connection>
                    <use>core_setup</use>
                </connection>
            </popularity_setup>
            <popularity_write>
                <connection>
                    <use>core_write</use>
                </connection>
            </popularity_write>
            <popularity_read>
                <connection>
                    <use>core_read</use>
                </connection>
            </popularity_read>
        </resources>
    </global>
</config> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T08:22:25.163

我找到了解决方案。问题出在 config.xml

以前的代码。

```
<blocks>
        <catalog>
            <rewrite>
                <catalog>Tal_Popularity_Block</catalog>
            </rewrite>
           </catalog>
        </blocks> 
```

上面的代码应该如下所示。

```
 <blocks>
            <catalog>
                <rewrite>            <product_list_toolbar>Tal_Popularity_Block_Product_List_Toolbar</product_list_toolbar>
                </rewrite>
               </catalog>
            </blocks> 
```

# javascript - Google Analytics - 跟踪歌曲播放

> ID：15584525
> 
> 赞同：0
> 
> 时间：2013-03-23T07:44:27.330
> 
> 标签：javascript, jquery, google-analytics, tracking

由于我使用 Javascript 播放 HTML5 音频，是否有可能以某种方式集成一个脚本，将每首歌曲的播放请求数量和标题发送到 Google Analytics？

我对谷歌分析不太熟悉，所以我不确定这是否可能。

有没有人试过这个？

**HTML：**

```
<head>
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="src/jquery.ubaplayer.js"></script>
<script>
jQuery(document).ready(function() { 
   jQuery.noConflict();
   jQuery(function(){
            jQuery("#ubaPlayer").ubaPlayer({
            codecs: [{name:"MP3", codec: 'audio/mpeg;'}]
            });

    });
    jQuery('a[rel=vidbox]').click(function () {

        if (jQuery("#ubaPlayer").ubaPlayer("playing") === true) {
            jQuery("#ubaPlayer").ubaPlayer("pause");
            }
        return false;
    });
})
</script>
</head>

<body>
<div id="ubaPlayer"></div>
    <ul class="controls">
        <li><a class="audioButton" href="mp3/dontthinktwice.mp3">
        Don't Think Twice (Bob Dylan)</a></li>
        <li><a class="audioButton" href="mp3/livingforthecity.mp3">
        Living for the City (Stevie Wonder)</a></li>
    </ul>
</body> 
```

**音频播放器 Javascript：**

```
(function($) {
var defaults = {
    audioButtonClass: "audioButton",
    autoPlay: null,
    codecs: [{
        name: "OGG",
        codec: 'audio/ogg; codecs="vorbis"'
    }, {
        name: "MP3",
        codec: 'audio/mpeg'
    }],
    continuous: false,
    extension: null,
    flashAudioPlayerPath: "libs/swf/player.swf",
    flashExtension: ".mp3",
    flashObjectID: "audioPlayer",
    loadingClass: "loading",
    loop: false,
    playerContainer: "player",
    playingClass: "playing",
    swfobjectPath: "libs/swfobject/swfobject.js",
    volume: 1
},
    currentTrack, isPlaying = false,
    isFlash = false,
    audio, $buttons, $tgt, $el, playTrack, resumeTrack, pauseTrack, methods = {
        play: function(element) {
            $tgt = element;
            currentTrack = _methods.getFileNameWithoutExtension($tgt.attr("href"));
            isPlaying = true;
            $tgt.addClass(defaults.loadingClass);
            $buttons.removeClass(defaults.playingClass);

            if (isFlash) {
                if (audio) {
                    _methods.removeListeners(window);
                }
                audio = document.getElementById(defaults.flashObjectID);
                _methods.addListeners(window);
                audio.playFlash(currentTrack + defaults.extension);
            } else {
                if (audio) {
                    audio.pause();
                    _methods.removeListeners(audio);
                }
                audio = new Audio("");
                _methods.addListeners(audio);
                audio.id = "audio";
                audio.loop = defaults.loop ? "loop" : "";
                audio.volume = defaults.volume;
                audio.src = currentTrack + defaults.extension;
                audio.play();
            }
        },

        pause: function() {
            if (isFlash) {
                audio.pauseFlash();
            } else {
                audio.pause();
            }

            $tgt.removeClass(defaults.playingClass);
            isPlaying = false;
        },

        resume: function() {
            if (isFlash) {
                audio.playFlash();
            } else {
                audio.play();
            }
            $tgt.addClass(defaults.playingClass);
            isPlaying = true;
        },

        playing: function() {
            return isPlaying;
        }
    },

    _methods = {
        init: function(options) {
            var types;

            //set defaults
            $.extend(defaults, options);
            $el = this;

            //listen for clicks on the controls
            $(".controls").bind("click", function(event) {
                _methods.updateTrackState(event);
                return false;
            });
            $buttons = $("." + defaults.audioButtonClass);

            types = defaults.codecs;
            for (var i = 0, ilen = types.length; i < ilen; i++) {
                var type = types[i];
                if (_methods.canPlay(type)) {
                    defaults.extension = [".", type.name.toLowerCase()].join("");
                    break;
                }
            }

            if (!defaults.extension || isFlash) {
                isFlash = true;
                defaults.extension = defaults.flashExtension;
            }

            if (isFlash) {
                $el.html("<div id='" + defaults.playerContainer + "'/>");
                $.getScript(defaults.swfobjectPath, function() {
                    swfobject.embedSWF(defaults.flashAudioPlayerPath, defaults.playerContainer, "0", "0", "9.0.0", "swf/expressInstall.swf", false, false, {
                        id: defaults.flashObjectID
                    }, _methods.swfLoaded);
                });
            } else {
                if (defaults.autoPlay) {
                    methods.play(defaults.autoPlay);
                }
            }
        },

        updateTrackState: function(evt) {
            $tgt = $(evt.target);
            if (!$tgt.hasClass("audioButton")) {
                return;
            }
            if (!audio || (audio && currentTrack !== _methods.getFileNameWithoutExtension($tgt.attr("href")))) {
                methods.play($tgt);
            } else if (!isPlaying) {
                methods.resume();
            } else {
                methods.pause();
            }
        },

        addListeners: function(elem) {
            $(elem).bind({
                "canplay": _methods.onLoaded,
                "error": _methods.onError,
                "ended": _methods.onEnded
            });
        },

        removeListeners: function(elem) {
            $(elem).unbind({
                "canplay": _methods.onLoaded,
                "error": _methods.onError,
                "ended": _methods.onEnded
            });
        },

        onLoaded: function() {
            $buttons.removeClass(defaults.loadingClass);
            $tgt.addClass(defaults.playingClass);

            audio.play();
        },

        onError: function() {
            $buttons.removeClass(defaults.loadingClass);
            if (isFlash) {
                _methods.removeListeners(window);
            } else {
                _methods.removeListeners(audio);
            }
        },

        onEnded: function() {
            isPlaying = false;
            $tgt.removeClass(defaults.playingClass);
            currentTrack = "";
            if (isFlash) {
                _methods.removeListeners(window);
            } else {
                _methods.removeListeners(audio);
            }

            if (defaults.continuous) {
                var $next = $tgt.next().length ? $tgt.next() : $(defaults.audioButtonClass).eq(0);
                methods.play($next);
            }

        },

        canPlay: function(type) {
            if (!document.createElement("audio").canPlayType) {
                return false;
            } else {
                return document.createElement("audio").canPlayType(type.codec).match(/maybe|probably/i) ? true : false;
            }
        },

        swfLoaded: function() {
            if (defaults.autoPlay) {
                setTimeout(function() {
                    methods.play(defaults.autoPlay);
                }, 500);
            }
        },

        getFileNameWithoutExtension: function(fileName) {
            //this function take a full file name and returns an extensionless file name
            //ex. entering foo.mp3 returns foo
            //ex. entering foo returns foo (no change)
            var fileNamePieces = fileName.split('.');
            fileNamePieces.pop();
            return fileNamePieces.join(".");
        }
    };

$.fn.ubaPlayer = function(method) {
    if (methods[method]) {
        return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));
    } else if (typeof method === "object" || !method) {
        return _methods.init.apply(this, arguments);
    } else {
        $.error("Method " + method + " does not exist on jquery.ubaPlayer");
    }
};})(jQuery); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T07:48:46.660

是的。您可以使用 Google Analytics 事件跟踪来跟踪任何自定义事件：

[https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide](https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T07:53:35.620

[如何使用 Google Analytics 跟踪 JavaScript 和 Ajax 事件](http://www.sitepoint.com/google-analytics-track-javascript-ajax-events/)是一个相当广泛的教程，其中包含 mp3 系统的示例。所以……是的！

Google Analytics 允许您跟踪从 javascript 引发的自定义事件。该网站给出的一个例子是：

> `if (_gaq) _gaq.push(['_trackEvent', category, action, label, value]);` 简单的。该条件首先检查我们是否包含了 Analytics JavaScript，然后发送事件本身的详细信息。我们 MP3 系统的典型事件可能是：

```
_gaq.push(['_trackEvent', 'mp3system', 'search', 'good songs']);
_gaq.push(['_trackEvent', 'mp3system', 'view', 'song 1', 3456]);
_gaq.push(['_trackEvent', 'mp3system', 'download', 'song 1', 3456]); 
```

> 对于文件下载，最简单的 HTML 是：

```
<a href="file.mp3" onclick="_gaq.push(['_trackEvent', 'mp3system',
'download', 'file.mp3']);return true;">download</a> 
```

以下是相应的 Google 文档：[事件跟踪指南](https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide)

# node.js - 模块版本不匹配。预期 11，得到 1

> ID：15584529
> 
> 赞同：45
> 
> 时间：2013-03-23T07:45:33.470
> 
> 标签：node.js

```
Platform: Linux 
```

运行我的 node.js 程序时出现以下错误

```
Error: Module version mismatch. Expected 11, got 1. 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-03-25T07:35:26.720

你可能会给出这样的错误：

```
Error: Module version mismatch. Expected 11, got 1.
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.require (module.js:364:17)
    at require (module.js:380:17)
    at Object.<anonymous> (/home/user/node_modules/xml2json/node_modules/node-expat/lib/node-expat.js:4:13)
    at Module._compile (module.js:456:26)
    at Object.Module._extensions..js (module.js:474:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.require (module.js:364:17) 
```

然后，您可以注意到模块或某处的错误。

这是因为您已经更新了节点，您可能会重建上面找到的模块。

我通过**重新安装**（删除，然后安装）xml2json 来解决我的问题。

祝你好运！

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2014-10-14T22:26:21.957

npm rebuild 也可以解决问题

[https://www.npmjs.org/doc/cli/npm-rebuild.html](https://www.npmjs.org/doc/cli/npm-rebuild.html)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-03-23T07:45:33.470

```
Platform: Linux 
```

为了将来在 node.js 中参考`v0.10.x`（至少 v0.10.0），我收到了这个错误：

```
Error: Module version mismatch. Expected 11, got 1. 
```

为了解决这个问题，我发现了这个[有趣的链接](https://github.com/LearnBoost/node-canvas/issues/264)，并且还得到了[Ben Noordhuis](https://github.com/bnoordhuis/node-heapdump/issues/9)的一些帮助。以下命令帮助我摆脱了这个错误：

```
npm update 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-04-29T21:51:58.470

这通常发生在您使用一个版本的 Node 安装包，然后更改为不同的版本时。当您更新 Node 或使用 nvm 切换到不同版本时，可能会发生这种情况。

如果您尝试使用全局安装的节点以 root 身份运行进程，但您在自己的用户帐户中运行 nvm 管理的节点，也会发生这种情况。

要解决此问题，您只需使用正确版本的 Node.js 重新安装软件包即可。还要确保您在不同用户中使用相同版本的 Node。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-10-17T19:41:30.640

发生此问题是因为以下情况：您使用的是 Node，例如版本 5。您在项目中添加了一些库，构建并运行它。您的所有库都将在节点版本 5 下编译。

然后你将你的节点升级到版本 6。然后你运行一些使用节点的命令，例如`npm run test`. 问题就在这里：您使用较新的节点版本来运行由较旧节点编译的库。

通过以下 2 个命令可以轻松解决此问题：

```
rm -rf node_modules // force remove node_modules directory
npm install         // install again all libraries. 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-06-11T01:15:59.937

如果您使用的是 nvm，还要尝试一件事 - 确保您在全局以及在应用程序中运行相同版本的节点。

```
:/$ node -v
v6.0.0

:/var/www/app$ node -v
v6.2.0 
```

如果他们不同意：

```
:/$ nvm use 6.2.0
Now using node v6.2.0 (npm v3.8.9) 
```

（这对我有用。）

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-02-10T10:42:04.263

[您可以在此页面https://nodejs.org/en/download/releases/](https://nodejs.org/en/download/releases/)上找到节点模块版本及其相应节点版本的列表

> NODE_MODULE_VERSION 是指 Node.js 的 ABI（应用程序二进制接口）版本号，用于确定哪些版本的 Node.js 编译的 C++ 附加二进制文件可以加载到无需重新编译。它曾经在早期版本中存储为十六进制值，但现在表示为整数。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-10-13T08:04:38.247

有时问题也是由于 nodejs 版本而出现的。

尝试更新 npm 和 nodejs 版本。按照此[链接](https://in.godaddy.com/help/install-nodejs-ubuntu-17395)更新您的 nodejs。

并更新您的 npm 使用：

```
sudo npm install npm -g 
```

希望这可以帮助！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-08-02T13:47:04.810

在我的情况下，错误的原因是针对不同 node.js 版本编译的 C++-AddOn。

因此，您可能必须重新编译您的 C++-AddOn，以便插件的主要版本与您运行的 node.js 匹配。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-07-30T09:30:29.707

我在 systemd 上遇到了这个问题，但我可以使用`node myapp.js`.

事实证明，路径`ExecStart`与我得到的路径不同`which node`。在服务文件中更改它为我修复了它。

[来源](https://stackoverflow.com/a/45398263/3006854)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-10-17T20:26:39.957

没有一个答案对我有用，所以这是我的解决方案。 `Error: Module version mismatch. Expected 48, got 51. at Error (native) at Object.Module._extensions..node (module.js:597:18)` 48 和 51 对应于 nodejs 发布页面上的节点版本： [https ://nodejs.org/en/download/releases/](https://nodejs.org/en/download/releases/)

`rm -rf node_modules/` 所以我安装了nvm，一个节点版本管理器，并将我的节点版本切换到48（6.11.x） ， 然后运行 `npm install`

我的特定模块 mcrypt 依赖于 c++ 二进制文件，节点模块版本有直接影响：

> NODE_MODULE_VERSION 是指 Node.js 的 ABI（应用程序二进制接口）版本号，用于确定哪些版本的 Node.js 编译的 C++ 附加二进制文件可以加载到无需重新编译。它曾经在早期版本中存储为十六进制值，但现在表示为整数。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-01-05T20:19:57.143

更改节点版本后，到达所需位置的最简单方法是：

`rm -Rf node_modules/ && yarn && yarn start`

替换`yarn start`为启动服务器所需的任何命令。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-05-19T15:16:10.320

如果模块是 c++ 附加组件，您可能需要重新构建 node-gyp

```
node-gyp rebuild 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-12-11T12:49:10.400

以上答案都没有为我解决问题。我的解决方案是使用[xml2js](https://www.npmjs.com/package/xml2js)而不是[xml2json](https://www.npmjs.com/package/xml2json)。

# javascript - 分组绑定数据

> ID：15584535
> 
> 赞同：0
> 
> 时间：2013-03-23T07:46:09.317
> 
> 标签：javascript, knockout.js, knockout-2.0

我正在学习 Knockout 并尝试以下方法。数据被显示，但我想要的是数据以块的形式绑定。例如，前 3 个将被绑定，然后是下一个 3，然后是下一个 3，等等。

换句话说：如何将“人”推入“块”中的可观察数组中。

下面是一些示例代码。在我的实际情况下，我正在绑定*图像*，并且它们需要时间来加载，所以这就是我想以块的形式绑定数据的原因。

这是我的视图模型：

```
var viewModel = {
   topicsList : ko.observableArray()
}; 
```

这是数据绑定：

```
dispatcher(viewEvent, function(event, data){    
  $.each(data, function(){
    viewModel.people.push(this);
  });
});

ko.applyBindings(new viewModel); 
```

这是我的 HTML：

```
<div data-bind="foreach: people">
  <div data-bind="text:firstName"></div
</div> 
```

为了将人们推入可观察数组，我尝试了这样的方法：

```
dispatcher(viewEvent, function(event, data) {
  var loop = 0;

  $.each(data, function(){
    ++loop;
    viewModel.topicsList.push(this);
    if(loop%3==0) {                     
      ko.applyBindings(viewModel);
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T18:11:57.543

您可以稍微重写您的视图模型，以便`src`计算[图像](http://knockoutjs.com/documentation/computedObservables.html)：作为基础的占位符图像，或者在加载图像时的实际图像 URL。像这样：

```
function personViewModel(url) {
    var self = this;

    self.firstName = ko.observable("Johndoe");
    self.imageUrl = ko.observable(url);
    self.mayLoad = ko.observable(false);

    self.imageSrc = ko.computed(function() {
        return self.mayLoad() ? self.imageUrl() : "http://soulclimbing.mobi/Content/Media/image-loading-animation.gif";
    });
} 
```

可以使用类似这样的视图：

```
<div data-bind="foreach: people">
  <div>
      <span data-bind="text:firstName"></span>
      <br />
      <img data-bind="attr: {src: imageSrc}" />
  </div>
</div> 
```

为了以三个为一组加载图像，有多种选择。一个基线、hackish、幼稚的解决方案，使用 setInterval 每 X 秒开始一个新块。像这样[的 jsfiddle](http://jsfiddle.net/jeroenheijmans/VDMu2/3/)。

更好的是使用[事件绑定](http://knockoutjs.com/documentation/event-binding.html)在加载下一张图像时开始下载。但是，检查图像是否已加载非常困难（缓存等），因此您可能希望使用库来处理事情。例如，请参阅[此答案](https://stackoverflow.com/a/9589845/419956)。

# php - CakePHP：虚拟字段的变量源

> ID：15584540
> 
> 赞同：0
> 
> 时间：2013-03-23T07:46:57.573
> 
> 标签：php, cakephp, cakephp-model

每个订单都有字段“from_str”和“from_bldg”。在订单模型中，我创建了连接这些字段的虚拟字段“来自”：

```
public $virtualFields = array(
   'from' => 'CONCAT(Order.from_str, " ", Order.from_bldg)'
); 
```

但是，Order 也有指向公司的链接。因此，如果 from_company_id 字段不为 0/null，我想在 Order 的“from”字段中显示公司名称。

例如：

Order1 有`from_str = "Baker st"`, `from_bld = "221B"`, 并且`from_company_id = "0"`
Order2 有`from_str`和`from_bld null`, 但是`from_company_id = "1"`

id = 1 的公司名称为“Sun, Inc.”

因此，对于 Order1 的“发件人”字段，我想获得“Baker st 221B”，
而对于 Order2 的“发件人”字段，我想获得“Sun, Inc.”。

模型或控制器的代码会是什么样子来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T12:56:01.650

您将需要在两个模型之间创建关系。由于您没有根据 CakePHP 约定（即`company_id`）命名外键，因此您必须自己指定。

应用程序/模型/Order.php

```
class Order extends AppModel {
    public $belongsTo = array(
        'Company' => array(
            'foreignKey' => 'from_company_id',
        )
    );
} 
```

应用程序/模型/公司.php

```
class Company extends AppModel {
    public $hasMany = array(
        'Order' => array(
            'foreignKey' => 'from_company_id',
        )
    );
} 
```

并且，在您的控制器内部；

```
$order = $this->Order->find('first, array(
    'conditions' => array(
       'Order.id' => $id,  // or whatever name the ID has
    ),
    'recursive' => 1,
));

debug($order); 
```

这应该为您提供**订单** *和*“**公司”**详细信息。**但是**，*公司*的详细信息会在一个单独的'key'（'Company'）`$order`数组里面。如果这只是为了在您的视图中输出订单，我认为没有理由使用 virtualField 将数据合并到数组内的“订单”键。

如果将数据合并到同一个键是一项重要要求，请描述您的要求，然后我可以进一步帮助您

# r - 如何从 GAM 中提取拟合样条曲线（`mgcv::gam`）

> ID：15584541
> 
> 赞同：17
> 
> 时间：2013-03-23T07:47:07.007
> 
> 标签：r, gam, mgcv

我正在使用 GAM 对逻辑回归中的时间趋势进行建模。但是我想从中提取拟合的样条曲线以将其添加到另一个模型中，该模型无法在 GAM 或 GAMM 中进行拟合。

因此我有两个问题：

1.  如何随着时间的推移拟合平滑器，以便我强制一个结位于特定位置，同时让模型找到其他结？

2.  如何从拟合的 GAM 中提取矩阵，以便可以将其用作不同模型的插补？

我运行的模型类型如下：

```
gam <- gam(mortality.under.2~ maternal_age_c+ I(maternal_age_c^2)+
           s(birth_year,by=wealth2) + wealth2 + sex +
           residence + maternal_educ + birth_order,
           data=colombia2, family="binomial") 
```

我已经阅读了 GAM 的大量文档，但我仍然不确定。任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-23T14:17:44.063

有`mgcv::gam`一种方法可以做到这一点（你的 Q2），通过 `predict.gam`方法和`type = "lpmatrix"`.

`?predict.gam`甚至有一个例子，我在下面复制：

```
 library(mgcv)
 n <- 200
 sig <- 2
 dat <- gamSim(1,n=n,scale=sig)

 b <- gam(y ~ s(x0) + s(I(x1^2)) + s(x2) + offset(x3), data = dat)

 newd <- data.frame(x0=(0:30)/30, x1=(0:30)/30, x2=(0:30)/30, x3=(0:30)/30)

 Xp <- predict(b, newd, type="lpmatrix")

 ##################################################################
 ## The following shows how to use use an "lpmatrix" as a lookup 
 ## table for approximate prediction. The idea is to create 
 ## approximate prediction matrix rows by appropriate linear 
 ## interpolation of an existing prediction matrix. The additivity 
 ## of a GAM makes this possible. 
 ## There is no reason to ever do this in R, but the following 
 ## code provides a useful template for predicting from a fitted 
 ## gam *outside* R: all that is needed is the coefficient vector 
 ## and the prediction matrix. Use larger `Xp'/ smaller `dx' and/or 
 ## higher order interpolation for higher accuracy.  
 ###################################################################

 xn <- c(.341,.122,.476,.981) ## want prediction at these values
 x0 <- 1         ## intercept column
 dx <- 1/30      ## covariate spacing in `newd'
 for (j in 0:2) { ## loop through smooth terms
   cols <- 1+j*9 +1:9      ## relevant cols of Xp
   i <- floor(xn[j+1]*30)  ## find relevant rows of Xp
   w1 <- (xn[j+1]-i*dx)/dx ## interpolation weights
   ## find approx. predict matrix row portion, by interpolation
   x0 <- c(x0,Xp[i+2,cols]*w1 + Xp[i+1,cols]*(1-w1))
 }
 dim(x0)<-c(1,28) 
 fv <- x0%*%coef(b) + xn[4];fv    ## evaluate and add offset
 se <- sqrt(x0%*%b$Vp%*%t(x0));se ## get standard error
 ## compare to normal prediction
 predict(b,newdata=data.frame(x0=xn[1],x1=xn[2],
         x2=xn[3],x3=xn[4]),se=TRUE) 
```

这贯穿了整个过程，甚至是在 R 或 GAM 模型之外完成的预测步骤。您将不得不稍微修改示例以执行您想要的操作，因为示例评估模型中的所有项，并且除了样条之外您还有另外两个项 - 本质上您执行相同的操作，但仅针对样条项，即涉及`Xp`为样条找到矩阵的相关列和行。然后您还应该注意样条曲线居中，因此您可能也可能不想撤消它。

`xn`对于您的 Q1，请为示例中的向量/矩阵选择适当的值。这些对应于`n`模型中第 th 项的值。因此，将您想要固定的值设置为某个平均值，然后改变与样条相关的值。

如果您*在*R 中执行所有这些操作，则仅在样条协变量的值处评估样条曲线会更容易，您拥有的数据将进入另一个模型。您可以通过创建一个数据框来进行预测，然后使用

```
predict(mod, newdata = newdat, type = "terms") 
```

其中`mod`是拟合的 GAM 模型（通过`mgcv::gam`），`newdat`是包含模型中每个变量的列的数据框（包括参数项；将您不想改变的项设置为某个恒定的平均值 [比如数据集中的变量] 或某个水平（如果是一个因素）。该部分将为模型中的每个项（包括样条项）的拟合值的“贡献”`type = "terms"`返回每一行的矩阵。`newdat`只需取对应于样条线的矩阵列 - 再次居中。

也许我误解了你的 Q1。如果您想控制结，请参阅 的`knots`参数`mgcv::gam`。默认情况下，`mgcv::gam`在数据的极端放置一个结，然后剩余的“结”均匀分布在该区间上。`mgcv::gam`没有*找到*结 - 它为您放置它们，您可以通过`knots`参数控制它放置它们的位置。

# c# - 如何区分在 GridView OnUpdating 事件中更新或插入？

> ID：15584546
> 
> 赞同：0
> 
> 时间：2013-03-23T07:47:57.830
> 
> 标签：c#, asp.net, gridview, edititemtemplate

我正在使用 ASP.NET 开发我的 Web 应用程序，我遇到了需要在 GridView 更新事件上区分**更新**和**插入**的情况。

 **```
 protected void GridView_RowUpdating(object sender, GridViewUpdateEventArgs e)
 {
    //conditional check
    if(Update Flage){
        //Call Update Function
    }
    else{
        //Call Insert Function
    }
 } 
```

我在 GridView 中有一个**ItemTemplate**和**EditItemTemplate**，当单击 Edit Button（在 ItemTemplate 上），然后更改为 Update Button（在 EditItemTemplate 上）。

![在此处输入图像描述](../Images/d02223f084fc4fa88787d51e2918ba12.png)

我在 GridView 之外有一个添加按钮，单击后，将新行添加到 GridView 并将按钮文本更改为**添加**，如下代码片段：

```
ds.Tables[0].Rows.InsertAt(ds.Tables[0].NewRow(), 0);
GridViewID.EditIndex = 0;

LinkButton cmdButton = GridView.Rows[0].FindControl("btnUpdate") as LinkButton;
cmdButton.Text = "Add"; 
```

我知道有用于插入行的 InsertItemTemplate，但在我的情况下，我使用 GridView 之外的 Button 来添加新的编辑行。

那么，如何区分 RowUpdating 事件的编辑或插入？有什么推荐的技巧来实现这一目标吗？也许像添加一个 HiddenField 作为一个标志。

提前谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T07:56:13.390

您可以根据该命令名称值识别事件

例如。

```
 protected void GridView_RowUpdating(object sender, GridViewUpdateEventArgs e)
     {
       string arg = e.CommandName.ToString();
    if(arg="Edit")
     {
     }
    else if(arg=="Update")
      {
      } 
```

标记

```
<asp:LinkButton ID="lnkEdit" Text="Customize"  CommandName="edit"  CommandArgument='edit'  runat="server"> 
       </asp:LinkButton> 
```**

# javascript - DOM0 / DOM1 javascript：如果元素有边框将其删除，如果没有添加它

> ID：15584548
> 
> 赞同：0
> 
> 时间：2013-03-23T07:48:05.777
> 
> 标签：javascript

我有一个页面，上面有两张图片。一个有边界，一个没有。

需要创建功能，因此如果存在边框，则会将其删除。如果不存在，则添加。

仅使用 DOM0/1 javascript，没有 Jquery .toggleClass 或你有什么。不知从何下手……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T08:50:17.633

一个非常简单的例子......

html:

```
<div style="border:1px solid black;">hello</div>
<div>and hi</div> 
```

js：

```
toggleBorder = function(e)
{   
    if(e.target.style.border == "")
        e.target.style.border = "1px solid black";
    else
        e.target.style.border = "";
}

var divs = document.getElementsByTagName("div");

divs[0].onclick = toggleBorder;
divs[1].onclick = toggleBorder; 
```

# clojure - Clojure - 从向量中删除项目以表示从一副纸牌中进行交易

> ID：15584553
> 
> 赞同：1
> 
> 时间：2013-03-23T07:49:01.373
> 
> 标签：clojure

我有一个向量向量，用来表示一副纸牌：

```
[["A" "D"] ["K" "H"] ["K" "C"] ["K" "S"] ["K" "D"] ["Q" "H"] ["Q" "C"] ["Q" "S"]
 ["Q" "D"] ["J" "H"] ["J" "C"] ["J" "S"] ["J" "D"] ["T" "H"] ["T" "C"] ["T" "S"]
 ["T" "D"] ["9" "H"] ["9" "C"] ["9" "S"] ["9" "D"] ["8" "H"] ["8" "C"] ["8" "S"]
 ["8" "D"] ["7" "H"] ["7" "C"] ["7" "S"] ["7" "D"] ["6" "H"] ["6" "C"] ["6" "S"]
 ["6" "D"] ["5" "H"] ["5" "C"] ["5" "S"] ["5" "D"] ["4" "H"] ["4" "C"] ["4" "S"]
 ["4" "D"] ["3" "H"] ["3" "C"] ["3" "S"] ["3" "D"] ["2" "H"] ["2" "C"] ["2" "S"]
 ["2" "D"]] 
```

在某些时候，我想“处理”一些牌并将这些牌从牌组中移除。

如果您想告诉我使用 seq 也可以，实际上我的原始文件是向量的 seq，所以这两种方式对我来说都没有关系。

我知道我可能想创建一个“remaining-deck”原子并从这个 seq 或向量中删除项目。

我打算开源这个，这是代码的相关部分：

```
(def suits ["H" "C" "S" "D"])
(def ranks ["A" "K" "Q" "J" "T" "9" "8" "7" "6" "5" "4" "3" "2"])

(def deck (for [x ranks
                y suits]
            [x y]))

;; alternative deck that creates vector:

(def deck2 (vec (for [x ranks
                y suits]
            [x y])))

;;Another way to do it: While it's fine if I have a sequence of string pairs, I'd rather use vectors of vectors because I think destructuring will work better plus I think it'll be consistent across the program. 

(def deck3 (for [x ranks
                y suits]
            (str x y)))

(def hand [(rand-nth deck) (rand-nth deck)])

(def full-hand (concat board hand)) 
```

看起来我可以通过使用一些 .indexOf 函数来连接 subvecs 并将其扔进一个原子中，但我不禁认为这是 hacky 并且 Lisp 应该能够做得比这更好。我真的无法在任何地方找到任何关于此的好信息。我知道删除和过滤，但那些似乎没有做任何事情，只是抛出错误。

* * *

编辑：为什么投反对票？我只是在发牌后尝试更新套牌。

因此，如果我代表一个较小的牌组：

```
[["A" "D"] ["K" "H"] ["K" "C"] ["K" "S"] ["K" "D"] ["Q" "H"] ["Q" "C"] ["Q" "S"]] 
```

然后在从 (ex: player is deal ["Q" "S"] ["Q" "C"] 更新之后，剩余的牌组应该如下所示：

```
[["A" "D"] ["K" "H"] ["K" "C"] ["K" "S"] ["K" "D"] ["Q" "H"]] 
```

这样在剩下的交易中就没有共享手牌或重复牌。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T08:09:38.533

我不确定我是否正确理解了你的问题，但无论我收集到什么，我都会将套牌表示为一个包裹在一个原子中的集合，并且每手牌都更新原子。

```
(def suits ["H" "C" "S" "D"])
(def ranks ["A" "K" "Q" "J" "T" "9" "8" "7" "6" "5" "4" "3" "2"])

(def deck (atom  (->> (for [x ranks
                            y suits]
                        [x y])
                      (into #{}))))

(defn hand []
  (-> (rand-int (count @deck))
      (drop @deck)
      (first)))

(defn play-hand []
  (swap! deck clojure.set/difference #{(hand)}))

(play-hand) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T13:44:18.177

我知道这已经接受了一个答案，但是你确信你想在这里介绍状态吗？我会考虑`deck`作为参数传递给`hand`等。当你想并行处理双手时会发生什么？

# c++ - 如何测试这个 C 库？

> ID：15584556
> 
> 赞同：0
> 
> 时间：2013-03-23T07:49:32.190
> 
> 标签：c++, c, android-ndk

我是 C 编程的新手。很多关于 C 库的理解缺失，如何编译它们或将它们导入 eclipse 和修改部分代码等。我了解如何将库源与 android ndk 一起使用......即编译源并创建 .so 文件然后使用它。

但我的问题是我想首先将这个库作为一个 C 项目进行测试，然后检查它是否真的像预期的那样运行。

这是图书馆的链接......请花点时间看看这个并建议我如何测试这个图书馆。

[http://sourceforge.net/projects/libtimidity/files/libtimidity/0.1.0/libtimidity-0.1.0.tar.bz2/download](http://sourceforge.net/projects/libtimidity/files/libtimidity/0.1.0/libtimidity-0.1.0.tar.bz2/download)

我已经完成了所有设置，即 eclipse CDT、cygwin 等

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T10:42:50.647

首先让我说这听起来像是一项艰巨的任务，尤其是对于“C 编程新手”而言。我从您的链接中快速查看了 libtimidity 源包，根目录中的“INSTALL”文件提到使用：

```
./configure 
```

接着：

```
make install 
```

对于 Linux/Unix 风格的构建来说，这是一个相当标准的模式。该`configure`脚本旨在设置链接和环境设置，并将`make install`源代码实际编译为 exe 和可能的库（如您之前提到的 .so 类型）。

虽然有可能让 cygwin 来构建它，但它可能不是一项微不足道的任务。从您的帖子看来，Windows 并不是您的目标环境（正如您提到的只是使用这个 C 项目进行测试），所以我同意 Basile 的评论，即 Linux 可能是一个更容易建立这个库的环境和运行。

如果您有一台不错的计算机，您可以在虚拟机上运行 Linux（即作为您当前操作系统下的“应用程序”；一个不错的免费软件是 VirtualBox）。或者您可以挖出一台旧计算机并将其安装在上面。或者创建一个可启动的 U 盘。或 Live CD。如果您是 Linux 新手，我会推荐 Ubuntu，因为它是一个流行且得到良好支持的发行版。

# android - 使用 Twitter4j 的 Http 请求不起作用并被卡住

> ID：15584558
> 
> 赞同：1
> 
> 时间：2013-03-23T07:49:38.800
> 
> 标签：android, oauth, twitter-oauth, twitter4j

我正在使用[Twitter4j](http://twitter4j.org/en/index.html)制作一个 twitter 应用程序来学习如何制作应用程序。[通过从 twitter4j 站点](http://twitter4j.org/en/code-examples.html)复制示例代码，我为 ICS 制作了一个非常基本的应用程序。twitter4j api 为 OAuth 进程发送一个 http 请求，然后打开一个发生授权过程的网页。问题是应用程序卡在代码的 http 请求部分。我已经`<uses-permission android:name="android.permission.INTERNET"/>`在清单文件中添加了权限。代码片段如下。

```
 Log.v("storeCredentials", "Started");
        System.out.println("storeCredentials"+" Started");
        Twitter t1 = TwitterFactory.getSingleton();
        t1.setOAuthConsumer(twitter.getConsumerKey(), twitter.getConsumerSecret());
        Log.v("storeCredentials", "consumer set");
        System.out.println("storeCredentials"+" consumer set");
        //ConnectionDetector detective = new ConnectionDetector(this);
        System.out.println("storeCredentials"+" debug 5");
        Log.v("storeCredentials", "connection present");

        //Progress Dialog
        System.out.println("storeCredentials"+" debug 6");
        final ProgressDialog d1 = new ProgressDialog(this);
        System.out.println("storeCredentials"+" debug 7");
        d1.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        d1.setCancelable(false);
        d1.show();

        new Thread(new Runnable(){
            public void run()
            {
                Twitter temp = TwitterFactory.getSingleton();
                temp.setOAuthConsumer(twitter.getConsumerKey(), twitter.getConsumerSecret());
                try
                {
                    RequestToken tempToken = temp.getOAuthRequestToken();
                    AccessToken accessToken = null;
                    System.out.println("storeCredentials"+" debug 10");
                    Log.v("storeCredentials", "tokens init");
                    //BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
                        //while (null == accessToken) return true;
                        String url = tempToken.getAuthorizationURL();
                        //String url = "http://www.google.co.in";
                        if (!url.startsWith("https://") && !url.startsWith("http://"))
                        {
                            url = "http://" + url;
                        }
                        Uri webpage = Uri.parse(url);
                        Intent webIntent = new Intent(Intent.ACTION_VIEW, webpage);
                        Log.v("storeCredentials", "Intent created");
                        System.out.println("storeCredentials"+" Intent created");
                        // Verify it resolves
                        PackageManager packageManager = getPackageManager();
                        List<ResolveInfo> activities = packageManager.queryIntentActivities(webIntent, 0);
                        boolean isIntentSafe = activities.size() > 0;
                        Log.v("Number of browsers", String.valueOf(activities.size()));
                        System.out.println("storeCredentials"+" Number of browsers" + " String.valueOf(activities.size())");
                        // Start an activity if it's safe
                        if (isIntentSafe) 
                        {
                            startActivity(webIntent);
                        } 
```

我很确定该应用程序会卡`RequestToken tempToken = temp.getOAuthRequestToken();`在行中，因为我没有收到要求我选择浏览器的提示。来自 twitter4j 站点的示例代码运行良好。我通过在 java 应用程序中使用它来验证这一点。

发生这种情况有什么原因吗？我是否还必须包括其他一些许可才能返回请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T18:05:01.327

这是通过执行 http 请求以在异步任务上检索 twitter4j 的请求令牌来解决的。

```
public void getRequestToken()       
{
 Log.v("storeCredentials", "Started");
                System.out.println("storeCredentials"+" Started");
                Twitter t1 = TwitterFactory.getSingleton();
                t1.setOAuthConsumer(twitter.getConsumerKey(), twitter.getConsumerSecret());
                Log.v("storeCredentials", "consumer set");
                System.out.println("storeCredentials"+" consumer set");
                //ConnectionDetector detective = new ConnectionDetector(this);
                System.out.println("storeCredentials"+" debug 5");
                Log.v("storeCredentials", "connection present");

                //Progress Dialog
                System.out.println("storeCredentials"+" debug 6");
                final ProgressDialog d1 = new ProgressDialog(this);
                System.out.println("storeCredentials"+" debug 7");
                d1.setProgressStyle(ProgressDialog.STYLE_SPINNER);
                d1.setCancelable(false);
                d1.show();
        new RequestLoginToken().execute(1);
}
    public class RequestLoginToken extends AsyncTask<Integer, Void, RequestToken> {

                        @Override
                        protected RequestToken doInBackground(Integer... params) {
                            int code = params[0].intValue();

                            Twitter temp = TwitterFactory.getSingleton();
                            System.out.println("storeCredentials"+" debug 7");
                            RequestToken tempToken = null;
                            System.out.println("storeCredentials"+" debug 8");
                            try
                            {
                                tempToken = temp.getOAuthRequestToken();
                                System.out.println("storeCredentials"+" debug 9");
                            }
                            catch( Exception e)
                            {
                                System.out.println("Error getting token");
                            }
                            return tempToken;

                        }

                        @Override
                        protected void onPostExecute(RequestToken token)
                        {
                            pd1.dismiss();
                            if(token==null)
                            {
                                Toast.makeText(context, "Try again", Toast.LENGTH_SHORT).show();
                                return;
                            }
                            requestToken = token;
                            pd1.dismiss();
                            flag = true;
                            launchURL(requestToken.getAuthenticationURL());
                        }

                    } 
```

# c++ - const 基类的影响

> ID：15584561
> 
> 赞同：10
> 
> 时间：2013-03-23T07:50:01.853
> 
> 标签：c++, constants, derived-class

以下构造的实际效果是什么：

```
class Base { /* ... */ };

template<class T>
class Derived : public T { /* ... */ };

int main() {
    Derived<const Base> d;
    // ...
} 
```

该类是否`Derived`只能访问`const`接口的 - 部分`Base`？我的第一次测试表明实际上根本没有效果。为什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T08:00:45.747

我的猜测是`const`被忽略了，因为如果你尝试写

```
class Derived : public const Base 
```

该程序[无法编译](http://ideone.com/JLJCVV)。

**编辑：**

[freezekoi](https://stackoverflow.com/users/599926/frozenkoi)在评论中给出了标准的相关部分：

> “命名类类型或其 cv 限定版本的 typedef-name (7.1.3) 也是类名。如果使用命名 cv 限定类类型的 typedef-name，其中 class- name 是必需的，忽略 cv 限定符。typedef-name 不应用作类头中的标识符。§9.1

# grails - username in params always null in filter

> ID：15584569
> 
> 赞同：0
> 
> 时间：2013-03-23T07:51:25.867
> 
> 标签：grails

I am using grails 2.2.0 to an application with login page and add users feature ,

Here is the authentication method in the contoller :

```
def auth()
{

    def user = AppUsers.findByUsernameAndPassword (params?.username , params?.password.encodeAsSHA())

    if(params.username==user?.username && params.password.encodeAsSHA()==user?.password/*.encodeAsSHA()*/)
    {

        flash.message =message(code:'user.log.suc',args:[params.username])
        session.user=params.username

        redirect (controller:'patients' , action:'list')

    }
    else
    {
        //render ('login failed in if')
        //flash.message='login failed'
        flash.message =message(code:'user.log.failed',args:[params.username])

        redirect (action:'login')
    }

} 
```

and here is to check if the user is admin or not :

```
def beforeInterceptor = [action:this.&isUserAdmin , except :[/*'auth' ,*/ 'logout', 'login']]

def isUserAdmin ()
{

    sherifUser=params.username
    if (!params?.username?.empty)
    {
        //  println("session userrr " +session.user)
        def userRole =AppUsers.findByUsername(params.username)//(username :'${params.username}', role:'admin')
        println("userrole " + userRole.role)
        //session.setAttribute("${params.username}", userRole.role)
        session["${params.username}"] = userRole.role
        println("session role : " + session.getAttribute("${params.username}"))
        return true
    }

    else
    {
        flash.message ="username or password empty"
        render(action:'login')
    } 
```

}

and I'm using a filter to check if the user got admin role or not before entering to the add users page , here is the filter :

```
class AdminFilters 
```

{

```
def filters =
{
    adminOnly(controller:'appUsers', action: '(create|edit|show|list|update)')
    {
        before =
        {
            //  def sessions = RequestContextHolder.currentRequestAttributes().getSession()
            println("params username" + params.username) // this always returns back null !!
            def userRole = AppUsers.findByUsername(params.username)
            println("useeeeeee in fillter role " + session["params.username"])

            if (userRole?.equalsIgnoreCase("user"))
            {
                flash.messsage= " this area for admins only"
                redirect (controller:'appUsers' , action:'login')
                return false
            }
            else
            {
                flash.messsage= " Welcome admin"
                redirect (controller:'appUsers' , action:'list')
            }
        }
        after =
        { Map model ->
        }
        afterView =
        { Exception e ->
        }
    }
} 
```

}

what cause that always params.username is null in the filter , altough the auth() method is working perfect ?!!

Any clarifications ?

Thanks Sherif

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T11:18:03.940

我的第一个猜测是您的过滤器定义并不完全正确。

`adminOnly(controller:'appUsers', action: '(create|edit|show|list|update)')`

应该..

`adminOnly(controller:'appUsers', action: 'create|edit|show|list|update')`

**更新..**

查看代码后的另一个疯狂猜测。当您的用户成功通过身份验证时，在 auth() 方法中，您将用户名放入会话中。之后不再设置 params.username ！当您执行**重定向（控制器：'患者'，操作：'列表'）之**类的重定向时，您将在页面成功呈现后丢失所有参数。一个解决方案是在 adminOnly 过滤器中重新使用 session.user。

```
 println("username" + session?.user)
        def userRole = AppUsers.findByUsername(session?.user)
        println("useeeeeee in fillter role " + session.user) 
```

# jquery - jquery mobile 1.3 bugs in setting default value of selector?

> ID：15584570
> 
> 赞同：1
> 
> 时间：2013-03-23T07:51:32.680
> 
> 标签：jquery, cordova, jquery-mobile

From this link, [http://jsfiddle.net/hRqZP/1/]1, I can able to set the default value of the radio input and selector, however, if i change it to jQuery Mobile 1.3, problems seem happened. The living place is not 789 instead it is 123\. And the gender is not correct too. If the version of jQuery Mobile changes to 1.2, everything goes right. Is there any problems on 1.3 on these issue?

# java - 你能解释一下这个字谜函数是如何工作的吗？

> ID：15584571
> 
> 赞同：1
> 
> 时间：2013-03-23T07:51:36.347
> 
> 标签：java, algorithm, anagram

我有这个代码，我从互联网上拉下来的。它的作用是检查两个字符串是否是字谜。这基本上意味着它们具有相同数量的字母，具有相同种类和数量的字母。例如， "scrap" 和 "craps" 或 "hear" 和 "hare" 。诸如此类。无论如何，我的问题是我不明白它是如何工作的。如果有人能给我一点见解，那将很有帮助！谢谢你们的时间！我很感激！这是具体的代码。我没有得到 for 循环部分。

```
boolean isAnagram(string s1, string s2) { 
    if (s1.length != s2.length) 
        return false; 
    char [] a1 = s1.toCharArray(); 
    char [] a2 = s2.toCharArray(); 
    for (int i = a1.length - 1; i >= 0; --i) { 
        int j; 
        for (j = a2.length - 1; j >= 0; --j) { 
            if (a1[i] == a2[j]) 
                break; 
            } 
            if (j < 0) 
                return false; 
    } 
    return true; 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T08:44:47.073

该代码似乎需要做很多简单的工作，并且很难完全理解它并验证它是否正常工作。

一个*更*简单的方法怎么样？按字符对每个字符串进行排序。如果它们是彼此的字谜，则字符串将相等。您仍然可以将长度检查作为优化，但无论是否进行该检查，代码都会给出正确的结果。

我的 Java 生锈了，所以让我给你一个 JavaScript 版本。我相信你可以接受这个想法并翻译它：

```
function isAnagram( s1, s2 ) {
    return(
        s1.length === s2.length  &&
        sortString(s1) === sortString(s2)
    );
}

function sortString( s ) {
    return s.split('').sort().join('');
}

function test( s1, s2, expected ) {
    var result = isAnagram( s1, s2 );
    var ok = ( result === expected ? 'OK' : '*FAIL*' );
    console.log( s1, s2, result, ok );
}

test( 'dog', 'cat', false );
test( 'bag', 'big', false );
test( 'bag', 'gab', true );
test( 'bags', 'gab', false );
test( 'foobar', 'baroof', true );
test( 'aaaa', 'abbb', false ); 
```

测试给出了这个日志：

```
dog cat false OK
bag big false OK
bag gab true OK
bags gab false OK
foobar baroof true OK
aaaa abbb false OK 
```

在下面的评论中，G. Bach 提出了一个很好的观点，即其他算法可能比这个算法快很多。如果手头的任务如上所述，确定两个特定的字符串是否是字谜，那么性能就不太重要了。即使是这种简单的算法也应该足够快。

OTOH，如果您正在处理大量字符串以找出哪些是哪个字谜，那么性能当然变得更加重要。即便如此，在“包中”有一个像这样简单且易于理解的实现也是很有价值的。例如，您可以使用这种简单的方法作为测试用例的一部分来验证您的更快算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T07:53:57.033

在外循环中逐个字符地遍历第一个字符串。检查该字符是否存在于第二个字符串中，这是在内部循环中完成的。如果不存在，则返回 false。

就是这样。您需要验证它是否处理所有条件。

理想情况下，您应该能够通过阅读代码或使用一些调试器逐行浏览它来弄清这个逻辑。

# ruby - Ruby：在字符串中转义括号

> ID：15584576
> 
> 赞同：0
> 
> 时间：2013-03-23T07:51:57.750
> 
> 标签：ruby

我正在做一个数据库查询并且想要转义字符串中的括号，只有当它在我的查询结果中返回时，例如：

/这是一个测试字符串（2013）/

我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T08:41:30.763

要创建一个所有特殊字符都转义的正则表达式，请使用

```
Regexp.new( Regexp.escape(str) ) 
```

我希望这是你想要达到的目标。

# netbeans - Netbeans Project Panel toggle

> ID：15584578
> 
> 赞同：0
> 
> 时间：2013-03-23T07:52:15.823
> 
> 标签：netbeans, ide

Is there any keyboard short cut in netbeans for toggling between project panel.

For example if I'm working on a laptop and sometime I need for space for see the code window and always I have to click on the project's panel to hide it.

Is there any way I can quickly hide and show that left side thing?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T08:28:15.943

您可以使用`Shift`+`ESCAPE`最大化当前窗口（例如代码编辑器）。

或者，右键单击当前文件的编辑器选项卡并选择“最大化”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-23T16:10:18.470

您可以使用`shift`+`esc`隐藏或显示您的项目面板。

# c# - C# base class of unbound generic type not usable?

> ID：15584579
> 
> 赞同：2
> 
> 时间：2013-03-23T07:52:26.747
> 
> 标签：c#, generics

I am stumped by weird behavior while working with generics in C#. Consider this code:

```
class CEmployee<T> { }
class CManager<T> : CEmployee<T> { }

class Program
{
    static void Main(string[] args)
    {
        CManager<String> cemp = new CManager<String>();
        Console.WriteLine(cemp.GetType());
        Console.WriteLine(cemp.GetType().FullName);
        Console.WriteLine(cemp.GetType().BaseType);
        Console.WriteLine(cemp.GetType().BaseType.FullName);
        Console.WriteLine(1);
        Console.WriteLine(cemp.GetType().GetGenericTypeDefinition());
        Console.WriteLine(cemp.GetType().GetGenericTypeDefinition().FullName);
        Console.WriteLine(cemp.GetType().GetGenericTypeDefinition().BaseType);
        Console.WriteLine(cemp.GetType().GetGenericTypeDefinition().BaseType.FullName); // Problem 1
        Console.WriteLine(2);
        Console.WriteLine(typeof(CManager<>));
        Console.WriteLine(typeof(CManager<>).FullName);
        Console.WriteLine(typeof(CManager<>).BaseType);
        Console.WriteLine(typeof(CManager<>).BaseType.FullName); // Problem 1
        Console.WriteLine(3);
        Console.WriteLine(typeof(CManager<>).Equals(cemp.GetType().GetGenericTypeDefinition()));
        Console.WriteLine(typeof(CEmployee<>).Equals(cemp.GetType().GetGenericTypeDefinition().BaseType)); // Problem 2

    }
} 
```

The output is

```
ConsoleApplication1.CManager`1[System.String]
ConsoleApplication1.CManager`1[[System.String, mscorlib, Version=4.0.0.0, Culture=neutr
ConsoleApplication1.CEmployee`1[System.String]
ConsoleApplication1.CEmployee`1[[System.String, mscorlib, Version=4.0.0.0, Culture=neut
1
ConsoleApplication1.CManager`1[T]
ConsoleApplication1.CManager`1
ConsoleApplication1.CEmployee`1[T]

2
ConsoleApplication1.CManager`1[T]
ConsoleApplication1.CManager`1
ConsoleApplication1.CEmployee`1[T]

3
True
False 
```

I am stumped as to why the base class of the unbound generic type is not fully usable:

1.  Why am I getting nothing when I get the full name of the base type of unbound generic type? ("problem 1" in the code above)
2.  Why if the base type of my CManager instance is CEmployee, and the type of the base class of the unbound type CManager<> is CEmployee<>, and the unbound type CManager "Equals" the generic type definition of my instance, the base type of the unbound type does not "Equals" the base type of the generic type definition of my instance?? ("problem 2" in the code above)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-23T08:02:54.820

以相反的顺序：

2：因为基本类型是`CEmployee<T>`，不是`CEmployee<>`。它们是有区别的; `CEmployee<>`是类型定义；`CEmployee<T>`绑定到`T`from 父类型。您可以通过查看`IsGenericTypeDefinition`和`GetGenericArguments()[0]`

1：因为`FullName`没有定义这种形式的泛型类型。这是[完整记录](http://msdn.microsoft.com/en-gb/library/system.type.fullname.aspx)的：

> 如果当前类型包含没有被特定类型替换的泛型类型参数（即 ContainsGenericParameters 属性返回 true），但该类型不是泛型类型定义（即 IsGenericTypeDefinition 属性返回 false），则该属性返回无效的。

这正是我们在“2”中讨论的内容。

# php - 如何防止 html 元素成为 $.ajax 成功响应中响应的一部分？

> ID：15584582
> 
> 赞同：-1
> 
> 时间：2013-03-23T07:52:43.657
> 
> 标签：php, jquery

我正在通过 ajax 提交一个 html 表单并通过同一个 .php 文件打印错误。我的代码看起来有点像

1.php

```
<?php
  if(!cond){
    echo "error1"
  }else{
    echo "error2"
  }
?>
<form action="#">
<button> and other elements. 
```

现在，如果我`$('#err').html(response)`从我`.js`的任何错误中打印，它显然会打印`1.php`必须提供的任何内容，包括 html 按钮和不提供的内容。我的问题是我不希望这些 html 实体出现在我的回复中。我显然可以匹配每个错误`.js`并单独打印它们，但我想知道是否有一种有效的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T08:09:43.250

好吧，如果需要在单个文件中执行所有操作，则可以`HTTP_X_REQUESTED_WITH`像这样检查标题：

```
<?php
  if(!cond){
    echo "error1"
  }else{
    echo "error2"
  }

if (!strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) === 'xmlhttprequest') {
    ?>
    <form action="#">
    <button> and other elements.
    <?php
} 
```

但更好的方法是创建单独的 php 文件来处理您的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T08:05:04.850

您只能返回错误代码并通过 javascript 处理它，如下所示：

在present.php中

```
eval("x=" + response);
if(x.Err=='2')
{
    //show error and ...;
} 
```

在 service.php 中：

```
$Res[Err]=2;
echo json_encode($Res) 
```

# c# - Confirmation Url comes up as a string in Hotmail

> ID：15584583
> 
> 赞同：0
> 
> 时间：2013-03-23T07:52:58.563
> 
> 标签：c#, visual-studio-2012, ef-code-first, simplemembership, postal

I have this in my Account Controller Register:

```
var token = WebSecurity.CreateUserAndAccount(
                model.UserName,
                model.Password,
                    new
                    {
                        model.Email
                    },
                true);

var confirmationUrl = System.Web.HttpContext.Current.Request.Url.GetLeftPart(UriPartial.Authority) +
        "/Account/ConfirmAccount/" + token;

dynamic email = new Email("RegisterConfirmation");
email.To = model.Email;
email.UserName = model.UserName;
email.ConfirmationUrl = confirmationUrl;
email.Send(); 
```

Usually i expect that to send out a link to emails and its doing so when sent to a `GMail` and `Yahoo` account, but when sent to a`Hotmail` account the link is sent as a plain `string` which would require copy and past to navigate there.

Any ideas on what's causing this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T08:35:50.750

我希望它与hotmail有关。

如果需要，您可以将电子邮件标记为 html（我相信 email.IsHtml= true）并将其写入 html，它应该适用于所有内容。

# jquery - Jquery：.preventDefault() 并返回 false 不起作用

> ID：15584584
> 
> 赞同：1
> 
> 时间：2013-03-23T07:53:05.220
> 
> 标签：jquery, html, href, preventdefault

好吧，这次代码让我发疯

我花了两个多星期使用 e.preventDefault() 并返回 flase 以防止 onclick href 进入页面顶部，但它们不起作用

我用`javascript:void(0)`它停止滚动窗口到顶部，但输入字段没有生成。

我确定在我的代码中使用这些解决方案有问题，如果在我的代码中使用这两种方法有问题，请告诉我

**我的代码：**

我正在尝试使用 PHP 和 jquery 构建一个向导

在此向导的第 2 步中，我想在用户单击时动态生成输入字段

`<h2><a href="#" id="addScnt">Add Another Input Box</a></h2>`

这是 Javascript

```
$(document).ready(function(){
/*****************************/

$('#table_name_error').hide();

  // all content starts hidden
 $('.wizardcontent').hide();
    $('#wizardcontent').hide();
  // initialize the wizard state
  load_state(1);

  // loads new state based on button clicked
  $(':button').click(function(){
        //reset the wizardcontent to hidden
        //$('#wizardcontent').hide();
        //load_state(++current_state);
    var current_state = $('#wizard').attr('class');
    //we only want the number, converted to an int
    current_state = parseInt(current_state.replace(/(step_)/, ""));
        //figure out if 'next' or 'previous' was clicked and load appropriate state
    if ($(this).attr('id') == 'next'){ 
    switch(current_state){
        case 1:

        $('#wizardcontent').hide();
            load_state(++current_state);
        break;

        case 2:
            var scntDiv = $('#p_scents');
        var i = $('#p_scents p').size() + 1;

        $('#addScnt').on('click', function() {
                $('<p><label for="p_scnts"><input type="text" id="p_scnt" size="20" name="p_scnt_' + i +'" value="" placeholder="Input Value" /></label> <a href="#" id="remScnt">Remove</a></p>').appendTo(scntDiv);
                i++;
                return false;
        });

        $('#remScnt').on('click', function() { 
                if( i > 2 ) {
                        $(this).parents('p').remove();
                        i--;
                }
                return false;
        });

        var table_name=$('#table1').val();
        table_name=$.trim(table_name);
            if (table_name.length<3 || table_name.length>64){
            $('#table_name_error').show();
            $('#table_name_error').html("<p>Error: Minimum length for table name is 3 <br/>Maximum length for table name is 64 characters</p>");
            }else{

            $('#wizardcontent').hide();
            load_state(++current_state);
            }

        break;
        case 3:

        $('#wizardcontent').hide();
            load_state(++current_state);
            break;

        }

     }
    else if ($(this).attr('id') == 'previous'){ load_state(--current_state); }

  });

/**************************/

});

function load_state(current_state){
    //disable all buttons while loading the state
    $('#previous').attr("disabled","disabled");
    $('#next').attr("disabled","disabled");
    $('#save').hide();
  //load the content for this state into the wizard content div and fade in
  var content = $('#step_' + current_state).html();
  $('#wizardcontent').html(content);
    $('#wizardcontent').fadeIn("slow");
  //set the wizard class to current state for next iteration
  $('#wizard').attr('class','step_'+ current_state);
  var iterator = 1;
  // the state heading h3\. removing is no biggie
  $('#wizard h3').text("Step " + current_state);
  // loop through the list items and set classes for css coloring
  $('#mainNav li').each(function(){
        var step = $(this)
    if (iterator == current_state){ step.attr('class','current'); }
    else if (current_state - iterator == 1){ step.attr('class','lastDone'); }
    else if (current_state - iterator > 1){ step.attr('class','done'); }
    else{ step.attr('class',''); }
        // special case for step 5 because it doesn't have bacground image
        if (iterator == 3){ step.addClass('mainNavNoBg'); }
    iterator++;
  });
    //depending on the state, enable the correct buttons
    switch(current_state){
        case 1:
        $('#next').show();
                $('#next').removeAttr("disabled");
        $('#previous').hide();
            break;

        case 3:
        $('#previous').show();
            $('#previous').removeAttr("disabled");
            $('#next').hide();
            $('#save').show();
            break;
        default:
        $('#save').show();
        $('#previous').show();
        $('#next').show();

            $('#previous').removeAttr("disabled");
            $('#next').removeAttr("disabled");
            break;

    }
} 
```

这是html代码

```
<fieldset class="wizardcontent" id="step_2">
                  <b>Type name of the first table:</b><br/>

                  <input type='text' id='table1' name='table1'/>
                  <div id='table_name_error' name='table_name_error' class='error'></div>
                  <br/><br/>

                  <b>Identify table attributes, along with the basic type:</b><br/>
                    <h2><a href="#" id="addScnt">Add Another Input Box</a></h2>

                    <div id="p_scents">
                        <p>
                            <label for="p_scnts"><input type="text" id="p_scnt" size="20" name="p_scnt" value="" placeholder="Input Value" /></label>
                        </p>
                    </div></fieldset> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T08:00:11.230

**.preventDefault();**

我在您的代码中找不到`preventDefault();`，但这可能是您的标题中的拼写错误……需要确保的几件事。

确保你有事件变量：

```
$('a').click(function(event) {
    // `event` is the event variable
}); 
```

然后只需使用：

```
event.preventDefault(); 
```

总而言之：

```
$('a').click(function(event) {
    event.preventDefault();
}); 
```

上面的代码将阻止所有锚点转到它们指定的超链接。

**返回假；**

我过去经常使用，但这些天`return false;`我已经搬到了活动中。`.preventDefault()`这里要记住的一件事是，如果您的函数的任何部分包含`return false;`抛出异常，它将无法到达它。因此，您试图阻止的事件无论如何都会触发。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T08:17:38.033

```
$('.class').click(function() {

// Do what ever here

return false;

}); 
```

这对我有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-10T09:02:39.227

我认为你可以这样做：

```
 $('#addSnt').click(function(event) {
        if (event.preventDefault) {
            event.preventDefault();
            // Do something
        } else {
            // Do something
            return false;
        }
    }); 
```

如果 event.preventDefault 退出，则不需要`return false`, 否则用于`return false`防止默认行为。

# c - How to allocate memory while using typedef?

> ID：15584589
> 
> 赞同：-6
> 
> 时间：2013-03-23T07:53:26.593
> 
> 标签：c

I have a code segment which goes something like this

```
typedef struct node* node_t;

struct node{
int value;
node_t link;
};

......
......
......

//now I want to allocate memory somewhere else in the program.
node_t x;
x=(node_t) malloc(sizeof *x); 
```

Could you please tell me if the above statement is proper? Eclipse shows this warning

```
warning: implicit declaration of function ‘malloc’ [-Wimplicit-function-declaration]
../tree.c:22:9:
warning: incompatible implicit declaration of built-in function ‘malloc’ 
```

Can someone explain in detail about situations like this? What is actually wrong with this. I would really appreciate if you could list all the possible ways in which I can allocate memory in this program? Thank you in advance..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T07:57:37.840

为了使用`malloc`，您需要包含`<stdlib.h>`. 此外，分配内存，如

```
node_t x = malloc(sizeof node_t); 
```

您不能将内存分配给堆栈变量，而只能分配给指针。并且永远不要转换回分配的类型，作为`malloc`返回`void*`，这不需要显式转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T07:54:20.743

You need an

```
#include <stdlib.h> 
```

before you use `malloc`. You apparently declared the function wrong in your source. Never declare C standard library functions. Just include the headers that declare them.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T07:55:09.590

> Could you please tell me if the above statement is proper?

No, it isn't: you're casting the return value of `malloc()` and you're missing the `<stdlib.h>` header.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T11:23:35.170

您收到警告是因为您没有`malloc`范围内的声明；您需要包含`stdlib.h`头文件：

```
#include <stdlib.h> 
```

你也应该放弃演员表。这不是必需的，并且在其他编译器下会抑制您尝试将`int`值分配给指针类型的诊断。

*请*不要将指针隐藏在 typedef 后面。这几乎总是一个坏主意。

# html - 渲染所见即所得的编辑文本

> ID：15584593
> 
> 赞同：1
> 
> 时间：2013-03-23T07:53:54.160
> 
> 标签：html, tinymce, rendering

我正在使用 TinyMce 所见即所得的文本编辑器。我可以按预期将文本发送到服务器。出乎意料的是，webbrowser 并没有很好地渲染它。保存在服务器中的文本是这样的：

```
"&lt;p&gt;this is my content&lt;/p&gt;" 
```

好的！当我渲染它时，

```
<p>this is my content</p> 
```

在浏览器中可以看到。我确信它背后有非常小的事情，我现在不知道。我将内容保存在 MySql 数据库中并进行简单的 ajax 调用来呈现文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T08:09:45.403

您需要`&lt;p&gt;this is my content&lt;/p&gt;`在服务器端解码，它可以防止来自您网站的恶意攻击代码

# java - java中的正则表达式-代码错误

> ID：15584595
> 
> 赞同：2
> 
> 时间：2013-03-23T07:53:59.830
> 
> 标签：java, regex

我用java写了一个正则表达式程序。我认为这是真的，但结果是不同的。请帮我解决这个问题。

我的代码：

```
String text    ="My wife back me up over my decision to quit my job";

String patternString = "[/w/s]*back(\\s\\w+\\s)*up[/w/s]*.";

Pattern pattern = Pattern.compile(patternString, Pattern.CASE_INSENSITIVE);

Matcher matcher = pattern.matcher(text);

boolean matches = matcher.matches();

System.out.println("matches = " + matches); 
```

输出：匹配=假

我是java编程新手。我想用正则表达式编写一个程序来测试输入句子中“备份”的匹配。

感谢您的关注。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T08:05:09.713

我认为你的模式应该是这样的：

```
String patternString = "[\\w\\s]*back(\\s\\w+\\s)*up[\\w\\s]*."; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T07:58:50.490

您正在使用正斜杠而不是反斜杠：

```
String patternString = "[/w/s]*back(\\s\\w+\\s)*up[/w/s]*.";
                         ^ ^                       ^ ^ 
```

两者不可互换（不要忘记反斜杠需要加倍）。

# sql - Rolling averages in SQL Server 2012 using range

> ID：15584602
> 
> 赞同：1
> 
> 时间：2013-03-23T07:54:40.373
> 
> 标签：sql, tsql, sql-server-2012, analytic-functions

I’m trying to calculate a 3 month rolling average grouped by region and month, as in

```
Region  Month                 Avg(var_a)    Avg(var_b)
Northland   Dec-Jan-Feb       7.1           5.9
Southland   Dec-Jan-Feb       7.2               6.1
Northland   Nov-Dec-Jan       7.4           6.1
Southland   Nov-Dec-Jan       7.5           6.2
Northland   Oct-Nov-Dec       7.5               6.2
Southland   Oct-Nov-Dec       7.5           6.1 
```

Note that month is expanded for illustrative purposes, I’d really expect the output to just say a single month.

Now I can do this by creating a CTE grouping by region and month, then joining to it a couple times like

```
With month_rollup_cte as
    (Select region,month,sum(var_a) a_sum, sum(var_b) b_sum, count(1) cnt
From vw_score_by_region
    Group by region,month)
Select c1.region, c1.month,sum(c1.a_sum + c2.a_sum + c3.a_sum) / sum(c1.cnt + c2.cnt + c3.cnt) a_avg, sum(c1.b_sum + c2.b_sum + c3.b_sum) / sum(c1.cnt + c2.cnt + c3.cnt) b_avg
From month_rollup_cte c1
Join month_rollup_cte c2 on c1.region = c2\. Region and c1.month = dateadd(mm,1,c2.month)
Join month_rollup_cte c3 on c1.region = c3\. Region and c1.month = dateadd(mm,2,c3.month)
Group by c1.region, c1.month; 
```

But that’s ugly, imagine if you had to do a 6 month rolling average or 12 month rolling average… I’m trying to use the t-sql 2012 analytic functions, specifically the RANGE option. I’ve used ROWS preceding before, but never range.

What I tried was

```
select region,avg(var_a) OVER (order by (year(entry_month) * 100 + month(entry_month)) range between 2 preceding and 1 following)    
from [dbo].[vw_score_by_region]
group by region 
```

But I get a syntax error:

> *Msg 8120, Level 16, State 1, Line 2
> Column 'dbo.vw_score_by_region.month' is invalid in the select list because it is not contained in either an aggregate function or the GROUP BY clause.*

Clearly I'm doing something silly, but I'm not sure what.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T09:39:55.807

首先，**RANGE**仅支持**UNBOUNDED**和**CURRENT ROW**帧分隔符，它不能与**N PRECEDING**或**N FOLLOWING**一起使用。
从你的标题看来，你想得到 3 个月的滚动平均（滑动平均），那么你最好使用**ROWS**
Using **ROWS**（这更有可能是你需要的）[SQl Fiddle Demo](http://sqlfiddle.com/#!6/cb84b/1)

```
 select region,
       avg(var_a) OVER (partition by region 
                        order by (entry_month) 
                        rows between 2 preceding and current row) as ThreeMonthSlidingAvg  
from [dbo].[vw_score_by_region] 
```

笔记：

```
不需要计算年+月，如果entry_month是日期或日期时间，已经可以排序了，感谢史蒂夫的指正。
```

使用范围：

```
 select region,
       avg(var_a) OVER (partition by region,(year(entry_month) * 12 + month(entry_month))/3

                  order by (entry_month) 
                  range between unbounded preceding and current row) as ThreeMonthSlidingAvg

from [dbo].[vw_score_by_region] 
```

注意：使用 RANGE 你必须控制分区宽度，因为你想 agg 3 个月，并且 range 不支持**N PRECEDING**和**N FOLLOWING**，它只支持以下：

```
| 前无界 | 在分区的第一行启动窗口
| 无限关注 | 在分区的最后一行结束窗口
| 当前行 | 在当前行开始或结束窗口

```

# java - How to globally change the ActionMap of Swing JTextFields?

> ID：15584605
> 
> 赞同：2
> 
> 时间：2013-03-23T07:54:50.363
> 
> 标签：java, swing, jtextfield, jtextcomponent, uimanager

I want to change the ActionMap of Swing JTextFields in my entire Application by replacing a few actions by my custom implmentations. For an explanation why you can refer to the following post:

[How do I make the caret of a JTextComponent skip selected text?](https://stackoverflow.com/questions/15554728/how-do-i-make-the-caret-of-a-jtextcomponent-skip-selected-text)

This works well if I do this:

```
ActionMap map = (ActionMap)UIManager.get("TextField.actionMap");
map.put(DefaultEditorKit.backwardAction, new MyCustomAction()); 
```

The only remaining problem now is that so far I have only gotten this to work, when I execute that code **after** the first instantiation of a JTextField. However, ideally I would like to integrate this code in a custom look and feel or some other central place that does not have to know about the application. Calling

```
UIManager.getDefaults() 
```

first does not change anything. The map returned by *UIManager.get("TextField.actionMap")* is still null afterwards.

Right now I am Stuck with putting a dummy *new JTextField()* in some initialization method of my application and then manipulate the action map which is very ugly.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T11:00:50.503

共享父 actionMap 是在 XXTextComponent 的*第一个*实例获取其 uielegate 时创建的。该方法在 BasicTextUI 中：

```
/**
 * Fetch an action map to use.
 */
ActionMap getActionMap() {
    String mapName = getPropertyPrefix() + ".actionMap";
    ActionMap map = (ActionMap)UIManager.get(mapName);

    // JW: we are the first in this LAF
    if (map == null) {
        // JW: create map
        map = createActionMap();
        if (map != null) {
            // JW: store in LAF defaults
            UIManager.getLookAndFeelDefaults().put(mapName, map);
        }
    }
    ....
} 
```

因此，如果您想添加到该地图，则必须在设置 LAF*并*创建实例之后执行此操作。

没有办法，即使感觉很丑。

# javascript - 在javascript中只调用一次js函数

> ID：15584607
> 
> 赞同：1
> 
> 时间：2013-03-23T07:55:12.203
> 
> 标签：javascript, jquery

我创建了 js 函数，现在我希望该 js 函数只调用一次，我的代码是

```
function view(str){

   $.ajax({
      type: "POST",
      url: '<?php echo base_url()?>index.php/main/'+str+'/',
      success: function(output_string){
         //i want to call function from here only once like view(str);
      }
   });
} 
```

. 我怎样才能做到这一点 ？在此先感谢，目前它正在向我展示无限循环。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-23T07:58:45.440

使用标志变量

```
var myflag = false;
function view(str) {
    $.ajax({
                type : "POST",
                url : '<?php echo base_url()?>index.php/main/' + str + '/',

                success : function(output_string) {
                    if (!myflag) {
                        view(str);
                    }
                    myflag = true;
                }
            });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T07:58:17.110

尝试向跟踪计数的函数添加一个参数：

```
function view(str, count) {
  if (count > 0) {
    return;
  }

  $.ajax({
    type: "POST",
    url: '<?php echo base_url()?>index.php/main/'+str+'/',

    success: function(output_string) {
      view(count + 1);
      // i want to call function from here only once like view(str);
    }
  });
} 
```

然后你最初会这样调用`view`：

```
view(str, 0); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T07:58:46.927

您可以传递一个布尔值作为函数是否应该再次调用自身的参数：

```
function view(str, shouldCallSelf){

   $.ajax({
      type: "POST",
      url: '<?php echo base_url()?>index.php/main/'+str+'/',
      success: function(output_string){
         if (shouldCallSelf)
             view(output_string, false)
      }
   });
} 
```

你应该第一次用 true 调用它。然后它将第二次以 false 调用自己，不会再次执行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-23T08:01:38.933

你正在寻找 jquery `one`。 [http://api.jquery.com/one/](http://api.jquery.com/one/)

小提琴[http://jsfiddle.net/XKYeg/6/](http://jsfiddle.net/XKYeg/6/)

```
<a href='#' id='lnk'>test</a>

$('#lnk').one('click', function view(str) {
    $.ajax({
        type: "POST",
        url: '<?php echo base_url()?>index.php/main/' + str + '/',

        success: function (output_string) {
            i want to call

            function from here only once like view(str);
        }
    });
}); 
```

# python - Python OpenCV2 cv2.cv_fourcc 不适用于 VideoWriter

> ID：15584608
> 
> 赞同：17
> 
> 时间：2013-03-23T07:56:01.530
> 
> 标签：python, opencv

正如标题所述，当我运行 cv2.videowriter 函数时，我得到“模块”对象没有属性 CV_FOURCC。

代码：

```
# Creates a video file from webcam stream
import cv2

Create test window
cv2.namedWindow("cam_out", cv2.CV_WINDOW_AUTOSIZE)

# Create vid cap object
vid = cv2.VideoCapture(1)

# Create video writer object
vidwrite = cv2.VideoWriter(['testvideo', cv2.CV_FOURCC('M','J','P','G'), 25, 
               (640,480),True]) 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2014-02-19T01:22:14.417

派对有点晚了，但如果有人需要更新版本的 opencv2，那么命令是：

```
cv2.VideoWriter_fourcc(c1, c2, c3, c4) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-04-04T15:06:43.343

更改`cv2.CV_FOURCC('M','J','P','G')`为`cv2.cv.CV_FOURCC('M','J','P','G')`。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-09-23T08:38:45.907

对于 OpenCV 3，请执行以下操作：

`cv2.VideoWriter_fourcc(*'MJPG')`

信用@SiffgyF

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-01-27T20:31:59.933

使用 OpenCV 3：

```
# Create video writer object
vidwrite = cv2.VideoWriter('testvideo.avi', cv2.VideoWriter_fourcc(*'XVID'), 25, 
           (640,480),True) 
```

您可以在“opencv_install_dir\sources\doc\py_tutorials\py_gui\py_video_display\py_video_display.markdown”找到示例

ps：我在官方文档中找不到任何带有 'cv2.VideoWriter_fourcc(...)' 的描述。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-03-03T20:53:51.010

根据经验，如果在 OSX 上，这对我来说在写入 mp4 文件时有用：

`fourcc = cv2.VideoWriter_fourcc(*'MP4V')`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-03-19T12:54:48.943

如果您想写入 Mp4 文件，只需使用此编解码器，它适用于 2020 opencv4.2 及以上

```
fourcc = cv2.VideoWriter_fourcc(*'X264')
video_writer = cv2.VideoWriter('outeringe.mp4', fourcc, 20, (640, 480)) 
```

使用 x264 代替 MP4V

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-12-21T21:07:04.213

我在 opencv-python 4.2.0.32 升级到 opencv-python-4.4.0.46 时遇到同样的错误（在 macos 上）解决它，无需更改任何代码

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2016-12-20T12:12:07.467

我使用这段代码：

```
fourcc = cv2.CV_FOURCC(*'XVID') 
```

# php - cURL 无法从 Web 服务器连接，只能从本地计算机连接

> ID：15584613
> 
> 赞同：2
> 
> 时间：2013-03-23T07:56:26.010
> 
> 标签：php, curl

使用

```
$curl_handle = curl_init();
curl_setopt( $curl_handle, CURLOPT_CONNECTTIMEOUT, 10 );
curl_setopt( $curl_handle, CURLOPT_RETURNTRANSFER, 1 );
curl_setopt( $curl_handle, CURLOPT_HEADER, 1 );
curl_setopt( $curl_handle, CURLOPT_VERBOSE, 1 );
curl_setopt( $curl_handle, CURLOPT_URL, "https://www.someurl.com" );
$buffer = curl_exec( $curl_handle );
print_r( curl_getinfo ( $curl_handle ) ); 
```

我明白了

```
Array ( [url] => https://www.someurl.com [content_type] => [http_code] => 0 
[header_size] => 0 [request_size] => 0 [filetime] => -1 [ssl_verify_result] => 0
[redirect_count] => 0 [total_time] => 10.00005 [namelookup_time] => 0.001271 
[connect_time] => 0 [pretransfer_time] => 0 [size_upload] => 0 [size_download] => 0 
[speed_download] => 0 [speed_upload] => 0 [download_content_length] => -1 
[upload_content_length] => -1 [starttransfer_time] => 0 [redirect_time] => 0 ) 
```

所以它似乎没有连接到服务器，但相同的代码在我的本地机器上运行良好。有什么方法可以获取更多信息吗？我的怀疑是我的虚拟主机阻止了传出连接，或者我尝试连接的服务器拒绝了连接（几个月前他们正在这样做，但我至少收到了 403 条消息，现在我'我什么也没得到）。我尝试增加超时但结果相同（响应中的超时替换为 10）。此外，namelookup_time 似乎很小，所以我想知道这是否以某种方式失败？

谢谢。

更新：我可以从我的网络服务器和本地机器上很好地检索 google.com，所以似乎不是我的网络主机阻止了我。我尝试了许多代理，并且该页面是从我的本地计算机上检索的，但不是在我的网络服务器上（与我上面发布的结果相同）。我不知道如何通过 IP 进行连接，但是 namelookup_time 比 google.com 页面要小得多。鉴于这少量的额外信息，有没有人有任何其他想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T08:48:46.893

您可以使用`file_get_contents`从 url 获取数据

# android - 我想在android中将文本转换为pdf

> ID：15584616
> 
> 赞同：3
> 
> 时间：2013-03-23T07:57:14.667
> 
> 标签：android, pdf

我在 logcat 中遇到错误：

```
03-23 07:53:22.422: E/AndroidRuntime(2603): FATAL EXCEPTION: main
03-23 07:53:22.422: E/AndroidRuntime(2603): java.lang.NoClassDefFoundError: java.awt.Color
03-23 07:53:22.422: E/AndroidRuntime(2603):     at com.lowagie.text.pdf.PdfChunk.color(PdfChunk.java:501)
03-23 07:53:22.422: E/AndroidRuntime(2603):     at com.lowagie.text.pdf.PdfDocument.writeLineToContent(PdfDocument.java:2651)
03-23 07:53:22.422: E/AndroidRuntime(2603):     at com.lowagie.text.pdf.PdfDocument.flushLines(PdfDocument.java:2388)
03-23 07:53:22.422: E/AndroidRuntime(2603):     at com.lowagie.text.pdf.PdfDocument.newPage(PdfDocument.java:772)
03-23 07:53:22.422: E/AndroidRuntime(2603):     at com.lowagie.text.pdf.PdfDocument.close(PdfDocument.java:940)
03-23 07:53:22.422: E/AndroidRuntime(2603):     at com.lowagie.text.Document.close(Unknown Source)
03-23 07:53:22.422: E/AndroidRuntime(2603):     at com.example.pdfexample.MainActivity.onCreate(MainActivity.java:26)
03-23 07:53:22.422: E/AndroidRuntime(2603):     at android.app.Activity.performCreate(Activity.java:5104)
03-23 07:53:22.422: E/AndroidRuntime(2603):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
03-23 07:53:22.422: E/AndroidRuntime(2603):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
03-23 07:53:22.422: E/AndroidRuntime(2603):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-23 07:53:22.422: E/AndroidRuntime(2603):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-23 07:53:22.422: E/AndroidRuntime(2603):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-23 07:53:22.422: E/AndroidRuntime(2603):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-23 07:53:22.422: E/AndroidRuntime(2603):     at android.os.Looper.loop(Looper.java:137)
03-23 07:53:22.422: E/AndroidRuntime(2603):     at android.app.ActivityThread.main(ActivityThread.java:5039)
03-23 07:53:22.422: E/AndroidRuntime(2603):     at java.lang.reflect.Method.invokeNative(Native Method)
03-23 07:53:22.422: E/AndroidRuntime(2603):     at java.lang.reflect.Method.invoke(Method.java:511)
03-23 07:53:22.422: E/AndroidRuntime(2603):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-23 07:53:22.422: E/AndroidRuntime(2603):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-23 07:53:22.422: E/AndroidRuntime(2603):     at dalvik.system.NativeStart.main(Native Method)
help me , thanks in advance 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T08:02:11.340

您正在使用专为纯 Java 设计的库。Java API 和 Android API 之间存在一些细微但仍然显着的差异，主要与 gfx 相关。如您所见，Java Color 类在 Android 上没有严格的等价物。这就是导致您的错误的原因。

您可以找到支持 Android 的 PDF 库，或者使用远程服务来转换文档并直接将其下载为 PDF。

您可能会对此线程感兴趣：[Android 的 PDF 库 - PDFBox？](https://stackoverflow.com/q/5952626/693752)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T08:01:34.523

您需要将正在使用的 jar 文件添加到构建路径中。

java.lang.NoClassDefFoundError 通常在您没有将 jar 文件添加到构建路径时发生

[如何将jar文件添加到构建路径中](https://stackoverflow.com/questions/6327434/how-to-add-the-jar-file-into-the-build-path)

如果您在将 jars 添加到构建路径时遇到问题，请按照此链接进行 pdf 转换，最好的选择是使用[iTextPdf 之类的东西](http://sourceforge.net/projects/itext/)

使用这个类并调用所需的函数来创建pdf

```
public class CreatePDF {

    private static Font normalFont = new Font(Font.FontFamily.TIMES_ROMAN, 25,
            Font.NORMAL, BaseColor.BLACK);

    private static Font Head = new Font(Font.FontFamily.TIMES_ROMAN, 35,
            Font.BOLD, BaseColor.BLACK);

    //Path is the path where you want your pdf to get stored
    public void createPDFDoc(ArrayList<notesWrapper> notesList,String path) {
        // TODO Auto-generated method stub
        Document document = new Document();
        try {
            PdfWriter.getInstance(document, new FileOutputStream(path));
            document.open();

            for(int i=0;i<notesList.size();i++)
            {               

                addContentHead(document,"Image "+(i+1));                
                addContent(document,notesList.get(i).message);
                if(i<notesList.size())
                {
                    document.newPage();
                }
            }

            document.close();

        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
    }

    private void addContent(Document document,String content) throws DocumentException {

        Paragraph preface = new Paragraph();              
        addEmptyLine(preface, 1);

        if(!content.equalsIgnoreCase("insert note"))
        preface.add(new Paragraph(content, normalFont));

        else
            addEmptyLine(new Paragraph(), 1);

        addEmptyLine(preface, 3);
        document.add(preface);

    }

    private void addContentHead(Document document,String content) throws DocumentException {

        Paragraph preface = new Paragraph();              
        addEmptyLine(preface, 1);

        preface.add(new Paragraph(content, Head));
        addEmptyLine(preface, 3);
        document.add(preface);

    }

    private static void addEmptyLine(Paragraph paragraph, int number) {
        for (int i = 0; i < number; i++) {
            paragraph.add(new Paragraph(" "));
        }
    }

} 
```

# css - 在css中向上移动底部边框

> ID：15584618
> 
> 赞同：5
> 
> 时间：2013-03-23T07:57:39.527
> 
> 标签：css, border

如何使用 css 将底部边距向上推约 5 个像素？

[这](http://jsbin.com/umeniz/1/edit)是关于我想要实现的目标的示例：

![上推边框](../Images/a0d536fc2278e8e6f975ded1e6c9d2f4.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T08:06:00.313

尽管您可以使用 using `line-height`，但它可能会搞砸下一行。所以我建议这样做：

```
h1 {
  font-size: 24px;
  border-bottom: 2px solid #FF6A00;
  /* proposing line height + padding */
  line-height: 20px;
  margin-bottom: 5px;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T08:04:09.497

您可以使用`line-height:`css 规则来做到这一点。

设置`line-height: 18px;`，这将做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T08:01:40.847

试试这个使用填充的[小提琴。](http://jsfiddle.net/qaYqR/)

```
padding-bottom: 5px; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T08:11:28.260

你可以用*下划线*来做到这一点。像这样：

```
h1 {
  font-size: 24px;
  padding: 0;
  color: #FF6A00;
  text-decoration: underline;
}

h1 span {
  color: #000;
} 
```

然后只需将文本`h1`放入 a中`span`：

```
<h1><span>Szavazás az új domain-ról</span></h1> 
```

看到这个[这个小提琴](http://jsfiddle.net/8KPxB/ "这个小提琴")。

# vba - 将工作表存储为变量时编译错误

> ID：15584625
> 
> 赞同：-1
> 
> 时间：2013-03-23T07:58:34.310
> 
> 标签：vba, excel, powerpoint, powerpoint-2010

我遇到编译错误。我试图在这个子程序中简化一些事情，因为我有很多设置，我希望能够从我的 excel 工作表中控制它们需要很多调用，并且正在寻找一种更有效的方式来编写它们。

我尝试将工作簿和工作表分配给变量，然后使用我需要从中提取的工作表的变量来选择我需要的单元格范围，但是第一个实例

```
Build.Range("B:B").Column.Select.AutoFit 
```

给我无法编译错误“找不到方法或数据成员”

我正在调用 3 个不同的子程序，它们都包含在同一个模块中，如果这对事物有任何影响，并且可以在必要时发布这些子程序，但基本上它们只是根据此子程序提供的设置创建文件并在幻灯片上放置东西

```
Sub BuildTemplate()
Dim vNewPrimaryTemplatePath As String
Dim vDPI As Integer
Dim WB As Workbook
Dim Settings As Worksheet
Dim Build As Sheets
Dim Entry As Sheets

'Set Global Variables
Set WB = Workbooks("tool.xlsm")             'Set this to the name of the excel file
Set Settings = WB.Sheets("SETTINGS")        'Set this to the name of the settings tab
Set Build = WB.Sheets("BUILD")              'Set this to the name of the build tab
Set Entry = WB.Sheets("ENTRY")              'Set this to the name of the entry tab

    vDPI = Settings.Cells(2, "B").Value

'Adjust column sizes
    Build.Range("B:B").Column.Select.AutoFit
    Build.Range("D:D").Column.Select.AutoFit
    Build.Range("F:F").Column.Select.AutoFit
    Build.Range("H:H").Column.Select.AutoFit

'Create Template Files
MoveFiles
'Open newly created Template File
Dim PPT As PowerPoint.Application
Set PPT = New PowerPoint.Application
    PPT.Visible = True
    PPT.Presentations.Open Filename:=vNewPrimaryTemplatePath
'Add Title Block
Call AddShape(False, "BUILD", Settings.Range("E2"), Settings.Range("E3"),    Settings.Range("E4"), Settings.Range("E5"), Settings.Range("E6"))

'Add Delivery Block
Call AddShape(False, "BUILD", Settings.Range("E9"), Settings.Range("E10"), Settings.Range("E11"), Settings.Range("E12"), Settings.Range("E13"))

'Add Address Block
Call AddShape(False, "BUILD", Settings.Range("E16"), Settings.Range("E17"), Settings.Range("E18"), Settings.Range("E19"), Settings.Range("E20"))

'Add Items
Call AddShape(False, "BUILD", Settings.Range("H2"), Settings.Range("H12"), Settings.Range("H10"), Settings.Range("H16"), Settings.Range("H17"))
Call AddShape(False, "BUILD", Settings.Range("H3"), Settings.Range("H13"), Settings.Range("H10"), Settings.Range("H16"), Settings.Range("H17"))
Call AddShape(False, "BUILD", Settings.Range("H4"), Settings.Range("H14"), Settings.Range("H10"), Settings.Range("H16"), Settings.Range("H17"))
Call AddShape(False, "BUILD", Settings.Range("H5"), Settings.Range("H15"), Settings.Range("H10"), Settings.Range("H16"), Settings.Range("H17"))
Call AddShape(False, "BUILD", Settings.Range("H6"), Settings.Range("H12"), Settings.Range("H11"), Settings.Range("H16"), Settings.Range("H17"))
Call AddShape(False, "BUILD", Settings.Range("H7"), Settings.Range("H13"), Settings.Range("H11"), Settings.Range("H16"), Settings.Range("H17"))
Call AddShape(False, "BUILD", Settings.Range("H8"), Settings.Range("H14"), Settings.Range("H11"), Settings.Range("H16"), Settings.Range("H17"))
Call AddShape(False, "BUILD", Settings.Range("H9"), Settings.Range("H15"), Settings.Range("H11"), Settings.Range("H16"), Settings.Range("H17"))

'Add Summaries
    AddSummary

'Save & Close
    ActivePresentation.SaveAs Filename:=vNewPrimaryTemplatePath, FileFormat:=ppSaveAsDefault
    ActivePresentation.Close

End Sub 
```

再次感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T08:35:17.050

您不需要*Select*，您可以简化：

```
Build.Columns(2).AutoFit 
```

但是从另一个角度来看，您错误地定义了变量 Build 和 Entry，它们应该是`Worksheet`对象而不是`Sheets`集合。

# c++ - 重载和this指针

> ID：15584627
> 
> 赞同：4
> 
> 时间：2013-03-23T07:58:45.223
> 
> 标签：c++, c++11, this, overloading

这个问题更像是理论上的。

**前言。** 访客模式：

```
class Visitor
{
public:
    virtual void VisitElementA(const ElementA& obj) = 0;
    virtual void VisitElementB(const ElementB& obj) = 0;
};

class Element
{
public:
    virtual void Accept(Visitor& visitor) = 0;
};

class ElementA : public Element
{
public:
    void Accept(Visitor& visitor) override { visitor.VisitElementA(*this); }
};

class ElementB : public Element
{
public:
    void Accept(Visitor& visitor) override { visitor.VisitElementB(*this); }
}; 
```

这个 VisitElementA(const ElementA& obj) 看起来有点难看，所以使用重载我们可以像这样重写它：

```
class Visitor
{
public:
    virtual void Visit(const ElementA& obj) = 0;
    virtual void Visit(const ElementB& obj) = 0;
}; 
```

现在我们在 ElementA 和 ElementB 中有两个相同的 Accept 方法实现：

```
void Accept(Visitor& visitor) override { visitor.Visit(*this); } 
```

并且必须将此类代码添加到 ElementC、ElementD 等（如果有）

**问题是**：如何避免这种重复？

将 Accept 实现放在 Element 类（或其他中间类）中的天真解决方案将不起作用，因为*该*指针将指向类 Element 的对象，而不是 ElementA 或 ElementB，因此在最好的情况下，我们将得到编译错误，甚至错误的行为（如果 Element 会有一些重载的 Visit 方法）。

据我了解，问题在于尝试混合编译时和运行时功能。但可能存在一些基于模板的解决方案或新的 C++11 功能，还是其他？

请注意：如果您不提供“宏魔法”的解决方案，我将不胜感激:)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T08:45:52.360

您可以使用[CRTP](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)模式。

将类`Element`转换为以派生类型作为类型参数的模板类。然后您可以在调用访问者之前向下转换为派生类型：

```
template <typename Derived>
class Element
{
public:
    void Accept(Visitor& visitor) { visitor.Visit(*static_cast<Derived*>(this)); }
}; 
```

`Element`最后，每个具体元素都以这种方式派生：

```
class ElementA : public Element<ElementA>
{
}; 
```

另请注意，`Accept(Visitor&)`不再需要是虚拟的。

**更新：** 这是 quetzalcoatl 指出的问题的解决方案：

```
class ElementC : public Element<ElementC>, public ElementA
{
public:
    using Element<ElementC>::Accept;
}; 
```

通过 using 声明，`ElementC`将`Accept`名称带入其范围，因此，基类中的名称被隐藏。然而，这`Accept`是`Element<ElementC>::Accept`并且在实践中只是`ElementA::Accept`隐藏的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T08:10:23.543

```
class Visitor
{
public:
    virtual void Visit(const Element& obj) = 0;
}
class Element
{
public:
    void Accept(Visitor& visitor) { visitor.Visit(*this); }
}; 
```

Edit2：您只需要从 Element 基类调用 Visit 方法。因为元素是多态的，所以您仍然传递了正确的对象。但是，如果您需要访问元素独有的方法或引入其他抽象方法，则可能需要强制转换。

# iphone - IOS需要根据key price对字典值数组进行排序

> ID：15584630
> 
> 赞同：6
> 
> 时间：2013-03-23T07:58:48.570
> 
> 标签：iphone, ios

'我面临着使用字典对象根据键对值进行排序的问题。实际上我要存储的是，每个字典对象在该字典中具有不同的数据类型所有数据类型都作为字符串如何将此字符串类型转换为特定的数据类型并对其进行排序价格虎钳，我的代码和输出如下，请帮我解决这个问题。

```
-(IBAction)PriceSort:(id)sender
{
    NSSortDescriptor * sort = [[NSSortDescriptor alloc] initWithKey:@"Price" ascending:true] ;
    NSArray *sa = [symbolArray sortedArrayUsingDescriptors:[NSArray arrayWithObject:sort]];
    NSLog(@"price=%@",sa);

} 
```

**输出** {

```
 volume = 2496752;

    Yield = "10.49";

    MarCap = 829;

    Price = "0.715";

    Symbol = SAIPI;

}, 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-23T08:23:46.210

```
 sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"price"
                                                 ascending:YES selector:@selector(localizedStandardCompare:)] ; 
```

请更换这个并尝试，希望它的作品。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-23T08:23:23.757

```
-(void)sort
{
    //This is the array of dictionaries, where each dictionary holds a record
    NSMutableArray * array; 
    //allocate the memory to the mutable array and add the records to the arrat

    // I have used simple bubble sort you can use any other algorithm that suites you
    //bubble sort
    //
    for(int i = 0; i < [array count]; i++)
    {
        for(int j = i+1; j < [array count]; j++)
        {
            NSDictionary *recordOne = [array objectAtIndex:i];
            NSDictionary *recordTwo = [array objectAtIndex:j];

            if([[recordOne valueForKey:@"price"] floatValue] > [[recordTwo valueForKey:@"remaining"] floatValue])
            {
                [array exchangeObjectAtIndex:i withObjectAtIndex:j];
            }
        }   
    }

    //Here you get the sorted array
} 
```

希望这可以帮助。

# php - 关于递归模式的php正则表达式

> ID：15584634
> 
> 赞同：1
> 
> 时间：2013-03-23T07:59:16.050
> 
> 标签：php, regex, recursive-regex

我有这个代码：

```
$string="some text {@block}outside{@block}inside{@}outside{@} other text";

function catchPattern($string,$layer){
  preg_match_all(
    "/\{@block\}".
      "(".
        "(".
           "[^()]*|(?R)".
        ")*".
      ")".
    "\{@\}/",$string,$nodes);
  if(count($nodes)>1){
    for($i=0;$i<count($nodes[1]); $i++){
      if(is_string($nodes[1][$i])){
        if(strlen($nodes[1][$i])>0){
          echo "<pre>Layer ".$layer.":   ".$nodes[1][$i]."</pre><br />";
          catchPattern($nodes[1][$i],$layer+1);
        }
      }
    }
  }
}

catchPattern($string,0); 
```

这给了我这个输出：

```
Layer 0:   outside{@block}inside{@}outside

Layer 1:   inside 
```

一切都好！但是如果我改变一点字符串和正则表达式：

```
$string="some text {@block}outside{@block}inside{@end}outside{@end} other text";

function catchPattern($string,$layer){
  preg_match_all(
    "/\{@block\}".
      "(".
        "(".
           "[^()]*|(?R)".
        ")*".
      ")".
    "\{@end\}/",$string,$nodes);
  if(count($nodes)>1){
    for($i=0;$i<count($nodes[1]); $i++){
      if(is_string($nodes[1][$i])){
        if(strlen($nodes[1][$i])>0){
          echo "<pre>Layer ".$layer.":   ".$nodes[1][$i]."</pre><br />";
          catchPattern($nodes[1][$i],$layer+1);
        }
      }
    }
  }
}

catchPattern($string,0); 
```

我没有得到任何输出。为什么？我期望相同的输出。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T09:18:35.663

问题是回溯限制已用尽。您可以随时修改[回溯限制](http://php.net/manual/en/pcre.configuration.php)。**但是，对于我遇到的情况，重写正则表达式是更好的解决方案**。

您不能随便修改现有的正则表达式并期望使其工作，尤其是对于递归正则表达式。看来您采用现有的括号匹配正则表达式并对其进行修改。您的正则表达式存在一些问题：

*   `[^()]*`: 没有理由在部分`()`内排除文本`{@block}{@end}`。但更严重的问题是它匹配`{}`。引擎将一直到最近`()`的字符串或字符串的末尾，匹配失败，然后回溯。这就是达到回溯限制的原因。

    这可以通过将此部分更改`[^{}]`为禁止`{}`inside来解决`{@block}{@end}`。由于递归，嵌套`{@block}{@end}`仍将匹配。

    **请注意，这将完全不允许`{}`在`{@block}{@end}`**. 根据转义方案，可以修改正则表达式以允许这种情况。

    我还更改了`[^{}]`from `*`to的量词，因为当整个组的量词是`+`时，没有理由匹配空字符串。`([^{}]+|(?R))``*`

    ```
    /\{@block\}((?:[^{}]+|(?R))*)\{@end\}/ 
    ```

*   经过上面的修改，第二个问题是输入字符串无效。quantifier 的默认行为是执行回溯，直到找到匹配项或用尽所有可能性。因此，在这些情况下，您将达到回溯限制。

    由于`[^{}]+`可以匹配的内容和递归正则表达式可以匹配的内容是互斥的¹，因此正则表达式没有歧义，可以在不回溯的情况下进行匹配。*我们可以通过使用所有格量词*来告诉引擎不要回溯，这是正常的量词，`+`后面加上。

最终解决方案是：

```
/\{@block\}((?:[^{}]++|(?R))*+)\{@end\}/ 
```

[**演示**](http://www.regex101.com/r/aV4mD7)

### 脚注

¹：很明显，因为文本匹配`[^{}]+`永远不会以 开头`{`，而与递归正则表达式匹配的文本必须以 开头`{`。

# .htaccess - 可以添加多个“？” 在网址中？

> ID：15584636
> 
> 赞同：-2
> 
> 时间：2013-03-23T08:00:09.210
> 
> 标签：.htaccess, url-rewriting

我需要重写网址

我的实际网址

> [http://www.domain.com/page.php?catName/ArticleName....?/&ca=7&prod=44&artId=446](http://www.domain.com/page.php?catName/ArticleName....?/&ca=7&prod=44&artId=446)

我需要像这样重写

> [http://www.domain.com/catID-catName/proID-prodName/artID-ArticleName....?/page.html](http://www.domain.com/catID-catName/proID-prodName/artID-ArticleName....?/page.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T09:09:01.910

对的，这是可能的。顺便说一句，您修改后的 URL 只有一个“？”。在 [RFC][1] 中指定了 URI 和 URL 的语法，它`query`是 URL 中跟在`http://www.example.com/path`or `http://www.example.com`（路径是可选的）组件之后的部分。注意“？” 字符必须是 URL 查询部分的第一个字符。

RFC 3.4 节中的关键句是

> 字符斜线（“/”）和问号（“？”）可以表示查询组件内的数据。

这是管理 URI 语法的 RFC 的相关部分。

```
3.4 Query

The query component contains non-hierarchical data that, along with
   data in the path component (Section 3.3), serves to identify a
   resource within the scope of the URI's scheme and naming authority
   (if any).  The query component is indicated by the first question
   mark ("?") character and terminated by a number sign ("#") character
   or by the end of the URI.

      query       = *( pchar / "/" / "?" )

   The characters slash ("/") and question mark ("?") may represent data
   within the query component. Beware that some older, erroneous
   implementations may not handle such data correctly when it is used as
   the base URI for relative references (Section 5.1), apparently
   because they fail to distinguish query data from path data when
   looking for hierarchical separators.  However, as query components
   are often used to carry identifying information in the form of
   "key=value" pairs and one frequently used value is a reference to
   another URI, it is sometimes better for usability to avoid percent-
   encoding those characters.

  [1]: http://tools.ietf.org/html/rfc3986#section-3 
```

# sql-server-2008 - 使用 SQL Server 2008 中的存储过程插入具有多个值的多列

> ID：15584641
> 
> 赞同：0
> 
> 时间：2013-03-23T08:00:37.980
> 
> 标签：sql-server-2008, stored-procedures, csv

我们将 4 个参数传递给存储过程

```
@PageID,
@CompanyID,
@URL, 
@URLCode, 
```

所有这些参数都包含逗号分隔的值

例子：

```
 @PageID contains ("1,2,3,4,5,6,7")
 @CompanyID contains ("10,20,30,40,50,60,70") 
 @URL contains ("u1,u2,u3,u4,u5,u6,u7")
 @URLCode contains ("c1,c2,c3,c4,c5,c6,c7") 
```

在数据库中，我有一张表，如下所述：

表名：`UrlMapping`

列：

```
MappingID (PK), 
PageID, 
CompanyID,
URL,
UrlCode 
```

你能建议如何在`UrlMapping`表中插入这些多个逗号分隔值吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T09:48:34.897

这是一个两步的过程。

将字符串拆分为一组临时表： [T-SQL：与字符串连接相反 - 如何将字符串拆分为多条记录](https://stackoverflow.com/questions/314824/t-sql-opposite-to-string-concatenation-how-to-split-string-into-multiple-reco?lq=1)

根据行编号将表重新连接在一起并插入数据库：

```
INSERT INTO UrlMapping 
(PageID, CompanyID)
FROM
SELECT PageID, CompanyID
(
    SELECT id AS PageID, ROW_NUMBER() OVER (ORDER BY id) as PageRowNum
    FROM
    @SplitPageID
) AS SplitPageID
INNER JOIN  
(
    select id AS CompanyID, ROW_NUMBER() OVER (ORDER BY id) as CompanyRowNum
    FROM
    @SplitCompanyID
) AS SplitCompanyID
ON
SplitPageID.PageRowNum = SplitCompanyID.CompanyRowNum 
```

这是一个有代表性的查询，您需要实现拆分，插入到拆分临时表中，并扩展连接以覆盖所有列。

# php - 循环 mysql_query 并替换值 OR 1 查询以完成工作

> ID：15584642
> 
> 赞同：-2
> 
> 时间：2013-03-23T08:00:42.207
> 
> 标签：php, mysql, loops

我正在运行一个 sql 查询，它使用内连接从两个表中提取 id、catid、name、subof。

```
select shop.id, shop.catid, shop.name, shop_cat.catname, shop_cat.subof from shop inner join shop_cat on shop.catid = shop_cat.id where shop.active='1' order by shop_cat.catname, shop.name 
```

现在这会产生我需要的一切，但我需要遍历结果并对 subof 值（这是一个值，该值是 shop_cat 的 ID 号）执行另一个 sql 查询。我需要提取 subof 值 # 的 catname，然后将结果/数组字段 subof 更新为 cat 的名称。

因此，如果原始查询给我的 subof 值为 15，它会从 shop.cat 中选择 catname where id='15' 我将从该查询中获取 catname，然后为原始中的每个值更新 subof = catname具有 subof 值的结果。

编辑 3/23/13 12:30pm MST：使用更多 Opeyemi 编写的代码来解释我需要的更多内容。我不知道该怎么解释它......

```
$q = "select shop.id, shop.catid, shop.name, shop_cat.catname, shop_cat.subof from shop inner join shop_cat on shop.catid = shop_cat.id where shop.active='1' order by shop_cat.catname, shop.name";
$r = mysql_query();
while(list($shopid, $catid, $name, $catname, $subof) = mysql_fetch_array($r)) {
    $getname = mysql_query("select catname from shop_cat where id='$subof'");
    $rowname = mysql_fetch_assoc($getname);
    //code to update array to change value of $subof to new $rowname['catname']
} 
```

数据库查询运行，获取我的值。

然后我需要运行某种循环，它将遍历 PHP 从查询中获取的每个结果。此循环将获取 subof 值（它是一个整数 ID 号），然后运行查询以获取该整数值的值 catname。然后循环将更新当前结果并将 subof 值从整数更改为从循环中的数据库中提取的 catname。

我不需要随时更新数据库，我需要更新第一个查询的结果/数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T04:02:20.333

您需要做的是将结果集存储在数组中并在数组中替换。

```
$q = "select shop.id, shop.catid, shop.name, shop_cat.catname, shop_cat.subof from shop inner join shop_cat on shop.catid = shop_cat.id where shop.active='1' order by shop_cat.catname, shop.name";
$r = mysql_query();
$dataset = array();
// Store result in an array
while($assoc = mysql_fetch_assoc($r)) {
  $dataset[] = $assoc;
}
// Update array
foreach($dataset as $data) {
  $getname = mysql_query("select catname from shop_cat where id='{$data['subof']}'");
  $rowname = mysql_fetch_assoc($getname);
  // replace data
  replace_dataset($data['subof'], $rowname);
}

function replace_dataset($key, $newname) {
  global $dataset;
  foreach($dataset as $k => $data) {
    if ($data['id'] == $key)
      $dataset[$k]['subof'] = $newname;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T08:19:21.957

您是在问如何在 PHP 中执行此操作还是什么？如果您正在寻找如何在 PHP 中循环结果，就这么简单

```
$q = "select shop.id, shop.catid, shop.name, shop_cat.catname, shop_cat.subof from shop inner join shop_cat on shop.catid = shop_cat.id where shop.active='1' order by shop_cat.catname, shop.name";
$r = mysql_query();
while(list($shopid, $catid, $name, $catname, $subof) = mysql_fetch_array($r)) {
  // the values from the query are assigned to the variables
  // $shopid, $catid, $name, $catname, $subof in that order already
  mysql_query("update shop_cat set subof=catname where id='$subof'");
  // My interpretation of your query can be wrong though
  // But you should get the idea
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T09:06:58.130

您可以使用 mysql_fetch_assoc() 或 mysql_fetch_array() 或 mysql_fetch_row() 函数来获取行，并可以将循环概念放在上面。

之后，您可以使用 mysql_fetch_field() 从中获取字段 subof 和 id。

然后更新数据库

您可以查看以下链接

[http://www.php.net/manual/en/function.mysql-fetch-array.php](http://www.php.net/manual/en/function.mysql-fetch-array.php)

[http://www.php.net/manual/en/function.mysql-fetch-assoc.php](http://www.php.net/manual/en/function.mysql-fetch-assoc.php)

[http://www.php.net/manual/en/function.mysql-fetch-field.php](http://www.php.net/manual/en/function.mysql-fetch-field.php)

我希望你能有所了解。

# c - 将 char *buffer 中的数据复制/移动到 char info[4][10] 的多维数组

> ID：15584645
> 
> 赞同：0
> 
> 时间：2013-03-23T08:01:00.693
> 
> 标签：c, arrays, pointers

我已将数据按顺序读入 char *buffer。然后我需要将该 *buffer 中的字符串复制到一个多维数组中。

因此缓冲区中的第一个数据将转到 temp_message[0]，从缓冲区读取的第二个数据将转到 temp_message[1]，依此类推。

字符串/数据的长度是 10....这就是我声明 temp_message[4][10] 的原因

我的代码：

```
 char temp_message[4][10];
  //receiving....
  for(i=0;i<IR_COM_NUMBER;i++) {
    if (wb_receiver_get_queue_length(receiver[i]) > 0) {

        /* read current packet's data */
        ***const char *buffer = wb_receiver_get_data(receiver[i]);***
        count[i]=0;
        if (message_printed[i] != 1) {
          ***temp_message[i][]=buffer;***
          /* print null-terminated message */
          printf("Communicating: received \"%s\" from receiver %d \n",buffer,i);
          message_printed[i] = 1;
        }
        /* fetch next packet */
        wb_receiver_next_packet(receiver[i]);
        message_printed[i]=3;
      } else {
        count[i]++;
        if (message_printed[i] !=2 && count[i]>20) {
          printf("Communication broken from receiver %d!\n",i);
          message_printed[i] = 2;
        }
      }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T08:30:10.260

To specify one of the temp_message arrays a second `[]` operator is invalid. That is the reason for the compiler error. Use `strcpy` or `memcpy` to copy characters from character arrays.

```
strcpy(temp_message[i], buffer); 
```

`strcpy` is appropriate here provided the contents of `buffer` are NULL terminated.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T08:32:50.520

使用该函数[`strcpy`](http://pubs.opengroup.org/onlinepubs/009695399/functions/strcpy.html)将字符串复制`buffer`到您的字符串数组中`temp_message`：

```
strcpy(temp_message[i], buffer); 
```

我在您的问题中发现了一个可能的陷阱。你写你的字符串/数据的长度是 10 但你考虑到尾随`\0`吗？

# php - PHP：保留静态方法并保持可测试性

> ID：15584646
> 
> 赞同：3
> 
> 时间：2013-03-23T08:01:12.860
> 
> 标签：php, unit-testing, testing, singleton, static-methods

我的静态方法要么是“helper”类型，例如`convertToCamelCase()`，要么是“get singleton”类型，例如`getInstance()`。不管怎样，我很高兴他们住在一个助手班。

辅助类需要被广泛使用，所以我将它加载到我的层超类型中。现在，据我所知，只要可以将帮助程序注入超类型，我就可以在测试我的代码时保持完全的灵活性（帮助程序类本身除外）。那有意义吗？还是我忽略了什么？

换个角度看……在我看来，测试代码的难度与**调用**静态方法的次数成正比，而不是与静态方法本身的实际数量成正比。通过将所有这些调用放入一个类（我的助手），并用模拟替换该类，我正在测试没有静态调用和相关问题的代码。

（我意识到我应该努力摆脱我的单身人士，但这将是一个长期项目）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T23:43:23.140

对于严格来说是“convertToCamelCase”之类的辅助函数的静态类，我可能对该函数只有 100% 的覆盖率，然后将其视为“核心”函数，而不必担心在其他地方模拟它。无论如何，“convertToCamelCase”的模拟是什么..？如果你做太多单元测试，也许你的单元测试开始闻起来有点像集成测试，但在抽象一切和让你的应用程序不必要地复杂之间总是有一些权衡。

就单例而言，这很棘手，因为您的代码中通常有静态类的名称，因此将其与模拟对象交换以进行测试变得有问题。您可以做的一件事是，无论您在哪里进行静态方法调用，首先要重构以这种方式调用它们：

```
$instance = call_user_func('MyClass::getinstance'); 
```

然后，随着您增加测试覆盖率，您可以开始替换为：

```
$instance = call_user_func($this->myClassName . '::getinstance'); 
```

`MyClass`所以 - 一旦你有了它，你可以通过改变来换掉和模拟`$this->myClassName`. 您必须确保您也需要或动态地自动加载相关的 php 文件。

重构以使用抽象工厂模式将使事情更容易测试，但您也可以随着时间的推移开始实现它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-10T03:39:07.323

但是，如果您需要在某处模拟静态类，则可以使用[`Moka`library](https://github.com/shagabutdinov/moka)来完成。这是示例：

```
class UsersController
{

    public function main()
    {
        return json_encode(User::find(1));
    }
} 
```

这是您可以测试它的方法：

```
class UsersController
{
    private $_userClass;

    public function __construct($userClass = 'User')
    {
        $this->_userClass = $userClass;
    }

    public function find($id)
    {
        return json_encode($this->_userClass::find($id));
    }
}

class UsersControllerTest extends \PHPUnit_Framework_TestCase
{
    public function testMainReturnsUser()
    {
        $userClass = Moka::stubClass(null, ['::find' => 'USER']);
        $controller = new UsersController($userClass);
        $this->assertEquals('"USER"', $controller->find(1000));
    }

    public function testMainCallsFind()
    {
        $userClass = Moka::stubClass(null, ['::find' => 'USER']);
        $controller = new UsersController($userClass);
        $controller->find(1000);
        // check that `find` was called with 100
        $this->assertEquals([1000], $userClass::$moka->report('find')[0]);
    }
} 
```

# asp.net - 我需要制作由 IIS HttpOnly 创建的 ASPSession cookie

> ID：15584647
> 
> 赞同：1
> 
> 时间：2013-03-23T08:01:14.000
> 
> 标签：asp.net, iis, asp-classic

我无权访问 IIS 服务器，但我需要制作由 IIS HttpOnly 创建的 ASPSession cookie。所以我的问题是，如何通过编码而不是 IIS 上的任何设置来制作 cookie HttpOnly？请帮助其紧急情况，我一直在寻找解决方案，但没有得到任何与我的问题相关的信息。我知道服务器版本是 IIS 6。在我的测试服务器上，我使用了 ISAPI 过滤器，它解决了我的问题，但为此我需要访问 IIS 并在那里添加我无法在实时服务器上执行的 ASAPI 过滤器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T08:05:51.077

如果您使用的是 ASP.NET 2.0 或更高版本，则可以在 Web.config 文件中将其打开。在该`<system.web>`部分中，添加以下行：

```
<httpCookies httpOnlyCookies="true"/> 
```

您可以以编程方式对此进行编辑：http: [//www.dotnetcurry.com/ShowArticle.aspx?ID=102](http://www.dotnetcurry.com/ShowArticle.aspx?ID=102)

# sql-server - 如何在 SQL Server 2008 中创建序列

> ID：15584655
> 
> 赞同：6
> 
> 时间：2013-03-23T08:02:27.417
> 
> 标签：sql-server, sql-server-2008, sequence

我正在使用以下代码在 SQL Server 中创建序列。但它将错误显示为未知对象类型。请给出解决方案

这是我的代码：

```
create sequence seqval start with 100 increment by 1 minvalue 0 maxvalue 0 no cycle  
 no cache; 
```

提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-02-11T16:44:20.460

你可以这样做。

```
--Create a dummy TABLE to generate a SEQUENCE. No actual records will be stored.
CREATE TABLE SequenceTABLE
(
    ID BIGINT IDENTITY  
);
GO

--This procedure is for convenience in retrieving a sequence.
CREATE PROCEDURE dbo.GetSEQUENCE ( @value BIGINT OUTPUT)
AS
    --Act like we are INSERTing a row to increment the IDENTITY
    BEGIN TRANSACTION;
    INSERT SequenceTABLE WITH (TABLOCKX) DEFAULT VALUES;
    ROLLBACK TRANSACTION;
    --Return the latest IDENTITY value.
    SELECT @value = SCOPE_IDENTITY();
GO

--Example execution
DECLARE @value BIGINT;
EXECUTE dbo.GetSEQUENCE @value OUTPUT;
SELECT @value AS [@value];
GO 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-28T23:48:13.560

创建一个`Numbers`表；这是一个[关于](https://stackoverflow.com/questions/1393951/what-is-the-best-way-to-create-and-populate-a-numbers-table)这个主题的问题。让我们称之为`dbo.Number`。

有一个带有标识列的表。将种子和步骤设置为适当的：

```
create table dbo.SequenceGenerator(ID int identity(1, 1), dummy int); 
```

然后插入 numbers 表中的值并捕获新生成的标识值：

```
declare @HowMany int = 3;  -- This determines how large a sequence you receive
                           -- at each itteration
declare @NewSequenceValue table (ID int);

insert dbo.SequenceGenerator(dummy)
output INSERTED.ID 
    into @NewSequenceValue
select Number from dbo.Numbers
where Number <= @HowMany;

select * from @NewSequenceValue; 
```

一定`DELETE .. dbo.SequenceGenerator`要不时进行，否则它会变大而没有额外的价值。不要这样做`TRUNCATE`- 这会将`IDENTITY`列重置为其最初声明的种子值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-28T13:16:53.913

SQL Server 2008 无法创建序列，序列对象通过当前版本适用于 SQL Server 2012。

[https://msdn.microsoft.com/es-es/library/ff878091(v=sql.120).aspx](https://msdn.microsoft.com/es-es/library/ff878091(v=sql.120).aspx)

您可以在表中使用 IDENTITY，例如：

```
CREATE TABLE Person(
    Id int IDENTITY(1,1) NOT NULL PRIMARY KEY,
    Name varchar(255) NOT NULL
); 
```

IDENTITY 的起始值为 1，对于每条新记录，它将递增 1。

[http://www.w3schools.com/sql/sql_autoincrement.asp](http://www.w3schools.com/sql/sql_autoincrement.asp)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-10T22:53:18.123

```
WITH N0 as (SELECT 1 as n UNION ALL SELECT 1)
,N1 as (SELECT 1 as n FROM N0 t1, N0 t2)
,N2 as (SELECT 1 as n FROM N1 t1, N1 t2)
,N3 as (SELECT 1 as n FROM N2 t1, N2 t2)
,nums as (SELECT ROW_NUMBER() OVER (ORDER BY (SELECT 1)) as num FROM N3)
SELECT * FROM nums 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-12T05:33:08.290

我们不能在 SQL Server 2008 中轻松使用 Sequence。

您可以在 SQL Server 2008 中使用 CTE（通用表表达式）生成序列

```
WITH NUM_GEN (n) AS
     ( 
            SELECT 1 
            UNION 
                  ALLSELECT n+1 
            FROM  NUM_GEN 
            WHERE n+1< MAX_VALUE 
     ) 
SELECT n 
FROM   NUM_GEN 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2013-03-23T08:08:34.243

你确定你在运行 2012 年？我没有遇到任何问题：

```
CREATE SEQUENCE seqval
START WITH 100
INCREMENT BY 1 
minvalue 100 maxvalue 10000 NO CYCLE 
```

你的 0,0 值对我来说产生了一个语法错误，但一个清晰而简单的错误。

```
The minimum value for sequence object 'seqval' must be less than its maximum value. 
```

# actionscript-3 - 控制主时间线中影片剪辑内的按钮

> ID：15584656
> 
> 赞同：0
> 
> 时间：2013-03-23T08:02:29.130
> 
> 标签：actionscript-3, actionscript, action

几个小时以来，我一直在寻找解决问题的方法，但找不到。我的问题是我在 MovieClip 中有一些按钮，我想从主时间轴控制它们。但这是奇怪的部分。我在 MovieClip 的第一帧中的按钮可以正常工作，但是在第 2 帧和第 3 帧中的其他两个按钮在我单击它们时不起作用，并且由于这些按钮而出现以下错误消息：

TypeError：错误 #1009：无法访问空对象引用的属性或方法。在 Eksamen_fla::MainTimeline/frame1()

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T08:41:01.920

好的，您的问题可能在您的时间线上。尝试将每个按钮放在一个关键帧上。然后使用 yourMovieClip.visible = true 或 false 在不同帧上隐藏/显示您的影片剪辑。

# javascript - 如何从街景中删除“地址栏”框？

> ID：15584657
> 
> 赞同：0
> 
> 时间：2013-03-23T08:02:36.097
> 
> 标签：javascript, google-maps, google-street-view

我正在使用 Google Maps API 版本 2，现在我想从街景视图中删除地址栏。尽管进行了大量研究，但我还没有找到删除此地址栏的解决方案。街景正在加载 Flash 版本（我已经在 Firebug 中检查过），所以我无法播放任何 CSS 或 JavaScript 技巧。

请帮我删除 Google Maps v2 中的这个框。我无法在[Google Maps v3中更新它](https://developers.google.com/maps/documentation/javascript/reference)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:46:13.827

您无法在 google map api 版本 2 中删除它；你应该在谷歌地图 v3 中更新它；如果他们不提供任何类似的功能，你怎么能在闪存中改变

# php - JQuery 与 PHP 实时搜索

> ID：15584658
> 
> 赞同：0
> 
> 时间：2013-03-23T08:02:39.030
> 
> 标签：php, jquery, mysql

我正在尝试创建一个允许我实现实时搜索的 jQuery 脚本。到目前为止，我在屏幕上什么都没有，什么都没有出现，我不知道出了什么问题。有任何想法吗？

javascript:

```
function searchMembers() {
    document.body.style.cursor = "wait";
    var gradeMenu = document.getElementById("grade");
    var gradeValue = gradeMenu.options[gradeMenu.selectedIndex].text;
    var firstNameValue = document.getElementById("firstName").value;
    var lastNameValue = document.getElementById("lastName").value;
    var studentIDValue = document.getElementById("studentID").value;

     $.post (
           "search.php", 
           {'firstName':firstNameValue, 'lastName':lastNameValue,  'grade':gradeValue, 'stID':studentIDValue},
           function(data) {
                 document.getElementById("searchOutput").innerHTML=data;
                 document.body.style.cursor="auto";
            }
      );
}
$(document).ready(function() {
      var loc = (String)(window.location);
          if(loc.indexOf("view_membersWithSearch.php") > 0)
      searchMembers();
 }); 
```

搜索.php：

```
 if(isset($_POST['firstName'])) {
        $firstNameValue = $_POST['firstName'];  
    }
    if(isset($_POST['lastName'])) {
        $lastNameValue - $_POST['lastName'];
    }       
    if(isset($_POST['grade'])) {
        $gradeValue = $_POST['grade'];
    }
    if(isset($_POST['stID'])) {
        $studentIDValue = $_POST['stID'];
    } 
```

view_membersWithSearch.php：

```
<div id="searchOutput"></div> 
```

编辑：包含 jQuery，我将它放在 view_membersWithSearch.php 的底部。问题是在我单击菜单或插入文本以更新搜索后，没有任何反应。应该放置结果的区域是空白的。默认情况下，我也应该默认显示所有结果，但这也是空白的。

编辑 2：Firebug 给出：HTML 文档的字符编码未声明。如果文档包含 US-ASCII 范围之外的字符，则文档将在某些浏览器配置中呈现乱码。页面的字符编码必须在文档或传输协议中声明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T08:18:08.147

```
$.post (
           "search.php", 
           {firstNameValue:'firstName', lastNameValue:'lastName',  gradeValue:'grade', studentIDValue:'stID', 
```

编辑1：

```
$.post (
           "search.php", 
           {firstName:firstNameValue, lastName:lastNameValue,  grade:gradeValue, stID:studentIDValue}, 
```

编辑2：

你错过了`href`

```
 if(loc.href.indexOf.("view_membersWithSearch.php") > 0) 
```

# hadoop - mapreduce ---自定义数据类型

> ID：15584666
> 
> 赞同：3
> 
> 时间：2013-03-23T08:03:43.363
> 
> 标签：hadoop, mapreduce

当我做一个mapreduce程序时，我遇到键是一个元组（A，B）（A和B都是整数集）。我该如何自定义这种数据类型？

```
public static class MapClass extends Mapper<Object,Text,Tuple,Tuple>....

public class Tuple implements WritableComparable<Tuple>{ 

        @Override
        public void readFields(DataInput arg0) throws IOException {
            // TODO Auto-generated method stub

        }

        @Override
        public void write(DataOutput arg0) throws IOException {
            // TODO Auto-generated method stub

        }

        @Override
        public int compareTo(Tuple o) {
            // TODO Auto-generated method stub
            return 0;
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T12:19:55.830

快到了，只需为A和B添加变量，然后完成序列化方法和compareTo：

```
public class Tuple implements WritableComparable<Tuple>{ 
    public Set<Integer> a = new TreeSet<Integer>;
    public Set<Integer> b = new TreeSet<Integer>;

    @Override
    public void readFields(DataInput arg0) throws IOException {
        a.clear();
        b.clear();

        int count = arg0.readInt();
        while (count-- > 0) {
          a.add(arg0.readInt());
        }

        count = arg0.readInt();
        while (count-- > 0) {
          b.add(arg0.readInt());
        }
    }

    @Override
    public void write(DataOutput arg0) throws IOException {
        arg0.writeInt(a.size());
        for (int v : a) {
          arg0.writeInt(v);
        }
        arg0.writeInt(b.size());
        for (int v : b) {
          arg0.writeInt(v);
        }
    }

    @Override
    public int compareTo(Tuple o) {
        // you'll need to implement how you want to compare the two sets between objects
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-28T05:36:52.200

要在 hadoop 中实现自定义数据类型，您必须实现 WritableComparable 接口并为 readFields() write() 方法提供自定义实现。除了 readFiled 和 write 方法的实现必须覆盖 java 对象的 equals 和 hashcode 方法。

如果键的自定义数据类型实现必须实现可比较的接口。

# java - 动态改变jbutton的文字和背景

> ID：15584672
> 
> 赞同：-2
> 
> 时间：2013-03-23T08:04:17.537
> 
> 标签：java, swing, jbutton, netbeans-7

我有一个用 Java swing 和 NetBens 7 IDE 开发的应用程序

**脚步：**

1.  我想使用 Jbutton 根据用户模式执行两种不同的功能。例如，我想用以下文本“新记录”和“退出新记录”标记单个按钮

2.  默认文本是**“新记录”**。这将使用户能够输入新记录。

3.  在新记录模式下，jButton 上的文本变为“退出新记录”。要退出新的记录模式，用户单击相同的按钮退出。

4.  然后，这会将按钮上的文本更改为默认输入“输入新记录”

是否有关于如何使用 netbeans IDE 执行此操作的任何建议，或者我是否手动覆盖一个方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T08:24:52.947

在 JButton 上实现 Action Listener（代码未经测试，仅供参考）：

```
public class MyButton extends JButton implements ActionListener{
boolean pressed = false;
public MyButton(String name){
    super(name);
    this.addActionListener(this);
    }
@Override
public void actionPerformed(ActionEvent e){
    if(pressed){
    pressed = !pressed;
    _change_text_on_button_
    _do_job_
    }
} 
```

比使用自定义的 MyButton。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T12:09:14.290

[如此处](https://stackoverflow.com/a/5529043/230513)和[此处](https://stackoverflow.com/a/5048863/230513)的示例所示，按钮的文本可以在其. NetBeans GUI 编辑器会生成代码来调用，但它允许您在被调用的方法中编辑代码。方法名称将类似于.`ActionListener``ActionListener``nameActionPerformed()`

另请参阅[*如何使用按钮、复选框和单选按钮*](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html)以及此[建议](https://stackoverflow.com/a/2561540/230513)。

# javascript - 如何检查我的复选框是否被选中？

> ID：15584690
> 
> 赞同：0
> 
> 时间：2013-03-23T08:07:32.127
> 
> 标签：javascript, jquery, asp.net-mvc-3, razor

我有一个我想监控的复选框列表。它们被加载到这样的表单上：

在 Java 脚本中，条件编译已关闭，并且出现语法错误。有人可以告诉我如何正确地解决这个问题，或者可能指向一个可能有帮助的教程吗？

谢谢。

因此，我将 JQuery 函数放在一个工作 foreach 循环中，以检查每个复选框的选中状态，但警报说检查了每个复选框，即使是那些未选中的也是如此。我在这里做错了什么？

```
foreach (var course in courses.Select((x, i) => new { Data = x, Index = i }))
{
    <script type="text/javascript">
       $(document).ready(function () {
          $('#saveBtn').click(function () {
              if ($('#checkbox').is(':checked')) {
                     alert('checked');
              }
              else
                 alert('unchecked');
         });
       });
   </script>
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T09:22:58.893

您可以遍历页面中的复选框并将选中的值存储在一个数组中，如下所示：

```
<script type="text/javascript">
  $(document).ready(function () {

var selected = new Array();
$("input:checkbox:checked").each(function()
{
    selected.push($(this).val());
});

});

   </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T15:13:31.507

您可以通过获取其选中状态来找到您是否在 javascript 中选中了任何复选框，如下所示：

```
<script language="javascript" type="text/javascript">
    var checkStatus = document.getElementById("checkBoxId").checked;
    alert(checkStatus);
</script> 
```

通过jQuery你可以这样做：

```
 if($('#checkBoxId').is(':checked') ){
     //your logic
    } 
```

您可以像这样捕获`change`复选框的事件：

```
 $('input:checkbox').change(function(){ 
    if($(this).is(':checked')){
        alert('checked');
    }
    else
        alert('unchecked');
}); 
```

看到这个[小提琴](http://jsfiddle.net/manishmishra121/EGWYT/)

# php - Cakephp 设置函数不将变量从控制器传递到视图

> ID：15584691
> 
> 赞同：2
> 
> 时间：2013-03-23T08:07:40.747
> 
> 标签：php, cakephp

我正在尝试将变量传递给视图，这很奇怪，因为命名和目录结构是正确的。以下是我的控制器中的功能：

```
public function validate_apply_link(){
        App::uses('CakeEmail', 'Network/Email');

        $this->layout = 'blank';

        $listings = $this->CareersAndJob->query("
            SELECT l.sid, l.title, lp.value, u.CompanyName, u.WebSite
            FROM listings l
            LEFT JOIN listings_properties lp
            ON lp.object_sid = l.sid
            LEFT JOIN users u
            ON u.sid = l.user_sid
            WHERE l.active = 1
            AND lp.add_parameter = 2
            AND l.JobGateSenderReference IS NULL
            AND u.CompanyName != 'AECOM'
            ORDER BY u.CompanyName ASC
            LIMIT 5
            ");

        $doc = new DOMDocument();
        ob_start();
        $listing_count = count($listings);
        echo nl2br("Checking $listing_count active jobs...\n\n");
        $i=0;
        foreach($listings as $listing){

            $sid = $listing['l']['sid'];
            $url = $listing['lp']['value'];
            $company_name = $listing['u']['CompanyName'];
            $title = htmlspecialchars($listing['l']['title']);

            $length = strpos($title, "-");
            if($length != 0){
                $title = substr($title, 0, $length-1);
            }
            $title = substr($title, 0, $length-1);
            $title = substr($title, 0, 10);
            $data = $this->curl($url);

            $check_pdf = strpos($data['info']['content_type'], "pdf");
            if($check_pdf != false){
                $outputs['data'][$i]['url'] = $url;
                $outputs['data'][$i]['sid'] = $sid;
                $outputs['data'][$i]['title'] = $title;
                $outputs['data'][$i]['company_name'] = $company_name;
                $outputs['data'][$i]['our_link'] = "http://careersandjobs.com.au/display-job/{$sid}";
                $outputs['data'][$i]['content_type'] = $data['info']['content_type'];

                $outputs['data'][$i]['data_type'] = 'pdf';

                $i++;
                continue;
            }

            @$doc->loadHTML($data['results']);
            $html = $doc->saveHTML();
            $xpath = new DOMXpath($doc);

            $body = $doc->getElementsByTagName('body')->item(0);

            $parsed_url = parse_url($url);

            switch($parsed_url['host']){
                case "www.michaelpage.com.au":
                    parse_str($url);
                    $exist = $xpath->query("//*[contains(@value,'{$ref}')]");

                break;
                case "https://vacancies.mackay.qld.gov.au":
                    parse_str($url);
                    $exist = $xpath->query("//*[contains(@value,'{$title}')]");
                break;
                default:
                    $exist = $xpath->query("//*[contains(text(),'{$title}')]");
                break;
            }

            if($exist->length == 0){

                if(strpos($url, '#') == false){

                $outputs['data'][$i]['url'] = $url;
                $outputs['data'][$i]['sid'] = $sid;
                $outputs['data'][$i]['title'] = $title;
                $outputs['data'][$i]['company_name'] = $company_name;
                $outputs['data'][$i]['our_link'] = "http://careersandjobs.com.au/display-job/{$sid}";
                $outputs['data'][$i]['content_type'] = $data['info']['content_type'];

                $response_code = $this->http_response_codes($data['info']['http_code']);
                $outputs['data'][$i]['response_code'] = $response_code;

                $outputs['data'][$i]['data_type'] = 'title_not_found';

                }else{

                    $outputs['data'][$i]['data_type'] = 'no_iframe';
                }

                $i++;
            }

            flush();
            ob_flush();

        }

        $this->set(compact('outputs'));

    } 
```

我可以`pr`对视图中的`outputs`变量进行操作，但这会输出到，`NULL`但是当我删除控制器函数内的整组代码并通过它传递一个测试变量时，它可以工作。

我不知道的功能有问题吗？

顺便说一下上面的函数没有发现错误

```
app/Controller/CareersAndJobsController.php (line 1048)
array(
    'data' => array(
        (int) 0 => array(
            'url' => 'http://bawbawshire.currentjobs.com.au/cvbuilder/apply+for+this+job/no/1225055',
            'sid' => '3649',
            'title' => 'Graduate P',
            'company_name' => 'Baw Baw Shire Council',
            'our_link' => 'http://careersandjobs.com.au/display-job/3649',
            'content_type' => 'text/html; charset=utf-8',
            'response_code' => 'OK',
            'data_type' => 'title_not_found'
        ),
        (int) 1 => array(
            'url' => 'http://bawbawshire.currentjobs.com.au/cvbuilder/apply+for+this+job/no/1225724',
            'sid' => '3726',
            'title' => 'Program &a',
            'company_name' => 'Baw Baw Shire Council',
            'our_link' => 'http://careersandjobs.com.au/display-job/3726',
            'content_type' => 'text/html; charset=utf-8',
            'response_code' => 'OK',
            'data_type' => 'title_not_found'
        ),
        (int) 2 => array(
            'url' => 'http://bawbawshire.currentjobs.com.au/cvbuilder/apply+for+this+job/no/1225826',
            'sid' => '3727',
            'title' => 'Road Netwo',
            'company_name' => 'Baw Baw Shire Council',
            'our_link' => 'http://careersandjobs.com.au/display-job/3727',
            'content_type' => 'text/html; charset=utf-8',
            'response_code' => 'OK',
            'data_type' => 'title_not_found'
        )
    )
) 
```

这是我在`outputs`变量被控制器中的 set 函数设置之前从变量中得到的

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-23T09:33:53.673

您选择使用 CakePHP 的任何原因？因为您似乎*没有*使用它的功能！

您正在使用文字 SQL 查询，因此基本上跳过了 Models[功能](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html)。

您是从[*Controller*](http://book.cakephp.org/2.0/en/cakephp-overview/understanding-model-view-controller.html)输出内容吗？使用输出缓冲时要小心，这可能与 CakePHP 的内部工作相冲突，后者在许多情况下也依赖于输出缓冲。因为您已经在此处输出内容 (ob_flush())，所以您将在到达您的视图之前输出您的内容..

通常我会指出手册中的具体[点](http://book.cakephp.org/2.0/en/views/json-and-xml-views.html)，但是，因为这里有很多错误，我建议从头开始[阅读](http://book.cakephp.org/2.0/en/getting-started.html)

# windows-phone-7 - WP7 如何编写函数：绑定数据方法每 10 秒调用一次？

> ID：15584694
> 
> 赞同：0
> 
> 时间：2013-03-23T08:08:29.707
> 
> 标签：windows-phone-7

你能告诉我如何每 10 秒执行一次投标数据的方式或想法吗？

让我们看看下面的代码：

```
private void PhoneApplicationPage_Loaded(object sender, RoutedEventArgs e)
{
       proxy.DanhSachPhongChoiCompleted += new 
          EventHandler<DanhSachPhongChoiCompletedEventArgs>(proxy_DanhSachPhongChoiCompleted);
       proxy.DanhSachPhongChoiAsync(); 
}  

void proxy_DanhSachPhongChoiCompleted(object sender, DanhSachPhongChoiCompletedEventArgs e)
{
      Room[] table = e.Result;
      listDSPhong.ItemsSource = e.Result;                
} 
```

我们可以看到：在我的页面加载后，绑定数据将只执行一次。我需要每 10 秒调用 2 个方法。我应该怎么做？谢谢你教我！

```
proxy.DanhSachPhongChoiCompleted += new 
              EventHandler<DanhSachPhongChoiCompletedEventArgs>(proxy_DanhSachPhongChoiCompleted);
           proxy.DanhSachPhongChoiAsync(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T02:06:09.117

您可以使用例如 DispatcherTimer 类。

这是示例： [https ://stackoverflow.com/a/3266071/126995](https://stackoverflow.com/a/3266071/126995)

你最好在 NavigatedTo 中启动你的计时器，然后在 NavigatedFrom 中终止它。

PS 我怀疑您的代码中存在内存泄漏。请[阅读此](https://stackoverflow.com/questions/12133551/c-sharp-events-memory-leak)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T02:53:19.880

你可以使用微软的响应式库

[http://msdn.microsoft.com/en-us/data/gg577609.aspx](http://msdn.microsoft.com/en-us/data/gg577609.aspx)

并做这样的事情：

```
public void callfunction() 
    {
        IScheduler scheduler = NewThreadScheduler.Default;
        scheduler.Schedule(TimeSpan.FromSeconds(5), new Action<Action<TimeSpan>>(myRepeatingFunction));
    }

private void myRepeatingFunction(Action<TimeSpan> action)
    {
        //process here
        action(TimeSpan.FromSeconds(5)); // five second interval
    } 
```

# ios - QucikBlox：如何从应用程序中删除用户？

> ID：15584697
> 
> 赞同：1
> 
> 时间：2013-03-23T08:08:34.840
> 
> 标签：ios, quickblox

我可以在应用程序中删除快速 blox 用户帐户吗？（不是来自房间）

我希望该用户可以从应用程序中删除他们的帐户。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-26T13:40:32.407

**是 您可以使用应用程序凭据在 Quick Blox 中删除用户。您可以代表应用程序删除用户，但请确保您拥有用户凭据。**

1.  使用应用凭据授权应用程序

2.  使用用户凭据登录 检查用户是否存在 然后您可以通过快速 blox 用户 ID 或外部用户 ID 删除用户。

3.  确保不要使用应用程序 GetToken 更改用户 GetToken

    *如果有任何问题，请告诉我。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T14:28:39.633

是的，您可以，但只能使用您自己的帐户，因为您不是其他用户帐户的所有者

```
 [QBUsers deleteUserWithID:48456 delegate:self]; 
```

# web-services - 使用soapui操作webservice的返回结果

> ID：15584702
> 
> 赞同：1
> 
> 时间：2013-03-23T08:09:22.570
> 
> 标签：web-services, soapui

我的 GUI 应用程序与网络服务通信。例如在 GUI 中， **输入数字：'1'** 然后 web 服务发回

```
price : $10
quantity : 30 
```

目前，vendor webservice 还没有完成。但我需要测试我的 GUI 设计是否适合“价格”和“数量”列。

对不起，我是soapui的新手，不知道如何开始，虽然我读完了教程。

我需要创建一个模型网络服务才能启动吗？我从供应商那里获得了一个 Web 服务链接，`(.asmx)` 我在 IE 上打开了 .asmx 链接并获得了发送和请求 xml 格式。

我可以在soapui中使用那个xml吗？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-20T21:51:42.800

查看[http://www.soapui.org/Getting-Started/mock-services.html](http://www.soapui.org/Getting-Started/mock-services.html)以了解如何从 wsdl 创建模拟服务。

如果您无权访问供应商 wsdl，那么您可以使用任何其他 wsdl 并使用该 wsdl 创建一个模拟服务，然后将 xml 替换为您的 GUI 期望的内容。

此外，当您的 gui 调用 web 服务时，您需要更新应用程序中的 web 服务端点以指向模拟服务。

现在只需启动您的模拟服务就可以了。

# c# - 将整数转换为时间跨度

> ID：15584709
> 
> 赞同：39
> 
> 时间：2013-03-23T08:10:05.087
> 
> 标签：c#

如何转换`int`为`TimeSpan`？

示例`486000000000`是`int`刻度数。我希望它被表示为`TimeSpan`

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-03-23T08:28:35.583

您可以使用 From 方法，这些方法将允许您将天/小时/分钟/秒/毫秒/刻度转换为 TimeSpam 格式，如下所示：

```
TimeSpan ts = TimeSpan.FromTicks(486000000000);
Console.WriteLine(ts.ToString()); 
```

您可以替换`FromTicks`为

*   [从天](http://msdn.microsoft.com/en-us/library/system.timespan.fromdays.aspx)
*   [从小时](http://msdn.microsoft.com/en-us/library/system.timespan.fromhours.aspx)
*   [从毫秒](http://msdn.microsoft.com/en-us/library/system.timespan.frommilliseconds.aspx)
*   [从分钟](http://msdn.microsoft.com/en-us/library/system.timespan.fromminutes.aspx)
*   [从秒](http://msdn.microsoft.com/en-us/library/system.timespan.fromseconds.aspx)
*   [FromTicks](http://msdn.microsoft.com/en-us/library/system.timespan.fromticks.aspx)

# php - 将图像转换为 base64 字符串作为调用 Web 服务的输入

> ID：15584714
> 
> 赞同：-2
> 
> 时间：2013-03-23T08:11:15.553
> 
> 标签：php, image

我已将图像转换为 base64 字符串并起泡，但现在我想上传一张图像，然后将其转换为 base64 字符串，我想将此字符串作为输入发送以调用 Web 服务。我使用的代码是

```
<?php
$allowedExts = array("gif", "jpeg", "jpg", "png");
$extension = end(explode(".", $_FILES["file"]["name"]));
if ((($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "image/jpg")
|| ($_FILES["file"]["type"] == "image/png"))
&& ($_FILES["file"]["size"] < 20000)
&& in_array($extension, $allowedExts))
{
if ($_FILES["file"]["error"] > 0)
{
echo "Return Code: " . $_FILES["file"]["error"] . "<br>";
}
else
{
echo "Upload: " . $_FILES["file"]["name"] . "<br>";
echo "Type: " . $_FILES["file"]["type"] . "<br>";
echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br>";

if (file_exists("upload/" . $_FILES["file"]["name"]))
  {
  echo $_FILES["file"]["name"] . " already exists. ";
  }
else
  {
  move_uploaded_file($_FILES["file"]["tmp_name"],
  "upload/" . $_FILES["file"]["name"]);
  echo "Stored in: " . "upload/" . $_FILES["file"]["name"];
  }
 }
}
 else
{
echo "Invalid file";
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T09:11:11.843

尝试这个：

```
$image= file_get_contents("/path/to/image.jpg");
$convertedData= base64_encode($imagedata); 
```

**编辑**
看来你不知道基本的php。我应该帮助你吗？

**我正在回显 base64 格式的代码**

```
<?php
$allowedExts = array("gif", "jpeg", "jpg", "png");
$extension = end(explode(".", $_FILES["file"]["name"]));
if ((($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "image/jpg")
|| ($_FILES["file"]["type"] == "image/png"))
&& ($_FILES["file"]["size"] < 20000)
&& in_array($extension, $allowedExts))
{
if ($_FILES["file"]["error"] > 0)
{
echo "Return Code: " . $_FILES["file"]["error"] . "<br>";
}
else
{
echo "Upload: " . $_FILES["file"]["name"] . "<br>";
echo "Type: " . $_FILES["file"]["type"] . "<br>";
echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br>";

if (file_exists("upload/" . $_FILES["file"]["name"]))
  {
  echo $_FILES["file"]["name"] . " already exists. ";
  }
else
  {
  move_uploaded_file($_FILES["file"]["tmp_name"],
  "upload/" . $_FILES["file"]["name"]);
  echo "Stored in: " . "upload/" . $_FILES["file"]["name"].'<br />';

  /* Notice here */
  $image = file_get_contents("upload/" . $_FILES["file"]["name"]);
  $convertedData = base64_encode($imagedata);
  echo 'Base64 Inmage code :'.$convertedData;
  /* My edits end here */

  }
 }
}
 else
{
echo "Invalid file";
}
?> 
```

# javascript - 唯一随机数生成器 Javascript

> ID：15584716
> 
> 赞同：3
> 
> 时间：2013-03-23T08:11:22.793
> 
> 标签：javascript, random, generator

我正在尝试制作一款有趣的宾果游戏。我在很多地方都找了一个独特的发电机，但我似乎找不到。我试着自己做，但是一旦它实际上达到了一个相同的数字，它就会无限循环。我尝试了一个简单的代码，理论上应该可以工作，但由于某种原因，事情通过了。我能做些什么！？

```
var bc = [];
for (var i = 0; i < 5; i++) {
  var r = Math.floor(Math.random()*20+1) + 0;
  if(!(r in bc)){
    bc.push(r);     
    }
    else
    {
    i--;
    }
}
____________________________________________
____________________________________________
____________________________________________
b1=0;
b2=0;
b3=0;
b4=0;
b5=0;
var bc = [b1,b2,b3,b4,b5]
var bnc = function(){
    var n = Math.floor(Math.random() * 5+1)+0;
    var n2 = Math.floor(Math.random() * 5+1)+0;
    b1 = n;
    var a1 = true;
    var as = false;
    while(a1){
        var c = n;
        if(c===b1||c===0 ||as!==false){
        c = n2;
        as=true;
        }
        if(c===b1||c===0&&as===true){
        c = n;
        as=false;
        }
            if(c!=b1){
            b2 = c;
            a1 = false;
            a2 = true;
        }
    }
};
bnc();
console.log("new1");
console.log(b1,b2,b3,b4,b5);
//_______________________________________
var bnc2 = function(){
    var n = Math.floor(Math.random() * 5+1)+0;
    var n2 = Math.floor(Math.random() * 5+1)+0;
    var a1 = true;
    var as = false;
    while(a1){
        var c = n;
        if(c===b1||c===b2||c===0&&as===false){
        c = n2;
        as=true;
        }
        if(c===b1||c===b2||c===0&&as===true){
        c = n;
        as=false;
        }
        if(c!=b1&&c!=b2){
            b3 = c;
            console.log("made it 1");
            a1 = false;
        }
    }
};
bnc2();
console.log("new2");
console.log(b1,b2,b3,b4,b5); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-23T08:49:11.590

> 一旦它实际达到一个相同的数字

它永远不应该。此类算法[运行时间越长，运行时间越长](http://thedailywtf.com/Articles/The-Quest-for-the-Unique-ID.aspx)。你应该采取不同的方法：

将所有可能的数字放入一个池中。抽到号码后，将其从池中取出。就像在现实生活中所做的一样。

```
var pool = [1, 2, 3, 4, 5];
var getNumber = function () {
    if (pool.length == 0) {
        throw "No numbers left";
    }
    var index = Math.floor(pool.length * Math.random());
    var drawn = pool.splice(index, 1);
    return drawn[0];
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T08:37:25.417

我宁愿这样做：

[http://jsfiddle.net/YC58s/](http://jsfiddle.net/YC58s/)

```
generate = function(length)
{
    var arr = [];
    var n;
    for(var i=0; i<length; i++)
    {
        do
            n = Math.floor(Math.random()*20+1);
        while(arr.indexOf(n) !== -1)

       arr[i] = n;
    }

    return arr;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-27T13:49:13.903

This can handle generating upto 20 digit UNIQUE random number

**JS**

```
var generatedNumbers = [];

function generateRandomNumber(precision) { // precision --> number precision in integer 
    if (precision <= 20) {
        var randomNum = Math.round(Math.random().toFixed(precision) * Math.pow(10, precision));
        if (generatedNumbers.indexOf(randomNum) > -1) {
            if (generatedNumbers.length == Math.pow(10, precision))
                return "Generated all values with this precision";
                return generateRandomNumber(precision);
        } else {
            generatedNumbers.push(randomNum);
            return randomNum;
        }
    } else
       return "Number Precision shoould not exceed 20";
}
generateRandomNumber(1); 
```

[![enter image description here](../Images/e24c0310fb028d3b33c3b99e254abcad.png)](https://i.stack.imgur.com/95BQW.jpg)

[JsFiddle](http://jsfiddle.net/Nofiden/6ae8up1k/2/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-07-27T03:48:51.060

```
window.onload = unRanNumGen(20, 1, 12);
    //above, we need 12 random numbers between 20 (included) and 1(included)

function unRanNumGen(max, min, limit){

    //max = maximum number [inclued] (range of numbers)
    //min = minimum number [included] (range of numbers)
    //limit = number of random numbers (how many numbers do you want?)

    var pool = [genRan(max, min)];

    for(i=0; i<limit; i++){
        for(n = 0; n <i; n++){

            if(pool[n] !== genRan(max, min)){
            pool.push(genRan(max, min));

            break;
            }
        }

    }

function genRan(max, min){
    var genRan = Math.floor(Math.random() * (max - min) + min);
    return genRan;
}

alert(pool.join('\n')); //to display the array of random numbers

} 
```

# uml - 具有多个转换的状态机，具有相同的触发器/事件但不同的保护

> ID：15584717
> 
> 赞同：0
> 
> 时间：2013-03-23T08:11:25.860
> 
> 标签：uml, state-machine, statechart

如果我的状态 S1 有 2 个转换都由事件“A”触发，但其中一个有作为警卫`x !=0`，另一个没有。当警卫有效（）时，预期的行为是`x ==1`什么？

1.  不可预料的
2.  采取带守卫的过渡
3.  无防护过渡

我不记得读过关于不能在同一个事件中进行 2 次转换的文章。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T12:53:46.100

如果`x != 0`，例如`x== 1`，则转换`x == 0`未启用，另一个无人看守的转换是。另一个被解雇了。

如果`x == 0`，则启用两个转换。这是所谓的“冲突转换”的情况（参见 UML [Spec. 2.4.1](http://www.omg.org/cgi-bin/doc?formal/2011-08-06.pdf) ., p. 575）。冲突解决通常相当复杂，请参阅 UML 规范。在您的特定情况下，两个转换都离开相同的状态，结果是不确定的：可以采用任何一个转换

# image-processing - 如何获取手绘图像中特定对象或形状的位置（x，y）和数量？

> ID：15584719
> 
> 赞同：1
> 
> 时间：2013-03-23T08:11:33.360
> 
> 标签：image-processing, computer-vision, neural-network, object-detection, handwriting

首先，我自己学习了几个星期的图像处理、NN、dll，所以我真的很陌生，离专业人士还很远。n 对不起我的英语不好。

有我的绘图的图像或照片，我想获取对象/形状（黑点）的坐标 n 它周围的数字，数字表示点的序号。

![图片](../Images/698e5434825be98b98b27cd1f81931c9.png)

如何得到它？如何检测点？点的形状识别？数字的数字手写识别？然后分割得到位置？还是使用模板匹配？但是由于手绘，每个点都有一些不同的形状。使用神经网络？在 NN 中，神经元通常包含识别字符的每个像素，对吧？我可以使用每个神经元包含的字符或绘图点的图片来识别我的整个图片吗？

我很新，所以我真的需要你的建议，如果我错了，请纠正我！请告诉我我必须学习什么，我必须做什么，我必须使用什么。非常感谢。:'D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T09:07:00.500

这是一个难以通过快速解决方案解决的难题。

这是我将如何处理它：

1.  拍一张更好的照片。您的图像非常嘈杂，并且是在低光和高 ISO 下拍摄的。使用更好的相机和更好的照明条件，这样您就可以使背景尽可能白，而圆点尽可能黑。尝试最大化对比度。
2.  对图像设置阈值，使所有背景为白色，点和数字为黑色。也许您可以应用一些腐蚀和/或膨胀来帮助将暗边连接在一起。
3.  以某种方式检测矩形并将您的工作区域设置在矩形内（裁剪图像的其余部分，以便留下矩形内的区域）。您可以通过检测图像中的轮廓来做到这一点，然后面积最大的轮廓是矩形（因为它是图像中最大的对象）。当然，这不是唯一的方法。看到这个：[OpenCV找到轮廓](http://docs.opencv.org/doc/tutorials/imgproc/shapedescriptors/find_contours/find_contours.html)
4.  一旦你只剩下点、圆圈和数字，你就需要找到一种方法来检测它们并区分它们。您可以再次找到所有轮廓（或者您可能已经从上一步中找到了所有轮廓）。您需要找出一种方法来查看某个轮廓是圆形、实心圆（点）还是数字。这是它自己的问题。也许您可以计算轮廓边界框中的白色/黑色像素。点比圆圈和数字有更多的黑色像素。您还需要对与点连接的数字做一些事情（例如图像中的数字 5）
5.  一旦您知道什么是点、圆圈或数字，您就可以使用 OCR 库（[Tesseract 或任何其他 OCR 库](https://stackoverflow.com/questions/4314060/c-tesseract-or-any-other-ocr-lib)）来尝试识别数字。您还可以使用神经网络库（可能使用[MNIST 数据集](http://yann.lecun.com/exdb/mnist/)进行训练）来识别数字。一个好的方法是类似于[LeNet-5](http://yann.lecun.com/exdb/lenet/multiples.html)的卷积神经网络。

如您所见，这是一个需要许多不同步骤来解决的问题，并且涉及到许多不同的组件。我建议的步骤可能不是最好的，但通过一些工作我认为可以解决。

# asp.net - UpdatePanel 未更新

> ID：15584720
> 
> 赞同：0
> 
> 时间：2013-03-23T08:11:40.337
> 
> 标签：asp.net, visual-studio-2008, updatepanel

我在 GridView 行中有一个更新面板。我已按照所有标准程序从后面的代码更新面板，但似乎没有任何效果..

```
 <asp:UpdatePanel ID="UpdatePanelBoost" runat="server"  RenderMode="Inline" UpdateMode="Conditional">
                                      <ContentTemplate >
                                      <asp:LinkButton ID="LinkButtonBoost" 
                                      runat="server" Font-Size="XX-Small" Text="Boost Up" 
                                      OnCommand="LinkButtonBoost_Command"></asp:LinkButton>
                                            </ContentTemplate>
                                            <Triggers>
                                            <asp:AsyncPostBackTrigger ControlID="LinkButtonBoost" EventName="Command"/>
                                            </Triggers>
                                            </asp:UpdatePanel> 
```

代码绑定

```
 protected void LinkButtonBoost_Command(object sender, CommandEventArgs e)
{

  HiddenField HiddenFieldId = (HiddenField)GridView2.Rows[0].FindControl("HiddenFieldId");
    LinkButton Boostupbutton= (LinkButton)sender; 
    int SId= Convert.ToInt32(HiddenFieldSubjectId.Value);
    int QId =Convert.ToInt32(GridView2.DataKeys[0].Value.ToString ());
    UpdatePanel UpdatePanelBoost = (UpdatePanel)GridView2.Rows[0].FindControl("UpdatePanelBoost");

    if (e.CommandName == "Boost Up")
    {
        QuestionDataAccess.InsertQuestionBoost(QId, new Guid(Membership.GetUser().ProviderUserKey.ToString()), SId);
        Boostupbutton.CommandName = "Boost Down";
        Boostupbutton.CommandArgument = "Boost Down";
        UpdatePanelBoost.Update();
    }
   if(e.CommandName=="Boost Down")
    {
        if (QuestionDataAccess.RemoveQuestionBoost(new Guid(Membership.GetUser().ProviderUserKey.ToString()), QId))
        {
            Boostupbutton.CommandArgument = "Boost Up";
            Boostupbutton.CommandName = "Boost Up";
            UpdatePanelBoost.Update();
        }
    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T08:39:30.220

把你的gridview放在里面`UpdatePanel`。

当网格的任何行将被更新时，页面将不会得到回发。

按照此更新面板使用>>

[http://msdn.microsoft.com/en-us/library/bb399001%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/bb399001%28v=vs.100%29.aspx)

# android - 使用 Android 从 Arduino 读取蓝牙数据流

> ID：15584722
> 
> 赞同：0
> 
> 时间：2013-03-23T08:12:01.400
> 
> 标签：android, bluetooth, arduino, nfc

## 情况

我正在尝试编写一个执行一项非常简单任务的应用程序：当使用适当的 AAR 和 URI 检测到[NFC](http://en.wikipedia.org/wiki/Near_field_communication)标签时，它会启动应用程序，使用标签中的数据连接到指定的蓝牙无线电（由 NFC 标签指定) 并等待接受数据流，然后将其转换为字符串并显示在屏幕上。

当我当前运行应用程序时，它会立即退出并出现三个运行时异常。我希望它被动等待而不是关闭，并且我不理解运行时异常。

## 例外情况

1.  无法恢复活动；空指针异常
2.  解析标记（）；异常行 127
3.  onResume(); 第 83 行异常

## 编码

```
public class BlueNF extends Activity {

    private BluetoothDevice mBluetoothDevice = null;
    private BluetoothAdapter mBluetoothAdapter = null;
    private BluetoothSocket mBluetoothSocket = null;

    private NfcAdapter mNfcAdapter = null;

    private NdefMessage dashTag = null;

    private static final int REQUEST_ENABLE_BT = 3;
    private static final UUID SerialPortServiceClass_UUID = UUID.fromString("00001101-0000-1000-8000-00805F9B34FB");

    private InputStream iStream = null;

    public static String iValue = null;
    public final static String EXTRA_MESSAGE = "com.yogafarts.hackpsuproject.BlueNF.iValue";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        //Set the content view
        setContentView(R.layout.activity_blue_nf);
        //Check for NFC
        mNfcAdapter = NfcAdapter.getDefaultAdapter(this);
        if (mNfcAdapter == null) {
            Toast.makeText(this, "NFC is not available", Toast.LENGTH_LONG).show();
            finish();
            return;
        }

        //Check for Bluetooth
        mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
        if (mBluetoothAdapter == null) {
            Toast.makeText(this, "Bluetooth is not available", Toast.LENGTH_LONG).show();
            finish();
            return;
        }
    }

    @Override
    public void onStart() {
        super.onStart();

        if (!mBluetoothAdapter.isEnabled()) {
            Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
            startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT);
        }
    }

    public void onResume() {
        super.onResume();
        //IntentFilter ndefTag = new IntentFilter(NfcAdapter.ACTION_NDEF_DISCOVERED);

        //Get the current intent
        Intent dashTagIntent = getIntent();

        //Read extra intent data into tag object (Really just reading the NdefMessage into the dashTag object
        dashTag = dashTagIntent.getParcelableExtra(NfcAdapter.EXTRA_TAG);

        //Create a byte array of bluetooth hardware ID using ParseTag
        byte[] mBluetoothInfo = ParseTag(dashTag);

        //Create a bluetooth adapter object
        mBluetoothDevice = mBluetoothAdapter.getRemoteDevice(mBluetoothInfo);//Should be 0013EF00061A

        try {
            mBluetoothSocket = mBluetoothDevice.createRfcommSocketToServiceRecord(SerialPortServiceClass_UUID);
        }
        catch ( IOException e ) {
            Log.e( "Bluetooth Socket", "Bluetooth not available, or insufficient permissions" );
        }

        //Cancel discovery because it's resource intensive (if it's active)
        mBluetoothAdapter.cancelDiscovery();

        //Connect to the device
        try {
            mBluetoothSocket.connect();
            iStream = mBluetoothSocket.getInputStream();

            //System.out.println(iStream);
            //OutputStream oStream = mBluetoothSocket.getOutputStream();
        }
        catch ( IOException e ) {

            try { mBluetoothSocket.close();

            }
            catch ( IOException e2 ) {
                Log.e( "Bluetooth Socket", "IO Exception" );
            }
        }
        iValue = iStream.toString();
        viewMessage();
    }

    public byte[] ParseTag(NdefMessage ndef) {

        NdefRecord[] mNdef = ndef.getRecords();
        return mNdef[2].getPayload();
    }

    public void viewMessage() {
        Intent intent = new Intent(this, DisplayMessage.class);
        //TextView text = (TextView) findViewById(R.id.tv);
        String message = iValue;//text.getText().toString();
        intent.putExtra(EXTRA_MESSAGE, message);
        startActivity(intent);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.blue_n, menu);
        return true;
    }

} 
```

以及在读取流后显示文本的活动......

```
public class DisplayMessage extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_display_message);
        TextView text = (TextView) findViewById(R.id.tv);
            text.setText(com.yogafarts.hackpsuproject.BlueNF.iValue);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.display_message, menu);
        return true;
    }
} 
```

# java-native-interface - 春分启动器 jni

> ID：15584724
> 
> 赞同：0
> 
> 时间：2013-03-23T08:12:35.920
> 
> 标签：java-native-interface, equinox

有谁知道如何通过 jni 启动 Equinox ？我能够使用 JNI_CreateJavaVM(&jvm, (void**)&env, &vm_args); 调用 jvm 我得到了 org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar 的主类。现在如何将启动器参数传递给Equinox启动器？我试图这样做......我应该将参数传递给哪个方法？我试图为跑步做这件事...... 我得到一个返回码 13 并且它没有启动......可能是什么问题？

```
if(mainObject != NULL) {
                runMethod =  env->GetMethodID( mainClass, "run", "([Ljava/lang/String;)I");
                if(runMethod != NULL) {
                    methodArgs =  createRunArgs(env, equinoxArg2s);
                    if(methodArgs != NULL) {
                        //results->launchResult = 0;
                         runresult = env->CallIntMethod(mainObject, runMethod, methodArgs);
                        env->DeleteLocalRef(methodArgs); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T13:44:22.913

除了字符数组转换之外，我所做的一切都是正确的。WCHAR 到我创建的 jobjectarray 传递了一些垃圾字符，因此出现了问题......所以吸取了教训：当心您通过 jni 传递的数据。如果可以的话，请仔细检查两边..

# javascript - 如何获取从 GMT 日期到现在的时间？

> ID：15584726
> 
> 赞同：1
> 
> 时间：2013-03-23T08:13:20.593
> 
> 标签：javascript, jquery

我有一个这种格式的日期

```
Fri Mar 22 2013 23:38:20 GMT+0100 (CET) 
```

我必须检测从日期到现在已经过去了多少时间

我有 pre javascript 和 jquery 的可用性

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T08:22:05.157

你可以试试[这个](http://jsbin.com/omahay/3/edit)：

```
 function secondsToString(seconds)
    {
    var numyears = Math.floor(seconds / 31536000);
    var numdays = Math.floor((seconds % 31536000) / 86400); 
    var numhours = Math.floor(((seconds % 31536000) % 86400) / 3600);
    var numminutes = Math.floor((((seconds % 31536000) % 86400) % 3600) / 60);
    var numseconds = (((seconds % 31536000) % 86400) % 3600) % 60;
    return numyears + " years " +  numdays + " days " + numhours + " hours " + numminutes + " minutes " + numseconds + " seconds";

    }

    var t1=  Date.parse('Fri Mar 22 2013 23:38:20 GMT+0100 (CET)');
    var t2=  new Date()

    alert(secondsToString((t2-t1)/1000)) //"0 years 0 days 9 hours 39 minutes 40.98599999999715 seconds" 
```

# xslt-1.0 - 在 XSLT 中的 CSV 中添加数字

> ID：15584727
> 
> 赞同：1
> 
> 时间：2013-03-23T08:13:34.720
> 
> 标签：xslt-1.0

如何在 XSLT 1 的 CSV 中添加数字？

我要拿：

`<num>1,2,3</num>`

并得到元素中数字的总和，所以我们会从上面得到 6。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T16:00:13.423

**使用 FXSL 和`str-split-to-words`模板（我懒得编写耗时且容易出错的递归模板`:)` ）**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:ext="http://exslt.org/common">
 <xsl:import href="strSplit-to-Words.xsl"/>

  <xsl:output indent="yes" omit-xml-declaration="yes"/>

    <xsl:template match="/">
        <xsl:variable name="vwordNodes">
          <xsl:call-template name="str-split-to-words">
            <xsl:with-param name="pStr" select="."/>
            <xsl:with-param name="pDelimiters" select="','"/>
          </xsl:call-template>
        </xsl:variable>

       <xsl:variable name="vNums" select="ext:node-set($vwordNodes)/*"/>

       <xsl:value-of select="sum($vNums)"/>
    </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<num>1,2,3</num> 
```

**产生了想要的正确结果**：

```
6 
```

# java - Android：切换和更新布局

> ID：15584731
> 
> 赞同：1
> 
> 时间：2013-03-23T08:14:33.770
> 
> 标签：java, android, layout, switching

我有包含游戏刽子手的应用程序。我针对他们的绘画责任创建了一个单独的活动。这是代码：

```
public class DrawWisielec extends View
{
    Paint paint;
    int choose;
    public DrawWisielec(Context context,int choose) 
    {
        super(context);
        this.choose = choose;
    }

    protected void onDraw(Canvas canvas)
    {
        canvas.drawRGB(0,0,0);
        Paint Circle = new Paint();
        Paint paint = new Paint();
        Circle.setARGB(255,255,255,255);
        Circle.setStyle(Paint.Style.STROKE);
        Circle.setStrokeWidth(5);
        paint.setARGB(255, 255, 255, 255);
        paint.setStrokeWidth(5);
        switch(choose)
        {
        case 1:
            {
                canvas.drawLine(50, 400, 100, 300, paint);
                break;
            }
        case 2:
            {
            canvas.drawLine(100, 300, 150, 400, paint);
            break;
            }
        case 3: canvas.drawLine(100, 300, 100, 50, paint);
        case 4:canvas.drawLine(100,50,300,50,paint);
        case 5:canvas.drawLine(300,50,300,100,paint);
        case 6:canvas.drawCircle(300, 150, 50, Circle);
        case 7:canvas.drawLine(300, 200, 300, 250, paint);
        case 8:canvas.drawLine(300, 250, 250, 200, paint);
        case 9:canvas.drawLine(300, 250, 350, 200, paint);
        case 10:canvas.drawLine(300, 250, 275, 330, paint);
        case 11:canvas.drawLine(300, 250, 325, 330, paint);
        }
        invalidate();
    } 
```

如何在代码如下的另一个活动的绘图的各个阶段之间切换：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.game_mode_wisielec);

    DrawLayout = (LinearLayout)findViewById(R.id.WisielecDrawLayout);
    DrawWisielec draw = new DrawWisielec(this, choose);
    DrawLayout.addView(draw); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T08:18:19.787

您应该在`DrawWisielec`视图上调用 invalidate() 方法：

```
draw.setChoose(2); // Change stage of drawing to for example 2   
draw.invalidate(); // Redraw view 
```

根据Android文档：

> public void invalidate () 在 API 级别 1 中添加
> 
> 使整个视图无效。如果视图可见，onDraw(android.graphics.Canvas) 将在未来的某个时间点被调用。这必须从 UI 线程调用。要从非 UI 线程调用，请调用 postInvalidate()。

它将再次调用`onDraw()`您感兴趣的方法。请注意，这必须从 UI 线程调用。

# c++ - 条件运算符的奇怪用法

> ID：15584732
> 
> 赞同：1
> 
> 时间：2013-03-23T08:14:39.447
> 
> 标签：c++, c, conditional-operator

我目前正在将一些 Unix 代码移植到 Windows，并且遇到了一个相当奇怪的条件运算符用法，根据 Visual Studio（2010 或 2012），这不是有效的语法。

复制粘贴不做修改：

```
filename = filename ? : h->filename; 
```

没有条件！我认为它要么是对空字符串（`const char*`排序）的检查，要么是对空和空的检查，因为我想不出它可以是什么。

有人见过这个吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T08:22:12.393

这是一个 gcc 扩展。

```
x = a ? : b; 
```

几乎一样*_*

```
x = a ? a : b; 
```

`a`除了只评估*一次*的事实，如果`a`有任何副作用或评估成本很高，这很有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T08:28:10.060

在此特定上下文中，给定代码的工作方式类似于以下代码，

```
if (!filename) {
    filename = h->filename;
} 
```

另请注意，在此示例中 filename 和 h->filename 是两个不同的变量。filename 是一个普通变量，h->filename 是结构的成员变量。

# c++ - 多维向量的使用

> ID：15584735
> 
> 赞同：1
> 
> 时间：2013-03-23T08:14:52.803
> 
> 标签：c++, vector

我试图使用多维`vector`并更改行和列的值。

```
#include<iostream>
#include<vector>
using namespace std;

void changerow(vector<vector<int> > A, int row, int M, int P){
    for(int j = 0; j < M; j++){
        (A[row - 1])[j] = ((A[row - 1])[j] + P) % 10;

    }
}

void changecolumn(vector<vector<int> > A, int column, int N, int P){
    for(int i = 0; i < N; i++){
        (A[i])[column - 1] = ((A[i])[column - 1] + P) % 10;
    }
}

int main(int argc, char* argv[])
{
    int T, N, M;
    cin >> T >> N >> M;
    if((T >= 1 && T <= 10) && (M >= 1 && M <= 100) && (N >= 1 && N <= 100)){
        // Logic of the program
        vector<vector<int> > A(N, vector<int>(M));

        for(int i = 0; i < N ; i++){
            for(int j = 0; j < M; j++){
                cin >> (A[i])[j];
            }
        }
        changerow(A,2,M,3);
        for(int i = 0; i < N ; i++){
            for(int j = 0; j < M; j++){
                cout << A[i][j];
            }
        }
    }
    return 0;
} 
```

我不知道如何传递向量的地址以更改元素，因为只有向量的本地副本被传递。我目前正在阅读`Thinking in C++ Volume 1`，但并不详细。`vector`请让我知道在 C++中学习使用 s 的好资源。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T08:19:00.580

目前，您*通过 value*传递向量，这意味着被调用者获取向量的副本。

如果您希望被调用者所做的更改对调用者可见，则需要*通过引用*传递向量。这样做是这样的：

```
void changecolumn(vector<vector<int> >& A, int column, int N, int P){
                                      ^ THIS 
```

有关讨论，请参阅[C++ 中的按引用传递/值](https://stackoverflow.com/questions/410593/pass-by-reference-value-in-c)

# php - 通过提交表单对 SQL 查询进行排序

> ID：15584736
> 
> 赞同：1
> 
> 时间：2013-03-23T08:14:58.037
> 
> 标签：php, sql

我对自己想做的事情有一个大致的了解，但不确定如何编写 SQL。

用户可以将排序从 ASC 更改为 DESC，并将查询限制从 5 增加到 10。

```
$result=$mysqli->query("SELECT * FROM table WHERE status = 3 ORDER BY name ASC LIMIT $start_from, 5"); 
```

asc/desc 的选项框最终将是 $sort_order 限制的选项框将是 $limita

我试着把它写成

```
$result = "SELECT * FROM wp_pod_tbl_bars WHERE status = 3";
 if(!empty($limita)){$result.="LIMIT $limita, 5";}
 if ($result = $mysqli->query($result)) { 
 while($row = $result->fetch_object()){ 
```

但由于查询被分成不同的行，查询最终为空。

知道我做错了什么吗？如果需要，我会发布更多代码，但这通常是我的问题所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T08:16:46.760

`status`在和之间放置空格`LIMIT`。

```
$result = "SELECT * FROM wp_pod_tbl_bars WHERE status = 3";
 if(!empty($limita)){$result.=" LIMIT '".$limita."', 5";}
                ---------------^ 
```

# jsonp - Ext.util.JSONP.request 输出未定义

> ID：15584739
> 
> 赞同：0
> 
> 时间：2013-03-23T08:15:23.007
> 
> 标签：jsonp

我试图让这个例子工作：

```
Ext.util.JSONP.request({
url: 'http://www.mydomain.de/service/data.php',
callbackKey: 'callback',

callback: function(data) {
     alert(data.title);
} 
```

});

使用以下 php：

```
<?php
$callback = $_REQUEST['callback'];
$output = array('title' => 'Apple');
if ($callback) {
    header('Content-Type: text/javascript');
    echo $callback . '(' . json_encode($output) . ');';
} else {
    header('Content-Type: application/x-json');
    echo json_encode($output);
} 
```

?>

如果我试图提醒标题，我得到的只是“未定义”

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T18:04:46.367

尝试在成功事件中获取结果。我不确定回调事件。

这个和我一起工作。希望这有帮助。

```
Ext.util.JSONP.request({
    url: 'http://localhost:8000/test/',
    params: {
        key: 'data'
    },
    success: function (response, request) {     
        console.log(response);
    },
    failure: function (response, request) {
        console.log(request);
    }
}); 
```

# ios - 在 UIViewControllers 之间滚动而不丢失最后一个状态

> ID：15584744
> 
> 赞同：-1
> 
> 时间：2013-03-23T08:15:44.180
> 
> 标签：ios, xcode, uiviewcontroller, uinavigationcontroller

我有十个不同`UIViewControllers`的，每个都包含一个`right`和`left`按钮。右箭头会将下一个控制器带到前面，而左箭头会将前一个控制器带到前面。我需要在控制器之间导航而不会丢失最后一个状态。但是每次按下右箭头时，都会出现一个新的控制器。我试过`pushController`和`presentController`. 我想在控制器之间自由导航而不会丢失状态。能指导下怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T10:28:46.970

像这样的问题非常广泛，[Cocoa Touch](http://developer.apple.com/library/ios/#documentation/miscellaneous/conceptual/iphoneostechoverview/iPhoneOSTechnologies/iPhoneOSTechnologies.html)提供了许多管理视图控制器的机制。我建议阅读 Apple 的[iOS 视图控制器编程指南](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html)，特别是[从其他视图控制器呈现视图控制器](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ModalViewControllers/ModalViewControllers.html#//apple_ref/doc/uid/TP40007457-CH111-SW1)和视图控制器[之间的协调工作](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ManagingDataFlowBetweenViewControllers/ManagingDataFlowBetweenViewControllers.html#//apple_ref/doc/uid/TP40007457-CH8-SW1)部分。

话虽如此，这里有两种方法可以管理多个数据流，`UIViewControllers`同时让每个数据流保持活动状态，以便它们的所有状态（UI 和底层数据）在使用期间保持不变。这两种方法的关键是主视图控制器协调所有`UIViewControllers`需要呈现的内容的切换。

# UINavigationController

想象一下您的 10 个视图控制器 1 到 10。如果用户总是首先呈现视图控制器编号 1 并且只能通过它们顺序向前和向后导航，即用户不能直接在 1 和 10 之间导航，则这种方法是合适的：

![UINavigationController](../Images/0ab94077a5a7904cc363f6197087002f.png)

A`UINavigationController`专门管理分层内容的导航。尽管我们可能不认为我们的 10 个视图控制器在概念上是分层的，但使用 a`UINavigationController`允许我们利用其现有功能进行顺序导航。在这个模型中，每个视图控制器都负责保持对序列中以下视图控制器的引用，呈现它并实现它的委托回调以知道何时关闭它：

![UINavigationController](../Images/f3d86ade9c84ff6aaf8428edf1097001.png)

## 代码

> MYPresentationViewController.h

```
@class MYPresentationViewController;

// The MYPresentationViewControllerDelegate allows the presenting view controller to know when the presented view controller (next highest in the presentation stack) has been dismissed.
@protocol MYPresentationViewControllerDelegate <NSObject>
- (void)viewControllerDidFinish:(MYPresentationViewController *)viewController;
@end

@interface MYPresentationViewController : UIViewController <MYPresentationViewControllerDelegate>

// The next view controller in the sequence.
@property (strong, nonatomic) MYPresentationViewController *nextViewController;

// The delegate responsible for showing and dismissing this view controller.
@property (assign) id<MYPresentationViewControllerDelegate> delegate;

@end 
```

> MYPresentationViewController.m

```
#import "MYPresentationViewController.h"

@implementation MYPresentationViewController

#pragma mark - Custom Property Assessors

// Returns the next view controller in the sequence. Creates and configures it if it doesn't already exist.
- (MYPresentationViewController *)nextViewController
{
    if (_nextViewController == nil)
    {
        _nextViewController = [[MYPresentationViewController alloc] initWithNibName:@"MYPresentationViewController" bundle:nil];
        _nextViewController.delegate = self;
    }
    return  _nextViewController;
}

#pragma mark - UI Control Event Handlers

- (IBAction)leftButtonPressed:(UIButton *)sender
{
    // Tell the delegate this view controller is ready to be dismissed.
    [self.delegate viewControllerDidFinish:self];
}

- (IBAction)rightButtonPressed:(UIButton *)sender
{
    // Present the next view controller.
    [self.navigationController pushViewController:self.nextViewController animated:YES];
}

#pragma mark - MYPresentationViewControllerDelegate

- (void)viewControllerDidFinish:(MYPresentationViewController *)viewController
{
    // Dismiss the next view controller to return to this one.
    [self.navigationController popViewControllerAnimated:YES];
}

@end 
```

* * *

# 自定义主控制器

想象一下您的 10 个视图控制器 1 到 10。如果可以首先向用户呈现不在任一端（1 或 10）的视图控制器和/或用户可以直接在 1 和 10 之间导航，则这种方法是合适的循环导航：

![自定义主控制器](../Images/d00362f6816f5317caed673d156745c4.png)

编写我们自己的“主控制器”来监督和促进所有`UIViewControllers`需要呈现的内容的切换，使我们能够以任何我们想要的方式实现导航。在这个模型中，主视图控制器负责处理对所有正在呈现的视图控制器的引用，呈现它们并实现它们的委托回调：

![自定义主控制器](../Images/65607fcab9b7dd6e8dce8993aa2fa234.png)

## 代码

> MYMasterViewController.h

```
#import "MYPresentationViewController.h"

@interface MYMasterViewController : UIViewController <MYPresentationViewControllerDelegate>

// The collection of view controllers to be presented.
@property (strong, nonatomic) NSArray *allViewControllers;

@end 
```

> MYMasterViewController.m

```
#import "MYMasterViewController.h"

@implementation MYMasterViewController

...

// Create 10 view controllers;
- (void)createViewControllers
{
    NSMutableArray *allViewControllers = [NSMutableArray arrayWithCapacity:10];

    // Create our 10 view controllers.
    for (int i = 0; i < 10; i++)
    {
        MYPresentationViewController *viewController = [[MYPresentationViewController alloc] initWithNibName:@"MYPresentationViewController" bundle:nil];
        viewController.delegate = self;
        viewController.index = i;
        [allViewControllers addObject:viewController];
    }

    self.allViewControllers = allViewControllers;
}

// Display first view controller, could be any in the sequence.
- (void)displayViewController
{
    MYPresentationViewController *firstViewController = [self.allViewControllers objectAtIndex:0];
    [self presentViewController:firstViewController animated:NO completion:nil];
}

#pragma mark - MYPresentationViewControllerDelegate

- (void)viewController:(MYPresentationViewController *)viewController didDismissWithButton:(kButtonPressed)button
{
    [self dismissViewControllerAnimated:NO completion:nil];

    // Determine the next view controller to display.
    NSInteger index = viewController.index;
    index += button == kButtonPressedLeft ? -1 : 1;
    if (index < 0) {
        index = self.allViewControllers.count - 1;
    }
    else if (index >= self.allViewControllers.count) {
        index = 0;
    }

    MYPresentationViewController *nextViewController = [self.allViewControllers objectAtIndex:index];
    [self presentViewController:nextViewController animated:NO completion:nil];
}

@end 
```

> MYPresentationViewController.h

```
@class MYPresentationViewController;

// Enumeration used to give a more descriptive code association with the presentation view controller's navigation button options.
typedef enum {
    kButtonPressedLeft,
    kButtonPressedRight,
} kButtonPressed;

// The MYPresentationViewControllerDelegate allows the presenting view controller to know when the presented view controller has been dismissed and with what button i.e. (left or right).
@protocol MYPresentationViewControllerDelegate <NSObject>
- (void)viewController:(MYPresentationViewController *)viewController didDismissWithButton:(kButtonPressed)button;
@end

@interface MYPresentationViewController : UIViewController

// The index of this view controller in relation to 10.
@property (assign) NSInteger index;

// The delegate responsible for showing and dismissing this view controller.
@property (assign) id<MYPresentationViewControllerDelegate> delegate;

@end 
```

> MYPresentationViewController.m

```
#import "MYPresentationViewController.h"

@implementation MYPresentationViewController

#pragma mark - UI Control Event Handlers

- (IBAction)leftButtonPressed:(UIButton *)sender
{
    // Tell the delegate this view controller is ready to be dismissed.
    [self.delegate viewController:self didDismissWithButton:kButtonPressedLeft];
}

- (IBAction)rightButtonPressed:(UIButton *)sender
{
    // Tell the delegate this view controller is ready to be dismissed.
    [self.delegate viewController:self didDismissWithButton:kButtonPressedRight];
}

@end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T08:38:56.577

你需要维护一堆视图控制器，类似于 UINavigationController 所做的。当您向右移动时，无需创建新的视图控制器来呈现，您只需获取数组中的下一个视图控制器并呈现它

然后为了维护状态，每个视图控制器都应该负责管理自己的状态，并且由于您不是每次都创建新控制器，因此在视图被删除然后再次呈现后状态将是相同的。

例如，而不是

```
UIViewController *controller = //new view controller
[self presentViewController:controller]; 
```

你应该做

```
UIViewController *controller = [self.controllers nextViewController];
[self presentNextController:controller]; 
```

# iphone - 检查用户是否遵循路线（iphone）

> ID：15584745
> 
> 赞同：4
> 
> 时间：2013-03-23T08:15:44.917
> 
> 标签：iphone, ios, mkmapview, polyline, map-directions

我正在制作一个基于导航的应用程序。在此应用程序中，我从用户选择的点绘制路线。如果用户不遵循路线，我需要重新计算路线。

用于计算我使用的路线`Google direction API`。为了绘制路线，我使用了这段代码

```
- (void) drawRoute:(NSArray *) path
{
    NSInteger numberOfSteps = path.count;
    [self.objMapView removeOverlays: self.objMapView.overlays];

    CLLocationCoordinate2D coordinates[numberOfSteps];
    for (NSInteger index = 0; index < numberOfSteps; index++)
    {
        CLLocation *location = [path objectAtIndex:index];
        CLLocationCoordinate2D coordinate = location.coordinate;

        coordinates[index] = coordinate;
    }

    for( id <MKOverlay> ovr in [self.objMapView overlays])
    {
        MKPolylineView *polylineView = [[MKPolylineView alloc] initWithPolyline:ovr];

        if (polylineView.tag == 22)
        {
            [self.objMapView removeOverlay:ovr];
        }
        [polylineView release];
    }

    MKPolyline *polyLine = [MKPolyline polylineWithCoordinates:coordinates count:numberOfSteps];
    [self.objMapView addOverlay:polyLine];

} 
```

到现在为止一切正常。

现在，如果用户不在路线（超过 100 米），我想要一个通知。我也可以收到通知

问题：~ 如果道路是直的（超过 100 公吨），那么我无法在路上得分。为了解释问题，我附上了图片......

![路线](../Images/566f8bf241af0ad8ae4f1ae135e4a872.png)

在这张图片中，假设黑线是我的路径（折线），红色圆圈是我从 google api 获得的点。但是在显示为蓝色圆圈的直线路径中，我无法获得要比较的点，并且在此路径中调用了重新计算函数。

谁能告诉我解决方案，即使它是一条笔直的道路，我也可以从中获得所有路线点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-06-05T20:51:44.407

我知道这是一个旧线程，但最近遇到了同样的问题并找到了一个好的解决方案。这个概念是您不计算到每个线段的距离，而只计算到连接到最近点的两个线段的距离。

1.  计算您当前位置到 MKPolyline 中所有点的距离，并从中取最小值。（可能有一些很好的方法来优化它。就像不迭代每次位置更新时的所有点，但现在没有时间深入研究）。
2.  您现在知道到最近的折线点的距离。但是，该点可能仍然很远，而折线本身（连接该点和上一个或下一个点）可能更近。因此，计算您当前位置与这两个线段之间的距离，您就有了最近的距离。

现在，这不是防水的。虽然它最大限度地减少了 api 调用的 nr，但在某些情况下（如果您在 MKPolyline 中有疯狂的弯曲和曲线）它可能会在不需要时调用 api，但是嘿，那么将再次绘制相同的线，不会造成任何损坏。在我的测试中，它运行良好，您还可以调整准确性。我在下面的代码中将其设置为 200m（0.2km）。

```
//Get Coordinates of points in MKPolyline
NSUInteger pointCount = routeLineGuidanceTurn.pointCount;
CLLocationCoordinate2D *routeCoordinates = malloc(pointCount * sizeof(CLLocationCoordinate2D));
[routeLineGuidanceTurn getCoordinates:routeCoordinates
                         range:NSMakeRange(0, pointCount)];
NSLog(@"route pointCount = %d", pointCount);

//Determine Minimum Distance and GuidancePoints from
double MinDistanceFromGuidanceInKM = 1000;
CLLocationCoordinate2D prevPoint;
CLLocationCoordinate2D pointWithMinDistance;
CLLocationCoordinate2D nextPoint;

for (int c=0; c < pointCount; c++)
{
    double newDistanceInKM = [self distanceBetweentwoPoints:Currentcordinate.latitude longitude:Currentcordinate.longitude Old:routeCoordinates[c].latitude longitude:routeCoordinates[c].longitude];
    if (newDistanceInKM < MinDistanceFromGuidanceInKM) {
        MinDistanceFromGuidanceInKM = newDistanceInKM;
        prevPoint = routeCoordinates[MAX(c-1,0)];
        pointWithMinDistance = routeCoordinates[c];
        nextPoint = routeCoordinates[MIN(c+1,pointCount-1)];
    }
}
free(routeCoordinates);

NSLog(@"MinDistanceBefore: %f",MinDistanceFromGuidanceInKM);

//If minimum distance > 200m we might have to recalc GuidanceLine.
//To be sure we take the two linesegments connected to the point with the shortest distance and calculate the distance from our current position to that linedistance.
if (MinDistanceFromGuidanceInKM > 0.2) {
    MinDistanceFromGuidanceInKM = MIN(MIN([self lineSegmentDistanceFromOrigin:Currentcordinate onLineSegmentPointA:prevPoint pointB:pointWithMinDistance], [self lineSegmentDistanceFromOrigin:Currentcordinate onLineSegmentPointA:pointWithMinDistance pointB:nextPoint]),MinDistanceFromGuidanceInKM);

    if (MinDistanceFromGuidanceInKM > 0.2) {
        // Call the API and redraw the polyline.
    }
} 
```

这是计算两点之间距离的乐趣。我知道它有一个内置函数，但我的代码中已经有了它。

```
-(double)distanceBetweentwoPoints:(double)Nlat longitude:(double)Nlon Old:(double)Olat longitude:(double)Olon  {
    //NSLog(@"distanceBetweentwoPoints");
    double Math=3.14159265;
    double radlat1 = Math* Nlat/180;
    double radlat2 = Math * Olat/180;
    double theta = Nlon-Olon;
    double radtheta = Math * theta/180;
    double dist = sin(radlat1) * sin(radlat2) + cos(radlat1) * cos(radlat2) * cos(radtheta);
    if (dist>1) {dist=1;} else if (dist<-1) {dist=-1;}
    dist = acos(dist);
    dist = dist * 180/Math;
    dist = dist * 60 * 1.1515;
    return dist * 1.609344;
} 
```

这是计算点与其他两个点之间的线段之间距离的位。我从这里得到了这个：[https](https://stackoverflow.com/a/28028023/3139134) : //stackoverflow.com/a/28028023/3139134 对其进行了一些修改以使用 CLLocationCoordinate2D 并返回距离。

```
- (CGFloat)lineSegmentDistanceFromOrigin:(CLLocationCoordinate2D)origin onLineSegmentPointA:(CLLocationCoordinate2D)pointA pointB:(CLLocationCoordinate2D)pointB {

    CGPoint dAP = CGPointMake(origin.longitude - pointA.longitude, origin.latitude - pointA.latitude);
    CGPoint dAB = CGPointMake(pointB.longitude - pointA.longitude, pointB.latitude - pointA.latitude);
    CGFloat dot = dAP.x * dAB.x + dAP.y * dAB.y;
    CGFloat squareLength = dAB.x * dAB.x + dAB.y * dAB.y;
    CGFloat param = dot / squareLength;

    CGPoint nearestPoint;
    if (param < 0 || (pointA.longitude == pointB.longitude && pointA.latitude == pointB.latitude)) {
        nearestPoint.x = pointA.longitude;
        nearestPoint.y = pointA.latitude;
    } else if (param > 1) {
        nearestPoint.x = pointB.longitude;
        nearestPoint.y = pointB.latitude;
    } else {
        nearestPoint.x = pointA.longitude + param * dAB.x;
        nearestPoint.y = pointA.latitude + param * dAB.y;
    }

    CGFloat dx = origin.longitude - nearestPoint.x;
    CGFloat dy = origin.latitude - nearestPoint.y;
    return sqrtf(dx * dx + dy * dy) * 100;

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T08:28:56.330

对于每一步中的每一对点，您可以使用勾股定理计算它们之间的距离：

```
distance = sqrt(  pow((point1.x - point2.x), 2)   +   pow((point1.y - point2.y), 2)  ) 
```

然后，如果距离大于 100m，则沿线段添加中间点。

# jquery - Phonegap中的绑定

> ID：15584750
> 
> 赞同：3
> 
> 时间：2013-03-23T08:16:29.700
> 
> 标签：jquery, cordova, jquery-mobile, jquery-events

我正在使用 Phonegap 构建一个应用程序，我遇到了一个奇怪的问题，即绑定到点击事件不起作用，有人知道为什么吗？

```
document.addEventListener("deviceready", onDeviceReady, false);

function onDeviceReady() {
    navigator.geolocation.getCurrentPosition(onSuccess, onError);

    $('._jsClick').on('click', function() {
        alert('Hi!')
    }); 
```

这是HTML

```
<button class="_jsClick">Click Here!</button> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T08:29:02.083

首先，您应该将点击功能更改为：

```
$('._jsClick').on('click', function(event) {
        alert('Hi!')
    }); 
```

你也应该：

```
$('div:jqmData(role="page")').on('pagebeforeshow', function(){       
    $('._jsClick').on('click', function() {
        alert('Hi!')
    });
});

$('div:jqmData(role="page")').live('pagebeforeshow', function(){       
        $('._jsClick').on('click', function() {
            alert('Hi!')
        });
    }); 
```

未准备好文档

检查此链接：[如何让 jquery mobile "pagebeforeshow" 事件每次都触发，而不仅仅是 refresh](https://stackoverflow.com/questions/7549571/how-can-i-make-jquery-mobile-pagebeforeshow-event-fire-every-time-not-just-on)。上面的代码会在被调用时`$.mobile.changePage`被调用。

这应该是这样的：

```
document.addEventListener("deviceready", onDeviceReady, false);

function onDeviceReady() {
    navigator.geolocation.getCurrentPosition(onSuccess, onError);
    $('div:jqmData(role="page")').die('pagebeforeshow');
    $('div:jqmData(role="page")').live('pagebeforeshow', function(){    
       $('._jsClick').off('click'); 
       $('._jsClick').on('click', function() {
        alert('Hi!')
       });
     });
    } 
```

# google-chrome-extension - Chrome 标签创建仅限于 3 个？

> ID：15584754
> 
> 赞同：0
> 
> 时间：2013-03-23T08:16:48.570
> 
> 标签：google-chrome-extension, tabs

我发现在我的代码片段中，无论设置的数字有多大，chrome tab 的创建每次只能限制为 3 个。

有谁知道为什么并解决这个问题？

```
var number=xxx;
for (i=0;i<number; ++i){
      chrome.tabs.create({url: "http://" + url});
    }; 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T21:41:17.070

选项卡的创建没有限制。

我在我的 background.js 中对其进行了测试，并创建了 10 多个选项卡。

也许你有另一个限制标签的扩展？

你在哪里写你的代码？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T02:04:54.137

background.js 可以创建 > 10 个选项卡，但是在 popup.js 或 contentscript.js 中，我不能尝试它~

# php - 使用 php 创建购物车并更新其中的值

> ID：15584763
> 
> 赞同：1
> 
> 时间：2013-03-23T08:18:40.117
> 
> 标签：php, shopping-cart

我正在创建一个购物车，其中有四个按钮继续购物、清除购物车、更新购物车和下订单我，我在哪里做，这是我的代码

```
<?php
    include("includes/db.php");
    include("includes/functions.php");

    if(isset($_REQUEST['command'])=='delete' && $_REQUEST['pid']>0){
        remove_product($_REQUEST['pid']);
    }
    elseif(isset($_REQUEST['command'])=='clear'){
        $_SESSION["cart"] = array();
    }
    elseif($_REQUEST['command']=='update'){
        $max=count($_SESSION['cart']);
        for($i=0;$i<$max;$i++){
            $pid=$_SESSION['cart'][$i]['productid'];
            $q=intval($_REQUEST['product'.$pid]);
            if($q>0 && $q<=999){
                $_SESSION['cart'][$i]['qty']=$q;

            }
            else{
                $msg='Some proudcts not updated!, quantity must be a number between 1 and 999';
            }
        }
    }

?> 
```

这是我的 javascript

```
function update_cart(){
    document.form1.command.value='update';
    document.form1.submit();
} 
```

这是我的代码

```
<?php
            if(is_array($_SESSION['cart'])){
                echo '<tr bgcolor="#FFFFFF" style="font-weight:bold"><td>Serial</td><td>Name</td><td>Price</td><td>Qty</td><td>Amount</td><td>Options</td></tr>';
                $max=count($_SESSION['cart']);
                for($i=0;$i<$max;$i++){
                    $pid=$_SESSION['cart'][$i]['productid'];
                    $q=$_SESSION['cart'][$i]['qty'];
                    $pname=get_product_name($pid);
                    if($q==0) continue;
            ?>
                    <tr bgcolor="#FFFFFF"><td><?php echo $i+1?></td><td><?php echo $pname?></td>
                    <td>$ <?php echo get_price($pid)?></td>
                    <td><input type="text" name="product<?php echo $pid?>" value="<?php echo $q?>" maxlength="3" size="2" /></td>                    
                    <td>$ <?php echo get_price($pid)*$q?></td>
                    <td><a href="javascript:del(<?php echo $pid?>)">Remove</a></td></tr>
            <?php                   
                }
            ?>
                <tr><td><b>Order Total: $<?php echo get_order_total()?></b></td><td colspan="5" align="right"><input type="button" value="Clear Cart" onclick="clear_cart()"><input type="button" value="Update Cart" onclick="update_cart()"><input type="button" value="Place Order" onclick="window.location='billing.php'"></td></tr>
            <?php
            }
            else{
                echo "<tr bgColor='#FFFFFF'><td>There are no items in your shopping cart!</td>";
            }
        ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T08:42:35.787

`isset($_REQUEST['command'])`产生`true`或`false`。将该值与 比较`'delete'`产生与 相同的值`isset($_REQUEST['command'])`，因为`'delete'`被强制转换为布尔值`true`以与另一个布尔值进行比较。

特别是，结果

```
isset($_REQUEST['command'])=='clear' 
```

总是*一样*的

```
isset($_REQUEST['command'])=='update' 
```

所以如果第二个的条件`elseif`成立，那么第一个的条件也成立`elseif`。因此，第二个的主体`elseif`永远不会被执行（`elseif`而是第一个的主体被执行）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T08:44:04.863

几点。首先，我在代码中看不到您将任何产品添加到会话数组中的任何地方。这意味着您永远不会有任何产品要更新。还有 for 循环

```
 $max=count($_SESSION['cart']);
    for($i=0;$i<$max;$i++){ 
```

永远不会开始，因为在初始条件 $max 设置为 0 并且循环的边界条件是 $max < 0 即 0<0 ..

如果您尝试仅更新数量，那么您最初的前提是根本错误的，因为会话购物车永远不会有任何产品要更新，并且从您提出的第一个问题的解决方案中，$_SESSION['cart'] 的设置为array() 将始终保证一个空的 _SESSION 购物车。

这些行：

```
elseif(isset($_REQUEST['command'])=='clear'){
    unset($_SESSION['cart']);
} 
```

如果购物车最初未定义，则会在 unset() 行出现未定义错误而失败。请参阅第一个问题的答案以详细说明。

在您的页面顶部显示代码中，您有

```
 if(is_array($_SESSION['cart'])){ 
```

如果您实现了“明确”问题的解决方案，这将始终返回 true，因为您将购物车初始化为一个空数组。（顺便说一句 - 请更新上面的代码以反映该问题的“明确”解决方案）

至于更新代码的其余部分，我可以提出一些改进建议，但除非您可以实现一种填充购物车的方法，否则这一切都有些学术性。

另一方面，如果这只是一组脚本中的一个，并且如果它希望购物车在它执行任何操作之前已经被另一个填充，那么您将需要显式添加一个测试以确保 $max 是不为零，如果是，则什么也不做。

```
 $max=count($_SESSION['cart']);
    if ($max > 0) {
      for($i=0;$i<$max;$i++){
        $pid=$_SESSION['cart'][$i]['productid'];
        $q=intval($_REQUEST['product'.$pid]);
        if($q>0 && $q<=999){
          $_SESSION['cart'][$i]['qty']=$q;
        } else {
           $msg='Some proudcts not updated!, quantity must be a number between 1 and 999';
        }
      }
    } else {
      // handle the error your way
    } 
```

# multithreading - 在 Java GUI 中延迟代码处理的方法

> ID：15584770
> 
> 赞同：0
> 
> 时间：2013-03-23T08:20:07.790
> 
> 标签：multithreading, user-interface, process, delay, sleep

我正在制作一个延迟 set.visible(false) 代码的程序，然后在指定的时间间隔后，将 set.visible 设置为 true。

到目前为止，我找到了两种让它工作的方法： 1\. 使用 thread.sleep 2\. 使用摇摆计时器

还有其他方法可以延迟 java 中的进程吗？我的代码在 GUI 中，所以如果您的答案可以适用于 GUI 应用程序，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T18:30:54.940

使用**java.util.concurrent**包中的**ScheduledThreadPoolExecutor 。**

 **```
public ScheduledFuture<?> schedule(Runnable command, long delay, TimeUnit unit) 
```

[这](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html#schedule%28java.lang.Runnable,%20long,%20java.util.concurrent.TimeUnit%29)是文档。**

# android - android以编程方式使用形状

> ID：15584771
> 
> 赞同：1
> 
> 时间：2013-03-23T08:20:12.553
> 
> 标签：android

我正在尝试运行扩展 View 但未运行的 MainActivity。我是否必须使用 MainActivity extends Activity 来运行应用程序，因为我想在 MainActivity 类中使​​用 draw() 方法。我可以直接使用它还是必须使用 View 而不是 Activity？这是我的代码

```
public class MainActivity extends View  {
     public MainActivity(Context context) {
     super(context);
} 
```

主要.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#000000"
    android:gravity="center"
    android:orientation="vertical" >
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T08:33:57.407

您的活动应该扩展`Actvity`，并且您已经获得了绘制图像，`view`它是扩展的类对象`View`

我希望这对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T09:24:15.710

尝试类似：

```
class MyActivity extends Activity {
   ...
   @Override
   protected void onCreate {
      ...
      setContentView(R.layout.main);
      ....
   }
} 
```

在你之后`setContentView`，你可以通过调用来引用它`findViewById(<LinearLayout's id>)`。在您的布局中，您可以放置​​要绘制的视图

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T09:31:55.097

是的，您的主要活动（和任何其他活动）必须扩展活动。如果您想制作自己的自定义控件，只需编写它（扩展视图或其中的一些后代）并将其作为任何其他控件放入您的主布局中。在您的自定义控件中，您可以根据需要覆盖 onDraw() 方法。查看文档： [自定义控件](http://developer.android.com/guide/topics/ui/custom-components.html)

# mysql - Mysql 使用存储过程将 2 个值与 2 列从 vb6 到数据库进行比较

> ID：15584774
> 
> 赞同：2
> 
> 时间：2013-03-23T08:20:50.353
> 
> 标签：mysql, sql, database, vb6, sql-insert

我的数据库中有一个`products`包含列/字段的表：

*   产品编号
*   产品名称
*   描述
*   供应商
*   购买日期
*   数量

现在，我想要实现的是：

*   每次我想在`products`表中添加新值时，新输入的“产品名称”和“供应商”值都会比较`products`表中存在的所有值。

场景：

*   如果表中已经存在新的产品名称和供应商值`products`，则新值的数量将添加到现有值的数量中
*   ELSE 如果它不存在，则将 NEW 值添加到`products`表中。

这是尝试过的代码，但它不起作用：

```
Delimiter //
CREATE PROCEDURE `wew`(pid int,pname varchar(50),pdesc varchar(50),psupp varchar(50),pdate date,pquant int)
begin
declare lloyd char default null;
select productname from products where productname=pname LIMIT 1 into lloyd for update;
if(lloyd) then
update products set quantityleft=quantityleft+pquant where productname=pname;
else
insert into products (productid,productname,proddescription,supplier,lastpurchasedate,quantityleft) values(pid,pname,pdesc,psupp,pdate,pquant);
end if;
end;
// 
```

你能帮忙解决这个问题吗？真的对此感到困惑。

产品描述：

```
SQL result

Host: localhost
Database: prodpurchase
Generation Time: Mar 24, 2013 at 03:52 PM
Generated by: phpMyAdmin 3.2.4 / MySQL 5.1.41
SQL query: Desc Products; 
Rows: 7

Field             Type            Null      Key      Default    Extra
ProdID            int(5)          NO        PRI       NULL  auto_increment
ProdName          varchar(50)      NO       UNI       NULL   
ProdSupplier      varchar(250)     NO       UNI       NULL   
ProdDescription   varchar(250)     NO        NULL    
ProdDate          date             NO        NULL    
ProdPrice         double            NO       0   
ProdQuantity      int(50)        NO      NULL 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T08:25:47.860

您可以利用 MySQL 的**[INSERT...ON DUPLICATE KEY UPDATE](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)**

首先，您需要添加一个`UNIQUE`约束 ot columns:`productname`和`supplier`：

```
ALTER TABLE products ADD CONSTRAINT tb_uq UNIQUE (productname, supplier) 
```

一旦你执行了那个，

```
INSERT INTO products (productid, productname, proddescription, supplier, lastpurchasedate, quantityleft)
VALUES (pid, pname, pdesc, psupp, pdate, pquant)
ON DUPLICATE KEY UPDATE quantityleft = quantityleft + pquant; 
```

# jquery - 代码点火器从视图到控制器获取 ajax 值

> ID：15584776
> 
> 赞同：2
> 
> 时间：2013-03-23T08:21:18.983
> 
> 标签：jquery, ajax, codeigniter

如何在我的控制器中**发送？**这就是我尝试过的：

**阿贾克斯**

```
$.ajax({
    type: "POST",
    url: "example/name",
    data: send,
    success: function(value) {

    }
}); 
```

**控制器**

```
class Example extends CI_Controller {
    function name() {
        $this - > post(send);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T08:25:46.660

似乎您没有正确发送数据。尝试这个：

```
$.ajax({
    type: "POST",
    url: "example/name",
    data: {send: send},
    success: function(value) {

    }
}); 
```

在这种情况下，您将以`$_POST['send']`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T08:46:09.577

首先，您可以定义一个全局变量，该变量可用作 jquery 代码中的基本 url。将其放在页面部分的`<script>`标签中`<head>`

```
 //<![CDATA[
              base_url = '<?php echo base_url();?>';
        //]]> 
```

比这样的ajax请求

```
 var data  = 'var1=aaa&var2=bbb';

        $.ajax({
            type: "POST",
            url: base_url+"mainController/getData/", //base_url is the variable which you have defined in the head section 
            data: data,
            success: function(response){
                   alert(response);
            }
        }); 
```

比在控制器中检索这样的帖子数据

```
 class MainController extends CI_Controller {

            function getData()
            {
               $var1 = $this->input->post('var1');
               $var2 = $this->input->post('var2');

               echo $var1;
               echo '<br/>';
               echo $var2;
            }  
       } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T08:57:57.547

试试这个，这是ajax调用

```
 $.post('<?php echo base_url()?>example/name',{send:send}, 
          function(data) {

      }); 
```

然后像这样使用 post 访问它到你的控制器中

```
class Example extends CI_Controller {
function name() {
    $_POST['send'];
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T08:27:21.497

您应该指定要与发送一起发布的值，即它应该像 -

```
$.ajax({
    type: "POST",
    url: "example/name",
    data: 'send='+1,
    success: function(value) {

    }
}); 
```

然后你会得到这个变量的值。

使用-

```
$this->input->post('send'); 
```

# android - 如何在Android中删除应用程序

> ID：15584779
> 
> 赞同：0
> 
> 时间：2013-03-23T08:21:47.890
> 
> 标签：android

我将应用程序从 eclipse 下载到我的设备，并想在设备上删除该应用程序。我尝试从设置>应用程序管理器。但是我在那里找不到应用程序。如何删除应用程序？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T08:24:43.077

您可以通过 adb 使用：

```
adb uninstall PACKAGE_WRITTEN_IN_MANIFEST 
```

但是，go to`Settings -> Application Manager -> Downloaded Apps`应该列出您的应用程序并允许您将其删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T10:22:28.693

您可以按照 Android 设备上的步骤执行此操作

设置->管理应用程序->在应用程序上按Long（要卸载）

然后，最后点击卸载按钮。你完成了！

# iphone - Apple O-mach 链接器错误

> ID：15584781
> 
> 赞同：0
> 
> 时间：2013-03-23T08:22:00.147
> 
> 标签：iphone, objective-c

我创建了一个名为“ObjCWorkAppMath.m”的 NSObject 文件，它包含一些有用的函数，我想在我的 ViewController 文件中使用该类，但 XCode 没有编译我的项目并返回以下错误：

```
duplicate symbol _OBJC_METACLASS_$_ObjCWorkAppMath in:
    /Users/ctkt/Library/Developer/Xcode/DerivedData/ObjCWorkApp-hgxcjtjhzwxhqxcmxgkpucpfpieq/Build/Intermediates/ObjCWorkApp.build/Debug-iphonesimulator/ObjCWorkApp.build/Objects-normal/i386/ObjCWorkAppMath.o
    /Users/ctkt/Library/Developer/Xcode/DerivedData/ObjCWorkApp-hgxcjtjhzwxhqxcmxgkpucpfpieq/Build/Intermediates/ObjCWorkApp.build/Debug-iphonesimulator/ObjCWorkApp.build/Objects-normal/i386/ObjCWorkAppViewController.o
duplicate symbol _OBJC_CLASS_$_ObjCWorkAppMath in:
    /Users/ctkt/Library/Developer/Xcode/DerivedData/ObjCWorkApp-hgxcjtjhzwxhqxcmxgkpucpfpieq/Build/Intermediates/ObjCWorkApp.build/Debug-iphonesimulator/ObjCWorkApp.build/Objects-normal/i386/ObjCWorkAppMath.o
    /Users/ctkt/Library/Developer/Xcode/DerivedData/ObjCWorkApp-hgxcjtjhzwxhqxcmxgkpucpfpieq/Build/Intermediates/ObjCWorkApp.build/Debug-iphonesimulator/ObjCWorkApp.build/Objects-normal/i386/ObjCWorkAppViewController.o
ld: 2 duplicate symbols for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我尝试了stackoverflow中的所有解决方案来解决这个错误，但它仍然不起作用或者我做错了......

```
#import "ObjCWorkAppViewController.h"
#import "ObjCWorkAppMath.m"

@interface ObjCWorkAppViewController ()

@end

@implementation ObjCWorkAppViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

错误在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T08:23:35.337

代替

```
#import "ObjCWorkAppMath.m" 
```

经过

```
#import "ObjCWorkAppMath.h" 
```

导入*实现*文件而不是*接口*文件会导致类被定义两次：在“ObjCWorkAppMath.m”（它所属的位置）和“ObjCWorkAppViewController.m”（不打算这样做）中。

# php - foreach td 循环值

> ID：15584782
> 
> 赞同：0
> 
> 时间：2013-03-23T08:22:02.240
> 
> 标签：php, foreach, simplexml

我的 foreach 中有以下内容....这可行，但每个 $value 有 2 组值，它只显示第一个

```
<?php
$info = simplexml_load_file("https://api.website.co.za/ACCESS_GetAccountSessions?"); 
echo "<ul info>";

foreach ($info->sessions as $sessions): 
$count = $sessions->{'session-count'};
$ip = $sessions->session->{'ip-address'};
$nas = $sessions->session->{'nas-ip-address'};
$port = $sessions->session->{'nas-port'};
$phone = 'N/A';

            ?>

<?php
                    echo '<tr>',

              '<td class="blockcontentwhite sessionicon">',
              '<td class="blockcontentwhite center">' . ("$ip") . '</td>',
              '<td class="blockcontentwhite center">' . ("$nas") . '</td>',
              '<td class="blockcontentwhite center">' . ("$port") . '</td>',
              '<td class="blockcontentwhite center">' . ("$phone") . '</td>',

                    '</tr>';
                    endforeach;
                    ?> 
```

所以基本上在第一行的表格中，它显示了 $ip、$nas、$port 和 $phone 但它没有在第二行显示第二个值，有什么想法吗？

多谢你们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T08:40:16.820

您正在尝试将对象作为数组访问。`$info->sessions`是`SimpleXMLElement Object`包含（作为属性）要在 foreach 中使用的数组*的类型。*

将您的 foreach ( `foreach ($info->sessions as $sessions):`) 更改为`foreach ($info->sessions->session as $sessions):`和：

```
$count = $sessions->{'session-count'};
$ip = $sessions->session->{'ip-address'};
$nas = $sessions->session->{'nas-ip-address'};
$port = $sessions->session->{'nas-port'};
$phone = 'N/A'; 
```

到：

```
$count = $info->sessions->{'session-count'};
$ip = $sessions->{'ip-address'};
$nas = $sessions->{'nas-ip-address'};
$port = $sessions->{'nas-port'};
$phone = 'N/A'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T09:14:12.270

我认为 Jueecy 关于您提出的问题是正确的。

但我注意到除此之外看起来可能是个问题。看起来代码会生成多个表，但我认为您只需要同一个表中的多行。

我建议将您的 foreach 移至生成行的位置：

```
<?php
$info = simplexml_load_file("https://api.website.co.za/ACCESS_GetAccountSessions?"); 
echo "<ul info>";
?>

<input type="hidden" name="ctl00$ctl00$contentDefault$contentControlPanel$hdnIsSecure"     id="ctl00_ctl00_contentDefault_contentControlPanel_hdnIsSecure" value="false" />
<table id="active_sessions_table" class="blocktable centered" cellpadding="0"   cellspacing="0">
<tr class="blockheader">
<td id="active_sessions_title" class="left" colspan="2">
      <label  class="floatleft">Current connections</label></td>
</tr>
<tr id="trconnections">
<td class="blockcellnopadding" colspan="2">
<table cellpadding="4" cellspacing="0" width="100%"  style="border-bottom:solid 1px  #bfbfbf;">
        <tr>
            <td class="columntitle center">&nbsp;</td>
            <td class="columntitle center">IP Address</td>
            <td class="columntitle center">NAS IP Address</td>
            <td class="columntitle center">Line Port</td>
            <td class="columntitle center">Telephone Number</td>
        </tr>
<?php
        foreach ($info->sessions->session as $session) {
            $ip = $session->{'ip-address'};
            $nas = $session->{'nas-ip-address'};
            $port = $session->{'nas-port'};
            $phone = 'N/A';

            echo '<tr>',
          '<td class="blockcontentwhite sessionicon">',
          '<td class="blockcontentwhite center">' . ("$ip") . '</td>',
          '<td class="blockcontentwhite center">' . ("$nas") . '</td>',
          '<td class="blockcontentwhite center">' . ("$port") . '</td>',
          '<td class="blockcontentwhite center">' . ("$phone") . '</td>',

          '</tr>';
       };
?> 
```

# php - 我已经实现了触发另一个按钮单击事件的答案，但遇到了一些问题

> ID：15584784
> 
> 赞同：-1
> 
> 时间：2013-03-23T08:22:07.483
> 
> 标签：php, javascript, jquery

相关主题： [JQuery / JavaScript - 从另一个按钮单击事件触发按钮单击](https://stackoverflow.com/questions/3560227/jquery-javascript-trigger-button-click-from-another-button-click-event)

```
<input type="submit" name="savebutton" id="first" />
<input type="submit" name="savebutton" id="second" /> 
```

并将其添加到我的**第一个按钮**：`$("#second").click()`

**功能：**手动点击第一个按钮，然后自动触发第二个按钮。

**注意：** *第一个按钮比**第二个*按钮有很多数据库处理。第二个按钮处理逻辑只是更新第一个按钮处理的东西。

**问题：**

似乎*第二个按钮* **超过**了第一个按钮处理，因为我在第一个按钮上初始化了一些 SESSIONS 和数据库更新，但我的第二个按钮处理没有任何处理。我的意思是没有设置会话，也没有进行数据库表更新。

**但是**再次单击第*一个按钮*（第二次）我的*第二个按钮*处理获得了**第一个**处理的数据/值（我第一次单击的所有内容）。我可以说数据来自第一次单击按钮，因为我的数据库上也有一些自动增量值，它第一次增加。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T08:26:49.273

您遇到的很可能是一个异步请求，其中第二个按钮在第一个按钮功能真正完成之前被 jquery 单击。

如果是这种情况，最简单的解决方案是在异步函数上使用回调（可能是 AJAX 调用），然后使用该回调单击第二个按钮。

这是我没有代码/小提琴的直觉，因为异步请求因这种奇怪的行为而臭名昭著。

# android - 如何跟踪移动按钮（不是小部件按钮）点击事件

> ID：15584786
> 
> 赞同：4
> 
> 时间：2013-03-23T08:22:14.830
> 
> 标签：android

在Android应用程序中，当我按下我的移动*（星号）按钮（不是小部件按钮）时，我可以在我的应用程序中执行任何特定事件吗？如果有可能，那么我该如何实现呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T08:43:42.037

如果您的意思是硬件键盘上的 * 键（在拥有它的设备上），您可以使用 KeyCode 捕获它。

[在这里，您可以找到可以拦截的所有密钥的详尽列表。](http://developer.android.com/reference/android/view/KeyEvent.html)

去做吧：

```
@Override 
public boolean onKeyDown(int keyCode, KeyEvent event) {

switch (keyCode) {
    case KeyEvent.KEYCODE_STAR: //here you check any key you want
    {
        //your code here
        return true;
    }
}
return super.onKeyDown(keyCode, event);
} 
```

**编辑**

回答您的评论，我认为这是不可能的。KeyDown/Up 事件在活动上处理。而且您不会有活动活动。[看一下这个！](https://stackoverflow.com/questions/2986337/is-it-possible-to-create-an-android-service-that-listens-for-hardware-key-presse)

**编辑**

是的，根据[这个人](https://stackoverflow.com/questions/3454710/onkeydown-in-a-service-global-hot-keys/3455094#3455094)的说法，你不能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T08:27:27.447

如果按钮在您自己的应用程序中，那么可以。

如果您的意思是任何其他应用程序中的按钮（我认为您的意思是`*`拨号盘上的键），那么没有。

# java - 如何在java套接字编程中不使用IP地址获取MAC地址

> ID：15584788
> 
> 赞同：0
> 
> 时间：2013-03-23T08:22:44.867
> 
> 标签：java, sockets

我是Java套接字编程的新手。有人可以告诉我，如何在套接字编程中不使用IP地址的情况下获取MAC地址。

这是我可以在套接字中获取MAC地址的代码 -

NetworkInterface network = NetworkInterface.getByInetAddress(ip);

```
 byte[] mac = network.getHardwareAddress();

    System.out.print("Current MAC address : ");

    StringBuilder sb = new StringBuilder();
    for (int i = 0; i < mac.length; i++) {
        sb.append(String.format("%02X%s", mac[i], (i < mac.length - 1) ? "-              " : ""));      
    }
    System.out.println(sb.toString()); 
```

但这最终使用的是IP地址。有没有办法在不使用IP地址的情况下获取MAC地址？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T08:28:15.670

> 任何PC的MAC地址使用socket

简而言之，没有可靠的方法可以找出子网外主机的 MAC 地址。

如果您与相关主机位于同一子网中，请查看[ARP](http://en.wikipedia.org/wiki/Address_Resolution_Protocol)和[RARP](http://en.wikipedia.org/wiki/Reverse_Address_Resolution_Protocol)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T22:47:14.910

MAC 地址仅用于本地网络。这是交换机/路由器知道必须将数据包发送到哪里的方式。IP 用于在网络之间传输数据包。

所有 TCP/UDP 数据包都包括发送方 IP 和 MAC。这样，接收设备可以将 MAC 包含在返回包中，以便交换机/路由器知道将其发送到哪里。MAC 地址应该是唯一的，但不能保证，并且不能用作 Internet 上的设备地址。

当您使用互联网时，您使用 IP 协议（​​全球地址系统）当您在本地网络上时，设备通常使用 MAC 地址。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-02-11T11:18:38.150

```
 try{       

InetAddress ip = InetAddress.getLocalHost();
System.out.println("ip : " + ip);NetworkInterface network = NetworkInterface.getByInetAddress(ip);
byte[] mac = network.getHardwareAddress();
System.out.print("Current MAC address : ");
StringBuilder sb = new StringBuilder();
for (int i = 0; i < mac.length; i++) {
sb.append(String.format("%02X%s", mac[i], (i < mac.length - 1) ? "-" : ""));
}
System.out.println(sb.toString());
String s=sb.toString();System.out.println(s); 
```

# c# - 使用父变量创建子对象

> ID：15584789
> 
> 赞同：-1
> 
> 时间：2013-03-23T08:22:53.167
> 
> 标签：c#, inheritance, constructor, parent

好的，我找到了很多接近答案的信息，但没有任何真正有效的信息，我真的希望你们能提供帮助。

想象这样的事情

```
public class Parent
{
    public int A;
    int B;
    private int C;
    public Parent(int someIntA, int someIntB, int someIntC)
    {
        A = someIntA;
        B = someIntB;
        C = someIntC;
    }
}
public class Child : Parent
{
    public int D;
    // constructor
} 
```

我如何创建一个构造函数，当我创建一个对象“子”时，它有自己独立的 int A、B、C 和 D，或者子对象没有获得其父变量点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T08:25:25.003

扩展某些东西的要点之一是您获得了它们所具有的变量。

如果您只是希望它们具有某些功能（而不是“共享”变量），那么您应该考虑：

1.  将变量 tp 设置为私有，以便其他人无法访问它们
2.  改用接口

但这完全取决于你想做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T08:28:55.023

子对象始终包含其父对象的所有属性。但是您的孩子将无法像访问父母`C`一样访问父母的`private`信息。关键字用于隐藏成员
。`new`你应该可以使用类似的东西

```
private new C; 
```

在您的子类中隐藏父母的成员。

有关说明，请参见[此处](http://msdn.microsoft.com/en-us/library/435f1dw2.aspx)。

# algorithm - 外部合并中的通过次数

> ID：15584801
> 
> 赞同：1
> 
> 时间：2013-03-23T08:25:12.830
> 
> 标签：algorithm, sorting, external-sorting

至少从标题搜索来看，似乎没有任何预先存在的问题。我正在寻找外部合并的最佳通行证数量。因此，如果我们有 1000 个数据块，那么一次将是 1000 路合并。两遍可能是 5 组 200 个块，然后是 1 组 5 个块的最终合并。等等。我做了一些数学运算，这肯定有缺陷，因为看起来两次传球永远不会胜过一次传球。不过，这很可能是对如何读取数据的误解。

首先，一个数值示例：

数据：100 GB
内存：1 GB

由于我们有 1GB 内存，我们可以一次加载 1GB 以使用快速排序或合并排序进行排序。现在我们有 100 个要排序的块。我们可以进行 100 路合并。这是通过制作`RAM/(chunks+1)`大小桶 = `1024MB/101`=来完成的`10.14MB`。`10.14MB`100个块中的每一个都有 100 个桶，并且一个输出桶的大小也为`10.14MB`. 当我们合并时，如果任何输入存储桶为空，我们会执行磁盘搜索以重新填充该存储桶。同样，当输出桶装满时，我们写入磁盘并将其清空。我声称“磁盘需要读取的次数”是`(data/ram)*(chunks+1)`. 我从我们已经确定了输入桶大小的事实中得到了这一点，`ram/(chunks+1)`我们必须为给定的 pass 读取整个数据，所以我们读取`(data/bucket_size)`次。换句话说，每次输入桶清空时，我们都必须重新填充它。我们在这里做了 100 多个块，所以`numChunks*(chunk_size/bucket_size)`=`datasize/bucket_size`或`100*(1024MB/10.14MB)`. BucketSize = `ram/(chunks+1)`so `100*(1024/10.14)`= `(data/ram) * (chunks+1)`= `1024*100MB/1024MB * 101`= 10100 次读取。

对于两遍系统，我们执行 A 组 B #chunks，然后最终合并 1 组 A #chunks。使用前面的逻辑，我们有 numReads = `A*( (data/ram)*(B+1)) + 1*( (data/ram)*(A+1))`。我们也有`A*B`= `Data/Ram`。例如，10 个组，每组 10 个块，其中每个块是一个 GB。这里，A = 10 B = 10。10*10 = 100/1 = 100，即`Data/Ram`。这是因为`Data/Ram`是原始的块数。对于 2 次通过，我们想要`Data/Ram`分成 A 组 B #chunks。

我将尝试在这里分解公式，让 D = 数据，A = #groups，B = #chunks/group，R = RAM

`A*(D/R)*(B+1) + 1*(D/R)*(A+1)`- 这是 A 乘以 B #chunks 上的外部合并的读取次数加上 A #chunks 上的最终合并。

```
A = D/(R*B) => D^2/(B*R^2) * (B+1) + D/R * (D/(R*B)+1) 
```

`(D^2/R^2)*[1 + 2/B] + D/R`是 2 次通过外部合并的读取次数。对于 1 遍，我们有`(data/ram)*(chunks+1)`where chunks = data/ram for 1 pass。因此，对于一次通行证，我们有`D^2/R^2 + D/R`. 我们看到，只有当块大小 B 变为无穷大时，第 2 遍才达到这一点，即使如此，额外的最终合并也给了我们`D^2/R^2 + D/R`. 所以一定有一些关于我错过的阅读，或者我的数学有缺陷。感谢任何花时间帮助我的人！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T13:10:20.310

您忽略了这样一个事实，即从磁盘读取数据块所需的总时间是

*   旋转硬盘驱动器的访问时间大致恒定，大约为几毫秒。
*   传输时间取决于数据块的大小和传输速率。

随着块数量的增加，输入缓冲区（您称它们为桶）的大小会减小。输入缓冲区越小，恒定访问时间对填充缓冲区的总时间的影响就越明显。在某个时刻，填充缓冲区的时间几乎完全由访问时间决定。因此，合并过程的总时间开始随着缓冲区的数量而不是读取的数据量而增加。

这就是额外的合并通道可以加速该过程的地方。它允许使用更少和更大的输入缓冲区并减轻访问时间的影响。

**编辑：**这是一个快速的粗略计算，可以让您了解盈亏平衡点在哪里。

总传输时间可以很容易地计算出来。每次通过时，所有数据都必须读取和写入一次：

```
total_transfer_time = num_passes * 2 * data / transfer_rate 
```

缓冲区读取的总访问时间为：

```
total_access_time = num_passes * num_buffer_reads * access_time 
```

由于只有一个输出缓冲区，因此可以使其大于输入缓冲区而不会浪费太多内存，因此我将忽略写入的访问时间。缓冲区读取次数为`data / buffer_size`，缓冲区大小约为`ram / num_chunks`一次性方法，块数为`data / ram`。所以我们有：

```
total_access_time1 = num_chunks^2 * access_time 
```

`sqrt(num_chunks)`对于两次通过的解决方案，使用缓冲区来最小化访问时间是有意义的。所以缓冲区大小是`ram / sqrt(num_chunks)`，我们有：

```
total_access_time2 = 2 * (data / (ram / sqrt(num_chunks))) * acccess_time
                   = 2 * num_chunks^1.5 * access_time 
```

因此，如果我们使用`transfer_rate = 100 MB/s`, `access_time = 10 ms`, `data = 100 GB`, `ram = 1 GB`，则总时间为：

```
total_time1 = (2 * 100 GB / 100 MB/s) + 100^2 * 10 ms
            = 2000 s + 100 s = 2100 s
total_time2 = (2 * 2 * 100 GB / 100 MB/s) + 2 * 100^1.5 * 10 ms
            = 4000 s + 20 s = 4020 s 
```

访问时间的影响仍然很小。因此，让我们将数据更改为 1000 GB：

```
total_time1 = (2 * 1000 GB / 100 MB/s) + 1000^2 * 10 ms
            = 20000 s + 10000 s = 30000 s
total_time2 = (2 * 2 * 1000 GB / 100 MB/s) + 2 * 1000^1.5 * 10 ms
            = 40000 s + 632 s = 40632 s 
```

现在，一次性版本中的一半时间都花在了磁盘寻道上。让我们尝试 5000 GB：

```
total_time1 = (2 * 5000 GB / 100 MB/s) + 5000^2 * 10 ms
            = 100000 s + 250000 s = 350000 s
total_time2 = (2 * 2 * 5000 GB / 100 MB/s) + 2 * 5000^1.5 * 10 ms
            = 200000 s + 7071 s = 207071 s 
```

现在两遍版本更快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T01:23:16.593

要获得最佳效果，您需要更复杂的磁盘模型。让填充块大小的`S`时间是寻道时间和读取速率。`rS + k``k``r`

如果将大小的 RAM 划分为大小的`M`缓冲区`C+1`，`M/(C+1)`则加载 RAM 一次的时间为`(C+1) (r M/(C+1) + k)`= `rM + k(C+1)`。因此，正如您所期望的，`C`通过消除寻道来缩短读取时间。在一个顺序块中读取所有内存是最快的，但合并不允许这样做。我们必须做出权衡。这就是我们需要寻找最佳的地方。

随着总数据大小乘以`c`RAM 大小，有`c`要合并的块。

在一次通过方案中`C=c`， 和总读取时间必须正好是填满 RAM 的`c`时间：`c (rM + k(c+1)) = c(rM + kc + k)`.

在第一遍`N`数据的双向分割的双遍方案中，该遍具有`C=c/N`并且在第二遍中，`C=N`. 所以总成本是

```
c ( rM + k(c/N+1) ) + c ( rM + k(N+1) ) = c ( 2rM + k(c/N + N) + 2k ) 
```

请注意，此模型省略了写入时间。您最终应该填写它，除非您假设它在不同的设备上重叠 I/O，因此可以忽略。

在这里不难看出，如果`c`和`k`适当大，那么 2-pass 模型中的`c/N+N`项与 1-pass 中的项相比可以非常小`c`，2-pass 模型会更快。

我现在要停下来，但是您可以继续使用此逻辑来（可能）为任意次数的通过获得一个封闭的近似公式。这将需要求解一个无限级数。然后您可以将导数设置为零并求解最佳通过数的估计值。如果生活是美好的，您还可以`N`通过将 2d 函数的梯度设置为通道数和`N`为零来学习最佳值。我的直觉说`N ~ sqrt(c)`。

如果数学变得难以处理，您仍然可以在开始时使用上述简单代数模拟合理范围的传球次数，并以这种方式选择最优值。

这是一个有趣的问题，很抱歉我现在没有更多的时间来解决这个问题。我希望分析框架足以让你打出一个不错的结果。

# php - 如何从触发器 MySQL 更新多个列

> ID：15584805
> 
> 赞同：2
> 
> 时间：2013-03-23T08:25:50.587
> 
> 标签：php, mysql, sql, triggers, sql-update

嗨，我正在使用 mysql 触发器来更新另一个表插入时的表

这个触发器工作正常

```
CREATE TRIGGER `update_pupil_subject` AFTER INSERT ON `pupil_marks`
FOR EACH ROW  
BEGIN
   UPDATE  pupil_subjects  SET NumberOfStudens = NumberOfStudens + 1  WHERE NEW.SubjectID = SubjectID;
END$$ 
```

但这给出了一个错误

```
CREATE TRIGGER `update_pupil_subject` AFTER INSERT ON `pupil_marks`
FOR EACH ROW  
BEGIN
   UPDATE  pupil_subjects  SET NumberOfStudens = NumberOfStudens + 1 , AverageMarks = (SELECT AVG(Marks) FROM pupil_marks WHERE NEW.StudentID = StudentID ) WHERE NEW.SubjectID = SubjectID;
END$$ 
```

![在此处输入图像描述](../Images/95a9c1585b4d780c007407148669d825.png)

如何正确写这个，请帮助。提前致谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T08:56:58.253

显然使用子查询时出现了问题：

你可以尝试拆分SQL语句：

```
DELIMITER $$

CREATE TRIGGER `update_pupil_subject`
   AFTER INSERT
   ON `pupil_marks`
   FOR EACH ROW
BEGIN
   DECLARE avg_marks   float;

   SELECT AVG(Marks)
     INTO avg_marks
     FROM pupil_marks
    WHERE NEW.SubjectID = SubjectID;

   UPDATE pupil_subjects
      SET NumberOfStudens = NumberOfStudens + 1, AverageMarks = avg_marks
    WHERE NEW.SubjectID = SubjectID;
END
$$ 
```

编辑：使用

```
SHOW TRIGGERS WHERE `table` = 'pupil_marks'; 
```

获取定义的所有触发器`pupil_marks`。一个事件不能有多个触发器，因为所有操作都可以包含在单个触发器中。

注意：我认为`AVG(Marks)`是针对给定主题的，因此相应地修改了触发器定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T09:31:46.000

在触发器中声明一个变量并用子查询分配它

声明 avg_mark 整数默认 0；设置 avg_mark := (SELECT AVG(Marks) FROM student_marks WHERE NEW.StudentID = StudentID);

然后在更新语句中使用变量“avg_mark”......它可能会工作......

如果没有，请检查 phpmyadmin sql 框下方的分隔符。它应该是“$$”

# android - 通过 webview 在 Android 中的应用内购买

> ID：15584808
> 
> 赞同：1
> 
> 时间：2013-03-23T08:26:10.617
> 
> 标签：android, paypal, in-app-purchase

是否可以通过 android 应用程序在应用程序内购买带有 paypal 选项的浏览器视图。交易可以由浏览器本身而不是从应用程序进行。

如果我在 google play store 中发布应用程序，它是否符合 google 条款和条件？

# c# - 图表控件添加 x 点

> ID：15584809
> 
> 赞同：2
> 
> 时间：2013-03-23T08:26:14.210
> 
> 标签：c#, charts

![2j0Q8.png](../Images/06412ddab8860d81aa1200b06c67a615.png)

我有一个图表控件。它在 x 轴上有 8 个点（点），我需要 30 个。

我浏览了所有属性，但找不到在哪里设置。有小费吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T13:37:33.723

尝试设置图表的 AxisX 属性：

```
chart1.ChartAreas[0].AxisX.Interval = 1;
chart1.ChartAreas[0].AxisX.Minimum = 1;
chart1.ChartAreas[0].AxisX.Maximum = 30; 
```

# c# - 构建动态 SQL 查询的最佳实践

> ID：15584812
> 
> 赞同：4
> 
> 时间：2013-03-23T08:26:27.350
> 
> 标签：c#, sql, sql-server, linq

我正在寻找一些如何构建动态查询的提示和技巧。我有一个应用程序可以让用户在数据库表中搜索 10 个字段。根据 UI 中的哪些字段填充了值，查询应在数据库中的附加字段中搜索。

目前我正在尝试使用 StringBuilder 构建查询并添加 where 子句，但我真的不喜欢这样，我想知道是否有更好的方法来做到这一点，例如如果可能的话使用 LINQ。

也许有人可以提出想法或更好的一些示例代码。感谢，并有一个愉快的一天！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-23T08:31:00.360

With LINQ it is pretty trivial:

```
IQueryable<User> users = db.Users;

if(name != null) users = users.Where(u => u.Name == name);
if(dept != null) users = users.Where(u => u.Dept == dept);
...

var page = users.OrderBy(u => u.Name).Take(100).ToList(); 
```

Each successive `Where` *composes* the query with more filters; exactly what you want.

With raw TSQL, `StringBuilder` isn't unreasonable; just make sure that you fully parameterize it. This might mean adding parameters in each term; for example:

```
...
if(name != null) {
    sql.Append(" and u.Name = @name");
    cmd.Parameters.AddWithValue("name", name);
}
if(dept != null) {
    sql.Append(" and u.Dept = @dept");
    cmd.Parameters.AddWithValue("dept", dept);
}
... 
```

# c++ - 关于 C/C++ 编译器优化，我可以假设什么？

> ID：15584814
> 
> 赞同：9
> 
> 时间：2013-03-23T08:27:01.323
> 
> 标签：c++, visual-c++, compiler-optimization

当我将遗留代码、库代码或示例代码集成到我自己的代码库中时，我想知道如何通过重新散列源代码来避免浪费我的时间和冒着输入错误的风险。

如果我给出一个基于图像处理场景的简单示例，您可能会明白我的意思。

发现我正在集成这样的代码片段实际上并不罕见：

```
for (unsigned int y = 0; y < uHeight; y++)
{
    for (unsigned int x = 0; x < uWidth; x++)
    {
        // do something with this pixel ....
        uPixel = pPixels[y * uStride + x];
    }
} 
```

随着时间的推移，我已经习惯于做一些事情，比如将不必要的计算移出内部循环，并可能将后缀增量更改为前缀......

```
for (unsigned int y = 0; y < uHeight; ++y)
{
    unsigned int uRowOffset = y * uStride;
    for (unsigned int x = 0; x < uWidth; ++x)
    {
        // do something with this pixel ....
        uPixel = pPixels[uRowOffset + x];
    }
} 
```

或者，我可以使用指针算术，或者按行...

```
for (unsigned int y = 0; y < uHeight; ++y)
{
    unsigned char *pRow = pPixels + (y * uStride);
    for (unsigned int x = 0; x < uWidth; ++x)
    {
        // do something with this pixel ....
        uPixel = pRow[x];
    }
} 
```

...或按行和列...所以我最终得到了这样的结果

```
unsigned char *pRow = pPixels;
for (unsigned int y = 0; y < uHeight; ++y)
{
    unsigned char *pPixel = pRow;
    for (unsigned int x = 0; x < uWidth; ++x)
    {
        // do something with this pixel ....
        uPixel = *pPixel++;
    }

    // next row
    pRow += uStride;
} 
```

现在，当我从头开始编写时，我会习惯性地应用自己的“优化”，但我知道编译器也会执行以下操作：

*   将代码从内部循环移动到外部循环
*   将后缀增量更改为前缀
*   还有很多我不知道的东西

请记住，每次我以这种方式处理一段工作、经过测试的代码时，我不仅会花费自己一些时间，而且还会冒着引入手指问题或其他错误的风险（上面的示例已简化）。我知道“过早的优化”以及通过设计更好的算法等来提高性能的其他方法，但是对于上述情况，我正在创建将在更大的流水线类型的应用程序中使用的构建块，我可以' t 预测非功能性需求可能是什么，所以我只希望代码在时间限制内尽可能快和紧凑（我的意思是我花在调整代码上的时间）。

所以，我的问题是：我在哪里可以找到“现代”编译器通常支持的编译器优化。我正在使用 Visual Studio 2008 和 2012 的混合版本，但我很想知道与替代品是否存在差异，例如英特尔的 C/C++ 编译器。谁能提供一些见解和/或指向我有用的网络链接、书籍或其他参考资料？

**编辑**
只是为了澄清我的问题

*   我上面展示的优化只是简单的示例，而不是完整的列表。我知道进行这些特定更改是没有意义的（从性能的角度来看），因为编译器无论如何都会这样做。
*   *我专门寻找有关我正在使用的编译器提供了哪些优化的信息。*

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-23T08:34:56.047

我希望您作为示例包含的大多数优化都是浪费时间。一个好的优化编译器应该能够为您完成所有这些工作。

我可以通过实用的建议提供三个建议：

1.  在处理真实数据的真实应用程序的上下文中分析您的代码。如果你做不到，想出一些你认为会密切模仿最终系统的综合测试。
2.  仅优化您通过分析证明成为瓶颈的代码。
3.  如果您确信一段代码需要优化，请不要仅仅假设将不变量表达式分解出循环会提高性能。始终进行基准测试，可选择查看生成的程序集以获得进一步的洞察力。

上述建议适用于任何优化。但是，最后一点与低级优化特别相关。它们有点像魔法，因为涉及到很多相关的架构细节：[内存层次结构](http://en.wikipedia.org/wiki/Memory_hierarchy)和带宽、[指令流水线](http://en.wikipedia.org/wiki/Instruction_pipeline)、[分支预测](https://stackoverflow.com/questions/11227809/why-is-processing-a-sorted-array-faster-than-an-unsorted-array)、[SIMD](http://en.wikipedia.org/wiki/SIMD)指令的使用等。

我认为依赖编译器编写者对目标体系结构有很好的了解比试图超越他们更好。

有时您会通过分析发现您需要手动优化事物。但是，这些情况将相当罕见，这将使您能够将大量精力花在真正会有所作为的事情上。

同时，专注于编写正确且可维护的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T13:33:11.943

我认为重新考虑问题的前提可能对您更有用，而不是直接得到答案。

为什么要执行这些优化？从你的问题来看，我认为这是为了更快地制作一个具体的程序。如果是这样的话，你需要从这个问题开始：我如何让这个程序更快？

这个问题有一个非常不同的答案。首先，您需要考虑[阿姆达尔定律](http://en.wikipedia.org/wiki/Amdahl's_law)。这通常意味着优化程序的一两个重要部分才有意义。其他一切都几乎无关紧要。您应该使用分析器来定位程序的这些部分。此时您可能会争辩说您已经知道应该使用分析器。然而，我认识的几乎所有程序员都不会分析他们的代码，即使他们知道应该这样做。了解蔬菜不等于吃蔬菜。`;-)`

找到热点后，解决方案可能涉及：

1.  改进算法，减少代码工作量。
2.  改进内存访问模式，以提高缓存性能。

同样，您应该使用分析器来查看您的更改是否改进了运行时。

更多细节，你可以谷歌[代码优化](https://www.google.com/search?q=code+optimization)和类似术语。

如果你想认真一点，你还应该看看[Agner Fog 的优化手册](http://www.agner.org/optimize/)和[Computer Architecture: A Quantitative Approach](https://rads.stackoverflow.com/amzn/click/com/012383872X)。确保获得最新版本。

您可能还想阅读[微优化剧院的悲惨悲剧](http://www.codinghorror.com/blog/2009/01/the-sad-tragedy-of-micro-optimization-theater.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T09:50:15.387

> 关于 C/C++ 编译器优化，我可以假设什么？

**尽你所能**，除非你在优化代码中遇到功能或性能问题，然后关闭优化和调试。

现代编译器有各种策略来优化你的代码，尤其是当你在做[并发编程](http://en.wikipedia.org/wiki/Concurrent_computing#Concurrent_programming_languages)，并使用像[OMP](http://en.wikipedia.org/wiki/OpenMP)、[Boost](http://en.wikipedia.org/wiki/Boost_%28C%2B%2B_libraries%29)或[TBB](http://threadingbuildingblocks.org/)这样的库时。

如果您**确实**关心您的代码究竟是什么变成了机器代码，那么反编译并观察程序集也不会更好。

你做*手动优化*的最重要的事情，可能是*减少不可预测的分支*，这是编译器更难做到的。

如果您想查找有关优化的信息，已经有一个关于 SO 的问题

*   [Visual Studio中有哪些c++编译器优化技巧](https://stackoverflow.com/questions/3538168/what-are-the-c-compiler-optimization-techniques-in-visual-studio)

在优化选项中，有关于每个优化的解释：

*   [/O 选项（优化代码）](http://msdn.microsoft.com/en-us/library/k1ack8f1%28v=vs.110%29.aspx)

还有一些关于优化策略和技术的东西

*   [C++ 优化策略和技术，作者 Pete Isensee](http://www.tantalon.com/pete/cppopt/main.htm)

# sql - 在 sql 中插入语句，其中一个字段设置为自动编号

> ID：15584816
> 
> 赞同：3
> 
> 时间：2013-03-23T08:27:11.917
> 
> 标签：sql, jsp, ms-access, sql-insert, autonumber

我的表分支中有三列，即 id(Autonumber)、code(text)、desc(text)。我正在尝试执行这个 sql `insert into branch(code,desc) values('"+b+"','"+c+"')";` ，它给了我错误语法错误。请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T08:28:59.043

您的一列有名称`DESC`，即`Reserved Keyword`. 为了更好地执行`INSERT`语句，您需要使用`brackets`例如分隔列

```
insert into branch(code,[desc]) values ('"+b+"','"+c+"')"; 
```

*   [MSACCESS 保留关键字列表](http://office.microsoft.com/en-001/access-help/access-2007-reserved-words-and-symbols-HA010030643.aspx)

还有一件事，您的代码很容易出现`SQL Injection`. 请参数化查询。

# android - ZXing二维码阅读器直接集成android

> ID：15584835
> 
> 赞同：0
> 
> 时间：2013-03-23T08:28:57.410
> 
> 标签：android, qr-code, zxing

想要开发一个 QR 码阅读器.. 它将为我的应用程序定制。经过大量搜索后，我找到了一个链接[http://www.androidaz.com/development/zxing-qr-reader-direct-integration](http://www.androidaz.com/development/zxing-qr-reader-direct-integration)本教程演示了我到底想要什么。但是当我导入它然后运行这个应用程序时，我注意到它的相机在我旋转设备时处于 90 度角。我无法意识到的问题是什么。我的 main.xml 是

```
 <FrameLayout
    android:layout_width="200dip"
        android:layout_height="200dip"
        android:layout_gravity="center_horizontal">
         <include layout="@layout/capture"/>
</FrameLayout> 
```

我的主要活动文件是：

```
public class ScannerActivity extends CaptureActivity 
{
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_qrcode);
    }

    @Override 
    public void handleDecode(Result rawResult, Bitmap barcode) 
    {

        Toast.makeText(this.getApplicationContext(), "Scanned code " + rawResult.getText(), Toast.LENGTH_LONG).show();
    }
} 
```

具有权限的清单文件：

```
<uses-permissionandroid:name="android.permission.CAMERA"/>

<uses-permissionandroid:name="android.permission.INTERNET"/>

<uses-permissionandroid:name="android.permission.VIBRATE"/>

<uses-permissionandroid:name="android.permission.FLASHLIGHT"/>

<uses-permissionandroid:name="android.permission.READ_CONTACTS"/>

<uses-permissionandroid:name="com.android.browser.permission.READ_HISTORY_BOOKMARKS"/>

<uses-permissionandroid:name="android.permission.WRITE_EXTERNAL_STORAGE"/>

<uses-permissionandroid:name="android.permission.CHANGE_WIFI_STATE"/>

<uses-permissionandroid:name="android.permission.ACCESS_WIFI_STATE"/> 
```

它可以很好地读取二维码。唯一有问题的相机在旋转时导致异常行为..提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-18T19:12:23.880

也许你想做的是在这里：

**android-zxinglib**

**zxing BarcodeScanner的一个android库项目**

https://code.google.com/p/android-zxinglib/

下载项目并查看这些文件：

*   AndroidManifest.xml
*   捕获.xml

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2015-02-17T16:47:29.873

进入您的清单并将方向更改为横向。肖像给我带来了同样的问题，风景看起来好多了。

# android - Android自定义列表，意外关闭应用

> ID：15584838
> 
> 赞同：1
> 
> 时间：2013-03-23T08:29:10.347
> 
> 标签：android, android-layout, listview, android-ui, custom-lists

我正在使用以下代码在我的自定义列表中显示数据。但它会关闭，但不支持的操作除外。java.lang.UnsupportedOperationException：适配器视图不支持 addView(View, LayoutParams)

```
public class VerifiedProblemsActivity extends Activity {
    ArrayList<Problem> problemsList;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        Log.d("IN VERIFIED ACTIVITY", "ACTIVITY");
        setContentView(R.layout.verified_problems);

        ListView problemsListView = (ListView) findViewById(R.id.problemsList);

        ArrayList<Problem> problemsList = new ArrayList<Problem>();

        Problem p1 = new Problem();
        p1.problemName = "Problem 1";
        p1.problemComments = "Comments 1";

        Problem p2 = new Problem();
        p2.problemName = "Problem 1";
        p2.problemComments = "Comments 1";

        problemsList.add(p1);
        problemsList.add(p2);

        problemsListView.setAdapter(new ProblemAdapter(getApplicationContext(),
                android.R.layout.simple_list_item_1, problemsList));
    }

    private class Problem {
        public String problemName;
        public String problemComments;

        public Problem() {
            problemName = "";
            problemComments = "";
        }
    }

    private class ProblemAdapter extends ArrayAdapter<Problem> {
        ArrayList<Problem> problemObjects;

        @SuppressWarnings("unchecked")
        public ProblemAdapter(Context context, int textViewResourceId,
                List objects) {
            super(context, textViewResourceId, objects);
            problemObjects = new ArrayList<Problem>(objects);

            // TODO Auto-generated constructor stub
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            // TODO Auto-generated method stub
            LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            View row = inflater.inflate(R.layout.list_item, parent);
            try {

                TextView title = (TextView) row
                        .findViewById(R.id.tvProblemTitle);
                TextView description = (TextView) row
                        .findViewById(R.id.tvProblemDecription);

                title.setText(problemsList.get(position).problemName);
                description
                        .setText(problemsList.get(position).problemComments);

            } catch (Exception e) {
                Log.d("VERIFIED PROBLEM ACTIVITY", e.getMessage());
            }
            return row;
        }
    }
} 
```

以下是我正在使用的列表项布局。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="5dp"
        android:gravity="center_vertical" >

        <ImageView
            android:id="@+id/imgProblemImage"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingRight="5dp"
            android:src="@drawable/ic_launcher" />

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:gravity="center_vertical"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/tvProblemTitle"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Medium Text"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <TextView
                android:id="@+id/tvProblemDecription"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Small Text"
                android:textAppearance="?android:attr/textAppearanceSmall" />
        </LinearLayout>

    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T08:32:10.627

> java.lang.UnsupportedOperationException：适配器视图不支持 addView(View, LayoutParams)

我认为问题是这样的：

```
View row = inflater.inflate(R.layout.list_item, parent); 
```

AdapterView 不允许添加新视图，因此您需要将 null 作为 ViewGroup 传递。

```
View row = inflater.inflate(R.layout.list_item, null, false); 
```

现在它应该可以工作了。让我知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T08:47:50.570

问题。改变这些方法

```
LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View row = inflater.inflate(R.layout.list_item, parent); 
```

喜欢这个

```
View row  = convertView
if(row==null){
LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
row = inflater.inflate(R.layout.list_item, null);
} 
```

希望这对您有所帮助。

# javascript - Can't destroy CKEditor instances

> ID：15584841
> 
> 赞同：3
> 
> 时间：2013-03-23T08:30:01.713
> 
> 标签：javascript, ckeditor

I'm trying to refresh all my CKEditor instances using this code:

```
 for(name in CKEDITOR.instances)
        {
            console.log(name);
            CKEDITOR.instances[name].destroy();
            //Also tried this
            //CKEDITOR.instances[name].destroy(true);

        }
        CKEDITOR.inlineAll(); 
```

and I'm receiving this:

```
Uncaught TypeError: Cannot call method 'getRanges' of null. 
```

The interesting part is that, if I use the code directly in the console, it works just fine.

Anyone has any idea on how to solve it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T15:55:14.263

检查此错误报告：[http ://dev.ckeditor.com/ticket/10219](http://dev.ckeditor.com/ticket/10219)

在 4.1 和 4.0.3 中，我们已经部分解决了这个问题，但是......只是部分解决了:)。然而，这个错误不应该引起任何问题——它是完全无害的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:39:49.220

我也有同样的问题，但它似乎已在 ck-editor-dev 存储库中修复。有人在 2 天前检查了 CKEDITOR 4.1.1 里程碑的修复。再次检查[http://dev.ckeditor.com/ticket/10219](http://dev.ckeditor.com/ticket/10219)以访问 git 中的更改链接。

# android - RoboGuice 自定义模块应用上下文

> ID：15584847
> 
> 赞同：2
> 
> 时间：2013-03-23T08:30:55.487
> 
> 标签：android, dependency-injection, roboguice

如何在我的自定义模块中获取应用程序上下文？这是我的模块的代码：

```
public class MyModule extends AbstractModule {
    @Override
    @SuppressWarnings("unchecked")
    protected void configure() {
        // Package Info
        try {
            final PackageInfo info = application.getPackageManager().getPackageInfo(
                    application.getPackageName(), PackageManager.GET_META_DATA);
            bind(PackageInfo.class).toInstance(info);
        } catch (PackageManager.NameNotFoundException e) {
            throw new RuntimeException(e);
        }
    }
} 
```

我正在尝试获取应用程序的元数据。PackageInfo 的默认模块版本没有元数据，因此我需要自定义绑定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T14:00:17.400

只需将其注入构造函数

```
public final class MyModule extends AbstractModule
{
    private final Context   context;

    @Inject
    public MyModule(final Context context)
    {
        super();
        this.context = context;
    }

    @Override
    @SuppressWarnings("unchecked")
    protected void configure() {
        // Package Info
        try {
            final PackageInfo info = context.getPackageManager().getPackageInfo(
                context.getPackageName(), PackageManager.GET_META_DATA);
            bind(PackageInfo.class).toInstance(info);
        } catch (PackageManager.NameNotFoundException e) {
            throw new RuntimeException(e);
        }
    } 
```

}

# ocaml - What's the difference (if any) between Standard ML's module system and OCaml module system?

> ID：15584848
> 
> 赞同：42
> 
> 时间：2013-03-23T08:30:57.010
> 
> 标签：ocaml, sml, ml

My question is if there is any difference between Standard ML's module system and OCaml module system? Has OCaml all the support of functors , ascriptions etc... that SML has?

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-03-23T09:50:50.373

在功能方面以及语义方面存在一些差异。

SML 支持但不支持 OCaml 的功能：

*   透明签名归属
*   模块级`let`
*   对称共享约束
*   类型和值上的函子的语法糖

OCaml 4 有但没有 SML 的特点：

*   高阶函子
*   递归模块
*   本地模块
*   嵌套签名
*   模块作为一流的价值
*   通用模块共享 ( `sig with module A = M`)
*   `module type of`

然而，一些 SML 实现提供了其中一些作为扩展：例如，高阶函子（SML/NJ、Moscow ML、Alice ML）、本地和一流模块（Moscow ML、Alice ML）、模块共享（SML/NJ、 Alice ML）、嵌套签名（Moscow ML、Alice ML）和递归模块（Moscow ML）。

语义方面，最大的区别在于类型等价的处理，尤其是在函子方面：

*   在 SML 中，函子是*生成*的，这意味着将相同的函子两次应用于相同的参数总是会产生新的类型。

*   在 OCaml 中，仿函数是*applicative*，这意味着将相同的仿函数两次应用于完全相同的参数（加上额外的句法限制）会重现等效类型。这种语义更灵活，但也可能破坏抽象（参见我们在[本文](http://www.mpi-sws.org/~rossberg/papers/Rossberg,%20Russo,%20Dreyer%20-%20F-ing%20Modules%20%5BJFP%20Draft%5D.pdf)第 8 节中给出的示例）。

    **编辑**：OCaml 4 添加了使函子生成的能力。

*   OCaml 有一个纯语法的签名概念，这意味着某些类型等价不能被类型系统表达，并且会被默默地丢弃。

    **编辑：**考虑这个例子：

    ```
    模块 F (X : sig type t end) = struct type u = Xt -> unit type v = Xt end
    模块 M = F (结构类型 t = int end : sig type t end)

    ```

    的类型`M`很简单，因此丢失了有关其类型和`sig type u type v end`之间关系的任何信息，因为这通常不能用表面语法来表达。`u``v`

另一个显着的区别是 OCaml 的模块类型系统是[不可确定](https://sympa.inria.fr/sympa/arc/caml-list/1999-07/msg00027.html)的（即类型检查可能不会终止），因为它允许抽象签名，而 SML 不允许这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T08:38:32.577

至于语义，上面的 Andreas Rossberg 给出了一个更好、更详尽的答案。[但是，关于此站点](http://www.mpi-sws.org/~rossberg/sml-vs-ocaml.html#functors)的语法，您可能正在寻找。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-13T10:41:56.193

SML 中还有 abstype 工具，它类似于数据类型工具，只是它隐藏了数据类型的结构。OCaml 依赖于模块抽象来完成所有必要的隐藏。请注意，[该站点](https://people.mpi-sws.org/~rossberg/sml-vs-ocaml.html#typedecs)未在 SML 中提及此设施。

# oracle-adf - 在 Oracle ADF 中填充瞬态属性的 java 代码

> ID：15584850
> 
> 赞同：0
> 
> 时间：2013-03-23T08:31:27.370
> 
> 标签：oracle-adf

我对 Oracle ADF 很陌生。

我创建了一个视图对象，它有一个瞬态属性。（选择文字并且不提供任何值。）现在我想使用 Java 类中相同视图对象的另一列（那里有一些业务计算）来填充该列。知道哪个班级或我该怎么做吗？

是我必须编写逻辑的 rowImpl 类吗？如果可以，你能举个例子吗？

这是我要创建的示例。在 Hr 模式中，我们有 Department 和 Employees 表，喜欢外键关系。

*部门名称 Noofemployees Percentage*

HR 2 10.52631579 管理员 8 42.10526316 工程师 9 47.36842105 *总计 19 100*

这里百分比是我的瞬态属性。所以值为 2/19*100 或 8/19*100 等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T18:50:58.983

为什么不考虑使用 Groovy 来计算瞬态属性的值，方法是将其设置为“表达式”，然后编写一个 Groovy 表达式来引用同一 VO 中的其他属性。 [使用 Groovy 白皮书](http://www.oracle.com/technetwork/developer-tools/jdev/introduction-to-groovy-128837.pdf) [网络研讨会](http://download.oracle.com/otn_hosted_doc/jdeveloper/11gdemos/ADF_Insider_Groovy/ADF_Insider_Groovy.html) [示例](http://rohanwalia.blogspot.com/2012/11/adf-groovy-for-total-sum-of-column-in.html) [文档](http://docs.oracle.com/cd/E21764_01/web.1111/b31974/bcintro.htm#CEGJJJBA)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T11:54:21.590

**解决方案：**在部门 VO中，使用以下表达式 创建一个临时属性“ **TotalEmployees ”：** **EmployeesView.count("Employee_id")** 这为您提供了每个部门的员工数量。现在在 DepartmentsView.xml 创建一个视图访问器，添加 DepartmentsView。因此，现在您可以使用此访问器访问同一视图的每一行。创建另一个名为“**百分比**”的瞬态属性 在表达式中编写以下代码：

```
if(TotalEmployees == null){
return TotalEmployees}
else {
return TotalEmployees/DepartmentsView.sum("TotalEmployees")*100 
} 
```

**注意：null 条件是为了避免 div by null 值异常。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T09:28:39.600

您可以让 jdev 创建 ViewRowImpl 类，该类将为您提供属性的 getter 和 setter 方法。在获取瞬态属性时，您执行计算并返回结果。

# vb.net - Attribute a code for every color

> ID：15584851
> 
> 赞同：0
> 
> 时间：2013-03-23T08:31:54.130
> 
> 标签：vb.net, graphics, drawing

Is there any way to attribute a code for every color, and be able to read them? Programatically I mean. My target is to convert an image into code, then convert it back to image.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T09:16:53.270

每种颜色实际上是一个 ARGB 颜色代码只需获取整数值

```
Dim myColor As Color = Color.Red
Dim Code As Integer = myColor.ToArgb()

Dim myColorBack As Color = Color.FromArgb(Code) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T09:09:15.643

每种颜色有 4 个字段（对于某些图像，您只有 3 个包含有意义信息的字段）

这些字段包括：

*   Alpha ( `A`)（这表示像素的不透明度）
*   红色 ( `R`)（红色强度）
*   绿色 ( `G`)（绿色强度）
*   蓝色 ( `B`)（蓝色强度）

您要做的是读取它们并通过将这些值相互连接来为每个生成一个代码字符串。

这很可能被认为是伪代码，因为我没有检查它是否编译，但你应该按照这个做一些事情。

```
Dim pixelColor As Color
Dim image As BitMap = New BitMap("your_image.png")

Dim a As String
Dim r As String
Dim b As String
Dim g As String

Dim fileString As New StringBuilder()

fileString.AppendLine(image.Size.Width.ToString())
fileString.AppendLine(image.Size.Height.ToString())

' Loop over all pixels
For y As Integer = 0 To image.Size.Height - 1
    For x As Integer = 0 To image.Size.Width - 1
        pixelColor = image.GetPixel(x, y)

        ' get ARGB values as strings
        a = pixelColor.A.ToString()
        r = pixelColor.R.ToString()
        g = pixelColor.G.ToString()
        b = pixelColor.B.ToString()

        ' Append the colors, one pixel per line
        fileString.AppendLine(a & " " & r & " " & g & " " & b)
    Next
Next

Using file As New StreamWriter("image_data.txt")
    outfile.Write(fileString.ToString())
End Using 
```

同样，这可能无法编译。（我现在没有编译器）

**编辑：** 我意识到宽度和高度也需要存储。

* * *

至于读取文件：

```
Dim file As System.IO.StreamReader
file = File.OpenText("text_file.txt")

Dim width As Integer = Convert.ToInt32(file.ReadLine)
Dim height As Integer = Convert.ToInt32(file.ReadLine)

Dim image As BitMap = New BitMap(width, height)

Dim currentX As Integer = 0
Dim currentY As Integer = 0

Do Until file.EndOfStream
    Dim line As String = file.ReadLine

    Dim valueArray(4) As String = line.Split(" ")

    Dim a As Integer = Convert.ToInt16(valueArray(0))
    Dim r As Integer = Convert.ToInt16(valueArray(1))
    Dim g As Integer = Convert.ToInt16(valueArray(2))
    Dim b As Integer = Convert.ToInt16(valueArray(3))

    image.SetPixel(currentX, currentY, Color.FromArgb(a, r, g, b))

    currentX = currentX + 1

    If currentX == width Then
        currentX = 0
        currentY = currentY + 1

        If currentY == height Then
            Exit Do ' We're done here.
        End If
    End If
Loop

' At this point, you'll have a BitMap with all the pixels set. 
```

再次考虑这个伪代码。

# java - java中的多线程程序

> ID：15584854
> 
> 赞同：3
> 
> 时间：2013-03-23T08:32:45.073
> 
> 标签：java, multithreading

我的代码给了我一个问题。

`IllegalMonitorStateException`我的代码在`setStr`Hoge 类中抛出。

我`Hoge.class`换成`this`in `setStr`。我的代码正确完成！

但是为什么正常结束呢？

```
 public class Sample {
        static Hoge gh = new Hoge();
        static Hoge gh2 = new Hoge();

        public static void main(String[] args) {

            new Thread() {
                private Hoge h2 = gh;
                public void run() {

                    System.out.println("start initialize");
                    h2.setStr("BazzBazz");
                    System.out.println("end   initialize");

                    System.out.println("start thread 1");
                    System.out.println(h2.getStr("thread-1"));
                    System.out.println("end   thread 1");
                }
            }.start();

            new Thread() {
                private Hoge h2 = gh2;

                public void run() {
                    System.out.println("start thread 2");
                    System.out.println(h2.getStr("thread-2"));
                    System.out.println("end   thread 2");
                }
            }.start();
        }
    }

    class Hoge {
        private String fuga = "fugafuga";

        public void setStr(String str) {
            synchronized(Hoge.class) { //<-HERE ! change "Hoge.class" into "this".
                fuga = str;
                try {
                    wait();
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        }

        String getStr(String suffix) {
            synchronized(Hoge.class) {
                return suffix+ fuga;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T08:37:54.750

因为`this`in`gh`和`gh2`不同，`this`是 Hoge 的一个实例。

所以在使用的时候`Hoge.class`，没有一个同步锁，而不是使用`this`哪一个会使用两个不同的锁。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T08:41:52.090

你的`setStr`方法应该是这样的：

```
public void setStr(String str) {
            synchronized(Hoge.class) { //<-HERE ! change "Hoge.class" into "this".
                fuga = str;
                try {
                    Hoge.class.wait();//call wait on Hoge.class 
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        } 
```

您应该使用`Hoge.clas.wait()`而不是`wait()`. 为什么？
因为，正如[关于 wait() 的 oracle 文档](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#wait%28%29)中所指定的：

> **此方法只能由作为该对象监视器所有者的线程调用。**

即一个`thread can't invoke a wait on an object until it owns that object's lock`。否则会抛出[`IllegalMonitorStateException`](http://docs.oracle.com/javase/6/docs/api/java/lang/IllegalMonitorStateException.html). 在这里，您正在获取`Class`名为 as 的 Hoge 对象（即 Hoge.class）的锁定`class level lock`，但正在调用( )`wait`的当前对象。所以它导致. 这就是为什么当您获取当前对象 ( ) 上的锁定时您的代码工作正常的原因，因为在这种情况下，是在当前对象 ( ) 本身上调用的。`Hoge``this``IllegalMonitorStateException``this``wait()``this`

# javascript - 基本故障排除，onclick函数不起作用

> ID：15584858
> 
> 赞同：0
> 
> 时间：2013-03-23T08:33:56.000
> 
> 标签：javascript, function, onclick

```
 <!DOCTYPE html>
            <html>
            <head>
            <title>Practice with condition statements.</title>
            <script LANGUAGE="Javascript" type="text/javascript">
            function myFunction()
            {
            if (document.getElementById(input1).value == John);
                    {
                        alert("This is correct!");
                    }
            else
                    }
                        alert("This is incorrect!");
                    }
            }
            </script>
            </head>

            <body bgcolor="green">
            Answer:<input type="text" name="answer" id="input1">
            <button type="button" onclick="myFunction()">Submit</button>
            </body>
            </html> 
```

我一生都无法弄清楚为什么此功能不会显示警报消息。我已经搞砸了至少一个半小时，这让我头疼。我希望这不是一些让我看不到的简单解决方法。我对此很陌生，所以请对任何批评保持温和。：C

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T08:37:03.747

`input1`不是变量或对象，您必须将其包装在**"** **doublequotes"**或**'singlequotes'**中。采用：

```
document.getElementById("input1").value 
```

代替：

```
document.getElementById(input1).value 
```

# html - 如何使用 div 获取 html 表格？

> ID：15584860
> 
> 赞同：0
> 
> 时间：2013-03-23T08:33:59.963
> 
> 标签：html, css-tables

我知道当我实际上可以轻松地使用表时`table`，用 s 创建 s可能很愚蠢。`div`但是，现在这是必要的，以后可能会在`div`.

现在我希望布局如下所示：

![表布局](../Images/de61ab8fc8295564e017e24076dd6263.png)

1.  这就像 3 x 3 的表格，中间有一些填充
2.  我需要让整个事情绝对居中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T08:36:47.313

使用它的最佳方式[960 Grid](http://960.gs/)，它具有相同的可变 div 宽度和它们之间的边距

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T09:10:04.470

我不知道你的浏览器支持。这将适用于现代浏览器：

[**工作演示**](http://jsfiddle.net/MGcYw/3/)

**html:**

```
<div class="DivTable">
    <div class="Row">
        <div class="Cell"></div>
        <div class="Cell"></div>
        <div class="Cell"></div>
    </div>
    <div class="Row">
        <div class="Cell"></div>
        <div class="Cell"></div>
        <div class="Cell"></div>
    </div>
</div> 
```

**CSS：**

```
.Cell{
    width:100px;
    height:50px;
    border:1px solid blue;
    float:left;
    margin-left:10px;
}

.Cell:first-child{
    margin-left:0px;
}

.Row{
    margin-top:10px;
    overflow:hidden;
}

.Row:first-child{
    margin-top:0px;
}

.DivTable{
    float:left;
    border:1px solid red;
} 
```

# asp.net - IIS Express 在 Visual Studio 2012 中不起作用

> ID：15584862
> 
> 赞同：8
> 
> 时间：2013-03-23T08:34:48.907
> 
> 标签：asp.net, visual-studio-2012, iis-express, iis-8

我无法使用 IIS Express 运行 Visual Studio 应用程序。我第一次收到错误“无法启动 IIS Express”。经过多次调试，我收到以下错误，![在此处输入图像描述](../Images/9336787b37367697cd16b606310ef31e.png)

如果我通过命令提示符手动运行 IIs express，我会收到以下错误， ![在此处输入图像描述](../Images/56c9ea0512923fb0398201ff9606d282.png)

我已经重新安装了 IIS Express，但没有任何变化。我还修改了 IIs express 的应用程序主机配置文件，删除了应用程序的所有站点名称，但没有任何变化。

我无法知道这个问题。因此，请提出解决此问题的任何解决方案。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-26T18:20:52.787

我遇到了同样的问题，该问题与您可以在 \users{您的用户名}\mydocuments\IISexpress\config\applicationhost.config 中找到的应用程序池定义有关。

找到标签

```
<add name="Clr4IntegratedAppPool" managedRuntimeVersion="v4.0" managedPipelineMode="Integrated" CLRConfigFile="%IIS_USER_HOME%\config\aspnet.config" autoStart="true" /> 
```

并将 .net 4.5 的 managedruntimeversion 从“v4.0”更改为“v4.0.30319”

```
<add name="Clr4IntegratedAppPool" managedRuntimeVersion="v4.0.30319" managedPipelineMode="Integrated" CLRConfigFile="%IIS_USER_HOME%\config\aspnet.config" autoStart="true" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T08:48:16.990

以下建议可能对您有帮助>>

使用进程监视器观察 iis-express 进程，以查看尝试启动时是否存在任何权限问题。

为此，请点击此链接>>

[http://msdn.microsoft.com/en-us/library/bb399001%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/bb399001%28v=vs.100%29.aspx)

如果问题与安全相关，则以管理员模式运行 Visual Studio

作为最后的手段，您可以通过修改位于`%userprofile%\documents\IISexpress\config`目录中的 applicationhost.config 来禁用日志记录模块。

为此，您需要注释掉文件中的一些行。

在`<system.webServer>/<globalModules>`元素下，注释掉该行

```
<add name="HttpLoggingModule" image="%IIS_BIN%\loghttp.dll" /> 
```

在`<location>/<system.webServer>/<modules>`元素下，注释该行

```
<add name="HttpLoggingModule" lockItem="true" /> 
```

保存更改后，尝试重新启动 iis express。

# html - 在服务器端包含文件中包含 DIV 元素

> ID：15584863
> 
> 赞同：0
> 
> 时间：2013-03-23T08:34:50.617
> 
> 标签：html, include, ssi

在 SSI 文件中包含 DIV 容器元素是一种好习惯，还是应该只将标签放在 DIV 容器中。例如，在下面的代码中，我有一个出现在所有页面下的页脚。我应该只将`<p>`and`<a>`元素放在 SSI 文件或`<div>`元素中吗？

```
<div id="footer">
 <div class="container">
  <div class="wrapper">
   <div id="footer_content">
     <p>Copyright 2010 New Life e. V.<br />
         <a href="en/contact.htm">Contact</a> |
         <a href="en/map.htm">Find Us</a>   |
         <a href="en/impressum.htm">Impressum</a></p>
   </div>
  </div>
 </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T08:36:48.537

将整个页脚 DIV 放在包含文件中会更好。否则，不需要页脚的页面也必须携带不必要的外部 DIV。

# image-segmentation - 用于图像分割测试的免费卫星图像

> ID：15584872
> 
> 赞同：0
> 
> 时间：2013-03-23T08:36:27.537
> 
> 标签：image-segmentation, satellite-image

我需要一些免费的卫星图像（全色）来测试一些分割算法。

我在网上搜索过，但没有找到我们网站提供免费卫星图像的任何资源。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T12:46:03.950

# 卫星颗粒通用搜索引擎

[您可以从Earthexplorer](http://earthexplorer.usgs.gov/)或[Glovis](http://glovis.usgs.gov/)服务搜索和下载 Landsat 图像。你会在那里找到几个收藏品。

# 陆地卫星全色

Landsat ETM+ 在波段 8 提供分辨率为 15m 的全色图像。[这里](http://glovis.usgs.gov/ImgViewer/showmetadata.cgi?scene_id=LE70290302013073EDC00)有一个例子，来自 WRS-2 Path 29 row 30。

# LDCM任务

请注意，Landsat [LDCM 任务](http://www.nasa.gov/mission_pages/landsat/main/index.html)场景将于 5 月底在同一网站上提供。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T08:45:21.470

您可以填写此表格并从 Geoeye of IKONOS imagery 索取免费样品。

[http://www.geoeye.com/corpsite/solutions/learn-more/sample-imagery.aspx](http://www.geoeye.com/corpsite/solutions/learn-more/sample-imagery.aspx)

或者 GLCF 有 4 个可以使用的 IKONOS 图像样本。你可以从这里下载它们：http: [//glcf.umd.edu/data/ikonos/](http://glcf.umd.edu/data/ikonos/)

注：IKONOS 2 有 4 个 4m 分辨率的多光谱波段和 1 个 1m 分辨率的全色波段。如果这是您的要求，您可以只使用全色波段。

# android - 动态对齐视图查看？

> ID：15584873
> 
> 赞同：0
> 
> 时间：2013-03-23T08:36:35.293
> 
> 标签：android, layout, view, alignment

动态添加视图时，我想做类似 XML attr 的操作：

```
android:layout_alignRight="@+id/myView1"> 
```

我的活动代码：

```
button1.setOnClickListener(new View.OnClickListener(){
            @Override public void onClick(View v) {
            RelativeLayout ll = (RelativeLayout)findViewById(R.id.aincrad);

            TextView view = new TextView(Activity.this); 
            RelativeLayout.LayoutParams layoutParams = new RelativeLayout.LayoutParams
                         (RelativeLayout.LayoutParams.WRAP_CONTENT,RelativeLayout.LayoutParams.WRAP_CONTENT);

            layoutParams.addRule(RelativeLayout.ALIGN_RIGHT,R.id.Btn1Holder);  

            view.setText("testing...");

            view.setLayoutParams(layoutParams);
            ll.addView(view, layoutParams);
}}); 
```

结果应该对齐新的文本视图保持在 Btn1Holder 的右侧

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T08:43:50.220

我不确定这是正确的方法，但我想您必须先调用`setLayoutParams`，然后才能将视图添加到布局中。

另一方面，如果您想确保视图就在那里，您可以将其添加到您的 xml 并设置从代码中触发其可见性。

更新： AlignRight “使该视图的右边缘与给定锚视图 ID 的右边缘匹配。” 这意味着如果您的布局位于目标下方并且您想要对齐它们的边缘，则它可以工作。您需要使用 RIGHT_OF 哪个“将孩子的左边缘与另一个孩子的右边缘对齐的规则。”

# xml - 如何重现这些代码的最终结果？

> ID：15584876
> 
> 赞同：0
> 
> 时间：2013-03-23T08:36:54.723
> 
> 标签：xml

如果标题太笼统，我很抱歉；反正

这是**XML 文件**的一部分：

```
&lt;/dl&gt;&lt;dl&gt;&lt;b&gt;elo·quent&lt;/b&gt; &lt;!--id=000014151--&gt;&lt;i&gt;BrE&lt;/i&gt; &lt;font color=darkgray&gt; &lt;/font&gt;&lt;font color=darkcyan&gt;[ˈeləkwənt]&lt;/font&gt; &lt;i&gt;&amp;nbsp;&lt;/i&gt;&lt;OBJECT CLASSID=&quot;CLSID:6BF52A52-394A-11d3-B153-00C04F79FAA6&quot; type=&quot;application/x-oleobject&quot; width=16 height=12 volume=100&gt;&lt;PARAM NAME=&quot;EnableContextMenu&quot; VALUE=&quot;False&quot;&gt;&lt;PARAM NAME=&quot;AutoStart&quot; VALUE=&quot;False&quot;&gt;&lt;PARAM NAME=&quot;URL&quot; VALUE=&quot;D:\Dictionaries\En-En-OALD8.dsl.files\z_eloquent__gb_1.wav&quot;&gt;&lt;/OBJECT&gt;&lt;i&gt;&amp;nbsp;&lt;/i&gt;
     &lt;i&gt;NAmE&lt;/i&gt; &lt;font color=darkgray&gt; &lt;/font&gt;&lt;font color=darkcyan&gt;[ˈeləkwənt]&lt;/font&gt; &lt;i&gt;&amp;nbsp;&lt;/i&gt;&lt;OBJECT CLASSID=&quot;CLSID:6BF52A52-394A-11d3-B153-00C04F79FAA6&quot; type=&quot;application/x-oleobject&quot; width=16 height=12 volume=100&gt;&lt;PARAM NAME=&quot;EnableContextMenu&quot; VALUE=&quot;False&quot;&gt;&lt;PARAM NAME=&quot;AutoStart&quot; VALUE=&quot;False&quot;&gt;&lt;PARAM NAME=&quot;URL&quot; VALUE=&quot;D:\Dictionaries\En-En-OALD8.dsl.files\z_eloquent__us_1.wav&quot;&gt;&lt;/OBJECT&gt;&lt;i&gt;&amp;nbsp;&lt;/i&gt;
     &lt;font color=orange&gt; adjective&lt;/font&gt;&lt;br&gt;
&lt;/dt&gt;&lt;dt&gt;&lt;font color=darkmagenta&gt;&lt;b&gt;1.&lt;/b&gt;&lt;/font&gt; &lt;!--d--&gt;able to use language and express your opinions well, especially when you are speaking in public&lt;!--/d--&gt;&lt;br&gt;
&lt;dd&gt;&lt;font color=forestgreen&gt;• &lt;/font&gt;&lt;font color=forestgreen&gt;&lt;!--x--&gt;an &lt;!--/x--&gt; &lt;/font&gt;&lt;b&gt;&lt;font color=darkslategray&gt;&lt;!--cl--&gt;eloquent speech/speaker&lt;!--/cl--&gt; &lt;/font&gt;&lt;/b&gt;&lt;br&gt;
&lt;/dt&gt;&lt;dt&gt;&lt;font color=darkmagenta&gt;&lt;b&gt;2.&lt;/b&gt;&lt;/font&gt; &lt;font color=darkgray&gt;(&lt;/font&gt;&lt;font color=darkslategray&gt;&lt;i&gt;&lt;!--dc--&gt;of a look or movement&lt;!--/dc--&gt;&lt;/i&gt;&lt;/font&gt;&lt;font color=darkgray&gt;) &lt;/font&gt;&lt;!--d--&gt;able to express a feeling&lt;!--/d--&gt;&lt;br&gt;
&lt;dd&gt;&lt;font color=forestgreen&gt;• &lt;/font&gt;&lt;font color=forestgreen&gt;&lt;!--x--&gt;His eyes were eloquent.&lt;!--/x--&gt; &lt;/font&gt;&lt;font color=darkgray&gt; &lt;/font&gt;&lt;br&gt;
    &lt;!--Derived Word--&gt;&lt;dd&gt;&lt;font color=darkslategray&gt;&lt;u&gt;Derived Words:&lt;/u&gt;&lt;/font&gt; &lt;font color=gray size=0.1&gt;↑ &lt;/font&gt;&lt;font color=blue&gt;eloquence&lt;/font&gt; &lt;font color=darkslategray&gt;&lt;b&gt;▪&amp;lt;/b&gt;&lt;/font&gt; &lt;font color=gray size=0.1&gt;↑ &lt;/font&gt;&lt;font color=blue&gt;eloquently&lt;/font&gt;&lt;!--/Derived Word--&gt; &lt;dd&gt; &lt;br&gt;
    &lt;!--Word Origin--&gt;&lt;dd&gt;&lt;font color=darkslategray&gt;&lt;u&gt;Word Origin:&lt;/u&gt;&lt;/font&gt;&lt;br&gt;
&lt;dd&gt; &lt;font color=rosybrown&gt;[&lt;/font&gt;&lt;font color=darkslategray&gt;&lt;b&gt;eloquence&lt;/b&gt;&lt;/font&gt; &lt;font color=darkslategray&gt;&lt;b&gt;eloquent&lt;/b&gt;&lt;/font&gt; &lt;font color=darkslategray&gt;&lt;b&gt;eloquently&lt;/b&gt;&lt;/font&gt;&lt;font color=rosybrown&gt;]&lt;/font&gt; &lt;font color=darkgray&gt; &lt;/font&gt;&lt;font color=darkslategray&gt;&lt;!--lang--&gt;late Middle English&lt;!--/lang--&gt;&lt;/font&gt;&lt;font color=dimgray&gt;&lt;!--etymology--&gt;: via &lt;!--/etymology--&gt; &lt;/font&gt;&lt;font color=darkslategray&gt;&lt;!--lang--&gt;Old French&lt;!--/lang--&gt; &lt;/font&gt;&lt;font color=dimgray&gt;&lt;!--etymology--&gt; from &lt;!--/etymology--&gt; &lt;/font&gt;&lt;font color=darkslategray&gt;&lt;!--lang--&gt;Latin&lt;!--/lang--&gt; &lt;/font&gt;&lt;font color=darkgray&gt; &lt;/font&gt;&lt;font color=darkcyan&gt;&lt;!--ff--&gt;eloquent-&lt;!--/ff--&gt; &lt;/font&gt;&lt;font color=darkgray&gt; &lt;/font&gt;&lt;font color=darkslateblue&gt;&lt;b&gt;&lt;!--etym_tr--&gt;‘speaking out’&amp;lt;!--/etym_tr--&gt;&lt;/b&gt;&lt;/font&gt;&lt;font color=dimgray&gt;&lt;!--etymology--&gt;, from the verb &lt;!--/etymology--&gt; &lt;/font&gt;&lt;font color=darkcyan&gt;&lt;!--ff--&gt;eloqui&lt;!--/ff--&gt; &lt;/font&gt;&lt;font color=darkgray&gt; &lt;/font&gt;&lt;font color=darkslateblue&gt;&lt;b&gt;&lt;!--etym_tr--&gt;‘speak out’&amp;lt;!--/etym_tr--&gt;&lt;/b&gt;&lt;/font&gt;&lt;font color=dimgray&gt;&lt;!--etymology--&gt;, from &lt;!--/etymology--&gt; &lt;/font&gt;&lt;font color=darkcyan&gt;&lt;!--ff--&gt;e-&lt;!--/ff--&gt; &lt;/font&gt;&lt;font color=dimgray&gt;&lt;!--etymology--&gt; (variant of &lt;!--/etymology--&gt; &lt;/font&gt;&lt;font color=darkcyan&gt;&lt;!--ff--&gt;ex-&lt;!--/ff--&gt;&lt;/font&gt;&lt;font color=dimgray&gt;&lt;!--etymology--&gt;) &lt;!--/etymology--&gt; &lt;/font&gt;&lt;font color=darkslateblue&gt;&lt;b&gt;&lt;!--etym_tr--&gt;‘out’&amp;lt;!--/etym_tr--&gt; &lt;/b&gt;&lt;/font&gt;&lt;font color=dimgray&gt;&lt;!--etymology--&gt; + &lt;!--/etymology--&gt; &lt;/font&gt;&lt;font color=darkcyan&gt;&lt;!--ff--&gt;loqui&lt;!--/ff--&gt; &lt;/font&gt;&lt;font color=darkgray&gt; &lt;/font&gt;&lt;font color=darkslateblue&gt;&lt;b&gt;&lt;!--etym_tr--&gt;‘speak’&amp;lt;!--/etym_tr--&gt;&lt;/b&gt;&lt;/font&gt;&lt;font color=dimgray&gt;&lt;!--etymology--&gt;.&lt;!--/etymology--&gt; &lt;/font&gt; &lt;dd&gt; &lt;br&gt;
    &lt;!--Example Bank--&gt;&lt;dd&gt;&lt;font color=darkslategray&gt;&lt;u&gt;Example Bank:&lt;/u&gt;&lt;/font&gt;&lt;br&gt;
&lt;dd&gt;&lt;font color=forestgreen&gt;• &lt;/font&gt;&lt;font color=forestgreen&gt;&lt;!--x--&gt;He grew very eloquent on the subject.&lt;!--/x--&gt; &lt;/font&gt;&lt;br&gt;
&lt;dd&gt;&lt;font color=forestgreen&gt;• &lt;/font&gt;&lt;font color=darkgray&gt; &lt;/font&gt;&lt;font color=forestgreen&gt;&lt;!--x--&gt;He waxed eloquent about her talents as an actress.&lt;!--/x--&gt; &lt;/font&gt;&lt;br&gt;
&lt;dd&gt;&lt;font color=forestgreen&gt;• &lt;/font&gt;&lt;font color=darkgray&gt; &lt;/font&gt;&lt;font color=forestgreen&gt;&lt;!--x--&gt;a very eloquent speaker&lt;!--/x--&gt; &lt;/font&gt;&lt;br&gt;
&lt;dd&gt;&lt;font color=forestgreen&gt;• &lt;/font&gt;&lt;font color=darkgray&gt; &lt;/font&gt;&lt;font color=forestgreen&gt;&lt;!--x--&gt;It was an eloquent and well-informed speech.&lt;!--/x--&gt; &lt;/font&gt;&lt;br&gt;
&lt;dd&gt;&lt;font color=forestgreen&gt;• &lt;/font&gt;&lt;font color=darkgray&gt; &lt;/font&gt;&lt;font color=forestgreen&gt;&lt;!--x--&gt;She was an eloquent speaker, with a beautiful voice.&lt;!--/x--&gt; &lt;/font&gt; 
```

这段代码的结果是这样的：（在巴比伦（单词翻译器））： ![在此处输入图像描述](../Images/34d32738f054c57ba3509224714ded19.png) **我的问题是：我怎样才能重现代码的最终外观（如图所示）？**我的意思是它可能是一个 html 代码，如果我在浏览器中打开它，我会重现最终结果（我没有成功）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T08:41:11.183

```
</dl><dl><b>elo·quent</b> <!--id=000014151--><i>BrE</i> <font color=darkgray> </font><font color=darkcyan>[ˈeləkwənt]</font> <i>&amp;nbsp;</i><OBJECT CLASSID="CLSID:6BF52A52-394A-11d3-B153-00C04F79FAA6" type="application/x-oleobject" width=16 height=12 volume=100><PARAM NAME="EnableContextMenu" VALUE="False"><PARAM NAME="AutoStart" VALUE="False"><PARAM NAME="URL" VALUE="D:\Dictionaries\En-En-OALD8.dsl.files\z_eloquent__gb_1.wav"></OBJECT><i>&amp;nbsp;</i>
     <i>NAmE</i> <font color=darkgray> </font><font color=darkcyan>[ˈeləkwənt]</font> <i>&amp;nbsp;</i><OBJECT CLASSID="CLSID:6BF52A52-394A-11d3-B153-00C04F79FAA6" type="application/x-oleobject" width=16 height=12 volume=100><PARAM NAME="EnableContextMenu" VALUE="False"><PARAM NAME="AutoStart" VALUE="False"><PARAM NAME="URL" VALUE="D:\Dictionaries\En-En-OALD8.dsl.files\z_eloquent__us_1.wav"></OBJECT><i>&amp;nbsp;</i>
     <font color=orange> adjective</font><br>
</dt><dt><font color=darkmagenta><b>1.</b></font> <!--d-->able to use language and express your opinions well, especially when you are speaking in public<!--/d--><br>
<dd><font color=forestgreen>• </font><font color=forestgreen><!--x-->an <!--/x--> </font><b><font color=darkslategray><!--cl-->eloquent speech/speaker<!--/cl--> </font></b><br>
</dt><dt><font color=darkmagenta><b>2.</b></font> <font color=darkgray>(</font><font color=darkslategray><i><!--dc-->of a look or movement<!--/dc--></i></font><font color=darkgray>) </font><!--d-->able to express a feeling<!--/d--><br>
<dd><font color=forestgreen>• </font><font color=forestgreen><!--x-->His eyes were eloquent.<!--/x--> </font><font color=darkgray> </font><br>
    <!--Derived Word--><dd><font color=darkslategray><u>Derived Words:</u></font> <font color=gray size=0.1>↑ </font><font color=blue>eloquence</font> <font color=darkslategray><b>▪&lt;/b></font> <font color=gray size=0.1>↑ </font><font color=blue>eloquently</font><!--/Derived Word--> <dd> <br>
    <!--Word Origin--><dd><font color=darkslategray><u>Word Origin:</u></font><br>
<dd> <font color=rosybrown>[</font><font color=darkslategray><b>eloquence</b></font> <font color=darkslategray><b>eloquent</b></font> <font color=darkslategray><b>eloquently</b></font><font color=rosybrown>]</font> <font color=darkgray> </font><font color=darkslategray><!--lang-->late Middle English<!--/lang--></font><font color=dimgray><!--etymology-->: via <!--/etymology--> </font><font color=darkslategray><!--lang-->Old French<!--/lang--> </font><font color=dimgray><!--etymology--> from <!--/etymology--> </font><font color=darkslategray><!--lang-->Latin<!--/lang--> </font><font color=darkgray> </font><font color=darkcyan><!--ff-->eloquent-<!--/ff--> </font><font color=darkgray> </font><font color=darkslateblue><b><!--etym_tr-->‘speaking out’&lt;!--/etym_tr--></b></font><font color=dimgray><!--etymology-->, from the verb <!--/etymology--> </font><font color=darkcyan><!--ff-->eloqui<!--/ff--> </font><font color=darkgray> </font><font color=darkslateblue><b><!--etym_tr-->‘speak out’&lt;!--/etym_tr--></b></font><font color=dimgray><!--etymology-->, from <!--/etymology--> </font><font color=darkcyan><!--ff-->e-<!--/ff--> </font><font color=dimgray><!--etymology--> (variant of <!--/etymology--> </font><font color=darkcyan><!--ff-->ex-<!--/ff--></font><font color=dimgray><!--etymology-->) <!--/etymology--> </font><font color=darkslateblue><b><!--etym_tr-->‘out’&lt;!--/etym_tr--> </b></font><font color=dimgray><!--etymology--> + <!--/etymology--> </font><font color=darkcyan><!--ff-->loqui<!--/ff--> </font><font color=darkgray> </font><font color=darkslateblue><b><!--etym_tr-->‘speak’&lt;!--/etym_tr--></b></font><font color=dimgray><!--etymology-->.<!--/etymology--> </font> <dd> <br>
    <!--Example Bank--><dd><font color=darkslategray><u>Example Bank:</u></font><br>
<dd><font color=forestgreen>• </font><font color=forestgreen><!--x-->He grew very eloquent on the subject.<!--/x--> </font><br>
<dd><font color=forestgreen>• </font><font color=darkgray> </font><font color=forestgreen><!--x-->He waxed eloquent about her talents as an actress.<!--/x--> </font><br>
<dd><font color=forestgreen>• </font><font color=darkgray> </font><font color=forestgreen><!--x-->a very eloquent speaker<!--/x--> </font><br>
<dd><font color=forestgreen>• </font><font color=darkgray> </font><font color=forestgreen><!--x-->It was an eloquent and well-informed speech.<!--/x--> </font><br>
<dd><font color=forestgreen>• </font><font color=darkgray> </font><font color=forestgreen><!--x-->She was an eloquent speaker, with a beautiful voice.<!--/x--> </font> 
```

也可以看看：

[http://www.htmlhelp.com/reference/html40/entities/special.html](http://www.htmlhelp.com/reference/html40/entities/special.html) [http://www.w3schools.com/html/html_entities.asp](http://www.w3schools.com/html/html_entities.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T08:42:19.923

代码是用 HTML 实体编码的 HTML。您必须解码所有实体。然后代码可以在浏览器中显示为 HTML。

# android - 当我们的手指离开屏幕时，触摸与点击相同

> ID：15584881
> 
> 赞同：0
> 
> 时间：2013-03-23T08:37:33.640
> 
> 标签：android

我有一些超出屏幕长度的文本。我还在同一个 Activity 中添加了 Action_bar。

我想要什么：无论何时我`Use_click_event`在`Action_bar_item`，我的`Action_bar_hides`所以现在我`only_text`在我的`View`，如果你再次点击屏幕，你会`get_back Action_bar`在一个`View`。

发生了什么：`after_hiding Action_bar`，当我滚动时：文本正在滚动，但就在`leaving the screen`（手指离开屏幕）`Action_bar`发生之后

基本上我想 get_back `Action_bar` `when ever i am clicking` `not when i am leaving the touch_mode`。

我的代码是：

```
public void onResume ( )
{
    super.onResume();

    View view = findViewById(R.id.layout) ;

    view.setOnClickListener(new View.OnClickListener() 
    {
        public void onClick(View v) 
        {
            if ( !getActionBar().isShowing() )
            {
                getActionBar().show();
            }
        }
    });
} 
```

# db4o - Java：是否可以在不同的运行时（不同的 JVM）创建具有相同标识的两个对象？

> ID：15584883
> 
> 赞同：0
> 
> 时间：2013-03-23T08:37:46.227
> 
> 标签：db4o, serializable, object-oriented-database

我正在使用 DB4o，并希望确保在使用如下代码时得到一个唯一的对象：

```
 public List<Object> getListOfObjects(final Object o){

        List<Object> result = db.query(new Predicate<Object>(){

          @Override
          public boolean match (Object arg0){

             if(arg0.equals(o)){
                return true;
              }
            else{
                return false;
             }
        });

        return result;
      } 
```

List 对象“结果”最好不超过 1 个元素。但是，Java 不可能在不同的运行时（不同的 JVM）创建具有相同身份的对象吗？如果这可能发生，那么它会弄乱我的数据库。

**对于 Java 对象是否可以在 JVM 中具有相同的身份，肯定有一个答案。**

-亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T01:03:56.240

If you overwrite the .equals() method of your object, then its easy to have multiple instances of a object which is equals. The whole purpose of the equal() method is to compare two objects about the 'semantic/content" equality. It does not quarantine any uniqueness.

Now if you do not override any equal method, then the object identity is compared. (like using the == operator). The identity is unique in a JVM and there are never two objects with the same identity.

Btw/Offtopic: If you store thousands of object in db4o and use your query, it will be quite slow. More about that [here](http://community.versant.com/documentation/reference/db4o-8.1/java/reference/Content/basics/querying/native_queries/nq_performance_characteristics.htm).

# python - Python数学问题

> ID：15584884
> 
> 赞同：0
> 
> 时间：2013-03-23T08:37:47.010
> 
> 标签：python

我在 python 方面是平均水平，甚至在数学方面也不是。

方程 y = 122.32e-0.31x 可用于计算您的网页加载速度比其他网页快多少。因此，在 5 秒内加载的网站比 25% 的网站要快。

Y 是更快的百分比，x 是以秒为单位的页面加载。

该数据在这里找到 - [http://www.seomoz.org/blog/site-speed-are-you-fast-does-it-matter](http://www.seomoz.org/blog/site-speed-are-you-fast-does-it-matter)

要将其转换为 python，我尝试了以下操作：

```
import math
# y = 122.32e-0.31x
y = (122.32*math.e)**(-0.31 * page_load_time) 
```

好像不太对。任何人都可以更正代码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T08:39:49.033

```
import math
y = 122.32*math.exp(-0.31*page_load_time) 
```

应该做你想做的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T08:41:20.150

方程是`y = 122.32e`^(`-0.31x`)

在python中，它将是：

```
y = 122.32*math.e**(-0.31*x) 
```

* * *

我做了一些时间测量：

```
>>> t = timeit.Timer('for i in l : e**i', setup = 'from math import e; l = range(10,50)')
>>> t.timeit()
23.76981210708618
>>> t2 = timeit.Timer('for i in l : exp(i)', setup = 'from math import exp; l = range(10,50)')
>>> t2.timeit()
13.754070043563843
>>> t.timeit()
23.382396936416626
>>> t2.timeit()
13.842521905899048 
```

看来这两种方法的实现是不同的`math.exp`，正如@MrDave 所提到的，它比`math.e`

# machine-learning - 是否有与 MNIST 类似的数据集？

> ID：15584888
> 
> 赞同：9
> 
> 时间：2013-03-23T08:38:25.623
> 
> 标签：machine-learning, mnist

我正在研究机器学习。现在我想用一些著名的数据集来测试我的算法。由于我是这方面的新手，除了MNIST，我找不到其他合适的数据集。我觉得 MNIST 非常适合我们的研究。有谁知道一些与 MNIST 类似的数据集？

PS 我知道另一个经常使用的手写数字数据集，称为 USPS 数据集。但是我需要一个包含更多训练示例的数据集（通常超过 10000 个并且与 MNIST 中的训练示例数量相当），因此 USPS 不在我的选择范围内。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T08:45:18.327

机器学习档案 ( [http://archive.ics.uci.edu/ml/](http://archive.ics.uci.edu/ml/) ) 包含相当多的数据集，包括适合分类的数据集，例如 MINIST，例如 ( [http://archive.ics.uci.edu/ml ) /数据集/皮肤+分割](http://archive.ics.uci.edu/ml/datasets/Skin+Segmentation)）。

如果不知道你想用你的算法演示什么，我不能说它们中的哪一个是合适的，但是 UCI 档案中的任何东西都是众所周知的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-03-24T04:40:51.503

你可以试试[Fashion MNIST](https://github.com/zalandoresearch/fashion-mnist)或[Kuzushiji MNIST](https://github.com/rois-codh/kmnist)，它们的属性与 MNIST 非常相似，但更难预测。来自时尚 MNIST 的页面：

> 说真的，我们正在谈论替换 MNIST。这里有一些很好的理由：
> 
> *   MNIST 太容易了。卷积网络在 MNIST 上可以达到 99.7%。经典的机器学习算法也可以轻松达到 97%。查看我们的 Fashion-MNIST 与 MNIST 的并排基准，并阅读“大多数 MNIST 数字对可以通过一个像素很好地区分。”
> *   MNIST 被过度使用。在 2017 年 4 月的 Twitter 帖子中，Google Brain 研究科学家和深度学习专家 Ian Goodfellow 呼吁人们远离 MNIST。
> *   正如深度学习专家/Keras 作者 François Chollet 在 2017 年 4 月的 Twitter 线程中所指出的，MNIST 不能代表现代 CV 任务。

# javascript - 使用 drawImage / putImageData 的画布意外结果/行为

> ID：15584897
> 
> 赞同：3
> 
> 时间：2013-03-23T08:40:02.520
> 
> 标签：javascript, canvas

尝试绘制画布并稍后将其重新绘制到同一画布上会产生意想不到的行为。例如，请参阅**[Jsfiddle](http://jsfiddle.net/CdWn6/8/)**。

逻辑相当简单：

*   给定画布上的图像，并平移到中心（我使用矩形来演示）。
*   剪掉图像的一部分。我只是在示例中复制整个“图像”。
*   可能会进行操纵。
*   清除后粘贴回同一画布。要点是将原始图像的一部分剪辑到具有宽度/高度的给定点，然后稍后将其粘贴并进行修改。

* * *

```
var c=document.getElementById("cvs1"),
    ctx = c.getContext("2d"),
    bufferCvs = document.createElement('canvas'),
    bufferCtx = bufferCvs.getContext('2d');

bufferCvs.width = c.width;
bufferCvs.height = c.height;

ctx.translate( c.width/2, c.height/2 );
ctx.fillStyle="#FF0000";
ctx.fillRect( -75, -50 ,150,100);

//Image data experiment
//Set the buffer width / height same size as rectangle
bufferCvs.width = 150;
bufferCvs.height = 100;
//Draw the "image" from the first context to the buffer by clipping the first, and pasting to 0,0 width the same "image" dimensions.
bufferCtx.drawImage( c, -75, -50, 150, 100, 0, 0, 150, 100 );
//clear out old canvas drawing
ctx.save()
ctx.setTransform(1,0,0,1,0,0,1,0,0);
ctx.clearRect(0, 0, c.width, c.height);
ctx.restore();

ctx.drawImage( bufferCvs, -75, -50, 150, 100 ); 
```

由于我保持完全相同的坐标/尺寸，因此预期的输出将是最初在画布上的内容。但是，仅绘制了左上角的一部分（参见小提琴）。**[出于效率原因](http://jsperf.com/buffering)**，我使用 drawImage ，但我使用 get/putImageData 的结果相同。宽度和高度都被定义为修复**[其他奇怪的行为](https://stackoverflow.com/questions/3185631/strange-html5-canvas-drawimage-behaviour)。**

您将如何确保绘制存储在缓冲区画布中的所有内容，而不仅仅是顶角？

编辑：为了帮助解决我的问题以及我认为正在发生的行为，我将发布一些屏幕。

步骤 1：将上下文 1 平移到中心，并绘制一个矩形来表示图像。

```
ctx.translate( c.width/2, c.height/2 );
ctx.fillStyle="#FF0000";
ctx.fillRect( -75, -50 ,150,100); 
```

![翻译/添加矩形](../Images/26277e84ad2e7840404133d7f0adc8e6.png)

第 2 步：使用 drawImage 从 -75、-50 点“剪裁”并使用宽度 150、100 仅剪切矩形。这应该绘制到画布缓冲区上，但不是

```
bufferCvs.width = 150;
bufferCvs.height = 100;
//Draw the "image" from the first context to the buffer by clipping the first at -75, -50 (the start of the image), and pasting to 0,0 width the same "image" dimensions.
bufferCtx.drawImage( c, -75, -50, 150, 100, 0, 0, 150, 100 ); 
```

我希望缓冲区画布看起来像这样（不是）：

![预期的缓冲画布](../Images/dde4c208df51992e93e22014a05af095.png)

但是，如果我将 drawImage 更改为

```
bufferCtx.drawImage( c, 0, 0, 150, 100, 0, 0, 150, 100 ); 
```

我在缓冲区上获得了预期数量的空白（最后一个 drawImage 回到上下文没有问题）

第 3 步：从第一个上下文中清除旧的“图像”。这不应该改变翻译，因为我在执行清除后恢复了上下文状态。（这按预期工作）

```
ctx.save()
ctx.setTransform(1,0,0,1,0,0,1,0,0);
ctx.clearRect(0, 0, c.width, c.height);
ctx.restore(); 
```

第 4 步：只需将缓冲区画布中的内容绘制到它开始返回的原始上下文中：

![翻译/添加矩形](../Images/26277e84ad2e7840404133d7f0adc8e6.png)

这个想法是更多地“剪切”原始区域，清除旧图像，并将新剪切的区域粘贴回原始上下文中。我查看了**[MDN 的示例](https://developer.mozilla.org/en-US/docs/HTML/Canvas/Tutorial/Using_images)**，但 drawImage 的剪辑部分没有按我预期的那样执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T09:12:02.017

主要问题是在 上绘制的第一个画布`bufferCvs`没有绘制在您期望的位置。证明这一点的最简单方法是添加`bufferCvs`到 DOM 树：http: [//jsfiddle.net/CdWn6/4/](http://jsfiddle.net/CdWn6/4/)

我想这就是你要找的东西：http: [//jsfiddle.net/CdWn6/6/](http://jsfiddle.net/CdWn6/6/)

```
var c=document.getElementById("cvs1"),
    c2 = document.getElementById("cvs2"),
    bufferCvs = document.createElement('canvas'),
    bufferCtx = bufferCvs.getContext('2d'),
    ctx = c.getContext("2d"),
    ctx2 = c2.getContext("2d");

bufferCvs.width = c.width;
bufferCvs.height = c.height;

ctx.translate( c.width/2, c.height/2 );
ctx.fillStyle="#FF0000";
ctx2.translate( c.width/2, c.height/2 );
ctx2.fillStyle="#FF0000";

bufferCtx.translate( c.width/2, c.height/2 );

ctx.fillRect( -75, -50 ,150,100);
ctx2.fillRect( -75, -50 ,150,100);

//Image data experiment
bufferCtx.drawImage( c, -135, -110, 270, 220);

ctx.save()
ctx.setTransform(1,0,0,1,0,0,1,0,0);
ctx.clearRect(0, 0, c.width, c.height);
ctx.restore();

//Draw background to demonstrate coordinates still work
ctx.fillStyle="#00FF00";
//ctx.fillRect( -75, -50 ,150,100);

ctx.drawImage( bufferCvs, -75, -50, 150, 100 ); 
```

# sql - 在 SQL Server 2008 中将默认值插入到 MANY-TO-MANY 关系的脚本

> ID：15584900
> 
> 赞同：1
> 
> 时间：2013-03-23T08:40:33.113
> 
> 标签：sql, sql-server, sql-server-2008, join, sql-insert

我正在使用`SQL Server 2008`. 考虑下表：

表**学生**

```
╔════╦═══════════╦══════════╗
║ ID ║ FIRSTNAME ║ LASTNAME ║
╠════╬═══════════╬══════════╣
║  1 ║ joe       ║ Smith    ║
║  2 ║ frank     ║ Smith    ║
║  3 ║ Scott     ║ Smith    ║
╚════╩═══════════╩══════════╝ 
```

表**课程**

```
╔════╦═════════╦════════════════╗
║ ID ║  NAME   ║  DESCRIPTION   ║
╠════╬═════════╬════════════════╣
║  1 ║ Physics ║ PHYSICS COURSE ║
║  2 ║ MATH    ║ COURSE         ║
╚════╩═════════╩════════════════╝ 
```

表**STUDENT_COURSE**

```
╔════════════╦═══════════╦═══════╗
║ STUDENT_ID ║ COURSE_ID ║ GRADE ║
╠════════════╬═══════════╬═══════╣
║          1 ║         1 ║     9 ║
║          2 ║         1 ║     8 ║
║          3 ║         1 ║     6 ║
╚════════════╩═══════════╩═══════╝ 
```

我需要为 MATH 课程的所有用户插入默认等级 10，如果该用户不存在这样的等级。

我不熟悉 Microsoft SQL Server 和 T-SQL。你能帮我解决这样的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T08:46:38.997

```
INSERT INTO STUDENT_COURSE (Student_ID, course_ID, grade)
SELECT  a.ID as StudentID, b.ID as Course_ID, 10 AS grade
FROM    Student a 
        CROSS JOIN Course b
        LEFT JOIN 
        (
            SELECT  d.*
            FROM    STUDENT_COURSE d
                    INNER JOIN Course e
                        ON d.Course_ID = e.ID
            WHERE   e.Name = 'Math'
        ) c ON  a.ID = c.student_ID AND
                b.ID = c.course_ID 
WHERE   c.student_ID IS NULL AND 
        b.Name = 'Math' 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/fb4bb/1)
*   [SQLFiddle Demo（*添加了一位学生已经在 MATH 上评分的记录*）](http://www.sqlfiddle.com/#!3/c936a/1)

如果您列出表上的所有记录，则输出`STUDENT_COURSE`

```
MySQL> SELECT * FROM STUDENT_COURSE

╔════════════╦═══════════╦═══════╗
║ STUDENT_ID ║ COURSE_ID ║ GRADE ║
╠════════════╬═══════════╬═══════╣
║          1 ║         1 ║     9 ║
║          2 ║         1 ║     8 ║
║          3 ║         1 ║     6 ║
║          1 ║         2 ║    10 ║
║          2 ║         2 ║    10 ║
║          3 ║         2 ║    10 ║
╚════════════╩═══════════╩═══════╝ 
```

# c++ - 视频卡住meanshift跟踪opencv

> ID：15584906
> 
> 赞同：2
> 
> 时间：2013-03-23T08:41:45.037
> 
> 标签：c++, opencv

我想使用 meanshift 算法跟踪任何移动的物体。为此，我首先从背景中减去帧。然后应用腐蚀、膨胀和平滑。为了检测运动物体并找到它的坐标，我使用角点检测。

然后我计算角点的平均值，并将这些点传递给 meanshift 搜索窗口。现在当物体出现在屏幕上时，程序离开角点检测并进入meanshift跟踪。它一直在平均运行，直到对象离开屏幕。

现在如果物体离开屏幕，我想再次激活角点检测。为此，我将程序从 meanshift 中取出并跳回角点检测。该程序运行良好，但问题是***当它离开 meanshift 并再次进入角点检测时，它会卡住几秒钟***。

之后，它运行顺利。该问题仅在从均值偏移到角点检测的过渡期间出现。我不知道可能是什么原因。请告诉我一些解决方案。

这是我的代码：

```
#include "highgui.h"
#include "cv.h"
#include "cxcore.h"
#include "cvaux.h"
#include <iostream>
using namespace std;
const int MAX_CORNERS = 500;

inline static void allocateOnDemand(IplImage** img, CvSize size, int depth, int channels) {
    if (*img != NULL) 
        return;

    *img = cvCreateImage(size, depth, channels);

    if (*img == NULL) {
        fprintf(stderr, "Error: Couldn't allocate image.  Out of memory?\n");
        exit(-1);
    }
}

int main() {
    CvCapture* capture = cvCaptureFromCAM(CV_CAP_V4L2);
    IplImage* pFrame[10];
    IplImage* bg;
    IplImage* img_A;
    IplImage* img_B;
    IplImage* eig_image;
    IplImage* tmp_image;
    img_A = cvQueryFrame(capture);
    CvSize img_sz = cvGetSize(img_A);
    int c1 = 0, c2 = 0;
    int xarr[40];
    //A temporary replacement for background averaging
    int j = 0;

    for (j = 0; j < 10; j++) {
        pFrame[j] = cvQueryFrame(capture);
        cvWaitKey(200);
    }

    cvSaveImage("10.jpg", pFrame[9], 0); //saving the background
    IplImage* imgA = cvCreateImage(cvGetSize(img_A), 8, 1);
    IplImage* imgB = cvCreateImage(cvGetSize(img_A), 8, 1);
    IplImage* imgB1 = cvCreateImage(cvGetSize(img_A), 8, 1);
    IplImage* imgb = cvCreateImage(cvGetSize(img_A), 8, 1);
    cvNamedWindow("LKpyr_OpticalFlow", CV_WINDOW_AUTOSIZE);
    bg = cvLoadImage("10.jpg", CV_LOAD_IMAGE_GRAYSCALE); //loading the saved background

    int flag = 0;
    int index = 0;
    char keypress;
    bool quit = false;
    CvConnectedComp*out = new CvConnectedComp(); //output window for meanshift
    int win_size = 25; //window size for corner point detection
    int x1 = 0;
    int y1 = 0;
    int x;
    int y;
    int cc;

line3: 
    while (quit == false) { //line3:
        IplImage* imgC = cvCreateImage(cvGetSize(img_A), 8, 1); //creating output image
        cvZero(imgC);
        img_B = cvQueryFrame(capture);
        imgC = cvQueryFrame(capture);
        // line3:
        int corner_count = MAX_CORNERS; //total no of corners found in frame
        cvCvtColor(img_B, imgb, CV_BGR2GRAY);
        //line3:
        CvPoint2D32f* cornersA = new CvPoint2D32f[MAX_CORNERS];
        CvPoint2D32f* cornersB = new CvPoint2D32f[MAX_CORNERS];

        if (index % 2 == 0) {
            cvSub(imgb, bg, imgB, NULL); //background subtraction and stuff
            cvErode(imgB, imgB, NULL, 4);
            cvDilate(imgB, imgB, 0, 2);
            cvSmooth(imgB, imgB, 0, 1);
            cvThreshold(imgB, imgB, 50, 255, CV_THRESH_BINARY);
            //line3:
            if (flag == 1) goto line1; //Go to Meanshift
            allocateOnDemand(&eig_image, img_sz, IPL_DEPTH_32F, 1);
            allocateOnDemand(&tmp_image, img_sz, IPL_DEPTH_32F, 1);
            cvCvtColor(img_A, imgA, CV_BGR2GRAY);
            //line3:
            cvGoodFeaturesToTrack(imgB, eig_image, tmp_image, cornersA, &
                corner_count, 0.05, 5.0, 0, 3, 0, 0.04); //detects corners and no of corners stored in corner_count
            cvFindCornerSubPix(imgB, cornersA, corner_count, cvSize(12, 12),
                cvSize(-1, -1), cvTermCriteria(CV_TERMCRIT_ITER |
                CV_TERMCRIT_EPS, 20, 0.03));
            CvPoint p0;
            CvPoint p1;
            CvPoint acc;
            cc = corner_count + 20;
            acc.x = 0;
            acc.y = 0;
            for (int i = 0; i < corner_count; i++) {
                p0 = cvPoint(cvRound(cornersA[i].x), cvRound(cornersA[i].y));
                p1 = cvPoint(cvRound(cornersB[i].x), cvRound(cornersB[i].y));
                acc.x = acc.x + p0.x; //calculating mean of corner points
                acc.y = acc.y + p0.y;
            }
            delete[] cornersA;
            delete[] cornersB;
            cout << "Corner Count is" << corner_count << endl;
            cout << "Flag status: " << flag << endl;

            if (corner_count > 0) {
                flag = 1;
                cvWaitKey(20);
            }

            x1 = cvRound(acc.x / (corner_count + 1));
            y1 = cvRound(acc.y / (corner_count + 1));
            cout << "x is " << x1 << " y is " << y1 << endl;
            cout << "Flag status: " << flag << endl;
            x = x1;
            y = y1;
            if (flag == 0) goto line2; //Go back to Corner Point detection
            line1: CvRect window = cvRect(x, y, 80, 90); //Creates window for meanshift algo
            cvMeanShift(imgB, window, cvTermCriteria(CV_TERMCRIT_EPS |
                CV_TERMCRIT_ITER, 200, 1), out);
            window = out->rect;
            x = out->rect.x;
            y = out->rect.y;
            cout << "Now x is " << x << " y is " << y << endl;
            cout << "Flag status: " << flag << endl;

            if (out->area > 200) {
                cvRectangle(imgC, cvPoint(x + 50, y + 100), cvPoint(x - 20, y -
                    90), cvScalar(0, 0, 255), 3, 8, 0);
            } else {}

            xarr[c1] = x;
            c1++;

            if (c1 > 39) c1 = 0;
            if (xarr[0] == xarr[39]) {
                c2 = 1;
                cout << "c2 is now " << c2 << endl;
            }
        }

        if (x == 0 || y == 0 || x < 7 || x > 572 || c2 == 1) {
            flag = 0;
            c2 = 0;
            goto line3;
            break;
        }

        line2: cvShowImage("LKpyr_OpticalFlow", imgC);
        keypress = cvWaitKey(20);
        // Set the flag to quit if escape was pressed

        if (keypress == 27) {
            quit = true;
        }
        //index++;
    } //end of while

    return 0;
} 
```

# cors - 不允许使用 CORS 405 方法

> ID：15584909
> 
> 赞同：11
> 
> 时间：2013-03-23T08:42:33.080
> 
> 标签：cors, iis-8

我一直在关注关于如何设置我的网站以允许**跨站点脚本请求的**[Mozilla 文章](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS)。使用 IIS 管理器，我添加了以下 HTTP 响应标头

 **```
Access-Control-Allow-Origin  : *
Access-Control-Allow-Headers : Origin, SecurityPrivateKeyID
Access-Control-Allow-Methods : GET, POST, PUT, DELETE, OPTIONS 
```

尽管如此，`405 Method Not Allowed`当我的浏览器（Firefox 和 Chrome）发送带有自定义`SecurityPrivateKeyID`标头的飞行前请求时，我仍然会收到错误消息。

要求

```
OPTIONS /Service/Json/User.svc/ HTTP/1.1
Host: serviceprovider.com
User-Agent: Mozilla/5.0 (Windows NT 6.2; WOW64; rv:19.0) Gecko/20100101 Firefox/19.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate
Origin: http://client.com
Access-Control-Request-Method: GET
Access-Control-Request-Headers: securityprivatekeyid
Connection: keep-alive 
```

回复

```
HTTP/1.1 405 Method Not Allowed
Allow: GET
Content-Length: 1565
Content-Type: text/html; charset=UTF-8
Server: Microsoft-IIS/8.0
access-control-allow-origin: *
Access-Control-Allow-Methods: GET, POST, PUT, DELETE, OPTIONS
Access-Control-Allow-Headers: Origin, SecurityPrivateKeyID
Date: Sat, 23 Mar 2013 08:35:03 GMT 
```

直接访问时，该服务运行良好`http://serviceprovider.com/Service/Json/User.svc/`。

关于我做错了什么的任何想法？

[请注意，我已将主机文件更改为在我的机器上指向 client.com 和 serviceprovider.com]

[使用 JSONP 的解决方案不行，因为我的 Web 服务必须能够使用 POST、PUT 和 DELETE 方法]

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-24T13:26:49.267

我的 IIS 8 实例是全新安装的，看来我需要对`Handler Mappings`

## 备份 IIS 配置

如果任何建议的更改破坏了您现有的网站，最好备份 applicationhost.config 文件

1.  导航`C:\Windows\System32\inetsrv\config`
2.  制作一份`applicationhost.config`

## 删除未使用的处理程序

作为起点，我删除了所有未使用的处理程序映射以减少问题空间。您可以通过`applicationhost.config`直接修改或使用 IIS 管理器来执行此操作

1.  打开 IIS 管理器
2.  在服务器节点或单个网站节点上选择处理程序映射功能
3.  手动删除所有不需要的映射。

我的网站以服务为基础，仅依赖于静态文件和带有`.aspx`和`.svc`文件扩展名的文件。我还手动删除了对`.NET 2.0`整个配置文件的所有引用。

## 添加选项处理程序

这似乎是解决办法。

1.  打开 IIS 管理器
2.  在服务器节点或单个网站节点上选择处理程序映射功能
3.  在左侧列中选择`Add Module Mapping`
4.  在`Add Module Mapping`对话框中使用以下值。
    *   `Request path`-`*`
    *   `Module`-`ProtocolSupportModule`
    *   `Executable`- [留着空白]
    *   `Name`- [无论你想要什么]
5.  点击`Request Restrictions`
    *   在`Mapping`选项卡中，取消选中`Invoke handler only if request is mapped to`
    *   在`Verbs`选项卡中确保`OPTIONS`选中
    *   在`Access`选项卡中选择`Script`

我生成的处理程序配置如下所示

```
<handlers accessPolicy="Read, Script">
    <add name="OPTIONS" path="*" verb="OPTIONS" modules="ProtocolSupportModule" resourceType="Unspecified" />
    <add name="svc-Integrated-4.0" path="*.svc" verb="*" type="System.ServiceModel.Activation.ServiceHttpHandlerFactory, System.ServiceModel.Activation, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" resourceType="Unspecified" requireAccess="Script" preCondition="integratedMode,runtimeVersionv4.0" />
    <add name="SecurityCertificate" path="*.cer" verb="GET,HEAD,POST" modules="IsapiModule" scriptProcessor="%windir%\system32\inetsrv\asp.dll" resourceType="File" />
    <add name="ISAPI-dll" path="*.dll" verb="*" modules="IsapiModule" resourceType="File" requireAccess="Execute" allowPathInfo="true" />
    <add name="PageHandlerFactory-Integrated-4.0" path="*.aspx" verb="GET,HEAD,POST,DEBUG" type="System.Web.UI.PageHandlerFactory" resourceType="Unspecified" requireAccess="Script" preCondition="integratedMode,runtimeVersionv4.0" />
    <add name="CGI-exe" path="*.exe" verb="*" modules="CgiModule" resourceType="File" requireAccess="Execute" allowPathInfo="true" />
    <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="*" type="System.Web.Handlers.TransferRequestHandler" resourceType="Unspecified" requireAccess="Script" preCondition="integratedMode,runtimeVersionv4.0" responseBufferLimit="0" />
    <add name="StaticFile" path="*" verb="*" modules="StaticFileModule,DefaultDocumentModule,DirectoryListingModule" resourceType="Either" requireAccess="Read" />
</handlers> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-28T08:02:34.483

对于我的例子：

1.  确保请求中的“Access-Control-Allow-Headers”和“Access-Control-Allow-Methods”小于或等于响应中的。（不要使用“*”）

2.  `<remove name="OPTIONSVerbHandler" />`在 Web.config 中删除此行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-25T23:12:49.777

在我的情况下，我必须去`Handler Mappings`，切换到`Ordered View`，然后`OPTIONSVerbHandler`一直移动到列表的顶部。**

# dom - 创建一个 HTML DOM 对象以访问 html 表单中的 HTML 对象

> ID：15584911
> 
> 赞同：3
> 
> 时间：2013-03-23T08:42:43.967
> 
> 标签：dom, vbscript

任何人都可以帮助我使用 VB 脚本创建 HTML DOM 对象。我必须浏览 HTML 表单并在文本框中输入值，或者使用 vb 脚本和 HTML DOm 函数从下拉列表中选择一个值。

我知道要创建 XMl dom 对象，我们可以使用以下语句，因此任何类似于以下语句的语句都可用于创建 HTML DOM。

```
Set Xmlobj = CreateObject ("Microsoft.XMLDOm")

Set Htmlobj = CreateObject ("Microsoft.HtmlDom")  ' Is this avalibale when I tried it shows     error for object creattion, other workaround available. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T09:22:09.307

没有“HTMLDOM”对象，因为与 XML 相比，附加到 HTML 的内容要多得多。它将需要 JavaScript 处理、会话处理、CSS 处理、HTTP 请求、cookie 处理、缓存等来将文本 HTML 转换为有意义的内存中文档对象。

如果所有这些都实现了，那么您将拥有一个完整的浏览器。这就是为什么没有这样的 COM 对象的原因。

因为您的任务可以通过 COM 自动化直接使用 Internet Explorer：

```
Option Explicit

Dim IE, queryField

Set IE = CreateObject("InternetExplorer.Application")
IE.Visible = True

IE.Navigate "http://www.google.com"

While IE.Busy Or IE.readyState <> 4
     WScript.Sleep 100
Wend

Set queryField = GetFormFieldByName(IE.document, "q")

If Not queryField Is Nothing Then
    QueryField.value = "test"
    QueryField.form.submit
End If

WScript.Sleep 5000
IE.Quit
' ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Function GetFormFieldByName(Parent, FindName)
    Dim FormFields, FormField

    Set GetFormFieldByName = Nothing
    Set FormFields = Parent.getElementsByTagName("INPUT")

    For Each FormField In FormFields
        If UCase(FormField.Name) = UCase(FindName) Then
            Set GetFormFieldByName = FormField
            Exit For
        End If
    Next
End Function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-15T14:26:28.250

```
Set oDoc = CreateObject("HTMLFILE")

oDoc.write "<html><head><title></title></head><body><div id='div'>hello</div></body></html>"

Response.Write oDoc.getElementById("div").innerHTML 
```

--

```
WScript.Echo oDoc.getElementById("div").innerHTML 
```

输出： -

你好

# linux - Gzip 文件仅在终端中的某些字节之上

> ID：15584913
> 
> 赞同：1
> 
> 时间：2013-03-23T08:42:57.267
> 
> 标签：linux, compression, gzip

我键入这个命令，它会在一个文件夹（包括子文件夹）中查找所有 css 文件并单独压缩它们。这是命令：

```
find . -type f -name "*.css" -exec sh -c "gzip -9v < {} > {}.gz" \; 
```

我如何告诉它只允许超过特定大小的 gzip 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T08:46:48.193

```
find . -type f -name "*.css" -size +1M -exec sh -c "gzip -9v < {} > {}.gz" \; 
```

只会压缩至少 1 MB 的文件。

# wordpress - 如何通过元 ID 获取元值

> ID：15584915
> 
> 赞同：3
> 
> 时间：2013-03-23T08:43:12.467
> 
> 标签：wordpress

例如，我有一个帖子`meta_key`是 'name'，`meta_value`是 'Jason'，
在`meta_id`MySQL 中是 128

如何通过 meta_id 获取此 meta_value ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-27T19:39:56.303

最好的方法是使用 WordPress 的内置函数[`get_metadata_by_mid()`](http://wpseek.com/get_metadata_by_mid/).

所以在你的情况下：

```
$value = get_metadata_by_mid( 'post', 128 ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T09:02:33.707

我发现[这](http://wpseek.com/blog/2010/how-to-get-the-meta-id-by-meta-key/80/)可能会对你有所帮助。

它描述了*如何通过 Meta Key 获取 Meta ID*，因此它不完全是您需要的，但非常相似。也许所需要的只是稍微修改一下那个查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-23T09:32:46.073

`get_metadata_by_mid( $meta_type, $meta_key )`适用于大多数情况。它返回一个包含所有 postmeta 数据的对象。

```
$jason = get_metadata_by_mid( 'post', 128 );
echo 'Meta Value = ' . $jason->meta_value;
echo 'Post ID = ' . $jason->post_id;

// Results
Meta Value = Jason
Post ID = 123 
```

如果您需要做一些更自定义的事情，例如使用元 ID 获取产品的库存状态。你可以使用这个。

```
global $wpdb;

$meta_id = 128;
$postmeta_post_id = $wpdb->get_var( $wpdb->prepare("SELECT post_id FROM {$wpdb->prefix}postmeta WHERE meta_id = %d", $meta_id) );

$stock_status = get_post_meta( $postmeta_post_id, '_stock_status', single );

echo 'Product status: ' . $stock_status;

//results
Product status: outofstock 
```

# php - 没有重定向页面的ajax调用

> ID：15584916
> 
> 赞同：0
> 
> 时间：2013-03-23T08:43:30.800
> 
> 标签：php, ajax, web-services

我的过程是在加载包含带有某些字段的表单的页面之前调用 Web 服务，表单中的文件组织、位置、建筑物是从 Web 服务调用的响应中获得的。字段组织、建筑物和位置是丢弃的downs，选择组织，然后在选择建筑物后选择位置，现在有一个名为到期日期的文件，为了获得到期日期，我必须通过将位置名称作为 json 输入来调用 web 服务到 web服务，我想坚持在同一页面上并获得到期日的响应，我想我会使用 ajax 来解决这个问题，我真的不知道该怎么做，任何人都可以帮助我吗？我在这里得到了一些代码，任何人都可以重定向我用这段代码做一些事情

```
$.ajax( {
type:'Get',
url:'http://mysite.com/mywebservice',
success:function(data) {
alert(data);
}

}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T08:54:35.843

我假设你想调用一个 php 脚本来获得你的结果。

编写 php 脚本的方式与生成普通网页的方式完全相同，不同之处在于您不是输出（回显）HTML，而是输出 XML 或 JSON。

# html - 是否登录时显示消息框？

> ID：15584920
> 
> 赞同：0
> 
> 时间：2013-03-23T08:43:50.800
> 
> 标签：html, vb.net, login, web

我创建了一个登录网站的脚本，但现在我需要帮助。这是让我登录的主要脚本，非常不言自明。

```
 WebBrowser1.Document.GetElementById("login").SetAttribute("value", txtUsername.Text)
     WebBrowser1.Document.GetElementById("passwd").SetAttribute("value", txtPassword.Text)
     WebBrowser1.Document.GetElementById("SI").InvokeMember("Click") 
```

现在，我要做的是让它告诉我是否使用了正确的登录方式（我使用的网站是 live.com）。所以很明显我需要一些可以阅读页面的东西，如果它发现这个“那个微软帐户不存在。输入一个不同的电子邮件地址或获取一个新帐户。” 或此“该密码不正确。请确保您使用的是 Microsoft 帐户的密码。” 那么它应该在一个消息框中说出类似的内容：“无法登录”。但如果它成功，它应该读取其他内容，并将其重定向到页面。谁能给我任何关于如何开始的参考或提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T08:47:30.303

使用浏览器的开发工具（例如，Firefox 的 Ctrl-Shift-I）查看错误消息的 ID（在本例中为“idTd_Tile_ErrorMsg_Login”）。

然后尝试`WebBrowser1.Document.GetElementById("idTd_Tile_ErrorMsg_Login")`。如果该元素的内容为空，则没有错误消息并且登录成功。此外，当您登录时页面会发生变化。所以你可以观察页面URL的变化，或者看看元素（idTd_Tile_ErrorMsg_Login）是否找不到。

# python - 快速准确的 Python 重复计时器

> ID：15584928
> 
> 赞同：9
> 
> 时间：2013-03-23T08:44:29.463
> 
> 标签：python, multithreading, timer, repeat

我需要快速准确地从列表中发送重复消息。一个列表需要每 100 毫秒发送一次消息，窗口为 +/- 10 毫秒。我尝试使用下面的代码，但问题是定时器等待 100 毫秒，然后需要完成所有计算，使得定时器掉出可接受的窗口。

简单地减少等待是一种混乱且不可靠的黑客行为。如果列表在循环期间被编辑，则消息循环周围有一个锁。

关于如何让 python 在 100 毫秒左右一致地发送消息的想法？谢谢

```
from threading import Timer
from threading import Lock

class RepeatingTimer(object):
    def __init__(self,interval, function, *args, **kwargs):
        super(RepeatingTimer, self).__init__()
        self.args = args
        self.kwargs = kwargs
        self.function = function
        self.interval = interval
        self.start()

    def start(self):
        self.callback()

    def stop(self):
        self.interval = False

    def callback(self):
        if self.interval:
            self.function(*self.args, **self.kwargs)
            Timer(self.interval, self.callback, ).start()

def loop(messageList):
    listLock.acquire()
    for m in messageList:
        writeFunction(m)
    listLock.release()

MESSAGE_LIST = [] #Imagine this is populated with the messages
listLock = Lock()
rt = RepeatingTimer(0.1,loop,MESSAGE_LIST)
#Do other stuff after this 
```

我明白 writeFunction 会导致一些延迟，但不会超过允许的 10 毫秒。对于每条消息，我基本上需要每 100 毫秒调用一次函数。消息列表很小，通常小于元素。

下一个挑战是每 10 毫秒（+/- 1 毫秒）进行一次这项工作：P

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-23T13:30:18.140

是的，简单的等待很麻烦，还有更好的选择。

首先，您需要 Python 中的高精度计时器。有几种选择，根据您的操作系统，您可能需要选择[最准确的一个](https://stackoverflow.com/questions/85451/python-time-clock-vs-time-time-accuracy)。

其次，您必须了解[基本的抢占式多任务处理](http://en.wikipedia.org/wiki/Computer_multitasking#Preemptive_multitasking.2Ftime-sharing)并了解没有高精度`sleep`功能，并且其实际分辨率也会因操作系统而异。例如，如果我们在谈论 Windows，[最小的睡眠间隔可能在 10-13 毫秒左右](https://stackoverflow.com/questions/1133857/how-accurate-is-pythons-time-sleep)。

第三，请记住，总是可以等待一个非常准确的时间间隔（假设您有一个高分辨率计时器），但要以高 CPU 负载为代价。该技术称为[忙等待](http://en.wikipedia.org/wiki/Busy_waiting)：

```
while(True):
    if time.clock() == something:
         break 
```

因此，实际的解决方案是创建一个混合计时器。它将使用常规`sleep`函数等待间隔的主要部分，然后它将开始在循环中探测高精度计时器，同时执行此操作`sleep(0)`。`Sleep(0)`将（取决于平台）等待尽可能少的时间，将剩余时间片的其余部分释放给其他进程并切换 CPU 上下文。这是一个相关的[讨论](https://stackoverflow.com/questions/7273474/behavior-of-pythons-time-sleep0-under-linux-does-it-cause-a-context-switch)。

[Ryan Geiss在 Win32](http://www.geisswerks.com/ryan/FAQS/timing.html)中的计时文章中详细描述了这个想法。它在 C 和 Windows API 中，但基本原则也适用于此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T09:44:55.043

存储开始时间。发送消息。获取结束时间。计算timeTaken=end-start。转换为 FP 秒。睡眠（0.1-timeTaken）。循环回来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-24T01:06:06.287

尝试这个：

```
#!/usr/bin/python
import time;  # This is required to include time module.
from threading import Timer

def hello(start, interval, count):
    ticks = time.time()
    t = Timer(interval - (ticks-start-count*interval), hello, [start, interval, count+1])
    t.start()
    print "Number of ticks since 12:00am, January 1, 1970:", ticks, " #", count 

dt = 1.25 # interval in sec
t = Timer(dt, hello, [round(time.time()), dt, 0]) # start over at full second, round only for testing here
t.start() 
```

# elfinder - elFinder 2.0 无法选择名称中包含空格的图像文件

> ID：15584929
> 
> 赞同：0
> 
> 时间：2013-03-23T08:44:29.840
> 
> 标签：elfinder

我已经在 Codeigniter 2.1 版环境中安装了带有 elRTE 的 elFinder 2.0 rc1。elRTE 正在工作，我正在编辑和保存我选择的文件。但是，在处理名称中包含空格的图像文件时，elFinder 存在一个问题。我检查了我的`.htaccess` `RewriteCond`设置，Codeigniter 知道在处理相关图像文件（例如带有扩展名`.jpg`）时不重定向，但如果图像文件名包含空格，elFinder 会抛出 404 错误。我可以在文件管理器窗口中看到文件的缩略图，但是当我双击选择（或单击选择按钮）时，图像没有出现在预览窗口中，并且控制台中出现 404 错误。一旦我删除空格，它就可以正常工作。

我尝试更改`acceptedName`传递给班级的选项中的选项`elFinder`，然后将其传递给`elFinderConnector`班级。默认`acceptedName`正则表达式是`'/^\w[\w\s\.\%\-\(\)\[\]]*$/u'`. 正则表达式是我最大的噩梦，所以我想也许`\s`是为了匹配空格，所以我偶然发现试图改变接受名称，但它没有效果。

如何配置 elFinder 以允许我选择名称中包含空格的图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T09:01:41.933

啊！傻我。我忘记`$config['base_url']`在 CodeIgniter config.php 文件中进行设置，所以 elFinder 在一个完全不同的应用程序中查找目录！

# android - 谷歌地图 api v2 密钥错误

> ID：15584930
> 
> 赞同：0
> 
> 时间：2013-03-23T08:44:43.677
> 
> 标签：google-map-api-key ？, android, google-maps-api-2

我最近将硬盘驱动器更改为我的电脑，当我从 github 克隆我的项目并将 google-play-services 添加为库时，我尝试打开谷歌地图，但没有收到任何错误，但没有任何显示。我只能看到缩放按钮和我的位置图标。我是否必须为新的 ssd重新生成[google-map-api-key ？](/questions/tagged/google-map-api-key "显示标记为“google-map-api-key”的问题")

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T10:55:46.947

可能您必须重新生成地图 API 密钥，因为我猜您的新硬盘驱动器上有一个新证书。使用 keytool 来做到这一点，就像这里：

[https://developers.google.com/maps/documentation/android/start#the_google_maps_api_key](https://developers.google.com/maps/documentation/android/start#the_google_maps_api_key)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T16:05:41.837

是的，您需要从文件夹中获取当前生成的密钥`debug.keystore`并通过 Google API 控制台进行注册，这是我写的关于如何做到这一点的博客文章：

[生成 Google Map API V2 密钥](https://blog-emildesign.rhcloud.com/?p=403)

# objective-c - 在 Cocoa 中创建动画 GIF - 定义帧类型

> ID：15584931
> 
> 赞同：4
> 
> 时间：2013-03-23T08:44:44.293
> 
> 标签：objective-c, cocoa, animation, core-graphics, gif

我已经能够调整在 SO 上找到的一些代码，以从我的视图的“屏幕截图”中生成动画 GIF，但结果是不可预测的。GIF 帧有时是完整的图像，完整的帧（“替换”模式，正如 GIMP 标记的那样），其他时候只是与前一层的“差异”（“组合”模式）。

据我所见，当涉及的帧更少和/或更小时，CG 会以“组合”模式写入 GIF，但无法获得正确的颜色。实际上，运动部件的颜色正确，背景是错误的。当 CG 将 GIF 保存为全帧时，颜色还可以。文件大小更大，但是，嘿，显然你不能两全其美。:)

有没有办法：

```
 a) force CG to create "full frames" when saving the GIF
    b) fix the colors (color table?) 
```

我要做的是（ARC模式）：

**捕获视图的可见部分**

```
[[scrollView contentView] dataWithPDFInsideRect:[[scrollView contentView] visibleRect]]; 
```

**将其转换并调整为 PNG 类型的 NSImageBitmapRep**

```
-(NSMutableDictionary*) pngImageProps:(int)quality {
  NSMutableDictionary *pngImageProps;  
  pngImageProps = [[NSMutableDictionary alloc] init];
  [pngImageProps setValue:[NSNumber numberWithBool:NO] forKey:NSImageInterlaced];
  double compressionF = 1;

  [pngImageProps setValue:[NSNumber numberWithFloat:compressionF] forKey:NSImageCompressionFactor];
  return pngImageProps;
}

-(NSData*) resizeImageToData:(NSData*)data toDimX:(int)xdim andDimY:(int)ydim withQuality:(int)quality{
  NSImage *image = [[NSImage alloc] initWithData:data];
  NSRect inRect = NSZeroRect;
  inRect.size = [image size];

  NSRect outRect = NSMakeRect(0, 0, xdim, ydim);
  NSImage *outImage = [[NSImage alloc] initWithSize:outRect.size];

  [outImage lockFocus];
    [image drawInRect:outRect fromRect:inRect operation:NSCompositeCopy fraction:1];
    NSBitmapImageRep* bitmapRep = [[NSBitmapImageRep alloc] initWithFocusedViewRect:outRect];
  [outImage unlockFocus];

  NSMutableDictionary *imageProps = [self pngImageProps:quality];
  NSData* imageData = [bitmapRep representationUsingType:NSPNGFileType properties:imageProps];
  return [imageData copy];
} 
```

**获取 BitmapReps 数组并创建 GIF**

```
-(CGImageRef) pngRepDataToCgImageRef:(NSData*)data {
  CFDataRef imgData = (__bridge CFDataRef)data;
  CGDataProviderRef imgDataProvider = CGDataProviderCreateWithCFData (imgData);
  CGImageRef image = CGImageCreateWithPNGDataProvider(imgDataProvider, NULL, true, kCGRenderingIntentDefault);
  return image;
}

////////// create GIF from 

NSArray *images;  // holds all BitmapReps

CGImageDestinationRef destination = CGImageDestinationCreateWithURL((__bridge CFURLRef)[NSURL fileURLWithPath:pot],
                                                                    kUTTypeGIF,
                                                                    allImages,
                                                                    NULL);
// set frame delay
NSDictionary *frameProperties = [NSDictionary
                                 dictionaryWithObject:[NSDictionary
                                                       dictionaryWithObject:[NSNumber numberWithFloat:0.2f]
                                                       forKey:(NSString *) kCGImagePropertyGIFDelayTime]
                                 forKey:(NSString *) kCGImagePropertyGIFDictionary];

// set gif color properties
NSMutableDictionary *gifPropsDict = [[NSMutableDictionary alloc] init];
[gifPropsDict setObject:(NSString *)kCGImagePropertyColorModelRGB forKey:(NSString *)kCGImagePropertyColorModel];
[gifPropsDict setObject:[NSNumber numberWithBool:YES] forKey:(NSString *)kCGImagePropertyGIFHasGlobalColorMap];

// set gif loop
NSDictionary *gifProperties = [NSDictionary
                               dictionaryWithObject:gifPropsDict
                               forKey:(NSString *) kCGImagePropertyGIFDictionary];

// loop through frames and add them to GIF 
for (int i=0; i < [images count]; i++) {
  NSData *imageData = [images objectAtIndex:i];
  CGImageRef imageRef = [self pngRepDataToCgImageRef:imageData];
    CGImageDestinationAddImage(destination, imageRef, (__bridge CFDictionaryRef) (frameProperties));
}

// save the GIF
CGImageDestinationSetProperties(destination, (__bridge CFDictionaryRef)(gifProperties));
CGImageDestinationFinalize(destination);
CFRelease(destination); 
```

我检查了 ImageBitmapReps，当单独保存为 PNG 时，它们很好。据我了解，颜色表应该由CG处理还是我负责产生抖动的颜色？怎么做？

即使重复制作相同的动画，生成的 GIF 也可能会有所不同。

这是单个 BitmapRep

[![单帧](../Images/bfa71b1f0db846ed165a7111d027f67d.png)](https://i.stack.imgur.com/qxt45.png)
[（来源：[andraz.eu](http://andraz.eu/stuff/gif/frame.png)）]

这是带有无效颜色的 GIF（“组合”模式） [（来源：][[andraz.eu](http://andraz.eu/stuff/gif/anim2.gif)][）][![组合框架](../Images/64e370030c87d7ff87cbb5a2612055ce.png)](https://i.stack.imgur.com/6ltqM.gif)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T23:12:10.083

我读了你的代码。请在创建 CGImageDestinationRef 时仔细检查“allImages”和“[images count]”。

以下测试代码工作正常：

```
NSDictionary *prep = [NSDictionary dictionaryWithObject:[NSDictionary dictionaryWithObject:[NSNumber numberWithFloat:0.2f] forKey:(NSString *) kCGImagePropertyGIFDelayTime] forKey:(NSString *) kCGImagePropertyGIFDictionary];

CGImageDestinationRef dst = CGImageDestinationCreateWithURL((__bridge CFURLRef)(fileURL), kUTTypeGIF, [filesArray count], nil);

for (int i=0;i<[filesArray count];i++)
{
    //load anImage from array
    ...

    CGImageRef imageRef=[anImage CGImageForProposedRect:nil context:nil hints:nil];
    CGImageDestinationAddImage(dst, imageRef,(__bridge CFDictionaryRef)(prep));

}

bool fileSave = CGImageDestinationFinalize(dst);
CFRelease(dst); 
```

# javascript - 如何在href中调用js/脚本

> ID：15584933
> 
> 赞同：6
> 
> 时间：2013-03-23T08:44:48.367
> 
> 标签：javascript, href, html

我一直在我的模板中成功使用它：

```
<span class="sharethis-text">
<p>More  Options</p>
</span>
<script src="http://w.sharethis.com/button/buttons.js"></script>
<script>
stLight.options({
publisher:'******0b-6eed-4740-81e7-aa3ee0bd9f85',
});
</script> 
```

但现在我想在这个函数中调用这个函数：

```
<More-sharebar><a href="#">More options</a></More-sharebar> 
```

如何正确包含脚本？

如果答案很简单，请道歉。我是一个完整的初学者。我一直在寻找，但我找不到如何去做。

**编辑：**感谢到目前为止的答案，我想现在我有函数 stLight.options( 但我不知道如何包含外部 js 文件。而不是编辑 functions.php 文件，是否可以简单地包含上面的脚本在我的 HTML 中，但是给它一个名称，并以某种方式在 href 中调用该名称？另一件事：原始工作的函数在悬停时触发。如果可能的话，我想保留它。为我的道歉无知。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-06-28T05:54:17.773

Javascript 支持以下语法：

```
<a href='javascript:alert('Hi')'>ClickMe</a> 
```

这应该可以解决您的问题。

这是参考[草案](https://datatracker.ietf.org/doc/html/draft-hoehrmann-javascript-scheme-00)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T09:05:33.010

如果您的 file.js 中有：

```
function helloWorld(){...} 
```

您使用此函数调用 href 事件：

```
<a href="#" onClick="helloWorld()">More options</a> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-23T08:49:30.090

在标记 <a> 中定义属性：

```
 onclick="javascript:functionName();" 
```

或者

```
 onclick="return functionName(attribs)" 
```

这应该会有所帮助。

但它应该这样做：

```
<a id="do_something">
   aaa
</a>

<script type="text/javascrip">
$.(function(){
   $('a#do_something').click(functionName());
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-12-09T20:57:40.750

只需将此 Javascript 放入您的`href`：

```
<a href="javascript:;">More options</a> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-23T09:42:46.957

1.  编写一个函数来调用你想要的函数。根据你的帖子，也许是`stLight.options`？`false`如果您不想要链接的导航行为，请返回`a`。

    ```
    function clickHandler() {
        stLight.options({
            publisher:'******0b-6eed-4740-81e7-aa3ee0bd9f85',
        });
        return false;
    } 
    ```

2.  将`onclick`处理程序添加到`a`链接。

    ```
    <More-sharebar><a href="#" onclick="javascript:clickHandler()">More options</a></More-sharebar> 
    ```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-23T08:48:27.263

在 HREF 中，您将调用所需的函数，而不是脚本文件本身。

所以你必须在你的 HTML 文件中包含你的脚本（如果可能的话，在文件的末尾，而不是在标题中），然后从你的 href 中调用方法/函数。

# php - php 和 js-ajax 的行为很有趣（里面有解释）

> ID：15584938
> 
> 赞同：0
> 
> 时间：2013-03-23T08:45:48.933
> 
> 标签：php, javascript, ajax

我在使用这个 ajax 时遇到了问题。回归很有趣。该开关似乎总是评估为好像#about 是真的。并将其余的 switch 语句包含在 #page 变量中。例如，我的 PHP 代码打印了这个（以及它应该打印的#about），底部的代码应该阐明我的意思。

回顾一下，它与第一个 $page =' 之后的所有内容相呼应

在我的页面上，我在下面看到它应该回显的内容

```
 ';
           break;

    case '#register' :
           $page = 'k';
           break;

    case '#contact' :
          $page = 'a';
    break;

     case '#a' :
        $page = ' b';
        break;

     case '#b' :
        $page = '<p> c</p>';
        break;

      default;
    echo "def";
   }
   echo $page; 
```

更不用说它甚至不适用于#contact，或#a，#b ...等。我不确定为什么。无论传递的 url 是什么，它看起来好像 #about 是用它返回的内容调用的（即使它返回 about 等等）。

我真的很感激一些帮助！谢谢

这是我的代码：

js =]

```
$(document).ready(function () {

    //highlight the selected link
    $('a[href=' + document.location.hash + ']').addClass('selected');

    //Seearch for link with REL set to ajax
    $('a[rel=ajax]').click(function () {

        //grab the full url
        var hash = this.href;

        //remove the # value
        hash = hash.replace(/^.*#/, '');

        //clear the selected class and add the class class to the selected link
        $('a[rel=ajax]').removeClass('selected');
        $(this).addClass('selected');

        //hide the content
            $('#content').hide();
        console.log(this.href);
        //run the ajax
        getPage();

        //cancel the anchor tag behaviour
        return false;
    }); 
});

function pageload(hash) {
    //if hash value exists, run the ajax
    if (hash) getPage();    
    console.log("k");
}

function getPage() {

    //generate the parameter for the php script
    var data = 'page=' + encodeURIComponent(document.location.hash);
    $.ajax({
        url: "loader.php",  
        type: "GET",        
        data: data,     
        cache: false,
        success: function (html) {  

            //add the content retrieved from ajax and put it in the #content div
            $('#content').html(html);

            //display the body with fadeIn transition
            $('#content').fadeIn('slow');       
        }       
    });
} 
```

php =]

```
switch($_GET['page']) {
 case '#about' :
        $page = ' HTML stack overflow formats it, anyways';
        break;

 case '#register' :
        $page = 'k';
        break;

 case '#contact' :
        $page = 'a';
        break;

  case '#a' :
     $page = ' b';
     break;

  case '#b' :
     $page = '<p> c</p>';
     break;

   default;
 echo "def";
}
echo $page; 
```

再次感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T08:59:43.853

同样在 php 文件中，尝试将其放在脚本的顶部：

header("内容类型：文本/html");

# javascript - 将参数传递给 dygraph drawcallback

> ID：15584946
> 
> 赞同：0
> 
> 时间：2013-03-23T08:46:45.507
> 
> 标签：javascript, canvas, dygraphs

dygraph drawcallback 有两个参数，一个是对 dygraph 对象的引用，另一个是布尔值，如果它是第一次绘制图形。但我也想向回调发送可选参数，而不是创建全局变量。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T20:10:26.720

您的问题并非特定于 dygraphs。相反，这是使用 JavaScript 时的常见需求。常用技术：

**JavaScript（闭包）**

* * *

```
var self = this;
drawCallback : function(dygraph, is_init) {
  self._myCallbackFunction(extraParam1, extraParam2, dygraph, is_init)
} 
```

但是，`this`上下文可能不是您在回调函数中所期望的。如果要设置`this`为定义回调函数的对象的上下文，则可以使用：

**JavaScript`call`或`apply`函数**

* * *

```
drawCallback : function(dygraph, is_init) {
  self._myCallbackFunction.call(self, extraParam1, extraParam2, dygraph, is_init)
} 
```

或 **jQuery (.proxy)**

* * *

```
drawCallback : $.proxy(this._myCallbackFunction, this, extraParam1, extraParam2) 
```

# c - 给类型作为参数，如 C 中的 va_arg

> ID：15584948
> 
> 赞同：4
> 
> 时间：2013-03-23T08:46:48.463
> 
> 标签：c, types, variadic-functions

`va_arg(a,type)`宏扩展为`__builtin_va_arg(a,type)`编译器的内置部分。

是否可以实现基于类型的功能，如果可以，如何实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T08:52:05.500

> 请注意，[va_arg](http://www.cplusplus.com/reference/cstdarg/va_arg/)无法确定传递给函数的参数的实际类型，而是使用作为类型宏参数传递的任何类型作为其类型。

让我们看看是如何工作的，从[这里开始](http://research.microsoft.com/en-us/um/redmond/projects/invisible/include/stdarg.h.htm)`va_arg`的一种可能性是

```
#define va_arg(ap,t) (*(t *)((ap += _INTSIZEOF(t)) - _INTSIZEOF(t))) 
```

首先，它是一个宏，而不是一个函数。

如果你想写一个与 相同的类型基 MACRO `var_arg`，你有两个主要工具，*`pointers`*和*`sizeof`*.

您可以通过步骤增加/减少/查找指针`sizeof`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T08:52:13.623

使用预处理器，您确实可以实现基于类型的功能，尽管它是有限的。不要忘记`#define`指令与复制/粘贴一起使用，因此您无法比较 C 标准中的类型，例如 (*)。

但是，您可以重用`type`参数来构建类型泛型函数。下面是一个`min`泛型函数的例子：

```
#define DEFINE_MIN(type)        \
int min_##type(type a, type b)  \
{ return a < b ? a : b; } 
```

顺便说一句，`gcc`扩展 ,`typeof`给出了表达式的类型（它不再依赖于程序员的参数）。此外，最近，C11`_Generic`关键字允许您为不同类型的表达式编写不同的处理方式。

(*) 在 的情况下`va_arg`，该`type`参数通常用于获取 和 的`type`大小`type*`。

# algorithm - SQL / VBScript / 智能算法快速求和组合

> ID：15584949
> 
> 赞同：-1
> 
> 时间：2013-03-23T08:46:49.293
> 
> 标签：algorithm, ms-access, vba

我试图在同一主题中列出所有可能的顺序（仅连续和正向）总和组合。列出 row_id 和总和中涉及的行数。

```
Sample :

Input (Source Table :) 

DLID    Subject Total   
1   Science 70  
2   Science 70  
3   Science 70  
4   Science 70  
5   Maths   80  
6   Maths   80  
7   English 90  
8   English 90  
9   English 90  
10  Science 75  

Expected Result :           
ID  Number of Rows  Subject Total
1   1   Science 70
2   1   Science 70
3   1   Science 70
4   1   Science 70
5   1   Maths   80
6   1   Maths   80
7   1   English 90
8   1   English 90
9   1   English 90
10  1   Science 75
1   2   Science 140
2   2   Science 140
3   2   Science 140
5   2   Maths   160
7   2   English 180
8   2   English 180
1   3   Science 210
2   3   Science 210
7   3   English 270
1   4   Science 280 
```

VBSript 代码：

' myarray - 从 access 数据库中读取整个表 ' "i" 是读取的总行数 ' "j" 如果逐一访问每一行 ' "m" 是具有相同主题的后续行数，我们正在尝试检查 ' "n" 是一个计数器，从每一行开始并检查最多 m - 1 行是否使用相同的 sub ' "k" 将结果存储到 "resultarray"

```
myarray(0,j) = holds the row_id
myarray(1,j) = holds the subject
myarray(2,j) = holds the score
myarray(3 4 5 6 are other details
i is the total number of rows - around 80,000
There can be conitnuous records from the same subject as many as 700 - 800
m = is the number of rows matching / number of rows leading to the sum

For m = 1 to 700
For j = 0 to i-m
matchcount = 1

For n = 1 to m-1 
if  myarray(1,j) = myarray (1,j+n) Then 
matchcount = matchcount + 1
Else
Exit For
End If
Next

If matchcount = m Then
resultarray(2,k) = 0
For o = 0 to m - 1
resultarray(2,k) = CDbl(resultarray(2,k)) + CDbl (myarray (2,j+o))
resultarray(1,k) = m
resultarray(0,k) = ( myarray (0,j) )
resultarray(3,k) = ( myarray (3,j) )
resultarray(4,k) = ( myarray (4,j) )
resultarray(5,k) = ( myarray (1,j) )
resultarray(7,k) = ( myarray (5,j) )
resultarray(8,k) = ( myarray (6,j) )
Next
resultarray(2,k) = round(resultarray(2,k),0)
k = k + 1
ReDim Preserve resultarray(8,k)
End If

Next
Next 
```

代码运行完美，但速度很慢。我正在处理 80,000 行和 5 到 900 行相同主题的连续行。所以组合的数量有几百万。一组 80,000 行需要几个小时。每天必须做很多套。

请建议如何加快速度。更好的算法/代码改进/不同的代码语言请协助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T11:59:40.963

以下是“真正的”Access (SQL) 解决方案的构建块。

**观察#1**

在我看来，好的第一步是将两个数字（长整数）列添加到 [SourceTable]：

[SubjectBlock] 将对主题相同的行的“块”进行编号

[SubjectBlockSeq] 将按顺序编号每个块内的行

他们都应该被索引（重复确定）。填充这些列的代码将是......

```
Public Sub UpdateBlocksAndSeqs()
Dim cdb As DAO.Database, rst As DAO.Recordset
Dim BlockNo As Long, SeqNo As Long, PrevSubject As String

Set cdb = CurrentDb
Set rst = cdb.OpenRecordset("SELECT * FROM [SourceTable] ORDER BY [DLID]", dbOpenDynaset)

PrevSubject = "(an impossible value)"
BlockNo = 0
SeqNo = 0
DBEngine.Workspaces(0).BeginTrans  ''speeds up bulk updates
Do While Not rst.EOF
    If rst!Subject <> PrevSubject Then
        BlockNo = BlockNo + 1
        SeqNo = 0
    End If
    SeqNo = SeqNo + 1
    rst.Edit
    rst!SubjectBlock = BlockNo
    rst!SubjectBlockSeq = SeqNo
    rst.Update
    PrevSubject = rst!Subject
    rst.MoveNext
Loop
DBEngine.Workspaces(0).CommitTrans
rst.Close
Set rst = Nothing
End Sub 
```

...并且更新后的 SourceTable 将是...

```
DLID    Subject   Total   SubjectBlock    SubjectBlockSeq
1       Science   70      1               1
2       Science   60      1               2
3       Science   75      1               3
4       Science   70      1               4
5       Maths     80      2               1
6       Maths     90      2               2
7       English   90      3               1
8       English   80      3               2
9       English   70      3               3
10      Science   75      4               1 
```

（请注意，我调整了您的测试数据，以便更容易验证下面的结果。）

现在，当我们遍历不断增加的“要包含在总数中的序列长度”时，我们可以通过使用类似...的查询来快速识别感兴趣的“块”。

```
SELECT SubjectBlock FROM SourceTable WHERE SubjectBlockSeq=3 
```

...这将返回...

```
1
3 
```

...表明在计算“运行 3”的总数时，我们根本不需要查看块 2（“数学”）和 4（最后一个“科学”）。

**观察#2**

第一次通过，当 NumRows=1 时，是一种特殊情况：它只是将 [SourceTable] 中的行复制到 [Expected Results] 表中。我们可以通过一个查询来节省时间：

```
INSERT INTO ExpectedResult ( DLID, NumRows, Subject, Total, SubjectBlock, NextSubjectBlockSeq )
SELECT SourceTable.DLID, 1 AS Expr1, SourceTable.Subject, SourceTable.Total, 
    SourceTable.SubjectBlock, SourceTable.SubjectBlockSeq+1 AS Expr2
FROM SourceTable; 
```

您可能注意到我在 [ExpectedResult] 表中添加了两列：[SubjectBlock]（和以前一样）和 [NextSubjetBlockSeq]（只是 [SubjectBlockSeq]+1）。同样，它们都应该被索引，允许重复。我们将在下面使用它们。

**观察#3**

当我们继续寻找越来越长的“运行”来总结时，每次运行实际上只是一个较早（较短）的运行，并在末尾附加了一行。如果我们在进行过程中将结果写入 [ExpectedResults] 表，我们可以重复使用这些值，而无需费心返回并为整个运行添加各个值。

当 NumRows=2 时，“附加”行是`SubjectBlockSeq>=2`...

```
SELECT SourceTable.*
FROM SourceTable
WHERE (((SourceTable.SubjectBlockSeq)>=2))
ORDER BY SourceTable.DLID; 
```

...那是...

```
DLID    Subject   Total SubjectBlock    SubjectBlockSeq
2       Science   60    1               2
3       Science   75    1               3
4       Science   70    1               4
6       Maths     90    2               2
8       English   80    3               2
9       English   70    3               3 
```

...以及带有“较早（较短）运行”的 [ExpectedResult] 行，我们将在其上“附加”附加行

*   来自同一个 [SubjectBlock]，

*   [NumRows]=1，并且

*   和`[ExpectedResult].[NextSubjectBlockSeq] = [SourceTable].[SubjectBlockSeq]`

所以我们可以像这样获得新的总数并将它们附加到 [ExpectedResult]

```
INSERT INTO ExpectedResult ( DLID, NumRows, Subject, Total, SubjectBlock, NextSubjectBlockSeq )
SELECT SourceTable.DLID, 2 AS Expr1, SourceTable.Subject, 
    [ExpectedResult].[Total]+[SourceTable].[Total] AS NewTotal, 
    SourceTable.SubjectBlock, [SourceTable].[SubjectBlockSeq]+1 AS Expr2
FROM SourceTable INNER JOIN ExpectedResult 
    ON (SourceTable.SubjectBlockSeq = ExpectedResult.NextSubjectBlockSeq) 
        AND (SourceTable.SubjectBlock = ExpectedResult.SubjectBlock)
WHERE (((SourceTable.SubjectBlockSeq)>=2) AND (ExpectedResult.NumRows=1)); 
```

附加到 [ExpectedResult] 的行是

```
DLID    NumRows Subject   Total SubjectBlock    NextSubjectBlockSeq
2       2       Science   130   1               3
3       2       Science   135   1               4
4       2       Science   145   1               5
6       2       Maths     170   2               3
8       2       English   170   3               3
9       2       English   150   3               4 
```

**现在我们在做饭...**

使用与之前相同的逻辑，我们现在可以处理 NumRows=3。唯一的区别是我们会将值 3 插入 NumRows，我们的选择标准将是

```
WHERE (((SourceTable.SubjectBlockSeq)>=3) AND (ExpectedResult.NumRows=2)) 
```

完整的查询是

```
INSERT INTO ExpectedResult ( DLID, NumRows, Subject, Total, SubjectBlock, NextSubjectBlockSeq )
SELECT SourceTable.DLID, 3 AS Expr1, SourceTable.Subject, 
    [ExpectedResult].[Total]+[SourceTable].[Total] AS NewTotal, 
    SourceTable.SubjectBlock, [SourceTable].[SubjectBlockSeq]+1 AS Expr2
FROM SourceTable INNER JOIN ExpectedResult 
    ON (SourceTable.SubjectBlockSeq = ExpectedResult.NextSubjectBlockSeq) 
        AND (SourceTable.SubjectBlock = ExpectedResult.SubjectBlock)
WHERE (((SourceTable.SubjectBlockSeq)>=3) AND (ExpectedResult.NumRows=2)); 
```

并且附加到 [ExpectedResult] 的行是

```
DLID    NumRows Subject   Total SubjectBlock    NextSubjectBlockSeq
3       3       Science   205   1               4
4       3       Science   205   1               5
9       3       English   240   3               4 
```

**参数化**

由于每个连续的查询都非常相似，如果我们可以只编写一次并重复使用它会非常好。幸运的是，我们可以，如果我们把它变成一个“参数查询”：

```
PARAMETERS TargetNumRows Long;
INSERT INTO ExpectedResult ( DLID, NumRows, Subject, Total, SubjectBlock, NextSubjectBlockSeq )
SELECT SourceTable.DLID, [TargetNumRows] AS Expr1, SourceTable.Subject, 
    [ExpectedResult].[Total]+[SourceTable].[Total] AS NewTotal, 
    SourceTable.SubjectBlock, [SourceTable].[SubjectBlockSeq]+1 AS Expr2
FROM SourceTable INNER JOIN ExpectedResult 
    ON (SourceTable.SubjectBlock = ExpectedResult.SubjectBlock) 
        AND (SourceTable.SubjectBlockSeq = ExpectedResult.NextSubjectBlockSeq)
WHERE (((SourceTable.SubjectBlockSeq)>=[TargetNumRows]) 
    AND ((ExpectedResult.NumRows)=[TargetNumRows]-1)); 
```

创建一个新的 Access 查询，将上面的内容粘贴到 SQL 窗格中，然后将其另存为`pq_appendToExpectedResult`. （“pq_”只是一个视觉提示，它是一个参数查询。）

**从 VBA 调用参数查询**

您可以通过 QueryDef 对象在 VBA 中调用（执行）参数查询：

```
Dim cdb As DAO.Database, qdf As DAO.QueryDef
Set cdb = CurrentDb
Set qdf = cdb.QueryDefs("pq_appendToExpectedResult")
qdf!TargetNumRows = 4  '' parameter value
qdf.Execute
Set qdf = Nothing 
```

**何时停止**

现在您可以看到这只是递增`NumRows`和重新运行参数查询的问题，但是什么时候停止呢？这很容易：

在 VBA 中增加 NumRows 变量后，测试

```
DCount("DLID", "SourceTable", "SubjectBlockSeq=" & NumRows) 
```

如果它返回 0 那么你就完成了。

**给我看（全部）代码**

对不起，不是马上。;) 玩这个，让我们知道它是怎么回事。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T10:11:07.770

您的问题是：“请建议如何加快速度。更好的算法/代码改进/不同的代码语言请协助。”

简而言之，我可以快速回答您的*部分*问题。“编码的不同语言” == SQL。

详细地：

无论您要实现什么，看起来都是数据集密集型的。我几乎可以肯定，在存储您的数据的 DBMS 中，这种处理将得到更有效的处理，因为 DBMS 能够根据自己对您正在查询的数据的了解，进行（编写得相当好的）SQL 查询并对其进行优化，并非常快速有效地对大型数据集/子集进行聚合。

逐行迭代大型数据集以累积值很少（我敢说*从不*）会产生可接受的性能。这就是为什么 DBMS 本身不这样做的原因（如果您不通过使用迭代代码或需要调查每一行的代码（例如您的 VB 代码）来强制它们这样做）。

* * *

**现在，为了实现**更好的算法/代码改进/不同的语言。

我已经在 SQL 中完成了此操作，但无论您是否使用我的解决方案，如果您发现您对 MS Access 的使用将您绑定到，我仍然*强烈*建议您将数据迁移到例如 MS SQL 或 Oracle 或 mySql 等迭代方法（这并不是说它*正在*这样做......我不知道是否是这种情况）。

但是，如果这真的不是功课，和/或您真的与 MS Access 相关联，那么也许将其转换为 MS Access 的努力投资可能会在性能方面取得丰硕成果。原则应该都是一样的——它是一个关系数据库，这都是相当标准的 SQL，所以我认为我在这里所做的事情会有 Access 等价物。

如果做不到这一点，您应该能够将 MSSQL 实例“指向”MS Access 文件，作为通过 Access 提供程序的链接服务器。如果你想得到这方面的建议，请告诉我。

这里有一些代码本质上是程序性的，以便设置一些“帮助”表，允许使用基于集合的操作完成序列上的繁重聚合。

我已将源表称为“Your_Source_Table”。对所有实例进行搜索替换，以将其重命名为您所称的任何名称。

另请注意，我没有在任何东西上设置索引......你应该这样做。我希望，应该为连接中涉及的所有列创建索引。检查执行计划以确保没有不必要的表扫描是明智的。

我使用以下内容创建了 Your_Source_Table：

```
-- Create Your apparent table structure
IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Your_Source_Table]') AND type in (N'U'))
    DROP TABLE [dbo].[Your_Source_Table]
GO
CREATE TABLE [dbo].[Your_Source_Table](
    [DLID] [int] NOT NULL,
    [Subject] [nchar](10) NOT NULL,
    [Total] [int] NOT NULL
) ON [PRIMARY]
GO 
```

并将其填充为：

```
DLID        Subject    Total
----------- ---------- -----------
1           Science    70
2           Science    70
3           Science    70
4           Science    70
5           Maths      80
6           Maths      80
7           English    90
8           English    90
9           English    90
10          Science    75 
```

然后，我创建了以下“助手”。代码中的解释。

```
-- Set up helper structures.

-- Build a number table
if object_id('tempdb..##numbers') is not null
    BEGIN DROP TABLE ##numbers END
SELECT TOP 10000 IDENTITY(int,1,1) AS Number -- Can be 700, 800, or 900 contiguous rows, depending on which comment I read.  So I'll run with 100000 to be sure :-)
    INTO ##numbers
    FROM sys.objects s1
    CROSS JOIN sys.objects s2
ALTER TABLE ##numbers ADD CONSTRAINT PK_numbers PRIMARY KEY CLUSTERED (Number)

-- Determine where each block starts.
if object_id('tempdb..#tempGroups') is not null
    BEGIN DROP TABLE #tempGroups END
GO
CREATE TABLE #tempGroups (
    [ID] [int] NOT NULL IDENTITY,
    [StartID] [int] NULL,
    [Subject] [nchar](10) NULL
) ON [PRIMARY]

INSERT INTO #tempGroups
    SELECT t.DLID, t.Subject FROM Your_Source_Table t WHERE DLID=1
    UNION
    SELECT 
        t.DLID, t.Subject
    FROM
        Your_Source_Table t
        INNER JOIN Your_Source_Table t2 ON t.DLID = t2.DLID+1 AND t.subject != t2.subject

-- Determine where each block ends
if object_id('tempdb..##groups') is not null
    BEGIN DROP TABLE ##groups END
CREATE TABLE ##groups (
    [ID] [int] NOT NULL,
    [Subject] [nchar](10) NOT NULL,
    [StartID] [int] NOT NULL,
    [EndID] [int] NOT NULL
) ON [PRIMARY]
INSERT INTO ##groups
SELECT
    g1.id as ID,
    g1.subject,
    g1.startID as startID,
    CASE
        WHEN g2.id is not null THEN g2.startID-1
        ELSE (SELECT max(dlid) FROM Your_Source_Table) -- Boundary case when there is no following group (ie return the last row)
    END as endID
FROM
    #tempGroups g1
    LEFT JOIN #tempGroups g2 ON g1.id = g2.id-1

DROP TABLE #tempGroups;
GO

-- We now have a helper table called ##groups, that identifies the subject, start DLID and end DLID of each continuous block of a particular subject in your dataset.
-- So now, we can build up the possible sequences within each group, by joining to a number table.
if object_id('tempdb..##sequences') is not null
    BEGIN DROP TABLE ##sequences END
CREATE TABLE ##sequences (
    [seqID] [int] NOT NULL IDENTITY,
    [groupID] [int] NOT NULL,
    [start_of_sequence] [int] NOT NULL,
    [end_of_sequence] [int] NOT NULL
) ON [PRIMARY]
INSERT INTO ##sequences
SELECT
    g.id,
    ns.number start_of_sequence,
    ne.number end_of_sequence
FROM
    ##groups g

    INNER JOIN ##numbers ns
    ON ns.number <= (g.endid - g.startid + 1) -- number is in range for this block

    INNER JOIN ##numbers ne
    ON ne.number <= (g.endid - g.startid + 1) -- number is in range for this block
    and ne.number >= ns.number -- end after start
ORDER BY
    1,2,3 
```

然后，您所追求的结果可以通过一个基于集合的操作来实现：

```
-- By joining groups to your dataset we can add a group identity to each record.
-- By joining sequences we can generate copies of the rows for aggregation into each sequence.
select 
    min(t.dlid) as ID, -- equals (s.start_of_sequence + g.startid - 1) (sequence positions offset by group start position)
    count(t.dlid) as number_of_rows,    
    g.subject,
    sum(t.total) as total

--select *
from
    Your_Source_Table t

    inner join ##groups g
    on t.dlid >= g.startid and t.dlid <= g.endid -- grouping rows into each group.

    inner join ##sequences s
    on s.groupid = g.id -- get the sequences for this group.
    and t.dlid >= (s.start_of_sequence + g.startid - 1) -- include the rows required for this sequence (sequence positions offset by group start position)
    and t.dlid <= (s.end_of_sequence + g.startid - 1)

group by
    g.subject,
    s.seqid

order by 2, 1 
```

**但请注意：** 此结果与您的“预期结果”不完全相同。您错误地包含了从第 1 行开始的 1 行序列的重复实例（对于科学，总和 1*70=70），但未包括从第 1 行开始的 4 行序列（对于科学，总和 4*70 = 280)。

正确的结果，恕我直言：

```
ID          number_of_rows subject    total
----------- -------------- ---------- -----------
1           1              Science    70 <-- You've got this row twice.
2           1              Science    70
3           1              Science    70
4           1              Science    70
5           1              Maths      80
6           1              Maths      80
7           1              English    90
8           1              English    90
9           1              English    90
10          1              Science    75
1           2              Science    140
2           2              Science    140
3           2              Science    140
5           2              Maths      160
7           2              English    180
8           2              English    180
1           3              Science    210
2           3              Science    210
7           3              English    270
1           4              Science    280 <-- You don't have this row.

(20 row(s) affected) 
```

# python - 如何在 Django 1.5 中获取 FilePathField 的所有可用值？

> ID：15584952
> 
> 赞同：3
> 
> 时间：2013-03-23T08:47:21.953
> 
> 标签：python, django

我有一个模型，它有`FilePathField`属性。它有一个要搜索的文件夹、要匹配的正则表达式和其他需要的参数。

我需要一种标准方法来获取此`FilePathField`路径的所有可用列表。或者它不存在？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T18:54:30.920

不，没有。`path`您可以使用和编写自己`match`的`recursive`。但是，这是管理小部件表单`FilePathField`获取所有路径的方式 - [https://github.com/django/django/blob/master/django/forms/fields.py#L999](https://github.com/django/django/blob/master/django/forms/fields.py#L999)

```
from django.forms.fields import FilePathField
a = FilePathField(path='/path')
print a.choices 
```

# ios - 自定义协议不起作用

> ID：15584961
> 
> 赞同：0
> 
> 时间：2013-03-23T08:48:48.290
> 
> 标签：ios, objective-c

在我正在开发的应用程序中，我有一个子类`UIViewController`和一个`UIView`子类。在`storyboard`视图控制器中包含`UIview`. 在 uiview 我正在绘制一些东西，但我需要它知道它应该从视图控制器获取的一些值。所以我在视图控制器 .h 文件中创建了一个自定义协议：

```
@protocol SSGraphViewControllerProtocol <NSObject>

- (void)numberOfSemesters:(int)number;

@end

@property (weak, nonatomic) id <SSGraphViewControllerProtocol> delegate; 
```

在`UIView`课堂上，我确认它具有上述协议，并实现了它的方法。然而。当我从视图控制器传递一个数字时，`UIView`没有收到它。使用 NSLog，我发现`UIView`没有进入`- (void)numberOfS:(int)number;`是我做错了什么吗？我该如何解决？还有另一种方法可以将数据从`UIViewController`类发送到`UIView`控制器吗？

这是完整的代码：UIViewController.h

```
@protocol SSGraphViewControllerProtocol <NSObject>

- (void)numberOfSemesters:(int)number;

@end

@interface SSGraphViewController : UIViewController
@property (weak, nonatomic) id <SSGraphViewControllerProtocol> delegate;
@end 
```

UIViewController.m

```
@implementation SSGraphViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    [self.delegate numberOfSemesters:2];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}
@end 
```

UIView.h

```
@interface SSGraph : UIView <SSGraphViewControllerProtocol>
@end 
```

UIView.m

```
static int numberOfS = 0;

@implementation SSGraph

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }

    SSGraphViewController *graph = [[SSGraphViewController alloc] init];
    graph.delegate = self;
    return self;
}

- (void) numberOfSemesters:(int)number{NSLog(@"YES");
    numberOfSemesters= number;
}

// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T08:53:09.403

阅读本文，这是描述的最佳示例

[http://css.dzone.com/articles/do-not-publishcreating-your](http://css.dzone.com/articles/do-not-publishcreating-your)

[另请阅读创建协议](https://stackoverflow.com/questions/626898/how-do-i-create-delegates-in-objective-c)

下面我描述了如何创建协议的简单示例

```
#DetailViewController.h

#import <UIKit/UIKit.h>

@protocol MasterDelegate <NSObject>
-(void) getButtonTitile:(NSString *)btnTitle;
@end

@interface DetailViewController : MasterViewController

@property (nonatomic, assign) id<MasterDelegate> customDelegate; 

#DetailViewController.m

if([self.customDelegate respondsToSelector:@selector(getButtonTitile:)])
{
          [self.customDelegate getButtonTitile:button.currentTitle];    
}

#MasterViewController.m

create obj of DetailViewController

DetailViewController *obj = [[DetailViewController alloc] init];
obj.customDelegate = self;
[self.navigationController pushViewController:reportTypeVC animated:YES];

and add delegate method in MasterViewController.m for get button title.

#pragma mark -
#pragma mark - Custom Delegate  Method

-(void) getButtonTitile:(NSString *)btnTitle;
{
    NSLog(@"%@", btnTitle);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T10:14:31.637

您正在 initWithFrame: 内创建一个视图控制器实例，将其委托分配给 self，然后不保留对控制器的引用或将其视图添加到视图层次结构中。这当然不是你的本意。而是在情节提要中建立连接，方法是将委托属性设置为 IBOutlet 并通过右键单击视图控制器并从属性名称旁边的圆圈拖动到视图实例来连接它们。

顺便说一句，我不相信以这种方式使用协议的效用。如果视图需要知道一些信息来完成它的工作，如果应该暴露一些可以由控制器设置的属性，或者声明一个 dataSource 协议并查询它的数据源，而不是依赖于视图控制器定义它需要的接口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T10:34:41.837

```
// Add an observer to your ViewController for some action in uiview
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(receiveActionNotification:)
                                             name:@"someActionNotification"
                                           object:nil];

// Post Notification and method in your Viewcontroller will be called
[[NSNotificationCenter defaultCenter] postNotificationName:@"someActionNotification" object:self];

// at the end Dont forget to remove Observer.
[[NSNotificationCenter defaultCenter] removeObserver:@"someActionNotification"]; 
```

# facebook - 如何获取特定用户的 facebook 公共事件？

> ID：15584963
> 
> 赞同：1
> 
> 时间：2013-03-23T08:49:08.510
> 
> 标签：facebook, facebook-fql

我想通过其用户 ID 获取我的帐户或任何特定用户的所有事件。下面的查询返回空数组。有什么问题？如果需要任何许可，我可以从哪里更改它？

```
SELECT eid, name, pic, creator FROM event WHERE eid IN (SELECT eid FROM event_member WHERE uid=12345) AND creator=12345 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T09:39:28.643

### 权限

*   获取已连接用户的事件：`user_events`,
*   获取连接用户的朋友的事件：`friends_events`,
*   获取随机用户的事件：没有权限，即**无法**获取他的事件。

### 查询

```
SELECT eid, name, pic, creator 
  FROM event 
 WHERE eid IN (SELECT eid FROM event_member WHERE uid=12345) 
      AND creator=12345 
```

你想得到什么？此查询获取创建事件并参与其中的用户的事件。问题是，当用户创建事件时，他会自动参与其中。

让我建议你两个查询：

*   获取用户参与的事件。这将包括用户创建的事件。

    `SELECT eid, name, pic, creator FROM event WHERE eid IN (SELECT eid FROM event_member WHERE uid=12345)`

*   **仅**获取用户创建的事件：

    `SELECT eid, name, pic, creator FROM event WHERE creator=12345`

# python - Python for 循环参数

> ID：15584972
> 
> 赞同：-1
> 
> 时间：2013-03-23T08:51:36.223
> 
> 标签：python, jes

嗨，我只是想知道 4 在这段代码中会做什么

```
for y in range(0, height, 4): 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T08:57:10.437

范围只有一个参数：end。

范围有两个参数：开始，结束。

范围包含三个参数：开始、结束、步长。

所以在你的具体情况下

```
 for y in range(0, height, 4) 
```

0, 4, 8, ..., n，其中 n < 高度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T08:56:59.393

for 循环中使用的 range 函数中的 4 表示增量步长。假设 height 的值为 20。那么在 for 循环的后续迭代中，y 的值将设置为 0, 0+4=4, 4+4=8, ... 直到 20。

有关范围函数的更详细说明，请查看以下 python 文档： [http ://docs.python.org/2/library/functions.html#range](http://docs.python.org/2/library/functions.html#range)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T09:04:21.113

每次击中范围时加 4。例如，

```
 for y in range(0, 14, 4) 
```

你会得到 0, 4, 8, 12

# eclipse - GWT / Eclipse 慢：无法使用（win7 / Juno 安装）

> ID：15584979
> 
> 赞同：1
> 
> 时间：2013-03-23T08:53:13.637
> 
> 标签：eclipse, performance, gwt

我有 Eclipse Juno + 最新的 GWT（GPE 3.1.2+ SDK 2.5.1）。
它只是无法使用：

1.  只是偶尔挂断（一天十次），所以我必须杀死并重新启动
2.  充其量非常慢，这意味着在 UI 响应微不足道之前等待几分钟

经过WEB调查，我做了：

1.  在 eclipse.ini 中增加了 JVM 资源
2.  定期清除项目文件夹“gwt-unitCache”

出于某种原因，我还在 Indigo 上尝试了 GWT（因为 GWT Designer 在 Juno 上无法正常运行），但它是一样的。
问题似乎还在其他地方。
由于谷歌错误列表上发布了性能问题，我不太确定我的立场。

所以我的问题：

1.  有没有人使用 Eclipse/GWT [在 Windows 上表现不错？（是与 Windows 相关的问题——我对此表示怀疑）]
2.  任何人都可以提供一组可以导致稳定配置的配置说明吗？- 或者解释要避免的陷阱？

在去 Vaadin 之前，我想妥善处理 GWT，但我差点放弃它。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-11T22:47:35.963

我会添加内存。对于开发机器来说，4 gigs 听起来很渺茫。运行一些应用程序的操作系统将占用 2 个演出。开始 eclipse，那是另一场演出或两场演出很容易。然后你开始在 Eclipse 中运行 jetty 进行另一场或 2 场演出，现在你正在访问你的虚拟内存/页面文件，这将大大减慢它的速度。

运行 Firefox 什么都不做，然后查看单个选项卡来测试我的应用程序是 200MB 的 RAM。我的一些 chrome 标签很容易达到 100MB。只需计算每个浏览器选项卡会占用您 4 个演出的 3-5%。

我会说在 64 位操作系统上获得至少 16GB 的空间，如果不是 4 个，每个给 eclipse 和 jetty 至少 2 个演出。固态磁盘 (SSD) 也有很大帮助，因为编译会进行大量随机读写。

这是调试设置的屏幕截图，其中包含 3 GB 的 RAM 和一些额外的 permgen 空间，用于随后的页面刷新。请记住，如果您的物理 RAM 用完并且它开始访问页面文件，这些设置将不会提高性能！ ![Eclipse GWT 调试设置以获得更多 ram 和 permgen 空间](../Images/51942b1efe331ab72292b273fdd0f3da.png)

# c - 在 GCC 中使用不同版本的 SSE 内在函数的正确方法是什么？

> ID：15584983
> 
> 赞同：15
> 
> 时间：2013-03-23T08:54:04.560
> 
> 标签：c, gcc, sse, intrinsics

我会举一个例子来问我的问题。现在我有一个名为`do_something()`.

它具有三个版本：`do_something()`、`do_something_sse3()`和`do_something_sse4()`。当我的程序运行时，它会检测 CPU 功能（查看它是否支持 SSE3 或 SSE4）并相应地调用三个版本之一。

**问题是：**当我用 GCC 构建我的程序时，我必须设置`-msse4`为`do_something_sse4()`编译（例如，`<smmintrin.h>`要包含头文件）。

但是，如果我设置`-msse4`了 ，则允许 gcc 使用 SSE4 指令，并且其中的一些内在函数`do_something_sse3()`也被翻译为一些 SSE4 指令。因此，如果我的程序在仅支持 SSE3（但不支持 SSE4）的 CPU 上运行，则会在调用`do_something_sse3()`.

也许我有一些不好的做法。你能给一些建议吗？谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-23T09:16:20.453

我认为 Mystical 的提示很好，但是如果您真的想在*一个*文件中执行此操作，则可以使用适当的[pragmas](http://gcc.gnu.org/onlinedocs/gcc/Function-Specific-Option-Pragmas.html)，例如：

```
#pragma GCC target("sse4.1") 
```

需要 GCC 4.4，AFAIR。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T08:38:40.637

我认为您想要构建所谓的“CPU 调度程序”。我有一个（据我所知）为 GCC 工作，但没有让它与 Visual Studio 一起工作。
[用于 AVX 和 SSE 的 Visual Studio 的 CPU 调度程序](https://stackoverflow.com/questions/15406658/cpu-dispatcher-for-visual-studio-for-avx-and-sse)

我会检查 Agner Fog 的矢量类和文件 dispatch_example.cpp [http://www.agner.org/optimize/#vectorclass](http://www.agner.org/optimize/#vectorclass)

```
g++ -O3 -msse2   -c dispatch_example.cpp -od2.o
g++ -O3 -msse4.1 -c dispatch_example.cpp -od5.o
g++ -O3 -mavx    -c dispatch_example.cpp -od8.o
g++ -O3 -msse2      instrset_detect.cpp d2.o d5.o d8.o 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T05:04:37.813

以下是为每个优化设置编译单独的目标文件的示例：http: [//notabs.org/lfsr/software/index.htm](http://notabs.org/lfsr/software/index.htm)

但是，当使用 gcc 链接时间优化 (-flto) 时，即使这种方法也会失败。那么如何构建一个针对不同处理器进行全面优化的可执行文件呢？我能找到的唯一解决方案是使用包含指令使 C 文件表现为单个编译单元，因此不需要 -flto。这是使用该方法的示例：http: [//notabs.org/blcutil/index.htm](http://notabs.org/blcutil/index.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-17T13:20:31.540

`-march=XXX`如果您在 i686 或 x86_64 机器上使用 GCC 4.9 或更高版本，那么无论您的和`-mXXX`选项如何，您都应该能够使用内在函数。你可以相应地写你的`do_something()`：

```
void do_something()
{
    byte temp[18];

    if (HasSSE2())
    {
        const __m128i i = _mm_loadu_si128((const __m128i*)(ptr));
        ...
    }
    else if (HasSSSE3())
    {
        const __m128i MASK = _mm_set_epi8(12,13,14,15, 8,9,10,11, 4,5,6,7, 0,1,2,3);
        _mm_storeu_si128(reinterpret_cast<__m128i*>(temp),
           _mm_shuffle_epi8(_mm_loadu_si128((const __m128i*)(ptr)), MASK));
    }
    else
    {
        // Do the byte swap/endian reversal manually
        ...
    }
} 
```

你必须供应`HasSSE2()`，`HasSSSE3()`和朋友。另请参阅[CPUID 之类的内部信息？](https://stackoverflow.com/q/17758409/608639).

另请参阅[GCC 问题 57202 - 请使 immintrin.h 等内在函数头文件在没有编译器标志的情况下可用](https://gcc.gnu.org/bugzilla/show_bug.cgi?id=57202)。但我不相信该功能有效。我经常遇到编译失败，因为 GCC 不提供内在函数。

# javascript - Jquery路径未在Django中加载

> ID：15584988
> 
> 赞同：0
> 
> 时间：2013-03-23T08:54:59.330
> 
> 标签：javascript, jquery, python, django

我想使用这个[插件](http://www.patrick-wied.at/static/watermarkjs/)在我的 django 网站中为图像添加水印。按照说明操作后，我在我的 django 环境中尝试后使其在纯 html 服务器（wampserver）中工作，但它不工作。

HTML (wampserver)

```
html lang="en">
<title>cool</title>
<head>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"  type="text/javascript"></script>
<script type="text/javascript" src="js/jquery-1.7.1.min.js"></script>

</head>
<body>
<script type="text/javascript" src="js/watermark.jquery.js"></script>
<script type="text/javascript" src="js/watermark.jquery.min.js"></script>
    <script language="javascript">
    var config = {
        "path": "images/watermark.png"};
     $(document).ready(function() {
     $(document).watermark(config);
    });
</script>

    <img src="images/hall1.jpg" alt="" class="watermark"/>
    <img src="images/hall3.jpg" alt="" title="This is an example of a caption" class="watermark"/>
    <img src="images/main.jpg" alt="" class="watermark"/>

</body>
</html> 
```

上面的代码工作正常。

Django 环境（不工作）

```
 </head>
  <body>    
   <script type="text/javascript" src="{{MEDIA_URL}}/css/watermark.jquery.js"></script>
   <script type="text/javascript" src="{{MEDIA_URL}}/css/watermark.jquery.min.js"></script>
    <script language="javascript">
    var config = {
        "path": "/media/css/watermark.png" };
     $(document).ready(function() {
     $(document).watermark(config);
    });
  </script>

  <li><img src="{{ MEDIA_URL }}/{{post.main}}" class="watermark"/> </li>
  <li><img src="{{ MEDIA_URL }}/{{post.side}}" class="watermark"/> </li>
  <li><img src="{{ MEDIA_URL }}/{{post.sitting}}" class="watermark"/> </li>

  </body> 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T09:16:20.020

如果你想处理你的静态文件，比如你的 css/js 文件，那么你必须使用[`STATIC_URL`](https://docs.djangoproject.com/en/dev/ref/settings/#static-url).

```
 <script type="text/javascript" src="{{ STATIC_URL }}/css/watermark.jquery.js"></script>
   <script type="text/javascript" src="{{ STATIC_URL }}/css/watermark.jquery.min.js"></script> 
```

所以同样的方式将用于`watermark.png`路径：

```
"path": "{{ STATIC_URL }}/css/watermark.png" 
```

还要考虑到[`MEDIA_ROOT`](https://docs.djangoproject.com/en/dev/ref/settings/#media-root)你可以参考它的地方[`MEDIA_URL`](https://docs.djangoproject.com/en/dev/ref/settings/#media-url)是绝对文件系统路径到将保存[用户上传文件](https://docs.djangoproject.com/en/dev/topics/files/)的目录不是你的资产的正确位置，你应该正确配置它然后你将能够通过`STATIC_URL`.

有关此主题的更多信息：

*   [管理静态文件](https://docs.djangoproject.com/en/dev/howto/static-files/)
*   [静态文件应用](https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/)

# java - 从哪里获取 netbeans 项目的 .java 文件？

> ID：15584993
> 
> 赞同：3
> 
> 时间：2013-03-23T08:56:40.340
> 
> 标签：java, netbeans

您可能会注意到，我对 netbeans 和一般编程很陌生。

我一直在做一个小项目（家庭作业），现在我需要其中一个包中的 .java 文件。当我构建项目时，我得到一个包含所有类的 .jar 存档。当我编译我需要的包时，我得到了这个包的 .class 文件的 .jar 存档（在项目的“build”文件夹中）。但是，我需要这个包的 .java 文件的 zip 存档。我有点不好意思问，但我从哪里得到这些？

谢谢赵楠

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T10:09:48.203

如果您在 Windows 上，通常如果您让 netbeans 自行创建所有内容，它会创建一个名为

```
NetbeansProjects 
```

在“文件”下

将有一个包含所有项目的文件夹列表。在您感兴趣的项目名称下，进入“src”文件夹。你所有的java文件都应该在那里。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T10:20:24.137

从`Projects`窗户`(Window-->Projects)`或`Ctri-1`

导航到所需的 .java 文件，右键单击它，然后选择`Properties`. 文件的路径如下所示`All Files`。

要在项目`right-click`名称上（在`Projects`窗口中）查看项目的路径，选择`Properties`，项目文件夹显示在下面`Sources-->Project Folder`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-02T01:03:08.967

在使用 NetBeans IDE 8.2 的 Ubuntu 16.04 上，在我的根目录中创建了一个名为 NetBeansProjects 的文件夹，与 netbeans-8.2 目录平行。我猜这是在安装时建议的，并且可以进行不同的配置。

# android - Eclipse 告诉我资源已经存在，但它不存在

> ID：15584995
> 
> 赞同：0
> 
> 时间：2013-03-23T08:56:57.950
> 
> 标签：android, eclipse, android-resources

我在 Eclipse 中遇到了一个奇怪的错误。在编辑某些按钮的 ID 时，由于某种原因 Eclipse 关闭而没有发出任何警告。所以我重新启动了 Eclipse，因为我没有保存我的编辑而感到恼火，一切都回到了我上次保存的状态。所以我再次开始重命名按钮，但现在 Eclipse 告诉我资源 ID 已经存在，但它不存在。所以我尝试清理项目，但问题仍然存在。R.Java 会保留这些 ID，即使它们已从我的项目中删除。因此，我使用 Notepad++ 检查了我的工作区文件，但这些 ID 不再存在。因此，任何人都知道为什么这些 ID 不断出现在 R.Java 中，而我的项目查看器甚至文件本身都不存在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T09:36:43.987

通常，当遇到与 ID 相关的问题时，不费吹灰之力的解决方法就是简单地*清理项目*。还要清理所有包含的项目库（如果适用），因为它们也具有生成的带有 ID 的 R.java 文件。

有时 Eclipse 自动导入会`android.R.java`导致问题 - 这不是您要导入的文件，而是您想要自己的 R.java `your.project.R`、.

如果这没有帮助，问题通常是项目没有正确构建，因此没有生成提到的`R.java`. 检查您的资源文件，很可能某些 xml 文件无效，在项目构建之前需要注意。

*   清洁项目
*   确保未导入 android.R
*   确保 your.project.R 已导入
*   如果没有生成 R.java，则在 res 文件夹中查找无效的 xml
*   有时重启 Eclipse 确实有帮助，而且你不能清理项目太多次

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T10:52:30.077

我想到了！这是我自己的错误，我更改了具有标准名称的按钮的 ID，例如 button1、button2 等。我选中了更新引用框，但在其他 XML 文件中，一些按钮仍然具有标准 ID。所以他们 2 更新了新名称。因此，在我的第二次编辑中，那些留下旧 ID 的人。