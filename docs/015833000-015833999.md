# StackOverflow 问答 15833000-15833999

# doctrine-orm - 当有多个结果时，Doctrine2 createNativeQuery 返回一个具有一个结果的对象

> ID：15833005
> 
> 赞同：0
> 
> 时间：2013-04-05T11:39:37.687
> 
> 标签：doctrine-orm

我有以下 Doctrine2 代码：

```
$sql = 'SELECT user_name, user_email FROM users';

$rsm = new ResultSetMapping();
$rsm->addEntityResult('Entity\Users', 'u');
$rsm->addFieldResult('u', 'user_name', 'userName');
$rsm->addFieldResult('u', 'user_email', 'userEmail');

$query = $this->em->createNativeQuery($sql, $rsm);
$users = $query->getResult(); 
```

它为第一个用户返回一个包含 1 个项目的数组。但是，如果我将其更改为

```
$users = $query->getArrayResult(); 
```

它按预期返回完整的用户集。谁能看到这里有什么问题？

谢谢！

PS 是的，我知道这个简单的查询不需要 createNativeQuery，但是我的真实查询对于 QueryBuilder 或 DQL 来说太复杂了，我已经对其进行了简化以查看问题是否出在查询上。它不是。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-29T00:08:06.233

( `ArrayHydrator`used by `getArrayResult`) 检查您的查询是否只有 1 个 EntityResult 映射，如果是这样，即使在为该 EntityResult 别名设置了 identifierMap 之后，它也会继续填充结果数组。无论出于何种原因，`ObjectHydrator`(used by `getResult`) 都不会执行该检查，因此它会在设置第一个值后停止填充数组。

您可以通过查看自己来查看`ArrayHydrator->_isSimpleQuery`

# xml - 索引 JSON 或 XML

> ID：15833006
> 
> 赞同：1
> 
> 时间：2013-04-05T11:39:41.987
> 
> 标签：xml, json, nosql, redis

将字符串存储在 NoSQL 数据库中时，广泛使用的索引技术是`JSON`什么？`XML``Redis`

我知道类似数据库`MongoDB`已经提供了这个，但是我想了解当我将使用键值存储时如何实现这个，比如`Redis`or `Voldemort`。

这样：

*   它将允许平滑搜索或查询节点实体键或值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:28:23.713

使用纯键/值存储，您应该维护一组额外的键来模拟二级索引。

例如，您可以存储：

```
user:1   ->   { id:1, firstname:Bilbo, lastname:Baggins, race:hobbit }
user:2   ->   { id:2, firstname:Peregrin, lastname:Took, race:hobbit } 
```

接着：

```
firstname:Bilbo   -   > [1]
lastname:Baggins     -> [1]
firstname:Peregrin   -> [2]    
lastname:Took        -> [2]
race:hobbit          -> [1,2] 
```

要查找 hobbit 用户，获取 race:hobbit 的值，然后对于每个返回的 id，获取 user:id。

当然，对于纯键/值存储（例如 memcached），很难管理具有低基数的索引（即，给定值的大量条目）。

使用 Redis，由于它支持 set 和 hash 数据类型，因此更容易。此外，redis 集的交集/并集是使用逻辑 AND/OR 表达式实现查询的便捷方式。

另请参阅以下问题：

[如何在redis中建立多对多关系](https://stackoverflow.com/questions/10907942/how-to-have-relations-many-to-many-in-redis/10917710#10917710)

[从 SQLite 移植到 Redis](https://stackoverflow.com/questions/10794142/porting-from-sqlite-to-redis/10795541#10795541)

Project Voldemort 还支持可用于类似目的的列表存储（前提是每个值没有太多条目）。

# php - 如何将jquery变量传递给php然后显示它

> ID：15833008
> 
> 赞同：3
> 
> 时间：2013-04-05T11:39:47.407
> 
> 标签：php, javascript, jquery

将 Jquery 变量传递给 php 时出现问题。

当我将变量 id 传递给`B.php` 我收到此错误

```
"Notice: Undefined index: id1 in C:\xampp  \htdocs\PhpProject1\OtherUsableItems\B.php on line 2 
```

如何解决这个问题呢 ？？？？这`A.php`

```
<html>
<head>
<script src="jquery.js"></script>
<script>
$(document).ready(function(){
  var id = 23; 
$("#submit").click(function(){
 $.post("B.php",
 {
     id1: id,

  } );      
   });
  });
 </script>
 </head>
 <body>
 <form action="B.php" method="post" >
 <input type="submit" id="submit" name="submit"/> 
 </form>
 </body>
 </html> 
```

这`B.php`

```
 <?php
   $a =$_POST['id1'];
   echo $a ;
   ?> 
```

我希望 id 变量传递给`B.php`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T11:48:11.137

试试这个：

```
<html>
<head>
<script src="jquery.js"></script>
<script>
$(document).ready(function(){
  var id = 23; 
$("#submit").click(function(){
 $.ajax(
    {
    url: "B.php",
    type: "POST",

    data: { id1: id},
    success: function (result) {
            alert('success');

    }
});     
   });
  });
 </script>
 </head>
 <body>
 <form  >
 <input type="button" id="submit" name="submit"/> 
 </form>
 </body>
 </html> 
```

然后B.php

```
<?php
   $a =isset($_POST['id1'])?$_POST['id1']:'not yet';
   echo $a ;
   ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T11:44:21.430

尝试将输入类型更改为按钮而不是提交 `<input type="button" id="submit" name="submit"/>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T11:48:01.510

问题是您的表单已提交，`$.post`用于 ajax sumit。为此，您需要阻止表单提交。

```
<script>
     $(document).ready(function(){
        var id = 23; 
        $("#submit").click(function(){
           $.post("B.php",
           {
              id1: id,

           });  
           event.preventDefault() ;
        });    
    });
</script> 
```

添加`event.preventDefault();`您的按钮单击功能

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T11:44:00.237

```
$(document).ready(function(){
  var id = 23; 
  $("#submit").click(function(e){
     $.post("B.php", {id1: id} );     
     e.preventDefault();
   });
 }); 
```

试试上面的代码。首先：JS 不允许做这样的事情：（`{id1: id,}`见最后的逗号）。这是 PHP 的一个特性。实际上，你的 JS 代码根本不应该被执行，因为这是一个语法错误（假设你会在浏览器的控制台中找到它）

另一个问题：您必须防止默认提交表单。`e.preventDefault()`为此需要。没有它，将启动 ajax 发布，并且会发生比平常提交的表单。并且您的表单没有名称为 id1 的元素，假设第二个请求产生了该错误消息。

**编辑：** 这是通过常规提交发布一个值，因此浏览器被重定向到 B.php

```
$(document).ready(function(){
      var id = 23; 
      $("#submit").click(function(){
              $(this).closest("form")
                     .append($("<input>", {"type":"hidden", "name":"id1", "value":id}));
       });
     }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T11:44:40.150

试试这个：

```
<script>
$(document).ready(function(){
   var id = 23; 
   $("#submit").click(function(e){
     e.preventDefault();
     $.post("B.php", {id1: id}, function(data){ //<---get the data from B.php
        console.log(data);   //<--------show it here
        alert(data);
     });      
   });
  });
 </script> 
```

由于您使用的是 ajax 功能，因此您必须停止表单提交功能。您在这里有一个尾随逗号，`{id1 : id,}`这是 IE 浏览器中的一个问题，但最新的其他浏览器可以正常工作。

## 笔记：

您发布了此错误：

`"Notice: Undefined index: id1 in C:\xampp \htdocs......`

不要在文件系统中运行页面`$.post()`不会以这种方式工作。

而是尝试使用`http://localhost/yourapplication/page.php`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-05T11:49:00.677

使用隐藏字段设置您要发送的值。由于您使用的是提交，因此您的整个表单都已提交。隐藏字段也被发送，并且可以使用隐藏字段的名称直接访问。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-05T11:50:50.290

php 抛出 E_NOTICE 因为 POST-Array 的索引不存在。您可以切换 error_reporting 的通知，请参阅[http://www.php.net/manual/de/errorfunc.configuration.php#ini.error-reporting](http://www.php.net/manual/de/errorfunc.configuration.php#ini.error-reporting)或检查索引是否存在：

```
if( isset($_POST['id1']) )  {
// do something
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-05T12:08:08.750

试试这个代码，

```
 <html>
 <head>
 <script src="jquery.js"></script>
 <script>
 $(document).ready(function(){
 var id = 23; 
 $("#submit").click(function(){
 $('#id1').val(id);
 });
 });
</script>
 </head>
 <body>
 <form action="B.php" method="post" >
 <input type="submit" id="submit" name="submit"/> 
 <input type="hidden" name="id1" id="id1" value=""/>
</form>
</body>
</html> 
```

在这里您可以将 'id' 的值传递给 B.php，并将作为 $_POST['id1'] 访问

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-05T12:28:37.167

或者您可以通过这种方式使用 submit()

```
$(function(){
    var id = 23;
    $("#myform").submit(function() {
        $.post("B.php", { id1: id }).done(function(data) {
            alert( data );
        });
        return false; //true(post form data)
    });
}); 
```

并形成

```
<form id="myform" method="post">
<input type="submit" id="submit" name="submit" />
</form> 
```

**编辑：**哦，是的，对于 B.php isset check 或 error_reporting(0);

```
if(isset($_POST['id1'])){
    print_r( $_POST );
} 
```

# maven - Hamcrest 1.3 和 JUnit 4.11 的 NoSuchMethodError

> ID：15833015
> 
> 赞同：43
> 
> 时间：2013-04-05T11:40:18.503
> 
> 标签：maven, junit, junit4, maven-surefire-plugin, hamcrest

JUnit & Hamcrest 组合的另一个实例`NoSuchMethodError`。违规代码：

```
assertThat(dirReader.document(0).getFields(), hasItem(
    new FeatureMatcher<IndexableField, String>(equalTo("Patisnummer"), "Field key", "Field key") {
        @Override
        protected String featureValueOf(IndexableField actual) {
            return actual.name();
        } } )); 
```

[注释IndexerTest.java](https://github.com/kaspervandenberg/aida/blob/aida-9_linkXmlMetaDataAndAddFields/Search/Indexer/src/test/java/indexer/IndexerTest.java)中的第 152–157行（提交[ac72ce](https://github.com/kaspervandenberg/aida/commit/ac72ce1b73db8e48fa721bdce7d93a8ee36871bd)）

导致 NoSuchMethodError（有关完整输出，请参见[http://db.tt/qkkkTE78 ）：](http://db.tt/qkkkTE78)

```
java.lang.NoSuchMethodError: org.hamcrest.Matcher.describeMismatch(Ljava/lang/Object;Lorg/hamcrest/Description;)V
at org.hamcrest.FeatureMatcher.matchesSafely(FeatureMatcher.java:43)
at org.hamcrest.TypeSafeDiagnosingMatcher.matches(TypeSafeDiagnosingMatcher.java:55)
at org.hamcrest.core.IsCollectionContaining.matchesSafely(IsCollectionContaining.java:25)
at org.hamcrest.core.IsCollectionContaining.matchesSafely(IsCollectionContaining.java:14)
at org.hamcrest.TypeSafeDiagnosingMatcher.matches(TypeSafeDiagnosingMatcher.java:55)
at org.junit.Assert.assertThat(Assert.java:770)
at org.junit.Assert.assertThat(Assert.java:736)
at indexer.IndexerTest.testIndexContainsField(IndexerTest.java:152) 
```

## 设置：

*   JUnit 4.11
*   汉克雷斯特 1.3
*   使用 Maven 的 surefire 插件（2.14 版），该插件使用其 JUnitCoreProvider
*   Java 7 (OpenJDK)
*   参见[pom](https://github.com/kaspervandenberg/aida/blob/aida-9_linkXmlMetaDataAndAddFields/Search/Indexer/pom.xml)（提交[ac72ce](https://github.com/kaspervandenberg/aida/commit/ac72ce1b73db8e48fa721bdce7d93a8ee36871bd)）

## 背景：

A[`NoSuchMethodError`](http://docs.oracle.com/javase/7/docs/api/java/lang/NoSuchMethodError.html)是由调用不存在的方法的（编译的）类引起的。JUnit + Hamcrest 组合的具体情况`describeMismatch`通常是由 JUnit 中包含的 Hamcrest 类与 Hamcrest 库中这些类的版本之间的不兼容引起的。

## 解决 NoSuchMethodError 的尝试：

*   pom 包含对 Hamcrest-library 1.3、Hamcrest-core 1.3 和 JUnit 4.11 的显式依赖（按此顺序），正如[Garrett Hall](https://stackoverflow.com/users/554988/garrett-hall)在运行测试时在[回答](https://stackoverflow.com/a/7878281/814206)[Getting "NoSuchMethodError: org.hamcrest.Matcher.describeMismatch" 时所建议的那样智能 10.5](https://stackoverflow.com/questions/7869711/getting-nosuchmethoderror-org-hamcrest-matcher-describemismatch-when-running)

*   根据 JUnit 文档，JUnit 4.11 Maven 依赖不再包括已编译的 Hamcrest 类，而是依赖于 Hamcrest-core 1.3；所以不`NoSuchMethodError`应该发生。

*   [按照Dan](https://stackoverflow.com/users/545137/dan)在[回答](https://stackoverflow.com/a/15709116/814206)[junit 和 hamcrest 声明](https://stackoverflow.com/questions/15660807/junit-and-hamcrest-declaration)时的`mvn dependency:tree`建议检查依赖关系树，显示对 Hamcrest 1.3 和 JUnit 4.11 的显式依赖关系，并且对这些文件没有其他依赖关系（有关完整输出，请参见[http://db.tt/C2OfTDJB](http://db.tt/C2OfTDJB)）。

*   在另一项测试中`NoSuchMethodError`，通过使用以下方法避免了这种情况：

    ```
    assertThat(
        "Zylab detector not available",
        d.getDetectors(),
        hasItem(Matchers.<Detector>instanceOf(ZylabMetadataXmlDetector.class))); 
    ```

    在[IndexerTest.java](https://github.com/kaspervandenberg/aida/blob/aida-9_linkXmlMetaDataAndAddFields/Search/Indexer/src/test/java/indexer/IndexerTest.java) (commit [ac72ce](https://github.com/kaspervandenberg/aida/commit/ac72ce1b73db8e48fa721bdce7d93a8ee36871bd) ) 的第 120–123 行，而不是更明显的：

    ```
    assertThat(
        "Zylab detector not available",
        d.getDetectors(),
        hasItem(isA(ZylabMetadataDetector.class)); 
    ```

    我不确定显式类型参数`<Detector>`，使用`instanceOf`而不是`isA`，对 Hamcrest 的显式引用`Matchers`，或者这些的组合避免了`NoSuchMethodException`; 在摆弄并尝试不同的事情之后，它起作用了。

*   使用显式类型参数并不能解决/避免错误。

*   使用派生自的类`BaseMatcher`而不是`FeatureMatcher`没有解决/避免错误。

## 想法如何解决`NoSuchMethodError`？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2014-03-04T12:24:50.237

这个博客帮助我解决了同样的问题：

[https://tedvinke.wordpress.com/2013/12/17/mixing-junit-hamcrest-and-mockito-explaining-nosuchmethoderror/](https://tedvinke.wordpress.com/2013/12/17/mixing-junit-hamcrest-and-mockito-explaining-nosuchmethoderror/)

在 Mockito 和 Junit 的依赖项中，作者添加了排除：

```
<dependency>
    <groupId>junit</groupId>
    <artifactId>junit</artifactId>
    <version>4.11</version>
    <exclusions>
        <exclusion>
            <artifactId>hamcrest-core</artifactId>
            <groupId>org.hamcrest</groupId>
        </exclusion>
    </exclusions>
</dependency> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T00:04:13.933

也许其他 JAR 之一具有较旧版本的 Hamcrest`Matcher`或`BaseMatcher`. 这是包含后者[的 JAR 列表](http://www.findjar.com/class/org/hamcrest/BaseMatcher.html)，尽管我不知道该站点有多全面。是否有一个 Maven 插件可以向您显示包含类似于依赖树的类的所有依赖项？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T16:59:01.253

使用[David 的](https://stackoverflow.com/users/285873/david-harkness)提示以及[如何在 Bash 的分隔符上拆分字符串？](https://stackoverflow.com/questions/918886/split-string-based-on-delimiter-in-bash)导致以下 bash 脚本：

```
( IFS=":"; for i in `mvn dependency:build-classpath | grep -v '\[INFO\]'`; do jar tf $i | awk "{print \"$i\\t\" \$1}"; done | grep Matcher ) 
```

（在线[http://www.kaspervandenberg.net/2013/scripts/findDependencyClass.sh](http://www.kaspervandenberg.net/2013/scripts/findDependencyClass.sh)）

它发现依赖项`JGlobus-Core-2.0.4`有自己的`org.hamcrest.BaseMatcher`,`org.hamcrest.CoreMatchers`和`org.hamcrest.Matcher`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-25T00:12:52.737

如果您使用的是 Eclipse，“打开类型”工具 (CTRL+SHIFT+T) 可以帮助您找到有问题的包。只需搜索类名（例如，Description），来自不同 JAR 的同一类的多次出现是危险信号。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-10-22T23:38:22.390

对我有用的是重新排序依赖项。我不得不使用 junit, mockito 而不是 mockito, junit。

Mockito 1.9.5 使用 hamcrest 1.1，它不兼容并会导致问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-03-18T14:55:09.810

对于`Gradle`作为构建工具的项目：

```
testCompile("junit:junit:4.11") {
     exclude group: 'org.hamcrest', module: 'hamcrest-core'
     exclude group: 'org.hamcrest', module: 'hamcrest-library' 
}
testCompile group: 'org.hamcrest', name: 'hamcrest-core', version: '1.3'
testCompile group: 'org.hamcrest', name: 'hamcrest-library', version: '1.3' 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-07-14T08:50:13.943

如果您使用的是 Eclipse：对我来说，在 eclipse-> 项目属性->Java 构建路径中将 mockito-all-1.9.5.jar 移动到“订单和导出”列表的底部就可以了。就在上面我有 junit-4.11.jar 和上面那个 hamcrest-core-1.3.jar

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-06-07T14:57:52.990

我用下面的代码`jar hell`在我的项目中解决了这个问题：`Gradle`

```
 testCompile (group: 'junit', name: 'junit', version: '4+') {
        exclude group: 'org.hamcrest'
    }
    testCompile ('org.mockito:mockito-core:1+') {
        exclude group: 'org.hamcrest'
    }
    testCompile 'org.hamcrest:java-hamcrest:2.0.0.0' 
```

# php - php中奇怪的数组行为

> ID：15833018
> 
> 赞同：-1
> 
> 时间：2013-04-05T11:40:23.680
> 
> 标签：php, kohana

我正在挠头来理解 kohana.so 它要求在 kohana 的背景下处理我的问题，如果合适的话。在路线文件中，我正在观看类似的怪事

```
'route' => '(<controller>(/<action>(/<keyword>(/<start>(/<limit>)))))
//if i output this line i got noting but  ((/(/(/(/)))))
//it means angle brackets and words between them are not shown. 
```

现在我的问题是，在哪些情况下我们需要以这种方式编码。如果我们不需要尖括号和它们之间的单词，为什么我们会以这种方式工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T11:44:17.723

这不是奇怪的行为。

因为文档的默认内容类型是 HTML，它会将您的文本解析为标签。为了避免您必须使用函数回显[`htmlspecialchars()`](http://php.net/manual/en/function.htmlspecialchars.php)，或更改内容类型。

```
echo htmlspecialchars($array['route']);

// or

header('Content-Type: text/plain');
echo $array['route']; 
```

# icarousel - 如何删除默认的 iCarousel 项目居中位置？

> ID：15833025
> 
> 赞同：1
> 
> 时间：2013-04-05T11:40:45.337
> 
> 标签：icarousel

任何人都可以帮助我，如何通过示例删除默认的 iCarousel 项目居中位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T12:35:33.760

我遇到了同样的问题，并通过以下 hack 来解决；）

**问题：** 我需要只显示 3 个始终左对齐的项目的视图。

**解决方案：** 我所做的是始终至少制作 3 个项目。如果我有 0、1 或 2 个项目，我总是创建 3 个，但那些不需要显示的项目我将创建为空 UIView。我总是有 2 个占位符，但在某些情况下，一个或两个都是空的。

例如，如果我们要显示 2 个项目，我实际上创建了三个，但第三个是空的 UIView。我正在创建两个占位符和一个项目。

*   第一项是索引 0 处的第一个*占位符*
*   第二项是*项目*
*   第三项是第二个*占位符*，但 UIView 为空

如果我们要显示 1 个项目，我再次创建三个，但第二个和第三个是空的 UIView。与前面的示例相同，我正在创建两个占位符和一个项目。

*   第一项是索引 0 处的第一个*占位符*
*   第二项是*Item*但 UIView 为空
*   第三项是第二个*占位符*，但 UIView 为空

由于这种逻辑，我在重用时总是清理视图（[v removeFromSuperview]），以确保它是干净的，如果需要显示新视图，我正在添加它（[view addSubview ...）。*项目*和*占位符*的相同逻辑

 *如果您需要显示 3 个以上的项目，您可以使用相同的逻辑，但将值 3 更改为其他值。如果我错了更新我;）

这是我的代码的一部分，对我有用；）

```
- (NSUInteger)numberOfItemsInCarousel:(iCarousel *)carousel
{
    return [[self getRecordings] count] > 3? [[self getRecordings] count] - 2: 1;
}

- (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index reusingView:(UIView *)view
{
    if (view == nil)
    {
        view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 50, 30)];
    }
    else
    {
        // If reusing remove content from holder view for fake items
        for (UIView *v in view.subviews)
        {
            [v removeFromSuperview];
        }
    }

    if ([[self getRecordings] count] >= 2)
    {
        [view addSubview:[(RecordingItemViewController*)[_recordingItemViewControllers objectAtIndex:index + 1] view]];
    }

    return view;
}

- (NSUInteger)numberOfPlaceholdersInCarousel:(iCarousel *)carousel
{
    return 2;
}

- (UIView *)carousel:(iCarousel *)carousel placeholderViewAtIndex:(NSUInteger)index reusingView:(UIView *)view
{
    if (view == nil)
    {
        view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 50, 30)];
    }
    else
    {
    // If reusing remove content from holder view for fake items
        for (UIView *v in view.subviews)
        {
            [v removeFromSuperview];
        }
    }

    if (([[self getRecordings] count] > 0 && [[self getRecordings] count] < 3 && index == 0) || [[self getRecordings]count] >= 3)
    {
        [view addSubview:[(RecordingItemViewController*)(index == 0? [_recordingItemViewControllers objectAtIndex:0]: [_recordingItemViewControllers lastObject]) view]];
    }

    return view;
} 
```*

# sql - Oracle Date 数据类型，通过 SQL 转换为 'YYYY-MM-DD HH24:MI:SS TMZ'

> ID：15833030
> 
> 赞同：13
> 
> 时间：2013-04-05T11:41:00.740
> 
> 标签：sql, oracle, date, select

我有一个应用程序通过以下方式上传到 Oracle 数据类型列：

```
TO_TIMESTAMP_TZ('2012-10-09 1:10:21 CST','YYYY-MM-DD HH24:MI:SS TZR') 
```

我现在需要从此数据列中提取以下格式和时区：'YYYY-MM-DD HH24:MI:SS CDT'

注意：日期在 CST 中上传，但需要在 CDT 中返回。

我有谷歌，但只找到以下日期数据类型：

```
SELECT dateColumn From dateTable;
09-NOV-12

SELECT TO_CHAR(dateColumn,'YYYY-MM-DD HH24:MI:SS') From dateTable;
2012-10-09 1:10:21 
```

我也尝试了以下方法：

```
TO_TIMESTAMP_TZ(dateColumn,'YYYY-MM-DD HH24:MI:SS CDT')
data format not recognized

TO_TIMESTAMP_TZ(CRTE_DT,'YYYY-MM-DD HH24:MI:SS TZH:TZM')
09-NOV-12 1:10:21 AM +01:00
don't understand why this does not come back as YYYY-MM-DD? 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-05T13:09:26.607

你的问题有点混乱：

*   数据类型不`Date`保存时区组件。`TIMESTAMP WITH TIME ZONE`当您将 a插入a 时，这条信息将被截断并永远丢失`Date`。
*   当您想在屏幕上显示日期或通过字符 API（XML、文件...）将其发送到另一个系统时，您可以使用该[`TO_CHAR`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions200.htm#i1009324)功能。在 Oracle 中，**a`Date`没有格式**：它是一个时间点。
*   相反，您将使用[`TO_TIMESTAMP_TZ`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions214.htm#i999847)将 a 转换`VARCHAR2`为 a `TIMESTAMP`，但这不会将 a 转换`Date`为 a `TIMESTAMP`。
*   您用于`FROM_TZ`将时区信息添加到 a `TIMESTAMP`（或 a `Date`）。
*   在 Oracle 中，`CST`是一个时区，但`CDT`不是。`CDT`是夏令时信息。
*   更复杂的是，`CST/CDT`( `-05:00`) 和`CST/CST`( `-06:00`) 显然会有不同的值，但`CST`默认情况下，时区将根据日期继承夏令时信息。

因此，您的转换可能并不像看起来那么简单。

假设您想将`Date` `d`您知道在 time zone 有效的 a 转换为 time zone`CST/CST`的等价物`CST/CDT`，您将使用：

```
SQL> SELECT from_tz(d, '-06:00') initial_ts,
  2         from_tz(d, '-06:00') at time zone ('-05:00') converted_ts
  3    FROM (SELECT cast(to_date('2012-10-09 01:10:21',
  4                              'yyyy-mm-dd hh24:mi:ss') as timestamp) d
  5            FROM dual);

INITIAL_TS                      CONVERTED_TS
------------------------------- -------------------------------
09/10/12 01:10:21,000000 -06:00 09/10/12 02:10:21,000000 -05:00 
```

这里使用了我的默认时间戳格式。我可以明确指定格式：

```
SQL> SELECT to_char(from_tz(d, '-06:00'),'yyyy-mm-dd hh24:mi:ss TZR') initial_ts,
  2         to_char(from_tz(d, '-06:00') at time zone ('-05:00'),
  3                 'yyyy-mm-dd hh24:mi:ss TZR') converted_ts
  4    FROM (SELECT cast(to_date('2012-10-09 01:10:21',
  5                              'yyyy-mm-dd hh24:mi:ss') as timestamp) d
  6            FROM dual);

INITIAL_TS                      CONVERTED_TS
------------------------------- -------------------------------
2012-10-09 01:10:21 -06:00      2012-10-09 02:10:21 -05:00 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T12:27:06.613

要在 oracle 中转换 TimestampTZ，您可以

```
TO_TIMESTAMP_TZ('2012-10-09 1:10:21 CST','YYYY-MM-DD HH24:MI:SS TZR') 
  at time zone 'region' 
```

见这里：[http ://docs.oracle.com/cd/E11882_01/server.112/e10729/ch4datetime.htm#NLSPG264](http://docs.oracle.com/cd/E11882_01/server.112/e10729/ch4datetime.htm#NLSPG264)

这里是地区：[http ://docs.oracle.com/cd/E11882_01/server.112/e10729/applocaledata.htm#NLSPG0141](http://docs.oracle.com/cd/E11882_01/server.112/e10729/applocaledata.htm#NLSPG0141)

例如：

```
SQL> select a, sys_extract_utc(a), a at time zone '-05:00' from (select TO_TIMESTAMP_TZ('2013-04-09 1:10:21 CST','YYYY-MM-DD HH24:MI:SS TZR') a from dual);

A
---------------------------------------------------------------------------
SYS_EXTRACT_UTC(A)
---------------------------------------------------------------------------
AATTIMEZONE'-05:00'
---------------------------------------------------------------------------
09-APR-13 01.10.21.000000000 CST
09-APR-13 06.10.21.000000000
09-APR-13 01.10.21.000000000 -05:00

SQL> select a, sys_extract_utc(a), a at time zone '-05:00' from (select TO_TIMESTAMP_TZ('2013-03-09 1:10:21 CST','YYYY-MM-DD HH24:MI:SS TZR') a from dual);

A
---------------------------------------------------------------------------
SYS_EXTRACT_UTC(A)
---------------------------------------------------------------------------
AATTIMEZONE'-05:00'
---------------------------------------------------------------------------
09-MAR-13 01.10.21.000000000 CST
09-MAR-13 07.10.21.000000000
09-MAR-13 02.10.21.000000000 -05:00

SQL> select a, sys_extract_utc(a), a at time zone 'America/Los_Angeles' from (select TO_TIMESTAMP_TZ('2013-04-09 1:10:21 CST','YYYY-MM-DD HH24:MI:SS TZR') a from dual);

A
---------------------------------------------------------------------------
SYS_EXTRACT_UTC(A)
---------------------------------------------------------------------------
AATTIMEZONE'AMERICA/LOS_ANGELES'
---------------------------------------------------------------------------
09-APR-13 01.10.21.000000000 CST
09-APR-13 06.10.21.000000000
08-APR-13 23.10.21.000000000 AMERICA/LOS_ANGELES 
```

# mysql - 如何从数据库中插入图像？

> ID：15833031
> 
> 赞同：3
> 
> 时间：2013-04-05T11:41:12.417
> 
> 标签：mysql, database, image, jasper-reports

我想在*Jaspersoft Studio*的报告中的详细信息带中插入数据库中的图像。
JPG 图像保存在 MySQL 中类型为*longblob的字段****imgdata***中。 我试图把这个表达式放在 Image 元素中：

 *1.  `$F{imgdata}`
2.  `MyUtil.getInputStream($F{imgdata})`

在第一种情况下，我收到此错误：

```
net.sf.jasperreports.engine.JRException: net.sf.jasperreports.engine.JRException: Unknown image source class [B 
```

...在第二种情况下，此错误：

```
net.sf.jasperreports.engine.JRException:
net.sf.jasperreports.engine.fill.JRExpressionEvalException: Error
evaluating expression :  Source text :
MyUtil.getInputStream($F{imgdata}) 
```

我的问题：如何将数据库中的图像插入到*JasperReports*的报告中？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-09-27T10:41:18.540

打开 .jrxml 文件的 XML 视图。然后找到类似这样的代码

```
<field name="image" class="java.lang.Object"/>  
/* "image" must be replaced by your actual field name */ 
```

并将其更改为

```
<field name="image" class="java.io.InputStream"/> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-06T21:24:01.197

看来我自己解决了这个问题。

以下是我已完成的步骤：

1) 图像报告字段的表达式应为：**$F{imgdata}**

（注：*imgdata*是存储图像数据的数据库字段的名称）

2) 打开报表的“数据集和查询对话框”，将*imgdata字段的***类类型**从 java.lang.Object 更改为**java.io.InputStream**（~~见截图~~--- 抱歉，我没有足够的声誉点来发布图片）。关闭对话框。

 ***~~3) 通过切换到预览选项卡生成您的报告。现在您应该在报告中看到图像。~~****

# dns - 如何在 AWS Route 53 中重定向前缀为 www 的域

> ID：15833039
> 
> 赞同：12
> 
> 时间：2013-04-05T11:41:34.277
> 
> 标签：dns, amazon-web-services, subdomain, amazon-route53

我在 Route 53 中的域托管存在问题。

我需要从 重定向`xyz.com`到`www.xyz.com`，所以我在 Route 53 上创建了一个托管区域。我添加了一个带有我的 ELB 地址的 A 记录，以及一个带有`www.xyz.com`我的 ELB 地址的名称和值的 CNAME。

但是这种设置不会将我的裸域重定向到我的`www`前缀域。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-01-16T00:20:34.430

我已经使用 S3 和 CloudFront 让它工作了。

你需要两个桶：`www.yourdomainname.com`和`yourdomainname.com`.

将您的文件保存在`www`存储桶中。对于裸域存储桶属性，请转到“静态网站托管”部分并选择“将所有请求重定向到另一个主机名”，然后输入`www.yourdomainname.com`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-26T16:37:56.453

目前仅使用 Amazon Route 53 是不可能的。请查看[此线程](https://forums.aws.amazon.com/thread.jspa?threadID=55995)以获取更多信息。

另外，请注意“裸域”（例如`xyz.com`）重定向应该在 HTTP 层而不是 DNS 中处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-26T23:07:29.077

执行以下步骤将解决您的问题：

1.  创建两个存储桶：一个用于 example.com，一个用于 www.example.com
2.  设置 example.com 存储桶以重定向到 www.example.com
3.  创建两个分配：一个使用 example.com 存储桶，一个使用 www.example.com 存储桶（使用 CNAME 对应的域）
4.  在路由 53 中，A ALIAS example.com 到第一个 CloudFront 分配，A ALIAS www.example.com 到第二个 CloudFront 分配

DNS 更改生效后，浏览到 example.com，它应该重定向到 www.example.com

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-31T03:04:26.480

我刚刚创建了两条都指向负载均衡器别名的 A 记录。

```
cstructor.com A  loadbalancer-url
www.cstructor.com A loadbalancer-url 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-20T10:28:27.423

您需要创建一个新的负载均衡器

在端口 80 http 上使用侦听器将 301 重定向到[www.example.com](http://www.example.com)

如果您正在运行 ssl，请在端口 443 上添加另一个侦听器，将 301 重定向到[www.example.com](http://www.example.com)

去`Route 53`

并创建一个带有裸域的记录 A，指向新的负载均衡器

# jquery - jQuery before() 方法在使用 jQuery 1.9.1 时破坏了生成的子菜单，在以前的版本上很好，

> ID：15833043
> 
> 赞同：1
> 
> 时间：2013-04-05T11:41:47.217
> 
> 标签：jquery

我正在基于预先存在的 UL 为移动设备构建一个选择下拉菜单，这适用于旧版本的 jQuery（1.4.1）。但是，我已将 jQuery 更新到 1.9.1 版，代码现在破坏了菜单。正在中断的部分实际上是您当前正在查看的部分的子菜单。

```
var mobileMenu = function (menuParent, prevSibling) {

    var $select = $('<select>', {
        class: 'mobileMenu'
    }).insertAfter(prevSibling);

    $(menuParent).each(function () {
        var $li = $(this),
            $a = $li.find('> a'),
            $p = $li.parents('li'),
            prefix = new Array($p.length + 1).join('-');

        var $option = $('<option>')
            .text(prefix + ' ' + $a.text())
            .val($a.attr('href'))

        if ($(this).hasClass("selected")) {
            $option.attr('selected', true);
        }

        $option.appendTo($select);

        if ($(this).hasClass("selected")) {
            mobileSubNav($select);
        }

    });

    $(".mobileMenu").change(function () {
        window.location = $(this).find("option:selected").val();
    });
};

var mobileSubNav = function (navContainerName) {
    $('.main_nav_sub li').each(function () {
        var $li = $(this),
        $a = $li.find('> a'),
        $p = $li.parents('li'),
        prefix = new Array($p.length + 1).join('-');

        var $option = $('<option>')
        .text(prefix + '--' + $a.text())
        .val($a.attr('href'));
        $option.before(navContainerName);
    });
} 
```

它似乎是倒数第三行 - before() 方法。我在 jQuery 版本 1.9 的升级指南中看到它声明“尝试在没有父节点的节点上使用 .after()、.before() 或 .replaceWith() 无效”。这是否意味着我的脚本正在中断，因为父元素尚未添加到 dom 中？谁能阐明正在发生的事情并指出我要解决的问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:11:40.943

与 1.4.1 相比，这里需要更改很多东西。一定要使用 jQuery Migrate，它会帮助你找到很多。

`class: 'mobileMenu'`

这在某些浏览器上一直是一个错误，不管 jQuery，你需要引用这个词`class`，因为它是一个关键字：

`'class': 'mobileMenu'`

自 1.6 起已弃用`.attr()`用于设置属性，因此应`.prop()`改为：

`$option.attr('selected', true);`

关于您的问题，`.before()`我不确定为什么它首先会起作用。似乎`navContainerName`是选择元素，如果是，您应该使用`.appendTo()`或`.prependTo()`添加选项。

# android - 单击 ListView 项不起作用，我的每个 ListView 项中有三个文本视图和一个按钮

> ID：15833044
> 
> 赞同：0
> 
> 时间：2013-04-05T11:41:54.053
> 
> 标签：android, android-listview

我正在编写一个应用程序，我试图在其中*打开一个活动并*使用**点击 ListView 中的项目更新项目详细信息**

**问题：**

每当我单击 ListView 中的项目时，都无法启动该活动，并且我还想知道如何更新项目详细信息...

**我的每个 ListView 项中有三个文本视图和一个按钮**

*通过在 CartActivity 中使用以下代码，我无法打开 ProductInformationActivity*

```
 ListView mLstView1 = (ListView) findViewById(R.id.listView1);
    CartAdapter mViewCartAdpt = new CartAdapter(CartActivity.this);
mLstView1.setAdapter(mViewCartAdpt);
    mLstView1.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position,
                long id) {

            Intent intent = new Intent(CartActivity.this, com.ProductInformationActivity.class);
            startActivity(intent);
        }
    }); 
```

CartAdapter.java：

```
 public View getView(final int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub

    HashMap<String, String> item = new HashMap<String, String>();
    item = Constants.mItem_Detail.get(position);

    // Setting all values in listview

    title.setText(item.get(com.ProductInformationActivity.KEY_TITLE));
    qty.setText(item.get(com.ProductInformationActivity.KEY_QTY));
    cost.setText(item.get(com.ProductInformationActivity.KEY_COST));
    total.setText(item.get(com.ProductInformationActivity.KEY_TOTAL));

    return vi;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:50:43.413

您是否已将 Ativity 添加到清单文件中？您需要在应用程序标签中添加您的活动：

```
<activity android:name="com.erachnida.restaurant.versionoct.menu.ProductInformationActivity" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:54:16.090

我认为您的问题是您被分配`OnItemClickListener`给整个 ListView，然后分配给 ImageView。另外关于 ImageView，请看：

```
Intent mInViewCartRefresh = new Intent(activity, CartActivity.class);
activity.startActivity(mInViewCartRefresh);
activity.finish(); 
```

在这里，您可能正在尝试“刷新” ListView，但这是错误的。如果您想更新您的 ListView 所有您需要使用

```
adapter.notifyDataSetChanged(); 
```

这表明：*“我更改了数据源，我希望您自己刷新。”*

所以我的建议是删除你的“内部”监听器，删除上面提到的代码片段，只留下ListView的监听器。

```
Intent intent = new Intent(CartActivity.this, ProductInformationActivity.class);
startActivity(intent); 
```

然后，如果您单击 ListView，则可以从**int 位置**参数获取特定项目以进行收集，并且可以对它做任何您想做的事情。在“操作”之后，您需要调用 notifyDataSetChanged() 来刷新您的 ListView。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T12:04:10.667

根据我们的谈话，您已检查此[链接](https://stackoverflow.com/a/12813906/1168654)。所以，`itemClickListener`把这行：

```
Intent intent = new Intent(CartActivity.this, ProductInformationActivity.class);
                startActivity(intent); 
```

就像下面这样：

```
public OnClickListener mOnTitleClickListener3 = new OnClickListener() {
            public void onClick(View v) {
                final int position = list_v
                        .getPositionForView((View) v.getParent());

                Log.d("you are click on Ratings","you are click on Ratings");
                Intent intent = new Intent(CartActivity.this, ProductInformationActivity.class);
                startActivity(intent);

            }
        }; 
```

# node.js - 如何在退出时杀死所有子进程？

> ID：15833047
> 
> 赞同：37
> 
> 时间：2013-04-05T11:42:00.150
> 
> 标签：node.js

node.js进程退出时如何杀死所有子进程（使用child_process.spawn生成）？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-04-05T12:52:02.217

我认为唯一的方法是保留对`ChildProcess`返回的对象的引用`spawn`，并在退出主进程时将其终止。

一个小例子：

```
var spawn     = require('child_process').spawn;
var children  = [];

process.on('exit', function() {
  console.log('killing', children.length, 'child processes');
  children.forEach(function(child) {
    child.kill();
  });
});

children.push(spawn('/bin/sleep', [ '10' ]));
children.push(spawn('/bin/sleep', [ '10' ]));
children.push(spawn('/bin/sleep', [ '10' ]));

setTimeout(function() { process.exit(0) }, 3000); 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2015-07-22T11:54:10.843

要添加到@robertklep 的答案：

如果像我一样，你想在 Node 被外部杀死时这样做，而不是它自己的选择，你必须对信号做一些诡计。

关键是监听你可能被杀死的任何信号，然后调用`process.exit()`，否则默认情况下 Node 不会发出`exit`on `process`！

```
var cleanExit = function() { process.exit() };
process.on('SIGINT', cleanExit); // catch ctrl-c
process.on('SIGTERM', cleanExit); // catch kill 
```

完成此操作后，您就可以正常收听`exit`了`process`。

唯一的问题是`SIGKILL`无法捕获，但这是设计使然。无论如何，您应该`kill`使用`SIGTERM`（默认）。

有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/14031763/doing-a-cleanup-action-just-before-node-js-exits)。

# android - 如何将吐司风格设置为主题？

> ID：15833051
> 
> 赞同：9
> 
> 时间：2013-04-05T11:42:10.263
> 
> 标签：android, toast, android-theme

我想通过编辑更改我的应用程序中的所有 toasts `themes.xml`。

我`<item name="buttonStyle">@style/MyButton</item>`用来更改我的按钮，是否有与 Toast 类似的东西，或者我是否必须创建和使用`MyToast`扩展内置 Toast 的类？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T19:10:53.950

您可以使用以下方法更改 Toast 的背景：

```
<style name="myTheme" parent="@android:styles/Theme.Holo">
  <item name="android:toastFrameBackground">@android:drawable/my_toast</item>
</style> 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-04-05T11:50:00.143

试试这个：

```
 Toast toast=new Toast(this);
     LayoutInflater inflater=this.getLayoutInflater();
     View toastView=inflater.inflate(R.layout.toast_layout, (ViewGroup)findViewById(R.id.toastView));
     TextView txtDate=(TextView)toastView.findViewById(R.id.txtDate);
     txtDate.setText("toast appeared at "+Calendar.getInstance().getTime().toLocaleString());
     toast.setGravity(Gravity.CENTER, 0, 0);
     toast.setView(toastView);
     toast.show(); 
```

# python - sqlalchemy：无需密码即可连接到 MySQL

> ID：15833056
> 
> 赞同：10
> 
> 时间：2013-04-05T11:42:18.920
> 
> 标签：python, mysql, sqlalchemy

我有 MySQL 基础“测试”，root 上没有密码。我可以在那里登录

```
mysql -uroot test # all fine 
```

我想用`sqlalchemy`. 我尝试使用这些 URL：

```
mysql+mysqldb://root@localhost/test

mysql+mysqldb://root:@localhost/test 
```

但是它们都因错误而失败：

```
sqlalchemy.exc.OperationalError: (OperationalError)
    (1045, "Access denied for user
    'root'@'localhost' (using password: NO)") None None 
```

我应该如何在没有密码的情况下访问基地？

**编辑**

我也试过：

```
mysql://root@/test
mysql+mysqldb://root@/test 
```

*使用带有*密码的本地虚拟帐户，它可以正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-04T07:49:01.567

尝试： `mysql://root@localhost/test?`

具体来说： `engine = create_engine('mysql://root@localhost/test?')`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T11:45:00.700

您在命令行上拥有的等效 sqlalchemy url 是

```
mysql://root@/test 
```

MySQL 认为通过标准 unix 套接字连接的 root 用户（`-h`在命令行客户端中没有）与通过 tcp 连接的相同用户名是不同的用户

# python - 列表索引错误

> ID：15833059
> 
> 赞同：0
> 
> 时间：2013-04-05T11:42:29.640
> 
> 标签：python, list, indexing, web.py, error-list

*   已更新 - 嗨，我的 Web 开发有“一半”问题：

我在一个从数据库调用中获取值的类中有这个方法，（数据库中的表有一个键：catId 和另一个字段）

```
def getCat(self):
        ''' devuelve el numero de la categoria
        '''
        a = self.datab.select('categorias',where='catName = $nombre', vars=dict(nombre=self.nombre))
        a= a.list()
        return a[0].catId

    context: i use this to make some categorization in my web content, so i want to return the value wich will join to the content table in the database. 
```

因此，如果我给它一个 self.nombre ，它是一个存储在数据库行中的字符串，我将永远从数据库中获取一个元素。

python解释器给了我这个错误：

> ```
>  File "C:\xampp\htdocs\webpy\functions.py", line 26, in getCat
>     return a[0].catId
> IndexError: list index out of range 
> ```
> 
> > 127.0.0.1:51463 - - [05/Apr/2013 13:29:22] “HTTP/1.1 GET /c/\css\style.css” - 500 内部服务器错误

**但是网络正确地给出了信息，** 我对网络输出没有问题，但我想知道为什么索引 a[0] 中出现此错误

*我制作了 a.list() 以简化 itterbetter 的某些用途*

空闲解释器中的完整错误消息：

> ```
> 0.0 (1): SELECT catName FROM categorias ORDER BY catId ASC 
> 127.0.0.1:51900 - - [05/Apr/2013 16:46:31] "HTTP/1.1 GET /c/" - 200 OK
> 0.0 (1): SELECT * FROM categorias WHERE catName = '\\css\\style.css'
> Traceback (most recent call last):
>   File "C:\Python27\lib\site-packages\web\application.py", line 236, in process
>     return self.handle()
>   File "C:\Python27\lib\site-packages\web\application.py", line 227, in handle
>     return self._delegate(fn, self.fvars, args)
>   File "C:\Python27\lib\site-packages\web\application.py", line 409, in _delegate
>     return handle_class(cls)
>   File "C:\Python27\lib\site-packages\web\application.py", line 384, in handle_class
>     return tocall(*args)
>   File "C:\xampp\htdocs\webpy\code.py", line 32, in GET
>     seleccion = functions.categoria(db,cat)
>   File "C:\xampp\htdocs\webpy\functions.py", line 16, in __init__
>     self.n = self.getCat() #calculo del numero de la categoria PROBLEMAS
>   File "C:\xampp\htdocs\webpy\functions.py", line 26, in getCat
>     return a[0].catId
> IndexError: list index out of range 
> ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T11:50:33.630

您需要进行适当的错误处理，您可以这样做：

```
try:
    a[0].catId
except IndexError as ie:
    # Do some stuff here
except:
    # either re-raise the exception or pass it silently 
```

或者你可以这样做：

```
return a and a[0].catId or [] # This will check for empty list 
```

这取决于您的实施选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T11:45:59.687

如果您尝试从空列表中获取项目，这就是您会得到的确切错误消息：

```
>>> [][0]
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
IndexError: list index out of range 
```

因此，它似乎`a.list()`返回了一个空列表。

# entity-framework - 在带有 EF5 的 ASP.NET MVC 4 中使用 MiniProfiler

> ID：15833062
> 
> 赞同：2
> 
> 时间：2013-04-05T11:42:33.027
> 
> 标签：entity-framework, asp.net-mvc-4, mvc-mini-profiler

我尝试了 EF Tracing Provider 来检查生成的 SQL 语句，但现在我想使用 MiniProfiler，但我无法看到结果......

到目前为止我所做的：

*   安装包： ![在此处输入图像描述](https://i.stack.imgur.com/8nEKH.png)

*   在 MiniProfiler.cs 中取消注释初始化

> ```
> public static void PreStart()
> {
>     //...
>     //TODO: If you are profiling EF code first try: 
>     MiniProfilerEF.Initialize();
>     //...
> } 
> ```

*   在布局视图中添加了渲染（在关闭 body 标签之前）：

    ```
    @MiniProfiler.RenderIncludes() 
    ```

但是相对于 miniprofiler，浏览器中没有显示任何内容……我正在使用数据库优先的方法。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T13:34:48.223

应在 web.config 中添加以下代码：

```
<system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <handlers>
      //...
    <add name="MiniProfiler" path="mini-profiler-resources/*" verb="*" type="System.Web.Routing.UrlRoutingModule" resourceType="Unspecified" preCondition="integratedMode" />
    </handlers>
  </system.webServer> 
```

# android - 减小真实设备（不是模拟器）的“屏幕捕获”DDMS 的大小

> ID：15833063
> 
> 赞同：2
> 
> 时间：2013-04-05T11:42:33.047
> 
> 标签：android, ddms, screen-capture

我正在使用 Eclipse 中 DDMS 附带的“屏幕捕获设备”来拍摄我的真实设备屏幕（三星 Galaxy SIII）的快照。问题是显示的屏幕很大，不适合我笔记本电脑的屏幕。有什么办法可以让它更小以适合我的屏幕。我知道可以使用 android 虚拟设备，但是使用真实设备呢？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-10T10:54:44.003

将图像保存在您的本地系统中。查看时会自动缩小尺寸。它对我有用。

# c# - ControllerColliderHit 在统一 3d 中进行位置更改

> ID：15833064
> 
> 赞同：0
> 
> 时间：2013-04-05T11:42:37.047
> 
> 标签：c#, character, monodevelop, unity3d, transform

![在此处输入图像描述](https://i.stack.imgur.com/zTyDE.jpg)

我将脚本附加到角色控制器。

当我的角色控制器碰到任何对撞机时，角色控制器的变换位置会发生变化。

```
void OnControllerColliderHit(ControllerColliderHit hit) {
    if(hit.collider.gameObject.name =="point"){ 
       print("hit a point");
    }
    else {
        StartCoroutine( "gameOver" );       
    }
} 
```

为什么会这样。有什么办法可以摆脱这个问题吗？

# http - 如何在 http 标头中添加自定义数据

> ID：15833071
> 
> 赞同：1
> 
> 时间：2013-04-05T11:43:04.983
> 
> 标签：http, http-headers

我想在 http 标头中添加一些自定义数据并将其发送到另一个 Web 应用程序，以便我可以访问该数据。我该怎么做，请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:50:05.180

看看这篇[文章](https://developer.mozilla.org/en/docs/Setting_HTTP_request_headers)

```
// adds "X-Hello: World" header to the request
httpChannel.setRequestHeader("X-Hello", "World", false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T11:53:11.133

最简单的方法是使用`java.net.HttpURLConnection.addRequestProperty()`方法。例如

```
httpURLConnection.addRequestProperty("User-Agent", 
    "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.0)"); 
```

查看[文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/URLConnection.html#addRequestProperty%28java.lang.String,%20java.lang.String%29)以获取更多详细信息。

# pagination - 自定义菜单中wordpress管理面板的分页

> ID：15833076
> 
> 赞同：0
> 
> 时间：2013-04-05T11:43:38.017
> 
> 标签：pagination, wordpress

我制作了一个 wordpress 插件，我想在其中从数据库中获取数据并需要分页，我使用了 digg 样式分页，但是当我单击分页的下一个链接时，“您没有足够的权限访问此页面。” 这个错误出现请帮助哪里有问题这是我的代码

```
<?php
include('pagination.class.php');
?>
<?php
/*
Plugin Name:Register Data
Description:Pagination Plugin for wordpress admin Panel.
Author:Pawan Sharma
Author URI:

*/
$object = new YourPlugin();

//add a hook into the admin header to check if the user has agreed to the terms and conditions.
//add_action('admin_head', array($object, 'adminHeader'));

//add footer code
//add_action( 'admin_footer', array($object, 'adminFooter'));

// Hook for adding admin menus
add_action('admin_menu', array($object, 'addMenu'));

//This will create [yourshortcode] shortcode
add_shortcode('yourshortcode', array($object, 'shortcode'));

class YourPlugin{

/**
* This will create a menu item under the option menu
* @see http://codex.wordpress.org/Function_Reference/add_options_page
*/
public function addMenu(){
add_options_page('Regeter Data', 'Regeter Data', 'manage_options', 'my-unique-identifier', array($this, 'optionPage'));
}

/**
* This is where you add all the html and php for your option page
* @see http://codex.wordpress.org/Function_Reference/add_options_page
*/
public function optionPage(){
$items = mysql_num_rows(mysql_query("SELECT * FROM wp_register_form;")); // number of total rows in the database

if($items > 0) {
$p = new pagination;
$p->items($items);
$p->limit(5); // Limit entries per page
$p->target("$this->target?page=list_record");
$p->currentPage($_GET[$p->paging]); // Gets and validates the current page
$p->calculate(); // Calculates what to show
$p->parameterName('paging');
$p->adjacents(1); //No. of page away from the current page

if(!isset($_GET['paging'])) {
$p->page = 1;
} else {
$p->page = $_GET['paging'];
}

//Query for limit paging
$limit = "LIMIT " . ($p->page - 1) * $p->limit . ", " . $p->limit;

} else {
echo "No Record Found";
}

?>
<?php
//Now we'll display the list of records
?>
<div class="wrap">
<h2>List of Records</h2>

<div class="tablenav">
<div class='tablenav-pages'>
<?php echo $p->show(); // Echo out the list of paging. ?>
</div>
</div>

<table class="widefat">
<thead>
<tr>
<th>Name</th>
<th>City</th>
<th>Mobile No</th>
<th>Email</th>
<th>Address</th>
<th>View</th>
</tr>
</thead>
<tbody>
<?php
$sql = "SELECT * FROM wp_register_form $limit";
$result = mysql_query($sql) or die ('Error, query failed');

if (mysql_num_rows($result) > 0 ) {
while ($row = mysql_fetch_assoc($result)) {
$name = $row['customer_name'];
$city = $row['customer_city'];
$phone = $row['customer_phone'];
$email = $row['customer_email'];
$address = $row['customer_address'];
$id = $row['customer_id'];?>

<tr>
<td><?php echo $name; ?></td>
<td><?php echo $city; ?></td>
<td><?php echo $phone; ?></td>
<td><?php echo $email; ?></td>
<td><?php echo $address; ?></td>
<td><?php echo "<a href='http://localhost/wor/wp-content/themes/mitfitness/single_details.php?id=".$id."'>View Details</a>"?></td>
</tr>
<?php }
} else { ?>
<tr>
<td>No Record Found!</td>
<tr>
<?php } ?>
</tbody>
</table>
</div>
<?php
}

/**
* this is where you add the code that will be returned wherever you put your shortcode
* @see http://codex.wordpress.org/Shortcode_API
*/
public function shortcode(){
return "add your image and html here...";
}
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T10:27:05.613

目标有误

```
<?php
include('pagination.class.php');
?>
<?php
/*
Plugin Name:Register Data
Description:Pagination Plugin for wordpress admin Panel.
Author:Pawan Sharma
Author URI:

*/
$object = new RegisterData();

//add a hook into the admin header to check if the user has agreed to the terms and conditions.
//add_action('admin_head',  array($object, 'adminHeader'));

//add footer code
//add_action( 'admin_footer',  array($object, 'adminFooter'));

// Hook for adding admin menus
add_action('admin_menu',  array($object, 'addMenu'));

//This will create [yourshortcode] shortcode
add_shortcode('yourshortcode', array($object, 'shortcode'));

class RegisterData{

    /**
     * This will create a menu item under the option menu
     * @see http://codex.wordpress.org/Function_Reference/add_options_page
     */
    public function addMenu(){
        add_options_page('Regeter Data', 'Regeter Data', 'manage_options', 'register_data', array($this, 'optionPage'));
    }

    /**
     * This is where you add all the html and php for your option page
     * @see http://codex.wordpress.org/Function_Reference/add_options_page
     */
    public function optionPage(){
       $items = mysql_num_rows(mysql_query("SELECT * FROM wp_register_form;")); // number of total rows in the database

        if($items > 0) {
        $p = new pagination;
        $p->items($items);
        $p->limit(5); // Limit entries per page
        $p->target("$this->target?page=register_data");
        $p->currentPage($_GET[$p->paging]); // Gets and validates the current page
        $p->calculate(); // Calculates what to show
        $p->parameterName('paging');
        $p->adjacents(1); //No. of page away from the current page

        if(!isset($_GET['paging'])) {
            $p->page = 1;
        } else {
            $p->page = $_GET['paging'];
        }

        //Query for limit paging
        $limit = "LIMIT " . ($p->page - 1) * $p->limit  . ", " . $p->limit;

} else {
    echo "No Record Found";
}

?>
 <?php
//Now we'll display the list of records
 ?>
<div class="wrap">
    <h2>List of Records</h2>

<div class="tablenav">
    <div class='tablenav-pages'>
        <?php echo $p->show();  // Echo out the list of paging. ?>
    </div>
</div>

<table class="widefat">
<thead>
    <tr>
        <th>Name</th>
        <th>City</th>         
        <th>Mobile No</th>
        <th>Email</th>
        <th>Address</th>
        <th>View</th>
    </tr>
</thead>
<tbody>
<?php 
$sql = "SELECT * FROM wp_register_form $limit";
$result = mysql_query($sql) or die ('Error, query failed');

if (mysql_num_rows($result) > 0 ) {
    while ($row = mysql_fetch_assoc($result)) {
            $name            = $row['customer_name'];
            $city  = $row['customer_city'];
            $phone       = $row['customer_phone'];
            $email       = $row['customer_email'];
            $address       = $row['customer_address'];
            $id       = $row['customer_id'];?>

        <tr>
            <td><?php echo $name; ?></td>
            <td><?php echo $city; ?></td>
            <td><?php echo $phone; ?></td>
            <td><?php echo $email; ?></td> 
            <td><?php echo $address; ?></td> 
            <td><?php echo "<a href='$this->target?page=register_data&view=".$id."'>View Details</a>"?></td>            
        </tr>
<?php }
} else { ?>
        <tr>
        <td>No Record Found!</td>
        <tr> 
<?php } ?>
</tbody>
</table>
</div>
<?php 
    }

    /**
     * this is where you add the code that will be returned wherever you put your shortcode
     * @see http://codex.wordpress.org/Shortcode_API
     */
    public function shortcode(){
        return "add your image and html here...";
    }

}
?> 
```

# ios - 如何将图像保存到 iTunes 文件共享

> ID：15833077
> 
> 赞同：2
> 
> 时间：2013-04-05T11:43:38.053
> 
> 标签：ios, xcode, itunes, file-sharing

我喜欢保存一个名为`img`iTunes 文件共享文件夹的图像。有人可以告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T12:23:13.937

这是示例代码：

```
NSArray paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); 
NSString *documentsDir = [paths objectAtIndex:0]; 
NSString *filePath = [NSString stringWithFormat:@"%@/%@.jpg", documentsDir, filename];

NSData data = UIImageJPEGRepresentation(img, 1.0); 
[data writeToFile:filePath atomically:NO]; 
```

**还有关于 iTunes 文件共享：**

你应该去`Info.plist`添加行

`Application supports iTunes file sharing`到`YES`

# zend-framework - 如何从多个服务器中清除 zend_cache？

> ID：15833079
> 
> 赞同：0
> 
> 时间：2013-04-05T11:43:40.973
> 
> 标签：zend-framework, load-balancing, zend-cache

我的站点位于负载平衡下的两台服务器（即`web01.mydomain.com`和）上。`web02.mydomain.com`我`zend_cache`用于缓存目的，缓存也位于两台服务器上。

问题是，当我尝试使用以下命令清理缓存时，它只会将其从一台服务器中删除。我正在使用以下命令删除缓存：

```
$cache->clean(Zend_Cache::CLEANING_MODE_ALL); 
```

你能解释一下如何从两台服务器上删除缓存吗？

# java - 1.3 错误中不支持泛型即使 java_home 在 Maven 构建中指向 jdk1.7

> ID：15833081
> 
> 赞同：2
> 
> 时间：2013-04-05T11:43:41.880
> 
> 标签：java, maven-2

我在运行 mvn clean install 时收到以下消息

```
[ERROR] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Compilation failure

D:\data\work\extjs.parser\src\main\java\com\model\Component.java:[17,15] error:
generics are not supported in -source 1.3

could not parse error message:   (use -source 5 or higher to enable generics)
D:\data\work\extjs.parser\src\main\java\com\model\Container.java:14: error: gene
rics are not supported in -source 1.3
    private List<Component> items; 
```

该项目是简单的 maven 项目，但是当我已经将 JAVA_HOME 设置为 jdk1.7 安装路径时，不会编译泛型错误

但是，当我添加插件时，它工作正常。为什么需要显式设置 hava 主路径。

```
<plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <source>1.7</source>
                <target>1.7</target>
                <showDeprecation>true</showDeprecation>
                <showWarnings>true</showWarnings>
                <executable>${env.JAVA_HOME}/bin/javac</executable>
                <fork>true</fork>
            </configuration>
        </plugin> 
```

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-13T10:18:42.857

您需要告诉 Maven 使用 JDK 1.5 显式编译您的源代码。在 pom.xml 文件中声明 Maven 编译器插件 (maven-compiler-plugin)，如下所示：

```
<project ...>
  <dependencies>
   ...
  </dependencies>
  <build>
    <plugins>
       <plugin>
           <groupId>org.apache.maven.plugins</groupId>
           <artifactId>maven-compiler-plugin</artifactId>
           <version>2.3.1</version>
           <configuration>
               <source>1.5</source>
               <target>1.5</target>
           </configuration>
       </plugin>
    </plugins>
  </build>
</project> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T11:48:09.147

> -source 1.3 不支持泛型

错误信息非常清楚。您已经告诉编译器在没有泛型的 -source 1.3 模式下编译。所以，没有泛型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-28T22:47:40.043

它的老问题。在等了很长一段时间后，我没有得到答案。但是，在浏览 maven 编译器插件文档时，我知道该插件具有默认设置。所以早期版本过去使用 jdk 1.3 作为源/目标的默认值，现在它使用 1.5，例如 在阅读运行“mvn clean install -X”的文档后观察到，

*   无论如何，Maven 编译目标在内部使用 maven-compiler-plugin
*   在 pom 中，通过在 build 部分指定 maven-compiler-plugin，我们可以覆盖某些配置，例如 source/target
*   如果我们不指定，那么 maven 将使用“maven-compiler-plugin”本身给出的默认值，这取决于它的版本。

因此，直到“maven-compiler-plugin”及其配置（源/目标）未在 pom.xml 中指定时才会出现错误。

# oracle - 使用 oracle 在日期字段中插入时间部分

> ID：15833086
> 
> 赞同：1
> 
> 时间：2013-04-05T11:43:51.677
> 
> 标签：oracle, datetime, stored-procedures

我在oracle中有一个程序：

```
CREATE OR REPLACE 
PROCEDURE ONE
    (
    p_GUID IN ONE.GUID%TYPE,
    p_START_DATE IN ONE.START_DATE%TYPE,
    p_END_DATE IN ONE.END_DATE%TYPE,
    p_RETURN OUT INTEGER
    )
AS
BEGIN
    INSERT INTO ONETABLE (GUID, START_DATE, END_DATE)
  VALUES (p_GUID, to_date(p_START_DATE, 'YYYY-MM-DD HH24:MI:SS'), to_date(p_END_DATE, 'YYYY-MM-DD HH24:MI:SS'));
    COMMIT;
  EXCEPTION
        WHEN OTHERS THEN
        p_RETURN:= 1;
END; 
```

编辑，因为人们似乎说要试试这个（这也不起作用，我尝试使用 to_date （上面的例子）来尝试解决问题）：

```
CREATE OR REPLACE 
PROCEDURE ONE
    (
    p_GUID IN ONE.GUID%TYPE,
    p_START_DATE IN ONE.START_DATE%TYPE,
    p_END_DATE IN ONE.END_DATE%TYPE,
    p_RETURN OUT INTEGER
    )
AS
BEGIN
    INSERT INTO ONETABLE (GUID, START_DATE, END_DATE)
  VALUES (p_GUID, p_START_DATE, p_END_DATE);
    COMMIT;
  EXCEPTION
        WHEN OTHERS THEN
        p_RETURN:= 1;
END; 
```

当从 c# 调用它时（例如使用 DateTime.NOW） - 它失败了。

仅当开始日期和结束日期的格式为 2013 年 4 月 5 日时，它似乎才有效。但是我如何在输入中获得时间呢？

如果我更换

```
p_START_DATE, 'YYYY-MM-DD HH24:MI:SS' 
```

和

```
'2013-05-13 12:13:14', 'YYYY-MM-DD HH24:MI:SS' 
```

这可行，但是在从 c# 调用该过程时它失败了。

此外，如果我从 db 客户端手动运行该过程，我仍然必须输入 05-apr-2013 并且只有这样才有效。如果我尝试，我无法输入时间，因为它会失败。

开始日期和结束日期是 oracle db 中的 DATE 类型。

--

根据我的尝试，我会收到不同的消息。

正如我调查的那样，这似乎与此有关：

```
SELECT value FROM v$nls_parameters WHERE parameter ='NLS_DATE_FORMAT'; 
```

返回：

```
DD-MON-RR 
```

我不能改变它，因为我不是数据库所有者。

--

**那么如何获得时间部分呢？**

这是完整的SQL：

```
select parameter, value from nls_session_parameters; 
```

返回：

```
NLS_LANGUAGE    AMERICAN
NLS_TERRITORY   AMERICA
NLS_CURRENCY    $
NLS_ISO_CURRENCY    AMERICA
NLS_NUMERIC_CHARACTERS  . 
NLS_CALENDAR    GREGORIAN
NLS_DATE_FORMAT DD-MON-RR
NLS_DATE_LANGUAGE   AMERICAN
NLS_SORT    BINARY
NLS_TIME_FORMAT HH.MI.SSXFF AM
NLS_TIMESTAMP_FORMAT    DD-MON-RR HH.MI.SSXFF AM
NLS_TIME_TZ_FORMAT  HH.MI.SSXFF AM TZR
NLS_TIMESTAMP_TZ_FORMAT DD-MON-RR HH.MI.SSXFF AM TZR
NLS_DUAL_CURRENCY   $
NLS_COMP    BINARY
NLS_LENGTH_SEMANTICS    BYTE
NLS_NCHAR_CONV_EXCP FALSE 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T12:38:21.623

由于您的列是`DATE`oracle 类型，因此您的插入错误。

你不应该这样做

```
to_date(p_START_DATE, 'YYYY-MM-DD HH24:MI:SS') 
```

而是插入

```
INSERT INTO ONETABLE (GUID, START_DATE, END_DATE)
  VALUES (p_GUID, p_START_DATE, p_END_DATE); 
```

通过在日期上执行 to_Date ，您将强制从日期转换为字符并再次返回日期。换句话说，你的字符串：

```
to_date(p_START_DATE, 'YYYY-MM-DD HH24:MI:SS') 
```

默默地转换为

```
to_date(to_char(p_START_DATE, NLS_DATE_FORMAT), 'YYYY-MM-DD HH24:MI:SS') 
```

即在你的情况下，可能：

```
to_date(to_char(p_START_DATE, 'DD-MON-RR'), 'YYYY-MM-DD HH24:MI:SS') 
```

由于您的函数输入是 %TYPE （这很好），它们也是日期：

```
p_START_DATE IN ONE.START_DATE%TYPE 
```

所以请确保，当您将输入传递给函数时，您传递的是日期类型而不是字符串。

例子：

```
SQL> CREATE OR REPLACE  PROCEDURE ONE
  2      (
  3      p_GUID IN ONETABLE.GUID%TYPE,
  4      p_START_DATE IN ONETABLE.START_DATE%TYPE,
  5      p_END_DATE IN ONETABLE.END_DATE%TYPE,
  6      p_RETURN OUT INTEGER
  7      )
  8  AS
  9  BEGIN
 10      INSERT INTO ONETABLE (GUID, START_DATE, END_DATE)
 11    VALUES (p_GUID, p_START_DATE, p_END_DATE);
 12      COMMIT;
 13    EXCEPTION
 14          WHEN OTHERS THEN
 15          p_RETURN:= 1;
 16  END;
 17  /

Procedure created.

SQL> var r number
SQL> exec ONE('abc', to_date('2013-05-13 12:13:14', 'YYYY-MM-DD HH24:MI:SS'),  to_date('2013-05-14 01:13:14', 'YYYY-MM-DD HH24:MI:SS'), :r);

PL/SQL procedure successfully completed.

SQL> select * from onetable;

GUID                 START_DATE         END_DATE
-------------------- ------------------ ------------------
abc                  13-may-13 12:13:14 14-may-13 01:13:14
abc                  13-may-13 12:13:14 14-may-13 01:13:14 
```

vs 你是隐式转换：

```
SQL> CREATE OR REPLACE  PROCEDURE ONE
  2      (
  3      p_GUID IN ONETABLE.GUID%TYPE,
  4      p_START_DATE IN ONETABLE.START_DATE%TYPE,
  5      p_END_DATE IN ONETABLE.END_DATE%TYPE,
  6      p_RETURN OUT INTEGER
  7      )
  8  AS
  9  BEGIN
 10      INSERT INTO ONETABLE (GUID, START_DATE, END_DATE)
 11    VALUES (p_GUID, to_date(p_START_DATE, 'YYYY-MM-DD HH24:MI:SS'), to_date(p_END_DATE, 'YYYY-MM-DD HH24:MI:SS'));
 12      COMMIT;
 13
 14  END;
 15  /

Procedure created.

SQL> alter session set nls_date_format='dd-mon-yy';

Session altered.

SQL> var r number
SQL> exec ONE('abc', to_date('2013-05-13 12:13:14', 'YYYY-MM-DD HH24:MI:SS'),  to_date('2013-05-14 01:13:14', 'YYYY-MM-DD HH24:MI:SS'), :r);

PL/SQL procedure successfully completed.

SQL> alter session set nls_date_format='dd-mon-rrrr hh24:mi:ss';

Session altered.

SQL> select * from onetable;

GUID                 START_DATE           END_DATE
-------------------- -------------------- --------------------
abc                  13-may-0013 00:00:00 13-may-0014 00:00:00 
```

存储了错误的日期..或使用不同的 NLS 设置：

```
SQL> alter session set nls_date_format='dd-mon';

Session altered.

SQL> var r number
SQL> exec ONE('abc', to_date('2013-05-13 12:13:14', 'YYYY-MM-DD HH24:MI:SS'),  to_date('2013-05-14 01:13:14', 'YYYY-MM-DD HH24:MI:SS'), :r);
BEGIN ONE('abc', to_date('2013-05-13 12:13:14', 'YYYY-MM-DD HH24:MI:SS'),  to_date('2013-05-14 01:13:14', 'YYYY-MM-DD HH24:MI:SS'), :r); END;

*
ERROR at line 1:
ORA-01858: a non-numeric character was found where a numeric was expected
ORA-06512: at "TEST.ONE", line 10
ORA-06512: at line 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:11:18.967

无需将函数转换为`DATE`类型。已经约会了 只需插入传入参数的值：

```
 INSERT INTO ONETABLE (GUID, START_DATE, END_DATE)
  VALUES (p_GUID, p_START_DATE, p_END_DATE); 
```

**更新**

但是，如果上面的变体不起作用并且您看到出现错误，则必须在客户端检查存储过程参数定义。您可以验证`p_START_DATE`客户端的参数是否具有 DateTime 类型？

**更新 2**

客户端有错误。尝试初始化日期参数，如下例所示：

```
OracleParameter p1 = new OracleParameter();
p1.DbType = DbType.DateTime;
p1.Value = System.DateTime.Now; 
```

错误的原因可能是 C# 组件将参数视为字符串并将其转换为具有默认 OS 格式的字符串，然后通过查询将其传递给 Oracle。Oracle 试图将该字符串解析为`ONE`存储过程定义中指定的日期类型，但由于需要 NLS_DATE_FORMAT 参数的默认格式而失败。

**更新 3**

@b0x0rz 在评论中解释了错误的真正原因（错误的返回类型）。无论如何，这是客户端的错误...

# java - 多线程程序的链表问题

> ID：15833087
> 
> 赞同：1
> 
> 时间：2013-04-05T11:43:57.627
> 
> 标签：java, multithreading, linked-list

这是我的作业问题之一：

> **在多线程程序上使用链表有什么问题，有什么替代方法？**

我回答如下，如果有任何其他建议，我将不胜感激：

> 问题是缺乏并发性——为了使用链表，我们必须对它使用锁，以便对它所持有的内部对象所做的更改是可靠的（因为每个对象都持有对下一个对象的引用），一次我们锁定链表我们基本上是“关闭”多个线程使用它的选项，替代方案是一个数组，因为我们可以单独锁定每个项目。

我完全不确定我的答案，有什么建议吗？...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:48:53.673

你的答案看起来不错。

如果迭代远远超过突变，则替代方案可能是`CopyOnWriteArrayList`（假设 a 就足够了）。`List`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:55:29.400

Java SE 中没有 LinkedList 的线程安全版本，但您可以使用 Collections.synchronizedList(List) 创建 LinkedList 的同步代理。还有一个无锁线程安全的 java.util.concurrent.CopyOnWriteArrayList 但它是基于数组的，从它的名字可以看出。

# wpf - 在 WPF C# 中仅显示部分画布

> ID：15833092
> 
> 赞同：0
> 
> 时间：2013-04-05T11:44:10.197
> 
> 标签：wpf, resize, wpf-controls, clip

我将 WPF 项目中的 Canvas 定义为 1000 x 3000px。

现在我使用从点 (0,1000) 到 (1000, 2000) 的 Clip 方法。它将在画布的中间。现在我想在 ScrollViewer 中显示它，但有一个问题 - 在剪辑部分之前和之后我有很多空间。如何将剪裁的画布对齐到顶部？

更具体地说：画布包含 3 个页面（1000x1000px），现在我想剪辑那个中间页面并对其进行操作。但在我的项目中，我想在顶部操作滚动查看器中显示一页。剪裁后，我得到了画布的正确部分，但前后有空格。

怎么做？也许我需要使用另一种方法而不是剪辑？

或者也许是别的什么？例如，在每 1000px 之后分割该画布 .. 就像在 word 中一样 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:32:24.563

这是我想出的解决方案。你所要做的就是把我的画布换成你的。

```
<Window x:Class="StackOverflow.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:StackOverflow"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <local:AllNoneCheckboxConverter x:Key="converter"/>
        <local:ValuePointConverter x:Key="VPConverter"/>
    </Window.Resources>
    <Grid>
        <ScrollViewer VerticalScrollBarVisibility="Hidden"
                      HorizontalScrollBarVisibility="Visible"
                      Width="1000" Height="1000"
                      >
            <Canvas Width="3000" Height="1000">
                <Canvas.Background>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                        <GradientStop Color="Red" Offset="0.3"/>
                        <GradientStop Color="Blue" Offset="0.6"/>
                        <GradientStop Color="Black" Offset="1"/>
                    </LinearGradientBrush>
                </Canvas.Background>
            </Canvas>
        </ScrollViewer>
    </Grid>
</Window> 
```

# asp.net-mvc-4 - ASP.NET MVC4 路径“/enquiry/”的控制器未找到或未实现 IController。下拉列表返回错误

> ID：15833095
> 
> 赞同：1
> 
> 时间：2013-04-05T11:44:22.250
> 
> 标签：asp.net-mvc-4

当我导航到查询区域时，我的应用程序正在返回这个，我目前必须到工作区域、宣传册和查询以及第三个要遵循（支付），当我导航到宣传册区域时，不会显示错误。

我尝试在抛出错误的视图中添加一个区域参数，将字符串留空并使用查询，如下所示：

```
@Html.Action("DropDownList", "Enquiry Base", new { type = "titles", areas = ""})

@Html.Action("DropDownList", "Enquiry Base", new { type = "titles", areas = "Enquiry"}) 
```

这些都没有解决错误。

目前为了显示下拉列表，我在根目录中有一个视图模型、部分视图和统一引导程序：

**项目视图模型**

```
public class DropDownListItem
{
    public string Text { get; set; }
    public string Value { get; set; }
}

public class ItemsViewModel
{
    private readonly List<DropDownListItem> _items;

    public string SelectedItem { get; set; }

    public IEnumerable<SelectListItem> Items
    {
        get
        {
            var allItems = _items.Select(i => new SelectListItem
                {
                    Value = i.Value,
                    Text = i.Text
                });
            return DefaultItem.Concat(allItems);
        }
    }

    public IEnumerable<SelectListItem> DefaultItem
    {
        get
        {
            return Enumerable.Repeat(new SelectListItem
                {
                    Value = "",
                    Text = Mui.please_select
                }, count: 1);
        }
    }

    public ItemsViewModel()
    {

    }

    public ItemsViewModel(List<DropDownListItem> items, string selected)
    {
        _items = items;
        SelectedItem = selected;
    } 
```

**下拉部分**

```
@using MBS.Exec.Mvc.ViewModels
@model ItemsViewModel

@Html.DropDownListFor(m => m.SelectedItem, Model.Items) 
```

**引导程序**

```
public static class Bootstrapper
{
    public static void Initialise()
    {
        var container = BuildUnityContainer();

        DependencyResolver.SetResolver(new UnityDependencyResolver(container));

        GlobalConfiguration.Configuration.DependencyResolver = new Unity.WebApi.UnityDependencyResolver(container);
    }

    private static IUnityContainer BuildUnityContainer()
    {
        var container = new UnityContainer();

        container.RegisterType<IBrochureModel, MilitaryBrochureViewModel>();
        container.RegisterType<IBrochureModel, GeneralBrochureViewModel>();
        container.RegisterType<IBrochureModel, StandardBrochureViewModel>();
        container.RegisterType<IBrochureModel, StudentBrochureViewModel>();

        container.RegisterType<IEnquiryModel, MilitaryEnquiryViewModel>();
        container.RegisterType<IEnquiryModel, GeneralEnquiryViewModel>();
        container.RegisterType<IEnquiryModel, StandardEnquiryViewModel>();
        container.RegisterType<IEnquiryModel, StudentEnquiryViewModel>();

        container.RegisterType<IFormData, FormData>();
        container.RegisterType<IRESTExecutiveService, RESTExecutiveService>();

        return container;
    } 
```

为了使用该区域的下拉菜单，我在 EnquiryBaseController 中创建了 DropDownList ActionResult：

```
[ChildActionOnly]
    public ActionResult DropDownList(string type, string selected)
    {
        if (type == "titles")
        {
            var items = new ItemsViewModel(
                (from g in _service.GetTitles() select new DropDownListItem { Text = g.Value, Value = g.Value }).ToList(),
                selected);

            return PartialView("DropDownPartial", items);
        }
        else if (type == "leadSources")
        {
            var items = new ItemsViewModel(
                (from g in _service.GetLeadSources() select new DropDownListItem { Text = g.Value, Value = g.Value }).ToList(),
                selected);

            return PartialView("DropDownPartial", items);
        }

        return null;
    } 
```

然后我使用上面的@Html.Action 代码在视图上呈现下拉菜单。

有谁知道为什么会抛出这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:59:36.147

你打电话时

```
@Html.Action("DropDownList", "Enquiry Base", new { type = "titles", areas = ""}) 
```

您在控制器名称字符串中有一个空格。

试试这个：

```
@Html.Action("DropDownList", "EnquiryBase", new { type = "titles", areas = ""}) 
```

我认为错误出现'/enquiry/'的原因是因为它只读取字符串的第一部分。

# java - Glassfish 4 中的性能调谐器在哪里？（针对树莓派进行优化）

> ID：15833099
> 
> 赞同：2
> 
> 时间：2013-04-05T11:44:34.603
> 
> 标签：java, jakarta-ee, glassfish, raspberry-pi

我在 Glassfish 4 中找不到 Performance Tuner。在哪里可以找到它？我想为 Raspberry PI 优化 Glassfish 4 的性能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:39:37.673

Performance Tuner 仅包含在 Glassfish 的 Oracle 版本中（不包含在社区版中）。

# xamarin.android - 将多个目标绑定到同一个源

> ID：15833101
> 
> 赞同：2
> 
> 时间：2013-04-05T11:44:35.187
> 
> 标签：xamarin.android, mvvmcross

我正在制作一个页面，其中包含一个`ViewPager`包含`TextView`显示标题和`ListView`显示我制作的自定义视图中的一些图表的页面。

我在 WP7 中运行良好，代码如下：

```
<controls:Pivot Title="Stakeholder">
    <controls:PivotItem Header="Last hour">
        <ScrollViewer>
            <ItemsControl ItemsSource="{Binding Locations}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <StackPanel>
                            <TextBlock Text="{Binding Name}" HorizontalAlignment="Center" />
                            <chart:MiniChartHour MinMaxRange="{Binding ChartHourRange}" Data="{Binding ChartHourSamples}" Margin="0,0,0,15" />
                        </StackPanel>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>
    </controls:PivotItem>

    <!--Pivot item last day-->
    <controls:PivotItem Header="Last day">
        <ScrollViewer>
            <ItemsControl ItemsSource="{Binding Locations}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <StackPanel>
                            <TextBlock Text="{Binding Name}" HorizontalAlignment="Center" />
                            <chart:MiniChartDay MinMaxRange="{Binding ChartDayRange}" Data="{Binding ChartDaySamples}" Margin="0,0,0,15" />
                        </StackPanel>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>
    </controls:PivotItem>
    ...
    More of these here
    ...
</controls:Pivot> 
```

然而，在 WP7 上，它使用了一个`Pivot`控件，类似于`ViewPager`android 中的控件。该`Locations`属性是a `ObservableCollection`，它拥有`LocationViewModel`s。每个`LocationViewModel`s 都有 4 个不同图表的范围和数据，每个图表显示不同的数据粒度。在上面的代码中，这个`Locations`属性被绑定了几次，没有任何问题。但是，当我想在 Android 上做类似的事情时，会`SwissBindings`不止一次地发出很多关于 Path 的警告。我在 Android 上的 View 代码如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:local="http://schemas.android.com/apk/res/BK.EMS.Stakeholder.UI.Droid.vNext"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent">

  <TextView
    android:id="@+id/chartHeader"
    android:layout_height="wrap_content"
    android:layout_width="match_parent"
    android:textAppearance="?android:attr/textAppearanceLarge"
    local:MvxBind="Text Name"
    />

  <RelativeLayout
    android:layout_height="fill_parent"
    android:layout_width="fill_parent">
    <Mvx.MvxBindableListView 
      android:id="@+id/chartListHour"
      android:layout_height="fill_parent"
      android:layout_width="fill_parent"
      android:cacheColorHint="#00000000"
      android:listSelector="#00000000"
      android:orientation="vertical"
      local:MvxItemTemplate="@layout/chartdetailhour"
      local:MvxBind="ItemSource Locations, Visibility IsHourVisible,Converter=Visibility"
      />

    <Mvx.MvxBindableListView
      android:id="@+id/chartListDay"
      android:layout_height="fill_parent"
      android:layout_width="fill_parent"
      android:cacheColorHint="#00000000"
      android:listSelector="#00000000"
      android:orientation="vertical"
      local:MvxItemTemplate="@layout/chartdetailday"
      local:MvxBind="ItemSource Locations, Visibility IsDayVisible,Converter=Visibility"
      />
    ...
    More of the BindableListViews here
    ...
  </RelativeLayout>
</FrameLayout> 
```

我得到的例外是：

```
Problem parsing Swiss binding MvxException: You cannot specify Path more than once - first Path 'Locations', second Path 'Visibility IsHourVisible', position 50 in ItemSource Locations, Visibility IsHourVisible,Converter=Visibility
at Cirrious.MvvmCross.Binding.Parse.Binding.Swiss.MvxSwissBindingParser.ParseNextBindingDescriptionOptionInto (Cirrious.MvvmCross.Binding.Interfaces.Parse.MvxSerializableBindingDescription description) [0x00000] in <filename unknown>:0 
at Cirrious.MvvmCross.Binding.Parse.Binding.Swiss.MvxSwissBindingParser.ParseBindingDescription () [0x00000] in <filename unknown>:0 
at Cirrious.MvvmCross.Binding.Parse.Binding.Swiss.MvxSwissBindingParser.ParseTargetPropertyNameAndDescription () [0x00000] in <filename unknown>:0 
at Cirrious.MvvmCross.Binding.Parse.Binding.Swiss.MvxSwissBindingParser.TryParseBindingSpecification (System.String text, Cirrious.MvvmCross.Binding.Interfaces.Parse.MvxSerializableBindingSpecification& requestedBindings) [0x00000] in <filename unknown>:0 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T12:13:25.977

你应该使用“;” 而不是 "," 来添加多个绑定描述。

```
local:MvxBind="ItemSource Locations; Visibility IsDayVisible,Converter=Visibility" 
```

应该管用 ：-）

# ember.js - 如何在emberjs中同时动态更新2个模板

> ID：15833104
> 
> 赞同：1
> 
> 时间：2013-04-05T11:44:41.313
> 
> 标签：ember.js, ember-data

在下面的 jsFiddle 中，我添加了一个小示例 ember 应用程序。在“详细信息”视图中，我想显示有关所选组的信息，如果我单击组中的设备，我想用设备详细信息替换详细信息。我如何以 ember 方式管理这个？

[http://jsfiddle.net/theremin/qGCe6/1/](http://jsfiddle.net/theremin/qGCe6/1/)

**模板**

```
<script type="text/x-handlebars" data-template-name="application">
    <h2>SampleApp</h2>
    {{outlet}}
</script>

<script type="text/x-handlebars" data-template-name="groups">

    <div>
        <h3>Groups</h3>             
<div style="">
            <ul>
            {{#each controller}}
                <li>{{#linkTo "devices" devices}}{{name}}{{/linkTo}}</li>
            {{/each}}
            </ul>
        </div>
    </div>
    <div>
        {{render 'devices'}}
    </div>
    <div>
        {{render 'details'}}
    </div>
</script>    

<script type="text/x-handlebars" data-template-name="devices">

    <h3>Devices</h3>
    <div>
        <ul>
        {{#each model}}
            <li>{{#linkTo "details" App.Device}}{{name}}{{/linkTo}}</li>
        {{/each}}
        </ul>
    </div>
</script>

<script type="text/x-handlebars" data-template-name="details">
    <h3>Details for:</h3> 
    <div>
        <i>{{model}}</i>
    </div>
</script> 
```

**JAVASCRIPT**

```
App = Ember.Application.create({});

App.Store = DS.Store.extend({
    revision    : 12,
    adapter     : 'DS.FixtureAdapter'
});

App.Router.map( function() {
    this.resource('groups', function() {
        this.resource('devices', { path: "/:group_id" });
        this.resource('details', { path: "/:device_id" });
    });
});

/**
 * ROUTES
 */
App.IndexRoute = Ember.Route.extend({
    redirect: function() {
        this.transitionTo('groups');
    }
});

App.GroupsRoute = Ember.Route.extend({
    model       :   function( ){
        //console.log("--->", App.Group.find());
        return App.Group.find();
    }
});

/*App.DetailsRoute = Ember.Route.extend({
    model : function(){
        return this.modelFor("details");
    }
});*/

/**
 * MODELS
 */
App.Group = DS.Model.extend({
    name: DS.attr('string'),
    details: DS.attr('string'),
    devices: DS.hasMany('App.Device')
});

App.Device = DS.Model.extend({
    name: DS.attr('string'),
    details: DS.attr('string'),
    groups: DS.hasMany('App.Group')
});

/**
 * FIXTURES
 */

App.Group.FIXTURES = [{
    id:1,
    name:"Group one",
    details:"details for Group one",
    devices:[1,2]

},{
    id:2,
    name:"Group two",
    details:"details for Group two",
    devices:[2]
}];

App.Device.FIXTURES = [{
    id:1,
    name:"Device1",
    details:"details for Device1",
    groups: [1]

},{
    id:2,
    name:"Device2",
    details:"details for Device2",
    groups:[2]
}]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:03:40.523

这是[你](http://jsfiddle.net/qGCe6/4/)想要实现的吗？

**所做的更改**

我改变了嵌套

```
App.Router.map( function() {
    this.resource('groups', function() {
        this.resource('devices', { path: "/:group_id" }, function(){
            this.resource('details', { path: "/:device_id" });
        });
    });
}); 
```

这样路线就会像`/groups/:group_id/:device_id`

然后我删除了`{{render}}`助手并添加`{{outlet}}`到模板中

模板更改`devices`，我将`device`模型传递给控制器​​，您正在传递`App.Detail`

```
{{#each device in model}}
    <li>{{#linkTo "details" device}}{{device.name}}{{/linkTo}}</li>
{{/each}} 
```

`details`模板的变化

现在我们有了整个模型，我们可以使用`details`属性获取详细信息

```
<i>{{model.details}}</i> 
```

如果您认为我没有正确解释您的问题，请告诉我，我会相应地更新答案

**根据评论更新：** [小提琴](http://jsfiddle.net/UVBRd/2/)

### 只有一个细节（最终解决方案）

[小提琴](http://jsfiddle.net/UVBRd/3/)

所需的更改是

*   删除`{{template}}`显示组详细信息并使用单个显示组详细`{{outlet}}`信息。*   添加重定向，`GroupIndexRoute`其中重定向以在单击组时显示组详细信息

    ```
    App.GroupIndexRoute = Ember.Route.extend({
      redirect: function(){
        var model = this.controllerFor('group').get('model');
        this.transitionTo('detail',model);
      }
    }); 
    ```

# sql - 在VBScript中的sql字符串中使用excels命名范围

> ID：15833105
> 
> 赞同：4
> 
> 时间：2013-04-05T11:44:42.353
> 
> 标签：sql, vba, excel, vbscript, adodb

我在这里和谷歌上搜索过，但我仍然无法解决我的问题。我正在尝试在我的`.vbs`文件中等效地使用 excel 的命名范围。以下在 excel 中的 VBA 中工作，但我无法让它在`*.vbs`文件中工作。

```
ThisWorkbook.Sheets(1).Range("A1:B" & Range("B" & Rows.Count).End(xlUp).Row).Name = "DATA"
strSql = "SELECT * FROM DATA" 
```

所以，我尝试了不同的引用我的命名范围`DATA`的变体，但没有运气。
这就是我现在所拥有的：

```
Set rng = ws.Range("A1:B2")
rng = "DATA"    
strSql = "SELECT * FROM DATA" 
```

涉及一些不同的变体：采用参数 ByVal，使用 rng 而不是 DATA（字符串类型），`SELECT * FROM " & rng, etc..`

运行时的错误消息：

> Microsoft (R) Windows Script Host 版本 5.8 版权所有 (C) Microsoft Corporation。版权所有。
> 
> C:\Users\admin\Desktop\UpdateSourceTbl.vbs(119, 5) Microsoft JET 数据库引擎：Microsoft Jet 数据库引擎找不到对象“DATA”。确保对象存在并且正确拼写其名称和路径名。

非常感谢任何帮助！

**临时解决方案：** 我使用了 2 个带有行号的参数，可能不是最好的解决方案 - 但它有效！我看不出公平有什么问题

```
Call createAndInsertRecordSet(wb.FullName, ws.Name, i+1, j-1)
Sub CreateAndInsertRecordSet(ByVal fullname, ByVal wsName, ByVal stRow, byVal enRow )
strSql = "SELECT * FROM [" & wsName & "$B" & stRow & ":AX" & enRow & "]" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T16:02:11.133

编辑：请换行

```
ws.Range("B2:AX2") = "MyRange" 
```

和

```
activeworkbook.Names.Add Name:="myRange", RefersTo:="B2:AX2" 
```

我认为这将正确创建名称 DATA。

**不幸的是，如果不保存工作簿**，它仍然可能无法工作，因为 JET OLE DB 提供程序/数据库引擎在磁盘上的文件上工作，*而不是在内存中*

在这里我想你可能需要动态创建一个**Schema.ini**文件来定义你想要的列。

*请记住，JET 期望在列中查看数据，因此如果有要跳过的列，那么可能需要在 Schema 文件中定义它们，* **即使这意味着您必须在运行时动态编写模式**

这里还有一点，您可以通过在 MS Excel 中使用 MS Query 运行查询来检查/调试您遇到的错误，以查看 JET DB 引擎是否可以*看到*DATA 范围

您需要阅读如何使用 ADO/OLE DB 访问 Excel 数据

首先，要了解如何引用您的 DATA 命名范围，请在 Excel 中打开 MS Query 并查询工作表

请参阅此站点：[使用 MS Query 将 Excel 视为关系数据源](http://www.exceluser.com/explore/msquery1_1.htm)

请参阅以下链接：

*   [MSDN KB：如何将 ADO 与 Visual Basic 或 VBA 中的 Excel 数据一起使用](http://support.microsoft.com/kb/257819)
*   在**Excel 用户 MVP 网站上将 Excel 视为**[关系数据源](http://www.exceluser.com/explore/msquery1_1.htm)
***   [办公空间：使用 ADO 查询 Excel 电子表格](http://technet.microsoft.com/en-us/library/ee692882.aspx)**

 **请记住，在 Excel 的 VB 编辑器中的 Excel VBA 中的工作方式与在 VBScript 中的工作方式不同，因为没有类型声明，也没有 Intellisense。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-08T11:41:31.937

工作可能是不可预测的，有时我们不得不回去修改、修复、重用前一段时间的代码。今天发生了。我已经返回并复制了我的代码并第一次让它工作。当我发布这个问题时，我一定是做错了什么，查看错误的行或程序或一些奇怪的东西。下面的代码运行完美。
它：
- 打开工作簿
- 与工作簿建立连接以检索记录集中的数据
- 打开与数据库的连接并执行示例插入语句
运行代码后，我检查了临时数据库，值已插入，所以我可以确认这是我对最初提出的问题的有效解决方案。

```
Option Explicit

Private Const adUseClient = 3
Dim xl, wb, ws, fPath, rng

fPath = "C:\Users\admin\Desktop\Book1.xlsm"

Call OpenFile()
Call InsertRecordset()
Call CloseFile()

Private Sub OpenFile()
    Set xl = CreateObject("Excel.Application")
    xl.Visible = False
    Set wb = xl.Workbooks.Open(fPath)
    Set ws = wb.Sheets(1)
End Sub

Private Sub CloseFile()
    wb.Saved = True
    wb.Close
    xl.Quit
    Set wb = Nothing
    Set xl = Nothing
End Sub

Private Sub InsertRecordset()

    strCon = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & wb.fullname & ";Extended Properties=""Excel 8.0;HDR=NO;IMEX=1"";"
    Dim cn, rs, strCon, strSql, cn2

    ws.Range("A1:B2").Name = "DATA"
    strSql = "SELECT * FROM DATA"

    Set cn = CreateObject("ADODB.Connection")
    Set rs = CreateObject("ADODB.Recordset")

    cn.Open strCon          
    rs.Open strSql, cn      

    Set cn2 = CreateObject("ADODB.Connection")
    With cn2
        .CursorLocation = adUseClient
        .Open "Driver={SQL Server};Server=HELIUM\PRI; Database=TEMPORARY; UID=admin; PWD=password"
        .CommandTimeout = 0
        rs.MoveFirst
        Do While Not rs.EOF
            .Execute "INSERT INTO TEMPORARY.dbo.TEMP_TABLE ( [TEMP_COLUMN] ) VALUES ('" & rs.Fields(1) & "')"
            rs.MoveNext
            Loop
    End With

    ' Close connections
    rs.Close
    Set rs = Nothing
    cn.Close
    Set cn = Nothing
    cn2.Close
    Set cn2 = Nothing
End Sub 
```**

# jquery - 语法错误：缺少：在属性 id jquery 之后

> ID：15833110
> 
> 赞同：-4
> 
> 时间：2013-04-05T11:44:58.810
> 
> 标签：jquery, ajax, jquery-validate

我正在使用 jquery 来执行单击提交按钮的操作。我正在对表单进行验证，并且只需要表单中的一个值，而不是全部.. 一切看起来都很好，但出现错误..

```
 $('#tabs-1').on('click', '#showme', function(e){

  $("#form13").validate({
         debug: false,
   rules:{
   trainerss:"required",

    },
   messages:{

    trainerss:"Please choose the trainer",
        },
    submitHandler: function(form) {

    $.ajax
   ({

var trainerss=$("#trainerss").val();//error shows this line
var dataString='trainerss='+trainerss;

type: "POST",
url: "action.php",
data: dataString,
cache: false,

success: function(response) {
    $('.result14').html(response); 

        }

            });
        }
    });  
    }); 
```

我的表格

```
<div id="tabs-1">

    View Trainer Performance<br><br>

    <form id="form13" name="form13" action="" method="post"> 
    <input type="hidden" name="myFormsName" value="form13id" id="myFormsName">
    <select name="trainerss" id="trainerss" class="trainerss">
    <option selected="selected" value="">--Select Trainer--</option>
    <br>
    <option value="one">1</option>
    <option value="two">2</option>
    <option value="three">3</option>
    </select><br>
    <input type="submit" value="Display!" id="submit13" name="submit13"/>
    <br><br>
    </form>
    <div class="result13"></div>
    <input type ="button" id ="showme" class="showme" name="showme" value="Show Member List"/>

    <div class="result14"></div> 
```

提前致谢！！！当用于提交按钮（submit13）时，表单验证并且 trainerss 的值传递，但按钮 showme，显示此错误..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:48:03.197

通过以下方式更改 Ajax 调用：

```
$.ajax
({   
   type: "POST",
   url: "action.php",
   data: {trainerss : $("#trainerss").val()},
   cache: false,

   success: function(response) { //Your treatment
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:46:14.833

改变

```
$.ajax
   ({
 var trainerss=$("#trainerss").val();//error shows this line
 var dataString='trainerss='+trainerss; 
```

至

```
var trainerss=$("#trainerss").val();
var dataString='trainerss='+trainerss;
$.ajax({ 
```

您不能在对象文字中像这样浮动代码。`:`javascript 编译器在文字对象的第一个标记之后查找 a 。

# quickbooks - 因纽特人 QuickBooks 令牌更新和到期

> ID：15833117
> 
> 赞同：4
> 
> 时间：2013-04-05T11:45:21.707
> 
> 标签：quickbooks, intuit-partner-platform

我正在使用 QB 桌面版。并且我想为我的 QuickBooks 桌面版续订/重新生成“访问令牌”/“访问令牌秘密”，因为它们将在 180 天内到期，并且必须在令牌到期后的 30 天内进行续订。我用下面的代码尝试了同样的方法，但它不起作用，给出错误，

```
<RestResponse xmlns="http://www.intuit.com/sb/cdm/v2"><Error RequestId="14aa97c48321489db48254e4bdb25d00"><RequestName>ErrorRequest</RequestName><ProcessedTime>2013-04-05T11:43:08+00:00</ProcessedTime><ErrorCode>401</ErrorCode><ErrorDesc>Invalid security token</ErrorDesc></Error></RestResponse> 
```

令牌生成没有任何记录的请求/响应。

```
 string myRealmId = "000000000000000";
        string myAccessToken = "0000000000000000000000000000000000000";
        string myAccessTokenSecret = "00000000000000000000000000000000000";

        string myAppToken = "00000000000000000000000000000000000";
        string myConsumerKey ="00000000000000000000000000000000000";
        string myConsumerSecret ="00000000000000000000000000000000000";

        OAuthConsumerContext consumerContext = new OAuthConsumerContext
        {
            ConsumerKey =myConsumerKey,
            SignatureMethod = SignatureMethod.HmacSha1,
            ConsumerSecret = myConsumerSecret
        };

        OAuthSession oSession = new OAuthSession(consumerContext, "https://oauth.intuit.com/oauth/v1/get_request_token",
                        "https://workplace.intuit.com/Connect/Begin",
                        "https://oauth.intuit.com/oauth/v1/get_access_token");

        oSession.ConsumerContext.UseHeaderForOAuthParameters = true;

        oSession.AccessToken = new TokenBase
        {
            Realm = myRealmId,
            Token = myAccessToken,
            ConsumerKey = myConsumerKey,
            TokenSecret = myAccessTokenSecret
        };

        var body = "<AdvancedReportQuery xmlns=\"http://www.intuit.com/sb/cdm/v2\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://www.intuit.com/sb/cdm/v2 ..//RestDataFilter.xsd\"><BalanceSheetStd><OfferingId>ipp</OfferingId><EndTransactionDate>2012-06-01</EndTransactionDate></BalanceSheetStd></AdvancedReportQuery>";

        IConsumerRequest conReq = oSession.Request();
        conReq = conReq.Post().WithRawContentType("text/xml").WithRawContent(System.Text.Encoding.ASCII.GetBytes(body)); 
        conReq = conReq.ForUrl("https://services.intuit.com/sb/advancedreport/v2/508053445");
        try
        {
            conReq = conReq.SignWithToken();
        }
        catch (Exception ex) {}

        string serviceResponse = conReq.ReadBody();

        }
        catch (Exception Err) {}

    } 
```

谢谢，

瑞诗玛 D.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T12:58:22.627

您需要在令牌到期前 30 天内调用 Reconnect API。您的令牌似乎已经过期，因此您需要再次通过 Oauth 流程。

[http://docs.developer.intuit.com/0025_Intuit_Anywhere/0060_Reference/3002_Reconnect_API](http://docs.developer.intuit.com/0025_Intuit_Anywhere/0060_Reference/3002_Reconnect_API)

使用 DevDefined 和 DevKit 的 C# 示例：

[https://gist.github.com/IntuitDeveloperRelations/5338762](https://gist.github.com/IntuitDeveloperRelations/5338762)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-21T03:00:18.057

我找到了一种每次启动应用程序时都可以访问同一家公司的方法。这花了我一些时间来弄清楚。但是我在节点 js 中做到了这一点；这个概念仍然适用于任何编程语言。

```
'use strict';

var request = require('request');
var qs = require('querystring');
var config = require('./environment');
var QuickBooks = require('node-quickbooks');

var postBody = {
  url: QuickBooks.REQUEST_TOKEN_URL,
  oauth: {
    // This callback url is just a placeholder so QuickBooks doesn't get upset
    callback: "http://localhost:9000/oauth/quickbooks/callback",
    consumer_key:    config.quickbooks.consumerKey, 
    consumer_secret: config.quickbooks.consumerSecret
  }
}
request.post(postBody, function (e, r, data) {
  var requestToken = qs.parse(data)

  var postBody = {
    url: QuickBooks.ACCESS_TOKEN_URL,
    oauth: {
      consumer_key:    config.quickbooks.consumerKey,
      consumer_secret: config.quickbooks.consumerSecret,
      token:           requestToken.oauth_token,
      token_secret:    requestToken.oauth_token_secret,
      verifier:        config.quickbooks.companyId, // This part is key
      realmId:         config.quickbooks.companyId
    }
  }
  request.post(postBody, function (e, r, data) {
    var accessToken = qs.parse(data)

    GLOBAL.qbo = new QuickBooks(config.quickbooks.consumerKey,
                             config.quickbooks.consumerSecret,
                             accessToken.oauth_token,
                             accessToken.oauth_token_secret,
                             config.quickbooks.companyId,
                             true);
    console.log('Quickbooks Integration Complete');
  })
}) 
```

# android - 字符串数组到字符串：使用 Implode 的问题

> ID：15833119
> 
> 赞同：0
> 
> 时间：2013-04-05T11:45:30.600
> 
> 标签：android, arrays, string, implode

按照[此处](http://imwill.com/implode-string-array-java/#.UV6qSatOruN)找到的说明，我正在尝试将字符串数组转换为字符串，但是我得到了一些无法删除的*空值。*

我一直在使用的代码：

首先，我填写 textviews 并用结果制作数组。

```
public void doCalculations(){
    //write number of teeth for every cog from a cassette
    for(int i=0; i<cassCogs[0]; i++){
        tvCogsArray[i].setBackgroundColor(Color.LTGRAY);
        tvCogsArray[i].setText(String.valueOf(cassCogs[i+1]) +" " + getString(R.string.teeth));
        }

    if (Integer.parseInt(chainringCount) == 1){
        for (int counter = 0; counter<cassCogs[0]; counter++ ){
            float temp = (Float.parseFloat(wheelsize) *     (Float.parseFloat(chainringOne) /cassCogs[counter + 1] ))/1000;
            tvOne[counter].setText(String.format("%.2f", temp));

            toEmail_1[counter] = String.format("%.2f", temp);
        }
    }else if (Integer.parseInt(chainringCount) == 2){
        for (int counter = 0; counter<cassCogs[0]; counter++ ){
            float temp = (Float.parseFloat(wheelsize) * (Float.parseFloat(chainringOne)/cassCogs[counter + 1] ))/1000;
            tvOne[counter].setText(String.format("%.2f", temp));

            toEmail_1[counter] = String.format("%.2f", temp);

            float second = (Float.parseFloat(wheelsize) *(Float.parseFloat(chainringTwo)/cassCogs[counter+ 1] ))/1000;
            tvTwo[counter].setText(String.format("%.2f", second));

            toEmail_2[counter] = String.format("%.2f", second);

        }
    }else if (Integer.parseInt(chainringCount)==3){
        for (int counter = 0; counter<cassCogs[0]; counter++ ){
            float temp = (Float.parseFloat(wheelsize) *(Float.parseFloat(chainringOne)/cassCogs[counter + 1] ))/1000;
            tvOne[counter].setText(String.format("%.2f", temp));

            toEmail_1[counter] = String.format("%.2f", temp);

            float second = (Float.parseFloat(wheelsize) *(Float.parseFloat(chainringTwo)/cassCogs[counter + 1] ))/1000;
            tvTwo[counter].setText(String.format("%.2f", second));

            toEmail_2[counter] = String.format("%.2f", second);

            float third = (Float.parseFloat(wheelsize)*(Float.parseFloat(chainringThree)/cassCogs[counter+ 1] ))/1000;
            tvThree[counter].setText(String.format("%.2f", third));

            toEmail_3[counter] = String.format("%.2f", third);

            }
             }
       } 
```

通过电子邮件发送结果的功能

```
 private void mail(){

    Intent i = new Intent (Intent.ACTION_SEND);
    i.setType("message/rfc822");
    i.putExtra(Intent.EXTRA_EMAIL, new String[]{});
    i.putExtra(Intent.EXTRA_SUBJECT, getApplicationContext().getString(R.string.calculos));
    i.putExtra(Intent.EXTRA_TEXT, composeBody());

    try{
        startActivity(Intent.createChooser(i, "Send Mail..."));
    }catch (android.content.ActivityNotFoundException ex){
     Toast.makeText(getApplicationContext(), "There are no...", Toast.LENGTH_LONG).show();
    }

} 
```

在这里，我写了电子邮件正文：

```
public String composeBody(){
    String bodyText="";
    String join1="";
    String join2="";
    String join3="";
    if(Integer.parseInt(chainringCount)==1){
        if (toEmail_1.length >0) {
            join1 = implodeArray(toEmail_1, glueString);
        }
        bodyText= bannerText  + lineSep + join1;
    }else if (Integer.parseInt(chainringCount)==2){

        if (toEmail_1.length >0) {
            join1 = implodeArray(toEmail_1, glueString);
        }
        if (toEmail_2.length >0){
            join2=implodeArray(toEmail_2, glueString);
        }
        bodyText= bannerText  + lineSep + join1 + lineSep + join2;
    }else if(Integer.parseInt(chainringCount)==3){
        if (toEmail_1.length >0) {
            join1 = implodeArray(toEmail_1, glueString);
        }
        if (toEmail_2.length >0){
            join2=implodeArray(toEmail_2, glueString);
        }
        if(toEmail_3.length>0) {
            join3=implodeArray(toEmail_3,glueString);
        }
        bodyText= bannerText  + lineSep + join1 + lineSep + join2 + lineSep +join3;         
    }       
    return bodyText; 
```

将字符串数组转换为字符串：

```
 public static String implodeArray(String[] inputArray, String glueString){
String output= "";
if(inputArray.length > 0){
    StringBuilder sb = new StringBuilder();
    sb.append(inputArray[0]);

    for (int i=1; i<inputArray.length;i++){
        sb.append(glueString);
        sb.append(inputArray[i]);
    }
    output=sb.toString();
}
return output;
 } 
```

在我的手机屏幕上，我可以看到以下内容：2 列，每个链环一个 10 行，每个齿轮一个。

![doCalculations 的结果](https://i.stack.imgur.com/EcQFU.png)

当我发送带有结果的电子邮件时，这就是我得到的：

> ULTEGRA 11-28 * 36/46 2,64 * 3,08 * 3,52 * 3,89 * 4,35 * 4,93 * 5,28 * 5,69 * 6,16 * 6,73 * 空
> 3 ,38 * 3,94 * 4,50 * 4,98 * 5,56 * 6,30 * 6,75 * 7,27 * 7,88 * 8,59 * 空

我很迷茫，你能帮我一把吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T22:14:11.273

好吧，这很容易，感谢**@ssantos**的帮助：

我最初的数组声明考虑到了最大容量

```
String[] toEmail_1 = new String[11];
String[] toEmail_2 = new String[11];
String[] toEmail_3 = new String[11]; 
```

现在，我为要使用的数组设置容量：

```
 ...else if (Integer.parseInt(chainringCount) == 2){
        toEmail_1 = new String[cassCogs[0]];
        toEmail_2 = new String[cassCogs[0]];

        for (int counter = 0; counter<cassCogs[0]; counter++ ){
            float temp = (Float.parseFloat(wheelsize) * (Float.parseFloat(chainringOne) /cassCogs[counter + 1] ))/1000;
            tvOne[counter].setText(String.format("%.2f", temp));

            toEmail_1[counter] = String.format("%.2f", temp);

            float second = (Float.parseFloat(wheelsize) *(Float.parseFloat(chainringTwo) /cassCogs[counter+ 1] ))/1000;
            tvTwo[counter].setText(String.format("%.2f", second));

            toEmail_2[counter] = String.format("%.2f", second);

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:47:17.570

您的 implodeArray 函数似乎没问题，很可能您将这些空值放在上面的代码中。两个快速测试。-

*   尝试调试/记录要添加到数组中的值，例如

    `toEmail_1[counter] = String.format("%.2f", temp);`

*   只是为了确保 implodeArray 正常工作，请尝试使用模拟数组调用它

    `implodeArray(new String[]{"foo1","foo2","foo3","foo4","foo5","foo6"}, "*")`

# android - 仅从网络提供商处获取实际位置，而不是 lastknowlocation

> ID：15833120
> 
> 赞同：1
> 
> 时间：2013-04-05T11:45:36.303
> 
> 标签：android, gps

我想从网络获取位置。但我不想要 lasknowlocation，如果启用了网络提供商，但我不在线。如果启用了提供程序，我想要实际位置（纬度和经度），如果它不是实际的，我想要 null （或其他东西）。

我正在使用这个

```
package com.example.tankograf_test;

import android.app.AlertDialog;
import android.app.Service;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.os.IBinder;
import android.provider.Settings;
import android.util.Log;

public class GPSHelper extends Service implements LocationListener {

private final Context mContext;

// flag for GPS status
boolean isGPSEnabled = false;

// flag for network status
boolean isNetworkEnabled = false;

// flag for GPS status
boolean canGetLocation = false;

Location location; // location
double latitude; // latitude
double longitude; // longitude

// The minimum distance to change Updates in meters
private static final long MIN_DISTANCE_CHANGE_FOR_UPDATES = 10; // 10000 meters

// The minimum time between updates in milliseconds
private static final long MIN_TIME_BW_UPDATES = 1000 * 60 * 1; // 20 minute

// Declaring a Location Manager
protected LocationManager locationManager;

public GPSHelper(Context context) {
    this.mContext = context;
    getLocation();
}

public Location getLocation() {
    try {
        locationManager = (LocationManager) mContext
                .getSystemService(LOCATION_SERVICE);

        // getting GPS status
        isGPSEnabled = locationManager
                .isProviderEnabled(LocationManager.GPS_PROVIDER);

        // getting network status
        isNetworkEnabled = locationManager
                .isProviderEnabled(LocationManager.NETWORK_PROVIDER);

        if (!isGPSEnabled && !isNetworkEnabled) {
            // no network provider is enabled
        } else {
            this.canGetLocation = true;
            // First get location from Network Provider
            if (isNetworkEnabled) {
                locationManager.requestLocationUpdates(
                        LocationManager.NETWORK_PROVIDER,
                        MIN_TIME_BW_UPDATES,
                        MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                Log.d("Network", "Network");
                if (locationManager != null) {
                    //location = null;
                    location = locationManager
                            .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
                    if (location != null) {
                        latitude = location.getLatitude();
                        longitude = location.getLongitude();
                    }
                }
            }
            // if GPS Enabled get lat/long using GPS Services
            if (isGPSEnabled) {
                if (location == null) {
                    locationManager.requestLocationUpdates(
                            LocationManager.GPS_PROVIDER,
                            MIN_TIME_BW_UPDATES,
                            MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                    Log.d("GPS Enabled", "GPS Enabled");
                    if (locationManager != null) {
                        //location = null;
                        location = locationManager
                                .getLastKnownLocation(LocationManager.GPS_PROVIDER);
                        if (location != null) {
                            latitude = location.getLatitude();
                            longitude = location.getLongitude();
                        }
                    }
                }
            }
        }

    } catch (Exception e) {
        e.printStackTrace();
    }

    return location;
}

/**
 * Stop using GPS listener
 * Calling this function will stop using GPS in your app
 * */
public void stopUsingGPS(){
    if(locationManager != null){
        locationManager.removeUpdates(GPSHelper.this);
    }
}

/**
 * Function to get latitude
 * */
public double getLatitude(){
    if(location != null){
        latitude = location.getLatitude();
    }

    // return latitude
    return latitude;
}

/**
 * Function to get longitude
 * */
public double getLongitude(){
    if(location != null){
        longitude = location.getLongitude();
    }

    // return longitude
    return longitude;
}

/**
 * Function to check GPS/wifi enabled
 * @return boolean
 * */
public boolean canGetLocation() {
    return this.canGetLocation;
}

/**
 * Function to show settings alert dialog
 * On pressing Settings button will lauch Settings Options
 * */
public void showSettingsAlert(){
    AlertDialog.Builder alertDialog = new AlertDialog.Builder(mContext);

    // Setting Dialog Title
    alertDialog.setTitle("GPS");

    // Setting Dialog Message
    alertDialog.setMessage("GPS neni povoleno, chce jit do nastaveni?");

    // On pressing Settings button
    alertDialog.setPositiveButton("Settings", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog,int which) {
            Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
            mContext.startActivity(intent);
        }
    });

    // on pressing cancel button
    alertDialog.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
        dialog.cancel();
        }
    });

    // Showing Alert Message
    alertDialog.show();
}

@Override
public void onLocationChanged(Location location) {
}

@Override
public void onProviderDisabled(String provider) {
}

@Override
public void onProviderEnabled(String provider) {
}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
}

@Override
public IBinder onBind(Intent arg0) {
    return null;
}

} 
```

并在活动中获得位置

```
gps = new GPSHelper(this);
                 if(gps.canGetLocation()){

                    double lat = gps.getLatitude(); // returns latitude
                    double lon =  gps.getLongitude(); // returns longitude
                    Log.d("pozice", String.valueOf(lat) + ", "+String.valueOf(lat)); 

                    Location net = gps.getLocation();
                    if (net==null){
                        Log.d("getLocation", "pozice je prazdna");
                    } else {
                        Log.d("getLocation", "pozice neni prazdna");
                    }

                    double latN = net.getLatitude();
                    double lonN = net.getLongitude();
                    if (latN!=0){
                        Log.d("getLocation", "location NOT empty");
                        Log.d("lat", String.valueOf(latN));
                        Log.d("lon", String.valueOf(lonN));
                        pozice[0] = net.getLatitude();
                        pozice[1] = net.getLongitude();

                        ZobrazPozici(pozice[0], pozice[1],7 ,true);
                        vypocitejVzdalenost();
                    } else {
                        Log.d("getLocation", "position empty = do something");
                    } 
```

我尝试自己解决它，但我不知道如何:(这并不是非常重要，但如果我这样做就好了:)

（当它工作时，我对从网络获取位置有点困惑，什么时候我不认为我的问题有意义）

# eclipse - 如果在 Eclipse 上打开，Maven 不会部署相关项目

> ID：15833122
> 
> 赞同：0
> 
> 时间：2013-04-05T11:45:51.360
> 
> 标签：eclipse, maven

我有一个核心项目（core-jsf）作为其他项目的参考。它工作正常，但我必须解决一个奇怪的行为。这就是发生的事情：

如果 core-jsf 项目在 Eclipse 上打开，当我尝试部署子项目（在 Tomcat 上）时，Maven 不会生成 core-jsf JAR。因此，我无法构建子项目，因为我得到了一堆 ClassNotFoundDef。

我的解决方法是：保证 core-jsf 在工作区中关闭。你们可以想象给我带来的麻烦......就像在运行中调试和测试新功能之类的东西。

这发生在其他人身上吗？任何想法如何解决这一问题？给大家介绍一下配置...

子项目的依赖...

```
 <!-- Core -->
    <dependency>
        <groupId>br.com.sol7</groupId>
        <artifactId>core-jsf</artifactId>
        <version>0.0.1-SNAPSHOT</version>
    </dependency> 
```

子项目的部署程序集

![](https://dl.dropbox.com/u/15625458/imagens/maven.PNG)

core-jsf 项目有 JAR 包装......我可以提供更多信息来帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T17:02:11.423

我认为这不是因为eclipse而是因为maven。Eclipse 会看到您的依赖关系，但甚至没有（当您部署时）。当您部署 eclipse 时，我认为使用 ative maven。确保在部署项目之前部署了依赖项。我的意思是，如果您对源有依赖关系，则无法部署该项目。结果，您必须对某些 jar 具有依赖性。

# winforms - 为什么从 DataGridView 以编程方式选择多行不突出显示行

> ID：15833125
> 
> 赞同：1
> 
> 时间：2013-04-05T11:45:59.210
> 
> 标签：winforms, datagridview

我尝试以编程方式选择控制中的多行`DataGridView`。我这样做是这样的：

```
dgvMain[0, 6].Selected = true;
dgvMain[0, 9].Selected = true; 
```

从技术上讲，它是有效的，因为

```
dgvMain.SelectedRows; 
```

返回正确的值。

不幸的是，所选行没有在 GUI 中突出显示。这个问题消失时

```
dgvMain.MultiSelect = false 
```

我已将`SelectionMode`属性设置为`FullRowSelect`. 我尝试了所有方法，例如：、、、，但`Invalidate`没有成功。`Refresh``RefreshEdit`

任何想法为什么这不能按预期工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T16:49:23.713

我解决了这个问题。主要问题是我试图在显示控件之前选择行。这个问题在这里描述：http: [//psworld.pl/Programming/DataGridViewBugs](http://psworld.pl/Programming/DataGridViewBugs)

# mysql - MySQL 查询因连接表上的参数检查而减慢

> ID：15833129
> 
> 赞同：0
> 
> 时间：2013-04-05T11:46:01.697
> 
> 标签：mysql

我正在编写一个存储过程，其功能是获取一些参数（由最终用户填充）并执行搜索。但是，如果参数没有值，则不应将其包含在 WHERE 子句中。为此，我将参数作为 OR 子句的第一部分进行检查，如下所示：

```
... WHERE (param1 = '' OR field1 = param1) AND (param2 = '' OR field2 = param2)  ... 
```

然后我将其合并到一个一般的选择语句中，如下所示：

```
SELECT *
FROM table1 t1
WHERE (param1 = '' OR t1.field1 = param1) 
```

***请注意**，为清楚起见，我在此示例中仅包含了一个参数。真正的查询包含多个参数和字段比较。*

这工作正常并且运行迅速（例如，“真实”查询在大约 0.5 秒内返回结果）。

到现在为止还挺好。然而，当引入一个连接表时，事情就开始出错了。例如，如果我执行下面的查询，则需要更长的时间（实际查询需要 3-4 秒）：

```
SELECT *
FROM table1 t1

LEFT JOIN table2 t2
ON t1.table2Id = t2.id

WHERE (param1 = '' OR t2.field1 = param1) 
```

***请注意**，该参数现在正在与连接表 (table2) 中的字段进行比较。*

***请注意**，在这两个示例中，在运行查询时，我确保 param1 填充了一个值。*

现在，如果我删除`param1 = '' OR`上述 WHERE 子句的部分，它的运行速度与之前的未连接查询一样快。

尽管我已经尝试过，但我的表中使用的所有字段目前都没有被索引，这对我遇到的问题没有任何影响。

那么，谁能向我解释为什么第一个查询（单个表）工作得很快，但第二个查询（连接表）花费的时间不成比例？

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:50:42.667

尝试将第一个条件添加为 the 的一部分，`JOIN`看看是否对您有帮助。

```
SELECT *
FROM table1 t1

LEFT JOIN table2 t2
ON t1.table2Id = t2.id AND
t2.field1 = param1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:54:08.567

您可以尝试创建一个视图，并在您的联接语句中使用该视图的结果。

```
CREATE VIEW `VW_my_simple_table_view_name` AS SELECT *
FROM table1 t1
WHERE (param1 = '' OR t1.field1 = param1) 
```

然后查询看起来像这样（可能需要调整）

```
SELECT *
FROM VW_my_simple_table_view_name t1

LEFT JOIN table2 t2
ON t1.table2Id = t2.id

WHERE (t2.field1 = param1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T14:40:16.370

我终于通过删除`LEFT JOIN`on table2 并用下面的简单替换它来解决这个问题`JOIN`：

```
SELECT *
FROM table1 t1

JOIN table2 t2
ON t1.table2Id = t2.id

WHERE (param1 = '' OR t2.field1 = param1) 
```

老实说，绝对没有理由将其设为 LEFT JOIN。我只是没想到！无论如何，非常感谢 Evan 和 Michael 的帮助和建议（以及他们超快速的反应）。

# zend-framework2 - 如何将 PdfModel 保存到 Zend Framework 2 中的文件？

> ID：15833137
> 
> 赞同：1
> 
> 时间：2013-04-05T11:46:41.413
> 
> 标签：zend-framework2, dompdf

我使用 ZF2 和 DOMPDFModule\View\Model\PdfModel 来生成 pdf。当它显示为视图时，一切都很好，但我不知道如何将其保存到文件中（在代码中，没有询问用户下载）。我有这样的代码：

```
use DOMPDFModule\View\Model\PdfModel;

$viewModel = new PdfModel($variables);
$viewModel->setTemplate('pos/stocklist/' . $type);
$viewModel->setOption('paperSize', 'a4');
$viewModel->setOption('paperOrientation', 'portrait');
$viewModel->setOption('fileName', 'stock.pdf'); 
```

我试图用这种方式来做，但是渲染方法不存在：

```
$output = $viewModel->render();
$handle = fopen($file_path.DIRECTORY_SEPARATOR.$file_name , 'w');
fwrite( $handle,$output );
fclose( $handle ); 
```

感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-14T23:12:15.733

[项目的 github README 页面上的](https://github.com/raykolbe/DOMPDFModule)一个示例显示了`$viewModel`从控制器操作返回的内容。此外，`filename`您已经指定的选项应该强制下载文件而不是在浏览器中显示。

作者实现了一个视图策略/渲染器，它创建实际的 dompdf 对象并自动为您渲染视图模型，类似于现有的 zf2 行为，因此您不必缩短 MVC 生命周期。

# css - 如果 :pseudo 元素不可用，还有哪些其他方法可以裁剪/剪辑背景图像？

> ID：15833144
> 
> 赞同：0
> 
> 时间：2013-04-05T11:46:54.717
> 
> 标签：css, background, background-image, pseudo-element

我有一个具有多个背景的按钮。其中一个背景是`CSS-sprite`包含图标的 (864px x 18px)。

我正在尝试将背景添加到`<input>`元素以使其成为带有图标的按钮。问题是，我不能使用`:before/:after`，因为输入没有内容，所以我不能添加一个元素，指定它的比例并使用`background-size/position`.

这是我所拥有的：

```
.buttonUpInput {
    background: rgba(0, 0, 0, 0.4), #7EB238;
    background-image: none; /* fallback */
    background-image: url("http://mysprite.png"), -webkit-gradient(radial, center center, 0px, center center, 100%, color-stop(rgba(52,109,28,1)), color-stop(rgba(52,109,28,0) )), -webkit-gradient(linear, left top, left bottom, from( #9ad945 ), to( #7eb238 )); 
    background-image: url("http://code.jquery.com/mobile/1.3.0/images/icons-18-white.png"), -webkit-radial-gradient(center, ellipse cover,  rgba(52,109,28,1), rgba(52,109,28,0) ), -webkit-linear-gradient( #9ad945, #7eb238 ); 
    background-image: url("http://code.jquery.com/mobile/1.3.0/images/icons-18-white.png"), -moz-radial-gradient(center, ellipse cover, rgba(52,109,28,1), rgba(52,109,28,0) ), -moz-linear-gradient( #9ad945, #7eb238 ); 
    background-image: url("http://code.jquery.com/mobile/1.3.0/images/icons-18-white.png"), -ms-radial-gradient(center, ellipse cover, rgba(52,109,28,1), rgba(52,109,28,0) ), -ms-linear-gradient( #9ad945, #7eb238 ); 
    background-image: url("http://code.jquery.com/mobile/1.3.0/images/icons-18-white.png"), -o-radial-gradient(center, ellipse cover, rgba(52,109,28,1), rgba(52,109,28,0) ), -o-linear-gradient( #9ad945, #7eb238 ); 
    background-image: url("http://code.jquery.com/mobile/1.3.0/images/icons-18-white.png"), radial-gradient(ellipse at center, rgba(52,109,28,1) 67%, rgba(52,109,28,0) 69%), linear-gradient( #9ad945, #7eb238 );
    background-attachment: scroll, scroll, scroll;
    background-repeat: no-repeat, no-repeat, no-repeat;
    background-position: -100px 50%, 7px 50%, center center;
    background-size: 864px 18px, 20px 20px, auto auto;
    background-clip: content-box, content-box, padding-box;
    border: 1px solid #aaa;
    -moz-border-radius: .7em;
    -webkit-border-radius: .7em;
    border-radius: .7em;
    color: white !important;
    font-size: 16px;
    font-weight: 800;
    padding: 2px 14px 4px 1px;
    text-indent: 35px;
    width: auto;
    height: 2.25em;
    cursor: pointer;
} 
```

**问题：**
我可以尝试硬编码/调整按钮大小/宽度（我更喜欢灵活）以尝试使用`content-box/padding-box`，但我无法让它工作。我想知道是否还有其他方法可以仅使用 CSS 来实现这一目标？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:54:12.443

您几乎无法做任何事情来裁剪这样的背景。[SVG sprite 堆栈](http://simurai.com/post/20251013889/svg-stacks)与您所能得到的一样接近，但对它的支持很差。

但是，您可以将输入更改为按钮元素：

[http://jsfiddle.net/5UGwe/](http://jsfiddle.net/5UGwe/)

```
button:before {
    content: ' ';
    width: 50px;
    height: 50px;
    background: url(http://placehold.it/50x50);
    display: inline-block;
    vertical-align: middle;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T04:29:57.973

知道了。无论添加什么填充，您都可以使用 CSS`box-sizing`来保持元素的宽度。`content-box`因此，可以将按钮设置为图标大小（20x20px）、框大小，`content-box`从而将 iconsprite 裁剪为 20x20 以上。然后使用填充将按钮拉伸到所需的尺寸。

[这里的](http://www.franckreich.de/members/export/css/sample.html)例子

代码：

```
.icon_text {
    background: rgba(0, 0, 0, 0.4), #7EB238;
    background-image: none; /* fallback */
    background-image: url("http://code.jquery.com/mobile/1.3.0/images/icons-18-white.png"), -webkit-gradient(radial, center center, 0px, center center, 100%, color-stop(rgba(52,109,28,1)), color-stop(rgba(52,109,28,0) )), -webkit-gradient(linear, left top, left bottom, from( #9ad945 ), to( #7eb238 )); 
background-image: url("url.png"), -webkit-radial-gradient(center, ellipse cover,  rgba(52,109,28,1), rgba(52,109,28,0) ), -webkit-linear-gradient( #9ad945, #7eb238 ); 
    background-image: url("url.png"), -moz-radial-gradient(center, ellipse cover, rgba(52,109,28,1), rgba(52,109,28,0) ), -moz-linear-gradient( #9ad945, #7eb238 ); 
    background-image: url("url.png"), -ms-radial-gradient(center, ellipse cover, rgba(52,109,28,1), rgba(52,109,28,0) ), -ms-linear-gradient( #9ad945, #7eb238 ); 
background-image: url("url.png"), -o-radial-gradient(center, ellipse cover, rgba(52,109,28,1), rgba(52,109,28,0) ), -o-linear-gradient( #9ad945, #7eb238 ); 
    background-image: url("url.png"), radial-gradient(ellipse at center, rgba(52,109,28,1) 67%, rgba(52,109,28,0) 69%), linear-gradient( #9ad945, #7eb238 );
    background-attachment: scroll, scroll, scroll;
    background-repeat: no-repeat, no-repeat, no-repeat;
    background-position: -100px 50%, 7px 50%, center center;
    background-size: 864px 18px, 20px 20px, auto auto;
    background-clip: content-box, content-box, padding-box;
    -webkit-box-sizing: content-box; 
    -moz-box-sizing: content-box;   
    box-sizing: content-box;
    border: 1px solid #aaa;
    -moz-border-radius: .7em;
    -webkit-border-radius: .7em;
    border-radius: .7em;
    color: white !important;
    font-size: 16px;
    font-weight: 800;
    cursor: pointer;
    text-indent: 2.1em;
    /* padding still hardcoded */
    padding: 5px 92px 6px 7px;
    width: 20px;
    height: 20px;
    } 
```

# ios - 调试 xcode ios 5.0 的最佳实践？

> ID：15833146
> 
> 赞同：-2
> 
> 时间：2013-04-05T11:46:59.117
> 
> 标签：ios, xcode, debugging

早些时候我是一个 .net 程序员，调试非常简单，但现在我发现调试 iOS 很困难。有人可以解释调试 iOS Xcode 的最佳和简单的方法。另外如何在使用快捷键调试时在不必要的文件之间跳过？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:50:55.663

使用断点单步执行代码。还启用一个捕获所有异常的断点。您可能应该分块编程并逐步执行以确保该块有效，然后重复。在 xcode 中调试非常容易，使用断点并注意变量值，因为它们出现在调试窗口中

# android - Android Sqlite：插入后的 last_insert_rowid()

> ID：15833147
> 
> 赞同：1
> 
> 时间：2013-04-05T11:46:59.260
> 
> 标签：android, sqlite

我想`last_insert_rowid()`在我的插入语句之后得到。

我想使用`SQLiteDatabase.execSQL()`，但它说我不能在那里使用 select 语句。

我该如何使用`last_insert_rowid()`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T12:15:31.563

我认为您已经使用此方法在 sqlite 数据库中插入数据，它为您提供了新的插入行。

**无需使用任何其他方法。**

**公共长插入（字符串表、字符串 nullColumnHack、ContentValues 值）**

参数

**table** 要插入行的表

**nullColumnHack** 可选；可能为空。SQL 不允许插入一个完全空的行而不命名至少一个列名。如果您提供的值为空，则表示不知道列名并且无法插入空行。如果未设置为 null，则 nullColumnHack 参数提供可空列名称的名称，以便在您的值为空的情况下显式插入 NULL。

**values** 此映射包含行的初始列值。键应该是列名，值应该是列值

**它返回新插入行的行 ID，如果发生错误，则返回 -1**

像：

```
long a = database.insert("animals", null, values); 
```

`a`是您表的行 ID。

# android - android中的自动完成文本？

> ID：15833149
> 
> 赞同：8
> 
> 时间：2013-04-05T11:47:03.147
> 
> 标签：android

在我的应用程序中，我使用的是自动完成文本。当用户键入**t**时，它会显示**三**、**二**、**五十**，但我想显示**二**、**三**而不是五十。谁能帮我解决这个问题。

```
String search[] = {"one","two","three","four","five","six","seven","fifty"};    

ArrayAdapter<String> adp= new ArrayAdapter<String>(this,R.layout.searchtext, search);
    search_item.setThreshold(1);
    search_item.setAdapter(adp); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T07:12:19.810

我认为您不必创建自定义适配器。您想要的默认功能。检查这个

在这里我有像这样的数组：

```
private static final String[] COUNTRIES = new String[] { "Belgium",
        "France", "France_", "Italy", "Germany", "Spain","abcf","FFa","FFb","bFF","aFF" }; 
```

当我搜索 ff 然后它只给我`2("FFa","FFb")`建议不是`4("FFa","FFb","bFF","aFF")`

![在此处输入图像描述](https://i.stack.imgur.com/PiFZq.png)

**我在 ActionBar 中使用过这个。您也可以在布局中使用它。因为它在 ActionBar 中的自定义布局。**

```
public class TestActivity extends Activity {

    /** Called when the activity is first created. */
    private static final String[] COUNTRIES = new String[] { "Belgium",
        "France", "France_", "Italy", "Germany", "Spain","abcf","FFa","FFb","bFF","aFF" };

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main);

        ActionBar actionBar = getActionBar();
        actionBar.setDisplayHomeAsUpEnabled(true);
        actionBar.setDisplayShowCustomEnabled(true);
        // actionBar.setDisplayShowTitleEnabled(false);
        // actionBar.setIcon(R.drawable.ic_action_search);

        LayoutInflater inflator = (LayoutInflater) this
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View v = inflator.inflate(R.layout.test, null);

        actionBar.setCustomView(v);

        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_dropdown_item_1line, COUNTRIES);
        AutoCompleteTextView textView = (AutoCompleteTextView) v
                .findViewById(R.id.editText1);
        textView.setAdapter(adapter);

    }
} 
```

测试.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Action Bar:"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="#FFFFFF" />

    <AutoCompleteTextView
        android:id="@+id/editText1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:ems="10"
        android:imeOptions="actionSearch"
        android:inputType="textAutoComplete|textAutoCorrect"
        android:textColor="#FFFFFF" >

        <requestFocus />
    </AutoCompleteTextView>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-15T08:57:55.207

**在科特林：**

我对缩写视图使用数据绑定

**xml:**

```
 <com.google.android.material.textfield.TextInputLayout
            android:id="@+id/textInput_type"
            style="@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox.ExposedDropdownMenu"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="16dp"
            android:hint="@string/type">

            <AutoCompleteTextView
                android:id="@+id/act_type"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:fontFamily="@font/light"
                android:ems="10"
                android:editable="false"
                android:text=""
                android:textSize="12sp" />
        </com.google.android.material.textfield.TextInputLayout> 
```

**片段：**

```
class MyFragment : Fragment() {
    var orderType = arrayOf("فروش", "خرید")
    lateinit var mBinding: MyFragment

    override fun onCreateView(
    inflater: LayoutInflater, container: ViewGroup?,
    savedInstanceState: Bundle?
): View? {
    mBinding = MyFragment.inflate(inflater, container, false)
    val adapter= ArrayAdapter(requireContext(),android.R.layout.simple_spinner_item, orderType.toList())
    mBinding.autoOrderType.threshold = 0
    mBinding.autoOrderType.setAdapter(adapter)
    return mBinding.root
} 
```

# java - 使用内存 h2 在具有空日期的平台之间不一致的 dbunit 行为

> ID：15833151
> 
> 赞同：0
> 
> 时间：2013-04-05T11:47:05.117
> 
> 标签：java, sql, hibernate, h2, dbunit

我在 DBUnit 测试中遇到了一个有趣的问题。

我们有一些使用 DBUnit 测试和 xml 数据集进行测试的代码。我在平台之间使用完全相同的数据集和代码文件的测试结果不一致，因此我决定遵循这一路径，因为我将重构 DB Access 类的一部分。

我遇到的问题如下：

1.  数据集有 3 条记录与 hbm 文件中定义的某个查询匹配。
2.  该查询执行“按 DATE_FIELD desc 排序”，但并非数据集中的所有记录都设置了此 DATE_FIELD（这意味着它应该被解释为 null 或脚本中的默认值，这在两个平台上也是相同的）。

在 Maven 运行测试的一个平台（Linux 服务器）上，它们都可以，但是在我的装有 Windows 的 PC 上，记录是以不同的顺序从数据库（数据集）中提取的，所以当测试验证时出现错误记录的顺序。

所以，我知道修改数据集会让我的测试在两边都变绿，但是如果有人在其中一个记录中写了没有日期列的数据集，他可能知道一些我不知道的业务规则，所以我真的没有修改场景，因为它可能会导致未来无法预料的问题。

搜索答案后，我正在修改问题。我正在寻找的答案，如何让 H2 数据库与不同平台上的空日期保持一致。我必须设置什么参数才能在不触及查询的情况下为整个数据库获取 NULLS FIRST 或 NULLS LAST？

非常感谢和问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:37:07.087

好，

当我找到答案时，我正在回答我自己的问题，更好的后续行动会很好，但我认为这很重要。

我按照此页面上的说明进行操作：

[http://www.h2database.com/javadoc/org/h2/constant/SysProperties.html](http://www.h2database.com/javadoc/org/h2/constant/SysProperties.html)

并在加载驱动程序之前在运行时设置 sortNullsHigh 属性：

System.setProperty("h2.sortNullsHigh", "true");

也许稍后我们会看到一种将它放入配置文件的方法，在所有中央单元测试都使用 jenkins/maven 运行并且属性设置正确之后。

问候

# adobe-indesign - InDesign SDK：我可以在不安装 InDesign 的情况下使用 SDK 吗？

> ID：15833156
> 
> 赞同：1
> 
> 时间：2013-04-05T11:47:18.537
> 
> 标签：adobe-indesign

首先，让我澄清一下这个问题。我正在处理 InDesign 文档并尝试从中提取信息。我在某处读到 Adob​​e InDesign 加载文档并动态计算 .indd 或 .idml 文件中不存在的一些元数据信息。

对于我的用例，我需要编写一个软件来加载 InDesign 文件并从中提取所有信息 - 没有任何损失。这可以使用 Adob​​e 的 InDesign SDK 来完成，而无需实际安装 InDesign 软件吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T05:12:36.983

我怀疑你是否可以这样做 -> 有许多函数可以从 InDesign 应用程序本身动态获取 INDD 文件信息。此类信息不是 InDesign 文件的一部分。

对于 IDML 文件，IDML 文件只是一个视图而不是模型。它们不包含足够的信息，无法在没有应用程序的情况下离线使用。如果您的应用程序是最小的应用程序，并且您只需要 InDesign 文档中的某些信息，那么很好，否则 IDML 不会有太大帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T20:56:58.133

您可能希望从 IDML 文件中提取信息，而不是尝试`.indd`直接从文件中获取信息。InDesign 文件是二进制文件，而 IDML 文件是打包成 XML 的，这使得它们*更*容易解析。

您应该能够使用以下资源作为指南轻松处理独立的 IDML 文件：

[IDML 规范](https://www.adobe.com/content/dam/Adobe/en/devnet/indesign/cs55-docs/IDML/idml-specification.pdf)

[IDML 食谱](http://www.adobe.com/content/dam/Adobe/en/devnet/indesign/cs5_docs/idml/idml-cookbook.pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-20T14:37:47.833

是的，这是可能的，但不是通过 InDesign SDK，而是您必须使用可以从 INDD 文件中提取信息的 XMP 库。

请注意，此提取将仅限于 INDD 文件中以 XML 形式存在的信息，包括页面预览和文件元数据。

您可以从以下链接下载 XMP SDK：[https ://www.adobe.com/products/xmp.html](https://www.adobe.com/products/xmp.html)

请注意，如果您想访问所有数据，您需要以 IDML 格式导出 InDesign 文件。这是一个压缩包，可为您提供 XML 格式的所有数据，只需解压缩文件并使用任何标准 XML 解析器即可。

# vba - 按非空白和空白单元格循环

> ID：15833157
> 
> 赞同：0
> 
> 时间：2013-04-05T11:47:21.370
> 
> 标签：vba, loops

早上好！我正在学习 VBA，看到了餐饮主管放在这里的代码[如何使用空白单元格作为参考执行 sumif？](https://stackoverflow.com/questions/13079443/how-to-perform-a-sumif-using-blank-cells-as-a-reference#comment22494918_15815471)它工作正常，但在我需要实施的相反过程中。在我的电子表格中，计数从第一个非空白单元格开始，然后遍历空白单元格，直到到达下一个非空白单元格，然后在最后一个空白单元格中输入总和（从第一个非空白单元格到最后一个空白单元格的总和）单元格，然后从下一个非空白单元格重新开始）。谢谢

```
00:21.6     10/1/2012 1:43      FALSE       00:21.6
01:47.7     10/1/2012 2:13      FALSE       01:47.7
00:56.7     10/1/2012 2:49      FALSE       
00:54.9     10/1/2012 3:43      
00:11.8     10/1/2012 3:43              2:34(00:56.7 +00:54.9+00:11.8)
02:10.9     10/1/2012 3:46      FALSE       02:10.9     
01:05.4     10/1/2012 3:58      FALSE       
00:55.8     10/1/2012 4:53      
04:41.8     10/1/2012 4:52      
00:26.3     10/1/2012 4:58      
00:04.2     10/1/2012 4:58      
00:15.3     10/1/2012 4:59      
00:06.4     10/1/2012 4:57      
00:10.7     10/1/2012 4:56      
00:04.4     10/1/2012 4:56      
00:04.2     10/1/2012 4:57      
00:29.2     10/1/2012 4:57      
00:34.5     10/1/2012 4:56      
01:22.4     10/1/2012 4:55                       (01:05.400:55.8+04:41.8+...+01:22.4)

00:08.1     10/1/2012 4:55      FALSE       00:08.1
03:20.9     10/1/2012 4:51      FALSE       03:20.9
00:56.3     10/1/2012 5:42      FALSE       00:56.3
02:23.1     10/1/2012 5:51      
01:20.6     10/1/2012 5:48      
00:09.8     10/1/2012 5:49      FALSE       03:53.5(i.e., 02:23.1+01:20.6+00:09.8)
01:40.0     10/1/2012 7:47      FALSE       01:40.0
01:13.4     10/1/2012 8:11      FALSE       01:13.4
00:41.6     10/1/2012 9:49      FALSE       00:41.6
01:08.1     10/1/2012 11:56     FALSE       01:08.1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:40:18.217

此代码沿列向下移动，边添加边添加，然后将答案放入它找到的第一个空白单元格中。

```
Sub CountMeBlank()

Dim varCounter As Variant

Do Until ActiveCell.Value = ""

    varCounter = varCounter + ActiveCell.Value
    ActiveCell.Offset(1, 0).Select

Loop

ActiveCell.Value = varCounter

'Grabs the formatting from the last cell as the data could be time or numeric.
ActiveCell.Offset(-1, 0).Select
Selection.Copy
ActiveCell.Offset(1, 0).Select
Selection.PasteSpecial Paste:=xlPasteFormats, Operation:=xlNone, _
    SkipBlanks:=False, Transpose:=False
Application.CutCopyMode = False

'Then colours the cell red to show contrast
ActiveCell.Font.Color = vbRed

End Sub 
```

如果您需要一次遍历所有数据，则需要将其包装在某种形式的循环中。

# apache - 使用简单的名称访问局域网上的本地网络服务器，例如 http://example.intranet.com

> ID：15833162
> 
> 赞同：0
> 
> 时间：2013-04-05T11:47:31.563
> 
> 标签：apache, http, tomcat, ubuntu-12.04

我有一个小型网络，有一个 ubuntu 12.04（我试图在其上托管一个本地 Intranet 网站）服务器机器和几个桌面。我本质上想要的是在网络中使用简单的名称访问服务器上部署的页面，例如[http://example.intranet.com](http://example.intranet.com)。In 怎么能做到呢？...

我在服务器机器上安装了 apache tomcat 服务器。

问候

阿文印陀

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T11:52:21.797

您需要部署 DNS 服务器，该服务器将为本地网络上的所有客户端提供服务或在

**所有客户端 PC 上的/etc/hosts**具有以下内容：

```
192.168.1.10    example.intranet.com 
```

请注意，192.168.1.10 是运行 Web 服务器的主机的 IP。

取决于您的 Web 服务器配置，您还可以设置虚拟主机配置。

**更新：**

首先，尝试使用客户端机器上的名称 ping 网络服务器。如果您收到真实 IP 的回答，第一步就完成了。下一步是检查您的网络服务器配置。

AFAIK Tomcat 默认在 8080 上运行（并且可能仅绑定到 127.0.0.1），因此您需要检查 server.xml 并相应地设置连接器。

另请注意，低于 1024 的端口只能由 root 绑定，因此您应该使用 Apache 和 mod_proxy_ajp 设置反向代理

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T12:14:35.683

您需要设置 DNS 服务器/转发器，客户端应将其用作默认 DNS 服务器。

在 Ubuntu 中你可以轻松使用 pe dnsmasq 然后查看配置文件 /etc/dnsmasq.conf 并设置

```
server=/intranet/192.168.0.1 
```

将 192.168.0.1 替换为您的服务器 IP 地址

然后所有 cients 都可以通过键入来访问 apache 网络服务器 `http://intranet`

# spring - JSTranslate 上的 SmartGWT 堆栈溢出

> ID：15833163
> 
> 赞同：0
> 
> 时间：2013-04-05T11:47:40.543
> 
> 标签：spring, hibernate, gwt, smartgwt

因此，我一直在尝试让 SmartGWT 使用自动数据源连接到弹簧配置的休眠 bean，并将其插入高级过滤器构建器小部件。

我可以在日志中看到它工作到一半，因为它正确地构建了数据源查找内容并按照应有的方式自动映射模型类。它还进行了正确的休眠 SQL 查询以从数据库中拉回数据，但是当它将 json 结果发送到客户端时，JSTranslator 堆栈在 translate 方法上溢出。就像它出于某种原因无限期地递归一样。对我来说，它闻起来像一个 smartgwt 错误，但我不确定。我认为它闻起来像错误的原因是，当我从表中删除所有数据时，它不会出错并将列列表正确返回给客户端。非常令人沮丧！ds.xml 文件如下所示：

```
<DataSource
    ID="humintHB"
    serverType="hibernate"
    autoDeriveSchema="true"
    schemaBean="com.fgm.csip.model.pub.Humint"
    beanClassName="com.fgm.csip.model.pub.Humint">
<serverObject lookupStyle="spring" bean="humintDao"/>

<operationBindings>
        <binding operationType="fetch" serverMethod="fetch">
        <serverObject  lookupStyle="spring" bean="humintDao"/>
        </binding>
    </operationBindings>
</DataSource> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:30:53.780

好的，所以我通过一一注释掉所有成员字段类型来进行测试并让它工作。

罪魁祸首成员字段如下：

```
@Column(name = "geog")
@Type(type = "org.hibernatespatial.GeometryUserType")
public Geometry getGeog() {
    return geog;
} 
```

其中 geog 是一个`com.vividsolutions.jts.geom.Geometry`实例。注释掉吸气剂时，其他一切都按预期工作。当 getter 留在里面时，它会在 JSTranslator 中无限递归。

# php - PHP/SimpleXML。如何将子节点添加到 xpath 返回的节点？

> ID：15833166
> 
> 赞同：0
> 
> 时间：2013-04-05T11:47:42.780
> 
> 标签：php, xpath, simplexml, addchild

我有一个简单的 XML 字符串：

```
$sample = new SimpleXMLElement('<root><parent><child1></child1></parent></root>'); 
```

我尝试使用 xpath() 查找节点并将子节点添加到该节点。

```
$node = $sample->xpath('//parent');
$node[0]->addChild('child2');
echo $sample->asXML(); 
```

如您所见`child2`，添加为 的子项`child1`，而不是 的子项`parent`。

```
<root>
  <parent>
    <child1>
      <child2></child2>
    </child1>
  </parent>
</root> 
```

但如果我更改我的 XML，addChild() 效果很好。这段代码

```
$sample = new SimpleXMLElement('<root><parent><child1><foobar></foobar></child1></parent></root>');
$node = $sample->xpath('//parent');
$node[0]->addChild('child2');
echo $sample->asXML(); 
```

返回

```
<root>
  <parent>
    <child1>
      <foobar></foobar>
    </child1>
    <child2>
    </child2>
  </parent>
</root> 
```

所以我有两个问题：

1.  为什么？
2.  如果没有孩子，我如何添加`child2`为的孩子？`parent``child1`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:46:14.997

xpath() 返回传递给它的元素的 CHILDREN。所以，当你 addChild() 到 xpath() 返回的第一个元素时，你实际上是在向 parent 的第一个元素添加一个子元素，即 child1。当您运行此代码时，您会看到它正在创建一个“parentChild”元素作为“parent”的子元素 -

```
<?php
$original = new SimpleXMLElement('<root><parent><child1></child1></parent></root>');
$root = new SimpleXMLElement('<root><parent><child1></child1></parent></root>');
$parent = new SimpleXMLElement('<root><parent><child1></child1></parent></root>');
$child1 = new SimpleXMLElement('<root><parent><child1></child1></parent></root>');
$tXml = $original->asXML();
printf("tXML=[%s]\n",$tXml);
$rootChild = $root->xpath('//root');
$rootChild[0]->addChild('rootChild');
$tXml = $root->asXML();
printf("node[0]=[%s] tXML=[%s]\n",$rootChild[0],$tXml);
$parentChild = $parent->xpath('//parent');
$parentChild[0]->addChild('parentChild');
$tXml = $parent->asXML();
printf("node[0]=[%s] tXML=[%s]\n",$parentChild[0],$tXml);
$child1Child = $child1->xpath('//child1');
$child1Child[0]->addChild('child1Child');
$tXml = $child1->asXML();
printf("node[0]=[%s] tXML=[%s]\n",$child1Child[0],$tXml);
?>

tXML=[<?xml version="1.0"?>
<root><parent><child1/></parent></root>]
tXML=[<?xml version="1.0"?>
<root><parent><child1/></parent><rootChild/></root>]
tXML=[<?xml version="1.0"?>
<root><parent><child1/><parentChild/></parent></root>]
tXML=[<?xml version="1.0"?>
<root><parent><child1><child1Child/></child1></parent></root>] 
```

# .net - 如何在 windows 窗体中打开 exe 文件？

> ID：15833168
> 
> 赞同：0
> 
> 时间：2013-04-05T11:47:47.840
> 
> 标签：.net, vb.net

当我点击应该`button`在`executable file`里面打开`form`。
我在网上搜索了很多东西，但直到现在我都没有任何可破译的想法。
所以请做我需要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:33:23.013

如果您可以访问源代码并且它位于 .Net 中，您可以将可执行文件放入共享库中，然后从您的窗口调用代码并根据需要显示它。否则，您可以在 Windows 窗体应用程序之外运行可执行文件，调用以下代码：

```
System.Diagnostics.Process.Start(exePath); 
```

# android - 使用包名获取 appid

> ID：15833170
> 
> 赞同：1
> 
> 时间：2013-04-05T11:47:52.250
> 
> 标签：android

我使用[市场 API](https://code.google.com/p/android-market-api/)来从市场收集有关应用程序的信息。

我使用以下代码来获取应用程序 ID。

```
 public void getAppInfo() {

    AppsRequest appsRequest = AppsRequest.newBuilder()
            .setAppId("org.ajeje.locservice15")               
            .setWithExtendedInfo(true)
            .build();

   session.append(appsRequest, new Callback<AppsResponse>() {
   @Override
   public void onResult(ResponseContext context, AppsResponse response) {

   List<App> apps = response.getAppList(); 
   for (App app : apps) { 
        System.out.println("Title of the application is:"+app.getTitle());
        }
}
  });
   session.flush();
  } 
```

除了 setAppId 的“com.example.android”之外，上面的代码不会产生任何响应。

当我在市场上有应用程序的包名称时，是否有另一种方法可以获取应用程序的 appid？

任何帮助表示赞赏。

# android - 观察者和服务对android的电池消耗

> ID：15833175
> 
> 赞同：0
> 
> 时间：2013-04-05T11:48:03.907
> 
> 标签：android

我正在开发一个要监视文件的android应用程序。所以我在做什么我创建了一个服务，我在其中注册了一个文件观察器，它将监视文件更改。

一旦发生某些事件，它将获取 sd 卡中所有文件的元数据，并通过用新数据替换旧数据来更新应用程序数据库。

所以我只想知道我应该在服务或活动中注册观察者以节省用户的电池，什么是更好的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:46:40.293

对于电池寿命，这无关紧要（您仍然使用 CPU，而与您扩展的类无关）

这听起来像是一项服务而不是一项活动，所以我会选择一项服务。

为了节省电池，您可以根据您的目标做一些事情。

1.  FileObserver 应该为您提供正在访问/更改的文件的直接路径，所以也许您不需要重新扫描 sd 卡上的所有文件？

2.  让服务只存储更改文件的路径，而在服务中不做任何事情。然后当他们启动我们的应用程序界面时，启动一个异步任务并在后台处理它们。这应该非常快，具体取决于应用程序启动之间更改的文件数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T20:52:59.893

如果您只想监控用户何时使用应用程序，请将观察者代码置于活动中。如果要一直进行监控，请使用服务。显然，应用需求决定了这里的选择。

活动服务可能会消耗更多电池，因为它可能会检测到更多文件更改并且可能会频繁触发。

如果观察者可以通知确切的文件发生了变化，你可以只更新这些变化。

另一个优化是在收集到相当数量的更新后批量运行数据库更新，而不是每次更新都使用数据库。

# javascript - 在链接点击时创建一个弹出窗口？

> ID：15833181
> 
> 赞同：0
> 
> 时间：2013-04-05T11:48:30.203
> 
> 标签：javascript, html

您好我正在尝试创建一个仅在单击链接时显示的弹出窗口。这是我拥有的代码，但问题是在页面加载时显示对话框，而不是在单击时显示。

```
<script type="text/javascript">
    $(document).ready(function () {
        $("#OpenDialog").click(function () {
            $("#dialog").dialog({ modal: true, height: 250, width:200 });
        });
    });
</script>
<a id="OpenDialog" href="#">Click here to open dialog</a>
<div id="dialog" title="Dialog Title">
    <p>Dialog Contents here</p>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:54:59.197

简单地替换这个：

```
<div id="dialog" style="display:none;" title="Dialog Title">
    <p>
        Dialog Contents here</p>
</div> 
```

放

```
 style='display:none' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:00:52.283

首先设置显示属性，如 display:none;

```
<script type="text/javascript">
$(document).ready(function () {
    $("#OpenDialog").click(function () {
$("#dialog").show();
        $("#dialog").dialog({ modal: true, height: 250, width:200 });
    });
});
</script>
<body>
<a id="OpenDialog" href="#">Click here to open dialog</a>
<div id="dialog"  style="display:none;"title="Dialog Title">
<p>Dialog Contents here</p>
</div> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-05T11:50:00.157

尝试调用一个函数：

```
var dialogBox = function()  {
   $("#dialog").dialog({ modal: true, height: 250, width:200 });
};
$(document).ready(function () {

    $("#OpenDialog").click(function () {
        dialogBox();
    });
}); 
```

在 HTML 中：

```
<div id="dialog" title="Dialog Title" style='display:none;'>
    <p>Dialog Contents here</p>
</div> 
```

# spring - 来自 LocalSessionFactoryBuilder 的 NoSuchMethodException

> ID：15833183
> 
> 赞同：1
> 
> 时间：2013-04-05T11:48:33.340
> 
> 标签：spring, hibernate, maven, nosuchmethoderror

我目前正在一起使用 Spring (3.1.0) 和 Hibernate (4.2.0.Final) 进行项目，加载应用程序时出现此错误。我认为这是一个 Maven 问题，但我看不到哪一个。我在不同的主题上看到了类似的问题，但空指针异常不是我的情况。

这是我的 pom.xml

```
<properties>
    <spring.version>3.1.0.RELEASE</spring.version>
    <hibernate.version>4.2.0.Final</hibernate.version>  
</properties>

<dependencies>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>3.8.1</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.aspectj</groupId>
        <artifactId>aspectjrt</artifactId>
        <version>1.6.12</version>
    </dependency>
    <dependency>
        <groupId>org.aspectj</groupId>
        <artifactId>aspectjweaver</artifactId>
        <version>1.6.12</version>
    </dependency>

    <dependency>
        <groupId>commons-lang</groupId>
        <artifactId>commons-lang</artifactId>
        <version>2.6</version>
    </dependency>
    <dependency>
        <groupId>servletapi</groupId>
        <artifactId>servletapi</artifactId>
        <version>2.4</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>jstl</groupId>
        <artifactId>jstl</artifactId>
        <version>1.2</version>
    </dependency>
    <dependency>
        <groupId>commons-logging</groupId>
        <artifactId>commons-logging</artifactId>
        <version>1.1.1</version>
    </dependency>
    <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-mapper-asl</artifactId>
        <version>1.9.3</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-aop</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-core</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-config</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-web</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-taglibs</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>commons-dbcp</groupId>
        <artifactId>commons-dbcp</artifactId>
        <version>1.4</version>
    </dependency>

    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>1.6.4</version>
    </dependency>

    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>${hibernate.version}</version>
    </dependency>

    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-annotations</artifactId>
        <version>3.5.6-Final</version>
    </dependency>

    <dependency>
        <groupId>org.hsqldb</groupId>
        <artifactId>hsqldb</artifactId>
        <version>2.2.6</version>
    </dependency>

</dependencies> 
```

还有我的持久化上下文配置：

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:mvc="http://www.springframework.org/schema/mvc"
xmlns:aop="http://www.springframework.org/schema/aop"
xmlns:tx="http://www.springframework.org/schema/tx"
xsi:schemaLocation="http://www.springframework.org/schema/mvc 
    http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
    http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context-3.1.xsd
    http://www.springframework.org/schema/tx 
   http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
   http://www.springframework.org/schema/aop 
   http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
   ">

<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="location" value="classpath:/jdbc.properties"/>
</bean>

<bean id="dataSource"
    class="org.apache.commons.dbcp.BasicDataSource"
    destroy-method="close">
    <property name="driverClassName" value="org.hsqldb.jdbcDriver" />
    <property name="url"
        value="${jdbc.connectionUrl}" />
    <property name="username" value="${jdbc.username}" />
    <property name="password" value="${jdbc.password}" />
</bean>

<bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBuilder">        
    <property name="dataSource" ref="dataSource" />

            <property name="packagesToScan" value = "test.entity"/>        
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">
                org.hibernate.dialect.HSQLDialect
            </prop>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.hbm2ddl.auto">create</prop>
        </props>
    </property>
</bean>

<bean id="transactionManager"
    class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
</bean>

<aop:config>
    <aop:pointcut id="webMethods" expression="execution(* ro.alten.altenrointranet.service.*.*(..))" />
    <aop:advisor advice-ref="txAdvice" pointcut-ref="webMethods" />
</aop:config>

<tx:advice id="txAdvice" transaction-manager="transactionManager">
    <tx:attributes>
        <tx:method name="*" propagation="REQUIRED" />
    </tx:attributes>
</tx:advice> 
```

对于我的 Session factoru 的调用，我做了一个看起来像这样的 DaoUtil：

```
public class DaoUtils {

@Autowired
protected LocalSessionFactoryBuilder localSessionFactoryBuilder;

protected SessionFactory getSessionFactory()
  {
    return localSessionFactoryBuilder.buildSessionFactory();
  }
} 
```

我这样称呼它：

```
@Component
public class DaoPersonne extends DaoUtils{

public void save(Person p) {
     this.getSessionFactory().getCurrentSession().save(p);
}
public List<Person> getPersonneAll()
 {
   return this.getSessionFactory().getCurrentSession().
        createQuery("FROM Person").list();
 }
} 
```

我得到的错误信息是：

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name      'personController': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private ro.alten.altenrointranet.service.ServiceTest ro.alten.altenrointranet.controller.PersonController.serviceTest; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'serviceTest': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private ro.alten.altenrointranet.dao.DaoPersonne ro.alten.altenrointranet.service.ServiceTest.daoPersonne; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'daoPersonne': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: protected org.springframework.orm.hibernate4.LocalSessionFactoryBuilder ro.alten.altenrointranet.dao.DaoUtils.localSessionFactoryBuilder; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/persistence-context.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.orm.hibernate4.LocalSessionFactoryBuilder]: No default constructor found; nested exception is java.lang.NoSuchMethodException: org.springframework.orm.hibernate4.LocalSessionFactoryBuilder.<init>()
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:631)
at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:588)
at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:645)
at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:508)
at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:449)
at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133)
at javax.servlet.GenericServlet.init(GenericServlet.java:244)
at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1453)
at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1250)
at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5093)
at org.apache.catalina.core.StandardContext.start(StandardContext.java:5380)
at com.sun.enterprise.web.WebModule.start(WebModule.java:498)
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:917)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:901)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:733)
at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:2019)
at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1669)
at com.sun.enterprise.web.WebApplication.start(WebApplication.java:109)
at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)
at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:722) 
```

在我在网上看到之后，它看起来像是一个 Maven 问题，但我已经以这种方式尝试了不同的方法，但没有结果。

1.  清洁和建造
2.  删除 .m2 目录并重新下载所有依赖项
3.  运行 mvn 依赖项：tree

但是问题仍然存在，并且开始让我很恼火。有人可以给我一些提示来发现问题出在哪里吗？

我知道我可以通过使用我更了解的旧版本的hibernate和Spring来解决这个问题，但我想练习hibernate 4.0。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T08:11:05.167

使用的hibernate版本是4，所以需要把spring hibernate包从3改成4，即：

*   更改`org.springframework.orm.hibernate3.HibernateTransactionManager`为`org.springframework.orm.hibernate4.HibernateTransactionManager`

编辑1：

更改`org.springframework.orm.hibernate4.LocalSessionFactoryBuilder`为`org.springframework.orm.hibernate4.LocalSessionFactoryBean`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:11:47.067

`LocalSessionFactoryBuilder`没有*默认构造函数*，非常基本的构造函数`DataSource`作为参数。所以将`sessionFactory`定义更改为

```
<bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBuilder">        
    <constructor ref="dataSource" />

    <property name="packagesToScan" value = "test.entity"/>        
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">
                org.hibernate.dialect.HSQLDialect
            </prop>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.hbm2ddl.auto">create</prop>
        </props>
    </property>
</bean> 
```

# java - 在数据库中存储为 BLOB 的 img 标签中显示图像

> ID：15833184
> 
> 赞同：0
> 
> 时间：2013-04-05T11:48:34.813
> 
> 标签：java, blob, java-web-start

我无法显示`BLOB`我`mysql`保存的图像。我有豆子，jsp。我使用3多层架构，我想用图片展示所有产品。

**在访问者中：**

```
 try {
        Connection cn = getVla().getConnection();
        String sql = "SELECT * FROM products";
        PreparedStatement pst = cn.prepareStatement(sql);
        ResultSet rs = pst.executeQuery();
        ArrayList<products> ls = new ArrayList<products>();
        while(rs.next()) {
            products s = new products();
            s.setPk(rs.getLong("pk"));
            s.setName(rs.getString("name"));
            s.setPrice(rs.getDouble("price"));
            s.setPic(rs.getBlob("pic"));
            s.setComments(rs.getString("comments"));
            ls.add(s);
        }
        return ls;
    } 
```

**在产品中：**

```
 public Blob getPic() {
        return pic;
    } 
```

**在 main.jsp**

```
<%=
List<products> product = bean.getproducts();

%>
<h1>Product: </h1>
<%  
for(products c : product) { 
%>
From <%= c.getName()%> <br/>
<%= c.getPic()%></b><br/>
<b><%= c.getPrice()%> </b><br/>
<%= c.getComments()%>
<hr/>
<%
}
%> 
```

我怎样才能显示图片？（目前我正在显示 com.mysql.jdbc.Blob@2e5f6a64）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T11:55:43.757

你看到的是结果`Blob.toString()`。由于它是二进制内容，JVM 无法真正找到一个好的表示。

您应该做的是创建一个单独的 Servlet，它只`Blob`从数据库中检索 . 并将其内容流式传输到`response.getOutputStream()`. 在您的 JSP 中，您添加一个`<img>`标签，其`src`-attribute 指向`Servlet`您刚刚编写的。

应该一次读取一个产品的`Servlet`图像，因此查询会略有不同：它应该足以拥有

```
String sql = "SELECT pic FROM products where pk = " + pk; 
```

请注意，您需要`pk`使用一些请求参数指定此变量。上面的代码行只是一个演示这个想法的例子。将请求 URL 直接复制到 SQL 查询中是**非常不安全的。**Google for "SQL Injection" 阅读更多相关信息。

使用[`Blob.getInputStream()`](http://docs.oracle.com/javase/7/docs/api/java/sql/Blob.html#getBinaryStream%28%29)您可以获得`InputStream`可以复制到其内容的内容`response.getOutputStream()`，以便将其写回浏览器。不要忘记`content-type`在该响应上设置适当的值，例如 JPEG 图片的“image/jpg”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:04:48.627

正如 mthmulders 所说，您所看到的是 Blob.toString() 的值。

BalusC 前段时间发表了一篇关于通过 servlet 从数据库 blob 恢复的图像服务的 2 篇精彩文章：

[http://balusc.blogspot.fr/2007/04/imageservlet.html](http://balusc.blogspot.fr/2007/04/imageservlet.html)

还有一个更新的 GZIP 和恢复处理

[http://balusc.blogspot.fr/2009/02/fileservlet-supporting-resume-and.html](http://balusc.blogspot.fr/2009/02/fileservlet-supporting-resume-and.html)

# java - Java arrays.fill 问题

> ID：15833186
> 
> 赞同：-3
> 
> 时间：2013-04-05T11:48:39.627
> 
> 标签：java, arrays

```
import java.util.Arrays;
public class MainClass {
    int[] integer=new int[10];
    Arrays.fill(integer,1,4,5);
} 
```

谁能向我解释为什么这条线`Arrays.fill(integer,1,4,5)`是错误的。据我了解`Arrays.fill`，这样的工作方式（数组名称，从点到点，值）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T11:50:40.807

因为该行不在方法中。

应该什么时候执行？

如果您希望它在对象构造时执行，请将其放在构造函数中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T11:52:41.887

在 main 方法的主体中添加语句以执行它们。

```
import java.util.Arrays;
public class MainClass {

    public static void main(String [] args)
        int[] integer=new int[10];
        Arrays.fill(integer,1,4,5);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T11:55:11.640

在方法中添加您的代码。

```
public class MainClass {
    public static void main(String[] args) {
        int[] integer = new int[10];
        Arrays.fill(integer, 1, 4, 5);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T11:55:41.273

我猜这没有错……

```
public static void main(String[] args) {
        int[] integer = new int[10];

        Arrays.fill(integer, 1, 4, 5);

        for(int i=0; i<integer.length; i++){
            System.out.println(integer[i]);
        }
} 
```

这会将所有值打印为 0，但对于 integer[1] 到 integer[4] 的值将打印 5。

# jmeter - 使用 Jmeter HTTP 代理服务器时无法上传图像/文件

> ID：15833188
> 
> 赞同：3
> 
> 时间：2013-04-05T11:48:44.783
> 
> 标签：jmeter

我有一个要完善的图像上传方案。使用 Jmeter 测试。

**使用 Jmeter**

*   脚步：

    1.  推出Jmeter2.9
    2.  将 HTTP 服务器添加到 Workbench，端口 8080
    3.  将 IE 网络设置设置为代理、端口 8080 和 localhost
    4.  推出 xyz.aspx 网页
    5.  登录到应用程序
    6.  点击上传图片并选择图片
*   观察：
    图片未上传

**不使用 Jmeter**

*   脚步：

    1.  推出 xyz.aspx 网页。
    2.  登录到应用程序。
    3.  点击上传图片并选择图片。
*   观察：
    弹出一条警报消息，单击重试时，图像已上传。

警报消息说`To display the web message again, the web browser needs to resend the information you've previously submitted`。

有人可以帮我继续吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T09:34:30.383

请在 HTTP 请求默认值中将类型更改为 Java

# python - Sympy：生成具有多个子图的图形

> ID：15833190
> 
> 赞同：4
> 
> 时间：2013-04-05T11:48:48.983
> 
> 标签：python, numpy, matplotlib, sympy

我正在使用 sympy 和 matplotlib，并希望生成具有多个图的图形，类似于使用 numpy 时使用 pylab.subplot 完成的方式。这应该是微不足道的，或者我认为......

令我惊讶的是，我没有找到一个简单的方法来做到这一点。要么（a）在多个点评估 SymPy 表达式并获得一个我可以与 matplotlib 一起使用的 numpy 数组，要么（b）在 sympy.plotting 中使用类似于 pylab.subplot 的机制。

示例代码：

```
import sympy.plotting.plot as symplot
import sympy as sym
x = sym.Symbol('x')
# This opens two different figures...
symplot(x*x, (x, -10, 10))
symplot(x, (x, -10, 10)) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T13:05:46.277

这取决于您使用的 SymPy 版本。

在最新版本（0.7.2）中，您已经有一个绘图模块，它保证能够绘制*任何东西*，并且可以用作后端 matplotlib。

在旧版本中，您可以选择使用`lambdify`一个 hackish、大部分损坏的辅助函数，它返回一个快速的数值函数以与 numpy 一起使用。然而，它打破了非平凡的表达。

下面我解释如何在 0.7.2 中使用绘图模块：

1.  `plot`就像 in一样打电话`p = plot(expression, (var, start, stop))`。如果你有`matplotlib`它会直接使用它。
2.  如果您想要一些花哨的东西，请提取`matplotlib`图形：`f = p._backend.fig`.
3.  别再关心 SymPy，你剩下的工作都在`matplotlib`. 你想做什么，就可以做什么。

SymPy 的绘图模块背后的想法是能够评估任何可能的表达式，而不是重新实现像 matplotlib 这样的绘图库。所以只需`sympy.plotting.plot`用于评估并在 matplotlib 中进行花哨的子图转换。

与 hackish 解决方案相比，使用 sympy 绘图模块具有其他优势：检测不连续性和自适应采样、根据函数着色、评估病理上复杂的符号表达式（尽管速度很慢）。

显然，检查文档。虽然它们不是很好，但很多问题都在那里得到了解答：[http](http://docs.sympy.org/0.7.2/modules/plotting.html) : //docs.sympy.org/0.7.2/modules/plotting.html 还要检查 sympy 示例文件夹中的笔记本。

编辑以解决一些其他问题：

1.  SymPy 的绘图模块中没有子图的概念，希望永远不会有。正如我上面提到的，SymPy 并没有尝试重新实现类似的模块`matplotlib`，而是尝试提供在另一个模块中易于使用所需的工具（模块之间的接口比具有许多小子模块的大项目更好）。

2.  为了在 matplotlib 中从两个不同的 sympy 图创建一个带有两个子图的图形（这是一个丑陋的 hack，因为 matplotlib 不支持图形的合并）：

    ```
    sympy_p1 = sympy.plot(foo)
    sympy_p2 = sympy.plot(bar)
    matplotlib_fig = plt.figure()
    sp1 = matplotlib_fig.add_subplot(121)
    sp2 = matplotlib_fig.add_subplot(122)
    sp1.add_collection(sympy_p1._backend.ax.get_children()[appropriate_index])
    sp2.add_collection(sympy_p2._backend.ax.get_children()[appropriate_index])
    matplotlib_fig.show() 
    ```

3.  为了更新 sympy 图（不是创建子图，只是添加一个新表达式）使用`sympy_p1.append(sympy_p2)`. 这将导致`sympy_p1`包含两个`foo`和`bar`（**不是**两个子图，而是一个具有两个表达式的图）的图。

4.  您可能希望`sympy.plot(..., show=False)`在某些情况下使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T12:14:30.700

对于您的第一个问题，您可以使用`lambdify()`将表达式转换为函数：

```
import numpy as np
from sympy import *

x, y = symbols("x, y")
eq = sqrt(x**2 + y**2)

xa = np.random.rand(10)
ya = np.random.rand(10)
f = lambdify((x, y),eq,'numpy')

print f(xa, ya)
print np.sqrt(xa**2 + ya**2) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-30T08:37:12.857

第二部分的答案可能是使用 PlotGrid 类：

```
>>> p1 = plot(x*x, (x, -10, 10), show=False)
>>> p2 = plot(x, (x, -10, 10), show=False)   
>>> PlotGrid(2, 1 , p1, p2)     # grid size or subplot size: 2x1
PlotGrid object containing:
Plot[0]:Plot object containing:
[0]: cartesian line: x*x for x over (x, -10, 10)
Plot[1]:Plot object containing:
[0]: cartesian line: x for x over (x, -10, 10) 
```

此功能不是最新版本的一部分，但可能会在 SymPy 的下一个版本中提供。您可以在SymPy的当前[开发版本中找到它。](https://docs.sympy.org/dev/modules/plotting.html#plotgrid-class)

# google-chrome - 打包应用程序的 Dart 源映射

> ID：15833197
> 
> 赞同：1
> 
> 时间：2013-04-05T11:49:08.847
> 
> 标签：google-chrome, dart, source-maps

当我的应用程序打包为 chrome 应用程序时，我在运行源地图时遇到问题。（我在 Chrome 开发者工具中看不到任何 dart 文件）。目前是否支持此功能？

当按原样运行页面时，而不是作为打包的应用程序，源地图工作正常。

通过将生成的 js 文件中的 sourcemapingURL 更改为绝对路径，我设法使它适用于未打包的扩展：

```
//@ sourceMappingURL=file:///ABSOLUTE_PATH.js.map 
```

我想知道这是否可以用于打包的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T15:15:59.347

它适用于 SDK 0.7.1，构建通过 build.dart 运行

```
#!/usr/bin/env dart

import 'dart:io';
import 'package:polymer/component_build.dart';
import 'package:polymer/deploy.dart' as deploy;

void main() {
  build(new Options().arguments, ['web/FlashCards.html'])
    .then((_) => deploy.main());
} 
```

# unit-testing - 在 n 层架构中应该测试哪一层

> ID：15833202
> 
> 赞同：1
> 
> 时间：2013-04-05T11:49:18.860
> 
> 标签：unit-testing, testing, n-layer

我们在应用程序中使用 n 层架构。假设我们使用 3 层应用程序并使用 MVC 模式作为表示层，应该测试哪个层？如何在我的应用程序中找到可测试性点？

1.  表示层？
2.  业务层
3.  数据层
4.  他们都是？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:47:57.640

只测试你想确保工作的层。以上所有 3 项似乎都是重要的工作。你不想删除它们中的任何一个。

试图在现有软件中找到未设计用于的可测试性点可能是一个挑战。有一本好书，[有效地使用遗留代码](https://rads.stackoverflow.com/amzn/click/com/0131177052)，其中遗留被定义为没有测试的代码，它谈到了这个问题。基本上，如果您不为可测试性而设计，则很难将其硬塞进去，您可能需要重构。

诀窍是将测试基础设施添加到代码中：模拟、存根和其他测试组件，以允许您仅隔离被测位。这在您测试数据库时很有帮助，您真的不想运行真正的查询，这将花费太长时间并且您希望测试快速。依赖注入对于更静态的语言很有帮助，比如 C++/C 和 Java。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:53:41.137

在单元测试的上下文中，什么是“单元”？它是你识别为一个单元的任何东西，是你代码中最小的可测试部分。

如今，大多数人选择类或方法作为他们的单位。如果你这样做，你的所有层都将包含你可以单元测试的单元，所以你的问题的答案是测试所有这些。

# asp.net - 一个网站的asp.net版本的配置位置

> ID：15833204
> 
> 赞同：1
> 
> 时间：2013-04-05T11:49:22.660
> 
> 标签：asp.net, iis, version, aspnet-regiis.exe

崩溃后我不得不重新安装我的 Windows 服务器。

我们的机器上有超过 1000 个网站，其中包含 asp.net 版本的组合（1.1、2、4）。

我在 IIS 元数据库中查看了网站的 asp.net 版本，但它不存在。有谁知道这些数据存储在哪里？

（这是服务器崩溃，所以我不能做 aspnet_regiis -lk ）

谢谢 avi

# signalr - 替换 SignalR 回调不起作用

> ID：15833208
> 
> 赞同：0
> 
> 时间：2013-04-05T11:49:35.113
> 
> 标签：signalr

**更新**：我进一步简化了错误案例，并在 SignalR 的 GitHub 页面上提出了问题。您可以在此处查看问题：[https](https://github.com/SignalR/SignalR/issues/1828) ://github.com/SignalR/SignalR/issues/1828 。实际上这个错误与 AngularJS 无关。

我有一个在后端使用 ASP.NET 和 SignalR 并在前端使用 AngularJS 的项目。一切正常，除了当我在 AngularJS 中移动并且再次创建控制器时，它们无法替换原始的 SignalR 回调方法。

这是我的控制器的代码：

```
function SignalRProblemCtrl($scope) {
    var bar = $.connection.bar;
    $.connection.hub.start();

    $scope.currentMessage = "";

    $scope.messages = [];
    $scope.messages.push("HELLO!");

    var date = new Date();
    bar.client.addMessage = function (message) {
        $scope.$apply(function () {
            console.log("Callback set on " + date + ": " + message);
            $scope.messages.push(message);
        });
    };

    $scope.send = function () {
        bar.server.send($scope.currentMessage, "Extra data");
    };

}
SignalRProblemCtrl.$inject = ['$scope']; 
```

在我第一次访问这个控制器时，我可以发送和接收消息，并且我所有的 Angular 绑定都可以正常工作。我的控制台有输出：

```
Callback set on Fri Apr 05 2013 14:37:13 GMT+0300 (E. Europe Daylight Time): First page load controllers.js:37 
```

这一切都很好，花花公子。移动到另一个页面并再次访问 SignalRProblemCtrl 后会出现问题。这次我可以发送和接收消息，消息被写入控制台但我的绑定不会更新。控制台中的输出指向根本原因：

```
Callback set on Fri Apr 05 2013 14:37:13 GMT+0300 (E. Europe Daylight Time): Second page load controllers.js:37 
```

所以我的绑定没有得到更新，因为在第二次创建控制器时第一个回调没有被替换。所有 SignalR 消息仍会转到第一个回调，该回调具有控制器前一个实例的 $scope，因此我的视图不会使用最新消息进行更新。

为什么是这样？为什么 SignalR 坚持第一次回调？

PS。我也尝试立即更换回调。使用此代码，可以正确使用最新的回调（带有 date2 的回调）。

```
var date = new Date();
bar.client.addMessage = function (message) {
    $scope.$apply(function () {
        console.log("Callback set on " + date + ": " + message);
        $scope.messages.push(message);
    });
};

var date2 = new Date();
bar.client.addMessage = function (message) {
    $scope.$apply(function () {
        console.log("Callback set on " + date2 + ": " + message);
        $scope.messages.push(message);
    });
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:53:52.683

在 Github ( [https://github.com/SignalR/SignalR/issues/1828](https://github.com/SignalR/SignalR/issues/1828) ) 上提交问题后，我收到了有关如何解决此问题的评论。

您可以在以下位置查看解决方案：[Signalr (1.0.0-alpha2) Hubs - 您可以在连接开始后添加客户端功能吗？](https://stackoverflow.com/questions/13497390/signalr-1-0-0-alpha2-hubs-can-you-add-client-functions-after-connection-has)

# javascript - 未满足所需表单时，表单 onClick 正在运行

> ID：15833211
> 
> 赞同：0
> 
> 时间：2013-04-05T11:49:37.997
> 
> 标签：javascript, forms, post, onclick, required

嘿家伙真的不知道如何措辞，但即使我已经添加`required`到我的表单输入，它运行 JavaScript onsubmit 甚至在`required`按下按钮和表单空白时失败。

当按下按钮并且表单为空白时，我可以在我的 JavaScript 中添加一行以阻止它运行吗？任何帮助都会很棒：D

```
<div id="div3">
    <div id="form"> 
        <form action="results.php" method="post" >
        <input type="text" id="field" name="field" required>
        <input id="submit" name="submit"  type="image" src="gif/button.png"  onClick="test();" value="submit"></form>       
    </div><div id="msg"><b>
<span id="msgtxt">Hello</span>
<span id="img"><img src="gif/loadingdot.gif"></span></b>
</div>
</div> 
```

Java脚本

```
function test()
{
    $('#msg').attr('style','display:block;');
    $('#msgtxt').html('Connecting To Server');

    setTimeout(function(){  //Beginning of code that should run AFTER the timeout
    $('#msgtxt').html('Message one');
        //lots more code
    },5000);  // put the timeout here
    setTimeout(function(){  //Beginning of code that should run AFTER the timeout
    $('#msgtxt').html('Message two);
        //lots more code
    },7000);  // put the timeout here
    setTimeout(function(){  //Beginning of code that should run AFTER the timeout
    $('#msgtxt').html('Message three');
        //lots more code
    },11000);  // put the timeout here
    setTimeout(function(){
        txt=$("#field").val();
        $.post("results.php",{field:txt},function(result){
            $("#div3").html(result);
        });
        $('#msg').attr('style','display:none;');
    },17000);
}

 $(document).ready(function() {
        $.post("form.html",{field:'mytext'},function(result){
            $("#load").html(result);
        });
 }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T11:59:23.317

尝试一下 ：

```
<input id="submit" name="submit"  type="image" src="gif/button.png"  onClick="check();" value="submit"> 
```

然后是检查（）；功能 ：

```
var check = function(){
    if ($("#field").val() != "" )
        test();
    else
        $('#msgtxt').html('form is empty');
} 
```

# ruby-on-rails-3.2 - 每当 CronJob 问题 - 无法执行

> ID：15833213
> 
> 赞同：0
> 
> 时间：2013-04-05T11:49:44.917
> 
> 标签：ruby-on-rails-3.2, cron, whenever

在我的炼油厂项目中，我正在使用 cron 作业来更新我的一个文本字段。

**示例代码：**模型中存在的代码

```
def update_time
  @time = Page.all
  @time.each do |time|
    time.present_time = Time.now
    time.save
  end
end 
```

代码：/config/schedule.rb

```
set :environment, 'development'

every 1.minutes do
  runner "Page.update_time"
end 
```

然后在终端上运行这些命令：

```
$ whenever --update-crontab PageTest
[write] crontab file updated
$ crontab -l
# Begin Whenever generated tasks for: .../config/schedule.rb
* * * * * /bin/bash -l -c 'cd /home/trainee2/PageDevp && 
script/rails runner -e development '\''Page.update_time'\'''

$ sudo service cron restart 
```

然后，耙工作不工作。我无法让它运行。提前致谢...

# javascript - 正确插入参数

> ID：15833216
> 
> 赞同：1
> 
> 时间：2013-04-05T11:49:58.637
> 
> 标签：javascript, forms

我有一个需要验证的表单，决定与平时有所不同，并让主函数调用较小的函数，如下所示

```
function validate() {
 validate_this(*fieldId*);
 validate_that(*fieldId*);
 ...
} 
```

其中较小的功能是这样的：

```
function validate_empty(formField) {
 if ( formName.formField.value.length = 0; ) {
  //Do Stuff
 }
} 
```

`formField`表单中的字段 ID 在哪里。但是，这会导致错误`formName.formField.value.length`

```
Uncaught TypeError: Cannot read property 'value' of undefined 
```

我怎样才能让它通过而不是字符串或 null 来解析实际的 fieldId？jQuery 是不可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:51:10.480

我建议[`document.getElementById`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById)改用：

```
function validate_empty(formField) {
    if ( document.getElementById(formField).value.length == 0 ) {
        //Do Stuff
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T12:01:03.213

您的代码看起来的方式，JS 是对名为 的变量进行范围扫描`formName`，或者无论表单的名称实际上是什么......您应该指定它是一个 DOM 元素：`document.forms[0]`或类似的。

即便如此，您`if`将始终评估为 true，因为您是在分配，而不是比较：

```
var foo = 0;//single  = : assignment operator
console.log(foo == '0');//true, loose comparison (type coerced)
console.log(foo === '0');//false, strict comp: type && value 
```

除此之外，您验证表单的方式*非常*值得怀疑......您似乎正在使用 JS，就好像它是一种像 C 或其他语言一样的语言。JS 恕我直言，最好用作事件驱动的函数式编程语言。
因此，即使这不是严格相关的 ATM，请考虑研究 JS 的优势......这是一种简洁的小语言，不应该受到这种滥用。

# jsp - 我的转换器无法激活/工作

> ID：15833217
> 
> 赞同：0
> 
> 时间：2013-04-05T11:49:58.927
> 
> 标签：jsp, jsf, converter

我需要一个转换器`<h:selectOneMenu>`。我创建了它，但我的对象仍然显示为`com.ddd.bo.Firm@9f36e691`.

```
<h:selectOneMenu value="#{configBean.user.firm}" convert="firmConverter" required="true" label="#{bundle.config_form_add_firm}" > 
    <f:selectItems value="#{configBean.firmsLazyList}" />                  
</h:selectOneMenu> 
```

在`faces-config-general.xml`中，我放置了：

```
<converter>
    <converter-for-class>com.ddd.bo.Firm</converter-for-class>
    <converter-class>com.ddd.bo.converter.FirmConverter</converter-class>
</converter> 
```

并在`FirmConverter.java`：

```
@FacesConverter(forClass=Firm.class)
public class FirmConverter implements Converter {

    @Override
    public Object getAsObject(FacesContext context, UIComponent component, String newValue) throws ConverterException {
        return null;
    }

    @Override
    public String getAsString(FacesContext context, UIComponent component, Object value) {
        Firm pFirm = (Firm) value;
        return pFirm.getName();
    }
} 
```

而不是`@FacesConverter(forClass=Firm.class)`，我也试过了`@FacesConverter("firmConverter")`。

我没有收到任何错误。

如何让转换器工作以使其显示`Firm#getName()`而不是显示`Firm#toString()`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:29:57.207

感谢您对标签的帮助和抱歉：/

我的转换器很好，问题来自

```
<h:selectOneMenu value="#{configBean.user.firm}" convert="firmConverter" required="true" label="#{bundle.config_form_add_firm}" > 
<f:selectItems value="#{configBean.firmsLazyList}" /> 
```

我们需要使用公司列表而不是惰性列表。

希望它对其他人有帮助。

谢谢大家。

# unixodbc - unixODBC-qui-qt 安装 - 无法编译 Qt 程序

> ID：15833224
> 
> 赞同：1
> 
> 时间：2013-04-05T11:50:11.553
> 
> 标签：unixodbc, rodbc

我正在尝试为 Mac OSX Mountain Lion 设置 unixODBC，以便可以使用 RODBC 访问 Excel 电子表格。

我对各种文档和网站进行了大量研究，并了解以下步骤：

1.  安装 unixODBC 2.3.1
2.  安装 FreeTDS 0.91（只是想要一个免费的 ODBC 驱动程序来测试）
3.  指定要使用的 ODBC 驱动程序。我创建了一个 tds.driver.template 并成功安装在 unixODBC 中。见下文：

    [FreeTDS] 描述 = v0.63 协议 v8.0 驱动程序 = /usr/local/freetds/lib/libtdsodbc.so

    $ sudo odbcinst -i -d -f tds.driver.template

    $ odbcinst -q -d [FreeTDS]

最后连接到特定的 DSN。但是当我尝试如下配置 unixODBC-gui-qt 时：

```
./configure --with-qt-dir-include=/usr/include --with-qt-dir-lib=/usr/lib --with-qt-dir-bin=/usr/bin 
```

它给出了以下错误：

```
configure: checking for Qt
yes (/usr/include)
yes (/usr/lib)
yes (/usr/bin)
checking for /usr/include/QtGui/QWizard... no
checking for /usr/include/QtGui/QMdiArea... no
configure: qt_dir_lib=/usr/lib
configure: LDFLAGS=
configure: X_LIBS= -L/usr/X11/lib -R/usr/X11/lib
checking whether a simple Qt program compiles... no
configure: error: cannot compile a Qt program! 
```

在上述安装之前，我已经安装了 autoconf、automake、libtool 和 Mac OSX 的 Qt 库 4.8.4。

第一个问题：我是否在某些时候错过了任何步骤或配置错误？
我现在正在学习 R，但花了两天时间在 Mac ia 上配置 ODBC 有点出乎我的意料。我只想使用所有来自 unixODBC 的工具，包括它的驱动程序管理器和 GUI 工具来指定 DSN。我应该使用 emacs 来编辑 odbc.ini 吗？

第二个问题：在我指定 DSN 之后，我可以使用 RODBC 访问 Excel 电子表格吗？现在，它有以下错误。而且我不确定是否需要任何步骤来配置 RODBC 以使用 unixODBC 而不是 iODBC。

```
> library(RODBC)
> conn.xls = odbcConnect ("~/Documents/R/R軟體應用統計方法/my notes/babies.xls")
> warnings()
Warning messages:
1: In odbcDriverConnect("DSN=~/Documents/R/R軟體應用統計方法/my notes/babies.xls") :
[RODBC] ERROR: state IM002, code -83788248, message [iODBC][Driver Manager]Data source name not found and no default driver specified. Driver could not be loaded 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-14T14:51:28.933

我也有同样的问题，我使用的是 OpenSuse 13.1 和 Qt4。

为了解决这个问题，请查看文件 config.log，可能链接器找不到 QtAssistant。

作为[98-Qt-assistant-under-linux](http://www.qtcentre.org/threads/98-Qt-assistant-under-linux)，该库已从 Qt4 中删除。您需要手动下载它并安装在系统库路径上。

幸运的是，在 OpenSuse 中，这个库以 libQtAssistantClient4 的名称打包，您可以使用

```
zypper in libQtAssistantClient4 
```

您还需要创建一个符号链接

```
cd /usr/lib64/
ln -s libQtAssistantClient.so.4 libQtAssistantClient.so 
```

我希望这有助于解决您的问题

# json - 在c#中转义JSON的特殊字符

> ID：15833226
> 
> 赞同：2
> 
> 时间：2013-04-05T11:50:29.790
> 
> 标签：json, c#-4.0, json.net

我有一个字段的 JSON 对象具有字符串值

```
" Ran a defrag removed a few virus' and tried again " 
```

`'`是 JSON 中的特殊字符。我正在使用 c#，NewtonSoftJSON 库。

有什么最好的方法可以用 Newtonsoft 和 c# 转义所有特殊字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-06-08T16:43:46.323

你可以试试这个：

```
HttpUtility.JavaScriptStringEncode(inputString); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-08T16:50:34.037

这对我有用->

System.Web.Helpers.Json.Encode(inputString).Substring(1, System.Web.Helpers.Json.Encode(inputString).Length - 2);

# ruby-on-rails - 使用 Ransack 首次搜索后如何丢弃初始/默认选择选项

> ID：15833238
> 
> 赞同：0
> 
> 时间：2013-04-05T11:50:55.067
> 
> 标签：ruby-on-rails, ransack

如果我为下面的月份/年份指定一个默认值：selected 值，那么它总是在搜索后恢复为这些值。有没有办法在搜索后页面加载后将选择设置为执行搜索的选择而不是默认设置？

我想这需要在控制器中设置一次默认值，如果确定搜索不是第一个或选择了其他值，则忽略它们。

```
<%= search_form_for @search, :html => {} do |f| %>
  <div class="control-group">
    <div class="controls form-inline">
      <%= f.select :rollout_month_eq, months, {:selected => months[Date.today.month - 1]} %>
      <%= f.select :rollout_year_eq, years, {:selected => years[1]} %>
      <%= f.submit "Apply" %>
    </div>
  </div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:49:37.570

它应该像确定参数是否为`nil`.

```
<%= search_form_for @search, :html => {} do |f| %>
  <div class="control-group">
    <div class="controls form-inline">
      <%= f.select :rollout_month_eq, months, {:selected => params[:q].try(:[], :rollout_month_eq) || months[Date.today.month - 1]} %>
      <%= f.select :rollout_year_eq, years, {:selected => params[:q].try(:[], :rollout_year_eq) || years[1]} %>
      <%= f.submit "Apply" %>
    </div>
  </div>
<% end %> 
```

编辑以反映您的参数结构。

# tinymce - 在 TinyMCE 视觉模式下向任何元素添加类

> ID：15833240
> 
> 赞同：1
> 
> 时间：2013-04-05T11:51:01.940
> 
> 标签：tinymce

我正在寻找向我的 TinyMCE 编辑器添加一些脚本，允许我右键单击任何元素并将类应用到它。例如，如果我在项目符号列表中单击鼠标右键，则会弹出一个上下文菜单，我可以在其中从项目符号示例列表中进行选择。单击其中一个将自动将该项目符号外观的类添加到我的项目符号列表的父 UL 元素中。

我还希望能够在元素外部单击以插入整个元素。

如果这样的东西不存在并且我正在寻找示例，我会感到惊讶。

我正在使用 WordPress，我会将此功能添加到我的主题中。

# c++ - 圆形和矩形之间的碰撞

> ID：15833250
> 
> 赞同：2
> 
> 时间：2013-04-05T11:51:30.343
> 
> 标签：c++, c, math

我想检测圆形和矩形之间的碰撞，但不知道如何。

我知道如何使用勾股定理检测圆与圆之间的碰撞，即：

**(x2 - x1)^2 + (y2 - y1)^2 - (r2 + r1)**，但是检测碰撞的数学是什么

在 C 或 C++ 编程语言中的圆形和矩形之间。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T11:58:25.303

在碰撞检测中，首先检测简单对象之间的碰撞然后专注于更复杂的对象通常是有益的。这称为宽相和窄相碰撞检测。这个想法是，当可以简单地证明对象不发生碰撞时，首先使用更简单的算法来排除碰撞会使过程更快。

您最初可以将所有对象建模为包含可能更复杂的真实形状的圆圈或框。如果您发现这些对象正在发生碰撞，那么您可以使用更复杂的算法来检查碰撞。

众所周知，对于所有凸面物体，如果两个物体没有碰撞，那么你可以在它们之间找到一个平面。这被称为分离轴定理。由于圆形和正方形都是凸的，您可以使用它来设计一种算法来检测它们之间的碰撞。

您可以先搜索简单平面​​，例如平行于正方形边缘的平面和与圆相切的平面。一个不错的选择是在对象的两个中心之间的线上与圆相切的平面，然后是圆心和每个角之间的线。

一旦你找到了一个分离平面，物体就不会发生碰撞，你可以停止搜索。

希望这可以帮助。

（可以在此处找到有关此应用程序的非常详细的说明：[http](http://www.metanetsoftware.com/technique/tutorialA.html#section1) ://www.metanetsoftware.com/technique/tutorialA.html#section1 ）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T11:59:56.843

如果圆心在矩形内，或者圆心到矩形边界上最近点的距离小于圆的半径，则圆与矩形相交。圆心相对于矩形的位置有九种可能性，具体取决于它相对于其延伸边的位置：

```
A|B|C
-+-+-
D|E|F
-+-+-
G|H|I 
```

万一`E`，显然圆形和矩形相交。如果`A, C, G, I`您需要测试到最近角落的距离。在其余情况下，使用从圆心到最近边缘的点线距离。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T11:57:58.393

一种解决方案是将矩形变成四个线段，然后测试它们的交点。

在伪代码中：

```
for line in line-segments(rectangle)
   if line.end1 inside circle or line.end2 inside circle
       return true
   if line intersects circle
       return true
return false 
```

这提供了两种类型的测试：

1.  point in circle - 这很简单，距离圆心有一段距离
2.  线段与圆相交——这有点复杂（[示例](http://doswa.com/2009/07/13/circle-segment-intersectioncollision.html)）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T12:26:24.553

[正如他们之前所说，将您的矩形形状分成几条线，然后使用此处](https://stackoverflow.com/questions/31158/resources-of-techniques-use-for-collision-detection-in-2d/31186)的算法将每条线与圆相交。

# javascript - 我无法弄清楚如何从 preventdefault 中排除链接

> ID：15833252
> 
> 赞同：2
> 
> 时间：2013-04-05T11:51:41.793
> 
> 标签：javascript, hyperlink, preventdefault

我想从 preventDefault 中排除子 div 内的链接

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js">
</script>
<script>
$(document).ready(function(){
  $("#parent").click(function(event){
    event.preventDefault();
  });
});
</script>
</head>
<body>
<div id="parent">
<div id="child"><a href="mylink.html" alt="link">click me!</a></div>
</div>
</body> 
```

是否有可能让孩子`div`工作的链接？我现在花了大约 3 个小时寻找答案，但我似乎无法弄清楚！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T11:54:22.830

检查触发事件的目标不是锚点。如果不是，则不传播该事件。

```
$(document).ready(function(){
  $("#parent").click(function(event){
    if(!$(event.target).is("a")){
        event.preventDefault();
    }
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T11:55:52.723

只需检查事件的原始目标是否不是`<a>`标签：

```
$('#parent').click(function(event) {
    if(event.target.tagName !== 'A') {
        event.preventDefault();
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T11:56:35.460

```
$('div').on('click', "a", function(e) {
    e.preventDefault();
}); 
```

# java - 如何直接从 Android 获取堆转储？

> ID：15833254
> 
> 赞同：-3
> 
> 时间：2013-04-05T11:51:49.087
> 
> 标签：java, android

我只想知道如何直接从设备获取我的应用程序的堆转储。我已经从 Eclipse 内存分析器 (MAT) 获得了堆转储，但它提供了来自模拟器的堆转储。

请给我一些链接。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T12:54:11.027

第 1 步：购买 Android 设备。

第 2 步：如果设备没有附带 USB 电缆，则购买 USB 电缆连接设备和您的开发机器。

步骤#3：在设备上启用 USB 调试（取决于 Android 操作系统版本，这可能在“开发者选项”或“设置”应用程序的“应用程序”中）

第 4 步：将 USB 电缆插入设备和开发机器。

步骤#5：在设备上运行您的应用程序。

第 6 步：在 DDMS 中，单击设备视图中的进程，以获取在设备上运行的应用程序的副本。

步骤#7：单击设备视图工具栏中的“转储 HPROF 文件”图标（看起来像一个带有向下箭头的半满罐）

换句话说，通过选择要转储的进程并请求转储，您从设备获得堆转储的方式与从模拟器获得堆转储的方式完全相同。

# gerrit - 从现有的 git 存储库创建新的 Gerrit 项目

> ID：15833257
> 
> 赞同：1
> 
> 时间：2013-04-05T11:51:56.603
> 
> 标签：gerrit, repository, mirror

我想介绍一下我正在进行的项目的 Gerrit。

目前，我们已经有一个 git 存储库，上面提交了一些代码。

我已按如下方式初始化项目：

1.  java -jar gerrit-full-2.5.2.war init --batch -d gerrit-codereview
2.  cd gerrit-codereview/git
3.  git clone --mirror git@172.18.xx:my-repo.git

然后我负责创建用户和添加权限。

我可以看到正在发生的变化，我可以查看/发布它们。不幸的是，最后的“git push”（应该由 Gerrit 执行）没有发生。如果我手动进入“gerrit-codereview/git/my-repo.git”文件夹并执行“git push”，一切正常。

任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T14:30:19.247

Gerrit 目前不支持将外部存储库作为主存储库引用。您可以使用复制插件（Gerrit 附带）推送到外部存储库，但如果上游进行了更改，它不会处理合并冲突。这是一个通常要求的功能。更多信息可在[如何使用直接提交到 git 的更改来更新 gerrit 存储库？](https://stackoverflow.com/questions/15384799/how-to-update-gerrit-repos-with-changes-submitted-directly-to-git/15393748#15393748)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-18T15:43:43.297

对我来说最好的方法是：

1.  在 gerrit 上创建与原始名称相同的项目
2.  git clone --mirror "你要克隆的项目"
3.  mv "你克隆的项目".git "你的 Gerrit 安装"/git/

这是一个例子。我想克隆 raspberry linux 内核并将其定位为 Gerrit 上的 rpi/linux 项目

1.  创建gerrit项目rpi/linux
2.  rm -r "你的 Gerrit 安装"/git/rpi/linux.git
3.  git clone --mirror git@github.com:raspberrypi/linux.git
4.  mv linux.git "你的 Gerrit 安装"/git/rpi/

# c++ - 从模板继承时需要合格的访问权限

> ID：15833260
> 
> 赞同：2
> 
> 时间：2013-04-05T11:52:03.470
> 
> 标签：c++, templates

在这种情况下，为什么我不能访问`x`不合格的基类成员`B1`？在我看来并不模棱两可……</p>

```
template<class T>
struct A { T x; };

template<class T>
struct B1 : A<T> { T f() { return A<T>::x; } };

struct B2 : A<int> { int f() { return x; } }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T11:54:30.910

因为`x`不依赖，所以会在定义模板的上下文中查找。在这种情况下，编译器一无所知`T`，也无法查看依赖基类。例如，它怎么能知道任何事情`A<T>`而不知道是什么`T`。`A`（例如，可能有一个专业化，具有完全不同的成员。）

# linux - linux下如何禁用或更改GPU的超时限制？

> ID：15833261
> 
> 赞同：11
> 
> 时间：2013-04-05T11:52:03.763
> 
> 标签：linux, timeout, limit, gpu

有人知道如何在 Ubuntu 12.10 下禁用或更改 CUDA 内核的超时限制吗？（使用当前版本的 Windows 可以在注册表中设置超时限制。）

如果无法使用 Ubuntu 执行此操作，请告诉我。

我之前搜索的唯一结果如下：

*   在没有图形显示的情况下运行 CUDA 内核已附加到 GPU
*   将内核拆分成更小的内核以避免超过时间限制

这两种解决方案都不是我的选择，因为我需要我的应用程序的图形显示，并且在内核执行期间已经没有线程依次运行。拆分单个线程将花费数月的时间。请不要进一步询问这些说明中的详细信息。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T12:25:49.780

您可以通过修改 Xorg 配置 ( [`Option Interactive "0"`](http://http.download.nvidia.com/XFree86/Linux-x86/270.41.06/README/xconfigoptions.html#Interactive)) 来禁用看门狗。此问题的答案中有一个示例：[CUDA Visual Profiler 'Interactive' X config option?](https://stackoverflow.com/questions/6906579/cuda-visual-profiler-interactive-x-config-option)

# entity-framework - 实体框架继承：按类型排序/分组？

> ID：15833263
> 
> 赞同：5
> 
> 时间：2013-04-05T11:52:11.873
> 
> 标签：entity-framework

实体框架（以及我使用它的 RIA 服务）很好地支持继承。数据库映射可以是单表或多表，在第一种情况下，数据库表包括一个包含类型指示符的指示符列。

显然，这个指示符在模型中是不可见的，即使它是人们想要订购和分组的东西。

如果这是我想要做的，我是否必须在基类中引入一个额外的显式类型指示符，或者是否有更好的方法以某种方式按类型排序或分组？

我正在使用 EF5。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T12:44:51.903

是的，我可以想象您需要基本类型列表的场景。不幸的是，没有办法在概念模型中获得鉴别器（指示符）。我能想到的唯一方法是

```
db.BaseObjects.Where(b => ...)
  .AsEnumerable().Select (b => new {b.GetType().Name, b } ) 
```

之后，您可以按类型名称排序/分组。但是你不能在 ( `Select`) 之前投影`AsEnumerable`，所以限制数据大小的唯一方法是过滤 ( `Where`)。

有一个技巧可以将鉴别器列作为类模型中的可见属性。您可以在表中创建一个[计算列](http://msdn.microsoft.com/en-us/library/ms191250%28v=sql.105%29.aspx)，该列仅显示实际鉴别器列的值，并将其映射到标记为 的属性`DatabaseGeneratedOption.Computed`。

请注意，这需要[特别注意](http://geekswithblogs.net/DavidPaquette/archive/2012/09/23/calculated-columns-in-entity-framework-code-first-migrations.aspx)代码优先（迁移）。并且插入和更新需要一些性能，因为 EF 之后必须从数据库中读取值。

# html - 淡化背景但不淡化文本

> ID：15833271
> 
> 赞同：3
> 
> 时间：2013-04-05T11:52:30.547
> 
> 标签：html, css, fade

我已经对 div 应用了 CSS 淡入/淡出解决方案，这在很大程度上让我很满意。但是我只想将它应用于背景，而不是文本。我需要文本始终完全不透明。

见例子：http: [//jsfiddle.net/howiepaul/gUAPV/33/](http://jsfiddle.net/howiepaul/gUAPV/33/)

```
a.tab {background-color:#d4d4d4;
font-family: arial;
font-weight: bold;}

a.tab:hover {
opacity:1;
animation: tickhov 1.5s;
-moz-animation: tickhov 1.5s; /* Firefox */
-webkit-animation: tickhov 1.5s; /* Safari and Chrome */}
@-ms-keyframes tickhov {from {opacity:0.2;} to {opacity:1;}}
@-moz-keyframes tickhov /* Firefox */ {from {opacity:0.2;} to {opacity:1;}}
@-webkit-keyframes tickhov /* Safari and Chrome */ {from {opacity:0.2;} to {opacity:1;}}

a.tab{
opacity:0.2;
animation: letgo 1.5s;
-moz-animation: letgo 1.5s; /* Firefox */
-webkit-animation: letgo 1.5s; /* Safari and Chrome */}
@-ms-keyframes letgo {from {opacity:1;} to {opacity:0.2; visibility: hidden; display: none;}}
@-moz-keyframes letgo /* Firefox */ {from {opacity:1;} to {opacity:0.2; visibility: hidden; display: none;}}
@-webkit-keyframes letgo /* Safari and Chrome */ {from {opacity:1;} to {opacity:0.2; visibility: hidden; display: none;}} 
```

任何帮助将不胜感激。

非常感谢豪伊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T09:08:34.113

你应该在`background-color`not上制作动画`opacity`。仅供参考，如果这就是你所做的一切，你应该使用过渡而不是动画，它们要简单得多。

[jsFiddle](http://jsfiddle.net/Tyriar/zrMTd/2/)

```
a.tab {
    position:relative;
    font-family: arial;
    font-weight: bold;
    background-color:rgba(212,212,212,.2);
    -moz-transition:background-color 1.5s ease;
    -webkit-transition:background-color 1.5s ease;
    transition:background-color 1.5s ease;
}

a.tab:hover {
    background-color:rgba(212,212,212,1);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T09:24:02.917

无需为此使用动画并编写如此庞大的代码。如果您只需要更改背景以保持文本不变，则应使用**CSS 过渡**。它们更简单易用，只需几行代码即可实现。这是小提琴演示

[http://jsfiddle.net/gUAPV/37/](http://jsfiddle.net/gUAPV/37/)

```
a.tab {
    background-color: #f4f4f4; 
    font-family: arial;
    font-weight: bold;
    font-size : 40px;
}

a.tab:hover {
   background-color:#d4d4d4;

   -webkit-transition: background 300ms ease-in 200ms;
   -moz-transition: background 300ms ease-in 200ms;
   -o-transition: background 300ms ease-in 200ms;
   transition: background 300ms ease-in 200ms;
} 
```

我已经增加了字体大小，使其更显眼，您可以根据自己的使用情况进行调整。

PS 如果你想了解更多关于 CSS 过渡的信息，这里有一些有用的链接

[W3.Org 链接](http://www.w3.org/TR/css3-transitions/)

[Mozilla 开发者论坛链接](https://developer.mozilla.org/en-US/docs/CSS/Tutorials/Using_CSS_transitions)

希望这可以帮助 ：）

# php - 没有 $_GET 的 PHP 'get's' 数据？

> ID：15833275
> 
> 赞同：0
> 
> 时间：2013-04-05T11:52:46.660
> 
> 标签：php, parsing, variables, post, get

我不确定这是否是预期的行为。但是如果我在我的服务器上托管以下内容

```
<?php
print $stackoverflow; 
?> 
```

我还有另一个example.html，其中包含：

```
<form action="http://pinguincyb.org/roc/opdracht1/lawl.php" method="POST">
 <input type="text" name="stackoverflow" value="example">
 <input type="submit" value="Submit">
</form> 
```

页面打印“示例”，这是正常行为吗？在我做类似的事情之前，这些数据不应该是不可用的

```
$stackoverflow = $_GET["stackoverflow"]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T11:53:43.577

这是 PHP 已弃用的旧功能，称为[register globals](http://www.php.net/manual/en/ini.core.php#ini.register-globals)。甚至被删除。

你应该避免它。

阅读有关[使用寄存器全局变量的手册](http://www.php.net/manual/en/security.globals.php)

如果你有它，你必须禁用它。您可以在 php.ini、.htaccess、httpd.conf 或 .user.ini 中执行此操作（自 PHP 5.3 起）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:12:57.120

关于安全。

事实上，对于编写良好的应用程序，此设置是否打开并不重要。

一个编写良好的应用程序必须在使用前**定义它的所有变量**。如果遵循这条规则，任何`register_globals`人都无法造成任何伤害。

如果你有类似的东西

```
$admin = FALSE;
if (check_admin()) {
    $admin = TRUE;
} 
```

没有人能傻傻地成为管理员

```
/index.php?admin=1 
```

即使 register_globals 开启。

尽管无论如何都必须定义其他变量，但这只是为了程序的一致性。

这才是重点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T11:55:42.273

此功能已过时且已弃用。避免使用它，因为它不安全

# c - 哪个是 printf() 在 c 中以 %p 格式打印的地址？

> ID：15833283
> 
> 赞同：16
> 
> 时间：2013-04-05T11:53:23.547
> 
> 标签：c, linux, gcc, virtual-address-space

我有简单的代码如下：

```
#include<stdio.h>

int glob;

int main(void)
{
   int a;
   printf("&a is : %p \n", &a);
   printf("glob is : %p \n", &glob);
   return 0;
} 
```

上述程序的输出是： 第一次运行：

```
&a is : 0x7fff70de91ec
glob is : 0x6008f4 
```

第二次运行：

```
&a is : 0x7fff38c4c7ac
glob is : 0x6008f4 
```

我正在研究虚拟和物理地址。我有以下问题：

1.  变量“a”的打印地址（物理/虚拟）是哪个？
2.  如果它是虚拟的，那么它在同一程序的每次运行中如何变化？据我了解，编译器在编译时为变量提供虚拟地址？
3.  为什么每次程序运行时全局变量的地址都是不变的？

在 Linux 上执行此程序：2.6.18-308.el5 x86_64 GNU/Linux

编译使用：gcc 版本 4.1.2 20080704 (Red Hat 4.1.2-52)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-05T11:56:15.787

*两个*地址都是虚拟的。

现代系统使用堆栈随机化来防止所谓的堆栈粉碎攻击，这就是为什么局部变量可以在每次运行时更改其位置的原因。但是，全局变量存储在可执行文件中，并且每次都以相同的偏移量加载。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-05T12:01:08.573

[在程序中看到的地址总是虚拟的，OP 描述的行为是 Linux 避免缓冲区溢出攻击](http://en.wikipedia.org/wiki/Buffer_overflow)的对策。

只是试试，你可以禁用它

```
sysctl -w kernel.randomize_va_space=0 
```

然后再次运行您的程序并观看。

全局的位于另一个内存空间中，从骇客的角度来看，这不会是有害的。那是因为它不是每次都随机的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-05T11:56:47.020

您的程序将**始终**只看到虚拟地址。

实地址仅对内核模式下的虚拟内存管理器可用。

Globals 具有相同的地址（直到您在其前面放置其他变量），因为它是在数据段中创建的。

局部变量总是在堆栈上创建。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-05T12:52:55.097

程序看到的所有地址都是虚拟的。然而，局部变量在称为数据段的特殊区域上进行堆栈和全局。虽然变量的相对位置是在编译时决定的，但每次运行时堆栈可能会有所不同。

# wpf - PdfWriter.GetInstance 抛出 System.NullReferenceException

> ID：15833285
> 
> 赞同：7
> 
> 时间：2013-04-05T11:53:27.000
> 
> 标签：wpf, itextsharp

我正在尝试使用以下内容使用 iTextSharp 5.3.4 创建一个 pdf 文档

```
Document document = new Document();
FileStream stm = new FileStream(filename, FileMode.Create);
PdfWriter writer = PdfWriter.GetInstance(document, stm); 
```

我得到一个带有以下堆栈跟踪的 System.NullReferenceException：

```
System.NullReferenceException occurred
HResult=-2147467261
Message=La référence d'objet n'est pas définie à une instance d'un objet.
Source=itextsharp
StackTrace:
   à iTextSharp.text.Version.GetInstance()
InnerException: 
```

我已经验证文档和 stm 都不是空的，如果我在 VS12 中选择“继续”，则会创建文档 - 但是总是抛出异常。我更新到 iTextSharp 5.4.0 并且它仍在发生。我在任何地方都找不到有关此的任何信息-有人有任何想法吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-05T11:55:12.273

确保您没有捕获所有异常。这`NullReferenceException`很可能是已经在 iTextSharp 中捕获和处理的问题，因此您不必关心它。
你可以继续的事实支持了这个理论。

更改以下设置以验证：

Debug -> Exceptions -> 去掉“Common Language Runtime Exceptions”的“Thrown”列中的复选框。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-11-08T17:57:32.800

经过长时间的调试，我找到了一个可行的奇怪解决方案。它基于一个发现：PdtWriter 实例好像创建时间长，然后延迟解决问题。在这里我提出我的解决方案：一个返回 PdfWriter 实例的函数。

```
static  public iTextSharp.text.pdf.PdfWriter   PdfWriter_GetInstance(iTextSharp.text.Document document , System.IO.FileStream FS )
{
  iTextSharp.text.pdf.PdfWriter writer = null;

  for (int Times = 0; Times < 6; Times++)
  {
    try
    {
      writer = iTextSharp.text.pdf.PdfWriter.GetInstance(document, FS); // sometime rise exception on first call
      break; //created, then exit loop
    }
    catch
    {
      System.Threading.Thread.Sleep(250); // wait for a while...
    }
  }
  if (writer == null) // check if instantiated
  {
    throw new Exception("iTextSharp PdfWriter is null");
  }

  return writer;
} 
```

# javascript - setinterval 似乎加速了

> ID：15833296
> 
> 赞同：1
> 
> 时间：2013-04-05T11:54:04.423
> 
> 标签：javascript

我在函数中有一个 setinterval，在第一次点击时一切似乎都很好，但每次后续点击都会加速这个计时器。我不明白为什么。

```
function startGame() {
    var myVar=setInterval(function(){myTimer()},100);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T11:57:06.243

第二次单击时，第一个间隔也有效，因为此事件在 100 毫秒内发生两次。试试这个：

```
var myVar;
function startGame() {
    if(myVar)
        clearInterval(myVar);
    myVar=setInterval(function(){myTimer()},100);
} 
```

或者：

```
var myVar;
function startGame() {
    if(!myVar)
        myVar=setInterval(function(){myTimer()},100);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:59:14.973

Setinterval 将函数设置为每 X 毫秒运行一次，在你的情况下，我猜你点击一次，它开始每 100 毫秒运行一次，然后你再次点击，它开始第二次每 100 毫秒运行一次（所以现在，平均每 50 毫秒运行一次）。

我会推荐 setTimeout，但我认为这也不是你需要的。我认为您正在尝试将 setinterval 用作游戏循环，对吗？在这种情况下，您需要一种只运行一次的方法。

# c++ - 按字母顺序排列字符串数组（甚至是 *ptr）

> ID：15833297
> 
> 赞同：0
> 
> 时间：2013-04-05T11:54:06.400
> 
> 标签：c++, arrays, visual-c++, sorting, alphabetized

所以我已经阅读了大约五六篇关于如何重新排列数组的文章，有些是按字母顺序排列的，有些是按数字排列的，我还阅读了这一章。这是我最后想出来的，

```
void selectionSort (string array[], int size)
{
int startScan, minIndex;
string minValue;
for(startScan = 0; startScan<(size-1); startScan++)
{
    minIndex = startScan;
    minValue = array[startScan];
    string temp;
    for(int index = startScan+1; index<size; index++)
    if(array[index] <minValue)
    {
        minValue = array[index];
        minIndex = index;
    }
}
array[minIndex] = array[startScan];
array[startScan] = minValue;
system("pause");
} 
```

显然，这是行不通的。当我运行它时，它向我抱怨需要打破它。我认为这会起作用，无论是 int 还是任何数字类型。哎呀，如果我将它设置为 char 类型的 ASCII 值，它甚至可能会运行。但实际的分配是一个字符串，我就是想不通。我想过尝试剪掉第一个字母并转换为 char 以按字母顺序排列，但有些字符串的姓氏相同，名字不同，所以这也行不通。

我需要解决什么问题才能让我的排序按字母顺序排列我的数组？

***更新***阅读评论并重新回顾本书后，更新了我在代码中所做的更改。运行代码时我不再收到错误，但它仍然没有排序！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:58:32.077

所以由于某种原因你选择不使用标准，（你有交换和排序）

我想请您注意：

```
 temp = array[count];
    array[count]=array[(count+1)]; <-- when count is exactly size -1 you are going to commit overflow to your array
    array[(count+1)] = temp; 
```

您需要确保您的索引不会超出数组边界..：

```
for(int count = 0; count<size -1 ; count++) 
```

（顺便说一句，看看 std::swap，可能更适合你使用）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T11:58:44.240

`array[count + 1]`当您这样做时（何时`count == size - 1`），存在明显的越界问题。而且我看不到代码将如何对任何内容进行排序。你想用什么算法？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T12:00:47.323

对于初学者，当您到达数组末尾时，您会得到一个索引越界异常。由于您正在访问 count+1，因此您的 for 循环需要在 size-1 处停止。这看起来像是冒泡排序的开始，但没有完全实现。对冒泡排序做一点研究，你应该很快就能得到答案。

# ruby-on-rails - Rails 中的 Rubyvis

> ID：15833302
> 
> 赞同：0
> 
> 时间：2013-04-05T11:54:20.257
> 
> 标签：ruby-on-rails, ruby, views

我正在使用 Rails 制作一个项目，我需要制作一些图表，所以我正在考虑使用 Rubyvis。

如果我在控制器中有以下代码：

```
require 'rubyvis'

vis = Rubyvis::Panel.new do 
  width 150
  height 150

  bar do
    data [1, 1.2, 1.7, 1.5, 0.7, 0.3]
    width 20
    height {|d| d * 80}
    bottom(0)
    left {index * 25}
  end   
end

vis.render    
puts vis.to_svg 
```

我应该如何将输出放在视图中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:05:11.297

在运行时生成您希望在渲染视图中显示的 SVG 文件并不是应该在控制器中完成的事情。

相反，在您`app/helpers/application_helper.rb`或特定于您的控制器操作的助手中创建一个新方法。

```
require "rubyvis"

class ApplicationHelper
  def some_method
    vis = Rubyvis::Panel.new do 
    width 150
    height 150

    bar do
      data [1, 1.2, 1.7, 1.5, 0.7, 0.3]
      width 20
      height {|d| d * 80}
      bottom(0)
      left {index * 25}
      end   
    end

    vis.render    
    vis.to_svg
  end
end 
```

现在在您的视图中，您可以在想要转储 SVG 数据的任何地方简单地调用以下命令。

```
<%= some_method %> 
```

# ios - 从后台恢复后访问核心数据 NSManagedObject 会使应用程序崩溃

> ID：15833305
> 
> 赞同：6
> 
> 时间：2013-04-05T11:54:23.763
> 
> 标签：ios, objective-c, core-data, objective-c-blocks

我正在使用核心数据，发现从后台恢复后应用程序有时会崩溃。当我尝试访问子类上的属性时，我已经确定了在块方法体内发生的崩溃`NSManagedObject`。

我有一个包含`NSManagedObject`对子类的引用的属性。

> @property(nonatomic,strong) CalItem *calObject;

为了重现崩溃，我首先需要调用子 viewController( `NoteViewController`) 并传递一个块 ( `NoteTextBlock`)。

```
NoteViewController *noteViewController = [[NoteViewController alloc]initWithNote:self.calObject.note NoteTextBlock:^(NSString *noteText) {
                    self.calObject.note = noteText;  //crashing here
                }]; 
```

然后将应用程序发送到后台并恢复它。之后在 NoteViewController 中，我将向调用 viewController 返回一条消息。

```
if (self.noteTextBlock)
{
 self.noteTextBlock(trimmedString);
} 
```

当块返回并`self.calObject.note = noteText`执行该行时，应用程序崩溃。

所以显然你不能在堆栈上放一个块，完全恢复应用程序，然后继续块内定义的内容？或者我只是在这里做错了什么？

**编辑：**
`*** Terminating app due to uncaught exception 'NSObjectInaccessibleException', reason: 'CoreData could not fulfill a fault for '0xb253100 <x-coredata://C2304B7C-7D51-4453-9993-D33B9113A7A5/DTODay/p57>''`

该块在子视图控制器中定义如下：

```
@property(nonatomic, copy)NoteTextBlock noteTextBlock; 
```

**Edit2**
这是我在崩溃的行上设置断点时得到的。
`(lldb) po self.calObject`
`$2 = 0x0b4464d0 <DTODay: 0xb4464d0> (entity: DTODay; id: 0xb489d00 <x-coredata://C2304B7C-7D51-4453-9993-D33B9113A7A5/DTODay/p57> ; data: <fault>)`

我正在使用 MagicalRecord 库来管理所有核心数据的东西。

```
- (void)applicationDidBecomeActive:(UIApplication *)application
{
    if ([NSManagedObjectContext MR_defaultContext] == nil
        || [NSManagedObjectModel MR_defaultManagedObjectModel] == nil
        || [NSPersistentStoreCoordinator MR_defaultStoreCoordinator] == nil
        || [NSPersistentStore MR_defaultPersistentStore] == nil
        )
    {
        //coming back from background, re-init coredata stack
        [MagicalRecordHelpers setupCoreDataStackWithAutoMigratingSqliteStoreNamed:DBNAME];
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:38:32.527

尝试在后台保存状态，然后在 AppDelegate.m 中恢复唤醒状态

```
 - (void)applicationDidEnterBackground:(UIApplication *)application {
        /*
         Sent when the application is about to move from active to inactive state. This can occur for certain types of temporary interruptions (such as an incoming phone call or SMS message) or when the user quits the application and it begins the transition to the background state.
         Use this method to pause ongoing tasks, disable timers, and throttle down OpenGL ES frame rates. Games should use this method to pause the game.
         */
        [MagicalRecord cleanUp]; 
}

   - (void) applicationDidBecomeActive:(UIApplication *)application {
        /*
         Called as part of the transition from the background to the inactive state; here you can undo many of the changes made on entering the background.
         */
        [MagicalRecord setupCoreDataStackWithStoreNamed:DBNAME]; 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T05:39:35.630

我不熟悉MagicalRecords，但是...

当您有一个在商店中不再存在（或从未存在过）的**无故障**（如在 Edit2 中看到的）对象时，会引发此异常。
这可能在以下几种情况下发生：

1.  另一个上下文已将其从商店中删除

2.  您已插入它，为其获取了永久 id，并且：
    ** 刷新它
    ** 保存它（但仅限于父上下文），重置父对象，并刷新当前上下文中的对象（或将其作为错误导入到您的主要背景），见[`objectWithID:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectContext_Class/NSManagedObjectContext.html#//apple_ref/occ/instm/NSManagedObjectContext/objectWithID%3a)

    * * *

可能还有其他我忘记或不知道的情况。

如果您可以描述您的堆栈结构和您的对象状态/来源，我们可能能够更好地理解问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T03:29:45.047

我从未使用过 Magical Record，但在我看来，当应用程序再次激活时，您正在重建现有的 Core Data 堆栈。我想你真正想做的是设置核心数据`applicationDidFinishLaunching:(UIApplication *)`而不是`applicationDidBecomeActive:(UIApplication *)`.

前者只会在应用程序启动时设置堆栈，而后者将在每次应用程序“唤醒”时重新设置堆栈。

问题是您随后创建了一个新的 Core Data 堆栈，同时拥有引用旧 Core Data 堆栈的对象。

通常，当应用程序启动时，您希望创建堆栈。当应用程序终止时，您可以尝试干净地取下堆栈。但是，当它只是进入后台时，您应该简单地保存数据，然后在重新激活应用程序时您真的不需要做任何事情。

# compass-sass - 在 CodeKit 中的 OSX Lion 上编译 CSS - 找不到或无法读取要导入的文件：指南针

> ID：15833309
> 
> 赞同：0
> 
> 时间：2013-04-05T11:54:34.487
> 
> 标签：compass-sass, codekit

CodeKit 编译我的 SCSS 文件时遇到问题。它通过终端使用`compass compile`或`compass watch`在 CodeKit 中工作，它会引发此错误：

```
Syntax error: File to import not found or unreadable: compass.
          Load path: / 
```

它抱怨的行是：

```
@import "compass"; 
```

我已经以标准方式安装了 compass 并将我的项目放入 CodeKit 中，但不知道它为什么会死在这里......我有一个谷歌，但大多数人都在抱怨“zurb-foundation”，他们的问题通常是他们没有不要在他们的 compass.rb 文件中导入它。这里只是指南针。

我已经尝试过`sudo gem update`，但似乎没有任何东西可以让 CodeKit 正确编译。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T15:18:48.833

我正在使用 Zend Framework 并将根目录添加到 CodeKit。看来我必须添加`public`文件夹才能使其工作，因为它随后将我识别`project`为 Compass 项目，然后在该根目录中使用 SASS。

# javascript - Facebook UI，弹出窗口显示发生错误。请稍后再试

> ID：15833314
> 
> 赞同：-2
> 
> 时间：2013-04-05T11:54:44.927
> 
> 标签：javascript, facebook, post, sdk

好的，我做了一个代码，它显示发生错误。请稍后在弹出窗口出现时尝试，并在 colsole 中显示：undefined at "function callback(response) { console.log(response); }"

这是代码：

```
<script>
function postToFeed() {
  // call the API
  var obj = {
    method: 'feed',
    link: 'https://apps.facebook.com/assault_combat/takegift',
    picture: 'https://flyandsmash.herokuapp.com/images/Gift.png',
    name: 'Take a gift from Assault Combat',
    caption: 'https://apps.facebook.com/assault_combat/',
    actions: [
      {'name': 'Get Gift', 'link': 'https://apps.facebook.com/assault_combat/takegift'}
    ],
    description: 'Action links are awesome.'
  };

  function callback(response) {
    console.log(response);
  }

  FB.ui(obj, callback);
}

</script> 
```

顺便说一句，当我输入“FB.init 和其他东西时，它也说错误......（我已经导入了 div fb 根和东西）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T16:25:53.297

始终使用异步方式加载 JavaScript SDK：[https ://developers.facebook.com/docs/javascript/quickstart](https://developers.facebook.com/docs/javascript/quickstart)

```
<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '{your-app-id}',
      status     : true,
      xfbml      : true
    });

    //earliest possibility to use FB
  };

  (function(d, s, id){
     var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement(s); js.id = id;
     js.src = "//connect.facebook.net/en_US/all.js";
     fjs.parentNode.insertBefore(js, fjs);
   }(document, 'script', 'facebook-jssdk'));
</script> 
```

关于错误：您在 obj 中添加的所有链接都无法访问，这可能是主要问题。此外，标题不能有和 URL，但它仍然可以使用，因为 Facebook 只是将其删除。最好尝试使用更少的参数，删除操作并尝试不使用。

我也会在没有嵌套函数的情况下编写它：

```
<script>
function callback(response) {
  console.log(response);
}

function postToFeed() {
  // call the API
  var obj = {
    method: 'feed',
    link: 'https://apps.facebook.com/assault_combat/takegift',
    picture: 'https://flyandsmash.herokuapp.com/images/Gift.png',
    name: 'Take a gift from Assault Combat',
    caption: 'https://apps.facebook.com/assault_combat/',
    actions: [
      {'name': 'Get Gift', 'link': 'https://apps.facebook.com/assault_combat/takegift'}
    ],
    description: 'Action links are awesome.'
  };

  FB.ui(obj, callback);
}
</script> 
```

确保在初始化 SDK 之后调用“postToFeed”，并且始终在用户交互/鼠标事件上调用。如果您不在用户事件中使用它，浏览器可能会阻止弹出窗口。

# android - 如何使用钛以编程方式获取 Android/iPhone 的联系人列表

> ID：15833319
> 
> 赞同：2
> 
> 时间：2013-04-05T11:55:02.540
> 
> 标签：android, iphone, titanium, titanium-mobile

如何使用 以编程方式获取 Android/iPhone 的联系人列表`titanium`，我需要这个用于只读目的。

我已经检查过这个[我可以使用任何 Titanium API 获取用户的电话号码吗？](https://stackoverflow.com/questions/7065911/can-i-get-a-users-phone-number-using-any-of-the-titanium-apis)，但我喜欢使用我的应用程序打开它，然后拨打所选号码的电话，我的应用程序不会对该号码执行任何其他操作（编辑、删除）。在使用钛或简单的 Android 和 iPhone 的 Android 和 iPhone 中是否有可能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T12:03:25.920

首先，您需要访问[此处](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.Contacts)描述的联系人。

之后，可以通过以下方式获取所有联系人[`getAllPeople`](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.Contacts-method-getAllPeople)

这适用于 iOS 和 Android。

在 Android 上执行呼叫很简单（您应该使用来创建电话呼叫[意图](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.Android.Intent)`Ti.Android.ACTION_DIAL`）。在 iOS 上，您只需要显示号码，系统就会将其链接到呼叫操作。如果没有，您可以向元素添加侦听器：

```
label.addEventListener('click', function(e) {
  Ti.Platform.openURL('tel:<number');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T12:21:53.770

[您可以使用showContacts](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.Contacts-method-showContacts)方法获取您的电话联系人，如下所示

```
Titanium.Contacts.showContacts(); //Will display the native contacts in both iphone and android 
```

如果是 iphone，您应该需要联系人的访问权限。您可以按如下方式检查权限

```
if (Ti.Contacts.contactsAuthorization == Ti.Contacts.AUTHORIZATION_AUTHORIZED){
    //You've authorization
    //Some code here
} else if (Ti.Contacts.contactsAuthorization == Ti.Contacts.AUTHORIZATION_UNKNOWN){
    Ti.Contacts.requestAuthorization(function(e){
    //Authorization is unknown so requesting for authorization
    if (e.success) {
            //You've authorization
            //Some code here
        } else {
            //No authorization hence you cannot access contatcs
        }
    });
} else {
    //No authorization hence you cannot access contatcs
} 
```

有关详细信息，请参阅[钛触点模块](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.Contacts)。

`Ti.Contacts.getAllPeople`也会这样做，也请参考[此](https://stackoverflow.com/questions/12874175/get-phone-numberandroid-in-titanium/12890942#12890942)链接

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-22T11:08:50.060

```
$.index.open();
var people = Titanium.Contacts.getAllPeople();
var totalContacts = people.length;
Ti.UI.setBackgroundColor('#F0FFFF');
var data = [];
    var win = Ti.UI.createWindow({
    backgroundColor : 'white',
});

var view = Ti.UI.createView({
    height : "50dp",
    width : "100%",
    top : '0dp',
    backgroundColor : '#050505',
});

var text = Ti.UI.createLabel({
    text : "Contact Book",
    left : 20,
    color : '#fff'

});

view.add(text);
win.add(view);

var template = {
    childTemplates : [{
        type : 'Ti.UI.Button',
        bindId : 'image',
        properties : {
            left : '2dp',
            backgroundImage : 'appicon.png',
        }
    }, {
        type : 'Ti.UI.Label',
        bindId : 'rowtitle',
        properties : {
            left : '70dp'
        }
    }]
};
if( totalContacts > 0 )
{ 
    for( var index = 0; index < totalContacts; index++ )
    {
         var person = people[index];
        Titanium.API.info(person.fullName);
        //table.add(person.fullName);
        if(person.fullName != null){
            data.push({
                rowtitle : {
                    text :person.fullName
                },

            });
        }
    }
}

var listView = Ti.UI.createListView({
    top : '55dp',
    templates : {
        'plain' : template
    },

    defaultItemTemplate : 'plain',
});

var section = Ti.UI.createListSection({
    items : data
});

listView.sections = [section];

win.add(listView);
win.open(); 
```

# asp.net-mvc-3 - Entity Framework 4.1 两个跟踪查询

> ID：15833325
> 
> 赞同：0
> 
> 时间：2013-04-05T11:55:15.890
> 
> 标签：asp.net-mvc-3, linq, entity-framework-4.1

如果在其他地方已经回答了这个问题，我正在学习 EF，所以很抱歉。我找不到解决方案。我正在使用两个跟踪查询，因为我不能使用 Include，因为它不支持条件。所以我的代码如下：

```
 List<int> CategoryIDs = _categoryIDs.Split(',').Select(t => int.Parse(t)).ToList(); 
```

我的模型：

```
 public class Genre
{

    public int GenreID { get; set; }
    public string Name  { get; set; }
    public string iconURL{ get; set; }
    public string Description { get; set; }
    public int DisplaySequence { get; set; }
    public IList<Category> Categories { get; set; 

}

   public class Category
   {

    public int CategoryId { get; set; }
    public int GenreID { get; set; }
    public string CategoryName { get; set; }
    public virtual Genre Genre { get; set; }
   }

     public class SubCategory
      {

    public int SubCategoryID { get; set; }     
    public int CategoryID { get; set; }
    public string SubCategoryName { get; set; }  
    public virtual Category Category { get; set; } 
} 
```

然后我有我的视图模型：

```
public class HomeIndexData
{

    public IEnumerable<Genre> Genres { get; set; }
    public IEnumerable<Category> Categories { get; set; }
    public IEnumerable<SubCategory> SubCategories { get; set; }         

} 
```

然后我试图将视图模型返回到我的索引：

```
 public ActionResult Index()
     {

     var genres = db.Genres.ToList().OrderBy(g => g.DisplaySequence);
     var categories = db.Categories.Include(i => i.SubCategories)
                     .Where(i => CategoryIDs.Contains(i.CategoryId));
            foreach (var category in categories)
            {

            };

           HomeIndexData viewModel = new HomeIndexData
            {
                Genres = genres                         

            };
            return View(viewModel);      

        } 
```

它返回结果，但我也想过滤子类别。如何放置 WHERE 条件而不是 .Include(i => i.SubCategories)。

请注意我不想返回匿名类型，这就是为什么我是两个跟踪查询。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T11:09:01.757

Right, I think I know what you want to do here:

```
// so filter out categories
var categories = db.Categories.Where(c => CategoryIDs.Contains(c.CategoryID)); 

// so filter out subcategories - I'm not sure what kind of filtering you want on subcategories
var subcategories = db.Subcategories.Where(s => CategoryIDs.Contains(s.SubCategoryID)); 
// so alternatively just do this: var subcategories = db.Subcategories.Where(s => s.DoYourFilteringForSubcategories);

foreach (var subcategory in subcategories)
    var cat = categories.SingleOrDefault(c => c.CategoryID == subcategory.CategoryID)
    if (cat != null)
    {
        cat.Subcategories.Add(subcategory);
    }
    else
    {
        // very good question? what are you going to do with subcategories that
        //match your criteria, but its category does not meet category filter
    } 
```

in your model you need to add:

```
 public class Category
   {
    public int CategoryId { get; set; }
    public int GenreID { get; set; }
    public string CategoryName { get; set; }
    public virtual Genre Genre { get; set; }
    **public virutal List<Subcategory> Subcategories{ get; set; }**
   } 
```

So then you end up only with categories that match your filter and contains only subcategories that match the filter. All strongly typed and tracked.

# java - 自动完成文本视图的选定项目显示为简单的文本视图？

> ID：15833327
> 
> 赞同：17
> 
> 时间：2013-04-05T11:55:21.383
> 
> 标签：java, android, android-edittext, autocompletetextview, onitemclicklistener

我正在使用一个自动完成文本视图，它显示数据库中的一些名称。我想在我从自动完成文本视图中选择的文本视图中显示一个名称。这是我的代码：

```
ArrayList<String> s1 = new ArrayList<String>();

      for (StudentInfo cn : studentInfo) {
            s1.add(cn.getName());
        }
        ArrayAdapter<String> adapter =  new ArrayAdapter<String>(this, android.R.layout.simple_dropdown_item_1line,s1); 
       a1.setThreshold(1); 
        a1.setAdapter(adapter); 
```

* * *

```
a1.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {
    }
        }); 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2015-10-01T13:30:04.620

试试这种方式：

```
AutoCompleteTextView a1 = (AutoCompleteTextView) findViewById(...);

StudentInfo[] s1 = studentInfo.toArray(new StudentInfo[studentInfo.size()]);

ArrayAdapter<StudentInfo> adapter = new ArrayAdapter<StudentInfo>(this, android.R.layout.simple_dropdown_item_1line, s1);
a1.setAdapter(adapter);
a1.setOnItemClickListener(new OnItemClickListener() {

    @Override
    public void onItemClick(AdapterView<?> parent, View arg1, int position, long arg3) {
        Object item = parent.getItemAtPosition(position);
        if (item instanceof StudentInfo){
        StudentInfo student=(StudentInfo) item;
            doSomethingWith(student);
        }
    }
}); 
```

ArrayAdapter 使用 StudentInfo 的 toString() 方法来生成显示的文本，所以你需要实现一个不错的 toString 方法。

这样，这种实现可以适应任何对象类型。

顺便说一句：我更喜欢**android.R.layout.simple_spinner_dropdown_item**而不是**android.R.layout.simple_dropdown_item_1line**

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-12-21T11:27:49.997

感谢斯蒂芬·里希特！我想补充一点，`List<T>`在构建适配器时可以直接使用：

```
AutoCompleteTextView autoCompleteTextView = dialogView.findViewById(R.id.autoComplete);
            // Where mStudentsInfo is List<StudentInfo>
            ArrayAdapter<StudentInfo> adapter = new ArrayAdapter<>(this, android.R.layout.simple_dropdown_item_1line, mStudentsInfo);
            autoCompleteTextView.setAdapter(adapter);
            autoCompleteTextView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
                @Override
                public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
                    Object item = parent.getItemAtPosition(position);
                    if (item instanceof StudentInfo) {
                        StudentInfo studentInfo = (StudentInfo) item;
                        // do something with the studentInfo object
                    }
                }
            }); 
```

并且不要忘记覆盖以下`toString()`方法`StudentInfo.class`：

```
public class StudentInfo {

....

    @Override
    public String toString() {
        return studentName;
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-07-14T20:06:39.773

模型类的覆盖`toString`方法（在本例中为 StudenInfo）不是一个好主意！
如果您只想获取所选项目的文本，请使用以下代码：

```
 autoCompleteView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
                String selectedItem = (String) parent.getItemAtPosition(position);
                // here is your selected item
            }
        }); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-04-29T09:00:46.030

从视图对象**arg1**中获取 String 的值。从提供给 AutoCompleteTextView 的 ArrayList 中使用此字符串获取项目的位置。

在您的情况下，代码如下所示。

```
int selectedPos = s1.indexOf((String) ((TextView) arg1).getText()); 
```

`selectedPos`是字符串在提供的 ArrayList 中的位置。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-05T12:16:10.787

你的`s1`包含所有的名字`database`

```
a1.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int position,
                    long arg3) {
            Log.d("your selected item",""+s1.get(position));
            //s1.get(position) is name selected from autocompletetextview
            // now you can show the value on textview. 
    }
        }); 
```

希望这会帮助你，

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-06-23T11:06:28.273

从使用用户定义的数据类型并设置相关列表的值的自动完成选择中获取选定的项目。以下代码对我有用

```
@Override
public void onItemClick(AdapterView<?> parent, View view, int position,
long arg3) {
    int selectedPos = getYourList().indexOf((((TextView)view).getText()).toString());
    SomeDAO dao = getSomeDaoList().get(selectedPos);
    //do your code
} 
```

注意：我已将 onItemClick 中的默认参数名称更改为 arg0-parent、arg1-view、arg2-position & SomeDAO 是用户定义的数据类型

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-07-08T08:52:59.517

使用父位置为 '0'

```
 txt_search.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View arg1, int position, long id) {
            Object item = parent.getItemAtPosition(0);
            if (item instanceof MYData{
                MYData data=(MYData) item;
                String dd = data.getName();
            }
        }
    }); 
```

# android - 自定义 android 谷歌地图 v2

> ID：15833329
> 
> 赞同：0
> 
> 时间：2013-04-05T11:55:25.773
> 
> 标签：android, google-maps

如果我想重绘整个屏幕，我能走多远。例如，如果我想用另一种颜色、形状、位置等重绘建筑物，可以吗？我想要那个，我可以设置android地图的一些属性，放置标记，画线等等，但是还有其他几乎覆盖整个世界的地图吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:23:14.733

是的。

您可能想了解[TileOverlay](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model/TileOverlay)并在 Google Play 服务地图示例中查找月球地图。

# assembly - 使用 + 和 [] 间接寻址

> ID：15833330
> 
> 赞同：3
> 
> 时间：2013-04-05T11:55:28.493
> 
> 标签：assembly, addressing-mode

我对 asm 的东西有点陌生。查看从 C 为 TI 的 C28x CPU 生成的 asm 并获得指令

```
MOVL *+XAR4[0],ACC 
```

我知道它是一个长操作数移动指令，它获取累加器中的值并将其放在...指向的位置......什么？

XAR4 是辅助寄存器 4，但 '+' 和 '[0]' 有什么作用呢？他们会需要额外的周期吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:19:52.427

*从“TMS320C28x DSP CPU和指令集参考指南”*的第5.6节“*间接寻址模式*” ：

 *```
*+XARn[3bit]
32bitDataAddr(31:0) = XARn + 3bit
Note: The immediate value is treated as an unsigned 3-bit value. 
```

因此它将存储在（具体而言）`ACC`指向的内存位置。`XAR4``XAR4+0`

当 3 位偏移量为 0 时，可以将其省略：

```
The assembler also accepts ”*XARn” as an addressing mode.
This is the same encoding as the ”*+XARn[0]” mode 
```*

# eclipse - 声纳-Eclipse 集成

> ID：15833332
> 
> 赞同：1
> 
> 时间：2013-04-05T11:55:30.993
> 
> 标签：eclipse, sonarqube

我正在将声纳 3.2 版与 Eclipse Juno（4.2 版）集成。我已经通过eclipse“安装新软件”安装了这个插件......现在集成后，当我通过进入eclipse首选项窗口在eclipse中添加声纳服务器时，它会询问声纳服务器URL，用户名和密码，我提供这些详细信息（假设用户名和声纳的密码）并单击测试连接，然后通过“无法连接”消息。

有谁知道这背后的原因是什么？

用户名和密码在这里有什么意义？

如果有人对此有任何想法，请回复。

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:55:37.103

您需要在服务器上安装[Sonar 3.4 或更高版本](http://docs.codehaus.org/display/SONAR/Installing+Sonar+in+Eclipse)才能从 Eclipse Juno 访问它。旧版本只能从 Helios 和 Indigo 访问。

# asp.net - Ajax htmlEditorExtender - 无法识别的元素清理程序

> ID：15833334
> 
> 赞同：2
> 
> 时间：2013-04-05T11:55:32.133
> 
> 标签：asp.net, ajax, vb.net, web-config

嗨，我已经从 Microsoft 下载了最新版本的 Ajax Toolkit，我正在尝试为 htmlEditorExtender 设置 sanitizer，但是在尝试构建站点时我不断收到以下错误：

> “无法识别的元素‘消毒剂’。”

按照 Ajax 网站上的指南，我尝试添加以下内容：

```
<compilation debug="true" strict="false" explicit="true" targetFramework="4.0">
  <sanitizer defaultProvider="AntiXssSanitizerProvider">
    <providers>
      <add name="AntiXssSanitizerProvider"
           type="AjaxControlToolkit.Sanitizer.AntiXssSanitizerProvider"></add>
    </providers>
  </sanitizer>
  <assemblies>
    <add assembly="System.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
    <add assembly="System.Web.Extensions.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    <add assembly="System.Windows.Forms, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
  </assemblies>
</compilation> 
```

到我的 web.config 以及：

```
<sectionGroup name="system.web">
  <section name="sanitizer"
      requirePermission="false"
      type="AjaxControlToolkit.Sanitizer.ProviderSanitizerSection, 
    AjaxControlToolkit"/>
</sectionGroup> 
```

我对 ASP.net 和 VB.net 还很陌生，而且我以前从未使用过 Ajax 工具包。在我的 Bin 文件夹中，我有 AjaxControlToolkit.dll，它是在按照说明将工具包控件添加到工具箱时安装的。

有什么我遗漏或需要做的事情才能让这一切正常工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-05T21:39:48.257

将`<sanitizer>`标签**直接**放在后面`<system.web>`，如下所示：

```
<system.web>
    <sanitizer defaultProvider="HtmlAgilityPackSanitizerProvider">
      <providers>
        <add name="HtmlAgilityPackSanitizerProvider" type="AjaxControlToolkit.Sanitizer.HtmlAgilityPackSanitizerProvider"></add>
      </providers>
    </sanitizer> 
```

使用`HtmlAgilityPackSanitizerProvider`比`AntiXssSanitizerProvider` [参考这篇文章](https://stackoverflow.com/a/12038532/1166597)“自 2012 年 6 月起，不再支持使用 AntiXss 作为默认消毒剂。从官方公告来看，显然新版本的 AntiXss 破坏了太多东西。”

之后的**第一个标签**`<sectionGroup>`也一样**`<configuration>`**

 **```
<configuration>
  <configSections>
    <sectionGroup name="system.web">
      <section name="sanitizer"
          requirePermission="false"
          type="AjaxControlToolkit.Sanitizer.ProviderSanitizerSection, 
        AjaxControlToolkit"/>
    </sectionGroup>
  </configSections> 
```

这用同样的错误解决了我的情况。**

# php - 如何在 Laravel 中制作自己的时间戳方法？

> ID：15833335
> 
> 赞同：4
> 
> 时间：2013-04-05T11:55:38.097
> 
> 标签：php, laravel, laravel-3

通常，Laravel 平台有一个`$table->timestamps();` in migration...，它生成两个`datetime`字段，但我想实现我自己的时间戳，或者，也许调用`unix_timestamps()`. 我想要两个名为`created_at`, 和的字段`updated_at`，它们存储 unix 时间戳，我该如何实现它？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T14:29:47.153

你不必使用 Laravel 的时间戳助手，但它们很方便。现在也有一些处理字符串时间戳的好方法，包括 PHP 的[DateTime](http://uk1.php.net/manual/en/book.datetime.php)类。但我离题了，使用unix时间戳......

1.  在您的架构（迁移）中，使用

    ```
    $table->integer('created_at');
    $table->integer('updated_at'); 
    ```

    代替

    ```
    $table->timestamps(); 
    ```

2.  替换`timestamp()`模型中的函数。

3.  保留`$timestamps = true`在您的模型中。

这是一个示例基本模型，您可以使用它并在您的模型上扩展而不是 Eloquent：

```
// models/basemodel.php
class BaseModel extends Eloquent {

    /**
     * Indicates if the model has update and creation timestamps.
     *
     * @var bool
     */
    public static $timestamps = true;

    /**
     * Set the update and creation timestamps on the model.
     */
    public function timestamp()
    {
        $this->updated_at = time();

        if ( ! $this->exists) $this->created_at = $this->updated_at;
    }
}

// models/thing.php
class Thing extends BaseModel {

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-03T08:26:58.617

对于 Laravel 4：

*   覆盖 Eloquent 模型中的 freshTimestamp() 方法
*   在迁移文件中使用整数而不是时间戳

**模型/product.php**

```
class Product extends Eloquent {
    protected $table = 'products';

    public function freshTimestamp()
    {
        return time();
    }
} 
```

Laravel 4 还将所有日期/时间戳更改为 Carbon 实例（[在此处](http://laravel.com/docs/eloquent#date-mutators)记录）

这意味着您还需要覆盖该`getDates()`方法，以防止 Carbon 在插入之前破坏您的时间戳。

```
public function getDates()
{
    return array();
} 
```

**数据库/迁移/2013_04_20_125823_create_products_table.php**：

```
public function up()
{
    Schema::create('products', function(Blueprint $table) {
        $table->increments('id');
        $table->string('name');
        $table->integer('created_at');
        $table->integer('updated_at');
    });
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-05T12:38:04.877

我担心你需要一些丑陋的黑客来重写这个`timestamps()`函数，我敢肯定这是个坏主意。

如果您需要自己的格式，只需定义一个新列。Laravel 的模式构建器中甚至还有一个时间戳列（请参阅[此处](http://laravel.com/docs/database/schema#adding-columns)以获取可用格式的完整列表）：

```
$table->timestamp('added_on'); 
```

但是，您需要定义默认值和/或`ON UPDATE`自己定义，或者您可以使用[triggers](http://dev.mysql.com/doc/refman/5.1/en/create-trigger.html)。但最后你可能最好还是坚持使用 Laravel 的`timestamps()`，因为它会自动处理所有事情。为什么你还需要其他东西？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-18T23:12:54.643

我有同样的要求，并想出了一个可能也适合你的解决方案。我在 Github 上发布了一个关于我是如何做到的回购：[Laravel Integer SQL Dates](https://github.com/jhauraw/laravel-integer-sql-dates) <== 查看它以获取更多详细信息，但这里是它的要点：

```
class Base extends Eloquent {

  public function freshTimestamp()
  {
    return time(); // (int) instead of '2000-00-00 00:00:00'
  }

  public function fromDateTime($value)
  {
    return $value; // Don't mutate our (int) on INSERT!
  }

  // Uncomment, if you don't want Carbon API on SELECTs
  // protected function asDateTime($value)
  // {
  //   return $value;
  // }

  public function getDateFormat()
  {
    return 'U'; // PHP date() Seconds since the Unix Epoch
  }
}

class User extends Base {

  protected $table = 'users';

  protected $fillable = ['email'];
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-04-12T11:44:13.470

只需创建一个时间戳类型的迁移/模型字段，然后在您的控制器中，使用当前时间填充它

```
$myField = new \DateTime(); 
```

# php - 即时创建 CSV 和电子邮件，未创建附件

> ID：15833342
> 
> 赞同：0
> 
> 时间：2013-04-05T11:55:58.190
> 
> 标签：php, csv

我从一位开发人员那里继承了一个 PHP 任务。基本上，我需要即时制作 CSV 并发送电子邮件。创建 CSV 内容是有效的、经过验证的并且很好。但是，在测试电子邮件和 CSV 时，我成功地生成了电子邮件和附件，但是两者都是空白且没有文本内容？我确保我的脚本没有隐藏字符（标签等），并且在重新测试电子邮件时有内容......但现在没有 CSV 附件！

这是我的 PHP 代码：

```
// Make CSV & Email
$csvString = chunk_split(base64_encode($csvString)); //CSV is produced earlier and is valid

// create the email and send it off

$mailSubject = "Daily CSV from the site";
$from = "root@localhost.com";
$headers =  "From: " . $from ."\n";
$headers .= 'MIME-Version: 1.0' . "\n";
$headers .= 'Content-Type: multipart/mixed;
boundary="----=_

NextPart_001_0011_1234ABCD.4321FDAC"' . "\n";

$message = 'This is a multi-part message in MIME format.

------=_NextPart_001_0011_1234ABCD.4321FDAC
Content-Type: text/plain;
charset="us-ascii"
Content-Transfer-Encoding: 7bit
Hello

Oh look! Attached a CSV!

Regards

------=_NextPart_001_0011_1234ABCD.4321FDAC
Content-Type: application/octet-stream;  name="';

$message .= "$cvsName";
$message .= '"
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename="';
$message .= "$cvsName";
$message .= '"

';
$message .= "$csvString"; // was encoded
$message .= '
------=_NextPart_001_0011_1234ABCD.4321FDAC--
';

    // now send the email
    if (mail($email, $mailSubject, $message, $headers, "-f$from")) {
        echo("Message successfully sent!");
    } else {
        echo("Message delivery failed...");
    } 
```

这是生成的电子邮件，请注意没有附加 CSV，但电子邮件确实包含编码的 CSV 文本/值。任何人都可以帮忙吗？

![在此处输入图像描述](https://i.stack.imgur.com/RyYYV.png)

这是生成的电子邮件的源代码：

```
Date: Fri, 05 Apr 2013 14:39:52 +0200
Subject: Daily CSV from the site
To: root@localhost.com
From: root@localhost
MIME-Version: 1.0
Content-Type: multipart/mixed;
boundary="-----=_NextPart_001_0011_1234ABCD.4321FDAC"

This is a multi-part message in MIME format.

-----=_NextPart_001_0011_1234ABCD.4321FDAC

Content-Type: text/plain;
charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hello

Oh look! Attached a CSV!

Regards

-----=_NextPart_001_0011_1234ABCD.4321FDAC
Content-Type: application/octet-stream; name="marcel.preukschat-Requested-19-03-2013.csv"
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename="marcel.preukschat-Requested-19-03-2013.csv"

marcel.preukschat-Requested-19-03-2013.csv

-----=_NextPart_001_0011_1234ABCD.4321FDAC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:22:23.903

我认为这与边界定义附近不必要的换行有关。所以让我们把边界缩短一点，让事情更明显。另请参阅[这个多部分消息的示例](http://en.wikipedia.org/wiki/MIME#Multipart_messages)：

```
$headers .= 'Content-Type: multipart/mixed; boundary="NextPart_001"' . "\n"; 
```

以及以下部分：

```
$message = 'This is a multi-part message in MIME format.
--NextPart_001
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Hello

Oh look! Attached a CSV!

Regards

--NextPart_001
Content-Type: application/octet-stream;  name="'; 
```

和

```
$message .= '
--NextPart_001--
'; 
```

# android - 如何像 Realplayer App 一样创建仪表板菜单

> ID：15833346
> 
> 赞同：1
> 
> 时间：2013-04-05T11:56:04.667
> 
> 标签：android, android-layout

如何创建仪表板菜单，例如

真实播放器应用程序..

![在此处输入图像描述](https://i.stack.imgur.com/CwUBo.jpg)

或者喜欢这个

![在此处输入图像描述](https://i.stack.imgur.com/8sBTY.png)

任何帮助都会很好，所以我可以朝着正确的方向开始。到目前为止，我尝试了一些事情，但我无法实现这种布局。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:26:47.783

对于第一个，我想你只需要一堆图像，然后按照你想要的方式放置它们。至于第二个， GridLayout 可能会帮助你。或者只使用几个 LinearLayouts。

# jquery - 等待异步 ajax 请求完成

> ID：15833347
> 
> 赞同：6
> 
> 时间：2013-04-05T11:56:05.027
> 
> 标签：jquery, ajax, loops, asynchronous

我想编写一个执行十几个异步 ajax 请求的函数，等待所有这些请求完成，然后返回聚合信息。喜欢：

```
function countHealthy(urls) {
  var healthy = 0;
  for (var i = 0; i < urls.length; ++i) {
    $.ajax({url: urls[i], async: true, id: i})
    .done(function (data) { ++healthy; });
  }
  // Wait for all ajax to finish.
  return healthy;
} 
```

PS：++healthy 线程安全吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T11:57:51.157

Javascript 没有线程，所以线程安全不是问题。您的 return 语句是问题所在，它需要进入 ajax 调用在完成时执行的回调。由于 ajax 是异步发生的，正如您的代码所示，return 语句将在所有请求返回之前触发。

您可能想查看[query deferreds](http://www.erichynds.com/blog/using-deferreds-in-jquery)，它似乎是为这类事情而生的。直接从那个链接

```
function doAjax() {
  return $.get('foo.htm');
}

function doMoreAjax() {
  return $.get('bar.htm');
}

$.when( doAjax(), doMoreAjax() )
  .done(function() {
    console.log( 'I fire once BOTH ajax requests have completed!' );
  })
  .fail(function() {
    console.log( 'I fire if one or more requests failed.' );
  }); 
```

通过一些小的重构，您可以在大约 2 分钟内实现这一点。

或者，如果您控制服务器，则可以创建一个服务器端点来执行一个请求中的所有检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T12:01:18.933

你可以这样做：

```
var urls= ['url1', 'url2', 'url3', 'url4'];
function doTheUrl() {
    if (urls.length === 0) {
        alert('All urls are done now.');
        return;
    }

    var url = urls.pop();
    $.ajax({
        url: "/DoTheJob",
        complete: function () {
            doTheUrl();
        }
    });
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T12:05:58.167

也许你可以试试这个。我只是运行一个空的 while 循环，以便在返回所有 ajax 调用之前不会命中 return 语句。

```
function countHealthy(urls) {
  var healthy = 0;
  var urlCount = urls.length;
  var numberOfAjaxCallsReturned = 0;
  for (var i = 0; i < urls.length; ++i) {
    $.ajax({url: urls[i], async: true, id: i})
      .done(function (data) { 
              ++healthy;
              numberOfAjaxCallsReturned++;
      });
    }
    while(numberOfAjaxCallsReturned!=urlCount)
    {
    }
    return healthy;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-05T16:10:42.580

如果您有一个复杂的页面，您将需要跟踪并等待特定的异步调用返回。这是因为其他非紧急呼叫可能正在运行。

话虽如此，对于简单的页面，您只需检查并等待没有电话。此 jQuery 脚本每季度检查一次，以查看每季度每秒是否有当前的异步请求。一旦没有，您将继续。

```
 var WaitForAjax = function()
    {
        if (jQuery.active == 0){
        }
        else
        {
            setTimeout(WaitForAjax, 250);
        }
    }

    function RunIt()
    {
        //IssueAjaxCalls would be where you make all your Ajax calls.
        IssueAjaxCalls();

        WaitForAjax();

        //The KeepGoing function won't get called until there are no more Ajax calls pending.
        KeepGoing();
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-01T22:06:23.900

首先，您在每个 for 循环上发出 ajax 请求，这似乎有点浪费您的服务器资源。如果该函数会被大量调用，那么我建议您重构代码以尽可能少地进行查询。

无论如何，这就是我的做法

```
function countHealthy(urls) {

    var healthy = 0;
    var reqs = [];

    for (var i = 0; i < urls.length; ++i) {
        reqs.push(
            $.ajax({
                url: urls[i],
                id: i
            })
        );
    }
}

$.when.apply($, reqs).then(function() {
    // On success
    ++healthy;
}).fail(function() {
    // When failed
}).always(function() {
    // this will be run no matter the outcome
}); 
```

没有机会尝试一下，所以我不确定我是否犯了语法错误等。更改您的代码：

已删除`async = true`，如果您之前在代码中的某处将其设置为 false，请忽略它。

您可以了解“when.apply”的工作原理， [来源](https://stackoverflow.com/questions/14777031/what-does-when-apply-somearray-do)

# php - 如何在php中检查数组中的相同值

> ID：15833348
> 
> 赞同：0
> 
> 时间：2013-04-05T11:56:05.443
> 
> 标签：php, arrays

我有这个数组，其中天是关键，时间是值：

```
Array(

    [Mon] => 9:00-10:00,12:00-15:00,10:00-14:00

    [Tue] => 9:00-10:00,12:00-15:00

    [Wed] => 9:00-10:00,12:00-15:00

    [Thu] => 9:00-10:00,12:00-15:00

    [Fri] => 9:00-10:00,12:00-15:00

    [Sat] => 9:00-10:00,12:00-15:00

    [Sun] => 10:00-14:00

) 
```

我想要以这种方式相同的数组：

```
 Array(

    [Mon] => 9:00-10:00,12:00-15:00,10:00-14:00

    [Tue/Wed/Thu/Fri/Sat] => 9:00-10:00,12:00-15:00

    [Sun] => 10:00-14:00

) 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:12:02.813

可能有更好的方法来实现这一点，但以下应该有效： -

```
$input = <YOUR ARRAY>
$output = array();

foreach ($input as $k => $v) {
  if (!isset($output[$v])) {
    $output[$v] = $k;
  } else {
    $output[$v] .= '/' . $k;
  }
}

print_r(array_flip($output)); 
```

### [这是一个工作示例](http://codepad.viper-7.com/h1SSSO)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:13:11.330

```
$temp = array();
foreach ($array as $day => $value) {
    if (!in_array($value, $temp)) {
        $temp[] = $value;
        $result[implode("/",array_keys($array,$value))] = $value;
    }
} 
```

见[演示](http://codepad.viper-7.com/R6p8nE)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T12:14:30.510

```
$data = array(
    'Mon' => '9:00-10:00,12:00-15:00,10:00-14:00',
    'Tue' => '9:00-10:00,12:00-15:00',
    'Wed' => '9:00-10:00,12:00-15:00',
    'Thu' => '9:00-10:00,12:00-15:00',
    'Fri' => '9:00-10:00,12:00-15:00',
    'Sat' => '9:00-10:00,12:00-15:00',
    'Sun' => '10:00-14:00'
    );

$new_data = array();

foreach($data as $key => $value){
    $index = array_search($value, $new_data);
    if($index){
        $new_data[$index .'/' . $key] = $value;
        unset($new_data[$index]);
    }else{
        $new_data[$key] = $value;
    }
}

echo '<pre>';
var_dump($new_data);
echo '</pre>'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T12:16:27.637

所以，我的例子很长。

```
$date_array = Array(
    'Mon' => '9:00-10:00, 12:00-15:00, 10:00-14:00',
    'Tue' => '9:00-10:00, 12:00-15:00',
    'Wed' => '9:00-10:00, 12:00-15:00',
    'Thu' => '9:00-10:00, 12:00-15:00',
    'Fri' => '9:00-10:00, 12:00-15:00',
    'Sat' => '9:00-10:00, 12:00-15:00',
    'Sun' => '10:00-14:00',
);

$previous = null;
$new_days = array();
$new_times = array();
$i = 0;
foreach ($date_array as $day => $time) {
    if ($time === $previous) {
        $new_days[$i] .= '/' . $day;
        $new_times[$i] = $time;
    } else {
        $i++;
        $new_days[$i] = $day;
        $new_times[$i] = $time;
    }
    $previous = $time;
}

var_dump(array_combine($new_days, $new_times)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T12:40:02.517

重新查看您的问题后，我得出了以下解决方案，基本上使用`foreach`并使用该值来聚合天数作为收集天数的关键（第一次 foreach）；然后将这些天分解为一个字符串（第二个 foreach），然后翻转数组：

```
$output = array();

foreach ($input as $day => $time) $output[$time][] = $day;

foreach ($output as &$value) $value = implode('/', $value); 
unset ($value);

print_r(array_flip($output)); 
```

[http://eval.in/14944](http://eval.in/14944)

# actionscript-3 - 在 AS3 上同时使用手势和鼠标事件

> ID：15833349
> 
> 赞同：3
> 
> 时间：2013-04-05T11:56:06.207
> 
> 标签：actionscript-3, air, touch

我正在尝试在 as3 上为 android 开发一个应用程序。当我设置为多点触控时

```
Multitouch.inputMode = MultitouchInputMode.GESTURE; 
```

命令，我不能用一根手指使用任何鼠标事件，尽管我的设备支持所有触摸事件类型。

```
trace("gesture support: "+ Multitouch.supportsGestureEvents +
      " touch support: " + Multitouch.supportsTouchEvents);

gesture support: true touch support: true 
```

根据 as3 类参考，我必须将触摸事件作为鼠标事件处理，就像在 MultitouchInputMode.NONE 中一样。我也不能使用按钮的点击事件。是否有任何参数可以设置在手势模式下使用鼠标事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-28T23:32:41.093

在我们的应用程序中，我们使用 MultitouchInputMode.TOUCH_POINT 并正常获取鼠标事件，并自行实现手势。

# java - Eclipse：类上的绿色矩形标签

> ID：15833358
> 
> 赞同：4
> 
> 时间：2013-04-05T11:56:46.203
> 
> 标签：java, eclipse

![在此处输入图像描述](https://i.stack.imgur.com/fNB45.png)

班级图标右上角的绿色表示什么？

`label`我在里面搜索后找不到任何东西`Eclipse preferences`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T12:28:52.387

感谢@T.Des 的回答，我找到了答案：

![在此处输入图像描述](https://i.stack.imgur.com/ygcTw.png)

它来自我最近安装的一个插件，它极大地支持单元测试 - [MoreUnit](http://moreunit.sourceforge.net/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T12:19:21.730

从来没有见过它，但是一个非常（**非常**）肮脏和浪费时间的方法是去**Window -> Preferences -> General -> Appearance -> Label Decorations**并且一次只选择一个标签装饰来查看哪个插件正在使此绿色框出现，然后检查此插件文档。

# java - Java模式匹配器单个或多个用逗号分隔

> ID：15833361
> 
> 赞同：0
> 
> 时间：2013-04-05T11:56:48.827
> 
> 标签：java, pattern-matching

我有一个字符串，我需要解析它，我想使用模式匹配器需要模式帮助。

如果字符串如下：

```
sometext : test1,test2 
```

输出应该是：

测试1

测试2

如果输入字符串是：

```
sometext : test1 
```

那么输出应该是：

```
test1 
```

如您所见，它可以是多个或单个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T11:59:29.823

所以，你只需要用`,`空格替换吗？我建议一个简单的

```
String output = sometext.replace(",", " "); 
```

如果你需要在第一个单词后换行，你可以这样做

```
String output = sometext.replace(",", System.getProperty("line.separator")); 
```

反而。

如果`"sometext : "`包含在输入中，您可以先以相同的方式摆脱它：

```
String output = input.replace("sometext : ", "").replace(",", " "); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:17:07.330

首先，您必须将“test1，test2”与“sometext”分开，然后使用令牌`replaceAll`获取测试数组。`,`

```
String foo = "sometext : test1,test2";
String[] fooArr = foo.split("[:]"); 
String tests = fooArr[1];
System.out.println(tests.replaceAll(",", " ")); 
```

​</p>

# sql - 为什么存储过程中的函数被标识为依赖项，而不是存储过程中调用的存储过程？

> ID：15833362
> 
> 赞同：2
> 
> 时间：2013-04-05T11:56:57.657
> 
> 标签：sql, sql-server, database-design, dependencies

我目前正在对我们的 SQL Server 数据库进行一些影响分析，以准备我已接手的工作范围。

我目前列出了我确定要包含在工作范围内的所有对象的所有依赖项。

一个表有一个触发器，其中包括一个标量函数和一个存储过程。当我查看依赖项时，我看不到存储过程。

我想更好地理解为什么会这样，如果有更好的方法来解决这个问题，那么什么都不会错过？

有人可以帮助一个小学生吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:09:43.800

我相信这应该向您展示您正在寻找的参考资料。

```
SELECT OBJECT_NAME(referencing_id) AS referencing_entity_name, 
    o.type_desc AS referencing_desciption, 
    COALESCE(COL_NAME(referencing_id, referencing_minor_id), '(n/a)') AS referencing_minor_id, 
    referencing_class_desc, referenced_class_desc,
    referenced_server_name, referenced_database_name, referenced_schema_name,
    referenced_entity_name, 
    COALESCE(COL_NAME(referenced_id, referenced_minor_id), '(n/a)') AS referenced_column_name,
    is_caller_dependent, is_ambiguous
FROM sys.sql_expression_dependencies AS sed
INNER JOIN sys.objects AS o ON sed.referencing_id = o.object_id
WHERE referencing_id = OBJECT_ID(N'{THEOBJECTNAME}'); 
```

请参阅：[sys.sql_expression_dependencies](http://msdn.microsoft.com/en-us/library/bb677315.aspx)

# javascript - 使用 MYSQL 数据库创建 div 标签

> ID：15833366
> 
> 赞同：-2
> 
> 时间：2013-04-05T11:57:13.447
> 
> 标签：javascript, php, mysql, html-table, populate

最近开始了一个项目，理论上将为我的 MySQL 数据库中的每一行信息创建新的 div 标签或表行。

我不确定我会用什么语言来解决这个问题。我对用PHP编写半熟悉。

这是我的理论代码：

```
<?php include 'header.php'; ?>
<div id="CourseWrap">
<?php 

$sql="SELECT * FROM details";
$result = mysqli_query($sql);

echo "<table border='1'>
<tr>
<th>Employer</th>
<th>LearningProvider</th>
<th>ContractedProvider</th>
</tr>";

while($row = mysqli_fetch_array($result))
  {
  echo "<tr>";
  echo "<td>" . $row['Employer'] . "</td>";
  echo "<td>" . $row['LearningProvider'] . "</td>";
  echo "<td>" . $row['ContractedProvider'] . "</td>";
 echo "</tr>";
  }
echo "</table>";

mysqli_close($con);
?>
</div> 
```

在 header.php 中，我像这样连接到数据库：

```
<?php
//Create connection
$con=mysqli_connect("localhost", "Jobboard","*****", "jobboard");

// Check connection 
if (mysqli_connect_errno($con))
  {
  echo "Failed to connect to MySQL: " . mysqli_connect_error();
  } else {
    echo "Connected";
  }
?> 
```

注意：我很确定我在 Mysqli 方面出了点问题。

问题：

我将如何解决这个问题？什么是最好的选择，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:01:43.877

1.  让PHP报错

    ```
    ini_set('display_errors',1);
    error_reporting(E_ALL); 
    ```

2.  阅读错误后，请参阅错误消息中提到的功能的手册页

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:04:28.450

`mysqli_query()`需要2个参数。例子：

```
$con=mysqli_connect('','','','');
$results=mysqli_query($con,'SELECT * FROM table');
while($row=mysqli_fetch_array($results)){
    echo'<tr><td>'.$row['Employer'].'</td></tr>';
}
mysqli_close($con); 
```

mysqli_query('连接在这里','你的查询在这里');

# maven - 我的 neo4j 测试设置有什么问题？嵌入式Neo4j.java、neo4j、maven

> ID：15833368
> 
> 赞同：0
> 
> 时间：2013-04-05T11:57:31.770
> 
> 标签：maven, neo4j

我使用“快速入门”原型使用 maven 开始了一个项目。然后我更改了我的 POM 以包含 neo4j：

[https://github.com/ENCE688R/msrcs/blob/master/pom.xml](https://github.com/ENCE688R/msrcs/blob/master/pom.xml)

我补充说：

[https://github.com/neo4j/neo4j/blob/master/community/embedded-examples/src/main/java/org/neo4j/examples/EmbeddedNeo4j.java](https://github.com/neo4j/neo4j/blob/master/community/embedded-examples/src/main/java/org/neo4j/examples/EmbeddedNeo4j.java)

跑了

```
mvn package 
```

这工作没有错误，但是

```
java -cp target/msrcs-1.0-SNAPSHOT.jar org.neo4j.examples.EmbeddedNeo4j 
```

返回错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/neo4j/graphdb/RelationshipType 
```

我错过了什么？在这一点上，我只需要测试我是否可以包含和使用 neo4j。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T07:04:52.830

采用

```
mvn exec:java -Dexec.mainClass=org.neo4j.examples.EmbeddedNeo4j 
```

还有将`mvn dependency:copy`所有依赖项复制到`target/dependencies`

还有一个 mvn appassembler 插件，它允许您生成启动 shell 脚本，其中包含所有依赖项作为类路径。

最后但并非最不重要的是，maven 程序集插件`mvn assembly:single`可以生成一个可以运行的 jar 文件`java -jar my-jar-file.jar`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T12:12:04.547

您还需要将 Neo4j 依赖项添加到您的类路径中。目前您只添加您创建的源 jar。如果您查看此[POM](https://github.com/neo4j/neo4j/blob/master/community/embedded-examples/pom.xml)，您会发现 Neo4J 示例需要许多其他依赖项。

找到已下载依赖项的 libs 目录（这可能在您的本地 .m2 maven 存储库中）并将这些 jars 添加到您的类路径中。您不需要逐个添加每个 jar，因为您可以简单地添加带有通配符的目录 - 例如：

视窗：

```
java -cp "target/msrcs-1.0-SNAPSHOT.jar;lib/*" org.neo4j.examples.EmbeddedNeo4j 
```

Mac/Unix：

```
java -cp "target/msrcs-1.0-SNAPSHOT.jar:lib/*" org.neo4j.examples.EmbeddedNeo4j 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T13:15:58.900

我已经开始研究一些 maven 原型，这也可能是一个很好的起点。

*   对于 java Neo4j 项目，使用[neo4j-archetype-quickstart](https://github.com/TimmyStorms/neo4j-archetype-quickstart)。
*   对于 Spring Data Neo4j 项目，使用[sdn-archetype-quickstart](https://github.com/TimmyStorms/sdn-archetype-quickstart)。

# ios - 如何放大用户当前位置？

> ID：15833370
> 
> 赞同：1
> 
> 时间：2013-04-05T11:57:38.597
> 
> 标签：ios, mapkit, core-location

当应用程序在 MapKit 中启动时，我想放大用户当前位置。这是我的代码（在 viewDidLoad 函数中）：

```
Locate=[[CLLocationManager alloc]init];
Locate.delegate=self;
Locate.desiredAccuracy=kCLLocationAccuracyBestForNavigation;
Locate.distanceFilter=kCLDistanceFilterNone;
[Locate startUpdatingLocation];
[super viewDidLoad];

//Region
MKCoordinateRegion myRegion;

//Center
CLLocationCoordinate2D center;
center.latitude=Locate.location.coordinate.latitude;
center.longitude=Locate.location.coordinate.longitude;

//Span
MKCoordinateSpan span;
span.latitudeDelta=0.3f;
span.longitudeDelta=0.3f;
//Set Region
myRegion.center=center;
myRegion.span=span;
[_MyMap setRegion:myRegion animated:YES]; 
```

`didUpdateLocation`我还使用与以前相同的代码实现了该功能。问题是当用户位置改变时（当用户移动时）屏幕会放大他但我不能移动屏幕，如果我尝试移动它会立即返回用户位置，所以我不能查看整个地图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T12:08:03.613

对于缩放地图，您必须更改区域值意味着中心和跨度。一旦看到这个[Mapview Zoom](https://stackoverflow.com/questions/10222308/zoom-mapview-to-a-region-where-pins-are-dropped)

在我的情况下，当我单击特定按钮时，我使用这个来移动地图。

```
MKCoordinateSpan span = MKCoordinateSpanMake(30.5982f,0.0001f);
        CLLocationCoordinate2D coordinate = {36, 90};
        MKCoordinateRegion region = {coordinate, span};
        MKCoordinateRegion regionThatFits = [self.mapView regionThatFits:region];
        [self.mapView setRegion:regionThatFits animated:YES]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T13:01:13.717

我通过添加 touchesMoved 函数解决了这个问题，并且我停止更新此函数中的位置。解决了。

# iphone - Facebook SDK 3.2 for iOS 分享描述超过三行不出现

> ID：15833372
> 
> 赞同：1
> 
> 时间：2013-04-05T11:57:53.193
> 
> 标签：iphone, ios, facebook-sharer

我使用 facebook sdk 3.2 将描述分享给了 facebook。如果描述超过三行，那么剩余的描述不会出现在网页中，但在移动应用程序中甚至描述都不可见。那么有没有办法设置阅读更多选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:17:07.533

不，这是不可能的。我的客户在应用商店中的应用也有同样的问题。在分享帖子时，我们可以通过任何方式查看分享内容。

`description`Facebook 移动应用程序和网络浏览器在查看哪些通过应用程序发布时有一些限制。它们有一些参数必须在帖子中显示，如图片、链接、标题、名称。
要在帖子中发送的示例参数：

```
params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
        @"I'm using the Test iOS app", @"name",
        @"Test for iOS.", @"caption",
        @"Check out Test iOS to learn how you can make your iOS apps social using Facebook Platform.", @"description",
        @"http://m.facebook.com/apps/uniquenamespace/?deeplink=news", @"link",
        @"http://www.facebookmobileweb.com/hackbook/img/facebook_icon_large.png", @"picture",
        @"foo", @"ref",
        nil]; 
```

如果描述字段有更多的字符意味着，他们会丢弃那些内容网络服务器。但是在移动应用程序中，如果参数有名称字段，它们会丢弃整个描述。但在安全方面，有点不同。它们也可能因浏览器而异。

# python - Python 附魔建议它无法检查的单词？

> ID：15833373
> 
> 赞同：2
> 
> 时间：2013-04-05T11:57:57.380
> 
> 标签：python, aspell, pyenchant

这不奇怪吗？

```
Python 3.2.3 (default, Feb  1 2013, 20:24:16) 
[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import enchant
>>> d = enchant.Dict("en_US")
>>> d.check("house")
True
>>> d.check("civilization")
False
>>> d.suggest("civilization")
['civilization', 'civilizations', "civilization's"]
>>> d.provider
<Enchant: Aspell Provider>
>>> d.tag
'en_US'
>>> enchant.list_languages()
['de', 'de_AT', 'de_CH', 'de_DE', 'en', 'en_CA', 'en_GB', 'en_US'] 
```

所以基本上，“文明”这个词的拼写检查失败了，但是当被要求提出替代方案时，附魔（或 aspell？）建议它只是拼写失败的同一个词。

**编辑：**使用此解决方法

```
def spell(w) : return d.check(w) or w in d.suggest(w) 
```

我可以从 pyEnchant 获得更明智的答案，但这对我来说似乎是一种黑客行为。然而，这似乎不是一个 pyEnchant 问题，而是与`aspell`它本身有关：

```
echo "civilization" | aspell -a
@(#) International Ispell Version 3.1.20 (but really Aspell 0.60.6.1)
& civilization 3 0: civilization, civilizations, civilization's 
```

还是我误读了这里的输出？

**编辑：**关闭这个问题后，我在[这个](https://stackoverflow.com/questions/15867280/why-does-aspell-suggest-the-very-word-that-it-fails-to-check)线程中更清楚地改写了它。

# php - 我是否正确使用 PHP 会话在表单之间保留数据？

> ID：15833376
> 
> 赞同：4
> 
> 时间：2013-04-05T11:58:05.910
> 
> 标签：php, session, redirect, post

只是一个快速的问题。

我有一个表单可以捕获一些数据，对其进行验证，然后发布到同一站点上的另一个页面。如果没有错误，我正在使用 header() 重定向，但显然数据没有在帖子中发送。

使用会话在两个页面之间保留数据是否正确？

多谢你们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T12:03:11.490

如果只需要第二页的数据，如果数据不敏感，不妨在header()中传递数据。

```
$url = "www.example.com?variable=value&id=something";
I.e. header('Location: $url'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:00:53.570

如果您担心，这些类型的“flash message”很好，并且是防止用户重新加载页面和重新提交表单的好方法。我会提醒您在显示消息后取消设置会话变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T12:01:46.560

是的，这是正确的做法。

但是，根据情况，还有其他替代方案，例如隐藏变量、iframe 等。如果您能解释整个情况，根据数据的性质，我可以为您提供更准确的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T12:02:09.287

您可以将数据存储在服务器端 (Session) 或客户端 (Cookie)。您选择哪种方式取决于数据类型和安全问题。

您也可以通过 PHP 直接在新表单中插入发布的数据而不保存它 - 但如果您通过标头重定向，这将不起作用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T12:02:11.507

是的，您可以这样做，但为了更安全，请在 db 中添加额外的 DUMMY 字段或其他内容。这样，如果您需要丢弃，您可以丢弃虚拟记录。但是您需要有时间戳，这样您就不会删除那些最近添加并正在处理的记录。

您还可以创建 cron 作业来清空表

# string - BASH 中的备用合并字符串

> ID：15833378
> 
> 赞同：1
> 
> 时间：2013-04-05T11:58:16.270
> 
> 标签：string, bash, shell, scripting

从

```
KS=$(locate acpi-support | grep "/etc/rc" | cut -f4 -d/ | tr -dc '[K,S]')
LEVELS=$(locate acpi-support | grep "/etc/rc" | cut -f3 -d/ | tr -dc '[0-9]')
echo $KS
echo $LEVELS 
```

我得到以下输出：

```
KSSSS
12345 
```

我想做的是以这种方式交替合并以前的输出：

```
K1 S2 S3 S4 S5 
```

我尝试了嵌套*for*循环，但没有成功，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T12:08:03.923

您可以使用 for 循环遍历其中一个字符串中的字符，然后使用 bash 的子字符串功能打印出字符。如下所示：

```
KS="KSSSS"
LEVELS="12345"
unset result
for (( i=0; i<${#KS}; i++ )); do
  result+="${KS:$i:1}${LEVELS:$i:1} "
done
echo "$result" 
```

输出：

```
K1 S2 S3 S4 S5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T12:18:46.667

```
$ KS=KSSSS

$ LEVELS=12345

$ awk '{n=length/2;for(i=1;i<=n;i++)print $i$(i+n)}' ORS=" " FS= <<< "$KS$LEVELS"
K1 S2 S3 S4 S5 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T15:47:26.450

Python 单线

```
$ KS="KSSSS"
$ LEVELS="12345"
$ python -c 'import sys; print " ".join([k+v for k,v in zip(sys.argv[1], sys.argv[2])])' $KS $LEVELS
K1 S2 S3 S4 S5
$ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T12:03:48.530

这应该有效：

```
KS="KSSSS"
LEVELS="12345"
for i in {0..4}; do
  echo ${KS:$i:1}${LEVELS:$i:1}
done 
```

虽然可以肯定，`awk`大师会以更好的单线方式来拯救:)

要使其全部出现在同一行：

```
for i in {0..4}; do
  echo ${KS:$i:1}${LEVELS:$i:1} | awk '{printf("%s ",$1)}
done 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-05T12:10:49.227

如果你制作`KS`和`LEVELS`数组而不是字符串，你可以使用`paste`：

```
KS=( $(locate acpi-support | grep "/etc/rc" | cut -f4 -d/ | tr -dc '[K,S]') )
LEVELS=( $(locate acpi-support | grep "/etc/rc" | cut -f3 -d/ | tr -dc '[0-9]') )

paste -d"\0" <( printf "%s\n" ${KS[@]}) <( printf "%s\n" ${LEVELS[@]}) 
```

# r - 如何将执行错误（stderr 连接）捕获到字符串变量中？

> ID：15833390
> 
> 赞同：2
> 
> 时间：2013-04-05T11:58:50.050
> 
> 标签：r

通过标准输出连接，我们可以使用`[capture.output][1]`函数。但是错误信息呢？

这当然需要某种形式的`try`块。但是 FAIK 该`try`块不提供访问被压制的实际错误消息字符串的方法。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:08:58.017

使用`tryCatch`和`conditionMessage`

```
tryCatch(stop("oops"), error=function(err) conditionMessage(err)) 
```

提供可重复的示例以获得更多帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T12:12:44.440

您可以使用`geterrmessage`检索最后一条错误消息：

```
stop("Hammer Time")
Error: Hammer Time
geterrmessage()
[1] "Error: Hammer Time\n" 
```

# c# - 泛型类中的泛型集合

> ID：15833397
> 
> 赞同：2
> 
> 时间：2013-04-05T11:59:10.877
> 
> 标签：c#, generics

我有一个自定义类（我们称之为`MyClass`），如下所示：

```
public class MyClass
{
    private List<MyClass> list;
    private object data;
} 
```

但是，我想摆脱该`object`属性，而是使用泛型类。所以是这样的：

```
public class MyClass<T>
{
    private List<MyClass<T>> list;
    private T data;
} 
```

但是，我需要这种行为：

```
MyClass<Foo> foo = new MyClass<Foo>;
foo.list = new List<MyClass<Bar>>; 
```

所以我需要能够为 foo 实例和 foo 中的列表/数据属性提供不同的数据类型。但是通用示例中的 T 将是相同的，并且只允许这样做：

```
MyClass<Foo> foo = new MyClass<Foo>;
foo.list = new List<MyClass<Foo>>; 
```

foo.list 中的每个项目将再次具有一个可能属于不同类型的列表。到我编译时，`MyClass`我不知道列表/数据属性中将包含哪些数据类型或将有多少级别。如何构建这种灵活的结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:05:19.053

泛型旨在允许编译器对类型使用进行检查，并且它们还提供了一些漂亮的额外好处。

您所描述的内容无法通过泛型实现，如果每次您使用`list`可能不同类型的列表进行更新，那么泛型无法帮助您。

但是，如果这些类型中的每一个都共享一个通用的基本类型或共享一个通用接口，那么您可以将其用作您`T`的列表，这样您就可以使用它们。

但是，如果每个实例`MyClass`只允许一种类型的列表，`MyClass<?>`那么您可以`MyClass`这样修改：

```
public class MyClass<T, TList>
{
    private List<MyClass<T, TList>> list;
    private T data;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T12:09:13.960

你不能只用一门课来实现这个目标。您必须为每个具有子级的级别构建一个通用基类，为没有子级的最低级别构建一个基类，每个层次结构级别一个派生类。

基类如下所示：

```
public class MyClass<TData>
{
    public TData Data { get; set; }
}

public class MyClass<TData, TDataChildren, TChildren> : MyClass<TData>
    where TChildren : MyClass<TDataChildren>
{
    public List<TChildren> List { get; set; }
} 
```

每个级别的派生类如下所示：

```
public class Level0 : MyClass<Foo, Bar, Level1> { }

public class Level1 : MyClass<Bar, Fubar, Level2> { }

public class Level2 : MyClass<Fubar> { } 
```

用法：

```
var root = new Level0();
root.Data = new Foo();
root.List = new List<Level1>
{
    new Level1()
    {
        Data = new Bar(),
        List = new List<Level2>
        {
            new Level2()
            {
                Data = new Fubar()
            }
        }
    }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T12:05:29.323

在 MyClass 中添加第二种类型。

```
public class MyClass<T, G>
{
    private List<MyClass<G, T>> list;
    private T data;
} 
```

这是假设您不关心列表中嵌套列表的类型。

但是您能否详细说明一下代码的实用性，因为仅使用抽象数据很难识别。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T12:19:33.130

我现在正在尝试在 C++ 中实现一个非常相似的东西，并且遇到了同样的问题。模板的问题在于它们是强类型的，并且`MyClass<foo>`被视为完全不同且不相关的类型，如`MyClass<bar>`.

我现在正在玩的是创建一个抽象类，它上面有纯虚拟方法，比如`GetInt`, `GetDouble`, `GetBool`, `GetString`。然后我想要一个模板`Add`来实例化适当的具体类并将其添加到我的向量中。我不确定它是否会起作用，但它遵循以下原则：

```
class Data
{
public:
    template<typename T> Add(const std::string& key, const T& val)
    {
         Data* pData = NULL;

         //test the type using std::numeric_limits to figure out which concrete
         //type to use.

         m_mapValues[key] = pData;
    }

protected:

    virtual int GetInt() const = 0;
    virtual unsigned int GetUINT() const = 0;
    virtual std::string GetString() const = 0;
    //blah blah more types that you want to handle

private:

    std::map<std::string,Data*> m_mapValues;
};

class UINTData : public Data
{
    //implement pure virtual methods.
} 
```

这显然是不完整的，但我希望它能给你一些想法。

# html - HTML5 拖放 - 防止删除一项

> ID：15833404
> 
> 赞同：1
> 
> 时间：2013-04-05T11:59:36.913
> 
> 标签：html, drag-and-drop

我正在看这个 HTML5 演示，它展示了一个“吃掉”列表中任何东西的垃圾箱。我想将其修改为仅“吃”一些项目，而其他项目将被拒绝。

代码在这里：[http ://html5demos.com/drag](http://html5demos.com/drag)

此代码适用于 IE，这是一项要求。任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T11:00:36.337

由于不耐烦，我找到了一种方法来做到这一点..

`<ul> <li><a draggable="true" id="one" href="#">one</a></li> <li><a draggable="true" href="#" id="three">two</a></li> <a draggable="true" href="#" id="trick">trick</a> <li><a draggable="true" href="#" id="four">four</a></li> <a draggable="true" href="#" id="five">five</a> </ul>`

解决方案是意识到我可以在列表中添加一个额外的标签。然后，我必须将标签的样式设置为与列表项完全相同。如果该人试图拖动技巧项目，它不会从列表中消失，并且 bin 不会提供文本响应。

# android - 移除 Android 应用程序中的通知栏

> ID：15833409
> 
> 赞同：5
> 
> 时间：2013-04-05T11:59:53.093
> 
> 标签：android, android-widget, themes, fullscreen

我正在开发一个我希望始终打开的餐厅菜单应用程序（用户不应该能够离开应用程序）。

到目前为止，我能够覆盖后退和主页按钮，但我想摆脱通知栏。反正有做这样的事情吗？

我试图将应用程序主题设置为全屏无标题栏，但这并没有成功。（对于主页按钮，我使用了 application.xml 中的自定义应用程序。）

这是应用程序的图片，以便更好地理解 ![我的应用程序的屏幕截图](https://i.stack.imgur.com/7oAc3.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:27:25.870

您无法在非 root 设备上删除底部导航栏（通知栏是屏幕顶部的那个）。

如果您想制作信息亭模式，那么您有两个选择 - 将您的应用程序变成启动器或根您的设备并使用以下工具： http: [//ppareit.github.com/HideBar/](http://ppareit.github.com/HideBar/)（也有开源解决方案，但我有手边没有网址）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:18:04.210

把这个 onCreate()

```
this.requestWindowFeature(Window.FEATURE_NO_TITLE); // Removing the title 

this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
//notification bar 
```

但是你必须把它放在调用setContentView(R.id.x)之前，否则它不起作用

# android - Android 向 WCF RESTful WS 发布请求（JSON 参数）

> ID：15833411
> 
> 赞同：1
> 
> 时间：2013-04-05T11:59:59.743
> 
> 标签：android, json, wcf, wcf-rest

我正在开发 Android 应用程序，但对我的 WCF Restful WS 的“POST”请求（像往常一样）有问题。

宁静的方法：

```
 [OperationContract]
 [WebInvoke(Method = "POST", RequestFormat = WebMessageFormat.Json, UriTemplate = "createUser")]
 string createUser(string user); 
```

我为了找到我放在方法实现的注释体下的一个错误，现在它看起来像：

```
public string createUser(string user)
        {
        return user;
        } 
```

我已经用 JSON.stringify(datos) 从 JS(jQuery, Ajax) 调用这个方法数百次了，没有任何问题。现在我需要从 android 应用程序做同样的事情。这可能是导致问题的我的代码片段：

```
JSONObject user =  new JSONObject();
user.put("id", "15");
user.put("name", "John");
user.put("city", "France");
user.put("email", "myemail");
user.put("password", "mypass");

HttpClient client = new DefaultHttpClient();
URI website = new URI("http://10.0.2.2/AutoOglasi/Service1.svc/createUser");
HttpPost request = new HttpPost();
request.setEntity(new StringEntity(user.toString()));
request.addHeader("content-type", "application/json");      
request.setURI(website);
HttpResponse response = client.execute(request); 
```

我收到来自服务器的响应（我的客户端没有错误）：

```
The exception message is 'There was an error deserializing the object of type
System.String. End element 'root' from namespace '' expected. Found element 'id' from
namespace ''.'.See server logs for more details. The exception stack trace is: </p> <p>at
System.ServiceModel.Dispatcher.OperationFormatter.DeserializeRequest(Message message,
 Object[] parameters) at
System.ServiceModel.Dispatcher.DemultiplexingDispatchMessageFormatter.DeserializeRequest(Me    ssage message, Object[] parameters) at
   System.ServiceModel.Dispatcher.UriTemplateDispatchFormatter.DeserializeRequest(Message      message, Object[] parameters) at
System.ServiceModel.Dispatcher.DispatchOperationRuntime.DeserializeInputs(MessageRpc&amp;      rpc) at
 System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc&amp; rpc) at
 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(MessageRpc&amp; rpc) at
System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage31(MessageRpc&amp; rpc)
 at System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet)</p> </div> </body></html> 
```

请问有什么建议或帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T11:16:57.263

我有趣地解决了这个问题：

1）我必须将 BodyStyle = WebMessageBodyStyle.WrappedRequest 添加到我的服务方法中以避免上述错误。我真的不明白为什么，因为它与没有 BodyStyle 参数的 jQuery Ajax 调用完美配合。如果有人能解释一下，我将不胜感激？

2）我使用：String s = "{\"id\":\"1\", \"name\":\"John\", \"user\":\"New Yourk\", \"email \":\"我的密码\", \"密码\":\"我的邮箱\"}"; 作为测试字符串。我将参数“城市”的名称更改为用户。我将它发送到我的服务，作为响应，我得到了“New Yourk”，只有一个参数名称为我的 WS 方法参数。

这意味着我需要发送一个名为“用户”和值的参数。就像是：

```
 JSONObject userValue =  new JSONObject();
 JSONObject user =  new JSONObject();

 userValue .put("id", "15");
 userValue .put("name", "John");
 userValue .put("city", "France");
 userValue .put("email", "myemail");
 userValue .put("password", "mypass");

 user.put("user", userValue.toString()); 
```

现在我的请求已经完成，我的服务器端可以处理我的用户参数了。

注意：将“userValue”添加为字符串（user.put("user", userValue.toString())）非常重要。如果我们将它添加为 Json (user.put("user", userValue)) 它将不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:20:22.757

不知道它是否与这个问题有关，但是id应该是一个字符串吗？

我猜应该是这样的：

user.put("id", 15);

# android - 在不知道文件名的情况下将文件下载到外部公共存储

> ID：15833412
> 
> 赞同：0
> 
> 时间：2013-04-05T12:00:00.143
> 
> 标签：android, download, download-manager

我的 HTTP 服务器允许下载带有“动态”url 的文件：例如[http://myserver.com/query?id=12345](http://myserver.com/query?id=12345)，它将给我 my_song.mp3。文件名在 content-disposition 标头中指示。使用 Android DownloadManager 下载此类文件可以正常工作，但我希望能够控制文件的保存位置。执行此操作的正常方法是调用

```
DownloadManager.Request r = new DownloadManager.Request(uri); 
```

`r.setDestinationInExternalPublicDir(String dirType, String subPath);`

不幸的是，这需要预先知道我不知道的文件名。我尝试使用 subPath 的 null 调用上述函数，但它不起作用......

# java - Jquery AJAX 结果数据在速度模板中检索回客户端

> ID：15833413
> 
> 赞同：0
> 
> 时间：2013-04-05T12:00:01.390
> 
> 标签：java, json, jquery, jira

我刚刚在速度模板中创建了一个 AJAX 请求，并且能够在 .java 文件中获取请求，如下所示：（java 文件扩展为“JiraWebActionSupport”作为 webwork 模块）。

```
var url = "PlanIssuesAction!IssuesPlanning.jspa";
jQuery.post(url,myJSONObject,function(result) {
    alert('success');
})
.done(function() { alert("in done"); })
.fail(function() { alert("error"); })
.always(function() { alert("finished"); }); 
```

在服务器端，在`doIssuesPlanning`方法中，能够获取调用并插入发布的数据。

```
 public String doIssuesPlanning() {
     System.out.println("Success executed result appear"); //i want this value to be //retrieval at client side but it's not working. unable to receive at ajax response. 
 return getRedirect("PlanIssuesAction!default.jspa"); 
```

//return "result is success" //也试过代替 getRedirect ，使用直接响应 //return 但没用，它在客户端的 ajax 响应中捕获错误。}

现在我需要在 jquery "Result" 参数处将结果数据返回到客户端。

我怎样才能做到这一点？目前，在“结果”对象中显示所有 HTML 文本，仅此而已。（我已经通过-“System.out.println 设置了上面的对象，并希望在客户端检索但不工作）。

你能告诉我吗，这里有什么问题。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:07:47.453

Webwork jspa URL 返回 HTML，因为这是它们的目的。大多数 AJAX 调用将针对返回 JSON 的 REST 资源。我会为此定义一个新的 REST 资源。更多信息，请访问[https://developer.atlassian.com/display/DOCS/Developing+a+REST+Service+Plugin](https://developer.atlassian.com/display/DOCS/Developing+a+REST+Service+Plugin)

# java - TomeEE Java 版本 5

> ID：15833415
> 
> 赞同：0
> 
> 时间：2013-04-05T12:00:04.163
> 
> 标签：java, tomcat, apache-tomee

我安装了 TomEE plus 1.5.1 版。它有 Tomcat 版本 7。TomEE 可以与 Tomcat 6 一起使用吗？有可能的？

在 Google 上快速搜索，并没有任何回报。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T18:07:27.430

考虑 OpenEJB 而不是 TomEE。

*   [手动安装](http://tomee.apache.org/manual-installation.html)

# android - 查看 API<11 的动画替代方案

> ID：15833417
> 
> 赞同：2
> 
> 时间：2013-04-05T12:00:12.180
> 
> 标签：android, android-animation, android-view

这个[google API 教程](http://developer.android.com/training/animation/screen-slide.html)展示了如何为视图设置动画。但是，它使用 API 级别 11 中可用的方法，例如[View.setAlpha](http://developer.android.com/reference/android/view/View.html#setAlpha%28float%29)

现在，使用带有 android 2.1 (API 7) 的手机，我可以找到许多使用相同动画的应用程序（卡片翻转动画非常流行）

是否有任何 Google 库来执行本教程中显示的动画，这些动画可以与 11 之前的任何 API 一起使用？如果没有，还有其他选择吗？

*PS我知道[这个问题](https://stackoverflow.com/questions/10267291/animation-before-api-11)但显然这是专门关于objectanimator的并且接受了一个无用的分析器*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:51:32.350

[NineOldAndroids](http://nineoldandroids.com/)将能够为您提供您在 11+ 中看到的动画 API。例如...

```
ViewHelper.setAlpha(view, 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T14:44:24.687

可以使用以下类制作简单的动画，例如变换、旋转、移动（这似乎是您想要的）：

[http://developer.android.com/reference/android/view/animation/AnimationUtils.html](http://developer.android.com/reference/android/view/animation/AnimationUtils.html)

[http://developer.android.com/reference/android/animation/AnimatorSet.html](http://developer.android.com/reference/android/animation/AnimatorSet.html)

[http://developer.android.com/reference/android/view/animation/Animation.html](http://developer.android.com/reference/android/view/animation/Animation.html)

简而言之，您将创建动画资源（或类）并在视图上运行它。结束动画后，您可能会通过可见性方法隐藏此视图。

检查此以获取详细信息 - [http://jmsliu.com/779/android-view-animation-example.html](http://jmsliu.com/779/android-view-animation-example.html)。

# javascript - Node.js 将变量传递给模块与将变量传递给每个模块函数

> ID：15833420
> 
> 赞同：2
> 
> 时间：2013-04-05T12:00:30.420
> 
> 标签：javascript, node.js

我正在学习 node.js 并且感兴趣的是以下两种情况之间是否有任何区别。IE 我有一些`myvar`需要在许多模块和子模块中传递的变量（如 db 连接或只是常量字符串“test”）。

第一种情况。创建接受该变量作为参数的模块：

子模块.js：

```
var option
  , submodule = {};
submodule.func = function(){
    ...
    var something = option;
    ...
}
module.exports = function(opts){
    option = opts;
    return submodule;
} 
```

模块1.js：

```
var option
  , submodule
  , module1 = {};
module1.func = function(){
    ...
    submodule.func();
    ...
    var something = option;
    ...
}
module.exports = function(opts){
    option = opts;
    submodule = require('./submodule')(opts);
    return module1;
} 
```

在这种情况下，如果子模块用于多个具有相同`myvar`值的模块（即 2 个模块），子模块的`module.exports`函数将被调用 2 次。在 node.js mans 中，它说“模块在第一次加载后被缓存”。而且我不明白这个模块是否被缓存。

另一种情况：`myvar`可以作为参数传递给模块函数。所以代码看起来像：

子模块.js：

```
function func(option){
    ...
    var something = option;
    ...
};
exports.func = func; 
```

模块1.js：

```
var submodule = require('./submodule');
function func(option){
    ...
    submodule.func(option);
    ...
    var something = option;
    ...
};
exports.func = func; 
```

所以问题是：这两种情况有什么区别还是相同？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T15:12:46.647

我不确定你在这里问什么，但如果你需要将值传递到你的模块中，你应该确保导出接受参数的函数。当他们说一个模块被缓存时，这意味着你的模块只被初始化一次。将您的模块视为一个对象：

```
var a = 1;
var b = 2;
console.log("init!");

module.exports.test = function(){
      console.log("this is a function!");
} 
```

在这里，a、b 和第一个日志将只运行一次。这是模块被请求然后被缓存的时候。当你做一个

```
 var example = require("module") 
```

如果它从未被创建，它将初始化 a、b 并发出日志消息。如果它已经创建，它只会为您提供导出内容的参考。每次调用：

```
 example.test() 
```

它将输出：`this is a function!`

但是您不会再次运行 a、b 和第一个日志。

将所有未导出的语句视为该对象的私有静态变量。

这是另一个完全有效的示例：

`app.js`

```
var s = require("./sample");
var y = require("./sample");
s.test();
y.test();
s.test();
console.log("finished"); 
```

`sample.js`

```
var a = 1;
var b = 2;
console.log("init!");
function test() {
    console.log("here! " + a);
    a++;
}
exports.test = test; 
```

这全部输出：

```
init!
here! 1
here! 2
here! 3
finished 
```

这有帮助吗？

# xpath - Xpath 匹配当前节点或子节点之一

> ID：15833423
> 
> 赞同：0
> 
> 时间：2013-04-05T12:00:38.417
> 
> 标签：xpath

我在为以下 HTML 创建 Xpath 时遇到问题：

```
<html>
<body>
<table class="tablesorter">
<tbody>     
    <tr class="tr_class">
                    <td>{some td info}</td>
                    <td>{some td info}</td>                    
                    <td>
                        <span class="span1">
                            <span class="span2">Out</span>
                            <span class="span3">SMTH</span>
                            <span class="span4">Out</span>
                        </span>
                    </td>   
    </tr>

    <tr class="tr_class">
                    <td>{some td info}</td>
                    <td>{some td info}</td>                    
                    <td>In</td> 
    </tr>

    <tr class="tr_class">
                    <td>{some td info}</td>
                    <td>{some td info}</td>                    
                    <td>In</td> 
    </tr>   

</tbody>
</table>
</body>
</html> 
```

我想要的是创建 Xpath，它将返回我每三个 td 节点的内容（如果它没有子节点）或它的具有 class="span2" 的 span 的内容。例如，对于这个 html，它应该返回

```
Out,In,In 
```

我有 Xpath 将返回所需的跨度节点，它看起来像：

```
//table[@class = 'tablesorter']//td[3]/descendant::*[@class='span2']/text() 
```

我有 Xpath，它将返回每个 3d td 节点的简单内容：

```
//table[@class = 'tablesorter']//td[3][count(descendant::*)=0]/text() 
```

但我只需要一个 Xpath，因为对我来说，有必要对“输入”或“输出”值进行正确排序（它们在表中的排序）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:09:28.570

这会做到这一点，不知道它对你的“语料库”有多强大：

```
//table[@class="tablesorter"]/tbody/tr/td[3]/descendant::text()[normalize-space(.)!=""] 
```

`['Out', 'In', 'In']`

* * *

**更新**

```
//table[@class="tablesorter"]/tbody/tr/td[3]/descendant::text()[normalize-space(.)!=""][parent::td or parent::span[@class="span2"]] 
```

# macos - 嵌入式单声道：调用 mono_jit_cleanup() 时的 EXC_BAD_ACCESS (SIGSEGV)

> ID：15833431
> 
> 赞同：2
> 
> 时间：2013-04-05T12:00:56.863
> 
> 标签：macos, mono, exc-bad-access, mono-embedding

我将 Mono 运行时嵌入到现有的 Cocoa 应用程序中。我已经从 GitHub（主分支）构建了最新的运行时，并且在运行一些托管代码后退出应用程序在 mono_jit_cleanup() 期间给了我这个：

[https://dl.dropbox.com/u/108566029/BAD_ACCESS.png](https://dl.dropbox.com/u/108566029/BAD_ACCESS.png)

仅当我尝试通过 HttpWebRequest 发送 HTTP 请求时才会复制它。特别是如果我调用 GetRequestStream()。代码工作正常，所有托管对象都正确处理。mono_jit_cleanup() 只被调用一次。该问题仅在关闭运行时发生。

这也在最新的 Mono 2.10.x 分支上重现。但是我得到了 SIGSEGV。

这可能发生在不同的地方，所以它似乎是一个线程问题。

那么，我应该如何正确关闭运行时。mono_jit_cleanup() 调用是否足以正确处理运行时？我可以在不处理运行时（没有 mono_jit_cleanup() 调用）的情况下退出应用程序吗？

PS
我在 OSX 10.8.3 上使用 32 位版本的 Mono v2.0（实际上是 3.5）运行时。我链接到 libmono-2.0.1.dylib，所以它应该是 Boehm GC。SGen GC 也重现了同样的问题。

PPS
这里出现另一个错误[https://dl.dropbox.com/u/108566029/SIGABRT.png](https://dl.dropbox.com/u/108566029/SIGABRT.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T09:43:18.760

标准的 mono 可执行文件调用 mono_jit_cleanup() 就好了，所以我们需要更多地了解您正在调用的确切代码、在哪个线程等。

在任何情况下，您都可以直接退出应用程序而不调用该函数。

# html - 如何在空间左侧设置浮动宽度？

> ID：15833433
> 
> 赞同：1
> 
> 时间：2013-04-05T12:00:59.373
> 
> 标签：html, css

我想显示 3 个彼此水平对齐的 div。所以我创建了一个主 div (100%) 并将三个 div 放入其中。在 css 中，我将这三个 childdiv 设置为 float:left。

现在我想要的是将前两个设置为固定宽度，并将第三个设置为剩余的宽度。

我知道表格列有一个宽度：自动；自动填充剩余空间，但我不想使用表格。那么我怎么能用花车做到这一点呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T12:26:01.633

您可以放在`overflow:hidden`第三列，它会自动占用剩余空间。看到[这个小提琴](http://jsfiddle.net/dsundy/ApPeS/1/)。

## 例子：

HTML：

```
<div class="container">
    <div class="one"></div>
    <div class="two"></div>
    <div class="three"></div>
</div> 
```

CSS：

```
.container {
    border: 1px solid black;
    width: 300px;
    height: 400px;
}

.one, .two {
    border: 1px solid blue;
    float: left;
    width: 50px;
    height: 400px;
}

.three {
    border: 1px solid red;
    height: 400px;
    overflow: hidden;
} 
```

请注意，第三列不应浮动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:19:22.843

正如 Ejay 建议的那样，使用 display: table 作为外部 div 和 display: table-cell 用于内部 div。

# vim - 在vim中将文本居中的第一个和最后一个非白色单词的简单方法？

> ID：15833436
> 
> 赞同：7
> 
> 时间：2013-04-05T12:01:05.277
> 
> 标签：vim, macros, center

有没有一种简单的方法使用宏或 ~10 行函数（没有插件！）在一行的第一个和最后一个单词（=非空白字符序列）之间居中一些文本？例如转

```
 >>> No user serviceable parts below.               <<< 
```

进入

```
 >>>       No user serviceable parts below.         <<< 
```

通过平衡空间+/-1？您可以假设没有制表符，结果不应包含制表符，但请注意，第一个单词可能不在第 1 列中开始。（编辑：...事实上，分隔词以及文本的开头和结尾都居中可能在任意列上。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T13:02:10.830

源这个函数：

```
fun! CenterInSpaces()
    let l   = getline('.')
    let lre = '\v^\s*\S+\zs\s*\ze'
    let rre = '\v\zs\s*\ze\S+\s*$'
    let sp  = matchstr(l,lre)
    let sp  = sp.matchstr(l,rre)
    let ln  = len(sp)
    let l   = substitute(l,lre,sp[:ln/2-1],'')
    let l   = substitute(l,rre,sp[ln/2:],'')
    call setline('.',l)
endf 
```

**笔记**

*   此功能可能**不适**用于所有情况。我只是为通常的情况快速写了它。毕竟这不是插件

*   通过组合函数调用可以减少代码行。但我认为这样就很清楚了，所以我就这样放着。

*   如果它对你有用，你可以创建一张地图

*   它的工作原理是这样的：（我输入的最后两行`@:`重复 cmd 调用）

![在此处输入图像描述](https://i.stack.imgur.com/Sv8LE.gif)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T21:48:44.227

您可以将该`:s`命令与`\=`aka sub-replace-expression 一起使用。

```
:s#\v^\s*\S+\zs(\s+)(.{-})(\s+)\ze\S+\s*$#\=substitute(submatch(1).submatch(3),'\v^(\s*)(\1\s=)$','\1'.escape(submatch(2),'~&\').'\2','')# 
```

**概述**

`>>>`捕获和`<<<`标记之间的文本（包括空格） 。将文本两边的空白分成两半，并用中间的非空白文本替换。这种空白平衡行为是通过正则表达式引擎的回溯完成的，因为数学很难。我们去购物吧！

笔记：

*   使用`\v`or`very magic`模式来减少转义，因为这个命令已经足够长了
*   用作`#`替代分隔符而不是通常`/`的 for`:s/pat/sub/`以使其更具可读性

**匹配模式**

```
:s#\v^\s*\S+\zs(\s+)(.{-})(\s+)\ze\S+\s*$#... 
```

*   `:s`如果没有提供范围，则仅在当前行上进行替换。
*   `^\s*\S+`匹配起始空白，后跟非空白。`>>>`在这种情况下。
*   `(\s+)(.{-})(\s+)`匹配空格后跟“文本”后跟空格
*   3 个捕获组：1）前导空白，2）“文本”，以及 3）尾随空白。这些将在稍后分别由`submatch(1)`、`submatch(2)`和引用`submatch(3)`
*   `.{-}`是 vim-speak 用于非贪婪匹配或`.*?`perl-speak
*   如果没有非贪婪匹配，第二个捕获组将在其末尾包含太多空白
*   `\S+\s*$`匹配非空白（即`<<<`）和任何尾随空白
*   使用`\zs`and`ze`指定要替换的比赛的开始和结束

**替换**

```
\=substitute(submatch(1).submatch(3),'\v^(\s*)(\1\s=)$','\1'.escape(submatch(2),'~&\').'\2','') 
```

*   `\=`告诉 vim 替换将是一个 vim 表达式。还允许使用`submatch()`函数
*   `substitute({str}, {pat}, {sub}, {flags})`我们的表达式将是一个嵌套替换
*   `substitute(submatch(1).submatch(3), ...)``submatch(1)`对在和中捕获的前导和尾随空白的串联进行替换`submatch(3)`
*   `{pat}`是`^(\s*)(\1\s=)$`。_ 匹配一些空格，后跟与第一个或 1 个字符长度相同的空格。捕获两半。
*   `escape(submatch(2),'~&\')`任何特殊字符的转义`submatch(2)`。例如`~`, `&`, `\1`, ...
*   `{sub}`是`'\1'.escape(submatch(2),'~&\').'\2'`。_ 替换`submatch(2)`为空格之间的转义（即我们想要居中的“文本”），`\1`并`\2`从`{pat}`
*   不需要`{flag}`，所以`''`

**用法**

如果您经常使用它，我建议您创建一个命令并将其放入`~/.vimrc`.

```
command! -range -bar -nargs=0 CenterBetween <line1>,<line2>s#\v^\s*\S+\zs(\s+)(.{-})(\s+)\ze\S+\s*$#\=substitute(submatch(1).submatch(3),'\v^(\s*)(\1\s=)$','\1'.submatch(2).'\2','')#` 
```

否则使用一次，然后`&`在每个需要的行上重复最后一次替换。

**如需更多帮助，请参阅**

```
:h :s/
:h :s/\=
:h sub-replace-\=
:h submatch(
:h substitute(
:h escape(
:h /\v
:h /\S
:h /\{-
:h /\zs
:h & 
```

**肯特编辑**

不要嫉妒，你的答案也有。^_^

我没有更改命令，只是 cp/paste 到我的 vim。仅`|noh`在末尾添加以禁用突出显示。

如果执行这个命令，它看起来像：

![在此处输入图像描述](https://i.stack.imgur.com/q4lkP.gif)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T12:06:52.383

不知道有什么好办法。我通常以半自动的方式进行，通过`:center`在仅包含要居中的部分的文本行上使用，然后将结果移动到包含周围部分的行中。

如果没有其他人有更好的答案，如果您需要做很多此类事情，也许[盒子可以提供帮助。](http://boxes.thomasjensen.com/)

# iphone - AVPlayer 播放视频时的音量控制

> ID：15833437
> 
> 赞同：1
> 
> 时间：2013-04-05T12:01:07.190
> 
> 标签：iphone, objective-c, ipad, iphone-5

我现在正在使用`AVPlayer`类来处理自定义视频播放器，因为我想使用控制来实现音量`UISlider`控制。

我已经这样做了：

```
NSMutableArray *allAudioParams = [NSMutableArray array];
AVMutableAudioMixInputParameters *audioInputParams =[AVMutableAudioMixInputParameters audioMixInputParameters];
[audioInputParams setVolume:volumeSlider.value atTime:kCMTimeZero];
[allAudioParams addObject:audioInputParams];
AVMutableAudioMix *audioZeroMix = [AVMutableAudioMix audioMix];
[audioZeroMix setInputParameters:allAudioParams];
[self.playerItem setAudioMix:audioZeroMix]; 
```

但这对我不起作用，所以任何人都可以向我建议任何其他解决方案，我已经做了很多研发但无法找到合适的解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:19:02.443

您可以使用以下代码更改音量：

```
NSArray *audioTracks = [asset tracksWithMediaType:AVMediaTypeAudio];

NSMutableArray *allAudioParams = [NSMutableArray array];
for (AVAssetTrack *track in audioTracks) {
  AVMutableAudioMixInputParameters *audioInputParams = 
    [AVMutableAudioMixInputParameters audioMixInputParameters];
  [audioInputParams setVolume:volume atTime:kCMTimeZero];
  [audioInputParams setTrackID:[track trackID]];
  [allAudioParams addObject:audioInputParams];
}

AVMutableAudioMix *audioMix = [AVMutableAudioMix audioMix];
[audioMix setInputParameters:allAudioParams];

[playerItem setAudioMix:audioMix]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:25:47.063

```
-(void)doVolumeFade
{  
    if (self.player.volume > 0.1) {
        self.player.volume = self.player.volume - 0.1;
        [self performSelector:@selector(doVolumeFade) withObject:nil afterDelay:0.1];       
     } else {
        // Stop and get the sound ready for playing again
        [self.player stop];
        self.player.currentTime = 0;
        [self.player prepareToPlay];
        self.player.volume = 1.0;
    }
} 
```

# asp.net - 远程服务器返回错误：(504) Gateway Timeout

> ID：15833439
> 
> 赞同：3
> 
> 时间：2013-04-05T12:01:11.997
> 
> 标签：asp.net, wcf, web-services, wcf-data-services

我使用[http://visualstudiogallery.msdn.microsoft.com/fbc7e5c1-a0d2-41bd-9d7b-e54c845394cd](http://visualstudiogallery.msdn.microsoft.com/fbc7e5c1-a0d2-41bd-9d7b-e54c845394cd)创建了一个 Web 服务。我将它托管在我的 IIS 上并创建了一个测试应用程序，该应用程序部署在 IIS 上并且可以正常工作。现在，我托管了这个 WCF 服务并尝试从 localhost 使用/使用它，但它在以下行中给出了错误：

var response = request.GetResponse() as HttpWebResponse;

错误是

```
The remote server returned an error: (504) Gateway Timeout. 
```

在提琴手它显示：

Fiddler] ReadResponse() 失败：服务器没有为此请求返回响应。

```
request header in fiddler is:

POST /Notifications/RecordingCompleted HTTP/1.1

Entity:

Content-Length: 792
Content-Type: application/json

Transport
Connection: Keep-Alive
Expect: 100-continue 
```

代码是：

string serviceBaseUrl = serviceurlhere string conversationId = 2342423 string resourceUrl = ""; 字符串方法=“POST”；string jsonText = "这里是 JSON";

```
 string success = UseHttpWebApproach(serviceBaseUrl, resourceUrl, method, jsonText);

 private string UseHttpWebApproach(string serviceUrl, string resourceUrl, string method, string requestBody)
        {
            string responseMessage = null;
            var request = WebRequest.Create(string.Concat(serviceUrl, resourceUrl)) as HttpWebRequest;
            if (request != null)
            {
                request.ContentType = "application/json";
                request.Method = method;                 
            }

            //var objContent = HttpContentExtensions.CreateDataContract(requestBody);
            if (method == "POST" && requestBody != null)
            {
                byte[] requestBodyBytes = ToByteArrayUsingJsonContractSer(requestBody);
                request.ContentLength = requestBodyBytes.Length;
                using (Stream postStream = request.GetRequestStream())
                    postStream.Write(requestBodyBytes, 0, requestBodyBytes.Length);

            }

            if (request != null)
            {
                var response = request.GetResponse() as HttpWebResponse;
                if (response.StatusCode == HttpStatusCode.OK)
                {
                    Stream responseStream = response.GetResponseStream();
                    if (responseStream != null)
                    {
                        var reader = new StreamReader(responseStream);

                        responseMessage = reader.ReadToEnd();
                    }
                }
                else
                {
                    responseMessage = response.StatusDescription;
                }
            }
            return responseMessage;
        }

private static byte[] ToByteArrayUsingJsonContractSer(string requestBody)
{
    byte[] bytes = null;
    var serializer1 = new DataContractJsonSerializer(typeof(string));
    var ms1 = new MemoryStream();
    serializer1.WriteObject(ms1, requestBody);
    ms1.Position = 0;
    var reader = new StreamReader(ms1);
    bytes = ms1.ToArray();
    return bytes;
} 
```

服务代码为：

```
 [ServiceContract]
    [AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
    [ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall)]    
    public class RecordingCompleted
    {

        [WebInvoke(UriTemplate = "", Method = "POST")]
        public string ProcessCall(string JsonData)
        {

return string result
}

} 
```

# c# - 对具有起始值的对象列表进行排序的最佳方法是什么？

> ID：15833441
> 
> 赞同：2
> 
> 时间：2013-04-05T12:01:15.727
> 
> 标签：c#, linq, sorting

对具有起始值的对象列表进行排序的最佳方法是什么？我的清单有以下项目：

```
obj a
obj b
obj c
obj d

a.index = 1
b.index = 3
c.index = 2
d.index = 4
start value = 3; 
```

排序列表必须是`{b,d,a,c}`

感谢帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T12:05:29.377

使用`OrderBy`和`ThenBy`组合。它将`using System.Linq`在您的文件顶部使用。

```
var source = new List<Item>() {
    new Item { index = 1, value = 'a' },
    new Item { index = 3, value = 'b' },
    new Item { index = 2, value = 'c' },
    new Item { index = 4, value = 'd' },
};

int startValue = 3;

var sortedList = source.OrderBy(i => i.index < startValue)
                       .ThenBy(i => i.index)
                       .ToList();

foreach (var item in sortedList)
    Console.WriteLine(string.Format("{0} - {1}", item.value, item.index)); 
```

`Item`类定义：

```
class Item
{
    public char value { get; set; }
    public int index { get; set; }
} 
```

返回所需的输出：

```
b - 3
d - 4
a - 1
c - 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T12:08:54.070

如果最大值已知，您可以执行特殊键功能，例如：

```
(item) => { return item.Index < MaxValue? MaxValue + item.Index: item.Index; } 
```

并按其排序。如果 MaxValue 未知，您可以找到它。

或者您可以简单地对列表进行排序，然后将其按 StartValue 拆分并以相反的顺序连接各个部分。

# c++ - 使用带有 -O4 (LTO) 的 FlasCC 编译的 C++ 程序挂起虚拟调用

> ID：15833446
> 
> 赞同：0
> 
> 时间：2013-04-05T12:01:36.743
> 
> 标签：c++, flash, llvm, flascc, lto

我对 FlasCC 中的 LTO 优化有疑问。

当使用 -O1 编译时，生成的 swf 运行得很好。

但是使用 -O4 它首先运行正常，但随后突然挂起特定的虚拟函数调用超过 15 秒，然后 Flash 将其停止。

我添加了 printfs 以使用 Flash 日志跟踪确切的挂起点。

它挂在 printf("Program_Step : vis init") 永远不会进入真正的 Initialize() 实现。指针被声明为 IGameVisualizer *m_pVisualizer;

代码：

```
 virtual void Program_Step( IProgramStep & step )
    {
        if ( !m_init )
        {
            if ( m_initCounter > 0 )
            {
                printf( "\n Program_Step : Later... %d skips left", m_initCounter );
                --m_initCounter;
                return;
            }

            printf( "\n Program_Step : Init" );
            m_init = true;
            m_pVisualizer = Create_SlotsVisualizer_V1();
            printf( "\n Program_Step : m_pLogic" );
            m_pLogic = Create_SlotsLogic_Test();

            if ( m_pVisualizer )
            {
                printf( "\n Program_Step : vis init" );
                m_pVisualizer->Initialize();
            }

            if ( m_pLogic )
            {
                printf( "\n Program_Step : logic init" );
                m_pLogic->Initialize( *this );
            }

            printf( "\n Program_Step : after inits" );
        }

        int dt = step.GetTimeDeltaMsec();

        ProcessControls( dt );

        if ( m_pLogic )
            m_pLogic->Process( dt, *this );

        if ( m_pVisualizer )
            m_pVisualizer->Process( dt );
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:54:27.413

好的，我已经确定了原因：

1) 即使在 fflush() 之后 printf() 也没有显示真实的位置

2）其中一个库是用-O1编译的，但它的部分类代码位于公共内联方法中，并且是用-O4作为另一个库的一部分编译的=>显然这两个不兼容，导致无限循环解析二进制流...

# java - 如何让我的 android 应用程序将 SharedPreferences 作为一组首选项，以便我可以控制它并使用按钮清除首选项

> ID：15833447
> 
> 赞同：1
> 
> 时间：2013-04-05T12:01:41.310
> 
> 标签：java, android, sharedpreferences, preferences

我试图拥有一次 SharedPreferences 并将其控制为不同的方法，而不是在不同的方法中使用不同的 SharedPreferences。我在 onCreate、LoadPreferences、SavePreferences 和 ClearTextViews 方法中有 SharedPreferences。我想这样做，以便我将首选项从 EditText 中输入的文本保存到 TextViews，然后能够使用按钮将它们全部清除。如果可以，请你帮助我。以下是相关代码：

公共类 notesActivity 扩展 Activity 实现 OnClickListener {

```
Button saveNote;
Button clearText;
EditText note;
TextView textSavedNote1, textSavedNote2, textSavedNote3, textSavedNote4, textSavedNote5, textSavedNote6;
SharedPreferences spNote;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_notes);

    saveNote = (Button)this.findViewById(R.id.saveNotes);
    saveNote.setOnClickListener(this);

    clearText = (Button)this.findViewById(R.id.clearAllText);
    clearText.setOnClickListener(this);

    textSavedNote1 = (TextView)findViewById(R.id.stringSavedNote1);
    textSavedNote2 = (TextView)findViewById(R.id.stringSavedNote2);
    textSavedNote3 = (TextView)findViewById(R.id.stringSavedNote3);
    textSavedNote4 = (TextView)findViewById(R.id.stringSavedNote4);
    textSavedNote5 = (TextView)findViewById(R.id.stringSavedNote5);
    textSavedNote6 = (TextView)findViewById(R.id.stringSavedNote6);

    note = (EditText)this.findViewById(R.id.notes);

    spNote = PreferenceManager.getDefaultSharedPreferences(this);
    SharedPreferences.Editor edit = spNote.edit();
    edit.putString("note"+saveNote,note.getText().toString());
    edit.commit();
}

public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.main, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    // Goes back to the home screen
    case R.id.item1:  Intent i = new Intent(notesActivity.this, UserSettingActivity.class);
    startActivity(i);

    case R.id.item2:
            Intent intent = new Intent(this, MainActivity.class);
            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(intent);
            return true;
    // Refreshes the page.   
    case R.id.item3:
            finish();
            startActivity(getIntent());
        default:
            return super.onOptionsItemSelected(item);
    }
}

public void onClick (View v){
    if(v==saveNote){
        SavePreferences("NOTE1", note.getText().toString());
        LoadPreferences();
        note.setText("");
        if(textSavedNote1.getText().toString().length()>0){
            SavePreferences("NOTE2", note.getText().toString());
            LoadPreferences();
            note.setText("");
        }
        else{
    }
}
    else if(v==clearText){
        ClearTextViews();
    }
}

private void SavePreferences(String key, String value){
    SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);
    SharedPreferences.Editor editor = sharedPreferences.edit();
    editor.putString(key, value);
    editor.commit();
   }

private void LoadPreferences(){
    SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);
    String strSavedNote1 = sharedPreferences.getString("NOTE1", "");
    String strSavedNote2 = sharedPreferences.getString("NOTE2", "");
    String strSavedNote3 = sharedPreferences.getString("NOTE3", "");
    String strSavedNote4 = sharedPreferences.getString("NOTE4", "");
    String strSavedNote5 = sharedPreferences.getString("NOTE5", "");
    String strSavedNote6 = sharedPreferences.getString("NOTE6", "");
    textSavedNote1.setText(strSavedNote1);
    textSavedNote2.setText(strSavedNote2);
    textSavedNote3.setText(strSavedNote3);
    textSavedNote4.setText(strSavedNote4);
    textSavedNote5.setText(strSavedNote5);
    textSavedNote6.setText(strSavedNote6);
   }

private void ClearTextViews(){ 

    SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);
    SharedPreferences.Editor editor = sharedPreferences.edit();
    editor.clear();
    editor.commit();

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:10:22.533

有一些链接可能会有所帮助

[如何在 Android 中使用 SharedPreferences 来存储、获取和编辑值](https://stackoverflow.com/questions/3624280/how-to-use-sharedpreferences-in-android-to-store-fetch-and-edit-values)

[http://developer.android.com/reference/android/content/SharedPreferences.html](http://developer.android.com/reference/android/content/SharedPreferences.html)

例子

[如何使用 SharedPreferences](https://stackoverflow.com/questions/3851560/how-to-use-sharedpreferences)

[http://android-er.blogspot.com.br/2011/01/example-of-using-sharedpreferencesedito.html](http://android-er.blogspot.com.br/2011/01/example-of-using-sharedpreferencesedito.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T07:27:18.793

试试下面的代码。

```
/*I have added one more button, on click on that button i have set call clearText function and set all text     empty, each time before clicking on save button you click first clear button then next value will be inserted in next textview.*/
public class SharedPreferenceJustOneSetOfPreferencesActivity extends Activity implements OnClickListener{

    private Button saveNote,clearText,ClearAll;
    static TextView textSavedNote1, textSavedNote2, textSavedNote3, textSavedNote4, textSavedNote5, textSavedNote6;
    private EditText note;
    private SharedPreferences spNote;
    private static final String TAG = SharedPreferenceJustOneSetOfPreferencesActivity.class.getSimpleName();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        initView();
        saveInPreference();
    }

    private void initView() {
        textSavedNote1 = (TextView)findViewById(R.id.textSavedNote1);
        textSavedNote2 = (TextView)findViewById(R.id.textSavedNote2);
        textSavedNote3 = (TextView)findViewById(R.id.textSavedNote3);
        textSavedNote4 = (TextView)findViewById(R.id.textSavedNote4);
        textSavedNote5 = (TextView)findViewById(R.id.textSavedNote5);
        textSavedNote6 = (TextView)findViewById(R.id.textSavedNote6);
        note = (EditText)findViewById(R.id.note);
        saveNote = (Button)findViewById(R.id.saveNote);
        clearText = (Button)findViewById(R.id.clearText);
        ClearAll = (Button)findViewById(R.id.ClearAll);
        saveNote.setOnClickListener(this);
        clearText.setOnClickListener(this); 
        ClearAll.setOnClickListener(this);
    }
    private void saveInPreference() {
        spNote = PreferenceManager.getDefaultSharedPreferences(this);
        SharedPreferences.Editor edit = spNote.edit();
        edit.putString("note"+saveNote,note.getText().toString());
        edit.commit();
    }
    public boolean onCreateOptionsMenu(Menu menu){
        MenuInflater menuInflater = getMenuInflater();
        menuInflater.inflate(R.layout.menu, menu);
        return true;        
    }
    @Override
    public boolean onOptionsItemSelected(MenuItem item){
        switch (item.getItemId()) {
        case R.id.item1:  Intent i = new Intent(SharedPreferenceJustOneSetOfPreferencesActivity.this, UserSettingActivity.class);
        startActivity(i);
        case R.id.item2:
                Intent intent = new Intent(SharedPreferenceJustOneSetOfPreferencesActivity.this, MainActivity.class);
                intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(intent);
                return true;
        case R.id.item3:
              finish();
              startActivity(getIntent());
            default:
                return super.onOptionsItemSelected(item);
        }
    }
    @Override
    public void onClick(View view) {
        if (view == saveNote) {
            String textvedNote1 =textSavedNote1.getText().toString();
            String textvedNote2= textSavedNote2.getText().toString();
            String textvedNote3 =textSavedNote3.getText().toString();
            String textvedNote4= textSavedNote4.getText().toString();
            String textvedNote5 =textSavedNote5.getText().toString();
            String textvedNote6= textSavedNote6.getText().toString();

            if (textvedNote1.equals("")) {          
                SavePreferences("NOTE1", note.getText().toString());
                Log.e(TAG,"textvedNote1: Inside "+textvedNote1.length());
                LoadPreferences();
                note.setText("");
            }else  if (textvedNote2.equals("")&& !textvedNote1.equals("")) {            
                SavePreferences("NOTE2", note.getText().toString());
                Log.e(TAG,"textvedNote2: Inside "+textvedNote1.length());
                LoadPreferences();
                note.setText("");
            } else if (textvedNote3.equals("")&& !textvedNote2.equals("")) {
                Log.e(TAG,"textvedNote3: Inside "+textvedNote2.length());
                SavePreferences("NOTE3", note.getText().toString());
                LoadPreferences();
                note.setText("");
            } else if (textvedNote4.equals("")&& !textvedNote3.equals("")) {
                Log.e(TAG,"textvedNote4: Inside "+textvedNote3.length());
                SavePreferences("NOTE4", note.getText().toString());
                LoadPreferences();
                note.setText("");
            } else if (textvedNote5.equals("")&& !textvedNote4.equals("")) {
                Log.e(TAG,"textvedNote5: Inside "+textvedNote4.length());
                SavePreferences("NOTE5", note.getText().toString());
                LoadPreferences();
                note.setText("");
            } else if (textvedNote6.equals("")&& !textvedNote5.equals("")) {
                SavePreferences("NOTE6", note.getText().toString());
                Log.e(TAG,"textvedNote6: Inside "+textvedNote5.length());
                LoadPreferences();
                note.setText("");
            }
        } else if (view == clearText) {
            ClearTextViews();
        }else if (view == ClearAll){
            ClearTextViews();
            textSavedNote1.setText("");
            textSavedNote2.setText("");
            textSavedNote3.setText("");         
            textSavedNote4.setText("");         
            textSavedNote5.setText("");
            textSavedNote6.setText("");
        }

    }
    private void SavePreferences(String key, String value){
        SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);
        SharedPreferences.Editor editor = sharedPreferences.edit();
        editor.putString(key, value);
        editor.commit();
    }
    private void LoadPreferences(){
        SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);
        String strSavedNote1 = sharedPreferences.getString("NOTE1", "");
        String strSavedNote2 = sharedPreferences.getString("NOTE2", "");
        String strSavedNote3 = sharedPreferences.getString("NOTE3", "");
        String strSavedNote4 = sharedPreferences.getString("NOTE4", "");
        String strSavedNote5 = sharedPreferences.getString("NOTE5", "");
        String strSavedNote6 = sharedPreferences.getString("NOTE6", "");
        if (!strSavedNote1.equals("")) {
            Log.e(TAG,"LoadPreferences1: "+strSavedNote1);
            textSavedNote1.setText(strSavedNote1);
        } else if (!strSavedNote2.equals("")) {
            Log.e(TAG,"LoadPreferences2:  "+strSavedNote2);
            textSavedNote2.setText(strSavedNote2);
        } else if (!strSavedNote3.equals("")) {
            Log.e(TAG,"LoadPreferences3:  "+strSavedNote3);
            textSavedNote3.setText(strSavedNote3);
        } else if (!strSavedNote4.equals("")) {
            textSavedNote4.setText(strSavedNote4);
        } else if (!strSavedNote5.equals("")) {
            textSavedNote5.setText(strSavedNote5);
        } else if (!strSavedNote6.equals("")) {
            textSavedNote6.setText(strSavedNote6);
        }
    }
    private void ClearTextViews(){
        SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);
        SharedPreferences.Editor editor = sharedPreferences.edit();
        editor.clear();
        editor.commit();
    }
} 
```

# java - 如何根据输出来自的线程创建单独的输出行？

> ID：15833454
> 
> 赞同：-6
> 
> 时间：2013-04-05T12:01:54.173
> 
> 标签：java, arrays, multithreading, sorting, io

我有一个实现两种不同排序算法的程序。我通过在单独的线程中启动它们来并行测试这两种算法。我希望能够查看排序操作的结果，*因为它们发生在每个线程*中，并试图将这些结果保持在同一行（对于每个线程）。

> 例如：
> 
> Arr1= 3 5 8 11 16 ...（对线程 1 的输出进行排序）
> Arr2= 4 7 9 10 17 ...（对线程 2 的输出进行排序）

我`Thread.sleep(xxx)`在主逻辑运行后完成了这项工作，但这仅在我只有一个线程时才有效。如果我把这个延迟放在两个线程中，它会显示如下内容：

> Arr1=
> Arr2=Arr1 [i] Arr2[i] Arr1[i+1] Arr2[i+2] ...

换句话说，两种类型的输出都显示在同一行。

这是我的代码：

```
import java.util.PriorityQueue;

class sortareBubbleSort extends Thread {
    int nre, min, max;

    public sortareBubbleSort(int nre, int min, int max) {
        this.nre = nre;
        this.min = min;
        this.max = max;
    }

    public void run() {
        int[] x = new int[nre];
        for (int i = 0; i < x.length - 1; i++)
            x[i] = min + (int) (Math.random() * ((max - min) + 1));
        boolean doMore = true;
        while (doMore) {
            doMore = false;
            for (int i = 0; i < x.length - 1; i++) {
                if (x[i] > x[i + 1]) {
                    int temp = x[i];
                    x[i] = x[i + 1];
                    x[i + 1] = temp;
                    doMore = true;

                }
            }
        }

        System.out.println("\nHere is the sorted array with BubbleSort:");
        for (int i = 0; i < x.length; i++)
            System.out.print(x[i] + " ");
        System.out.print("\n");

    }
}

class sortareHeapSort extends Thread {
    int nre, min, max;

    public sortareHeapSort(int nre, int min, int max) {
        this.nre = nre;
        this.min = min;
        this.max = max;
    }

    public void run() {
        int[] x = new int[nre];
        for (int i = 0; i < x.length - 1; i++)
            x[i] = min + (int) (Math.random() * ((max - min) + 1));

        PriorityQueue<Integer> pQueue = new PriorityQueue<Integer>();
        for (int w : x)
            pQueue.add(w);
        for (int k = 0; k < x.length; k++)
            x[k] = pQueue.poll();

        // Print the array
        System.out.println("\nHere is the sorted array with HeapSort:");
        for (int w : x)
            System.out.print(w + "  ");
    }
}

public class TestThread {
    public static void main(String args[]) {
        sortareBubbleSort fir1;
        sortareHeapSort fir2;
        fir1 = new sortareBubbleSort(10, 1, 100);
        fir2 = new sortareHeapSort(10, 100, 200);
        fir1.start();
        fir2.start();
    }
} 
```

任何帮助或指导表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T12:31:54.357

尝试创建一个同步的静态方法来打印数组，因此第一个完成其工作的线程只有在打印整个数组时才会获得锁并释放它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T12:45:01.907

为什么不打印在单独的列而不是行中：

```
Bubblesort    Heapsort
3             
              4
5             
8
              7
11             
              9
16
              10
              17 
```

这将更容易实现，只需在新行上打印每个结果并根据排序算法调整缩进。

# haskell - Haskell IO monad 和 do 表示法

> ID：15833459
> 
> 赞同：1
> 
> 时间：2013-04-05T12:02:10.877
> 
> 标签：haskell, io, monads

以下 Haskell 代码段无法编译，我不知道为什么。

```
runCompiler :: TC -> IO ()
runCompiler tc = let cp' = cp in 
    do 
        cp'
        return ()
    where
    cp = compileProg tc 
```

我从 GHCi 收到以下错误：

```
 Couldn't match expected type `IO a0' with actual type `String'
    In a stmt of a 'do' block: cp'
    In the expression:
      do { cp';
           return () }
    In the expression:
      let cp' = cp
      in
        do { cp';
             return () } 
```

任何想法如何使它编译。我不明白为什么它不接受 () 作为给定的最终值。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-05T12:13:43.297

使用`do`符号排序两个语句时：

```
do
    action1
    action2 
```

是相同的`action1 >> action2`

因为两者`>>`都有类型并且应该是一元值。`Monad m => m a -> m b -> m b``action1``action2`

看来您的`compileProg`函数具有 type `TC -> String`，而编译器希望它`TC -> IO a`适用于某些类型，`a`因为您以`do`符号形式使用它。

你可以使用一个`let`

```
do 
    let _ = compileProg tc
    return () 
```

让它编译。

如果要输出返回的字符串，可以使用`putStrLn`or `print`：

```
do
    putStrLn (compileProg tc)
    return () 
```

因为`putStrLn`有类型`String -> IO ()`，你可以删除`return ()`：

```
do
    putStrLn (compileProg tc) 
```

实际上`runCompiler`可以简单地写成

```
runCompiler :: TC -> IO ()
runCompiler = putStrLn . compileProg 
```

# unit-testing - AngularJS：需要帮助来对有承诺的工厂进行单元测试

> ID：15833462
> 
> 赞同：2
> 
> 时间：2013-04-05T12:02:20.127
> 
> 标签：unit-testing, angularjs, promise

我有一个使用承诺来解析 json 文件的工厂。它应该只在第一次解析这个文件并在再次调用时返回结果。

这里是工厂

```
app.factory('getServerConfig', function ($q, $http, serverConfig) {

  return function (fileName) {
    var deferred = $q.defer();

    if (serverConfig.loaded) {
      deferred.resolve("alreadyLoaded");
    } else {
      $http.get(fileName).then(function (result) {
        serverConfig.setConfig(result.data);
        deferred.resolve("loaded");
      }, function (result) {
        deferred.reject();
      });
    }
    return deferred.promise;
  };
}) 
```

以及我如何测试它：

```
it('should say hallo to the World', inject(function(getServerConfig) {
    var promiseResult;

    getServerConfig("server-config.json").then(function (result) {
      promiseResult = result;
    });

    rootScope.$apply();
    expect(promiseResult).toBe('loaded');
})); 
```

不幸的是，看起来 promiseResult 从未设置过。这是一个代码：[http ://plnkr.co/edit/uRPCjuUDkqPRAv07G5Nx?p=preview](http://plnkr.co/edit/uRPCjuUDkqPRAv07G5Nx?p=preview)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T12:32:57.603

问题是 $httpBackend 需要一个`flush()`（看看[Flushing HTTP requests](http://docs.angularjs.org/api/ngMock.%24httpBackend)），所以你可以在你的测试中模仿`$http`异步行为。

为了解决它，存储一个引用`$httpBackend`（或再次注入）并在请求完成后调用 $httpBack.flush() 。

看：

```
it('should say hallo to the World', inject(function(getServerConfig, $httpBackend) {
  var promiseResult;

  getServerConfig("server-config.json").then(function (result) {
    promiseResult = result;
  });

  $httpBackend.flush();
  expect(promiseResult).toBe('loaded');
})); 
```

如果您要`$httpBackend`在大多数规范中使用，请考虑将其存储在局部变量中，并将其设置为`beforeEach`.

# ruby-on-rails - Rails 中的别名模型名称问题

> ID：15833464
> 
> 赞同：0
> 
> 时间：2013-04-05T12:02:30.017
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model-associations

我有两个模型`User`和`Dtype`. 在`users`表中，我有两个名为的列`dtype_id`，`dtype_second`其中包含 Dtype 的 ID。现在我需要通过关联获取两个列的值。

使用`@user.dtype.name`会给我第一列（dtype_id）的值。

现在，我还需要第二列的值，即`dtype_second`。

为此，我正在尝试：

```
In User Model:
belongs_to :dtype

In Dtype Model:
has_many :users
has_many :dtype_seconds, :foreign_key => 'dtype_second', :class_name => "User"

On view:
<%= @user.dtype_seconds.name %> 
```

问题是我没有得到任何价值或错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T12:19:43.263

第一的。命名。您应该将`dtype_second`字段重命名为`dtype_second_id`

下一个。协会。您需要在两个模型中适当地描述两个关联

```
class User
  belongs_to :dtype
  belongs_to :dtype_second, :class_name => 'Dtype'
end

class Dtype
  has_many :users
  has_many :second_users, :class_name => 'User', :foreign_key => 'dtype_second_id'
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T12:20:03.683

您正在添加 a has many to `dtype`，但您正在尝试对用户调用该方法。所以你必须定义`dtype_second`用户的关联：

```
class User < ActiveRecord::Base
  belongs_to :dtype
  belongs_to :dtype_alternative, :foreign_key => 'dtype_second', :class_name => "Dtype"

  ...
end

<%= @user.dtype_alternative.name %> 
```

# iphone - 子类化的 UIView 没有设置标签

> ID：15833465
> 
> 赞同：1
> 
> 时间：2013-04-05T12:02:36.187
> 
> 标签：iphone, ios, objective-c, uiview, subclass

我对一个`UIView`类进行了子类化，并在一个循环中创建了该类的多个实例（每次递增），但是当我尝试设置视图的标签并在它们全部创建后将其记录到控制台时，它们都有一个标签为 1，无论我将标签设置为什么。

任何帮助将不胜感激，谢谢！

我创建子视图的代码在这里：

```
//for() loop above with i as counter
FlashCardView *subview = [[FlashCardView alloc] initWithFrame:frame];
subview.delegate = self;
subview.viewNum=i+10; //My attempt at a workaround but I cannot get the view with this later so it is not very helpful
[subview setTag:i+10]; //Tried this and subview.tag=i+10;
NSLog(@"%d", subview.tag); //Prints correctly
//Gets added to parent later 
```

这`NSLog`会记录正确的标签，但是当我在`UIView`子类中记录标签时，它总是将其标签返回为`1`. 另外，如果我在稍后调用的方法（在`viewcontroller`）中打印父级的所有子视图，它们都具有标签 1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T13:31:16.007

我不能告诉你为什么，但我可以告诉你如何找到问题所在。在您的 FlashCardView 子类中，添加此方法：

```
- (void)setTag:(NSInteger)theTag
{
  assert(theTag != 1);
  [super setTag:theTag];
} 
```

然后，当将标签设置为 1 时，断言将触发，您可以查看堆栈跟踪并查看它的来源。

**或者，删除断言，并在超级**消息上放置断点。

PS：确保启用例外！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:35:05.880

嗨，感谢您的帮助，我发现当我打算输入其他内容时，我不小心输入了子类的变量，将标签设置为 1。@Sunny，感谢您告诉我仔细检查。

# jsf - p:commandLink inside p:accordionPanel 在 IE 中有效，但在 FF/Chrome 中无效

> ID：15833467
> 
> 赞同：0
> 
> 时间：2013-04-05T12:02:48.657
> 
> 标签：jsf, jsf-2, primefaces, commandlink

我有以下看法：

```
<ui:composition template="/templates/cmsLayout.xhtml">
    <ui:define name="rightPane">
        <div class="rightPane_header">
            <p:tabMenu activeIndex="0">
                <p:menuitem value="Home" url="/userHome.faces" />
                ...
            </p:tabMenu>
        </div >
        <div class="rightPaneData"> 
            <h:form>
                <p:growl id="growl"/>

                <p:accordionPanel activeIndex="0" dynamic="false" cache="false">
                    <p:tab title="My Document">
                        <f:event type="preRenderComponent" listener="#{documentController.getMyDocumentsForHome()}" />
                        <p:dataTable id="homeMyDocTable" var="myDocument" value="#{documentController.myDocuments}" rowKey="#{myDocument.docId}"
                            selection="#{documentController.selectedDocument}" selectionMode="single">
                            <p:ajax event="rowSelect" listener="#{documentController.viewDocumentDetailPage}" />
                            <p:column headerText="Document Number" id="homeMyDocNumber" styleClass="FixedcolumnWidth">
                                <h:outputText value="#{myDocument.docId}" />
                            </p:column>
                            ...
                        </p:dataTable>
                        <p:commandLink value="More.." rendered="#{documentController.myDocMoreStatus}" action="#{documentController.viewMyDocumentPage}" />
                    </p:tab>
                </p:accordionPanel>
            </h:form>
        </div>
    </ui:define>
</ui:composition> 
```

"More.."的`<p:commandLink>`with 值在 IE 中可以正常工作，但在 FF/Chrome 中不行。这是如何引起的，我该如何解决？

# ruby-on-rails - ruby on rails 中控制器的功能测试

> ID：15833473
> 
> 赞同：0
> 
> 时间：2013-04-05T12:03:14.513
> 
> 标签：ruby-on-rails, ruby, testing

我有产品控制器，我在视图中有方法说主页和 _homepage.html.erb 文件。如何测试此方法以获取断言应该得到响应成功。我在 test/functional 中创建了 productcontrllertest.rb 并写了下面的代码

```
require 'test_helper'
class ProductControllerTest < ActionController::TestCase

 test "should get homepage" do
    get :homepage
    assert_response :success
  end

end 
```

我有带有“产品/主页”的 routes.rb 文件

当我使用命令 bundle exec rake test:functionals 运行测试时，出现错误。

```
Error is that NoMethodError: undefined method `authenticate' for nil:NilClass 
```

请帮我解决这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:32:08.717

```
require 'test_helper'
class ProductControllerTest < ActionController::TestCase

 test "should get homepage" do
    get 'homepage/1'
    assert_response :success
  end

end 
```

# android - 检查android中对话框的状态

> ID：15833476
> 
> 赞同：0
> 
> 时间：2013-04-05T12:03:29.137
> 
> 标签：android

我通过以下方式创建对话框：

```
protected void showAlertDialog(String title, String message) {
    AlertDialog.Builder builder = new Builder(this);
    if(title != null) {
        builder.setTitle(title);
    }
    if(message != null) {
        builder.setMessage(message);
    }
    builder.setPositiveButton("OK", new OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {
            backToMainActivity();
        }
    });
    builder.show();
} 
```

之后我在我的活动中使用它。如何检查我的对话框的状态。我的意思是我想检查对话框何时被取消或关闭。这有什么办法吗？我有一个示例，当用户单击后退按钮并关闭对话框时，我想在关闭对话框时完成活动。这是检查对话框是否正在显示或已关闭的任何方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T12:05:07.870

你可以检查

`if (dialog.isShowing())`

它应该是你需要的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T12:41:28.263

你可以使用这段代码：

```
builder.setOnDismissListener(new DialogInterface.OnDismissListener() {

            @Override
            public void onDismiss(DialogInterface dialog) {
                // TODO Auto-generated method stub
                Activity.finish();
                }
            }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T12:08:55.100

不幸的是，该`isShowing()`方法不包含在`AlertDialog.Builder`类中，但是`Dialog`该类包含`isShowing();`

An`AlertDialog.Builder`用于创建`AlertDialog`. 一旦你有了这个 an 实例`AlertDialog`，**你可以通过调用 isShowing() 来确定它是否仍在显示。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T14:50:02.120

您可以在对话框中添加取消按钮：

```
builder.setNegativeButton("Cancel", new OnClickListener() {

@Override
        public void onClick(DialogInterface dialog, int which) {
            //Your code here
        }
    }); 
```

如果您只想要带有确定按钮的对话框，您可以在您的构建器上使用诸如 setOnCancelListener、setOnDissmisListener 之类的方法。

# forms - 提交表单后，SEO Url 不变

> ID：15833479
> 
> 赞同：0
> 
> 时间：2013-04-05T12:03:40.237
> 
> 标签：forms, url, seo, form-submit

我正在使用 SEO 网址加载我的页面，即[http://www.mywebsite.com/p/page1/100](http://www.mywebsite.com/p/page1/100)，但我的搜索表单有问题。当我单击提交时，它不会将整个 url 更改为表单中指定的 URL，而是将变量附加到 url，例如[http://www.mywebsite.com/p/page1/100?p=search&q=Any+查询+字符串+这里](http://www.mywebsite.com/p/page1/100?p=search&q=Any+Query+String+here)。

我的问题是，如何用表单变量替换整个 URL？

这是我的表单代码：

```
<form action="<?php $_SERVER['PHP_SELF'] ?>" method="get">
    <input type="text" onfocus="if(this.value==this.defaultValue) this.value='';" onblur="if(this.value=='') this.value=this.defaultValue;" name="q" value="Search" /> 
    <input type="hidden" value="search" name="p" />
    <input type="submit" value="Search" class="submit" />
      </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:21:01.443

好的，我认为我用黑客解决了它？？？

显然，如果我将变量附加到操作 url，这将强制浏览器加载新的 url，而不是将表单变量附加到现有的 url。

例如。

```
<form action="<?php $_SERVER['PHP_SELF'] ?>?p=search" method="get">
<input type="text" onfocus="if(this.value==this.defaultValue) this.value='';" onblur="if(this.value=='') this.value=this.defaultValue;" name="q" value="Search" /> 
<input type="hidden" value="search" name="p" />
<input type="submit" value="Search" class="submit" />
  </form> 
```

这对我有用，但我不知道这是实现这一目标的正确方法还是黑客攻击。

# node.js - 是否可以打包一个“真正的”mongodb 库以仅在流星 0.6 中用于 *server* 端

> ID：15833488
> 
> 赞同：3
> 
> 时间：2013-04-05T12:04:04.437
> 
> 标签：node.js, mongodb, meteor

我知道在 0.6 之前与流星一起打包的“迷你 mongo”在聚合方面有一些限制，但希望随着 0.6 的发布，故事会更容易一些。

我试图解决的是 mini-mongo 中缺乏“聚合”。

我有一个带有这样记录的 mongodb

```
db.account_records.findOne()
{
    "type" : "initial_balance",
    "amt" : 10,
    "account_id" : "95CPB9Be8NX3TGSpi",
    "_id" : "L9D7Agt4gW2Ht4NTA"
} 
```

我想（在客户端）订阅如下查询..

```
db.events.aggregate( [ { $group: {_id:"$account_id", balance: { $sum: "$amt"}}}]); 
```

..这给出了（当使用终端“mongo meteor”风格的“真实”mongodb运行时）..

```
{
    "result" : [
        {
            "_id" : "Dn5Eouw8K4RrP9SGw",
            "balance" : 169.99922000000308
        },
        {
            "_id" : "Bawopno2QGs8guMWy",
            "balance" : 1
        },
        {
            "_id" : "95CPB9Be8NX3TGSpi",
            "balance" : 5
        }
    ],
    "ok" : 1
} 
```

在我看来，在客户端执行复杂的聚合子句是不可能的（或可取的），所以我可以看到我们拥有 mini-mongo 的原因。但我希望能够在新版本的流星中安装标准 npm 模块，创建一个可以从“真实”mongo 发布并在 mini-mongo 中订阅的查询可能会更容易一些？

--

PS我已经找到了，但是所有这些双下划线让我很紧张，我会尝试一些复杂的东西...... [https://github.com/meteor/meteor/pull/644](https://github.com/meteor/meteor/pull/644)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T06:18:49.503

您可以在您的服务器上使用该聚合推送。在 Meteor 0.6.0 'engine' 版本之前，`npm`模块集成仍然非常非官方，因此下划线，最后它可以正式使用，所以下面应该可以工作（从 gi​​thub pull 修改为在 0.6.0 上工作：[https://github. com/流星/流星/拉/644](https://github.com/meteor/meteor/pull/644)）

**服务器端js**

```
var path = Npm.require('path');
var MongoDB = Npm.require('mongodb');
var Future = Npm.require('fibers/future');

var Animals = new Meteor.Collection("animals");

Meteor.startup(function () {
  Animals.aggregate = function(pipeline) {
    var self = this;

    var future = new Future;
    self.find()._mongo.db.createCollection(self._name, function (err, collection) {
      if (err) {
        future.throw(err);
        return;
      }
      collection.aggregate(pipeline, function(err, result) {
        if (err) {
          future.throw(err);
          return;
        }
        future.ret([true, result]);
      });
    });
    var result = future.wait();
    if (!result[0])
      throw result[1];

    return result[1];
  };

});

Meteor.methods({
  myAggregationMethod: function() {
    return Animals.aggregate([ {$project: {dog:1, age:1}}, {$sort:{age:1}} ]);
  }
}); 
```

在您的**客户端 js**上，当您要调用聚合时：

```
 Meteor.call('myAggregationMethod', function(err,result) {
      if (!err) {
          console.log(result)          
      } else {
        console.log(err);
      }
    }); 
```

**添加 mongodb 包**

1）在您的项目中创建一个名为 packages 的目录来存储您的包，并在另一个名为 mongodb 的目录中为 mongodb npm 包创建一个目录

2) 在 mongodb 中添加一个名为 contains 的`package.js`文件

```
Package.describe({
  summary: "Mongodb driver"
});

Npm.depends({'mongodb':"1.2.14"});

Package.on_use(function (api) {
  api.add_files('lib.js', 'server');
}); 
```

在同一个 mongodb 目录中添加另一个文件，名为`lib.js`：

```
if(typeof(Npm) != "undefined") {
    MongoDB = Npm.require("mongodb");
}
else
{
    console.log("Please upgrade meteor to 0.6.0")
    MongoDB = __meteor_bootstrap__.require("mongodb");
} 
```

最后删除线

`var MongoDB = Npm.require("mongodb")`来自您`server.js`，因为我们在全球范围内`lib.js`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-03T21:20:50.967

要修复 Akshat 对 Meteor 0.9.0 的回答，请使用以下命令：

```
self.find()._mongo._withDb(function(db) {
  return db.createCollection(self._name, function(err, collection) {
    if (err) {
      console.log(err);
      future.throw(err);
      return;
    }
    return collection.aggregate(pipeline, function(err, result) {
      if (err) {
        future.throw(err);
        return;
      }
      return future["return"]([true, result]);
    });
  });
}); 
```

此外，无需包含`MongoDB = Npm.require("mongodb")`在标题中。

# c++ - 模板运算符 ->

> ID：15833489
> 
> 赞同：0
> 
> 时间：2013-04-05T12:04:10.053
> 
> 标签：c++, templates

有没有办法方便地调用模板 operator-> ？在像变体这样的类中有这种可能性会很酷

例如：（这只是一个例子）

```
struct base_t
{
   template<class T>
   T* operator->()
   {
      return reinterpret_cast<T*>(this);
   }
};

int main(int argc, char* argv[])
{
   base_t x;
   x.operator-><std::pair<int,int>>()->first; //works, but inconvenient
   x<std::pair<int,int>>->first; // does not work
   x-><std::pair<int,int>>first; //does not work

   return 0;
} 
```

我需要证明=）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:11:34.537

不，这不是真的，这怎么也不是真的

```
struct base_t
{
   template<class T>
   T operator () ()
   {
      return T();
   }
};

int main()
{
   base_t x;
   x.operator ()<int>(); // works
   x.()<int>(); // not works
} 
```

> 如果 T::operator->() 存在并且运算符被选为最佳匹配函数，则表达式 x->m 被解释为 (x.operator->())->m 用于类型 T 的类对象 x通过重载解决机制

> 后缀表达式-> templateopt id 表达式
> 
> 后缀表达式 -> 伪析构函数名称

因此，语法`x-><T>`根本不正确。

# jquery - iPhone 4 不接受 jquery

> ID：15833491
> 
> 赞同：2
> 
> 时间：2013-04-05T12:04:19.800
> 
> 标签：jquery, iphone, css, animation

简单的问题：我找到了关于实现“触摸”功能而不是“点击”和体面代码块的答案，但是我被卡住了。

```
$('#info-button').bind("click", function() {
    $('#slidecaption').toggle('slow', function() {

    });
}); 
```

这就是我拥有的代码（*以前是简单的单击然后一个伙伴说更改为绑定*）。

我如何编写它以包含触摸功能？我的知识不足以理解这里的答案。互联网啤酒最有帮助的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:08:52.897

我会在你的情况下使用一些图书馆。我的经验是[http://eightmedia.github.com/hammer.js/](http://eightmedia.github.com/hammer.js/)在我的项目中运行良好。

例子：

```
$('#info-button').hammer().on("tap", function() {
    $('#slidecaption').toggle('slow', function() {

    });
}); 
```

# c# - 在侧列表中传递运行时对象类型

> ID：15833495
> 
> 赞同：-1
> 
> 时间：2013-04-05T12:04:27.977
> 
> 标签：c#, .net

```
object obj = new Customer();
Type Ty = obj.GetType();
Validator<Ty> cusValidator = valFactory.CreateValidator<Ty>(); 
```

**在这里出错**

是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T12:06:42.193

是的。但不适用于编译时类型检查。您的运行时类型`Ty`不是有效的编译时类型参数。可以通过反射来完成，使用`MakeGenericType`没有编译时检查安全的方法：

```
object obj = new Customer();
Type ty = obj.GetType();
MethodInfo validatorFactory = valFactory.GetType()
                               .GetMethod("CreateValidator")
                               .MakeGenericType(ty);
var cusValidator = validatorFactory.Invoke(valFactory, null); 
```

但是你不能输入类似的东西`Validator<ty>`——你必须使用`var`or `dynamic`。请注意，现在类型是对象：

```
// true:
cusValidator.GetType() == typeof(object) 
```

您可以引入一个非泛型 Validator 接口，以允许`cusValidator`在您插入所有`Customer`（等等）类的基类的位置调用方法来验证它。你不能投射到`Validator<ty>`.

# c# - 如何不打破异常？

> ID：15833498
> 
> 赞同：1
> 
> 时间：2013-04-05T12:04:34.227
> 
> 标签：c#, visual-studio, exception, exception-handling

我有这样的事情：

```
try
{
    instance.SometimesThrowAnUnavoidableException(); // Visual Studio pauses the execution here due to the CustomException and I want to prevent that.
}
catch (CustomException exc)
{
    // Handle an exception and go on.
}

anotherObject.AlsoThrowsCustomException(); // Here I want VS to catch the CustomException. 
```

在代码的另一部分中，我遇到了多次引发*CustomException*的情况。我想强制 Visual Studio 停止在*instance.SometimesThrowAnUnavoidableException()*行上中断，因为它掩盖了我有兴趣在*CustomException*上中断的其他地方的视图。

我尝试了*DebuggerNonUserCode*但它用于不同的目的。

**如何禁用 Visual Studio 仅以某种方法捕获特定异常？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-30T12:32:58.847

您可以使用自定义代码分两步执行此操作。

1.  `CustomException`禁用异常的自动中断。
2.  将事件的处理程序添加[`AppDomain.FirstChanceException`](http://msdn.microsoft.com/en-us/library/system.appdomain.firstchanceexception.aspx)到您的应用程序。在处理程序中，如果实际异常是 a `CustomException`，请检查调用堆栈以查看您是否真的要中断。
3.  使用[`Debugger.Break();`](http://msdn.microsoft.com/en-us/library/system.diagnostics.debugger.break.aspx)使 Visual Studio 停止。

这是一些示例代码：

```
private void ListenForEvents()
{
    AppDomain.CurrentDomain.FirstChanceException += HandleFirstChanceException;
}

private void HandleFirstChanceException(object sender, FirstChanceExceptionEventArgs e)
{
    Exception ex = e.Exception as CustomException;
    if (ex == null)
        return;

    // option 1
    if (ex.TargetSite.Name == "SometimesThrowAnUnavoidableException")
        return;

    // option 2
    if (ex.StackTrace.Contains("SometimesThrowAnUnavoidableException"))
        return;

    // examine ex if you hit this line
    Debugger.Break();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T12:12:17.483

在 Visual Studio 中，转到 debug->exceptions 并通过取消选中相应的复选框来为您关闭中断`CustomException`，然后在代码中（可能在`catch`语句上）在您实际要中断的位置设置断点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T12:11:55.503

如果您希望 Visual Studio 停止中断某个类型的所有异常，则必须从“异常”窗口配置行为。

完整的说明在[这里](http://msdn.microsoft.com/en-us/library/d14azbfh%28v=vs.110%29.aspx)，但要点是转到调试菜单并选择异常，然后取消选中您不希望调试器中断的项目。

我认为没有办法避免使用这种技术的特定方法，但也许更好的问题是“为什么会抛出异常？”

您可以添加一组[#IF DEBUG](http://msdn.microsoft.com/en-us/library/4y6tbswk.aspx)预处理器指令以避免运行有问题的代码部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T12:17:21.393

您可以通过在方法之前放置[DebuggerStepThrough 属性](http://msdn.microsoft.com/en-us/library/system.diagnostics.debuggerstepthroughattribute.aspx)来完全禁用单步执行。由于这会禁用整个方法中的单步执行，因此您可以将 try-catch 隔离为一个单独的用于调试目的。

我没有测试，但是当抛出异常时，它甚至不应该中断该方法。试试看;-)

另请参阅[此 SO 线程](https://stackoverflow.com/questions/1420390/dont-stop-debugger-at-that-exception-when-its-thrown-and-caught)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-30T12:10:34.410

您不能简单地禁止 Visual Studio 停止在特定的代码位置。您只能在引发特定类型的异常时阻止它停止，但这会影响发生此类异常的所有地方。

实际上，您可以按照[280Z28](https://stackoverflow.com/users/138304/280z28)的建议实施[自定义解决方案](https://stackoverflow.com/a/17947142/2042090)。

# postgresql - 如何强制转换列名以防止 SQL 注入？

> ID：15833504
> 
> 赞同：0
> 
> 时间：2013-04-05T12:05:04.363
> 
> 标签：postgresql, stored-procedures

`EXECUTE`在 PostgreSQL 函数中定义时，我可以转换表名称以`::regclass`确保它们是有效的关系名称。现在，我想将其扩展到列名，但我找不到合适的类型。

我的代码：

```
...
BEGIN
    EXECUTE '
    UPDATE ' || tbl::regclass || ' SET ' || col || '=someVal WHERE idcol=id
    ';
END;
... 
```

`col`在将其转换为列名之后要放什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:35:47.750

```
quote_ident(col) 
```

[字符串函数](http://www.postgresql.org/docs/current/interactive/functions-string.html)

# c# - Windows Phone 8 蓝牙错误 HRESULT：0x8007271D

> ID：15833507
> 
> 赞同：2
> 
> 时间：2013-04-05T12:05:08.670
> 
> 标签：c#, bluetooth, windows-phone-8

我一直在尝试开发我的 Windows Phone 8 应用程序来访问配对的蓝牙设备（打印机）并发送一些打印数据。

我在 Windows 8 64bit 上开发并使用 VS2012 Express。由于模拟器不支持蓝牙，我一直将构建上传到诺基亚 Lumia 820 以进行测试。

我使用以下两个站点作为参考：

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207007(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207007(v=vs.105).aspx)

[http://www.geekchamp.com/articles/getting-started-with-bluetooth-in-windows-phone-8](http://www.geekchamp.com/articles/getting-started-with-bluetooth-in-windows-phone-8)

应用程序找到配对设备并通过 Debug 命令输出打印机名称。

代码一直有效：

```
await socket.ConnectAsync(selectedDevice.HostName, "1"); 
```

然后它因以下异常而中断：

```
********** EXCEPTION OCCURED **********
Data: System.Collections.ListDictionaryInternal
InnerException: 
Message: An attempt was made to access a socket in a way forbidden by its access permissions. (Exception from HRESULT: 0x8007271D)
StackTrace:    at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.GetResult()
   at mobility.PrinterSettings.<AppToDevice>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.<ThrowAsync>b__0(Object state)
********** EXCEPTION OCCURED ********** 
```

如果在 socket.ConnectAsync(selectedDevice.HostName, "1"); 之前删除“await” 那么代码将继续没有任何错误但没有建立蓝牙连接？

正如教程中所述，我已经尝试了从 1 到 30 的每个数字，并且我还确保在 WMAppManifest.xml 中启用了 ID_CAP_NETWORKING。

请问有人有什么想法吗？

完整代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Navigation;
using Microsoft.Phone.Controls;
using Microsoft.Phone.Shell;
using Windows.Networking.Proximity;
using System.Diagnostics;
using Windows.Networking.Sockets;
using Microsoft.Phone.Tasks;
using System.Text;
using Windows.Storage.Streams;

namespace mobility
{
    public partial class PrinterSettings : PhoneApplicationPage
    {
        public PrinterSettings()
        {
            InitializeComponent();
            PrinterName.Text = App.loadString("PrinterName");
            if (PrinterName.Text == null || PrinterName.Text == "")
            {
                PrinterName.Text = "QL420";
            }
        }

        private void Save_Click(object sender, RoutedEventArgs e)
        {
            if (PrinterName.Text != null && PrinterName.Text != "")
            {
                App.saveString(PrinterName.Text, "PrinterName");
                MessageBox.Show("Printer Name has been saved.");
            }
            else
            {
                MessageBox.Show("Error: The Printer Name appears to be missing.");
            }
        }

        private async void AppToDevice()
        {
            try
            {
                // Configure PeerFinder to search for all paired devices.
                PeerFinder.AlternateIdentities["Bluetooth:Paired"] = "";
                var pairedDevices = await PeerFinder.FindAllPeersAsync();

                if (pairedDevices.Count == 0)
                {
                    MessageBox.Show("No paired devices were found.");
                }
                else
                {
                    // Select a paired device. In this example, just pick the first one.
                    PeerInformation selectedDevice = pairedDevices[0];
                    // Attempt a connection
                    Debug.WriteLine(selectedDevice.DisplayName); // Make sure we are trying to connect to the correct device.
                    //Debug.WriteLine(selectedDevice.HostName.RawName);
                    //Debug.WriteLine(selectedDevice.HostName.IPInformation.NetworkAdapter.NetworkAdapterId.ToString());
                    //Debug.WriteLine(selectedDevice.ServiceName);
                    StreamSocket socket = new StreamSocket();
                    // Make sure ID_CAP_NETWORKING is enabled in your WMAppManifest.xml, or the next 
                    // line will throw an Access Denied exception.
                    // In this example, the second parameter of the call to ConnectAsync() is the RFCOMM port number, and can range 
                    // in value from 1 to 30.

                    await socket.ConnectAsync(selectedDevice.HostName, "1");

                    string newLabel = App.loadString("Template");
                    newLabel = newLabel.Replace("$n", "\n");
                    string epl = App.loadString("PrintHeader");
                    epl = epl + newLabel;
                    Debug.WriteLine(epl);
                    var data = GetBufferFromByteArray(Encoding.UTF8.GetBytes(epl));

                    //socket.OutputStream.WriteAsync(data);
                    MessageBox.Show("Device Found.");
                }
            }
            catch (Exception ex)
            {
                if ((uint)ex.HResult == 0x8007048F)
                {
                    var result = MessageBox.Show("Bluetooth is turned off. To see the current Bluetooth settings tap 'ok'", "Bluetooth Off", MessageBoxButton.OKCancel);
                    if (result == MessageBoxResult.OK)
                    {
                        ShowBluetoothcControlPanel();
                    }
                }
                else if ((uint)ex.HResult == 0x80070005)
                {
                    MessageBox.Show("To run this app, you must have ID_CAP_PROXIMITY enabled in WMAppManifest.xaml");
                }
                else
                {
                    MessageBox.Show(ex.Message);
                    Debug.WriteLine(ex.StackTrace);
                    Debug.WriteLine(ex.HResult);
                }
            }
        }

        private IBuffer GetBufferFromByteArray(byte[] package)
        {
            using (DataWriter dw = new DataWriter())
            {
                dw.WriteBytes(package);
                return dw.DetachBuffer();
            }
        }

        private void ShowBluetoothcControlPanel()
        {
            ConnectionSettingsTask connectionSettingsTask = new ConnectionSettingsTask();
            connectionSettingsTask.ConnectionSettingsType = ConnectionSettingsType.Bluetooth;
            connectionSettingsTask.Show();
        } 

        private void Button_Click_1(object sender, RoutedEventArgs e)
        {
            this.Dispatcher.BeginInvoke(() =>
            {
                AppToDevice();
            });
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T19:44:05.783

经过多次玩耍并将手机重置回其原始状态但没有成功。

我在 WMAppManifest.xml 中勾选了“ID_CAP_PROXIMITY”，它立即开始工作！

看起来我为“ID_CAP_PROXIMITY”提供的错误代码可能是错误的，所以这里是代码更新以及我从那以后遇到的一些错误消息。

我希望这可以帮助遇到类似问题的人。

```
catch (Exception ex)
            {
                if ((uint)ex.HResult == 0x8007048F)
                {
                    var result = MessageBox.Show("Bluetooth is turned off.\nTo see the current Bluetooth settings tap 'ok'", "Bluetooth Off", MessageBoxButton.OKCancel);
                    if (result == MessageBoxResult.OK)
                    {
                        ShowBluetoothcControlPanel();
                    }
                }
                else if ((uint)ex.HResult == 0x8007271D)
                {
                    //0x80070005 - previous error code that may be wrong?
                    MessageBox.Show("To run this app, you must have ID_CAP_PROXIMITY enabled in WMAppManifest.xaml");
                }
                else if ((uint)ex.HResult == 0x80072740)
                {
                    MessageBox.Show("The Bluetooth port is already in use.");
                }
                else if ((uint)ex.HResult == 0x8007274C)
                {
                    MessageBox.Show("Could not connect to the selected Bluetooth Device.\nPlease make sure it is switched on.");
                }
                else
                {
                    //App.handleException(ex);
                    MessageBox.Show(ex.Message);
                }
            } 
```

# python - python中对非英文文件名的文件操作

> ID：15833509
> 
> 赞同：3
> 
> 时间：2013-04-05T12:05:11.547
> 
> 标签：python, windows, unicode, python-unicode

我们中的许多人可能会遇到这个问题，但我在 unicode 处理方面很差。这是问题所在：这是一个代码片段，我正在尝试执行 .exe 文件并检查文件路径是否存在但没有运气：

```
#Python 2.6.7

filePath = 'C:\\Test\\'  # Test folder haveing file BitComet_比特彗星_1_25.exe

for (adir, dirs, files) in os.walk(rootdir):
    for f in files:
        path = os.path.join(adir,f)
        if os.path.exists(path ):
            print'Path Found',path 
            #Extract file
            #logging(path )
        else:
            print 'Path Not Found'  
            #logging(path ) 
```

我总是得到“找不到路径”的结果。我尝试使用 path.decode('utf-8'):
但脚本将文件路径读取为：

```
C:\Test\BitComet_????_1_25.exe 
```

而且由于这个文件路径不存在，所以它转到 else 分支。

请给我一个提示来处理这个 unicode 问题，以及如果我能够向用户展示在 cmd 或日志文件中显示文件路径是否更好。

如果这似乎是重复的帖子，我深表歉意。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T12:09:08.750

Windows 路径以 UTF-16 编码。Python 可以为你处理这个问题，只需传递一个*unicode*路径`os.walk()`，你就会得到 Unicode 结果：

```
filePath = u'C:\\Test\\'  # Test folder haveing file BitComet_比特彗星_1_25.exe

for (adir, dirs, files) in os.walk(filePath): 
```

# linux - hcitool 连接断开

> ID：15833512
> 
> 赞同：1
> 
> 时间：2013-04-05T12:05:19.207
> 
> 标签：linux, bluetooth

我用 hcitool 创建一个连接：

```
hcitool cc 00:11:22:... 
```

然后列出当前存在的所有连接：

```
hcitool con 
```

我第一次发出这个命令时，我刚刚创建的连接被列出来了。如果我再次发出该命令，则不会列出任何连接。我四处搜索，发现内核在 1-2 秒内关闭了连接，我必须发出“l2ping”以保持连接处于活动状态。
我还写了一些代码来创建一个连接，然后`RSSI`在一个循环中读取（读取之间有间隔），但是连接仍然在几秒钟左右失败，有没有办法禁用这个内核的行为（如果它是核心）？或者以某种方式在代码中禁用它或至少避免它？

# python - 在 python3.3、numpy 1.7 中导入 scipy.integrate

> ID：15833518
> 
> 赞同：2
> 
> 时间：2013-04-05T12:05:28.443
> 
> 标签：python, scipy

我最近从 python3.2 迁移到 Python3.3。我安装了 Numpy 1.7.0 和 Scipy 0.11.0。我在 Scientific Linux 6.4 上运行所有这些。但是当我运行时：

```
from scipy import integrate 
```

我收到此错误：

```
Traceback (most recent call last):
   File "<stdin>", line 1, in <module>
   File "/usr/local/lib/python3.3/site-packages/scipy/integrate/__init__.py", line 50, in <module>
      from .quadrature import *
   File "/usr/local/lib/python3.3/site-packages/scipy/integrate/quadrature.py", line 5, in <module>
     from scipy.special.orthogonal import p_roots
   File "/usr/local/lib/python3.3/site-packages/scipy/special/__init__.py", line 532, in <module>
     from .lambertw import lambertw
   File "lambertw.pyx", line 24, in init scipy.special.lambertw (scipy/special/lambertw.c:1588)
ValueError: level must be >= 0 
```

所以我安装了 Scipy 0.12.0c1，但问题仍然存在。你能帮我解决这个问题吗？

非常感谢您提前

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T15:06:43.027

答案是 Scipy 0.11.0 与 Python 3.3 不兼容。

您需要等待 0.12.0，或者下载候选发布版本 0.12.0rc1，或者使用上面评论中提到的 Cython 修复程序重新编译。

但是，此错误**已**在 0.12.0rc1 中修复。`lambertw.c`你很可能在安装它时犯了一个错误——在 0.12.0rc1中没有调用文件。

# c# - xml处理期间的异常

> ID：15833525
> 
> 赞同：2
> 
> 时间：2013-04-05T12:05:46.927
> 
> 标签：c#, .net, exception, io

我只是在这里回顾我的问题（尚未解决）：

[c#异常进程无法访问文件](https://stackoverflow.com/questions/15811093/c-sharp-exception-the-process-cannot-access-the-file)

当我在调试模式下运行时没有发生异常，它只是在我从 exe 运行时才发生。

有人可以给它一个理由，为什么它在运行 exe 而不是在调试模式下给出异常。

我第一次运行 exe 时，它​​成功运行并为我提供了我需要的 xml 输出。但是对于观察者的第二个发现。它给了我这个例外：该进程无法访问该文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T12:09:25.557

我认为你的锁错了，因此多个线程试图获取你的文件

尝试执行以下操作：

```
if (Monitor.TryEnter(lockObject))
{
    try{
    //Your actual code
    }
}
else
    return; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T13:04:44.177

我查看了完整的代码集……您遇到的问题与事件和时间有关。在保存文件的任何进程放开它之前，您的事件是从 FileWatcher 对象触发的。尝试将 Thread.Sleep 放在 Convert 方法的顶部...不需要太长，从 1 秒左右开始...看看会发生什么。

```
 private static void convert(object source, FileSystemEventArgs f)
    {
        string FileName;
        FileName = f.FullPath;
        string FilePath;
        FilePath = f.Name;
                 var watcher = source as FileSystemWatcher;
             string destinationFile = @"D:/GS/" + FilePath;

        Thread.Sleep(1000);

        //... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T12:42:40.693

您的**EXE**进程正在连续运行。您的 exe 进程可能应该停止。那么“进程无法访问文件”错误将永远不会出现。对您的代码使用适当的错误处理技术。您的代码与 XML 文件有持续的通信。所以，如果你尝试第二次访问，如果我没记错的话，访问错误就会到来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T13:14:10.390

这是正常工作的最终 convert() 。感谢所有在这里帮助过我的人。我非常感谢您为帮助我付出的时间和精力。我希望我能接受上述两种解决方案。但我把我的一票投给你们两个。再一次感谢你。

```
private static void convert(object source, FileSystemEventArgs f)
{
    string FileName;
    FileName = f.FullPath;
    string FilePath;
    FilePath = f.Name;
    var watcher = source as FileSystemWatcher;
    string destinationFile = @"D:/GS/" + FilePath;
    System.Threading.Thread.Sleep(1000);
    if (Monitor.TryEnter(lockObject)) **
    {
        try
        {
            watcher.EnableRaisingEvents = false;
            XmlDocument xdoc = new XmlDocument();
            try
            {
                xdoc.Load(FileName);
                xdoc = null;
            }
            catch (XmlException xe)
            {
                xdoc = null;
                using (StreamWriter w = File.AppendText(FileName))
                {
                    Console.WriteLine(xe);
                    w.WriteLine("</title>");
                    w.WriteLine("</titleContent>");
                    Console.WriteLine("1st");
                }
            }
            System.Threading.Thread.Sleep(2000);
            XPathDocument myXPathDoc = new XPathDocument(new StreamReader(FileName, System.Text.Encoding.GetEncoding("windows-1256")));
            XslCompiledTransform myXslTrans = new XslCompiledTransform();
            myXslTrans.Load("D:/GS/xsl/test.xsl");
            XmlTextWriter myWriter = new XmlTextWriter(destinationFile, null);
            myWriter.Formatting = Formatting.Indented;
            myWriter.Indentation = 4;
            myXslTrans.Transform(myXPathDoc, null, myWriter);
            myWriter.Close();
            Console.WriteLine("2nd");

        }
        catch (Exception e)
        {
            Console.WriteLine("The process failed: {0}", e.ToString());
        }
        finally
        {
            Monitor.Exit(lockObject);
            watcher.EnableRaisingEvents = true;
            Console.WriteLine("Finally");
            GC.Collect();
            GC.WaitForPendingFinalizers();
            GC.Collect();
        }
    }
} 
```

}

# debugging - ocamltop 类似于 ocamldebug 中的“跟踪”指令

> ID：15833531
> 
> 赞同：0
> 
> 时间：2013-04-05T12:06:06.800
> 
> 标签：debugging, ocaml

ocamldebug 中是否有 ocamltop 的`trace`等效指令？

我需要使用 ocamldebug 因为我的项目有几十个文件并将它们加载到 ocamltop hard（加载顺序很重要等）。使用 ocamldebug，我可以只提供编译后的文件，它就可以工作。

现在我正在使用一些自定义标识函数来跟踪 ocamldebug 中的函数调用。IE。我有几个身份功能：

```
let id_some_fun_1 a p1 p2 = a p1 p2
let id_some_fun_2 a p = a p 
```

然后在我的代码中，我用这个函数包装我想要跟踪的函数，然后我设置断点。

正如您可能已经猜到的那样，这比仅仅运行要困难得多`#trace some_fun_1`。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:14:31.427

无论如何，我认为这`#trace`不是一个可靠的调试工具，但请注意，您提到的顶层的限制是可以克服的：您可以将`#load`指令以正确的顺序放入新`top.ml`文件中，然后`#use "top.ml";;`在顶层使用时想加载你的代码。

# windows - for 循环不增加 set i=0

> ID：15833532
> 
> 赞同：0
> 
> 时间：2013-04-05T12:06:08.793
> 
> 标签：windows, for-loop, cmd

我的小 cmd 脚本有问题。

```
set i=1
set tmp=0

for /F "tokens=*" %%A in (test.txt) do (
set /A i+=1
echo %i%=%%A
)
echo %i% 
```

我的问题是为什么循环中的行`echo %i%=%%A`给出这个输出

```
1=text one
1=text two
1=text three
4 
```

取而代之的是

```
2=text one
3=text two
4=text three
4 
```

感谢您的任何回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:18:36.560

好的，现在可以使用

```
set i=1
set tmp=0

setlocal enabledelayedexpansion
for /F "tokens=*" %%A in (test.txt) do (
set /A i+=1
echo !i!=%%A
)
echo %i% 
```

# xml - Xml 中的特殊字符

> ID：15833533
> 
> 赞同：0
> 
> 时间：2013-04-05T12:06:09.777
> 
> 标签：xml, special-characters

我必须从 Mysql 数据库开始创建一个 Xml 文件。我正在使用 php 脚本来生成 xml 文件。这是我用来生成我的 xml 文件的 php 代码部分：

```
// create a new XML document
$doc = new DomDocument('1.0', 'UTF-8');

// create root node
$root = $doc->appendChild($doc->createElement('rss'));
$root->setAttribute('version', '2.0');
$root->setAttribute('encoding', 'UTF-8');

// create children
while($row = mysql_fetch_assoc($result)) {
   // add node for each row
  $occ = $doc->createElement('item');
  $occ = $channelNode->appendChild($occ);

  // add a child node for each field

  foreach ($row as $fieldname => $fieldvalue) {

        if($fieldname =='description')   {

          $newcdata=$doc->createCDATASection($fieldvalue);
          $child = $doc->createElement($fieldname);
          $child = $occ->appendChild($child);
          $value = $doc->createTextNode($fieldvalue);
          $value = $child->appendChild($newcdata);
        }
        else {
          $child = $doc->createElement($fieldname);
          $child = $occ->appendChild($child);
          $value = $doc->createTextNode($fieldvalue);
          $value = $child->appendChild($value);
        }

      } // foreach

} // while 
```

这个程序运行良好。问题发生在数据库中有特殊字符要插入 XML 文件的情况下，在这种情况下，我尝试使用插入数据`CDATA`但它不起作用。那么，如何将特殊字符插入 Xml 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T15:41:58.687

It is not possible to insert [certain characters](http://www.w3.org/TR/xml/#charsets) into an XML document. The work-around is for both the sender and receiver to agree on how they will be encoded. Common options include Base64 and Ascii85\.

It might also be possible to do simple character substitution such as using the Unicode control pictures. For example, ␀ [\u2400](http://www.fileformat.info/info/unicode/char/2400/index.htm) for \0 and ␇ [\u2407](http://www.fileformat.info/info/unicode/char/2407/index.htm) for \b. That keeps it human readable but still would require the sender and receiver to agree.

# c++ - 在 Qt 中的表单之间传输数据

> ID：15833535
> 
> 赞同：1
> 
> 时间：2013-04-05T12:06:14.040
> 
> 标签：c++, qt

我有一个学校项目，我正在使用 Qt 来驱动我的 GUI 界面。我需要知道在不同形式的不同 .cpp 文件之间传输类对象向量的最佳方法或最简单方法。我正在考虑包含 .h 文件并制作一个指向向量的 setPointer 和 getPointer，但是有更好的方法吗？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-15T21:25:06.667

1.  假设您使用两种形式。`formA`和`formB`。
2.  创建一个信号和插槽`forma.cpp`

    公共插槽：void receiveData（QVectorobjects）；

    信号：无效发送数据（QVector）；

    对 做同样的事情`formb.cpp`。

3.  现在像这样连接formA和formB。

    `connect(formA, SIGNAL(sendData(QVector<MyClass>)), formB, SLOT((receiveData(QVector<MyClass>)));`

    `connect(formA, SIGNAL(receiveData(QVector<MyClass>)), formB, SLOT((MyClass(QVector<MyClass>)));`

4.  现在 formA 将在您编写时共享数据（对象集），`emit sendData(QVector() << objA << objB);`而 formB 将捕获它！

享受信号和插槽的魔力。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T12:14:34.923

您应该使用自定义信号和插槽。您的主窗口可以在每个表单之间连接信号和插槽。

这样，您的表单彼此独立（即不需要指针）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T13:07:36.910

Depending upon your usage, there can be at least two ways.

First is to create a public variable in your class (form) to which you can assign the current value of the vector (pointer) so that you can access it in that class.

Another option is to create a singleton class in the application and store the vector pointer inside that class. This will allow access to this class throughout the application.

Based on your requirement, if you want the vector to stay alive for the application life, you should opt the second option, otherwise opt the first option.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T12:19:12.220

首先，Qt 容器类是隐式共享的，这意味着您可以按值传递它们，并且只会发生浅拷贝。如果您尝试修改容器，则会创建一个新副本。所以在这种特殊情况下不需要使用指针。

然后，使用信号和槽来进行实际的数据传输——常见的模式是由父窗口小部件管理其子窗口小部件，而实际传递数据的通常是父类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T12:19:24.360

在 Qt 类之间传输数据的最佳方式是使用[信号/槽系统](http://qt-project.org/doc/qt-4.8/signalsandslots.html)。

请注意，如果您要传输类型不同于标准 C++ 和 Qt 的数据，您应该使用[qRegisterMetaType注册它的类型](http://qt-project.org/doc/qt-4.8/qmetatype.html#qRegisterMetaType)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-05T20:13:53.767

`extern`关键字呢？但是Qt的信号槽是安全的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-25T18:55:00.657

我最终使用了 extern 关键字。我研究了自定义信号和插槽，我认为这将是更好的方法，但考虑到时间和这是为了学校的事实，我现在采用了快速而肮脏的方式。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-05T21:04:18.473

使用[QVector](http://doc-snapshot.qt-project.org/4.8/qvector.html)或[QList](http://doc-snapshot.qt-project.org/4.8/qlist.html)或任意数量的[Qt 容器类](http://qt-project.org/doc/qt-4.8/containers.html)。您可以将迭代器传递给表单，或将引用 (QList::operator[]) 传递给表单，这样您就不会复制数据。

如果要传递整个向量，请将其作为参考传递。例如：

```
//pass the whole vector as for read-write
void doStuffOnMany(QList<MyClass>& listref) {}  //declaration
...
QList<MyClass> mylist;                          //usage
doStuffOnMany(mylist);

//read-only
void doStuffOnMany(const QList<MyClass>& listref) {}

//pass one portion of the vector for read-write
void doStuffOnOne(MyClass& classref) {}         //declaration
...
QList<MyClass> mylist;                          //usage
doStuffOnOne(mylist[0]); 
```

此外，Qt 容器类是隐式共享的，因此如果您需要良好的性能，您甚至不必传递对向量的引用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-05-28T00:59:03.480

这是一个简单的解释：

采取两种形式：

对话框窗口仪表板和传感器

在仪表板上：

```
#ifndef DASHBOARD_H
#define DASHBOARD_H

#include "sensor.h"
#include <QDialog>

namespace Ui {
class dashboard;
}

class dashboard : public QDialog
{
    Q_OBJECT

public:
    explicit dashboard(QWidget *parent = 0);

    QTimer *timer;

    ~dashboard();

public slots:
    void MyTimerSlot();

private slots:
    void on_pushButton_clicked();

private:
    Ui::dashboard *ui;
    double mTotal;
    sensor *snsr;
};

#include "dashboard.h"
#include "ui_dashboard.h"
#include <QDebug>
#include <QTimer>
#include <QMessageBox>

dashboard::dashboard(QWidget *parent) :
    QDialog(parent),
    ui(new Ui::dashboard)
{
    ui->setupUi(this);

    this->setWindowTitle(QString("dashboard"));
    // create a timer
    timer = new QTimer(this);

    // setup signal and slot
    connect(timer, SIGNAL(timeout()),
          this, SLOT(MyTimerSlot()));

    timer->stop();

    mTotal = 0;
    snsr = new sensor(this);
    // msecx
}

dashboard::~dashboard()
{
    delete ui;
}

void dashboard::on_pushButton_clicked()
{
    snsr->show();
}

void dashboard::MyTimerSlot()
{
    mTotal += 1;
    snsr->setValue(mTotal);
    ui->sensorlabel->setText(QString::number(mTotal));
} 
```

现在在传感器上：sensor.h

```
#ifndef SENSOR_H
#define SENSOR_H
#include <QTimer>

#include <QDialog>

namespace Ui {
class sensor;
}

class sensor : public QDialog
{
    Q_OBJECT

public:
    explicit sensor(QWidget *parent = 0);

    ~sensor();

public slots:
    void setValue(double value);

signals:
    void changeLabel();
    void valueChanged(double newValue);

private:
    Ui::sensor *ui;
    double mTotal;
};

#endif // SENSOR_H 
```

传感器.cpp

```
#include "sensor.h"
#include "ui_sensor.h"
#include "dashboard.h"

sensor::sensor(QWidget *parent) :
    QDialog(parent),
    ui(new Ui::sensor)
{
    ui->setupUi(this);

    this->setWindowTitle(QString("sensor"));

    connect(this, SIGNAL(valueChanged(double)), this, SLOT(changeLabel()));
}

void sensor::changeLabel()
{
    ui->sensorlabel->setText(QString::number(mTotal));
}

void sensor::setValue(double value)
{
    if (value != mTotal) {
        mTotal = value;
        emit changeLabel();
    }
}

sensor::~sensor()
{
    delete ui;
} 
```

# php - 致命错误：phpMyAdmin 中的执行时间超过了 30 秒

> ID：15833536
> 
> 赞同：14
> 
> 时间：2013-04-05T12:06:15.427
> 
> 标签：php, mysql, database, phpmyadmin

我有一个包含 650 万条记录的 MySQL 表。当我尝试从 phpMyAdmin 访问该表时，我得到：

> 致命错误：在第 1457 行的 C:\xampp-new\phpMyAdmin\libraries\display_tbl.lib.php 中超过了 30 秒的最大执行时间。

我只是想查看记录，我没有做任何可能导致错误的查询。

这个问题只在我的服务器上。而且我的本地机器包含的记录没有服务器那么多。

在我的`php.ini`我已经将最大执行时间设置为最大值。

如何修复此错误？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-07-13T08:20:51.633

添加这一行

```
$cfg['ExecTimeLimit'] = 6000; 
```

到**phpmyadmin/config.inc.php**

并更改**php.ini**和**my.ini**

*   post_max_size = 750M
*   upload_max_filesize = 750M
*   max_execution_time = 5000
*   最大输入时间 = 5000
*   memory_limit = 1000M
*   max_allowed_pa​​cket = 200M（在 my.ini 中）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-10-14T09:30:47.290

如果您在 apache 行的 xammp 控制面板上使用 xammp，请单击配置，然后单击打开 PHP(php.ini) 查找并将 max_execution_time=30 增加到 max_execution_time=600。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-05T12:09:22.603

+1 让我查找*十万*。对我来说，这看起来像是 PHP 超时，因为*默认超时是 30 秒*。增加 php.ini 中的设置并重新启动 apache 并查看超时是否仍然存在。

[http://www.php.net/manual/en/info.configuration.php#ini.max-execution-time](http://www.php.net/manual/en/info.configuration.php#ini.max-execution-time)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-04-03T13:03:26.117

你需要在 php.ini 中设置 max_execution_time

max_execution_time=6000

快乐编码

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-02-21T13:30:00.013

此解决方案已解决问题 将以下行置于脚本页面顶部和启动内存的查询之前：

```
ini_set('max_execution_time', 0);
set_time_limit(1800);
ini_set('memory_limit', '-1'); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-11-09T08:34:48.530

去：

xampp\phpMyAdmin\libraries\config.default.php

寻找：$cfg['ExecTimeLimit'] = 600;

将“600”更改为“6000”。

# c# - 打印缩放我的 WPF-GroupBox

> ID：15833537
> 
> 赞同：2
> 
> 时间：2013-04-05T12:06:18.087
> 
> 标签：c#, wpf, printing, groupbox

我正在尝试从我的 wpf 应用程序中打印出一些信息。我找到了一些代码来制作我想要打印的内容以适合一页并且它可以很好地完成这项工作。问题是，在我打印出我想要的内容后，该方法缩小了我的 wpf 控件，它是一个带有图表的组框。如何将 groupbox 的大小缩放回缩放之前的大小？

```
private void PrintUT_Click(object sender, RoutedEventArgs e)
    {
        PrintDialog printDlg = new System.Windows.Controls.PrintDialog();
        if (printDlg.ShowDialog() == true)
        {
            //get selected printer capabilities
            System.Printing.PrintCapabilities capabilities = printDlg.PrintQueue.GetPrintCapabilities(printDlg.PrintTicket);

            //get scale of the print wrt to screen of WPF visual
            double scale = Math.Min(capabilities.PageImageableArea.ExtentWidth / this.GBProsjektTimer.ActualWidth, capabilities.PageImageableArea.ExtentHeight /
                           this.GBProsjektTimer.ActualHeight);

            //Transform the Visual to scale
            this.GBProsjektTimer.LayoutTransform = new ScaleTransform(scale, scale);

            //get the size of the printer page
            Size sz = new Size(capabilities.PageImageableArea.ExtentWidth, capabilities.PageImageableArea.ExtentHeight);

            //update the layout of the visual to the printer page size.
            this.Measure(sz);
            this.Arrange(new Rect(new Point(capabilities.PageImageableArea.OriginWidth, capabilities.PageImageableArea.OriginHeight), sz));

            //now print the visual to printer to fit on the one page.
            printDlg.PrintVisual(this.GBProsjektTimer, "First Fit to Page WPF Print");
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:07:46.190

找到了答案！只需将 objecToPrint 替换为您的对象即可。在我的情况下，那将是`this.GBProsjektTimer.Width = double.Nan`

```
 objectToPrint.Width = double.NaN;
                objectToPrint.UpdateLayout();
                objectToPrint.LayoutTransform = new ScaleTransform(1, 1);
                Size size = new Size(capabilities.PageImageableArea.ExtentWidth, 
                                     capabilities.PageImageableArea.ExtentHeight);
                objectToPrint.Measure(size);
                objectToPrint.Arrange(new Rect(new Point(capabilities.PageImageableArea.OriginWidth, 
                                      capabilities.PageImageableArea.OriginHeight), size)); 
```

# javascript - 如何在javascript中更改JSON文件的编码

> ID：15833538
> 
> 赞同：2
> 
> 时间：2013-04-05T12:06:19.713
> 
> 标签：javascript, jquery, json, utf-16

我使用 Flash CS6 将动画导出到 spritesheet。这给了我 2 个文件：一个 png 和一个 json 文件。

这是 json 的简化版本：

```
{"frames": 
{
    "movieclip 10000":
    {
        "frame": {"x":676,"y":0,"w":164,"h":280},
        "rotated": false,
        "trimmed": false,
        "spriteSourceSize": {"x":0,"y":0,"w":164,"h":280},
        "sourceSize": {"w":164,"h":280}
    },
    …
    "movieclip 10004":
    {
        "frame": {"x":671,"y":280,"w":164,"h":280},
        "rotated": false,
        "trimmed": false,
        "spriteSourceSize": {"x":0,"y":0,"w":164,"h":280},
        "sourceSize": {"w":164,"h":280}
    }
},
"meta": {
    "app": "Adobe Flash CS6",
    "version": "12.0.2.529",
    "image": "boom1 8B4 def.png",
    "format": "RGBA8888",
    "size": {"w":1024,"h":1000},
    "scale": "1"
} 
```

这里没什么特别的。但是该文件以（根据 textwrangler）UTF-16 Little Endian 编码。这在 Chrome 中没有任何问题，但是在 FF 中解析 json 时出现“parsererror”。

当我更改文件的编码时，它在 Firefox 中没有任何问题。

**所以这是我的问题**：（如何）我可以使用javascript更改编码吗？

这个片段是我加载我的 json 的方式：

```
$.ajax({
    type: "POST",
    url: this.json,
    scriptCharset: "utf-8",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function(json) {
        that.jsonLoadHandler(json);
    },
    error: function (xhr, textStatus, errorThrown) {
        that.errorHandler(xhr, textStatus);
    }
}); 
```

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T08:24:18.307

而不是 contentType: "application/json; charset=utf-8" 只使用 contentType: "application/json;" 这可能会解决您的问题。

# java - 查找所有可能的组合 - java

> ID：15833543
> 
> 赞同：-3
> 
> 时间：2013-04-05T12:06:31.927
> 
> 标签：java, arrays, algorithm, combinations

我需要找到以下列方式给出的数据的组合，

```
jobs  #ofIntervals
----  -------------
4     1
1     2
3     2
0     3
2     3 
```

必须根据#ofIntervals 对给定的作业进行组合。输出可能的组合将影响职位的位置。如果有多个具有相同#ofIntervals 的工作，那么只有更改这些工作位置才会设置新工作。给定输入的可能结果应该是这样的，

```
combination-1: 4 1 3 0 2    // same as input

combination-2: 4 3 1 0 2    // here as job 3 and 1 have 2 #ofIntervals they make a new combination 

combination-3: 4 1 3 2 0    // here as job 2 and 0 have 3 #ofIntervals they make a new combination

combination-4: 4 3 1 2 0 
```

谁能帮我写一个代码或为此建议一个算法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T12:45:57.457

1.  将您的作业分成单独的集合，其中集合的每个成员都具有相同的“#of 间隔”值。
2.  对于每个集合，生成一个包含该集合所有[排列](http://en.wikipedia.org/wiki/Permutation)的集合。
3.  生成一个包含步骤 2 中集合的[笛卡尔积](http://en.wikipedia.org/wiki/Cartesian_product)的集合。

这个最终集合是您的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:41:24.100

我喜欢 mbeckish 写的答案，但这是我为实际完成工作而编写的代码：

```
import java.util.ArrayList;
import java.util.List;

public class Test
{
    public static void main(String[] args)
    {
        List<JobsInterval> jobsIntervalList = new ArrayList<JobsInterval>();

        jobsIntervalList.add(new JobsInterval(4, 1));
        jobsIntervalList.add(new JobsInterval(1, 2));
        jobsIntervalList.add(new JobsInterval(3, 2));
        jobsIntervalList.add(new JobsInterval(0, 3));
        jobsIntervalList.add(new JobsInterval(2, 3));

        printPossibleCombinations(jobsIntervalList);
    }

    public static void printPossibleCombinations(List<JobsInterval> list)
    {
        //Assumes the list is already in interval order.
        int currentInterval = -1;
        List<List<JobsInterval>> outerList = new ArrayList<List<JobsInterval>>(list.size());
        List<JobsInterval> innerList = null;

        //Loop through the list and group them into separate lists by interval.
        for (JobsInterval ji : list)
        {
            if (ji.interval != currentInterval)
            {
                if (null != innerList)
                    outerList.add(innerList);

                currentInterval = ji.interval;
                innerList = new ArrayList<JobsInterval>(list.size());
            }

            innerList.add(ji);
        }

        if (null != innerList)
            outerList.add(innerList);

        print(0, outerList, null);
    }

    public static void permute(StringBuilder value, List<JobsInterval> list, List<String> permutations)
    {
        //Check to see if this is the last recursive call
        if (0 == list.size())
        {
            permutations.add(value.toString());
        }
        else
        {
            List<JobsInterval> subList;

            for (int i = 0; i < list.size(); i++)
            {
                subList = new ArrayList<>(list);
                subList.remove(i);
                permute(new StringBuilder(null == value ? "" : value).append(list.get(i).jobs), subList, permutations);
            }
        }
    }

    public static void print(int index, List<List<JobsInterval>> list, StringBuilder value)
    {
        //Check to see if this is the last recursive call
        if (list.size() == index)
            System.out.println(value.toString());
        else
        {
            List<JobsInterval> intervalGroup = list.get(index);
            List<String> permutations = new ArrayList<String>();

            permute(null, intervalGroup, permutations);

            for (String permutation : permutations)
                print(index+1, list, new StringBuilder(null == value ? "" : value).append(permutation));
        }
    }

    private static class JobsInterval
    {
        public int jobs;
        public int interval;

        public JobsInterval(int j, int i)
        {
            jobs = j;
            interval = i;
        }

        public String toString()
        {
            return new StringBuilder().append('{').append(jobs).append(", ").append(interval).append('}').toString();
        }
    }
} 
```

# codeigniter - 覆盖 CodeIgniter Common.php

> ID：15833546
> 
> 赞同：7
> 
> 时间：2013-04-05T12:06:47.540
> 
> 标签：codeigniter

**在system/core/Common.php**下的**code** igniter中有一个方法叫**load_class** ()。

 ****我想覆盖这个方法。通常要覆盖代码点火器类，我会创建一个文件，例如**MY_Common.php**，但在这种情况下，**Common.php**是方法的集合，并且没有封装它们的类。

那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-05T12:24:54.670

内置的扩展机制没有官方支持的方式来做到这一点。考虑一些其他方式来实现你的目标。

**然而**，里面的函数`Common.php`都被包裹在一个`if`检查函数是否已经存在的内部，所以你可以执行以下操作：

1.  `MY_Common.php`在项目中的某处创建您的放置（也许`application/core/`反映其他类似的扩展）
2.  `index.php`在项目的根目录中打开您的文件
3.  在结束行`include APPPATH.'core/MY_Common.php';` **之前**插入
    `require_once BASEPATH.'core/CodeIgniter.php';`

现在，如果您有一个`load_class`功能，`MY_Common.php`它将影响原始版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-05T08:48:50.140

正确/官方的方法是将核心通用功能覆盖到 ie 中。`common_helper.php` `application/helpers`并设置在`config/autoload.php`****

# jsf-2 - JSF - 富树复选框

> ID：15833548
> 
> 赞同：0
> 
> 时间：2013-04-05T12:06:50.693
> 
> 标签：jsf-2

我需要有关 JSF 中的复选框树的帮助，基本上我已经创建了一个 JSF 复选框树。选择节点树将选中子节点的复选框，选中子节点的复选框将取消选中父节点。

**面临**的问题：现在清除所有复选框后，如果树被折叠和展开，则子树节点被选中。XHTML 片段：

```
 <rich:treeNode type="MARKET" iconCollapsed="#{MarketZone.icon}" iconExpanded="#{MarketZone.icon}" id="marketTreeID"  >
                <h:selectBooleanCheckbox id="selMarketId"  value="#{bUserMgt.marketTreeCheckMap[MarketZone.id]}" onclick="selectAllZonesForMarket(this)">
                <a4j:ajax listener="#{bUserMgt.selectedMarketValue}"/></h:selectBooleanCheckbox>
                 <h:outputText  value="#{MarketZone.name}" />
           </rich:treeNode>

            <rich:treeNode type="ZONE" iconCollapsed="#{MarketZone.icon}" iconExpanded="#{MarketZone.icon}" id="zoneTreeID"  >
               <h:selectBooleanCheckbox id="selzoneId"  value="#{bUserMgt.zoneTreeCheckMap[MarketZone.id]}" onclick="deselectAllZonesForMarket(this)" >
                <a4j:ajax listener="#{bUserMgt.selectedZoneValue}"/>
               </h:selectBooleanCheckbox>
                <h:outputText  value="#{MarketZone.name}"/>
           </rich:treeNode>         
        </rich:tree> 
```

selectAllZonesForMarket() 和 deselectAllZonesForMarket() ：用于选择和取消选择复选框的 Javascript 代码函数

你能帮我知道我错过了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T13:51:23.423

在树表中使用 selectionMode="checkbox" 它可以根据您在主要面孔中的要求正常工作。去扔链接： http: [//www.primefaces.org/showcase/ui/treeTableCheckbox.jsf](http://www.primefaces.org/showcase/ui/treeTableCheckbox.jsf)

# ios - popToViewController 和内存管理

> ID：15833555
> 
> 赞同：1
> 
> 时间：2013-04-05T12:07:16.030
> 
> 标签：ios, objective-c, uiview, uinavigationcontroller, poptoviewcontroller

我在第三个使用该语句的导航控制器中推入了三个视图控制器

`[self.navigationController popToViewController:(Main_View*) mainViewObj animated:YES];`

它首先将我直接带到我指定的控制器。我已经完成了一些编码以从所有视图控制器中的 NSMutableDictionary in 方法中删除对象`viewWillDisappear`，我尝试使用断点进行调试，但它从未出现`viewWillDisappear`，它直接将我带到**Main_View**。我应该担心从字典中删除对象或释放它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:31:17.333

其他视图控制器不会调用该`viewWillDisappear:`方法，因为当您将视图控制器推到它们之上时它们已经消失了。所以基本上，`viewWillDisappear:`已经在较早的时候要求他们。再次调用它是没有意义的，因为它们一开始是不可见的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:52:14.567

您可以尝试在 AppDelegate 中保留对 NSMutableDictanories 的弱引用，然后在 mainViewController 中的 poptoviewcontroller 获取它们之后，查看它们是否为 nil，如果不是，则可以使用该引用从主视图中的字典中删除对象.

# performance - 优化 app.yaml

> ID：15833558
> 
> 赞同：3
> 
> 时间：2013-04-05T12:07:28.523
> 
> 标签：performance, google-app-engine, python-2.7

关于响应时间、实例小时数和缓存效率，以下哪种配置对于 Python 2.7 上的 Google App Engine 最有效：

**配置 1**

应用程序.yaml：

```
handlers:

- url: /db/script/.*
  script: db/script/crud.app
  secure: always

- url: /db/state/.*
  script: db/state/crud.app
  secure: always

- url: /db/var/.*
  script: db/var/crud.app
  secure: always 
```

**或配置 2**

应用程序.yaml：

```
handlers:

- url: /.*
  script: main.app
  secure: always 
```

使用 main.py：

```
app = webapp2.WSGIApplication([
    ('/db/script/.*', db.Script.Crud),
    ('/db/state/.*', db.State.Crud),
    ('/db/var/.*', db.Var.Crud)
]) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T08:12:11.343

关于性能（响应时间、实例小时数），请看这里：

*   [在 app.yaml 中定义路由与在 AppEngine 中的 WSGIApplication 中定义一个大型映射相比，是否有性能提升？](https://stackoverflow.com/questions/3025921/is-there-a-performance-gain-from-defining-routes-in-app-yaml-versus-one-large-ma)

关于缓存，这取决于您正在考虑哪种缓存：

*   当您使用 NDB 时，数据存储缓存会自动发生，因此路由设置应该无关紧要。
*   浏览器缓存取决于您使用的 Web 框架（例如 webapp2）。您还可以为[静态文件](https://developers.google.com/appengine/docs/python/config/appconfig#Static_File_Handlers)定义特定的路由。
*   Memcached 在您的代码中处理，因此不依赖于您的路由设置。

# .net - 是否可以在 VS 插件中加载/卸载项目

> ID：15833580
> 
> 赞同：1
> 
> 时间：2013-04-05T12:08:46.730
> 
> 标签：.net, add-in

我想为 VS 编写一个加载项，在解决方案中获取所选项目，并卸载所有依赖它的项目。是否可以？

我知道有可能使用宏来实现，但我想使用插件来实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:14:05.240

这是解决方案

```
 private const string UnloadProjectCommandName = "Project.UnloadProject";
    private const string ReloadProjectCommandName = "Project.ReloadProject";

    public void Exec(string commandName, vsCommandExecOption executeOption, ref object varIn, ref object varOut, ref bool handled)
    {
        handled = false;
        if (executeOption == vsCommandExecOption.vsCommandExecOptionDoDefault)
        {
            if (commandName == "Build7.Connect.Build7")
            {
                handled = true;
                var solution = (((SolutionClass)(_applicationObject.Solution)));

                var solutionExplorer = _applicationObject.Windows.Item(Constants.vsWindowKindSolutionExplorer);
                solutionExplorer.Activate();

                var solutionHierarchy = (UIHierarchy)solutionExplorer.Object;
                string solutionName = solution.Properties.Item("Name").Value.ToString();

                var projects = solution.Projects;
                foreach (Project project in projects)
                {
                    var projPath = solutionName + "\\" + project.Name;
                    var obj = solutionHierarchy.GetItem(projPath);
                    obj.Select(vsUISelectionType.vsUISelectionTypeSelect);
                    _applicationObject.ExecuteCommand(UnloadProjectCommandName);

                }

                foreach (Project project in projects)
                {
                    var projPath = solutionName + "\\" + project.Name;
                    var obj = solutionHierarchy.GetItem(projPath);
                    obj.Select(vsUISelectionType.vsUISelectionTypeSelect);
                    _applicationObject.ExecuteCommand(ReloadProjectCommandName);

                }
            }
        }
    } 
```

感谢杰里米詹姆森的[帖子](http://blogs.msdn.com/b/jjameson/archive/2009/03/11/visual-studio-macros-for-unloading-reloading-projects.aspx)

# php - 为单个数据库行设置字段值

> ID：15833588
> 
> 赞同：0
> 
> 时间：2013-04-05T12:09:07.810
> 
> 标签：php, mysql, cakephp, model

我正在尝试更新我`profiles`表上的一行以将用户个人资料图片重置为默认值`user.png`。我的控制器中有以下操作：

```
public function deleteProfilePicture() {
    $this->layout = 'ajax';

    // First find the profile ID from the user ID
    $profileId = $this->Profile->find('first', array(
        'condition' => array('User.id' => $this->Auth->user('id')),
        'fields' => array('Profile.id'),
        'recursive' => -1
    ));

    $this->Profile->id = $profileId['Profile']['id'];
    $this->Profile->saveField('picture', 'user.png', false);
} 
```

但是，当我请求 URL ( `/profile/deleteProfilePicture`) 时，我没有收到任何错误，但数据库行没有更新。我已确保使用当前配置文件 ID 使用`debug($profileId)`.

这里可能出了什么问题？

编辑：的返回值`saveField()`：

```
array(
    'Profile' => array(
        'id' => '36',
        'modified' => '2013-04-05 14:16:57'
    )
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T05:15:26.393

我在您的代码中没有看到任何错误。尝试使用它查看正在执行的查询

```
$log = $this->Model->getDataSource()->getLog(false, false);
  debug($log); 
```

如果您发现有问题，请根据结果更改您的查询。

或者尝试使用这个

```
$data['Profile']['id']=$profileId['Profile']['id'];
$data['Profile'['picture']='user.png';
$this->Profile->save($data); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T12:35:23.880

尝试

`$this->Profile->id = $profileId['Profile']['id']; $this->Profile->set(array( 'picture' => 'user.png' )); $this->Post->save();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T13:59:33.557

尝试这个

```
$this->Profile->read(null, $profileId['Profile']['id']);
$this->Profile->saveField('picture', 'user.png', false); 
```

为什么将验证设置为假？如果你忽略它，你会得到一个错误吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T12:19:43.033

如果将 debug 设置为 2，您可以看到正在执行的 SQL，看看您的更新是否真的触发了。

# php - 更新数据库中的会话字段

> ID：15833592
> 
> 赞同：0
> 
> 时间：2013-04-05T12:09:15.150
> 
> 标签：php, sql, database, types, field

我有一个数据库。如果之前没有构建，我已经创建了一个只包含 DB 中的一行的表。

为什么它只有 1 行是我只是用它来保存一些信息。

有一个字段`TYPE NVARCHAR(100)`我想用它来**存储 session id**，这让我很头疼：

似乎我什至无法正确地插入（我`phpmyadmin`用来检查，它是空白的）和更新（语法错误...）它使用从 获得的会话 id `session_id()`，它作为`string`.

这是与我的操作相关的代码部分：

```
//uamip,uamport is in URL;I use $_GET[]

$_SESSION[uamport] = $_GET['uamport'];

$_SESSION[uamip] = $_GET['uamip'];

**$_SESSION[sid] = session_id();**

//construct

$sql="CREATE TABLE trans_vector(

        `index` INT NOT NULL AUTO_INCREMENT, 
        `sid` NVARCHAR(100),
        `uamip` CHAR(15),
        `uamport` INT,
        PRIMARY KEY (`index`)
      )" ;

mysql_query($sql);

//insert(first time, so not constructed)

$sql="INSERT INTO trans_vector (sid,uamip,uamport) VALUES(

       '$_SESSION[sid]',
       '$_SESSION[myuamip]',
       '$_SESSION[myuamport]'
     )";

mysql_query($sql);

//update(from 2nd time and later, table exists, so I want to update the sid part)

$sql="UPDATE trans_vector SET sid="**.**$_SESSION[sid];

mysql_query($sql) 
```

现在，当我使用 phpmyadmin 检查`sid field`after`INSERT`或`UPDATE`时，**它是空白的**；

但如果我这样做：

```
$vector=mysql_fetch_array(mysql_query("SELECT TABLES LIKE 'trans_vector'")); 
```

，`echo $vector[sid]`然后打印在网页上。

**另一个问题是**：

使用`UPDATE`上面的语句，我总是得到这样的错误：

“未知列xxxxxx....（返回了一些会话ID，似乎总是**先**翻译它并将其放入SQL语句中，**将其视为列NAME**这不是我想要的！）”

我在 CREATE 语句中尝试了一些 TYPE，以及 UPDATE 语句的许多语法（一切！！！），但它总是给出这个错误。

我正在处理`'`包含一个变量的字符串表示，其中后者的值实际上是我想要的......也许问题是由 CREATE 中的类型和`UPDATE`语句中的字符串表示引起的？

`CAST()`陈述应该对我有帮助吗？

希望你能帮我处理这个问题......并可能列出一些关于此类问题的真实参考`PHP`？

非常感谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T12:31:21.063

```
$insert = "INSERT INTO trans_vector (`sid`, `uamip`, `uamport`) VALUES(

       '".$_SESSION["sid"]."',
       '".$_SESSION["myuamip"]."',
       '".$_SESSION["myuamport"]."'
     )"; 
```

这应该至少解决一些警告，如果不是错误的话。

和更新...

```
$update = "UPDATE trans_vector SET `sid`='".$_SESSION["sid"]."';"; 
```

关于您的代码的注意事项：数组值必须使用运算符 '.' 放入字符串中。并且不能直接插入。数组索引必须是字符串（注意 "）或整数。

列名周围应该有 ``。要使用 SQL 插入字符串，您必须将字符串放入 ''s，以便解析器知道什么是字符串以及什么列名。如果没有 ' 的解析器，则假设您正在陈述一列。

对于 mysql_escape_string，我假设您在将数据存储到会话之前处理了它。如果没有这些，您可能会获得不需要的 SQL 注入。如果您没有这样做，您可以这样做（在创建查询之前）：

```
foreach($_SESSION as $key => $value)
    $_SESSION[$key] = mysql_escape_string($value); 
```

或在创建查询时手动转义字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:37:46.310

至于更新语句，很明显缺少撇号。当您想将字符串值插入数据库时​​，您总是需要撇号。此外，您应该使用`mysql_real_escape_string`. 但是，我认为标准`mysql`已被弃用，并且已在较新版本的 PHP 中被删除，以支持 MySQLi 和 PDO。因此，您应该尽快切换到 MySQLi 或 PDO。

在`$_SESSION`. 否则 PHP 将尝试使用名称查找常量，`sid`然后回退到字符串`'sid'`。`sid`如果曾经真的有一个叫做定义的常量，你就会遇到麻烦。

这里，mysql库中更正的更新语句：

```
$sql = "UPDATE trans_vector SET sid='" . mysql_real_escape_string($_SESSION['sid']) . "'"; 
```

更好的是：

```
$sql = "UPDATE `trans_vector` SET `sid`='" . mysql_real_escape_string($_SESSION['sid']) . "'"; 
```

使用反引号使 MySQL 清楚这是一个**列名**。有时您的列名被称为 SQL 中的保留关键字。然后你将**需要**撇号。一个常见的示例是`order`为条目序列调用的列。

# java - Intent.createChooser android 二维码阅读器

> ID：15833596
> 
> 赞同：3
> 
> 时间：2013-04-05T12:09:24.790
> 
> 标签：java, android, android-intent, qr-code, zxing

我希望用户从他安装的应用程序中选择一个 QR 阅读器。这可以通过使用 Intent.createChooser 来完成。使用 QR 阅读器拍照时，应将 QR 码发送回我的应用程序。这是我迄今为止尝试过的：

```
 Intent intent = new Intent(Intent.ACTION_SEND);
            intent.setType("text/plain");
            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET);
            intent.putExtra("SCAN_MODE", "QR_CODE_MODE");

            String title = (String) getResources().getText(R.string.chooser_title);

            Intent chooser = Intent.createChooser(intent, title);

            startActivityForResult(chooser, CUSTOM_REQUEST_QR_SCANNER); 
```

扫描仪无法正确启动，它只显示一个示例 QR 码。我有一种感觉 intent.setType("text/plain") 可能是错误的？什么类型的二维码阅读器？或者我如何正确启动 QR 阅读器？

完成 QR 应用程序后，我还有一个 ActivityResult：

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent intent) {
    if (requestCode == CUSTOM_REQUEST_QR_SCANNER) {

        Log.d(TAG, "QR activity complete");
                        //Successful scan
                        if (resultCode == RESULT_OK) { 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T12:57:28.007

代替

```
intent.setType("text/plain"); 
```

和

```
intent.setType("com.google.zxing.client.android.SCAN"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T12:58:41.917

按照这个[Demo](https://github.com/commonsguy/cw-omnibus/tree/master/Camera/ZXing)并在你的项目中包含“ **android-integration.jar** ”它也有这个 .jar 文件......你也可以从[这里](https://code.google.com/p/zxing/downloads/list)下载 Zxing 库，它将在你的应用程序中使用可用的 QR 码扫描仪。还有其他方法，只需先使用它，您也会通过 R 和 D 了解其他方法。

**或者**

用这个：

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Button btn_scan =(Button) findViewById(R.id.btn_scan);
        btn_scan.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                 IntentIntegrator integrator = new IntentIntegrator(MainActivity.this);
                  integrator.initiateScan(IntentIntegrator.QR_CODE_TYPES);

            }
        });
    }

    @Override
      public void onActivityResult(int requestCode, int resultCode, Intent intent) {
        IntentResult result = IntentIntegrator.parseActivityResult(requestCode, resultCode, intent);
        if (result != null) {
          String contents = result.getContents();
          if (contents != null) {
            showDialog("Found QRcode", result.toString());
          } else {
            showDialog("NO QRcode Found", "The user gave up and pressed Back");
          }
        }
    }

    private void showDialog(String title, CharSequence message) {
        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setTitle(title);
        builder.setMessage(message);
        builder.setPositiveButton("OK", null);
        builder.show();
      } 
```

并在项目属性 java 构建路径中包含相同的 .jar 文件。[您可以从此处](https://code.google.com/p/zxing/downloads/list)相同的链接下载 .jar 。

# highcharts - 日期轴上的绘图线：（中间值）.concat 不是函数

> ID：15833600
> 
> 赞同：0
> 
> 时间：2013-04-05T12:09:28.953
> 
> 标签：highcharts, highstock

我正在尝试将 plotLine 添加到我的图表中，但总是出现此错误：

```
(intermediate value).concat is not a function 
```

我准备了一个 jsfiddle: (intermediate value).concat is not a function

任何建议，我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:15:43.873

请看示例： http: [//jsfiddle.net/ge3fg/](http://jsfiddle.net/ge3fg/) [http://jsfiddle.net/47zgw/](http://jsfiddle.net/47zgw/)

```
 plotLines: [{
            color: '#FF0000',
            width: 2,
            value: 5.5
        }] 
```

# r - 删除千位分隔符

> ID：15833605
> 
> 赞同：5
> 
> 时间：2013-04-05T12:09:38.353
> 
> 标签：r, excel, decimal, apply, separator

我导入了一个 Excel 文件并得到了这样的数据框

```
structure(list(A = structure(1:3, .Label = c("1.100", "2.300", 
"5.400"), class = "factor"), B = structure(c(3L, 2L, 1L), .Label = c("1.000.000", 
"500", "7.800"), class = "factor"), C = structure(1:3, .Label = c("200", 
"3.100", "4.500"), class = "factor")), .Names = c("A", "B", "C"
), row.names = c(NA, -3L), class = "data.frame") 
```

我现在想将这些转换`chars`为`numeric`甚至`integer`. 但是，点字符 ( `.`) 不是十进制符号，而是“千位分隔符”（它是德语）。

我将如何正确转换数据框？

我试过这个：

```
df2 <- as.data.frame(apply(df1, 2, gsub, pattern = "([0-9])\\.([0-9])", replacement= "\\1\\2"))

df3 <- as.data.frame(data.matrix(df2)) 
```

但是，`apply`似乎将每一列转换为因素列表。我可以阻止`apply`这样做吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-05T12:13:40.507

你可以使用这个：

```
sapply(df, function(v) {as.numeric(gsub("\\.","", as.character(v)))}) 
```

这使 ：

```
 A       B    C
[1,] 1100    7800  200
[2,] 2300     500 3100
[3,] 5400 1000000 4500 
```

这会给你一个对象，但如果你愿意`matrix` ，你可以把它包装进去。`data.frame()`

请注意，原始数据中的列不是字符而是因子。

* * *

编辑：或者，`data.frame()`您可以这样做以直接将结果作为`data.frame`：

```
# the as.character(.) is just in case it's loaded as a factor
df[] <- lapply(df, function(x) as.numeric(gsub("\\.", "", as.character(x)))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T12:14:47.723

我想我刚刚找到了另一个解决方案：

有必要使用`stringsAsFactors = FALSE`.

像这样：

```
df2 <- as.data.frame(apply(df1, 2, gsub, pattern = "([0-9])\\.([0-9])", replacement= "\\1\\2"), stringsAsFactors = FALSE)

df3 <- as.data.frame(data.matrix(df2)) 
```

# c - 产生/输出时钟脉冲（C代码）

> ID：15833608
> 
> 赞同：1
> 
> 时间：2013-04-05T12:10:00.290
> 
> 标签：c, clock, avr, winavr

我使用的是 Ethernut 2.1 B，我需要一个 C 程序，它在定时器 1 输出 B 上输出时钟信号，换句话说，在输出 OCIB 上。时钟信号的频率应为 1.0 kHz。

任何人都知道如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:13:37.983

它似乎基于[Atmel ATmega 128](http://www.atmel.com/devices/atmega128.aspx?tab=parameters)，因此请阅读该 CPU 的数据表以了解如何对定时器硬件进行编程。

不确定该微控制器是否支持直接驱动定时器的输出，如果不支持，您将不得不在中断服务程序的软件中执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T20:29:57.307

您需要查看`COM`计时器的位。例如，对于 Timer0（8 位），这些`COM`位在`TCCR0`寄存器中设置。您可能感兴趣的设置是

```
TCCR0 |= (0<<COM1)|1<<COM0); // Toggle OC0 on compare match 
```

当定时器达到指定值时，这将切换 OC0 (p​​in14) 线。

您使用哪个计时器取决于您需要的精度：显然 16 位计时器可以为您提供比 8 位计时器更精确的时间分辨率。

特定频率 (1Khz) 的寄存器设置取决于芯片的时钟速度，以及您使用的定时器：定时器使用预先调整的通用时钟信号（有关可能值，请参见数据表的表 56）。这意味着预分频器设置将取决于您的时钟速度以及您想要计数的高度。为了获得最大的精度，您将希望计数尽可能高，这意味着与定时器最大值兼容的最低预分频器设置。

至于从哪里开始，一般来说，阅读数据表是一个好地方，但谷歌搜索“AVR 计时器”也很有帮助。

# gwt - Vaadin Touchkit 或 mgwt

> ID：15833610
> 
> 赞同：5
> 
> 时间：2013-04-05T12:10:05.210
> 
> 标签：gwt, vaadin, mgwt, vaadin-touchkit

我正在评估使用 GWT 和 Apache Cordova / PhoneGap 创建移动混合应用程序的可能性。我已经用 mgwt 构建了一个小型原型并喜欢它，但我想在开始项目之前研究其他一些可能性。因此，我查看了 Vaadin 及其 AddOn Touchkit。

我有以下问题：

1.  是否可以在不需要永久服务器连接的客户端应用程序中使用 Vaadin Touchkit 插件？

    在文档的[移动章节](https://vaadin.com/book/vaadin7/-/page/mobile.html)中，显示了一个示例，它是一个服务器端应用程序，据我了解，因此每个 UI 事件都需要一个服务器连接。如果我错了，请纠正我，我没有使用 Vaadin 的经验。

2.  “普通”GWT 应用程序和客户端 Vaadin 应用程序之间有什么区别吗？

3.  使用 Vaadin Touchkit 代替 mgwt 有什么好处吗？

4.  一般来说，Vaadin Touchkit 可以与 mgwt 相媲美，如果可以，主要区别是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-04T09:29:07.240

1.  您可以构建离线工作的 Vaadin TouchKit 应用程序。“停车演示”显示：[http](http://demo.vaadin.com/parking/) ://demo.vaadin.com/parking/ （这里的源代码：[https](https://github.com/vaadin/parking-demo) ://github.com/vaadin/parking-demo ）默认情况下，应用程序默认在线，但对于应用程序使用离线（仅限客户端）方法的数据输入。

2.  如果您正在构建客户端 Vaadin 应用程序，您仍将使用 TouchKit 小部件。在第 3 版之前，TouchKit 小部件一直沿用 iOS 原生小部件，但 v4 引入了更多与设备无关的新样式，也更适合 Android 设备。

3.  然而，Vaadin TouchKit 最显着的区别（如果您愿意，也是优势）是默认的服务器端编程方法。构建移动优化的 Web 应用程序非常快 - 特别是如果您已经拥有现有的 Java Web 应用程序和业务逻辑。对于客户端应用程序，明显的区别在于 Touchkit 和 mgwt 小部件的外观。

4.  通常这也归结为：如果您可以让应用程序的某些部分在线运行（服务器上的数据）并且只需要应用程序的某些部分需要离线模式，Vaadin TouchKit 非常快速高效构建体面的应用程序的方法。另一方面，mgwt 让您可以直接启动仅限客户端的应用程序，并且可能对此进行了更好的优化。

您已经发现两者都受到 HTML5 应用程序沙盒的影响。虽然相机和位置 API 可用，但仍然需要像 phonegap 这样的解决方案才能真正与设备集成并匹配原生应用程序。

# asp.net - 如何在asp.net中设置asp.net默认主题

> ID：15833611
> 
> 赞同：1
> 
> 时间：2013-04-05T12:10:14.543
> 
> 标签：asp.net, .net, cookies, themes

我想为我的项目设置一个默认主题。

我有一个现有项目，其中包含多个主题并且运行正常。为了设置默认主题，我在现有项目中做了以下事情-

**内容页面（cs文件）**

```
protected override void OnPreInit(EventArgs e)
{
    HttpCookie cookie = new HttpCookie("Theme", "default");
    cookie.Expires = DateTime.Now.AddDays(30);
    Response.Cookies.Add(cookie);
    base.OnInit(e);
    if (Request.Cookies["Theme"] == null)
    {
        Page.Theme = "default";
    }
    else
    {
        Page.Theme = Request.Cookies["Theme"].Value;
    }
} 
```

即使我在 web.config 文件中写了以下内容

```
<pages theme ="default" /> 
```

但即使在尝试了所有这些之后，主题还是像以前在现有项目中设置的那样具有绿色价值，我不明白我应该在哪里进行更多更改。

我检查了

*   母版页
*   内容页
*   网络配置

是否有任何其他文件或任何其他方式设置主题？

# java - 不确定这是否合适——从另一个端点调用 Spring 端点

> ID：15833612
> 
> 赞同：0
> 
> 时间：2013-04-05T12:10:15.147
> 
> 标签：java, spring, rest

我有办法做到这一点，是否合适？我需要从不同控制器中的端点返回的数据。我会在 java 代码中创建一个 HTTP 请求吗？

请告知这是否是一个合适的问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:22:57.650

您可能需要考虑将数据*检索*和来自当前端点的数据*表示分离为两个不同的类。*完成后，您可以轻松地让两个 Spring 控制器共享相同的数据源。其中一个是您当前的 Spring 控制器，另一个是新的。

在同一个应用程序中执行从一个 Spring 控制器到另一个 Spring 控制器的 HTTP 请求会引入大量开销和复杂性。我会尽量避免这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:22:34.820

正确的做法是在需要数据的控制器中调用为控制器生成数据的服务。

我希望您已将项目构建为[MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)。如果没有，你应该在做任何其他事情之前解决这个问题。

# asp.net-mvc - 在 ASP.NET MVC4 中检测 IE8

> ID：15833613
> 
> 赞同：5
> 
> 时间：2013-04-05T12:10:16.760
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我正在寻找如何检测`IE7`和`IE8`浏览器`MVC4`，如何做到这一点？

我找到了该属性`Request.Browser`，但它没有提供有关浏览器的任何信息。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-05T12:19:37.227

我建议你使用 Contains 方法`Request.UserAgent`

```
if (Request.UserAgent.Contains("MSIE 7.0"))
{
    // Internet Explorer 7
}
else if (Request.UserAgent.Contains("MSIE 8.0"))
{
    // Internet Explorer 8
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-26T13:41:49.117

如果您想要 <= 8，则另一种选择：

```
Request.Browser.Browser == "IE" && Request.Browser.MajorVersion <= 8; 
```

# gwt - 在 Gwt 中，如何使复选框的文本变为粗体？

> ID：15833621
> 
> 赞同：2
> 
> 时间：2013-04-05T12:10:47.043
> 
> 标签：gwt, checkbox, fonts, font-face

在 GWT 中，如何使复选框的文本变为粗体？， CheckBox 中没有 setFont

```
CheckBox boldCheckBox=new CheckBox("ok");

boldCheckBox.setFont()??? 
```

有谁知道怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T12:24:29.523

Google 似乎建议尽可能在 GWT 中使用 CSS。

创建复选框时使用类似的东西：

```
CheckBox boldCheckBox = new CheckBox("ok");
boldCheckBox.addStyleName("cbstyle"); 
```

然后把它放在你的css文件中：

```
.cbstyle {
    font-weight: bold;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T12:13:50.140

您可以使用 CCS：
您必须使用 CCS 类并在复选框中调用该类，或者您也可以使用内联 CCS。

```
font-weight: bold; 
```

或者，您可以使用 Baadshah 建议的方式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T12:14:51.010

你可以做

```
CheckBox chk = new CheckBox();
chk.getElement().getStyle().setFontSize(14, Unit.PT); 
```

我推荐这个以获得更多[可能性](http://blog.francoismaillet.com/?p=68)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-23T08:22:59.690

尽管您可以像其他人提到的那样通过**CSS**来做到这一点，但还有另一种更简单的方法：

```
CheckBox boldCheckBox=new CheckBox("ok");
boldCheckBox.getElement().getStyle().setFontWeight(FontWeight.BOLD); 
```

# r - for循环中的错误

> ID：15833622
> 
> 赞同：-2
> 
> 时间：2013-04-05T12:10:48.083
> 
> 标签：r

```
k<-21;

for(i in 5:k)
{
pharma[,i][pharma[,i]=="#N/A"]<- NA
pharma[,i][pharma[,i]=="NM"]<- NA
num<-sum(is.na(pharma[,i]))
n=1-num/length(pharma[,i])

if(n<0.8) {
rm(pharma[,i])
Else n=0
}
} 
```

基本上试图用 NA 替换列并删除那些有太多 NA 的列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T12:20:43.940

您没有告诉我们代码创建的错误。但有几点观察：

*   R 区分大小写。`Else`不一样`else`也不`Else`正确
*   您不要`if`在 . 之前关闭语句`else`。
*   无需显式循环列

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T12:29:02.317

你可能想要类似的*东西*

```
## extract the columns to manipulate
pp <- pharma[,5:21]
## set relevant values to NA
pp <- lapply(pp,function(x) x[x %in% c("#N/A","NM")] <- NA)
## estimate fraction NA and test
badcols <- colMeans(is.na(pp))>0.2
## remove bad columns
pp <- pp[,!badcols]
## put the manipulated stuff back together with the original structure
pharma <- cbind(pharma[,1:4],pp) 
```

但如果没有可重复的例子，很难准确地说出。

# yii - 避免在 YII Admin 页面中列出所有空搜索记录

> ID：15833626
> 
> 赞同：0
> 
> 时间：2013-04-05T12:10:58.827
> 
> 标签：yii

在 YII 管理页面 (CRUD) 中，默认情况下，在所有字段为空的情况下搜索时会显示该表的所有记录。

但我需要避免使用默认列表。相反，需要在过滤器文本框中输入一些数据。然后只有搜索结果应该显示基于输入的结果。否则不应显示任何记录。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:15:00.910

在`search`您的模型的函数中，用添加相同条件的`$criteria->compare(....`方法[`CDbCriteria`](http://www.yiiframework.com/doc/api/1.1/CDbCriteria)替换。如果属性为空，该[`compare`](http://www.yiiframework.com/doc/api/1.1/CDbCriteria#compare-detail)方法是唯一不向条件添加条件表达式的方法。

# quickbooks - 如何使用 ListIdSet 编写 ItemQuery？

> ID：15833629
> 
> 赞同：1
> 
> 时间：2013-04-05T12:11:17.123
> 
> 标签：quickbooks, intuit-partner-platform

我需要检索多个 Id 的项目信息，我正在使用 ItemQuery 使用下面的代码，但它给出的错误是“{”类型为“Intuit.Ipp.Data”的选择标识符“ItemsElementName”的无效或缺失值。 Qbd.ItemsChoiceType4[]'."}"。

请建议是否有人对如何将 ListIdSet 用于 ItemQuery 有任何想法。

```
List<Intuit.Ipp.Data.Qbd.IdType> ids = new List<Intuit.Ipp.Data.Qbd.IdType>();
        ids.Add(new Intuit.Ipp.Data.Qbd.IdType() { Value = "123460", idDomain = Intuit.Ipp.Data.Qbd.idDomainEnum.NG });
        ids.Add(new Intuit.Ipp.Data.Qbd.IdType() { Value = "789100", idDomain = Intuit.Ipp.Data.Qbd.idDomainEnum.NG });
        ids.Add(new Intuit.Ipp.Data.Qbd.IdType() { Value = "111213", idDomain = Intuit.Ipp.Data.Qbd.idDomainEnum.NG });

        Intuit.Ipp.Data.Qbd.ItemQuery qbdQuery = new Intuit.Ipp.Data.Qbd.ItemQuery();
        List<Intuit.Ipp.Data.Qbd.Item> itemQueryResult = null;
        qbdQuery.Items = ids.ToArray();
        qbdQuery.ItemsElementName = new ItemsChoiceType4[] { ItemsChoiceType4.ListIdSet};
        itemQueryResult = qbdQuery.ExecuteQuery<Intuit.Ipp.Data.Qbd.Item>(context).ToList<Intuit.Ipp.Data.Qbd.Item>(); 
```

问候，

瑞诗玛 D.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T12:52:59.770

这是一个例子

```
ItemQuery qbdItemQuery = new ItemQuery();
qbdItemQuery.Items = new object[] { new IdSet() { Id = new IdType[] { new IdType() { idDomain = idDomainEnum.NG, Value = "79841" } } } };
qbdItemQuery.ItemsElementName = new ItemsChoiceType4[] { ItemsChoiceType4.ListIdSet };
List<Item> ItemQueryResult = qbdItemQuery.ExecuteQuery<Item>(context).ToList<Item>(); 
```

# mediawiki - 如何使 Mediawiki 的新页面不为空白/空？

> ID：15833630
> 
> 赞同：2
> 
> 时间：2013-04-05T12:11:19.027
> 
> 标签：mediawiki, wiki

我在我的组织中使用 mediawiki。我们所有的页面都必须具有相同的标题和部分结构。从一开始我们创建一个新页面，从另一个页面复制没有内容的结构，然后我们开始编辑新信息。

我希望当我们创建一个新页面时，它不会显示为空白或空白，而是已经具有标题的基本结构。

我不知道这是否可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:37:53.797

[Mediawiki 的使用预加载文本创建页面](http://www.mediawiki.org/wiki/Manual%3aCreating_pages_with_preloaded_text)的手册页解释了如何执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T00:29:34.693

我建议使用[替换](http://www.mediawiki.org/wiki/Manual%3aSubstitution)命令创建一个模板和它们。过程如下。。

1.  创建一个模板页面，其中包含您希望在每个页面上显示的基本布局文本。假设该页面称为“模板：布局”（因为它是模板，所以它将位于模板命名空间中）。
2.  一旦创建了该模板，当您创建一个新页面时，您所做的就是简单的类型`{{subst:Layout}}`。这样做是自动将代码从布局模板复制到新页面。

现在您可能想知道为什么要这样做，您可以自己复制并粘贴代码。这就是为什么。您也可以使用带有替换的参数。让我创建一个假设。假设您正在为公司的每位员工创建一个新页面。您希望每个页面都说“您好，欢迎来到*Persons name*的页面”。您可以将其复制并粘贴到每个新页面上，或者您可以执行以下操作：

1.  使用以下文本创建模板：布局“您好，欢迎来到 {{{1}}} 的页面”。
2.  然后，当您为 Bob Smith 创建一个新页面时，只需键入`{{subst:Layout|Bob Smith}}`文本“您好，欢迎来到 Bob Smith 的页面”将插入页面顶部。

我还鼓励您研究使用模板来样式化您的页面。替换是类似的，但它不会动态改变。因此，如果您在一周后更改布局模板，您使用的页面`{{subst:Layout}}`将不会更改。

希望有帮助。

# iphone - 如果不满足条件，则在 init 中销毁 UIView

> ID：15833632
> 
> 赞同：0
> 
> 时间：2013-04-05T12:11:26.013
> 
> 标签：iphone, ios, cocoa-touch, uiview

我正在尝试创建一个自定义警报视图，以检查条件是否为真，如果是，它会自行构建并将自身附加到窗口。但是，如果这个条件不成立，我只想让视图自行释放，最好是在`init`方法中。实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T12:25:05.653

好吧，最好在编码中遵循 SOLID 原则。

奇点是一件很重要的事情。一个函数应该做一件事情，而不是很多依赖。

所以保留视图只是为了显示自定义警报。并且显示的检查必须在外部完成，这样

```
//Please note this is the algorithm not the exact code in Obj-C.
if(condition==True)
{
//Display customView
}
else
{
//Do nothing
} 
```

# mysql - linux 中的 mysqldump 命令直到日期（我的意思是我不想转储我今天所做的数据库中的更改）

> ID：15833633
> 
> 赞同：0
> 
> 时间：2013-04-05T12:11:33.720
> 
> 标签：mysql, dump

通常我们以这种方式转储数据：

我需要的是我只想转储数据直到昨天！

mysqldump -u root -p 网关 > 转储文件名.sql

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:20:22.130

您可以将 -e 参数与应执行的查询一起传递：

```
mysqldump -u root -p troy22022012 -e "SELECT * FROM gateway WHERE ..." > dumpfilename.sql 
```

# sybase - 我们可以使用 sybase 中的名称来引用 sysconstraints 中的列吗？

> ID：15833634
> 
> 赞同：0
> 
> 时间：2013-04-05T12:11:34.343
> 
> 标签：sybase, liquibase

因为通过“名称”属性访问的选项可以通过

> 系统对象

, 是相同的可能由

> 系统约束/系统列？？

因为我没有给表或列或任何约束赋予 id 属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:04:33.140

*sysobjects*不包含任何列名。我不明白你的第一句话。但是如果你有一个**表名**并且想从表名和列名中显示*sysconstraints表，你可以有一个这样的连接：*

```
SELECT constrid
FROM sysconstraints sc
  JOIN sysobjects o ON o.id = sc.tableid
  JOIN syscolumns c ON c.colid = sc.colid AND c.id = o.id
WHERE o.name = 'tablename'
AND c.name = 'columnname' 
```

*sysconstraints*具有与*syscolumns.colid*和*sysobjects.id*匹配的*colid*和*tableid*列。

# c - 在linux中网络管理器的接口“org.freedesktop.NetworkManager.Device”上生成的信号名称

> ID：15833637
> 
> 赞同：1
> 
> 时间：2013-04-05T12:11:39.887
> 
> 标签：c, linux, linux-kernel, dbus

我是 Dbus 的新手，我正在尝试捕捉插入或拔出网络电缆时产生的信号。我正在尝试“ [http://software.intel.com/en-us/articles/detecting ”中给出的示例代码-network-connectivity-using-d-bus](http://software.intel.com/en-us/articles/detecting-network-connectivity-using-d-bus) "

我将在 dbus_message_is_signal() 中使用什么信号名称来获取信息。也提供任何可以清除我的概念的示例代码。

我的代码是：

```
enter code here

#include<stdio.h>
#include<dbus/dbus.h>
#include <gdbus.h>

#include<stdbool.h>
#include<unistd.h>
#include<stdlib.h>
#include<dbus/dbus-glib-bindings.h>
#include <dbus/dbus-glib.h>
#include <dbus/dbus-glib-lowlevel.h>

#define PLATFORM_SERVICE          "org.freedesktop.NetworkManager"
#define PLATFORM_PATH                    "/org/freedesktop/NetworkManager"
#define PLATFORM_CONNECTION_IF    "org.freedesktop.NetworkManager"

main()
{

        DBusMessage* msg;
        DBusConnection* conn;
        DBusError err;

        printf("Listening for signals\n");

        // initialise the errors
        dbus_error_init(&err);

         //connect to the bus and check for errors

        conn = dbus_bus_get(DBUS_BUS_SYSTEM, &err);

        if (dbus_error_is_set(&err))
                {
                fprintf(stderr, "Connection Error (%s)n", err.message);
                dbus_error_free(&err);
                }

        if (NULL == conn)
                {
                printf("Error in connection\n");
                exit(1);
                }
 dbus_bus_add_match(conn, "type='signal',interface='org.freedesktop.NetworkManager'", &err);
        dbus_connection_flush(conn);

        if (dbus_error_is_set(&err))
        {
               fprintf(stderr, "Match Error (%s)n", err.message);
               exit(1);
        }

        printf("Match rule sent\n");

         g_message("Listening to D-BUS signals using a connection filter");

 // loop listening for signals being emmitted
        while (true)
        {
                printf("in while \n");
               // non blocking read of the next available message
              dbus_connection_read_write(conn,0);
               msg = dbus_connection_pop_message(conn);

              // loop again if we haven't read a message
               if (NULL == msg)
               {
                      sleep(1);
                      continue;
               }

                if (dbus_message_is_signal(msg, PLATFORM_CONNECTION_IF,"PropertiesChanged"))
                      printf("Received signal propertyChanged \n");
 if (dbus_message_is_signal(msg, PLATFORM_CONNECTION_IF, "DeviceRemoved"))
                      printf("Received signal %s\n", "Device changed");

  // free the message
               dbus_message_unref(msg);
        }
} 
```

我可以获取属性更改信号，但如何获取其他信号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:25:11.993

查看[http://projects.gnome.org/NetworkManager/developers/api/09/spec.html](http://projects.gnome.org/NetworkManager/developers/api/09/spec.html)上的 NetworkManager 规范——它为您提供了接口的所有细节。

您可能感兴趣的信号将是“DeviceAdded”和“DeviceRemoved”，以发现设备何时来去（电缆插入和拔出）。您还可以深入到 org.freedesktop.NetworkManager.Device 以获取“PropertiesChanged”信号并获取“state”属性等。

# symfony - Symfony2 学说合并

> ID：15833639
> 
> 赞同：14
> 
> 时间：2013-04-05T12:11:42.977
> 
> 标签：symfony, doctrine-orm

我正在研究[https://www.doctrine-project.org/projects/doctrine-orm/en/2.6/reference/working-with-associations.html](https://www.doctrine-project.org/projects/doctrine-orm/en/2.6/reference/working-with-associations.html)但我无法弄清楚级联合并的作用。我在其他地方看到过

```
$new_object = $em->merge($object); 
```

基本上创建一个基于`$object`. 那是对的吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-05T15:50:38.760

`$em->merge()`用于获取已脱离实体管理器上下文的实体并“重新附加它”。

*   如果 Entity 从未被管理过，则合并等同于持久化。
*   如果实体被分离或序列化（可能放在缓存中），则合并或多或少会在数据存储中查找实体的 id，然后从该点开始跟踪实体的任何更改。

级联合并将此行为扩展到您正在合并的实体的关联实体。这意味着更改会级联到关联，而不仅仅是合并的实体。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-05-17T12:37:26.690

我知道这是一个老问题，但我认为值得一提的是它`$em->merge()`已被弃用，很快就会被删除。[在这里检查](https://github.com/doctrine/persistence/blob/master/lib/Doctrine/Persistence/ObjectManager.php)

> 不推荐使用合并操作，并将在 Persistence 2.0 中删除。合并应该是应用程序业务领域的一部分，而不是 ObjectManager 的通用操作。

另请阅读此文档 v3 他们希望如何存储实体

[https://www.doctrine-project.org/projects/doctrine-orm/en/latest/cookbook/entities-in-session.html#entities-in-the-session](https://www.doctrine-project.org/projects/doctrine-orm/en/latest/cookbook/entities-in-session.html#entities-in-the-session)

> 避免以诸如 $_SESSION 之类的序列化格式存储实体是一个好主意：而是存储实体标识符或原始数据。

# java - e(fx)clipse - Tutorial2 - step 18 - can't generate update site

> ID：15833640
> 
> 赞同：0
> 
> 时间：2013-04-05T12:11:43.740
> 
> 标签：java, eclipse-plugin, javafx-2, p2, efxclipse

Tutorial2 - e(fx)clipse - 第 18 步 - 出现问题

我正在关注 [http://www.efxclipse.org/trac/wiki/Tutorial2](http://www.efxclipse.org/trac/wiki/Tutorial2)

在第 18 步：使用按钮生成更新站点）全部构建（

> 18 : 操作的结果应该类似于下面的截图

. ...

但我实际上得到了“发生问题”

![在此处输入图像描述](https://i.stack.imgur.com/frGIC.png)

```
eclipse.buildId=M20130204-1200
java.version=1.7.0_17
java.vendor=Oracle Corporation
BootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=ru_RU
Command-line arguments:  -os win32 -ws win32 -arch x86

Error
Thu Apr 04 21:51:03 CST 2013
An internal error occurred during: "Build Site".

java.lang.NoClassDefFoundError: at/bestsolution/efxclipse/tooling/pde/adaptor/IClasspathContributor
    at org.eclipse.pde.internal.core.exports.BuildUtilities.getBootClasspath(BuildUtilities.java:59)
    at org.eclipse.pde.internal.core.exports.FeatureExportOperation.createAntBuildProperties(FeatureExportOperation.java:471)
    at org.eclipse.pde.internal.core.exports.FeatureExportOperation.doExport(FeatureExportOperation.java:255)
    at org.eclipse.pde.internal.core.exports.FeatureBasedExportOperation.run(FeatureBasedExportOperation.java:50)
    at org.eclipse.pde.internal.core.exports.SiteBuildOperation.run(SiteBuildOperation.java:65)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:53) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:18:25.850

[我昨天已经在e(fx)clipse 论坛](https://groups.google.com/d/forum/efxclipse)上回答了你的问题。这是一个错误，因为我们必须以非常讨厌的方式修复 PDE-Classpath-Container。

# django - Tastypie 过滤器可以应用于详细资源吗？

> ID：15833643
> 
> 赞同：1
> 
> 时间：2013-04-05T12:11:48.233
> 
> 标签：django, tastypie

我有一个 Django 模型，其`sequence_number`字段在每次更新模型实例时都会递增：

```
class Foo(models.Model):
    bar = models.TextField()
    sequence_number = models.IntegerField(default=0) 
```

我已经为这个模型实现了一个 Tastypie 资源，如下所示：

```
class FooResource(ModelResource):
    class Meta:
        queryset = Foo.objects.all()
        resource_name = 'foo'
        list_allowed_methods = ['get']
        detail_allowed_methods = ['put', 'get'] 
```

因此，客户端用户可以使用这样的 URL 请求 Foo 的特定实例：

```
http://.../api/foo/123/ 
```

客户端应用程序保留 ，`sequence_number`因此他们知道他们持有的对象的版本。

我想在详细资源上实现一个过滤器，以便客户端可以将`sequence_number`他们持有的内容传递给服务器：

*   如果自客户端上次请求以来其他人更新了对象（因此服务器序列号将大于客户端序列号），则资源应返回更新后的对象。
*   如果服务器序列号未更改，则资源不应返回任何内容（或空字段等）。

我试图通过向资源元添加过滤器来实现这一点：

```
 filter = {
        'sequence_number': ('gt',),
    } 
```

并使用以下网址：

```
http://.../api/foo/123/?sequence_number__gt=123 
```

但它没有任何效果。当我使用列表资源时它确实有效，即

```
http://.../api/foo/?sequence_number__gt=123 
```

那么 - 是否可以将 Tastypie 配置为接受详细资源的过滤器？如果没有，关于我应该如何推出自己的解决方案（同时仍在使用 Tastypie）的任何建议？

# php - 如何在magento中为单个产品设置两个税级？

> ID：15833644
> 
> 赞同：4
> 
> 时间：2013-04-05T12:11:48.953
> 
> 标签：php, magento, magento-1.7

我需要为“弗吉尼亚”的两个税级设置税率。

1.  4.0% 州销售税 + 1.0% 州销售税 = 5%
2.  1.0% 县销售税 = 1%

我设置了如下图所示的税收规则：

![税收规则图片](https://i.stack.imgur.com/HK5dh.png)

它在前端显示如下：

![前端](https://i.stack.imgur.com/q45uL.png)

如何在购物车页面中同时显示税款和计算税款？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T19:50:06.467

可以只为一种产品分配一个产品税等级。但是，您可以创建三个产品税类别，例如

1) 只有州销售税

2) 只有县销售税

3) 州销售税和县销售税

然后创建两个税收规则

*Rule1 **产品税类别**：仅州销售税、州销售税和县销售税 **税率**：州销售税*

*Rule2 **产品税类别**：仅县销售税、州销售税和县销售税 **税率**：县销售税*

然后，您可以通过分配正确的产品税等级来管理所有组合的产品税率。具有州销售税和县销售税类别的产品将在购物车、结帐等中同时显示税率。

# html - 我的 html5 游戏无法在 BB10 模拟器中运行

> ID：15833651
> 
> 赞同：0
> 
> 时间：2013-04-05T12:12:05.537
> 
> 标签：html, blackberry-simulator, blackberry-10

我创建了一个 html5 游戏。

根据 bb10 webworks 指南，我制作了 config.xml 文件。我的游戏在涟漪模拟器中运行良好。但是当我在 BB10 Dev Alpha Simulator 中测试它时，只出现黑屏.. 有什么问题？我[在这里上传了我的代码。](https://www.box.com/s/4ds7bk7tr7n3hlz4m4wu)

配置文件

```
<?xml version="1.0" encoding="UTF-8"?>
    <widget xmlns="http://www.w3.org/ns/widgets"
    xmlns:rim="http://www.blackberry.com/ns/widgets"
    version="1.0.0.5" id="mani" xml:lang="en">
     <author href="http://www.example.com/"
      rim:copyright="Copyright 1998-2012 My Corp">My Corp</author>
      <name>mani</name>
<icon src="logo.png"/>
    <content src="index.html"/>
    <feature id="blackberry.identity" required="true" version="1.0.0.0"/>
    </widget> 
```

我在 index.html 文件中添加了脚本标签。其余的东西是不变的。

索引.html

```
 <script src="local:///chrome/webworks.js" type="text/javascript"></script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:16:00.430

If you are getting a black screen, then I expect there is a runtime error that has prevented your game from starting and/or

Here are instructions on how to use remote-web inspector. I recommend connecting, opening the console panel and reloading your app. It should tell you right away if there is an error: [https://developer.blackberry.com/html5/documentation/web_inspector_overview_1553586_11.html](https://developer.blackberry.com/html5/documentation/web_inspector_overview_1553586_11.html)

Do you have any remote content being used in your app? If so, I suspect the application does not have permission to access that content as I don't see any <access> elements in your config.xml. Make sure you properly whitelist all remote URLs: [https://developer.blackberry.com/html5/documentation/access_element_834677_11.html](https://developer.blackberry.com/html5/documentation/access_element_834677_11.html)

# php - Javascript 函数不会在 php 页面中执行

> ID：15833652
> 
> 赞同：-3
> 
> 时间：2013-04-05T12:12:09.523
> 
> 标签：php, javascript

我有一个简单的 html 页面，其中包含一个添加行的 javascript 函数，但是当我嵌入到我的 php 页面时它不会执行。它是 onclick 功能不起作用。另一个按钮工作正常。我不知道为什么。我对编程相当陌生。

```
 $content .="
    <html>
<head>
<title>Add Items To Repair</title>
<script language='javascript'>
row_no=0;
function addRow(tbl,row){
row_no++;
if (row_no<=20){
if (row_no>=10){
var textbox  = row_no+'.)<input type='text' size = '2'  maxlength= '2' name= quantity[]>';}
if (row_no<10){
var textbox  = row_no+'.  )<input type='text' size = '2'  maxlength= '2' name= quantity[]>';}
var textbox2 = '<input type='text' size = '100' maxlength= '100' name= desc[]>';
var textbox3 = '<input type='text' size = '20' maxlength= '20' name= productno[]>';
var textbox4 = '<input type='text' size = '20' maxlength= '20' name= issue[]>';
var tbl = document.getElementById(tbl);
var rowIndex = document.getElementById(row).value;
var newRow = tbl.insertRow(row_no);
var newCell = newRow.insertCell(0);
newCell.innerHTML = textbox;
var newCell = newRow.insertCell(1);
newCell.innerHTML = textbox2;
var newCell = newRow.insertCell(2);
newCell.innerHTML = textbox3;
var newCell = newRow.insertCell(3);
newCell.innerHTML = textbox4;

}
if (row_no>12){
alert ('Too Many Items. Limit of 12.'); 
}
}

</script>

</head>

<body>
<form name='invoice' method='post' action='insert.php'>

<input type='submit' value='Create Repair Ticket'>
<input type='button' name='Button' value='Add Items to Repair Ticket' onClick='addRow('table1','row1')'>
<table width='1000' border='0' cellspacing='0' cellpadding='2' id='table1'>
<th><center>QTY</th>
<th>Item Description</th>
<th>ProductNumber</th>
<th>Issue</th>
</center>
<tr id='row1'>
</tr>
</table>

 <table align='center' width='80%'> 
        <tr> 
            <td align='right'><input type='submit' name='checkin' value='Submit'></td><td><input type='reset' name='reset' value='Reset'></td> 
        </tr> 
    </table> 
</form>
</body>
</html>
"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:16:33.033

用。。。来代替 ：

```
<input type='button' name='Button' value='Add Items to Repair Ticket' onClick='addRow(\'table1\',\'row1\')'> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:14:50.220

你正在嵌套你的引号。

改变：

```
<input type='button' name='Button' value='Add Items to Repair Ticket' onClick=**'**addRow(**'**table1**'**,'row1**'**)**'**> 
```

到：

```
<input type='button' name='Button' value='Add Items to Repair Ticket' onClick='addRow(\"table1\",\"row1\")'> 
```

# javascript - 如何动态更改 HTML 表格行中的可点击图像？

> ID：15833659
> 
> 赞同：0
> 
> 时间：2013-04-05T12:12:30.477
> 
> 标签：javascript, jquery

我在 HTML 表上有两条记录。在每一行的最后一列中，我有一个可点击的图像。单击后，我正在调用一个 JavaScript 函数。

我需要知道的是，如果单击后可以更改图像？更改后的图像不应是可点击的，并且不应触发该 javascript 函数。

请用 jQuery 或 JavaScript 给我一个解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T12:21:10.493

只需更改`src`单击的图像的属性即可更改图像，使用[`attr()`](http://api.jquery.com/attr/)

您可以在事件处理程序中引用单击的`img`使用`$(this)`。

为确保新图像不再可点击，请使用[`one()`](http://api.jquery.com/one/)绑定您的事件处理程序。

```
$('img').one('click', function(){
    alert('clicked');
    $(this).attr('src', 'http://placehold.it/50x50');
}); 
```

[http://jsfiddle.net/N34cZ/1/](http://jsfiddle.net/N34cZ/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:21:06.470

如果您使用 jQuery 并像这样设置可点击

```
jQuery('elements').click(function(event){ ... }); 
```

尝试使用

```
jQuery('elements').one('click', function(event){ ... }); 
```

# jquery - 使用 jquery 一次更改一张图像

> ID：15833660
> 
> 赞同：0
> 
> 时间：2013-04-05T12:12:31.963
> 
> 标签：jquery, background-image

嗨，我有 5 个产品标签，我想要更改单击的标签的背景图像，例如，如果单击产品 1，则背景图像应更改为`background-image:url('/images/product1-selected')`，类似地，如果选择产品 2 为背景产品 2 的图像应该是`background-image:url('/images/product2-selected')`，但在这种情况下，产品 1 图像应该转到上一个图像，因为选择了产品 2。我想一次显示一个选择的图像，因此例如，如果选择了产品 2，则所有其他产品都应转到每个标签样式中定义的默认图像，反之亦然

```
<label for="1" style="background-image:url('/images/product1');width:50px;height:49px;">Product 1</label>
<label for="2" style="background-image:url('/images/product2');width:50px;height:49px;">Product 2</label>
<label for="3" style="background-image:url('/images/product3');width:50px;height:49px;">Product 3</label>
<label for="4" style="background-image:url('/images/product4');width:50px;height:49px;">Product 4</label>
<label for="5" style="background-image:url('/images/product5');width:50px;height:49px;">Product 5</label> 
```

关于如何使用 jquery 获得这个的任何想法。任何帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:19:19.423

试试这个：

```
$(function() {
    $("label").on("click", function() {
        // Removing previously selected ones
        $("label").each(function() {
            $(this).css("background-image", $(this).css("background-image").replace("-selected", ""));
        }):

        $(this).css("background-image", $(this).css("background-image") + "-selected"));
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T12:20:43.223

这可能有效

```
$('label').click(function() {
    $('label').each(function() {
        indexLabel = $(this).attr('for');
        $(this).css('background-image','url("/images/product'+indexLabel+'")');
        if($(this).index()==indexLabel) {
            $(this).css('background-image','url("/images/product'+indexLabel+'-selected'+'")');
        }
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T12:21:01.757

这个函数应该为那个特定的例子做：

```
function selectLabel(label_id)
{
    for (var i = 1, i <= 5, i++) {
        $('[for="'+i+'"]').attr("stlye", "background-image:url('/images/product"+i+"');width:50px;height:49px;");
    }

    $('[for="'+label_id+'"]').attr("stlye", "background-image:url('/images/product"+i+"-selected');width:50px;height:49px;");
} 
```

所以这将做的是，遍历标签 1-5 并将它们全部设置为原始图像，然后将选定的设置为具有选定的背景图像。

（但是最好为每个标签添加一个 id 以使选择器更易于管理）

然后你可以添加到每个标签

```
onclick="selectLabel(x)" 
```

其中 x 是标签的编号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T12:32:42.093

像这样使用 jQuery`data`函数

```
 $(function
       $('label').click(function () {
           if($(this).data('oldimg')) return false;

           $('label').filter(function(){return $(this).data('oldimg')}).each(function () {
              $(this).css('background-image', $(this).data('oldimg')).removeData('oldimg');
           })
           $(this)
              .data('oldimg', $(this).css('background-image'))
              .css('background-image', $(this).css('background-image').replace(/(\.\w{3})/, '-selected$1'));
        })
    }) 
```

# java - 将表格行标题冻结到表格视图的垂直滚动

> ID：15833661
> 
> 赞同：1
> 
> 时间：2013-04-05T12:12:32.817
> 
> 标签：java, android, android-layout, scroll, tableview

我有一个活动，其中我有一个表格布局。该表正在通过活动动态填充。

由于表格横向很长，为了方便用户处理，我在**S.No.之后实现了横向滚动到表格。**柱子。**S.No.** _ 列不应该暴露在水平滚动中，这是实现的。

整个表格是垂直可滚动的，**我想要的是将表格的标题行冻结为垂直滚动，但标题中应该存在水平滚动以及 S.No. 之后的所有行。柱子。**

这是**活动代码**：

```
 public class ReportListActivity extends Activity {

    TableLayout srno_table;
    TableRow srno_report_tr_data;

    TableLayout report_table;
    TableRow report_tr_data;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_report_list);

        srno_table=(TableLayout) findViewById(R.id.srno_table);

        //---------------Serial no Table Header-----------------------------------------------
        TableRow srno_tr_head = new TableRow(this);
        srno_tr_head.setId(10);
        srno_tr_head.setBackgroundColor(Color.GRAY);
        srno_tr_head.setLayoutParams(new LayoutParams(
        LayoutParams.FILL_PARENT,
        LayoutParams.WRAP_CONTENT));

        TextView label_sr_no = new TextView(this);
        label_sr_no.setId(20);
        label_sr_no.setText("S.No.");
        label_sr_no.setTextColor(Color.WHITE);
        label_sr_no.setPadding(5,5,5,5);
        srno_tr_head.addView(label_sr_no);// add the column to the table row here
        label_sr_no.setTextSize(20);    

        srno_table.addView(srno_tr_head, new TableLayout.LayoutParams(
                LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT));

      //---------------Serial no Table Header-----------------------------------------------

        report_table=(TableLayout) findViewById(R.id.report_table);

        //---------------report Table Header-----------------------------------------------
        TableRow report_tr_head = new TableRow(this);
        report_tr_head.setId(10);
        report_tr_head.setBackgroundColor(Color.GRAY);
        report_tr_head.setLayoutParams(new LayoutParams(
        LayoutParams.FILL_PARENT,
        LayoutParams.WRAP_CONTENT));

        TextView label_test_name = new TextView(this);
        label_test_name.setId(20);
        label_test_name.setText("Test Name");
        label_test_name.setTextColor(Color.WHITE);
        label_test_name.setPadding(5,5,5,5);
        report_tr_head.addView(label_test_name);// add the column to the table row here
        label_test_name.setTextSize(20);    

        TextView label_test_date = new TextView(this);
        label_test_date.setId(21);// define id that must be unique
        label_test_date.setText("Date"); // set the text for the header 
        label_test_date.setTextColor(Color.WHITE); // set the color
        label_test_date.setPadding(5,5,5,5); // set the padding (if required)
        report_tr_head.addView(label_test_date); // add the column to the table row here
        label_test_date.setTextSize(20);

        TextView label_ro = new TextView(this);
        label_ro.setId(21);// define id that must be unique
        label_ro.setText("R.O."); // set the text for the header 
        label_ro.setTextColor(Color.WHITE); // set the color
        label_ro.setPadding(5,5,5,5); // set the padding (if required)
        report_tr_head.addView(label_ro); // add the column to the table row here
        label_ro.setTextSize(20);

        TextView label_wo = new TextView(this);
        label_wo.setId(21);// define id that must be unique
        label_wo.setText("W.O."); // set the text for the header 
        label_wo.setTextColor(Color.WHITE); // set the color
        label_wo.setPadding(5,5,5,5); // set the padding (if required)
        report_tr_head.addView(label_wo); // add the column to the table row here
        label_wo.setTextSize(20);

        TextView label_lo = new TextView(this);
        label_lo.setId(21);// define id that must be unique
        label_lo.setText("L.O."); // set the text for the header 
        label_lo.setTextColor(Color.WHITE); // set the color
        label_lo.setPadding(5,5,5,5); // set the padding (if required)
        report_tr_head.addView(label_lo); // add the column to the table row here
        label_lo.setTextSize(20);

        TextView label_max = new TextView(this);
        label_max.setId(21);// define id that must be unique
        label_max.setText("Max."); // set the text for the header 
        label_max.setTextColor(Color.WHITE); // set the color
        label_max.setPadding(5,5,5,5); // set the padding (if required)
        report_tr_head.addView(label_max); // add the column to the table row here
        label_max.setTextSize(20);

        TextView label_tm = new TextView(this);
        label_tm.setId(21);// define id that must be unique
        label_tm.setText("T.M."); // set the text for the header 
        label_tm.setTextColor(Color.WHITE); // set the color
        label_tm.setPadding(5,5,5,5); // set the padding (if required)
        report_tr_head.addView(label_tm); // add the column to the table row here
        label_tm.setTextSize(20);

        TextView label_rank = new TextView(this);
        label_rank.setId(21);// define id that must be unique
        label_rank.setText("Rank"); // set the text for the header 
        label_rank.setTextColor(Color.WHITE); // set the color
        label_rank.setPadding(5,5,5,5); // set the padding (if required)
        report_tr_head.addView(label_rank); // add the column to the table row here
        label_rank.setTextSize(20);

        report_table.addView(report_tr_head, new TableLayout.LayoutParams(
                LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT));

      //---------------Serial no Table Header-----------------------------------------------

        //--------------------Sr No Table Body---------------------------
        for (int i=1; i<=10; i++)
        {
            srno_report_tr_data = new TableRow(this);
            srno_report_tr_data.setId(10);
            srno_report_tr_data.setBackgroundColor(Color.TRANSPARENT);
            srno_report_tr_data.setLayoutParams(new LayoutParams(
            LayoutParams.FILL_PARENT,
            LayoutParams.WRAP_CONTENT));

            final TextView sr_no = new TextView(this);
            sr_no.setId(20);
            sr_no.setText(""+i);
            sr_no.setTextColor(Color.BLACK);
            sr_no.setPadding(5,5,5,5);
            srno_report_tr_data.addView(sr_no);// add the column to the table row here

            srno_table.addView(srno_report_tr_data, new TableLayout.LayoutParams(
                    LayoutParams.FILL_PARENT,
                    LayoutParams.WRAP_CONTENT));

            //----------------------On click table row---------------------------------------

            srno_report_tr_data.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub

//                  Toast.makeText(getApplicationContext(), test_name.getText().toString(), Toast.LENGTH_LONG).show();
//                  Toast.makeText(getApplicationContext(), test_date.getText().toString(), Toast.LENGTH_LONG).show();
//                  Toast.makeText(getApplicationContext(), sr_no.getText().toString(), Toast.LENGTH_LONG).show();
                    //Toast.makeText(getApplicationContext(), test_exam_set.getText().toString(), Toast.LENGTH_LONG).show();

//                  Intent intent = new Intent(ReportListActivity.this, ReportListDetailsActivity.class);
//                  finish();
//                  ReportListActivity.this.startActivity(intent);
                }
            });
            //----------------------On click table row---------------------------------------

        }

      //--------------------Sr No Table Body Table Body---------------------------

        //=================Report table body============================

        for (int i=1; i<=10; i++)
        {
            report_tr_data=new TableRow(this);
            report_tr_data.setId(10);
            report_tr_data.setBackgroundColor(Color.TRANSPARENT);
            report_tr_data.setLayoutParams(new LayoutParams(
            LayoutParams.FILL_PARENT,
            LayoutParams.WRAP_CONTENT));

            final TextView test_name = new TextView(this);
            test_name.setId(20);
            test_name.setText("Speed Test 60(min) Demo-ST-01");
            test_name.setTextColor(Color.BLACK);
            test_name.setPadding(5,5,5,5);
            report_tr_data.addView(test_name);// add the column to the table row here

            final TextView test_date = new TextView(this);
            test_date.setId(21);// define id that must be unique
            test_date.setText("12 Mar 2013"); // set the text for the header 
            test_date.setTextColor(Color.BLACK); // set the color
            test_date.setPadding(5,5,5,5); // set the padding (if required)
            report_tr_data.addView(test_date); // add the column to the table row here

            final TextView test_ro = new TextView(this);
            test_ro.setId(21);// define id that must be unique
            test_ro.setText("2"); // set the text for the header 
            test_ro.setTextColor(Color.BLACK); // set the color
            test_ro.setPadding(5,5,5,5); // set the padding (if required)
            report_tr_data.addView(test_ro); // add the column to the table row here

            final TextView test_wo = new TextView(this);
            test_wo.setId(21);// define id that must be unique
            test_wo.setText("3"); // set the text for the header 
            test_wo.setTextColor(Color.BLACK); // set the color
            test_wo.setPadding(5,5,5,5); // set the padding (if required)
            report_tr_data.addView(test_wo); // add the column to the table row here

            final TextView test_lo = new TextView(this);
            test_lo.setId(21);// define id that must be unique
            test_lo.setText("85"); // set the text for the header 
            test_lo.setTextColor(Color.BLACK); // set the color
            test_lo.setPadding(5,5,5,5); // set the padding (if required)
            report_tr_data.addView(test_lo); // add the column to the table row here

            final TextView test_max = new TextView(this);
            test_max.setId(21);// define id that must be unique
            test_max.setText("101"); // set the text for the header 
            test_max.setTextColor(Color.BLACK); // set the color
            test_max.setPadding(5,5,5,5); // set the padding (if required)
            report_tr_data.addView(test_max); // add the column to the table row here

            final TextView test_tm = new TextView(this);
            test_tm.setId(21);// define id that must be unique
            test_tm.setText("-1.5"); // set the text for the header 
            test_tm.setTextColor(Color.BLACK); // set the color
            test_tm.setPadding(5,5,5,5); // set the padding (if required)
            report_tr_data.addView(test_tm); // add the column to the table row here

            final TextView test_rank = new TextView(this);
            test_rank.setId(21);// define id that must be unique
            test_rank.setText("5810"); // set the text for the header 
            test_rank.setTextColor(Color.BLACK); // set the color
            test_rank.setPadding(5,5,5,5); // set the padding (if required)
            report_tr_data.addView(test_rank); // add the column to the table row here

            final TextView test_exam_set = new TextView(this);
            test_exam_set.setId(21);// define id that must be unique
            test_exam_set.setText("123456"); // set the text for the header
            test_exam_set.setTextSize((float) 0.01);
            test_exam_set.setTextColor(Color.TRANSPARENT); // set the color
            test_exam_set.setPadding(5,5,5,5); // set the padding (if required)
            report_tr_data.addView(test_exam_set); // add the column to the table row here

            report_table.addView(report_tr_data, new TableLayout.LayoutParams(
                     LayoutParams.FILL_PARENT,
                     LayoutParams.WRAP_CONTENT));

//----------------------On click table row---------------------------------------

            report_tr_data.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub

                    Toast.makeText(getApplicationContext(), test_name.getText().toString(), Toast.LENGTH_LONG).show();
//                  Toast.makeText(getApplicationContext(), test_date.getText().toString(), Toast.LENGTH_LONG).show();
//                  Toast.makeText(getApplicationContext(), sr_no.getText().toString(), Toast.LENGTH_LONG).show();
                    Toast.makeText(getApplicationContext(), test_exam_set.getText().toString(), Toast.LENGTH_LONG).show();

//                  Intent intent = new Intent(ReportListActivity.this, ReportListDetailsActivity.class);
//                  finish();
//                  ReportListActivity.this.startActivity(intent);
                }
            });
            //----------------------On click table row---------------------------------------

        }

      //=================Report table body============================

    }
    //onclick device back button
    @Override
    public void onBackPressed() {
        // do something on back.

        Intent intent = new Intent(ReportListActivity.this, TakeTestActivity.class);
        finish();
        ReportListActivity.this.startActivity(intent);
        return;
    }

  //method to show toast message
        public void makeAToast(String str) {
            //yet to implement
            Toast toast = Toast.makeText(this,str, Toast.LENGTH_SHORT);
            toast.setGravity(Gravity.CENTER, 0, 0);
            toast.show();
        }

         //saving A VALUE in preference variable
        public void saveInPreference(String name, String content)
        {
            SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this);
             SharedPreferences.Editor editor = preferences.edit();
             editor.putString(name,content);
             editor.commit();
        }

        //getting content from preferences
        public String getFromPreference(String variable_name)
        {
            String preference_return;
            SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this);
            preference_return = preferences.getString(variable_name,"");

            return preference_return;
        }

} 
```

**布局**文件：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".ReportListActivity" >

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" >

        <RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

            <RelativeLayout
                android:id="@+id/relativeLayout1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_centerVertical="true" >

                <TableLayout
                    android:id="@+id/srno_table"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_centerHorizontal="true"
                    android:layout_centerVertical="true" >
                </TableLayout>
            </RelativeLayout>

            <RelativeLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentTop="true"
                android:layout_toRightOf="@+id/relativeLayout1" >
                <HorizontalScrollView
                android:id="@+id/horizontalScrollView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentTop="true"
                android:layout_toRightOf="@+id/relativeLayout1" >

                    <TableLayout
                        android:id="@+id/report_table"
                        android:layout_width="match_parent"
                        android:layout_height="match_parent" >

                    </TableLayout>

            </HorizontalScrollView>
            </RelativeLayout>

        </RelativeLayout>

    </ScrollView>

</RelativeLayout> 
```

**PS：所有更改都将在现有代码中实现。**

您也可以参考[this](https://stackoverflow.com/questions/15811472/freeze-one-table-column-horizontally/15828388#15828388)进行澄清

提前致谢！

# java - 从启动器中删除图标

> ID：15833662
> 
> 赞同：1
> 
> 时间：2013-04-05T12:12:34.273
> 
> 标签：java, android, icons, launcher

这是最流行的问题，没有人知道如何解决它...

例如：

```
<application
    android:allowBackup="true"
    android:icon="@drawable/add"
    android:theme="@style/CustomTheme"
    android:showAsAction="ifRoom|withText"> 
```

现在我需要隐藏 android:icon 或者我只想删除它

```
<application
    android:allowBackup="true"
    android:theme="@style/CustomTheme"
    android:showAsAction="ifRoom|withText"> 
```

但在这种情况下，我有默认的 android 图标 -_- 可以永久删除此图标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T17:37:48.673

我有办法！几天前我开始学习java和android，所以我的解决方案需要由比我更有经验的人验证。在这里你有解决方案：

**步骤1**

在 AndroidManifest.xml 文件应用部分我们需要声明 NoTitleBar 主题。

```
<application
    ...
    android:theme="@android:style/Theme.NoTitleBar">
...
</application> 
```

**第2步**

现在我们的应用程序加载器时没有标题栏（我们设置了 Theme.NoTitleBar），所以我们需要创建它或更改 android:theme。我采取第二种选择，所以：

```
public class MainActivity extends SherlockActivity {
...
@Override
protected void onCreate(Bundle savedInstanceState) {
    setTheme(R.style.AppTheme);
            ....
    }
    ....
} 
```

R.style.AppTheme 是我们创建的样式，但我们可以使用任何来自 android API 的可用样式。

**Step3** 现在我们的标题栏又回来了，但我们仍然有我们的图标和标题。所以我们需要关闭它，现在我们有两个选项可以做到这一点。首先是当我们使用 android api 11 或更高版本时，我们不需要使用 ActionBarSherlock 库，其次是用于低于 api 11 的应用程序。

**API 11 或更低**

```
...
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    actionBar = getActionBar();
    actionBar.setDisplayShowHomeEnabled(false);
    actionBar.setDisplayShowTitleEnabled(false);
    actionBar.setDisplayShowCustomEnabled(true);
            ...
}
... 
```

**API 11 或更高版本**

```
...
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    actionBar = getSupportActionBar();
    actionBar.setDisplayShowHomeEnabled(false);
    actionBar.setDisplayShowTitleEnabled(false);
    actionBar.setDisplayShowCustomEnabled(true);
            ...
}
... 
```

因此，在第一种情况下，我们使用默认的 getActionBar() 来管理 actionBar，但在第二种情况下，我们使用来自 ActionBarSherlock 的 getSupportActionBar

完毕 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:17:20.307

这可以在下次重新启动后删除您的启动器图标：

```
PackageManager pm = getPackageManager();
pm.setComponentEnabledSetting(getComponentName(), PackageManager.COMPONENT_ENABLED_STATE_DISABLED, PackageManager.DONT_KILL_APP); 
```

此链接也可以帮助您：

[当活动在android中启动时隐藏标题栏中的应用程序启动器图标](https://stackoverflow.com/questions/11430712/hide-application-launcher-icon-in-title-bar-when-activity-starts-in-android)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T14:48:46.240

您可以创建自己的图标图片。

因此，您可以尝试创建具有必要大小且仅由透明背景组成的图片。

# cocoa - NSWindowController 无法捕获没有 WebView 的 ESC 被添加到窗口

> ID：15833669
> 
> 赞同：4
> 
> 时间：2013-04-05T12:12:49.543
> 
> 标签：cocoa, nswindowcontroller

我从 File->New 创建了一个 NSWindowController 的子类，并选中了“With XIB for user interface”选项。所以我创建了 3 个新文件。然后我使用 Interface Builder 将一个视图添加到窗口中。

并在 MyWindowController.m 中有此代码：

```
- (void)keyDown:(NSEvent *)theEvent{
    NSLog(@"%@", theEvent);
} 
```

1.  首先测试，添加一个 NSButton，然后运行项目。
2.  第二次测试，添加一个WebView（NSButton已删除），然后运行项目。

在这两个测试中，窗口都正确显示。但不同的是：

1.  (NSButton)当我按下“a”、“b”、...等键时，我可以看到日志输出，但不能看到 ESC 键
2.  （WebView）当我按下“a”、“b”、...**等键以及 ESC 键时，我可以看到日志输出**

我将 NSButton 更改为其他视图类型，以及我的自定义视图，都像第一种情况一样。

我的问题是：

1.  为什么 NSWindowController 在第一种情况下不能捕获 ESC 键？
2.  为什么 NSWindowController 以 WebView 作为第一响应者捕获 ESC 键。
3.  NSWindowController 如何在没有 WebView 的情况下捕获 ESC 键？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T20:52:27.620

请参阅`NSResponder` `cancelOperation:`文档：[https ://developer.apple.com/library/mac/ipad/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSResponder_Class/Reference/Reference.html](https://developer.apple.com/library/mac/ipad/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSResponder_Class/Reference/Reference.html)

> 此方法绑定到 Escape 和 Command-。（句号）键。键窗口首先在视图层次结构中搜索其等效键为 Escape 或 Command-.（无论输入哪个键）的视图。如果这些视图都没有处理等效键，则窗口将默认操作消息 cancelOperation: 发送到第一个响应者，然后消息从那里向上传播到响应者链。如果响应者链中没有响应者实现 cancelOperation:，则键窗口在视图层次结构中搜索其等效键为 Escape 的视图（请注意，如果原始等效键为 Escape，则这可能是多余的）。如果没有找到这样的响应者，则将取消：操作消息发送到实现它的响应者链中的第一个响应者。

如果您想在`NSWindowController`子类中处理 Esc 键，只需在其中定义一个`cancel:`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T09:16:42.950

好吧，我使用事件监视器来捕获 ESC 按键，在此处查看详细信息：[http ://www.ideawu.com/blog/post/54.html](http://www.ideawu.com/blog/post/54.html)

但仍然没有得到 WevView 测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-20T00:22:30.920

我建议告诉窗口将感兴趣的视图作为第一响应者，以捕捉关键事件

```
 [[self window]makeFirstResponder:_viewControllerOfInterest]; 
```

# c# - 使用 iTextSharp 向 PdfFormField 添加边框和背景颜色

> ID：15833676
> 
> 赞同：1
> 
> 时间：2013-04-05T12:13:13.803
> 
> 标签：c#, colors, background, itextsharp

我想为我的 PdfFormField 添加边框和背景颜色。现在背景颜色只有在我向文本字段写入内容后才会激活，但在此之前它只是白色。而且我无法显示边框。

这是我的代码：

```
public void addField(PdfWriter writer, string name, int x, int y, int w, int h, PdfContentByte cb, int maxSize, string text, BaseFont font, int border)
        {
        Rectangle rec = new Rectangle(x, y-h, x+w, y);
        // Change the font Widths
        //BaseFont font = BaseFont.CreateFont("c:\\windows\\fonts\\calibri.ttf", BaseFont.CP1252, BaseFont.NOT_EMBEDDED);
        float fontSize = 12;

        //int[] widths = font.Widths;
        //for (int k = 0; k < widths.Length; k++)
        //{
        //if (widths[k] != 0)
        //widths[k] = width;
        //}
        font.ForceWidthsOutput = true;
        string all = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-*/+.,\"'():;,?./!$+=_{[]}&éèàêîâ";

        //Color textColor = BaseColor.RED;
        // Create the Acroform TextField

        PdfFormField field = PdfFormField.CreateTextField(writer, PdfFormField.SINGLELINE, PdfFormField.PLAINTEXT, maxSize);
        field.FieldName = name;
        field.DefaultValueAsString = text;

        //ield.GetTextField();
        field.MKBackgroundColor = BaseColor.RED;

        //field.BackgroundColor = new GrayColor(0.75f);
        //field.BorderColor = GrayColor.GRAYBLACK;
        //field.BorderWidth = 1;
        //field.BorderStyle = PdfBorderDictionary.STYLE_BEVELED;

        field.SetFieldFlags(PdfAnnotation.FLAGS_PRINT);
        field.SetPage();
        writer.AddAnnotation(field);

        // Position the field on the page
        field.SetWidget(rec, PdfAnnotation.HIGHLIGHT_INVERT);

        // Create apperance so the field Size and font match what we want
        PdfAppearance tp = cb.CreateAppearance(rec.Right-rec.Left, rec.Top-rec.Bottom);
        PdfAppearance da = (PdfAppearance)tp.Duplicate;
        da.SetFontAndSize(font, fontSize);
        da.SetColorFill(BaseColor.RED);
        field.DefaultAppearanceString = da;

        // Fill the default value of the field

        tp.BeginVariableText();
        tp.SaveState();
        tp.Rectangle(rec);
        tp.Clip();
        tp.NewPath();
        tp.BeginText();
        tp.SetFontAndSize(font, fontSize);
        tp.SetColorFill(BaseColor.BLACK);
        tp.SetTextMatrix(100,100);
        tp.ShowText(all);
        tp.SetTextMatrix(2,(rec.Top-rec.Bottom)/2-(fontSize*0.3f));
        tp.ShowText(text);
        tp.EndText();
        tp.RestoreState();
        tp.EndVariableText();

        field.SetAppearance(PdfAnnotation.APPEARANCE_NORMAL, tp);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-10-11T06:57:05.680

使用以下代码我希望它有效

```
PdfFormField field = .......;
field.setMKBorderColor(BaseColor.BLACK);
field.setMKBackgroundColor(BaseColor.BLUE); 
```

# java - 如何用数字替换文本文件中的星号 {*}

> ID：15833679
> 
> 赞同：-5
> 
> 时间：2013-04-05T12:13:19.880
> 
> 标签：java, regex

我的文本文件内容看起来像这样

慌乱的近义词：

*恐慌

*扰动

*搅乱

*迷惑……

现在我想用数字替换*。像这样的东西。

> 输出

慌乱的近义词：

1）恐慌

2）扰动

3）不安

4）混淆......

**编辑：**

```
Integer count = 1;
     File input = new File("C:\\Sample.txt");
     File output = new File("C:\\output.txt");

     BufferedReader reader = new BufferedReader(new InputStreamReader(new FileInputStream(input)));
     Writer writer =new FileWriter(output);
      while((line=reader.readLine())!=null)
      {
          if(line.contains("*"))
          {
              line.replace("*",count.toString() );
              writer.write(line);
              count++;
          }

          else
          {
              writer.write(line);
          }
      } 
```

这是我在这里发布问题之前尝试过的。但这似乎不起作用。现在有人可以帮我..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T12:22:17.193

您应该编写一个 JAVA 程序。

这里有一些可以让你开始的东西（*粗略的代码*）：

```
BufferedReader br = new BufferedReader(new FileReader(file));

//start reading file line-by-line
while ((line = br.readLine()) != null) {

    //replace * with whatever you want
    // Use a counter to keep track of lines to give corresponding line number
    String val = line.replace("*",counterVar.toString());

}
br.close(); 
```

再次使用写回文件，如果您愿意，可以`BufferedWriter`将其包装起来，`PrintWriter`

```
PrintWriter out = new PrintWriter(new BufferedWriter(new FileWriter("outputfile"))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:28:44.200

尝试这样的事情（未经测试的代码）：

```
try{
       List<String> lines = Files.readAllLines(fileName, Charset.defaultCharset());
        for (int i = 0; i< lines.size(); i++) {
            lines.set(i, lines[i].replace("*", String.valueOf(i)));
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
 ...//Then save the file 
```

# c - 两个元素之间的最大差异

> ID：15833681
> 
> 赞同：5
> 
> 时间：2013-04-05T12:13:24.303
> 
> 标签：c, arrays, algorithm

给定一个整数数组，我必须找出任何两个元素之间的最大差异，以便在数组中较小的数字之后出现较大的数字。我使用了一种简单的方法，并通过保持与迄今为止遇到的最小数字的差异两件事的轨迹

1.最大差异

2.到目前为止访问的最少人数。

```
 int min_element=arr[0];
    int diff=arr[1]-arr[0];
    for(i=1;i<n;i++)
    {
        if(arr[i]-min_element>diff)
            diff=arr[i]-min_element;
        if(arr[i]<min_element)
            min_element=arr[i];
    }
    return diff; 
```

有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T14:22:55.833

就目前而言，您的算法是最优的，直到一个常数因子。

读取`n`整数数组需要`Ω(n)`. 你的算法是`O(n)`，所以你很好。

# c++ - C++ 对齐 - 严格和弱

> ID：15833683
> 
> 赞同：11
> 
> 时间：2013-04-05T12:13:27.727
> 
> 标签：c++, c++11, alignment, strict

我正在阅读 N3485 C++ 标准草案，在对齐部分中，它指出以下内容：

**3.11 对齐[basic.align]**

> 1 ...对齐是实现定义的整数值，表示可以分配给定对象的连续地址之间的字节数。对象类型对该类型的每个对象都有对齐要求；**可以使用对齐说明符**（7.6.2）请求更严格的对齐。

这里说明了对齐是什么，我明白了。这意味着如果您有 32 位（4 字节）系统，它将一次读取 4 字节大小的块，因此您应该将内容放在内存中的 4 字节偏移地址处。很多这些都是由一个好的编译器处理的，但是 C++ 也让你有发言权。

它所说的对齐说明符是`alignas`.

您可以传递一个整数来`alignas`指定您的对齐要求或类似的类型`alignas(double)`

现在，您有弱或严格的对齐方式，如下所示：

> 5 阵营有从*弱到强或更严格*的 排列顺序。**更严格的对齐具有更大的对齐值。**满足对齐要求的地址也满足任何较弱的有效对齐要求。
> 
> 7 比较对齐是有意义的，并提供了明显的结果：
> 
> — 当数值相等时，两个对齐是相等的。
> 
> — 当数值不相等时，两个对齐是不同的。
> 
> —*当一个对齐大于另一个对齐时，它表示更严格的对齐。*

所以这里它指出更严格的对齐是更大的对齐。这是否意味着`alignas(8)`比 更严格`alignas(4)`？在 32 位（4 字节）系统上，8 版本意味着该`int`类型需要两次读取而不是一次读取，而一次只需要填充。严格指的是当对齐被“误用”时，它会给 CPU 带来潜在的开销，就像这个愚蠢的例子一样？

我意识到并非所有对齐在给定系统上都有效，并且扩展对齐必须有效才能产生正确的行为。

对我来说，对齐是关于让 CPU 以字大小的块访问内存数据，这是 CPU 从内存中获取和写入数据的最佳方式。

据我了解，这种严格的对齐方式可能会毁掉它。我错了吗？什么是严格对齐与弱对齐？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T12:47:24.013

“严格”仅指更大的对齐值在可能的地址方面更具限制性的事实。

对齐 8 的有效地址只有对齐 4 的一半，因此对齐 8 的类型在放置位置方面受到更多限制。

# iphone - 卡在 UIViewAutoresizingMask

> ID：15833686
> 
> 赞同：0
> 
> 时间：2013-04-05T12:13:40.943
> 
> 标签：iphone, ipad, ios5, ios6, ipad-2

嗨，我是 iOS 开发的新手`UITableViewCell`，我在其中添加了自定义单元设计

在我添加的一个单元格中添加了两个标签

> ```
> UILabel *label =  [[UILabel alloc] initWithFrame: CGRectMake(/* where you want it*/)];
> label.text = @"text"; //etc...
> label.autoresizingMask=UIViewAutoresizingFlexibleWidth;
> [self.contentView addSubView:label];
> [label release]; 
> ```

我的第一个标签被屏蔽但第二个标签在重新定位表时粘在哪里

我正在使用 iOS6

# mongodb - 不包括没有投影的查询

> ID：15833691
> 
> 赞同：1
> 
> 时间：2013-04-05T12:13:58.083
> 
> 标签：mongodb, indexing, mongodb-query

请参见下面的 shell 示例（假设 db.test 不存在）：

```
db.test.ensureIndex({info: 1, _id: 1})
db.test.insert({info: "info1"})
db.test.insert({info: "info2"})
db.test.insert({info: "info3"})
db.test.find({info: "info1"}).explain().indexOnly //is false
db.test.find({info: "info1"}, {_id: 1, info: 1}).explain().indexOnly //is true 
```

第一个`explain`有`indexOnly : false`，而第二个有，`indexOnly : true`尽管这两个查询是严格等价的。

为什么没有`db.test.find({info: "info1"})` [覆盖查询](http://docs.mongodb.org/manual/tutorial/create-indexes-to-support-queries/#indexes-covered-queries)？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T13:11:13.520

我一直在思考和测试这个，现在它确实有意义。如果您不添加投影，MongoDB 将无法“知道”您拥有的索引是否实际填充了整个返回；我的意思是它如何知道索引覆盖了投影而不查看文档？

`select *`它与`select d,e`SQL中的 and 相同。你怎么能知道那`*`和`d,e`没有实际看的一样呢？

如果您提供投影，那么 MongoDB 可以“知道”查看索引将为您提供完整的结果集，但是，如果没有投影，它就不能。

所以经过一番思考，我认为这不是一个错误，它只是一个“怪癖”。

# angularjs - 如何在 AngularJS 中设置单选按钮的默认值？

> ID：15833692
> 
> 赞同：59
> 
> 时间：2013-04-05T12:13:59.353
> 
> 标签：angularjs

我需要建立一个系统来根据所选票数更改总价。我创建了一些单选按钮来选择票的数量。问题是默认值未设置，加载时结果为空。

```
<input type="radio" ng-model="people" value="1" checked="checked"><label>1</label>
<input type="radio" ng-model="people" value="2"><label>2</label>
<input type="radio" ng-model="people" value="3"><label>3</label>
<ul>
  <li>{{10*people}}€&lt;/li>
  <li>{{8*people}}€&lt;/li>
  <li>{{30*people}}€&lt;/li>
</ul> 
```

[请看我的jsfiddle。](http://jsfiddle.net/Nuw9R/)

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2013-04-05T12:21:13.203

`people`使用[ngInit](http://docs.angularjs.org/api/ng.directive%3angInit)设置默认值

```
<div ng-app>
    <div ng-init="people=1" />
        <input type="radio" ng-model="people" value="1"><label>1</label>
        <input type="radio" ng-model="people" value="2"><label>2</label>
        <input type="radio" ng-model="people" value="3"><label>3</label>
    <ul>
        <li>{{10*people}}€&lt;/li>
        <li>{{8*people}}€&lt;/li>
        <li>{{30*people}}€&lt;/li>
    </ul>
</div> 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/P3ctY/)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-10-14T06:40:30.747

```
<div ng-app="" ng-controller="myCntrl">    
        <input type="radio" ng-model="people" value="1"/><label>1</label>
        <input type="radio" ng-model="people" value="2"/><label>2</label>
        <input type="radio" ng-model="people" value="3"/><label>3</label>
</div>
<script>
    function myCntrl($scope){
        $scope.people=1;
    }
</script> 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2016-03-27T02:07:05.213

为什么不只是`ng-checked="true"`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-08T11:55:52.220

在 Angular 2 中，我们可以这样设置单选按钮的默认值：

HTML：

```
<label class="form-check-label">
          <input type="radio" class="form-check-input" name="gender" 
          [(ngModel)]="gender" id="optionsRadios1" value="male">
          Male
</label> 
```

在组件类中，将“性别”变量的值设置为单选按钮的值：

```
gender = 'male'; 
```

* * *

## 回答 #5

> 赞同：-6
> 
> 时间：2016-10-04T14:57:22.900

```
<input type="radio" name="gender" value="male"<%=rs.getString(6).equals("male") ? "checked='checked'": "" %>: "checked='checked'" %> >Male
               <%=rs.getString(6).equals("male") ? "checked='checked'": "" %> 
```

# android - MediaRecorder.stop() 停止失败：-1007

> ID：15833694
> 
> 赞同：29
> 
> 时间：2013-04-05T12:14:08.800
> 
> 标签：android, video-capture, mediarecorder, android-mediarecorder

我正在使用 MediaRecorder 录制视频。我的代码在 2.3.3 上运行良好，但在 4.0.3 上失败。

问题如下：代码 mediaRecorder.stop() 抛出 RuntimeExeption

```
java.lang.RuntimeException: stop failed.
    at android.media.MediaRecorder.stop(Native Method) 
```

带有 LogCat 消息

```
04-05 15:10:51.815: E/MediaRecorder(15709): stop failed: -1007 
```

更新

我发现，MediaPlayer 几乎在启动后立即报告错误（通过 MediaPlayer.OnErrorListener）。错误代码是 100（媒体服务器死机），额外的 -1007。

更新 2 准备 MediaRecorder 的代码

```
 c = Camera.open();

    ...

    // Step 1: Unlock and set camera to MediaRecorder
    camera.unlock();
    mediaRecorder.setCamera(camera);

    // Step 2: Set sources
    mediaRecorder.setAudioSource(MediaRecorder.AudioSource.CAMCORDER);
    mediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);

    // Step 3: Set a CamcorderProfile (requires API Level 8 or higher)
    CamcorderProfile profile = CamcorderProfile
            .get(CamcorderProfile.QUALITY_HIGH);

    // manual set up!

    mediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);

    mediaRecorder.setVideoEncodingBitRate(profile.videoBitRate);
    mediaRecorder.setVideoFrameRate(profile.videoFrameRate);
    mediaRecorder.setVideoSize(profile.videoFrameWidth,
            profile.videoFrameHeight);

    mediaRecorder.setAudioChannels(profile.audioChannels);
    mediaRecorder.setAudioEncodingBitRate(profile.audioBitRate);
    mediaRecorder.setAudioSamplingRate(profile.audioSampleRate);

    mediaRecorder.setAudioEncoder(profile.audioCodec);
    //mediaRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.MPEG_4_SP);
    mediaRecorder.setVideoEncoder(profile.videoCodec);

    // mediaRecorder.setProfile(profile);

    // Step 4: Set output file
    mediaRecorder.setOutputFile("somefile.mp4");

    // Step 5: Set the preview output
    mediaRecorder.setPreviewDisplay(preview.getHolder().getSurface());

    // Step 6: Prepare configured MediaRecorder
    try {
        mediaRecorder.prepare();
    } catch ...
    { release mediaRecorder} 
```

然后我只需调用 mediaRecorder.start() 请注意，我需要将视频编码为 mp4 格式。此代码适用于 Samsng Galaxy GIO (android 2.3.3) 并且如 Acer E305 (android 4.0.2) 所述失败

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-05-14T12:28:53.217

终于解决了。问题是在设置相机的实际预览之前设置预览大小。预览大小**必须**等于所选视频大小。

```
CamcorderProfile profile = [get required profile];

Camera.Parameters parameters = mCamera.getParameters();
parameters.setPreviewSize(profile.videoFrameWidth,profile.videoFrameHeight);
mCamera.setParameters(parameters);

mCamera.setPreviewDisplay([surface holder]);
mCamera.startPreview();

...

//configure MediaRecorder and call MediaRecorder.start() 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-04-13T10:02:58.620

引用 4.0.3 中 MediaRecorder.java 中“停止”方法的文档：

> 停止录制。在 start() 之后调用它。停止录制后，您必须重新配置它，就像它刚刚构建一样。请注意，如果在调用 stop() 时未收到有效的音频/视频数据，则会故意向应用程序抛出 RuntimeException。如果在 start() 之后立即调用 stop()，就会发生这种情况。失败让应用程序采取相应的行动来清理输出文件（例如，删除输出文件），因为发生这种情况时输出文件的构造不正确。

MediaPlayer 报告这个“媒体服务器死机”的事实是由于同样的原因。您能否发布其余代码以查看是否存在任何可能导致此问题的误解？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-09-15T10:53:50.507

我在某些设备上遇到了 -1007 错误，主要是 android 9，最后我解决了这个问题。原因是 OMX.google.h264.encoder 仅支持可被 16 整除的视频尺寸。我使用 displayMetrics.widthPixels 和 displayMetrics.heightPixels 作为视频尺寸，它并不满足所有设备的要求。

希望这对某人有帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-07-04T01:18:54.010

我在三星 J4+、Android 9 Pie 上遇到了同样的问题。

通过在处理程序中运行 mediaRecorder.start() 和 mediaRecorder.stop() 来修复它：

```
private val START = 0;
private val STOP  = 1;

inner class CameraHandler(looper: Looper?): Handler(looper) {

  override fun handleMessage(msg: Message?) {
    super.handleMessage(msg)
      try {
        when (msg?.what) {
          START -> mediaRecorder?.start()
          STOP  -> mediaRecorder?.stop()
        }
      } catch (e: Exception) {
        Log.d("debug", e.message)
      }
  }
} 
```

声明处理程序：

```
private lateinit var mCameraHandler: Handler 
```

使用 HandlerThread Looper 在 OnCreate 中初始化：

```
val handlerThread: HandlerThread = HandlerThread("Camera Handler Thread")
handlerThread.start()
mCameraHandler = CameraHandler(handlerThread.looper) 
```

单击录制或停止按钮时调用：

```
mCameraHandler.sendEmptyMessage(START)
mCameraHandler.sendEmptyMessage(STOP) 
```

[链接到我乱七八糟的代码 xD](https://github.com/biinui/camera-withLightSensor/blob/master/app/src/main/java/com/example/camerawithlightdata/MainActivity.kt)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-22T02:27:38.380

所以我发现在 API 18 的 Android 模拟器上为我报告了这个错误（在更高版本的录制工作正常之后）。

我发现如果我`Camera.startPreview()`在初始化并开始启动我的`MediaRecorder`实例之前打电话，我会`stop failed: -1007`在调用时得到日志`MediaRecorder.stop`，但如果我`Camera.stopPreview()`在初始化我`MediaRecorder`的视频之前打电话会很好地录制。

我希望这有帮助

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-26T17:13:40.210

我发布了一个很好的解决方法来查找`MediaRecorder`is`prepared`和`started`. 简而言之，您应该检查是否`MediaRecorder.maxAmplitude > 0`，如果有任何记录，则应该是这种情况。我正在使用一个助手来处理这个问题，该助手会不断检查条件，直到它大于零。在此处阅读完整说明：[https ://stackoverflow.com/a/66821059/15389960](https://stackoverflow.com/a/66821059/15389960)

# javascript - XMLHttpRequest lengthComputable 始终为 false

> ID：15833704
> 
> 赞同：6
> 
> 时间：2013-04-05T12:14:39.187
> 
> 标签：javascript, ajax

我需要 AJAX 加载大的二进制文件，因此我想显示一个进度指示器。当设置了“Content-Length”标头时，我已阅读 Progress.event 参数的 lengthComputable 字段为 true。我有这个标题，但 lengthComputable 总是错误的。我做错了什么？

这是代码：

```
function onProgress(evt){
    if(evt.lengthComputable){
        this.progress = (evt.loaded / evt.total)*100; 
        // do something  ...
    }
}

function load(url){
    var me = this;
    var xhr = new XMLHttpRequest();
    xhr.open('GET', url, true);
    xhr.responseType = 'arraybuffer';   
    xhr.onload = this.load;
    xhr.onprogress = this.updateProgress;
    xhr.send();
} 
```

这是标题（来自 Chrome）：

```
Request URL:http://localhost/cgi-bin/test.cgi
Request Method:GET
Status Code:200 OK
Request Headersview source
Accept:*/*
Accept-Encoding:gzip,deflate,sdch
Accept-Language:es-419,es;q=0.8
Connection:keep-alive
Cookie:__utma=1.1581312881.1342448904.1342729430.1342812228.5
Host:localhost
Referer:http://localhost/cgi-bin/test.cgi
User-Agent:Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.35 (KHTML, like Gecko) Chrome/27.0.1448.0 Safari/537.35
Query String Parametersview sourceview URL encoded
idimage:3431
Response Headersview source
Connection:Keep-Alive
Content-Encoding:deflate
Content-Length:11825252
Content-Type:application/binaryfile
Date:Fri, 05 Apr 2013 11:36:06 GMT
Keep-Alive:timeout=5, max=98
Server:Apache/2.2.22 (FreeBSD) mod_ssl/2.2.22 OpenSSL/0.9.8x DAV/2 PHP/5.3.10 with Suhosin-Patch mod_python/3.3.1 Python/2.7.3 mod_perl/2.0.5 Perl/v5.10.1 
```

**编辑**：看起来问题出在内容编码上，在我的例子中是 deflate：[如何使用 XHR onProgress 函数使用压缩/压缩的内容？](https://stackoverflow.com/questions/15097712/how-can-i-use-deflated-gzipped-content-with-an-xhr-onprogress-function)

# python - 将 2 添加到列表 [[23,34],[34,23]]

> ID：15833705
> 
> 赞同：-1
> 
> 时间：2013-04-05T12:14:44.747
> 
> 标签：python, list

我有一个看起来像的列表`[[23,34],[43,23]]`，我想为每个数字添加一个 int 所以说如果我想向它添加 2 列表变为`[[25,36],[45,25]]`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T12:15:58.643

```
>>> nums = [[23,34],[43,23]]
>>> [[y + 2 for y in x] for x in nums]
[[25, 36], [45, 25]] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T12:17:57.363

麻木：

```
import numpy as np
a = np.array([[23,34],[43,23]])
b = a + 2 #inplace:  a += 2 
```

# java - 具有两种模式的正则表达式

> ID：15833709
> 
> 赞同：-1
> 
> 时间：2013-04-05T12:14:56.513
> 
> 标签：java, regex

我有一个要求，我想从一个长字符串中获取两个不同的项目。我有以下程序，当我执行 group(1) 和 group(6) 时，我会在其中获得所需的项目。但我想在组（1）和组（2）中得到它。

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class RegexExample {
public static void main(String args[]) {
   String somepattern = "((123|456)-(0|1)-((\\d-?){8})-\\d{1})/(\\d{2})";

   String str = "/somethingwaste/123-0-1234-5678-9/10"; 
   Matcher p = Pattern.compile(somepattern).matcher(str);
    while (p.find()) {
    System.out.println(p.group(1));
    System.out.println(p.group(6));
   } 
```

任何指针方向appriciated。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T12:21:36.613

这应该这样做

```
String somepattern = "((?:123|456)-[01]-(?:\\d-?){8}-\\d)/(\\d{2})"; 
```

使`?:`非`()`捕获。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T12:19:12.593

只需创建您不想继续`non-capturing`使用的组`?:`：

```
String somepattern = "((?:123|456)-[01]-(?:\\d-?){8}-\\d)/(\\d{2})";
String str = "/somethingwaste/123-0-1234-5678-9/10";
Matcher p = Pattern.compile(somepattern).matcher(str);
while (p.find()) {
    System.out.println(p.group(1));
    System.out.println(p.group(2));
} 
```

# jquery - 单击另一个链接时显示隐藏链接

> ID：15833711
> 
> 赞同：0
> 
> 时间：2013-04-05T12:14:58.913
> 
> 标签：jquery

我有一个页面将显示 2 个图表，其中包含不同的信息，具体取决于在我的页面顶部单击哪个链接（在地址行中添加变量）。

单击此链接时，我还希望在图表下方显示一个按钮，添加一个下载整个数据库的选项。

我对此进行了调查，并找到了一个“应该”有效的解决方案，但事实并非如此。

我的菜单：

```
 <div class="menu">
    <a href="mf.html?area=AC">KMA</a>
    <a href="mf.html?area=OC">KMO</a>
 </div> 
```

jQuery（放置在 Docuemnt.ready 函数内）：

```
$("#menu").click(function () {
    $("#downloadlink").show();
}); 
```

最后，我要创建的链接出现：单击此处下载数据库

以上不起作用。如果有人可以就此事提供帮助，我将不胜感激，因为坦率地说，我有点沮丧，这接近周末！

在此先感谢，乔恩。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T12:18:29.137

尝试：

```
$(".menu a").click(function () {
    $("#downloadlink").show();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T12:18:56.697

很难找出问题所在，但您可以尝试触发对锚点的点击，可能它们位于 div 的“前面”，所以您点击它们而不是 div.menu

```
$(".menu a").click(function () {
    $("#downloadlink").show();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T12:19:27.513

类选择器是形式`.classname`而不是`#classname`

```
$('.menu a').click(function() {
    $("#downloadlink").show();
    return false; // important
}); 
```

应该做的伎俩。

# c++ - 从 C++ 修改 python 列表

> ID：15833715
> 
> 赞同：4
> 
> 时间：2013-04-05T12:15:05.230
> 
> 标签：c++, python, ctypes

我有一个 Python 列表，我可以获取它的指针并将这个指针地址传递给 C++ 来处理

```
MyPointer = TheList.as_pointer() 
```

现在我使用 ctypes 将此地址传递给 C++

在 C++ 中，我可以执行以下操作：

```
*(float*) MyPointer = 2.0f; //for example 
```

并且 Python 值会立即更新，现在的问题是：如何扩展或删除一些值（比如直接从 C++ 修改列表），因为我觉得这些数据是`std::vector`如何做`push_back`的等等，以快速调整大小（因为在 Python 中迭代非常慢）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T12:25:54.817

仅给定该指针，您无法扩展列表。您传递给 C++ 的是内部用于实现 Python 列表的*数组的地址。*这不能是`std::vector`，因为 Python 列表不是作为 STL 向量实现的，而是作为 Python 对象引用的 C 级数组实现的。这些数组不包含指向 Python 列表对象的反向指针。

要更改列表，请查看[文档](http://docs.python.org/2/extending/)并将您的 C++ 代码与 Python 库链接。如果您确实必须从 ctypes 调用您的 C++ 函数，请使用列表的 调用它`id`以获取指向列表的指针，而不是其元素数组。然后你可以像这样对列表进行操作：

```
#include <Python.h>

extern "C"
void append_to_list(uintptr_t lst_id)
{
    PyObject* lst = reinterpret_cast<PyObject*>(ptr);
    PyObject* new_num = PyFloat_FromDouble(2.0);
    if (!new_num) {
        ... PyFloat creation failed ...
    }
    int ret = PyList_Append(lst, new_num);
    Py_DECREF(new_num);
    if (ret) {
        ... PyList_Append failed ...
    }
} 
```

# android - 如何在android中打开没有地址栏的网页

> ID：15833716
> 
> 赞同：1
> 
> 时间：2013-04-05T12:15:06.093
> 
> 标签：android, browser

我使用此代码打开浏览器并使用地址栏打开网页

```
String url = "http://www.google.com";
Itent i = new Intent(Intent.ACTION_VIEW);
i.setData(Uri.parse(url));
startActivity(i); 
```

但我想在我的网页中隐藏地址栏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:46:43.170

您可以使用`WebView`：

```
WebView wt;

wt.loadUrl("http://www.google.com/"); 

// Make sure that to prevent opening in browser with address bar, 
// dont forget to add below line

wt.getSettings().setJavaScriptEnabled(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:34:23.330

为此，您必须使用 WebView 客户端。这肯定会奏效。

```
 webView.setWebViewClient(new WebViewClient() {
            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url) {
                view.loadUrl(url);
                return true;
            }
        });
        webView.loadUrl(url); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T12:17:55.403

为此，您可以只使用您的 WebView。打开默认浏览器将始终有一个地址栏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T12:17:55.777

唯一的方法是使用 a`WebView`和 a `WebViewClient`。你打开系统浏览器你不能隐藏地址栏

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T12:22:52.133

尝试这个：

```
webView = (WebView) findViewById(R.id.webView1);
        webView.getSettings().setJavaScriptEnabled(true);
        webView.loadUrl("http://www.google.com"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-19T03:10:22.487

一个基本的例子使用`<meta name="mobile-web-app-capable" content="yes">`

请参阅：[https ://developer.chrome.com/multidevice/android/installtohomescreen](https://developer.chrome.com/multidevice/android/installtohomescreen)

```
<!doctype html>
<html>
   <head>
     <title>Awesome app </title>
     <meta name="viewport" content="width=device-width">
     <meta name="mobile-web-app-capable" content="yes">
     <link rel="icon" sizes="192x192" href="/icon.png">
   </head>
   <body></body>
</html> 
```

至于打开它，您可以单击主屏幕上的链接。此链接是通过单击“添加到主页”选项来完成的。我希望找到一种方法来自动创建此链接...

# php - json_encode 在 array_filter 之后具有不同的结果

> ID：15833720
> 
> 赞同：7
> 
> 时间：2013-04-05T12:15:13.813
> 
> 标签：php, json, array-filter

我希望 json_encode 返回类似这样的内容

```
[{key: "value"},{key:"value"},...] 
```

相反，我得到这样的东西：

```
{"1": {key: "value"}, "2": {key: "value"}, ...} 
```

结果很好，直到我做了一个`array_filter`......奇怪......

```
function somefunction($id, $ignore = array()) {
    $ignorefunc = function($obj) use ($ignore) {
        return !in_array($obj['key'], $ignore);
    };

    global $db;

    $q = "Some query";

    $rows = $db->giveMeSomeRows();
    $result = array();
    if ($rows) {
        // this mapping I've always done
        $result = array_map(array('SomeClass', 'SomeMappingFunction'), $rows);
        if (is_array($ignore) && count($ignore) > 0) {
            /////// PROBLEM AFTER THIS LINE ////////
            $result = array_filter($result, $ignorefunc);
        }
    }
    return $result;
} 
```

再说一次，如果我注释掉我会从任何返回中`array_filter`得到我想要的东西，否则我会得到一个 JSON 对象。`json_encode``somefunction`

如果我`var_dump` `$result`之前和之后`array_filter`是相同类型的 PHP 数组，键中没有字符串等等。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-05T12:16:45.227

你想要一个`array`但你得到了`json`对象，因为你的数组不是从`0`尝试使用`array_values`重置数组开始的

例子

```
$arr = array(1=>"a",2=>"Fish");
print(json_encode($arr));
print(json_encode(array_values($arr))); 
```

输出

```
{"1":"a","2":"Fish"}
["a","Fish"] 
```

代替

```
 $result = array_filter($result, $ignorefunc); 
```

和

```
 $result = array_filter($result, $ignorefunc);
  $result = array_values($result); 
```

# ios - 从ios中的蒙版图像创建1张图像

> ID：15833721
> 
> 赞同：0
> 
> 时间：2013-04-05T12:15:20.837
> 
> 标签：ios, objective-c, uiimageview, image-masking

我有一个图像，我用另一个图像掩盖了这个图像以形成形状。
我只想更改蒙面图像的视图背景颜色。
我正在使用`[UIColor colorWithPatternImage:maskedImage];`
但它不起作用。
请建议我如何在 1 张图像中合并或创建蒙面的 2 张图像，以便`colorWithPatternImage`工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:50:58.260

你分配的价值

```
 [UIColor colorWithPatternImage:maskedImage]; 
```

什么？像...

```
 self.maskedView.backgroundColor = [UIColor colorWithPatternImage:maskedImage]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:55:23.340

```
UIImage *originalImage = [UIImage imageNamed:@"original.png"]; //my background image
UIImage *maskedImage       = [UIImage imageNamed:@"maskedImage.png"]; //my masked image

CGSize newSize = CGSizeMake(width, height);
UIGraphicsBeginImageContext( newSize );

[originalImage drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];

[maskedImage drawInRect:CGRectMake(0,0,newSize.width,newSize.height) blendMode:kCGBlendModeNormal alpha:0.6];

UIImage *newMaskedBackGroundImage = UIGraphicsGetImageFromCurrentImageContext();

UIGraphicsEndImageContext(); 
```

然后使用这个 newMaskedBackGroundImage，例如。`[UIColor colorWithPatternImage:newMaskedBackGroundImage];`

# java - 基于两个参数的二维数组排序

> ID：15833723
> 
> 赞同：0
> 
> 时间：2013-04-05T12:15:24.617
> 
> 标签：java, sorting

以下代码执行二维矩阵的“分层”排序。首先，它根据 的值对元素进行排序`ranks`。其次，它采用这个排序矩阵，搜索具有相同值的元素，`ranks`并根据 对它们进行排序`dist`。按降序排列。

**问题1：**是否有可能以更简单的方式达到相同的结果？我试图创建一个`Comparator`，但它为这种特殊情况提供了不正确的结果。

**问题2：**排序后如何获取未排序元素的索引？

```
import java.util.ArrayList;

public class Test {

    public static void main(String args[]) {

        ArrayList<ArrayList<Double>> values = new ArrayList<ArrayList<Double>>();

        ArrayList<Double> ranks = new ArrayList<Double>();
        ArrayList<Double> dist = new ArrayList<Double>();

        ranks.add(8.0);
        ranks.add(3.0);
        ranks.add(8.0);
        ranks.add(1.0);

        dist.add(1.8);
        dist.add(2.8);
        dist.add(1.9);
        dist.add(2.1);

        values.add(0,ranks);
        values.add(1,dist);

        int len = ranks.size();

        ArrayList<ArrayList<Double>> sortedranks = new ArrayList<ArrayList<Double>>();

        sortedranks = order(values,0,ranks.size());

        boolean swapped = true;
        int j = 0;
        double tmp1, tmp2;
        while (swapped) {
              swapped = false;
              j++;
              for (int i = 0; i < len - j; i++) {  
                  double val1 = sortedranks.get(0).get(i);
                  double val2 = sortedranks.get(0).get(i+1);
                  if (val1==val2) {
                    if (sortedranks.get(1).get(i) < sortedranks.get(1).get(i+1)) {    
                        tmp1 = sortedranks.get(1).get(i);
                        tmp2 = sortedranks.get(1).get(i+1);
                        sortedranks.get(1).remove(i);
                        sortedranks.get(1).remove(i);
                        sortedranks.get(1).add(i,tmp2);
                        sortedranks.get(1).add(i+1,tmp1);
                        swapped = true;
                    }
                  }
              }                
        }

        for (int i = 0; i < len; i++) {
            System.out.println("Ranks " + i + " : " + sortedranks.get(0).get(i)
                    + ", Distances : " + sortedranks.get(1).get(i));
        }

    }

    public static ArrayList<ArrayList<Double>> order(ArrayList<ArrayList<Double>> values, int i_start, int i_fin) {
        boolean swapped = true;
        int j = 0;
        int i_rank = 0;
        int i_dist = 1;
        double tmp1_rank, tmp2_rank, tmp1_dist, tmp2_dist;
        while (swapped) {
              swapped = false;
              j++;
              for (int i = i_start; i < i_fin - j; i++) {                                       
                    if (values.get(i_rank).get(i) < values.get(i_rank).get(i+1)) {                          
                          tmp1_rank = values.get(i_rank).get(i);
                          tmp2_rank = values.get(i_rank).get(i+1);
                          tmp1_dist = values.get(i_dist).get(i);
                          tmp2_dist = values.get(i_dist).get(i+1);
                          values.get(i_rank).remove(i);
                          values.get(i_rank).remove(i);
                          values.get(i_dist).remove(i);
                          values.get(i_dist).remove(i);
                          values.get(i_rank).add(i,tmp2_rank);
                          values.get(i_rank).add(i+1,tmp1_rank);
                          values.get(i_dist).add(i,tmp2_dist);
                          values.get(i_dist).add(i+1,tmp1_dist);
                          swapped = true;
                    }
              }                
        }
        return values;
    }
} 
```

使用 Comparator 的代码（不适用于我的情况）：

```
public class MyEntry implements Comparable<MyEntry> {

    private Double rank;
    private Double dist;

    public MyEntry(double rank, double dist) {

        this.rank = rank;
        this.dist = dist;

    }

    public static Comparator<MyEntry> ValueComparator = new Comparator<MyEntry>() {

        public int compare(MyEntry value1, MyEntry value2) {

            Double rfirst = value1.rank;
            Double rsecond = value2.rank;

            Double dfirst = value1.dist;
            Double dsecond = value2.dist;

            if (rsecond != rfirst) {
                return (int) (rsecond - rfirst);
            } 
            else {
                return (int) (dsecond - dfirst);
            }

        }

    };
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:51:56.977

您的 Comperator 方法可行，但有一些错误。首先，我会将`Double`s替换`MyEntry`为`double`。

比较`Double`不等于比较`double` 例如：

```
Double a = 1.0;
Double b = 1.0;
System.out.println(a == b);
System.out.println(a.equals(b));
System.out.println(a.doubleValue()== b.doubleValue()); 
```

将返回

```
false
true
true 
```

然后在您投射到的比较中`int`，但这意味着该数据的底线。 `(int) (2 - 1.9)`将给出`0` 更好的是比较使用`<`并返回-1或1。

```
 public static Comparator<MyEntry> ValueComparator = new Comparator<MyEntry>() {

    public int compare(MyEntry value1, MyEntry value2) {

        double rfirst = value1.rank;
        double rsecond = value2.rank;

        double dfirst = value1.dist;
        double dsecond = value2.dist;

        if (rsecond != rfirst) {
            return rsecond < rfirst?-1:1;
        } 
        else if(dsecond!=dfirst){
            return dsecond < dfirst ?-1:1;
        }
        return 0;

    }
} 
```

对于第二个问题，您需要一个索引。这可以通过两种方式完成。第一个选项是`MyEntry`像这样包含索引：

```
 public class MyEntry implements Comparable<MyEntry> {

private double rank;
private double dist;
private int index;
private static int nextIndex = 0;

public MyEntry(double rank, double dist) {

    this.rank = rank;
    this.dist = dist;
    this.index = nextIndex++;

} 
```

这样您将能够保留索引，但它不是那么灵活。

一种更灵活的方法可能是将索引放在单独的数组中，然后对其进行排序。

```
 class IndexedArrayComparator implements Comparator<Integer>{

    MyEntry[] array;

    public IndexedArrayComparator(MyEntry[] entries){
        this.array=entries;
    }

    public Integer[] createIndexes(){
        Integer[] index = new Integer[array.length];
        for(int i =0;i<index.length;i++){
            index[i]=i;
        }
        return index;
    }

    public int compare(Integer i0, Integer i1) {
        double rfirst = array[i0].rank;
        double rsecond = array[i1].rank;

        double dfirst = array[i0].dist;
        double dsecond = array[i1].dist;

        if (rsecond != rfirst) {
            return rsecond > rfirst?-1:1;
        } 
        else if(dsecond!=dfirst){
            return dsecond > dfirst ?-1:1;
        }
        return 0; 
    }

} 
```

然后你可以像这样使用它：

```
 MyEntry[] entries = new MyEntry[5];
 entries[0]= new MyEntry(1.1,5);
 entries[1]= new MyEntry(1.1,4);
 entries[2]= new MyEntry(2.1,5);
 entries[3]= new MyEntry(0.1,3);
 entries[4]= new MyEntry(3.1,1);

 IndexedArrayComparator comp = new IndexedArrayComparator(entries);
 Integer[] index = comp.createIndexes();
 Arrays.sort(index,comp);
 for(int i =0;i<index.length;i++){
     MyEntry e = entries[index[i]];
     System.out.println(String.format("%2d:r= %3.1f, d= %3.1f" ,index[i],e.rank,e.dist));
 } 
```

这将给出：

```
 3:r= 0.1, d= 3.0
 1:r= 1.1, d= 4.0
 0:r= 1.1, d= 5.0
 2:r= 2.1, d= 5.0
 4:r= 3.1, d= 1.0 
```

[此处](https://stackoverflow.com/questions/4859261/get-the-indices-of-an-array-after-sorting)还介绍了在保持索引的同时进行排序的第二种方式。归功于 Jon Skeet

# licensing - 在商业项目中使用 MimeTeX.dll

> ID：15833725
> 
> 赞同：-1
> 
> 时间：2013-04-05T12:15:29.697
> 
> 标签：licensing

这是我在 SO 中的第一个问题。我阅读[了这个页面](http://www.codeproject.com/Articles/11406/Enable-Your-Users-to-Write-Math-Equations-in-Your)，现在我想在我的商业闭源项目中使用 MimeTeX.dll。关于 MimeTeX 项目的许可，我可以合法地这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:42:31.343

MimeTeX 是[GPL 许可](http://www.forkosh.com/weblist.cgi?-t=weblist&-o=php&-f=htdocs/source_mimetex.html#gpl)的，因此除非您获得版权所有者的特别许可，否则您不得在封闭源代码产品中使用它。

# iphone - 如何从服务器的 IP 地址获取服务器的机器名称？

> ID：15833728
> 
> 赞同：-1
> 
> 时间：2013-04-05T12:15:33.567
> 
> 标签：iphone, ios, ip-address

谁能告诉我如何获取托管服务器的机器名称，我知道它的 IP 地址。我知道它可以从服务器本身发送，但仍然对如何从 Iphone 完成它感到好奇。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:54:48.553

我假设您正在尝试进行反向 DNS 查找。您可以通过 iPhone 使用一些基于 Web 的服务。例如：[http ://www.ipchecking.com/](http://www.ipchecking.com/)

但是，如果 IP 地址被多个服务器使用，这可能不会为您提供有用的结果。您在服务器上查找的服务也可能只响应与所列名称不同的名称。

# ios - Objective-C中的@符号？

> ID：15833731
> 
> 赞同：-1
> 
> 时间：2013-04-05T12:15:40.100
> 
> 标签：ios, objective-c, ios6

`@`中的记号是什么意思`Objective-C`？前任：`self.splitViewController.viewControllers = @[masterNavigationController, detailNavigationController];`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T12:20:34.203

这些是`literals`您从 Apple LLVM Compiler 4.0 / clang v3.1 开始就可以使用的。有关详细概述，请参阅[Objective-C 文字](http://clang.llvm.org/docs/ObjectiveCLiterals.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:21:16.673

@ 是编译器指令的标志。（基本上是宏）

在您的示例中，您会看到 NSArray Literal 的语法。

@[元素对象，另一个元素对象，...]；

# xcode4.3 - 如何使用 .srt 文件在 xcode 中显示字幕

> ID：15833735
> 
> 赞同：1
> 
> 时间：2013-04-05T12:15:50.250
> 
> 标签：xcode4.3

我需要在 xcode 中的视频下显示字幕..我知道我们可以使用 .srt 文件来显示字幕..我可以解析 .srt 文件..但我的问题是我不知道如何在 .srt 文件中制作文本要在视频下显示，如何设置时间间隔.. 任何人请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-16T04:56:51.050

我从堆栈溢出链接中得到它......我忘记了那个链接......那个链接中的代码是这个 -

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"srtfilename" ofType:@"srt"];

NSString *string = [NSString stringWithContentsOfFile:path encoding:NSUTF8StringEncoding error:NULL];

NSScanner *scanner = [NSScanner scannerWithString:string];

while (![scanner isAtEnd])
   {
     @autoreleasepool
     {
       NSString *indexString;

       (void) [scanner scanUpToCharactersFromSet:[NSCharacterSet newlineCharacterSet] intoString:&indexString];

       NSString *startString;
       (void) [scanner scanUpToString:@" --> " intoString:&startString];

       // My string constant doesn't begin with spaces because scanners
       // skip spaces and newlines by default.
       (void) [scanner scanString:@"-->" intoString:NULL];

       NSString *endString;
       (void) [scanner scanUpToCharactersFromSet:[NSCharacterSet newlineCharacterSet] intoString:&endString];

       NSString *textString;
       // (void) [scanner scanUpToCharactersFromSet:[NSCharacterSet newlineCharacterSet] intoString:&textString];
                // BEGIN EDIT
       (void) [scanner scanUpToString:@"\r\n\r\n" intoString:&textString];
       textString = [textString stringByReplacingOccurrencesOfString:@"\r\n" withString:@" "];
       // Addresses trailing space added if CRLF is on a line by itself at the end of the SRT file
       textString = [textString stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];
      // END EDIT

       NSDictionary *dictionary = [NSDictionary dictionaryWithObjectsAndKeys:
                                            indexString , @"index",
                                            startString, @"start",
                                            endString , @"end",
                                            textString , @"text",
                                            nil];

      NSLog(@"%@", dictionary); } } 
```

我确实通过这个解析了srt文件......我在电影播放器​​（MPMovieControlStyleNone）视图上添加了UITextView......我确实通过使用startString和endString使用计时器自动更改了文本......我只能通过自定义播放来播放和暂停播放器和暂停按钮...

# windows-8 - Testacular 安装失败，没有 vcbuild.exe

> ID：15833736
> 
> 赞同：19
> 
> 时间：2013-04-05T12:15:51.313
> 
> 标签：windows-8, socket.io, npm, vcbuild, karma-runner

我正在尝试在 Windows 8 Professional（64 位）笔记本电脑上安装 Testacular（使用 nmp），但是当它尝试在此过程中安装 socket.io 时失败。我得到的错误是

```
Could not load the Visual C++ component "VCBuild.exe".
To fix this, 1) install the .NET Framework 2.0 SDK, 2) install Microsoft Visual 
Studio 2005 or 3) add the location of the component to the system path if it
is installed elsewhere. 
```

我显然已经安装了 .NET 框架 3.5（它在控制面板中的添加/删除 Windows 组件位下进行了检查），尽管我没有设法找到 vcbuild.exe。我尝试安装 VS2005 的旧副本，但这导致了有关无效项目 (.vcproj) 文件的不同错误。

谁能建议我如何让这个工作？奇怪的是，它在我的工作计算机上安装得很好，这与它不会安装的计算机非常相似（它们都是 64 位 Win 8 Pro）。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-10T22:29:28.723

我遇到了同样的问题。我通过将其添加到环境变量 PATH: C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\vcpackages 来解决此问题，以便它可以找到 vc build。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-06T19:42:41.057

在 Visual Studio 2010 中，命令行工具 vcbuild.exe 被替换为 msbuild.exe。因此，请确保您拥有正确的 Visual Studio。

# c++ - 在 C++ 中获取总内存和空闲内存

> ID：15833740
> 
> 赞同：3
> 
> 时间：2013-04-05T12:16:09.500
> 
> 标签：c++, memory

C++ 是否有类似 java 中的方法

```
Runtime.getRuntime().totalMemory()
Runtime.getRuntime().freeMemory() 
```

我是这样使用的

```
long mem0 = Runtime.getRuntime().totalMemory() - Runtime.getRuntime().freeMemory();
/*
stuff to do
*/ 
long mem1 = Runtime.getRuntime().totalMemory() - Runtime.getRuntime().freeMemory();              
System.out.println(mem1-mem0); 
```

查找程序使用的内存。这里有 C++ 中的类似物吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T12:21:52.973

它没有在 C++ 标准中指定，在 Windows 下你需要使用 WinAPI[例如这个](http://msdn.microsoft.com/de-de/library/windows/desktop/ms683219%28v=vs.85%29.aspx)和在 linux 下你需要使用库或调用 syscalls。

# php - 如何使用 php 从 mysql 获取 unicode 字符的子字符串

> ID：15833749
> 
> 赞同：0
> 
> 时间：2013-04-05T12:16:49.787
> 
> 标签：php, mysql, sql

Unicode 字符以这种格式存储在 mysql 数据库中

```
&#1740;&#1729;&#1575;&#1722; &#1578;&#1608; 
```

我的数据库中不仅有 unicode 字符，还有 html 和英文字符混合在一起。

问题是我想从数据库字段中获取部分字符串`'post_body'` 我使用了以下 sql 查询

```
"SELECT SUBSTRING(post_body,1,120) as pst_body from mytable"; 
```

这个字符串准确地给了我 120 个字符。但问题是数据库中是否有 unicode 符号`&#1740; is equal to 1 unicode character`，所以我的要求不能以这种方式满足。是否有任何函数可以返回我指定的字符数，无论是 unicode 字符还是英文字符，意味着如果有 unicode 数据，它应该算作`&#1740;`一个字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:50:35.340

我不认为，在 mysql 中有任何选项，您可以从 mysql 获取数据然后在 PHP 中执行操作。

```
function getSubstring($string, $number){

    $keywords = preg_split("/([&])+/", htmlentities($string));
    $finalArray = array();
    unset($keywords[0]);

    for($index = 1;$index <= $number;$index++){
        $finalArray[] = $keywords[$index];
    }
    return str_replace('amp;', '&', implode('', $finalArray));
}

 //$string = &#1740;&#1729;&#1575;&#1722; &#1578;&#1608;
 //$number = 10;// number of character to be fetch
 echo getSubstring($string,10); 
```

# c++ - 由于来自布尔函数 C++ 的 StackOverflowException，进程终止

> ID：15833750
> 
> 赞同：0
> 
> 时间：2013-04-05T12:16:49.930
> 
> 标签：c++, stack-overflow

我正在尝试制作一个 bool 函数，该函数将允许在该字符串的输入中搜索字符串的输入和子字符串的输入。bool 函数应该递归搜索匹配，如果字符串中有匹配则返回 true。例如： 'word' 作为字符串输入，然后 'or' 是我在字符串中查找的子字符串。然后该函数应该返回 true，因为 'or' 在 'word' 中。当我运行代码时，它会在命令行上显示“由于 StackOverFlowException 导致进程终止”，我对这个错误的含义以及它与我的代码的关系感到困惑。

```
#include <iostream>
#include <string>

using namespace std;

bool find(string s, string t)
{

if(s.length() <= 1){
    return false;
}
int t_len = t.length() - 1;
string se = s.substr(0, t_len);

if(se == t){
    return true;
}
else
s.erase(0,0);
return find(s, t);
}
int main()
{

string s;
string t;
cout << "Enter string s: " << endl;
cin >> s;
cout << "Enter string t: " << endl;
cin >> t;

bool is_found = find(s, t);
if(is_found = true)
{
    cout << "Found: " << t << " in " << s << endl;
}

system("pause");
return 0;

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:19:42.267

您对擦除的调用不会删除任何字符。擦除的定义是：

```
erase( size_type index = 0, size_type count = npos ); 
```

所以你想擦除`1`字符，而不是`0`字符。

此外，您最后的测试应为：

```
if(is_found == true) 
```

否则，您将尝试将 is_found 值分配为 true 并测试该值（在这种情况下始终为 true。

此外，您还有：

```
string se = s.substr(0, t_len); 
```

where`t_len`不正确（减一），因此字符串比较将不起作用。

从根本上说，您似乎没有理解[`erase`](http://en.cppreference.com/w/cpp/string/basic_string/erase)or的定义[`substr`](http://en.cppreference.com/w/cpp/string/basic_string/substr)，这对于使其正常工作至关重要。

# text - JavaFX Flowpane 到新行

> ID：15833752
> 
> 赞同：0
> 
> 时间：2013-04-05T12:17:06.977
> 
> 标签：text, javafx

我有一个 FlowPane，每次添加新子项时我都想换行（另一个文本条目）

```
Text text1 = new Text("Here is some text");
Text text2 = new Text("This should be on a new line");

flowPane.getChildren().add(text1);
flowPane.getChildren().add(text2); //should go to the next line 
```

这只是将文本彼此相邻地附加，如下所示：

```
"Here is some textThis should be on a new line" 
```

有没有人知道解决这个问题的方法？似乎它应该是 API 的直接部分，但我找不到与此问题相关的任何内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T12:20:20.473

从 api: `A horizontal flowpane (the default) will layout nodes in rows, wrapping at the flowpane's width.`. 所以基本上，默认情况下，所有组件都将添加到同一行，直到没有足够的可用空间。

您想更改方向，或使用其他布局。

# javascript - 用什么来压缩这段代码？

> ID：15833756
> 
> 赞同：0
> 
> 时间：2013-04-05T12:17:12.540
> 
> 标签：javascript

我试图了解这段代码中发生了什么：http: [//js1k.com/2013-spring/demo/1396](http://js1k.com/2013-spring/demo/1396)

对我来说，这看起来不像是在 Base62 中缩小或编码的。当我将它粘贴到 Vim 中时，到处都会出现奇怪的字符。有没有办法可以解码它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T12:19:23.407

这是使用数据 URI 方案生成的

[https://en.wikipedia.org/wiki/Data_URI_scheme](https://en.wikipedia.org/wiki/Data_URI_scheme)

javascript 文件已作为包含文件内容的 URI 提供。许多代码已被 URL 转义，因此所有的`\`s. 在此之前它可能已经被缩小了。

这里的数据是一个完整的 HTML 文档。第一部分是 HTML 文件的开头：

`javascript: '&lt;!doctype html&gt;\n&lt;html&gt;\n\t&lt;head&gt;\n\t\t&lt;title&gt;JS1k, 1k demo submission [1396]&lt;/title&gt;\n\t\t&lt;meta charset=&quot;utf-8&quot; /&gt;\n\t&lt;/head&gt;\n\t&lt;body&gt;\n\t\t&lt;canvas id=&quot;c&quot;&gt;&lt;/canvas&gt;\n\t\t`

之后是一个内联脚本：

`var b = document.body;\n\t\t\tvar c = document.getElementsByTagName(\'canvas\')[0];\n\t\t\tvar a = c.getContext(\'2d\');\n\t\t\tdocument.body.clientWidth; // fix bug in webkit: http://qfox.nl/weblog/218\n\t\t`

您可以轻松解码为：

```
var b = document.body;
var c = document.getElementsByTagName('canvas')[0];
var a = c.getContext('2d');
document.body.clientWidth; // fix bug in webkit: http://qfox.nl/weblog/218 
```

等等等等

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T12:20:40.003

代码末尾有脚本，用于解码代码

```
for (Y = 0; $ = 'zxqj`_^ZWVUQONMKJIHGCA@8$  ' [Y++];) 
     with(_.split($)) _ = join(pop());
eval(_) 
```

我放了这个萤火虫......而不是`eval(_)`放`console.log( _ )`

代码是

```
e = null;
T = function (b) {
    c.width = c.height = 19 * s;
    a.fillStyle = "#DB5";
    a.fillRect(0, 0, c.width, c.width);
    for (i = s / 2; i < c.width; i += s) a.moveTo(i, s / 2), a.lineTo(i, c.width - s / 2), a.moveTo(s / 2, i), a.lineTo(c.width - s / 2, i);
    a.stroke();
    b && (f = 19 * ~~(0.5 + (b.clientY - s / 2) / s) + ~~(0.5 + (b.clientX - s / 2) / s), t[f] == e && (t[f] = d, (L(f) | !(L(f + 1) & L(f - 1) & L(f + 19) & L(f - 19))) & (!m | f != n) ? "d" == b.type[5] ? (m = 0, u = f, d = !d, E(f + 1, d), E(f - 1, d), E(f + 19, d), E(f - 19, d), E(f)) : (t[f] = e, a.beginPath(), a.arc(~~(0.5 + (b.clientX - s / 2) / s) * s + s / 2, ~~ (0.5 + (b.clientY - s / 2) / s) * s + s / 2, s / 2 - 1, 0, 6.3, 1), a.strokeStyle = a.fillStyle = "rgba(0,0,0,0.3)", d && (a.fillStyle = "rgba(255,255,255,0.3)"), a.fill(), a.stroke()) : t[f] = e));
    a.strokeStyle = "#000";
    a.fillStyle = "#000";
    for (i = s / 2 + 75; i < c.width; i += 6 * s) for (h = s / 2 + 75; h < c.width; h += 6 * s) a.beginPath(), a.arc(i, h, 2, 0, 6.3, 1), a.fill();
    m && (t[n] = d, L(u) || (a.beginPath(), a.rect(n % 19 * s + s / 2 / 2, ~~ (n / 19) * s + s / 2 / 2, s / 2, s / 2), a.stroke()), t[n] = e);
    for (i = t.length; i--;) t[i] != e && (a.beginPath(), a.arc(i % 19 * s + s / 2, ~~ (i / 19) * s + s / 2, s / 2 - 1, 0, 6.3, 1), a.fillStyle = "#000", t[i] && (a.fillStyle = "#FFF"), a.fill(), a.stroke())
};
E = function (b, g) {
    if (!L(b, g)) {
        1 == w.length && (m = 1, n = b);
        for (i = w.length; i--;) t[w[i]] = e
    }
};
L = function (b, g) {
    w = [];
    g == e && (g = t[b]);
    l = function (b) {
        for (i = w.length; i--;) if (w[i] == b) return;
        w.push(b);
        0 != (b + 1) % 19 && t[b + 1] == g && l(b + 1);
        0 != b % 19 && t[b - 1] == g && l(b - 1);
        t[b + 19] == g && l(b + 19);
        t[b - 19] == g && l(b - 19)
    };
    if (g != e && g == t[b]) l(b);
    else return 1;
    for (i = w.length; i--;) if (0 != (w[i] + 1) % 19 && t[w[i] + 1] == e || 0 != w[i] % 19 && t[w[i] - 1] == e || 342 > w[i] && t[w[i] + 19] == e || 19 <= w[i] && t[w[i] - 19] == e) return 1;
    return 0
};
s = 25;
d = m = n = 0;
c.addEventListener("mousemove", T);
c.addEventListener("mousedown", T);
t = [];
T(); 
```

# c# - RichTextBox.Select(0,1) 配置整个文本

> ID：15833757
> 
> 赞同：1
> 
> 时间：2013-04-05T12:17:12.657
> 
> 标签：c#, winforms

这是代码片段：

```
 richTextBox1.Select(0, 1);
  richTextBox1.SelectionBackColor = Color.Black;
  richTextBox1.SelectionColor = Color.White; 
```

在这部分执行后，文本的第一个符号被选中，但整个代码被格式化。

这是整个方法：

`proccesses`一个在哪里`List<System.Diagnostics.Proccess>`

并且`knownProcesses`是一个`List<ProccessData>`

`ProcessData`是我写的“数据包装器”

```
 void updateRTB1()
    {
        string text = "";

        for (int i = 0; i < processes.Count; i++)
        {
            foreach (ProcessData pd in knownProcesses)
            {
                if (pd.resembles(processes[i]))
                {
                    text += pd.ToString();
                    break;
                }
            }

            text += "\n";
        }

        richTextBox1.Text = text;

        richTextBox1.Select(0, 1);
        richTextBox1.SelectionBackColor = Color.Black;
        richTextBox1.SelectionColor = Color.White;
    } 
```

该方法在包含表单的构造函数中调用一次。这是我迄今为止唯一一次使用它。

谢谢您的帮助

```
 richTextBox1.Select(1, 1);
  richTextBox1.SelectionBackColor = Color.Black;
  richTextBox1.SelectionColor = Color.White; 
```

顺便说一句，工作正常。

# c++ - 从内存中打印奇怪的数字

> ID：15833760
> 
> 赞同：-1
> 
> 时间：2013-04-05T12:17:21.893
> 
> 标签：c++, memory, printing

我有一个包含药物的列表（动态向量），我想打印列表中的所有药物，但它会从内存中打印一些数字。例如：

```
Give the medicine's ID: 1
Give the medicine's name:alg
Give the medicine's concentration: 30
Give the medicine's quantity: 40 
```

印刷：

```
The medicine's ID is: 4215400
The medicine's name is: 
The medicine's concentration is: 3.47235e+230
The medicine's quantity is: 2686544 
```

这些是打印功能：

```
 void Console::printMedicine(Medicine* m){
        int ID = m->getID();
        string name = m->getName();
        double concentration = m->getConcentration();
        int quantity = m->getQuantity();
        cout<<"\nThe medicine's ID is: "<<ID<<"\n";
        cout<<"The medicine's name is: "<<name<<"\n";
        cout<<"The medicine's concentration is: "<<concentration<<"\n";
        cout<<"The medicine's quantity is: "<<quantity<<"\n";
    }

    void Console::printAllMedicines(){
        DynamicVector<Medicine*>* medList = ctrl->getAllMeds();
        for(int i=0; i < medList->getLen(); i++){
            Medicine* m = medList->getElementAtPosition(i);
            printMedicine(m);
        }
    } 
```

这是 getElementAtPosition 函数：

```
template <typename Element>
Element DynamicVector<Element>::getElementAtPosition(int pos){
    return this->elems[pos];
} 
```

这是医学课，只有私处：

```
class Medicine{
private:
    int ID, quantity;
    double concentration;
    string name; 
```

这是存储库中 medList 的声明：

```
class Repository{
    public:
        DynamicVector<Medicine*>* medList; 
```

医学类中的构造函数和吸气剂：

```
 Medicine::Medicine(){ //implicit constructor
        this->ID=0;
        this->concentration=0;
        this->name="";
        this->quantity=0;
    }

    Medicine::Medicine(int ID, string name, double concentration, int quantity){ //constructor with parameters
        this->ID=ID;
        this->name=name;
        this->concentration=concentration;
        this->quantity=quantity;

int Medicine::getID(){
    return this->ID;
}

string Medicine::getName(){
    return this->name;
}

double Medicine::getConcentration(){
    return this->concentration;
}

int Medicine::getQuantity(){
    return this->quantity;

        } 
```

getAllMeds 和 getAll 函数：

```
DynamicVector<Medicine*>* Controller::getAllMeds(){
    return repo->getAll();
}

DynamicVector<Medicine*>* Repository::getAll(){
    return medList;
} 
```

我尝试了几个小时来解决这个问题，但我就是不明白问题出在哪里。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:36:34.490

我假设您的 Medicine 实例是由 getAllMeds() 创建的。你确定你将好的值传递给你的构造函数吗？您看到的那些值对我来说看起来像是未初始化的内存。它们每次都是相同的奇怪值还是会改变？

# php - 在 mthaml 上运行 load_class

> ID：15833762
> 
> 赞同：1
> 
> 时间：2013-04-05T12:17:39.467
> 
> 标签：php, codeigniter, haml, mthaml

我正在尝试使用 load_class 来加载 mthaml，因为我知道出于性能原因这是必要的。

**这是 MtHaml 库。** [https://github.com/arnaud-lb/MtHaml](https://github.com/arnaud-lb/MtHaml)

它在任何地方都有命名空间，所以让它与 load_class 一起工作就遇到了第一个障碍。然后它通过 Autoloader.php 实例化

```
namespace MtHaml;

class Autoloader
{
    static public function register()
    {
        spl_autoload_register(array(new self, 'autoload'));
    }

    static public function autoload($class)
    {
        if (strncmp($class, 'MtHaml', 6) !== 0) {
            return;
        }

        if (file_exists($file = __DIR__ . '/../' . strtr($class, '\\', '/').'.php')) {
            require $file;
        }
    } 
```

我正在努力

```
load_class('Autoloader', 'libraries/MtHaml', ''); 
```

但这给了我**致命错误：找不到类'Autoloader'**

那么如果我尝试

```
load_class('MtHaml\Autoloader', 'libraries/MtHaml', ''); 
```

我**无法找到指定的类：MtHaml\Autoloader.php**

现在我得到这个工作的唯一方法就是这样称呼它

```
 require_once __DIR__ . '/../libraries/MtHaml/Autoloader.php';
    MtHaml\Autoloader::register();
    $haml = new MtHaml\Environment('php');
    $rendered = $haml->compileFile($haml_file, $haml_cache_path); 
```

问题是这段代码在我在代码点火器中调用我的 $this->load->view 时运行，所以我知道 load_class 是需要优化性能的，因为在一个控制器中我可以调用 $this->load->view 几个次。

我该如何使用 load_class 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:26:51.043

> 我正在尝试使用 load_class 来加载 mthaml，因为我知道出于性能原因这是必要的。

据我了解 mt-haml 这根本没有必要。`load_class`来自codeigniter，而不是只需安装mt-haml包并包含它的自动加载器，你应该已经很好了。

# mysql - 在 MySQL 中排序

> ID：15833763
> 
> 赞同：-2
> 
> 时间：2013-04-05T12:17:40.610
> 
> 标签：mysql, sql-order-by

我有一个看起来像这样的表格邮政编码

```
 Code      State    Region        Distance
  25696      1       5             150
  25692      1       4             60 
  25691      2       3             50
  25690      2       2             233
  25688      3       4             450
  25686      3       5             560
  25685      4       7             50 
  12069      4       8             30
  12068      4       5             60
  12067      6       3             80
  12066      7       1             90 
```

现在我想对这些数据进行排序，比如如果选择了状态 4，然后首先按状态 4 区域排序，然后按距离排序，然后是其余的，无论区域如何，按距离排序。

所以结果应该是这样的

```
 Code      State    Region        Distance
  12068      4       5             60
  25685      4       7             50 
  12069      4       8             30
  25691      2       3             50
  25692      1       4             60
  12067      6       3             80
  12066      7       1             90 
  25696      1       5             150
  25690      2       2             233
  25690      2       2             233
  25686      3       5             560 
```

首先按升序显示 4 个地区，然后按距离排序的休息日期，无论地区、州如何。

我正在尝试以下查询

```
 SELECT region,br.state, case when state = 4 then -1
                          else state end as StateOrder,

  FROM zipcode 
  ORDER BY StateOrder,region, Distance asc; 
```

此查询首先按排序顺序给出状态 4 区域，但其余数据也按状态和区域排序，这需要修复。

请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:03:31.690

您可以在您的:中使用`CASE`表达式`ORDER BY`

```
select code, state, region, distance
from zipcode
order by 
  case when state = 4 then region else distance end 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/100d6/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T16:12:16.590

```
SELECT * 
  FROM zipcode 
 ORDER  
    BY FIELD(state,4) DESC
     , CASE WHEN state=4 THEN region END
     , distance; 
```

# java - Primefaces 动态列，以编程方式

> ID：15833764
> 
> 赞同：1
> 
> 时间：2013-04-05T12:17:42.957
> 
> 标签：java, jsf, primefaces

我正在使用 Primefaces 重写一个（非常）大且旧的 Richfaces 应用程序。我现在有一个情况，我得到两个列表，一个带有列名，一个带有应该表示为行的对象。

该对象如下所示：

```
public class AVeryGenericThingThatIDoNotLike {
    Object[] values;
    //Other parameters that I dont care about
} 
```

当我应该显示这个时，我希望它把 values[0] 映射到第一列，将 values[1] 映射到第二列，依此类推。

我查看了 primefaces 展示，并且有一个动态列的示例，但我已经尝试过了，当我不知道可以存在哪些列时，我无法让它工作。我不知道这一点的原因是这些列是从一个数据库中决定的，该数据库包含一行说明应该存在哪些列并且这可以改变，所以我不能构建一个类来让所有列都可用，就像在展示示例中一样.

任何人都可以在这里给我任何指示吗？我已经坚持了几天，我真的需要帮助。

编辑：现在它有点使用 Laabidi Raissi 的解决方案。我现在的问题是，对于某些列，我希望呈现按钮和命令链接。使用这种方法，我只能获取字符串，如果我尝试返回像 CommandButtons 这样的对象，它只会打印一个 java 对象哈希。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T12:58:33.147

如果您使用的是 JSF2，那么我认为这个解决方案可能适合您。首先，在您的托管 bean 中，您从 DB（动态）构建列列表，然后：

```
<p:columns value="#{yourManagedBean.listOfColumnsFromDB}"  var="column" columnIndexVar="colIndex">  
  <f:facet name="header"> #{column}</f:facet>
  <h:outputText value="#{yourManagedBean.values[colIndex]}" />
</p:columns> 
```

编辑：根据您的评论，我认为添加`commandbutton`or`outputlink`非常明显（而不是`outputText`）：

```
<h:commandButton value="#{yourManagedBean.values[colIndex]}" action="#{yourManagedBean.someActionThatTakesAParam(colIndex)}" rendered="#{colIndex == 4}"/> 
```

假设您想要第 5 列中的 commandButton。

那是你要找的吗？

希望这可以帮助

# php - 跟踪登录用户

> ID：15833769
> 
> 赞同：0
> 
> 时间：2013-04-05T12:17:53.753
> 
> 标签：php, authentication

我正在用 PHP 设计一个应用程序，类似于用户目录，我需要在其中显示每个用户的登录状态。有没有一种安全的方法来判断用户是否已连接（登录）？

编辑：我正在用一些应用程序逻辑更新帖子。该应用程序是关于工匠目录。每个工匠将登录到应用程序。当有人搜索工匠时，他将能够看到已登录的工匠并发送一条消息，其中包含需要完成的工作描述。Craftsmen 可能没有其他仅登录到应用程序的活动，因此应用程序本身必须有一种方法来“告诉”用户是否登录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T09:39:34.263

我认为只有 php 才能满足您的要求。看看[socket.io](http://socket.io)或类似的东西。您可以通过具有 longpolling/sse/websockets 之类的连接的工匠来实现这一点。您可以将其与提供 html 的 php 集成，然后在准备好的文档上建立从客户端到 socket.io 的连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:23:42.180

“安全”是指“准确”吗？

我建议`LOGGED_IN`在他们最初并成功（安全！）登录时设置一个标志。然后在该用户每次请求另一个页面时更新时间戳。当`last_update`达到 15 分钟的宽限期时，您可以假设他们已经注销。

# python - 如何以酥脆的形式在日期字段上显示日期选择器日历？

> ID：15833774
> 
> 赞同：3
> 
> 时间：2013-04-05T12:18:01.387
> 
> 标签：python, django, django-models, django-forms, django-templates

我是 Django 的新手。我创建了一个模型表单，像这样在管理员端显示日历（日期选择器）

![在此处输入图像描述](https://i.stack.imgur.com/VPSN3.png)

但是当我在我的模板文件中使用那个清晰的表单时，它只是没有日期选择器的常规字段

![在此处输入图像描述](https://i.stack.imgur.com/y8NzS.png)

我无法找到解决方案请帮助我这是我的代码

模型.py

```
class jobpost(models.Model):
item_types = (
    ('Full Time',_('Full Time')),
    ('Part Time',_('Part Time')),
    ('Contract',_('Contract')),
)

post_type= (
    ('Job',_('Job')),
    ('Classified',_('Classified')),
    ('Project/Task',_('Project/Task')),
    ('Internship',_('Internship')),

)
#user = models.ForeignKey(User)
job_id =             models.AutoField(primary_key=True)
#user = models.ForeignKey(User, editable = False)

post_type =        models.CharField(verbose_name=_('Post type'),max_length=255,null=True, choices=post_type,default='Job')
job_type =        models.CharField(verbose_name=_('Job type'),max_length=255,null=True, choices=item_types,default='Full Time')
job_location =    models.CharField(verbose_name=_('Job location'),max_length=255,null=True)
job_title =             models.CharField(verbose_name=_('Job title'),max_length=255,null=True)
job_description =       models.TextField(verbose_name=_('Job description'),null=True)
start_date =    models.DateField(verbose_name=_('Start date') ,null=True)#4 April 2013
end_date =      models.DateField(verbose_name=_('End date'),null=True)
how_to_apply =    models.CharField(verbose_name=_('How to Apply'),max_length=255,null=True) 
```

这是我在 model.py 中的小部件

```
widgets = {

    'job_type':RadioSelect(),    
    'job_location':TextInput(attrs={'size':'70'}),   
    'job_description':Textarea(attrs={'cols':200, 'rows':10}),
        'start_date':DateInput(attrs={
            'class': 'datepicker',
            'data-date-format': 'yyyy/mm/dd', 
        }),

        'end_date':DateInput(attrs={
            'class': 'datepicker',

            'data-date-format': 'yyyy/mm/dd', 
        }),

} 
```

在这里，我使用的是我的模板

```
<head>
{% extends "portal/site_base.html" %}
{% load crispy_forms_tags %}
<p>Step {{ step }} of {{ step_count }}</p>
{% comment %}
{% load i18n %}
{% trans "Main page of the portal." %}

{% endcomment %}
{% block content %}
<meta http-equiv="Content-Language" content="en-us" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Welcome {{ user.username }} </title>

<script type="text/javascript" src="{{ MEDIA_URL }}js/jquery-min.js"></script> 
<!-- give correct location for jquery.js -->
<script type="text/javascript" src="{{ MEDIA_URL }}js/jquery-ui-min.js"></script> 
<!-- give correct location for jquery-ui.js -->
<script type="text/javascript">
    $(document).ready(function() {
      $('.dateinput').datepicker({ format: "yyyy/mm/dd" });
   }); 
</script>

</head>
{{ post_type_value }}
<body>

<form method="post" action="/portal/next/post/" class="blueForms" id="id-jobpostform">

{% csrf_token %}
{{ post_type_value }}
{% crispy form %}
{% if request.REQUEST.post_type %}
<input type="hidden" name="post_type" value="{{ request.REQUEST.post_type }}">
{% endif %}
{{ post_type_value }}
{% for field.post_type in form %}{{ field.as_hidden }}
<input type="hidden" name="{{ post_type_field }}" value="{{ post_type_value }}" />
{% endfor %} 
```

那是错误 jquery is not working

```
[08/Apr/2013 08:08:02] "GET /portal/next/js/jquery-min.js HTTP/1.1" 404 4051 
[08/Apr/2013 08:08:02] "GET /portal/next/js/jquery-ui-min.js HTTP/1.1" 404 4060 
```

我尽力为 jquery 提供不同的路径，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:57:51.967

在您的模板中，您将类称为“.dateinput”，而不是您在小部件中提到的“.datepicker”。试试这样...

```
$('.datepicker').datepicker({ format: "yyyy/mm/dd" }); 
```

# ruby - 整数/字符串的 += 和数组的 << 之间的区别？

> ID：15833775
> 
> 赞同：2
> 
> 时间：2013-04-05T12:18:02.850
> 
> 标签：ruby, syntactic-sugar

我对在 Ruby 中对整数、字符串和数组执行简单的加法/连接时得到的不同结果感到困惑。我的印象是，将变量 b 分配给 a（见下文），然后更改 a 的值时，b 将保持不变。在前两个示例中也是如此。但是当我在第三个示例中修改 Array a 时，a 和 b 都被修改了。

```
a = 100
b = a
a+= 5
puts a
puts b 
```

* * *

```
a = 'abcd'
b = a
a += 'e'
puts a
puts b 
```

* * *

```
a = [1,2,3,4]
b = a
a << 5
puts a.inspect
puts b.inspect 
```

以下是上述代码在终端中返回的内容：

```
Ricks-MacBook-Pro:programs rickthomas$ ruby variablework.rb
105
100
abcde
abcd
[1, 2, 3, 4, 5]
[1, 2, 3, 4, 5]
Ricks-MacBook-Pro:programs rickthomas$ 
```

我的编程教练给了我以下解释：

> 将某些内容分配给新变量只是给它一个额外的标签，它不会复制。
> 
> 看起来 += 是一种方法，就像 << 一样，因此您希望它的行为相似。但实际上，它是“语法糖”，添加到语言中以使开发人员更轻松。
> 
> 当您运行 a += 1 时，Ruby 会将其转换为 a = a + 1。
> 
> 在这种情况下，我们不会修改 a.Fixnum 中的 Fixnum。相反，我们实际上是在它之上重新分配，有效地消除了 a 的先前值。
> 
> 另一方面，当您运行 b << "c" 时，您正在通过将字符串 "c" 附加到它来修改底层数组。

我的问题是：

1）他提到了语法糖，但这不也是 << 是什么，即 .push 方法的语法糖吗？

2）如果 += 是语法糖或更正式的方法，为什么这很重要？如果两者之间存在一些差异，那么这是否意味着我之前对语法糖的理解（“编程语言中旨在使事情更容易阅读或表达的语法”）是不完整的，因为这不是它的唯一目的是什么？

3）如果将b分配给a不会复制a，那么为什么不擦除a的旧值意味着对于所有3种情况（整数，字符串和数组）也擦除b的旧值？

正如你所看到的，我对一些我认为我直到现在都理解的事情很感兴趣。任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T12:28:35.720

您会看到，名称（变量名称，例如`a`和`b`）本身不包含任何值。它们只是*指向*一个值。当你做作业时

```
a = 5 
```

then`a`现在指向值 5，不管它之前指向什么。这个很重要。

```
a = 'abcd'
b = a 
```

这里两者都`a`指向`b`同一个字符串。但是，当你这样做时

```
a += 'e' 
```

它实际上被翻译成

```
a = a + 'e'
# a = 'abcd' + 'e' 
```

因此，name`a`现在绑定到一个新值，同时`b`一直指向“abcd”。

```
a = [1,2,3,4]
b = a
a << 5 
```

这里没有赋值，方法`<<`修改现有数组而不替换它。因为没有替代品，所以两者都`a`指向`b`同一个数组，并且可以看到对另一个数组所做的更改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T14:57:11.727

## 您问题的1）和2）的答案：

`+=`is[语法糖](http://en.wikipedia.org/wiki/Syntactic_sugar)和`<<`is not的原因相当简单：`+=`抽象了一些语法表达式：`a += 1`只是`a = a + 1`. `<<`本身就是一个方法，而**不是**`push`:的别名，[`<<`](http://ruby-doc.org/core-1.8.7/Array.html#method-i-3C-3C)只能接受一个参数，而[`push`](http://ruby-doc.org/core-1.8.7/Array.html#method-i-push)可以接受任意数量的参数：我在这里用 send 演示了这一点，因为`[1,2]<<(1,2)`在语法上不正确：

```
[1,2].send(:<<, 4, 5) #=> ArgumentError: wrong number of arguments (2 for 1) 
```

`push`将所有参数附加到数组：

```
[1,2].push(4,5,6) #=> [1,2,4,5,6] 
```

因此，`<<`是 ruby​​ 数组中不可替代的部分，因为没有等效的方法。有人可能会争辩说，它是 的*某种*语法糖`push`，而忽略了上面显示的差异，因为它使大多数涉及将元素附加到数组的操作更简单，并且在语法上更易于识别。

如果我们更深入地了解`<<`整个 ruby​​ 的不同用途：

*   将元素推送到数组：

    ```
    [1,2] << 5 
    ```

*   将一个字符串连接到另一个，这里[`<<`](http://ruby-doc.org/core-1.8.7/String.html#method-i-concat)实际上是一个别名[`concat`](http://ruby-doc.org/core-1.8.7/String.html#method-i-concat)

    ```
    "hello " << "world" 
    ```

*   打开单例类并在类上定义一个方法：

    ```
    class Foo
      class << self
        def bar
          puts 'baz'
        end
      end
    end 
    ```

*   最后但并非最不重要的附加`self`到`self`整数：

    ```
    1 << 2 #translates to ((1 + 1) + (1 + 1)) 
    ```

我们可以看到它`<<`实际上代表整个 ruby​​ 中的*append*，因为它总是出现在某些内容被附加到已经存在的内容的上下文中。因此，我宁愿认为这`<<`是 ruby​​ 语法的重要部分，而**不是**语法糖。

## 以及3）的答案

`b`如果您使用运算符，则 ' 的分配不会被修改（或如您所说的那样删除其旧值）的原因`+=`只是`a += 1`，作为 的缩写`a = a + 1`，重新分配`a`的值，因此随之分配一个新对象。`<<`正在修改原始对象。您可以使用以下命令轻松查看[`object_id`](http://ruby-doc.org/core-2.0/Object.html#method-i-object_id)：

```
a = 1
b = a
b.object_id == a.object_id #=> true

a += 1
b.object_id == a.object_id #=> false

a = [1,2]
b = a
b.object_id == a.object_id #=> true
a << 3
b.object_id == a.object_id #=> true 
```

`Integer`实例（`100`, ）等也有一些警告`101`：相同的数字始终是相同的对象，因为拥有多个实例没有任何意义，例如`100`：

```
a = 100
b = a
b.object_id == a.object_id #=> true
a += 1
b.object_id == a.object_id #=> false
a -= 1
b.object_id == a.object_id #=> true 
```

这也说明值，或者说`Integer`实例（`100`）只是*赋值*给变量，所以变量本身并不是一个对象，它只是指向它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T12:30:01.917

> > [`String#+`](http://www.ruby-doc.org/core-2.0/String.html#method-i-2B):: `str + other_str → new_str`Concatenation - 返回一个包含`other_str`连接到的新字符串`str`。
> > 
> > [`String#<<`](http://www.ruby-doc.org/core-2.0/String.html#method-i-3C-3C):: `str << integer → str`: Append - 将给定对象连接到`str`.

`<<`不创建新对象，就像`+`那样。

***样品1：***

```
a = 100
p a.object_id
b = a
p b.object_id
a+= 5
p a.object_id
p b.object_id
puts a
puts b 
```

***输出：***

```
201
201
211
201
105
100 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T13:41:28.633

你的例子：

```
a = 100
b = a
a+= 5 
```

相当于：

```
a = 100
b = a
a = 100 + 5 
```

之后`a`持有对 的引用，`105`并且`b`仍然持有对 的引用`100`。这就是*分配*在 Ruby 中的工作方式。

您希望`+=`更改对象实例`100`。然而，在 Ruby 中（引用[文档](http://ruby-doc.org/core/Fixnum.html)）：

> 对于任何给定的整数值，实际上只有一个`Fixnum`对象实例

所以只有一个对象实例 for`100`和另一个（但始终相同）一个 for `105`。更改`100`为`105`将*所有* `100`更改为`105`。因此，无法在 Ruby 中修改这些实例，它们是*固定*的。

`String`另一方面，可以修改一个实例，并且与`Integer`同一字节序列可以有多个实例不同：

```
a = "abcd"
b = "abcd"
a.equal? b # returns true only if a and b are the same object
# => false 
```

`a << "e"`连接`"e"`到`a`，从而改变接收者：`a`仍然引用相同的对象实例。

其他方法，如`a += "e"`返回（和分配）一个*新* `String`的:`a`之后会引用这个新实例。

[文档](http://ruby-doc.org/core/String.html)很清楚：

> ### str + other_str → new_str
> 
> 连接 - 返回连接到的新`String`包含。`other_str``str`
> 
> ### str << obj → str
> 
> 追加 - 将给定对象连接到`str`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-05T15:41:49.150

我可以回答你的问题。

**1）**不，该`<<`方法不是`push`. 它们都是具有不同名称的方法。您可以在 Ruby 中拥有定义一个但不定义另一个的对象（例如[String](http://ruby-doc.org/core-2.0/String.html)）。

**2）**对于像这样的普通方法`<<`，*唯一可能发生的事情是指向`a << x`的对象`a`*被修改。语句`a << x`or`a.push(x)`不能创建新对象并将变量更改`a`为指向它。这就是 Ruby 的工作原理。这种事情称为“调用方法”。

作为语法糖很重要的原因在于`+=`，它可以用来修改变量，而不会改变变量曾经指向的旧对象。考虑`a += x`。该语句**可以**修改 a 指向的对象，因为它是实际*分配*给的语法糖`a`：

```
a = a + x 
```

上面发生了两件事。首先，使用 的一个参数`+`调用该方法。然后方法的返回值，无论它是什么，都分配给变量。`a``x``+``a`

**3）**您的 Array 案例不同的原因是您选择改变数组而不是创建新数组。你可以用来`+=`避免改变数组。我认为这六个示例将为您理清思路并向您展示 Ruby 中的可能性：

## 没有突变的字符串

```
a = "xy"
b = a
a += "z"
p a  # => "xyz"
p b  # => "xy" 
```

## 带有突变的字符串

```
a = "xy"
b = a
a << "z"
p a  # => "xyz"
p b  # => "xyz" 
```

## 没有突变的数组

```
a = [1, 2, 3]
b = a
a += [4]
p a  # => [1, 2, 3, 4]
p b  # => [1, 2, 3] 
```

## 带有突变的数组

```
a = [1, 2, 3]
b = a
a.concat [4]
p a  # => [1, 2, 3, 4]
p b  # => [1, 2, 3, 4] 
```

## 没有突变的整数

```
a = 100
b = a
a += 5
puts a   # => 105
puts b   # => 100 
```

## 有突变的整数

在 Ruby 中，改变整数实际上是不可能的。实际上，写作`a = b = 89`确实创建了数字 89 的两个副本，并且这个数字永远不会发生变异。只有少数特殊类型的对象具有这样的行为。

## 结论

您应该将变量视为名称，将对象视为无名的数据。

**Ruby 中的所有**对象都可以以不可变的方式使用，您永远不会实际修改对象的内容。如果您这样做，那么您不必担心`b`我们示例中的变量会自行更改；`b`将始终指向同一个对象，并且该对象永远不会改变。只有`b`当您执行某种形式的`b = x`.

**Ruby 中的大多数**对象都可以变异。如果您有多个变量引用同一个对象并且您选择改变对象（例如通过调用`push`），那么该更改将影响指向该对象的所有变量。你不能改变符号和整数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-05T12:34:33.603

我想上面的答案解释了原因。另请注意，如果要确保`b`没有指针，可以使用`b = a.dup`代替`b=a` (dup for duplicate )

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-05T12:41:57.503

我会尽力回答你的问题。

是的，两者都是“糖”，但它们的作用不同，正如 Sergio Tulentsev 所说，`<<`它不是真正的糖，而是别名。

这些在类 Unix 语言中用作别名，它是根据您的喜好命名的东西的缩写。

所以对于第一种情况：`+=`基本上发生的事情是你在说：

```
for the value 100 assign label 'a'.
for label 'b' assign the value of label 'a'.
for label 'a' take the value of label 'a' and add 5 to label 'a's value and return a new value
print label 'a' #this now holds the value 105
print label 'b' #this now holds the value 100 
```

在 Ruby 的引擎盖下，这与`+=`发生这种情况时返回一个新字符串有关。

对于第二种情况：`<<`它说：

```
for value [1,2,3,4] assign label 'a'  
for label 'b' assign the value of label 'a'
for label 'a' do the '<<' thing on the value of label 'a'.
print label 'a'
print label 'b' 
```

如果您将 应用于`<<`字符串，它将修改现有对象并附加到它。

那么有什么不同。不同的是，`<<`糖的作用不是这样的：

```
a is the new value of a + 5 
```

它的行为是这样的：

```
5 into the value of 'a' 
```

2) 因为在这种情况下您使用语法糖的方式使开发人员更容易阅读和理解代码。这是一个简写。

好吧，速记，如果你这样称呼它们，确实有不同的用途。语法糖不是同质的，即。对于所有“糖”，它的作用方式不同。

3）关于擦除值：

就像这样。

```
put value 100 into the label 'a'
put the value of label 'a' into label 'b'
remove label 'a' from the value. 
```

所以

```
a = 100
b = a
a = nil
puts a
puts b
=> 100 
```

Ruby 中的变量不保存它们指向的值！

# javascript - JSON.stringify = 非法访问

> ID：15833784
> 
> 赞同：1
> 
> 时间：2013-04-05T12:18:49.640
> 
> 标签：javascript, json, node.js

我有一个包含 Javascript 对象的数组。我想将此数组保存到`.json`文件中。

在我将对象添加到文件之前，我`console.log`将对象。

```
// Client
Object {id: "1", color: "#00FF00"}
Object {id: "2", color: "#FF7645"}
Object {id: "3", color: "#FF8845"} 
```

然后我将 jsonArray 发布到我的 nodejs 服务器，如下所示：

```
// Client
$.post('/savejson', 'json=' + JSON.stringify(jsonArray)) // This works 
```

抓住帖子并将文件保存在 nodejs 中，如下所示：

```
app.router.post('/savejson', function(data) {
    url = '/jsonfiles/something.json'
    // Nodejs Server
    fs.writeFile(url, data.body.json, function(error) {
        if(error) {
            console.log(error)
            return
    }
    console.log('Saved file: ' + url)
}) 
```

现在我有一个 json 文件，其中包含一个包含如下对象的数组：

## 东西.json

```
[
    {"id":"1","color":"#00FF00"},
    {"id":"2","color":"#FF7645"},
    {"id":"3","color":"#FF8845"}
] 
```

我读了这样的文件：

```
// Nodejs Server
jsonfile = fs.readFileSync(url, 'UTF-8')
// Output jsonfile: 
[{"id":"1","color":"#00FF00"},{"id":"2","color":"#FF7645"},{"id":"3","#FF8845"}] 
```

解析它

```
// Nodejs Server
jsonArray = JSON.parse(jsonfile)
// Output jsonArray: 
[{id: '1',color: '#00FF00'},{ id: '2',color: '#FF7645'},{ id: '3',color: '#FF8845'}] 
```

并发送回客户端

```
// Nodejs Server
window.newjson(jsonArray) 
```

在我的客户处，我通过以下方式捕获文件：

```
// Client
window.newjson = function(jsonArray) {
    // Here foreach loop
}
// Output jsonArray:
undefined[3]
    0: 
        color: "#00FF00"
        id: "1"
        __proto__: 
    1: 
        color: "#FF7645"
        id: "2"
        __proto__: 
    2: 
        color: "#FF8845"
        id: "3"
        __proto__: 
    length: 3
    __proto__: undefined[0] 
```

对于每个对象，我`console.log`都是对象。

## 输出

```
// Client
{id: "1", color: "#00FF00"}
{id: "2", color: "#FF7645"}
{id: "3", color: "#FF8845"} 
```

注意到对象词是不同的。

现在我想像这样再次保存相同的文件：

```
// Client
$.post('/savejson', 'json=' + JSON.stringify(jsonArray)) // Not working anymore... 
```

当我`JSON.stringify(jsonArray)`在客户端使用时，我收到错误：`Uncaught illegal access`

我也尝试`JSON.parse(jsonArray)`在客户端使用，但这给了我错误`Uncaught SyntaxError: Unexpected token o`

当我在第二篇文章之前记录 jsonArray 时：

```
// 1
console.log(jsonArray)

// Result
Array[3]
    0: 
        color: "#00FF00"
        id: "1"
        __proto__: 
    1: 
        color: "#FF7645"
        id: "2"
        __proto__: 
    2: 
        color: "#FF8845"
        id: "3"
        __proto__: 
    length: 3
    __proto__: Array[0] 

// 2
console.log(jsonArray.toString())

// Result
[object Object],[object Object],[object Object]

// 3
JSON.stringify(jsonArray)

// Result
Uncaught illegal access

// 4
JSON.parse(jsonArray)

// Result
Uncaught SyntaxError: Unexpected token o 
```

我做错了什么？为什么我错过了这个`Object`词？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T14:53:09.633

`jsonArray`在将其发送回客户端之前，您必须对其进行字符串化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:32:55.653

意外的令牌问题可能是因为您在 JavaScript 对象上调用 JSON.parse，如此处所述： [d3.js json uncaught syntax error unexpected token o](https://stackoverflow.com/questions/14636084/d3-js-json-uncaught-syntax-error-unexpected-token-o)。然后对于在客户端出现错误“未捕获的非法访问”的 JSON.stringify(jsonArray)，通过检查 jsonArray 是否为 null（因为 null 仍然是一个对象）进行调试：

```
if(variable==null){
// Do stuff console.log etc
} 
```

（尽管这是一个非常罕见的问题。strigify 应该打印 null）如果失败，您的变量也可能未声明。我认为问题可能出在@Anthony Grist 最初所说的

# javascript - 书签和 CoffeeScript

> ID：15833785
> 
> 赞同：1
> 
> 时间：2013-04-05T12:18:51.217
> 
> 标签：javascript, coffeescript

我需要使用 CoffeScript 编写书签代码。像这样的东西（JS）：

```
javascript: (function () {  
//....
}()); 
```

但是当我试图用 CoffeeScript 编写这段代码时

```
javascript: (->
#...
)() 
```

我得到以下信息：

```
({
  javascript: (function() {
//...
  })()
}); 
```

如何避免添加“（{}）；”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:40:38.387

您可以添加`-b`（或`--bare`标记）以在没有顶级函数包装器的情况下进行编译。
在 中查看更多信息`$ coffee --help`。

 **`-b`如果你想摆脱大括号和周围的东西，**Upd**`javascript: ..`没有任何帮助——它们是 javascript 对象语法的一部分。**

 **您可以不编写咖啡代码`javascript:`（在小书签的情况下，它是协议名称，而不是代码的一部分），但稍后添加：

```
$ echo '(-> alert "hello!")()' > xx.coffee
$ echo javascript:`coffee -bjcp xx.coffee`
javascript:(function() { return alert("hello!"); })(); 
```**

# c# - ViewModel 中的可绑定字段

> ID：15833786
> 
> 赞同：2
> 
> 时间：2013-04-05T12:18:53.103
> 
> 标签：c#, wpf, binding, properties

在 ViewModels 中通常有很多这样的

```
private string someField;
public string SomeField
{
    get 
    {
        return someField;   
    }
    set
    {
        someField = value;
        NotifyOfPropertyChanged(() => SomeField);
    }
} 
```

有没有办法得到这样一个构造的简短版本，甚至`Bindable`？

这样您只需要编写如下内容：

```
public Bindable<string> SomeField; 
```

也许有一个应该被解雇的行动`NotifyPropertyChanged`......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T12:23:16.090

我想您可以创建自己的类来维护一个值并`INotifyPropertyChanged`针对您可以创建的包含类引发：

```
public Bindable<string> SomeField = new Bindable<string>("test", this); 
```

然后 Binding against`SomeField`将访问包含的值并设置它会导致`INotifyPropertyChanged`被提出反对`this`

您需要使用一些隐式转换运算符才能让绑定系统将您`Bindable<T>`视为来源`T`和放置位置`T`

请参阅：http: [//msdn.microsoft.com/en-us/library/85w54y0a.aspx](http://msdn.microsoft.com/en-us/library/85w54y0a.aspx)

以下内容可能就足够了：

```
public class Bindable<T>
{
    private T _value;
    private PropertyChangedEventHandler _notifyHandler;
    private INotifyPropertyChanged _notifyTarget;
    private string _name;

    public Bindable(PropertyChangedEventHandler notifyHandler, INotifyPropertyChanged notifyTarget, string name, T value = default(T), bool trigger = false)
    {
        _value = value;
        _name = name;
        _notifyHandler = notifyHandler;
        _notifyTarget = notifyTarget;

        if (trigger)
        {
            _notifyHandler(_notifyTarget, new PropertyChangedEventArgs(_name));
        }
    }

    public implicit operator T(Bindable<T> bindable)
    {
        return bindable._value;
    }

    public implicit operator Bindable<T>(T value)
    {
        return new Bindable<T>(_notifyHandler, _notifyTarget, _name, value, true);
    }
} 
```

上面的代码很粗糙，毫无疑问可以创建一个更好的版本，但它应该为你指明你需要去的方向。

* * *

在对我提出的解决方案进行进一步调查时，我发现由于为了记住目标和其他细节而隐式转换 from `T`to开始工作会有问题`Bindable<T>`，我确信这种解决方案包含足够的想法来引导到一个工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:25:15.427

存在自动属性，可以用作没有逻辑的属性的快捷方式。

以下两个属性是等价的：

```
private string someField;
public string SomeField
{
    get { return someField; }
    set { someField = value; }
}

public string SomeField { get; set; } 
```

但是，没有内置方法可以在其中引入更改通知。

但是，如果您想投入时间和/或金钱，有一些方法可以让自动属性通知更改：

1.  使用像 PostSharp 这样的 AOP 框架。它将在后编译步骤中注入此功能：[http](http://www.postsharp.net/model/inotifypropertychanged) ://www.postsharp.net/model/inotifypropertychanged 。这种方法的缺点是 PostSharp 不是免费的。
2.  使用动态创建的代理类。在运行时，您可以创建一个派生自实际 ViewModel 的类，并使用更改通知覆盖每个属性。这种方法的缺点是您需要使用该代理而不是您的类，并且您的所有属性都需要是虚拟的。

# asp.net - 如何从android获取列表请求到asp.net webservice？

> ID：15833788
> 
> 赞同：1
> 
> 时间：2013-04-05T12:18:53.730
> 
> 标签：asp.net

我有一个 web 服务，使用一个 webmethod，在 android 开发人员中通过列表示例中的请求：

```
Itemid Itemname Date
1      aaaa     12/4/2013
2      bbbb     11/4/2013
3      cccc     10/4/2013 
```

如何在网络服务中获取此请求？..以及如何接收此请求？提前谢谢....

# vb.net - 屏幕尺寸较小时控件重叠

> ID：15833793
> 
> 赞同：1
> 
> 时间：2013-04-05T12:19:02.577
> 
> 标签：vb.net, winforms, forms, user-interface

在我的应用程序中，我使用了`tablelayoutpanel`,`dock`和`anchor`用于表单的视觉表示。另外，我根据屏幕分辨率计算了表单的字体大小。它可以在尺寸超过 17 英寸的显示器中完美运行，但如果屏幕尺寸低于此尺寸，则它无法正常工作。控件重叠，有时控件部分显示。为什么？什么可能是这个问题的解决方案。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:02:51.887

缩放您的表格。我还没有真正使用它，但我注意到不一致的行为。就像，如果您将带有所有子控件的表单缩放 50%，然后将其缩放 200%，您将无法恢复到原始表单……至少对于所有子控件不会。玩弄它，也许您将能够解决不一致的问题。

```
 Dim size As System.Drawing.SizeF
        Dim scalePercent As Long
        scalePercent = 50 ' scale the form and all child controls by a percentage
        size.Height = scalePercent / 100
        size.Width = scalePercent / 100
        Me.Scale(size) 
```

# javascript - 使用 Kinetic 在 Canvas 上添加更多图像

> ID：15833794
> 
> 赞同：1
> 
> 时间：2013-04-05T12:19:09.610
> 
> 标签：javascript, jquery, html, canvas, kineticjs

我正在制作一个应用程序，但我遇到了问题。当我点击按钮时，我需要在我的画布上添加新点（图像）。这是一个代码：

```
var ID = 0;
var points = [];

function addPoint(){
points.push({id: ID, posX: 0, posY: 0, url: "img/point.png"});
ID++;
showPoints();
}

function showPoints(){
var img = new Array();
var point = new Array();
var stage = new Kinetic.Stage({
    container: 'cvsCroatia',
    width: 574,
    height: 508
});
var layer = new Kinetic.Layer();

for(var j=0; j < ID; j++){
    img[j] = new Image();
    img[j].src = 'img/point.png';
    img[j].onload = (function(){
        point[j] = new Kinetic.Image({
            x: points[j].posX,
            y: points[j].posY,
            image: img[j],
            width: 13,
            height: 13,
            name:  img[j],
            draggable: true
        });
    });
    layer.add(point[j]);

}   
stage.add(layer);
} 
```

但我得到一个错误：

> 未捕获的类型错误：无法设置未定义的属性“索引”（动力学-v4.4.0.min.js:29）

你有什么想法，有什么问题吗？谢谢回答。艾伦..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:20:45.010

```
var img = new Array(); // the simplest solution is to make img visible outside your function
function showPoints(){
    // var img = new Array();        // HERE img is a LOCAL variable, only visible to the showPoints() function
    var point = new Array();        
    var stage = new Kinetic.Stage({
    container: 'cvsCroatia',
    width: 574,
    height: 508
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T07:48:04.980

感谢您的回答，我将所有变量都放到了全局范围内，但不幸的是得到了同样的错误..

```
 var ID = 0;
 var points = [];

 var img = new Array();
 var point = new Array();

 function showPoints(){
var stage = new Kinetic.Stage({
    container: 'cvsCroatia',
    width: 574,
    height: 508
});
var layer = new Kinetic.Layer();

for(var j=0; j < ID; j++){
    img[j] = new Image();
    img[j].src = 'img/point.png';
    img[j].onload = (function(){
        point[j] = new Kinetic.Image({
            x: points[j].posX,
            y: points[j].posY,
            image: img[j],
            width: 13,
            height: 13,
            name:  img[j],
            draggable: true
        });
    });
    layer.add(point[j]);

}   
stage.add(layer);
 }

  function addPoint(){
points.push({id: ID, posX: 0, posY: 0, url: "img/point.png"});
ID++;
showPoints();
} 
```

# django - Django：使用重复的 slug 管理诸如 id:slug 之类的 url

> ID：15833810
> 
> 赞同：0
> 
> 时间：2013-04-05T12:19:31.933
> 
> 标签：django, url, django-urls, slug

使用 Django 1.5 我将 slug 存储在数据库中

我配置了我的网址，如下所示：

```
url(r'^(?P<id>[0-9]+):(?P<slug>[-\w]+)$', TracksDetailView.as_view(), name="track-view"), 
```

在我的podel中，我有：

```
@models.permalink
def get_absolute_url(self):
    return ('track-view', [str(self.id), str(self.slug)]) 
```

如果 2 个 slug 相同，我会收到以下错误：

```
get() returned more than one GPXTrack -- it returned 2! Lookup parameters were {} 
```

我使用通用视图 (DetailView) 来呈现页面：

```
class TracksDetailView(DetailView):
    model = GPXTrack
    context_object_name = 'track' 
```

关于如何在**不需要独特的蛞蝓**的情况下避免这种情况的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:40:24.483

诀窍很简单，但感谢您为我指明了正确的方向！

好吧，[get_object](https://github.com/django/django/blob/master/django/views/generic/detail.py#L19)方法会查找键为 'pk' 而不是 'id' 的 kwargs，因此我将网址更改为：

```
url(r'^(?P<pk>[0-9]+):(?P<slug>[-\w]+)$', TracksDetailView.as_view(), name="track-view"), 
```

一切正常！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:53:27.623

您将不得不覆盖视图的`get_object`方法。您继承的没有考虑到您正在使用 ID 和 slug。它假设您正在传递 pk 或 slug - 并且还假设它们是独一无二的。

# .net - LotusNotes NotesStream 到字节数组 /

> ID：15833813
> 
> 赞同：1
> 
> 时间：2013-04-05T12:19:40.917
> 
> 标签：.net, vb.net, com, stream, lotus-notes

我想在不使用文件系统的情况下读取 NotesStream 对象（COM 引用）的内容。因此，我的意图是将内容传输到 .NET 字节数组中。我的示例在 VB.net 中，因为当时我们需要后期绑定。

我设法做到这一点的唯一方法是逐字节读取流（假设`0`预先将流中的位置设置为）：

```
Dim streamSize As Long = CInt(notesStream.Bytes)
Dim buffer(streamSizes - 1) As Byte

For i = 0 To (streamSize - 1)
    buffer(i) = notesStream.read(1)(0)
Next 
```

`notesStream.Open()`与使用文件系统 ( )相比，这非常慢。

我发现的其他解决方案都给了我错误，比如这两个例子：

```
buffer = notesStream.Read(streamSize) 
```

> -> 错误：“System.Byte[*]”类型的对象无法转换为“System.Byte[]”类型/无法将“System.Byte[*]”类型的对象转换为“System.Byte[ ]"

（括号和星号之间没有额外的空格字符，否则在这篇文章中它不会正确显示 benn）

```
Array.Copy(notesStream.Read(), 0, buffer, 0, streamSize) 
```

> -> 错误：源数组不够长。检查 srcIndex 和长度，以及数组的下限。

# asp.net-mvc-4 - IIS 7.5 中相同主机名/端口上的 Dynamics CRM 2011 和 MVC 应用程序

> ID：15833822
> 
> 赞同：1
> 
> 时间：2013-04-05T12:20:05.020
> 
> 标签：asp.net-mvc-4, iis-7.5, dynamics-crm-2011, windows-server-2008-r2

我有一个运行 IIS 7.5 的 Window Server 2008 R2 服务器。此服务器在默认端口 80 上托管 Dynamics CRM 2011 部署。因此，当远程访问此网站时，我会转到 eg`http://my.domain.com`并被重定向到`http://my.domain.com/MyOrganization/main.aspx`

我也有一个 MVC 4 Web 应用程序，在同一个 IIS 实例上的不同应用程序池中运行。我希望能够在相同的端口和主机名上访问此应用程序，但使用不同的子路径，例如`http://my.domain.com/SomeCustomPath/`

如何配置 IIS（和/或必要时的 CRM）来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T21:06:04.653

真是个坏主意！我不知道如何完成您在我脑海中提出的要求，但我知道微软完全不支持它。如果更新汇总更新 IIS 设置和处理程序，您也会面临可能的升级问题。该解决方案也不可移植——如果您决定使用 CRM Online，这显然是不可能的。最后，当出现问题时，*并且*总是出现问题时，您的脑海中总会出现这种奇怪的不受支持的自定义问题（我们确定自定义处理程序或映射与此问题无关吗？）。

为什么不直接使用另一个子域？让您的 DNS 人员设置[http://yourapp.domain.com](http://yourapp.domain.com)并在那里托管您的 MVC 应用程序。您将保留来自 Microsoft 的完整支持，无需担心升级，而且如果您确实迁移到 CRM Online，您无需进行任何更改！

# xml - LINQ to XML 选择下一个节点元素

> ID：15833823
> 
> 赞同：0
> 
> 时间：2013-04-05T12:20:05.113
> 
> 标签：xml, linq, linq-to-xml

我正在从 XML 文档中选择一些特定的数据。

以下是 xml 文档的示例：

```
<data>
<variable name="somedata">
<row>
   <column>data</column> 
   <column>data</column> 
   <column>data</column> 
   <column>data</column> 
   <column>data</column>  
   <column>data</column>  
  </row>
 </variable>
 <variable name="CurrentSession">
  <row>
   <column>data I what to get</column> 
   <column>data I what to get</column> 
   <column />
  </row>
  <row>
   <column>data I what to get</column> 
   <column>data I what to get</column> 
   <column />
   </row>
 </variable>
</data> 
```

我决定用 Linq to XML 来做。

这是我到目前为止所拥有的：

```
 var doc = XDocument.Load(@"D:\CurrentSession.xml");
        var query = from d in doc.Descendants("row")
                    //where (string)d.Attribute("name") == ("CurrentSession")
                    select (string)d.Element("column");
        foreach (string name in query)
        {
            string xml = "test : " + name + "";
        } 
```

我的问题是，目前我正在从“列”获取所有数据，我只从“列”的范围内获取数据`<variable name="currentSession">`但是我很难跳过`<row>`

谁能帮我弄清楚如何跳过行节点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:25:44.507

我想您应该首先获取“变量”，按“where”对其进行过滤，然后获取其行和列元素：

```
 var doc = XDocument.Load(@"D:\CurrentSession.xml");
  var query = (from d in doc.Descendants("variable")
              where (string)d.Attribute("name") == "CurrentSession"
              select d.Elements("row")).First().Select(row => row.Element("column")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:26:04.527

你的问题不是很清楚，但我*认为*你只是想要：

```
var query = doc.Descendants("variable")
               .Where(v => (string) v.Attribute("name") == "CurrentSession")
               .Single()
               .Elements("row")
               .Select(row => (string) row.Element("column")); 
```

请注意，这假设始终存在*一个* `variable`名为“CurrentSession”的元素，并且您实际上只需要每行第一列的值。

如果这不是您所需要的，那么您的问题需要更清楚。

# django - Django Celery Task 不使用 .delay 执行

> ID：15833826
> 
> 赞同：7
> 
> 时间：2013-04-05T12:20:15.413
> 
> 标签：django, celery

我能够执行我的任务没问题

```
 scrape_adhoc_reporting([store], [types], inventory) 
```

这是一个问题，因为这个任务很容易花费一个小时。所以我尝试使任务异步。我尝试了以下两种方法：

```
 scrape_adhoc_reporting.apply_async(args=[[store], [types], inventory])
    scrape_adhoc_reporting.delay([store], [types], inventory) 
```

这两种方法都不起作用。视图只是按原样重定向，但任务永远不会被执行。错误日志中没有错误。关于我做错了什么的任何见解？

**编辑：**再环顾四周后，我看到人们在谈论注册任务。这是我需要做的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-24T10:19:31.627

我遇到了同样的问题，我刚刚解决了它。MattH 是对的：这是由于非在职员工。

我在 Windows 上使用 Django (1.5)、Celery (3.0+) 和 Django-Celery。为了让 Celery Beat 工作，我遵循了这个教程：[http](http://mrtn.me/blog/2012/07/04/django-on-windows-run-celery-as-a-windows-service/) ://mrtn.me/blog/2012/07/04/django-on-windows-run-celery-as-a-windows-service/在 Windows 上，Beat只能作为服务启动。

但是，作为您，我的任务已启动但未执行。这来自打包版本 django-windows-tools（来自 pip）中的一个错误。

[我通过从 GitHub ( https://github.com/antoinemartin/django-windows-tools](https://github.com/antoinemartin/django-windows-tools) )下载最新版本的 django-windows-tools 解决了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T12:27:13.693

如果您希望它远程运行，您需要一个运行加载该任务的工作进程，并配置一个路由系统以获取在调用者和工作人员之间发送的任务请求。

看看 celery 的[工人](http://docs.celeryproject.org/en/latest/userguide/workers.html)和[任务](http://docs.celeryproject.org/en/latest/userguide/tasks.html)文档。

您正在运行的代码只是在本地执行任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-11T10:04:23.127

通常在 Windows 中使用异步 celery 任务时，您会收到一个错误，该错误可以通过设置参数来修复。

即：使用文件**celery.py中的****Django** ，您应该：

 **`os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'main.settings')` `os.environ.setdefault('FORKED_BY_MULTIPROCESSING', '1')` **<== 添加此行以实现 Windows 兼容性。**

这将解决 Windows 上的问题，并且不会在其他系统上产生不兼容问题。**

# mysql - SELECT WHERE IN 使用文本字符串查询

> ID：15833832
> 
> 赞同：2
> 
> 时间：2013-04-05T12:20:22.670
> 
> 标签：mysql, select, where, concat

我环顾四周，尝试了一些事情，但我似乎无法让它工作......有人可以帮忙吗？

```
$typeall = " ('House','Condo','Loft','Townhouse','Land')";

$rs = mysql_query("SELECT * FROM 'houses' WHERE and category IN " .$typeall); 
```

不工作

但如果我输入

```
$rs = mysql_query("SELECT * FROM 'houses' WHERE and category IN ('House','Condo','Loft','Townhouse','Land')"); 
```

它工作完美，为什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:25:44.700

尝试这个：

```
$typeall = "'House','Condo','Loft','Townhouse','Land'";

$rs = mysql_query("SELECT * FROM 'houses' WHERE and category IN (".$typeall.")"); 
```

可能是变量 $typeall 在括号中不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:27:56.823

不要引用表名，并删除额外的`and`：

```
$typeall = " ('House','Condo','Loft','Townhouse','Land')";
$rs = mysql_query("SELECT * FROM houses WHERE category IN " .$typeall); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T12:23:21.570

您应该删除`and`：

```
WHERE and category IN ... 
```

进入：

```
WHERE category IN ... 
```

# c# - 如何在服务器中提供文件夹的路径以保存图像？

> ID：15833833
> 
> 赞同：0
> 
> 时间：2013-04-05T12:20:26.327
> 
> 标签：c#, asp.net-mvc, save-as, server.mappath

我正在尝试将图像存储到两个应用程序中（均发布在服务器上）。这是我保存图像的代码：

```
 string path = Server.MapPath("/Images/Landing/bottom_banner/");           
 string path1 = @"_http://10.241.193.22/Myapplication/Images/Landing/bottom_banner/";
  HttpPostedFileBase photo = Request.Files["adup"];
            if (photo.ContentLength != 0)
            {
                string lastPart = photo.FileName.Split('\\').Last();
                Random random = new Random();
                int rno = random.Next(0, 1000);
                photo.SaveAs(path + rno + lastPart);
                photo.SaveAs(path1 + rno + lastPart);
            } 
```

**注意：`Myapplication`是托管在同一台服务器上的另一个应用程序**

我的问题是我可以将图像保存在我的第一个应用程序中，`Server.MapPath`但是当编译器到达该部分 `photo.SaveAs(path1 + rno + lastPart)`时，它会给出错误：

> SaveAs方法配置为需要root路径，路径'_http://10.241.193.22/Myapplication/Images/Landing/bottom_banner/676Chrysanthemum.jpg'没有root

请建议我怎样才能消除这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:27:52.147

您应该将图像发布到第二台服务器并在那里使用相同的方法（Server.MapPath）。

在远程服务器上保存图像（或其他文件）是不可能的。

如果您知道绝对路径（例如）'C:\Web\ApplicationOne...\image.png\' 和 'C:\Web\ApplicationTwo...\image.png' 你可以像这样替换路径差异：

```
photo.SaveAs(path + rno + lastPart);
photo.SaveAs(path.Replace("ApplicationOne", "ApplicationTwo") + rno + lastPart); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T12:37:36.387

我不确定这是否正确，但你能做到吗？

在当前应用程序中存储 Server.MapPath 值，然后将当前应用程序名称替换为“Myapplication”，然后添加尾随路径。像这样的东西

```
string path1 = Server.MapPath("");
path1.Replace("Application1", "Myapplication"); //Considering "Application1" is the name of your current application
path1 += "/Images/Landing/bottom_banner/";
HttpPostedFileBase photo = Request.Files["adup"];
        if (photo.ContentLength != 0)
        {
            string lastPart = photo.FileName.Split('\\').Last();
            Random random = new Random();
            int rno = random.Next(0, 1000);
            photo.SaveAs(path1 + rno + lastPart);
        } 
```

这个可能有权限问题。我没有检查过。如果它有效，请告诉我。

# spring - Apache Tiles 2.2.2 - 传播值

> ID：15833837
> 
> 赞同：0
> 
> 时间：2013-04-05T12:20:34.567
> 
> 标签：spring, spring-mvc, apache-tiles

```
<tiles-definitions>
    <definition name="home" template="/WEB-INF/views/home.jsp">
        <put-attribute name="title"       value="My App" />
        <put-attribute name="header"      value="/WEB-INF/views/common/header.jsp" />
        <put-attribute name="menu"        value="/WEB-INF/views/common/nav.jsp" />
        <put-attribute name="footer"      value="/WEB-INF/views/common/footer.jsp" />
    </definition>
</tiles-definitions> 
```

如何将标题值（我的应用程序）传播到 header.jsp？在标题 jsp 中，当我这样做时：

```
<tiles:insertAttribute name="title" ignore="true" /> 
```

什么都没有打印。当我在 home.jsp 中执行相同操作时，会打印 My App。cascaded=true 没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T21:59:02.853

目前尚不清楚您尝试将其放在哪里`cascade=true`（假设这是您的问题中的错字：它应该是“级联”，而不是“级联”），但以下工作按预期工作：

**瓷砖.xml：**

```
<tiles-definitions>
    <definition name="home" template="/WEB-INF/views/home.jsp">
        <put-attribute name="title"   value="My App" cascade="true"/>
        <put-attribute name="header"  value="/WEB-INF/views/common/header.jsp" />
        (...)
    </definition>
</tiles-definitions> 
```

**主页.jsp：**

```
 Title: <tiles:insertAttribute name="title" /> <br/>
    Header: <tiles:insertAttribute name="header" /> 
```

**header.jsp：**

```
Title in header: <tiles:insertAttribute name="title" /> 
```

* * *

输出是：

```
标题：我的应用
标题：标题中的标题：我的应用程序
```

# node.js - npm protobuf 失败

> ID：15833839
> 
> 赞同：1
> 
> 时间：2013-04-05T12:20:38.710
> 
> 标签：node.js, npm, protocol-buffers

我正在使用 Windows 7，并且在执行此操作时出现此错误

```
 npm install protobuf

D:\Projects\EventstoreSample\node_modules\protobuf>node "C:\Program Files\nodejs
\node_modules\npm\bin\node-gyp-bin\\..\..\node_modules\node-gyp\bin\node-gyp.js"
rebuild
gyp ERR! configure error
gyp ERR! stack Error: Command failed:   File "<string>", line 1
gyp ERR! stack     import platform; print platform.python_version();
gyp ERR! stack                                   ^
gyp ERR! stack SyntaxError: invalid syntax
gyp ERR! stack
gyp ERR! stack     at ChildProcess.exithandler (child_process.js:540:15)
gyp ERR! stack     at ChildProcess.EventEmitter.emit (events.js:99:17)
gyp ERR! stack     at maybeClose (child_process.js:638:16)
gyp ERR! stack     at Process._handle.onexit (child_process.js:680:5)
gyp ERR! System Windows_NT 6.1.7601
gyp ERR! command "node" "C:\\Program Files\\nodejs\\node_modules\\npm\\node_modu
les\\node-gyp\\bin\\node-gyp.js" "rebuild"
gyp ERR! cwd D:\Projects\EventstoreSample\node_modules\protobuf 
```

我在环境变量中的 pythonpath 变量设置为：

```
"C:\Python33\Lib;C:\Python33\DLLs;" 
```

在我的命令提示符下键入 python 会将我带到 python shell。

我该如何解决这个问题？

PS：我从未使用过python。由于这种依赖性而安装了它。

# c++ - 插入以提升无序地图

> ID：15833847
> 
> 赞同：3
> 
> 时间：2013-04-05T12:21:07.283
> 
> 标签：c++, boost, boost-unordered

嗨，我正在尝试将记录插入 boost::unordered_map

地图定义为

```
boost::unordered_map<int,Input> input_l1_map; 
```

其中 Input 是类

```
class Input {

        int id;
        std::string name;
        std::string desc;
        std::string short_name;
        std::string signal_presence;
        std::string xpnt;
        } 
```

我使用一个函数来插入记录，如下所示

```
void RuntimeData::hash_table(int id,Input input)
{

  this->input_l1_map.insert(id,input);

} 
```

我阅读了 boost 文档，它说有一个`insert()`向容器插入数据的函数，但是当我编译它时显示错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T12:24:26.443

你在哪里找到这样`insert`的方法？

```
 std::pair<iterator, bool> insert(value_type const&);
  std::pair<iterator, bool> insert(value_type&&);
  iterator insert(const_iterator, value_type const&);
  iterator insert(const_iterator, value_type&&);
  template<typename InputIterator> void insert(InputIterator, InputIterator); 
```

`value_type`在哪里

```
 typedef Key                                    key_type;            
  typedef std::pair<Key const, Mapped>           value_type; 
```

从[这里](http://www.boost.org/doc/libs/1_52_0/doc/html/boost/unordered_map.html)

你应该使用`this->input_l1_map.insert(std::make_pair(id, input));`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T12:25:07.557

insert 采用 value_type，其定义为：

`typedef std::pair<Key const, Mapped> value_type;`

```
void RuntimeData::hash_table(int id,Input input)
{

  this->input_l1_map.insert(std::make_pair(id,input));

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T12:24:14.323

IMO 最自然的写法是

```
input_l1_map[id] = input; 
```

虽然

```
input_l1_map.insert({ id,input }); // C++11 
```

也可以。

或者，地图中存储的对将有一个 typedef：

```
typedef boost::unordered_map<int,Input> InputMap;
InputMap input_l1_map; 
```

现在您可以明确表示：

```
InputMap::value_type item(id, input);
input_l1_map.insert(item); 
```

# javascript - 在 dijit/form/Horizo ntalSlider 中避免使用小数值

> ID：15833852
> 
> 赞同：1
> 
> 时间：2013-04-05T12:21:24.150
> 
> 标签：javascript, slider, dojo

在`dijit/form/HorizontalSlider`更改中，我在文本框中获取值。这些值是十进制的，例如`51.66777777`. 我只想要`51`。

```
<div id="horizontalSlider"></div>
<input type="text" id="sliderValue" data-dojo-type="dijit.form.TextBox" style="width:190px;" onkeyup="getSliderTxtBoxValue();">

var slider = new HorizontalSlider({
                    name: "horizontalSlider",
                    value: 1,
                    minimum: 1,
                    maximum: 500,
                    discreteValues: 10,
                    intermediateChanges: true,
                    style: "width:200px;",
                    onChange: function(value){
                        dom.byId("sliderValue").value = value;
                    }
                }, "horizontalSlider"); 
```

> ### 也可以看看：
> 
> [http://dojotoolkit.org/reference-guide/1.8/dijit/form/Horizo​​ntalSlider.html](http://dojotoolkit.org/reference-guide/1.8/dijit/form/HorizontalSlider.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T12:51:16.420

你见过脊椎穿刺吗？这个去11！

这是可以工作的代码：

```
value: 0,
minimum: 0,
maximum: 500,
discreteValues: 11, 
```

你想要 11 因为你想要 11 个离散值：

`0,50,100,150,200,250,300,350,400,450,500`

我**[为这个问题创造了一个小提琴](http://jsfiddle.net/JhPcj/1/)。**

# .net - 如何在 Visual Studio 菜单项上注册鼠标悬停事件？

> ID：15833853
> 
> 赞同：0
> 
> 时间：2013-04-05T12:21:25.743
> 
> 标签：.net, visual-studio, envdte, vsix, vspackage

我正在编写 VSIX 插件。我在 Visual Studio 标准工具栏上创建了一个图标。我的自定义命令附加到它：

```
var mcs = GetService(typeof(IMenuCommandService)) as OleMenuCommandService;
var commandId = new CommandID(GuidList.guidSthCmdSet, PkgCmdIDList.cmdidSth);
command = new OleMenuCommand(DoSomething, commandId);
mcs.AddCommand(command); 
```

如果我点击这个图标，`DoSomething`函数就会调用。我现在需要做的是运行其他功能，而我的鼠标光标在工具栏图标上。这个怎么做 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:11:39.700

我想说，这是不可能的……

# performance - Akka 可扩展性和性能基准测试用例

> ID：15833855
> 
> 赞同：3
> 
> 时间：2013-04-05T12:21:26.697
> 
> 标签：performance, scala, scalability, akka

我一直在寻找一个可以展示 Scala/Akka 的“可扩展性”的测试用例。

我提到了 akka-actor-test/akka.performance.trading 测试用例，但它似乎是一个单元测试用例，而不是性能基准测试用例。

我已经运行了简单的基于 akka Actor 的 Ping-Pong 测试用例，它在同一个 JVM 中每秒提供 650K pin-pong。但是，如果我让它们作为在同一台机器上的不同 JVM 中运行的远程参与者，它会下降到每秒 2K 乒乓球。

但我想这不足以说明为什么有人应该使用 Scala 而不是 Java。如果在 Java 中运行相同的测试用例，可能会得到更好的结果。那么为什么有人应该选择基于 scala 的 akka 演员呢？**哪个测试用例场景如果用 C++/Java 编写不会超出某个点并且 Scala 更适合？**

Github 有这样的测试用例吗？我见过 jboner/akka-bench 但它似乎很旧（最近一次更新似乎是 3 年前）。还有其他我想念的吗？如果是，请分享给我。如果没有，请提出方案，我将开发测试用例并上传到 github。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:04:42.587

在同一 JVM 中为 Scala 上编写的不同 Actor 库测试消息发送吞吐量和消息交换延迟的基准测试（Akka vs. Lift vs. ProxyActors vs. Scala vs. Scalaz）：[https ://github.com/plokhotnyuk/actors](https://github.com/plokhotnyuk/actors)

# ios - 在 UINavigationController 中嵌入 UITabBar 控制器

> ID：15833857
> 
> 赞同：0
> 
> 时间：2013-04-05T12:21:28.323
> 
> 标签：ios, objective-c, uinavigationcontroller, uitabbarcontroller

我搜索了这个案例，但我找不到如何在导航控制器中正确嵌入标签栏控制器。

更具体; 我在 appdelagete 内的 didFinishLauncinhWithOptions 方法中创建了导航控制器，并且我在视图控制器中导航没有任何问题。

我有一个带有 3 个按钮的 mainViewController，每个按钮都将 anotherView 推送到导航控制器。在我被重定向的一个视图中，我想使用标签栏。

我的问题是在这种情况下我应该在哪里创建我的标签栏控制器，是否允许在导航控制器中嵌入标签栏控制器？如果不是我应该怎么做，因为我真的想从一开始就嵌入我的导航控制器，并让导航栏贯穿整个程序。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:08:13.757

经过一段时间的努力，我设法通过在标签栏下方插入新视图来找出解决方案。

这个帖子真的帮了我很多关于这个案子的事情；

[导航控制器内的标签栏控制器，或共享导航根视图](https://stackoverflow.com/questions/576764/tab-bar-controller-inside-a-navigation-controller-or-sharing-a-navigation-root)

干杯;

# configuration - beresp.grace 和 obj.grace 有什么区别

> ID：15833863
> 
> 赞同：2
> 
> 时间：2013-04-05T12:21:44.817
> 
> 标签：configuration, varnish

在设置我的 default.vcl 文件（Varnish 3）时，我看到了对 vcl_fetch 使用 beresp.grace 或 obj.grace 的不同建议。有什么不同？

[https://www.varnish-cache.org/docs/3.0/reference/vcl.html](https://www.varnish-cache.org/docs/3.0/reference/vcl.html) obj.grace 对象的宽限期（以秒为单位）。obj.grace 是可写的。beresp.grace 设置为启用宽限期的句点。

听起来几乎一样。

它们是否应该像[https://www.varnish-software.com/static/book/Saving_a_request.html](https://www.varnish-software.com/static/book/Saving_a_request.html) set beresp.ttl=1m 一样一起使用；设置 req.grace = 30s; 设置 beresp.grace = 1h；

我想要一些清晰。关于 ttl 的想法也很有用。可悲的是，许多文档仍然适用于 V2： [http ://drupal.org/node/1823970](http://drupal.org/node/1823970)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T04:04:53.390

两者在 VCL 代码中的不同位置使用。

使用（V3）使用的一些典型例子，区别是这样的。（用 obj 代替 req）。

```
sub vcl_fetch {
   set beresp.grace = 1h;
} 
```

此代码告诉 varnish 将缓存对象*标记*为可使用长达 1 小时。

而这段代码：

```
sub vcl_recv {
  if (req.backend.healthy) {
    set req.grace = 30s;
  } else {
    set req.grace = 1h;
  }
} 
```

...告诉清漆在指定的时间内*使用*标记的对象，基于（在这种情况下）后端是健康的。

TTL 是缓存项目的时间，除非您有一些非常特殊（或奇怪）的要求，否则最好在应用程序或 Web 服务器层中设置缓存标头）。

唯一需要在 VCL 中设置 TTL 的情况是，如果您想要与标头不同的东西，或者您需要静默（不将任何标头传递给请求浏览器）延长可以缓存对象的时间。

# javascript - yuidoc - 如何在其他文件中定义类方法

> ID：15833864
> 
> 赞同：1
> 
> 时间：2013-04-05T12:21:47.637
> 
> 标签：javascript, documentation, yuidoc

我正在用 yuidoc 编写文档。但是，我有一个模型类，它在别处定义了它的一个方法。这是一些可视化情况的代码。假设我有一个文件 model.js：

```
/**
 * @class Model
 * @constructor
 */
 window.Model = function(){}
 .... 
```

还有一个文件 activerecord.js：

```
(function(){
    /**
     * @class ActiveRecord
     * @constructor
     window.ActiveRecord = function(){}
     ....
     /**
      * @method Model.hasMany
      * @param {Class} model
      */
     function hasMany(model) {}
})() ; 
```

如您所见，“hasMany”方法应该出现在 Model 的类文档下。然而，事实并非如此。这样的事情可能吗？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-18T10:47:36.780

查看`@for`标签：http: [//yui.github.io/yuidoc/syntax/index.html#for](http://yui.github.io/yuidoc/syntax/index.html#for)

```
/**  
 * Some method "hasMany" disconnected from its class "Model".
 * 
 * @method hasMany  
 * @for Model
 * @param {Class} model 
 */
function hasMany(model) {} 
```

# hudson - 在 Hudson 构建后移动工件而不是复制

> ID：15833869
> 
> 赞同：0
> 
> 时间：2013-04-05T12:21:53.637
> 
> 标签：hudson, build-automation

我们正在使用 Hudson v.2.2.1

我注意到 Hudson 复制了生成的工件而不是移动。有没有办法在构建后运行任何类型的脚本来删除这些工件？

我正在考虑为每个项目创建一个新任务，但这对我来说似乎有点矫枉过正。

或者有没有办法获取有关触发后期构建的构建的信息？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T13:28:10.223

解决我的问题是安装“工作区清理插件”

# activemq - ActiveMQ 如何检测慢消费者

> ID：15833873
> 
> 赞同：2
> 
> 时间：2013-04-05T12:22:02.403
> 
> 标签：activemq

1.  ActiveMQ 用来说消费者是慢消费者的确切逻辑是什么？
2.  如果有多个消费者，是否会考虑到其他消费者也连接到同一主题？

如果也可以提供相同的代码指针，那就太好了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T09:35:32.407

1.  查看第 100 行和[TopicSubscription.java](https://fisheye6.atlassian.com/browse/activemq/trunk/activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java?hb=true)中的 add 方法。

2.  慢消费者是在接收已发布消息方面缺乏落后的慢消费者。其他消费者有多“快”对于慢速消费者来说并不重要。更多的是生产消息和消费消息之间的区别。阅读代码以获取详细信息或将您的问题改写为更具体的内容。

# php - 谷歌浏览器上的cookie问题

> ID：15833876
> 
> 赞同：1
> 
> 时间：2013-04-05T12:22:09.353
> 
> 标签：php, google-chrome, cookies, remember-me

我的网站遇到 cookie 问题。

当客户在登录前点击“记住我”时，会创建一个 cookie，然后当他离开并稍后回来时，他会自动重新登录。

它适用于 firefox/IE & co，但不适用于 chrome...

我写了一个小脚本来测试 chrome 上的 cookie 创建。这里是 ：

```
<?php 
if( isset($_GET['test']) ) setcookie('TESTSOMECOOKIE',1234,time()+60*60*24*365);
?> 
```

再简单不过了！

当我运行脚本时：

1.  cookie 已正确创建。
2.  如果我关闭选项卡并打开一个新选项卡（没有通过测试参数），cookie 仍然存在。
3.  如果我关闭谷歌浏览器并重新打开它，然后转到测试脚本（没有通过测试参数），cookie 不再存在......如果我在 firefox 或 IE 上这样做没问题，cookie 仍然存在所有情况。
4.  我正在网络服务器（不是本地 IP 地址）上尝试此操作。
5.  我还没有激活 chrome 上的私人导航。
6.  Cookie 已启用，并且可以在 gmail/facebook 等上使用... chrome 会为这些网站保留 cookie！
7.  我已经检查了网上发布的其他问题，但没有真正的答案......

所以，这是一个非常奇怪的问题，如果可能的话，我想解决。

如果有人有想法...

非常感谢您的建议，对不起我的英语

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T12:42:18.077

试试看是否`Keep local data only until I quit my browser`勾选。

它位于`Settings > Content Settings > Cookies`.

看看是否有帮助。

# mysql - SQL游标&存储过程顺序排列

> ID：15833877
> 
> 赞同：1
> 
> 时间：2013-04-05T12:22:09.560
> 
> 标签：mysql, sql, stored-procedures, cursor

我正在处理一个存储过程来更新产品表中的订单字段。它现在唯一的问题是循环中的最后一项（cur），增加了两次而不是一次（所以被称为）。像这样：

```
+-----------------+
|产品+订单|
|_id | |
| | |
| 1 | 0 |
| 2 | 1 |
| 等等。 | 等等。|
| 36 | 35 |
| 37 | 36 |
| 38 | 38 |
| |
+-----------------+
```

我不知道为什么。在这种情况下，链接表（CategoryProduct）变为 38，category_id 为 2`CALL curorder(2);`

存储过程：

```
DELIMITER //
CREATE PROCEDURE curorder(
    IN catid INT
)
BEGIN
    DECLARE done INT DEFAULT FALSE;
    DECLARE i INT DEFAULT 0;
    DECLARE p INT;
    DECLARE cur CURSOR FOR SELECT product_id FROM test.CategoryProduct WHERE category_id = catid;
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;
    OPEN cur;
        read_loop: LOOP
            FETCH cur INTO p;
            UPDATE  `test`.`Product` SET  `order` =  i WHERE  `Product`.`product_id` =p;
            SET i = i + 1;
            IF done THEN
                LEAVE read_loop;
            END IF;
        END LOOP;
    CLOSE cur;
END //
DELIMITER ; 
```

数据库是一个Mysql数据库。任何改进程序的建议总是受欢迎的。

提前致谢。

编辑：

我已经尝试将 SET i STATEMENT 放在 IF 语句下方，但没有结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:27:33.090

你应该把：

```
IF done THEN
  LEAVE read_loop;
END IF; 
```

在您的更新语句上方，mysql 最后一次遍历循环是使用旧变量，因为没有新的“p”。但我增加了。

我调试存储过程的好方法是使用日志表：

```
CREATE TABLE procedureLog
(
  id INTEGER AUTO_INCREMENT,
  description TEXT,
  PRIMARY KEY (id)
); 
```

对于这种情况，您可以使用以下查询记录更新参数：

```
INSERT INTO  `test`.`procedureLog` (`id` ,`description`) VALUES (null,  CONCAT('id: ', CAST(p as CHAR), ' order: ', CAST(i as CHAR))); 
```

祝你好运！

# datasource - WebLogic--->无法加载驱动：com.mysql.jdbc.Driver

> ID：15833886
> 
> 赞同：2
> 
> 时间：2013-04-05T12:22:36.030
> 
> 标签：datasource, weblogic-10.x, mysql-connector

我在 weblogic 应用程序服务器 10.3 中创建数据源时遇到问题，我正在为 MySql 数据库建立 JDBC 连接，我将 mysql 驱动程序单独放在 weblogic 的 lib 文件夹`\wlserver_10.3\server\lib`和 mysql 文件夹`wlserver_10.3\server\ext\jdbc\mysql`中，错误消息仍然出现

注意：此文件夹中有两个 jar 文件`wlserver_10.3\server\ext\jdbc\mysql`，我将它们删除以避免任何冲突，我该如何解决这些问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T14:59:24.370

您是否正在使用或需要与 weblogic 安装随附的驱动程序不同的驱动程序？如果您是，则需要将其添加到 setDomainEnv.sh 中的 CLASSPATH。否则它将默认使用：

```
\wlserver_10.3\server\lib\mysql-connector-java-commercial-5.x.x-bin.jar 
```

最近，我们不得不将额外的 Oracle jar 添加到我们的 CLASSPATH 以实现安全连接。您可以在这里查看更多信息：http: [//docs.oracle.com/cd/E13222_01/wls/docs100/jdbc_admin/third_party_drivers.html](http://docs.oracle.com/cd/E13222_01/wls/docs100/jdbc_admin/third_party_drivers.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-12T14:56:32.953

如果有人寻找解决方案，如何将 JDBC 驱动程序（在我的情况下为 PostgreSQL）添加到附加到**IntelliJ IDEA**的 Weblogic 14c 安装中：

[![在此处输入图像描述](https://i.stack.imgur.com/6ibrE.png)](https://i.stack.imgur.com/6ibrE.png)

jar 文件的位置无关紧要。不需要将其放入服务器的`lib`目录中。

# iis - 使用不同端口的 IIS 站点设置

> ID：15833888
> 
> 赞同：0
> 
> 时间：2013-04-05T12:22:41.187
> 
> 标签：iis, iis-7

我们遇到一种情况，我们必须创建使用具有不同端口的站点

1) 80 到站点 -xyz

2) 1443 转到其他站点 - abc.zyx 使用相同的根文件夹。

所以我们在 iis 服务器绑定中添加了 1443 以及一个新的私有 ip。该站点现在使用与根站点相同的根文件夹，端口为 80。

现在 privateip:port 没有出现。需要用 1443 端口查看同一个站点。

请帮助

谢谢维韦克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:26:45.810

我不确定你在问什么，但你可以在 IIS 中创建两个单独的站点来查看同一个根文件夹，只要它们具有不同的主机名。

关于端口也可以这样说。您可以在站点绑定中添加多个端口，只要它们实际上是不同的端口。

只要确保防火墙上的所有端口都打开。你应该没问题。

# android - 替换已弃用图库的选项

> ID：15833889
> 
> 赞同：21
> 
> 时间：2013-04-05T12:22:46.970
> 
> 标签：android, android-viewpager, deprecated

我目前正在使用图库小部件来显示缩略图的滑动列表。每个缩略图都有一个背景颜色和一个文本覆盖。（这是一个颜色选择器）。

但是，从[API 版本 16 开始，该库已被弃用。](http://developer.android.com/reference/android/widget/Gallery.html). 据我了解，不能保证 API 版本大于 16 的手机具有图库小部件。

我会使用 viewpager，但它一次只显示一个视图，我也想显示相邻的视图。水平滚动视图可以做到这一点，但它不会像画廊那样捕捉到最近的选项。

我已经寻找现有的小部件，但找不到任何小部件。你对我应该选择什么小部件有什么建议吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-11-29T21:57:55.860

替换 Gallery 的一个不错的选择是 ViewPager，用作列表视图或网格视图，您必须制作自己的适配器来扩展 PagerAdater 和布局项。我已经将它与我附在下面的代码一起使用，并且效果很好。良好的触摸响应，我希望这可以帮助你！

布局

```
<android.support.v4.view.ViewPager
    android:id="@+id/gallery_item"
    android:layout_width="fill_parent"
    android:layout_height="709dp"
    android:layout_below="@+id/relative_headerBar"
    >

</android.support.v4.view.ViewPager> 
```

班级代码

```
private ViewPager gallery;
gallery = (ViewPager) findViewById(R.id.gallery_item);

gallery = (ViewPager) findViewById(R.id.gallery_item);
    lista_galeria = new ArrayList<ObjectVerGaleria>();

    int i=0;
    for(i=0;i<listImages.length;i++)
    {       
        ObjectVerGaleria objV = new ObjectVerGaleria();
        objV.setUrlImg(listImages[i]);  
        lista_galeria.add(objV);
    }
    gallery.setAdapter(new AdapterVerGaleria(ctx, lista_galeria));

    gallery.setOnPageChangeListener(new OnPageChangeListener()
    {

        public void onPageSelected(int pos)
        {
            String pathImage = listImages[pos].toString();

            currentPosFront = pos;
            Log.d("setOnItemSelectedListener>>","path:"+pathImage);

        }

        public void onPageScrolled(int arg0, float arg1, int arg2)
        {
            // TODO Auto-generated method stub

        }

        public void onPageScrollStateChanged(int arg0)
        {
            // TODO Auto-generated method stub

        }
    }); 
```

适配器

```
public class AdapterVerGaleria extends PagerAdapter {

private Activity ctx;
private ArrayList<ObjectVerGaleria> dataList;

public AdapterVerGaleria(Activity act, ArrayList<ObjectVerGaleria> lista) {

    ctx = act;
    dataList = lista;
}

public int getCount() {
    return dataList.size();
}

public Object getItem(int pos) {
    return pos;
}

@Override
public Object instantiateItem(View collection, int pos)
{
    ImageView foto = new ImageView(ctx);

        //foto.setLayoutParams(new ViewPager.LayoutParams(Gallery.LayoutParams.FILL_PARENT, Gallery.LayoutParams.FILL_PARENT));
        foto.setScaleType(ImageView.ScaleType.FIT_XY);
        Utils.fetchDrawableOnThread(Utils.getPath(ctx)+"/"+dataList.get(pos).getUrlImg(), foto, true);
        ((ViewPager)collection).addView(foto);

    return foto;
}

@Override
public void destroyItem(View collection, int position, Object view)
{
    ((ViewPager)collection).removeView((ImageView)view);

}

public long getItemId(int pos) {
    return pos;
}

@Override
public boolean isViewFromObject(View view, Object object)
{
    // TODO Auto-generated method stub
    return view == ((ImageView)object);
} 
```

}

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-09-24T13:38:07.443

我使用了一个 ViewPager，它的 clipToPadding 设置为 false 并且左右两边的填充值相等。这使得页面小于 viewpager 并在其中居中。

然后我将 viewPager.setPageMargin 设置为负值，以允许两侧的页面可见。这样，您就有了一个居中的页面，而其他页面则显示出来。

然后你还可以通过在 ViewPager (viewPager.setPageTransformer) 上设置一个 PageTransformer 来添加一些花哨的动画。我使用 PageTransformer 中提供的浮点数进行了旋转和缩放，以模拟类似轮播的效果。

我希望这对某人有帮助。此外，我认为 Gallery 已被弃用，因为投掷感觉不对。您不知道在投掷后会选择哪个项目。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-09T18:03:24.170

有人写了一个替代画廊，回收它的观点。它基于原始画廊代码，因此应该是一个改进。这是链接： [https ://github.com/falnatsheh/EcoGallery](https://github.com/falnatsheh/EcoGallery)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-11-23T06:40:31.450

目前最好的解决方案是[RecyclerView](https://developer.android.com/reference/android/support/v7/widget/RecyclerView.html "回收站视图")

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-05T14:47:40.343

有一种方法可以自定义 ViewPager 以显示相邻视图，但它不是很简单。检查这个 - [http://commonsware.com/blog/2012/08/20/multiple-view-viewpager-options.html](http://commonsware.com/blog/2012/08/20/multiple-view-viewpager-options.html)。

如果它没有帮助你可以尝试 Horizo​​ntallScrollView。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-05T12:41:26.150

你试过coverflow吗？你可以使用这个。[https://github.com/Polidea/android-coverflow](https://github.com/Polidea/android-coverflow)希望这可能对您有所帮助。

或者

您还可以使用 page curl 进行滑动。[https://github.com/moritz-wundke/android-page-curl](https://github.com/moritz-wundke/android-page-curl)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-09-05T07:19:44.310

我认为使用[View Pager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)替换图库是个好主意。

# eclipse - Eclipse Egit：标签装饰不显示，选项不保持选中

> ID：15833890
> 
> 赞同：1
> 
> 时间：2013-04-05T12:22:50.237
> 
> 标签：eclipse, git, egit

没有任何明显的原因（没有任何更新），因为几天以来 EGit 文本装饰不再出现在 Eclipse 中。在“窗口 > 首选项 > 常规 > 外观 > 标签装饰 > Git”中未选中它，我无法检查它！如果我检查它并“应用”和“确定”，什么都不会发生并且它仍然未被选中......

我的 Eclipse 日志如下：

```
!ENTRY org.eclipse.ui.workbench 4 2 2013-04-05 14:18:08.926
!MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.ui.workbench".
!STACK 0
org.eclipse.jgit.errors.RevWalkException: Walk failure.
    at org.eclipse.jgit.revwalk.RevWalk.iterator(RevWalk.java:1237)
    at org.eclipse.jgit.revwalk.RevWalkUtils.find(RevWalkUtils.java:129)
    at org.eclipse.jgit.revwalk.RevWalkUtils.count(RevWalkUtils.java:94)
    at org.eclipse.jgit.lib.BranchTrackingStatus.of(BranchTrackingStatus.java:100)
    at org.eclipse.egit.ui.internal.decorators.DecoratableResourceHelper.getBranchStatus(DecoratableResourceHelper.java:48)
    at org.eclipse.egit.ui.internal.decorators.DecoratableResourceAdapter.<init>(DecoratableResourceAdapter.java:72)
    at org.eclipse.egit.ui.internal.decorators.GitLightweightDecorator.decorateResource(GitLightweightDecorator.java:189)
    at org.eclipse.egit.ui.internal.decorators.GitLightweightDecorator.decorate(GitLightweightDecorator.java:166)
    at org.eclipse.ui.internal.decorators.LightweightDecoratorDefinition.decorate(LightweightDecoratorDefinition.java:263)
    at org.eclipse.ui.internal.decorators.LightweightDecoratorManager$LightweightRunnable.run(LightweightDecoratorManager.java:81)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.ui.internal.decorators.LightweightDecoratorManager.decorate(LightweightDecoratorManager.java:365)
    at org.eclipse.ui.internal.decorators.LightweightDecoratorManager.getDecorations(LightweightDecoratorManager.java:347)
    at org.eclipse.ui.internal.decorators.DecorationScheduler$1.ensureResultCached(DecorationScheduler.java:371)
    at org.eclipse.ui.internal.decorators.DecorationScheduler$1.run(DecorationScheduler.java:331)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:53)
Caused by: org.eclipse.jgit.errors.MissingObjectException: Missing commit 11d64b0d91bf24bfb551fbf20c3f6b244dacd74a
    at org.eclipse.jgit.storage.file.WindowCursor.open(WindowCursor.java:127)
    at org.eclipse.jgit.revwalk.RevWalk.getCachedBytes(RevWalk.java:861)
    at org.eclipse.jgit.revwalk.RevCommit.parseHeaders(RevCommit.java:142)
    at org.eclipse.jgit.revwalk.PendingGenerator.next(PendingGenerator.java:148)
    at org.eclipse.jgit.revwalk.DelayRevQueue.next(DelayRevQueue.java:86)
    at org.eclipse.jgit.revwalk.FixUninterestingGenerator.next(FixUninterestingGenerator.java:77)
    at org.eclipse.jgit.revwalk.StartGenerator.next(StartGenerator.java:181)
    at org.eclipse.jgit.revwalk.RevWalk.next(RevWalk.java:422)
    at org.eclipse.jgit.revwalk.RevWalk.iterator(RevWalk.java:1235)
    ... 15 more

!ENTRY org.eclipse.ui 4 4 2013-04-05 14:18:08.927
!MESSAGE Exception in Decorator. The 'Git' decorator will be disabled.

!ENTRY org.eclipse.ui 4 4 2013-04-05 14:18:08.927
!MESSAGE Walk failure.
!STACK 0
org.eclipse.jgit.errors.MissingObjectException: Missing commit 11d64b0d91bf24bfb551fbf20c3f6b244dacd74a
    at org.eclipse.jgit.storage.file.WindowCursor.open(WindowCursor.java:127)
    at org.eclipse.jgit.revwalk.RevWalk.getCachedBytes(RevWalk.java:861)
    at org.eclipse.jgit.revwalk.RevCommit.parseHeaders(RevCommit.java:142)
    at org.eclipse.jgit.revwalk.PendingGenerator.next(PendingGenerator.java:148)
    at org.eclipse.jgit.revwalk.DelayRevQueue.next(DelayRevQueue.java:86)
    at org.eclipse.jgit.revwalk.FixUninterestingGenerator.next(FixUninterestingGenerator.java:77)
    at org.eclipse.jgit.revwalk.StartGenerator.next(StartGenerator.java:181)
    at org.eclipse.jgit.revwalk.RevWalk.next(RevWalk.java:422)
    at org.eclipse.jgit.revwalk.RevWalk.iterator(RevWalk.java:1235)
    at org.eclipse.jgit.revwalk.RevWalkUtils.find(RevWalkUtils.java:129)
    at org.eclipse.jgit.revwalk.RevWalkUtils.count(RevWalkUtils.java:94)
    at org.eclipse.jgit.lib.BranchTrackingStatus.of(BranchTrackingStatus.java:100)
    at org.eclipse.egit.ui.internal.decorators.DecoratableResourceHelper.getBranchStatus(DecoratableResourceHelper.java:48)
    at org.eclipse.egit.ui.internal.decorators.DecoratableResourceAdapter.<init>(DecoratableResourceAdapter.java:72)
    at org.eclipse.egit.ui.internal.decorators.GitLightweightDecorator.decorateResource(GitLightweightDecorator.java:189)
    at org.eclipse.egit.ui.internal.decorators.GitLightweightDecorator.decorate(GitLightweightDecorator.java:166)
    at org.eclipse.ui.internal.decorators.LightweightDecoratorDefinition.decorate(LightweightDecoratorDefinition.java:263)
    at org.eclipse.ui.internal.decorators.LightweightDecoratorManager$LightweightRunnable.run(LightweightDecoratorManager.java:81)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.ui.internal.decorators.LightweightDecoratorManager.decorate(LightweightDecoratorManager.java:365)
    at org.eclipse.ui.internal.decorators.LightweightDecoratorManager.getDecorations(LightweightDecoratorManager.java:347)
    at org.eclipse.ui.internal.decorators.DecorationScheduler$1.ensureResultCached(DecorationScheduler.java:371)
    at org.eclipse.ui.internal.decorators.DecorationScheduler$1.run(DecorationScheduler.java:331)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:53) 
```

我的会议：

```
Eclipse Platform
Version: 4.2.2
Build id: M20130204-1200

Eclipse Dynamic Languages Toolkit - Index Frameworks
Version: 4.0.0.201206120848

Eclipse EGit
Version: 2.2.0.201212191850-r 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:50:49.400

根据堆栈跟踪，它似乎因

```
Missing commit 11d64b0d91bf24bfb551fbf20c3f6b244dacd74a 
```

您可能希望将存储库重置（硬）为原始/主存储库，或者从上游存储库再次克隆它，假设这只是存储库的本地问题，这可能会通过用上游内容“替换”它而消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-02T15:55:36.240

我最终重新安装了 Eclipse 并清理了我的工作区。现在一切都很好...

# ios - 显示包含核心数据的部分

> ID：15833892
> 
> 赞同：0
> 
> 时间：2013-04-05T12:22:56.360
> 
> 标签：ios, xcode, core-data

我想编写一个待办事项应用程序并显示 2 个部分。1 表示必须完成的条目，1 表示已经完成的事情。我想要这样的东西：

```
 Things not done yet
    Todo 1
    Todo 2
    Things already done
    Todo 3
    Todo 4 
```

目前我有 1 个部分用于未完成的待办事项。我目前的表格视图代码如下所示

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
    NSArray *array = [[NSArray alloc] initWithObjects:@"To do",@"done",nil];

    return [array objectAtIndex:section];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return [[self.fetchedResultsController sections] count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    id <NSFetchedResultsSectionInfo> sectionInfo = [self.fetchedResultsController sections][section];
    return [sectionInfo numberOfObjects];
} 
```

我的 fetchedresultscontroller 代码如下所示：

```
 - (NSFetchedResultsController *)fetchedResultsController
{
    if (_fetchedResultsController != nil) {
        return _fetchedResultsController;
    }

    NSManagedObjectContext* context = [self managedObjectContext];
    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    // Edit the entity name as appropriate.
    NSEntityDescription* entity = [NSEntityDescription entityForName:@"Todo" inManagedObjectContext:context];
    [fetchRequest setEntity:entity];

    // Set the batch size to a suitable number.
    [fetchRequest setFetchBatchSize:20];

    // Edit the sort key as appropriate.
    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"timestamp" ascending:YES];
    NSArray *sortDescriptors = @[sortDescriptor];

    [fetchRequest setSortDescriptors:sortDescriptors];

    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"done == %@", @(NO)];

    [fetchRequest setPredicate:predicate];

    // Edit the section name key path and cache name if appropriate.
    // nil for section name key path means "no sections".
    NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:@"done" cacheName:nil];
    aFetchedResultsController.delegate = self;
    self.fetchedResultsController = aFetchedResultsController;

    NSError *error = nil;
    if (![self.fetchedResultsController performFetch:&error]) {
         // Replace this implementation with code to handle the error appropriately.
         // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }

    return _fetchedResultsController;
    } 
```

键为“NO”的对象未完成，键为“YES”的对象已完成。但我不知道如何在不同的部分显示这两个值。

* * *

**编辑**

我找到了解决问题的方法……

```
NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:@"done" cacheName:nil];
    aFetchedResultsController.delegate = self;
    self.fetchedResultsController = aFetchedResultsController; 
```

这解决了这个问题。但现在有时会在完成时显示未完成的项目。或者，如果有两个已完成的项目，它们会出现在“待办事项”下

```
 - (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
    NSArray *array = [[NSArray alloc] initWithObjects:@"Todo",@"Done",nil];

    return [array objectAtIndex:section];
}
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return [[self.fetchedResultsController sections] count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    id <NSFetchedResultsSectionInfo> sectionInfo = [self.fetchedResultsController sections][section];
    return [sectionInfo numberOfObjects];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell" forIndexPath:indexPath];
    [self configureCell:cell atIndexPath:indexPath];
    return cell;
} 
```

那是我的实际代码……现在看起来像这样。取消待办事项未检查，已完成待办事项已检查。[http://img.xnmn.de/i/2353ad.png](http://img.xnmn.de/i/2353ad.png) 但是如果我检查已完成的待办事项，它们都会出现在“待办事项” [http://img.xnmn.de/i/5edff4.png](http://img.xnmn.de/i/5edff4.png)

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:39:45.353

如果我的代码正确，那么您已经创建了很好的部分。

```
- (UITableViewCell *)tableView:(UITableView *)inTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *identifier = @"Entry";
UITableViewCell *cell = [inTableView dequeueReusableCellWithIdentifier:identifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:identifier];
}
YourObject *cellEntry = [_fetchedResultsController objectAtIndexPath:indexPath];
//init cell
} 
```

这应该为正确的部分选择正确的条目，否则您设置该部分的行是错误的。

索引路径选择正确的部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T12:40:58.353

你的代码看起来几乎是正确的。由于您将 设置`sectionKeyPath`为“完成”，因此获取的结果控制器将自动为您创建部分。您可以为“完成”属性添加另一个排序描述符，以根据条目的部分对条目进行排序。

您**需要**做的是删除`NSPredicate`. 在您当前的代码中，您使用“done == YES”过滤掉所有条目，但是由于您有两个部分，您希望结果控制器返回所有条目。

所以基本上你只需要删除

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"done == %@", @(NO)];
[fetchRequest setPredicate:predicate]; 
```

当然，您还必须实现该`– tableView:cellForRowAtIndexPath:`方法

# php - 基本 url 破坏了相对 URL

> ID：15833903
> 
> 赞同：0
> 
> 时间：2013-04-05T12:23:29.613
> 
> 标签：php, html, joomla, joomla1.7

我有一个 Joomla 网站，例如这个：

[http://polishwords.com.pl/ksiazki/ksiazka/lihakw](http://polishwords.com.pl/ksiazki/ksiazka/lihakw)

它的基础设置为：

[http://polishwords.com.pl/ksiazki/ksiazka/lihakw](http://polishwords.com.pl/ksiazki/ksiazka/lihakw)

在顶部和左侧，我在 Joomla 中创建了具有相关 URL 的菜单，例如：

/edukacja

似乎爬虫来到[http://polishwords.com.pl/ksiazki/ksiazka/lihakw](http://polishwords.com.pl/ksiazki/ksiazka/lihakw)

并使用基本 url 抓取相对路径并获取：

[http://polishwords.com.pl/ksiazki/ksiazka/lihakwedukacja](http://polishwords.com.pl/ksiazki/ksiazka/lihakwedukacja)

当他们去那里时，基本网址更改为

[http://polishwords.com.pl/ksiazki/ksiazka/lihakwedukacja](http://polishwords.com.pl/ksiazki/ksiazka/lihakwedukacja)

爬虫去：

[http://polishwords.com.pl/ksiazki/ksiazka/lihakwedukacjaedukacja](http://polishwords.com.pl/ksiazki/ksiazka/lihakwedukacjaedukacja)

等等。

因此，基本 url 与菜单的相关链接相结合，使用标准 Joomla 创建一个循环。

我不为 SEF 使用任何分机，我也不想。我使用 Joomla 1.7.5。

难道我做错了什么？你能告诉我如何解决吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T12:28:02.993

1.  **不要**使用`base href`
2.  在 HTML 中始终只使用**绝对路径**

这 2 个简单的规则将解决与 HTML 中的链接相关的所有可能错误

> 相对网址，例如：`/edukacja`

事实上，这是**绝对**路径，但是是错误的。你需要让你的 Joomla 来制作这条路径`/ksiazki/ksiazka/lihakw/edukacja`，这将是一条正确的绝对路径

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T23:48:20.570

启用系统 SEF 插件，它可能是解决方案的一部分。

另外，尝试更新到 J2.5.9，它为我修复了几个类似（但不相同）的问题。

# .net - 启用应用程序框架时启动时出现 BadImageFormatException

> ID：15833904
> 
> 赞同：1
> 
> 时间：2013-04-05T12:23:36.393
> 
> 标签：.net, vb.net, badimageformatexception

我有一个多年来一直在开发的 .NET 应用程序（大约 15 个项目，其中一些非常大），并且在尝试启动它时遇到了以下异常。

System.BadImageFormatException 未处理消息：无法加载文件或程序集“System.Runtime.Remoting，版本=4.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”或其依赖项之一。试图加载格式不正确的程序。

似乎没有任何调用堆栈 - 这发生在启动我的代码之前，所以我什至无法介入。我在一些项目中使用了这个 DLL，但我现在已经完成并完全删除了对它的所有引用，但我仍然收到错误消息。这只发生在这个项目中（我可以在解决方案中启动其他项目，也可以从其他解决方案中启动其他项目）。

编辑

经过大量的摆弄，在我的项目下的应用程序选项卡中禁用应用程序框架似乎允许它启动，但我不知道为什么。我确实想在使用其中一些功能时重新启用它。

编辑 2 经过更多的混乱，我认为这是由应用程序框架使用远程处理来强制它是一个单实例应用程序引起的。但是，.NET 反射器似乎表明，如果我取消选中单实例选项，则实际上不应该运行它，但即使我这样做了，我仍然遇到问题。也就是说，它仍然属于使用该程序集（Microsoft.VisualBasic.ApplicationServices.ApplicationBase.Run）中的类型的方法的范围，所以我认为这就是导致它尝试解析该程序集的原因。虽然这一切都很有趣，但它并没有真正给出我为什么会得到这个例外的任何答案。我尝试用一​​个空项目复制它并且效果很好 - 两者都设置在相同的应用程序框架设置上，都在 .NET 4.0 上，都是 x86。我'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:30:43.113

当您更改 .csproj 的目标框架并将其恢复为您开始使用的框架时，通常会发生这种情况。

在 app.config 的启动标签下确保 1 if supportedRuntime version="a different runtime from cs project target"。

确保 2 这也意味着检查可能是属性文件夹中的其他自动生成或其他文件，以查看这些文件与 .csproj 文件中定义的文件之间是否没有更多的运行时不匹配。

在您开始尝试使用项目属性进行不同的操作以克服错误之前，这些可能会为您节省大量时间。

# html - 在单行文本区域旁边垂直居中文本？

> ID：15833905
> 
> 赞同：2
> 
> 时间：2013-04-05T12:23:40.253
> 
> 标签：html, css, html-table, alignment

**我希望位于单行文本区域旁边的文本与文本区域垂直居中。**

如果我将文本放在`type="text"`.

我想坚持使用单行文本区域而不是此处的输入，因为该字段可供用户将大量预格式化的数据粘贴到其中。除非程序发现问题，否则用户通常不会关心数据说什么或需要查看它。如果发现问题，则会显示错误，此时如果用户可以拖出文本区域以查看数据并研究问题，这将很有帮助。

**我的代码：**

```
<tr>
<td class="vert" > New PNR Info
  <textarea rows="1" cols="20" name="origInfo1" id="origInfo1" style="overflow:hidden"> </textarea></td>
<td align="center">Change Fee
  <input type="text" size="4" id="fee"name="fee"></td>
</tr> 
```

**我试过了：**

像这样的CSS：

```
.vert {
    vertical-align: middle;
} 
```

还有这个`vertical-align: top;`

并像这样将两者包装在 ap 标签中

```
<p>New PNR Info<textarea rows="1" cols="20" name="origInfo1" id="origInfo1" style="overflow:hidden"> </textarea></p> 
```

无济于事。

如果我的问题不清楚，也许截图会有所帮助。我希望红色箭头旁的违规文字与绿色箭头旁的文字相同。

![在此处输入图像描述](https://i.stack.imgur.com/xVjJ8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T12:28:22.073

像这样将垂直对齐应用于所有元素

[**演示**](http://jsfiddle.net/u2QQt/)

```
<p class="whatever">
    <label for="alignme">Label Text</label>
    <textarea id="alignme"></textarea>
</p>

.whatever * {
    vertical-align: middle;
} 
```

`.whatever *`相当于

```
.whatever label, .whatever textarea  {
    vertical-align: middle;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T12:29:29.383

一开始看起来不合逻辑，但是vertical-align属性需要放在更高的元素上：

[http://jsfiddle.net/N5NuA/](http://jsfiddle.net/N5NuA/)

```
textarea {
    vertical-align: middle;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T12:43:13.687

我相信问题在于您将父级（td 或 p）设置为与顶部对齐，并且由于您的 textarea 在该元素内，因此它根据父级而不是文本对齐。

我认为可行的是设置 textarea 垂直对齐。

```
<textarea style="vertical-alignment:middle"> 
```

如果这不起作用，还将父元素更改为中间元素。如果这些更改也不起作用，也请尝试 text-top 或 text-bottom 作为文本区域。

# ios - 添加到以前保存的 NSUserDefaults

> ID：15833907
> 
> 赞同：0
> 
> 时间：2013-04-05T12:23:45.170
> 
> 标签：ios, objective-c, delegates, nsuserdefaults

我正在为 iOS 制作一款游戏，其中包含每个级别的评分系统。在这里，我有一些通过使用委托获得`NSString`( ) 的代码。`passedValue1`

这是委托的代码：

```
LevelCompleteLevel1 
```

**。H**

```
#import "ViewController.h"
@interface LevelCompleteLevel1 : UIViewController{
IBOutlet UILabel *label;

ViewController *secondviewData;
}
@property (nonatomic, retain)ViewController*secondviewData; 
```

**.m**

```
ViewController *second = [[ViewController alloc] initWithNibName:nil bundle:nil];
self.secondviewData = second;
secondviewData.passedValue1 = label.text;
[self presentModalViewController:second animated:YES]; 
```

在`.m`我将当前标签中的一个值发送`viewcontroller`到另一个`view controller`我发送的值被称为`passedValue1`

一旦我发送了我需要显示的值并保存在我的`ViewController`

```
ViewController 
```

**。H**

```
@interface ViewController : UIViewController{

IBOutlet UILabel *label;
NSString *passedValue1;
}
@property (nonatomic, retain)NSString *passedValue1;

@end 
```

**.m**

首先我...`@synthesize passedValue1;`

然后我添加代码以接收我的值`viewDidLoad`并将我的值显示在`UILabel`

```
- (void)viewDidLoad
{ 

[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib
NSString *key=@"labelKey";

// Do any additional setup after loading the view, typically from a nib
if(passedValue1){
    NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];

    NSObject * object = [prefs objectForKey:key];
    if(object != nil){
        NSUserDefaults *defults = [NSUserDefaults standardUserDefaults];
        [defults setObject:passedValue1 forKey:key];
        [defults synchronize];
    }
    else{
        NSUserDefaults *defults = [NSUserDefaults standardUserDefaults];

        NSInteger readScore=[[[NSUserDefaults standardUserDefaults] objectForKey:key] integerValue];
        NSInteger newValue=readScore+[passedValue1 integerValue];
        [defults setObject:[NSString stringWithFormat:@"%d",newValue] forKey:key];
        [defults synchronize];
    }
}
label.text = [[NSUserDefaults standardUserDefaults]objectForKey:key]; 
```

}

一旦我显示了值，我就使用`NSUserDefault`. 但是，一旦我重玩了我的游戏并获得了另一个得分值，我想将新`passedValue1`值添加到当前保存的值中......

**例如：**

假设我玩了我的关卡，我得到了 10 的得分值。然后保存该值并重播我的关卡。然后我想获取保存的值并将其添加到我刚刚得分的值中。所以这就是说我得分的第二个值是 20。然后我希望我的代码将它们加在一起并给我一个 30 的值。

任何人都可以帮忙，因为我正在使用的代码没有正确执行我想要执行的功能，即添加上一个和当前传递的值。

提前致谢。

**使用此代码编辑** Iam：

```
 - (void)viewDidLoad
{ 

[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib
NSString *key=@"labelKey";

// Do any additional setup after loading the view, typically from a nib
if(passedValue1){
    NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];

    NSObject * object = [prefs objectForKey:key];
    if(object != nil){
        NSUserDefaults *defults = [NSUserDefaults standardUserDefaults];
        [defults setObject:passedValue1 forKey:key];
        [defults synchronize];
    }
    else{
        NSUserDefaults *defults = [NSUserDefaults standardUserDefaults];

        NSInteger readScore=[[[NSUserDefaults standardUserDefaults] objectForKey:key] integerValue];
        NSInteger newValue=readScore+[passedValue1 integerValue];
        [defults setValue:[NSString stringWithFormat:@"%d",newValue] forKey:key];
        [defults synchronize];
    }
}
     label.text = [[NSUserDefaults standardUserDefaults]objectForKey:key];
       } 
```

为什么这不起作用，标签的显示值是最初传递的Value1？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:46:06.960

一旦尝试这个，

```
 NSUserDefaults *defaults=[NSUserDefaults standardUserDefaults];
    [defaults setObject:@"10" forKey:@"old value"];
    [defaults synchronize];

    int k=[[defaults objectForKey:@"old value"] intValue]+newValue; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:39:21.327

两件事情

1.  当您添加 NSString 时，使用该`setValue: forKey:`方法就足够了。（不是你正在使用的 setObject:forKey ）

2.  `NSUserDefaults`是一种基于密钥的价值保存机制。如果您尝试将值保存在同一个键中，则保存的值将被当前保存的值替换。

因此，在您的情况下，只需使用新值调用相同的键，然后将旧值替换为新值。

# html - PHP mail() 函数在 QNAP 上不起作用

> ID：15833908
> 
> 赞同：1
> 
> 时间：2013-04-05T12:23:45.667
> 
> 标签：html, email, php, nas

我为我的公司创建了一个非常好的在线时间表。

我在我的 Mac 上启动了一个 Linux Apache 服务器，并通过访问`localhost/index.php`. 填写表格后，邮件将通过邮件“100% 有效”接收

但是，一旦上传到网络服务器，当我单击提交表单时没有任何反应。然后，我使用以下代码创建了一个简单的 PHP 测试：

```
<?php
mail('Myemailadress is entered here','Test mail','The mail function is working!');
echo 'Mail sent!';
?> 
```

即使有这么简单的代码，什么也没有发生？虽然可以在我的 Mac 上使用！

因此我在想，QNAP 509 pro nas´es 网络服务器不支持它什么的。

页面和一切都很好地显示，即使它是用 PHP 编码制作的。

整个页面运行：HTML / PHP / JavaScript

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:26:37.350

您可能需要配置 SMTP 或确保您甚至可以访问一个：使用

```
ini_set("SMTP","smtp.<whatever>.com"); 
```

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:26:37.850

**sendmail**必须安装在您的服务器中。试着检查一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T12:28:19.950

您可以尝试通过 SMTP 服务器发送，而不是从服务器发送。您可以使用 PEAR Mail Class、Zend Mail Class、PHPMailer 或类似工具来完成此操作。

# c# - 如何使用向导添加临时数据？

> ID：15833921
> 
> 赞同：0
> 
> 时间：2013-04-05T12:24:25.977
> 
> 标签：c#, asp.net, vb.net, wizard

我正在使用向导控件来捕获他们拥有的用户车辆。

第 1 阶段 - 捕获用户姓名、地址等

第 2 阶段 -**仅捕获一辆**车（一辆车由注册、型号、里程和制造商组成）

第 3 阶段 - 提供输入详细信息的摘要并在他们单击完成时保存记录。

我现在想在第 2 阶段捕获**多辆车**。

由于记录保存在第 3 阶段，我的猜测是我需要以某种方式在第 2 阶段存储每辆车（如果需要，用户可以在保存记录之前查看和编辑），然后在第 3 阶段将所有临时保存的车辆传递给我的方法保存它对用户。

我怎么能接近这个？我对我的研究的担忧是大多数可用的方法都没有显示如何临时存储每辆车？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:27:22.733

如果您正在使用 Web 应用程序，则可以使用 Session 变量来存储值，否则缓存也是有用的容器。如果您的向导是具有多个表单的单页，您还可以使用隐藏字段或 viewState。拥有一个包含您要存储的所有属性的类，并使用该类放入 Session

```
 public class MyData
     {
         public string Name;
         public string Address;
     } 
```

在向导的第一部分这样做，然后在移动到下一页之前将值填充存储在 Session 中。在下一页像这样

```
 MyData myData = (MyData]Session["myData"];
       //again update rest of the data from current page and 
       Session["myData"] = myData;
       //Go to next page 
```

# postgresql - PostgreSQL 中的公用表表达式

> ID：15833923
> 
> 赞同：0
> 
> 时间：2013-04-05T12:24:29.110
> 
> 标签：postgresql, common-table-expression

我刚刚学习 CTE，我想在 WITH 子句中创建动态查询。

以下是我编写的代码。

```
WITH name1 AS (
    SELECT schema_name as my_schema
    FROM public.schema_table
), name2 AS (
    SELECT num_rows as my_row
    FROM my_schema.row_table
)
SELECT my_row
from name2; 
```

从 WITH 中的第一个查询给出一个数据库中存在的模式数量，并且该模式名称返回

```
SELECT schema_name as my_schema 
FROM public.schema_table 
```

我想在第二个查询中使用，因为我将它保存到 my_schema。

但是当我运行这个查询时，它会给我错误，比如 my_schema 不存在，因为我想使用 my_schema 包含的值。

你怎么能那样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T12:37:08.917

首先，您似乎没有`name1`在查询中使用过任何地方，所以我怀疑您可能没有完全理解`WITH`。

但是，看起来您可能有多个表，`row_table`每个表都存在于它自己的架构中，并且想要创建一个查询，让您选择从哪个架构中获取。

```
FROM my_schema.row_table
     ^^^^^^^^^ 
```

`my_schema`不是*变量*，它是模式的*名称*。为了做你想做的事，你将不得不使用 pg_catalog 表来找到`oid`你需要的模式中的关系并以这种方式查找信息。

另一种解决方案可能是操纵搜索路径来进行出价：

```
BEGIN;
    SET LOCAL SCHEMA 'my_schema';
    SELECT num_rows FROM row_table;   -- will use my_schema.
COMMIT; 
```

# c# - VB.NET 与 C#：匿名类型和智能感知

> ID：15833925
> 
> 赞同：5
> 
> 时间：2013-04-05T12:24:29.943
> 
> 标签：c#, vb.net, intellisense, anonymous-types

怎么会在 C# 中执行此操作...

`var x = new { Name = "aaa" };`

...我可以在 上获得智能感知`.Name`，但是当我在 VB.NET 中执行此操作时...

`Dim x = New With {.Name = "aaa"}`

...我没有智能手机`.Name`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T12:42:06.203

这对我来说听起来很短暂。因为当我尝试时，

```
Dim x = New With {.Name = "aaa"} 
```

表明

![在此处输入图像描述](https://i.stack.imgur.com/wy3RA.png)

也考虑[`Option Infer Statement`](http://msdn.microsoft.com/en-us/library/bb384665.aspx)

> 允许在声明变量时使用局部类型推断。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T01:13:56.907

在这里回答我自己的问题。在 VB.NET 中，您必须使用模块级别`option infer on`。

在我找出问题后，我打算删除这个问题，但是 1）我不能，因为这个问题已经有了答案，并且 2）我相信这无论如何都会对其他人有所帮助。

快乐推理。

# xcode - AvMutableComposition 问题末尾有黑框

> ID：15833926
> 
> 赞同：5
> 
> 时间：2013-04-05T12:24:33.320
> 
> 标签：xcode, avfoundation, avcapturesession, avmutablecomposition

我在我的 iOS 应用程序中使用 AVCaptureConnection 捕获视频。之后，我在视频中添加了一些图像作为 CALayers。一切正常，但在添加图像后，我在生成的视频的最后得到一个黑框。没有实际的音频/视频帧受到影响。对于音频，我提取它并更改其音高，然后使用 AVMutableComposition 添加它。这是我正在使用的代码。请帮助我解决我做错了什么或者我需要添加其他内容。

```
cmp = [AVMutableComposition composition];

    AVMutableCompositionTrack *videoComposition = [cmp addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];
    AVMutableCompositionTrack *audioComposition = [cmp addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];
    AVAssetTrack *sourceVideoTrack = [[asset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];
    AVAssetTrack *sourceAudioTrack = [[audioAsset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0];

    [videoComposition insertTimeRange:CMTimeRangeMake(kCMTimeZero, [asset duration]) ofTrack:sourceVideoTrack atTime:kCMTimeZero error:nil] ;
    [audioComposition insertTimeRange:CMTimeRangeMake(kCMTimeZero, [asset duration]) ofTrack:sourceAudioTrack atTime:kCMTimeZero error:nil];

    animComp = [AVMutableVideoComposition videoComposition];
    animComp.renderSize = CGSizeMake(320, 320);
    animComp.frameDuration = CMTimeMake(1,30);
    animComp.animationTool = [AVVideoCompositionCoreAnimationTool videoCompositionCoreAnimationToolWithPostProcessingAsVideoLayer:videoLayer  inLayer:parentLayer];

    // to gather the audio part of the video
    NSArray *tracksToDuck = [cmp tracksWithMediaType:AVMediaTypeAudio];
    NSMutableArray *trackMixArray = [NSMutableArray array];
    for (NSInteger i = 0; i < [tracksToDuck count]; i++) {
        AVMutableAudioMixInputParameters *trackMix = [AVMutableAudioMixInputParameters audioMixInputParametersWithTrack:[tracksToDuck objectAtIndex:i]];
        [trackMix setVolume:5 atTime:kCMTimeZero];
        [trackMixArray addObject:trackMix];
    }
    audioMix = [AVMutableAudioMix audioMix];
    audioMix.inputParameters = trackMixArray;

    AVMutableVideoCompositionInstruction *instruction = [AVMutableVideoCompositionInstruction videoCompositionInstruction];
    instruction.timeRange = CMTimeRangeMake(kCMTimeZero, [asset duration]);
    AVMutableVideoCompositionLayerInstruction *layerVideoInstruction = [AVMutableVideoCompositionLayerInstruction videoCompositionLayerInstructionWithAssetTrack:videoComposition];

    [layerVideoInstruction setOpacity:1.0 atTime:kCMTimeZero];
    instruction.layerInstructions = [NSArray arrayWithObject:layerVideoInstruction] ;
    animComp.instructions = [NSArray arrayWithObject:instruction];
    [self exportMovie:self]; 
```

这是我导出视频的方法

```
-(IBAction) exportMovie:(id)sender{

    //successCheck = NO;
    NSArray *docPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *tempPath = [docPaths objectAtIndex:0];
    //NSLog(@"Temp Path: %@",tempPath);

    NSString *fileName = [NSString stringWithFormat:@"%@/Final.MP4",tempPath];
    NSFileManager *fileManager = [NSFileManager defaultManager] ;
    if([fileManager fileExistsAtPath:fileName ]){
        NSError *ferror = nil ;
        [fileManager removeItemAtPath:fileName error:&ferror];
    }

    NSURL *exportURL = [NSURL fileURLWithPath:fileName];

    AVAssetExportSession *exporter = [[AVAssetExportSession alloc] initWithAsset:cmp presetName:AVAssetExportPresetMediumQuality]  ;
    exporter.outputURL = exportURL;
    exporter.videoComposition = animComp;
    //exporter.audioMix = audioMix;
    exporter.outputFileType = AVFileTypeQuickTimeMovie;

    [exporter exportAsynchronouslyWithCompletionHandler:^(void){
        switch (exporter.status) {
            case AVAssetExportSessionStatusFailed:{
                NSLog(@"Fail");
                break;
            }
            case AVAssetExportSessionStatusCompleted:{
                NSLog(@"Success video");
                                });
                break;
            }

            default:
                break;
        }
           }];
    NSLog(@"outside");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T05:03:09.457

exportsession 有一个属性可以给出时间范围，尝试给出的时间范围比实际时间少一点（少几纳秒）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-07-15T07:16:56.023

您可以从 AVAssetTrack 获取真实的视频时长。AVAsset 的持续时间有时比 AVAssetTrack 长。

像这样检查持续时间。

```
print(asset.duration.seconds.description)
print(videoTrack.timeRange.duration.description) 
```

所以你可以改变这条线。

```
[videoComposition insertTimeRange:CMTimeRangeMake(kCMTimeZero, [asset duration]) ofTrack:sourceVideoTrack atTime:kCMTimeZero error:nil] ; 
```

喜欢这个。

```
 [videoComposition insertTimeRange:sourceVideoTrack.timeRange, ofTrack:sourceVideoTrack atTime:kCMTimeZero error:nil] ; 
```

对于迅捷5

```
videoComposition.insertTimeRange(sourceVideoTrack.timeRange, of: sourceVideoTrack, at: CMTime.zero) 
```

然后你会避免最后一个黑框:)

希望这可以帮助仍然受苦的人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-17T20:59:02.120

只是想为有我特定问题的人写这篇文章。

`AVMutableComposition`我正在拍摄视频并尝试通过拍摄并缩放音频和视频组件的时间范围来加快/减慢它`scaleTimeRange`

将时间范围缩放到 2 倍速度或 3 倍速度有时会导致视频的最后几帧变黑。幸运的是，@Khushboo 的回答也解决了我的问题。

但是，我没有将导出器的 timeRange 减少几纳秒，而是将其与组合的持续时间相同，最终完美运行。

```
exporter?.timeRange = CMTimeRangeMake(start: CMTime.zero, duration: composition.duration) 
```

希望这可以帮助！

# sql-server - SQL Server Management Studio：如何编辑 MD5 值

> ID：15833934
> 
> 赞同：1
> 
> 时间：2013-04-05T12:24:57.637
> 
> 标签：sql-server, sql-server-2008, hash, md5, sql-server-2008-express

我有 table `[user]`，在 SQL Server Management Studio 中创建，具有以下结构：

```
id int PRIMARY NOT NULL  
login varchar(255) NOT NULL  
password varchar(32) NOT NULL 
```

现在，我想将第一个用户插入数据库。右键单击表格`[user]`，选择`Edit top 200 rows`并在网格中输入新的用户值：

```
id    | login    | password
1     | admin    | MD5('admin') 
```

但保存后，插入的密码是`MD5('admin')`，但我希望`21232f297a57a5a743894a0e4a801fc3`哈希。

如何在 Microsoft SQL Server Management Studio 中做到这一点？

谢谢

PS 我正在使用 SQL Server 2008 Express 10.50.1600.1 和 Microsoft SQL Server Management Studio 10.50.1600.1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T12:38:56.927

1.  哈希值是字节数组，而不是字符串。使用 VARBINARY 列类型。
2.  不要插入未加盐密码的 MD5。[反向破解*在线*哈希到密码](http://www.tmto.org/pages/passwordtools/hashcracker/)需要2.96 秒。使用正确加盐的密码并将加盐写在表中。
3.  `Right click to table [user], choose Edit top 200 rows and type new user values into the grid`. 好吧，你期待什么？表格编辑是输入值的功能，如果您输入字符串`MD5('admin')`，那么表格中的值将是`MD5('admin')`...。它不是一个交互式函数评估器（除了 MD5 不是 SQL Server 函数......）

不要重新发明轮子，特别是如果你不会说流利的加密货币，就不要重新发明安全轮子。大多数框架都有成员管理模块。例如。[会员介绍](http://msdn.microsoft.com/en-us/library/yh26yfzy%28v=vs.100%29.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T12:40:22.520

您不能在网格表中运行查询，您必须运行查询才能进行更新。要计算 MD5，您可以使用：

```
CONVERT(VARCHAR(32), HashBytes('MD5', 'admin'), 2) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T13:32:51.153

该`Edit Top 200 Rows`功能用于*交互式*数据输入，其中只接受值，而不是需要在存储之前评估的表达式。

如果您希望插入的实际值是表达式的结果，请使用*查询*窗口来插入数据。（我不知道您是否`Edit`只是因为您想尝试该功能或出于其他原因而使用该功能，但如果那是因为您不知道如何使用 SQL 插入数据，请查看[此手册](http://msdn.microsoft.com/en-US/library/ms174335.aspx "插入 (Transact-SQL)")。）

此外，正如[@Damien 正确指出](https://stackoverflow.com/questions/15833934/sql-server-management-studio-how-to-edit-md5-value#comment22527245_15833934)的那样，Transact-SQL 中没有任何`MD5`功能。有一种叫做[`HASHBYTES`](http://msdn.microsoft.com/en-us/library/ms174415.aspx "哈希字节 (Transact-SQL)")，它可以使用各种散列算法，包括 MD5。但是这个函数的结果是`varbinary`，不是`varchar`。具体来说，对于 MD5，它是`varbinary(16)`. 因此，要存储 的直接结果`HASHBYTES`，您需要相应地更改`password`列的类型。

因此，更改列的类型，然后打开一个新的查询窗口并输入*命令*（或*语句*）来插入数据。应该为您完成这项工作的那个可能看起来像这样：

```
INSERT INTO user (id, login, password)
VALUES (1, 'admin', HASHBYTES('MD5', 'admin')); 
```

公平地说，您*可以*省略更改列类型，在这种情况下，您需要将`HASHBYTES`上面的简单调用替换为[@Garath 的答案](https://stackoverflow.com/a/15834255/297408)中的调用。不过，您是否真的*需要*将散列存储为 in`varchar(32)`而不是`varbinary(16)`完全不同的问题。

# web-services - Spring bean 作为 Web 服务

> ID：15833941
> 
> 赞同：0
> 
> 时间：2013-04-05T12:25:29.047
> 
> 标签：web-services, spring, cxf, axis2, spring-ws

我是 Web 服务的新手。我有一个spring bean，我在其中使用了事务注释进行数据库操作。现在我需要将 bean 中的一种方法公开为服务。方法参数是 Hashmap 和一个 POJO（如 JPA 实体）对象。返回类型是HashMap。

实现它的最佳方法是什么。

1.  使用 Axis2 直接暴露 bean。
2.  使用带有 CXF 的 Spring-Ws。
3.  在接受字符串作为参数的新包装类中编写新方法。（这些字符串实际上是原始 Map 和 POJO 所要求的）。并按照原始方法的要求，将这些字符串分别设置为 POJO 和 Map 中的属性和对象。

4.  第三种方法在我的情况下不起作用，因为 Map 将包含几个需要存储在 DB 中的数组列表。所以我只能使用 Map。

我应该使用 SOAP 还是 REST。在我们的项目中，老团队已经使用 Axis2 提供了两个 Web 服务。我们使用的是 spring 3（作为核心容器并用于 ORM）、Hibernate 模板、Tomcat 6。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:11:23.817

嗯，这个问题最好自己回答。我们只能在这里给出提示，哪种框架和技术最适合您。为了提供任何提示，我们需要有关您的项目的更多信息。

例如，SOAP 和 REST 是两种本质上不同的技术。SOAP 协议必须使用 XML 作为信息介质，并且可以使用任何传输介质，例如 HTTP、E-Mail、JMS 等。使用 SOAP，服务端点和客户端之间的契约（即 WSDL 规范）是接口描述。REST 协议可以使用任何信息介质，例如 JSON、XML、YAML 等，但仅限于 HTTP 协议作为传输介质。这里，DELETE、GET、POST 等 HTTP 方法是接口描述。

您说，您实际上是在使用 AXIS2。如果您对该框架的经验足够好，我建议您进一步使用它。CXF 只是另一个 Web 服务框架，**不能**与 Spring-WS 一起使用（但它可以与 Spring 框架一起使用）。在这里，我认为每个框架都有其注意事项，需要一些时间来学习。

# .net - System.Net.Mail.SmtpException：SMTP 服务器需要安全连接或客户端未在 Azure 上进行身份验证

> ID：15833942
> 
> 赞同：1
> 
> 时间：2013-04-05T12:25:32.867
> 
> 标签：.net, azure, smtp, gmail

我在 Windows azure 应用程序上有一个 smtp 客户端，该客户端在模拟器上运行良好，但在云实例上引发异常。

异常消息是：

`The SMTP server requires a secure connection or the client was not authenticated The server's response was 5.5.1 authentication required`

我通过在命令行中打印它们来确保云上的凭据是正确的，我还禁用了防火墙。

PS：我正在使用 gmail smtp 服务器。

这是我的代码：

```
 private void SetupClient()
    {
        _emailSetting = new EmailSetting();
        _smtpClient = new SmtpClient(_emailSetting.SMTP_Server, _emailSetting.Port);
        _smtpClient.EnableSsl = true;
        _smtpClient.DeliveryMethod = SmtpDeliveryMethod.Network;
        _smtpClient.Credentials = new NetworkCredential(_emailSetting.EmailUser, _emailSetting.EmailPass);
    }

    public void Report(String msg)
    {
        MailMessage mailMessage;

        if (_smtpClient == null)
        {
            SetupClient();
        }

        String receivers = String.Join(",", Receivers);
        mailMessage = new MailMessage(_emailSetting.EmailUser, receivers, "Error", msg);
        _smtpClient.Send(mailMessage);

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:30:58.940

我类似的问题。解决方案非常“奇怪”，gmail 阻止了我从 azure 发送的电子邮件，因为您的应用正在尝试从“奇怪”位置登录。尝试检查您是否在 gmail 中收到通知/电子邮件，其中包含有关阻止登录的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-22T20:00:17.860

解决此问题的一种方法是将 RDP 安装到您的 Azure VM 上，然后从那里登录到您的 Gmail 帐户。谷歌会要求您确认您的帐户，因为它是一个“奇怪”的位置。一旦验证您的电子邮件将正常工作。

# mpi - MPI 在 MPI_Send 上挂起大型消息

> ID：15833947
> 
> 赞同：8
> 
> 时间：2013-04-05T12:25:46.247
> 
> 标签：mpi

在 c++/mpi (mpich2) 中有一个简单的程序，它发送一个 double 类型的数组。如果数组的大小超过 9000，那么在调用 MPI_Send 期间我的程序会挂起。如果数组小于 9000（例如 8000）程序可以正常工作。源代码如下：

主文件

```
using namespace std;

Cube** cubes;
int cubesLen;

double* InitVector(int N) {
   double* x = new double[N];
   for (int i = 0; i < N; i++) {
       x[i] = i + 1;
   }
   return x;
}

void CreateCubes() {
    cubes = new Cube*[12];
    cubesLen = 12;
    for (int i = 0; i < 12; i++) {
       cubes[i] = new Cube(9000);
    }
}

void SendSimpleData(int size, int rank) {
    Cube* cube = cubes[0];
    int nodeDest = rank + 1;
    if (nodeDest > size - 1) {
        nodeDest = 1;
    }

    double* coefImOut = (double *) malloc(sizeof (double)*cube->coefficentsImLength);
    cout << "Before send" << endl;
    int count = cube->coefficentsImLength;
    MPI_Send(coefImOut, count, MPI_DOUBLE, nodeDest, 0, MPI_COMM_WORLD);
    cout << "After send" << endl;
    free(coefImOut);

    MPI_Status status;
    double *coefIm = (double *) malloc(sizeof(double)*count);

    int nodeFrom = rank - 1;
    if (nodeFrom < 1) {
        nodeFrom = size - 1;
    }

    MPI_Recv(coefIm, count, MPI_DOUBLE, nodeFrom, 0, MPI_COMM_WORLD, &status);
    free(coefIm);
}

int main(int argc, char *argv[]) {
    int size, rank;
    const int root = 0;

    MPI_Init(&argc, &argv);
    MPI_Comm_size(MPI_COMM_WORLD, &size);
    MPI_Comm_rank(MPI_COMM_WORLD, &rank);

    CreateCubes();

    if (rank != root) {
         SendSimpleData(size, rank);
    }

    MPI_Finalize();
    return 0;
} 
```

类立方体

```
 class Cube {
 public:
    Cube(int size);
    Cube(const Cube& orig);
    virtual ~Cube();

    int Id() { return id; } 
    void Id(int id) { this->id = id; }

    int coefficentsImLength;
    double* coefficentsIm;

private:
    int id;
};

Cube::Cube(int size) {
    this->coefficentsImLength = size;

    coefficentsIm = new double[size];
    for (int i = 0; i < size; i++) {
        coefficentsIm[i] = 1;
    }
}

Cube::Cube(const Cube& orig) {
}

Cube::~Cube() {
    delete[] coefficentsIm;
} 
```

该程序在 4 个进程上运行：

```
mpiexec -n 4 ./myApp1 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-05T15:22:10.847

Cube 类的细节在这里不相关：考虑一个更简单的版本

```
#include <mpi.h>
#include <cstdlib>

using namespace std;

int main(int argc, char *argv[]) {
    int size, rank;
    const int root = 0;

    int datasize = atoi(argv[1]);

    MPI_Init(&argc, &argv);
    MPI_Comm_size(MPI_COMM_WORLD, &size);
    MPI_Comm_rank(MPI_COMM_WORLD, &rank);

    if (rank != root) {
        int nodeDest = rank + 1;
        if (nodeDest > size - 1) {
            nodeDest = 1;
        }
        int nodeFrom = rank - 1;
        if (nodeFrom < 1) {
            nodeFrom = size - 1;
        }

        MPI_Status status;
        int *data = new int[datasize];
        for (int i=0; i<datasize; i++)
            data[i] = rank;

        cout << "Before send" << endl;
        MPI_Send(&data, datasize, MPI_INT, nodeDest, 0, MPI_COMM_WORLD);
        cout << "After send" << endl;
        MPI_Recv(&data, datasize, MPI_INT, nodeFrom, 0, MPI_COMM_WORLD, &status);

        delete [] data;

    }

    MPI_Finalize();
    return 0;
} 
```

跑步的地方

```
$ mpirun -np 4 ./send 1
Before send
After send
Before send
After send
Before send
After send
$ mpirun -np 4 ./send 65000
Before send
Before send
Before send 
```

如果在 DDT 中查看消息队列窗口，您会看到每个人都在发送，没有人在接收，并且您遇到了典型的[死锁](http://cs.ucsb.edu/~hnielsen/cs140/mpi-deadlocks.html)。

`MPI_Send`奇怪的是，它的语义没有很好地定义，但它被允许阻塞，直到“接收已发布”。 `MPI_Ssend`在这方面更清楚；它会一直阻塞，直到接收已发布。有关不同发送模式的详细信息，请参见[此处](http://www.mcs.anl.gov/research/projects/mpi/sendmode.html)。

它适用于较小消息的原因是实施的意外；对于“足够小”的消息（对于您的情况，它看起来小于 64kB），您的 MPI_Send 实现使用“急切发送”协议并且不会阻塞接收；对于较大的消息，仅仅将消息的缓冲副本保留在内存中并不一定安全，Send 等待匹配的接收（无论如何它总是允许这样做）。

您可以采取一些措施来避免这种情况；您所要做的就是确保不是每个人都在同时调用阻塞 MPI_Send。你可以（比如说）让偶数处理器先发送，然后接收，奇数处理器先接收，然后发送。您可以使用非阻塞通信（Isend/Irecv/Waital）。但在这种情况下，最简单的解决方案是使用`MPI_Sendrecv`，这是一个阻塞（发送 + 接收），而不是阻塞发送加阻塞接收。发送和接收将同时执行，并且该函数将阻塞，直到两者都完成。所以这行得通

```
#include <mpi.h>
#include <cstdlib>

using namespace std;

int main(int argc, char *argv[]) {
    int size, rank;
    const int root = 0;

    int datasize = atoi(argv[1]);

    MPI_Init(&argc, &argv);
    MPI_Comm_size(MPI_COMM_WORLD, &size);
    MPI_Comm_rank(MPI_COMM_WORLD, &rank);

    if (rank != root) {
        int nodeDest = rank + 1;
        if (nodeDest > size - 1) {
            nodeDest = 1;
        }
        int nodeFrom = rank - 1;
        if (nodeFrom < 1) {
            nodeFrom = size - 1;
        }

        MPI_Status status;
        int *outdata = new int[datasize];
        int *indata  = new int[datasize];
        for (int i=0; i<datasize; i++)
            outdata[i] = rank;

        cout << "Before sendrecv" << endl;
        MPI_Sendrecv(outdata, datasize, MPI_INT, nodeDest, 0,
                     indata, datasize, MPI_INT, nodeFrom, 0, MPI_COMM_WORLD, &status);
        cout << "After sendrecv" << endl;

        delete [] outdata;
        delete [] indata;
    }

    MPI_Finalize();
    return 0;
} 
```

运行给

```
$ mpirun -np 4 ./send 65000
Before sendrecv
Before sendrecv
Before sendrecv
After sendrecv
After sendrecv
After sendrecv 
```

# java - 数组列表更新到数据库

> ID：15833948
> 
> 赞同：0
> 
> 时间：2013-04-05T12:25:49.433
> 
> 标签：java, jdbc, arraylist, struts

我正在尝试使用数组列表中的值更新我的数据库。以下是我正在尝试的代码。

```
String query = "insert into login values(? , ?)";
        Connection conn = null;
        PreparedStatement statement = null;
        ResultSet resultSet = null;

        try {
            conn = getConnection();
            for(int i = 0;i < rowlength; i++)
            {
                System.out.println(rowList.get(i));
            statement = conn.prepareStatement(query);
            statement.setInt(1, rowList.get(i));
            statement.setString(2, rowsList.get(i+2));
            resultSet = statement.executeQuery();
            }
        } 

        catch (SQLException e) {
            try {
                throw new ServletException("DB interaction failed", e);
            } catch (ServletException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            if (resultSet != null) try { resultSet.close(); } catch (SQLException ignore) {}
            if (statement != null) try { statement.close(); } catch (SQLException ignore) {}
            if (conn != null) try { conn.close(); } catch (SQLException ignore) {}
                } 
```

它在控制台中为所有循环值获取以下错误。

```
java.lang.ClassNotFoundException: org.postgresql.Driver
at org.apache.catalina.loader.WebappClassLoader.loadClass    (WebappClassLoader.java:1358)
at org.apache.catalina.loader.WebappClassLoader.loadClass   (WebappClassLoader.java:1204)
at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:169)
at com.aipl.struts.action.ExcelDbAction.getConnection(ExcelDbAction.java:60)
at com.aipl.struts.action.ExcelDbAction.execute(ExcelDbAction.java:126)
at org.apache.struts.chain.commands.servlet.ExecuteAction.execute(ExecuteAction.java:58)
at org.apache.struts.chain.commands.AbstractExecuteAction.execute(AbstractExecuteAction.java:67)
at org.apache.struts.chain.commands.ActionCommandBase.execute(ActionCommandBase.java:51)
at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:190)
at org.apache.commons.chain.generic.LookupCommand.execute(LookupCommand.java:304)
at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:190)
at org.apache.struts.chain.ComposableRequestProcessor.process(ComposableRequestProcessor.java:283)
at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)
at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:462)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:710)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:230)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:104)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:261)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:581)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
at java.lang.Thread.run(Thread.java:619) 
```

任何人都可以指导我做错了什么，或者他们是更新数据库中表的另一种方式。

谢谢////

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T12:28:07.447

您做错的是 PostgreSQL 数据库驱动程序不在应用程序的类路径中。根据堆栈跟踪，我猜您正在使用 Tomcat；因此，请查看[The PostgreSQL JDBC Interface](http://jdbc.postgresql.org/documentation/head/tomcat.html)文档以了解应将其放置在何处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T12:28:32.157

当 jvm 在其`classpath`. 确保您已正确配置类路径

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T12:34:03.070

您需要加载数据库驱动程序。例如对于 SQL Server `Connection connection = DriverManager.getConnection(connectionUrl); Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");`

此外，您可以使用 Java 的 try-with 资源（Oracle 链接：[http](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html) ://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html ）功能，而不是在 finally 块中关闭资源。

# bing-api - 必应搜索 API - 您提供的授权类型不受支持(ios)

> ID：15833954
> 
> 赞同：1
> 
> 时间：2013-04-05T12:26:09.910
> 
> 标签：bing-api

我正在使用 Windows Azure Marketplace 上提供的 Bing Search API。

`Subscription Type: Bing Search API (5000 transactions per month free).`

我已获得帐户密钥。

我仍然得到回应

```
**The authorization type you provided is not supported.Only Basic and OAuth are supported** 
```

当我在浏览器中复制 url 时，它会询问用户名和密码（只有密码是强制性的，它只是帐户密钥），验证后我可以看到 XML/JSON 格式的数据。

我如何通过我的程序实现这一目标？

我的代码是：

```
NSString *urlString = [NSString stringWithFormat:@"%s","https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?$format=json&$top=8&Query='querystring'"];  
NSURL *url = [NSURL URLWithString:urlString];
NSData *data = [NSData dataWithContentsOfURL:url];

NSLog(@"%@",[[NSString alloc]initWithData:data encoding:NSUTF8StringEncoding]) ;
NSURLRequest *request = [NSURLRequest requestWithURL:url] ;

NSURLConnection *connection = [NSURLConnection connectionWithRequest:request delegate:self];
[connection start] ; 
```

# python - 如何删除所有其他键但在字典中保留 1 个键

> ID：15833955
> 
> 赞同：2
> 
> 时间：2013-04-05T12:26:11.863
> 
> 标签：python, dictionary, python-2.7, key

我有一本这样的字典：

```
family = {'mother':'Alice', 'father': 'Richard', 'son': 'Toni'} 
```

如何删除其他键但保留“儿子”键？

对不起，我的意思是如何删除所有其他键，但在字典中保留 1 个键

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T12:27:46.990

为什么不只是：

```
son_value = family['son']
family.clear()
family['son'] = son_value 
```

或遍历您的密钥：

```
for k in family:
    if k != 'son':
        del family[k] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T12:27:52.760

没有*最后一个*键这样的东西，因为[字典没有排序](http://docs.python.org/2/tutorial/datastructures.html#dictionaries)。

如果您只需要带有 item 的子词典`'son'`，您可以使用：

```
>>> family = {'mother':'Alice', 'father': 'Richard', 'son': 'Toni'}
>>> subdictionary = {'son': family['son']} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T12:29:13.060

```
family = {'mother':'Alice', 'father': 'Richard', 'son': 'Toni'}
family = {'son': family['son']} 
```

# linq - Linq 到动态列和动态分组字段上的数据集

> ID：15833956
> 
> 赞同：1
> 
> 时间：2013-04-05T12:26:14.990
> 
> 标签：linq

我的函数有四个参数，一个数据集，一个由表达式组成的数组（聚合函数），一个由应用表达式的列名组成的数组，一个由我必须分组的列组成的数组。

我的问题是如何处理表达式和分组依据的动态列或字段，因为它的数量可能会有所不同（取决于数组值）。

我已经为静态查询编写了代码，但需要一种通用的方式......

这是我的代码：

```
public void ExpressionManipulation(DataSet dsExprEvaluate, string[] strExpressions, string[] colName, string[] groupbyFields)
{
        int groupByLength = groupbyFields.Length;

        var groupByQueryEvaluate = from table in dsExprEvaluate.AsEnumerable()
                          group table by new { column1 = table["DataSourceType"], column2 = table["Polarity"] }
                              into groupedTable
                              select new
                              {
                                  x = groupedTable.Key,  // Each Key contains column1 and column2
                                  y = groupedTable.Count(),
                                  //z = groupedTable.Max(column1),
                                  z = groupedTable.Sum(table => Convert.ToInt32(table["Polarity"]))
                              };
} 
```

就像上面一样，我现在可以有 n 个字段分组，现在我只取了两个（DataSourceType 和 Polarity），类似的我可以有 n 个字段用于表达式，对于 sum、count 等，它们将作为一个数组作为范围。

请帮我解决这个问题，这让我发疯。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:51:31.497

我自己想通了，我最终得到的解决方案是：

```
var objGroupSumCountkey = dt.AsEnumerable()
                            .AsQueryable()
                            .GroupBy("new ( it[\"DataSourceType\"] as GroupByColumnName1,it[\"Polarity\"] as GroupByColumnName2)", "it")
                            .Select("new ( Sum(Convert.ToDouble(it[\"Polarity\"].ToString())) as SumValue,Count() as TotalCount,it.key)"); 
```

在上面的查询中，所有参数都将作为字符串提供，在 Group By 和 select

# entity-framework - MVC 4 使用数据注释进行手动验证

> ID：15833965
> 
> 赞同：0
> 
> 时间：2013-04-05T12:26:42.960
> 
> 标签：entity-framework, asp.net-mvc-4, data-annotations

我承认我发现了许多类似的问题，但不完全是这个:)
我有具有数据注释属性的实体：

```
 public class BaseEntity
  {
    [Required, DataType(DataType.DateTime)]
    public DateTime CreatedAt { get; set; }
    public string CreatedBy { get; set; }
  }
  public class ExchangeRights : BaseEntity
  {
    [Key, DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int Id { get; set; }
    [Required, DataType(DataType.EmailAddress)]
    public string Email { get; set; }
  } 
```

我尝试验证一个空对象：

```
 ExchangeRights r = new ExchangeRights();
  ValidationContext vCtx = new ValidationContext(r);
  List<ValidationResult> res = new List<ValidationResult>();
  Validator.TryValidateObject(r, vCtx, res, true); 
```

这只是结果一个错误。电子邮件字段是必需的。但不表示没有电子邮件格式，也不表示未设置 CreatedAt 字段（好吧，也许是因为不可为空的值类型）
但这里是转折点。
首先，我真的希望每个错误都应该表明它是空的，它不是电子邮件格式。
但更大的问题是，如果我将电子邮件设置为“asd”，则该方法不会返回任何错误。
但是，如果我在创建页面上将此实体与强类型视图（使用带有 Razor 的 MVC4）一起使用，那就很奇怪了。
该表格表明电子邮件是必需的，或者如果我设置的不是有效的电子邮件地址格式。还表示 CreatedAt 字段是必需的（**带或不带Required 属性！！**) 如果我设置它，它会说无效的日期时间格式。

任何帮助/想法/预感将不胜感激。

谢谢，
彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:53:47.573

对于电子邮件的验证，您应该使用[EmailAddress](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.emailaddressattribute%28v=vs.110%29.aspx)验证属性。`[EmailAddress]`.

对于 CreatedAt，由于 DateTime 是不可为空的类型，因此当您创建 ExchangeRights 实例时，属性 CreatedAt 将填充 DateTime.MinValue。所以这个属性是有价值的。如果您想要不同的行为，请使用 DateTime? 而不是日期时间。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:03:43.003

您可以出于以下原因使用 DataTypeAttribute 属性：为数据字段提供附加类型信息，将自定义字段模板与数据字段相关联。DataTypeAttribute 不用于验证，它可用于提供一些额外的元数据信息。要验证电子邮件，您可以使用 DataAnnotations Extensions EmailAttribute 或编写您自己的验证属性。

[您可以在http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.datatypeattribute.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.datatypeattribute.aspx)中找到更多信息

# maven - 如何使用 maven-jar-plugin 安装默认 jar 文件

> ID：15833970
> 
> 赞同：1
> 
> 时间：2013-04-05T12:26:52.463
> 
> 标签：maven

给定一个带有 <packaging>something-not-jar</packaging> 的项目，如何：

1.  告诉 maven-jar-plugin 生成“普通”jar 文件并告诉 maven-install-plugin 获取该普通 jar 文件并
2.  将其安装到本地存储库（除了生成的 something-not-jar 工件）

如果我告诉 jar 插件生成一个 test-jar，那么它会这样做并且安装插件会将 xxx-0.0.1-SNAPSHOT-tests.jar 安装到本地 repo。但是“jar”目标显然不会导致生成的 jar 文件安装在本地 repo 中，即使 jar 文件是在目标文件夹中创建的。

那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:15:02.533

您只需执行以下操作：

```
mvn install 
```

# r - 在R中顺序重组一个向量

> ID：15833971
> 
> 赞同：3
> 
> 时间：2013-04-05T12:26:55.820
> 
> 标签：r, sorting, vector

我有一个数字元素`z`如下：

```
> sort(z)
  [1]  1  5  5  5  6  6  7  7  7  7  7  9  9 
```

我想按顺序重新组织这个元素，以便拥有

```
> z
  [1]  1  2  2  2  3  3  4  4  4  4  4  5  5 
```

我猜想将 z 转换为一个因子并将其用作索引应该是这种方式。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T12:34:56.237

你自己真的回答了：

```
as.integer(factor(sort(z))) 
```

* * *

我知道这已经被接受了，但我决定进去`factor()`看看它是如何在那里完成的。它或多或少归结为：

```
x <- sort(z)
match(x, unique(x)) 
```

我想这是一条额外的线，但如果这很重要，它应该会更快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T12:32:57.923

这应该可以解决问题

```
z = sort(sample(1:10, 100, replace = TRUE))
cumsum(diff(z)) + 1
 [1]  1  1  1  1  1  2  2  2  2  2  2  2  2  2  2  2  2  3  3  3  3  3  3  3  3
[26]  3  3  4  4  4  4  4  4  4  4  5  5  5  5  5  5  5  5  5  5  5  6  6  6  6
[51]  6  6  6  6  6  7  7  7  7  7  7  7  7  7  7  7  8  8  8  8  8  8  8  8  8
[76]  8  8  8  8  8  9  9  9  9  9  9  9  9  9  9  9  9  9  9 10 10 10 10 10 
```

请注意，`diff`省略了系列的第一个元素。所以要补偿：

```
c(1, cumsum(diff(z)) + 1) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T12:35:13.560

替代使用`rle`：

```
z = sort(sample(1:10, 100, replace = TRUE))
rle_result = rle(sort(z))
rep(rle_result$values, rle_result$lengths)

> rep(rle_result$values, rle_result$lengths)
  [1]  1  1  1  1  1  1  2  2  2  2  2  2  2  2  2  2  2  2  3  3  3  3  3  3  3
 [26]  3  3  3  4  4  4  4  4  4  4  4  5  5  5  5  5  5  5  5  5  5  5  6  6  6
 [51]  6  6  6  6  6  6  7  7  7  7  7  7  7  7  7  7  7  8  8  8  8  8  8  8  8
 [76]  8  8  8  8  8  8  9  9  9  9  9  9  9  9  9  9  9  9  9  9 10 10 10 10 10 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T13:24:33.007

```
rep(seq_along(rle(x)$l), rle(x)$l) 
```

# java - 插入多个日期时出现 java.sql.SQLException

> ID：15833977
> 
> 赞同：-1
> 
> 时间：2013-04-05T12:27:19.957
> 
> 标签：java, mysql, sql, sql-insert

当我尝试向表中插入多个日期值时出现错误，但当我尝试使用一个日期值时它成功执行。

使用超过 2 个日期值时出现的错误是：

```
java.sql.SQLException: [MySQL][ODBC 5.1 Driver][mysqld-5.5.15]You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'From) values(100,1,_binary'2011-09-17',_binary'2011-09-18')' at line 1 
at sun.jdbc.odbc.JdbcOdbc.createSQLException(Unknown Source) 
at sun.jdbc.odbc.JdbcOdbc.standardError(Unknown Source) 
at sun.jdbc.odbc.JdbcOdbc.SQLExecute(Unknown Source) 
at sun.jdbc.odbc.JdbcOdbcPreparedStatement.execute(Unknown Source) 
at sun.jdbc.odbc.JdbcOdbcPreparedStatement.executeUpdate(Unknown Source) 
at SampleProg.InsertDate(SampleProg.java:37) 
at SampleProg.main(SampleProg.java:65) 
```

我的源代码是：

```
import java.text.DateFormat; 
import java.text.ParseException; 
import java.text.SimpleDateFormat; 
import java.util.Date; 
import java.io.IOException; 
import java.sql.*; 

public class SampleProg { 
public void InsertDate(int ref,int id,Date d1,Date d2) 
{   
Connection con=null; 
PreparedStatement ps=null; 
String query=null; 
java.sql.Date dd1=null,dd2=null; 

try 
{ 

query="insert into new_table (Ref_No,Emp_Id,Doapp,From) values(?,?,?,?)"; 
Class.forName("sun.jdbc.odbc.JdbcOdbcDriver"); 
con=DriverManager.getConnection("jdbc:odbc:date","root","1234"); 
ps=con.prepareStatement(query); 

ps.setInt(1, ref); 
ps.setInt(2,id); 
ps.setDate(3,new java.sql.Date(d1.getTime()) ); 
ps.setDate(4, new java.sql.Date(d2.getTime())); 
int i=ps.executeUpdate(); 

} 
catch(Exception e) 
{ 
e.printStackTrace(); 
} 
} 
public static void main(String args[]) 
{ 
Date d1=null; 
Date d2=null; 

int ref=100; 
int empid=1; 
String date1="2011-09-17"; 
String date2="2011-09-18"; 

SimpleDateFormat sdf=new SimpleDateFormat("yyyy-MM-dd"); 
try { 
d1=sdf.parse(s1); 
d2=sdf.parse(s2); 

} catch (ParseException e) { 

e.printStackTrace(); 
} 
SampleProg dd=new SampleProg(); 
dd.InsertDate(ref,empid,d1,d2); 
} 

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T12:29:59.417

`FROM`是*MySQL 的保留关键字*。它必须被转义才能使用。

```
INSERT INTO new_table(Ref_No,Emp_Id,Doapp,`From`) VALUES (?,?,?,?) 
```

*   [MySQL 保留关键字列表](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

如果您有时间更改表，请更改列名以避免将来出现问题。

# java - Java Jackson：反序列化复杂的多态对象模型：JsonMappingException：意外的令牌（START_OBJECT），预期的VALUE_STRING

> ID：15833979
> 
> 赞同：4
> 
> 时间：2013-04-05T12:27:24.310
> 
> 标签：java, javascript, json, exception, jackson

我有这棵对象树

一个

B 扩展 A

C 扩展 B

D 扩展 B

E 扩展 C

F 扩展了 A 并且有一个对 A 的引用

A 有以下注解

`@JsonTypeInfo(use=JsonTypeInfo.Id.CLASS,include=JsonTypeInfo.As.PROPERTY,property="@class")`

如果我尝试反序列化扩展 A 的 JSON 对象数组，则会引发以下错误

> org.codehaus.jackson.map.JsonMappingException：意外令牌（START_OBJECT），预期VALUE_STRING：需要包含类型id的JSON字符串（对于java.util.Collection的子类型）

json 字符串由集合的 toString() 方法生成，集合是类型 A 的参数，其中 A 在 JSON 中序列化，代码如下：

```
ObjectMapper objectMapper=new ObjectMapper();
        objectMapper.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_CONCRETE_AND_ARRAYS);
        String res="";
        try {
            res = objectMapper.writerWithDefaultPrettyPrinter().writeValueAsString(t);
        } catch (JsonGenerationException e) {
            e.printStackTrace();
        } catch (JsonMappingException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return res; 
```

反序列化 json 数组（即上面描述的集合）的代码是：

```
ObjectMapper mapper = new ObjectMapper(); 

        mapper.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_CONCRETE_AND_ARRAYS);
        Collection<T> results=null;
        try {
            results =  mapper.readValue(json, TypeFactory.defaultInstance().constructParametricType(Collection.class, clazz ) );
        } catch (JsonParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (JsonMappingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }  
        return results; 
```

它解析的 json 示例如下：

```
"[{
  "@class" : "pack1.pack2.MyClass",
  "id" : null,
  "f1" : "",
  "f2" : 0.9933817827,
  "f3" : 6.883261E-4,
  "f4" : 0.001375699,
  "f5" : {
    "@class" : "pack1.pack2.MyClass2",
    "id" : null,
    "f1" : "",
    "f2" : 0.0,
    "f3" : 0.0,
    "f4" : 0.0,
    "f5" : [ "java.util.HashSet", [ 0 ] ],
    "f6" : [ "java.util.HashSet", [ 2 ] ],
    "f7" : [ "java.util.ArrayList", [ "scelta", "brani", "buona" ] ],
    "f8" : [ null, "NOM", null ],
    "f9" : false
  },
  "f10" : [ "java.util.HashMap", {
    "2" : "ADJ"
  } ],
  "f11" : [ "java.util.HashSet", [ 0 ] ],
  "f12" : [ "java.util.HashSet", [ 2 ] ],
  "f13" : [ "java.util.ArrayList", [ "scelta", "brani", "buona" ] ],
  "featureIndicator" : false
}]" 
```

这里的 json 字符串只包含我的 java Set 示例中的一些对象

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T15:36:41.257

我相信问题出在默认类型上。JSON 的开头不是 Jackson 所期望的默认类型。JSON 的开头应该是：

```
["java.util.HashSet", [{ 
```

最后应该有一个额外的右括号`}]]`。

那是因为您使用`toString()`集合的方法生成 JSON。您应该改用`ObjectMapper`, 配置为默认类型，如下所示：

```
res = objectMapper.writerWithDefaultPrettyPrinter().writeValueAsString(yourSet); 
```

# javascript - Javascript： if (x < y) 有效， if(x<=y) 无效。

> ID：15833984
> 
> 赞同：-1
> 
> 时间：2013-04-05T12:27:41.633
> 
> 标签：javascript, operators, equals

if (x < y) 有效， if(x<=y) 在 Javascript 中无效。在前一种情况下，评估 if 语句，在后一种情况下，忽略 if 语句。

这是代码：

```
var totalFrames = 12; 
```

这里的 showvalue 函数从 HTML 接收它的值：

```
<input type="range" min="2" max="36" step="2" value="2" name="totalFrames" 
      onChange="showValue(this.value);" width: 80%" value="2"/>
<p>Total Frames: <span id="totalFrames">2</span> 

function showValue(newValue) {
         document.getElementById("totalFrames").innerHTML = parseFloat(newValue);
         totalFrames = parseInt(newValue);
         var winkel = 360.0/totalFrames;
         document.getElementById("angle").innerHTML = winkel.toFixed(1);
         var maxFrame = document.getElementsByName("actFrame")[0];
         maxFrame.max = parseInt(newValue);
}

function motorCommunication() { 
      actFrame = document.getElementById("actFrame").value;
      actualFrame = parseInt(document.getElementById("actFrame").value);
      document.getElementById("range").innerHTML = actFrame; 
```

/* 这条线可以工作 -- if 语句不会被忽略*/

```
if ( Number(actualFrame) < Number(totalFrames) ) { 
```

/* 这条线不起作用 -- if 语句被忽略*/

```
if ( Number(actualFrame) <= Number(totalFrames) ) {

     var url = "/cgi-bin/bn_events.py?actualFrame=" + escape(actualFrame) 
         + "&totalFrames=" + escape(totalFrames) 
         + "&seconds=" + escape(seconds);
     request.open("GET", url, true);
     request.onreadystatechange = updatePage;
     request.send(null);
     actualFrame++;
  }
  else {
       document.getElementById("returnedStatus").value = "DONE.";
  }
}

function updatePage() {
  if (request.readyState == 4) {
    if (request.status == 200) {
      /* Get the response from the server */
      var motorResponse = request.responseText;
      motorData = new Array();
      //motorData = request.responseText;
      motorData = motorResponse.substring(0,motorResponse.length-1).split(",");
      /* Update the HTML web form */
      document.getElementById("returnedFrame").value = motorData[0];
      document.getElementById("returnedTotalFrames").value = motorData[1]
      document.getElementById("returnedStatus").value = motorData[2];
      document.getElementById("actFrame").value = parseInt(actualFrame);
      document.getElementById("actualStatus").value = parseInt(actualFrame);     
      setTimeout(motorCommunication(),300);
      } else {
      alert("Error! Request status is " + request.status);
      }
    }
} 
```

我发现，如果我使用

```
if ( Number(actualFrame) <= 12 ) { 
```

它完美地工作....

现在无能为力...感谢任何评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:48:52.663

搞定了...与 str 到 Int 或类似的无关... if 语句的位置错误。所以一些变量被搞砸了。

```
function motorCommunication() {
         /* NEEDS TO BE HERE... */
         if ( actualFrame <= lastFrame * 1.0 ) {
         actFrame = document.getElementById("actFrame").value;
         actualFrame = parseInt(document.getElementById("actFrame").value);
         document.getElementById("range").innerHTML = actFrame * 1.0;  
         //lastFrame = parseInt(document.getElementsByName("totalFrames")[0].value); 
         document.getElementById("returnedTotalFrames").value = lastFrame * 1.0;
         //WRONG HERE: if ( actualFrame <= lastFrame * 1.0 ) {
            var url = "/cgi-bin/bn_events.py?actualFrame=" + escape(actualFrame) 
            + "&totalFrames=" + escape(lastFrame) 
            + "&seconds=" + escape(seconds);
            //var url = "/cgi-bin/bn_events.py?actualFrame=" + escape(actFrame);
            request.open("GET", url, true);
            request.onreadystatechange = updatePage;
            request.send(null);
            actualFrame++;
            } else {
            document.getElementById("returnedStatus").value = "DONE.";
         }
} 
```

现在效果更好。独立于浏览器...

感谢你的帮助。彼得

# gwt - 托管模式下的 GWT sinkEvents

> ID：15833985
> 
> 赞同：0
> 
> 时间：2013-04-05T12:27:42.227
> 
> 标签：gwt, gwt-celltable

我扩展了一个gwt celltable 来创建一个自定义的celltable，我注册了sinkevents，即onmouseover/onmouseout。当您将鼠标悬停在表格的行上时，行数据将填充在悬停 wiget（自定义悬停弹出面板）上。它的工作原理与它在开发模式下所做的一样，但是一旦部署在 tomcat 上，当您将鼠标移到 celltable 上的不同行上时，它不会更新弹出面板上的悬停数据，除非您单击远离表格（松散焦点）和再次悬停在行上。

```
public class MyCellTable<T> extends CellTable<T> {
    private Tooltip popup = new Tooltip();
    private List<String> tooltipHiddenColumn = new ArrayList<String>();
    private boolean showTooltip;

    public MyCellTable() {
        super();
        sinkEvents(Event.ONMOUSEOVER | Event.ONMOUSEOUT);
    }

    @Override
    public void onBrowserEvent2(Event event) {
        super.onBrowserEvent2(event);
        if (isShowTooltip()) {
            switch (DOM.eventGetType(event)) {
                case Event.ONMOUSEOUT: {
                    popup.hide(true);
                    break;
                }
                case Event.ONMOUSEOVER: {
                    popup.setAutoHideEnabled(true);
                    showToolTip(event);
                    break;
                }
            }
        }
    }

    private void showToolTip(final Event event) {
        EventTarget eventTarget = event.getEventTarget();
        if (!Element.is(eventTarget)) {
            return;
        }
        final Element target = event.getEventTarget().cast();
        // Find the cell where the event occurred.
        TableCellElement tableCell = findNearestParentCell(target);
        if (tableCell == null) {
            return;
        }
        Element trElem = tableCell.getParentElement();
        if (trElem == null) {
            return;
        }
        TableRowElement tr = TableRowElement.as(trElem);
        Element sectionElem = tr.getParentElement();
        if (sectionElem == null) {
            return;
        }
        TableSectionElement section = TableSectionElement.as(sectionElem);
        if (section == getTableHeadElement()) {
            return;
        }
        NodeList<TableCellElement> cellElements = tr.getCells().cast();
        NodeList<TableCellElement> headers = getTableHeadElement().getRows().getItem(0).getCells().cast();
        popup.getGrid().clear(true);
        popup.getGrid().resizeRows(cellElements.getLength());
        for (int i = 0; i < cellElements.getLength(); i++) {
            if (getTooltipHiddenColumn().indexOf(headers.getItem(i).getInnerHTML()) == -1) {
                TableCellElement tst = TableCellElement.as(cellElements.getItem(i));
                popup.getGrid().setHTML(i, 0, headers.getItem(i).getInnerHTML());
                popup.getGrid().setHTML(i, 1, tst.getInnerHTML());
            }
        }
        // Here the constant values are used to give some gap between mouse pointer and popup panel
        popup.setPopupPositionAndShow(new PopupPanel.PositionCallback() {
            public void setPosition(int offsetWidth, int offsetHeight) {
                int left = event.getClientX() + 5;
                int top = event.getClientY() + 5;
                if ((offsetHeight + top + 20) > Window.getClientHeight()) {
                    top = top - offsetHeight - 10;
                }
                popup.setPopupPosition(left, top);
            }
        });
        popup.show();
    }

    public ArrayList<ReorderColumnsDetails> getColumnsHeaders(int index){ 
        ArrayList<ReorderColumnsDetails> column = new ArrayList<ReorderColumnsDetails>();
        NodeList<TableCellElement> headers = getTableHeadElement().getRows().getItem(0).getCells().cast();
        for (int i = 0; i < index; i++) {
            ReorderColumnsDetails clm = new ReorderColumnsDetails();
            clm.setHearder(headers.getItem(i).getInnerHTML().toString());
            clm.setItemIndex(i);
            column.add(clm);
        }    
        return  column;     
    }

    private TableCellElement findNearestParentCell(Element elem) {
        while ((elem != null) && (elem != getElement())) {
            String tagName = elem.getTagName();
            if ("td".equalsIgnoreCase(tagName) || "th".equalsIgnoreCase(tagName)) {
                return elem.cast();
            }
            elem = elem.getParentElement();
        }
        return null;
    }

    /**
     * Specify Name of the column's which is not to shown in the Tooltip
     */
    public List<String> getTooltipHiddenColumn() {
        return tooltipHiddenColumn;
    }

    /**
     * Set title to tooltip
     * 
     * @param title
     */
    public void setTooltipTitle(String title) {
        popup.setHTML(title);
    }

    public boolean isShowTooltip() {
        return showTooltip;
    }

    public void setShowTooltip(boolean showTooltip) {
        this.showTooltip = showTooltip;
    }
} 
```

# java - 即使超类实现了相同的接口，在子类中实现接口有什么好处吗

> ID：15833987
> 
> 赞同：8
> 
> 时间：2013-04-05T12:27:47.087
> 
> 标签：java, oop

当我看到声明时`ArrayList`

```
class ArrayList<E> extends AbstractList<E>
    implements List<E>, RandomAccess, Cloneable, java.io.Serializable 
```

`List`即使`ArrayList`的超类`AbstractList`实现了相同的接口，它也实现了`List`接口。

```
abstract class AbstractList<E> extends AbstractCollection<E> implements List<E> 
```

类似的声明也可以在`HashMap`,`LinkedHashMap`声明中找到。

[![在此处输入图像描述](https://i.stack.imgur.com/FAqxW.png)](https://i.stack.imgur.com/FAqxW.png)

在 的声明中`LinkedHashMap`，它只实现`Map`接口，而不实现其超类实现的其他接口`HashMap`。

所以有这样的声明可能会有一些好处。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T12:30:11.797

再次声明它们没有功能上的好处，它不会以任何方式影响行为。

我想它只是为了更清楚地实现了哪些接口而添加。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T12:30:25.980

这样做仅用于文档目的，以使类的用户立即清楚该类实现了哪些接口。

冗余`implements`子句对编译器没有影响。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T12:38:52.783

是的。它可以被省略。但因此可以立即看出它是一个列表。否则需要额外点击代码/文档。我认为这就是原因——清晰。

并添加 Joeri Hendrickx 的评论 - 目的是展示 ArrayList 实现了 List。整个图中的 AbstractList 只是为了方便和减少 List 实现之间的代码重复。

参考：[为什么 ArrayList 有“implements List”？](https://stackoverflow.com/questions/4387419/why-does-arraylist-have-implements-list)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T17:09:31.563

完全没有必要。我根本不会这样做。

目前还不清楚他们当时为什么这样做。但现在显然这是一个错误，因为当每个人第一次注意到这种奇怪的冗余时，都会对此感到惊讶。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T12:31:21.357

好吧，这样你`List<E>`在创建 的子类时必须实现方法`AbstractList`，并且你也可以将 an`ArrayList`用作`AbstractList`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-15T13:21:10.837

`ArrayList<T>`并为不同的目的`AbstractList<T>`实施`List<T>`。

*   `List<T>` *确定*类成为列表所需的内容。
*   `ArrayList<T>`实现`List<T>`作为定义自己的*接口*的一部分。这对于什么`ArrayList<T>`是必不可少的。
*   `ArrayList<T>``AbstractList<T>`作为其自身*实现*的一部分进行扩展。这完全是可选的：`ArrayList<T>`无需继承就可以从头开始实现`AbstractList<T>`，并且该类将以相同的方式工作。
*   `AbstractList<T>`旨在作为其他实现的基类`List<T>`。它不是*建立*一个接口，而是*遵循*一个现有的接口。`AbstractList<T>`的实现`List<T>`不是必需的，没有它，一切都可以编译和运行。但是，继承`List<T>`可以让 Java 编译器发现接口方法和 的方法之间的潜在差异`AbstractList<T>`，因此`AbstractList<T>`实现`List<T>`接口是一个非常好的主意。

# maven-plugin - apt maven 插件无法生成 Q 类

> ID：15833988
> 
> 赞同：4
> 
> 时间：2013-04-05T12:27:47.637
> 
> 标签：maven-plugin, m2eclipse, apt, querydsl

我正在修复一个使用 Querydsl apt 的遗留项目。由于某种原因，[apt-maven-plugin](https://github.com/mysema/apt-maven-plugin/)开始失败。我发现的唯一解决方法是使用 alter ego [maven-processor-plugin](https://code.google.com/p/maven-annotation-plugin/)。

我已经重新安装了 maven、eclipse 和 M2E，但没有多大成功。maven-apt-plugin 无法在 /target/generated-sources/metamodel 下创建 Q 类。

编辑：从 maven 添加调试

```
[DEBUG] Configuring mojo com.mysema.maven:apt-maven-plugin:1.0.8:process from pl
ugin realm ClassRealm[plugin>com.mysema.maven:apt-maven-plugin:1.0.8, parent: su
n.misc.Launcher$AppClassLoader@6d9bf996]
[DEBUG] Configuring mojo 'com.mysema.maven:apt-maven-plugin:1.0.8:process' with
basic configurator -->
[DEBUG]   (s) logOnlyOnError = true
[DEBUG]   (s) outputDirectory = C:\DEV\myproject\mainstuff\mainstuff-jpa\target\generate
d-sources\metamodel
[DEBUG]   (s) pluginArtifacts = [com.mysema.maven:apt-maven-plugin:maven-plugin:
1.0.8:, org.sonatype.plexus:plexus-build-api:jar:0.0.7:compile, org.codehaus.ple
xus:plexus-utils:jar:1.5.8:compile, backport-util-concurrent:backport-util-concu
rrent:jar:3.1:compile, org.codehaus.plexus:plexus-interpolation:jar:1.11:compile
, junit:junit:jar:3.8.1:compile]
[DEBUG]   (s) processor = com.mysema.query.apt.jpa.JPAAnnotationProcessor
[DEBUG]   (s) project = MavenProject: com.yreham.mainstuff:mainstuff-jpa:1.0
 @ C:\DEV\myproject\mainstuff\mainstuff-jpa\pom.xml
[DEBUG]   (s) sourceEncoding = ISO-8859-1
[DEBUG] -- end configuration --
[DEBUG] Using build context: org.sonatype.plexus.build.incremental.DefaultBuildC
ontext@27bb2f11
[ERROR] C:\DEV\myproject\mainstuff\mainstuff-jpa\src\main\java\com\yreham\mainstuff\j
pa\queries\InstancesQuery.java:40: error: cannot find symbol
import com.yreham.mainstuff.jpa.entity.QCIEntity; 
```

配置 m2e 的一些细节 - Eclipse 1.2.0.20120903-1050 的 Maven 集成 org.eclipse.m2e.feature.feature.group Eclipse.org - m2e

java 版本“1.7.0_15”Java(TM) SE 运行时环境（构建 1.7.0_15-b03）Java HotSpot(TM) 64 位服务器 VM（构建 23.7-b01，混合模式）

（目标构建是 Java 1.6）

这是旧的 pom XML

```
<plugin>
<groupId>com.mysema.maven</groupId>
<artifactId>apt-maven-plugin</artifactId>
<version>1.0.8</version>
<executions>
 <execution>
   <goals>
      <goal>process</goal>
   </goals>
  <configuration>
   <outputDirectory>${apt.target.dir}</outputDirectory>
   processor>com.mysema.query.apt.jpa.JPAAnnotationProcessor</processor>
   <logOnlyOnError>true</logOnlyOnError>
   </configuration>
  </execution>
 </executions>
</plugin> 
```

带有 bsc 插件的新 POM

```
<plugin>
<groupId>org.bsc.maven</groupId> 
<artifactId>maven-processor-plugin</artifactId> 
 <version>2.0.5</version> 
  <executions> 
   <execution> 
    <id>process</id> 
    <goals> 
      <goal>process</goal> 
    </goals> 
 <phase>generate-sources</phase> 
  <configuration>
  <outputDirectory>${apt.target.dir}</outputDirectory>
    <processors>
      <processor>com.mysema.query.apt.jpa.JPAAnnotationProcessor</processor>
    </processors>                  
  </configuration>
  </execution>
 </executions> 
 <dependencies> 
  <dependency> 
    <groupId>org.hibernate</groupId> 
      <artifactId>hibernate-jpamodelgen</artifactId> 
       <version>1.2.0.Final</version> 
       </dependency> 
   </dependencies> 
</plugin> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T16:22:01.987

您的项目是否在命令行中构建？

如果没有，它很可能也无法在 eclipse 中构建。

现在如果 CLI 确实有效，您是否尝试过安装 m2e-apt？它将使注释处理成为 Eclipse 增量构建过程的一部分。有关详细信息，请参阅[https://github.com/jbosstools/m2e-apt/ 。](https://github.com/jbosstools/m2e-apt/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-08T15:13:38.707

原来这是一个 JPA 配置问题。我没有看到它在 Querydsl 上使用了 Hibernate 层。由于我们迁移到 Eclipse J2EE 版本并添加了 M2E WTP [http://www.eclipse.org/m2e-wtp/](http://www.eclipse.org/m2e-wtp/)，因此正确地重新配置了 jpa 模块。

# jquery - 我想在列表之间进行计算，值应存储在最终金额列中

> ID：15833989
> 
> 赞同：0
> 
> 时间：2013-04-05T12:27:48.783
> 
> 标签：jquery, html

请帮助我是新手。我想进行计算（所选值可被 1000 整除）和乘以 Amount 并且应该存储在第 5 列中。即 Product1 = (100 / 1000) * 100 = 10

这是我的代码：

```
<table border="1">
<tbody>
    <tr>
        <td width="334">S.No.</td>
        <td width="334">Product Name</td>
        <td width="334">Amount</td>
        <td width="334">Grams/Kg</td>
        <td width="334">Final Amount</td>
    </tr>
    <tr align="center">
        <td>1</td>
        <td>Product1</td>
        <td>100</td>
        <td>
            <select id="grams">
                <option value=""></option>
                <option value="100">100g</option>
                <option value="250">250g</option>
                <option value="500">500g</option>
            </select>
        </td>
        <td>I want to do calculation (selectedvalue / 1000) * Amount, that amount want to reflect here</td>
    </tr>
    <tr align="center">
        <td>2</td>
        <td>Product2</td>
        <td>200</td>
        <td>
            <select id="grams">
                <option value=""></option>
                <option value="100">100g</option>
                <option value="250">250g</option>
                <option value="500">500g</option>
            </select>
        </td>
        <td>I want to do calculation (selectvalue / 1000) * Amount, that amount want to reflect here</td>
    </tr>
</tbody> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:58:16.093

这可能会帮助您了解如何格式化表格以获取值

```
$(function(){
  $('select').change(function(){
        var td_id = 'row'+$(this).attr('id');
        var val = $(this).val();
        var amount = $('.'+td_id+'-amount').html();
        $('#'+td_id).html(val/1000*amount);
  });
}); 
```

在示例中，您必须添加一些额外的`ids`和`classes`. 见[小提琴](http://jsfiddle.net/Spokey/2ey8s/)

（我以为你想要超过 2 行。在你的情况下，其他答案可能更容易使用）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:00:10.693

首先，不能有两个具有相同 id 的元素。ID 需要唯一。因此，您需要更改第二个选择框的 ID。

然后，我在 td 上放置了一个 id 来进行计算，并在 td 上放置了一个包含金额的 id。

```
<table border="1">
<tbody>
<tr>
    <td width="334">S.No.</td>
    <td width="334">Product Name</td>
    <td width="334">Amount</td>
    <td width="334">Grams/Kg</td>
    <td width="334">Final Amount</td>
</tr>
<tr align="center">
    <td>1</td>
    <td>Product1</td>
    <td id="amtFirst">100</td>
    <td>
        <select id="grams">
            <option value=""></option>
            <option value="100">100g</option>
            <option value="250">250g</option>
            <option value="500">500g</option>
        </select>
    </td>
    <td id="firstCalculation"></td>
</tr>
<tr align="center">
    <td>2</td>
    <td>Product2</td>
    <td id="amtSecond">200</td>
    <td>
        <select id="secondGrams">
            <option value=""></option>
            <option value="100">100g</option>
            <option value="250">250g</option>
            <option value="500">500g</option>
        </select>
    </td>
    <td id="secondCalculation"></td>
</tr>
</tbody> 
```

然后你需要使用jquery：

```
//handles the first select box
$('table').on('change','#grams',function(){
    var selection = $(this).val();
    var amount = $('#amtFirst').html();

    selection = (selection/1000)*amount;
    $('#firstCalculation').html(selection);
});

//handles the second select box
$('table').on('change','#secondGrams',function(){
    var selection = $(this).val();
    var amount = $('#amtSecond').html();

    selection = (selection/1000)*amount;
    $('#secondCalculation').html(selection);
}); 
```

# css - CSS 透视图在 Internet Explorer 10 或 Firefox 中不起作用

> ID：15833996
> 
> 赞同：8
> 
> 时间：2013-04-05T12:27:55.387
> 
> 标签：css, firefox, transform, internet-explorer-10, perspective

我有一个 jQuery 图像滚动器，它使用`perpective`和`transform: translateZ`CSS 属性来模拟深度。它在 Chrome 中正确呈现，但在 IE10 或 Firefox 中不正确。

这是完整的项目（单击“谁来”菜单链接查看图像滚动条）： [http](http://www.girlguiding.org.uk/test/biggig/index.html) ://www.girlguiding.org.uk/test/biggig/index.html 这里是相关代码的 jsFiddle ： http: [//jsfiddle.net/moosefetcher/rxCMr/28/](http://jsfiddle.net/moosefetcher/rxCMr/28/) （我不知道为什么，但stackoverflow告诉我我需要包含链接到jsFiddle的代码，所以这里是css）......

```
.scroller {
    position: relative;
    perspective: 150;
    -webkit-perspective: 150;
    -ms-perspective: 150;
    -moz-perspective: 150;
}
.artistBox {
    width: 228px;
    height: 268px;
    background-color: #000000;
    border-radius: 16px;
    position: absolute;
    overflow: hidden;
    z-index: 4;
}
.artistBox p {
    position: absolute;
    font-family:"Arial", sans-serif;
    color: white;
    font-size: 22px;
}
.artistBoxFront {
    z-index: 5;
}
.artistBoxNew {
    z-index: 3;
    opacity: 0;
}
.scrollerButton {
    position: absolute;
    top: 128px;
    width: 32px;
    height: 32px;
    border: 2px solid white;
    border-radius: 32px;
    background-color: #F49D19;
    box-shadow: 1px 1px 3px #555588;
    z-index: 6;
}
.scrollerButtonOver {
    background-color: #ffaa26;
    box-shadow: 2px 2px 3px #555588;
} 
```

请注意，我已经尝试过包括和排除`-ms-`属性上的前缀。（当前的 jsFiddle 包括 ，`-webkit-`和`-moz-`）。任何人都知道为什么这在 IE10 中可能不起作用？干杯。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-16T21:53:22.880

**长度单位**

IE 和 Firefox 要求`perspective`值有一个长度单位 ( `px`, `em`)。

```
 -moz-perspective: 800px;
        perspective: 800px; 
```

`-webkit`对于 Chrome 和 Safari，使用前缀时长度单位是可选的。

```
-webkit-perspective: 800;    /* This works with or without the px unit */ 
```

**W3C 标准**

将长度单位添加到所有`perspective`值会更安全。它更符合[W3C 标准](http://www.w3.org/TR/css3-transforms/#perspective-property)。这是所有浏览器都支持的一种方法。一旦 Chrome 和 Safari 开始支持`perspective`无前缀，它们可能需要一个长度单位（为了与 W3C 标准和其他浏览器保持一致）。

```
-webkit-perspective: 800px;
   -moz-perspective: 800px;
        perspective: 800px; 
```

*注意：*[w3schools.com](http://www.w3schools.com/cssref/css3_pr_perspective.asp)上的当前信息已过时。没有提到对 IE10 或 Firefox 的支持，并且他们的示例没有长度单位。[developer.mozilla.org](https://developer.mozilla.org/en-US/docs/CSS/perspective)上的最新示例包括与 W3C 标准一致的长度单位。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T20:44:56.047

它不起作用，因为没有 WebKit 浏览器丢弃透视属性。该属性要么接受，要么接受`none`长度值。长度需要一个单位，除非该值为 0。如果添加一个单位，例如 px，它在 IE 和 Firefox 中有效。

见[http://jsfiddle.net/rxCMr/31/](http://jsfiddle.net/rxCMr/31/)

我删除了 -ms- 属性，因为在最终版本中没有前缀的情况下将透视图添加到 IE10。我最后还移动了不带前缀的版本，以便它胜过带前缀的版本。

我不确定它为什么在 WebKit 中工作。它应该删除像 Firefox 和 IE 这样的属性，但我猜它正在做错误恢复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-01T08:47:32.113

我正在使用 Matthew Wagerfield 的[ParallaxJS](http://matthew.wagerfield.com/parallax/)，`perspective: 4000px`但它仍然无法在 IE10/11 中工作，而在 Chrome 和 Firefox 中却完全没问题。

标记

```
<ul class="container">
    <li class="layer">...</li>
    <li class="layer">...</li>
    <li class="layer">...</li>
</ul> 
```

`perspective: 4000px`在 FF 和 Chrome 上定义`.container`很好，但在`.layer`. 所以也许检查一下。可能与`transform-style: preserve-3d || flat`我设置的无数内容有关，但要点是：检查您的视角设置*在哪个选择器上。*

# eclipse-plugin - PMD-Eclipse：如何设置抑制标记？

> ID：15833998
> 
> 赞同：1
> 
> 时间：2013-04-05T12:27:57.060
> 
> 标签：eclipse-plugin, pmd, suppress-warnings

正如[PMD 文档](http://pmd.sourceforge.net/pmd-5.0.2/suppressing.html)所说，

> 您可以使用“NOPMD”标记告诉 PMD 忽略特定行

但

> 你可以使用任何你想抑制警告的文本​​字符串

通过使用命令行选项`-suppressmarker`。

`-suppressmarker`使用PMD-Eclipse插件时如何设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T18:19:37.160

Eclipse 的 PMD 插件不包含命令行提供的所有选项。最简单的方法是使用 //NOPMD 并完全忽略该问题。

或者，您可以使用 Ant 脚本来运行 PMD。如果您希望 Ant 脚本自动运行，则可以将 Ant 脚本设置为作为 Eclipse 项目的构建器运行。但是，您会失去与这种方法的 Eclipse 集成。查看 HTML 报告而不是能够单击错误似乎只是为了使用不同的标记而做出的重大权衡。