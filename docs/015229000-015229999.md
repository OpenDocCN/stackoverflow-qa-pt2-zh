# StackOverflow 问答 15229000-15229999

# ruby-on-rails - 将参数添加到范围

> ID：15229000
> 
> 赞同：25
> 
> 时间：2013-03-05T16:25:36.417
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, rails-activerecord

我有一个 ActiveRecord 查询，例如：

```
@result = stuff.limit(10) 
```

where stuff 是带有 where 子句、order by 等的活动记录查询...

现在我想为什么要将这样的幻数传递给控制器​​？那么您认为为“limit(10)”定义一个范围并改用它是一个好习惯吗？语法会是什么样子？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-03-05T16:52:12.143

确实有多种方法可以做到这一点，@Dave Newton 指出的类方法就是其中之一。如果您想使用范围，方法如下：

```
scope :max_records, lambda { |record_limit|
  limit(record_limit)
} 
```

或者使用 Ruby 1.9 “stabby” lambda 语法和多个参数：

```
scope :max_records, ->(record_limit, foo_name) {   # No space between "->" and "("
  where(:foo => foo_name).limit(record_limit)
} 
```

如果您想了解作用域和类方法之间更深层次的区别，请查看[这篇博](http://blog.plataformatec.com.br/2013/02/active-record-scopes-vs-class-methods/)文。

希望能帮助到你。干杯!

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-03-05T16:44:17.657

Well Scopes 就是为此而生的

范围界定允许您指定常用的 Arel 查询，这些查询可以作为关联对象或模型上的方法调用来引用。通过这些作用域，您可以使用之前介绍的所有方法，例如 where、joins 和 include。所有作用域方法都将返回一个 ActiveRecord::Relation 对象，该对象将允许在其上调用更多方法（例如其他作用域）。

来源： http: [//guides.rubyonrails.org/active_record_querying.html#scopes](http://guides.rubyonrails.org/active_record_querying.html#scopes)

因此，如果您觉得您有一些常见的查询，或者您需要在您的查询中使用一些对许多人来说很常见的链接。然后我会建议你去寻找范围以防止重复。

现在回答范围在您的情况下的样子

```
class YourModel < ActiveRecord::Base
  scope :my_limit, ->(num) { limit(num)} 
  scope :your_where_condition, ->(num) { where("age > 10").mylimit(num) } 
end 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-01-06T13:41:21.537

在 Rails 范围内传递参数

**范围的定义**

```
scope :name_of_scope, ->(parameter_name) {condition whatever you want to put in scope} 
```

**调用方法**

```
name_of_scope(parameter_name) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-05T16:48:02.450

范围看起来像任何其他的（尽管您可能更喜欢类方法），例如，

```
class Stuff < ActiveRecord::Base
  def self.lim
    limit(3)
  end
end

> Stuff.lim.all
=> [#<Stuff id: 1, name: "foo", created_at: "2013-03-01 17:58:32", updated_at: "2013-03-01 17:58:32">,
 #<Stuff id: 2, name: "bnar", created_at: "2013-03-01 17:58:32", updated_at: "2013-03-01 17:58:32">,
 #<Stuff id: 3, name: "baz", created_at: "2013-03-01 17:58:32", updated_at: "2013-03-01 17:58:32">]
> Stuff.all.length
=> 8 
```

如果您*总是*（或“几乎”总是）想要该限制，请使用默认范围：

```
class Stuff < ActiveRecord::Base
  attr_accessible :name, :hdfs_file

  default_scope limit(3)
end

> Stuff.all
=> [#<Stuff id: 1, name: "foo", created_at: "2013-03-01 17:58:32", updated_at: "2013-03-01 17:58:32">,
 #<Stuff id: 2, name: "bnar", created_at: "2013-03-01 17:58:32", updated_at: "2013-03-01 17:58:32">,
 #<Stuff id: 3, name: "baz", created_at: "2013-03-01 17:58:32", updated_at: "2013-03-01 17:58:32">]
> Stuff.all.length
=> 3 
```

要跳过默认范围：

```
> Stuff.unscoped.all.size
=> 8 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-08-04T09:28:32.383

带参数的 Rails 模型中的范围：

```
scope :scope_name, -> (parameter, ...) { where(is_deleted: parameter, ...) } 
```

或者：

```
scope :scope_name, lambda{|parameter, ...| where(is_deleted:parameter, ...)} 
```

# nsis - NSIS 卸载程序不会删除文件/文件夹

> ID：15229001
> 
> 赞同：2
> 
> 时间：2013-03-05T16:25:36.670
> 
> 标签：nsis, delete-file

我正在为我工​​作的公司内部使用的其中一个应用程序编写 NSIS 安装程序，安装过程运行良好，创建了所有 REG 密钥没有问题，应用程序使用的文件夹和服务也是如此. 出于某种我无法理解的原因，卸载过程不起作用。

应用程序创建的服务被删除，注册表项也被删除，最简单的部分，文件本身，我无法通过卸载程序删除它们！

```
#Includes
!include "x64.nsh"
#Defines and Installer Properties
Outfile "ESTvnc Installer.exe"
Name ESTvnc 
Icon "${NSISDIR}\contrib\graphics\icons\VNCON.ico"
#Detect OS Version
Function .onInit
    StrCpy $instdir $PROGRAMFILES
    ${If} ${RunningX64}
        StrCpy $instdir $PROGRAMFILES32
    ${EndIf}
FunctionEnd

section
    SetShellVarContext all  
    CreateDirectory $instdir\EST\ESTvnc
    setOutPath $instdir\EST\ESTvnc
    File /r installfiles\*
    WriteRegStr HKLM "Software\Microsoft\Windows\CurrentVersion\Uninstall\ESTvnc\" \
                 "DisplayName" "ESTvnc"
    WriteRegStr HKLM "Software\Microsoft\Windows\CurrentVersion\Uninstall\ESTvnc"\
                 "UninstallString" "$instdir\EST\ESTvnc\uninstaller.exe"
    writeUninstaller $instdir\EST\ESTvnc\uninstaller.exe
    ExecWait '"$instdir\EST\estvnc\estvnc.exe" -install'
sectionEnd

section "Uninstall"
    SetShellVarContext all  
    SimpleSC::StopService "ESTVNC" 1 30
    pop $0
    SimpleSC::StopService "ESTVNCSR" 1 30
    pop $0
    SimpleSC::RemoveService "ESTVNC"
    SimpleSC::RemoveService "ESTVNCSR"    
    RMDir /r "$instdir\EST\ESTvnc"  
    Delete $instdir\EST\ESTvnc\uninstaller.exe  
    DeleteRegKey HKLM "Software\Microsoft\Windows\CurrentVersion\Uninstall\ESTvnc"  
sectionEnd 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T17:57:05.627

在卸载程序中，`$instdir`是卸载程序所在的目录！

将卸载程序放入`$instdir`并删除`$instdir\EST\ESTvnc`，或者如果您想保留它`$instdir\EST\ESTvnc`，请删除`$instdir`...

# vhdl - VHDL - 向量和位之间的与运算

> ID：15229004
> 
> 赞同：1
> 
> 时间：2013-03-05T16:25:41.487
> 
> 标签：vhdl

我从 VHDL 开始，尝试向端口添加启用时遇到问题。我有一个 8 位的输出向量，如果“启用”位输入为“1”，我想输入一个值。否则，在向量中放置一个“0”。

我会做：

```
out(0) <= '0' AND Enable;
out(1) <= '0' AND Enable;
out(2) <= '1' AND Enable;
out(3) <= '0' AND Enable;
out(4) <= '1' AND Enable;
...
out(7) <= '0' AND Enable; 
```

有一种简单的方法可以做到这一点吗？我在想：`out <= "01010100" AND Enable;` 但它不起作用......

我可以使用“如果”，但我更喜欢用这种方式来理解如何去做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T16:45:24.917

它与另一个相同大小的向量，初始化为`(others => Enable)`

一个更完整的例子：

```
subtype Data_Word is std_logic_vector(7 downto 0);

signal Out, Value, Mask : Data_Word;
...
Mask <= (others => Enable);
Out <= Value and Mask; 
```

或者也许只是

```
Out <= Value and (Out'Range => Enable); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T17:45:16.200

一个整洁的方法是使用条件信号分配：

```
Out <= Value when Enable = '1' else (others=>'0'); 
```

...作为奖励，当 Enable 为低时，您可以分配您想要的任何值（甚至是不同的信号向量）。

# android - 如何捕获用于声卡的数据

> ID：15229013
> 
> 赞同：0
> 
> 时间：2013-03-05T16:25:58.813
> 
> 标签：android, soundcard

我想捕获声卡数据。意味着在手机上播放的任何东西。它可能是警报声音，声音等，无论声音来自设备。我只想用 android 框架类捕获声音。我不想要任何本机编程。是可能吗？如果有其他工具可用，请提供详细信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:27:40.193

如果设备处于免提模式，您可以通过麦克风进行录音，它将拾取设备正在播放的任何内容以及任何其他环境声音。使用`AudioRecord`或`MediaRecorder`您认为合适的。

如果设备未处于扬声器模式，则您无法拦截其他应用程序的音频输出。

# c++ - Qt获取信号调用者并逐行从文件中读取

> ID：15229018
> 
> 赞同：0
> 
> 时间：2013-03-05T16:26:12.283
> 
> 标签：c++, qt

我有两个问题：第一个相当简单——我有一个按钮列表。我希望在单击其中一个时将其从列表中删除，然后删除动态分配的按钮。这是我写的**插槽**的代码（代码中有一些额外的信息）：

```
 void Window :: bla2()
{
    //I fond somewhere on the internet that apperantly "sender()" should return a pointer to the caller;
    for(int i = 0; i < List.size(); i++)
    {
        if(List[i] == sender())
        {
            List.removeOne(sender());
        }
    }
    delete sender();

} 
```

好的，现在对于我的第二个问题，我想逐行读取一个文本文件，并将每一行作为一个元素添加到 NOTE 这是作为窗口的派生类的 .cpp 文件，因此所有内容都已在标题部分。

```
 vtext = new QFile("one.txt"); // QFile variable
    while (vtext->atEnd() == false)
    {
       line = vtext->readLine(); //QString
           quotes.push_back(line);//quote is QVector<QString>
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T16:33:25.047

要回答您的第一个问题：

您不能在 Qt 中删除该对象调用的插槽中的对象。这是有充分理由的，因为您可能会将其他事件发布到对象或其他插槽，这些事件将被称为对期望找到有效对象的当前事件的反应。考虑按钮点击信号连接到多个插槽的情况，如果第一个插槽删除了我们处于未定义行为区域的发送者。Qt 提供`deleteLater()`了这种情况。`deleteLater()`推迟删除对象，直到程序再次进入其事件循环。以后多次调用 delete 也是安全的。

将您的代码从更改`delete Sender()`为`Sender()->deleteLater();`

如果您的列表是 QWidgets 而不是 QObjects，您需要将 Sender() 的结果转换为 QWidget。如果您绝对确定只能从 QWidget 调用此插槽，则可以继续使用`static_cast<QWidget*>(Sender())`，但我强烈建议首先测试 QObject 是否为 QWidget，`Sender()->isWidgetType()`如果发送者实际上是 Widget，则调用 which 返回 true .

就您的第二个问题而言，我看起来应该按照您的想法行事，我看不出问题的真正含义。在 StackOverflow 上，一次问一个问题是一种很好的做法。我建议编辑这个问题并取出下半部分并将其作为一个新问题发布。给出一个简短的包含示例，其他人可以编译和测试也是一个好习惯。

# python - facebook签名的请求电子邮件

> ID：15229022
> 
> 赞同：0
> 
> 时间：2013-03-05T16:26:25.677
> 
> 标签：python, django, facebook

我有以下代码：

```
def base64_url_decode(inp):
    padding_factor = (4 - len(inp) % 4) % 4
    inp += "="*padding_factor 
    return base64.b64decode(unicode(inp).translate(dict(zip(map(ord, u'-_'), u'+/'))))

def parse_signed_request(signed_request, secret):

    l = signed_request.split('.', 2)
    encoded_sig = l[0]
    payload = l[1]

    sig = base64_url_decode(encoded_sig)
    data = json.loads(base64_url_decode(payload))

    if data.get('algorithm').upper() != 'HMAC-SHA256':
        log.error('Unknown algorithm')
        return None
    else:
        expected_sig = hmac.new(secret, msg=payload, digestmod=hashlib.sha256).digest()

    if sig != expected_sig:
        return None
    else:
        log.debug('valid signed request received..')
        return data 
```

如何使用 facebook 签名的请求数据（从 parse_signed_request 返回）来获取此人的电子邮件地址？

这是它的 facebook 文档： [https ://developers.facebook.com/docs/howtos/login/signed-request/](https://developers.facebook.com/docs/howtos/login/signed-request/)

我试着做：

```
data = parsed_signed_request(...)
data.get('registration').email 
```

但这没有用。

我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:40:39.603

也许你可以试试这个，这是我的代码的一部分：

```
def parse_signed_request(signed_request, app_secret):
    try:
        l = signed_request.split('.', 2)
        encoded_sig = str(l[0])
        payload = str(l[1])
    except IndexError:
        raise ValueError("'signed_request' malformed")

    sig = base64.urlsafe_b64decode(encoded_sig + "=" * ((4 - len(encoded_sig) % 4) % 4))
    data = base64.urlsafe_b64decode(payload + "=" * ((4 - len(payload) % 4) % 4))

    data = json.loads(data)

    if data.get('algorithm').upper() != 'HMAC-SHA256':
        raise ValueError("'signed_request' is using an unknown algorithm")
    else:
        expected_sig = hmac.new(app_secret, msg=payload, digestmod=hashlib.sha256).digest()

    if sig != expected_sig:
        raise ValueError("'signed_request' signature mismatch")
    else:
        return data

def fb_registration(request):
    if request.POST:
        if 'signed_request' in request.POST:
            # parse and check data
            data = parse_signed_request(request.POST['signed_request'], settings.FACEBOOK_APP_SECRET)

            # lets try to check if user exists based on username or email
            try:
                check_user = User.objects.get(username=data['registration']['name'])
            except:
                state = "Username is already exist. Please try other account."
                return HttpResponseRedirect(reverse('accounts:register'))

            try:
                check_user = User.objects.get(email=data['registration']['email'])
            except:
                state = "Email is already exist. Please use other account."
                return HttpResponseRedirect(reverse('accounts:register'))

            #lets create now the user
            randompass = ''.join([choice('1234567890qwertyuiopasdfghjklzxcvbnm') for i in range(7)])
            user = User.objects.create_user(data['registration']['name'], data['registration']['email'], randompass)
            user.save()

            user = authenticate(username=data['registration']['name'], password=randompass)

            if user is not None:
                # save in user profile his facebook id
                fbid = 'http://www.facebook.com/profile.php?id=%s' % data['user_id']
                r = RPXAssociation(user=user, identifier=fbid)
                r.save()
                login(request, user)
            return HttpResponseRedirect(reverse('accounts:choose_plan'))
        else:
            state = "Registration request failed!"

    return HttpResponseRedirect(reverse('accounts:register')) 
```

# android - Sqlite DB 搜索中的空间原因问题

> ID：15229026
> 
> 赞同：1
> 
> 时间：2013-03-05T16:26:34.150
> 
> 标签：android, search, android-sqlite

我尝试使用此查询

```
SELECT * FROM DBNAME WHERE NAME LIKE '%SEARCHKEYWORD%' 
```

在 SQLite DB 中实现搜索，但如果 Name 包含空格则不起作用，例如，如果在 DB 中有一个带有 Name **Mustang GT**的项目，如果我输入关键字`mustang gt`或`Mustang GT`... 总是返回空查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:13:53.240

没有理由会导致代码中的描述器问题，当您获取字符串时可能会出现问题。

尝试打印`SEARCHKEYWORD`以验证是否正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T16:30:00.983

您需要将列和字符串都设为小写（或大写），因为 LIKE 区分大小写。

例如：

```
SELECT * FROM DBNAME WHERE lower(NAME) LIKE lower('%SEARCHKEYWORD%') 
```

# gcc - 如何使用 gcc 编译包含在另一个 c 文件中定义的函数的 c 文件？

> ID：15229029
> 
> 赞同：0
> 
> 时间：2013-03-05T16:26:47.120
> 
> 标签：gcc, hyperlink

我有两个名为`file1.c`and的 c 文件`file2.c`，都包括另一个头文件`file3.h`. 我在里面定义了一个函数`file2.c`并在`file3.h`. 然后我使用里面的函数`file2.c`。

问题是，如何`file1.c`使用 gcc 进行编译？我用过`gcc file.c`，它没有显示对该函数的引用。我想也许我们需要一些链接选项？

# cakephp - cakephp 将数据输出为 json

> ID：15229032
> 
> 赞同：1
> 
> 时间：2013-03-05T16:26:54.117
> 
> 标签：cakephp, json

我是 cakephp 新手，我正在尝试创建一个处理车辆的简单休息 api。我想以 json 格式输出从 mysql 数据库中获取的数据。

**这是我的控制器**

```
class VehiclesController extends AppController {
    var $name = 'Vehicles';
    var $layout = 'default';

    function index() {
        $this->set('vehicles', $this->Vehicle->find('all'));
        $this->set('title_for_layout','Home');
    }
} 
```

我如何在视图中将内容作为 json 输出？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T16:30:41.537

在这里创建一个视图`Views/Vehicles/json/index.ctp`。

在您看来，您应该能够使用：

```
<?php echo json_encode($vehicles); ?> 
```

输出 JSON

然后，您可以在此 url 上访问它：`/vehicles/index.json`

# java - 如何使 PrimeFaces 自动完成具有固定宽度并包含文本？

> ID：15229036
> 
> 赞同：2
> 
> 时间：2013-03-05T16:27:13.180
> 
> 标签：java, jsf, primefaces

我认为基于 jQuery ui 自动完成的 PrimeFaces 自动完成在长文本的情况下表现得很奇怪，结果框本身位于不可见区域。当盒子宽度大于可用的宽度分辨率时会发生这种情况。似乎容器的宽度用第一次搜索中找到的最大元素的宽度进行了自我初始化，然后随后的结果以相同的宽度显示，即使结果的元素长度可能更小。我希望容器具有固定的宽度，并且文本被包裹而不是显示水平滚动条。我不确定这是否是一个错误，在我看来，因为当没有可用的宽度时，您无法再看到结果，因为它隐藏在屏幕的左侧尺寸上。

![在此处输入图像描述](../Images/0fd8fda791c4eeec38c5c8c914a85969.png) ![在此处输入图像描述](../Images/33985ef34c114270f2d1e0dced3e1d76.png) ![在此处输入图像描述](../Images/9a646dc298b184cc81be9e6423847759.png)

刷新浏览器以重置容器的宽度（F5）：

![在此处输入图像描述](../Images/b23bc13e47560d6dd055a59dd50ce795.png) ![在此处输入图像描述](../Images/a45d5d5c8eb56ed5d7b9c9eb52ec955a.png) ![在此处输入图像描述](../Images/a191bd10c4f40b7e5dc9938fc466fe5c.png)

刷新浏览器以重置容器的宽度 (F5)，正如您将在这些图像中看到的那样，容器的一部分不可见并且隐藏在左侧。

![在此处输入图像描述](../Images/5b0bcae01ac9e05f8e9a4d3bd22d01fa.png) ![在此处输入图像描述](../Images/409102a363d8e57a26b2439d46d7ef60.png) ![在此处输入图像描述](../Images/0333d9b34ffc1e22bc928d4c9c0d9251.png) ![在此处输入图像描述](../Images/9657ebd18812ff8aec8db0c2518f0ae4.png)

代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    xmlns:oms="http://aom.org/oms"
    xmlns:f="http://java.sun.com/jsf/core">
<h:head>
    <title>Prueba</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</h:head>
<h:body>
    <h:form id="quotationForm" prependId="false">   
        <p:autoComplete id="acSimple" value="#{autoCompleteBean.txt1}" completeMethod="#{autoCompleteBean.complete}"/>  
    </h:form>
</h:body>
</html> 
```

AutoCompleteBean.java：

```
package org.aom.oms.controller;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

import javax.enterprise.inject.Model;

@Model
public class AutoCompleteBean {  

    private String txt1;

    private List<String> texts = 
            Arrays.asList("a0", "b0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789","c012",
                    "c0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456");

    public List<String> complete(String query) {
        List<String> results = new ArrayList<String>();
        for (String text : texts) {
            if (text.contains(query)) {
                results.add(text);
            }
        }
        return results;
    }

    public String getTxt1() {  
        return txt1;  
    }  

    public void setTxt1(String txt1) {  
        this.txt1 = txt1;  
    }  

} 
```

PrimeFaces 3.4.2

# jquery - Rails Mailchimp API 与 Gibbon Gem 的集成

> ID：15229037
> 
> 赞同：1
> 
> 时间：2013-03-05T16:27:14.370
> 
> 标签：jquery, ruby-on-rails, gem, mailchimp

我正在尝试在 Rails 中包含带有 Gibbon gem 的电子邮件表单的 MailChimp Api。

添加邮件等工作，我在控制台中看到来自 API 的正确回调，但除了成功案例，它正确更改了电子邮件 id div，**没有任何反应。**

似乎 case 开关不起作用，或者它无法读取从 api 返回的代码。

路线等设置正确。

这是我的控制器：

```
 class MailchimpformController < ApplicationController

  def index
  end

  def submit
    mailchimp_api_key = "mysecretapikey"
    mailchimp_list_id = "mysecretlistid"
    g = Gibbon.new(mailchimp_api_key)
    response = g.list_subscribe({:id => mailchimp_list_id,
                                :email_address => params[:email],
                                :double_optin => false,
                                :send_welcome => false})

    if(response.is_a?(Hash))
     puts response
    case response['code']
     when 502
      @js_email_error = "Invalid Address!"
     when 214
      @js_email_error = "Already signed up!"
     else
      @js_email_error = response['error']
    end
      @js_email_success = nil
    else
      @js_email_success = "Thanks!"
      @js_email_error = nil
    end
    respond_to do |format|
     format.js
    end
    end
  end 
```

它仅在将新电子邮件添加到列表时才有效。

index.html.erb

```
<%= form_tag submit_path, :class=> "form", remote: true do %>
    <%= text_field_tag :email, nil, :class => 'email', :type=>"email", :placeholder => 'Sign up for beta testing' %>
    <%= submit_tag "Absenden", :alt => "Absenden", class: "input-btn"%>
<% end %> 
```

和 javascript 的东西 submit.js.erb

```
<% if @js_email_error %>
$("#email").val("<%= @js_email_error %>");
<% end %>
<% if @js_email_success %>
$("#email").val("<%= @js_email_success %>");
<% end %> 
```

我还收到了`Completed 500 Internal Server Error`来自 MailChimp API 的带有（正确）回调的 POST /mailchimpform/submit 。我不知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:04:09.527

好的，现在它可以工作了。该错误是由长臂猿（设置）的错误处理引起的

和

```
g.throws_exceptions  = false 
```

在提交之前它现在可以正常工作。

# jquery - rails 和 html 数据属性：使用破折号（-）还是下划线（_）？

> ID：15229038
> 
> 赞同：18
> 
> 时间：2013-03-05T16:27:18.233
> 
> 标签：jquery, ruby-on-rails, html, custom-data-attribute

最近，我在我的 rails 应用程序中遇到了 HTML 自定义数据属性的问题。我使用以下模式向 html 标记添加一些数据属性，并稍后在我的 javascript(jQuery) 代码中使用它们：

```
= %a.name{ href: "url.com", data: {first_name: "ben", last_name: "amsalem} } 
```

在 javascript 代码中，我访问这些属性：

```
alert($(".name").data("first_name") + " " + $(".name").data("last_name")); 
```

在我的开发环境中，它运行良好并且我得到了预期的结果（过去我的生产环境也是如此），但是在我当前的生产版本中，我得到了“未定义”的值。我检查了页面的 HTML 源代码，发现现在有类似的内容：

```
<a class="name" href="url.com" data-first-name="ben" data-last-name="amsalem" /> 
```

代替：

```
<a class="name" href="url.com" data-first_name="ben" data-last_name="amsalem" /> 
```

为什么会这样？是什么导致了这种变化？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-05T16:31:23.743

这是完全正常的，`data: { first_name: "ben" }`应该产生`data-first-name="ben"`。

访问此属性的最佳方式是使用`.data("firstName")`，但`.data("first-name")`也可以。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T16:53:13.090

我认为您正在使用 HAML。自 4.0 以来，Hypernation 是默认设置。设置`hyphenate_data_attrs`为 false 将其关闭。

文档：[http ://haml.info/docs/yardoc/Haml/Options.html#hyphenate_data_attrs-instance_method](http://haml.info/docs/yardoc/Haml/Options.html#hyphenate_data_attrs-instance_method)

原github pull讨论：[https ://github.com/haml/haml/pull/488](https://github.com/haml/haml/pull/488)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T17:14:26.583

经过测试我做了：似乎在开发中我在版本 3.2.9 中有 gem，而在生产中它是 3.2.12 -`<a date-last_name/>`在这些版本之间修复了错误的行为（转换为），升级我的开发版本后，我可以看到改变。

# knockout.js - 不显示knockoutjs observablearray

> ID：15229043
> 
> 赞同：-1
> 
> 时间：2013-03-05T16:27:24.910
> 
> 标签：knockout.js

我在学习Knockoutjs，有疑问如何显示一个observablearray()的值；

我的 JS 代码在：

```
<script>

        function Cliente(nome, CGC) {
            this.Nome = nome;
            this.Cgccfo = CGC;

        };

        function ordemservicoVM() {
            self = this;                   
            self.pessoas = ko.observableArray([
                new Cliente("ValueOne", "ValueTwo")               
            ]);            
        };

 $(document).ready(function () {           

            ko.applyBindings(new ordemservicoVM());
}

</script> 
```

html代码：

```
<table>    
    <thead>
        <tr>
            <th>Nome</th>
            <th>CGC</th>
        </tr>
    </thead>
    <tbody data-bind="foreach: pessoas" >
        <tr>
            <td data-bind="text: Nome"></td>
            <td data-bind="text: Cgccfo"></td>
        </tr>
    </tbody>
</table> 
```

已经使用了与上述代码相同的结构，并且运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:34:23.530

您在 $(document).ready 函数后缺少右括号。更正了下面的片段。注意最后一行的区别：

```
$(document).ready(function () {           
    ko.applyBindings(new ordemservicoVM());
}); 
```

添加括号后，您的代码开始正常工作。

它实际上是在 chrome 开发工具的控制台中显示“未捕获的语法错误：输入意外结束”错误。因此，请密切注意控制台以发现此类问题。

# java - 如何停止一系列 postDelayed 处理程序

> ID：15229045
> 
> 赞同：4
> 
> 时间：2013-03-05T16:27:29.117
> 
> 标签：java, android, handler, handlers, postdelayed

我有一系列 postDelayed 处理程序。当用户在我想要的任何时候点击停止按钮时，我无法设置一个停止处理程序的数学。

我将不胜感激有人能够提供的任何帮助。谢谢

```
while (!lessonIsRunning) {
        Handler handler0 = new Handler();
        handler0.postDelayed(new Runnable() {
          @Override
          public void run() {
              plate1.setVisibility(ImageView.VISIBLE);
              plate2.setVisibility(ImageView.VISIBLE);
              plate3.setVisibility(ImageView.VISIBLE);
          }
        }, 6000);

        Handler handler1 = new Handler();
        handler1.postDelayed(new Runnable() {
          @Override
          public void run() {
              apples1.setVisibility(ImageView.VISIBLE);
          }
        }, 9000);

        Handler handler2 = new Handler();
        handler2.postDelayed(new Runnable() {
          @Override
          public void run() {
              plus1.setVisibility(TextView.VISIBLE);
          }
        }, 9250);
}
public void stopLesson(View V){

} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-05T17:23:59.020

而不是以匿名方式编写 Runnable 任务，您必须使用名称定义它，以便稍后您将有一个指向它的链接以删除：

```
//there is no need for multiple handlers 
//handler must be declared outside all functions, in order for you to use it everywhere. 

Handler handler = new Handler(); 
Runnable myFirstTask  = new Runnable (){
         @Override
              public void run() {
                  plate1.setVisibility(ImageView.VISIBLE);
                  plate2.setVisibility(ImageView.VISIBLE);
                  plate3.setVisibility(ImageView.VISIBLE);
              } };

    Runnable mySecondTask = new Runnable(){
        @Override
              public void run() {
                  plus1.setVisibility(TextView.VISIBLE);
              }

    };

    Runnable myThirdTask = new Runnable(){
        @Override
              public void run() {
                  apples1.setVisibility(ImageView.VISIBLE);
              } }

    //you can put different tasks on the same handler object

    while (!lessonIsRunning) {   
            handler.postDelayed(myFirstTask,6000);   
            handler.postDelayed(mySecondTask,9250);   
            handler.postDelayed(myThirdTask,9000); 
} 
public void stopLesson(View V){ 
    //notice that you don't need these, because the handlers are not recursive 
    //you don't have lines "handler.postDelayed(sameTask,someTime);" 
    //in your run Method of the runnable
 if(handler!=null){
    handler.removeCallbacks(myFirstTask);
    handler.removeCallbacks(mySecondTask); 
    handler.removeCallbacks(myThirdTask); 
    //if this method is inside onPause or onDestroy add this line as well: 
    handler=null; 

}
 } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T16:28:59.320

你可以给

```
handler0.removeCallbacksAndMessages(null);
handler1.removeCallbacksAndMessages(null);
handler2.removeCallbacksAndMessages(null); 
```

试一试。该文档说，当您提交空令牌时，所有回调和消息都将被删除。

# windows - 为什么 Clang++ 不编译代码 在 Windows 上？

> ID：15229047
> 
> 赞同：1
> 
> 时间：2013-03-05T16:27:36.683
> 
> 标签：windows, clang++

为什么 clang++ 编译这个：

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char **argv) {
    printf("Hello World!\n");
    return EXIT_SUCCESS;
} 
```

并且不想编译这个：

```
#include <iostream>
int main()
{
    std::cout << "FFFF\n";
    return 0;
}
??? 
```

命令行：

> clang++ -c hello.cpp -emit-llvm -o hello.bc

像这样发出太多错误：

```
C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\INCLUDE\xrefwrap:222:22:
note:
      expanded from macro '_CLASS_RESULT_OF_PMF_OPT_0X'
                        __thiscall, X2, X3, X4) 
```

Windows 7 64、clang-3.2、llvm-3.2、VS2012

* * *

=====更新=====

命令行（带 -v）：

```
clang++ -c hello.cpp -emit-llvm -o hello.bc -v 
```

我得到什么：

```
clang 3.2 版 (tags/RELEASE_32/final)
目标：i686-pc-win32
线程模型：posix
 "C:/llvm/clang/build/bin/Debug/clang++.exe" -cc1 -triple i686-pc-win32 -emit-ll
vm-bc -disable-free -main-file-name 321.cpp -mrelocation-model static -mdisable-
fp-elim -fmath-errno -masm-verbose -mconstructor-aliases -target-cpu pentium4 -m
省略叶帧指针 -v -coverage-file "C:\llvm\3211.bc" -resource-dir "C:/
llvm/clang/build/bin/Debug\..\lib\clang\3.2" -fmodule-cache-path "C:\Users\
\kpdev\AppData\Local\Temp\clang-module-cache" -internal-isystem C:/llvm/clan
g/build/bin/Debug/../lib/clang/3.2/include -internal-isystem "C:\Program Files
(x86)\Microsoft Visual Studio 11.0\VC\include" -internal-isystem "C:\Program
 文件 (x86)\Windows Kits\8.0\\include" -std=c++11 -fdeprecated-macro -ferro
r-limit 3 -fmessage-length 80 -mstackrealign -fms-extensions -fms-compatibility
-fmsc-version=1300 -fdelayed-template-parsing -fobjc-runtime=gcc -fobjc-default-
综合属性 -fcxx-exceptions -fexceptions -fdiagnostics-show-option -f
颜色诊断 -o "C:\llvm\3211.bc" -x c++ "C:\llvm\321.cpp"
clang -cc1 版本 3.2 基于 LLVM 3.2svn 默认目标 i686-pc-win32
    #include "..." 搜索从这里开始：
    #include <...>搜索从这里开始：
 C:/llvm/clang/build/bin/Debug/../lib/clang/3.2/include
 C:\Program 文件 (x86)\Microsoft Visual Studio 11.0\VC\include
 C:\Program Files (x86)\Windows Kits\8.0\include
搜索列表结束。
在 C:\llvm\321.cpp:1 包含的文件中：
在 C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\inc 中包含的文件中
lude\iostream:6:
在 C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\inc 中包含的文件中
lude\istream:6:

```

...ETC。

接着：

```
C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\include\type_traits:1072:
33：错误：
      '_Ty' 不引用值
                _HAS_TRIVIAL_MOVE_CONSTRUCTOR(_Ty)
                                              ^
C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\include\type_traits:52:38
： 笔记：
      从宏“_HAS_TRIVIAL_MOVE_CONSTRUCTOR”扩展而来
                        && __has_trivial_move_constructor(_Ty)>
                                                          ^

```

...ETC。

所以...`-internal-isystem`指向错误的路径。如何改变它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:37:22.890

您为 clang 配置了错误的包含路径。这个：

```
C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\INCLUDE\xrefwrap 
```

是 VS 2012 安装的头文件，与 clang 无关（显然与它不兼容）。

确保您的环境没有为 VC++ 编译设置。例如，确保没有`INCLUDE`为 VC++ 设置环境变量。可能还有其他环境变量来确保没有为 clang 设置不当，例如`LIB`.

# c# - Windows Phone 8 视图模型绑定

> ID：15229049
> 
> 赞同：3
> 
> 时间：2013-03-05T16:27:37.003
> 
> 标签：c#, xaml, mvvm, windows-phone-8

我正在开发一个 Windows Phone 8 项目，并且我正在做一些我在 WPF 和 WP7 中做过多年的事情，但它似乎在 Windows Phone 8 中不起作用。我创建了另一个项目，并复制了一个这个问题的更简单的形式。我创建了一个新的 WP8 项目，并执行以下操作：

1) 添加一个新类，TestVM.cs

```
class TestVM : DependencyObject
{
    public string TestProperty
    {
        get { return (string)GetValue(TestPropertyProperty); }
        set { SetValue(TestPropertyProperty, value); }
    }

    // Using a DependencyProperty as the backing store for TestProperty.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty TestPropertyProperty =
        DependencyProperty.Register("TestProperty", typeof(string), typeof(TestVM), new PropertyMetadata(string.Empty));
} 
```

2) 修改 App.xaml，`<Application.Resources />`如下所示：

```
<!--Application Resources-->
<Application.Resources>
    <local:TestVM x:Key="MainVM" />
    <local:LocalizedStrings xmlns:local="clr-namespace:VMTest" x:Key="LocalizedStrings"/>
</Application.Resources 
```

3) 添加`DataContext="{StaticResource MainVM}"`到`MainPage.xaml`.

启动我的应用程序后，出现以下异常：

```
System.Windows.Markup.XamlParseException: Cannot create instance of type 'VMTest.TestVM' [Line: 11 Position: 29]
   at System.Windows.Application.LoadComponent(Object component, Uri resourceLocator)
   at VMTest.App.InitializeComponent()
   at VMTest.App..ctor() 
```

有人知道发生了什么吗？正如我所说，我可以在 WP7 中做同样的事情，而且效果很好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T18:23:59.930

不能在 XAML 中创建未明确标记为公共的对象的实例。

# android - Android：如果将 Activity 带回屏幕上，通知中的 PendingIntent 不会触发 onCreate()

> ID：15229054
> 
> 赞同：8
> 
> 时间：2013-03-05T16:27:51.963
> 
> 标签：android, android-intent, android-notifications, android-pendingintent

猜想我对 Intent Flags 有一些误解。我想做的是，我有一个无线电流应用程序，它有两个活动（PlayerApplication 和 SettingsScreen）。我有一个 Service.class 用于在后台运行的 Streaming，它也包含一个通知（您可以在通知覆盖菜单和 PlayerApplication 中停止/开始播放）。如果用户点击通知，PlayerApplicationActivity 应该返回屏幕。

一切正常，期待这种情况：用户打开 SettingsScreenActivity -> 打开 NotificationOverlayMenu -> 点击通知 -> PendingIntent 恢复到 PlayerApplicationActivity

现在，PlayerApplicationScreen 在那里，但我不能点击任何东西。我看到，如果我从通知恢复，我的 PlayerApplication 的 onCreate() 不会被触发。但布局看起来不错（也在 onCreate() 中膨胀）

我在 Service.class 中使用了以下 PendingIntent：

```
PendingIntent contentIntent = PendingIntent.getActivity(
      this.getApplicationContext(), //Service.class
      0, 
      new Intent(this,PlayerApplicationActivity.class)
             .setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP
                | Intent.FLAG_ACTIVITY_SINGLE_TOP),
      0); 
```

所以实际上 PendingIntent 应该将 Activity（如果已经运行）带回顶部。我是在使用错误的意图还是我错过了一点？

编辑：我在 Manifest.xml 中声明了 launchMode

```
android:launchMode="singleTask" 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T17:17:31.120

根据 android developer [site](http://developer.android.com/guide/components/tasks-and-back-stack.html)，在`FLAG_ACTIVITY_CLEAR_TOP`和`FLAG_ACTIVITY_SINGLE_TOP`启动模式下：`SingleTask`，如果您正在调用的活动实例已经在运行，那么它不会创建新实例，而是调用`onNewIntent()`方法。所以我认为你应该检查当 onCreate() 没有调用时你的活动正在运行的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T18:26:26.043

我刚刚弄清楚我做错了什么：

1.  出于我的目的，我使用了错误的启动模式。对的`singleTop`不是`singleTask`

2.  `<application-node>`我在而不是声明了launchMode`<activity-node>`

    ```
    //Manifest.xml
    <activity
        android:name="..."
        android:launchMode="singleTop" > 
    ```

# c# - 数组或对象的指针/引用句柄会影响其大小吗？

> ID：15229055
> 
> 赞同：4
> 
> 时间：2013-03-05T16:27:52.970
> 
> 标签：c#, c++, arrays, memory-management, size

我知道如果我有一个`int A[512]`引用 A 可以指向第一个元素的数组。在指针算术中，内存被引用为`A + index`.

但如果我没记错的话，指针/引用也占用了一个机器字的空间。假设一个 int 占用了一个机器字，那是否意味着上面数组的 512 个整数占用了 513 个字的空间呢？

C++ 或 C# 中的对象及其数据成员是否相同？

*更新*：哇你们真快。澄清一下，我感兴趣的是 C++ 和 C#在处理这个问题上的*不同之处*，以及我如何调整对象大小以适应缓存行（如果可能的话）。

*更新*：我已经意识到指针和数组之间的区别。我知道数组不是指针，并且我上面引用的指针算法仅在数组转换为指针后才有效。但是，我认为这种区别与整个问题无关。我对如何在 C++ 和 C# 中将数组和其他对象存储在内存中感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:52:27.843

您似乎对 C++ 中的数组和指针有误解。

### 数组

```
int A[512]; 
```

这个声明给你一个 512`int`的数组。没有其他的。没有指针，什么都没有。只是一个s数组`int`。数组的大小将为`512 * sizeof(int)`.

### 名字

该名称`A`指的是该数组。它不是指针类型。它是数组类型。它是一个名称，它指的是数组。名称只是编译时构造，用于告诉编译器您在谈论什么对象。名称在运行时不存在。

### 转换

*在某些情况下*可能会发生一种称为数组到指针转换的转换。转换采用数组类型的表达式（例如简单表达式`A`）并将其转换为指向其第一个元素的指针。也就是说，在某些情况下，表达式`A`（表示数组）可以转换为 an `int*`（指向数组中的第一个元素）。

### 指针

通过数组到指针的转换创建的指针在它所属的表达式的持续时间内存在。它只是在那些特定情况下出现的临时对象。

### 情况

数组到指针的转换是一种标准转换，可能发生的情况包括：

*   从数组转换为指针时。例如，`(int*)A`。

*   初始化指针类型的对象时，例如`int* = A;`.

*   每当引用数组的 glvalue 出现为需要纯右值的表达式的操作数时。

    当您为数组下标时会发生这种情况，例如 with `A[20]`。下标运算符需要指针类型的纯右值，因此`A`会进行数组到指针的转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T17:12:32.780

请注意，当您谈论将数据放入缓存行时，包含引用的变量和它所引用的实际数据不会位于附近。该引用最终将在寄存器中结束，但它可能最初作为另一个对象的一部分存储在内存中的其他位置，或者作为堆栈上的局部变量。数组内容本身在被操作时仍然可以放入缓存行中，而不管与“对象”相关的任何其他开销。如果您对它在 C# 中的工作方式感到好奇，Visual Studio 有一个反汇编器视图，它显示为您的代码生成的实际 x86 或 x64 程序集。

数组引用在 IL（中间语言）级别具有特殊的内置支持，因此您会发现加载/使用内存的方式与在 C++ 中使用数组基本相同。在引擎盖下，对数组的索引是完全相同的操作。您将开始注意到差异的地方是，如果您使用“foreach”对数组进行索引，或者当数组是对象类型数组时开始必须“取消装箱”引用。

请注意，当您在方法中本地实例化对象时，可能会出现 C++ 和 C# 之间的内存局部性差异。C++ 允许您在堆栈上实例化数组，这创建了一种特殊情况，其中数组内存实际上存储在靠近“引用”和其他局部变量的位置。在 C# 中，（托管）数组的内容将始终在堆上分配。

另一方面，当提到堆分配对象时，C# 有时可以比 C++ 具有更好的内存局部性，尤其是对于短期对象。这是由于 GC 按其“世代”（它们存在多长时间）存储对象的方式以及它所做的堆压缩。短期对象在不断增长的堆上快速分配；收集时，堆也被压缩，防止可能导致非压缩堆中的后续分配分散在内存中的“碎片”。

您可以在 C++ 中使用“对象池”技术（或通过避免频繁的小型短期对象）获得类似的内存局部性优势，但这需要一些额外的工作和设计。当然，这样做的代价是 GC 必须运行，线程劫持、提升生成、压缩和重新分配引用会在一些不可预测的时间导致可测量的开销。在实践中，开销很少成为问题，尤其是 Gen0 集合，它针对频繁分配的短期对象的使用模式进行了高度优化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T16:33:05.357

不，CLR 中的对象也*没有*映射到`C++`您所指的（我想象的）“简单”内存映射。请记住，您可以`CLR`使用反射对对象进行操作，这意味着*每个*对象都必须在其中包含附加信息（*清单*）。这已经添加了更多的内存，而不仅仅是对象的普通内容，还添加了一个用于在多线程环境中进行管理的*指针，并且您在对象的**预期*内存分配`locking`方面走得很远。*`CLR`*

 *还要记住，指针大小在位机`32`之间有所不同。`64`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T16:33:38.207

一个数组，`int A[512]`占用 512 * sizeof(int) （+ 编译器决定添加的任何填充 - 在这种特殊情况下，很可能没有填充）。

数组`A`可以转换为指向 int 的指针`A`并与 with 一起`A + index`使用的事实使用了这样一个事实，即在实现`A[index]`中几乎总是与`A + index`. 在这两种情况下都会发生到指针的转换，因为要到达`A[index]`，我们必须获取数组 A 的第一个地址，并添加`index`时间`sizeof(int)`- 无论您将其写成`A[index]`还是`A + index`没有任何区别。在这两种情况下，`A`都是指数组中的第一个地址，以及`index`其中的元素数。

这里没有使用额外的空间。

以上适用于 C 和 C++。

在 C# 和其他使用“托管内存”的语言中，跟踪每个变量需要额外的开销。这不会影响变量`A`本身的大小，但它当然必须存储在某个地方，因此每个变量，无论是单个整数还是非常大的数组，都会有一些开销，存储在某个地方，包括变量和某种“引用计数”（变量使用了多少个地方，以及是否可以删除）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T16:33:44.467

我认为您在 C++ 中混淆了数组和指针。

一个数组`int`就是这样，它是内存中的一个位置数组，每个位置都`sizeof(int)`可以存储 N-1 `int`s。

指针是一种可以指向内存位置的类型，并且占用内存中的 CPU 寄存器大小，因此在 32 位机器上，`sizeof(int*)`将是 32 位。

如果你想有一个指向你的数组的指针，你可以这样做：`int * ptr = &A[0];` 这指向数组中的第一个元素。现在您有了占用内存的指针（CPU 字大小），并且有了`int`s 数组。

当您将数组传递给 C 或 C++ 中的函数时，它*会衰减*为指向数组中第一个元素的指针。这并不是说指针是数组，而是说从数组到指针存在*衰减。*

在 C# 中，您的数组是一种引用类型，并且您没有指针，因此您不必担心它。它只占用数组的大小。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-05T16:38:33.940

关于**本机 C++**：

> 但是如果我没记错的话，指针/引用也占用了一个机器字的空间

引用不一定要占用内存空间。根据 C++11 标准的第 8.3.2/4 段：

> 未指定引用是否需要存储 (3.7)。

在这种情况下，您可以*使用* `A`like 指针，并且确实在必要时会*衰减*为指针（例如，将其作为参数传递给函数时），但类型`A`is `int[512]`， not `int*`：因此，`A`不是**指针**。例如，您不能这样做：

```
int A[512];
int B;
A = &B; 
```

不需要任何用于存储的内存位置`A`（即用于存储数组开始的内存地址），因此您的编译器很可能不会分配任何额外的内存字节来保存`A`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-05T17:30:47.350

我们这里有多个不同的例子，因为我们甚至有几种语言要讨论。

让我们从一个简单的例子开始，一个简单的 C++ 数组：

```
int array[512]; 
```

这里的内存分配会发生什么？在堆栈上为数组分配了 512 个字的内存。没有分配堆内存。没有任何类型的开销；没有指向数组的指针，什么都没有，只有 512 个内存字。

这是在 C++ 中创建数组的另一种方法：

```
int * array = new int[512]; 
```

这里我们在堆上创建一个数组。它将分配 512 个字的内存，而不会在堆上分配额外的内存。然后，一旦完成，该数组开始的地址将被放置在堆栈上的一个变量中，占用一个额外的内存字。如果您查看整个应用程序的总内存占用量，是的，它将是 513，但值得注意的是，一个在堆栈上，其余的在堆上（堆栈内存分配成本要低得多，并且不会导致碎片化，但如果你过度使用它或误用它，你会更容易用完。

现在进入 C#。在 C# 中，我们没有两种不同的语法，您所拥有的只是：

```
int[] array = new int[512]; 
```

这将在堆上创建一个新的数组对象。它将包含用于数组中数据的 512 个字的内存，以及用于数组对象开销的一些额外内存。它需要 4 个字节来保存数组的计数、一个同步对象以及一些我们不需要考虑的其他开销。该开销很小，并且不依赖于数组的大小。

还有一个指针（或“引用”，更适合在 C# 中使用）指向放置在堆栈上的该数组，这将占用一个内存字。与 C++ 一样，堆栈内存可以非常快速地分配/释放，并且不会产生内存碎片，因此在考虑程序的内存占用时，通常将其分开是有意义的。*

# ios - NSArray 排序纵横交错

> ID：15229057
> 
> 赞同：-4
> 
> 时间：2013-03-05T16:27:56.047
> 
> 标签：ios, objective-c, cocoa, nsarray

我有一个数组

> @["A","B","C","D","E","F","G"]

我想像下面这样交叉排序

> @["A","G","B","F","C","E","D"]

使最后一个项目每 2 次滑到前面。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T16:41:09.640

我看你什么都没试过。如果是因为您还没有找到任何算法，或者您想不出一个算法，那么这段代码可能会有所帮助：

```
@autoreleasepool
{
    BOOL tail= NO; // To know if you should remove from array's tail or head.
    NSMutableArray* array=[NSMutableArray arrayWithArray: @[@"A",@"B",@"C",@"D",@"E",@"F",@"G"] ]; // The unsorted array.
    // This will contain sorted objects:  
    NSMutableArray* sorted=[[NSMutableArray alloc]initWithCapacity: array.count];
    // The algorithm will end when array will be empty:  
    while(array.count)
    {
        NSUInteger index= tail? array.count-1:0; // I decide the index of the object
                                                 // to remove.
        // The removed object will be added to the sorted array, so that it will
        // contain the object on head, then on tail, then again on head, and so on...
        id object= array[index];
        [sorted addObject: object];
        [array removeObjectAtIndex: index];
        tail= !tail;
    }
    NSLog(@"%@",sorted);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T16:30:21.717

这可以这样做：

将数组分成两半。

对它们进行排序。

再次合并它们以形成您的结果。在这里您需要迭代替代方案，即 step+=2

**编辑：运行代码如下**

```
NSArray *array=@[@"A",@"B",@"C",@"D",@"E",@"F",@"G"];
NSArray *halfLeft=[array subarrayWithRange:NSMakeRange(0, array.count/2+1)];
NSMutableArray *halfRight=[NSMutableArray arrayWithArray:array];
[halfRight removeObjectsInArray:halfLeft];
NSMutableArray *finalAray=[[NSMutableArray alloc]initWithArray:halfLeft];
for (NSInteger i=0, index=1; i<halfRight.count; i++, index+=2) {
    [finalAray insertObject:halfRight[halfRight.count-1-i] atIndex:index];
}
NSLog(@"%@",finalAray); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T17:15:14.497

您可以使用一个简单的循环来完成，将对象添加到输出数组中；

```
NSArray *input = @[@"A",@"B",@"C",@"D",@"E",@"F",@"G",@"H"];
NSMutableArray *output = [[NSMutableArray alloc] init];

// Quickly add all except possibly the middle one, makes the loop simple
for(int i=0; i<input.count/2; i++)
{
    [output addObject:input[i]];
    [output addObject:input[input.count-i-1]];
}

// If there is an odd number of items, just add the last one separately
if(input.count%2) 
    [output addObject:input[input.count/2]]; 
```

# c# - 在 BuildManager 中创建后释放 DLL

> ID：15229058
> 
> 赞同：1
> 
> 时间：2013-03-05T16:27:56.033
> 
> 标签：c#, .net, dll, build, msbuild

我编写了一个 C# WPF 应用程序来在运行时编译代码。该应用程序基本上执行以下步骤

1.  点击按钮[编译东西]
2.  通过创建代码文件`StreamWriter`
3.  `Microsoft.Build.Execution.BuildManager`使用类构建代码文件
4.  使用反射访问 DLL 文件 ( `Assembly.LoadFrom(filePath)`)
5.  创建包含在 dll ( `assembly.CreateInstance(NamespaceName + "." + ClassName)`)中的类的实例

**我工作正常，但只有一次**（我需要重新启动应用程序才能再次这样做）

这是下一次执行期间发生的情况

1.  点击按钮[编译东西]
2.  通过创建代码文件`StreamWriter`
3.  使用类构建代码文件`Microsoft.Build.Execution.BuildManager`-> 产生一个错误，指出 DLL 文件已被锁定。

> 该进程无法访问文件“DLL\generatedflexform.dll”，因为它正被另一个进程使用

当我省略第 2 步时，问题不会发生，因为那时代码文件是相同的。因此`BuildManager`不会重新创建/复制 dll。

我需要弄清楚在`BuildManager`完成他的工作后如何释放 DLL。这是因为代码文件可能会经常更改，否则我必须为每次代码更改关闭并重新打开应用程序。

编辑：我的第一个想法是 BuildManager 导致锁定，但事实并非如此。我宁愿认为当我尝试加载 DLL 时会发生锁定。我将尝试影子副本的想法（如@granadaCoder 所述）。

```
private Window LoadWindowFromDll(string filePathToDll)
{
    var assembly = Assembly.LoadFrom(filePathToDll);
    var window = assembly.CreateInstance(NamespaceName + "." + ClassName) as Window;
    return window;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:12:07.880

**解决方案：**

我不得不更改`LoadWindowFromDllmethod`以避免 DLL 锁定

```
private Window LoadWindowFromDll(string filePathToDll)
{
    byte[] readAllBytes = File.ReadAllBytes(filePathToDll);
    Assembly assembly = Assembly.Load(readAllBytes);

    var window = assembly.CreateInstance(NamespaceName + "." + ClassName) as Window;

    return window;
} 
```

但是不知何故，pdb 文件被锁定了，当我尝试执行它两次时，导致构建失败。

我通过在构建文件中添加一行来解决此问题：

```
<DebugType>none</DebugType> 
```

这是完整的构建文件：

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <Import Project="$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props" Condition="Exists('$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props')" />
  <PropertyGroup>
    <AssemblyName>generatedflexform</AssemblyName>
    <OutputPath>DLL\</OutputPath>
    <OutputType>Library</OutputType>
    <DebugType>none</DebugType>
  </PropertyGroup>
  <ItemGroup>
    <Reference Include="System" />
    <Reference Include="System.Data" />
    <Reference Include="System.Xml" />
    <Reference Include="Microsoft.CSharp" />
    <Reference Include="System.Core" />
    <Reference Include="System.Xml.Linq" />
    <Reference Include="System.Data.DataSetExtensions" />
    <Reference Include="System.Xaml">
      <RequiredTargetFramework>4.0</RequiredTargetFramework>
    </Reference>
    <Reference Include="WindowsBase" />
    <Reference Include="PresentationCore" />
    <Reference Include="PresentationFramework" />
  </ItemGroup>
  <ItemGroup>
    <Page Include="MyForm.xaml">
      <Generator>MSBuild:Compile</Generator>
      <SubType>Designer</SubType>
    </Page>
    <Compile Include="MyForm.xaml.cs">
      <DependentUpon>MyForm.xaml</DependentUpon>
      <SubType>Code</SubType>
    </Compile>
  </ItemGroup>
  <Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />
</Project> 
```

这是执行编译魔法的方法> public Window BuildXamlWindowFromStrings(string xaml, string codeBehind) { //Erstellen der Codefiles (XAML und CodeBehind) this.CreateCodeFile(codeBehind); this.CreateXamlFile(xaml);

```
 //Erstellen der project file
        this.CreateProjectFile();

        //Build der DLL
        //using (var buildManager = BuildManager.DefaultBuildManager)
        using (var buildManager = new BuildManager())
        {
            var result = buildManager.Build(this.CreateBuildParameters(), this.CreateBuildRequest());

            if (result.OverallResult == BuildResultCode.Success)
            {
                return this.LoadWindowFromDll(FolderPath + DllRelativeFilePath + NamespaceName + DllFileExtension);
            }
        }

        //Error handling
        var stringbuilder = new StringBuilder();

        using (var reader = new StreamReader(DebuggerLogFileName))
        {
            stringbuilder.Append(reader.ReadToEnd());
        }

        throw new CompilerException(stringbuilder.ToString());
    } 
```

辅助方法：

```
private BuildParameters CreateBuildParameters()
{
    var projectCollection = new ProjectCollection();
    var buildLogger = new FileLogger { Verbosity = LoggerVerbosity.Detailed, Parameters = "logfile=" + DebuggerLogFileName };
    var buildParameters = new BuildParameters(projectCollection) { Loggers = new List<ILogger>() { buildLogger } };
    return buildParameters;
}

private BuildRequestData CreateBuildRequest()
{
    var globalProperties = new Dictionary<string, string>();
    var buildRequest = new BuildRequestData(FolderPath + ProjectFileName, globalProperties, null,
                                            new string[] { "Build" }, null, BuildRequestDataFlags.ReplaceExistingProjectInstance);
    return buildRequest;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:27:08.320

查看“影子复制”。

卷影复制允许在不卸载应用程序域的情况下更新应用程序域中使用的程序集。这对于必须连续可用的应用程序特别有用。

[http://msdn.microsoft.com/en-us/library/ms404279.aspx](http://msdn.microsoft.com/en-us/library/ms404279.aspx)

也可以看看：

[http://gotchahunter.net/2010/12/net-how-do-you-load-an-assembly-programmatically-and-avoid-a-file-lock/](http://gotchahunter.net/2010/12/net-how-do-you-load-an-assembly-programmatically-and-avoid-a-file-lock/)

和

[http://blogs.msdn.com/b/junfeng/archive/2004/02/09/69919.aspx](http://blogs.msdn.com/b/junfeng/archive/2004/02/09/69919.aspx)

# sharepoint - SharePoint：如何获取文档的 Internet 媒体类型？

> ID：15229062
> 
> 赞同：1
> 
> 时间：2013-03-05T16:28:23.597
> 
> 标签：sharepoint, soap, mime-types

如何使用 SharePoint Web 服务获取文档的[Internet 媒体类型？](http://en.wikipedia.org/wiki/Internet_media_type "网络媒体类型")我使用 SOAP 访问该服务。我已经尝试过[Content Types](http://msdn.microsoft.com/en-us/library/ms479905%28v=office.14%29.aspx)文档，但它与 Conten-type/Internet media-type/MIME 不同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T08:42:54.397

SharePoint 不知道 MIME 类型。至少它不知道每个文件的基础。

查看[`SPFile`](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spfile_members.aspx)哪个代表 SharePoint 中的文件。您可能得到的最接近的是[`SPFile.ProgID`](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spfile.progid.aspx)：*“获取一个字符串，该字符串标识创建文件的应用程序。”* ，但这不对应于 MIME 类型，也不是总是填充的。

MIME 类型实际上是由**IIS Web 服务器**分配的，如您在此说明中所见：

*   [在 SharePoint 中添加新文件类型](http://kerseub.wordpress.com/2012/04/23/add-new-file-type-in-sharepoint/)

![在此处输入图像描述](../Images/6dc33dd836c8a61b5305a94b4c073f30.png)

因此，您将无法通过查询 SOAP Web 服务来获取 mime 类型。您唯一的机会是下载相关文件并检查您应该在其中找到IIS 分配的**HTTP 标头。**`Content-Type`

您将无法按内容类型或类似内容进行查询，您必须为此使用文件扩展名（例如 xlsx、docx） - IIS 没有什么不同，它通过文件扩展名分配 MIME 类型。因此，与其尝试获取 mime 类型，不如仅获取文件扩展名并从那里扣除 mime 类型。

最后：SharePoint 内容类型是 SharePoint 内部构造。它代表 SharePoint 中不同类型的内容，并不总是与可下载文档相关。它与 mime 类型无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-26T14:09:37.017

如果是服务器端代码，您可以使用： `SPUtility.GetMimeTypeFromExtension(".pdf")`

# mvvm - 使用 MVVM 编辑 Kendo UI Grid 弹出窗口

> ID：15229065
> 
> 赞同：1
> 
> 时间：2013-03-05T16:28:33.880
> 
> 标签：mvvm, binding, kendo-ui, kendo-grid

我正在使用 Kendo UI Grid，并且已将其配置为使用带有自定义模板的弹出编辑

```
 <script id="popup_editor" type="text/x-kendo-template">
    <div id="editor">
            <div class="k-edit-label">
                <label for="Type">Type</label>
            </div>

    <select data-role="dropdownlist" data-value-field="Type" data-text-field="Type"
                         data-bind="source: typeSource, value: selectedProduct"></select>

<div class="k-edit-label">
                <label for="Type">Option</label>
            </div>

<select data-role="dropdownlist" data-value-field="Option" data-text-field="Option"
                         data-bind="source: productsSource.Options, value: selectedOption"></select>
            </div>

</script> 
```

这是我的视图模型：

```
 function ViewModel() {
        var getTypesUrl = "/Controller/Action";

        var viewModel = kendo.observable({
            typeSource: new kendo.data.DataSource({
                transport: {
                    read: {
                        url: getConditionTypesUrl,
                        dataType: "json"
                    },
                },
                batch: true,
                schema: {
                    model: {
                        id: "Type"
                    }
                }
            }),
            selectedType: null,
            selectedOption: null
        });

        kendo.bind($("#editor"), viewModel);
    }

ViewModel(); 
```

我的操作返回 JSON。

问题是当我点击“**添加新记录**”按钮时，没有调用`getTypesUrl`并且下拉列表没有填充。一般的想法是为不同的类型提供不同的选项，并根据所选类型填充选项下拉列表。我相信，之所以会出现问题，是因为仅在单击按钮时才显示编辑器并且剑道无法创建绑定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T02:53:20.643

如果每一行的下拉列表都相同，则从数据源获取其值并将这些值存储在 JavaScript 页面中的变量中，并将下拉列表指向这个新数据源。使用一些 JavaScript 来关联 id 和 name。

或者，如果这是基于其他逻辑加载的，则实现单独的调用以填充视图模型中下拉列表的数据源。

[http://www.aspnetwiki.com/page:introduction-to-kendo-mvvm](http://www.aspnetwiki.com/page:introduction-to-kendo-mvvm)

[http://www.aspnetwiki.com/page:kendo-mvvm-ui-grid](http://www.aspnetwiki.com/page:kendo-mvvm-ui-grid)

进一步注意，您可以纯粹用 JavaScript 编写模板并将其绑定到 html，这样做的好处是您可以调试它，并且以后仍然可以通过 ajax 调用加载它，而且它可能会更小。

# node.js - Geddy - 创建新项目

> ID：15229067
> 
> 赞同：1
> 
> 时间：2013-03-05T16:28:34.927
> 
> 标签：node.js, geddy

我是 node.js 和 geddy 的绝对初学者。我已经学习了一些教程，现在我尝试为我的目的编写类似的东西。

但是，当我尝试创建新项目时，我收到以下消息：

```
/arithmetic_problem_types/function%20(id)%20%7B%20%20%20%20%20%20options.id%20=%20id;%20%20%20%20%20%20return%20helpersBase.urlFor.action(options);%20%20%20%20%7D not found. 
```

我不知道这可能来自哪里。我查看了代码并没有发现任何东西。

控制器：

```
var ArithmeticProblemTypes = function () {
  this.respondsWith =[ 'html', 'json', 'xml', 'js', 'txt'];

  this.index = function (req, resp, params) {
    var self = this;

    geddy.model.ArithmeticProblemType.all(function (err, arithmetic_problem_types) {
        self.respond({
            params: params, arithmetic_problem_types: arithmetic_problem_types
        });
    });
  };

  this.add = function (req, resp, params) {
    this.respond({
        params: params
    });
  };

  this.create = function (req, resp, params) {
    var self = this, arithmetic_problem_type = geddy.model.ArithmeticProblemType.create({
        name: '1', title: 'open', numberType: '1', numberRanges: '1', operators: '1', askedFor: '1', specialProblemCategory: '1', askedForNumDenomOrBoth: '1',
            reducedFractions:'1', mixedFractions: '1'
    });

    arithmetic_problem_type.save(function (err, data) {
        if (err) {
            params.errors = err;
            self.transfer('add');
        } else {
            self.redirect({
                controller: self.name
            });
        }
    });
  };
....................................................................
};

exports.ArithmeticProblemTypes = ArithmeticProblemTypes; 
```

添加.html.ejs

```
<div class="hero-unit">
  <%= partial('_form', {params: params}); %>
</div> 
```

index.html.ejs

```
<div class="hero-unit">
  <h2>Arithmetic Problem Types List</h2>
  <%- linkTo('Create a new Aritmetic Problem Type', addArithmeticProblemTypePath, {class: 'btn pull-right'}) %>
</div>
<% if (arithmetic_problem_types && arithmetic_problem_types.length) { %>
  <% for (var i in arithmetic_problem_types) { %>
  <div class="row todo-item">
    <div class="span8">
      <h3><%- linkTo(arithmetic_problem_types[i].title, arithmeticProblemTypePath(arithmetic_problem_types[i].id)) %></h3>
    </div>
    <div class="span4"><h3><i class="icon-list-alt"></i><%= arithmetic_problem_types[i].status; %></h3></div>
  </div>
 <% } %>
<% } %> 
```

我怎样才能摆脱该消息并使其发挥作用？

**编辑：** 这是 _form.html.ejs 文件的开头：

```
<%
  var isUpdate = params.action == 'edit'
, formTitle = isUpdate ? 'Update this Arithmetic Problem Type' : 'Create a new Arithmetic Problem Type'
, action = isUpdate ? arithmeticProblemTypePath(params.id) + '?_method=PUT' : arithmeticProblemTypePath
, deleteAction = isUpdate ? arithmeticProblemTypePath(params.id) + '?_method=DELETE' : ''
, btnText = isUpdate ? 'Update' : 'Add'
, nameValue = isUpdate ? arithmeticProblemTypePath.name : ''
, errors = params.errors;
%>
<form id="arithmetic-problem-type-form" class="form-horizontal" action="<%= action %>" method="POST">
     ....
</form> 
```

**EDIT2：** 检查我应该写项目名称并单击添加按钮的页面，我发现了这个

```
<div class="hero-unit">

  <form id="arithmetic-problem-type-form" class="form-horizontal" action="function (id) {
      options.id = id;
      return helpersBase.urlFor.action(options);
    }" method="POST">
  <fieldset>
    <legend>Create a new Arithmetic Problem Type</legend>
    <div class="control-group">
      <label for="title" class="control-label">Title</label>
      <div class="controls">
        <input class="span6" name="name" placeholder="enter name" type="text">

      </div>
    </div>

    <div class="form-actions">
      <input class="btn btn-primary" type="submit" value="Add">

    </div>
  </fieldset>
</form>
</div> 
```

确实消息来自表单元素的动作属性，但我该如何解决呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:56:38.370

该消息告诉您找不到请求的 URL。又名 404

`/arithmetic_problem_types/function%20(id)%20%7B%20%20%20%20%20%20options.id%20=%20id;%20%20%20%20%20%20return%20helpersBase.urlFor.action(options);%20%20%20%20%7D`

绝对不是一个好看的网址。所以我假设你的表单`action`属性有问题。如果这就是您验证表单时发生的情况。

如果这是当您单击“创建新的算术问题类型”链接时发生的情况，那么您可能应该在后面加上括号`addArithmeticProblemTypePath`

# c# - 在超时/无连接时优雅地中止 WebRequest

> ID：15229068
> 
> 赞同：1
> 
> 时间：2013-03-05T16:28:41.017
> 
> 标签：c#, mono, xamarin.android, webrequest

我正在使用 Android 模拟器使用 MonoDevelop/C# 测试为 Android（以及后来的 iphone）开发应用程序。

我有一个 WebRequest，我想在它超时（或没有网络连接）时得到一个回调。起初，如果互联网连接中断，我没有超时或回调。以下是我尝试解决的方法：

```
private void setupTimeOut (IAsyncResult result, RequestState state)
{
    ThreadPool.RegisterWaitForSingleObject (
        result.AsyncWaitHandle,
        new WaitOrTimerCallback (ScanTimeoutCallback),
        state,
        (5 * 1000),  // 5 second timeout
        true
    );
} 
```

正确地， ScanTimeoutCallback 在 5 秒后被调用（当我拔掉互联网时）。但是 ScanTimeout 确实抛出了这个异常：

```
UNHANDLED EXCEPTION: System.Net.WebException: Aborted.
at System.Net.HttpWebRequest.EndGetResponse (System.IAsyncResult) <0x00160>
at MyApp.ServerService.extractResponseAndCallDelegateOnError  
  (System.Net.WebRequest,System.IAsyncResult) <0x0003b> 
```

ScanTimeoutCallback 的代码：

```
private static void ScanTimeoutCallback (object state, bool timedOut)
{ 
    if (timedOut)
    {
        Console.Out.WriteLine ("timedOut");
        RequestState reqState = (RequestState)state;
        if (reqState != null)
        {
            reqState.Request.Abort ();
            //Call my UI callback
        }
    }
} 
```

BeginGetResponse：

```
IAsyncResult result = request.BeginGetResponse (o => {
context.Post (_ => {
    onLogin (o); }, null);
}, state);

setupTimeOut (result, state); 
```

EndGetResponse：

```
using (HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(result) as HttpWebResponse)
    { ... } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T17:42:08.960

异常不是由超时引发的，而是由`EndGetResponse`处理程序引发的。

您需要在处理程序中处理异常：

```
try
{
    using (HttpWebResponse response ...)
    {
       ...
    }
}
catch (System.Net.WebException)
{
    // handle the exception here
} 
```

# c# - 无法加载 C:\Windows\TEMP\Sybase.AdoNet4.AseClient.32bits.4.157.501.0\sbgse2.dll

> ID：15229069
> 
> 赞同：1
> 
> 时间：2013-03-05T16:28:41.803
> 
> 标签：c#, .net, sap-ase

我在使用 Sybase 驱动程序时遇到了问题。当 Sybase 尝试创建连接时，我得到以下信息。

```
[AseException: Could not load C:\Windows\TEMP\Sybase.AdoNet4.AseClient.32bits.4.157.501.0\sbgse2.dll]
   Sybase.Data.AseClient1.AseConnection.SaveAndLoadLibrary(String dirName, String dllName, Int32 bits) +419
   Sybase.Data.AseClient1.AseConnection.LoadLibraries() +243
   Sybase.Data.AseClient1.AseConnection..cctor() +5

[TypeInitializationException: The type initializer for 'Sybase.Data.AseClient1.AseConnection' threw an exception.]
   Sybase.Data.AseClient1.AseConnection..ctor(AseConnection realConnection) +0
   Sybase.Data.AseClient.AseConnection..ctor() +27 
```

我看到 Sybase 将一些非托管代码编译为嵌入式资源，然后在运行时如果这些文件不在 temp 目录中，它会将它们复制到那里。

就我而言，我看到这些文件确实存在。我什至可以删除它们并看到它们在运行时被复制回来。

我现在很困惑为什么它们不能被加载。

这台机器曾经运行.net 4.5。它被卸载并重新安装了 .net 4.0。不确定这与它有什么关系。

这里是sybase驱动中的相关代码

```
 private static void LoadLibraries()
   {
     int bits = IntPtr.Size * 8;
     string str = Path.Combine(Path.GetTempPath(),    Assembly.GetExecutingAssembly().GetName().Name + "." + bits.ToString() + "bits." +    ((object) Assembly.GetExecutingAssembly().GetName().Version).ToString());
     if (!Directory.Exists(str))
       Directory.CreateDirectory(str);
       Sybase.Data.AseClient1.AseConnection.SaveAndLoadLibrary(str, "sbgse2.dll",   bits);
     Sybase.Data.AseClient1.AseConnection.SaveAndLoadLibrary(str, "sybdrvado20.dll", bits);
   }

   private static void SaveAndLoadLibrary(string dirName, string dllName, int bits)
   {
     string str = Path.Combine(dirName, dllName);
     if (!File.Exists(str))
     {
       using (Stream manifestResourceStream =    Assembly.GetExecutingAssembly().GetManifestResourceStream("Sybase.Data.AseClient.Resources._" + bits.ToString() + "bits." + dllName))
       {
         try
         {
           using (Stream stream = (Stream) File.Create(str))
           {
             byte[] buffer = new byte[4096];
             while (true)
             {
               int count = manifestResourceStream.Read(buffer, 0, 4096);
               if (count >= 1)
                 stream.Write(buffer, 0, count);
               else
                 break;
             }
             stream.Close();
           }
         }
         catch
         {
         }
       }
     }
     if (Sybase.Data.AseClient1.AseConnection.LoadLibrary(str) == IntPtr.Zero)
       throw new AseException("Could not load " + str);
  }

   [DllImport("kernel32.dll")]
   public static IntPtr LoadLibrary(string dllToLoad); 
```

有什么想法或想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:40:27.073

似乎（出于某种原因）复制到 c:\windows\temp 的文件从初始化此代码的 AppPool 获得了特殊权限，导致其他应用程序池无法读取该文件。为此，我预计会出现 Access Denied 类型异常。

充其量它仍然有点神奇和挥手，但是从文件中删除应用程序池的特殊权限，删除临时目录并重新启动使出错的应用程序（在不同的应用程序池中）不会引发此异常。特殊权限也没有重新出现在临时文件上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T12:32:06.190

由于所有应用程序池身份都必须在 IIS 工作进程组中，因此解决方案是为 IIS 组授予对**C:\Windows\TEMP**文件夹的***修改***权限：

 ***   *****IIS 6***的**IIS_WPG****
****   *****IIS 7***的**IIS_IUSRS*******

 ******权限将被正确继承（在 Windows Server 2008 和 IIS 7 上验证）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-30T12:15:20.640

最终对我有用的是将应用程序池分配给相同的身份。

1.  停止两个应用程序池
2.  删除目录“Wi​​ndows\temp\Sybase.AdoNet4.AseClient.32bits.4.157.1000.0
3.  将身份网络服务分配给两个应用程序池
4.  启动两个应用程序池。
5.  一切都应该工作。

6.  执行步骤 1 和 2。

7.  通过转到“控制面板 > 管理工具 > 计算机管理 > 本地用户和组 > 用户”创建自定义标识
8.  右键单击并选择“新用户...”
9.  添加新的用户名和密码
10.  单击创建按钮并关闭对话框
11.  在 IIS 中，选择第一个应用程序池 > 高级设置
12.  单击身份字段>单击...按钮
13.  选择自定义账户，点击设置...按钮
14.  输入新的用户帐户信息，单击确定
15.  单击确定关闭应用程序池标识对话框
16.  单击确定关闭高级设置。
17.  对第二个应用程序池重复步骤 11-16
18.  执行第 4 步。

最后一点，在 web.config 中，您可能需要在 system.serviceModel 部分的标签 serviceHostingEnvironment 中指定 multipleSiteBindingsEnabled="true"。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-26T10:57:05.000

尝试将 AppPool 上的标识从 ApplicationPoolIdentity 更改为 LocalSystem。********

# java - Java 克隆继承示例

> ID：15229077
> 
> 赞同：3
> 
> 时间：2013-03-05T16:29:05.860
> 
> 标签：java

这个克隆示例让我感到困惑。我不明白前两个输出如何是：111 和 222 而不是：222 和 222。这不是“a2 = (A) a1.clone();”吗？行意味着 a2 变得与 a1 相同？

代码：

```
public class Main {

    public static void main(String[] args) {
    A a1 = new A();
    A a2;
    B b1 = new B();
    B b2;

    a2 = (A) a1.clone();
    a2.setI(222);

    // Why the different output?
    System.out.println("a1 = " + a1 + " a1.i " + a1.getI()); // i = 111
    System.out.println("a2 = " + a2 + " a2.i " + a2.getI()); // i = 222

    b2 = (B) b1.clone();

    b2.setI(888); 
    b2.setJ(999); 

    System.out.println("b1 = " + b1 + " b1.i " + b1.getI() + " b1.j " +      b1.getJ());
    System.out.println("b2 = " + b2 + " b2.i " + b2.getI() + " b2.j " + b2.getJ()); 
}
}

public class A implements Cloneable {
    private int i = 111;
    @Override
    public Object clone() {
        try {
            A a = (A) super.clone();
            return a;
        } catch (CloneNotSupportedException e) {
            throw new InternalError();
        }
    }
    public int getI() {
        return i;
    }

    public void setI(int i) {
        this.i = i;
        }
    }

    public class B extends A {
    private int j = 222;

    @Override
    public Object clone() {  
        Object o = super.clone();               
        B b = (B) o;
        return b;
    }

    public int getJ() {
        return j;
    }

    public void setJ(int j) {
        this.j = j;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T16:31:19.197

这些值在`clone()`操作中被复制，但最终得到 2 个不同的对象，只是它们具有相同的值。

```
a2 = (A) a1.clone() 
```

创建一个新对象，完全独立于 a1。但是 a1 的内部状态已经复制到 a2 中。因此，更改 a2 对 a1 没有影响（如果克隆正确！）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T16:33:34.260

不，它们不再指向同一个对象，因此值的变化`a2`不会影响`a1`对象。这就是`clone()`您获得对象的相同但不同副本的概念。

当你这样做时

```
a1=(A)a2.clone(); 
```

你得到一个全新的对象，独立于从中复制它的对象。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T16:38:09.743

克隆只制作对象的“浅”副本，这意味着复制原始值和对象引用。你想要的（我假设）是一个“深层”副本，其中引用的对象本身被克隆。一些最流行的方法来做到这一点：

*   [Java 深度克隆库](https://code.google.com/p/cloning/)
*   序列化对象，然后反序列化它（警告：这很慢！）
*   `clone()`在所有引用对象中实现，并`clone()`在引用对象的`clone()`方法中调用这些对象。您也可以以类似的方式使用复制构造函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T16:41:39.780

从文档中，[`Object.clone`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#clone%28%29)：

> 创建并返回此对象的副本。“复制”的确切含义可能取决于对象的类别。一般意图是，对于任何对象 x，表达式：

`x.clone() != x`

> 将是真的。

继续同一个文档：

> 此方法创建此对象的类的新实例，并使用此对象的相应字段的内容来初始化其所有字段，就像通过赋值一样；字段的内容本身不会被克隆。因此，此方法执行此对象的“浅拷贝”，而不是“深拷贝”操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-08T05:16:02.333

在您提供的代码中，步骤顺序如下所示。

1.  克隆`A`具有`i`值的对象，`111`以便创建具有相同值的克隆对象 ie `111`。
2.  Then you changed the value of `i` to `222` for the original object so the value of cloned object is not updated as in cloning for primitive types new instances with same value (when the object is cloned) is created.

# jquery - 将身份证号码添加到背景图像

> ID：15229079
> 
> 赞同：0
> 
> 时间：2013-03-05T16:29:06.877
> 
> 标签：jquery

我有以下内容，我希望根据其 id 更改 div 的背景图像。

到目前为止，我有这个。

```
jQuery(document).ready(function() {
    $('.allText').hide();

$('#b1,#b2,#b3,#b4,#b5,#b6,#b7').click(function() {
    $('.allText').hide();
    $('#text'+this.id.substr(-1)).fadeIn(800);
    $('#b'+this.id.substr(-1)).css('background-image', 'url('site_images/05/over_'+'this.id.substr(-1)'+'.png'')')

});
}); 
```

这一切似乎除了

```
.css('background-image', 'url('site_images/05/over_'+'this.id.substr(-1)'+'.png'')') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T16:30:24.987

You have quote problems.

```
$('#b'+this.id.substr(-1)).css(
    'background-image', 'url("site_images/05/over_'+this.id.substr(-1)+'.png")'
); 
```

Note that keeping it simpler helps :

```
var num = this.id.substr(-1);
$('#b'+num).css(
    'background-image', 'url("site_images/05/over_'+num+'.png")'
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T16:32:28.167

引号：

```
'url("site_images/05/over_'+this.id.substr(-1)+'.png")' 
```

# mysql - MYSQL ODBC 将服务器名称添加到用户名

> ID：15229080
> 
> 赞同：1
> 
> 时间：2013-03-05T16:29:13.880
> 
> 标签：mysql, odbc

尝试创建从服务器到 MySQL 服务器的 ODBC 连接。在我要连接的服务器上安装 5.1 ODBC 驱动程序。当我去测试连接时——MySql 服务器拒绝访问用户——然后它会列出用户名并`"@servername.domain.com"`附加一个。为什么要附加 ODBC？很明显，我们正在连接到 MySQL 服务器。两个服务器都在防火墙后面的同一个域中。MySQL服务器上有什么需要配置的吗？

# ipython - 从 Git 安装错误 python setupegg.py develop

> ID：15229081
> 
> 赞同：1
> 
> 时间：2013-03-05T16:29:14.700
> 
> 标签：ipython

我想为 Python3.2x 安装 ipython 的 dev v.

我的环境

*   /usr/bin/python3.2
*   Python 3.2.3
*   Linux Mint 13 64 位
*   git 版本 1.7.9.5

我希望能够使用以下方式提取开发版本： git pull

如 [http://ipython.org/ipython-doc/stable/install/install.html中所述](http://ipython.org/ipython-doc/stable/install/install.html)

但是`python3.2 setupegg.py`作为普通用户开发会引发错误

```
/usr/local/src/ipython $ python3.2 setupegg.py develop
Traceback (most recent call last):
  File "setupegg.py", line 6, in <module>
    execfile('setup.py')
NameError: name 'execfile' is not defined 
```

和 sudo

```
/usr/local/src/ipython $ sudo python3.2 setupegg.py develop
Traceback (most recent call last):
  File "setupegg.py", line 6, in <module>
    execfile('setup.py')
NameError: name 'execfile' is not defined 
```

解决方法是什么？指示是否准确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:08:18.073

IPython 不能作为鸡蛋安装在 python 3+ 中。用于`setup.py`安装。

# internet-explorer - joomla 多语言网站重定向到 http:/// 仅在 IE 中

> ID：15229084
> 
> 赞同：-1
> 
> 时间：2013-03-05T16:29:19.390
> 
> 标签：internet-explorer, joomla2.5, multilingual

我用 joomla 2.5 做了一个网站，它是多语言的（原生功能）

它适用于所有浏览器和移动设备。但在 IE 上，只有网站重定向到地址栏显示 http 的空白页面：///

没有别的，没有错误，没有。只是那个重定向。

关于从 www.mydomain.com 重定向到 www.mydomain.com/it 和 www.mydomain.com/en 的问题

这只发生在主页上

所有其他页面都正常工作（例如：www.mydomain.com/en/hello 等）

我正在使用标准的 joomla 多语言功能

任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T11:49:29.060

我怀疑问题出在你从 root 重定向的方式上——> root/welcome。你能发布你是如何做到这一点的细节吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T22:40:12.277

我找到了解决方案，我想与大家分享

系统 - 语言过滤器在切换到默认语言时仅在家庭中导致错误。

示例：从域名到域名/en

只需将“删除默认前缀”设置为“是”（在插件选项中），主页就会正常工作！

# c# - How to access nested array properties with strongly typed query builders in mongodb

> ID：15229089
> 
> 赞同：1
> 
> 时间：2013-03-05T16:29:31.137
> 
> 标签：c#, mongodb, mongodb-.net-driver

Trying to figure out how to access nested array properties when using the strongly typed query builders for mongodb in c#. Lets say I have the following classes:

```
public class V {
    public Guid _id { get; set; }
    public List<S> S { get; set; }
}

public class S {
    public Guid I { get; set;}
    /* other fields */
} 
```

V is the document type. I want to build a query like this:

```
var id = Guid.NewGuid();
var query = Query<V>.EQ(v => v.S.I, id); 
```

However that doesn't compile because the S property on V is a List. The resulting mongo query that I would look like to see is this (actual guid syntax is not correct, but the left side is the important part:

```
{ "S.I": "99ebc751-c12a-4873-8c3f-cb510b26a082" } 
```

How do I do this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:43:29.760

您需要按照 Nuk Nuk 在对您的问题的评论中提到的那样进行操作。或者，您可以使用 ElemMatch (docs.mongodb.org/manual/reference/operator/elemMatch)，这可能更合适。

如果您对我们如何使用类型化语法支持这一点有任何建议，请提供一些反馈。出于同样的原因，我们正在努力解决如何支持位置 ($) 更新运算符。

# javascript - d3 append an image with svg extension

> ID：15229094
> 
> 赞同：15
> 
> 时间：2013-03-05T16:29:39.657
> 
> 标签：javascript, image, svg, d3.js, xlink

I'm trying to add an svg image with '.svg' extension to my chart (another svg image created with d3).

This is the code:

```
d3.select("#chart1 svg")
  .append("svg:image")
  .attr("xlink:href", "img/icons/sun.svg")
  .attr("width", 40)
  .attr("height", 40)
  .attr("x", 228)
  .attr("y",53); 
```

As you can see I'm setting "xlink:href" attribute, but d3 changes this to href in the browser:

```
<image href="img/icons/sun.svg" width="40" height="40" x="228" y="53"></image> 
```

In fact, this code works perfectly if I use png extension. Any idea?

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-10-22T09:20:10.990

代码应该按原样工作 - 在这里您可以看到将 .svg 文件附加到 d3 的示例：

[http://jsfiddle.net/am8ZB/](http://jsfiddle.net/am8ZB/)

不要忘记图片可能确实存在但您看不到它 - 您应该使用浏览器开发人员工具检查页面以查看图片是否已放置在视图区域之外（由于您的 x/ y 值，例如）。

`#chart1`在这种情况下，更多信息会有所帮助。

# eclipse - Is there a way to create templates for text files in Eclipse?

> ID：15229095
> 
> 赞同：3
> 
> 时间：2013-03-05T16:29:43.200
> 
> 标签：eclipse, text-files

In Eclipse, I really enjoy being able to create templates for things I commonly write in Java and XML. While there is some room for improvement, templates have proven to be quite the time saver. Today I was documenting some notes in the release notes. We have a specific format that we write said release notes in. I thought it would be handy to write a small template so that I could easily insert most of the boiler plate text when I amend the notes. So I dug around the eclipse settings and didn't see anything for plain text files. I googled around and also didn't see anything.

So is what I'm wanting to do possible in Eclipse? Is there a plugin I would need to enable such a feature?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T16:35:25.513

我假设你能得到的最接近的是使用*Snippets*

通过单击`Window`-> `Show View`->添加视图`Snippets`。在该视图中，右键单击并选择`Customize`以创建自定义片段。您现在可以通过双击将这些片段添加到您的文本文件中。
也许还有一些我还没有找到的快捷方式功能......

# routes - Rails 4 路线中的约束范围

> ID：15229099
> 
> 赞同：2
> 
> 时间：2013-03-05T16:29:46.093
> 
> 标签：routes, ruby-on-rails-4

[是否可以在 Rails 4 中创建此处](https://github.com/rails/rails/issues/5548#issuecomment-5806078)描述的约束范围？

## 路线.rb

```
scope format: true, constraints: { format: 'json' } do
  get '/bar' => "bar#index_with_json"
end 
```

我得到的错误是

```
NoMethodError (undefined method 'source' for "json":String):
  config/routes.rb:17:in `block (2 levels) in <top (required)>'
  config/routes.rb:16:in `block in <top (required)>'
  config/routes.rb:1:in `<top (required)>' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T18:18:39.827

找到了，格式类型必须是斜杠：

## 路线.rb

```
scope format: true, constraints: { format: /json/ } do
  get '/bar' => "bar#index_with_json"
end 
```

# sql - Inserting datetime in MSSQL from Coldfusion

> ID：15229100
> 
> 赞同：5
> 
> 时间：2013-03-05T16:29:48.710
> 
> 标签：sql, coldfusion

I am trying to insert `NOW` into a MySQL table. Something like:

```
<cfset datatime = CREATEODBCDATETIME( Now() ) />

<cfquery name="qInsert" datasource="#dbanme#" >
   INSERT INTO TableName(....,date_created, date_modified)
   VALUES(...,'#datatime#', '#datatime#')
</cfquery> 
```

But I am getting the following error:

> *Invalid JDBC timestamp escape*

Any help?

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-05T16:39:41.193

Let ColdFusion write out the data for you - using `cfqueryparam`. It's not absolutely essential here, but it's good practice to use it whenever you can. In addition to protecting you from SQL injection, it formats your variables appropriately so you don't have to worry about whether or not you need to insert the values as strings or integers or whatever.

```
<cfset datatime = CREATEODBCDATETIME( Now() ) />

<cfquery name="qInsert" datasource="#dbanme#" >
   INSERT INTO TableName(....,date_created, date_modified)
   VALUES(...,
        <cfqueryparam value="#datatime#" cfsqltype="cf_sql_timestamp">,
        <cfqueryparam value="#datatime#" cfsqltype="cf_sql_timestamp">
    )
</cfquery> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-05T16:48:21.657

如果您想要日期而不是时间，请使用以下命令：

```
<cfquery name="qInsert" datasource="#dbanme#" >
   INSERT INTO TableName( ...., date_created, date_modified )
   VALUES ( ...
        , <cfqueryparam cfsqltype="cf_sql_date" value="#now()#">
        , <cfqueryparam cfsqltype="cf_sql_date" value="#now()#">
   )
</cfquery> 
```

`cf_sql_date`将删除任何时间，并根据您的字段类型仅显示日期或日期`00:00:00`作为时间值。

如果你想要一个有时间的日期：

```
<cfquery name="qInsert" datasource="#dbanme#" >
   INSERT INTO TableName ( ....,date_created, date_modified )
   VALUES ( ...
      , <cfqueryparam cfsqltype="cf_sql_timestamp" value="#now()#">
      , <cfqueryparam cfsqltype="cf_sql_timestamp" value="#now()#">
   )
</cfquery> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-05T16:44:11.393

如果您想使用内置的 NOW 函数，只需将其作为查询的一部分包括在内：

```
<cfquery name="qInsert" datasource="#dbname#" >
   INSERT INTO TableName(....,date_created, date_modified)
   VALUES(...,NOW(), NOW())
</cfquery> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T16:35:12.320

插入 SQL Server 时，您不需要在生成的 ColdFusion 时间戳周围加上引号。

详细地说，如果您使用 DateFormat 等将时间戳构建为字符串，则必须使用以下格式插入：

```
INSERT INTO TABLE(DATE_COL) VALUES({ts '#dateInAStringFormat#'}) 
```

日期的 ColdFusion ODBCx 函数为您完成所有这些工作，所以它只是：

```
INSERT INTO TABLE(DATE_COL) VALUES( #dateInAStringFormat# ) 
```

# c# - No access panel in the Tab Document Interface ..?

> ID：15229104
> 
> 赞同：1
> 
> 时间：2013-03-05T16:29:59.890
> 
> 标签：c#, winforms

I have making the Tab Document Interface like that Firefox. I want to make a some portion of the page refresh Time to Time. I think have you seen already Cricket Page Refresh page after some time. I have used panel for the refresh for page but panel not show. I have try but can't do this.I am working at windows form. plz any body solve this problem and thanks in advance. My coding part here:-

```
 private void Form1_Load(object sender, EventArgs e)
    {
        AddNewTab();
        toolStripTextBox1.Text = "Go to website";
        toolStripTextBox2.Text = "Google Search text here";
        toolStripComboBox1.Text = "Google.co.in";
        toolStripComboBox1.Items.Add("Google.co.in");
        timer1.Enabled = true;
        timer1.Start();
        panel1.Show();
        label1.Text = DateTime.Now.ToString();
    }
    TabPage tp;
    WebBrowser wb;
    private void AddNewTab()
    {
        tp=new TabPage();
        wb=new WebBrowser();
        wb.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(wb_DocumentCompleted);
        wb.Focus();
        wb.Url = new Uri("http://google.co.in");
        wb.Dock=DockStyle.Fill;
        tp.Controls.Add(wb);
        tabControl1.TabPages.Insert(tabControl1.TabPages.Count - 1, tp);
        tabControl1.SelectedTab = tp;

    } 
```

![enter image description here](../Images/f435362e0c540ad36a87a54cfbdee097.png)

# c++ - How to add -fpermissive option to kdevelop?

> ID：15229109
> 
> 赞同：7
> 
> 时间：2013-03-05T16:30:19.313
> 
> 标签：c++, cmake, kdevelop

How to add -fpermissive option in KDevelop IDE?

And -std=c++0x option too

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-05T17:35:50.583

单击**打开配置**并将您的标志添加到`CMAKE_CXX_FLAGS`var。

如果您希望为构建您的源代码的任何人设置这些标志，您可以`set(CMAKE_CXX_FLAGS "-fpermissive -std=c++0x")`在`CMakeLists.txt`.

# ios - Display UIImageView in full screen (320*480)

> ID：15229110
> 
> 赞同：0
> 
> 时间：2013-03-05T16:30:21.163
> 
> 标签：ios, objective-c, xcode, xcode4

I know there are some questions about UIImageView full-size have been asked but I'm still stuck with my problems.

I have a navigation bar, a scrollview, a UIImageView (named avatarTest) and a button. When I press the image, the UIImageView expand to full-size (320*480) and set the avatarTest.contentMode is ModeCenter.

My problems are:

*   UIImageView expanded to 320*480 but it didn't replace the navigation bar and status bar (like picture 1 and 2)

*   When I scroll down (now my button appear) and I press image, the UIImageView still expand according the old view. I want it expand to the full size, fill my current view (window) (like picture 3 and 4)

*   I want to know how to determine the origin frame (CGRectMake) of UIImageView by code so I can code for the 2nd press action (resize the image to origin)

![enter image description here](../Images/2f8983a09c684c00ed39925b56599e68.png)

![enter image description here](../Images/2ae40a4762c300aec18875b45acf9fd4.png)

![enter image description here](../Images/b5c38d9653d916a7871edf64f8989439.png)

![enter image description here](../Images/a9a58d674cd134fa18c5ac09684ff839.png)

Here are some my viewController.m codes:

```
- (IBAction) expand {

    [UIView animateWithDuration:0.5f animations:^{
    CGRect screenRect = [[UIScreen mainScreen] bounds];
        CGFloat screenWidth = screenRect.size.width;
        CGFloat screenHeight = screenRect.size.height;            
        avatarTest.frame=CGRectMake(self.view.frame.origin.x, self.view.frame.origin.y, screenWidth, screenHeight);
        avatarTest.contentMode=UIViewContentModeCenter;
        avatarTest.backgroundColor = [UIColor blackColor];

    }]; 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T17:21:16.113

**首先**，你必须确保你的框架是正确的。我注意到您保留了原点的 x 和 y，也许每次都必须重置它们。一些实验很快就会产生预期的结果。

**其次**，通过设置`contentMode`来`UIViewContentModeCenter`防止图像被缩放。您需要启用一种内容模式来缩放图像，如下所示：

```
UIViewContentModeScaleToFill
UIViewContentModeScaleAspectFit
UIViewContentModeScaleAspectFill 
```

**最后**，要覆盖导航栏，您必须从主视图中*删除*视图并将*其添加到窗口*中。

```
[avatarTest removeFromSuperview]; 
[self.view.window addSubview:avatarTest]; 
```

当然，要重置，您将不得不做相反的事情。
另外，我建议在`viewDidDisappear`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T17:25:23.490

要摆脱状态栏和导航栏，您必须隐藏它们。在没有动画的情况下隐藏它们......

```
[self.navigationController setNavigationBarHidden:YES animated:NO];
[[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:UIStatusBarAnimationNone]; 
```

当然，当您想要它们回来时，您必须将隐藏设置为 NO。

# git - When one adds an untracked file, does it not go to staged immediately?

> ID：15229115
> 
> 赞同：5
> 
> 时间：2013-03-05T16:30:25.727
> 
> 标签：git, git-add

In the diagram shown on the git-scm page, [Recording Changes to a Repository](http://git-scm.com/book/en/Git-Basics-Recording-Changes-to-the-Repository), it shows that when an `untracked` file is added, it moves to the `unmodified` state.

![enter image description here](../Images/c03286c0e908d390ac398fbb994d9ff8.png)

Is this correct? If I run `$ git add myFile` then `$ git status`, it shows that `myFile` is ready to be committed, which (from my beginner's perspective) looks unintuitive when looking at the diagram on that page.

Is the diagram incorrect, incomplete, or is my understanding of the diagram incorrect? If the latter, please could someone explain what is meant.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T16:37:30.623

当您`git add`创建一个以前未跟踪的新文件时，它会立即暂存（图像中的蓝色阶段）。该图在这方面具有误导性，但该页面上的文本在[Tracking New Files](http://git-scm.com/book/en/Git-Basics-Recording-Changes-to-the-Repository#Tracking-New-Files)段落下说明了这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T18:10:56.403

你的问题的答案是肯定的。当您暂存未跟踪的文件时，它变为暂存，而不是未修改。

对我来说，这张图最困难的问题是将文件分类为：

*   未追踪
*   未修改
*   修改的
*   上演

在我看来，正确的类别是：

*   未追踪
*   未修改
*   未上演的
*   上演

![文件状态的正确类别](../Images/bf6a8c47eb3a1992fa4d7440c1e3df07.png)

重要的形容词用粉红色标记。灰色的是多余的。您不必说：“文件已被跟踪、修改和暂存”。说“文件已暂存”就足够了，因为每个暂存文件都被修改和跟踪。

一旦意识到这一点，就很容易理解，未跟踪的文件只能转移到暂存状态。这是通过以下方式完成的：

```
git add [filename] 
```

没有进行转换的命令：

*   未跟踪的文件 => 未修改的文件
*   未跟踪的文件 => 未暂存的文件

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-05T17:16:56.920

该图形具有误导性，因为它没有清楚地指出***文件***和同一文件的***版本***之间的区别。

当您`git add`创建一个文件时，您正在将工作目录中的***当前版本添加到******Staging Area***。当前版本现在被认为是***分阶段***并准备好提交。因为您的工作目录文件内容与 Staged 版本的相同，所以该文件被视为***Unmodified***。如果您此时要提交，则签入到 repo 的版本是 Staged 版本，它也恰好与您工作目录中文件的外观相匹配。

但是，假设您不是在添加文件后立即提交，而是对工作目录中的文件进行更多更改。现在，您实际上有***两个版本***的文件：之前的 Staged 版本，以及现在工作目录中的***Modified版本。******如果您此时***要提交，则会签入较早的 Staged 版本，这与您的工作目录中的不同。

# css - Google maps do not have border radius

> ID：15229117
> 
> 赞同：0
> 
> 时间：2013-03-05T16:30:28.850
> 
> 标签：css, google-maps, google-chrome

when we use google maps to display maps can not make round edges

Issue only on chrome

HTML

```
<div id="mapframe">
    <div id="map"></div>
</div> 
```

CSS

```
#mapframe {
    margin: 50px;
    width: 290px;
    height: 290px;
    overflow: hidden;
    border: 10px solid #fff;
    border-radius: 200px;
    box-shadow: 0px 0px 1px #555;

}

#map {
    width: 290px;
    height: 320px;
    border-radius: 200px;
} 
```

[http://jsfiddle.net/zsVjG/](http://jsfiddle.net/zsVjG/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:58:41.997

正确的。包含 Google Map v3 的对象的边框半径 CSS 样式不会在 Chrome 中呈现。其他浏览器，例如 FireFox 和 Opera，尊重这些设置。请注意，Chrome 在 Google Maps v2 中没有这个问题，但由于该插件将在 5 月份拔出，所以这一点没有实际意义。

# html - Converting a Static Bootstrap website to Responsive

> ID：15229119
> 
> 赞同：1
> 
> 时间：2013-03-05T16:30:32.787
> 
> 标签：html, css, twitter-bootstrap, responsive-design, less

I have a bootstrap website that's setup statically, it doesn't adjust according to different view sizes. So I would like to make it responsive but not sure how. I'm also using LESS to do my modifications and such to the twitter bootstrap css. So far my site is set up like so..

```
<div id="wrapper">
   <header>
      <div class="container">
         <div class="row">
            <div class="span12">
               <!-- LOGO HERE -->
            </div>
         </div>
      </div>
   </header>
   <div id="main-content" class="container">
      <div class="row">
         <div class="span8">
            <!-- My content -->
         </div>
         <div class="span4">
            <!-- My content too -->
         </div>
      </div>
   </div>
</div> 
```

Also, the website was built for 940px so when I make it responsive I want to set the maximum veiw of the page to 940px instead of 1200px and have my div.wrapper still in the center of the page.

Hopefully all this makes sence haha.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:42:59.913

更改`.container`为`.container-fluid`和。`.row`_ `.row-fluid`看看这个：http: [//jsfiddle.net/ypkJQ/](http://jsfiddle.net/ypkJQ/)。您还必须记住，每个 .row-fluid 类都会重置 span* 宽度计数器，即 .row-fluid 下的 span* 宽度取自父级 (.row-fluid) 的百分比宽度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T16:58:12.163

要打开响应式布局，您需要在`<head>`文档中添加以下代码：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="assets/css/bootstrap-responsive.css" rel="stylesheet"> 
```

您必须将样式表的引用调整为您的特定结构，因为您使用的是 .less 源。

在 responsive.less 中注释掉或删除以下行：

```
@import "responsive-1200px-min.less"; 
```

这将响应较小的屏幕分辨率，但将 .container 的最大宽度保持在 940 像素。

# assembly - Assembly:Access 2D array

> ID：15229125
> 
> 赞同：1
> 
> 时间：2013-03-05T16:30:59.957
> 
> 标签：assembly, nasm, cpu-registers

I am trying to make a small ping pong game in nasm assembly(thats the way i learn languages :) ) but i am having a problem ,i cant access any item of a list

**my code**:

```
mov eax,counter                  ;counter=2 double checked 
mov esi,bitmap_data+eax*4        ;copy the 2nd item of the array in to esi 
```

bitmap data is in.bss section

```
bitmap_data:    resd 100 
```

**tried**:

```
mov eax,2                         
mov esi,[bitmap_data+eax*4]       ;copy the 2nd item of the array in to esi 
```

this is not saving in the esi the correct (2th) element of the list while the following is doing it right

```
mov esi,[bitmap_data+2*4] 
```

but i need to be able to change the item that i am getting by using a variable

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:23:31.860

将内存访问括在方括号中，如下所示：

```
mov esi,[bitmap_data+eax*4] 
```

这应该让汇编程序高兴。

**根据您的更新进行更新：** 尝试稍微分解一下您的说明。尝试：

```
mov eax, counter
shl eax, 2
add eax, bitmap_data
mov esi, [eax] 
```

任何改变？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T21:50:29.273

是什么`counter`？你很可能想要：

 `````
mov eax, [counter]
mov esi, [bitmap_data + eax * 4] 
````  ``eax`当= 0 时，数组中的“第一个”（第零个）项将显示。当`eax`= 2 时，您将获得数组中的“第三个”项。你在找哪一个？``

# angularjs - 带有 $http 的 POST 上的有效负载请求

> ID：15229133
> 
> 赞同：0
> 
> 时间：2013-03-05T16:31:17.713
> 
> 标签：angularjs

我尝试使用 POST 方法执行 $http 请求，但 Angular 使用请求有效负载而不是 Post Params 发送数据。我已经看到了一个将标题更改为 x-www-form-urlencoded 的主题，但这并不能解决我的问题。我创建了一个显示我的问题的代码笔：http: [//codepen.io/rizidoro/pen/afktd](http://codepen.io/rizidoro/pen/afktd)

看看 Chrome 上的开发者工具包。Angular 正在使用 Request Payload 发送数据！

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T17:43:53.030

唯一的问题是`Content-type`应该改成`Content-Type`. 似乎是一些区分大小写的错误。我会调查并尝试将其发布回来。

# android - Android RotateAnimation 重叠

> ID：15229135
> 
> 赞同：0
> 
> 时间：2013-03-05T16:31:22.257
> 
> 标签：android, image-rotation

最近几天在android中工作，我试图通过按下按钮来旋转箭头。使用 RotateAnimation 和：

```
setFillAfter(true); 
```

箭头按预期保持在最后一个位置。但是当我再次按下按钮时，箭头是开始从初始位置旋转，但是最后一次动画调用中的“上一个”箭头最终被“新”箭头重叠。所以我想我需要以某种方式重置/清除 setFillAfter 但我找不到方法。

我的代码是这样的：

```
//Animation start
float Xaxis=0.835366f;
float Yaxis=0.676692f;
RotateAnimation rotateAnimation1 = new RotateAnimation(0, 180,
    Animation.RELATIVE_TO_SELF, Xaxis,Animation.RELATIVE_TO_SELF, Yaxis);
rotateAnimation1.setInterpolator(new LinearInterpolator());
rotateAnimation1.setDuration(2500);
rotateAnimation1.setRepeatCount(0);
image.startAnimation(rotateAnimation1);
rotateAnimation1.setAnimationListener(this);

@Override
public void onAnimationEnd(Animation animation) {
    animation.setFillAfter(true);
} 
```

任何想法都会很有用..我尝试过无效，clearAnimation 到图像，将 fillafter 设置为 false，重置动画但仍然相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T12:17:45.417

它是固定的，模拟器配置了共享 GPU 并且运行完美。快速且没有任何先前动画的残留。

# autofixture - 如何使用 AutoFixture 根据父对象的属性分配子对象的属性？

> ID：15229138
> 
> 赞同：1
> 
> 时间：2013-03-05T16:31:24.193
> 
> 标签：autofixture

我有一个有集合的`Order`对象。有一个名为 的属性。如何自定义 AutoFixture 以生成正确的订单？`Shipments``Shipment``OrderId``order.Shipments.All(s => s.OrderId == order.Id)`

![类图](../Images/92cfb73d69033eb434eddd56ab089614.png)

我已经尝试了以下技术但没有成功：

```
fixture.Customize<Order>(c => c.Do(o => {
    // This is called before the Order's properties have been populated,
    // so there are no shipments yet.
    foreach (var s in o.Shipments) {
        s.OrderId = o.Id;
    }
})); 
```

* * *

```
fixture.Customize<Order>(c => c.Do(o => {
    o.Id = c.Create<Guid>();       // System.InvalidCastException
    o.Shipments = new List<Shipment>(c.CreateMany<Shipment>());
    foreach (var shipment in o.Shipments) {
        shipment.OrderId = o.Id;
    }
})); 
```

* * *

```
class OrderGenerator : ISpecimenBuilder {
    public object Create(object request, ISpecimenContext context) {
        if (request as Type == typeof(Order)) {
            // ObjectCreationException due to circular reference
            var order = (Order)context.Resolve(request);
            foreach (var shipment in order.Shipments) {
                shipment.OrderId = order.Id;
            }
        }
    }
}
fixture.Customizations.Add(new OrderGenerator()); 
```

做这个的最好方式是什么？

# meteor - Meteor JS 中的简单计时器

> ID：15229141
> 
> 赞同：8
> 
> 时间：2013-03-05T16:31:32.677
> 
> 标签：meteor

我正在为游戏创建一个简单的倒数计时器。我正在使用 CoffeeScript 和 Meteor。我有一个带有 {{time}} 表达式的把手“计时器”模板。

这是代码：

```
clock = 10

timeLeft = () ->
    if clock > 0
        clock--
    else
        "That's All Folks"
        Meteor.clearInterval(interval)

interval = Meteor.setInterval(timeLeft, 1000)

if Meteor.isClient
    Template.timer.time = interval 
```

上面的代码只是给了我一个 8 或 6 的静态显示，而不是倒数计时器。

如果我添加一些 console.log 语句，我可以看到它在终端中按设计工作。

```
clock = 10

timeLeft = () ->
    if clock > 0
        clock--
        console.log clock
    else
        console.log "That's All Folks"
        Meteor.clearInterval(interval)

interval = Meteor.setInterval(timeLeft, 1000)

if Meteor.isClient
    Template.timer.time = interval 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-05T16:39:47.863

如果要更新车把中的值，则需要使用`Session`它以使其具有反应性，否则模板系统将不知道何时在 ui 中更新它。您还向模板传递了一个处理程序，它是句柄而不是计时器值。

使用下面的内容，我曾经`Session`将这些数据传递给车把。

```
clock = 10
timeLeft = ->
  if clock > 0
    clock--
    Session.set "time", clock
    console.log clock
  else
    console.log "That's All Folks"
    Meteor.clearInterval interval

interval = Meteor.setInterval(timeLeft, 1000)
if Meteor.isClient
  Template.timer.time = ->
    Session.get "time" 
```

同样在javascript中，以防其他人想要这个：

```
var clock = 10;

var timeLeft = function() {
  if (clock > 0) {
    clock--;
    Session.set("time", clock);
    return console.log(clock);
  } else {
    console.log("That's All Folks");
    return Meteor.clearInterval(interval);
  }
};

var interval = Meteor.setInterval(timeLeft, 1000);

if (Meteor.isClient) {
  Template.registerHelper("time", function() {
    return Session.get("time");
  });
} 
```

本质上你告诉`Session`时间值，当它更新时它告诉模板系统用更新的时间值重绘。

# orchardcms - 果园博客摘要文本

> ID：15229144
> 
> 赞同：6
> 
> 时间：2013-03-05T16:31:39.897
> 
> 标签：orchardcms, orchardcms-1.6

在博客摘要页面（列出您的博客文章的页面）上，我可以在每篇博客文章中显示更多的文本。

这可能吗？我在设置中的任何地方都看不到它，并且由于某种原因，形状跟踪不能让我看到模板是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T03:05:52.770

我最近需要在 Orchard v1.6 上做同样的事情。您正在使用形状跟踪，因此您将朝着正确的方向前进。[替代品](http://docs.orchardproject.net/Documentation/Alternates)和[安置](http://docs.orchardproject.net/Documentation/Understanding-placement-info)的果园文件涵盖了这一点。[在Tony Johnson 的 Argument Exception Blog](http://www.deepcode.co.uk/2011/05/real-world-orchard-cms-part-4-cleaning.html)上有一个很好的这种修改的例子。

根据菲尔的回答，您需要修改当前主题中的placement.info 以使用这样的替代视图；

```
<Match ContentType="BlogPost">
<Match DisplayType="Summary">
    <Place Parts_Common_Body_Summary="Content:5;Alternate=Parts_BlogPostSummaryBody"/>
</Match>
</Match> 
```

然后在主题的视图文件夹中添加一个名为“Content-BlogPost.Summary.cshtml”的替代部分；

```
@using Orchard.ContentManagement.ViewModels
@using Orchard.ContentManagement
@using Orchard.Core.Common.Models

@{      
ContentItem item = Model.ContentItem;
string title = Model.Title.ToString();
BodyPart bpItem = item.As<BodyPart>();
string linkUrl = Url.ItemDisplayUrl(item);
}

<h4>@Html.ItemDisplayLink(title, item)</h4>
<div class="publishinfo">@Model.ContentItem.CommonPart.PublishedUtc by @Model.ContentItem.CommonPart.Owner.UserName</div>
      <div>
   <p>@Html.Raw(@bpItem.Text)</p>
</div> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T17:28:05.710

通过阅读其他帖子，我发现负责此的视图是**Parts_Common_Body_Summary**。所以我从 orchard 的 core / common 文件夹中复制了它，并将其复制到我的主题视图文件夹中，然后将其重命名为**Parts_Blog_Summary**

**然后我在Placement.info**中为此设置了一个规则，如下所示：

```
<Match ContentType="BlogPost">
<Match DisplayType="Summary">
        <Place Parts_Common_Body_Summary="Content:after;Alternate=Parts_Blog_Summary"/>
</Match>    
</Match> 
```

这只是让我在新的备用视图中更改字符串长度的任务：

```
var body = new HtmlString(Html.Excerpt(bodyHtml, 350).ToString().Replace(Environment.NewLine, "</p>" + Environment.NewLine + "<p>")); 
```

# box-api - 如何使用API 查询Box文件夹的物品数量

> ID：15229146
> 
> 赞同：1
> 
> 时间：2013-03-05T16:31:50.947
> 
> 标签：box-api

我们正在使用 Box API v2.0。

根据文档，以下命令应返回根文件夹的项目列表以及每个文件夹的 item_collection 字段。

```
curl https://api.box.com/2.0/folders/0/items?fields=item_collection -H "Authorization: Bearer ACCESS_TOKEN" 
```

不幸的是，**item_collection**字段被忽略并返回迷你格式。

从文档中：

> 完整文件或文件夹对象中的任何属性都可以通过 fields 参数传入以获取特定属性，并且仅返回那些特定属性；否则，默认为每个项目返回迷你格式。

您知道这是否是一个已知问题以及是否有任何解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T21:51:41.800

这实际上是文档中的错误。`item_collection`/folders/{id}/items 端点当前不支持（正在更新文档）。

# sql - 笛卡尔积和 WHERE 子句问题

> ID：15229162
> 
> 赞同：1
> 
> 时间：2013-03-05T16:32:37.010
> 
> 标签：sql, tsql, sap-ase, cartesian-product

让我们有一个简单的表格：

```
CREATE TABLE dbo.test
(
    c1  INT
)

INSERT INTO test (c1) VALUES (1)
INSERT INTO test (c1) VALUES (2)
INSERT INTO test (c1) VALUES (3) 
```

接下来计算一些 SUM：

```
SELECT SUM(t1.c1) FROM test AS t1 , test AS t2
WHERE t2.c1 = 1 
```

输出为： 6 。简单易行。

但是如果我运行：

```
SELECT SUM(t1.c1), * FROM test AS t1 , test AS t2
WHERE t2.c1 = 1 
```

输出是：

```
6   2   2
6   2   3
6   2   1
6   3   2
6   3   3
6   3   1
6   1   2
6   1   3
6   1   1 
```

我的问题是：为什么第二个输出与 WHERE 子句中的条件不匹配？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T18:32:21.720

[看起来 Sybase 实现了它自己的扩展`GROUP BY`](http://manuals.sybase.com/onlinebooks/group-as/asg1250e/sqlug/@Generic__BookTextView/8499;pt=8007)：

> 通过以下扩展，Sybase 取消了对可以在包含 group by 的查询的选择列表中包含或省略的内容的限制。
> 
> *   选择列表中的列不限于分组列和与向量聚合一起使用的列。
>     
>     
> *   group by 指定的列不限于选择列表中的那些非聚合列。

然而，扩展的结果并不总是直观的：

> 当您在包含 where 子句或连接的复杂查询中使用 Transact-SQL 扩展时，结果可能会变得更加难以理解。

这与您的问题有什么关系？

> 但是，Adaptive Server 处理 `select`列表和`where`子句中额外列的方式可能看起来是矛盾的。例如：
> 
> ```
> select type, advance, avg(price) 
> from titles 
> where advance > 5000
> group by type
> 
> type           advance
> -------------  ---------  --------
> business        5,000.00      2.99
> business        5,000.00      2.99
> business       10,125.00      2.99
> business        5,000.00      2.99
> mod_cook            0.00      2.99
> mod_cook       15,000.00      2.99
> popular_comp    7,000.00     21.48
> popular_comp    8,000.00     21.48
> popular_comp        NULL     21.48
> psychology      7,000.00     14.30
> psychology      2,275.00     14.30
> psychology      6,000.00     14.30
> psychology      2,000.00     14.30
> psychology      4,000.00     14.30
> trad_cook       7,000.00     17.97
> trad_cook       4,000.00     17.97
> trad_cook       8,000.00     17.97
> 
> (17 rows affected) 
> ```
> 
> `where`当您查看高级（扩展）列的结果时，似乎查询忽略了该子句。Adaptive Server 仍然只使用满足该子句的那些行来计算向量聚合`where`，但它也会显示`select`列表中包含的任何扩展列的所有行。**要进一步限制结果中的这些行，您必须使用`having`子句。**

因此，为了给您预期的结果，Sybase 应该允许您执行以下操作：

```
SELECT SUM(t1.c1), * FROM test AS t1 , test AS t2
WHERE t2.c1 = 1
HAVING t2.c1 = 1 
```

`WHERE`将从总数中排除结果`SUM`；将`HAVING`隐藏不符合条件的记录。

*令人困惑，不是吗？*

相反，您最好编写查询以便它不需要 Sybase 的`GROUP BY`扩展。

# c# - 读取内存映射文件或知道其大小以正确读取它

> ID：15229166
> 
> 赞同：1
> 
> 时间：2013-03-05T16:32:51.147
> 
> 标签：c#, .net, ipc, memory-mapped-files

在这个问题中，

[在不知道大小的情况下读取内存映射文件或内存映射视图访问器的所有内容](https://stackoverflow.com/questions/14953393/read-all-contents-of-memory-mapped-file-or-memory-mapped-view-accessor-without-k)

有一个问题，`(int)stream.Length`没有给我正确的长度，而是给出了使用的内部缓冲区的大小！我需要刷新这个问题，因为它非常紧迫。

主要问题是：

> 如果我不知道它的大小，我需要类似于 ReadToEnd 或 ReadAllBytes 的东西来使用 MappedViewAccessor 读取 MemoryMappedFile 的所有内容，我该怎么做？
> 
> 我已经搜索过了，我看到了这个问题，但这不是我要找的东西：
> 
> 如何从 .NET 中的内存映射文件中快速读取字节？

旧的答案是：

酒馆

```
public static ReadMMFAllBytes(string fileName)
{
    using (var mmf = MemoryMappedFile.OpenExisting(fileName))
    {
        using (var stream = mmf.CreateViewStream())
        {
            using (BinaryReader binReader = new BinaryReader(stream))
            {
                return binReader.ReadBytes((int)stream.Length));
            }
        }
    }
} 
```

在这个问题中：

[内存映射文件长度](https://stackoverflow.com/questions/9597541/memory-mapped-file-length?rq=1)

确切的问题没有确切的答案！问题是关于标题以外的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:28:05.347

最好的方法是首先发送一个固定长度的头部，而不是仅仅流式传输原始字节。这样，您读取的第一个 blob 的长度是一致的，它为您提供了读取可变长度余数所需的信息。

在最简单的情况下，您的记录可以简单到首先写入长度字段，然后是有效负载（您的字节）。根据您的需要，您可以将数据添加到标题中，例如记录类型、版本等。

# javascript - JavaScript 文本识别和 OCR 开启

> ID：15229168
> 
> 赞同：7
> 
> 时间：2013-03-05T16:33:04.677
> 
> 标签：javascript, html5-canvas, ocr, text-recognition

我找到了一个可以识别手写数学方程式的网络应用程序：

> [http://webdemo.visionobjects.com/equation.html?locale=default](http://webdemo.visionobjects.com/equation.html?locale=default)

我想知道是否有人知道实现这种机制的应用程序或教程或开源项目，因为从这个 webapp 获取它真的很复杂。

**注意：**我只需要在画布中绘制的方程式在输入文本框中进行翻译即可。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-12-21T00:17:23.060

[Tesseract OCR](https://github.com/tesseract-ocr/tesseract)已[移植到 JavaScript](http://tesseract.projectnaptha.com/)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-07-27T14:31:29.557

[Google Cloud Vision](https://cloud.google.com/vision/)是一项非常准确的 OCR 服务，[每月最多可免费处理 1000 个请求](https://cloud.google.com/vision/docs/pricing)。通过它的[REST API](https://cloud.google.com/vision/reference/rest/v1/images/annotate)也很容易使用。在下面的代码片段中，困难的部分是从用户那里获取图像并将其编码为 Base64。

```
var GCVUrl = 'https://vision.googleapis.com/v1/images:annotate?key=XXX';
// Enable the Cloud Vision API and get a key - see
// https://cloud.google.com/vision/docs/quickstart
var input = document.querySelector('input[type=file]');
var fileReader = new FileReader();

input.onchange = function (event) {

  var file = event.target.files[0];

  fileReader.onload = function(fileLoadedEvent) {
    var GCVRequest = {
      requests: [{
        image: {
          content: fileLoadedEvent.target.result.split(',')[1]
          // must discard `data:image/png;base64,`
        },  
        features: [{type: 'TEXT_DETECTION'}]
      }]
    };

    $.ajax({
      type: 'POST',
      url: GCVUrl,
      dataType: 'json',
      contentType: 'application/json',
      data: JSON.stringify(GCVRequest),
      success: function (data) {
        var texts;
        if (texts = data.responses[0].textAnnotations) {
          alert(texts[0].description);
        } else {
          alert('No text was recognized');
        }
      },
      error: function(jqXhr, textStatus, error) {
        alert('XHR error: ' + jqXhr.responseJSON.error.message);
      }
    });

  };

  fileReader.readAsDataURL(file);

};
```

```
<script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
<input type="file" accept="image/*">
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-03-12T21:27:06.600

有几个著名的 OCR 库的 emscripten.js 端口，例如[OCRAD.js](https://github.com/antimatter15/ocrad.js)和[GOCR](https://github.com/antimatter15/gocr.js)。

# javascript - 我想在我的 RSS 提要中添加自动滚动功能

> ID：15229171
> 
> 赞同：0
> 
> 时间：2013-03-05T16:33:08.960
> 
> 标签：javascript, jquery, html, rss

我正在构建一个 RSS 提要以放置在我的网站上。当谈到 JS/jQuery 时，我几乎是个新手，所以非常感谢任何帮助。

我找到了 Google 的 Feed API 并创建了自己的 RSS 阅读器小部件，但它没有任何自动滚动功能，这是我接下来要添加的功能。[我从另一个 stackoverflow 问题](https://stackoverflow.com/questions/10220195/jquery-how-to-loop-a-div)中找到了一些自动滚动器的示例，例如[vTicker](http://www.jugbit.com/jquery-vticker-vertical-news-ticker/)和jsfiddle.net 上的这个示例，但我似乎无法弄清楚如何使它们适用于我的代码。是否有任何教程描述了如何构建这样的东西？

我的 RSS 提要是通过创建一个 DIV 容器，然后将子 DIV 附加到具有每个提要条目的标题、描述和日期的容器来构建的，所以我想“所有”我需要做的就是滚动浏览 DIV 容器？

编辑：基本上我只想垂直向下容器 div 直到我到达底部，然后再次“环绕”到顶部。

到目前为止，这是我的 HTML/CSS/JS：

```
<head>
<title>Google Feed Loader Example #1</title> 

<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js"></script>

<script type="text/javascript">
    google.load("feeds", "1");

    // Our callback function, for when a feed is loaded.
function feedLoaded(result) {
    if (!result.error) {
        // Grab the container we will put the results into
    var container = document.getElementById("feed");
    container.innerHTML = '';

    // Loop through the feeds, putting the titles onto the page.
    // Check out the result object for a list of properties returned in each entry.
    // http://code.google.com/apis/ajaxfeeds/documentation/reference.html#JSON
    for (var i = 0; i < result.feed.entries.length; i++) {
      var entry = result.feed.entries[i];
      var div1 = document.createElement("div");
      div1.setAttribute("id", "title");
      div1.innerHTML = '<h3><a href="' + entry.link + '">' + entry.title + '</a></h3>';
      //div1.appendChild(document.createTextNode(entry.feedUrl));

      var div2 = document.createElement("div");
      div2.setAttribute("id", "description");
      div2.appendChild(document.createTextNode(entry.content));

      var div3 = document.createElement("div");
      div3.appendChild(document.createTextNode(entry.publishedDate));
      div3.setAttribute("id", "date");

      container.appendChild(div1);
      container.appendChild(div2);
      container.appendChild(div3);

      /*var li = document.createElement("li");
      li.innerHTML = '<h3><a href="' + entry.link + '">' + entry.title + '</a></h3>';
      li.innerHTML += '<p>' + entry.contentSnippet + '</p>';
      container.appendChild(li);*/
    }
  }
}

function OnLoad() {
  // Create a feed instance that will grab Digg's feed.
  var feed = new google.feeds.Feed("http://fastpshb.appspot.com/feed/1/fastpshb");
  feed.setNumEntries(15);
  feed.includeHistoricalEntries();
  // Calling load sends the request off.  It requires a callback function.
  feed.load(feedLoaded);
}

    google.setOnLoadCallback(OnLoad);
</script>

<style>
h1 {
background-color:   #356AA0;
}

a {
color:              #FEC659;
}

a:link {
text-decoration:    none;
}

a:visited {
text-decoration:    none;
}

a:hover {
text-decoration:    underline;
}

a:active {
text-decoration:    underline;
}

div {line-height: 1;}
/*h1, p {margin: 0;}    */

div#feed {
width:              330;
height:             150;
overflow-y:         auto;
background-color:   #F8F8F8; /* background-color when image is not shown */
border-top:         1px solid #C0C0C0;
border-bottom:      1px solid #C0C0C0; /* set grey border bottom */
border-left:        1px solid #C0C0C0; /* set grey border left */
border-right:       1px solid #C0C0C0; /* set grey border right */
}

div#title {
/*padding:          5px;*/
background-color:   #FFFFFF;
font-size:          14px; /* sets the font size of the title to 18px*/
font-weight:        bold; /* and bold of course */
color:              #FEC659;
text-decoration:    none;
}

div#description {
color:              #356AA0;
background-color:   #FFFFFF;
padding-bottom:     5px;
}

div#date {
background-color:   #FFFFFF;
color:              #000000;
border-bottom:      1px dotted #C0C0C0;
padding-bottom:     5px;
}

div#header {
width:              330;
background-color:   #356AA0;
font-size:          18px; /* sets the font size of the title to 18px*/
font-weight:        bold; /* and bold of course */
color:              #FFFFFF;
text-decoration:    none;
}

</style>

</head>

<body>
<div id="header">RSS Feed </div>
<div id="feed"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:34:19.430

这是一个使用[vTicker](http://www.jugbit.com/jquery-vticker-vertical-news-ticker/)的示例，因为您已链接它。我试图对您上面的原始代码进行尽可能少的更改。

```
<head>
<title>Google Feed Loader Example #1</title> 

<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js"></script>
<script type="text/javascript" src="http://www.jugbit.com/jquery/jquery.vticker-min.js"></script>
<script type="text/javascript">
    google.load("feeds", "1");

    // Our callback function, for when a feed is loaded.
function feedLoaded(result) {
    if (!result.error) {
        // Grab the container we will put the results into
    var container = document.getElementById("feed");
    container.innerHTML = '';
            //create a list container for vTicker
    var list = document.createElement("ul");
    container.appendChild(list);
    // Loop through the feeds, putting the titles onto the page.
    // Check out the result object for a list of properties returned in each entry.
    // http://code.google.com/apis/ajaxfeeds/documentation/reference.html#JSON
    for (var i = 0; i < result.feed.entries.length; i++) {
      var entry = result.feed.entries[i];
              //new list item
      var listItem = document.createElement("li");
      var div1 = document.createElement("div");
      div1.setAttribute("id", "title");
      div1.innerHTML = '<h3><a href="' + entry.link + '">' + entry.title + '</a></h3>';
      //div1.appendChild(document.createTextNode(entry.feedUrl));

      var div2 = document.createElement("div");
      div2.setAttribute("id", "description");
      div2.appendChild(document.createTextNode(entry.content));

      var div3 = document.createElement("div");
      div3.appendChild(document.createTextNode(entry.publishedDate));
      div3.setAttribute("id", "date");
              //add all child divs to list item
      listItem.appendChild(div1);
      listItem.appendChild(div2);
      listItem.appendChild(div3);
              //add list item to the list container
      list.appendChild(listItem);
      /*var li = document.createElement("li");
      li.innerHTML = '<h3><a href="' + entry.link + '">' + entry.title + '</a></h3>';
      li.innerHTML += '<p>' + entry.contentSnippet + '</p>';
      container.appendChild(li);*/
    }
            //add the list container to the containing div
    container.appendChild(list);
    $(container).vTicker({ 
        speed: 500,
        pause: 3000,
        animation: 'fade',
        mousePause: false,
        showItems: 3
    });
  }
}

function OnLoad() {
  // Create a feed instance that will grab Digg's feed.
  var feed = new google.feeds.Feed("http://fastpshb.appspot.com/feed/1/fastpshb");
  feed.setNumEntries(15);
  feed.includeHistoricalEntries();
  // Calling load sends the request off.  It requires a callback function.
  feed.load(feedLoaded);
}

    google.setOnLoadCallback(OnLoad);
</script>

<style>
h1 {
background-color:   #356AA0;
}

a {
color:              #FEC659;
}

a:link {
text-decoration:    none;
}

a:visited {
text-decoration:    none;
}

a:hover {
text-decoration:    underline;
}

a:active {
text-decoration:    underline;
}

div {line-height: 1;}
/*h1, p {margin: 0;}    */

div#feed {
width:              330;
height:             150;
overflow-y:         auto;
background-color:   #F8F8F8; /* background-color when image is not shown */
border-top:         1px solid #C0C0C0;
border-bottom:      1px solid #C0C0C0; /* set grey border bottom */
border-left:        1px solid #C0C0C0; /* set grey border left */
border-right:       1px solid #C0C0C0; /* set grey border right */
}

div#title {
/*padding:          5px;*/
background-color:   #FFFFFF;
font-size:          14px; /* sets the font size of the title to 18px*/
font-weight:        bold; /* and bold of course */
color:              #FEC659;
text-decoration:    none;
}

div#description {
color:              #356AA0;
background-color:   #FFFFFF;
padding-bottom:     5px;
}

div#date {
background-color:   #FFFFFF;
color:              #000000;
border-bottom:      1px dotted #C0C0C0;
padding-bottom:     5px;
}

div#header {
width:              330;
background-color:   #356AA0;
font-size:          18px; /* sets the font size of the title to 18px*/
font-weight:        bold; /* and bold of course */
color:              #FFFFFF;
text-decoration:    none;
}

</style>

</head>
<body>
<div id="header">RSS Feed </div>
<div id="feed"></div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-22T23:13:07.047

由于 Google 放弃了我的 NEWSSHOW 提要，我决定尝试修改上面的代码 (Danny) 以制作一个简化的信用卡大小的 Google 新闻代码。大多数更改只是消除了不需要的东西并进行了重大的 CSS 更改。（抱歉，HTML 缩进搞砸了，这是我第一次在 stackoverflow 上发帖。）

测试网址：

[http://m.gooplusplus.com/gnews360.html?b#Business-News](http://m.gooplusplus.com/gnews360.html?b#Business-News)

[http://m.gooplusplus.com/gnews-hl.html?b#Business-News](http://m.gooplusplus.com/gnews-hl.html?b#Business-News)

```
<head>
<title>Google News RSS scroller - param: ?b#Business - News</title> 
<base target = "_blank" />

<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js"></script>
<script type="text/javascript" src="http://www.jugbit.com/jquery/jquery.vticker-min.js"></script>
<script type="text/javascript">
google.load("feeds", "1");

function feedLoaded(result) {
if (!result.error) {
var container = document.getElementById("feed");
container.innerHTML = '';
var list = document.createElement("ul");
container.appendChild(list);
for (var i = 0; i < result.feed.entries.length; i++) {
  var entry = result.feed.entries[i];
  var listItem = document.createElement("li");
  var div1 = document.createElement("div");
  div1.setAttribute("id", "title");
  div1.innerHTML = "<center style='background-color:#F0F0F0;padding-left:105px;color:#888888;font-size:0.9em;'>--&#160;"+
       location.hash.substr(1) + "&#160;--&#160;&#160;</center>"+ entry.content;

  listItem.appendChild(div1);
  list.appendChild(listItem);
}
container.appendChild(list);
$(container).vTicker({ 
    speed: 150,
    pause: 4000,
    animation: 'fade',
    mousePause: true,
    showItems: 1
});
}
}

function OnLoad() {
var feed = new google.feeds.Feed("http://news.google.com/news/?output=rss&topic="+location.search.substr(1)); 
feed.setNumEntries(15);
feed.includeHistoricalEntries();
feed.load(feedLoaded);
}
google.setOnLoadCallback(OnLoad);
</script>

<style>
body, table { margin:0px; }
center { text-align:left; }
td { font-size:0.8em; text-align:justify; }
font { font-size:1em; }
img { margin-top:-12px; border:2px solid #CCCCCC; }
a:hover img { border:2px solid red; }
td font div { margin-top:-15px; }
td font div img { display:none; }

a:link,a:visited {  font-size:0px; text-decoration: none; }

div {line-height: 1;}
div a b { color: blue; font-size:11px; }
div a:hover b { color: red; }

div#title { background-color:   #FFFFFF; }

div#feed { 
width:              100%;
max-width:          360px;
height:             auto;
overflow-y:         auto;
background-color:   #F0F0F0; 
border:             1px solid #C0C0C0;
}
</style>
</head>
<body><div id="feed"></div></body>
</html> 
```

# c++ - 从配置文件中读取一个参数，其中有更多参数，使用 boost program_options

> ID：15229178
> 
> 赞同：0
> 
> 时间：2013-03-05T16:33:27.717
> 
> 标签：c++, parsing, configuration-files, boost-program-options

我有一个 cfg 文件，如下所示：

```
parameter1="hello"
parameter2=22
parameter3=12 
```

使用`boost_program`此代码读取所有参数可以正常工作：

```
po::options_description options("Options");
options.add_options()
  ("help,h", "produce help message")
  ("parameter1", po::value<string>(&parameter1)->default_value("bye"),
   "parameter1")
  ("parameter2", po::value<int>(&parameter2)->default_value(2),
   "parameter2")
  ("parameter3", po::value<int>(&parameter3)->default_value(4),
   "parameter3");

po::variables_map vm;
po::store(po::parse_command_line(argc, argv, options), vm);
notify(vm);

try
{
  po::store(po::parse_config_file< char >(filePath, options), vm);
}
catch (const std::exception& e)
{
  std::cerr << "Error parsing file: " << filePath << ": " << e.what() << std::endl;
} 
```

...

但是，当我尝试执行一个泛型方法时，我只想读取从调用中给出的一个参数，我解析错误。

例如，我想读取第二个参数，所以我写了这个：

```
const char parameter_string = "parameter2";
int default = 30;
int parameter;
getparameter(parameter_string,parameter,default); 
```

并转到方法getsparameter，这就是我这次所拥有的：...

```
po::options_description options("Options");
options.add_options()
  ("help,h", "produce help message")
  (parameter_string, po::value<int>(&parameter)->default_value(default),
   "reading parameter");

 po::variables_map vm;
 po::store(po::parse_command_line(argc, argv, options), vm);
 notify(vm); 
```

但错误是：

> 解析文件时出错：file.cfg：未知选项参数 1

所以我的问题是，是否可以从文件中仅读取一个参数，或者是否有必要解析所有参数，`boost_program`包括`options.add_option`与我在配置文件中写入的参数一样多的行，然后从我想要的参数中获取值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T17:50:50.037

使用[`allow_unregistered`](http://www.boost.org/doc/libs/1_39_0/doc/html/program_options/howto.html#id2894348)功能：

> 指定允许未注册的选项，但应该通过。对于每个看起来像一个选项但不包含可识别名称的命令（如令牌），basic_option 的实例将添加到结果中，并将“未识别”字段设置为“真”。可以使用“collect_unrecognized”功能收集所有无法识别的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T09:15:02.270

当我使用“parse_config_file”时，我在文档中看到“allow_unregistered”默认设置为false。

```
template<typename charT> 
  BOOST_PROGRAM_OPTIONS_DECL basic_parsed_options< charT > 
  parse_config_file(std::basic_istream< charT > &, 
                const options_description &, 
                bool allow_unregistered = false); 
```

所以我像这样修改了我的行：

旧代码：

```
po::store(po::parse_config_file< char >(filePath, options), vm); 
```

新代码：

```
po::store(po::parse_config_file< char >(filePath, options, true), vm); 
```

正如我所说，它有效。谢谢您的回答。

# asp.net - 需要在现场运行 iisreset 以查看更改，即使在 Visual Studio 重建之后？

> ID：15229181
> 
> 赞同：0
> 
> 时间：2013-03-05T16:33:36.007
> 
> 标签：asp.net, webforms

我以前没见过这个。我正在开发一个 ASP.Net Webforms 站点，重建它并在我的浏览器中刷新相关页面并没有显示任何更改。我必须运行 iisreset 才能做到这一点。

Visual Studio 2012 中是否有影响此的设置？在构建时，我的更改会进入我网站上的`bin`目录，就像我在我工作过的其他网站上所做的任何其他更改一样。

这是一个较旧的 ASP.net 站点（大约 2005 年），但它在 Windows 7 上的 IIS 7 中运行，在 .Net 4.0 应用程序池中运行良好……除了每次我想查看更改时都必须运行 iisreset。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:36:50.570

检查您的 IIS 配置以确保您的应用程序池在构建/配置更改时循环使用。

还要检查您的路径是否打开了 IIS 输出缓存。

# .net - 具有预编译视图的助手

> ID：15229183
> 
> 赞同：4
> 
> 时间：2013-03-05T16:33:40.133
> 
> 标签：.net, asp.net-mvc, razor, precompile, razorgenerator

我正在使用[RazorGenerator](http://razorgenerator.codeplex.com/)预编译我的视图。我还想使用 Global Razor 助手（在 App_Code 目录中的 cshtml 文件中定义）。但是编译抛出以下错误

> 当前上下文中不存在名称“KarbonHelper”

然而，智能感知似乎检测到了辅助方法。我已经按照以下博客[Razor Precompilation 合并了 Razor 预编译](http://stacktoheap.com/blog/2013/01/19/precompiling-razor-views-in-asp-dot-net-mvc-3/)

我还注意到，帮助文件 KarbonHelper.cshtml 实际上已预编译为预期位置的 .cs 文件

```
obj\CodeGen\App_Code\KoolHelper.cshtml.cs 
```

欢迎任何想法或建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-15T04:20:49.760

问题是`App_Code`代码生成器进程（由 Microsoft 的代码控制）为您创建了一个静态方法，而 RazorGenerator 为您创建了一个实例方法。

我仍在寻找不涉及可怕黑客攻击的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-29T09:04:20.357

首先尝试在 Views 文件夹`system.web.webPages.razor`中的文件部分下的命名空间部分下添加它（更改项目的基本命名空间的名称 - 这通常等于项目的名称 - 或者只需查看生成的文件中使用了哪个命名空间）。`Web.config``MyProjectBaseNamespace``KoolHelper.cshtml.cs`

```
 <add namespace="MyProjectBaseNamespace.App_Code" /> 
```

如果仍然有错误，请尝试在帮助程序的第一行添加此指令`App_Code`：

```
@* Generator: MvcHelper GeneratePrettyNames : true *@ 
```

然后，RazorGenerator 将生成一个继承`System.Web.WebPages.HelperPage`静态`@helper`方法的类，并且类名与文件名相同。

有关指令的更多信息： [https ://github.com/RazorGenerator/RazorGenerator#special-razor-directives](https://github.com/RazorGenerator/RazorGenerator#special-razor-directives)

# smalltalk - Smalltalk 自己的新方法

> ID：15229187
> 
> 赞同：1
> 
> 时间：2013-03-05T16:33:53.520
> 
> 标签：smalltalk, gnu-smalltalk

```
Object subclass: Node [     

    |value|

    new [
        Transcript show: 'Test'.
            value := 6.
    ]

    getValue [
        ^value.
    ]

    set:sth [
        value := sth.
    ]

]

|data|
data := Node new.
Transcript show: (data getValue) printString ; cr. "nil"
data set:5.
Transcript show: (data getValue) printString. "5" 
```

问题是一个`new`方法永远不会被调用，所以我不能设置值或调用初始化函数。此外，在这样的事情之后：

```
object := Node new. "Not called"
object new. "Here is called" 
```

该方法被调用。如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T17:19:11.437

`#new`必须定义`Node class`为工作：

```
Object subclass: Node [     

    |value|

    getValue [
        ^value.
    ]

    set: sth [
        value := sth.
    ]

]

Node class extend: [
    new [ | node |
        Transcript show: 'Test'.
        node := (super new).
        node set: 6.
        ^ node
    ]
] 
```

请注意，在这种情况下`value`无法访问`#new`，因此必须调用 setter

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T17:06:04.000

据我了解，您将 new 定义为实例的方法而不是类。

当您调用 时`Node new`，会向类对象发送一条消息`Node`，它会创建一个您自己分配给`object`变量的实例。然后，当您发送`new`到该变量时，接收器是`Node`您定义的实例`new`

[这是一个关于如何在 GNU Smalltalk http://www.gnu.org/software/smalltalk/manual/html_node/Defining-methods.html](http://www.gnu.org/software/smalltalk/manual/html_node/Defining-methods.html)中向类添加方法的示例

# iphone - UILabel 表现得很奇怪

> ID：15229188
> 
> 赞同：0
> 
> 时间：2013-03-05T16:34:02.387
> 
> 标签：iphone, ios, uiscrollview, uipagecontrol, autoresizingmask

我有一个`UIPageControl`和一个`UIScrollView`，您需要滑动它们才能更改`UILabel`标题和`UITextView`内容的视图。

在**纵向**视图上，除了一个小问题外，两者都很好`UILabel`。`UITextView`无论`textAlignment`my`UILabel`是**Center**还是**Right**，它总是显示在视图的**左下角**。

现在到**景观**视图。这是大多数问题发生的地方。

这是它的样子，

![在此处输入图像描述](../Images/400ab38026f04c9220ece85ec48817cf.png)

至于代码，

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    pageControl.currentPage = 0;
    pageControl.numberOfPages = 4;

    scrollView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin;
    pageControl.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleTopMargin;
}

- (void)contentSize
{
    for (int i = 0; i < 4; i++) {
        CGRect textViewFrame = CGRectMake(scrollView.frame.size.width * i, 30.0, 320.0, scrollView.frame.size.height - 30.0);

        CGRect labelFrame = CGRectMake(scrollView.frame.size.width * i, 0.0, 320.0, 0.0);

        UITextView *textView = [[UITextView alloc] initWithFrame:textViewFrame];
        UILabel *label = [[UILabel alloc] initWithFrame:labelFrame];

        switch (i) {
            case 0:
                label.text = @"Test 1";
                textView.text = @"Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi. Nam liber tempor cum soluta nobis eleifend option congue nihil imperdiet doming id quod mazim placerat facer possim assum. Typi non habent claritatem insitam; est usus legentis in iis qui facit eorum claritatem. Investigationes demonstraverunt lectores legere me lius quod ii legunt saepius. Claritas est etiam processus dynamicus, qui sequitur mutationem consuetudium lectorum. Mirum est notare quam littera gothica, quam nunc putamus parum claram, anteposuerit litterarum formas humanitatis per seacula quarta decima et quinta decima. Eodem modo typi, qui nunc nobis videntur parum clari, fiant sollemnes in futurum.";
                break;

            case 1:
                label.text = @"Test 2";
                textView.text = @"2";
                break;

            case 2:
                label.text = @"Test 3";
                textView.text = @"3";
                break;

            case 3:
                label.text = @"Test 4";
                textView.text = @"4";
                break;

            default:
                break;
        }

        textView.editable = NO;
        textView.textColor = [UIColor grayColor];
        textView.textAlignment = NSTextAlignmentRight;
        [textView setFont:[UIFont fontWithName:@"Symbol" size:13]];

        label.textAlignment = NSTextAlignmentCenter;
        [label setFont:[UIFont fontWithName:@"AmericanTypewriter" size:20]];
        [label sizeToFit];

        [scrollView addSubview:label];
        [scrollView addSubview:textView];
    }

    scrollView.contentSize = CGSizeMake(scrollView.frame.size.width * 4, scrollView.frame.size.height);
}

- (void)viewDidLayoutSubviews
{
    [self contentSize];
}

- (void)scrollViewDidScroll:(UIScrollView *)sender
{
    CGFloat pageWidth = scrollView.frame.size.width;
    int page = floor((scrollView.contentOffset.x - pageWidth / 2) / pageWidth) + 1;
    self.pageControl.currentPage = page;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:52:30.927

首先，使用`[label sizeToFit];`会减少标签的宽度，这就是为什么它总是在左边。这就是它应该做的，如果你不想减小它的大小并将标签的宽度保持在页面的宽度，那么就不要使用它。

发生滚动页面问题是因为调整滚动视图大小时滚动内容不会改变。你需要做的是，当方向改变时（可以在 `(void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration`）：

*   设置新的框架尺寸后，调整滚动视图的内容大小（页面现在具有更小的高度和更大的宽度）。

*   将子视图的框架更改为新方向（即，为页面分配滚动视图的新边界并重新分配 origin.x）

*   如果需要，调整每个页面中的内容

*   滚动到您当前正在观看的页面：

代码（来自我拥有的寻呼机组件，可能需要调整一些内容以供您工作）：

```
-(void) scrollToCurrentPage {
    CGRect frameCurrent =  scrollview.frame;
    frameCurrent.origin.x = _currentPageNumber*frameCurrent.size.width;
    frameCurrent.origin.y = 0;
    //_currentPage is a reference to the page that was being watched before rotation
    _currentPage.frame = frameCurrent; 
    [_container scrollRectToVisible: frameCurrent animated: NO];
} 
```

# android - 如何为微调器添加额外的价值

> ID：15229189
> 
> 赞同：0
> 
> 时间：2013-03-05T16:34:04.343
> 
> 标签：android, android-spinner

在这里解决的是解决方案答案[http://www.congdegnu.es/2011/06/02/spinners-en-android-tres-formas-de-poblarlos/](http://www.congdegnu.es/2011/06/02/spinners-en-android-tres-formas-de-poblarlos/) 我正在从我的 sqlite 数据库中填充一个微调器，如下所示：

```
Cursor CS = newDB.rawQuery("Select ID AS _id, Name from Schools",null);
    CS.moveToFirst();
    do{     
        Schools.add(CS.getString(CS.getColumnIndex("_id")));   
    } while(CS.moveToNext());

ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,
    android.R.layout.simple_spinner_item,Schools);

dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

spinner1.setAdapter(dataAdapter); 
```

我的问题是我只添加了一个 id 但我怎样才能为该 id 添加一个值，所以当值获取时我得到了 id ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:40:36.640

我认为“学校”是一个包含您自己的班级“学校”的数组。
您可以添加一个包含信息的属性。
或者您可以使用二维数组。
比你必须设置你的 arrayadapter 来获取信息（getter 方法）。
希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T16:43:06.447

试试[光标适配器](http://developer.android.com/reference/android/widget/CursorAdapter.html)

或者

取一个全局变量

```
 Hashmap schoolmap=new Hashmap(); 
```

在向列表中插入数据的同时，也像这样添加到 Hashmap

```
CS.moveToFirst();
    do{     
        Schools.add(CS.getString(CS.getColumnIndex("_id")));   
        schoolmap.put(CS.getString(CS.getColumnIndex("_id")),CS.getColumnIndex("_id"))
    } while(CS.moveToNext()); 
```

onSpinner 项目单击获取这样的值

```
spinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {

         public void onItemSelected(AdapterView<?> parent, View view, 
                    int pos, long id) {
              String value=((TextView)view).getText();
              int id=Integer.parseInt(schoolmap.get(value));
            }

            public void onNothingSelected(AdapterView<?> parent) {

            }

    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T16:55:06.833

1) Create an `ArrayList<School>`

2) Add all your Schools to the Arraylist

3) Create a custom adapter like this:

```
public class SchoolAdapter extends ArrayAdapter<School>{

    public SchoolAdapter(Context ctx, List<School> schools){
        super(ctx, 0, schools);
    }

    @Override
    public View getView(final int position, final View convertView, final ViewGroup parent) {

        TextView tv;
        if (convertView == null){
            tv = new TextView(getContext());
        } else {
            tv = (TextView) convertView;
        }
        tv.setTextSize(16);
        final School school = getItem(position);
        tv.setText(school.toString());
        return tv;
    }

} 
```

4) Use this in your activity:

```
final SchoolAdapter adapter = new SchoolAdapter(this, schools);
spinner.setAdapter(adapter);
spinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {

     public void onItemSelected(AdapterView<?> parent, View view, 
                int pos, long id) {
         School school = adapter.getItem(pos);
         // Do whatever you want with your school            

     }

     public void onNothingSelected(AdapterView<?> parent) {

     }

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T16:38:17.363

看看使用[SimpleCursorAdapter](http://developer.android.com/reference/android/widget/SimpleCursorAdapter.html)代替您的微调器。尽管这自 API-11 以来已被弃用，但您可能还想考虑将[LoaderManager](http://developer.android.com/reference/android/app/LoaderManager.html)与[CursorLoader](http://developer.android.com/reference/android/content/CursorLoader.html)一起使用。

关于如何转换到 LoaderManager 和 CursorLoader 的解释可以在这里找到： [如何从 managedQuery 转换到 LoaderManager/CursorLoader？](https://stackoverflow.com/questions/8899497/how-to-transition-from-managedquery-to-loadermanager-cursorloader)

我建议您从使用 SimpleCursorAdapter 开始，然后如果足够舒适，请继续使用其他方法。

# qt - Qwidget 中的 Qt::Pixmap 未显示在 MainWindow 中

> ID：15229192
> 
> 赞同：0
> 
> 时间：2013-03-05T16:34:07.120
> 
> 标签：qt, qwidget, qpixmap

这是 Qt 的另一个新手。

我需要做的是在 MainWindow 的中心有一个可滚动的区域，它显示图像，并允许用户在图像上绘画。

由于我无法将 QPixmap 直接添加到可滚动区域，因此我尝试创建 QWidget 的子类，如下所示：

```
class Canvas: public QWidget
{
public:
    Canvas(){
    image = new QPixmap(480,320);
    image->fill(Qt::red);
    }
    QPixmap *image;
}; 
```

然后我在头文件中声明了 Canvas *c。

在实现中，我写道：

```
 canvas = new Canvas;
  setCentralWidget(canvas); 
```

但是，显然这无助于显示 QPixmap。我不知道该怎么办。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T16:52:42.717

You don't need to subclass QWidget for this. QPixmap is not a widget, so it is not shown anywhere. You need to add your pixmap to some widget, this will work:

in header:

```
QLabel* imageLabel; 
```

in cpp:

```
imageLabel = new QLabel(this);
QPixmap image(480,320);
image.fill(Qt::red);
imageLabel->setPixmap(image);
setCentralWidget(imageLabel); 
```

# c# - C# Object Initializer：从另一个设置属性

> ID：15229194
> 
> 赞同：4
> 
> 时间：2013-03-05T16:34:17.210
> 
> 标签：c#, object-initializers

我有以下对象，在我的构造函数中我添加了一个新的 Guid 作为 Id。

```
public class MyObject
{
  public MyObject()
  {
    Id = Guid.NewGuid().ToString();
  }

  public String Id { get; set; }
  public String Test { get; set; }

} 
```

我想在对象初始化器中做类似的事情：

```
var obj = new MyObject
{
  Test = Id; // Get new GUID created in constructor
} 
```

是否可以？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T16:35:18.387

不，你不能那样做。您必须将其设置在单独的语句中：

```
var obj = new MyObject();
obj.Test = obj.Id; 
```

对象初始化器中属性的右侧只是一个普通表达式，与正在初始化的对象没有内在联系。

如果这是您经常想要对一种特定类型执行的操作，您可以添加一个方法：

```
public MyObject CopyIdToTest()
{
    this.Test = Id;
    return this;
} 
```

然后使用：

```
MyObject obj = new MyObject().CopyIdToTest(); 
```

或具有其他属性：

```
MyObject obj = new MyObject 
{
    // Set other properties here
}.CopyIdToTest(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T16:40:44.813

不——你不能在初始化器中访问对象的属性。初始化程序基本上是程序员的一些语法糖。

考虑以下情况：

```
class Program
{
    static void Main()
    {
     var Id = "hello";
    var obj = new MyObject
        {
            Test = Id // Get new GUID created in constructor
        };
    }
} 
```

The `Id` you'd assign (if your idea was valid, which again, it isn't) isn't necessarily the `Id` you'd be getting.

# asp.net - 我们可以在同一个服务（ServiceContract）中为不同的方法（OperationContract）使用 DataContractSerializer、XMLFormatSerializer 吗？

> ID：15229195
> 
> 赞同：3
> 
> 时间：2013-03-05T16:34:17.073
> 
> 标签：asp.net, wcf, c#-4.0, wcf-binding

代码：

```
 public interface IServices
        {
        [OperationContract]
        [XmlSerializerFormat]
        GetProductsResponse Getproducts(GetProductsRequest productsrequest);

        [OperationContract]
        SaveProductsResponse SaveProducts1(SaveProductsRequest1 productsrequest);
        }     

        [DataContract]
        public class SaveProductsRequest1
        {
            [DataMember]
            public List<Person> Persons;
        }

        [DataContract]
        public class Person
        {
            [DataMember]
            public int Id;
        } 
```

客户 ：

```
 ServicesClient client = new ServicesClient();
    SaveProductsRequest1 req = new SaveProductsRequest1();
    req.Persons = new List<Person> { new Person { Id = 10 } }.ToArray();
    client.SaveProducts1(req); 
```

我正在`SaveProducts1`从客户端调用调用，但无法在我的服务端获取值“10”（似乎是反序列化问题）。但是当我`[XmlSerializerFormat]`从调用中删除属性时`Getproducts`，它工作正常，我能够看到值 10。

为什么会发生（为什么 SaveProducts1 依赖于 Getproducts OperationContract）？当我想同时使用 xml 和 datacontract 序列化时，我应该提供什么解决方法？任何帮助表示赞赏。

注意：我有非常更新的代理。我在代理中没有看到任何问题。即使我尝试了一个样本并遇到了同样的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:58:36.953

`XmlSerializerFormat`添加属性后，您是否刷新了客户服务参考？可能是合同不再匹配。

# php - casperjs 无法通过 php 的 shell exec 生成图像

> ID：15229196
> 
> 赞同：0
> 
> 时间：2013-03-05T16:34:19.833
> 
> 标签：php, shell, phantomjs, casperjs

当我通过 ubuntu 终端运行 casper 脚本时，它会捕获网站（按预期生成 img），但是当我将该命令提供给 php 的 shell exec 时，它无法生成 img。有什么普遍问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-27T09:57:05.223

十分钟前我遇到了这个问题！对我来说，问题是权限。我用以下命令解决了它：

sudo chown -R www-data:www-data ./

但是我不建议您随意运行，我在过去玩权限时严重搞砸了我的服务器！

# r - R：应用中的行名、列名、暗名和名称

> ID：15229199
> 
> 赞同：8
> 
> 时间：2013-03-05T16:34:28.630
> 
> 标签：r, function, base, apply

我想使用 apply 来遍历矩阵的行，并且我想在我的函数中使用当前行的行名。看来您不能使用`rownames`, `colnames`,`dimnames`或`names`直接在函数内部。我知道我可能可以根据[这个问题](https://stackoverflow.com/q/10956873/1478381)中的信息创建一个解决方法。

但我的问题是如何`apply`在它的第一个参数中处理数组的行名和列名，以及如何将名称分配给在调用的函数内创建的对象`apply`？这似乎有点不一致，我希望通过下面的例子来说明。设计成这样是有原因的吗？

```
# Toy data
m <- matrix( runif(9) , nrow = 3 )
rownames(m) <- LETTERS[1:3]
colnames(m) <- letters[1:3]
m
          a         b           c
A 0.5092062 0.3786139 0.120436569
B 0.7563015 0.7127949 0.003358308
C 0.8794197 0.3059068 0.985197273

# These return NULL
apply( m , 1 , FUN = function(x){ rownames(x) } )
NULL
apply( m , 1 , FUN = function(x){ colnames(x) } )
NULL
apply( m , 1 , FUN = function(x){ dimnames(x) } )
NULL

# But...
apply( m , 1 , FUN = function(x){ names(x) } )
     A   B   C  
[1,] "a" "a" "a"
[2,] "b" "b" "b"
[3,] "c" "c" "c"
# This looks like a column-wise matrix of colnames, with the rownames of m as the column names to me

# And further you can get...
n <- apply( m , 1 , FUN = function(x){ names(x) } )
dimnames(n)
[[1]]
NULL

[[2]]
[1] "A" "B" "C"

# But you can't do...
apply( m , 1 , FUN = function(x){ n <- names(x); dimnames(n) } )
NULL 
```

我只是想了解 apply 内部会发生什么？非常感谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-05T16:45:01.050

我认为您的困惑源于`apply`没有将数组（或矩阵）传递给`FUN`.

它依次传递矩阵的每一行。每行本身“只是”一个（命名的）向量：

```
> m[1,]
         a          b          c 
0.48768161 0.61447934 0.08718875 
```

所以你的函数只有这个命名的向量可以使用。

对于您的中间示例，如中所述`apply`：

> 如果对 FUN 的每次调用都返回一个长度为 n 的向量，则如果 n > 1，apply 返回一个维度为 c(n, dim(X)[MARGIN]) 的数组。如果 n 等于 1，如果 MARGIN 的长度为 1，则 apply 返回一个向量以及维度为 dim(X)[MARGIN] 的数组。

所以`function(x) names(x)`为每一行返回一个长度为 3 的向量，所以最终的结果就是你看到的矩阵。但是该矩阵是在函数的末尾构造的`apply`，其结果`FUN`是单独应用于每一行的。

# c# - TransactionScope 而不是使用锁

> ID：15229201
> 
> 赞同：4
> 
> 时间：2013-03-05T16:34:34.937
> 
> 标签：c#, entity-framework-5, transactionscope

我目前有一种方法可以读取数据以确定是否需要更新，然后将更新推送到数据库（依赖注入）。该方法受到了很大的打击，我发现了与并发相关的错误，即多次更新，因为多个线程在第一次更新之前读取数据。

我用锁解决了这个问题，效果很好。我怎样才能使用 TransactionScope 来做同样的事情？我可以吗？它会像锁一样阻塞另一个线程吗？此外，我可以像使用锁一样“锁定”一个特定的“id”吗（我保留一个字典，存储一个要为每个 id 锁定的对象）？

我正在使用 Entity Framework 5，尽管它被存储库和工作单元模式隐藏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T19:10:30.970

应用程序级锁定可能不是解决此问题的方法。首先，您通常只需要锁定单个记录或记录范围。接下来，您可能稍后需要锁定另一个修改并进入相当复杂的代码。

这种情况通常使用乐观或悲观并发来处理。

*   乐观并发 - 您将拥有额外的数据库生成列（数据库通常具有特殊类型，如时间戳或行版本）。每次更新记录时，数据库都会自动更新该列。如果将此列配置为行版本，EF 将在更新的 where 条件中包含该列 => 执行的更新将搜索具有给定键和行版本的记录。如果找到记录，它将被更新。如果未找到该记录，则意味着具有该键的记录不存在或其他人在当前进程加载其数据后更新了该记录=>您将收到异常，您可以尝试刷新数据并再次保存更改。此模式对于更新不多的记录很有用。在您的情况下，它可能会导致另一个麻烦。
*   悲观并发 - 此模式使用数据库锁定代替。当您查询记录时，您将锁定它以进行更新，因此其他人也无法将其锁定以进行更新或直接更新。不幸的是，此模式目前在 EF 中没有直接支持，您必须通过原始 SQL 执行它。我写了[一篇文章解释了悲观并发](http://www.ladislavmrnka.com/2012/09/entity-framework-and-pessimistic-concurrency/)及其与 EF 的用法。即使是悲观并发也可能不是数据库重负载的好解决方案。

如果您确实构建了一个解决方案，其中许多并发进程一直试图更新相同的数据，那么您最终可能会重新设计，因为不会有基于锁定或重新运行失败更新的可靠的高性能解决方案。

# python - python中的file.write()

> ID：15229202
> 
> 赞同：2
> 
> 时间：2013-03-05T16:34:40.853
> 
> 标签：python

```
import os
import sys
import re
import string

f=open('./iprange','r')
s=f.readline()
f.close()
pattern='inet addr:'+s
pattern=pattern.split('x')[0]
pattern='('+pattern+'...'+')'

os.system('ifconfig -a >> interfaces')
f=open('./interfaces','r')
s=f.readline()

while (len(s))!=0:
    i=re.search(pattern,s)
    if i!=None:
        sp=re.split(pattern,s)[1]
        ip=re.split('inet addr:',sp)[1]
        break
    s=f.readline()

f.close()
os.system('rm ./interfaces')
f=open('./userip','w')
f.write(ip)
f.close()

NameError;name 'ip' is not defined 
```

我拆分并将结果存储在 中`pattern`，然后我找到 IP 地址并将结果存储在. 但是错误说未定义-发生了什么？`s``sp``ip``ip`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T16:37:11.387

```
while (len(s))!=0:
    i=re.search(pattern,s)
    if i!=None:
        sp=re.split(pattern,s)[1]
        ip=re.split('inet addr:',sp)[1]
        break
    s=f.readline() 
```

ip 分配位于 if 闭包内，显然从未执行过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T18:14:00.533

我会做更多这样的事情：

```
import os
import sys
import re
from itertools import takewhile

with open('./iprange','r') as f:
    s = f.readline()

prefix = 'inet addr:'
pattern = prefix + s
pattern = pattern.split('x')[0]
pattern = '(%s...)' % pattern

os.system('ifconfig -a >> interfaces')
with open('interfaces', 'r') as f:
    # Put all lines up to the first empty line into a list
    # http://docs.python.org/2/library/itertools.html#itertools.takewhile
    # `[line.rstrip() for line in f]` could be a generator instead:
    # (line.rstrip() for line in f)
    lines = list(takewhile(lambda x: x, [line.rstrip() for line in f]))
os.remove('interfaces')

for s in lines:
    if re.search(pattern, s):
        sp = re.split(pattern, s)[1]
        ip = sp[len(prefix):]
        with open('./userip', 'w') as f:
            f.write(ip)
        break
else:
    print "No match found" 
```

一方面，您只有在找到匹配项时才写入文件`userip`，如果未找到匹配项，您会收到一条消息。

# java - JPA persistence.xml 添加类

> ID：15229203
> 
> 赞同：4
> 
> 时间：2013-03-05T16:34:42.957
> 
> 标签：java, hibernate, jpa

我对持久性 xml 中的类集成有疑问。

这样的事情可能吗？

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="ranea">
        <class>com.dal.pojo.*</class>
    </persistence-unit>
</persistence> 
```

我知道这不起作用....但是我有一个相当大的数据库结构，我希望回答如何轻松地将我的 pojo 类包含在持久性单元中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-22T01:32:48.630

如果您使用的是 Eclipse，您可以右键单击持久性并使用“同步类列表”。

# node.js - 使用keepalives高效关闭HTTP？

> ID：15229205
> 
> 赞同：2
> 
> 时间：2013-03-05T16:34:43.580
> 
> 标签：node.js, http

当所有连接都关闭时，此 Node.js 服务器将在 Ctrl+C 上完全关闭。

```
var http = require('http');
var app = http.createServer(function (req, res) {
  res.end('Hello');
});

process.on('SIGINT', function() {
  console.log('Closing...');
  app.close(function () {
    console.log('Closed.');
    process.exit();
  });
});

app.listen(3000); 
```

这样做的问题是它包括keepalive连接。如果您在 Chrome 中打开此应用程序的选项卡，然后尝试 Ctrl+C 它，则当 Chrome 最终释放连接时，它不会关闭大约 2 分钟。

是否有一种干净的方法可以检测何时不再有 HTTP 请求，即使某些连接仍处于打开状态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T16:52:52.493

`finish`您可以使用响应事件来破解一些请求跟踪：

```
var reqCount = 0;

var app = http.createServer(function (req, res) {
  reqCount++;
  res.on('finish', function() { reqCount--; });
  res.end('Hello');
}); 
```

允许您在关闭服务器时检查 reqCount 是否为零。

但是，正确的做法可能是不关心旧服务器，而只是启动一个新服务器。通常重新启动是为了获取新代码，因此您可以开始一个新进程而无需等待旧进程结束，可选择使用该`child_process`模块让一个顶级脚本管理整个事情。或者甚至使用该`cluster`模块，允许您在关闭旧进程之前启动新进程（因为`cluster`管理其子实例之间的流量平衡）。

我实际上还没有测试很远的一件事是，是否可以保证在`server.close()`返回后立即启动新服务器是安全的。如果没有，那么新服务器可能无法绑定。[`server.listen()`](http://nodejs.org/api/net.html#net_server_listen_port_host_backlog_callback)文档中有一个关于如何处理此类`EADDRINUSE`错误的示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T18:56:07.860

默认情况下没有套接字超时，这意味着连接将永远打开，直到客户端关闭它们。如果要设置超时，请使用此函数：[socket.setTimeout](http://nodejs.org/api/net.html#net_socket_settimeout_timeout_callback)。

如果您尝试关闭服务器，您根本无法关闭，因为有活动连接，因此如果您尝试正常关闭，则关闭功能将挂起。唯一的方法是设置超时并在超时时终止应用程序。

如果你有工人，这并不像用 杀死应用程序那么简单`process.exit()`，所以我制作了一个完全符合你要求的模块：[grace](https://github.com/Gagle/Node-Grace)。

# ember.js - 在路由上序列化在 emberjs 中创建额外的模型实例

> ID：15229206
> 
> 赞同：1
> 
> 时间：2013-03-05T16:34:44.913
> 
> 标签：ember.js

我想我偶然发现了 emberjs 中的一个错误，但在我指出它是一个错误之前，我想知道我是否一开始没有做错任何事情。我有一个艺术家列表（假设是“主”视图），当用户单击“阅读更多”链接时，他/她可以查看有关该特定艺术家的详细信息。为了使我的网址更具可读性，我正在使用“slug”（序列化）。

这是我的路由器的样子：

```
App.Router.map(function(){
  this.resource('artists', function(){
    this.resource('artist', {path:':artist_id'});
  });
}); 
```

这就是我的路线的样子：

```
App.ArtistsRoute = Ember.Route.extend({
  model: function() {
    return App.Artist.find();
  }
});

App.ArtistRoute = Ember.Route.extend({
  enter: function(){
    console.log("ENTER: Artistroute");
  },

  serialize: function(model, params) {
    return { artist_id: model.get('slug') };
  }
}); 
```

现在，当用户单击艺术家姓名时，问题就开始了，然后在插座中呈现详细的艺术家信息。由于某种原因，概览列表会使用空的艺术家条目进行更新。

当我注释掉以下几行时，问题就消失了：

```
/*
  serialize: function(model, params) {
    return { artist_id: model.get('slug') };
  },
*/ 
```

这是用户单击“阅读更多”链接之前和之后实现的序列化挂钩的屏幕截图：

![点击之前](../Images/dceeed5c06a7a7d0407343cfc7853c98.png)

![点击后](../Images/293d855d8628ec4378d111c9f0198432.png)

如您所见，突然有两个额外的艺术家对象被创建并添加到概览列表中。为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T17:15:32.773

> 如您所见，突然有两个额外的艺术家对象被创建并添加到概览列表中。为什么会这样？

发生这种情况是因为 ember（尚）不支持将别名传递给模型的`find()`方法。如果您通过 slug 和 id 加载相同的记录，您最终会在 Ember 身份映射中存储两条记录。因此，当您加载`/artists`和调用时`App.Artist.find()`，您的 api 会返回一堆 id 为 1、2、3 等的艺术家。当用户单击详细信息链接时，ember 正在调用`App.Artist.find(slug)`并使用 id=slug 而不是数字 id 保存响应。

正如您所指出的，当您注释掉自定义序列化程序时，一切正常，因为没有它，您只能通过数字 id 查找艺术家。

解决此问题的一种方法是，您可以考虑将 api 更改为仅使用 slugs 而不是数字 id。然后摆脱自定义序列化程序，一切都应该*正常工作*。您可以在以下位置实现自定义模型挂钩的另一种选择`App.ArtistRoute`：

```
App.ArtistRoute = Ember.Route.extend({
  model: function(params) {
    var artists = App.Artist.find({ slug: params.artist_id });

    artists.one("didLoad", function() {
      artists.resolve(artists.get("firstObject"));
    });

    return artists;
  }

  serialize: function(model, params) {
    return { artist_id: model.get('slug') };
  }
}); 
```

有关该问题的更详细信息，请参阅此博客文章：http: [//darthdeus.github.com/blog/2013/01/31/how-to-find-a-model-by-any-attribute-in-ember -dot-js/](http://darthdeus.github.com/blog/2013/01/31/how-to-find-a-model-by-any-attribute-in-ember-dot-js/)

# sql - 使用单独的日期/时间字段基于其他记录选择记录

> ID：15229207
> 
> 赞同：1
> 
> 时间：2013-03-05T16:34:45.613
> 
> 标签：sql

我有一个将日期和时间存储在不同字段中的数据库。我需要选择在每个发生的日期和时间的 + 和 - 90 分钟内发生的所有记录。

我能够以我需要的格式获得所有内容

```
SELECT UFV1.USR_DATE
,UFV1.USR_TIME
,LEFT(CAST(DATEADD(minute, -90, UFV1.USR_TIME) AS TIME),8) AS MIN_TIME
,LEFT(CAST(DATEADD(minute, +90, UFV1.USR_TIME) AS TIME),8)AS MAX_TIME
FROM USR_Y_FACILITY_VISIT UFV1

WHERE UFV1.MASTER_CUSTOMER_ID = '2'

ORDER BY UFV1.USR_DATE, UFV1.USR_TIME 
```

我被卡住的地方是我需要构建一个查询，该查询获取此信息（基本上是每行的最小值/最大值），然后根据该信息选择同一个表中的所有信息。感谢您的帮助，我完全不知道下一步该去哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:43:49.833

按照给定的方式将表的关键字段以及相应的 GROUP BY 子句添加到您的查询中。然后以这种格式查询连接到该查询的数据表作为太阳查询：

```
SELECT * 
FROM T
JOIN ( SELECT * ... ) U 
     ON U.key = T.key 
    AND T.dateTime BETWEENU.MinDateTime AND U.MaxDateTime 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T20:15:10.860

如果我正确理解了一个问题，那么这个请求对你来说是必要的

```
SELECT *
FROM USR_Y_FACILITY_VISIT UFV1
WHERE EXISTS (
              SELECT 1
              FROM USR_Y_FACILITY_VISIT UFV2
              WHERE UFV2.MASTER_CUSTOMER_ID = '2'
                AND UFV1.USR_DATE = UFV2.USR_DATE
                AND UFV1.USR_TIME BETWEEN CAST(DATEADD(minute, -90, UFV2.USR_TIME) AS time) 
                                    AND CAST(DATEADD(minute, 90, UFV2.USR_TIME) AS time) 
              ) 
```

# ruby-on-rails - 如何在 Rails 3.2 ( w assets ) 的初始化程序中重写路径

> ID：15229213
> 
> 赞同：0
> 
> 时间：2013-03-05T16:35:14.450
> 
> 标签：ruby-on-rails

我需要在带有资产 mgt 的 Rails 3.2 的初始化程序中编写它

```
Payday::Config.default.invoice_logo = "#{Rails.root}/public/images/store/logo.png" 
```

似乎asset_path("store/logo.png") 不工作..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:13:08.397

我发现您正在尝试做的事情有两个问题：首先，Rails 3.2 asset_path 指向 app/assets/ 因此 assets_path("images/store/logo.png") 正在查找：

```
"#{Rails.root}/app/assets/images/store/logo.png" 
```

其次，asset_path 在您的视图和 scss 中可用，而不是在您的初始化程序中。此问题的解决方案很大程度上取决于您尝试使用该 default.invoice_logo 完成什么。如果您提供更多背景信息，我们可能会为您提供更多帮助。

# python - 在 python 中应该用什么来代替与 False 的比较？

> ID：15229215
> 
> 赞同：2
> 
> 时间：2013-03-05T16:35:20.923
> 
> 标签：python, boolean, pychecker

我有一个函数，`False`如果找不到东西，则返回，否则返回我正在寻找的数据结构。当我将从此函数返回的值分配给循环中的变量`my_var`时`for`，我会`if my_var == False: continue`继续执行。

`pychecker`不喜欢这个并报告`Comparisons with False are not necessary and may not work as expected`。

这样做的python方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T16:41:19.603

作为表示没有结果的返回值，`None`几乎总是更好。

*   如果必须使用`False`，请使用`not my_var`. 这假定非`False`返回值永远不会“虚假”（`bool()`将其转换`False`为空字符串、空集合和其他一些东西的情况）。

*   如果对象可能是虚假的，但必须与 区分`False`，那么比较是必要的，您将不得不忽略错误（一个小的变化，`my_var is False`会稍微更惯用，但实际上是相同的）。但这不是一个很好的情况，你应该避免它，因为它是假的。

重复我自己：如果可能的话，使用`None`并测试`my_var is None`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T16:44:16.507

通常，如果对象不匹配，您将返回`None`而不是ie。`False`然后`if my_var == None:`全部检查`not 0`，`not False`然后`not None`返回`True`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T16:46:36.927

如果您只想检查虚假值：

```
myval = findit('something')
if not myval:
   "not found" 
```

如果您实际上可以为具有虚假值的“is-found”案例返回一个值，则您不想这样做。例如，如果`[]`找到（空列表），这仍然会报告“未找到”。

如果您关心它实际上是`False`，请使用`is`. `True`, `False`, 和`None`是单例，所以使用了恒等比较运算符。

```
if myval is False:
   "not found" 
```

在这种情况下，您使用`False`作为哨兵值来指示没有结果。

但是，通常`None`用作标记“无值”，因此我建议您更改函数的签名以`None`在未找到值时返回。这更符合 Python 习惯用法和方法的行为，例如`{}.get('missing-key')`.

```
myval = findit('something')
if myval is None:
    "not found" 
```

如果因为可以返回任何值（偶数`None`或`False`）而没有标记值是可能的，Python 使用异常来表示没有找到值。例如`{}['missing-key']`会加注`KeyError`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T16:36:41.030

通常你只会使用`not`：

```
if not my_var: continue 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-05T16:39:41.193

在这方面，Python 实际上比 C++ 的类型更强大。只有真正的布尔值可以是 True 或 False。

所以`my_var`必须是一个布尔值。因此，您只需将其作为一个来检查。

```
if not my_var:
     continue 
```

# javascript - dust.js 模板中的变量和存储/比较值

> ID：15229218
> 
> 赞同：1
> 
> 时间：2013-03-05T16:35:27.117
> 
> 标签：javascript, json, dust.js

是否可以使用dust.js 模板将视图值从循环中的一次迭代与下一次迭代进行比较？这似乎是一个上下文问题，我在dust.js 文档或此处的任何帖子中都没有看到这一点。例如，使用这个 JSON 视图：

```
{
    people: [ 
        { name: "Fred", row: 1 },
        { name: "Harry", row: 2 },
        { name: "Linda", row: 2 },
        { name: "Mary", row: 5 },
        { name: "Bob", row: 6 },
        { name: "Joey", row: 6 }
    ]
} 
```

如果我想要这个 HTML 输出：

```
<br/>Fred
<br/>Harry Linda
<br/>
<br/>
<br/>Mary
<br/>Bob Joey 
```

模板与这个简单的模板有何不同？

```
{#people}
    <br/>{name}
{/people} 
```

我意识到dust.js是没有逻辑的，我可以像下面这样以不同的方式构造数据，但我想知道我所描述的是否可以完成。

```
{
    people: [ 
        line: [ { name: "Fred", row: 1 } ],
        line: [ { name: "Harry", row: 2 }, { name: "Linda", row: 2 } ],
        line: [ ],
        line: [ ],
        line: [ { name: "Mary", row: 5 } ],
        line: [ { name: "Bob", row: 6 }, { name: "Joey", row: 6 } ]
    ]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T05:15:27.077

我几乎可以肯定这是不可能的。正如您所说，使用第二种方法，尽管在这种方法中，您不再需要 row 属性。

# jquery - 防止级联刷新

> ID：15229225
> 
> 赞同：0
> 
> 时间：2013-03-05T16:35:46.070
> 
> 标签：jquery, triggers, setinterval, cascading

我有一个 header.js，在其就绪部分中包含以下内容：

```
 var auto_refresh = setInterval(function () {
        var theToken = $('#token').text();
        $('#error-div').text('');
        $('#load_me').load("http://localhost:8080/sc_demo/tasklist.jsp?app=Home&process=tasklist&userToken="+theToken
            ).fadeIn("slow");                
}, 30000); // autorefresh the content of the div after every 3000 milliseconds(30sec) 
```

现在，它加载的页面“tasklist.jsp”被加载到当前页面的一个 div 中，并且应该每 30 秒刷新一次。tasklist.jsp 具有需要服务的“点击”事件，并由 header.js 中的点击事件处理。为了让这些工作正常，即使 tasklist.jsp 被加载到已经包含 header.js 的页面中，我也必须在 tasklist.jsp 中包含 header.js。然而，这会导致级联重载。我该如何防止这种情况？尝试体面的代码重用真的不可能吗？如果 header.js 应该已经在我加载我的部分的页面中，为什么我还需要包含它？

# java - 当有人在 smackx 中加入或离开 MultiUserChat 时，如何找出房间的入住者？

> ID：15229226
> 
> 赞同：4
> 
> 时间：2013-03-05T16:35:48.257
> 
> 标签：java, xmpp, smack

我正在尝试使用 smackx api 实现 MultiUserChat。

到目前为止，我设法创建了一个新的 MultiUserChat 房间，加入它并发送邀请。我现在的问题是如果有人加入或离开聊天室，如何找出谁在聊天室。我认为在聊天室中添加一个在场监听器可能会奏效：

```
muc.addParticipantListener(new PacketListener() {

    @Override
    public void processPacket(Packet packet) {
        System.out.println("user count changed, now:" + muc.getOccupcantsCount());
    }
}); 
```

`addParticipantListener`状态的 Javadoc

> 添加一个数据包侦听器，将通知发送到群聊的任何新 Presence 数据包。使用侦听器是一种合适的方式来了解何时应重新加载由于任何更改而应重新加载的居住者列表。

所以我认为这会起作用。但是，在`processPacket`方法内`muc.getOccupantsCount()`以及两者都在调用`muc.getOccupants()`之前返回值。`processPacket`因此，如果聊天室中只有一个用户而另一个用户加入，则输出将是

> 用户数已更改，现在：1

如果有两个用户和另一个联接，则输出为

> 用户数已更改，现在：2

如果有 3 个用户和 1 个离开，则输出为

> 用户数已更改，现在：3

分别，`muc.getOccupants()`不会给我调用时刚刚加入的用户，`processPacket`仍然给我刚刚离开的用户。

如何从内部有效地找出当前在聊天室的人`processPacket`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T12:51:14.670

你不能。不在 a`PacketListener`和内`muc.getOccupantsCount()`。

乘员人数也[通过使用`PacketListener`within smackx](http://fisheye.igniterealtime.org/browse/smack/trunk/source/org/jivesoftware/smackx/muc/MultiUserChat.java?r1=13458&r2=13458&u=3#to2155)来确定。并且不能保证这`PacketListener`会在您之前运行，因此有机会更新乘员人数。

现在解决它的一种方法是检查存在数据包并将其与当前成员列表进行交叉检查。基本上和内置的存在监听器一样。或者您可以人为地延迟操作，以便所有人`PacketListeners`都有机会完成。

我创建了[SMACK-424](http://issues.igniterealtime.org/browse/SMACK-424)来跟踪 Smack 中的这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-28T04:39:58.623

这是一个很好的问题，并找出这些方法（例如getOc​​cupants()、getOc​​cupantsCount()）在实际效果中的不足之处。

如您所见，关键问题是 PacketListeners 无法及时响应。所以你需要的是检测用户状态活动。使用Presence检测用户状态是保证用户信息及时更新的有效方法。此外，可能存在其他方法来实现它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-28T15:45:35.203

对于您的新问题，即如果没有房间名称，我们如何初始化 MultiuserChat，我找到了 MultiUserChat 的源代码，并且只声明了一个构造函数：

```
 public MultiUserChat(Connection connection, String room) {
        this.connection = connection;
        this.room = room.toLowerCase();
        init();
    } 
```

# javascript - 单击删除类并使用 JQuery 取消选择输入

> ID：15229232
> 
> 赞同：0
> 
> 时间：2013-03-05T16:35:58.290
> 
> 标签：javascript, jquery, html

我有一个列表项，每个列表项都有一个单选按钮输入，单击列表项时会检查输入。但是，如果再次单击，我想删除该类并取消选择该选项。然而，我似乎无法得到任何工作。

```
function setupToptions() {
    if ($('ul.top-options input').length) {
        $('ul.top-options li').each(function(){ 
            $(this).removeClass('active');
        });
        $('ul.top-options li input:checked').each(function(){ 
            $(this).parent('li').addClass('active');
        });                
    };
}; 
```

[http://jsfiddle.net/BKgdc/4/](http://jsfiddle.net/BKgdc/4/)

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T16:58:16.830

```
 $('ul.top-options li input[type=radio]').click(function() {
     if(!$(this).closest('li').hasClass('active')){
         $('ul.top-options li').removeClass('active');
         $(this).closest('li').addClass('active');
     }else
         $(this).removeAttr('checked').closest('li').removeClass('active');
}); 
```

[http://jsfiddle.net/BKgdc/8/](http://jsfiddle.net/BKgdc/8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T16:37:41.863

您需要有一个事件处理程序：

```
$('ul.top-options input').change(function(){
    if ($('ul.top-options input').length) {
        $('ul.top-options li').each(function(){ 
            $(this).removeClass('active');
        });
        $('ul.top-options li input:checked').each(function(){ 
            $(this).parent('li').addClass('active');
        }); 
     }
}); 
```

但您的代码可以简化为

```
$('ul.top-options input').change(function(){
     $('ul.top-options li').removeClass('active');
     $('ul.top-options li input:checked').parent('li').addClass('active');
}); 
```

看[**演示**](http://jsfiddle.net/vnRKJ/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T16:45:03.940

```
$(document).ready(function() {

    $li = $('ul.top-options li');
    $li.click(function() {
        if(!$(this).hasClass('active')){
        $li.removeClass('active')
        .filter(this).addClass('active').find('input').prop('checked', true);
        } else {
            $(this).removeClass('active');
            $(this).find('input').prop('checked', false);
        }
    });
    $li.filter(':has(:checked)').click();

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T16:46:46.930

您的解决方案是使用复选框而不是单选按钮。使用复选框时不需要任何 javascript。

如果你想取消选择一个单选按钮，你应该删除它的`selected`属性。`:checked`仅适用于复选框。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T16:50:09.440

您可能需要这样做：

```
$li = $('ul.top-options li');
$li.click(function () {
    var self = $(this);
    $li.not(self).removeClass('active');
    (self.hasClass('active') ? (self.removeClass('active').find('input').prop('checked', false)) : (self.addClass('active').find('input').prop('checked', true)));
});
$li.filter(':has(:checked)').click(); 
```

替代条件形式：

```
$li = $('ul.top-options li');
$li.click(function () {
    var self = $(this);
    $li.not(self).removeClass('active');
    if (self.hasClass('active')) {
        self.removeClass('active').find('input').prop('checked', false);
    } else {
        self.addClass('active').find('input').prop('checked', true);
    }
});
$li.filter(':has(:checked)').click(); 
```

一个在行动中展示的小提琴：http: [//jsfiddle.net/ZK4th/](http://jsfiddle.net/ZK4th/)

# java - 我如何从一个编译单元实例化一个对象

> ID：15229233
> 
> 赞同：1
> 
> 时间：2013-03-05T16:35:58.980
> 
> 标签：java

我正在尝试开发一个插件，它从一个 java 文件生成测试和表类......当我选择一个 Java 源时，我将能够有一个选项“生成类测试”，这是我正在恢复 Java 的问题文件为`ICompliationUnit`，然后我有一个`xtract`对象的方法，这就是为什么；我想将其解析为`IComplilationUnit`代表的类的实例，我尝试使用`Class.forName`但它不起作用，这就是代码：

```
 private void write(String dir, ICompilationUnit cu) throws JavaModelException
   {

      try
      {
         cu.getCorrespondingResource().getName();
         System.out.println("0000000000000" + cu.getJavaProject().getProject().toString());
      }
      catch (JavaModelException e1)
      {
         // TODO Auto-generated catch block
         e1.printStackTrace();
      }
      String test = cu.getCorrespondingResource().getName();
      IPackageDeclaration[] test1 = cu.getPackageDeclarations();
      // Need
      String[] name = test.split("\\.");

      String contentFile = dir + "\\" + name[0] + "content.txt";
      GenerateFitnessTable inst = new GenerateFitnessTable();
      try
      {

         String pack = test1[0].toString().substring(7, test1[0].toString().indexOf("[") - 1) + "." + name[0];
         @SuppressWarnings("rawtypes")
         Class classe = Class.forName(cu.getJavaProject().getProject().toString()
                  .substring(cu.getJavaProject().getProject().toString().indexOf("/"), cu.getJavaProject().getProject().toString().length())
                  + pack);
         try
         {
            classe.newInstance();
         }
         catch (InstantiationException e)
         {
            // TODO Auto-generated catch block
            e.printStackTrace();
         }
         catch (IllegalAccessException e)
         {
            // TODO Auto-generated catch block
            e.printStackTrace();
         }
      }

      catch (ClassNotFoundException e1)
      {
         System.out.print("****************************la classe n'existe pas");
      }
      try
      {
         inst.generateContent(cu, contentFile);
      }
      catch (IOException e)
      {
         // TODO Auto-generated catch block
         e.printStackTrace();
      }
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:46:02.753

这是正确的方法；）），我找到了：

```
 // nouveau region
     region = JavaCore.newRegion();
     // ajout de la classe selectionné a cette region
     region.add(cu);

     if (JavaCore.getGeneratedResources(region, true).length == 0)
     {
        //  bug

     }
     // recuperer l'url de .class 
     String url = "file:" + JavaCore.getGeneratedResources(region, true)[0].getLocation().makeAbsolute();
     URL myUrl = new URL(url);
     URLConnection connection = myUrl.openConnection();
     InputStream input = connection.getInputStream();
     ByteArrayOutputStream buffer = new ByteArrayOutputStream();
     int data = input.read();

     while (data != -1)
     {
        buffer.write(data);
        data = input.read();
     }

     input.close();

     byte[] classData = buffer.toByteArray();

     clas = defineClass(pack.substring(1, pack.length()), classData, 0, classData.length); 
```

# php - PHP MySQL 从 2 个不同的表中选择 * 并显示两个表中按日期时间列排序的混合数据

> ID：15229239
> 
> 赞同：0
> 
> 时间：2013-03-05T16:36:12.097
> 
> 标签：php, mysql, database

我有以下代码...

```
<?php
$sql = 
    "SELECT 
         tickets.company, tickets.datetime, tickets.ticketnumber, 
         customer_notes.customer, customer_notes.timestamp, customer_notes.notes 
    FROM 
       tickets, customer_notes 
    WHERE tickets.company = '".$_GET["seq"]."' AND 
          customer_notes.customer = '".$_GET["seq"]."' 
    GROUP BY customer_notes.customer, tickets.company ";

    $rs=mysql_query($sql,$conn) or die(mysql_error());
    echo '<table width="100%" border="0" cellspacing="5" cellpadding="5">';
    while($result=mysql_fetch_array($rs))
    {
        echo '<tr>
                <td>'.$result["timestamp"].'</td>
                <td>'.$result["notes"].'</td>
              </tr>
              <tr>
                <td>'.$result["datetime"].'</td>
                <td>'.$result["ticketnumber"].'</td>
              </tr>';
    }
    echo '</table>';
    ?> 
```

ticket 表和 customer_notes 表根本没有参考——它们是完全独立的。

当客户记录问题时，tickets 表用于支持票证，然后 customer_notes 表用于客户打电话时，通过电话谈论的所有内容都记录在此表中。

我试图让它按日期时间顺序显示门票表和客户备注表中的数据。

因此，如果创建了一张票，然后添加了一条注释，然后添加了另一条注释，那么他们将使用上面的代码按日期时间顺序显示一张票，但是它没有正确显示

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T16:38:46.050

你的问题有点模糊，所以我会给你两个选择。

**1）**您有两个相似的表，并希望从两者中选择所有记录：（如果您想要两个表都有的列 A、B、C 中的所有数据）

如果表具有相似的结构（相同的列），则应使用**union**。联合从两个表中获取结果，并将它们组合成一个结果集。但是，两个表必须具有相同的结构（或者至少，如果整个结构不相同，则调用相似的字段）。

**2)**这些表有不同的列，您希望将它们合并到一些共同的属性上：（如果您想要第一个表中的 A、b 和 C 列，然后是第二个表中的 D、E 和 F 列。）

您应该使用主键/外键**加入。**最常见的连接是内连接，如果左表或右表不匹配，则忽略该记录。这完全取决于你想要做什么（你的问题有点含糊）

**此外，您的代码极易受到 SQL 注入攻击**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T16:52:43.693

我认为您在这里要做的是获取带有客户备注的票证列表，在这种情况下，一个简单的左连接将起作用，尽管您可能需要在执行输出之前遍历整个列表：

我不确定您的客户备注与票据的确切关系，但我看到您在查询中使用的是公司，所以这就是不好的用途：

```
SELECT t.company, t.ticketnumber, t.datetime, t.ticketnumber, c.customer, c.timestamp, c.notes
FROM tickets t
LEFT JOIN customer_notes c ON (t.company = c.customer)
WHERE t.company = %s
ORDER BY t.company, t.datetime, t.ticketnumber, c.timestamp DESC 
```

那么你可以这样做：

```
mysql_query(sprintf($theQueryFromAbove, mysql_real_escape_string($_GET['seq']))); 
```

这将为您提供一个平坦的结果集 - 这意味着您将拥有多次票证数据，但它应该以丛集的形式排序，以便您将公司/票证编号的所有数据放在一组连续的行中，以便更容易准备输出.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T23:31:55.123

我设法使用 UNION 解决了​​这个问题

```
$sql ="
    SELECT datetime as datetime2, CONCAT(CONCAT('<strong>Ticket</strong> - ', ticketnumber, '<br>'),summary) as displaydata from tickets where company = '".$_GET["seq"]."'
    UNION
    SELECT timestamp as datetime2, CONCAT('<strong>Note</strong><br>',notes) as displaydata from customer_notes where customer='".$_GET["seq"]."'
    order by datetime2 DESC ";
    $rs=mysql_query($sql,$conn) or die(mysql_error());
    echo '<table width="100%" border="0" cellspacing="5" cellpadding="5">';
    while($result=mysql_fetch_array($rs))
    {
        echo '<tr>
            <td width="150px" valign="top">'.$result["datetime2"].'</td>
            <td valign="top">'.nl2br($result["displaydata"]).'</td>
          </tr>';
}
echo '</table>'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T16:52:30.720

下面的小改动可能更适合您。我相信如果没有两个表之间的关系，您可以获得表的笛卡尔积。

```
<?php
$sql = 
    "SELECT 
         tickets.company, tickets.datetime, tickets.ticketnumber, 
         customer_notes.timestamp, customer_notes.notes 
    FROM 
       tickets, customer_notes 
    WHERE tickets.company = customer_notes.customer AND 
          customer_notes.customer = '".$_GET["seq"]."' 
    GROUP BY tickets.company ";

    $rs=mysql_query($sql,$conn) or die(mysql_error());
    echo '<table width="100%" border="0" cellspacing="5" cellpadding="5">';
    while($result=mysql_fetch_array($rs))
    {
        echo '<tr>
                <td>'.$result["timestamp"].'</td>
                <td>'.$result["notes"].'</td>
              </tr>
              <tr>
                <td>'.$result["datetime"].'</td>
                <td>'.$result["ticketnumber"].'</td>
              </tr>';
    }
    echo '</table>';
    ?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T16:54:04.347

您要做的第一件事是更改 SQL 语句。您的表格之间的链接似乎是`tickets.company`and `customer_notes.customer` *（这个假设被证明是错误的，请参阅下面的编辑）*。您现在可以更改 SQL 以使用 JOIN 链接两个表。我使用了 LEFT 连接，这样仍然会列出没有注释的票：

*（为了提高可读性，以下代码示例只是 SQL，因此您必须将其括在 PHP 的引号中。）*

```
SELECT tickets.company, tickets.datetime, tickets.ticketnumber, 
  customer_notes.timestamp, customer_notes.notes 
FROM tickets
LEFT JOIN customer_notes ON tickets.company=customer_notes.customer
ORDER BY tickets.datetime DESC, customer_notes.timestamp DESC 
```

它按工单创建日期降序排列。所有笔记均按时间戳降序排列。这个选择的结果看起来有点像这样

```
company      datetime   ticketnumber timestamp        notes
ACME Corp    2013-01-12     2        20130113110034   firstnotetext
ACME Corp    2013-01-12     2        20130113140245   secondnotetext
Somecorp     2013-01-10     1 
```

当您只想列出一家公司的票和票据时，您必须在 ORDER BY 子句之前插入一个 WHERE 子句，如下所示：

```
WHERE tickets.company = {put your escaped $_GET parameter here} 
```

当您将参数放入 SQL 语句中的 $_GET['seq'] 参数时，请确保正确转义它以防止 SQL 注入：

```
$sql="WHERE tickets.company = '".mysql_real_escape_string($_GET['seq'])."'"; 
```

**编辑：**在评论中你说这两个表不相关。通常你只会使用两个 SELECT，但你想要一个按日期/时间排序的表。所以你必须使用一个 UNION：

```
SELECT company as name, datetime as t, ticketnumber as more_info
UNION
SELECT customer as name, timestamp as t, notes as more_info
ORDER BY t DESC 
```

PS我实际上没有尝试过，但如果我没记错的话，您可以在订购时交换日期时间字段和时间戳，如果没有，只需使用它们将它们都转换为相同的日期/时间格式`TIMESTAMP(datetime) as t`

# c# - c#在Visual Studio中的图表查询

> ID：15229242
> 
> 赞同：1
> 
> 时间：2013-03-05T16:36:12.700
> 
> 标签：c#, visual-studio-2010, variables, charts

我创建了一个从 PST 中提取元数据的程序。该数据随后被存储在一个文本文件中。

我正在尝试创建一组图表/图形来代表我提取的数据。是否可以使用 Visual Studio 2010 创建条形图，例如使用变量或通过读取我已写入文本文件的特定数据。

我知道 VS 2010 确实有内置的图表功能；但是，我似乎无法让它处理变量中保存的值（仅来自数据库、服务、对象或 SharePoint）。

我是 C# 编程和使用 Visual Studio 的新手，所以我可能会遗漏一些非常简单的东西！我用谷歌搜索了几天，没有光。

任何帮助将不胜感激。

非常感谢，

凯蒂。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:48:48.080

了解 ZedGraph，它是一个非常简单且功能强大的开源图表库，完全用 c# 编写。我个人多次使用它，使用起来非常简单快捷。

它有你能想到的任何类型的图表，包括饼图、中国蜡烛（用于股票）、简单的条形图.. [http://sourceforge.net/projects/zedgraph/](http://sourceforge.net/projects/zedgraph/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T16:50:11.013

使用 .Net 3.5 的 Microsoft Chart Control 和 Visual Studio 2008 的 Chart Control 插件，您应该能够为 Windows 和 Web 应用程序创建图表。虽然它不适用于非结构化数据，例如文本文件，但它可以处理 Object 数据。如果您可以读取文本文件中的数据并使用它填充对象，则可以轻松地将其绑定到柱形图。

[http://www.dotnetfunda.com/articles/article1344-using-chart-control-in-visual-studio-2010-web-and-windows-explained.aspx](http://www.dotnetfunda.com/articles/article1344-using-chart-control-in-visual-studio-2010-web-and-windows-explained.aspx)

# php - Symfony 1.4 空的 decoratorDirectory 设置没有被填充

> ID：15229243
> 
> 赞同：0
> 
> 时间：2013-03-05T16:36:18.320
> 
> 标签：php, macos, apache, symfony-1.4

我正在处理一个遗留的 symfony 1.4 项目，我在我的办公室 linux 机器 Fedora 16 上设置了我的本地开发环境，一切都很顺利。我不得不用 Mac OS X Lion 为 macbook 机器重新创建环境。

在第二个我得到一吨这样的错误

```
[Mon Mar 04 16:51:58 2013] [error] [client ::1] PHP Fatal error:  Uncaught exception 'sfRenderException' with message 'The decorator template "layout.php" does not exist or is unreadable in "".' in /Users/foo/bar/baz/myApp/v2/cache/something/something/config/config_core_compile.yml.php:3875\nStack trace:\n#0 /Users/foo/bar/baz/myApp/cache/something/something/config/config_core_compile.yml.php(3909) 
```

因此，在该`config_core_compile.yml.php`文件中，此代码中引发了异常

```
if (!is_readable($this->getDecoratorDirectory().'/'.$this->getDecoratorTemplate()))
{
throw new sfRenderException(sprintf('The decorator template "%s" does not exist or is unreadable in "%s".', $this->decoratorTemplate, $this->decoratorDirectory));
} 
```

跟踪 getDecoratorDirectory 方法调用，我在第 175 行附近找到了 sfView.class.php

```
public function getDecoratorDirectory()
{
return $this->decoratorDirectory;
} 
```

在同一个文件中，decoratorDirectory 属性得到“计算/填充”，但它是空白的，你有什么线索可能是错的吗？一个 symfony 设置，一个 apache 配置？任何事物？

PS以防万一这是我的apache vhost

```
<VirtualHost *:80>
ServerName local.myapp
DocumentRoot /Users/foo/bar/baz/myApp/v2/web

ErrorLog "/private/var/log/apache2/local.myapp-error_log"
CustomLog "/private/var/log/apache2/local.myapp-access_log" combined

<Directory "/Users/foo/bar/baz/myApp/v2/web">
Options FollowSymLinks
AllowOverride All
Allow from All
</Directory>

Alias /sf /Users/foo/bar/baz/myApp/v2/web/lib/vendor/symfony/data/web/sf
<Directory "/Users/foo/bar/baz/myApp/v2/web/lib/vendor/symfony/data/web/sf">
AllowOverride All
Allow from All
</Directory>

</VirtualHost> 
```

编辑：另外我必须使用 perforce 公司回购，一位年长的队友一直说他认为是关于编码，这对我来说没有意义，但仍然如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:46:23.057

我不确定，但有时当我将一个 symfony 应用程序移动到不同的服务器或不同的文件夹时，我不得不删除所有缓存文件夹，因为 symfony 有时使用绝对路径。

好吧，尝试删除缓存文件夹中的所有内容。可能你需要修复这个文件夹的权限，因为 symfony 需要在这个文件夹上创建目录。（大概）。

抱歉，我不会说英语，无法很好地解释。

# python - 使用IPlugin时如何设置twistd.py ILogObserver？

> ID：15229252
> 
> 赞同：2
> 
> 时间：2013-03-05T16:36:57.490
> 
> 标签：python, logging, twisted, twistd

我想将 twistd.py 的日志记录重定向到 python 的日志记录。正常启动`.tac`文件时，我可以轻松地做到这一点：

```
from twisted.python.log import PythonLoggingObserver, ILogObserver
from twisted.application import service

application = service.Application("FooApp")
application.setComponent(ILogObserver, PythonLoggingObserver().emit) 
```

但是，我`Application`在编写`IPlugin`. 相反，我只有一个实现`IServiceMaker`and的类`IPlugin`，其中`makeService`返回一个`service.Service`. 如何设置此日志观察器？

请注意，我不只是想添加一个 python 日志观察器，我想*重定向*twistd 的日志记录，以便它只通过 python 的内置日志记录系统。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T17:16:54.297

查看twistd的`--logger`参数：

```
# mylogger.py
from twisted.python import log

def logger():
    return log.PythonLoggingObserver().emit 
```

然后调用 twistd: `twistd --logger=mylogger.logger`。

# php - PHP错误使页面无法访问

> ID：15229254
> 
> 赞同：0
> 
> 时间：2013-03-05T16:36:59.070
> 
> 标签：php

每次我的代码中出现错误并尝试运行它时，页面都会变得无法访问。这显然非常令人沮丧，因为它很难调试没有反馈的代码。

![无法访问的网页](../Images/4fbb9e7344783a94a6b3b8b40e4fe1d3.png)

来自 cPanel 的相关信息：

阿帕奇版本 2.2.22

PHP 版本 5.3.14

MySQL 版本 5.1.68-cll

架构 x86_64

操作系统 linux

如果需要更多信息，请询问，很抱歉我无法提供更多信息，但坦率地说我很难过。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:41:20.613

启用[错误报告](http://php.about.com/od/troubleshooting/qt/php_error_reporting.htm)以查看 PHP 有什么错误（如果有的话）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T16:42:24.107

您可以查看几个地方，首先尝试检查您的 Apache 错误日志。在许多情况下，它位于 /var/log/apache2/error.log 中。像这样调试页面的另一种方法是启用错误日志记录。

最简单的方法是将这些行添加到您的 php 文件中：

```
ini_set('display_errors',1); 
error_reporting(E_ALL); 
```

除此之外，您还可以通过添加以下内容来清理错误格式：

```
ini_set('html_errors', 'On'); 
```

除了这种启用错误报告的方法之外，您还可以通过添加以下行从配置文件中启用它们：

```
error_reporting = E_ALL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T16:42:50.697

您需要更新 php.ini 以显示错误。有几个设置。

在 php.ini 中搜索`display_errors`和`error_reporting`。该文件通常对错误报告的选项进行了很好的注释，但`error_reporting = E_ALL`它是一个典型的设置。有时人们想要隐藏通知并将 error_reporting 设置为`E_ALL & ~E_NOTICE`.

`display_errors = On`是将错误打印到屏幕上的配置。

更改 php.ini 后，通常需要重新启动 Apache。我不确定您对服务器有多少控制权，因此如果您无法重新启动 Apache 但您有可用的 php.ini，则您的主机可能已对其进行了配置，因此您无需重新启动。

# ios - 使用新的 restkit 加载对象

> ID：15229257
> 
> 赞同：1
> 
> 时间：2013-03-05T16:37:07.003
> 
> 标签：ios, objective-c, restkit

我是新的 RestKit 0.20 的新手，所以我有点不确定从 0.10 更新时的最佳实践。我曾经使用 RKRequest 对象和 RKResponse 对象来管理从 HTTP 响应加载简单的一次性使用 JSON 对象。使用新的 RKObjectRequestOperation，我需要提供一个对象映射来完成所有事情，但我宁愿不必为每个请求创建一个对象和一个对象映射，每个请求都有自己的 JSON 对象类型（总共 3 个，每个都有一个单场）。有没有其他方法可以使用 RKObjectRequestOperation 而不必定义要加载的新对象？如果我想使用 RestKit 来完成这个，我是否必须使用 RKObjectRequestOperation？

# android - Android 上的 Chrome 无法将图像缩放到屏幕

> ID：15229258
> 
> 赞同：3
> 
> 时间：2013-03-05T16:37:08.457
> 
> 标签：android, google-chrome

如果您直接浏览图像（不是浏览包含图像的页面，而是直接浏览图像），似乎所有其他移动浏览器都会将图像缩放到屏幕宽度，只要图像与显示器一样宽或更宽解析度。然而，Android 上的 Chrome 将图像缩放到屏幕的左上角要小得多。我们已经在多台运行最新版 Chrome 的设备上对此进行了测试。

由于我似乎找不到任何分辨率来缩放图像，因为它们会根据需要出现在 Chrome 中，所以有没有人有任何方法可以使用页面来保存图像，以便它可以缩放到设备宽度，无论操作系统还是浏览器？

提前致谢， 比姆斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T16:54:33.937

我提出了一个错误[https://code.google.com/p/chromium/issues/detail?id=180239](https://code.google.com/p/chromium/issues/detail?id=180239)

一个潜在的解决方案是创建一个包含图像的网页，并将视口设置为图像的宽度。

例如

```
<doctype html>    
<html>
  <head>
     <style>* {margin: 0; padding: 0;}</style>
     <meta name="viewport" content="width=[WIDTH OF IMAGE HERE]" />
  </head>
  <body>
     <img src="[URL of IMAGE]" width="100%" />
  </body>
</html> 
```

请参阅我在这里的示例[http://jsbin.com/ilequn/latest](http://jsbin.com/ilequn/latest)

# php - 基于动态 Web 的模板设计器生成 pdf（从数据库数据）

> ID：15229264
> 
> 赞同：0
> 
> 时间：2013-03-05T16:37:20.380
> 
> 标签：php, .net, database, templates, pdf-generation

我目前正在从事一个尚未找到解决方案的项目，尽管我已经在网上搜索了近 2 天（显然包括 stackoverflow）。

我工作的公司需要生成几种 pdf：机器/产品标签（带有信息的小标签）、产品试用/测试报告（通常是 A4 尺寸、多个值）以及任何其他类型的显示。公司的所有数据都是 SQL-Server 中的云，应用程序也需要基于 Web，以便世界各地的任何人（供应商、客户、合作者）都可以使用它。

基本上，几年前使用 TCPDF 完成了一个 php 脚本，因此 IT 人员可以以编程方式创建报告模板，可以在任何地方使用。如今，他们使用相同的脚本，但他们在使用 VB.NET 完成的 Web 应用程序中创建模板，但这并不是完美的解决方案，因为它充满了错误和限制。

期望的是**任何人**（从接待员到管​​理员）**都可以使用**的应用程序，**它允许生成自定义模板**，该模板**稍后将用于生成**带有从其**数据库**中获取的所需**数据**的 pdf 。

 **据我所知，有3个选项：

1 - 使用已经完成并被其他公司使用的某种商业或免费工具。虽然看起来很奇怪，但我找不到用于此的工具。考虑到基本上任何大公司每天都需要生成几种类型的pdf，为什么没有呢？

2 - 更正现有的 VB.net 应用程序和 php 脚本，扩展其功能和可靠性；

3 - 为此提出一种全新的方法。我一直在考虑创建一个允许人们拖放元素的网络应用程序，以便他们可以构建所需的模板（vb.net？c#？）。将此模板导出到 xml/json。使用此模板和从数据库中获取的一组变量，使用任何可用工具（FPDF、TCPDF 或任何其他类型的 php 工具 [需要 php 以保持当前工作模板的可用性]）生成 pdf。

我真的很感激任何形式的投入、头脑风暴或疯狂的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:23:54.307

一个想法是查看 JasperReports。它可以将模板输出为PDF。我相信它也可以作为小程序运行。

为了更现代的外观，您可以编写一个与 java 服务器通信的 ajax 客户端，以便在那里调用 Jasper。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T01:56:27.607

这当然是一个常见的要求 - 报告/文档的可定制模板。网络编辑工具是解决问题的一种方法，但似乎很难让 web-ui 与输出 PDF 很好地结合（仅分页是一个重要的障碍）。

[Docmosis](http://www.docmosis.com)（一个商业文档生成引擎）似乎非常适合提供可定制的模板功能和输出到 PDF 等。因为“模板”是基本的 word 或 openoffice writer 文档，任何人都可以编辑它们（尽管有些模板变得复杂对于某些客户/用户组，您可以避免这种情况）。

使用 Docmosis 的一个常见实现（听起来像是对您的一个关键要求的解决方案）是在应用程序中提供一组模板，并允许用户下载、修改然后上传回系统。模板立即生效，Docmosis 具有一些有趣的功能，可以帮助用户检测和查找模板中的错误（例如将错误写入生成的 PDF/doc 作为脚注来描述错误所在）。请注意，我为创建 Docmosis 的公司工作。

我希望这会有所帮助。**

# python - SQLalchemy通过过滤器检索行的ID

> ID：15229269
> 
> 赞同：1
> 
> 时间：2013-03-05T16:37:31.603
> 
> 标签：python, sqlalchemy

我正在尝试通过使用 2 个过滤器来获取一行的 ID。我通过使用 1 个过滤器让它工作，但是一旦我添加了第二个，事情就出错了。有人可以帮忙吗（是的，我已经阅读了 sqlalchemy 教程，但仍然有问题）

我的桌子（部分）

```
class Character(Base):
    __tablename__ = 'character'
    id = Column(Integer, primary_key=True)
    user_id = Column(Integer, ForeignKey('users.id'))
    lock = Column(Boolean) 
```

我在表中创建了一个空行，只填写了 user_id。

现在这条线工作（1过滤器）

```
u_id = 1
x_char = session.query(Character).filter_by(user_id=u_id).first()
y = x_char.id
print y 
```

当我尝试添加第二个过滤器（仍然为空）时，它出错了。我收到以下错误：AttributeError:'Query' object has no atribute 'id'

```
x_char = session.query(Character).filter(and_(Character.user_id == u_id, Character.lock == None))
y = x_char.id
print y 
```

请帮助我或指出正确的方向

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:44:06.327

你忘了打电话`.first()`，所以你的查询根本没有*执行*：

```
x_char = session.query(Character).filter(and_(Character.user_id == u_id, Character.lock == None))
x_char = x_char.first() 
```

如果此查询不返回任何内容，`x_char`则为`None`. 要调试查询不返回任何内容的*原因，您可以打印生成的 SQL 以帮助您了解 SQLAlchemy 发送到数据库的内容：*

```
x_char = session.query(Character).filter(and_(Character.user_id == u_id, Character.lock == None))
print x_char 
```

# javascript - 使用 Javascript 区分 chrome 和 chromium

> ID：15229276
> 
> 赞同：5
> 
> 时间：2013-03-05T16:38:01.293
> 
> 标签：javascript, html, google-chrome, chromium

是否可以使用 Javascript 将 Google Chrome 与开源 Chromium 浏览器区分开来？该`navigator.userAgent`属性在两种浏览器中似乎相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T19:56:56.473

您可能不想只检查 Chromium，因为 Google Chrome 的 PDF 插件也可以在 Chromium 中使用（只需复制`.dll`文件）。事实上，我现在正在使用它。

最好的方法是检查 Chrome PDF 插件，使用`window.navigator.plugins`：

```
var pdf = false;
for (i in window.navigator.plugins) {
    if (window.navigator.plugins[i].name === "Chrome PDF Viewer") {
        pdf = true;
    }
} 
```

如果您想使用`filename`代替`name`，它是`"pdf.dll"`（在 Windows 机器上）。

# matlab - 从原始数据集中查找匹配的行，其自身略有缩减

> ID：15229281
> 
> 赞同：1
> 
> 时间：2013-03-05T16:38:16.913
> 
> 标签：matlab

我有两个数据集，原始具有每个变量的所有标签和描述，但第二个是该数据集的简化版本，用于特定实验，但没有任何有关变量的信息，包含在原始. 所以，我试图匹配两个数据集。

我的问题是，如果在两个矩阵维度上都进行了轻微的数据缩减，我如何才能找到原始数据集中的一行是否存在于新数据集中？

更具体地说，原始数据集是 24481 x 117 矩阵，新数据集是 24188 x 97 矩阵。但是，这里的问题是我不知道新数据集中包含或不包含哪些行或列

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:16:16.307

您可以做的是用较少的元素对矩阵进行零填充，使其与原始数据的大小相匹配。然后使用

```
find(A==B) 
```

`A`并且`B`是矩阵

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T05:39:33.317

使用*intersect*函数对我有用。由于在两个维度上都执行了数据缩减，首先我在矩阵中查找前两列向量的交集（假设至少在缩减中保留了列顺序）。

```
>> M = magic(5)

M =

  17    24     1     8    15
  23     5     7    14    16
   4     6    13    20    22
  10    12    19    21     3
  11    18    25     2     9

>> X = M([2,3,5], [1,2,4,5])

X =

  23     5    14    16
   4     6    20    22
  11    18     2     9

>> [c,xi, mi]=intersect(X(:,1),M(:,1)) 
```

***mi***是简化矩阵 X 中存在的原始矩阵 M 中所有行的列索引向量。对矩阵中的前两行执行相同操作为我提供了从原始矩阵 M 中选择的所有列的行索引向量。

```
>> [c,xi, mi]=intersect(X(1,:),M(1,:)) 
```

该解决方案的一个缺点是，当原始矩阵的第一行或第一列未在新集合中选择时，您就可以从原始矩阵中移动比较向量的索引，幸运的是不会太多;)。

```
>> [c,xi, mi]=intersect(X(1,:),M(2,:)) 
```

# iphone - iPhone / iPad UITable 滑动删除 调整大小/移动单元格

> ID：15229285
> 
> 赞同：1
> 
> 时间：2013-03-05T16:38:25.847
> 
> 标签：iphone, ios, ipad, uitableview, swipe

无论如何要关闭滑动以删除调整大小/移动单元格？我们正在使用一个自定义单元格，它有一个 UIImageView 作为单元格显示的一部分。滑动完成后，它会向左移动，这是我们不想要的。如果我们在 IB 中关闭自动调整大小，则 UIImageView 不会移动，但旋转会中断（UIView 不会自动调整大小）。

可能还有其他方法可以解决这个问题，但想知道是否可以关闭滑动以删除班次单元格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:52:41.600

也许这就是你要找的？ [UITableView 禁用滑动删除，但在编辑模式下仍有删除？](https://stackoverflow.com/questions/969313/uitableview-disable-swipe-to-delete-but-still-have-delete-in-edit-mode)

因为您不能再通过滑动来删除单元格，但您仍然可以通过点击编辑按钮来删除单元格。

当然——这可能对移动单元格部分没有帮助；当单元格上出现删除按钮时，内容仍会发生变化。您可以在 UITableViewCell 中覆盖`-(void)layoutSubviews`，以自定义删除按钮的定位方式（更多信息：[iPhone UITableView - Delete Button](https://stackoverflow.com/questions/2104403/iphone-uitableview-delete-button)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T17:02:39.710

Ort11，不要触摸“自动调整大小”（这与调整大小有关，例如，旋转 - 至少，这就是我认为你的意思）。相反，请查看 UITableViewDelegate 协议。例如，有一种方法`tableView:shouldIndentWhileEditingRowAtIndexPath:`。如果您愿意，还有一种方法可以防止对单个单元格进行编辑。祝一切顺利 -

# android - Android 4.2 - BaseAdapter 传递的位置高于 getCount

> ID：15229286
> 
> 赞同：0
> 
> 时间：2013-03-05T16:38:28.830
> 
> 标签：android, baseadapter, android-4.2-jelly-bean

我将视图缓存在一个数组中，并在 getView 中返回它们。我还在 getCount 中返回 array.length。

问题是，仅在 android 4.2 上，适配器给我的位置高于我的 array.length。

我做了一个解决方法（使用位置 % array.length），但似乎视图被绘制了两次。

有人有同样的问题吗？

# android - How to access typed data from out Renderscript allocation?

> ID：15229288
> 
> 赞同：2
> 
> 时间：2013-03-05T16:38:35.450
> 
> 标签：android, renderscript

I create typed RS allocations this way:

```
mRS = RenderScript.create(mContext);
Element.Builder eb = new Element.Builder(mRS);
eb.add(Element.F32_3(mRS), "xyz");
eb.add(Element.F32_2(mRS), "uv");
Element eStride_XYZUV = eb.create();

mInAllocation = Allocation.createSized(mRS, eStride_XYZUV, animLand.getArray().length / 5);
mOutAllocation = Allocation.createSized(mRS, eStride_XYZUV, animLand.getArray().length / 5); 
```

`animLand.getArray()` is an array of `float`. I can copy data to input allocation:

```
mInAllocation.copyFromUnchecked(animLand.getArray()); 
```

However, when I try to retrieve data from out allocation this way:

```
mOutAllocation.copyTo(animLand.getArray()); 
```

I get exception:

```
android.renderscript.RSIllegalArgumentException: 32 bit float source does not match allocation type null 
```

How can I access data from output `Allocation` with array of my custom `Element`? There are methods to copy to arrays/bitmaps but only for primitive `Element` types.

It works if I use primitive `F32` type but I would like to use typed data:

```
mInAllocation = Allocation.createSized(mRS, Element.F32(mRS), animLand.getArray().length);
mOutAllocation = Allocation.createSized(mRS, Element.F32(mRS), animLand.getArray().length);
...
mInAllocation.copyFromUnchecked(animLand.getArray());
...
mOutAllocation.copyTo(animLand.getArray()); 
```

# php - select all from database of the selected checkbox

> ID：15229289
> 
> 赞同：1
> 
> 时间：2013-03-05T16:38:37.587
> 
> 标签：php, javascript, mysql

The code given below which display all the products in the home page.. and each product has a checkbox.. I wanted to select the checkbox of few products, and if I click on submit, the next page doesn't view the selected checkbox results

```
$sql = mysql_query("SELECT * FROM products ORDER BY date_added DESC LIMIT 15");
$productCount = mysql_num_rows($sql); // count the output amount
if ($productCount > 0) {
    $colindex = 1;
    $totcols = 3;
    $rowclosed = false;
    //$totrows=ceil($count/$totcols);
    $dynamicList .= "<dl id='Searchresult'> <form action='selected.php' method='POST'> <table width=\"50%\" border=\"0\" cellspacing=\"0\" align=\"center\" cellpadding=\"3\">";
    while ($row = mysql_fetch_array($sql)) {

        $id = $row["id"];
        $product_name = $row["product_name"];
        $price = $row["price"];
        $date_added = strftime("%b %d, %Y", strtotime($row["date_added"]));
        if ($colindex == 1) {
            $dynamicList .= "<tr>";
            $rowclosed = false;
        }

        $dynamicList .= '<td width="142" valign="top" align="center">
                    <div id="products">
                        <div class="product">
                            <a href="product.php?id=' . $id . '"> <img style=" 1px solid;" src="inventory_images/' . $id . '.jpg" alt="' . $product_name . '" width="100" height="100" border="0" /></a><div class="pr-info"><h4>' . $product_name . '</h4> 
                            <input type="checkbox" name="check[]" value="<?php .$id. ?>"/>
                        </div>
                    </div></td>';
    }
} 
```

The Code below is where i used to retrieve the data from database of selected checkbox

```
foreach ($_POST['check'] as $k => $check) {
    $where[ ] = $k . " = '" . mysql_real_escape_string($check) . "'";
}
include "storescripts/connect_to_mysql.php";
$sql = mysql_query("Select * from products where " . implode(' AND ', $where)); // Connect to the MySQL database
$productCount = mysql_num_rows($sql); // count the output amount
if ($productCount > 0) {

    while ($row = mysql_fetch_array($sql)) {

        $id = $row["id"];
        $product_name = $row["product_name"];
        $price = $row["price"];
        $details = $row["details"];
        $date_added = strftime("%b %d, %Y", strtotime($row["date_added"]));
        $dynamicList .= '<td width="142" valign="top" align="center">
                            <div id="products">
                                <div class="product">
                                    <a href="printer.php?id=' . $id . '"> 
                                        <img style=" 1px solid;" src="inventory_images/' . $id . '.jpg" alt="' . $product_name . '" width="200" height="200" border="0" />
                                    </a>
                                <div class="pr-info"><h4>' . $product_name . '</h4><p>' . $details . ' </p>

                                    <span class="pr-price"><span>Rs.</span><sup>' . $price . '</sup></span>
                                </div>
                                </div></td>';
    }
} else {
    echo "That item does not exist.";
    exit( );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:52:50.890

Try changing the beginning of your second code to this:

```
include "storescripts/connect_to_mysql.php";
$sql = mysql_query('SELECT * FROM products WHERE id IN ('.implode(', ', array_values($_POST['check'])).')');  
// rest of your code, beginning at $productCount = ... 
```

But, how it was said before, you should start using [PDO](http://php.net/pdo)!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T16:56:21.137

我认为你最终的查询和代码应该是这样的......请用这个改变你的代码......并发布结果：

```
foreach($_POST['check'] as $k){
$where[]= $k;}  
var_dump($where); //it show you something, show me the var_dump result ???
include "storescripts/connect_to_mysql.php";
$query = "Select * from products where id IN(".implode(",",$where).")"; 
echo $query; //this line too....show me the result   
$sql = mysql_query($query);     
// Connect to the MySQL database
$productCount = mysql_num_rows($sql);
//the rest of your code ;) 
```

-----------------------已编辑------------------------- ------

您的问题出在这一行：

```
<input type="checkbox" name="check[]" value="<?php .$id. ?>"/> 
```

那条线是错误的，做这个改变，看看它是如何工作的：

```
<input type="checkbox" name="check[]" value="<?php echo $id;?>"/> 
```

萨卢多斯 ;)

# javascript - 使用 wget 在不同的目录中设置下载的文件名

> ID：15229294
> 
> 赞同：1
> 
> 时间：2013-03-05T16:38:48.203
> 
> 标签：javascript, node.js, command-line, wget

我需要使用`wget`. 要在当前目录中下载它，我在命令行中运行：

```
 $ wget https://github.com/.../[myfile].zip 
```

要将其下载到不同的目录中，我添加`-P <Path of download directory>`：

```
$ wget -P [download directory path] https://github.com/.../[myFile].zip 
```

我想更改为将文件下载到`[download path directory]`但使用 filename `[myFileName]`。我怎样才能做到这一点？

我已经尝试过这个：

```
$ wget -P [download directory path] --output-document=[filename.zip] 
https://github.com/.../[myZipFile].zip 
```

这会将文件下载到当前目录，文件名由我选择。

Finnaly 我将在 NodeJS 项目中使用它，使用`spawn`.

目前我有这个：

```
var downloader = spawn("wget", ["-P", zipFile, appUrl]); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T16:52:28.587

也许我错过了 Q 的要点，但是 -O 标志呢？

```
wget -O [download directory path]/[filename.zip] https://github.com/.../[myZipFile].zip 
```

手册页包含有关连接文件的可怕内容，但是当您只获取一个文件时，这无关紧要。

首先自动创建目录：

```
mkdir -p [download directory path]; wget -O [download directory path]/[filename.zip] https://github.com/.../[myZipFile].zip 
```

如果目录已经存在，mkdir 上的 -p (parents) 标志会导致它退出而没有错误。

# mysql - 有没有办法用 Laravel 的 ELOQUENT ORM 来“限制”结果？

> ID：15229303
> 
> 赞同：142
> 
> 时间：2013-03-05T16:39:12.733
> 
> 标签：mysql, laravel, eloquent, sql-limit

有没有办法用 Laravel 的 ELOQUENT ORM 来“限制”结果？

```
 SELECT * FROM  `games` LIMIT 30 , 30 
```

和雄辩的？

* * *

## 回答 #1

> 赞同：252
> 
> 时间：2013-03-05T16:45:18.557

创建一个扩展 Eloquent 的 Game 模型并使用它：

```
Game::take(30)->skip(30)->get(); 
```

`take()`这里将获得 30 条记录，`skip()`这里将抵消 30 条记录。

* * *

在最近的 Laravel 版本中，您还可以使用：

```
Game::limit(30)->offset(30)->get(); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-09-04T23:42:55.813

如果您希望对结果进行分页，请使用集成的[分页器](http://laravel.com/docs/5.1/pagination)，它非常有用！

```
$games = Game::paginate(30);
// $games->results = the 30 you asked for
// $games->links() = the links to next, previous, etc pages 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2017-10-05T08:48:51.377

**我们可以像下面这样使用 LIMIT：**

```
Model::take(20)->get(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-05T13:19:26.507

此外，我们可以通过以下方式使用它

只获得第一

```
 $cat_details = DB::table('an_category')->where('slug', 'people')->first(); 
```

通过限制和偏移获得

```
$top_articles = DB::table('an_pages')->where('status',1)->limit(30)->offset(0)->orderBy('id', 'DESC')->get();
$remaining_articles = DB::table('an_pages')->where('status',1)->limit(30)->offset(30)->orderBy('id', 'DESC')->get(); 
```

# gwt - 带有@ExtraTypes 的 GWT 多态列表

> ID：15229306
> 
> 赞同：1
> 
> 时间：2013-03-05T16:39:18.370
> 
> 标签：gwt, polymorphism, requestfactory

我对包含不同类型元素的列表有一点问题，我想看看你们中是否有人遇到过这个问题。这个问题应该通过使用@ExtraTypes 来解决，但它对我不起作用，所以我想我没有正确使用它。因此，场景是（为清楚起见更改了 bean 名称）：

## 一般的：

*   我将 GWT 2.5 与 RequestFactory 一起使用。

## 服务器端：

*   我有一个 RootBean，其中包含一个

    ```
    列表 <子豆>
    ```

    .
*   这个 ChildBean 包含一些原始属性。
*   ChildBean 也由一个 MoreSpecificChildBean 扩展，它继承了所有父属性并添加了更多属性。
*   根据某些逻辑，RootBean 的列表中填满了 ChildBean 和 MoreSpecificChildBean 类型的元素。

## 客户端：

*   IRootBeanProxy 是具有以下注释的 ValueProxy：

    ```
    @ProxyFor（值 = RootBean.class）
     @ExtraTypes ({IMoreSpecificChildBeanProxy.class})

    ```

并包含一个列表

```
列出 <IChildBeanProxy> getChildren();
```

*   IChildBeanProxy 是一个 ValueProxy：

    ```
    @ProxyFor（值=ChildBean）
    公共接口 IChildBeanProxy 扩展了 ValueProxy

    ```

*   IMoreSpecificChildBeanProxy 是一个 ValueProxy：

    ```
    @ProxyFor（值=MoreSpecificChildBean）
    公共接口 IMoreSpecificChildBeanProxy 扩展 IChildBeanProxy

    ```

*   Request 上下文有一个返回 Request 的方法，我在这里也添加了 @ExtraTypes 注释：

    ```
    @Service（值 = CompareService.class，定位器 = SpringServiceLocator.class）
    @ExtraTypes ({IChildBeanProxy.class, IMoreSpecificChildBeanProxy.class})
    公共接口 ICompareRequestContext 扩展 RequestContext {
       请求 <IRootBeanProxy> 比较（整数 id1，整数 id2）；

    ```

## 问题

假设有了这些注释，RF 应该知道多态继承类的存在，但我在客户端中得到的只是一个 IRootBeanProxy 和一个 IChildBeanProxy 元素列表。此列表包括 MoreSpecificChildBean，但采用 IChildBeanProxy 的形式，因此我无法将其与其他列表区分开来。所以我想知道我做错了什么，如果我将 ExtraTypes 注释设置在错误的地方或什么地方。

任何人？

感谢所有的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T20:12:54.697

我对很多类都做了完全相同的事情，但它总是会返回我可以迭代并在需要时测试 instanceof 的基本类型。您可能必须将对象强制转换为子类。如果您不添加@ExtraTypes，您将知道，因为在服务器端您将收到一条消息，指出无法将 MoreSpecificChildBean 发送到客户端。

我只注释服务而不是代理，我在 2.4 中遇到了一些怪癖，将 @ExtraTypes 添加到代理。

```
/**
 * Base proxy that all other metric proxies extend. It is used mainly for it's
 * inheritence with the RequestFactory. It's concrete implementation is
 * {@link MetricNumber}.
 * 
 * @author chinshaw
 */
@ProxyFor(value = Metric.class, locator = IMetricEntityLocator.class)
public interface MetricProxy extends DatastoreObjectProxy {

    /**
     * Name of this object in the ui. This will commonly be extended by
     * subclasses.
     */
    public String NAME = "Generic Metric";

    /**
     * This is a list of types of outputs that the ui can support. This is
     * typically used for listing types of supported Metrics in the operation
     * output screen.
     * 
     * @author chinshaw
     */
    public enum MetricOutputType {
        MetricNumber, MetricString, MetricCollection, MetricStaticChart, MetricDynamicChart
    }

    /**
     * See {@link MetricNumber#setName(String)}
     * 
     * @param name
     */
    public void setName(String name);

    /**
     * See {@link MetricNumber#setContext(String)}
     * 
     * @return name of the metric.
     */
    public String getName();

    /**
     * Get the list of violations attached to this metric.
     * 
     * @return
     */
    public List<ViolationProxy> getViolations();
}

@ProxyFor(value = MetricNumber.class, locator = IMetricEntityLocator.class)
public interface MetricNumberProxy extends MetricProxy {

    public List<NumberRangeProxy> getRanges();

    public void setRanges(List<NumberRangeProxy> ranges);
} 
```

...

```
@ProxyFor(value = MetricDouble.class, locator = IMetricEntityLocator.class)
public interface MetricDoubleProxy extends MetricNumberProxy {

    /* Properties when fetching the object for with clause */
    public static String[] PROPERTIES = {"ranges"};

    public Double getValue();
} 
```

...

```
@ProxyFor(value = MetricPlot.class, locator = IMetricEntityLocator.class)
public interface MetricPlotProxy extends MetricProxy {

    /**
     * UI Name of the object.
     */
    public String NAME = "Static Plot";

    public String getPlotUrl();
} 
```

这是一个组合方法，因为我通常总是返回可能包含指标列表的复合类。话虽如此，这将返回我基本类型的指标，然后我可以转换它们。

```
@ExtraTypes({ MetricProxy.class, MetricNumberProxy.class, MetricDoubleProxy.class, MetricIntegerProxy.class})
@Service(value = AnalyticsOperationDao.class, locator = DaoServiceLocator.class)
public interface AnalyticsOperationRequest extends DaoRequest<AnalyticsOperationProxy> {

    Request<List<<MetricProxy>> getSomeMetrics(); 
```

}

这不是我使用的确切方法，但可以用于获取类型代理。

```
context.getSomeMetrics().with(MetricNumber.PROPERTIES).fire(new Receiver<List<MetricProxy>>() {

  public void onSuccess(List<MetricProxy> metrics) {
      for (MetricProxy metric : metrics) {
          if (metric instanceof MetricDoubleProxy) {
              logger.info("Got a class of double " + metric.getValue());
          }
      }          
  }
} 
```

当您收到上述错误时，您将知道是否缺少 @ExtraTypes 注释。

希望有帮助

# php - Why shouldn't I use the 23rd character in a crypt() function's salt?

> ID：15229309
> 
> 赞同：9
> 
> 时间：2013-03-05T16:39:32.537
> 
> 标签：php, encryption, crypt

I'm learning about PHP's crypt() function and have been running some tests with it. According to [this post](https://stackoverflow.com/questions/4683350/blowfish-salt-length-for-the-crypt-function), I should use a salt that's 22 characters long. I can, however, use a string that's 23 characters long with some limitations. When I use a 22 character long string I always get an outcome of '$2y$xxStringStringStringStri.HashHashHashHashHashHashHashHas'. I know the period is just part of the salt.

It seems that if I use 23 characters instead of just 22, I can successfully generate different hashes, but there is only 4 different outcomes for all 64 characters. The 23rd character "rounds down" to the nearest 1/4th of the 64 character alphabet (e.g. the 23rd character is "W" and rounds down to "O" or any number rounds down to "u")

```
v---------------v---------------v---------------v---------------
./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890 
```

All four of these crypt functions generate the same salt:

```
crypt('Test123','$2y$09$AAAAAAAAAAAAAAAAAAAAAq');
crypt('Test123','$2y$09$AAAAAAAAAAAAAAAAAAAAAr');
crypt('Test123','$2y$09$AAAAAAAAAAAAAAAAAAAAAs');
crypt('Test123','$2y$09$AAAAAAAAAAAAAAAAAAAAAt'); 
```

But this one is different:

```
crypt('Test123','$2y$09$AAAAAAAAAAAAAAAAAAAAAu'); 
```

So why shouldn't I use the 23rd character when it can successfully generate different outcomes? Is there some kind of glitchy behavior in PHP that should be avoided by not using it?

For clarification on how I'm counting the 23rd character in the salt:

```
crypt('Test123','$2y$08$ABCDEFGHIJKLMNOPQRSTUV');
//        The salt is '$ABCDEFGHIJKLMNOPQRSTUV'
//        Which will be treated as '$ABCDEFGHIJKLMNOPQRSTUO' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T16:43:06.390

它与哈希冲突有关。一旦超过 22 个字符，您生成的哈希就不再是唯一的，具体取决于`NAMESPACE`算法。换句话说，超过 22 个字符不会提高安全性，实际上会降低您的安全级别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T15:03:02.237

$ 不是实际盐的一部分。它是一个分隔符。

对于 Blowfish crypt，格式为 $2[axy]$log2Rounds$[salt][hash]。你描述它添加一个 . -- 那是因为你错过了最后一个字符。河豚的盐是 128 位。是的，您只能使用 126，但您只是在不必要地削弱盐分。

# python - Python equivalent of DCT image hash function used in pHash module

> ID：15229310
> 
> 赞同：2
> 
> 时间：2013-03-05T16:39:33.153
> 
> 标签：python, cimg, phash, python-bindings

I have an existing python program that accepts an image URL and does manipulations on the image loaded. I tried passing the image data to the [pHash](http://phash.org) module in C++ and then get the image hash. I've tried using [python extension library](https://github.com/polachok/py-phash/) to pass the image from python to the C program, but without success. The speed of the whole process is a priority. It includes getting the hash value of query image, finding the similar images from a huge collection of images system. So, instead of passing huge image data, then converting to a CImg image object, I feel that it would be better and easier to just calculate the hash in python code, and pass the hash value to the pHash module for finding out the similar images. So, I am looking forward to get the DCT image hash in Python.

Does anyone has any idea how to get the same hash value in python? I don't want to re invent the wheel. I tried to google and find the equivalent function in python, but no success. Here is the image hash function: ( source: pHash module)

```
int ph_dct_imagehash(const char* file,ulong64 &hash){

    if (!file){
     return -1;
    }
    CImg<uint8_t> src;
    try {
    src.load(file);
    } catch (CImgIOException ex){
    return -1;
    }
    CImg<float> meanfilter(7,7,1,1,1);
    CImg<float> img;
    if (src.spectrum() == 3){
        img = src.RGBtoYCbCr().channel(0).get_convolve(meanfilter);
     } else if (src.spectrum() == 4){
        int width = img.width();
        int height = img.height();
        int depth = img.depth();
        img = src.crop(0,0,0,0,width-1,height-1,depth-1,2).RGBtoYCbCr().channel(0).get_convolve(meanfilter);
     } else {
        img = src.channel(0).get_convolve(meanfilter);
     }

     img.resize(32,32);
     CImg<float> *C  = ph_dct_matrix(32);
     CImg<float> Ctransp = C->get_transpose();

     CImg<float> dctImage = (*C)*img*Ctransp;

     CImg<float> subsec = dctImage.crop(1,1,8,8).unroll('x');;

     float median = subsec.median();
     ulong64 one = 0x0000000000000001;
     hash = 0x0000000000000000;
     for (int i=0;i< 64;i++){
        float current = subsec(i);
            if (current > median)
             hash |= one;
        one = one << 1;
     }

     delete C;
     return 0;
} 
```

I would really appreciate your help. Thanks a lot

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-14T19:54:08.280

Imagehash模块具有[phash](https://pypi.python.org/pypi/ImageHash)的实现，但我不知道它是否与您的 phash 实现兼容。

也就是说：我对 phash 库没有任何经验，但 c++ 版本可能更快（尤其是因为 PIL 不是最快的）

*很抱歉破坏了这篇文章，希望没关系*

# class - 参数化类和多态性

> ID：15229311
> 
> 赞同：4
> 
> 时间：2013-03-05T16:39:33.523
> 
> 标签：class, oop, polymorphism, system-verilog, uvm

我想知道是否有更好更直接的方法来为从参数化类生成的一组类使用多态性。以下系统verilog代码有效。有没有更优雅的方式？编辑：我可以在 C++ 中实现类似的东西吗？

```
`define OVERRIDE_PARAMETER_CPU parameter WIDTH=32 ;
`define OVERRIDE_PARAMETER_GFX parameter WIDTH=16 ;     

class Req #(parameter WIDTH=8);
    bit[WIDTH-1:0]  Address;
    virtual function Print;
        $display("Generic: %x[%0d]",Address,WIDTH);
    endfunction
endclass

typedef Req#(8) generic_req ;

class CPU_Req extends generic_req;  
    `OVERRIDE_PARAMETER_CPU
    function Print;
        $display("CPU: %x[%0d]",Address,WIDTH);
    endfunction
endclass

class GFX_Req extends generic_req;          
    `OVERRIDE_PARAMETER_GFX
    function Print;
        $display("GFX: %x[%0d]",Address,WIDTH);
    endfunction
endclass

program Test ;

    generic_req Req_Q[$],Temp,Generic_Req;    
    CPU_Req     C_Req;
    GFX_Req     G_Req;

    initial
    begin
        C_Req=new();
        G_Req=new();
        Generic_Req=new();
        C_Req.Address=32'h1234;
        G_Req.Address=32'hFF;
        Generic_Req.Address=32'h0;

        Req_Q.push_back(Generic_Req);
        Req_Q.push_back(C_Req);
        Req_Q.push_back(G_Req);

        while(Req_Q.size()!=0)
        begin
            Temp=Req_Q.pop_front();
            Temp.Print();
        end    
    end    
endprogram 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T03:56:42.447

我对您的代码做了一些更改。我不确定这是否是您要寻找的。

```
class Req #(parameter WIDTH=8);
   bit[WIDTH-1:0]  Address;
   virtual function void Print;
      $display("Generic: %x[%0d]",Address,WIDTH);
   endfunction
endclass

//class CPU_Req extends generic_req;  
class CPU_Req #(parameter WIDTH=16) extends Req#(WIDTH);
     function void Print;
        $display("CPU: %x[%0d]",Address,WIDTH);
     endfunction
endclass

class GFX_Req #(parameter WIDTH=24) extends Req#(WIDTH);          
     function void Print;
        $display("GFX: %x[%0d]",Address,WIDTH);
     endfunction
endclass

program Test ;

   Req            Generic_Req;
   CPU_Req #(32)  C_Req32;
   CPU_Req        C_Req16;
   GFX_Req #(128) G_Req128;

   initial
     begin
        C_Req32     = new();
        C_Req16     = new();
        G_Req128    = new();
        Generic_Req = new();

        C_Req32.Address  = 32'h12345678;
    C_Req16.Address  = 32'h12345678;
        G_Req128.Address = {2{64'h1234_5678_9ABC_DEF0}};
        Generic_Req.Address=32'h12345678;

    C_Req32.Print();
    C_Req16.Print();
    G_Req128.Print();
    Generic_Req.Print();

     end    
endprogram 
```

结果：

```
# CPU: 12345678[32]
# CPU: 5678[16]
# GFX: 123456789abcdef0123456789abcdef0[128]
# Generic: 78[8] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T20:58:42.163

以下代码按预期工作。

```
class BaseReq;
   virtual function void Print;
      $display("Base:");
   endfunction
endclass

class Req #(parameter WIDTH=6) extends BaseReq;
   bit[WIDTH-1:0]  Address;
   function void Print;
      $display("Generic: %x[%0d][%0d]",Address,WIDTH,$bits(Address));
   endfunction
endclass

class CPU_Req #(parameter WIDTH=16) extends Req #(WIDTH);
     function void Print;
        $display("CPU: %x[%0d][%0d]",Address,WIDTH,$bits(Address));
     endfunction
endclass

class GFX_Req #(parameter WIDTH=24) extends Req #(WIDTH);          
     function void Print;
        $display("GFX: %x[%0d][%0d]",Address,WIDTH,$bits(Address));
     endfunction
endclass

program Test ;

   BaseReq        Req_Q[$],Temp;
   Req            Generic_Req;
   CPU_Req #(32)  C_Req32;
   CPU_Req        C_Req16;
   GFX_Req #(128) G_Req128;

   initial
     begin
        Generic_Req = new();
        C_Req32     = new();
        C_Req16     = new();
        G_Req128    = new();
        Generic_Req = new();

        Generic_Req.Address = 32'h12345678;
        C_Req32.Address     = 32'h12345678;
        C_Req16.Address     = 32'h12345678;
        G_Req128.Address    = {2{64'h1234_5678_9ABC_DEF0}};

        Req_Q.push_back(Generic_Req);
        Req_Q.push_back(C_Req32);
        Req_Q.push_back(C_Req16);
        Req_Q.push_back(G_Req128);

        while(Req_Q.size!=0)
        begin
            Temp=Req_Q.pop_front();
            Temp.Print();
        end
     end    
endprogram 
```

# css - How do I modify this page peel effect without messing it up?

> ID：15229318
> 
> 赞同：1
> 
> 时间：2013-03-05T16:39:49.037
> 
> 标签：css

I am trying to adapt the page peel effect shown [here](http://cssdeck.com/labs/page-curl-box-shadow). My fiddle is [here](http://jsfiddle.net/KSXqg/6/show)

I'm trying to make 2 modifications:

1.  Increase the width to 90% (they have 800px)
    *   If I do this, then this screws up the dropshadow effect, showing some whitespace where the shadows should be
2.  Put the page peel on all 4 corners.
    *   I've tried all sorts of combinations of the classes: "shadow-bottom shadow-top", "shadow-right shadow-left", among others.

How do I accomplish both?

```
<div class="page-curl shadow-bottom">
    <h2>Bottom shadow, both sides</h2>
    <p>Freegan fixie banh mi, pickled art party trust fund iphone blog etsy occupy cardigan fap ethnic. Sartorial sriracha vinyl lo-fi cardigan. Tofu fingerstache vegan, shoreditch marfa pour-over occupy 8-bit american apparel four loko fixie lomo vice. Freegan irony chambray jean shorts PBR selvage. PBR messenger bag VHS, umami sustainable godard portland single-origin coffee. Wolf whatever butcher messenger bag yr american apparel fap. Tattooed master cleanse cred, narwhal gluten-free sriracha organic next level put a bird on it.</p>
</div>
....full code on my jsfiddle link 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:46:14.790

[我在这里创建了一个具有预期效果的演示](http://jsfiddle.net/barney/HttKU/)。

**编辑：**通过修复基于百分比的原始宽度来解决可变宽度错误，该宽度为除伪元素宽度之外的每个维度提供了固定值，为 40%。800px 的 40%（容器的指定宽度）= 320px，这是我们将在此处指定以解决剪裁阴影的内容。

另一个问题是原作者编写代码时只对`.page-curl`元素应用阴影：我分离出 CSS 规则，`.page-curl`只控制元素的内部外观。

修改后的 CSS 意味着您可以使用阴影效果创建任意数量的元素，而无需引入诸如填充、边框、背景、宽度等属性：

```
[class*=shadow] {
    position: relative;
}

[class*=shadow]:before, 
[class*=shadow]:after {
    background: none;
    bottom: 12px;
    -moz-box-shadow: 0 10px 12px rgba(0, 0, 0, 0.5);
    -webkit-box-shadow: 0 10px 12px rgba(0, 0, 0, 0.5);
    box-shadow: 0 10px 12px rgba(0, 0, 0, 0.5);
    content: "";
    height: 10px;
    left: 12px;
    position: absolute;
    width: 320px;
    z-index: -1;
    -moz-transform: skew(-4deg) rotate(-4deg);
    -webkit-transform: skew(-4deg) rotate(-4deg);
    transform: skew(-4deg) rotate(-4deg);
}

[class*=shadow]:after {
    -moz-transform: skew(4deg) rotate(4deg);
    -webkit-transform: skew(4deg) rotate(4deg);
    transform: skew(4deg) rotate(4deg);
    left: auto;
    right: 12px;
} 
```

基本上，这段代码说如果一个元素有一个包含 text 的类`shadow`，我们可以给它这些`::before`和`::after`元素。接下来，规定具体方向的规则已经让`.page-curl`班级被淘汰了。

在这一点上，我们仍然限制每个元素有 2 个阴影（我们只能有一个`::before`和一个`::after`元素）：解决方案是创建 2 个嵌套 div：

```
<div class="container shadow-top-bottom shadow-right">
    <div class="page-curl shadow-top-bottom shadow-left">
    </div>
</div> 
```

所以第一个 div 负责处理右侧的顶部和底部阴影，第二个负责处理左侧的阴影。

顺便说一句，第 2 个具有所有`.page-curl`属性，`.container`第 1 个类负责您 90% 的宽度要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:54:43.860

果皮阴影不会那么高，但看起来仍然很棒！对以下两项进行以下小的更改，它将为您解决此问题：

[这是它的 jsFiddle，这](http://jsfiddle.net/chrisallenmoore/Eegzr/) 是[它在页面上的样子](http://jsfiddle.net/chrisallenmoore/Eegzr/show/)

```
.shadow-top-bottom.shadow-left:after {
display: block;
bottom: auto;
top: 20px; /* change from top: 15px; to top: 20px;*/
right: auto;
left: 12px;
-moz-box-shadow: 0 -10px 12px rgba(0, 0, 0, 0.5);
-webkit-box-shadow: 0 -10px 12px rgba(0, 0, 0, 0.5);
box-shadow: 0 -10px 12px rgba(0, 0, 0, 0.5);}

.shadow-top-bottom.shadow-right:before {
display: block;
bottom: auto;
top: 20px; /* change from top: 15px; to top: 20px;*/
right: 12px;
left: auto;
-moz-box-shadow: 0 -10px 12px rgba(0, 0, 0, 0.5);
-webkit-box-shadow: 0 -10px 12px rgba(0, 0, 0, 0.5);
box-shadow: 0 -10px 12px rgba(0, 0, 0, 0.5);} 
```

# performance - performing update queries for a drag drop listview

> ID：15229319
> 
> 赞同：0
> 
> 时间：2013-03-05T16:39:52.707
> 
> 标签：performance, android-listview, android-cursoradapter

I am using a drag and drop listview backed by cursor adapter. To maintain the database I am updating the positions of database entries at the time of dragging a view.For this I am using the conventional method of SQLiteDatabase.rawQuery and then when the update operations are done I call notifyDataSetChanged to call my bindview method of cursoradapter to reposition the entries. This however is lagging the UI and leaving the app unresponsive. I tried to move all my database operations to AsyncTask using a single instance of my database. This also is lagging my UI as the threads are queuing and the listview has to wait till each asynctask completes.

My ListView is always waiting for the queries to complete.

What should be the correct way of execution for this scenario? Will the use of CursorLoader give me a snappy UI?

I've seen many apps doing drag and drop efficiently and most of them are using array adapters. But I need to update my database as the enteries in listview are moved.

Please tell me an efficient way...

EDIT: Ok I am re-implementing the structure as I just found out that the Async Tasks are not even queuing up.They are made for concurrency.

The right question to ask should be how to queue database queries in FIFO order? Any pointers regarding that?

Regards, Parvaz Bhaskar

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T05:52:30.777

我最终通过实现线程并仅使用一个处理程序发布我的查询来管理我对数据库的 FIFO 调用。这使我的数据库查询排队，并且我事先更新了我的 UI ......所以我不必等待我的查询完成。

感谢我发现的所有链接最终都是 SO 链接。

# java - Java Why is converting a long (64) to float (32) considered widening?

> ID：15229323
> 
> 赞同：15
> 
> 时间：2013-03-05T16:40:00.680
> 
> 标签：java, promotions

**As it states from oracle**

*Reference from* [Oracle Docs](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html)

Widening Primitive Conversion 19 specific conversions on primitive types are called the widening primitive conversions:

1.  byte to short, int, long, float, or double
2.  short to int, long, float, or double
3.  char to int, long, float, or double
4.  int to long, float, or double
5.  **long to float or double**?
6.  float to double

If a float has 32 bits and a long has 64 how is that considered widening? Shouldn't this be considered narrowing?

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-05T16:41:31.357

a`float`或可以表示的值`double`的范围远大于 a 可以表示的范围`long`。尽管从 a 转换为 a 时可能会丢失有效数字`long`，`float`但它仍然是一种“扩大”操作，因为范围更广。

来自[Java 语言规范，§5.1.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.2)：

> int 或 long 值到 float 或 long 值到 double 的扩大转换可能会导致精度损失 - 也就是说，结果可能会丢失值的一些最低有效位。在这种情况下，生成的浮点值将是整数值的正确舍入版本，使用 IEEE 754 舍入到最近模式（第 4.2.4 节）。

请注意，a`double`可以准确地表示每个可能的`int`值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T16:42:35.210

它被认为是加宽的，因为可以用浮点数表示的数字大于可以用 long 表示的数字。仅仅因为 float 使用 32 位精度并不意味着它可以表示的数字仅限于 2^32。

例如，浮点数`(float)Long.MAX_VALUE+(float)Long.MAX_VALUE`大于`Long.MAX_VALUE`，即使浮点数的精度低于 long。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T16:41:56.993

它被认为是扩大，因为`float`和`double`可以表示比 更大的值`long`。您可能会失去精度，但可以（至少近似地）表示该值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-03T06:37:36.623

如果你用简单的术语来看这个问题，它是关于 原始设计者如何**表示数据的。**

理想情况下，long(64) 的位深度大于 float(32)。但是浮点数据使用[科学概念](https://en.wikipedia.org/wiki/Scientific_notation) 表示，这允许表示更大的范围

例：300【原数】：3×102【科学表示】

* * *

长：-2^63 到 2^63-1

浮点数：(-3.4)*10^38 到 (3.4)*10^38

*请注意这里的 Long（2 的幂）与 Float（10 的幂）的表示差异，这允许 float 具有更高的范围*

希望这会有所帮助

# java - Android how to pass an Activity.class as an argument for a function

> ID：15229324
> 
> 赞同：22
> 
> 时间：2013-03-05T16:40:05.317
> 
> 标签：java, android

I recently moved to Android from Python and am stuck here.

This is my class declaration to create a common function for an Alert Dialog which accepts necessary parameters:

```
public static AlertDialog.Builder getAlertDialog(String strArray[],
        String strTitle, Activity v) {

    return new AlertDialog.Builder(v)
    .setTitle(strTitle).setItems(strArray,
            new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {
            // TODO Auto-generated method stub
        }
    });
} 
```

But I cannot call this function via this piece of code which gives me an error:

```
 getAlertDialog(strArray, strTitle, MakeCall.class).show(); 
```

The error is:

```
the method getAlertDialog(String[], String, Activity) in the type   MakeCallAlertDialog is not applicable for the arguments (String[], String, Class<TestActivity>) 
```

How can I get this correctly?

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2014-11-06T10:34:38.367

## 像这样调用：

```
ButtonClickBySani(R.id.btnsehrabandi, sehrabandiActivity.class); 
```

## 定义：

```
private void ButtonClickBySani(int ButtonId, final Class<? extends Activity> ActivityToOpen)
{
    Button btn;
    // Locate the button in activity_main.xml
    btn = (Button) findViewById(ButtonId);

    // Capture button clicks
    btn.setOnClickListener(new OnClickListener() {
        public void onClick(View arg0) {
            startActivity(new Intent(getBaseContext(), ActivityToOpen));
            // Start NewActivity.class
            //Intent myIntent = new Intent(getBaseContext(), ActivityToOpen);
           // startActivity(myIntent);
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-05T16:41:23.033

如果您只想传递对 Activity 的引用，请使用：（`MakeCall.this`或者可能只是`this`.）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-06-23T11:11:21.163

只需创建一个活动对象/实例，如**new YourActivity()**。

```
public static void Redirect(Context context,Activity page) {

..... //code

context.startActivity(new Intent(context,page.getClass()));

((Activity) context).finish();
} 
```

并将此方法用作

```
Redirect(Registration.this, new YourActivity()); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-05T16:41:13.230

我想你想通过`this`。如果*这*不起作用，请使用`MakeCall.this`.

```
 getAlertDialog(strArray, strTitle, this).show(); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-03-06T08:38:33.777

你需要实例。使用`this`或`SampleActivity.this`。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-04-05T21:02:59.957

这对我有用：

```
private void switchActivity(Class cls){
    Intent intent = new Intent(HomeActivity.this, cls);
    startActivity(intent);
} 
```

像这样调用函数：`switchActivity(DestinationActivity.class)`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-05T16:46:24.190

在 Java 中，您编写的每个类也将`Class`附加一个类。该类`Class`将由类加载器等使用。

正如其他人所说，您应该使用`MakeCall.this`而不是`MakeCall.class`因为`MakeCall.this`将指向自身，它是一个活动，同时`MakeCall.class`将指向 MakeCall 的附加`Class`类。

# ms-access - Access Dynaset and Snapshot

> ID：15229325
> 
> 赞同：0
> 
> 时间：2013-03-05T16:40:08.363
> 
> 标签：ms-access, snapshot

I opened an old project of Access. I have some problems with these objects that are no longer used.
I'm following this guide: [http://support.microsoft.com/kb/129883/en](http://support.microsoft.com/kb/129883/en)

The part of the code in question is this:

```
Private Sub AGG_Dati()

Dim Dyna As Dynaset
Dim DB As Database

Set DB = CurrentDb()
Set Dyna = DB.CreateDynaset("SELECT DISTINCTROW TOrdiniCartone.* FROM TOrdiniCartone WHERE ((TOrdiniCartone.[Tipo Ordine] = ""S""));")

If Dyna.RecordCount > 0 Then Dyna.MoveLast
n = Dyna.RecordCount
If n > 0 Then
    Dyna.MoveFirst
    If " " & Forms![SOrdiniArticoli].[_CArt] <> " " & Dyna.[Codice Articolo] Then
       Forms![SOrdiniArticoli].[_CArt] = Dyna.[Codice Articolo]
       Forms![SOrdiniArticoli].[_CForn] = ""
       MsgBox "Selezionare un Fornitore!"
       Stato = 1
    Else.... 
```

Following the guide, I changed to:

```
Private Sub AGG_Dati()

Dim Dyna As Recordset
Dim DB As Database

Set DB = CurrentDb()
Set Dyna = DB.OpenRecordset("SELECT DISTINCTROW TOrdiniCartone.* FROM TOrdiniCartone WHERE ((TOrdiniCartone.[Tipo Ordine] = ""S""));", dbOpenDynaset) 
```

It gives me error here: Dyna.[Codice Articolo]

[Codice Articolo] is a field in the table TOrdiniCartone

Does anyone know these things?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:50:11.657

Dyna 应该被定义为一个 dao.recordset：

```
Dim Dyna As DAO.Recordset 
```

可以引用字段

```
Dyna.Fields("Field Name") 
```

或者

```
Dyna.Fields(<index>) 
```

其中第一列的索引从 0 开始。

你也可以做

```
Dyna![FieldName] 
```

# javascript - 尝试向 CSS 样式表添加规则会在 Firefox 中给出“操作不安全”

> ID：15229330
> 
> 赞同：13
> 
> 时间：2013-03-05T16:40:36.147
> 
> 标签：javascript, css, firefox, stylesheet, greasemonkey

我正在使用 Greasemonkey 并尝试在特定域中添加规则。但这会导致错误提示`The operation is insecure`。
该代码在 Chrome 上运行良好。

脚本运行在`http://mydomain.com/test/test.php`
并且 CSS 文件是`http://cdn.mydomain.com/test/css/global.css`

我的功能：

```
function css(selector, property, value) {
    for (var i=0; i<document.styleSheets.length;i++) 
    {
        try 
        { 
            document.styleSheets[i].insertRule(selector+ ' {'+property+':'+value+'}', document.styleSheets[i].cssRules.length);
        } 
        catch(err) 
        { 
            try // IE
            { 
                document.styleSheets[i].addRule(selector, property+':'+value);
            } 
            catch(err) {}
        }
    }
} 
```

在 Google 上，我发现这可能是因为我正在尝试访问跨域，所以我尝试将 CSS 文件的 URL 添加到“接受的 URL”，但没有结果。

我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-04-23T20:32:35.793

我发现这个解决方案可以解决这个问题：

```
var style = document.createElement("style");
document.head.appendChild(style);
style.sheet.insertRule("body { font-size:40px; }", 0); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T20:41:09.607

是的，Firefox 会阻止对跨域样式表的访问。它可以（或至少曾经）抛出异常：

> “访问受限 URI 被拒绝”代码：“1012”
> nsresult：“0x805303f4 (NS_ERROR_DOM_BAD_URI)”
> 位置：......

但是，使用 CSS，您无需向特定样式表添加规则。只需覆盖您关心的样式。

例如，如果页面设置：

```
body {
    background: white;
} 
```

你的脚本集：

```
body {
    background: red;
} 
```

然后页面将是红色的（名义上）。

有关更改目标页面样式的最简单、最智能的方法，**请参阅以前的答案，例如[*这个*](https://stackoverflow.com/a/15126413/331508)。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T20:36:35.923

样式表中的规则以各种方式使用该样式表的权限运行。这意味着如果您可以将规则注入到跨站点样式表中，您就可以进行一些跨站点攻击。这就是 Firefox 阻止向跨站点样式表添加规则的原因。

Chrome 可能会使用链接文档的权限运行所有规则，这就是为什么它允许您向工作表添加内容....但是请注意，Chrome 不会让您*阅读*跨站点样式表。

请注意，如果您使用 CORS 加载样式表（通过在 上设置“crossorigin”属性`<link>`并确保您的 CDN 提供正确的标头），那么您将能够跨站点访问它。

# vb.net - “将 'system.linq.IQueryable(of String)' 转换为 'String' 时可能会出现运行时错误

> ID：15229333
> 
> 赞同：0
> 
> 时间：2013-03-05T16:40:40.913
> 
> 标签：vb.net, linq, global-variables

我正在创建一个功能，允许用户输入电子邮件地址并单击“搜索”。这将搜索我的数据库并返回电子邮件地址，然后我将在其他方法中使用该地址随机生成密码并通过电子邮件发送。语言是 ASP.VB，数据库是 LINQ。我收到一条错误消息，提示“将 'system.linq.IQueryable(of String)' 转换为 'String' 时可能会发生运行时错误”

代码段是：

```
 Protected Sub btnSearchEmail_Click(sender As Object, e As System.EventArgs) Handles         btnSearchEmail.Click

    Dim db As New DatabaseDataClassesDataContext()

    GlobalVariables.SearchUserEmail = txtSearchEmail.Text

    GlobalVariables.CurrentEmailAddress = (From u In db.User_Signons
                                           Where u.Email = SearchUserEmail
                                           Select u).Distinct

End Sub 
```

关于如何解决这个问题的任何想法。全局变量都是“As String”，数据库中的字段是 varchar。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T16:42:06.107

该`Distinct`调用返回一系列字符串，而您分配的属性只是一个字符串。考虑使用`First`or`FirstOrDefault`代替`Distinct`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T16:42:49.587

问题在这里：

```
GlobalVariables.CurrentEmailAddress = (From u In db.User_Signons
                                       Where u.Email = SearchUserEmail
                                       Select u).Distinct 
```

`Distinct`返回不同值的集合。如果你只想要一个值使用

```
var user = (From u In db.User_Signons
            Where u.Email = SearchUserEmail
            Select u).First

GlobalVariables.CurrentEmailAddress = user.Email

' Do something with password 
```

注意 ：

1.  这只会给你第一个值（显然）
2.  如果没有结果（如果这是合法的可能性，则用于`FirstOrDefault`返回默认值（对于字符串）） ，它将引发异常。`null`

# ios - “应用商店发布”和“开发/调试发布”的设备特定构建设置？

> ID：15229334
> 
> 赞同：0
> 
> 时间：2013-03-05T16:40:41.720
> 
> 标签：ios, xcode, ipad

我目前正在开发一个使用字符串增强现实 SDK 演示版本（[许可证说明](http://www.poweredbystring.com/licensing)）的应用程序，并且我已将 SDK 与我自己的代码合并并在我自己的 iPad（第 4 代）上运行。

我遇到的奇怪问题是，每当我进入使用 SDK 的应用程序部分时，它都会抱怨我的应用程序是应用商店版本，而我的 SDK 许可证不支持它。但我只是在我自己的设备上进行测试，我根本没有为应用商店构建应用。事实上，我属于不支持应用商店发布且仅用于设备测试的企业许可组。

如果我使用另一台 iOS 设备 (iPad Mini) 配置了相同的配置文件/许可证，连接到同一台计算机。该应用程序运行良好。

Xcode 构建设置或特定设备本身是否有设置说明应用程序是否用于应用程序商店发布？

**更新：**想通了，供应配置文件将需要导入到 Xcode 资源库并专门导入到设备本身。SDK 必须检查一些无法检测到库配置文件的特殊设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:59:25.790

确保使用您的开发配置文件而不是您的发行版对目标的调试设置进行签名。您可能会尝试的另一件事 - 不要对发布设置进行代码签名：

![在此处输入图像描述](../Images/94ccfc742341a35f84f9368241b32c9d.png)

# ios - UILabel 没有使用线程立即显示

> ID：15229335
> 
> 赞同：3
> 
> 时间：2013-03-05T16:40:44.847
> 
> 标签：ios, objective-c, uiview, uilabel, grand-central-dispatch

我想在线程中加载一些视图以避免 UI 冻结等待加载结束。

我不习惯穿线，所以我做了一个快速测试。我的代码只是尝试在线程中创建视图并将此视图添加到主线程的当前视图控制器视图中。

我的 UIView 正在工作，但对于我的 UILabel，我必须等待 20-60 秒才能将其显示在屏幕上。

我使用 UIButton 进行了测试，在这种情况下，按钮会立即显示，但按钮内的标签显示的延迟与我的 UILabel 相同。

让它按我想要的方式工作的唯一方法是添加一个 [lbl setNeedsDisplay]; 在主线程中强制 UILabel 立即显示。**为什么？没有这条线可以完成这项工作吗？**

```
 dispatch_queue_t queue = dispatch_queue_create("myqueue", NULL);
dispatch_async(queue, ^{

    // NEW THREAD
    UILabel *lbl = [[UILabel alloc] initWithFrame:CGRectMake(100, 100, 100, 48)];
    lbl.text = @"FOO";

    UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 40, 40)];
    view.backgroundColor = [UIColor redColor];

    // MAIN THREAD
    dispatch_async(dispatch_get_main_queue(), ^{
        [self.view addSubview:lbl];
        [lbl setNeedsDisplay]; // Needeed to see the UILabel. WHY???

        [self.view addSubview:view];
    });
});
dispatch_release(queue); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T16:45:55.173

您还应该在主队列上设置标签的文本：

```
dispatch_async( dispatch_get_main_queue(), ^{
    UILabel *lbl = [[UILabel alloc] initWithFrame:CGRectMake(100, 100, 100, 48)]
    UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 40, 40)];
    lbl.text = @"FOO";
    [self.view addSubview:lbl];
    [self.view addSubview:view];
}); 
```

最好将**所有**UI 内容保留在主队列中。

**更新**：

它似乎`initWithFrame:`不是线程安全的（在[SO 答案](https://stackoverflow.com/a/11123184/620197)中找到，另请参阅文档中的[线程注意事项）。](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/UIView/UIView.html)`UIView`

# magento - 在表格列中显示分组产品层级定价

> ID：15229342
> 
> 赞同：0
> 
> 时间：2013-03-05T16:41:00.530
> 
> 标签：magento, magento-1.7

我正在使用具有分层定价的分组产品，并且我希望将每一层都放在它自己的表格列中。默认显示具有“产品”、“价格”和“数量”列。我希望这些列是“产品”、“1 价格”、“5 价格”、“100 价格”（等）和“数量”。有没有办法在不从头开始重写定价的情况下做到这一点？

# solr - 结果集分组且分组受限时返回solr中的文档数

> ID：15229345
> 
> 赞同：3
> 
> 时间：2013-03-05T16:41:08.470
> 
> 标签：solr

我在 solr 中使用分组来确定特定列中唯一值的数量以及查询的文档总数。这个数字是使用`group.ngroup=true`请求中的方法返回的。这意味着结果返回`ngroup=30000`并且`matches=500000`

这很好，直到每组返回的文档数量受到限制（并且限制是固定的）。例如，如果我要从这个结果集中提取所有记录（假设我不是说这会完成），每个组将被限制为`group.limit=#`

如果我只返回`group.limit=2`每组 1 到 20 个可能的文档范围中的每组两个文档 ()，这显然意味着在受限时为此选择返回的文档总数介于`1*ngroup`和`2*ngroup`

问题是如何根据 group.limit 返回返回的文档的确切数量？与范围相反。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T05:22:01.420

目前，似乎没有一个选项可以在我们使用分组时获得返回的确切文档数量。

> 响应字段**“matches”**和**“numFound”**返回匹配的文档数，但不返回响应中返回的文档数，根据您基于**group.limit**参数的限制。

在即将发布的 Solr 版本中，这可能是一个“值得拥有”的功能。

# simulink - 从 M 文件控制 simulink

> ID：15229349
> 
> 赞同：3
> 
> 时间：2013-03-05T16:41:10.930
> 
> 标签：simulink, matlab

我正在尝试从 M 文件控制 simulink。我想在 M 文件中做的是给 simulink 模型一些输入，运行 simulink 模型，在 0.6 秒处更改一个输入值，继续使用新输入运行 simulink 模型。

我已经知道通过使用set_param，我可以启动、暂停和继续simulink，但问题是我不知道如何在某个时间（0.6s）暂停simulink模型，是否可以获得当前时间从 simulink 模型并在 M 文件中读取它？

我已经知道的另一种方法是使用 sim 从 0 到 0.6s 运行 simulink 模型，并使用 SimState 将信息保存在 0.6s，然后加载这些信息以恢复仿真。我试图在模拟恢复之前更改输入，但似乎模型将从它保存的信息中加载输入值，它不会采用新的输入值。

我在这个问题上卡了很长时间，有人可以帮我解决这个问题吗？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T10:42:40.337

您可以通过以下方式获取正在运行的模拟的当前时间：

```
get_param('simulink_model_name', 'SimulationTime'); 
```

因此，例如，通过在模拟期间使用 M 文件检查此值

```
timer(...) 
```

您可以检测到模拟何时为 0.6 秒。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-13T09:54:48.183

我使用了 simulink 和 m-script 的组合来实现类似的目标。

在您的模型中，添加一个“断言”块。双击它，然后取消选中“断言失败时停止模拟”。在“断言失败时的模拟回调”字段中，添加三个命令：

1.  set_param(bdroot,'模拟命令','暂停');
2.  运行（'myscript.m'）；%插入脚本名称
3.  set_param(bdroot,'模拟命令','继续');

现在将此块的输入连接到“不等于”关系运算符。将关系运算符的第一个输入端口连接到时钟（请设置模拟时钟的抽取或数字时钟的采样时间 [通常为 -1 表示继承]）。第二个输入端口连接到值为 0.6 的常量块

在模拟模型时，模拟将在 0.6 秒处暂停，执行 m 文件以更改输入参数（考虑到它是可调的），然后继续模拟。

断言块在其输入信号变为 0 时被调用。在 0.6 秒时，关系运算符的输出将为 0。

让我知道它是否有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T19:43:37.467

目前，这在 M 文件中是不可能的。如果要在给定时间从外部动态更改输入，则需要 S-Function。即使是这个解决方案也很困难，而且很容易出错，因为 Mathworks 不想支持这个功能，因为它破坏了他们出售的另一个工具箱的一个功能。随着时间的推移，我相信他们会授予这种特权，但它今天不存在。此外，为什么不使用动态输入块来更改输入值，例如地图、信号生成器等？

# jquery - jQuery上方法之间的差异

> ID：15229351
> 
> 赞同：1
> 
> 时间：2013-03-05T16:41:15.343
> 
> 标签：jquery

有什么区别：

```
$("a.myclass").on("click", callback); 
```

和

```
$(document).on("click", "a.myclass", callback);? 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T16:42:56.967

第二种方法在`a.myclass`动态添加到 DOM 时使用（例如，在加载文档时不存在）。理想情况下，您希望在 DOM 中使用比`document`获得最佳性能更近的元素^*。两者都绑定到点击事件`a.myclass`。

根据关于第二种格式的 jQuery[文档：](http://api.jquery.com/on/)`.on()`

> 事件处理程序仅绑定到当前选定的元素；当您的代码调用 .on() 时，它们必须存在于页面上。为确保元素存在并且可以被选择，请在页面 HTML 标记中的元素的文档就绪处理程序内执行事件绑定。如果将新 HTML 注入页面，请在将新 HTML 放入页面后选择元素并附加事件处理程序。

^(* 在文档树顶部附近附加许多委托事件处理程序会降低性能。每次事件发生时，jQuery 必须将该类型的所有附加事件的所有选择器与从事件目标到文档顶部的路径中的每个元素进行比较。为了获得最佳性能，请将委托事件附加到尽可能靠近目标元素的文档位置。避免过度使用 document 或 document.body 来处理大型文档的委托事件。)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T16:51:15.943

```
$("a.myclass").on("click", callback); 
```

使用这段代码，jQuery 抓取所有匹配的元素`a.myclass`并将事件处理程序附加到它们。

```
$(document).on("click", "a.myclass", callback); 
```

在这里，jQuery 抓取`document`并附加事件处理程序以单击冒泡到它的事件（最初在元素匹配时触发`a.myclass`）。

当您单击`a.myclass`时，第一个将在第二个之前执行，因为代码尚未“冒泡”到包含文档。

第二个的优点是，正如[j08691](https://stackoverflow.com/a/15229385/356541)所说，在上面的脚本执行（或与该描述匹配）之后添加到页面中的匹配该描述的元素仍将触发回调。

缺点是如果你在某个时候编写代码

```
$('a').on('click', function(e){
    e.stopPropagation();
}) 
```

或者

```
$('a').on('click', function(e){
    return false;
}) 
```

……那么第二种方法永远不会触发。不过，这是一个极端情况，您可能不需要担心。

# sql - 计算表格各列的中位数

> ID：15229359
> 
> 赞同：0
> 
> 时间：2013-03-05T16:41:41.910
> 
> 标签：sql, pivot, median

我需要计算包含不同年龄范围的表的列值的中位数，但我无法找到问题的答案。该表的结构如下：

```
编号 0-5 5-10 11-15 16-20 ...
------------------------------------------
1 14 5 12 5 ...
2 5 11 14 17 ...

```

我已经阅读了有关使用行数和聚合来查找数据中位数的信息，但这似乎要求所有数据都在同一列中。因此，我认为我需要在 SQL 中使用 PIVOT 函数，但我无法弄清楚所需的语法。谁能帮我这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T16:49:47.023

你真正想要的是一个 UNPIVOT：

```
SELECT ID, Value, AgeRange
FROM 
   (SELECT *
   FROM ages) pivotedDate
UNPIVOT
   (Value FOR AgeRAnge IN 
      ([0-5], [6-10], ...)
) AS Result; 
```

请注意，您必须将所有年龄范围都放在语句中才能返回它们的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T16:52:52.617

没有一种方法是真正优雅的。我会去蛮力：

```
select id,
       (case when tot1 >= totn / 2 then 'col1'
             when tot2 >= totn / 2 then 'col2'
        . . .
       ) as mediancolumn
from (select t.*,
             col1 as Tot1,
             col1 + col2 as Tot2,
             . . .
             (col1 + col2 + . . . coln) as Totn
      from t
     ) t 
```

如果你真的想解析范围，那么同样的想法也成立。但是您需要更改语句的`then`一部分`case`来处理数值。

# animation - 将 PPT 转换为 .swf 或任何视频格式并保留动画

> ID：15229361
> 
> 赞同：0
> 
> 时间：2013-03-05T16:41:43.680
> 
> 标签：animation, flash, powerpoint

我见过人们免费使用 iSpring 将 powerpoint 转换为 swf 文件，但它似乎需要 Microsoft Office。有没有其他选择？我已经研究过 OpenOffice，它确实转换为 .swf，但它不保存动画和帧转换，只是每张幻灯片的静态图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T07:02:32.083

我只知道两种解决方案——使用 MS Office 或 OpenOffice，但 OO 确实不支持动画和过渡。所以基于 MS Office 的软件优于基于 OO 的软件。但是我从来没有听说过可以在没有 PowerPoint 的情况下转换 ppt 文件的 ppt-to-flash 转换工具

# java - 如何在android中分离通过蓝牙接收的数据

> ID：15229362
> 
> 赞同：1
> 
> 时间：2013-03-05T16:41:49.993
> 
> 标签：java, android, bluetooth, msp430

我已经修改了 BluetoothChat 示例代码以连接到我已连接到 TI MSP430 开发板上的 UART 的通用蓝牙收发器。我已经建立了通信，可以发送和接收单个字符串并在 TextView 中显示该值。下面是我用来发送压力、temp1 和 temp 2 的 1-3 位数值的 C 代码。它相当简单，而且我正在按设计工作。

```
 for(int i = 0; i <= 2; i++)     // send pressure value
  {
    UCA0TXBUF = pressureString[i];
    while(!(IFG2 & UCA0TXIFG));
  }
  for(int i = 0; i <= 2; i++)     // send temp1 value
  {
    UCA0TXBUF = tempOneString[i];
    while(!(IFG2 & UCA0TXIFG));
  }
  for(int i = 0; i <= 2; i++)     // send temp2 value
  {
    UCA0TXBUF = tempTwoString[i];
    while(!(IFG2 & UCA0TXIFG));
  } 
```

现在我想将多条数据发送到 android 设备，并根据它们的数据类型在每个值的单独 TextView 中显示它们。现在我正在测量两个温度传感器和一个压力传感器。我已经毫无问题地将所有数据发送到了 android 设备，但是所有值在 TextView 中只是相互覆盖，因此只显示发送的最后一个字符串。

这是连接到远程设备时运行的代码部分：

```
/**
 * This thread runs during a connection with a remote device.
 * It handles all incoming and outgoing transmissions.
 */
private class ConnectedThread extends Thread {
    private final BluetoothSocket mmSocket;
    private final InputStream mmInStream;
    private final OutputStream mmOutStream;

    public ConnectedThread(BluetoothSocket socket) {
        Log.d(TAG, "create ConnectedThread");
        mmSocket = socket;
        InputStream tmpIn = null;
        OutputStream tmpOut = null;

        // Get the BluetoothSocket input and output streams
        try {
            tmpIn = socket.getInputStream();
            tmpOut = socket.getOutputStream();
        } catch (IOException e) {
            Log.e(TAG, "temp sockets not created", e);
        }

        mmInStream = tmpIn;
        mmOutStream = tmpOut;
    }

    public void run() {
        Log.i(TAG, "BEGIN mConnectedThread");
        byte[] buffer = new byte[1024];
        int bytes;

        // Keep listening to the InputStream while connected
        while (true) {
            try {
                // Read from the InputStream
                bytes = mmInStream.read(buffer);

                // Send the obtained bytes to the UI Activity
                mHandler.obtainMessage(BluetoothChat.MESSAGE_READ, bytes, -1, buffer)
                        .sendToTarget();
            } catch (IOException e) {
                Log.e(TAG, "disconnected", e);
                connectionLost();
                break;
            }
        }
    } 
```

这是读取消息并将其显示在 TextView 中的代码：

```
case MESSAGE_READ:
                byte[] readBuf = (byte[]) msg.obj;
                // construct a string from the valid bytes in the buffer
                String readMessage = new String(readBuf, 0, msg.arg1);
                mTextView.setText(readMessage);                         //added by AMJ in attempt to display variable in textview
                break; 
```

我似乎无法弄清楚如何对 android 应用程序进行编程以区分字符串之间的区别，这样当我收到 Temp1 字符串时，它会转到 Temp1TextView，而 Temp2 字符串会转到 Temp2TextView 等。我应该添加一个特殊字符作为从 MSP430 发送的第一位，并在 Android 中引用该位以确定它应该去哪里？只是一个想法。

任何帮助深表感谢。

**编辑：**我想我可以尝试将 int 转换为字符串，然后使用标记器将其分隔，然后将其转换回 int。但是，应用程序现在在通过蓝牙接收数据时崩溃。这是我用来转换它的代码。知道为什么它可能会崩溃吗？

```
bytes = mmInStream.read(buffer);

                byteString = String.valueOf(bytes);

                StringTokenizer tokens = new StringTokenizer(byteString, ":");
                String first = tokens.nextToken();      // this will contain exhaust temp
                String second = tokens.nextToken();     // this will contain damper position

                separatebytes1 = Integer.valueOf(first);
                    separatebytes2 = Integer.valueOf(second);

                // Read from the InputStream
              //  bytes = mmInStream.read(buffer);

                // Send the obtained bytes to the UI Activity
           //     mHandler.obtainMessage(BluetoothChat.MESSAGE_READ, bytes, -1, buffer)
           //             .sendToTarget();

                mHandler.obtainMessage(BluetoothChat.MESSAGE_READ, separatebytes1, -1, buffer)
                .sendToTarget(); 
```

这是崩溃中的 logcat：

```
W/dalvikvm(24850): threadid=11: thread exiting with uncaught exception (group=0x
411ae300)
E/AndroidRuntime(24850): FATAL EXCEPTION: Thread-1286
E/AndroidRuntime(24850): java.util.NoSuchElementException
E/AndroidRuntime(24850):        at java.util.StringTokenizer.nextToken(StringTok
enizer.java:208)
E/AndroidRuntime(24850):        at com.example.android.BluetoothChat.BluetoothCh
atService$ConnectedThread.run(BluetoothChatService.java:411)
W/ActivityManager(  270):   Force finishing activity com.example.android.Bluetoo
thChat/.BluetoothChat 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:47:57.833

您要么有一条消息，其中包含多个按预定义顺序排列的值，要么您必须告诉接收者（应用程序）接下来要发送哪个值，或多或少地按照您的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:51:20.063

崩溃（关于您编辑的问题）可能是因为 byteString 不包含“：”。如果是这种情况，您 `String second = tokens.nextToken()` 将完全抛出您发布的致命异常。

因此，在用 分隔字符串之前`tokens.nextToken()`，请检查字节字符串中有多少令牌： `tokens.countTokens`

# c# - 组合框，winforms列表框中的可点击链接

> ID：15229368
> 
> 赞同：0
> 
> 时间：2013-03-05T16:42:02.917
> 
> 标签：c#, winforms

我正在尝试在 C# winforms 中设计一个添加-删除容器。我正在尝试通过使用列表框来实现它。现在，我的 listbox1 包含组合框和其他项目。在这方面我有两个问题：

1.  我应该使用哪个控件来定义非组合框项目？在其他形式中，选择这些控件将打开一个 Excel 工作表。在这种情况下，这将是一个类似的操作，通过根据组合框中选择的值过滤数据。

2.  如何创建此 listbox1 和 listbox2？另外，到目前为止，我编写的用于将项目从一个列表框中添加和删除到另一个列表框中的代码是否正确？

这是到目前为止编写的整体代码。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class DataFilter : Form
    {
        public DataFilter()
        {
            InitializeComponent();
        }

        private void button3_Click(object sender, EventArgs e)
        {
            this.Controls.Clear();
            this.InitializeComponent();
        }

        private void indexerbtn_Click(object sender, EventArgs e)
        {
            Indexer ins = new Indexer();
            ins.MdiParent = this.MdiParent;
            this.Hide();
            ins.ShowDialog();
        }

        private void MoveListBoxItems(ListBox source, ListBox destination)
        {
            ListBox.SelectedObjectCollection sourceItems = source.SelectedItems;
            foreach (var item in sourceItems)
            {
                destination.Items.Add(item);
            }
            while (source.SelectedItems.Count > 0)
            {
                source.Items.Remove(source.SelectedItems[0]);
            }
        }

        private void button1_Click(object sender, EventArgs e)
        {
            MoveListBoxItems(listBox1, listBox2);
        }

        private void button2_Click(object sender, EventArgs e)
        {
            MoveListBoxItems(listBox2, listBox1);
        }
   }
} 
```

..................................................... ......................................... 请告诉我您的电子邮件地址. 我可以发送设计的屏幕截图，这可以更好地解释目标。

# javascript - ExternalInterface.call 不起作用

> ID：15229373
> 
> 赞同：2
> 
> 时间：2013-03-05T16:42:17.437
> 
> 标签：javascript, flash, actionscript, actionscript-2, externalinterface

我试图`ExternalInterface.call()`从我的 SWF 内部。

*请注意，调用来自我嵌入到另一个 SWF（`_root`我无法控制的 SWF）中的 SWF 内部。*

这是我的 JavaScript：

```
function player_DoFSCommand(command, args) 
{
    args = String(args);
    command = String(command);

    var arrArgs = args.split(g_strDelim);

    switch (command)
    {
        case "CC_ClosePlayer":

            console.log("yo");
            break;

        default:
            // alert(command);
            break;
    }
} 
```

这是我的 AS2 代码：

```
import flash.external.ExternalInterface;

var quiz = _root;

quiz.g_mcFrame.mcFinish.swapDepths(quiz.getNextHighestDepth());
quiz.g_mcFrame.mcFinish._visible = false;
quiz.oSlide.m_oInteraction.m_oVariableMgr.m_arrBoolResumeData = false;

var arrVars:Object = quiz.oSlide.m_oActionHandler.m_oFrame.m_oVariableMgr.m_arrVariables;
var args:Array = [
    arrVars[2].m_nNumber, // Points awarded
    arrVars[3].m_nNumber, // Max points
    arrVars[5].m_nNumber, // Pass percentage
    arrVars[6].m_nNumber, // Pass points
    arrVars[7].m_nNumber, // Score percent
    arrVars[10].m_strString // Result
];

ExternalInterface.call('player_DoFSCommand("CC_ClosePlayer", args)');
ExternalInterface.call('console.log("hello")'); 
```

问题是`ExternalInterface.call('player_DoFSCommand("CC_ClosePlayer", args)')`不起作用，或者至少“哟”没有按预期出现在控制台中。

该脚本肯定在调用 ExternalInterface 时加载。第二个调用有效，控制台中出现“hello”，但是第一个函数没有触发。

我可以通过直接在控制台中输入来验证该功能是否有效，`player_DoFSCommand("CC_ClosePlayer", args)`并且它会成功记录。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T16:55:15.050

您可以验证嵌入代码中的 allowScriptAccess 是否设置为 true 吗？

试试这个：

```
 var isAvailable:Boolean = ExternalInterface.available;
 trace(isAvailable); 
```

您还希望像这样使用 ExternalInterface ，并将您的参数作为第二个变量传递：

```
 ExternalInterface.call("player_DoFSCommand",args); 
```

或者

```
 ExternalInterface.call("console.log","testing..."); 
```

# c++ - FoundationDB 的客户端 API

> ID：15229374
> 
> 赞同：0
> 
> 时间：2013-03-05T16:42:18.077
> 
> 标签：c++, flowlang, foundationdb

我正在检查[FoundationDB](http://www.foundationdb.com)的网站。它说它是在新的编程语言[Flow](http://www.flowlang.net)上开发的。在网站上它说：

> Flow 是一种新的编程语言设计——实际上是一种全新的编程语言范式——通过无处不在的、保证安全的隐式并行化解决了多核困境。

它`code`本身最终被编译为 C++。我在想的是，是否可以在 Flow 中包含 C++ 代码，是否可以重用已经存在的 C++ 代码/库？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T17:35:45.787

这里有点混乱。FoundationDB 是使用称为 Flow 的专有语言构建的，而您到 Flow (flowlang.net) 的链接是另一种编程语言。命名是不幸的，但可以理解，因为 FoundationDB 的 Flow（我称之为 FDBFlow）是在 Flow(lang) 之前启动的，但没有公开披露。

简单来说：

*   Flowlang 帮助编写*并行代码*
*   FDBFlow 帮助编写*并发代码*

# google-play - 如何在我发布的密钥库应用程序中修改“SHA1”

> ID：15229380
> 
> 赞同：1
> 
> 时间：2013-03-05T16:42:34.807
> 
> 标签：google-play, publishing, sha

我使用版本 0.1 的 appsgeyser 制作了我的应用程序。

我在 phonegap 上制作了具有更多功能的相同应用程序，并将我的版本更新到 0.2。一切正常，但是在将我的 apk 上传到同一应用程序下的谷歌商店时，它说我的 SHA1 已修改，我必须使用相同的证书。

我该怎么办？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-07T13:33:37.187

Play store requires `.apk` to be signed before you can publish it there.

If you've made an app with AppsGeyser and published it to Play then your application is signed by the AppsGeyser private keys (unless you've explicitly signed the `.apk` before publising it or if you've provided your secret keystore to AppsGeyser which is unlikely).

AppsGeyser [wont give you their keystore](http://www.appsgeyser.com/support/can-i-have-the-apps-keystore.php) and you need it to be able to sign new version of your software. Here is the quote from [docs](http://developer.android.com/tools/publishing/app-signing.html) about this:

> Your private key is required for signing all future versions of your application. If you lose or misplace your key, you will not be able to publish updates to your existing application. You cannot regenerate a previously generated key.

In other words you have 2 options here. Either stick with AppsGeyser and update your app using their services or publish update to your application as a whole new appliation.

# java - 使用最新的 JRE 而不是旧的 Java 版本，我能保证它会工作吗？

> ID：15229381
> 
> 赞同：9
> 
> 时间：2013-03-05T16:42:39.540
> 
> 标签：java

假设我有一个使用 Java 1.5 编码的 Java 项目，并且我正在使用更高版本的 Java，但将目标设置为 1.5。

如果代码可以使用后来的 Java 编译和测试，那么我是否可以保证它在实际的 Java 1.5 运行时也能正常工作？

或者我是否需要安装我所依赖的所有 JRE 的一个版本才能确定？

JRE 中的错误会发生什么？如果 1.5 中存在错误，则在 1.6 中已修复。如果我使用目标设置为 1.5 的 Java 1.6，该错误会影响我吗？

在现实情况下，这是我需要关注的问题吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-05T16:45:01.893

假设您将 target**和 source**设置为 1.5，您只需要担心我能想到的三种主要情况：

*   您正在使用内部`com.sun`类，它可能已更改或消失（或以某种方式依赖于其他一些内部行为。）

*   您依赖于在更高版本中修复的错误行为。

*   您遇到了向后不兼容的更改（很少见，但已知会发生。）

    > JRE 中的错误会发生什么？如果 1.5 中存在错误，则在 1.6 中已修复。如果我使用目标设置为 1.5 的 Java 1.6，该错误会影响我吗？

如果错误在库中，那么不会影响您。Target 仅真正规定了您编译的字节码版本，您仍将使用更新后的库。如前所述，请注意，如果您依赖这种错误行为，这可能会导致问题。

如果有故意的向后不兼容的更改，那么我所看到的所有情况都将其呈现为编译时错误而不是运行时错误，因此它们将很容易被发现（并且通常也很容易修复。）

我仍然主张在发布之前对新版本的 JVM 进行测试，但在实践中这*通常*不是问题，无论如何，根据我的经验。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-05T16:45:03.913

所有新的 JRE 实现都是以保持兼容性的方式进行的，所以答案是**肯定**的。但是，我建议您**测试您的应用程序**，因为您的项目可能存在非常具体的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T16:55:50.297

总结一下您的问题：JRE 是否向后兼容，JDK 是否向前兼容？

简短的回答是**肯定**的。

**说明：** JDK 不向后兼容。即JDK5代码不能在JVM4上运行，或者JDK6不能在JVM5上运行。

然而，JRE 是向后兼容的，因为通常组织*编写一次，执行多次*

**原因：** 随着 JRE 变得越来越复杂，具有更智能的堆管理、垃圾收集、线程处理等，客户倾向于迁移到更新版本的 JVM。

**错误**
如果您将更高版本的 JVM 与更早的“目标”一起使用，则 JVM 中存在的真正错误将停止这种行为。这是因为`target=prev_version`并没有真正完全调用以前的 JVM。
它只选择*增量*并以不同的方式处理代码。但是，如果它是在新 JVM 中有意引入的功能（比如 6），切换到 target=1.5 实际上会回退到 1.5 的行为

希望能在一定程度上澄清你的疑惑。

# jquery - 当所有孩子都拥有相同的班级时隐藏父母tr

> ID：15229387
> 
> 赞同：0
> 
> 时间：2013-03-05T16:43:05.293
> 
> 标签：jquery, html-table, hide

我正在列出一项体育赛事的结果。每个事件在表中都有自己的行，有些有多个结果，列为 li 项目。人们需要能够过滤结果，因此通过使用复选框，他们可以从列表中消除结果。我通过将类 .gone 添加到这些结果中来做到这一点，这使它们显示：无。但是，如果他们对结果进行了足够的过滤，某些事件将不再有任何可见的结果。如果出现这种情况，我希望表中的完整行显示为：无。

基本上，如果 tr 中的所有 li 都具有 .gone 类，则父 tr 也应该被分配 .gone 类。

我对此有点菜鸟，我在这个网站上尝试了很多不同的例子，但我显然遗漏了一些东西。

这是HTML：

```
<table width="100%" border="0" cellpadding="5" cellspacing="0">
<tr>
    <td valign="top" width="75px"><div id="tableHeader">Date</div></td>
    <td valign="top"><div id="tableHeader">Event</div></td>
    <td valign="top"><div id="tableHeader">Location</div></td>
</tr>

<tr id="section">

    <td valign="top">
        <div id="postmeta">3/2/2013</div>
    </td>

    <td valign="top">
        <div class="posttitle" id="post-103">AT&#038;T American Cup</div>
            <ul>
            <li class="Men"><a href="http://usagym.org/PDFs/Results/m_13ac_final.pdf" target="_new">Men's All-Around</a></li>
            <li class="Women"><a href="http://usagym.org/PDFs/Results/w_13ac_final.pdf" target="_new">Women's All-Around</a></li>
            </ul>
    </td>

    <td valign="top">Worcester, Mass.</td>

</tr>

<tr id="section">

    <td valign="top">
        <div id="postmeta">3/1/2013</div>
    </td>

    <td valign="top">
        <div class="posttitle" id="post-106">Nastia Liukin Cup</div>
            <ul>
            <li class="Women"><a href="http://usagym.org/PDFs/Results/w_13nlc_final.pdf" target="_new">Final Results</a></li>
            </ul>
    </td>

    <td valign="top">Worcester, Mass.</td>

</tr> 
```

那么，我尝试了什么？很多事情，但这是我最后一次尝试：

```
if ($("#section ul li.gone").length == $("#section ul li").length) {
// all list items are selected
$('tr').addClass('gone');} 
```

我也为这段代码道歉。这是我在这里的第一篇文章，我试图整理代码格式。

任何帮助是极大的赞赏。这是我正在处理的页面......如果它有帮助的话： [http ://dev-public.usagym.org/2013/?cat=7](http://dev-public.usagym.org/2013/?cat=7)

更新：正如一位响应者指出的那样，我可以检查事件的 li 是否隐藏，如果是，隐藏事件标题。但是，我最初想隐藏 ul 直到有人点击事件标题。我在页面上没有该代码，但我现在有了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:54:17.727

我认为您在比较集合的长度方面有正确的想法。

遍历每个`tr`并分别应用比较：

```
$('tr').each(function() {
    var $this = $(this);
    var $lis = $this.find('li');

    if ($lis.length === 0) return;

    if ($lis.filter('.gone').length === $lis.length) {
        $this.addClass('gone');
    } else {
        $this.removeClass('gone');
    }
}); 
```

我还让循环跳过检查它是否没有任何子`li`项，因为它也会循环遍历您的标题行。

# c - Linux内核页面释放

> ID：15229390
> 
> 赞同：2
> 
> 时间：2013-03-05T16:43:07.760
> 
> 标签：c, memory-management, linux-kernel

我正在构建自己的内存池作为 Linux 内核模块。我修改了页框分配函数，以便用户级进程从我的内存池中获取页框。这工作正常。然后我尝试修改页面释放功能，以便在进程释放页面框架时回收它们。但是每当我启用页面回收时，我都无法启动任何程序，并在控制台中打印“分段错误”消息。

我`alloc_page(__GFP_HIGHMEM | __GFP_MOVABLE | __GFP_ZERO)`用来创建我的内存池，它进入每 cpu 页面帧缓存，所以我得到的每个页面都有一个使用计数器（page->_count）设置为 1。

对于页面释放，我在 中插入了几行`free_pcppages_bulk()`，当 per-cpu 页面帧缓存想要将一些空闲页面刷新回 Buddy 系统时调用：

```
static void free_pcppages_bulk(struct zone *zone, int count, 
    struct per_cpu_pages *pcp)
{
int migratetype = 0;
int batch_free = 0;
int to_free = count;

spin_lock(&zone->lock);
zone_clear_flag(zone, ZONE_ALL_UNRECLAIMABLE);
zone->pages_scanned = 0;

while (to_free) {
    struct page *page;
    struct list_head *list;

    /*
     * Remove pages from lists in a round-robin fashion. A
     * batch_free count is maintained that is incremented when an
     * empty list is encountered.  This is so more pages are freed
     * off fuller lists instead of spinning excessively around empty
     * lists
     */
    do {
        batch_free++;
        if (++migratetype == MIGRATE_PCPTYPES)
            migratetype = 0;
        list = &pcp->lists[migratetype];
    } while (list_empty(list));

    do {
        page = list_entry(list->prev, struct page, lru);
        /* must delete as __free_one_page list manipulates */
        list_del(&page->lru);
        /* MIGRATE_MOVABLE list may include MIGRATE_RESERVEs */

        /* --ADDED BY ME-- */
        if(colored_free != NULL) { /* if my memory pool is created */
            if(!colored_free(page, zone)) { /* if it fails, free page to Buddy system */
                __free_one_page(page, zone, 0, page_private(page));
            }
        }
        else {
            __free_one_page(page, zone, 0, page_private(page));
        }

        trace_mm_page_pcpu_drain(page, 0, page_private(page));
    } while (--to_free && --batch_free && !list_empty(list));
}
__mod_zone_page_state(zone, NR_FREE_PAGES, count);
spin_unlock(&zone->lock);
} 
```

在`colored_free()`中，我只是将页面描述符插入到页面空闲列表中。由于页面使用计数器在将被释放给 Buddy 系统时设置为 0，因此我将其重置为 1 以在创建内存池时恢复初始页面状态。

对此有何建议？或者有没有更好的方法将页框释放到我的内存池而不是好友系统？

# cocoa - Webview 对象导致可可崩溃

> ID：15229394
> 
> 赞同：1
> 
> 时间：2013-03-05T16:43:19.053
> 
> 标签：cocoa, webview, crash

我正在研究“Cocoa 编程：开发人员快速入门指南”。`WebView`其中一个示例是通过将对象插入窗口来创建基本浏览器。每当我这样做时，它都会导致程序崩溃（尽管可以编译）并显示以下消息：

> 话题一：SIGABRT

标记到该行：

```
return NSApplicationMain(argc, (const char **)argv); 
```

我知道它是`WebView`对象，因为当我删除它时，问题就消失了。我在这里看到了一个类似的问题，建议在预处理器中添加以下几行：

```
#import <webKit/webview.h>
#import <webKit/webkit.h> 
```

但结果是一样的。我没有编写任何实际代码，只`MainMenu.xib`在 Interface Builder GUI 中操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T02:02:47.720

WebKit.framework 需要包含在构建中。

转到 MacHD>System>Library>Frameworks 并将 WebKit.framework 文件夹拖到 XCode 中的项目图标中。将弹出一个窗口，询问您是否要将文件添加到项目中。单击完成，它将起作用。

通过输入应该包含的库文件来不包含库文件感觉很奇怪。

# ruby-on-rails - 如何为 saas 客户提供服务器快照以解决业务连续性问题

> ID：15229396
> 
> 赞同：0
> 
> 时间：2013-03-05T16:43:26.420
> 
> 标签：ruby-on-rails, amazon-web-services, saas

我正在向潜在客户提出 SaaS 解决方案，以避免本地安装和升级的需要。客户根据需要上传他们的输入数据并下载输出，因此数据备份和维护不是问题，但在线软件服务的连续性是他们关心的问题。

代码托管在这里似乎有点矫枉过正，而且可能没有什么价值。我想知道是否有一个选项可以提供云服务器的快照图像，其中包括应用程序的工作版本，并且在客户无法再访问该软件的紧急情况下使用它.

这需要尽可能接近点击式解决方案 - 比如说一个单页文档，其中包含一些非网络知识 IT 人员可以遵循的步骤 - 用于启动备份服务器映像并能够使用该应用程序。如果我要创建一个包含应用程序工作版本的私有 AWS EBS 快照/AMI，并且他们为自己创建了一个 AWS 账户，他们是否能够轻松启动它？

更新：该应用程序目前在 heroku 上，所以希望让它在亚马逊 EC2 中运行非常简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:54:59.703

在任何主要的 PAAS 提供商处托管他们的应用程序，例如 EngineYard 或 Heroku。将他们的代码签入一个私有的 Github 存储库，您可以将他们分配为所有者。这样他们就可以访问源代码，并且可以使用存储库作为源快速创建一个新实例。

我认为不需要为 Rails 应用程序创建完整的服务镜像，除非有特定的配置需求无法包含在项目中或无法通过 capistrano 处理。

# javascript - appendChild 在 IE 中追加到元素的右侧

> ID：15229397
> 
> 赞同：1
> 
> 时间：2013-03-05T16:43:32.393
> 
> 标签：javascript, css, internet-explorer, appendchild

我动态地将一个 div 附加到另一个动态创建的 div 中。在 IE 中，它显示在元素的右侧，但在所有其他浏览器中，它显示在元素的底部。我希望它显示在底部，就像它在 FF 和 Chrome 中一样。有什么建议么？

自动完成适用于：`[ "#Saab", "#Volvo", "#BMW", "#Mini", "#MiniMonster" ]`

IE![IE显示](../Images/f06f17838d39a30b08fb2af0379c07f4.png)

非 IE![非 IE 显示](../Images/257af54ce42383cf0fcc6cc69789e3f4.png)

已解决：我正在使用`divEl.setAttribute("style", "top:" + top + "px; left:" + left + "px; width:" + width + "px;");`

IE 有问题`setAttribute`。所以我切换到：

```
divEl.style.top = top + "px";
divEl.style.width = width + "px";
divEl.style.left = left + "px"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:59:06.837

在您的情况下，我会使用[相对](http://www.w3schools.com/cssref/playit.asp?filename=playcss_position&preval=relative)定位，因为绝对定位总是会受到窗口大小和其他因素的影响，即使从您的 jsFiddle 中也可以清楚地看出它出现在错误的位置（使用 Chrome）。因此，我将 CSS 更改为：

```
#matches_tooltip {
    position: relative;
    top: 0;
    left: 0;
    display: none;
    background-color: #FFFFFF;
    border-right-style: solid;
    border-bottom-style: solid;
    border-left-style: solid;
    border-color: #E0E0E0;
    border-width: 1px;
    cursor: pointer;
    text-align: left;
} 
```

[http://jsfiddle.net/ruslans/9Hg8a/2/](http://jsfiddle.net/ruslans/9Hg8a/2/)

我无法在 IE 中测试，但在所有浏览器中应该都可以。请注意，我已修改您的 javascript 以不设置位置属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T17:09:38.570

尝试这个

```
.options_text {
  position: relative;
  text-align: center;
} 
```

并将您的 javascript 渲染修改为：

```
element.style {
  bottom: -26px;
  display: inline;
  left: 12px;
  visibility: visible;
  width: 286px;
} 
```

# ajax - 迁移到 Google Pagespeed 服务器后 AJAX 中断

> ID：15229408
> 
> 赞同：1
> 
> 时间：2013-03-05T16:44:17.617
> 
> 标签：ajax

自从我搬到 Google Pagespeed 服务器后，我网站上的 AJAX 就坏了。页面尝试发布和刷新页面，而不是像 Good 'ol AJAX 那样做。它似乎甚至无法在我的脚本的 POST 部分调用该文件。我假设是因为我将 url 设置为类似

```
url: "examples/suggestsentence.php?", 
```

也许pagespeed服务器可以找到要缓存的文件？我不知道这里发生了什么，甚至不知道如何在不必离开他们的服务器的情况下修复它。

这是一个查看[http://www.freescrabbledictionary.com/sentence-examples/auto-azal/autocoid/的网址](http://www.freescrabbledictionary.com/sentence-examples/auto-azal/autocoid/)

底部的textarea是一个ajax cal

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T06:52:26.893

问题在于，当 pagespeed 服务发生时，会向每个请求添加信息。为避免这些，您应该在 Web 服务 url 中添加标头指令

在 PHP 中，你会是这样的：

```
header("X-Requested-With: XMLHttpRequest")); 
```

# c - 使用 atoi() 对整数进行输入验证

> ID：15229411
> 
> 赞同：1
> 
> 时间：2013-03-05T16:44:27.653
> 
> 标签：c, validation, input, numbers, integer

```
#include "stdafx.h"
#include <stdlib.h>

void main()
{
    char buffer[20];
    int num;

    printf("Please enter a number\n");
    fgets(buffer, 20, stdin);
    num = atoi(buffer);

    if(num == '\0')
    {
        printf("Error Message!");
    }

    else
    {
        printf("\n\nThe number entered is %d", num);
    }

    getchar();
} 
```

上面的代码接受一个字符串形式的数字，并使用 atoi 将其转换为整数。如果用户输入十进制数，则只接受小数点前的位。此外，如果用户输入一个字母，则返回 0。

现在，我有两个查询：

i) 我希望程序检测用户是否输入了带小数点的数字并输出错误消息。我不希望它占据小数点之前的部分。我希望它识别输入无效。

ii) 如果 atoi 在有字母的情况下返回 0，我如何验证它，因为用户也可以输入数字 0？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T16:46:03.393

`atoi`不适合错误检查。使用`strtol`或`strtoul`代替。

```
#include <errno.h>
#include <limits.h>
#include <stdlib.h>
#include <string.h>

long int result;
char *pend;

errno = 0;
result = strtol (buffer, &pend, 10);

if (result == LONG_MIN && errno != 0) 
{
  /* Underflow. */
}

if (result == LONG_MAX && errno != 0) 
{
  /* Overflow. */
}

if (*pend != '\0') 
{
    /* Integer followed by some stuff (floating-point number for instance). */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-11T06:57:54.590

有一个`isdigit`功能可以帮助您检查每个字符：

```
#include <ctype.h>

/* ... */

for (i=0; buffer[i]; i++) {
        if (!isdigit(buffer[i])) {
            printf("Bad\n");
            break;
        }
} 
```

# mongodb - 无法创建/打开锁定文件：/data/mongod.lock errno:13 Permission denied

> ID：15229412
> 
> 赞同：192
> 
> 时间：2013-03-05T16:44:38.480
> 
> 标签：mongodb

如何让 mongo 在 ec2 上使用已安装的驱动器？我真的不明白。我在 ec2 上附加了一个卷，将驱动器格式化为 root 并以 root 身份启动，但作为 root 我无法访问？我在 ubuntu 12.04 上运行。没有其他 mongo 正在运行

我看到 mongo 在 /data 即 /data/db 中创建了一个“db”目录

```
cd /
ls -al
drwxr-xr-x  4 root root  4096 Mar  5 16:28 data

cd /data
ls -al
total 28
drwxr-xr-x  4 root root  4096 Mar  5 16:28 .
drwxr-xr-x 24 root root  4096 Mar  5 16:28 ..
drwxr-xr-x  2 root root  4096 Mar  5 16:28 db
drwx------  2 root root 16384 Mar  5 16:20 lost+found

sudo mkfs.ext3 /dev/xvdh
sudo mkdir /data
sudo su - -c 'echo "/dev/xvdh %s auto noatime 0 0" | sudo tee -a /etc/fstab'
sudo mount /data

sudo service mongodb start
mongodb start/running, process 17169

sudo ps -ef | grep mongod
ubuntu   15763 15634  0 16:32 pts/2    00:00:00 tail -f mongodb.log
ubuntu   18049 15766  0 16:43 pts/3    00:00:00 grep --color=auto mongod

Tue Mar  5 16:33:15 [initandlisten] MongoDB starting : pid=15890 port=27017 dbpath=/data 64-bit host=aws-mongo-server-east-staging-20130305161917
Tue Mar  5 16:33:15 [initandlisten] db version v2.2.3, pdfile version 4.5
Tue Mar  5 16:33:15 [initandlisten] git version: f570771a5d8a3846eb7586eaffcf4c2f4a96bf08
Tue Mar  5 16:33:15 [initandlisten] build info: Linux ip-10-2-29-40 2.6.21.7-2.ec2.v1.2.fc8xen #1 SMP Fri Nov 20 17:48:28 EST 2009 x86_64 BOOST_LIB_VERSION=1_49
Tue Mar  5 16:33:15 [initandlisten] options: { bind_ip: "10.157.60.27", config: "/etc/mongodb.conf", dbpath: "/data", logappend: "true", logpath: "/var/log/mongodb/mongodb.log", replSet: "heythat" }
Tue Mar  5 16:33:15 [initandlisten] exception in initAndListen: 10309 Unable to create/open lock file: /data/mongod.lock errno:13 Permission denied Is a mongod instance already running?, terminating
Tue Mar  5 16:33:15 dbexit: 
Tue Mar  5 16:33:15 [initandlisten] shutdown: going to close listening sockets...
Tue Mar  5 16:33:15 [initandlisten] shutdown: going to flush diaglog...
Tue Mar  5 16:33:15 [initandlisten] shutdown: going to close sockets...
Tue Mar  5 16:33:15 [initandlisten] shutdown: waiting for fs preallocator...
Tue Mar  5 16:33:15 [initandlisten] shutdown: lock for final commit...
Tue Mar  5 16:33:15 [initandlisten] shutdown: final commit...
Tue Mar  5 16:33:15 [initandlisten] shutdown: closing all files...
Tue Mar  5 16:33:15 [initandlisten] closeAllFiles() finished
Tue Mar  5 16:33:15 [initandlisten] shutdown: removing fs lock...
Tue Mar  5 16:33:15 [initandlisten] couldn't remove fs lock errno:9 Bad file descriptor
Tue Mar  5 16:33:15 dbexit: really exiting now 
```

下面是如果我在删除锁定文件时重新启动....

```
Tue Mar  5 16:59:15 [initandlisten] MongoDB starting : pid=21091 port=27017 dbpath=/data 64-bit host=aws-mongo-server-east-staging-20130305161917
Tue Mar  5 16:59:15 [initandlisten] db version v2.2.3, pdfile version 4.5
Tue Mar  5 16:59:15 [initandlisten] git version: f570771a5d8a3846eb7586eaffcf4c2f4a96bf08
Tue Mar  5 16:59:15 [initandlisten] build info: Linux ip-10-2-29-40 2.6.21.7-2.ec2.v1.2.fc8xen #1 SMP Fri Nov 20 17:48:28 EST 2009 x86_64 BOOST_LIB_VERSION=1_49
Tue Mar  5 16:59:15 [initandlisten] options: { bind_ip: "10.157.60.27", config: "/etc/mongodb.conf", dbpath: "/data", logappend: "true", logpath: "/var/log/mongodb/mongodb.log", replSet: "heythat" }
Tue Mar  5 16:59:15 [initandlisten] exception in initAndListen: 10309 Unable to create/open lock file: /data/mongod.lock errno:13 Permission denied Is a mongod instance already running?, terminating
Tue Mar  5 16:59:15 dbexit: 
Tue Mar  5 16:59:15 [initandlisten] shutdown: going to close listening sockets...
Tue Mar  5 16:59:15 [initandlisten] shutdown: going to flush diaglog...
Tue Mar  5 16:59:15 [initandlisten] shutdown: going to close sockets...
Tue Mar  5 16:59:15 [initandlisten] shutdown: waiting for fs preallocator...
Tue Mar  5 16:59:15 [initandlisten] shutdown: lock for final commit...
Tue Mar  5 16:59:15 [initandlisten] shutdown: final commit...
Tue Mar  5 16:59:15 [initandlisten] shutdown: closing all files...
Tue Mar  5 16:59:15 [initandlisten] closeAllFiles() finished
Tue Mar  5 16:59:15 [initandlisten] shutdown: removing fs lock...
Tue Mar  5 16:59:15 [initandlisten] couldn't remove fs lock errno:9 Bad file descriptor
Tue Mar  5 16:59:15 dbexit: really exiting now 
```

* * *

## 回答 #1

> 赞同：484
> 
> 时间：2014-03-25T00:59:30.063

我使用这种方法来解决问题：

```
sudo chown -R mongodb:mongodb /data/db 
```

* * *

## 回答 #2

> 赞同：122
> 
> 时间：2013-04-12T22:43:31.057

我在 Ubuntu ec2 实例上遇到了同样的问题。我在第 7 页关注这篇亚马逊文章：

[http://d36cz9buwru1tt.cloudfront.net/AWS_NoSQL_MongoDB.pdf](http://d36cz9buwru1tt.cloudfront.net/AWS_NoSQL_MongoDB.pdf)

Mongodb 路径`/etc/mongodb.conf`设置为`/var/lib/mongodb`（主要安装位置和工作）。当我更改为`/data/db`（EBS 卷）时，我收到“errno:13 Permission denied”。

1.  首先我跑了`sudo service mongodb stop`。
2.  然后我曾经`ls -la`查看分配给`/var/lib/mongodb`（现有路径）的组和所有者 mongodb 并更改了`/data/db`（新路径）并与之`chown`匹配`chgrp`。（例如`sudo chown -R mongodb:mongodb /data/db`：）
3.  然后我更新了路径`etc/mongodb.conf`并`/data/db`删除了目录中的旧 mongo 文件`/var/lib/mongodb`。
4.  然后我跑过去`sudo service mongodb start`等了大约一分钟。如果您尝试立即连接到 27017，您将无法连接。
5.  经过一分钟检查`/data/db`（EBS 卷），mongo 应该已经放置了一个日志、mongod.lock、local.ns、local.0 等。如果没有，请稍后`sudo service mongodb restart`再检查。

我刚刚花了一个多小时。更改组和删除旧文件可能不是必需的，但这对我有用。

这是一个关于将 ebs 卷安装到 ec2 实例的精彩视频：

[http://www.youtube.com/watch?v=gBII3o3BofU](http://www.youtube.com/watch?v=gBII3o3BofU)

* * *

## 回答 #3

> 赞同：84
> 
> 时间：2013-06-28T14:42:04.990

在我的情况下（AWS EC2 实例，Ubuntu）帮助：

```
$ sudo mkdir -p /data/db/
$ sudo chown `USERNAME` /data/db 
```

之后一切正常。

* * *

## 回答 #4

> 赞同：54
> 
> 时间：2015-09-17T12:59:23.733

您只需要授予对您`/data/db`文件夹的访问权限。

键入`sudo chown -R <USERNAME> /data/db`，替换`<USERNAME>`为您的用户名。

您可以通过键入 找到您的用户名`whoami`。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2014-11-28T12:03:27.267

我按照本教程在带有 Ubuntu 14.04 的 EC2 上安装了带有 EBS 的 mongodb：

[http://docs.mongodb.org/ecosystem/platforms/amazon-ec2/](http://docs.mongodb.org/ecosystem/platforms/amazon-ec2/)

但我没有建议 chown ：

```
sudo chown -R mongodb:mongodb /data /log /journal 
```

解决问题

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2017-06-21T03:19:01.343

我有类似的问题，实际原因是我之前的尝试已经运行了 mongod 会话。

我跑了

```
killall mongod 
```

其他一切都按预期运行。

`killall`命令将向具有真实 UID 的所有进程发送一个 TERM 信号。所以这会杀死所有正在运行的 mongod 实例，以便您可以启动自己的实例。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2016-07-20T20:07:15.297

*对于 mac 用户：*
运行**ls -ld /data/db/**
输出应该类似于**drwrx-xr-x 20 singh wheel 680 21 Jul 05:49 /data/db/**
其中**singh**是所有者，而**wheel**是它所属的组.
运行**sudo chown -R singh:wheel /data/db**
运行**mongod**

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2017-02-13T02:06:48.510

截至今天，我试图通过***创建/打开锁定文件：/data/db/mongod.lock errno:13 Permission denied Is a mongod instance already running?, terminating***并尝试了上面发布的所有答案解决了这个问题，因此没有通过添加

> sudo chown -R mongodb:mongodb /data/db

除非我将当前用户权限添加到位置路径

> sudo chown $USER /data/db

希望这可以帮助某人。另外我刚刚在我的 pi 上安装了 Mongo DB。干杯!

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2015-07-08T03:03:19.287

我遇到了类似的问题，并按照上面有关使用 sudo chown 等更改所有者的所有说明进行操作。更改后，我仍然有一个 mongodb 实例在后台运行。跑步

```
ps auxw | grep mongo 
```

向我展示了其他使用 mongo 在后台运行但未正确关闭的任务。然后我在所有正在运行的服务器上运行 kill 然后可以启动我的服务器。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2014-09-04T13:45:14.637

在我的情况下，删除 mongodb.lock 文件不是问题。我这样做了，得到一个关于正在使用的端口的错误：[initandlisten]listen():bind() failed errno:98 Address already in use for socket:0.0.0.0:27017。我在这里找到了另一个解决方案：[无法使用终止](https://stackoverflow.com/questions/6478113/unable-to-start-mongodb-local-server)进程的指令启动 mongodb 本地服务器：

1.  从 netstat 中找出哪个进程正在运行 mongodb 端口（27017）

    `sudo netstat -tulpn | grep :27017`

    输出将是：tcp 0 0 0.0.0.0:27017 0.0.0.0:* LISTEN 1412/mongod

2.  杀死相应的进程。

    `sudo kill 1412`（将 1412 替换为您在步骤 1 中找到的进程 ID）

我能够再次成功启动 mongodb。我相信我的仍然因不当关闭而运行。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2015-08-13T12:18:45.650

对于那些使用任务管理器在 Windows 上遇到此错误的人，请结束正在运行的“mongod.exe”实例。完成后永久删除 mongo.lock 文件并运行 mongod.exe。之后它应该可以完美运行。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2016-09-28T10:46:51.047

我的 mongo (3.2.9) 安装在 Ubuntu 上，我的日志文件有以下几行：

```
2016-09-28T11:32:07.821+0100 E STORAGE  [initandlisten] WiredTiger (13) [1475058727:821829][6785:0x7fa9684ecc80], file:WiredTiger.wt, connection: /var/lib/mongodb/WiredTiger.turtle: handle-open: open: Permission denied 
2016-09-28T11:32:07.822+0100 I -        [initandlisten] Assertion: 28595:13: Permission denied 
2016-09-28T11:32:07.822+0100 I STORAGE  [initandlisten] exception in initAndListen: 28595 13: Permission denied, terminating 
```

2016-09-28T11:32:07.822+0100 我控制 [initandlisten] dbexit: rc: 100

所以问题出在 /var/lib/mongodb 文件夹的权限上。

```
sudo chown -R mongodb:mongodb /var/lib/mongodb/
sudo chmod -R 755 /var/lib/mongodb 
```

*   重启服务器

修复了它，尽管我确实意识到这可能不太安全（在我的情况下，这是我自己的开发盒），在更改数据库和身份验证之后有点工作。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2016-01-07T19:23:05.130

在 Mycase 中
，在 mongodb 版本 2.6.11 默认数据库目录是`/var/lib/mongodb/`

1.  $ sudo chown -R `id -u`/var/lib/mongodb/

2.  $ sudo chown -R `id -u`/var/lib/mongodb/mongod.lock

3.  `$ sudo /etc/init.d/mongod stop`

4.  `$ sudo /etc/init.d/mongod start`

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2019-08-10T11:23:03.870

在 Windows10 上安装 mongod 命令后，我遇到了同样的问题。我停止了 mongodb 服务并再次启动它。像魅力一样工作

停止 mongodb 服务的命令（在 windows 中）：`net stop mongodb`

启动 mongodb 服务器的命令：`mongod --dbpath PATH_TO_DATA_FOLDER`

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2013-07-19T13:08:51.387

在带有 Mongo 2.2.4 实例的 Fedora 18 上，我可以通过`setenforce 0`以 root 身份调用禁用 SELinux 来解决类似的错误。

顺便说一句，这是一个企业环境，不是 Amazon EC2 实例，但症状相似。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2014-09-29T20:05:30.983

在我的情况下，通过删除***日志***文件解决了这个问题。

```
sudo rm /log/mongod.log 
```

尽管错误消息专门针对***锁定***文件：

```
exception in initAndListen: 10309 Unable to create/open lock file: 
/data/mongod.lock errno:13 Permission denied 
Is a mongod instance already running?, terminating 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2015-08-03T06:08:52.407

在我杀死 mongod 之后，我遇到了同样的问题：无法启动 mongod。

```
$> sudo kill `pidof mongod` 
```

`2015-08-03T05:58:41.339+0000 [initandlisten] exception in initAndListen: 10309 Unable to create/open lock file: /data/mongodbtest/replset/data/mongod.lock errno:13 Permission denied Is a mongod instance already running?, terminating`

我直接删除锁后，就可以重启mongod进程了。

```
$>  rm -rf /data/mongodbtest/replset/data/mongod.lock 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2015-11-20T02:11:30.853

这是我为解决问题所做的：

$sudo mkdir -p /data/db

$export PATH=/usr/local/Cellar/mongodb/3.0.7/bin:$PATH

$sudo chown -R `id -u`/data/db

然后开始mongo ...

$mongod

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2017-08-20T07:25:07.360

我有同样的问题。

我通过使用以下命令将 selinux 状态更改为允许来解决它：

```
setenforce 0 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-08-01T17:58:32.123

要`ls -la`知道 /var/log/mongodb 的用户和组。然后执行`sudo chown -R user:group /data/db` 现在运行`sudo service mongodb start`。检查状态`sudo service mongodb status`

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2016-08-29T08:49:27.033

在 Windows 上，确保控制台以管理员身份启动

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2017-12-27T04:00:20.483

你可以试试这些方法。第一个。

> sudo chown -R mongod:mongod /data/db

但有时，这没有用。第二。如果上述方法没有用，您可以尝试这样做：

> mkdir /data/db #作为数据库存储路径
> 
> nohup mongod --dbpath /data/db &

或输入：

> mongod --dbpath /data/db

获取输出流

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2018-09-05T15:56:08.900

在 CentOS 6.x 上对我来说：

`sudo chown -R mongodb:mongodb <db-path> sudo service mongod restart`

我已经`db-path`在`/etc/mongod.conf`.

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2019-03-27T07:22:31.933

如果您确实想要与原始问题中的命令等效的一行，则可以使用别名：

```
mongo --eval "db.getSiblingDB('admin').shutdownServer()" 
```

[https://stackoverflow.com/a/11777141/7160782](https://stackoverflow.com/a/11777141/7160782)

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2019-07-30T05:24:25.857

在 Centos 服务器中

这对我有用

```
chown -R mongod:mongod /var/lib/mongo 
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2019-11-29T09:09:52.033

得到一个类似的错误，通过删除所有记录（在我的情况下是目录`journals`和文件`mongo.lock...`），然后检查端口`sudo lsof -i:27017`，如果 smth 在其上运行`kill <PID of the process>`，然后尝试`./mongod`再次运行

* * *

## 回答 #27

> 赞同：-2
> 
> 时间：2018-05-30T10:07:40.213

使固定：**`sudo mongod`**

我遇到了同样的问题，使用 sudo 权限运行**mongod**修复了它。来自windows环境，我以前只是`mongod`启动守护进程，看起来我们需要超级用户权限才能访问/data/db。

您还可以授予非 root 用户对该路径的读取和写入权限。检查上面的答案以获得指南！

* * *

## 回答 #28

> 赞同：-2
> 
> 时间：2018-05-31T06:46:03.993

每次尝试启动 mongod 时，只需键入

```
sudo mongod 
```

或者如果要永久解决此问题，请尝试将 rwx 权限授予 /data/db 文件夹

```
 chmod +rwx data/ 
```

# vba - 无法捕获 2501 错误

> ID：15229414
> 
> 赞同：1
> 
> 时间：2013-03-05T16:44:41.257
> 
> 标签：vba, ms-access

我将数据从 frmSearchEmployeeWorksheets 发送到运行查询 (qryStatsCorr) 的 frmStatsCorr。在 frmStatsCorr 我正在检查以确保查询返回记录，否则我将向用户发送消息并返回到搜索表单。我的问题是我在“忽略”由我在 Stackoverflow 上学到的**DoCmd.OpenForm ("frmStatsCorr")**引起的 2501 时遇到问题...

我做错了什么导致我对 Access VBA 感到沮丧？

这是搜索表单 (frmSearchEmployeeWorksheets) 上的子项：

```
Private Sub btnSearch_Click()
    ' I only change focus to force the updated data to submit to query
    Me.[txtEmployee].SetFocus
    Me.txtShift.SetFocus

If txtUnit = "7" Then
    'First close the form in order to update
    DoCmd.Close acForm, "frmStatsCorr"
    ' Open Stats form
    On Error GoTo myErr
    **DoCmd.OpenForm ("frmStatsCorr") 'causes error** 
End If

myExit:
    Exit Sub

myErr:
    Echo True
    If Err.Number = 2501 Then GoTo myExit
        MsgBox Err.Description
    GoTo myExit

End Sub 
```

在 frmStatsCorr 我只是检查以确保查询返回记录，如果不是我通知用户，关闭表单，然后返回到 frmSearchEmployeeWorksheets

```
Private Sub Form_Load()
    If strFormStatus = "view" Then

    If DCount("*", "qryStatsCorr") = 0 Then
        MsgBox "Your search does not produce any results. Try a different search.", vbOKOnly
        DoCmd.Close
        DoCmd.OpenForm ("frmSearchEmployeeWorksheets")
        Exit Sub
    End If
    txtDay = WeekdayName(Weekday(Me.WorkDate)) 'This line returns an error so I check for an empty query and return to the search form.
    Me.[WorkDate].SetFocus
    Me.txtUnit.Enabled = False... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T21:43:58.303

我不确定我对您的代码或其背后的逻辑的理解程度。我的预感是你应该检查`DCount`结果`btnSearch_Click`，而不是关闭然后重新打开`frmStatsCorr`，并且`frmStatsCorr`在它不包含数据时关闭它本身。`frmStatsCorr`当它不包含数据时不要打开。

如果保存您的过程的当前表单 ( `frmSearchEmployeeWorksheets`)`btnSearch_Click`包含未保存的数据更改，您可以使用`Me.Dirty = False`

```
Private Sub btnSearch_Click()
    Dim strPrompt As String

    If Me.Dirty Then ' unsaved data changes
        Me.Dirty = False ' save them
    End If

    If Me.txtUnit = "7" Then
        If DCount("*", "qryStatsCorr") = 0 Then
            strPrompt = "Your search does not produce any results. " & _
                "Try a different search."
            MsgBox strPrompt, vbOKOnly
        Else
            ' if frmStatsCorr is open, just Requery
            ' else open frmStatsCorr
            If CurrentProject.AllForms("frmStatsCorr").IsLoaded Then
                Forms("frmStatsCorr").Requery
            Else
                DoCmd.OpenForm "frmStatsCorr"
            End If
            ' uncomment next line to close current form
            'DoCmd.Close acForm, Me.Name
        End If
    End If
End Sub 
```

如果`frmStatsCorr`是打开的，你需要检查它是否在设计视图中，检查它的`CurrentView`属性。

```
Forms("frmStatsCorr").CurrentView ' Design View = 0 
```

我建议采用这种方法，因为我怀疑`frmStatsCorr`'s`Form_Load`可能会在它自行关闭时触发 2501 错误。但我不确定这是错误的原因，而且我没有足够的动力来设置测试。

如果我建议的方法仍然出现 2501 错误，那么我遇到了另外两个可能的原因：

1.  腐败
2.  损坏的引用

# ios - 处理 UIButtons iOS

> ID：15229416
> 
> 赞同：0
> 
> 时间：2013-03-05T16:44:50.003
> 
> 标签：ios, objective-c, xcode

从 2013 年冬季开始，我一直在观看 iOS 讲座（由 Paul Hegerty 撰写），我似乎无法理解为什么在 Matchisimo 程序中需要第二行代码。如果我把它注释掉，程序就会崩溃，但如果我把它留在里面，它就可以正常工作。

```
[cardButton setTitle:card.contents forState:UIControlStateSelected];

[cardButton setTitle:card.contents forState:UIControlStateSelected|UIControlStateDisabled]; 
```

在这一行失败：

```
@autoreleasepool {
    return UIApplicationMain(argc, argv, nil, NSStringFromClass([CardGameAppDelegate class]));
} 
```

如果第二行被注释掉，则会出现错误：

```
'NSRangeException', reason: '*** -[__NSArrayM objectAtIndex:]: index 47 beyond bounds [0 .. 46]' 
```

卡片内容：

```
@property (strong, nonatomic) NSString *contents; 
```

更新用户界面：

```
- (void)updateUI
{
    for (UIButton *cardButton in self.cardButtons) {
        Card *card = [self.game cardAtIndex:[self.cardButtons indexOfObject:cardButton]];

        [cardButton setTitle:card.contents forState:UIControlStateSelected];

        [cardButton setTitle:card.contents forState:UIControlStateSelected|UIControlStateDisabled];

        cardButton.selected = card.isFaceUp;
        cardButton.enabled = !card.isUnPlayable;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T16:58:21.040

评论此行`[cardButton setTitle:card.contents forState:UIControlStateSelected|UIControlStateDisabled];`不会因任何原因导致崩溃。

这是`[self.game cardAtIndex:[self.cardButtons indexOfObject:cardButton]];`导致与索引越界相关的崩溃的行。基本上，您拥有的 cardButtons 比`self.game`拥有的卡片多。

您可以用它包装它以防止崩溃，但应该寻找更深层次的潜在问题，以了解为什么要创建额外的按钮。

```
int buttonIndex = [self.cardButtons indexOfObject:cardButton];
if (self.game.count > buttonIndex) {
    Card *card = [self.game cardAtIndex:buttonIndex];

    [cardButton setTitle:card.contents forState:UIControlStateSelected];

    [cardButton setTitle:card.contents forState:UIControlStateSelected|UIControlStateDisabled];

    cardButton.selected = card.isFaceUp;
    cardButton.enabled = !card.isUnPlayable;
} 
```

# java - 使用 Java 将图像动态添加到 GIF

> ID：15229422
> 
> 赞同：0
> 
> 时间：2013-03-05T16:45:04.437
> 
> 标签：java, animation, dynamic, gif

我想创建一个动态 GIF，我可以通过浏览器打开它，同时通过以编程方式向其添加更多帧进行更改，并且该帧立即反映在浏览器上。

从技术上讲，这意味着不关闭 GIF 图像文件并添加更多帧，并且浏览器会继续获取新帧并显示它。

但我观察到的是，当我添加帧时，磁盘上的 GIF 大小没有改变，并且在文件句柄关闭之前保持 0 字节。

是不是我必须不断刷新 GIF 文件，以便在关闭文件句柄之前字节值增加？

# mule - 在 Mule 3.3.0 中看到 ConcurrentModificationException

> ID：15229424
> 
> 赞同：1
> 
> 时间：2013-03-05T16:45:15.810
> 
> 标签：mule

我对 Mule 相当陌生，使用 3.3.0，但我正在尝试我认为应该是一个相当普通的示例。我有一个 mule 配置，它将读取一个 csv 文件并尝试异步处理不同流中的行和列。但是，当消息被“移交”到其中一个异步流时，我们会看到 ConcurrentModificationException。我想知道是否有其他人看到过这个问题，以及他们可能采取了哪些措施来解决这个问题。

> java.util.ConcurrentModificationException at org.apache.commons.collections.map.AbstractHashedMap$HashIterator.nextEntry(AbstractHashedMap.java:1113) at org.apache.commons.collections.map.AbstractHashedMap$KeySetIterator.next(AbstractHashedMap.java:938) ) 在 org.mule.DefaultMuleEvent.setMessage(DefaultMuleEvent.java:933) 在 org.mule.DefaultMuleEvent.(DefaultMuleEvent.java:318) 在 org.mule.DefaultMuleEvent.(DefaultMuleEvent.java:290) 在 org.mule.DefaultMuleEvent .copy(DefaultMuleEvent.java:948)

```
 <queued-asynchronous-processing-strategy poolExhaustedAction="RUN" name="commonProcessingStrategy" maxQueueSize="1000" doc:name="Queued Asynchronous Processing Strategy"/>

<file:connector name="inboundFileConnector" fileAge="1000" autoDelete="true" pollingFrequency="1000" workDirectory="C:/mule/orca/dataprovider/work"/>

<file:endpoint name="dataProviderInbound" path="C:\mule\orca\dataprovider\inbound" moveToPattern="#[function:datestamp]-#[header:originalFilename]" moveToDirectory="C:\mule\orca\dataprovider\history" connector-ref="inboundFileConnector" doc:name="Data Feed File" doc:description="new files are processed in 'work' folder, then moved to 'archive' folder"/>

<flow name="dataProviderFeedFlow">
    <inbound-endpoint ref="dataProviderInbound"/>
    <file:file-to-string-transformer />
    <flow-ref name="dataSub"/>
</flow>

<sub-flow name="dataSub" >

    <splitter expression="#[rows=org.mule.util.StringUtils.split(message.payload, '\n\r')]" />
    <expression-transformer expression="#[org.mule.util.StringUtils.split(message.payload, ',')]" />
    <foreach>

        <flow-ref name="storageFlow" />
        <flow-ref name="id" />            

     </foreach>

</sub-flow>

<flow name="storageFlow" processingStrategy="commonProcessingStrategy">
    <logger level="INFO" message="calling the 'storageFlow' sub flow."/>
</flow>

<flow name="id" processingStrategy="commonProcessingStrategy">
    <logger level="INFO" message="calling the 'id' sub flow."/>
</flow> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T19:44:49.897

`dataSub`这是工作正常的子流程的固定版本：

```
<sub-flow name="dataSub">
    <splitter expression="#[org.mule.util.StringUtils.split(message.payload, '\n\r')]" />
    <splitter expression="#[org.mule.util.StringUtils.split(message.payload, ',')]" />
    <flow-ref name="storageFlow" />
    <all>
        <async>
            <flow-ref name="storageFlow" />
        </async>
        <async>
            <flow-ref name="id" />
        </async>
    </all>
</sub-flow> 
```

请注意：

*   我使用两个拆分器表达式，
*   我使用`all`消息处理器来确保将相同的有效负载发送到两个私有流，
*   我必须用`async`消息处理器包装流引用，否则调用会失败，因为私有流是异步的但`all`强制同步。

# c++ - 类中的 typedef

> ID：15229428
> 
> 赞同：1
> 
> 时间：2013-03-05T16:45:27.917
> 
> 标签：c++, typedef

如何在函数中键入def？让我们考虑 B 类有一个 int x 数据成员。当我尝试编译以下内容时，我得到： '.' 之前的预期初始化程序 令牌

在这个例子中，一切都很简单，但是对于我的代码，我将执行类似 test.xyzf 的操作，所以我在对象中有多个对象，直到我得到我需要的数据成员，所以 typedef 会有所帮助。

```
class A
{
  B test;

  A(B test1)
  { 
    test = test1;
  }

  function f()
  {
    typedef test.x x; //how come this doesn't compile?

  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T16:49:16.123

`x`是*变量*而不是*类型*。在 C++11 中，您可以使用`decltype`来确定 的类型`x`：

```
void f()
{
    decltype(test.x) x;
} 
```

或者，您可以声明一个对您希望使用的成员的本地引用：

```
void f()
{
    auto& x_ref(test.x); // Or explictly state the type.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T16:51:32.320

如果要`typedef`使用变量进行模拟，请使用参考。`type_of_x& x = test.x;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T16:52:03.993

typedef 为*类型*引入了一个名称。
`test.x`是变量，不是类型。
它是*一个* `int`，但它不是类型`int`本身。

如果要为变量引入新名称，请使用*references*。

```
int& x = test.x;  // "x" is now a different name for test.x
int& y = test.x.y.z.f; // "y" is now a different name for test.x.y.z.f. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T16:55:22.463

我*认为*您所要求的是一种“速记”一长串名称内容的方法。我过去这样做的方式（在相关的情况下）是使用参考：

```
struct Blah
{
  int x, y, z;
};

class X
{
   Blah *arr[10];

   X()
   {
      for(int i = 0; i < 10; i++)
      {
         arr[i] = new Blah;
      }
   }
}

class Y
{
   X var;
};

Y y;

for(int i = 0; i < 10; i++)
{
     y.var.arr[i]->x *= 4; 
     y.var.arr[i]->y *= 3; 
     y.var.arr[i]->z *= 5; 
} 
```

可以写成：

```
for(int i = 0; i < 10; i++)
{
     Blah &b = y.var.arr[i];

     b.x *= 4; 
     b.y *= 3; 
     b.z *= 5; 
} 
```

现在，这更容易阅读，不是吗？

# json - 如何将瞻博网络配置转换为 json

> ID：15229429
> 
> 赞同：0
> 
> 时间：2013-03-05T16:45:28.473
> 
> 标签：json

我们需要将 Juniper 配置转换为 json 是否有任何 Juniper 命令用于此，或者我们应该如何编写一个小的 ruby​​ 代码来将默认的瞻博网络配置转换为 json。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-06T18:53:15.337

如果有人在看： [https ://beastiebytes.com/public_files/juniper_hash.rb](https://beastiebytes.com/public_files/juniper_hash.rb)

```
require 'json'
require 'juniper_hash'
JuniperHash.get_hash(File.open('juniper.conf').read).to_json 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-31T08:24:40.587

在 Junos 14.2 版之后，`show config | display json`命令可用。 [http://www.juniper.net/techpubs/en_US/junos14.2/topics/concept/junos-cli-pipe-filter-functions-overview.html](http://www.juniper.net/techpubs/en_US/junos14.2/topics/concept/junos-cli-pipe-filter-functions-overview.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T10:15:50.690

AFAIK 没有转换为 JSON 的命令，但也许您可以以 XML 格式读取它，然后使用 Ruby 将 XML 转换为 JSON？

JunOS

```
show configuration | display xml 
```

红宝石

```
Hash.from_xml('...').to_json 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-03T23:30:15.427

在配置模式下你可以这样做：show |display json

如果要将其存储在文件中，请显示 |显示 json |保存文件.cfg

# javafx-2 - TableView 滚动条大小

> ID：15229437
> 
> 赞同：2
> 
> 时间：2013-03-05T16:46:07.557
> 
> 标签：javafx-2

我正在使用 css 更改 TableView 控件的默认字体大小。我的问题是，当字体大小改变时，滚动条宽度也会改变（随着字体大小的减小，它看起来更薄）。

我想更改 TableView 的字体大小以保持默认滚动条宽度。

我的css文件：

```
.table-view {
    -fx-font-size: 10px;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T19:43:27.293

有一个问题[http://javafx-jira.kenai.com/browse/RT-20922](http://javafx-jira.kenai.com/browse/RT-20922)

您可以尝试直接在 css 中为滚动条指定 -fx-font-size，如下所示：

```
.table-view > .virtual-flow > .scroll-bar {
    -fx-font-size: 10pt;
} 
```

您还可以参考 jfxrt.jar 中的 caspian.css 以查看其他可能的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T12:21:12.160

我找到了一个仅对表格行进行样式设置的解决方案，而不是整个表格视图。

```
.table-row-cell {
    -fx-font-size: 10px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-15T15:20:36.683

```
.table-view .scroll-bar:vertical > .increment-button, 
.table-view .scroll-bar:vertical > .decrement-button {
    -fx-padding: 0.5em 0.5em  ;
} 
```

这可以帮助滚动条宽度，使其更宽。

# visual-studio-2010 - 在网格视图中选择项目

> ID：15229441
> 
> 赞同：0
> 
> 时间：2013-03-05T16:46:13.327
> 
> 标签：visual-studio-2010, gridview, sqldatasource

我正在尝试创建一个网页，用户可以在其中单击 gridview 内的项目并将该行数据显示在另一个页面中。我不知道如何设置它，所以只显示所选行的信息（我想我将使用表单视图在第二页上显示数据）第二页上的表单视图。有什么建议么？

谢谢！杰克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:33:26.243

> 如果您只有几列，我确实建议您使用`QueryString`在页面之间传递值。假设您要传递两个这样的值到另一个页面：

```
Response.Redirect("default2.aspx?firstvalue=" + yourfirstvalue + "&secondvalue=" + yoursecondvalue"); 
// this will set the values you want to pass on your gridview page

Request.QueryString("firstvalue") 
// this will retrieve the first value from URL from your second page 
```

> 如果您想要一个整洁的 URL，那么我建议您使用`Session`变量。

# c# - 使用 2 个表之间的可选/条件连接进行查询

> ID：15229443
> 
> 赞同：0
> 
> 时间：2013-03-05T16:46:19.333
> 
> 标签：c#, mysql, .net, linq, join

```
ResourceTranslation
--------------------------------------------
ID                          binary(16)      |
ShortStringResourceID       binary(16)      |
LocaleName                  varchar(50)     |
TranslatedText              text            |
--------------------------------------------

ShortStringresource
--------------------------------------------
ID                          binary(16)      |
PrimaryLocaleName           varchar(50)     |
ContentText                 varchar(255)    |
-------------------------------------------- 
```

我想在 LINQ to SQL 中实现以下 SQL 的等效项：

```
SELECT (CASE p.PrimaryLocaleName WHEN 'en-GB' THEN p.ContentText ELSE t.ContentText END)
FROM shortstringresource p 
     LEFT OUTER JOIN resourcetranslation t ON t.ShortStringResourceID = p.ID 
WHERE p.ContentText = "Question 1 English Text"
AND (p.PrimaryLocaleName = 'en-GB' OR t.LocaleName = 'en-GB')
LIMIT 1; 
```

或者将以下 2 个查询加入 1 个：

```
var qry1 = (from p in I18nObjects.ShortStringResources
            where (p.PrimaryLocaleName == "en-GB" && p.ContentText == "my text")
            select p.ContentText);

var qry2 = (from t in I18nObjects.ResourceTranslations
           where t.LocaleName == "en-GB" 
           join p in I18nObjects.ShortStringResources on t.ShortStringResourceID equals p.ID
           select t.TranslatedText); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:56:07.347

您可能需要在选择之前考虑订购。

```
var results = (from p in ShortStringResources 
   join t in ResourceTranslations on p.ID equals t.ShortStringResourceID into xy
   from x in xy.DefaultIfEmpty()
   where p.ContentText == "Question 1 English Text" &&
        (p.PrimaryLocaleName == "en-GB" || x.LocaleName == "en-GB")
   select new {
      newField = p.PrimaryLocaleName == "en-GB"? p.ContentText : x.ContentText
   }).ToList().Take(1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T17:14:19.247

据我了解您的问题，您想为特定文本选择翻译，如果该翻译不存在，您需要原始值。因此，左连接将是正确的方法。

我会这样做：

```
var result = ( from p in I18nObjects.ShortStringresource
               where p.PrimaryLocaleName == "en-GB"
               where p.ContentText == "my text"

               from t in I18nObjects.ResourceTranslations
                 on p.ID equals t.ShortStringResourceID
               into tJoinData
               from tJoinRecord in tJoinData.DefaultIfEmpty( )
               where tJoinRecord.LocaleName == "en-GB"

               select tJoinRecord.TranslatedText ?? p.ContentText ).First( ); 
```

（但也许我误解了你的问题）

# ios - Xcode 中的 Box2d - 使用未声明的标识符“toDestroy”

> ID：15229444
> 
> 赞同：0
> 
> 时间：2013-03-05T16:46:20.737
> 
> 标签：ios, xcode, cocos2d-iphone, box2d, box2d-iphone

我可以在 Box2d 上找到的每个教程都说这样做是为了遍历世界中的物体：

```
 std::set<b2Body*>toDestroy; //ERROR

    for(b2Body *b = world->GetBodyList(); b; b=b->GetNext()) {
        if (b->GetUserData() != NULL) {
            CCSprite *sprite = (__bridge CCSprite *)b->GetUserData();

            if (sprite.tag == kWhateverTag) {
                CCSprite *spriteData = (__bridge CCSprite *)b->GetUserData();
                spriteData.position = ccp(b->GetPosition().x * PTM_RATIO,
                                        b->GetPosition().y * PTM_RATIO);
                spriteData.rotation = -1 * CC_RADIANS_TO_DEGREES(b->GetAngle());

                if (self.shouldDestroy) {
                    toDestroy.insert(b); //ERROR
                }

            }

        }    

    } 
```

但是我得到了错误`"Use of undeclared identifier 'toDestroy'; did you mean 'tgaDestroy'?`

我需要做什么才能摆脱错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:47:36.997

This clears up the errors:

```
#import <vector>
#import <set>
#import <algorithm> 
```

# html - 使用 Watin 如何设置此元素的文本值？

> ID：15229445
> 
> 赞同：0
> 
> 时间：2013-03-05T16:46:22.623
> 
> 标签：html, watin

我的 HTML 页面中有一个不寻常的日历控件，我似乎无法为其设置日期值。HTML 是：

```
<div class="reqFormLabel" style="margin-bottom: -3px;">
    Text - First Night 
<span id="ctlAvailabilitySearch_valStartDate" style="color: red; visibility: hidden;" controltovalidate="ctlAvailabilitySearch_txtStartDate" errormessage="First Night is required." initialvalue="" isvalid="true">
    Text - *
Text - Empty Text Node
<input name="ctlAvailabilitySearch$txtStartDate" id="ctlAvailabilitySearch_txtStartDate" style="display: none;" value="03/05/2013"/>
Text - Empty Text Node
<dropdown tabIndex="0" class="dp" id="startDP" style="margin-right: 8px;" formElChildIndex="0"/> 
```

如果执行此代码：

```
var ieElement = ieFrame.Element(Find.ById("ctlAvailabilitySearch_txtStartDate"));
var value = ieElement.GetAttributeValue("value"); 
```

值等于“03/05/2013”​​的日期

但是如果我执行这个：

```
ieElement.SetAttributeValue("value", "03/09/2013"); 
```

什么都没发生。

我已经尝试访问我能想到的所有可能的元素组合来设置此日期，但没有任何效果。

有什么建议么？

# ruby - Ruby 中的字典对象

> ID：15229458
> 
> 赞同：0
> 
> 时间：2013-03-05T16:46:52.047
> 
> 标签：ruby, rspec

所以我试图在 Ruby 中创建一个字典对象，并让它作为项目的一部分通过一堆 RSPEC 测试。到目前为止一切都很好，但我被困在一项特定的测试中。这是该测试之前的 RSPEC：

```
require 'dictionary'

describe Dictionary do
  before do
    @d = Dictionary.new
  end

  it 'is empty when created' do
    @d.entries.should == {}
  end

  it 'can add whole entries with keyword and definition' do
    @d.add('fish' => 'aquatic animal')
    @d.entries.should == {'fish' => 'aquatic animal'}
    @d.keywords.should == ['fish']
  end

  it 'add keywords (without definition)' do
    @d.add('fish')
    @d.entries.should == {'fish' => nil}
    @d.keywords.should == ['fish']
  end

  it 'can check whether a given keyword exists' do
    @d.include?('fish').should be_false
  end

  it "doesn't cheat when checking whether a given keyword exists" do
    @d.include?('fish').should be_false # if the method is empty, this test passes with nil returned
    @d.add('fish')
    @d.include?('fish').should be_true # confirms that it actually checks
    @d.include?('bird').should be_false # confirms not always returning true after add
  end
end 
```

到目前为止，除了最后一个测试“在检查给定关键字是否存在时不作弊”之外，一切都通过了。我正在努力思考如何才能让它通过，但到目前为止还没有成功。任何帮助将不胜感激。这是我到目前为止所拥有的：

```
class Dictionary
  attr_accessor :keywords, :entries
  def initialize 
    @entries = {}
     end
 def add(defs)
    defs.each do |word, definition|
      @entries[word] = definition
    end
  end
  def keywords
    input = []
    @entries.each do |key, value|
    input << key
    end
    input.sort  
  end
  def  include?(key)
    self.keywords.include?(keywords.to_s) 
  end
end 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T17:02:51.327

有一个错误：

```
self.keywords.include?(keywords.to_s) 
```

`keywords`返回一个数组。您不能将`keywords.to_s`其用作参数`keywords.include?`并期望它找到匹配项：

```
irb(main):002:0> 关键字 = %w[abc]
=> [“a”，“b”，“c”]
irb(main):003:0>keywords.to_s
=> "[\"a\", \"b\", \"c\"]"
irb(main):004:0>keywords.include?(keywords.to_s)
=> 假的
irb(main):005:0>keywords.include?('a')
=> 真

```

`keywords`因为如果你想找到它，你需要使用数组中的单个元素。请注意，这`keywords.to_s`是数组的字符串化版本，也可以是：`'["a", "b", "c"]'`。希望这将帮助您在下次遇到问题时识别问题。

从[文档](http://www.ruby-doc.org/core-2.0/Array.html#method-i-include-3F)中`include?`：

```
  a = [“a”，“b”，“c”]
  a.include?("b") #=> true
  a.include?("z") #=> false

```

所以，改变：

```
  def 包括？（键）
    self.keywords.include?(keywords.to_s)
  结尾

```

到：

```
  def 包括？（键）
    self.keywords.include?(key)
  结尾

```

“不作弊”是什么意思？代码如何作弊？它只做你告诉它的事情。之前的所有测试看起来都排除了“不作弊”块中正在测试的条件，这使得：

```
@d.include?('bird').should be_false # confirms not always returning true after add 
```

值得包括在内。你可以使用：

```
@d.add('fish')
@d.include?('bird').should be_false # confirms not always returning true after add 
```

如果你真的不确定你的代码是如何工作的。

与其`keywords`使用数组进行构建，`@entries`列表越大越慢，并且每次调用它都会导致运行速度变慢，而是利用已经是哈希`include?`的事实并使用它的方法：`@entries`

```
def keywords
  @entries.keys.sort
end

def include?(key)
  !!@entries[key]
end 
```

或将此用于`include?`：

```
def 包括？（键）
  @entry.key?(key)
结尾

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T16:58:42.033

正如完全迈克在评论中提到的那样，您想要的大多数功能已经存在于`Hash`. 对于您想要的略有不同的接口，您应该继承`Hash`.

```
class Dictionary < Hash
  def add(defs)
    defs = {defs => nil} unless defs.kind_of?(Hash)
    merge!(defs)
  end
  alias entries dup
  def keywords; keys.sort end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-12T19:07:04.477

这是否让您知道如何通过“检查给定关键字是否存在时不作弊”？

```
@h = Hash.new{|h,k,v| h[k] = nil}
@h["fish"]
p @h #=> {"fish"=>nil} 
```

*当哈希中不*存在密钥时运行该`{|h,k,v| h[k] = nil}`部分。它添加键并给它一个 nil 值。

# sql - 如何在 SQL Server 2005 中将文本属性解析为 xml 属性？

> ID：15229462
> 
> 赞同：0
> 
> 时间：2013-03-05T16:47:18.143
> 
> 标签：sql, xml, sql-server-2005

我有一个表，其中包含一个名为`custom_fields`存储格式良好的 xml 的属性：

```
<Root>
   ...
   <TotalMontoSoles></TotalMontoSoles>
   ...
</Root> 
```

但是此属性不存储为 xml 数据类型，而是存储为文本。我需要做的是设置`TotalMontoSoles`值，我试图通过使用 XML-DML 中的 modify 方法来完成它，但我一直得到一个

> *错误 SQL：不允许从数据类型 xml 到文本的显式转换。*

当我尝试将列转换为 xml 类型时出错：

```
DECLARE @custom_fields xml
SET @custom_fields = (SELECT CAST(custom_fields as XML) FROM UPLOAD_HEADER_TEMPORAL
@custom_fields.modify('...') 
```

我究竟做错了什么？有没有其他方法可以做到这一点？

更新：

也许重要的是要指出我在这里要做的是创建一个过程，而我在编译期间遇到了这个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:59:48.977

文本列数据类型无法转换（转换）为 XML。您可以（应该）使用其中一种 varchar 类型。Microsoft 将在未来某个时候删除文本（和图像）数据类型。

[http://msdn.microsoft.com/en-us/library/ms187993%28v=sql.90%29.aspx](http://msdn.microsoft.com/en-us/library/ms187993%28v=sql.90%29.aspx)

> 在 Microsoft SQL Server 的未来版本中，将删除 ntext、text 和 image 数据类型。避免在新的开发工作中使用这些数据类型，并计划修改当前使用它们的应用程序。请改用 nvarchar(max)、varchar(max) 和 varbinary(max)。

# php - 解析错误：语法错误，意外的 '->' (T_OBJECT_OPERATOR)

> ID：15229463
> 
> 赞同：4
> 
> 时间：2013-03-05T16:47:21.227
> 
> 标签：php, syntax-error

我有一种感觉，这可能是一个简单的语法错误，我只是没有看到，因为我已经浏览了代码并且无法弄清楚为什么我会收到上述错误。我正在编写的代码是来自 SAMS 书籍的关于构建日历类的教程。作为记录，我正在运行 PHP 5.4.7。下面的代码属于我将在下面显示的包含..

```
function date_pulldown($name) {
    $this->name = $name;
}

function setDate_global( ) {
    if (!this->setDate_array($GLOBALS['$this->name'])) {
        return $this->setDate_timestamp(time());
    }

    return true;
}

function setDate_timestamp($time) {
    $this->timestamp = $time;
    return true;
}

function setDate_array($inputdate) {
    if (is_array($inputdate) &&
        isset($inputdate["mon"]) &&
        isset($inputdate["mday"]) &&
        isset($inputdate["year"])) {

        $this->timestamp = mktime(11, 59, 59, $inputdate["mon"], $inputdate["mday"], $inputdate["year"]);

        return true;
    }

    return false;       
}

function setYearStart($year) {
    $this->yearstart = $year;
}

function setYearEnd($year) {
    $this->yearend = $year;
}

function getYearStart() {
    if ($this->yearstart < 0) {
        $nowarray = getdate(time());
        $this->yearstart = $nowarray[year]-5;
    }

    return $this->yearstart;
}

function getYearEnd() {
    if ($this->yearend < 0) {
        $nowarray = getdate(time());
        $this->yearend = $nowarray[year]+5;
    }
    return $this->yearend;
}

function output() {
    if ($this->timestamp < 0) {
        $this->$setDate_global();
    }
    $datearray = getdate($this->timestamp);
    $out = $this->day_select($this->name, $datearray);
    $out .= $this->month_select($this->name, $datearray);
    $out .= $this->year_select($this->name, $datearray);
    return $out;
}

function day_select($fieldname, $datearray) {
    $out = "<select name=\"$fieldname"."[mday]\">\n";
    for ($x=1; $x<=31; $x++) {
        $out .="<option value=\"$x\"".($datearray["mday"]==($x)?" SELECTED":"").">".sprintf("%02d", $x)."\n";
    }
    $out .="</select>\n";
    return $out;
}

function month_select($fieldname, $datearray) {
    $out = "<select name=\"$fieldname"."[mon]\">\n";
    for ($x=1; $x<=12; $x++) {
        $out .="<option value=\"".($x)."\"".($datearray["mon"]==($x)?" SELECTED":"")."> ".$this->months[$x-1]."\n";
    }
    $out .="</select>\n";
    return $out;
}

function year_select($fieldname, $datearray) {
    $out = "<select name=\"$fieldname"."[year]\">";
    $start = $this->getYearStart();
    $end = $this->getYearEnd();
    for ($x=$start; $x<$end; $x++) {
        $out .="<option value=\"$x\"".($datearray["year"]==($x)?" SELECTED":"".">$x\n";
    }
    $out .="</select>\n";
    return $out;
}
}
?> 
```

以及显示（包括）页面的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Example 12.4 - Using the date_pulldown Class</title>
</head>
<?php
include("date_pulldown.php");
$date1 = new date_pulldown("fromdate");
$date2 = new date_pulldown("todate");
$date3 = new date_pulldown("foundingdate");
$date3->setYearStart(1972);
if (empty($foundingdate)) 
    $date3->setDate_array(array('mday'=>26, 'mon'=>4, 'year'=>1984));
?>
<body>
<form>
    From:<br />
    <?php print $date1->output(); ?><br /><br />
    To:<br />
    <?php print $date2->output(); ?><br /><br />
    Company founded:<br />
    <?php print $date3->output(); ?><br /><br />
    <input type="submit" />
</form>    
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-05T16:48:56.600

您缺少一个`$`标志：

```
if (!this->setDate_array($GLOBALS['$this->name'])) { 
```

应该

```
if (!$this->setDate_array($GLOBALS['$this->name'])) { 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-05T16:48:57.907

```
if (!this->setDate 
```

此行缺少`$`before `this`，因此`this`被视为常量，不存在因此被视为字符串，后面不能有`->`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T17:02:37.727

除了以上提到`if (!this`的`if (!$this`

您还需要在函数中重新访问这一行`year_select`：

```
$out .="<option value=\"$x\"".($datearray["year"]==($x)?" SELECTED":"".">$x\n"; 
```

看起来应该更改为：（
*请注意我所做的一些更改是为了匹配您在其他函数中的格式，似乎没有一致性）*

```
$out .= "<option value=\"".$x."\"".($datearray["year"]==($x)?" SELECTED":"").">".$x."\n"; 
```

# ios - 如何将 .html 文件读取到 Xcode UI

> ID：15229465
> 
> 赞同：0
> 
> 时间：2013-03-05T16:47:24.713
> 
> 标签：ios

我正在执行将 rtf 文件更改为 html 文件的任务。但是，如何将 .html 文件读取到 NSTextView 或其他对象。我测试以下 API 在读取 HTML 文件时效果很好。

```
NSTextView *showHtml;

[showHtml readRTFDFromFile:[[NSBundle mainBundle] pathForResource:@"test" ofType:@"html"]]; 
```

对象 showHtml 可以像浏览一样显示 Html 文件。

但是像这样的 API readRTFDFromFile 描述只能读取 rtf 或 rtfd 文件。

是否有任何 API 或方法可以在 xib 中显示 Html 文件。

我还测试了 API：

```
[[NSAttributedString alloc] initWithHTML:(NSData *) data documentAttributes:(NSDictionary **) docAttributes],
setAttributedStringValue:(NSAttributedString *) aAttributeString 
```

但它不能显示除字符串之外的属性。

感谢您的回复。

# python - 如何使用 sqlalchemy-migrate 将列类型从字符变化更改为整数

> ID：15229475
> 
> 赞同：0
> 
> 时间：2013-03-05T16:48:02.297
> 
> 标签：python, postgresql, sqlalchemy, sqlalchemy-migrate

我正在使用 sqlalchemy-migrate 来更改 Postgre SQL 数据库中表中一列的类型。我正在使用的升级脚本是：

```
# -*- cofing: utf-8 -*-

from sqlalchemy import MetaData, Table, Column, String, Integer
from migrate import changeset

metadata = MetaData()

def upgrade(migrate_engine):
    # ALTER TABLE courses ALTER COLUMN number SET DATA TYPE character varying;
    metadata.bind = migrate_engine
    courses = Table('courses', metadata, Column("number", Integer), extend_existing=True)
    courses.c.number.alter(type=String)

def downgrade(migrate_engine):
    # ALTER TABLE courses ALTER COLUMN number SET DATA TYPE integer;
    metadata.bind = migrate_engine
    courses = Table('courses', metadata, Column("number", String), extend_existing=True)
    courses.c.number.alter(type=Integer, cast='numeric') 
```

升级部分似乎可以工作，但降级总是失败并出现以下错误：

```
sqlalchemy.exc.ProgrammingError: (ProgrammingError) column "number" cannot be cast to type integer
'\nALTER TABLE courses ALTER COLUMN number TYPE INTEGER' {} 
```

现在，如果我使用普通 SQL，我可以使用`ALTER TABLE courses ALTER COLUMN number TYPE INTEGER USING number::numeric`将列类型从 更改回`character varying`，`integer`但我不知道如何使用 sqlalchemy-migrate 来实现。

有没有办法强制 sqlalchemy 包含`USING number::numeric`在`ALTER`子句中？还是有其他方法可以避免我上面发布的错误？

我感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T17:17:33.697

看起来 sqlalchemy.migrate 不支持在 postgresql 从 String 更改为 Integer 列类型的情况下呈现有效查询。

在您的情况下，我会将其实现为直接查询执行并继续。

```
def downgrade(migrate_engine):
    # ALTER TABLE courses ALTER COLUMN number SET DATA TYPE integer;
    migrate_engine.execute('ALTER TABLE courses ALTER COLUMN number TYPE INTEGER USING number::numeric') 
```

顺便说一句，从 String 迁移到 Integer 可能会因不同的原因而失败 - 当列值包含一些无法转换为数字的值时。所以我会在应用程序逻辑中添加一些额外的验证，以便以后可以进行降级迁移。

# windows - 在 Windows 7 中安装 rdiscount 时出错

> ID：15229483
> 
> 赞同：1
> 
> 时间：2013-03-05T16:48:25.980
> 
> 标签：windows, rdiscount

我正在尝试安装 rdiscount gem，但遇到以下错误。

如何在 Windows 7 中安装 rdiscount？

```
C:\>gem install rdiscount --platform=ruby Temporarily enhancing PATH to include DevKit... Building native extensions.  This could take a while... ERROR:  Error installing rdiscount:
        ERROR: Failed to build gem native extension.

        C:/Ruby193/bin/ruby.exe extconf.rb checking for random()... no checking for srandom()... no checking for rand()... yes checking for srand()... yes checking size of unsigned long... 4 checking size of unsigned int... 4 creating Makefile

                 from c:\devkit\mingw\bin\../lib/gcc/mingw32/4.5.2/../../../../i
                 from c:/Ruby193/include/ruby-1.9.1/ruby/win32.h:40,
                 from c:/Ruby193/include/ruby-1.9.1/ruby/defines.h:223,
                 from c:/Ruby193/include/ruby-1.9.1/ruby/ruby.h:67,
                 from c:/Ruby193/include/ruby-1.9.1/ruby.h:32,
                 from rdiscount.c:3: c:\devkit\mingw\bin\../lib/gcc/mingw32/4.5.2/../../../../include/windef.h:229:23 c:\devkit\mingw\bin\../lib/gcc/mingw32/4.5.2/../../../../include/windef.h:238:23 c:\devkit\mingw\bin\../lib/gcc/mingw32/4.5.2/../../../../include/windef.h:238:23 c:\devkit\mingw\bin\../lib/gcc/mingw32/4.5.2/../../../../include/windef.h:241:24 rdiscount.c: In function 'rb_rdiscount_to_html': rdiscount.c:19:5: warning: implicit declaration of function 'rb_rdiscount__get_f rdiscount.c:19:5: warning: ISO C90 forbids mixed declarations and code rdiscount.c:32:5: warning: ISO C90 forbids mixed declarations and code rdiscount.c: In function 'rb_rdiscount_toc_content': rdiscount.c:68:5: warning: ISO C90 forbids mixed declarations and code make: *** [rdiscount.o] Error 1

Gem files will remain installed in C:/Ruby193/lib/ruby/gems/1.9.1/gems/rdiscount Results logged to C:/Ruby193/lib/ruby/gems/1.9.1/gems/rdiscount-2.0.7.1/ext/gem_

C:\> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T03:25:39.680

我仍然无法让它工作，所以必须使用旧版本。

```
gem install rdiscount -v=1.6.8 --platform=ruby 
```

编辑于 2013 年 3 月 15 日

旧宝石给了我其他错误。

我改用了

```
gem install RedCloth -v=4.2.9 –platform=ruby 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T16:22:23.863

尝试更新您的 Ruby 和/或 RDiscount。

最新的 RDiscount (2.0.7.3) 应该适用于 Ruby 1.9.3 或更高版本。

# ios - 在转换为 .caf 之前，我需要先将音频文件转换为 .wav 吗？

> ID：15229484
> 
> 赞同：1
> 
> 时间：2013-03-05T16:48:26.383
> 
> 标签：ios

我有几个音频文件，它们都是 .mp3 格式。但是播放 .mp3 并不能最大限度地提高 iOS 上音频播放的效率。根据[一项](http://www.raywenderlich.com/233/audio-101-for-iphone-developers-converting-and-recording)研究，.wav 或 .caf 是游戏中使用的短循环或音效音频文件的首选。因此，我需要将此 .mp3 文件转换为这两种格式。

目前我使用以下命令将 .mp3 转换为 .caf。

```
afconvert -f caff -d LEI16 kick_sfx.mp3 
```

但是，我看到 .caf 是一种[容器格式](http://en.wikipedia.org/wiki/Core_Audio_Format)，因此我感觉它仍然没有那么高效。据此，我认为我需要先将这些 .mp3 文件转换为 .wav 以最大限度地提高播放音频文件的效率。

在将它们再次转换为 .caf 之前，我是否需要先将这些 (.mp3) 文件转换为 .wav？或者单独使用该命令将为我完成工作？欢迎提供任何其他信息。

# c# - 静态布尔值始终为真

> ID：15229487
> 
> 赞同：3
> 
> 时间：2013-03-05T16:48:44.190
> 
> 标签：c#, asp.net

我有一个看起来像这样的 Web 表单应用程序。

```
public partial class MyPage : Page
{
    private static bool _changed = false;

    protected void btnSave_Click(object sender, EventArgs e)
    {
         if(_changed)
         {
             //some code here
         }
    }

    protected void btnCancel_Click(object sender, EventArgs e)
    {
        Response.Redirect("~/MyPage.aspx");
    }

    protected void dropdownlist_SelectedIndexChanged(object sender, EventArgs e)
    {
        _changed = true;  
    }
} 
```

所以我想要做的要点是我有一个表单，其中包含一个下拉列表和一个保存按钮。如果用户对下拉列表进行了更改，我将私有布尔值`changed`设置为 true。默认情况下，它是假的。

由于某种我不明白的原因，即使它从未访问过该方法，`changed`当它到达该方法时也是如此，这是我的代码中唯一设置为真的地方。`btnSave_click``dropdownlist_selectedIndexChanged``changed`

标记：

```
<asp:DropDownList ID="myDropDown" runat=server" OnSelectedIndexChanged="dropdownlist_SelectedIndexChanged" AutoPostBack="true">
<asp:ListItem Value="True">Yes</asp:ListItem>
<asp:ListItem Value="False">No</asp:ListItem>

<asp:Button ID="btnSave" Text="Save" OnClick="btnSave_Click" runat="server" /> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T16:53:39.167

您确定要使用在**所有请求**`static`中共享的字段变量吗？所以当 UserA 在 DropDown 中选择某些东西时，UserB 也会有= true。**`_changed`**

 **您可能想改用`ViewState`or`Session`变量，例如：

```
private bool HasChanged
{
    get { object b = ViewState["HasChanged"] ?? false; return (bool)b; }
    set { ViewState["HasChanged"] = value; }
} 
```

[**在 ASP.NET 应用程序中管理持久用户状态的九个选项**](http://msdn.microsoft.com/en-us/magazine/cc300437.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T16:54:45.760

我认为由填充其初始值`SelectedIndexChanged`的元素触发。`<select>`这意味着当您的表单正在初始化时，在用户甚至可以与其交互之前，您的`dropdownlist_SelectedIndexChanged()`方法正在被调用。您可以通过使用调试器查看此方法何时执行来验证这一点。

此外，正如其他人所提到的，`static`成员存储请求变量是一个好主意。`ViewState`更适合这个。

**更新**

> 我认为由填充其初始值`SelectedIndexChanged`的元素触发。`<select>`

这不是真的。

我用一个非常简单的网络应用程序对此进行了测试，当通过声明性文件（MyPage.aspx）`SelectedIndexChanged`将初始值添加到时，该事件不会被触发。`DropDownList`

我什至尝试`SelectedIndex`在后面的代码中以编程方式更改。

```
protected void Page_Load(object sender, EventArgs e)
{
    myDropDownList.Items.Add(new ListItem("Text", "Value"));
    myDropDownList.SelectedIndex = 2;
} 
```

尽管如此，即使这样做，`myDropDownList_SelectedIndexChanged`事件也不会被触发，直到通过与网页交互来更改所选项目。**

# xcode - OpenGL ES 1.1 iOS 在视网膜与非视网膜上的尺寸不正确

> ID：15229489
> 
> 赞同：0
> 
> 时间：2013-03-05T16:48:49.593
> 
> 标签：xcode, opengl-es, drawing, coordinates

所以，我遇到了一个很奇怪的问题，我不知道为什么。在视网膜屏幕上显示以下 opengl 代码时，我收到以下图像： ![在此处输入图像描述](../Images/e2b6c9f7d00cda95136327c31e52f041.png)

而我在非视网膜上得到的图像如下： ![在此处输入图像描述](../Images/42c1b11a6aff211bd8bfb1470fe80028.png)

坐标系应该正常设置。我还注意到它似乎通常不会缩放到视网膜大小。从 [UIScreen 主屏幕] 获取框架时，我得到的视网膜和非的值相同，如下所示。我想有一种特殊的方法来调整这个大小吗？

```
frame: Origin: x:0.000000 y:0.000000, Size: width:768.000000 height:1024.000000 
```

***编辑：原因是 OpenGL ES 1.1 本身不能缩放到 Retina 大小。创建 ViewPort 时，您必须手动缩放大小，例如 glViewport(0, 0, width * [[UIScreen mainScreen] scale], height * [[UIScreen mainScreen] scale]); 这是我能想到的最简单的方法。***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T02:46:07.740

OpenGL 本身对视图或屏幕特性一无所知；它只知道像素。

默认情况下，与其他 UIView 不同，GL 支持的视图不会自动使用非 1.0 比例，而是以 1x 操作。因此，正如您所发现的，您应该将屏幕比例设置为选择视网膜像素分辨率（两个维度的大小都是 2 倍）。

然而，增加像素的数量只会增加像素的数量。GL 并不神奇地知道它应该缩放所有几何体（或者实际上这就是你真正想要的）。如果您想为两个比例视图使用相同的几何图形（您通常会这样做），那么是的，您还负责应用比例。

在 ES 1.1 中（您似乎正在使用，这只是：

```
glScalef([UIScreen mainScreen] scale], [UIScreen mainScreen] scale], 1.0); 
```

在 ES 2.0 中，您可以将其应用于模型视图或投影矩阵，然后在顶点着色器中使用它来转换输入几何体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T00:55:50.073

我发现视图的“缩放”方法显然需要设置为正确调整视图大小（因为视图是基于位置的而不是像素，并且由于某些奇怪的原因，位置不会随着分辨率的提高等而调整）。这是我唯一能真正找到的东西。我注意到在 GLView 的 init 方法中包含以下调用检查和设置...但我仍然想知道是否有更好的方法。我不是必须通过将高度和宽度乘以 scale 属性来手动调整所有内容的大小吗？

```
- (id)initWithFrame:(CGRect)frame
{

    NSLog(@"frame: Origin: x:%f y:%f, Size: width:%f height:%f", frame.origin.x, frame.origin.y, frame.size.width, frame.size.height);

    self = [super initWithFrame:frame];
    if (self) {

        **if([[UIScreen mainScreen] respondsToSelector: NSSelectorFromString(@"scale")])
        {
            if([self respondsToSelector: NSSelectorFromString(@"contentScaleFactor")])
            {
                [self setContentScaleFactor:[[UIScreen mainScreen] scale]];
                NSLog(@"Scale factor: %f", [[UIScreen mainScreen] scale]);
            }
        }**

        NSLog(@"frame: Origin: x:%f y:%f, Size: width:%f height:%f Scale factor: %f", frame.origin.x, frame.origin.y, frame.size.width, frame.size.height, self.contentScaleFactor);
        CAEAGLLayer *eaglLayer = (CAEAGLLayer *)super.layer;
        eaglLayer.opaque = YES; // set to indicate that you do not need Quartz to handle transparency. This is a performance benefit.

        context = [[EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES1];

        if (!context || ![EAGLContext setCurrentContext:context]) {
            return nil;
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T02:30:00.350

这就是我使用 setContentScaleFactor 的方式——如果你在视网膜设备上，并且你只想渲染到旧的非视网膜分辨率设置，缩放为 1，iOS 会为你加倍大小。

否则，如果您编写代码来检测 Retina 设备并创建相应更大的视口，请将内容缩放因子设置为 2 以由 iOS 单独保留。

# java - java中的二进制或运算符比较字符

> ID：15229492
> 
> 赞同：0
> 
> 时间：2013-03-05T16:48:56.680
> 
> 标签：java, logic

我被困在一些简单的事情上，基本上我想验证以下内容

```
public class CharTest
{
    public static void main(String [] args)
    {
        char myChar = '(';
        if (myChar != '(' | ')' )
        {
            System.out.println("Fault");
        }
        System.out.println("No Fault");
    }
} 
```

但我不断得到

CharTest.java:6：错误：二元运算符“|”的操作数类型错误 if (myChar != '(' | ')' ) ^ 第一种：布尔第二种：char 1 错误

我试过使用 | 以及 || 如何实现我正在寻找的 OR 功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T16:52:32.993

Java 具有在语句中使用的已[定义语法](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.9)`if`。具有多个 RHS 操作数的表达式违反了语法，因此编译器会抱怨。与按位运算符相比，逻辑运算符在这里更可取，因为它提供了[短路评估](http://en.wikipedia.org/wiki/Short-circuit_evaluation)。

两边都带有否定表达式的逻辑 OR 将*始终*为真。改用`&&`：

```
if (myChar != '(' && myChar != ')' ) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T16:51:19.773

## 原因

二元运算符可用于`boolean|boolean`或`number|number`。在你的情况下
，因为[`!=`有更高的优先级`|`](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html)

```
myChar != '(' | ')' 
```

等于

```
( myChar!='(' ) | ')' 
```

这给了你

```
 boolean     | character 
```

但即使你像这样写`myChar !=( '(' | ')' )`二进制 OR 也会计算
`'(' | ')'`成`)`因为

```
'(' ->     101000
')' ->     101001
 OR        ------
'('|')'->  101001 -> `)` 
```

所以`(`条件会丢失。

## 解决方案

您可能希望根据[德摩根定律](http://en.wikipedia.org/wiki/De_Morgan%27s_laws)使用这种形式： !(a OR b)== !a AND !b

```
myChar != '(' & myChar != ')' 
```

甚至短路`and`以提高性能

```
myChar != '(' && myChar != ')' 
```

这种方式如果`myChar != '('`将返回假，整个条件将被估计为假，因为
`false` `and` `anything`总是假的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T16:51:58.557

您应该使用以下内容

```
if (myChar != '(' && myChar != ')' ) 
```

您必须分开比较并使用逻辑`&&`和运算符。

[请参阅有关逻辑运算符的示例](http://www.cafeaulait.org/course/week2/45.html)

根据[德摩根定律](http://en.wikipedia.org/wiki/De_Morgan%27s_laws)，你必须使用`and`运算符来实现你想做的事情。否则它将接受一切。和将强制您不想要任何一个角色。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T16:53:54.627

你不能说“不等于这个字符或这个字符”。Java 使您可以单独比较每个字符。

```
if (myChar != '(' && myChar != ')') 
```

请注意您要`&&`在这里，因为（1）“非（A或B）”与“（非A）和（非B）”相同，并且（2）我们关心的是布尔值，而不是位（`&`看起来这里很奇怪）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T16:52:39.330

你应该这样做

```
(myChar != '(' && myChar!= ')') 
```

`|`不是逻辑运算符，它是 a `Bitwise inclusive OR`。

**按位 | 运算符执行按位包含 OR 运算。**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-05T17:36:15.267

我认为运算符“|” 返回真或假，这不能针对字符值进行验证。

以下应该有效：

```
if (!((myChar==')')||(myChar=='(')) ){
    System.out.println("Fault");
} 
```

# authentication - 用户解密认证

> ID：15229496
> 
> 赞同：0
> 
> 时间：2013-03-05T16:49:04.243
> 
> 标签：authentication, hash, encryption

我试图避免在身份验证时访问数据库以提高性能

经过大量搜索后的有效解决方案似乎是将加密字符串存储在 cookie 中并尝试在身份验证时对其进行解密。

因此，我想知道以下是否是一个好主意：

1.  通过 SSL 传输所有内容（我很懒惰..）
2.  在我的程序中设置一个全局常量密钥
3.  在注册和更改密码时生成一个新的随机验证字符串，将其存储在 User 对象中
4.  生成带有验证字符串和密钥的加密验证字符串
5.  将未加密和加密的验证字符串存储在 cookie 中
6.  当用户尝试登录时，解密验证字符串并检查原始验证字符串

如果这是一个“好的”想法，我该如何让它发挥作用，例如：

我应该使用什么加密方法，AES-256？

如何使用 Bouncycastle 在 Java 中进行这种加密/解密？

如果这不是一个好主意，我应该怎么做才能避免在身份验证时查询数据库？

比提前！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:35:35.917

你上面描述的问题叫做“RememberMe”。解决您的问题的两种方法：

1）创建自己的身份验证框架。

身份验证成功后，将用户名的加密值放入 cookie（我强烈建议不要使用散列；也请不要输入用户密码值）。

cookie 最多应该持续 2 周。

对于加密，请在 BouncyCastle 中使用 AES-256 加密： [如何在 AES 和 PBE 中使用 Bouncy Castle 轻量级 API](https://stackoverflow.com/questions/2957513/how-to-use-bouncy-castle-lightweight-api-with-aes-and-pbe) 请不要在 cookie 中放入任何普通值。如果您的框架成功解密 cookie – 用户已通过身份验证。如果您的框架无法解密 cookie 或 cookie 不存在 - 用户未通过身份验证。注销后请清理cookie。

2）请考虑使用Spring Security框架： [http ://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html)

它是一个很棒的框架，解决了很多身份验证/授权问题。

“RememberMe”功能解决了您的问题：http: [//static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#ns-remember-me](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#ns-remember-me)

如果您需要任何其他说明，请告诉我。

最好的祝福，

迈克尔

# xslt - 在列表中获取值的 XPath 代码

> ID：15229500
> 
> 赞同：0
> 
> 时间：2013-03-05T16:49:14.623
> 
> 标签：xslt, xpath

假设我有这个 XML：

```
<myxml>
    <Labels>
        <Label>
            <id>id1</id>
            <value>abc</value>
        </Label>
        <Label>
            <id>id2</id>
            <value>def</value>
        </Label>
        <Label>
            <id>id3</id>
            <value>ghi</value>
        </Label>
        <Label>
            <id>id4</id>
            <value>jkl</value>
        </Label>
        <Label>
            <id>id5</id>
            <value>mno</value>
        </Label>
    </Labels>
</myxml> 
```

我想显示值“def”和“jkl”。

我正在寻找允许我获取 id 为“id2”的标签值的 XPath 表达式。

我试过这个：

```
<xsl:value-of disable-output-escaping="yes" select="Labels/Label[id = 'id2']/value"/> 
```

但它不工作......有没有办法做到这一点？

提前感谢您的回答，最好的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:52:00.723

您是否尝试过将根添加到您的 xpath 中？

```
<xsl:value-of select="myxml/Labels/Label[id = 'id2']/value" /> 
```

此外，`disable-output-escaping`通常是不必要的。

# c# - 使用 RotateFlip 旋转位图

> ID：15229504
> 
> 赞同：0
> 
> 时间：2013-03-05T16:49:21.443
> 
> 标签：c#, pdf, bitmap, qr-code, image-rotation

我在旋转已包含 qrcode 的扫描文档时遇到问题。我正在检查二维码，但是当代码倒置时 - 我无法翻页并尝试再次读取二维码。我收到此错误消息：

`exception of type 'com.google.zxing.readerexception' was thrown`

```
using (var fullImg = new Bitmap(workGif))
                {
                    var halfW = fullImg.Width/2;
                    var halfH = fullImg.Height / 2;
                    var bandImg = fullImg.Clone(new System.Drawing.Rectangle(0, 0, halfW, halfH), fullImg.PixelFormat);

                    if (Process(bandImg) == null)
                    {
                        page.Rotate = (page.Rotate + 180) % 360;
                    }
                    string QRinfo = Process(bandImg);
                    MessageBox.Show(QRinfo);
                    string[] qcode = QRinfo.Split('/');
                    string gid = qcode[qcode.Count() - 1];
                    Guid pgGuid = new Guid(gid);

                    MessageBox.Show(QRinfo);

                    var ar = dc.Assessments.FirstOrDefault(c => c.ID == pgGuid);
                    if (ar != null)
                    {
                        var p = inputDocument.Pages[pg];
                        string opdName = FILESTORELOCATION + pgGuid.ToString() + ".pdf";
                        PdfDocument opd = new PdfDocument(opdName);
                        opd.Pages.Add(p);
                        opd.Close();

                        ar.StoragePath = opdName;
                        ar.LastUploadedDT = DateTime.UtcNow;
                        ar.UploadedByUserID = uploadingUser;
                        dc.SubmitChanges();
                    }

                } 
```

这是我解码 qr 的过程：

```
 public string Process(Bitmap bitmap)
    {
        var reader = new com.google.zxing.qrcode.QRCodeReader();

        try
        {
            LuminanceSource source = new RGBLuminanceSource(bitmap, bitmap.Width, bitmap.Height);
            var binarizer = new HybridBinarizer(source);
            var binBitmap = new BinaryBitmap(binarizer);
            return reader.decode(binBitmap).Text;
        }
        catch (Exception e)
        {
            return e.Message;
        }
    } 
```

# java - 无限循环看不到更新的变量

> ID：15229511
> 
> 赞同：-2
> 
> 时间：2013-03-05T16:49:44.727
> 
> 标签：java, loops, infinite

我有一个无限循环，它等待更新布尔值的方法，虽然这在学校似乎一切正常，但在家里却行不通。不确定这是否真的意味着它是基于计算机的还是什么，因为它也适用于那里的 print 语句。

```
while(running){
    //System.out.println(running);      
}

...

public static void passwordCheck(String pass){
    if(pass.equals(password)){
        correctPW = true;
    }
    else if(pass.equals(overKey))
        PWCoder.override(password);
    running = false;
}

...

public void actionPerformed(ActionEvent e){
    String temp = new String("");
    for(int x=0;x<passwordInput.getPassword().length;x++)
        temp+=passwordInput.getPassword()[x];
    PWCoder.passwordCheck(temp);
} 
```

正如我所说，这段代码适用于未注释的 print 语句，但这相当难看。我要在这里输入一个密码屏幕，如果您输入错误，则会打开一个不同的窗口（代码未显示），或者您可以输入调用覆盖方法的覆盖密码。我使用了许多调试语句，在方法中运行设置为 false，我猜 while 循环只是没有选择它。抱歉，代码有点乱。While 循环有问题，应该让循环结束的方法，以及调用所述方法的另一个类中的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:52:51.773

A number of issues, this should work

```
 public static void passwordCheck(String pass){
        if(pass.equals(password)){
            correctPW = true;
            running = true;
        }
        else if(pass.equals(overKey)) {
            PWCoder.override(password);
        running = false;
    }
    } 
```

Also, you may consider just using break, to get out of your loop on success.

# javascript - javascript d3.js 日期字符串解析问题

> ID：15229514
> 
> 赞同：2
> 
> 时间：2013-03-05T16:49:49.923
> 
> 标签：javascript, parsing, date, d3.js

假设这是我的数据对象中的字符串

`{ date: "2013-03-04 12:00:00+0000" }`

```
var parseDate = d3.time.format("%Y-%m-%d_%H:%M:%S+%Z");

data.forEach(function(d) {
            d.date = parseDate(d.date);
        }); 
```

然而在我的`forEach`方法中，我的日期对象每次都返回 null。我不明白为什么这会失败。

相似地

`{ date: "2013-03-04 00:00:00+0000" }`

和

`d3.time.format("%Y-%m-%d 00:00:00+00").parse`

工作正常。但是日期不太精确，因为它假设在我的可视化中一切都发生在午夜

为什么我的字符串日期解析器在我的第一个场景中失败？我尝试在 chrome 的控制台/检查元素中单步执行日期解析器，但无济于事。

这是 d3.time.format 文档[https://github.com/mbostock/d3/wiki/Time-Formatting](https://github.com/mbostock/d3/wiki/Time-Formatting)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T16:54:31.910

从您链接到的文档页面，进一步向下：

> 尚不支持解析以下指令：
> 
> %j - 一年中的一天。
> 
> %U - 一年中的周数。
> 
> %w - 工作日编号。
> 
> %W - 一年中的周数。
> 
> %Z - 时区偏移量，例如“-0700”。
> 
> %% - 文字“%”字符。

不支持您尝试解析的时区偏移量。第二个有效，因为您不想解析它。

如果您对 GMT 中的所有内容都满意，只需将格式规范中的`+%Z`替换为。`+0000`否则，您将不得不找到另一种解析日期的方法。

# javascript - 在桌面设备中拖放 html 元素

> ID：15229519
> 
> 赞同：0
> 
> 时间：2013-03-05T16:50:01.457
> 
> 标签：javascript, html, ipad, drag-and-drop

我有一个包含许多视觉项目的网站。我需要拖放它（更改顺序）。

我正在使用下一种方法[在淘汰赛中进行拖放](http://www.knockmeout.net/2012/02/revisiting-dragging-dropping-and.html)。

它适用于桌面，但我也想在桌面设备上使用它。

任何人都可以向我建议任何可以在平板设备上使用的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:14:30.020

如果您使用的是 jQuery UI，则有一个“punch”事件可以解决问题。这里提出了一个类似的问题： [HTML Drag And Drop On Mobile Devices](https://stackoverflow.com/questions/3172100/html-drag-and-drop-on-mobile-devices)

# dart - Dart 无法访问云端点 API

> ID：15229526
> 
> 赞同：1
> 
> 时间：2013-03-05T16:50:15.110
> 
> 标签：dart, google-cloud-endpoints

这很令人沮丧，我在这里被困了一个星期，不知道如何解决它；(

受到 Gerwin Sturm 的出色工作 ( [https://github.com/Scarygami/gdg-endpoint-demo](https://github.com/Scarygami/gdg-endpoint-demo) ) 的启发，我更喜欢构建 java 后端。

但不幸的是，每次我尝试调用端点 API 时，都会出现 NoSuchMethodError 错误。

```
Exception: NoSuchMethodError : method not found: '_client@0x296594a'
Receiver: Instance of 'Dbentryendpoint'
Arguments: []
Stack Trace: #0      Object.noSuchMethod (dart:core-patch:1737:25)
#1      Dbentryendpoint.listDBEntry (http://127.0.0.1:3030/C:/Users/VincentZhou/dart/dart_dbentryendpoint_v1_api_client/packages/google_dbentryendpoint_v1_api/src/browser/dbentryendpoint.dart:162:16)
#2      main.fetch (http://127.0.0.1:3030/C:/Users/VincentZhou/dart/dart_dbentryendpoint_v1_api_client/demo.dart:24:20)
#3      main (http://127.0.0.1:3030/C:/Users/VincentZhou/dart/dart_dbentryendpoint_v1_api_client/demo.dart:64:8)

Exception: NoSuchMethodError : method not found: '_client@0x296594a'
Receiver: Instance of 'Dbentryendpoint'
Arguments: []
Stack Trace: #0      Object.noSuchMethod (dart:core-patch:1737:25)
#1      Dbentryendpoint.insertDBEntry (http://127.0.0.1:3030/C:/Users/VincentZhou/dart/dart_dbentryendpoint_v1_api_client/packages/google_dbentryendpoint_v1_api/src/browser/dbentryendpoint.dart:124:16)
#2      main.<anonymous closure>.<anonymous closure>.<anonymous closure>.<anonymous closure> (http://127.0.0.1:3030/C:/Users/VincentZhou/dart/dart_dbentryendpoint_v1_api_client/demo.dart:56:28) 
```

demo.dart 的源代码几乎与原始源代码 ( [https://github.com/Scarygami/gdg-endpoint-demo](https://github.com/Scarygami/gdg-endpoint-demo) ) 相同，我只更改了 cloudendpint API 和 Web 客户端 ID。

```
import "dart:html";
import 'packages/google_dbentryendpoint_v1_api/dbentryendpoint_v1_api_browser.dart' as gdglib;
import 'packages/google_plus_v1_api/plus_v1_api_browser.dart' as pluslib;
import 'packages/google_oauth2_client/google_oauth2_browser.dart';

final CLIENT_ID = "878766780041.apps.googleusercontent.com";
final SCOPES = ["https://www.googleapis.com/auth/userinfo.email", "https://www.googleapis.com/auth/plus.me"];

void main() {
  var auth = new GoogleOAuth2(CLIENT_ID, SCOPES);
  var gdg = new gdglib.Dbentryendpoint(auth);
  var plus = new pluslib.Plus(auth);
  var container = query("#entries");
  var loginButton = query("#login");
  var sendButton = query("#send");
  InputElement textInput = query("#text");
  var authorSpan = query("#author");
  pluslib.Person me;

  void fetch() {
    //gdg.makeAuthRequests = false;
    gdg.makeAuthRequests = true;
    gdg.listDBEntry(limit:10).then((l) {
      container.text = "";
      if (l.items != null) {
        l.items.forEach((e) {
          var p = new ParagraphElement();
          var date = e.date.replaceAll("T", " ");
          p.text = "$date - ${e.author}: ${e.text}";
          container.append(p);
        });
      }
    });
  }

  loginButton.onClick.listen((Event e) {
    auth.login().then((token) {
      loginButton.style.display = "none";
      plus.makeAuthRequests = true;
      plus.people.get("me").then((p) {
        me = p;
        authorSpan.text = "${me.displayName}:";
        authorSpan.style.display = "inline-block";
        textInput.style.display = "inline-block";
        sendButton.style.display = "inline-block";

        sendButton.onClick.listen((Event e) {
          var text = textInput.value;
          textInput.value = "";
          var entry = new gdglib.DBEntry.fromJson({
            "author": me.displayName,
            "text": text
          });
          gdg.makeAuthRequests = true;
          gdg.insertDBEntry(entry).then((entry) {
            fetch();
          });
        });
      });
    });
  }); 
```

在 Google App Engine 方面，我由 GPE 自动生成云端点类，然后添加客户端 ID 相关信息：

```
@Api(name = "dbentryendpoint",
        clientIds={Ids.WEB_CLIENT_ID,com.google.api.server.spi.Constant.API_EXPLORER_CLIENT_ID},
        scopes={"https://www.googleapis.com/auth/userinfo.email"}
)
public class DBEntryEndpoint {
..... 
```

感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:06:26.863

包导入看起来不正确，试试这个。

```
import 'packages:google_dbentryendpoint_v1_api/dbentryendpoint_v1_api_browser.dart' as gdglib;
import 'packages:google_plus_v1_api/plus_v1_api_browser.dart' as pluslib;
import 'packages:google_oauth2_client/google_oauth2_browser.dart'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T21:33:45.330

I think I figure out the way to work around it but I don't know why:

1.  the "generate cloud endpoints" of GPE doesn't generate the path, for example it generate the method listEntities, not entities.list
2.  the path is necessary to generate resource in _ah/api/discovery/v1/apis/dbentryendpoint/v1/rest; without path ,there is only schemas and methods, not schemas and resources
3.  without resources, the Dart client generator only export empty resouces.dart under /commom folder. and the mothods will be inside entityEndpoints.dart, which cannot correctly recognize the _client(), which is defined in client.dart under /common.

So the demo.dart cannot find the method.

Question: why the path is ncessary? because GPE dont generate the path automatically, can we have a way to generate the correct dart client file without manually adding the path in google app engine file? Thanks.

# javascript - 登录密码检查 HTML JAVASCRIPT

> ID：15229528
> 
> 赞同：-1
> 
> 时间：2013-03-05T16:50:27.463
> 
> 标签：javascript, html, validation, login, passwords

我一直在尝试获取密码以验证以下条件：

*   如果密码/用户名少于 5 个字符，将出现错误框
*   如果密码/用户名/两者都没有输入，会出现错误框
*   如果密码不正确，会出现错误框
*   如果密码正确，将出现提示登录成功的框

这是我的javascript编码：

```
 <script> function validateForm()
 {
 var x=document.forms["Login"]["user"].value;
 var y=document.forms["Login"]["pass"].value;
 if (x==null || x=="")
   {
   alert("Error: Username and password must be entered ");
   return false;
   }
 if(x.length<5){
    alert("Your username must be at least \n5 characters long. \n Please try again.");
    return false;
    }
if (y==null || y=="")
   {
   alert("Error: Username and password must be entered");
   return false;
   }
if(y.length<5){
    alert("Your username must be at least\n5 characters long.\n Please try again.");
    //Login.txtpass.value = "";
    //Login.txtpass.focus();
    return false;
 }
else{
alert("Error: Please check that you've entered and confirmed your password!");
return false;

}

alert("You entered a valid password: " + Login.pass.value);
return true;

 }
 </script> 
```

目前上述所有 3 项均已成功发生，但现在在我创建脚本之前无法成功登录。我将如何通过 javascript 登录来执行此操作？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:52:11.073

你总是在你去最后一个警报之前返回。

```
if(y.length<5){
    // something
    return false;
}
else{
    // something
    return false;
}
// you can't go there ! 
```

您尝试实现的逻辑尚不清楚，但您可能应该删除以 . 开头的最后一个块`else{`。

# ios - UICollectionView 和补充视图（标题）

> ID：15229537
> 
> 赞同：17
> 
> 时间：2013-03-05T16:50:45.937
> 
> 标签：ios, objective-c, uicollectionview, uicollectionviewlayout

试图将补充视图添加到我`UICollectionView`的标题中。我在让它工作时遇到问题。

我使用自定义`UICollectionViewFlowLayout`返回一个`contentSize`始终比框架大至少 1 像素的 a （我使用的 a`UIFreshControl`只有在`UICollectionView`滚动时才有效，并且`collectionView.contentSize`直接设置什么都不做）并`invalidateLayout`打开`sectionInsert`并`itemSize`更改：

```
-(void)setSectionInset:(UIEdgeInsets)sectionInset {
    if (UIEdgeInsetsEqualToEdgeInsets(super.sectionInset, sectionInset)) {
        return;
    }

    super.sectionInset = sectionInset;

    [self invalidateLayout];

}

-(void) setItemSize:(CGSize)itemSize {
    if (CGSizeEqualToSize(super.itemSize, itemSize)) {
        return;
    }

    super.itemSize = itemSize;

    [self invalidateLayout];
}

- (CGSize)collectionViewContentSize
{
    CGFloat height = [super collectionViewContentSize].height;

    // Always returns a contentSize larger then frame so it can scroll and UIRefreshControl will work
    if (height < self.collectionView.bounds.size.height) {
        height = self.collectionView.bounds.size.height + 1;
    }

    return CGSizeMake([super collectionViewContentSize].width, height);
} 
```

我创建了一个`UICollectionReusableView`只有 a`UIView`的类`UILabel`：

```
@implementation CollectionHeaderView

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        NSArray *arrayOfViews = [[NSBundle mainBundle] loadNibNamed:@"CollectionHeaderView" owner:self options:nil];

        if ([arrayOfViews count] < 1) {
            return nil;
        }

        if (![[arrayOfViews objectAtIndex:0] isKindOfClass:[UICollectionViewCell class]]) {
            return nil;
        }

        self = [arrayOfViews objectAtIndex:0];

        self.headerLabel.text = @"This is a header. There are many like it.";
        self.backgroundColor = [UIColor yellowColor];

    }
    return self;
} 
```

试图实现它：

```
DatasetLayout *collectionViewFlowLayout = [[DatasetLayout alloc] init];
collectionViewFlowLayout.itemSize = CGSizeMake(360, 160);
collectionViewFlowLayout.scrollDirection = UICollectionViewScrollDirectionVertical;
collectionViewFlowLayout.sectionInset = UIEdgeInsetsMake(16, 16, 16, 16);
collectionViewFlowLayout.minimumInteritemSpacing = 16;
collectionViewFlowLayout.minimumLineSpacing = 16;
collectionViewFlowLayout.headerReferenceSize = CGSizeMake(0, 100);

UICollectionView *collectionView = [[UICollectionView alloc] initWithFrame:CGRectZero collectionViewLayout:collectionViewFlowLayout];
collectionView.translatesAutoresizingMaskIntoConstraints = FALSE;
collectionView.backgroundColor = [UIColor yellowColor];
collectionView.delegate = self;
collectionView.dataSource = self; 
```

我注册课程：

```
[self.collectionView registerClass:[CollectionHeaderView class] forSupplementaryViewOfKind:UICollectionElementKindSectionHeader withReuseIdentifier:@"CollectionHeaderView"]; 
```

并实现委托：

```
-(UICollectionReusableView *)collectionView:(UICollectionView *)collectionView viewForSupplementaryElementOfKind:(NSString *)kind atIndexPath:(NSIndexPath *)indexPath {

    CollectionHeaderView *headerView = [collectionView dequeueReusableSupplementaryViewOfKind:UICollectionElementKindSectionHeader withReuseIdentifier:@"CollectionHeaderView" forIndexPath:indexPath];

    headerView.headerLabel.text = @"Blarg!";

    return headerView;
} 
```

线

```
collectionViewFlowLayout.headerReferenceSize = CGSizeMake(0, 100); 
```

导致错误：

```
*** Assertion failure in -[UICollectionView _createPreparedSupplementaryViewForElementOfKind:atIndexPath:withLayoutAttributes:], /SourceCache/UIKit_Sim/UIKit-2380.17/UICollectionView.m:1150
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'UICollectionView dataSource is not set' 
```

如果我将其注释掉，它会运行但没有标题。

我做错了什么或没有实施？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-04-26T12:51:08.677

我遇到了类似的问题，但是在我以编程方式弹出 UICollectionViewController 后，我的应用程序崩溃了。出于某种原因（我认为这只是 SDK 中的一个错误）self.collectionView 在其控制器销毁后仍然存在，从而导致此故障：

```
*** Assertion failure in -[UICollectionView _createPreparedSupplementaryViewForElementOfKind:atIndexPath:withLayoutAttributes:applyAttributes:], /SourceCache/UIKit/UIKit-2935.137/UICollectionView.m:1305
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'UICollectionView dataSource is not set' 
```

解决方案只是覆盖 UICollectionViewController 中的 -dealloc 并手动释放 self.collectionView。弧码：

```
- (void)dealloc {

    self.collectionView = nil;
} 
```

希望这会为某人节省时间。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-09-28T12:31:18.247

这个主题的答案很老了，在 iOS8 和 iOS9 中不起作用。如果您仍然遇到所描述的问题，请查看以下主题：[UICollectionView and Supplementary View crash](https://stackoverflow.com/questions/32777059/uicollectionview-and-supplementary-view-crash/32822764#32822764)

**编辑**：

这是答案，以防链接失效：

如果您在集合视图中使用自定义布局，请检查其数据源是否为 nil：

```
- (NSArray *)layoutAttributesForElementsInRect:(CGRect)rect 
```

结果应如下所示：

```
- (NSArray *)layoutAttributesForElementsInRect:(CGRect)rect
    if (self.collectionView.dataSource != nil) {
        // Your layout code    
        return array;
    }
    return nil;
} 
```

此更改解决了以下问题：

> *   -[UICollectionView _createPreparedSupplementaryViewForElementOfKind:atIndexPath:withLayoutAttributes:applyAttributes:] 中的断言失败

您还可以检查以下主题，但在我的情况下它没有解决任何问题：

[如果部分标题隐藏在 UICollectionView 中，则删除空白区域](https://stackoverflow.com/questions/20042900/removing-empty-space-if-the-section-header-is-hidden-in-the-uicollectionview)

希望它会帮助你，你不会像我那样浪费太多时间。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-05T18:06:03.270

我清理了我的代码并删除了我在 IB 中创建的 UICollectionView 并在代码中创建了它。我再次运行它并得到一个不同的错误，并意识到我没有在 IB 中设置委托或数据源。我做了：

```
self.collectionView.delegate = self;
self.collectionView.datasource = self; 
```

但这一定还不够好。

因此，在 IB 中创建 UICollectionView 而不是在 IB 中设置 delgate/数据源，而是在代码中：

```
[self.view bringSubviewToFront:self.collectionView];
self.collectionView.collectionViewLayout = collectionViewFlowLayout;
self.collectionView.backgroundColor = [UIColor orangeColor];
self.collectionView.delegate = self;
self.collectionView.dataSource = self;

[self.collectionView registerClass:[DatasetCell class] forCellWithReuseIdentifier:@"cvCell"];

[self.collectionView registerClass:[CollectionHeaderView class] forSupplementaryViewOfKind:UICollectionElementKindSectionHeader withReuseIdentifier:@"CollectionHeaderView"]; 
```

是一个问题。我重做了它以在代码中创建 UICollectionView：

```
UICollectionView *collectionView = [[UICollectionView alloc] initWithFrame:CGRectZero collectionViewLayout:collectionViewFlowLayout];
collectionView.translatesAutoresizingMaskIntoConstraints = FALSE;
collectionView.backgroundColor = [UIColor yellowColor];
collectionView.delegate = self;
collectionView.dataSource = self;

[collectionView registerClass:[DatasetCell class] forCellWithReuseIdentifier:@"cvCell"];

[collectionView registerClass:[CollectionHeaderView class] forSupplementaryViewOfKind:UICollectionElementKindSectionHeader withReuseIdentifier:@"CollectionHeaderView"];

[self.view addSubview:collectionView];

self.collectionView = collectionView; 
```

我得到一个不同的错误：

```
*** Assertion failure in -[UICollectionView _dequeueReusableViewOfKind:withIdentifier:forIndexPath:], /SourceCache/UIKit_Sim/UIKit-2380.17/UICollectionView.m:2249
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'could not dequeue a view of kind: UICollectionElementKindSectionHeader with identifier CollectionHeaderView - must register a nib or a class for the identifier or connect a prototype cell in a storyboard' 
```

我会试着弄清楚。

编辑：

想通了，我错误地注册了标题：

```
[collectionView registerClass:[CollectionHeaderView class] forSupplementaryViewOfKind:UICollectionElementKindSectionHeader withReuseIdentifier:@"CollectionHeaderView"]; 
```

切换到：

```
UINib *headerNib = [UINib nibWithNibName:@"CollectionHeaderView" bundle:nil];

[collectionView registerNib:headerNib forSupplementaryViewOfKind:UICollectionElementKindSectionHeader withReuseIdentifier:@"CollectionHeaderView"]; 
```

一切正常。不完全确定它`registerClass:`是如何不起作用的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T17:50:11.423

如果您查看错误消息，它表示未设置数据源。这应该解决它：

`self.collectionView.dataSource = self;`

确保您的视图控制器实现数据源协议：

`YourViewController : UIViewController<UICollectionViewDataSource>`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-28T14:51:55.910

我也遇到了这个烦人的错误：

```
*** Assertion failure in -[UICollectionView _createPreparedSupplementaryViewForElementOfKind:atIndexPath:withLayoutAttributes:applyAttributes:], /SourceCache/UIKit/UIKit-3347.44/UICollectionView.m:1400
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'UICollectionView dataSource is not set' 
```

我发现有些人通过这样做来解决这个错误

```
- (void)dealloc {
    self.collectionView = nil;
} 
```

或迅速：

```
deinit {
    collectionView = nil
} 
```

但是这些都没有解决我的崩溃。我尝试了一些方法，下面的“hack”解决了这个烦人的错误：

```
func collectionView(collectionView: UICollectionView, layout collectionViewLayout: UICollectionViewLayout, referenceSizeForHeaderInSection section: Int) -> CGSize {
    if collectionView.dataSource != nil {
        return someHeaderSize
    } else {
        return CGSizeZero
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-11-10T02:00:13.237

此答案类似于您创建检查数据源的方法的其他答案，但它更简单一些。似乎这个问题与集合发布后集合视图的布局有关。所以我将布局的属性归零，如下所示，错误消失了。

```
deinit {
    let layout = self.collectionView.collectionViewLayout as! UICollectionViewFlowLayout
    layout.estimatedItemSize = CGSizeZero
    layout.sectionInset = UIEdgeInsetsZero
    layout.headerReferenceSize = CGSizeZero
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-06-24T14:56:11.420

我遇到了同样的问题，同样，我没有正确注册标题。这里有几个线程都建议使用 Nib 来定义标题，但我做了不同的事情并且工作正常。

我有一个自定义标头 SizeCollectionHeader，它继承了 UICollectionReusableView。它是这样注册的。

```
 [self.collectionView registerClass:[GRSizeCollectionHeader class] forSupplementaryViewOfKind:@"UICollectionElementKindSectionHeader"
                                                                             withReuseIdentifier:@"SupplementaryViewIdentifier"]; 
```

并且工作正常。

我最初的问题是有一个像这样的随机“Kind”值。

```
 [self.collectionView registerClass:[GRSizeCollectionHeader class] forSupplementaryViewOfKind:@"SupplementaryViewKind"
                                                                             withReuseIdentifier:@"SupplementaryViewIdentifier"]; 
```

这会崩溃。

所以我只是想为任何在这里寻找你不需要使用笔尖的人发表评论。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-10-08T13:20:15.053

尝试这个 ：

```
self.collectionView?.dataSource = nil
self.collectionView = nil 
```

它对我有用；）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-01-02T20:34:46.017

我一直收到同样的错误。我已经为我的 collectionView 设置了 CustomHeaderView。我将 Collection Reusable View 类放到了我的 CustomHeaderView 中，并且我已经设置了标识符。我花了 1/2 小时试图找出失败的原因。

> 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“无法使一种视图出列：带有标识符 SectionHeader 的 UICollectionElementKindSectionFooter - 必须为标识符注册一个 nib 或一个类或连接故事板中的原型单元格”

您需要仔细阅读日志......吸取的教训。

> '不能出列同类视图：UICollectionElementKindSectionFooter

原因是因为在故事板中 - 在 collectionView 身份检查器中，我检查了两个附件：部分页眉和部分页脚。我只需要节标题。只需取消选中页脚...构建并运行..BOOM！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-09-27T07:18:55.503

一个 iOS9 的 bug，在 viewcontroller 的 dealloc 中设置层委托 nil。

```
- (void)dealloc{

    if ([[[UIDevice currentDevice] systemVersion] hasPrefix:@"9"]) {
        self.collectionView.layer.delegate = nil;
    }
} 
```

# javascript - 在 iframe 中使用 Javascript 来定位主页

> ID：15229538
> 
> 赞同：0
> 
> 时间：2013-03-05T16:50:46.527
> 
> 标签：javascript, iframe

我正在阅读这个问题，但我的脚本仍然无法正常工作： [在 iframe 中运行的 javascript 会影响主页吗？](https://stackoverflow.com/questions/951946/can-javascript-running-inside-an-iframe-affect-the-main-page)

我有我的主页 test.php

```
<div id="testfield">Some text here</div> 
<iframe id="upload_target" name="upload_target" src="" style="..."></iframe> 
```

在 iframe 页面中，我有一个按钮，应该删除主页上 div 中的内容。

```
<button onclick="goNow();">TEST ME</button> 
```

这是按下按钮时触发的 Javascript 部分：

```
function goNow() {
parent.getElementById('testfield').innerHTML = '';
} 
```

这一切都适用于 document.getElementById 的一个页面，但是一旦我使用 iframe 和 parent.getElementById 它就会返回一个错误：

```
Error: Object doesn't support property or method 'getElementById' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T16:52:18.680

`parent`指父*窗口*。然后，您需要获取该窗口的文档才能继续。

```
parent.document.getElementById('testfield').innerHTML = ""; 
```

# asp.net - 未找到网络资源

> ID：15229540
> 
> 赞同：0
> 
> 时间：2013-03-05T16:50:48.470
> 
> 标签：asp.net, updatepanel, webresource.axd

我花了最后一天试图让复选框验证器工作。我在 4GuysFromRolla 网站上找到了一些起始代码，但这是在 2006 年编码的，不能与更新面板一起使用。

我已经进行了更改，现在它可以工作了。由于我做了很多更改，因此我想对其进行标准化并将其与其他实用程序类一起使用，因此我创建了一个新的类项目并逐字复制代码。

问题是原来的作品，但我在我的新课程项目中得到一个 WebResource not found 错误。

不同之处在于： 最初是一个 Web 应用程序项目：

*   我的新项目只是一个类库项目。
*   原始程序集和命名空间已更改。

都包含单个类和资源文件（.js） 两个资源文件都包含在根目录中 两个资源文件都设置为嵌入资源

我已经没有想法了，并且已经用尽了我在网上找到的答案，但没有成功。

它是一个类库这一事实是否存在问题？我可能忽略了别的东西吗？

除了这两个问题之外，很难看到它，因为这个项目是如此之小而且微不足道。

这是有效的代码：

```
 if (this.RenderUplevel && this.Page != null)
    {
        ScriptManager.RegisterClientScriptResource(Page, this.GetType(), "skmValidators.skmValidators.js");
    } 
```

这是没有的代码：

```
 if (this.RenderUplevel && Page != null)
    {
        ScriptManager.RegisterClientScriptResource(Page, this.GetType(), "ValidationExtender.EvaluationFunctions.js");
    } 
```

有人给出任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:20:19.780

错误原来是测试页面中的 dll 不匹配。

# c - C Short 到 Int 的转换

> ID：15229545
> 
> 赞同：2
> 
> 时间：2013-03-05T16:51:00.263
> 
> 标签：c, type-conversion

我得到了一些看起来像这样的代码：

```
unsigned int x = 0xDEADBEEF;
unsigned short y = 0xFFFF;
if (x > (signed short) y)
    printf("Hello"); 
```

但是，`x > y`当`y`被强制转换为有符号短整数（然后在比较中隐式转换为无符号整数）时，它采用 MAX_UINT 的值是不正确的。为什么会这样？是否`y`正在延长标志，或者还有什么会导致这种奇怪的行为？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T16:54:51.387

对于不适合有符号类型的正值的值，无符号到有符号的转换是实现定义的。在这里，对于您的特定编译器，结果可能是`-1`，然后转换为 unsigned is `UINT_MAX`。

# perl - 包含 perl 模块时的搜索顺序问题

> ID：15229546
> 
> 赞同：0
> 
> 时间：2013-03-05T16:51:13.900
> 
> 标签：perl, perl-module

这个问题是对以下问题的跟进： [当一个模块被加载时，perl 的包含路径中的搜索顺序是什么](https://stackoverflow.com/questions/8357477/whats-the-search-order-of-perl-include-path-when-a-module-is-loaded)？

我在两个单独的文件夹中安装了模块 IO 的 2 个版本（1.22 和 1.25）：

`/some_path/lib/perl5/x86_64-linux-thread-multi/`（对于 IO.pm 版本 1.25）和 `/usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/`（对于 IO.pm 版本 1.22）

@INC 列表如下所示：

```
/some_path/lib/perl5/x86_64-linux-thread-multi/
/usr/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/  
/usr/lib/perl5/site_perl/5.8.8/  
/usr/lib/perl5/site_perl/  
/usr/lib64/perl5/vendor_perl/5.8.8/x86_64-linux-thread-multi/  
/usr/lib/perl5/vendor_perl/5.8.8/  
/usr/lib/perl5/vendor_perl/  
/usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/  
/usr/lib/perl5/5.8.8/  
. 
```

当我尝试`perl -e 'use IO'`时，perl 返回以下错误消息：
IO object version 1.22 does not match bootstrap parameter 1.25 at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/DynaLoader.pm line 253。这表明使用 IO 模块版本 1.22 而非 IO 版本 1.25，即使应首先定位 IO 版本 1.25。

知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T17:34:13.637

您的 IO 安装错误。

`perl``IO.pm`正在`/some_path/lib/perl5/x86_64-linux-thread-multi/`按预期找到 1.25 ，但`auto/IO/IO.so`它找到的第一个是 1.22（在`/usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/`？）

# javascript - javascript在另一个函数中使用一个函数的返回

> ID：15229553
> 
> 赞同：-3
> 
> 时间：2013-03-05T16:51:23.270
> 
> 标签：javascript, variables, scope, hoisting

我有一个函数 A，它在内部使用函数 B，我想在函数 A 内部使用函数 B 的返回变量，但它总是给我未定义的。

我在网上搜索了很多答案，但我越来越绝望。

```
function initialize() {
  geocoder = new google.maps.Geocoder();

    var latlng = new google.maps.LatLng(40.714352, -74.005973);

    ....

    }
    map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);
    **latlng=codeAddress("lisboa")**;

  }

function codeAddress(a) {

    geocoder.geocode( { 'address': a}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {

      latlong=results[0].geometry.location;

        alert(latlong);
        return latlong;

      } else {
        alert('Geocode was not successful for the following reason: ' + status);
      }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:02:23.630

您需要使用回调来处理结果：

```
function initialize() {
    .... // your code
codeAddress(function(res){
    alert(res);
});         

function codeAddress(callback) {
      var latlng = new google.maps.LatLng(40.714352, -74.005973);
      geocoder.geocode({'latLng': latlng}, function(res, sta) {
      if (sta== google.maps.GeocoderStatus.OK) 
      {
        if (res[1]) 
            callback(res[1].formatted_address);
        else 
            alert("Nothing found");
      }

  });
}
} 
```

# apache-zookeeper - 如何从文件创建 Zookeeper 节点？

> ID：15229554
> 
> 赞同：2
> 
> 时间：2013-03-05T16:51:28.470
> 
> 标签：apache-zookeeper

使用 zkCli.sh，

创建 -s /myznode “Hello World！” 空值

使用字符串“Hello World!”创建一个 znode

如何让它使用文件的内容而不是字符串？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-12-07T13:52:09.493

对于包含空格或换行符的多行文件，请尝试以下操作：

```
./bin/zkCli.sh create /test-node "`cat my-znode-content.xml`" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-03-13T06:51:25.217

在 zk 节点上设置一些数据

```
./bin/zkCli.sh -server 172.26.65.11:2181 set /path "\`cat employee.xml\`" 
```

或者

```
./bin/zkCli.sh -server 172.26.65.11:2181 set /path "\`echo 'Node data is set.'\`" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T16:44:11.040

如果您查看 ZooKeeperMain.java，您会发现它在命令行上的唯一参数是服务器主机和要连接的端口。

如果您然后查看方法 processZKCmd()，您会发现它只接受顺序和短暂的参数。

但是，您可以将输入发送到命令，例如 ./zkCli.sh < script

其中脚本包含“创建 mynode null”

从那里创建一个输入文件并不长，该文件本身是从文件的内容创建的。例如：

```
echo "create `cat myfile` > script; ./zkCli.sh < script 
```

请记住，zk 节点的大小应该相当小。

# vim - 如何在 Vim 中将当前选择“放入”*？

> ID：15229558
> 
> 赞同：0
> 
> 时间：2013-03-05T16:51:35.973
> 
> 标签：vim

好吧，标题肯定需要改进，但你们这些 Vimmers 可能已经知道我的目标是什么了。

我最近发现自己`*`经常使用 Vim 的功能（`*`按键快进搜索某些单词）。有没有办法将当前的视觉选择（通常由两个或三个单词组成）放入 with`*`然后使用`*`键来切换缓冲区？

*问题主体是goona也需要一些工作:-)*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T17:07:15.267

您可以使用附带的命令，`vim`就像：

```
:vmap X y/<C-R>"<CR> 
```

这是什么意思？

在可视模式下选择一些文本，按下`X`，地图将其拉到未命名的寄存器 ( `y`)，开始搜索命令 ( `/`)，将未命名寄存器的内容拉到要搜索的文本 ( `<C-R>"`) 并开始搜索`<CR>`。在它之后，您可以使用常见`*`的以下术语。

# java - 关闭JDialog时JDialog内部的javax.swing.Timer不会停止

> ID：15229560
> 
> 赞同：4
> 
> 时间：2013-03-05T16:51:41.407
> 
> 标签：java, swing, timer, jdialog, windowlistener

我有一个带有主 JFrame 的小型应用程序，它以模态形式打开 JDialog。在这个 JDialog 中，我启动了一个 javax.swing.Timer，如果 JDialog 关闭，它应该停止。

```
public Tasks() {
    setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
    setBounds(100, 100, 800, 600);
    contentPane = new JPanel();
    contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
    contentPane.setLayout(new BorderLayout(0, 0));
    setContentPane(contentPane);

    showTasks();

    t = new Timer(10000, new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            Tasks.this.showTasks();
        }
    });
    t.start();

} 
```

但它只是继续运行。

我试图为 JDialog 实现 WindowListener 并且我覆盖了 windowClosed、windowClosing 甚至 windowDeactivated ... 无济于事

```
@Override
public void windowClosing(WindowEvent e) {
    // TODO Auto-generated method stub
    System.out.println("Closing");
    t.stop();
} 
```

如何在 JDialog 关闭时停止计时器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T17:00:53.163

我`WindowListener`在这个例子中添加了一个，它似乎工作。

```
this.addWindowListener(new WindowAdapter() {

    @Override
    public void windowClosing(WindowEvent e) {
        System.out.println(e);
    }
}); 
```

# ruby-on-rails - 使用 rails composer 创建了应用程序，但无法在应用程序目录中启动 rails

> ID：15229580
> 
> 赞同：0
> 
> 时间：2013-03-05T16:52:37.150
> 
> 标签：ruby-on-rails, ubuntu

使用 Rails Composer ( [http://railsapps.github.com/rails-composer/](http://railsapps.github.com/rails-composer/) ) 我创建了一个新应用程序，但我无法在新创建的应用程序目录中运行 rails，即使 rails 可以在其他任何地方运行。

```
user@UBUNTU:~$ rails
Usage:
rails new APP_PATH [options] ...

user@UBUNTU:~$ cd myapp/
user@UBUNTU:~/myapp$ rails
The program 'rails' can be found in the following packages: ... 
```

使用 Ubuntu 12.10 和 rvm

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:58:03.553

你在运行 RVM 吗？如果是这样，是否有一个绑定到 gemset 的 .rvmrc 文件？如果是这种情况，则该 gemset 中可能没有 rails gem。

键入`rvm gemset list`以查看已创建的 gemset。

# r - Compute cosine similarities between documents in semantic space, using R-lsa package

> ID：15229584
> 
> 赞同：2
> 
> 时间：2013-03-05T16:52:43.530
> 
> 标签：r, cluster-analysis, text-mining, trigonometry, lsa

I'm trying to cluster similar documents using the R language. As a first step, I compute the term-document matrix for my set of documents. Then I create the latent semantic space for the term-document matrix previously created. I decided to use use LSA in my expriment because the results of clustering using just the term-document matrix were awful . Is possible to build a dissimilarity matrix (with cosine measure) using the the LSA space created? I need to do this because the clustering algorithm that I'm using requires a dissimilarity matrix as input.

Here is my code:

```
require(cluster);
require (lsa);

myMatrix = textmatrix("/home/user/DocmentsDirectory");
myLSAspace = lsa(myMatrix, dims=dimcalc_share()); 
```

I need to build a dissimilarity matrix (using cosine measure) from LSA space, so I can call the cluster algorithm as follows:

```
clusters = pam(dissimilartiyMatrix,10,diss=TRUE); 
```

Any suggestions?

Thanks in advance!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-26T17:57:46.480

`$sk`要比较 LSA 空间中的两个文档，您可以取和返回的`$dk`矩阵的叉积，`lsa()`以获得低维 LSA 空间中的所有文档。这是我所做的：

```
lsaSpace <- lsa(termDocMatrix)

# lsaMatrix now is a k x (num doc) matrix, in k-dimensional LSA space
lsaMatrix <- diag(lsaSpace$sk) %*% t(lsaSpace$dk)

# Use the `cosine` function in `lsa` package to get cosine similarities matrix
# (subtract from 1 to get dissimilarity matrix)
distMatrix <- 1 - cosine(lsaMatrix) 
```

请参阅[http://en.wikipedia.org/wiki/Latent_semantic_analysis](http://en.wikipedia.org/wiki/Latent_semantic_analysis)，其中说您现在可以使用 LSA 结果“通过比较向量 sk*d_j 和 sk*d_q 来查看相关文档 j 和 q 在低维空间中的情况（通常通过余弦相似度）。”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T17:09:39.507

您可以使用 package `arules`，这里是一个例子：

```
 library(arules)
 dissimilarity(x=matrix(seq(1,10),ncol=2),method='cosine')
          1         2         3         4
2 -4.543479                              
3 -4.811989 -5.231234                    
4 -5.080052 -5.563952 -6.024433          
5 -5.343350 -5.885304 -6.395740 -6.877264 
```

# vb.net - Visual Basic / ASMX - how to use application cache variable?

> ID：15229588
> 
> 赞同：0
> 
> 时间：2013-03-05T16:52:49.757
> 
> 标签：vb.net, caching, asmx

I'm trying to amend our content management system so it'll handle SQL database failures more gracefully. It's a bunch of ASMX pages, and a Helpers.vb file in which I've written a SQL connection tester function. Each of the ASMX pages call the same function.

I need to create a variable I can check that's persistent and performant, otherwise I'm going to have fall back on something disasterously slow like reading a text file every time I set up a sql connection string.

I've tried using application caching, but either it doesn't work in the context of my helpers.vb file, or I've made a mess of the syntax. One problem that's already stymied some of the approaches I've found via google - I can't use 'Import System.Web.Caching' - IntelliSense doesn't show the 'Caching' part.

Has anyone got any example code that might get me up and running? Or an alternative approach?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T11:30:42.570

@麦克风，

非常感谢，现在我正在正确使用 HttpRuntime.Cache ......它有效！

感谢大家花时间发帖：）

# python - Why does this not transition a jira to resolved?

> ID：15229589
> 
> 赞同：3
> 
> 时间：2013-03-05T16:52:50.473
> 
> 标签：python, api, rest, jira

```
updated_issue = jira.transition_issue(origin_issue.key,
                                                 '5',
                                                 {'id': 'Resolution',
                                                  'values': '6'}
                                                ) 
```

In this case I am talking to JIRA 5.1.5 through the jira-python library and their transition_jira method. In this case '5' means resolve jira and '6' is the new status that updated jira will have '6' means DELIVERED ...

I try this code and the jira does not change the resolution field from unresolved to delivered

The error that I get is : u'Field \'id\' cannot be set. It is not on the appropriate screen, or unknown.'

Why?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T07:23:38.337

您是否尝试过以下设置：

```
updated_issue = jira.transition_issue(origin_issue.key,
                                             '5',
                                             {'id': '6'}
                                            ) 
```

我基于最近的[JIRA REST API 文档](https://docs.atlassian.com/jira/REST/latest/#idp1804224)，它使用以下 JSON 脚本：

```
{
"update": {
    "comment": [
        {
            "add": {
                "body": "Bug has been fixed."
            }
        }
    ]
},
"fields": {
    "assignee": {
        "name": "bob"
    },
    "resolution": {
        "name": "Fixed"
    }
},
"transition": {
    "id": "5"
} 
```

}

# c# - Drag and drop mouse capture

> ID：15229599
> 
> 赞同：1
> 
> 时间：2013-03-05T16:53:20.757
> 
> 标签：c#, .net, winforms, drag-and-drop, panel

I got a `Panel` and inside it some drag and drop operations of custom controls, when the dragging begins I do `panel.Capture = True;` for the panel to fire the proper events even when the user releases the left mouse button outside the panel bounds (e.g.: `panel_DragDrop`) but the `DragDrop` event isn't getting fired unless the left mouse button is released while the cursor is located within the bounds of the panel.

I thought `panel.Capture` would solve this but it's not doing any effect. Any ideas what am I missing here?

Edit: Ok I think I know what I have to do now. I think I had a misunderstanding of the DragDrop event. What I have in my application is dragging of controls inside the panel only ( think of it as moving blocks ), while the user is dragging a block and goes out of bounds, I auto scroll, if the cursor goes outside the panel, the `panel_DragDrop` never gets called and the placement of the block doesn't take place if the mouse gets released. I think my solution is this: `Cursor.Clip = panelDiagram.RectangleToScreen(panelDiagram.ClientRectangle);`

This will make the cursor bound to the panel boundaries while dragging, so no way to take the cursor off bounds.

Sorry for any troubles

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:59:42.930

我刚刚创建了一个只有一个表单和一个面板的小测试项目，这对我有用：

```
using Microsoft.VisualBasic;
using System;
using System.Collections;
using System.Collections.Generic;
using System.Data;
using System.Diagnostics;
public class Form1
{

    public Form1()
    {
        DragDrop += DD;
        DragEnter += Panel1DragEnter;
        // This call is required by the designer.
        InitializeComponent();

        // Add any initialization after the InitializeComponent() call.
        Panel1.AllowDrop = true;
        AllowDrop = true;

    }

    private void Panel1DragEnter(System.Object sender, System.Windows.Forms.DragEventArgs e)
    {
        if (object.ReferenceEquals(sender, Panel1)) {
            Panel1.Capture = true;
        }

        if (Panel1.Capture) {
            if ((e.Data.GetDataPresent(DataFormats.FileDrop))) {
                e.Effect = DragDropEffects.Copy;
            } else {
                e.Effect = DragDropEffects.None;
            }
            Panel1.Capture = true;
        }

    }

    private void DD(object sender, DragEventArgs e)
    {
        if (Panel1.Capture) {
            Interaction.MsgBox("dropped");
        }
        Panel1.Capture = false;
    }

} 
```

一旦你拖过面板，它就会被捕获，但主窗体仍然需要有拖放处理程序

# javascript - 根据当前部分分配索引#

> ID：15229600
> 
> 赞同：2
> 
> 时间：2013-03-05T16:53:21.200
> 
> 标签：javascript, jquery, jquery-ui, jquery-animate

假设我的总宽度为 585px。我想将空间分成相等的部分，并在位置内为每个部分分配一个索引值。如果我说 6 个部分，我可以做这样的事情：（按总宽度/部分数分配）

```
 //Set up elements with variables
            this.sliderContent = config.sliderContent;
            this.sectionsWrap = config.sectionsWrap;

            //Selects <a>
            this.sectionsLinks = this.sectionsWrap.children().children();

            //Create drag handle
            this.sectionsWrap.parent().append($(document.createElement("div")).addClass("handle-containment")
                                      .append($(document.createElement("a")).addClass("handle ui-corner-all").text("DRAG")));

            //Select handle
            this.sliderHandle = $(".handle");

var left = ui.position.left,
    position = [];

var position = ((left >= 0 && left <= 80) ? [0, 1] :
    ((left >= 81 && left <= 198) ? [117, 2] :
    ((left >= 199 && left <= 315) ? [234, 3] :
    ((left >= 316 && left <= 430) ? [351, 4] :
    ((left >= 431 && left <= 548) ? [468, 5] :
    ((left >= 549) ? [585, 6] : [] ) ) ) ) ) );

        if (position.length) {
            $(".handle").animate({
                left : position[0]
            }, 400);
            Slider.contentTransitions(position);
        } 
```

但是，如果我有 x 个部分怎么办。这些部分只是像

```
<li><a></a></li>
<li><a></a></li>
<li><a></a></li> 
```

或者

```
<div><a></a></div>
<div><a></a></div>
<div><a></a></div>
<div><a></a></div> 
```

我将如何划分 585px 的总数并根据`.handle`元素的当前左值对位置的索引进行分类？我可以通过使用知道拖动手柄的位置`ui.position.left`，我想要的是能够为每个元素设置一个索引，并能够根据手柄在索引元素中的位置为手柄设置动画。由于每个元素都有索引，我稍后调用一个转换方法并传入当前索引 # 以显示。我上面显示的代码有效，但效率不高。我还需要考虑手柄的宽度以适应截面宽度。[http://jsfiddle.net/yfqhV/1/](http://jsfiddle.net/yfqhV/1/)

![我做的例子](../Images/b6f2e38aa6b1a40eb324be563408091f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T17:36:47.520

```
var numSections = // ...;
var totalWidth = // ...;
var sectionWidth = totalWidth / numSections;
var index = Math.floor($(".handle").position().left / sectionWidth);
var leftPosition = index * sectionWidth;
var rightPosition = leftPosition + sectionWidth - 1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T11:58:29.890

好的，问题中的范围数字之间的差异略有不一致，这使得算法很难准确地 [my *made-up-word de jour* =)]：

*   81 到 199 = 118
*   199 到 316 = 117
*   316 到 431 = 115
*   431 到 518 = 118

如果您可以对此进行调整，我有一个解决方案 - 它不是特别聪明的 JavaScript，因此可能有更好的方法来做到这一点（SO JS 人，请随时教育我！）但它确实有效。

首先，我们需要一个函数来查找数组范围的索引，给定的值落在其中（这将替换嵌套的 if-else 简写），然后我们有一个函数来设置位置数组，最后我们可以进行范围搜索并返回相应的值数组。

此解决方案应动态处理不同数量的部分，只要此行：

```
var len = $("#sectionContainer").children().length; 
```

作相应调整。可能需要调整的唯一其他值是：

```
 var totalWidth = 585;
    var xPos = 81; 
```

尽管如果您有可以从中提取值的元素，则可以设置它们，使其更像是一种动态解决方案。

```
/**
 * function to find the index of an array element where a given value falls
 * between the range of values defined by array[index] and array[index+1]
 */
function findInRangeArray(arr, val){
  for (var n = 0; n < arr.length-1; n++){

      if ((val >= arr[n]) && (val < (arr[n+1]))) {
          break;
      }
  }
  return n;
}

/**
 * function to set up arrays containing positional values
 */
function initPositionArrays() {
    posArray = [];
    leftPosArray = [];

    var totalWidth = 585;
    var xPos = 81;

    var len = $("#sectionContainer").children().length;
    var unit = totalWidth/(len - 1);

    for (var i=1; i<=len; i++) {
      pos = unit*(i-1);
      posArray.push([Math.round(pos), i]);
      xMin = (i >= 2 ? (i==2 ? xPos : leftPosArray[i-2] + posArray[1][0]) : 0);
      leftPosArray.push(Math.round(xMin));
    }
}

var left = ui.position.left;

initPositionArrays();

// find which index of "leftPosArray" range that "left" falls within
foundPos = findInRangeArray(leftPosArray, left);
var position = posArray[foundPos];

if (position.length) {
  $(".handle").animate({
    left : position[0]
  }, 400);
  Slider.contentTransitions(position);
} 
```

我已经设置了一个[jsFiddle](http://jsfiddle.net/raad/AshG5/7/)来说明。

享受！

* * *

**编辑**

我查看了@JonnySooter 自己的答案，虽然它正确计算了定位，但它不会处理可变数量的部分。

为了让它与*任意*数量的部分一起工作，`handleContainment`div（即动态创建）需要动态设置它的宽度（通过内联样式）。
这是通过将节数乘以每个节的宽度（实际上与滑块的宽度相同）来计算的。
这一切都是在创建句柄之后完成的，以便可以从“句柄”css 类中提取宽度，这意味着当在 css 级别应用时，对句柄宽度的更改将级联到例程中。

请参阅此[jsFiddle](http://jsfiddle.net/raad/DfM5F/48/)，其中可以更改部分的数量并且滑块的行为正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T15:32:57.570

**更新**：

我努力自己寻找解决方案，这就是我想出的：

```
function( event, ui ) {
    var left = ui.position.left, //Get the current position of the handle
        self = Slider, //Set to the Slider object cus func is a callback
        position = 1;
        sections_count = self.sectionsLinks.length, //Count the sections
        section_position = Math.floor(self.sectionsWrap.width() / sections_count); //Set width of each section according to total width and section count

    left = Math.round(left / section_position); //Set the index
    position = (left * section_position); //Set the left ammount

    if(position < section_position){ //If handle is dropped in the first section
        position = 0.1; //Set the distance to animate
        left = 0; //Set index to first section
    }

    if (position.length) {
        $(this).animate({
            left : position //Animate according to distance
        }, 200);
        left = left += 1; //Add one to the index so that I can use the nth() child selector later.
        self.contentTransitions(left);
    }
} 
```

# jqgrid - Refreshing entire page jqGrid paging

> ID：15229601
> 
> 赞同：-1
> 
> 时间：2013-03-05T16:53:35.623
> 
> 标签：jqgrid

When a user double clicks on a row on my page, I navigate them to an edit screen which shows them some important information. When they submit that patient I gerimander jqGrid to take them page to the page that they were just viewing...

```
 serializeGridData: function (postData) {
                //debugger;
                var pagInfo = $(this).se
                debugger;
                if ((rowFromTemp != "") && (pageFromTemp != "")) {
                    //debugger;
                    postData.page = pageFromTemp;
                    pageFromTemp = "";
                    rowFromTemp = "";                        
                }
                return postData;
            }, 
```

I basically edited the postData in the serializeGridData function.

My question is, when I navigate to a different page lets say page 3 of 10 after I have edited information and returned to the correct page, when I click refresh of the whole page...

I want the user to return to the page that they just navigated to. Right now, it will return them back to the page that they initially returned from after editing information. So If I were to construct a timeline of events...

1) user see's paged information... 2) user selects row to edit 3) user navigates to edit page and does his thing then submits 4) user now is sent back to page where he came from... 5) user goes to a different page (either next or last) 6) user refreshes page 7) !! user is sent to page X from step 3 and 4 and Not 5 !!

I was hoping to to some kind of refresh of page event and set the correct page in there.
Is my methodology or thinking in correct here? Is there a way to ensure that the correct page is selected no matter what?

I just checked again. It would seem that if a user 1) navigates to page X 3) refreshes a page

he will be sent to page 1\.

Maybe I am setting an unrealistic expectation. Maybe if they reload the whole page, they should expect to go back to page 1.

Well even so, how could I accomplish that task with the first workflow ![enter image description here](../Images/927724e98fcc46dfb96f1b3d4d8c0056.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:20:53.260

在我看来，您遇到的真正问题是第 3 步的使用：“用户导航到编辑页面并做他的事情然后提交”。该步骤使您尝试解决的所有问题。无需转到**另一**页，您可以动态创建一些允许编辑所选行的控件。jqGrid 为此目的提供[内联编辑](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3ainline_editing)或[表单编辑](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aform_editing)。您只需`editable: true`在需要编辑的列中包含属性即可在选择行或双击时实现内联/表单编辑的开始。或者，您可以使用导航栏中的按钮（请参阅[navGrid](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3anavigator#definition)和[inlineNav](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3ainline_editing#inlinenav)）或网格的其他列（请参阅`formatter: "actions"`）。

如果您仍然不想使用任何提供 jqGrid 的编辑模式，您可以将主页正文的全部内容放在 div 中。您可以使用 jQuery.hide 隐藏 div，而不是重定向到“编辑页面”。您可以在同一主页上加载“编辑页面”的内容（例如每个 jQuery.load）。然后您可以删除加载的“编辑页面”并显示原始主页。结果，主页将以与开始编辑之前完全相同的形式显示。

# php - 为什么 Dojo 应用程序可能会尝试从 Firefox 中的 googleapis 而不是 Chrome 中错误地检索文件？

> ID：15229606
> 
> 赞同：1
> 
> 时间：2013-03-05T16:53:49.437
> 
> 标签：php, ajax, google-chrome, firefox, dojo

我正在维护一个使用 Dojo 的旧 PHP 应用程序。在 Chrome 上，所有负载都很好，但在 Firefox 上，循环中发生了四个“404 Not Found”错误。Firefox 尝试获取以下文件时发生错误：

```
http://ajax.googleapis.com/ajax/libs/dojo/1.5.1/src/namespaces/dojo.js
http://ajax.googleapis.com/ajax/libs/dojo/1.5.1/src/namespaces.js
http://ajax.googleapis.com/ajax/libs/dojo/1.5.1/src/__package__.js
http://ajax.googleapis.com/ajax/libs/dojo/1.5.1/src.js 
```

我说的是一个循环，因为在最后一个错误之后，Firefox 尝试再次获取[第一个](http://ajax.googleapis.com/ajax/libs/dojo/1.5.1/src/namespaces/dojo.js)，然后再次获取[第二个](http://ajax.googleapis.com/ajax/libs/dojo/1.5.1/src/namespaces.js)，以此类推。

是什么导致了这种疏远的行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:33:14.033

我知道这听起来很奇怪，但是在禁用[Awesome Screenshot Plus](https://addons.mozilla.org/en-US/firefox/addon/awesome-screenshot-capture-/) Firefox Add-On 后问题就消失了。

我得到这个解决方案是因为除了这个奇怪的问题之外，我在访问这个应用程序的页面时看到了一些对 superfish.com 的请求，这没有意义。那边的一些人说，对 superfish.com 的此类请求可能与某些附加组件的存在有关，然后，我开始禁用附加组件，直到找出有问题的附加组件。

我希望这可以帮助一些遇到我同样情况的人。

# symfony - 学说2 findby两列或条件

> ID：15229609
> 
> 赞同：6
> 
> 时间：2013-03-05T16:54:03.803
> 
> 标签：symfony, doctrine-orm, symfony-2.1

我的行动：

```
 $matches_request = $em->getRepository('Bundle:ChanceMatch')->findByRequestUser(1);
   $matches_reply = $em->getRepository('Bundle:ChanceMatch')->findByReplyUser(1); 
```

`or`是否可以使用 getRepository加入带有条件的查询，例如。

```
$matches_reply = $em->getRepository('FrontendChancesBundle:ChanceMatch')->findBy(array('requestUser' => 1, 'replyUser' => 1); 
//this of course gives me the a result when `requestUser` and `replyUser` is `1`. 
```

我的桌子

```
id | requestUser | replyUser
....
12 |      1      |     2
13 |      5      |     1 
```

我的查询应该返回`id 12 & 13`.

感谢帮助！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-05T19:05:07.730

您可以使用 QueryBuilder 或为该实体创建自定义存储库并创建内部使用 QueryBuilder 的函数。

```
$qb = $em->getRepository('FrontendChancesBundle:ChanceMatch')->createQueryBuilder('cm');
$qb
    ->select('cm')
    ->where($qb->expr()->orX(
        $qb->expr()->eq('cm.requestUser', ':requestUser'),
        $qb->expr()->eq('cm.replyUser', ':replyUser')
    ))
    ->setParameter('requestUser', $requestUserId)
    ->setParameter('replyUser', $replyUserId)
;
$matches_reply = $qb->getQuery()->getSingleResult();
// $matches_reply = $qb->getQuery()->getResult(); // use this if there can be more than one result 
```

有关自定义存储库的更多信息，请参阅官方文档：

[http://symfony.com/doc/2.0/book/doctrine.html#custom-repository-classes](http://symfony.com/doc/2.0/book/doctrine.html#custom-repository-classes)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-08T23:20:05.963

可以`Criteria`用于复杂的查询`getRepository()`：

```
$criteria = new \Doctrine\Common\Collections\Criteria();
$criteria
  ->orWhere($criteria->expr()->contains('domains', 'a'))
  ->orWhere($criteria->expr()->contains('domains', 'b'));

$domain->ages = $em
  ->getRepository('Group')
  ->matching($criteria); 
```

# forms - 如果属性名称不同，如何将表单字段绑定到模型？

> ID：15229611
> 
> 赞同：2
> 
> 时间：2013-03-05T16:54:06.447
> 
> 标签：forms, playframework-2.0, model-binding, playframework-2.1

我正在使用 Play Framework 2.1

我有来自外部系统的 POST 请求并试图将其绑定到我的模型，但模型属性的名称与请求中的参数名称不同：请求具有“body-plain”，模型具有“bodyPlain”等。我如何指示映射从表单名称到模型属性的名称？

我正在尝试像这样绑定模型：

```
Form<MailGunMessageData> mgDataForm = form(MailGunMessageData.class);
MailGunMessageData mgData = mgDataForm.bindFromRequest().get(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:47:28.510

您不需要每次都绑定，您也可以只使用`DynamicForm`然后绑定任何数据中的选定字段：

```
DynamicForm df = form().bindFromRequest();
MailGunMessageData mgData = new MailGunMessageData();

mgData.mail = df.get("email-address"); 
```

# wcf - 使用模块或插件从节点 js 调用 wcf webservice

> ID：15229617
> 
> 赞同：2
> 
> 时间：2013-03-05T16:54:24.017
> 
> 标签：wcf, node.js

我需要从 node js 调用 WCF dotnet webservice，你们中的任何人都可以推荐现在可用的最佳模块吗？

只是一些参考就足够了

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T17:07:34.380

如果这是一个简单的服务（简单的 xml，没有高级消息级别的安全性），那么我建议使用[request](https://github.com/mikeal/request)发送原始 Xml 。

如果 xml 很复杂，那么您可以使用[node-soap](https://github.com/milewise/node-soap)。

如果存在消息级安全性，请使用[wcf.js](https://github.com/yaronn/wcf.js)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T19:05:47.583

如果 WCF 服务有一个返回 JSON 的端点，您应该能够使用基本的 node.js HTTP 请求来访问它。

下面是执行从节点发出 HTTP 请求的简单示例。这应该让你开始。将“www.google.com”替换为 WCF 服务器所在的服务器的名称，并更新指向 svc 文件的路径：

```
var http = require('http');

var options = {
  hostname: 'www.google.com',
  port: 80,
  path: '/',
  method: 'GET'
};

var req = http.request(options, function(res) {
  console.log('STATUS: ' + res.statusCode);
  console.log('HEADERS: ' + JSON.stringify(res.headers));
  res.setEncoding('utf8');
  res.on('data', function (chunk) {
    console.log('CHUNK: ' + chunk);
  });
  res.on('end', function () {
    console.log('DONE');
  });

});

req.on('error', function(e) {
  console.log('problem with request: ' + e.message);
});

req.end(); 
```

# menu - Changing what is in the love.load function

> ID：15229622
> 
> 赞同：3
> 
> 时间：2013-03-05T16:54:36.947
> 
> 标签：menu, lua, love2d

My friend and I have been working on a game in love2d recently, but in the early stages of developing my computer hard drive stopped working meaning only my friend could work on it. Now I have a computer and I want to make a main menu in Love2d but There is alot of code in the love.load function (generation of the world and such). My question is can I change what is in love.load when the game is running? e.g The main menu loads up, then the generation of the world loads up when the start button is pressed.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T17:50:02.660

该`love.load`函数只运行一次。正如您所提到的，它通常用于设置数据结构和预加载其他资源。您可以使用它来处理世界预加载和菜单预加载。然后，通过某种状态控制什么是活动的。一个简化的例子：

```
local state = "menu"

function love.load()
    preLoadMenu()
    preLoadWorld()
end

function love.update(dt)
    if state == "menu" then
        updateMenu()
    else
        updateWorld()
    end
end

function love.draw()
    if state == "menu" then
        drawMenu()
    else
        drawWorld()
    end
end

function love.mousepressed(x, y, button)   
    if startClicked(x,y,button) then
        state = "world"
    end
end 
```

可以想象，您绝对不想在加载时为您的游戏预加载所有内容。也许你的游戏太大了。如果是这种情况，请考虑使用活动场景。场景可能是菜单，也可能是游戏关卡。同样，一个简化的例子：

```
local currentScene

function love.load()
    currentScene = loadMenu()
end

function love.update(dt)
    currentScene.update(dt)       
end

function love.draw()
    currentScene.draw()       
end

function love.mousepressed(x, y, button)   
    if startClicked(x,y,button) then            
        currentScene = loadWorld()
    end
end 
```

从长远来看，第二种选择更加灵活。它可以处理任意数量和类型的场景，而无需为每个场景提供条件逻辑。这需要一点“对象”的思考。所有场景都需要一致的方式来更新和绘制。

如果您的世界需要一段时间来加载，您可能希望显示一个临时的“世界正在加载”场景，这样您的用户就不会感到不耐烦。

# r - r holtwinters predict

> ID：15229625
> 
> 赞同：0
> 
> 时间：2013-03-05T16:54:47.767
> 
> 标签：r, predict

I am using R for sometime now and some days ago I found a very interesting function which made a prediction on a given time series. It just took the data from the known time series and applied it on a given period, but it kept the pattern. The problem is that I lost it. I am sure it was a sort of HoltWinters. I am trying two days to find something, but till now without success. Could someone please give me a hand on this!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-10T23:20:56.533

只需使用`predict`：

```
# Assuming you have some timeseries data in myts
hw <- HoltWinters(myts)
predict(hw, 10)   # predict 10 periods ahead 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-08T05:10:24.800

您可以使用`forecast.HoltWinters`

```
#Model creation
fit <- HoltWinters(ts.data,gamma=FALSE)
#Load forecast package
require(forecast)
#Apply model into forecast
forecast(fit) 
```

# jquery - jQuery：在两种情况下无法触发功能

> ID：15229628
> 
> 赞同：0
> 
> 时间：2013-03-05T16:54:51.430
> 
> 标签：jquery, function, triggers, resize, conditional-statements

我应该首先说我的 jQuery 技能几乎没有。我可以阅读大部分内容，但我求助于在 stackoverflow 中搜索我的大多数问题的答案。不幸的是，经过一天半的反复试验，我无法弄清楚这一点。

我正在修改一个 Wordpress 主题以获得一些响应能力。此主题使用两个脚本（columnize.js 和 columnizer.js）在三列中显示帖子。

我的目标之一是根据窗口的大小在 1、2 或 3 列之间进行主题交换。

我可以在 document.ready 上做到这一点，但由于某种原因，我无法在我的两个条件下触发 window.resize 的更改（我可以通过更改宽度大小来触发它，但它会不停地进行并且计时器不是我要找的）。

我对 columnize.js 进行了这些更改，它在 .

这是我最近尝试的样子：

```
 //jQuery.noConflict();
var smallWindow;
var windowsize = jQuery(window).width(); //need to use jQuery instead of $

jQuery(document).ready(function($){
    if (windowsize < 868) { //if page opens on a small window
        jQuery('.mcol').makeacolumnlists({cols: 2, colWidth: 305, equalHeight: 'ul', startN: 1}); //creates the columns
        jQuery('.mcol2').makeacolumnlists({cols: 3, colWidth: 293, equalHeight: 'ul', startN: 1});
        smallWindow = true; //for the next if condition on resize
        alert(smallWindow); //just to check if it works
    }
    else { //if page opens on a big window
        jQuery('.mcol').makeacolumnlists({cols: 3, colWidth: 305, equalHeight: 'ul', startN: 1});
        jQuery('.mcol2').makeacolumnlists({cols: 3, colWidth: 293, equalHeight: 'ul', startN: 1});
        smallWindow = false;
        alert(smallWindow);
    }
});

jQuery(window).resize(function() {
    if ((windowsize < 868) && (smallWindow == false)){
//nothing works here, these conditions were here to keep the function from
//triggering when not necessary, i.e. would only trigger below a certain
//width if window above that width
        jQuery('.mcol').uncolumnlists(); //removes old columns
        jQuery('.mcol').makeacolumnlists({cols: 2, colWidth: 305, equalHeight: 'ul', startN: 1}); //creates new columns
        smallWindow = true; //changes to stop the function from triggering on further resize down
        alert(smallWindow);
    }
    else if ((windowsize > 867) && (smallWindow == true)){
        jQuery('.mcol').uncolumnlists();
        jQuery('.mcol').makeacolumnlists({cols: 3, colWidth: 305, equalHeight: 'ul', startN: 1});
        smallWindow = false; //changes to stop the function from triggering on further resize up
        alert(smallWindow);
    }
    else !false;
}); 
```

我不知道我做错了什么。任何帮助将不胜感激。

## 编辑 1

谢谢您的帮助。对 adeneo 的代码进行了小修改，以防止函数不停地触发：

```
jQuery(document).ready(function ($) {
var smallWindow = false;
$(window).on('resize', function () {
    var windowsize = $(window).width();

    if (windowsize < 868 && smallWindow == false) { // did the ! meant false?
        $('.mcol').uncolumnlists();
        $('.mcol').makeacolumnlists({ cols: 2, colWidth: 305, equalHeight: 'ul', startN: 1 });
        smallWindow = true;
        //alert(smallWindow);
    } else if (windowsize >= 868 && smallWindow == true) { //now won't trigger unless smallWindow is true
        $('.mcol').uncolumnlists();
        $('.mcol').makeacolumnlists({ cols: 3, colWidth: 305, equalHeight: 'ul', startN: 1 });
        smallWindow = false;
        //alert(smallWindow);
    }
}).trigger('resize');
}); 
```

只剩下一件事，因为 smallWindow 是从一开始就定义的，如果页面加载在一个 >=868 的窗口中，则该函数不会触发。我不得不对此挠头，但我会在这里分享我的问题，因为你比我快。:)

## 编辑 2

好的，我明白了。当 smallWindow 变量应该为真时，我必须将其设置为假，反之亦然，因此我可以强制调整大小函数在加载时触发。尽管如此，我还是觉得很愚蠢，因为我尝试了多种方法，但我仍然无法声明全局变量......所以我用 windowssize var 重复自己......

```
jQuery(document).ready(function ($) {
var windowsize = $(window).width();
if (windowsize <868) {
    var smallWindow = false;
}
else {
    var smallWindow = true;
};

$(window).on('resize', function () {
    var windowsize = $(window).width();

    if (windowsize < 868 && !smallWindow) {
        $('.mcol').uncolumnlists();
        $('.mcol').makeacolumnlists({ cols: 2, colWidth: 305, equalHeight: 'ul', startN: 1 });
        smallWindow = true;
    } else if (windowsize >= 868 && smallWindow) {
        $('.mcol').uncolumnlists();
        $('.mcol').makeacolumnlists({ cols: 3, colWidth: 305, equalHeight: 'ul', startN: 1 });
        smallWindow = false;
    }
}).trigger('resize');
}); 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T17:01:20.303

您应该将调整大小函数放在`ready`处理程序中，并且您还需要`windowSize`在调整大小时更新变量，否则它将始终相同。无需输入两次相同的内容，只需在页面加载时触发 resize 事件：

```
jQuery(document).ready(function ($) {
    var smallWindow = false;
    $(window).on('resize', function () {
        var windowsize = $(window).width();

        if (windowsize < 868 && !smallWindow) {
            $('.mcol').uncolumnlists();
            $('.mcol').makeacolumnlists({ cols: 2, colWidth: 305, equalHeight: 'ul', startN: 1 });
            smallWindow = true;
        } else if (windowsize > 868 && smallWindow) {
            $('.mcol').uncolumnlists();
            $('.mcol').makeacolumnlists({ cols: 3, colWidth: 305, equalHeight: 'ul', startN: 1 });
            smallWindow = false;
        }
    }).trigger('resize');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T17:03:17.327

smallWindow 必须首先设置为某个值（true 或 false）

# java - jpa 非托管实体

> ID：15229629
> 
> 赞同：4
> 
> 时间：2013-03-05T16:54:54.487
> 
> 标签：java, jpa, orm, audit-logging

假设我必须触发这样的查询：

```
Select primarykey, columnname, old_value, new_value from first_audit_log;

Select primarykey, columnname, old_value, new_value from second_audit_log;

Select primarykey, columnname, old_value, new_value from third_audit_log; ...so on 
```

`audit_log`没有作为 JPA 实体映射到任何类，我严格不能`n`为`n`.`*_audit_logs`

使用本机查询功能，我如何才能最好地将其映射到泛型类？尝试选择新功能，但不确定...因此，感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T17:02:32.167

由于您的审计日志表共享相同的列，您可以创建一个“统一”这些表的视图并将单个 Java 类映射到该视图。我相信你可以，因为你不需要写更新，我猜。

作为替代方案，使用本机查询将是一个不错的选择。

**编辑**：

1) 如果您的审计日志*已经*是视图，您可以基于其他视图创建一个视图，如果您不想为每个视图创建一个映射 Java 类。只要记住添加一个具有值的虚拟列，`1`如果该行来自“第一个”审计日志，`2`如果它来自第二个审计日志，依此类推，这样您就可以将它们分开。

2）为了使用本机查询，假设您的持久性提供程序是 Hibernate，您可以在此示例中执行以下操作：

```
EntityManagerFactory emf = Persistence.createEntityManagerFactory("test");
EntityManager em = emf.createEntityManager();

Session sess = em.unwrap(Session.class); // <-- Use Hibernate-specific features
SQLQuery query = sess.createSQLQuery(
   "SELECT AVG(age) AS averageAge, AVG(salary) as averageSalary FROM persons");

query.setResultTransformer(Transformers.aliasToBean(MyResult.class));
MyResult result = (MyResult) query.list().get(0); 
```

where`MyResult`声明如下：

```
public class MyResult {

    private BigDecimal averageAge;
    private BigDecimal averageSalary;

    public BigDecimal getAverageAge() {
        return averageAge;
    }
    public void setAverageAge(BigDecimal averageAge) {
        this.averageAge = averageAge;
    }
    public BigDecimal getAverageSalary() {
        return averageSalary;
    }
    public void setAverageSalary(BigDecimal averageSalary) {
        this.averageSalary = averageSalary;
    }

} 
```

`persons`表是这样的（MySQL语法）：

```
CREATE TABLE `persons` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `firstname` varchar(255) NOT NULL,
  `lastname` varchar(255) NOT NULL,
  `age` int(11) NOT NULL,
  `salary` int(11) NOT NULL,
  PRIMARY KEY (`id`)
); 
```

您可以轻松地根据您的需要调整此示例，只需将其替换`persons`为`MyResult`您想要的即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-24T02:24:56.453

sql 查询中的别名会自动转换为大写，并且它会以大写查找 setter，结果会抛出 org.hibernate.PropertyNotFoundException 异常。任何建议将不胜感激。

例如，下面的语句正在寻找 setter ID 而不是 Id/id（Could not find setter for ID on class Data）

```
List<Data> result = entityManager.unwrap(Session.class) 
            .createSQLQuery("Select id as id from table") 
            .setParameter("day", date.getDayOfMonth()) 
            .setParameter("month", date.getMonthOfYear()) 
            .setParameter("year", date.getYear()) 
           .setResultTransformer(Transformers.aliasToBean(Data.class))
           .list();

class Data {
  Integer id;

  public Integer getId() {
    return id;
  }

  public void setId(Integer id) {
   this.id = id;
  }
} 
```

# php - preg_match doesn't work with REQUEST value

> ID：15229631
> 
> 赞同：0
> 
> 时间：2013-03-05T16:55:00.713
> 
> 标签：php, regex, request

I have a simple HTML form with 2 fields, name and email.

I'm trying to prevent users from submitting invalid names. The only characters allowed are:

*   letters
*   spaces
*   these special characters: àäçéèïöü

I get the name using a php $_REQUEST variable and store it in `$name`.

My preg_match is the following `preg_match("/^[a-zA-Z àäçéèïöü]+$/", $name)`.
When I test it in my php code, it works.
But when I test it upon my $_REQUEST variable, it doesn't (though it's displayed correctly in the browser).

For example, if my $_REQUEST variable contains "Jeremy", it works, but if it contains "Jérémy", it doesn't.

Thanks for your help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-05T06:12:16.270

*[由于将评论标记为答案的](https://meta.stackexchange.com/questions/82099/answering-comment-answered-questions)功能请求仍然被拒绝，因此我在此处复制上述解决方案。*

您是否尝试过使用 utf8_encode($name)？– 坎皮泰利

# java - 从 alertDialog 获取文本

> ID：15229634
> 
> 赞同：0
> 
> 时间：2013-03-05T16:55:06.170
> 
> 标签：java, android

我在 alertDialog 中有一个 textView，我想在用户单击 Ok 按钮时获取此文本...

但是我不知道如何实现它？（在 google android developer 中没有解释）

这是我的 forgot_password_popup.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:background="@null" >

    <ImageView
        android:layout_width="match_parent"
        android:layout_height="80dp"
        android:layout_weight="0.76"
        android:background="#FFFFBB33"
        android:contentDescription="@string/app_name"
        android:scaleType="center"
        android:src="@drawable/logo" />

    <EditText
        android:id="@+id/emailText"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="4dp"
        android:layout_marginLeft="4dp"
        android:layout_marginRight="4dp"
        android:layout_marginTop="16dp"
        android:hint="Enter Email Address"
        android:inputType="textEmailAddress" />

</LinearLayout> 
```

这是我更新的课程：

```
public class LoginDialogFragment extends DialogFragment {

    private EditText emailText;
    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {

        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
        // Get the layout inflater
        LayoutInflater inflater = getActivity().getLayoutInflater();
        final View v = inflater.inflate(R.layout.forgot_password_popup, null);
          emailText = (EditText) v.findViewById(R.id.emailText);

        // Inflate and set the layout for the dialog
        // Pass null as the parent view because its going in the dialog layout
        builder.setView(inflater.inflate(R.layout.forgot_password_popup, null))
        // Add action buttons
               .setPositiveButton("Ok", new DialogInterface.OnClickListener() {
                   @Override
                   public void onClick(DialogInterface dialog, int id) {

                       try {
                           String email=emailText.getText().toString();
                        ParseUser.requestPasswordReset(email);
                    } catch (ParseException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                   }
               })
               .setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {

                       LoginDialogFragment.this.getDialog().cancel();
                   }
               });      
        return builder.create();
    }
} 
```

这是 logcat（你可以看到它写了无效的电子邮件，因为电子邮件是空的）：

```
03-05 17:42:27.791: W/System.err(751): com.parse.ParseException: invalid email 
03-05 17:42:27.791: W/System.err(751):  at com.parse.ParseCommand$3.then(ParseCommand.java:352)
03-05 17:42:27.801: W/System.err(751):  at com.parse.Task$10.run(Task.java:442)
03-05 17:42:27.801: W/System.err(751):  at com.parse.Task$1.execute(Task.java:67)
03-05 17:42:27.801: W/System.err(751):  at com.parse.Task.completeImmediately(Task.java:439)
03-05 17:42:27.801: W/System.err(751):  at com.parse.Task.continueWith(Task.java:316)
03-05 17:42:27.801: W/System.err(751):  at com.parse.Task.continueWith(Task.java:327)
03-05 17:42:27.801: W/System.err(751):  at com.parse.Task$8.then(Task.java:377)
03-05 17:42:27.801: W/System.err(751):  at com.parse.Task$8.then(Task.java:1)
03-05 17:42:27.801: W/System.err(751):  at com.parse.Task$11.run(Task.java:474)
03-05 17:42:27.801: W/System.err(751):  at com.parse.Task$1.execute(Task.java:67)
03-05 17:42:27.801: W/System.err(751):  at com.parse.Task.completeAfterTask(Task.java:471)
03-05 17:42:27.801: W/System.err(751):  at com.parse.Task.access$9(Task.java:467)
03-05 17:42:27.801: W/System.err(751):  at com.parse.Task$7.then(Task.java:343)
03-05 17:42:27.811: W/System.err(751):  at com.parse.Task$7.then(Task.java:1)
03-05 17:42:27.811: W/System.err(751):  at com.parse.Task.runContinuations(Task.java:502)
03-05 17:42:27.811: W/System.err(751):  at com.parse.Task.access$5(Task.java:498)
03-05 17:42:27.821: W/System.err(751):  at com.parse.Task$TaskCompletionSource.trySetResult(Task.java:557)
03-05 17:42:27.821: W/System.err(751):  at com.parse.Task$TaskCompletionSource.setResult(Task.java:591)
03-05 17:42:27.821: W/System.err(751):  at com.parse.Task$11$1.then(Task.java:485)
03-05 17:42:27.821: W/System.err(751):  at com.parse.Task$11$1.then(Task.java:1)
03-05 17:42:27.832: W/System.err(751):  at com.parse.Task$10.run(Task.java:442)
03-05 17:42:27.832: W/System.err(751):  at com.parse.Task$1.execute(Task.java:67)
03-05 17:42:27.832: W/System.err(751):  at com.parse.Task.completeImmediately(Task.java:439)
03-05 17:42:27.832: W/System.err(751):  at com.parse.Task.access$8(Task.java:435)
03-05 17:42:27.832: W/System.err(751):  at com.parse.Task$6.then(Task.java:309)
03-05 17:42:27.832: W/System.err(751):  at com.parse.Task$6.then(Task.java:1)
03-05 17:42:27.832: W/System.err(751):  at com.parse.Task.runContinuations(Task.java:502)
03-05 17:42:27.841: W/System.err(751):  at com.parse.Task.access$5(Task.java:498)
03-05 17:42:27.841: W/System.err(751):  at com.parse.Task$TaskCompletionSource.trySetResult(Task.java:557)
03-05 17:42:27.841: W/System.err(751):  at com.parse.Task$TaskCompletionSource.setResult(Task.java:591)
03-05 17:42:27.841: W/System.err(751):  at com.parse.Task$11$1.then(Task.java:485)
03-05 17:42:27.841: W/System.err(751):  at com.parse.Task$11$1.then(Task.java:1)
03-05 17:42:27.841: W/System.err(751):  at com.parse.Task$10.run(Task.java:442)
03-05 17:42:27.841: W/System.err(751):  at com.parse.Task$1.execute(Task.java:67)
03-05 17:42:27.841: W/System.err(751):  at com.parse.Task.completeImmediately(Task.java:439)
03-05 17:42:27.851: W/System.err(751):  at com.parse.Task.continueWith(Task.java:316)
03-05 17:42:27.851: W/System.err(751):  at com.parse.Task.continueWith(Task.java:327)
03-05 17:42:27.851: W/System.err(751):  at com.parse.Task$11.run(Task.java:478)
03-05 17:42:27.861: W/System.err(751):  at com.parse.Task$1.execute(Task.java:67)
03-05 17:42:27.861: W/System.err(751):  at com.parse.Task.completeAfterTask(Task.java:471)
03-05 17:42:27.871: W/System.err(751):  at com.parse.Task.access$9(Task.java:467)
03-05 17:42:27.871: W/System.err(751):  at com.parse.Task$7.then(Task.java:343)
03-05 17:42:27.871: W/System.err(751):  at com.parse.Task$7.then(Task.java:1)
03-05 17:42:27.871: W/System.err(751):  at com.parse.Task.runContinuations(Task.java:502)
03-05 17:42:27.871: W/System.err(751):  at com.parse.Task.access$5(Task.java:498)
03-05 17:42:27.882: W/System.err(751):  at com.parse.Task$TaskCompletionSource.trySetResult(Task.java:557)
03-05 17:42:27.882: W/System.err(751):  at com.parse.Task$TaskCompletionSource.setResult(Task.java:591)
03-05 17:42:27.882: W/System.err(751):  at com.parse.Task$3.run(Task.java:225)
03-05 17:42:27.882: W/System.err(751):  at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:390)
03-05 17:42:27.882: W/System.err(751):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
03-05 17:42:27.891: W/System.err(751):  at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:153)
03-05 17:42:27.891: W/System.err(751):  at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:267)
03-05 17:42:27.891: W/System.err(751):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
03-05 17:42:27.901: W/System.err(751):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
03-05 17:42:27.901: W/System.err(751):  at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:01:02.200

```
public class LoginDialogFragment extends DialogFragment {
    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {

        LayoutInflater inflater = getActivity().getLayoutInflater();
        View view = inflater.inflate(R.layout.forgot_password_popup, null);
        final EditText emailText = (EditText) view.findViewById(R.id.emailText);

        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
        builder.setView(view)

               .setPositiveButton("Ok", new DialogInterface.OnClickListener() {
                   @Override
                   public void onClick(DialogInterface dialog, int id) {
                       ParseUser.requestPasswordReset(emailText.getText().toString());
                   }
               })

               .setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                       //LoginDialogFragment.this.getDialog().cancel();
                   }
               });      

        return builder.create();
    }
} 
```

# sql - 在 Rapidminer 中实现 SQL 查询以创建报告的问题

> ID：15229636
> 
> 赞同：1
> 
> 时间：2013-03-05T16:55:10.350
> 
> 标签：sql, business-intelligence, rapidminer

我的问题：

*   有没有办法在我的 SQL 查询中在 %{macro_name} 周围添加引号？*   有没有更好的方法来创建所需的报告（即不使用 RapidMiner）？

    我的过程：

    我目前正在尝试创建存储在 MySQL 数据库中的数据的自定义报告。这是我的表数据的假设示例：

    ```
    Item_Name  Item_Price Item_Stock Item_Timestamp
    Dish Soap    3.99        25      1/1/2013 12:00am
    Frogs        0.69        26      1/1/2013 12:00am
    Frogs        0.69        19      1/1/2013 1:00am
    Dish Soap    3.99        28      1/1/2013 1:00am 
    ```

    Item_Timestamp 是指输入时的日期时间。

    我正在尝试使用 RapidMiner 执行以下操作：

    *   为每个唯一的 Item_Name 提供 Item_Stock 增加的总和*   为每个唯一的 Item_Name 提供 Item_Stock 减少的总和*   提供指定时间段内的平均变化率

    我的目标是创建一份报告，告诉我物品是否以与需求平衡的速度进货。

    为了为每个唯一的 Item_Name 创建一个报告，我创建了一个 RapidMiner 进程，它加载唯一的 Item_Name 作为示例集，然后尝试使用提取宏运算符循环通过示例集，该操作符将 Item_Name 从每个示例发送到另一个 SQL 查询. RapidMiner 使用 %{macro_name} 作为宏的语法。我的 SQL 查询如下所示：

    ```
    Select Item_Name
    From thisTable
    Where Item_Name = %{macro_name} 
    ```

    问题是这个查询抛出了一个异常，但我不知道为什么。也许问题是 %{macro_name} 返回一个没有必要引号的字符串，但我不确定。

    我的问题是：

    *   有没有办法在我的 SQL 查询中在 %{macro_name} 周围添加引号？*   有没有更好的方法来创建所需的报告（即不使用 RapidMiner）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T00:57:42.233

我发现了主要问题：

我当前的 SQL 字符串有语法问题。我需要大写并且在 %{macro_name} 之前应该没有空格

```
SELECT Item_Name
FROM `thisTable`
WHERE Item_Name =%{macro_name} 
```

# java - 从另一个类的方法中获取构造函数中的值？

> ID：15229637
> 
> 赞同：-2
> 
> 时间：2013-03-05T16:55:13.787
> 
> 标签：java, swing

我想在类的构造函数中访问 name 和 age 的值 Choose 我提到的 public Choose(){ 它们存储在 NewP 的 GetValues 方法中

**选择.java**

```
class Choose {
    String Cn,Ca;
    public Choose(){
        btn.addMouseListener{
        }
    }

    public static void gtNp(string nn,string aa) {
        Cn=nn;
        Ca=aa;
    }

} 
```

**新P.java**

```
class NewP {
    Choose C1 = new Choose();

    NewP() {
       btn.addMouseListener{
           GetValues();
           Choose.gtNp(name,age);       
       }
    }

    public NewP GetValues(){
        Name=         ;
        Age=            ;
        return null;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T17:04:31.463

我目前可能无法理解您的代码，但它在某种程度上令人困惑。我发现了几个问题。

首先，您有一个`static`设置`Choose`类值的方法，这应该会导致错误，因为您正在从静态上下文访问非静态变量。您应该改用 getter 和 setter（或者直接使用字段，其他人可能会说）。使用这种方法：

```
public static void gtNp(string nn,string aa){
    Cn=nn; //Java convention: fields and methods start with lowercase.
    Ca=aa;
} 
```

将导致所有实例共享相同的值，`Choose`但当然，这可能是所需的行为。如果它们与实例相关，则可以在构造函数中传递这些值：

```
public Choose(String nn, String aa){
   cn = nn; //To adapt your code to the convention, I've used lowercases here.
   ca = aa;
   btn.addMouseListener{
} 
```

无论哪种方式，您都需要为这些字段添加 getter 或 setter。您可能想要检查什么`setters`和`getters`是并实施它们。我会把这些留给你练习。

以下是一些可以帮助您的基本链接：

*   [了解实例和类成员](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)
*   [封装](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)
*   [什么是对象？](http://docs.oracle.com/javase/tutorial/java/concepts/object.html)（在这一篇中，您需要检查*封装*的概念）
*   [什么是类？](http://docs.oracle.com/javase/tutorial/java/concepts/class.html)
*   [面向对象编程](http://docs.oracle.com/javase/tutorial/java/concepts/index.html)

# javascript - Node.js 阻塞了？

> ID：15229642
> 
> 赞同：1
> 
> 时间：2013-03-05T16:55:35.803
> 
> 标签：javascript, node.js, http, blocking

**我想我刚刚发现 node.js 或浏览器有些奇怪。所以 node.js 应该是非阻塞的，但是一个简单的 setTimeout 会为同一个客户端阻塞整个网站。**

## 这是服务器代码：

```
// Create HTTP Server
var http = require('http');

// Create page number holder
var page = 0;

http.createServer(function (req, res) {
    // Increment Page Number
    page++; 

    // Log page load
    console.log('LOAD PAGE', page); 

    // Set response header
    res.writeHead(200, {'Content-Type': 'text/plain'}); 

    // Wait 10 seconds and write Hello World message to client.
    setTimeout(function(){ res.end('Hello World\n'); }, 10000); 

}).listen(5000); // Listen on port 5000

// Log server start
console.log('Server running on port 5000.'); 
```

所以我要说的是，当我尝试用两个选项卡在 Chrome（版本 25.0.1364.152）中打开[http://mysite.com:5000/](http://mysite.com:5000/)时，第一个选项卡必须在节点处理第二个选项卡之前完成.js。

## 它看起来像这样：

```
Client: Open Tab1 
> server console: LOAD PAGE 1

Client: Open Tab2
> server console: Nothing happens

Server: Wait 10 seconds
> server console: LOAD PAGE 2 
```

我希望 node.js 立即运行这两个请求，否则这不是非阻塞的。我已经用 Firefox 19 对此进行了测试，因此浏览器的行为似乎与此相同。

那么发生了什么？我错过了什么吗？:OOOO

## 更新

我只是在 Safari(6.0.2) 中运行测试并且它工作正常，所以这可能是 Chrome 和 Firefox 以及其他浏览器的问题。

*使用 Node.js 版本**v0.6.17**和**v0.8.21测试***

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-05T17:14:03.210

浏览器实现每个域名的并发连接限制。剪辑：

> 浏览器通常将每台服务器的并发 HTTP 连接数限制为 2（为简单起见，此处广泛使用术语“每台服务器”。例如，它可能是共享同一公共 IP 的多台物理机。）。如果浏览器会话已经有两个 HTTP 连接，任何进一步的连接请求都必须等到这两个 HTTP 连接之一完成。结果，浏览器（或应用程序）似乎被锁定。虽然“两个连接限制”几年前是有道理的，但在今天启用 Ajax 的“web 2.0”应用程序中是非常有问题的。

来源：[http ://www.openajax.org/runtime/wiki/The_Two_HTTP_Connection_Limit_Issue](http://www.openajax.org/runtime/wiki/The_Two_HTTP_Connection_Limit_Issue)

节点没有阻塞，你的浏览器是。我推荐 apache benchmark (ab -c 10 -n 10) 进行测试。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T17:06:31.817

是的，你错过了一些东西 你应该尝试用其他东西而不是成熟的网络浏览器来测试你的服务器。`curl`例如尝试。

Chrome 会做很多其他事情，而不是按照您的要求去做。

# xml - AS3 将字符串中的 xml 节点调用为变量，这是怎么回事？

> ID：15229644
> 
> 赞同：0
> 
> 时间：2013-03-05T16:55:47.620
> 
> 标签：xml, actionscript-3, nodes

我正在开发一个调用和搜索如下 XML 表的项目：

```
 <Searchtext Wordlookup="john smith">
        <location>$1</location>
        <Name>john smith</Name>
    </Searchtext> 
```

对于大约 100 多人来说，它继续这样。

现在，我的 flash 获取这些数据并允许用户单击文本框（其 e.target.data.text 使用 @Wordlookup 与 xml 匹配）或输入人名（再次匹配文本框的内容到@Wordlookup），这会导致该人的位置亮起（MC 的命名与每个位置节点的名称相同）。使用此代码，此端工作得非常好：

```
 var result:String = xmldata.Searchtext.(@Wordlookup == inputTxt.text.toLowerCase()).location.toString(); 
```

现在我想做相反的事情；点击一个位置，代码会将该影片剪辑的名称与我的 xml 中的一个位置匹配，并点亮该位置，并在文本框中输出该人的姓名。唯一的问题是，Flash 显然认为我的 xml 中的一个节点现在是一个未定义的变量。我一直在寻找解决方案的高低，但我似乎无法解决它（这可能很简单，我会自己面对）错误诱导代码是这样的：

```
 var resultz:String = xmldata.Searchtext.(location.text() == inputTxt2.text()).Name.toString(); 
```

产生的错误是：ReferenceError: Error #1065: Variable location is not defined。

编辑：我最初将 inputTxt2.text 作为 e.target.name，但我现在将它放在一个文本框中，以便我可以看到它正在输出与我的位置节点匹配的内容。

不知道为什么会发生这种情况，提前感谢您的帮助！

另一个编辑：所以添加 .*. ：

```
 var resultz:String = xmldata.*.Searchtext.(location.text() == inputTxt2.text()).Name.toString(); 
```

阻止它创建 th 节点作为变量，但它仍然返回 null。有没有更好的方法从匹配的位置返回名称？似乎它只是没有认识到 MC 的名称与 XML 中的节点匹配....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:55:45.397

```
 var xmldata:XML = new XML(
                <root>
                    <Searchtext Wordlookup="john smith">
                        <location>$1</location>
                        <Name>john smith</Name>
                    </Searchtext>
                </root>
            )

    var result1:String = xmldata.Searchtext.(@Wordlookup == "john smith").location.toString();
    trace(result1) // traces $1

    var result2:String = xmldata.Searchtext.(location == "$1").Name.toString()
    trace(result2) // traces john smith 
```

# php - PHP While 循环随时间变慢

> ID：15229648
> 
> 赞同：0
> 
> 时间：2013-03-05T16:55:50.980
> 
> 标签：php

我有看似无害的 while 循环，它遍历 mysql 查询的结果集，并将从 mysql 返回的 id 与一个非常大的多维数组中的一个进行比较：

```
//mysqli query here
while($row = fetch_assoc())
{
    if(!in_array($row['id'], $multiDArray['dimensionOne']))
    {
        //do something
    }
} 
```

当脚本第一次执行时，它以大约每秒 2-5k 的速度运行结果。有时更多，很少更少。结果集带回 700 万行，脚本的内存峰值为 2.8GB。

就大数据而言，这不是很多。

问题是，在 600k 左右，循环开始变慢，到了 800k，它每秒处理几条记录。

在服务器负载和内存使用方面，没有问题。

这是我之前在处理大型数据集的其他脚本中注意到的行为。

随着内部指针移动得更深，数组寻道时间是否会逐渐变慢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T17:29:21.493

这实际上取决于循环内部发生的情况。我知道您确信这不是内存问题，但看起来很像。当系统试图通过使用 SWAP 获得额外的 RAM 时，程序通常会变得非常慢。使用硬盘驱动器显然非常慢，这就是您可能遇到的情况。对其进行基准测试非常容易。

在一个终端运行

```
vmstat 3 100 
```

运行您的脚本并观察 vmstat。查看 IO 和 SWAP。如果情况并非如此，则使用 XDEBUG 进行配置文件执行。这可能很棘手，因为您进行了多次迭代，这也会导致主要的 IO。

# java - 如何重用来自 java.net.socket 的输入流？

> ID：15229650
> 
> 赞同：0
> 
> 时间：2013-03-05T16:55:56.767
> 
> 标签：java, sockets

我想用套接字发出 http 请求，因为我想测试我可以创建多少个套接字。`OutputStream`所以我使用and从我的服务器写入和读取`InputStream`。但是在第一次响应后我无法再次从输入流中读取。你知道如何在不关闭套接字的情况下读取第二个响应吗？
这是我的代码：

```
Socket socket = new Socket();
socket.connect(new InetSocketAddress(address, 80), 1000);
socket.setSoTimeout(25*1000);

OutputStream os = socket.getOutputStream();        
os.write(getRequest(host)); // some request as bytearray, it has Connection: Keep-Alive in the header
os.flush();

InputStream is = socket.getInputStream();
BufferedInputStream bis = new BufferedInputStream(is);

String response = IOUtils.toString(bis);
System.out.println("RESPONSE = \n" + response); // this works fine

os.write(getRequestBodyBa()); // send another request, i can see it sent to server with wireshark
os.flush();

// try to read again but it always return empty string            
response = IOUtils.toString(bis); // how to read the second response?????
System.out.println("RESPONSE = \n" + response);        

os.close();
is.close();
socket.close(); 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T03:10:13.007

`IOUtils.toString(InputStream)` reads the stream to EOS, so there can't be anything left to read for next time. Don't use it. You need to parse the response headers, work out whether there is a Content-Length header, if so read the body for exactly that many bytes; if there is no Content-Length header (and no chunking) the connection is closed after the body so you can't send a second command; etc etc etc. It is endless. Don't use a `Socket` for this either: use an HTTP `URL` and `URLConnection.`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T17:06:39.100

我相信 HTTP 标准是在每次响应后关闭连接，除非请求的[Connection 标头设置为 keep-alive](http://en.wikipedia.org/wiki/HTTP_persistent_connection)。

# visual-studio-2010 - PDF 文件不会在 Visual Studio 中发布到站点

> ID：15229653
> 
> 赞同：2
> 
> 时间：2013-03-05T16:56:15.257
> 
> 标签：visual-studio-2010, pdf, publish

在 Visual Studios 中处理网站并添加 PDF 文件时，他们不会通过“发布”命令发布到网站。这与文件类型有关吗？

提前致谢， CJ

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T17:01:36.110

您可能需要在文件的属性中将构建操作更改为内容。

目前它可能设置为无，这意味着它不会在发布过程中被复制。

# c# - 如何更改字符串中单词的顺序？

> ID：15229654
> 
> 赞同：7
> 
> 时间：2013-03-05T16:56:16.673
> 
> 标签：c#, string

我是一个真正的新手，虽然我发现了一个非常相似的问题和答案（[Winforms C# 更改字符串文本顺序](https://stackoverflow.com/questions/3534021/winforms-c-sharp-change-string-text-order)），但我仍然需要一些帮助，尤其是由于下面的第 3 点，这使得它有点棘手。

1.  该字符串由 3 个“单词”组成，需要更改其顺序。字符串始终具有相同的模式：“WordOne WordTwo WordThree”——例如“Car Storage Sydney”、“Boat Storage Melbourne”和“Caravan Storage Brisbane”。

2.  每个“单词”总是由一个空格分隔。据我了解，这将用于拆分变量，然后可以重新格式化以实现所需的顺序更改（参见下面的 4）

3.  这就是它变得有点棘手的地方：第三个“单词”有时实际上是两个单词，即“单词三”而不是“单词三”，也许用另一个例子更好地解释：“黄金海岸船存储”

4.  所需的顺序更改是“WordThree WordOne WordTwo”（基本上，只是将“WordThree”从后面移到前面）所以使用与上面 1 中相同的示例，最终结果将是“Sydney Car Storage”、“Melbourne Boat Storage” ”和“布里斯班大篷车仓库”。而棘手的一个，基于有时两个词的“三字”，如上图 3 所示，将是“黄金海岸船库”

我希望我已经解释得足够好。

除了上面 3\. 中描述的问题，我认为应该是这样的，只是我对代码的粗略新手尝试：

```
string wordsBefore = "WordOne WordTwo WordThree";
string[] wordsWorking = wordsBefore.Split(new string[]{" "});
string wordsAfter = ("{0} {1} {2}", wordsWorking[2], wordsWorking[0], wordsWorking[1]); 
```

我觉得这很接近？

但是当然，由于上面 3\. 中描述的问题，需要额外的代码来检测“WordThree”何时包含两个单词并以某种方式将它们作为一个单词处理。我想你知道我的意思！

急切地等待一些帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T17:03:40.420

你可以告诉`Split`只给你一定数量的结果：

```
string wordsBefore = "WordOne WordTwo Word Three";
string[] wordsWorking = wordsBefore.Split(new [] {' '}, 3);
string wordsAfter = string.Format("{0} {1} {2}", 
                wordsWorking[2], wordsWorking[0], wordsWorking[1]);

// result: "Word Three WordOne WordTwo" 
```

或者，如果您想聪明一点`String.Format`：

```
string wordsBefore = "WordOne WordTwo Word Three";
string[] wordsWorking = wordsBefore.Split(new [] {' '}, 3);
string wordsAfter = string.Format("{2} {0} {1}", wordsWorking); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T16:58:59.840

```
string wordsBefore = "WordOne WordTwo WordThree";
string[] wordsWorking = wordsBefore.Split();
string wordsAfter = ("{0} {1} {2}", string.Join(" ", wordsWorking.Skip(2)), wordsWorking[0], wordsWorking[1]); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T17:03:37.060

把事情简单化。

```
string wordsBefore = "WordOne WordTwo WordThree";
string[] wordsWorking = wordsBefore.Split(new string[]{" "});
string word1 = wordsWorking[0];
string word2 = wordsWorking[1];
string word3 = wordsWorking[2];

if (wordsWorking.length == 4)
   word3 = word3 + " " + wordsWorking[3];

string wordsAfter = ("{0} {1} {2}", word3 word1, word2); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T17:03:13.753

```
const string wordsBefore = "WordOne WordTwo Word Three";
string[] wordsWorking = wordsBefore.Split();
var thirdWord = wordsWorking.Skip(2).Aggregate((s, s1) => s + " " + s1);    
string wordsAfter = string.Format("{0} {1} {2}", thirdWord, wordsWorking[0], wordsWorking[1]); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T17:09:43.297

这是我的例子：

```
string text = "word one<splittag>word two and some other words<splittag>word three with   some text";
        string[] words = text.Split(new string[] { "<splittag>" }, StringSplitOptions.None);
        Label1.Text = String.Format("{2},{0},{1}", words[2], words[0], words[1]); 
```

希望能帮助到你！

# variables - 列出所有包含 regexp 的 Emacs 变量

> ID：15229656
> 
> 赞同：1
> 
> 时间：2013-03-05T16:56:24.537
> 
> 标签：variables, emacs, elisp

如何在 Emacs 中找到名称中包含“目录”的所有变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T17:12:44.207

`M-x apropos-variable RET directory`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T16:57:12.353

如果您只想查找包含字符串的所有变量，请查看[正确](https://stackoverflow.com/a/15229992/596361)答案。在这里，我在表单中创建了对列表`(<variable> . <value>)`。

# 使用功能说明

*   [`mapatoms`](http://www.gnu.org/software/emacs/manual/html_node/elisp/Creating-Symbols.html#Creating-Symbols)是一个 map 样式的函数，用于操作`obarray`, 包含 Emacs 使用的所有符号的变量。
*   [`prin1-to-string`](http://www.gnu.org/software/emacs/manual/html_node/elisp/Output-Functions.html#Output-Functions)返回一个带有对象打印表示的字符串。
*   [`string-match`](http://www.gnu.org/software/emacs/manual/html_node/elisp/Regexp-Search.html#Regexp-Search)在字符串中查找正则表达式，如果未找到则返回 index 或 nil。
*   [`push`](http://www.gnu.org/software/emacs/manual/html_node/elisp/List-Variables.html#List-Variables)将元素就地插入列表的头部。
*   [`remove-if`](https://www.gnu.org/software/emacs/manual/html_node/cl/Sequence-Functions.html#index-remove_002dif-115)相当于倒置[滤波器](http://en.wikipedia.org/wiki/Filter_%28higher-order_function%29)
*   [`mapcar`](http://www.gnu.org/software/emacs/manual/html_node/elisp/Mapping-Functions.html#Mapping-Functions)是一个普通的[地图](http://en.wikipedia.org/wiki/Map_%28higher-order_function%29)函数
*   [`boundp`](http://www.gnu.org/software/emacs/manual/html_node/elisp/Void-Variables.html#Void-Variables)如果变量的值不为 void，则返回 t。
*   [`symbol-value`](http://www.gnu.org/software/emacs/manual/html_node/elisp/Accessing-Variables.html#Accessing-Variables)返回变量的值。

# 最终代码

```
(let ((matching-variables
       (let ((result '()))
         ;; result will contain only variables containing "directory"
         (mapatoms (lambda (variable)
                     (let* ((variable-string (prin1-to-string variable))
                            (match (string-match "directory" variable-string)))
                       (if match
                           (push variable result)))))
         result)))
  ;; returns list of pairs (variable-name . variable-value)
  (remove-if #'null
             (mapcar (lambda (variable)
                       (if (boundp variable)
                           (cons variable (symbol-value variable))
                         nil))
                     matching-variables))) 
```

# 参考

*   [https://stackoverflow.com/a/8031385/596361](https://stackoverflow.com/a/8031385/596361)

# python - PyInstaller 什么是 hiddenimports 和 hooks？

> ID：15229658
> 
> 赞同：4
> 
> 时间：2013-03-05T16:56:27.853
> 
> 标签：python, exe, pyinstaller

我最近尝试了 pyInstaller，但有些东西我不太明白。我一直在尝试创建一些可执行文件（注意：它们都使用 numpy、scipy、OpenCV、BLAS 等）但我一直失败。总是缺少一些东西。所以我的问题是，有人可以更好地向我解释什么是 hiddenimports 和 hooks，以及我如何告诉 pyInstaller 我的代码中所有依赖项的目录，以便它可以将它们打包到最终的可执行文件中。

谢谢你。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-10T03:06:47.470

来自[pyinstaller 文档](https://pythonhosted.org/PyInstaller/hooks.html)

> 隐藏进口
> 
> ```
> A list of modules names (relative or absolute) the module imports in some untrackable way. 
> ```

在对程序进行静态分析期间，某些 Python 导入是无法跟踪的。例如，您的代码可能会使用 Python 代码创建要导入的模块的名称，然后导入该模块。在这种情况下，pyinstaller 在其代码分析过程中将无法确定要导入的模块的名称是什么。如果您提前知道，那么您可以告诉 pyinstaller 无条件地包含这些模块。

Hooks 是一种捆绑一组隐藏导入和其他参数以查找模块的方法。钩子被命名`hook-<module>.py`，其中模块是完全限定的模块名称。例如`hook-xml.dom.py`。如果您的代码是这样`import xml.dom`，则读取挂钩脚本的内容以包括任何隐藏的特定于`xml.dom`.

如果您创建自己的模块并且它需要隐藏导入，则可以使用适当的隐藏导入设置创建一个钩子脚本并存储在 PyInstaller 钩子目录中。下次您使用 PyInstaller 冻结导入模块的程序时，它会自动找到您的钩子文件并拉入所需的隐藏导入，而您不必每次都记住隐藏的导入对于您的模块是什么。

该文档包含有关所有这些如何工作的更多信息，但希望这提供了更多背景信息。

# sharepoint - InfoPath 2013 Web 表单未在人员选取器控件中打开浏览对话框

> ID：15229661
> 
> 赞同：1
> 
> 时间：2013-03-05T16:56:34.053
> 
> 标签：sharepoint, infopath

我有一个用户选择器控件，当我在预览模式下使用它时，当我单击浏览按钮时会打开一个对话框来查找用户，但在 SharePoint 服务器上部署时什么也不做。如果我在输入框中键入用户，则检查名称按钮正在工作并在这种情况下提供多项选择。由于人员选择器控件在新的 SharePoint 2013 中进行了修改，这是否会产生副作用？有没有人有同样的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:02:02.423

一旦我在表单选项中启用了功能区，它就起作用了。

表单选项 -> Web 浏览器 -> 选中在功能区或工具栏中显示 InfoPath 命令

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-23T18:10:52.670

最后得到了解决方案，当您禁用功能区时，浏览按钮也被禁用以克服此问题

*   创建一个新的空白页面或 wiki 页面。
*   插入 InfoPath 表单 WebPart 并将此 WebPart 链接到所需的表单。
*   现在，在完成所有更改后，您可以看到表单已加载，并且当您单击浏览按钮时，它应该可以正常运行。
*   如果您希望表单的外观与在新页面或选项卡中打开表单时的外观相同，请使用 CEWP 并添加样式以禁用不需要的控件，如导航菜单、搜索栏等，

# java - 使 Java 对象不可变的缺点

> ID：15229670
> 
> 赞同：0
> 
> 时间：2013-03-05T16:57:13.700
> 
> 标签：java, immutability

一位面试官问我让类不可变的缺点。关于不可变对象占用的堆空间以及它如何降低 Java 应用程序的性能，我给出了一个答案。

在 Java 中使对象不可变还有哪些其他缺点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T17:01:22.863

缺点是你必须创建一个新对象来改变它的“值”。如果你的类代表经常“改变”的东西，你会创建很多对象，给垃圾收集器增加负载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T17:08:57.230

您还应该考虑反序列化/物化不可变对象可能要困难得多，因为它通常涉及编写一个没有无参数构造函数的类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T17:10:10.640

让我们拿一个 BigInteger

```
BigInteger i1 = BigInteger.valueOf(1); 
```

它有 add 方法，但你不能给它加 1，它是不可变的，所以你要做的是

```
BigInteger i2 = i1.add(i1); 
```

即每次都创建一个新对象，即不可变BigInteger的算术运算非常慢

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-05T16:59:43.740

如果没有应用程序要求您的对象是可变的，那么将其设置为不可变并没有什么缺点，您应该这样做。

如果有应用程序要求您的对象是可变的，则使其可变。

# wpf - 当先前 Label 中的值转换器到位时，在 Button 上引发 WPF nullreference 异常

> ID：15229674
> 
> 赞同：2
> 
> 时间：2013-03-05T16:57:29.567
> 
> 标签：wpf, data-binding, nullreferenceexception

**TLDR：** 当另一个不相关的元素具有数据绑定和值转换器时，XAML 解析任何按钮元素时会引发 Nullreference 异常。当按钮被注释掉或数据绑定被删除时，表单就可以工作了。

我有一个 WPF UserControl，其中有一个列表框，其中有一个 DataTemplate，其中有多个控件。我还有一个布尔到可见性值转换器，我在控件的不同位置使用它。我将转换器的新静态引用添加到控件（与可见性值不同的布尔值）并将其绑定到标签，突然应用程序在加载控件时崩溃。

我取下绑定，一切都好起来了。不过转换器没有问题。我在它的构造函数和转换方法中设置了断点，但它永远不会到达它。例外是在 XAML 的解析中，不是在标签处，而是在声明的第一个按钮处，这 100% 与标签无关。如果我从标签中删除值转换器绑定，XAML 会正确解析并且按钮没有问题。

但是，更复杂的是，如果我在 XAML 中注释掉该按钮和所有其他按钮，它也会正确解析，并且值转换器可以正常工作。

我错过了什么？

XAML：

```
<UserControl x:Class="Customer_Management.OpportunityControl"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
                     xmlns:l="clr-namespace:Customer_Management"
         d:DesignHeight="300" d:DesignWidth="300" MaxHeight="200" BorderBrush="DarkGray" BorderThickness="1" x:Name="ucOpp">
<UserControl.Resources>
    <l:NullToVisibilityConverter NullValue="Hidden" NonNullValue="Visible" x:Key="NullToHidden"></l:NullToVisibilityConverter>
    <l:BoolToVisibilityConverter TrueValue="Visible" FalseValue="Hidden" x:Key="TrueToVisible"></l:BoolToVisibilityConverter>
    <l:BoolToVisibilityConverter TrueValue="Hidden" FalseValue="Visible" x:Key="FalseToVisible"></l:BoolToVisibilityConverter>
</UserControl.Resources>
<ScrollViewer>
<ListBox Name="lbxOpps" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" HorizontalContentAlignment="Stretch">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <Border BorderBrush="DarkGray" BorderThickness="1">
                    <Grid>

                        <StackPanel>

                            <TextBlock Text="{Binding Path=Opportunity.Name}" Margin="0,1,3,1"></TextBlock>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="{Binding Path=Opportunity.Amount, StringFormat=\{0:C\}}" Margin="0,1,3,1"></TextBlock>
                            <Button Name="btnFinishOrder" Click="btnFinishOrder_Click">Finish Order</Button>
                        </StackPanel>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock  Margin="0,1,3,1">Invoice #</TextBlock>
                                <TextBox Name="tbxInvoiceNumber" Text="{Binding Path=InvoiceNumber}"></TextBox>

                            </StackPanel>

                            <ListBox ItemsSource="{Binding Path=Batches}">
                                <ListBox.ItemTemplate>
                                    <DataTemplate>
                                        <StackPanel>
                                            <StackPanel Orientation="Horizontal">
                                                <Label FontWeight="Bold" Visibility="{Binding Path=IsOcc, Converter={StaticResource TrueToVisible}}">OCC #:</Label>

                                                <ComboBox Margin="0,0,0,0"  Name="cboLicense" SelectedValue="{Binding Path=SLicense}"  DisplayMemberPath="LicenseID" 
                                                                SelectedValuePath="LicenseID"  ItemsSource="{Binding ElementName=ucOpp, Path=Licenses}">
                                                </ComboBox>
                                                <!--<Button Margin="0,0,3,0" DataContext="{Binding ElementName=cboLicense}"  Click="Button_ClearContorl">X</Button>-->
                                                <Label Margin="0,0,3,0" >R #:</Label>
                                                <!--<Button ToolTip="Click to change" Name="btnLicFile" Click="Button_Click"  >LIC File</Button>-->
                                                <!--<Button Margin="0,0,3,0"  DataContext="{Binding ElementName=btnLicFile}" Click="Button_ClearContorl"  ToolTip="Clear">X</Button>-->
                                                <Label Margin="0,0,3,0" >P #:</Label>
                                                <ComboBox Margin="0,0,0,0" Name="cbxPNum" SelectedValue="{Binding Path=PNum}"   DisplayMemberPath="Name" 
                                                            SelectedValuePath="Id"  ItemsSource="{Binding ElementName=ucOpp, Path=Nums}">
                                                </ComboBox>
                                                <!--<Button Margin="0,0,3,0"  DataContext="{Binding ElementName=cbxPNum}"  Click="Button_ClearContorl" ToolTip="Clear">X</Button>-->
                                                <Label Margin="0,0,3,0" >U #:</Label>
                                                <ComboBox Margin="0,0,0,0"  Name="cbxUNum" SelectedValue="{Binding Path=UNum}" DisplayMemberPath="Name" 
                                                            SelectedValuePath="Id"  ItemsSource="{Binding ElementName=ucOpp, Path=Nums}">
                                                </ComboBox>
                                                <!--<Button Margin="0,0,3,0"   DataContext="{Binding ElementName=cbxUNum}" Click="Button_ClearContorl" ToolTip="Clear">X</Button>-->
                                            </StackPanel>

                                        </StackPanel>
                                    </DataTemplate>
                        </ListBox.ItemTemplate>

                    </ListBox>
                        </StackPanel>
                        <Label HorizontalAlignment="Stretch" Background="LawnGreen" FontSize="24" Opacity="0.8" VerticalAlignment="Stretch" Visibility="{Binding Path=IsProcessing, Converter={StaticResource TrueToVisible}}"></Label>
                        <Label HorizontalAlignment="Center" FontSize="24" VerticalAlignment="Center" Visibility="{Binding Path=IsProcessing, Converter={StaticResource TrueToVisible}}">Processing...</Label>
                    </Grid>
                </Border>
        </DataTemplate>
    </ListBox.ItemTemplate>

</ListBox>
</ScrollViewer> 
```

值转换器：

```
public sealed class BoolToVisibilityConverter : IValueConverter
{
    public Visibility TrueValue { get; set; }
    public Visibility FalseValue { get; set; }

    public BoolToVisibilityConverter()
    {
        // set defaults
        TrueValue = Visibility.Visible;
        FalseValue = Visibility.Collapsed;
    }

    public object Convert(object value, Type targetType,
            object parameter, CultureInfo culture)
    {
        if (!(value is bool))
            return null;
        return (bool)value ? TrueValue : FalseValue;
    }

    public object ConvertBack(object value, Type targetType,
            object parameter, CultureInfo culture)
    {
        if (Equals(value, TrueValue))
            return true;
        if (Equals(value, FalseValue))
            return false;
        return null;
    }
} 
```

# java - 表达语言和导航查询

> ID：15229677
> 
> 赞同：0
> 
> 时间：2013-03-05T16:57:35.737
> 
> 标签：java, jsf, jsf-2, el

我试图在客户端成功登录后加载一个新网页。因此检查数据库的用户名和密码，然后设置布尔变量（greetController.greet）。在表达式语言中，如果用户成功，我希望允许用户移动到下一个网页（index2）。在命令链接中，我使用了一个渲染属性，以便仅当布尔变量为真时才会发生重定向。以下项目 (1) 显示以下警告，操作值与导航案例结果不匹配。当我运行它时，它只是将索引打印到屏幕上。如果有人能纠正我的错误，我将不胜感激

谢谢

表达语言（EL）

```
<h:form>
    <h:commandButton value="login" action="#{greetController.greet}" />
    <h:commandLink rendered="#{greetController.logInSuccessful}"
        (1) **action="index2?faces-redirect=true"** 
        value="Index2" />        
</h:form> 
```

面孔-config.xml

```
<navigation-rule>
    <from-view-id>/greet.xhtml</from-view-id>
    <navigation-case>
        <from-outcome>index2</from-outcome>
        <to-view-id>/index2.html</to-view-id>
        <redirect />
    </navigation-case>
</navigation-rule> 
```

# facebook - 如何在浏览器扩展中使用 Facebook Javascript SDK？

> ID：15229679
> 
> 赞同：1
> 
> 时间：2013-03-05T16:57:53.880
> 
> 标签：facebook, facebook-graph-api, google-chrome-extension, firefox-addon, facebook-javascript-sdk

我想在浏览器扩展/侧边栏中使用 Facebook JS SDK。我已经看到了有关此的其他问题，但没有具体的答案。我不想做单独的 OAuth 处理——我更喜欢使用 JS SDK，这使得这一切都是透明的。

但是，似乎 FB.* 调用根本不会触发它们的回调。我错过了什么吗？甚至可以在非托管环境中使用 JS SDK 吗？

例子：

```
window.fbAsyncInit = function() {
    FB.init({
        appId      : 'XXX',
        status     : true,
        cookie     : true,
        xfbml      : false
    });
    FB.getLoginStatus(function(response) {
        alert('CALLBACK');
    });
}; 
```

谢谢，

马特克鲁斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-18T21:27:37.960

您可以尝试此处发布的隐形 iFrame 技术：[http ://brianmayer.com/2012/12/building-a-chrome-extension-that-c​​onnects-to-a-facebook-app/](http://brianmayer.com/2012/12/building-a-chrome-extension-that-connects-to-a-facebook-app/)

但这似乎是很多工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T18:59:14.253

如[这篇博文所述](http://everythingxaml.blogspot.com/p/blog-page_24.html)

> 不幸的是，Facebook JavaScript SDK 不能在 Chrome 扩展上运行，因为它在“chrome-extension://”协议下运行。虽然 Google 提供了 OAuth 教程，但 Facebook 解释了一种稍微简单的方法。

[Facebooks OAuth/登录说明](https://developers.facebook.com/docs/facebook-login/#client-side-flow)

# sql - Visual cobol 中的 Sql 指令错误

> ID：15229680
> 
> 赞同：0
> 
> 时间：2013-03-05T16:57:54.907
> 
> 标签：sql, cobol

我目前正在 cobol2 中创建我的项目 .. 我正在使用 microfocus 的可视化 cobol 并为我的数据库使用 Ado.net .. 在 openesql 助手的界面上，我可以在我的数据库表中插入值.. 但在表单上我的项目在按钮 1 上单击时出现错误提示“未设置 SQL 指令”

（这是我的代码

```
method-id button1_Click final private.
   procedure division using by value sender as object e as type System.EventArgs.

   EXEC SQL
    INSERT INTO NayreInventory  
    (ItemCode
    ,ItemDescription
    ,Quantity
    ,Price
     ) VALUES (
     :NayreInventory-ItemCode:NayreInventory-ItemCode-0001
    ,:NayreInventory-ItemDescription:Col-2-MEDICOL
    ,:NayreInventory-Quantity:NayreInventory-Quantity-5
    ,:NayreInventory-Price:NayreInventory-Price-150
     )
   END-EXEC. 

   invoke type MessageBox::Show("1 RECORD HAS BEEN SUCCESSFULLY ADDED", "RESULT")
   end method. 
```

）如何摆脱错误..请帮助我..我真的不需要你的帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:09:58.553

有多种[方法可以指定 Micro Focus COBOL 编译器指令](http://supportline.microfocus.com/documentation/books/sx2011sp1/cycobc.htm#s016)。指定[SQL/NOSQL 指令](http://supportline.microfocus.com/documentation/books/sx2011sp1/cyadir.htm#0147)的一种方法是将指令嵌入到 COBOL 源中，`$`在第 7 列中，如下所示：

```
 $SET SQL 
```

或者，根据您的需要：

```
 $SET NOSQL 
```

您也可以使用[命令行](http://supportline.microfocus.com/documentation/books/sx2011sp1/cyflag.htm)：

```
cob -C SQL ...source file name and other arguments 
```

点击链接了解更多详情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T18:12:16.277

你也有这样的留言号码吗？

“0149 没有设置 SQL 指令”

该消息的描述是：

“遇到了 EXEC SQL 语句，但未指定 SQL 指令。语句的处理取决于是否设置了指令 SQL；必须显式指定 SQL 或 NOSQL。

另请参阅：Server Express 用户指南中编译器指令一章中的 SQL 编译器指令。”

所以看起来你的编译脚本中缺少一个“编译器选项”。

这来自： http: [//supportline.microfocus.com/documentation/books/sx20books/emsynt.htm](http://supportline.microfocus.com/documentation/books/sx20books/emsynt.htm)

为了获取信息，我刚刚搜索了您的错误消息。

# c# - 将 node.PropertiesAsList 设置为转发器的数据源

> ID：15229686
> 
> 赞同：0
> 
> 时间：2013-03-05T16:58:16.173
> 
> 标签：c#, datasource, repeater, umbraco

我正在尝试将节点的 PropertiesList 设置为我的转发器的 DataSource。

```
rptDistributors.DataSource = node.PropertiesAsList;
rptDistributors.DataBind(); 
```

在我的中继器中，我尝试获取 umbDistributorCountry。

```
<asp:Repeater ID="rptDistributors" runat="server">
  <%# Eval("umbDistributorCountry") %>
</asp:Repeater> 
```

但是我遇到了问题，因为它不知道任何属性。

> DataBinding：“umbraco.NodeFactory.Property”不包含名为“umbDistributorCountry”的属性。

列表的内容如下所示：

![财产清单](../Images/e395953ab8d17f3be6512c5323237718.png)

有任何想法吗？谢谢，托马斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:34:27.260

线索在错误中......

> DataBinding：“umbraco.NodeFactory.Property”**不包含**名为“umbDistributorCountry”的属性。

`umbDistributorCountry`不是**.NET 属性**，而是调用的属性的值`Alias`。**Umbraco 属性**包含屏幕截图中的三个**.NET 属性**，因此您只能访问这些...

```
<%# Eval("Alias") %>
<%# Eval("Value") %>
<%# Eval("Version") %> 
```

假设您想显示该特定分销商的所有**Umbraco 属性**（我猜它存储在 中`node`），您将需要这样的东西......

```
<asp:Repeater ID="rptDistributors" runat="server">
    <ItemTemplate>
        <%# Eval("Alias") %> : <%# Eval("Value") %> <br />
    </ItemTemplate>
</asp:Repeater> 
```

# c# - 将对象列表绑定到面向列表的 GUI 组件（c#）

> ID：15229690
> 
> 赞同：0
> 
> 时间：2013-03-05T16:58:29.040
> 
> 标签：c#, winforms, listview

我有（的一个实例）一个类 X，它管理一个对象列表 L，并有它自己的形式来显示它的一些属性。在我的表单中，我有一个 ListView 和一个 TreeView 对象，我在其中写入了 L 的一些属性。稍后，我想响应单击 ListView/TreeView 的实体，为此我需要解析实体的字符串回到它所代表的对象。我现在要做的是枚举 L 的对象，寻找具有该字符串的对象，但显然它仅适用于唯一字符串。此外，这样枚举似乎是一种不好的做法，因为我之前已经掌握了这些信息，而且在资源方面也是如此。我的问题：有没有办法以消除这种情况的方式将 L 绑定到 GUI 组件？

谢谢。

# java - 扫描仪没有扫描我的输入

> ID：15229691
> 
> 赞同：6
> 
> 时间：2013-03-05T16:58:30.517
> 
> 标签：java, java.util.scanner

我正在尝试读取一行，然后进入 if 语句。但是在它有红色第一个输入之后它就终止了。我不知道出了什么问题，我无法弄清楚

```
import java.util.Scanner;

public class mainen {

    public static void main(String[] args) {
        Formler form = new Formler();
        Scanner Sscan = new Scanner(System.in);
        Scanner Dscan = new Scanner(System.in);
        String input;
        System.out.println("Formler: Molmassa");
        input = Sscan.nextLine();

        if(input == "molmassa" || input == "Molmassa"){
            double m;
            double M;
            System.out.println("Massa: "); m = Dscan.nextDouble();
            System.out.println("Molmassa: "); M = Dscan.nextDouble();
            System.out.println(form.getMolmassa(m, M));
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-05T16:59:56.747

`if`将您的声明更改为：

```
if(input.equalsIgnoreCase("molmassa") ) {  } 
```

然后它应该按您的预期工作。`equals()`请记住始终使用or`equalsIgnoreCase()`方法比较字符串。`==`比较对象引用而不是实际值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T17:01:32.900

您需要替换等号检查：

```
 if(input == "molmassa" || input == "Molmassa"){ 
```

有以下内容；

```
 if(input.equals("molmassa") || input.equals("Molmassa")){ 
```

第一个检查`String`s 是否是同一个对象，而第二个检查它们是否是相同的值，这就是你需要的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-05T17:01:40.337

问题在于您的`if`条件将其更改为

```
if(input.equalsIgnoreCase("molmassa) ) 
```

每件事都应该正常工作。

您不需要单独`Scanner`获取`String`和`double`输入的另一件事，您可以将一个`Scanner`对象用于两个输入。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-05T16:59:46.917

```
if(input == "molmassa" || input == "Molmassa"){} 
```

您应该将`String`对象与`equals`方法或`equalsIgnoreCase`方法相等。

```
if(input.equalsIgnoreCase("Molmassa")){} 
```

`==`用于原始相等检查。

# java - 重构：双键和泛型方法

> ID：15229695
> 
> 赞同：0
> 
> 时间：2013-03-05T16:58:53.407
> 
> 标签：java, design-patterns, refactoring

我有一些构建 Hibernate Search 模型的通用方法。

基本上它需要 2 个键和一些输入。键1！=键2

例子

```
public SearchModel getSearchModelA(String key1, String key2, List<String>)...

public SearchModel getSearchModelB(String key1, String key2, String input)... 
```

我可以知道我应该如何重构这个类，因为

1）客户端总是需要提供2个密钥（最好的方法将它们结合起来？

调用者示例

```
Helper.getSearchModelB(CONSTANTS.getKeyABC, CONSTANTS.getKeyABC,abc) 
```

并且密钥可能很长。

2) 班级越来越大，我希望班级保持在 1000 行以下

我已经提供了一个带有所有帮助方法的静态类来创建它，`SearchModel`但是调用者是一个 Facade 并且很混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T17:18:14.367

[您可以使用varargs](http://www.java-tips.org/java-se-tips/java.lang/using-the-varargs-language-feature.html)，而不是使用 List 作为最终参数：

```
public SearchModel getSearchModelA(String key1, String key2, String... input) 
```

这将接受单字符串参数（但将其放入单元素数组）或多字符串参数（表示为字符串数组而不是列表）。

# jquery - 如何根据关系使用jQuery在表格行之间画一条线

> ID：15229702
> 
> 赞同：3
> 
> 时间：2013-03-05T16:59:32.950
> 
> 标签：jquery, relationship, lines

我正在尝试复制此图像，因为您可以看到 HTML 有 2 个点和一条连接它们的线。我在 Photoshop 中这样做是为了展示我想要实现的目标。到目前为止，大多数 CANVAS 还没有帮助我做到这一点。因为我必须确定精确的曲率和高度，并且这种关系可以根据另一个表之间的表行关系的位置而变小或变大。

![在此处输入图像描述](../Images/cc01cee517426d6842b3b205ecdf33e1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:09:05.267

我会尝试 Raphael.JS [http://raphaeljs.com/](http://raphaeljs.com/) [http://raphaeljs.com/curver.html](http://raphaeljs.com/curver.html)

您可以使用 jQuery 的偏移量[http://api.jquery.com/offset/获取 DOM 元素的 x/y 坐标](http://api.jquery.com/offset/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T17:14:01.063

您可能想要使用 quadraticCurveTo 函数。 [https://developer.mozilla.org/en-US/docs/HTML/Canvas/Tutorial/Drawing_shapes#Bezier_and_quadratic_curves](https://developer.mozilla.org/en-US/docs/HTML/Canvas/Tutorial/Drawing_shapes#Bezier_and_quadratic_curves)

如果您已经拥有两点中的 x,y，则您的状态良好。

您的控制点将是曲线的峰值。

```
xc = control x

xy = control y

y1 = point 1 y

y2 = point 2 y 
```

保持`xc`静态并计算`yc = (y2 - y1) / 2`

# svn - 将 SVN 集成到现有项目中

> ID：15229712
> 
> 赞同：0
> 
> 时间：2013-03-05T16:59:57.333
> 
> 标签：svn, version-control, versioning, ubersvn

我需要一些帮助将 SVN 实施到现有项目中。

目前，我有项目生产副本：

/home/www/myproject

但是有些文件和文件夹我不想用 SVN 跟踪，例如：

/home/www/myproject/images/

/home/www/myproject/static_info.txt

如何在不破坏生产副本的情况下将 SVN 添加到此环境？并且无需将我要排除的文件/文件夹添加到存储库中。

最重要的是，在每次提交后自动更新生产副本的最佳方式是什么。

现在我刚刚建立了一个空白仓库。在 /opt/ubersvn/repositories/myproject 上使用 UberSVN...

我已经阅读了另一个问题：

[向现有项目添加版本控制](https://stackoverflow.com/questions/117426/best-way-to-add-version-control-to-existing-project)

但是我仍然感到迷茫（我以前从未使用过SVN）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:50:00.580

关于图像和 static_info.txt - 查看 svn:ignore 属性，这将允许您从版本控制中排除文件：

[http://svnbook.red-bean.com/en/1.1/ch07s02.html](http://svnbook.red-bean.com/en/1.1/ch07s02.html)

至于自动更新，您可以查看 post commit hooks：

[https://mikewest.org/2006/06/subversion-post-commit-hooks-101](https://mikewest.org/2006/06/subversion-post-commit-hooks-101)

您可以编写一个脚本，该脚本将自动从那里开始并更新生产环境。重点是“可以”。这听起来像是一种通过错误提交来破坏生产的直接方法，您可能希望在执行此操作之前测试是否存在损坏。

此外，由于 svn 会在各处创建 .svn 文件夹，因此您应该确保它不会干扰您的环境，但在这里我无法真正帮助您。

# java - Mp3 文件的傅里叶变换

> ID：15229713
> 
> 赞同：-1
> 
> 时间：2013-03-05T17:00:04.080
> 
> 标签：java, mp3, fft

我想对 Mp3 文件进行傅里叶变换。为此，我首先使用该文件读取该文件`AudioInputStream`，然后将其转换为所需的音频格式，

```
AudioFormat decodedFormat = newAudioFormat(AudioFormat.Encoding.PCM_SIGNED,
        baseFormat.getSampleRate(), 16, baseFormat.getChannels(),
        baseFormat.getChannels() * 2, baseFormat.getSampleRate(), false); 
```

它给了我一个非常大的数组字节。现在将此字节数组分成小块（4096 字节）并将其传递给傅立叶变换函数并继续整个数组。这个过程减慢了我的系统。处理一首 mp3 歌曲需要 15 分钟。那么我该如何解决这个问题呢？我正在将此代码用于傅里叶变换 - [http://introcs.cs.princeton.edu/java/97data/FFT.java.html](http://introcs.cs.princeton.edu/java/97data/FFT.java.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T21:03:17.830

如果需要 900 秒（15 分钟）来生成 9000 个具有 4k 点的 FFT（即每个 FFT 100 毫秒），那么您的 FFT 实现就被破坏了。

您需要找到（更）更有效的 FFT 实现。

# c - 计算程序执行时间

> ID：15229722
> 
> 赞同：3
> 
> 时间：2013-03-05T17:00:46.793
> 
> 标签：c, windows

我有一个 C 语言程序，它必须执行一系列其他程序。我需要获取每个程序的执行时间，以便创建这些时间的日志。

我虽然使用 system() 来运行每个程序，但我不知道如何获得执行时间。有没有办法做到这一点？

这些程序是“快速”的，所以我需要比秒更高的精度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T17:05:34.670

你至少有 4 种方法可以做到这一点。

## (1)

一个起点：

```
 #include <stdio.h>
 #include <stdlib.h>
 #include <time.h>

 int main ( void )
 {
    clock_t start = clock();

    system("Test.exe");

    printf ("%f\n seconds", ((double)clock() - start) / CLOCKS_PER_SEC);
    return 0;
 } 
```

## (2)

如果您在 Windows 中并且可以访问 Window API，您也可以使用[`GetTickCount()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724408%28v=vs.85%29.aspx)：

```
 #include <stdio.h>
 #include <stdlib.h>
 #include <windows.h>

 int main ( void )
 {
    DWORD t1 = GetTickCount();

    system("Test.exe");

    DWORD t2 = GetTickCount();

    printf ("%i\n milisecs", t2-t1);
    return 0;
 } 
```

## (3)

最好的是

```
#include <stdio.h>
#include <stdlib.h>
#include <windows.h>

int main(void)
{
    LARGE_INTEGER frequency;
    LARGE_INTEGER start;
    LARGE_INTEGER end;
    double interval;

    QueryPerformanceFrequency(&frequency);
    QueryPerformanceCounter(&start);

    system("calc.exe");

    QueryPerformanceCounter(&end);
    interval = (double) (end.QuadPart - start.QuadPart) / frequency.QuadPart;

    printf("%f\n", interval);

    return 0;
} 
```

* * *

## (4)

问题被标记为`C`但为了完整起见，我想添加`C++11`功能：

```
int main()
{
  auto t1 = std::chrono::high_resolution_clock::now();

  system("calc.exe");

  auto t2 = std::chrono::high_resolution_clock::now();
  auto x = std::chrono::duration_cast<std::chrono::nanoseconds>(t2-t1).count();

  cout << x << endl;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T17:07:45.803

```
 start = clock();  // get number of ticks before loop
     /*
      Your Program
    */

    stop  = clock();  // get number of ticks after loop
    duration = ( double ) (stop - start ) / CLOCKS_PER_SEC; 
```

# knockout.js - 隐藏带有敲除数据绑定的 html 表

> ID：15229723
> 
> 赞同：1
> 
> 时间：2013-03-05T17:00:46.470
> 
> 标签：knockout.js

我知道如果没有这样的数据，我们可以隐藏一个表：**可见：Vehicles().length>0**

```
<table data-bind="visible: Vehicles().length>0">
    <thead><tr><th>Brand</th><th>Model</th><th>Registration</th><th></th></tr></thead>
    <tbody data-bind="foreach: Vehicles">
        <tr data-bind="click: $root.goToVehicle">
            <td data-bind="text: Brand"></td>
            <td data-bind="text: Model"></td>
        </tr>     
    </tbody>
</table> 
```

Vehicles 是一个可观察的对象。

现在我有另一个场景：

```
<table data-bind="with: chosenCategoryData">
    <thead><tr><th>Brand</th><th>Model</th><th>Registration</th><th></th></tr></thead>
    <tbody data-bind="foreach: Vehicles">
        <tr data-bind="click: $root.goToVehicle">
            <td data-bind="text: Brand"></td>
            <td data-bind="text: Model"></td>
        </tr>     
    </tbody>
</table> 
```

如您所见，包含填充 html 表的数据的 Vehicles 对象包含在另一个名为 selectedCategoryData 的对象（可观察）中。

我尝试隐藏表格，`visible: Vehicles().length>0`但出现错误，可能是因为车辆不可观察。

我该如何进行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T17:12:04.597

IIRC，你不能在同`with`一个. 你可以把它包在另一个`visible``data-bind``<div>`

```
<div data-bind="with: chosenCategoryData">
    <table data-bind="visible: Vehicles.length">...</table>
</div> 
```

或使用虚拟语法：

```
<!-- ko with: chosenCategoryData -->
<table data-bind="visible: Vehicles.length">
<!-- /ko --> 
```

看看这个[jsfiddle](http://jsfiddle.net/LaDgd/2/)。如果`Vehicles()`那是一个`observableArray`.

# three.js - PlaneGeometry Mesh 在 Three.JS 中出现黑屏

> ID：15229725
> 
> 赞同：2
> 
> 时间：2013-03-05T17:00:53.787
> 
> 标签：three.js

我是 ThreeJS 的新手。我想为场景设置 BG 图像，当我运行以下代码时，我只有空白（黑色）屏幕。

谁能告诉我以下代码中的问题是什么？

```
$().ready(function(){

    var width= window.innerWidth;
    var height = window.innerHeight;

    var renderer = new THREE.WebGLRenderer({antialias: true});
    renderer.setSize( width, height );
    document.body.appendChild(renderer.domElement);
    renderer.setClearColorHex(0xffffff, 1.0);
    // renderer.clear(); 

    /*SEttingup BG*/
    var bg = new THREE.Mesh(
      new THREE.PlaneGeometry(2, 2, 0,0),
      new THREE.MeshBasicMaterial({map: new THREE.ImageUtils.loadTexture("2/bharatpriyankaweddingphotography (6).jpg")})
    );

    // The bg plane shouldn't care about the z-buffer.
    bg.materials[0].depthTest = false;
    bg.materials[0].depthWrite = false;
    console.log(bg);
    var bgScene = new THREE.Scene();
    var bgCam = new THREE.Camera();
    bgScene.add(bgCam);
    bgScene.add(bg);

    // renderer.autoClear = false;
    renderer.clear();
    renderer.render(bgScene, bgCam);
    // renderer.render(scene, cam);

    }); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-29T03:20:58.563

听上去，我相信您想使用着色器将飞机投影到屏幕上并将其用作背景。这并不像看起来那么简单，据我所知，three.js 将需要一个自定义着色器，（除非您想在 three.js 中处理投影矩阵）。

着色器本身很简单，我最近在 webgl facebook 组上回答了一个类似的问题，粘贴了答案：

```
var yourPlaneGeometry = new THREE.PlaneGeometry(2,2,1,1); 
```

着色器

```
varying vec2 vUv;

void main() {
vUv = uv;
vec4 transformedPos = vec4( position.xy, 0.01, 1.0 );
gl_Position = transformedPos;
} 
```

这会将标准 three.js 平面呈现为全屏四边形

```
//read the uv value from the vertex shader
varying vec2 vUv;
uniform sampler2D yourTexture; 
void main(){
vec3 tex = texture2d(yourTexture,vUv).xyz;
gl_FragColor = vec4(tex, 1.0);
} 
```

您需要使用这两个作为顶点和片段着色器创建一个 shaderMaterial，并且您可能希望将深度测试设置为 false

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T21:03:12.173

如果你的画布要用完整个窗口，那么你也可以通过 CSS 设置背景。例如：

```
<style type="text/css">
body{
  margin: 0px;
  overflow: hidden;
  background-image:url('foo.jpg');
  background-color:blue;  
}
</style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T17:42:59.230

您的相机没有位置或目标。

# jquery - jQuery Form 插件 ASP.NET MVC 3 处理 PartialView

> ID：15229726
> 
> 赞同：0
> 
> 时间：2013-03-05T17:00:53.927
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-partialview, jquery-forms-plugin

我正在编写一个用于添加产品的 ASP.NET MVC 页面。该页面将显示带有添加按钮的表单以及产品列表。当用户单击添加时，我希望将新产品添加到列表中，并重置表单。我正在尝试使用 jQuery 表单插件而不使用 Ajax.BeginForm 等来执行此操作。我已将产品列表放入部分视图中。

产品类如下：

```
public class Product
{
    public int Id { get; set; }
    public string Description { get; set; }
    public decimal Price { get; set; }
} 
```

我正在使用视图模型：

```
public class ProductViewModel
{
    public ProductViewModel()
    {
    }

    public ProductViewModel(AjaxDataEntryContext db)
    {
        Products = db.Products.ToList();
        NewProduct = new Product();
    }
    public List<Product> Products { get; set;}
    public Product NewProduct { get; set;}
} 
```

控制器这样做：

```
public class ProductController : Controller
{
    private AjaxDataEntryContext db = new AjaxDataEntryContext();

    [HttpGet]
    public ViewResult AjaxForm()
    {
        return View(new ProductViewModel(db));
    }

    [HttpPost]
    public ActionResult AjaxForm(ProductViewModel viewModel)
    {
        db.Products.Add(viewModel.NewProduct);
        db.SaveChanges();
        return PartialView("_ProductList", db.Products.ToList());
    }
} 
```

我的cshtml如下：

```
@model AjaxDataEntry.ViewModels.ProductViewModel
@{
    ViewBag.Title = "Index";
}
@Html.Partial("_ProductList", Model.Products)
@using (Html.BeginForm("AjaxForm", "Product", null, FormMethod.Post, new { id = "myForm1" }))
{
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Product</legend>
        <div class="editor-label">
            @Html.LabelFor(model => model.NewProduct.Description)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.NewProduct.Description)
            @Html.ValidationMessageFor(model => model.NewProduct.Description)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.NewProduct.Price)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.NewProduct.Price)
            @Html.ValidationMessageFor(model => model.NewProduct.Price)
        </div>
        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}

<script type="text/javascript">
    $(document).ready(function () {
        var options = {
            target: '#producttable',   // target element(s) to be updated with server response 
            beforeSubmit: showRequest,  // pre-submit callback 
            success:       showResponse,  // post-submit callback 
            replaceTarget: true,
            dataType:  html,        // 'xml', 'script', or 'json' (expected server response type) 
            clearForm: true        // clear all form fields after successful submit 
        };

        // bind form using 'ajaxForm' 
        $('#myForm1').ajaxForm(options);
    });

    // pre-submit callback 
    function showRequest(formData, jqForm, options) {
        var queryString = $.param(formData);
        alert('About to submit: \n\n' + queryString);
        return true;
    }

    // post-submit callback 
    function showResponse(responseText, statusText, xhr, $form) {
        alert('status: ' + statusText + '\n\nresponseText: \n' + responseText +
        '\n\nThe output div should have already been updated with the responseText.');
    }
</script> 
```

最后是上面页面（和控制器）中引用的 _ProductList 部分：

```
@model IEnumerable<AjaxDataEntry.Models.Product>
<div id="producttable">
    <table>
        <tr>
            <th>
                Description
            </th>
            <th>
                Price
            </th>
            <th>
            </th>
        </tr>
        @foreach (var item in Model)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.Description)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Price)
                </td>
                <td>
                    @Html.ActionLink("Edit", "Edit", new { id = item.Id }) |
                    @Html.ActionLink("Details", "Details", new { id = item.Id }) |
                    @Html.ActionLink("Delete", "Delete", new { id = item.Id })
                </td>
            </tr>
        }
    </table>
</div> 
```

我的问题是，当我单击添加时，产品添加正确，我看到 showRequest 消息，但是当屏幕刷新时，我看到的只是列表，即部分视图，而不是完整视图。我也没有看到 showResponse 消息。

有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:19:13.617

ShowResponse 没有被调用，因为您正在提交整个页面，而不是使用`Html.BeginForm(...`，您应该使用`Ajax.BeginForm(...`。

# javascript - 显示一个 div onclick 并隐藏触发它的图像

> ID：15229732
> 
> 赞同：4
> 
> 时间：2013-03-05T17:01:24.110
> 
> 标签：javascript, onclick, show-hide

我想使用以下代码在点击时显示一个隐藏的 div，但是当它显示时，我希望我用来触发它的图像消失。这是我到目前为止所拥有的：

HTML：

```
<img src="Icons/note_add.png" onclick="show('comment')"/>&nbsp;&nbsp;<div id="comment" style="float:left;display:none;"><textarea name="textfield6" cols="30" rows="2" id="textfield4" class="text"></textarea>&nbsp;<a href="#" class="buttonintable">Submit</a></div> 
```

JS：

```
function show(target){
document.getElementById(target).style.display = 'block';
}
function hide(target){
document.getElementById(target).style.display = 'none';
} 
```

如何调整它以隐藏触发它的元素？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T17:08:28.627

吉米的回答会起作用，但是要让它显示出来（我假设你想要那个），你应该在图像标签中添加一个 id ......以下应该可以工作。

```
<img id="clickMeId" src="Icons/note_add.png" onclick="show('comment')"/>&nbsp;&nbsp;<div id="comment" style="float:left;display:none;"><textarea name="textfield6" cols="30" rows="2" id="textfield4" class="text"></textarea>&nbsp;<a href="#" class="buttonintable">Submit</a></div>

function show(target){
document.getElementById(target).style.display = 'block';
document.getElementById("clickMeId").style.display = 'none';
}
function hide(target){
document.getElementById(target).style.display = 'none';
document.getElementById("clickMeId").style.display = 'block';
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T17:04:43.413

[编辑]

**把函数改成这样：**

```
function show(this, target){
    document.getElementById(target).style.display = 'block';
    this.style.display = 'none';
} 
```

**而 onclick 属性对此：**

```
<img onclick="show(this, 'comment')" /> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-13T12:58:42.133

[受克里斯的回答](https://stackoverflow.com/a/15229884/274502)启发，我宁愿简化上下文以突出重要的内容：

```
<img id="clickMeId" onclick="show('comment'); hide('clickMeId')" alt="click me">

<div id="comment" style="display:none;"> yada yada </div>

<script>
  function show (toBlock){
    setDisplay(toBlock, 'block');
  }
  function hide (toNone) {
    setDisplay(toNone, 'none');
  }
  function setDisplay (target, str) {
    document.getElementById(target).style.display = str;
  }
</script>
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T17:10:15.963

在“onclick”上发送第二个参数（this），即图像元素本身

```
<img src="Icons/note_add.png" onclick="show('comment', this)"/> 
```

然后该函数将对其应用“无显示”：

```
function show(target, trigger){
   document.getElementById(target).style.display = 'block';
   trigger.style.display = "none"
} 
```

但所有这些都是突兀的 Javascript 代码，我建议您使用不突兀的 JS 代码。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-03-05T17:04:53.480

使用 jquery 这很容易。$("#yourdivid").hide();

# java - 在 Struts 1 表单中显示列表

> ID：15229738
> 
> 赞同：1
> 
> 时间：2013-03-05T17:01:57.590
> 
> 标签：java, struts, taglib, struts-1

我必须编写一个后台页面，以确定哪些商店必须显示在前台页面上，在 Struts 1 应用程序中。所以我有一个包含在表格中的商店列表（代码中的精品店）。

表格：

```
public class ListeBoutiquesForm extends ActionForm {

    private List<Boutique> boutiques = new ArrayList<Boutique>();

    public List<Boutique> getBoutiques() {
        return boutiques;
    }

    public void setBoutiques(List<Boutique> boutiques) {
        this.boutiques = boutiques;
    }

} 
```

和保存动作：

```
public ActionForward sauverBoutiques(ActionMapping mapping, ActionForm form, HttpServletRequest request,
            HttpServletResponse response) throws Exception {
    ListeBoutiquesForm vlbf = (ListeBoutiquesForm) form;
    for (Boutique boutique : vlbf.getBoutiques()) {
        boutiqueService.updateBoutique(boutique);
    }
    request.getSession().removeAttribute("ListBoutiques");
    return listeSites(mapping, form, request, response);
} 
```

Boutique 类包含一个 id、一个名称和一个名为“selected”的布尔值。我想为我的精品店列表的每个元素显示一个带有复选框的名称，以及一个调用我的保存操作的提交按钮，但是我缺乏编写 JSP 的 Struts taglib 知识。你能帮我吗？我知道它应该涉及 a `logic:iterate`， a`html:checkbox`并且可能是 a`html:hidden`来存储 id，但我觉得缺少一些东西并且有些东西我不明白。可以这么说，它们是如何联系在一起的？如何在我的保存操作中取回具有更新值的 ListeBoutiquesForm？

**编辑：**

按照 Susie 的建议，我想出了以下 JSP：

```
<%@ taglib uri="/WEB-INF/struts-tiles.tld" prefix="tiles" %>
<%@ taglib uri="/WEB-INF/struts-logic.tld" prefix="logic" %>
<%@ taglib uri="/WEB-INF/struts-bean.tld" prefix="bean" %>
<%@ taglib uri="/WEB-INF/struts-html.tld" prefix="html" %>
<%@ taglib uri="/WEB-INF/struts-nested.tld" prefix="nested" %> 

<html:errors/>
<html:form action="/admin/boutiqueviparis">
    <input type="hidden" name="reqCode" value="sauverBoutiques" />

    <table class="tableStatic noHead">
        <logic:notEmpty name ="viparisListeBoutiquesForm" property="boutiques">
            <logic:iterate id="boutique" name ="viparisListeBoutiquesForm" property="boutiques">
                <tr>
                    <td>
                        <html:hidden name ="boutique" property="id" />
                        <bean:write name="boutique" property="nom" />
                    </td>
                    <td>
                        <html:checkbox name="boutique" property="selected" value="true" />
                    </td>
                </tr>
            </logic:iterate>
            <html:submit styleClass="boutonrouge" value="Valider" onclick="this.form.reqCode.value='sauverBoutiques';return window.confirm('Modification validée');"/>
        </logic:notEmpty>
    </table>
</html:form> 
```

这将显示商店列表和复选框，这些复选框将根据“选定”字段的值进行检查。但是我的保存操作不起作用。如果有人有想法，这是我的保存操作：

```
public ActionForward sauverBoutiques(ActionMapping mapping, ActionForm form, HttpServletRequest request,
        HttpServletResponse response) throws Exception {
    ViparisListeBoutiquesForm vlbf = (ViparisListeBoutiquesForm) form;
    for (Boutique boutique : vlbf.getBoutiques()) {
        log.debug("########## BOUTIQUE nom : "+boutique.getNom()+" selected :"+boutique.isSelected());
        boutiqueService.updateBoutique(boutique);
    }
    request.getSession().removeAttribute("viparisListBoutiques");
    return listeSites(mapping, form, request, response);
} 
```

我可以在我的 Hibernate 日志中看到更新语句，但实际上没有保存任何内容。我记录了我的`selected`字段的值，实际上，它是初始值，在我在显示的表单中更改它之前。有点莫名其妙...

**编辑：**

实际上，`<html:checkbox name="boutique" property="selected" value="id" />`在最终的 HTML 中显示为`<input type="checkbox" name="selected" value="id">`，带有“id”而不是 id 值。但我不知道如何解决这个问题......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T18:01:35.620

以下是您应该做的事情。struts-config.xml 文件 将所有内容粘合在一起的配置文件。

```
parameter ---> which method to call
name---> name of the action form
path---> URL
type---> action class that is invoked by the above url. 
forward---->where to forward once it's done. 
```

如您所见，我在 myMethod() 中设置列​​表并在下面的 jsp 中访问。

**JSP 页面：**

```
 <form name="myForm" action="myAction.do" method="post">
        <logic:notEmpty name="myForm" property="myList">
                    <logic:iterate id="boutique" name="myForm" property="myList"            type="com.Boutique">                
                        <tr>
                            <td><bean:write name="boutique" property="id" /> </td>
                            <td><bean:write name="boutique" property="name" /></td>
                            <td><bean:write name="boutique" property="selected" /></td>
                        </tr>
                    </logic:iterate>
        </logic:notEmpty> 
    </form> 
```

**在我的动作类方法中：**

```
public ActionForward myMethod(ActionMapping actionMapping,
                ActionForm myForm, HttpServletRequest httpServletRequest,
                HttpServletResponse httpServletResponse) throws Exception {
                List<Boutique> myList = new ArrrayList<Boutique>();
                form.setMyList(myList);
                            return mapping.findForward("success");

} 
```

**struts-config.xml**

```
<struts-config>
    <form-beans>
        <form-bean name="myForm" type="com.usps.nom.tops.web.struts.form.transportation.ITransportationInquiryDynaForm">
        </form-bean>
    </form-beans>
    <action-mappings>
        <action path="/myAction" type="com.MyAction"
                name="myForm" scope="session" validate="false"
                parameter="myMethod">               
                <forward name="success" path="tile.view"></forward>     
        </action>
    </action-mappings>
</struts-config> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:10:07.743

最后，我根本没有使用 Struts html:checkbox 标签。经过一些研究，似乎 Struts 1 不能很好地处理复选框......

那是我当前的 JSP：

```
<%@ taglib uri="/WEB-INF/struts-tiles.tld" prefix="tiles" %>
<%@ taglib uri="/WEB-INF/struts-logic.tld" prefix="logic" %>
<%@ taglib uri="/WEB-INF/struts-bean.tld" prefix="bean" %>
<%@ taglib uri="/WEB-INF/struts-html.tld" prefix="html" %>
<%@ taglib uri="/WEB-INF/struts-nested.tld" prefix="nested" %> 

<html:errors/>
<html:form action="/admin/boutiqueviparis">
    <input type="hidden" name="reqCode" value="sauverBoutiques" />

    <table class="tableStatic noHead">
        <logic:notEmpty name ="viparisListeBoutiquesForm" property="boutiques">
            <logic:iterate id="boutique" name ="viparisListeBoutiquesForm" property="boutiques">
                <tr>
                    <td>
                        <html:hidden name="boutique" property="id" />
                        <bean:write name="boutique" property="nom" />
                    </td>
                    <td>
                        <logic:equal name="boutique" property="selected" value="true">
                            <input type="checkbox" name="boutique_<bean:write name="boutique" property="id" />" value="<bean:write name="boutique" property="id" />" checked="1" />
                        </logic:equal>
                        <logic:equal name="boutique" property="selected" value="false">
                            <input type="checkbox" name="boutique_<bean:write name="boutique" property="id" />" value="<bean:write name="boutique" property="id" />" />
                        </logic:equal>
                    </td>
                </tr>
            </logic:iterate>
            <html:submit styleClass="boutonrouge" value="Valider" onclick="this.form.reqCode.value='sauverBoutiques';return window.confirm('Modification validée');"/>
        </logic:notEmpty>
    </table>
</html:form> 
```

# delphi - 如何将字符串作为过程执行

> ID：15229739
> 
> 赞同：2
> 
> 时间：2013-03-05T17:02:02.503
> 
> 标签：delphi, procedure

我在运行时制作了按钮组件，我希望在那里单击的每个按钮都执行独特的过程。

例如

```
exec('showmessage('+quotedstr('hello word')+');'); 
```

如何在delphi 7中执行字符串作为过程，如php中的eval或delphi xe3中的livebinding？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T17:07:43.580

德尔福没有这样的设施。它是一种编译语言，编译器只运行在开发者的系统上；您不允许将编译器与您的程序一起分发。

相反，您可以使用多种脚本工具中的任何一种，例如[DWScript](http://sourceforge.net/projects/dws/)。它支持类似于 Delphi 的语言语法。它有一些内置函数，您可以从宿主程序中定义其他函数以在脚本环境中公开。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T17:07:44.960

您尝试做的事情在 Delphi 中是不可能的。它没有口译员。您需要的是嵌入脚本语言。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-22T08:18:16.430

在寻找答案的同时看看这个

[http://blog.angress.de/cracking/dynamicprocexecution_delphi/](http://blog.angress.de/cracking/dynamicprocexecution_delphi/)

# c++ - 复制另一个进程正在使用的文件

> ID：15229740
> 
> 赞同：-2
> 
> 时间：2013-03-05T17:02:05.297
> 
> 标签：c++, c, windows, file, file-io

我想克隆并使用另一个进程正在打开/使用的文件。这实际上根本不可能吗？

我想可能定期复制文件内容（即每次复制 5 分钟并在我的程序中使用该副本）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T17:04:57.340

如果其他进程只打开文件进行读取，应该是可以的；但是，如果它打开它是为了读取和写入（或只是写入），那么它将锁定文件，以便其他进程（包括您的进程）无法打开它。至少在 Windows 中是这样的。

# javascript - 自定义jScrollPane滚动条可以拖得太低

> ID：15229741
> 
> 赞同：0
> 
> 时间：2013-03-05T17:02:06.030
> 
> 标签：javascript, jquery, html, css, jscrollpane

我正在创建一个自定义 jScrollPane 滚动条，但我无法找到一种方法来限制垂直拖动距离以防止它滚动到 div 切断的位置以下。

见[http://jsfiddle.net/wE8ry/](http://jsfiddle.net/wE8ry/)

```
body
{
background: black;
}

.scroll-pane
{
width: 300px;
height: 250px;
overflow: auto;
background: black;
color: white;
}

.jspContainer
{
overflow: hidden;
position: relative;
}

.jspPane
{
position: absolute;
}

.jspVerticalBar
{
position: absolute;
top: 2px;
right: 3px;
width: 5px;
height: 100%;
background: red;
}

.jspHorizontalBar
{
position: absolute;
bottom: 0;
left: 0;
width: 100%;
height: 5px;
background: red;
}

.jspVerticalBar *,
.jspHorizontalBar *
{
margin: 0;
padding: 0;
}

.jspCap
{
display: none;
}

.jspHorizontalBar .jspCap
{
float: left;
}

.jspTrack
{
background: black;
position: relative;
}

.jspDrag
{
background: #fccb00;
position: relative;
top: 0;
left: 0;
cursor: pointer;
-moz-border-radius: 2px;
-webkit-border-radius: 2px;
border-radius: 2px;
-webkit-box-shadow: 0px 0px 2px 2px #985400;
-moz-box-shadow: 0px 0px 2px 2px #985400;
box-shadow: 0px 0px 2px 2px #985400;

}

.jspHorizontalBar .jspTrack,
.jspHorizontalBar .jspDrag
{
float: left;
height: 100%;
}

.jspArrow
{
background: #50506d;
text-indent: -20000px;
display: block;
cursor: pointer;
}

.jspArrow.jspDisabled
{
cursor: default;
background: #80808d;
}

.jspVerticalBar .jspArrow
{
height: 16px;
}

.jspHorizontalBar .jspArrow
{
width: 16px;
float: left;
height: 100%;
}

.jspVerticalBar .jspArrow:focus
{
outline: none;
}

.jspCorner
{
background: #eeeef4;
float: left;
height: 100%;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T02:16:32.777

您的问题源于您对 .jspdrag 所做的更改： `box-shadow: 0px 0px 2px 2px #985400;`

我假设您的 hack 恰好是 4 个像素。

# html - 网页刷新时，默认焦点不位于 SharePoint 页面顶部

> ID：15229743
> 
> 赞同：0
> 
> 时间：2013-03-05T17:02:13.113
> 
> 标签：html, sharepoint, coldfusion, focus

我有一个用 ColdFusion5 编写的注册页面，它嵌套在 SharePoint 2010 页面中。
当我点击注册上的提交按钮时，注册页面按要求进入确认页面，但我需要将 SharePoint 页面滚动到最顶部。

我在网上研究并尝试过：

通过 form 标签将 #top 添加到注册页面：

```
<form name="form1" method="post" onsubmit="return NonMemberValidateForm2()" action="processRegistration.cfm#top"> 
```

在确认页面的onload函数中加入location.href='#top'：

```
<body onload="location.href='#top'"> 
```

但是，这些都不起作用。有任何想法吗？

编辑：我的 SharePoint 页面上有一个 Web 部件查看器。它占了很大一部分，所以我必须在实际的 SharePoint 页面上向下滚动才能查看整个内容（我已经禁用了 Web 部件上的滚动条）。当我向下滚动到 SharePoint 页面的底部时，我单击查看器中的一个按钮。这会刷新查看器中的页面，但我仍然位于 SharePoint 页面的底部。我希望能够将一些代码附加到该按钮，使外部 SharePoint 页面一直滚动到顶部。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:43:51.423

正如 Marek 在他的评论中指出的那样，SharePoint 2010 基本上“扼杀”了页面上的锚点支持。此问题是由 Microsoft 选择遵循的特定实现引起的，以支持功能区 UI 显示并将其固定在页面顶部。

在这里解释所有代码会很长，但基本上可以归结为标有“scroll=no”的页面的正文标签

```
<body scroll="no"> 
```

这实际上在页面加载时禁用滚动。然后执行名为 FixRibbonAndWorkspaceDimensions 的 javascript 函数以向页面添加“溢出”和滚动支持。

也就是说，如果您想使用锚点，则必须编辑母版页以更改上述代码。如果您决定走这条路，您最好的猜测是尝试重新实现功能区以使用 position:fixed 而不是 javascript 函数来管理定位。

实际上，已经有人尝试过了。看看凯尔的这篇博文。如果您决定尝试修复页面布局，它可能会对您有所帮助：[SharePoint 2010 滚动](http://kyleschaeffer.com/sharepoint/sharepoint-2010-scrolling/)。

# python - Python Return 没有从 for 循环中转义

> ID：15229745
> 
> 赞同：0
> 
> 时间：2013-03-05T17:02:13.923
> 
> 标签：python, recursion

这是我解决这个问题的代码：

```
def nfsmaccepts(current, edges, accepting, visited):
    print ('iteration', current, ''.join([i[1] for i in visited]))
    if current in accepting:
        print ('accepted')
        return ''.join([i[1] for i in visited])
    else:
        for edge in edges:
            if edge not in visited and current == edge[0]:
                print (edge, ' matched')
                visited.append(edge)
                for i in edges[edge]:
                    if nfsmaccepts(i, edges, accepting, visited) is not None:
                        print (edge, i, ' chosen')
                        return nfsmaccepts(i, edges, accepting, visited)
                    else:
                        visited = visited[:-1] 
```

结果如下：

```
print(nfsmaccepts(1, edges, accepting, []))
iteration 1
(1, 'a') matched
iteration 2 a
(2, 'a') matched
iteration 2 aa
iteration 3 a
(3, 'b') matched
iteration 4 ab
(4, 'c') matched
iteration 5 abc
accepted
(4, 'c') 5 chosen
iteration 5 abc
accepted
(3, 'b') 4 chosen
iteration 4 abc
None 
```

我无法弄清楚为什么程序继续运行 for 循环并在明显达到递归函数的终端调用时返回 None 。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T17:14:18.973

`if`当您从语句中调用您的函数时，您的“已接受”状态就会出现：

```
if nfsmaccepts(i, edges, accepting, visited) is not None 
```

然后继续打印`(4, 'c') 5 chosen`。*之前的迭代也是如此，所以你从迭代 4 中再次*调用它，同时打印`(3, 'b') 4 chosen`。

也许您打算只在那里调用一次该函数并在测试和返回之前存储结果？

```
accepts = nfsmaccepts(i, edges, accepting, visited)
if accepts is not None:
    print (edge, i, ' chosen')
    return accepts 
```

# ruby-on-rails - 了解rails中的路线方法

> ID：15229746
> 
> 赞同：0
> 
> 时间：2013-03-05T17:02:20.437
> 
> 标签：ruby-on-rails, routes

我是 Rails 新手，在理解我正在从事的项目中的一些代码时非常迷失：

中`routes.rb`，我有

```
ActionController::Routing::Routes.draw do |map|
...

  map.filter "repository_owner_namespacing", :file => "route_filters/repository_owner_namespacing"
...
end 
```

我试图理解一个方法`around_recognize`是如何被调用的`repository_owner_namespacing.rb`。后一个文件是这样开始的

```
require 'routing_filter/base'

module RoutingFilter
  class RepositoryOwnerNamespacing < Base
...
def around_recognize
... 
```

`around_recognize`似乎是在 routing_filter.rb 中调用的，它的开头是这样的：

```
module RoutingFilter
  mattr_accessor :active
  @@active = true

  class Chain < Array

    def << (filter)
      filter.successor = last
      super
    end

    def run(method, *args, &final)
      RoutingFilter.active ? last.run(method, *args, &final) : final.call
    end
  end
end

# allows to install a filter to the route set by calling: map.filter 'locale'
ActionController::Routing::RouteSet::Mapper.class_eval do
  def filter(name, options = {})
    require options.delete(:file) || "routing_filter/#{name}"
    klass = RoutingFilter.const_get name.to_s.camelize
    @set.filters << klass.new(options)
  end
end
def filters
    @filters ||= RoutingFilter::Chain.new
end 
```

...

和 routoing_fiter/base.rb，有

```
module RoutingFilter
  class Base
    attr_accessor :successor, :options

    def initialize(options)
      @options = options
      options.each{|name, value| instance_variable_set :"@#{name}", value }
    end

    def run(method, *args, &block)
      successor = @successor ? lambda { @successor.run(method, *args, &block) } : block
      send method, *args, &successor
    end
  end
end 
```

我的问题是我真的不知道“last”设置在哪里（在`filter.successor = last`），以及@set 设置在哪里。我在代码项目中找不到任何全面的跟踪。它是否对应于 ruby​​ 或 rails 内置变量？（顺便说一句，这 `@set.filters << klass.new(options)`对应于什么？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T17:08:56.970

在您的代码中`RoutingFilter::Chain`扩展`Array`. 该`last`方法[在 Array 中定义](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-last)。所以在这种情况下，它是添加到链中的最后一个过滤器。

# ios - 带有圆角的 UIAppearance BarButtonItem

> ID：15229747
> 
> 赞同：0
> 
> 时间：2013-03-05T17:02:23.270
> 
> 标签：ios

出于某种原因，当我将背景图像应用到 UIBarButtonItem 时，它会使角变成锐利的矩形。如何使用 UIAppearance 解决这个问题？

```
 // bar button
    id barButtonAppearance = [UIBarButtonItem appearance];
    [barButtonAppearance setBackgroundImage:[theme imageForBarButtonNormal] forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];

-(UIImage *) imageForBarButtonNormal
{
    return [[UIImage imageNamed:@"bar_button_item_blue_background"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 0, 0, 0)];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T17:11:34.873

您的图像需要有圆角。这与 iOS 在幕后完成界面元素的方式相同。

# ruby-on-rails-3 - Rails 教程：在测试环境中重新定义 BCrypt 成本因素

> ID：15229749
> 
> 赞同：0
> 
> 时间：2013-03-05T17:02:27.403
> 
> 标签：ruby-on-rails-3, railstutorial.org

我是 Rails 新手，并遵循 Michael hartl 的 Ruby on Rails 教程。

遵循清单 7.11，在测试环境中重新定义 BCrypt 成本因子：

```
#config/environments/test.rb
SampleApp::Application.configure do
.
.
.
# Speed up tests by lowering BCrypt's cost function. 
require 'bcrypt'
  silence_warnings do
    BCrypt::Engine::DEFAULT_COST = BCrypt::Engine::MIN_COST
  end
end 
```

每次运行 Rspec 时都会收到以下警告：

```
/Users/stonefruit/.rvm/gems/ruby-1.9.3-p385/gems/bcrypt-ruby-3.0.1/lib/bcrypt.rb:28: warning: already initialized constant DEFAULT_COST
/Users/stonefruit/.rvm/gems/ruby-1.9.3-p385/gems/bcrypt-ruby-3.0.1/lib/bcrypt.rb:30: warning: already initialized constant MIN_COST
/Users/stonefruit/.rvm/gems/ruby-1.9.3-p385/gems/bcrypt-ruby-3.0.1/lib/bcrypt.rb:32: warning: already initialized constant MAX_SALT_LENGTH 
```

我可以知道这些警告是否重要？另外，“silence_warnings”是否应该对警告做任何事情？

谢谢！

编辑：我提供的清单中有一个错字。将 require 'bcrypt' 移出注释行。

编辑答案：

在编辑帖子时，我发现我没有完全按照列表​​进行操作。在我的代码中，我使用过

```
require 'BCrypt' 
```

代替

```
require 'bcrypt' 
```

将其更改为全小写后，警告消失了！

# crystal-reports - 用于 AND 的 Crystal Reports 语法

> ID：15229756
> 
> 赞同：0
> 
> 时间：2013-03-05T17:02:42.723
> 
> 标签：crystal-reports, formula-editor

我正在尝试制定一个公式，以便如果评论字段同时包含术语“特殊市场”**和**“促销”，无论订单或间距如何，则该字段将返回 9。如果“特殊市场”**或**“ ，则以下公式返回 9。促销”出现。我使用什么语法来实现我的目标？

```
if{@Comments} like ["*special market*",  "*promo*"]  then "9" 
```

问候，

里奇 P

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T17:07:11.847

您需要单独测试：

```
if ({@Comments} like "*special market*") and 
   ({@Comments} like "*promo*")  then "9" 
```

# javascript - 滑动导航箭头

> ID：15229757
> 
> 赞同：2
> 
> 时间：2013-03-05T17:02:44.307
> 
> 标签：javascript, html, css, menu, navigation

我正在尝试在标题的最顶部创建一个滑动箭头，该箭头根据当前活动的菜单项水平滑动。

编辑 - 我作为示例所指的网站不再活跃。

当页面加载时，箭头应该在正确的位置（即在活动菜单项的正上方）。目前，我努力让它从屏幕左侧滑入，然后在页面加载/刷新时停留在活动按钮上方。

我目前在我的网站上使用 jQuery 1.8.3、Modernizr 和 Cycle Lite 来实现各种其他功能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T17:50:13.820

以下小提琴演示了我所了解的您正在寻找的内容：

[http://jsfiddle.net/8DZZQ/13/](http://jsfiddle.net/8DZZQ/13/)

以下是jsfiddle javascript。在此，我使用边距调整了 nav_arrow，但您可以轻松地将其绝对定位并根据选项的 offsetLeft 移动它。

在 mouseover 和 mouseout 事件中添加排列函数 arr()，这意味着可以计算 nav_arrow 的新位置，并相应调整边距，默认选项由 mouseout 发送以使箭头弹起默认返回。

每个菜单项都添加了属性默认值，以便 onclick 事件更改哪个项目成为默认返回 - 尽管这假设您的链接是动态的并且页面不会重新加载/更改到另一个页面，如果是这种情况，那么您应该将哪个 div 的 id="d" 更改为不同页面 html 上的相应项目，并相应地调整代码。

我还添加了一个微调数组，因此您可以将每个 div 上的箭头定位到您喜欢的精确点。这些值被添加到每个菜单项的左侧位置，因此对于 link1 来说，它的宽度是 60ish，并且使用填充/边距等微调 34，将 nav_arrow 放在中心：

```
window.onload = function () {
    var fine = [36, 34, 34, 34];
    var mitms = document.getElementsByClassName('mitm');
    var l0 = (mitms[0].offsetLeft + fine[0]);
    document.getElementById("nav_arrow").style.marginLeft = l0 + "px";

    for (var i = 0; i < mitms.length; i++) {
        mitms[i].default = false;
        mitms[i].fine = fine[i];
        mitms[i].onmouseover = function () {arr(this);};
        mitms[i].onmouseout = function () {
            var tmp = document.getElementsByClassName('mitm');
            for (var j=0; j<tmp.length; j++) {
                if (tmp[j].default === true) {arr(tmp[j]); break;}
            }
        };
        mitms[i].onclick = function() {
            var tmp = document.getElementsByClassName('mitm');
            for (var j=0; j<tmp.length; j++) {tmp[j].default = false;}
            this.default = true;
        }
    }
    mitms[0].default = true;
};

function arr(el) {
    var mitms = document.getElementsByClassName('mitm');
    var l = el.offsetLeft + el.fine;
    document.getElementById("nav_arrow").style.marginLeft = l + "px";
} 
```

该 html 类似于您提供的示例站点：

```
<div id="nav">
    <div id="d" class="mitm"><a href="#">Default</a></div>
    <div class="mitm"><a href="#">Link1</a></div>
    <div class="mitm"><a href="#">Link2</a></div>
    <div class="mitm"><a href="#">Link3</a></div>
    <div id="nav_arrow"></div>
</div> 
```

平滑过渡被 css 覆盖：

```
#nav_arrow {
  position: relative;
  margin: 20px 0 0 0;

  /* Gets you your triangle, no image needed */
  background: transparent;
  border-left: 7px solid transparent; 
  border-right: 7px solid transparent;
  border-top: 10px solid #000;
  border-bottom: none;
  width: 0px;
  height: 0px;
  font-size: 1px;

  /* Transitions to give smooth movement*/
  transition: margin 1s;
  -moz-transition: margin 1s; /* Firefox 4 */
  -webkit-transition: margin 1s; /* Safari and Chrome */
  -o-transition: margin 1s; /* Opera */
  /* IE doesn't support until ie10 */
} 
```

由于 IE 还不支持 css 转换，我相信会有一个合适的 jquery 解决方案来使 IE 转换平滑。

希望有所帮助！

**编辑！**

这也可以通过简单的 css 使用，例如：

```
#menuitem1:hover ~ #nav_arrow {
   margin: 0px 0px 0px 185px;
} 
```

假设 menuitem1 是

```
<a id='menuitem1'></a> 
```

并像以前一样使用转换等。

# api - 如何从 Shopify 获取店主的计划限制？

> ID：15229758
> 
> 赞同：0
> 
> 时间：2013-03-05T17:02:47.187
> 
> 标签：api, e-commerce, shopify

根据目前的 Shopify 计划，由于她的计划，用户绑定的 SKU 和存储空间存在限制。是否有可能找出用户超出该限制的消费量？例如，已消耗/剩余多少 SKU 和/或到目前为止已使用或剩余多少存储空间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:54:23.067

只需查询他们所有的产品，您就可以获得 SKU 计数。如果您下载他们所有的资产，并将它们的大小相加，您将获得大约它们的存储空间。

# sorting - 如何在 Drupal7/Views 中生成按月份排序的开始/结束日期列表？

> ID：15229760
> 
> 赞同：0
> 
> 时间：2013-03-05T17:02:54.987
> 
> 标签：sorting, drupal-7, views, datefield

我已经安装了 Drupal7 并创建了一个内容类型（为什么现在不称它为“事件”），我在其中添加了一个日期字段（让我们将其命名为“事件日期”）。一些事件日期有开始日期和结束日期。现在我想使用“视图”生成这些事件的列表，按月排序，其中每个事件都列在一行中，即使具有开始和结束日期的事件也应该在事件持续的每一天都有一行 - 不是只有开始到结束行列表。

例如，而不是

> 一月
> Mo, 04/02/2013 - 20:00 to Th, 06/02/2013 - 20:00 Event1

我需要

> 一月
> Mo, 04/02/2013 Event1
> 
> 涂, 05/02/2013 Event1
> 
> Th, 06/02/2013 Event1

我怎么能意识到这一点？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:26:41.343

首先使用“admin/config/regional/date-time”创建您自己的时间格式。然后在视图中创建要分组为月份的日期的额外输出字段。然后将输出分组到视图中的列表或表格中，就完成了。

# javascript - 简单的 Javascript HTML 替换

> ID：15229761
> 
> 赞同：1
> 
> 时间：2013-03-05T17:03:02.813
> 
> 标签：javascript

我知道我在做一些傻事。但我就是想不通。我想在文档加载时立即替换标签内的一些文本。我知道函数正在执行。但它在 getElementById 声明中出现问题，我不知道为什么。输出应该是“新垃圾”。但总是说“原始的东西”。

```
<html>
<script>
window.onload = filltip();

  function filltip() {
   alert('xyz');
   var id = 'qourl';
   var txt = 'New Junk';
   //alert('current html=' + document.getElementById(id).innerHTML);
   document.getElementById(id).innerHTML = '?<span class="classic">' + txt +   
'</span>';
  }

</script>
<body>

<a href='#' id='qourl'>Original Stuff</a>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T17:04:42.047

将您的 onload 更改为：

```
window.onload = filltip; 
```

通过编写`window.onload = filltip()`，您实际上是在`filltip`立即调用，并将其返回值用作 onload 函数（在本例中为`undefined`）。通常，当您分配一个函数时，您永远不需要`()`它，除非该函数非常明确地返回另一个函数。

# javascript - HTML 模板 - 不要两次编写相同的 html (couchdb)

> ID：15229763
> 
> 赞同：0
> 
> 时间：2013-03-05T17:03:09.110
> 
> 标签：javascript, html, jquery, couchdb

我正在制作一个小型网站，我需要一种方法来多次使用相同的 html。现在我有一个包含所有页面通用内容的 html 文件，然后我使用 AJAX 来获取包含部分 HTML 的 .html 文件。

例子：

主要的html：

```
<html>
    <head>...</head>
    <body>
        <div class="main-content-wrapper">
            <!-- AJAX puts html here -->
        </div>
    </body>
</html> 
```

JavaScript：（摘录）

```
// Fire ajax request
$.ajax({
    url: pagename,
}).done(function (data) {

    // Overwrites old html with new html
    $('.main-content').html(data);

    if (callback)
        callback();   
}); 
```

但是当我尝试将事件绑定到按钮时，这给了我一个问题，在哪里包含用于 html 页面的 JavaScript/CSS 等。我真的不需要一个完整的框架，我只需要获取一些 html 就可以了不必写两次。有谁知道怎么做？

编辑：我从 couchdb 获取文件，所以我不知道我是否可以使用像 PHP 这样的服务器端语言。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T17:18:29.607

1.  您可以使用服务器端语言（如 php 并使用 include）
2.  您可以使用 JS 模板系统（如 underscore.js 或 mustache.js）
3.  或者，如果您想继续以当前方式执行此操作，请利用 jQuery 的 .on() 将事件绑定到将来插入的 DOM 元素

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T14:07:49.237

如果您的主要目标是保持“干”（不要重复自己）并避免多次编写相同的 HTML，那么有更简单的方法（比 AJAX 调用）来实现这一点。

实际上，您可以使用 Mustache.js（或类似）模板语言的 _show 请求在 CouchDB 中完成完整的模板化，并通过 CouchDB 服务器运行整个过程。您可以对任何文档使用 _show 请求。show 函数接收文档作为它的第一个参数。然后您加载模板引擎（Mustache.js 可能非常适合您正在构建的内容），并通过 Mustache.to_html() 返回输出运行它。

这里有更多关于 _show 函数的信息：http: [//guide.couchdb.org/draft/show.html](http://guide.couchdb.org/draft/show.html)

还有一组很好的关于使用 jQuery Mobile + CouchDB + Mustache.js 的博客文章。该系列的第三篇文章专门讨论了模板： http: [//custardbelly.com/blog/2010/12/28/jquery-mobile-couchdb-part-3-templates-and-mustache-js/](http://custardbelly.com/blog/2010/12/28/jquery-mobile-couchdb-part-3-templates-and-mustache-js/)

您不应该需要他在那里描述的所有内容（例如 jQuery Mobile），但模板相关部分似乎适合您正在构建的内容，并且至少有清晰的 _show 函数示例。

此外，没有什么可以阻止将 PHP 与 CouchDB 一起使用。这只是更多（通常是不必要的）开销。您将在另一个 HTTP 服务器（CouchDB 中的那个）前面运行一个 HTTP 服务器 + PHP。无论如何，这是完全有可能的，如果你正在做图像处理或发送电子邮件之类的事情，并且不想将它们构建为 _changes 提要的反应事件（这对伟大来说“更深入”），那么这种方法是有价值的CouchDB 比你现在需要的多）。

如果您确实在 CouchDB 路线之前使用 PHP，我建议您查看 Sag：[http](http://saggingcouch.com/) : //saggingcouch.com/ 这是我发现的 CouchDB 最干净的 PHP 库。

最后，您还可以查看 IrisCouch.com 的 Jason Smith 的 Static+ 项目： [https ://github.com/iriscouch/static-plus](https://github.com/iriscouch/static-plus)

它进行模板化（使用 Handlebars.js——它与 Mustache.js 非常相似），但在您的开发机器上进行，并且仅将静态内容发布到 CouchDB。您将获得模板化的 DRY 特性，但具有提供预编译内容的性能。

希望里面的东西有用。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T17:20:42.053

我建议使用服务器端技术来完成这项任务——我使用 PHP 来包含我的页眉/页脚、CSS 链接和 JS 包含。这是一个简单的单行：

`<?php include '<yourfile>.html'; ?>`

它工作得很好。

如果必须使用 JS，则必须在将事件导入 DOM 后绑定事件，尽管 CSS 应该自动应用。

# arrays - 将 .csv/.dat 信息从在线数据源实时/自动导入 MATLAB？

> ID：15229764
> 
> 赞同：0
> 
> 时间：2013-03-05T17:03:09.400
> 
> 标签：arrays, file, matlab, download, real-time

我正在尝试将实时天气数据从气象站 Web 链接直接导入 MATLAB，并将其存储为可以访问的矩阵。我对 MATLAB 没有太多经验，但在研究过程中我发现了类似的查询。

该线程描述了从 A URL 中提取财务数据以在 MATLAB 中处理的类似情况：

[http://www.mathworks.co.uk/matlabcentral/newsreader/view_thread/244112](http://www.mathworks.co.uk/matlabcentral/newsreader/view_thread/244112)

链接到我需要的原始数据，包含所需的逗号分隔信息：http: [//xweb.geos.ed.ac.uk/~weather/jcmb_ws/CR10X1.DAT](http://xweb.geos.ed.ac.uk/~weather/jcmb_ws/CR10X1.DAT)

但是，在重新安排语法后，我没有得到想要的结果。有小费吗？

我需要天气数据来对光伏阵列进行太阳能分析。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:11:57.733

用于`csvread()`读取 CSV 数据，然后用于`save()`将其保存为 MATRIX

# ios - iOS，布尔变量

> ID：15229774
> 
> 赞同：0
> 
> 时间：2013-03-05T17:03:45.653
> 
> 标签：ios, objective-c

在 Objective-C 中，我可以用 YES 或 TRUE 初始化 BOOL 变量。是否有一个原因？

```
BOOL test = false;
BOOL test = NO; 
```

他们是一样的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T17:07:43.043

`true`并且`false`来自c/c++

```
#ifndef __cplusplus
#define bool _Bool
#define true 1
#define false 0 
```

`YES`并且`NO`来自Objective-C

```
#if __has_feature(objc_bool)
#define YES             __objc_yes
#define NO              __objc_no
#else
#define YES             ((BOOL)1)
#define NO              ((BOOL)0)
#endif 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T17:08:06.953

是的。`false`是从 C 中遗留下来的，`NO`在惯用的 iOS 代码和库中更为普遍。

# r - 过滤掉R中的列

> ID：15229777
> 
> 赞同：0
> 
> 时间：2013-03-05T17:03:59.213
> 
> 标签：r

参考另一篇文章[#Filtering out multiple columns in R](https://stackoverflow.com/questions/15223257/filtering-out-multiple-columns-in-r) ; 那里要求过滤掉全为 0 的列（列中的所有值都是 0）。使用以下代码：

```
f0 <- function(x) any(x!=0) & is.numeric(x)
trainingdata <- lapply(trainingdata, function(data) cbind(label=data$label, 
                                colwise(identity, f0)(data))) 
```

可以过滤掉仅包含 0 的列。还需要过滤掉仅包含 1 的列（我的意思是列中的所有值都是 1）。我尝试了以下方法：

```
f0 <- function(x) all(x==1) | any(x!=0) & is.numeric(x) 
```

或者

```
f0 <- function(x) all(x!=1) | any(x!=0) & is.numeric(x) 
```

但它不工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T17:14:28.813

您的第二个功能是逻辑`AND`而不是`OR`检查`any(x!=1)`应该可以工作。

但是，为了清楚起见，我会将它们写为两个单独的函数，并独立进行每个检查。

# sml - 如何在 let 语句中使用 if 语句？

> ID：15229778
> 
> 赞同：1
> 
> 时间：2013-03-05T17:04:04.113
> 
> 标签：sml

我希望这个工作：

```
fun function (i) =
   let 
       if i = 1 then
           val h = valOf(Int.fromString(valOf(TextIO.inputLine TextIO.stdIn)))
       else
           val h = someFunction();
   in

       code...
   end 
```

但似乎你不能声明这样的价值......我应该怎么做才能让它发挥作用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T17:49:28.347

ML 中的`if`语句是一个表达式。这意味着它必须具有价值。请记住，SML 中的值声明如下所示：

```
val <name> = <expression> 
```

由于`if ... then ... else`语句是表达式，因此您可以将`=`.

```
fun function i =
  let
    val h = if i = 1 then ...
                     else ...
  in
    ...
  end 
```

另一件事。请记住，这`valOf`可能会出错。在输入中使用它几乎是要求您的程序崩溃，因为用户可以输入任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T21:09:26.517

这个怎么样：

```
fun function(i)=
   let 
        fun nextInput() =
            case (TextIO.inputLine TextIO.stdIn) of
                NONE => 0
              | SOME s => case Int.fromString(s) of
                            NONE => 0
                          | SOME n => n

        val h = if i = 1 then nextInput() else someFunction()
   in
        code...
   end 
```

通过这种方式，您可以涵盖用户可能不输入数字，而是输入其他任何内容或根本不输入任何内容的情况。

# c++ - (string)char 类型转换

> ID：15229779
> 
> 赞同：1
> 
> 时间：2013-03-05T17:04:07.310
> 
> 标签：c++, string, casting, char

我想用这个函数将一个字符转换为一个字符串：

```
int charIndexDistance (char a, char b)
{
    if (indexical) {
        string test_a = convertOntology((string)a, 0);
        string test_b = convertOntology((string)b, 0);
        cout << test_a << " " << test_b << endl;

        int test = abs(char_index[a] - char_index[b]);
        return test; //measure indexical distance between chars
    } else 
        return 1;
} 
```

但我得到这个“错误C2440：'type cast'：无法从'char'转换为'std :: string”

什么是问题？以及如何将字符转换为字符串 - 我应该使用字符串追加吗？

此外，`cout`and`int test`用于调试目的，稍后将被删除

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T17:06:49.650

根本没有这样的转换。相反，您必须手动构造一个字符串：

```
string(1, a) 
```

这使用[构造函数采用长度和 a`char`来填充字符串](http://en.cppreference.com/w/cpp/string/basic_string/basic_string)。

在您的代码上下文中：

```
string test_a = convertOntology(string(1, a), 0);
string test_b = convertOntology(string(1, b), 0); 
```

即使存在适当的构造函数/强制转换，您的代码也会很糟糕，因为[您应该避免在 C++ 中进行 C 风格的强制转换](https://stackoverflow.com/a/32224/1968)。这种情况需要一个`static_cast`代替。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T17:06:56.047

A`char`不是字符串。

A`char`也不是以 null 结尾的字符串。

以空字符结尾的字符串是一个以空字符结尾的 char 数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T17:09:07.403

替换`(string)a`为`string(1,a)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-01T04:49:25.603

已经提到的一切都有效，但您可能还想尝试：

```
char mychar = 'A';
string single_char = "";
string += mychar; 
```

希望有帮助！

# c# - 如何逐字阅读文本

> ID：15229780
> 
> 赞同：2
> 
> 时间：2013-03-05T17:04:10.270
> 
> 标签：c#, text, streamreader

我正在使用 txt 或 htm 文件。目前我正在使用for循环逐个字符查找文档，但我需要逐个单词查找文本，然后逐个字符在单词内部查找。我怎样才能做到这一点？

```
for (int i = 0; i < text.Length; i++)
{} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T17:09:27.663

一个简单的方法是使用[`string.Split`](http://msdn.microsoft.com/en-us/library/b873y76a%28v=vs.110%29.aspx)不带参数（由空白字符分割）：

```
using (StreamReader sr = new StreamReader(path)) 
{
    while (sr.Peek() >= 0) 
    {
        string line = sr.ReadLine();
        string[] words = line.Split();
        foreach(string word in words)
        {
            foreach(Char c in word)
            {
                // ...
            }
        }
    }
} 
```

我曾经[`StreamReader.ReadLine`](http://msdn.microsoft.com/en-us/library/system.io.streamreader.readline.aspx)读过整行。

要解析 HTML，我会使用像[**HtmlAgilityPack**](http://html-agility-pack.net/?z=codeplex)这样的强大库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T17:08:16.340

您可以在空格上拆分字符串，但您必须处理标点符号和 HTML 标记（您说您正在使用 txt 和 htm 文件）。

```
string[] tokens = text.split(); // default for split() will split on white space
foreach(string tok in tokens)
{
    // process tok string here
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-15T01:06:02.447

这是我对`StreamReader`. 这个想法不是将整个文件加载到内存中，特别是如果您的文件是一个长行。

```
public static string ReadWord(this StreamReader stream, Encoding encoding)
{
    string word = "";
    // read single character at a time building a word 
    // until reaching whitespace or (-1)
    while(stream.Read()
       .With(c => { // with each character . . .
            // convert read bytes to char
            var chr = encoding.GetChars(BitConverter.GetBytes(c)).First();

            if (c == -1 || Char.IsWhiteSpace(chr))
                 return -1; //signal end of word
            else
                 word = word + chr; //append the char to our word

            return c;
    }) > -1);  // end while(stream.Read() if char returned is -1
    return word;
}

public static T With<T>(this T obj, Func<T,T> f)
{
    return f(obj);
} 
```

简单地使用：

```
using (var s = File.OpenText(file))
{
    while(!s.EndOfStream)
        s.ReadWord(Encoding.Default).ToCharArray().DoSomething();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T17:20:01.717

您可以使用[HTMLAgilityPack](http://htmlagilitypack.codeplex.com/)[从一些 HTML 中获取所有文本](https://stackoverflow.com/a/4237264/659190)。如果您认为这是矫枉过正，请看[这里](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)。

```
HtmlDocument doc = new HtmlDocument();
doc.LoadHtml(text);

foreach(HtmlNode node in doc.DocumentNode.SelectNodes("//text()"))
{
    var nodeText = node.InnerText;
} 
```

然后您可以将每个节点的文本内容拆分为单词，一旦您定义了单词是什么。

也许像[这样](https://stackoverflow.com/a/10240108/659190)，

```
using HtmlAgilityPack;

static IEnumerable<string> WordsInHtml(string text)
{
    var splitter = new Regex(@"[^\p{L}]*\p{Z}[^\p{L}]*");

    HtmlDocument doc = new HtmlDocument();
    doc.LoadHtml(text);

    foreach(HtmlNode node in doc.DocumentNode.SelectNodes("//text()"))
    {
        foreach(var word in splitter.Split(node.InnerText)
        {
            yield return word;
        }
    }
} 
```

然后，检查每个单词中的字符

```
foreach(var word in WordsInHtml(text))
{
    foreach(var c in word)
    {
        // a enumeration by word then char.
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T17:07:28.280

用于`text.Split(' ')`将其按空间拆分为单词数组，然后对其进行迭代。

所以

```
foreach(String word in text.Split(' '))
   foreach(Char c in word)
      Console.WriteLine(c); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-05T17:07:44.803

您可以拆分空格：

```
string[] words = text.split(' ') 
```

会给你一个单词数组，然后你可以遍历它们。

```
foreach(string word in words)
{
    word // do something with each word
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-05T17:07:59.817

我认为你可以使用拆分

```
 var  words = reader.ReadToEnd().Split(' '); 
```

或使用

```
foreach(String words in text.Split(' '))
   foreach(Char char in words ) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-05T17:39:50.263

什么是正则表达式？

```
using System;
using System.Linq;
using System.Text.RegularExpressions;

namespace ConsoleApplication58
{
    class Program
    {
        static void Main()
        {
            string input =
                @"I'm working with a txt or htm file. And currently I'm looking up the document char by char, using for loop, but I need to look up the text word by word, and then inside the word char by char. How can I do this?";
            var list = from Match match in Regex.Matches(input, @"\b\S+\b")
                       select match.Value; //Get IEnumerable of words
            foreach (string s in list) 
                Console.WriteLine(s); //doing something with it
            Console.ReadKey();
        }
    }
} 
```

它适用于任何分隔符，这是最快的方法。

# jquery - 使用 JQuery Page Scroller 的 100% 高度 div

> ID：15229782
> 
> 赞同：0
> 
> 时间：2013-03-05T17:04:18.087
> 
> 标签：jquery, html, css, height

我有一个网页，一个包含五个不同 div 的包装器，我正在使用查询 PageScroller 进行可滚动导航，因此页面堆叠在彼此的上方和下方。我的问题是，当我查看一个“页面”时，我可以看到下面“页面”的顶部，我怎样才能让这些 div 占据 100% 的可视空间？（仅高度）

```
<div id="wrapper">
    <div id="main">
        <div id="page 1" class="section"> Content here </div>
        <div id="page 2" class="section"> Content here </div>
        <div id="page 3" class="section"> Content here </div>
        <div id="page 4" class="section"> Content here </div>
        <div id="page 5" class="section"> Content here </div>
    </div>
</div> 
```

这就是 HTML 的设置，jquery 使用“section”类在单击导航时滚动到该 div。

任何帮助将非常感激

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:10:25.717

```
$(window).ready(function()
{
   var viewport_height = parseInt($(window).height());
   //stringify
   viewport_height = viewport_height + '';
   viewport_height += 'px';

   $(".section").css("height", viewport_height);
} 
```

# jquery - selecting data in the same div using jquery

> ID：15229789
> 
> 赞同：0
> 
> 时间：2013-03-05T17:04:48.070
> 
> 标签：jquery

I want to make a small calculation page like this

```
1000 X _ = 
 500 X _ = 
   Total = 
```

What I want to do is when someone enters a numeric value in "_" I automatically show the multiplication and also than the total sum.

```
<div>
    <div> 
        <span class="value">1000</span> X
        <input type="text" size="4" class="inputdata"/> = 
        <span class="multiplydate"></span>
    </div>
    <div>
        <span class="value">500</span> X
        <input type="text" size="4" class="inputdata" /> = 
        <span class="multiplydate"></span>
    </div>
    <div>
        TOTAL = 
        <span class="totaldata"></span>
    </div>
</div> 
```

then use jquery to do the calculation:

```
$('.inputdata').live('onChange', function () {
    $(this).closest('.multiplydata').html(
        $(this).closest('.value').html() *         
            $(this).closest('.inputdata').val()
    );
}); 
```

Whats wrong with the code?? nothing seems to be happening.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T17:23:09.107

`live` has been replaced with `on` Please change to:

```
$('.inputdata').on('onChange',function(){ 
       $(this).closest('.multiplydata')
       .html($(this).closest('.value')
       .html()*$(this).closest('.inputdata').val());
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T18:07:28.900

**Changes :**

*   `onchange` has been replaced by `keyup`
*   `$('.multiplydata')` is `Next` to the Textbox So change `Closest` to `Next`

**Fiddle Example** : [http://jsfiddle.net/RYh7U/113/](http://jsfiddle.net/RYh7U/113/)

**Jquery :**

```
$('.inputdata').live('keyup', function () {
    var SpanData = $(this).closest(":has(.value)").find('.value').html();
    var Result = $(this).next(".multiplydate");
    Result.html(SpanData * $(this).val());  

    //Total Part
    var sum=0;
    $('.multiplydate').each(function() {
        sum += Number($(this).html());        
    });
    $(".totaldata").html(sum);
}); 
```

# wcf - 在 WCF 服务中存储应用程序级数据

> ID：15229790
> 
> 赞同：2
> 
> 时间：2013-03-05T17:04:48.087
> 
> 标签：wcf, c#-4.0

我正在尝试创建我的第一个 WCF 服务，并且我正在尝试存储应用程序数据。

我已经创建了我的 ServiceContracts 和 DataContracts 并且该服务正在运行。

我现在想从数据库中读取一些配置数据并将这些数据存储在应用程序范围内，以便只要服务处于活动状态，这些数据就可用于任何后续请求。这样我就不必每次处理请求时都连接到数据库。我不想将数据存储在配置文件中，数据已经存在于所述数据库中，我不想复制它。

我有以下实施和工作。

注 1：我删除了数据库代码以保持示例简单。

注意 2：MemoryCache 类存在于 System.Runtime.Caching 命名空间中。

```
private void LoadConfigData()
{
    if (!MemoryCache.Default.Contains("ConfigData"))
    {
        CacheItemPolicy cachePolicy = new CacheItemPolicy() {
                  AbsoluteExpiration = DateTimeOffset.Now.AddMinutes(5) };

        MemoryCache.Default.Add(
                  "ConfigData",
                  "ImagineThereIsDBDataHere",
                  cachePolicy);
    }
} 
```

这是正确的使用方法吗？

这篇文章提到了使用 Application 类和 HttpContext：

[从 WCF 服务读取全局应用程序属性](https://stackoverflow.com/questions/9296981/read-global-application-property-from-wcf-service)

但我目前在我的项目中没有这些可用。

这个线程安全吗，如果对我的服务发出多个请求并且缓存为空，我会得到竞争条件吗？

这也是我的第一个问题，所以如果我错过了任何细节，请告诉我，我会更新。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T17:21:48.633

您可以使用`MemoryCache`对象的[AddOrGetExisting](http://msdn.microsoft.com/en-us/library/dd780583.aspx)方法（或[此](http://msdn.microsoft.com/en-us/library/dd988741.aspx)覆盖）以线程安全的方式完成此操作。

不要担心 Application 或 HttpContext 类。它们位于 System.Web 命名空间中，不建议在 WCF 中使用它们。你已经在做正确的事了。

# bash - 直接运行命令与从环境变量运行

> ID：15229791
> 
> 赞同：-1
> 
> 时间：2013-03-05T17:04:53.437
> 
> 标签：bash, command-line, environment-variables

我试图使用 g++ 编译和执行一个程序，然后我得到了命令：

```
g++ -o example example.cpp && ./example 
```

它运行正常。我试图设置一个环境变量来节省我的时间：

```
COMPRUN="g++ -o example example.cpp && ./example" 
```

（`echo $COMPRUN`告诉我任务没问题）。但是当我尝试使用它来执行它时`$COMPRUN`，我得到了`g++: error: &&: No such file or directory`.

别名工作正常（所以我原来的问题解决了），但环境变量没有。

**为什么运行命令与从环境变量运行命令直接不同？命令行如何解释我的命令以获得“没有这样的文件”错误？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T17:20:34.263

出现错误的原因是 shell 没有**解释**命令行。因此，它`&&`被视为一个简单的字符串（命令上下文中的文件名），而不是被解释为控制运算符。您必须使用`eval $COMPRUN`让 shell 实际评估命令字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T17:30:53.073

使用 shell 函数而不是变量来封装任意代码。

```
$ comprun () {
    g++ -o "$1" "$1".cpp && ./"$1"
}
$ comprun example 
```

参数扩展发生在命令行已被解析之后，因此`&&`无法识别任何语法结构（如 ）。在您的情况下，不存在的文件是“&&”。

# gwt - 如何轻推填充了 AsyncDataProvider 的 GWT CellList 以刷新其内容？

> ID：15229795
> 
> 赞同：1
> 
> 时间：2013-03-05T17:05:00.223
> 
> 标签：gwt

我使用 AsyncDataProvider 设置了一个 CellList，它使用搜索字符串调用服务器。

当我的用户输入新的搜索字符串时，我希望 CellList 刷新。

如何告诉我的 CellList 刷新？我是否调用 removeDataDisplay() 然后 addDataDisplay？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T17:07:46.030

[`setVisibleRangeAndClearData`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/cellview/client/AbstractHasData.html#setVisibleRangeAndClearData%28com.google.gwt.view.client.Range,%20boolean%29)也许？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T17:21:40.567

你可以试试。

```
cellList.setVisibleRangeAndClearData(cellList.getVisibleRange(), true); 
```

[重新加载celltable问题](http://comments.gmane.org/gmane.org.google.gwt/52306)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T03:41:20.313

您可以调用`cellList.setVisibleRangeAndClearData( range, true)`API 来触发 AsyncDataProvider 的 onRangeChange 方法。

由于您使用的是单元格列表，因此上述`call should happen when the user scrolls to the end of the currently visible list`. 范围应该是 -

```
private Range range = new Range( cellList.getVisibleRange().getStart() + cellList.getVisibleRange().getLength(), cellList.getVisibleRange().getLength() );

cellList.setVisibleRangeAndClearData( range, true); 
```

# c++ - 可以在从寄存器到寄存器的 mov 指令中引发信号 11 吗？

> ID：15229796
> 
> 赞同：1
> 
> 时间：2013-03-05T17:05:02.770
> 
> 标签：c++, assembly, x86, gdb, segmentation-fault

我从使用 gdb 分析的核心转储中获得了以下反汇编代码。

```
 0x083dc366 <+194>:   call   0x83db38e <Buf::push_data(UBYTE const*, UWORD)>  
=> 0x083dc36b <+199>:   mov    eax,esi  
   0x083dc36d <+201>:   mov    edx,DWORD PTR [ebp-0x1c] 
```

是否有可能在第一条 mov 指令处崩溃，或者 gdb 中的小箭头不可信？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T17:16:53.467

它可能在该特定指令上崩溃的*唯一*`mov`方法是内存不可执行（例如，跳转到恰好解码为的数据字节）。由于它似乎来自正确的代码部分，因此在这种情况下不太可能。

我怀疑 GDB 只是向您展示了函数调用返回的地方，而实际崩溃发生在被调用函数内部。也许它无法访问函数的代码或出于其他原因决定切换堆栈帧。使用检查完整的堆栈跟踪，`bt`并在必要时使用切换框架`frame #n`。

在极端情况下，转储本身可能已损坏并包含错误信息。如果您可以可靠地重现崩溃，最好从一开始就在 GDB 下运行程序，并在崩溃发生时立即捕获崩溃，以免它有机会损坏任何东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T17:12:12.310

## 不。

两个寄存器之间的移动不应导致分段错误，因为寄存器不存储在内存中，而是在 CPU 上具有特殊位置。gdb 中的箭头不是显示当前行，而是显示指令指针的当前值，或者要运行的下一条指令，但之前的行可能尚未执行，因此它可能是崩溃的根源。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T17:17:33.330

> 是否有可能在第一个 mov 指令时崩溃

不。

> 或者来自 gdb 的小箭头不可信

箭头应该是可信的。

您拥有“无意义”数据的最可能原因是：您重建了可执行文件，或者您向 GDB 提供了错误的可执行文件，因此崩溃的可执行文件与您指向 GDB 的可执行文件具有*不同*的指令。`0x083dc36b`

# django - 在链接中传递两个参数

> ID：15229798
> 
> 赞同：0
> 
> 时间：2013-03-05T17:05:05.747
> 
> 标签：django, django-models, django-templates, django-urls

我的项目管理应用程序中有一个页面，其中列出了用户拥有的所有票证（都属于一个项目）。在模板中，我有一个显示特定票证的链接，但它似乎不起作用，因为引发了以下错误：

```
Reverse for 'show_ticket' with arguments '(1,)' and keyword arguments '{}' not found. 
```

正如您在下面的 url 模式中看到的那样，我需要 project_id（票据所属）和 ticket_id。我怎样才能让它工作？

**来自模板：**

```
<a href="{% url show_ticket ticket.id %}">{{ ticket }}</a> 
```

**来自 urls.py：**

```
url(r'^project/(?P<project_id>\d+)/ticket/(?P<ticket_id>\d+)/$', 'project_app.views.show_ticket', name="show_ticket"), 
```

**门票型号：**

```
class Ticket(models.Model):
...other fields...
project = models.ForeignKey(Project, related_name="projects")
user = models.ForeignKey(User) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T17:06:51.283

您的 urlconf 使用命名（关键字）参数：

```
<a href="{% url show_ticket project_id=ticket.project_id ticket_id=ticket.id %}">{{ ticket }}</a> 
```

[网址标签文档](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#url)

# sharepoint-2010 - 创建一个将数据保存在 sharepoint 2010 列表中的表单

> ID：15229799
> 
> 赞同：0
> 
> 时间：2013-03-05T17:05:08.007
> 
> 标签：sharepoint-2010

我想创建一个带有提交按钮的表单，可以将插入的数据保存到 SharePoint 2010 自定义列表中。我更喜欢使用 CEWP Web 部件和 java 脚本代码执行此操作，我搜索了很多并找到了 2 个相关页面：1- [http://www.learningsharepoint.com/2011/10/03/create-contact-form-using-ecmascriptjavascript -client-object-model-sharepoint-2010/](http://www.learningsharepoint.com/2011/10/03/create-contact-form-using-ecmascriptjavascript-client-object-model-sharepoint-2010/) 和 2- [http://www.nitenbadgujar.com/2010/04/how-to-insert-item-in-sharepoint-list.html](http://www.niteenbadgujar.com/2010/04/how-to-insert-item-in-sharepoint-list.html)

但实施后在 SharePoint 中不起作用。谁能帮我有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:05:29.977

您最好的选择是使用 InfoPath。使用 Submit 创建一个简单的 InfoPath 表单，上传到 Central Admin，将其关联到自定义列表。然后打开该表单，并在提交时将信息存储在该列表中。您甚至可以在提交表单后提升将自动填充自定义列表中的列的字段。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T23:54:41.847

你的意思是它不起作用，它有没有抛出任何错误？

默认情况下 sharepoint 会阻止执行 ecmascript ，您需要先启用它。

否则它会抛出错误

> 错误：ID为{..}的“List”类型的方法“GetItems”被服务器上的管理员阻止

有关详细信息，请查看此[链接下方](http://sharepointkid.com/errorthe-method-getitems-of-the-type-list-with-id-is-blocked-by-administrator-on-the-server/)

如果您已经启用它，请提供更多详细信息。

# c# - 自定义消息和默认消息

> ID：15229800
> 
> 赞同：2
> 
> 时间：2013-03-05T17:05:12.477
> 
> 标签：c#, unit-testing, vs-unit-testing-framework

有没有办法指定一条消息[`Assert.AreEqual(object, object, string)`](http://msdn.microsoft.com/en-us/library/ms243496%28v=vs.110%29.aspx)，将自定义消息与默认消息相结合？

我有以下代码：

```
foreach (var testCase in testCases)
{
    Assert.AreEqual(testCase.Value, myObj.myMethod(testCase.Key), combinedMessage);
} 
```

除了来自下面的 VS 单元测试框架的示例消息之外，我还想指定测试用例键：

`Assert.AreEqual failed. Expected:<True>. Actual:<False>.`

也许像`Failed on the following test case: AB`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T21:37:19.183

过载会自动为您执行此操作。作为测试，我制作了这个测试方法来查看输出是什么：

```
 [TestMethod]
    public void Test()
    {
        Assert.AreEqual(true, false, "Failed on the following test case: AB");
    } 
```

错误消息输出是：`Assert.AreEqual failed. Expected:<True>. Actual:<False>. Failed on the following test case: AB`

message 参数已附加/组合到默认消息。

对于您的情况，如果您只想获取测试密钥，则测试可能如下所示：

```
foreach (var testCase in testCases)
{
    Assert.AreEqual(testCase.Value, myObj.myMethod(testCase.Key), 
        "Failed on the following test case: " + testCase.Key.ToString());
} 
```

如果每个测试用例都应该有自己的自定义消息，那么将自定义错误消息移动到 testCase 类是有意义的。作为创建每个对象的一部分，您可以指定这三个属性：

```
testCase.Value = true;
testCase.Key = "AB";
testCase.FailureMessage = "Failed on the following test case: AB"; 
```

这种类型的结构将允许为每个 testCase 实例附加指定的消息。这样做将使单元测试看起来像这样：

```
foreach (var testCase in testCases)
{
    Assert.AreEqual(testCase.Value, myObj.myMethod(testCase.Key), 
        testCase.FailureMessage));
} 
```

您的示例中的输出显示为：`Assert.AreEqual failed. Expected:<True>. Actual:<False>. Failed on the following test case: AB`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T17:07:43.797

你不能只连接消息吗？

```
foreach (var testCase in testCases)
{
    string message = string.Format("{0}: {1}", defaultMessage, testCase.Key);
    Assert.AreEqual(testCase.Value, myObj.myMethod(testCase.Key), message );
} 
```

# android - Android 应用程序不拍照并将其保存到 SQLite 数据库

> ID：15229801
> 
> 赞同：0
> 
> 时间：2013-03-05T17:05:22.443
> 
> 标签：android, database, image, sqlite, android-camera

我的应用程序应该使用相机拍照，然后将它们保存到 SQLite 数据库。这是通过打开相机拍摄照片来完成的，然后图像返回到图像视图，然后用户单击保存以将图像保存到数据库中。

**问题**

在图像返回到图像视图并且用户单击保存按钮后，应用程序冻结，唯一显示的是“不幸的是，Dress（应用程序的名称）已停止响应”，其中没有错误。

**我试过什么**

我尝试通过注释我们的函数来进行一些调试，并且我已将其范围缩小到 db.open() 函数，因此似乎一旦它尝试与数据库建立任何连接，它就会冻结。我以前从未使用过 android 或 android 数据库（专家级别的菜鸟），我已经做得足够了，但仍然无法解决问题。

这就是我一直使用的教程

[http://www.youtube.com/watch?v=Xq8m82zgt1s](http://www.youtube.com/watch?v=Xq8m82zgt1s)

```
//This file triggers the camera returns the images and makes the call to the database
package dress.advance;

import java.io.FileNotFoundException;

import org.apache.http.util.EntityUtils;

import android.net.Uri;
import android.os.Bundle;
import android.provider.MediaStore;
import android.app.Activity;
import android.content.ContentResolver;
import android.content.ContentValues;
import android.content.Intent;
import android.database.Cursor;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;

import android.widget.Button;
import android.widget.ImageView;
import android.widget.Toast;

public class Upload extends Activity {
    protected static final int SELECT_IMAGE = 0;
    protected static final int CAMERA_ACTIVITY = 0;
    private static final int CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE = 100;
    protected static final String Upload = null;
    private static final int CAPTURE_VIDEO_ACTIVITY_REQUEST_CODE = 0;
    private int count = 0;
    private Uri fileUri;
    DBAdapter link;
    ImageView CaputredImage;
    ImageView browsedImage;
    Bitmap theCapturedImage;
     private static int RESULT_LOAD_IMAGE = 1;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        browsedImage=(ImageView) findViewById(R.id.ImageBrowse);

        Button browseButton = (Button) findViewById(R.id.browse);

        browseButton.setOnClickListener(new OnClickListener(){

            public void onClick(View v) {
                //startActivityForResult(new Intent(Intent.ACTION_PICK, android.provider.MediaStore.Images.Media.INTERNAL_CONTENT_URI), SELECT_IMAGE);

                Intent photoPickerIntent = new Intent(Intent.ACTION_PICK);
                photoPickerIntent.setType("image/*");
                startActivityForResult(photoPickerIntent, 1);

                Intent i = new Intent(Intent.ACTION_PICK, android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
                startActivityForResult(i, RESULT_LOAD_IMAGE);

        }       
    });

        Button save = (Button) findViewById(R.id.ImageSaveButton);
        save.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                // Perform action on click

                if(!(CaputredImage == null)){

                    Img testim = new Img(theCapturedImage, "img"+getCount());           
                    link.open();
                    /*link.createImgEntry(testim);
                    link.close();
                    */
                }
            }

        });

        CaputredImage=(ImageView) findViewById(R.id.ImageCapture);

        //Declaration of button to link to camera trigger
        Button CaptureButton = (Button) findViewById(R.id.capture);
        //Listener for button
        CaptureButton.setOnClickListener(new OnClickListener(){

                public void onClick(View v) {
                Intent startCamera = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                startActivityForResult(startCamera, 0);

                Intent mIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);   
                mIntent.putExtra(MediaStore.EXTRA_OUTPUT, 
                MediaStore.Images.Media.EXTERNAL_CONTENT_URI.toString()); 
                startActivityForResult(mIntent, CAMERA_ACTIVITY);

            }       
        });

    }

protected void onActivityResult(int requestCode, int resultCode, Intent data)
{

    if(requestCode == 0){
        super.onActivityResult(requestCode, resultCode, data);
        //setCount(getCount() + 1);
        theCapturedImage = (Bitmap) data.getExtras().get("data");
        CaputredImage.setImageBitmap(theCapturedImage);

        fileUri = getOutputMediaFileUri(Upload); // create a file to save the image
        data.putExtra(MediaStore.EXTRA_OUTPUT, fileUri); // set the image file name
        Img testim = new Img(theCapturedImage, "img"+getCount());

        link.open();
        link.createImgEntry(testim);
        link.close();

    }
    if (requestCode == RESULT_LOAD_IMAGE && resultCode == RESULT_OK && null != data) {
        Uri selectedImage = data.getData();
        String[] filePathColumn = { MediaStore.Images.Media.DATA };

        Cursor cursor = getContentResolver().query(selectedImage,
                filePathColumn, null, null, null);
        cursor.moveToFirst();

        int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
        String picturePath = cursor.getString(columnIndex);
        cursor.close();

        browsedImage.setImageBitmap(BitmapFactory.decodeFile(picturePath));
        ContentResolver cr = getContentResolver();
        try {
            Uri uri = Uri.parse(MediaStore.Images.Media.insertImage(cr, "", "name", "now"));
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }}

    private Uri getOutputMediaFileUri(String upload2) {
    // TODO Auto-generated method stub
    return null;
}

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
    public int getCount() {
        return count;
    }

    public void setCount(int count) {
        this.count = count;
    }

}    

    // this is my db helpper
    package dress.advance;

import java.io.ByteArrayOutputStream;
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;

import android.database.sqlite.SQLiteOpenHelper;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;

import android.util.Log;

public class DBAdapter {

    public final static String Key_ROWID = "_id";
    public final static String Key_NAME = "name";
    public final static String TAG = "socialNatwork";
    public final static String DATABASE_NAME = "SocialNetwork";
    public final static String Key_IMG = "image";

    public final static String DATABASE_TABLE = "PESITIMAGE";

    public final static int DATABASE_VERSION = 1;

    //i think the problem might be here 
    public final static String DATABASE_CREATES =
            "create table PESITIMAGE(_id integer primary key autoincrement, image BLOB not null, name text not null);  ";

    private DatabaseHelper DBHelper;
    private SQLiteDatabase db;
    private Context context;

    public DBAdapter (Context ctx){
        this.context = ctx;
        DBHelper = new DatabaseHelper(context);

    }

    private static class DatabaseHelper extends SQLiteOpenHelper{

        DatabaseHelper(Context context){

            super(context, DATABASE_NAME, null, DATABASE_VERSION);

        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            // TODO Auto-generated method stub
            Log.i(TAG, "Creating the database");
            db.execSQL(DATABASE_CREATES);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            // TODO Auto-generated method stub
            Log.w(TAG, "upgrading database from version" + oldVersion 
                    + " to" 
                    + newVersion +", which will destroy all data");
            db.execSQL("DROP TABLE IF EXIST PESITIMAGE");
            onCreate(db);

        }
    }

        public DBAdapter open() throws SQLException{
            Log.i(TAG, "opening the database");
            db = DBHelper.getWritableDatabase();
            return this;

        }

        public void close(){
            Log.i(TAG, "closing the database");
            db = DBHelper.getWritableDatabase();
            DBHelper.close();

        }

        public void createImgEntry(Img img){
            ByteArrayOutputStream out = new ByteArrayOutputStream();
            img.getBitmap().compress(Bitmap.CompressFormat.PNG, 100, out);
            ContentValues cv = new ContentValues();
            cv.put(Key_IMG, out.toByteArray());
            cv.put(Key_NAME, img.getName());
            long j = db.insert(DATABASE_TABLE, null, cv);
            Log.i("Sakshi", String.valueOf(j));
        }

        public Img getFirstImgFormats() throws SQLException{
            Cursor cur = db.query(true, 
                    DATABASE_TABLE,
                    new String[]{Key_IMG, Key_NAME},
                    null, null, null, null, null, null);
            if(cur.moveToFirst()){
                byte[] blob = cur.getBlob(cur.getColumnIndex(Key_IMG));
                Bitmap bmp = BitmapFactory.decodeByteArray(blob, 0, blob.length);
                String name = cur.getString(cur.getColumnIndex(Key_NAME));

                cur.close();
                return new Img(bmp,name);
            }
            cur.close();
            return null;

        }

        public Img getImgFromDB(String n) throws SQLException{
            Cursor cur = db.query(true,
                    DATABASE_TABLE,
                    new String[]{Key_IMG, Key_NAME},
                    Key_NAME+"=\""+n+"\"", null, null, null, null, null);
            if(cur.moveToFirst()){
                byte[] blob = cur.getBlob(cur.getColumnIndex(Key_IMG));
                Bitmap bmp = BitmapFactory.decodeByteArray(blob, 0, blob.length);
                String name = cur.getString(cur.getColumnIndex(Key_NAME));
                cur.close();
                return new Img(bmp,name);
            }
            cur.close();
            return null; 

        }

        public Img getImg() throws SQLException{
            Cursor cur = db.query(true, 
                    DATABASE_TABLE,
                    new String[]{Key_IMG, Key_NAME},
                    null, null, null, null, null, null);
            if(cur.moveToLast()){
                byte[] blob = cur.getBlob(cur.getColumnIndex(Key_IMG));
                Bitmap bmp = BitmapFactory.decodeByteArray(blob, 0, blob.length);
                String name = cur.getString(cur.getColumnIndex(Key_NAME));

                cur.close();
                return new Img(bmp,name);
            }
            cur.close();
            return null;

        }

    } 
```

# php - 用于 HTML 操作的正则表达式

> ID：15229803
> 
> 赞同：-5
> 
> 时间：2013-03-05T17:05:23.520
> 
> 标签：php, html, regex, xpath, simplexml

**对于任何**html td中的**任何**图像，为了得到以下结果，正则表达式是什么？

 **从：

```
<td width="7" height="50" nowrap>
<img src="/images/img_1.png" width="7" height="50" alt="" />
</td> 
```

到：

```
<td width="7" height="50" nowrap background="/images/img_1.png"></td> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T17:34:03.730

使用正则表达式解析 HTML 是不好的做法。相反，请使用 PHP 中提供的专门用于解析 HTML 的工具，即`DomDocument`[ [doc](http://php.net/manual/en/class.domdocument.php) ]。

```
// create a new DomDocument object
$doc = new DOMDocument();

// load the HTML into the DomDocument object (this would be your source HTML)
$doc->loadHTML('
    <table>
        <tr>
            <td width="7" height="50" nowrap>
                <img src="/images/img_1.png" width="7" height="50" alt="" />
            </td>
        </tr>
    </table>
');

//Loop through each <td> tag in the dom 
foreach($doc->getElementsByTagName('td') as $cell) {
    // grab any images in this cell
    $images = $cell->getElementsByTagName('img');
    if ($images->length >= 1) { // if an image is found
        $image = $images->item(0);
        // add the 'background' property to the cell, use the 'src' property
        $cell->setAttribute('background', $image->getAttribute('src'));
        // remove the image
        $cell->removeChild($image);
    }
}
echo $doc->saveHTML(); 
```

在行动中看到它：http: [//codepad.viper-7.com/x9ooyp](http://codepad.viper-7.com/x9ooyp)

**文档**

*   `DomDocument`- [http://php.net/manual/en/class.domdocument.php](http://php.net/manual/en/class.domdocument.php)
*   `DomElement`- [http://www.php.net/manual/en/class.domelement.php](http://www.php.net/manual/en/class.domelement.php)
*   `DomElement::getAttribute`- [http://www.php.net/manual/en/domelement.getattribute.php](http://www.php.net/manual/en/domelement.getattribute.php)
*   `DOMElement::setAttribute`- [http://www.php.net/manual/en/domelement.setattribute.php](http://www.php.net/manual/en/domelement.setattribute.php)
*   `DomDocument::loadHTMLFile`- [http://www.php.net/manual/en/domdocument.loadhtmlfile.php](http://www.php.net/manual/en/domdocument.loadhtmlfile.php)**

# java - EditText 丢失内容以移动列表视图

> ID：15229808
> 
> 赞同：0
> 
> 时间：2013-03-05T17:05:27.027
> 
> 标签：java, android, listview, adapter

我在滚动列表中的 EditText 有问题，EditText 的内容变得杂乱无章，所以我读了它，因为使用更少的内存重新分配了 ID。我已阅读有关此主题的相同查询和答案，但我无法解决。

非常感谢您的帮助，我是移动设备的新编程者

这是我的代码：

```
public class AdapterFilaProducto extends BaseAdapter {
  protected Activity activity;
  protected ArrayList<ItemFilaProducto> items;
  protected ItemFilaProducto item;
  protected String tipo;
  protected Mascaras msk = new Mascaras();
  public ImageButton btnImDerecha ;
  public ImageButton btnImIzquierda;
  public TextView producto;
  private InterfazSeleccionProducto contex;  
  private BaseDataAdapter db;
  private TextView precioCantidad;
      TextView precio;

  public AdapterFilaProducto(Activity activity, ArrayList<ItemFilaProducto> items,String tipo) {
    this.activity = activity;
    this.items = items;
    this.tipo = tipo;
  }
  public AdapterFilaProducto(Activity activity,InterfazSeleccionProducto contex, ArrayList<ItemFilaProducto> items,String tipo) {
        this.activity = activity;
        this.items = items;
        this.tipo = tipo;
        this.contex=contex;
      }

  public int getCount() {
    return items.size();
  }

  public Object getItem(int position) {
    return items.get(position);
  }

  public long getItemId(int position) {
    return items.get(position).getId();
  }
  public String getItemProducto(int position) {
        return items.get(position).getProducto();
      }
  public String getItemCantidad(int position) {
        return items.get(position).getCantidad();
      }
  public String getItemPercio(int position) {
        return items.get(position).getPrecio();
      }
  public EditText getItemEdit(int position) {
        return items.get(position).getEditTxt();
      }

  public View getView(int position, View convertView, ViewGroup parent) 
  {
    db = new BaseDataAdapter(activity);

    View vi=convertView;
    final ItemFilaProducto item = items.get(position);

    if(convertView == null) 
    {
              LayoutInflater inflater = (LayoutInflater)   activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
              vi = inflater.inflate(R.layout.list_producto, null);
    }  

       btnImDerecha = (ImageButton) vi.findViewById(R.id.BtnDerechaVenta);
       btnImIzquierda = (ImageButton) vi.findViewById(R.id.BtnIzquierdaVenta);
       TextView producto = (TextView) vi.findViewById(R.id.txtProductoVenta);
       item.precio = (TextView) vi.findViewById(R.id.txtCantidadVenta);
       item.edtxt = (EditText) vi.findViewById(R.id.editTxtListVenta);
       producto.setText(item.getProducto());
       Log.i("Precio",item.montoPrecio);
       if(item.cantidad.equalsIgnoreCase("0")){
           item.precio .setText(item.Precio);
       }else 
           item.precio .setText(item.montoPrecio);

       item.edtxt.setText(""+item.cantidad);

       btnImDerecha.setOnClickListener(new OnClickListener() {

             @Override
                public void onClick(View v) {
                    int i = Integer.parseInt(item.edtxt.getText().toString());
                    i=i+1;
                    item.edtxt.setText(""+i);

             }
            });
       btnImIzquierda.setOnClickListener(new OnClickListener() {
                public void onClick(View v) {
                    int i = Integer.parseInt(item.edtxt.getText().toString());
                      if(0<i){
                        i=i-1;
                        item.edtxt.setText(""+i);
                        }
             }
            });
               item.edtxt.addTextChangedListener(new TextWatcher() {
               public void afterTextChanged(Editable s)
               { 

               }
            public void beforeTextChanged(CharSequence arg0, int arg1, int arg2, int arg3) {

            }
            public void onTextChanged(CharSequence s, int start, int before, int count) { 
                db.open();
                Cursor cur = db.obtenerProductosTipo(tipo,item.getIdPro());
                if(cur.moveToFirst()){
                    int precio = cur.getInt(3);
                    int cantidad = Integer.parseInt(item.edtxt.getText().toString());
                    int monto = precio*cantidad;
                    if(0 < monto){
                        item.setPrecio(msk.mascaraMontoTxt(String.valueOf(monto)));
                        item.precio .setText(item.getPrecio());
                    }
                    db.actualizarProductoMonto(item.getIdPro(),monto);
                    db.actualizarProductoCantidad(item.getIdPro(),cantidad);
                }
                cur.close();
                int montoTotal = 0;
                Cursor curAll = db.obtenerProductosTipo(tipo);
                if(curAll.moveToFirst()){

                    do{
                        montoTotal = montoTotal + curAll.getInt(5);
                        Log.e("CANTIDAD", ""+curAll.getInt(5));
                    }while(curAll.moveToNext());
                    }

                curAll.close();
                try{
                    db.borrarTablaPar("MONTO");
                }catch(Exception e){

                }
                Log.e("MONTO", ""+montoTotal);
                DtoParametro dtoParametro = new DtoParametro();
                dtoParametro.ID_PAR = "MONTO";
                dtoParametro.VALOR = String.valueOf(montoTotal);
                Log.i("MONTO",""+String.valueOf(montoTotal));
                db.insertarParametro(dtoParametro);
                db.close();
                contex.mostrarMonto();          
            }
            });
    return vi;
  } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:21:43.377

ListViews 重用它们的行，因此您需要跟踪哪些 EditTexts 包含什么并在 ListView 滚动时恢复它们。只需在您的适配器中创建一个新`List<String>`的，我将调用它`userStrings`，以恢复适当的值使用：

```
item.edtext.setText(userStrings.get(position)); 
```

并将这些值存储在 EditText 中`onTextChanged()`或当 EditText 失去焦点时。

虽然我注意到您当前的适配器可以通过使用 ViewHolders 并仅在新布局膨胀时初始化您的代码来加快速度。这在各种 Google I/O 演讲中详细讨论，例如[Turbo-Charge Your UI](http://www.google.com/events/io/2009/sessions/TurboChargeUiAndroidFast.html)和[World of LiistView](http://www.google.com/events/io/2010/sessions/world-of-listview-android.html)。

# jakarta-ee - Java EE 架构：适配器的单独战争

> ID：15229809
> 
> 赞同：0
> 
> 时间：2013-03-05T17:05:27.767
> 
> 标签：jakarta-ee, architecture, war, ear, eai

架构问题：我有一个 Java EE 企业应用程序，目标是部署给许多不同的客户。它包括：

*   标准后端：为每个客户提供相同的核心
*   用于 EAI 适配器的单独模块：旨在包含所有客户特定的集成（财务、CRM、ERP 等） - 为每个客户提供不同的实施

我可以看到 2 个选项：

*   只有一个 backend-cust1.ear，其中包含 core.jar 和 adapter-cust1.jar。
*   适配器的单独 WAR。因此，我们将拥有：backend.ear 仅包含 core.jar，即为每个客户提供相同的交付方式和单独的适配器-cust1.war。

问题在于，使用第一个解决方案，核心可以通过简单的 java 方法调用来调用适配器，客户特定的实现可以注入一些 CDI 代码。

但是对于第二种解决方案，我们需要一些远程技术来在核心和适配器之间进行通信：例如 JMS 或 WS。在我看来，这是一种相当沉重的方式。

但是我们认为适配器可能依赖于任何东西（MQ、SAP 客户端，实际上是任何东西），我们希望确保这些依赖关系不会以任何方式影响我们的公共核心，这就是我们考虑进行单独战争的原因。

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T21:46:25.613

我看到两个好方法：

*   [Java EE 连接器](http://en.wikipedia.org/wiki/Java_EE_Connector_Architecture)- 它允许创建托管连接、事务等，但旧且不流行
*   [OSGI](http://en.wikipedia.org/wiki/OSGi) - 将用可能的 jar hell、模块和他们的接口解决你的问题，更好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T11:12:54.100

您应该能够从其他 EAR 注入“需要的类”/组件/模块。所有 Java EE 应用程序服务器都支持这一点。

例如，如果是 EJB： [WebSphere 7\. 从另一个应用程序注入 EJB](https://stackoverflow.com/questions/9325055/websphere-7-inject-ejb-from-another-application)

在其他情况下，指定项目依赖项应该可以解决问题。

在架构上，ESB 听起来更适合这里。但在我看来，理想情况下您不需要 ESB，因为您将只有一个客户集成。

祝你好运

# java - Hibernate 参数值 [568903] 与预期类型 [java.lang.Long] 不匹配

> ID：15229810
> 
> 赞同：16
> 
> 时间：2013-03-05T17:05:29.333
> 
> 标签：java, hibernate, jpa, jpa-2.0

我正在使用 Hibernate 4，并且在 JSF 页面中有一个过滤器来获取搜索结果。在执行搜索期间，我收到以下异常

> java.lang.IllegalArgumentException：参数值 [568903] 与 org.hibernate.ejb.AbstractQueryImpl.validateParameterBinding(AbstractQueryImpl.java:370) 中 org.hibernate.ejb.AbstractQueryImpl.registerParameterBinding 的预期类型 [java.lang.Long] 不匹配(AbstractQueryImpl.java:343) 在 org.hibernate.ejb.QueryImpl.setParameter(QueryImpl.java:370) 在 org.hibernate.ejb.QueryImpl.setParameter(QueryImpl.java:323)

下面是我的代码片段，我该如何解决这个问题？

```
private Long projectNo; 

public Long getProjectNo() {
    return projectNo;
}

public void setProjectNo(Long projectNo) {
    this.projectNo = projectNo;
} 
```

在 DAO 课程中，我有以下内容

```
String projectNo = filters.get("projectNo");
List<Predicate> criteria = new ArrayList<Predicate>();
    if (projectNo!= null) {
    ParameterExpression<String> pexp = cb.parameter(String.class, "projectNo");             
    Predicate predicate = cb.equal(emp.get(Project_.projectNo), pexp);
    criteria.add(predicate);
}
TypedQuery<Project> q = entityManager.createQuery(c);
TypedQuery<Long> countquery = entityManager.createQuery(countQ);
q.setParameter("projectNo", projectNo); // error in this line
countquery.setParameter("projectNo", projectNo); 
```

**编辑 1**

```
public void getProjects(ProjectQueryData data) { 
```

在`ProjectQueryData`课堂上，我有以下作为构造函数

```
public ProjectQueryData (int start, int end, String field,
            QuerySortOrder order, Map<String, String> filters) { 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-05T19:00:40.037

因为持久属性 projectNo 的类型是`Long`，所以创建 ParameterExpression 时的类型参数应该是`Long`。因此，因为 ParameterExpression 的`Long`类型是 ，所以参数值的类型也应该是 Long ：

```
//because this persistent Attribute is Long:
private Long projectNo; 

//we use Long here as well
ParameterExpression<Long> pexp = cb.parameter(Long.class, "projectNo");
...
//and finally set parameter. Long again, because that is the type 
// type of ParameterExpression:
query.setParameter("projectNo", Long.valueOf(projectNo)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T17:08:23.153

`projectNo`是`long`在 DAO 中输入，所以将其更改为`long`.

试试这个：

```
q.setParameter("projectNo", new Long(projectNo)); 
```

我认为你应该改变：

```
ParameterExpression<String> pexp = cb.parameter(Long.class, "projectNo"); 
```

到

```
ParameterExpression<String> pexp = cb.parameter(String.class, "projectNo"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-05T17:12:44.580

在您的 DAO 类中，您将获得`projectNo`一个字符串：

```
String projectNo = filters.get("projectNo"); 
```

但是，在您的模型类中，您定义`projectNo`为 Long。

当您在此行的 DAO 中设置参数时：

```
q.setParameter("projectNo", projectNo); // error in this line 
```

您将参数设置为字符串。尝试按如下方式更改该行（假设您已 null-checked `projectNo`）：

```
q.setParameter("projectNo", Long.parseLong(projectNo)); 
```

`projectNo`在调用`Long.parseLong`. 您可以使用[Apache Commons StringUtils.isNumeric](http://commons.apache.org/proper/commons-lang//apidocs/org/apache/commons/lang3/StringUtils.html)来做到这一点。

# mysql - 从 SQL 获取日期

> ID：15229816
> 
> 赞同：0
> 
> 时间：2013-03-05T17:05:58.800
> 
> 标签：mysql, sql

有一个称为 DateA 的列。如何选择“Yesterday_Date”、“Last_Seven_Day_Date”、“Life_Time_Date”？

```
DateA

2013-02-28
2013-02-27
2013-02-26
---
---
2013-01-30
2013-01-29
2013-01-28 
```

对于昨天的日期，我认为我们可以这样做：

```
select date_sub(curdate(),interval 1 day) as 'Yesterday'; 
```

输出/输出：

```
2013-03-04 
```

-- 例如，如果我在 TableA 上有两列 Date 和 ID。在 select 语句中，如果我说“Yesterday_Date”，则需要显示 1 天的数据。如果我说“Last_Seven_Day_Date”，它需要显示最近 7 天的数据。如果我说“Life_Time_Date”，它需要显示表中的所有数据。

该 select 语句会是什么样子？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T17:09:28.857

您的 where 子句如下所示：

昨天：

```
WHERE `Date` = date_sub(curdate(), interval 1 day) 
```

过去 7 天：

```
WHERE `Date` >= date_sub(curdate(), interval 7 day); 
```

全部（Life_Time_Date）：无`WHERE`子句

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T17:35:59.793

这个你去

```
 select date_sub(curdate(),interval 1 day) as Yesterday , 
          date_sub(curdate(),interval 7 day) as seven_days_ago ,
          min(DateA) as Life_Time_Date 
```

min 表示存储在 中的第一个日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T17:52:36.667

以下是我所做的并且有效：

```
select date_sub(curdate(),interval 1 day), 'Yesterday' union
select date_sub(curdate(),interval 7 day), 'Last 7' union
select date_sub(curdate(),interval 14 day), 'Last 14' union
select date_sub(curdate(),interval 14 day), 'Last 30' union
select min(dateFact), 'LifeTime' from TBLA; 
```

然后我选择列[0]。

谢谢你们。

# c# - 在 SQL WHERE 子句中使用变量时出现 Visual C# OleDbException

> ID：15229817
> 
> 赞同：2
> 
> 时间：2013-03-05T17:06:00.510
> 
> 标签：c#, sql

我目前在 Visual Studio 中使用 C# 并且正在使用访问数据库。当从列表框中选择客户时，我试图从数据库中取回数据。当 sql 被硬编码时，这非常有效，例如

```
command.CommandText = "SELECT * FROM Customers WHERE CustomerID = 2 "; 
```

但是，当我尝试使用字符串变量来存储选定的用户 ID 时，我在

```
"OleDbDataReader reader = command.ExecuteReader();". 
```

我使用消息框来确认 s2 变量在选择时包含正确的 ID，因此我不确定问题所在。

有谁知道这个问题的解决方案？

```
 private void lst_disp_SelectedIndexChanged(object sender, EventArgs e)
    {
        String s = (String)lst_disp.SelectedItem; // the s string contains the selected customers ID + name,
        string s2 = s.Split(' ').FirstOrDefault(); // by spliting we can gain only the ID and store in s2
        MessageBox.Show("Selected " + s2);
        showCust(s2);
    }

    private void showCust(string s2)
    {
        dataGridView1.AllowUserToAddRows = false;

        dataGridView1.Columns.Add("CustomerID", "Customer ID");
        dataGridView1.Columns.Add("CustomerName", "Customer Name");
        dataGridView1.Columns.Add("Description", "Description");
        dataGridView1.Columns.Add("Email", "Email");
        dataGridView1.Columns.Add("Telephone", "Telephone");
        dataGridView1.Columns.Add("DeliveryAddress", "Delivery Address");
        dataGridView1.Columns.Add("Notes", "Notes");

        OleDbConnection connect = new OleDbConnection();
        connect.ConnectionString = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=E:\Uni\Year 3\Final Year Project\independent foods\coding\showCustomers\Database1.accdb;Persist Security Info=False";
        connect.Open();
        MessageBox.Show("Connection open");

        OleDbCommand command = new OleDbCommand();
        command.Connection = connect;

        MessageBox.Show("SELECT * FROM Customers WHERE CustomerID = '" + s2 + "' ");
        command.CommandText = "SELECT * FROM Customers WHERE CustomerID = '" + s2 + "' ";

        try
        {
            OleDbDataReader reader = command.ExecuteReader();

            while (reader.Read())
            {

                dataGridView1.Rows[dataGridView1.Rows.Count - 1].Cells["CustomerID"].Value = reader[0].ToString();
                dataGridView1.Rows[dataGridView1.Rows.Count - 1].Cells["CustomerName"].Value = reader[1].ToString();
                dataGridView1.Rows[dataGridView1.Rows.Count - 1].Cells["Description"].Value = reader[2].ToString();
                dataGridView1.Rows[dataGridView1.Rows.Count - 1].Cells["Email"].Value = reader[3].ToString();
                dataGridView1.Rows[dataGridView1.Rows.Count - 1].Cells["Telephone"].Value = reader[4].ToString();
                dataGridView1.Rows[dataGridView1.Rows.Count - 1].Cells["DeliveryAddress"].Value = reader[5].ToString();
                dataGridView1.Rows[dataGridView1.Rows.Count - 1].Cells["Notes"].Value = reader[6].ToString();
            }
        }
        catch(Exception e)
        {
    MessageBox.Show("The File  cann't be read. Error: " + e.Message);
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T17:11:00.353

删除单引号，看起来该列是一个 int。

```
command.CommandText = "SELECT * FROM Customers WHERE CustomerID = " + s2; 
```

此外，您应该参数化它以更好地防止 sql 注入（类似这样）：

```
SqlParameter custID = new SqlParameter("custID",s2);
command.Parameters.Add(custID);
command.CommandText = "SELECT * FROM Customers WHERE CustomerID = @custID"; 
```

看看[这篇文章](https://stackoverflow.com/questions/5468425/how-do-parameterized-queries-help-against-sql-injection)，或者做一个简单的搜索参数化你的查询。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-05T17:08:57.310

一个简单的谷歌展示如何使用参数[MSDN](http://msdn.microsoft.com/en-GB/library/system.data.oledb.oledbcommand.parameters.aspx)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-05T17:11:44.910

这是因为当你这样参数化它时，结果查询是不一样的。

在您的原始硬编码声明中，您有

```
SELECT * FROM Customers WHERE CustomerID = 2 
```

在你的新声明中，你最终得到

```
SELECT * FROM Customers WHERE CustomerID = '2' 
```

`CustomerID`是一个 int，但您试图将它与第二个示例中的字符串进行比较。

试试这行代码：

```
 command.CommandText = "SELECT * FROM Customers WHERE CustomerID = " + s2; 
```

我删除了单引号。

编辑 Mike C 提出了一个非常好的观点。您应该对其进行参数化，以获得更高的可靠性。

# java - 具有属性和复合 id 的多对多

> ID：15229818
> 
> 赞同：0
> 
> 时间：2013-03-05T17:06:04.330
> 
> 标签：java, hibernate, jpa, many-to-many, composite-primary-key

假设我与一个属性有一个多对多的关系。我想用两个一对多的关系来代替它。如果我配置键，我会收到一个奇怪的警告，即主键的属性数量无效。

这是我想要的：

```
User <1:N> Notification <N:1> Thread 
```

`user_id`您应该注意，我需要通知才能拥有一个由and组成的复合键`thread_id`。

这就是我尝试过的：

```
@Entity
public class Notification implements Serializable {

    @EmbeddedId
    @AttributeOverrides( {
        @AttributeOverride(name = "user_id", column = @Column(nullable = false)),
        @AttributeOverride(name = "thread_id", column = @Column(nullable =false))
    })
    private NotificationPK id;

    @ManyToOne(fetch = FetchType.EAGER)
    @JoinColumn(name = "user_id", insertable = false, updatable = false)
    private User user;

    @ManyToOne(fetch = FetchType.EAGER)
    @JoinColumn(name = "thread_id", insertable = false, updatable = false)
    private Thread thread;    
} 
```

在 Thread 类上，它看起来像这样：

```
 @OneToMany(fetch=FetchType.LAZY)
    @JoinTable(
        name="notifications",
        joinColumns=@JoinColumn(name="thread_id")
    )
    private Set<Notification> notifications = new HashSet<Notification>(); 
```

使用`NotificationPK`如下：

```
@Embeddable
public class NotificationPK implements Serializable {

    Long user_id;
    Long thread_id;
} 
```

但是，一旦我启动，我就会得到以下异常：

```
 Caused by: org.hibernate.MappingException: 
     Foreign key (FK4BD694E87364C017:notifications 
        [notifications_thread_id,notifications_user_id])) 
     must have same number of columns as the referenced 
     primary key (notifications 
        [thread_id,notifications_thread_id,notifications_user_id]) 
```

我究竟做错了什么？为什么他希望这是主键的一部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T02:17:02.187

好的，我第一次尝试回答太微不足道了！

您需要的是一个 UID 主键，`Notification`它与构成“连接”的外键无关。

有关更具体的示例，请参阅我对[这个问题的回答。](https://stackoverflow.com/questions/18205248/jpa-embeddedid-how-to-update-part-of-a-composite-primary-key)

# api - 我可以使用 Google Wallet for Digital goods API 在后台处理付款吗？

> ID：15229821
> 
> 赞同：0
> 
> 时间：2013-03-05T17:06:06.013
> 
> 标签：api, payment-gateway, payment-processing, android-pay

[https://developers.google.com/commerce/wallet/digital/](https://developers.google.com/commerce/wallet/digital/)

定价模式很有吸引力，但我想使用自己的付款方式。

目前是否有办法将买家凭证从我们的表单传递到 API 以进行后台处理，或者是否有计划在未来提供此选项？

我确实明白，通过这种方法，如果买家有 Google 电子钱包帐户，我会放弃使用 Google 电子钱包帐户的便利。但是，我认为我们使用的表单会为我们（以及 Google）带来更高的转化率。宁愿使用 API 在后台通过商家帐户或 Paypal Payments Pro 对卡进行收费。还希望整合保存的卡以供将来购买。

这是今天可能的，还是应该在未来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T23:37:27.303

不确定您是否专门查看该 API（数字钱包）。你可以看看[Wallet for Online Commerce](https://developers.google.com/commerce/wallet/online/overview)，在那里你可能更接近你想要的......

它仍然基于“谷歌钱包”是用户存储他们的支付信息的地方（因此不是像你提到的服务那样的“信用卡网关/处理服务”）但你确实有更多的控制权......

嗯...

# asp.net - 即使启动服务器也无法运行文件扩展名 aspx

> ID：15229828
> 
> 赞同：0
> 
> 时间：2013-03-05T17:06:37.753
> 
> 标签：asp.net

这是我运行它时在我的 aspx 文件中的代码。它在浏览器中显示所有代码。我认为这可能是我不导入命名空间，但是当我导入时它仍然是一样的。

```
<% page language="VB" %>
<!DOCTYPE html PUBLIC ".......">
<%@ Import Namespace="System.Data" %>
<%@ Import Namespace="System.Data.sqlClient" %>
<script language="vb" runat="server">
Private con As SqlConnection
Private command As SqlCommand
Private reader As SqlDataReader

sub Page_Load
        con = New SqlConnection("data source=ASUS-PC; database=personal; user id=sa; password=xxxxx;")
        con.Open()
end sub

</script>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

</head>
<body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T17:19:58.247

尝试改变

```
<% page language="VB" %> 
```

至

```
<%@ Page Language="VB" %> 
```

此外，将您的脚本标签放在标签内`<head>`，最好使用`runat="server"`属性。我强烈建议您也使用 CodeBehind 功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:45:54.560

转到服务器管理器 > 角色 > Web 服务器 > 角色服务并查看是否安装了 ASP.NET。默认情况下，IIS 仅提供静态内容。

# makefile - 在目标内设置 Makefile 变量

> ID：15229833
> 
> 赞同：29
> 
> 时间：2013-03-05T17:06:42.160
> 
> 标签：makefile

我在makefile中有一个目标：

```
all: $(TARGETS) 
```

我想要一个变体，它的不同之处`all`仅在于它设置了一个环境变量。就像是：

```
all-abc: $(TARGETS)
    ABC=123 
```

但这不起作用，因为在设置变量之前处理了依赖项。我考虑过在真正设置环境变量之前有另一个依赖项，但我认为环境不会跨目标持续存在。也就是说

```
abc:
    ABC=123
all-abc: abc $(TARGETS) 
```

不起作用。我最终想要能够做的是

```
$ make all-abc 
```

代替

```
$ ABC=123 make 
```

是否可以设置这样的环境变量？

(GNU Make 3.82)

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-05T17:49:30.160

尝试这个：

```
all:
    @#usual rule, if you call `make all-abc`, this will print "123"
    @echo $(ABC)

all-abc: ABC=123
all-abc: all
    @#what you put here it's going to be executed after the rule `all` 
```

# c - VAD 从听模式切换到说模式

> ID：15229835
> 
> 赞同：1
> 
> 时间：2013-03-05T16:20:06.487
> 
> 标签：c, audio, voice, alsa

我正在尝试使用树莓派和定制电路将我的四线公寓蜂鸣器变成 VOIP 电话。问题是不支持双向通信。我要么在听，要么在说。我想使用带有星号的标准 SIP 设置，但在树莓派的声音输出上执行 VAD，以便在音频输出上有声音时发送数字信号，将对讲机切换到“说话模式”。是否有任何预先存在的 c 函数或包含听 ALSA 混音器并抛出 1 表示语音和 0 表示没有语音，并且延迟足够低，可以在这个类似步话机的系统中使用？

再一次，我更喜欢预先存在的库，因为这是实时的，低延迟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:13:11.713

ALSA 是一个简单的混音器，它的接口只包含混音器相关的方法。它旨在抽象出硬件驱动程序。您可以做的是实时从 ALSA 获取音频数据，但是您需要实现自己的语音活动检测。

这个[关于 Signal Processing SE](https://dsp.stackexchange.com/questions/2386/libraries-for-voice-activity-detection-not-speech-recognition)的问题对库和编解码器实现有一些很好的建议，可以帮助您入门。

# javascript - 在 div 上使用 JavaScript 函数单击已使用 get 获取的 div

> ID：15229837
> 
> 赞同：0
> 
> 时间：2013-03-05T17:06:51.000
> 
> 标签：javascript, jquery

我已经做了一些搜索，但找不到答案，所以我想我会在这里问我的第一个问题。

基本上，在单击 div 时，我使用 get 获取一些 html 并附加到 div 的底部。获取的 html 包含最初单击的相同 div。我需要它可以单击以运行与原始 div 相同的功能。这很难解释，并且通过使用 JScrollPane 变得更加复杂

所以这是相关的JavaScript：

```
$(document).ready(function ($) {
$(document).on('click', 'div#append-tweets', function () {

    //The url is altered to collect the next page of tweets in my example, but this will do
    var currentURL = document.URL;

    currentURL = currentURL + " #content-area > *";

    //gets data from the url
    $.get(currentURL, function (data) {

        //finds the tweets on the page and returns them as HTML
        html = $(data).find('#content-area').html();
        //appends the html to the div - uses api as this is the JScrollPane
        api.getContentPane().append(html);

    }, 'html');

    //reload the scrollbar
    api.reinitialise();

    //makes div button disappear after it is clicked
    document.getElementById('append-tweets').style.display = "none";

});
}); 
```

这是相关的 HTML：

```
<div id="content-area">
//other stuff

    <div id="append-tweets">Load More Tweets</div>

</div> 
```

目前，该功能在第一次单击时运行，并且一切正常。按钮 div 消失（这很好），新内容已加载，包括新按钮 div，但该按钮不可点击，即使它具有相同的 ID。在此先感谢您的帮助，我对 JS 和 JQuery 很陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:11:21.643

您只能拥有*一个*具有相同 ID 的元素。选择`$("#id")`器只会选择具有 ID 的*第一个*元素`#append-tweets`，即使有多个元素（同样适用于`document.getElementById`.

要么使用一个类（`.append-tweets`），或者如果你*必须*，我们使用属性选择器（**不推荐**）`$("[id=append-tweets]")`：。

# css - 调整页面大小后居中可变宽度网格

> ID：15229840
> 
> 赞同：3
> 
> 时间：2013-03-05T17:06:52.673
> 
> 标签：css, html, resize, wrapper, center

这是我想在 CSS 中执行的操作的图像： [image](http://i.stack.imgur.com/AV29I.png)。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T18:18:13.827

**创刊号**

*居中没有明确宽度的元素*

这可以防止通常的解决方案`margin: 0 auto;`成为一种选择。

**更大的问题**

*没有未使用的空间用于将包装器置于其容器中*

如果元素的宽度由其内容的宽度决定，则称该元素为收缩包装。如果内容的大小发生变化，则元素的宽度也会发生变化。这是内联、内联块或浮动元素的默认行为。

当收缩包装的父级中的内容环绕到下一行时，父级停止收缩包装；它现在占据了它自己的容器的整个宽度。从技术上讲，父对象是居中的，因为它完全填满了容器，但它的内容不是居中的。除非父级有明显的背景颜色或壁纸图像，否则父级似乎也不居中。

这也适用于一些更高级的特性，比如 CSS3 flexbox，显然也阻止了它成为一个选项。

**解决方案**

*媒体查询*

事实证明有一个简单的 CSS 解决方案。基本问题是这种单一的布局网格不能支持广泛的屏幕尺寸并且仍然将内容居中。[但是在CSS3 媒体查询](http://www.w3.org/TR/css3-mediaqueries/)的帮助下，可以创建各种布局网格，并根据屏幕大小选择合适的网格。

例如，创建一个具有 1 列的布局网格，以及一个具有 2 列的布局网格，以及一个具有 3 列的布局网格，依此类推，以根据需要创建尽可能多的列。无论哪个网格适合当前的屏幕尺寸，那就是使用的那个。布局网格可能是相同的，除了给定每个网格的固定宽度，宽度刚好足以容纳列数。由于每个网格都有固定的宽度，因此使用 将它们水平居中变得微不足道`margin: 0 auto;`。

换句话说，与其试图强制一个布局来处理所有浏览器尺寸，不如创建许多布局，然后选择一个可以轻松处理当前浏览器尺寸的布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T17:08:11.037

将所有 div 放在另一个 div 中，并使两边的边距自动。请参阅这个综合示例：[Problem centering div with css](https://stackoverflow.com/questions/3972857/problem-centering-div-with-css?rq=1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T17:11:53.880

只需将 CSS 属性赋予包装器

```
#wrapper{
margin: 0px auto;
} 
```

当您调整浏览器窗口大小时，上述代码将自动居中对齐。这是为您的页面添加响应能力的过程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T17:15:44.693

您想要居中的 div 必须有一个宽度，并且您必须将边距设置为自动。这是一个例子：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Example</title>
<style type="text/css">
body{
margin: 0px;
padding: 0px;
}

#wrapper{
width: 800px;
min-height: 200px;
margin: auto;
}

.block{
width: 100px;
height: 100px;
float: left;
}

</style>
</head>
<body>
<div id="wrapper">
    <div class="block"></div>
    <div class="block"></div>
    <div class="block"></div>
    <div class="block"></div>
</div>
</body>
</html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-23T14:33:02.197

由于懒得实现媒体查询（以及要考虑的多个场景），我实现了一个简单的解决方案。将图像放入一个无序列表（其中 li {display: inline-block}），然后是 (text-align: center) 包装器。稍后调整您的边距等以使其漂亮。

```
<style>
    #wrapper {
        text-align: center;
    }
    #wrapper li {
        display: inline-block;
    }
</style>

<div id="wrapper">
    <ul>
        <li><img src=""></img></li>
        <li><img src=""></img></li>
        <li><img src=""></img></li>
        <li><img src=""></img></li>
        <li><img src=""></img></li>
    </ul>
</div> 
```

# javascript - 链接头的Node.js解析器？

> ID：15229843
> 
> 赞同：4
> 
> 时间：2013-03-05T17:07:04.597
> 
> 标签：javascript, node.js, github-api, link-header

我正在使用 Github API，它使用[此处定义的链接标头](http://www.w3.org/Protocols/9707-link-header.html)进行分页。

目前我只是使用一些字符串操作来提取“下一个”URL，但我想知道是否有合适的模块用于此目的（我无法在“npm 搜索”中找到任何内容）。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T21:47:34.073

有这个：[https ://npmjs.org/package/parse-links](https://npmjs.org/package/parse-links)

在我看来，它看起来有点脆弱，但看起来它会进行非常基本的解析。

# doctrine-orm - 教义2更改引用的ColumnName symfony2

> ID：15229845
> 
> 赞同：0
> 
> 时间：2013-03-05T17:07:09.477
> 
> 标签：doctrine-orm

如何在 ManyToOne 关系实体中更改实体 A 在实体 B 中查找 ID 的列名？

```
Table A
--------
id
title

Table B
---------
id
description
code_article 
```

我要查找 id 表 A = code_article 表 B

怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:36:47.107

您可以添加`@JoinColumn`注释。

```
/**
 * @ManyToOne(targetEntity="TableA")
 * @JoinColumn(name="code_article", referencedColumnName="id")
 */
private $article; 
```

# android - Android sqlite3_limit？

> ID：15229848
> 
> 赞同：4
> 
> 时间：2013-03-05T17:07:17.147
> 
> 标签：android, sqlite, limit

我想使用 sqlite3_limit 函数来设置附加数据库的最大数量。

```
sqlite3_limit(db, SQLITE_LIMIT_ATTACHED, 62); 
```

问题 1 - 我如何（如果有的话）在 Android 中执行此操作？

* * *

我在这里阅读了[http://sqlite.org/limits.html](http://sqlite.org/limits.html) - 第 11 点。

默认情况下有 10 个附加数据库的软限制，但是我刚刚成功附加了 11 个数据库。

问题 2 - Android 上 max Attached Databases 的默认行为是什么？- 是否设置为 SQlite3 的硬限制 62？如果是这样，这就是我所需要的。

谢谢大家

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T18:09:56.483

[`sqlite3_limit`](http://sqlite.org/c3ref/limit.html)只能用于*降低*限制：

> 运行时限制旨在用于管理其自己的内部数据库以及由不受信任的外部源控制的数据库的应用程序。[...] 内部数据库可以被赋予较大的*默认*限制。可以为由外部资源管理的数据库提供更小的限制，以防止拒绝服务攻击。

`SQLITE_MAX_ATTACHED`编译 SQLite 时使用符号设置硬限制：

> 对于每个限制类别 SQLITE_LIMIT_ *NAME ，在编译时由一个名为 SQLITE_MAX_* *NAME*的 C 预处理器宏设置一个硬上限。[...] 将限制增加到硬上限之上的尝试会被默默地截断为硬上限。

看来，在您的 Android 设备上，供应商确实增加了硬限制，但您不能保证在其他所有设备上都是如此。

# c# - 如何将内存流写入 tif 文件？

> ID：15229849
> 
> 赞同：-1
> 
> 时间：2013-03-05T17:07:17.367
> 
> 标签：c#, tiff, multipage

`TiffBitmapEncoder te= new TiffBitmapEncoder()`我在;创建了一个多页 tiff （使用 CCITT4）

然后我将它复制到内存流说`MemoryStream ms = new MemoryStream()`使用`ts.save(ms);`

现在这个内存流有很多页的 tiff 图像。我只需要将它写入 tiff 文件。我不想通过 Bitmap.Save(location,coded,parameters) 再次编写它，因为使用`(long)EncoderValue.CompressionCCITT4`会在 2003 Windows 机器上产生错误。

我尝试将 ms 重置为位置 0 并写入图像并保存到图像位置。但这只写了 1 页 tiff。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T17:46:47.100

只需直接写入一个`FileStream`. 没有必要使用`MemoryStream`第一个。

# socket.io - socket.io 基本问题

> ID：15229850
> 
> 赞同：0
> 
> 时间：2013-03-05T17:07:17.837
> 
> 标签：socket.io

我在 app.js 中有这段代码

```
var app = require('http').createServer(handler),
io = require('socket.io').listen(app),
static = require('node-static');
var fileServer = new static.Server('./');
app.listen(8080);
function handler (request, response) {
    request.addListener('end', function () {
        fileServer.serve(request, response);
    });
}
io.set('log level', 1);
io.sockets.on('connection', function (socket) {
     socket.on('click', function () {
            socket.broadcast.emit('moving');
        });

}); 
```

索引.html

```
<script>
    var url = window.location.hostname;
    var socket = io.connect(url);
     socket.on('moving', function () {
        $("body").append('<div class="text">tex</div>');
     });
</script> 
```

我想写简单的文本（div），但它不起作用..哪里有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T17:53:30.833

默认情况下， socket.io 不会帮助观察`click`事件。编辑您的客户端代码，如下所示：

```
<script>
    var url = window.location.hostname;
    var socket = io.connect(url);
    socket.on('moving', function () {
        $("body").append('<div class="text">tex</div>');
    });
    // manually emit the event, or bind `click` inside dom
    // and call socket.emit('click') inside onClick()
    socket.emit('click');
</script> 
```

# javascript - 如何用javascript对多个（未定义的数字）文本框的数量求和？

> ID：15229851
> 
> 赞同：1
> 
> 时间：2013-03-05T17:07:19.237
> 
> 标签：javascript, forms, textbox, sum, textfield

我正在使用数据库中的值创建一个带有 php 和 html 的表，并且该表的字段是文本字段。第一列中的所有文本字段都具有相同的名称，并且第二列中的所有文本字段都具有相同的名称......等等。

在前 5 列之后有一个空列，我应该在其中显示该行中第 5 个文本字段的总和。所有的行都是不同的形式。我不知道如何做到这一点，我什至不知道是否有一种简单的方法可以按表单选择文本字段，所以任何帮助都会很棒。

前 5 个文本字段的总和应该出现在该空列中，并且在更改任何文本框值时应该触发 javascript 函数。如果有人知道如何做到这一点，那就太好了。

如果您想查看表创建代码：

```
<?php 
$arrayida=array(0);
$arrayidp=array(0);
$host="localhost"; // Host name 
$username="root"; // Mysql username 
$password=""; // Mysql password 
$db_name="3Ciclo"; // Database name 
 // Table name 

// Connect to server and select database.
mysql_connect("$host", "$username", "$password") or die("cannot connect"); 
mysql_select_db("$db_name") or die("Cannot select Database.");

                    $queryida="SELECT * FROM areas where tipo='AE' or tipo='C'";
                    $resultida=mysql_query($queryida);
                    while($b = mysql_fetch_array($resultida))
                    {   
                        $ida=$b["ida"];
                        if (in_array ($ida , $arrayida ))
                        {

                        }else{
                                $arrayida[]=$ida;
                                /*while($b = mysql_fetch_array($resultida))
                                {
                                    ?>
                                    <td> <?php echo $ida." - ".$b['nome']; ?> </td>
                                    <?php 
                                }*/

                        }
                    }

sort($arrayida);
//print_r($arrayida);
foreach ($arrayida as $key => $val) 
{   

    if($key <> 0)
    {
        if ($key == 5){
            $prev=$val;
            $queryida="SELECT * FROM areas where ida=".$val;
            $resultida=mysql_query($queryida);
            while($b = mysql_fetch_array($resultida))
            {

                $nome=$b["nome"];
                $idz=$b["ida"];
            ?> <td style="font-size:9px"> <?php echo "$nome"; ?> </td> <td style="background-color:#FFF"> </td> <?php 
            }

        }else
            {
                $queryida="SELECT * FROM areas where ida=".$val;
                $resultida=mysql_query($queryida);
                while($b = mysql_fetch_array($resultida))
                {
                    $nome=$b["nome"];
                    $idz=$b["ida"];
                ?> <td style="font-size:9px"> <?php echo "$nome"; ?> </td> <?php 
                }
            }

    }
}

 ///////////////////////////////////////////////////////

$sql="SELECT * FROM relacoes as a inner join areas as b on a.ida=b.ida where b.tipo='AE' or b.tipo='C'";
$resultrelacoes=mysql_query($sql);
$count=mysql_num_rows($resultrelacoes) + 1;

while ($r = mysql_fetch_array($resultrelacoes))
{                   

                    $idp=$r["idp"];
                    $queryidp="SELECT * FROM profissoes where idp=".$idp;
                    $resultidp=mysql_query($queryidp);
                    $idacheck=$r["ida"];
                        if (in_array ($idp , $arrayidp ) )
                            {

                                    $x=array_search($idacheck, $arrayida);  
                                    $res=$x - $xpast;
                                    $a= 5-$xpast;
                                    for ($i=1;$i<=$res;$i++)
                                    {
                                        $pos=$arrayida[$xpast + $i];
                                        /*echo "<script type='text/javascript'>alert('{$pos}');</script>";*/
                                            if($i <> $res )
                                            {
                                                ?><td><input type="text" name="<?php echo $pos  ?>" id="<?php echo $pos ?>" style="width:40px"  /> </td> <?php
                                            }else
                                            {
                                                ?><td><input type="text" name="<?php echo $pos  ?>" id="<?php echo $pos  ?>" value="<?php echo $r["percentagem"]; ?>" style="width:40px"  /> </td> <?php
                                            }
                                            if ($i==$a){
                                                ?><td> </td> <?php
                                            }

                                    }
                            }else{

                                $arrayidp[]=$idp;
                                while($b = mysql_fetch_array($resultidp))
                                {
                                    if (array_search($idp,$arrayidp)<>1)
                                    {
                                        $a= 5-$xpast;
                                        $max = sizeof($arrayida);
                                        for ($i=1;$i<=$max - $xpast - 1;$i++)
                                        {   
                                            $pos=$arrayida[$xpast + $i];
                                                ?> <td><input type="text" name="<?php echo $pos  ?>" id="<?php echo $pos  ?>" style="width:40px" /> </td> <?php
                                            if($i==$a){
                                            ?> <td> </td> <?php
                                            }
                                            if($i==($max-$xpast-1)){
                                                ?> <td><input onclick="soma()" type="submit"  /></td> <?php
                                            } 
                                        }
                                    }
                                    ?></form > </tr> <form id="1" ACTION="http://www.cs.tut.fi/cgi-bin/run/~jkorpela/echo.cgi"
METHOD="POST"> <tr> <td style="font-size:9px;"> <?php echo $b['nome']; ?> </td> 
                                    <?php 
                                    $idacheck=$r["ida"] ;
                                    $x=array_search($idacheck, $arrayida);  
                                    for ($i=1;$i<=$x;$i++)
                                    {
                                        $pos=$i;
                                        if($i <> $x)
                                        {                                       
                                            if ($i==5){
                                                ?> <td><input type="text" name="<?php echo $pos  ?>" id="<?php echo $pos  ?>" style="width:40px" /> </td> <td></td><?php
                                            }else{
                                                ?> <td><input type="text" name="<?php echo $pos  ?>" id="<?php echo $pos  ?>" style="width:40px" /> </td> <?php
                                            }

                                        }else
                                        {
                                            ?><td><input type="text" name="<?php echo $pos  ?>" id="<?php echo $pos  ?>" value="<?php echo $r["percentagem"]; ?>" style="width:40px" />  </td> <?php

                                        }

                                    }

                                }
                        }

                    $xpast=$x;

}
$a= 5-$xpast;
$max = sizeof($arrayida);
for ($i=1;$i<=$max - $xpast - 1;$i++){

?> <td><input type="text" name="textfield" id="textfield" style="width:40px" /> </td> <?php
if($i==$a){
        ?> <td> </td> <?php
}
if($i==($max-$xpast-1)){
        ?> <td><input type="submit"  /></td> <?php
} 
}

//FIM DA 1ª TABELA ///////////////////////////////////////////////////////  ?>` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:16:12.523

我得到了你想要的东西的要点并且没有使用你使用的相同的东西，但是如果你根据需要/期望调整它，这会让你到达那里：

```
 //.sumcolumn - the class of the column you want the sum to be in.
 //#tableid - id of table you have all this in

$('#tableid').on('load',function(){
    for(var i=0; i<$('tableid').find('tr').length; i++){
        var sum = parseInt($('#tableid tr').eq(i).children().eq(0).children('input').val());
        sum += parseInt($('#tableid tr').eq(i).children().eq(1).children('input').val());
        sum += parseInt($('#tableid tr').eq(i).children().eq(2).children('input').val());
        sum += parseInt($('#tableid tr').eq(i).children().eq(3).children('input').val());
        sum += parseInt($('#tableid tr').eq(i).children().eq(4).children('input').val());
        $('#tableid tr').eq(i).find('.sumcolumn').text(sum);
    }
}); 
```

这是草率、臃肿、一时冲动的代码，还有更好的方法。但这确实有效。如果你有 jQuery。

# node.js - Node.js WriteStream 未知编码错误

> ID：15229856
> 
> 赞同：3
> 
> 时间：2013-03-05T17:07:32.320
> 
> 标签：node.js, encoding

我创建了一个解析 NGinx 日志的模块，现在我正在编写一个使用它的命令工具。我的问题是我允许解析整个目录，这在读取然后解析方面不是问题，因为我有一个池，可以对读取和解析进行 qeueus，但是，在命令行工具上，我允许以不同的格式重写日志，现在是 JSON，-好的，我会切入正题，我已经编写了这个 Writer 对象，它将保留所有 WriteStreams 的引用（wstreams[readFilePath]（我知道我正在使用 readFilePath，这个只是一键查找），还有通过模块暴露对象Parser.rstreams[readFilePath]对所有读取流的全局引用

```
// creating a writer to handle the data buffering from the parser's readstreams
writer = {
wstreams: {},
append: function(data, wfile, rfile){
    console.log(JSON.stringify(this.wstreams[rfile]));
    if(this.wstreams[rfile] 
        && (this.wstreams[rfile].write(data, wfile) == false) // <-- crashing here 
        && parser.rstreams[rfile]
        && parser.rstreams[rfile].pause){
            console.log('Pausing: ' + rfile);
            parser.rstreams[rfile].pause();
    }
},
addStream: function(wfile, rfile){
    var wstream = fs.createWriteStream(wfile, {'flags': 'w', 'encoding':'utf8', 'mode': '0666'});
    console.log("stream added: " + wfile + " r: " + rfile);
    this.wstreams[rfile] = wstream;
    this.wstreams[rfile].on('drain', function(){
        if(parser.rstreams[rfile]
            && parser.rstreams[rfile].readable 
            && parser.rstreams[rfile].resume){
                console.log('Drained: ' + rfile);
                parser.rstreams[rfile].resume();
        }
    });
  }
} 
```

当一个 writeStream 试图写入数据时，它会抛出一个 Unknown Encoding 异常，这没有任何意义，因为它默认为 utf8，即使我传递了可选编码，它也会做同样的事情，我尝试了 ut8, utf-8 , 和 ascii

```
{"path":"/Users/akhoury/code/rk/ginx/bin/here.json","fd":8,"writable":true,"flags":"w","encoding":"utf8","mode":"0666","bytesWritten":0,"busy":false,"_queue":[],"_events":{}}
[GINX][ERROR][uncaughtException] Error: Unknown encoding
[GINX-DEBUG] Exiting - 0 {file:cursor} record(s) stored in /Users/akhoury/code/rk/ginx/tmp/stored.cursors

/Users/akhoury/code/rk/ginx/lib/ginx.js:453
throw err;
      ^
Error: Unknown encoding
at Buffer.write (buffer.js:382:13)
at new Buffer (buffer.js:261:26)
at WriteStream.write (fs.js:1548:12)
at Object.writer.append (/Users/akhoury/code/rk/ginx/bin/ginx.js:95:38)
at /Users/akhoury/code/rk/ginx/bin/ginx.js:152:16
at Ginx.eval [as hardParseLine] (eval at generateParseLine (/Users/akhoury/code/rk/ginx/lib/ginx.js:59:21))
at streamData (/Users/akhoury/code/rk/ginx/lib/ginx.js:179:13)
at Ginx.parseFile.fs.stat.stream.on.streamEnd.cursor (/Users/akhoury/code/rk/ginx/lib/ginx.js:346:28)
at EventEmitter.emit (events.js:93:17)
at ReadStream._emitData (fs.js:1365:10) 
```

我什至 JSON.stringify 流以查看其中的内容，它看起来不错。

我查看了 buffer.js 的来源，它没有意义，当编码不是允许的列表 [https://github.com/joyent/node/blob/master/lib/buffer 时，应该会发生该错误。 js](https://github.com/joyent/node/blob/master/lib/buffer.js) :50 年代

然后我有一个循环，它将读取目录，如果目录，然后 write.addStream(outputfile, inputfile)

```
if (stats.isDirectory()) {
fs.mkdir(output, function () {
    fs.readdir(input, function (err, files) {
        if (err) error(err);
        files.forEach(function (wfile) {
            wfile = path.join(output, file);
            rfile = path.join(input, file);
            console.log("W:"+ wfile + " R: " + rfile);
            //prepend the JSON openings for each new file before we go on.
            if (isNewFile(rfile)) {
                fs.writeFileSync(wfile, "{[", 'utf8');
            }
            writer.addStream(wfile, rfile); // <-- adding the stream to writer here
        });
        processDirectory(input, output);
    });
});
} else if (stats.isFile()) {
if (isNewFile(input)) {
    fs.writeFile(output, "{[", 'utf8', function () {
        writer.addStream(output, input);
        processFile(input, output);
    });
} else {
    writer.addStream(output, input);
    processFile(input, output);
  }
} 
```

然后在 processFile 和 processDirectory 中，每次我收到一个 rowCallback，这意味着已经解析了一行，我使用 writer.append

```
// process file parsing to JSON output
function processFile(input, ouput) {
parser.parseFile(input,

function (err, row) {
    if (err) error(err);
    writer.append(ifLastRow(row), output, row.__file);
},

function (err, rfile) {
    if (err) error(err);
    //close the JSON array
    writer.append("]}", output, file);
}); 
```

}

```
// process directory parsing to JSON outputs
function processDirectory(input, output) {
parser.parseDir(input,

function (err, row) {
    if (err) error(err);
    var fname = row.__fname;
    writer.append(ifLastRow(row), path.join(output, fname), row.__file);
},

function (err, rfile) {
    if (err) error(err);
    var wfile = path.join(output, rfile.substring(rfile.lastIndexOf(path.sep) + 1));
    //close the JSON array
    writer.append("]}", wfile, rfile);
},

function (err, filesCount) {
    if (err) error(err);
 });
} 
```

谁能看到我在这里做错了什么？我是否以错误的方式创建流？

我知道要阅读的内容很多，但我不想太笼统。谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T18:15:13.610

问题是您将文件名作为第二个参数传递给[stream.write()](http://nodejs.org/api/stream.html#stream_stream_write_string_encoding)，但第二个参数`.write()`是可选编码（参见上一个链接）。

该错误是因为它试图使用文件名作为编码，即`Unknown encoding`. 如果`data`是缓冲区，则让它根据缓冲区确定编码。

写入流与文件相关联，因此您无需在每次写入时传递文件名。尝试改变：

```
 && (this.wstreams[rfile].write(data, wfile) == false) 
```

到：

```
 && (this.wstreams[rfile].write(data) == false) 
```

# environment-variables - OS X Mountain Lion：如何使用引用值设置系统级环境变量？

> ID：15229858
> 
> 赞同：0
> 
> 时间：2013-03-05T17:07:37.613
> 
> 标签：environment-variables, osx-mountain-lion

根据这里的帖子，例如[在 OS X 中设置环境变量？](https://stackoverflow.com/questions/135688/setting-environment-variables-in-os-x)*，对于 Mountain Lion，如果不是早期版本的 OS X，在系统*级别设置环境变量的唯一方法是使用（或创建）一个包含以下命令的文件 /etc/launchd.conf：

```
setenv CATALINA_BASE /opt/local/share/java/tomcat6 
```

（这似乎确实按预期工作。）

如果是这样，如何通过引用其他东西的值来做到这一点，例如，设置 JAVA_HOME？在 /etc/launchd.conf 我试过

```
setenv JAVA_HOME $(/usr/libexec/java_home) 
```

但是如果我运行，则在终端中

```
echo $JAVA_HOME 
```

我只是按字面意思返回 $(/usr/libexec/java_home)。

相比之下，如果我将相同的 setenv JAVA_HOME $(/usr/libexec/java_home) 命令放入我的 ~/.profile 中，那么 echo $JAVA_HOME 的结果就是引用的实际值，即 /Library/Java/JavaVirtualMachines/jdk1 .7.0_15.jdk/内容/主页。

那么我应该如何修改 /etc/launchd.conf 中的 setenv 命令以使其给出第二个参数的*值*而不是字面的第二个参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T06:53:52.190

If you need to append to the existing path, you can, from the terminal, do something like "echo setenv PATH $PATH:/path_addition >> /etc/launchd.conf" The launchd.conf can't, itself, contain the variable, but if you know the values you want to use before hand, you can use that to inject them. Alternately, create a separate script that does something similar for you.

# linq - 什么是 lambda 表达式，用于将一组 ID 内部连接到一个逗号分隔的 ID 列表中？

> ID：15229861
> 
> 赞同：0
> 
> 时间：2013-03-05T17:07:43.503
> 
> 标签：linq, lambda

我将 ID 列表作为逗号分隔字符串 (StateIDs) 传递给方法。在该方法中，我想通过将 StateID 的拆分内部连接到 County.StateID 来按 StateID 过滤 CountyID。

我似乎无法使语法正确，并希望能得到一些帮助来解决这个问题。

```
public IQueryable<County> GetCounty(string StateIDs = null)
{
    var county = _repo.GetCounties();
    if (!string.IsNullOrEmpty(StateIDs))
    {
        county = county.Join(StateIDs.Split(',').ToList(), x => x.StateID, y => Convert.ToInt32(y), (x, y) => x).ToList();
    }
    return county;
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T17:57:21.753

你需要

```
public IQueryable<County> GetCounty(string StateIDs = null)
{
    var county = _repo.GetCounties();

    if (!string.IsNullOrEmpty(StateIDs))
    {
        // the ids as a list of integer
        var ids = StateIds.Split(',').Select(s => int.Parse(s));

        // use .Contains
        county = county.Where(c => ids.Contains(c.StateID));
    }

    return county;
} 
```

# jsf - 将 JSTL 与 JSF 一起使用

> ID：15229867
> 
> 赞同：-1
> 
> 时间：2013-03-05T17:07:45.590
> 
> 标签：jsf, primefaces, jstl

我知道这不是关于此的第一个问题，但我未能找到可以解决我的问题的答案。

在我的项目中，我使用 PrimeFaces 3.5 并在 IBM WebSphere AS 7 上运行它。

我创建了一个非常简单的页面来演示这个问题，并希望 SO 社区能帮助我弄清楚:)

所以，这是页面：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:p="http://primefaces.org/ui">

    <h:head></h:head>
    <h:body>
        <p:panel>
            <c:if test="#{true}">
                <h:outputText value="WORKS!!!" />
            </c:if> 
        </p:panel>
    </h:body>
</html> 
```

此页面生成以下 HTML：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <link type="text/css" rel="stylesheet" href="/APP/javax.faces.resource/theme.css.xhtml?ln=primefaces-bluesky" />
        <link type="text/css" rel="stylesheet" href="/APP/javax.faces.resource/primefaces.css.xhtml?ln=primefaces" />
        <script type="text/javascript" src="/APP/javax.faces.resource/jquery/jquery.js.xhtml?ln=primefaces"></script>
        <script type="text/javascript" src="/APP/javax.faces.resource/primefaces.js.xhtml?ln=primefaces"></script>
    </head>
    <body>
        <div id="j_idt6" class="ui-panel ui-widget ui-widget-content ui-corner-all">
            <div id="j_idt6_content" class="ui-panel-content ui-widget-content">
                WORKS!!!
            </div>
        </div>
        <script id="j_idt6_s" type="text/javascript">PrimeFaces.cw('Panel','widget_j_idt6',{id:'j_idt6'});</script>
    </body>
</html> 
```

我有一个稍微修改的页面：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:p="http://primefaces.org/ui">

    <h:head></h:head>
    <h:body>
        <p:panel>
            <c:if test="#{bean != null}">
                <h:outputText value="WORKS!!!" />
            </c:if> 
        </p:panel>
    </h:body>
</html> 
```

生成以下 HTML：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <link type="text/css" rel="stylesheet" href="/APP/javax.faces.resource/theme.css.xhtml?ln=primefaces-bluesky" />
    </head>
    <body>
        <div id="j_idt6" class="ui-panel ui-widget ui-widget-content ui-corner-all">
            <div id="j_idt6_content" class="ui-panel-content ui-widget-content">
                WORKS!!!
            </div>
        </div>
        <script id="j_idt6_s" type="text/javascript">PrimeFaces.cw('Panel','widget_j_idt6',{id:'j_idt6'});</script>   
    </body>
</html> 
```

这两个页面应该已经呈现**相同**，但它们是不同的。不同的是，后一页缺少相关库`primefaces.css`，`jQuery`但**需要**加载。因此，更复杂的页面会失败。但这只发生在我第一次访问页面时。如果我单击浏览器刷新按钮，一切都会以正确的方式生成。

我真的不明白为什么会这样。据我了解`JSTL`，之前正在处理标签`JSF`。我们可以把它想象成一个普通的`JSP`页面，但是没有`HTML`布局，后来馈送到`JSF`处理程序。所以这不应该影响要加载哪些资源。

我知道我可以强制使用输出链接`<h:outputStylesheet>`，`<h:outputScript>`但我希望它能够开箱即用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T04:00:20.320

只需删除 JSTL。并尝试使用 JSF 来实现。对于这种类型的检查，您可以使用 preRenderView。

问题是 JSTL 组件和 JSF 组件的渲染行为不同。你可以阅读

BALUC 的博客。现在你可以使用

```
<f:event listener="#{user.isAdmin}" type="preRenderView" />

public void isAdmin(ComponentSystemEvent event){

    FacesContext fc = FacesContext.getCurrentInstance();

    if (!"admin".equals(fc.getExternalContext().getSessionMap().get("role"))){

        ConfigurableNavigationHandler nav 
           = (ConfigurableNavigationHandler) 
            fc.getApplication().getNavigationHandler();

        nav.performNavigation("access-denied");
    }       
  } 
```

有关更多信息，您可以查看以下链接。

[http://www.mkyong.com/jsf2/jsf-2-prerenderviewevent-example/](http://www.mkyong.com/jsf2/jsf-2-prerenderviewevent-example/)

# perl - 如何从函数返回值中使用 Perl 键（）？

> ID：15229870
> 
> 赞同：3
> 
> 时间：2013-03-05T17:07:47.637
> 
> 标签：perl, hash

我知道 Perl`keys()`函数，并想在我拥有的哈希上使用它，但看不出有任何理由为其设置变量。让我在代码中解释两种方式：

普通的：

```
my %hash = ReturnsHash();
foreach (keys(%hash)) {
    ...code...
} 
```

我想要的方式：

```
foreach (keys(ReturnsHash())) {
    ...code...
} 
```

用第二种方法我得到这个错误信息（`Type of arg 1 to keys must be hash or array (not subroutine entry)`）第二种方法可能吗？如果有怎么办？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-05T17:22:19.893

与其名称相反，它`ReturnsHash`不返回哈希值。sub 不可能返回散列。Subs 只能返回标量列表。如果你这样做

```
sub ReturnsHash {
   my %hash = ( a => 1, b => 2 );
   return %hash;
} 
```

你正在做的

```
return 'a', 1, 'b', 2; 
```

既然你做不到

```
keys('a', 1, 'b', 2) 
```

你不能做

```
keys(ReturnsHash()) 
```

现在，您可以做的是返回对哈希的引用

```
sub ReturnsHashRef {
   my %hash = ( a => 1, b => 2 );
   return \%hash;
} 
```

又名

```
sub ReturnsHashRef {
   return { a => 1, b => 2 };
} 
```

在这种情况下你可以做

```
keys(%{ ReturnsHashRef() }) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T17:19:39.780

没有“返回哈希”的函数之类的东西。如果你有

```
sub foo {
    ...
    return %hash;
}

my %h = foo(); 
```

然后 foo 不会“返回哈希”；它返回中的键和值的*列表*`%hash`。该列表用于创建新的 hash `%h`。正如 Joel 所说，如果您返回对哈希的*引用*`keys %$href`，那么这是有道理的，但是如果不`keys`先将列表分配给哈希，您就无法在列表上运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T17:12:05.370

我想你已经明白了。从您的函数中，只需返回一个哈希引用，然后在您的`foreach`块中，密钥将存储在`$_`变量中。这是一个例子：

```
sub ReturnsHash {

    return { key1 => 'value1', key2 => 'value2' };
}

foreach (keys(%{ReturnsHash()})) {
    print 'key:=' . $_ . "\n";
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T17:25:45.070

既然可以退货，为什么要整件大件`hash`退货`hash reference`！

我总是会去退货`hash reference`。

```
sub return_hash() {
   ## Code 
   return \%hash;
} 
```

并将其接收为

```
foreach (keys(%{ return_hash() })) {
 ## code
} 
```

还有一件事，编写所有以 a 开头的函数名称`small case letter`和通过 . 分隔的单词总是被视为良好的编码约定`_`。

# java - 使用 XSLT 从指定文件中选择值

> ID：15229872
> 
> 赞同：1
> 
> 时间：2013-03-05T17:08:01.363
> 
> 标签：java, xml, xslt

我正在为一个 XML 文件开发 XSLT，该文件具有一组特定“ID”的值。我需要通过我的转换器运行它，它将这些值输出到数据库，但我必须识别这些值是 ID。我需要识别这些值的是另一个文件中的描述。这个描述应该成为输出 XML 的元素名称，而不是我现在使用的 ID。相同的计数器 ID 位于单独的文件中，并包含我需要用作元素名称的描述。这是一个例子，以防我让你感到困惑。

```
<!-- XML with values -->
<?xml version="1.0" encoding="ISO-8859-1"?>
<root>
    <series>
        <sampleInfo>
            <timestamp>1/1/2013 12:00 AM</timestamp>
            <timestamp>1/2/2013 12:00 AM</timestamp>
            <timestamp>1/3/2013 12:00 AM</timestamp>
            <timestamp>1/4/2013 12:00 AM</timestamp>
        </sampleInfo>
        <value>
            <series>
                <value>
                    <int>0</int>
                    <int>9</int>
                    <int>0</int>
                    <int>9</int>
                </value>
                <id>
                    <counterID>100</counterID>
                    .
                    .
                </id>
            </series>
            <series>
                <value>
                    <int>3</int>
                    <int>6</int>
                    <int>3</int>
                    <int>6</int>
                </value>
                <id>
                    <counterID>120</counterID>
                    .
                    .
                    .
                </id>
            </series>
        </value>
    </series>
</root> 
```

基本上，每个时间戳对于每个对应的 counterID 都有自己的值。现在这里是另一个 XML 文件的示例，我从中获取信息。

```
<!-- XML with descriptions -->
<?xml version="1.0" encoding="ISO-8859-1"?>
<root>
    <counterInfo>
        <id>100</id>
        <description>Blah</description>
    </counterInfo>
    <counterInfo>
        <id>120</id>
        <description>Derp</description>
    </counterInfo>
</root> 
```

因此，一旦我转换了原始文档（带有值的文档），我的输出（平面）XML 看起来有点像：

```
<root>
    <element>
        <timestamp>1/1/2013 12:00 AM</timestamp>
        <C100>0</C100> <!-- Since XML doesn't allow numeric element fields, I add a C -->
        <C120>3</C120>
    </element>
    <element>
        <timestamp>1/2/2013 12:00 AM</timestamp>
        <C100>9</C100>
        <C120>6</C120>
    </element>
    <element>
        <timestamp>1/3/2013 12:00 AM</timestamp>
        <C100>0</C100>
        <C120>3</C120>
    </element>
    <element>
        <timestamp>1/4/2013 12:00 AM</timestamp>
        <C100>9</C100>
        <C120>6</C120>
    </element>
</root> 
```

然后我需要做的是转换已经很平坦的 XML，就像上面一样，以显示它。

```
<root>
    <element>
        <timestamp>1/1/2013 12:00 AM</timestamp>
        <Blah>0</Blah>
        <Derp>3</Derp>
    </element>
    <element>
        <timestamp>1/2/2013 12:00 AM</timestamp>
        <Blah>9</Blah>
        <Derp>6</Derp>
    </element>
    <element>
        <timestamp>1/3/2013 12:00 AM</timestamp>
        <Blah>0</Blah>
        <Derp>3</Derp>
    </element>
    <element>
        <timestamp>1/4/2013 12:00 AM</timestamp>
        <Blah>9</Blah>
        <Derp>6</Derp>
    </element>
</root> 
```

我做了一些搜索，大多数结果都建议参数，但我转换这些的方式可能会让这有点困难。我有一个 Java 转换器，它是大型转换器存储库的一部分，它从该存储库中提取 XSLT 以转换传递给它的文件。在转换器中，我们从档案中提取需要转换的文件，然后分别进行处理。所以我的问题是......当转换器到达列表中的那个文件时，我如何为 XSLT 提供该文件名，以及如何将该文件名传递给 XSLT？

那我是不是把事情复杂化了？有什么简单的方法可以做到这一点吗？让我知道是否需要清理任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:29:41.490

打开文档非常简单，并且可以参数化。但是创建一个元素名称是“C”连接一些数字（例如，“C100”）是一个可怕的、可怕的、可怕的想法。为什么？因为很难（在 xsl 中）找到这些节点；此外，“C100”“C125”节点会吹掉任何创建模式的尝试。

不要创建自己的元素，而是使用属性：`<descr id="100">0</descr>`。

## 输入 XML (file.xml)

好的，所以，这是一个使用 descr 元素的 xml：

```
<root>
    <element>
        <timestamp>1/1/2013 12:00 AM</timestamp>
        <descr id="100">0</descr>
        <descr id="120">3</descr>
    </element>
    <element>
        <timestamp>1/2/2013 12:00 AM</timestamp>
        <descr id="100">9</descr>
        <descr id="120">6</descr>
    </element>
    <element>
        <timestamp>1/3/2013 12:00 AM</timestamp>
        <descr id="100">0</descr>
        <descr id="120">3</descr>
    </element>
    <element>
        <timestamp>1/4/2013 12:00 AM</timestamp>
        <descr id="100">9</descr>
        <descr id="120">6</descr>
    </element>
</root> 
```

## 描述 XML (descriptions.xml)

```
<root>
    <counterInfo>
        <id>100</id>
        <description>Blah</description>
    </counterInfo>
    <counterInfo>
        <id>120</id>
        <description>Derp</description>
    </counterInfo>
</root> 
```

## XSL

最后，合并它们的样式表：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes"/>

    <xsl:param name="descrDoc" select="'descriptions.xml'" />

    <xsl:template match="@* | node()">
        <xsl:copy>
            <xsl:apply-templates select="@* | node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="descr">
      <xsl:variable name="nodeName">
        <xsl:value-of select="document($descrDoc)/*/counterInfo[ id = current()/@id ]/description" />
      </xsl:variable>
      <xsl:if test="string-length($nodeName)=0">
        <xsl:message terminate="yes">No description! Failed.</xsl:message>
      </xsl:if>
      <xsl:element name="{$nodeName}">
        <xsl:apply-templates />
      </xsl:element>
    </xsl:template>

</xsl:stylesheet> 
```

# php - MySqli 用于 LIKE 时准备语句错误

> ID：15229880
> 
> 赞同：-1
> 
> 时间：2013-03-05T17:08:21.640
> 
> 标签：php, mysqli, prepared-statement

我正在尝试使用 php 的 mysqli 扩展为 LIKE 查询做一个准备好的语句。但无论我尝试什么，我总是会得到这个错误：

```
Fatal error: Problem preparing query (SELECT f.*,r.slug FROM `foods` AS f INNER JOIN `resturants` AS r ON f.`rest_id` = r.`rest_id` WHERE f.`name` LIKE CONCAT('%',"f", '%')) You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''%',"f", '%')' at line 4 in /path/to/class.mysqli.php on line 462 
```

我尝试了以下查询无济于事：（
这`$s`将是我要搜索的字符串。）

```
SELECT f.*,r.slug FROM `foods` AS f
INNER JOIN `resturants` AS r
ON f.`rest_id` = r.`rest_id`
WHERE f.`name` LIKE '%?%'

SELECT f.*,r.slug FROM `foods` AS f
INNER JOIN `resturants` AS r
ON f.`rest_id` = r.`rest_id`
WHERE f.`name` LIKE CONCAT('%', ?, '%')

SELECT f.*,r.slug FROM `foods` AS f
INNER JOIN `resturants` AS r
ON f.`rest_id` = r.`rest_id`
WHERE f.`name` LIKE CONCAT('%', {$s}, '%')

SELECT f.*,r.slug FROM `foods` AS f
INNER JOIN `resturants` AS r
ON f.`rest_id` = r.`rest_id`
WHERE f.`name` LIKE '%{$s}%' 
```

甚至：

```
sprintf("SELECT f.*,r.slug FROM `foods` AS f
INNER JOIN `resturants` AS r
ON f.`rest_id` = r.`rest_id`
WHERE f.`name` LIKE '%%%s%%'", $s) 
```

请帮助我，我越来越沮丧。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T17:32:12.840

我会将 LIKE 之后的表达式移动到变量：

```
$param = '%somestring%';

$sql = "SELECT f.*,r.slug FROM `foods` AS f
INNER JOIN `resturants` AS r
ON f.`rest_id` = r.`rest_id`
WHERE f.`name` LIKE ?" 
```

**更新：**

也许这会有所帮助

```
-- test.sql
CREATE TABLE supportContacts (
     id int auto_increment primary key, 
     type varchar(20), 
     details varchar(30)
);

INSERT INTO supportContacts
(type, details)
VALUES
('Email', 'admin@sqlfiddle.com'),
('Twitter', '@sqlfiddle');

<?php
// test.php
$mysqli = new mysqli("localhost", "root", "root", "test");
$sql = 'SELECT type FROM supportContacts WHERE type LIKE ?'; // here is only ?, no %

$stmt = $mysqli->prepare($sql);
$type = 'E%'; // and here you can put % sign
$stmt->bind_param('s', $type);
$stmt->execute();
$stmt->bind_result($result);
$stmt->fetch();
var_dump($result); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T17:09:36.637

你`%`的 's 也需要用引号括起来。

# 2d - 用于高速车削的 2D 汽车物理

> ID：15229881
> 
> 赞同：1
> 
> 时间：2013-03-05T17:08:22.120
> 
> 标签：2d, physics

我一直在查看以下页面，这非常有帮助：[http](http://www.asawicki.info/Mirror/Car%20Physics%20for%20Games/Car%20Physics%20for%20Games.html) ://www.asawicki.info/Mirror/Car%20Physics%20for%20Games/Car%20Physics%20for%20Games.html但遇到了问题带有高速翻转部分（页面下方约三分之二）

他给出了以下函数来计算滑移角：

![在此处输入图像描述](../Images/3318ba33cce832af5435066cb175057b.png)

但它看起来好像`Vlat`并且`Vlong`都是向量，我看不出将向量放入`arctan`函数或`sgn`函数（我假设它是一个根据符号的值返回 -1 或 1 的函数）是如何工作的。

在此下方，他谈到了`F n,lat`他将其描述为“给定滑移角的归一化侧向力”，但我不确定如何计算该值。

我也不确定下面的任何数学，但这可能是因为我还没有计算出上面的部分，所以如果你想解释下面的内容，我将不胜感激，但没有必要。

如果这很重要，我正在使用 C# 和 XNA 编写代码。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:15:07.420

从页面

> 车轮的速度矢量相对于车轮可以滚动的方向具有角度 alpha。我们可以将速度向量 v 分成两个分量向量。纵向矢量的大小为 cos(alpha) * v。沿此方向的运动对应于车轮的滚动运动。横向矢量的大小为 sin(alpha) * v，并在相反方向产生阻力：转向力。

`Vlong`车轮朝向的方向上的速度也是如此`Vlat`，垂直于车轮朝向的方向的速度也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T17:10:08.170

希望这仍然是相关的。

速度。您拥有的速度似乎不是矢量，因为

a）它们实际上是向量的组成部分，请参阅维基百科页面以获取更多参考：[http](http://en.wikipedia.org/wiki/Slip_angle) ://en.wikipedia.org/wiki/Slip_angle 。

b）你有你的 v_lat 和一个标量的加法/减法表达式，所以 v_lat 无论如何都不能是向量。

所以不用担心它们，它们是老朋友标量，你可以像往常一样使用它们。

力量。从您引用的网页中：

> 纵向力与负载具有（同样好）线性相关性，我们在前面讨论重量转移时看到了这一点。因此，我们可以通过将力除以负载来创建一条归一化曲线，而不是为每个特定的负载值绘制曲线。

因此，标准化是通过将 F_long （从你的帖子中我假设你能够计算出这个）除以负载（你应该在某个条件下有这个）来执行的。

无论如何，这是我对问题的看法。希望它有用。

# asp.net - 无法通过 webmethod 调用的函数获取对 ListView 的引用

> ID：15229883
> 
> 赞同：0
> 
> 时间：2013-03-05T17:08:25.210
> 
> 标签：asp.net, listview, asp.net-ajax, webmethod

我正在尝试引用我的 ListView 控件来为其分配数据源。但奇怪的是，当我调试“Me.lvResults”时它是“无”是什么原因造成的？我倾向于调用作为默认类的一部分的 BindDataSearch() 函数的方法。我真的需要代码像这样工作，因为我 ajax 调用 Search()，但如果有人可以推荐更好的方法，我愿意接受建议。非常感谢您的宝贵时间，

```
Imports System.Web.Services

Public Class _Default
   Inherits System.Web.UI.Page

   Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

   End Sub

   <WebMethod()>
   Public Shared Sub Search(ByVal StartDate As String, ByVal EndDate As String, ByVal ClassName As String)
    Try
        'Get Search Results
        Dim _DataHelper As New DataHelper
        Dim dt As New DataTable

        dt = _DataHelper.ClassSearch(StartDate, EndDate, ClassName)

        'Bind Search Results to DateGrid
        Dim _ClassSearch As New _Default
        _ClassSearch.BindDataSearch(dt)
     Catch ex As Exception
        Dim strError As String = ex.ToString()
     End Try
    End Sub

    Public Sub BindDataSearch(ByVal dt As DataTable)
     Me.lvResults.DataSource = dt
    End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:17:08.090

当然。这是一个*共享*方法，这意味着调用该方法时没有页面实例。

您可能希望查看使用 JSON 将数据传回页面的方法，然后使用 JQuery 在客户端创建对象。但是没有办法使用 WebMethod 进行数据绑定。

# python - GAE mapreduce：为作业定义参数

> ID：15229888
> 
> 赞同：1
> 
> 时间：2013-03-05T17:08:43.530
> 
> 标签：python, google-app-engine, mapreduce, blobstore

我正在摆弄 GAE mapreduce 并且有一个问题：

是否可以仅针对 mapreduce 中的某个作业更改变量？

我问的原因是：

我的 mapreduce 作业的输入 csv 和输出 csv 应该具有相同的标题行 - 但是，标题行位于输出 csv 中的某个位置，但从不在顶部。为了获得正确的标题行，我在reduce 函数中插入了一个计数器，用于检查reduce 作业的当前迭代，如果它为0，它将把硬编码的标题行传递给管道。当输出 csv 存储在 blobstore 中时，计数器会重置。

问题：计数器通常会随机重置，可能是因为我必须在函数外部将其定义为全局变量“reduce_counter = 0”。

有没有任何方法可以将变量/参数链接到作业，或者有没有更好的方法来获取 header_row？

我不认为我可以使用 DictReader 或 csv 模块，因为输出存储在 blobstore 中，据我所知，blobstore 对象无法更改。

[您可以在main.py](http://www.github.com/jvdheyden/ste)文档的 www.github.com/jvdheyden/ste上找到我的代码。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-13T11:32:37.303

您应该在 mapreduce 作业完成后添加标题。您可以通过在任务完成后访问输出 CSV 来做到这一点：

```
orig_file = gcs.open(filename_from_mapreduce)
new_file = gcs.open(filename_from_mapreduce + "_with_headers", "r")

new_file.write("your,csv,headers,here")
while True:
   read = orig_file.read()
   if read == '':
      break
   output.write(read)

output.close()
gcs.delete(orig_file) 
```

出现您的问题是因为 GAE 在多个分片中处理 mapreduce 任务。美妙之处在于，这些小任务中的每一个都是并行执行的，这为我们在处理大量数据时提供了巨大的时间优势。

这也解释了为什么您的 CSV 标头出现在随机位置，而每个分片只是在完成工作时写入它的输出。因此，您无法可靠地预测写入输出第一行的那个。

# c - 字符返回错误

> ID：15229891
> 
> 赞同：-2
> 
> 时间：2013-03-05T17:08:56.820
> 
> 标签：c

```
#include<stdio.h>
#include<string.h>
#define MAX 30

void push(char );

char stack[MAX];
int tos=0;

int main(){
    char str[]="Arijit Saha";
   // char *final;
   //   final=(char *)rev(str);
   //   printf("%s",final);
    rev(str);
    getch();
    return 1;
}

int rev(char s[]){
    int i;
    for(i=0;i<strlen(s);i++)
    push(s[i]);
    char reverse[strlen(s)];
    int j;
    for(j=0;j<strlen(s);j++)
    reverse[j]=pop();
    printf("%s",reverse);
    return 1;

}

void push(char c){
     stack[tos]=c;
     tos++;
     }
char pop(){
    tos--;
    return stack[tos+1];

} 
```

错误：C:\TC\BIN\stringrevusingstack.c:38: 错误: 'pop' C:\TC\BIN\stringrevusingstack.c:28: 错误: 'pop' 的先前隐式声明在这里

在这里，我返回 char 并将返回的 char 保存在 char 变量（ reverse[i] ）中。那么为什么会出现这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T17:10:00.760

为 定义一个函数原型`pop`。那行得通

您得到的错误是因为编译器对 function`pop`的定义和声明感到困惑。养成在使用原型之前声明原型的好习惯。

如果您再次看到这种类型的错误，请确保是它！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T17:10:39.637

您收到这些错误的原因是您的函数缺少[*原型*](http://en.wikipedia.org/wiki/Function_prototype)。要么将所有函数移动到它们的第一个使用点之前（即`main`函数之前），要么为它们提供原型：

```
int rev(char s[]);
void push(char c);
char pop(); 
```

在没有原型的情况下，C 编译器决定您的`pop()`函数返回`int`，这是缺少原型的函数的默认返回类型。一旦编译器发现这`char`是 的实际返回类型`pop`，就会发出错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T17:10:45.997

`pop()`您至少在声明它之前已经使用过。至少，您必须在使用它之前声明它。

在主要添加之前：

```
char pop(); //declaration 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T17:11:56.173

在使用之前定义函数或为“pop”函数提供声明（原型），就像使用“push”所做的那样：

```
void push(char);
char pop(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T17:12:36.183

添加

```
char pop(void); 
```

在定义之后。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-05T17:14:43.417

在 C 中，您必须在使用之前声明该函数。所以，要么你需要把 pop（和 push）函数放在 rev 之前；或者你需要几行顶部：

```
void push(char);
char pop(); 
```

另外，我怀疑 pop 的返回线应该是

```
return stack[tos]; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-05T17:17:46.860

问题是因为在第一次遇到对 pop 的调用时尚未声明函数 pop()。要解决此问题，请定义函数原型或切换定义的位置：

```
#include<stdio.h>
#include<string.h>
#define MAX 30

char stack[MAX];
int tos=0;

void push(char c)
{
    stack[tos]=c;
    tos++;
}
char pop()
{
    tos--;
    return stack[tos+1]; 
}

int rev(char s[])
{
    int i;
    for(i=0;i<strlen(s);i++)
        push(s[i]);
    char reverse[strlen(s)];
    for(int j=0;j<strlen(s);j++)
        reverse[j]=pop();
    printf("%s",reverse);
    return 1;
}

int main()
{
    char str[]="Arijit Saha";
    //char *final;
    //final=(char *)rev(str);
    //printf("%s",final);
    rev(str);
    getch();
    return 1;
} 
```

# python - 结合散点图和曲面图

> ID：15229896
> 
> 赞同：14
> 
> 时间：2013-03-05T17:09:00.557
> 
> 标签：python, matplotlib, scatter, geometry-surface

如何将 3D 散点图与 3D 曲面图相结合，同时保持曲面图透明，以便我仍然可以看到所有点？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-05T18:19:46.243

要在同一张图中组合各种类型的图，您应该使用该函数

plt.hold（真）。

以下代码使用 3D 曲面图绘制 3D 散点图：

```
from mpl_toolkits.mplot3d import *
import matplotlib.pyplot as plt
import numpy as np
from random import random, seed
from matplotlib import cm

fig = plt.figure()
ax = fig.gca(projection='3d')               # to work in 3d
plt.hold(True)

x_surf=np.arange(0, 1, 0.01)                # generate a mesh
y_surf=np.arange(0, 1, 0.01)
x_surf, y_surf = np.meshgrid(x_surf, y_surf)
z_surf = np.sqrt(x_surf+y_surf)             # ex. function, which depends on x and y
ax.plot_surface(x_surf, y_surf, z_surf, cmap=cm.hot);    # plot a 3d surface plot

n = 100
seed(0)                                     # seed let us to have a reproducible set of random numbers
x=[random() for i in range(n)]              # generate n random points
y=[random() for i in range(n)]
z=[random() for i in range(n)]
ax.scatter(x, y, z);                        # plot a 3d scatter plot

ax.set_xlabel('x label')
ax.set_ylabel('y label')
ax.set_zlabel('z label')

plt.show() 
```

结果：

[![](../Images/93867007dd1327f0ffba9c9b8f007395.png)](https://i.stack.imgur.com/aNyGf.gif)

您可以在此处查看其他带有 3d 图的示例：http:
[//matplotlib.org/mpl_toolkits/mplot3d/tutorial.html](http://matplotlib.org/mpl_toolkits/mplot3d/tutorial.html)

我已将曲面图的颜色从默认更改为“热”色图，以区分两个图的颜色 -*现在，可以看出曲面图覆盖了散点图，与顺序无关*...

**编辑：**要解决这个问题，应该在曲面图的颜色图中使用透明度；将代码添加到： [透明色图](https://stackoverflow.com/questions/8580631/transparent-colormap) 和换行：

```
ax.plot_surface(x_surf, y_surf, z_surf, cmap=cm.hot);    # plot a 3d surface plot 
```

到

```
ax.plot_surface(x_surf, y_surf, z_surf, cmap=theCM); 
```

我们得到：

[![](../Images/456b859beb2dcbdd1ec3e6e876821b49.png)](https://i.stack.imgur.com/hhsZH.gif)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-11-24T20:55:29.227

使用siluaty的例子；您可以调整 alpha 值，而不是通过 cmap=theCM 命令使用透明度。这可能会得到你想要的？

```
ax.plot_surface(x_surf, y_surf, z_surf, cmap=cm.hot, alpha=0.2) 
```

# tfs - 查询工作项时直接输入用户信息

> ID：15229904
> 
> 赞同：0
> 
> 时间：2013-03-05T17:09:14.050
> 
> 标签：tfs, tfsbuild, tfs-sdk

当代码运行到第 2 行时，Windows 将显示一个弹出窗口以输入用户名、TFS 访问密码：

```
TeamProjectCollection = new TfsTeamProjectCollection(new Uri(url), new UICredentialsProvider());
TeamProjectCollection.Connect(Microsoft.TeamFoundation.Framework.Common.ConnectOptions.IncludeServices);
TeamProjectCollection.EnsureAuthenticated();
IsConnected = true; 
```

有任何方法可以自动分配用户名、密码，而无需从弹出窗口登录。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:55:26.487

如果您想直接插入用户凭据而不使用正在运行的进程，则以下内容对我有用：

```
WindowsCredential credentials = new WindowsCredential(new NetworkCredential(username, domain, password), new MyCredentials(username, domain, password));
TfsTeamProjectCollection connectedTPC = new TfsTeamProjectCollection(tfsUrl, new TfsClientCredentials(credentials)); 
```

提供两次凭据有点奇怪，但是如果没有 MyCredentials，我将不会从 TFS 得到任何答复，不知道为什么。

```
public class MyCredentials : ICredentialsProvider
{
    private NetworkCredential credentials;
    #region ICredentialsProvider Members
    public MyCredentials(string user, string domain, string password)
    {
        credentials = new NetworkCredential(user, password, domain);
    }

    public ICredentials GetCredentials(Uri uri, ICredentials failedCredentials)
    {
        return credentials;
    }

    public void NotifyCredentialsAuthenticated(Uri uri)
    {
        // who cares
    }

    #endregion
} 
```

# java - 将父成员添加到 JSON 数据

> ID：15229905
> 
> 赞同：1
> 
> 时间：2013-03-05T17:09:13.953
> 
> 标签：java, json, web-services

我有一个 REST Web 服务，它从自定义类型的 ArrayList 生成 JSON 格式的输出。

```
@GET()
@Produces("application/json")
@Path("/ratings")
public List<Rating> getRatings( ) {
Rating rating;
List<Rating> ratings = new ArrayList<Rating>();
rating= new Rating();
//here I set rating object
rating.setNote(...);
// etc....
ratings.add(rating);

//the method returns ratings arraylist
return ratings; 
```

我想向所有 JSON 数据添加一个父成员，如下所示：

```
{"ratings":[{"a":"1","b":"test"}]} 
```

不喜欢：

```
[{"a":"1","b":"test"}] 
```

我可以这样做吗？感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T17:32:08.677

您要求的 JSON 是一个包含单个字段 ( `ratings`) 的对象，该字段是一个数组或您的`Rating`对象。如果您启用了 POJO JSON 支持，这似乎是您所做的，如果这是您想要的，这就是您必须返回的。

```
@XmlRootElement
class Response {
    public final List<Rating> ratings;

    public Resonse(List<Rating> ratings) {
        this.ratings = ratings;
    }
} 
```

更改您的方法签名以返回`Response`then 的实例：

```
return new Reponse(ratings); 
```

有一个相当广泛的指南在[这里找到](http://jersey.java.net/nonav/documentation/latest/json.html)

选项 B 只是自己进行 JSON 序列化并返回一个`String`（JSON）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T17:24:31.247

如果您想继续使用 Jersey 的直接对象映射功能，那么可以 - 创建一个包含“评级”列表的对象是最好的方法。

否则，您可以创建自定义序列化程序。有关更多详细信息，请参阅[此示例](http://blog.palominolabs.com/2012/06/05/writing-a-custom-jackson-serializer-and-deserializer/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T17:33:34.707

尝试一下

```
@Provider
@Produces({MediaType.APPLICATION_JSON})
public class XJsonBodyWriter implements MessageBodyWriter<Object> {
    // implement methods
    public void writeTo(Object obj, Class<?> clazz, Type type,
        Annotation[] annotations, MediaType mediaType,
        MultivaluedMap<String, Object> map, OutputStream out)
        throws IOException, WebApplicationException {
        // serialize it how you want
    }
} 
```

# asp.net-mvc-3 - 是否可以在托管在免费网站模型上的 Azure 网站上加密 Web.Config 连接字符串

> ID：15229909
> 
> 赞同：2
> 
> 时间：2013-03-05T17:09:31.600
> 
> 标签：asp.net-mvc-3, azure

有很多文章展示了如何加密 Web.Config 连接字符串，但它们都需要管理员上传证书。

我看不到任何将证书上传到以“免费”模式托管的网站的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T01:33:15.657

默认情况下，SQL DB 连接字符串在存储到 DB 之前已加密，因此如果您的目标已经完成。如果您正在寻找加密应用程序设置（您可以直接在 Portal 上创建），这些设置仍未加密，但它们是 Azure 网站团队下一个版本的一部分，因此可能很快会在下一次更新中可用。

# php - for，以四个零递增

> ID：15229918
> 
> 赞同：0
> 
> 时间：2013-03-05T17:09:57.777
> 
> 标签：php, loops, for-loop

```
$second= 3113;
for ($i = 0000; $i < 7000; $i += 100) { 
     $a=$second.$i;// 31130
     ...
} 
```

这将输出：

```
31130
3113100
3113200 
```

我需要的：

```
31130000 
31130100 
31130200 
```

你如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T17:11:22.720

数字将始终显示为修剪零。您可以强制使用一定数量的零，[`sprintf`](http://php.net/sprintf)如下所示：

```
$a = $second.sprintf("%04s",$i); // 31130000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T17:12:53.530

请改用以下代码：

```
$second= 3113;
for ($i = 0000; $i < 7000; $i += 100) { 
     $a=$second.($i>0?($i>=1000?$i:"0".$i):"0000");// 3113000
     ...
} 
```

这将检查是否`$i`大于 0。如果不是，它将输出“0000”。

如果`$i`小于 1000，它将在开头添加一个 0。

# emacs - Emacs 自动缩进太深

> ID：15229920
> 
> 赞同：0
> 
> 时间：2013-03-05T17:10:01.190
> 
> 标签：emacs, auto-indent

我有一个用于自动缩进文件的保存前挂钩。Emacs 正在插入大量额外的缩进，我该如何解决这个问题？对于具有大量空白的文件类型（Python、Mardown、Stylus），这个问题尤其令人反感。

[https://github.com/mcandre/dotfiles/blob/master/emacs](https://github.com/mcandre/dotfiles/blob/master/emacs)

**更新**：具体来说，`(indent-region (point-min) (point-max))`是不正确地缩进我的代码，通过手动应用验证`M-: (indent-region (point-min) (point-max))`。

# crm - 在opentaps/ofbiz中修改不相关代码后导致不相关数据加载错误的原因是什么？

> ID：15229921
> 
> 赞同：0
> 
> 时间：2013-03-05T17:10:02.067
> 
> 标签：crm, ofbiz

在“运行安装”命令后出现以下构建错误：

```
 [java] 2013-03-05 17:04:19,323 (main) [EntityDataLoadContainer.java:406:INFO ] 00008 of 18145 from file:/Users/lanre/Projects/crm_remote_local/opentaps/amazon/data/AmazonDemoSetup.xml
     [java] 2013-03-05 17:04:19,323 (main) [EntityDataLoadContainer.java:406:INFO ] 00013 of 18158 from file:/Users/lanre/Projects/crm_remote_local/opentaps/amazon/data/AmazonDemoData.xml
     [java] 2013-03-05 17:04:19,323 (main) [EntityDataLoadContainer.java:411:INFO ] The following errors occured in the data load:
     [java] 2013-03-05 17:04:19,323 (main) [EntityDataLoadContainer.java:413:INFO ] [install.loadData]: Error loading XML Resource "file:/Users/lanre/Projects/crm_remote_local/opentaps/opentaps-common/data/TaxAuthorities_US.xml"; Error was: A transaction error occurred reading data
     [java] 2013-03-05 17:04:19,324 (main) [EntityDataLoadContainer.java:413:INFO ] [install.loadData]: Error loading XML Resource "file:/Users/lanre/Projects/crm_remote_local/applications/content/data/DemoBlogUsersData.xml"; Error was: A transaction error occurred reading data
     [java] 2013-03-05 17:04:19,324 (main) [EntityDataLoadContainer.java:413:INFO ] [install.loadData]: Error loading XML Resource "file:/Users/lanre/Projects/crm_remote_local/applications/accounting/data/DemoOrganizationData.xml"; Error was: A transaction error occurred reading data
     [java] 2013-03-05 17:04:19,324 (main) [EntityDataLoadContainer.java:413:INFO ] [install.loadData]: Error loading XML Resource "file:/Users/lanre/Projects/crm_remote_local/applications/accounting/data/DemoTaxAuthority.xml"; Error was: A transaction error occurred reading data
     [java] 2013-03-05 17:04:19,324 (main) [EntityDataLoadContainer.java:413:INFO ] [install.loadData]: Error loading XML Resource "file:/Users/lanre/Projects/crm_remote_local/applications/order/data/OrderDemoData.xml"; Error was: A transaction error occurred reading data
     [java] 2013-03-05 17:04:19,324 (main) [EntityDataLoadContainer.java:413:INFO ] [install.loadData]: Error loading XML Resource "file:/Users/lanre/Projects/crm_remote_local/applications/order/data/SalesOrderDemoData.xml"; Error was: A transaction error occurred reading data
     [java] 2013-03-05 17:04:19,324 (main) [EntityDataLoadContainer.java:413:INFO ] [install.loadData]: Error loading XML Resource "file:/Users/lanre/Projects/crm_remote_local/applications/marketing/data/sfaDemoData.xml"; Error was: A transaction error occurred reading data
     [java] 2013-03-05 17:04:19,324 (main) [EntityDataLoadContainer.java:413:INFO ] [install.loadData]: Error loading XML Resource "file:/Users/lanre/Projects/crm_remote_local/specialpurpose/ecommerce/data/DemoProduct.xml"; Error was: A transaction error occurred reading data
     [java] 2013-03-05 17:04:19,324 (main) [EntityDataLoadContainer.java:413:INFO ] [install.loadData]: Error loading XML Resource "file:/Users/lanre/Projects/crm_remote_local/specialpurpose/ecommerce/data/DemoOrderTestData.xml"; Error was: A transaction error occurred reading data
     [java] 2013-03-05 17:04:19,324 (main) [EntityDataLoadContainer.java:413:INFO ] [install.loadData]: Error loading XML Resource "file:/Users/lanre/Projects/crm_remote_local/specialpurpose/projectmgr/data/ProjectMgrDemoData.xml"; Error was: A transaction error occurred reading data
     [java] 2013-03-05 17:04:19,324 (main) [EntityDataLoadContainer.java:413:INFO ] [install.loadData]: Error loading XML Resource "file:/Users/lanre/Projects/crm_remote_local/opentaps/crmsfa/data/CRMSFADemoData.xml"; Error was: A transaction error occurred reading data
     [java] 2013-03-05 17:04:19,324 (main) [EntityDataLoadContainer.java:413:INFO ] [install.loadData]: Error loading XML Resource "file:/Users/lanre/Projects/crm_remote_local/opentaps/crmsfa/data/CRMSFADemoChartData.xml"; Error was: A transaction error occurred reading data
     [java] 2013-03-05 17:04:19,324 (main) [EntityDataLoadContainer.java:413:INFO ] [install.loadData]: Error loading XML Resource "file:/Users/lanre/Projects/crm_remote_local/opentaps/financials/data/DemoLockbox.xml"; Error was: A transaction error occurred reading data
     [java] 2013-03-05 17:04:19,325 (main) [EntityDataLoadContainer.java:413:INFO ] [install.loadData]: Error loading XML Resource "file:/Users/lanre/Projects/crm_remote_local/opentaps/opentaps-tests/data/crmsfa/OrderTestData.xml"; Error was: A transaction error occurred reading data
     [java] 2013-03-05 17:04:19,325 (main) [EntityDataLoadContainer.java:413:INFO ] [install.loadData]: Error loading XML Resource "file:/Users/lanre/Projects/crm_remote_local/opentaps/opentaps-tests/data/purchasing/OrderTestData.xml"; Error was: A transaction error occurred reading data
     [java] 2013-03-05 17:04:19,325 (main) [EntityDataLoadContainer.java:417:INFO ] =-=-=-=-=-=-= Finished the data load with 18158 rows changed.
     [java] org.ofbiz.base.start.StartupException: Cannot start() org.ofbiz.entityext.data.EntityDataLoadContainer (Errors occurred during the data load.)
     [java]     at org.ofbiz.base.container.ContainerLoader.start(ContainerLoader.java:103)
     [java]     at org.ofbiz.base.start.Start.startStartLoaders(Start.java:273)
     [java]     at org.ofbiz.base.start.Start.startServer(Start.java:323)
     [java]     at org.ofbiz.base.start.Start.start(Start.java:327)
     [java]     at org.ofbiz.base.start.Start.main(Start.java:412)
     [java] org.ofbiz.base.container.ContainerException: Errors occurred during the data load.
     [java]     at org.ofbiz.entityext.data.EntityDataLoadContainer.start(EntityDataLoadContainer.java:420)
     [java]     at org.ofbiz.base.container.ContainerLoader.start(ContainerLoader.java:101)
     [java]     at org.ofbiz.base.start.Start.startStartLoaders(Start.java:273)
     [java]     at org.ofbiz.base.start.Start.startServer(Start.java:323)
     [java]     at org.ofbiz.base.start.Start.start(Start.java:327)
     [java]     at org.ofbiz.base.start.Start.main(Start.java:412)
     [java] org.ofbiz.base.container.ContainerException: Errors occurred during the data load.
     [java]     at org.ofbiz.entityext.data.EntityDataLoadContainer.start(EntityDataLoadContainer.java:420)
     [java]     at org.ofbiz.base.container.ContainerLoader.start(ContainerLoader.java:101)
     [java]     at org.ofbiz.base.start.Start.startStartLoaders(Start.java:273)
     [java]     at org.ofbiz.base.start.Start.startServer(Start.java:323)
     [java]     at org.ofbiz.base.start.Start.start(Start.java:327)
     [java]     at org.ofbiz.base.start.Start.main(Start.java:412)
     [java] 2013-03-05 17:04:19,327 (OFBiz_Shutdown_Hook) [    ContainerLoader.java:114:INFO ] Shutting down containers

BUILD FAILED
/Users/lanre/Projects/crm_remote_local/build.xml:510: Java returned: 99 
```

在更改 opentaps 的不相关部分时，这似乎经常发生。我不明白为什么在更改 java 代码中的某些内容之后，随后的重新构建会导致这些数据加载错误。另一件事是，这些错误之前在控制台输出中很早就出现了以下几种错误：

```
[java] 2013-03-05 17:04:17,882 (main) [  ServiceDispatcher.java:516:INFO ] [[Sync service failed...- total:0.0,since last(Begin):0.0]] - 'entity-default / recalcInvoiceAmounts'
 [java] 2013-03-05 17:04:17,882 (main) [    TransactionUtil.java:371:WARN ] 
 [java] ---- exception report ----------------------------------------------------------
 [java] [TransactionUtil.setRollbackOnly] Calling transaction setRollbackOnly; this stack trace shows where this is happening:
 [java] Exception: java.lang.Exception
 [java] Message: Service [recalcInvoiceAmounts] threw an unexpected exception/error
 [java] ---- stack trace ---------------------------------------------------------------
 [java] java.lang.Exception: Service [recalcInvoiceAmounts] threw an unexpected exception/error
 [java] org.ofbiz.entity.transaction.TransactionUtil.setRollbackOnly(TransactionUtil.java:371)
 [java] org.ofbiz.entity.transaction.TransactionUtil.rollback(TransactionUtil.java:313)
 [java] org.ofbiz.service.ServiceDispatcher.runSync(ServiceDispatcher.java:525)
 [java] org.ofbiz.service.ServiceDispatcher.runSync(ServiceDispatcher.java:227)
 [java] org.ofbiz.service.GenericDispatcher.runSync(GenericDispatcher.java:166)
 [java] org.ofbiz.entityext.eca.EntityEcaAction.runAction(EntityEcaAction.java:93)
 [java] org.ofbiz.entityext.eca.EntityEcaRule.eval(EntityEcaRule.java:121)
 [java] org.ofbiz.entityext.eca.DelegatorEcaHandler.aw$original$_AW_$evalRules$_AW_$org_ofbiz_entityext_eca_DelegatorEcaHandler(DelegatorEcaHandler.java:86)
 [java] org.ofbiz.entityext.eca.DelegatorEcaHandler_1_1999504294_1997194061___AW_JoinPoint.invoke(Unknown Source)
 [java] org.ofbiz.entityext.eca.DelegatorEcaHandler.evalRules(DelegatorEcaHandler.java)
 [java] org.ofbiz.entity.GenericDelegator$EntityEcaRuleRunner.evalRules(GenericDelegator.java:2874)
 [java] org.ofbiz.entity.GenericDelegator.store(GenericDelegator.java:1364)
 [java] org.ofbiz.entity.GenericDelegator.storeAll(GenericDelegator.java:1459)
 [java] org.ofbiz.entity.util.EntitySaxReader.writeValues(EntitySaxReader.java:286)
 [java] org.ofbiz.entity.util.EntitySaxReader.parse(EntitySaxReader.java:265)
 [java] org.ofbiz.entity.util.EntitySaxReader.parse(EntitySaxReader.java:222)
 [java] org.ofbiz.entity.util.EntityDataLoader.loadData(EntityDataLoader.java:214)
 [java] org.ofbiz.entityext.data.EntityDataLoadContainer.start(EntityDataLoadContainer.java:389)
 [java] org.ofbiz.base.container.ContainerLoader.start(ContainerLoader.java:101)
 [java] org.ofbiz.base.start.Start.startStartLoaders(Start.java:273)
 [java] org.ofbiz.base.start.Start.startServer(Start.java:323)
 [java] org.ofbiz.base.start.Start.start(Start.java:327)
 [java] org.ofbiz.base.start.Start.main(Start.java:412)
 [java] --------------------------------------------------------------------------------
 [java] 
 [java] 2013-03-05 17:04:17,883 (main) [    EntityEcaAction.java:111:ERROR] 
 [java] ---- exception report ----------------------------------------------------------
 [java] Error running Entity ECA action service
 [java] Exception: org.ofbiz.service.GenericServiceException
 [java] Message: Error or unknown exception (org/opentaps/base/services/RecalcInvoiceAmountsService : Unsupported major.minor version 51.0)
 [java] ---- cause ---------------------------------------------------------------------
 [java] Exception: java.lang.UnsupportedClassVersionError
 [java] Message: org/opentaps/base/services/RecalcInvoiceAmountsService : Unsupported major.minor version 51.0
 [java] ---- stack trace ---------------------------------------------------------------
 [java] java.lang.UnsupportedClassVersionError: org/opentaps/base/services/RecalcInvoiceAmountsService : Unsupported major.minor version 51.0
 [java] java.lang.ClassLoader.defineClass1(Native Method)
 [java] java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
 [java] java.lang.ClassLoader.defineClass(ClassLoader.java:615)
 [java] java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
 [java] java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
 [java] java.net.URLClassLoader.access$000(URLClassLoader.java:58)
 [java] java.net.URLClassLoader$1.run(URLClassLoader.java:197)
 [java] java.security.AccessController.doPrivileged(Native Method)
 [java] java.net.URLClassLoader.findClass(URLClassLoader.java:190)
 [java] java.lang.ClassLoader.loadClass(ClassLoader.java:306)
 [java] java.lang.ClassLoader.loadClass(ClassLoader.java:247)
 [java] java.lang.Class.getDeclaredConstructors0(Native Method)
 [java] java.lang.Class.privateGetDeclaredConstructors(Class.java:2398)
 [java] java.lang.Class.getConstructor0(Class.java:2708)
 [java] java.lang.Class.newInstance0(Class.java:328)
 [java] java.lang.Class.newInstance(Class.java:310)
 [java] org.opentaps.foundation.service.ofbiz.POJOJavaEngine.serviceInvoker(POJOJavaEngine.java:170)
 [java] org.opentaps.foundation.service.ofbiz.POJOJavaEngine.runSync(POJOJavaEngine.java:117)
 [java] org.ofbiz.service.ModelServiceReader$GenericInvokerImpl.runSync(ModelServiceReader.java:762)
 [java] _$gen.file_58$.Users.lanre.Projects.crm_95$remote_95$local.opentaps.financials.servicedef.services_95$invoice_46$xml_35$recalcInvoiceAmounts.runSync(file:/Users/lanre/Projects/crm_remote_local/opentaps/financials/servicedef/services_invoice.xml#recalcInvoiceAmounts:359)
 [java] org.ofbiz.service.ServiceDispatcher.runSync(ServiceDispatcher.java:400)
 [java] org.ofbiz.service.ServiceDispatcher.runSync(ServiceDispatcher.java:227)
 [java] org.ofbiz.service.GenericDispatcher.runSync(GenericDispatcher.java:166)
 [java] org.ofbiz.entityext.eca.EntityEcaAction.runAction(EntityEcaAction.java:93)
 [java] org.ofbiz.entityext.eca.EntityEcaRule.eval(EntityEcaRule.java:121)
 [java] org.ofbiz.entityext.eca.DelegatorEcaHandler.aw$original$_AW_$evalRules$_AW_$org_ofbiz_entityext_eca_DelegatorEcaHandler(DelegatorEcaHandler.java:86)
 [java] org.ofbiz.entityext.eca.DelegatorEcaHandler_1_1999504294_1997194061___AW_JoinPoint.invoke(Unknown Source)
 [java] org.ofbiz.entityext.eca.DelegatorEcaHandler.evalRules(DelegatorEcaHandler.java)
 [java] org.ofbiz.entity.GenericDelegator$EntityEcaRuleRunner.evalRules(GenericDelegator.java:2874)
 [java] org.ofbiz.entity.GenericDelegator.store(GenericDelegator.java:1364)
 [java] org.ofbiz.entity.GenericDelegator.storeAll(GenericDelegator.java:1459)
 [java] org.ofbiz.entity.util.EntitySaxReader.writeValues(EntitySaxReader.java:286)
 [java] org.ofbiz.entity.util.EntitySaxReader.parse(EntitySaxReader.java:265)
 [java] org.ofbiz.entity.util.EntitySaxReader.parse(EntitySaxReader.java:222)
 [java] org.ofbiz.entity.util.EntityDataLoader.loadData(EntityDataLoader.java:214)
 [java] org.ofbiz.entityext.data.EntityDataLoadContainer.start(EntityDataLoadContainer.java:389)
 [java] org.ofbiz.base.container.ContainerLoader.start(ContainerLoader.java:101)
 [java] org.ofbiz.base.start.Start.startStartLoaders(Start.java:273)
 [java] org.ofbiz.base.start.Start.startServer(Start.java:323)
 [java] org.ofbiz.base.start.Start.start(Start.java:327)
 [java] org.ofbiz.base.start.Start.main(Start.java:412) 
```

我在 Ofbiz/opentaps 10.04/1.5 上分别使用 OSX 10.7.x 上的 JDK 1.7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:42:20.137

请注意 opentaps 不支持 jdk 1.7 请使用 .1.6

# php - PHP base 64 到图像的转换

> ID：15229922
> 
> 赞同：0
> 
> 时间：2013-03-05T17:10:08.380
> 
> 标签：php

我一直在尝试使用此代码将图像转换为 base64，然后再次将其保存到图像文件到磁盘，但最后我得到了一个包含无效图像文本的图像文件。

```
<?php

$b64image = base64_encode(file_get_contents('1.png'));

file_put_contents('abc.png',$b64image);

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T17:11:55.463

你的图像~~不能用 base64 编码，~~可以用 base64 编码，但实际上没有多少图像查看器会显示用 base64 编码的图像。您需要`base64_decode`先将图像存储到另一个文件中，以便图像查看器可以正确读取您的图像。

# vb.net - 为什么这个 ASCII 字符输出为空字符串（VB.NET）？

> ID：15229937
> 
> 赞同：2
> 
> 时间：2013-03-05T17:10:44.240
> 
> 标签：vb.net, character-encoding, ascii

我正在尝试将 ASCII 字符 131（ƒ - 带钩子的拉丁小写字母 f）输出到消息框，但由于某些奇怪的原因，它显示为空字符串。我有以下 VB.NET 代码：

```
Dim str As String = Convert.ToChar(131)
MessageBox.Show(str, "test", MessageBoxButtons.OK, MessageBoxIcon.Information)
Debug.Print(str) 
```

在上面，消息框没有显示任何内容，但 debug.print 语句在“立即窗口”中正确显示了字符。我有大约 70 个其他 ascii 字符都可以使用这种方法正常工作，但只有少数几个显示为空白（131 和 EN 破折号 150）。

例如，以下工作：

```
str = Convert.ToChar(164)
MessageBox.Show(str, "test", MessageBoxButtons.OK, MessageBoxIcon.Information)
Debug.Print(str) 
```

我也尝试转换为 UTF8，但我得到了与第一个代码片段相同的行为：

```
Dim utf8Encoding As New System.Text.UTF8Encoding(True)
Dim encodedString() As Byte
str = Convert.ToChar(131)
encodedString = utf8Encoding.GetBytes(str)
Dim str2 As String = utf8Encoding.GetString(encodedString)
MessageBox.Show(str2, "test", MessageBoxButtons.OK, MessageBoxIcon.Information)
Debug.Print(str2) 
```

这是编码问题吗？感谢您的任何见解。

编辑：澄清一下，我实际上并没有尝试将字符输出到消息框。该代码只是一个测试。我试图将字符作为字符串传递给在第 3 方 xml 编辑器控件中使用它的函数，但它显示为空白。即使在 Visual Studio 中调试时，您也可以看到它的值等于“”。

编辑 2：**感谢下面接受的答案的一些调查，我发现我使用了错误的 unicode 字符。对于这个 f 字符，要使用的代码是 ToChar(402)。这非常有效。谢谢你们。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T18:14:44.830

正如其他人所指出的，“ƒ”字符不是 ASCII 字符。ASCII 严格来说是 7 字节格式，“扩展 ASCII”字符完全不同，具体取决于您引用的编码。例如，[Windows CodePage 1250](http://msdn.microsoft.com/en-us/goglobal/cc305143)的字符 131(0x83) 有一个空白，但[CodePage 1252](http://msdn.microsoft.com/en-us/goglobal/cc305145)在该插槽中具有“ƒ”字符。

我在下面的示例中使用 1252，但如果您要转换较大的编码 ASCII 文本主体，您应该确保正确识别正在使用的编码并使用正确的代码页进行转换。

我认为，处理这个问题的最好方法是将所有内容都转换为 Unicode，并远离扩展的 ASCII，除非出于遗留原因绝对必要。但是，要获得“ƒ”字符，您可以执行以下操作：

```
Imports System.Text 
```

进而 ：

```
Dim enc1252 As Encoding = Encoding.GetEncoding(1252)
Dim bArr(0) As Byte
bArr(0) = CByte(131)

Dim str2 As String = Encoding.Unicode.GetString( _
                     Encoding.Convert(enc1252, Encoding.Unicode, bArr))

MessageBox.Show(str2, " test", MessageBoxButtons.OK, _
                MessageBoxIcon.Information) 
```

然而，VisualStudio 本身使用 Unicode，所以如果您只需要显示“ƒ”字符，并且不需要实际转换任何旧文本，您总是可以这样做：

```
MessageBox.Show("ƒ", " test", MessageBoxButtons.OK, _
                MessageBoxIcon.Information) 
```

# java - super(new Something(...)) 这个结构错了吗？

> ID：15229941
> 
> 赞同：2
> 
> 时间：2013-03-05T17:10:51.907
> 
> 标签：java

我正在查看一些 java 代码，其中类的构造函数如下所示：

```
public class X extends ... {
    X(String s) {
       super(new Y(s)); 
    }
} 
```

那总是错的吗？换句话说，它是否在构造函数中创建一个对象以将其传递给“超级”总是错误的？如果是，为什么？

编辑：为什么我认为这可能是错误的？

当创建一个类 X 时，jvm 做的第一件事就是在它的超类上调用 super。（即使暗示了 'super()' 也会这样做）您只能执行有限数量的操作，例如`super(new Y(s));` 使用三元运算符调用 super`super( s != null ? new Y(s) : new Y() )` 但您将无法放置更多逻辑，因为必须首先调用 super ！！！这就是为什么我认为这是错误的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T17:12:14.883

不，这并不总是错误的。子类锁定超类允许您在构造函数中指定的内容是完全有效的。

* * *

重新编辑：

> ...但是您将无法提出更多逻辑，因为调用`super`...

没错，这是 Java 编程语言的一个限制（我怀疑是有意的限制），但这并不意味着*创建*一个传递给`super`.

如果您愿意，您可以通过定义一个返回您需要传递的内容`super`并调用它的静态函数来绕过该限制：

```
super(makeTheThingYouNeed()); 
```

那时*，*我肯定会在使用它之前仔细检查这确实是我最好的做法。但只是专门创建一个对象将其传递给`super`? 根本不是问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T17:14:06.913

这并不*总是*错误的，但像往常一样，应该采取措施防止滥用。

在这种情况下，新对象似乎是String`Y`的包装器，或者它是. 您只是提供超类的初始化值，并在需要时调整它们。`s``X`

该`Y`对象可以在`X`的构造函数中创建或直接作为参数提供（使用`X`的构造函数接收 an`Y`而不是 a `String`）。例如，`Y`如果它是您无权从创建的对象访问的类，则创建`X`.

正如您所看到的，这完全取决于您正在编码的当前上下文。正是这个上下文决定了一个决策的*错误*程度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T17:14:47.237

这不是“总是”错的。它甚至不是“大部分”错误或*失礼*。就此而言，子类以`super`这种方式传递信息是相当普遍的。但是人们确实想知道其他情况可能是什么，其中大多数与实践本身无关。

这是一种绕过更广泛的类初始化的方法吗？那么也许这是一个坏主意。是否使阅读/调试代码变得更加困难？那么也许它应该被排除在外。

我也想知道谁告诉你这总是错的，为什么他们这么说。是开发人员吗？同学？导师？明确地说“构造函数内部的初始化是错误的”不是我见过的，但我可以想象一个认为他知道但不知道的学生或教授会说什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T17:14:58.663

不，这并不总是错误的，例如

```
public class A {
  public A(final BigDecimal value) {}
}

public class B extends A {
  public B(final String value) {super(new BigDecimal(value));}
} 
```

这样做可能有很多原因，变量的转换（如上所述）或者超类可能采用某个`protected`只能实例化的类的`B`实例。

很少有事情*总是*错的，但很多事情有时是错的......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T17:18:36.693

在任何语言意义上都没有错。但是，也许它“闻起来”（正如您在评论中所说的那样），因为如果构造函数采用完全不同类型的参数，则子类关系`X`与其超类之间的关系似乎不一致。

这是一个主观问题，更多地与 OO 设计理念有关，而不是与编码实践有关。作为代码，子类限制可以用来创建对象的数据类型是完全合理的。事实上，这样做很常见。

# sql-server - 访问 2007 SQL 计数

> ID：15229945
> 
> 赞同：0
> 
> 时间：2013-03-05T17:11:11.320
> 
> 标签：sql-server, ms-access-2007

我有一张这样的桌子

```
Days taken
12
10
10
12
9
10
8
10 
```

我想要一个这样的查询

```
Type          | Count
Days over 10  |   2
Days under 10 |   6 
```

到目前为止我有这个

```
SELECT Sum(IIf([table].[days taken]<=10,1,0)) AS [Days Under Ten], 
Sum(IIf([table].[days taken]>10,1,0)) AS [Days Over Ten]
FROM [table]; 
```

这给了我这个

```
Days under ten | Days over ten
6              |       2 
```

但这不是我想要的，请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T17:17:20.853

您当前的查询非常接近正确的版本。您将要使用：

```
SELECT 
  IIF([days taken] <=10, 'Days under 10', 'Days over 10') as Type,
  count([days taken]) as Total
FROM yourtable
group by IIF([days taken] <=10, 'Days under 10', 'Days over 10') 
```

您会看到我使用`IIF`来分配`Days over 10`或`Days under 10`。然后你将把它添加`IIF`到 `GROUP BY``count()`

# javascript - 当我在选项中有 2 个或更多单词时，Cufon + SelectBoxIt 组合广告三个点

> ID：15229948
> 
> 赞同：1
> 
> 时间：2013-03-05T17:11:22.703
> 
> 标签：javascript, jquery, cufon

我有一个像这样的代码：

```
<script type="text/javascript">
            Cufon.replace('#select-stuff', { fontFamily: 'Myriad Pro' });
            Cufon.refresh('#select-stuff'); 
</script>

<script>
       $(document).ready(function(){

          // loading selectBoxIt
          var select = $("select");
          select.selectBoxIt();

          // code to fix reloading cufon on select change in select box
          refreshCufon();
          select.change(function() {
            refreshCufon();
          });          
          function refreshCufon() {
           Cufon.replace('#select-stuff', { fontFamily: 'Myriad Pro' });
           Cufon.refresh();
          }

        });
</script> 
```

它可以工作，但是当我在选项中有 2 个或更多单词时，它会出错，而不是单词，它会添加三个点，如下所示：

![在此处输入图像描述](../Images/83b1af2ed02d17c4f06a203ebb01966e.png)

或者

![在此处输入图像描述](../Images/7e3fd9ce68fc288937b4c3d6c197fb40.png)

因此，有多少单词并不重要。它以某种方式用三个点替换了最后一个单词。

知道有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T20:57:32.690

如果您使用selectBoxIt 提供的[默认`.css`文件，它包含一个条目：](https://github.com/gfranko/jquery.selectBoxIt.js/blob/master/src/stylesheets/jquery.selectBoxIt.css)

```
/* Button Text */
.selectboxit-text {
  ...
  text-overflow: ellipsis;
  ...
} 
```

当文本比容器长时，它会自动添加省略号（三个点）。更改 可能`text-overflow`会解决您的问题，但如果没有实际代码，很难说出更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T21:06:51.753

```
<style rel="stylesheet">
  .selectboxit-text {
    text-overflow: clip;
  }
</style> 
```

# c++ - OpenCV - 二值图像中所有非零像素的位置

> ID：15229951
> 
> 赞同：15
> 
> 时间：2013-03-05T17:11:25.070
> 
> 标签：c++, opencv

如何找到二进制图像（cv::Mat）中所有非零像素的位置？我是否必须扫描图像中的每个像素，或者是否有可以使用的高级 OpenCV 函数？输出应该是一个点向量（像素位置）。

例如，这可以在 Matlab 中简单地完成为：

```
imstats = regionprops(binary_image, 'PixelList');
locations = imstats.PixelList; 
```

或者，甚至更简单

```
[x, y] = find(binary_image);
locations = [x, y]; 
```

**编辑**：换句话说，如何在 cv::Mat 中找到所有非零元素的坐标？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-12-27T16:22:54.767

我将此作为编辑放在亚历克斯的答案中，但它没有得到审查，所以我会在这里发布，因为它是有用的信息恕我直言。

您还可以传递点向量，以便之后更轻松地使用它们：

```
std::vector<cv::Point2i> locations;   // output, locations of non-zero pixels 
cv::findNonZero(binaryImage, locations); 
```

该`cv::findNonZero`函数的一般注意事项：如果`binaryImage`包含零个非零元素，它将抛出，因为它试图分配“1 x n”内存，其中 n 是`cv::countNonZero`，那么 n 显然会是 0。我通过事先手动调用来规避这一点，`cv::countNonZero`但我不太喜欢那个解决方案。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-05T22:21:44.323

正如@AbidRahmanK 所建议的，`cv::findNonZero`OpenCV 2.4.4 版中有一个功能。用法：

```
cv::Mat binaryImage; // input, binary image
cv::Mat locations;   // output, locations of non-zero pixels 
cv::findNonZero(binaryImage, locations); 
```

它完成了这项工作。此功能在 OpenCV 2.4.4 版本中引入（例如，在 2.4.2 版本中不可用）。此外，由于某种原因，截至目前`findNonZero`不在文档中。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-09-25T01:33:50.027

任何希望在 python 中执行此操作的人。也可以使用 numpy 数组来执行此操作，因此您无需升级您的 opencv 版本（或使用未记录的函数）。

```
mask = np.zeros(imgray.shape,np.uint8)
cv2.drawContours(mask,[cnt],0,255,-1)
pixelpoints = np.transpose(np.nonzero(mask))
#pixelpoints = cv2.findNonZero(mask) 
```

注释掉的是使用 openCV 代替的相同功能。有关更多信息，请参阅：

[https://github.com/abidrahmank/OpenCV2-Python-Tutorials/blob/master/source/py_tutorials/py_imgproc/py_contours/py_contour_properties/py_contour_properties.rst](https://github.com/abidrahmank/OpenCV2-Python-Tutorials/blob/master/source/py_tutorials/py_imgproc/py_contours/py_contour_properties/py_contour_properties.rst)

# kendo-ui - 绑定到 odata 的 Kendo 组合框不查找值集的文本

> ID：15229957
> 
> 赞同：5
> 
> 时间：2013-03-05T17:11:43.250
> 
> 标签：kendo-ui

我有一个绑定到 odata 数据源的标准剑道网络组合框。如果您输入它并获得正确的文本和值，它看起来很好。

但是，如果您绑定了它，并且在代码中设置了 .value() 属性，则不会在文本中查找设置的值。（如果您正在加载现有数据，这是非常标准的行为）

我会假设它会转到服务器并通过 dataValueField 属性查找确切值并专门返回项目并设置文本。

我该如何让它做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T22:27:21.940

让我们有以下内容`ComboBox`：

```
var combobox = $("#combobox").kendoComboBox({
    dataTextField : "ProductName",
    dataValueField: "ProductID",
    dataSource    : {
        type     : "odata",
        transport: {
            read: "http://demos.kendoui.com/service/Northwind.svc/Products"
        }
    }
}).data("kendoComboBox"); 
```

（您可以自己使用它，因为它指的是 Kendo UI 服务器中可用的服务）。

然后您可以使用以下代码来设置`value`或`text`（无论您喜欢什么）。

```
// Set value of the ComboBox using dataValueField (ProductId)
combobox.value(4);
// Set value of the ComboBox using dataTextField (ProductName)
combobox.text("Chef Anton's Cajun Seasoning"); 
```

对于阅读，您应该使用：

```
alert("Current text/value: " + combobox.text() + "/" + combobox.value()); 
```

这两种方法都可以正常工作，因为您可以在此处查看[http://jsfiddle.net/OnaBai/64gXE/](http://jsfiddle.net/OnaBai/64gXE/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-22T13:11:35.597

你必须真的把这个东西踢到**才能让它工作。有一百万种配置，其中只有少数似乎有效

WebAPI OData implementation (4.5) 和 Telerik Datasource 真的不能很好地结合在一起。这是我工作的客户端 ComboBox 实现：

```
$("#dropdownlist").kendoComboBox({
                    optionLabel: " ",
                    dataTextField: "name",
                    dataValueField: "id",
                    dataSource: {
                        serverFiltering: true,
                        transport: {
                            read: {
                                url: "/odata/MyService",
                                'type': 'Get'
                            }
                        },
                        schema: {
                            parse: (response: any) => {
                                var results = response.value;
                                var items: any = [];
                                for (var i = 0; i < results.length; i++) {
                                    items.push(
                                        {
                                            id: results[i].id,
                                            name: results[i].name,
                                        });
                                }
                                return items;
                            },
                        }
                    }
                }); 
```

你会注意到我必须在模式对象的 parse 方法中劫持数据并对其进行按摩

我的 OData 响应供参考：

![在此处输入图像描述](../Images/7eb37813c9bd7b2f0fb413798ff8a772.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T10:47:10.830

重新绑定剑道组合框时遇到了这个问题。基本上我不得不重新查询服务器，就好像用户输入了它一样。然后，一旦查询完成，我就使用先前选择的值选择正确的项目。

```
var comboBoxElem = $("#controlNameHere");

comboBoxElem.kendoComboBox(
    {
        placeholder: "Start typing...",
        dataTextField: "yourDataTextField",     // field used in the re-query due to 'contains' filter
        dataValueField: "yourDataValueField",
        filter: "contains",
        change: selectFunc,
        dataSource: {
            serverFiltering: true,
            pageSize: 20,
            transport: {
                read: {
                    url: "http://yourUrlHere"
                }
            }
        }
    });

// the following code is all about re-selecting the previous value

var comboBox = comboBoxElem.data('kendoComboBox');

var previousTextValue = 'text of the previous entry here';
var previousValue = '543';

comboBox.text(previousTextValue);   // to show the user text while re-query takes place

// reload previous item(s) from server, then re-select the desired item

comboBox.dataSource.query({
    filter: { operator: "contains", field: 'yourDataTextField', value: previousTextValue },
    complete: function () {
        setTimeout(function () {
            comboBox.select(function (dataItem) {
                return dataItem.yourDataValueField == previousValue;
            });
        }, 200);  //allow the observable collection to be updated (no event I know of helps here :(
    }
}); 
```

希望这足够清楚，我已经修改了内联代码以保护无辜，因此可能存在最轻微的语法错误。

请记住，为简单起见，您在控件的选项（设置）中使用的过滤器应该与您用于重新查询的过滤器相同，否则您将获得多个过滤器通过服务器。

# python - Python bigram - 外国脚本

> ID：15229963
> 
> 赞同：0
> 
> 时间：2013-03-05T17:11:57.827
> 
> 标签：python, nltk, arabic

我正在使用 Python 查找包含外文的二元组列表：阿拉伯语、俄语、波斯语

结果显示如下： ('\xd9\x85\xd9\x86\xd8\xa7\xd8\xb8\xd8\xb1\xd9\x87', '\xd9\x85\xd9\x88\xd8\xb3\xd9\ x88\xdb\x8c')

这个脚本叫什么，我怎样才能把它转换成它的阿拉伯语/俄语/波斯语对应物。

我正在使用 NLTK 在 MAC OS 的终端上运行它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T17:13:20.243

这是一个包含 utf-8 编码文本的字节串：

```
In [5]: '\xd9\x85\xd9\x86\xd8\xa7\xd8\xb8\xd8\xb1\xd9\x87'.decode('utf-8')
Out[5]: u'\u0645\u0646\u0627\u0638\u0631\u0647'

In [6]: print '\xd9\x85\xd9\x86\xd8\xa7\xd8\xb8\xd8\xb1\xd9\x87'.decode('utf-8')         
مناظره 
```

# c# - 编码文本以删除转义字符

> ID：15229965
> 
> 赞同：0
> 
> 时间：2013-03-05T17:12:00.443
> 
> 标签：c#, .net, character-encoding

我之前使用 UTF8 编码存储了从 URL 下载的字符串。

```
\"TEXT LINE ONE\"\r\n\"MORE TEXT LINE\" 
```

本质上它是 CSV 格式。当我读回字符串来操作它时，它显然仍然得到了所有编码的字符。

到目前为止，我已经解决了它，我知道转义的字符，以简单地替换它们。但是想知道将字符串转换为 byte[] 然后转换为字符串的正确方法，然后我可以执行此操作`mystr = mystr.Trim('"');`。

你如何从上面的字符串中得到一个可以使用 System.Text.Encoding 的字符串函数的字符串？

**更新：**

原始 CSV 看起来像

```
"TEXT LINE ONE"
"MORE TEXT LINE" 
```

好的，所以不是逗号分隔，但你明白了。

```
// load the data from URL
WebRequest request = WebRequest.Create(csvUrl);
request.Timeout = 30 * 60 * 1000;
request.UseDefaultCredentials = true;
request.Proxy.Credentials = request.Credentials;
WebResponse response = (WebResponse)request.GetResponse();
using (Stream s = response.GetResponseStream())
{
    var str = Encoding.UTF8.GetString(ReadFully(s)); 
} 
```

在这种情况下`str`==`\"TEXT LINE ONE\"\r\n\"MORE TEXT LINE\"`

然后我在序列化它之前把它放到一个流中。

```
using (Stream stream = new MemoryStream(System.Text.Encoding.UTF8.GetBytes (str)))
{
   // save
   // now it's saved with literal characters for each \"
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:23:22.260

我不确定我是否完全理解您的问题，但是您可以使用以下方法在 String 和 byte[] 之间进行转换：

```
byte[] myBytes = Encoding.UTF8.GetBytes(myString); 
```

...和...

```
String myString = Encoding.UTF8.GetString(myBytes); 
```

如果您愿意，可以使用不同的编码代替 UTF8。

# mongoose - 在猫鼬中，如何选择数组属性中的字段

> ID：15229966
> 
> 赞同：3
> 
> 时间：2013-03-05T17:12:01.540
> 
> 标签：mongoose

在猫鼬中，我有这样的模式

```
var schema= mongoose.Schema({
         name:String,
         age:String
         likes: [{ type:String, price:String}]                       
}); 
```

和猫鼬一样，**Model.find(conditions, [fields], [options], [callback])**中的**选项**让我们可以选择我们需要的字段。但是在我的架构中，有一个数组属性“喜欢”，并且在查询中，我只想选择一种属性类型而不是所有属性类型，我该如何进行此查询？

 *** * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-05T17:20:37.717

我真的发现了，就在

```
Model.findOne({ 'name': name }, 'name age likes.type', callback); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-15T09:24:15.117

因为`find()`您需要使用`select()`链式调用，如下所示：

```
Model.find({ name: name }).select('name age likes.type').exec(function() {

}); 
```

或者

```
Model.find({ name: name }).select({ 'name': 1, 'age': 1, 'likes.type': 1 }).exec(function() {

}); 
```

[Mongoose 文档中的](http://mongoosejs.com/docs/queries.html)更多示例

不要忘记使用游标来遍历大量数据（在文档的*Streaming*部分中进行了描述）。**

# dynamics-crm-2011 - 如何从团队中获取团队用户 从输入中获取

> ID：15229971
> 
> 赞同：3
> 
> 时间：2013-03-05T17:12:06.827
> 
> 标签：dynamics-crm-2011, dynamics-crm, dynamics-crm-online

我正在尝试构建我的第一个工作流，该工作流从一个团队中获取，并让该团队中的所有用户进入 CRM 电子邮件的“收件人”字段。

我的第一个挑战是检索兼容的输入类。例如类：**XrmDataContext**，**TeamMembership**，**Email(email.Subject)**编译器无法识别它们。

我一直在尝试使用我在互联网上找到的这段代码，但对我来说不是很清楚。

```
 [Input("Team Name")]
    [Default("Case Team")]
    public InArgument<string> CaseTeam { get; set; }

    [Output("Date time")]
    public OutArgument<DateTime> TaskDueDate { get; set; }
      protected override void Execute(CodeActivityContext executionContext)
    {
        try
        {
            // Create the tracing service
            ITracingService tracingService = executionContext.GetExtension<ITracingService>();

            // Create the context
            IWorkflowContext context = executionContext.GetExtension<IWorkflowContext>();

            IOrganizationServiceFactory serviceFactory = executionContext.GetExtension<IOrganizationServiceFactory>();

            // Create the Organiztion service
            IOrganizationService service = serviceFactory.CreateOrganizationService(context.UserId);

            // Get the target entity from the context
            Entity target = (Entity)context.InputParameters["Target"];

            // Prepare DataContext by using AutoGenerated cs file
            XrmDataContext datacontext = new XrmDataContext(service);

            // Get the Team Name from the Workflow input parameter
            string teamName = CaseTeam.Get<string>(executionContext);

            // Get the Team Id from the Team Name
            var team = (from t in datacontext.TeamSet
                        where t.Name == teamName
                        select new { t.TeamId }).First();

            // Get all the members of the team to send email
            List<Entity> teamMembers = (from t in datacontext.TeamMembershipSet
                                                where t.TeamId == team.TeamId
                                                select t).ToList();

            // Send email to memebers of the team
            CreateEmail(service, teamMembers, target, context.InitiatingUserId);

            // Set the Task DueDate to 2 days by using Output Parameter
            TaskDueDate.Set(executionContext, DateTime.Now.AddDays(2));

        }
        catch (SoapException ex)
        {
            // Add the SoapException message in event log
            EventLog.WriteEntry("code error", "Error occured in " + ex.Detail.InnerText.ToString(), EventLogEntryType.Error);
        }
        catch (Exception exe)
        {
            // Add the GeneralException message in event log
            EventLog.WriteEntry("code error", "Error occured in " + exe.InnerException.ToString(), EventLogEntryType.Error);
        }
    }

    public static void CreateEmail(IOrganizationService service, List<Entity> teamMembers, Entity caseEntity, Guid loggedinUser)
    {
        // Create Email 
        Entity email = new Entity("email");

        // Set the from user of the email to Logged in user
        Entity fromParty = new Entity("activityparty"); 
        fromParty.Id = new EntityReference(SystemUser.EntityLogicalName, loggedinUser);

        List<Entity> toPartyList = new List<Entity>();

        // Add the Activity party for each member in the team
        foreach (TeamMembership user in teamMembers)
        {
            ActivityParty toParty = new ActivityParty();
            toParty.PartyId = new EntityReference(SystemUser.EntityLogicalName, user.SystemUserId.Value);
            toPartyList.Add(toParty);
        }

        // Add the subject and description by concating the case ticket number
        email.Attributes.Add("Case " + caseEntity.Attributes["ticketnumber"].ToString() + " Added. Please review");
        email.Description = "Case " + caseEntity.Attributes["ticketnumber"].ToString() + " Added. Please review";

        // Add To and From users to email
        email.To = toPartyList.ToArray();
        email.From = new[] { fromParty };

        // Set the case regarding
        email.RegardingObjectId = new EntityReference(Incident.EntityLogicalName, caseEntity.Id);

        // Create email
        Guid emailId = service.Create(email);

        SendEmailRequest sendRequest = new SendEmailRequest();
        sendRequest.EmailId = emailId;
        sendRequest.TrackingToken = string.Empty;
        sendRequest.IssueSend = true;

        // Send the email message.
        service.Execute(sendRequest);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T21:46:57.997

您已使用 CrmSvcUtil 生成以获取该类的参考。看一看。[_](http://msdn.microsoft.com/en-us/library/ff681574.aspx) 我不知道你是否在关注任何文章，但你可以查看这篇[文章](http://lakshmanindian.wordpress.com/2012/10/14/custom-workflow-activity-in-microsoft-dynamics-crm-2011/)。

# excel - 使用 Excel 的 Delphi Ole 自动化获取文本而不是值

> ID：15229973
> 
> 赞同：1
> 
> 时间：2013-03-05T17:12:10.913
> 
> 标签：excel, delphi, automation, delphi-7, excel-2010

我正在寻找使用 Delphi 7 中的 Ole 自动化为 Excel 电子表格提取给定范围内每个单元格的文本。

刚才我有一个函数（假设工作簿已经打开）从工作表中选择一个范围并使用 .Value2 函数填充一个 Variant 数组

```
function GetExcelRange(const AWorkbookIndex: integer; const AWorksheetIndex: integer; const firstCol, lastCol, firstRow, lastRow: integer): Variant;
var
 AWorkbook, ARange: OleVariant;
begin
 Result := Unassigned;
 if not VarIsEmpty(ExcelApp) then
 begin
  if ExcelApp.Workbooks.Count >= AWorkbookIndex then
  begin
   AWorkbook := ExcelApp.Workbooks[AWorkbookIndex];
   try
    if AWorkbook.Worksheets.Count >= AWorksheetIndex then
    begin;
     ARange := AWorkbook.WorkSheets[AWorksheetIndex].Range[AWorkbook.WorkSheets[AWorksheetIndex].Cells[firstRow, firstCol],
                                   AWorkbook.WorkSheets[AWorksheetIndex].Cells[lastRow, lastCol]];
     Result := ARange.Value2;
    end;
   finally
    AWorkbook := Unassigned;
    ARange := Unassigned;
   end;
  end;
 end;
end; 
```

我期望的是我可以将行更改为`Result := ARange.Text`但它返回一个空对象。

我宁愿在 Ole 对象处于活动状态时不遍历每个单元格，并将整个范围的文本粘贴到一个数组中，就像我在上面所做的那样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T17:21:56.457

我从您的问题推断出您想要阅读在 Excel 中呈现给用户的单元格的文本内容。我不认为你可以在整个范围内执行操作。我过去的做法是这样的。请注意，我使用的是早期绑定的 COM。

```
function GetCellVariant(const Sheet: ExcelWorksheet; const Row, Col: Integer): OleVariant;

  function ErrorText(const Cell: ExcelRange; hr: HRESULT): string;
  const
    ErrorBase=HRESULT($800A0000);
  var
    i: Integer;
  begin
    Result := Cell.Text;
    for i := 1 to Length(Result) do begin
      if Result[i]<>'#' then begin
        exit;
      end;
    end;
    if hr=ErrorBase or xlErrDiv0 then begin
      Result := '#DIV/0!';
    end else if hr=ErrorBase or xlErrNA then begin
      Result := '#N/A';
    end else if hr=ErrorBase or xlErrName then begin
      Result := '#NAME?';
    end else if hr=ErrorBase or xlErrNull then begin
      Result := '#NULL!';
    end else if hr=ErrorBase or xlErrNum then begin
      Result := '#NUM!';
    end else if hr=ErrorBase or xlErrRef then begin
      Result := '#REF!';
    end else if hr=ErrorBase or xlErrValue then begin
      Result := '#VALUE!';
    end else begin
      Result := 'an error';
    end;
  end;

var
  Cell: ExcelRange;
  hr: HRESULT;
begin
  Cell := GetCellAsRange(Sheet, Row, Col);//effectively this is Sheet.Range
  if VarIsError(Cell.Value, hr) then begin
    raise ECellValueError.CreateFmt(
      'Cell %s contains %s.',
      [R1C1toA1(Row,Col), ErrorText(Cell, hr)]
    );
  end;
  Result := Cell.Value;
end;

function GetCellString(const Sheet: ExcelWorksheet; const Row, Col: Integer): string;
var
  Value: Variant;
  Cell: ExcelRange;
begin
  Value := GetCellVariant(Sheet, Row, Col);
  if VarIsNumeric(Value) then begin
    Cell := GetCellAsRange(Sheet, Row, Col);
    Result := Sheet.Application.WorksheetFunction.Text(Cell.Value, Cell.NumberFormatLocal);
  end else begin
    Result := ConvertToString(Value);//this converts a Variant to string
  end;
end; 
```

事实上，这段代码来自我在 Stack Overflow 上问过的第一个问题：[如何在 Excel 中读取单元格的格式化文本表示](https://stackoverflow.com/questions/4164044/how-do-i-read-the-formatted-textual-representation-of-a-cell-in-excel)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T12:41:35.967

也许：

```
var
WS:tExcelWorksheet;
icolor:integer;
dato:olevariant; 
```

...

```
icolor:=WS.cells.item[1,1].Interior.Color;
dato:=WS.Cells.item[2, 4].value;
dato:=WS.Cells.item[2, 4].textformat; 
```

你可以在这里找到很多很多例子：

[http://delphimagic.blogspot.com.es/2013/03/funciones-excel.html](http://delphimagic.blogspot.com.es/2013/03/funciones-excel.html) [http://delphimagic.blogspot.com.es/2013/03/trabajar-con-graficos-en-excel-con.html](http://delphimagic.blogspot.com.es/2013/03/trabajar-con-graficos-en-excel-con.html)

# dotnetnuke - 如何动态调用DotNetNuke的HTML模块

> ID：15229976
> 
> 赞同：0
> 
> 时间：2013-03-05T17:12:13.240
> 
> 标签：dotnetnuke

所以我有一个模块，允许注册用户输入他们的主题。我想添加的功能是当他发布主题时，网页会在主题下方呈现一个空白的 html 模块。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T20:40:50.580

我假设您真的想使用 HTML 编辑器，而不是 HTML 模块，请查看我的 DNNSimpleArticle 模块以获取示例

[http://dnnsimplearticle.codeplex.com/SourceControl/changeset/view/20228#83722](http://dnnsimplearticle.codeplex.com/SourceControl/changeset/view/20228#83722)

基础是

```
<%@ Register TagPrefix="dnn" TagName="TextEditor" Src="~/controls/TextEditor.ascx" %>

<dnn:TextEditor ID="txtDescription" runat="server" Width="100%" Height="300px" /> 
```

# javascript - 在下拉选择中显示文本框

> ID：15229980
> 
> 赞同：0
> 
> 时间：2013-03-05T17:12:24.010
> 
> 标签：javascript, html, drop-down-menu, onclick, onchange

我尝试进行 onchange 和 onclick 事件，但我都遇到了问题。执行我的代码时，Firebug 告诉我我的 showTextBox 函数未定义。

当为 State 下拉列表选择值 1 时，我需要显示`<div>`包含文本框的值。我在选项标签中移动了 onclick 属性并尝试了 onchange 属性，但仍然得到 showTextBox() 未在 Firebug 中定义。

```
<select id="AddrType" onclick="showTextBox();"
        height="30px" style="width: 90px"> 
  <option value="10"></option>
  <option value="0">City</option>
  <option value="1">State</option>
  <option value="2">Zip</option>
</select>   

 <br />

 <div id="stateText" style="visibility: hidden">
   State <input type="text" id="STATE"/>
 </div> 
```

这是触发 onclick 或 onchange 事件时调用的函数：

```
function showTextBox() {
    console.log("in check Drop down");
    if ($('#AddrType').val() == 'State') {
        $('#stateText').style.visibility = 'visible';
    }
    console.log($('#AddrType').val()); 
```

对此有任何帮助。我用谷歌搜索了它，但我似乎找不到有用的东西。我无法使用该`document.getElementById()`功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:16:31.097

您`val()`可能正在返回`"1"`而不是`"State"`检查。

不仅在 jQuery 上，而且当您将表单数据发布到服务器时，值`AddrType`将是`value`所选`option`元素的属性（在您的情况下，“City / State / Zip”只是值的“标题”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T17:25:12.497

试试这个：

```
<script type='text/javascript'>

  $(document).ready(function(){
       $('#AddrType').change(function(){
           if ($(this).val() == '1') {
               $('#stateText').css({'display':'block'});           
           }
        });
  });

</script> 
```

并将您的选择更新为：

```
 <select id="AddrType" height="30px" style="width: 90px"> 
     <option value="10"></option>
     <option value="0">City</option>
     <option value="1">State</option>
     <option value="2">Zip</option>
  </select> 
```

而且，这工作得很好。

```
 <select id="AddrType"  onchange="showTextBox()" height="30px" style="width: 90px"> 
      <option value="10"></option>
      <option value="0">City</option>
      <option value="1">State</option>
      <option value="2">Zip</option>
  </select> 
```

其中 showTextBox() 是：

```
 function showTextBox(){
        if ($('#AddrType').val() == '1') {
                   $('#stateText').css({'visibility':'visible'});
    } 
```

# css - Zurb Foundation 4 中网格单元之间的间距

> ID：15229983
> 
> 赞同：9
> 
> 时间：2013-03-05T17:12:31.193
> 
> 标签：css, sass, zurb-foundation, css-frameworks

有没有一种简单的方法可以在 Zurb Foundation 4 中的网格单元之间设置间距？我不想弄乱 Foundation 元素的 CSS，因为这可能会引发其他问题。[他们的Grid 文档](http://foundation.zurb.com/docs/components/grid.html)中有一个`$column-gutter`SCSS 变量：

```
$column-gutter: 1.875em !default; 
```

但是，我不确定这是为了什么，因为列之间的空间似乎为零，而不是 1.875em。我是否希望确保单元格中的所有内容在它们周围都有填充？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T18:12:54.950

尝试使用在foundation.css**之后**加载的单独样式表，其内容如下所示：

```
@media only screen {
  .row .columns, .row .column {
    padding-left: 10px; /* change the values to anything that you want */
    padding-right: 10px;
  }
} 
```

我将它放在仅@media 的屏幕中，因为对于打印，您可能不希望它带有额外的填充显示。

**[这里的例子](http://jsfiddle.net/emilhem/pXVR3/3/)**

如果您想在打印时使用这个额外的填充，您必须使用以下内容：

```
.row .columns, .row .column {
  padding-left: 10px !important; /* change the values to anything that you want */
  padding-right: 10px !important;
} 
```

您**必须**使用重要部分，因为默认的foundation.css 中有一个@media only 屏幕，它将覆盖您的值。

## 编辑

只需为要应用额外填充的列使用另一个单独的类。例子：

```
.extra-padding {
  padding-left: 10px !important; /* change the values to anything that you want */
  padding-right: 10px !important;
} 
```

**[这里的例子](http://jsfiddle.net/emilhem/WuF3D/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-23T11:13:44.093

您可以添加偏移量

```
<div class="row">
  <div class="large-1 columns">1</div>
  <div class="large-10 large-offset-1 columns">10, offset 1</div>
</div> 
```

[http://foundation.zurb.com/docs/components/grid.html](http://foundation.zurb.com/docs/components/grid.html)

# bash - 如何从文件中包含whiptail的数据？

> ID：15229986
> 
> 赞同：4
> 
> 时间：2013-03-05T17:12:36.260
> 
> 标签：bash

如何`whiptail`使用输入文件配置对话框`file.data`？

```
whiptail --menu "foo" 0 0 0 2>/tmp/out 
```

的内容`file.data`：

```
"01" "Item 1"
"02" "Item 2"
"03" "Item 3"
"04" "Item 5" 
```

`dialog`支持`--file`选项：

```
 dialog --file /tmp/file.data 
```

但`whiptail`没有。它有类似的东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T17:45:40.147

我认为您需要手动构建参数列表。

```
menu_options=()
while read -r number text; do
    menu_options+=( ${number//\"} "${text//\"}" )
done < file.data

whiptail --menu "foo" 0 0 0 "${menu_options[@]}" 2>/tmp/out 
```

# c++ - Qt Creator 错误：LNK1123：转换为 COFF 期间失败：文件无效或损坏

> ID：15229988
> 
> 赞同：9
> 
> 时间：2013-03-05T17:12:36.890
> 
> 标签：c++, qt, qt-creator

当我尝试在**QT 5.0 Creator** (MSVC2010(x86)compiler 10.0) 上调试项目时，出现此错误：

**LNK1123：转换为 COFF 期间失败：文件无效或损坏**

我用谷歌搜索了一些解决方案，但仅适用于**Visual Studio 2012**，我需要为**QT Creator**解决此问题。

谢谢你。

*在这个问题之前，我遇到了 MSVC(x86)compiler 11.0 的问题，我安装了 MSVC2010(x86)compiler 10.0，现在我遇到了这个错误。*

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-10-05T10:38:27.067

`QMAKE_LFLAGS += /INCREMENTAL:NO`在文件中设置 `.pro`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-28T21:08:13.243

除此之外`QMAKE_LFLAGS += /INCREMENTAL:NO`，我“清理”并删除了输出目录以强制重新编译。然后构建了教程应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-17T09:40:23.127

我遇到了同样的问题，但通过在 Build -> "Open build and run kit selector" 中标记 MSVC2012 64 位版本而不是 32 位来解决。希望能帮助到你！

# c++ - 在不同平台/gcc 版本上使用 boost 时的奇怪行为

> ID：15229990
> 
> 赞同：0
> 
> 时间：2013-03-05T17:12:42.640
> 
> 标签：c++, boost

我正在使用 Boost 库实现一个程序。该程序在不同的平台上编译。我在 Mac OS 上没有问题。

相同的代码会在不同的平台上生成编译器错误。编译器不同：在 Mac OS 上我使用 gcc 4.2，在 Linux gcc 4.4 上，...

但是，有些错误很难解释。

我正在使用 Boost 1.5.3。例如，我有这个奇怪的消息：

```
In member function 'std::vector<std::basic_string<char, std::char_traits<char>,
std::allocator<char> >, std::allocator<std::basic_string<char, std::char_traits<char>,
std::allocator<char> > > >* FolderReader::get_filenames()':
/home/u/projects/prj/src/batch/folderreader.cpp:119: error: 
   'canonical' is not a member of 'bf' 
```

其中 bf 定义为`namespace bf = boost::filesystem;`

并`canonical()`以这种方式调用：`bf::canonical(pp).string()`with `pp`set:

```
for(bf::directory_iterator it = bf::directory_iterator(p); it != bf::directory_iterator(); it++) {
    bf::path pp = *it;
... 
```

但是，它应该根据这里的 API 工作：http: [//www.boost.org/doc/libs/1_53_0/libs/filesystem/doc/reference.html#canonical](http://www.boost.org/doc/libs/1_53_0/libs/filesystem/doc/reference.html#canonical)

* * *

注意：我刚刚纠正的其他一些错误属于这种类型。我不得不写：

```
obj.method1().method2() 
```

作为

```
class2 &obj2 = obj.method1();
obj2.method2(); 
```

否则我会收到一条错误消息。

那么......我的调用有什么问题`boost::filesystem::canonical(...)`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T19:09:52.790

我会确保您使用的是 3 版`boost::filesystem`，这是一个重大变化，包括添加了`canonical()`. 您可能需要升级您的 boost 安装或[定义 BOOST_FILESYSTEM_VERSION](http://www.boost.org/doc/libs/1_47_0/libs/filesystem/v3/doc/index.htm)以获得 V3。

即使您安装了 boost 1.53，您也需要[确保您的代码是针对它构建的](https://stackoverflow.com/questions/3708706/how-to-determine-the-boost-version-on-a-system)。您的操作系统可能有一个正在使用的默认版本。例如，Debian 挤压存储库（当前的稳定版本）在 boost 1.42 上，它根本不包含`boost::filesystem`V3。