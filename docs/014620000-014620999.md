# StackOverflow 问答 14620000-14620999

# iphone - 在 iphone 中以编程方式在 uiwebview 文本字段上创建 uitextfield

> ID：14620001
> 
> 赞同：0
> 
> 时间：2013-01-31T06:49:16.937
> 
> 标签：iphone, cordova, webview, uitextfield

我想在 uiWebview 上创建 uiTextField 覆盖，它位于 uiwebview 输入字段的相同位置。

即：当用户单击 webview 上可用的文本字段时，会创建新的 UITextfield 并显示在 html 文本字段上。编辑完成后，uitextfield 消失，然后将值放置在 webview 内的文本字段中。

我的应用程序在 Phonegap 架构中。请提供任何建议或示例。

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T06:58:04.207

取一个视图，将背景设置为 clearColor 并将 textField 放入其中，当您单击 webView TextField 时动态显示。因为 clearColor 感觉就像在 webView

# java - IIS windows 身份验证错误 (401.1)

> ID：14620002
> 
> 赞同：0
> 
> 时间：2013-01-31T06:49:17.667
> 
> 标签：java, sql-server, http, iis

我已经用 PHP 5.3 以及 SQL Server 配置了 IIS 8.0。

我不确定出了什么问题。当我在浏览器中输入 URL 时，我可以在 Web 浏览器中看到我的 JSON 字符串，

但是当我将它传递给下面的代码时，它返回给我

```
IIS 8.0 Detailed Error - 401.2 - Unauthorized 
```

我的 Eclipse 中出现 401.2 错误页面。

我正在通过 Windows 身份验证连接到数据库。因此，我在我的 IIS 中设置了启用 Windows 身份验证。除了 Windows 身份验证之外，我无法进行任何其他身份验证，那么我的 JSONstring 也根本不会从浏览器返回。在这种情况下。

我已尝试以下 URL 中提到的解决方案

```
http://support.microsoft.com/kb/942043 
```

问题依然存在

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;
import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.params.CoreProtocolPNames;

public class JSONTester {

    /**
     * @param args
     * @throws Exception 
     */
    public static void main(String[] args) 
    {
        InputStream is = null;
        String json = "";

        try 
        {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost("http://localhost/hive/get_all_products.php");
            httpPost.getParams().setBooleanParameter(CoreProtocolPNames.USE_EXPECT_CONTINUE, false);
            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();           

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            System.out.println(e.toString());
        }
        System.out.println(json);
    }
} 
```

任何帮助都会很棒。

谢谢 ！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:41:02.633

确保您进行身份验证的帐户有权访问网站目录中的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T08:37:30.730

Internet Explorer 是唯一使用开箱即用的集成模式进行 NTLM 身份验证的浏览器，这就是您的 URL 在您的“浏览器”中工作的原因。您的 Java HttpClient 必须明确地进行身份验证并回答来自服务器的 NTLM 质询。请参阅[HttpClient NTLM 身份验证](http://hc.apache.org/httpclient-3.x/authentication.html#NTLM)：

> NTLM 是 HttpClient 支持的最复杂的身份验证协议。它是由 Microsoft 设计的专有协议，没有公开可用的规范... NTLM 身份验证**要求 NTCredentials 实例可**用于服务器的域名或默认凭据。请注意，由于 NTLM 不使用领域的概念，因此 HttpClient 使用服务器的域名作为领域的名称。另请注意，提供给 NTCredentials 的用户名不应以域为前缀 - 即：“adrian”是正确的，而“DOMAIN\adrian”是不正确的......
> HttpClient 对早期版本 NTLMv1 提供有限的支持NTLM 协议。**HttpClient 根本不支持 NTLMv2**。

重要的是 HttpClient 不**支持**集成身份验证。您必须提供显式凭据，这使得它始终会探查不良做法，因为需要显式提供帐户密码。确保您不存储它而是向用户询问它，这与 Firefox 在访问请求 NTLM 质询的站点时所做的非常相似。

阅读[NTLM 身份验证协议和安全支持提供程序](http://davenport.sourceforge.net/ntlm.html)了解更多详细信息。

# drupal - 管理员无法在 drupal 7 中搜索

> ID：14620003
> 
> 赞同：0
> 
> 时间：2013-01-31T06:49:25.013
> 
> 标签：drupal, drupal-7

我在我的 drupal 7 站点中使用搜索模块。但是当我以管理员身份登录并搜索某些内容时，出现错误

```
"The form has become outdated. Copy any unsaved work in the form below and then reload this page." 
```

如果它没有登录，它工作正常。为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T20:58:32.053

听起来您正在使用 Finder 模块？ [http://drupal.org/project/finder](http://drupal.org/project/finder)

似乎问题队列中充满了与该消息相关的信息，这是一个包含有用信息的示例。

[http://drupal.org/node/1383918](http://drupal.org/node/1383918)

如果您能提供更多信息，我将很乐意提供帮助

# asp.net - 我如何创建一个 web 服务，它在 asp.net 的数据库中定期检查一些表？

> ID：14620013
> 
> 赞同：2
> 
> 时间：2013-01-31T06:49:56.470
> 
> 标签：asp.net

我想定期检查我的数据库表。那么我该如何创建一个网络服务以及如何配置它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T07:00:47.380

基本上您需要的是始终运行的东西，因此可以定期调用。

有很多方法可以做到这一点

1.  （因此从 ASP.NET 开始）您可以创建一个 Windows 服务，并将此服务托管在您的服务器上，因为服务器始终在运行，此 Windows 服务将向您的 Web 服务发出请求，更新数据库或您想要的任何水

2.  您可以使用 SQL 作业来执行此操作。您可以通过 SSIS（Sql Server 集成服务）包从作业中调用 Web 服务。这些包本质上非常健壮，它们几乎可以执行您希望它们执行的任何数据库活动，包括 Web 服务请求。

3.  最后，您可以使用第三方工具，例如 Quartz.Net

# 参考：

1.  [这](https://stackoverflow.com/questions/5470445/how-to-call-webservice-from-windows-service)就是您可以通过 Windows 服务调用 Web 服务的方式。
2.  [这](https://stackoverflow.com/questions/8691964/how-to-call-a-web-service-asmx-or-a-wcf-service-svc-via-ssis-package)就是您可以通过 ssis 包调用 Web 服务的方式。
3.  [这](http://blog.sqlauthority.com/2011/05/23/sql-server-running-ssis-package-in-scheduled-job/)就是如何将 SSIS 包集成到 SQL 作业中
4.  [这](http://www.codeproject.com/Articles/3990/Simple-Windows-Service-Sample)就是创建 Windows 服务的方法
5.  [这](http://www.codeproject.com/Articles/218914/Steps-to-Create-your-First-SSIS-Package)是创建 SSIS 包的方法
6.  [这](http://www.google.com)就是你如何获得几乎任何东西的答案/教程

# 例子：

所有这些中最简单的将是 Windows 服务。制作 Windows 服务并将其托管在机器（服务器）上非常容易，使用给定的链接之一（特别是最后一个链接）。通常，在 Windows 服务中，您会在事件中执行一些活动`OnStart`。您可以在其中放置一个计时器，`OnStart`然后`TimerTick()`您可以请求您的网络服务。

像这样的东西：

```
class Program : ServiceBase
    {
        System.Timers.Timer timer;

        static void Main(string[] args)
        {
            ServiceBase.Run(new Program());
        }
        public Program()
        {
            this.ServiceName = "My Service";
        }
        protected override void OnStart(string[] args)
        {
            base.OnStart(args);
            InitializeTimer();

        }

        protected override void OnStop()
        {
            base.OnStop();

            //TODO: clean up any variables and stop any threads
        }

        protected void InitializeTimer()
        {
            try
            {
                if (timer == null)
                {
                    timer = new System.Timers.Timer();
                    timer.Enabled = true;
                    timer.AutoReset = true;
                    timer.Interval = 60000 * 1;
                    timer.Enabled = true;
                    timer.Elapsed += timer_Elapsed;
                }

            }
            catch (Exception ex)
            {
                Utility.WriteLog("Exception InitialiseTimer : " + ex.Message.ToString());
            }
            finally
            {
            }
        }

        protected void timer_Elapsed(object source, System.Timers.ElapsedEventArgs e)
        {

            TimerTick();
            timer.Interval = 60000 * Convert.ToDouble(ConfigurationManager.AppSettings["TimerInerval"]);
        }

        private void TimerTick()
        {
            try
            {
                DownloadFromFTPandValidate objDownLoadandValidate = new DownloadFromFTPandValidate();
                objDownLoadandValidate.ProcessMain();
            }
            catch (Exception ex)
            {
                Utility.WriteLog("Exception InitialiseTimer : " + ex.Message.ToString());
            }
        }
    } 
```

在这里，类`DownloadFromFTPandValidate`将代码包装到 db 活动中。它给你一个想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T06:54:50.633

您将需要定期任务的作业调度程序。我给你推荐一个好的。查看此链接：http: [//quartznet.sourceforge.net/](http://quartznet.sourceforge.net/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T07:00:21.013

为什么不在你的表上使用一个触发器，一旦数据被修改，它就会运行一个存储过程，然后使用[xp_cmdshell](http://msdn.microsoft.com/en-us/library/aa260689%28SQL.80%29.aspx)从你的存储过程中访问命令行，这样你就可以运行例如批处理文件或其他任何东西。

# graph - orientDB中的嵌套记录和查询相同

> ID：14620016
> 
> 赞同：1
> 
> 时间：2013-01-31T06:50:06.190
> 
> 标签：graph, gremlin, orientdb

我需要存储一个带有顶点和边的图。我的用例如下：

每个顶点具有以下属性。

有一些基本属性，如姓名、年龄等，然后有一些记录类型的属性

```
Prop1 Prop2 Prop3 Prop4 Pro5
"xyz"  "1"   "2"  "ha"   7
"abc"  "1"  "3"   "aks" 8 
```

注意：这是只有一个顶点的属性。这些是嵌套属性的一种。嵌套属性是关系数据库中的一种记录。

1）现在我想在这些嵌套属性/记录上触发类似 SQL 的查询。这可能吗？例如，仅当 Prop2="1" 时才查找 Prop5 的每个顶点值。这些是一种关系数据库查询。

Eg2：计算 Prop5 值 = 7 的嵌套记录数

OrinetDB 是否支持此功能？如果是，如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:06:36.527

您可以在记录中嵌入记录。如果要嵌入多个记录，请使用 EMBEDDEDMAP、EMBEDDEDSET 或 EMBEDDEDLIST。要查询它，您可以执行以下操作：

```
select Prop5 from blabla where embeddedProperties contains ( Prop2 = '1' ) 
```

假设 EmbeddedProperties 它是嵌入记录的列表 (EMBEDDEDLIST)。

# java - 设计询价：在 Singleton、Factory 等之间进行选择

> ID：14620018
> 
> 赞同：1
> 
> 时间：2013-01-31T06:50:15.543
> 
> 标签：java, design-patterns, singleton, factory

我读过这本书*First Java: Design Patterns*并且是新手。

我制作自己的游戏引擎只是为了练习，我正在使用单例模式（我知道这对你们大多数人来说是一种罪过）来创建独特的类，例如：InputManager、ScreenManager、GameManager 等。我真的觉得它很有用，但是我不想逆潮流而动。

使用工厂方法创建这些类（可能将它们创建为内部类）然后将这些对象传递给需要它们的任何类是否更明智？

这也是坏习惯吗？

我只是想确保这些独特的类有一个实例，并且只有一种访问它们的方法。

也许是这样的：

```
public final class Factory(){
private static final InputListener inputlst = new InputListener();  
private static final Screen window = new Screen();
private static final GameManager gameManager = new GameManager();
public Factory(){
}
public static InputListener getInputListener(){
    return inputlst;
}
public static Screen getWindow(){
    return window;
}
private static class InputListener implements KeyListener, MouseListener, MouseMotionListener, MouseWheelListener{      
}
private static class Screen extends JFrame{
}
private static class GameManager{
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T06:54:41.817

> 我只是想确保这些独特的类有一个实例，并且只有一种访问它们的方法。

对我来说听起来像是单例模式：类中的静态访问器返回该类的单个实例。

除非您发现绝对需要，否则不要尝试使用内部类/传递事物使事情变得过于复杂。请参阅[单例模式和工厂模式之间的区别，](https://stackoverflow.com/questions/2094211/difference-between-singleton-and-factory-pattern)以获取可能对您有所帮助的进一步阅读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T07:15:35.410

如果你想拥有这些唯一类的一个实例，那么单例就是你的模式，它有一些方法，比如 getInstance 等。

工厂模式是一种创建和返回不同类型的新对象，但从同一个子类扩展而来的模式。这是一种抽象类实例化的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T07:20:11.473

坦率地说，模式的存在是有原因的。原因很简单。您希望将来在您的代码中发生什么变化。没有什么像`good practice to use patterns`. 您使用您期望更改的位置，根据您期望更改的位置，您需要将更改的部分取出并与保持不变的部分分开。当你这样做时，这些模式可以帮助你理解。

没有单身不是邪恶的。它的用法是邪恶的。Singleton 是一种奇妙的模式，用于解决 OOP 和 OOAD 的一个非常独特的问题。

工厂不能代替 SINGLETON。两者都有非常独特的主张。谁知道呢，如果您花时间仔细了解您的需求（和未来的需求），您可能会意识到您需要同时使用这两者。您可能只需要一个工厂，并且可能需要将该工厂设为单例。

`Understand the change, the future change and separate out what changes from what remains constant`

# asp.net-mvc-3 - 我们可以在主视图上多次调用单个局部视图吗？

> ID：14620026
> 
> 赞同：0
> 
> 时间：2013-01-31T06:50:45.980
> 
> 标签：asp.net-mvc-3

我正在处理仪表板。我想要4个部分视图。所有部分视图都显示相同类型的数据，但标准不同。我的仪表板包含：1) 最近的请求 2) 待处理的请求 3) 已批准的请求 4) 高优先级请求 所有视图都包含诸如 ID、客户姓名、员工姓名、请求日期等数据。我只是想知道我可以在主视图上多次使用单个局部视图（因为所有视图都有相同的模型数据）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T06:59:38.790

是的，您可以在主视图上多次使用单个局部视图，将参数传递给控制器​​操作，`ViewDataDictionary`以区分您的案例中的局部视图类型 1) 最近的请求 2) 待处理的请求 3) 已批准的请求 4) 高优先级请求。

你需要为此有共同的视图模型

# iphone - UIAlertView 在数据上传之后而不是在开始之前

> ID：14620027
> 
> 赞同：0
> 
> 时间：2013-01-31T06:50:47.477
> 
> 标签：iphone, uialertview, uiactivityindicatorview

我正在显示活动视图，但仅在将数据上传到服务器后才显示可能是由于主线程停止，是否有任何方法可以在数据上传时显示此活动。两者同时。

```
 -(IBAction)startSyncButtonAction{

UIAlertView* alert= [[UIAlertView alloc] initWithTitle:@"Loading\nPlease Wait..." message:nil delegate:self cancelButtonTitle:nil otherButtonTitles: nil];
[alert show];

UIActivityIndicatorView *indicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];

indicator.center = CGPointMake(150, 100);
[indicator startAnimating];
[alert addSubview:indicator];

CereniaAppDelegate *appDelegate = (CereniaAppDelegate *)[[UIApplication sharedApplication] delegate];

for (int i=0; i<[appDelegate.coffeeArray count]; i++) {

Coffee *coffeeObj = [appDelegate.coffeeArray objectAtIndex:i];

    int mycount=[appDelegate.coffeeArray count];
    NSLog(@"My Array count is %d",mycount);

NSString*device_Id=coffeeObj.device_Id;
NSString*R1=coffeeObj.R1;
NSString*R2=coffeeObj.R2;
NSString*R3=coffeeObj.R3;
NSString*R4=coffeeObj.R4;
NSString*R5=coffeeObj.R5;
NSString*R6=coffeeObj.R6;
NSString*R7=coffeeObj.R7;
NSString*R8=coffeeObj.R8;
NSString*R9=coffeeObj.R9;
NSString*R10=coffeeObj.R10;
NSString*R11=coffeeObj.R11;
NSString*R12=coffeeObj.R12;
NSString*R13=coffeeObj.R13;
NSString*R14=coffeeObj.R14;     

NSString*update_date_time=coffeeObj.update_date_time;

    NSString*teritory1=coffeeObj.teritory;

    int mycount1=[appDelegate.coffeeArray count];

    NSLog(@"My Array After delete is %d",mycount1);

    NSLog(@"device_Id%@",device_Id);
    NSLog(@"R1%@",R1);
    NSLog(@"R2%@",R2);
    NSLog(@"R3%@",R3);
    NSLog(@"R4%@",R4);
    NSLog(@"R4%@",R5);
    NSLog(@"R4%@",R6);
    NSLog(@"R4%@",R7);
    NSLog(@"R4%@",R8);
    NSLog(@"R4%@",R9);
    NSLog(@"R4%@",R10);
    NSLog(@"R4%@",R11);
    NSLog(@"R4%@",R12);
    NSLog(@"R4%@",R13);
    NSLog(@"R4%@",R14);

    NSLog(@"update_date_time%@",update_date_time);

    NSString *post =[[NSString alloc] initWithFormat:@"device_Id=%@&R1=%@&R2=%@&R3=%@&R4=%@&R5=%@&R6=%@&R7=%@&R8=%@&R9=%@&R10=%@&R11=%@&R12=%@&R13=%@&R14=%@&update_date_time=%@&teritory1=%@",device_Id,R1,R2,R3,R4,R5,R6,R7,R8,R9,R10,R11,R12,R13,R14,update_date_time,teritory1];

    NSLog(post);
    NSURL *url=[NSURL URLWithString:@"http://celeritas-solutions.com/pah_brd_v1/pfizersurvey/SyncSurveySTD.php"];
    NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
    NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init] ;
    [request setURL:url];
    [request setHTTPMethod:@"POST"];
    [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
    [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
    [request setHTTPBody:postData];

    NSError *error;
    NSURLResponse *response;
    NSData *urlData=[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
    NSString *data=[[NSString alloc]initWithData:urlData encoding:NSUTF8StringEncoding];
    NSLog(@"%@",data);

      }

for (int i=0; i<[appDelegate.coffeeArray count]; i++) {

    Coffee *coffeeObj = [appDelegate.coffeeArray objectAtIndex:i];

     [appDelegate removeCoffee:coffeeObj];

}

[alert dismissWithClickedButtonIndex:0 animated:YES];

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:24:34.607

您可以将警报和上​​传代码放在主线程上，因此当在另一个线程上打开对上传方法的警报调用（比如说（void）uploadData）时。您的代码只是卡在 UI 上，直到所有数据上传完成，然后 UI 可用于警报。

在操作 -(IBAction)startSyncButtonAction 中，调用警报和 UI 内容：

```
UIAlertView* alert= [[UIAlertView alloc] initWithTitle:@"Loading\nPlease Wait..." message:nil delegate:self cancelButtonTitle:nil otherButtonTitles: nil];
[alert show];

UIActivityIndicatorView *indicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];

indicator.center = CGPointMake(150, 100);
[indicator startAnimating];
[alert addSubview:indicator];

CereniaAppDelegate *appDelegate = (CereniaAppDelegate *)[[UIApplication sharedApplication] delegate];

for (int i=0; i<[appDelegate.coffeeArray count]; i++) {

Coffee *coffeeObj = [appDelegate.coffeeArray objectAtIndex:i];

    int mycount=[appDelegate.coffeeArray count];
    NSLog(@"My Array count is %d",mycount);

NSString*device_Id=coffeeObj.device_Id;
NSString*R1=coffeeObj.R1;
NSString*R2=coffeeObj.R2;
NSString*R3=coffeeObj.R3;
NSString*R4=coffeeObj.R4;
NSString*R5=coffeeObj.R5;
NSString*R6=coffeeObj.R6;
NSString*R7=coffeeObj.R7;
NSString*R8=coffeeObj.R8;
NSString*R9=coffeeObj.R9;
NSString*R10=coffeeObj.R10;
NSString*R11=coffeeObj.R11;
NSString*R12=coffeeObj.R12;
NSString*R13=coffeeObj.R13;
NSString*R14=coffeeObj.R14;     

NSString*update_date_time=coffeeObj.update_date_time;

    NSString*teritory1=coffeeObj.teritory;

    int mycount1=[appDelegate.coffeeArray count];

    NSLog(@"My Array After delete is %d",mycount1);

    NSLog(@"device_Id%@",device_Id);
    NSLog(@"R1%@",R1);
    NSLog(@"R2%@",R2);
    NSLog(@"R3%@",R3);
    NSLog(@"R4%@",R4);
    NSLog(@"R4%@",R5);
    NSLog(@"R4%@",R6);
    NSLog(@"R4%@",R7);
    NSLog(@"R4%@",R8);
    NSLog(@"R4%@",R9);
    NSLog(@"R4%@",R10);
    NSLog(@"R4%@",R11);
    NSLog(@"R4%@",R12);
    NSLog(@"R4%@",R13);
    NSLog(@"R4%@",R14);

    NSLog(@"update_date_time%@",update_date_time); 
```

在对另一个线程中的方法的调用结束时

```
// Perform all the data initializations on a new thread
[NSThread detachNewThreadSelector:@selector(uploadData:) toTarget:self withObject:nil]; 
```

然后你需要另一种方法

```
 -(void) uploadData:(id) obj 
{
 NSLog(post);
    NSURL *url=[NSURL URLWithString:@"http://celeritas-solutions.com/pah_brd_v1/pfizersurvey/SyncSurveySTD.php"];
    NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
    NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init] ;
    [request setURL:url];
    [request setHTTPMethod:@"POST"];
    [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
    [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
    [request setHTTPBody:postData];

    NSError *error;
    NSURLResponse *response;
    NSData *urlData=[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
    NSString *data=[[NSString alloc]initWithData:urlData encoding:NSUTF8StringEncoding];
    NSLog(@"%@",data);

      }

for (int i=0; i<[appDelegate.coffeeArray count]; i++) {

    Coffee *coffeeObj = [appDelegate.coffeeArray objectAtIndex:i];

     [appDelegate removeCoffee:coffeeObj];
[self performSelectorOnMainThread:@selector(dataDoneLoading:) withObject:_photos waitUntilDone:NO];
} 
```

并将所有上传代码放在那里。最后“dataDoneLoading”再次填充主线程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T08:52:29.513

采用

[self performSelector:@selector(displayAlertView) withObject:nil afterDelay:0.1];

方法。

# php - 如果只有用户名可用，我想在 php 中启用表单字段，否则字段应保持禁用状态

> ID：14620029
> 
> 赞同：-2
> 
> 时间：2013-01-31T06:50:54.457
> 
> 标签：php, javascript, html

如果只有用户名可用，我想在 php 中启用表单字段，否则字段应保持禁用状态。

我怎样才能做到这一点 ？

请看一下[这个](http://hannahsclinic.com/salaamforex/registration.php)页面。任何人都可以帮忙吗？

代码：

```
<form action="" method="post" name="sampleform" id="form1">
                            <input name="uname" type="text" id="uname" class="uname" style="text-transform:lowercase;" />
                            <span class="req">*</span>
                        <input type="submit" name="chkuserid" value="Check User ID availability" id="chkuserid" class="btn" style="width:200px;" />
       <?php              
          $con=mysql_connect("localhost","***","****")or die("Unable to connect");

          mysql_select_db("****_salaam",$con)or die("Invalid");                  
       if(isset($_POST['chkuserid']))
{ 

     $nmu=$_POST['uname'];
    $sql = mysql_query("SELECT * FROM member_reg where unm='$nmu'");
    if(mysql_num_rows($sql)>0)
    {

      echo "Username already existing";

   ob_flush();

    }
    else
    {
    echo "Username available";
    }

}
   ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T06:59:57.573

只需在 PHP 中运行 if else 条件，它就会起作用。

```
if ($username == '$name')
{
your active form 
}

else
{
your disabled form 
} 
```

为此，您需要获取用户名/ID 或任何独特的东西来识别用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T07:01:04.837

首先，您使用 ajax 满足您的请求并获取有关用户名的信息。

默认情况下，输入为

```
 disabled="true" 
```

如果用户名可用，那么您并启用其他输入。例如：

```
document.getElementById('uniqueId').disabled = false; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T06:54:27.983

这是使用 ajax 完成的。

当用户单击 checkAvailabilty 时，我们向服务器发送一个 ajax 请求。服务器将返回带有 true 或 false 的 json。

根据这一点，我们可以显示用户名是否可用。

同样，如果来自服务器的响应 json 为真，您将启用其他字段。

**这是一个很好的教程。您可以阅读此内容以获取更多信息 [http://www.tizag.com/ajaxTutorial/](http://www.tizag.com/ajaxTutorial/)**

**当用户在您的网站上注册时，请不要忘记添加服务器端验证。客户端验证不可信。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T06:54:59.263

您将使用 ajax 请求，并且在请求成功时（用户名可用），您需要更改字段的默认视图状态。

我猜这很简单，你在找代码吗

# c++ - istringstream() （可能）内存泄漏

> ID：14620034
> 
> 赞同：0
> 
> 时间：2013-01-31T06:51:13.953
> 
> 标签：c++, file, memory-management, readfile, istringstream

假设您想从大型文本文件（~300mb）读取数据到向量数组：（`vector<string> *Data`假设列数已知）。

```
//file is opened with ifstream; initial value of s is set up, etc...

Data = new vector<string>[col];
string u;
int i = 0;

do
{       
    istringstream iLine = istringstream(s);

    i=0;
    while(iLine >> u)
    {
        Data[i].push_back(u);
        i++;
    }
}
while(getline(file, s)); 
```

此代码适用于小文件（<50mb），但读取大文件时内存使用量呈指数增长。我很确定问题在于`istringstream`每次循环创建对象。但是，`istringstream iLine;`在两个循环之外定义并将每个字符串放入流中`iLine.str(s);`并在内部 while-loop ( ) 之后清除流`iLine.str(""); iLine.clear();`也会导致相同的内存爆炸顺序。出现的问题：

1.  为什么`istringstream`会这样；
2.  如果是预期行为，如何完成上述任务？

谢谢

编辑：关于第一个答案，我稍后在代码中清理了数组分配的内存：

```
for(long i=0;i<col;i++)
    Data[i].clear();
delete []Data; 
```

完整的编译就绪代码（添加标题）：

```
int _tmain(int argc, _TCHAR* argv[])
{
ofstream testfile;
testfile.open("testdata.txt");

srand(time(NULL));

for(int i = 1; i<1000000; i++)
{
    for(int j=1; j<100; j++)
    {
        testfile << rand()%100 << " ";
    }

    testfile << endl;
}

testfile.close();

vector<string> *Data;

clock_t begin = clock();

ifstream file("testdata.txt"); 

string s;

getline(file,s);

istringstream iss = istringstream(s);

string nums;

int col=0;

while(iss >> nums)
{
    col++;
}

cout << "Columns #: " << col << endl;

Data = new vector<string>[col];

string u;
int i = 0;

do
{

    istringstream iLine = istringstream(s);

    i=0;

    while(iLine >> u)
    {
        Data[i].push_back(u);
        i++;

    }

}
while(getline(file, s));

cout << "Rows #: " << Data[0].size() << endl;

for(long i=0;i<col;i++)
        Data[i].clear();
    delete []Data;

clock_t end = clock();

double elapsed_secs = double(end - begin) / CLOCKS_PER_SEC;

cout << elapsed_secs << endl;

getchar();
return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:15:48.810

我严重怀疑这不是 istringstream 问题（尤其是考虑到您在循环外使用 iLine 构造函数的结果相同）。

这可能是 std::vector 的正常行为。为了测试这一点，你如何运行完全相同的行，但注释掉：`Data[i].push_back(u);`. 看看你的记忆是否以这种方式增长。如果没有，那你就知道问题出在哪里了。。

取决于您的库，vector::push_back 每次需要更多空间时都会将其容量扩大 1.5 倍（Microsoft）或 2 倍（glib）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T07:17:53.870

`vector<>`内存呈几何增长。一个典型的模式是它在需要增长时将容量翻倍。如果您的循环在这样的阈值之后立即结束，那么这可能会留下大量分配但未使用的额外空间。完成后，您可以尝试调用`shrink_to_fit()`每个向量。

此外，由 C++ 分配器（甚至是普通的`malloc()`）分配的内存通常不会返回给操作系统，而是留在进程内部的空闲内存池中。这可能导致进一步的明显增长。并且它可能导致结果`shrink_to_fit()`从过程之外是不可见的。

最后，如果您有很多小字符串（“2 位数字”），则`string`对象的开销可能相当大。即使实现使用小字符串优化，我也会假设一个典型的字符串使用不少于 16 或 24 个字节（大小、容量、数据指针或小字符串缓冲区）——在`size_type`64 位的平台上可能更多。对于 3 个字节的有效负载来说，这是一个很大的内存。

所以我假设你看到的正常行为`vector<>`

# web-scraping - 如何监控网站以查找特定标签内的更改？

> ID：14620041
> 
> 赞同：1
> 
> 时间：2013-01-31T06:51:43.753
> 
> 标签：web-scraping

我将准确解释我正在尝试做什么，也许有人可以告诉我一个简单的方法，我可以做到这一点。

我想跟踪在 Kickstarter 项目页面上承诺的金额。承诺的金额始终保持在某个标签内。我可以通过哪些方式以编程方式执行此操作？

我刚刚开始学习如何在网络上进行开发，所以这应该是一个很好的背景，可以让你更好地帮助我。（我已经学习了 C、Python、VB、JS、HTML/CSS 的点点滴滴）

有没有一种简单的黑客方法可以使用免费工具来做到这一点？我将如何独自完成这一切？进一步扩展这个想法，当金额超过预定义的阈值时，我将如何通知我的 android 设备？这是被称为刮擦的过程吗？我需要什么工具来完成这个任务？我需要使用什么语言？我需要自己的网络空间吗？

如果我最终将这个概念变成了一个 android 应用程序，有没有办法只加载网站的一小部分（甚至可能只是足够的源来获取我正在寻找的标签），这样我就可以获得我想要的数据页面，但不必浪费大量我的智能手机数据来加载我不想要的其余内容？

感谢您提供任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:11:07.020

我不熟悉 Kickstarter 的 API——[他们有吗？](https://stackoverflow.com/questions/12907133/does-kickstarter-have-a-public-api)- 但这是我解决这个问题的方法：

1.  您想定期“ping” Kickstarter 以获取信息。在 Android 上执行此操作的一种方法是使用[BuzzBox SDK](http://hub.buzzbox.com/android-sdk/)

2.  每次执行后台任务时：

    *   [使用 jQuery 将 Kickstarter 页面的一部分加载](http://api.jquery.com/load/)到您自己的 HTML 文档中。
    *   将其与阈值以及可能之前存储的值进行比较。`<=`除非你想通过解析和其他东西去保持肛门，否则基本应该是可行的。
    *   一旦金额更新，使用Android 中的[通知通知用户。](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)
3.  将所有这些包装到一个应用程序中。

# awk - awk 在文件中搜索一行

> ID：14620042
> 
> 赞同：0
> 
> 时间：2013-01-31T06:51:46.727
> 
> 标签：awk

我正在尝试在其他文件中查找 STRING 的出现：

首先，我准确地提取了我想要搜索的字符串：

```
grep STRING test.txt | cut -d"," -f3 | tr -d ' ' 
```

现在我继续在其他文件中搜索它 - 所以我的命令是：

```
grep STRING test.txt | cut -d"," -f3 | tr -d ' ' | awk '/$0/' temp.txt 
```

我得到 0 行输出 - 但手动比较我确实发现两个文件中共有的字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T07:28:19.590

你不能那样管。您需要使用子外壳；就像是：

```
grep $(grep STRING test.txt | cut -d"," -f3 | tr -d ' ') temp.txt 
```

或者，`awk`像这样使用：

```
awk -F, 'FNR==NR && /STRING/ { gsub(/ /,""); a[$3]; next } FNR!=NR { for (i in a) if ($0 ~ i) { print; next } }' test.txt temp.txt 
```

# iphone - 如何在从 Web 服务获取数据时在视图加载期间添加 activityIndi cator？

> ID：14620044
> 
> 赞同：-1
> 
> 时间：2013-01-31T06:51:47.543
> 
> 标签：iphone, ios, objective-c, ios6.1

我如何`UIActivityIndicatorView`在视图加载之前添加一个。我正在从**Web 服务器**获取数据。

**这是我的代码**

```
spinner=[[UIActivityIndicatorView alloc]initWithFrame:CGRectMake(225, 115, 30, 30)];
[spinner setBackgroundColor:[UIColor clearColor]];
[spinner setActivityIndicatorViewStyle:UIActivityIndicatorViewStyleGray];
[self.view addSubview:spinner];
[spinner startAnimating];

objCountryPreferences=[[CountryPreferences alloc]init];
objLanguagePreference=[[LanguagePreference alloc]init];
objMobilePrefixParser=[[MobilePrefixParser alloc]init]; 
```

**//这是调用不同的Web服务**

```
[objMobilePrefixParser getMobilePrefix];
[objLanguagePreference  languagePreference];
[objCountryPreferences getCountryIdArr]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T07:16:54.357

在单独的方法中添加 ActivityIndi​​cator 并使用它调用它

```
[self performSelector:@selector(addActivityIndicator) withObject:nil afterDelay:0.1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T07:18:00.340

你的意思是进度指示器没有动画。如果是，您需要在单独的线程中执行 startAnimating。[微调器 performSelector:@selector(startAnimating)]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T07:39:14.100

**创建微调器：**

```
 self.spinner=[[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
    self.spinner.frame=CGRectMake(152,183,60,60);
    // display spinner in StatusBar it Optional for you
    [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:YES];
    [self.spinner sizeToFit ];    
      /*-----------Change Size of UIActivityIndicatorView-------------*/
        self.spinner.transform = CGAffineTransformMakeScale(2, 2);
    [self.webView addSubview:self.spinner]; 
```

**使用 UIWebView 的 Delegate 方法：**

```
- (void)webViewDidStartLoad:(UIWebView *)webView
{
    [self.spinner startAnimating];
     // display  spinner in StatusBar it Optional for you
     [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:YES];
}

- (void)webViewDidFinishLoad:(UIWebView *)webView
{
    [self.spinner stopAnimating];
    // Remove  spinner in StatusBar it Optional for you
    [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO];

} 
```

# macos - osx 10.8.2 和 python 3.2.3 上的 Numpy

> ID：14620051
> 
> 赞同：1
> 
> 时间：2013-01-31T06:52:17.513
> 
> 标签：macos, python-3.x, numpy

我到底需要做什么才能让 numpy 工作？我读过它在 3.2.3 中受支持，并且它应该通过使用 setup.py 来工作。我在谈论 os_path 时遇到错误。有什么我想念的吗？

```
Here is the full traceback:

Python 3.2.3 (v3.2.3:3d0686d90f55, Apr 10 2012, 11:25:50) 
[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin
Type "copyright", "credits" or "license()" for more information.
>>> ================================ RESTART ================================
>>> 
Converting to Python3 via 2to3...
Traceback (most recent call last):
  File "/Users/cameron/Downloads/numpy-master/setup.py", line 214, in <module>
    setup_package()
  File "/Users/cameron/Downloads/numpy-master/setup.py", line 175, in setup_package
    __file__ = os.path.join(os.curdir, os.path.basename(__file__))
NameError: global name '__file__' is not defined
>>> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:43:44.640

尝试首先从头开始编译 Python（通过下载源代码），而不是使用 Apple 提供的那个。请参阅[相关 SciPy/Numpy 页面](http://www.scipy.org/Installing_SciPy/Mac_OS_X)上的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:09:09.073

您可能正在使用 Mac OS X 预装的 Python 版本。我强烈建议您使用所有组件（python、scipy、numpy 等）都构建为可以正常协同工作的发行版，例如[macports](http://www.macports.org)。Macports 是开源软件的包管理器，它会自动解析和安装依赖项。

安装 Macports 后，您唯一需要做的就是在命令提示符下键入“sudo port install py27-numpy”或“sudo port install py33-numpy”，具体取决于您喜欢使用 Python 2 还是 Python 3（有些包可能尚未在 Python3 上运行）。这将自动下载并安装正确版本的 python 以及 numpy 正常运行可能需要的所有其他软件包。

# android - 如何截取Android的Surface View？

> ID：14620055
> 
> 赞同：9
> 
> 时间：2013-01-31T06:52:26.600
> 
> 标签：android, screenshot, surfaceview

我想以编程方式截取我的游戏的屏幕截图，就像在 Eclipse DDMS 中一样。

通过此处提出的解决方案截取屏幕截图：[如何以编程方式在 Android 中截取屏幕截图？](https://stackoverflow.com/questions/2661536/how-to-programatically-take-a-screenshot-on-android)在大多数其他 SO 问题中，只有 View 元素可见，但 SurfaceView 不可见。

```
SCREENSHOTS_LOCATIONS = Environment.getExternalStorageDirectory().toString() + "/screenshots/";
// Get root view
View view = activity.getWindow().getDecorView().getRootView();
// Create the bitmap to use to draw the screenshot
final Bitmap bitmap = Bitmap.createBitmap(screenWidth, screenHeight, Bitmap.Config.ARGB_8888);
final Canvas canvas = new Canvas(bitmap);

// Get current theme to know which background to use
final Theme theme = activity.getTheme();
final TypedArray ta = theme
    .obtainStyledAttributes(new int[] { android.R.attr.windowBackground });
final int res = ta.getResourceId(0, 0);
final Drawable background = activity.getResources().getDrawable(res);

// Draw background
background.draw(canvas);

// Draw views
view.draw(canvas);

// Save the screenshot to the file system
FileOutputStream fos = null;
try {
    final File sddir = new File(SCREENSHOTS_LOCATIONS);
    if (!sddir.exists()) {
        sddir.mkdirs();
    }
    fos = new FileOutputStream(SCREENSHOTS_LOCATIONS
            + System.currentTimeMillis() + ".jpg");
    if (fos != null) {
        if (!bitmap.compress(Bitmap.CompressFormat.JPEG, 90, fos)) {
            Log.d("ScreenShot", "Compress/Write failed");
        }
        fos.flush();
        fos.close();
    }

} catch (FileNotFoundException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

在这方面的任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-05T10:08:23.613

我希望这对你也有用。这里与上述答案的差别不大，因为我在单击按钮后使用 glsurfaceview 拍摄屏幕截图。此图像存储在提到文件夹的 sdcard 中：sdcard/emulated/0/printerscreenshots/image/...images

```
 My Program :

 View view_storelayout ;
 view_storelayout = findViewById(R.id.gl_surface_view);

   button onclick() {

   view_storelayout.setDrawingCacheEnabled(true); 

view_storelayout.buildDrawingCache(true);

Bitmap bmp = Bitmap.createBitmap(view_storelayout.getDrawingCache());
view_storelayout.setDrawingCacheEnabled(false); // clear drawing cache
                ByteArrayOutputStream bos = new ByteArrayOutputStream(); 
                bmp.compress(CompressFormat.JPEG, 90, bos); 
                byte[] bitmapdata = bos.toByteArray();
                ByteArrayInputStream fis = new ByteArrayInputStream(bitmapdata);

                final Calendar c=Calendar.getInstance();
                 long mytimestamp=c.getTimeInMillis();
                String timeStamp=String.valueOf(mytimestamp);
                String myfile="hari"+timeStamp+".jpeg";

 dir_image=new  File(Environment.getExternalStorageDirectory()+
      File.separator+"printerscreenshots"+File.separator+"image");
                dir_image.mkdirs();

                try {
                    File tmpFile = new File(dir_image,myfile); 
                    FileOutputStream fos = new FileOutputStream(tmpFile);

                     byte[] buf = new byte[1024];
                        int len;
                        while ((len = fis.read(buf)) > 0) {
                            fos.write(buf, 0, len);
                        }
                            fis.close();
                            fos.close();
                } catch (FileNotFoundException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                }

     Toast.makeText(getApplicationContext(), "myPath:"
            +dir_image.toString(), Toast.LENGTH_SHORT).show();
                Log.v("hari", "screenshots:"+dir_image.toString());

  }

 Note :
          But, here i am faced one problem. In this surfaceview , i drawn line and circle
  at runtime. after drawn some objects, when i take screenshots , its stored only for
  black image like surfaceview is stored as an image.

 And also i want to store that surfaceview image as an .dxf format(autocad format).
 i tried to stored image file as an .dxf file format.its saved successfully in 
 autocad format. but, it cant open in autocad software to edit my .dxf file. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-16T14:22:32.057

大多数情况下，来自 Usman Kurd 答案的代码将不起作用。

除非您使用 Canvas 将软件中的 H.264 视频帧渲染到视图上，否则绘图缓存方法将不起作用（参见例如此答案）。

您无法从 SurfaceView 的 Surface 部分读取像素。基本问题是 Surface 是具有生产者-消费者接口的缓冲区队列，而您的应用程序位于生产者端。消费者，通常是系统合成器 (SurfaceFlinger)，能够捕获屏幕截图，因为它位于管道的另一端。

[截取 SurfaceView](https://stackoverflow.com/questions/25086263/take-screenshot-of-surfaceview/25086739#25086739)

# c# - 我应该如何从 UI 线程任务更新？

> ID：14620060
> 
> 赞同：9
> 
> 时间：2013-01-31T06:52:42.093
> 
> 标签：c#, .net, wpf, task-parallel-library, task

我的任务是执行一些繁重的工作。我需要将它的结果导向`LogContent`

```
Task<Tuple<SupportedComunicationFormats, List<Tuple<TimeSpan, string>>>>.Factory
    .StartNew(() => DoWork(dlg.FileName))
    .ContinueWith(obj => LogContent = obj.Result); 
```

这是属性：

```
public Tuple<SupportedComunicationFormats, List<Tuple<TimeSpan, string>>> LogContent
{
    get { return _logContent; }
    private set
    {
        _logContent = value;
        if (_logContent != null)
        {
            string entry = string.Format("Recognized {0} log file",_logContent.Item1);
            _traceEntryQueue.AddEntry(Origin.Internal, entry);
        }
    }
} 
```

问题是`_traceEntryQueue`数据绑定到 UI，当然我会在这样的代码上遇到异常。

所以，我的问题是如何让它正常工作？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-31T11:14:22.800

这是一篇好文章：[并行编程：任务调度程序和同步上下文](http://blogs.msdn.com/b/csharpfaq/archive/2010/06/18/parallel-programming-task-schedulers-and-synchronization-context.aspx)。

看看[Task.ContinueWith() 方法](http://msdn.microsoft.com/en-us/library/dd991174.aspx)。

例子：

```
var context = TaskScheduler.FromCurrentSynchronizationContext();
var task = new Task<TResult>(() =>
    {
        TResult r = ...;
        return r;
    });

task.ContinueWith(t =>
    {
        // Update UI (and UI-related data) here: success status.
        // t.Result contains the result.
    },
    CancellationToken.None, TaskContinuationOptions.OnlyOnRanToCompletion, context);

task.ContinueWith(t =>
    {
        AggregateException aggregateException = t.Exception;
        aggregateException.Handle(exception => true);
        // Update UI (and UI-related data) here: failed status.
        // t.Exception contains the occured exception.
    },
    CancellationToken.None, TaskContinuationOptions.OnlyOnFaulted, context);

task.Start(); 
```

由于 .NET 4.5 支持`async`/`await`关键字（另请参阅[Task.Run 与 Task.Factory.StartNew](http://blogs.msdn.com/b/pfxteam/archive/2011/10/24/10229468.aspx)）：

```
try
{
    var result = await Task.Run(() => GetResult());
    // Update UI: success.
    // Use the result.
}
catch (Exception ex)
{
    // Update UI: fail.
    // Use the exception.
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-31T07:06:58.897

您需要在 UI 线程上运行 ContinueWith -task。这可以使用 UI 线程的 TaskScheduler 和[ContinueWith -method 的重载版本来](http://msdn.microsoft.com/en-us/library/hh194761.aspx)完成，即。

```
TaskScheduler scheduler = TaskScheduler.Current;
...ContinueWith(obj => LogContent = obj.Result), CancellationToken.None, TaskContinuationOptions.None, scheduler) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T07:08:20.323

您可以使用`Dispatcher`调用 UI 线程上的代码。看一看文章[Working With The WPF Dispatcher](http://www.switchonthecode.com/tutorials/working-with-the-wpf-dispatcher)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-09T15:49:17.353

如果您使用的是 async/await，那么这里有一些示例代码，展示了如何安排任务在 GUI 线程上运行。将此代码放在所有 async/await 调用的堆栈底部，以避免 WPF 运行时抛出错误，代码不在 GUI 线程上执行。

适用于 WPF + MVVM，在 VS 2013 下测试。

```
public async Task GridLayoutSetFromXmlAsync(string gridLayoutAsXml)
{
    Task task = new Task(() => // Schedule some task here on the GUI thread );
    task.RunSynchronously();
    await task;
} 
```

# javascript - 如何将自定义按钮添加到 jquery datepicker showButtonPanel

> ID：14620063
> 
> 赞同：0
> 
> 时间：2013-01-31T06:52:52.500
> 
> 标签：javascript, jquery

> **可能重复：**
> [jquery datepicker 添加自定义按钮](https://stackoverflow.com/questions/9894032/jquery-datepicker-adding-custom-button)

我想在 showButtonPanal 中添加自定义按钮，用于清除或重置用户在 jquery DatePicker 的日期范围框中选择的日期

我的脚本就像

```
$(function() {
var fromDate = $("#fromDateId2").datepicker();
var toDate = $("#toDateId2").datepicker();
$('#fromDateId, #toDateId')
        .datepicker({
                    showOn : "both",
                    buttonImage : "<%=request.getContextPath()%>/tp/web/console/include/DatePickerJquery/DatePicker/date.png",
                    buttonImageOnly : true,
                    showButtonPanel: true,
                    beforeShow : customRange,
                    dateFormat : "<%=DateFormatUtil.getDateFormat(true).replaceAll("yyyy", "yy")%>",
                    firstDay : 1,
                    changeFirstDay : true

                });

}); 
```

# symfony - FosUser Bundle --- 将登录部分添加到注册页面

> ID：14620065
> 
> 赞同：1
> 
> 时间：2013-01-31T06:52:59.843
> 
> 标签：symfony, fosuserbundle

我想将登录部分添加到注册页面。基本上，这个想法是，当用户进入注册页面时，登录部分也将在同一页面上可用，以防用户意识到他已经有一个帐户。我正在尝试这个，但它不起作用......

//Registration_content.html.twig

```
<form action="{{ path('fos_user_registration_register') }}" {{ form_enctype(form) }} method="POST" class="fos_user_registration_register">

        {{ form_errors(form.email.first) }}
        {{ form_errors(form.plainPassword.first) }}

        {{ form_widget(form.email.first)}}
        {{ form_widget(form.email.second)}}

        <br />

        {{ form_widget(form.plainPassword.first) }}
        {{ form_widget(form.plainPassword.second) }}

        <br />

        {{ form_widget(form.country) }}

        <br />

        {% for choiceFormView in form.Position %}
            {{ form_widget(choiceFormView) }} {{ form_label(choiceFormView) }}<br />
        {% endfor %}

        {% for choiceFormView in form.notification %}
            {{ form_widget(choiceFormView) }} {{ form_label(choiceFormView) }}<br />
        {% endfor %}

        {{ form_rest(form) }}

    <div>
        <input type="submit" value="{{ 'registration.submit'|trans({}, 'FOSUserBundle') }}" />
    </div>
</form> 
```

我要添加到此页面的是登录页面内容。但当然它不起作用；

```
 {% block fos_user_content %}
    {% if error %}
        <div>{{ error|trans({}, 'FOSUserBundle') }}</div>
    {% endif %}

    <form action="{{ path("fos_user_security_check") }}" method="post">
        <input type="hidden" name="_csrf_token" value="{{ csrf_token }}" />

        <label for="username">{{ 'security.login.username'|trans({}, 'FOSUserBundle') }}</label>
        <input type="text" id="username" name="_username" value="{{ last_username }}" required="required" />

        <br>
        <br>

        <label for="password">{{ 'security.login.password'|trans({}, 'FOSUserBundle') }}</label>
        <input type="password" id="password" name="_password" required="required" />

        <input type="checkbox" id="remember_me" name="_remember_me" value="on" />
        <label for="remember_me">{{ 'security.login.remember_me'|trans({}, 'FOSUserBundle') }}</label>

        <input type="submit" id="_submit" name="_submit" value="{{ 'security.login.submit'|trans({}, 'FOSUserBundle') }}" />
    </form> 
```

解决此问题的正确方法是什么...我还将在许多页面上都有登录部分。所以真正的问题似乎是，我如何在其他页面上使用 fosuser 登录部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T07:25:33.647

就放

```
{% render "FOSUserBundle:Security:login" %} 
```

在您希望呈现登录表单的页面的任何模板中。

# jquery - 如何显示进度条加载完成所剩的时间？

> ID：14620066
> 
> 赞同：0
> 
> 时间：2013-01-31T06:53:11.627
> 
> 标签：jquery, html, progress-bar

我有一个起始值为 100 的 HTML5 进度条。单击该按钮时，其值将在 15 秒内减少为 0。我已经从互联网上找到的示例中修改了代码。它现在位于[JSFiddle](http://jsfiddle.net/A8ycL/1/)中。它现在显示进度条的百分比，但我希望它显示完成加载之前的剩余时间。我怎样才能做到这一点 ？

JS

```
$('#btnUpload').click(function() {
var time = 150; //15 secs
var bar = document.getElementById('progBar'),
    fallback = document.getElementById('downloadProgress'),
    loaded = 100;

var load = function() {
    loaded --;
    bar.value = loaded;

    /* The below will be visible if the progress tag is not supported */
    $(fallback).empty().append("HTML5 progress tag not supported: ");
    $('#progUpdate').empty().append(loaded + "% loaded");

    if (loaded <0) {
        clearInterval(beginLoad);
        $('#progUpdate').empty().append("Upload Complete");
        console.log('Load was performed.');
    }
};

var beginLoad = setInterval(function() {
    load();
}, time);

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:26:11.757

如果“它将在 15 秒内准确完成”。那[是你想要的](http://jsfiddle.net/A8ycL/5/)吗？就放

```
var t = time-(time/100)*(100-loaded);
$('#progUpdate').empty().append(Math.round(t/10) + " sec left"); 
```

反而

```
$('#progUpdate').empty().append(loaded + "% loaded"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T09:36:03.733

您可以将秒数附加到您的加载百分比。

```
$('#btnUpload').click(function() {
    var time = 150; //15 secs
    var bar = document.getElementById('progBar'),
        fallback = document.getElementById('downloadProgress'),
        loaded = 100,
        totalTime = 15000;

    var load = function() {
        loaded --;
        totalTime -= time;
        bar.value = loaded;

        /* The below will be visible if the progress tag is not supported */
        $(fallback).empty().append("HTML5 progress tag not supported: ");
        $('#progUpdate').empty().append(loaded + "% loaded. " + Math.ceil(totalTime/1000) + " seconds remaining");

        if (loaded <0) {
            clearInterval(beginLoad);
            $('#progUpdate').empty().append("Upload Complete");
            console.log('Load was performed.');
        }
    };

    var beginLoad = setInterval(function() {
        load();
    }, time);

}); 
```

# php - Freshbooks API 显示详细信息

> ID：14620071
> 
> 赞同：0
> 
> 时间：2013-01-31T06:53:42.900
> 
> 标签：php, freshbooks-api

我正在使用这里的 php 库，我有一个小问题。

要获取发票 118868 的一些信息，我可以这样做

```
<?php
$invoice_id=118868;

$invoice=$freshbooks->invoiceGet($invoice_id);
print_r($invoice);
?> 
```

这是 print_r 的输出

```
Class Object ( [@attributes] => stdClass Object ( [status] => ok ) [invoice] => stdClass Object ( [invoice_id] => 00000219023 [estimate_id] => stdClass Object ( ) [number] => 8822 [client_id] => 83 [contacts] => stdClass Object ( [contact] => stdClass Object ( [contact_id] => 0 ) ) [recurring_id] => stdClass Object ( ) [organization] => Jimmy Thwart [first_name] => stdClass Object ( ) [last_name] => stdClass Object ( ) [p_street1] => stdClass Object ( ) [p_street2] => stdClass Object ( ) [p_city] => stdClass Object ( ) [p_state] => stdClass Object ( ) [p_country] => stdClass Object ( ) [p_code] => stdClass Object ( ) [po_number] => 10002 [status] => sent [amount] => 16.90 [amount_outstanding] => 16.90 [paid] => 0.00 [date] => 2013-01-31 00:00:00 [notes] => stdClass Object ( ) [terms] => Your slot can only be secured upon payment. Any reservation made before payment will only be guaranteed for 2 days. [discount] => 0 [url] => https://example.freshbooks.com/view/vgPb2TNGCR7n8JV [auth_url] => https://example.freshbooks.com/invoices/219023 [links] => stdClass Object ( [client_view] => https://example.freshbooks.com/view/vgPb2TNGCR7n8JV [view] => https://example.freshbooks.com/invoices/219023 [edit] => https://example.freshbooks.com/invoices/219023/edit ) [return_uri] => stdClass Object ( ) [updated] => 2013-01-31 02:25:13 [currency_code] => SGD [language] => en [vat_name] => stdClass Object ( ) [vat_number] => stdClass Object ( ) [folder] => active [staff_id] => 1 [lines] => stdClass Object ( [line] => stdClass Object ( [line_id] => 1 [name] => Lady 1pax [description] => Services (1 pax) [unit_cost] => 16.90 [quantity] => 1 [amount] => 16.90 [tax1_name] => stdClass Object ( ) [tax2_name] => stdClass Object ( ) [tax1_percent] => 0 [tax2_percent] => 0 [compound_tax] => 0 [type] => Item ) ) [gateways] => stdClass Object ( [gateway] => stdClass Object ( [name] => PayPal ) ) ) ) 
```

我希望输出只能是 URL 而不是整个代码块。想要的输出：

```
https://example.freshbooks.com/view/vgPb2TNGCR7n8JV 
```

但是，它列出了发票的所有信息。如何仅获取发票 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:56:42.273

发票是一个类的实例。您应该像对待所有实例一样对待它。

要获取 URL 值，您可以执行以下操作：

```
<?php
$invoice_id=118868;

$invoice=$freshbooks->invoiceGet($invoice_id);
print $invoice->url;
?> 
```

或者您正在寻找另一个可能的值：

```
<?php
$invoice_id=118868;

$invoice=$freshbooks->invoiceGet($invoice_id);
print $invoice->links->client_view;
?> 
```

根据[官方 API doc](http://developers.freshbooks.com/docs/invoices/) `<url>`不再支持，因此您应该使用`<links>`“元素为您的客户提供发票的直接链接，以供编辑、客户查看和管理员查看”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T07:06:01.247

好吧，使用代码的输出，您可以看到其中的元素`$invoice`是什么。使用您需要的那个。

# php - 内部服务器错误 500 上传图片 iOS php

> ID：14620090
> 
> 赞同：-2
> 
> 时间：2013-01-31T06:55:10.363
> 
> 标签：php, objective-c, image, post

我读过很多人有同样的问题，都是相似的，并且与我的服务器设置有关，确保图像目录具有 755 权限，并且由于某种原因，我看到我的用户子文件夹设置为 777，我创建了php.ini 文件，我确保我的 upload_max_filesize 设置正确，并且我的 php.ini 具有正确的设置。我从许多不同的教程中尝试了几种不同的编码技术，都输出了相同的错误。

这是我的 NSlog 中的错误

```
myproject[11784:907] test <!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>500 Internal Server Error</title>
</head><body>
<h1>Internal Server Error</h1>
<p>The server encountered an internal error or
misconfiguration and was unable to complete
your request.</p>
<p>Please contact the server administrator,
 webmaster@myproject.com and inform them of the time the error occurred,
and anything you might have done that may have
caused the error.</p>
<p>More information about this error may be available
in the server error log.</p>
<p>Additionally, a 404 Not Found
error was encountered while trying to use an ErrorDocument to handle the request.</p>
</body></html> 
```

这是我的objective-c代码

```
- (void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
[self  dismissViewControllerAnimated:YES completion:NULL];

NSData *dataImage = UIImageJPEGRepresentation(image.image, 0.8f);
NSString *urlString = @"http://www.myproject.com/myphpscript.php";
NSString *filename = [NSString stringWithFormat:@"%@.jpg", [MyClass str]];
NSMutableURLRequest* request= [[NSMutableURLRequest alloc] init];
[request setURL:[NSURL URLWithString:urlString]];
[request setHTTPMethod:@"POST"];
NSString *boundary = @"---------------------------14737809831466499882746641449";
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
[request addValue:contentType forHTTPHeaderField: @"Content-Type"];
NSMutableData *postbody = [NSMutableData data];
[postbody appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[postbody appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"image\"; filename=\"%@.png\"\r\n", filename] dataUsingEncoding:NSUTF8StringEncoding]];
[postbody appendData:[@"Content-Type: application/octet-stream\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
[postbody appendData:[NSData dataWithData:dataImage]];
[postbody appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"%@\"\r\n\r\n", @"email"] dataUsingEncoding:NSASCIIStringEncoding]];
[postbody appendData:[[NSString stringWithFormat:@"%@",[MyClass str]] dataUsingEncoding:NSASCIIStringEncoding]];
[postbody appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[request setHTTPBody:postbody];
NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
NSString* returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];
NSLog(@"test %@",returnString);
} 
```

和我的 PHP

```
<?php
// removed connection 
$mysqli = new mysqli($host, $username, $password, $database);
if ($stmt = $mysqli->prepare("INSERT INTO `user` SET imagepath=? WHERE email=?")) 
{
    $stmt->bind_param('ss', $albumname, $email);

$uploaddir = 'images/users/';
$file = basename($_FILES['userfile']['name']);
$uploadfile = $uploaddir . $file;

if (move_uploaded_file($_FILES['userfile']['tmp_name'], $uploadfile)) {

}
$albumname = $uploadfile;
    $email = $_POST['email'];
    $stmt->execute();
    $stmt->close(); 
    }

else {
    printf("Prepared Statement Error: %s\n", $mysqli->error);
}

$mysqli->close();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:28:24.050

错误 500 是服务器端的错误。

我建议尝试从服务器上传到自身，这样您可能会获得更多信息什么是错的。还要检查您的 Web 服务器、nginx、appache 或您运行的任何东西的错误日志，在那里您会发现导致错误的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T07:29:33.660

虽然我无法仅从您的代码中看到 500 错误是什么，但我强烈建议您确保您的 PHP ini 文件启用了错误日志记录并查看日志文件。大多数情况下，500 错误是由 PHP 引擎中的运行时错误引起的，它将输出到日志文件，或者如果您启用了 display_errors，则会直接输出到浏览器。

一旦您可以读取日志文件，10 次中有 9 次错误很容易修复。

# qt - Qt 中的 Thunderbird 附加组件 - 可能吗？

> ID：14620094
> 
> 赞同：2
> 
> 时间：2013-01-31T06:55:46.037
> 
> 标签：qt, thunderbird

是否可以在 Qt 中为 Thunderbird 开发附加组件？

我知道可以用 C++ 开发一个，但我的想法是在 Qt 中开发接口（使用例如 QPainter），因为我想使用用这个框架编写的库。

*   如果是，您能否提供一些有关如何进行的信息或为我提供一个好的教程？
*   如果没有，是否有解决方法来实现 Thunderbird 和用 Qt 编写的程序之间的某种集成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:17:21.253

您可以检查这两个问题 - 它们是关于 firefix <-> qt，但如果它有效，它也应该在 TB 上执行：

*   [使用 Qt 制作 firefox 插件](https://stackoverflow.com/questions/7584858/making-firefox-addon-using-qt)
*   [在 Linux 上通过插件将 Qt 窗口嵌入到 firefox](https://stackoverflow.com/questions/5890224/embed-qt-window-into-firefox-via-plugin-on-linux)

也可以看看：

*   [http://doc.qt.digia.com/solutions/4/qtbrowserplugin/](http://doc.qt.digia.com/solutions/4/qtbrowserplugin/)
*   [https://sites.google.com/site/qtqmlbrowserplugin/home](https://sites.google.com/site/qtqmlbrowserplugin/home)

# android - 如何在我的 android 应用程序中仅查看桌面网站的特定部分

> ID：14620095
> 
> 赞同：2
> 
> 时间：2013-01-31T06:55:49.730
> 
> 标签：android, web-applications

我有一个桌面网站，其中有很多内容，但我只想在应用程序中显示我网站的特定部分，并删除所有不需要的内容。有什么办法可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:44:26.603

您必须为此进行不同的网站设计。您可以以 facebook.com 和 m.facebook.com 为例，从您的移动浏览器打开这两个网址，您将得到不同之处.. 两者的数据库将相同

# ruby - EM.next_tick 递归使用

> ID：14620098
> 
> 赞同：1
> 
> 时间：2013-01-31T06:56:11.343
> 
> 标签：ruby, eventmachine

```
# Spawn workers to consume items from the iterator's enumerator based on the current concurrency level.
def spawn_workers
  EM.next_tick(start_worker = proc{
    if @workers < @concurrency and !@ended
      # p [:spawning_worker, :workers=, @workers, :concurrency=, @concurrency, :ended=, @ended]
      @workers += 1
      @process_next.call
      EM.next_tick(start_worker)
    end
  })
  nil
end 
```

我从 EM-sychrony#fiberd_interator 使用的 EM interator 中读取了这部分代码。

我对Eventmachin有一些基本的想法，但是我对next_tick的这种递归用法不是很清楚，有人能给我解释一下吗？

在我看来，它就像一个循环，由 EM 处理，而不是“while”或“for”。我对吗？为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T09:28:53.320

这不是真正的递归调用，可以将其视为“安排稍后发生的过程”，

EventMachine 基本上是一个无限循环，它执行计划在循环的下一次迭代（下一个滴答声）中发生的事情，

把 next_tick 方法想象成一个命令队列机制，

spawn_workers 方法安排 start_worker 过程发生在事件循环的下一次迭代中。

在下一个 EM 循环`start_worker`中，将运行迭代 proc，并且`@process_next.call`会发生我假设会产生 worker，因此第一个 worker 被实例化，命令

```
 EM.next_tick(start_worker) 
```

安排相同的块在 EM 循环的下一次迭代中发生，直到所有工作人员都产生。

这意味着，例如，如果需要实例化 8 个工作人员，则在事件循环的接下来 8 个滴答声中一次生成一个工作人员

# mysql - 删除该键的记录后，自动重新分配 MySql 表中主键的值

> ID：14620099
> 
> 赞同：0
> 
> 时间：2013-01-31T06:56:11.997
> 
> 标签：mysql, database, phpmyadmin, primary-key, primary-key-design

我在 phpMyadmin 中使用 MySql。我有一个包含主键的表。这个主键是'userid'，它也是一个“自动增量”字段。该应用程序还具有删除具有“用户 ID”的特定用户的功能。因此，当我再次创建新用户时删除用户后，'userid' 将获得下一个整数的值。我希望表格考虑删除并分配主键值，已删除的数字..

示例：表中的 'userid' 值为 - 1,2,3,4,5,6,7.... 我删除了值为 3 的用户 ID。所以现在当我创建用户的下一条记录时，表应该使用用户 ID 值“3”，因为它不再使用。我怎么能在 phpmyadmin 中做到这一点？

我想这样做以保持用户 ID 的值最小。计数可能会达到用户 ID 的 5 位数值。因此，如果一个 2 位可以使用，因为它之前被删除，使用这个 2 位值将节省数据库的内存使用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-01T00:56:39.743

完全可以通过在下一次插入时明确提供不再使用的 ID 来分配它。AUTO_INCREMENT 仅在您不自己提供 id 时分配。

请确定该 ID 确实没有被使用，否则插入将失败。

话虽如此，我不鼓励这样做。我不是 100% 肯定，但我认为当你在 MySQL 中声明一个整数时，它需要整数空间，不管整数有多少位，但我愿意澄清这一点。无论如何，我相信可能使用更少空间的微小好处不值得通过修改您的 ID 来冒险失败。

以我的经验，这些小事以后往往会困扰你，我看不到真正的好处。

如有必要，我建议寻找其他方法来提高内存使用率。

# testing - 计算决策覆盖率

> ID：14620100
> 
> 赞同：1
> 
> 时间：2013-01-31T06:56:21.227
> 
> 标签：testing, code-coverage

我正在为 ISTQB 考试学习，但无法解决这个问题：

```
if (x > y)
     print (x)
else if (x < y)
     print (y)
else
     print (x,y) 
```

据说有3个决策和5个分支。3和5？当第一个“If”为假（然后“else”适用）以及“else if”为假时，我是否应该考虑一个分支，当“else”再次适用时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T07:10:45.957

是的，总共5个分支。

```
 if
             /  \
          false true
          else 
           if
          /  \
       false true
       else 
        | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-17T09:47:13.763

```
Branch Coverage reveals, if all branches were executed. (For example, an if-instruction has two branches, the then-branch and the else-branch.) 
```

在您的代码中，三个决策和 5 个分支。stmt 1 如果两个分支为真或假 stmt 3 else 如果两个分支为真或假 stmt 5 else 一个分支

所以传递像 x = 2,1,2 y = 1,2,2 这样的值

这样就涵盖了所有三个决策和 5 个分支。

希望这可以帮助你

# c# - 设计用于访问接受 xml 请求的 WebService 的代码

> ID：14620103
> 
> 赞同：0
> 
> 时间：2013-01-31T06:56:41.443
> 
> 标签：c#, .net, xml, web-services

我想创建访问只有 1 种方法的 WebService 的 C# 代码：

```
public string HandleRequest(string xml). 
```

请求本身以 xml 格式发送，其中 xml 内容指定要执行的操作类型以及必需/可选参数。

来自服务的响应也以 xml 格式返回，并且每个发送的请求类型可能不同。

我想设计一个有助于与此服务交互的解决方案，这将使我能够：

1.  从给定参数（动作类型、其他可选参数等）动态生成 xml。目前，xml 是从已经创建的文件中加载的
2.  以简单的方式解析响应（从中创建强类型对象？）

这样做有什么好的解决方案？我发现很难想出一个，因为请求/响应 xml 是动态的，并且可能会因调用而异。

一些附加信息：

1.  该服务基于 Java，托管在 Tomcat (Axis 1.2) 下
2.  该服务没有 wsdl 文档（即使有，我也无法自动生成一些强类型的请求/响应类，因为服务本身只接收和输出 XML 而不是某些复杂类型）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T08:42:01.643

这听起来像 XML-RPC 实现可能就是您所追求的。来自[维基百科](http://en.wikipedia.org/wiki/XML-RPC)；

> XML-RPC 通过向实现该协议的服务器发送 HTTP 请求来工作。在这种情况下，客户端通常是想要调用远程系统的**单个方法的软件。**可以将多个输入参数传递给远程方法，返回一个返回值。参数类型允许将参数嵌套到映射和列表中，因此可以传输更大的结构。因此 XML-RPC 可用于传输对象或结构作为输入和输出参数。

Wikipedia 还列出了该协议的一些[Java 实现](http://en.wikipedia.org/wiki/XML-RPC#Java)。

虽然，我没有专门使用它，但我使用过一个围绕[JSON-RPC](http://json-rpc.org/wiki/specification)的混蛋版本设计的服务。由于它没有真正遵循规范，我们无法利用任何预先存在的实现。

就个人而言，我没有看到使用这样的协议的好处，因为我们仍然需要对服务公开的操作以及它们相关的约束（例如强制参数等）有明确的定义。除此之外，我们还必须处理JSON（在您的情况下为 XML）到关联对象模型的序列化/反序列化。这主要是由于我们与之交互的供应商以及他们不符合规范。如果您的符合标准，那么您可能会发现提供的现有实现可能会为您提供一种处理此问题的简洁方法。

请注意维基百科上关于 XML-RPC 膨胀的批评。将 JSON-RPC 作为替代方案可能会有所帮助。当然列出了一些您可以查看的实现[。](http://en.wikipedia.org/wiki/JSON-RPC#Implementations)

**编辑：**我没有正确阅读您的问题。对不起。我以为你在寻找**提供**服务。我仍然会查看 XML-RPC/JSON-RPC 周围的链接，因为它可能会让您了解如何启动测试客户端。就 .NET 而言，我查看了[Jayrock](http://jayrock.berlios.de/)代码库，以了解 JSON-RPC 协议是如何实现的，以及我们是否可以在我们的场景中使用它。您可以大致了解他们如何处理请求和响应。根据记忆，他们甚至可能有一个测试工具或示例代码来显示如何调用服务。这可以给你一些想法。

# sql - 重新索引 SQL 数据库

> ID：14620104
> 
> 赞同：1
> 
> 时间：2013-01-31T06:56:42.323
> 
> 标签：sql, database, sql-server-2008-r2

我想重新索引 SQL 数据库。我对它完全陌生。

我正在使用 Microsoft SQL Server 10.50.2500。

有人可以建议最好的方法来做到这一点。我们有同样的免费工具吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T06:59:28.760

你在什么数据库管理系统上？这是针对 SQL Server 的。如果您使用的是 SQL Server，则可以使用 Management Studio，并深入了解表 -> 索引。然后右键单击每个索引并进行重建，或者像这样创建一个存储过程：

```
CREATE PROCEDURE [dbo].[Sp_ReindexAll]

AS
BEGIN

    SET NOCOUNT ON;

    EXEC sp_MSforeachtable @command1="print '?' DBCC DBREINDEX ('?', ' ', 80)"

    EXEC sp_updatestats

END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T07:07:26.403

这取决于 DBMS 本身。可能最便携的解决方案是简单地删除索引然后重新创建它（确保没有人在表中插入违反两个操作之间索引的记录）。

然而，我要问自己的*第一个问题是**为什么*你认为这是必要的。数据库之外的任何更改似乎都不太可能需要对*当前*索引进行重新索引，尽管您的要求可能是添加新（或删除旧）索引。

# c# - 检查 XML 文件是否具有相同的结构

> ID：14620106
> 
> 赞同：0
> 
> 时间：2013-01-31T06:56:53.693
> 
> 标签：c#, xml

我有以下这样的 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<Config version="Vs1.00.00"><!-- xmlns="urn:xmldata-schema">-->

<<SystemSettings>
    <Workstation></Workstation>
    <Company></Company>
    <InstallationDate></InstallationDate>
    <SupportContactLine1></SupportContactLine1>
    <SupportContactLine2></SupportContactLine2>
    <SupportContactLine3></SupportContactLine3>
    <UserFile></UserFile>
</SystemSettings>

<Settings>
    <StartUpWorkspace></StartUpWorkspace>
    <StartLanguage></StartLanguage>
    <ExportPath></ExportPath>
    <ImportPath></ImportPath>
    <BackUpRestorePath></BackUpRestorePath>
    <AdjHistoryPath></AdjHistoryPath>
    <TestHistoryPath></TestHistoryPath>
    <LogFilePath></LogFilePath>
</Settings>

<DefaultSettings>
    <DefaultSupportLine1></DefaultSupportLine1>
    <DefaultSupportLine2></DefaultSupportLine2>
    <DefaultSupportLine3></DefaultSupportLine3>
    <DefaultUserFile></DefaultUserFile>
    <DefaultStartUpWorkspace></DefaultStartUpWorkspace>
    <DefaultStartLanguage></DefaultStartLanguage>
    <DefaultWorkspacePath></DefaultWorkspacePath>
    <DefaultExportPath></DefaultExportPath>
    <DefaultImportPath></DefaultImportPath>
    <DefaultBackUpRestorePath></DefaultBackUpRestorePath>
    <DefaultAdjHistoryPath></DefaultAdjHistoryPath>
    <DefaultTestHistoryPath></DefaultTestHistoryPath>
    <DefaultLogFilePath></DefaultLogFilePath>
    <DefaultMasterPassword crypt="No"></DefaultMasterPassword>
    <DefaultLogger></DefaultLogger>
</DefaultSettings>

</Config> 
```

我需要验证另一个 XML 文件。有没有办法检查另一个 XML 文件，如果它与我的文件具有相同的结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T07:06:21.387

您可以创建一个可能看起来像这样的 xsd 模式。（我推荐 @daryal 的 xml 模式，但我会对 xml 元素施加一些限制。）

```
<xs:element name="SystemSettings">
<xs:complexType>
  <xs:sequence>
    <xs:element name="Workstation" minOccurs="0" maxOccurs="1" />
    ...
  </xs:sequence>
</xs:complexType> 
```

...

然后您可以使用此代码执行验证

```
using (var xsdStream = new MemoryStream(fXmlSchema))
        {
            xsdStream .Position = 0;
            using (var xsdReader = XmlReader.Create(xsdStream ))
            {
                XmlReaderSettings settings = new XmlReaderSettings();
                settings.ValidationType = ValidationType.Schema;
                settings.ValidationFlags |= XmlSchemaValidationFlags.ReportValidationWarnings;
                settings.ValidationFlags |= XmlSchemaValidationFlags.ProcessInlineSchema;
                settings.ValidationFlags |= XmlSchemaValidationFlags.ProcessSchemaLocation;
                settings.Schemas.Add(XmlSchema.Read(xsdReader , [performingValidationCallback]));

                using (var xmlStream = new MemoryStream(fXml))
                {
                    using (var xmlReader = XmlReader.Create(xmlStream, settings ))
                    {
                        try
                        {
                            xmlStream .Position = 0;
                            while (xmlReader .Read())
                            {
                            }
                        }
                        catch (XmlException e)
                        {
                            //VALIDATIONERROR
                        }
                    }
                }
            }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T07:08:48.007

您需要创建[xml 方案](http://en.wikipedia.org/wiki/XML_Schema_%28W3C%29)，然后使用[XDocument.Validate](http://msdn.microsoft.com/en-us/library/system.xml.schema.extensions.validate.aspx)方法检查 xml 是否符合方案

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T07:12:16.503

您需要一个 XSD 文件来检查 xml 是否正确。如果您没有 xsd 文件，某些工具可能会[从 xml 创建 xsd](http://www.freeformatter.com/xsd-generator.html)，但您可能需要修改创建的 xsd。

此[答案](https://stackoverflow.com/questions/572853/xml-validation-using-xsd-schema)描述了如何在 C# 中针对 XSD 文件验证 xml 文件。

```
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="Config">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="SystemSettings">
          <xs:complexType>
            <xs:sequence>
              <xs:element type="xs:string" name="Workstation"/>
              <xs:element type="xs:string" name="Company"/>
              <xs:element type="xs:string" name="InstallationDate"/>
              <xs:element type="xs:string" name="SupportContactLine1"/>
              <xs:element type="xs:string" name="SupportContactLine2"/>
              <xs:element type="xs:string" name="SupportContactLine3"/>
              <xs:element type="xs:string" name="UserFile"/>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="Settings">
          <xs:complexType>
            <xs:sequence>
              <xs:element type="xs:string" name="StartUpWorkspace"/>
              <xs:element type="xs:string" name="StartLanguage"/>
              <xs:element type="xs:string" name="ExportPath"/>
              <xs:element type="xs:string" name="ImportPath"/>
              <xs:element type="xs:string" name="BackUpRestorePath"/>
              <xs:element type="xs:string" name="AdjHistoryPath"/>
              <xs:element type="xs:string" name="TestHistoryPath"/>
              <xs:element type="xs:string" name="LogFilePath"/>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="DefaultSettings">
          <xs:complexType>
            <xs:sequence>
              <xs:element type="xs:string" name="DefaultSupportLine1"/>
              <xs:element type="xs:string" name="DefaultSupportLine2"/>
              <xs:element type="xs:string" name="DefaultSupportLine3"/>
              <xs:element type="xs:string" name="DefaultUserFile"/>
              <xs:element type="xs:string" name="DefaultStartUpWorkspace"/>
              <xs:element type="xs:string" name="DefaultStartLanguage"/>
              <xs:element type="xs:string" name="DefaultWorkspacePath"/>
              <xs:element type="xs:string" name="DefaultExportPath"/>
              <xs:element type="xs:string" name="DefaultImportPath"/>
              <xs:element type="xs:string" name="DefaultBackUpRestorePath"/>
              <xs:element type="xs:string" name="DefaultAdjHistoryPath"/>
              <xs:element type="xs:string" name="DefaultTestHistoryPath"/>
              <xs:element type="xs:string" name="DefaultLogFilePath"/>
              <xs:element name="DefaultMasterPassword">
                <xs:complexType>
                  <xs:simpleContent>
                    <xs:extension base="xs:string">
                      <xs:attribute type="xs:string" name="crypt"/>
                    </xs:extension>
                  </xs:simpleContent>
                </xs:complexType>
              </xs:element>
              <xs:element type="xs:string" name="DefaultLogger"/>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

# java - Java URL 编码附加字符

> ID：14620107
> 
> 赞同：0
> 
> 时间：2013-01-31T06:56:55.480
> 
> 标签：java

我在获取 HTTP Get 调用工作时遇到了一些麻烦。

我在打开连接之前连接字符串并打印它。

所以我的字符串如下：

[http://example.com?Adri%E1n%20](http://example.com?Adri%E1n%20)

但是，服务器将其接收为：

[http://example.com?Adri%EF%BF%BDn%20](http://example.com?Adri%EF%BF%BDn%20)

我不知道问题出在服务器端，还是在从 Java 进行调用时。

请帮忙。

附加信息：（%E1 = á）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:15:13.563

尝试

```
 System.out.println(URLEncoder.encode("á", "UTF-8")); 
```

印刷

%C3%A1

# header - 对于 HEAD 请求，是否应该遵守 robots.txt？

> ID：14620108
> 
> 赞同：1
> 
> 时间：2013-01-31T06:56:57.137
> 
> 标签：header, web-crawler, robots.txt

我有一个 URL 列表，希望找出它们是否重定向到其他地方，如果是，它们的最终位置是什么。我通过向这些 URL发送**HEAD 请求来做到这一点。**

**该列表包含指向某些主机的链接，这些主机在robots.txt**中不允许我的机器人（通常是任何机器人）。

我的问题是，为了礼貌-

1.  我也应该关注 robots.txt 的 HEAD 请求，并停止请求这些主机吗？

2.  如果 robots.txt 中提到了抓取延迟，我应该为这些 HEAD 请求遵守它吗？

3.  是否有可以为我完成这项工作并返回一批输入 URL 的最终 URL 的 Web 服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T22:10:12.240

即使是 HEAD 请求，您也应该**始终遵守 robots.txt。**如果您不这样做，您不仅违反了网站的礼貌偏好，而且您的 IP 可能会被网站永久封锁。对网站上受限制且非人工访问的目录/页面的简单 HEAD 请求可以将您置于运营商的禁令列表中。

> 1.  我也应该关注 robots.txt 的 HEAD 请求，并停止请求这些主机吗？

您应该关注 robots.txt，或者如果您已经被禁止，则停止请求这些主机。

> 1.  如果 robots.txt 中提到了抓取延迟，我应该为这些 HEAD 请求遵守它吗？

是的。

> 1.  是否有可以为我完成这项工作并返回一批输入 URL 的最终 URL 的 Web 服务？

我不知道，但也许你可以采用现有的爬虫来做到这一点。你更喜欢哪种编程语言？

# javascript - jQuery 颜色框和警报

> ID：14620114
> 
> 赞同：1
> 
> 时间：2013-01-31T06:57:28.630
> 
> 标签：javascript, jquery, jquery-ui

我正在将此 javascript 用于 ColorBox 弹出窗口。

```
<script  src="$contextpath/js/jquery-1.7.js" type="text/javascript" ></script> 
```

我正在使用下面的 javascript 来获取警报消息。

```
<script src="jquery/js/jquery-1.9.0.js"></script>
<script src="jquery/js/jquery-ui-1.10.0.custom.min.js"></script> 
```

在这种情况下，Colorbox 工作正常，但显示警报方法`"undefined method"`

```
$("#dialog").dialog( {
            modal : true,
            buttons : {
                Ok : function() {
                    $(this).dialog("close");
                }
            }
        }); 
```

我必须在同一页面中使用这两种东西。有人可以为此提供解决方案吗？

# jboss7.x - 无法从 Eclipse Juno 向 jboss 7 部署战争

> ID：14620118
> 
> 赞同：0
> 
> 时间：2013-01-31T06:57:45.877
> 
> 标签：jboss7.x, eclipse-juno, jboss-tools, ubuntu-12.10

我有一个关于将 app.war 部署到 jboss7 的问题。

我的测试环境：
操作系统：Ubuntu 12.10
Eclipse：Eclipse Juno (Eclipse 4.2)
JBoss：JBoss AS 7.1.1 Final
JBoss Tool：JBoss Tool 4
JDK版本：JDK 7

如果使用默认服务器配置，当我启动服务器时，它会启动成功了，我的app.war可以正常部署了。
[参考这个截图](https://lh5.googleusercontent.com/-yMUqZ69CoYY/UQoRuRRJQII/AAAAAAAADNg/Z0p3hymgKus/s720/default.png)

我在服务器配置的部署选项卡中更改“默认设置”，选择“使用工作区元数据（不修改 JBoss 部署文件夹）。
[参考这个截图](https://lh4.googleusercontent.com/-F8n6-aFHa-8/UQoRuWUYKbI/AAAAAAAADNk/UecBN-rkguo/s720/workspace.png)

当我启动服务器时，它仍然启动成功，但我的 app.war 没有部署。
控制台没有错误日志，并且日志的内容找不到关于我的 app.war 的任何消息我

不明白为什么会发生这种情况。有人可以告诉我如何解决吗？

感谢任何人的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T05:28:05.733

只需下载jboss并配置服务器并右键单击项目属性和部署程序集然后单击添加并找到目标项目文件夹

# gnuplot - 如何在 gnuplot 中标记 90 个百分位

> ID：14620120
> 
> 赞同：3
> 
> 时间：2013-01-31T06:57:52.337
> 
> 标签：gnuplot

如何在 gnu 图中标记 90 个百分位。需要样品

```
plot [][] "fle.txt" using 1:2 with lines 
```

这就是我绘制图表的方式我想在图表中标记 90% 这是我的数据集

```
time(seconds)  frequency  cumulativeFrequency
10             2          2
11             6          8
12             8          16
13             10         26
14             7          33
15             5          38
16             5          43
17             4          47
18             2          49 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T13:52:10.863

我在 gnuplot 中看不到任何方法可以做到这一点，但使用它并不难`python`——

```
# percent90.py
import sys
def to_num(iterable):
    for line in iterable:
        columns = line.split()  # split into columns
        if not columns:  # empty line
            continue
        try:
            yield float(columns[1])  # This is a good number -- Yield it and keep going
        except ValueError:  # Not a number on the line
            pass            # just keep going -- do nothing
        except IndexError:
            print line

with open(sys.argv[1]) as fin:
     data = sorted(to_num(fin))

top_10 = data[int(len(data)*0.9):]  #top 10 percent of the data
print(top_10[0]) 
```

你可以称之为：

```
python percent90.py path/to/datafile 
```

这将告诉您在哪里放置您的标记。至于标记它，我可能会在 gnuplot 中做这样的事情：

```
YVAL = `python percent90.py path/to/datafile`
set arrow 1 from graph 0,first YVAL to graph 1,first YVAL ls 1 nohead front 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T14:28:05.467

如果您只想计算数据的 90% 点，可以使用`stats`or`plot`命令和 gnuplot 的内部变量来完成，然后按照 mgilson 的建议画一条线：

```
#!/usr/bin/env gnuplot

set terminal png
set output 'test.png'

# 'every ::1' skips header
stats 'fle.txt' every ::1 

mark = (STATS_max_y - STATS_min_y)*0.9 + STATS_min_y

set arrow 1 from graph 0,first mark to graph 1,first mark ls 1 nohead front

plot 'fle.txt' every ::1 
```

此脚本产生以下输出：

![在此处输入图像描述](../Images/705b7507721b27c6955e91bd8c866a33.png)

# c# - .csv 和 .txt 文件之间的区别

> ID：14620125
> 
> 赞同：6
> 
> 时间：2013-01-31T06:58:48.217
> 
> 标签：c#, csv

这两种文件格式有什么区别。

我从[这里找到了这个](http://www.tezimandee.com/forum/topic/2159-difference-between-a-csv-and-a-txt-file/)

**.txt 文件：** 这是一个纯文本文件，可以使用所有运行 MS Windows 任何版本的台式电脑上的记事本打开。您可以在此文件中存储任何类型的文本。没有任何文本格式的限制。由于最终用户易于使用，许多日常数据摘要提供商使用 .txt 文件。这些文件包含正确以逗号分隔的数据。

**.csv 文件：“逗号分隔值”的缩写** 这是 MS Excel 常用的特殊文件扩展名。基本上这也是一个纯文本文件，但有逗号分隔值的限制。通常，当您双击此类文件时，它将在 MS Excel 中打开。如果您的计算机上没有安装 MS Excel，或者您发现记事本易于使用，那么您也可以通过右键单击该文件在记事本中打开此文件，然后从菜单中选择“打开方式”，然后选择记事本。

**我的问题 ：**

*   逗号分隔值是什么意思？
*   如果我要使用 c# 创建 .csv 文件，我需要使用写入文件`StreamWriter`吗？是否只需要将扩展​​名更改为 .csv？
*   如果是这样，我需要用逗号更改书写字符串吗？

谢谢……

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T07:01:34.460

> 逗号分隔值是什么意思？

例如，用逗号分隔的值。

```
Name,Id,3,Address 
```

> 如果我要使用 c# 创建 .csv 文件，我是否需要使用 StreamWriter 写入文件，是否只需要将扩展​​名更改为 .csv？

更改文件的扩展名将帮助您在 MS Excel 中打开它，除了它可以是任何东西，您仍然可以通过代码打开它`(StreamReader)`

> 如果是这样，我需要用逗号更改书写字符串吗？

是的，用 分隔您的值`Comma`，或者您可以使用任何其他您喜欢的分隔符。它也可以是分号`;`，因为`,`在某些语言/文化中用于小数分隔符。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T07:02:31.937

CSV 的结构如下：

“价值”、“价值1”、“价值2”

文本文件可以是任何东西，从定界到自由格式、固定宽度、右锯齿状等等……

如果您的数据中有逗号，并且没有正确限定这些值，那么 CSV 文件可能会让人头疼。

我通常创建制表符分隔或管道分隔的文件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-31T07:05:03.163

从编程的角度来看，文件扩展名没有什么区别。事实上，您可以在 txt 文件中写入逗号分隔值。

逗号分隔值表示仅用逗号分隔值；如果您想存储一些数据并在多个系统之间共享它，这将很有帮助（另一方面，XML 是一个更好的选择）。

假设您需要存储姓名、年龄和位置；

```
TilT,25,Germany 
```

是逗号分隔的数据。

在c#的范围内，你需要在你的值之间添加逗号，你可以将它保存为CSV文件或TXT文件；没什么区别。

# java - Spring MVC - 在构造函数内重定向

> ID：14620126
> 
> 赞同：2
> 
> 时间：2013-01-31T06:58:54.300
> 
> 标签：java, spring, redirect, spring-mvc

如果需要，我想知道如何在控制器构造函数中重定向请求？

例如：在构造函数中，我需要检查一些条件，如果不满足，我想重定向到其他地方。同样，构造函数的其余部分也不会执行“原始后续操作”。我想要这样的代码。

```
@Controller
class SampleController{
   public SampleController(){
      if(![some condition]){
         ...redirecting code...
      }
      ...rest code...
   }

   ...rest code...
} 
```

编辑

如果构造函数不是一个好的选项或方法，那么是否有任何选项像过滤器之前将始终在构造函数的每个操作之前执行并且会在某些条件失败时重定向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T09:13:11.450

您可以使用拦截器：

```
public class CheckInterceptor implements HandlerInterceptor {

    @Override
    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws ServletException {
        if (handler instanceof TheController) {
        // or for any controller: if (handler.getClass().isAnnotationPresent(Controller.class))
            if (!check()) {
                redirect("/check-failure.html");
                return false;
            }
        }
        return true;
    }

    @Override
    public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) {
    }

    @Override
    public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) throws Exception {
    }

    private void redirect(HttpServletRequest request, HttpServletResponse response, String path) throws ServletException {
        try {
            response.sendRedirect(request.getContextPath() + path);
        } catch (IOException e) {
            throw new ServletException(e);
        }
    }

    private boolean check() {
        return ...
    }

} 
```

然后在 applicationContext.xml 中注册它：

```
<mvc:interceptors>
    <bean class="your.package.CheckInterceptor" />
</mvc:interceptors> 
```

# javascript - 如何在 TinyMce 编辑器（截止日期后插件）中将 onClick 事件更改为 onMouseOver？

> ID：14620128
> 
> 赞同：1
> 
> 时间：2013-01-31T06:58:58.577
> 
> 标签：javascript, jquery, onclick, tinymce, onmouseover

当我单击文本中突出显示的错误时，我希望在截止日期之后对 onMouseOver 而不是 onClick 做出反应。这是一个 atd 演示： [http ://www.polishmywriting.com/atd-tinymce/demo.html](http://www.polishmywriting.com/atd-tinymce/demo.html)

我怀疑 editor_plugin.js 的第 177 行中的这一行负责

```
editor.onClick.add(plugin._showMenu, plugin); 
```

当我将其更改为 onMouseOver 时，它抱怨 TinyMce 中没有此类事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:54:22.760

这是正确的：onMouseOver 不是 tinymce 事件（tinymce 使用自己的事件处理程序）。解决方案看起来像

```
$(editor.getBody()).bind('mouseover', function (evt){
        alert('place code here');   
    }
); 
```

# vbscript - VB脚本。如果存在，移动文件并以增量重命名

> ID：14620129
> 
> 赞同：0
> 
> 时间：2013-01-31T06:59:10.107
> 
> 标签：vbscript, increment, file-move

我正在尝试创建一个 vbscript，将文件从一个目录移动到另一个目录，如果文件已经存在，则增加文件名。即如果file.ext 存在，则新文件名为file_01.ext。如果 file_01.ext 存在，则新文件名为 file_02.ext，依此类推。我无法让它工作。任何帮助将不胜感激。

```
Const cVBS = "Vaskedama.vbs"     '= script name
Const cLOG = "Vaskedama.log"     '= log filename
Const cFOL = "C:\fra\"          '= source folder
Const cMOV = "C:\til\"              '= dest. folder
Const cDAZ = -1                      '= # days

Dim strMSG
    strMSG = " files moved from " & cFOL & " to " & cMOV
MsgBox Move_Files(cFOL) & strMSG,vbInformation,cVBS

Function Move_Files(folder)
    Move_Files = 0

    Dim strDAT
    Dim intDAZ
    Dim arrFIL()
  ReDim arrFIL(0)
    Dim intFIL
        intFIL = 0
    Dim strFIL
    Dim intLEN
        intLEN = 0
    Dim strLOG
        strLOG = "echo " & cVBS & " -- " & Now & vbCrLf
    Dim dtmNOW
        dtmNOW = Now

    Dim objFSO
    Set objFSO = CreateObject("Scripting.FileSystemObject")
    Dim objGFO
    Dim objGFI

    If Not objFSO.FolderExists(cFOL) _
    Or Not objFSO.FolderExists(cMOV) Then
        MsgBox "A folder does not exist!",vbExclamation,cVBS
        Exit Function
    End If

    Set objGFO = objFSO.GetFolder(folder)
    Set objGFI = objGFO.Files

    For Each strFIL In objGFI
        strDAT = strFIL.DateCreated
        intDAZ = DateDiff("d",strDAT,dtmNOW)
        If intDAZ > cDAZ Then
            intFIL = intFIL + 1
            ReDim Preserve arrFIL(intFIL)
            arrFIL(intFIL) = strFIL.Name
            If intLEN < Len(strFIL.Name) Then
                intLEN = Len(strFIL.Name)
            End If
        End If
    Next

    For intFIL = 1 To UBound(arrFIL)
        strFIL = arrFIL(intFIL)
        Do While (objFSO.FileExists(cMOV & strFIL))
        strFil = CreateNewName(strFIL, intFIL)
        Loop
        objFSO.MoveFile folder & strFIL, cMOV & strFIL
        strLOG = strLOG & "move " & folder & strFIL _
               & Space(intLEN-Len(strFIL)+1) _
               & cMOV & strFIL & vbCrLf
    Next

    Set objGFI = Nothing
    Set objGFO = Nothing
        strLOG = strLOG & "echo " & UBound(arrFIL) & " files moved"
        objFSO.CreateTextFile(cLOG,True).Write(strLOG)
    Set objFSO = Nothing

    Move_Files = UBound(arrFIL)
End Function

Function CreateNewName(strValue, intValue)
    CreateNewName = strValue & intValue
End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T08:25:34.687

由于我根本无法理解您的脚本，因此我将专注于“通过增加计数器来构建新文件名”的任务。显然，您必须检查每个文件在目标文件夹中是否有同名文件或此名称+后缀的文件。文件 a 的这个问题的答案完全独立于源文件夹中的所有文件 - 所以我怀疑你的数组是否有意义。

在代码中：

```
 Const cnMax = 3

  Dim goFS    : Set goFS    = CreateObject("Scripting.FileSystemObject")

  Dim oSrcDir : Set oSrcDir = goFS.GetFolder("..\testdata\FancyRename\from")
  Dim sDstDir : sDstDir     = "..\testdata\FancyRename\to"
  Dim oFile, nInc, sNFSpec
  For Each oFile In oSrcDir.Files
      WScript.Echo "looking at", oFile.Name
      nInc    = 0
      sNFSpec = getNewFSpec(oFile.Name, sDstDir, nInc)
      Do While goFS.FileExists(sNFSpec) And nInc <= cnMax
         sNFSpec = getNewFSpec(oFile.Name, sDstDir, nInc)
      Loop
      If nInc > cnMax Then
         WScript.Echo "won't copy to", sNFSpec
      Else
         WScript.Echo "will copy to ", sNFSpec
         oFile.Copy sNFSpec
      End If
  Next

Function getNewFSpec(ByVal sFName, sDstDir, ByRef nInc)
  If 0 < nInc Then
     Dim sSfx
     sSfx = goFS.GetExtensionName(sFName)
     If "" <> sSfx Then sSfx = "." & sSfx
     sSfx = "_" & Right("00" & nInc, 2) & sSfx
     sFName = goFS.GetBaseName(sFName) & sSfx
  End If
  nInc        = nInc + 1
  getNewFSpec = goFS.BuildPath(sDstDir, sFName)
End Function 
```

一些示例输出：

```
looking at B.txt
will copy to  ..\testdata\FancyRename\to\B.txt
looking at C.txt
will copy to  ..\testdata\FancyRename\to\C.txt
looking at A.txt
will copy to  ..\testdata\FancyRename\to\A.txt

looking at B.txt
will copy to  ..\testdata\FancyRename\to\B_01.txt

looking at B.txt
won't copy to ..\testdata\FancyRename\to\B_03.txt 
```

# php - 使用 PHP 脚本解析 JSON 数据字符串

> ID：14620130
> 
> 赞同：0
> 
> 时间：2013-01-31T06:59:10.280
> 
> 标签：php, json

我有一些我想使用 PHP 解析的 json 数据。

我想提取：

ID、姓名、DESC、地址（完整）、电话和营业时间。

我努力了。

```
$json = json_encode( $value, true );
foreach($json['results'] as $result) {
echo 'Title: ' . $result['general']['name'] . '<br />';
} 
```

但出现以下错误：

```
PHP Warning:  Illegal string offset 'results' in ...
PHP Warning:  Invalid argument supplied for foreach() in .... 
```

这是我要解析的 JSON 数据。

```
"ok":true,
"query":"decarli",
"page":0,
"count":100,
"total":1,
"time":"2013-01-31 00:57:40",
"results":[
{
"id":"decarli-restaurant",
"factualId":"f8990729-3ae7-4efa-8037-38fa899b07ea",
"outOfBusiness":false,
"publishedAt":"2012-03-09 10:35:51",
"general":{
"name":"Decarli Restaurant",
"timeZone":"EST",
"desc":"Decarli is an ambitious restaurant created by Jana and Paul Decarli, a husband and wife team who along with their professional staff, are dedicated to food, wine, and providing an excellent dining experience.\r\n\r\nPaul, a longtime Oregonian and a graduate of Western Culinary Institute, developed his expertise at many of Portland\u00e2\u20ac\u2122s top restaurants including Paragon, Fratelli, Saucebox, and Tuscany Grill where he was Executive Chef.\r\n\r\nJana, an Oregon native and University of Oregon graduate, established her outstanding service skills and standards at San Francisco\u00e2\u20ac\u2122s esteemed 42 Degrees and Portland\u00e2\u20ac\u2122s Bluehour. \r\n\r\nDecarli is committed to showcasing the state\u00e2\u20ac\u2122s considerable bounty of seasonal ingredients. Paul\u00e2\u20ac\u2122s culinary style draws on his Swiss\/Italian-American roots to create food that is at once sophisticated and rustic.\r\n\r\nThe restaurant\u00e2\u20ac\u2122s interior reflects the couple\u00e2\u20ac\u2122s approach to food and wine\u00e2\u20ac\u201dwarm, inviting, thoughtful and authentic. The 4000 square foot space features restored Douglas Fir floors, exposed brick walls, and a soaring beam and rafters ceiling punctuated with skylights. A highlight of the dining room is a large brass chandelier salvaged from downtown Portland\u00e2\u20ac\u2122s historic Benson Hotel. An open kitchen overlooks the comfortable bar area.\r\n\r\nWe invite you to join us soon.",
"website":"http:\/\/decarlirestaurant.com"
},
"location":{
"address1":"4545 SW Watson Ave",
"address2":"",
"city":"Beaverton",
"region":"OR",
"country":"US",
"postcode":"97005",
"longitude":-122.80611,
"latitude":45.48648
},
"phones":{
"main":"503-641-3223",
"fax":null
},
"hours":{
"mon":{
"start":"closed",
"end":"closed"
},
"tue":{
"start":"04:30pm",
"end":"10:00pm"
},
"wed":{
"start":"04:30pm",
"end":"10:00pm"
},
"thu":{
"start":"04:30pm",
"end":"10:00pm"
},
"fri":{
"start":"04:30pm",
"end":"11:00pm"
},
"sat":{
"start":"04:30pm",
"end":"11:00pm"
},
"sun":{
"start":"05:00pm",
"end":"09:00pm"
},
"holidaySchedule":""
},
"businessType":"Restaurant"
}
]
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T07:06:27.520

```
$json = json_decode( $value, true );
if (isset($json['results']) && is_array($json['results']) ) {
        foreach($json['results'] as $result) {
              echo 'Title: ' . $result['general']['name'] . '<br />';
        }
}
else echo "\$json['results'] is not an array"; 
```

# excel - SharePoint - 来自 2 个 Excel 工作表的图表 Web 部件数据

> ID：14620132
> 
> 赞同：0
> 
> 时间：2013-01-31T06:59:26.173
> 
> 标签：excel, sharepoint, web-parts

我是 SharePoint 新手，现在我正在为我的用户制作一些页面。

我的公司正在使用 SharePoint 2010 Enterprise。

我想将图表 Web 部件添加到其中一个站点页面中。

我选择 Excel 作为数据源，到目前为止我没有遇到任何问题，但是，因为图表所需的数据在同一个工作簿中分为 2 个不同的工作表。我只能使用其中一个工作表数据作为数据源。

那么，问题来了，如何为“范围名称”输入 2 个或更多工作表？

请建议我能做什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T07:06:09.373

在这个视频中看看你的答案。[http://sharepoint-videos.com/sp10use-the-chart-web-part-to-visualize-data-from-excel-spreadsheet/](http://sharepoint-videos.com/sp10use-the-chart-web-part-to-visualize-data-from-excel-spreadsheet/)我希望它会有所帮助。

或者

[http://msdn.microsoft.com/en-us/office365trainingcourse_lab_5_1_topic3.aspx](http://msdn.microsoft.com/en-us/office365trainingcourse_lab_5_1_topic3.aspx)

# php - 设计帮助，使公共课程只能从课堂上访问

> ID：14620133
> 
> 赞同：0
> 
> 时间：2013-01-31T06:59:26.057
> 
> 标签：php

我有课

```
public Class Xyz   
{    
 const const1 = '1'
 const const2 = '2'
} 
```

我可以做一些我可以限制这个类只能从类说 Class2 调用的事情吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T07:02:10.237

您可以使该类的所有功能和属性受到保护，而 class2 可以扩展 class1。

# sml - 需要提示（不是代码）将此递归函数转换为尾递归吗？

> ID：14620137
> 
> 赞同：0
> 
> 时间：2013-01-31T06:59:40.267
> 
> 标签：sml

我有这个函数，它需要一个字符串列表和一个字符串，然后返回每个列表中所有元素的列表，其中包含传递的字符串但没有传递的字符串。

`myfilter([["a","b"],["c","d"],["e","a","x"]], "a") -> ["b","e","x"]`

```
fun myfilter(list : string list list, s : string) =
case list of
    [] =>  []
   |xs::xs' => case all_except_option(s, xs) of (* helper function that does it for a string and a list of strings *)
                   NONE => []
                  |SOME n => if n = xs
                             then myfilter(xs',s)
                             else n@myfilter(xs',s) 
```

现在，正如您所见，这是一个递归函数，我想将其转换为尾递归函数。我熟悉尾递归的示例，但我看不到如何在上面的函数中做到这一点

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T09:38:10.410

当您认为尾递归时，您认为下一个应该是“累加器”。

一个函数不是尾递归的原因是它必须调用自己来获得一些结果，*然后*对这个结果做一些事情。如果我们可以将该计算移动到递归调用中，那么它就是尾递归。

在这种情况下，您所做的计算是将两个列表放在一起。所以解决方案是在 a 中声明的函数`let ... in ... end`，它接受第三个参数 - 累加器。然后，您可以随时将项目添加到累加器中。

一个很好的例子是尾递归阶乘函数。这是正常的阶乘函数：

```
fun fact 0 = 1
  | fact x = x * fact (x-1) 
```

为了使其尾递归，我们定义了一个局部函数，它接受一个累加器，并在那里进行乘法运算。

```
fun fact x =
let
  fun fact' 0 acc = acc
    | fact' x acc = fact (x-1) (x*acc)
in
  fact' x 1
end 
```

我们使用 1 作为累加器的起始值，因为乘以 1 没有效果。

好的，除此之外，您还可以做一些小事来改进您的代码。我注意到这里有很多人这样做：

```
fun foo xs =
case xs of
    []      => ...
  | (x::xs) => ... 
```

这样做会更好：

```
fun foo []      = ...
  | foo (x::xs) = ... 
```

# android - 如何使用 Phonegap 重定向到 Android 或 iOS 中的 GPS 设置窗口以打开或关闭 GPS

> ID：14620140
> 
> 赞同：7
> 
> 时间：2013-01-31T06:59:58.880
> 
> 标签：android, ios, cordova, phonegap-plugins

我想在 Phonegap 中实现一个类似于 Native android 的功能，当用户想要通过按钮点击启用 GPS 时，它将被重定向到 android 或 IOS 的设置部分，以便用户可以点击 GPS 按钮。

因为通过编程我们不能直接打开或关闭设备上的 GPS，我们只能将用户重定向到设置，那么如何将其重定向到 Android 和 iOS 的 Phonegap 中的设置。

我想在 Phonegap 中实现以下功能。

```
/**
 * Function to check if best network provider
 * @return boolean
 * */
public boolean canGetLocation() {
    return this.canGetLocation;
}

/**
 * Function to show settings alert dialog
 * */
public void showSettingsAlert(){
    AlertDialog.Builder alertDialog = new AlertDialog.Builder(mContext);

    // Setting Dialog Title
    alertDialog.setTitle("GPS is settings");

    // Setting Dialog Message
    alertDialog.setMessage("GPS is not enabled. Do you want to go to settings menu?");

    // Setting Icon to Dialog
    //alertDialog.setIcon(R.drawable.delete);

    // On pressing Settings button
    alertDialog.setPositiveButton("Settings", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog,int which) {
            Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
            mContext.startActivity(intent);
        }
    });

    // on pressing cancel button
    alertDialog.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
        dialog.cancel();
        }
    });

    // Showing Alert Message
    alertDialog.show();
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T07:10:05.083

```
startActivity(new Intent(android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS)); 
```

试试这个有意图的朋友，它会带你进入位置设置......

# sql-server - ListView 的 DataTimePicker

> ID：14620147
> 
> 赞同：0
> 
> 时间：2013-01-31T07:00:31.783
> 
> 标签：sql-server, vb.net, ado.net

有没有办法使用**DateTimePicker**作为**ListView 的搜索设备？**

我不知道如何使用 DateTimePicker 作为我的搜索引擎...

这是我的搜索代码：

```
Dim conn As SqlConnection
Dim cmd As SqlCommand
Dim da As SqlDataAdapter
Dim ds As DataSet
Dim itemcoll(100) As String

Me.ListView1.View = View.Details
Me.ListView1.GridLines = True
ListView1.Items.Clear()

conn = New SqlConnection("Data Source=#####;Initial Catalog=#####;Persist Security Info=True;User ID=#####;Password=#####")
Dim strQ As String = String.Empty
strQ = "SELECT ControlNo,EmpNo,CheckOutDate,CheckOutTime,TaxiNo,PlateNo,Model,Make FROM dbo.ChkInOut WHERE ControlNo ='" + txtsearch.Text + "'"

cmd = New SqlCommand(strQ, conn)
da = New SqlDataAdapter(cmd)
ds = New DataSet
da.Fill(ds, "Table")
Dim i As Integer = 0
Dim j As Integer = 0
For i = 0 To ds.Tables(0).Rows.Count - 1
    For j = 0 To ds.Tables(0).Columns.Count - 1
        itemcoll(j) = ds.Tables(0).Rows(i)(j).ToString()
    Next
    Dim lvi As New ListViewItem(itemcoll)
    Me.ListView1.Items.Add(lvi)
 Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T04:46:50.097

您的代码几乎没有问题，所以让我们一次解决一个问题

1.  [`SqlCommand`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.aspx)继承自[`DbCommand`](http://msdn.microsoft.com/en-us/library/system.data.common.dbcommand.aspx)，它实现了[`IDisposable`](http://msdn.microsoft.com/en-us/library/System.IDisposable.aspx)接口。

    > 该接口的主要用途是释放非托管资源。

    最好的方法是使用[`Using`](https://stackoverflow.com/questions/887831/how-does-the-using-statement-translate-from-c-sharp-to-vb)关键字。[有关其中的代码示例，请查看本页](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldataadapter.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-2)底部的示例代码。

    [SqlConnection](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.aspx)也是如此，将其包装在一个`Using`语句中。

2.  不要将字符串连接在一起进行 SQL 查询，这会使您的应用程序面临[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)攻击。[这里](http://www.codinghorror.com/blog/2005/04/give-me-parameterized-sql-or-give-me-death.html)和[这里](http://www.4guysfromrolla.com/webtech/092601-1.2.shtml) 都有如何创建参数化查询的示例*（不幸的是，我在 MSDN 上没有看到好的示例）*。

    在您的情况下，查询将如下所示：

    ```
    strQ = "SELECT ControlNo, ..<rest of columns>.. ,Model,Make " & _
           "FROM dbo.ChkInOut " & _
           "WHERE ControlNo = @controlNo"

    cmd = New SqlCommand(strQ, conn)
    cmd.Parameters.AddWidthValue("@controlNo", txtsearch.Text);

          ... rest of code here ... 
    ```

3.  要按用户指定的日期查询，首先需要从[DateTimePicker.Value](http://msdn.microsoft.com/en-us/library/system.windows.forms.datetimepicker.value.aspx)属性中获取日期。然后构造一个查询（如上面的示例）并传递一个带有所选日期的参数。您可能会发现[这个](https://stackoverflow.com/questions/2865834/t-sql-query-with-date-range)关于 SQL Server 日期的问题很有帮助。

# iphone - 长时间运行的任务问题

> ID：14620151
> 
> 赞同：1
> 
> 时间：2013-01-31T07:00:48.117
> 
> 标签：iphone, ios

我正在执行将位置更新发送到服务器的长时间运行任务。我每 60 秒后使用 NSTimer 调用方法。我阅读了他们使用以下代码的许多帖子。

```
 dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

            self.timerLocationUpdateToServer = [NSTimer timerWithTimeInterval:interval
                                                                       target:self
                                                                     selector:@selector(retryLocationUpdateToServer)
                                                                     userInfo:nil
                                                                      repeats:YES];

            dispatch_async(dispatch_get_main_queue(), ^{
                [[NSRunLoop mainRunLoop] addTimer:self.timerLocationUpdateToServer forMode:NSDefaultRunLoopMode];

            });
        }); 
```

我们真的需要使用 dispatch_async 吗？如果是，那么为什么？

有些人使用两个标识符，一个用于计时器，另一个用于任务。

```
 bgTask = [app beginBackgroundTaskWithExpirationHandler:^{
        [app endBackgroundTask:bgTask];
        bgTask = UIBackgroundTaskInvalid;

    }];

    bgTask1 = [app beginBackgroundTaskWithExpirationHandler:^{
        [app endBackgroundTask:bgTask1];
        bgTask1 = UIBackgroundTaskInvalid;

    }]; 
```

我们是否需要初始化两个 UIBackgroundTaksIndentifier 或者一个就可以解决问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T07:56:11.890

你`dispatch_async()`到后台队列是完全没有意义的。它不仅没有意义，而且可能不安全（取决于其他代码访问该`timerLocationUpdateToServer`属性以及它是否是原子的）。您应该将整个第一个代码块替换为

```
self.timerLocationUpdateToServer = [NSTimer scheduledTimerWithTimeInterval:interval
                                                                    target:self
                                                                  selector:selector(retryLocationUpdateToServer)
                                                                  userInfo:nil
                                                                   repeats:YES]; 
```

同样在第二个代码块中，您只需要一个后台任务标识符。多个将起作用，但如果您可以管理它，实际上只使用一个会更有效（因为开始后台任务不是免费的）。

# linux - 如何从 unix 使用 protobuf-csharp-port

> ID：14620155
> 
> 赞同：2
> 
> 时间：2013-01-31T07:01:12.997
> 
> 标签：linux, mono, protocol-buffers

我们一直在使用协议缓冲区，并且正在使用 protoc 生成 c++ 和 python 文件，以及使用 protobuf-csharp-port 生成 c# 文件。目前这些都是分开完成的，来自linux的c++和python以及来自windows的c#。我们想让一个脚本生成所有这些，在 linux 中运行。

为此，我尝试使用单声道运行 ProtoGen.exe，但它没有产生任何输出。以下命令运行，但不产生 cs 文件，也没有错误。

```
mono ../cs/Packages/Google.ProtocolBuffers/tools/ProtoGen.exe --protoc_dir=/usr/local/bin/ ./subdir/simple_types.proto 
```

我有一种感觉，我错过了一些简单的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T07:09:26.190

我认为我没有尝试在 Linux 上从 ProtoGen.exe 运行 protoc。我很惊讶它没有任何错误，但我们绝对可以调查一下。（如果您想提出问题，那将非常有帮助 - 或者我会在有机会时这样做。）

目前，我建议您先运行 protoc，`--descriptor_set_out`用于生成 .proto 文件的二进制 (protobuf) 版本。这就是 ProtoGen.exe 首先*尝试*做的事情，但听上去失败了。

一旦你获得了消息描述符的二进制版本（我称之为 simple_types.pb），你就可以在上面运行 ProtoGen.exe。自从我这样做以来已经有一段时间了，但我相信你应该能够运行

```
mono ../cs/Packages/Google.ProtocolBuffers/tools/ProtoGen.exe ./subdir/simple_types.pb 
```

...它应该神奇地工作。

作为一个可怕的选择，您可以尝试在二进制目录中进行`protoc.exe`符号链接。`protoc`从根本上说，我怀疑这是出了什么问题:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-05T09:58:17.060

我的脚本

```
protoc "--proto_path=$SRC_DIR" "--descriptor_set_out=x.protobin" --include_imports $SRC_DIR/x.proto
mono $PRJ_HOME/Google.ProtocolBuffers.2.4.1.521/tools/ProtoGen.exe -line_break=Unix x.protobin 
```

protoc 和 mono 是通过 distrib 包管理器安装的：

```
# archlinux
pacman -S protobuf mono 
```

# python - 在 python 中使用多处理并行化递归代码

> ID：14620158
> 
> 赞同：2
> 
> 时间：2013-01-31T07:01:25.570
> 
> 标签：python, parallel-processing, multiprocessing

如何使用 python 多处理并行化以下代码

```
def func(a,i):
   if (a>i):
      func(a-1,i)
      func(a-5,i)
   else :
      print a 
```

编辑：一旦父进程退出，所有子子进程也会退出，这是真的吗？

编辑 2：

我已经实现了以下代码，但它不起作用。你能找到错误吗？

```
p=[]
def func(a,i):
 if a>i :
   proc=Process(target=func,args=(a-1,i,))
   p.append(proc)
   proc=Process(target=func,args=(a-5,i,))
   p.append(proc)

 else :
   print a

if _name_=='_main_':
   proc=Process(target=func,args=(100,25,))
   p.append(proc)
   for x in p:
     x.start()
     x.join() 
```

上面的代码仅针对 (100,25) 执行，而不针对子流程执行，即使子流程已添加到列表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-08-11T12:41:22.050

在代码开头分配的变量没有值保留在函数中，因此您需要在函数中使用之前将全局添加到函数中。将您的代码更改为：

```
p=[]
def func(a,i):
    global p
    if a>i :
        proc=Process(target=func,args=(a-1,i,))
        p.append(proc)
        proc=Process(target=func,args=(a-5,i,))
        p.append(proc)

    else :
        print a

if _name_=='_main_':
   global p
   proc=Process(target=func,args=(100,25,))
   p.append(proc)
   for x in p:
     x.start()
     x.join() 
```

# javascript - JavaScript 关闭问题...范围？

> ID：14620161
> 
> 赞同：-1
> 
> 时间：2013-01-31T07:01:38.627
> 
> 标签：javascript, closures

我正在尝试通过学习如何使用闭包来扩展我的 JavaScript 技能水平。在下面的代码中，我想我会看到 console.log 输出从 3 倒数到 0。相反，我得到 -1、-1、-1、-1。

我知道我正在处理范围界定问题，但仅此而已。少了什么东西？这应该如何正确写，为什么？

```
function closure_count_test (number)   
{    
    for (var x = 0; x <= number; x += 1)   
    {  
        setTimeout(function() {console.log(number - x);}, x * 1000);  
    }  
}  

closure_count_test(3); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:07:59.827

这是有效的，因为 x 被定位在另一个闭包内

```
function closure_count_test(number) {
    for (var x = 0; x <= number; x++)  ( // not need {} as here is only one operator
      function (x) { //Now x - local variable in anonymous function
        return setTimeout(function () {
            console.log(number - x);
        }, x * 1000);
      }(x) // pass x to anonymous function as argument
    ); 
}

closure_count_test(3); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T07:12:28.590

作用域的基本工作原理是，它使嵌套函数中引用的主函数的变量在函数结束后保留​​下来，并且所有这些函数都可以在以后访问它们。在提供的示例中，x 是在主函数中定义的变量，所有嵌套函数稍后都可以引用它。到那时 x 的值将是 number+1，所以你的结果很有意义。要解决此问题，您必须避免引用主函数的变量。这是正常的技术：

```
function closure_count_test (number)   
{    
   for (var x = 0; x <= number; x += 1)   
   {  
       setTimeout(function(x) {
          return function() {console.log(number - x);}
       } (x), x * 1000);
   }  
} 
```

您在这里所做的是调用多个嵌套函数，它们将自己的 x 作为参数复制，并且每个函数都有一个嵌套函数，该函数将通过范围引用该参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T07:13:14.270

`x`由`for`循环迭代，但函数 in`setTimeout`使用变量`x`，该变量在创建函数时未插值。这会导致它使用 is 的任何最终值`x`（因为`setTimeout`s 在循环完成后执行）。

为了解决这个问题，您必须将 x 的值原样传递给`setTimeout`. 您可以调用返回另一个函数（新回调）的函数：

```
for (var x = 0; x <= number; x += 1) {
    setTimeout(
        (function (x) {
            return function () { console.log(number - x) };
        })(x)
    , x * 1000);  
} 
```

这`x`从具有当前值的外部范围传递到内部范围。内部函数使用`x`创建函数时的任何值。

返回一个函数以正常工作`setTimeout`。

[http://jsfiddle.net/ExplosionPIlls/QhA3a/](http://jsfiddle.net/ExplosionPIlls/QhA3a/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T07:06:39.920

你的逻辑是正确的。问题是 setTimout 只考虑变量的最新值。所以 setTimout 总是得到 x = 0 因为它是循环中的最后一个。

如果删除 setTimout 函数，您可以看到所需的输出。

# javascript - 在 Chrome 中的用户脚本之间传输信息

> ID：14620163
> 
> 赞同：2
> 
> 时间：2013-01-31T07:01:42.000
> 
> 标签：javascript, google-chrome, tabs, greasemonkey, userscripts

当在另一个选项卡中满足某些条件时，我需要在一个选项卡的页面上执行功能。我需要做的就是向另一个选项卡发送某种轻推。我已经尝试了很多与计时器结合使用的方法来保持轮询：

*   GM_setValue（Chrome 显然不支持）
*   设置 top.item （显然在选项卡之间不起作用）
*   Cookies（即使我的用户脚本在同一个域的两个选项卡中运行，这似乎不起作用）

还有其他想法吗？是的，我确实需要使用 Chrome，尽管它似乎有意在此阻止我 >.>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T09:08:31.870

由于选项卡位于同一域中，因此您可以使用`localStorage`.

1.  将脚本设置为在两个页面上运行，例如：

    ```
    // @include  http://YOUR_SERVER.COM/YOUR_PATH/pitcher/*
    // @include  http://YOUR_SERVER.COM/YOUR_PATH/batter/* 
    ```

2.  确保你能分辨出哪个页面是哪个页面。通过 URL，例如，或一些不同的内容。

3.  发送页面只是根据需要设置值，例如：

    ```
    localStorage.setItem ('targetAddress', 'http://puppies.com/'); 
    ```

4.  接收页面监听`storage`如下事件：

    ```
    $(window).bind ("storage", function (zEvent) {
        ...
    } ); 
    ```

    或者

    ```
    window.addEventListener ("storage", function (zEvent) {
        ...
    }, false); 
    ```

总而言之，这是**一个完整的脚本**，它可以在 Firefox 和 Chrome（可能还有 Opera 和其他）中运行。

您可以针对[**这个“发送者”页面**](http://jsbin.com/ihoboz/1?pitcher)和[**这个“接收者”页面**](http://jsbin.com/ihoboz/1?batter)对其进行测试。

```
// ==UserScript==
// @name     _Cross tab, same domain communication
// @include  http://jsbin.com/ihoboz/*pitcher*
// @include  http://jsbin.com/ihoboz/*batter*
// @include  http://YOUR_SERVER.COM/YOUR_PATH/pitcher/*
// @include  http://YOUR_SERVER.COM/YOUR_PATH/batter/*
// @require  http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @grant    GM_addStyle
// ==/UserScript==
/*- The @grant directive is needed to work around a design change
    introduced in Greasemonkey 1.0\.   It restores the sandbox.
*/

function GM_main ($) {
    /*-- Is this the sending or receiving page?
        In our example, the sender has "pitcher" in the URL,
        while the receiver has "batter" in the URL
    */
    var isSender = false, isReceiver = false;

    if (/pitcher/i.test (location.href) ) {
        isSender    = true;
    }
    else if (/batter/i.test (location.href) ) {
        isReceiver  = true;
    }

    if (isSender) {
        //-- Add 2 buttons to change the data we send to the other tab.
        $("body").prepend (
            '<button class="gmTestButtons">Set the transmitted value.</button>' +
            '<button class="gmTestButtons">Reset the transmitted value.</button>'
        );

        $("button.gmTestButtons").click ( function () {

            if (/^Set the transmitted/.test (this.textContent) ) {
                localStorage.setItem ('targetAddress', 'http://puppies.com/');
            }
            else {
                localStorage.setItem ('targetAddress', 'http://unicorns.com/');
            }
        } );
    }
    else if (isReceiver) {
        //-- Listen for changes in local storage
        $(window).bind ("storage", function (zEvent) {
            var varName     = zEvent.originalEvent.key;
            var newValue    = zEvent.originalEvent.newValue;

            alert (
                'Received new variable, "'   + varName
                + '", with a new value of: ' + newValue
            );
        } );
    }
}

//-- Style and/or postion our buttons
GM_addStyle ( "                                 \
    button.gmTestButtons {                      \
        margin:                 1em;            \
        padding:                1ex 1em;        \
        font-size:              20px;           \
        background:             pink;           \
    }                                           \
" );

//--- The rest of this just loads jQuery in a cross-browser way.
//
if (typeof jQuery === "function") {
    console.log ("Running with local copy of jQuery!");
    GM_main (jQuery);
}
else {
    console.log ("fetching jQuery from some 3rd-party server.");
    add_jQuery (GM_main, "1.7.2");
}

function add_jQuery (callbackFn, jqVersion) {
    var jqVersion   = jqVersion || "1.7.2";
    var D           = document;
    var targ        = D.getElementsByTagName ('head')[0] || D.body || D.documentElement;
    var scriptNode  = D.createElement ('script');
    scriptNode.src  = 'http://ajax.googleapis.com/ajax/libs/jquery/'
                    + jqVersion
                    + '/jquery.min.js'
                    ;
    scriptNode.addEventListener ("load", function () {
        var scriptNode          = D.createElement ("script");
        scriptNode.textContent  =
            'var gm_jQuery  = jQuery.noConflict (true);\n'
            + '(' + callbackFn.toString () + ')(gm_jQuery);'
        ;
        targ.appendChild (scriptNode);
    }, false);
    targ.appendChild (scriptNode);
} 
```

# c++ - Win32 DLL 项目中的 Boost 线程运行时错误

> ID：14620165
> 
> 赞同：0
> 
> 时间：2013-01-31T07:01:58.173
> 
> 标签：c++, visual-c++, boost-thread

我正在使用 C++ DLL 项目。我尝试在那里使用简单的提升线程。这是源代码。这个运行时异常`uploadThread = boost::thread(uploadFileThread);`在行。任何想法？

```
Unhandled exception at 0x6fa1bd89 (Controller.dll) in UserInterfaces.exe: 0xC0000005: Access violation reading location 0xbaadf05d. 
```

## 控制器.h

```
namespace controller{
class  CController {
public: 
boost::thread uploadThread;
}
} 
```

## 控制器.cpp

```
namespace controller{
static void uploadFileThread(){}
void CController::StartFileUpload(){        
        uploadThread = boost::thread(uploadFileThread);
        uploadThread.join();
}
} 
```

## 主文件

```
int main(){
controller::CController my_Controller;
my_Controller.StartFileUpload();
return 0;
} 
```

# xaml - 考虑到高对比度模式的设置文本颜色的正确方法

> ID：14620169
> 
> 赞同：0
> 
> 时间：2013-01-31T07:02:05.323
> 
> 标签：xaml, windows-8, microsoft-metro, high-contrast

在我的 Windows 商店应用程序中，有一些 TextBlocks 用于提示。例如，如果用户在用于输入数字的 TextBox 中输入了一些字母，则会出现提示 TextBlock 告诉用户他只能输入数字。我总是像这样在 xaml 中将提示文本设置为红色，

```
<TextBlock x:Name="HintTextBlock" Foreground="{StaticResource hintBrush}"/> 
```

这似乎没有问题，但考虑到高对比度模式，我认为硬编码文本颜色不是一个好方法，有人有想法吗？

# r - 在 slideify 中指定多个小部件

> ID：14620171
> 
> 赞同：2
> 
> 时间：2013-01-31T07:02:12.217
> 
> 标签：r, knitr, mathjax, slidify

如何在 slidify RMarkdown 文档中指定两个小部件？给定以下示例：

```
---
title       : Test
subtitle    : 
author      : 
job         : 
framework   : io2012        # {io2012, html5slides, shower, dzslides, ...}
highlighter : highlight.js  # {highlight.js, prettify, highlight}
hitheme     : tomorrow      # 
widgets     : {mathjax, quiz} # {mathjax, quiz, bootstrap}
mode        : selfcontained # {standalone, draft}
---

## A fraction:

$\frac{1}{0}$

---&radio .quiz

## A quiz:

A or B?

1\. A
2\. _B_ 
```

我似乎无法同时加载测验和 mathjax。我尝试了一些示例分隔符，例如省略大括号、空格、多个小部件语句，但我还没有设法解决。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T07:02:12.217

获取多个小部件的正确方法是使用方括号。您的小部件行应为：

```
widgets     : [mathjax, quiz] 
```

slidify 的文档仍然有点稀疏，因此作者的[这个存储库](https://github.com/ramnathv/slidifyExamples/tree/gh-pages/examples/io2012)是一个很好的答案来源，其中有一些非常好的示例。

# highcharts - 图表显示非常小的饼图

> ID：14620173
> 
> 赞同：5
> 
> 时间：2013-01-31T07:02:12.900
> 
> 标签：highcharts

我对 highcharts 饼图有疑问，我想将我的数据显示为饼图，但饼图非常小，仅显示为一个小点。

我在任何地方都在寻找答案，但我找不到。请一些人向我解释为什么会这样，我只是这个工具的新手......

我试图发布图像，但它不能...

以下是我的代码：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="robots" content="index,archive,follow">
<title>CIT Dashboard</title>
<link rel="stylesheet" media="all" href="css/dashboard.css"/>
<script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="js/highcharts.js"></script>
<script type="text/javascript">     
    var chart1;
    var chart2;
    $(document).ready(function() {
            chart1 = new Highcharts.Chart({
            chart: {
                renderTo: 'pie1',   
                plotBackgroundColor: '#969696',
                margin: 0,
                padding: 0
            },
            legend: {
                enabled: false
            },
            title: {
                text: ''
            },
            tooltip: {
                formatter: function() {
                    return '<b>'+ this.point.name +'</b>: '+ this.percentage.toFixed(2) +' %';
                }
            },
            plotOptions: {
                pie: {
                    size:'80%',
                    allowPointSelect: true,                 
                    plotBorderWidth: 0,
                    plotShadow: false,              
                    animation: false,
                    shadow: false,
                    cursor: 'pointer',
                    dataLabels: {
                        enabled: true,
                        color: '#000000',
                        connectorColor:'#000000',
                        distance: -40,
                        formatter: function() {
                            return '<b>'+ this.point.name +'</b><br />'+ this.percentage.toFixed(2) +' %';
                        }
                    }
                }
            },
            series: [{
                type: 'pie',
                name: 'Transaction by LTS',
                data: [<%=graph1 %>]
            }]
        });

        chart2 = new Highcharts.Chart({
            chart: {
                renderTo: 'pie2',   
                plotBackgroundColor: '#969696',
                margin: 0,
                padding: 0
            },
            legend: {
                enabled: false
            },
            title: {
                text: '',
                margin: 0
            },
            tooltip: {
                formatter: function() {
                    return '<b>'+ this.point.name +'</b>: '+ this.percentage.toFixed(2) +' %';
                }
            },
            plotOptions: {
                pie: {
                    size:'80%',
                    allowPointSelect: true,                 
                    plotBorderWidth: 0,
                    plotShadow: false,              
                    animation: false,
                    shadow: false,
                    cursor: 'pointer',
                    dataLabels: {
                        enabled: true,
                        color: '#000000',
                        distance: -40,
                        formatter: function() {
                            return '<b>'+ this.point.name +'</b><br />'+ this.percentage.toFixed(2) +' %';
                        }
                    }
                }
            },
            series: [{
                type: 'pie',
                name: 'Transaction by LTS',
                data: [<%=graph2 %>]
            }]
        });
    });

</script>
</head> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T10:49:46.040

首先，定义你的宽度/高度，其次你可以通过参数修改图表的大小：

[http://api.highcharts.com/highcharts#plotOptions.pie.size](http://api.highcharts.com/highcharts#plotOptions.pie.size)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T09:20:34.017

尝试设置生成图表的 div 容器的最小宽度和高度，如下所示

```
<div id="pie1" style="min-width: 400px; height: 400px; margin: 0 auto"></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-19T10:33:20.407

使用多个饼图时遇到同样的问题。只有 1 个饼图的大小显得更小。为 div 元素设置了 max-width 的原因。一旦我删除了 max-width 属性，它就可以正常工作了。

```
<div id = "ab" style="min-width: 310px; height: 400px; max-width: 600px; margin: 0 auto"> 
```

至

```
<div id = "ab" style="min-width: 310px; height: 400px; margin: 0 auto"> 
```

# php - 使用 dompdf 发送邮件

> ID：14620175
> 
> 赞同：0
> 
> 时间：2013-01-31T07:02:18.237
> 
> 标签：php, dompdf

> **可能重复：**
> [DOMPDF - 将创建的 PDF 附加到电子邮件](https://stackoverflow.com/questions/7958416/dompdf-attach-created-pdf-to-email)

我想在生成 PDF 后立即发送电子邮件。有版本。DOMPDF 的 dompdf_0-6-0_beta3 和 php ver 5.2 。能够根据需要生成PDF。但是任何人都可以帮助我如何发送带有生成的pdf作为附件的邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:19:10.200

这是我在申请中所做的，请仔细阅读，如果您有任何疑问，请告诉我。

我假设您可以从您的应用程序发送邮件。

```
$pdf = $dompdf->output();
$file_location is the path where you saved your pdf file in your local host.
file_put_contents($file_location,$pdf);

Now call your mail function like this.
sendMail($from,$to,$subject,$message,$file_location);

       function sendMail()
      {
       $config = Array(
                'protocol' => 'smtp',
                'smtp_host' => 'ssl://smtp.googlemail.com',
                'smtp_port' => 465,
                'smtp_user' => 'xxx@gmail.com', // change it to yours
                'smtp_pass' => 'xxx', // change it to yours
                'mailtype' => 'html',
                'charset' => 'iso-8859-1',
                'wordwrap' => TRUE
               );

       $this->load->library('email', $config);
       $this->email->set_newline("\r\n");
       $this->email->from($from); // change it to yours
       $this->email->to($to);// change it to yours
       $this->email->subject($subject);
       $this->email->message($message);
       $this->email->attach($file_location);
       if($this->email->send())
       {
          echo 'Email sent.';
       }
       else
       {
          show_error($this->email->print_debugger());
       }

     } 
```

现在像我在评论中提到的那样编写一个邮件功能。

# java - 解密时出现 javax.crypto.IllegalBlockSizeException 错误

> ID：14620180
> 
> 赞同：2
> 
> 时间：2013-01-31T07:02:45.243
> 
> 标签：java, aes, encryption

我正在尝试加密/解密文件中的文本，但收到以下错误：

> `Exception in thread "main" javax.crypto.IllegalBlockSizeException: Input length must be multiple of 16 when decrypting with padded cipher`

我使用 AES/ECB/PKCS5Padding 的 AES 128 位。知道为什么我会收到此错误吗？这是我的代码：

```
public class AES_Encryption  {

public static void main(String[] args) throws Exception {
    String str = new Scanner(new File("src//plainText.txt")).useDelimiter("\\Z").next();
    FileWriter fstream = new FileWriter("src//cipherText.txt");
    BufferedWriter out = new BufferedWriter(fstream);
    FileWriter fstream2 = new FileWriter("src//decrpytedText.txt");
    BufferedWriter out2 = new BufferedWriter(fstream2);
    System.out.println("" + str);

    KeyGenerator keyGen = KeyGenerator.getInstance("AES");
    keyGen.init(128);
    Key key = keyGen.generateKey();
    Cipher cipher = Cipher.getInstance("AES/ECB/PKCS5Padding");
    cipher.init(Cipher.ENCRYPT_MODE, key);
    byte[] cipherText = cipher.doFinal(str.getBytes());
    String ct = new String(cipherText);
    System.out.println( new String(cipherText, "UTF8") );
    out.append(ct);
    out.close();

    String cipherT = new Scanner(new File("src//cipherText.txt")).useDelimiter("\\Z").next();
    cipher.init(Cipher.DECRYPT_MODE, key);

    //byte[] decVal = Base64.decode(cipherT.getBytes());
    byte[] newPlainText = cipher.doFinal(cipherT.getBytes());
    String dt = new String(newPlainText, "UTF8");
    out2.append(dt);
    out2.close();
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T11:58:14.797

您的错误是将密文视为字符串：

```
String ct = new String(cipherText); // <--- Noooo! 
```

字节数组中的某些值不能以默认字符集中的字符表示。

*始终*将您的密文视为字节数组，即使在读取或写入文件时也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T17:24:52.807

[如Cipher API 文档](http://docs.oracle.com/javase/1.4.2/docs/api/javax/crypto/Cipher.html#doFinal%28byte%5B%5D%29)中所述，在以下情况下获得 IllegalBlockSizeException ：

> **IllegalBlockSizeException - 如果此密码是块密码，则未请求填充（仅在加密模式下），并且此密码处理的数据的总输入长度不是块大小的倍数**

在您的情况下，您正在正确加密字符串，但是在解密时您将 cipherText 视为`String`，然后将`cipherT.getBytes()`字节数组放入`doFinal`方法中`Cipher`。String 的字节数组转换不同于以二进制方式从文件中读取字节数组。[String API 文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#getBytes%28%29)`String.toBytes()`中提到的功能和限制如下：

> **使用平台的默认字符集将此字符串编码为字节序列，并将结果存储到新的字节数组中。当此字符串无法以默认字符集编码时，此方法的行为未指定。当需要对编码过程进行更多控制时，应使用 CharsetEncoder 类。**

我建议你以`cipherText.txt` `File` 二进制模式读取，然后将读取文件后得到的字节数组`doFinal`放入`Cipher`. 我已通过以下方式修改了您的代码：

```
public class AES_Encryption  {
public static void main(String[] args) throws Exception {
    String str = new Scanner(new File("plainText.txt")).useDelimiter("\\t").next();
    FileOutputStream fstream = new FileOutputStream("cipherText.txt");
    BufferedOutputStream out = new BufferedOutputStream(fstream);
    FileOutputStream fstream2 = new FileOutputStream("decrpytedText.txt");
    BufferedOutputStream out2 = new BufferedOutputStream(fstream2);
    System.out.println("INPUT String:\n" + str);

    KeyGenerator keyGen = KeyGenerator.getInstance("AES");
    keyGen.init(128);
    Key key = keyGen.generateKey();
    Cipher cipher = Cipher.getInstance("AES/ECB/PKCS5Padding");
    cipher.init(Cipher.ENCRYPT_MODE, key);
    byte[] cipherText = cipher.doFinal(str.getBytes());
    System.out.println("ENCRYPTED String:\n"+new String(cipherText, "UTF8") );
    out.write(cipherText);
    out.flush();
    out.close();

    //String cipherT = new Scanner(new File("cipherText.txt")).nextLine();
    BufferedInputStream bfin = new BufferedInputStream(new FileInputStream(new File("cipherText.txt")));//To read the file in Binary Mode.
    cipher.init(Cipher.DECRYPT_MODE, key);
    int BUFFERSIZE = 1024;
    byte[] readBytes = new byte[BUFFERSIZE];
    byte[] data = null;
    int totalRead = -1;
    while( (totalRead = bfin.read(readBytes))!=-1)
    {
        byte[] temp = new byte[(data == null ? totalRead : data.length)];
        System.arraycopy((data==null ? readBytes : data),0,temp,0, temp.length); 
        data = new byte[(data == null ? 0 : data.length) + totalRead];
        System.arraycopy(temp, 0, data, 0, temp.length);
        System.arraycopy(readBytes, 0, data, data.length - temp.length, totalRead);
    }
    if (data!=null)
    {
        byte[] newPlainText = cipher.doFinal(data);
        out2.write(newPlainText);
        out2.flush();
        System.out.println("DECRYPTED String:\n"+new String(newPlainText,"UTF8"));
    }
    else
    {
        System.out.println("No Data Found");
    }
    //String dt = new String(newPlainText, "UTF8");
    out2.close();
}
} 
```

我希望这可以帮助您解决遇到的异常...

# c++ - “即时”将多个视频文件合并为一个 mpeg-ts 文件

> ID：14620182
> 
> 赞同：3
> 
> 时间：2013-01-31T07:02:45.067
> 
> 标签：c++, video, video-streaming, mpeg, mpeg2-ts

首先，对不起我糟糕的英语。我正在用 C++ 编写视频流服务器。我有多个 mpeg2-ts 文件（电影和广告），我需要通过 HTTP 将它们作为一个 TS-FILE 流式传输。问题是每个 mpeg-ts 文件都有自己的时间戳（PCR、PTS、DTS）。而且，据我了解，要进行连续的流式传输，每个新的 PCR（PTS，DTS）值都应该从上一个 PCR（PTS，DTS）值继续。

这是一张图片，可以更好地理解我所说的：http: [//i.stack.imgur.com/vL1m6.png](https://i.stack.imgur.com/vL1m6.png)（我不能直接在消息中包含我的图片。抱歉）

我需要用新的时间戳替换 pcr`1、pcr`2、pcr`3 时间戳。例如，我发送了包含 pcr3 时间戳的 ts-packet，在再发送几个 ts 数据包（不包含任何 PCR 值）之后，我想插入我的广告。我的问题是：如何计算 pcr`1、pcr`2、pcr`3 等的新值？

计算当前视频的比特率，然后用这个比特率除以自最后一个 PCR 时间戳（在我们的例子中是 pcr3）以来程序发送的比特量是否正确？我的意思是：（新时间戳）=（前一个时间戳）+（比特数）/（比特率）。还是有更有效的方法来做到这一点？

至于 PTS 和 DTS 时间戳，我[在这里](https://stackoverflow.com/a/8285267/1233871)读到这些时间戳可以是非线性的。相对于我收到的最后一个原始 PCR 计算它是否正确？我是说：

```
pts_new = (original_pts - last_original_pcr) + pcr_new. 
dts_new = (original_dts - last_original_pcr) + pcr_new. 

(original_pts - last_original_pcr) is the difference between pts and pcr values
pcr_new is the last modified pcr value 
```

我的程序可以在 mpeg-ts 流中读取和编辑这些时间戳。幸运的是，有很多关于如何做到这一点的文献。但是如何计算这些时间戳的新值呢？

刚开始学习mpeg2-ts的规范，如有错误请指正。提前致谢。希望你能理解我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-13T11:04:04.470

Mpeg2“拼接”是一种艺术形式，比连接两个流要复杂得多。它需要许多公司已申请[专利](http://www.google.com/patents/US6993081)的[操作](http://www.google.com/patents/US6806909)（[http://www.google.com/patents/US6380991、http://www.google.com/patents/US6806909、http://www.google.com/patents/US6993081](http://www.google.com/patents/US6380991) )

回答您的一些问题：您对下一个 pcr 的计算看起来不错，尽管您需要考虑 DTS/PTS 的许多合规性问题（例如 etr290），但您还有很多工作要做。最基本的拼接只会重新标记广告的 pts/dts，使其从第一个 TS 的最后一个时间戳继续。

```
ad first timestamp = last timestamp + frame interval 
```

诀窍在于确保在演示时间戳或解码时间戳中没有“漏洞”。这是困难的部分，需要深入了解 MPEG2 缓冲区（tstd、eb、mb）。

祝你好运。

# php - php mysql从2列搜索

> ID：14620184
> 
> 赞同：0
> 
> 时间：2013-01-31T07:03:04.020
> 
> 标签：php, mysql, search-engine

```
$where = "";
$keywords =preg_split('/[\s]+/', $keywords);
$total_keywords = count($keywords);

foreach($keywords as $key=>$keyword) {
    $where .= "`title` LIKE '%$keyword%'";
    if ($key != ($total_keywords - 1)) {
        $where .= " AND ";
    }
}

    $results = "SELECT `id`, `username`, `title`, LEFT(`description`, 90) as `description`, `file`, `code`, `type`, `size`, `date` FROM `files` WHERE $where ORDER BY id DESC LIMIT $start, $per_page";

  $where .= "`title` LIKE '%$keyword%'"; // this case I am searching only in column `title` I want to search too in column `type` with sign '.' I don't know how to include '.' in search result for `type` 
```

示例搜索 file.exe 并使用此条件 file.exe 获取所有结果。或者 somebode search only .exe get all results with `type`.exe $where .= " `title`, `type`LIKE '%$keyword%'";//我这样做没有结果 $where .= " `title`AND `type`LIKE '%$keyword%'" ;//我这样做没有结果 $where .= " `title`LIKE '%$keyword%' AND `type`LIKE '%$keyword%'";//我这样做没有结果有人知道我怎么能得到我的结果标题类型带有符号“。”？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T07:08:32.960

```
$where .= "`title` LIKE '%$keyword%' OR type LIKE '$type'"; 
```

**更新代码**

```
$pos = strpos($keyword, '.');
if($pos > 0) {
    $parts = explode('.', $keyword);
    $type = array_pop($parts);
    $file = array_pop($parts);
    $where .= "`title` LIKE '%$file%' AND type LIKE '%$type%'";
}
else {
$where .= "`title` LIKE '%$keyword%' OR type LIKE '%$type%'";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T07:32:37.513

```
$where .= "`title` LIKE '%$keyword%' OR type LIKE '%$type%'"; 
```

# java - 使用 Xpath 读取节点列表

> ID：14620185
> 
> 赞同：1
> 
> 时间：2013-01-31T07:03:06.070
> 
> 标签：java, spring, spring-mvc

这是我的 XML 文件：

```
<sitemesh>
    <mapping path="/editor/tempPage/**" exclude="true"/>

        <mapping decorator="/WEB-INF/views/decorators/detailstheme.jsp"
            path="/*" exclude="false" />

    </sitemesh> 
```

我想要映射节点列表及其属性值。这应该使用 Xpath 来完成。

我的 xpath 表达式是：

```
expr = xpath.compile("/sitemesh/mapping"); 
```

但我在节点列表中得到空值。

这是我的代码：

```
Map<String,String> map=new HashMap<String, String>();

        // reading xml file
        DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
        DocumentBuilder builder;
        Document doc = null;
        XPathExpression expr = null;
        try {
            builder = factory.newDocumentBuilder();
            // creating input stream
            doc = builder.parse(file);
            XPathFactory xpf = XPathFactory.newInstance();
            XPath xpath = xpf.newXPath();
            expr = xpath.compile("//mapping");
        } catch (Exception e) {
            LOG.error("some exception message", e);
        }

        //------------------------------------------------------------------------

        NodeList attributeElements = null;
        try {
            attributeElements =(NodeList)expr.evaluate(doc, XPathConstants.NODE);

        } catch (XPathExpressionException e) {
            LOG.error("some exception message", e);
        }
        System.out.println("lenght:"+attributeElements.getLength());
        for (int i = 0; i < attributeElements.getLength(); i++) {
                Node node=attributeElements.item(i);
                System.out.println("node:"+node.getNodeValue());
             NamedNodeMap attrs = node.getAttributes();  
              for(i = 0 ; i<attrs.getLength() ; i++) {
                Attr attribute = (Attr)attrs.item(i);  
                System.out.println("Node Attributes : " + attribute.getName()+" = "+attribute.getValue());
              }
        }

        //-------------------------------------------------------------------------

        // writing xml file
        TransformerFactory transformerFactory = TransformerFactory
                .newInstance();
        Transformer transformer;
        try {
            transformer = transformerFactory.newTransformer();
            DOMSource source = new DOMSource(doc);
            StreamResult result = new StreamResult(file);// creating output
                                                            // stream
            transformer.transform(source, result);
        } catch (Exception e) {
            LOG.error("some exception message", e);
        }

        return   map; 
```

> 我的属性元素为空

我想在 JSP 页面上显示路径、装饰器和排除的值。但我无法通过 xpath 表达式获取节点列表。

`mapping`我想要在 Xpath中读取节点元素的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T07:50:54.473

[编辑] /sitemesh/mapping 也可以。

这里的问题是您评估***XPathConstants.NODE***的 express而 nodeList 映射到***XPathConstants.NODESET***。请参考以下链接。

[http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/xpath/XPathConstants.html#NODESET](http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/xpath/XPathConstants.html#NODESET)

添加示例代码仅用于说明目的：

```
public void testXpathExpr(){

String testXML = "<sitemesh><mapping path=\"/editor/tempPage/**\" exclude=\"true\"/><mapping decorator=\"/WEB-INF/views/decorators/detailstheme.jsp\" path=\"/*\" exclude=\"false\" /></sitemesh>";

NodeList nodeList = getNodeList(testXML);
}

private NodeList getNodeList(String xml) throws SAXException, IOException, ParserConfigurationException, XPathExpressionException {
  DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
  DocumentBuilder builder = docFactory.newDocumentBuilder();

  document = builder.parse(new ByteArrayInputStream( xml.getBytes() ) );
  XPathExpression exprPath = xpath.compile(xpathExpr);
  NodeList nodeList = (NodeList) exprPath.evaluate(document, XPathConstants.NODESET);;
return nodeList;
} 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T07:58:03.550

你的 xpath 非常适合我。下面是示例代码：

```
public class Parser {

    public static void main(String[] args) throws Exception, Exception {
        final DocumentBuilderFactory factory = DocumentBuilderFactory
                .newInstance();
        final DocumentBuilder builder = factory.newDocumentBuilder();
        final Document doc = builder.parse("src/sitemesh.xml");
        final XPathFactory xPathfactory = XPathFactory.newInstance();
        final XPath xpath = xPathfactory.newXPath();
        final XPathExpression expr = xpath.compile("/sitemesh/mapping");
        Object node = expr.evaluate(doc, XPathConstants.NODE);

        System.out.println(node);
    }
} 
```

sitemesh.xml 包含您的示例输入。

# ios - 推送时隐藏自定义标签栏

> ID：14620186
> 
> 赞同：1
> 
> 时间：2013-01-31T07:03:11.373
> 
> 标签：ios

我的应用程序中有一个自定义的标签栏。我想在推送另一个视图控制器时隐藏我的标签栏。目前我是这样实现的（原来的标签栏已被隐藏）：

```
myViewController.hidesBottomBarWhenPushed = YES;
((CustomTabBarController *)self.tabBarController).customTabBar.hidden = YES;
[self.navigationController pushViewController:lookBookViewController animated:YES]; 
```

但是当它被推送时，它会立即隐藏我的 customTabBar。所以你可以在第一个视图控制器中看到一个黑色的底栏。有没有办法解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T07:08:27.877

把你的这些代码放进去`- (void)viewDidDisappear:(BOOL)animated;`

```
- (void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];
    myViewController.hidesBottomBarWhenPushed = YES;
    ((CustomTabBarController *)self.tabBarController).customTabBar.hidden = YES;
} 
```

你可以这样设计 ![在此处输入图像描述](../Images/6aca2f6713cfee6e68ddb7b1820160b4.png)

然后你不需要隐藏标签栏，如果你想隐藏它，你可以使用我上面的代码，我想如果你这样设计，隐藏效果会是你想要的

# scala - 如何在 Lift Snippet 中使用“onClick”操作和 href 链接渲染 SHtml.ajaxButton

> ID：14620188
> 
> 赞同：1
> 
> 时间：2013-01-31T07:03:24.710
> 
> 标签：scala, render, lift, shtml

我正在尝试在 Lift 中呈现一个 ajaxButton，一旦单击它，就会更新 SessionVar，然后使用 href 转到另一个页面：

```
def render ={
"li *" #> userItems.map(item =>
  "li.button_open" #> SHtml.ajaxButton("Open", () => ajaxButtonOpen(item),
            "class" -> "btn btn-primary", "href" -> {Site.menuItem.url})
    )
}

def ajaxButtonOpen(item:Item) : JsCmd = {
   UsersCurrentItemId apply item._id
   JsCmd.unitToJsCmd(Unit)
} 
```

此代码将执行 ajaxButtonOpen 但不会转到 Site.menuItem。我尝试了其他替代方案，例如：

```
"li.button_test" #>  <a class="btn btn-primary" href= {Site.menuItem.url} onClick="{ajaxButtonOpen(item)}"> "Open"</a> 
```

有谁知道我要去哪里错了？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:18:16.193

我会做这样的事情：

```
def render ={
"li *" #> userItems.map(item =>
  "li.button_open" #> SHtml.ajaxButton("Open", () => ajaxButtonOpen(item),
       "class" -> "btn btn-primary")
    )
}

def ajaxButtonOpen(item:Item) : JsCmd = {
   UsersCurrentItemId apply item._id
   JsCmds.RedirectTo(Site.menuItem.url)
} 
```

我`Noop`用`RedirectTo`. 将[`JsCmds.RedirectTo`](http://liftweb.net/api/25-M4/api/scala/#net.liftweb.http.js.JsCmds%24%24RedirectTo)发出一个 javascript 重定向到新页面，并且应该完成您正在寻找的内容。

或者，您可以使用原始`ajaxButtonOpen`函数[`SHtml.onEvent`](http://liftweb.net/api/25-M4/api/scala/#net.liftweb.http.SHtml)将 ajax 事件处理程序添加到您的链接：

```
"li.button_test" #> 
  <a class="btn btn-primary" href={Site.menuItem.url} onClick={
    SHtml.onEvent( e => ajaxButtonOpen(item))
  } /> 
```

# asp.net-mvc-4 - 如何在 MVC4 C# 中安排任务？

> ID：14620195
> 
> 赞同：21
> 
> 时间：2013-01-31T07:03:53.160
> 
> 标签：asp.net-mvc-4, scheduling

我想在我的网站上创建一个通知系统？（类似于 stack-overflow）
我们如何安排一个任务来每 24 小时向用户发送通知？

我们可以使用 MVC4 还是应该使用 windows 服务？

**编辑：**
我`FluentScheduler`在 MVC4 App 中使用 3 个月的经验。
`FluentScheduler`易于配置和使用，但它不会随时运行任务。有时跑有时不跑。
我认为调度的最佳方式是`Windows Service`确保在特定时间运行任务。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-31T07:10:45.423

发现这是一个很棒的调度器，[FluentScheduler](https://github.com/jgeurts/FluentScheduler)

用法：

```
// Schedule an ITask to run at an interval
    Schedule<MyTask>().ToRunNow().AndEvery(2).Seconds(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-31T07:08:22.340

您需要一个 .Net 作业调度程序。这是一个很好的：http: [//quartznet.sourceforge.net/](http://quartznet.sourceforge.net/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-26T13:44:26.403

您可以使用[ATrigger](http://atrigger.com/)调度服务。[.Net 库](http://atrigger.com/docs/wiki/13/library-net)也可用于创建计划任务而无需开销。错误日志、分析、任务列表和更多好处。

免责声明：我是 ATrigger 团队中的一员。这是一个免费软件，我没有任何商业目的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-31T07:07:10.857

也许你想使用计划任务。在 MVC 中执行此操作是一个坏主意（混合责任），并且构建 Windows 服务对我来说似乎有点过头了（因为某些东西不需要一直运行）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-05T11:05:55.460

首先;

1.  添加 Nuget 包`Install-Package FluentScheduler`
2.  添加继承 Registry 的注册表类和一些代码

```
// Schedule a simple task to run at a specific time
Schedule(() => System.Diagnostics.Debug.Write("This is from service " + DateTime.Now.Second+"\n"))
               .ToRunNow().AndEvery(2).Seconds(); 
```

3.  `Global.asax.cs` 在TaskManager的 Application_Start 中注册该注册表类

```
TaskManager.Initialize(new Test()); 
```

[GitHub](https://github.com/fluentscheduler/FluentScheduler)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-09-17T12:26:16.920

我使用windows的计划任务。

我已经构建了一个小应用程序，而不是在 bd 中输入记录，然后使用此 recordId(Guid) 作为参数访问网站。

在 mvc 中，我检查 id 是否存在，如果存在，则运行任务，然后删除数据库中的记录，如果不存在，则忽略它。

这样我就可以使用参数添加时间表。每次我需要新的计划任务时都无需更新应用程序。我只是添加了一个新任务，例如“myapp.exe /MyNewTaskName”

希望这对某人有所帮助；-)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-10-23T10:19:59.280

还有一个内置选项 QueueBackgroundWorkItem。它是在 .Net 4.5.2 中添加的，[这里是关于如何在 MVC 中使用它的指南](https://blog.mariusschulz.com/2014/05/07/scheduling-background-jobs-from-an-asp-net-application-in-net-4-5-2)。

除了前面提到的 FluentScheduler 你还有[HangFire](https://www.hangfire.io/)。如果您计划部署到 Azure [，则有一些不同的服务可用于此](https://docs.microsoft.com/en-us/azure/architecture/best-practices/background-jobs)。

# sql - sql server 用另一个表中的数据更新一个表

> ID：14620197
> 
> 赞同：0
> 
> 时间：2013-01-31T07:03:54.520
> 
> 标签：sql

我有两个表 source_table 和 destination_table

源表如下

```
orderid orderno invoiceno amount
 1         10       NULL    100
 2         NULL     11      200 
```

我需要用列更新destination_table

```
orderid  orderno amount
  1         -      -
  2         -      -
  3         -      - 
```

根据条件，源的 orderid 与目标的 orderid 匹配

如果源 orderno 值不为空，则应在目标的 orderno 列中更新该值，否则应在目标 orderno 列中更新源 invoiceno

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T07:12:28.123

请试试：

```
Update D
    SET orderno = (case when S.orderno is not null then orderno else s.invoiceno end)
FROM
    source_table S Join destination_table D
    ON S.orderid = D.orderid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T07:12:32.537

你有几个选择。一种选择是使用`CASE`：

```
UPDATE d
SET d.OrderNo = 
   CASE 
     WHEN S.OrderNo IS NOT NULL THEN s.OrderNo END ELSE S.invoiceno END
FROM Source S 
    JOIN Destination D ON S.OrderId = D.OrderId 
```

或者我个人更喜欢使用`COALESCE`：

```
UPDATE d
SET d.OrderNo = COALESCE(S.OrderNo, S.InvoiceNo)
FROM Source S 
    JOIN Destination D ON S.OrderId = D.OrderId 
```

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T07:26:06.013

如果您使用的是 sqlserver，那么您也可以使用 ISNULL 函数。见下面的 sql。

```
UPDATE D 
SET orderno = ISNULL(S.orderno, S.invoiceno), 
    amount =  S.amount 
FROM source_table S INNER JOIN destination_table D ON S.orderid = D.orderid 
WHERE S.orderno IS NOT NULL OR S.invoiceno IS NOT NULL 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T07:06:57.370

```
Update D
SET orderno = S.orderno, amount = S.amount
FROM
source_table S Join destination_table D
ON S.orderid = D.orderid
WHERE S.orderno is not null

Update D
SET orderno = S.invoiceno, amount = S.amount
FROM
source_table S Join destination_table D
ON S.orderid = D.orderid
WHERE S.orderno is null 
```

# android - 在android中存储Json数据？

> ID：14620198
> 
> 赞同：-3
> 
> 时间：2013-01-31T07:03:58.143
> 
> 标签：android, json

我正在开发一个应用程序，我在其中通过 Json 获取数据，其中包括文本、图像。当用户第一次运行我的应用程序时，数据应该存储在某个地方，以便下次他/她可以在不使用互联网的情况下运行应用程序。有人可以建议我任何解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:14:08.620

Shared Preferences 是您的最佳选择，因为它是 android 中的永久轻量级存储。android 中共享首选项的一个很好的例子是在您的设备中存储最高分的游戏。[看这里。](http://developer.android.com/guide/topics/data/data-storage.html#pref)

# jquery - 滚动带有固定标题的表格的问题。在角落，标题让位于对齐方式

> ID：14620200
> 
> 赞同：0
> 
> 时间：2013-01-31T07:04:05.337
> 
> 标签：jquery, css, html, html-table

我已经构建了一个示例代码来保持标题固定，这也有效。问题在于在对齐的最后滚动 x 轴滚动。标题比正文对齐移动更多。请帮我修复它。代码如下。

```
<body>
<script type="text/javascript">
    function onScrollDiv(div) {
        var headerDiv = document.getElementById("TableHeaderContainer");
        headerDiv.scrollLeft = div.scrollLeft;
    }
</script>
<style>
    td, th
    {
        border:.5px solid;
    }
</style>
<div class="outerTableContainer" style="width:800px;">
    <div id="TableHeaderContainer" style="margin-right:20px;width: 100%;overflow-x: hidden;overflow-y: auto;">
        <table  class="gridHeader" style="position: relative;table-layout: fixed;width: 100%;empty-cells: show;border-collapse: collapse;border-spacing: 0;">
            <colgroup>
                <col style="width: 100px;"/>
                <col style="width: 170px;"/>
                <col style="width: 150px;"/>
                <col style="width: 150px;"/>
                <col style="width: 220px;"/>
                <col style="width: 150px;"/>
            </colgroup>
            <thead>
                <tr>
                    <th>Id</th>
                    <th>Name</th>
                    <th>Surname</th>
                    <th>City</th>
                    <th>Email</th>
                    <th>Date of birth</th>
                </tr>
            </thead>
        </table>
    </div>
    <div class="TableBodyContainer" style="height: 300px; overflow-y: scroll;overflow-x: auto;" onscroll="onScrollDiv(this)">
        <table  class="gridBody" style="table-layout: fixed;width: 100%;empty-cells: show;border-collapse: collapse;border-spacing: 0;">
            <colgroup>
                <col style="width: 100px;"/>   
                <col style="width: 170px;"/>
                <col style="width: 150px;"/>
                <col style="width: 150px;"/>
                <col style="width: 220px;"/>
                <col style="width: 150px;"/>
            </colgroup>
            <tbody>
                <tr>
                    <td class="ui-widget-content">110</td>
                    <td class="ui-widget-content">Abdul</td>
                    <td class="ui-widget-content">Shaffer</td>
                    <td class="ui-widget-content">Gatlinburg</td>
                    <td class="ui-widget-content">eget.dictum@In.ca</td>
                    <td class="ui-widget-content">09/03/1958</td>
                </tr>
                <tr>
                    <td class="ui-widget-content">110</td>
                    <td class="ui-widget-content">Abdul</td>
                    <td class="ui-widget-content">Shaffer</td>
                    <td class="ui-widget-content">Gatlinburg</td>
                    <td class="ui-widget-content">eget.dictum@In.ca</td>
                    <td class="ui-widget-content">09/03/1958</td>
                </tr>
                <tr>
                    <td class="ui-widget-content">110</td>
                    <td class="ui-widget-content">Abdul</td>
                    <td class="ui-widget-content">Shaffer</td>
                    <td class="ui-widget-content">Gatlinburg</td>
                    <td class="ui-widget-content">eget.dictum@In.ca</td>
                    <td class="ui-widget-content">09/03/1958</td>
                </tr>
                <tr>
                    <td class="ui-widget-content">110</td>
                    <td class="ui-widget-content">Abdul</td>
                    <td class="ui-widget-content">Shaffer</td>
                    <td class="ui-widget-content">Gatlinburg</td>
                    <td class="ui-widget-content">eget.dictum@In.ca</td>
                    <td class="ui-widget-content">09/03/1958</td>
                </tr>
                <tr>
                    <td class="ui-widget-content">110</td>
                    <td class="ui-widget-content">Abdul</td>
                    <td class="ui-widget-content">Shaffer</td>
                    <td class="ui-widget-content">Gatlinburg</td>
                    <td class="ui-widget-content">eget.dictum@In.ca</td>
                    <td class="ui-widget-content">09/03/1958</td>
                </tr>
                <tr>
                    <td class="ui-widget-content">110</td>
                    <td class="ui-widget-content">Abdul</td>
                    <td class="ui-widget-content">Shaffer</td>
                    <td class="ui-widget-content">Gatlinburg</td>
                    <td class="ui-widget-content">eget.dictum@In.ca</td>
                    <td class="ui-widget-content">09/03/1958</td>
                </tr>
                <tr>
                    <td class="ui-widget-content">110</td>
                    <td class="ui-widget-content">Abdul</td>
                    <td class="ui-widget-content">Shaffer</td>
                    <td class="ui-widget-content">Gatlinburg</td>
                    <td class="ui-widget-content">eget.dictum@In.ca</td>
                    <td class="ui-widget-content">09/03/1958</td>
                </tr>
                <tr>
                    <td class="ui-widget-content">110</td>
                    <td class="ui-widget-content">Abdul</td>
                    <td class="ui-widget-content">Shaffer</td>
                    <td class="ui-widget-content">Gatlinburg</td>
                    <td class="ui-widget-content">eget.dictum@In.ca</td>
                    <td class="ui-widget-content">09/03/1958</td>
                </tr>
                <tr>
                    <td class="ui-widget-content">110</td>
                    <td class="ui-widget-content">Abdul</td>
                    <td class="ui-widget-content">Shaffer</td>
                    <td class="ui-widget-content">Gatlinburg</td>
                    <td class="ui-widget-content">eget.dictum@In.ca</td>
                    <td class="ui-widget-content">09/03/1958</td>
                </tr>
                <tr>
                    <td class="ui-widget-content">110</td>
                    <td class="ui-widget-content">Abdul</td>
                    <td class="ui-widget-content">Shaffer</td>
                    <td class="ui-widget-content">Gatlinburg</td>
                    <td class="ui-widget-content">eget.dictum@In.ca</td>
                    <td class="ui-widget-content">09/03/1958</td>
                </tr>
                <tr>
                    <td class="ui-widget-content">110</td>
                    <td class="ui-widget-content">Abdul</td>
                    <td class="ui-widget-content">Shaffer</td>
                    <td class="ui-widget-content">Gatlinburg</td>
                    <td class="ui-widget-content">eget.dictum@In.ca</td>
                    <td class="ui-widget-content">09/03/1958</td>
                </tr>
                <tr>
                    <td class="ui-widget-content">110</td>
                    <td class="ui-widget-content">Abdul</td>
                    <td class="ui-widget-content">Shaffer</td>
                    <td class="ui-widget-content">Gatlinburg</td>
                    <td class="ui-widget-content">eget.dictum@In.ca</td>
                    <td class="ui-widget-content">09/03/1958</td>
                </tr>
                <tr>
                    <td class="ui-widget-content">110</td>
                    <td class="ui-widget-content">Abdul</td>
                    <td class="ui-widget-content">Shaffer</td>
                    <td class="ui-widget-content">Gatlinburg</td>
                    <td class="ui-widget-content">eget.dictum@In.ca</td>
                    <td class="ui-widget-content">09/03/1958</td>
                </tr>
                <tr>
                    <td class="ui-widget-content">110</td>
                    <td class="ui-widget-content">Abdul</td>
                    <td class="ui-widget-content">Shaffer</td>
                    <td class="ui-widget-content">Gatlinburg</td>
                    <td class="ui-widget-content">eget.dictum@In.ca</td>
                    <td class="ui-widget-content">09/03/1958</td>
                </tr>
            </tbody>
        </table>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T07:16:30.713

酷找到了灵魂。只需将宽度减小到 97%

`<div style="overflow-x: hidden; overflow-y: auto; margin-right: 20px; width: 97%;" id="TableHeaderContainer">`

# c# - 如何将文本从一个文本框添加到另一个文本框？

> ID：14620202
> 
> 赞同：1
> 
> 时间：2013-01-31T07:04:16.690
> 
> 标签：c#, winforms, textbox

基本上我正在制作一个简单的程序来帮助我在工作中做笔记。我有一条线`textbox1`和一条多线`textbox2`。

我希望能够在 中输入任何内容`textbox1`，然后按“enter”，它会显示在`textbox2`. 任何帮助，将不胜感激。

```
 public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();

    }

    private void textbox1_TextChanged(object sender, EventArgs e)
    {

    }

    private void textBox2_TextChanged(object sender, EventArgs e)
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T07:07:00.957

```
//in form constructor, or InitializeComponent method
textBox1.Validated += DoValidateTextBox;

//in another place of your class
private void DoValidateTextBox(object sender, EvenArgs e) {
  textBox2.Text =  ((TextBox)sender).Text + Environment.NewLine + textBox2.Text;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T07:14:15.250

这应该有效：

```
private void textBox1_KeyDown(object sender, KeyEventArgs e) // Keydown event in Textbox1
{
  if (e.KeyCode == Keys.Enter) // Add text to TextBox2 on press Enter
  {
    textBox2.Text += textBox1.Text;
    textBox2.Text+= "\r\n"; // Add newline
    textBox1.Text = string.Empty; // Empty Textbox1
    textBox1.Focus(); // Set focus on Textbox1
  }
} 
```

如果要在文本框的第一行添加文本，请在上面的代码中替换：

```
textBox2.Text = textBox1.Text + "\r\n" + textBox2.Text; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-31T07:19:21.277

这取决于您希望最终结果是什么。如果您想要的只是第二个文本框的第一行等于第一行，那么：

```
void myEvent()
{
    textbox2.Text = textbox1.Text;
} 
```

但是，如果您希望每次按下按钮时都将 textbox1中的任何内容*附加到 textbox2，那么您最好使用 ListView：*

```
void myEvent()
{
   myListView.Items.add(textbox1.Text);
} 
```

如果您特别想要一个文本框（数据始终附加到第一行）：

```
void myEvent() 
{ 
   textbox2.Text = textbox1.Text + Environment.NewLine + textbox2.Text; 
} 
```

# c# - 如何控制 SoundPlayer WhilePlaying 和 AfterPlay 事件？

> ID：14620205
> 
> 赞同：1
> 
> 时间：2013-01-31T07:04:31.903
> 
> 标签：c#, soundplayer

我有播放和停止按钮，我想将它们组合成一个按钮，该按钮具有两种功能。但是，我找不到任何 WhilePlaying() 或 AfterPlay() 事件。我用谷歌搜索了一些，我发现使用**Thread**可以控制我想要的事件。

这就是我想要的。当用户单击播放按钮时，播放图标将变为停止图标，用户将能够立即停止播放，或者如果声音播放完毕，停止图标将变为播放图标。

以下是我在程序中使用的代码：

```
 private void btPlayFile_Click(object sender, EventArgs e)
        {
        try
        {                
            wavPlayer = new SoundPlayer();
            string promptPath = System.Configuration.ConfigurationSettings.AppSettings["PromptStorage"];
            wavPlayer.SoundLocation = promptPath + tePromptFile.Text;
            wavPlayer.LoadCompleted += new AsyncCompletedEventHandler(wavPlayer_LoadCompleted);
            wavPlayer.LoadAsync();

        }
        catch (Exception ex)
        {

            XtraMessageBox.Show("PlayFile Hata:" + ex.Message);
        }
    }

    void wavPlayer_LoadCompleted(object sender, AsyncCompletedEventArgs e)
    {
        try
        {
            ((System.Media.SoundPlayer)sender).Play();

        }
        catch (Exception ex)
        {

            XtraMessageBox.Show("PlayFile Hata:" + ex.Message);
        }
    }

    private void btStopFile_Click(object sender, EventArgs e)
    {
        try
        {
            wavPlayer.Stop();
        }
        catch (Exception ex)
        {
            XtraMessageBox.Show("PlayFile Hata:" + ex.Message);
        }
    } 
```

# xamarin.ios - 使用 UiTableViewCell 子类作为 Monotouch.Dialog 元素

> ID：14620213
> 
> 赞同：1
> 
> 时间：2013-01-31T07:04:53.053
> 
> 标签：xamarin.ios, monotouch.dialog

我试图弄清楚如何： 1\. 在 Xcode 4+ 中使用 IB 以可视方式创建 UITableViewCell 的自定义子类以在 MT 中使用。

2.  如何将该自定义类用作 MT.Dialog 中的元素。

我进行了广泛搜索，但没有找到任何示例或能够解决它。这是我一直在尝试的过程：

1.  第 1 步似乎很容易，因为我找到了一个很好的教程：[http ://www.arcticmill.com/2012/05/uitableview-with-custom-uitableviewcell.html](http://www.arcticmill.com/2012/05/uitableview-with-custom-uitableviewcell.html)

2.  第 2 步似乎是我卡住的地方。一旦我有了新课程，在这种情况下会在上面放一些标签：

    ```
    public partial class CustomListCell : UITableViewCell {
      public CustomListCell () :base(UITableViewCellStyle.Default,"CellID") { 
      }

      public void UpDateData(string lbl1, string lbl2, string lbl3) {
        this.lblLabel1.Text = lbl1;
        this.lblLabel2.Text = lbl2;
        this.lblLabel3.Text = lbl3;
      }
    } 
    ```

我不知道如何把它变成我可以在 MT.Dialog 中使用的东西。我努力了 ：

```
public partial class CustomListCell :Element 
```

但是标签控件似乎并不是每个都被创建。无论我在哪里调用 UpdateData，它们都是空的，因此是空引用异常，即使构造函数执行得很好。我也尝试将其设为 OwnerDrawnElement，但遇到了一些问题。

这可能吗？有推荐的模式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T22:35:50.733

I think the sample you are looking for is the OwnerDrawnCell: [https://github.com/migueldeicaza/MonoTouch.Dialog/blob/master/MonoTouch.Dialog/Elements/OwnerDrawnElement.cs](https://github.com/migueldeicaza/MonoTouch.Dialog/blob/master/MonoTouch.Dialog/Elements/OwnerDrawnElement.cs)

See how it overrides the GetCell() method to provide a custom cell:

```
public override UITableViewCell GetCell (UITableView tv)
{
  OwnerDrawnCell cell = tv.DequeueReusableCell(this.CellReuseIdentifier) as OwnerDrawnCell;

  if (cell == null)
  {
    cell = new OwnerDrawnCell(this, this.Style, this.CellReuseIdentifier);
  }
  else
  {
    cell.Element = this;
  }

  cell.Update();
  return cell;
} 
```

You just need to do the same thing - except you need to replace OwnerDrawnCell with the XIB-loaded cell.

* * *

I've also done a blog post on how I load cells from XIBs using the new iOS6 variant of the DequeueReusableCell API - see [http://slodge.blogspot.co.uk/2013/01/uitableviewcell-using-xib-editor.html](http://slodge.blogspot.co.uk/2013/01/uitableviewcell-using-xib-editor.html)

# javascript - 无法使用phonegap android创建项目

> ID：14620217
> 
> 赞同：1
> 
> 时间：2013-01-31T07:05:04.220
> 
> 标签：javascript, android, cordova

我正在使用 phonegap 开发 android 应用程序，但是当我创建一个新项目时，它会给出消息

**项目已经存在**

但实际上该项目并不存在。这是我的命令

> C:\cordova-2.1.0-incubating-src\cordova-2.1.0\incubator-cordova-android\bin>创建 e:\com.walkover.musicapp musicapp

# c# - 允许 Radgrid 模板列中的 HTML 文本

> ID：14620220
> 
> 赞同：2
> 
> 时间：2013-01-31T07:05:19.780
> 
> 标签：c#, asp.net, telerik, telerik-grid

```
<ItemTemplate>
   <asp:Label ID="lblCompanyName" runat="server" 
      ToolTip='<%# CheckDbNull.ToStr(Eval("Name")) %>' 
      Text='<%# CheckDbNull.ToStr(Eval("Name")) %>'>
   </asp:Label>
</ItemTemplate> 
```

我有一些 HTML 格式的数据，如`<abc>`,`<Name>`等，但它会呈现为 HTML 并且不显示。

如何在网格列中显示 HTML 文本？我正在使用`Telerik:RadGrid`和模板列。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T07:13:15.607

用于`Server.HTMLEncode`显示`<`和`>`标志。
关注

```
 Text='  <%# Server.HTMLEncode(CheckDbNull.ToStr(Eval("Name"))) %>' 
```

变化如下

*   小于号 (<) 转换为 < ;。
*   大于号 (>) 转换为 > ;。
*   & 符号 (&) 转换为 & ;。
*   双引号字符 (") 转换为 " ;。
*   代码大于或等于 0x80 的任何 ASCII 代码字符都将转换为 <number>，其中 number 是 ASCII 字符值。
    [MSDN 说 Server.HTMLEncode](http://msdn.microsoft.com/en-us/library/ms525347.aspx)

详情如下
[http://msdn.microsoft.com/en-us/library/ms525347%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/ms525347%28v=vs.90%29.aspx)

# javascript - 使用 Jquery 在单击时使用不同的名称和值给出“NaN”动态创建 ChkBox？

> ID：14620221
> 
> 赞同：0
> 
> 时间：2013-01-31T07:05:40.260
> 
> 标签：javascript, jquery, asp.net, checkbox

我试图在单击时创建具有不同名称和值的 chkbox，然后警告其值导致错误“NaN”我的脚本在这里，

```
<script type="text/javascript">
var k=0,j=0;
    $(document).ready(function () {
        $("#btnAdd").click(function () {
            var field = $("#field").val();
         k+=1;
            var newRow1="<tr><td align='center' style='font-size: large; color: #212121;' height='35px'>from"
            +DDL_fromProfession +" to "+DDL_ToProfession +"</td></tr>"
            +"<tr><td align='center' style='font-size:large;color:#212121;' height'35px'>"
            +"<input type='checkbox' name='chkbx_CurrPro'"+k+"'' value='"+k+"'>I currently work here</input>";
            alert(k);
            var chkvalue = parseInt($(":checkbox[name='chkbx_CurrPro'"+k+"'']").val()) + 1;
            alert(chkvalue);                
            var checkBoxes = $("input[name=" + chkbx_CurrPro + "]");
              $.each(checkBoxes, function() {
            if ($(this).attr('checked')){
                //do stuff
            }
            });                        
            var input = "<input name='parameters' id='field' type='text' />";
            var input1="<input name='parametersCompany' id='field' type='text'/>"
            var newRow = "<tr><td align='center' style='font-size: x-large; color: #212121;' height='35px'>" 
            + input + " at " +input1 +"</td></tr>";
            $('#controls').append(newRow);
            $('#controls').append(newRow1);
        });
    });
</script> 
```

我想要克里特岛的chkbox，

```
name = chkbx_CurrPro0 , value = 0
name = chkbx_CurrPro1 , value = 1
name = chkbx_CurrPro2 , value = 2
             .
             .
             . 
```

然后我打印它的值导致 NaN 错误？希望您的建议在创建动态 chkbox 后我想做的另一件事将获得仅标记的 chk 框的价值，

我的代码在这里，

```
 var checkBoxes = $("input[name=" + chkbx_CurrPro + "]");
                  $.each(checkBoxes, function() {
                if ($(this).attr('checked')){
                    //do stuff
                }
                }); 
```

但检查在运行时创建的所有 chkbox

希望提出建议

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:12:38.280

```
 var chkvalue = parseInt($(":checkbox[name='chkbx_CurrPro'"+k+"'']").val()) + 1; 
```

我认为你对这里的引用有一些问题。尝试这个...

```
 var chkvalue = parseInt($(":checkbox[name='chkbx_CurrPro"+k+"']").val()) + 1; 
```

编辑：看起来你在这里有同样的问题......

```
"<input type='checkbox' name='chkbx_CurrPro'"+k+"'' value='"+k+"'> 
```

这将尝试使名称 chkbx_CurrPro'1' 但这无效。这应该是...

```
"<input type='checkbox' name='chkbx_CurrPro"+k+"' value='"+k+"'> 
```

再次编辑：我在这里看到另一个问题，您试图在复选框实际添加到 dom 之前获取复选框的值。您已将其添加到字符串中，但是当您调用 parseInt 时，这只是一个文本字符串，而不是页面的一部分。将 parseInt 行移动到附加行下方，靠近底部。

# python - 花在问题上的时间太多？

> ID：14620222
> 
> 赞同：-1
> 
> 时间：2013-01-31T07:05:48.283
> 
> 标签：python

我是编程新手。很新。大约一个月前，我收到了一本书，名为“从 Python 开始”。大概有14章左右。我已经很容易地通过了前 6 个。它们看起来都很基本（循环、基本功能等）。但是，我现在正在做第 7 章，而且我正在做本章末尾的练习，而且对我来说更难做。顺便说一句，第 7 章处理文件（添加记录、更改数据、删除记录等）。在其中一个上，我现在花了大约两三个小时试图让代码正确运行以更改文本文件中记录上的数据。我知道你们可能会在几分钟内做到这一点，我不希望我自己这样做，但是 2 小时做这件事是否太多时间？我想我的问题是：这是否太多时间，即使是看似简单的练习的初学者？提前感谢任何回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T07:11:29.153

我认为你应该分析你花时间做什么。如果解决方案最终只是几行代码，那么花费几个小时肯定是太多了。如果您最终得到一个相当长的解决方案，您应该调查“官方”解决方案是否同样长，或者您是否让它过于复杂。

您可能会花时间进行实验，在反复试验中进行编程。不; 尝试先考虑方法，然后编写代码。

您还可能会花时间阅读文档。这段时间花得很好，但考虑到据说这本书给了你执行任务所需的所有信息，所以你不太可能需要书中没有提到的细节（否则那是本书的错误）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T07:11:17.280

每个人都按照自己的节奏学习。尤其是在开始阶段，如果您花费的时间超过预期或感到沮丧，请不要担心——这很正常。

与其试图匆忙完成最初的学习，不如尽情享受当下并尝试尽可能多地学习。尝试以不同的方式表达相同的事物（对于 file-io，try`with open('filename') as myfile`和`myfile = open('filename')`）。了解表达相同代码的两种方式之间的差异。你更喜欢哪一个？哪个编码更快？哪个执行速度更快？

当然，如果您在编码挑战本身遇到问题，请将您的尝试与问题一起发布，我们将很乐意提供帮助。您甚至可以在没有完整解决方案的情况下要求提示，以便您可以自己尝试这些建议，而不会有效地让其他人为您完成工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T07:28:16.357

我对编程也很陌生。

练习练习练习！

到目前为止我做得相当好，相信我它有效。我练习得越多，我就越有信心去做更大的事情。我认为你花了多少时间并不重要，除非你花时间去尝试。最后，如果您发现解决方案很简单，您会更好地记住解决方案以及您尝试过的事情。因此，这绝不是浪费时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T07:12:45.723

只要你在学习，你永远不会花太多时间。如果您在看似简单的事情上花费两个小时，那么阅读一些示例或请朋友快速回顾一下是个好主意。网上有很多例子（[http://www.tutorialspoint.com/python/python_files_io.htm](http://www.tutorialspoint.com/python/python_files_io.htm)），祝你好运！

# performance - OrientDB - 大数据的性能

> ID：14620226
> 
> 赞同：2
> 
> 时间：2013-01-31T07:06:06.770
> 
> 标签：performance, gremlin, orientdb

我在我的项目中使用 OrientDB，我真正关心的是性能。我创建了大数据来测试它，有 500 000 人和 500 000 个兴趣，以及人和人之间的随机关系（2 496 540 个关系），以及人和兴趣（3 322 060 个关系）。

我需要做的是遍历顶点和边。我试过格雷姆林。对于朋友少于100的人，获得共同的朋友大约需要10-20秒，但如果一个人有数千个朋友，这将无法正常工作，需要太多时间。

```
g.v(id).both('KNOWS').as('here').both('KNOWS').has('id', '10:20').back('here').dedup.email 
```

对于朋友少于 100 的人来说，获得朋友推荐大约需要 40-50 秒，但当一个人有数千个朋友时也是如此。

```
x=[g.v(id)];g.v(id).both('KNOWS').aggregate(x).both('KNOWS').except(x).dedup.email 
```

这些是 OrientDB 快速进行这种遍历的任何方式吗？

OrientDB SQL遍历只支持深度优先遍历，两个人之间似乎不可能找到共同好友，好友推荐复杂。我错过了什么？

感谢您的回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:11:27.337

为什么不从 10:20 开始并从那里交叉关系，而不是浏览所有数据库检查该顶点是否与 10:20 相关？

# asp.net-mvc-3 - 找不到记录时如何禁用 Telerik MVC 网格排序、过滤、分组

> ID：14620233
> 
> 赞同：0
> 
> 时间：2013-01-31T07:06:29.607
> 
> 标签：asp.net-mvc-3, telerik-grid, telerik-mvc

当模型没有记录时，我需要禁用排序、过滤、分组功能。我用谷歌搜索了很多。但我没有找到任何解决方案。请任何人都可以告诉我我该怎么做的可能性..

# blackberry - 黑莓：PIMList.getFieldLabel(id) 不工作

> ID：14620237
> 
> 赞同：0
> 
> 时间：2013-01-31T07:06:45.020
> 
> 标签：blackberry, memo

我正在尝试在黑莓设备中检索备忘录的所有字段。目前我正在我的模拟器 OS 5.0 中进行测试。我的代码如下：

```
StringBuffer sb = new StringBuffer();
BlackBerryMemo item = null;         
     while(memos!=null && memos.hasMoreElements()){          
         item = (BlackBerryMemo) memos.nextElement();            
         int[] fieldIds = item.getFields();
           int id;
           for(int index = 0; index < fieldIds.length; ++index) 
           {
              id = fieldIds[index];
              if(item.getPIMList().getFieldDataType(id) == PIMItem.STRING) 
              {
                 for(int j=0; j < item.countValues(id); ++j) 
                 {
                    String value = item.getString(id, j);                       
                    sb.append(((PIMList) item).getFieldLabel(id) + " = " + value); //problem here
                 }
              }
           }
        } 
```

我面临的问题是，当执行最后一行时，它会抛出 ClassCastException。有人可以帮忙吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:24:10.043

对不起，这么愚蠢的问题。我将代码行更正为：

```
sb.append((item.getPIMList()).getFieldLabel(id) + " = " + value)); 
```

它被解决了。不管怎么说，多谢拉。

# javascript - 不同的方式来初始化 Javascript Date 对象并获得不同的结果

> ID：14620239
> 
> 赞同：0
> 
> 时间：2013-01-31T07:06:52.440
> 
> 标签：javascript, date, initialization

> **可能重复：**
> [Javascript 中两个日期的初始化差异](https://stackoverflow.com/questions/13159789/difference-in-initialization-of-two-dates-in-javascript)

关于 Javascript Date 对象的初始化，我得到了一个奇怪的结果。我正在尝试将 1st Feb 2012 初始化为 JavaScript Date 对象。第一种方法是通过构造函数，我得到了所需的结果（2012 年 2 月 1 日）。第二种方法是通过一个空的构造函数，并设置每个字段，我得到的结果完全不同。（2012 年 3 月 2 日）。当我将月份设置为 1 月、3 月、5 月时，这种方式有效。但是当月份是二月，四月，六月时失败。

请参考下面的代码。

代码摘录1：

```
var year = 2012;
var mth = 1;
var dy = 1;
var hrs = 0;
var min = 0;
var sec = 0;
var ms = 0;

//Result here gives me 1st Feb 2012
var dt = new Date(year, mth, dy, hrs, min, sec, ms);
alert("Date 1 : " + dt.toString());

//Result here gives me 1st March 2012
var dt2 = new Date();
dt2.setFullYear(year);
dt2.setMonth(mth);
dt2.setDate(dy);
dt2.setHours(hrs);
dt2.setMinutes(min);
dt2.setSeconds(sec);
dt2.setMilliseconds(ms);
alert("Date 2 : " + dt2.toString()); 
```

如果有人帮助解释为什么会发生这种情况，我将不胜感激。这是一个 JavaScript 错误吗？

谢谢。

==================================================== =================================

更新：在这个线程上找到了解决方案。 [Javascript中两个日期的初始化差异](https://stackoverflow.com/questions/13159789/difference-in-initialization-of-two-dates-in-javascript?rq=1)

撰写本文时的当前日期是 2013 年 1 月 31 日。 DateTime() 给出当前日期和时间，因此 dt 是 2013 年 1 月 31 日。

因此，当 dt.setMonth 先出现时，它会尝试将 2013 年 1 月 31 日设置为 2013 年 2 月 31 日，这是无效的。因此 Javascript 将其默认为 2013 年 3 月 31 日。

然后 dt.setDate 进入，Javascript 将日期更改为 2013 年 3 月 1 日。当我们在 Javascript 中设置日期时，顺序很重要。

# flash - 添加游戏计时器

> ID：14620244
> 
> 赞同：0
> 
> 时间：2013-01-31T07:07:13.907
> 
> 标签：flash, flash-builder, flashcatalyst

请指导我。我们创建了一个游戏，它的类型是思维/解谜。我们使用的平台是闪速催化剂。现在的问题是游戏计时器。我们如何在游戏中添加计时器？flash builder可以做到吗？如何？提前感谢您提供的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:55:10.693

我发现[这个线程](http://forums.adobe.com/thread/881766)可以完整地解决您的问题

# rdf - 可以执行这些类型的 SPARQL 查询吗？

> ID：14620245
> 
> 赞同：3
> 
> 时间：2013-01-31T07:07:15.303
> 
> 标签：rdf, sparql, semantic-web, jena

假设我们有一个巨大的 RDF 图并且想要执行以下操作：（我尝试了它但它不起作用 - 想知道我是否错误地构造了查询或 rdf 转储的一些问题）。

```
select ?n ?o 
where {
    ?n <name_of_a_node> <name_of_this_node>.
    ?n ?p ?o.
    ?o <type_of_a_node> ?t.
    FILTER(REGEX(STR(?t), "president")).
} 
```

上面的查询说我知道节点 n 的名称。所以，我得到了节点 n 的 URI。然后，我正在获取节点 n 的所有谓词，并且其他节点连接签证这个谓词。对于连接到节点 a 的每个节点 o，我想查看它们的属性（类型属性）并仅检索那些在其类型属性中具有子字符串的节点 o。

这在 SPARQL 中可行吗？基本上，站在一个节点上并查看该节点连接到的所有其他节点，然后仅检索那些与其属性匹配另一个条件的节点。

否则，我是否应该只检索节点 n 连接到的所有节点，并为每个节点运行另一个 SPARQL 查询来执行此检查？

我正在使用 JENA 来存储数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T11:01:31.473

是的，这是可能的，但编写这样的查询几乎总是非常不明智的。

您使用的任何`FILTER`方法都需要 SPARQL 引擎来查看每个可能的解决方案并评估其中的表达式，而许多表达式的评估速度很快且成本低廉，有些`REGEX`则非常昂贵。

本质上，您是在要求 SPARQL 引擎获取大量无限可能的结果，然后对每个可能的解决方案应用正则表达式。如果您对[Java 正则表达式性能](http://tusker.org/regex/regex_benchmark.html)有所了解，那么您就会知道这通常是一个非常糟糕的主意，无论它在 SPARQL 中的使用如何。

许多 SPARQL 引擎支持[全文扩展](https://web.archive.org/web/20160814144717/http://answers.semanticweb.com:80/questions/8676/do-you-use-full-text-search-with-sparql-if-so-how-and-why)，允许您以一种让 SPARQL 引擎更有效地处理它们的方式表达这些类型的查询。对于 Apache Jena，请参阅[LARQ](http://jena.apache.org/documentation/larq/index.html)

# php - Highcharts JQuery - 改变每个点的颜色

> ID：14620249
> 
> 赞同：-2
> 
> 时间：2013-01-31T07:07:35.787
> 
> 标签：php, jquery, ajax, highcharts

我有一个显示变量信息的折线图（过去 12 个月每月的百分比图）

我想根据我从 Ajax 调用 php 函数收到的结果更改每个绘图的点颜色。（参考绿线）

例如下面是我的图表： [我的图表](http://img29.imageshack.us/img29/4336/examplels.jpg)

如果该月的数字 > 98.5，则将点设为绿色，如果该数字在 96 - 98.5 之间，则将点设为琥珀色，任何低于此值的点将点设为红色。

这可能吗？

我尝试将一组颜色返回给我的 ajax 方法并尝试：名称：'生产成功率'，颜色：'responseJSON.colour，类型：'line'，数据：responseJSON.percent

返回的数组 responseJSON.colour 是一个十六进制代码数组。

然而，颜色 api 似乎不允许数组，因为它只用数组中的第一种颜色为线着色（不幸的是）

谁能帮忙？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T07:45:38.667

我相信你想要的是利用`fillColor`每个系列点的。

这可以通过手动构建要为图表准备的数据来完成，一个简单的例子是：

```
var figures = [93, 95.8, 99.2, 97.8, 98.3, 96.4, 95, 98.9, 97.2, 94.3, 97.1, 94],
        d = [];

$.each(figures, function (i, figure) {
    if (figure > 98.5) {
        d.push({y: figure, fillColor: 'green', color: 'green'});
    }else if(figure < 98.5 && figure > 96.5){
        d.push({y: figure, fillColor: '#ffbf00', color: '#ffbf00'});  //amber i guess
    }else if(figure < 96.5){
        d.push({y: figure, fillColor: 'red', color: 'red'});   
    }
}); 
```

然后，当您构建图表时，只需提供`data: d`，每个点将根据上述条件具有不同的填充颜色..

[我认为这个 jsFiddle 可能涵盖了您需要的大部分内容。](http://jsfiddle.net/6szVS/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T07:52:24.910

```
<script src="http://code.highcharts.com/highcharts.js"></script>

<div id="container" style="height: 400px"></div>

$(function () {
var chart = new Highcharts.Chart({
    chart: {
        renderTo: 'container'
    },
    xAxis: {
        categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
    },

    plotOptions: {
        series: {
            allowPointSelect: true,
            marker: {
                states: {
                    select: {
                        fillColor: 'red',
                        lineWidth: 0
                    }
                }
            }
        }
    },

    series: [{
        data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]        
    }]
});
}); 
```

请参阅上面作为如何更改所选标记颜色的示例，如本[小提琴](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/plotoptions/series-marker-states-select-fillcolor/)所示。您可以按照[这些](http://api.highcharts.com/highstock#series.data)说明自定义颜色。祝你好运！

希望这会有所帮助，瑞秋 :)

# ruby-on-rails - Rails 3.2，关联/查找属于另一个模式的遗留表的最佳方法是什么？

> ID：14620252
> 
> 赞同：0
> 
> 时间：2013-01-31T07:07:42.760
> 
> 标签：ruby-on-rails, model, rails-activerecord

新的 Rails 家伙在这里...

我有一个 SimpleForm 模型，它属于属于另一个不是 Rails 应用程序的模式的 Parts 表。

对这种关联建模的最佳方法是什么，以便我的表单可以查找 Part_id 的 Parts 表，并且模型可以根据旧 Parts 表验证 part_id 外键？

可能性：在 Rails 应用程序中创建数据库视图和 activerecord 模型？创建一个带有查询/连接到 Parts 表的只读模型？

请具体一点，因为我对 Rails 了解不多。

我将 Rails 与 Oracle 和 Windows 一起使用，因此任何解决方案都必须与这些一起使用。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T07:47:05.073

我最终使用数据库迁移来创建数据库视图并为其创建只读模型。在我的 SimpleForm 中，设置belongs_to 与新零件模型的关系，并设置validates_presence_of 以对插入和编辑实施外部约束。看起来这是通过仅授予遗留表“选择”权限并将Rails模型设置为只读来进行只读外键引用的好方法。

# selenium - 如何在 selenium webdriver 中将控件从子窗口切换到父窗口？

> ID：14620253
> 
> 赞同：11
> 
> 时间：2013-01-31T07:07:53.237
> 
> 标签：selenium, selenium-webdriver

*   从父窗口我将控件传递给子窗口
*   我正在子窗口中执行操作
*   执行后，将从一个子窗口打开另一个窗口（第一个子窗口的子窗口）。
*   我必须关闭两个子窗口并返回父窗口。

    我无法将控件从子窗口切换到父窗口。我已经尝试了下面的代码

    ```
     String winHandleBefore = _driver.getWindowHandle();
    for(String winHandle : _driver.getWindowHandles()){
        _driver.switchTo().window(winHandle);
    }

    String winHandleAfter = _driver.getWindowHandle(); 
    ```

    /*在子窗口中执行操作*/

    ```
    driver.close();
    _driver.switchTo().window(winHandleBefore); 
    ```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T11:18:37.087

使用此代码：

```
 // Get Parent window handle
 String winHandleBefore = _driver.getWindowHandle();
 for (String winHandle : _driver.getWindowHandles()) {
   // Switch to child window
   driver.switchTo().window(winHandle);
 }

// Do some operation on child window and get child window handle.
String winHandleAfter = driver.getWindowHandle();

//switch to child window of 1st child window.
for(String winChildHandle : _driver.getWindowHandles()) {
  // Switch to child window of the 1st child window.
  if(!winChildHandle.equals(winHandleBefore) 
  && !winChildHandle.equals(winHandleAfter)) {
    driver.switchTo().window(winChildHandle);
   }
 }

// Do some operation on child window of 1st child window.
// to close the child window of 1st child window.
driver.close();

// to close the child window.
driver.close();

// to switch to parent window.
driver.switchto.window(winHandleBefore); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-15T06:01:45.927

在 WebDriver 中关闭多个弹出窗口并切换到父窗口

```
String parent = driver.getWindowHandle();

Set<String> pops=driver.getWindowHandles();
Iterator<String> it = pops.iterator();

while (it.hasNext()) {

    String popupHandle=it.next().toString();

    if(!popupHandle.contains(parent)){
        driver.switchTo().window(popupHandle);
        System.out.println("Popu Up Title: "+ driver.switchTo().window(popupHandle).getTitle());
        driver.close();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T11:22:04.643

像这样试试。

1.  关闭第二个子窗口
2.  然后有两个窗口主窗口和第一个子窗口
3.  尝试 getWindowhandles(); 它应该返回 2 个窗口句柄。
4.  从这两个窗口句柄中提取主窗口句柄。
5.  使用上面的窗口句柄切换回主窗口。

或者

driver.switchTo().defaultContent();

[http://santoshsarmajv.blogspot.in/2012/04/how-to-switch-control-to-pop-up-window.html](http://santoshsarmajv.blogspot.in/2012/04/how-to-switch-control-to-pop-up-window.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-28T22:39:20.297

```
 int i = WebDriver.WindowHandles.Count;
            if (i > 1)
            {
                //switch to child window
                WebDriver.SwitchTo().Window(WebDriver.WindowHandles[1]);
                //switch to parent window
                WebDriver.SwitchTo().Window(WebDriver.WindowHandles[0]);
            } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-15T09:05:20.697

打电话前试试这个

```
driver.switchTo().window(parentwindow); 
```

你应该打电话

```
driver.switchto.defaultcontent . 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-10T07:15:23.680

试试这个切换到差异窗口句柄并返回父窗口

```
 String winHandleBefore = driver.getWindowHandle();
  for(String winHandle : driver.getWindowHandles())
  {
  driver.switchTo().window(winHandle);
  }
    for (String handle1 : driver.getWindowHandles())
 { 
  driver.switchTo().window(handle1);
 } 
```

// 你的代码在这里

```
 driver.switchTo().window(winHandleBefore); //switch to parent window 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-09-04T06:03:37.487

```
String Parent_Window = driver.getWindowHandle();    

 for (String Child_Window : driver.getWindowHandles())  
 {  
 driver.switchTo().window(Child_Window);  
 //Perform operation on child window 
 driver.close();
 } 

 //Switching back to Parent Window  
 driver.switchTo().window(Parent_Window); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-17T22:05:57.203

```
 String parentWindow = driver.getWindowHandle();
    Set<String> allWindows = driver.getWindowHandles();
    for (String window : allWindows) {
        if (!window.equals(parentWindow)) {
            String childWindow = window;
            driver.switchTo().window(childWindow);
            driver.getCurrentlUrl(); // Child windows url link
        }
    }
    driver.switchTo().window(parentWindow); // switching control to the parent window
    driver.getCurrentlUrl();  // Parent windows url link
    driver.close(); //closes the child window
    driver.quit(); //quits the driver 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2019-05-15T12:10:42.027

试试下面的代码..它对我有用......

```
public static void main(String[] args) 
{
    System.setProperty("webdriver.chrome.driver", "./drivers/chromedriver.exe");
    WebDriver driver = new ChromeDriver();
    driver.manage().window().maximize();
    driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);
    driver.get("https://www.naukri.com/");

    //Get the address of main window
    String p = driver.getWindowHandle();

    //get address of all windows
    Set<String> allWH = driver.getWindowHandles();

    //get address of all windows and store it in ArrayList
    ArrayList<String> allWHCopy = new ArrayList<String>(allWH);

    //close the 2nd window
    for(int i=0;i<allWHCopy.size();i++)
    {
        if(i==2)
        {
            driver.switchTo().window(allWHCopy.get(i));
            driver.close();
        }
    }

    //To switch to main window
    driver.switchTo().window(p);

    //perform action in main window
} 
```

# c++ - 如何在 c++ 中的其他 mex (MATLAB) 对象文件中调用一个 cuda 对象文件的函数？

> ID：14620257
> 
> 赞同：0
> 
> 时间：2013-01-31T07:08:00.687
> 
> 标签：c++, matlab, compilation, cuda, object-files

我正在编写 mex 代码和 cuda 代码。我想知道每个代码有两个目标文件并从 mex 文件中调用 cuda 内核，因为我通过组合它们的目标文件来获得可执行文件。因此我需要知道（如果可能的话）我如何从另一个目标文件中调用一个目标文件的函数。它是否可以使用单独的编译器编译 mex 和 cuda 并以这种方式组合它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T19:10:47.013

这是完全可能的。前段时间我玩过这个。当前支持的方法使用 MATLAB 并行计算工具箱。[此处](http://www.mathworks.com/discovery/matlab-gpu.html)有执行此操作的说明。

稍微扩展一下，已编译的 mex 文件实际上只是带有已编译的 mex 网关的动态库。只要您拥有网关，适当地链接您的文件，并为生成的编译文件（如 mexa64、mexmaci64 等）提供适当的 mex 扩展名，该文件就可以工作。

需要注意的是，您无需使用 MATLAB 中的 mex 函数来编译您的文件。这允许您使用一些不受支持的方式在 MATLAB 之外进行编译。如果您没有并行工具箱，如果您需要对正在发生的事情进行更微妙的控制，或者更喜欢在工作流程中使用 make，这可能会很有用。如何开始使用的说明在[这里](http://www.mathworks.com/help/matlab/matlab_external/custom-building-mex-files.html)。

# dll - 从 RunOnce 启动的 bat 文件注册 COM 服务器时出错

> ID：14620268
> 
> 赞同：0
> 
> 时间：2013-01-31T07:09:05.257
> 
> 标签：dll, installation, 64-bit, registration, dcom

我目前正在 Windows XP 64 位机器上安装我的产品。我正在尝试将我的 COM 模块注册为安装的一部分。我通过在“RunOnce”（注册表）键中添加一个条目来启动一个 bat 文件并从该 bat 文件完成注册。

我的所有 COM dll 均已正确注册，但其中两个 COM 服务器 (.exe) 显示错误，即无法加载其依赖项 dll 之一。但是同一个 dll 与另一个 COM 服务器静态链接，并且该服务器注册成功！

令人惊讶的是，直接运行相同的 bat 文件（双击它）不会产生任何错误，并且它适用于所有程序集！我已经在我的几台测试机器中检查了这一点，只有显示这种行为的机器。不幸的是，那不是客户工具机。

它不是依赖 dll 不可用的问题。因为在通过直接运行bat文件注册了所有文件后，我可以通过手动在RunOnce中添加一个键并重新启动机器来再次重现这一点。

附加信息，我正在通过 logmein 远程访问这台机器。

确切的错误消息：“此应用程序无法启动，因为找不到 XXX.dll。重新安装应用程序可能会解决此问题”。

此 XXX.dll 在同一路径中不可用，但在另一个文件夹中，并且其路径在路径变量中可用。

bat文件内容是；

"C:\WINDOWS\system32\regsvr32.exe" RemoteControlHandler.dll

"C:\WINDOWS\system32\regsvr32.exe" ProcPgmHandler.dll

"C:\WINDOWS\system32\regsvr32.exe" GEM300Handler.dll

"C:\WINDOWS\system32\regsvr32.exe" ICEScreenAdapter.ocx

HIB.exe /regserver //抛出错误

JobManager.exe /regserver

Cim300Adapter.exe /regserver

GemEquipmentCtrl.exe /regserver //抛出错误

希望这些信息对专家来说已经足够了，如果您需要任何其他信息，请随时询问。

尼克松

# java - 无限循环，在Eclipse中如何知道现在正在运行什么代码？

> ID：14620270
> 
> 赞同：9
> 
> 时间：2013-01-31T07:09:15.553
> 
> 标签：java, android, eclipse

我正在使用 eclipse 在我的设备中运行一些 android/java 代码。有时代码似乎陷入了循环。有时它会起作用。我想知道，在 Eclipse 中有没有一种方法可以告诉它显示我当前正在运行的内容？甚至调用最后一个方法？我想知道这个“代码卡住”在哪里，所以我可以修复它。介入将无济于事，因为我需要代码不间断地运行才能重现

请帮忙

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-31T07:13:21.303

在连接了 Eclipse 调试器的情况下运行应用程序。当它卡住时，单击暂停（“暂停”）按钮。也许您必须执行一些单步操作才能跳出某些 lib 调用并访问您的代码。在调试透视图中，您可以看到告诉您所在功能的调用跟踪。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T16:07:23.040

如果您不想或无法在调试模式下运行应用程序，您可以使用[Java VisualVM](http://visualvm.java.net/)，该工具可以在`bin`您安装的 JDK 的文件夹中找到，名称为`jvisualvm.exe`。

它为您提供了一种查看所有正在运行的线程、被调用的方法的方法，并且在出现死锁的情况下，它可以帮助您找出它发生的位置。

我从未使用此工具来监视其他机器甚至其他设备上的应用程序，但是，我知道在“文件”菜单下有一个名为“添加远程主机...”的选项。也许，您可以从那里监控您的应用程序。

# clearcase - 更新文件而不用 clearcase 签出

> ID：14620275
> 
> 赞同：1
> 
> 时间：2013-01-31T07:09:35.180
> 
> 标签：clearcase

在 Rational ClearCase 中。我更新了一个文件而没有进行检查，更新后它问我它是否处于只读模式仍然你想要进行更改，我错误地点击了是。

之后，我意识到错误并检查了文件，然后将其签入（例如版本 4）。
再次，我检查了文件并进行了一些更改并将其签入（例如版本 5）。

现在，当我查看该文件的版本历史时，没有显示第 4 版，第 3 版，然后只是第 5 版，但是当我将第 5 版与以前的版本进行比较时，它会与第 4 版进行比较。

我怎样才能让这个版本 4 出现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:29:17.280

OP提到：

> 我想我在更新主分支文件之前已经在分支中签入了这个文件，所以这导致了这个问题。

这是可能的，并且可以解释为什么 V4 在主分支中不可见。

确保这一点的一种方法是查看 cleartool lsvtree（文本），同时查看以下结果：

```
cleartool ls /path/to/parent/directory 
```

（文件的父目录）

您可以查看所有选定的版本，并将它们与您的配置规范进行比较。

* * *

原始答案

这（修改文件而不首先签出）只能在快照视图（不是动态视图）中实现，并导致文件被劫持。

您已通过结帐/签入正确解决了这种情况。
但是，如果您在结帐时选择的版本*不是*最新的（而是版本 2），那么 V4 将跟随 V2。

如果您有混合订单版本，恢复稳定状态的一种方法是：

*   更新快照视图，并检查您是否处于该文件的最新状态。
*   将您最近的修改 (V5) 合并到当前的 LATEST 版本

如果你有一个缺失的版本，那可能是因为它存在于它自己的分支中（你当前的配置规范没有选择它）。图形版本树应该显示它（带有`-all`选项）。

```
cleartool lsvtree -all --graph /path/to/File 
```

# java - 递归 FFT 错误？

> ID：14620278
> 
> 赞同：0
> 
> 时间：2013-01-31T07:09:57.737
> 
> 标签：java, math, fft, polynomial-math, ifft

下面给出的是我的 FFT 的 java 程序。对于输入 {0,2,3,-1}，它以复点表示形式返回错误输出。

```
 import java.io.*;
 public class test{
static double s[]={0,2,3,-1};
static double[][] re=new double[s.length][2];
static double[][] er=new double[s.length][2];
static double[][][] ma=new double[s.length][s.length][2];
public static void main(String args[])
{
    double[][] aray1=new double[s.length][2];
    for(int i=0;i<s.length;i++)
    {
        aray1[i][0]=s[i];
        aray1[i][1]=0;
    }
    re=fft(aray1,1);
    for(int i=0;i<re.length;i++)
    {
        System.out.println(""+re[i][0]+"+i*"+re[i][1]);
    }
            //Inverse FFT
    re=fft(re,-1);
    for(int i=0;i<re.length;i++)
    {
        //System.out.println("sdsfbv /n /n");
        System.out.println(""+(re[i][0]/s.length)+"+i*"+((re[i][1])/s.length));
    }

}
public static double[][] complexmult(double[][] a,double[][] b)
{
    double[][] e=new double[1][2];

    return e;
}
public static double[][] fft(double[][] a, int c)
{
    double[][] de=new double[1][2];
    int n=a.length;

    if(n==1)
    {
        return a;
    }
    double wnx=Math.cos(c*2*Math.PI/n);
    double wny=Math.sin(c*2*Math.PI/n);
    double wx=1;
    double wy=0;
    double[][] y=new double[n][2];
    double[] e=new double[n];
    double[][] a0=new double[n/2][2];
    double[][] a1=new double[n/2][2];
    double[][] y0=new double[n][2];
    double[][] y1=new double[n][2];
    for(int i=0,k=0,j=0;i<n;i=i+1)
    {
        if((i%2)==0)
        {

            a0[k][0]=a[i][0];
            a0[k][1]=a[i][1];
            k=k+1;
        }
        else
        {

            a1[j][0]=a[i][0];
            a1[j][1]=a[i][1];
            j=j+1;
        }
    }
    y0=fft(a0,c);
    y1=fft(a1,c);       
    for(int k=0;k<=((n/2)-1);k++)
    {
        double m1=((wx*y1[k][0])-(wy*y1[k][1]));
        double m2=((wx*y1[k][1])+(wy*y1[k][0]));
        y[k][0]= y0[k][0]+m1;
        y[k][1]=y0[k][1]+m2;
        y[k+(n/2)][0]=y0[k][0]-m1;
        y[k+(n/2)][1]=y0[k][1]-m2;
        wx=((wx*wnx)-(wy*wny));
        wy=((wx*wny)+(wy*wnx));
    }
    return y;       
}
} 
```

输出如下：

```
 4.0+i*0.0
    -3.0+i*1.8369701987210297E-16
    2.0+i*0.0
    -3.0+i*-1.8369701987210297E-16 
```

但是输出应该是：

```
 4.0+i*0.0
    -3.0+i*-3
    2.0+i*0.0
    -3.0+i*3 
```

似乎我错过了 fft() 某处的逻辑错误。有人可以帮我找到它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T09:22:37.227

问题在于这两行：

```
 wx=((wx*wnx)-(wy*wny));
    wy=((wx*wny)+(wy*wnx)); 
```

`wx`在使用第一行中的新值来计算`wy`第二行中的新值之前，您正在破坏值。所以，复数乘法的结果是不正确的。此外，虽然这不会导致错误，但无需初始化`y0`，`y1`因为它们是由对`fft`. 还有其他未使用的变量。

# iphone - iOS获取jpg文件的宽度高度

> ID：14620279
> 
> 赞同：6
> 
> 时间：2013-01-31T07:10:01.137
> 
> 标签：iphone, ios, objective-c, image, jpeg

在我的 iOS 应用程序中，我正在从网上下载 jpeg 图像，我想知道如何找到图像的正确宽度和高度，以便可以在我的 iOS 应用程序中正确显示它。

例如，
![在此处输入图像描述](../Images/907189eda054f8fb8b1373160c8e90b0.png)

如何获取此 jpg 图像的宽度和高度？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-31T07:12:16.360

您可以获得图像高度和宽度，例如：-

```
NSData *imageData = [NSData dataWithContentsOfURL:imageUrl];
UIImage *image = [UIImage imageWithData:imageData];
NSLog(@'image height: %f',image.size.height);
NSLog(@'image width: %f',image.size.width); 
```

**更新：-**

根据您的网址，您可以获得：-

```
NSString *ImageURL = @"http://gigaom2.files.wordpress.com/2013/01/teacher-classroom.jpg";

    ImageURL =[ImageURL stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding];

    NSLog(@"img url ==%@",ImageURL);
    NSURL *imageUrl =[NSURL URLWithString:ImageURL];
    NSData *imageData = [NSData dataWithContentsOfURL:imageUrl];
    UIImage *image = [UIImage imageWithData:imageData];
    [inView setImage:image];
    NSLog(@"image height: %f",image.size.height);

    [lbl1 setText:[NSString stringWithFormat:@"%2.0f",image.size.height]];
    [lbl2 setText:[NSString stringWithFormat:@"%2.0f",image.size.width]]; 
```

你的屏幕看起来像： -

![在此处输入图像描述](../Images/8c9137f3eafc6a8c04b3712c1a027072.png)

我只是为您创建一个演示 :) 链接如下

[http://www.sendspace.com/file/7pp63a](http://www.sendspace.com/file/7pp63a)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T07:11:39.857

[**`UIImage`**](http://developer.apple.com/library/ios/documentation/uikit/reference/UIImage_Class/Reference/Reference.html#//apple_ref/occ/instp/UIImage/size)有财产`size`

```
image.size.width
image.size.height 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-31T07:15:56.210

`UIImage`您可以使用Size 属性来实现这一点。

看看下面：

```
UIImage *image;

NSLog(@'Width=%f and Height: %f',image.size.width, image.size.height); 
```

将您的网络图像存储到“图像”对象中，您将获得图像的宽度和高度。

干杯!

# wpf - wpf中的类与结构绑定问题

> ID：14620280
> 
> 赞同：1
> 
> 时间：2013-01-31T07:10:03.197
> 
> 标签：wpf, data-binding

**学生班**

```
public class Student
{
    string name;        
    List<SubjectInfo> subjectInfoList;    
    ....
} 
```

`List<SubjectInfo>`对于不同的学生，列表可以有不同数量的`SubjectInfo`对象。

**SubjectInfo 结构**

```
public struct SubjectInfo
{
    string subjectCode;
    int marks;
    ...
} 
```

我想在窗口上显示学生对象的详细信息。由于**List**有不同数量的对象计数，我使用`ItemsControl`并使用了 dataTemplate。

绑定学生对象非常有效。

```
Student student = new Student("Joe", new List<SubjectInfo>() { new SubjectInfo("Subject1", 50), new SubjectInfo("Subject2", 70) });  
StudentGrid.DataContext = student; 
```

但是这个`TwoWay`绑定不起作用`SubjectInfo`（从 UI 更改值不会被代码隐藏）
但是如果将**SubjectInfo 结构**更改为**SubjectInfo 类**，它就可以工作。

无法理解为什么。请给我建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T07:13:58.683

通过分配 a `SubjectInfo`to `DataContext`，它被复制（因为它是`struct`/ `ValueType`），这就是绑定不起作用的原因。在大多数情况下，这不是您想要的。我建议你改用一个类`SubjectInfo`。

您应该知道 和 之间的`class`区别`struct`。[C# 规范 (V4.0)](http://go.microsoft.com/fwlink/?LinkId=199552)对它们进行了如下总结（在第 11.3 节中）：

*   结构是值类型（§11.3.1）。
*   所有结构类型都隐式继承自类`System.ValueType`（第 11.3.2 节）。
*   对结构类型变量的赋值会创建一个被赋值的值的*副本*（第 11.3.3 节）。
*   结构的默认值是将所有值类型字段设置为其默认值并将所有引用类型字段设置为`null`（第 11.3.4 节）所产生的值。
*   装箱和拆箱操作用于在结构类型和`object`(§11.3.5) 之间进行转换。
*   结构的含义`this`不同（第 7.6.7 节）。
*   不允许结构的实例字段声明包含变量初始值设定项（第 11.3.7 节）。
*   不允许结构声明无参数实例构造函数（第 11.3.8 节）。
*   不允许结构声明析构函数（第 11.3.9 节）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T07:14:13.800

Struct 是一种值类型，绑定将获得它的副本，因此永远不会更新原始对象。

# javascript - 为什么 jquery $.post 命令不向服务器发送 JSON 数据

> ID：14620282
> 
> 赞同：1
> 
> 时间：2013-01-31T07:10:06.113
> 
> 标签：javascript, jquery, json, flask

我一直在使用该`$.getJSON`命令一段时间。但由于我实际上是在发布到服务器，所以我需要使用 $.post。但是一旦我从 切换`$.getJSON`到`$.post`，后端，即 Flask Python 框架，似乎没有收到任何 JSON 数据。这是我唯一改变的。**[$.post](http://api.jquery.com/jQuery.post/)**的文档似乎表明使用任一命令发送数据的格式相同。

使用`$.getJSON`，我可以使用 request.args.get 命令访问 Flask 中的 JSON 参数。但是改成$​​.post之后，request.args是空的（所以request.args.get()总是返回None）。这是带有以下内容的javascript行`$.getJSON`：

```
$.getJSON("/admin/emails/ajax/send", {'data':JSON.stringify(data)}, function(){...}) 
```

然后想象一下那条线`$.post(...)`。

***编辑***看来问题是当我从“GET”更改为“POST”时，数据从 Flask 的`request.args`对象中消失了。我尝试使用该`$.ajax`方法并获得相同的结果。有人知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T07:11:45.427

只需解开这个野兽并使用 $.ajax 这样你就不会被包装器绊倒。

```
$.ajax({
    type: 'POST',
    url: '/admin/emails/ajax/send',
    data: JSON.stringify(data),
    dataType: 'json',
    success: function(json){
        //the JSON response from the server
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T18:33:24.683

好的，我想通了。如果您以“GET”方法将 JSON 数据发送到服务器，Flask 会将 JSON 数据放入`request.args`. 相反，如果您使用 'POST' 方法发送数据，Flask 会将数据放入`request.form`. 有点混乱，但无论如何。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T07:14:31.570

上面的答案是正确的，但是如果想使用 $.post 你应该去服务器端并添加一个标题：“Content-type: app/json”（类似这样的 google it）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T07:21:26.527

您是否尝试过`$.post`这种方式：

```
$.post("/admin/emails/ajax/send", {'data':JSON.stringify(data)}, function(data){
   console.log(data);
}, "json");
//-^^^^^^-----------are you putting dataType here. 
```

# arrays - Array.Add 与 +=

> ID：14620290
> 
> 赞同：211
> 
> 时间：2013-01-31T07:10:36.783
> 
> 标签：arrays, powershell

我在 PowerShell 数组中发现了一些有趣的行为，即，如果我将数组声明为：

```
$array = @() 
```

然后尝试使用该`$array.Add("item")`方法向其中添加项目，我收到以下错误：

> 使用“1”参数调用“添加”的异常：“集合具有固定大小。”

但是，如果我使用 附加项目`$array += "item"`，则该项目被接受而没有问题，并且“固定大小”限制似乎不适用。

为什么是这样？

* * *

## 回答 #1

> 赞同：293
> 
> 时间：2013-01-31T07:19:11.650

使用`$array.Add()`- 方法时，您尝试将元素添加到现有数组中。数组是固定大小的集合，因此您将收到一个错误，因为它无法扩展。

`$array += $element`创建一个**新**`$array`数组，其元素与旧数组 + 新项相同，并且这个新的更大数组替换 -变量中的旧数组

> 您可以使用 += 运算符将元素添加到数组中。当您使用它时，Windows PowerShell 实际上会使用原始数组的值和添加的值创建一个新数组。例如，要将值为 200 的元素添加到 $a 变量中的数组，请键入：
> 
> ```
>  $a += 200 
> ```

资料来源：[about_Arrays](http://technet.microsoft.com/en-us/library/hh847882.aspx)

`+=`是一项昂贵的操作，因此当您需要添加许多项目时，您应该尝试在尽可能少的操作中添加它们，例如：

```
$arr = 1..3    #Array
$arr += (4..5) #Combine with another array in a single write-operation

$arr.Count
5 
```

如果这不可能，请考虑使用更有效的集合，例如`List`or `ArrayList`（请参阅其他答案）。

* * *

## 回答 #2

> 赞同：138
> 
> 时间：2015-10-15T18:48:47.710

如果您想要一个动态大小的数组，那么您应该制作一个列表。您不仅可以获得`.Add()`功能，而且正如@frode-f 解释的那样，动态数组更节省内存，并且无论如何都是更好的实践。

它非常易于使用。

而不是你的数组声明，试试这个：

```
$outItems = New-Object System.Collections.Generic.List[System.Object] 
```

添加项目很简单。

```
$outItems.Add(1)
$outItems.Add("hi") 
```

如果你在完成后真的想要一个数组，那么也有一个函数。

```
$outItems.ToArray() 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2019-11-04T20:52:53.780

在不使用低效率的情况下创建数组的最常见习惯用法`+=`是这样的，来自循环的输出：

```
$array = foreach($i in 1..10) { 
  $i
}
$array 
```

```
[collections.arraylist]$array = 1..10
$array.add(11) > $null 
```

# wcf - WCF Rest Application_End

> ID：14620295
> 
> 赞同：0
> 
> 时间：2013-01-31T07:10:58.810
> 
> 标签：wcf, rest, global-asax

我有一个 WCF Rest 服务，并且我已将此属性添加到服务中：

```
 [AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
 [ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall)]
 [ServiceContract] 
```

我不确定这两个陈述中的哪一个是正确的：

*   每次请求完成时都会调用 Global.asax 中的 Application_End

或者

*   当 IIS 触发回收时，将调用 Global.asax 中的 Application_End

你能帮我吗？我无法理解日志中的这么多 Application_End

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:19:01.030

InstanceContextMode.PerCall——每次调用都会产生一个服务实例。不同于标准的先进先出方法。如果您一次使用 10 个请求访问您的服务，您应该会看到 10 个 Application_End 事件。

每次请求完成时都会调用 Global.asax 中的 Application_End

# c++ - 修改地图中的队列

> ID：14620303
> 
> 赞同：0
> 
> 时间：2013-01-31T07:11:22.443
> 
> 标签：c++, map, queue, constants

无法修改地图中的队列。

```
map<string , queue<item*> > itemList; // what the map creation looks like

map<string, queue<item*> >::const_iterator itr; // creating an iterator

//for every item in a warehouse
for(itr = itemList.begin(); itr != itemList.end(); ++itr)
{
    //while there are items in the queue with 1 day shelf life
    while(itr->second.front()->getLife() == 1)
    {
        //throw them away
        itr->second.pop();
    }
} 
```

但我一直收到一个错误告诉我：

错误：将 'const std::queue > >' 作为 'std::queue > >& std::queue > >::operator=(const std::queue > >&)' 的 'this' 参数传递会丢弃限定符

提前感谢您对此提供的任何帮助。:-(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T07:13:59.047

您正在通过 a 访问地图元素`const_iterator`，因此您无法修改它们（严格来说，您只能`const`在元素上调用方法，而`std::queue::pop()`不是一个）。尝试使用非常量`iterator`：

```
map<string, queue<item*> >::iterator itr; 
```

# css - 试图将我的文字放在图像的右侧，遇到一些问题

> ID：14620311
> 
> 赞同：0
> 
> 时间：2013-01-31T07:11:45.397
> 
> 标签：css

```
#index .post-tnail {
position:relative;
margin:0 0 10px -4px;
}

#index .post-tnail img {
position:relative;
float:left;
display:block;
width:200px;
height:auto;
background:#1c1c1c;
border:1px solid #2a2a2a;
padding:3px;
}

#index .post-content {
margin:0 0 10px -4px;
position: relative;
}

<div class="post-tnail">
    <a href="#"><img src="images/news/1.jpg" alt="Img" title="Img" /></a>
</div>                          

<div class="post-content">
    <p>Some text</p>
</div> 
```

问题是这样的。

```
| [IMAGE]Text1 |
| Text2        |
| Text3        | 
```

Text1 离图像太近。text1 和图像之间应该有 15px 的距离。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:13:47.203

给`<img>`- `margin-right: 15px`。**由于 img 是浮动元素，文本**上的边距和填充将无法正常工作：

```
#index .post-tnail img {
    margin-right: 15px
{ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T07:19:55.147

在图像上放置一个margin-right（或者margin-bottom，如果它是问题所在的图像下方的空间）。像这样：

```
#index .post-tnail img {
position:relative;
float:left;
display:block;
width:200px;
height:auto;
background:#1c1c1c;
border:1px solid #2a2a2a;
padding:3px;
margin-right:5px;
} 
```

# facebook - iOS 6 facebook 服务器无法完成此访问请求无效应用程序

> ID：14620317
> 
> 赞同：16
> 
> 时间：2013-01-31T07:12:07.503
> 
> 标签：facebook, sdk, ios6

在某些 iPhone 5 设备中，我们在尝试调用 Facebook 登录时出现错误：

错误是：“Facebook 服务器无法完成此访问请求无效的应用程序 ID”

我多次检查是否正确指定了应用程序 ID。

奇怪的是，在其他设备上相同的应用程序工作正常。

请问各位大神帮忙看看这是什么原因？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-01-04T01:52:46.593

Facebook 应该知道某个特定应用程序的所有开发者。当应用程序处于沙盒模式（即仅开发人员访问）时，所有想要使用 Facebook 平台测试/开发应用程序的用户都必须添加为开发人员（如下所示） -

只需转到[https://developers.facebook.com/apps/](https://developers.facebook.com/apps/)，然后在开发人员/管理员列表中添加用户。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-19T19:02:26.597

该应用程序很可能是“沙盒”，因此只有开发人员可以访问。如果是这种情况，您将不得不在 iPhone 上使用开发者帐户。

1.  转到 iOS 设置 > Facebook
2.  使用您的“个人”帐户注销
3.  使用开发者帐户登录（为了安全起见，您创建应用程序时使用的开发者帐户）

这对我有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-15T20:07:31.227

我遇到了这个问题。对我来说，问题是我没有为应用程序添加 iOS 平台。转到 Facebook 开发者页面，然后选择您的应用程序。在左侧导航栏中，转到设置。然后添加平台。确保您的包标识符是正确的。然后它应该工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-13T13:32:10.607

如果您一直在使用沙盒 facebook 应用程序进行测试，然后在切换到生产应用程序时收到此错误，请**确保您已**在状态和审核选项卡中发布了该应用程序。

# regex - 带有斜杠和文件路径的正则表达式

> ID：14620318
> 
> 赞同：0
> 
> 时间：2013-01-31T07:12:10.870
> 
> 标签：regex, bash, parsing, logging

想解析一些日志，有点难。日志如下所示：

```
/ajax/foto.php?whatever-session-info-here
/edit.php?path=blahblah-imgage-url.jpg
/catalog/whetaever-text-here
/item/whetaever-text-here
/gallery (without slash at the end) 
```

所以

> /[a-zA-Z-]{0,}/

适用于斜线之间的文本，我有

```
/catalog/
/item/ 
```

正则表达式工作后

所以问题是如何获得这个例子的输出，看起来像：

```
/ajax/foto.php
/edit.php
/catalog/
/item/
/gallery 
```

**添加**：找到这个，只需要前两个斜杠之间的文本：

```
/foto/300/b/5/4/19123312.jpg 
```

获取 /foto/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:28:47.310

/[a-zA-Z] *(/?)([a-zA-Z]* .[a-zA-Z]*)?

经测试

[http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-05T10:50:34.877

or

```
 s = '/foto/300/b/5/4/19123312.jpg'
    s.split('/')[1]
     => "foto" 
```

# sql - 根据日期获取最新记录

> ID：14620319
> 
> 赞同：1
> 
> 时间：2013-01-31T07:12:11.650
> 
> 标签：sql, sql-server-2008

我在 SQL Server 2008 中有 SQL 表，我想获取取决于其日期的最新记录。

我写了一个查询

```
 SELECT TOP 1 * 
    FROM ProductPrice
   WHERE ProductID = 1698
     AND EffectiveFrom <= '1/31/2013'
ORDER BY EffectiveFrom DESC 
```

并且在数据库中有一条记录，其中包含日期 2013-01-31 12:12:49.000

现在我期待上面的查询将返回 1 条记录，但它没有返回任何内容我应该在查询中更改什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T07:15:44.077

关键是您的日期是日期时间......除非您通过强制转换/转换摆脱时间戳，或者更改您的 where 子句。`2013-01-01 HH:MM:SS`永远都是`> 01/01/2013`。

```
 SELECT TOP 1 * 
    FROM ProductPrice
   WHERE ProductID = 1698
     AND CONVERT(CHAR(8), EffectiveFrom, 112) <= '20130101'
ORDER BY EffectiveFrom DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T07:16:41.923

因为表中的数据不仅包含日期，还包含时间

```
 SELECT TOP 1 * 
    FROM ProductPrice
   WHERE ProductID = 1698
     AND CAST(EffectiveFrom AS date) <= '1/31/2013'
ORDER BY EffectiveFrom DESC 
```

或者

```
 SELECT TOP 1 * 
    FROM ProductPrice
   WHERE ProductID = 1698
     AND EffectiveFrom <= DATEADD(SECOND, 86399, '1/31/2013')
ORDER BY EffectiveFrom DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T07:17:27.410

问题是您将 '1/31/2013 00:00' 与 '1/31/2013 12:12' 进行比较 - 它小于该值。您需要将查询转换为：

```
SELECT TOP 1 *  
FROM ProductPrice 
WHERE  ProductID = 1698 
   AND CONVERT(DATE,EffectiveFrom) <= '1/31/2013' 
ORDER BY EffectiveFrom DESC 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T07:22:10.650

请试试：

```
 SELECT TOP 1 * 
    FROM ProductPrice
   WHERE ProductID = 1698
     AND EffectiveFrom <= (CONVERT(DATETIME, '1/31/2013') + 1)
ORDER BY EffectiveFrom DESC 
```

它没有被选中，因为日期时间值`2013-01-31 12:12:49.000`大于`1/31/2013`.

# html - HTML表格移动到中心

> ID：14620323
> 
> 赞同：0
> 
> 时间：2013-01-31T07:12:19.453
> 
> 标签：html, html-table

我的 html 表有问题。我试图将它移到中间，但它一直向右移动。我尝试了许多不同的方法，但这就是我到目前为止所做的：

```
<style type="text/css">

table.gridtable2 {
    font-size:11px;
    border: none;
}
table.gridtable2 th {
    padding: 7px;
    color:#008CBD;
    background: rgba(0,0,0,0.3);

}
table.gridtable2 td {
    padding: 6px;
        color:#FFFFFF;
    background: rgba(0,0,0,0.2);
}
table.gridtable2 tr {
    text-align: center;
}
</style>

    <table class="gridtable2" width="539" cellspacing="0" cellpadding="0">
        <tr>
            <th></th>
            <th>Title</th>
            <th></th>
        </tr>
        <tr>
            <td>Sold</td>
            <td>-</td>
            <td>0€&lt;/td>
        </tr>
        <tr>
            <td>Else</td>
            <td>-</td>
            <td>0€&lt;/td>
        </tr>
        <tr>
            <td>Total</td>
            <td>-</td>
            <td></td>
        </tr>
    </table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T07:14:47.343

```
table.gridtable2 {
    font-size:11px;
    border: none;
    margin: 0 auto;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T07:20:39.170

您应该将 margin-left 和 margin-right 设置为 auto。

```
<table style="width=50%;margin-left:auto; margin-right:auto" width="539" cellspacing="0" cellpadding="0">
    <tr>
        <th></th>
    <th>Title</th>
    <th></th>
</tr>
<tr>
    <td>Sold</td>
    <td>-</td>
    <td>0€&lt;/td>
</tr>
<tr>
    <td>Else</td>
    <td>-</td>
    <td>0€&lt;/td>
</tr>
<tr>
    <td>Total</td>
    <td>-</td>
    <td></td>
</tr>
</table> 
```

# ember.js - Ember 将 id 分配给创建的记录

> ID：14620324
> 
> 赞同：3
> 
> 时间：2013-01-31T07:12:24.597
> 
> 标签：ember.js, ember-data

我正在用这个创建一个新用户：

```
var transaction = App.store.transaction();
transaction.createRecord(App.User, {
    firstName: this.get('firstName'),
    lastName: this.get('lastName')
});
transaction.commit(); 
```

我的服务器正在返回

```
{"first_name":"Han","last_name":"Solo","id":"19"} 
```

但新创建的用户 ID 为空。要么我没有从服务器返回正确的结果，要么我需要执行另一个步骤来分配新用户的 ID。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T07:59:27.503

您的服务器应该返回以下 json 字符串。

```
{"user":{"first_name":"Han","last_name":"Solo","id":"19"}} 
```

# servlets - 从 Servlet 请求中获取操作名称

> ID：14620327
> 
> 赞同：0
> 
> 时间：2013-01-31T07:12:28.967
> 
> 标签：servlets, servlet-filters, web.xml

我有 ABC.action 调用过滤器类的 doFilter 方法，该方法在 web.xml 中正确配置

我需要从请求对象中找到动作名称。我怎样才能做到这一点？

```
public void doFilter(ServletRequest request, ServletResponse response, FilterChain filterChain)
     throws IOException, ServletException {
  long t1 = System.nanoTime();
  filterChain.doFilter(request, response);
  long t2 = System.nanoTime();
  long time = t2 - t1;

  // Just writing statistics to servlet's log
  System.out.println("## " +
        "ArriveTime ns " + t1 + " Departtime ns " + t2 + " ServiceTime : " + time);
//      System.out.println("Time taken to process request to "
   //                                          + ((HttpServletRequest)         request).getRequestURI()
 //                                          + ": " + totalTime + " ms.");
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:31:50.163

试试下面的代码（在 JBOSS 中工作）。

```
 public void doFilter(ServletRequest req, ServletResponse resp,
            FilterChain fc) throws IOException, ServletException {
        System.out.println("Request");
        System.out.println(req);
        // req instance of HttpServletRequest
        if (req instanceof HttpServletRequest) {

            HttpServletRequest httpReq = (HttpServletRequest) req;
            System.out.println(httpReq.getRequestURI());
        } else {
            // req is not instance of HTTPServletRequest then try reflection
            try {
                Class clazz = Class
                        .forName("org.apache.catalina.connector.RequestFacade");
                Method method = clazz.getMethod("getContextPath", new Class[0]);
                String actionName = (String) method.invoke(req, new Object[0]);
                System.out.println(actionName);
            } catch (ClassNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (SecurityException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (NoSuchMethodException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IllegalArgumentException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IllegalAccessException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (InvocationTargetException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }

    } 
```

# vb6 - VB6应用程序自动更新解决方案

> ID：14620330
> 
> 赞同：0
> 
> 时间：2013-01-31T07:12:33.877
> 
> 标签：vb6, synchronization, auto-update

我正在开发一个具有许多可执行文件和一个 Active X dll 的 VB6 应用程序。

并且偶尔会在 c;lient 机器中更新到最新版本，我要求用户手动更新。

您能否建议我一种方法，使用该方法我可以从可在线获得的文件中自动更新它。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T08:58:28.583

Windows Installer 具有支持[修补和升级](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370579%28v=vs.85%29.aspx)的功能。使用这些技术，您可以创建各种级别的“升级”包。

您的应用程序需要一个单独的“更新”实用程序，该实用程序在用户批准更新时生成，可能是为了响应您的程序在检查新版本后提出的提示。

此更新程序将检查当前版本和远程站点的更新目录以选择适当的程序包，将其下载到临时位置，启动 Windows Installer 以处理程序包（或程序包，有时您可能需要运行多个安装程序运行），并且清理临时位置。然后您可能会提出重新启动更新的应用程序或在某些情况下需要重新启动。

此更新程序将是常见“安装引导程序”的一种奇特形式。正如您所知道的那样，它需要一些“智能”来告诉以什么顺序下载和安装一个或多个软件包，何时需要请求重新启动等。这可能基于它获得的下载的“规则脚本”选择有效更新选项的一部分。

毕竟，有时您可以只应用次要升级或补丁升级，有时您需要更完整的安装或整个重新安装。

如果您的需求非常简单（只是一个 EXE，可能还有一些 DLL 和 OCX - 最好使用无 reg 的 COM），您可能不需要这么多。但是，当您开始添加其他考虑因素时，例如多个程序、数据目录创建和安全设置、可能运行设置文件转换甚至数据库转换、DCOM、防火墙等配置、数据库驱动程序或提供程序等，事情会很快变得复杂。对于简单的抓取和抓取更新来说太复杂了。

管理员权限/UAC 问题是一个因素，因此您可能必须处理权限提升问题。

这些都不是小事。有些人只是将构建和测试这样的部署系统作为他们的全部工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:56:47.107

如果您使用 Inno setup 之类的东西来安装应用程序，那么更新很简单，只需定期运行即可。您可以通过检查网站/本地服务器来检测是否有可用的新版本，或者在 X 天后提示运行更新。

# java - Java初始化字符串数组

> ID：14620332
> 
> 赞同：-6
> 
> 时间：2013-01-31T07:12:42.663
> 
> 标签：java

我可以像这样初始化字符串数组吗

```
String arr=new String[];/* initialize the array */ 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T07:14:59.793

不，因为您需要告诉编译器您希望数组有多大。请记住，数组在创建后具有固定大小。所以这些都可以，创建一个空数组：

```
String[] array = {};
String[] array = new String[0];
String[] array = new String[] {}; 
```

诚然，空数组很少有用。在许多情况下，您最好使用 an`ArrayList<String>`代替。当然，有时您*必须*使用数组 - 例如，为了从方法返回值。

如果你想创建一个特定长度的数组，然后再初始化它，你可以指定长度：

```
String[] array = new String[5];
for (int i = 0; i < 5; i++) {
    array[i] = String.valueOf(i); // Or whatever
} 
```

空数组的一个很好的特性是它们是不可变的——你不能改变长度，因为长度为 0，所以没有元素可以改变。因此，如果您*要*定期使用特定类型的空数组，则只需创建一次：

```
private static final String[] EMPTY_STRING_ARRAY = {}; 
```

...并在任何地方重复使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T07:37:32.000

不，你不能那样做。它会产生你应该写的编译错误

```
String[] arr=new String[4];  //you should declared it sized 
```

或者

```
String[] arr={"asgk"}; 
```

或者

```
String[] arr=new String[]{}; 
```

# unix - 使用 UNIX 命令格式化文件行

> ID：14620333
> 
> 赞同：1
> 
> 时间：2013-01-31T07:12:43.710
> 
> 标签：unix

我的文件内容为：

```
file1.txt|file2.txt|file2.txt|.............................fileN.txt
log1.txt|log2.txt|log3.txt|................logN.txt 
```

我想将**每一行从右到左**打印为：输出：

```
fileN.txt|fileN-1.txt|fileN-2.txt|.............................file1.txt
logN.txt|logN-1.txt|logN-2.txt|................log1.txt 
```

如果不清楚，请帮助或让我知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T07:26:53.837

当您阅读此文件时，您可以编写简单的 perl 脚本...用分隔符将行`"|"`切开并将其放入一个数组中，然后再次将此数组与反向索引写入文件。

我希望你理解算法

问候， 维奈

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T07:51:33.863

这是一种使用方法`awk`：

```
awk -F "|" '{ for (i=NF;i>=1;i--) printf "%s", $i (i==1 ? "\n" : FS) }' file 
```

测试：

内容`file`：

```
file1.txt|file2.txt|file3.txt|file4.txt|file5.txt|file6.txt
log1.txt|log2.txt|log3.txt|log4.txt|log5.txt 
```

结果：

```
file6.txt|file5.txt|file4.txt|file3.txt|file2.txt|file1.txt
log5.txt|log4.txt|log3.txt|log2.txt|log1.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T08:28:10.613

如果你更喜欢 Python

```
for line in open("file.txt").read().split("\n"):
    print "|".join(line.split("|")[::-1]) 
```

# javascript - 从 splunk eventsviewer 创建外部链接

> ID：14620336
> 
> 赞同：1
> 
> 时间：2013-01-31T07:12:53.163
> 
> 标签：javascript, splunk

是否可以在 splunk 中创建可点击的事件查看器字段？你如何为同一个任务创建一个 javascript，我想要一个事件查看器字段中的可点击链接`severity`说`www.google.com`。

我怎样才能做到这一点？有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:09:45.393

对于 Splunk 5.0+，请查看[Splunk Dashboards](http://docs.splunk.com/Documentation/Splunk/latest/Viz/Dynamicdrilldownindashboardsandforms)示例的动态深入分析。您可以使用简单的 XML 表单表根据结果中的数据创建动态链接。

```
<dashboard>
  <label>Demo: drilldown</label>
  <row>
    <table>
      <searchString>
        index=foursquare checkin.primarycategory.nodename=*
        | spath output=venue path=checkin.venue.name
        | spath output=badges path=checkin.badges{}.name
        | eval link="Yelp Search"
        | stats count as checkins sparkline values(badges)
              as "badges" values(link) as "links" by venue
        | sort -checkins
      </searchString>

      <format field="sparkline" type="sparkline">
        <option name="type">bar</option>
        <option name="height">30</option>
        <option name="barColor">green</option>
        <option name="colorMap">
          <option name="5:9">yellow</option>
          <option name="10:">red</option>
        </option>
      </format>
      <title>Top Venues</title>
      <drilldown>

        <!-- Mulitvalue field drilldown -->
        <link field="badges">
         /app/foursquare_vegas/vegas_badge_1?form.badge=$click.value2$
        </link>

        <link field="venue">
          /app/foursquare_vegas/vegas_venue_1?form.venue=$row.venue$
        </link>
        <link field="links">
          http://www.yelp.com/search?find_desc=$row.venue$&find_loc=Las+Vegas,+NV
        </link>
      </drilldown>

    </table>
  </row>  
</dashboard> 
```

如果这个例子没有达到你想要的效果——你总是可以[使用 JS 事件`NullModule`](http://dev.splunk.com/view/app-framework/SP-CAAAEE2)或者投入一些精力来学习[SideView Utils 集成](http://sideviewapps.com/apps/sideview-utils/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-05T04:24:17.193

开箱即用的最接近答案是工作流操作，它不在结果表本身中，而是在事件之前。查看[文档](http://docs.splunk.com/Documentation/Splunk/6.0.1/Knowledge/CreateworkflowactionsinSplunkWeb)了解更多信息。为了完全按照您的需要进行格式化，您需要使用[sideview utils](http://apps.splunk.com/app/1486/)，这可以通过在其 HTML 控件中嵌入搜索结果来轻松完成

# python - 蚁群模拟——优化路径

> ID：14620346
> 
> 赞同：2
> 
> 时间：2013-01-31T07:13:38.047
> 
> 标签：python, simulation, ant-colony, artificial-life

我正在尝试构建一个简单的蚁群模拟。世界是方格；它们中的每一个都可以由某种程度的信息素和任意数量的蚂蚁组成。有两种类型的信息素：食物信息素和巢信息素。蚂蚁对环境一无所知，但返回巢穴的蚂蚁会跟随巢穴信息素（从某种意义上说，它们几乎总是选择移动到所有附近细胞中信息素水平最高的细胞）并留下食物信息素，反之亦然。

蚂蚁有时会随机移动，而不是朝着信息素最大的方向移动。模拟的每一刻蚂蚁都会检查附近 8 个单元格中的信息素水平，如果当前单元格中的信息素水平低于附近所有单元格中的最大信息素水平，它会添加一些信息素。

当前的模拟效果很好，但找到的路径不是最佳路径。我有两个问题我不知道如何解决：

1.  我如何模拟对角线移动比非对角线移动更长的事实（上，左下或右）？

![在当前情况下，黑色路径和蓝色路径的长度相等。 然而，实际上，蓝色路径更短。](../Images/c09cfe6e8b83d66d5246171c33185ab3.png)

1.  我应该如何模拟信息素的扩散？现在，信息素会随着时间的推移而蒸发，但没有扩散。我试图将一些信息素从每个细胞、模拟的每个滴答声转移到附近的 8 个细胞，但结果是一团糟——整个环境都充满了信息素——我认为这是因为机制蚂蚁用来调节信息素水平。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T11:01:00.190

在方形网格上，可能很难模拟对角线移动比水平和垂直移动更长，假设蚂蚁总是每刻移动一格（或不移动）。由于对角线距离更长，蚂蚁实际上必须比水平/垂直移动“跑得更快”。这可能不是你想要的。

因此，您可能需要考虑一个网格或节点网络，而不是方形网格，所有节点的距离都相等，即六边形网格。这也会改变相邻单元格的数量，但这就是重点。

关于扩散：这是正确设置参数的问题。听起来每滴答声的扩散太高了。此外，它应该与蚂蚁产生的信息素成正确的比例。请注意，网格的类型也会影响扩散。

# android - 如何处理 SMS 发送错误

> ID：14620351
> 
> 赞同：0
> 
> 时间：2013-01-31T07:13:47.187
> 
> 标签：android, error-handling, sms, broadcastreceiver

我有一个发送 SMS 消息的应用程序。我希望我的应用程序处理错误（如果发生），但我不能从广播接收器抛出异常。

```
 context.registerReceiver(new BroadcastReceiver() {

        @Override
        public void onReceive(Context context, Intent intent){
            switch (getResultCode()) {
                case Activity.RESULT_OK:

                    break;
                case SmsManager.RESULT_ERROR_GENERIC_FAILURE: 
                    //throw new SendSmsException();
                    break;
                case SmsManager.RESULT_ERROR_NO_SERVICE:

                    break;
                case SmsManager.RESULT_ERROR_NULL_PDU:

                    break;
                case SmsManager.RESULT_ERROR_RADIO_OFF:

                    break;
            }
        }
    },
    new IntentFilter(SENT)); 
```

如何通知请求 SMS 发送的类/方法发生错误？

# ios - UIImageView 缩放/淡入淡出动画？

> ID：14620354
> 
> 赞同：4
> 
> 时间：2013-01-31T07:13:57.237
> 
> 标签：ios, xcode, uiimageview, jquery-animate

当 UIImageView 出现在我的视图中时，我想制作一点缩放/淡入淡出动画，我已经有了淡入淡出效果的代码：

```
 banner.alpha = 0.0;
    [UIView animateWithDuration:2.0 animations:^{
        banner.alpha = 1.0;
    }]; 
```

现在我想知道是否有另一种简单的方法可以将淡入淡出效果与一点缩放效果结合起来，比如图像变大并在淡入时填充框架？有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-31T07:18:21.677

你可以`CG_EXTERN CGAffineTransform CGAffineTransformMakeScale(CGFloat sx, CGFloat sy)`用来做缩放效果

如

```
banner.alpha = 0.0;

[UIView animateWithDuration:2.0 animations:^{
    banner.alpha = 1.0;
    banner.transform =CGAffineTransformMakeScale(1.3,1.3);
}]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T09:21:14.397

您还可以使用框架

```
banner.alpha = 0;

[UIView animateWithDuration:2.0f animations:^(void){
   banner.alpha = 1.0f;
   [banner setFrame:CGRectMake(0, 0, 1024, 748)];
}];

// With Completion
[UIView animateWithDuration:0.1f animations:^(void){
   banner.alpha = 1.0f;
   [banner setFrame:CGRectMake(0, 0, 1024, 748)];
}completion:^(BOOL finished) {

}]; 
```

# c# - 从 Windows Live 服务器获取信息时出错

> ID：14620359
> 
> 赞同：0
> 
> 时间：2013-01-31T07:14:07.960
> 
> 标签：c#, asp.net, authentication, windows-live

我正在尝试使用以下代码通过 Windows Live 帐户对用户进行身份验证。

```
byte[] byteArray = Encoding.UTF8.GetBytes(postData);
 WebRequest request = WebRequest.Create("https://oauth.live.com/token");
 request.ContentType = "application/x-www-form-urlencoded";
 request.ContentLength = byteArray.Length;
 request.Method = "POST"; 
 Stream resp = request.GetRequestStream();
 Stream dataStream = request.GetRequestStream();
 dataStream.Write(byteArray, 0, byteArray.Length);
 var response = request.GetResponse(); 
```

但我在最后一行收到以下错误。

```
The remote server returned an error: (400) Bad Request. 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:02:13.583

您的问题可能是因为我们没有在“application/x-www-form-urlencoded”帖子上发送字节而是一个字符串。此外，GetRespose 看起来也不正确。您的代码必须类似于：

```
// I do not know how you create the byteArray
byte[] byteArray = Encoding.UTF8.GetBytes(postData);
// but you need to send a string
string strRequest = Encoding.ASCII.GetString(byteArray);

WebRequest request = WebRequest.Create("https://oauth.live.com/token");
request.ContentType = "application/x-www-form-urlencoded";

// not the byte length, but the string
//request.ContentLength = byteArray.Length;
request.ContentLength = strRequest.Length;

request.Method = "POST"; 

using (StreamWriter streamOut = new StreamWriter(request.GetRequestStream(), System.Text.Encoding.ASCII))
{
    streamOut.Write(strRequest);
    streamOut.Close();
}

string strResponse;
// get the response
using (StreamReader stIn = new StreamReader(request.GetResponse().GetResponseStream()))
{
    strResponse = stIn.ReadToEnd();
    stIn.Close();
}

// and here is the results
FullReturnLine = HttpContext.Current.Server.UrlDecode(strResponse); 
```

# wix - 自定义操作修改 Program Files 文件夹中的文件

> ID：14620361
> 
> 赞同：3
> 
> 时间：2013-01-31T07:14:09.450
> 
> 标签：wix, windows-installer, custom-action, program-files

我想创建自定义操作来修改 Program Files 文件夹中的一些文件

但是当我运行时，我得到了访问被拒绝并且安装程序回滚的错误

以管理员身份运行也无济于事。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T04:48:19.213

正如@George Stocker 评论，我将我的评论作为答案

对于那些正在寻找答案的人，

付诸`Impersonate="no"`行动：）

# mysql - 如果 FK 表具有复合主键（FK 不是复合的一部分），则外键作为主键不起作用

> ID：14620369
> 
> 赞同：1
> 
> 时间：2013-01-31T07:14:33.830
> 
> 标签：mysql, foreign-keys, primary-key, foreign-key-relationship, composite-primary-key

使用以下脚本创建的两个表：

```
create table user_auth
(
    username varchar(255) NOT NULL,
    password varchar(255) NOT NULL,
    user_id varchar(36) NOT NULL,
    PRIMARY KEY(username, password)
)engine=innodb;

create table user
(
    user_id varchar(36) NOT NULL,
    PRIMARY KEY(user_id),
    FOREIGN KEY(user_id) REFERENCES user_auth(user_id) ON DELETE CASCADE
)engine=innodb; 
```

我收到错误：无法创建表 'xxx.user' (errno: 150)

外键错误。

**如果我这样做（删除外键约束但仍引用 user_auth）：**

```
create table user_auth
(
    username varchar(255) NOT NULL,
    password varchar(255) NOT NULL,
    user_id varchar(36) NOT NULL,
    PRIMARY KEY(username, password)
)engine=innodb;

create table user
(
    user_id varchar(36) NOT NULL REFERENCES user_auth(user_id) ON DELETE CASCADE,
    PRIMARY KEY(user_id),
)engine=innodb; 
```

一切都很好，***但是***我可以将 user_id 插入到用户表中，而 user_auth 中没有相应的键，这在我的引用完整性中留下了一个漏洞。

**现在踢球说我这样做（删除复合键并使 user_id 成为 user_auth 中的主键）：**

```
create table user_auth
(
    user_id varchar(36) NOT NULL,
    PRIMARY KEY(username, password)
)engine=innodb;

create table user
(
    user_id varchar(36) NOT NULL,
    PRIMARY KEY(user_id),
    FOREIGN KEY(user_id) REFERENCES user_auth(user_id) ON DELETE CASCADE
)engine=innodb; 
```

这也有效，尽管我没有用户名/密码组合来确保唯一性。

我有一种感觉，我错过了 MySQL 工作方式的一些非常关键的东西。请赐教。

谢谢你的时间！

**更新**

在他们的答案中链接的文章ypercube中，第三点提到PK的***顺序***和相应的FK**必须**相同。如果我按以下顺序添加`user_id`为 PK ，则脚本有效：`user_auth`

```
create table user_auth
(
    username varchar(255) NOT NULL,
    password varchar(255) NOT NULL,
    user_id varchar(36) NOT NULL,
    PRIMARY KEY(user_id, username, password)
)engine=innodb;

create table user
(
    user_id varchar(36) NOT NULL,
    PRIMARY KEY(user_id),
    FOREIGN KEY(user_id) REFERENCES user_auth(user_id) ON DELETE CASCADE
)engine=innodb; 
```

所以我仍然可以`SELECT`这样，但现在我不能重复用户名/密码组合，因此每个帐户都是唯一的，因为在插入用户数据之前必须存在用户名/密码/user_id 记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T07:33:31.043

尝试：

```
create table user_auth
(
    username varchar(255) NOT NULL,
    password varchar(255) NOT NULL,
    user_auth_id varchar(36) NOT NULL,
    PRIMARY KEY(username, password)
)engine=innodb;

create table user
(
    user_id varchar(36) NOT NULL,
    user_username varchar(36) NOT NULL, 
    user_pass varchar(36) NOT NULL, 
    INDEX(user_username, user_pass),
    PRIMARY KEY(user_id),
    FOREIGN KEY(user_username, user_pass) REFERENCES user_auth(username, password) ON DELETE CASCADE
)engine=innodb; 
```

参考：[http ://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T08:02:03.047

[http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)中的第 3 点 说明了一切。因此，如果我添加`user_id`为 PK `user_auth`（我想我提到我尝试过这个，但似乎我错过了脚本示例），那么它仍然可能无法正常工作：

```
create table user_auth
(
    username varchar(255) NOT NULL,
    password varchar(255) NOT NULL,
    user_id varchar(36) NOT NULL,
    PRIMARY KEY(username, password, user_id) -- <== DOES NOT WORK
)engine=innodb;

create table user
(
    user_id varchar(36) NOT NULL,
    PRIMARY KEY(user_id),
    FOREIGN KEY(user_id) REFERENCES user_auth(user_id) ON DELETE CASCADE
)engine=innodb; 
```

**但是，如果我改变顺序...**

```
create table user_auth
(
    username varchar(255) NOT NULL,
    password varchar(255) NOT NULL,
    user_id varchar(36) NOT NULL,
    PRIMARY KEY(user_id, username, password) -- <== WORKS!
)engine=innodb;

create table user
(
    user_id varchar(36) NOT NULL,
    PRIMARY KEY(user_id),
    FOREIGN KEY(user_id) REFERENCES user_auth(user_id) ON DELETE CASCADE
)engine=innodb; 
```

因为为了将 user_auth 的 PK 用作 FK，它们必须**与 indices 的顺序相同**，（如果我有误解请评论）。

**但是在表设计方面我们仍然有一个问题，复合键意味着我可以在 user_auth 中有重复的 user_ids，所以更聪明的设计是：**

```
create table user_auth
(
    username varchar(255) NOT NULL,
    password varchar(255) NOT NULL,
    user_id varchar(36) NOT NULL,
    PRIMARY KEY(user_id),
    UNIQUE KEY(username) -- <== I should allow duplicate passwords, so just usernames should be               unique
)engine=innodb;

create table user
(
    user_id varchar(36) NOT NULL,
    PRIMARY KEY(user_id),
    FOREIGN KEY(user_id) REFERENCES user_auth(user_id) ON DELETE CASCADE
)engine=innodb; 
```

**好多了**

主要的收获是复合键的**顺序很****重要！**

# winforms - 我们如何清除winform上的所有表单控件？

> ID：14620375
> 
> 赞同：3
> 
> 时间：2013-01-31T07:14:59.327
> 
> 标签：winforms, c#-4.0

我想清除所有控件，特别是文本框和组合框。我正在使用以下控件来清除所有字段。

```
private void ResetFields()
    {
        foreach (Control ctrl in this.Controls)
        {
            if (ctrl is TextBox)
            {
                TextBox tb = (TextBox)ctrl;
                if (tb != null)
                {
                    tb.Text = string.Empty;
                }
            }
            else if (ctrl is ComboBox)
            {
                ComboBox dd = (ComboBox)ctrl;
                if (dd != null)
                {
                    dd.Text = string.Empty;
                    dd.SelectedIndex = -1;
                }
            }
        }
    } 
```

上面的代码在组框中无法正常工作。在组框中，我也有组合框和文本框。组合框显示所选索引 = 1 的组框。我也想清除这些控件。有什么建议么 ？？？？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-31T07:55:46.160

对于`TextBox`和`ComboBox`

```
 public static void ClearSpace(Control control)
    {
        foreach (Control c in control.Controls)
        {
            var textBox = c as TextBox;
            var comboBox = c as ComboBox;

            if (textBox != null)
                (textBox).Clear();

            if (comboBox != null)
                comboBox.SelectedIndex = -1;

            if (c.HasChildren)
                ClearSpace(c);
        }
    } 
```

**用法：**

```
 ClearSpace(this); //Control 
```

# java - JSON 中的特殊字符 \n 和双引号

> ID：14620378
> 
> 赞同：0
> 
> 时间：2013-01-31T07:15:09.763
> 
> 标签：java, json

将字符串转换为 json 对象时遇到问题。

`\n`发出`Unterminated string`。如果我想使用换行符，我使用 \n 字符，则会出现错误。示例字符串：您好 \n 这是测试消息。

双引号“给出`Expected a ',' or '}`异常。示例字符串：这是一条“TESTING”消息。

我用逃避 \ 逃避那些，但仍然面临 JSON 异常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:18:45.100

用作“换行符”的 \n 必须在 json 中编码为 \n。\" 用于引用。

你可以打开python shell，写

```
>>> import json
>>> json.dumps('\n"') 
```

自己看看结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T07:29:42.850

我使用 StringEscapeUtils.escapeJavaScript() 函数，这让我的生活变得轻松。 [http://commons.apache.org/lang/api/org/apache/commons/lang3/StringEscapeUtils.html](http://commons.apache.org/lang/api/org/apache/commons/lang3/StringEscapeUtils.html)

# ios - 在其他 iPhone 中安装时，iPhone 中的应用程序安装失败

> ID：14620380
> 
> 赞同：2
> 
> 时间：2013-01-31T07:15:19.123
> 
> 标签：ios, ios5, ios6, ios4, ios-simulator

我正在将一个应用程序（我创建的）安装到我的 iPhone 中并安装它，但是当我尝试在其他 iPhone 中安装它时，它显示“安装失败”，

我想知道问题出在哪里..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:16:01.020

也许没有注册到 developer.apple.com ？

尝试将设备添加到设备列表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T07:25:44.647

您的设备可能未注册。在创建配置文件时添加的设备中也选择该设备。您可以通过单击“添加新设备”并输入该设备的 UDID 来执行此操作。试试这个...

# .net - 如何获取属性参数的元数据？

> ID：14620381
> 
> 赞同：0
> 
> 时间：2013-01-31T07:15:21.383
> 
> 标签：.net, reflection, attributes

如何获取以下代码中参数的属性？

```
public void SomeMethod([SomeAttribute] string s)
{
    var someAttribute = ?
} 
```

而且我意识到该属性通常不用于它所在的方法内......不过只是保持示例简单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T07:23:21.847

我刚刚想通了：

```
var someAttribute = typeof(SomeClass).GetMethod("SomeMethod").GetParameters().First().GetCustomAttributes(false); 
```

我刚刚脑子里放了个屁，并且正在使用 Attributes 属性而不是 GetCustomAttributes 方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T07:24:53.703

首先你需要一个`MethodInfo`：

```
var method = typeof(SomeType).GetMethod("SomeMethod"); 
```

然后你可以检查是否存在：

```
bool hasAttrib = Attribute.IsDefined(
    method.GetParameters()[0], typeof(SomeAttribute)); 
```

或获取一个实例（更昂贵）：

```
var attrib = (SomeAttribute) Attribute.GetCustomAttribute(
    method.GetParameters()[0], typeof(SomeAttribute)); 
```

# asp.net-mvc - 在区域中提交表单后不显示任何验证消息？

> ID：14620383
> 
> 赞同：0
> 
> 时间：2013-01-31T07:15:32.563
> 
> 标签：asp.net-mvc, asp.net-mvc-4, validation

我有一个区域，在这个区域我有一个 PostController，一个为 GET 方法添加名称的操作和一个为 POST 方法添加名称的操作，在提交表单后我将错误添加到模型状态，但在回发后，没有显示任何验证消息状态码是：301 永久移动！！！

我的视图模型：

```
public class NewPostViewModel
{

    [Required(ErrorMessage = "Please enter title.")]
    public string Title { get; set; }

    [AllowHtml]
    [Required(ErrorMessage = "Please enter article content.")]
     public string Content { get; set; }

    [Required(ErrorMessage = "Please enter a tag.")]
    public string Tags { get; set; }

    public bool PublishNow { get; set; }
    public string PublishDate { get; set; }
    public string PublishTime { get; set; }
} 
```

我的观点：

```
@model Soleimanzadeh.Models.ViewModels.NewPostViewModel

@{
    ViewBag.Title = "Add";
    Layout = MVC.Admin.Shared.Views.BaseLayout;
}
@using (Html.BeginForm(MVC.Admin.Post.Add(), FormMethod.Post))
{ 
    @Html.AntiForgeryToken()
    @Html.ValidationSummary(false, null, new { @class = "alert" })
    <div class="row-fluid">
        <div class="span9">
            <div class="row-fluid">
                <div class="span8">
                    @Html.TextBoxFor(np => np.Title, new { @class = "span12", placeholder = "Title" })
                    @Html.ValidationMessageFor(model=>model.Title)
                </div>
            </div>
            <div class="row-fluid">
                <div class="span12">
                    @Html.TextAreaFor(np => np.Content)
                    @Html.ValidationMessageFor(model=>model.Content)
                </div>
            </div>
        </div>
        <div class="span3">
            <div class="row-fluid">
                <div class="post-options-container">
                    <div class="header">
                        Tags
                    </div>
                    <div class="content">
                        <input type="text" placeholder="tags" class="tagManager" style="width: 100px;" />
                    </div>
                </div>
            </div>
            <div class="row-fluid">
                <div class="post-options-container">
                    <div class="header">
                        Status
                    </div>
                    <div class="content">
                        <label class="checkbox">
                            @Html.CheckBoxFor(np => np.PublishNow)
                             Publish Now?
                        </label>
                        <div>
                            Publish Date:
                            @Html.TextBoxFor(np => np.PublishDate, new { @class = "calcInput" })
                        </div>
                        <div>
                            Publish Time:
                            @Html.TextBoxFor(np => np.PublishTime, new { @class = "timeInput" })
                        </div>
                        <div>
                            <input type="submit" value="Save"/>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
}

@*some scripts here*@ 
```

我的控制器：

```
public partial class PostController : Controller
{

public virtual ActionResult Add()
{
    var newPost = new NewPostViewModel();
    return View(MVC.Admin.Post.Views.Add, newPost);
}

[HttpPost]
[ValidateAntiForgeryToken]
public virtual ActionResult Add(NewPostViewModel post)
{
    ModelState.AddModelError("Content","Wrong");
    return this.View(MVC.Admin.Post.Views.Add, post);
}

} 
```

我还为内容使用了[redactor](http://imperavi.com/redactor/) html 编辑器。

* * *

**解决方案：**

我使用[http://lowercaseroutesmvc.codeplex.com/](http://lowercaseroutesmvc.codeplex.com/)将 url 转换为小写，但我没有在区域部分启用此工具，并在提交表单后重定向页面。

# java - 从 jar 中存在的目录中查找路径

> ID：14620388
> 
> 赞同：0
> 
> 时间：2013-01-31T07:15:37.080
> 
> 标签：java, file

我正在尝试使用一个 jar 文件，它本身就是另一个 web 项目中的 web 应用程序。在我使用 eclipse 的导出到 jar 功能创建的 jar 中，我存储了一个目录。要从我正在使用的目录访问文件

```
BufferdReader tempDir = new BufferedReader(new InputStreamReader(getClass().getResourceAsStream(myDirPath),"UTF-8"));

// Then i iterate on tempDir

String line;
ArrayList<File> tempDirList = new ArrayList<File>(); 
int c = 0;
try {
    while((line = tempDir.readLine())!= null)
    {
       File f = new File(line);
       tempDirList.add(f);
           c++;
        }
     } catch (IOException e) 
    {
    e.printStackTrace();
    } 
```

现在，当我尝试读取文件时，在 tempDirList 上进行迭代时，我需要从中获取文件的文件路径，但我没有获取文件路径。所以我想知道我如何获取文件路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:41:52.757

您不能将 JAR 中的文件作为`File`对象访问，因为在 Web 容器中它们可能不会被解包（因此没有文件）。您只能像以前那样通过流访问它们。

```
getClass().getResourceAsStream(myDirPath + "/file1.txt"); 
```

如果您确实需要`File`对象（大多数情况下很容易避免这种情况），请将文件复制到您可以访问的临时文件中。

```
File tmp = File.createTemp("prefix", ".tmp");
tmp.deleteOnExit();
InputStream is = getClass().getResourceAsStream(myDirPath + "/file1.txt");
OutputStream os = new FileOutputStream(tmp);
ByteStreams.copy(is, os);
os.close();
is.close(); 
```

But as I said, using streams instead of file objects in the first place makes you more flexible.

If you really don't know all the files in the directory at compile time you [might be interested in this answer to list contents](https://stackoverflow.com/questions/6247144/how-to-load-a-folder-from-a-jar).

# ios6 - iOS 6+ 实时电话中的语音调制

> ID：14620392
> 
> 赞同：1
> 
> 时间：2013-01-31T07:15:47.667
> 
> 标签：ios6, voice, phone-call

我想在通话进行时在实时电话中进行语音调制，我想做语音调制。我看到 ios 应用程序在录制语音后会进行语音调制。我还检查了一个名为“ [VoiceChanger](https://itunes.apple.com/in/app/call-voice-changer-intcall/id535048805?mt=8) ”的应用程序，它在正在进行的通话中添加了不同的声音。该呼叫通过 VOIP 进行，因为我可以从 ipod touch 拨打任何号码，并且它也写在他们的应用程序描述中。对于 ipod touch，我们没有呼叫功能。如果我错了，请纠正我。

是否可以**在 iOS 的实时通话中进行语音调制**？如果是，任何参考或图书馆都非常感谢。

提前致谢。

# ubuntu - apache重启失败

> ID：14620393
> 
> 赞同：1
> 
> 时间：2013-01-31T07:15:47.767
> 
> 标签：ubuntu, apache2, restart

当我遇到重新启动 apache 的问题时，我试图找出 ubuntu 上的 php-mysql 连接问题。运行时出现以下错误：

```
apache2ctl configtest

apache2: Syntax error on line 236 of /etc/apache2/apache2.conf: Syntax error on line 3 of /etc/apache2/conf.d/index.html: Expected <\/p>This> but saw <\/p> 
Action 'configtest' failed. 
```

第 236 行显示：

```
Include conf.d/

The line 3 of index.html is:
<\/p> 
```

**注意：编辑器请帮助处理上述 html 标签。** 在浏览器上测试时：127.0.0.1，索引页面显示正常。我搜索了很多，但似乎没有任何效果。

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T07:21:18.697

该`index.html`文件不属于`/etc/apache2/conf.d/`. 请将其移至适当的位置（可能是您的 DocumentRoot）。

# login - 使用 XMPP 时如何检测用户 (JID) 是否已经登录？

> ID：14620396
> 
> 赞同：5
> 
> 时间：2013-01-31T07:15:52.563
> 
> 标签：login, xmpp

在我的聊天应用程序中，我想实现一个功能，每当用户已经登录并且如果他/她想使用相同的用户名和密码再次登录其他设备时，它应该将用户回复一条消息 - “你是已经在其他地方登录”

我只知道这种检查登录状态的方法-

```
connection.isConnected(); 
```

但这不会满足我的目的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T11:47:31.303

[亚历克斯的回答](https://stackoverflow.com/a/14623590/194894)是正确的，但让我稍微详细说明一下：

成功登录后，您的 XMPP-IM 客户端将向服务器发送一个出席信息节。然后，服务器以订阅状态“来自”和“两者”（[RFC6121 XMPP-IM 4.2.2](http://xmpp.org/rfcs/rfc6121.html#presence-initial-outbound)和 4.4.2）的方式回复您名册中所有 JID 的存在节。

[第 4.4.2 节](http://xmpp.org/rfcs/rfc6121.html#presence-broadcast-outbound)还指出：

```
The user's server MUST also send the presence stanza to all of the user's 
available resources (including the resource that generated the presence
notification in the first place). 
```

这意味着您将从您的 JID 的每个其他已连接资源中获取状态信息。如果您在此处收到来自不同完整 JID 的出席信息节，那么您使用当前连接**，您知道第二个（或第三个，...）客户端与您的 JID 连接，**并且您显示“您已经在其他地方登录“ 信息。

请注意，这并不是您在使用 XMPP 时真正想要做的，因为使用相同的裸 JID 同时连接的多个客户端是*XMPP-IM 的核心功能*。

使用 smack 时，[`Iterator<Presence> Roster.getPresences(String user)`](http://www.igniterealtime.org/builds/smack/docs/latest/javadoc/org/jivesoftware/smack/Roster.html#getPresences%28java.lang.String%29)可用于检索存在信息。调用看起来像这样`getPresences(XMPPConnection.getUser())`。（请注意，我尚未验证它是否真的有效）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T10:29:43.870

after login when you send your initial presence you get the presences of all your other resources (devices). So check all your incoming presences and you will know all your available connections.

# facebook-graph-api - 脸书认证程序

> ID：14620410
> 
> 赞同：-4
> 
> 时间：2013-01-31T07:16:48.937
> 
> 标签：facebook-graph-api

几天前我开始学习 Facebook 应用程序。我用几行 html 代码创建了一个非常简单的应用程序。谁能告诉我如何对用户进行身份验证或帮助我在网络上找到教我如何做到这一点的资源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:36:46.000

要制作 facebook 应用程序，请从这里开始：Facebook[上的应用程序](https://developers.facebook.com/docs/appsonfacebook/tutorial/)。或者，如果您已成功创建应用并配置设置，则直接跳转到此处：[身份验证](https://developers.facebook.com/docs/appsonfacebook/tutorial/#auth)

另外，下载[SDK](https://developers.facebook.com/web/#sdks)，他们有一些示例可以帮助您了解基础知识。

# sql-server - 在 edmx -file 上使用 ProviderManifestToken=2005 有什么副作用（以支持 SQL Server 2005）？

> ID：14620414
> 
> 赞同：3
> 
> 时间：2013-01-31T07:17:08.937
> 
> 标签：sql-server, entity-framework, edmx

在开发中我们使用 SQL Server 2012，但有些客户的版本可能与 2005 一样旧。为了使实体框架数据模型与旧版本一起工作，必须将 ProviderManifestToken（在 edmx 文件中找到）设置为 2005。

现在我的问题是，这有什么副作用吗？我们注意到一些数据绑定（winforms）在我们更改它的同时中断，但这可能是巧合。那么，是这个，还是有任何其他负面影响可以改变这个值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T01:46:54.580

ProviderManifestToken 主要在 Sql Generation 期间使用，以确保生成的查询将在目标版本的数据库上工作。因为如果适用于以前版本的 Sql Server 查询应该继续在当前版本上工作，这应该不是问题。因此，总的来说，您所做的应该可以工作，因为您将向 Sql 2008/2012 数据库发送 Sql 2005 查询。我对绑定知之甚少，但在我看来，它似乎不太可能是由于使用 2005 作为 ProviderManifestToken 而引起的。我看到一些惊喜的场景是，当您将清单令牌从 2005 年更改为 2008 年（基本上是升级数据库和应用程序）时 - 混淆主要围绕 datetime/datetime2 （AFAIR datetime2 类型可能突然出现在查询中）

# facebook - Facebook 创建应用程序在发布图像或视频时不显示图标。它仅在发布文本时显示

> ID：14620416
> 
> 赞同：6
> 
> 时间：2013-01-31T07:17:19.060
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph

我在 developer.facebook.com 上创建了一个应用程序。并添加 3 个图像 16,75 和 128。当我发布文本时，应用程序图标会显示。但是当我发布视频或图像时它不显示。我应该对 developer.facebook.com 上的应用程序设置进行任何更改吗？例如。在路径中。![在此处输入图像描述](../Images/de16f8574311bc69b8ac60dfc2dbaf2d.png)

在我的应用程序中发布文本时。应用程序图标出现。 ![在此处输入图像描述](../Images/26c5b96651ca88fa07d8c68cb4198c45.png)

但是在发布图像或视频时。应用程序图标消失。 ![在此处输入图像描述](../Images/d57631c118bb7f6533e665e8c51ce77c.png)

![在此处输入图像描述](../Images/82685e266d0fe56bbf0f167f334eace8.png)

感谢帮助。我已经对此进行了研发，并且遇到了 Facebook 错误，对吗？： http: [//developers.facebook.com/bugs/447623711966656 ?browse=search_50bfaaaf247045772567103](http://developers.facebook.com/bugs/447623711966656?browse=search_50bfaaaf247045772567103)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T13:34:55.470

这是设计使然，与您的应用程序设置无关。Facebook 以不同方式显示应用程序上传的视频和照片，以使用共享对话框进行状态更新和共享。

# javascript - Javascript 概率

> ID：14620417
> 
> 赞同：2
> 
> 时间：2013-01-31T07:17:20.980
> 
> 标签：javascript, html

我正在尝试使用数学随机对象制作一个逼真的无偏 JavaScript 骰子。当我单击时，我希望网页上出现一个 2-12 的数字，但它没有返回。我的代码有什么问题。

```
<html>
<head><title>DiceBoy</title>
</head>
<body>
<script>
function getRandom(){
  var num=Math.random();
  if(num < 0.0278) return 2; 
  else if(num < 0.0834) return 3;
  else if(num < 0.1667) return 4; 
    else if(num < 0.2778) return 5; 
      else if(num < 0.4167) return 6; 
        else if(num < 0.5834) return 7; 
          else if(num < 0.7223) return 8;
            else if(num < 0.8334) return 9; 
              else if(num < 0.9167) return 10; 
                else if(num < 0.9723) return 11;
                  else return 12;
                  var x=getRandom();
                  document.write(x);
}

</script>

<input type="button" value="Click Here" onClick="getRandom();">

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T07:25:12.910

为什么不这样写：

```
var RandomNumber1 = Math.floor(Math.random() * 6) + 1;
var RandomNumber2 = Math.floor(Math.random() * 6) + 1;

var DiceNumber = RandomNumber1 + RandomNumber2; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T07:23:11.927

试试这个：

```
<html>
    <head>
        <title>DiceBoy</title>
    </head>
    <body>
        <script>
            function getRandom() {
                return (Math.floor(Math.random() * 6) + 1) * 2;
            }
        </script>
        <input type="button" value="Click Here" onClick="document.write(getRandom());">
    </body>
</html> 
```

**JSFiddle**：http: [//jsfiddle.net/kvFE5/1/](http://jsfiddle.net/kvFE5/1/)

理想情况下，您应该将其重构为[不显眼](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)地处理。

虽然老实说 - 你为什么不使用[Math.random](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/random) ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T07:24:37.217

您的返回语句将在到达时退出该方法，并且其余代码不会运行。您也不想从方法中调用 getRandom 方法，否则您将有一个永无止境的循环。而不是返回数字（因为没有人在听返回值）将它存储在一个变量中，然后在最后两行中使用它。

```
function getRandom(){
  var num=Math.random();
  var result = 0;
  if(num < 0.0278) result = 2; 
  else if(num < 0.0834) result = 3;
    else if(num < 0.1667) result = 4; 
     .
     .
              else result =  12;
              document.write(result);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T07:26:40.233

问题是..

```
var x=getRandom();
document.write(x); 
```

*在此之前从未被*称为函数“返回”。将代码移到函数*之外*，以便它可以调用随机化函数，然后使用结果。

```
function getRandom () {
   // the long icky original code WITHOUT the following:
   // var x=getRandom();
   // document.write(x);
}
// later, OUTSIDE the function
var result = getRandom();
document.write(result); 
```

但是，获得相同效果的更好方法是使用：

```
function getDiceRole() {
   return Math.floor(Math.random() * 6) + Math.floor(Math.random() * 6) + 2
} 
```

* * *

对于读者：至于为什么需要两次掷骰，请参阅[骰子角色统计](http://hyperphysics.phy-astr.gsu.edu/hbase/math/dice.html)- 请注意获得所有值的概率*不相等。*也就是说，一个简单`Math.floor(Math.random() * 11) + 2`的是*不正确*的。

> ..在掷两个骰子时，两个骰子的总和的不同可能性并不相同，因为获得某些数字的方法比其他方法多。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T07:28:35.183

尝试这样的事情来生成两个数字之间的随机数

```
/**
 * Returns a random integer between min and max
 * Using Math.round() will give you a non-uniform distribution!
 */
function getRandomInt (min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
} 
```

在你的情况下打电话

```
 getRandomInt (2, 12); 
```

完整的 html 看起来像

```
<html>
<head>
<script type="text/javascript">
    /**
     * Returns a random integer between min and max
     * Using Math.round() will give you a non-uniform distribution!
     */
    function getRandomInt (min, max) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    function generateNumber()
    {
       document.getElementById('generated-id').innerHTML = getRandomInt (2, 12);
    }

</script>
</head>
<body>
Generated number : <span id="generated-id"></span>
<input type="button" onclick="generateNumber();" value="Generate random number" />
</body>
</html> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-31T07:36:44.847

您可以尝试使用类似他的方法`Math.floor`，将数字向下舍入到最接近的整数。

```
<html>
    <head>
        <title>DiceBoy</title>
    </head>
    <body>
        <script type="javascript/text">
            function getDieRoll() {
                return Math.floor(Math.random() * (12 - 1+ 1)) +1;
            }
        </script>
        <input type="button" value="Click Here" onClick="document.write(getDieRoll());">
    </body>
</html> 
```

# java - pdfrenderer 中的搜索功能

> ID：14620423
> 
> 赞同：0
> 
> 时间：2013-01-31T07:17:51.903
> 
> 标签：java, swing, pdf

> **可能重复：**
> [如何获取 pdfpage 内容](https://stackoverflow.com/questions/14598258/how-to-get-the-pdfpage-content)

我正在使用 pdfrenderer 在 swing 中查看我的 pdf 文件。在这个 pdfviewer 中，我需要一个与 adobe 阅读器搜索相同的搜索功能（显示页面链接并单击链接应该转到该页面并突出显示搜索词） .如何在摇摆中实现这一点。是否有任何示例可以这样做。或者我需要使用任何其他库。

谢谢你。

# coding-style - 关于函数式编程理论

> ID：14620424
> 
> 赞同：0
> 
> 时间：2013-01-31T07:17:52.867
> 
> 标签：coding-style, theory

这两种编程方法之间是否存在偏好共识？你能否向我解释一下为什么，从利弊的角度来看，你选择的范式。

(i) 一个程序具有三个需要在某些输入上执行的功能。它运行第一个，获取返回的变量，使用该变量运行第二个，然后对第三个执行相同的操作。最后打印第三个返回的变量。

```
func1(){ return f1 }
func2(){ return f2 }
func3(){ return f3 }
main(){
fin=# of inputs
i=0
while i<fin
   first=func1(in[i])
   sec=func2(first)
   third=func3(sec)
   print(third)
   i++
} 
```

(ii) 程序逐步执行一系列指令，首先从主函数推送第一张多米诺骨牌。

```
func1(){ func2(newfrom1) }
func2(){ func3(newfrom2) }
func3(){ print(newfrom3) }
main(){
fin=# of inputs
i=0
while i<fin
   func1(in[i])
   i++
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:13:14.127

我看到的唯一区别是版本 2 使用变量来存储中间结果。
所以从性能的角度来看，应该没有任何区别，因为编译器会将这些中间结果存储在寄存器中的两个版本中。但这可以通过分析来检查。
但对我来说，版本 1 更具可读性，因此更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:21:00.597

第一种方法更可重用——如果你想在`func1`以后对其他事情做任何事情，但你又不想做，怎么`func2`办`func3`？如果`func1`被编写为第一个场景调用这些，那么你必须去改变一切。

我的偏好是尝试识别对单个函数有意义的“操作”，编写一个函数来执行此操作，然后为更复杂的事情编写另一个函数，该函数调用几个较小的函数来实现其目的。然后经常会发现其中一些较小的功能在以后的其他地方可以使用。

是的，这给我留下了更多的函数调用，可能还有更多的临时存储被使用，但我让编译器担心——如果它被证明是一个性能问题，我会处理它。通常，性能会受到其他因素的影响。

# android - 实现下载进度条

> ID：14620428
> 
> 赞同：0
> 
> 时间：2013-01-31T07:17:59.907
> 
> 标签：android, download

> **可能重复：**
> [使用 AsyncTask 一个一个地下载多个文件？](https://stackoverflow.com/questions/7660963/downloading-multiple-files-one-by-one-using-asynctask)

我正在尝试下载图像（可能大约 20 个？），然后将它们保存到缓存中。如何实现下载进度条？每个图像都来自一个单独的链接，如果我实现一个下载进度条..在我的情况下它会加载下载栏二十次吗？

这是我下载图像并将它们保存为缓存的方式：

```
/**
 * Background Async Task to Load all product by making HTTP Request
 * */

class downloadMagazine extends AsyncTask<String, String, String> {
 @Override
    protected void onPreExecute() {
        super.onPreExecute();
        progressDialog = new ProgressDialog(MainActivity.this);
        progressDialog.setMessage("Loading.." + "\n" + "加载中..");
        progressDialog.setIndeterminate(false);
        progressDialog.setCancelable(false);
        progressDialog.show();
    } 
/**
 * getting preview url and then load them
 * */
protected String doInBackground(String... args) {
    // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        // getting JSON string from URL
        JSONObject json = jParser.makeHttpRequest(url_magazine, "GET", params);

        // Check your log cat for JSON reponse
        try {
            // Checking for SUCCESS TAG
            int success = json.getInt(TAG_SUCCESS);

            if (success == 1) {
                // magazines found
                // Getting array of magazines
                mag = json.getJSONArray(TAG_MAGAZINE);

                for (int i = 0; i < mag.length(); i++) {
                    JSONObject c = mag.getJSONObject(i);

                    // Storing each json item in variable
                    String magazineUrl = c.getString(TAG_MAGAZINE_URL);
                    //String issueName = c.getString(TAG_MAGAZINE_NAME);

                    urlList.add(magazineUrl);
                    //issueNameList.add(issueName);

                }                   
            } 
        } catch (JSONException e) {
            e.printStackTrace();
        }           

        // Building Parameters
        List<NameValuePair> param = new ArrayList<NameValuePair>();
        // getting JSON string from URL
        JSONObject json1 = jParser.makeHttpRequest(urlList.get(pos), "GET", param);

        // CHECKING OF JSON RESPONSE
        // Log.d("All guide: ", json.toString());

        try {
            issues = json1.getJSONArray(TAG_ISSUE);

            for (int i = 0; i < issues.length(); i++) {
                JSONObject c = issues.getJSONObject(i);

                String image = c.getString(TAG_IMAGE);

                imageList.add(image);
                //System.out.println(imageList);
            }   

            // STOP THE LOOP
            //break;

        } catch (JSONException e) {
            e.printStackTrace();
        }
        return null;
        }

/**
 * After completing background task Dismiss the progress dialog
 * **/
protected void onPostExecute(String file_url) {

/**
 *  Updating parsed JSON data into ListView
* */ 

    progressDialog.dismiss();
    getBitmap();
    buttonsCheck();
}
  }

private Bitmap getBitmap() {
if (android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED))
    cacheDir=new File(android.os.Environment.getExternalStorageDirectory() + folderName+"/Issues/"+issueNumber);
else
    cacheDir=context.getCacheDir();
if(!cacheDir.exists())
    cacheDir.mkdirs();

for (int i=0; i<=imageList.size()-1; i++)
{
    String image= imageList.get(i);
    try
    {
        String filename = String.valueOf(image.hashCode());
        Log.v("TAG FILE :", filename);
        File f = new File(cacheDir, filename);

        // Is the bitmap in our cache?
        Bitmap bitmap = BitmapFactory.decodeFile(f.getPath());
                // Download it
                try {
                    bitmap = BitmapFactory.decodeStream(new URL(image)
                    .openConnection().getInputStream());
                    // save bitmap to cache for later
                    writeFile(bitmap, f);
                    }    
                catch (FileNotFoundException ex) 
                {
                    ex.printStackTrace();
                    Log.v("FILE NOT FOUND", "FILE NOT FOUND");
                }
    catch (Exception e) {
    // TODO: handle exception
    e.printStackTrace();
    }

}

catch (Exception e) {
    // TODO: handle exception
    e.printStackTrace();
}
}

    return null;
}

private void writeFile(Bitmap bmp, File f) {
FileOutputStream out = null;

try {
    out = new FileOutputStream(f);
    bmp.compress(Bitmap.CompressFormat.JPEG, 90, out);
} catch (Exception e) { 
    e.printStackTrace();
} finally {
    try {
        if (out != null)
            out.close();
    } catch (Exception ex) {
    }
}
} 
```

PS：我的意思是进度条显示完成百分比

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:39:40.660

是的，使用 AsyncTask 并在对话框中显示下载进度：

// 将对话框声明为您的活动 ProgressDialog mProgressDialog 的成员字段；

// 在 onCreate 方法中实例化它

```
mProgressDialog = new ProgressDialog(YourActivity.this);
mProgressDialog.setMessage("A message");
mProgressDialog.setIndeterminate(false);
mProgressDialog.setMax(100);
mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);

DownloadFile downloadFile = new DownloadFile();

downloadFile.execute("Put here the URL .amr file");

private class DownloadFile extends AsyncTask<String, Integer, String> {
    @Override
    protected String doInBackground(String... sUrl) {
        try {
            URL url = new URL(sUrl[0]);
            URLConnection connection = url.openConnection();
            connection.connect();
            // this will be useful so that you can show a typical 0-100% progress bar
            int fileLength = connection.getContentLength();

        // download the file
        InputStream input = new BufferedInputStream(url.openStream());
        OutputStream output = new FileOutputStream("/sdcard/file_name.extension");

        byte data[] = new byte[1024];
        long total = 0;
        int count;
        while ((count = input.read(data)) != -1) {
            total += count;
            // publishing the progress....
            publishProgress((int) (total * 100 / fileLength));
            output.write(data, 0, count);
        }

        output.flush();
        output.close();
        input.close();
    } catch (Exception e) {
    }
    return null;
}

@Override
protected void onPreExecute() {
    super.onPreExecute();
    mProgressDialog.show();
}

@Override
protected void onProgressUpdate(Integer... progress) {
    super.onProgressUpdate(progress);
    mProgressDialog.setProgress(progress[0]);
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T07:43:30.757

1.  [计算所有图像的总大小](https://stackoverflow.com/questions/2100737/android-download-progress)，
2.  显示进度条并开始下载您的文件，
3.  下载时更新您的进度，
4.  只有在所有文件都下载后删除你的酒吧。

# android - Android - 如何从资产文件夹升级数据库？

> ID：14620429
> 
> 赞同：2
> 
> 时间：2013-01-31T07:18:00.497
> 
> 标签：android, android-sqlite

我可以在 onUpgrade() 方法中从断言文件夹中复制一个新的 *.db 文件吗？我真的想用 *.db 文件而不是查询来升级数据库。请帮忙。

谢谢。

# c++ - C++ 错误：未定义对“main”的引用

> ID：14620435
> 
> 赞同：20
> 
> 时间：2013-01-31T07:18:23.970
> 
> 标签：c++

我正在处理一个简单的类列表，但是在编译头文件和 cpp 文件时，我收到错误：未定义的对 `main' 的引用

我做错了什么，我该如何解决这个问题？

这是具有简单标题的 list.h 文件：

**列表.h**

```
#ifndef LIST_H
#define LIST_H

#include <string>

const int DEFAULT_CAPACITY = 100;

class List
{
    public:
        List();
        List(int capacity);
        ~List();
        void push_back(std::string s);
        int size() const;
        std::string at(int index) const;

    private:
        std::string* mData;
        int mSize;
        int mCapacity;
};

#endif 
```

这是 list.cpp 文件：

**列表.cpp**

```
#include "list.h"
#include <string>

List::List(){
    mData = new std::string[DEFAULT_CAPACITY];
    mSize = 0;
    mCapacity = 100;
};

List::List(int capacity){
    mData = new std::string[capacity];
    mSize = 0;
    mCapacity = capacity;
};

List::~List(){
    delete[] mData;
};

void List::push_back(std::string s){
    if (mSize<mCapacity){
        mData[mSize] = s;
        mSize++;
    }
};

int List::size() const{
    return mSize;
};

std::string List::at(int index) const{
    return mData[index];
}; 
```

我尝试尝试使用“使用命名空间 std”以及如何包含，但我无法弄清楚如何让这些错误消失。是什么原因造成的？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-31T07:30:39.943

你应该能够*编译* ，除非你有一个主程序，否则你`list.cpp`不能*链接它。*（这可能有点过于简单化了。）

编译源文件而不链接它的方式取决于您使用的编译器。如果您使用`g++`，命令将是：

```
g++ -c list.cpp 
```

这将生成一个包含您的类的机器代码的目标文件。根据您的编译器和操作系统，它可能被称为`list.o`或`list.obj`.

如果您尝试：

```
g++ list.cpp 
```

它将假定您已经定义了一个`main`函数并尝试生成一个可执行文件，从而导致您看到的错误（因为您*还没有*定义一个`main`函数）。

At some point, of course, you'll need a program that uses your class. To do that, you'll need another `.cpp` source file that has a `#include "list.h"` and a `main()` function. You can compile that source file and link the resulting object together with the object generated from `list.cpp` to generate a working executable. With `g++`, you can do that in one step, for example:

```
g++ list.cpp main.cpp -o main 
```

You have to have a `main` function somewhere. It doesn't necessarily have to be in `list.cpp`. And as a matter of style and code organization, it probably shouldn't be in `list.cpp`; you might want to be able to use that class from more than one main program.

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-31T07:29:24.487

对 main() 的未定义引用意味着您的程序缺少 main() 函数，这对于所有 C++ 程序都是必需的。在某处添加：

```
int main()
{
  return 0;
} 
```

# c++ - 访问不同文件夹之间的变量值时出现“未声明的变量”错误

> ID：14620436
> 
> 赞同：0
> 
> 时间：2013-01-31T07:18:33.620
> 
> 标签：c++, visual-c++, include

我正在开发一个使用 C++ 实现并在 Linux 上运行的项目，我试图从不同文件夹中的不同文件访问某些值，我尝试了几种解决方案，但没有一个有帮助。

我有一个文件，我们在一个名为'folderA'的文件夹中调用file1.cpp 和file1.h 我有另一个文件，我们在名为folderB / folderBB 的2 个文件夹中调用file2.cpp 和file2.h。

在 file2.cpp 中，它具有我想从 file1.cpp file2.cpp 发送或访问的参数的值

```
 Include”file2.h”
    .
    .
    .
    for(…)
    Test++;   // it is defined in file2.h 
```

现在我想要的是从 file1.cpp 访问“Test”的值来处理它。我使用 Makefile 编译了这个项目中的所有文件。所以我在这两个文件之间建立了一个没有错误的链接，如下所示：

file1.cpp：文件夹B/文件夹BB/file2.h
file2.cpp：文件夹A/file1.h

问题是当我将 (include”file2.h”) 放入 file1.cpp 或 file1.h 时，我得到了很多在 file2.h 中声明的未声明变量的错误。我尝试使用“extern 关键字”，但我得到了相同的先前错误 +“指定的存储类”。那么请你帮我找到解决这个问题的方法好吗？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T09:04:47.157

测试变量是如何声明的？如果在 file2.h 中是静态的，它将是文件常驻的并且在其他文件中不可见

# ruby - 使用 Ruby 标记表中包含重复短语的记录

> ID：14620442
> 
> 赞同：0
> 
> 时间：2013-01-31T07:19:05.067
> 
> 标签：ruby, tagging, text-mining

我正在尝试使用 Ruby 来“标记”CSV 表中的记录，具体取决于特定字段是否包含重复的某个短语。我不确定是否有库可以帮助完成这类工作，而且我认识到 Ruby 可能不是做这类事情的最有效的语言。

我的 CSV 表包含我要搜索的唯一 ID 和文本字段：

```
ID,NOTES
1,MISSING DOB; ID CANNOT BE BLANK
2,INVALID MEMBER ID - unable to verify
3,needs follow-up
4,ID CANNOT BE BLANK-- additional info needed 
```

从这个 CSV 表中，我提取了关键字并为它们分配了一个标签，该标签已存储在另一个 CSV 表中。

```
PHRASE,TAG
MISSING DOB,BLANKDOB
ID CANNOT BE BLANK,BLANKID
INVALID MEMBER ID,INVALIDID 
```

请注意，除了我已识别并想要映射的短语之外，我的源代码中的 NOTES 列还包含标点符号和其他短语。此外，并非所有记录都有匹配的短语。

我想创建一个看起来像这样的表：

```
ID, TAG
1, BLANKDOB
1, BLANKID
2, INVALIDID
4, BLANKID 
```

或者，交替使用用另一个字符分隔的标签：

```
ID, TAG
1, BLANKDOB; BLANKID
2, INVALIDID
4, BLANKID 
```

我已将映射表加载到哈希中，以短语为键。

```
phrase_hash = {}
    CSV.foreach("phrase_lookup.csv") do |row|
        phrase, tag = row
        next if name == "PHRASE"
        phrase_hash[phrase] = tag
    end 
```

散列的键是我想要遍历的搜索短语。我无法在 Ruby 中表达我接下来想做什么，但我的想法是：

将 NOTES 表加载到数组中。对于每个短语（即键），从包含该短语的数组中选择记录，收集与这些行关联的 ID，并将它们与该短语的关联标记一起输出，如上所述。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:09:49.660

我会给你一个使用哈希输入而不是 CSV 的例子：

```
notes = { 1 => "MISSING DOB; ID CANNOT BE BLANK",
          2 => "INVALID MEMBER ID - unable to verify",
          3 => "needs follow-up",
          4 => "ID CANNOT BE BLANK-- additional info needed"
        }

tags =  { "MISSING DOB" => "BLANKDOB",
          "ID CANNOT BE BLANK" => "BLANKID",
          "INVALID MEMBER ID" => "INVALIDID"
        }

output = {}

tags.each_pair do |tags_key,tags_value|
    notes.each_pair do |notes_key, notes_value|
        if notes_value.match(tags_key)
            output[notes_key] ||= []
            output[notes_key] << tags_value 
        end
    end
end 

puts output.map {|k,v| "#{k}, #{v.join("; ")}"}.sort 
```

# macos - 当电影可编辑 10.7+ 时，QTMovieView 中的电影控制器被遮挡

> ID：14620447
> 
> 赞同：0
> 
> 时间：2013-01-31T07:19:17.373
> 
> 标签：macos, osx-lion, quicktime

在 OS X 10.7 或更高版本上运行时，只要 QTMovie 可编辑，QTMovieView 控制器中的光标区域就会变成完全黑色。因此，没有可见的光标，并且未指示选择。在 10.6.8 或更早版本上运行的相同代码可以正常工作。如果未设置“可编辑”属性，则光标按预期显示。

是的，我看过 AVFoundation，但我需要处理 QT 可以处理的任何格式，这比 AVFoundation 支持的要多得多。

为了确保我没有在我的代码中引入一些东西，我从头开始，按照 Apple Dev 文档设置一个简单的可编辑电影视图，结果总是一样的。这是我正在关注的示例：

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/QTKitApplicationTutorial/ExtendingMediaPlayerApplication/ExtendingMediaPlayerApplication.html#//apple_ref/doc/uid/TP40008155-CH5-SW1](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/QTKitApplicationTutorial/ExtendingMediaPlayerApplication/ExtendingMediaPlayerApplication.html#//apple_ref/doc/uid/TP40008155-CH5-SW1)

此示例概述了使用 QTKit 设置基本应用程序并将 QTMovieView 放在窗口中并加载要播放的电影文件，然后使其可编辑。为了使电影可编辑，我遵循了以下示例：

```
 - (BOOL)readFromURL:(NSURL *)absoluteURL ofType:(NSString *)typeName error:(NSError **)outError
    {
        QTMovie *newMovie = [QTMovie movieWithURL:absoluteURL error:outError];
        if (newMovie) {
            [newMovie setAttribute:[NSNumber numberWithBool:YES] forKey:QTMovieEditableAttribute];
            [self setMovie:newMovie];

        }
        return (newMovie != nil);
    } 
```

为了测试这一点，注释掉该`setAttribute`行会使光标可见，但当然视频是不可编辑的。

我已经使用从 3.2.6 到 4.6 的 Xcode/Interface Builder 版本进行了尝试，结果相同。我尝试过 10.6、10.7 和 10.8 SDK。在 10.6.8 上构建的应用 10.6 SDK 在 10.7+ 上运行。播放很好，但它表现出控制器问题。使用较新的 SDK 构建不会改变这一点。这似乎是一个运行时问题。

没有错误报告。

有其他人看到这个吗？有已知的解决方法吗？我想出的唯一可能的解决方案是构建一个自定义控制器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T17:25:18.830

只要在播放器播放时 QTMovieEditableAttribute = NO，您就会看到滑块拇指。

这部电影并不关心你改变了多少次属性，只要你尝试编辑时它是YES。

制作几个像 EDIT_ON 和 EDIT_OFF 这样的#define 来设置 QTMovieEditableAttribute 更容易——我发现这有助于清楚地括住我的编辑代码......

# c# - 从业务连接器获取记录数

> ID：14620451
> 
> 赞同：1
> 
> 时间：2013-01-31T07:19:27.157
> 
> 标签：c#, axapta, x++, business-connector

我正在使用以下代码从 .NET Business Connector 获取记录数：

```
DynRec = DynAx.CreateAxaptaRecord("AddressCountryRegion");
DynRec.ExecuteStmt("select count(Name) from %1 where %1.Name like'I*'");
if (DynRec.Found)
    MessageBox.Show((string)DynRec.get_Field("Name")); 
```

有更好的方法吗？例如，获取记录数为整数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T09:22:35.707

在 Ax 中，您通常对 RecId 字段进行计数。这是一个 int 或 int64 取决于您的 Ax 版本。

# java - 在 Java 中将 2-legged OAuth 与 Google Tasks API 结合使用

> ID：14620452
> 
> 赞同：0
> 
> 时间：2013-01-31T07:19:28.433
> 
> 标签：java, google-oauth, google-tasks-api

我正在尝试使用 Java 为 Google Task API 构建一个同步应用程序。我还有一个额外的限制是使用 2-legged OAuth。我关注了[针对 Google Apps 域管理员使用带有 Google Tasks API 的 2-legged OAuth](https://developers.google.com/google-apps/help/articles/2lo-in-tasks-for-admins)的文章，但他们为 Java 提供的代码示例无法使用最新的 API 库进行编译。

此外，还有很多关于 Google Tasks 的材料，但要么已弃用，要么使用了不存在的 API/参考。如果有人可以向我指出相关文章或工作示例，那将是非常有帮助的。

我提到的文章和网站： [https](https://developers.google.com/google-apps/tasks/) ://developers.google.com/google-apps/tasks/ 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T22:54:59.153

Can you explain the constraint to use 2LO? There are ways to write sync apps that use OAuth2 and tokens, which has more current library and sample support. You can request "offline" access and save the refresh token in the client. Then you can continually sync that data for the user in question. Is the reason you need 2LO that you need to do this for an entire domain of users without prompting them?

In any case, the tasks api and 2LO should be compatible even if you're having issues with some libraries. I can't comment on the state of all the samples and libraries, but if you follow the steps to approve the tasks api scope for your client_id in ManageOAuthClients and you know the ids of your domain users, and you sign your requests properly, it should 'just work'

# c# - 引用实体框架命名空间时未找到类型或命名空间错误

> ID：14620455
> 
> 赞同：0
> 
> 时间：2013-01-31T07:19:40.340
> 
> 标签：c#, asp.net, entity-framework, web

我在我的网站中添加了一个 ADO.Net 实体数据模型并将其命名为`WebSocketModel`。因此，它的所有代码都已在文件夹`name space WebSocketModel`内部生成。`App Code`

但现在我无法引用 this `namespace`。我需要使用`context classes`在这个里面创建的`namespace`来触发`LINQ queries`。

我试图`namespace`通过`using WebSocketModel;`我的网络表单中的语句来引用，但我得到了错误

```
The type or namespace name 'WebSocketModel' could not be found 
(are you missing a using directive or an assembly reference?) 
```

这个错误更令人困惑的是，每当我输入`using`智能感知时，都会自动建议命名空间`WebSocketModel`。然而，后来当我建立我的网站时，我得到了上述错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T07:20:51.333

OK 花了很长时间，但终于解决了这个问题......我只是删除了实体模型并再次添加它。这样做之后，我得到了一个新的错误：

`The type 'PatientBPData' is not attributed with EdmEntityTypeAttribute but is contained in an assembly attributed with EdmSchemaAttribute. POCO entities that do not use EdmEntityTypeAttribute cannot be contained in the same assembly as non-POCO entities that use EdmEntityTypeAttribute.`

为了解决这个问题，我发现[这](https://stackoverflow.com/questions/8492654/entity-framework-4-2-the-type-is-not-attributed-with-edmentitytypeattribute-but)非常有帮助

# java - modbus4j modbusRTU主从通信功能

> ID：14620456
> 
> 赞同：1
> 
> 时间：2013-01-31T07:19:52.083
> 
> 标签：java, modbus

突然我下载了 seroUtils.jar 和 modbus4J.jar 文件并将其包含到 netbeans 中。所以请建议我一些方法通过 rs232 电缆向从机发送数据并从从机接收数据。在我的程序中，我设置了串行参数。但我不知道如何从从设备发送数据和接收命令。

请建议我一些在 modbus4j 中进行串行编程的方法或教程。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T03:28:34.210

我也在做一个类似的项目，我正在使用 rxtx。他们有简洁的解释和示例程序，它也很受欢迎。以下是一些您可能会觉得有用的链接

示例项目：- [http://rxtx.qbang.org/wiki/index.php/Projects](http://rxtx.qbang.org/wiki/index.php/Projects)

常见问题解答：- [http://rxtx.qbang.org/wiki/index.php/FAQ](http://rxtx.qbang.org/wiki/index.php/FAQ)

下载：- [http://rxtx.qbang.org/wiki/index.php/Download](http://rxtx.qbang.org/wiki/index.php/Download)

指南：- [http://rxtx.qbang.org/wiki/index.php/Using_RXTX](http://rxtx.qbang.org/wiki/index.php/Using_RXTX)

# ruby - ruby 中的结束关键字

> ID：14620458
> 
> 赞同：-2
> 
> 时间：2013-01-31T07:20:06.020
> 
> 标签：ruby

我只是尝试使用 ruby​​ 从 project-euler 解决问题 #45。我知道方法。但是我写了代码，它没有运行。我是 ruby​​ 新手，我不知道为什么后面必须有这么多“end”关键字（否则终端会抱怨）

这是代码：

```
class Test
    def initialize()

    end

    def Triangle(n)
        if 1 + 8*n < 0 then
            return false
        else
            i1 = 0.5 * (-1 + Math.sqrt(1 + 8*n))
            i2 = 0.5 * (-1 - Math.sqrt(1 + 8*n))
            cut_i1 = i1.to_i
            cut_i2 = i2.to_i
            if (cut_i1 == i1) & (i1 > 0)
                return true
            else if (cut_i2 == i1) & (i2 > 0)
                return true
            else
                return false
            end
        end
    end

    def Pentagonal(n)
        delta = 1 + 24*n
        if delta < 0 then
            return false
        else
            r1 = (1.0/6) * (1 + Math.sqrt(delta))
            r2 = (1.0/6) * (1 - Math.sqrt(delta))
            cut_r1 = r1.to_i
            cut_r2 = r2.to_i
            if (cut_r1 == r1) & (r1 > 0)
                return true
            else if (cut_r2 == r1) & (r2 > 0)
                return true
            else
                return false
            end
        end
    end 

    def Hexagonal(n)
        delta = 1 + 8*n
        if delta < 0 then
            return false
        else
            r1 = 0.25 * (1 + Math.sqrt(delta))
            r2 = 0.25 * (1 - Math.sqrt(delta))
            cut_r1 = r1.to_i
            cut_r2 = r2.to_i
            if (cut_r1 == r1) & (r1 > 0)
                return true
            else if (cut_r2 == r1) & (r2 > 0)
                return true
            else
                return false
            end
        end
    end
end
for i in (1...100)
    o = Test.new
    print o.Triangle(i)
end

end
end
end 
```

发生了什么。每次我从终端运行程序时。它什么都没有显示......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T07:21:20.713

这是因为您使用`else if`的是`elsif`. 比较：

```
if cond
  # do something
elsif another_cond
  # do something else
end

if cond
  # do something
else
  if another_cond
    # do something else
  end
end 
```

考虑到这一点，你的程序并没有按照你的想法去做。修复`elsif`'s 并查看。

# lightbox - Jmeter：如何在 jmeter 的灯箱中记录、打开图像

> ID：14620463
> 
> 赞同：0
> 
> 时间：2013-01-31T07:21:17.587
> 
> 标签：lightbox, jmeter

在我们的网站有一个投资组合页面，其中列出了缩略图，当任何人单击任何图像时，它将在灯箱中打开，单击交叉图像时，灯箱会关闭。

我已经通过 HTTP 代理记录了这个场景，发现在记录控制器下只记录了投资组合页面采样器，但没有记录单击我所做的缩略图事件。

然后我查看视图结果树侦听器，发现那里列出了单击缩略图。所以我想知道如何在 jmeter 的灯箱中记录打开图像

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T06:49:54.617

如果灯箱打开只是客户端（javascript），那么您所看到的完全没问题。

Jmeter 不是浏览器，它只记录客户端到服务器的流量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T09:20:23.447

您应该使用带有图像直接 URL 的“HTTP 请求”采样器。如果 Jmeter 不记录点击，打开照片将加载服务器，因此没有理由避免它们。

# android - 没有与目标“Google API”兼容的 AVD

> ID：14620468
> 
> 赞同：4
> 
> 时间：2013-01-31T07:21:34.753
> 
> 标签：android, avd

我正在开发一个 android 应用程序并尝试在 AVD 上启动它。API 设置为 Android 2.3.3。我有一个 2.3.3 模拟器（sdk 版本 10），android 清单显示：

```
 <uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="10" /> 
```

我将目标更改为 10 以匹配我在项目中包含的 api。如何解决此错误：

```
[2013-01-30 23:18:47 - kiloboltandroidframework] Failed to find an AVD compatible with target 'Google APIs'.
[2013-01-30 23:18:48 - kiloboltandroidframework] Still no compatible AVDs with target 'Google APIs': Aborting launch. 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-31T07:24:10.207

在创建新的 Android 虚拟设备时，选择**Target** as Google API - API Level 10

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T07:23:23.860

Android Api level 10 与 Google Api level 10 不同。Android 仅附带 android.jar 文件白色 Google Api 附带 android.jar 以及 maps.jar。您的项目可能需要 Google Api，而您尚未安装它们。要安装 Google Api，请转到 SDK Manager 并检查。如果它们已安装，则使用 Google Api 10 级平台创建 AVD。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T07:24:26.833

> 找不到与目标“Google API”兼容的 AVD。

=> 表示您没有使用 Google API 创建任何 AVD，但是是的，您已经实现了使用 Google API 的功能，例如 Google Map。

快速找到如何安装 Google API，安装后不久创建一个具有相同 Google API 的 AVD。

![在此处输入图像描述](../Images/2c91080067fa102e898d260f1d2fad26.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T07:23:20.163

您需要创建一个使用 Google API 插件的 AVD。见[这里](https://developers.google.com/android/add-ons/google-apis/installing)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T07:29:32.367

从 VDM 启动另一个 VM，其 Target api 为“Google APi”，平台为 2.3.3。如果您的 VDM（虚拟设备管理器）中没有任何 google api，请下载它。启动一次 然后运行你的项目。

# jquery - Ajax GET 请求失败

> ID：14620470
> 
> 赞同：0
> 
> 时间：2013-01-31T07:21:51.753
> 
> 标签：jquery, getjson

我有一个ajax请求如下：

```
permissionRequestModel.showApprovers = function () {
$.ajax({
    url: "http://ec6484646848compute-1.amazonaws.com/api/Request/permission?appid=1&opertype=requestor,
    type: "GET",
    contentType: "application/json",
    dataType: "json",
    error: function(){
        alert("failed");
    },
    success: function (data) {
          alert("Success");
    }
    });
}; 
```

这是失败的，但请求的 URL 正在正确地在 chrome 上的 Rest Client 中返回 JSON 响应。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T07:29:03.693

你有跨域问题吗？

# javascript - 在 apache camel 中初始化 javaScript 引擎

> ID：14620475
> 
> 赞同：2
> 
> 时间：2013-01-31T07:22:15.187
> 
> 标签：javascript, apache-camel

我有一个 javascript 文件（包含一些函数定义）。我想将文件 javascript 包含在我的路线中 Camel 使用的引擎中（理想情况下，我希望对整个 Camel 上下文执行一次。

有没有办法做到这一点？如果有怎么办？

我想做类似的事情：

```
<route>
   <from uri="direct:example" />
   <to uri="jdbc:mydb" />
   <setBody>
       <javaScript>
           var b = {
               "name":    wrapname(body.get("name")),
               "country": wrapcountry(body.get("country"))
           }
           JSON.stringify(b); 
       </javaScript>
   </setBody>
</route> 
```

我想导入的 javaScript 文件中定义的函数在`wrapname`哪里？`wrapcountry`（这些可能用于不同的路线）。

一个辅助问题是什么时候在 Camel 中初始化 javaScript 引擎（全局一次，针对每个 javaScript 表达式）？

谢谢，本杰明

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:43:25.043

从 Camel 2.11 开始，您可以从外部资源加载脚本

> 您可以将脚本外部化并让 Camel 从诸如“classpath:”、“file:”或“http:”之类的资源中加载它。这是使用以下语法完成的：“resource:scheme:location”，例如引用类路径上的文件，您可以这样做：

有关详细信息，请参见[http://camel.apache.org/javascript.html](http://camel.apache.org/javascript.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-30T18:31:48.750

将 javascript 代码外部化为“js”文件。例如，test-javascript.js 将包含

```
var content = request.getBody().toString().toUpperCase();
var substring = "CAMEL";
if (content.indexOf(substring) !== -1) {
	request.setHeader("uppercase", "true");
} else {
	request.setHeader("uppercase", "false");
}
request.setBody(content);
```

使用这个外部化 javascript 文件的骆驼路线看起来像，

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<routes xmlns="http://camel.apache.org/schema/spring">
    <route>
        <from uri="direct:start" />
        <log message="Got1 ${body}" />
        <setBody >
            <constant>Test message through camel route</constant>
        </setBody>
         <to uri="language://javascript:classpath:test-javascript.js?transform=false" />
         <to uri="log:javascript?showAll=true"/>        
        <log message="Got2 ${body}" />
        <log message="Got3 ${header.uppercase}" />
 </route>
</routes> 
```

它产生的输出如

[main] INFO route1 - Got2 TEST MESSAGE THROUGH CAMEL ROUTE [main] INFO route1 - Got3 true

# java - 选择在应用初始化时启动哪个活动？

> ID：14620478
> 
> 赞同：6
> 
> 时间：2013-01-31T07:22:41.333
> 
> 标签：java, android

很难在标题中总结问题，但实际上并不是很复杂。

我的问题是：安装应用程序后，您会在 Play 商店中看到一个“打开应用程序”按钮，该按钮会启动您的应用程序，类似于在 Eclipse 上单击运行时。当您执行上述任一操作时，清单中的第一个启动器活动就会启动。

例如，如果这是我的清单：

```
 <!-- Home screen replacemnt -->
    <activity
        android:name=".launcher" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.HOME" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>

    <!-- Launcher Application -->
    <activity
        android:name=".SettingsActivity" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

由于第一个活动不是启动器应用程序，因此单击打开时`SettingsActivity`将启动。

我的问题是用户第一次打开我的应用程序时，我希望他们看到启动器。我如何确保`.launcher`在我的应用程序打开时启动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T07:26:48.807

您不应该*根据*Intent 级别来区分这一点。相反，为您的应用程序创建一个[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)文件，如果版本尚不存在，则在其中写入一个表示版本的整数。表示旧版本。然后，基于该机制，您实现“首次安装”和/或“更新后首次运行”逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T07:36:49.233

您必须从 SettingsActivity 中删除意图过滤器

要解决重定向用户有很多解决方案： 1- 您可以使用两种不同的方法，添加 SplashScreen 活动并添加逻辑以确定下一个活动。2-将不可见的 UI Activity 添加为您的主要 Activity，有关更多详细信息，请参阅本教程： [TranscludeActivity](http://derekknox.com/daklab/2012/04/18/tutorial-how-to-create-invisible-apps-in-android)

3-将luncher设为主Activity，然后在onCreate方法中测试Settings是否存在，如果不存在则启动SettingsActivity并调用finish()；

# apache - 我正在开发一个 Apache 2 模块。为什么服务启动时会调用两次 create_server_config？

> ID：14620479
> 
> 赞同：1
> 
> 时间：2013-01-31T07:23:03.693
> 
> 标签：apache, apache-modules, apache2-module

我这样编写模块代码：

```
static void *example_create_server_config(apr_pool_t *p, server_rec *s)
{
  syslog(LOG_ERR, "create_server_config");
  // create my handler
  // my_handler_t *handler = (my_handler_t *)apr_palloc(pool, sizeof(my_handler_t));
  return NULL;
}

/* Dispatch list for API hooks */ 
module AP_MODULE_DECLARE_DATA example_module = {
    STANDARD20_MODULE_STUFF,
    NULL,                               /* create per-dir    config structures */
    NULL,                               /* merge  per-dir    config structures */
    example_create_server_config,       /* create per-server config structures */
    NULL,                               /* merge  per-server config structures */
    example_cmds,                       /* table of config file commands       */
    example_register_hooks              /* register hooks                      */
}; 
```

当我重新启动 Apache 时，其中`/var/log/syslog`包含以下内容：

```
Jan 31 14:46:49 su02 apache2: create_server_config
Jan 31 14:46:49 su02 apache2: create_server_config
Jan 31 14:46:49 su02 apache2: child_init 
```

为什么`create_server_config`函数被调用两次？

我在这个函数中 malloc 了一些全局变量。这安全吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T05:58:07.500

使用您在此函数内部收到的 apr_pool_t 指针获取内存是非常安全的。此外，对于您在 httpd.conf 文件中的每个服务器/主机配置，都会调用一次此函数，这就是您看到多次调用此函数的原因。例如，根服务器配置和一个配置部分将使该函数被调用两次。

```
typedef struct
{
    int value;
} my_srv_cfg;

static void *example_create_server_config(apr_pool_t *pool, server_rec *s)
{
    my_srv_cfg *new = apr_pcalloc(pool, sizeof (*new));
    new->value = 100;
    return new; 
} 
```

# jquery - jquery移动标题被切断

> ID：14620482
> 
> 赞同：5
> 
> 时间：2013-01-31T07:23:19.253
> 
> 标签：jquery, css, jquery-mobile

在 jquery mobile 中，当文本太长时，标题行会被截断，例如“a long text”可能会在小型设备上变成“a lon ...”。

我已经找到了通过设置来防止这种情况的解决方案

```
body .ui-li .ui-li-desc {
  white-space: normal;
} 
```

但这只是将文本换行到下一行，即使标题行的左侧和右侧有足够的空间（大约只有三分之一的空间保留给标题文本）。

在小型设备上，这将导致标题行包含 3 行或更多行，占用屏幕的大部分。

是否有一种解决方案可以使标题文本更适合可用的标题行空间？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-31T09:16:12.290

使用这个 css 并设置你的左右百分比（将 10% 更改为任何其他数字）

```
.ui-title {
    margin: 0.6em 10% 0.8em !important;
} 
```

如果您想在不同方面使用不同的值，请使用此 css：

```
.ui-title {
    margin: 0.6em 10% 0.8em 5% !important;
} 
```

此外，如果可能的话，给每个标题一个 id，因为提到的 css 将使用 .ui-title 类更改每个元素。

这是一个例子：http: [//jsfiddle.net/Gajotres/QP9qm/2/](http://jsfiddle.net/Gajotres/QP9qm/2/)

# ios - 如何在不重叠视图的情况下拖动 uiimageview？

> ID：14620485
> 
> 赞同：0
> 
> 时间：2013-01-31T07:23:51.037
> 
> 标签：ios, drag-and-drop, uiimageview

我在 superview 中有多个视图。如何在不重叠或接触其他视图的情况下拖动 uiimageview。任何帮助表示赞赏..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:03:01.687

我已经实现了类似的东西。在这里，我发布代码片段。Draggable 是您需要在包含图像的其他类中导入的类。

1) 可拖动.h

```
#import <UIKit/UIKit.h>

@interface Draggable : UIImageView
{
    CGPoint startLocation;
}
@end 
```

2) 可拖动.m

```
#import "Draggable.h"

@implementation Draggable

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}

- (void) touchesBegan:(NSSet*)touches withEvent:(UIEvent*)event {
    // Retrieve the touch point
    CGPoint pt = [[touches anyObject] locationInView:self];
    startLocation = pt;
    [[self superview] bringSubviewToFront:self];
}
- (void) touchesMoved:(NSSet*)touches withEvent:(UIEvent*)event {
    // Move relative to the original touch point
    CGPoint pt = [[touches anyObject] locationInView:self];
    CGRect frame = [self frame];
    frame.origin.x += pt.x - startLocation.x;
    frame.origin.y += pt.y - startLocation.y;
    [self setFrame:frame];
}

@end 
```

3) ProfilePicViewController.m - 我的图片类

```
#import "Draggable.h"

UIImageView *dragger;

-(void)viewWillAppear:(BOOL)animated
{
    UIImage *tmpImage = [UIImage imageNamed:@"icon.png"];

    CGRect cellRectangle;
    cellRectangle = CGRectMake(0,0,tmpImage.size.width ,tmpImage.size.height );
    dragger = [[Draggable alloc] initWithFrame:cellRectangle];
    [dragger setImage:tmpImage];
    [dragger setUserInteractionEnabled:YES];

    [self.view addSubview:dragger];

} 
```

在这里，您可以在其他图像上拖动“拖动器”。确保具有适当的图像尺寸。icon.png 的大小为 48X48。所以只要有适合你屏幕的图像大小。

希望这可以帮助你。

# iphone - 像通知栏一样在 iPhone 中拉起视图

> ID：14620486
> 
> 赞同：2
> 
> 时间：2013-01-31T07:23:51.583
> 
> 标签：iphone, ios, cocoa-touch

我想在 iPhone 中实现一个类似于通知栏的上拉视图。不同的是它将是从下到上。我该如何实施？

我为此附上了图片：

![在此处输入图像描述](../Images/c83896768e4df8630d54b4a664c8eb1d.png)

![折叠和展开视图](../Images/a58c03e4abbbbb06fa6d337f3c199aa6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:28:39.440

在这种情况下，您将不得不使用 GestureRecognizer。当通知图像关闭或向上滑动手势方向时，您应该在左上角图像上的用户选项卡上使用点击。

也许这会帮助你开始：[http://www.techotopia.com/index.php/An_iPhone_iOS_4_Gesture_Recognition_Tutorial_(Xcode_4)](http://www.techotopia.com/index.php/An_iPhone_iOS_4_Gesture_Recognition_Tutorial_(Xcode_4))

# node.js - 如何在 Node.js 中高效地进行网页抓取？

> ID：14620496
> 
> 赞同：1
> 
> 时间：2013-01-31T07:24:42.067
> 
> 标签：node.js, web-scraping, jsdom, cheerio

我正在尝试从购物网站 Express.com 上抓取一些数据。这是包含**image**、**price**、**title**、**color(s)**的许多产品中的 1 个。

```
 <div class="cat-thu-product cat-thu-product-all item-1">
<div class="cat-thu-p-cont reg-thumb" id="p-50715" style="position: relative;"><a href="/rocco-slim-fit-skinny-leg-corduroy-jean-50715-647/control/show/3/index.pro" onclick="var x=&quot;.tl(&quot;;s_objectID=&quot;http://www.express.com/rocco-slim-fit-skinny-leg-corduroy-jean-50715-647/control/show/3/index.pro_1&quot;;return this.s_oc?this.s_oc(e):true"><img class="cat-thu-p-ima widget-app-quickview" src="http://t.express.com/com/scene7/s7d5/=/is/image/expressfashion/25_323_2516_900/i81?$dcat191$" alt="ROCCO SLIM FIT SKINNY LEG CORDUROY JEAN"></a><a href="#jsLink"><img id="widget-quickview-but" class="widget-ie6png glo-but-css-off2" src="/assets/images/but/cat/but-cat-quickview.png" alt="Express View" style="position: absolute; left: 50px;"></a></div>
  <ul>
    <li class="cat-cat-more-colors">
      <div class="productId-50715">
        <img class="js-swatchLinkQuickview" title="INK BLUE" src="http://t.express.com/com/scene7/s7d5/=/is/image/expressfashion/25_323_2516_900_s/i81?$swatch$" width="16" height="6" alt="INK BLUE">
        <img class="js-swatchLinkQuickview" title="GRAPHITE" src="http://t.express.com/com/scene7/s7d5/=/is/image/expressfashion/25_323_2516_924_s/i81?$swatch$" width="16" height="6" alt="GRAPHITE">
        <img class="js-swatchLinkQuickview" title="MERCURY GRAY" src="http://t.express.com/com/scene7/s7d5/=/is/image/expressfashion/25_323_2516_930_s/i81?$swatch$" width="16" height="6" alt="MERCURY GRAY">
        <img class="js-swatchLinkQuickview" title="HARVARD RED" src="http://t.express.com/com/scene7/s7d5/=/is/image/expressfashion/25_323_2516_853_s/i81?$swatch$" width="16" height="6" alt="HARVARD RED">
      </div>
    </li>
    <li class="cat-thu-name"><a href="/rocco-slim-fit-skinny-leg-corduroy-jean-50715-647/control/show/3/index.pro" onclick="var x=&quot;.tl(&quot;;s_objectID=&quot;http://www.express.com/rocco-slim-fit-skinny-leg-corduroy-jean-50715-647/control/show/3/index.pro_2&quot;;return this.s_oc?this.s_oc(e):true">ROCCO SLIM FIT SKINNY LEG CORDUROY JEAN
    </a></li>
    <li>
      <strong>$88.00</strong>
    </li>
  <li class="cat-thu-promo-text"><font color="BLACK" style="font-weight:normal">Buy 1, Get 1 50% Off</font>
  </li>
</ul> 
```

我所做的非常幼稚且可能容易出错的方法是首先获取所有价格、图像、标题和颜色：

```
var price_objects = $('.cat-thu-product li strong');
var image_objects = $('.cat-thu-p-ima');
var name_objects = $('.cat-thu-name a');
var color_objects = $('.cat-cat-more-colors div'); 
```

接下来，我用从 DOM 中提取的数据填充数组，这些数据是使用**jsdom**或**Cheerio**为 node.js 抓取库提取的。（在这种情况下是 Cheerio）。

```
 // price info
  for (var i = 0; i < price_objects.length; i++) {
    prices.push(price_objects[i].children[0].data);
  }
  // image links
  for (var i = 0; i < image_objects.length; i++) {
    images.push(image_objects[i].attribs.src.slice(0, -10));
  }
  // name info
  for (var i = 0; i < name_objects.length; i++) {
    names.push(name_objects[i].children[0].data);
  }
  // color info
  for (var i = 0; i < color_objects.length; i++) {
    colors.push(color_objects[i].attribs.src);
  } 
```

最后，基于价格、标题、图像和颜色将匹配的假设创建一个产品对象：

```
for (var i = 0; i < images.length; i++) {
  items.push({
    id: i,
    name: names[i],
    price: prices[i],
    image: images[i],
    colors: colors[i]
  });
} 
```

这种方法速度慢，容易出错，而且非常抗 DRY。`$('.cat-thu-product')`我在想，如果我们能够一次抓取并使用单个 for 循环从单个产品中提取相关信息，那就太好了。

但是你有没有试过在**jsdom**或**Cheerio**中遍历 DOM ？我不知道任何人甚至可以理解它。`$('.cat-thu-product')`有人可以通过抓取包含所有相关信息的 div 元素然后提取必要的数据来展示我将如何使用这种建议的抓取方法吗？

或者也许有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T12:43:38.237

我建议仍然使用 jQuery（因为它简单、快速且安全）和一个 .each 示例：

```
var items = [];
$('div.cat-thu-product').each(function(index, productElement) {
  var product = {
    id: $('div.cat-thu-p-cont', productElement).attr('id'),
    name: $('li.cat-thu-name a', productElement).text().trim(),
    price: $('ul li strong', productElement).text(),
    image: $('.cat-thu-p-ima', productElement).attr('src'),
    colors: []
  };
  // Adding colors array
  $('.cat-cat-more-colors div img', productElement).each(function(index, colorElement) {
    product.colors.push({name: $(colorElement).attr('alt'), imageUrl: $(colorElement).attr('src')});
  });

  items.push(product);
});

console.log(items); 
```

为了验证您是否拥有所有必填字段，您可以轻松编写验证器或测试。但是如果你使用不同的库，你仍然应该遍历“div.cat-thu-product”元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T12:50:23.917

尝试 node.io [https://github.com/chriso/node.io/wiki](https://github.com/chriso/node.io/wiki)

这将是做你想做的事情的好方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-09T18:44:28.993

使用[https://github.com/rc0x03/node-promise-parser](https://github.com/rc0x03/node-promise-parser)

```
products = []; 
pp('website.com/products')
 .find('div.cat-thu-product')
 .set({
     'id':       'div.cat-thu-p-cont @id',
     'name':     'li.cat-thu-name a',
     'price':    'ul li strong',
     'image':    '.cat-thu-p-ima',
     'colors[]': '.cat-cat-more-colors div img @alt',
 })
 .get(function(product) {
    console.log(product);
    products.push(product);
 }) 
```

# tomcat - 致命错误 sun.security.validator PKIX 路径构建失败

> ID：14620500
> 
> 赞同：1
> 
> 时间：2013-01-31T07:25:22.680
> 
> 标签：tomcat, ssl, java

我之前遇到过这个问题，并通过更新我的 JDK 来解决这个问题。早些时候，当我遇到这个问题时，我使用的是使用 Yum 进行的默认安装，后来我从 oracle 下载了 JDK 并安装了它，并根据新的安装目录更改了默认的 $JAVA_HOME 路径。现在同样的问题又出现了，我查了[网上的相关帖子，](https://www.google.co.in/search?q=Failure-Fatal%20transport%20error%3asun.security.validator.ValidatorException%3a%20PKIX%20path%20building%20failed%3a%20sun.security.provider.certpath.SunCertPathBuilderException%3a%20unable%20to%20find%20valid%20certification%20path%20to%20requested%20target&oq=Failure-Fatal%20transport%20error%3asun.security.validator.ValidatorException%3a%20PKIX%20path%20building%20failed%3a%20sun.security.provider.certpath.SunCertPathBuilderException%3a%20unable%20to%20find%20valid%20certification%20path%20to%20requested%20target&aqs=chrome.0.57.262&sourceid=chrome&ie=UTF-8)找不到任何解决办法。

我们使用的示例代码只是通过 http 或 https 进行的简单身份验证。

```
//Http client object
HttpClient client = new HttpClient();
HostConfiguration config = client.getHostConfiguration();
client.getParams().setParameter("http.socket.timeout", new Integer(100000));

String Url = 'https://example.com/';
PostMethod method = new PostMethod(Url);

//Handler to try for 3 attempt in case of network failure
method.getParams().setParameter(HttpMethodParams.RETRY_HANDLER,
                                                                new DefaultHttpMethodRetryHandler(3, false));

//Here we are trying to connect through Httpclient method
int statusCode = client.executeMethod(method); 
```

不知道是什么导致了这个问题。

```
 keytool -list -keystore $JAVA_HOME/jre/lib/security/cacerts
    Enter keystore password:

    Keystore type: JKS
    Keystore provider: SUN

Your keystore contains 76 entries 
```

### 2013 年 2 月 11 日编辑

我做了一些更多的测试并重新安装了我的 jdk 和 tomcat，但仍然得到同样的错误。

```
Failure-Fatal transport error:
javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target 
```

[我按照URL](http://nodsw.com/blog/leeland/2006/12/06-no-more-unable-find-valid-certification-path-requested-target)上的说明进行操作：

```
java InstallCert services.example.com
Loading KeyStore jssecacerts...
Opening connection to services.example.com:443...
Starting SSL handshake...

No errors, certificate is already trusted

Server sent 1 certificate(s):

 1 Subject CN=*.example.com, OU=Domain Control Validated, O=*.example.com
   Issuer  SERIALNUMBER=04343339, CN=Go Daddy Secure Certification Authority, OU=http://certificates.godaddy.com/repository, O="GoDaddy.com, Inc.", L=Scottsdale, ST=Arizona, C=US 
```

这表明证书已经添加到 cacerts 中。现在这变得越来越有趣了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T17:05:36.797

最后，经过**成员们**的所有麻烦和帮助，我得到了解决这个问题的方法。我正在提供我的答案，以防将来有人面临同样的问题。

服务器 services.example.com 使用通配符证书（在我的情况下）并且它在 SSL 握手期间没有发送完整的证书（根据我的最佳理解），这导致了这个问题。

要解决此类问题，我们需要将证书添加到 java 信任库“cacerts”。

1：我从 URL [http://nodsw.com/blog/leeland/2006/12/06-no-more-unable-find-valid-certification-path-requested-target](http://nodsw.com/blog/leeland/2006/12/06-no-more-unable-find-valid-certification-path-requested-target)下载了一个java代码 我把这个文件放在服务器位于“$JAVA_HOME/jre/lib/security/cacerts”</p>

2：我使用“javac InstallCerts.java”编译了代码，它创建了一个类文件。

3：然后执行以下命令为服务器“services.example.com”添加证书</p>

```
java InstallCert services.example.com

Enter certificate to add to trusted keystore or 'q' to quit: [1]
1 
```

我输入“1”将证书添加到信任文件“jssecacerts”。

4：最后我用文件“jssecacerts”替换了文件“cacerts”。（注意：在替换之前备份两个文件）

```
mv cacerts cacerts-bkp-12-Feb-2013
cp –p  jssecacerts cacerts 
```

5：确认证书已经添加到cacerts文件中。要确认它，请执行以下命令：

```
keytool -list -keystore $JAVA_HOME/jre/lib/security/cacerts | grep example
Enter keystore password:

services.example.com-1, Feb 12, 2013, trustedCertEntry, 
```

6：重启相关服务并测试问题，已修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T07:40:00.363

您的信任库不信任服务器证书。是自签吗？您可能需要将其从服务器导出到您的信任库中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-03T13:31:33.740

所以也许有人会遇到这个问题，这是一个令人沮丧的问题，我花了两天时间才找到并解决。问题是JVM不信任服务器的证书，所以解决方法是配置我们的Tomcat服务器和我们的JVM信任这个站点。所以我会提到解决问题的所有步骤：

1.  下载该站点的证书，方法是打开其与 firefox 的链接，然后单击绿色锁，然后单击更多信息，然后是安全选项卡，查看证书按钮，然后是详细信息选项卡，最后是导出按钮。假设它被命名为 server_cert.crt
2.  将证书添加到要信任的证书的 JVM 列表中：您应该能够通过导航到 C:\Program Files\Java\jre1.8.0_151\lib\security 来做到这一点。要更新的文件名为 cacerts，因此将下载的证书 server_cert.crt 复制到该文件夹​​，然后在同一位置打开命令行，然后执行命令：

> keytool -J-Duser.language=en -import -trustcacerts -alias somealiasexp -keystore cacerts -file server_cert.crt

密码是changeit，你应该在命令行中有一个肯定的确认。要检查证书是否已添加，请执行以下命令：

> keytool -list -keystore cacerts -alias somealiasexp

. 并且应该显示证书。

3.  现在让我们配置我们的 tomcat 服务器以使用 cacerts 密钥库，进入文件夹“C:\Program Files\Java\apache-tomcat-7.0.88\bin”并创建文件“setenv.bat”，然后将这段代码复制到其中：

> 设置 JAVA_OPTS="-Djavax.net.ssl.trustStore=C:/Program Files/Java/jre1.8.0_151/lib/security/cacerts" "-Djavax.net.ssl.trustStorePassword=changeit"

4.  另一方面，我们必须为包含密钥库和证书的 ssl 配置一个新的端口或连接器，所以：
5.  创建一个新文件夹，例如“C:/tomcatkeystore”
6.  进入文件夹并通过在 CMD 上执行命令来创建一个新的密钥库：

> keytool -genkey -alias tomcat -keyalg RSA -keystore tomcatkeystore.jks 执行此命令时，您将不得不设置密码，假设它是“some_password”。

7.  如果您想购买受信任的证书，您必须通过执行以下命令生成证书请求：

> keytool -certreq -keyalg RSA -alias tomcat -file certtomcat.csr -keystore tomcatkeystore.jks

8.  将下载的证书 server_cert.crt 复制到文件夹中，然后通过执行以下命令将其添加到生成的密钥库中：

> keytool -J-Duser.language=en -import -trustcacerts -alias somealias -keystore tomcatkeystore.jks -file server_cert.crt

9.  现在让我们通过复制此标记来更新位于文件夹“C:\Program Files\Java\apache-tomcat-7.0.88\conf”中的文件 server.xml：

```
<Connector port="443" protocol="org.apache.coyote.http11.Http11Protocol"
                   maxThreads="150" SSLEnabled="true" scheme="https" secure="true"
                   clientAuth="false" sslProtocol="TLS" 
                   keystoreFile="file:///C:/tomcatkeystore/tomcatkeystore.jks" keystorePass="some_password" />
```

10.  现在最后一步是重新启动您的服务器。

要测试是否正确配置了 ssl 端口，您应该能够访问链接“ [https://localhost](https://localhost) ”中的 tomcat 接口并为其添加异常。就是这样，我希望这会有所帮助。

# html - 为什么推荐使用这种 HTML 格式约定？

> ID：14620506
> 
> 赞同：3
> 
> 时间：2013-01-31T07:25:35.623
> 
> 标签：html

我最近浏览了大量网站，以更好地了解大型网站如何构建其 HTML5 页面。

我注意到他们倾向于做

```
<script src="test.js"></script> 
```

代替

```
<script src="test.js" /> 
```

但是做

```
<link rel="stylesheet" href="test.css"/> 
```

代替

```
<link rel="stylesheet" href="test.css"></link> 
```

即使在这个技术博客中他们也这样做了，为什么这是一种首选的设计风格？

[http://net.tutsplus.com/tutorials/html-css-techniques/25-html5-features-tips-and-techniques-you-must-know/](http://net.tutsplus.com/tutorials/html-css-techniques/25-html5-features-tips-and-techniques-you-must-know/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T07:27:56.777

那是因为网络是规范化的，有些事情按照规范是可能的，有些则不是。背后的逻辑是，有些元素是自然无效的，而另一些则不是。

从[w3.org 上的 script 元素](http://www.w3.org/TR/html-markup/script.html)：

> 脚本元素必须同时具有开始标记和结束标记。

所以你不能拥有

```
<script src="test.js" /> 
```

[在链接元素上](http://www.w3.org/TR/html-markup/link.html)：

> 链接元素是一个空元素。链接元素必须有一个开始标签，但不能有一个结束标签。

一个`link`元素，不能有内容，可以写

```
<link rel="stylesheet" href="test.css"/> 
```

甚至（如果您不尝试编写 XHTML 会更好）

```
<link rel="stylesheet" href="test.css"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T07:27:38.637

[根据 HTML 标准](http://www.w3.org/TR/html4/interact/scripts.html#h-18.2.1)，标签必须有结束标签`script`，不能是自闭合标签。

自闭合标签在 XHTML 中用于在 HTML 中不需要闭合标签的标签，例如`link`and`input`标签。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T07:30:46.103

在 HTML 中，有些标签总是自封闭的。例如，

`<hr>Some content here</hr>`

没有任何意义。同理，也有不能自闭的标签。标签就是其中之一。

I am not sure about the reason of no self-closed tags, but the reason might come from the fact that the tag was intended to always contain code inside.

# perl - 合并多个正则表达式，我怎么知道哪个部分匹配？

> ID：14620511
> 
> 赞同：1
> 
> 时间：2013-01-31T07:25:50.600
> 
> 标签：perl

这是一个最小的案例，

我有多个正则表达式，即`aa`,`bb`和`cc`，在过去，我只是遍历所有正则表达式并查看字符串是否可以匹配其中任何一个。如果任何正则表达式匹配，请停止该过程。

但现在我决定把它完全说出来，用一个简单的 OR 操作，现在我得到了

`(aa)|(bb)|(cc)`

因此，如果我得到一个匹配，那`$1`将是我想要的，但我无法知道它是`(aa)`或它`(bb)`是否`(cc)`做到了，有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T07:50:14.947

在您的示例中，如果匹配，`$1`将设置；如果 bb 匹配，`$1`将是 undef`$2`并将被设置，等等。

```
if ( defined $1 ) {
    print "first part matched: $1.\n";
}
elsif ( defined $2 ) {
    print "second part matched: $2.\n";
}
... 
```

或者，更动态地，使用`@-`and `@+`：

```
my $string = "xbb";
if ( $string =~ /(aa)|(bb)|(cc)/ ) {
    my $match = ( grep defined $-[$_], 1..$#- )[0];
    if ( defined $match ) {
        print "part $match matched: " . substr( $string, $-[$match], $+[$match]-$-[$match] ) . ".\n";
    }
} 
```

# cocoa - 使 CocoaPods 将资源复制到特定文件夹

> ID：14620514
> 
> 赞同：3
> 
> 时间：2013-01-31T07:26:04.850
> 
> 标签：cocoa, cocoapods

在尝试使我的项目与 CocoaPods 一起工作之前，我的项目的目标将资源复制到一个文件夹结构中，例如：

> Project.app/Resources/deps/javascript/*.js Project.app/Resources/deps/html/index.html

在我的代码中，我访问了以下资源：

```
NSString *javascriptDirectory = [[bundle pathForResource:@"main" 
                                                  ofType:@"js"                                                       
                                             inDirectory:@"deps/javascript"] stringByDeletingLastPathComponent]; 
```

在为项目创建 CocoaPod 规范时，我发现 CocoaPods 将资源转储到`ProjectUsingCocoaPods.app/Resources`文件夹中。

为了使我的项目与 CocoaPods 一起工作，我必须修改我的代码以将资源转储到`Project.app/Resources`文件夹中，并修改要使用的访问权限：

```
NSString *javascriptDirectory = [[bundle pathForResource:@"main" 
                                                  ofType:@"js"] stringByDeletingLastPathComponent]; 
```

我的项目现在可以通过 CocoaPods 使用，这很棒。

然而，它的资源被毫不客气地转储到`Resources`文件夹中，这很丑陋，因此不是那么好。

我的 CocoaPods 规范的相关部分：

我有一个 CocoaPods 规范文件，它指定了我的项目需要的一些资源：

```
Pod::Spec.new do |s|
  #...
  s.resource  = ['Project/Dependencies/*.js', 'Project/Dependencies/index.html']
  #...
end 
```

**我的问题是**：是否可以指定 CocoaPods 应该将资源复制到的资源子目录？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-08-02T22:00:03.907

我发现将文件夹指定为资源只会在 Pods 项目中创建对该文件夹的引用：

```
s.resources  = "Project/Dependencies" 
```

因此，没有任何通配符。Pods 项目将引用`Dependencies`文件夹及其所有内容和子文件夹。

# java - android中的导航选项卡在膨胀菜单时带有ABS nullpointerexception

> ID：14620518
> 
> 赞同：1
> 
> 时间：2013-01-31T07:26:21.717
> 
> 标签：java, android, android-fragments, actionbarsherlock

我有个问题。此代码在我的 nexus 10 android 4.2.1 上运行良好。但是在 AVD android 2.3 上它给了我

```
NullPointerException com.example.training.ContentFragment.onCreateOptionsMenu(ContentFragment.java:97) 
```

所以我有两个导航选项卡，每个选项卡有两个片段。

```
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    // Inflate the menu; this adds items to the action bar if it is present.
    activity.getSupportMenuInflater().inflate(R.menu.trainings_menu, menu);
    super.onCreateOptionsMenu(menu, inflater);
} 
```

有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T08:08:25.670

> onCreateOptionsMenu(Menu menu, MenuInflater inflater)

这个方法已经带了 MenuInflater 引用，你不需要调用它，只需使用提供的一个

```
@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    super.onCreateOptionsMenu(menu, inflater);
    inflater.inflate(R.menu.activity_main, menu);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T07:45:24.067

您在 public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) 中的 Menu 和 MenuInflater 应该来自 Sherlock 包。com.actionbarsherlock.view.Menu 和 com.actionbarsherlock.view.MenuInflater

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T08:13:11.993

试试这个：

```
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    //first call the parent to default behavior
    super.onCreateOptionsMenu(menu, inflater);        
    // Inflate the menu; this adds items to the action bar if it is present.
    activity.getSupportMenuInflater().inflate(R.menu.trainings_menu, menu);
} 
```

菜单充气器已经作为参数传递给该方法。

希望能帮助到你。

# android - Android - 远程登录成功但不保留登录状态

> ID：14620520
> 
> 赞同：3
> 
> 时间：2013-01-31T07:26:33.973
> 
> 标签：android, http-post, httpclient, http-get

我有一个从远程服务器检索数据的 android 应用程序，包括身份验证。远程服务器正在使用 Yii。我们的 iPhone 版本正在使用远程 Web 服务，完全没有问题。但是使用我们的Android：1）我们可以登录，服务器返回200；2）但是下一页当我们尝试调用另一个api来查询数据库时，它一直返回用户未登录的错误。

我所做的： 1\. 检查后端的用户会话。是的，从 android 登录后，用户会话似乎处于活动状态。2\. 使用与 Firefox 的 POSTER 相同的 API 调用。是的，它可以检索数据。

可能出了什么问题？有人可以帮忙吗？非常感谢！

这是我的登录代码：

```
package ...
import ...

public class Login extends Activity implements OnClickListener {

    EditText etUser, etPass;
    Button bLogin, btnCancel;

    //Create string variables that will have the input assigned to them
    String username, password;

    //Create a HTTPClient as the form container
    HttpClient httpclient;

    //Use HTTP POST method
    HttpPost httppost;

    //Create an array list for the input data to be sent
    ArrayList<NameValuePair> nameValuePairs;

    //Create a HTTP Response and HTTP Entity
    HttpResponse response;
    org.apache.http.HttpEntity entity;
//    protected static final String TAG = MainActivity.class.getSimpleName();
    final String url = "..remote api...";
 // JSON Node names
     private static final String TAG_CONTACTS = "users";
     // contacts JSONArray
     JSONArray contacts = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.login);

        initialise();

    }

    private void initialise() {
        etUser = (EditText) findViewById(R.id.txtUname);
        etPass = (EditText) findViewById(R.id.txtPwd);
        bLogin = (Button) findViewById(R.id.sumit_login);
        btnCancel = (Button) findViewById(R.id.btn_Cancel);
        //Now to set an onClickListener

        bLogin.setOnClickListener(this);

        btnCancel.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View arg0) {
                Intent intent = new Intent(getApplicationContext(), MainActivity.class);
                startActivity(intent);  
            }
        });
    }

    public void onClick(View v)  {
        // This is where we will be working now
        if (etUser.getText().toString().length() == 0
                || etPass.getText().toString().length() == 0) {
            Toast.makeText(getApplicationContext(),
                    "Please enter username and password",
                    Toast.LENGTH_SHORT).show();
        } else {
            new MyAsyncTask().execute();
        }

    }//END onClick()

    private static String convertStreamToString(InputStream is) {
        BufferedReader reader = new BufferedReader(new InputStreamReader(is));
        StringBuilder sb = new StringBuilder();

        String line = null;
        try {
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                is.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        return sb.toString();
    }//END convertStreamToString()

    private class MyAsyncTask extends AsyncTask<Void, Void, Integer>
    {
        ProgressDialog mProgressDialog;

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            mProgressDialog = new ProgressDialog(Login.this);
            mProgressDialog.setMessage("Authenticating...");
            mProgressDialog.setIndeterminate(false);
            mProgressDialog.setCancelable(false);
            mProgressDialog.show();
        }

        @Override
        protected Integer doInBackground(Void... params) {

            int repsonStatus = 0;
            //Create new default HTTPClient
            httpclient = new DefaultHttpClient();

            //Create new HTTP POST with URL to php file as parameter
            httppost = new HttpPost("... login api ..."); 

            //Assign input text to strings
            username = etUser.getText().toString();
            password = etPass.getText().toString();

            JSONParser jParser = new JSONParser();
            //Next block of code needs to be surrounded by try/catch block for it to work
            try {
                //Create new Array List
//                nameValuePairs = new ArrayList<NameValuePair>(2);
                List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
                //place them in an array list
                nameValuePairs.add(new BasicNameValuePair("login", "login"));
                nameValuePairs.add(new BasicNameValuePair("username", username));
                nameValuePairs.add(new BasicNameValuePair("password", password));
                nameValuePairs.add(new BasicNameValuePair("api_key", "service_api"));

                //Add array list to http post
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

                //assign executed form container to response
                response = httpclient.execute(httppost); //response from the PHP file

                Log.i("AirconServer -- header login", response.getAllHeaders().toString());
                Log.i("postData", response.getStatusLine().toString());
                HttpEntity entity_ = response.getEntity();

                repsonStatus = response.getStatusLine().getStatusCode();
                if(response.getStatusLine().getStatusCode() == 200){
                    Log.i("AirconService - ", "LOGIN SUCCESSFUL!");

                    }
                } else {
                    Toast.makeText(getApplicationContext(),
                            "Invalid Username or password.",
                            Toast.LENGTH_SHORT).show();
                }

            } catch(Exception e){

                e.printStackTrace();
            }

            return repsonStatus;
        }
        @Override

        protected void onPostExecute(Integer result) {
            mProgressDialog.dismiss();
            if(result == 200) {
                Intent intent = new Intent(getApplicationContext(), MainMenuActivity.class);
                startActivity(intent);
            } else {
                Toast.makeText(getApplicationContext(),
                        "Invalid Username or password.",
                        Toast.LENGTH_SHORT).show();
            }         
        }
    }

} 
```

这是在用户已经登录时仍要求登录的另一个调用的代码。

```
public class GetMybookings extends ListActivity {

    int TIMEOUT_MILLISEC = 10000;
    ArrayList<jobs> bookings = new ArrayList<jobs>();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }
    @Override
    public void onStart() {
        super.onStart();

        final Calendar c = Calendar.getInstance();
        int mYear = c.get(Calendar.YEAR);
        final String url = "... api ...";
        new MybookingTask().execute(url);
    }

    @Override
    protected void onListItemClick(android.widget.ListView l, android.view.View v, int position, long id) {
        if (this.bookings == null) {
            return;
        }
        startActivity(new Intent(Intent.ACTION_VIEW));
    }
    private void refreshResults(ArrayList<jobs> books) {

        setListAdapter(new Mybookings(this,books));
    }

    private class MybookingTask extends AsyncTask<String, Void, ArrayList<jobs>> {

            ProgressDialog mProgressDialog;

                    @Override
        protected void onPreExecute() {
                        super.onPreExecute();
                        mProgressDialog = new ProgressDialog(GetMybookings.this);
                        mProgressDialog.setMessage("Loading Bookings...");
                        mProgressDialog.setIndeterminate(false);
                        mProgressDialog.setCancelable(false);
                        mProgressDialog.show();
        }
        protected ArrayList<jobs> doInBackground(String... urls) {
            try {
                HttpParams httpParams = new BasicHttpParams();
                HttpConnectionParams.setConnectionTimeout(httpParams, TIMEOUT_MILLISEC);
                HttpConnectionParams.setSoTimeout(httpParams, TIMEOUT_MILLISEC);

                HttpClient httpClient = new DefaultHttpClient();
                HttpGet httpGet = new HttpGet(urls[0]);
                HttpResponse response = null;

                try {

                    ResponseHandler<String> responseHandler = new BasicResponseHandler();
                    String responseBody = httpClient.execute(httpGet, responseHandler);

                    response = httpClient.execute(httpGet);
                    Log.i("AirconService GetMyBookings -- header login", response.getAllHeaders().toString());
                    Log.i("postData", response.getStatusLine().toString());
                    Log.i("AirconService GetMyBookings -- response data", response.getEntity().toString());
                    Log.i("AirconService GetMyBookings-- response data", response.toString());

                    HttpEntity entity = response.getEntity();
                    String responseString = new String();
                    if(entity != null) {
                        responseString = EntityUtils.toString(entity);
                        Log.i("WHAT???", "??? responseString is: " + responseString);
                    }

                } catch(ClientProtocolException e) {
                    e.printStackTrace();

            } catch(Throwable t) {
                t.printStackTrace();
            }

            return null;
        }
        protected void onPostExecute(ArrayList<jobs> result) {
            mProgressDialog.dismiss();
            refreshResults(result);
        }
    }
} 
```

**更新**

我尝试了 Anand 的解决方案：它正在工作！！！

通用.java：

```
import ...

public class Common {
    public static CookieStore cookieStore = new BasicCookieStore();
} 
```

登录代码：

```
public class Login extends Activity implements OnClickListener {

static HttpContext localContext = new BasicHttpContext(); 
```

...

```
 protected Integer doInBackground(Void... params) {
        localContext.setAttribute(ClientContext.COOKIE_STORE, Common.cookieStore);
        //Create new default HTTPClient
        httpclient = new DefaultHttpClient();

        //Create new HTTP POST with URL to php file as parameter
        httppost = new HttpPost(... api ...); 
```

登录后的第二次调用（在单独的类中）：

```
public class GetMybookings extends ListActivity {

    static HttpContext localContext = new BasicHttpContext();
        ....
        protected ArrayList<jobs> doInBackground(String... urls) {
            try {
                HttpClient httpClient = new DefaultHttpClient();
                HttpGet httpGet = new HttpGet(... api ....);
                HttpResponse response = null;

                try {
                    localContext.setAttribute(ClientContext.COOKIE_STORE, Common.cookieStore);
                    response = httpClient.execute(httpGet, localContext); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T08:33:36.290

试试这个对我有用：

```
// Create a local instance of cookie store

public static CookieStore cookieStore = new BasicCookieStore();

// Create local HTTP context

static HttpContext localContext = new BasicHttpContext();

 // Bind custom cookie store to the local context

localContext.setAttribute(ClientContext.COOKIE_STORE, cookieStore);

// Pass local context as a parameter
HttpResponse  httpResponse = client.execute(request, localContext);

List<Cookie> cookies = cookieStore.getCookies();
for (int i = 0; i < cookies.size(); i++) {
    MLog.d("LOCAL COOKIES: ", ""+ cookies.get(i));
}

HttpEntity entity = httpResponse.getEntity(); 
```

尝试使用这种方法：

```
 // Create a local instance of cookie store
public static CookieStore cookieStore = new BasicCookieStore();

// Create local HTTP context
static HttpContext localContext = new BasicHttpContext();

private synchronized void executeRequest(String  url) {

        HttpPost request = new HttpPost(url);

        List<NameValuePair> params = new ArrayList<NameValuePair>();
             //place them in an array list
        params.add(new BasicNameValuePair("login", "login"));
        params.add(new BasicNameValuePair("username", username));
        params.add(new BasicNameValuePair("password", password));
        params.add(new BasicNameValuePair("api_key", "service_api"));

        request.setEntity(new UrlEncodedFormEntity(params, HTTP.UTF_8));

        HttpClient client = new DefaultHttpClient();

        HttpResponse httpResponse;

        // Bind custom cookie store to the local context
        localContext.setAttribute(ClientContext.COOKIE_STORE, cookieStore);

        try{
        // Pass local context as a parameter
        httpResponse = client.execute(request, localContext);

        List<Cookie> cookies = cookieStore.getCookies();
        for (int i = 0; i < cookies.size(); i++) {
            Log.d("LOCAL COOKIES: ", ""+ cookies.get(i));
        }

        HttpEntity entity = httpResponse.getEntity();

        if (entity != null) {

            InputStream instream = entity.getContent();
            String res = convertStreamToString(instream);

            instream.close();
        }
        } catch (Exception e) {

            client.getConnectionManager().shutdown();
            e.printStackTrace();

        }      
 } 
```

# angularjs - 如何在angularjs中编写指令

> ID：14620521
> 
> 赞同：10
> 
> 时间：2013-01-31T07:26:39.510
> 
> 标签：angularjs, angularjs-directive

我喜欢使用指令制作自定义组件。我检查了很多教程，它让我感到困惑，任何人都可以解释指令是如何工作的。我打算制作的组件是

```
<shout-list></shout-list> 
```

喊单的模板是这样的

```
<div class="shout" ng-repeat="shout in shouts">
    <p>{{shout.message}}</p>
    <img src="media/images/delete.png" width="32" height="32" ng-click="deleteShout({{$index}},'{{shout._id}}')"/>
</div> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-31T08:14:00.077

这是您的指令，带有一些内联注释：

```
angular.module( 'directives', [] ).directive( 'shoutList', function () {
  return {
    restrict: 'E', // allow as an element; the default is only an attribute
    scope: {       // create an isolate scope
      shouts: '='  // map the var in the shouts attribute to this scope
    },
    templateUrl: 'templates/shoutList.html', // load the template file
    controller: function ( $scope ) {
      // we declare a your function for use in the view
      $scope.deleteShout = function ( idx, id ) {
        // do whatever
      };
    }
  };
}); 
```

和模板文件：

```
<div class="shout" ng-repeat="shout in shouts">
  <p>{{shout.message}}</p>
  <img src="media/images/delete.png" width="32" height="32" 
    ng-click="deleteShout({{$index}},'{{shout._id}}')" />
</div> 
```

现在您可以在代码中使用它，如下所示：

控制器：

```
.controller( 'MainCtrl', function ( $scope ) {
  $scope.myShouts = // ...
}); 
```

看法：

```
<shout-list shouts="myShouts"></shout-list> 
```

希望这可以帮助！

# cakephp - 在 CakePHP 中模拟受保护方法时出错

> ID：14620524
> 
> 赞同：0
> 
> 时间：2013-01-31T07:26:40.843
> 
> 标签：cakephp, phpunit

我很难在 CakePHP 2.2.5 中模拟受保护的方法，当我将方法更改为 public 时，一切正常，但是一旦它受到保护，我会收到以下错误：

PDOException SQLSTATE[42000]：语法错误或访问冲突：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“is_uploaded_file”附近使用正确的语法

我的模型看起来像这样：

```
<?php
class Contact extends AppModel {
    public $name = 'Contact';

    protected function is_uploaded_file($tmp_name) {
        return is_uploaded_file($tmp_name);
    }
} 
```

我的测试如下所示：

```
<?php
App::uses('Contact', 'Model');
class ContactTest extends CakeTestCase {
    public function setUp() {
        parent::setUp();
        $this->Contact = ClassRegistry::init('Contact');
    }

    public function testStub() {
        $stub = $this->getMock('Contact',array('is_uploaded_file'));

        // Configure the stub.
        $stub->expects($this->any())
            ->method('is_uploaded_file')
            ->will($this->returnValue(TRUE));

        $this->assertEquals(TRUE, $stub->is_uploaded_file('tmp'));
    }
} 
```

有任何想法吗？非常感激。

# android - 重新启动我的手机后GPS无法正常工作

> ID：14620525
> 
> 赞同：3
> 
> 时间：2013-01-31T07:26:43.423
> 
> 标签：android, gps, location

我正在开发一个应用程序，因为我需要找到当前位置值。为此，我以编程方式启用了 gps。现在，我关闭并打开我的手机。现在，我无法获取当前位置值，但我设备的 gps 已打开。

我在（motorola 2.3.3、htc 2.3.4 和 nexus 4.2.1）中发现了这个问题

我使用了以下代码。

```
String provider = Settings.Secure.getString(getContentResolver(),Settings.Secure.LOCATION_PROVIDERS_ALLOWED);

    if(!provider.contains("gps")){ //if gps is disabled
        final Intent poke = new Intent();
        poke.setClassName("com.android.settings", "com.android.settings.widget.SettingsAppWidgetProvider"); 
        poke.addCategory(Intent.CATEGORY_ALTERNATIVE);
        poke.setData(Uri.parse("3")); 
        sendBroadcast(poke);

locationManager = (LocationManager) getSystemService  (Context.LOCATION_SERVICE);

Criteria criteria = new Criteria();
criteria.setAccuracy(Criteria.ACCURACY_FINE);
List<String> provider = locationManager.getProviders(true);
Location location = null;
for (int i=provider.size()-1; i>=0; i--) 
{
       location = locationManager.getLastKnownLocation(provider.get(i));
       if (location != null) break;

if (location != null) 
   {
      String latitude=String.valueOf(location.getLatitude());
      String longitude=String.valueOf(location.getLongitude());    
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:46:51.777

打开 GPS 后，您必须调用 requestLocationUpdate 以便 GPS 开始感应。希望这可能会有所帮助。

# webrtc - WebRTC 处理 peerConnection 错误

> ID：14620527
> 
> 赞同：1
> 
> 时间：2013-01-31T07:26:47.863
> 
> 标签：webrtc

我想知道是否有办法检查 peerConnection 何时无法连接到 STUN 服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T09:55:53.237

据我了解，没有直接的方法可以做到这一点。

但是，如果你传入一个 STUN 服务器，然后在收集过程中没有得到任何 STUN 候选者（并且你的本地候选者是不可路由的），这意味着无法联系到 STUN 服务器。

# ios - 如何解决CFData（存储）内存增加？

> ID：14620539
> 
> 赞同：3
> 
> 时间：2013-01-31T07:27:35.193
> 
> 标签：ios, objective-c

我有以下代码来阅读 PDF 页面。
问题是每次我阅读仪器分析的页面时都会增加大约 1MB 的**CFData（存储）**？任何帮助表示赞赏。

```
CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
CGContextRef context;

context = CGBitmapContextCreate(NULL, 
                                    width, 
                                    height, 
                                    8,
                                    width* 4,
                                    colorSpace, 
                                    kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);
CGColorSpaceRelease(colorSpace);
CGContextClipToRect(context, CGRectMake(0, 0, pageSize.width*2, pageSize.height*2));

CGContextSaveGState(context);
CGPDFPageRef page = CGPDFDocumentGetPage(pdf, index + 1);
CGRect rect = CGPDFPageGetBoxRect(page, kCGPDFMediaBox);
CGRect rectClip = CGContextGetClipBoundingBox(context);
CGAffineTransform transform = aspectFit(rect,rectClip);
CGContextConcatCTM(context, transform);
CGContextSetInterpolationQuality(context, kCGInterpolationHigh); 
CGContextSetRenderingIntent(context, kCGRenderingIntentDefault);
CGContextDrawPDFPage(context, page);
CGContextRestoreGState(context);

CGImageRef image = CGBitmapContextCreateImage(context);
CGContextRelease(context);

UIImage *img = [UIImage imageWithCGImage:image];
CGImageRelease(image); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T18:29:17.940

我遇到了同样的问题，在寻找答案时发现了你的问题。

就我而言，我将 pdf 页面转换为 jpeg，然后将它们保存到磁盘。我的麻烦似乎在于 CGPDFDocumentRef 和 CFURLRef 的所有权和发布。

使用 _bridge cast on`NSURL *pdfURL`为我解决了这个问题。
我认为这个答案很好地解释了桥接演员：[ARC和桥接演员](https://stackoverflow.com/a/7261584/574478)

XCode 中的分析工具在这些类型的情况下非常有用。

```
- (void) drawRect:(CGRect)rect {
    NSURL *pdfURL = [NSURL fileURLWithPath:self.filePath];

    CGPDFDocumentRef document = CGPDFDocumentCreateWithURL((__bridge CFURLRef)pdfURL); 

    for (int i = 1; i <= (int)CGPDFDocumentGetNumberOfPages(document); ++i){
        CGContextRef context = UIGraphicsGetCurrentContext();
        CGContextSetRGBFillColor(context, 1.0,1.0,1.0,1.0);
        CGContextClearRect(context, self.bounds);
        CGContextFillRect(context, self.bounds);

        CGPDFPageRef pageRef = CGPDFDocumentGetPage(document, i);

        CGRect pageRect = CGPDFPageGetBoxRect(pageRef, kCGPDFMediaBox);

        CGFloat scale = MIN(self.bounds.size.width / pageRect.size.width, self.bounds.size.height / pageRect.size.height);

        CGContextSaveGState(context);
        CGContextTranslateCTM(context, 0.0, self.bounds.size.height);
        CGContextScaleCTM(context, 1.0, -1.0);
        CGContextScaleCTM(context, scale, scale);

        CGContextSetInterpolationQuality(context, kCGInterpolationLow);
        CGContextSetRenderingIntent(context, kCGRenderingIntentDefault);
        CGContextDrawPDFPage(context, pageRef);

        CGContextRestoreGState(context);

        CGImageRef image = CGBitmapContextCreateImage(context);

        NSString  *jpgPath = [NSHomeDirectory() stringByAppendingPathComponent:[NSString stringWithFormat:@"Documents/%@_%i.jpg", self.sourceId, i]];
        [UIImageJPEGRepresentation([UIImage imageWithCGImage:image], 1) writeToFile:jpgPath atomically:YES];

        CGImageRelease(image);
    }

    CGPDFDocumentRelease(document);
} 
```

希望这对某人有帮助！
凯文

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T07:05:29.577

经过长时间的跟踪，我发现问题是我使用完pdf文档后没有关闭它

```
CGPDFDocumentRelease(pdfDoc); 
```

如果不是，您将所有分配的页面保留在问题中

# drupal - 如何在 Drupal 的 Viewslide 中显示不同的内容类型（twitter、imges、blog 等）？

> ID：14620542
> 
> 赞同：0
> 
> 时间：2013-01-31T07:27:40.293
> 
> 标签：drupal, panel, drupal-views

我试图在 Drupal 上以视图幻灯片的形式显示不同的内容类型，包括 Twitter、图像和博客。目前它们都保存在一个字段中（无限值字段）。我要将这些值提取到节点，因为视图只接受节点类型值。我想知道最好的方法是什么？我是drupal新手，可以想到以下思路： 1\. 使用一种节点类型，并使用自定义代码为该节点类型创建显示模式 2\. 不同内容类型的单独节点类型，每个节点类型都有一些显示模式3\. 每个节点类型都有一个迷你面板，是否可以在视图幻灯片中显示？4\. 一些代码直接从字段中获取数据，并导出到视图？5\. 或者我使用 Colorbox 并完全忘记了 View Slideshow？

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:42:21.123

您必须在视图的“编辑”表单中设置要在查询中提取的所有内容类型。仅使用一步设置是不可能的，您必须选择“继续并编辑”，然后将不同的内容类型添加到幻灯片视图中。

# jquery - Ajax POST 请求不会将数据保存在数据库中

> ID：14620543
> 
> 赞同：2
> 
> 时间：2013-01-31T07:27:42.227
> 
> 标签：jquery, ajax, database, post

我运行了一个 ajax 函数来显示在页面上输入表单的结果。

一切正常，我没有收到任何错误消息，但在页面刷新时所有数据都消失了。它似乎只是在页面上发布数据而没有实际将其保存到数据库中。我这样做对吗？提前致谢！

```
 $('#submitAnswer').on('click', function(e){
            e.preventDefault();
            var dataString = tinyMCE.get('addAnswer').getContent();

            $.ajax({
                type: "POST",
                url: "/home/19/80/",
                data: $(dataString).serialize(),
                success: function(data){
                    alert(dataString);
                    $('.answer').html(dataString);
                },
                error: function(){
                    alert('damn');
                }
            });
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:53:13.260

你可以使用 web 句柄而不是 ajax，我不认为 .ajax 可以为 DB 保存数据。它只是获取数据。对于使用 web 处理程序，请参阅以下内容：

```
 $.post("AddInfoToDB.ashx?Data=" + Info, function (data) {

                    if (data != null && data != '') {
                          //Done
                    }
                    else {
                         // Error
                    }
                }); 
```

在处理程序中，您可以编写保存数据的代码

# c# - Window Media Player 当前位置问题

> ID：14620544
> 
> 赞同：1
> 
> 时间：2013-01-31T07:27:46.707
> 
> 标签：c#, .net, media, windows-media-player

我在我的桌面应用程序中使用 Windows Media Player。我在我的应用程序中设置了一个值，然后将其提供给 Window Media Player 的 Current Position 属性，如下所示：

```
 wMediaPlayer.Ctlcontrols.currentPosition = Convert.ToDouble(StartTimeofVideo); 
```

现在我面临的问题是，有时它从准确的位置开始，但是当我将值从 140 秒更改为 144 秒时，它不会从 144 秒开始播放，而是从 140 秒或 139 秒开始播放。

我想念的东西一定很简单，但我还没有找到任何解决方案。

# c# - 显示 system.data.datarowview 的组合框数据绑定

> ID：14620545
> 
> 赞同：6
> 
> 时间：2013-01-31T07:27:52.380
> 
> 标签：c#, sql-server, data-binding, combobox

我正在将组合框与数据源、显示成员、值成员绑定。它在我的电脑上工作正常，但在客户端电脑上却不行。以下是我的源代码：

cbxAlloyBinding 方法是从 UserControl 的构造函数中调用的。

```
private void cbxAlloyBinding()
    {
        DataTable dt = new DataTable();
        SqlDataAdapter adp = new SqlDataAdapter("SELECT alloyName,alloyId FROM alloy", con);
        adp.Fill(dt);

        if (dt.Rows.Count > 0)
        {
            cbxMetal.DisplayMember = "alloyName";
            cbxMetal.ValueMember = "alloyId";
            cbxMetal.DataSource = dt;
        }
        else
        {
            cbxMetal.Text = "";
        }
    }

    private void cbxMetal_SelectedIndexChanged(object sender, EventArgs e)
    {
        if (cbxMetal.SelectedIndex != -1)
        {
            DataTable dt = new DataTable();
            tempcmd = new SqlCommand("SELECT specification,alloyCode FROM alloy where alloyId='" + cbxMetal.SelectedValue + "'", con);
            SqlDataAdapter adp = new SqlDataAdapter(tempcmd);
            adp.Fill(dt);
            if (dt.Rows.Count > 0)
            {
                txtSpecification.Text = dt.Rows[0]["alloyCode"].ToString();
                txtSupplyConditions.Text = dt.Rows[0]["specification"].ToString();
                cbxheatBinding();
            }
            else
            {
                txtSpecification.Text = "";
            }

        }
    } 
```

这从过去两天一直困扰着我，我几乎尝试了所有技巧，但仍然无法正常工作。

客户的 PC 使用的是 Windows 7 Ultimate、sql server 2005 和 .net framework 3.5。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T07:25:31.830

如果在您的构造函数`cbxMetal_SelectedIndexChanged`中调用之前`cbxAlloyBinding()`调用过您的调用，则肯定会发生这种情况。

例如（参见下面的代码），您可能在构造函数中有其他组合框绑定，这些绑定可能`cbxAlloyBinding()`在构造函数之前出现，并且这些绑定正在调用`cbxMetal_SelectedIndexChanged`.

```
public Constructor()
{
        InitializeComponent();

        cbxheatBinding();      //1st Three Binding Methods may be somehow related to your cbxMetal,
        dtpStartDateBinding(); //which leads them to call cbxMetal_SelectedIndexChanged method.
        dtpEndDateBinding();
        cbxAlloyBinding();
} 
```

我怀疑您`cbxMetal.DataSource`是从代码中的其他点设置的，并且早于`DisplayMember`分配`ValueMember`；

请记住，`System.DataRow.DataRowView`只有在

> `ComboBox.SelectedValue``ValueMember`在分配之前调用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-02-11T22:51:29.463

设置`DisplayMember`和`ValueMemeber`设置后`DataSource`为我解决了这个问题。

```
cbxMetal.DataSource = dt;
cbxMetal.DisplayMember = "alloyName";
cbxMetal.ValueMember = "alloyId"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-14T17:59:00.100

我解决了同样的问题：

```
/*First get DataSource*/
comboBox1.DataSource = dt;
/*Then determine DisplayMember y ValueMember*/ 
comboBox1.DisplayMember = "YOUR_FIELD_NAME";
comboBox1.ValueMember = "YOUR_OTHER_FIELD_NAME"; 
```

这仅适用于 System.Data.DataTable 或 List 数据源

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T07:35:06.743

似乎问题不在于您在此处粘贴的代码，它可能与客户端环境、连接、权限等有关。您必须提供有关“它在客户端 pc 中不起作用”的更多信息。他们使用什么系统，错误是什么，您是否尝试过在客户端调试？

***编辑：** *那么你必须从头开始跟踪所有操作的问题。我的建议是制作一个虚拟窗体应用程序，只是一个标准窗体、一个组合框和一个按钮。在按钮的单击事件上，只需执行您所做的操作。只需绑定组合并将此临时应用程序发送到客户端。如果可行，请逐步进行。例如：

```
private void button1_Click(object sender, EventArgs e)
    {
        string conStr = "Data Source=PC-303\\SQLEXPRESS;Initial Catalog=sokaklar;User ID=sa;Password=*****";

        SqlDataAdapter adapter = new SqlDataAdapter("SELECT DISTINCT IL, IL_ID FROM sokaklar ORDER BY IL", new SqlConnection(conStr));
        DataTable dt = new System.Data.DataTable();
        adapter.Fill(dt);            

        comboBox1.DisplayMember = "IL";
        comboBox1.ValueMember = "IL_ID";
        comboBox1.DataSource = dt;            
    } 
```

我在一分钟内创建了这个应用程序，它对我有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-03T17:28:22.533

**这肯定会对您有所帮助**

在加载事件上你想写这段代码

```
onformload()
{
    cmb_dept.Items.Clear();
    SqlConnection conn = new SqlConnection(@"DATA SOURCE=(localdb)\MSSQLLocalDB;INTEGRATED SECURITY=true;INITIAL CATALOG=EMPLOYEE;");
    conn.Open();
    SqlCommand command = new SqlCommand("select dept_id, dept_name from department", conn);
    SqlDataAdapter adapter = new SqlDataAdapter(command);
    DataSet ds = new DataSet();
    adapter.Fill(ds);
    cmb_dept.ValueMember = "dept_id";
    cmb_dept.DisplayMember = "dept_name";
    cmb_dept.DataSource = ds.Tables[0];
} 
```

尝试使用使用要访问值的代码......

```
string dept = cmb_dept.Text;
MessageBox.Show("val=" + dept); 
```

## 你的 combobox.text = System.Data.DataRowView 将被解决##

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-25T06:53:35.810

它向我展示了同样的异常，所以我这样做了，它奏效了

```
 private void cb_category_SelectedIndexChanged(object sender, EventArgs e)
    {

            DataTable mydt = new DataTable();
            try
            {
                mydt = request.GetItem(int.Parse(cb_category.SelectedValue.ToString()));
            }
            catch { }

            if(mydt.Rows.Count>0)
            {
            cb_Item.DataSource = mydt;
            cb_Item.DisplayMember = "dispmember";
            cb_Item.ValueMember = "valmember";
            }
            else
            {
                cb_Item.DataSource = null;
            }       

    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-30T05:52:43.477

阅读这篇文章中的答案告诉我，这个错误可以通过多种方式显示出来，对我来说，它是以下内容：我的组合框与问题中提到的完全一样，它工作正常，我更改了**Sorted 的属性在设计器中将组合框设置为 True**并开始在每个项目中获取数据行视图。在浪费了很多时间之后，发现 Sorted 属性应该是 False 才能按预期工作。排序必须不通过您用于获取数据的查询。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-01-31T11:08:47.163

“comboBox1.SelectedValue”返回对象，你想要作为字符串转换它 Convert.ToString(comboBox1.SelectedValue) 然后使用

例如：

```
 tempcmd = new SqlCommand("SELECT specification,alloyCode FROM alloy where alloyId='" + Convert.ToString(cbxMetal.SelectedValue) + "'", con); 
```

# php - 从双缩短 URL 获取最终 URL (t.co -> bit.ly -> final)

> ID：14620546
> 
> 赞同：3
> 
> 时间：2013-01-31T07:27:56.217
> 
> 标签：php, url, curl

我无法使用从[这里](http://www.barattalo.it/2009/12/29/tiny-url-encode-and-decode-with-php/)获得的以下函数成功地将双缩短 URL 转换为扩展 URL ：

```
function doShortURLDecode($url) {
        $ch = @curl_init($url);
        @curl_setopt($ch, CURLOPT_HEADER, TRUE);
        @curl_setopt($ch, CURLOPT_NOBODY, TRUE);
        @curl_setopt($ch, CURLOPT_FOLLOWLOCATION, FALSE);
        @curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
        $response = @curl_exec($ch);
        preg_match('/Location: (.*)\n/', $response, $a);
        if (!isset($a[1])) return $url;
        return $a[1];
    } 
```

当我得到的扩展 URL 又是一个具有扩展 URL 的缩短 URL 时，我遇到了麻烦。

通过两个 URL 缩短服务后，如何获得最终扩展 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T07:43:28.500

由于`t.co`通过使用 JavaScript 和/或`<meta>`重定向使用 HTML 重定向，我们需要先获取它的内容。然后从中提取`bit.ly`URL 以执行 HTTP 标头请求以获取最终位置。此方法不依赖于在服务器上启用 cURL，并使用所有原生 PHP5 函数：

测试和工作！

```
function large_url($url) 
{
    $data = file_get_contents($url); // t.co uses HTML redirection
    $url = strtok(strstr($data, 'http://bit.ly/'), '"'); // grab bit.ly URL

    stream_context_set_default(array('http' => array('method' => 'HEAD')));
    $headers = get_headers($url, 1); // get HTTP headers

    return (isset($headers['Location'])) // check if Location header set
        ? $headers['Location'] // return Location header value
        : $url; // return bit.ly URL instead
}

// DEMO
$url = 'http://t.co/dd4b3kOz';
echo large_url($url); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T06:40:48.453

终于找到了一种方法来获取双短网址的最终网址。最好的方法是使用 longurl api。

我不确定这是否是正确的方法，但我终于得到了作为最终 url 所需的输出:)

这是我所做的：

```
<?php
 function TextAfterTag($input, $tag)
 {
        $result = '';
        $tagPos = strpos($input, $tag);

        if (!($tagPos === false))
        {
                $length = strlen($input);
                $substrLength = $length - $tagPos + 1;
                $result = substr($input, $tagPos + 1, $substrLength); 
        }

        return trim($result);
 }

 function expandUrlLongApi($url)
 {
        $format = 'json';
        $api_query = "http://api.longurl.org/v2/expand?" .
                    "url={$url}&response-code=1&format={$format}";
        $ch = curl_init();
        curl_setopt ($ch, CURLOPT_URL, $api_query );
        curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt ($ch, CURLOPT_CONNECTTIMEOUT, 0);
        curl_setopt($ch, CURLOPT_HEADER, false);
        $fileContents = curl_exec($ch);
        curl_close($ch);
        $s1=str_replace("{"," ","$fileContents");
        $s2=str_replace("}"," ","$s1");
        $s2=trim($s2);
        $s3=array();
        $s3=explode(",",$s2);
        $s4=TextAfterTag($s3[0],(':'));
        $s4=stripslashes($s4);
        return $s4;
 }
 echo expandUrlLongApi('http://t.co/dd4b3kOz');
?> 
```

我得到的输出是：

```
"http://changeordie.therepublik.net/?p=371#proliferation" 
```

上面的代码有效。

@cryptic 共享的代码也是**正确**的，但我无法在我的服务器上得到结果（可能是因为一些配置问题）。

如果有人认为它可以通过其他方式完成，请随时分享。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T07:38:18.727

也许您应该只使用`CURLOPT_FOLLOWLOCATION`= true 然后确定您被定向到的最终 URL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-15T09:23:58.460

如果问题**不是**t.co 或 a 中的 Javascript 重定向`<META http-equiv="refresh"...`，则可以很好地解决 stackexchange URL `https://stackoverflow.com/q/62317`：

```
public function doShortURLDecode($url) {
    $ch = @curl_init($url);
    @curl_setopt($ch, CURLOPT_HEADER, TRUE);
    @curl_setopt($ch, CURLOPT_NOBODY, TRUE);
    @curl_setopt($ch, CURLOPT_FOLLOWLOCATION, FALSE);
    @curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
    $response = @curl_exec($ch);
    $cleanresponse= preg_replace('/[^A-Za-z0-9\- _,.:\n\/]/', '', $response);
    preg_match('/Location: (.*)[\n\r]/', $cleanresponse, $a);
    if (!isset($a[1])) return $url;
    return parse_url($url, PHP_URL_SCHEME).'://'.parse_url($url, PHP_URL_HOST).$a[1];
} 
```

它会清除任何特殊字符的响应，这些字符可能会出现在 curl 输出中，然后再剪切出结果 URL（我在 php7.3 服务器上遇到了这个问题）

# android - 使用 HAXM 的 Android AVD 每次加载 APK 需要 1 分钟，正常吗？

> ID：14620550
> 
> 赞同：1
> 
> 时间：2013-01-31T07:28:01.337
> 
> 标签：android, performance, installation, emulation, avd

伙计，我越来越沮丧。

我刚刚重新安装了 Android ADT 捆绑包，因为我的 AVD 速度非常糟糕，我们正在谈论 2-3 分钟来加载一个带有新 APK 的 AVD，太疯狂了。重新安装后，我找到了HAXM。

安装 HAXM 有很大的不同，但是，我发现通过 Eclipse 和 AVD 构建、上传和安装我的应用程序仍然需要 1 分钟！这非常令人沮丧，因为我喜欢进行细微的更改、测试，然后继续。想象一下在每次构建之间等待一分钟，呃......

无论如何，这正常吗？如果是这样，你如何应对它，就 .ini 设置等有什么技巧吗？我真的很感激，我希望加载时间低于 20 秒，我认为这是合理的，因为我的实际手机加载时间不到 5 秒。

请让我知道，谢谢！

编辑：好的，看来这是磁盘利用率问题！有时候，当模拟器安装APK 磁盘读/写达到100% 容量时，就好像模拟器在写或读失控了，但是却只写了0.1 mb/s……很奇怪。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-24T10:37:48.467

您可以使用 genymotion 模拟器。与 eclipse 或 android studio 提供的任何模拟器相比，它的运行速度非常快。您可以免费下载。

# php - 在php中使用odbc更新表时出错

> ID：14620553
> 
> 赞同：1
> 
> 时间：2013-01-31T07:28:06.123
> 
> 标签：php, odbc, sql-update, dbf

我有 DBF 格式的数据库，并使用 ODBC 访问数据库。当我在表上更新时，它返回错误：

**警告：odbc_execute() [function.odbc-execute]：SQL 错误：[Microsoft][ODBC dBase Driver] Index not found., SQL 状态 S0012 in SQLExecute in C:\xampp\htdocs\payroll\index.php 第 16 行**

根据错误消息，似乎找不到索引。那是什么指数？怎么修？下面是我用来进行查询的 PHP 脚本。

```
$odbc = odbc_connect ('payroll', '', '') or die('Error connecting to server. Server says: '.odbc_errormsg());

$upd_q = "UPDATE paytran SET empno = 22 WHERE empno = 888";
$update = odbc_prepare($odbc, $upd_q);
$result = odbc_execute($update);

odbc_close($odbc); 
```

使用相同的方法插入新记录。插入查询成功，但对于 DELETE 和 UPDATE 查询无效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T09:22:52.323

根据[这个线程](http://www.experts-exchange.com/Programming/Languages/Visual_Basic/VB_DB/Q_21104228.html#a13835484)的最后一篇文章，

> 如果您现在有一个 .dbf 文件，通常它来自 FoxPro 应用程序。而且，由于您有一个 .cdx 文件，它会告诉您它是 FoxPro 复合索引文件，而 dBASE 不能使用它，当然也不能利用它来获得您希望在查询中获得的任何速度优势。

你有`.cdx`档案吗？如果是这样，您可能需要检查您拥有的版本，然后找到 FoxPro 驱动程序或 OLE DB 提供程序，并使用它而不是 ODBC。有关于如何在[此处](https://stackoverflow.com/questions/2238659/read-foxpro-db-using-php-java)和[此处](http://social.msdn.microsoft.com/Forums/en/visualfoxprogeneral/thread/821a3cb7-2f25-4cc9-b3a6-ec4551013d2a)进行操作的信息；驱动程序和数据库提供程序在[这里](http://msdn.microsoft.com/en-US/vfoxpro/bb190232)。

# c# - 为所有表单创建快捷键

> ID：14620554
> 
> 赞同：0
> 
> 时间：2013-01-31T07:28:11.197
> 
> 标签：c#, winforms, keydown

我打算为我的所有表单创建一个快捷键，我把这个代码放到我的所有表单中

```
public Form1()
        {
            InitializeComponent();
            this.KeyDown +=new KeyEventHandler(Form1_KeyDown);
        }

private void Form1_KeyDown(object sender, KeyEventArgs e)
        {
            if (e.KeyCode == Keys.Enter)
            {
                Button1.PerformClick();
            }
            else if (e.KeyCode == Keys.Escape)
            {
                button2.PerformClick();
            }
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            this.KeyPreview = true;
        } 
```

有什么办法，这样我就不会以所有形式重复这些代码，谢谢:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T07:31:29.397

使用表单基类...在那里您可以编写代码并从该基表单继承所有表单。

**[在派生类中引发基类事件（C# 编程指南）](http://msdn.microsoft.com/en-us/library/hy3sefw3%28v=vs.80%29.aspx)**

# android - 活动之间的Android内存泄漏

> ID：14620560
> 
> 赞同：5
> 
> 时间：2013-01-31T07:28:29.837
> 
> 标签：android, memory-leaks

我试图查明这个内存泄漏。

我有两个`SurfaceViews`和。我开始，然后导航到，然后按返回按钮返回到，然后我再次导航到。`A``B``A``B``A``B`

每次执行此操作时，我都可以看到分配的内存增加，最终会出现内存不足错误。

这是我从连接到`B`内部导航到的方式`SurfaceView``A`

```
 Context context =  this.getContext();
        Intent i =new Intent(context, StartCareer.class);
        i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        context.startActivity(i); 
```

在这两种视图中，我都有很多位图绘图。在`B`中，我找不到对 的任何引用`A`，而我能想到的上下文之外的唯一引用是对我拥有的 Global 类的引用。我还在后台进行了一些分析。我想这可能是一百万种不同的东西

我在 Eclipse 上有 DDMS 视图，但我不确定我在看什么，或者如何找到不断重复的确切对象。

我会接受 DDMS 分配跟踪器上的速成课程/教程，或者有人指出我做错了什么。

* * *

附加信息：

我在`SurfaceView`. 这样的例子`B`是：

```
////At class level
Bitmap rightB,leftB;
////In the constructor
rightB = Bitmap.createScaledBitmap(BitmapFactory.decodeResource(getResources(), R.drawable.right), 100,75, true);
////In doDraw
canvas.drawBitmap(rightB, rbX, rbY, null); 
```

还有我的 onDestroys

```
@Override
public void surfaceDestroyed(SurfaceHolder holder) {

    if (mThread.isAlive()){
        mThread.setMenuRunning(false);
    }
} 
```

* * *

所以我运行了 MAT，至少发现了一个漏洞。我的`Thread`Keeps 正在重新创建。这是在做什么。

```
@Override
public void surfaceCreated(SurfaceHolder holder) {
    loading=false;
    if (!mThread.isAlive()){
        mThread = new ViewThread(this);
        mThread.setMenuRunning(true);
        mThread.start();
    }
}

@Override
public void surfaceDestroyed(SurfaceHolder holder) {

    if (mThread.isAlive()){ 
        mThread.setMenuRunning(false);
    }
} 
```

假设每次视图失去或获得焦点时都会调用这些方法，这显然是错误的。我怎样才能重新组织它，使它不是？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T07:45:39.747

`onDestroy()`在您的`onstop()`应用程序中调用此方法。

```
private void unbindDrawables(View view) {
     Log.d(TAG,"in unbindDrawables");
        if (view.getBackground() != null) {
        view.getBackground().setCallback(null);
        }
        if (view instanceof ViewGroup) {
            for (int i = 0; i < ((ViewGroup) view).getChildCount(); i++) {
            unbindDrawables(((ViewGroup) view).getChildAt(i));
            }
        ((ViewGroup) view).removeAllViews();
        view.setBackgroundResource(0);
        Log.d(TAG,"removed views");
        //finish();
        }
 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T07:37:34.487

使用 DDMS 创建堆转储（*.hprof 文件），“堆启用”附近的按钮。

`*.hprof`然后使用标准 sdk 工具“ `hprof-conv.exe`”将此文件转换为另一个文件

然后下载eclipse内存分析工具（[http://www.eclipse.org/mat/](http://www.eclipse.org/mat/)）（我已经下载它作为独立工具），打开你的新的`*.hprof file`，它有“ `memory leak analyzer`”，可以告诉你哪里可能有错误（它说 bufferObjectManager 太大，占用了总内存的 50% 以上）。

当我清理它时（`BufferObjectManager.getActiveInstance().unloadBufferObject(((RectangularShape) obj).getVertexBuffer());)`它有一点帮助，但仍然有问题。

如果您完全清除此缓冲区，您将失去纹理等。如果问题仅在于关闭应用程序时的内存泄漏，避免此问题的方法是清除（`onDestroy();`）此缓冲区。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-31T07:38:09.030

一些提示：

*   完成活动后回收位图（例如 onDestroy）
*   尽可能使用应用程序上下文而不是活动本身作为上下文

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T07:37:13.617

尝试在您的活动的 onDestroy() 中回收（）您的位图。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T07:51:49.743

[此处详细说明了](https://stackoverflow.com/questions/12548203/memory-leak-in-android-when-trying-to-send-a-form-with-image-to-php-server/13448432#13448432)您需要做的事情。对于您的具体问题，您需要这样做

```
// resize to desired dimensions
    int height = b.getHeight();
    int width = b.getWidth();
    Log.d(TAG, "1th scale operation dimenions - width: " + width + ",
       height: " + height);

    double y = Math.sqrt(IMAGE_MAX_SIZE
            / (((double) width) / height));
    double x = (y / height) * width;

    Bitmap scaledBitmap = Bitmap.createScaledBitmap(b, (int) x, 
       (int) y, true);
    b.recycle(); 
```

# magento - 产品网格列过滤器在magento中不起作用

> ID：14620561
> 
> 赞同：0
> 
> 时间：2013-01-31T07:28:31.760
> 
> 标签：magento, count, configurable

我将只在我的网格中显示可配置的产品。并增加一栏显示该产品下的简单可配置产品的数量。为此，我这样写。它工作正常。在列中显示可配置的简单产品的数量。但是如何对此应用列过滤器。它不工作。这是我的查询

```
$collection = Mage::getModel('catalog/product')->getCollection()
        ->addAttributeToFilter('type_id', array('eq' => 'configurable'))
        ->addAttributeToSelect('sku')
        ->addAttributeToSelect('name')
        ->addAttributeToSelect('attribute_set_id')
        ->addAttributeToSelect('type_id');
        $collection->getSelect()
            ->joinLeft(
             array('a'=>'catalog_product_super_link'),
                    'a.parent_id = e.entity_id',
       array('assoc_count'=>'count(a.parent_id)'))->group('e.entity_id'); 
```

在此处显示列

```
 $this->addColumn('assoc_count',array(
            'header'=> Mage::helper('catalog')->__('Count SimplePro'),
            'width' => '80px',
            'index' => 'assoc_count',
    )); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T07:41:08.250

尝试使用 filter_condition_callback

```
$this->addColumn('assoc_count',array(
        'header'=> Mage::helper('catalog')->__('Count SimplePro'),
        'width' => '80px',
        'index' => 'assoc_count',
        'filter_condition_callback' => array($this, 'assocFilterCallback'),
));

protected function assocFilterCallback($collection, $column) {
    $val = $column->getFilter()->getValue();
    if (is_null(@$val))
        return;
    $collection->getSelect()->having('assoc_count=?', $val);
} 
```

可能是代码应该被重建，但我认为你理解这个想法。

# sql-server-2008 - SQL Server 2008 R2 中无法识别的函数名称

> ID：14620563
> 
> 赞同：1
> 
> 时间：2013-01-31T07:28:34.207
> 
> 标签：sql-server-2008

当我尝试执行以下操作时，我得到

消息 195，级别 15，状态 10，第 1 行“dbname”不是可识别的内置函数名称。

```
USE Personnel
GO
SELECT has_perms_by_name(dbname(), 'OBJECT', 'SELECT') as Have_Select,
* from sys.tables;
GO 
```

我不确定是否应该替换 dbname() 或者它是否存在语法错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T07:31:44.607

您可能需要以下我已确认的作品：

```
USE Personnel
GO
SELECT has_perms_by_name(DB_NAME(), 'OBJECT', 'SELECT') as Have_Select, 
* from sys.tables;
GO 
```

根据评论，它不区分大小写，问题是缺少下划线。

# visual-studio - Visual Studio：默认展开查找使用结果

> ID：14620566
> 
> 赞同：7
> 
> 时间：2013-01-31T07:28:39.627
> 
> 标签：visual-studio

在 Visual Studio (2010) 中，当查找某个类或方法的用法时，会出现查找结果对话框以及该用法。

有没有办法默认展开结果，所以我不需要点击“全部展开”按钮？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-03T14:08:26.930

如果您使用 ReSharper 插件，则可以选择“默认扩展搜索结果树”。我搜索了谷歌并找不到内置选项。

选择`Resharper| Options`，然后在 下`Environment | Search & Navigation`：

[![在选项中扩大搜索](../Images/9cfc0da385c523780718cc1ebbd396e5.png)](https://i.stack.imgur.com/XIHkf.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T06:00:38.463

这让生活变得更好 [http://blogs.msdn.com/b/saraford/archive/2008/04/03/did-you-know-you-can-use-to-expand-all-and-to -collapse-all-in-the-toolbox-186.aspx](http://blogs.msdn.com/b/saraford/archive/2008/04/03/did-you-know-you-can-use-to-expand-all-and-to-collapse-all-in-the-toolbox-186.aspx)

# sql - 在 SQL 中计算平均时间 (7)

> ID：14620572
> 
> 赞同：-4
> 
> 时间：2013-01-31T07:29:05.587
> 
> 标签：sql, sql-server, tsql

我正在制作一个考勤系统，我将在其中添加员工进出时间的每月记录。在月底将创建平均进出时间。

请告诉我如何申请`avg()`数据类型`time(7)`？

```
declare @tblPK table
(
    timeinat varchar(13) not null,
    timeoutat varchar(13) not null
) ;

insert into @tblPK 
select cast((onattendance) as varchar(13))ONTime, 
       cast((offattendance) as varchar(13))OFFTime 
from t_attendancedetails ;

select * from @tblPK ; 
```

这只是给出所有条目的输出。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T09:10:58.870

`time(7)`使用列以毫秒精度计算平均值。

```
select dateadd(millisecond, avg(datediff(millisecond, onattendance, offattendance)), cast('00:00' as time(7)) )
from t_attendancedetails 
```

该查询用于获取和`datediff`之间的毫秒数差异。然后它使用聚合函数来计算以毫秒为单位的平均差异，最后它使用将平均毫秒数添加到value中。`onattendance``offattendance``avg``dateadd``time(7)``00:00`

参考：
[DATEDIFF (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms189794.aspx)
[DATEADD (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms186819.aspx)
[AVG (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms177677.aspx)
[CAST 和 CONVERT (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms187928.aspx)

**更新：**

当计算精度为 的平均值时，`time(7)`您需要将时间分成两部分，因为`datediff`不`dateadd`处理`bigint`.

在计算平均值之前将时间差值转换为纳秒`time(7)`，然后分两步完成转换，首先是秒，然后是纳秒。

```
declare @T0 time(7) = '00:00:00'
declare @G bigint = 1000000000  
declare @H bigint = 100         

select dateadd(nanosecond, cast(right(T.A, 9) as int), dateadd(second, T.A / @G, @T0))
from
  (
  select avg(
              @G * datediff(second, @T0, offattendance) + @H * right(offattendance, 7) -
              @G * datediff(second, @T0, onattendance ) + @H * right(onattendance,  7)
            )
  from t_attendancedetails
  ) as T(A) 
```

# ios - 优化 iOS 的 Objective-C 方法的性能

> ID：14620575
> 
> 赞同：0
> 
> 时间：2013-01-31T07:29:16.960
> 
> 标签：ios, objective-c, performance

我有这样的方法，并且很难优化它以更好地运行。100 个单位大约需要 1 秒，并且在 和 之间进行 4`NSLog(@"Debug2")`次`NSLog(@"Debug3")`。在 iPhone 上 2 秒。随着更多的单位，它需要更多。250 个单位和 5 次在 mac 上需要 1.7 秒，在 iphone 上需要 3.2 秒。

我不认为表现在于一个周期内的周期。由于 250 * 5 = 1250，对于计算机来说处理速度不应该太多。

方法思路：

输入：NSMutableArray times - 包含时间 (2012-12-12, 2013-01-19) 等 NSMutableArray objectArray - 包含`LogUnit`对象。输出：计算视图数组。

主要思想：每个时间的视图，其中包含时间相同的 ObjectArray 中的对象。

我通过显示一小部分对象（参见`counted`代码和`_breakPlease`）使其更快，但它仍然不够快。

```
- (NSMutableArray*) sortViews: (NSMutableArray *)times and:(NSMutableArray *)objectArray
{
    NSLog(@"debug2");
    NSMutableArray *views = [[NSMutableArray alloc] initWithCapacity:times.count];

    NSString *number = [NSString stringWithFormat:@"SortLog%i ",[[NSUserDefaults standardUserDefaults] stringForKey:@"ObjectNumber"].intValue];

    NSString *comp = [[NSUserDefaults standardUserDefaults] stringForKey:number];

    LogUnit *unit;

    int counted = 0;
    for(int x = 0; x != times.count; x++)
    {
        @autoreleasepool {

        UIView *foo = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 400)];   
        foo.backgroundColor = [UIColor clearColor];

        int f = 0;
        int h = 0;

        NSString *attributeName = @"realTime";
        NSPredicate *predicate = [NSPredicate predicateWithFormat:@"%K IN %@", attributeName, [times objectAtIndex:x]];
        // Filter the objectArray by the time, so we don't have to run through all the objects in objectArray, and check if time is right.
        NSArray *filtered  = [objectArray filteredArrayUsingPredicate:predicate];

        for(int i = 0; i != filtered.count; i++)
        {
                unit = [filtered objectAtIndex:i];

                // Filter units by user choice (comp). Like comp = Warnings or comp = Errors and etc.
                if([[unit status] isEqualToString:comp] || [comp isEqualToString:NULL] || comp == NULL)
                {
                     // testing if the unit is correct to use
                    if([unit getEvent] != NULL)
                    {
                    // below is some computation for frames, to get them to proper position
                        unit.view.frame = CGRectMake(unit.view.frame.origin.x, f * unit.view.frame.size.height + 30, unit.view.frame.size.width, unit.view.frame.size.height);
                        [foo addSubview:unit.view];
                        counted++;
                        f++;
                        h = unit.view.frame.size.height * f;
                    }
                }
        }

        UILabel *myLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 320, 30)];
        myLabel.backgroundColor = [UIColor clearColor];
        myLabel.font = [UIFont boldSystemFontOfSize:20];
        myLabel.textColor = [UIColor colorWithRed:88 green:154 blue:251 alpha:1];
        myLabel.textAlignment = UITextAlignmentCenter;
        myLabel.text = [times objectAtIndex:x];
        // Just adding a label with "2012-12-30" or etc on top of the view.    
        [foo addSubview:myLabel];

        foo.frame = CGRectMake(0,0, 320, h + 30 );
        h = 0;
        [views addObject:foo];

        // counting added views for performance, if more than 30, return, and show only small portion of whole units, user has the option to show all the units if he wants to, but that takes a time to load..
        if(counted > 30 && filtered.count != counted)
        {
            if(_breakPlease == false)
            {
                _broken = true;
                break;
            }
        }
       }
    }
    NSLog(@"debug3");
    return views;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T07:53:37.260

有几件事供您尝试。

首先进行分析：

*   尝试 Instruments 中的分析器；
*   如果您对分析器有一些怨恨，那么请尝试获取代码每个部分的中值时间。

现在进行优化：

*   不要在循环中创建完全相同的对象。尝试创建示例对象，然后重用它们或复制它们；
    *   创建一个示例`UIView`并将其存档，并在您需要新视图时将其取消存档。将此也应用于`UILabel`;
    *   虽然我从未使用过它，但有一种方法可以在以后创建`NSPredicate`并应用一些值。这样你可以重复使用相同的`UIPredicate`；
    *   将您需要的颜色也保存在变量中，而不是询问，`UIColor`因为我们不知道如何`UIColor`处理它；
*   你能短路你的内`for`循环，即你有最大数量的正确单元吗？

好吧，分析器应该足以让你了解你的瓶颈在哪里，但我也让你有一些想法。

不要忘记在这里报告结果！:)

# string - htacess 删除一串字符并重定向到特定的 url

> ID：14620578
> 
> 赞同：0
> 
> 时间：2013-01-31T07:29:20.463
> 
> 标签：string, .htaccess

我想重定向：

[http://www.example.com/example-folder/%E2%80%8Bvirginia.html](http://www.example.com/example-folder/%E2%80%8Bvirginia.html)

进入：

[http://www.example.com/example-folder/virginia.html](http://www.example.com/example-folder/virginia.html)

因此只删除这部分： %E2%80%8B 从第一个 url

* * *

顺便说一句，如果第一个链接粘贴在Firefox中，字符不会改变。但在 chrome 上，我要删除的字符变成了方形字符。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T08:57:13.523

感谢 mslina2002，在另一个网站上找到：

对于那些寻找解决方案的人，请检查我之前发布的主题或将其作为您的指南（来自 mslina2002）

```
# for url like www.example.com/my-file-name/
# bad backlink site is doing this:
# string %E2%80%8B is randomly added to slug url
# fix will redirect back to www.example.com/my-file-name/
#
RewriteEngine on
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /(.*)\%E2%80%8B(.*)\ HTTP/ [NC]
RewriteRule ^.*$ http://www.example.com/%1 [R=301,L] 
```

奇迹般有效。

问题是可怕的“零宽度空间”或

# php - 调整上传的图像文件php

> ID：14620580
> 
> 赞同：-1
> 
> 时间：2013-01-31T07:29:24.660
> 
> 标签：php, image, resize

我想调整用户上传到我们服务器的图像的大小。我希望它是 200x200 像素。目前，这是我正在使用的代码。它上传正常，但它不会将图像调整为 200x200。或者有没有办法缩小文件大小？

```
// make a note of the current working directory, relative to root.
$directory_self = str_replace(basename($_SERVER['PHP_SELF']), '', $_SERVER['PHP_SELF']);

// make a note of the directory that will recieve the uploaded files
$uploadsDirectory = $_SERVER['DOCUMENT_ROOT'] . $directory_self . 'uploaded_files/';

// make a note of the location of the upload form in case we need it
$uploadForm = 'http://' . $_SERVER['HTTP_HOST'] . $directory_self . 'upload.form.php';

// make a note of the location of the success page
$uploadSuccess = 'http://' . $_SERVER['HTTP_HOST'] . $directory_self .     'upload.success.php';

// name of the fieldname used for the file in the HTML form
$fieldname = 'file';

// Now let's deal with the upload

// possible PHP upload errors
$errors = array(1 => 'php.ini max file size exceeded', 
            2 => 'html form max file size exceeded', 
            3 => 'file upload was only partial', 
            4 => 'no file was attached');

// check the upload form was actually submitted else print form
isset($_POST['submit'])
or error('the upload form is neaded', $uploadForm);

// check for standard uploading errors
($_FILES[$fieldname]['error'] == 0)
or error($errors[$_FILES[$fieldname]['error']], $uploadForm);

// check that the file we are working on really was an HTTP upload
@is_uploaded_file($_FILES[$fieldname]['tmp_name'])
or error('not an HTTP upload', $uploadForm);

// validation... since this is an image upload script we 
// should run a check to make sure the upload is an image
@getimagesize($_FILES[$fieldname]['tmp_name'])
or error('only image uploads are allowed', $uploadForm);

// make a unique filename for the uploaded file and check it is 
// not taken... if it is keep trying until we find a vacant one
//$now = time();

while(file_exists($uploadFilename = $uploadsDirectory.$fb_id.'-'.$_FILES[$fieldname]    ['name']))
{
//$now++;
}

// now let's move the file to its final and allocate it with the new filename
@move_uploaded_file($_FILES[$fieldname]['tmp_name'], $uploadFilename)
or error('receiving directory insuffiecient permission', $uploadForm); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:11:20.687

切勿缩小文件，否则会对图片造成不必要的损坏。而是尝试使用图像函数（例如[gd image functons](http://php.net/manual/en/ref.image.php) ）重新创建具有新缩放尺寸的图像。它提供了重新创建和调整大小所需的一切。此外，您也可以使用 Imagick Library，它有更多高级功能可供使用。

当您找到解决方法时，也尝试接受答案，如果您的接受率足够公平，它将使人们回答更多您的问题。

# twitter-bootstrap - Twitter Bootstrap 将徽章设置为无填充（或轮廓）？

> ID：14620583
> 
> 赞同：11
> 
> 时间：2013-01-31T07:29:32.580
> 
> 标签：twitter-bootstrap, sass, less, badge, outline

任何人都知道如何将 twitter bootstrap 徽章（或标签）从实心更改为轮廓？

![在此处输入图像描述](../Images/ea239de5bbf4a253f3093bf7d607cad1.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-31T10:55:27.583

将此 CSS 类添加到您的徽章：

```
.badge-outline {
    color: black;
    border: 1px solid #999;
    background-color: transparent;
} 
```

为其他颜色创建覆盖类：

```
.badge-outline.badge-success {
    border-color: #468847;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T11:13:58.730

徽章的典型 boostrap 配置具有与您的问题相关的这些关键部分（在他们的 中展开`labels-badges.less`）：

**当前引导**

```
.badge {
    color: @white;
    background-color: @grayLight;
    /* no border is set, just a border-radius: 9x */
}

.badge {
  // Important (red)
  &-important { background-color: @errorText; }
  &-important[href] { background-color: darken(@errorText, 10%); }

  // Warnings (orange)
  &-warning { background-color: @orange; }
  &-warning[href] { background-color: darken(@orange, 10%); }

  // Success (green)
  &-success { background-color: @successText; }
  &-success[href] { background-color: darken(@successText, 10%); }

  // Info (turquoise)
  &-info { background-color: @infoText; }
  &-info[href] { background-color: darken(@infoText, 10%); }

  // Inverse (black)
  &-inverse { background-color: @grayDark; }
  &-inverse[href] { background-color: darken(@grayDark, 10%); }
} 
```

因此，您可以通过以下方式覆盖它：

**在您以后的 LESS 代码中覆盖**

```
.badge {
    color: @black;
    background-color: transparent;
    border: 1px solid @grayLight; /* set your border */
}

.badge {
  // Important (red)
  &-important { background-color: transparent;
                border-color: @errorText;
                color: #errorText; /* maybe change color? up to you. */
              }
  &-important[href] { background-color: transparent;
                      border-color: darken(@errorText, 10%); 
                      color: darken(@errorText, 10%); /* ??? */
              }

  etc... for -warning, -success, -info, -inverse
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-06-14T23:21:52.040

快速引导 4 sass 版本

```
@each $color, $value in $theme-colors {
  .badge-outline-#{$color} {
    border: $border-width solid $value;
    color: $value !important;
    background: transparent !important;
  }
} 
```

# javascript - Javascript 字符串操作

> ID：14620584
> 
> 赞同：1
> 
> 时间：2013-01-31T07:29:33.177
> 
> 标签：javascript, arrays, string

Javascript 有许多可以在其上执行的字符串操作操作。所以我们有 concat()、slice()、match() 等方法

我的问题是所有这些字符串操作方法是否都返回一个新的字符串值作为结果，或者是否有一些方法实际上修改了方法中使用的实际字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T07:32:46.770

JavaScript（和许多其他语言）中的字符串被实现为不可变对象。这有一些有益的特性：

1.  它是线程安全的，更具体地说，
2.  可以安全地保存对同一字符串的多个引用，而不必担心值会发生变化。

这也意味着，如果*所有*字符串方法旨在修改原始值，则它们必须返回一个新字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T07:39:31.627

返回值是原始字符串的克隆。

也就是说，调用`concat, match`or`slice`不会修改原来的字符串。

您可以随时参考[MDN 参考](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/concat)文档

但是，引用来源

**康卡特**

组合两个或多个字符串的文本并返回一个**新字符串**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T07:54:49.780

字符串是不可变的，一旦创建，它们甚至不能再次修改。

[Mdn：](https://developer.mozilla.org/en-US/docs/JavaScript/Data_structures#Strings)

> 与 C 等语言不同，JavaScript 字符串是不可变的。这意味着一旦创建了字符串，就无法修改它。但是，仍然可以基于对原始字符串的操作创建另一个字符串，例如，原始字符串的子字符串（通过选择单个字母或使用 String.substr()）或使用连接运算符连接两个字符串(+) 或 String.concat()。

因此，是的。每个字符串操作都返回一个新字符串

# android - 如何保护数据库被其他应用程序数据库删除

> ID：14620589
> 
> 赞同：1
> 
> 时间：2013-01-31T07:29:52.630
> 
> 标签：android, sqlite

如果可能的话，请给我一些想法。

1.  我用 mydb.db 数据库创建了第一个应用程序并将数据库存储在 sdcard 中。

2.  创建了具有相同数据库名称 mydb.db 的第二个应用程序并存储相同的位置。

运行第一个应用程序后，它在 sdcard 中创建数据库，但第二个应用程序删除此数据库并创建自己的数据库。

如何保护第一个数据库被第二个数据库删除？

日志猫：

```
01-31 12:22:15.649: D/dalvikvm(25919): GC_EXPLICIT freed 77K, 4% free 6383K/6599K, paused 4ms+6ms
01-31 12:30:29.389: D/dalvikvm(25919): GC_EXPLICIT freed 10K, 4% free 6377K/6599K, paused 3ms+3ms

01-31 12:31:41.029: I/SqliteDatabaseCpp(6547): sqlite returned: error code = 26, msg = file is encrypted or is not a database, db=/mnt/sdcard/sdcard/appdatabase
01-31 12:31:41.029: E/SqliteDatabaseCpp(6547): CREATE TABLE android_metadata failed
01-31 12:31:41.039: E/DefaultDatabaseErrorHandler(6547): Corruption reported by sqlite on database: /mnt/sdcard/sdcard/appdatabase
01-31 12:31:41.079: E/DefaultDatabaseErrorHandler(6547): deleting the database file: /mnt/sdcard/sdcard/appdatabase
01-31 12:31:41.409: V/creating DB(6547): its done
01-31 12:31:41.479: V/TLINE(6547): new: android.text.TextLine@40668ae0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T08:06:49.440

所有应用程序都可以访问 SD 卡上的文件（如果 SD 卡插入另一台机器，其他人也可以访问）。

如果您不希望其他应用访问您的数据，则必须将其存储在内部存储上您应用的私有数据目录中。但是，这也不能阻止它被删除，因为允许*用户删除应用程序的数据。*

# c# - ScrollViewer 滚动事件

> ID：14620593
> 
> 赞同：0
> 
> 时间：2013-01-31T07:30:24.827
> 
> 标签：c#, silverlight-4.0, silverlight-5.0

有什么方法可以捕获 ScrollViewer 的以下事件

```
ScrollViewer.ScrollStarter="ScrollStarted"
ScrollViewer.ScrollCompleted="ScrollCompleted" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:01:34.967

I Think You Should Try My Way

```
public static class ScrollViewerBinding
{
  #region VerticalOffset attached property

  /// <summary>
  /// Gets the vertical offset value
  /// </summary>
  public static double GetVerticalOffset(DependencyObject depObj)
  {
    return (double)depObj.GetValue(VerticalOffsetProperty);
  }

  /// <summary>
  /// Sets the vertical offset value
  /// </summary>
  public static void SetVerticalOffset(DependencyObject depObj, double value)
  {
    depObj.SetValue(VerticalOffsetProperty, value);
  }

  /// <summary>
  /// VerticalOffset attached property
  /// </summary>
  public static readonly DependencyProperty VerticalOffsetProperty =
      DependencyProperty.RegisterAttached("VerticalOffset", typeof(double),
      typeof(ScrollViewerBinding), 
    new PropertyMetadata(0.0, OnVerticalOffsetPropertyChanged));

  #endregion
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T07:48:31.287

我认为没有像`ScrollStarted`或`ScrollEnded`在silverlight这样的事件。但是您可以创建一个`Dependency Property`监听 Horizo​​ntal 和 Vertical `Offset`s 并使用它`Dependecy Property`来触发一个自定义事件，指示用户是否滚动。

[此链接](http://blog.weareon.net/scrollviewer-scroll-change-event-in-silverlight/)包含一个示例；

# inno-setup - 我想为每个使用 inno 设置的用户在用户/我的文档中添加我的设置，但它对我不起作用

> ID：14620597
> 
> 赞同：0
> 
> 时间：2013-01-31T07:30:37.790
> 
> 标签：inno-setup

我想为每个使用 inno 设置的用户在用户/我的文档中添加我的设置，但它对我不起作用。

在这里，我向您提供我的 iis 文件。提前致谢。请帮帮我。

```
; Script generated by the Inno Setup Script Wizard.
; SEE THE DOCUMENTATION FOR DETAILS ON CREATING INNO SETUP SCRIPT FILES!
#define MyAppName "Testing"
#define MyAppVersion "1.0"
#define MyAppPublisher "Test"
#define MyAppURL "http://www.example.com/"
#define MyAppExeName "testing.exe"

[Setup]
; NOTE: The value of AppId uniquely identifies this application.
; Do not use the same AppId value in installers for other applications.
; (To generate a new GUID, click Tools | Generate GUID inside the IDE.)
AppId={{200DC169-9647-4295-91B4-B1D1D8482B82}
AppName={#MyAppName}
AppVersion={#MyAppVersion}
;AppVerName={#MyAppName} {#MyAppVersion}
AppPublisher={#MyAppPublisher}
AppPublisherURL={#MyAppURL}
AppSupportURL={#MyAppURL}
AppUpdatesURL={#MyAppURL}
;DefaultDirName={userdocs}\test
DefaultDirName={code:DefDirRoot}\test
DisableDirPage=yes
DefaultGroupName=test
DisableProgramGroupPage=yes
AllowNoIcons=yes
LicenseFile=C:\Users\abc\Desktop\final product\licence.txt
OutputDir=C:\Users\abc\Documents\test
OutputBaseFilename=VL-PI Setup
SetupIconFile=C:\Users\abc\Downloads\clientcommentsveryimp\CORRECTIONS_TO_INSTALLER_BUGS\CORRECTIONS_TO_INSTALLER_BUGS\Icon\icon.ico
Compression=lzma
SolidCompression=yes
PrivilegesRequired=none

[Tasks]
Name: "desktopicon"; Description: "{cm:CreateDesktopIcon}"; GroupDescription: "{cm:AdditionalIcons}"; Flags: unchecked
Name: "quicklaunchicon"; Description: "{cm:CreateQuickLaunchIcon}"; GroupDescription: "{cm:AdditionalIcons}"; Flags: unchecked; OnlyBelowVersion: 0,6.1

[Dirs]
Name: "{app}\Graphics"
Name: "{app}\lib"

[Files]
Source: "C:\test work\agriculture project requirments\jre-6u2-windows-i586-p.exe"; DestDir: "{tmp}"; Flags: deleteafterinstall;
Source: "D:\final product\30-01-2013\test.exe"; DestDir: "{app}"; Flags: ignoreversion;
Source: "C:\Users\test\Desktop\final product\Graphics\*"; DestDir: "{app}\Graphics"; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "C:\Users\test\Desktop\final product\lib\*"; DestDir: "{app}\lib"; Flags: ignoreversion recursesubdirs createallsubdirs

[Icons]
Name: "{group}\VL-PI"; Filename: "{app}\{#MyAppExeName}"
Name: "{group}\{cm:uninstallProgram,VL-PI}"; Filename: "{uninstallexe}"
Name: "{commondesktop}\{#MyAppName}"; Filename: "{app}\{#MyAppExeName}"; Tasks: desktopicon
Name: "{userappdata}\Microsoft\Internet Explorer\Quick Launch\{#MyAppName}"; Filename: "{app}\{#MyAppExeName}";
Tasks: quicklaunchicon

[Run]
Filename: "{app}\{#MyAppExeName}"; Description: "{cm:LaunchProgram,{#StringChange(MyAppName, '&', '&&')}}";check:InitializeSetup; Flags: nowait postinstall skipifsilent

[Code]
function Install_JavaFrameWork() : Boolean;
var
  hWnd: Integer;
  ResultCode: Integer;
  dotnetRedistPath: string;
  outVar : string;
begin

  dotnetRedistPath:= ExpandConstant('{tmp}\jre-6u2-windows-i586-p.exe');

try
  if Exec(dotnetRedistPath,'', '', SW_SHOW, ewWaitUntilTerminated, ResultCode) then
  begin
     // ResultCode contains the exit code
     case ResultCode of
     // 1641 The requested operation completed successfully. The system will be restarted so the changes can take effect.
     // 3010 The requested operation is successful. Changes will not be effective until the system is rebooted. 
1641:
     begin
        Result := true;
     end
     3010, 0:
     begin
        Result := false;
     end else // -> case default
     begin
        Result := true;
     end
  end;

  end else
  begin
     //handle failure if necessary; ResultCode contains the error code
     Result := false;
  end;
  except
  ShowExceptionMessage;
  end;
end;

function InitializeSetup(): Boolean;
var
 ErrorCode: Integer;
 JavaInstalled : Boolean;
 Result1 : Boolean;
 Versions: TArrayOfString;
 I: Integer;
begin
 if RegGetSubkeyNames(HKLM, 'SOFTWARE\JavaSoft\Java Runtime Environment', Versions) then
 begin
  for I := 0 to GetArrayLength(Versions)-1 do
   if JavaInstalled = true then
   begin
    //do nothing
   end else
   begin
if ( Versions[I][2]='.' ) and ( ( StrToInt(Versions[I][1]) > 1 ) or ( ( StrToInt(Versions[I][1]) = 1 ) and (
 StrToInt(Versions[I][3]) >= 6 ) ) ) then
    begin
     JavaInstalled := true;
    end else
    begin
     JavaInstalled := false;
    end;
   end;
 end else
 begin
  JavaInstalled := false;
 end;

 //JavaInstalled := RegKeyExists(HKLM,'SOFTWARE\JavaSoft\Java Runtime Environment\1.9');
 if JavaInstalled then begin
  Result := true;
 end 
 else begin
    if FileExists(ExpandConstant('{tmp}\jre-6u2-windows-i586-p.exe')) then
    begin 
    Log('File exists');

Result1 := MsgBox('This program requires Java Runtime Environment version 1.6 or newer.Do you want to install it  now?',
   mbConfirmation, MB_YESNO) = idYes;
      if Result1 = false then begin
         Result:=true;
       end 
       else begin
          Install_JavaFrameWork;
           Result:=true;
       end;
  end else 
   begin 
    Result:=true;
    end;
end;
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T10:18:30.310

管理员设置永远不应该尝试写入用户的配置文件，因为不能保证它们是您期望的用户，甚至不能从该机器访问。

您当前正在使用`PrivilegesRequired=none`它，因此它不会切换用户，但这会阻止您为某些用户安装 Java。您应该`PrivilegesRequired=admin`用于正常安装或`PrivilegesRequired=lowest`用户特定安装。

# c# - 将多个选定项从 Listbox1 移动到 ListBox2

> ID：14620603
> 
> 赞同：0
> 
> 时间：2013-01-31T07:30:51.940
> 
> 标签：c#, listbox

我试图将项目从一个列表框移动到另一个，如果它们是多个但我只能移动几个，这意味着少于计数。我也无法通过 for each 和 for 循环实现。

```
if (AdvLst.SelectedIndex > -1)
        {
            for (int i = 0; i <= AdvLst.Items.Count - 1; i++)
            {
                if (AdvLst.Items[i].Selected)
                {
                    string _value = AdvLst.SelectedItem.Value;
                    string _text = AdvLst.SelectedItem.Text;
                    ListItem item = new ListItem();
                    item.Text = _text;
                    item.Value = _value;
                    SelectedMortLst.Items.Add(AdvLst.Items[i]);
                    AdvLst.Items.Remove(AdvLst.Items[i]);
                }
            } 
```

并通过 foreach 循环：

```
 foreach (ListItem li in AdvLst.Items)
            {
                if (li.Selected == true)
                {
                    SelectedMortLst.Items.Add(AdvLst.SelectedItem);
                    AdvLst.Items.Remove(AdvLst.SelectedItem);
                }

            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T07:48:17.470

**解决方案 1**

```
var selectedItems = AdvLst.Items.Cast<ListItem>().Where(m => m.Selected).ToArray();
SelectedMortLst.Items.AddRange(selectedItems);

//there's no removeRange, so...
foreach(var item in selectedItems)
    AdvLst.Items.Remove(item); 
```

**解决方案2**（几乎相同）

```
var selectedItems = AdvLst.Items.Cast<ListItem>().Where(m => m.Selected).ToArray();
foreach(var item in selectedItems) {
   SelectedMortLst.Add(item);
   AdvLst.Items.Remove(item);
} 
```

**解决方案3，for循环代码更正**

```
for (int i = 0; i <= AdvLst.Items.Count - 1; i++)
    {
       if (AdvLst.Items[i].Selected)
           {
              string _value = AdvLst.SelectedItem.Value;
              string _text = AdvLst.SelectedItem.Text;
              ListItem item = new ListItem();
              item.Text = _text;
              item.Value = _value;
              SelectedMortLst.Items.Add(AdvLst.Items[i]);
              AdvLst.Items.Remove(AdvLst.Items[i]);
              i--;
            }
      } 
```

因为如果你在 for 循环中删除一个项目，集合的计数会改变，并且`i+1`当你删除项目时所在的项目现在有 index `i`。使用`i--`，您的 for 循环将适应该变化

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T07:47:27.453

一次做一个操作，要么先删除，要么先添加。您可以先将项目添加到目标列表，然后再从源中删除

```
List<ListItem> itemsToDelete=new List<ListItem>();
 foreach (ListItem li in AdvLst.Items)
            {
                if (li.Selected == true)
                {
                    SelectedMortLst.Items.Add(AdvLst.SelectedItem);
                    itemsToDelete.Add(AdvLst.SelectedItem);
//                    AdvLst.Items.Remove(AdvLst.SelectedItem);
                }

            }

foreach(ListItem item in itemsToDelete)
{
AdvLst.Items.Remove(item);
} 
```

# iphone - 如何将 Youtube 视频 URL 导入 iPhone 应用程序

> ID：14620604
> 
> 赞同：0
> 
> 时间：2013-01-31T07:30:52.157
> 
> 标签：iphone, facebook, ios5, uiwebview, youtube

我正在开发一个 iPhone 应用程序，在其中将 youtube 链接添加到 UIWebView。现在，当我单击任何视频播放该视频的链接时，我需要检索该链接，以便用户可以在 Facebook 上共享该链接。

我正在使用以下代码

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    [webview loadRequest:[NSURLRequest requestWithURL:[NSURL  URLWithString:@"http://m.youtube.com"]]];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:05:13.997

使用此代码可能会对您有所帮助

```
NSString *getURL = @"";

    if (userInterfaceIdiom == UIUserInterfaceIdiomPhone) {
        getURL = [webview stringByEvaluatingJavaScriptFromString:@"function getURL() {var player = document.getElementById('player'); var video = player.getElementsByTagName('video')[0]; return video.getAttribute('src');} getURL();"];
    } else {
        getURL = [webview stringByEvaluatingJavaScriptFromString:@"function getURL() {var bh = document.getElementsByClassName('bh'); if (bh.length) {return bh[0].getAttribute('src');} else {var zq = document.getElementsByClassName('zq')[0]; return zq.getAttribute('src');}} getURL();"];
    }

    NSString *getTitle = [webview stringByEvaluatingJavaScriptFromString:@"function getTitle() {var jm = document.getElementsByClassName('jm'); if (jm.length) {return jm[0].innerHTML;} else {var lp = document.getElementsByClassName('lp')[0]; return lp.childNodes[0].innerHTML;}} getTitle();"];

    NSString *getTitleFromChannel = [webview stringByEvaluatingJavaScriptFromString:@"function getTitleFromChannel() {var video_title = document.getElementById('video_title'); return video_title.childNodes[0].innerHTML;} getTitleFromChannel();"];

    NSLog(@"%@, %@, %@", getURL, getTitle, getTitleFromChannel); 
```

# php - 将 mysql_fetch_array 的值传递给 Array()？

> ID：14620606
> 
> 赞同：1
> 
> 时间：2013-01-31T07:31:23.313
> 
> 标签：php

这是我的代码：

```
$scontain = "SELECT id FROM voting";
$qcontain = mysql_query($scontain);

$r_idarray = array();
while ($rcontain = mysql_fetch_array($qcontain))
{
    $r_idarray[] = $rcontain['id'];
    //let's say there are 5 names here//
}

echo $r_idarray; 
```

我试图让我的表“投票”的全部内容。在 while 循环内，它成功打印出“id”列下的表的全部内容，但是当我尝试在 while 循环外回显它时，它会打印“Array”？谁能知道如何解决这个问题。先感谢您...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T07:34:42.557

要打印数组，您可以执行以下操作：

```
print_r($r_idarray); 
```

代替

```
echo $r_idarray; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T07:39:33.703

您查询的一件事应该是这样来选择所有列

```
$scontain = "SELECT * FROM voting"; 
```

你只需要这样做

```
$i=0;
while ($rcontain = mysql_fetch_array($qcontain))
{
    $r_idarray[$i] = $rcontain;
    $i++;
}
echo '<pre>';
print_r($r_idarray); 
```

如果您需要结果中的特定列

```
$i=0;
while ($rcontain = mysql_fetch_array($qcontain))
{
    $r_idarray[$i]['id'] = $rcontain['id'];
    $r_idarray[$i]['column1'] = $rcontain['column1'];
    $r_idarray[$i]['column2'] = $rcontain['column2'];
    $r_idarray[$i]['column3'] = $rcontain['column3'];
    $i++;
}

echo '<pre>';
print_r($r_idarray); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T07:34:46.897

您必须使用 print_r($r_idarray) 。

echo 用于打印字符串。

使用 print_r 打印数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T07:35:08.147

### 使用[`print_r`](http://php.net/manual/en/function.print-r.php)或[`var_dump`](http://php.net/manual/en/function.var-dump.php)打印`array`

代替：

```
echo $r_idarray; 
```

和：

```
print_r($r_idarray); 
```

或者：

```
var_dump($r_idarray); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T07:35:29.650

如果要显示全部内容

```
SELECT id FROM voting 
```

至

```
SELECT * FROM voting 
```

之后你可以使用`print_r($r_idarray);`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-31T07:39:06.413

你不能“回显”一个数组，你只能“回显”一个字符串。当然你会看到'Array'。为了打印出数组的内容，您要么必须遍历它的内容，要么执行“var_dump($array)”。

```
while($val in $array){
  echo $val;
} 
```

或者：

```
print_r($array); 
```

或者：

```
var_dump($array); 
```

# .net - 登录到其他浏览器后如何转移会话

> ID：14620608
> 
> 赞同：1
> 
> 时间：2013-01-31T07:31:26.713
> 
> 标签：.net, firefox, xulrunner

如何在 Firefox 浏览器之间传输登录会话

我制作了一个 .net 桌面应用程序，它在用户登录时在其中打开 Firefox 浏览器。我想在登录到 Firefox 浏览器后从计算机上安装的桌面应用程序转移会话。

基本要求是对用户隐藏登录详细信息

# iphone - 苹果会在自动布局警告中拒绝我的应用程序吗？

> ID：14620609
> 
> 赞同：1
> 
> 时间：2013-01-31T07:31:28.393
> 
> 标签：iphone, ipad, ios6, warnings, nslayoutconstraint

我制作了针对 iOS 6 的 iPhone 应用

我的应用程序运行非常顺利，在启动期间和应用程序的任何地方都没有崩溃。但我的应用程序显示了一些与`autolayout`.

我尝试了很多来解决这个警告，但我没有成功..

**NSLog 中的警告：**

```
Unable to simultaneously satisfy constraints.
    Probably at least one of the constraints in the following list is one you don't want. Try this: (1) look at each constraint and try to figure out which you don't expect; (2) find the code that added the unwanted constraint or constraints and fix it. (Note: If you're seeing NSAutoresizingMaskLayoutConstraints that you don't understand, refer to the documentation for the UIView property translatesAutoresizingMaskIntoConstraints) 
(
    "<NSAutoresizingMaskLayoutConstraint:0xac85e50 h=-&- v=-&- UIViewControllerWrapperView:0xac745f0.height == UINavigationTransitionView:0xab9b110.height - 64>",
    "<NSLayoutConstraint:0xac71d60 V:[UITableView:0xb161200(307)]>",
    "<NSLayoutConstraint:0xac73230 UITableView:0xb161200.bottom == UIView:0xac72b20.bottom>",
    "<NSLayoutConstraint:0xac731b0 V:|-(>=153)-[UITableView:0xb161200]   (Names: '|':UIView:0xac72b20 )>",
    "<NSAutoresizingMaskLayoutConstraint:0xac84610 h=-&- v=-&- UIView:0xac72b20.height == UIViewControllerWrapperView:0xac745f0.height>",
    "<NSAutoresizingMaskLayoutConstraint:0xabcac10 h=-&- v=-&- UILayoutContainerView:0xc085ad0.height == UIWindow:0xc06c990.height>",
    "<NSAutoresizingMaskLayoutConstraint:0xabcca20 h=--- v=--- V:[UIWindow:0xc06c990(568)]>",
    "<NSAutoresizingMaskLayoutConstraint:0xabc8dd0 h=-&- v=-&- UITransitionView:0xc086e40.height == UILayoutContainerView:0xc085ad0.height - 49>",
    "<NSAutoresizingMaskLayoutConstraint:0xabc7660 h=-&- v=-&- UIViewControllerWrapperView:0xab9b5d0.height == UITransitionView:0xc086e40.height>",
    "<NSAutoresizingMaskLayoutConstraint:0xabc42e0 h=-&- v=-&- UINavigationTransitionView:0xab9b110.height == UILayoutContainerView:0xab9b190.height>",
    "<NSAutoresizingMaskLayoutConstraint:0xabc5a00 h=-&- v=-&- UILayoutContainerView:0xab9b190.height == UIViewControllerWrapperView:0xab9b5d0.height>"
)

Will attempt to recover by breaking constraint 
<NSLayoutConstraint:0xac71d60 V:[UITableView:0xb161200(307)]>

Break on objc_exception_throw to catch this in the debugger.
The methods in the UIConstraintBasedLayoutDebugging category on UIView listed in <UIKit/UIView.h> may also be helpful. 
```

由于这个警告，如果我将它提交到 App Store，我的应用会被拒绝吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T07:42:50.387

Apple 不会在审批过程中考虑警告。动态检查会查找未记录的方法、私有 API 等。然后还会检查内容。由于我的代码中有第三方库，我也有一些警告，并且我的应用程序都没有因警告而被拒绝。

# sql - 在 sql 的选择部分中为多个列使用相同的值

> ID：14620611
> 
> 赞同：0
> 
> 时间：2013-01-31T07:31:42.387
> 
> 标签：sql, oracle, case, alias

我在用

```
case 
when condition1 then ....
when condition2 then ....
when condition3 then ....
end aliasname1 
```

现在我想为 aliasname2 使用相同的值。我读到我们不能对同一列使用多个别名。

另外我不想在 from 子句中使用子查询。

因此，如果 case 返回值，假设`10`，我希望将相同的值分配给`aliasname1`和`aliasname2`。

我怎样才能做到这一点？

**更新：**目前我正在这样使用它

```
case 
when condition1 then ....
when condition2 then ....
when condition3 then ....
end aliasname1
case 
when condition1 then ....
when condition2 then ....
when condition3 then ....
end aliasname2 
```

那是使用相同的案例（复制粘贴）`aliasname2`。由于重复，这对我的眼睛来说并不好看。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T07:36:37.590

如果我理解您的问题，您可以使用具有不同别名的同一列。

这工作得很好：

```
SELECT Field as Alias1, Field as Alias2 
FROM TABLE 
```

这是向您展示的[SQL Fiddle](http://sqlfiddle.com/#!2/5b5c3/1)。

要回答你的问题，

```
SELECT 
   CASE WHEN <SOME CRITERIA> THEN 10 END as Alias1,
   CASE WHEN <SOME CRITERIA> THEN 10 END as Alias2
... 
```

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T07:37:57.370

复制您的案例构造

```
select case 
when condition1 then ....
when condition2 then ....
when condition3 then ....
end aliasname1,
case 
when condition1 then ....
when condition2 then ....
when condition3 then ....
end aliasname2
... 
```

或者

```
select aliasname1, aliasname1 as aliasname2
from (
  select
    case 
    when condition1 then ....
    when condition2 then ....
    when condition3 then ....
    end aliasname1
    ...
) x 
```

# c# - 集线器无法向控制台客户端发送消息

> ID：14620613
> 
> 赞同：0
> 
> 时间：2013-01-31T07:31:47.270
> 
> 标签：c#, asp.net, azure, signalr, signalr-hub

我已经为我的 Windows Azure 项目实现了 SignalR。我有两个客户端 - 我的 Web 角色中的 Javascript/HTML 客户端和我的项目中的控制台应用程序。Web 角色是我的 SignalR 服务器。当我将 Web 角色和控制台应用程序作为启动项目时，我从 HTML 客户端发送的消息将发送到控制台应用程序。但是当我将云项目和控制台应用程序作为启动项目时，来自 HTML 客户端的消息不会发送到控制台应用程序。它真的很奇怪，我不知道导致问题的两者之间可能有什么区别。

如果我在我的网络角色中放置一个后台线程，它将定期向连接的客户端发送消息，它在两种情况下都有效，我的意思是控制台应用程序和 HTML 客户端正在接收消息，而与启动项目无关。

如果您知道问题出在哪里，请告诉我

我的集线器：

```
public class BroadcastHub : Hub
{
    public void Send(PersistedAudioRecord record)
    {
        // Call the BroadcastAudio method to update clients.
        Clients.All.BroadcastAudio(record);
    }
} 
```

我的 HTML/Javascript 客户端：

```
<script type="text/javascript">
    $(function () {

        // Declare a proxy to reference the hub. 
        var broadcast = $.connection.broadcastHub;
        // Create a function that the hub can call to broadcast messages.
        broadcast.client.broadcastAudio = function (record) {
            // Html encode user name, channel and  title. 
            var encodedName = $('<div />').text(record.Username).html();
            var encodedChannel = $('<div />').text(record.Channel).html();
            var encodedTitle = $('<div />').text(record.Title).html();
            // Add the broadcast to the page. 
            $('#broadcasts').append('<li><strong>' + encodedName
                + '</strong>:&nbsp;&nbsp;' + encodedChannel + '</strong>:&nbsp;&nbsp;' + encodedTitle + '</li>');
        };
        // Get the user name.
        $('#displayname').val(prompt('Enter your name:', ''));
        // Get the Channel name to which you want to broadcast.
        $('#channelname').val(prompt('Enter Channel:', ''));
        // Set initial focus to message input box.  
        $('#title').focus();
        // Start the connection.
        $.connection.hub.start().done(function () {
            $('#sendbroadcast').click(function () {
                // Call the Send method on the hub. 
                var broadcastMessage = {}
                broadcastMessage.Username = $('#displayname').val();
                broadcastMessage.Channel = $('#channelname').val();
                broadcastMessage.Title = $('#title').val();
                broadcast.server.send(broadcastMessage);
                // Clear text box and reset focus for next broadcast. 
                $('#title').val('').focus();
            });
        });
    });
</script> 
```

我的控制台应用程序客户端：

```
class Program
{
    static void Main(string[] args)
    {
        HubConnection connection = new HubConnection("http://localhost:35540/");
        IHubProxy proxy = connection.CreateHubProxy("BroadcastHub");
        proxy.On<AudioRecord>("BroadcastAudio", BroadcastAudio);

        connection.Start().Wait();

        Console.ReadLine();
    }

    static void BroadcastAudio(AudioRecord record)
    {
        Console.WriteLine("Broadcast: {0} {1} {2}", record.Username, record.Channel, record.Title);
    }
} 
```

背景话题：

```
public class BackgroundThread
{
    private static Random _random = new Random();

    public static void Start()
    {
        ThreadPool.QueueUserWorkItem(_ =>
        {
            IHubContext hubContext = GlobalHost.ConnectionManager.GetHubContext<BroadcastHub>();

            while (true)
            {
                PersistedAudioRecord record = new PersistedAudioRecord();                    
                record.Channel = _random.Next(10).ToString();
                record.Username = new string('a', Convert.ToInt32(record.Channel));
                record.Title = new string('b', Convert.ToInt32(record.Channel));

                try
                {
                    hubContext.Clients.All.BroadcastAudio(record);
                }
                catch (Exception ex)
                {
                    System.Diagnostics.Trace.TraceError("SignalR error thrown: {0}", ex);
                }
                Thread.Sleep(TimeSpan.FromSeconds(2));
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T00:47:33.800

我用我的应用程序尝试了这个场景，我能够将消息从 webrole 发送到控制台应用程序。是否可以压缩您的项目并将其发送以查看是否可以复制...

# c++ - Visual Studio 的 C++ 调试 - 向量大小变化的观察点

> ID：14620614
> 
> 赞同：3
> 
> 时间：2013-01-31T07:31:50.423
> 
> 标签：c++, visual-studio, debugging, vector, size

我想用我的向量探索变化。因此，我想在向量大小上设置一个 whatchpoint。因此，Visual Studio 将让我在每次大小更改后查看向量中的内容。我怎么能做到这一点？

[在此链接中](http://www.codeproject.com/Articles/359801/10plus-powerful-debugging-tricks-with-Visual-Studi)，您可以找到如何设置条件断点。我试图设置这样的条件：my_vect.size()`Has changed`事件变量（根据 8\. Conditional breakpoints），但它很糟糕。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-31T08:13:42.537

my_vect.size() 不是一个变量，而是一个函数。它看起来像这样：

```
size_type size() const _NOEXCEPT
    {   // return length of sequence
    return (this->_Mylast - this->_Myfirst);
    } 
```

所以这里是解决方案：用调试器启动你的程序。在向量大小改变之前中断。添加一个**新的数据断点**。假设您的向量被称为`myvec`。然后在地址字段中`&myvec._Mylast`分别放 和`&myvec._Mylast`。现在，只要指向向量中第一个或最后一个元素的指针发生变化，调试器就会停止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T07:38:39.507

您可以打开`<vector>`标题并在 std::vector 的每个方法的开头（或结尾）设置一个断点，以更改向量的大小（如 push_back、erase 等）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-14T09:06:45.003

补充上面的@Marius Bancila 答案，在我的例子中，`std::vector`实现更加复杂，它的`size`实现是：

[![在此处输入图像描述](../Images/b14b143ca7c40f305941cebb2e6a4edd.png)](https://i.stack.imgur.com/OW1kv.png)

```
_NODISCARD size_type size() const noexcept {
    auto& _My_data = _Mypair._Myval2;
    return static_cast<size_type>(_My_data._Mylast - _My_data._Myfirst);
} 
```

我怀疑它在最新版本的 Visual Studio 中已更改，因为我使用的是 Visual C++ 2019 编译工具包。

所以要看：

第一的：

```
yourVector._Mypair._Myval2._Myfirst 
```

最后的：

```
yourVector._Mypair._Myval2._Mylast 
```

# ruby-on-rails - 帕德里诺 + 引导程序

> ID：14620615
> 
> 赞同：0
> 
> 时间：2013-01-31T07:31:55.260
> 
> 标签：ruby-on-rails, twitter-bootstrap, padrino

是否有宝石可以让我在 Pedrino 中使用 twitter 引导主题/UI？

任何指向相关资源的指针表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:00:16.687

检查即将发布的 0.11 版本将包含 twitter 引导程序，因此现在您可以浏览管理员[https://github.com/padrino/padrino-framework/tree/master/padrino-admin](https://github.com/padrino/padrino-framework/tree/master/padrino-admin)来查看它。

# java - 在 Hibernate 中生成子选择 - 为什么？

> ID：14620616
> 
> 赞同：0
> 
> 时间：2013-01-31T07:31:58.523
> 
> 标签：java, sql, hibernate, subquery

我使用 Hibernate 和非常简单的 Criteria API，但具有复杂的数据链接。有时在加载实体后，我会在日志中看到以下 SQL：

`select * from ( select this_.ID as ID7_0_, from AAA.CUSTOMER this_ where this_.STATUS=? and this_.ID in (select this_.ID_CUSTOMER as y0_ from AAA.CUSTOMER_CONTACT this_ where this_.ID_CONTACT in (select this_.ID as y0_ from AAA.CONTACT this_ where this_.PHONE_NUMBER=?) and this_.ROLE=?) ) where rownum <= ?`

但我不明白为什么 Hibernate 决定生成子选择而不通过外键链接（它们都指向 hbm.xml）。为什么有子选择？我只使用 fetch="select" 或 fetch="join"。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:03:46.357

这个问题已经不是话题了。有人手动进行了此子选择。

# android-view - 这段代码的含义是什么？特别是View在其中的作用？它是一个android代码？

> ID：14620618
> 
> 赞同：0
> 
> 时间：2013-01-31T07:31:59.590
> 
> 标签：android-view

代码是这样的

```
Button next;
next =(Button) findViewById(R.id.button1);

next.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:38:33.797

有一个名为“next”的按钮，它实际上是已经存在的按钮 R.id.button1 的重命名。侦听点击事件的方法 (setOnClickListener) 有一个在实际点击按钮时被调用的方法 (onClick)，在“onClick(View v)”中，您希望在按钮被点击。

# jquery - JQuery Ajax - 回发问题

> ID：14620626
> 
> 赞同：0
> 
> 时间：2013-01-31T07:32:35.237
> 
> 标签：jquery, asp.net, ajax

![在此处输入图像描述](../Images/a572c2c0bcb5654955ab85a62a0bedf8.png)在我的 webApplication 中，我使用 Jquery Ajax 加载了超过 2 个 userControls (.ascx)。在任何按钮事件上发生回发时加载控件后，我收到此错误。

“Microsoft JScript 运行时错误：无法获取属性 'onsubmit' 的值：对象为空或未定义”请提出一些想法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T07:40:09.487

我认为你可以使用 web 处理程序而不是 ajax 用户控件，页面中的大多数事件你可以使用 web 处理程序来免除回发的成本[见这里教程](http://www.dotnetperls.com/ashx)

# python - Python：套接字发送结构（以 C 结构为例）

> ID：14620632
> 
> 赞同：1
> 
> 时间：2013-01-31T07:33:12.950
> 
> 标签：python, c, sockets, struct, python-3.x

**下面是来自 C 的结构，我正在尝试转换为 Python，并使用 Socket 发送结构**

C：

```
 struct CommandReq
        {
            char    sMark[6];  //start flag\r\n*KW
            short   nPackLen;  //packet length
            short   nFlag;     //command ID 0x0002
            int     nGisIp;    //GIS port
            short   nPort;     //GIS Port
            char    sData[50]; //command string
            char    sEnd[2];   //end flag "\r\n"
        };
        //source code
        CommandReq stResq;
        memset(&stResq, 0, sizeof(stResq));
        sprintf(stResq.sMark, "\r\n%s", "*KW");
        stResq.nFlag = 0x0002;
        stResq.nPackLen = sizeof(stResq);
        stResq.nGisIp = 0;
        stResq.nPort = 0;
        strcpy(stResq.sData, "*KW,CC09C00001,015,080756,#");
        strncpy(stResq.sEnd, "\r\n", 2); 
```

我已经使用 namedtuple 创建了 Python 结构，并使用套接字发送这个结构。但不幸的是失败了。

Python：

```
from collections import namedtuple
MyStruct = namedtuple("MyStruct", "sMark nPackLen nFlag nGisIp nPort sData sEnd") 
```

# 编辑，回复下面的答案

弄清楚后，python 3.x 必须添加 string .encode("ascii")

```
 format_ = "6shhih50s2s"
      MyStruct = namedtuple("MyStruct", "sMark nPackLen nFlag nGisIp nPort sData sEnd")
      tuple_to_send = MyStruct(sMark="\r\n{}".format("*KW").encode("ascii"), 
                 nPackLen=struct.calcsize(format_),
                 nFlag=0x0002,
                 nGisIp=0,
                 nPort=0,
                 sData= "*KW,NR09G05133,015,080756,#".encode("ascii"),
                 sEnd="\r\n".encode("ascii"))
      string_to_send = struct.pack(format_, *tuple_to_send._asdict().values()
      socket.sendto(string_to_send, self.client_address) 
```

## 附加问题

下面是使用结构发送的数据包

```
format_ = "6shhih50s2s" //total bytes should be 68 bytes?
    0d0a2a4b5700 //6 char \r\n*KW
    4600 // packet length 70 bytes
    0200 //command ID 0x0002,short 2 bytes
    00000000 //GIS port is integer 4 bytes
    0000 //GIS Port short 2 bytes
    0000 //unknown??what is this?
    2a4b572c4e5230394730353133332c3031352c3038303735362c230000000000000000000000000000000000000000000000 //sData[50] char 50 bytes
    0d0a //sEnd 2 char,2 bytes 
```

2个未知字节怎么来的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T07:45:09.930

namedtuple 不能与 c-struct 相比。如果您习惯使用结构，可以查看[`struct`-module](http://docs.python.org/2/library/struct.html)以将结构化信息转换为字符串。

一般来说，Pythonista 更喜欢使用[`pickle`-module](http://docs.python.org/2/library/pickle.html)进行序列化。

```
from collections import namedtuple
import pickle # or cPickle, it's faster
MyStruct = namedtuple("MyStruct", "sMark nPackLen nFlag nGisIp nPort sData sEnd")

tuple_to_send = MyStruct(sMark="abcdef", nPackLen=...)
string_to_send = pickle.dumps(tuple_to_send) 
```

泡菜有两种口味，`pickle`和`cPickle`。后者更快，但仅在 CPython（大多数程序员使用）中可用，而 pickle 也可在 Jython、IronPython、...

如果你想坚持使用结构（例如，因为对方期望这种格式），你的格式字符串将是

```
format_ = "6shhih50s2s" 
```

所以你可以这样做：

```
import struct
from collections import namedtuple

format_ = "6shhih50s2s"

MyStruct = namedtuple("MyStruct", "sMark nPackLen nFlag nGisIp nPort sData sEnd")
tuple_to_send = MyStruct(sMark="\r\n{}".format("*KW"), 
                     nPackLen=struct.calcsize(format_),
                     nFlag=0x0002,
                     nGisIp=0,
                     nPort=0,
                     sData= "*KW,NR09G05133,015,080756,#",
                     sEnd="\r\n")

string_to_send = struct.pack(format_, *tuple_to_send._asdict().values()) 
```

顺便说一句：namedtuples 是不可变的，也就是说，你不能这样做

```
tuple_to_send.sMark = "bcdefg" 
```

改变一些属性。如果你需要这样的行为，你必须创建一个类。

**编辑**

对于 Python 3，字符串处理发生了变化。必须执行从 unicode 到字节的转换，例如

```
import struct
from collections import namedtuple

format_ = "6shhih50s2s"

MyStruct = namedtuple("MyStruct", "sMark nPackLen nFlag nGisIp nPort sData sEnd")
tuple_to_send = MyStruct(sMark="\r\n{}".format("*KW").encode("ascii"), 
                     nPackLen=struct.calcsize(format_),
                     nFlag=0x0002,
                     nGisIp=0,
                     nPort=0,
                     sData= "*KW,NR09G05133,015,080756,#".encode("ascii"),
                     sEnd=b"\r\n")

string_to_send = struct.pack(format_, *tuple_to_send._asdict().values()) 
```

# php - 创建日志检测器：从 PHP 运行 Shell 脚本不起作用。进程继续运行或管道损坏

> ID：14620635
> 
> 赞同：2
> 
> 时间：2013-01-31T07:33:25.430
> 
> 标签：php, shell, pipe, cat

我的目标是使用 PHP 和 Shell 脚本创建一个日志文件阅读器。我计划每隔一段时间运行脚本，以检测特定条目最后一次出现在日志文件中的时间。

它应该工作的方式是调用 PHP 脚本，然后调用 shell 命令

```
tac logfile.log | grep "what i am looking for" | head -n 1 
```

或者

```
tac logfile.log | head -n 1 
```

这个脚本将做的是：

**在第一个脚本的情况下：**从底部向上扫描日志文件，直到找到它正在寻找的内容并向我显示第一行，这实际上是文件中该行的最后一次出现。

**在第二个脚本的情况下：**只扫描最后一行并输出它。我不是要跟踪文件。

所以我的意图是从结尾扫描文件到最后一次出现，但我需要 php 来执行此操作，因为 PHP 可以解析它从 shell 输出中读取的行并轻松解析它们。

我要解决的问题是，一旦我使用函数 shell_exec、exec、反引号运算符、系统等从 PHP 运行脚本。它们都保持 PHP 脚本运行或输出结果并保持 shell 的第一部分运行（ tac 日志文件.log）。

我不明白为什么它可以从 CLI 完美运行，但是当我从 PHP 运行相同的脚本时，它会通过尝试 tac 整个日志文件来无限期地运行。我注意到 tac 和 cat 给出了这个问题。有时它会显示错误“Broken pipe”。

我应该做什么？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:07:36.080

您可以使用纯 PHP。使用 fopen 打开文件，如何向后读取文件的示例可以在[使用 fseek 逐行向后读取](https://stackoverflow.com/questions/3234580/read-a-file-backwards-line-by-line-using-fseek)文件中找到， 而不是在找到要搜索的字符串后中断循环。

# jsp - 如何将 http://localhost:8080 更改为面包屑中的主页？

> ID：14620642
> 
> 赞同：0
> 
> 时间：2013-01-31T07:33:50.713
> 
> 标签：jsp, spring-mvc, breadcrumbs

我在jsp中使用它作为面包屑

```
<div class="breadcrumb">
       <c:url var="home"   value="http://localhost:8080/" />
        <c:forEach var="bc" items="${breadcrumb.tree}" varStatus="status">
            <c:choose>
                <c:when test="${status.index==0}">
                    <a href="/">${home}</a>
                </c:when>
                <c:when test="${status.index == fn:length(breadcrumb.tree)-1 && status.index!=0}">
                    »${bc.name}
                </c:when>
                <c:otherwise>
                    <a href="${bc.value}">»${bc.name}</a>
                </c:otherwise>
            </c:choose>
        </c:forEach>
</div> 
```

我得到了这个——`http://localhost:8080/ »products`

但我想要家»产品

谁能告诉我会怎样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:42:32.090

您正在存储以下值：

```
http://localhost:8080/ 
```

进入变量 home，然后在锚标记中输出。

店铺：

```
<c:url var="home"   value="http://localhost:8080/" /> 
```

输出：

```
<a href="/">${home}</a> 
```

在消息文件中定义 home，或者忽略分配它。

# bash - 从 bash 脚本启动程序

> ID：14620646
> 
> 赞同：1
> 
> 时间：2013-01-31T07:33:58.080
> 
> 标签：bash, batch-file

我有一个包含以下内容的 Windows 批处理文件：

```
start "" javaw -jar %~p0/app.jar 
```

如何在 Bash 脚本中获取相同的命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T08:55:08.213

```
root=`dirname "$0"` # in case if I got %~p0
nohup javaw -jar "$root/app.jar" & 
```

在后台开始`javaw`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T08:50:15.090

也许[`open`](http://ss64.com/bash/open.html)

```
open javaw -jar ${0%/*}/app.jar 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T09:42:40.267

我假设它是一个 Java Swing（基于 GUI）的应用程序。您应该能够使用以下命令执行它：

```
cd /path/to/app
java -jar myApp.jar 
```

只需将此代码粘贴到您的 bash 脚本中即可。“cd”应该处理路径问题。请注意，只有在退出 Java 应用程序时才会释放终端。

# sql - T SQL链连接4张表

> ID：14620656
> 
> 赞同：3
> 
> 时间：2013-01-31T07:35:04.600
> 
> 标签：sql, tsql, join

这是场景：我有表：

*   文章（articleId、userId、title、datePosted）

*   ArticleTranslations (languageId, articleId, title)

*   ArticleSections (articleSectionId, articleId, sectionId)

*   部分（sectionId，内容，...）

*   sectionAdditionalInfo (sectionId, isApproved)

我正在做的是以某种方式从 userId 的文章中选择一些文章：

```
SELECT article.articleId, article.userId, ArticleTranslations.title, article.datePosted
FROM Articles
LEFT OUTER JOIN ArticleTranslations ON Article.articleId= ArticlesTranslations.articleId AND ArticlesTranslations.languageId=@languageId
WHERE Articloes.userId=@userId
    ORDER BY
CASE WHEN @sortDirection = 'DD' THEN datePosted END DESC,   -- by date posted
CASE WHEN @sortDirection = 'DA' THEN datePosted END,
CASE WHEN @sortDirection = 'ND' THEN title END DESC,        -- sort by name
CASE WHEN @sortDirection = 'NA' THEN title END, 
CASE WHEN @sortDirection = 'SD' THEN ArticleTranslations.isApproved END DESC, -- is article aproved?
CASE WHEN @sortDirection = 'SA' THEN ArticleTranslations.isApproved END,
CASE WHEN @sortDirection = 'ID' THEN areAllSectionsApproved END DESC,   -- sort by information if sections are all approved - within the article?
CASE WHEN @sortDirection = 'IA' THEN areAllSectionsApproved END 
```

请记住，为了让我的问题更容易理解，我遗漏了一些信息。

现在，我想做的是选择另一个属性（对于上面 SQL 中返回的每篇文章）：areAllArticleSectionsApproved

我已经单独组装了 SQL，但我希望为每一行返回这个：

```
 SELECT CASE WHEN COUNT(sectionsAdditionalInfo.sectionId) > 0 THEN 0 ELSE 1 END AS areAllSectionsApproved
    FROM ArticleSections
    LEFT OUTER JOIN sectionsAdditionalInfo ON ArticleSections.sectionId = sectionsAdditionalInfo.sectionId 
    WHERE articleId=@articleId AND sectionsAdditionalInfo.isApproved=0 
```

我曾尝试以某种方式嵌套此 SQL：

```
 SELECT (outer SQL) .....
    a.*(
    nested SQL - second one I posted here
    ) as a 
```

但它根本没有用。

我正在使用 SQL Server 2008。

任何有关如何解决此问题的提示将不胜感激；）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T07:44:59.473

在不完全了解您的数据和您想要的结果的情况下，这样的事情应该可以使用您的上述查询并将您的第二个查询作为子查询加入：

```
SELECT article.articleId, 
       article.userId, 
       ArticleTranslations.title, 
       article.datePosted,
       t.areAllSectionsApproved
FROM Articles
      LEFT OUTER JOIN ArticleTranslations 
          ON Article.articleId= ArticlesTranslations.articleId 
          AND ArticlesTranslations.languageId=@languageId
      LEFT JOIN (
         SELECT 
           articleId, 
           CASE 
              WHEN COUNT(sectionsAdditionalInfo.sectionId) > 0 
              THEN 0 
              ELSE 1 
           END AS areAllSectionsApproved
         FROM ArticleSections
             LEFT OUTER JOIN sectionsAdditionalInfo 
                ON ArticleSections.sectionId = sectionsAdditionalInfo.sectionId 
         WHERE sectionsAdditionalInfo.isApproved=0
         GROUP BY articleId
    ) t ON articles.articleId = t.articleId
WHERE Articloes.userId=@userId
ORDER BY
   CASE WHEN @sortDirection = 'DD' THEN datePosted END DESC,   -- by date posted
   CASE WHEN @sortDirection = 'DA' THEN datePosted END,
   CASE WHEN @sortDirection = 'ND' THEN title END DESC,        -- sort by name
   CASE WHEN @sortDirection = 'NA' THEN title END, 
   CASE WHEN @sortDirection = 'SD' THEN ArticleTranslations.isApproved END DESC, -- is article aproved?
   CASE WHEN @sortDirection = 'SA' THEN ArticleTranslations.isApproved END,
   CASE WHEN @sortDirection = 'ID' THEN areAllSectionsApproved END DESC,   -- sort by information if sections are all approved - within the article?
   CASE WHEN @sortDirection = 'IA' THEN areAllSectionsApproved END 
```

祝你好运。

# svn - 如何在没有对话框的情况下提交 svn

> ID：14620660
> 
> 赞同：0
> 
> 时间：2013-01-31T07:35:12.093
> 
> 标签：svn, tortoisesvn

嗨，我已经安装了 TortoiseSVN，我需要创建一个 bat 文件来提交。我读[了这个](https://stackoverflow.com/questions/2252872/how-do-i-not-display-the-dialog-on-svn-tortoise-commit)，但是当我尝试它时，我得到一个错误，即 svn 是一个无法识别的命令。我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:53:03.167

使用 avri 给我的答案，我下载了[它](http://ufpr.dl.sourceforge.net/project/win32svn/1.7.8/apache22/Setup-Subversion-1.7.8.msi)并将其安装在我的 ci 服务器上。

# wpf - WPF MVVM 绑定错误

> ID：14620662
> 
> 赞同：0
> 
> 时间：2013-01-31T07:35:17.397
> 
> 标签：wpf, mvvm, binding

我正在使用 MVVM 模式。在我的 ViewModel 中，我有一个公共的 ObservableCollection：

```
public ObservableCollection<SettingsTemplateHistoryItemViewModel> HistoryItemCollection;

public SettingsTemplateViewModel()
    {
        this.HistoryItemCollection = new ObservableCollection<SettingsTemplateHistoryItemViewModel>();
    } 
```

在我的视图中，我有一个 ItemsControl，它的 ItemsSource 属性绑定到 ViewModel 中的 ObservableCollection。

```
<ItemsControl ItemsSource="{Binding HistoryItemCollection}"/> 
```

我收到以下错误：

```
BindingExpression path error: 'HistoryItemCollection' property not found on 'object' ''SettingsTemplateViewModel' (HashCode=48413709)'. BindingExpression:Path=HistoryItemCollection; DataItem='SettingsTemplateViewModel' (HashCode=48413709); target element is 'ItemsControl' (Name=''); target property is 'ItemsSource' (type 'IEnumerable') 
```

我很困惑。我 100% 确定该属性存在于 View 的 DataContext（即 ViewModel）中。我已将属性名称复制并粘贴到视图中，因此绑定路径必须正确。View 和 ViewModel 通过隐式/类型化的 DataTemplates 连接起来。我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T07:41:35.533

就像绑定错误所说的那样，您的 itemscontrol 的数据上下文不包含名为 HistoryItemCollection 的公共属性。在运行时检查数据上下文的一种简单方法是使用[Snoop](http://snoopwpf.codeplex.com/)

编辑：您必须使用属性而不是字段。

```
public ObservableCollection<SettingsTemplateHistoryItemViewModel> HistoryItemCollection {get;set;} 
```

# css - 水平滚动中断时溢出-x：在 safari 和 firefox 中隐藏

> ID：14620667
> 
> 赞同：1
> 
> 时间：2013-01-31T07:35:34.997
> 
> 标签：css, scroll, overflow, horizontal-scrolling

我在一个 wordpress 网站上有水平滚动，该网站在所有计算机上都可以使用 chrome，但不能在 safari 和 firefox 上的某些计算机上使用。

我的代码是：

```
html {
    height:100%;
    overflow-x:hidden;

}
body {
    width:3080px;
    overflow-y:hidden;
} 
```

当我删除溢出-x：隐藏；水平滚动有效，但您可以看到滚动条。这是网站的链接[http://happybirthday.irinanisimova.com/photography/](http://happybirthday.irinanisimova.com/photography/)

如何隐藏滚动条？你也知道为什么这在 safari 和 firefox 中的某些计算机上有效，但不是全部？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:48:01.573

当我想更改默认滚动条时，我通常会创建一个容器 div，然后在其上设置我想要的溢出，而不是在正文上。尝试将溢出切换到宽度和高度为 100% 的容器 div，并删除 body 标记上的宽度和溢出。

[http://jsfiddle.net/7kd8V/21/](http://jsfiddle.net/7kd8V/21/)

```
html {
overflow:hidden;
}
#container {
width:100%;
overflow:auto;
white-space: nowrap;
}
img {
display:inline-block;
}

    <div id="container">
        put images in here
    </div> 
```

# java - 使用 OData WCF 的 Android 应用程序 - Android 应用程序不断崩溃

> ID：14620668
> 
> 赞同：1
> 
> 时间：2013-01-31T07:35:35.147
> 
> 标签：java, android, wcf, iis, odata

我对 Android 开发相当陌生，我正在尝试创建一个应用程序来显示清单列表以供验证。

因为我是新手，所以我按照“.NET 开发人员的 OData 编程手册”一书中的示例开发了这个应用程序的原型。我已经测试了书中（第 5 章）中的示例（它工作正常），但由于某种原因它崩溃了。

我怀疑这可能与我的 WCF OData 服务有关。它是在实体框架中开发的，并托管在我的本地 PC 上，即 http:192.168.0.105:8090/PODDataService.svc。

根据本书的示例，我还创建了 2 个映射类，因为该应用程序仅与 2 个 OData 实体交互。

以下是我用来构建项目的 6 个类：

```
package com.podcheck;

import java.util.ArrayList;
import java.util.Date;
import java.util.List;

import org.core4j.Enumerable;
import org.odata4j.consumer.ODataConsumer;
import org.odata4j.core.OEntity;
import org.odata4j.core.OLink;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.ListView;

public class MainActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ListView lvManifests = (ListView)findViewById(R.id.lvManifests);

        // Add item click action listener
        lvManifests.setOnItemClickListener(
                new ManifestListItemClickListener(this)
        );

        // Populate category items on lstCategory
        ArrayList<ManifestObj> manifestList = GetManifestItems();
        ManifestsAdapter mAdapter = new ManifestsAdapter(this, R.layout.list_item, manifestList);
        lvManifests.setAdapter(mAdapter);
    }

    // Query Category list from Northwind based WCF DataService
    ArrayList<ManifestObj> GetManifestItems()
    {
        String svcUri = "http://192.168.0.105:8090/PODDataService.svc/";
        ODataConsumer c = ODataConsumer.create(svcUri);        

        ArrayList<ManifestObj> manifestList = new ArrayList<ManifestObj>();

        Enumerable<OEntity> cursor = c.getEntities("Manifests").expand("ManifestItems").execute();
        for (OEntity entityObj : cursor) 
        { 
            ManifestObj mObj = new ManifestObj();

            mObj.ManifestID =  entityObj.getProperty("ManifestID", Integer.class).getValue();
            mObj.ManifestCode = entityObj.getProperty("ManifestCode", String.class).getValue();
            mObj.ManifestDate = entityObj.getProperty("ManifestDate", Date.class).getValue();

            Date date = new Date();
            if(mObj.ManifestDate == date)
            {

                List<OEntity> entityList = entityObj.getLink("ManifestItems", OLink.class).getRelatedEntities();
                mObj.ManifestItems = new ArrayList<ManifestItemObj>();

                for(OEntity pEntity: entityList) 
                {
                    ManifestItemObj miObj = new ManifestItemObj();
                    miObj.JobType = pEntity.getProperty("JobType", String.class).getValue();
                    miObj.FKID = pEntity.getProperty("FKID", Integer.class).getValue();
                    //miObj.SupplierID = pEntity.getProperty("SupplierID", Integer.class).getValue();
                    //miObj.UnitPrice =  pEntity.getProperty("UnitPrice", BigDecimal.class).getValue();
                    mObj.ManifestItems.add(miObj);
                }
                manifestList.add(mObj);
            }
        }
            return manifestList;
    }

    public void ShowItemsOfManifest(ManifestObj manifest)
    {
        Bundle bundle = new Bundle();
        Intent newIntent = new Intent(this.getApplicationContext(), SubActivity.class);
        newIntent.putExtras(bundle);
        newIntent.putExtra("Manifest", manifest);

        this.startActivity(newIntent);

    }

}

package com.podcheck;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class SubActivity extends Activity implements OnClickListener {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.sub);

        ManifestObj mObj = (ManifestObj)this.getIntent().getSerializableExtra("Manifest");

        TextView tv = (TextView)this.findViewById(R.id.tvContent);  

        StringBuffer sb = new StringBuffer();
        sb.append("You have selected the following Category:");
        sb.append("\nManifest: " + mObj.getManifestCode());
        sb.append("\nManifest Raised On: " + mObj.getManifestDate());
        sb.append("\nItems under this Manifest(" + mObj.ManifestItems.size() + "):");
        sb.append("\n----------------------------------------------------------");

        for(ManifestItemObj miObj: mObj.ManifestItems){
            sb.append("\nJob:" + miObj.getJobType() + Integer.toString(miObj.getFKID()));
            sb.append("\n\t");
        }

        tv.setText(sb.toString());

        Button btn = (Button)this.findViewById(R.id.btnReturn);
        btn.setOnClickListener(
            this
        );
    }

    public void onClick(View v) {
        //this.finishActivity(0);
        System.out.println("finish activity");
        this.finish();
    }

package com.podcheck;

import java.util.ArrayList;

import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.LinearLayout;
import android.widget.TextView;

public class ManifestsAdapter extends ArrayAdapter<ManifestObj> {

    int resourceId = 0;

    public ManifestsAdapter(Context context, int resource, ArrayList<ManifestObj> items) {
        super(context, resource, items);
        this.resourceId = resource;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent)
    {
        LinearLayout itemRoot;
        ManifestObj manifest;

        manifest = this.getItem(position);

        //Inflate the view
        if(convertView==null)
        {
            itemRoot = new LinearLayout(getContext());
            String inflater = Context.LAYOUT_INFLATER_SERVICE;
            LayoutInflater vi;
            vi = (LayoutInflater)getContext().getSystemService(inflater);
            vi.inflate(this.resourceId, itemRoot, true);
        }
        else
        {
            itemRoot = (LinearLayout) convertView;
        }

        TextView tvName =(TextView)itemRoot.findViewById(R.id.tvCategoryName); 
        tvName.setText(manifest.getManifestCode());
        itemRoot.setTag(manifest);

        return itemRoot;
    }

}

package com.podcheck;

//import android.content.Intent;
//import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.LinearLayout;

public class ManifestListItemClickListener implements OnItemClickListener {

    MainActivity _mainActivity;
    public ManifestListItemClickListener(MainActivity ma){
        _mainActivity = ma;
    }

    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        LinearLayout itemRoot = (LinearLayout)view;
        ManifestObj mObj = (ManifestObj)itemRoot.getTag();

        StringBuffer sb = new StringBuffer();
        sb.append("You have selected the following Manifest:");
        sb.append("\nID: " + mObj.getManifestID());
        sb.append("\nName: " + mObj.getManifestCode());
        sb.append("\nManifestDate: " + mObj.getManifestDate());

//      new AlertDialog.Builder(parent.getContext())
//      .setTitle("Manifest Selected")
//      .setMessage(sb.toString())
//      .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
//          public void onClick(DialogInterface dialog, int which) { 
//              // do something else
//      
//          }
//       })
//       .show();

        _mainActivity.ShowItemsOfManifest(mObj);
    }

}

package com.podcheck;

import java.io.Serializable;

public class ManifestItemObj implements Serializable
{
    int ManifestItemID;
    int FKID;
    String JobType;

    public int getManifestItemsID()
    {
        return ManifestItemID;
    }

    public void setManifestItemID(int manifestItemID)
    {
        ManifestItemID = manifestItemID;
    }

    public int getFKID()
    {
        return FKID;
    }
    public void setFKID(int fkid)
    {
        FKID = fkid;
    }
    public String getJobType()
    {
        return JobType;
    }
    public void setJobType(String jobType)
    {
        JobType = jobType;
    }

}

package com.podcheck;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.Date;

import org.joda.time.DateTime;

public class ManifestObj implements Serializable{

    int ManifestID;
    String ManifestCode;
    Date ManifestDate;
    boolean Consolidated;
    ArrayList<ManifestItemObj> ManifestItems;

    public int getManifestID() {
        return ManifestID;
    }
    public void setManifestID(int manifestID) {
        ManifestID = manifestID;
    }
    public String getManifestCode() {
        return ManifestCode;
    }
    public void setManifestCode(String manifestCode) {
        ManifestCode = manifestCode;
    }
    public Date getManifestDate() {
        return ManifestDate;
    }
    public void setManifestDate(Date manifestDate) {
        ManifestDate = manifestDate;
    }
    public boolean getConsolidated() {
        return Consolidated;
    }
    public void setConsolidated(boolean consolidated) {
        Consolidated = consolidated;
    }

    public ArrayList<ManifestItemObj> ManifestItems()
    {
        return ManifestItems;
    }

    public void setManifestItems(ArrayList<ManifestItemObj> manifestItems)
    {
        ManifestItems = manifestItems;
    }
} 
```

目前我认为这与我的 Manifest 或我的 XML 文件没有任何关系。

我有点迷茫，因为几乎没有什么不同。我已经无数次测试了我的 WCF 数据服务。

它也可能是数据集的大小吗？SQL Server 数据库中的我的清单表确实有接近 31000 条记录。

编辑：这是日志：-

```
'02-03 23:11:20.609: D/dalvikvm(617): GC_CONCURRENT freed 272K, 4% free 8197K/8519K, paused 33ms+5ms, total 79ms
02-03 23:11:20.609: D/dalvikvm(617): WAIT_FOR_CONCURRENT_GC blocked 32ms
02-03 23:11:20.769: D/AndroidRuntime(617): Shutting down VM
02-03 23:11:20.780: W/dalvikvm(617): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
02-03 23:11:20.809: E/AndroidRuntime(617): FATAL EXCEPTION: main
02-03 23:11:20.809: E/AndroidRuntime(617): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.podcheck/com.podcheck.MainActivity}: com.sun.jersey.api.client.ClientHandlerException: android.os.NetworkOnMainThreadException
02-03 23:11:20.809: E/AndroidRuntime(617):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
02-03 23:11:20.809: E/AndroidRuntime(617):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
02-03 23:11:20.809: E/AndroidRuntime(617):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
02-03 23:11:20.809: E/AndroidRuntime(617):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
02-03 23:11:20.809: E/AndroidRuntime(617):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-03 23:11:20.809: E/AndroidRuntime(617):  at android.os.Looper.loop(Looper.java:137)
02-03 23:11:20.809: E/AndroidRuntime(617):  at android.app.ActivityThread.main(ActivityThread.java:4745)
02-03 23:11:20.809: E/AndroidRuntime(617):  at java.lang.reflect.Method.invokeNative(Native Method)
02-03 23:11:20.809: E/AndroidRuntime(617):  at java.lang.reflect.Method.invoke(Method.java:511)
02-03 23:11:20.809: E/AndroidRuntime(617):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
02-03 23:11:20.809: E/AndroidRuntime(617):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
02-03 23:11:20.809: E/AndroidRuntime(617):  at dalvik.system.NativeStart.main(Native Method)
02-03 23:11:20.809: E/AndroidRuntime(617): Caused by: com.sun.jersey.api.client.ClientHandlerException: android.os.NetworkOnMainThreadException
02-03 23:11:20.809: E/AndroidRuntime(617):  at com.sun.jersey.client.urlconnection.URLConnectionClientHandler.handle(URLConnectionClientHandler.java:128)
02-03 23:11:20.809: E/AndroidRuntime(617):  at com.sun.jersey.api.client.Client.handle(Client.java:457)
02-03 23:11:20.809: E/AndroidRuntime(617):  at com.sun.jersey.api.client.WebResource.handle(WebResource.java:557)
02-03 23:11:20.809: E/AndroidRuntime(617):  at com.sun.jersey.api.client.WebResource.access$300(WebResource.java:69)
02-03 23:11:20.809: E/AndroidRuntime(617):  at com.sun.jersey.api.client.WebResource$Builder.method(WebResource.java:539)
02-03 23:11:20.809: E/AndroidRuntime(617):  at org.odata4j.consumer.ODataClient.doRequest(ODataClient.java:214)
02-03 23:11:20.809: E/AndroidRuntime(617):  at org.odata4j.consumer.ODataClient.getMetadata(ODataClient.java:66)
02-03 23:11:20.809: E/AndroidRuntime(617):  at org.odata4j.consumer.ODataConsumer$CachedEdmDataServices.refreshDelegate(ODataConsumer.java:592)
02-03 23:11:20.809: E/AndroidRuntime(617):  at org.odata4j.consumer.ODataConsumer$CachedEdmDataServices.getDelegate(ODataConsumer.java:586)
02-03 23:11:20.809: E/AndroidRuntime(617):  at org.odata4j.internal.EdmDataServicesDecorator.findEdmEntitySet(EdmDataServicesDecorator.java:46)
02-03 23:11:20.809: E/AndroidRuntime(617):  at org.odata4j.consumer.ODataConsumer$CachedEdmDataServices.findEdmEntitySet(ODataConsumer.java:598)
02-03 23:11:20.809: E/AndroidRuntime(617):  at org.odata4j.consumer.ODataConsumer.getFeedCustomizationMapping(ODataConsumer.java:559)
02-03 23:11:20.809: E/AndroidRuntime(617):  at org.odata4j.consumer.ODataConsumer.getEntities(ODataConsumer.java:313)
02-03 23:11:20.809: E/AndroidRuntime(617):  at org.odata4j.consumer.ODataConsumer.getEntities(ODataConsumer.java:300)
02-03 23:11:20.809: E/AndroidRuntime(617):  at com.podcheck.MainActivity.GetManifestItems(MainActivity.java:46)
02-03 23:11:20.809: E/AndroidRuntime(617):  at com.podcheck.MainActivity.onCreate(MainActivity.java:33)
02-03 23:11:20.809: E/AndroidRuntime(617):  at android.app.Activity.performCreate(Activity.java:5008)
02-03 23:11:20.809: E/AndroidRuntime(617):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
02-03 23:11:20.809: E/AndroidRuntime(617):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
02-03 23:11:20.809: E/AndroidRuntime(617):  ... 11 more
02-03 23:11:20.809: E/AndroidRuntime(617): Caused by: android.os.NetworkOnMainThreadException
02-03 23:11:20.809: E/AndroidRuntime(617):  at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
02-03 23:11:20.809: E/AndroidRuntime(617):  at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:84)
02-03 23:11:20.809: E/AndroidRuntime(617):  at libcore.io.IoBridge.connectErrno(IoBridge.java:127)
02-03 23:11:20.809: E/AndroidRuntime(617):  at libcore.io.IoBridge.connect(IoBridge.java:112)
02-03 23:11:20.809: E/AndroidRuntime(617):  at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
02-03 23:11:20.809: E/AndroidRuntime(617):  at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:459)
02-03 23:11:20.809: E/AndroidRuntime(617):  at java.net.Socket.connect(Socket.java:842)
02-03 23:11:20.809: E/AndroidRuntime(617):  at libcore.net.http.HttpConnection.<init>(HttpConnection.java:76)
02-03 23:11:20.809: E/AndroidRuntime(617):  at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
02-03 23:11:20.809: E/AndroidRuntime(617):  at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:341)
02-03 23:11:20.809: E/AndroidRuntime(617):  at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:87)
02-03 23:11:20.809: E/AndroidRuntime(617):  at libcore.net.http.HttpConnection.connect(HttpConnection.java:117)
02-03 23:11:20.809: E/AndroidRuntime(617):  at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:315)
02-03 23:11:20.809: E/AndroidRuntime(617):  at libcore.net.http.HttpEngine.connect(HttpEngine.java:310)
02-03 23:11:20.809: E/AndroidRuntime(617):  at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:289)
02-03 23:11:20.809: E/AndroidRuntime(617):  at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:239)
02-03 23:11:20.809: E/AndroidRuntime(617):  at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:273)
02-03 23:11:20.809: E/AndroidRuntime(617):  at libcore.net.http.HttpURLConnectionImpl.getResponseCode(HttpURLConnectionImpl.java:486)
02-03 23:11:20.809: E/AndroidRuntime(617):  at com.sun.jersey.client.urlconnection.URLConnectionClientHandler._invoke(URLConnectionClientHandler.java:215)
02-03 23:11:20.809: E/AndroidRuntime(617):  at com.sun.jersey.client.urlconnection.URLConnect
02-03 23:11:20.839: D/dalvikvm(617): GC_CONCURRENT freed 463K, 6% free 8261K/8775K, paused 25ms+6ms, total 91ms
02-03 23:11:20.839: D/dalvikvm(617): WAIT_FOR_CONCURRENT_GC blocked 14ms' 
```

编辑：

我怀疑这是现在的问题：-

```
ODataConsumer c = ODataJerseyConsumer.create("http://192.168.0.105:8090/PODDataService.svc"); 

for (OEntity entityObj : c.getEntities("Manifests").expand("ManifestItems").execute())
{
//opcode
} 
```

这意味着它没有读取 WCF 服务。对？

**另一个编辑：** 同一个应用程序现在可以在 Android 2.3 中运行。Android 4 与 2.3 有何不同？另一个有待揭开的谜团。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-23T12:43:28.557

如果它仍然打开并被读取，实际问题是在 android 4.0 中，您无法在主线程上运行网络调用。它会在主线程错误上抛出一个网络，在 android 2.3 中你被允许这样做。这就是为什么一个有效而一个无效的原因。您要做的是在异步任务中运行所有网络操作。查看下面的文档。

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T08:36:42.773

您可以将您的 odata 服务与另一个 odata 客户端一起使用吗？尝试 odata explorer 或 tableau 或其他客户端。见 odata.org/ecosystem#consumers

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T04:07:08.777

它在 Android 2.3 中完美运行。我现在将关闭这个问题。

# php - 这是一个php错误吗

> ID：14620669
> 
> 赞同：1
> 
> 时间：2013-01-31T07:35:37.983
> 
> 标签：php

为什么此代码有错误（注意：使用未定义的常量 ‍‍ - 在第 5 行假设为 '‍‍'）

```
<?
$arr1 = array(
">",
"<",‍‍
);

foreach ($arr1 as $value) {
echo $value;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T07:44:47.453

这不是错误。您的代码中的特定行中有“不可打印的字符”，这就是您收到通知的原因。看图片，vi 从不撒谎！:P

![在此处输入图像描述](../Images/0e9be93b5aaff952ccc2216d1d658f17.png)

删除您的代码并从头开始重写（无需复制/粘贴），它将起作用

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T07:42:46.533

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T07:38:02.530

根据您的 PHP 版本，您的代码是有效的。不幸的是，您的版本不支持尾随逗号，因此您只需要像这样删除它：

```
<?
$arr1 = array(
    ">",
    "<"
);

foreach ($arr1 as $value) {
    echo $value;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T07:52:20.400

错误在于数组中的最后一个逗号之后有两个不可见字符（称为[零宽度连接](http://www.fileformat.info/info/unicode/char/200d/index.htm)符，十六进制）。`E2 80 8D`

将示例中的代码复制并粘贴到文本编辑器中，将光标放在最后一个逗号的前面，然后按几次左箭头键。光标应该静止不动。

我不太清楚为什么会发生这种情况，但修复它应该像删除它们一样简单：

```
$arr1 = array('>', '<'); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-31T07:37:47.680

我认为错误是您的数组中的逗号。试试这个：

```
<?
$arr1 = array(
">",
"<"
);

foreach ($arr1 as $value) {
echo $value;
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-31T09:43:59.330

@Pushpesh 我认为使用没有问题，在数组的末尾看看这个[http://codepad.org/oUj8PwY2](http://codepad.org/oUj8PwY2)

# matlab - 找出两个旋转矩阵之间的差异

> ID：14620670
> 
> 赞同：0
> 
> 时间：2013-01-31T07:35:40.330
> 
> 标签：matlab, inverse, rotational-matrices

我遇到了以下问题，我开发了用于将欧拉角的大数组转换为旋转矩阵的代码，我的数据是 phi1、phi 和 phi2 值，如下所示

```
phi1 phi phi2
2     3   5
1     2.2  4.3
3     4    5 
```

.....还有其他200万个数据数组。

但我想对由第一行欧拉角形成的旋转矩阵进行逆运算，并将其乘以从第二行发展而来的矩阵。然后我必须使用结果矩阵的元素之一。有没有办法做到这一点？

```
g_11=((cosd(phi1).*cosd(phi2))-(sind(phi1).*sind(phi2).*cosd(phi)));
g_12=((sind(phi1).*cosd(phi2))+(cosd(phi1).*sind(phi2).*cosd(phi)));
g_13= (sind(phi2).*sind(phi));
g_21 =((-cosd(phi1).*sind(phi2))-(sind(phi1).*cos(phi2).*cos(phi))); 
g_22 = ((-sin(phi1).*sind(phi2))+(cosd(phi1).*cosd(phi2).*cosd(phi)));
g_23 = (cosd(phi2).*sind(phi));
g_31 = (sind(phi1).* sind(phi));
g_32 = -cosd(phi1).* sind(phi);
g_33 = cosd(phi); 

g1 =[g_11 g_12 g_13 ; g_21 g_22 g_23 ; g_31 g_32 g_33] 
```

这里 g1 是我想找到的第一行数据的旋转矩阵 g2 是第二行数据的旋转矩阵。瘦我要进行

```
del_g= inv(g1).*g2; 
```

然后我想提取结果矩阵的 g11 和 g13 元素。

数据取自具有以下数据的文本文件

```
 4.55686   0.88751   4.71368      0.00000      0.00000  879.7  0.143  1.77 1 1 Iron - Alpha
  4.57459   0.87938   4.71205     20.00000      0.00000  926.3  0.196  2.13 1 1 Iron - Alpha
  4.57459   0.87938   4.71205     40.00000      0.00000  550.3  0.196  2.13 1 1 Iron - Alpha
  4.57709   0.88250   4.71319     60.00000      0.00000  631.4  0.232  1.85 1 1 Iron - Alpha
  4.57507   0.88371   4.72148     80.00000      0.00000  639.7  0.375  2.10 1 1 Iron - Alpha
  4.57507   0.88371   4.72148    100.00000      0.00000  643.9  0.375  1.86 1 1 Iron - Alpha
  4.57507   0.88371   4.72148    120.00000      0.00000  680.4  0.375  1.75 1 1 Iron - Alpha
  4.57507   0.88371   4.72148    140.00000      0.00000  691.6  0.375  1.81 1 1 Iron - Alpha
  4.57507   0.88371   4.72148    160.00000      0.00000  674.9  0.375  1.66 1 1 Iron - Alpha
  4.58254   0.87567   4.69293    180.00000      0.00000  651.6  0.286  1.95 1 1 Iron - Alpha
  4.58254   0.87567   4.69293    200.00000      0.00000  657.5  0.286  1.92 1 1 Iron - Alpha
  4.58254   0.87567   4.69293    220.00000      0.00000  693.4  0.286  2.18 1 1 Iron - Alpha
  4.58254   0.87567   4.69293    240.00000      0.00000  670.5  0.286  2.06 1 1 Iron - Alpha 
```

前三列分别是欧拉角 phi1、phi 和 phi2，用于从我正在使用的文本文件中提取数据

```
fid = fopen('test.txt');
A =  textscan(fid, '%f %f %f %f %f %*f %*f %*f %*f %*f %*s %*s %*s') ;
%read the file
a = A{1};
e = A{2};
c = A{3};
x = A{4};
y = A{5};
%converted the euler angles into degrees
phi1= radtodeg(a);
phi= radtodeg(e);
phi2= radtodeg(c); 
```

这里 phi1 是一个 1999999X1 的数组，同样 phi 和 phi2 是相同大小的数组，我在后面使用这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:27:02.950

从创建一个gets函数开始`g1`，我调用了这个函数`get_gi` ，所以它应该被保存为一个单独的m文件get_gi.m：

```
function gi=get_gi(pvec)
%pvec is a 1x3 vector of [phi1 phi phi2]
g_11=((cosd(pvec(1)).*cosd(pvec(3)))-(sind(pvec(1)).*sind(pvec(3)).*cosd(pvec(2))));
g_12=((sind(pvec(1)).*cosd(pvec(3)))+(cosd(pvec(1)).*sind(pvec(3)).*cosd(pvec(2))));
g_13= (sind(pvec(3)).*sind(pvec(2)));
g_21 =((-cosd(pvec(1)).*sind(pvec(3)))-(sind(pvec(1)).*cos(pvec(3)).*cos(pvec(2)))); 
g_22 = ((-sin(pvec(1)).*sind(pvec(3)))+(cosd(pvec(1)).*cosd(pvec(3)).*cosd(pvec(2))));
g_23 = (cosd(pvec(3)).*sind(pvec(2)));
g_31 = (sind(pvec(1)).* sind(pvec(2)));
g_32 = -cosd(pvec(1)).* sind(pvec(2));
g_33 = cosd(pvec(2)); 

gi =[g_11 g_12 g_13;g_21 g_22 g_23;g_31 g_32 g_33]; 
```

然后你可以循环你的大数组（调用它`LA`），得到`g`你需要的所有东西，然后在它上面，所以你想要的计算：

```
for ii=1:n-1
del_g= inv(get_gi(LA(ii,:)).*get_gi(LA(ii+1,:);
ans(ii,:) =   [del_g(1,1) del_g(1,3)];
end 
```

那是你想要的吗？

# vbscript - 使用 VBScript 修改多个文本文件

> ID：14620676
> 
> 赞同：0
> 
> 时间：2013-01-31T07:36:04.863
> 
> 标签：vbscript

我需要这个 VBScript 的帮助
我在这里要做的是修改日志文件以删除里面的多余空格。（我只是在网络上的某个地方得到了这个脚本。）
如果我只指定一个文件但我试图修改多个文件，它就可以工作。像我在下面那样使用通配符也不起作用（对不起，我对 vbs 不太好）

还有谁知道我们如何在不创建新输出文件的情况下做到这一点？只需修改原始文件。提前致谢..

```
Set objFSO = CreateObject("Scripting.FileSystemObject") 
'change this line to wherever you want to read the input from.
Set objTextFile = objFSO.OpenTextFile("D:\access*.log",1) 
Set objNewFile = objFSO.CreateTextFile("D:\access*_new.log")
Do Until objTextFile.AtEndOfStream

myString = objTextFile.Readline
objNewFile.WriteLine(Replace (myString, " ", " "))
Loop 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T09:27:02.660

除了我的评论：[脚本专家](http://technet.microsoft.com/en-us/magazine/2008.05.heyscriptingguy.aspx?pr=PuzzleAnswer)准确地解释了您的替换案例：多个空格一个，带有正则表达式：

```
Set objRegEx = CreateObject("VBScript.RegExp")

objRegEx.Global = True
objRegEx.Pattern = " {2,}"

strSearchString = _
"Myer Ken, Vice President, Sales and Services"
strNewString = objRegEx.Replace(strSearchString," ")

Wscript.Echo strNewString 
```

脚本专家还解释了如何[更改文本文件](http://blogs.technet.com/b/heyscriptingguy/archive/2005/02/08/how-can-i-find-and-replace-text-in-a-text-file.aspx)：

```
Const ForReading = 1
Const ForWriting = 2

Set objFSO = CreateObject("Scripting.FileSystemObject")
Set objFile = objFSO.OpenTextFile("C:\Scripts\Text.txt", ForReading)

strText = objFile.ReadAll
objFile.Close
strNewText = Replace(strText, "Jim ", "James ")

Set objFile = objFSO.OpenTextFile("C:\Scripts\Text.txt", ForWriting)
objFile.WriteLine strNewText
objFile.Close 
```

在同一个[technet.microsoft](http://technet.microsoft.com/en-us/library/ee198703.aspx)上，您可以找到如何轻松迭代所有文件。您可以再次使用正则表达式来查看文件是否与您的（通配符）模式匹配，在您的情况下`^access.*\.log$`：

```
Set objFSO = CreateObject("Scripting.FileSystemObject")
Set objFolder = objFSO.GetFolder("C:\FSO")
Set colFiles = objFolder.Files
For Each objFile in colFiles
    Wscript.Echo objFile.Name, objFile.Size
Next 
```

这应该为您提供创建脚本的所有要素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T09:47:45.410

冻干版：

```
 Const ForReading = 1
  Const ForWriting = 2

  Dim goFS    : Set goFS    = CreateObject("Scripting.FileSystemObject")

  Dim reZap : Set reZap = New RegExp
  reZap.Global  = True
  reZap.Pattern = " +"
  Dim oFile
  For Each oFile In goFS.GetFolder("..\testdata\14620676").Files
      WScript.Echo "----", oFile.Name
      Dim sAll : sAll = oFile.OpenAsTextStream(ForReading).ReadAll()
      WScript.Echo sAll
      oFile.OpenAsTextStream(ForWriting).Write reZap.Replace(sAll, " ")
      WScript.Echo oFile.OpenAsTextStream(ForReading).ReadAll()
  Next 
```

如果没有@AutomatedChaos 令人钦佩的贡献 (+1)，这完全没有意义，但是通过使用 .Write 而不是 .WriteLine 来避免增大文件的尾部。

# c# - C# 自定义文本介词格式

> ID：14620679
> 
> 赞同：0
> 
> 时间：2013-01-31T07:36:18.963
> 
> 标签：c#, string, text, position

我需要制作如下图所示的文字 ![在此处输入图像描述](../Images/a50fef854ea0eb144635022bdd7ceca8.png)

然后我像这样制作字符串文本

```
string teksnya = "Payment Statement\nSudah " + metode + " Ke Rekening " + RekeningRekber + " MONEX BANK a.n IMANULLAH\n » Harga Barang/Jasa " + hargabarang + " Jasa " + lintascabank+" \n » Total biaya transfer : " + totalpembayaran + " \n » Untuk Pembelian : " + pembelian + " \n » Keterangan Barang/Jasa : " + keterangan + " \n » ID KASKUS Pembeli : " + idbuyer + " \t Email pembeli : " + emailbuyer + " \n » Hp Pembeli : " + nomorhandphonebuyer + " \n ======================================================== \n » BANK Penjual : " + bankseller + " \n » ID KASKUS Penjual : " + idseller + " \n » Email Penjual : " + emailseller + " \t No Hp : " + nomorhandphoneseller + " \n »link thread : " + linklapak + " \n \n Mohon MONEX BANK segera Teruskan Konfirmasi ini ke Penjual, Untuk memproses Barang/Jasa sesuai kesepakatan"; 
```

为什么结果与图片不同？为什么不`\n`工作？这是结果 ![在此处输入图像描述](../Images/a05098cbf26a621d886bc843793006d8.png)

当我将它们复制粘贴到记事本上时，文本位置仍然与第一张图片不同。请帮助如何使显示的文本与第一张图片完全相同。

谢谢 ！

更新 ：

这是我当前的字符串

```
 string teksnya = "Payment Statement{0}Sudah " + metode + " Ke Rekening " + RekeningRekber + " MONEX BANK a.n IMANULLAH{0} » Harga Barang/Jasa " + hargabarang + " Jasa " + lintascabank + " {0} » Total biaya transfer : " + totalpembayaran + " {0} » Untuk Pembelian : " + pembelian + " {0} » Keterangan Barang/Jasa : " + keterangan + " {0} » ID KASKUS Pembeli : " + idbuyer + " \t Email pembeli : " + emailbuyer + " {0} » Hp Pembeli : " + nomorhandphonebuyer + " {0} ======================================================== {0} » BANK Penjual : " + bankseller + " {0} » ID KASKUS Penjual : " + idseller + " {0} » Email Penjual : " + emailseller + " \t No Hp : " + nomorhandphoneseller + " {0} »link thread : " + linklapak + " {0} {0} Mohon MONEX BANK segera Teruskan Konfirmasi ini ke Penjual, Untuk memproses Barang/Jasa sesuai kesepakatan"+Environment.NewLine; 
```

即使我遵循了[微软](http://msdn.microsoft.com/en-us/library/system.environment.newline.aspx)教程，仍然无法正常工作:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T07:43:33.523

请使用[`Environment.NewLine`](http://msdn.microsoft.com/en-us/library/system.environment.newline.aspx)而不是使用`"\n"`or`"\r\n"`因为换行符是平台相关的。使用`Environment.NewLine`确保您的程序也可以在 Linux 或其他平台（使用单声道）上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T07:40:07.543

也尝试使用回车：

```
\n\r 
```

而不是简单的

```
\n
That is, your statement should look like this:
string teksnya = "Payment Statement\n\rSudah " + metode + " Ke Rekening " + RekeningRekber + " MONEX BANK a.n IMANULLAH\n\r » Harga Barang/Jasa " + hargabarang + " Jasa " + lintascabank+" \n\r » Total biaya transfer : " + totalpembayaran + " \n\r » Untuk Pembelian : " + pembelian + " \n\r » Keterangan Barang/Jasa : " + keterangan + " \n\r » ID KASKUS Pembeli : " + idbuyer + " \t Email pembeli : " + emailbuyer + " \n\r » Hp Pembeli : " + nomorhandphonebuyer + " \n\r ======================================================== \n\r » BANK Penjual : " + bankseller + " \n\r » ID KASKUS Penjual : " + idseller + " \n\r » Email Penjual : " + emailseller + " \t No Hp : " + nomorhandphoneseller + " \n\r »link thread : " + linklapak + " \n\r \n\r Mohon MONEX BANK segera Teruskan Konfirmasi ini ke Penjual, Untuk memproses Barang/Jasa sesuai kesepakatan"; 
```

**无论如何**，我会使用[string.Format()](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)而不是连接这么多字符串。

**后期编辑：** 我同意 Environment.NewLine 更好。您仍然应该使用 string.Format 甚至利用使用字段来指定固定宽度的可能性。检查[{index[,length][:formatString]}](http://msdn.microsoft.com/en-us/library/fht0f5be.aspx)规范。

***好的，这是您的最终代码：***

```
 string teksnya = string.Format("Payment Statement{0}Sudah {1} Ke Rekening {2} MONEX BANK a.n IMANULLAH{0} » Harga Barang/Jasa {3} Jasa {4} {0} » Total biaya transfer : {5} {0} » Untuk Pembelian : {6} {0} » Keterangan Barang/Jasa : {7} {0} » ID KASKUS Pembeli : {8} \t Email pembeli : {9} {0} » Hp Pembeli : {10} {0} ======================================================== {0} » BANK Penjual : {11} {0} » ID KASKUS Penjual : {12} {0} » Email Penjual : {13} \t No Hp : {14} {0} »link thread : {15} {0} {0} Mohon MONEX BANK segera Teruskan Konfirmasi ini ke Penjual, Untuk memproses Barang/Jasa sesuai kesepakatan",
        Environment.NewLine
        , metode
        , RekeningRekber
        , hargabarang
        , lintascabank
        , totalpembayaran
        , pembelian
        , keterangan
        , idbuyer
        , emailbuyer
        , nomorhandphonebuyer
        , bankseller
        , idseller
        , emailseller
        , nomorhandphoneseller
        , linklapak); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T07:43:50.650

我没用过`\r`，也好`\n\r`几年没用了。

我更喜欢`Environment.NewLine`.

[http://msdn.microsoft.com/en-us/library/system.environment.newline.aspx](http://msdn.microsoft.com/en-us/library/system.environment.newline.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T07:40:57.097

将“\n”替换为“\r\n”以获得正确的换行符。

# tomcat - SOLR：没有运行 SolrCores 错误消息

> ID：14620680
> 
> 赞同：3
> 
> 时间：2013-01-31T07:36:28.290
> 
> 标签：tomcat, solr, search-server

我对 SOLR 很陌生。

我已将以下内容添加到相应的 xml 文件中。但是当我尝试打开我`http://localhost:8080/solr/#/`机器中的服务器页面时，它会出现一条消息，说“ `There are no SolrCores running.Using the Solr Admin UI currently requires at least one SolrCore.`”。

**solarconfig.xml：** [请求处理程序]

```
 <requestHandler name="/dataimport" class="org.apache.solr.handler.dataimport.DataImportHandler">
       <lst name="defaults">
        <str name="config">C:/Solr/collection1/conf/data-config.xml</str>
    </lst>
  </requestHandler> 
```

**数据配置.xml**

```
<dataConfig>
  <dataSource type="JdbcDataSource" driver="com.microsoft.sqlserver.jdbc.SQLServerDriver" url="jdbc:sqlserver://127.0.0.1:8080;databaseName=myDB" user="xxx" password="xxx" />
    <document>
      <entity name="sep" processor="SolrEntityProcessor" url="http://127.0.0.1:8080/solr/#/collection1" query="*:*"/>
      <entity name="Data" query="select id, firstname, lastname from tblPlayers">
        <field column="DocumentId" name="DocumentId" />
        <field column="Data" name="Data" />
      </entity>
    </document>
</dataConfig> 
```

我猜`requestHandler`只是指向`data-config.xml`，所以我的 data-config.xml 有什么问题。

这是我在与数据库相关的 data-config.xml 中指定的端口。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-14T20:21:04.527

该错误消息与数据导入无关。它告诉您至少需要一个核心。在我看来，您使用的是 solr 4.x。如果是这样，您可以在下载包中找到有效的配置（核心称为“collection1”）。还有一个多核示例。

关于数据导入，查看文件我不清楚你想知道关于数据库端口的问题......如果你想知道在哪里放置数据库连接详细信息，答案是数据源的“url”属性元素...您必须指定一个有效的 jdbc url，它应该至少包含数据库地址、端口和/或别名。

# c# - 在 C# 中使用 HttpWebRequest POST 多部分表单来模仿 curl

> ID：14620683
> 
> 赞同：1
> 
> 时间：2013-01-31T07:36:37.623
> 
> 标签：c#, node.js, xamarin.ios, multipartform-data, express

我正在尝试将单触式 UIImage 上传到我的服务器（nodeJS）。

我已经尝试了在 SO 和网络上其他地方找到的所有可能的解决方案，但无济于事。

基本上我有一个 UIImage ，我正在使用以下方法将其转换为 byte[] ：

```
public byte[] GetMergedBytes(UIImage img)
    {
        byte[] filedata = null;
        using (NSData imageData = img.AsPNG()) {
            filedata = new byte[imageData.Length];
            System.Runtime.InteropServices.Marshal.Copy (imageData.Bytes, filedata, 0, Convert.ToInt32 (imageData.Length));
        }

        return filedata;
    } 
```

然后我使用各种不同的方法将其发布到我的服务器，包括： [使用 HTTPWebrequest (multipart/form-data) 上传文件](https://stackoverflow.com/questions/566462/upload-files-with-httpwebrequest-multipart-form-data)

当我尝试使用 CURL 时，我的服务器正确响应：

```
curl  -F "fileupload=@logo.png" -F "name=blah" http://xxx.xxx.xxx.xx/upload 
```

为了完成，我将 nodeJS 与 expressJS 一起使用：

```
app.post('/upload', function(req, res, files) {
console.log(req.files);
console.log(files);
} 
```

使用 CURL，我从服务器上的 console.log 获得以下信息：

```
{ fileupload: 
  { domain: null,
   _events: null,
   _maxListeners: 10,
   size: 88270,
   path: '/tmp/9ab5c9b1ea6da91e4e16ea711636b9bb',
   name: 'logo.png',
   type: 'application/octet-stream',
   hash: false,
   lastModifiedDate: Thu Jan 31 2013 07:26:43 GMT+0000 (UTC),
   _writeStream: 
   { domain: null,
    _events: null,
    _maxListeners: 10,
    path: '/tmp/9ab5c9b1ea6da91e4e16ea711636b9bb',
    fd: 9,
    writable: false,
    flags: 'w',
    encoding: 'binary',
    mode: 438,
    bytesWritten: 88270,
    busy: false,
    _queue: [],
    _open: [Function],
    drainable: true },
  length: [Getter],
  filename: [Getter],
  mime: [Getter] } } 
```

使用任何其他方法，相同的`console.log`返回：

```
{} 
```

有任何想法吗？我已经在这里发疯了！

**更新**

修复。我现在改用 RestSharp，它的工作原理就像一个只需要很少几行代码的魅力......

```
byte[] filedata = GetFileBytes(file);
var client = new RestClient ("http://server");

var request = new RestRequest ("upload", Method.POST);
        request.AddParameter("name", "parameter1);
        request.AddParameter("name2", id);
        request.AddFile("file", filedata, "somename.png", "image/png");

        RestResponse response = (RestResponse)client.Execute(request);
        var content = response.Content;

        return content; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T06:33:55.803

更新

修复。我现在改用 RestSharp，它的工作原理就像一个只需要很少几行代码的魅力......

```
 byte[] filedata = GetFileBytes(file);
    var client = new RestClient ("http://server");

    var request = new RestRequest ("upload", Method.POST);
    request.AddParameter("name", "parameter1);
    request.AddParameter("name2", id);
    request.AddFile("file", filedata, "somename.png", "image/png");

    RestResponse response = (RestResponse)client.Execute(request);
    var content = response.Content;

    return content; 
```

# xquery - MULE：Xquery 转换器性能问题

> ID：14620688
> 
> 赞同：0
> 
> 时间：2013-01-31T07:37:06.343
> 
> 标签：xquery, mule

我有一个接收 XML 请求的流。然后，我调用一个 jdbc 出站端点，对 Oracle 数据库执行查询。然后使用 xquery 转换器将查询结果转换为 XML 并发送回。数据库中的 sql 最多返回 50 000 行，但 xquery 转换器创建的 XML 文件每行有 60 行，从而导致 XML 文件非常大（15-100 MB）。Mule 花了很长时间“映射/创建”XML 文件，我想知道我是否可以以某种方式加快这个过程，或者我是否必须重新考虑我的方法。

问候，

马格努斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:20:25.807

Zorba 提供了 JDBC 连接器和流功能：[http](http://www.zorba-xquery.com/) ://www.zorba-xquery.com/ 这可能正是您正在寻找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:39:30.563

直接来自 Mule 的[文档](http://www.mulesoft.org/documentation/display/MULE3USER/XML+Module+Reference)：

```
Efficient Transformations with DelayedResult

Mule contains a special XML output format called DelayedResult. This format allows very efficient XML transformations by delaying any XML serialization until an OutputStream is available.

For example, here is an XSLT transformer set up to use DelayedResult:

<mxml:xslt-transformer name="transform-in" 
                       xsl-file="xslt/transform.xslt"
                       returnClass="org.mule.module.xml.transformer.DelayedResult"/>

If the result of this transformation were being sent to an HTTP client, the HTTP client would ask Mule for an OutputHandler and pass in the OutputStream to it. Only then would Mule perform the transformation, writing the output directly to the OutputStream.

If DelayedResult were not used, the XML result would first be written to an in-memory buffer before being written to the OutputStream. This will cause your XML processing to be slower. 
```

因此，使用 XSLT 转换器而不是 XQuery 转换器更有意义。

# jquery - 为每个不同元素添加不同背景颜色的最简单方法

> ID：14620692
> 
> 赞同：0
> 
> 时间：2013-01-31T07:37:14.900
> 
> 标签：jquery, html, css

我目前正在做这样的事情：

```
<div id="container">
 <div class="gridTab">
  Home
 </div>
 <div class="gridTab">
  Work
 </div>
 <div class="gridTab">
  Gallery
 </div>
 <div class="gridTab">
  Contact
 </div>
</div> 
```

每个“gridTab”应该有不同的颜色。从上到下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T07:40:16.973

使用`nth-child`伪类

```
.gridTab:nth-child(1){background:red}
.gridTab:nth-child(2){background:lime}
.gridTab:nth-child(3){background:green}
.gridTab:nth-child(4){background:violet} 
```

**[演示](http://jsfiddle.net/CXKvv/1/)**

* * *

如果您正在寻找以下解决方案的 IE9，请使用以下方法

**对于 IE7+ 支持**

```
.gridTab:first-child {background:red}
.gridTab:first-child + div.gridTab{background:lime}
.gridTab:first-child + div + div.gridTab{background:green}
.gridTab:first-child + div + div + div.gridTab{background:violet} 
```

**[IE7+ 演示](http://jsfiddle.net/CXKvv/2/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T07:39:38.870

您应该添加另一个在元素之间产生差异的类。然后按该类设置它们的样式。

```
<div id="container">
 <div class="gridTab one">
  Home
 </div>
 <div class="gridTab two">
  Work
 </div>
 <div class="gridTab three">
  Gallery
 </div>
 <div class="gridTab four">
  Contact
 </div>
</div> 
```

然后是 CSS：

```
.one {
  background: white;
}
.two{
  background: blue;
}
.three{
  background: red;
}
.four{
  background: black;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T07:47:17.700

如果您希望您的颜色随机且不同，您可以使用它。它消除了您需要为其编写样式的 div 数量的限制。

```
$(document).ready(function() {
    $('.gridTab').each(function () {
        var hue = 'rgb(' + (Math.floor((256-199)*Math.random()) + 200) + ',' + (Math.floor((256-199)*Math.random()) + 200) + ',' + (Math.floor((256-199)*Math.random()) + 200) + ')';
        $(this).css("background-color", hue);
    });
}); 
```

[从这里](https://stackoverflow.com/questions/1535128/apply-random-color-to-class-elements-individually)引用

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T07:53:43.687

这是一个简单的代码：

```
$(".gridTab").each(function (i) {
  var colors = ["#CCCCCC", "#333333", "#990099", "#EEEEEE"];
  $(this).css("background-color", colors[i]);
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T07:44:45.767

您可以使用下面的`nth-child`伪样式表来使用样式表，也可以像最后一个 div 一样在 div 标签中使用样式属性。

```
<style>
.gridTab:nth-child(1){background-color: red;}
.gridTab:nth-child(2){background-color: green;}
.gridTab:nth-child(3){background-color: blue;}
.gridTab:nth-child(4){background-color: yellow;}
</style>

<div id="container">
 <div class="gridTab">
  Home
 </div>
 <div class="gridTab">
  Work
 </div>
 <div class="gridTab">
  Gallery
 </div>
 <div class="gridTab" style="background-color: yellow;">
  Contact
 </div>
</div> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-31T07:45:17.340

如果您想要特定对象的特定属性，则应该使用 ID。

你的 CSS：

```
#yellowTab {background-color:yellow;}
#redTab {background-color:red;}
#greenTab {background-color:green;}
#blueTab {background-color:blue;} 
```

HTML：

```
<div id="container">
 <div class="gridTab" id="yellowTab">
  Home
 </div>
 <div class="gridTab" id="redTab">
  Work
 </div>
 <div class="gridTab" id="greenTab">
  Gallery
 </div>
 <div class="gridTab" id="blueTab">
  Contact
 </div>
</div> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-31T07:46:21.277

如果没有 css，你可以用 JQuery 做这样的事情：

```
$('.gridTab:first').css('background', 'red');
$('.gridTab:second').css('background', 'blue'); 
```

等等...

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-31T08:00:54.327

这也可以这样实现：http: [//jsfiddle.net/Ezn26/](http://jsfiddle.net/Ezn26/)

```
for (var i = 0; i <= $('.gridTab').length; i++) {     
    $('.gridTab').eq(i).addClass('red').end()
       .next('.gridTab').eq(i).addClass('green').end()
       .next('.gridTab').eq(i).addClass('blue').end()
       .next('.gridTab').eq(i).addClass('yellow');
} 
```

# symfony - fosuser bundle - 更改密码模式

> ID：14620693
> 
> 赞同：1
> 
> 时间：2013-01-31T07:37:15.763
> 
> 标签：symfony, fosuserbundle

我想更改 FosUser Bundle 的密码模式..（可以说，我要求密码至少为 6 个字符，还需要 1 个字母和 1 个数字。我在哪里设置这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T08:03:36.320

Yuo 可以在 FosUserBundle 验证器中执行此操作。

看看这个文件：

```
/vendor/friendsofsymfony/user-bundle/FOS/UserBundle/Resources/config/validation.xml 
```

特别：

```
<property name="plainPassword">
  <constraint name="NotBlank">
    <option name="message">fos_user.password.blank</option>
    <option name="groups">Registration</option>
  </constraint>
  <constraint name="MinLength">
    <option name="limit">2</option>
    <option name="message">fos_user.password.short</option>
    <option name="groups">
      <value>Registration</value>
      <value>Profile</value>
    </option>
  </constraint>
</property> 
```

我不知道（但我想我是对的）是否存在“1 个字母和 1 个数字”类型的约束。在这种情况下，您必须自己“构建”它并以与使用此示例的`NotBlank`and`MinLenght`约束相同的方式使用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-23T18:31:36.640

我已经添加到用户实体

```
 // src/Acme/AcmeBundle/Entity/User.php

    ....
    class User extends BaseUser{
        ....
        /**
         * @Assert\NotBlank(message="fos_user.username.blank", groups={"Registration", "Profile"})
         * @Assert\Length(min=5, max="255",
         *     minMessage="fos_user.username.short", maxMessage="fos_user.username.long",
         *     groups={"Registration", "Profile"})
         */
        protected $username;  

        /**
         * @Assert\NotBlank(message="fos_user.password.blank", groups={"Registration", "ResetPassword", "ChangePassword"})
         * @Assert\Length(min=6,
         *     minMessage="fos_user.password.short",
         *     groups={"Registration", "Profile", "ResetPassword", "ChangePassword"})
         */
        protected $plainPassword; 
```

# php - cakephp 2.3.0 稳定版的 XML 错误

> ID：14620695
> 
> 赞同：0
> 
> 时间：2013-01-31T07:37:27.820
> 
> 标签：php, xml, cakephp, xml-parsing, cakephp-2.0

我试图将 xml 传递给正在使用 cakephp 2.3.0 构建的 rest API，但我遇到了一个错误，但我使它与 cakephp 1.3 一起工作。我想知道问题是否出在 cakephp 的 XML 核心实用程序上。

我发布的 XML 字符串如下

```
<?xml version="1.0" encoding="UTF-8"?>
<username>my username</username>
<password>mypassword</password>
<name>Namanya Hillary</name>
<title>mytitle</title> 
```

错误如下

```
2013-01-31 07:32:25 Error: [Exception] String could not be parsed as XML
#0 E:\wamp\www\cakephp2.3.0\lib\Cake\Utility\Xml.php(131): SimpleXMLElement->__construct('<?xml version="...', 16384)
#1 E:\wamp\www\cakephp2.3.0\lib\Cake\Utility\Xml.php(100): Xml::_loadXml('<?xml version="...', Array)
#2 E:\wamp\www\cakephp2.3.0\lib\Cake\Controller\Component\RequestHandlerComponent.php(222): Xml::build('<?xml version="...')
#3 [internal function]: RequestHandlerComponent->convertXml('<?xml version="...')
#4 E:\wamp\www\cakephp2.3.0\lib\Cake\Network\CakeRequest.php(828): call_user_func_array(Array, Array)
#5 [internal function]: CakeRequest->input(Array)
#6 E:\wamp\www\cakephp2.3.0\lib\Cake\Controller\Component\RequestHandlerComponent.php(207): call_user_func_array(Array, Array)
#7 [internal function]: RequestHandlerComponent->startup(Object(CompaniesController))
#8 E:\wamp\www\cakephp2.3.0\lib\Cake\Utility\ObjectCollection.php(131): call_user_func_array(Array, Array)
#9 [internal function]: ObjectCollection->trigger(Object(CakeEvent))
#10 E:\wamp\www\cakephp2.3.0\lib\Cake\Event\CakeEventManager.php(247): call_user_func(Array, Object(CakeEvent))
#11 E:\wamp\www\cakephp2.3.0\lib\Cake\Controller\Controller.php(670): CakeEventManager->dispatch(Object(CakeEvent))
#12 E:\wamp\www\cakephp2.3.0\lib\Cake\Routing\Dispatcher.php(183): Controller->startupProcess()
#13 E:\wamp\www\cakephp2.3.0\lib\Cake\Routing\Dispatcher.php(161): Dispatcher->_invoke(Object(CompaniesController), Object(CakeRequest), Object(CakeResponse))
#14 E:\wamp\www\forex\webroot\index.php(102): Dispatcher->dispatch(Object(CakeRequest), Object(CakeResponse))
#15 {main} 
```

我尝试直接在实用程序文件夹中的核心 XML 实用程序文件中传递 XML，如下第 130 行

```
$xml = new SimpleXMLElement('<?xml version="1.0" encoding="UTF-8"?><username>my username</username><password>mypassword</password><name>Namanya Hillary</name><title>mytitle</title>', LIBXML_NOCDATA); 
```

但同样的例外被提出。如果您遇到此类问题或发现任何错误，请帮助我。解决方案的参考链接将很有用。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T07:42:38.533

格式正确的 XML 必须有一个根元素。你没有那个。尝试使请求格式类似于：

```
<?xml version="1.0" encoding="UTF-8"?>
<request>
    <username>my username</username>
    <password>mypassword</password>
    <name>Namanya Hillary</name>
    <title>mytitle</title>
</request> 
```

# oracle - 包中声明的oracle记录表不能使用索引？

> ID：14620697
> 
> 赞同：1
> 
> 时间：2013-01-31T07:37:32.693
> 
> 标签：oracle, plsql

感谢您的好意
我在包的规范中声明了一个记录类型和记录表，我需要使用这个表类型作为管道函数的返回。
如果我将 INDEX BY (something) 添加到表声明中，则会导致管道函数中的错误编译。为什么不能使用 INDEX BY？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-31T08:10:17.647

据[记载](http://docs.oracle.com/cd/E11882_01/server.112/e17766/pcmus.htm#sthref18475)，您不能在流水线函数中使用 index-by（关联数组）。您必须使用嵌套表（没有“索引”或 SQL 类型定义的 pl/sql 数组）。

```
SQL> create or replace package testpkg
  2  as
  3    type test_rec is record(id number, id2 number);
  4    type test_tab is table of test_rec index by binary_integer;
  5
  6    function test return test_tab pipelined;
  7
  8  end;
  9  /

Warning: Package created with compilation errors.

SQL> show errors
Errors for PACKAGE TESTPKG:

LINE/COL ERROR
-------- -----------------------------------------------------------------
6/12     PLS-00630: pipelined functions must have a supported collection
         return type

SQL> create or replace package testpkg
  2  as
  3    type test_rec is record(id number, id2 number);
  4    type test_tab is table of test_rec;
  5
  6    function test return test_tab pipelined;
  7
  8  end;
  9  /

Package created.

SQL> 
```

# facebook - 删除功能后如何发布到时间线

> ID：14620701
> 
> 赞同：-1
> 
> 时间：2013-01-31T07:38:01.613
> 
> 标签：facebook, facebook-graph-api, post

在[https://developers.facebook.com/docs/reference/api/publishing/#other](https://developers.facebook.com/docs/reference/api/publishing/#other)我看到发布到时间线的功能已被删除。删除该功能后是否可以通过某种方式发布到时间线？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T07:45:58.323

在自己的时间线上发帖`/me/feed`不会被删除。在其他用户/朋友的墙上发帖被删除。对于后者，您可以使用[Open Graph](https://developers.facebook.com/docs/concepts/opengraph/)概念。

您可以在此处关注类似的问题：[2013 年 2 月迁移生效后如何在朋友的时间线上发帖？](http://facebook.stackoverflow.com/questions/14190877/how-to-post-on-a-friends-timeline-after-the-february-2013-migration-takes-effec)

# java - java instanceof 和 ocaml 匹配

> ID：14620707
> 
> 赞同：3
> 
> 时间：2013-01-31T07:38:36.973
> 
> 标签：java, ocaml, match, rtti, instanceof

在 ocaml 中，假设我们有：

```
type t = A of int | B of string
let x = [A 5; B "y"] 
```

然后，我们可以迭代列表，并使用 match 语句来决定如何处理 A 或 B。

在java中，我们可以有：

```
ArrayList<Object> x = new ArrayList<Object>();
x.add(new Integer(5));
x.add("y"); 
```

在数组列表迭代中，我们必须使用 instanceof 和 downcast 来处理数据。

是不是，在内部，ocaml作为java携带运行时类型信息，类型匹配语句就像java instanceof-downcast一样工作，但是类型是安全的，因为没有办法写

```
if (element instanceof Integer) {
  String e = (String) element;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T07:51:01.683

不，OCaml 不携带任何运行时类型信息（可以说）。没有向下转换，因为类型不参与子类型关系。（对于确实参与子类型化的类型，OCaml 不允许向下转换。）是的，代码是安全的，因为语言是经过仔细定义的，因此可以在编译时检查安全性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T08:13:53.803

不和是。一般来说，OCaml 不会为每个值携带任何运行时类型信息（正如 Jeffrey 的回答中已经说过的那样）。这是安全的，因为类型系统设计为完全静态的类型系统。A 和 B 不是 OCaml 中的类型，它们是构造函数。并且构造函数在运行时是可区分的。但仅限于一种类型的构造函数之间。因此，OCaml 编译器仅代表运行时的最低限度，这是实现模式匹配所必需的。

# batch-file - 如何在批处理文件中拆分字符串而不使用for循环

> ID：14620709
> 
> 赞同：15
> 
> 时间：2013-01-31T07:38:39.897
> 
> 标签：batch-file, dos

我想将一个字符串分成两部分，而不使用任何 for 循环。

例如，我在变量中有字符串：

```
str=45:abc 
```

我想进入`45`一个变量和`abc`另一个变量。可以在批处理文件中吗？

模式就像 somenumber:somestring

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-31T08:52:05.837

您可以用不同的方式拆分 str 。

for 循环，你不想使用它。

尾随部分很容易使用`*`（匹配任何东西直到...）
`set "var2=%str:*:=%"`

主要部分可以用一个讨厌的技巧来完成
`set "var1=%str::="^&REM #%`

需要插入符号来转义＆符号，
因此有效地冒号将被替换`"&REM #` 因此在您的情况下，您在替换后得到了该行
`set "var1=4567"&REM #abcde`
这分为两个命令

```
set "var1=4567"
REM #abcde` 
```

完整的代码在这里：

```
set "str=4567:abcde"
echo %str%
set "var1=%str::="^&REM #%
set "var2=%str:*:=%"
echo var1=%var1% var2=%var2% 
```

**编辑2：更稳定的前导部分**

感谢 Dave 提出使用换行符的想法。
REM 技术对于带有引号和特殊字符的内容不是很稳定。
但是通过换行技巧，存在一个更稳定的版本，当 split 参数长于单个字符时也可以使用。

```
@echo off
setlocal enableDelayedExpansion
set ^"str=456789#$#abc"
for /F "delims=" %%a in (^"!str:#$#^=^

!^") do (
  set "lead=%%a"
  goto :break
)
:break
echo !lead! 
```

**解决方案 3：适应 dbenhams 答案**

Dbenham 在他的解决方案中使用了带有管道的换行符。
这似乎有点过于复杂。
由于解决方案使用了这样一个事实，即解析器在未转义的换行符之后删除了该行的其余部分（当在特殊字符之前或在[特殊字符阶段](https://stackoverflow.com/a/4095133/463115)发现时）。

首先，冒号字符被替换为带有延迟扩展替换的换行符。
这是允许的，换行符现在是变量的一部分。
然后该线`set lead=%lead%`剥离尾随部分。
最好不要在这里使用扩展语法，因为`set "lead=%lead%"`如果引号是字符串的一部分会中断。

```
setlocal enableDelayedExpansion
set "str=45:abc"
set ^"lead=!str::=^

!"
set lead=%lead%
echo "!lead!" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T07:52:44.913

你可以试试这个。如果它固定，冒号左侧的数字将始终为 2，而右侧的数字将始终为 3。假设您的 str 具有该值，则以下代码应该可以工作。

```
set "str=45:abc"
echo %str%
set var1=%str:~0,2%
set var2=%str:~3,3%
echo %var1% %var2% 
```

让我知道。:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-13T22:41:28.457

避免使用 FOR 循环似乎毫无意义，但它确实使问题变得有趣。

正如 jeb 指出的那样，获取尾随部分很容易使用`!str:*:=!`.

棘手的部分是主要部分。这是jeb解决方案的替代方案。

`:`您可以使用以下语法将换行符插入到变量中

```
setlocal enableDelayedExpansion
set "str=45:abc"
echo !str::=^

! 
```

- 输出 -

```
45
abc 
```

最后一行上方的空行`!`很关键。

我不知道为什么，但是当上面的输出通过管道传输到命令时，只保留第一行。因此，可以将输出通过管道传输到与任何行匹配的 FINDSTR，并将结果定向到文件，然后可以使用 SET /P 将其读入变量。

在使用 SET /P 之前必须消除第二行，因为 SET /P 不能识别`<LF>`为行终止符 - 它只能识别`<CR><LF>`。

这是一个完整的解决方案：

```
@echo off
setlocal enableDelayedExpansion
set "str=45:abc"
echo(!str::=^

!|findstr "^" >test.tmp
<test.tmp set /p "var1="
del test.tmp
set "var2=!str:*:=!"
echo var1=!var1!  var2=!var2! 
```

**更新**

我相信我已经大致弄清楚为什么第二行从输出中被剥离了:)

它与 Windows cmd.exe 如何处理管道有关，每一端都由一个新的 CMD.EXE 线程处理。请参阅[为什么在管道代码块中延迟扩展失败？](https://stackoverflow.com/q/8192318/1012053)对于一个相关问题，jeb 给出了很好的回答。

只看管道命令的左侧，我相信它（在内存中）被解析成一个看起来像的语句

```
C:\Windows\system32\cmd.exe /S /D /c" echo {delayedExpansionExpression}" 
```

我用它`{delayedExpansionExpression}`来表示尚未发生的多行查找替换扩展。

接下来，我认为变量表达式实际上被扩展并且通过搜索和替换将行分成两部分：

```
C:\Windows\system32\cmd.exe /S /D /c" echo 43
abc" 
```

只有这样才能执行命令，并且按照正常的 cmd.exe 规则，命令在换行处结束。带引号的命令字符串缺少结束引号，但解析器并不关心这一点。

我仍然困惑的部分是发生了`abc"`什么？我原以为会尝试执行它，从而导致错误消息，例如***“abc”，无法识别为内部或外部命令、可运行程序或批处理文件。***但它似乎只是迷失在醚。

*注意 - jeb 的第三条评论解释了原因:)*

* * *

**不带 FOR 的安全版本**

我原来的解决方案不适用于像`this & that:cats & dogs`. 这是一个没有 FOR 的变体，它几乎适用于任何字符串，除了字符串长度限制和尾随控制字符将从前导部分剥离。

```
@echo off
setlocal enableDelayedExpansion
set "str=this & that:cats & dogs"
set ^"str2=!str::=^

!^"
cmd /v:on /c echo ^^!str2^^!|findstr /v "$" >test.tmp
<test.tmp set /p "var1="
del test.tmp
set "var2=!str:*:=!"
echo var1=!var1!  var2=!var2! 
```

我将扩展延迟到新的 CMD 线程，并且我使用 FINDSTR 正则表达式的怪癖，`$`它只匹配以 . 结尾的行`<cr>`。第一行没有，第二行有。该`/v`选项反转结果。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-06-07T00:08:22.433

是的，我知道这是一个非常古老的话题，但我刚刚发现它，我无法抗拒发布我的解决方案的诱惑：

```
@echo off
setlocal

set "str=45:abc"
set "var1=%str::=" & set "var2=%"
echo var1="%var1%"  var2="%var2%" 
```

您可以[在此处](http://www.dostips.com/forum/viewtopic.php?f=3&t=6429)阅读此方法的完整详细信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-06T20:47:02.980

这是一个没有讨厌技巧的解决方案

```
 REM accepts userID@host
    setlocal enableDelayedExpansion
    set "str=%1"
    set "host=%str:*@=%"
    for /F "tokens=1 delims=@" %%F IN ("%str%") do set "user=%%F"
    echo user@host = %user%@%host%
    endlocal 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-27T10:35:57.020

鉴于人们在这里发布了各种拆分变量的方法，我不妨发布我自己的方法，允许从**一个**变量中拆分出**多个**拆分，用相同的符号表示，这在 REM 中是不可能的-方法（我用了一段时间，谢谢@jeb）。

使用下面的方法，将第二行中定义的字符串分成三部分：

```
setlocal EnableDelayedExpansion
set fulline=one/two/three or/more
set fulline=%fulline%//
REM above line prevents unexpected results when input string has less than two /

set line2=%fulline:*/=%
set line3=%line2:*/=%

set line1=!fulline:/%line2%=!
set line2=!line2:/%line3%=!

setlocal DisableDelayedExpansion

echo."%line1%"
echo."%line2%"
echo."%line3%" 
```

输出：

```
"one"
"two"
"three or/more//" 
```

我建议将字符串的最后一个如此创建的分区用作剩余“安全”拆分字符的“bin”。

# mysql - 通过 PHPMyAdmin 连接到 MySQL 本地数据库

> ID：14620710
> 
> 赞同：0
> 
> 时间：2013-01-31T07:38:57.647
> 
> 标签：mysql, apache, ubuntu

我有两台服务器在 Ubuntu 上运行。服务器 1 仅安装了 MySQL 并充当数据库。服务器 2 是一个 Apache Web 服务器。数据库是内部的，Apache 服务器也是如此，它们可以相互 ping 通，但无法通过 Internet 访问数据库服务器。我可以从 Apache 远程登录到数据库服务器，但我无法通过 PHPMyAdmin 连接到数据库。

所以问题是我如何配置它来工作。我也不想允许访问整个服务器（数据库），只能通过指定的用户名和密码进行访问。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:40:32.407

将您的用户定义为`user@[hostip-of-Php-myadmin-server]`并且您应该设置？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:18:04.423

这是一个 BIND 问题，现在都已修复。

# python - 无法在 virtualenv 中使用 python3

> ID：14620715
> 
> 赞同：0
> 
> 时间：2013-01-31T07:39:14.660
> 
> 标签：python, virtualenv

我正在使用 virtualenv 为每个版本的 python 创建不同的虚拟环境。执行以下命令会引发 Permission denied 错误。

```
sudo virtualenv --no-site-packages -p /usr/lib/python3 py3

Traceback (most recent call last):
  File "/usr/local/bin/virtualenv", line 9, in <module>
    load_entry_point('virtualenv==1.8.4', 'console_scripts', 'virtualenv')()
  File "/usr/local/lib/python2.7/dist-packages/virtualenv.py", line 919, in main
    popen = subprocess.Popen([interpreter, file] + sys.argv[1:], env=env)
  File "/usr/lib/python2.7/subprocess.py", line 672, in __init__
    errread, errwrite)
  File "/usr/lib/python2.7/subprocess.py", line 1213, in _execute_child
    raise child_exception
OSError: [Errno 13] Permission denied 
```

我已经正确安装了 python3 和 virtualenv。virtualenv 的版本是：

```
yolk -l virtualenv

virtualenv      - 1.8.4        - active development (/usr/local/lib/python2.7/dist-packages) 
```

我在这里错过了什么吗？请帮帮我。

顺便说一句，没有选项“-p /usr/bin/python3”可以正常工作，如下所示。

```
sudo virtualenv --no-site-packages  pytest

New python executable in pytest/bin/python
Installing setuptools............done.
Installing pip...............done. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T11:20:18.373

您需要为 -p 选项指定`/usr/bin/python3`，而不是。`/usr/lib/python3`

# arrays - 在大小为 N 且元素范围为 0 到 N-1 的整数数组中查找总和为 X 的对

> ID：14620724
> 
> 赞同：5
> 
> 时间：2013-01-31T07:39:52.377
> 
> 标签：arrays, algorithm, sorting

这是一道面试题。我们有一个大小为 N 的整数数组，其中包含 0 到 N-1 之间的元素。一个数字可能出现两次以上。目标是找到总和为给定数字 X 的对。

我使用具有主数组元素计数的辅助数组，然后根据辅助数组重新排列主数组，以便对主数组进行排序，然后搜索对。

但是面试官希望空间复杂度不变，所以我告诉他对数组进行排序，但它是 nlogn 时间复杂度解决方案。他想要 O(n) 解决方案。

有没有什么方法可以在 O(n) 中做到这一点而没有任何额外的空间？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T08:03:00.877

不，我不相信。您要么需要额外的空间才能通过分配给存储桶来对 O(n) 中的数据进行“排序”，要么需要就地排序，而不是 O(n)。

* * *

当然，如果你能做出某些假设，总会有窍门。例如，如果`N < 64K`您的整数是 32 位宽，您可以在当前数组的顶部复用计数数组所需的空间。

换句话说，使用低 16 位存储数组中的值，然后使用高 16 位存储数组，您只需存储与索引匹配的值的计数。

让我们使用一个简化的例子，其中`N == 8`. 因此数组的长度是 8 个元素，每个元素的整数都小于 8，尽管它们是 8 位宽。这意味着（最初）每个元素的前四位为零。

```
 0    1    2    3    4    5    6    7    <- index
(0)7 (0)6 (0)2 (0)5 (0)3 (0)3 (0)7 (0)7 
```

将计数存储到高四位的 O(n) 调整的伪代码是：

```
for idx = 0 to N:
    array[array[idx] % 16] += 16 // add 1 to top four bits 
```

举例来说，考虑存储 7 的第一个索引。因此，该赋值语句会将 16 添加到索引 7，从而增加 7 的计数。模运算符是为了确保已经增加的值只使用低四位来指定数组索引。

所以数组最终变成：

```
 0    1    2    3    4    5    6    7    <- index
(0)7 (0)6 (1)2 (2)5 (0)3 (1)3 (1)7 (3)7 
```

然后，您将新数组放在恒定空间中，您可以使用`int (array[X] / 16)`它来计算有多少`X`值。

但是，这是相当不正当的，需要如前所述的某些假设。这很可能是面试官正在寻找的那种狡猾程度，或者他们可能只是想看看未来的员工如何处理小林丸的编码:-)

* * *

一旦你有了计数，找到总和为给定 的对是一件简单的事情`X`，仍然在 O(N) 中。基本方法是获得笛卡尔积。例如，再次考虑`N`8 并且您想要总和为 8 的对。忽略上面多路复用数组的下半部分（因为您只对计数感兴趣，所以您有：

```
 0   1   2   3   4   5   6   7    <- index
(0) (0) (1) (2) (0) (1) (1) (3) 
```

您基本上所做的是逐个遍历数组，得到总和为 8 的数字计数的乘积。

*   对于 0，您需要添加 8（不存在）。
*   对于 1，您需要添加 7。计数的乘积是 0 x 3，因此没有给出任何结果。
*   对于 2，您需要添加 6。计数的乘积是 1 x 1，因此出现 1 次`(2,6)`。
*   对于 3，您需要添加 5。计数的乘积是 2 x 1，因此出现 2 次`(3,5)`。
*   对于 4，这是一个特殊情况，因为您不能使用该产品。在这种情况下，这并不重要，因为没有 4s，但是，如果有*一个，*它就不能成为一对。如果您配对的数字相同，则公式为（假设有`m`）`1 + 2 + 3 + ... + m-1`。加上一点数学知识，结果是`m(m-1)/2`.

除此之外，你正在与左边的值配对，你已经完成了，所以你停下来。

所以你从

```
a b c d e f g h <- identifiers
7 6 2 5 3 3 7 7 
```

是：

```
(2,6) (3,5) (3,5)
(c,b) (e,d) (f,d) <- identifiers 
```

没有其他值加起来等于 8。

* * *

以下程序在操作中说明了这一点：

```
#include <stdio.h>

int arr[] = {3, 1, 4, 1, 5, 9, 2, 6, 5, 3, 5, 8, 9, 4, 4, 4, 4};
#define SZ (sizeof(arr) / sizeof(*arr))

static void dumpArr (char *desc) {
    int i;
    printf ("%s:\n   Indexes:", desc);
    for (i = 0; i < SZ; i++) printf (" %2d", i);

    printf ("\n   Counts :");
    for (i = 0; i < SZ; i++) printf (" %2d", arr[i] / 100);

    printf ("\n   Values :");
    for (i = 0; i < SZ; i++) printf (" %2d", arr[i] % 100);

    puts ("\n=====\n");
} 
```

上面那一点仅用于调试。执行桶排序的实际代码如下：

```
int main (void) {
    int i, j, find, prod;

    dumpArr ("Initial");

    // Sort array in O(1) - bucket sort.

    for (i = 0; i < SZ; i++) {
        arr[arr[i] % 100] += 100;
    } 
```

我们完成了配对的代码：

```
 dumpArr ("After bucket sort");

    // Now do pairings.

    find = 8;
    for (i = 0, j = find - i; i <= j; i++, j--) {
        if (i == j) {
            prod = (arr[i]/100) * (arr[i]/100-1) / 2;
            if (prod > 0) {
                printf ("(%d,%d) %d time(s)\n", i, j, prod);
            }
        } else {
            if ((j >= 0) && (j < SZ)) {
                prod = (arr[i]/100) * (arr[j]/100);
                if (prod > 0) {
                    printf ("(%d,%d) %d time(s)\n", i, j, prod);
                }
            }
        }
    }

    return 0;
} 
```

输出是：

```
Initial:
   Indexes:  0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16
   Counts :  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
   Values :  3  1  4  1  5  9  2  6  5  3  5  8  9  4  4  4  4
=====

After bucket sort:
   Indexes:  0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16
   Counts :  0  2  1  2  5  3  1  0  1  2  0  0  0  0  0  0  0
   Values :  3  1  4  1  5  9  2  6  5  3  5  8  9  4  4  4  4
=====

(2,6) 1 time(s)
(3,5) 6 time(s)
(4,4) 10 time(s) 
```

而且，如果您检查输入数字，您会发现这些对是正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T15:52:32.980

这可以通过在 O(N) 时间内将输入数组“就地”转换为计数器列表来完成。当然，这假设输入数组不是不可变的。不需要对每个数组元素中未使用的位进行任何额外的假设。

从以下预处理开始：尝试将每个数组的元素移动到元素的值确定的位置；将该位置上的元素也移动到由其值确定的位置；持续到：

*   下一个元素被移动到这个循环开始的位置，
*   下一个元素无法移动，因为它已经在与其值对应的位置上（在这种情况下，将当前元素放置到此循环开始的位置）。

在预处理之后，每个元素要么位于其“正确”位置，要么“指向”其“正确”位置。如果我们在每个元素中有一个未使用的位，我们可以将每个正确定位的元素转换为一个计数器，用“1”初始化它，并允许每个“指向”元素增加适当的计数器。附加位允许将计数器与值区分开来。同样的事情可以在没有任何额外位但不那么简单的算法的情况下完成。

计算数组中的值如何等于 0 或 1。如果有任何这样的值，请将它们重置为零并更新位置 0 和/或 1 处的计数器。设置`k=2`（数组中值小于`k`替换的部分的大小计数器）。对 k = 2, 4, 8, ... 应用以下过程

1.  在“正确”位置找到元素，`k .. 2k-1`用计数器替换它们，初始值为“1”。
2.  `k .. 2k-1`对于具有值的位置处的任何元素，`2 .. k-1`更新相应位置处的计数器`2 .. k-1`并将值重置为零。
3.  `0 .. 2k-1`对于具有值的位置处的任何元素，`k .. 2k-1`更新相应位置处的计数器`k .. 2k-1`并将值重置为零。

该过程的所有迭代一起具有 O(N) 时间复杂度。最后，输入数组完全转换为计数器数组。这里唯一的困难是位置上最多两个计数器的`0 .. 2k-1`值可能大于`k-1`。但这可以通过为每个索引存储两个附加索引并将这些索引处的元素处理为计数器而不是值来缓解。

在生成计数器数组后，我们可以将计数器对相乘（其中对应的索引对总和为`X`）以获得所需的对数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-04T20:31:43.827

字符串排序是 n log n 但是，如果您可以假设数字是有界的（并且您可以，因为您只对总和为某个值的数字感兴趣），您可以使用基数排序。基数排序需要 O(kN) 时间，其中“k”是键的长度。在你的情况下这是一个常数，所以我认为说 O(N) 是公平的。

但是，通常我会使用哈希来解决这个问题，例如

[http://41j.com/blog/2012/04/find-items-in-an-array-that-sum-to-15/](http://41j.com/blog/2012/04/find-items-in-an-array-that-sum-to-15/)

虽然这当然不是线性时间解决方案。

# android - 从一项活动移动时如何以编程方式打开键盘

> ID：14620729
> 
> 赞同：2
> 
> 时间：2013-01-31T07:40:12.730
> 
> 标签：android, android-softkeyboard

当我从第一个活动转到第二个活动时，我正在尝试打开键盘。主活动中有两个按钮 1）如果单击“NotShowKeyboard”按钮，它将在没有键盘的情况下打开 second.java 活动 2）如果单击“ShowKeyboard”按钮，那么它将使用键盘和 EitdText 打开 second.java 活动专注但问题是我不知道该怎么做。我放了一些示例顶部显示键盘，但在“ShowKeyboard”按钮上单击键盘打开并立即消失。

主.java：

```
 NotShowKeyboard.setOnTouchListener(new View.OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {
            if (event.getAction() == MotionEvent.ACTION_DOWN) {
            }

            if (event.getAction() == MotionEvent.ACTION_UP) {
                bundle.putBoolean("show", false);
                Intent start = new Intent(Main.this, Start.class);
                start.putExtras(bundle);
                startActivity(start);
            }

            return false;
        }
    });

    ShowKeyboard.setOnTouchListener(new View.OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {
            if (event.getAction() == MotionEvent.ACTION_DOWN) {
            }

            if (event.getAction() == MotionEvent.ACTION_UP) {
                bundle.putBoolean("show", true);
                Intent start = new Intent(Main.this, Start.class);
                start.putExtras(bundle);
                startActivity(start);
            }

            return false;
        }
    }); 
```

二.java：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
    setContentView(R.layout.start);
    i = getIntent();
    extras = i.getExtras();
    search = (EditText) findViewById(R.id.start_edit);
    search.addTextChangedListener(myTextWatcher);
    if((extras.getBoolean("show"))==true) {
    ((InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE)).toggleSoftInput(InputMethodManager.SHOW_FORCED, InputMethodManager.HIDE_IMPLICIT_ONLY);
    }
    //getting all stuff like buttons imageViews etc.. 
} 
```

当 NotShowButton Clicked 然后这应该打开：

![在此处输入图像描述](../Images/1f5fe5a2487bf1924f52aad9175d5052.png)

当 ShowButton Clicked 然后这应该打开：

![在此处输入图像描述](../Images/8f542d845680004f24bcc7c6582c76e2.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-31T08:00:03.980

隐藏键盘：

```
InputMethodManager imm = (InputMethodManager)getSystemService(
  Context.INPUT_METHOD_SERVICE);
imm.hideSoftInputFromWindow(myEditText.getWindowToken(), 0); 
```

对于显示键盘：

```
InputMethodManager imm = (InputMethodManager)   getSystemService(Context.INPUT_METHOD_SERVICE);
imm.toggleSoftInput(InputMethodManager.SHOW_FORCED, 0); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-31T08:02:09.663

你试过这个吗？

```
getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_VISIBLE); 
```

尝试将此代码放入`onResume()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T07:44:27.003

有时它取决于设备，软键盘是否出现。在我的 Vodafone Smart II 手机上，在我的 Intexo TAB814（8" 显示屏）上没有出现它（3,5" 显示屏），它在那里。相同的应用程序，但不同的结果。它也似乎取决于您使用的 android 版本。(Vodafone smart II -> 2.1.3, Intenso tablet 4.1) 在另一台设备上尝试

# java - 在java中的imap连接期间加载动画

> ID：14620734
> 
> 赞同：0
> 
> 时间：2013-01-31T07:40:20.737
> 
> 标签：java, swing, animation, imap

我正在尝试显示加载动画（一个 gif 文件），同时使用 java 连接并从 gmail imap 服务器获取所有消息，但动画不可见......我的代码如下所示，如果有的话，请帮助我解决方案存在....

```
import java.io.*;
import java.awt.*;
import javax.swing.*;
import javax.mail.*;
import java.awt.event.*;
import javax.mail.*;
import javax.mail.event.*;
import java.util.*;

public class vmail extends JFrame implements ActionListener,MouseMotionListener
{
    Container cp;
    JLabel background,loader;
    ImageIcon ic1,ic2;
    JTextField tuname,tpassword;
    JButton blogin;
    JPanel jp_login;

    public vmail()
    {
        setSize(900,640);
        setTitle("GMAIL CLIENT ");
        setLocation(200,50);

        cp=getContentPane();
        cp.setLayout(null);
        cp.setBackground(Color.white);

        String workingDir = System.getProperty("user.dir");
        workingDir=workingDir.substring(0,14);

        loader=new JLabel("");
        ic2=new ImageIcon(workingDir+"\\images\\progressbar1.gif");
        loader.setIcon(ic2);
        loader.setBounds(230,90,400,400);
        loader.setVisible(false);
        cp.add(loader); 

        jp_login=new JPanel();
        jp_login.setLayout(null);

        tuname=new JTextField(10);
        jp_login.add(tuname);
        tuname.setBounds(604,163,245,30);
        tuname.addMouseMotionListener(this);

        tpassword=new JTextField(10);
        jp_login.add(tpassword);
        tpassword.setBounds(604,224,245,30);
        tpassword.addMouseMotionListener(this);

        blogin=new JButton("");

        blogin.setBounds(605,271,53,29);
        blogin.setOpaque(false);
        blogin.setContentAreaFilled(false);
        blogin.setBorderPainted(false);
        blogin.addActionListener(this);
        blogin.addMouseMotionListener(this);
        jp_login.add(blogin);

        background=new JLabel("");

        System.out.println(workingDir);
        ic1=new ImageIcon(workingDir+"\\images\\background.png");
        background.setIcon(ic1);
        background.setBounds(0,0,900,600);

        jp_login.add(background);

        jp_login.setBounds(0,0,900,600);
        cp.add(jp_login);

        setVisible(true);
        setDefaultCloseOperation(3);
    }

    public static void main(String[] args) 
    {
        UIManager.LookAndFeelInfo info[];
        info=UIManager.getInstalledLookAndFeels();
        String name=info[3].getClassName();

        try
        {
            UIManager.setLookAndFeel(name);
        }  
        catch(Exception e)
        {
            System.out.println(e);
        }

        vmail v=new vmail();

    }

    public void actionPerformed(ActionEvent ae)
    {
        if(ae.getSource()==blogin)
        {

            if(tuname.getText().equals("")||tpassword.getText().equals(""))
            {
                JOptionPane.showMessageDialog(this,"Incorrect Data Provided");
            }
            else
            {
                loader.setVisible(true);

                Properties props = System.getProperties();
                props.setProperty("mail.store.protocol", "imaps");
                try 
                {

                        Session session = Session.getDefaultInstance(props, null);
                        Store store = session.getStore("imaps");
                          try
                          {
                            store.connect("imap.gmail.com", tuname.getText(),tpassword.getText());
                            System.out.println("The Store connected is :  "+store);
                          }
                          catch(Exception e)
                          {
                            loader.setVisible(false);
                            JOptionPane.showMessageDialog(this,"Invalid User..");
                            System.out.println("Cannot connect error \n\n"+e);
                          }

                        vmail_in v=new vmail_in(store);
                        loader.setVisible(false);
                        this.setVisible(false);

                }
                catch(Exception e)
                {
                        loader.setVisible(false);
                    System.out.println("Setup Connection Error \n\n"+e);
                }
                loader.setVisible(false);   

            }
        }
    }

    public void mouseMoved(MouseEvent e) 
    {
                    if(e.getSource()==tuname)
                      tuname.setCursor(new Cursor(Cursor.HAND_CURSOR));
                    if(e.getSource()==tpassword)
                      tpassword.setCursor(new Cursor(Cursor.HAND_CURSOR)); 
                    if(e.getSource()==blogin)
                     blogin.setCursor(new Cursor(Cursor.HAND_CURSOR));      

    }

    public void mouseDragged(MouseEvent e) 
        {  }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T08:54:34.557

那是因为您试图在事件调度线程（又名 EDT）的上下文中建立与 IMAP 存储的连接。

EDT 的职责之一是发送绘制请求，因此当您发送它时，它无法响应任何重绘更新（或用户输入）。

在启动连接动画后，您需要使用某种后台线程来执行连接过程。

我建议你看一下[Concurrency in Swing](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)并特别注意该`SwingWorker`部分

# mysql - 在jsp中更新mysql表中的行

> ID：14620735
> 
> 赞同：0
> 
> 时间：2013-01-31T07:40:27.003
> 
> 标签：mysql, forms, jsp, sql-update

我正在尝试更新中的行`mysql table`，我正在使用`html form`数据插入。在 html 表单属性中，我正在`value`使用数据库中的现有数据。

编辑.jsp

```
<form action="Update.jsp">
                <%  Class.forName("com.mysql.jdbc.Driver").newInstance();
                    Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/test", "root", "root");
                    Statement st = con.createStatement();
                    ResultSet rs = st.executeQuery("select u.login,i.name,i.surname,i.age,i.tel,i.email,a.street,a.town,a.zip,ul.name,t.name from users u join info i on i.user_id=u.user_id join user_level ul on ul.ulevel=u.ulevel join teams t on t.team_id=u.team_id join adress a on a.info_id=i.info_id where u.login='" + session.getAttribute("uzivatel") + "'");
                    while (rs.next()) {
                %>

                <div class="well well-large">
                    <font size="2"><b>Welcome, </b></font><font color="RED"><i><%= session.getAttribute("uzivatel")%></i></font><br>
                    <b>Name:</b> <input type="text" name="name" value="<%= rs.getString(2)%>"><input type="text" name="surname" value="<%= rs.getString(3)%>"> <br>
                    <b>Age:</b> <input type="text" name="age" value="<%= rs.getString(4)%>"><br>
                    <b>Telephone:</b> <input type="text" name="tel" value="0<%= rs.getString(5)%>"><br>
                    <b>E-mail:</b> <input type="text" name="email" value="<%= rs.getString(6)%>"><br>
                    <b>Adress:</b> <input type="text" name="street" value="<%= rs.getString(7)%>"><input type="text" name="town" value="<%= rs.getString(8)%>"><input type="text" name="zip" value="<%= rs.getString(9)%>"><br>
                    <b>User level:</b> <%= rs.getString(10)%><br>
                    <b>Team:</b> <%= rs.getString(11)%><br>
                    <input type="submit" name="Submit" value="Update" />
                </div>
            </form> 
```

更新.jsp

```
<%
                String name = request.getParameter("name");
                String surname = request.getParameter("surname");
                String age = request.getParameter("age");
                String telephone = request.getParameter("tel");
                String email = request.getParameter("email");
                String street = request.getParameter("street");
                String town = request.getParameter("town");
                String zip = request.getParameter("zip");

                try {
                    Connection conn = null;
                    Class.forName("com.mysql.jdbc.Driver").newInstance();
                    conn = DriverManager.getConnection("jdbc:mysql://localhost:3306/test", "root", "root");
                    Statement st1 = null;
                    st1 = conn.createStatement();
                    System.out.println(session.getAttribute("uzivatel"));
                    st1.executeUpdate("UPDATE users JOIN info ON users.user_id = info.user_id"
                            + " JOIN adress ON info.info_id = adress.info_id"
                            + "SET info.name = '"+name+"',info.surname = '"+surname+"',"
                            + "info.age = '"+age+"',info.tel = '"+telephone+"',info.email = '"+email+"',"
                            + "adress.street = '"+street+"',adress.town = '"+town+"',adress.zip = '"+zip+"',"
                            + "WHERE users.login ='" + session.getAttribute("uzivatel") + "'  ");
                    response.sendRedirect("AdministrationControlPanel.jsp");
                } catch (Exception e) {
                    System.out.println(e.getMessage());
                }
            %> 
```

当我按下提交按钮时，它会将我重定向到`Update.jsp`并且没有任何改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T08:01:48.323

您的查询存在问题，这就是您没有得到任何结果的原因。当您将字符串分成不同的行时，请适当地留出空间。system.out.println() 将在控制台上显示消息而不是在页面上

```
st1.executeUpdate("UPDATE users JOIN info ON users.user_id = info.user_id"
                        + " JOIN adress ON info.info_id = adress.info_id "
                        + "SET info.name = '"+name+"',info.surname = '"+surname+"', "
                        + "info.age = '"+age+"', info.tel = '"+telephone+"', info.email = '"+email+"',"
                        + "adress.street = '"+street+"',adress.town = '"+town+"',adress.zip = '"+zip+"', "
                        + "WHERE users.login ='" + session.getAttribute("uzivatel") + "'  "); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T08:10:45.120

最好使用 jQuery 而不是调用页面 update.jsp。当您使用 jQuery 时，您可以使用参数将数据发送到 update.jsp 页面并从该页面获取响应并将其打印到您的页面中，即使您可以从 jQuery 中获取所有表数据

这很简单希望这会对你有所帮助.. 示例示例有以下 url

演示
[http://www.roseindia.net/tutorial/jquery/jqDatabaseConnect.html](http://www.roseindia.net/tutorial/jquery/jqDatabaseConnect.html)

[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

# android - Android 设备选择器显示我的设备，但我的应用程序无法在我的手机上启动！:(

> ID：14620744
> 
> 赞同：1
> 
> 时间：2013-01-31T07:41:06.283
> 
> 标签：android

我的设备在 Android 设备选择器上显示为：

序列号——Ige-vm670-A0000028F1773B

AVD 名称——不适用

目标——2.2.1（旁边有一个绿色复选标记！）

状态——在线

一切似乎都很好..所以，我按下设备选择器屏幕右下角的“确定”按钮。当我这样做时，设备选择器关闭并且eclipse中的启动栏最终完成，但是应用程序永远不会在我的手机上启动！:(。我错过了什么吗？我尝试使用不同的 USB 电缆，从 USB 3.0 切换，并检查我的手机上是否有足够的内存，但似乎没有任何效果 :(。请帮助这个新手！！我会非常感谢它!! 另外，我正在 Windows 8 中运行 Eclipse。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T08:12:43.620

以下步骤可能会对您有所帮助

1）重新启动您的设备

2）转到应用程序设置并启用USB调试。

3) 还允许其他应用程序在您的设备上运行。

4）确保设备状态在android设备选择器上在线。

5）确保您的设备出现在 android Eclipse 的设备列表中。

如果上述步骤对您没有帮助，请尝试在模拟器上运行您的项目。如果模拟器无法启动您的项目，那么您需要查看 android 控制台

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-17T10:55:32.413

启用 SD 卡访问可能会导致无法连接到设备。请尝试打开 MTP 而不是 PTP 或 SD 卡

# xpath - 所有嵌套文本的 XPath，“n”个嵌套标签的文本除外

> ID：14620745
> 
> 赞同：0
> 
> 时间：2013-01-31T07:41:07.810
> 
> 标签：xpath

我有以下html。

```
<div id="content">
   <h3>Title</h3>
   <p>Some stuff</p>
   <p>other stuff</p>
   <p>other other stuff</p>
   <p>unnecessary stuff</p>
   <p>other unnecessary stuff</p>
</div> 
```

到目前为止，我已经写了这个表达式。

```
//div[@id="content"]//text() 
```

哪个有效，但我想要的不是提取最后两个`<p>`元素的文本，因为那是不必要的。我试着写这个...

```
//div[@id="content"]/p[not(position() > last() - 2)]//text() 
```

没有按预期工作。然后我尝试了这个...

```
//div[@id="content"]/[not(self::p[position() > last() - 2])]//text() 
```

这也没有奏效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T08:42:55.730

此表达式返回您感兴趣的文本节点：

```
//div[@id="content"]/*[not(self::p and position() > last() - 2)]//text() 
```

你`*`在`/`.

# android - 在 onClickListener 中处理 onTouch 方法

> ID：14620747
> 
> 赞同：0
> 
> 时间：2013-01-31T07:41:27.457
> 
> 标签：android, touch-event, onclicklistener

我想要做的是当用户按下 listView 中的某个位置时，我想看看他们是在扔视图（扔掉它）还是只是点击它（调用 onClickListener()）

我已经为我的课程设置了所有内容，但我的问题在于我无法在 listView 中传递 MotionEvent，或者我只是不知道如何传递。

目前这就是我所拥有的。

有没有办法在不覆盖 dispatchTouchEvents() 的情况下传递 MotionEvent？

```
Main_screen_listView.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view, final int position,
                    long arg3) {
                    //go to assignments or flashcards.
                    onTouchHandler myOnTouch = new onTouchHandler(Main_screen.this, position, classList);
                    //Right here is the problem!!!!!!!! I need to pass something other than null

                    MotionEvent ev = null;
                    listAdapter.notifyDataSetChanged();
                    classList = myOnTouch.motionHandler(ev, position, view);

                    AlertDialog.Builder alertBox = new AlertDialog.Builder(Main_screen.this);
                    alertBox.setTitle("Options")
                    .setPositiveButton("Assignments", new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int which) {
                            Intent currentAssignments = new Intent(Main_screen.this, assignments.Assignments.class);
                            currentAssignments.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                            currentAssignments.putExtra("position", position);
                            startActivity(currentAssignments);
                        }
                    })
                    .setNegativeButton("FlashCards", new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int which) {
                            Intent currentFlashCards = new Intent(Main_screen.this, flashCards.FlashCard.class);
                            currentFlashCards.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                            currentFlashCards.putExtra("position", position);
                            startActivity(currentFlashCards);
                        }
                    })
                    .show();
            }
        }); 
```

这是我的 onTouchHandler 类

```
 private class onTouchHandler extends View {

        private ArrayList<String> transferredList;
        public ArrayList<String> removeListItem(View rowView, final int position) {
            final Animation animation = AnimationUtils.loadAnimation(
                    Main_screen.this, android.R.anim.slide_out_right);
                rowView.startAnimation(animation);
                Handler handle = new Handler();
                handle.postDelayed(new Runnable() {
                    @SuppressLint({ "NewApi", "NewApi" })
                    @Override
                    public void run() {
                        transferredList.remove(position);
                        animation.cancel();
                    }
                }, 1000);
                return transferredList;
        }

        public ArrayList<String> motionHandler(MotionEvent event, int position, View rowView) {
            float startY;
            float stopX;
            float stopY;
            float finalX;
            float finalY;

            if (event.getAction() == MotionEvent.ACTION_DOWN) {
                startX = event.getX();
                startY = event.getY();
                Toast.makeText(Main_screen.this, String.valueOf(startX), Toast.LENGTH_SHORT).show();
            }
            else if (event.getAction() == MotionEvent.ACTION_UP) {
                stopX = event.getX();
                stopY = event.getY();
                finalX = stopX - startX;
                if (finalX > 200) {
                    Toast.makeText(Main_screen.this, String.valueOf(finalX), Toast.LENGTH_SHORT).show();
                    transferredList = removeListItem(rowView, position);
                }
            }

            return transferredList; 
        }

        public onTouchHandler(Context context, ArrayList<String> mainListView) {
            super(context);
            transferredList = mainListView;
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:14:03.390

更好的解决方案是覆盖`getView()`您的`Adapter`，然后将`onTouchListener()`返回的 View 设置为您想要的。

# java - 选项菜单无法覆盖？

> ID：14620750
> 
> 赞同：0
> 
> 时间：2013-01-31T07:41:41.480
> 
> 标签：java, android, eclipse, menu, options

我试图让我的选项菜单在我的主要活动中打开。但是，它不会覆盖允许我这样做。覆盖注释将不起作用并实现超级。也不会工作。有想法该怎么解决这个吗？先感谢您。

```
package com.carouseldemo.main;

import android.app.Activity;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.ContextMenu;
import android.view.ContextMenu.ContextMenuInfo;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.View;
import android.widget.TextView;
import android.widget.Toast;

import com.carouseldemo.controls.Carousel;
import com.carouseldemo.controls.CarouselAdapter;
import com.carouseldemo.controls.CarouselAdapter.AdapterContextMenuInfo;
import com.carouseldemo.controls.CarouselAdapter.OnItemClickListener;
import com.carouseldemo.controls.CarouselAdapter.OnItemSelectedListener;
import com.carouseldemo.controls.CarouselItem;

public class MainActivity extends Activity {
@Override
public void onCreateContextMenu(ContextMenu menu, View v,
        ContextMenuInfo menuInfo) {
    // Just prepare ourself for unexpected arguments...

    if (menuInfo == null) {
        return;
    }
    if (!(menuInfo instanceof AdapterContextMenuInfo)) {
        return;
    }

    AdapterContextMenuInfo mi = (AdapterContextMenuInfo) menuInfo;

    switch (mi.position) {
    case 0:

        menu.add("Product 1");

        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        break;
    case 1:
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        break;
    case 2:
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        break;
    case 3:
        menu.add("mouse menu");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        break;
    case 4:
        menu.add("panda menu");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        break;
    case 5:
        menu.add("rabbit menu");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        break;
    default:
        break;
    }
    super.onCreateContextMenu(menu, v, menuInfo);
}

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    final Carousel carousel = (Carousel) findViewById(R.id.carousel);
    carousel.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(CarouselAdapter<?> parent, View view,
                int position, long id) {
            CarouselItem item = (CarouselItem) parent.getChildAt(position);

            // HERE: Force context menu
            carousel.showContextMenuForChild(item);
            Toast.makeText(
                    MainActivity.this,
                    String.format("%s has been clicked",
                            ((CarouselItem)     parent.getChildAt(position))
                                    .getName()), Toast.LENGTH_SHORT).show();
        }

        @Override
        public void onCreateContextMenu(ContextMenu menu, View v,
                ContextMenuInfo menuInfo) {

            // TODO Auto-generated method stub

        }

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            super.onCreateOptionsMenu(menu);
            MenuInflater inflater = getMenuInflater();
            inflater.inflate(R.menu.testmenu1, menu);
            return true;

        }
    });

    carousel.setOnItemSelectedListener(new OnItemSelectedListener() {

        public void onItemSelected(CarouselAdapter<?> parent, View view,
                int position, long id) {

            final TextView txt = (TextView) (findViewById(R.id.selected_item));

            switch (position) {
            case 0:
                txt.setText("The cat (Felis catus), also known as the domestic cat or housecat to distinguish it from other felids and felines, is a small, usually furry, domesticated, carnivorous mammal that is valued by humans for its companionship and for its ability to hunt vermin and household pests. Cats have been associated with humans for at least 9,500 years, and are currently the most popular pet in the world. Owing to their close association with humans, cats are now found almost everywhere in the world.");
                break;
            case 1:
                txt.setText("The hippopotamus (Hippopotamus amphibius), or hippo, from the ancient Greek for \"river horse\" (), is a large, mostly herbivorous mammal in sub-Saharan Africa, and one of only two extant species in the family Hippopotamidae (the other is the Pygmy Hippopotamus.) After the elephant, the hippopotamus is the third largest land mammal and the heaviest extant artiodactyl.");
                break;
            case 2:
                txt.setText("A monkey is a primate, either an Old World monkey or a New World monkey. There are about 260 known living species of monkey. Many are arboreal, although there are species that live primarily on the ground, such as baboons. Monkeys are generally considered to be intelligent. Unlike apes, monkeys usually have tails. Tailless monkeys may be called \"apes\", incorrectly according to modern usage; thus the tailless Barbary macaque is called the \"Barbary ape\".");
                break;
            case 3:
                txt.setText("A mouse (plural: mice) is a small mammal belonging to the order of rodents. The best known mouse species is the common house mouse (Mus musculus). It is also a popular pet. In some places, certain kinds of field mice are also common. This rodent is eaten by large birds such as hawks and eagles. They are known to invade homes for food and occasionally shelter.");
                break;
            case 4:
                txt.setText("The giant panda, or panda (Ailuropoda melanoleuca, literally meaning \"black and white cat-foot\") is a bear native to central-western and south western China.[4] It is easily recognized by its large, distinctive black patches around the eyes, over the ears, and across its round body. Though it belongs to the order Carnivora, the panda's diet is 99% bamboo.");
                break;
            case 5:
                txt.setText("Rabbits (or, colloquially, bunnies) are small mammals in the family Leporidae of the order Lagomorpha, found in several parts of the world. There are eight different genera in the family classified as rabbits, including the European rabbit (Oryctolagus cuniculus), cottontail rabbits (genus Sylvilagus; 13 species), and the Amami rabbit (Pentalagus furnessi, an endangered species on Amami, Japan)");
                break;
            }

        }

        public void onNothingSelected(CarouselAdapter<?> parent) {
        }

    });

    registerForContextMenu(carousel);
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T08:24:59.703

**修订**对不起我的错误答案；我看的不够近。

您现在发布的代码的问题是您的 onCreateOptionsMenu() 方法定义在错误的范围内。它必须像下面这样。

```
public class MainActivity extends Activity {
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        super.onCreateOptionsMenu(menu);
        // your code...
        return ... // true if you want the menu to be displayed; false otherwise
    }
    // ... other class members
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T07:50:07.543

我想你不见了

返回 super.onCreateOptionsMenu(menu); 而不是返回true；

# java - 如何向所有登录用户发送通知

> ID：14620758
> 
> 赞同：7
> 
> 时间：2013-01-31T07:42:37.297
> 
> 标签：java, spring, hibernate, spring-mvc, spring-security

我在 MySQL 应用程序上有一个 Spring MVC、Spring Thymeleaf、Spring Security 和 Hibernate。我的任务是通知所有当前登录的用户，如果他们正在查看的页面有新数据，以便用户可以刷新并获取一组新数据。

我猜我可以将所有登录的用户存储在 ApplicationScope 会话中，然后以某种方式通知他们。但我以前从未这样做过，也不知道它有多安全。

任何人都可以就如何做到这一点提出任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T21:13:27.957

您需要推/拉架构（以启动从服务器端发送消息）。您使用的所有 Spring 框架都无法做到这一点。查看气氛[https://github.com/Atmosphere/atmosphere](https://github.com/Atmosphere/atmosphere)

然后，每当新数据被持久化（您的 DAO 层可以触发此操作）时，您只需通过 Atmosphere servlet 将新消息推送给所有订阅用户。Atmosphere 使用“频道”，因此您可以为用户所在的页面使用预定义的频道名称，所有用户都会收到消息。您还可以使用 Spring 安全性保护 Atmosphere servlet，因此未经身份验证的用户将无法获得通知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T15:23:41.647

根据上述评论，您可以使用以下方式实现拉取架构：

将所有事件存储在一个中央位置，可供所有会话（单例、数据库等）访问。确保有一个顺序 ID。

存储在会话中检索到的最新事件 ID。根据需要，查询 ID 大于会话中存储的最新 ID 的事件。

希望这可以帮助。

# java - J2Me 左右滑动图像

> ID：14620768
> 
> 赞同：0
> 
> 时间：2013-01-31T07:42:58.297
> 
> 标签：java, mobile, java-me, swipe

我正在学习移动 Java 程序，我正在尝试创建一个程序，我可以通过从左到右或从右到左拖动来在屏幕上显示图像。

我有触摸屏手机，没有硬件键盘。

我正在尝试下面的代码，其中我有两种形式，当我在屏幕上滑动手指时，我想显示另一种形式。

```
 import java.io.IOException;

import javax.microedition.lcdui.*;
import javax.microedition.midlet.*;

public class ImageDisplay extends MIDlet{
 private Display display;
  private Form form1,form2;
  private Image myImage1,myImage2;

  public void startApp(){
      display = Display.getDisplay(this);
      form1 = new Form ("Image Display");
      form2 = new Form("Second Image");
      try {
        myImage1 = Image.createImage("/bgscaled.jpg");
        myImage2 = Image.createImage("/spla77sh.jpg");

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
      form1.append(myImage1);
      form2.append(myImage2);
      display.setCurrent(form1);
      display.setCurrent(form2);
  }

  public void pauseApp(){

  }

public void destroyApp(boolean unconditional){
      notifyDestroyed();

  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:52:47.177

`LCDUI Form`当发生屏幕滑动时，您无法收到通知。
您可以添加“下一个”和“上一个”按钮，并在单击按钮时更改表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-04T21:29:41.857

您将需要使用[Canvas](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/)而不是`Form`屏幕，因为`Canvas`有各种方法（例如`pointerDragged`）可用于确定触摸、释放和拖动操作。

但是，使用`Canvas`可能需要做很多工作（因为您的代码将负责在显示器上绘制的每个像素）。但是，您可能会发现[J2ME Polish](http://www.j2mepolish.org/)对于将您的`Form`UI 转换为`Canvas`. （我不确定，但 J2ME Polish 也可能会处理您正在寻找的滑动行为。）

# javascript - 在 javascript 中解压 gzip 和 zlib 字符串

> ID：14620769
> 
> 赞同：31
> 
> 时间：2013-01-31T07:43:03.633
> 
> 标签：javascript, gzip, zlib, compression, tmx

我想从 tmx 文件中获取压缩层数据。谁知道在 javascript 中解压缩 gzip 和 zlib 字符串的库？我尝试[zlib](https://github.com/imaya/zlib.js)但它对我不起作用。例如，tmx 文件中的图层数据为：

```
 <data encoding="base64" compression="zlib">
       eJztwTEBAAAAwqD1T20JT6AAAHgaCWAAAQ==
  </data> 
```

我的 JavaScript 代码是

```
var base64Data = "eJztwTEBAAAAwqD1T20JT6AAAHgaCWAAAQ==";
var compressData = atob(base64Data);
var inflate = new Zlib.Inflate(compressData);
var output = inflate.decompress(); 
```

它运行时显示消息错误“不支持的压缩方法”。但我尝试使用在线工具作为[http://i-tools.org/gzip](http://i-tools.org/gzip)解压缩，它返回正确的字符串。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2014-03-26T23:50:36.203

[Pako](https://github.com/nodeca/pako)是一个完整而现代的`Zlib`港口。

这是一个非常简单的示例，您可以从那里开始工作。

获取[pako.js](https://raw.githubusercontent.com/nodeca/pako/master/dist/pako.js)，你可以像这样解压 byteArray：

```
<html>
<head>
  <title>Gunzipping binary gzipped string</title>
  <script type="text/javascript" src="pako.js"></script>
  <script type="text/javascript">

    // Get datastream as Array, for example:
    var charData    = [31,139,8,0,0,0,0,0,0,3,5,193,219,13,0,16,16,4,192,86,214,151,102,52,33,110,35,66,108,226,60,218,55,147,164,238,24,173,19,143,241,18,85,27,58,203,57,46,29,25,198,34,163,193,247,106,179,134,15,50,167,173,148,48,0,0,0];

    // Turn number array into byte-array
    var binData     = new Uint8Array(charData);

    // Pako magic
    var data        = pako.inflate(binData);

    // Convert gunzipped byteArray back to ascii string:
    var strData     = String.fromCharCode.apply(null, new Uint16Array(data));

    // Output to console
    console.log(strData);

  </script>
</head>
<body>
    Open up the developer console.
</body>
</html> 
```

运行示例：http: [//jsfiddle.net/9yH7M/](http://jsfiddle.net/9yH7M/)

或者，您可以在发送数组之前对数组进行 base64 编码，因为数组在以 JSON 或 XML 格式发送时会占用大量开销。同样解码：

```
// Get some base64 encoded binary data from the server. Imagine we got this:
var b64Data     = 'H4sIAAAAAAAAAwXB2w0AEBAEwFbWl2Y0IW4jQmziPNo3k6TuGK0Tj/ESVRs6yzkuHRnGIqPB92qzhg8yp62UMAAAAA==';

// Decode base64 (convert ascii to binary)
var strData     = atob(b64Data);

// Convert binary string to character-number array
var charData    = strData.split('').map(function(x){return x.charCodeAt(0);});

// Turn number array into byte-array
var binData     = new Uint8Array(charData);

// Pako magic
var data        = pako.inflate(binData);

// Convert gunzipped byteArray back to ascii string:
var strData     = String.fromCharCode.apply(null, new Uint16Array(data));

// Output to console
console.log(strData); 
```

运行示例：http: [//jsfiddle.net/9yH7M/1/](http://jsfiddle.net/9yH7M/1/)

要更高级，这里是[`pako`API 文档](http://nodeca.github.io/pako/)。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-05T09:35:05.037

[我可以通过zlib](https://github.com/imaya/zlib.js)解决我的问题。我修复我的代码如下

```
var base64Data = "eJztwTEBAAAAwqD1T20JT6AAAHgaCWAAAQ==";
var compressData = atob(base64Data);
var compressData = compressData.split('').map(function(e) {
    return e.charCodeAt(0);
});
var inflate = new Zlib.Inflate(compressData);
var output = inflate.decompress(); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-05-14T15:08:17.483

对于使用 Ruby on Rails 的任何人，他们希望将压缩的编码数据发送到浏览器，然后通过浏览器上的 Javascript 解压缩，我将上述两个出色的答案结合到以下解决方案中。*这是我的应用程序控制器中的 Rails 服务器代码，它在通过@variable*将字符串发送到浏览器之前压缩和编码字符串到*.html.erb*文件：

 *```
require 'zlib'
require 'base64'

    def compressor (some_string)
        Base64.encode64(Zlib::Deflate.deflate(some_string))
    end 
```

这是使用 pako.min.js 的 Javascript 函数：

```
function uncompress(input_field){
    base64data = document.getElementById(input_field).innerText;
    compressData = atob(base64data);
    compressData = compressData.split('').map(function(e) {
        return e.charCodeAt(0);
    });
    binData = new Uint8Array(compressData);
    data = pako.inflate(binData);
    return String.fromCharCode.apply(null, new Uint16Array(data));
} 
```

这是对该 uncompress 函数的 javascript 调用，它想要对存储在隐藏 HTML 字段中的数据进行解编码和解压缩：

```
my_answer = uncompress('my_hidden_field'); 
```

这是 Rails *application.js*文件中调用*pako.min.js*的条目，它位于*/vendor/assets/javascripts*目录中：

```
//= require pako.min 
```

我从这里得到了*pako.min.js*文件：

[https://github.com/nodeca/pako/tree/master/dist](https://github.com/nodeca/pako/tree/master/dist)

无论如何，一切都在我的最后！:-)*

# java - EJB 中的 Facades 是否与基于 Spring 的 Web 应用程序中的服务相同

> ID：14620772
> 
> 赞同：1
> 
> 时间：2013-01-31T07:43:06.627
> 
> 标签：java, spring, jakarta-ee, architecture, ejb

我参与了几个基于 Spring 的 Web 应用程序项目 - 并且自己编写了一个数量。通常我们（粗略地说）有以下文件夹来按类别划分我们的类，例如`dao`，`models`（`web`对于控制器，如果我们使用 Spring MVC 或 JSF 的支持 bean）和**服务**- 在这里我们保留我们认为的业务逻辑（甚至有时这里的类只是将方法转发给 dao）。

现在我面临着 EJB 应用程序的开发——我知道无论如何我都会有一些`web`课程`model`。我也可以使用专用`dao`层或将数据访问权限放入`facades`（我更喜欢专用文件夹，尽管它会增加详细程度）。

但我不清楚**门面**是否正是放置业务逻辑的地方，或者我应该`services`为它添加文件夹并使用`facades`更像`dao`（消除`dao`自己）。

我也很高兴能对 EJB 应用程序架构的提示进行简短而全面的编译。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T08:15:36.757

我会采用与 EJB 类似的设置，就像您对 Spring 所做的那样。你有你的 web 包（MVC 的东西），然后是包含大部分业务逻辑的服务层，然后是包含基本 CRUD 操作和一些数据库查询的 DAO 层。

在这种情况下，您可以使用不需要数据库的快速单元测试来测试会话 bean 中可能复杂的业务逻辑，并且可以在此处模拟 DAO 访问。然后，您可以对您的 DAO 层进行相对简单的测试，因此需要数据库的测试数量（即相当慢）会更少。

通常我会调用`facade`一组会话 bean，它们提供简单的方法来通过例如 Web 服务来操作系统。这些 bean 将使用正常的服务层 bean。只有一个 web 层，没有集成层，我看不到创建额外`facade`层的理由。

# iphone - 在iOS6中从UIWebView播放视频到横向时自动旋转

> ID：14620777
> 
> 赞同：1
> 
> 时间：2013-01-31T07:43:38.110
> 
> 标签：iphone, uiwebview, ios6, autorotate, ios6.1

我有四个视图控制器，并已添加到 appDelegate 中的导航控制器中。

我只支持纵向模式，它在 iOS6 中工作。其中一个视图控制器具有 webview，它正在加载 httprequest 并显示网页。但是，在全屏播放来自 webview 的任何视频时，我的视频没有自动旋转。我只想在播放视频时添加横向支持。完成后我想回到纵向模式。

如何为 iOS6 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:36:19.303

您应该在您的 appDelegate 中使用窗口 setRootViewCONtroller（对于 IOS 6）

然后你应该实现 IOS 6 自动旋转，你会看到你的自动旋转方法之一被调用：shouldAutoRotate。您应该在视频播放之前返回 NO，然后在视频播放时返回 YES。

除非发生某些事情，否则我一直在使用另一个纵向的应用程序时遇到同样的问题。

# xml - JAXB 如何在 XmlElementRef 处传递 XmlRootElement 名称

> ID：14620782
> 
> 赞同：2
> 
> 时间：2013-01-31T07:43:56.580
> 
> 标签：xml, jaxb, annotations

我试图找到适合我的问题的解决方案，但没有成功。这是问题所在：

我有以下部分 XML 结构（我对此没有影响）

```
<users>
  <array>
    <item>
      <username></username>
      <email></email>
    </item>
    ...
    <item>
      ...
    </item>
  <array>
</users> 
```

我对 XML 的那一部分有以下类结构：

```
@XmlRootElement(name = "users")
public class XmlUsers extends XmlData
{
    @XmlElement
    public XmlArray array;
}

@XmlRootElement(name = "array")
public class XmlArray
{
    @XmlElementRef(name = "item")
    public List<XmlItemData> items;
}

@XmlSeeAlso({ XmlUserData.class })
public abstract class XmlItemData
{
}

@XmlRootElement
public class XmlUserData extends XmlItemData
{
...
} 
```

我想用“项目”或“用户”标签包装 XmlUserData，所以我不想注释 XmlUserData 根元素名称。

如何在 XmlArray 级别执行此操作？如您所见，我试图命名 XmlElementRef，但这会导致项目为空...

**编辑：** **我猜我不小心删除了用户的评论（我不记得他/她的名字）。请原谅我。**它是关于使用 XmlElement 而不是 XmlElementRef。它与在 XmlItemData 类上添加的 XmlTransient 一起提供了帮助。但是，现在我得到了空元素列表。这是我的 XmlUserData 类：

```
@XmlRootElement
public class XmlUserData extends XmlItemData
{
    @XmlElement(name = "username")
    public String        username;

    @XmlElement(name = "first_name")
    public String        firstName;

    @XmlElement(name = "last_name")
    public String        lastName;

    @XmlElementWrapper(name = "links", required = false)
    @XmlElements({ @XmlElement(name = "delete"), @XmlElement(name = "next"),
            @XmlElement(name = "self"), @XmlElement(name = "users"),
            @XmlElement(name = "watched") })
    public List<XmlLink> links;

    @XmlElement(name = "url")
    public String        url;

    @XmlElement(name = "id")
    public int           id;

    @XmlElement(name = "fullname")
    public String        fullname;

    @XmlElement(name = "email")
    public String        email;
} 
```

**EDIT2：** 未知用户，请您再次发布您的回复，以便我可以将其标记为有用的回复吗？

而且我仍然对 XmlItemData 元素列表有问题，它应该是 XmlUserData 类型，但它们是空的......任何想法，我做错了什么......？

提前致谢！

**EDIT3：** 我已经用 JAXB 编组了我的类结构，如下所示：

```
<rsp>
  <total_results>0</total_results>
  <users>
    <array>
      <item xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xmlUserData">
        <id>0</id>
      </item>
    </array>
  </users>
</rsp> 
```

解组器是否可以预期项目标签处的这一行？它的存在是否对解组消息有任何影响......？

```
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xmlUserData" 
```

# c++ - 自动源代码替换

> ID：14620783
> 
> 赞同：1
> 
> 时间：2013-01-31T07:44:01.617
> 
> 标签：c++

我正在寻找一种工具、正则表达式或其他魔法来进行一些繁重的代码替换。

理想情况下，我可以通过`new`调用保留参数的函数来替换运算符的所有实例。

我有哪些选择？

更新：

例子：

```
ClassA* a = new ClassA<int>(1,2,3,4,new ClassB(1,2),"horrible"); 
```

应转换为：

```
ClassA* a = FUNCTION(ClassA<int>(1,2,3,4,FUNCTION(ClassB(1,2)),"horrible")); 
```

FUNCTION 将执行以下操作：

```
FUNCTION(...) Debug(new __VA_ARGS__, __FILE__) 
```

一个简单的替换几乎就可以了，它只缺少最后一个`)`.

**更新：**

我最初的想法是使用宏来跟踪一些附加信息，例如`__FILE__`，将其存储在 std 容器中，然后调用 new. 如果容器调用 new 会发生什么？如何`__FILE__`在重载的 new 中添加？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T08:25:42.500

您没有提到为什么要这样做，但我确实想知道重载 new 运算符是否对您来说是一个更好的选择。

[为什么要替换默认的 new 和 delete 运算符？](https://stackoverflow.com/questions/7149461/why-would-one-replace-default-new-and-delete-operators)

**编辑**

以下链接也可能是相关的：

[在 C++ 中重载 new 和 delete](https://stackoverflow.com/questions/3509214/overloading-new-and-delete-in-c)

[覆盖有关调用者的“新”和记录数据](https://stackoverflow.com/questions/1395202/overriding-new-and-logging-data-about-the-caller)

[替换 C++ 运算符 new 的宏](https://stackoverflow.com/questions/619467/macro-to-replace-c-operator-new)

[http://blogs.msdn.com/b/calvin_hsia/archive/2009/01/19/9341632.aspx](http://blogs.msdn.com/b/calvin_hsia/archive/2009/01/19/9341632.aspx)

似乎这是许多人以前解决过的问题。谷歌搜索`overload|override new __line__ __file__`将引发更多可能性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T07:52:26.140

您的一些更可行的选择：

如果只有几个文件，您可以简单地在 IDE 中浏览它们并使用 CTRL+H 查找和替换（谢谢 Mark Garcia）

如果文件很多，您可以编写一个 Perl 脚本来查找和替换正则表达式（我建议 Perl 只是因为我发现正则表达式在其中非常简单）这实际上可以在一行中完成

```
perl -p -i -e 's/oldstring/newstring/g' `find ./ -name *.cpp` 
```

从命令行运行此命令将在当前目录中的每个 .cpp 文件中用新字符串替换旧字符串的所有实例。老实说，如果您只是用另一个字符串替换所有 'new' 实例，这可能是许多文件最直接的方法。尽管这种情况不太可能发生，但您始终可以将旧字符串更改为您想要的任何内容（例如将“新对象”替换为 createObject）

# android - Android实网连接状态

> ID：14620789
> 
> 赞同：0
> 
> 时间：2013-01-31T07:44:32.710
> 
> 标签：android, android-networking

如何了解设备的真实连接状态。在我的应用程序中，我注册了 ConnectivityManager.CONNECTIVITY_ACTION 意图。我收到意图，他们说设备上有连接：

```
ConnectivityManager.EXTRA_NO_CONNECTIVITY from intent == false

NetworkInfo ni = connectivityManager.getActiveNetworkInfo();
ni.isAvailable() == true
ni.isConnected() == true 
```

没错，例如，设备已连接到 wifi 点并且信号强度正常，但应用程序无法连接到服务器，因为互联网访问当前在提供商端中断。看起来设备知道这个问题，因为它在状态栏上显示了灰色的 wifi 图标。

如何了解互联网连接的真实状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:47:52.687

您可以使用它来确定您是否已连接：

```
final ConnectivityManager connectManager = (ConnectivityManager)ctx.getSystemService(Context.CONNECTIVITY_SERVICE);

final NetworkInfo mobile = connectManager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);
final NetworkInfo wifi   = connectManager.getNetworkInfo(ConnectivityManager.TYPE_WIFI  );

// Return true if connected, either in 3G or wi-fi
return ((mobile != null && mobile.getState() == NetworkInfo.State.CONNECTED) || 
        (wifi   != null && wifi.getState()   == NetworkInfo.State.CONNECTED)   );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T07:48:13.833

您可以使用以下代码检查您的设备互联网连接。我希望它会帮助你。

> ```
>  public static boolean IsNetConnected(Context mContext)
> {
>     boolean NetConnected = false;
>     try
>     {
>         ConnectivityManager connectivity =
>                 (ConnectivityManager) mContext.getSystemService(Context.CONNECTIVITY_SERVICE);
>         if (connectivity == null)
>         {
>             NetConnected = false;
>         }
>         else
>         {
>             NetworkInfo[] info = connectivity.getAllNetworkInfo();
>             if (info != null)
>             {
>                 for (int i = 0; i < info.length; i++)
>                 {
>                     if (info[i].getState() == NetworkInfo.State.CONNECTED)
>                     {
>                         NetConnected = true;
>                     }
>                 }
>             }
>         }
>     }
>     catch (Exception e)
>     {
>         NetConnected = false;
>     }
>     return NetConnected;
> } 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T07:52:46.873

你说的对。这不是检测连接状态的 100% 准确方法，但您可以尝试

```
public static boolean hasActiveInternetConnection(Context context) {
    if (isNetworkAvailable(context)) {
        try {
            HttpURLConnection urlc = (HttpURLConnection) (new URL("http://www.google.com").openConnection());
            urlc.setRequestProperty("User-Agent", "Test");
            urlc.setRequestProperty("Connection", "close");
            urlc.setConnectTimeout(1500); 
            urlc.connect();
            return (urlc.getResponseCode() == 200);
        } catch (IOException e) {
            Log.e(LOG_TAG, "Error checking internet connection", e);
        }
    } else {
        Log.d(LOG_TAG, "No network available!");
    }
    return false;
} 
```

请注意，谷歌可能在某些国家/地区受到限制

# delphi - 格式化包含许多 [Attributes] 的类型声明以提高可读性

> ID：14620812
> 
> 赞同：2
> 
> 时间：2013-01-31T07:46:43.677
> 
> 标签：delphi, coding-style, attributes

最近我发现自己依赖于自定义 [Attributes] 分配。我正在寻求创建我最常使用的 VCL 控件的基于 RTTI 和泛型的变体；我的目的是将样板代码的数量减少到最低限度，我发现 RTTI、匿名方法和属性*非常棒*。

我有一个不寻常的问题。由于我最终使用了很多 [Attributes]，因此我需要一种**可读**的方式来*格式化*此代码。可能听起来像一个微不足道的问题，但我对我的格式和缩进非常着迷。属性的问题在于它们没有被 IDE 以特殊方式格式化。在多个字段声明的块中，与 [Attribute] 声明相互交织，您很难猜测什么是类型，什么是属性，什么属性适用于哪个字段。这是一个最小的例子：

```
type
  [OneAttribute('SomeParam', 7), AnOtherAttribute]
  TSomething = class
  public
    [OneAttribute('SomeParam', 7), AnOtherAttribute]
    FieldName: string;
    [OneAttribute('SomeParam', 7), AnOtherAttribute]
    OtherField: Integer;
    [OneAttribute('SomeParam', 7), AnOtherAttribute]
    function Sum(a,b:Integer):Currency;
    [OneAttribute('SomeParam', 7), AnOtherAttribute]
    property Name:string read FieldName write FieldName;
  end; 
```

我在上面的示例中形成这些 [Attributes] 的方式是代码中最常见的方式`C#`；不幸的是，除了我自己的，我没有看到使用属性的 Delphi 代码示例。这会稍微好一些，`C#`因为您不太可能将属性应用于实际字段，而更有可能将它们应用于`properties`or `functions`; 由于在`C#`函数实现中紧跟其声明（属性相同），因此您不会得到与 Delphi 相同类型的块；函数和属性声明自然是分开的，因此浏览代码不会因使用属性而受到阻碍。

我尝试了与 delphi 相关的“样式”信息的明显来源。Delphi 2010 中的代码格式化程序根本不理解属性声明！在上面的示例中，如果我删除`public`关键字并运行内置代码格式化程序，则属性声明的第一行将在`class`关键字后面移动一行，就好像它声明了一个祖先类一样。

我在 Delphi 2010 源代码周围摸索。要么我的 grep-fu 让我很失望，要么在整个 Delphi 2010 源代码中完全没有使用属性。为了清楚起见，在尝试对属性的实际使用进行 grep 之后（很难，因为使用了方括号分配并且它们很少意味着它是一个属性声明）我开始 grepping `TCustomAttribute`：没有`TCustomAttribute`任何地方的后代，所以显然没有使用属性.

最后到问题：

# 您如何格式化 [Attributes] 以提高可读性？

我的最新解决方案如下所示：

```
type
 [OneAttribute('SomeParam', 7), AnOtherAttribute]
  TSomething = class
  public
   [OneAttribute('SomeParam', 7), AnOtherAttribute]
    FieldName: string;
   [OneAttribute('SomeParam', 7), AnOtherAttribute]
    OtherField: Integer;
   [OneAttribute('SomeParam', 7), AnOtherAttribute]
    function Sum(a,b:Integer):Currency;
   [OneAttribute('SomeParam', 7), AnOtherAttribute]
    property Name:string read FieldName write FieldName;
  end; 
```

我通常使用两列缩进；对于属性，我正在考虑将属性声明向左移动；因为我的类型、字段、方法和属性总是有至少 2 列右缩进（用于类型）或 4 列用于类成员，所以总是有空间。左缩进*似乎*与不使用属性的现有声明很好地融合在一起，我希望属性“脱颖而出”，所以左缩进比右缩进更好。

你怎么看？你有更好的想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T08:33:02.507

根据要求回答。

我使用第一个版本，并在每个版本之后添加空行。并且在一组用于“功能分离”的属性/方法-属性对之后可选的两个空行。我还知道重复可见性说明符以分隔方法/属性的功能组。

它需要更多的屏幕空间，但它有帮助..

```
type
  [OneAttribute('SomeParam', 7), AnOtherAttribute]
  TSomething = class
  public
    [OneAttribute('SomeParam', 7), AnOtherAttribute]
    FieldName: string;

    [OneAttribute('SomeParam', 7), AnOtherAttribute]
    OtherField: Integer;

    [OneAttribute('SomeParam', 7), AnOtherAttribute]
    function Sum(a,b:Integer):Currency;

    [OneAttribute('SomeParam', 7), AnOtherAttribute]
    property Name:string read FieldName write FieldName;

  public
    [OneAttribute('SomeParam', 7), AnOtherAttribute]
    TableName: string;

    [OneAttribute('SomeParam', 7), AnOtherAttribute]
    OtherTable: Integer;

    [OneAttribute('SomeParam', 7), AnOtherAttribute]
    function TableSum(a,b:Integer):Currency;
  end; 
```

# go - 为什么 go install 在 src 目录中写入二进制文件？

> ID：14620813
> 
> 赞同：2
> 
> 时间：2013-01-31T07:46:49.023
> 
> 标签：go

我在目录中有一个小的 go 程序：

```
~/gocode/src/github.com/elviejo79/goexample/ 
```

当我执行

```
go install 
```

该程序确实可以编译，但它会将可执行文件留在与代码相同的目录中。

但根据[How to Write Go Code](http://golang.org/doc/code.html)，二进制文件实际上应该保存在

```
~/gocode/bin 
```

这是我的 $GOPATH

```
$ echo $GOPATH
/home/agarcia/gocode 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T08:05:17.263

无法重现此。请输入

```
 $ go env 
```

并验证您的 GOBIN 指向的位置。例如，在我现在的机器上，它说

```
09:01 myname@tux64:~$ go env
GOARCH="amd64"
GOBIN="/home/myname/bin"
GOCHAR="6"
GOEXE=""
GOGCCFLAGS="-g -O2 -fPIC -m64 -pthread"
GOHOSTARCH="amd64"
GOHOSTOS="linux"
GOOS="linux"
GOPATH="/home/myname"
GOROOT="/home/myname/go"
GOTOOLDIR="/home/myname/go/pkg/tool/linux_amd64"
CGO_ENABLED="1"
09:01 myname@tux64:~$ 
```

go 工具应该将二进制文件发送到 $GOBIN。在这里它就是这样工作的。

# php - PHP中定义变量和简单变量的区别

> ID：14620814
> 
> 赞同：1
> 
> 时间：2013-01-31T07:46:51.120
> 
> 标签：php

使用定义有什么区别和/或好处。例如，在 db 文件中，我可以定义密码或我将在整个网站中使用的任何变量，如下所示：

```
define('DB_PASSWORD', 'mypassword'); 
```

除了上面的代码，我还可以在 db 文件中使用它，如下所示：

```
$DB_PASSWORD="mypassword"; 
```

两者都将用于相同的目的... db 文件将包含在网站的每个页面中。那么使用定义而不是仅仅声明一个变量有什么好处。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T07:48:10.160

**定义**定义了一个值，一个你不能改变的常量，而变量意味着它的值可能会或将会改变。

**编辑：** 两者都有实际用途。有时有些数据不应更改或始终相同。例如，在会话运行时，将始终使用蓝色的十六进制代码，`0000FF`或者永远不会更改数据库密码。

它更像是一种安全工具，而不是性能或可读性问题。一旦 you `DEFINE`，就没有回头路了，但您确定您的数据在整个实例中是相同的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T07:52:11.520

定义（'DB_PASSWORD'，'我的密码'）；cleated 并定义了一个不能更改的 GLOBAL CONSTANT（不太容易），当您调用它时，您将不需要“$”符号。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T07:51:02.087

对于您不打算在整个脚本中更改的数据（静态数据，例如数据库密码），您应该定义它。如果您要重新为其分配新值，请使用变量。

# android - 从 web 服务输出中分离数据

> ID：14620817
> 
> 赞同：0
> 
> 时间：2013-01-31T07:47:13.577
> 
> 标签：android, arrays, web-services, separator

我如何从这个对象中获取个人数据？

```
01-31 15:37:15.783: D/Oh gosh!(24530): anyType{date=Jan 31 2013  5:11PM; name=future; id=346; description=htdutd; url=http://example.com/projects/Project/Files/380020321581257; } 
```

我尝试了 JSON，但出现错误，并且 logcat 说 JSON 无法解析任何类型。那么我如何分离所有这些单独的数据呢？当我将它们分开时，我想将它们放入单独的数组中。那可能吗？

# android - 我想用名称和状态消息将图像保存在 sql lite 中并检索它

> ID：14620823
> 
> 赞同：1
> 
> 时间：2013-01-31T07:47:47.523
> 
> 标签：android, sqlite, imageview

我想将带有名称和状态消息的图像保存在 sql lite 中并检索它。我想将图像保存为我从画廊获得的 imageview 并检索它图像视图。我不知道如何将图像保存在数据库中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:50:40.793

将图像转换为`Base64`字符串并保存在数据库表中，其中包含诸如 img_name、status、img Checkout`Base64`类在 android 中的列

```
public static String convertImageToBase64(Bitmap img)
    {
        ByteArrayOutputStream baos = new ByteArrayOutputStream();  
        img.compress(Bitmap.CompressFormat.JPEG, 90, baos);  
        byte[] byteArrayImage = baos.toByteArray(); 
        return Base64.encodeToString(byteArrayImage, Base64.DEFAULT);
    }

public static Bitmap convertBase64ToImage(String base64)
    {
        byte[] byteArray = Base64.decode(base64, Base64.DEFAULT);
        return BitmapFactory.decodeByteArray(byteArray, 0, byteArray.length);
    } 
```

请参阅以下链接以获取 sqlite

[http://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html) [http://developer.android.com/reference/android/database/sqlite/package-summary.html](http://developer.android.com/reference/android/database/sqlite/package-summary.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T08:04:38.633

向 SQLite 数据库中插入图片，需要使用 BLOB 类型

请参阅此链接：

[http://tttrung43.wordpress.com/2012/04/12/store-image-in-sqlite-database/](http://tttrung43.wordpress.com/2012/04/12/store-image-in-sqlite-database/)

[http://xjaphx.wordpress.com/2011/06/25/insert-image-to-database/](http://xjaphx.wordpress.com/2011/06/25/insert-image-to-database/)

# ruby-on-rails - Rails - 路由（URL 中的 ID 和操作顺序）

> ID：14620829
> 
> 赞同：0
> 
> 时间：2013-01-31T07:48:06.747
> 
> 标签：ruby-on-rails

（我正在学习 Rails 和 MVC 开发）

规则如何 `match ':controller(/:action(/:id))(.:format)'` 匹配此 URL？

```
http://localhost:3000/people/1/edit 
```

'id' (1) 出现在 'action' （编辑）之前，所以它不应该匹配，对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T07:51:56.130

该 URL 与该路由不匹配。

该路由是一个后备 URL，不应在您的应用程序中使用。它仅作为旧应用程序的路由文件中的建议存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T07:49:19.603

为什么要这样使用。采用

```
:resources people 
```

# sql - 使用子选择并比较两个 varchar 列时不匹配

> ID：14620833
> 
> 赞同：0
> 
> 时间：2013-01-31T07:48:15.283
> 
> 标签：sql

我遇到了一些奇怪的事情，我不明白为什么这不起作用；即使它应该很简单。

假设我有一个查询可以选择这样的临时表：

```
SELECT customer_no
INTO #temp 
FROM #old_temp 
```

一个从另一个温度中选择的温度，它可以工作。Customer_no 是 varchar(6)。我只有一个值用于测试目的：'123456'

然后代码试图这样做：

```
SELECT customer_no
FROM #temp
WHERE customer_no NOT IN
 (SELECT cust_number from AnotherCustomerTable) 
```

在 AnotherCustomerTable 中，“123456”肯定不存在。并且 customer_no 也是 varchar(6)。无论我尝试什么，结果都是空的，而我应该在结果集中得到“123456”。

有谁经历过这个，知道它可能是什么吗？我尝试了修剪功能，但没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:58:51.973

您的查询没有任何问题。假设 customer_no '123456' 存在于#old_temp 中，那么它将被插入到#temp 中。并假设 cust_number '123456' 在 AnotherCustomerTable 中不存在，那么它应该返回结果。

这是一个[SQL Fiddle](http://sqlfiddle.com/#!3/da78c/1)演示。我的猜测是您的数据不正确。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T08:01:32.113

解决了！

愚蠢的我没有考虑子选择中的NULL。添加了这个：

```
SELECT cust_number from AnotherCustomerTable
WHERE cust_number IS NOT NULL 
```

# python - 在python中过滤列表列表

> ID：14620837
> 
> 赞同：0
> 
> 时间：2013-01-31T07:48:22.407
> 
> 标签：python

我有一个这样的列表

```
testList=[[1,'test',3],[4,'test',6],[1,6,7]] 
```

我的要求是创建另一个列表列表，如下所示

```
rstList=[[1,'test',3],[1,6,7]] 
```

**也就是说，具有元素“test”的列表只**需要附加到 rstList 一次。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T08:01:01.670

```
flag = True
for item in testList:
    if ('test' in item and flag) or ('test' not in item):
        flag = False
        rtList.append(item) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-31T08:05:06.583

我希望以下代码对您有用

```
def genNewList(v):
    test = False
    ret = []
    for el in v:
        if ('test' in el):
            if(test == False):
                ret.append(el)
                test = True
        else:
            ret.append(el)
    return ret

testList=[[1,'test',3],[4,'test',6],[1,6,7]]

print 'Original list', testList
print 'New list', genNewList(testList) 
```

[在这里](http://www.evaluzio.net/doc/272307cfd0454a078d77)，您可以运行脚本，和/或 fork 并使用它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-31T08:01:53.527

```
testList=[[1,'test',3],[4,'test',6],[1,6,7]]
rstList = []
for item in testList:
    matched = False
    for result_item in rstList:
        if item[1] == result_item[1]:
            matched = True
    if not matched:
        rstList.append(item) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-31T08:05:59.843

假设您只想保留第一个带有“测试”元素的子列表，这是一种方法：

```
def func(x):
    global foundTest
    if 'test' not in x: return True
    elif not foundTest: foundTest = True; return True
    return False

foundTest = False
rstList = filter(func, testList) 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-01-31T07:55:27.650

```
filter(lambda x: x if 'test' in x else None, testList) 
```

# c++ - 构造函数中的虚方法

> ID：14620842
> 
> 赞同：0
> 
> 时间：2013-01-31T07:49:01.413
> 
> 标签：c++, constructor, virtual-functions

禁止在 C++ 中调用虚方法，但在某些情况下它可能非常有用。

考虑以下情况 - 一对父类和子类。父构造函数需要实例化一个子类，因为它必须以特殊方式对其进行初始化。Parent 和 Child 都可以派生，因此 DerivedParent 使用 DerivedChild。

然而，有一个问题——因为在来自 DerivedParent::ctor 的 Parent::ctor 调用中，基类应该有一个 DerivedChild 的实例而不是 Child。但这需要以某种方式调用虚拟方法，这是被禁止的。我在谈论这样的事情：

```
class Child 
{ 
public:
    virtual std::string ToString() { return "Child"; }
};

class DerivedChild : public Child 
{
public:
    std::string ToString() { return "DerivedChild"; }
};

class Parent
{
protected:
    Child * child;

    virtual Child * CreateChild() { return new Child(); }

public:
    Parent() { child = CreateChild(); }
    Child * GetChild() { return child; }
};

class DerivedParent : public Parent
{
protected:
    Child * CreateChild() { return new DerivedChild(); }
};

int main(int argc, char * argv[])
{
    DerivedParent parent;

    printf("%s\n", parent.GetChild()->ToString().c_str());

    getchar();
    return 0;
} 
```

让我们举一个真实世界的例子。假设我想为 WinApi 的窗口编写包装器。基本 Control 类应该注册类并实例化一个窗口（例如 RegisterClassEx 和 CreateWindowEx），以正确设置它（例如以这种方式注册类，该窗口结构具有类实例的附加数据；为所有控件设置通用 WndProc ;`this`由 SetWindowLongPtr 等引用)

另一方面，派生类应该能够指定样式和扩展样式、窗口的类名等。

如果在控件的构造函数中构造窗口实例是要履行的合同，我认为除了在 ctor 中使用 VM 之外没有其他解决方案（这是行不通的）。

可能的解决方法：

*   使用静态多态性（例如类 Derived : public Base），但如果想从 Derived 派生，它将不起作用；
*   如果可能的话，将一个 lambda 从派生的 ctor 传递到基础 ctor - 它会起作用，但它是一个完整的核心解决方案；
*   从派生到基础 ctor 传递大量参数 - 它应该可以工作，但既不优雅，也不易于使用。

我个人不喜欢他们两个。出于好奇，我检查了问题在 Delphi 的 VCL 中是如何解决的，你知道什么，基类调用 CreateParams，它是虚拟的（Delphi 允许这样的调用和保证，它们是安全的 - 类字段在创建时初始化为 0 ）。

如何克服这种语言限制？

* * *

**编辑：**回应答案：

> 从派生的构造函数调用 CreateChild。您已经需要定义 CreateChild，因此这是一个增量步骤。您可以在基类中添加 protected: void init() 函数来封装此类初始化。

它会起作用，但它不是一个选项 - 引用著名的 C++ FAQ：

> 第一个变体最初是最简单的，尽管实际上想要创建对象的代码需要一点程序员自律，这实际上意味着你注定要失败。说真的，如果只有一两个地方实际创建了这种层次结构的对象，程序员的自律是相当本地化的，应该不会造成问题。
> 
> 使用 CRTP。将基类设为模板，让子类提供 DerivedType，然后以这种方式调用构造函数。这种设计有时可以完全消除虚函数。

这不是一个选项，因为它只适用于基类及其直接后代。

> 使子指针成为构造函数参数，例如工厂函数。

到目前为止，这是最好的解决方案 - 将代码注入基本 ctor。就我而言，我什至不需要这样做，因为我可以参数化基本 ctor 并从后代传递值。但它实际上会起作用。

> 在返回父对象之前，使用工厂函数模板生成适当类型的子指针。这消除了类模板的复杂性。使用类型特征模式对子类和父类进行分组。

是的，但它有一些缺点：

*   从我的课程中派生出来的某个人可能会发布他的 ctor 并绕过安全措施；
*   它会阻止一个人使用引用，一个人将不得不使用智能指针。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-31T08:00:19.770

> 禁止在 C++ 中调用虚方法，但在某些情况下它可能非常有用。

*不，在构造函数中*调用虚方法会分派给派生最多的完整对象，也就是正在构造的对象。它不是被禁止的，它是明确定义的，它会做唯一有意义的事情。

不允许 C++ 基类知道最派生对象的身份，无论好坏。在该模型下，派生对象直到基本构造函数运行后才开始存在，因此没有什么可以获取类型信息。

在您的情况下，一些替代方案是：

1.  从派生的构造函数调用 CreateChild。您已经需要*定义*CreateChild ，所以这是一个增量步骤。您可以`protected: void init()`在基类中添加一个函数来封装此类初始化。
2.  使用 CRTP。将基类设为模板，让子类提供 DerivedType，然后以这种方式调用构造函数。这种设计有时可以完全消除虚函数。
3.  使子指针成为构造函数参数，例如工厂函数。
4.  在返回父对象之前，使用工厂函数模板生成适当类型的子指针。这消除了类模板的复杂性。使用类型特征模式对子类和父类进行分组。

# iphone - 无法解密 iPhone 上的视频文件

> ID：14620846
> 
> 赞同：0
> 
> 时间：2013-01-31T07:49:41.280
> 
> 标签：iphone, video, encryption

我需要解密 iPhone 上的视频文件。

服务器正在使用`Cipher c = Cipher.getInstance("AES/ECB/NoPadding");`

在 iPhone 中，我使用以下代码（[粘贴链接](http://pastie.org/426530#19,38)），但我无法成功解密文件。

```
#import <CommonCrypto/CommonCryptor.h>

@implementation NSData (AES256)

- (NSData *)AES256EncryptWithKey:(NSString *)key {
    // 'key' should be 32 bytes for AES256, will be null-padded otherwise
    char keyPtr[kCCKeySizeAES256+1]; // room for terminator (unused)
    bzero(keyPtr, sizeof(keyPtr)); // fill with zeroes (for padding)

    // fetch key data
    [key getCString:keyPtr maxLength:sizeof(keyPtr) encoding:NSUTF8StringEncoding];

    NSUInteger dataLength = [self length];

    //See the doc: For block ciphers, the output size will always be less than or 
    //equal to the input size plus the size of one block.
    //That's why we need to add the size of one block here
    size_t bufferSize = dataLength + kCCBlockSizeAES128;
    void *buffer = malloc(bufferSize);

    size_t numBytesEncrypted = 0;
    CCCryptorStatus cryptStatus = CCCrypt(kCCEncrypt, kCCAlgorithmAES128, kCCOptionPKCS7Padding,
                                     keyPtr, kCCKeySizeAES256,
                                     NULL /* initialization vector (optional) */,
                                     [self bytes], dataLength, /* input */
                                     buffer, bufferSize, /* output */
                                     &numBytesEncrypted);
    if (cryptStatus == kCCSuccess) {
        //the returned NSData takes ownership of the buffer and will free it on deallocation
        return [NSData dataWithBytesNoCopy:buffer length:numBytesEncrypted];
    }

    free(buffer); //free the buffer;
    return nil;
}

- (NSData *)AES256DecryptWithKey:(NSString *)key {
    // 'key' should be 32 bytes for AES256, will be null-padded otherwise
    char keyPtr[kCCKeySizeAES256+1]; // room for terminator (unused)
    bzero(keyPtr, sizeof(keyPtr)); // fill with zeroes (for padding)

    // fetch key data
    [key getCString:keyPtr maxLength:sizeof(keyPtr) encoding:NSUTF8StringEncoding];

    NSUInteger dataLength = [self length];

    //See the doc: For block ciphers, the output size will always be less than or 
    //equal to the input size plus the size of one block.
    //That's why we need to add the size of one block here
    size_t bufferSize = dataLength + kCCBlockSizeAES128;
    void *buffer = malloc(bufferSize);

    size_t numBytesDecrypted = 0;
    CCCryptorStatus cryptStatus = CCCrypt(kCCDecrypt, kCCAlgorithmAES128, kCCOptionPKCS7Padding,
                                     keyPtr, kCCKeySizeAES256,
                                     NULL /* initialization vector (optional) */,
                                     [self bytes], dataLength, /* input */
                                     buffer, bufferSize, /* output */
                                     &numBytesDecrypted);

    if (cryptStatus == kCCSuccess) {
        //the returned NSData takes ownership of the buffer and will free it on deallocation
        return [NSData dataWithBytesNoCopy:buffer length:numBytesDecrypted];
    }

    free(buffer); //free the buffer;
    return nil;
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:06:03.547

我找到了解决方案。更改以下行对我来说可以替代 java 中的“AES/ECB/NoPadding”模式。

```
CCCryptorStatus cryptStatus = CCCrypt(kCCEncrypt, kCCAlgorithmAES128, kCCOptionECBMode,
                                 keyPtr, kCCKeySizeAES128,
                                 NULL /* initialization vector (optional) */,
                                 [self bytes], dataLength, /* input */
                                 buffer, bufferSize, /* output */
                                 &numBytesEncrypted); 
```

# javascript - HTML5 画布元素的访问值

> ID：14620847
> 
> 赞同：2
> 
> 时间：2013-01-31T07:49:45.070
> 
> 标签：javascript, html, html5-canvas

我是 HTML5 的新手。

使用一个典型的元素和像 jQuery 这样的东西，我通常能够访问它的值

```
$("#elem").val(); 
```

编辑：说我写`"abcd"`在画布元素中..我希望能够在某个数据库中“存储”“abcd”...

如果它是纯文本，我将使用 jquery 如上所示访问它，但使用绘图我不确定它是如何工作的？

如何使用画布元素实现相同的结果？我可以期待什么格式的结果？我是否必须获取所有 x,y 坐标的数组并对其进行解析？我得到图像吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T08:02:16.977

您可以使用该`getImageData()`方法。这将返回一个`ImageData`对象。`ImageData`包含一个`width`属性、一个`height`属性和一个`CanvasPixelArray`本质上是位图的对象。ImageData 可能对于将数据加载回画布（使用该`putImageData()`方法）最有用，但如果您愿意，也可以检查像素数组的原始数据。

[您可以在此处阅读有关 ImageData 的更多信息。](https://developer.mozilla.org/en-US/docs/DOM/ImageData)

[您可以在此处阅读有关画布像素操作的信息。](https://developer.mozilla.org/en-US/docs/HTML/Canvas/Pixel_manipulation_with_canvas)

* * *

看来我可能误解了你的问题。如果通过在数据库中存储“abcd”，您希望存储位图图像，那么您只需提取像素数据，然后将其存储为 BLOB 或类似对象。这就是我假设你的意思。

但是，如果您希望将实际文本“abcd”存储在您的数据库中，您将遇到更困难的时间。您需要将画布视为文字画布。一旦你把东西放在上面，它就会成为图像的一部分。它不像 SVG，可以再次提取特定组件。画布本质上是一个位图图像，因此如果您希望从中提取文本数据而无需访问设计算法，您将不得不使用某种 OCR 算法（这当然是非常不可取的）。

如果您确实希望提取文本数据，我建议您看一下 SVG，它在某些方面更灵活。[MDN 有一系列关于该主题的相当全面的文章。](https://developer.mozilla.org/en/docs/SVG)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T08:08:57.543

画布不存储对象，一切都只是光栅化的图像。因此，如果您想将画布数据作为对象访问，则必须使用画布库，即[fabric.js](http://fabricjs.com/)

# android - 在 android App 中启动 Activity 时出现内存不足错误？

> ID：14620848
> 
> 赞同：3
> 
> 时间：2013-01-31T07:49:50.373
> 
> 标签：android, out-of-memory

我正在开发一个应用程序，其中一个活动是一个非常复杂的代码，**不同的视图在一个布局中膨胀，比如 webview**（它使用来自 sdcard 的带有图像的 html 文件）、imageviews、scrolls。在开始这个活动时，我得到了这些错误。

```
 E/AndroidRuntime(600): Caused by: java.lang.reflect.InvocationTargetException
        E/AndroidRuntime(600):  at java.lang.reflect.Constructor.constructNative(Native Method)
        E/AndroidRuntime(600):  at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
        E/AndroidRuntime(600):  at android.view.LayoutInflater.createView(LayoutInflater.java:586)
        E/AndroidRuntime(600):  ... 29 more
        E/AndroidRuntime(600): Caused by: java.lang.OutOfMemoryError
        E/AndroidRuntime(600):  at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
        E/AndroidRuntime(600):  at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:483)
        E/AndroidRuntime(600):  at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:351)
        E/AndroidRuntime(600):  at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:773)
        E/AndroidRuntime(600):  at android.content.res.Resources.loadDrawable(Resources.java:1935)
        E/AndroidRuntime(600):  at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
        E/AndroidRuntime(600):  at android.view.View.<init>(View.java:2785)
        E/AndroidRuntime(600):  at android.view.View.<init>(View.java:2722)
        E/AndroidRuntime(600):  at android.view.ViewGroup.<init>(ViewGroup.java:379)
        E/AndroidRuntime(600):  at android.widget.RelativeLayout.<init>(RelativeLayout.java:174)
        E/AndroidRuntime(600):  ... 32 more 
```

如何解决这个问题我已经尝试过这段代码但仍然不知道该怎么做？

```
 @Override
    protected void onDestroy() {
    super.onDestroy();

    unbindDrawables(findViewById(R.id.rootView));
    System.gc();
    }

    private void unbindDrawables(View view) {
        if (view.getBackground() != null) {
        view.getBackground().setCallback(null);
        }
        if (view instanceof ViewGroup) {
            for (int i = 0; i < ((ViewGroup) view).getChildCount(); i++) {
            unbindDrawables(((ViewGroup) view).getChildAt(i));
            }
        ((ViewGroup) view).removeAllViews();
        }
    } 
```

解决这个问题的可能方法是什么？请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T07:57:15.820

在您的情况下，使用位图优化内存使用的最佳方法是保存您的 ImageViews 列表，在为每个 ImageView 调用 finish() 之前执行此操作：

```
((BitmapDrawable) myImageView.getDrawable()).getBitmap().recycle();
myImageView = null; 
```

也使用代码中的`onPause`代码，活动的主要布局具有 id `top_layout`：

```
@Override
protected void onPause() {
    super.onPause();
    unbindDrawables(findViewById(R.id.top_layout));
    System.gc();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T13:21:16.840

在搜索并看到上面的答案后，我只通过修改 Android 用户的代码编写了一个简单的片段。我已经使用了这个成功的工作。这个代码 setCallback 视图的背景，甚至回收所有当前使用的位图。

```
 @Override
        protected void onDestroy() {
        super.onDestroy();

        unbindDrawables(findViewById(R.id.rootView));
        System.gc();
        }

 static void unbindDrawables(View view) {
     try{
     System.out.println("UNBINDING"+view);
            if (view.getBackground() != null) {

                ((BitmapDrawable)view.getBackground()).getBitmap().recycle();

                view.getBackground().setCallback(null);
                view=null;
            }

            if (view instanceof ViewGroup) {
                for (int i = 0; i < ((ViewGroup) view).getChildCount(); i++) {
                unbindDrawables(((ViewGroup) view).getChildAt(i));
                }
            ((ViewGroup) view).removeAllViews();
            }

    }catch (Exception e) {
        // TODO: handle exception
        e.printStackTrace();
    }
 } 
```

编辑：

我今天使用小于 20 kb 大小的图像发现了一个新事物，它有利于内存优化，并且您不必经历内存不足错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T08:37:07.790

如果图像像素超过限制，则会出现 OutOfMemoryException。（最大分辨率为 2048*2048）

您可以使用 Bitmapfactory.Options 减少图像的像素 -

```
BitmapFactory.Options options = new BitmapFactory.Options();
options.inSampleSize = 4;
Bitmap myBitmap = BitmapFactory.decodeFile(mUri.getPath(),options);
Drawable d = new BitmapDrawable(Resources.getSystem(),myBitmap);
updateDrawable(d); 
```

在活动中使用您的图像时，请降低其分辨率。

注意 - inSampleSize=2 意味着它减少了 1/2 的大小和 1/4 的分辨率。

尝试将 inSampleSize 的值保持为 2 的幂也可以获得最佳结果。

希望它对你有帮助。有任何疑问，请发表评论。

# php - php通过使用..（双点）来引用包含路径

> ID：14620849
> 
> 赞同：0
> 
> 时间：2013-01-31T07:49:57.403
> 
> 标签：php, linux, windows, include, realpath

我有一个关于 PHP 包含路径的问题，它在两个环境中的行为不同。

文件夹结构：

**视窗**

```
|-C:\wamp\www\cms\themes\child
|-C:\wamp\www\cms\themes\parent 
```

**Linux**

```
|-/var/www/html/cms/themes/child
|-/var/www/html/cms/themes/parent 
```

**Linux 环境**

```
var_dump(realpath('/')); // means /
var_dump(realpath('/../parent/scripts/import.php')); //boolean false
include('/../parent/scripts/import.php'); //it will not work
include('../parent/scripts/import.php'); //it will not work, except it will reference parent folder 
```

**视窗环境**

```
var_dump(realpath('/')); //C:\
var_dump(realpath('/../parent/scripts/import.php')); //boolean false
include('../parent/scripts/import.php'); //am thinking it will work at first, but it does not work in windows (feel weird)
include('/../parent/scripts/import.php'); //it work in windows (feel weird) 
```

我知道最好的做法是，它适用于两个平台

```
include(realpath(dirname(__FILE__)).'/../parent/scripts/import.php'); 
```

但我想知道这一点，它是 PHP 错误还是什么原因造成的？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-31T07:54:04.843

不，这不是一个错误，它是窗口文件系统和 linux 文件系统之间的区别

# jaxb - 公理生成器为空错误

> ID：14620853
> 
> 赞同：1
> 
> 时间：2013-01-31T07:50:13.573
> 
> 标签：jaxb, axis2, tomcat6, axiom

我不确定它是否相关，但我们在系统中使用axis2和JAXB进行xml解析和soap进行通信（在tomcat上）。一切正常，但是，在每条传入消息之后，我在日志中反复收到以下调试消息，我不确定我们是否遗漏了什么。

2013-01-30 23:41:44,727 [http-8081-1] 调试 org.apache.axiom.soap.impl.llom.SOAPEnvelopeImpl - 由于：2013-01-30 23:41：无法关闭构建器或解析器： 44,727 [http-8081-1] 调试 org.apache.axiom.soap.impl.llom.SOAPEnvelopeImpl - 构建器为空

这对任何人都有意义吗？我是否应该以某种方式初始化构建器来配置它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T16:35:00.153

这不是错误，而是调试消息。In 可以放心地忽略。

# solr - 使用 solrnet 返回 solr 中突出显示的列表中的所有搜索命中

> ID：14620856
> 
> 赞同：1
> 
> 时间：2013-01-31T07:50:19.553
> 
> 标签：solr, full-text-search, solrnet

我们正在尝试对文本文件的内容执行基于 solr 的搜索，并且要求尝试返回每个文档中搜索词的所有匹配项以及匹配项周围突出显示的文本。

我们能够返回找到的文档数量以及文档中搜索词的第一个命中附近突出显示的片段。但它不会返回找到搜索词的文档中的突出显示列表。我们可以将 TermFrequency 报告为正确的数字，但不是所有这些事件的片段。

solr 架构的相关部分：

```
<field name="Content" type="text_general" indexed="false" stored="true" required="true"/>
<field name="ContentSearch" type="text_general" indexed="true" stored="false" multiValued="true"/>

<copyField source="Content" dest="ContentSearch"/> 
```

例如，如果我们有 a.txt 和 b.pdf 被索引，并且搜索词“case”在两个文档中多次存在（a.txt - 7 hits, b.pdf - 10 hits），当执行针对这两个文档搜索“案例”，我们将返回两个文档，并以正确的词频（7 和 9）返回，但突出显示列表仅包含一个记录，该记录对应于文件中的第一个命中。

这是否与将 TermVectorComponent 用于内容字段有关。我已阅读但无法完全弄清楚 TVC 的工作方式以及在何种情况下它会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T12:36:04.447

这是由于突出显示的默认设置。为了实现您想要的，我建议更改[片段](http://wiki.apache.org/solr/HighlightingParameters#hl.snippets)和[maxAnalyzedChars](http://wiki.apache.org/solr/HighlightingParameters#hl.maxAnalyzedChars)选项。默认情况下，片段设置为仅返回一个片段，并且 maxAnalyzedChars 将仅查看前 51200 个字符。我会将这些值设置为`snippets=20` （或大于预期的最大片段数的值）和`maxAnalyzedChars=100000`（或大于最长字段值的其他值），这将确保分析整个值并返回所有亮点。

注意：您可能还需要使用[fragsize](http://wiki.apache.org/solr/HighlightingParameters#hl.fragsizehttp://wiki.apache.org/solr/HighlightingParameters#hl.fragsize)设置来获得片段的适当大小（包括突出显示的单词之前和之后的行）。由于片段的默认大小为 100 个字符。

在 SolrNet 中，您需要设置传递给查询的`Snippets`和`MaxAnalyzedChars`属性。`HighlightingParameters`类似于以下内容：

```
 var results = solr.Query(new SolrQueryByField("ContentSearch", "case"), 
     new QueryOptions {
       Highlight = new HighlightingParameters {
          Fields = new[] {"ContentSearch"},
          Snippets = 20,
          MaxAnalyzedChars = 100000,
      }
   }); 
```

# c# - 我在使用 Filezilla 更新服务器中的文件时遇到问题

> ID：14620860
> 
> 赞同：0
> 
> 时间：2013-01-31T07:50:36.407
> 
> 标签：c#, asp.net, file-upload, filezilla

我的客户给了我 FTP 连接的详细信息，上传我的 asp.net 站点。但是当我使用 filezilla 客户端更新我的文件时，文件正在更新，但是浏览器中的应用程序显示旧结果（更新前）。只有 javascript 和 css 文件才能正常运行

有没有办法解决这个问题？而且我没有远程桌面连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:58:58.260

当您进行此类更改时，您应该将其上传`App_Offline.htm`到您的根目录。这会在您进行更改时向用户显示一条离线消息。

参考：[ScottGu 关于 App_Offline.htm 的博客](http://weblogs.asp.net/scottgu/archive/2006/04/09/442332.aspx)

> app_offline.htm 的工作方式是将此文件放在应用程序的根目录中。当 ASP.NET 看到它时，它将关闭应用程序的应用程序域（而不是为请求重新启动它），而是发回 app_offline.htm 文件的内容以响应应用程序的所有新动态请求。完成网站更新后，只需删除文件，它就会重新上线。

这些将导致使用您替换的 dll，在您进行更改时显示优雅的消息，并且不需要远程桌面连接。

# git - Git添加所有子目录

> ID：14620863
> 
> 赞同：93
> 
> 时间：2013-01-31T07:50:42.067
> 
> 标签：git, repository, git-add

我在将文件夹及其所有子目录添加到我的 git 存储库时遇到问题。在进行了一些谷歌搜索后，我意识到这是一个非常受欢迎的问题，并且我尝试了每个建议都没有运气，特别是来自[git-add 手册页](http://www.kernel.org/pub/software/scm/git/docs/git-add.html)的建议。我什至试过`git add -A`没有成功。为简单起见，假设我将 git 存储库初始化为`Dir1`. 然后我有以下文件目录结构。

```
Dir1/file1-1.txt
Dir1/file1-2.txt
Dir1/Dir2/file2-1.txt
Dir1/Dir2/Dir3/file3-1.txt 
```

我的真实文件有跨越 5-6 级深度的子​​目录，那么是否有一个 git 命令可以将每个子目录中的所有文件添加到我的存储库中？现在，当我从手册页中提出建议时，`git add Dir1/\*`我可以`Dir2`在我的仓库中看到，但它显示为绿色文件夹，我无法打开它，这让我相信其中的所有文件/文件夹都`Dir2`没有添加。任何帮助将不胜感激。我是一个新的 git 用户（使用不到一周），所以尽量保持你的指示在初学者的水平。

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2013-01-31T07:56:26.327

做，

```
git add . 
```

在存储库的根目录中。它会添加一切。如果你这样做`git add *`，它只会添加文件`*`点。单点是指目录。

如果您的目录或文件在上述命令之后没有被添加到 git index/repo 中，请记得检查它是否在[.gitignore](https://help.github.com/articles/ignoring-files)文件中被 git 标记为忽略。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2018-04-18T08:29:40.270

**简单的解决方案：**

```
git rm --cached directory
git add directory 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2016-08-10T22:20:20.793

如果子目录本身是 git 存储库 - 即 .has .git 目录 - 使用`ls -a`.

要删除，请转到子目录和`rm .git -rf`.

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-12-07T21:02:28.883

也很挣扎，但输入正确

git add -f ./JS/*

其中 JS 是我的文件夹名称，其中包含子文件夹和文件

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-06T01:03:44.257

我不能确定是否是这种情况，但对我来说似乎是个问题是在某些子目录中有 .gitignore 文件。同样，我不能保证这一点，但在这些被删除后一切正常。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-02T23:04:56.103

**最有可能的**.gitignore 文件正在发挥作用。请注意，.gitignore 文件不仅可以出现在 repo 的根级别，还可以出现在任何子级别。您可以从根级别尝试此操作以找到它们：

寻找 。-名称“.gitignore”

然后检查结果以查看可能阻止添加子目录的结果。

也可能涉及子模块。检查“.gitmodules”文件的违规目录。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-06-16T21:37:30.260

我之前看到过这个问题，当我尝试添加的（子）文件夹的名称以“_Something_”开头时

我删除了下划线，它起作用了。检查您的文件夹是否包含可能导致问题的字符。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-05-26T15:26:47.097

如果某人`git add .`不工作（在我的情况下也是如此），请使用`git add ./*`包含所有子目录中的所有文件。我的目录结构是：

```
MainDirectory
|_.git
|_README
|_folder1
|   |_file1
|   |_file2
|   |_subfolder1
|   |    |_file3
|   |    |_file4
|   |_subfolder2
|        |_file5
|        |_file6
|_folder2 
|   |_file1
|   |_file2
|   |_subfolder1
|   |    |_file3
|   |    |_file4
|   |_subfolder2
|        |_file5
|        |_file6
|_otherfiles 
```

在仅添加当前级别的文件时，doing`git add ./*`包括一个级别或更多级别内的所有内容。`git add .`

# ios - 有没有办法从iOS中的另一个应用程序访问应用程序的数据库，目标c？

> ID：14620864
> 
> 赞同：2
> 
> 时间：2013-01-31T07:50:41.787
> 
> 标签：ios, objective-c, database

我分离了一些进程。我有两个应用程序，我想从另一个访问其中一个的数据库。有什么方法可以访问吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T07:52:16.437

答案是**否定的。**

iOS 中的每个应用程序都是沙盒化的，因此一个应用程序无法访问另一个应用程序的数据。

（我认为它可以在越狱设备上完成）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T08:17:36.557

不，您不能从另一个应用程序访问一个应用程序中的数据库。

但是总有一些解决方法，例如使用[UIPasteboard](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPasteboard_Class/Reference.html)

> UIPasteboard 类使应用程序能够在应用程序内或使用系统范围或特定于应用程序的粘贴板与另一个应用程序共享数据。

1.  首先，您需要创建一个特定于应用程序的粘贴板`pasteboardWithName:create:`
2.  然后，您可以将数据库保存在一个应用程序中，并将其转换为 NSData，然后将其放入特定于应用程序的粘贴板中`setData:forPasteboardType:`
3.  您可以读取 NSData`dataForPasteboardType:`并将其转换回您的数据库格式

希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T08:22:47.513

它不能直接完成，但您可以在应用程序之间共享文件。您可以注册您的应用程序来处理特定的文件类型（例如 *.sqlite 文件）。

例如，您可以在 GoodReader 或其他应用程序中打开 Mail.app 的附件。

[这里](https://developer.apple.com/library/mac/#documentation/FileManagement/Conceptual/understanding_utis/understand_utis_intro/understand_utis_intro.html)有更多信息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T09:22:11.220

不，您不能从一个应用程序访问另一个应用程序的内容，因为它们仅限于自身。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T07:53:11.410

不，您不能直接从一个应用程序访问数据库到另一个应用程序。

但是，您可以通过从第一个应用程序向服务器发送数据并通过 Web 服务从第二个应用程序中的服务器获取相同的数据来实现两个应用程序之间的同步过程。

希望这些信息对你有帮助..

# java - 使用 Java 程序从 Unix Box 读取 Windows 机器上共享的内容

> ID：14620866
> 
> 赞同：0
> 
> 时间：2013-01-31T07:50:55.817
> 
> 标签：java, core

我在 Windows 机器上共享了内容，比如 \someip\somedirectory，现在我想用 Java 编写一个在 Unix Box 上运行并读取共享文件夹内容的程序。

```
File file=new File(directoryPath);
if(file.isDirectory()) returns false. 
```

因此，我在第一步本身就失败了。请建议我该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:05:33.237

您应该使用`return`而不是`returns`：

```
File file=new File(directoryPath);
if(file.isDirectory()) return false; 
```

# java - Java 空行为

> ID：14620869
> 
> 赞同：10
> 
> 时间：2013-01-31T07:51:02.243
> 
> 标签：java, null, nullpointerexception

我试图了解`null`Java 中的工作原理。

如果我们分配`null`给任何对象，幕后实际发生了什么？它是否分配了一个指向`null`“对象”或其他东西的内存位置地址？

我已经尝试了以下程序，并且我了解到所有`null`s 都指向同一个位置。

但是谁能告诉我 Java 是如何抛出`NullPointerException`的以及在 Java 中是如何`null`工作的？

```
class Animal{
}

class Dog{
}

public class testItClass {

    public static void main(String args[]){
        Animal animal=null;
        Dog dog=null;

        if(((Object)dog) == ((Object)animal))
            System.out.println("Equal");
    }

} 
```

输出

平等的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T07:59:35.660

> 如果我们将 null 分配给任何对象，它实际上是堆中的某个内存位置或其他任何东西。

应该区分`reference`和`object`。您可以分配`null`给参考。对象通常使用`new`运算符在堆中创建。它返回一个对象的引用。

```
A a = new A(); 
```

`A`在堆中创建具有类型的对象。给你回参考`a`。如果你现在分配

```
a = null; 
```

对象本身仍驻留在堆中，但您将无法使用 reference 访问它`a`。

请注意，对象可能稍后会被垃圾收集。

**升级版：**

我创建了这个类来查看它的字节码（对我来说是第一次）：

```
public class NullTest {
    public static void main (String[] args) {
        Object o = new Object();
        o = null;
        o.notifyAll();
    }
} 
```

它产生：

```
C:\Users\Nikolay\workspace\TestNull\bin>javap -c NullTest.class
Compiled from "NullTest.java"
public class NullTest {
  public NullTest();
    Code:
       0: aload_0
       1: invokespecial #8                  // Method java/lang/Object."<init>":()V
       4: return

  public static void main(java.lang.String[]);
    Code:
       0: new           #3                  // class java/lang/Object
       3: dup
       4: invokespecial #8                  // Method java/lang/Object."<init>":()V
       7: astore_1
       8: aconst_null
       9: astore_1
      10: aload_1
      11: invokevirtual #16                 // Method java/lang/Object.notifyAll:()V
      14: return
} 
```

您可以看到将 null 设置为引用结果：

```
8: aconst_null
9: astore_1 
```

[字节码指令列表](http://en.wikipedia.org/wiki/Java_bytecode_instruction_listings)

基本上它将 null 的值放在堆栈的顶部，然后保存到引用。但是这种机制和参考实现是 JVM 内部的。

[对java对象的引用是如何实现的？](https://stackoverflow.com/questions/1574009/how-is-reference-to-java-object-is-implemented)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T07:58:47.377

以下声明对类`Animal`（或其子类）对象的引用，并将其初始化为`null`：

```
Animal animal = null; 
```

在这里，引用本身占用了一些空间。由于没有关联的对象，因此没有进一步的内存成本。

如果您尝试通过访问对象来使用`null`引用：

```
Animal cat = null;
if (cat.equals(dog)) { ... } // throws NPE 
```

你会得到一个`NullPointerException`.

`null`但是，只要您不尝试取消引用它，就可以对引用本身进行操作：

```
Animal cat = null;
Animal dog = null
if (cat == dog) { ... }      // works fine 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-17T09:42:19.017

Java中的Null是基于NULL Object模式设计的。

NULL Object 表示不存在的对象。如果我们试图从这个不存在的对象访问任何资源，我们不应该得到任何东西，这在逻辑上是有道理的。但实际上像 Java 这样的编程语言会创建 NullPointerException 类的实例并将所需的信息填充到 Object 中并在调用语句处抛出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T08:02:06.023

当一个对象设置为`null`then 时，它在 JVM 中基本上没有内存引用。此外，`==`两个空对象之间的比较也会产生一个真值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T08:06:33.467

Java中只有一个`null`。它在所有出现的情况下都是相同的，无论变量如何，甚至无论类别如何。编译器不允许直接比较，但您可以强制转换：

```
String x = null;
ArrayList a = null;
if ((Object) x == (Object) a) {
  System.out.println("Do not have onther nulls, only ME");
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-31T07:55:47.273

Null 实际上是对任何内容的内存引用（因此为 null）。代码中的所有对象引用都是指向内存中保存物理数据的位置的指针。如果一个对象为空，则它没有引用，或者指向内存中的任何内容。这就是为什么除了检查它是否为空之外，null 不能用于其他任何事情。

当试图操作一个没有物理内存引用的对象时，Java 将抛出一个空异常。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-31T07:59:02.650

它输出 true 因为`null == null`

Null 没有任何意义。

```
Animal animal=null; 
```

定义对对象的引用`Animal`，但尚未分配给一个对象，因此它不指向任何对象。

如果您有 C/C++ 经验，这就像设置一个指向`NULL`or的指针`nullptr`。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-07-25T23:57:51.343

在字节码级别，有一条指令将“null”推送到本地堆栈（然后将其分配给变量槽或字段）。

大多数 Java 虚拟机实际上都在使用分配给 null 的真实（机器）指针。因此，如果使用它们，它们会在内部捕获信号（SIGSEGV）并将其转换为 NPE。实际上，您可以通过向 Java PID 发送“kill -SEGV”来测试它，它会在大多数情况下生成随机 NullPointerExceptions。

# spring-security - Spring Security：将方法安全注释移出代码

> ID：14620870
> 
> 赞同：2
> 
> 时间：2013-01-31T07:51:04.770
> 
> 标签：spring-security

我已经浏览了[此页面上](http://www.infoq.com/presentations/Spring-Security-3)的 Spring Security 视频。

在 36:30 左右，他谈到了使用安全注释和方法签名来保护方法，如下所示：

```
@Secured("ROLE_USER")
public String create(); 
```

为什么我们需要将注释与方法一起保留？（因为安全注释与方法的作用没有*任何*关系）

我可以将这些注释放到一个单独的文件中，以便我可以在不修改实际代码的情况下更改它们吗？（可能使用类似 Spring AOP 功能的东西）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:24:00.977

是的，您可以通过 Spring AOP 做到这一点：

```
<global-method-security>
    <protect-pointcut expression="execution(* com.domain.service.*.*(..))" access="ROLE_USER"/>
</global-method-security> 
```

根据您的需要调整表达。

****从灵活性**的角度来看，**XML 声明**是好的。考虑以下情况：**

 ***   您想在两个模块中重用某些服务，但您希望拥有不同的安全规则。
*   你想对每个包应用一些安全限制

只有 XML 才有可能。

****从可读性**的角度来看，**注释**很好。当您看到某种方法时，您可以直接查看所有安全限制。不需要每次都打开一些 XML 文件并考虑表达式（是否适用于这种方法？）。所以很容易。**

 **不要混合使用这两种方法。这太令人困惑了。检查您的需求并为您的项目选择最佳的。****

# c# - 如何在 WP7 创建一个 plist？

> ID：14620872
> 
> 赞同：0
> 
> 时间：2013-01-31T07:51:13.193
> 
> 标签：c#, windows-phone-7

我需要创建一个物种的 plist，因为它可以在 wp7 上完成？

```
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
<key>
game
</key>
</dict>
</plist> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T08:11:47.740

[检查这个](https://github.com/animetrics/PlistCS)C# 属性列表（plist）序列化库（MIT 许可证）。它支持 plist 格式的 XML 和二进制版本。

写一个 plist，例如字典

```
 Dictionary<string, object> dict = new Dictionary<string, object>
        {
            {"String Example", "Hello There"},
            {"Integer Example", 1234}
        };
        Plist.writeXml(dict, "xmlTarget.plist"); 
```

# cuda - cuda 使用常量内存作为二维数组

> ID：14620876
> 
> 赞同：2
> 
> 时间：2013-01-31T07:51:25.050
> 
> 标签：cuda, gpu-constant-memory

我在一个多线程“主机”程序中实现我的内核，其中每个主机线程都在调用内核。我在使用常量内存时遇到了问题。在常量内存中会放置一些参数，但是对于每个线程它们是不同的。我也在发生问题的地方建立了一个样本。

这是内核

```
__global__ void Kernel( int *aiOutput, int Length )
{
    int id = threadIdx.x + blockIdx.x * blockDim.x;

    int iValue = 0;

    // bound check
    if( id < Length )
    {
        if( id % 3 == 0 )
            iValue = c_iaCoeff[2];
        else if( id % 2 == 0 )
            iValue = c_iaCoeff[1];
        else
            iValue = c_iaCoeff[0];

        aiOutput[id] = iValue;
    }
    __syncthreads();
} 
```

一个 pthread 正在调用这个函数。

```
void* WrapperCopy( void* params )
{
    // choose cuda device to perform on
    CUDA_CHECK_RETURN( cudaSetDevice( 0 ) );

    // cast of params
    SParams *_params = (SParams*)params;

    // copy coefficients to constant memory
    CUDA_CHECK_RETURN( cudaMemcpyToSymbol( c_iaCoeff, _params->h_piCoeff, 3*sizeof(int) ) );

    // loop kernel
    for( int i=0; i<100; i++ )
    {
        // perfrom kernel
        Kernel<<< BLOCKCOUNT, BLOCKSIZE >>>( _params->d_piArray, _params->iLength );
    }

    // copy data back from gpu
    CUDA_CHECK_RETURN( cudaMemcpy(
            _params->h_piArray, _params->d_piArray, BLOCKSIZE*BLOCKCOUNT*sizeof(int), cudaMemcpyDeviceToHost ) );

    return NULL;
} 
```

常量内存就是这样声明的。

```
__constant__ int c_iaCoeff[ 3 ]; 
```

对于每个主机线程都有不同的值，`h_piCoeff`并将其复制到常量内存中。

现在我为每个 pthread 调用得到相同的结果，因为它们都在 `c_iaCoeff`. 我认为这是常量内存如何工作并且必须在上下文中声明的问题 - 在示例中，只有一个`c_iaCoeff`为所有 pthreads 调用声明，而 pthreads 调用的内核将获得最后一个的值`cudaMemcpyToSymbol`。是对的吗？

现在我试图在一个二维数组中改变我的常量内存。第二个维度将是之前的值，但第一个维度将是使用的 pthread 的索引。

```
__constant__ int c_iaCoeff2[ THREADS ][ 3 ]; 
```

在内核中将采用这种方式。

```
iValue = c_iaCoeff2[iTId][2]; 
```

但是我不知道是否可以这样使用常量内存，是吗？当我尝试将数据复制到常量内存时，我也遇到了错误。

```
CUDA_CHECK_RETURN( cudaMemcpyToSymbol( c_iaCoeff[_params->iTId], _params->h_piCoeff, 3*sizeof(int) ) ); 
```

一般是否可以将常量内存用作二维数组，如果可以，我的失败在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T08:11:14.887

是的，您应该能够以您想要的方式使用常量内存，但是`cudaMemcpyToSymbol`您使用的复制操作不正确。调用的第一个参数是一个*符号*，API 在运行时符号表中进行查找以获取您请求的常量内存符号的地址。所以不能将地址传递给调用（尽管您的代码实际上是将初始化的主机值传递给调用，为什么我将把它作为练习留给读者）。

您可能错过的是调用中可选的第四个参数，它是您请求的符号指向的内存的偏移量。因此，您应该能够执行以下操作：

```
cudaMemcpyToSymbol( c_iaCoeff,                    // symbol to lookup
                    _params->h_piCoeff,           // source location
                    3*sizeof(int),                // number of bytes to copy
                    (3*_params->iTId)*sizeof(int) // Offset in bytes
                   ); 
```

[标准免责声明：用浏览器编写，未经测试。使用风险自负]

最后一个参数是从符号开始的字节偏移量。您的 2D 数组将按行主要顺序排列，因此您需要使用行间距乘以行索引作为每个复制操作的偏移量。

# xml - 为什么每次选择时下拉菜单的宽度都会自动减小？

> ID：14620878
> 
> 赞同：1
> 
> 时间：2013-01-31T07:51:31.770
> 
> 标签：xml, ajax, jsp, jquery

我有两个下拉菜单。在一个下拉列表中选择一个值时，XML 文件中的相应值应该出现在下拉列表 2 中。相应的值在下拉 2 中完美出现，但每次我在下拉 1 中选择值时，它的宽度都会减小。我没有得到真正的问题所在。这个你能帮我吗。脚本代码：

```
var XML_PATH = "web/jsp/test.xml";
$(function getDropThreeDetails() {
$('#ddl3').empty();
$.ajax({
        type: "GET",
        url: XML_PATH,
        dataType: "xml",
        success: function(xml)
        {
            var selectedVal = $('#ddl2').val();
            $(xml).find(selectedVal).find('values').each(function(i)  {
                var ou2 = $(this).text();
                $('#ddl3').append("<option id='"+ ou2 +"'>"+ou2+"</option>");
            });

    }
  });
}); 
```

HTML 代码：

```
 <td class="text1" align="left" colSpan="1"><b><font
        color="#5B5B5B" face="Arial">Service Request Category</font></b></td>
    <td><select id="ddl2"
        onchange="getDropThreeDetails(this,'ddl3')" style="width: 100%"
        Class="textbox">
    </select></td>
</tr>

<tr>
    <td class="text1" align="left" colSpan="1"><b><font
        color="#5B5B5B" face="Arial">Service Request Type</font></b></td>
    <td><select id="ddl3" style="width: 100%" Class="textbox">
    </select></td>
</tr> 
```

XML 文件代码：

```
<Statements>
    <values>Request for Final Interest certificate</values>
    <values>Request for Provisional Interest certificate</values>
    <values>Request for Amortization/Repayment Schedule for ROI/Balance tnure and o/s loan amt</values>
    <values>Statement of account</values>
    <values>Query on Statement/Certificates/Amortization chart</values>
</Statements>

<Disbursement>  
    <values>Part Payment Enquiry</values>
    <values>Part Payment Request</values>
    <values>Query on Part Payment request made</values>
    <values>Part Payment not Adjusted Properly</values> 
</Disbursement> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:57:04.193

您可以将选择框设置为固定宽度。像这样的东西：

```
<select id="ddl3" style="width: 200px"> 
```

但最好使用 CSS 来完成。

```
select.big {
    width: 200px;
}
<select id="ddl3" class="big"> 
```

# iis - 如何设置 IIS 请求镜像到暂存环境？

> ID：14620883
> 
> 赞同：2
> 
> 时间：2013-01-31T07:51:40.553
> 
> 标签：iis, staging, infrastructure, iis-modules

我希望对我的生产环境发出的所有 HTTP 请求也自动针对我的测试环境发出。例如，如果有任何东西发出请求，`http://production.site.example.com/api/users/12345`那么我希望`http://staging.site.example.com/api/users/12345`看到第一个请求的某个内部实体也能发出相同的请求。

有没有一种简单的方法可以在 IIS 中进行设置，而无需创建自定义模块或类似模块？如果不是，那么在创建这样的模块时采取的最佳方法是什么，这样不会对我的应用程序的生产实例造成任何额外的负载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T00:14:35.433

不确定您要在这里具体实现什么，但您可以尝试一些简单的方法，例如在 OnUnload 事件处理程序中实现重定向（我假设您使用的是 ASP.NET），它将流量重定向到您的测试环境。

这样您就可以在生产环境中处理所有内容，一旦完成，您就可以将请求重定向到测试环境。同样，不确定您具体要做什么，但我会首先尝试使用不同的重定向进行类似这样的简单操作。

# email - C#生成的PDF文件不保存

> ID：14620891
> 
> 赞同：0
> 
> 时间：2013-01-31T07:52:23.970
> 
> 标签：email, c#-4.0

我已经使用 c# 代码创建了一个 pdf 文件，现在我想将创建的 pdf 文件保存到我的本地计算机驱动器“E”中，但是向我显示的错误是“拒绝访问路径 'E:\My Projects'。”。 ..

这是保存pdf文件的代码

```
FileStream fileStream = new FileStream(@"E:\My Projects", FileMode.OpenOrCreate, 
     FileAccess.ReadWrite, FileShare.None); 
```

任何人请帮帮我....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:58:11.357

假设你有

1.  `path`具有完整限定名的字符串和
2.  `pdf`生成的pdf的字节[]，

然后做：

```
File.WriteAllBytes(path, pdf); 
```

请参阅[http://msdn.microsoft.com/en-us/library/system.io.file.writeallbytes.aspx](http://msdn.microsoft.com/en-us/library/system.io.file.writeallbytes.aspx)

# zend-framework2 - 视图助手工厂无法访问主要服务？

> ID：14620892
> 
> 赞同：0
> 
> 时间：2013-01-31T07:52:24.503
> 
> 标签：zend-framework2

当我为视图助手（“view_helpers”配置键）创建工厂时，传递给工厂的服务定位器没有向主服务管理器（“service_manager”配置键）注册任何服务。这意味着助手工厂不能使用，例如，配置（`$serviceLocator->get('Configuration'`失败）。在视图助手工厂上下文中访问此类服务的推荐方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:54:25.410

尝试：

```
$serviceLocator->getServiceLocator()->get('Configuration'); 
```

这是因为视图助手和控制器插件不接收主服务定位器。例如，我的一个控制器插件接收一个`Zend\Mvc\Controller\PluginManager`.

# python - random.expovariate(rate) 和 numpy.random.poisson(quantity) 产生相同的平均值，但分布却大不相同。为什么是这样？

> ID：14620894
> 
> 赞同：1
> 
> 时间：2013-01-31T07:52:25.637
> 
> 标签：python, numpy, statistics, distribution, poisson

我正在对我们在整个公司使用的负载测试框架进行一些修改，这是一个我很想得到答案的问题。

我的印象是以下两种生成泊松分布的方法是等效的，但我显然错了：

```
#!/usr/bin/env python                                                                            

from numpy import average, random, std
from random import expovariate

def main():

    for count in 5.0, 50.0:
        data = [random.poisson(count) for i in range(10000)]
        print 'npy_poisson average with count=%d: ' % count, average(data)
        print 'npy_poisson std_dev with count=%d: ' % count, std(data)

        rate = 1 / count
        data = [expovariate(rate) for i in range(10000)]
        print 'expovariate average with count=%d: ' % count, average(data)
        print 'expovariate std_dev with count=%d: ' % count, std(data)

if __name__ == '__main__':
    main() 
```

这导致输出如下所示：

```
npy_poisson average with count=5:   5.0168
npy_poisson std_dev with count=5:   2.23685443424
expovariate average with count=5:   4.94383067075
expovariate std_dev with count=5:   4.95058985422
npy_poisson average with count=50:  49.9584
npy_poisson std_dev with count=50:  7.07829565927
expovariate average with count=50:  50.9617389096
expovariate std_dev with count=50:  51.6823970228 
```

为什么当我使用内置 random.expovariate 时标准偏差与给定间隔内的事件数量成比例，而 expovariate std_deviation 以对数基数 10（计数）的速率进行缩放？

后续问题：如果您要模拟用户与您的服务交互的频率，哪一个更合适？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T08:11:38.080

因为你的假设是错误的。泊松分布的均值/方差都是`lambda`，因此`stdev`是`sqrt(lambda)`。指数分布的均值/方差分别为`1/lambda`和`1/lambda^2`。这`std = sqrt(1/(1/rate)^2) = sqrt(rate^2) = rate`正是您在这里看到的。

对于您的后续问题，我建议阅读有关[排队理论的维基百科文章。](http://en.wikipedia.org/wiki/Queueing_theory#Role_of_Poisson_process.2C_exponential_distributions)

# javascript - 如何在这个疯狂的 jQuery 动画循环结束时“做一些事情”而不会出错？

> ID：14620896
> 
> 赞同：0
> 
> 时间：2013-01-31T07:52:32.347
> 
> 标签：javascript, jquery, dom, jquery-animate, jquery-masonry

我试图在这个疯狂的动画循环结束时“做一些事情”......我在动画结束时注释掉的警报效果很好......但是，我真正需要它做的是删除/隐藏具有 .item 类的最接近的 div（类似这样）

```
 var jremove = $(this).closest('.item').hide();
        $container.masonry('remove', jremove );

        //Then trigger a reload function for masonry
        reloadMasonry();   // not working yet 
```

当我尝试做任何事情但警告一条简单的消息时，我收到如下错误：

```
 Uncaught TypeError: Object #<HTMLImageElement> has no method 'closest' 
```

您可以在下面的动画底部看到它：

```
 jQuery(function ($) {

    $("body").on("click", ".clip_it", function () {
        if ($(this).parent().find(".clip_it").length<1){
            $(this).after('<a class="clip_it" href="javascript:void(0)" onclick="">CLIP IT!</a><img src="http://img.photobucket.com/albums/v29/wormholes201/animated-scissors.gif" class="ToBeAnimated">');
    }

    animationLoop($(this).closest(".item-inner").eq(0),$(this).parent().find(".ToBeAnimated").eq(0));
  });
});
  function animationLoop(ctx,ctx2) {
    ctx2.fadeIn();
     ctx2.css({
      top: (0 - parseInt(ctx2.height()) / 2),
       left: (0 - parseInt(ctx2.width()) / 2),
       position:"absolute",
       "z-index":800
    }).rotate(270);
    ctx2.animate({
      top: ctx.height() - ctx2.height() / 2
    }, 1000, function () {
      ctx2.animate({
        rotate: "180deg"
       }, 1000, function () {
         ctx2.animate({
          left: ctx.width() - ctx2.width() / 2
        }, 1000, function () {
           ctx2.animate({
             rotate: "90deg"
           }, function () {
             ctx2.animate({
               top: 0-ctx2.height() / 2
             }, 1000, function () {
              ctx2.animate({
                rotate: "0deg"
              }, function () {
                ctx2.animate({
                  left: (0 - parseInt(ctx2.width()) / 2)
                }, 1000, function () {
                  setTimeout(animationLoop(ctx,ctx2), 1000);

                //I want to remove the coupon (.item) & reload masonry here 
                // TEST ALERT WORKS = alert("animation complete");

                    var jremove = $(this).closest('.item').hide();
                    $container.masonry('remove', jremove );

                    reloadMasonry();
                    return false;
            });
          });
        });
      });
    });
  });
});
} 
```

如果您认为有更好的方法，我愿意接受其他建议？感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T08:01:59.477

> `Uncaught TypeError: Object #<HTMLImageElement> has no method 'closest'`

问题是在您准备好的处理程序`$` *之外*（您传递给的函数`jQuery(function($) { ... });`）没有指向 jQuery，它指向其他东西（我的猜测是 Prototype 或 MooTools）。所以`$(this)`返回一个`HTMLImageElement`（可能由 Prototype 或 MooTools 增强）而不是 jQuery 对象，因此它没有任何`closest`功能。

要么将该`animationLoop`函数移动*到*您的就绪处理程序中（因此它会看到`$`jQuery 传递到就绪处理程序而不是全局），或者在该函数中使用`jQuery`而不是。`$`

# c++ - 如何在 if () 语句中声明变量？

> ID：14620898
> 
> 赞同：23
> 
> 时间：2013-01-31T07:52:35.143
> 
> 标签：c++

> **可能重复：**
> [在 C++ 的条件或控制语句中声明和初始化变量](https://stackoverflow.com/questions/1516919/declaring-and-initializing-a-variable-in-a-conditional-or-control-statement-in-c)

而不是这个...

```
int value = get_value();
if ( value > 100 )
{
    // Do something with value.
} 
```

...是否可以将*价值*范围缩小到仅在需要的地方：

```
if ( int value = get_value() > 100 )
{
    // Obviously this doesn't work. get_value() > 100 returns true,
    // which is implicitly converted to 1 and assigned to value.
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-31T07:59:05.780

如果您想要特定的价值范围，您可以引入一个范围块。

```
#include <iostream>

int get_value() {
    return 101;
}

int main() {
    {
        int value = get_value();
        if(value > 100)
            std::cout << "Hey!";
    } //value out of scope
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-31T07:55:24.553

你能声明一个变量并在`if()`语句中比较它吗？不可以。
你可以声明一个变量并以范围与`if()`块紧密绑定的方式进行比较吗？**是的！**

* * *

您可以*声明*一个变量：

```
if (int x = 5) {
   // lol!
} 
```

**或者**你可以用一个来*做事*：

```
int x = foo();
if (x == 5) {
   // wahey!
} 
```

你不能两者都做！

* * *

您*可以*在只需要与 比较的地方作弊`true`，因为声明本身会计算新对象的值。

所以，如果你有：

```
int foo()
{
   return 0;
} 
```

然后这个：

```
if (int x = foo()) {
    // never reached
} 
```

相当于：

```
{
   int x = foo();
   if (x) {
       // never reached
   }
} 
```

* * *

这个最终的语法，使用一个独立的范围块，也是更复杂表达式的金子弹：

```
{
   int x = foo();
   if (x > bar()) {
       // wahooza!
   }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-31T08:02:02.143

把它放在一个函数中：

```
void goodName(int value) {
    if(value > 100) {
        // Do something with value.
    }
}

//...
    goodName(get_value()); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-31T07:56:39.180

改用怎么样`for`？

```
for (int value = get_value(); value > 100; value = 0) {
    //...
} 
```

如果你想使用 C++11，你可以使用 lambda：

```
[](int value = get_value()) {
    if (value > 100) {
        //...
        std::cout << "value:" << value;
    }
}(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-31T08:00:54.690

或者您可以为嵌套范围添加一组额外的大括号，尽管它并不完全漂亮：

```
{
    int value = get_value();
    if ( value > 100 )
    {
        // Do something with value.
    }   
}
//now value is out of scope 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-31T08:37:23.850

您可以编写一个可以为您进行比较并返回值的小函数，如果比较返回 true，否则返回`0`以避免执行`if`块：

```
int greater_than(int right, int left)
{
   return left > right ? left : 0;
} 
```

然后将其用作：

```
if ( int value = greater_than(100, get_value()))
{
      //wow!
} 
```

或者你可以`for`像其他答案所说的那样使用。或者手动放大括号来缩小变量的范围。

无论如何，我不会**在** 生产代码中编写这样的代码。

不要为机器编写代码。为人类编写代码。只要你遵循它们的语法，机器就会理解任何东西；人类了解他们可以阅读的内容。*因此，与不必要*的范围界定相比，可读性应该是您的优先事项。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-31T08:24:09.640

在这种特殊情况下，您可以避开它：

```
if (int value = (get_value() > 100 ? get_value() : 0)) {
    ...
} 
```

不过，我真的不推荐它。它不适用于您可能想要执行的所有可能的测试，并且它会调用`get_value()`两次。

# codeigniter - 使用 1 个系统、1 个数据库的 codeigniter 多应用程序

> ID：14620899
> 
> 赞同：0
> 
> 时间：2013-01-31T07:52:35.657
> 
> 标签：codeigniter, installation

我想用codeigniter实现以下文件结构：

www 上面的这些文件夹
`ci/system/...`
`ci/application/site_1/config/config.php`
`ci/application/site_2/config/config.php`

www 下的这些文件夹
`www/site_1/index.php`
`www/site_2/index.php`

两个站点都使用相同的 codeigniter 系统文件。
两个站点都具有相同的 php 代码。
Bot 站点使用不同的 mysql 表集，因为我只有 1 个 mysql 数据库，我打算使用表前缀来区分它们。例如。

站点1_
登录站点1_注册

site2_login
site2_register

关于如何配置 index.php 文件和 config.php 文件的任何建议，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:30:52.043

在 CodeIgniter 中应用程序文件夹与系统文件夹分开的想法是您可以拥有具有相同系统文件夹的不同应用程序。我将按如下方式构建它：

```
/base/system
/base/application_1
/base/application_2
/base/webroot/site_1/index.php
/base/webroot/site_2/index.php 
```

然后更改为 2 个 index.php 文件以指向相关`system`和`application`文件夹。在两个应用程序文件夹中，我也会指向相同的数据库详细信息。

# unit-testing - Grails：标准单元测试失败

> ID：14620904
> 
> 赞同：1
> 
> 时间：2013-01-31T07:52:54.327
> 
> 标签：unit-testing, grails, criteria, grails-2.0

我正在尝试测试以下操作：

```
def search = {
    //keep these values so we can rerender on the filters
    def cal=Calendar.getInstance()
    def startCal=Calendar.getInstance()
    def endCal=Calendar.getInstance()
    startCal.set(Calendar.HOUR, 0);
    startCal.set(Calendar.MINUTE, 0);
    startCal.set(Calendar.SECOND, 0);
    endCal.set(Calendar.HOUR, 0);
    endCal.set(Calendar.MINUTE, 0);
    endCal.set(Calendar.SECOND, 0);

    startCal.set(params.int('startDate_year')?:Calendar.getInstance().get(Calendar.YEAR) -10,params.int('startDate_month')?params.int('startDate_month')-1:Calendar.JANUARY,params.int('startDate_day')?:1)
    def startDate=startCal.getTime()
    endCal.set(params.int('endDate_year')?:Calendar.getInstance().get(Calendar.YEAR),params.int('endDate_month')?params.int('endDate_month')-1:cal.get(Calendar.MONTH),params.int('endDate_day')?:cal.get(Calendar.DATE))//cal.get(Calendar.MONTH) cal.get(Calendar.DATE)

    def endDate=endCal.getTime()

    flash.customer = params.customer
    flash.siteName = params.siteName
    flash.review_filter=params.review_filter
    flash.message=""
    flash.startDate=""
    flash.endDate=""
    if(params.startDate_year){
        flash.startDate=startDate
    }
    if(params.endDate_year){        
    flash.endDate=endDate   
    }   
    flash.success_filter=params.success_filter

    //Validation Check

    if(endDate>new Date()|| startDate>new Date()){
        flash.message=message(code: "date.endDate.greaterror")
        render(view:'list',model:[ auditInstanceList: null,auditInstanceTotal:0 ])
        return
    }

    if(startDate>= endDate){
        flash.message=message(code:"date.endDate.aftererror")
        render(view:'list',model:[ auditInstanceList: null,auditInstanceTotal:0 ])
        return

    }

    if(!params.max) {
        params.max = grailsApplication.config.AUDIT_SEARCH_MAX
    }

    def query
    def criteria = Audit.createCriteria()       

    query = {
        and{                
            //between("dateCreated",startDate,endDate)
        //  le("dateCreated",endDate)
            if(params.customer){
                ilike("customerName", params.customer + '%')
            }
            if(params.siteName){
                ilike("siteName", params.siteName + '%')
            }
            max:params.max
            offset:params.offset
            if(startDate){
                ge("dateCreated",startDate)
            }
            if(endDate){
                le("dateCreated",endDate)
            }
            if(params.review_filter=='true' ||params.review_filter=='false'){
                eq("reviewed", params.review_filter=='true' )
            }
            if(params.success_filter=='0'||params.success_filter=='1'){
                eq("success",params.success_filter.toInteger())
            }

        }
    }

    def results = criteria.list(params, query)

    render(view:'list', model:[ auditInstanceList: results,auditInstanceTotal:results.totalCount ])
    [auditInstanceList: results, auditInstanceTotal:results.totalCount]

} 
```

我使用了@Mock(Audit) 注释，但是当我运行测试时仍然出现空指针异常。我读到标准测试和 grails 2.1.0 存在问题。这是我的测试，它在最后一个断言上失败（它返回 null）。

```
 def populateValidParams(params) {
    assert params != null
    def now = new Date();
    def byesterday = new Date(now.getYear(), now.getMonth(), now.getDate()-2);
    println("byesterday"+byesterday)
    params["customerName"] = 'sky'
    params["siteName"] = '123456'
    params["userName"] = 'user'
    params["controllerName"] = 'control'
    params["actionName"] = 'action'
    params["arguments"] = 'arguments'
    params["success"] = 0
    params["msg"] = 'message'
    params["dateCreated"] = byesterday
    params["reviewed"] = false
}

   void testSearch() {

    populateValidParams(params)
    def audit=new Audit(params)
    audit.save(flush:true,failOnError: true)

    def now = new Date();
    def yesterday = new Date(now.getYear(), now.getMonth(), now.getDate()-1);

    //Search non existing customer
    params.customer='ks'
    params.siteName=''

    controller.search()
    assert model.auditInstanceTotal == 0        

    //Search case insensetive
    params.customer='SK'
    params.siteName=''
    params.endDate_year=''

    controller.search()     
    assert model.auditInstanceTotal == 1

} 
```

任何想法如何解决这个问题？

# ios - iOS FB SDK apprequests 的传入 URL 缺少 ref=notif、request_ids、app_request_type

> ID：14620908
> 
> 赞同：2
> 
> 时间：2013-01-31T07:53:12.990
> 
> 标签：ios, facebook-app-requests

我正在使用 iOS FB SDK（在 Parse F/W 中烘焙）发送应用请求邀请

`[facebook dialog:@"apprequests" andParams:params andDelegate:nil]`;]

请求正在正确发送，并且也显示在受邀者的帐户中。当我单击请求时，Facebook 应用程序会正确启动我的应用程序。此时，我正在检查传入的 URL 以处理和获取 request_ids 等。FB 上的示例代码（[http://developers.facebook.com/docs/tutorials/ios-sdk-games/requests/](http://developers.facebook.com/docs/tutorials/ios-sdk-games/requests/)）表示传入的 URL应为以下格式

```
fb480369938658210://authorize&expires_in=3600&access_token=xyz&target_url=http://m.facebook.com/apps/friendsmashsample?fb_source=notification&request_ids=abc&ref=notif&app_request_type=Duser_to_user 
```

但是，我收到这样的

```
fb123456789123456://authorize?expires_in=86400&access_token=BAADiMgKGSZB8BAD3ZCeZAGNkm7d8tGuNZAKuq5nThbNTdiZA1ZBFcp1bhIKp1cFvwDsOPZCZBIgowSwRkBnZARF5tBsyWHk0yLukZAK8ubNZA4ZCbkyQg619cg9v0SMqsaBzgwNbQZCdPZBSLoYwZDZD&
target_url=http%3A%2F%2Fwww.facebook.com%2Fappcenter%2F123456789123456 
```

所以这里缺少一些组件，比如 request_ids、ref=notif 等。

这里有什么明显的缺失吗？

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T09:10:15.930

对于未来的用户，我必须根据向 Facebook 提交的这个错误设置移动站点 URL - [https://developers.facebook.com/bugs/465760136778889/](https://developers.facebook.com/bugs/465760136778889/)

荒谬，但它有效。希望这个问题得到解决。不知道为什么他们有这种依赖。

# frameworks - 我可以在 Windows 2008 Server Standard SP1 上安装 Microsoft .NET Framework 4.5

> ID：14620922
> 
> 赞同：0
> 
> 时间：2013-01-31T07:54:39.623
> 
> 标签：frameworks, windows-server-2008, .net-4.5

我有带有 .Net FrameWork 3.5 sp1 的 Windows server 2008 标准服务包 1，我可以在不安装 Microsoft 框架 4.0 的情况下安装 Microsoft 4.5 框架吗？

此外，如果您[查看系统要求](http://www.microsoft.com/en-us/download/details.aspx?id=30653#system-requirements)，您会看到先决条件是 Windows Server 2008 SP2，而我只有 SP1，而且似乎无法安装 SP2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T20:35:03.247

I just installed 4.5 on Win2K8 Server and it installed fine (without installing 4.0 prior).

NOTE: In IIS the application pool will still show up at 4.0 although the 4.5 install succeeded.

# php - 我如何查询 wordnet 数据库（mysql）以获取单词的所有同义词和相似词？

> ID：14620925
> 
> 赞同：2
> 
> 时间：2013-01-31T07:54:51.930
> 
> 标签：php, mysql, sql

我已经使用此代码来获取定义：

```
//assuming you've connected to your MySQL db
$word=$_GET['s']; //This variable stores the value given through url
if (ctype_alpha($word)){ // If it's alphabetical
  $word_clean=mysql_real_escape_string($word); //Sanitize it for MySQL
}else{
  //Not a valid word, error handle
  exit();
}
$query='SELECT wordno FROM word WHERE lemma=`$word_clean` LIMIT 1';
$result=mysql_query($query);

$query='SELECT synsetno FROM sense WHERE wordno=`$wordno`';

$query='SELECT definition FROM synset WHERE synsetno=`$synset`'; 
```

但是现在我想获得该词的同义词和类似词（$word）；

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T07:57:42.630

```
SELECT  a.lemma, c.definition
FROM    word a
        INNER JOIN sense b
            ON a.wordno = b.wordNo
        INNER JOIN synset c
            ON b.synsetno = c. synsetno
WHERE   a.lemma = 'valueHere' 
```

要全面了解联接，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-11T15:34:05.120

使用带有 SQL 的 wordnet v3.0 快速获取同义词/相似词的方法：

```
SELECT w.lemma
FROM words AS w 
LEFT JOIN senses AS s ON s.wordid = w.wordid
LEFT JOIN senses AS s2 ON s2.synsetid = s.synsetid
LEFT JOIN words AS w2 ON w2.wordid = s2.wordid
WHERE w.lemma <> 'coder' 
AND w2.lemma = 'coder'
GROUP BY w.lemma
ORDER BY s.synsetid 
```

# google-maps - 如何知道哪个是城市和邮编的经纬度信息

> ID：14620928
> 
> 赞同：-1
> 
> 时间：2013-01-31T07:54:57.877
> 
> 标签：google-maps, google-maps-api-3

我正在向 google api 发送邮政编码并尝试捕获响应。

我得到了回应。到这一步还好

但我想将城市和邮政编码的纬度和经度信息存储在数据库中，但我无法从我得到的响应中了解哪个属于城市和邮政编码

```
"geometry" : {
            "bounds" : {
               "northeast" : {
                  "lat" : 40.75285390,
                  "lng" : -73.9901340
               },
               "southwest" : {
                  "lat" : 40.7509920,
                  "lng" : -73.99346389999999
               }
            },
            "location" : {
               "lat" : 40.75184549999999,
               "lng" : -73.99163440
            },
            "location_type" : "APPROXIMATE",
            "viewport" : {
               "northeast" : {
                  "lat" : 40.75327193029149,
                  "lng" : -73.9901340
               },
               "southwest" : {
                  "lat" : 40.75057396970850,
                  "lng" : -73.99346389999999
               }
            }
         } 
```

这是我收到的一小段回复。从这里你怎么能区分哪个是城市纬度值，哪个是邮政编码纬度值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:16:07.420

不是一个大谜团：

```
var latitude = geometry.location.lat;
var longitude = geometry.location.lng; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T08:22:59.793

坐标存储在 location 属性中

```
 "location" : {
               "lat" : 40.75184549999999,
               "lng" : -73.99163440
            } 
```

密切关注：

```
"location_type" : "APPROXIMATE" 
```

表示位置不准确。它指向最近的结果。如果您要求一个带有门牌号的地址，并且该号码在 google 的数据库中不存在，它会返回最接近的一个。

# c# - 如何使用 Hello World 控制台应用程序并引用文本以在 WinForm 标签中显示？

> ID：14620929
> 
> 赞同：1
> 
> 时间：2013-01-31T07:55:00.597
> 
> 标签：c#, oop

基本上，我试图将 WriteLine 的内容移动到 WinForm 中的标签框，作为面向对象编程的介绍。我相信我有一些语法错误，而且我知道我有 writeline 的方法是无效的。因此，感谢任何帮助使其正常工作。这只是我所做的尝试之一。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;
using ConsoleHelloWorld.Program;

namespace WindowsFormHelloWorld
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
            string words = new ConsoleHelloWorld.Program.Main(words);
            label1.Text = words;

        }
    }
} 
```

这是我引用的代码。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ConsoleHelloWorld
{
    public static class Program
    {
        public static void Main(string[] args)
        {
            string words = "hello world";
            Console.WriteLine(words);
            Console.ReadLine();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:04:02.403

您的`words`变量是**本地**变量，即它的范围是声明它的方法，即`Main`. 在该方法之外，您无法引用它。

要使变量可访问，您需要将其设为公共字段（或类的属性）。如果您需要在没有该类类型的实例的情况下访问它，则应声明该字段`static`。然后您的代码将如下所示：

```
public static class Program
{
    public readonly static string Words = "hello world";
    //...   
} 
```

假设 windows 应用程序项目在 windows 应用程序窗体中具有对控制台应用程序项目的引用，您可以编写：

```
string words = ConsoleHelloWorld.Program.Words; 
```

此外，您不需要启动控制台应用程序，除了您不会这样做（考虑 Cuong Le 的回答，如果您打算同时启动控制台和 Windows 应用程序）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T16:06:37.950

让它工作。原来我不正确地扎根。（我认为 root 的工作方式更像是 android 文件结构。）基本上，我创建了一个单独的类来保存 Hello World 变量，并且只是调用它来确定我是否想将字符串打印到控制台或 WinForm 应用程序。

初始代码块：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ConsoleHelloWorld
{

    public static class Program
    {
        public static class Hello
        {
            public static string words = "Hello World";
        }
       public static void Main(string[] args)
       {
           string word = ConsoleHelloWorld.Program.Hello.words;

           Console.WriteLine(word);
           Console.ReadLine();

       }
   }
} 
```

WinForm 调用类：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;
using ConsoleHelloWorld; //Program.Hello;

namespace WindowsFormHelloWorld
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
            string word = ConsoleHelloWorld.Program.Hello.words;
            label1.Text = word;

        }
    }
} 
```

在未来的项目中，我只会在自己的项目中保留由各种环境运行的代码。

# entity-framework - 在 Lightswitch 中禁用对属性的并发检查

> ID：14620930
> 
> 赞同：1
> 
> 时间：2013-01-31T07:55:03.080
> 
> 标签：entity-framework, visual-studio-lightswitch

Lightswitch 在 SaveChanges 中检查每个实体的每个属性的并发性。是否可以禁用对某些实体的某些属性的此检查？

例如： 实体 A：

*   属性 A（检查并发）
*   属性 B（不检查并发）

感谢您的回复。

# sql - T-SQL 视图可同时检索两个查找

> ID：14620947
> 
> 赞同：2
> 
> 时间：2013-01-31T07:56:32.547
> 
> 标签：sql, sql-server, tsql, views

如果我的问题听起来很愚蠢，我不是 SQL 专家，所以请原谅。

我有一个多重查找表：

ID ProID AmID

ID 是一个标识列，并在插入时自动生成 ID。ProID 和 AmID 链接到候选表中的 ID 列。

我需要创建一个视图，它将在单个视图中返回 Firstname Lastname AS Pro 和 Firstname Lastname AS Am，以及来自 Candidate 表的 ID。

```
ID Pro            ProID Am            AmID
1  Name Surname   1     Name Surname  2
2  Name Surname   3     Name Surname  78
etc 
```

我为 pro 和 am 候选人创建了两个单独的 select 语句，但不知道如何将它们合并到一个语句中？

```
SELECT  T2.[ID], 
        T2.[Firstname] + ' ' + T2.[Lastname] AS 'Pro'      
FROM [Teams] AS T1
INNER JOIN [Candidate] AS T2
    ON T1.ProID = T2.ID

SELECT  T2.[ID], 
        T2.[Firstname] + ' ' + T2.[Lastname] AS 'Am'       
FROM [Teams] AS T1
INNER JOIN [Candidate] AS T2
    ON T1.AmID = T2.ID 
```

我查了一下，似乎我需要对此进行 RIGHT JOIN ，但它搞砸了结果。

这种情况是否可能，还是我必须满足于对 SQL 的两个不同调用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T08:02:17.667

您基本上需要`Candidate`在您的表格上加入`Teams`表格两次，以便您可以获得每列的等效值。

```
SELECT  a.ID, b.ProID, c.AmID, 
        b.FirstName + ' ' + b.LastName as ProName, 
        c.FirstName + ' ' + c.LastName as AmName   
FROM    Teams a
        INNER JOIN candidate b
            ON a.ProID = b.ID
        INNER JOIN candidate c
            ON a.AmID = c.ID 
```

如果其中一列是*nullable*，`LEFT JOIN`则需要比`INNER JOIN`不匹配的值仍然在结果列表中。

要全面了解联接，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

创造`VIEW`

```
CREATE VIEW viewName
AS
    SELECT  a.ID, b.ProID, c.AmID, 
            b.FirstName + ' ' + b.LastName as ProName, 
            c.FirstName + ' ' + c.LastName as AmName   
    FROM    Teams a
            INNER JOIN candidate b
                ON a.ProID = b.ID
            INNER JOIN candidate c
                ON a.AmID = c.ID 
```

*   [TSQL 视图](http://www.devguru.com/technologies/t-sql/7143.asp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T08:01:40.113

试试这个`UNION`来得到你所有的结果：

```
SELECT 
   C.Id, 
   C.FIrstName + ' ' + C.LastName as Pro,
   'Pro' Type
FROM Teams T
   JOIN Candidates C ON T.ProdId = C.Id
UNION
SELECT 
   C.Id, 
   C.FIrstName + ' ' + C.LastName as Am,
   'Am' Type
FROM Teams T
   JOIN Candidates C ON T.AmId = C.Id 
```

如果您希望它们在单独的列中，那么这应该有效：

```
SELECT 
       C.Id as ProdId, 
       C.FIrstName + ' ' + C.LastName as Pro,
       C2.Id as AmId,
       C2.FIrstName + ' ' + C2.LastName as Am
    FROM Teams T
       JOIN Candidates C ON T.ProdId = C.Id
       JOIN Candidates2 C ON T.AmId = C.Id 
```

最后一点，根据您的 RDBMS，如果您需要在第一列中使用计数器，请考虑将 ROW_NUMBER() 用于 SQL Server 或 Oracle，或者为 MySQL 声明您自己的变量。

祝你好运。

# sql - 与前几个月建立表（累积）

> ID：14620948
> 
> 赞同：3
> 
> 时间：2013-01-31T07:56:33.080
> 
> 标签：sql, sql-server-2008

我对以下需要使用 SQL 查询（没有 plsql）解决的问题有点迷茫。这个想法是建立一个累积列来计算所有以前的月份。输入表看起来像

```
 Month
 1
 2
 3
 ..
 24 
```

我需要建立下表：

```
Month Cum_Month
1     1
2     1
2     2
3     1
3     2
3     3
..
24    1
...
24    23 
```

所有这些都在 SQL Server 2008 中，在此先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T08:12:27.437

你可以这样做：

```
DECLARE @tbl TABLE ([Month] INT)
INSERT @tbl VALUES
(1),(2),(3),(4),(5),(6),(7),(8),(9),(10),
(11),(12),(13),(14),(15),(16),(17),(18),(19),(20),(21),(22),(23),(24)

SELECT  Month
        ,   ROW_NUMBER() OVER (PARTITION BY Month ORDER BY Month) num
FROM    @tbl a
JOIN    
(
    SELECT  *
    FROM    master..spt_values 
    WHERE   type = 'P'
)
b ON b.number < a.Month 
```

`master..spt_values`用于生成数字，生成数字后将子查询的结果加入到 上`@tbl`，得到对应的行数`month`。之后`ROW_NUMBER`用于为每个月创建适当的序数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T08:17:22.670

这是一个不使用任何表格的非常酷的技巧：

```
SELECT N.Number as Month, N2.Number as Cum_Month
FROM 
   (SELECT Number FROM master..spt_values WHERE Number BETWEEN 1 AND 24 AND Type = 'P') N
   JOIN (SELECT Number FROM master..spt_values WHERE Number BETWEEN 1 AND 24 AND Type = 'P') N2 ON N.Number >= N2.Number
ORDER BY N.Number, N2.Number 
```

还有[小提琴](http://sqlfiddle.com/#!3/da78c/6)。

如果您真的不想要最后一个 24 24（为什么不），只需将第二个查询更改为 1 到 23 之间）。

# java - 奥姆莱特性能

> ID：14620949
> 
> 赞同：0
> 
> 时间：2013-01-31T07:56:33.837
> 
> 标签：java, android, performance, ormlite

我正在测试 Ormlite 的性能，我对此印象深刻。那怎么可能`testORMLITE_jobget()`更快`testORMLITE_getcursor()`呢？

```
public void testORMLITE_jobget() throws SQLException {
    Dao<Job, Integer> dao = dbhelper.getJobDao();
    List<Job> jobs = dao.queryForAll();
    for (Job job : jobs) {
        Log.i("OrmLite", job.getName());
    }
    dbhelper.close();
}

public void testORMLITE_getcursor() throws SQLException {
    SQLiteDatabase db = dbhelper.getReadableDatabase();
    Cursor c = db.rawQuery("select * from job", null);
    if (c.moveToFirst())
        while (c.moveToNext()) {
            Log.i("Cursor", c.getString(c.getColumnIndex("name")));
        }
    c.close();
    db.close();
} 
```

第二个问题：我是否以这种方式正确删除了外国收藏？

```
public void testORMLITE_jobdelete() throws SQLException{
    Job j = dbhelper.getJobDao().queryForId(5);
    dbhelper.getTagDao().delete(j.tags);
    dbhelper.getJobDao().delete(j);
} 
```

# java - 如何将 Tag 添加到 DefaultMutableTreeNode 以区分节点？

> ID：14620953
> 
> 赞同：1
> 
> 时间：2013-01-31T07:56:51.497
> 
> 标签：java, swing, jtree, treenode

我是 Java 新手`JTree`，我想添加一些节点，然后我想为控件制作一个[自定义渲染器](http://www.daniweb.com/software-development/java/threads/117886/jtree-with-different-icons-for-each-node)，以使每个节点都有不同的图标，因为我来自 ac# 背景，我想添加标签每个节点都使其成为选择图标的标准，有人可以帮助我吗？

PS：我不想在其字符串文本上切换大小写，因为它可能会从语言变为另一种

这是我用来添加节点的代码示例；

```
DefaultTreeModel model = (DefaultTreeModel) jTree1.getModel();
DefaultMutableTreeNode root = (DefaultMutableTreeNode) model.getRoot();

for (int j = 0; j < 5; j++) {
    DefaultMutableTreeNode node1 = new DefaultMutableTreeNode("Main :" + j);
    model.insertNodeInto(node1, root, root.getChildCount());

    for (int i = 0; i < 4; i++) {
        DefaultMutableTreeNode tmpnode = new DefaultMutableTreeNode(i);
        model.insertNodeInto(tmpnode, node1, node1.getChildCount());
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T08:01:27.040

```
public DefaultMutableTreeNode(Object userObject) 
```

构造函数可以获取任何对象。定义您自己的 NodeInfo 类，您可以在其中定义任何所需的字段。覆盖类的 toString() 应该产生简单的表示（或者您可以编写自定义渲染器）。

# gwt - 使用 jdk1.5.0_22 的 GWT 编译错误，适用于 jdk1.5.0_13

> ID：14620961
> 
> 赞同：0
> 
> 时间：2013-01-31T07:57:32.433
> 
> 标签：gwt, ant, jdk1.5

我正在开发一个由 GWT 小部件（GWT 1.7.0）组成的 tomcat Web 应用程序（tomcat 5.5.30）。

运行 ant 构建时，编译失败并出现以下错误：

...错误] 意外的内部编译器错误 [java] java.lang.StackOverflowError [java] at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1891) [java] at java.io.ObjectInputStream.defaultReadObject(ObjectInputStream.java :479) ...

我使用的JDK版本是jdk1.5.0_22。有趣的是，使用 JDK 版本 1.5.0_13 成功完成了构建。我也尝试使用 jdk1.5.0_18 构建，但它失败并显示相同的错误消息。

我在网上搜索，发现[了这个讨论](https://groups.google.com/forum/?fromgroups=#!topic/google-web-toolkit/JcmrGCRdJfQ)。我尝试了解决方案，但没有一个对我有用。

我无法找出在 jdk1.5.0 更新 13 之后我的构建失败的变化。

提前致谢。

# c# - 如何检查附加到 EF 上下文的 POCO 的状态？

> ID：14620965
> 
> 赞同：2
> 
> 时间：2013-01-31T07:57:43.493
> 
> 标签：c#, .net, entity-framework

检查作为 POCO（不是从 EntityObject 派生）并附加到 EF 上下文的实体的状态的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T08:01:42.157

如果您使用的是 DbContext 并且 c 是您的实体引用

```
 var state = Context.Entry(c).State; 
```

如果您使用的是 ObjectContext。

```
//if x is your entity reference
var state = context.ObjectStateManager.GetObjectStateEntry(x); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T08:07:11.130

如果您正在使用标识符字段并使用`DBContext`，则可以使用以下内容进行检查，假设`Id`实体是 entityId；

```
if(Context.Entities.Local.Any(q => q.Id == entityId))
{
    // already attached to the context
} 
```

参考[这个](http://msdn.microsoft.com/en-US/data/jj592872)：

> DbSet 的 Local 属性提供了对当前由上下文跟踪且尚未标记为已删除的集合实体的简单访问。访问 Local 属性永远不会导致将查询发送到数据库。

# r - 如何将两个向量组合成一个数据框

> ID：14620972
> 
> 赞同：30
> 
> 时间：2013-01-31T07:58:21.167
> 
> 标签：r, dataframe

我有两个这样的向量

```
 x <-c(1,2,3)
 y <-c(100,200,300)
 x_name <- "cond"
 y_name <- "rating" 
```

我想像这样输出数据框：

```
> print(df)
      cond rating
      1  x 1 
      2  x 2
      3  x 3
      4  y 100
      5  y 200
      6  y 300 
```

有什么办法呢？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-01-31T11:29:01.273

虽然这不能回答所提出的问题，但它回答了许多人提出的一个相关问题：

```
x <-c(1,2,3)
y <-c(100,200,300)
x_name <- "cond"
y_name <- "rating"

df <- data.frame(x,y)
names(df) <- c(x_name,y_name)
print(df)

  cond rating
1    1    100
2    2    200
3    3    300 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-31T08:02:39.230

```
x <-c(1,2,3)
y <-c(100,200,300)
x_name <- "cond"
y_name <- "rating"

require(reshape2)
df <- melt(data.frame(x,y))
colnames(df) <- c(x_name, y_name)
print(df) 
```

**更新（2017-02-07）：** 作为对@cdaringe 评论的回答 - 可能有多种解决方案，其中之一如下。

```
library(dplyr)
library(magrittr)

x <- c(1, 2, 3)
y <- c(100, 200, 300)
z <- c(1, 2, 3, 4, 5)
x_name <- "cond"
y_name <- "rating"

# Helper function to create data.frame for the chunk of the data
prepare <- function(name, value, xname = x_name, yname = y_name) {
  data_frame(rep(name, length(value)), value) %>%
    set_colnames(c(xname, yname))
}

bind_rows(
  prepare("x", x),
  prepare("y", y),
  prepare("z", z)
) 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-01-31T08:08:11.377

这应该可以解决问题，仅使用基本 R 来生成您要求的数据框：

```
df <- data.frame(cond=c(rep("x", times=length(x)), 
                        rep("y", times=length(y))), 
                 rating=c(x, y))

df
  cond rating
1    x      1
2    x      2
3    x      3
4    y    100
5    y    200
6    y    300 
```

但是，根据您最初的描述，我想说这可能是一个更有可能的用例：

```
df2 <- data.frame(x, y)
colnames(df2) <- c(x_name, y_name)

df2
  cond rating
1    1    100
2    2    200
3    3    300 
```

[编辑：在示例 1 中移动括号]

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-03-13T18:49:02.743

您可以使用 expand.grid( ) 函数。

```
x <-c(1,2,3)
y <-c(100,200,300)
expand.grid(cond=x,rating=y) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-31T08:28:05.300

这是一个简单的功能。它生成一个数据框并自动使用向量的名称作为第一列的值。

```
myfunc <- function(a, b, names = NULL) {
  setNames(data.frame(c(rep(deparse(substitute(a)), length(a)), 
                        rep(deparse(substitute(b)), length(b))), c(a, b)), names)
} 
```

一个例子：

```
x <-c(1,2,3)
y <-c(100,200,300)
x_name <- "cond"
y_name <- "rating"

myfunc(x, y, c(x_name, y_name))

  cond rating
1    x      1
2    x      2
3    x      3
4    y    100
5    y    200
6    y    300 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-31T08:07:15.747

`df = data.frame(cond=c(rep("x",3),rep("y",3)),rating=c(x,y))`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-09-09T14:46:37.803

[上面https://stackoverflow.com/users/1969435/gx1sptdtda](https://stackoverflow.com/users/1969435/gx1sptdtda)的 Alt 简化：

```
cond <-c(1,2,3)
rating <-c(100,200,300)
df <- data.frame(cond, rating)
df
  cond rating
1    1    100
2    2    200
3    3    300 
```

# android - 搜索栏增加值高达 100

> ID：14620974
> 
> 赞同：0
> 
> 时间：2013-01-31T07:58:25.410
> 
> 标签：android, android-intent, android-widget, seekbar

我有一个 max=25 的搜索栏。我想要做的是当用户将搜索栏拖到最大值并且它处于按下状态时，而不是在达到最大值后搜索栏仍然连续递增，即 26、27、28、.... 100。（如果按下搜索栏）

我尝试了两种使用循环和线程的方法，但它们不起作用。

我有一个文本视图，我在上面显示进度的价值，

这是代码。

```
public void onProgressChanged(SeekBar seekBar, int progress,
            boolean fromUser) {
         float p_prog = (float) (progress/10.0);
        // TODO Auto-generated method stub
        switch (seekBar.getId()) {
        case R.id.seekbar_bar:

            fat_count = p_prog;
            if (p_prog == 0) {

                txt_Fat.setBackgroundDrawable(res
                        .getDrawable(R.drawable.fat_at_null));
                txt_Fat.setText(p_prog + "g   ");

                first_plus.setVisibility(View.GONE);
                first_plus.setAnimation(null);
            } else if (p_prog > 0 && p_prog < 3) {
                txt_Fat.setBackgroundDrawable(res
                        .getDrawable(R.drawable.fat_green));
                txt_bottom_description.setText("Fat started");
                txt_Fat.setText(p_prog + "g   ");

            } else if (p_prog > 3 && p_prog < 20) {
                txt_Fat.setBackgroundDrawable(res
                        .getDrawable(R.drawable.fat_yellow));
                first_plus.setAnimation(null);
                first_plus.setVisibility(View.GONE);
                txt_Fat.setText(p_prog + "g   ");

            } else if (p_prog >= 20) {

                txt_Fat.setBackgroundDrawable(res
                        .getDrawable(R.drawable.fat_red));
                first_plus.setVisibility(1);
                first_plus.startAnimation(anim);
                txt_Fat.setText(p_prog+"g   ");

                if(s_Fat.isPressed() && p_prog >24){
                    for(float z=p_prog; z<100;z++){
                        txt_Fat.setText(z+"g   ");
                    }
                }

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T08:03:34.830

您需要使用 xml 属性`android:max`，例如

```
<SeekBar android:id="@+id/seekbartest"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:max="25"/> 
```

[请参阅此处](http://developer.android.com/reference/android/widget/ProgressBar.html#attr_android%3amax)的文档

# jenkins - 配置构建名称和构建 ID

> ID：14620983
> 
> 赞同：1
> 
> 时间：2013-01-31T07:59:02.020
> 
> 标签：jenkins

我在 RHEL 6.3 上使用 Jenkins 1.499。目前，构建 ID/名称只是一个数字或构建日期和时间。但我希望构建名称为 0.0.0.1 或 0.0.0.1-MMDD-${BUILD_NUMBER} （即，特定日期的内部版本号）。build-name-setter 插件只允许设置显示名称，而且太静态了。我怎样才能实现上述的东西？

问候，西努。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:52:33.047

我们已经能够使用[版本号插件](https://wiki.jenkins-ci.org/display/JENKINS/Version+Number+Plugin)实现类似的目标。您可以配置将值粘贴到哪个环境变量中，如何生成值（甚至来自其他环境变量），以及是否显示（默认）内部版本号或您创建的值。

# saxparseexception - Thymeleaf v2.0.15 SaxParse 异常 - 扫描仪状态不是 24

> ID：14620984
> 
> 赞同：4
> 
> 时间：2013-01-31T07:59:01.627
> 
> 标签：saxparseexception, thymeleaf

我正在尝试使用 Thymeleaf 模板引擎在我的 Spring Web 应用程序中生成电子邮件。我遵循了他们网站上的文档，但无论我的 HTML5 模板多么简单，我都会收到 SaxParseException。我正在使用 HTML 5 模板，如下所示。

```
<!DOCTYPE html> 
<html xmlns:th="http://www.thymeleaf.org">
   <head>
        <title th:remove="all">Account confirmation HTML email</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    </head>
    <body>
        <h3 th:utext="#{mail.template.confirmation.greeting(${user.firstName}, ${user.lastName})}"></h3>
        <p th:utext="#{mail.template.confirmation.introduction(${createdDate})}">
        </p>
    </body>
</html> 
```

我的弹簧配置。

```
@Bean
public ClassLoaderTemplateResolver emailTemplateResolver() {
    ClassLoaderTemplateResolver cltr = new ClassLoaderTemplateResolver();
    cltr.setPrefix("/dk/rfit/orderit/web/mail/");
    cltr.setSuffix(".html");
    cltr.setTemplateMode("HTML5");
    cltr.setCharacterEncoding("UTF-8");
    cltr.setOrder(3);
    cltr.setCacheable(true);
    return cltr;
}

@Bean
public TemplateEngine mailTemplateEngine() {
    SpringTemplateEngine ste = new SpringTemplateEngine();
    ste.setTemplateResolver(emailTemplateResolver());
    return ste;
} 
```

堆栈跟踪..

```
2013-01-31 08:01:33,431 [org.thymeleaf.TemplateEngine] [http-bio-8080-exec-10] (TemplateEngine.java:829) INFO  org.thymeleaf.TemplateEngine  - [THYMELEAF] INITIALIZING TEMPLATE ENGINE
2013-01-31 08:01:33,496 [org.thymeleaf.templateresolver.AbstractTemplateResolver] [http-bio-8080-exec-10] (AbstractTemplateResolver.java:99) INFO  org.thymeleaf.templateresolver.AbstractTemplateResolver  - [THYMELEAF] INITIALIZING TEMPLATE RESOLVER: org.thymeleaf.templateresolver.ClassLoaderTemplateResolver
2013-01-31 08:01:33,496 [org.thymeleaf.templateresolver.AbstractTemplateResolver] [http-bio-8080-exec-10] (AbstractTemplateResolver.java:110) INFO  org.thymeleaf.templateresolver.AbstractTemplateResolver  - [THYMELEAF] TEMPLATE RESOLVER INITIALIZED OK
2013-01-31 08:01:33,498 [org.thymeleaf.messageresolver.AbstractMessageResolver] [http-bio-8080-exec-10] (AbstractMessageResolver.java:72) INFO  org.thymeleaf.messageresolver.AbstractMessageResolver  - [THYMELEAF] INITIALIZING MESSAGE RESOLVER: org.thymeleaf.spring3.messageresolver.SpringMessageResolver
2013-01-31 08:01:33,499 [org.thymeleaf.messageresolver.AbstractMessageResolver] [http-bio-8080-exec-10] (AbstractMessageResolver.java:78) INFO  org.thymeleaf.messageresolver.AbstractMessageResolver  - [THYMELEAF] MESSAGE RESOLVER INITIALIZED OK
2013-01-31 08:01:33,506 [org.thymeleaf.TemplateEngine.CONFIG] [http-bio-8080-exec-10] (ConfigurationPrinterHelper.java:130) INFO  org.thymeleaf.TemplateEngine.CONFIG  - [THYMELEAF]     TEMPLATE ENGINE CONFIGURATION:
[THYMELEAF] * Cache Factory implementation: org.thymeleaf.cache.StandardCacheManager
[THYMELEAF] * Template modes:
[THYMELEAF]     * LEGACYHTML5
[THYMELEAF]     * VALIDXHTML
[THYMELEAF]     * HTML5
[THYMELEAF]     * XHTML
[THYMELEAF]     * XML
[THYMELEAF]     * VALIDXML
[THYMELEAF] * Template resolvers (in order):
[THYMELEAF]     * [3] org.thymeleaf.templateresolver.ClassLoaderTemplateResolver
[THYMELEAF] * Message resolvers (in order):
[THYMELEAF]     * org.thymeleaf.spring3.messageresolver.SpringMessageResolver
[THYMELEAF] * Dialect: org.thymeleaf.spring3.dialect.SpringStandardDialect
[THYMELEAF]     * Prefix: "th"
[THYMELEAF] TEMPLATE ENGINE CONFIGURED OK
2013-01-31 08:01:33,507 [org.thymeleaf.TemplateEngine] [http-bio-8080-exec-10] (TemplateEngine.java:842) INFO  org.thymeleaf.TemplateEngine  - [THYMELEAF] TEMPLATE ENGINE INITIALIZED
2013-01-31 08:09:52,146 [org.thymeleaf.TemplateEngine] [http-bio-8080-exec-10] (TemplateEngine.java:1173) ERROR org.thymeleaf.TemplateEngine  - [THYMELEAF][http-bio-8080-exec-10] Exception processing template "account-confirmation": Exception parsing document
2013-01-31 08:09:52,149 [dk.rfit.orderit.web.controller.AccountController] [http-bio-8080- exec-10] (AccountController.java:213) ERROR dk.rfit.orderit.web.controller.AccountController       org.thymeleaf.templateparser.xmlsax.AbstractNonValidatingSAXTemplateParser.parseTemplateUsingP     ool(AbstractNonValidatingSAXTemplateParser.java:167)       org.thymeleaf.templateparser.xmlsax.AbstractNonValidatingSAXTemplateParser.parseTemplate(Abstr actNonValidatingSAXTemplateParser.java:115)
at org.thymeleaf.TemplateRepository.getTemplate(TemplateRepository.java:276)
at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1192)
at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1148)
at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1095)
at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1008)
at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:982)

dk.rfit.orderit.web.service.EmailServiceThymeLeafImpl$1.prepare(EmailServiceThymeLeafImpl.java:65)
        at       org.springframework.mail.javamail.JavaMailSenderImpl.send(JavaMailSenderImpl.java:352)
        ... 73 more
Caused by: org.xml.sax.SAXException: Scanner State 24 not Recognized 
        at     com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1245    )
        at     com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:5    22)
        at javax.xml.parsers.SAXParser.parse(SAXParser.java:395)
        at       org.thymeleaf.templateparser.xmlsax.AbstractNonValidatingSAXTemplateParser.doParse(AbstractNon        ValidatingSAXTemplateParser.java:208)
        at          org.thymeleaf.templateparser.xmlsax.AbstractNonValidatingSAXTemplateParser.parseTemplateUsingP        ool(AbstractNonValidatingSAXTemplateParser.java:132)
        ... 82 more 
```

希望有人能告诉我该怎么做才能解决这个问题..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T12:32:52.373

除了 Vel 的回答：如果您需要通过 utext 插入无效的 XHTML，这对于 HTML5（如未封闭的 <br> 标签）可能非常好，您需要使用模板模式 LEGACYHTML5：

```
cltr.setTemplateMode("LEGACYHTML5"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T03:53:03.877

当解析的标记不是格式良好的 XML 时，解析器通常会引发此错误。html5模板文件解析后变为无效html文件。这意味着一些结束标记 (/>) 或不符合 XHTML 验证的额外标记。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-16T01:03:26.323

另一种选择是在 中指定属性`application.properties`：

```
spring.thymeleaf.mode=LEGACYHTML5 
```

在您的项目中具有`nekohtml`依赖性，例如在`pom.xml`

```
<dependency>
    <groupId>net.sourceforge.nekohtml</groupId>
    <artifactId>nekohtml</artifactId>
</dependency> 
```

是强制性的。

# android - fiewViewById 没有找到我的按钮（Eclipse）

> ID：14620988
> 
> 赞同：0
> 
> 时间：2013-01-31T07:59:25.093
> 
> 标签：android, eclipse

我从主网站下载了最新的 ADT，它随 Eclipse 一起提供。所以，我把一切都设置好了 > 开始新的 Android 项目。设置我的设置，并将活动设置为“空白活动”，单击完成。

现在，我进入可视化编辑器并添加一个按钮和一些文本。问题是，“findViewById”由于某种原因没有检测到按钮。是的，我“清理”了项目和所有这些......

这是xml部分：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/button1"
        android:layout_marginTop="37dp"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <EditText
        android:id="@+id/editText1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:ems="10" >

        <requestFocus />
    </EditText>

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/editText1"
        android:layout_marginTop="52dp"
        android:text="@string/button" />

</RelativeLayout> 
```

这是我的源代码：

```
package com.example.tcp;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.Button;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Button ibtn = (Button) findViewById(R.id.button1); // Error
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T08:10:24.450

你真的**保存**了activity_main.xml吗？在您保存正在处理的布局之前，项目的其余部分无法访问视图 ID。

我将您的代码直接复制并粘贴到一个空白项目中，保存后效果很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T08:07:56.030

它只是基本错误，因此请清理您的项目并再次构建，如果它不起作用然后重新启动 Eclipse 并再次启动它将显示您的按钮。以您遵循的相同方式

甚至不导入 R.java 它会显示错误..

如此干净并构建您的项目

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T08:08:15.653

在你的 TextView 你有

```
android:layout_below="@+id/button1" 
```

删除加号，这样你就有了

```
android:layout_below="@id/button1" 
```

此外，最好将 textview 的代码移动到按钮代码的下方。相对布局无论如何都会将它定位在它应该在的位置。但是这样你就不会链接到一个还不存在的 id。

你用 id 中的 + 声明一个 id。因此，在您的情况下，您声明了两次。

（当您在 StackOverflow 上发布有错误的内容时，也可以作为参考。请在所有情况下都提及错误。它可以让您更轻松地找到错误并帮助您。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T08:12:18.807

I looked at the R file and it was empty before I "ran" the project. After clicking "run" it added the id fields in the file. Seems to be working fine now. I guess it was actually a problem with the activity_main.xml not saving. Thanks again

# python - 在程序分发中包含 python 库

> ID：14620990
> 
> 赞同：0
> 
> 时间：2013-01-31T07:59:27.570
> 
> 标签：python, shared-libraries, software-distribution

有没有办法将 python 库与应用程序一起分发，以便无需任何安装即可运行它？该应用程序主要用于计算机实验室，用户无权安装全局库。理想情况下，用户只需解压缩文件夹并运行应用程序即可。可以假设如下：

*   python解释器存在
*   Linux操作系统

我需要的特定库是`matplotlib`，但我想找到一个通用的解决方案。我看过像 PyInstaller 这样的程序，但它们创建的程序非常大，启动速度很慢。它们还包括一个 Python 解释器，这是不必要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T08:17:26.627

首先，p2exe 仅适用于 Windows。

原则上，您可以将所有库放入 ZIP 文件中，以便使用应用程序扩展它们。最多您可能需要调整 PYTHONPATH 变量以指向 lib 的位置。

安装在路径上的模块和系统的 python 安装中的模块之间没有技术差异。

你看过[cxfreeze](http://cx-freeze.sourceforge.net/)吗？

# c# - SyncFX 的取消配置和重新配置不起作用？

> ID：14620991
> 
> 赞同：0
> 
> 时间：2013-01-31T07:59:28.000
> 
> 标签：c#, microsoft-sync-framework

所以，我有一个连接到两个数据库的同步 fx C# 项目。我目前正在为这两个项目添加配置，但在我配置之前，我首先取消配置，如代码中所示。

```
SqlSyncScopeProvisioning sqlAzureProv = new SqlSyncScopeProvisioning(sqlAzureConn, myScope);
SqlSyncScopeDeprovisioning sqlAzureDeprov = new     SqlSyncScopeDeprovisioning(sqlAzureConn);

sqlAzureDeprov.DeprovisionStore();

sqlAzureProv.Apply(); 
```

问题是，每次我调用该`Apply()`方法时，它都会抛出错误

> 为“更改”多次指定了“local_update_peer_timestamp”列。

我没有`local_update_peer_timestamp`在我的数据库中使用任何列，我已经检查了所有内容。

它仅在重新配置时发生，新的配置不会返回任何错误。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T06:53:20.973

只是把实际问题放在这里。

填充范围描述时，请确保您没有在同步范围描述中包含由 Sync Fx 创建的表（_tracking 表和 scope_xxx 表）。

这通常发生在您只扫描数据库中的所有表、循环它们并将它们添加到同步范围描述中时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-03T21:23:27.957

在使用范围（过滤器）进行配置的基本结构下方，如果您想要没有范围，只需：` // 定义一个名为 ProductsScope 的新范围 scopeDesc = new DbSyncScopeDescription(values);

```
 // get the description of the Products table from SyncDB dtabase
                    tableDesc = SqlSyncDescriptionBuilder.GetDescriptionForTable(values, serverConn);

                    // add the table description to the sync scope definition
                    scopeDesc.Tables.Add(tableDesc);

                    // create a server scope provisioning object based on the ProductScope
                    serverProvision = new SqlSyncScopeProvisioning(serverConn, scopeDesc);

                    // skipping the creation of table since table already exists on server
                    serverProvision.SetCreateTableDefault(DbSyncCreationOption.Skip);

                    // start the provisioning process
                    serverProvision.Apply();
                    //Console.WriteLine(values);` 
```

# jquery - 当不使用 id 传递表对象时循环遍历表中所有 td 元素的函数

> ID：14620993
> 
> 赞同：1
> 
> 时间：2013-01-31T07:59:36.377
> 
> 标签：jquery, jquery-selectors

我正在尝试使用 jQuery 创建一个函数，以便`<td>`在页面中有多个没有特定 ID 的表时循环遍历表中的每个表。

我了解如何[循环遍历 table 中的所有 td 元素](https://stackoverflow.com/questions/5193973/loop-through-all-td-elements-in-a-table)，即使[传递了 table id](https://stackoverflow.com/questions/11886570/looping-through-tr-when-table-id-is-passed)`<td>` ，但是当由其中一个子元素触发的函数必须使用父表时，我无法让它工作。

我已经尝试过（非常愚蠢）之类的东西

```
var tbl = $(this).closest('table');
$(tbl+" <td>").each(function() { 
```

但是当然这根本行不通。

我可以生成 id 以使事情变得更容易，但我确信只有使用 jQuery 才能更优雅地做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T08:02:43.110

试试这个

```
$("td", tbl).each(function() { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T08:04:43.043

试试这个：获取表的 id 并将其与`.each`.

```
var tbl = $(this).closest('table');
$(tbl).find("td").each(function() {
//do stuff here...
} 
```

**编辑：没有身份证....**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T08:06:05.143

试试这个 ：

```
var tbl = $(this).closest('table');
tbl.find('td').each(function() {
   var $td = $(this);//"this" keyword is current context;"td" element, so $(this) is a "TD  element" jquery object.

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T08:06:42.767

如果您在表中有任何元素，例如`this`来自事件处理程序，那么您可以这样做：

```
$(this).closest("table").find("td").each(function(index, element) {
    // you will get each td in the table here
}); 
```

# meteor - 使用 Meteor 中已经存在的集合

> ID：14620994
> 
> 赞同：3
> 
> 时间：2013-01-31T07:59:43.303
> 
> 标签：meteor

如何访问已经存在的 Meteor 集合？当您在会话中创建集合时，这很容易，因为您有一个引用它的变量，但您不能按名称访问集合。

例如，如果您想在新会话中从现有集合中检索文档，而该集合不是第一次创建，会发生什么情况。我试图“重新创建”它，希望它只是将现有集合分配给新的变量名称（看到我无法按名称找到它），但它只是抛出一个错误来告诉你集合已经存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T17:48:13.677

我有一些通过流星访问的外部生成的集合。我不是 100% 肯定这会回答你的问题，但我希望它至少会有所帮助。

一个问题（听起来并不适用于你，这里是为了完整性）是，如果你的集合**不是**由 Meteor 创建的，你需要导出一个环境变量来将 Meteor 指向你的数据库。例如，如果以下环境。变量在 shell 中导出：

```
MONGO_URL=mongodb://localhost:3002/foo 
```

...然后您调用流星应用程序，它将指向 MongoDb 中的数据库“foo”，此时您只需将您的集合定义为@Akshat 在他的评论中提到的上述内容：

```
collection = new Meteor.Collection("fooCollection") // this lives inside the foo DB. 
```

如果您正在处理 Meteor 已经创建的集合，默认情况下它们将位于流星数据库中，例如：

```
MONGO_URL=mongodb://localhost:3002/meteor 
```

...而且您应该能够以相同的方式简单地吸引它们；只需声明您的收藏并按照您的意愿使用它。显然，无需创建。

听起来你已经在这样做了，但对于像我这样的其他新手来说：在这种情况下，在 Chrome、Firefox 等中使用控制台并以这种方式进行一些插入非常方便——你会看到你的数据落在哪里，或者你会看到其他有用的信息可以帮助你解决这个问题——console.log() 已经保存了我的培根几次。

无论如何，验证 Meteor 应用程序指向的确切位置与您认为它指向的位置是值得的。您的收藏应该是可访问的，并且应该只是工作......

# rabbitmq - RabbitMQ 是否提供以下功能？

> ID：14620995
> 
> 赞同：-1
> 
> 时间：2013-01-31T07:59:51.063
> 
> 标签：rabbitmq, nservicebus

我最近在我的一个项目中使用了 N Service Bus，虽然我喜欢它，但我仍在寻找替代选项。我偶然发现了 RabbitMQ，但在尝试之前，我想了解以下内容：

1-可靠吗？（使用 N 服务总线，如果消息被发布到队列，侦听器总是会收到它）。

2-如果客户端关闭，它是否会在可用时自动获取消息？就像在 NSB 中一样。

3-资源是否轻量级（NSB非常轻量级）？

4-与.Net集成是否容易？

5- 管理面板是否可用于开源免费版本？

6- 如果消息没有被发布等，是否很容易追踪问题？（这就是 NSB 的痛处）

7-它是否支持复杂的场景，其中可能有 N 个消息的侦听器或需要侦听多个消息的单个侦听器等？

8-它可以从代码中配置吗？（我个人不喜欢使用 heave Config 文件，只是个人选择）

9- RabbitMQ 的 .Net API 是干净的还是使代码混乱？

请给我您的反馈。以上所有问题都与开源版本有关，我还不想购买许可版本。还建议是否有任何其他可用的选项。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T03:11:13.613

它可靠吗？（使用 N 服务总线，如果消息被发布到队列，侦听器总是会收到它）。

是的。此外，您可以更好地控制 rabbitmq 中的“可靠性”，例如，您可以指定队列是持久的（这意味着消息在传递之前会持久保存到磁盘）。

2-如果客户端关闭，它是否会在可用时自动获取消息？就像在 NSB 中一样。

是的。

3-资源是否轻量级（NSB非常轻量级）？

RabbitMq 是用 erlang 编写的，并作为它自己的进程运行。您可以深入了解它是如何消耗内存的，但实际的资源使用情况将取决于您的工作负载。

4-与.Net集成是否容易？

是的。基本的 rabbitmq C# 包装器非常易于使用，并提供了对 rabbitmq 概念的非常简单的抽象。如果您来自 NServiceBus（我相信它有一个 RabbitMQ 适配器），则可以使用更高级别的库。你应该看看 MassTransit，它可以使用 RabbitMQ 和 MSMQ 作为传输，以及像我自己的[栗鼠](https://github.com/jonnii/chinchilla)或 EasyNetQ 这样的库，它们只是 RabbitMQ。

5- 管理面板是否可用于开源免费版本？

是的。

6- 如果消息没有被发布等，是否很容易追踪问题？（这就是 NSB 的痛处）

是的。使用管理工具，您可以查看交换和队列之间的绑定。

7-它是否支持复杂的场景，其中可能有 N 个消息的侦听器或需要侦听多个消息的单个侦听器等？

是的。

8-它可以从代码中配置吗？（我个人不喜欢使用 heave Config 文件，只是个人选择）

是的。

9- RabbitMQ 的 .Net API 是干净的还是使代码混乱？

是的。