# StackOverflow 问答 15050000-15050999

# matlab - 如何在 MATLAB 中扫描多个结构？

> ID：15050003
> 
> 赞同：0
> 
> 时间：2013-02-24T08:30:24.827
> 
> 标签：matlab, structure

我有一些具有相似字段名称的结构数组（如结构 1、结构 2、结构 3、...）。我想扫描所有结构并仅返回第一个字段为 5（Field1==5）的结构。到目前为止我有这个代码，

```
for k=1:3
    s=sprintf('Structure%d',k)
    Structure=load(s)
    idx=cellfun(@(x) x==5, {Structure.Field1})
    out=Structure(idx)
    v{k}={Structure.Field1}
end 
```

但它给了我这个错误：

```
Reference to non-existent field 'Field1'. 
```

有人可以指出这里有什么问题吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T09:08:05.993

```
for k=1:3
    s=sprintf('Structure%d',k)
    Structure=load(s)
    eval(['newStructure(k)=Structure.' s]);
    idx(k)=cellfun(@(x) x==5, {newStructure(k).Field1})
end
%extract the structures from newStructure which have 1 in idx
out=newStructure(idx); %idx should be a logical array
for i=1:size(out,2)
    v(i)=out(i).Field1;
end 
```

这应该可以完美地工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T09:09:00.170

似乎您保存的某些结构中没有`'Field1'`字段。
在这种情况下，您可能想尝试其他方法。
首先定义一个函数（在m文件中）

```
function res = iff( cond, true_case, false_case )
%
% conditional execution of two function handles
% 
% true_case and false_case are function handles expecting no inputs
%
if cond
   res = true_case();
else
   res = false_case();
end 
```

一旦你有了这个功能，你就可以在`cellfun`

```
idx = cellfun( @(x) iff( isfield(x, 'Field1'), @() x.Field1 == 5, @() false), Structure ); 
```

# wordpress - 在 WordPress 中获取循环外的类别链接

> ID：15050006
> 
> 赞同：0
> 
> 时间：2013-02-24T08:30:57.363
> 
> 标签：wordpress, hyperlink, categories

有没有办法在循环之外获取类别链接？所以我可以把代码放在任何地方。如果我想例如：我想创建一个自定义标题类别，然后链接到特定类别

```
<a href="link_to_category"> CUSTOMTITLE </a> 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T09:43:21.653

您将使用`<?php get_the_category( $id ) ?>`，以下是来自 Codex 的相关参考。

[http://codex.wordpress.org/Function_Reference/get_the_category](http://codex.wordpress.org/Function_Reference/get_the_category)

请记住，帖子可以属于多个类别，因此它作为类别对象数组返回。要创建链接本身（我认为这可能只适用于启用永久链接），您可以使用`category_nicename`返回 slug 的属性。

您会在自定义面包屑中经常看到这种类型的东西，我在下面粘贴了一些代码。它使用数组中的第一个类别。请记住，如果您不使用循环来声明`$post`变量全局；

```
<?php
global $post;
$category = get_the_category();
$thisCat = $category[0];

echo '<a href="' . get_bloginfo('url') . '/' . $thisCat->category_nicename . '">CUSTOM TITLE</a>'; 
```

# java - Java JAI 相位相关

> ID：15050007
> 
> 赞同：2
> 
> 时间：2013-02-24T08:31:00.227
> 
> 标签：java, correlation, jai, phase

我的主要兴趣领域是生物医学图像处理。我有一组生物医学图像，我需要在它们之间找到相位。

对于计算图像之间的相位，我使用相位相关，但我不确定我是如何做到的。我正在使用“Java Advanced Imaging”库，我的代码是：

```
BufferedImage first = grayscale(first); 
BufferedImage second = grayscale(second);

RenderedOp dftFirst = DFTDescriptor.create(PlanarImage.wrapRenderedImage(first), DFTDescriptor.SCALING_NONE, DFTDescriptor.REAL_TO_COMPLEX, null); 
RenderedOp dftSecond = DFTDescriptor.create(PlanarImage.wrapRenderedImage(second), DFTDescriptor.SCALING_NONE, DFTDescriptor.REAL_TO_COMPLEX, null); 

RenderedOp conj = ConjugateDescriptor.create(dftSecond, null);  
RenderedOp conv = MultiplyComplexDescriptor.create(dftFirst, conj, null); 

RenderedOp abs = AbsoluteDescriptor.create(conv, null);
RenderedOp R = DivideComplexDescriptor.create(conv, abs, null);

RenderedOp idft = IDFTDescriptor.create(R, IDFTDescriptor.SCALING_DIMENSIONS, IDFTDescriptor.COMPLEX_TO_COMPLEX, null); 
RenderedOp magnitude = MagnitudeDescriptor.create(idft, null); 
RenderedOp shift = PeriodicShiftDescriptor.create(magnitude, new Integer(magnitude.getWidth() / 2), new Integer(magnitude.getHeight() / 2), null); 

RenderedOp opExtrema = ExtremaDescriptor.create(shift, new ROIShape(shift.getBounds()), 1, 1, Boolean.TRUE, 1, null); 
int[] maxLocation = (int[])((List[])opExtrema.getProperty("maxLocations"))[0].get(0); 
double[][] extrema = (double[][])opExtrema.getProperty("extrema"); 
double c = 255.0 / (extrema[1][0] - extrema[0][0]); 
double o = -extrema[0][0] * c; 

System.out.println("Maximum value " + extrema[1][0] + " found at (" + maxLocation[0] + "," + maxLocation[1] + ")"); 
```

[相位相关的测试图像和图像结果](http://imageshack.us/g/694/jaicorrout.png/)

我的问题是：

1.  JAI中相位相关的步骤是否正确？
2.  如何从 JAI 中的图像结果中获取相位大小？

谢谢

## 更新

第 2 点。解决了

```
int deltaX = maxLocation[0] - (conv.getWidth() / 2);
int deltaY = maxLocation[1] - (conv.getHeight() / 2); 
```

# mysql - 错误：在 centos6.3 上尝试从 5.1 升级到 mysql5.5 时，mysql55-libs 与 mysql-libs 冲突

> ID：15050009
> 
> 赞同：0
> 
> 时间：2013-02-24T08:31:55.980
> 
> 标签：mysql

错误：mysql55-libs 与 mysql-libs 冲突，同时尝试在 centos6.3 上从 5.1 升级到 mysql5.5 尝试使用 remi repo 并安装但无法看到 mysqld 服务

你能帮我解决这个问题吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T08:42:19.943

这是一个描述您需要的步骤的博客：

[http://blog.iphoting.com/blog/2012/06/19/upgrading-to-mysql-5-dot-5-on-centos-6/](http://blog.iphoting.com/blog/2012/06/19/upgrading-to-mysql-5-dot-5-on-centos-6/)

基本上，您必须删除`mysql-libs`5.1 包，然后安装 mysql55-libs 包。请注意，这可能与依赖于 mysql-libs 的任何其他包冲突，因此您可能必须禁用擦除和升级的依赖关系检查。

升级后的包应该有*提供*集，以便它满足其他包依赖项。

但不要引用我的话——如果我是你，我会先在 VM 上测试升级过程。

# ruby-on-rails - 如何在mongodb中搜索关系内的数据

> ID：15050010
> 
> 赞同：0
> 
> 时间：2013-02-24T08:32:29.007
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongodb, associations, mongoid

在这里，我在模型中有搜索操作

```
def self.search(search)
    if search
       self.or({date: /#{Regexp.escape(search)}/i}})
    else
       scoped
    end
  end 
```

现在它工作正常我也想添加对资产字段的搜索，但我有关系

```
 has_and_belongs_to_many :assets,:class_name => 'Asset' 
```

“asset_ids”：[ObjectId（“5093a6996d7ab80e41000008”）]

我也想搜索资产。

```
 self.or({date: /#{Regexp.escape(search)}/i},{asset.name: /#{Regexp.escape(search)}/i}) 
```

现在像这种格式一样，我也必须搜索资产名称。但这是错误的查询。任何的想法？由于资产 ID 通过资产 ID 在这里，我想搜索资产名称。这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:57:07.110

查看 mauriciozaffari 的 mongoid_search *gem*。它应该为您提供更完整的搜索选项。它应该能够搜索关系。我也理解它会拆分由空格进行的搜索，因此您将进行更彻底的搜索，请在[此处查看](https://github.com/mauriciozaffari/mongoid_search)

希望能帮助到你。

**编辑：**

我自己并没有真正使用过它，但据我所知，您需要采取以下步骤：>/p?

1）在你的gemfile中安装gem `gem 'mongoid_search'` （除非你使用mongoid 2.xx，在这种情况下将gem锁定在0.2.8）

2）从您要搜索的模型中添加

```
 class Product
      include Mongoid::Document
      include Mongoid::Search
      field :brand
      field :name

      has_many   :tags
      belongs_to :category

      search_in :brand, :name, :tags => :name, :category => :name
    end

    class Tag
      include Mongoid::Document
      field :name

      belongs_to :product
    end

    class Category
      include Mongoid::Document
      field :name

      has_many :products
    end 
```

所以，据我所知，你在这里所说的基本上是；我有一个模型`Product`，它有字段`brand`和`name`. `Product`可以有很多`Tags`并且可以有很多产品附加到一个`Category`. 然后你在产品模型中导入`Mongoid::Search`，定义你想要搜索的字段：`Product fields -> brand and name`也通过链接`has many`搜索`name`字段`Tags`并搜索`name`字段和**我认为**`Category`的模型！.

 **然后从这里您将能够调用：

`Product.full_text_search("value")`

它将搜索您的产品型号，`name`还有`brand`一些全文搜索选项，您应该从我放在上面链接中的 README.md 中查看它们。我认为最相关的是 `relevant_search`我认为允许您搜索模型关联

同样，我还没有使用过这个 gem，但这只是我从 README.md 中收集到的**

# apache - XHTML、Glassfish、Apache 和 Internet Explorer

> ID：15050014
> 
> 赞同：0
> 
> 时间：2013-02-24T08:33:04.713
> 
> 标签：apache, internet-explorer-8, xhtml, mime-types

当我在本地主机上运行 Glassfish 并尝试在 IE8 上加载 xhtml 文件时，我加载了页面。

我将 xhtml 文件上传到 Apache 服务器，并成功地从 Chrom、FF 和 IE9 访问它们。

另一方面，IE8 要求我下载 xhtml 文件，可能是因为它无法将这些文件识别为有效的 html 文件。

是否可以在不将文件更改为 .htm 或向文件中添加任何内容的情况下解决此问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T08:42:13.863

问题是 Internet Explorer（8 或 9）无法为 XHTML 处理正确的 mime 类型。

当您将扩展名更改为 html 时，Apache 将设置 html mime 类型。

解决方案是调整 Apache 配置以适应此问题。可以通过 mod_mime 或 mod_rewrite 完成。

这是 mod_rewrite 方式：

```
RewriteEngine on
RewriteCond %{HTTP_USER_AGENT} .*MSIE.*
RewriteCond %{REQUEST_URI} \.xhtml$
RewriteRule .* - [T=text/html] 
```

[http://www.ibm.com/developerworks/library/x-tipapachexhtml/index.html](http://www.ibm.com/developerworks/library/x-tipapachexhtml/index.html)

# ios - 通知中心的 NSTimer 秒表

> ID：15050016
> 
> 赞同：-1
> 
> 时间：2013-02-24T08:33:08.030
> 
> 标签：ios, objective-c, nstimer, stopwatch, notificationcenter

我在使用 NSTimer 并将秒表添加到通知中心时遇到问题；我对 Obj C 非常陌生，并且没有使用 Xcode。小部件编译并运行良好，但按下“开始：”没有任何作用，也没有 00.00.00。

```
#import "BBWeeAppController-Protocol.h"
#import "UIKit/UIKit.h"

static NSBundle *_NCTimerWeeAppBundle = nil;

@interface NCTimerController: NSObject <BBWeeAppController> {
    UIView *_view;
    UIImageView *_backgroundView;
    UILabel *stopWatchLabel;
}
@property (nonatomic, retain) UIView *view;
@property (nonatomic, retain) NSTimer *stopWatchTimer;
@property (nonatomic, retain) NSDate *startDate;
@property (nonatomic, retain) UILabel *stopWatchLabel;
@end

@implementation NCTimerController
@synthesize view = _view;
@synthesize stopWatchTimer = _stopWatchTimer;
@synthesize startDate = _startDate;
@synthesize stopWatchLabel = _stopWatchLabel;

+ (void)initialize {
    _NCTimerWeeAppBundle = [[NSBundle bundleForClass:[self class]] retain];
}

- (id)init {
    if((self = [super init]) != nil) {

    } return self;
}

- (void)dealloc {
    [_view release];
    [_backgroundView release];
    [super dealloc];
}

- (void)loadFullView {
    // Add subviews to _backgroundView (or _view) here.
    UIButton *start = [UIButton buttonWithType:UIButtonTypeCustom];
    [start setTitle:@"Start:" forState:UIControlStateNormal];
    start.frame = CGRectMake(0, 0, 79, 33);
    [start addTarget:self action:@selector(timerStart) forControlEvents:UIControlEventTouchDown];
    [_view addSubview:start];
}

- (void)updateTimer:(NSTimer*)theTimer
{

    NSDate *currentDate = [NSDate date];
    NSTimeInterval timeInterval = [currentDate timeIntervalSinceDate:self.startDate];
    NSDate *timerDate = [NSDate dateWithTimeIntervalSince1970:timeInterval];

    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"HH:mm:ss.SSS"];
    [dateFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0.0]];

    NSString *timeString = [dateFormatter stringFromDate:timerDate];
    self.stopWatchLabel.text = timeString;
}

- (void)timerStart
{
    self.startDate = [NSDate date];

    // Create the stop watch timer that fires every 10 ms
    self.stopWatchTimer = [NSTimer scheduledTimerWithTimeInterval:1.0/10.0
                                                           target:self
                                                         selector:@selector(updateTimer)
                                                         userInfo:nil
                                                          repeats:YES];

    UIButton *stop = [UIButton buttonWithType:UIButtonTypeCustom];
    [stop setTitle:@"Stop:" forState:UIControlStateNormal];
    [stop addTarget:self action:@selector(timerStop) forControlEvents:UIControlEventTouchDown];
}

- (void)timerStop
{
    [self.stopWatchTimer invalidate];
    self.stopWatchTimer = nil;
    [self updateTimer];
}

- (void)loadPlaceholderView {
    // This should only be a placeholder - it should not connect to any servers or perform any intense
    // data loading operations.
    //
    // All widgets are 316 points wide. Image size calculations match those of the Stocks widget.
    _view = [[UIView alloc] initWithFrame:(CGRect){CGPointZero, {316.f, 33.f}}];
    _view.autoresizingMask = UIViewAutoresizingFlexibleWidth;

    UIImage *bgImg = [UIImage imageWithContentsOfFile:@"/System/Library/WeeAppPlugins/StocksWeeApp.bundle/WeeAppBackground.png"];
    UIImage *stretchableBgImg = [bgImg stretchableImageWithLeftCapWidth:floorf(bgImg.size.width / 2.f) topCapHeight:floorf(bgImg.size.height / 2.f)];
    _backgroundView = [[UIImageView alloc] initWithImage:stretchableBgImg];
    _backgroundView.frame = CGRectInset(_view.bounds, 2.f, 0.f);
    _backgroundView.autoresizingMask = UIViewAutoresizingFlexibleWidth;
    [_view addSubview:_backgroundView];
}

- (void)unloadView {
    [_view release];
    _view = nil;
    [_backgroundView release];
    _backgroundView = nil;
    // Destroy any additional subviews you added here. Don't waste memory :(.
}

- (float)viewHeight {
    return 71.f;
}

@end 
```

提前致谢！它可能看起来像一团糟，因为它是..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T08:57:35.847

我认为您在创建 NSTimer 后缺少这一行：

```
[self.stopWatchTimer fire]; 
```

不知道您所说的“没有 00.00.00”是什么意思。尽管。

编辑：很抱歉忘记了这一点，如果您执行 scheduleTimerWithTimeInterval，则无需调用“fire”。但是选择器必须具有签名（在您的情况下）：

```
 - (void)updateTimer:(NSTimer*)theTimer {
...
}
self.stopWatchTimer = [NSTimer scheduledTimerWithTimeInterval:1.0/10.0
                                                           target:self
                                                         selector:@selector(updateTimer:)
                                                         userInfo:nil
                                                          repeats:YES]; 
```

计时器在该消息中发送自己。试试看。

# iphone - NSDocument 保存音频和视频文件

> ID：15050025
> 
> 赞同：0
> 
> 时间：2013-02-24T08:33:52.493
> 
> 标签：iphone, ios, media, nsdocument, nsdocumentdirectory

我有一个具有音频和视频文件下载功能的 ios 应用程序问题是我应该在哪里下载这些文件以及如何下载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T10:17:46.223

you can use `<AudioToolbox/AudioToolbox.h>`

create file like this

```
NSString *filePath = NSTemporaryDirectory();

filePath = [filePath stringByAppendingPathComponent:@"fileName.mp3"];

NSURL *fileURL = [NSURL fileURLWithPath:filePath]; 
```

write your audiostream description like this

```
AudioStreamBasicDescription des;
des.mSampleRate = 44000;
des.mBitsPerChannel = 16;
des.mChannelsPerFrame = 1;
des.mFramesPerPacket = 1;
des.mBytesPerFrame = 2;
des.mBytesPerPacket = 2; 
```

create audio file like this

```
AudioFileID audioFile;
audioErr = AudioFileCreateWithURL((CFURLRef)fileURL, 
                                 kAudioFileWAVEType,   
                                  &des,
                                  kAudioFileFlags_EraseFile,
                                  &audioFile); 
```

use `AudioFileWriteBytes(audioFile)`method to write it

# data-binding - CollectionViewSource 的 Source 从哪里初始化？

> ID：15050029
> 
> 赞同：0
> 
> 时间：2013-02-24T08:34:26.083
> 
> 标签：data-binding, windows-store-apps, winrt-xaml

我使用 ItemsPage 模板在 vs 2012 中创建了一个项目。

```
<!-- Collection of items displayed by this page -->
    <CollectionViewSource
        x:Name="itemsViewSource"
        Source="{Binding Items}"/> 
```

这里的 {Binding Items} 是什么意思？我在 Windows Store 项目的 ItemsPage 中看到它。新的 ItemsPage 有一个基类 Common.LayoutAwarePage ，其中定义了 DefaultViewModel ，它指向一个 IMap 集合。此集合没有任何 Items 属性，那么 Source 如何在此处指向 Items？

谢谢卡哈尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T16:45:20.540

如果您查看后面的代码，`LoadState`您会看到：

```
protected override void LoadState(Object navigationParameter, Dictionary<String, Object> pageState)
{
    // TODO: Create an appropriate data model for your problem domain to replace the sample data
    var sampleDataGroups = SampleDataSource.GetGroups((String)navigationParameter);
    this.DefaultViewModel["Items"] = sampleDataGroups;
} 
```

这里的关键`DefaultViewModel`是“项目”，它与`CollectionViewSource`绑定相匹配。

“Items”集合的每个元素都是一个`SampleDataGroup`，然后`GridView`在模板中稍后绑定到一个项目。

# c - 在 C 中读取文件 - 范围和上下文问题

> ID：15050030
> 
> 赞同：1
> 
> 时间：2013-02-24T08:34:25.900
> 
> 标签：c, parsing, file-io, scope

我必须解析一个文件，该文件有几个由空行分隔的条目。每个条目具有以下格式：

```
ab bababa
2
ab bba
b ba 
```

在哪里：

1.  第一行：将有两个单词用空格分隔。
2.  第二行：将有一个整数，表示需要考虑多少行
3.  下一行：将有每个两个单词，用空格分隔。

在每个条目的末尾，我需要调用一个函数并传递条目中的一些参数。具体来说，我需要传递在第一行中找到的前两个单词和一个数组，该数组将包含表示整数之后的行的结构。结构定义如下所示：

```
typedef struct t_transformation_rule {
    char *needle;
    char *replacement;
} transformation_rule; 
```

正如我所说，一个文件可以有多个条目。因此，特定文件可能如下所示：

```
ab bababa
2
ab bba
b ba

a abba
3
a bb
bb abba
a abba

abcd abcd
0

abab bbbaaa
2
ab aaa
ab bbb 
```

这是我为解析它所做的，但我遇到了麻烦，因为当我找到数字时，我初始化了一个结构数组，然后我尝试使用该数组并存储下一行，但该变量是超出范围。这是代码：

```
void processFile(char *file_name)
{
    char buff[120];
    char needle[20], replacement[20];
    char origin[20], target[20];

    int num, rule_counter;
    size_t len;

    int context,rc;
    transformation_rule *rules_list;

    context =0;
    rule_counter = 0;

    FILE *in = fopen(file_name,"r");

    if (in != NULL) {
      while(fgets (buff, sizeof buff, in)) {
        len = strlen (buff);
        while (len && buff[len-1] == '\n') {
          buff[--len] = 0;
        }
        if (context == 0) {
          rc = sscanf(buff, "%s %s", origin, target);
          context = 1;
        }
        if (context == 1) {
          rc = sscanf(buff, "%d", &num);
          transformation_rule rules_list[num];
          context = 2;
        }
        if (context == 2) {
          if (!len) {
              context = 0;
              continue;
          }
          rc = sscanf(buff, "%s %s", needle, replacement);
          transformation_rule *rule = malloc(sizeof(transformation_rule));

          rule->needle = needle;
          rule->replacement = replacement;

          // HERE I GET THE ERROR SAYING THAT RULES_LIST IS NOT DEFINED
          rules_list[rule_counter] = rule;
          rule_counter++;
        }

      }
    }
} 
```

如果你们能告诉我我做错了什么，或者我怎么能更容易做到这一点，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T20:40:45.973

是的，它可以更简单地完成：您正在阅读部分，`fscanf`然后使用`sscanf`. 这*很好*，但在**这种情况下**，这可能是您正在寻找的：

```
#include "stdlib.h"
#include "stdio.h"
#include "string.h"
void process(char* start, char* target, int cRules, char** froms, char** tos) {
    // work with it
}
int main(int argc, char** argv) {
    if(argc!=2) { 
        printf("need filename\n");
        return 1;
    }
    FILE* f = fopen(argv[1], "rb");
    if(!f) {
        printf("wrong filename\n");
        return 2;
    }
    char* start = malloc(1000);
    char* target = malloc(1000);
    int cRules;
    while(fscanf(f, "%s %s %i", start, target, &cRules)!=EOF) {
        printf("\ntask %s->%s\nnumber of rules %i\n", start, target, cRules);
        char** froms = malloc(cRules*sizeof(char*));
        char** tos = malloc(cRules*sizeof(char*));
        int iRule = 0; for(; iRule<cRules; ++iRule) {
            froms[iRule] = malloc(100);
            tos[iRule] = malloc(100);
            if(fscanf(f, "%s %s", froms[iRule], tos[iRule])==EOF) {
                printf("format error\n");
                fclose(f);
                return 3;
            };
            printf("rule %i %s->%s\n", iRule, froms[iRule], tos[iRule]);
        }
        process(start, target, cRules, froms, tos);
        for(iRule = 0; iRule<cRules; ++iRule) {
            free(froms[iRule]);
            free(tos[iRule]);
        }
        free(froms);
        free(tos);
    }
    free(start);
    free(target);
    fclose(f);
    return 0;
} 
```

# c# - 在没有文件处理程序的情况下保护静态图像/文件

> ID：15050034
> 
> 赞同：1
> 
> 时间：2013-02-24T08:34:51.150
> 
> 标签：c#, asp.net

我在 asp.net 中有网站，用户可以在该网站上登录和上传图像/文件/Pdf 等。我将文件/图像保留在服务器上，因此图像上传时间仍然很低。

www.MyWeb.com/UserFolder/Img.jpg

我担心的是，当任何用户登录并查看任何图像时，图像都会保留在浏览器缓存中。所以即使用户退出，任何人都可以访问图像。通过点击 www.MyWeb.com/UserFolder/Img.jpg

我怎样才能保护图像？有几个帖子建议编写文件处理程序，但我想将图像保留在服务器上，并且不想在单击图像时发送请求。

如何保护缓存在浏览器中的静态内容？

任何帮助表示赞赏...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T08:38:12.177

如果您使用的是 IIS，只需使用表单（或 Windows）身份验证来保护文件夹，这会告诉 IIS，只要用户经过身份验证，它就只能提供文件。[http://technet.microsoft.com/en-us/library/cc771077(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc771077(v=ws.10).aspx)

建议可能不是文件处理程序，而是 HTTP 处理程序，但这对于您当前的需求来说有点太复杂了。

对于缓存，您始终可以选择在来自服务器的 Web 响应的标头中设置缓存。[http://msdn.microsoft.com/en-us/library/06bh14hk(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/06bh14hk(v=vs.100).aspx)

编辑：

好的，对于您在评论中解释的场景，我猜您没有使用 asp.net 引擎，您只是将 IIS 中的图片文件夹作为 Web 应用程序发布。这就是为什么您无法控制渲染的原因。您要做的是创建一个处理图片的网页，然后为图片发送一个参数，例如：picture.aspx?id=picture1 并且例如在加载页面中检查是否允许用户查看图片（您已经知道该帐户，因为他已登录）因此，如果允许该用户，您只需创建一个 Response.write 来提供图片，否则您可以说： Response.Write('You are now allowed to see this') . 这个想法是你需要一个中间人，这就是你使用 asp.net 的原因。

让我知道是否有帮助，

# objective-c - CABasicAnimation 当前经过时间

> ID：15050036
> 
> 赞同：13
> 
> 时间：2013-02-24T08:35:02.360
> 
> 标签：objective-c, xcode, core-animation

我只是从一个愚蠢的while循环（触发drawRect：x次）重写了一个相当大的动画，这是我无法弄清楚的最后一件事..

如何获取动画的当前经过时间？我知道如何获取当前的 CFTimeInterval （[有没有办法暂停 CABasicAnimation？](https://stackoverflow.com/questions/2306870/is-there-a-way-to-pause-a-cabasicanimation)）：

```
CFTimeInterval currentTime = [self.multiplierLayer convertTime:CACurrentMediaTime() fromLayer:nil]; 
```

但是如何使用它来计算从动画开始的那一刻起的当前经过时间？beginTime 似乎总是 0.0，我是否必须设置动画开始的那一刻，然后从 beginTime 中提取 currentTime？

对不起，如果我忽略了一些简单的事情，我昨天才开始使用 Core Animation。:)

**编辑：** 设置 beginTime**不是**这样做的方法，在这里真的很茫然。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-01-08T10:48:04.713

一种可能更简单的方法是在创建 CABasicAnimation 时明确设置开始时间，例如：

```
basicAnimation.beginTime = CACurrentMediaTime(); 
```

稍后您可以计算出经过了多少时间：

```
CFTimeInterval elapsedTime = CACurrentMediaTime() - basicAnimation.beginTime; 
```

并通过以下方式获得百分比：

```
progress = elapsedTime / basicAnimation.duration; 
```

（如果你有 timeOffset 或类似的东西，代码会稍微复杂一些。）

# c - 我在c中访问错误（超出范围）char数组索引吗

> ID：15050038
> 
> 赞同：1
> 
> 时间：2013-02-24T08:35:22.167
> 
> 标签：c, arrays, null, indexing, int

假设我们在 c 中有一个字符数组，例如，

```
char a[20]; 
```

我们可以像这样访问索引 20 来放置终止 NULL。

```
a[20]='\0'; 
```

但在我的算法中。（“这是整数到 char 数组转换器”）如果最后一个索引小于 char 数组的大小，则必须将终止 NULL，例如，

如果我的 int 的大小为 4（“1421”），那么我必须将“1”放在索引 0 处，将“4”放在索引 1 处，将“2”放在索引 2 处，将“1”放在索引 3 处。

最后在索引 4 处终止 NULL

```
index=4;
a[index]='\0'; 
```

修复相同代码的另一种方法，

```
if(index<20)  (Will increase one condition)
    a[index]='\0'; 
```

但我只是想知道是否有可能......将终止 NULL 放在索引 20 处。

**好的，我**得到了每个人的帮助，非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T08:37:24.690

一个数组`char a[20]`有 20 个字符的空间，索引从 0 到 19。写入`a[20]`是在数组外部写入，并且会产生不可预知的后果。限制为 20 个字符，*包括任何终止*NULL 字符。如果您需要 20 个字符加上终止 NULL 的空间，则需要将数组声明为`char a[21];`. 此外，声明`a[20]`不会在任何地方放置 NULL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T08:37:57.463

`char a[20]`: 20 表示您可以从`0-19`. 并且假设您最多只能使用 19。如果您最多填写 20，那么您将收到错误消息。

将其更改为：

`a[20+1] => a[21]`现在你可以用 20 来放`\0`.`a[20]='\0'`

@AnkeshKushwah 的代码

```
int main()
{
char arr[4]="hell";  
printf("%c",arr[4]); // here you will see garabage. 
printf("%c",arr[5]); // here is the terminating character. after 4.
char arr[]="hell";   
printf("%c",arr[4]); // here you will see terminating character.Because hell will take 
                        0-3 and 4 contains \0 
getch();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T08:40:36.630

考虑用全零初始化您的 char 数组：`char a[20] = { 0 };`

这样，无论你写了多少个字符（最多 19 个），你总是以 null 结尾。

# android - 在 Mac 上构建 mupdf 1.1 时出错

> ID：15050042
> 
> 赞同：0
> 
> 时间：2013-02-24T08:35:47.223
> 
> 标签：android, android-ndk, mupdf

我正在使用最新的 mupdf-1.1-source.tar.gz、mupdf-thirdparty-2012-08-14.zip 和 ndk-r8d，我正在尝试在 mac 终端上构建 mupdf。几个月前，我已经在 windows 上使用旧版本 mupdf 可能 0.9 完成了此操作，但现在在 mac 上出现此错误

```
ndk-build
Gdbserver      : [arm-linux-androideabi-4.6] libs/armeabi/gdbserver
Gdbsetup       : libs/armeabi/gdb.setup
Gdbserver      : [arm-linux-androideabi-4.6] libs/armeabi-v7a/gdbserver
Gdbsetup       : libs/armeabi-v7a/gdb.setup
Compile thumb  : mupdf <= mupdf.c
Compile thumb  : mupdfcore <= base_context.c
Compile thumb  : mupdfcore <= base_error.c
Compile thumb  : mupdfcore <= base_geometry.c
Compile thumb  : mupdfcore <= base_getopt.c
Compile thumb  : mupdfcore <= base_hash.c
Compile thumb  : mupdfcore <= base_memory.c
Compile thumb  : mupdfcore <= base_string.c
Compile thumb  : mupdfcore <= base_time.c
Compile thumb  : mupdfcore <= crypt_aes.c
Compile thumb  : mupdfcore <= crypt_arc4.c
Compile thumb  : mupdfcore <= crypt_md5.c
Compile thumb  : mupdfcore <= crypt_sha2.c
Compile thumb  : mupdfcore <= dev_bbox.c
Compile thumb  : mupdfcore <= dev_list.c
Compile thumb  : mupdfcore <= dev_null.c
Compile thumb  : mupdfcore <= dev_text.c
Compile thumb  : mupdfcore <= dev_trace.c
Compile thumb  : mupdfcore <= doc_document.c
Compile thumb  : mupdfcore <= doc_link.c
Compile thumb  : mupdfcore <= doc_outline.c
Compile thumb  : mupdfcore <= filt_basic.c
Compile thumb  : mupdfcore <= filt_dctd.c
Compile thumb  : mupdfcore <= filt_faxd.c
Compile thumb  : mupdfcore <= filt_flate.c
Compile thumb  : mupdfcore <= filt_jbig2d.c
Compile thumb  : mupdfcore <= filt_lzwd.c
Compile thumb  : mupdfcore <= filt_predict.c
Compile thumb  : mupdfcore <= image_jpx.c
Compile thumb  : mupdfcore <= image_jpeg.c
Compile thumb  : mupdfcore <= image_png.c
Compile thumb  : mupdfcore <= image_tiff.c
Compile thumb  : mupdfcore <= res_colorspace.c
Compile thumb  : mupdfcore <= res_font.c
Compile thumb  : mupdfcore <= res_path.c
Compile thumb  : mupdfcore <= res_pixmap.c
Compile thumb  : mupdfcore <= res_shade.c
Compile thumb  : mupdfcore <= res_store.c
Compile thumb  : mupdfcore <= res_text.c
Compile thumb  : mupdfcore <= stm_buffer.c
Compile thumb  : mupdfcore <= stm_open.c
Compile thumb  : mupdfcore <= stm_read.c
Compile thumb  : mupdfcore <= draw_affine.c
Compile thumb  : mupdfcore <= draw_blend.c
Compile thumb  : mupdfcore <= draw_device.c
Compile thumb  : mupdfcore <= draw_edge.c
Compile thumb  : mupdfcore <= draw_glyph.c
Compile thumb  : mupdfcore <= draw_mesh.c
Compile thumb  : mupdfcore <= draw_paint.c
Compile thumb  : mupdfcore <= draw_path.c
Compile thumb  : mupdfcore <= draw_simple_scale.c
/var/folders/13/t2hb6n5964qf3vcy1_w1gyg00000gn/T//ccpBK4tU.s: Assembler messages:
/var/folders/13/t2hb6n5964qf3vcy1_w1gyg00000gn/T//ccpBK4tU.s:2384: Error: lo register required -- `str fp,[sp,#-4]!'
/var/folders/13/t2hb6n5964qf3vcy1_w1gyg00000gn/T//ccpBK4tU.s:2390: Error: lo register required -- `add fp,sp,#0' 
```

并且此错误`lo register required`持续良好的 30-40 行。

我已经到处搜索，但找不到任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:06:45.857

MuPdf 适用于 mupdf-1.1、android-ndk-r8b（注意不要下载 android-ndk-r8d）、cygwin-2.774

下载 cygwin 时下载 make、gcc 命令和其他所需库的库..！

然后，如果您遇到任何问题...我会尝试解决..！

# opencl - OpenCL SDK 概述和硬件互操作性

> ID：15050043
> 
> 赞同：0
> 
> 时间：2013-02-24T08:35:59.813
> 
> 标签：opencl, gpu, gpgpu

在谈到 OpenCL 开发时，我对整体情况有点困惑，所以我将我目前的理解和问题列成一个列表。如果我错了，请纠正我。

1.  我知道英特尔、AMD 有 SDK（“平台”）（我猜 Nvidia SDK 中也有 OpenCL 支持？）

2.  是否有其他供应商的 SDK？

3.  一个供应商的 SDK 会支持另一个供应商的设备吗？例如带有 AMD sdk 的 Nvidia 设备？我可以使用 AMD SDK 在我的 Intel CPU 上运行程序。

4.  这是一次安装多个平台并在运行时处理它们的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T16:50:02.950

1) Intel SDK 为 CPU 和 GPU 设备（例如 i7、HD4000、Xeon Phi 等）提供 OpenCL 1.2 支持，AMD SDK 为 CPU 和 GPU 设备（例如 Opteron、HD5xxx、HD6xxx、HD7xxx 等）提供 OpenCL 1.2 支持.)，NVIDIA SDK 仅为 GPU 提供 OpenCL 1.1 支持（例如 GTX 2xx、GTX 4xx、GTX 5xx、Tesla 等）。

2) 是的，来自 Apple、ARM 等。

3) 是的，感谢 OpenCL ICD，您可以在 NVIDIA SDK 上编译可执行文件并在 AMD 硬件上运行。但是，您必须小心使用 OpenCL 版本，使用 OpenCL 1.2 SDK 编译并在 1.1 上运行可能会出现一些问题。平台。

4) 是的，您可以在运行时查询 OpenCL 以获取可用平台列表并使用其中一个或全部。我将日常使用的 Intel OpenCL CPU 设备与多个 AMD OpenCL GPU 设备并排使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T16:43:13.007

这是[How to use 2 OpenCL runtimes](https://stackoverflow.com/questions/14834403/how-to-use-2-opencl-runtimes)的副本，已回答。简短的回答：SDK 只是为您提供标题。安装的驱动程序提供平台和设备。您可以使用任何已安装的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T19:29:47.120

Intel OpenCL SDK 支持用于 CPU 的 OpenCL 1.2，但仅支持用于 Intel HD 的 OpenCL 1.1。引用他们的网页“OpenCL 1.2 on CPU with OpenCL 1.1 on Intel® HD Graphics”。但是，Intel HD 的驱动程序似乎不是很好。它在运行在其他所有东西上的大多数代码上崩溃。

Nvidia SDK 不包含 C++ 绑定文件 cl.hpp。您可以从另一个 SDK 复制它或从 Khronos Group OpenCL 站点获取它。

我在使用 AMD SDK 的非 AMD 设备上运行 OpenCL 时遇到问题，因此我改用 Intel SDK，它适用于 AMD、Intel 和 Nvidia。但是，1.1 C++ 绑定和 1.2 C++ 绑定不是 100% 兼容的。如果您希望您的代码同时在 Nvidia 和 AMD GPUS 上运行，请仅使用 OpenCL 1.1 并定义：#define CL_USE_DEPRECATED_OPENCL_1_1_APIS

# sql - 将点连接到单个点

> ID：15050053
> 
> 赞同：1
> 
> 时间：2013-02-24T08:37:29.050
> 
> 标签：sql, postgresql, postgis, spatial-query

我正在使用带有 postgis 的 postgres 来获取空间数据。我有一个包含一组交点的表格，下面是表格的结构；

![在此处输入图像描述](../Images/ca49fcde783d9208becd0e6b4c947874.png)

每个点代表两条道路之间的交叉点。但是我有一些道路，三条道路相交而不是两条，为此，正在创建 3 个不同的点。下图显示了该问题；

![在此处输入图像描述](../Images/4baa50192a26fc3839029eaae258f968.png)

我想将三个不同的点收集到一个点中，该点将代表所有三条道路的交叉点，而不是拥有三条不同的道路。

我正在考虑使用 st_collect 和 st_convexhull 而不是 st_centroid 从这些点中找到一个点。但我不能让它工作，可能我采取了错误的方法。

如何最好地解决这样的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:56:09.163

这个这里的例子展示了如何从 3 个点计算质心点，而不使用 st_convexhull，我不确定我是否理解你为什么要使用凸包。

```
with mypoints as (
    select 1 id, 1 cat, ST_MakePoint(5, 5) geom
    union all
    select 2 id, 1 cat, ST_MakePoint(5, 10) geom
    union all
    select 3 id, 1 cat, ST_MakePoint(8, 8) geom
)
select st_astext(st_centroid(st_collect(geom))) from mypoints group by cat; 
```

# android - 在 MapFragment 的 onStart() 中调用 getMap() 会产生 nullpointerexception

> ID：15050056
> 
> 赞同：0
> 
> 时间：2013-02-24T08:38:37.430
> 
> 标签：android, google-maps, nullpointerexception, mapfragment

我正在尝试在操作栏选项卡中实现 Maps v2。地图选项卡是从 MapFragment 继承的片段。单击地图选项卡后，应用程序强制关闭。它在调用 getMap() 的 onStart 方法中给出空指针异常。这是代码。请告诉我哪里错了。

```
 public class MapActivity extends MapFragment implements LocationListener  {
int mNum;
GoogleMap googleMap;  

public static MapActivity newInstance() {
    MapActivity f = new MapActivity();

    // Supply num input as an argument.
    Bundle args = new Bundle();
    //args.putInt("num", num);
    //f.setArguments(args);

    return f;
}

/**
 * When creating, retrieve this instance's number from its arguments.
 */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View v = inflater.inflate(R.layout.maplayout, container, false);

    return v;
}

/**
 * The Fragment's UI is just a simple text view showing its
 * instance number.
 */
public void onStart(){
    super.onStart();

    googleMap=getMap();

    // Enabling MyLocation Layer of Google Map
            googleMap.setMyLocationEnabled(true);               

             getActivity();
            // Getting LocationManager object from System Service LOCATION_SERVICE
            LocationManager locationManager = (LocationManager)getActivity().getSystemService(Context.LOCATION_SERVICE);

            // Creating a criteria object to retrieve provider
            Criteria criteria = new Criteria();

            // Getting the name of the best provider
            String provider = locationManager.getBestProvider(criteria, true);

            // Getting Current Location
            Location location = locationManager.getLastKnownLocation(provider);

            if(location!=null){
                    onLocationChanged(location);
            }

            locationManager.requestLocationUpdates(provider, 20000, 0, this);

         // Setting a click event handler for the map
            googleMap.setOnMapClickListener(new OnMapClickListener() {

                @Override
                public void onMapClick(LatLng latLng) {

                    // Creating a marker
                    MarkerOptions markerOptions = new MarkerOptions();

                    // Setting the position for the marker
                    markerOptions.position(latLng);

                    // Setting the title for the marker.
                    // This will be displayed on taping the marker
                    markerOptions.title(latLng.latitude + " : " + latLng.longitude);

                    // Clears the previously touched position
                    //googleMap.clear();

                    // Animating to the touched position
                    googleMap.animateCamera(CameraUpdateFactory.newLatLng(latLng));

                    // Placing a marker on the touched position
                    googleMap.addMarker(markerOptions);
                }
            });

        }

        @Override
        public void onLocationChanged(Location location) {

            TextView tvLocation = (TextView) getActivity().findViewById(R.id.tv_location);

            // Getting latitude of the current location
            double latitude = location.getLatitude();

            // Getting longitude of the current location
            double longitude = location.getLongitude();     

            // Creating a LatLng object for the current location
            LatLng latLng = new LatLng(latitude, longitude);

            // Showing the current location in Google Map
            googleMap.moveCamera(CameraUpdateFactory.newLatLng(latLng));

            // Zoom in the Google Map
            googleMap.animateCamera(CameraUpdateFactory.zoomTo(15));

            // Setting latitude and longitude in the TextView tv_location
            tvLocation.setText("Latitude:" +  latitude  + ", Longitude:"+ longitude );      

        }

        @Override
        public void onProviderDisabled(String provider) {
            // TODO Auto-generated method stub      
        }

        @Override
        public void onProviderEnabled(String provider) {
            // TODO Auto-generated method stub      
        }

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
            // TODO Auto-generated method stub      
        } 
```

}

编辑：我认为这段代码不应该写在 onStart 方法中，因为那时地图没有显示。如何知道地图已经加载，获取它的对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T09:35:13.333

在 OnStart 中获取空地图意味着 Google 服务 API 尚未启动。

这通常是由于缺少权限、无效的 Google API 密钥或未在主机设备上激活 Google Play 服务。

您可以通过发布 AndroidManifest 以及 maplayout.xml 来获取更多信息

在启动您的地图活动之前，您应该注意以下各项的价值：

```
GooglePlayServicesUtil.isGooglePlayServicesAvailable(anyActivity) 
```

这将返回有关 Google Play 服务状态的指示

# python - 将文件直接下载到 S3

> ID：15050057
> 
> 赞同：6
> 
> 时间：2013-02-24T08:38:41.533
> 
> 标签：python, amazon-s3, boto

给定一个资源链接，例如：

```
http://www.google.com/images/srpr/logo3w.png 
```

有没有办法将该 png 直接下载到 S3（最好使用 Boto）？如果是这样，这将如何完成？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-10T18:31:48.450

您可以使用 urllib2 获取文件并使用响应对象使用 boto 将其写入 S3。

```
from boto.s3.connection import S3Connection
from boto.s3.key import Key
import urllib2

request = urllib2.Request('http://www.google.com/images/srpr/logo3w.png')
response = urllib2.urlopen(request)

conn = S3Connection("MYAWSID", "MYAWSSECRET")
bucket = conn.create_bucket('MyBucket')
k = Key(bucket)
k.name = "logo3w"
k.set_contents_from_string(response.read(), {'Content-Type': response.info().gettype()}) 
```

如果您没有这些软件包，您可以使用 PIP 从 PIP 安装它们

```
pip install urllib2_file
pip install boto 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-24T08:48:03.047

任何“下载到 S3”都隐含地表示“下载然后上传到 S3”——无论您是手动上传还是像 boto 这样的脚本或库都会这样做。

如果使用脚本或库（boto），它会将图像下载到附加到它正在运行的系统的文件系统 - 您的本地工作站或服务器 - 然后使用 AWS 密钥和库将其上传到 S3。

# assembly - MIPS 汇编语言乘法

> ID：15050062
> 
> 赞同：-2
> 
> 时间：2013-02-24T08:39:47.010
> 
> 标签：assembly, mips

我要写乘以设备屏幕的数量。

```
cout<<"Height of the device screen: 960 "<<endl;
cout<< "Width of the device screen: 640 "<<endl;
int result;
result=960*640;
cout<<"The result of the Iphone 4S in pixel: "<<result; 
```

就像上面的 c++ 代码一样，但我真的不确定我做的是对还是错。我需要有人帮助我。MIPS 汇编语言对我来说真的很新鲜。``

```
.data
str1: .asciiz "Height of the device screen: 960 "
str2: .asciiz "Width of the device screen: 640 "
str3: .asciiz "The result of the Iphone 4S in pixel: "
newline: .asciiz "\n"

.text

main:
li $v0,4 #system call code for print string
la $a0,str1 #address of str1
syscall #print str1

#get the first number from the user, put into $s0
li $v0,960 #system call for read input
syscall #read integer into $v0 from console.

move $s0,$v0 #move the number read into $s0

#read input string for str2
li $v0,4  #system call code for print string
la $a0,str2 #address of str2
syscall #print str2

#get the second number from the user, put into $s1
li $v0,640 #system call for read input
syscall #read integer into $v0 from console.

move $s1,$v0 #move the number read into $s0

#do the calculation 
mul $s2,$s0,$s1 # s2 is the register to store $s0 and $s1 from the user input.

#read print string for st3
li $v0,4 #system call code for print string
la $a0,str3 #address of str3
syscall

#print width*height
li $v0,1
move $a0,$s2 #move the result of multiplication into $a0 to print
syscall
exist 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T09:16:48.137

```
li $v0,960 #system call for read input
syscall #read integer into $v0 from console.
# ...
#get the second number from the user, put into $s1
li $v0,640 #system call for read input
syscall #read integer into $v0 from console. 
```

960 绝对不是系统调用“读取”号，640 也不是。请查阅您的操作系统文档。

# python - 如何使用瓶子框架上传和保存文件

> ID：15050064
> 
> 赞同：21
> 
> 时间：2013-02-24T08:40:22.330
> 
> 标签：python, python-2.7, bottle

HTML：

```
<form action="/upload" method="post" enctype="multipart/form-data">
  Category:      <input type="text" name="category" />
  Select a file: <input type="file" name="upload" />
  <input type="submit" value="Start upload" />
</form> 
```

看法：

```
@route('/upload', method='POST')
def do_login():
    category   = request.forms.get('category')
    upload     = request.files.get('upload')
    name, ext = os.path.splitext(upload.filename)
    if ext not in ('png','jpg','jpeg'):
        return 'File extension not allowed.'

    save_path = get_save_path_for_category(category)
    upload.save(save_path) # appends upload.filename automatically
    return 'OK' 
```

我正在尝试执行此代码，但它不起作用。我做错了什么？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-06-16T15:36:40.090

从**bottle-0.12**开始，**[FileUpload](http://bottlepy.org/docs/dev/api.html?highlight=fileupload#bottle.FileUpload)**类通过其**upload.save()**功能实现。

这是**Bottle-0.12**的示例：

```
import os
from bottle import route, request, static_file, run

@route('/')
def root():
    return static_file('test.html', root='.')

@route('/upload', method='POST')
def do_upload():
    category = request.forms.get('category')
    upload = request.files.get('upload')
    name, ext = os.path.splitext(upload.filename)
    if ext not in ('.png', '.jpg', '.jpeg'):
        return "File extension not allowed."

    save_path = "/tmp/{category}".format(category=category)
    if not os.path.exists(save_path):
        os.makedirs(save_path)

    file_path = "{path}/{file}".format(path=save_path, file=upload.filename)
    upload.save(file_path)
    return "File successfully saved to '{0}'.".format(save_path)

if __name__ == '__main__':
    run(host='localhost', port=8080) 
```

注意：**os.path.splitext()**函数以“.<ext>”格式提供扩展名，而不是“<ext>”。

*   如果您使用之前的版本**Bottle-0.12**，请更改：

    ```
    ...
    upload.save(file_path)
    ... 
    ```

至：

```
 ...
    with open(file_path, 'wb') as open_file:
        open_file.write(upload.file.read())
    ... 
```

*   运行服务器；
*   在浏览器中输入“localhost:8080”。

# .net - WPF 4 和 .NET 4.5 类层次结构海报

> ID：15050065
> 
> 赞同：15
> 
> 时间：2013-02-24T08:40:27.283
> 
> 标签：.net, wpf, poster

我正在寻找 WPF **4**和 .NET **4.5** ***类层次结构***海报。
像[这样](http://blogs.interknowlogy.com/downloads/johnbowen/Images/WPF_Poster_lowres.jpg)的东西。

我在网上搜索了很多都没有成功。
任何的想法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-12-02T14:00:56.517

.Net 4.5 Class Hierarchy 海报尚未发布，但您可能会发现最近发布的这些海报很有用：

*   [.Net Universe 2013 年海报](http://www.microsoft.com/en-in/download/details.aspx?id=39952)
*   [.Net 4.5 中的新功能](http://www.heikniemi.net/hardcoded/2011/10/whats-new-in-net-framework-4-5-poster/)
*   [WPF 对象模型海报](http://www.codeproject.com/Tips/615433/WPF-Objects-Model-Poster)（[下载](https://www.dropbox.com/s/mbiy9hp9ou1mpka/WPF_OM.png)）

> 要获取信息并了解*.Net 4.5 中的所有类*，您可以查看[MSDN 上的 .Net Framework 类库，](http://msdn.microsoft.com/en-us/library/gg145045%28v=VS.110%29.aspx)它提供了有关 .Net 4.5 中所有类和命名空间的深入信息
> 
> 要获取完整的信息并了解*有关 WPF 4.5 的所有信息*，您可以查看[MSDN 上的 Introduction to WPF in .Net 4.5](http://msdn.microsoft.com/en-us/library/aa970268%28v=vs.110%29.aspx)

![.Net 宇宙海报 2013](../Images/1146d8ac9a3e6c014982dad07c451a95.png) ![在此处输入图像描述](../Images/16b6d1e9429f22fe26bfbf4f9238e5c7.png) ![WPF 对象模型](../Images/e9ddda6dfd71190996c69cc8021dc3cf.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-04T08:14:49.623

我知道该主题已过时，但我发现了[下一个 WPF 层次结构海报](https://www.dropbox.com/s/l2nyl8d7mkum4y6/WPF_Poster_new.png)。我希望它也能有所帮助。 ![WPF 海报](../Images/c56f4791e96f7de4d54bf8b80a27750a.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T08:44:35.380

我发现了这个，它可能对你也有帮助：

[http://www.heikniemi.net/hardcoded/2011/10/whats-new-in-net-framework-4-5-poster/](http://www.heikniemi.net/hardcoded/2011/10/whats-new-in-net-framework-4-5-poster/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-24T08:56:24.513

这不是最新的，但它是我通过努力找到的最好的。[在这里](http://blogs.msdn.com/b/brada/archive/2008/01/12/net-framework-3-5-namespace-poster-updated.aspx)！

# android - 创建和使用从位图创建的 Android 地图标记的正确方法？

> ID：15050070
> 
> 赞同：1
> 
> 时间：2013-02-24T08:40:54.250
> 
> 标签：android, android-maps, android-maps-v2

从位图创建地图标记的正确方法是什么？

我正在使用 Google Maps Android v1 并现在转移到 v2。
我的地图包含从位图创建的多个标记。
每个标记由位图图像和上面的一些文本组成，每个标记可能不同。所以我必须修改内存中的每个位图。
我像这样加载标记图像：

```
private Bitmap getMarker(final String name) {
    Bitmap result = BitmapFactory.decodeFile(context.getFilesDir() + "/markers/" + name + ".png");

    if (result == null) {
        // must make a mutable copy as by default resource is returned immutable
        result = decodeResource(context.getResources(), R.drawable.default_marker).copy(Config.ARGB_8888, true);
    } else {
        result = result.copy(Config.ARGB_8888, true);
    }

    return result;
} 
```

然后使用画布在其上应用自定义文本：

```
private void applyText(Bitmap marker, Paint paint, String text) {
    Canvas canvas = new Canvas(marker);
    canvas.drawText(text, calculateTextX(marker, paint, text), calculateTextY(marker, paint, text), paint);
} 
```

标记图像是 MDPI 设备上约 5KB 大小的多色 PNG 文件。

有时在`Google Maps Android v1`某些设备上（难以重现）我`java.lang.OutOfMemoryError`在解码位图图像时得到。而且我有一种感觉，我做错了什么......而且我想确定`Google Maps Android v2`我不会遇到同样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T09:24:43.967

几天前我在切换到 v2 时遇到了同样的问题。我认为最重要的是尽量减少将图像加载到内存中，因此只要您需要，就可以将标记原始位图保存在内存中。

这是一个代码示例，显示了我是如何做到的：

```
public class MyMarkerFactoryFactory {

    private Context ctx;
    private Bitmap cachedMarkerBase; // Cached bitmap
    private Bitmap currentMarker; // Working copy
    private final List<Marker> markers = new ArrayList<Marker>();

    public MyMarkerFactoryFactory(Context ctx, String markerName, int markerWidth, int markerHeight) {
        this.ctx = ctx;

        Bitmap src = BitmapFactory.decodeFile(ctx.getFilesDir() + "/markers/" + markerName + ".png");
        int srcBitmapWidth = src.getWidth();
        int srcBitmapHeight = src.getHeight();
        if (markerWidth != srcBitmapWidth && markerHeight != srcBitmapHeight) {
            // The rendering bitmap will depend on provided width and height
            // In my case it's because the bitmap does not have the same pixel size
            // depending on the display pixel density. So I've declared the size I
            // I want in "dp" somewhere else and fetch it from ctx.getDimen
            // createScaledBitmap will return the same bitmap if you are scaling
            // to the same size, so it's good to test the size before you rescale
            // otherwise you are likely to recycle() the bitmap you wanted to use.
            cachedMarkerBase = Bitmap.createScaledBitmap(src, markerWidth, markerHeight, false);
            src.recycle();
        } else {
            cachedMarkerBase = src;
        }
        currentMarker = cachedMarkerBase.copy(cachedMarkerBase.getConfig(), true);
    }

    public void onDestroy() {
        clearOverlays();
        if (cachedMarkerBase != null) {
            cachedMarkerBase.recycle();
            cachedMarkerBase = null;
        }
        if (currentMarker != null) {
            currentMarker.recycle();
            currentMarker = null;
        }
    }

    public void clearOverlays() {
        for (Marker marker : markers) {
            marker.remove();
        }
        markers.clear();
    }

    public void addOverlay(GoogleMap map, LatLng position, String myText) {
        drawMarkerWith(myText);
        BitmapDescriptor bitmapDescriptor = BitmapDescriptorFactory.fromBitmap(currentMarker);
        markers.add(map.addMarker(new MarkerOptions().anchor(0.5f, 0.5f).icon(bitmapDescriptor).position(position)));
    }

    private void drawMarkerWith(String myText) {
        // Copy image from cache
        for (int i = 0; i < cachedMarkerBase.getWidth(); i++) {
            for (int j = 0; j < cachedMarkerBase.getHeight(); j++) {
                currentMarker.setPixel(i, j, cachedMarkerBase.getPixel(i, j));
            }
        }
        int x = currentMarker.getWidth() / 2, y = currentMarker.getHeight() / 2;

        Paint paintForText = new Paint()
        paintForText.setTextSize(7f); // TODO

        // Draw text
        Canvas canvas = new Canvas(currentMarker);
        int x = 0; // TODO
        int y = 0; // TODO
        canvas.drawText(myText, x, y, paintForText);
    }
} 
```

当然，如果您的不同标记数量有限，这很有效。只需在您的活动开始时创建工厂，并在停止时将其销毁，您将只有两个位图在内存中，并避免加载/释放大量位图。

# java - 图的哈希图表示

> ID：15050073
> 
> 赞同：7
> 
> 时间：2013-02-24T08:42:04.697
> 
> 标签：java, graph, hashmap

例如，我有一个带有图形边缘的文本文件

1 2

1 3

2 5

等，并想以某种方式表示我的图表。我尝试使用哈希图，它是表示边缘的最佳方式吗？第二个问题，如何访问我的哈希图中的第一个和第二个条目？我的代码在这里

```
 DataInputStream dStream = new DataInputStream(new FileInputStream("C:/Programming/Java/test.txt"));
    BufferedReader bReader = new BufferedReader(new InputStreamReader(dStream));

    HashMap<Integer, Integer> graphEdges = new HashMap<Integer, Integer>();
    String line;
    while( (line = bReader.readLine()) != null) {
        String[] firstSecond = line.split(" ");
        int firstDigit = Integer.parseInt(firstSecond[0]);
        int secondDigit = Integer.parseInt(firstSecond[1]);

        graphEdges.put(firstDigit, secondDigit);
    }

    System.out.println(graphEdges);

    bReader.close();
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-07-14T14:42:48.683

在图的许多可能表示中，两个基本的表示如下：

*   邻接表

[![在此处输入图像描述](../Images/9d43037a7f9f9924d5730964196d4339.png)](https://i.stack.imgur.com/5pbox.png)

在 Java 中：

```
Map<Integer, List<Integer>> graph = new HashMap<>();
...
while( (line = bReader.readLine()) != null) {
    String[] tokens = line.split(" ");
    int firstNode = Integer.parseInt(tokens[0]);
    int secondNode = Integer.parseInt(tokens[1]);

    if(!graph.containsKey(firstNode)) graph.put(firstNode, new LinkedList());
    graphEdges.get(firstNode).add(secondNode);
} 
```

*   邻接矩阵

[![在此处输入图像描述](../Images/4808cc51451ee5366431e4d81218c00d.png)](https://i.stack.imgur.com/Ghcvy.png)

在 Java 中：

```
int[][] graph = new int[numberOfNodes][numberOfNodes];
while( (line = bReader.readLine()) != null) {
    String[] tokens = line.split(" ");
    int firstNode = Integer.parseInt(tokens[0]);
    int secondNode = Integer.parseInt(tokens[1]);

    graph[firstNode-1][secondNode-1] = 1;
    graph[secondNode-1][firstNode-1] = 1;
} 
```

下面是这两种表示的操作和存储效率的比较：

```
 |     Adjacency List    |   Adjacency Matrix   |
Storage            |      O(nodes+edges)   |     O(nodes^2)       |
Add node           |          O(1)         |     O(nodes^2)*      |
Add edge           |          O(1)         |        O(1)          |
Remove node        |        O(edges)       |     O(nodes^2)*      |
Remove edge        |        O(edges)       |        O(1)          |
isAdjacent(x1,x2)  |        O(nodes)       |        O(1)          |
*Requires copying of the whole array 
```

您还可以在邻接列表中稍作修改并使用 HashSet，而不是 LinkedList 来存储相邻节点。在这种情况下，一切都是一样的，除了 isAdjacent(x1,x2) 操作现在具有 O(1) 复杂度（摊销）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T08:52:18.140

A`HashMap`在这种情况下不适合，因为对于指定的键，您可以有一个值。您需要一个可以为一个键保存多个值的映射。[番石榴](https://code.google.com/p/guava-libraries/)在[Multimap](http://guava-libraries.googlecode.com/svn/tags/release08/javadoc/com/google/common/collect/Multimap.html)中就具有这个概念，其实现方式如[ArrayListMultimap](http://guava-libraries.googlecode.com/svn/tags/release08/javadoc/com/google/common/collect/ArrayListMultimap.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-24T09:19:17.507

要生成这样的 PNG：

![在此处输入图像描述](../Images/d50717de6c1457ebc3783f1992c9cef7.png)

或这样的 XML ( [GraphML](http://graphml.graphdrawing.org/) )：

```
<?xml version="1.0" encoding="UTF-8"?>
<graphml xmlns="http://graphml.graphdrawing.org/xmlns"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://graphml.graphdrawing.org/xmlns http://graphml.graphdrawing.org/xmlns/1.0/graphml.xsd">
    <graph id="G" edgedefault="directed">
        <node id="Off" />
        <node id="Standby" />
        <node id="Fail" />
        <node id="Oper" />
        <node id="Recovery" />
        <node id="Shutdown" />
        <edge id="1" source="Off" target="Standby" />
        <hyperedge>
            <endpoint node=Standby" type="in" />
            <endpoint node=Fail" type="out" />
            <endpoint node=Oper" type="out" />
            <endpoint node=Shutdown" type="out" />
        </hyperedge>
        <hyperedge>
            <endpoint node=Fail" type="in" />
            <endpoint node=Shutdown" type="out" />
            <endpoint node=Recovery" type="out" />
        </hyperedge>
        <hyperedge>
            <endpoint node=Oper" type="in" />
            <endpoint node=Standby" type="out" />
            <endpoint node=Fail" type="out" />
            <endpoint node=Shutdown" type="out" />
        </hyperedge>
        <edge id="2" source="Shutdown" target="Off" />
        <hyperedge>
            <endpoint node=Recovery" type="in" />
            <endpoint node=Oper" type="out" />
            <endpoint node=Shutdown" type="out" />
        </hyperedge>
    </graph>
</graphml> 
```

你也可以自己做：

```
public abstract class Edge {
   protected final Node _endPoint1;
   public Edge( Node endPoint ) {
      _endPoint1 = endPoint;
   }
   public Node getEndPoint1() {
      return _endPoint1;
   }
} 
```

类 DirectedEdge：

```
public final class DirectedEdge extends Edge {
   private final Node[] _to;
   public DirectedEdge( Node from, Node ... to ) {
      super( from );
      _to = to;
   }
   public Node getFrom() {
      return _endPoint1;
   }
   public Node[] getTo() {
      return _to;
   }
} 
```

类图：

```
import java.util.LinkedHashMap;
import java.util.LinkedHashSet;
import java.util.Map;
import java.util.Set;

public final class Graph {
   private /* */ String              _name = "G";
   private final Map< String, Node > _nodes = new LinkedHashMap<>();
   private final Set< DirectedEdge > _edges = new LinkedHashSet<>();

   public boolean addNode( Node node ) {
      return _nodes.put( node._label, node ) == null;
   }
   public void addEdge( DirectedEdge edge ) {
      _edges.add( edge );
   }
   public String getName() {
      return _name;
   }
   public void setName( String name ) {
      _name = name;
   }
   public final Map<String, Node> getNodes() {
      return _nodes;
   }
   public final Set<DirectedEdge> getEdges() {
      return _edges;
   }
} 
```

类 Main，使用示例：

```
import java.io.File;

public class Main {
   private static Graph getGraph() {
      Graph graph = new Graph();
      Node off      = new Node( "Off" );
      Node standby  = new Node( "Standby" );
      Node fail     = new Node( "Fail" );
      Node oper     = new Node( "Oper" );
      Node recovery = new Node( "Recovery" );
      Node shutdown = new Node( "Shutdown" );
      graph.addNode( off );
      graph.addNode( standby );
      graph.addNode( fail );
      graph.addNode( oper );
      graph.addNode( recovery );
      graph.addNode( shutdown );
      graph.addEdge( new DirectedEdge( off     , standby ));
      graph.addEdge( new DirectedEdge( standby , fail, oper, shutdown ));
      graph.addEdge( new DirectedEdge( fail    , shutdown, recovery ));
      graph.addEdge( new DirectedEdge( oper    , standby, fail, shutdown ));
      graph.addEdge( new DirectedEdge( shutdown, off ));
      graph.addEdge( new DirectedEdge( recovery, oper, shutdown ));
      return graph;
   }
   public static void main( String[] args ) throws Exception {
      Graph graph = getGraph();
      new DotFileGenerator().save( new File( "States.png"     ), graph );
      new GraphMLGenerator().save( new File( "States.graphml" ), graph );
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-15T12:37:57.333

您可以使用列表地图

```
HashMap<Integer, LinkedList<Integer>> graphEdges = new HashMap<Integer,LinkedList<Integer>>(); 
```

这样您就可以将一个节点映射到多个节点

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-24T08:59:07.083

HashMap 不是表示边的最佳方式，因为图遍历不是最优的。遍历 N 条边的路径需要 N 个 hashmap get() 操作。

# objective-c - 在 iOS 中创建一组 mp3 音频文件并使用 UIButton 随机播放它们

> ID：15050074
> 
> 赞同：0
> 
> 时间：2013-02-24T08:42:12.820
> 
> 标签：objective-c, xcode, arrays, ios5

我正在尝试创建一个预测制作 iOS 5 iPhone 应用程序，它将从一个数组中播放一个短的（1-15 秒长）随机 mp3 音频剪辑，该音频剪辑可以由 UIButton 的 touchUpInside 事件触发。我想用 mp3 文件创建一个数组，然后创建一个方法，当调用该方法时，它将以高音量随机播放 1 个文件。我找到了对类似问题的回复：[如何调用数组值并使用它来播放声音文件？](https://stackoverflow.com/questions/1214420/how-do-i-call-an-array-value-and-use-it-to-play-a-sound-file)但我没有发现问题或响应在我的应用程序中足够清晰或非常有用。有人知道我可以创建 mp3 音频文件数组然后创建一个播放随机剪辑的方法的最有效方法吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T05:18:22.507

我能够创建 NSArray 并随机化使用此代码播放的 mp3 文件。在我的 ViewController.h

```
`@property (strong, nonatomic) NSArray *soundsArray; 
```

然后在我的 ViewController.m 中的 viewDidLoad 方法中

```
self.soundsArray =[[NSArray alloc] initWithObjects:@"sound1", @"sound2", nil]; 
```

我随机使用 IBAction 中的声音，

```
NSUInteger index = arc4random_uniform(self.soundsArray.count);

    NSString *filePath = [self.guySoundsArray objectAtIndex:index];
    NSString *soundFilePath = [[NSBundle mainBundle] pathForResource:filePath ofType: @"mp3"];
    NSURL *fileURL = [[NSURL alloc] initFileURLWithPath: soundFilePath]; 
```

# java - Android应用程序启动套接字不起作用

> ID：15050077
> 
> 赞同：1
> 
> 时间：2013-02-24T08:42:39.683
> 
> 标签：java, android, sockets, networking, emulation

这是一个简单的客户端-服务器安卓应用程序。服务器是在本地 pc 上运行的简单 java 服务器，客户端在模拟器上运行。这是客户的代码：

```
package com.example.streamer;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

import java.io.BufferedReader;

import java.io.BufferedWriter;

import java.io.IOException;

import java.io.InputStreamReader;

import java.io.OutputStreamWriter;

import java.net.Socket;

 class Connecting implements Runnable
{
    private Socket sock;

    private BufferedReader r;

    private BufferedWriter out;
    public Connecting ()
    {
        Thread th = new Thread(this);
        th.start();

    }

    @Override
    public void run() {
        // TODO Auto-generated method stub
        try
        {
            System.out.println("************************ trying to initiated *****************");
        sock = new Socket("10.0.2.2",12344);

        System.out.println("************************ socket initiated *****************");

        r = new BufferedReader(new InputStreamReader(sock.getInputStream()));

        System.out.println("************************ buffer reader initiated *****************");

        out = new BufferedWriter(new OutputStreamWriter(sock.getOutputStream()));

        System.out.println("************************ buffer writer initiated *****************");

        }

        catch (IOException ioe) { }

    }

}

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override

    public void onResume() {

        super.onResume();

        System.out.println("************************ on resume *****************");
        Connecting c = new Connecting();

    }

} 
```

任何人都知道为什么该指令`sock = new Socket("10.0.2.2", 12344);`没有执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T08:46:06.690

该命令尝试将套接字连接到外部主机。这可能需要很长时间。在许多版本的 Android 上，它甚至会崩溃，因为您不应该在主线程上进行网络调用。将其移动到 AsyncTask 或线程中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T09:45:03.103

问题可能与您没有正确设置应用程序的权限有关。

您应该编辑 AndroidManifest.xml 文件，其中包含应用程序将要求的权限等内容。

像这样编辑文件：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.android.app.myapp" >
    <uses-permission android:name="android.permission.INTERNET" />
    ...
</manifest> 
```

该行`<uses-permission android:name="android.permission.INTERNET" />`将使应用程序请求连接到 Internet 的权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-13T05:47:51.397

在清单文件中添加这两个条件

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

它现在可以工作了......对于任何其他帮助请评论

# javascript - 程序员为什么/如何删除空格？

> ID：15050080
> 
> 赞同：1
> 
> 时间：2013-02-24T08:42:56.383
> 
> 标签：javascript

我希望这听起来不傻，但我注意到网站上使用的许多 Javascript 文件没有间距或注释。
通常只有一串极长的代码。
这是为什么？
程序员是在写完之后才这样做的，还是只是后来渲染的方式？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-24T08:46:30.887

您所指的内容称为[缩小](http://en.wikipedia.org/wiki/Minification_(programming))，通常是为了最小化传输和缓存 Javascript 所需的空间。

阅读链接的 Wikipedia 文章和谷歌搜索该术语会发现许多替代的在线和离线应用程序可以帮助您实现这一目标。

缩小不仅限于 Javascript，还可以用于 - 例如 - CSS，效果非常好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T08:44:51.577

在以理智的方式编写代码后，通常通过压缩程序运行 JavaScript 以减少下载时间和带宽。（它还提供了一种虚假的安全感，因为您的代码已经被轻度混淆了。）许多 JS 开发工具包都带有内置的压缩​​器，并且可以在线获得压缩器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T08:46:27.277

原因是文件大小。文件越小，网页加载的速度就越快。有时这些压缩文件是原始文件的 50%（！）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T08:48:17.677

其压缩页面的概念。它被称为缩小。它的作用是删除脚本文件中的所有空格。有很多工具可以缩小 js 文件。这提高了网页的性能。你可以用谷歌搜索 javascript minification。希望你清楚。

# c# - WMP.Url 相对路径

> ID：15050082
> 
> 赞同：0
> 
> 时间：2013-02-24T08:43:06.690
> 
> 标签：c#, url, path, components, wmp

我正在编写一个程序，使用 Windows Media Player 组件从与我的应用程序位于同一目录的 Resources 文件夹中播放音频（因此可以将其移动到另一台计算机）。

我当前选择音频剪辑的代码是：

```
soundPlayer.URL = @"C:\Users\Ryan\Desktop\MyProgram\SFX\nameThatTune.mp3"; 
```

哪个工作正常，但是当我将其更改为：

```
soundPlayer.URL = @"SFX\showIntro.mp3"; 
```

它停止工作。我也尝试过以 ~/ 和 ../ 开头的文件路径，但都不起作用。这是 WMP 组件特有的问题还是我错过了更大的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T09:43:48.767

相对路径取决于 的值[`Environment.CurrentDirectory`](http://msdn.microsoft.com/en-us/library/system.environment.currentdirectory.aspx)。在 Visual Studio 中运行应用程序时，当前目录指向项目的根文件夹（而不是应用程序的执行路径）。还有一些操作可以改变当前目录（使用打开文件`OpenFileDialog`）。你不能总是依赖当前目录作为一个特定的地方，所以你应该总是尝试使用绝对路径。

如果该文件位于应用程序文件夹中（靠近 .exe 文件），您可以使用：

```
soundPlayer.URL = Path.Combine(
    Path.GetDirectoryName(Assembly.GetEntryAssembly().Location),
    "showIntro.mp3"); 
```

或者如果您使用的是 WinForms：

```
soundPlayer.URL = Path.Combine(
    Path.GetDirectoryName(Application.ExecutablePath),
    "showIntro.mp3"); 
```

将其更改为指向子文件夹也很简单。

请注意，该文件必须位于项目的输出文件夹中（`bin\Debug`例如）。

# asp.net-mvc - 如何为 asp.net mvc、web.config 文件中的特定位置设置 maxRequestLength 和 maxAllowedContentLength？

> ID：15050084
> 
> 赞同：4
> 
> 时间：2013-02-24T08:43:37.500
> 
> 标签：asp.net-mvc, iis, file-upload, web-config

我有一个 ASP.Net MVC 4 应用程序，我需要能够在特定操作中上传大文件。有问题的路线是'~/UploadArea/UploadController/UploadAction'，我设置的配置如下所示：

```
<location path="~/UploadArea/UploadController/UploadAction">
<system.web>
  <!-- maxRequestLength is in kilobytes (KB)  -->
  <httpRuntime maxRequestLength="100000" />
  <!-- 100MB -->
</system.web>
<system.webServer>
  <security>
    <requestFiltering>
      <!-- maxAllowedContentLength is in bytes (B)  -->
      <requestLimits maxAllowedContentLength="100000000"/>
      <!-- 100MB -->
    </requestFiltering>
  </security>
</system.webServer>
</location> 
```

如果我不使用位置并将配置用于整个应用程序，它就可以正常工作，否则什么也不会发生，设置节点的问题在哪里？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-06T19:38:31.450

将您的路径更改为仅控制器/操作，删除 ~/ 因为我相信，这会迫使 IIS 寻找匹配的文字文件路径。因此，根据您的路由以及页面的调用方式，它可能是：

```
<location path="UploadController/UploadAction"> 
```

或者如果它是默认操作并且被请求为 mysite/UploadController 然后尝试：

```
<location path="UploadController"> 
```

# artificial-intelligence - 隐形游戏AI求解器

> ID：15050086
> 
> 赞同：3
> 
> 时间：2013-02-24T08:44:16.753
> 
> 标签：artificial-intelligence, path-finding, a-star, heuristics

我正在制作一个人工智能来解决一个简单的隐形游戏。目标是在不被敌人（手电筒）抓住的情况下到达目标点。我已经实现了一个寻路算法（A*），但没有在再次移动之前避免或在某个地点等待的逻辑。地图上没有其他元素。只有球员、后卫和球门。我现在唯一的想法是，当AI已经构建了路径时，将排除路径中会被发现的坐标，并且AI会不断地重建路径。但是敌人一直在移动（动态障碍）所以我认为只有这个是不可能达到目标的。还有其他想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T08:53:49.957

假设您有足够的内存可以玩并且后卫的动作是已知的/确定的，您可以将时间建模为另一个维度（例如，您的 2D 地图变成 3D 时空竞技场）。

然后你可以通过时间做A *......带有移动探照灯的敌人将在时空中“静止”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T08:54:00.970

构建一个好的启发式是关键。

您的启发式方法应考虑警卫可能朝您的路径移动并发现您的可能性，并相应地移动重量。这自然会倾向于避开守卫的路径。请注意，对于随机移动后卫等机会元素，无法保证目标。

# ios - 在您的应用程序中创建内置快门

> ID：15050087
> 
> 赞同：0
> 
> 时间：2013-02-24T08:44:24.020
> 
> 标签：ios

嗨，我想在我的应用程序中从下到上创建这种快门，有人知道在线教程或任何东西吗？如果你给我任何建议，那就太好了。我尝试查看 Cocoa Controls 但找不到类似的东西。

![示例图像](../Images/4890b73845c92dd11834bbb05db33791.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T09:38:44.330

看起来你搜索的不够好。

任何方式：[Pullable View (Notification Center style)](https://github.com/crocodella/PullableView)

# html - 链接无法通过单击工作，只能通过“在新选项卡中打开链接”命令工作

> ID：15050095
> 
> 赞同：22
> 
> 时间：2013-02-24T08:44:52.823
> 
> 标签：html, asp.net-mvc, hyperlink

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-02-24T09:08:17.557

您有一些 javascript 代码阻止执行锚标记的默认操作。您可以检查`Network`FireBug 或 Chrome DevTools 中的选项卡，以查看单击链接时是否正在发出某些 AJAX 请求。您可以尝试排除 javascript 文件，直到找到正在执行此操作的文件。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-08-08T11:56:09.763

也许您使用 JavaScript 阻止了标记的重定向事件。

例如：

```
$(document).on('click', 'a.thatTag', function (e) {
   // ...
   e.preventDefault();
}); 
```

`.preventDefault()`防止重定向。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-12-02T14:50:56.323

Darren 正确给出，肯定是一些 javascript 代码正在发送 AJAX 请求（post 或 get），这会阻止链接按您预期的方式运行。

但是，如果您使用了外部资源，则可能很难更正`min`文件中的错误。

我建议使用 jquery onclick 事件内联来规避 AJAX 调用

```
<a href="http://foo.bar/" onclick="window.open('https://www.foo.bar/culrsteam')">Foo</a>
```

您还可以使用`window.open('https://www.foo.bar/culrsteam', '_blank')`like with`target='_blank'`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-11-15T04:55:12.273

试试这个代码...

```
<a href="http://google.com/" onclick="location.replace('http://google.com/'),'_top'">Google</a> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-02-04T07:10:43.040

如果地址在 href 属性中没有传输协议，则可能会发生这种情况。一个示例是将 localhost 链接为`<a href="localhost"></div>`而不是`<a href="http://localhost"></div>`. 如果这样做，您会看到谷歌浏览器会给出取消状态，并且在 Safari 中会出现一个对话框，询问应该在哪个应用程序中打开链接，因为传输协议是未知的。`$_SERVER['HTTP_HOST']`我在 PHP 中设置链接时遇到了这个问题。

关键是，请确保将传输协议留在链接前面，无论是、`http://`还是其他任何内容。`https://``ftp://`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-08-24T22:19:07.193

我已经`e.preventDefault()`设置了父元素。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-18T09:40:50.643

我知道这是一个老问题，但是刚刚遇到了类似的问题，听起来问题可能是您的请求被浏览器阻止了。如果您当前处于尝试链接到不安全 (http) 资源的安全 (https) 环境中，则可能会发生这种情况。

目前尚不清楚您的 href 是什么，但如果您当前的环境是安全的，请确保 href 是 https（或 //）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-08-20T19:11:07.280

`href`在使用 JS 设置链接的属性后，我在 ReactJS 中遇到了这个问题。我使用`useState`挂钩解决了它应该是什么链接。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-08-11T06:46:14.147

我有`data-bs-dismiss="modal"`哪个关闭我的模式但阻止重定向

# android - 动画 anim_right.xml

> ID：15050100
> 
> 赞同：0
> 
> 时间：2013-02-24T08:45:56.473
> 
> 标签：android

我应该改变什么才能从 anim_left.xml 获取 anim_right.xml。与下面的代码相反，有人可以告诉我在 android 中学习动画的好教程吗？

ani_left.xml

```
<translate
    android:duration="2000"
    android:fromXDelta="50%p"
    android:interpolator="@android:anim/linear_interpolator"
    android:toXDelta="0" />

<alpha
    android:duration="1000"
    android:fromAlpha="0.0"
    android:interpolator="@android:anim/linear_interpolator"
    android:toAlpha="1.0" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T09:12:06.067

只需`android:toXDelta`从更改`0`为`100`，这应该可以。

# database - 在数据库中存储考勤

> ID：15050102
> 
> 赞同：1
> 
> 时间：2013-02-24T08:46:10.797
> 
> 标签：database, oracle, jsp

我有 4 个学期的学生，我很关心他们每个科目的出勤率。不同学期的学生被分组。每批都可以从 36 个科目中选择一个科目。

首先，我创建了一个表格，`subject`其中列出了四个批次的所有主题以及主题代码。我有另一个表`student`，其中有`studentid`6 个列，其中包含学生选择的主题代码。通过执行连接，我可以知道学生选择了哪个科目。

现在我无法弄清楚如何以干净的方式存储每日出勤率。请提出一种方法，因为我需要存储 365 天和 1500 多名学生的数据。（部分批次周日不放假）。

我发现了一些相关的主题，包括[在数据库中存储考勤记录](https://stackoverflow.com/questions/1998298/storing-attendance-records-in-the-database)和其他一些主题，但我找不到解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T08:55:41.390

我会有这样的事情：

```
Subjects( SubjectId PK, Name, etc... )
Classes( ClassId PK, SubjectId, DateTime periodBegin, etc... )
Students( StudentId PK, Name, etc... )
StudentAttendance( StudentId PK, ClassId PK ) 
```

`Subjects`包含每个科目`Classes`的记录，包含学校日历中每个预定课程的记录。该`Classes`表将需要填充实际的班级集会 - 您可以在它们发生时添加它们，或者在学年开始时批量添加它们。该`Students`表是不言自明的，该`StudentAttendance`表列出了哪些学生积极参加了特定课程。

不要认为像这样的表`StudentAttendance`是一个糟糕的设计——这是一个多对多连接表的典型示例。一些数据库在连接表中有数十亿行并不罕见，但因为它只包含两个键值（可能是 int32 或 int64），所以它不会占用太多磁盘空间。

这是一个查询，用于查找哪些学生没有参加特定课程：

```
SELECT
    Name
FROM
    Students
WHERE
    StudentId NOT IN (
        SELECT
            StudentId
        FROM
            StudentAttendance
            INNER JOIN Classes ON StudentAttendance.ClassId = Classes.ClassId
        WHERE
            StudentAttendance.ClassId = @classId
    ) 
```

这是一个查询，用于获取每个参加特定科目的学生的出勤人数。除以 ( `SELECT Count(*) FROM Clases WHERE Classes.SubjectId = @subject`) 得到每个学生的出勤率。如果学生从未参加过任何课程（故意或因为他们没有注册），那么他们将不会出现在列表中。

```
SELECT
    Students.Name
    COUNT(*) As AttendanceCount
FROM
    StudentAttendance
    INNER JOIN Classes ON Classes.ClassId = StudentAttendance.ClassId
    INNER JOIN Students ON Students.StudentId = StudentAttendance.StudentId
GROUP BY
    StudentId
WHERE
    Classes.SubjectId = @subjectId 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T08:50:06.210

创建一个连接表，其中包含学生和学科的外键以及日期字段，并为在给定日期参加特定课程的每个学生存储一行。通过适当的索引，性能应该是可以接受的。

# c# - 如何挂笔记本的硬件按键？

> ID：15050109
> 
> 赞同：1
> 
> 时间：2013-02-24T08:47:18.970
> 
> 标签：c#, keyboard, hook, pinvoke, device-driver

我有一个[Acer Aspire 5740G](http://support.acer.com/product/default.aspx?modelId=1870)，我想拦截硬件按钮。我使用`SetWindowsHookEx()`.

对于音量按钮，例如，我接收`VolumeUp`和`VolumeDown`消息，一切都很好。但是对于**wifi按钮**和**蓝牙按钮**，我只收到`LBUTTON`，`OEMCLEAR`（KeyCode 255）。那么我该如何区分**这两者**呢？

我还读到，这个按钮可能无法访问，因为它们会被视为操作系统下方的*Fn 键。*但是有一个名为[Launch Manager](http://global-download.acer.com/GDFiles/Application/LaunchManager/LaunchManager_Dritek_3.0.04_W7x86W7x64_A.zip?acerid=633965387932449137&Step1=NOTEBOOK,%20ULTRABOOK&Step2=ASPIRE&Step3=ASPIRE%205740&OS=ALL&LC=en&BC=ACER&SC=PA_7)的 Acer 软件，它可以显示 OSD 消息并显示蓝牙/wifi 标志。所以必须有可能（至少在理论上）在操作系统级别区分这些按钮。

那么，如何钩住这些键呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T10:25:28.183

这是一个相关的问题

*   [截取笔记本电脑上的 Fn 键](https://stackoverflow.com/questions/514781/intercepting-the-fn-key-on-laptops)

不知道你是否写过 Windows 驱动程序。

Windows 驱动程序，嗯，历史悠久。

现代 Windows 有两种设备驱动程序模式：

*   内核模式驱动程序，请参阅[内核模式驱动程序框架](http://en.wikipedia.org/wiki/Kernel-Mode_Driver_Framework)
*   用户模式驱动程序请参阅[Windows 用户模式驱动程序框架](http://en.wikipedia.org/wiki/User-Mode_Driver_Framework)

由于您发现这两个按钮具有相同的窗口消息，因此它可能由内核模式驱动程序控制。

一些硬件信号可能没有`WM_`消息定义，有时它们只是映射到一个相同的 Windows 消息，但内核模式驱动程序可以区分它们。有很多，例如，`Ke`bla bla 和`IRP_`bla bla 的东西；有些甚至只能用 C/C++ 编写，即原生代码；除了查看驱动程序之外，您可能没有其他办法。

如果你真的对 Windows 驱动感兴趣，可以看看[Windows Driver Development](http://msdn.microsoft.com/en-us/library/windows/hardware/ff557573.aspx)，WDK（Windows Driver Kit）是免费下载的。

Finally, if you **STRONGLY** want the technical support from the manufacturer(Acer), leave a comment to let me know if we shall get in contact and I'll reply with my email.

# c# - 如何从 live.com 获取 OAuth request_token？

> ID：15050113
> 
> 赞同：3
> 
> 时间：2013-02-24T08:48:20.797
> 
> 标签：c#, oauth

这可能是一个重复的问题，但还没有答案。它说，oauth-dot-net 和 DotNetOpenAuth 库都非常复杂，这似乎是贯穿 OAuth 的主题，而 [.NET 中带有验证的 OAuth 具有](https://stackoverflow.com/questions/4002847/oauth-with-verification-in-net)指导意义且更容易理解

> *使用 WebBrowser 控件*，并在桌面应用程序中打开授权网页。当用户单击“允许”时，从该 WebBrowser 控件中获取响应文本，自动提取 PIN，然后获取访问令牌。您发送 5 或 6 个 HTTP 请求，但用户只需要看到一个允许/拒绝对话框。简单的。

这是没有浏览器的 OAuth？不，*不是*。只要您使用 Web 浏览器调用 URL 并运行响应，它就可以工作，这是基于浏览器的 HTML、元刷新、noscript 标签和 javascript 自动化的全能奇迹。但我不希望这样做。

> 微软，这是针对你的！我需要做纯 REST，而不是*主要是 REST，除非它是 javascript*。
> 
> 如 OAuth RFC 所述，我希望检索请求令牌。请求令牌，而不是软件身份验证机器人。**请求令牌。**

当我使用 WebClient 直接执行这个 GET

```
GET /oauth20_authorize.srf?client_id=00000000400A9B87&scope=wl.signin%20wl.basic&response_type=code&redirect_uri=http%3a%2f%2fwhitehouse.podzone.net%2f HTTP/1.1 
```

我得到了机器生成的 javascript 无法形容的混乱。看在 Pete 的份上，我想要一个该死的 request_token，而不是 JavaScript 的爱。那么，我如何从 live.com 获得请求令牌？

我目前正在处理发送的 HTML 引用的混淆和压缩库，但这很繁重。如果有人已经这样做了，我将非常感谢您的帮助。甚至是有关如何劫持和跟踪此页面上的脚本的指导，这可能会加快速度。

如果您正在检查 GET，重定向 URI [http://whitehouse.podzone.net/](http://whitehouse.podzone.net/)会映射到我家用台式机上的网络服务器，这通常是正在调试的应用程序中的 HttpListener，有时是 IIS。这就是我处理重定向的方式（通常只是放弃它，但很高兴知道事情已经走到了这一步）。

* * *

我根据别人在 Skydrive 上的工作，从我所做的一些工作中提取了一个短期的 hack。它通过利用 Skydrive 应用程序已为每个真实帐户预先批准这一事实来避免该问题。然而，这是一个黑客。我想正确使用 OAuth，但这似乎并不实用。

* * *

尽管 Darin 非常勇敢地尝试提供帮助，这发现了一些我希望在第一天看到的东西，但我留下了他的链接[http://msdn.microsoft.com/en-us/library中的这句话/live/hh826529.aspx](http://msdn.microsoft.com/en-us/library/live/hh826529.aspx)（我的重点）

> *要实现客户端身份验证流程，桌面应用程序必须使用 Web 浏览器控件。*大多数开发语言都包含这样的控件。在此示例中，我们的应用程序使用 System.Windows.Forms.WebBrowser 类。*登录完成后*，所有后续的 Live Connect API 调用都可以通过使用 System.Net.WebRequest 类来完成。使用 Web 浏览器控件开始登录，传递与此类似的 URL。

他们只希望我使用他们的机器人进行登录，因为放弃对交易所的控制使得跳过提供用户干预机会变得更加困难。没有任何*内在*原因我不能自己实施登录程序。他们的 javascript 可以发布的任何内容我都可以使用 WebClient 发布。我可以做同样的加密。在道德层面上，如果用户不希望我的软件做它的事情，他们几乎不会提供他们的用户名和密码。

我已经标记了达林的答案，因为他非常努力地提供帮助并提供了一些优秀的东西，但我想我会坚持我的小技巧，这令人失望。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T09:51:51.717

您可以使用[`implicit grant flow`](http://msdn.microsoft.com/en-us/library/live/hh243647.aspx#implicitgrant)富客户端应用程序 ( `grant_type=token`)。这个想法是有一个 WebBrowser 控件，它通过重定向到 live.com 授权服务器并提供回调 url 来启动身份验证流程。如果用户授权您的应用程序，live.com 将重定向回回调 url 并在 url 中传递访问令牌：

```
http://contoso.com/Callback.htm#access_token=ACCESS_TOKEN 
```

然后，您可以`access_token`从 WebBrowser 检索 url 的片段并使用它来执行经过身份验证的请求。您无需在 WebBrowser 中解析返回的内容。您需要做的是从 url 中检索访问令牌。

还有[`authorization grant code flow`](http://msdn.microsoft.com/en-us/library/live/hh243647.aspx#authcodegrant)( `grant_type=code`) 更适合基于 Web 的应用程序。

您可以查看[`following article`](http://msdn.microsoft.com/en-us/library/live/hh826529.aspx)使用桌面应用程序的完整示例。

# android - Android获取日期差异

> ID：15050115
> 
> 赞同：1
> 
> 时间：2013-02-24T08:48:51.263
> 
> 标签：android, date, android-date

我想在我的应用程序中实现每日问题功能。如果用户每天使用该功能一次，他将无法访问该功能，直到当天发生变化。我可以在首次访问功能时获取，但我如何才能检查这个日期时间以备下次使用。

我怎样才能得到日期是否更改。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T10:36:11.803

您可以结合使用时间戳、共享首选项和使用[`isToday(long when)`](http://developer.android.com/reference/android/text/format/DateUtils.html#isToday%28long%29)位于`android.text.format.DateUtils`

代码示例：

```
SharedPreferences userDetails = context.getSharedPreferences("userdetails", MODE_PRIVATE);
long sharedPreferenceTimestamp= userDetails.getLong("lastquestiontime", 0); // 0: 1/1/1970
if(!DateUtils.isToday(sharedPreferenceTimestamp)) {
   // --> show the Question HERE! <--

   // update the value of last question show!
   SharedPreferences.Editor editor = userDetails.edit();
   editor.putLong("lastquestiontime", System.currentTimeMillis()); // value to store
   editor.commit();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T10:28:07.220

我更喜欢使用 unix 时间来计算日期。unix 时间是自 1970 年 1 月 1 日格林威治标准时间午夜以来的毫秒数。您可以通过调用 Date.getTime() 方法获取此数字。

因为您需要经过的天数，所以您应该将此数字除以 24*60*60*1000。之后，您无需执行任何其他操作，只需比较两个数字即可。如果数字相同，则日期不会改变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T08:50:41.433

您不能使用共享首选项并添加用户名和日期作为键。然后，当您下次检索用户名时，您可以检索该用户的日期并进行比较。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-30T22:52:36.010

# python - 使用python的两个命题的结果

> ID：15050116
> 
> 赞同：0
> 
> 时间：2013-02-24T08:49:30.310
> 
> 标签：python

这是我使用python的第一次实践，我需要找到两个命题的值，即析取，排他或条件语句，以及这些命题的生物条件。我真的是初学者，只需要知道我错在哪里就可以得出这些命题的正确结果。提前致谢！

```
def conjunction(i,j): # conjunction i,j
    result = i + j
    return result

def disjunction(i,j): # dis-junction i,j
    result = i || result = j
    return result

def exclusive(i,j): # exclusive i,j
    result = j
    return result

def conditional(i,j): # conditional i,j
    if i = 0
    result = j
    if j =0
    result = i;
    return result

def biconditional (i,j): # biconditional i,j
    result = i = j && j = i
    return result 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T09:11:09.660

干得好：

```
def conjunction(i,j): # conjunction i,j
    return (i and j)

def disjunction(i,j): # dis-junction i,j
    return (i or j)

def exclusive(i,j): # exclusive i,j
    return (i != j)

def conditional(i,j): # conditional i,j
    return j if i else True

def biconditional (i,j): # biconditional i,j
    return (i == j)

output = [[],[],[],[],[]]
titles = ["Conjunction", "Disjunction", "Exclusive", "Conditional", "Biconditional"]

for f1 in [True, False]:
    for f2 in [True, False]:
        output[0].append('{0:8s} | {1:8s} | {2:8s}'.format(str(f1), str(f2), str(conjunction(f1, f2))))
        output[1].append('{0:8s} | {1:8s} | {2:8s}'.format(str(f1), str(f2), str(disjunction(f1, f2))))
        output[2].append('{0:8s} | {1:8s} | {2:8s}'.format(str(f1), str(f2), str(exclusive(f1, f2))))
        output[3].append('{0:8s} | {1:8s} | {2:8s}'.format(str(f1), str(f2), str(conditional(f1, f2))))
        output[4].append('{0:8s} | {1:8s} | {2:8s}'.format(str(f1), str(f2), str(biconditional(f1, f2))))

for i in range(5):
    print "=" * 30
    print titles[i]
    print "-" * 30
    print "\n".join(output[i])
    print "-" * 30 
```

**输出**

```
==============================
Conjunction
------------------------------
True     | True     | True    
True     | False    | False   
False    | True     | False   
False    | False    | False   
------------------------------
==============================
Disjunction
------------------------------
True     | True     | True    
True     | False    | True    
False    | True     | True    
False    | False    | False   
------------------------------
==============================
Exclusive
------------------------------
True     | True     | False   
True     | False    | True    
False    | True     | True    
False    | False    | False   
------------------------------
==============================
Conditional
------------------------------
True     | True     | True    
True     | False    | False   
False    | True     | True    
False    | False    | True    
------------------------------
==============================
Biconditional
------------------------------
True     | True     | True    
True     | False    | False   
False    | True     | False   
False    | False    | True    
------------------------------ 
```

# assembly - 试图找出以下反汇编清单

> ID：15050117
> 
> 赞同：0
> 
> 时间：2013-02-24T08:49:30.403
> 
> 标签：assembly, x86, disassembly, wchar-t, ida

我正在查看 IDA pro 中 Win32 可执行文件的以下反汇编并获取该`snwprintf`部分，但我不明白`mov ecx, [eax+4]`此处指令的目的（他们是否在这里丢弃了部分字符串？）。

```
loc_4018E7:
mov     eax, 0DEEDh
push    eax
push    offset asc_402270 ; "%X"
push    4               ; size_t no. chars
lea     ecx, [ebp+var_inpPassStr]
push    ecx             ; wchar_t * opBuffer
call    ds:_snwprintf   ; convert number to HEX string
add     esp, 10h
xor     edx, edx
mov     [ebp+var_8], dx
mov     eax, [ebp+arg_inpPass]
mov     ecx, [eax+4]
mov     [ebp+var_14], ecx
lea     edx, [ebp+var_inpPassStr]
push    edx             ; wchar_t *
call    ds:wcslen
add     esp, 4
mov     esi, eax
mov     eax, [ebp+var_14]
push    eax             ; wchar_t *
call    ds:wcslen
add     esp, 4
cmp     esi, eax
jnz     short loc_401984; this prints "invalid pass" 
```

对此的任何见解都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T09:04:43.830

这个

```
mov     eax, [ebp+arg_inpPass]
mov     ecx, [eax+4] 
```

加载`eax`一个函数参数的值（`arg_inpPass`由反汇编程序命名），它恰好是一个指针，然后取消引用它，跳过前 4 个字节。

如果不知道代码在做什么或查看更多代码，就不可能知道为什么会跳过前 4 个字节。可能是指针指向一个结构，而函数有兴趣在偏移量 4 处访问其成员。它可能是别的东西。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-24T09:02:59.020

首先，`ebp`在这个反汇编块期间没有被设置，可能它在这个反汇编块之前已经完成了一些行。如果这是用汇编编写的，它可能指向其他地方而不是堆栈，因为它通常用于高级语言（C、C++ 等）。

```
mov     eax, [ebp+arg_inpPass]    ; read a dword variable (it's a pointer)
                                  ; from the stack into eax
mov     ecx, [eax+4]              ; use that pointer plus 4 to read a dword value
                                  ; from memory into ecx
mov     [ebp+var_14], ecx         ; store the value read into ecx into
                                  ; a local variable (in the stack) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-07-27T04:24:08.660

```
mov     eax, [ebp+arg_inpPass]
mov     ecx, [eax+4]
mov     [ebp+var_14], ecx 
```

第一行，从 [ebp+arg_inpPass] 指向的地址加载 4 个字节（32 位或 DWORD）

第二行从前一行地址加载 32 位值加 4，这意味着如果 eax 为 12345678h，则 ecx 变为地址 1234567Ch 指向的 32 位值

第三行将 ecx 的值移动到 [ebp+var_14] 指向的地址，

你确定第一行不是 LEA 指令吗？如果它真的是一个 mov 那么代码提供了一种访问用户提供的内存位置的方法。

# asp.net - 如何在服务器端代码中管理多语言？

> ID：15050123
> 
> 赞同：0
> 
> 时间：2013-02-24T08:50:27.593
> 
> 标签：asp.net

我有一个 ASP.NET Web 应用程序。我在服务器端代码中管理了一些消息“字符串”。谁能给我管理多语言的最佳实践示例代码？例如：

```
if Language ="en" then

   labelMessage.label ="my message" 

else if language="es" then

   labelMessage.label = "esto es un .."

end if 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T08:58:18.360

通常的做法是使用 Resources 和 Culture 来切换应用程序的上下文，你有基于 .Net 2.0 的信息，但它仍然是相同的过程和代码：

[http://msdn.microsoft.com/en-us/magazine/cc163566.aspx](http://msdn.microsoft.com/en-us/magazine/cc163566.aspx)

# powershell - 用于重命名文件的 Powershell 脚本

> ID：15050132
> 
> 赞同：4
> 
> 时间：2013-02-24T08:51:40.683
> 
> 标签：powershell, powershell-3.0

我有一堆文件的名称以数字开头，可能在两个数字之一之后包含空格和破折号，然后有时（有时没有）在我要保留的名称的第一个字母字符之前有一个空格，即：

2-01 Dazed And Confused.txt（我想把这个重命名为 Dazed And Confused.txt）

或者

02 - Uncle Salty.txt（我想重命名为 Uncle Salty.txt）

或者

02-The Night Before.txt（我想重命名为The Night Before.txt）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T22:04:04.033

和cmdlet 可以直接从管道接受源[`Move-Item`](http://go.microsoft.com/fwlink/?LinkID=113350)并[`Rename-Item`](http://go.microsoft.com/fwlink/?LinkID=113382)使用脚本块提供新名称：

```
dir | Move-Item -Destination { $_.Name -replace '^([0-9\-\s]*)' } 
```

或者

```
dir | Rename-Item -NewName { $_.Name -replace '^([0-9\-\s]*)' } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-24T11:58:20.770

```
dir c:\tmp | % {
     mv $_.FullName $(Join-Path $_.Directory ($_.Name -replace "^([0-9\-\s]*)",'').Trim());
} 
```

如果需要递归处理YourDirectory，在`-recurse`后面加上`dir`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T12:10:07.077

尝试这样的事情：

```
$re = '^\d+\s*-\d*\s*(.*)$'
$recurse = $false

Get-ChildItem "C:\some\folder" -Recurse:$recurse | ? {
  -not $_.PSIsContainer -and $_.Name -match $re
} | % {
  Move-Item $_.FullName (Join-Path $_.Directory $matches[1])
} 
```

如果您希望连字符是可选的，请将正则表达式更改为`'^\d+\s*-?\d*\s*(.*)$'`.

如果要递归到子文件夹，请更改`$recurse`为`$true`.

# javascript - 创建自定义 Twitter 小部件

> ID：15050134
> 
> 赞同：0
> 
> 时间：2013-02-24T08:51:47.727
> 
> 标签：javascript, html, css, twitter, widget

我一直在环顾四周，似乎找不到任何关于创建自定义 twitter 小部件的真正**有用的信息。**当我说自定义时，我的意思是从 UI 端设计一个 twitter 小部件，然后向它添加 twitter 功能。换句话说，创建您自己的 twitter 小部件。

有什么好的网站可以指点我吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T09:18:36.343

我认为这个网站会帮助你。你可以在这里看到一些有用的东西。 [http://net.tutsplus.com/tutorials/php/how-to-create-an-advanced-twitter-widget/](http://net.tutsplus.com/tutorials/php/how-to-create-an-advanced-twitter-widget/)

# asp.net - HTML 5、ASP.NET 4.5 文本框文本模式

> ID：15050136
> 
> 赞同：0
> 
> 时间：2013-02-24T08:52:20.107
> 
> 标签：asp.net, html

美好的一天，我只想问是否可以在 TextBox TextMode = "Date" 中阻止过去的日期？谢谢你们！

*更新
有一种方法可以在 TextMode="DateTimeLocal" 中阻止日期吗？如果我使用 Date 没关系，但是当我将 TextMode 更改为 DateTimeLocal 时它不起作用。

`min=TextBoxArrival.Attributes["min"] = DateTime.Now.ToString("yyyy-MM-dd");`
此代码适用于 TextMode="Date"
此代码来自：@Darin Dimitrov 先生

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T09:23:21.403

您可以使用以下[`min`](http://www.w3.org/TR/html-markup/input.date.html#input.date.attrs.min)属性：

```
<input type="date" min="2013-02-24" value="2013-02-24" /> 
```

您还可以使用一个[`max`](http://www.w3.org/TR/html-markup/input.date.html#input.date.attrs.max)属性来限制可以在该字段中选择的最大日期。

也不要忘记这不是验证。您应该确保在您的服务器上执行此验证，而不是依赖客户端。

# coldfusion - 语法完成后，遍历 ANTLR v4 树的最佳方法是什么？

> ID：15050137
> 
> 赞同：35
> 
> 时间：2013-02-24T08:52:26.977
> 
> 标签：coldfusion, antlr, antlr4

**目标**

我正在开发一个为 Coldfusion CFscript 创建 Varscoper 的项目。基本上，这意味着检查源代码文件以确保开发人员正确地使用`var`了他们的变量。

在使用 ANTLR V4 几天后，我有了一个语法，它在 GUI 视图中生成了一个非常好的解析树。现在，使用该树，我需要一种方法来以编程方式向上和向下爬取节点以查找变量声明，并确保如果它们在函数内部，则它们具有正确的作用域。如果可能的话，我宁愿不在语法文件中这样做，因为这需要将语言的定义与这个特定的任务混合。

**我试过的**

我最近的尝试是使用`ParserRuleContext`并试图通过它的`children`via `getPayload()`。检查类后，`getPayLoad()`我要么有一个`ParserRuleContext`对象，要么有一个`Token`对象。不幸的是，使用它我永远无法找到一种方法来获取特定节点的实际规则类型，只有它包含文本。每个节点的规则类型是必需的，因为该文本节点是被忽略的右手表达式、变量赋值还是函数声明都很重要。

**问题**

1.  我对 ANTLR 很陌生，这甚至是正确的方法，还是有更好的方法来遍历树？

这是我的示例 java 代码：

cfscript.java

```
import org.antlr.v4.runtime.*;
import org.antlr.v4.runtime.tree.Trees;

public class Cfscript {
    public static void main(String[] args) throws Exception {
        ANTLRInputStream input = new ANTLRFileStream(args[0]);
        CfscriptLexer lexer = new CfscriptLexer(input);
        CommonTokenStream tokens = new CommonTokenStream(lexer);
        CfscriptParser parser = new CfscriptParser(tokens);
        parser.setBuildParseTree(true);
        ParserRuleContext tree = parser.component();
        tree.inspect(parser); // show in gui
        /*
            Recursively go though tree finding function declarations and ensuring all variableDeclarations are varred
            but how?
        */
    }
} 
```

cfscript.g4

```
grammar Cfscript;

component
    : 'component' keyValue* '{' componentBody '}'
    ;

componentBody
    : (componentElement)*
    ;

componentElement
    : statement
    | functionDeclaration
    ;

functionDeclaration
    : Identifier? Identifier? 'function' Identifier argumentsDefinition '{' functionBody '}'
    ;

argumentsDefinition
    : '(' argumentDefinition (',' argumentDefinition)* ')'
    | '()'
    ;

argumentDefinition
    : Identifier? Identifier? argumentName ('=' expression)?
    ; 

argumentName
    : Identifier
    ;

functionBody
    : (statement)*
    ;

statement
    : variableStatement
    | nonVarVariableStatement
    | expressionStatement
    ;

variableStatement
    : 'var' variableName '=' expression ';'
    ;

nonVarVariableStatement
    : variableName '=' expression ';'
    ;

expressionStatement
    : expression ';'
    ;

expression
    : assignmentExpression
    | arrayLiteral
    | objectLiteral
    | StringLiteral
    | incrementExpression
    | decrementExpression
    | 'true' 
    | 'false'
    | Identifier
    ;

incrementExpression
    : variableName '++'
    ;

decrementExpression
    : variableName '--'
    ;

assignmentExpression
    : Identifier (assignmentExpressionSuffix)*
    | assignmentExpression (('+'|'-'|'/'|'*') assignmentExpression)+
    ;

assignmentExpressionSuffix
    : '.' assignmentExpression
    | ArrayIndex
    | ('()' | '(' expression (',' expression)* ')' )
    ;

methodCall
    : Identifier ('()' | '(' expression (',' expression)* ')' )
    ;

variableName
    : Identifier (variableSuffix)*
    ;

variableSuffix
    : ArrayIndex
    | '.' variableName
    ;

arrayLiteral
    : '[' expression (',' expression)* ']'
    ;

objectLiteral
    : '{' (Identifier '=' expression (',' Identifier '=' expression)*)? '}'
    ;

keyValue
    : Identifier '=' StringLiteral
    ;

StringLiteral
    :  '"' (~('\\'|'"'))* '"'
    ;

 ArrayIndex
    : '[' [1-9] [0-9]* ']'
    | '[' StringLiteral ']'
    ;

Identifier
    : [a-zA-Z0-9]+
    ;

WS
    : [ \t\r\n]+ -> skip 
    ;

COMMENT 
    : '/*' .*? '*/'  -> skip
    ; 
```

Test.cfc（测试代码文件）

```
component something = "foo" another = "more" persistent = "true" datasource = "#application.env.dsn#" {
    var method = something.foo.test1;
    testing = something.foo[10];
    testingagain = something.foo["this is a test"];
    nuts["testing"]++;
    blah.test().test3["test"]();

    var math = 1 + 2 - blah.test().test4["test"];

    var test = something;
    var testing = somethingelse;
    var testing = { 
        test = more, 
        mystuff = { 
            interior = test 
        },
        third = "third key"
    };
    other = "Idunno homie";
    methodCall(interiorMethod());

    public function bar() {
        var new = "somebody i used to know";
        something = [1, 2, 3];
    }

    function nuts(required string test1 = "first", string test = "second", test3 = "third") {

    }

    private boolean function baz() {
        var this = "something else";
    }
} 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-02-24T11:15:51.680

如果我是你，我不会手动走这个。在生成词法分析器和解析器之后，ANTLR 还会生成一个名为的文件`CfscriptBaseListener` ，其中包含所有解析器规则的空方法。您可以让 ANTLR 遍历您的树并附加一个自定义树侦听器，您可以在其中仅覆盖您感兴趣的那些方法/规则。

在您的情况下，您可能希望在创建新函数时收到通知（以创建新范围），并且您可能会对变量赋值（`variableStatement`和`nonVarVariableStatement`）感兴趣。当 ANTLR 遍历树时，您的听众，让我们调用`VarListener`它将跟踪所有范围。

我确实稍微更改了 1 条规则（我添加了`objectLiteralEntry`）：

```
对象字面量
    ：'{'（objectLiteralEntry（'，'objectLiteralEntry）*）？'}'
    ;

objectLiteralEntry
    : 标识符 '=' 表达式
    ;

```

在以下演示中使生活更轻松：

## VarListener.java

```
public class VarListener extends CfscriptBaseListener {

    private Stack<Scope> scopes;

    public VarListener() {
        scopes = new Stack<Scope>();
        scopes.push(new Scope(null));
    } 

    @Override
    public void enterVariableStatement(CfscriptParser.VariableStatementContext ctx) {
        String varName = ctx.variableName().getText();
        Scope scope = scopes.peek();
        scope.add(varName);
    }

    @Override
    public void enterNonVarVariableStatement(CfscriptParser.NonVarVariableStatementContext ctx) {
        String varName = ctx.variableName().getText();
        checkVarName(varName);
    }

    @Override
    public void enterObjectLiteralEntry(CfscriptParser.ObjectLiteralEntryContext ctx) {
        String varName = ctx.Identifier().getText();
        checkVarName(varName);
    }

    @Override
    public void enterFunctionDeclaration(CfscriptParser.FunctionDeclarationContext ctx) {
        scopes.push(new Scope(scopes.peek()));
    }

    @Override
    public void exitFunctionDeclaration(CfscriptParser.FunctionDeclarationContext ctx) {
        scopes.pop();        
    }

    private void checkVarName(String varName) {
        Scope scope = scopes.peek();
        if(scope.inScope(varName)) {
            System.out.println("OK   : " + varName);
        }
        else {
            System.out.println("Oops : " + varName);
        }
    }
} 
```

一个`Scope`对象可以很简单：

## 范围.java

```
class Scope extends HashSet<String> {

    final Scope parent;

    public Scope(Scope parent) {
        this.parent = parent;
    }

    boolean inScope(String varName) {
        if(super.contains(varName)) {
            return true;
        }
        return parent == null ? false : parent.inScope(varName);
    }
} 
```

现在，为了测试这一切，这里有一个小的主类：

## 主.java

```
import org.antlr.v4.runtime.*;
import org.antlr.v4.runtime.tree.*;

public class Main {

    public static void main(String[] args) throws Exception {

        CfscriptLexer lexer = new CfscriptLexer(new ANTLRFileStream("Test.cfc"));
        CfscriptParser parser = new CfscriptParser(new CommonTokenStream(lexer));
        ParseTree tree = parser.component();
        ParseTreeWalker.DEFAULT.walk(new VarListener(), tree);
    }
} 
```

如果您运行此类`Main`，将打印以下内容：

```
糟糕：测试
糟糕：再次测试
好的：测试
哎呀：神秘的东西
哎呀：内部
糟糕：第三
糟糕：其他
哎呀：东西
```

毫无疑问，这并不是你想要的，我可能弄乱了 Coldfusion 的一些范围规则。但我认为这将使您对如何正确解决问题有所了解。我认为代码很容易解释，但如果不是这种情况，请不要犹豫，要求澄清。

高温高压

# ruby-on-rails - 使用carrierwave和uploadify时上传错误

> ID：15050138
> 
> 赞同：6
> 
> 时间：2013-02-24T08:52:35.413
> 
> 标签：ruby-on-rails, mongoid, uploadify, carrierwave

我试图支持`uploadify`，但它给了我这个错误。基本上我有一个命名为. 对于单次上传，它适用于carrierwave，但对于多个文件则不然。`carrierwave``multiple file upload``GET http://localhost:3000/users/uploadify.swf?preventswfcaching=1361694618739``model``user`

我已经按照[本](https://stackoverflow.com/questions/8363698/rails-carrier-wave-with-jquery-uploader)教程进行操作。在`users/_form.rb`

```
<p>
<%= f.label "Upload Images"%>
<%= f.file_field :image, :multiple => true %>
</p>

<script type= "text/javascript">
$(document).ready(function() {
 <% key = Rails.application.config.session_options[:key] %>
  var uploadify_script_data = {};
  var csrf_param = $('meta[name=csrf-param]').attr('content');
  var csrf_token = $('meta[name=csrf-token]').attr('content');
  uploadify_script_data[csrf_param] = encodeURI(encodeURIComponent(csrf_token));
  uploadify_script_data['<%= key %>'] = '<%= cookies[key] %>';

  $('#user_image').uploadify({
  uploader        : '<%= asset_path("uploadify.swf")%>',
  script          : '/images',
  cancelImg       : '<%= asset_path("uploadify-cancel.png")%>',
  auto            : true,
  multi           : true,
  removeCompleted     : true,
  scriptData      : uploadify_script_data,
  onComplete      : function(event, ID, fileObj, doc, data) {
  }
  });  
 });
</script> 
```

我正在使用 mongoid 所以模型是这样的

```
class User
 include Mongoid::Document
 field :name, type: String
 field :description, type: String
 field :image, type: String

   mount_uploader :image, ImageUploader 
 end 
```

我没有得到什么是错误。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-07T18:15:11.100

这是使用 Carrierwave 上传多个图像的完整解决方案：只需按照以下步骤操作即可。

```
rails new multiple_image_upload_carrierwave 
```

在宝石文件中

```
gem 'carrierwave' 
```

然后运行以下

```
bundle install
rails generate uploader Avatar 
```

创建后脚手架

```
rails generate scaffold post title:string 
```

创建 post_attachment 脚手架

```
rails generate scaffold post_attachment post_id:integer avatar:string 
```

然后运行

```
rake db:migrate 
```

在 post.rb 中

```
class Post < ActiveRecord::Base
   has_many :post_attachments
   accepts_nested_attributes_for :post_attachments
end 
```

在 post_attachment.rb 中

```
class PostAttachment < ActiveRecord::Base
   mount_uploader :avatar, AvatarUploader
   belongs_to :post
end 
```

在 post_controller.rb

```
def show
   @post_attachments = @post.post_attachments.all
end

def new
   @post = Post.new
   @post_attachment = @post.post_attachments.build
end

def create
   @post = Post.new(post_params)

   respond_to do |format|
     if @post.save
       params[:post_attachments]['avatar'].each do |a|
         @post_attachment = @post.post_attachments.create!(:avatar => a, :post_id => @post.id)
       end
       format.html { redirect_to @post, notice: 'Post was successfully created.' }
     else
       format.html { render action: 'new' }
     end
   end
 end

 private
   def post_params
      params.require(:post).permit(:title, post_attachments_attributes: [:id, :post_id, :avatar])
   end 
```

在views/posts/_form.html.erb

```
<%= form_for(@post, :html => { :multipart => true }) do |f| %>
   <div class="field">
     <%= f.label :title %><br>
     <%= f.text_field :title %>
   </div>

   <%= f.fields_for :post_attachments do |p| %>
     <div class="field">
       <%= p.label :avatar %><br>
       <%= p.file_field :avatar, :multiple => true, name: "post_attachments[avatar][]" %>
     </div>
   <% end %>

   <div class="actions">
     <%= f.submit %>
   </div>
<% end %> 
```

编辑任何帖子的附件和附件列表。在views/posts/show.html.erb

```
<p id="notice"><%= notice %></p>

<p>
  <strong>Title:</strong>
  <%= @post.title %>
</p>

<% @post_attachments.each do |p| %>
  <%= image_tag p.avatar_url %>
  <%= link_to "Edit Attachment", edit_post_attachment_path(p) %>
<% end %>

<%= link_to 'Edit', edit_post_path(@post) %> |
<%= link_to 'Back', posts_path %> 
```

更新表单以编辑附件视图/post_attachments/_form.html.erb

```
<%= image_tag @post_attachment.avatar %>
<%= form_for(@post_attachment) do |f| %>
  <div class="field">
    <%= f.label :avatar %><br>
    <%= f.file_field :avatar %>
  </div>
  <div class="actions">
     <%= f.submit %>
  </div>
<% end %> 
```

修改 post_attachment_controller.rb 中的更新方法

```
def update
  respond_to do |format|
    if @post_attachment.update(post_attachment_params)
      format.html { redirect_to @post_attachment.post, notice: 'Post attachment was successfully updated.' }
    end 
  end
end 
```

在 rails 3 中不需要定义强参数，并且您可以在模型和 accept_nested_attribute 中定义 attribute_accessible 来发布模型，因为在 rails 4 中不推荐使用属性可访问性。

对于编辑附件，我们不能一次修改所有附件。所以我们将一个一个地替换附件，或者您可以根据您的规则进行修改，这里我只是向您展示如何更新任何附件。

# servlets - 如何将信息从 servlet 过滤器传递到 Restlet ServerResource 子类？

> ID：15050142
> 
> 赞同：3
> 
> 时间：2013-02-24T08:52:52.413
> 
> 标签：servlets, servlet-filters, restlet, restlet-2.0

在 Jetty 托管的 webapp 中，我使用 servlet 过滤器从 URL 中提取信息，有时将请求路由到非 Restlet servlet。对于 Restlet servlet，我希望能够将信息传递给我的 ServerResource 子类，并且我认为我应该能够通过将信息存储在 HttpServletRequest 的属性中来做到这一点。（Restlet 是否支持不同的机制来实现这一点？我在“Restlet in Action”或 stackoverflow 上找不到任何东西。）

[ServletAdapter](http://www.restlet.org/documentation/2.1/jee/ext/org/restlet/ext/servlet/ServletAdapter.html)将 servlet 请求属性复制到 Restlet HttpRequest 的属性中，但它的构造函数采用 ServletContext 参数，而不是像超类（和默认适配器）ServerAdaptor 这样的上下文参数——它不会复制 servlet 请求属性——所以我不能使用ServletAdapter 来解决这个问题。

HttpServerHelper的[javadoc](http://www.restlet.org/documentation/2.1/jee/engine/org/restlet/engine/adapter/HttpServerHelper.html)，由 ServerServlet.createServer() 实例化，声称将名为“适配器”的上下文参数设置为 ServerAdapter 子类的类名将导致 HttpServerHelper 使用指定的类，但在我的调试中，我可以看到“适配器”上下文参数不存在于通过 ServerServlet.createServer() 中的伪服务器传递给 HttpServerHelper 构造函数的子上下文中，尽管它在父上下文中。这在我看来像一个错误：AFAICT，由于子上下文不携带其父级的属性或参数，因此当前实现的 HttpServerHelper 永远不会看到指示它使用非默认适配器的参数。也许 HttpServerHelper.getHelpedParameters() 应该从其“帮助”服务器的上下文中添加“适配器”参数 s 父上下文，如果它不存在于子上下文中？（此修复也适用于 HttpServerHelper javadoc 中提到的其他参数：“useForwardedForHeader”。）

作为一种解决方法，我扩展了 ServerServlet.createServer() 以将“适配器”参数复制到它传递给 HttpServerHelper 的子上下文中。这行得通。

我还对 ServerAdapter 进行了子类化，以将 servlet 请求属性复制到统一请求：从 ServletAdaptor.toRequest() 直接复制/粘贴。这也有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:22:48.030

也许解决方法是实现另一个 servlet 过滤器，为 servlet 和 restlet 环境提供全局上下文。此上下文可以存储在 ThreadLocal 中。在您的 restlet 资源中，您可以访问此上下文和您的参数...

希望它可以帮助你。

蒂埃里

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-01T15:36:14.513

这是由[问题 741](https://github.com/restlet/restlet-framework-java/issues/741)引起的，将在 Restlet Framework 2.3m2 中提供修复。

# android - 打开失败的EISDIR（是目录）..如何解决这个问题？

> ID：15050145
> 
> 赞同：3
> 
> 时间：2013-02-24T08:53:38.017
> 
> 标签：android, bitmapfactory

每次它给我“无法解码流 java.io.FileNotFoundException: /: open Faild EISDIR (Is a Directory)

我怎样才能摆脱这个错误..这个类在我完成的许多任务中都运行良好！！

这是我用来获取位图的类

```
private class ImageLoaderTask extends AsyncTask<HashMap<String, Object>, Void, HashMap<String, Object>>{

    @Override
    protected HashMap<String, Object> doInBackground(HashMap<String, Object>... hm) {

        InputStream iStream=null;
        String imgUrl = (String) hm[0].get("image");
        int position = (Integer) hm[0].get("position");

        URL url;
        try {
            url = new URL(imgUrl);

            // Creating an http connection to communicate with url
            HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();

            // Connecting to url
            urlConnection.connect();

            // Reading data from url
            iStream = urlConnection.getInputStream();

            // Getting Caching directory
            File cacheDirectory = getBaseContext().getCacheDir();

            // Temporary file to store the downloaded image
            File tmpFile = new File(cacheDirectory.getPath() + "/wpta_"+position+".png");

            // The FileOutputStream to the temporary file
            FileOutputStream fOutStream = new FileOutputStream(tmpFile);

            // Creating a bitmap from the downloaded inputstream
            Bitmap b = BitmapFactory.decodeStream(iStream);

            // Writing the bitmap to the temporary file as png file
            b.compress(Bitmap.CompressFormat.PNG,100, fOutStream);

            // Flush the FileOutputStream
            fOutStream.flush();

           //Close the FileOutputStream
           fOutStream.close();

            // Create a hashmap object to store image path and its position in the listview
            HashMap<String, Object> hmBitmap = new HashMap<String, Object>();

            // Storing the path to the temporary image file
            hmBitmap.put("photo",tmpFile.getPath());
            Log.d("photopah", tmpFile.getPath());

            // Storing the position of the image in the listview
            hmBitmap.put("position",position);

            // Returning the HashMap object containing the image path and position
            return hmBitmap;

        }catch (Exception e) {
            e.printStackTrace();
        }
        return null;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-18T09:32:45.787

您正确地需要调用：

```
tmpFile.getParentFile().mkdirs(); 
```

在创建 FileOutputStream 之前。

查看更多：[FileOutputStream 在下载图像时因“打开失败：EISDIR（是一个目录）”错误而崩溃](https://stackoverflow.com/questions/12339673/fileoutputstream-crashes-with-open-failed-eisdir-is-a-directory-error-when)

# web-services - 是否可以批量上传到亚马逊 s3？

> ID：15050146
> 
> 赞同：76
> 
> 时间：2013-02-24T08:53:41.857
> 
> 标签：web-services, amazon-web-services, amazon-s3, cloud, blob

amazon s3 支持批量上传吗？我有一份工作需要每晚上传约 100K 的文件，这些文件最大可达 1G，但强烈倾向于小文件（90% 小于 100 字节，99% 小于 1000 字节）。

s3 API 是否支持在单个 HTTP 调用中上传多个对象？

所有对象都必须在 S3 中作为单个对象可用。我无法在其他任何地方（FTP 等）或其他格式（数据库、EC2 本地驱动器等）托管它们。这是我无法改变的外部要求。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2014-06-16T19:07:50.807

或者，您可以使用**sync**命令通过[AWS CLI 工具](http://aws.amazon.com/cli/)上传 S3 。

 **> aws s3 同步*local_folder* s3://bucket-name

您可以使用此方法非常快速地将文件批量上传到 S3。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2013-02-24T10:40:22.110

> s3 API 是否支持在单个 HTTP 调用中上传多个对象？

不可以，[S3 PUT 操作](http://docs.aws.amazon.com/AmazonS3/latest/API/RESTObjectPUT.html)仅支持每个 HTTP 请求上传一个对象。

您可以在要与远程存储桶同步的机器上安装[S3 工具，然后运行以下命令：](http://s3tools.org/s3cmd)

```
s3cmd sync localdirectory s3://bucket/ 
```

然后，您可以将此命令放在脚本中并创建一个计划作业以每晚运行此命令。

这应该做你想要的。

该工具基于 MD5 哈希和文件大小执行文件同步，因此冲突应该很少（如果你真的想要你可以使用“s3cmd put”命令来强制盲覆盖目标存储桶中的对象）。

编辑：还要确保您阅读了我为 S3 工具链接的站点上的文档 - 您是否希望本地删除的文件从存储桶中删除或忽略等需要不同的标志。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-10-04T22:21:59.363

为了补充大家所说的，如果您希望您的 java 代码（而不是 CLI）执行此操作而不必将所有文件放在一个目录中，您可以创建一个要上传的文件列表，然后提供该文件列表到 AWS TransferManager 的 uploadFileList 方法。

[https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/s3/transfer/TransferManager.html#uploadFileList-java.lang.String-java.lang.String-java.io。文件-java.util.List-](https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/s3/transfer/TransferManager.html#uploadFileList-java.lang.String-java.lang.String-java.io.File-java.util.List-)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-07-08T17:41:50.830

## 民意调查

> 是否可以批量上传到 Amazon S3？

是^*。

> S3 API 是否支持在单个 HTTP 调用中上传多个对象？

不。

## 解释

Amazon S3 API 不支持批量上传，但[awscli](https://pypi.org/project/awscli/)支持并发（并行）上传。从客户端的角度和带宽效率来看，这些选项的执行方式应该大致相同。

```
 ────────────────────── time ────────────────────►

    1\. Serial
 ------------------
   POST /resource
 ────────────────► POST /resource
   payload_1     └───────────────► POST /resource
                   payload_2     └───────────────►
                                   payload_3
    2\. Bulk
 ------------------
   POST /bulk
 ┌────────────┐
 │resources:  │
 │- payload_1 │
 │- payload_2 ├──►
 │- payload_3 │
 └────────────┘

    3\. Concurrent
 ------------------
   POST /resource
 ────────────────►
   payload_1

   POST /resource
 ────────────────►
   payload_2

   POST /resource
 ────────────────►
   payload_3 
```

## AWS 命令​​行界面

[有关如何提高 Amazon S3 同步命令的传输性能的](https://aws.amazon.com/premiumsupport/knowledge-center/s3-improve-transfer-sync-command/)文档？建议通过两种方式增加并发。其中之一是：

> 为了潜在地提高性能，您可以修改 的值[`max_concurrent_requests`](https://docs.aws.amazon.com/cli/latest/topic/s3-config.html#max-concurrent-requests)。此值设置一次可以发送到 Amazon S3 的请求数。默认值为 10，您可以将其增加到更高的值。但是，请注意以下几点：
> 
> *   运行更多线程会消耗机器上的更多资源。您必须确保您的机器有足够的资源来支持您想要的最大并发请求数。
> *   过多的并发请求会使系统不堪重负，这可能会导致连接超时或减慢系统的响应速度。为避免来自 AWS CLI 的超时问题，您可以尝试将[`--cli-read-timeout`](https://docs.aws.amazon.com/cli/latest/reference/)值或[`--cli-connect-timeout`](https://docs.aws.amazon.com/cli/latest/reference/)值设置为 0。

脚本设置`max_concurrent_requests`和上传目录可能如下所示：

```
aws configure set s3.max_concurrent_requests 64
aws s3 cp local_path_from s3://remote_path_to --recursive 
```

为了提供关于*运行更多线程消耗更多资源*[`aws-cli`](https://hub.docker.com/r/amazon/aws-clint)的线索，我在运行（使用）的容器中做了一个小测量，方法[`procpath`](https://pypi.org/project/Procpath/)是将一个包含约 550 个 HTML 文件（总共约 40 MiB，平均文件大小约 72 KiB）的目录上传到 S3。`aws`下图显示了上传过程的 CPU 使用率、RSS 和线程数。

[![aws s3 cp --recursive, max_concurrent_requests=64](../Images/4460d4a9109b4ceab13f00ed004f8a7c.png)](https://i.stack.imgur.com/GaEla.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-08-17T09:33:24.090

如果你想使用 Java 程序来做，你可以这样做：

```
public  void uploadFolder(String bucket, String path, boolean includeSubDirectories) {
    File dir = new File(path);
    MultipleFileUpload upload = transferManager.uploadDirectory(bucket, "", dir, includeSubDirectories);
    try {
        upload.waitForCompletion();
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
} 
```

* * *

如果您想测试，创建 s3client 和传输管理器以连接到本地 S3，如下所示：

```
 AWSCredentials credentials = new BasicAWSCredentials(accessKey, token);
    s3Client = new AmazonS3Client(credentials); // This is deprecated but you can create using standard beans provided by spring/aws
    s3Client.setEndpoint("http://127.0.0.1:9000");//If you wish to connect to local S3 using minio etc...
    TransferManager transferManager = TransferManagerBuilder.standard().withS3Client(s3Client).build(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-02-20T02:41:10.833

这是一个全面的批处理解决方案，它使用一次[CommandPool::batch](https://docs.aws.amazon.com/aws-sdk-php/v3/api/class-Aws.CommandPool.html)调用将文件从一个文件夹复制到另一个文件夹，尽管它在后台为每个文件运行一个[executeAsync](https://docs.aws.amazon.com/aws-sdk-php/v3/api/class-Aws.AwsClientInterface.html#_executeAsync)命令，但不确定它是否算作一次 API 调用。据我了解，您应该能够使用此方法复制数十万个文件，因为无法将批处理发送到 AWS 以在那里进行处理。

安装 SDK：

```
composer require aws/aws-sdk-php 
```

```
use Aws\ResultInterface;
use Aws\S3\S3Client;
use Aws\S3\Exception\S3Exception;
use Aws\S3\Exception\DeleteMultipleObjectsException;

$bucket = 'my-bucket-name';

// Setup your credentials in the .aws folder
// See: https://docs.aws.amazon.com/sdk-for-php/v3/developer-guide/guide_credentials_profiles.html
$s3 = new S3Client([
    'profile' => 'default',
    'region'  => 'us-east-2',
    'version' => 'latest'
]);

// Get all files in S3
$files = array();
try {
    $results = $s3->getPaginator('ListObjects', [
        'Bucket' => $bucket,
        'Prefix' => 'existing-folder' // Folder within bucket, or remove this to get all files in the bucket
    ]);

    foreach ($results as $result) {
        foreach ($result['Contents'] as $object) {
            $files[] = $object['Key'];
        }
    }
} catch (AwsException $e) {
    error_log($e->getMessage());
}

if(count($files) > 0){
    // Perform a batch of CopyObject operations.
    $batch = [];
    foreach ($files as $file) {
        $batch[] = $s3->getCommand('CopyObject', array(
            'Bucket'     => $bucket,
            'Key'        => str_replace('existing-folder/', 'new-folder/', $file),
            'CopySource' => $bucket . '/' . $file,
        ));
    }

    try {
        $results = CommandPool::batch($s3, $batch);

        // Check if all files were copied in order to safely delete the old directory
        $count = 0;
        foreach($results as $result) {
            if ($result instanceof ResultInterface) {
                $count++;
            }
            if ($result instanceof AwsException) {
            }
        }

        if($count === count($files)){
            // Delete old directory
            try {
                $s3->deleteMatchingObjects(
                    $bucket, // Bucket
                    'existing-folder' // Prefix, folder within bucket, as indicated above
                );
            } catch (DeleteMultipleObjectsException $exception) {
                return false;
            }

            return true;
        }

        return false;

    } catch (AwsException $e) {
        return $e->getMessage();
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-05T20:55:53.280

一个文件（或文件的一部分）= 一个 HTTP 请求，但 Java API 现在支持高效的多文件上传，而无需您自己编写多线程，通过使用[TransferManager](http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/s3/transfer/TransferManager.html)**

# wordpress - wordpress 中单 {post-type}.php 的永久链接结构

> ID：15050148
> 
> 赞同：1
> 
> 时间：2013-02-24T08:53:50.277
> 
> 标签：wordpress, permalinks

我已经尝试了很多方法来将我的自定义帖子类型显示为单{post-type}，最后它在我使用后运行良好：

> '重写'=> 假，

在那之前，我用

> 'rewrite' => array('slug' => 'custom-post-type' )

但从不适合我。不知道我哪里弄错了。现在我应该感到高兴，因为它的工作没有任何错误。但是对于永久链接有一点困惑，因为它的显示：

> localhost/myblog/?news=break-news**而不是**：localhost/myblog/news/break-news

任何人请给我一些想法如何获取链接，如：

> 本地主机/我的博客/新闻/突发新闻

我选择的永久链接结构：> http//myblog/sample-post/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T09:00:40.447

你第一次做对了...

`'rewrite' => array('slug' => 'custom-post-type')`

If it's not working then try clearing your rewrite cache by going to Settings > Permalinks and clicking the save button.

# node.js - 使用 *.zip/*.wgt 文件从 node.js 服务器发送 POST 请求到 Wookie 服务器

> ID：15050152
> 
> 赞同：1
> 
> 时间：2013-02-24T08:54:55.130
> 
> 标签：node.js, post, widget, zip, http-post

我尝试将带有来自 node.js 的 POST 请求的 *.wgt 文件（这是有效的 *.zip 文件）发送到运行 Wookie Server 的其他服务器。我已经关注了*http server*和*fs*的 node.js 文档以及 stackoverflow 上的另外两个帖子（[Node.js POST File to Server](https://stackoverflow.com/questions/9943010/node-js-post-file-to-server)以及[如何从 node.js 上传文件](https://stackoverflow.com/questions/5744990/how-to-upload-a-file-from-node-js)），但我没有设法让它工作。

我已经做了什么：

我有存储在 node.js 服务器上的 *.wgt 文件。我在节点中创建一个 http 服务器，准备对 Wookie REST API 的 POST 请求，获取 *.zip 文件流并使用 .zip 流`fs.createReadStream()`式传输它`pipe()`。但我收到以下错误响应：

> 错误：找不到上传到服务器的文件。客户端发送的请求在语法上不正确（没有文件上传到服务器）。

此特定请求的 Wookie Server API 参考如下所示：

> POST {wookie}/widgets {file} - 向服务器添加一个小部件。该方法在响应中回显小部件元数据。

我的代码如下所示：

```
var http = require('http');
var fs = require('fs');
var file_name = 'test.wgt';

// auth data for access to the wookie server api
var username = 'java';
var password = 'java';
var auth = 'Basic ' + new Buffer(username + ':' + password).toString('base64');     

// boundary key for post request            
var boundaryKey = Math.random().toString(16);
var wookieResponse = "";

// take content length of the request body: see https://stackoverflow.com/questions/9943010/node-js-post-file-to-server
var body_before_file = 
      '--' + boundaryKey + '\r\n'
      + 'Content-Type: application/octet-stream\r\n' 
      + 'Content-Disposition: form-data; name="file"; filename="'+file_name+'"\r\n'
      + 'Content-Transfer-Encoding: binary\r\n\r\n';
var body_after_file = "--"+boundaryKey+"--\r\n\r\n";

fs.stat('./uploads/'+file_name, function(err, file_info) {
    console.log(Buffer.byteLength(body_before_file) +"+"+ file_info.size +"+"+ Buffer.byteLength(body_after_file));

    var content_length = Buffer.byteLength(body_before_file) + 
        file_info.size +
        Buffer.byteLength(body_after_file);

    // set content length and other values to the header
    var header = {
        'Authorization': auth,
        'Content-Length': String(content_length),
        'Accept': '*/*',
        'Content-Type': 'multipart/form-data; boundary="--'+boundaryKey+'"',//,
        'Accept-Encoding': 'gzip,deflate,sdch',
        'Accept-Charset': 'ISO-8859-2,utf-8;q=0.7,*;q=0.3'
    };
    // set request options
    var options = {
            host: appOptions.hostWP,
            port: 8080,
            path: '/wookie/widgets',
            method: 'POST',
            headers: header
    };

    // create http request
    var requ = http.request(options, function(res) {
        res.setEncoding('utf8');    
        res.on('data', function (chunk) {
            wookieResponse = wookieResponse + chunk;
        });
        res.on('end', function (chunk) {
            wookieResponse = wookieResponse + chunk;
            console.log(wookieResponse);
        })
    });

    // write body_before_file (see above) to the body request
    requ.write(body_before_file);

    // prepare createReadStream and pipe it to the request
    var fileStream = fs.createReadStream('./uploads/'+file_name);
    fileStream.pipe(requ, {end: false});

    // finish request with boundaryKey
    fileStream.on('end', function() {
        requ.end('--' + boundaryKey + '--\r\n\r\n');
    });

    requ.on('error', function(e) {
        console.log('problem with request: ' + e.message);
    });
}); 
```

我做错了什么，如何通过 node.js 的 POST 请求实现正确的 *.wgt/*.zip 文件上传？

干杯，迈克尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T19:19:49.697

我实现了所描述的目标：将带有 *.zip/*.wgt 文件的 node.js 的 POST 请求发送到另一台服务器。

我没有使用问题中介绍的方法来解决这个问题：使用请求模块逐步构建请求。我做了一些研究，发现了有趣的 node.js 模块：[form-data](http://github.com/felixge/node-form-data)。这个模块有什么作用？Readme.md 说：

> 创建可读的“多部分/表单数据”流的模块。可用于向其他 Web 应用程序提交表单和文件上传。

在列出的示例中，我发现了以下示例：

```
var CRLF = '\r\n';
var form = new FormData();

var options = {
  header: CRLF + '--' + form.getBoundary() + CRLF + 'X-Custom-Header: 123' + CRLF + CRLF,
  knownLength: 1
};

form.append('my_buffer', buffer, options);

form.submit('http://example.com/', function(err, res) {
  if (err) throw err;
  console.log('Done');
}); 
```

在上面的示例中，`FormData()`创建了一个对象，将数据附加到表单，然后提交表单。此外，还创建了一个自定义 hedear。

我将我提出的代码与上面给出的示例中的代码合并，得到了解决我的问题的代码：

```
var formData = require('form-data');
var fs = require('fs');

var CRLF = '\r\n';
var form = new FormData();

var options = {
    header: '--' + form.getBoundary() +
            CRLF + 'Content-Disposition: form-data; name="file";'+  
                    'filename="bubbles.wgt"'+
            CRLF + 'Content-Type: application/octet-stream' +
            CRLF + CRLF
    };

form.append('file',fs.readFileSync('./uploads/bubbles.wgt'),options);

form.submit({
        host: host,
        port: '8080',
        path: '/wookie/widgets',
        auth: 'java:java'
        }, function(err, res) {
            if (err) throw err;
            console.log('Done');
            console.log(res);
        }); 
```

我希望它对其他人有所帮助。

干杯，迈克尔

# xml - 如何在不循环 E4X 的情况下将属性添加到 XMLLIST

> ID：15050156
> 
> 赞同：4
> 
> 时间：2013-02-24T08:56:07.680
> 
> 标签：xml, actionscript-3, actionscript, flex4, xmllist

我有以下xml

```
var xml:XML = <test>
    <node id='1'/>
    <node id='2'/>
    <node id='3'/>
    <node id='4'/>
    <node id='5'/>
</test>;

var xmlist:XMLList = xml.children();

for each (var node:XML in xmlist) 
{
    node.@newAttribute = "1";
} 
```

我正在遍历每个节点并添加一个属性。如何在不循环的情况下做到这一点？我试过这个

```
xmlist.attributes().@newAttrib = "1"; 
```

但我收到错误“ **TypeError: Error #1089: Assignment to lists with more item is not supported** ”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-07T17:26:33.827

自从提出这个问题以来已经有 2 周了，但总会有更多的人需要帮助。

TypeError：错误 #1089 是由 xml 中多个对象的结果引起的。

通常我通过类似这样的操作来处理这个错误= xml.classes.(@id==1).students.(@no==2).@Grade="A"; 由于xml.classes中有多个学生而导致错误，因此它试图将所有学生都返回。正如错误所说：“不支持分配给包含多个项目的列表。” 您不能同时为多个对象赋值。

而且由于您将所有 s 添加到 XMLList 中，因此我不确定原因，因为我不使用 XMLList。我认为这是无用的。因此，如果您将代码更改为

```
var xml:XML = <test>
    <node id='1'/>
    <node id='2'/>
    <node id='3'/>
    <node id='4'/>
    <node id='5'/>
</test>;

for each (var n:XML in xml) 
{
    n.@newAttribute = "1";
} 
```

问题应该得到解决。但我建议您使用“id”作为唯一键。然后，您可以使用该唯一键来访问 XML 中的特定项目，例如

```
xml.node.(@id=="1").@newAttribute="1"; 
```

我希望这可以帮助你。小心

-奥赞

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T18:01:43.827

正如错误所说，它不受支持。由于您无法对多个元素执行此分配，因此我看不到在不迭代 xml 的情况下执行此操作的方法。

为了好玩，我尝试了这个并得到了同样的错误：`xml.node.@newAttribute=1`

它只是一个稍微简洁的版本：

```
var xmlist:XMLList = xml.children();
xmlist.attributes().@newAttrib = "1"; 
```

# jquery - Jquery，如果页面加载超过 15 秒，但仍未完成

> ID：15050166
> 
> 赞同：1
> 
> 时间：2013-02-24T08:57:54.243
> 
> 标签：jquery, load

它可以在 jquery 中执行此操作 .. 例如，如果用户访问我的网站并且他们的速度很慢，我希望他们出现一条消息，在哪里写点击这里查看迷你主题 .. 并且此消息仅在页面在 15 秒或更长时间内加载

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T09:15:56.983

在下面的链接中，您可以测试 Internet 的速度。

你也可以用 Fiddle 检查

检查：[如何在 Javascript 中检测互联网速度？](https://stackoverflow.com/questions/5529718/how-to-detect-internet-speed-in-javascript)

发现连接低后，然后显示弹出窗口。

# uwsgi - uWSGI 工作人员是非阻塞的吗？

> ID：15050174
> 
> 赞同：2
> 
> 时间：2013-02-24T08:59:07.093
> 
> 标签：uwsgi

我开始使用 uWSGI，我想知道它的工作人员是否是非阻塞/基于事件的（就像 nginx 一样）。

假设我已经像这样启动了 uWSGI：

```
uwsgi --http :8000 --wsgi-file test.py 
```

如果 worker 内部的进程正在等待 IO，它是否会暂停以支持另一个应用程序请求？还是它会阻止其他请求？

如果它确实阻塞了这个设置，是否有可能改变行为以实现更高的并发级别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T10:13:04.263

这取决于您如何配置它，以及您的应用程序如何运行。

您可能对该页面感兴趣，因为它阐明了近期的许多不良行为（例如由应用程序独立应用单个事件模型）：

[https://github.com/unbit/uwsgi-docs/blob/master/Async.rst](https://github.com/unbit/uwsgi-docs/blob/master/Async.rst)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-04T17:19:38.367

您可以在 python 中使用 Gevent 并在 uwsgi.ini 中配置 gevent 选项。

[http://uwsgi-docs.readthedocs.io/en/latest/Gevent.html](http://uwsgi-docs.readthedocs.io/en/latest/Gevent.html)

请记住不要将线程与 gevent (thread=0) 一起使用。

# java - JAVA：HTML 到 XHTML 转换器

> ID：15050179
> 
> 赞同：0
> 
> 时间：2013-02-24T08:59:31.410
> 
> 标签：java, html, xhtml, converter

我正在寻找一个有效的 HTML 到 Java 中的 XHTML 库。我已经尝试过 HTML Tidy，但它会导致此错误：

```
XML Parsing Error: mismatched tag. Expected: </meta>. 
```

你推荐更好的图书馆吗？

我感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T09:01:44.790

“准确”的结果是什么意思？html 不是有效的合法 xml，因此将其转换为 xml 显然会改变它。你试过[tagsoup](http://ccil.org/~cowan/XML/tagsoup/)吗？我以前用它来xml-ize html。

此外，您可能还想查看之前在此处提出的一些[类似](https://stackoverflow.com/questions/5183748/tagsoup-vs-jsoup-vs-html-parser-vs-hotsax-vs) [问题](https://stackoverflow.com/questions/3152138/what-are-the-pros-and-cons-of-the-leading-java-html-parsers/3154281#3154281)

# github - 将私人 github 存储库移至新帐户

> ID：15050182
> 
> 赞同：8
> 
> 时间：2013-02-24T08:59:42.633
> 
> 标签：github

我创建了一个新的 github 帐户，我想将一个私人仓库从旧帐户移动到我的新帐户，维护所有历史记录很重要。之后我想删除旧帐户中的回购。

例如

> 现有 github 帐户：**old-user**
> 帐户下的现有私有 repo old-user：**myrepo**
> 新 github 帐户：**new-user**

我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T09:46:08.610

首先，查看[GitHub 转移页面](https://help.github.com/articles/how-to-transfer-a-repository)：

在用户帐户之间转移

*   打开回购页面
*   从存储库操作栏中选择“设置” ![在此处输入图像描述](../Images/d3df56b0ec01bb39d11781f66b5bc674.png)
*   点击“转账”按钮 ![在此处输入图像描述](../Images/951ed1369fb349a24a541e2af10c1fac.png)

* * *

如果您在本地克隆了您的存储库，另一种选择是：

```
git push --mirror git@github.com:NewUsername/newProject.git 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T09:06:36.883

如果分叉 repo 对您不起作用（我认为您必须将新用户添加为合作者），您可以在计算机中克隆 repo，然后将其推送到新的新 repo-用户帐号。

最后，正如我一直建议的那样，如果您的问题仍未解决，请[联系 GitHub 支持团队](https://help.github.com/contact)，他们一定能够帮助您。

# asp.net-mvc - 使用共享名称在 ActionMethod 上动态注册自定义 ActionFilter

> ID：15050187
> 
> 赞同：1
> 
> 时间：2013-02-24T09:00:32.410
> 
> 标签：asp.net-mvc, action-filter, nopcommerce

我正在构建一个 NopCommerce 插件，并希望在与其他方法共享 ActionName 的 ActionMethod 上使用 FilterProvider 注册自定义 ActionFilter。

这是两个具有相同 ActionName 的 ActionMethods

```
[HttpPost, ActionName("Edit")]
[FormValueRequired("cancelorder")]      
public ActionResult CancelOrder(int id)
{...}

[HttpPost, ActionName("Edit")]
[FormValueRequired("captureorder")]      
public ActionResult CaptureOrder(int id)
{...} 
```

在我的过滤器提供程序中，我需要以某种方式将 CancelOrder 方法与 CaptureOrder 分开：

```
public class OrderFilterProvider : IFilterProvider
{
    private readonly IActionFilter _actionFilter;

    public OrderFilterProvider(IActionFilter actionFilter)
    {
        _actionFilter = actionFilter;
    }

    public IEnumerable<Filter> GetFilters(ControllerContext controllerContext, ActionDescriptor actionDescriptor)
    {       
        if (actionDescriptor.ControllerDescriptor.ControllerType == typeof(OrderController) &&
            actionDescriptor.ActionName.Equals("Edit"))
        {
            return new Filter[] 
            { 
                new Filter(_actionFilter, FilterScope.Action, null)
            };
        }

        return new Filter[] { };
    }
} 
```

使用此代码，过滤器在 CancelOrder 和 CaptureOrder 上都注册了，如何仅在 CancelOrder 方法上注册它？

我的想法是根据方法名称或 FormValueRequired 属性中的参数值将它们分开，但没有运气找到这样做的方法。

FormValueRequired 没有任何公共属性，如下所示：

```
public class FormValueRequiredAttribute : ActionMethodSelectorAttribute {
private readonly string[] _submitButtonNames;
private readonly FormValueRequirement _requirement;

public FormValueRequiredAttribute(params string[] submitButtonNames):
    this(FormValueRequirement.Equal, submitButtonNames)
{
}

public FormValueRequiredAttribute(FormValueRequirement requirement, params string[] submitButtonNames)
{
    //at least one submit button should be found
    this._submitButtonNames = submitButtonNames;
    this._requirement = requirement;
}
} 
```

这是我的调试器中的样子：[http ://www.tiikoni.com/tis/view/?id=4843369](http://www.tiikoni.com/tis/view/?id=4843369)

有没有办法获取方法的名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T09:17:40.143

我可以看到这两个动作之间的唯一区别是存在一些自定义`FormValueRequired`属性，不幸的是你没有显示也没有解释它的作用，但我猜它是一些动作选择器。无论如何，您可以检索此属性：

```
public IEnumerable<Filter> GetFilters(ControllerContext controllerContext, ActionDescriptor actionDescriptor)
{
    if (actionDescriptor.ControllerDescriptor.ControllerType == typeof(OrderController) &&
        actionDescriptor.ActionName.Equals("Edit"))
    {
        // Get the FormValueRequiredAttribute that was used to decorate the action
        var formValueRequiredAttribute = actionDescriptor
            .GetCustomAttributes(typeof(FormValueRequiredAttribute), false)
            .Cast<FormValueRequiredAttribute>()
            .FirstOrDefault();

        // if the action was decorated with this attribute we could read the
        // property that was passed to the constructor (hopefully it is exposed
        // as a public property)
        if (formValueRequiredAttribute != null && 
            formValueRequiredAttribute.SomeParameter == "captureorder")
        {
            // The CaptureOrder action was invoked
            return new Filter[] 
            { 
                new Filter(_actionFilter, FilterScope.Action, null)
            };
        }
    }

    return new Filter[] { };
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T16:51:23.280

FormValueRequired 属性实际上检查发布数据的“名称”。因此，如果您的 POST 表单有一个名称为“cancelorder”的名称-值对，则将执行 Action 方法。（有趣的是，FormValueRequired 检查名称-值对的“名称”，但不检查名称-值对的“值”）。

换句话说，保留您的 ActionFilter，并让两个 Action 触发 ActionFilter。但是在您实际的 ActionFilter 方法中，检查 POSTed 表单是否具有适当的名称，代码如下：

```
controllerContext.HttpContext.Request.Form["cancelorder"]; 
```

您可以在 OnXXX ActionFilter 方法参数中轻松获取 ControllerContext。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-17T13:53:46.390

需要注意的一件重要事情：即使 FormValueRequired 属性只检查发布数据的“名称”，您仍然需要为其提供一个值才能工作。

例如，这将不起作用：

```
<input type="submit" name="continueshopping" value="" class="continue-shopping-button" /> 
```

我想要一个没有文本值的按钮，所以我必须为值输入一个空格，如下所示：

```
<input type="submit" name="continueshopping" value=" " class="continue-shopping-button" /> 
```

# c - OPENSSL 如何存储和恢复密钥以加密和解密消息？

> ID：15050191
> 
> 赞同：2
> 
> 时间：2013-02-24T09:01:05.377
> 
> 标签：c, encryption, openssl

这就是我所知道的：

生成 RSA 公钥和私钥

```
RSA *pRSA      = NULL;
EVP_PKEY* pKey = NULL;
pRSA = RSA_generate_key(2048,RSA_3,gen_callback,NULL);
pKey = EVP_PKEY_new();
if(pRSA && pKey && EVP_PKEY_assign_RSA(pKey,pRSA))
{
    /* pKey owns pRSA from now */
    if(RSA_check_key(pRSA) <= 0)
    {
        fprintf(stderr,"RSA_check_key failed.\n");
        EVP_PKEY_free(pKey);
        pKey = NULL;
    }
} 
```

将密钥（EVP_KEY）转换为无符号字符，以便我可以存储到文件中。

注意：我确实知道如何写入和读取 PEM 文件，但是我想以这样一种方式实现它，以便我可以出于许多其他原因将密钥保存到我自己的文件格式中。

```
//Convert to public key

int pkeyLen;
unsigned char *ucBuf, *uctempBuf;
pkeyLen = i2d_PublicKey(pKey, NULL);
ucBuf = (unsigned char *)malloc(pkeyLen+1);
uctempBuf = ucBuf;
i2d_PublicKey(pKey, &uctempBuf);

//Convert to Private Key

int pkeyLen2;
unsigned char *ucBuf2, *uctempBuf2;
pkeyLen2 = i2d_PrivateKey(pKey, NULL);
ucBuf2 = (unsigned char *)malloc(pkeyLen2+1);
uctempBuf2 = ucBuf2;
i2d_PrivateKey(pKey, &uctempBuf2); 
```

使用 RSA 加密消息

```
(encrypt_len2 = RSA_public_encrypt(strlen(msg),msg,(unsigned char*)encrypt2,pRSA, RSA_PKCS1_OAEP_PADDING) 
```

我确实知道如何使用以下方法将 unsigned char 转换回 EVP：d2i_PublicKey & d2i_PrivateKey

**然而，这是我不知道的，希望有人这样做：**

如何将我的 EVP_KEY（公共和私有）转换回 RSA 结构

（例如：使用 RSA_generate_key 后返回的 RSA *pRSA）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T16:29:46.393

终于找到了解决我的问题的方法。希望这能帮助那些和我面临同样问题的人。

```
char *ct = "This the clear text";
unsigned char *buf;   
unsigned char *buf2;
int lenss;
/* No error checking */
    buf =(unsigned char*) malloc(EVP_PKEY_size(rsaPubKey));
    buf2 =(unsigned char*) malloc(EVP_PKEY_size(rsaPubKey));

lenss = RSA_public_encrypt(strlen(ct)+1,(unsigned char*) ct, buf, rsaPubKey->pkey.rsa,RSA_PKCS1_PADDING);

if (lenss != EVP_PKEY_size(rsaPubKey))
{
    fprintf(stderr,"Error: ciphertext should match length of key\n");
    exit(1);
}

RSA_private_decrypt(lenss, buf, buf2, rsaPrivKey->pkey.rsa,RSA_PKCS1_PADDING);

printf("%s\n", buf2); 
```

通过 openssl 示例目录中的代码之一找到了我的解决方案。:)

# android - android中的ontouch：获取X和Y坐标并在该点上绘制圆

> ID：15050195
> 
> 赞同：2
> 
> 时间：2013-02-24T09:01:58.623
> 
> 标签：android, android-canvas, draw, ontouchlistener

![在此处输入图像描述](../Images/ddfc16df8588f52142b9a8ff7bcd3483.png)

在我在屏幕触摸屏上的应用程序中，我得到了坐标（xy），之后在那个位置我画了一个圆圈。但是当我在那个位置画一个圆圈时。它总是在左上角画一个圆圈某些 pt.s 上的图像角落。我不明白为什么会发生这种情况。请帮助我。

```
 public boolean onTouch(View v, MotionEvent event) {
            // TODO Auto-generated method stub

             if(event.getAction()==MotionEvent.ACTION_UP) {

               Log.d("position", event.getX() + "-" + event.getY());
                   System.out.println("bitmap......"+paths[0]+"draw...."+dd);
                    Paint paint = new Paint();
                    paint.setAntiAlias(true);

                   paint.setColor(getResources().getColor(R.color.Yellow)) ;
                   paint.setAlpha(opacity);

                         // create canvas to draw on the bitmap
                    Canvas canvas = new Canvas(mutbit);
                    canvas.drawCircle(event.getX(),event.getY(), 10, paint);

                    im.setAdjustViewBounds(true);
                    im.setImageBitmap(mutbit);
                    dd[1]=im.getDrawable();
                    Bitmap aa=mutbit.copy(Bitmap.Config.ARGB_4444,false);//mutbit=bb[tabCount].copy(Bitmap.Config.ARGB_4444, true);
                    bb[1]=aa;
                    return true;
                }
             return false;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T09:37:06.730

在 Action 上尝试这个画圈 `event.getAction()==MotionEvent.ACTION_UP`到`event.getAction() == MotionEvent.ACTION_DOWN`

# ios - 如何在 iOS 中实现 NSMutableArray 的深浅复制？

> ID：15050196
> 
> 赞同：0
> 
> 时间：2013-02-24T09:02:05.977
> 
> 标签：ios, shallow-copy, deep-copy

我正在尝试为 NSMutableArray 实现深浅复制，

```
self.oldArray =[[NSMutableArray alloc] initWithCapacity:0];
self.shallowCopy =[[NSMutableArray alloc] initWithCapacity:0];
self.deepCopy =[[NSMutableArray alloc] initWithCapacity:0];

//add object to old Array
[self.oldArray addObject:@"rooban"];
[self.oldArray addObject:@"radha"];
[self.oldArray addObject:@"jesus"];
[self.oldArray addObject:@"god"];

self.shallowCopy=[[NSMutableArray alloc] initWithArray:self.oldArray];
self.deepCopy=[[NSMutableArray alloc] initWithArray:self.oldArray copyItems:YES];

//deep copy
NSLog(@"Lenght of the Old Array before: %d",self.deepCopy.count);
[self.deepCopy removeObject:@"rooban"];
NSLog(@"Lenght of the Old Array After: %d",self.oldArray.count);

//shallow copy
NSLog(@"Lenght of the Old Array Before: %d",self.shallowCopy.count);
[self.shallowCopy removeObject:@"rooban"];
NSLog(@"Lenght of the Old Array After: %d",self.oldArray.count); 
```

这个程序的输出是，

深拷贝：
之前的旧数组的长度：4
之后的旧数组的长度：4

浅拷贝：
旧数组之前的长度：4
旧数组之后的长度：4

我不知道为什么浅拷贝删除没有反映到原始 NSMutableArray。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-13T12:41:10.900

可以这样理解。。

NSMutableArray *oldArray =[[NSMutableArray alloc] initWithCapacity:0]; NSMutableArray *shallowCopy; // =[NSMutableArray arrayWithCapacity:0]; NSMutableArray *deepCopy; // =[[NSMutableArray alloc] initWithCapacity:0];

```
//add object to old Array
[oldArray addObject:@"rooban"];
[oldArray addObject:@"radha"];
[oldArray addObject:@"jesus"];
[oldArray addObject:@"god"];

shallowCopy = oldArray;
deepCopy = [oldArray mutableCopy];

//deep copy
NSLog(@"Lenght of the Old Array before: %d",deepCopy.count);
[deepCopy removeObject:@"rooban"];
NSLog(@"Lenght of the Old Array After: %d",oldArray.count);

//shallow copy
NSLog(@"Lenght of the Old Array Before: %d",shallowCopy.count);
[shallowCopy removeObject:@"rooban"];
NSLog(@"Lenght of the Old Array After: %d",oldArray.count); 
```

输出是：

(-[ViewController viewDidLoad]) (ViewController.m:34) 之前的旧数组的长度：4 (-[ViewController viewDidLoad]) (ViewController.m:36) 之后的旧数组的长度：4 (-[ViewController viewDidLoad] ) (ViewController.m:39) 之前的旧数组的长度：4 (-[ViewController viewDidLoad]) (ViewController.m:41) 之后的旧数组的长度：3

浅拷贝和深拷贝的概念是：

如果 B 是 A 的浅拷贝，那么它就像 B = [A assign];

B 和 A 指向同一个内存位置

如果 B 是 A 的深拷贝，那么就像 B = [A copy];

B 和 A 指向不同的内存位置

B 内存大小与 A 相同

B 与 A 的内容相同

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T09:12:23.193

发生这种情况是因为`initWithArray:`没有进行浅拷贝。您将获得一个全新的数组，其中包含指向与另一个数组相同的对象的指针。

例如，如果您添加的对象是可变字符串，您可以更改其中一个，并且它在新旧数组中都可见，因为它们指向相同的可变字符串。

另一方面，创建的数组`initWithArray:copyItems:`不会受到上述更改的影响，因为它指向原始数组中的对象的副本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-24T08:56:31.150

如果 NSArray/NSDictionary 包含 JSON Serialisable 数据，则可以使用`NSJSONSerialization`.

只需`NSData`使用然后重新创建 JSON 对象，这将创建一个完整的全新副本，`NSArray`其中包含它们的新内存引用。`NSJSONSerialization``NSArray/NSDictionary`

但要确保 NSArray/NSDictionary 的对象及其子对象必须是 JSON 可序列化的。

```
NSData *aDataOfSource = [NSJSONSerialization dataWithJSONObject:oldCopy options:NSJSONWritingPrettyPrinted error:nil];
NSDictionary *aDictNewCopy = [NSJSONSerialization JSONObjectWithData:aDataOfSource options:NSJSONReadingMutableLeaves error:nil]; 
```

# matlab - 根据前两个值合并两个数组

> ID：15050197
> 
> 赞同：1
> 
> 时间：2013-02-24T09:02:10.537
> 
> 标签：matlab, matrix, merge, delaunay

我将简要解释代码背后的想法，然后深入研究我的问题。

我正在收集数据，其中前两列是长坐标和纬度坐标，第三列是 gps 信号强度。

我将有两个矩阵，每个矩阵对应不同的卫星。使用第一个矩阵的 x,y 坐标，我使用第二个矩阵的 TriScatteredInterp 函数对信号强度进行了插值（反之亦然）。我的想法是我将为各个位置创建可能的信号强度并获得某种超级德劳内三角测量。

到目前为止，我已经设法完成了所有这些工作。（感谢您在这一点上容忍我）。

我现在要做的是将两个矩阵（由插值数据组成）组合成一个矩阵。如果 long 和 lat 坐标相同，即第一列和第二列中的前两个值与另一个矩阵中的相同，我想将信号强度添加到行中，添加到第四列中。如果 lat 和 long 值不同，我希望在我的新矩阵中创建一个新行并添加数据。我已经编辑了问题并在问题的末尾附上了所需的答案。（-为清楚起见，编辑了本节）

我非常困惑，并希望您能提供任何帮助。我已经广泛搜索了有用的信息，但我很不幸。

由于我有很多问题，这是最复杂的，我不确定是否要发布所有问题。我决定只发布一个，如果有人让我知道提出更多问题的礼仪，我将不胜感激；我是新来的。

感谢您阅读我冗长的问题，我很抱歉我无法使其更简洁。

感谢您提供的任何帮助。山姆

```
x = [1, 3, 5, 2, 4, 5, 3, 1, 2, 3, 4, 5;                %I wanteed to make an array that kind of made sense
1, 1, 1, 2, 2, 3, 3, 3, 4, 5, 3, 4;                 %Using random values became kind of difficult
20, 40, 10, 50, 80, 60, 80, 40, 50, 50, 70, 20]';   

y = [0, 2, 4, 1, 2.5, 4, 2, 0, 1, 2, 3, 4;                 
2, 2, 2, 3, 4, 4, 4, 4, 5, 5, 4, 5;                 
10, 30, 20, 40, 70, 80, 90, 30, 60, 40, 80, 20]';

dt1 = DelaunayTri(x(:,1), x(:,2)); %This makes the dt for the x array
dt2 = DelaunayTri(y(:,1), y(:,2)); 

interp1 = TriScatteredInterp(x(:,1), x(:,2), x(:,3)); %I can use the dt to do this as below
interp2 = TriScatteredInterp(dt2, y(:,3));   %use the dt array here like so

newValuesforY = interp1(y(:,1), y(:,2)); %This line uses the interpretation function of the DT for x, to predict values at the y co-ords that I enter.
yNew = [y newSSforY];

newSSforX = interp2(x(:,1), x(:,2));
xNew = [x newSSforX];
xNew(:,[3,4])=xNew(:,[4,3]); %I swap these around for clarity

%I now wish to merge the two, as mentioned in the above post. 
```

* * *

我添加了我想要的答案：

```
0   2   10  NaN
0   4   30  NaN
1   1   NaN 20
1   3   40  40
1   5   60  NaN
2   2   30  50
2   4   90  50
2   5   40  NaN
2.5 4   70  57.5
3   1   NaN 40
3   3   52.5    80
3   4   80  65
3   5   30  50
4   2   20  80
4   3   50  70
4   4   80  46.66666667
4   5   20  NaN
5   1   NaN 10
5   3   NaN 60
5   4   NaN 20 
```

由此，我丢弃了经纬度相同的重复数据，然后将两个数组newSSforY和newSSforX合并为一个数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T19:48:22.510

所以我不是 100% 确定我理解了你的问题，特别是关于“沿着各个列附加信号强度，如果它们不同，我希望创建一个新行”的部分。

我写了一个小脚本，给定您提供的两个矩阵 x 和 y，它会输出以下矩阵：

```
1.00000    1.00000   20.00000    0.00000
3.00000    1.00000   40.00000    0.00000
5.00000    1.00000   10.00000    0.00000
2.00000    2.00000   50.00000   30.00000
4.00000    2.00000   80.00000   20.00000
5.00000    3.00000   60.00000    0.00000
3.00000    3.00000   80.00000    0.00000
1.00000    3.00000   40.00000   40.00000
2.00000    4.00000   50.00000   90.00000
3.00000    5.00000   50.00000    0.00000
4.00000    3.00000   70.00000    0.00000
5.00000    4.00000   20.00000    0.00000
0.00000    2.00000   10.00000    0.00000
2.50000    4.00000   70.00000    0.00000
4.00000    4.00000   80.00000    0.00000
0.00000    4.00000   30.00000    0.00000
1.00000    5.00000   60.00000    0.00000
2.00000    5.00000   40.00000    0.00000
3.00000    4.00000   80.00000    0.00000
4.00000    5.00000   20.00000    0.00000 
```

如果它看到它具有相同的 long,lang 坐标，它会将第二个值添加到第四列。如果它们不匹配，则将其保留为 0。我为该脚本工作做了一个假设：long,lang 坐标不能在矩阵中重复。这意味着矩阵 x 不能有两个坐标 1,5 和 1,5。我认为这是一个合理的假设。

如果附加意味着将信号强度加在一起，则可以轻松修改代码以实现此目的。至于您要解决的实际问题，我不知道您在做什么，但听起来很有趣。让我知道它是否有效！（代码输出一些警告，我认为忽略它们是安全的）。这是功能：

```
function temp=n_merge(A,B)
%Assumption 1:long, lang coordinates do not repeat within matrix A
%Assumption 2:long, lang coordinates do not repeat within matrix B

%Creating output matrix (over-allocating size)
temp=[A;zeros(size(B,1),3)];
temp=[temp zeros(size(temp,1),1)];

%Initializing variables for for-loop
counter=1;
sp=size(A,1);%starting point

for i=1:size(B,1)
b=sum(B(i,1:2)==A(:,1:2),2);                                             

if isempty(find(b==2))%if the long,lang coordinates are not in matrix A
temp(sp+counter,1:3)=B(i,1:3);
counter=counter+1;

else %if the long,lang coordinates are in matrix B
temp(find(b==2),4)=B(i,3);
end
end

%Removing all rows with 0's on them
temp(all(temp==0,2),:)=[]; 
```

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T20:01:42.693

好的，这就是它在 MATLAB 上的工作方式：

```
function temp=n_merge(A,B)
%Assumption 1:long, lang coordinates do not repeat within matrix A
%Assumption 2:long, lang coordinates do not repeat within matrix B

%Creating output matrix (over-allocating size)
temp=[A;zeros(size(B,1),3)];
temp=[temp zeros(size(temp,1),1)];

%Initializing variables for for-loop
counter=1;
sp=size(A,1);%starting point

for i=1:size(B,1)
for j=1:size(A,1)
b(j,:)=B(i,1:2)==A(j,1:2);
end
b=sum(b,2);

if isempty(find(b==2))%if the long,lang coordinates are not in matrix A
temp(sp+counter,1:3)=B(i,1:3);
counter=counter+1;

else %if the long,lang coordinates are in matrix B
temp(find(b==2),4)=B(i,3);
end
end

%Removing all rows with 0's on them
temp(all(temp==0,2),:)=[]; 
```

# jquery - 函数内部的jQuery超时

> ID：15050199
> 
> 赞同：0
> 
> 时间：2013-02-24T09:02:51.813
> 
> 标签：jquery, timeout

这是我的代码。我要做的是使用 jQuery 在我的页面上更新新闻。该代码按预期工作 - 每 5 秒从侧边栏中删除新闻并在其位置发布 2 个更新。我不能做的是让它在发布更新之前删除所有新闻。现在它会追加更新并同时开始淡出旧新闻。任何人都知道如何为此设置适当的超时？

```
function updateNews()
{

    $('.newsUpdate').load('news.html .news', function ()
    {
        $('.MainNews').fadeOut(); /* timeout should happen here! */
        var start = Math.floor(Math.random() * 4);
        var stop = start + 2;
        $(this).children('.news').slice(start, stop).css('display', 'none').attr('class', 'MainNews').insertAfter('.nav').fadeIn().children('span').remove();
        $(this).children('.news').remove();
    });
    setTimeout(updateNews, 5000);
}
updateNews(); 
```

HTML 非常简单：

```
<div class='sidebar'>
    <ul class='nav'>
        <li></li>
    </ul>
</div>
<article>main content of the site</article>
<div class='newsUpdate'>this created specially to upload news from news.html and manipulate them</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T10:03:56.447

使用淡出回调

```
function updateNews()
{

    $('.newsUpdate').load('news.html .news', function ()
    {
        $('.MainNews').fadeOut(1000,function(){
            //This code will be executed after the fadeOut
            var start = Math.floor(Math.random() * 4);
            var stop = start + 2;
            $(this).children('.news').slice(start, stop).css('display', 'none').attr('class', 'MainNews').insertAfter('.nav').fadeIn().children('span').remove();
            $(this).children('.news').remove();
        });
    });
    setTimeout(updateNews, 5000);
}

updateNews(); 
```

# mysql - 如何在mysql中恢复数据库？

> ID：15050203
> 
> 赞同：1
> 
> 时间：2013-02-24T09:03:36.367
> 
> 标签：mysql, database

我在办公室使用 sqlyog。但在我家我有mysql gui。现在如何从 sqlyog 备份数据库并将其还原为 mysql gui？请有任何想法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T09:06:56.353

为什么要把事情复杂化？

创建备份

`mysqldump -u <user> -p<password> <database> > backup.sql`

恢复

`mysql -u <user> -p<password> <database> < backup.sql`

# eclipse - 似乎缺少 GWT UiBinder 内容辅助

> ID：15050204
> 
> 赞同：1
> 
> 时间：2013-02-24T09:03:42.410
> 
> 标签：eclipse, gwt, uibinder, content-assist, google-plugin-eclipse

我对 GWT 和 UiBinder 开发并不陌生，但是自从我使用 Eclipse 以来已经有很长时间了（过去几个月我一直在使用 Intellij IDEA）。

我现在正试图在 Eclipse 4.2 下为 GWT 获得一个高效的工作环境，并努力为 GWT UiBinder（.ui.xml 文件）提供内容支持。

在我看来，唯一需要的是安装 Google Plugin for Eclipse，即：

![显示当前为 Eclipse 安装的 Google 插件的屏幕截图](../Images/fafc1823a0a2749b0f0532e87aa52507.png)

也可能在项目配置中启用了 GWT SDK，即。

我在这个项目上也有 Maven 和 Spring，不知道这是否可能是一些内容辅助冲突。

无论如何，我的问题是我没有在 ui.xml 文件中获得内容辅助。如果我引用一个不存在的类小部件，我会收到一个错误，但我没有自动完成，也没有在 XML 而不是在 JAVA 中声明 uiFields 的错误（但我确实收到了声明 UiFields 的错误在 Java 中而不是在 XML 中）。

知道可能出了什么问题吗？

PS：如果我打开一个 < 然后使用 CTRL+SPACE 来触发自动完成，我会收到“ *Content Assist not available at current location* ”错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-16T14:03:33.873

我遇到了类似的问题，这是因为我**错误**地配置了我的 Eclipse 设置的***默认设置* `XML Editor`**：当我**直接**使用***Open with -> UI-Binder Template Editor***打开文件时，它可以工作。

但我无法让它工作，因此它们不再正确自动关联（与使用特定编辑器打开所有 XML 相反，即[Eclipse 如何使 xml 文件始终在文本编辑器而不是 xml 编辑器中打开](https://stackoverflow.com/questions/6915849/eclipse-how-to-make-xml-file-always-be-opened-in-text-editor-rather-than-xml-edi)）。这可能是由于一些手动删除`Toad Eclipse Plugin`，并且它`DataAdapter Editor`想要打开 XML 文件，是默认设置，我将默认设置切换为`XML Editor`. 如果我想知道如何解决这个问题（使用*Preferences -> ...`Content Type`*或*... ->`File assocications`*中的设置没有帮助:-( )。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T12:08:09.920

我猜你没有设置 XML 模式验证器/DTD 验证器。右键单击您的项目-> 属性-> 验证它应该看起来像这样：

![在此处输入图像描述](../Images/d8e14b35b6b0a6de332afc214ad517e0.png)

# delphi - 迭代寻根算法的实现

> ID：15050206
> 
> 赞同：0
> 
> 时间：2013-02-24T09:03:58.377
> 
> 标签：delphi, math

我需要实现通过迭代方法找到具有指定精度的根的算法。该方法的主要思想是Cn=f(Cn-1)；C0=(A+B)/2；其中 a,b 区间的边界包括根。我写了这段代码（在Delphi7中）

```
program iter;

{$APPTYPE CONSOLE}

uses
  SysUtils,Math;

function GetCn(Cn1:Double):Double;
begin
   Result:=Cn1+sin(1/Cn1);
end;

var
  a,b:Double;
  Cn,Cn1:Double;
  eps,eps1:Double;

begin
  a:=1.2;b:=2; 
  Cn:=(a+b)/2;
  Write('Input precision ');Readln(eps);
  eps1:=Abs(Cn-Cn1);
  While eps1>eps do
  begin
    Cn1:=Cn;
    Cn:=GetCn(Cn);
    eps1:=Abs(Cn-Cn1);
  end;
  Writeln(Cn);
  Readln;
end. 
```

测试数据中f(x)=x-2+sin(1/x)；a:=1.2 b:=2.0 eps:=0.001 我的程序给出答案 1.00000143538244E+0003，但在一组问题中是答案 1,3077

为什么会这样？我在哪里出错？如何纠正？

PS对不起我的英语

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T09:32:13.600

您的算法不是根查找器。回顾一下，您的递归步骤是

C [n] = f(C [n-1] )

[并且当 C n]等于 C [n-1]直到公差时您终止。

该算法可能会找到固定点，但不会找到根。要找到根，您需要牛顿法、二分法、割线法等。

即使作为定点查找器，您的代码也已损坏。代码第一次执行终止测试时，它会`Cn1`在初始化之前读取 的值。

* * *

在评论中，您告诉我们您提出了错误的问题，并且您正在尝试找到固定点。在这种情况下，您只需要修改代码以避免在初始化之前读取变量：

```
begin
  a:=1.2;b:=2; 
  Cn:=(a+b)/2;
  Write('Input precision ');Readln(eps);
  repeat
    Cn1:=Cn;
    Cn:=GetCn(Cn);
    eps1:=Abs(Cn-Cn1);
  until eps1<=eps;
  Writeln(Cn);
  Readln;
end. 
```

此外，您的代码中的函数与问题中的函数不匹配。我不知道哪一个是对的。

# autofac - Autofac范围生命周期问题

> ID：15050207
> 
> 赞同：5
> 
> 时间：2013-02-24T09:04:14.967
> 
> 标签：autofac

我有 ASP.NET MVC 应用程序，我在其中注册了一个具有`InstancePerHttpRequest`范围的组件。

```
builder.RegisterType<Adapter>().As<IAdapter>().InstancePerHttpRequest(); 
```

然后我有一段异步代码，我正在解析适配器组件。

以下代码被简化

```
Task<HttpResponseMessage> t = Request.Content.ReadAsMultipartAsync(provider).ContinueWith(t =>

      // IHandleCommand<T> takes an IAdapter as contructor argument
      var h = DependencyResolver.Current.GetServices<IHandleCommand<T>>();
); 
```

上面的代码抛出异常：`The request lifetime scope cannot be created because the HttpContext is not available.`

所以我对这个主题做了一些研究，发现了这个答案 [https://stackoverflow.com/a/8663021/1003222](https://stackoverflow.com/a/8663021/1003222)

然后我将解析代码调整为此

```
 using (var c= AutofacDependencyResolver.Current.ApplicationContainer.BeginLifetimeScope(x => x.RegisterType<DataAccessAdapter>().As<IDataAccessAdapter>).InstancePerLifetimeScope()))
 {
       var h = DependencyResolver.Current.GetServices<IHandleCommand<T>>();
 } 
```

但异常保持不变。`The request lifetime scope cannot be created because the HttpContext is not available.`

我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-16T00:38:16.580

你可以尝试这样的事情：

```
using (var c= AutofacDependencyResolver.Current
                                       .ApplicationContainer
                                       .BeginLifetimeScope("AutofacWebRequest"))
{
   var h = DependencyResolver.Current.GetServices<IHandleCommand<T>>();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-14T01:06:52.873

Autofac 尝试从 MVC Dependency Resolver 解析容器，如果您有异步操作，则 httpContext 将不可用，因此 DependencyResolver 也将不可用。

一种选择是使容器在静态变量或适当的实例中可用，并为此操作创建上下文范围。

```
public static IContainer Container 
```

完成构建器设置后，复制容器

```
public class ContainerConfig
{
    public static IContainer Container;
    public static void RegisterComponents()
    {
        var builder = new ContainerBuilder();
        builder.RegisterInstance(new Svc()).As<ISvc>();
        Container = builder.Build();
        DependencyResolver.SetResolver(new AutofacDependencyResolver(Container ));
    }
} 
```

然后在解决时使用静态容器配置来创建您需要的实例。

```
using (var scope = ContainerConfig.Container.BeginLifetimeScope())
{
       result = ContainerConfig.Container.Resolve<T>();
} 
```

希望能帮助到你

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-23T12:25:54.387

如果您无权访问 System.Web.Http，则不能使用 DependencyResolver.Current。您需要存储您的容器并从中解决依赖关系：

```
//On Startup Class
public static IContainer Container { get; private set; }

public void Configuration(IAppBuilder app)
{
   ...
   var builder = new ContainerBuilder();
   builder.RegisterModule([yourmodules]);
   ...
   var container = builder.Build();
   Container = container;
} 
```

然后，当您需要您的实例时：

```
using (var scope = Container.BeginLifetimeScope())
{                                
   YourInterfaceImpl client = Container.Resolve<YourInterface>();
   ...
} 
```

希望这有帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-13T15:19:30.043

在我的例子中，我在 WebAPI 启动时实例化所有类型，以尽早发现任何故障。那时，没有请求，所以注册了一个类型，因为`InstancePerRequest`我收到了这个错误：

> 从请求实例的范围中看不到带有与“AutofacWebRequest”匹配的标记的范围。`

根据@KozhevnikovDmitry 的回答，这就是我的工作方式：

```
using (var scope = container.BeginLifetimeScope("AutofacWebRequest"))
{
    foreach (Service item in container.ComponentRegistry.Registrations.SelectMany(x => x.Services))
    {
        Type type = item is TypedService ts ? ts.ServiceType
                  : item is KeyedService ks ? ks.ServiceType
                  : throw new Exception($"Unknown type `{item.Description}`");
        try
        {
            scope.Resolve(type);
        }
        catch (Exception ex)
        {
            _log.Debug($"Error instantiating type `{type.FullName}`", ex);
            throw;
        }
    }
} 
```

# oop - 显示列表：集合与数组

> ID：15050208
> 
> 赞同：2
> 
> 时间：2013-02-24T09:04:30.707
> 
> 标签：oop, design-patterns, datamapper

在我的 PHP MVC 应用程序中，我有三个主要实体：组织、员工和角色。每个组织都有很多员工，每个员工都有一个角色。

对于给定的组织，我想显示员工列表。对于每个员工，我将显示姓名、地址详细信息和角色名称。

现在，据我所知，最有效的方法是让我的服务层将员工列表作为数组返回，其中每个元素都是数据字段数组（不是对象）。在映射器中，我将角色表连接到员工表，因此正确的角色名称将在初始结果集中，并且无需再次查询数据库。

另一种方法是让我的服务层返回 Employee 对象的集合。但是，在这种情况下，每个 Employee 对象都需要查询数据库以找到其角色的正确名称（假设角色是延迟加载的）。这将是非常低效的，但不知何故似乎更“面向对象”。

每当实例化 Employee 时，我可以考虑将角色名称加载为 Employee 的属性，但是我仍然需要保留对唯一角色 ID 的引用，因此我立即有同步考虑。

解决这个问题的典型方法是什么？？？我相信它已经解决了数百万次！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T02:47:12.310

的确，这东西很标准。但我仍然与它斗争。

我的第一个想法是设置类似：

```
class Employee 
{
    protected $name; //etc

    /**
     * @var Organization
     */
    protected $organization;

    /**
     * @var Role
     */
    protected $role;

    // And then getters/setters for Role and Organization
} 
```

然后一个 EmployeeMapper 类似：

```
class EmployeeMapper
{
    /**
     * @Var DB
     */
    protectd $db;

    public function __construct(DB $db)
    {
        $this->db = $db
    }

    public function getEmployeesByOrganization($orgId)
    {
        // query here that joins employees, roles, and organizations
    }
} 
```

这让我觉得很干净，代表了你描述的结构。

但是这样做的问题是，当 EmployeeMapper 必须构造 Employee 对象时，他需要知道连接的查询结果中的角色字段和组织字段如何映射到角色和组织对象中的字段。对我来说，这些知识应该严格地存在于 RoleMapper 和 OrganizationMapper 中。因此，也许这些映射器需要将此映射功能作为公共方法提供，我们需要有一种方法将 RoleMapper 和 OrganizationMapper 实例注入到 EmployeeMapper 中以供使用。有关基于 ZF 的示例，请参阅[生存深渊](http://www.survivethedeepend.com/zendframeworkbook/en/1.0/implementing.the.domain.model.entries.and.authors#zfbook.implementing.the.domain.model.entries.and.authors.implementation.lazy.loading.domain.objects)。

此外，似乎有时 - 如您提供的“查看员工列表”示例中 - 您希望获得有关这些附加角色和组织实体的信息。在这种情况下，加入和构建对象图的开销是合理的，并且（肯定比为角色和组织进行单独的循环查询更好）。但在其他情况下，您实际上只需要单个员工的一些简单员工信息，例如他的姓名或电话号码。在后一种情况下，为什么会产生加入和构建完整对象图的开销？

这些问题有一些架构解决方案，通常使用代理对象（代表角色和组织对象并在需要时延迟加载它们）和自定义存储库对象（您想要强制连接的地方）。

但我发现自己设计这一切是一件痛苦的事。最后，我发现像[Doctrine](http://www.doctrine-project.org/projects/orm.html)这样的 ORM已经解决了所有问题，并为我提供了上述功能（代理、自定义存储库等）。

# android - 无法在 android 中播放从 LocalSocket 接收的视频

> ID：15050213
> 
> 赞同：1
> 
> 时间：2013-02-24T09:05:05.770
> 
> 标签：android, sockets, video, android-mediarecorder

我正在尝试使用 MediaRecorder 仅录制视频（H264/3gpp），并将 LocalSocket 描述符传递给 MediaRecorder。我可以接收数据但无法播放视频。相同的代码适用于音频（AMR）。

**LocalSocket 类**

```
public class MediaStreamer extends MediaRecorder{

    private static int id = 0;

    private LocalServerSocket lss = null;
    private LocalSocket receiver, sender = null;

    public void prepare() throws IllegalStateException,IOException {

        receiver = new LocalSocket();
        try {
            lss = new LocalServerSocket("librtp-"+id);
            receiver.connect(new LocalSocketAddress("librtp-"+id));
            receiver.setReceiveBufferSize(4096);
            receiver.setSendBufferSize(4096);
            sender = lss.accept();
            sender.setReceiveBufferSize(4096);
            sender.setSendBufferSize(4096); 
            id++;
        } catch (IOException e1) {
            throw new IOException("Can't create local socket !");
        }

        setOutputFile(sender.getFileDescriptor());

        try {
            super.prepare();
        } catch (IllegalStateException e) {
            closeSockets();
            throw e;
        } catch (IOException e) {
            closeSockets();
            throw e;
        }

    }

    public InputStream getInputStream() {

        InputStream out = null;

        try {
            out = receiver.getInputStream();
        } catch (IOException e) {
        }

        return out;

    }

    public void stop() {
        closeSockets();
        super.stop();
    }

    private void closeSockets() {
        if (lss!=null) {
            try {
                lss.close();
                sender.close();
                receiver.close();
            }
            catch (IOException e) {

            }
            lss = null; sender = null; receiver = null;
        }
    }
} 
```

**媒体记录器**

```
video = new MediaStreamer();
video.reset();

video.setVideoSource(MediaRecorder.VideoSource.DEFAULT);
video.setPreviewDisplay(holder.getSurface());
video.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
video.setVideoFrameRate(VideoConstants.frameRate);
video.setVideoEncodingBitRate(VideoConstants.bitRate*1000);
video.setVideoSize(VideoConstants.resolationX, VideoConstants.resolationY);
video.setVideoEncoder(MediaRecorder.VideoEncoder.H264);

try {
   video.prepare();
   videoWriter = new Writer(Environment.getExternalStorageDirectory()+"/video.mp4",video.getInputStream());
        } catch (IOException e) {
            e.printStackTrace();
        }
video.start();
videoWriter.startWriting(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-09T06:05:52.307

您需要删除 MPEG4 格式的标头。来自 localscoket 的输入流包含 MPEG4 标头，需要将其删除才能访问视频。

检查 Spydroid，它做类似的事情

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-10T12:00:45.677

您可以使用此示例删除 MP4 标头：

```
InputStream reader = video.getInputStream();
byte buffer[] = new byte[4];
while (!Thread.interrupted()) {
   while (reader.read() != 'm');
      reader.read(buffer,0,3);
      if (buffer[0] == 'd' && buffer[1] == 'a' && buffer[2] == 't') break;
} 
```

我在 lib [libstreaming](https://github.com/fyhertz/libstreaming) (VideoStream.java) 中看到了这段代码。与 Spydroid 中使用的库相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-30T05:10:28.560

这个问题有点老了，但我目前正在这方面做一些工作，所以我想我会尝试添加一个答案，这可能会帮助那些以这种方式绊倒的人。

这里的根本问题是 3GPP（如 MP4）不是实时的、可流式传输的格式，因此即使通过套接字捕获数据，通常在音频或视频捕获结束时写入的关键文件头也会丢失（因为套接字不像本地文件那样是可搜索的） - 因此是不可播放的数据。

AMR 没有此文件头限制，这就是为什么 OP 的录音可以与上面的代码一起正常工作的原因。

没有简单的方法可以对数据进行后处理以手动添加文件头。所以解决方案是：

1.  不要使用 3GPP 或 MP4 作为录制格式
2.  编写一个类似于[Spydroid 项目中使用的打包器](https://code.google.com/p/spydroid-ipcamera/)

希望这可以帮助。

# modelica - 如何从算法部分提取值？

> ID：15050214
> 
> 赞同：-1
> 
> 时间：2013-02-24T09:05:32.690
> 
> 标签：modelica, openmodelica

我正在使用与代数方程混合的抛物线 PDE，并且所有这些方程都是耦合的。我在 OM(1.9.1)("residualFcn[some number]") 中使用了欧拉方法（Dassl 太慢）和大容差（用于快速模拟）和接收错误（两种类型）。问题是求解器不能t 求解非线性系统（数学上，系统是正确的）。第一个问题是什么类型的方法在 OM 中使用欧拉积分法（显式或隐式或 Crank-Nicholson ......或......）？所以我试图用数字解决它（显式欧拉方法（在“new [N]”下面的代码中）（也许问题可能是CFL条件。），但我有问题（特定采样时间的样本重建）。所以，第二个问题是指重现特定采样时间的值？！在下面的代码中有数组“a [3]”。想法是针对每个“

还有一件事，如果 delta(t)/(delta(x))^2 >= 0.5 (delta(t) 定义用户，并指代方程部分，则 delta(x) 如下面的代码所示，并使用空间离散化在方程部分（经典前馈方法）），是否满足数值稳定性？同样的例子，但算法部分？问候

这是代码：

```
model Euler1D
import Modelica.Utilities.*;
parameter Integer N=10; //50
parameter Real Lp=1e-6;
parameter Real deltax=1/(N-1)*Lp;
Real a[3];
Real old[N];
Real new[N];
Real b;
equation 
a[1]=if 
   (time>5) then 0 else time+5;
a[2]=time;
a[3]=2;
when 
(sample(0,1)) then
d=b;
end when;
algorithm 
// IN t=ts;
 when (sample(0,1)) then
 for i in 1:2 loop
  b:=a[i];
 Streams.print(String(time)+"   "+String(a[i])+ "     "+String(b), "C:/Some_Path/text.txt");
end for;
end when;

// Another problem
old[1]:=10;
old [N]:=0;
new[1]:=10;
new [N]:=0;
// Boundary
for i in 2:N-1 loop
old [i]:=10;
new[i]:=10;
end for;

for dx in deltax:deltax:Lp-deltax loop  // spatial discretization

for i in 2:N-1 loop
(new[i]):=(old[i]+0.5*(old[i + 1] +old[i-1]- 2*old[i]));
//def:=def+abs(new[i]-old[i]);
end for;
 for i in 2:N-1 loop
 old[i]:=new[i]; // switch the values
 end for;

 for i in 1:N loop
 Streams.print(String(time)+"   "+ String(new[2]), "C:/Some_Path/Anel_Nodes.txt");
 end for;

 annotation (uses(Modelica(version="3.2")));
 end Euler1D; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T15:16:05.860

鉴于您的评论，这就是我构建模型的方式：

```
model Euler1D 
  parameter Integer N=10 "Spatial discretization";
  parameter Modelica.SIunits.Length L=1;
protected 
  parameter Modelica.SIunits.Length dx=L/(N-1) "Segment size";
  Real c[N] "Solution variable c";
  Real J[N] "Solution variable J";
  Real dc_dx "Spatial derivative at x==L";
  Real d2c_dx2[N] "Second spatial derivative of c";
initial equation 
  der(c[2:N-1]) = zeros(N-2);
equation 
  // Equations for spatial derivatives
  d2c_dx2[2:N-1] = { (c[i+1]-2*c[i]+c[i-1])/(dx^2) for i in 2:N-1};
  dc_dx = (c[N]-c[N-1])/dx;

  // Boundary conditions
  c[1] = 0 "Dirichlet B.C.";
  dc_dx = 1 "Neumann B.C.";

  // PDE
  J = c .* c "J = c^2";
  der(c) = d2c_dx2+J "PDE";
end Euler1D; 
```

初始方程避免了模拟开始时的大瞬态。如此有效，我提出的模型将为您提供稳态解决方案。但是您可以使事情随时间变化（例如边界条件）。

这仍然可能存在一些错误，但我很难说，因为我对这个系统没有太多的直觉，而且我也不知道我使用的值是否在物理上有意义。

但希望它概述了如何构建这样一个模型。该模型在 Dymola 中运行。我没有在 OpenModelica 中尝试过。

话虽如此，你总是用 PDE 来解决这个问题，即存在时间积分方案无法明确看到的物理产生的隐式约束（例如 CFL 条件）。一般来说，可变时间步长算法具有误差估计，它们可以间接看到违反这些隐式约束所引入的不稳定性。但他们必须“摸索”通过它们。我不确定上述模型在多大程度上会出现问题。

如果你想给你的解增加一点刺激，你可以改变方程

```
 dc_dx = 1 "Neumann B.C."; 
```

...至...

```
 dc_dx = 0.7+0.2*sin(time) "Neumann B.C."; 
```

...你会得到一个很好的时变解决方案。我注意到，在玩这个的时候，如果你把末端的梯度设置得太陡，模型就会变得不稳定。由于我上面提到的问题，这是对基础数学方程的真正解决方案还是数值伪影，我不知道。因此，如果您想要一个稳定的解决方案，您可以在此模型中添加的内容是有限的。

# javascript - 如何在chrome中查看javascript for in循环的每一步？

> ID：15050216
> 
> 赞同：0
> 
> 时间：2013-02-24T09:05:53.507
> 
> 标签：javascript, google-chrome, for-in-loop

我在 chrome 中发现，看不到 for in 循环的每一步。例如，使用 chrome 或 chrome canary 的调试器，在行中设置断点

```
for (var i in stuff) 
```

下面的代码，当暂停时，点击 step into 直到该行

```
return n; 
```

你可以看到for in循环会完成一次。我想看看for in循环的整个过程。所以问题是：如何在chrome中查看javascript for in循环的每一步？

```
function objectPlus(o, stuff) {
    var n;
    function F() {}
    F.prototype = o;
    n = new F();
    n.uber = o;

    for (var i in stuff) {
        // I found in debuger, for in loop will finish in one step into,so you can't see the process of every property copy
        n[i] = stuff[i];
    }

    return n;
}

var shape = {
    name: 'shape',
    toString: function() {
        return this.name;
    }
};

var twoDee = objectPlus(shape, {
    name: '2D shape',
    toString: function() {
        return this.uber.toString() + ', ' + this.name;
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T09:09:46.607

点击Sources，就会显示JS。

点击目标js文件

在左侧 - 行号将出现

单击您想要断点/暂停的行号

功能键 --> F11 - 如果你想查看输出，在你的 for 循环中放置一个 console.log --> console.log(n[i])

# magento - Magento 文件 var-session 保存在不同的地方

> ID：15050221
> 
> 赞同：1
> 
> 时间：2013-02-24T09:06:44.370
> 
> 标签：magento, session, var

var-session 在文件系统或数据库中应该是安全的。我的问题是：在哪里可以改变地方？我会将它保存在文件系统中而不是数据库中。一个 cronjob 应该在一个月后将其删除。不幸的是，我找不到更改保存选项的地方。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T11:58:02.677

这不能通过 Magento 管理面板进行配置。虽然您可以更改代码以更改位置，但首选方法是使 /MAGENTO_ROOT/var/session 目录成为指向您喜欢的文件系统中的位置的符号链接。

# twitter-bootstrap - Twitter Bootstrap 切换按钮，页面中的第一个工作正常，第二个不工作

> ID：15050222
> 
> 赞同：1
> 
> 时间：2013-02-24T09:06:47.170
> 
> 标签：twitter-bootstrap

我在 twitter bootstrap 中设置了一个页面，我有两个区域，底部有一个 twitter bootstrap“折叠/切换按钮”，用于显示/隐藏附加信息。页面上的第一个似乎工作正常，但第二个（除了标识类之外在所有方面都相同）不起作用。

twitter bootstrap 是否允许在同一页面上出现多个“折叠效果”，如果允许，为什么我编写的代码不起作用？

我在下面附上了我的html代码并设置了问题的[jsfiddle](http://jsfiddle.net/rLygr/)

```
<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
<meta charset="utf-8">
<title>JORDAN</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="description" content="">
<meta name="author" content="Justin Brown">

<!-- Le styles -->
<link href="assets/css/bootstrap.css" rel="stylesheet">
<link href="assets/css/bootstrap-responsive.css" rel="stylesheet">
<link href="assets/css/style.css" rel="stylesheet">
<link href="assets/js/google-code-prettify/prettify.css" rel="stylesheet">

<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
<!--[if lt IE 9]>
<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<!-- Le fav and touch icons -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="assets/ico/apple- 
touch-icon-144-precomposed.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="assets/ico/apple-
touch-icon-114-precomposed.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="assets/ico/apple-touch-
icon-72-precomposed.png">
<link rel="apple-touch-icon-precomposed" href="assets/ico/apple-touch-icon-57-
precomposed.png">
<link rel="shortcut icon" href="assets/ico/favicon.png">

</head>
<body data-target=".bs-docs-sidebar" class="tourspage">

<div class="wrap">
<!-- Navbar
================================================== -->
<div class="navbar">
<div class="container">
<div class="navbar-inner">

    <button type="button" class="btn btn-navbar" data-toggle="collapse" data-
target=".nav-collapse">
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
    </button>
    <a class="brand" href="#" title="JORDAN"><img src="assets/img/logo.gif" 
alt="JORDAN" /></a>

    <div class="nav-collapse collapse">
    <ul class="nav">
    <li class="active"><a href="#">Home</a></li>
    <li><a href="#">About Jordon</a></li>
    <li><a href="#">Places</a></li>
    <li><a href="#">Tours</a></li>      
    <li><a href="#">Blog</a></li>
    <li><a href="#">About Us</a></li>
    </ul>
    </div>

</div>
</div>
</div><!-- navbar -->

<div class="container">

    <div class="toursinfo">
        <h1>Tours</h1>
        <article class="nodivider">
        <p>These are some of our most popular tours with details, prices, 
and itineraries. You can sign up for a tour right from here, or you can create a custom 
version of the tour from our Custom Tour page.</p>

        <!-- start the tours block -->
        <aside>
        <p>
        <span class="left">View from a Jeep </span>
        <span class="right">(3 days, 2 nights)</span>
        </p>

        <p>
        <span class="left">Price per Person </span>
        <span class="right">$1350</span>
        </p>

        <p>
        <span class="left">Activities</span>
        <span class="right">
        <a href="#">Jeeping</a>   
        <a href="#">Camping</a>  
        <a href="#">History</a></span>
        </p>

        <p>
        <span class="left">Places</span>
        <span class="right">
        <a href="#">Wadi Mujib</a>   
        <a href="#">Petra</a>   
        <a href="#">Little Petra</a>   
        <a href="#">Dead Sea</a>   
        <a href="#">Wadi Dona</a>   
        <a href="#">Wadi Feinan</a>   
        <a href="#">Old Humeiah</a></span>
        </p>
        </aside>

        <figure><img src="assets/img/photo15.jpg" alt="PHOTO"></figure>

        <p><span class="bold">Description</span> <br /> Bertase deleoa 
dipisg elitve sibulum cude enoserta dendrit maurportade usceita varere meroserta 
kertasera miatoque penatib
        emagnis keras. Lorem ipsum dolor sit amet conse ctetur adipisicing 
elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad 
minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo 
consequat.
        Duis qute irure dolor.  </p>

        <a href="#" class="btn-hide" data-toggle="collapse" data-
target=".details">Details</a>

        <a href="#" class="btn-booknow">Book Now!</a>

        <div class="details collapse">
        <div class="daysinfo nodivider">
        <h3><span>DAY 1</span></h3>
        <div class="info">
        <p>Bertase deleoa dipisg elitve sibulum cude enoserta dendrit 
maurportade usceita varere meroserta kertasera miatoque penatib emagnis keras. Lorem 
ipsum dolor sit amet conse ctetur adipisicing elit, sed do eiusmod tempor incididunt ut 
labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation 
ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis qute irure dolor.</p>
        <p><span><span class="orange">Meals:</span> Breakfast, Dinner, 
Snacks.</span>  <span><span class="orange">Hotel:</span> Al Arrabiys Hotel.</span>
        <span><span class="orange">Travel Time:</span> Approx 2 Hours.
</span> </p>
        </div>
        </div>

        <div class="daysinfo">
        <h3><span>DAY 2</span></h3>
        <div class="info">
        <p>Bertase deleoa dipisg elitve sibulum cude enoserta dendrit 
maurportade usceita varere meroserta kertasera miatoque penatib emagnis keras. Lorem 
ipsum dolor sit amet conse ctetur adipisicing elit, sed do eiusmod tempor incididunt ut 
labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation 
ullamco laboris nisi 
ut aliquip ex ea commodo consequat. Duis qute irure dolor.</p>
        <p><span><span class="orange">Meals:</span> Breakfast, Dinner, 
Snacks.</span>  <span><span class="orange">Hotel:</span> Al Arrabiys Hotel.</span>
        <span><span class="orange">Travel Time:</span> Approx 2 Hours.
</span> </p>
        </div>
        </div>

        <div class="daysinfo">
        <h3><span>DAY 3</span></h3>
        <div class="info">
        <p>Bertase deleoa dipisg elitve sibulum cude enoserta dendrit   
maurportade usceita varere meroserta kertasera miatoque penatib emagnis keras. Lorem 
ipsum dolor sit amet conse ctetur adipisicing elit, sed do eiusmod tempor incididunt ut 
labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation 
ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis qute irure dolor.</p>
        <p><span><span class="orange">Meals:</span> Breakfast, Dinner, 
Snacks.</span>  <span><span class="orange">Hotel:</span> Al Arrabiys Hotel.</span>
        <span><span class="orange">Travel Time:</span> Approx 2 Hours.
</span> </p>
        </div>
        </div>
        </div>
        </article>
        <!-- end tour block -->

    </div><!-- toursinfo -->

</div><!-- container -->

<div id="push"></div>
</div><!-- end wrap -->
<!-- Footer
================================================== -->
<div class="bgfooter">
<footer>

    <div class="container">
    <p>&copy; 2013</p>
    <p class="right">
    <a href="#">Sitemap</a>        
    <a href="#">FAQ</a>        
    <a href="#">Contact Us</a>
    </p>
    </div>

</footer>
</div><!-- footer -->

<!-- Le javascript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
<script src="assets/js/jquery.js"></script>
<script src="assets/js/bootstrap-transition.js"></script>
<script src="assets/js/bootstrap-alert.js"></script>
<script src="assets/js/bootstrap-modal.js"></script>
<script src="assets/js/bootstrap-dropdown.js"></script>
<script src="assets/js/bootstrap-scrollspy.js"></script>
<script src="assets/js/bootstrap-tab.js"></script>
<script src="assets/js/bootstrap-tooltip.js"></script>
<script src="assets/js/bootstrap-popover.js"></script>
<script src="assets/js/bootstrap-button.js"></script>
<script src="assets/js/bootstrap-collapse.js"></script>
<script src="assets/js/bootstrap-carousel.js"></script>
<script src="assets/js/bootstrap-typeahead.js"></script>
<script src="assets/js/bootstrap-affix.js"></script>
<script src="assets/js/holder/holder.js"></script>
<script src="assets/js/google-code-prettify/prettify.js"></script>
<script src="assets/js/application.js"></script>

</body>
</html> 
```

编辑：根据用户@Shail 的要求，我只附上了代码的手风琴部分：

```
 <!-- start the tours block -->
        <aside>
        <p>
        <span class="left">View from a Jeep </span>
        <span class="right">(3 days, 2 nights)</span>
        </p>

        <p>
        <span class="left">Price per Person </span>
        <span class="right">$1350</span>
        </p>

        <p>
        <span class="left">Activities</span>
        <span class="right">
        <a href="#">Jeeping</a>   
        <a href="#">Camping</a>  
        <a href="#">History</a></span>
        </p>

        <p>
        <span class="left">Places</span>
        <span class="right">
        <a href="#">Wadi Mujib</a>   
        <a href="#">Petra</a>   
        <a href="#">Little Petra</a>   
        <a href="#">Dead Sea</a>   
        <a href="#">Wadi Dona</a>   
        <a href="#">Wadi Feinan</a>   
        <a href="#">Old Humeiah</a></span>
        </p>
        </aside>

        <figure><img src="assets/img/photo15.jpg" alt="PHOTO"></figure>

        <p><span class="bold">Description</span> <br /> Bertase deleoa 
dipisg elitve sibulum cude enoserta dendrit maurportade usceita varere meroserta 
kertasera miatoque penatib
        emagnis keras. Lorem ipsum dolor sit amet conse ctetur adipisicing 
elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad 
minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo 
consequat.
        Duis qute irure dolor.  </p>

        <a href="#" class="btn-hide" data-toggle="collapse" data-
target=".details">Details</a>

        <a href="#" class="btn-booknow">Book Now!</a>

        <div class="details collapse">
        <div class="daysinfo nodivider">
        <h3><span>DAY 1</span></h3>
        <div class="info">
        <p>Bertase deleoa dipisg elitve sibulum cude enoserta dendrit 
maurportade usceita varere meroserta kertasera miatoque penatib emagnis keras. Lorem 
ipsum dolor sit amet conse ctetur adipisicing elit, sed do eiusmod tempor incididunt ut 
labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation 
ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis qute irure dolor.</p>
        <p><span><span class="orange">Meals:</span> Breakfast, Dinner, 
Snacks.</span>  <span><span class="orange">Hotel:</span> Al Arrabiys Hotel.</span>
        <span><span class="orange">Travel Time:</span> Approx 2 Hours.
</span> </p>
        </div>
        </div>

        <div class="daysinfo">
        <h3><span>DAY 2</span></h3>
        <div class="info">
        <p>Bertase deleoa dipisg elitve sibulum cude enoserta dendrit 
maurportade usceita varere meroserta kertasera miatoque penatib emagnis keras. Lorem 
ipsum dolor sit amet conse ctetur adipisicing elit, sed do eiusmod tempor incididunt ut 
labore et 
dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris   
nisi ut aliquip ex ea commodo consequat. Duis qute irure dolor.</p>
        <p><span><span class="orange">Meals:</span> Breakfast, Dinner, 
Snacks.</span>  <span><span class="orange">Hotel:</span> Al Arrabiys Hotel.</span>
        <span><span class="orange">Travel Time:</span> Approx 2 Hours. 
</span> </p>
        </div>
        </div>

        <div class="daysinfo">
        <h3><span>DAY 3</span></h3>
        <div class="info">
        <p>Bertase deleoa dipisg elitve sibulum cude enoserta dendrit  
maurportade usceita varere meroserta kertasera miatoque penatib emagnis keras. Lorem 
ipsum dolor sit amet conse ctetur adipisicing elit, sed do eiusmod tempor incididunt ut 
labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation 
ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis qute irure dolor.</p>
        <p><span><span class="orange">Meals:</span> Breakfast, Dinner, 
Snacks.</span>  <span><span class="orange">Hotel:</span> Al Arrabiys Hotel.</span>
        <span><span class="orange">Travel Time:</span> Approx 2 Hours.
</span> </p>
        </div>
        </div>
        </div>
        </article>
        <!-- end tour block --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T16:55:17.300

问题编辑后：-该问题与一些未关闭的标签和 css 有关

Jsfiddle 与您的代码：[jsfiddle](http://jsfiddle.net/shail/byejy/3/)

浏览器中的Jsfiddle ：在浏览器中[实时查看](http://jsfiddle.net/shail/byejy/3/show)

在您的样式表中添加以下 css ：

```
.toursinfo .details1 {
float: left;
padding-bottom: 17px;
width: 100%;
} 
```

并使用以下 HTML：

```
<div class="toursinfo">
 <h1>Tours</h1>

<article class="nodivider">
    <p>These are some of our most popular tours with details, prices, and itineraries.
        You can sign up for a tour right from here, or you can create a custom
        version of the tour from our Custom Tour page.</p>
    <!-- start the tours
    block -->
    <aside>
        <p> <span class="left">View from a Jeep </span>  <span class="right">(3 days, 2 nights)</span> 
        </p>
        <p> <span class="left">Price per Person </span>  <span class="right">$1350</span> 
        </p>
        <p> <span class="left">Activities</span>  <span class="right"> <a href="#">Jeeping</a> <a href="#">Camping</a> <a href="#">History</a></span> 
        </p>
        <p> <span class="left">Places</span>  <span class="right"> <a href="#">Wadi Mujib</a> <a href="#">Petra</a> <a href="#">Little Petra</a> <a href="#">Dead Sea</a> <a href="#">Wadi Dona</a> <a href="#">Wadi Feinan</a> <a href="#">Old Humeiah</a></span> 
        </p>
    </aside>
    <figure>
        <img src="assets/img/photo15.jpg" alt="PHOTO">
    </figure>
    <p><span class="bold">Description</span> 
        <br />Bertase deleoa dipisg elitve sibulum cude enoserta dendrit maurportade
        usceita varere meroserta kertasera miatoque penatib emagnis keras. Lorem
        ipsum dolor sit amet conse ctetur adipisicing elit, sed do eiusmod tempor
        incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis
        nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
        Duis qute irure dolor.</p> <a href="#" class="btn-hide" data-toggle="collapse"
    data-target=".details">Details</a>  <a href="#" class="btn-booknow">Book Now!</a>

    <div
    class="details collapse">
        <div class="daysinfo nodivider">
             <h3><span>DAY 1</span></h3>

            <div class="info">
                <p>Bertase deleoa dipisg elitve sibulum cude enoserta dendrit maurportade
                    usceita varere meroserta kertasera miatoque penatib emagnis keras. Lorem
                    ipsum dolor sit amet conse ctetur adipisicing elit, sed do eiusmod tempor
                    incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis
                    nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
                    Duis qute irure dolor.</p>
                <p><span><span class="orange">Meals:</span> Breakfast, Dinner, Snacks.</span> <span><span class="orange">Hotel:</span> Al
                    Arrabiys Hotel.</span> <span><span class="orange">Travel Time:</span> Approx
                    2 Hours.</span>
                </p>
            </div>
        </div>
        <div class="daysinfo">
             <h3><span>DAY 2</span></h3>

            <div class="info">
                <p>Bertase deleoa dipisg elitve sibulum cude enoserta dendrit maurportade
                    usceita varere meroserta kertasera miatoque penatib emagnis keras. Lorem
                    ipsum dolor sit amet conse ctetur adipisicing elit, sed do eiusmod tempor
                    incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis
                    nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
                    Duis qute irure dolor.</p>
                <p><span><span class="orange">Meals:</span> Breakfast, Dinner, Snacks.</span> <span><span class="orange">Hotel:</span> Al
                    Arrabiys Hotel.</span> <span><span class="orange">Travel Time:</span> Approx
                    2 Hours.</span>
                </p>
            </div>
        </div>
        <div class="daysinfo">
             <h3><span>DAY 3</span></h3>

            <div class="info">
                <p>Bertase deleoa dipisg elitve sibulum cude enoserta dendrit maurportade
                    usceita varere meroserta kertasera miatoque penatib emagnis keras. Lorem
                    ipsum dolor sit amet conse ctetur adipisicing elit, sed do eiusmod tempor
                    incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis
                    nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
                    Duis qute irure dolor.</p>
                <p><span><span class="orange">Meals:</span> Breakfast, Dinner, Snacks.</span> <span><span class="orange">Hotel:</span> Al
                    Arrabiys Hotel.</span> <span><span class="orange">Travel Time:</span> Approx
                    2 Hours.</span>
                </p>
               </div>
            </div>
          </div>
        </article>
<!-- end tour block -->
<article class="divider">
<p>These are some of our most popular tours with details, prices, and itineraries.
    You can sign up for a tour right from here, or you can create a custom
    version of the tour from our Custom Tour page.</p>
<!-- start the tours
block -->
<aside>
    <p> <span class="left">View from a Jeep </span>  <span class="right">(3 days, 2 nights)</span> 
    </p>
    <p> <span class="left">Price per Person </span>  <span class="right">$1350</span> 
    </p>
    <p> <span class="left">Activities</span>  <span class="right"> <a href="#">Jeeping</a> <a href="#">Camping</a> <a href="#">History</a></span> 
    </p>
    <p> <span class="left">Places</span>  <span class="right"> <a href="#">Wadi Mujib</a> <a href="#">Petra</a> <a href="#">Little Petra</a> <a href="#">Dead Sea</a> <a href="#">Wadi Dona</a> <a href="#">Wadi Feinan</a> <a href="#">Old Humeiah</a></span> 
    </p>
</aside>
<figure>
    <img src="assets/img/photo15.jpg" alt="PHOTO">
</figure>
<p><span class="bold">Description</span> 
    <br />Bertase deleoa dipisg elitve sibulum cude enoserta dendrit maurportade
    usceita varere meroserta kertasera miatoque penatib emagnis keras. Lorem
    ipsum dolor sit amet conse ctetur adipisicing elit, sed do eiusmod tempor
    incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis
    nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
    Duis qute irure dolor.</p> <a href="#" class="btn-hide" data-toggle="collapse"
data-target=".details1">Details</a>  <a href="#" class="btn-booknow">Book Now!</a>

<div
class="details1 collapse">
    <div class="daysinfo ">
         <h3><span>DAY 1</span></h3>

        <div class="info">
            <p>Bertase deleoa dipisg elitve sibulum cude enoserta dendrit maurportade
                usceita varere meroserta kertasera miatoque penatib emagnis keras. Lorem
                ipsum dolor sit amet conse ctetur adipisicing elit, sed do eiusmod tempor
                incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis
                nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
                Duis qute irure dolor.</p>
            <p><span><span class="orange">Meals:</span> Breakfast, Dinner, Snacks.</span> <span><span class="orange">Hotel:</span> Al
                Arrabiys Hotel.</span> <span><span class="orange">Travel Time:</span> Approx
                2 Hours.</span>
            </p>
        </div>
          </div>
        <div class="daysinfo">
         <h3><span>DAY 2</span></h3>

        <div class="info">
            <p>Bertase deleoa dipisg elitve sibulum cude enoserta dendrit maurportade
                usceita varere meroserta kertasera miatoque penatib emagnis keras. Lorem
                ipsum dolor sit amet conse ctetur adipisicing elit, sed do eiusmod tempor
                incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis
                nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
                Duis qute irure dolor.</p>
            <p><span><span class="orange">Meals:</span> Breakfast, Dinner, Snacks.</span> <span><span class="orange">Hotel:</span> Al
                Arrabiys Hotel.</span> <span><span class="orange">Travel Time:</span> Approx
                2 Hours.</span>
            </p>
        </div>
    </div>
    <div class="daysinfo">
         <h3><span>DAY 3</span></h3>

        <div class="info">
            <p>Bertase deleoa dipisg elitve sibulum cude enoserta dendrit maurportade
                usceita varere meroserta kertasera miatoque penatib emagnis keras. Lorem
                ipsum dolor sit amet conse ctetur adipisicing elit, sed do eiusmod tempor
                incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis
                nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
                Duis qute irure dolor.</p>
            <p><span><span class="orange">Meals:</span> Breakfast, Dinner, Snacks.</span> <span><span class="orange">Hotel:</span> Al
                Arrabiys Hotel.</span> <span><span class="orange">Travel Time:</span> Approx
                2 Hours.</span>
            </p>
        </div>
    </div>
    </div>
  </article>
 </div> 
```

# ios - iOS 自定义字体，添加字体系列

> ID：15050226
> 
> 赞同：0
> 
> 时间：2013-02-24T09:07:24.230
> 
> 标签：ios, xcode, fonts

我希望这个 Q 不是重复的，我已经找了一个星期没有成功的答案。

我已成功添加了几种名为：

DINOT-Bold.otf、DINOT-Black.otf、DINOT-Medium.otf、DINOT-Reg.otf 和 DINOT.otf。

根据需要全部添加到 .plist 中。但是当尝试通过以下方式访问它们时：

```
self.dynamicLabel1.font = [UIFont fontWithName:@"DINOT-Light" size:20.0f];
self.dynamicLabel2.font = [UIFont fontWithName:@"DINOT-Medium" size:27.0f]; 
```

它不工作。我知道有时需要“放置”字体的“其他”名称。我的是：DIN OT。像这样：

```
self.dynamicLabel1.font = [UIFont fontWithName:@"DIN OT" size:20.0f]; 
```

问题是，我上面添加的所有“其他名称”文件都称为 DIN OT，所以现在，XCode 无法“分辨”差异（即 Bold/Med 等）

请帮忙，我该怎么办？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T09:16:27.430

如果你用谷歌搜索，你会发现 OTF 字体在 iOS 上无法正常工作的报告。我不知道为什么会发生这种情况，因为应该支持 OTF，但它似乎发生了。也许这取决于字体内部结构（例如在您的情况下，所有面孔都具有相同的名称）。

[一种可能的前进路径是使用fontforge](http://fontforge.org)或其他工具将字体转换为 TTF 。另一种可能性是修复您的 OTF 字体，使其不同的面不共享相同的内部名称。

# git - 在`git remote add`之后找不到存储库错误

> ID：15050235
> 
> 赞同：2
> 
> 时间：2013-02-24T09:09:19.883
> 
> 标签：git, github

所以我再次运行 git remote add origin 以显示它已经存在。该错误看起来不言自明。我怎样才能`git push origin master`在这里工作？

```
(ENV)Benjamins-MacBook-Air:rss Ben$ git remote add origin git@github.com:ars/rss.git
fatal: remote origin already exists.
(ENV)Benjamins-MacBook-Air:rss Ben$ git push origin master
ERROR: Repository not found. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T09:35:49.107

我宁愿使用 https 表单来推回您的仓库：

```
git remote set-url origin https://github.com/user/repo.git
# in your case:
git remote set-url origin https://github.com/ars/rss.git 
```

`git remote set-url`将*更改*当前与原点关联的 url（参见[`git remote`手册页](http://git-scm.com/docs/git-remote)）。

请注意，我无权访问 rss.git，因此您需要先在 GitHub 上创建它（然后执行 a `git push -u origin master`），或者它是一个现有但*私有*的存储库。

另请注意，如果远程源已经存在，您可以保留它并将 github url 添加到另一个远程名称下，例如“ `github`”。
或者您可以*重命名*现有的原点 ( `git remote rename origin otherName`)，然后`git remote add origin gitHubUrl`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-21T22:40:55.303

*   以管理员身份登录 github.com。
*   在那里使用与 git remote add 相同的名称创建存储库。
*   如果您尝试将存储库推送到您有权访问的 git 帐户（例如您组织的帐户），请确保您登录到 github.com 上的实际帐户，而不是您自己的帐户。
*   重新尝试推送。

# php - 在 PHP 中点击 x 次后删除图像？

> ID：15050236
> 
> 赞同：0
> 
> 时间：2013-02-24T09:09:33.853
> 
> 标签：php, mysql

我只需要知道如何通过 MYSQL 数据库告诉 PHP 页面在点击一定次数后删除图像？

例如，我通过 php/mysql 上传了一张图片（顺便说一句），然后我需要告诉 php 删除该图片，一旦有 20 或 30 次等点击它。

任何建议，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T09:25:26.503

您必须记录对数据库的每次点击：

```
imageId | image | clicks
1       | ...   | 5
2       | ...   | 10 
```

然后您可以在查询中添加`WHERE`条件`SELECT`：

```
$clicksMax = 20;
$query = 
"SELECT `image`, `imageId`
FROM `image`
WHERE `clicks` < $clicksMax"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T10:13:29.140

通过每次点击请求捕获点击的更好解决方案`ajax`通过添加 1 来更新图像的点击列，当您要在其中添加 1 时，您可以检查该值是否大于您所需的点击次数，您将从`html`+中删除该图像`database`还。

# nginx - 为什么这个 PHP 脚本在 apache 上运行而不是在 NGINX 上运行？

> ID：15050241
> 
> 赞同：1
> 
> 时间：2013-02-24T09:10:19.130
> 
> 标签：nginx, download, php

我没有得到任何解决方案，所以在这里尝试问一下，也许有人可以指出我，为什么下面的这个脚本在 NGINX + php5.3.21 上不起作用，但在 apache + php5.2.17 上工作正常，也许它在 php.ini 中还是我在 nginx.conf 中遗漏了什么？

它应该强制标头下载文件并跟踪它是否被取消或完成，然后做一些事情。

为了让它开始在 nginx 中下载，我必须取消注释 last flush(); 但如果取消或完成，它仍然不会跟踪文件“进度”。阿帕奇很好:((谢谢！

```
<?php
$FOLDER_PROGRESS = 'progress/';
$FOLDER_FILES = 'files/';

switch($_REQUEST['acc']){

case 'download':

    $file = trim($_REQUEST['n']);

    if(!file_exists($FOLDER_FILES.$file)){
        echo '<script>alert("Error: The file do not exists.");</script>';
    } else {
        $continue = 'OK';
    }

    if($continue=='OK'){

        $result = fopen($FOLDER_FILES.$file,'r');
        $bytes = filesize($FOLDER_FILES.$file);

        if($bytes<1){
            //header('Location: /');
            echo '<script>alert("Error: The file bytes length is 0.");</script>';
        } else {

            $fp1 = fopen($FOLDER_PROGRESS.trim($_REQUEST['tmp']).'.html','w');
            fwrite($fp1,'Downloading');
            fclose($fp1);

            header("Pragma: public");
            header("Expires: 0");
            header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
            header("Cache-Control: public");
            header("Content-Description: File Transfer");
            header("Content-type: application/force-download");
            header("Content-Disposition: attachment; filename=".$file); 
            header("Content-Type: application/octet-stream");
            header("Content-Transfer-Encoding: binary");
            header("Content-Length: ".$bytes."");

            ignore_user_abort(true);

            while ( !feof($result)) {
                echo fread($result, 4096); //handle
                if (connection_status()!=0 || connection_aborted()){
                    $bytes_transferred = ftell($result); //handle
                    if($bytes_transferred<$bytes) $accion = 'Canceled'; else $accion = 'Done!'; //Done here not run.
                    file_put_contents($FOLDER_PROGRESS.trim($_REQUEST['tmp']).'.html',$accion);

                    sleep(2);
                    file_put_contents($FOLDER_PROGRESS.trim($_REQUEST['tmp']).'.html','Waiting');   
                    flush();
                die;
                } else {
                    $cuenta = ftell($result) / $bytes * 100;
                    if($cuenta>=100){
                        $cuenta = 'Done!';

                    } else {
                        $cuenta = 'Downloaded '.round($cuenta).'%';
                    }
                    file_put_contents($FOLDER_PROGRESS.trim($_REQUEST['tmp']).'.html',$cuenta);
                    if($cuenta=='Done!'){
                        sleep(2);
                        file_put_contents($FOLDER_PROGRESS.trim($_REQUEST['tmp']).'.html','Waiting');
                        flush();
                    }
                }
                //Activate this for delay download.
                //flush();
                //sleep(1);
            }
            fclose($result);

        }

    }

break;

case 'tmp':         

    //create file control

    //$temp = '__'.time();
    $temp = '__'.$_REQUEST['nf'];
    $fp = fopen($FOLDER_PROGRESS.$temp.'.html','w');
    fwrite($fp,'Waiting');
    fclose($fp);                            

    echo trim($temp);

break;                         

} 
?> 
```

php 工作正常， phpinfo() 返回所有正面信息。nginx.conf

```
user www-data;
worker_processes 8;
pid /var/run/nginx.pid;

events {
    worker_connections 1024;
    # multi_accept on;
}

http {
    ##
    # Basic Settings
    ##

    sendfile on;
    tcp_nopush on;
    tcp_nodelay on;
    keepalive_timeout 0;
    client_max_body_size 2048m;
    types_hash_max_size 2048;
    server_tokens off;

    # server_names_hash_bucket_size 64;
    # server_name_in_redirect off;

    include /etc/nginx/mime.types;
    default_type application/octet-stream;

    ##
    # Logging Settings
    ##

    access_log /var/log/nginx/access.log;
    error_log /var/log/nginx/error.log;

    ##
    # Gzip Settings
    ##

    gzip on;
    gzip_disable "msie6";

    # gzip_vary on;
    # gzip_proxied any;
    # gzip_comp_level 6;
    # gzip_buffers 16 8k;
    # gzip_http_version 1.1;
    # gzip_types text/plain text/css application/json application/x-javascript text/xml application/xml application/xml+rss text/javascript;

    ##
    # nginx-naxsi config
    ##
    # Uncomment it if you installed nginx-naxsi
    ##

    #include /etc/nginx/naxsi_core.rules;

    ##
    # nginx-passenger config
    ##
    # Uncomment it if you installed nginx-passenger
    ##

    #passenger_root /usr;
    #passenger_ruby /usr/bin/ruby;

    ##
    # Virtual Host Configs
    ##

    include /etc/nginx/conf.d/*.conf;
    include /etc/nginx/sites-enabled/*;
}

#mail {
#       # See sample authentication script at:
#       # http://wiki.nginx.org/ImapAuthenticateWithApachePhpScript
#
#       # auth_http localhost/auth.php;
#       # pop3_capabilities "TOP" "USER";
#       # imap_capabilities "IMAP4rev1" "UIDPLUS";
#
#       server {
#               listen     localhost:110;
#               protocol   pop3;
#               proxy      on;
#       } 
```

和 mysite.conf

```
server {
            listen 80;
            server_name mysite.com www.mysite.com;

            access_log /var/log/nginx/mysite.access_log;
            error_log /var/log/nginx/mysite.error_log;

            root /var/www/www.mysite.com;
            index index.php index.htm index.html;

            location ~ \.php$ {
              fastcgi_pass   127.0.0.1:9000;
              fastcgi_index  index.php;
              fastcgi_param  SCRIPT_FILENAME /var/www/www.mysite.com$fastcgi_script_name;
              include fastcgi_params;
            }

   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T21:33:02.850

**解决了！**一切都在进行 fastcgi 设置！FastCGI 在完成处理之前不会向客户端输出缓冲区；所以像flush这样的东西是“未知的”。对于其他有同样问题的人：您需要设置以下设置

```
 fastcgi_keep_conn on;
 fastcgi_read_timeout 600;
 fastcgi_buffer_size 1k;
 fastcgi_buffers 128 1k;
 fastcgi_max_temp_file_size 0;
 gzip off; 
```

# android - Android 弹出窗口崩溃应用程序

> ID：15050243
> 
> 赞同：1
> 
> 时间：2013-02-24T09:10:24.307
> 
> 标签：android, menu, arraylist, android-manifest, popupwindow

嗨，我是 android 新手，我正在尝试为餐厅制作菜单。我的应用程序将在图像按钮中显示项目列表及其拇指大小的图像。列表中有多个项目。当用户单击图像按钮时，会弹出另一个显示图像的窗口。根据单击的按钮，图像应该会弹出。为此，我使用了 switch 语句。也就是说，如果按下按钮一，R.drawable.imag01 应该传递给弹出窗口类。

开胃菜.java

```
package com.example.thumbnailzoom;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.ImageButton;
import android.widget.ImageView;

public class Appetizer extends Activity implements View.OnClickListener {
ImageButton ibAp1;
int img;
PopupWin pop;

@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.appetizer);
DisplayComponent();

ibAp1.setOnClickListener(this);
}

private void DisplayComponent() {
ibAp1 = (ImageButton) findViewById(R.id.Ap1);
}

@Override
public void onClick(View v) {
switch (v.getId()) {
case R.id.Ap1:
img = R.drawable.appetimg01;
pop.setPopupImage(img);
pop.displayImage();
break;
}
}

} 
```

开胃菜.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/container"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<LinearLayout
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="horizontal" >

<TextView
android:id="@+id/appetizerTitle1"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="left"
android:text="Canape Assortments       "
android:textSize="20sp"
android:textStyle="bold" />

<TextView
android:id="@+id/appetizerPrice1"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="left"
android:text="1.800"
android:textSize="20sp"
android:textStyle="bold" />
</LinearLayout>

<LinearLayout
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="horizontal" >

<TextView
android:id="@+id/appetizerDes1"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_gravity="left"
android:layout_weight="20"
android:text="6 pieces of mini toasted bread topped with smoked salmon prawn and turkey"
android:textSize="15sp"
android:textStyle="italic" />

<ImageButton
android:id="@+id/Ap1"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_weight="80"
android:adjustViewBounds="true"
android:scaleType="centerCrop"
android:src="@drawable/appetimg01" />
</LinearLayout>

</LinearLayout> 
```

PopupWin.java

```
package com.example.thumbnailzoom;
import android.app.Activity;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup.LayoutParams;
import android.widget.Button;
import android.widget.ImageButton;
import android.widget.ImageView;
import android.widget.PopupWindow;

public class PopupWin extends Activity {
private ImageView img;
private int imgValue;
private Button bDismiss;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);
}

public void setPopupImage(int img){
imgValue = img;
}

public void displayImage() {

LayoutInflater layoutInflater = (LayoutInflater) getBaseContext()
                .getSystemService(LAYOUT_INFLATER_SERVICE);
View popupView = layoutInflater.inflate(R.layout.popup, null);
img.setImageResource(imgValue);
final PopupWindow popupWindow = new PopupWindow(popupView,
LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);

Button bDismiss = (Button) popupView.findViewById(R.id.dismiss);
bDismiss.setOnClickListener(new Button.OnClickListener() {

@Override
public void onClick(View v) {
popupWindow.dismiss();
}
});
}
} 
```

弹出.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/pop"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/dim_back" >

<LinearLayout
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="@drawable/dim_back"
android:orientation="vertical" >

<LinearLayout
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_margin="20sp"
android:orientation="vertical" 
android:layout_gravity="center">
<ImageView
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="center_horizontal"
android:adjustViewBounds="true" />

<Button
android:id="@+id/dismiss"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="center_horizontal"
android:layout_marginTop="20sp"
android:text="Go Back"
android:textStyle="bold" />
</LinearLayout>
</LinearLayout>

</LinearLayout> 
```

安卓清单

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.thumbnailzoom"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
android:minSdkVersion="11"
android:targetSdkVersion="17" />

<application
android:allowBackup="true"
android:icon="@drawable/ic_launcher"
android:label="@string/app_name"
android:theme="@android:style/Theme.Holo" >
<activity
android:name="com.example.thumbnailzoom.Appetizer"
android:label="@string/app_name" >
<intent-filter>
<action android:name="android.intent.action.MAIN" />

<category android:name="android.intent.category.LAUNCHER" />
</intent-filter>
</activity>
<activity
android:name="com.example.thumbnailzoom.PopupWin"
android:label="@string/app_name" >
</activity>
</application>

</manifest> 
```

代码一起编写时有效，但我想将图像弹出的代码与项目列表分开。此代码将显示菜单列表，但当我单击缩略图时，应用程序崩溃。我错过了什么请指导。任何形式的帮助都将受到高度赞赏。先感谢您。并对新手草率的代码感到抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T09:20:34.783

你一定会得到，`NullPointerException`因为在`Apetizer`活动中你没有被灌输`PopupWin pop`；并且您正在`onclick`方法中访问 pop 对象而无需初始化

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T09:25:55.520

您正在将其创建`PopupWin`为单独的 Activity，但并未将其作为 Activity 启动。您不能像创建对象一样`PopupWin pop;`然后像任何其他活动一样使用它们。此外，您没有在任何地方进行初始化，因此无论它是哪种类，`pop`您都会遇到。`NullPointerException`

现在，假设您确实对其进行了初始化：如果您这样做，那么您的 Activity 的 onCreate() 将永远不会被调用，并且它的上下文等不会被创建，因为它不遵循 Activity 生命周期。因此，每当你尝试使用类似的东西时`LayoutInflater`，你都会得到一个异常，因为它`getBaseContext()`会返回 null。

所以解决这个问题，开始`PopupWin`使用：

```
case R.id.Ap1:
    Intent intent = new Intent(this, PopupWin.class);
    startActivity(intent);
    break; 
```

您可以将要用作 Intent Extra 的图像资源传递并在另一端检索它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T18:22:38.677

你可以试试这个打开弹出窗口

```
public void OpenPopWindow(View v)
{
    LayoutInflater layoutInflater  = (LayoutInflater)getBaseContext().getSystemService(LAYOUT_INFLATER_SERVICE);  
     View popupView = layoutInflater.inflate(R.layout.popupmenu, null);
       PopupWindow popupwindow = new PopupWindow(popupView, LayoutParams.FILL_PARENT,  
               LayoutParams.WRAP_CONTENT, false); 

             popupwindow .setAnimationStyle(R.style.DialogAnimation);  
             popupwindow .setWidth(display.getWidth());  
             popupwindow .showAtLocation(v, Gravity.BOTTOM, 0, 0);  
             popupwindow.setBackgroundDrawable(getResources().getDrawable(R.drawable.black));} 
```

# random - 如何在 FreePascal 中生成 1 到 1,000,000 之间的随机数

> ID：15050244
> 
> 赞同：1
> 
> 时间：2013-02-24T09:10:26.773
> 
> 标签：random, freepascal

如何在 Free Pascal 中生成 1 到 1,000,000 之间的随机数？

我使用了 LongInt、Real、Integer 等变量类型，但始终存在 RangeError。

但是 1 到 33,333 之间的随机数可以正常工作。

```
Program Random;

var
  a: ...;

begin

a:=random(1000000);

end. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T14:40:07.527

您使用哪个版本的 Free Pascal？**我在这里使用**2.6.0 并使用**LongInt**作为.

 **顺便说一句：您不应将程序命名为**Random**，这会导致错误（但不会导致范围错误）。**

# jquery - jQuery HTML 在淡出之前发生变化

> ID：15050245
> 
> 赞同：1
> 
> 时间：2013-02-24T09:10:26.847
> 
> 标签：jquery, html

我正在使用 jQuery 在单页文档上进行简单的导航。内容通过 JavaScript 动态更改。我正在使用以下代码来更改我的内容：

```
<script type="text/javascript">
    function cgpg_1(){
        $("#jquery_content").fadeOut("slow").html("hello").fadeIn();
    }
</script> 
```

它在更改内容方面效果很好，但它没有做的是在更改内容时淡出。它总是会更改 html，`#jquery_content`然后*淡出*并淡入。这显然没有意义，因为淡出应该使页面在浏览时看起来更整洁。

我需要做什么来修复 jQuery？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T09:11:48.483

您可以使用回调函数。

```
function cgpg_1(){
    $("#jquery_content").fadeOut("slow", function(){
         $(this).html("hello").fadeIn();
    });
} 
```

# android - from[ ] 中的两列，to[] 中的一列

> ID：15050249
> 
> 赞同：0
> 
> 时间：2013-02-24T09:11:39.597
> 
> 标签：android, database, simplecursoradapter

我有下一个问题。我在 DB 中有三列（id 整数，picture_int 整数（来自资源的图片），picture_galery（路径），我想在 listview 中设置来自 DB 的图像。我想检查，如果列 picture_int 为空，从列 picture_galery 设置图像和if picture_int!=null 然后设置这张图片。对不起我的英语=（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T09:24:26.203

您可以通过扩展 BaseAdapter 并覆盖所需的方法来使用自定义适配器

```
 public int getCount() {
   return somevalie;
  }

  @Override
  public Object getItem(int arg0) {
  return arg0;
 }

  @Override
  public long getItemId(int arg0) {
   return arg0;
 }

  @Override
  public View getView(int arg0, View arg1, ViewGroup arg2) {

return view
} 
```

有关更多信息，请查看[自定义适配器示例](http://codinglookseasy.blogspot.in/2012/07/custom-list-view.html)

然后创建您可以访问的数据库，以将图像设置为自定义列表视图。假设考虑像

```
if(theFieldYouAccess == null)
{
 //Do what you want
}
else
{
 //Do what you want
} 
```

在 getView() 功能中

# java - Android：构造函数内部的同步（）没有效果？

> ID：15050251
> 
> 赞同：1
> 
> 时间：2013-02-24T09:11:54.137
> 
> 标签：java, android, constructor, synchronized

我尝试搜索这个问题，但没有找到任何东西，好像我是唯一一个尝试过的人。

基本上我有一个静态对象，我用它来同步包含类的构造函数内的资源访问，我不时注意到它不起作用！

```
private static Integer              lock = Integer.valueOf(0);

public testClass(Context ctx)
{
    if (ctx != null)
        context = ctx.getApplicationContext();
    else
        context = null;

    synchronized(lock)
    {
        Log.v(at_data.TAG, "I_AM_IN=" + I_AM_IN);
        I_AM_IN = true;

      // Access resource
      // 
      // Multiple threads do enter here!

        Log.v(at_data.TAG, "I_AM_OUT=" + I_AM_IN);
        I_AM_IN = false;
    }
} 
```

我可能错过了一些东西，但没有找到任何文件说它不应该工作！？。

输出：

```
I_AM_IN=false
I_AM_IN=true
I_AM_OUT=true
I_AM_OUT=false 
```

大多数时候它会是这样的：

```
I_AM_IN=false
I_AM_OUT=true
I_AM_IN=false
I_AM_OUT=true 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T09:40:47.960

根据您的评论，问题在于您正在修改锁。您不能增加 Integer 对象的值。整数是不可变的，所以每次你“增加”它时，你都会用另一个锁替换锁：

```
lock = new Integer(lock.intValue() + 1); 
```

使用**final** `new Object()`作为锁，并使用单独的变量来保存计数。或者使用 AtomicInteger。Semaphore 也可能是您正在寻找的类。

经验法则：锁应该始终是最终的。并且您永远不应该将共享对象用作锁（`Integer.valueOf(0)`是共享对象，因为`valueOf(0)`至少在某些 VM 实现中，总是返回相同的 Integer 实例）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T09:35:34.343

[您应该使用私有的最终锁定对象。](https://www.securecoding.cert.org/confluence/display/java/LCK00-J.+Use+private+final+lock+objects+to+synchronize+classes+that+may+interact+with+untrusted+code)

# php - 我如何对动态数组求和

> ID：15050255
> 
> 赞同：0
> 
> 时间：2013-02-24T09:12:30.690
> 
> 标签：php, arrays, codeigniter

我的代码如下

```
<?php                       
foreach($query2->result() as $row2)
{                           
    $sub_head_id = $row2->sub_head_id;
?>                          
      <tr>
<?php 
      $query3 = $this->db->select('farm_id')->get('spf_farm_info');                              $she_am_total = 0;
      foreach($query3->result() as $row3)
      {
          $farm_id_inner = $row3->farm_id;
?>
      <td>
<?php 
          $s_h_e_amount = $this->report_model->get_amount($farm_id_inner,$head_id,$sub_head_id);
?>
    </td>
<?php
      }
?>
    <td>
<?php
    $total += $s_h_e_amount;
?>
     </td>
     </tr>
<?php
        }
        }
?> 
```

基本上我想知道我该如何解决它，

```
<tr>
<?php 
      $query3 = $this->db->select('farm_id')->get('spf_farm_info');                              $she_am_total = 0;
      foreach($query3->result() as $row3)
      {

?>
      <td>
<?php 
          echo "Total :";
          echo $total;
?>
    </td>
<?php
      }
?>
<td>
    Grand Total:
</td>
</tr> 
```

在这里，Table 列会动态增加，并且每个 td（可能是 2/3/4/..）都会从 get_amount 函数中获得不同的值。

现在我想根据列对每个 tr 的值求和。在这里它将是动态的总和，这将被显示。

![在此处输入图像描述](../Images/0fc4c04312061607ef119dd8092846e1.png)

请帮助我如何正确解决

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T09:43:33.697

简单的解决方案是采用四个变量

```
$Cola_total=0;
$Colb_total=0;
$Colc_total=0;
$Cold_total=0; 
```

在你的循环中总结这些列

foreach($array as $val){

```
echo "<tr><td>$val[0]</td> <td>$val[1]</td> <td>$val[2]</td><td>$val[3]</td></tr>";

$Cola_total=+$val[0];
$Colb_total=+$val[1];
$Colc_total=+$val[2];
$Cold_total=+$val[3]; 
```

}

并在循环之后将总和放在最后一行

```
echo "<tr><td>$Cola_total</td> <td>$Colb_total</td> <td>$Colc_total</td><td>$Cold_total</td></tr>"; 
```

它可能会给你一些想法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:13:18.297

在这里，由于使用了 Codeigniter，因此将使用 select_sum()。然后会得到正确的结果。

# .htaccess - 使用 .htaccess 将内页 url 重命名为 seo 友好的 url

> ID：15050256
> 
> 赞同：2
> 
> 时间：2013-02-24T09:12:48.573
> 
> 标签：.htaccess, url-rewriting, seo

我想将以下 URL 重命名为 SEO 友好 URL。

```
Change the following URL : http://www.peacockgirls.com/index.php?page=1 into http://www.peacockgirls.com
Change the following URL : http://www.peacockgirls.com/index.php?page=2 into http://www.peacockgirls.com/greece-escort
Change the following URL : http://www.peacockgirls.com/index.php?page=3 into http://www.peacockgirls.com/athens-escort
Change the following URL : http://www.peacockgirls.com/index.php?page=4 into http://www.peacockgirls.com/bookings
Change the following URL : http://www.peacockgirls.com/index.php?page=5 into http://www.peacockgirls.com/jobs
Change the following URL : http://www.peacockgirls.com/index.php?page=6 into http://www.peacockgirls.com/contact-us
Change the following URL : http://www.peacockgirls.com/index.php?page=24 into http://www.peacockgirls.com/articles
Change the following URL : http://www.peacockgirls.com/index.php?page=7 into http://www.peacockgirls.com/links
Change the following URL : http://www.peacockgirls.com/index.php?profile=22 into http://www.peacockgirls.com/profile/aleena
Change the following URL : http://www.peacockgirls.com/index.php?profile=40 into http://www.peacockgirls.com/profile/fabiana
Change the following URL : http://www.peacockgirls.com/index.php?profile=48 into http://www.peacockgirls.com/profile/sabrina
Change the following URL : http://www.peacockgirls.com/index.php?profile=69 into http://www.peacockgirls.com/profile/suzanna
Change the following URL : http://www.peacockgirls.com/index.php?profile=63 into http://www.peacockgirls.com/profile/anna
Change the following URL : http://www.peacockgirls.com/index.php?profile=70 into http://www.peacockgirls.com/profile/sam
Change the following URL : http://www.peacockgirls.com/index.php?profile=61 into http://www.peacockgirls.com/profile/Larissa&Samantha
Change the following URL : http://www.peacockgirls.com/index.php?profile=54 into http://www.peacockgirls.com/profile/McKenzie
Change the following URL : http://www.peacockgirls.com/index.php?profile=29 into http://www.peacockgirls.com/profile/valery 
```

如果您使用 向我展示 4 或 5 个 URL 重命名技术`.htaccess`，我将使用剩余的 URL。我被赋予了这个任务，但我做不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T17:14:00.933

有了这样的任务，我会去[`RewriteMap`](http://httpd.apache.org/docs/current/rewrite/rewritemap.html)。

您可以使用两个单独的地图文本文件（为了更好的文件管理）：一个用于配置文件，一个用于页面（用于其他类型重写的任何新文件）。

你`.htaccess`可以这样设置：

```
RewriteMap userid txt:/etc/apache2/useridmap.txt
RewriteRule ^/index.php?page=(.+) /profile/${userid:$1} [L,R=301] 
```

地图文本文件格式如下：

```
# Comment line
MatchingKey SubstValue
MatchingKey SubstValue # comment 
```

在您的情况下，配置文件文本文件可能如下所示：

```
22 aleena
40 fabiana
# more mappings 
```

对于*页面*`RewriteRule`重定向，您可以使用以下方法（地图文件和表达式会有所不同 ）

**在进行任何工作之前，我建议您先阅读`RewriteMap` [文档](http://httpd.apache.org/docs/current/rewrite/rewritemap.html)，以便您了解该工具，即它的配置和用法。**

我希望这将是您任务的良好方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-06T15:09:41.080

```
<IfModule mod_rewrite.c> 
   RewriteEngine On
   RewriteRule %{REQUEST_FILENAME} !-f
   RewriteRule %{REQUEST_FILENAME} !-d
   RewriteBase /

   RewriteRule ^/greece-escort/?$ /index.php?page=2 [NC,L]
   RewriteRule ^/athens-escort/?$ /index.php?page=3 [NC,L]
   RewriteRule ^/bookings/?$ /index.php?page=4 [NC,L]
   RewriteRule ^/jobs/?$ /index.php?page=5 [NC,L]
   RewriteRule ^/contact-us/?$ /index.php?page=6 [NC,L]
   RewriteRule ^/articles/?$ /index.php?page=24 [NC,L]
   RewriteRule ^/links/?$ /index.php?page=7 [NC,L]
   RewriteRule ^/profile/aleena/?$ /index.php?profile=22 [NC,L]
   RewriteRule ^/profile/fabiana/?$ /index.php?profile=40 [NC,L]
   RewriteRule ^/profile/sabrina/?$ /index.php?profile=48 [NC,L]
   RewriteRule ^/profile/suzanna/?$ /index.php?profile=69 [NC,L]
   RewriteRule ^/profile/anna/?$ /index.php?profile=63 [NC,L]
   RewriteRule ^/profile/sam/?$ /index.php?profile=70 [NC,L]
   RewriteRule ^/profile/Larissa&Samantha/?$ /index.php?profile=61 [NC,L]
   RewriteRule ^/profile/McKenzie/?$ /index.php?profile=54 [NC,L]
   RewriteRule ^/profile/valery/?$ /index.php?profile=29 [NC,L]
</IfModule> 
```

.htaccess

# c++ - 使用 ofstream 时“表达式必须具有常量值”

> ID：15050260
> 
> 赞同：1
> 
> 时间：2013-02-24T09:13:26.077
> 
> 标签：c++

我正在使用 Visual C++ 将我的游戏从 GNU/Linux 移植到 Windows。

这是问题所在：

```
std::stringstream sstm;

/// *working on stringstream*

const int size = sstm.str().size();
char buffer[size];

std::ofstream outfile("options", std::ofstream::binary);

for(int i = 0; i < size; i++)
    buffer[i] = sstm.str().at(i);

outfile.write(buffer, size);

outfile.close(); 
```

它说：“表达式必须有一个常量值”在缓冲区的声明中。

我已将其更改为：

```
std::vector<char>buffer(size); 
```

然后 VC 在 outfile.write() 中说：“无法将参数 1 从 'std::vector<_Ty>' 转换为 'const char *'”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T09:18:55.923

```
const int size = sstm.str().size();
char buffer[size]; 
```

`buffer`这里是一个可变长度数组（VLA）。这是每个 C++ 标准的非法代码 - 需要在编译时知道数组的大小。C99 中允许使用 VLA'a，而 G++ 允许将其作为 C++ 中的扩展。

`const int`如果它是用文字或 ˙ 初始化的，则可以是编译时间常数`constexpr`。在你的情况下，它不是。

你快到了 -`vector<char>`是一种正确的方法。要将其传递给`ostream::write()`您，可以说`buffer.data()`或`&buffer[0]`-

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T09:57:22.910

你知道`sstm.str()`每次调用都会创建一个新字符串吗？如果缓冲区很大，那将是很多字符串。

你可以只创建一个字符串的副本：

```
std::stringstream sstm;

/// *working on stringstream*

std::string buffer = sstm.str();

std::ofstream outfile("options", std::ofstream::binary);

outfile.write(buffer.c_str(), buffer.size());

outfile.close(); 
```

# ios - 如何将上下文旋转 90 度并将原点设置为左上角？

> ID：15050262
> 
> 赞同：0
> 
> 时间：2013-02-24T09:13:42.327
> 
> 标签：ios, objective-c, graphics

我正在尝试将上下文旋转 90 度并将原点设置为左上角。这就是我尝试这样做的方式：

```
- (void)drawRect:(CGRect)rect {    

    CGFloat red[4] = {1.0f, 0.0f, 0.0f, 1.0f};
    CGContextRef c = UIGraphicsGetCurrentContext();
    CGContextSetStrokeColor(c, red);
    CGContextSetLineWidth(c, 2);

    CGContextRotateCTM(c, (-90.0 * M_PI/180.0)); // 90 degrees
    CGContextTranslateCTM(c, -rect.size.height, 0);
    CGContextAddRect(c, CGRectMake(0, 0, 100, 100));
    CGContextStrokePath(c);
} 
```

我期望的是矩形将在左上角完全可见。但这里看起来像这样：

![在此处输入图像描述](../Images/fd01fd5115cbb7f68365a2e180807636.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T13:27:57.310

您的代码实际上是正确的。旋转+平移将坐标系原点移动到视图的左下角，x轴向上，y轴向右。如果您将设备旋转 90 度，则原点会显示在左上角，就像您缩进一样。

问题是视图矩形对于显示来说太大了。正如您在讨论中所说，矩形的高度为 548，即 4 英寸显示屏的高度（减去状态栏）。因此，如果您在 4 英寸显示屏上启动应用程序，矩形将在底部被剪裁。

您必须调整视图的大小/自动调整大小选项，以便它在所有设备上正确显示。

# iphone - 带有子视图的 UITableViewCell 不会被重用

> ID：15050263
> 
> 赞同：4
> 
> 时间：2013-02-24T09:13:50.763
> 
> 标签：iphone, ios, uitableview

我在屏幕上添加了一个简单的 UITableView。但是，我希望其中的单元格显示一堆自定义 UI 元素（主要是视图和标签）。由于 UITableViewCell 没有给我很多自由定制它的机会，我决定添加我需要的所有元素作为单元格的子视图。这是我的 cellForRowAtIndexPath 方法：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil)
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                                  reuseIdentifier:CellIdentifier];
}

UIView *view1 = [[UIView alloc] initWithFrame:CGRectMake(10.0f, 10.0f, 25.0f, 25.0f)];
view1.backgroundColor = [UIColor redColor];
view1.layer.shadowColor = [[UIColor blackColor] CGColor];
view1.layer.shadowOffset = CGSizeMake(0.0f, 0.0f);
view1.layer.shadowOpacity = 0.8f;
view1.layer.shadowRadius = 3.0f;
[cell addSubview:view1];

UILabel *label1 = [[UILabel alloc] initWithFrame:CGRectMake(85.0f, 5.0f, 100.0f, 15.0f)];
label1.text = @"dummy text 1";
label1.backgroundColor = [UIColor clearColor];
label1.textColor = [UIColor lightGrayColor];
label1.textAlignment = UITextAlignmentRight;
label1.font = [UIFont systemFontOfSize:12.0f];
label1.lineBreakMode = NSLineBreakByTruncatingTail;
label1.shadowOffset = CGSizeMake(0.0f, 1.0f);
label1.shadowColor = [UIColor blackColor];
[cell addSubview:label1];

UILabel *label2 = [[UILabel alloc] initWithFrame:CGRectMake(85.0f, 25.0f, 100.0f, 15.0f)];
label2.text = @"dummy text 2";
label2.backgroundColor = [UIColor clearColor];
label2.textColor = [UIColor lightGrayColor];
label2.textAlignment = UITextAlignmentRight;
label2.font = [UIFont systemFontOfSize:12.0f];
label2.lineBreakMode = NSLineBreakByTruncatingTail;
label2.shadowOffset = CGSizeMake(0.0f, 1.0f);
label2.shadowColor = [UIColor blackColor];
[cell addSubview:label2];

UILabel *label3 = [[UILabel alloc] initWithFrame:CGRectMake(85.0f, 45.0f, 100.0f, 15.0f)];
label3.text = @"dummy text 3";
label3.backgroundColor = [UIColor clearColor];
label3.textColor = [UIColor lightGrayColor];
label3.textAlignment = UITextAlignmentRight;
label3.font = [UIFont systemFontOfSize:12.0f];
label3.lineBreakMode = NSLineBreakByTruncatingTail;
label3.shadowOffset = CGSizeMake(0.0f, 1.0f);
label3.shadowColor = [UIColor blackColor];
[cell addSubview:label3];

return cell;
} 
```

就单元格定制而言，上述所有代码都可以正常工作。问题是，当一个单元格离开可见区域时，它的子视图没有被释放。当我上下移动 tableview 时，添加的 UIView 上的阴影越来越暗，我猜标签也没有被释放。

我该如何解决这个问题？我想我可以子类化 UITableViewCell 类，但我只是在单元格的类中添加子视图。这似乎不是一个解决方案。有没有办法让单元格在消失时释放其子视图，或者有一种可靠的方式来真正自由地自定义单元格？

谢谢！

一些附加信息：我不使用 IB（以编程方式执行所有操作）我使用 ARC 我使用 Xcode 4.6 我的 SDK 是 iOS 6.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T09:49:29.987

问题是细胞被回收了。想想看。每次初始化或重用单元格时，您已将所有这些 UIView 附加到单元格。简单地移动括号将导致仅在初始化时附加视图。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                                       reuseIdentifier:CellIdentifier];

        UIView *view1 = [[UIView alloc] initWithFrame:CGRectMake(10.0f, 10.0f, 25.0f, 25.0f)];
        view1.backgroundColor = [UIColor redColor];
        view1.layer.shadowColor = [[UIColor blackColor] CGColor];
        view1.layer.shadowOffset = CGSizeMake(0.0f, 0.0f);
        view1.layer.shadowOpacity = 0.8f;
        view1.layer.shadowRadius = 3.0f;
        [cell addSubview:view1];

        UILabel *label1 = [[UILabel alloc] initWithFrame:CGRectMake(85.0f, 5.0f, 100.0f, 15.0f)];
        label1.text = @"dummy text 1";
        label1.backgroundColor = [UIColor clearColor];
        label1.textColor = [UIColor lightGrayColor];
        label1.textAlignment = UITextAlignmentRight;
        label1.font = [UIFont systemFontOfSize:12.0f];
        label1.lineBreakMode = NSLineBreakByTruncatingTail;
        label1.shadowOffset = CGSizeMake(0.0f, 1.0f);
        label1.shadowColor = [UIColor blackColor];
        [cell addSubview:label1];

        UILabel *label2 = [[UILabel alloc] initWithFrame:CGRectMake(85.0f, 25.0f, 100.0f, 15.0f)];
        label2.text = @"dummy text 2";
        label2.backgroundColor = [UIColor clearColor];
        label2.textColor = [UIColor lightGrayColor];
        label2.textAlignment = UITextAlignmentRight;
        label2.font = [UIFont systemFontOfSize:12.0f];
        label2.lineBreakMode = NSLineBreakByTruncatingTail;
        label2.shadowOffset = CGSizeMake(0.0f, 1.0f);
        label2.shadowColor = [UIColor blackColor];
        [cell addSubview:label2];

        UILabel *label3 = [[UILabel alloc] initWithFrame:CGRectMake(85.0f, 45.0f, 100.0f, 15.0f)];
        label3.text = @"dummy text 3";
        label3.backgroundColor = [UIColor clearColor];
        label3.textColor = [UIColor lightGrayColor];
        label3.textAlignment = UITextAlignmentRight;
        label3.font = [UIFont systemFontOfSize:12.0f];
        label3.lineBreakMode = NSLineBreakByTruncatingTail;
        label3.shadowOffset = CGSizeMake(0.0f, 1.0f);
        label3.shadowColor = [UIColor blackColor];
        [cell addSubview:label3];
    }

    return cell;
} 
```

也就是说...如果您想通过添加内容使这些单元格有趣，则每次都需要从单元格中删除它们或保留对单元格子视图的引用。最后一点，如果可以的话，不要只删除所有视图。如果值只是简单地改变，子类 UITableViewCell 并创建您自己的自定义类，让您设置视图的唯一值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T09:15:44.153

您应该创建一个 UITableViewCell 子类并在那里进行所有自定义。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-24T09:26:58.410

您可以通过两种方式使您的代码工作。

**正确**的方法是将其**子类**化并将添加的视图作为属性公开。

**错误**的方法是像这样修改您的代码：

```
if (cell == nil)
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                                  reuseIdentifier:CellIdentifier];
}

for (UIView *cellView in sell.view)
{
    [cellView removeFromSuperVuew];
} 
```

你注意到自己的影子越来越暗。这是因为每次加载（不仅是在创建时）单元格时，都会添加它（在所有其他子视图中）。

当你决定子类化时，不要忘记实施：

```
- (NSString *)reuseIdentifier
{
  return @"hereGoesTeuseIdentifierThatYouWillUseForThissKindOfCell";
} 
```

# java - Spring Data Neo4j“找不到类型的属性”异常

> ID：15050267
> 
> 赞同：1
> 
> 时间：2013-02-24T09:14:41.193
> 
> 标签：java, spring, neo4j, spring-data-neo4j

我正在尝试将现有项目转换为使用 Spring Data 和 Neo4j，但遇到了一些问题。当我尝试构建项目时，出现以下异常：

```
[etc. ...]
Caused by: 
org.springframework.data.mapping.PropertyReferenceException: No property get found for type com.myproject.models.SuperNode
    at org.springframework.data.mapping.PropertyPath.<init>(PropertyPath.java:75)
[... etc.] 
```

我似乎找不到任何关于为什么会出现该错误的好信息，而且我不确定究竟是什么原因造成的。

这是 SuperNode 类的大部分内容：

```
@NodeEntity
public class SuperNode extends AbstractMapValues {

    @GraphId
    private Long superNodeId;

    @NotNull
    private boolean superNodeFullyGenerated = false;

    private BaseLandType likelyLandType;

    private BaseLandType unlikelyLandType;

[methods and such]
} 
```

它源自 AbstractMapValues 类：

```
@NodeEntity
public abstract class AbstractMapValues implements Comparable<AbstractMapValues> {

    @GraphId
    public Long id;

    @Range(min = 0, max = MAX_MAP_INT)
    private int xCoor;

    @Range(min = 0, max = MAX_MAP_INT)
    private int yCoor;

    //set only when x and y are set
    @Indexed(indexType = IndexType.POINT)
    private String wkt;

    @Range(min = BASIC_MIN, max = BASIC_MAX)
    private int percipitation;

    @Range(min = -1, max = BASIC_MAX)
    private int topography;

    @Range(min = BASIC_MIN, max = BASIC_MAX)
    private int seaLevel;

 [more int fields, but you get the picture]
 } 
```

如您所见，这些用于表示地图中的点。我的项目中有一个 Neo4j 空间依赖项，它应该允许我使用 IndexType.POINT。

然后我有 SuperNode 的存储库。我有我的基本 CRUD 类型存储库接口，一个由基本存储库实现的自定义接口，这样我就可以实现自定义接口并写出需要使用 Neo4j 空间库的 get 方法.

基本回购：

```
public interface SuperNodeRepo extends CRUDRepository<SuperNode>, SpatialRepository<SuperNode>, SuperNodeRepoCustom {

} 
```

自定义界面：

```
@NoRepositoryBean
public interface SuperNodeRepoCustom {

    public SuperNode getSuperNode(int xCoorSuperNode, int yCoorSuperNode) ;

    public List<SuperNode> getSuperNodes(int xmax, int xmin, int ymax, int ymin) ;

} 
```

自定义实现（如您所见，它目前不完整）：

公共类 SuperNodeRepoCustomImpl 实现 SuperNodeRepoCustom {

```
public SuperNode getSuperNode(int xCoorSuperNode, int yCoorSuperNode) {
    return null;
}

public List<SuperNode> getSuperNodes(int xmax, int xmin, int ymax, int ymin) {
    return null;
} 
```

}

我尝试将@Indexed 直接添加到超节点中的新字段，但这无济于事。我已经尝试过没有扩展spatialRepo。

当我在没有扩展我的自定义界面的情况下尝试它时，我得到了一个不同的错误：

```
No matching bean of type [com.orclands.game.models.SuperNode] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {} 
```

但我仍然不知道为什么会这样。所以最后，我有两个问题。A. 我的自定义接口实现有什么问题，B. 除此之外还有什么问题！

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-18T21:01:42.010

```
**@Repository**
public interface SuperNodeRepo extends CRUDRepository<SuperNode>, SpatialRepository<SuperNode>, SuperNodeRepoCustom {

} 
```

# mysql - Mysql中如何高效设计数据库表

> ID：15050269
> 
> 赞同：0
> 
> 时间：2013-02-24T09:14:55.920
> 
> 标签：mysql, indexing, foreign-keys, relational-database, entity-relationship

我有以下pojo

```
 public class Like {
     private Long commentId;
     private Collection<Long> accountIds;
   }

   public class Comment {
private Long personId;
    private Long pageId;
    private Long Id;
    private String text;
    private Like like;
    private LocalDate commentDate;
   }

   public class Page {
     private Long Id;
     private Long textId;
     private Collection<Comment> comments;
     private LocalTime postingDate;
     private ViewType type;
     private String mediaUrl;
     private Collection<Long> openAccountIds;
     private Like like;
   }

    public class Text{
      private Long accountId;
      private Long Id;
      private String name;
      private LocalTime firstPostedTime;
      private LocalTime lastPostedTime;
      private ViewType type;
      private Collection<Page> pages;
      private Like like;
      private String description;
      private Collection<Long> openAccountIds;
     } 
```

现在我的文本存储库如下：

```
 public interface TextRepository {

Collection<Text> getAllTexts(Long accountId);

Diary getText(Long TextId);

Page getPage(Long pageId);

Comment getComment(Long commentId);

void addPageToText(Long TextId , Page page);

void addCommentToPage(Long pageId , Comment comment);

void updateText(Text text);

void deletePage(Long pageId);

void deleteComment(Long commentId);

void updateLikeToText(Long textIds);

void updateLikeToPage(Long pageId);

void updateLikeToComment(Long commentId);

} 
```

我是mysql的新手。我想知道如何有效地创建 mysql 表，以便我可以在更短的时间内检索数据。此外，如果我的 pojo 包含任何结构缺陷，请继续更改它们或提供建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T10:26:19.720

Here are some suggestions for the object model to consider (see comments),

```
// Specifying all the fields as private will not allow
// any other class to use the data!
public class Account
{
    public String name;
    public String location;
}

public class Text
{
    public Collection<Account> likedBy;
    public Collection<Account> openAccounts;
    public Collection<Page> pages;
    public Account postedBy; 
    public String name; // Not sure what this field represents...
    public LocalTime firstPostedTime;
    public LocalTime lastPostedTime;
    public ViewType type;
    public String description;

    // Consider using get/set methods for collections, 
    // so as to expose only minimal required information 
//  public like(Account account)
//  {
//      likedBy.add(account);
//  }
//  
//  public dislike(Account account)
//  {
//      likedBy.remove(account);
//  }
}

public class Page
{
    public Collection<Comment> comments;
    public LocalTime postingDate;
    public ViewType type;
    public String mediaUrl;
    public Collection<Account> openAccounts;
    public Collection<Account> likedBy;

//  public addComment(Comment comment)
//  {
//      ...
//      Update posting date
//  }
//  
//  public addOpenAccount(Account account)
//  {
//      ...
//  }
}

public class Comment 
{
    public Account postedBy;
    public String text;
    public Collection<Account> likedBy;
    public LocalDate commentDate;
} 
```

The next step would be to construct an entity-relationship diagram. The primary keys and foreign keys (`xxxId`) are introduced while normalizing the schema.

The schema could look like this,

*   `Account` [id, name, location]
*   `ViewType` [id, description]
*   `Comment` [id, posted_by_account_id, text, postedDate]
*   `CommentLikes` [comment_id, account_id]
*   `Text` [id, account_id, name, firstPostedTime, lastPostedTime, type_Id, description]
*   `TextAccounts` [text_id, account_id]
*   `TextLikes` [text_id, account_id]
*   `TextPages` [text_id, page_id]
*   `Page` [id, mediaUrl, type_id, postingDate]
*   `PageLikes` [page_id, account_id]
*   `PageComments` [page_id, comment_id]
*   `PageAccounts` [page_id, account_id]

# jquery - 带有requirejs问题的jquery插件

> ID：15050270
> 
> 赞同：0
> 
> 时间：2013-02-24T09:14:58.540
> 
> 标签：jquery, jquery-plugins, backbone.js, requirejs, amd

我正在使用带有延迟加载插件的 Backbone、Undersocre、jquery 和[Requirejs](http://www.appelsiini.net/projects/lazyload)。在 main.js 中，我使用 shim 来加载这个插件，如下所示

```
require.config({
   shim: {
    'backbone': {
        deps: ['vendor/underscore/underscore', 'jquery'],
        exports: 'Backbone'
    },
    lazyload: ['jquery', 'lazyload']
  },

  paths: {
    text:        'vendor/text',
    jquery:      'vendor/jquery.min',
    lazyload:    'plugins/jquery.lazyload',
    backbone:    'vendor/backbone/backbone',
  }
}); 
```

然后下面是我想使用这个插件的观点之一

```
define(['backbone', 'text!../../templates/movie.tpl'], function (Backbone, MovieTemplate)     {
var Movie = Backbone.View.extend({
    className: 'boxone',

    render: function () {
        console.log(this.model.toJSON());
        this.$el.html(_.template(MovieTemplate, this.model.toJSON())).fadeIn();
        this.addLazyLoad();
        return this;
    },

    addLazyLoad: function () {
        this.$el.find('img.poster').lazyload(); //<-- here I am using lazyload plugin
    }
});

return Movie;
}); 
```

但这给了我以下**错误**

```
Uncaught TypeError: Object [object Object] has no method 'lazyload' 
```

**我在哪里犯错**

**更新**

我将垫片更改为跟随

```
shim: {
'backbone': {
    deps: ['vendor/underscore/underscore', 'jquery'],
    exports: 'Backbone'
},
lazyload: { 
    deps: ['jquery'], 
    exports: 'jQuery.fn.lazyload' //<-- made change here
}
  }, 
```

并查看关注

```
define(['backbone', 'lazyload', 'text!../../templates/movie.tpl'], function (Backbone, LazyLoad, MovieTemplate) { //<-- Added lazyload here
var Movie = Backbone.View.extend({
    className: 'boxone',

    render: function () {
        this.$el.html(_.template(MovieTemplate, this.model.toJSON())).fadeIn();
        this.addLazyLoad();
        return this;
    },

    addLazyLoad: function () {;
        console.log(LazyLoad); //<-- this does show plugin code in console
        this.$el.find('img.poster').LazyLoad; //<-- now I am calling it like this
    }
});

return Movie;
}); 
```

但它仍然无法正常工作，这一次它没有显示任何错误。

**更新 2**

当我`console.log(Lazyload)`在视图的`addLazyLoad`函数中执行时，它会显示这样开始的函数

```
function (options) {
    var settings = {
        threshold    : 0,
        failurelimit : 0,
        event        : "scroll",
        effect       : "show",
        container    : window
    };

    if(options) {
        $.extend(settings, options);
    } 
```

而插件数据是这样开始的

```
(function($) {

// on the iPad, the offset top value is exactly off by the window scroll top
function getOffsetTop( element ) {

    var offsetTop = $(element).offset().top;

    if ( navigator.userAgent.match( /ipad/i ) ) {
        offsetTop -= $(window).scrollTop();
    }

    return offsetTop;

}

$.fn.lazyload = function(options) {
    var settings = {
        threshold    : 0,
        failurelimit : 0,
        event        : "scroll",
        effect       : "show",
        container    : window
    }; 
```

我猜这是奇怪的行为。这是问题还是它在我的代码中的其他地方？请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T09:38:03.750

`shim`您应该像使用骨干一样在配置中声明延迟加载插件。我假设lazyload没有commonjs-style export/define，你需要使用`shim`配置来声明它。

[看看这个问题添加jquery插件](https://stackoverflow.com/questions/10918063/how-to-make-a-jquery-plugin-loadable-with-requirejs)

**更新：**

[检查这个 jsfiddle](http://jsfiddle.net/n5ywL/2/)。它使用以下代码为我工作：

```
requirejs.config({
    shim: {
        'jquery': [],
        'jquery.lazyload': ["jquery"]
    },

paths: {
    'jquery': 'http://code.jquery.com/jquery-1.8.3',
    'jquery.lazyload': "https://raw.github.com/tuupola/jquery_lazyload/master/jquery.lazyload"
    }
});

require(["jquery.lazyload"], function() {
    console.log($("body").lazyload);
}); 
```

# php - 使用在另一个类中具有参数的类（PHP）

> ID：15050271
> 
> 赞同：0
> 
> 时间：2013-02-24T09:15:12.630
> 
> 标签：php, class

我正在尝试访问在另一个类中公开的函数的结果，但我不完全确定如何执行此操作。我试图访问的类需要参数，所以 class_name::function() 方法不起作用。我对使用课程仍然很陌生，并尝试学习它。

第一类：

```
class foo {
  private $var1;
  function __construct($param) {
    $this->var1 = $param
  }
  public function myFunc() {
    echo $this->var1;
  }
} 
```

2 级

```
class bar {
  public function secondFunc() {
    var_dump(**RESULT FROM foo->myFunc HERE);
  }
} 
```

这两个类是我实际在做的一个基本示例，但是从这里你应该对我的问题有一个大致的了解。
为了显示正确的结果，第一个类需要传递给它的参数，否则函数会失败。
我尝试使用 foo::bar()，但这不会将任何参数传递给第一类，因此它失败了。
那么，如何从 bar 的 secondFunc 中的 foo 访问 myFunc？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T09:23:56.437

您必须将 foo 的实例传递给 bar：

```
class Foo {

  private $var1;

  function __construct($param) {

    $this->var1 = $param
  }

  public function myFunc() {

    return $this->var1;
  }
}

class Bar {

  private $foo;

  function __construct(Foo $foo) {

    $this->foo = $foo
  }

  public function secondFunc() {

    var_dump($this->foo->myFunc());
  }
}

$bar = new Bar(new Foo('something'));
$bar->secondFunc(); 
```

那是你要的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T09:24:00.930

关于什么

```
class bar {
  public function secondFunc() {
    $foo = new foo($param);
    var_dump($foo->myFunc());
  }
} 
```

或者你需要一条线？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T09:24:36.227

您的示例不是很实用，但这是基本思想

```
public function secondFunc($dependency) {
    var_dump($dependency->myFunc());
} 
```

或者...

```
public function secondfunc() {
    $foo = new foo();
    var_dump($foo->myFunc();
} 
```

# java - 在多线程代码中 System.nanoTime() 会产生小的不准确性

> ID：15050272
> 
> 赞同：0
> 
> 时间：2013-02-24T09:15:17.030
> 
> 标签：java, multithreading, time

在多线程代码中，每当重新安排线程时，System.nanoTime() 是否会产生小的不准确性？如果是的话，这个错误会累积吗？在单线程代码中也是如此吗？

例如，当线程开始执行时，它在开始时使用 System.nanoTime() 获取时间，然后在退出线程块之前它使用相同的 System.nanoTime() 记录时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T09:23:42.560

“小错误”是什么意思？尽管`System.nanoTime()`为您提供纳秒级分辨率，但无法保证它测量的经过时间的准确性。据我所知，调用`System.nanoTime()`不会中断线程调度；方法调用和执行的成本很小，但仅此而已。（当然，如果你做的足够多的话，做很多这样的调用会积累大量的 CPU 时间。）

# jquery - 为什么这个链接——“点击”Greasemonkey 代码不起作用？

> ID：15050273
> 
> 赞同：2
> 
> 时间：2013-02-24T09:15:23.367
> 
> 标签：jquery, hyperlink, greasemonkey

我必须点击“Ik neem er een！” 与 Greasemonkey 链接。

链接（位于[http://www.ibood.com/nl/nl](http://www.ibood.com/nl/nl)）：

```
<div class="box_order_btn">
    <a class="btn_order nl" href="https://order.ibood.com/nl/nl/order/?id=33869&amp;h=e82f93d244de247a3b73477381eb8a40" title="Ik neem er een!">Ik neem er een!</a>
    <span class="sold_out">Uitverkocht!</span>
</div> 
```

我试过的 Greasemonkey 脚本：

```
// ==UserScript==
// @name           Click the link
// @include        https://*.ibood.com/*
// @version       1.0
// @history       1.0 Initial release       
// ==/UserScript==

var TargetLink          = $("a:contains('Ik neem er een!')")

if (TargetLink  &&  TargetLink.length) 
    window.location.href    = TargetLink[0].href 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T09:40:45.077

该脚本使用 jQuery（该`$(...)`位是一个强有力的指标），但在元数据部分没有使用`@require`jQuery。

利用：

```
// ==UserScript==
// @name     Ibood, click the link
// @include  https://*.ibood.com/*
// @include  http://*.ibood.com/*
// @version  1.0
// @history  1.0 Initial release
// @require  http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @grant    GM_addStyle
// ==/UserScript==
/*- The @grant directive is needed to work around a design change
    introduced in GM 1.0\.   It restores the sandbox.
*/

var TargetLink          = $("a:contains('Ik neem er een!')")
if (TargetLink.length)
    window.location.assign (TargetLink[0].href); 
```

# blogger - 如何在 Blogger 上添加浮动社交媒体按钮

> ID：15050275
> 
> 赞同：0
> 
> 时间：2013-02-24T09:15:48.620
> 
> 标签：blogger, sharing

这是一篇关于如何在 Blogger 平台上添加浮动社交媒体按钮的 wiki/文章。

前提：**向下滚动内容时将浮动到顶部的社交媒体栏**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T09:15:48.620

> 首先，为了防止版权问题等，我想承认 Way2Blogging.org 是这个令人惊叹的分享栏的原始来源，我做了一些调整。原始文章可以在 [这里找到：](http://www.way2blogging.org/2012/06/new-floating-social-sharing-bar-widget-blogger-blogspot.html)。

**浮动社交媒体分享按钮**

这是一个简单的教程，介绍如何通过 2 个简单的步骤在您的 Blogger 上放置一个浮动的社交媒体共享按钮。

注意：此小工具需要直接放入您的 Blogger HTML 中。因此，您必须在 Blogger **Template**中打开**Edit HTML**，然后单击**Expand Template Widgets**。

 ******首先，输入 Javascript/jQuery 代码。**

在展开的 HTML 中，搜索`</head>`标签并在其上方/之前直接插入这些代码行：

```
<b:if cond='data:blog.pageType == &quot;item&quot;'>
<script src='http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js' type='text/javascript'/>
<style type='text/css'>
/<![CDATA[/
#w2bSocialFloat {clear:both;padding: 6px 0;display:block;background:#E9E9E9;}
#w2bSocialFloat td{padding:4px;margin:0;border:none;}
#w2bSocialFloat td iframe{max-width:82px;width:82px !important;}
#w2bSocialFloat.w2bFloatSocial{position: fixed;top:0;z-index:9999999;border-bottom:1px solid #ccc;-webkit-box-shadow:0 1px 1px rgba(0,0,0,0.15);-moz-box-shadow:0 1px 1px rgba(0,0,0,0.15);box-shadow:0 1px 1px rgba(0,0,0,0.15);}
/]]>/
</style>
<script type='text/javascript'>
/<![CDATA[/
// Set the Top Offset
$theOffset = 0;
jQuery(document).ready(function(b){var a=b("#w2bSocialFloat");a.wrap('<div id="w2bSocialPlaceholder"></div>').closest("#w2bSocialPlaceholder").height(a.outerHeight());a.width(a.outerWidth());e=a.offset().top-$theOffset;b("#w2bSocialFloat iframe[src*=plusone]").closest("div").css("max-width","82px");b(window).scroll(function(){d=b(this).scrollTop();d>=e?a.addClass("w2bFloatSocial"):a.removeClass("w2bFloatSocial");f=b(".post");if(f.length!=0){c=f.outerHeight()+f.offset().top;d>=c?a.stop().animate({top:"-150px"}):a.stop().animate({top:$theOffset+"px"})}else d>=e?a.css("top",$theOffset+"px"):a.css("top","0")})});
/]]>/
</script>
<script src='http://widgets.way2blogging.org/blogger-widgets/w2b-blogger-pinit.js' type='text/javascript'/>
<script type='text/javascript'>
/<![CDATA[/
// Twitter
(function(a,b,c){var d=a.getElementsByTagName(b)[0];if(!a.getElementById(c)){a=a.createElement(b);a.id=c;a.src="//platform.twitter.com/widgets.js";d.parentNode.insertBefore(a,d)}})(document,"script","twitter-wjs");
// Google + (plus)
(function(){var a=document.createElement("script");a.type="text/javascript";a.async=true;a.src="https://apis.google.com/js/plusone.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)})();
// Stumbleupon
(function(){var a=document.createElement("script");a.type="text/javascript";a.async=true;a.src="https://platform.stumbleupon.com/1/widgets.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)})();
// Digg
(function(){var a=document.createElement("SCRIPT"),b=document.getElementsByTagName("SCRIPT")[0];a.type="text/javascript";a.async=true;a.src="http://widgets.digg.com/buttons.js";b.parentNode.insertBefore(a,b)})(); /]]>/
</script>
</b:if> 
```

** 更改背景：#E9E9E9 使用您选择的颜色以最适合您的博客颜色。

**二、输入社交按钮代码：**

搜索`<data:post.body/>`标记并将这些代码行粘贴到上面/之前：

```
<b:if cond='data:blog.pageType == &quot;item&quot;'>
<div id="w2bSocialFloat" class="w2bSocialFloat">
<table  width="100%" class="w2bSocialFloat">
<tr>
<td>
<a href="https://twitter.com/share" class="twitter-share-button" expr:data-url="data:post.url" expr:data-text="data:post.title">Tweet</a>
</td>
<td>
<iframe expr:src="&quot;//www.facebook.com/plugins/like.php?href=&quot; + data:post.url + &quot;&amp;send=false&amp;layout=button_count&amp;width=80&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;font&amp;height=21&quot;" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:80px; height:21px;" allowTransparency="true"></iframe>
</td>
<td>
<div expr:id="&quot;w2bPinit-&quot; + data:post.id" style="display: none;visibility: hidden;height: 0;width:0;overflow: hidden;" class="w2bPinitButton">
<data:post.body/>
<script type="text/javascript">
w2bPinItButton({
url:"<data:post.url/>",
thumb: "<data:post.thumbnailUrl/>",
id: "<data:post.id/>",
defaultThumb: "http://4.bp.blogspot.com/-YZe-IcKvGRA/T8op1FIjwYI/AAAAAAAABg4/j-38UjGnQ-Q/s1600/w2b-no-thumbnail.jpg",
pincount: "horizontal"
});
</script>
</div>
</td>
<td>
<div class="g-plusone" data-size="medium" expr:data-href="data:post.url"></div>
</td>
<td>
<su:badge layout="1" expr:location="data:post.url"></su:badge>
</td>
<td>
<a class="DiggThisButton DiggCompact"></a>
</td>
</tr>
</table>
</div>
</b:if> 
```

** 如果您发现多个`<data:post.body/>`标签，通常将社交按钮代码粘贴到第一个标签上方即可。

**调整**

1\. 如果要删除 Digg 和 StumbleUpon 按钮，则必须从 Javascript/jQuery 代码中删除这些代码行：

```
// Stumbleupon
(function(){var a=document.createElement("script");a.type="text/javascript";a.async=true;a.src="https://platform.stumbleupon.com/1/widgets.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)})();
// Digg
(function(){var a=document.createElement("SCRIPT"),b=document.getElementsByTagName("SCRIPT")[0];a.type="text/javascript";a.async=true;a.src="http://widgets.digg.com/buttons.js";b.parentNode.insertBefore(a,b)})(); 
```

此外，从社交按钮代码中删除这些行：

```
<td>
<su:badge layout="1" expr:location="data:post.url"></su:badge>
</td>
<td>
<a class="DiggThisButton DiggCompact"></a>
</td> 
```

2\. 如果您想在共享栏中放置一个返回顶部按钮，请按照以下说明操作：

2a。搜索`</body>`标签并在其之前/上方粘贴这些行：

```
<li class='Back to top' style='list-style: none; width: 0px;' tabindex='0'> <script src='http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js' type='text/javascript'/><script type='text/javascript'>$(function(){$(window).scroll(function(){if($(this).scrollTop()!=0){$(&quot;#bd-top&quot;).fadeIn()}else{$(&quot;#bd-top&quot;).fadeOut()}});$(&quot;#bd-top&quot;).click(function(){$(&quot;body,html&quot;).animate({scrollTop:0},800);return false})});</script></li> 
```

2b。然后，将下面的代码插入`<td>`社交按钮代码中的 [ 或 ] 列之一（看起来像这样）：

```
<td>
<a class='backtop' href='#' id='bd-top'>&#8593;</a>
</td> 
```

而已。我们完成了！让我知道任何其他技巧来美化这个 Blogger 小工具。:-)****

# parsing - 将算术表达式的模糊语法转换为明确语法

> ID：15050287
> 
> 赞同：1
> 
> 时间：2013-02-24T09:16:32.477
> 
> 标签：parsing, grammar, lexical-analysis, ambiguous-grammar, earley-parser

我正在尝试为算术表达式提出一个明确的语法，以使 Earley 解析器更快，但我似乎遇到了麻烦。这是给定的模棱两可的语法

```
S -> E | S,S
E -> E+E | E-E | E*E | (E) | -E | V
V -> a | b | c 
```

这是我试图使它明确

```
S -> S+E | S-E | E | (S+E) | (S-E) | (E)
E -> E*T | E
T -> -V | V
V -> a | b | c 
```

它解析一切都很好，但与使用模棱两可的相比没有任何显着的加速。

# php - 本地/生产地穴返回不同的哈希

> ID：15050288
> 
> 赞同：0
> 
> 时间：2013-02-24T09:16:32.237
> 
> 标签：php

PHP`crypt`函数在本地和生产服务器上返回不同的哈希值。在 localhost 上，crypt hash 验证工作正常，但在生产上却不行。

```
Local: PHP 5.4.4
Procution: PHP 5.3.10-1ubuntu3.5 
```

* * *

代码：

```
echo crypt('123123123'); 
```

本地示例响应：

```
$1$7ymnm8q/$M6HLj2JEvzWGElqlwjAKm0 
```

生产示例响应：

```
$6$sbttg2v6$2YAU3dNKR/.MRGmbBV4sR8vEhr/L8aOMTej1u3gArhgIiCiJ5IFJ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T09:22:22.450

引用[PHP 文档`crypt()`](http://php.net/manual/en/function.crypt.php)：

> crypt() 将使用基于标准 Unix DES 的算法或系统上可能可用的替代算法返回一个散列字符串。

所以`cyrpt()` 不受特定算法的约束，而是使用系统支持的内容。

您可以使用以下常量来查看，您正在运行的系统是否支持这些常量`crypt()`：

*   `CRYPT_STD_DES`
*   `CRYPT_EXT_DES`
*   `CRYPT_MD5`
*   `CRYPT_BLOWFISH`
*   `CRYPT_SHA256`
*   `CRYPT_SHA512`

如果您查看文档中的示例，您会看到，您的本地代码使用 MD5 进行加密，而生产服务器使用 SHA-512。

此外，您没有指定特定的盐，因此 PHP 会为您生成一个，在每次调用`crypt()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T09:24:53.350

系统使用不同的默认散列算法：`$1$`代表 MD5，`$6$`代表 SHA-512

`salt`您应该使用参数明确指定算法：

```
crypt('123123123', '$6$somerandomstring'); 
```

请参阅[`crypt()`文档](http://php.net/crypt)：

> **salt**一个可选的盐字符串，作为散列的基础。如果未提供，则行为由算法实现定义，并可能导致意外结果。

# c++ - 将输入字符串转换为 char*

> ID：15050293
> 
> 赞同：0
> 
> 时间：2013-02-24T09:17:07.923
> 
> 标签：c++, access-violation, cin

问题是我的控制台应用程序从用户那里得到一个字符串：

```
string input;
cin >> input; 
```

现在我想将此字符串转换为 char*，然后将其传递给函数：

```
char *argument = NULL;
argument = (char *) input.c_str(); 
```

我的函数声明为：

```
int function (char *input, char *output) 
```

调试此代码时出现访问冲突，因此我尝试定义所有内容：

```
strcpy(argument, input.c_str()); 
```

但我又遇到了访问冲突和错误的 Ptr ！！任何线索？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T09:24:21.057

您的问题是 c_str() 返回 a `const char*`，而不是 a `char*`。不允许修改 c_str() 返回的字符序列中的任何字符。

所以你需要：

```
const char *argument = input.c_str(); 
```

如果您不进行强制转换，您的编译器会发现此错误：

```
argument = (char *) input.c_str(); 
```

没有演员表：

```
argument = input.c_str(); 
```

它不会编译（或者它可能已经编译，但附加了一个大而胖的警告）。

此外，如果您稍后修改`input`，您从 c_str() 获得的指针不再有效，访问它也会导致未定义的行为。

如果你想要一个`char*`版本的字符串，那么你应该复制它：

```
char *argument = new char[input.length() + 1];
std::strcpy(argument, input.c_str()); 
```

`argument`不再需要时不要忘记释放它：

```
delete[] argument; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T09:19:30.687

```
argument = (char *) input.c_str(); 
           ^^^^^^^^ you don't need this. further c_str() returns a "const pointer to char"
                    not "pointer to char". 

int function (char *input, char *output)
             ^^^^^^^^^^^^|________ It should be "string input" or "string &input" 
```

# javascript - 使用 Jade 模板访问传入的变量到 mixin

> ID：15050299
> 
> 赞同：0
> 
> 时间：2013-02-24T09:18:05.513
> 
> 标签：javascript, pug, express

我有一个表单助手 mixin，我将一个变量传递给：

```
mixin form-error(error)
  if (typeof errors !== 'undefined' && errors.#{error})
    .alert.alert-error.form-error
      =errors.#{error}.msg 
```

调用它并向它传递一个字符串：

`mixin form_error('name')`

但我得到：`500 SyntaxError: Unexpected token ILLEGAL`

`errors.#{error}`基本上我把所有东西都拿出来了，它很沮丧`=errors.#{error}.msg`

所以我不能`#{error}`在 a 之后使用`.`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T20:27:00.863

你是这个意思吗？

```
mixin form-error(error)
 if (typeof errors !== 'undefined' && errors[error])
  .alert.alert-error.form-error
   =errors[error].msg 
```

# c++ - ... 的第一次机会异常：使用 Visual Studio 2010 调试时访问冲突读取位置 ...

> ID：15050300
> 
> 赞同：3
> 
> 时间：2013-02-24T09:18:09.160
> 
> 标签：c++, visual-studio-2010, thread-safety, access-violation

我非常努力地从遗留代码访问冲突中捕捉到：

```
First-chance exception at 0x57e77e1c in YouTubeLocal.exe: 0xC0000005: Access violation reading location 0x0000000c. 
```

我的堆栈如下所示：

```
 Qt5Guid.dll!57e77e1c()  
    [Frames below may be incorrect and/or missing, no symbols loaded for Qt5Guid.dll]   
    Qt5Guid.dll!57e75604()  
    Qt5Guid.dll!57ed520b()  
    Qt5Guid.dll!57dcf18b()  
>   msvcr100d.dll!_unlock(int locknum=0x00000004)  Line 375 C
    msvcr100d.dll!_heap_alloc_dbg_impl(unsigned int nSize=0x00000040, int nBlockUse=0x00000001, const char * szFileName=0x00000000, int nLine=0x00000000, int * errno_tmp=0x0015cb70)  Line 507 + 0x7 bytes C++
    msvcr100d.dll!_heap_alloc_dbg_impl(unsigned int nSize=0x00000040, int nBlockUse=0x00000001, const char * szFileName=0x00000000, int nLine=0x00000000, int * errno_tmp=0x0015cb70)  Line 504 + 0xc bytes C++
    msvcr100d.dll!_nh_malloc_dbg_impl(unsigned int nSize=0x00000040, int nhFlag=0x00000000, int nBlockUse=0x00000001, const char * szFileName=0x00000000, int nLine=0x00000000, int * errno_tmp=0x0015cb70)  Line 239 + 0x19 bytes  C++
    msvcr100d.dll!_nh_malloc_dbg(unsigned int nSize=0x00000002, int nhFlag=0x0015cbdc, int nBlockUse=0x0015cbc8, const char * szFileName=0x0015cbb0, int nLine=0x0015cbc8)  Line 302 + 0x1d bytes   C++
    Qt5Cored.dll!533b0628()     
    Qt5Cored.dll!53388046()     
    Qt5Cored.dll!5335f56b()     
    Qt5Cored.dll!535e74c4()     
    Qt5Cored.dll!536f7198()     
    Qt5Widgetsd.dll!53aa4aea()  
    kernel32.dll!778bc3d4()     
    msvcr100d.dll!_unlock(int locknum=0x00000004)  Line 375 C
    msvcr100d.dll!_free_dbg(void * pUserData=0x53a4b300, int nBlockUse=0x019757a0)  Line 1270 + 0x7 bytes   C++
    msvcr100d.dll!_free_dbg(void * pUserData=0x53a4b300, int nBlockUse=0x019757a0)  Line 1267 + 0xc bytes   C++
    01b4bd40()  
    kernel32.dll!778bc3d4()     
    msvcr100d.dll!_free_base(void * pBlock=0x0015d060)  Line 50 + 0x13 bytes    C
    018a4a84()  
    kernel32.dll!778bc3d4()     
    msvcr100d.dll!_free_base(void * pBlock=0x57c49736)  Line 50 + 0x13 bytes    C
    0015d140()  
    feeefeee() 
```

调试器在此文件 (mlock.c) 中停止

```
/***
* _unlock - Release multi-thread lock
*
*Purpose:
*       Note that it is legal for a thread to aquire _EXIT_LOCK1
*       multiple times.
*
*Entry:
*       locknum = number of the lock to release
*
*Exit:
*
*Exceptions:
*
*******************************************************************************/

void __cdecl _unlock (
        int locknum
        )
{
        /*
         * leave the critical section.
         */
        LeaveCriticalSection( _locktable[locknum].lock );
} 
```

我找不到发生访问冲突的行。如何捕获导致异常的行？

**更新**：
这是我的解决方案： [Microsoft Application Verifier](http://www.microsoft.com/en-us/download/details.aspx?id=20028)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T18:38:31.627

尝试添加一些宏，在释放内存后将指针设置为 NULL。还可以尝试在使用此类指针之前添加一些断言或类似内容。有了它，您应该能够很快找到错误。

# node.js - Express js 设置到哪里去了？

> ID：15050304
> 
> 赞同：1
> 
> 时间：2013-02-24T09:18:28.797
> 
> 标签：node.js, express

在 express 文档中，有一个部分称为`settings`： [http ://expressjs.com/api.html#app-settings](http://expressjs.com/api.html#app-settings)

但我不知道应该去哪里（到某个功能？作为使用中间件中的字典？还是其他地方？）

PS*我将如何解决这些问题-我需要查看源代码吗？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T09:51:31.257

管理配置的方法有很多，但这是我写的一篇博客文章：http: [//www.chovy.com/node-js/managing-config-variables-inside-a-node-js-application/](http://www.chovy.com/node-js/managing-config-variables-inside-a-node-js-application/)

基本前提是每个环境都有一个文件（即 config.development.js、config.production.js），其他所有环境都有一个名为 config.global.js 的文件，开发和生产文件只会覆盖您在全局中设置的任何内容根据该环境的需要。

这是基本的 config/index.js 文件，这将加载 config.test.js 文件，假设您的 NODE_ENV=test（如果 NODE_ENV 未定义，我们将默认为“开发”）：

```
var env = process.env.NODE_ENV || 'development'
  , cfg = require('./config.'+env);

module.exports = cfg; 
```

接下来是 config.test.js，它将包含 config.global.js，然后根据需要覆盖它的 json 对象：

config.test.js：

```
var config = require('./config.global');

config.env = 'test';
config.hostname = 'test.example';
config.mongo.db = 'example_test';

module.exports = config; 
```

以及定义所有默认值的 config.global.js：

```
var config = module.exports = {};

config.env = 'development';
config.hostname = 'dev.example.com';

//mongo database
config.mongo = {};
config.mongo.uri = process.env.MONGO_URI || 'localhost';
config.mongo.db = 'example_dev'; 
```

现在我们将它们包装在一起并在我们的代码中使用它……例如在模型中，您可以在 ./models/user.js 中执行类似的操作：

```
var mongoose = require('mongoose')
, cfg = require('../config')
, db = mongoose.createConnection(cfg.mongo.uri, cfg.mongo.db); 
```

这就是它的全部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T09:24:44.320

您通常将它们放入特定的配置块中：

```
app.configure(function () {
  // ...
}); 
```

您甚至可以使用命名块来进行不同的配置。

让 express 为您创建一个应用程序并查看它。为此，只需运行

```
$ express --help 
```

在命令提示符下，看看它提供了什么。

PS：这回答了你的两个问题;-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T15:07:35.233

你必须使用[`app.set`](http://expressjs.com/api.html#app.set)：

```
app.set('name of setting', 'value'); 
```

# dynamics-crm-4 - 如何使用工作流设置选项列表值

> ID：15050307
> 
> 赞同：1
> 
> 时间：2013-02-24T09:18:56.460
> 
> 标签：dynamics-crm-4

我正在使用导入功能（系统->数据管理->导入）创建潜在客户记录，一旦创建潜在客户记录，我已经创建了一个工作流，必须更新作为下拉列表的联系人记录字段“Salutation”。

当我尝试这样做时，寻找潜在客户似乎没有任何价值。不知道如何设置选项列表值以使用工作流更新记录。请看下面的截图

![在此处输入图像描述](../Images/40fac8c21607837acc047bef72365ba8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:40:51.707

这似乎很奇怪，当使用工作流更新记录时，您应该获得所有可用选项。选择列表是否填充了值？称呼下拉菜单不是 CRM 4.0 中的标准字段，它是一个自由文本字段 OOB。

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:04:51.940

我不认为选择列表字段值可以由另一个实体的字段在记录上动态设置。我做了什么我检查了多个案例并手动更新该字段以实现此目的。即如果lead(car1) == 2 根据您的选择更新工作流程上的选择列表值。但这是 q 脏修复，因为条件更多并且难以多次使用来更新记录。

# php - 在php中将下划线转换为camelcaps

> ID：15050310
> 
> 赞同：0
> 
> 时间：2013-02-24T09:19:22.987
> 
> 标签：php, preg-replace

我想在 php 中将下划线字符串转换为驼峰式字符串。如何做到这一点`preg_replace`？

例如：`offer_list`对`offerList`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T09:26:36.793

可以在您的正则表达式上使用 /e 修饰符来完成，如下所示：

```
preg_replace("/_([a-zA-Z])/e", 'strtoupper("$1")', "camel_case_word") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T10:00:05.410

没有怀孕：

```
 /**
 * Converts underscore string into camel
 * @param   string    $str
 * @return  string 
 */
public static function underToCamel($str){
    return   \lcfirst(str_replace(' ', "", ucwords(strtr($str, '_-', ' '))));
} 
```

# java - 未知符号 ActionListener

> ID：15050311
> 
> 赞同：-2
> 
> 时间：2013-02-24T09:19:24.230
> 
> 标签：java, swing, awt, actionlistener

我想编译这个类：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
public class Main implements ActionListener {
    private static JFrame frm = new JFrame();
    private static JLabel username = new JLabel("User:");
    private static JLabel password = new JLabel("Pass:");
    private static JTextField username_field = new JTextField();
    private static JPasswordField password_field = new JPasswordField();
    private static ButtonGroup bg = new ButtonGroup();
    private static JCheckBox sp = new JCheckBox ("Singleplayer");
    private static JCheckBox mp = new JCheckBox("Multiplayer");
    private static JButton play = new JButton("Play");
    private static JPanel p = new JPanel();

    public static void main(String[] args) {
        new Main().initFrame();
    }
    public void initFrame() {
        //Init Frame Stuff
    }
    public void actionPerformed(ActionEvent evt) {
        if (evt.getActionCommand().equals("play")) {
            //Other Stuff
        }
    }
} 
```

正如你在上面看到的，我已经导入了 ActionListener，但是如果我编译代码，我会得到一个未知符号错误：

```
.\GamePanel.java:3: error: cannot find symbol
 public class GamePanel extends JPanel implements ActionListener {
 symbol: class ActionListener
 1 error 
```

为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T09:26:17.273

对于具体的错误，你必须导入相关的包。添加

```
import java.awt.event.ActionListener; 
```

在文件`GamePanel.java`中，就在类声明之前，即在`public class GamePanel extends JPanel implements ActionListener {`

# php - 如何从具有标题或元标记的文本文件中回显一行？

> ID：15050314
> 
> 赞同：0
> 
> 时间：2013-02-24T09:20:03.763
> 
> 标签：php

我有一个如下所示的文本文件：

```
 http://tisue.net/jandek/live.html
<title>Jandek: Live</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

http://news.nationalgeographic.com/news/2004/06/0629_040629_camelspider.html
<title>Camel Spiders: Behind an E-Mail Sensation From Iraq</title>
<meta name="description" content="A photo of a U.S. soldier in Iraq holding massive,   hairy, supposedly flesh-eating spiders has been burning up e-mail in-boxes around the  world. The arachnids (called camel spiders or wind scorpions) are real, but scientists say many claims about them are anything but."> 
```

还有几千个这样的。

我正在使用`fopen()`and`fgets()`来读取每一行并回显它。问题是`<title>`and`<meta />`没有被回显；行返回空白。我怎样才能让 php 将它们视为纯文本并回显它们？

编辑：这是我正在使用的代码：

```
 $handle = fopen($myFile, 'r');

 while(!feof($handle)){

   $data = fgets($handle);
   echo $data; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T09:30:56.660

您需要查看页面的源代码才能看到`<title>`和`<meta>`标签。这可以通过右键单击页面并`view-source`在大多数浏览器中单击来实现。

[或者，您可以使用htmlspecialchars](http://php.net/manual/en/function.htmlspecialchars.php)转换标签，以便它们在 html 中可读

```
$handle = fopen($myFile, 'r');

while(!feof($handle)){

    $data = fgets($handle);
    echo htmlspecialchars($data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T09:38:15.343

您首先需要检查页面是否有您想要退出的元标记。它可以用 get_meta_tags() 来完成，更多信息在这里[http://php.net/manual/en/function.get-meta-tags.php](http://php.net/manual/en/function.get-meta-tags.php)

对于读取每一行，请使用 file() 逐行读取。

```
<?php
$lines = file("fileurl");
foreach($lines as $line)
{
    echo($line);
}
?> 
```

# c++ - 在 C++ 中定义类和指针

> ID：15050315
> 
> 赞同：0
> 
> 时间：2013-02-24T09:20:04.120
> 
> 标签：c++

我有这个主要的：（部分代码）。

```
int main ()
{
Person* pPerson;
ifstream file ("data.dat", ios::binary);
pPerson = personFactory::getPersonFromFile(file);
...
} 
```

我可以定义...的调用吗？（课程的一部分）。

```
class personFactory{
public:
...
Person* getPersonFromFile (ifstream& inFile);
...
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T09:23:18.917

我想如果你的电话看起来像

```
personFactory::getPersonFromFile(file) 
```

你需要让它静态

```
 static Person* getPersonFromFile (ifstream& inFile); 
```

# wpf - 新按钮样式图像未显示

> ID：15050316
> 
> 赞同：3
> 
> 时间：2013-02-24T09:20:12.123
> 
> 标签：wpf, binding, styles, styling

我正在为按钮制作样式以自定义方式出现![在此处输入图像描述](../Images/90ddf7a8311e6b80f23d76168a74aef1.png)

思路是在 Tag 属性中写入 Image 源，在 Content 属性中写入 Text

所以风格是这样的

```
<Style x:Key="NormalButtonStyle" TargetType="Button">
    <Setter Property="Background" Value="Black"/>
    <Setter Property="Foreground" Value="White"/>
    <Setter Property="Padding" Value="12,4,12,4"/>
    <Setter Property="HorizontalAlignment" Value="Left"/>
    <Setter Property="VerticalAlignment" Value="Center"/>
    <Setter Property="FontWeight" Value="SemiBold"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="Button">
                <Grid Background="{TemplateBinding Background}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Image Source="{TemplateBinding Tag}" Height="{TemplateBinding Height}" Width="{TemplateBinding Height}"/>
                    <ContentPresenter x:Name="ContentPresenter" Grid.Column="1" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsMouseOver" Value="true">
                        <Setter Property="Foreground" Value="Red" />
                    </Trigger>

                    <Trigger Property="IsPressed" Value="true">

                        <Setter Property="Foreground" Value="Gray"/>

                    </Trigger>

                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

图像不显示，只有文本出现

我在 MainWindow 中调用这样的按钮

```
<Button Style="{DynamicResource NormalButtonStyle}" Tag="/iPARK;component/Resources/Sign%20out_icon.png" HorizontalAlignment="Right" Margin="20" Click="Signout_Click"/> 
```

如果我像这样直接在样式文件中设置图像，那么它会显示，但它不能重复用于其他图像

```
<Image Source="/iPARK;component/Resources/Sign%20out_icon.png" Height="{TemplateBinding Height}" Width="{TemplateBinding Height}"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T11:52:40.453

当您将图像 URI 放入`Tag`属性时，它不会自动转换为`ImageSource`（就像对`Image.Source`属性所做的那样）。你需要明确地这样做：

```
<Button ...>
    <Button.Tag>
        <BitmapImage UriSource="/iPARK;component/Resources/Sign%20out_icon.png"/>
    </Button.Tag>
</Button> 
```

# ruby-on-rails - heroku 应用程序崩溃但在本地运行良好

> ID：15050319
> 
> 赞同：0
> 
> 时间：2013-02-24T09:20:39.610
> 
> 标签：ruby-on-rails, git, heroku

我的应用程序在本地运行良好，当我输入 git push heroku master 时我没有看到任何错误。但是，当我输入 heroku open 并访问我看到的网址时：

应用程序错误

应用程序发生错误，无法提供您的页面。请稍后重试。如果您是应用程序所有者，请查看您的日志以获取详细信息。

在heroku日志中，我得到以下信息：

```
2013-02-24T08:57:38+00:00 heroku[web.1]: Process exited with status 1
2013-02-24T08:57:38+00:00 heroku[web.1]: State changed from starting to crashed
2013-02-24T08:59:21+00:00 heroku[web.1]: State changed from crashed to starting
2013-02-24T08:59:23+00:00 heroku[web.1]: Starting process with command `bundle exec rails server -p 15485`
2013-02-24T08:59:30+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2013-02-24T08:59:30+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2013-02-24T08:59:33+00:00 app[web.1]: => Booting WEBrick
2013-02-24T08:59:33+00:00 app[web.1]: => Rails 3.2.11 application starting in production on http://0.0.0.0:15485
2013-02-24T08:59:33+00:00 app[web.1]: => Ctrl-C to shutdown server
2013-02-24T08:59:33+00:00 app[web.1]: Exiting
2013-02-24T08:59:33+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:317:in `rescue in depend_on': No such file to load -- spec_helper (LoadError)
2013-02-24T09:04:16+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=whispering-journey-9991.herokuapp.com fwd="108.46.218.98" dyno= queue= wait= connect= service= status=503 bytes= 
```

有一个加载错误和一些我没有设法修复的弃用警告。我刚刚更新到 rails 3.2.11 不确定它是否相关。

宝石文件：

```
source 'https://rubygems.org'

gem 'rails', '3.2.11'
gem 'bootstrap-sass', '2.0.4'
gem 'bcrypt-ruby', '3.0.1'
gem 'faker', '1.0.1'
gem 'will_paginate', '3.0.3'
gem 'bootstrap-will_paginate', '0.0.6'
gem 'jquery-rails', '2.0.2'
gem 'pg', '0.12.2'
gem 'rails_autolink', '~> 1.0.9'
gem 'rinku', '~> 1.5.0', :require => 'rails_rinku'
gem 'auto_html', '1.6.0'
gem 'acts_as_votable', '~> 0.4.0'
gem 'thumbs_up', '~> 0.6.2'

group :development, :test do
  gem 'rspec-rails', '2.11.0'
end

group :development do
  gem 'annotate', '2.5.0'
end

group :assets do
  gem 'sass-rails',   '3.2.5'
  gem 'coffee-rails', '3.2.2'
  gem 'uglifier', '1.2.3'
end

group :test do
  gem 'factory_girl_rails', '4.1.0'
  gem 'capybara', '1.1.2'
  gem 'cucumber-rails', '1.2.1', :require => false
  gem 'database_cleaner', '0.7.0'
end 
```

这是我第一次在这台（新）计算机上推送 heroku，不确定这是否会导致问题。

输入 git push heroku 时，我也收到此错误：

```
 Running: rake assets:precompile
   rake aborted!
   could not connect to server: Connection refused
   Is the server running on host "127.0.0.1" and accepting
   TCP/IP connections on port 5432? 
```

现在调查：[https ://devcenter.heroku.com/articles/rails3x-asset-pipeline-cedar](https://devcenter.heroku.com/articles/rails3x-asset-pipeline-cedar)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T16:06:17.920

看起来您正在使用默认的 WEBrick 服务器。Heroku 建议使用“瘦”服务器。尝试在 Gemfile 中添加类似的内容：

```
gem 'thin', :group => :production 
```

然后运行 ​​bundle install，使用 Git 提交文件并再次推送到您的 heroku 应用程序。如果您还没有这样做，则需要通过在命令行中尝试以下命令来预编译资产：

```
RAILS_ENV=production bundle exec rake assets:precompile 
```

然后，不要忘记运行你的 git 命令：

```
git add .
git commit -m "added precompiled assets"
git push heroku master 
```

# c# - 用于存储变量 X 天历史记录的数据结构

> ID：15050320
> 
> 赞同：1
> 
> 时间：2013-02-24T09:21:09.640
> 
> 标签：c#

我有一个具有当前值的变量，但是当我更改该值时，它首先需要将过去的值存储在某个数据结构中，该数据结构将向我显示过去 X 多个值。

这是对过去的值进行各种计算，例如最近值的平均值等。

我唯一的想法是为此使用队列，因为我只需要过去的 X 值，所以我实现了一个 FixedSizedQueue ，它会自动将旧值出列。

从那时起，我发现至少在队列的默认实现中，我无法真正访问其中的随机值。但另外，如果有人能够完成这项工作，他们会很慢并且需要遍历所有值。

所以我想知道有没有办法有效地做到这一点？我能想到的唯一另一种方法是拥有一个数组并简单地实现一些推送功能，将所有元素移动一个索引位置。但这似乎过于浪费。如果只有这两个选项，如果每次更改数据结构中的每个值都需要访问 20 次，并且大小将存储 50 个值，那么哪一个会更好？

这是一个性能非常重要的地方，因为每个被“记录”的变量在迭代我拥有的数据时都会改变至少一百万次，所以不用担心我会过早优化。谢谢你，我很感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T09:24:47.750

您正在寻找一个[环形缓冲区/循环缓冲区](http://en.m.wikipedia.org/wiki/Circular_buffer)。

[你可以在这里](http://florianreischl.blogspot.de/2010/01/generic-c-ringbuffer.html?m=1)找到 ac# 的实现。

# php - Codeigniter 上的上传路径返回“上传路径似乎无效”

> ID：15050322
> 
> 赞同：4
> 
> 时间：2013-02-24T09:21:35.980
> 
> 标签：php, codeigniter

现在我已经尝试了我读过的大部分修复，其中大多数提到了 APPPATH、base_url()、真实路径等，但我真的不知道为什么它们都不起作用，什么起作用我是我使用了实际路径，而不是 url，而是带有 C:\xampp\htdocs 的路径。等等等等等等。现在我已经阅读了一个线程，即 url 和目录不是一回事。 .并且upload_path只接受目录路径，我的意思是服务器上上传文件夹的实际位置而不是URL ..现在我的问题是APPPATH为什么不起作用。据我所知，它是实际的目录路径。但是当我试图显示它是否只返回“../applicaiton/”时，在上传的 $config['upload_path'] 上使用的最佳路径是什么。

编辑：

我在一个单独的文件中有这个... upload.php

```
<?php 
$config['upload_path'] ='./uploads/';
$config['allowed_types'] = 'gif|jpg|png';
$config['max_size'] = '5000';
$config['max_width'] = '1600';
$config['max_height'] = '1200'; 
```

这是我的控制器

```
 if($this->upload->do_upload('image'))
     {
         //Did something here
     }
     else
     {
        //Did something for errors like display_errors()
     } 
```

最终结果是它显示“上传路径似乎无效”，我也尝试过这些代码行

试验一：

```
$config['upload_path'] ='./uploads/'; 
```

试验二：

```
$config['upload_path'] ='uploads/'; 
```

试验 3：

```
$config['upload_path'] ='/admin/assets/uploads/'; 
```

试验四：

```
$config['upload_path'] ='./admin/assets/uploads/'; 
```

试验 5：

```
$config['upload_path'] ='admin/assets/uploads/'; 
```

唯一有效的是这个

```
 $config['upload_path'] ='C:\xampp\htdocs\practice\admin.abcgencon\admin\assets\uploads''; 
```

并且使用最后一部分作为路径有点混乱，所以我也尝试过`APPPATH`，但它也不起作用，它也显示“../application”..

正如@cryptic 所说，我已经发布了这个代码片段。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-24T11:47:03.330

`realpath`问题，你试过`APPPATH`分开吗？

在 Codeigniter`APPPATH`中指向应用程序文件夹。

**示例**：（将您的文件夹放在应用程序文件夹之外，只是说如果您没有这样做）假设我们要放置名为**images**的文件的文件夹。

所以你需要做的是结合`realpath(`) 和`APPPATH`

```
$image_path = realpath(APPPATH . '../images'); 
```

并将其传递给您的配置

```
$config['upload_path'] = $image_path; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-12T10:29:33.277

创建您的文件上传目录，例如在应用程序目录之外或 CI 的根目录中上传，并设置上传路径如下：-

```
$config['upload_path'] = realpath(FCPATH.'uploads'); 
```

> FCPATH：index.php 所在的前端控制器的路径（CI 的根目录）

上面的代码在服务器和本地都运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T11:23:14.207

这就是在 CI 中完成文件上传的方式

```
$cat_image_name = $_FILES["cat_image"]["name"] ; 

//file uploading params
$config['upload_path'] = './uploaded_files/categories';
$config['allowed_types'] = 'gif|jpg|png';
$config['file_name'] = $image_id."_ipad";
$config['remove_spaces'] = TRUE;

//Loading Library - File Uploading
$this->load->library('upload', $config);

//Upload the image(Ipad)
if (!empty($cat_image_name)) 
{
  $this->upload->do_upload('cat_image');
  $data = array('upload_data' => $this->upload->data());
  $category_image_ipad = $data['upload_data']['file_name'];
  $img_extension = $data['upload_data']['file_ext'];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-17T07:49:22.870

文件上传需要多部分表单。为此，您必须包含一个表单助手。

转到配置文件夹，单击自动加载并找到`$autoload['helper'] = array();`并放置“表单”：

```
$autoload['helper'] = array('form'); 
```

对于控制器：

$config = 数组（

```
 'upload_path' => "./assets/",
    'allowed_types' => "gif|jpg|png|jpeg",
    'overwrite' => TRUE,
    'max_size' => "2048000",
    'max_height' => "768",
    'max_width' => "1024"
    );

    $this->load->library('upload', $config);

    if(!$this->upload->do_upload()){
        $errors = array('error' => $this->upload->display_errors());
        $post_image = 'noimage.jpg';
    } else {
        $data = array('upload_data' => $this->upload->data());
        $post_image = $_FILES['userfile']['name'];
    }

    $this->user_model->create_photo($post_image);
    redirect('');
} 
```

型号：

```
public function create_photo($post_image){

    $data = array(
        'pri' => $this->input->post('price'),
        'descrip' => $this->input->post('title'),
        'post_image' => $post_image
    );

    return $this->db->insert('table_name', $data);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-19T06:52:14.393

尝试这个

```
$config['upload_path'] = '../uploads/; 
```

这对我来说效果很好

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-30T15:19:36.360

在 Windows 和 Linux 上测试：

```
$path = realpath(".");
$path .= "/uploads/profile_images"; 
```

这里的 uploads 是根目录下的上传目录。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-24T08:24:10.397

用它：

```
$config['upload_path'] = $_SERVER['DOCUMENT_ROOT']."/uploads/";
//$this->config->item('upload_path'); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2015-12-29T06:20:32.320

这很简单：

只需将所有 $config 复制到名为 upload.php 的新 php 文件中，然后将其放入 cofig 文件夹中。

你的路径会正常工作。

这是upload.php文件内容：

```
<?php

    $config['upload_path'] = site_url().'uploads';
    $config['allowed_types'] = 'gif|jpg|png|jpeg|html|pdf';
    $config['max_size'] = 0;
    $config['max_width']  = 0;
    $config['max_height']  = 0;
    $config['file_ext_tolower']  = TRUE;
    $config['overwrite']  = FALSE;
    $config['max_filename']  = 0;
    $config['encrypt_name']  = TRUE;
    $config['remove_spaces']  = TRUE;
    $config['detect_mime']  = TRUE;
    $config['mod_mime_fix']  = TRUE;
?> 
```

但也请在upload_file 控制器中保留$config 数据。例如：

```
public function do_upload(){

    $config['upload_path'] = 'uploads';
    $config['allowed_types'] = 'gif|jpg|png|jpeg|html|pdf';
    $config['max_size'] = 0;
    $config['max_width']  = 0;
    $config['max_height']  = 0;
    $config['file_ext_tolower']  = TRUE;
    $config['overwrite']  = FALSE;
    $config['max_filename']  = 0;
    $config['encrypt_name']  = TRUE;
    $config['remove_spaces']  = TRUE;
    $config['detect_mime']  = TRUE;
    $config['mod_mime_fix']  = TRUE;

//Alternately you can set preferences by calling the initialize function. Useful if you auto-load the class:

   $this->upload->initialize($config);

            if (!$this->upload->do_upload('userfile'))
    {
        $error = array('error' => $this->upload->display_errors());

        $this->load->view('upload_form', $error);
    }
    else
    {
        $data = array('upload_data' => $this->upload->data());

        $this->load->view('upload_success', $data);
    }
    } 
```

很简单...

# xcode - 无法将对象连接到操作 - 没有拖放选项？

> ID：15050323
> 
> 赞同：0
> 
> 时间：2013-02-24T09:21:42.783
> 
> 标签：xcode, cocoa, interface-builder

我有我`MainMenu.xib`的主菜单。我还有几个`NSObject`子类作为Menu Controllers，在IB中都表示为对象，这样Main Menu中的每个Menu Item都对应一个专用的Menu Controller

每当我尝试将某些菜单项拖放到其菜单控制器标题并创建一个`IBAction`时，Xcode**都不**会给我该选项。我想这是一个 Xcode 错误，但我仍然感到困惑......

当我创建我的第一个菜单控制器时，一切正常。然而，既然我已经添加了所有的菜单控制器（与以前的方式完全相同），只有第一个可以通过 IB “链接”。

我究竟做错了什么？关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T10:27:07.407

Strange, Make sure the following

1.  you have used the word "IBOutlet" for each to be linkable
2.  clean the code
3.  restart xcode

And just to make it clear,if you think its a bug in your XCode copy, try creating a sample project and see if it also do the strange behavior

# c++ - GitHub 上的项目需要使用 Qt4、sqlite3、cmake、git、gcc 托管 CI 服务器

> ID：15050329
> 
> 赞同：7
> 
> 时间：2013-02-24T09:22:13.850
> 
> 标签：c++, github, qt4, continuous-integration

我在 GitHub 上托管了[我的代码](https://github.com/ruben2020/codequery)（用 C++ 编写），并希望将其链接到**托管**的持续集成 (CI) 服务器，例如[Travis CI](https://travis-ci.org/)或[BuildHive](https://buildhive.cloudbees.com/)。然后我想在我的项目页面上看到“构建通过”或“构建失败”。但是当我检查这两个服务的 CI 环境时，Travis CI 与 gcc、git、cmake 和 sqlite3 的可用性最接近，但我缺少另一个关键库 Qt4，它是构建我的项目所必需的。它也应该是免费的，因为它是一个免费的开源项目。

请告诉我我该怎么做？谢谢。

我需要：gcc、git、cmake、sqlite3 和 Qt4。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-24T13:19:30.037

以下 .travis.yml 解决了我的问题。可以在此页面上找到答案：http: [//about.travis-ci.org/docs/user/build-configuration/#Installing-Packages-Using-apt](http://about.travis-ci.org/docs/user/build-configuration/#Installing-Packages-Using-apt)

```
 language: cpp

 compiler: gcc

 before_install:
  - sudo apt-get update -qq
  - sudo apt-get install -qq cmake sqlite3 qt4-dev-tools

 before_script:
   - mkdir build
   - cd build
   - cmake ..

 script: make

 notifications:
   email:
     - xxx@users.sourceforge.net
   on_success: change
   on_failure: always 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T10:06:22.393

Not sure of this can work, but this [blog post](http://www.topbug.net/blog/2012/05/27/use-travis-ci-with-jython/) takes advantage of the [Travis Build Matrix](http://www.topbug.net/blog/2012/05/27/use-travis-ci-with-jython/), in order to replace one language by another in the `.travis.yml` file:

```
# specify python as the language
language: python
# python versions to be used for testing
python:
- "2.6"
- "2.7"
env:
- JYTHON=true
- JYTHON=false
matrix:
exclude:
- python: 2.6
env: JYTHON=true
before_install:
- export JYTHON_URL='http://downloads.sourceforge.net/project/jython/jython/2.5.2/jython_installer-2.5.2.jar?r=http%3A%2F%2Fwww.jython.org%2Fdownloads.html&ts=1338089844&use_mirror=iweb'
- if [ "$JYTHON" == "true" ]; then wget $JYTHON_URL -O jython_installer.jar; java -jar jython_installer.jar -s -d $HOME/jython; export PATH=$HOME/jython:$PATH; fi
before_script: if [ "$JYTHON" == "true" ]; then export PYTHON_EXE=jython; jython -c "print ''"; else export PYTHON_EXE=python; fi
script: $PYTHON_EXE setup.py test 
```

So *maybe* you could setup a specific build which, actually, install qt4 and uses it instead of the official language.

# php - 如何访问 CodeIgniter 中的静态资产？

> ID：15050332
> 
> 赞同：3
> 
> 时间：2013-02-24T09:22:52.350
> 
> 标签：php, codeigniter, static, routes

我正在将 CodeIgniter 用于项目。

文件夹结构 - htdocs/NewProject/application

我创建了一个名为 Home - applications/controllers/home.php 的控制器

我创建了一个视图 - applications/view/index.php

我可以毫无问题地访问 index.php。

我的路线是

```
$route['default_controller'] = "home"; 
```

我可以访问 localhost:8888/NewProject - 它带我回家#index

我在 views 文件夹中放了一些 css 和 images 文件夹。我如何访问图像和 css ？

尝试访问 NewProject/css/xxx.css 会导致 not found 错误。

是否有任何备用文件夹我应该添加这些静态文件？我需要在路由文件中添加任何内容吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-24T09:33:26.750

使结构像这样

```
root (is your root directory)
    /application
    /system
    /static
        /images
        /css
        /js 
```

更改您的基本网址`config.php`

```
/*
  |--------------------------------------------------------------------------
  | Base Site URL
  |--------------------------------------------------------------------------
  |
  | URL to your CodeIgniter root. Typically this will be your base URL,
  | WITH a trailing slash:
  |
  | http://example.com/
  |
  | If this is not set then CodeIgniter will guess the protocol, domain and
  | path to your installation.
  |
 */
 // use this if your project is in root
$config['base_url'] = 'http://example.com/';

// use this if your project is in folder/subfolders
//$config['base_url'] = 'http://example.com/newproject/liveproject/'; 
```

自动加载`URL`助手`autoload.php`

```
/*
  | -------------------------------------------------------------------
  |  Auto-load Helper Files
  | -------------------------------------------------------------------
  | Prototype:
  |
  | $autoload['helper'] = array('url', 'file');
 */

$autoload['helper'] = array('url'); 
```

在您的视图文件中

```
<link rel="stylesheet" type="text/css" href="<?php echo base_url(); ?>static/style.css" />

<img src="<?php echo base_url(); ?>static/images/myimage.jpg" alt="" /> 
```

希望这可以帮助。谢谢！！

# ruby - ruby2exe 不包含 if 语句下的 require 文件

> ID：15050342
> 
> 赞同：0
> 
> 时间：2013-02-24T09:24:03.290
> 
> 标签：ruby

我正在使用 2 组脚本进行肥皂通信，它们内部是相同的类和变量，因此在使用主脚本时我需要设置条件。

如果 A 需要 A.rb

如果 B 需要 B.rb

问题是 ruby​​2exe 在编译主脚本时不包含这些脚本。

如果已将 2 要求放在文件顶部，则它不起作用，但主脚本会混淆两个文件中的类。

想法如何解决？

谢谢伊兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:09:52.523

尝试在开始时包含两者，以便编译器选择它们，稍后在 +520 行再次包含，我认为最后包含的文件将是使用的文件。还可以尝试比 ruby​​2exe 更新的[ocra](http://ocra.rubyforge.org/)编译器。

# ios - How do I find what to refer to a UIButton as?

> ID：15050346
> 
> 赞同：-5
> 
> 时间：2013-02-24T09:24:36.050
> 
> 标签：ios, objective-c, xcode, ipad, uibutton

I want a particular `UIButton` to change colour once a `UISwitch` move from `OFF` to `ON`. What do I enter

```
- (IBAction) Court1ON {
//here
} 
```

to refer to a specific `UIButton` in my storyboard?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T09:36:19.857

You have several possibilities to do that:

1.  assign a `tag` to your button in storyboard; then access the button through:

    ```
    [self.view.viewByTag:buttonTag]; 
    ```

2.  create an `IBOutlet` `@property` of type `UIButton` and bind that to your button.

# mysql - SQL OR 比较只有一个结果

> ID：15050353
> 
> 赞同：-2
> 
> 时间：2013-02-24T09:25:16.180
> 
> 标签：mysql, sql, join, group-by

我试图做一个依赖于结果的 SQL 查询只返回一列，我有下一张表：

```
 day1       | day2       | day3
 -------------------------------------
 2013-02-25 | 2013-02-26 | 2013-02-27 
```

* * *

所以我希望下一个查询只返回一天的行，

```
 SELECT * FROM days WHERE day1 = '2013-02-25' or day2 = '2013-02-25' or day = '2013-02-25' 
```

我想要下一个，只有具有价值的行。

```
day        |
------------
2013-02-25 | 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T09:27:42.243

尝试这个：

```
SELECT day1 AS TheDay FROM days WHERE day1 = '2013-02-25' 
UNION 
SELECT day2           FROM days WHERE day2 = '2013-02-25' 
UNION
SELECT day3           FROM days WHERE day3 = '2013-02-25' 
```

# perl - perl 中的异常处理

> ID：15050354
> 
> 赞同：4
> 
> 时间：2013-02-24T09:25:24.740
> 
> 标签：perl, perl-module

我看到 1 出现在 eval 块的末尾，用于 perl 中的异常处理。为什么需要这样做？如果 eval 块返回 false 会发生什么？

即使我们不直接使用 $@ 而是使用 CPAN 中的一些库来进行异常处理，这是否也需要？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T09:35:46.253

## 如果 eval 块返回 false 会发生什么？

该错误值由`eval`.

## 为什么需要这样做？

这不是必需的。

```
my $foo = eval { foo() }; 
```

如果您可以`$foo`接受 undef 在异常情况下，那就太好了。

你看到的是

```
if (!eval { foo(); 1 }) {
   ...
} 
```

代码返回 true 以`if`告知`eval`成功。`eval`将在异常时返回 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T10:46:04.077

为了扩展 ikegami 的答案：大多数人编写这样的代码：

```
eval { might_throw_exception() };
if ($@) { ... } 
```

这在 5.14 之前是错误的，因为`$@`即使由于析构函数覆盖它或其他因素而引发异常，它也可能不是真值。`return 1`是一种解决方法；有关完整说明，请参阅[Try::Tiny](http://search.cpan.org/~doy/Try-Tiny-0.12/lib/Try/Tiny.pm#%24@_might_not_be_a_true_value)。

# android - 如何提高 Android Play 商店中的应用可用性？

> ID：15050360
> 
> 赞同：0
> 
> 时间：2013-02-24T09:25:58.793
> 
> 标签：android, google-play

我正在开发一个安卓应用程序。我已将其添加到 Google Play 商店。minSdk 已设置为 10，targetSdk 为 15。

我最近请我的一些朋友通过从 Play 商店下载它来测试它。他们中的大多数人，尤其是使用三星手机的人告诉我，他们收到一个错误，即在 Play 商店中不可用。

我知道该应用程序不适用于具有不符合应用程序 minSdk 的 android 版本的设备。

在询问我的一些朋友下载该应用程序后，我知道我的一些使用 android 2.3.6 的朋友无法下载该应用程序。另一个人使用三星 Galaxy Champ Duos（它的姜饼，但我不知道 android 的确切版本）无法在 Play 商店中找到它。

我对此进行了谷歌搜索，但找不到任何解决方案。

我请求的权限如下。我相信这些是一般权限（一般在大多数手机中应该有这些功能。）

```
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.CALL_PHONE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.READ_CONTACTS"/> 
```

下面列出了我的应用程序使用的 uses-feature 标签。

```
<uses-feature android:name="android.hardware.camera" />
<uses-feature android:name="android.hardware.camera.autofocus" />
<uses-feature android:glEsVersion="0x00020000" /> 
```

所以我的问题是如何让我的应用程序可用于更多设备？我计划很快推出我的应用程序。我不希望潜在用户仅仅因为在 Play 商店中找不到它而放弃该应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T09:31:27.467

您的清单中有使用功能标签吗？如果是这样，您可能会淘汰很多设备，请不要添加这些设备，除非您的应用在没有它们的情况下根本无法运行。屏幕尺寸支持标签也是如此。

否则，Play 商店提供了一种查看受支持设备列表的方法——它在 APK 部分下，在受支持设备下有一个蓝色链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T11:22:37.230

如果您将 minSDK 设置为 10，任何版本低于 10 的设备都无法安装您的应用。

在您的情况下，可能是有关某些设备功能的屏幕密度的其他限制。检查您的 AndroidManifest.xml 上的请求功能

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T09:28:35.413

你需要使用 minSdk 至少 8 来支持最大的 android 设备

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T09:48:24.613

> 您可以使用您的包名称在 Google Play 上搜索您的应用。

**例如**

**您在 AndroidManifest.xml 中给出 packagename="com.xxxxx.app" 然后您可以通过输入com.xxxx.app**在 google play 上搜索您的应用

 **这对您来说很容易，但如果它的 minSDK 为 10，那么它在 SDK 10 版本以下的搜索结果中将不可见。

要为 SDK 版本 8 到 17 提供可用的应用程序，请在`AndroidManifest.xml`.

```
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="17" /> 
```**

# iphone - 点击空格会导致上面的字母被录音

> ID：15050362
> 
> 赞同：0
> 
> 时间：2013-02-24T09:26:16.890
> 
> 标签：iphone, objective-c, ipad, ios6, keyboard

我有一个 textField 和一个委托视图控制器 我只向视图控制器添加了一个功能

```
 - (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string;   // return NO to not change text
{
    return NO;
} 
```

比我录一些词... 快速点击空间。过了一会儿，我注意到一按空格键，一按我手指上方的字母。请看 0:30 秒的视频： [http ://www.youtube.com/watch?v=e4kV2RER-cU](http://www.youtube.com/watch?v=e4kV2RER-cU)

任何想法？

应该注意的是，它发生在 iOS 6.0 及更高版本的 iPad 2、iPad 3、iPad 4、iPhone 5 和 iPod 5 上。我还在 Apple Bug Reporter 上打开了 bug。但我很乐意找到解决方法。

# python - 对字典中的字符串进行 URL 编码

> ID：15050364
> 
> 赞同：0
> 
> 时间：2013-02-24T09:26:19.277
> 
> 标签：python, query-string, urlparse

我正在尝试从查询字符串中删除某些项目，最好的方法是解析查询字符串，迭代并删除我不想要的特定键并将它们重新连接在一起。

按照 python 指南，他们说要使用的 urlencode 函数似乎没有像预期的那样工作。

使用以下代码，它只是解析查询字符串，然后将其重新连接在一起。我已将其设置为保留空值。

```
>>> f = 'name=John%20Doe&seq=123412412412&wer'
>>> q = urlparse.parse_qs(f, keep_blank_values=True)
>>> q
{'wer': [''], 'name': ['John Doe'], 'seq': ['123412412412']}
>>> urllib.urlencode(q)
'wer=%5B%27%27%5D&name=%5B%27John+Doe%27%5D&seq=%5B%27123412412412%27%5D' 
```

我期望查询代码的结果与 f 字符串相同。

[http://docs.python.org/2/library/urlparse.html#urlparse.parse_qs](http://docs.python.org/2/library/urlparse.html#urlparse.parse_qs)

```
Use the urllib.urlencode() function to convert such dictionaries into query strings. 
```

所以我假设我必须遍历 q 变量并手动构建字符串，在字典的每个项目上调用 urlencode？有没有更好的办法...

使用 python 2.7

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T09:42:01.317

您应该使用`doseq`urlencode 的参数，因为您的查询字典中有序列：

```
>>> urllib.urlencode(q, doseq=1)
'wer=&name=John+Doe&seq=123412412412' 
```

# java - JVM 7 因 WMI dll 崩溃

> ID：15050367
> 
> 赞同：1
> 
> 时间：2013-02-24T09:26:42.357
> 
> 标签：java, jvm, wmi, jvm-crash

我正在使用当前使用 Java 7 运行的基于 Java 的产品。JVM 崩溃并出现以下错误

> 虚拟机 11 | # Java 运行时环境检测到致命错误：
> jvm 11 | #
> 虚拟机 11 | # EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x00000000f9816561, pid=1696, tid=3972
> jvm 11 | #
> 虚拟机 11 | # JRE 版本：7.0_05-b06
> jvm 11 | # Java VM：Java HotSpot(TM) 64 位服务器 VM（23.1-b03 混合模式 windows-amd64 >compressed oops）
> jvm 11 | # 有问题的框架：
> jvm 11 | #C [WMIdll.dll+0x16561] JNI_OnUnLoad+0x8f91
> jvm 11 | #
> 虚拟机 11 | # 核心转储写入。默认位置：E:\hp\UCMDB\DataFlowProbe\bin\hs_err_pid1696.mdmp
> jvm 11 | #
> 虚拟机 11 | # 包含更多信息的错误报告文件保存为：
> 虚拟机 11 | # E:\hp\UCMDB\DataFlowProbe\bin\hs_err_pid1696.log
> jvm 11 | #
> 虚拟机 11 | # 如果您想提交错误报告，请访问：
> jvm 11 | # [http://bugreport.sun.com/bugreport/crash.jsp](http://bugreport.sun.com/bugreport/crash.jsp)
> jvm 11 | # 崩溃发生在 Java 虚拟机之外的本地代码中。
> 虚拟机 11 | # 查看有问题的框架以了解报告错误的位置。
> 虚拟机 11 | #
> 包装器 | JVM 意外退出。
> 包装 | 连续 10 次发射失败，每次持续时间不到 300 秒。放弃。包装 | 可能存在配置问题：请检查日志。
> 包装 | <-- 包装器停止
> 
> * * *

我看到这是由于 WMIdll.dll 而发生的，并且在产品日志中我看到很多与 WMI 相关的错误。基本上，该产品正在对远程机器进行 WMI 查询以获取数据。

我已将堆大小设置为 2 GB。我看到一些有关 JVM 崩溃的相关帖子，但我无法理解它。因此，感谢您提供任何帮助。

BR

# c# - 如何获取 DataSet 行中的最后更新字段？

> ID：15050368
> 
> 赞同：0
> 
> 时间：2013-02-24T09:26:49.123
> 
> 标签：c#, .net, dataset

知道如何在**DataSet**行中获取最后更新的字段吗？

我的意思是在**C#**中是否有类似**sql**`select @@identity`的东西？

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T09:35:54.193

`column`你可以有一个`DateTime`。更新记录时，将记录的 设置 `DateTime`为`DateTime.Now`和`Atlast select Max(DateTimeColumn)`。

有些人可能更喜欢`column in DB`保留上次更新的记录。**

# php - preg_replace - 从 twitter 状态 url 获取 tweet id

> ID：15050371
> 
> 赞同：0
> 
> 时间：2013-02-24T09:27:25.800
> 
> 标签：php, preg-replace

这就是我的状态网址的样子

```
http://twitter.com/username/statuses/303095169115357184 
```

现在我想`303095169115357184`使用 preg_replace 获取推文 ID。

有人可以帮助我使用正则表达式吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T09:33:26.767

无需使用`preg_replace()`.

`$id = basename($url)`

# mysql - 从表mysql中删除所有b，a

> ID：15050377
> 
> 赞同：2
> 
> 时间：2013-02-24T09:28:01.670
> 
> 标签：mysql, sql

我有一个包含 3 个字段的表格，如下所示

```
id  a  b
1   1  2
2   1  3
3   2  1
4   2  3
5   3  1
6   3  2 
```

(a,b) 和 (b,a) 都存在于该表中（a=1 and b=2 and a=2 and b=1）。我需要从上表中删除所有 (b,a) 。

```
Output:

id a b
1  1 2
2  1 3
4  2 3 
```

我尝试了这样的自我加入

```
select v1.id, v2.id from val v1,val v2 where v1.a=v2.b and v1.b=v2.a 
```

并找出匹配的相应 id。但是，在此之后无法继续。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T09:30:59.387

如果你想永久删除那些*重复*的记录，这里是`DELETE`使用 MySQL`LEAST`和`GREATEST`内置函数的语句。

```
DELETE  a
FROM    tableName a
        LEFT JOIN
        (
            SELECT  LEAST(a, b) aa,
                    GREATEST(a,b) bb,
                    MIN(ID) min_ID
            FROM    tableName
            GROUP     BY aa, bb
        ) b ON a.ID = b.min_ID
WHERE   b.min_ID IS NULL 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/c2478/1)

`SELECT`声明_

```
SELECT  *
FROM    tableName
WHERE   (LEAST(a, b),GREATEST(a,b), ID)
        IN
        (
            SELECT  LEAST(a, b) aa,
                    GREATEST(a,b) bb,
                    MIN(ID) min_ID
            FROM    tableName
            GROUP   BY aa, bb
        ) 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/59cfa/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T09:46:20.137

你可以这样做来选择你想要的输出。

```
select id, v1.a, v2.a from test v1 left join test v2 on (v1.id = v2.id and v1.a > v2.b)
where v2.id is null 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T09:56:02.833

如果您只想显示“一半”结果：

```
SELECT *
FROM val
WHERE a <= b ; 
```

如果你想删除另一半：

```
DELETE *
FROM val
WHERE a > b ; 
```

# 3d - 计算网格 OpenMesh 的顶点价

> ID：15050380
> 
> 赞同：2
> 
> 时间：2013-02-24T09:28:31.353
> 
> 标签：3d, computational-geometry, mesh, vertex, openmesh

这是我第一次使用 OpenMesh，我正在尝试做一个非常简单的函数来计算网格中所有顶点的化合价。

我的第一次尝试看起来像这样

```
Mesh::VertexIter vIterator, vBegin, vEnd;
Mesh::HalfedgeHandle initialEdge, nextEdge;

vBegin = mesh_.vertices_begin();
vEnd = mesh_.vertices_end();

int vertexValence;

for (vIterator = vBegin; vIterator != vEnd; ++vIterator) {
    initialEdge = mesh_.halfedge_handle(vIterator.handle());
    nextEdge = mesh_.next_halfedge_handle(initialEdge);
    vertexValence = 0;
    while (nextEdge != initialEdge) {
        vertexValence++;
        nextEdge = mesh_.next_halfedge_handle(nextEdge);
    }
    if(vIterator == vBegin){
        std::cout << "myCount = " << vertexValence << std::endl;  // prints 2
        std::cout << "meshCount = "<< mesh_.valence(vIterator)<< std::endl;  // prints 10
    }
} 
```

价数与网格数不同（参见 std::cout）。我知道我遗漏了一些东西，任何人都可以看到错误在哪里？

**更新**

我使用以下代码使其工作

```
for(vIterator = vBegin; vIterator != vEnd; ++vIterator){
    vertexValence = 0;
    for (voIterator = mesh_.voh_iter(vIterator); voIterator; ++voIterator) {
        vertexValence++;
    }
    if(vIterator == vBegin){
        std::cout << "myCount = " << vertexValence << std::endl;
        std::cout << "openMeshCount = " << mesh_.valence(vIterator) << std::endl;
    }
} 
```

现在两个数字匹配。但是，我想知道是否可以使用我放置的第一个代码来实现相同的功能。思路应该是一样的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T17:40:36.297

你应该试试这个：

```
for (vIterator = vBegin; vIterator != vEnd; ++vIterator) {
    vertexValence = 0;
    initialEdge = mesh_.halfedge_handle(vIterator.handle());
    nextEdge = initialEdge;

    do {
        vertexValence++;
        oppositeEdge = mesh_.opposite_halfedge_handle(nextEdge);
        nextEdge = mesh_.next_halfedge_handle(oppositeEdge);
    } while (initialEdge != nextEdge);
} 
```

你必须使用对面的半边回到原来的顶点，看看[这个页面](http://www.openmesh.org/index.php?id=228)，有半边数据结构的简要说明。

# c - C中具有可变参数数量的函数的奇怪行为

> ID：15050384
> 
> 赞同：5
> 
> 时间：2013-02-24T09:29:24.067
> 
> 标签：c, list, arguments, stdout, variable-length

我有以下带有可变数量参数的 C 函数，它应该`char* word`通过哈希表搜索并写入`true`或写入`false`文件，如果指定，它是第二个参数；否则为`stdout`。

如果我指定文件名，它工作正常，问题是当我不指定时（例如`find("foo")`）。在这种情况下，它将结果写入一个名为`foo`而不是`stdout`.

原因是什么？

```
void find(char* word, ...)
{
va_list list;
char *fname = NULL;
va_start(list, word);
FILE* f;
fname = strdup(va_arg(list, char*));
va_end(list);
if (<condition>)    // condition suited for the case in which the file name is received 
    f = fopen(fname, "a");
else
    f = stdout;
if (member(word))
    fprintf(f, "True\n");
else
    fprintf(f, "False\n");
} 
```

代替`<condition>`我已经尝试过`fname != NULL`，`strlen(fname) > 0`但那些不适用，并且它一直看到`fname`没有指定的`word`时间。`fname`

非常感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T09:56:12.147

从`va_*`的手册页：

> **如果没有 next 参数**，或者 type 与实际 next 参数的类型不兼容（根据默认参数提升），**则会发生随机错误**。

如果要使用可变参数列表，则需要为列表设计某种终止符（例如，始终添加一个虚拟 NULL 参数）：

```
find (word, NULL);
find (word, filename, NULL); 
```

或提供参数的数量作为参数：

```
find (1, word);
find (2, word, filename); 
```

# php - 使用下拉列表提交表单

> ID：15050386
> 
> 赞同：0
> 
> 时间：2013-02-24T09:29:36.387
> 
> 标签：php, yii

在我的应用程序中，我有表单，访问者可以选择任何城市以转到与所选值相关的另一个页面。

所以我创建了我的代码，但问题数据没有发送。

数据是城市id，我在篡改数据中测试过，没有发送数据，如何解决这个问题并在get方法中发送数据

模型：

```
public function events_by_city(){
   return CHtml::listData(Events::model()->findAll("start >=now()  and active=1"),'city','city0.ecity'); 
} 
```

控制器 ：

```
//////// start upcoming related to city 
 public function actionUpcomingcity(){
    if(isset($_GET['city'])){  
       $city=intval($_GET['city']);
       $courses=Courses::model()->findAll(" course_id in (select course_id from ict_events where start >=now() and city=$city and active=1 ) ",array('distinct'=>true,
    ));  

    $this->pageTitle=" Events";
    $this->layout='rsidebar';

    $this->render('upcoming_by_city',array('courses'=>$courses));
   }
   else{
     echo " No number   ";
   }
} 
```

看法 ：

```
<?php

  CHtml::form();

  $model= new Events;
  echo  chtml::activeDropDownList($model,'city',$model->events_by_city(),array('prompt'=>'استعراض الأحداث التدريبية ',"submit"=>array("site/upcomingcity",'city'=>$model->city))); 
  CHtml::endForm();
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T10:23:57.380

我猜`"submit"=>array("site/upcomingcity",'city'=>$model->city)`是不正确的。尝试

```
'submit'=>('site/upcomingcity') 
```

反而。

# c++ - 从c ++中的一行输入读取多个命令

> ID：15050388
> 
> 赞同：0
> 
> 时间：2013-02-24T09:29:41.243
> 
> 标签：c++

假设输入可以是“x”、“y”和“z”，并且可以分别执行每个 commandX()、commandY() 和 commandZ()。不必每次都输入然后按回车（即：x（enter）commandX（）执行然后y（enter）commandY（）执行......）我怎样才能让用户只输入一行（即：xyz （输入））然后命令按输入顺序连续发出？（即：在 x , y , z 中的执行顺序将是 commandX() 然后 commandY() 然后 commandZ()）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T09:32:23.007

使用[std::getline](http://en.cppreference.com/w/cpp/string/basic_string/getline)。从输入流中提取整行，然后从中处理每个命令。您可能希望将输出行包装在[std::istringstream](http://en.cppreference.com/w/cpp/io/basic_istringstream)中来执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T12:06:26.170

您很可能正在寻找[getopt](https://stackoverflow.com/questions/2219562/using-getopt-to-parse-program-arguments-in-c)。

但是，您可以通过 while 循环获得相同的结果——对某些功能感到害羞：

```
unsigned int i(1);
bool run_x(false), run_y(false), run_z(false);

while (i < argc and argv[i] == '-') {

    switch (argv[i + 1]) {

        case 'x':
            run_x = true;
            i += 2;
            break;

        case 'y':
            run_y = true;
            y_value = argv[i + 1];
            i += 3;
            break;

        case 'z':
            run_z = true;
            i += 2;
            break;

     }

} 
```

程序的执行可以像这样执行：

```
./program -x -y 10 -z
./program -x -z
./program -z
./program -y 10 -z
... 
```

使用布尔值和其他变量来控制什么是/不是可选的。

# data-mining - DBSCAN 中的参数估计

> ID：15050389
> 
> 赞同：9
> 
> 时间：2013-02-24T09:29:45.870
> 
> 标签：data-mining, cluster-analysis, dbscan

我需要根据它们与不同介词（如代理、工具、时间、地点等）的分布来找到自然出现的名词类别。我尝试使用 k-means 聚类，但帮助较少，效果不佳，我正在寻找的类有很多重叠（可能是因为类的非球形形状和 k-means 中的随机初始化）。

我现在正在使用 DBSCAN，但我无法理解此聚类算法中的 epsilon 值和 mini-points 值。我可以使用随机值还是需要计算它们。任何人都可以帮忙。特别是对于 epsilon，至少在需要时如何计算它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-25T08:49:27.810

使用您的**领域知识**来选择参数。Epsilon 是一个半径。您可以将其视为最小集群大小。

显然随机值不会很好地工作。作为启发式方法，您可以尝试查看 k 距离图；但这也不是自动的。

无论哪种方式，首先要做的是为您的数据**选择一个好的距离函数**。并进行适当的归一化。

至于“minPts”，它又取决于您的数据和*需求*。一个用户可能想要一个与另一个用户非常不同的值。当然 minPts 和 Epsilon 是耦合的。如果将 epsilon 加倍，您将大致需要将 minPts 增加 2^d （对于欧几里德距离，因为这就是超球体的体积增加的方式！）

如果您想要大量小而精细的集群，请选择低 minpts。如果您想要更大和更少的集群（以及更多的噪音），请使用更大的 minpts。如果您根本不想要任何集群，请选择比您的数据集大小更大的 minpts...

# java - 如何在 JNA 中制作结构？

> ID：15050391
> 
> 赞同：7
> 
> 时间：2013-02-24T09:30:08.133
> 
> 标签：java, jna

运行以下代码时出现此错误；

```
Exception in thread "AWT-EventQueue-0" java.lang.Error: Structure.getFieldOrder() on class javaapplication2.NewJFrame$APPBARDATA returns names ([cbSize, hWnd, jCallbackMessage, jEdge, rc, sParam]) which do not match declared field names ([])
    at com.sun.jna.Structure.getFields(Structure.java:872)
    at com.sun.jna.Structure.deriveLayout(Structure.java:983)
    at com.sun.jna.Structure.calculateSize(Structure.java:908)
    at com.sun.jna.Structure.calculateSize(Structure.java:896)
    at com.sun.jna.Structure.allocateMemory(Structure.java:357)
    at com.sun.jna.Structure.<init>(Structure.java:191)
    at com.sun.jna.Structure.<init>(Structure.java:180)
    at com.sun.jna.Structure.<init>(Structure.java:167)
    at com.sun.jna.Structure.<init>(Structure.java:159)
    at javaapplication2.NewJFrame$APPBARDATA.<init>(NewJFrame.java:31)
    at javaapplication2.NewJFrame.<init>(NewJFrame.java:56)
    at javaapplication2.NewJFrame$7.run(NewJFrame.java:255)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:721)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:682)
    at java.awt.EventQueue$3.run(EventQueue.java:680)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:691)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:242)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:150)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:146)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:138)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:91) 
```

我的课：

```
class APPBARDATA extends Structure {

    WinUser.DWORD cbSize;
    WinUser.HWND hWnd;
    WinUser.UINT_PTR uCallbackMessage;
    WinUser.UINT_PTR uEdge;
    WinUser.RECT rc;
    WinUser.LPARAM lParam;

    @Override
    protected List getFieldOrder() {
        return Arrays.asList(new String[]{"cbSize", "hWnd", "uCallbackMessage", "uEdge", "rc", "lParam"});
    }
}

    APPBARDATA pdata = new APPBARDATA();
    pdata.lParam = new WinUser.LPARAM(0);
    pdata.cbSize = new WinUser.DWORD(32);
    pdata.hWnd = WinUser.HWND_BROADCAST; 
```

怎么了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-24T10:30:16.463

Flag your attributes as public because [as specified in the doc](http://java-native-access.github.io/jna/3.5.1/javadoc/com/sun/jna/Structure.html#getFieldOrder%28%29), JNA use [class.getFields()](http://download.oracle.com/javase/1.4.2/docs/api/java/lang/Class.html?is-external=true#getFields%28%29) to obtain the list of attributes.

Javadoc of `Class.getFields()`:

> Returns an array containing Field objects reflecting all the accessible **public fields** of the class or interface represented by this Class object. ...

# android - 编译ffmpeg库和转换器类的麻烦

> ID：15050392
> 
> 赞同：3
> 
> 时间：2013-02-24T09:30:08.107
> 
> 标签：android, android-ndk, ffmpeg, libavcodec, libavformat

我使用这个项目作为参考：代码可在[http://roman10.net/src/affmpeg.zip](http://roman10.net/src/affmpeg.zip)获得。

我正在尝试使用与项目建议的配置不同的 ffmpeg 编译该项目。我编译了一个新的 libffmpeg.so 并将其添加到项目中。但是，现在我收到“UnsatisfiedLinkError”

```
02-24 11:05:45.644: D/dalvikvm(11363): Trying to load lib /data/data/roman10.media.ffmpeg/lib/libffmpeg.so 0x47b0ec70
02-24 11:05:45.680: D/dalvikvm(11363): Added shared lib /data/data/roman10.media.ffmpeg/lib/libffmpeg.so 0x47b0ec70
02-24 11:05:45.680: D/dalvikvm(11363): No JNI_OnLoad found in /data/data/roman10.media.ffmpeg/lib/libffmpeg.so 0x47b0ec70, skipping init
02-24 11:05:45.684: D/dalvikvm(11363): Trying to load lib /data/data/roman10.media.ffmpeg/lib/libconverter.so 0x47b0ec70
02-24 11:05:45.687: I/dalvikvm(11363): Unable to dlopen(/data/data/roman10.media.ffmpeg/lib/libconverter.so): Cannot load library: link_image[1995]: failed to link libconverter.so
02-24 11:05:45.687: W/dalvikvm(11363): Exception Ljava/lang/UnsatisfiedLinkError; thrown during Lroman10/media/ffmpeg/ffmpegService;.<clinit>
02-24 11:05:45.687: W/dalvikvm(11363): Class init failed in newInstance call (Lroman10/media/ffmpeg/ffmpegService;)
02-24 11:05:45.687: D/AndroidRuntime(11363): Shutting down VM
02-24 11:05:45.687: W/dalvikvm(11363): threadid=1: thread exiting with uncaught exception (group=0x4001d7d0)
02-24 11:05:45.695: E/AndroidRuntime(11363): FATAL EXCEPTION: main
02-24 11:05:45.695: E/AndroidRuntime(11363): java.lang.ExceptionInInitializerError
02-24 11:05:45.695: E/AndroidRuntime(11363):    at java.lang.Class.newInstanceImpl(Native Method)
02-24 11:05:45.695: E/AndroidRuntime(11363):    at java.lang.Class.newInstance(Class.java:1429)
02-24 11:05:45.695: E/AndroidRuntime(11363):    at android.app.ActivityThread.handleCreateService(ActivityThread.java:2940)
02-24 11:05:45.695: E/AndroidRuntime(11363):    at android.app.ActivityThread.access$3300(ActivityThread.java:125)
02-24 11:05:45.695: E/AndroidRuntime(11363):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2087)
02-24 11:05:45.695: E/AndroidRuntime(11363):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-24 11:05:45.695: E/AndroidRuntime(11363):    at android.os.Looper.loop(Looper.java:123)
02-24 11:05:45.695: E/AndroidRuntime(11363):    at android.app.ActivityThread.main(ActivityThread.java:4627)
02-24 11:05:45.695: E/AndroidRuntime(11363):    at java.lang.reflect.Method.invokeNative(Native Method)
02-24 11:05:45.695: E/AndroidRuntime(11363):    at java.lang.reflect.Method.invoke(Method.java:521)
02-24 11:05:45.695: E/AndroidRuntime(11363):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:871)
02-24 11:05:45.695: E/AndroidRuntime(11363):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:629)
02-24 11:05:45.695: E/AndroidRuntime(11363):    at dalvik.system.NativeStart.main(Native Method)
02-24 11:05:45.695: E/AndroidRuntime(11363): Caused by: java.lang.UnsatisfiedLinkError: Library converter not found
02-24 11:05:45.695: E/AndroidRuntime(11363):    at java.lang.Runtime.loadLibrary(Runtime.java:461)
02-24 11:05:45.695: E/AndroidRuntime(11363):    at java.lang.System.loadLibrary(System.java:557)
02-24 11:05:45.695: E/AndroidRuntime(11363):    at roman10.media.ffmpeg.ffmpegService.<clinit>(ffmpegService.java:123) 
```

我决定重新编译 converter.so 文件，但是，在其上运行 ndk-build 命令时，我收到以下消息：

```
c:\Users\user\workspace\Main\jni>c:\work\android-ndk-r8d\ndk-build
c:/android-ndk-r8d/build/core/build-binary.mk:266: warning: overriding comm
ands for target `c:/Users/user/workspace/Main//obj/local/armeabi/objs/converter'

c:/android-ndk-r8d/build/core/build-binary.mk:266: warning: ignoring old co
mmands for target `c:/Users/user/workspace/Main//obj/local/armeabi/objs/converte
r'
c:/android-ndk-r8d/build/core/build-binary.mk:266: warning: overriding comm
ands for target `c:/Users/user/workspace/Main//obj/local/armeabi/objs/converter'

c:/android-ndk-r8d/build/core/build-binary.mk:266: warning: ignoring old co
mmands for target `c:/Users/user/workspace/Main//obj/local/armeabi/objs/converte
r'
c:/android-ndk-r8d/build/core/build-binary.mk:357: warning: overriding comm
ands for target `c:/Users/user/workspace/Main//obj/local/armeabi'
c:/android-ndk-r8d/build/core/build-binary.mk:357: warning: ignoring old co
mmands for target `c:/Users/user/workspace/Main//obj/local/armeabi'
c:/android-ndk-r8d/build/core/build-binary.mk:439: warning: overriding comm
ands for target `c:/Users/user/workspace/Main//libs/armeabi'
c:/android-ndk-r8d/build/core/build-binary.mk:439: warning: ignoring old co
mmands for target `c:/Users/user/workspace/Main//libs/armeabi'
c:/android-ndk-r8d/build/core/build-binary.mk:357: warning: overriding comm
ands for target `c:/Users/user/workspace/Main//obj/local/armeabi'
c:/android-ndk-r8d/build/core/build-binary.mk:357: warning: ignoring old co
mmands for target `c:/Users/user/workspace/Main//obj/local/armeabi'
"Compile thumb : converter <= cmdutils.c
c:/Users/user/workspace/Main//jni/cmdutils.c:32:34: fatal error: libavformat/avf
ormat.h: No such file or directory
compilation terminated.
make: *** [c:/Users/user/workspace/Main//obj/local/armeabi/objs/converter/cmduti
ls.o] Error 1 
```

我能做些什么来解决这个问题并让它发挥作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T09:42:54.100

根据错误，您缺少 libavformat 标头。

我找到了这个：

[Android 上的 FFMpeg，未定义对 libavcodec 函数的引用，尽管它在命令行中列出](https://stackoverflow.com/questions/5337833/ffmpeg-on-android-undefined-references-to-libavcodec-functions-although-it-is)

# clojure - clojure 如何知道一个项目中文件夹/文件/目录的路径？

> ID：15050394
> 
> 赞同：15
> 
> 时间：2013-02-24T09:30:16.283
> 
> 标签：clojure, functional-programming

假设我的 clojure 项目中有两个文件，一个是 clj，另一个是 txt。有没有办法从 clj 文件中知道 txt 文件的路径（作为字符串）？

有：

```
(System/getProperty "user.dir") 
```

或者

```
(-> (java.io.File. ".") .getAbsolutePath) 
```

但这给出了当前目录所在的位置。包含clj文件的那个，写代码的那个。但是怎么知道txt文件的路径呢？目的是从clj文件写入这个txt文件。

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-24T14:13:31.373

在 Java 和 Clojure 中，您可以在 CLASSPATH 上找到文件。例如，在 Java 中，通常将 log4j.properties 之类的内容放在 CLASSPATH 的顶​​部（例如，在 classes 目录中），然后您可以在 Clojure（或 Java）代码中引用该文件：

```
(java.io.File. "log4j.properties") 
```

您是否正在使用 Leiningen 并运行您的应用程序？如果是这样，您可以在顶层创建一个目录并将文件放在那里。例如，如果你有一个配置文件，你可以有一个带有属性文件的“conf”目录：

```
my-lein-proj$ ls
conf  doc  project.clj  README.md  src  target  test 
```

假设您将 myproj.conf 文件放在 conf 目录中，并且您想在 Clojure 代码中读取该文件。然后你可以这样做：

```
(slurp "conf/myproj.conf") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T20:51:16.730

Clojure 库[本地文件](https://github.com/arthuredelstein/local-file/)允许您使用`local-file/project-dir`. 只要您知道要访问的文件在项目中的哪个位置，您应该可以通过这种方式找到它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T10:06:21.070

> This gives where the current clj file, the one that this code is written in.

No, it doesn't. It gives the current directory.

Did you take into account that one can run clojure scripts that are not in the current directory?

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-30T12:54:20.480

如果您的文件结构与此类似：

**配置 | 源 | 目标 | 测试**

你在 config 目录中有一个配置，在我们的例子中假设它的 java.config 并且你试图在 src 目录中的 core.clj 中读取这个文件你也可以使用**clojure.java.io/reader**方法

例如：

```
(clojure.java.io/reader "config/java.config") 
```

您可以在 repl 中运行以下命令以查看文件的内容

```
(slurp (clojure.java.io/reader "config/java.config") 
```

如果您有兴趣逐行读取文件的内容，您可以将上述函数与 with-open 方法结合使用并逐行读取：

```
(with-open [word (clojure.java.io/reader "config/java.config")]
  (loop [c (.read word)]
    (if (not= c -1)
      (do
        (print (char c))
        (recur (.read word)))))) 
```

# java - 动态报告：使用 NetBeans 编译时显示错误

> ID：15050395
> 
> 赞同：2
> 
> 时间：2013-02-24T09:30:20.320
> 
> 标签：java, netbeans, dynamic-reports

我从我的 NetBeans GUI 创建了一个报告，它工作正常，但突然间编译器现在显示错误。

```
package dreportsample;

import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import javax.imageio.ImageIO;
import net.sf.dynamicreports.examples.Templates;
import net.sf.dynamicreports.report.builder.style.StyleBuilder;
import net.sf.dynamicreports.report.constant.HorizontalAlignment;
import net.sf.dynamicreports.report.datasource.DRDataSource;
import net.sf.dynamicreports.report.exception.DRException;
import net.sf.jasperreports.engine.JRDataSource;

/**
 * @author Ricardo Mariaca (dynamicreports@gmail.com)
 */
public class DReportSample {

    public DReportSample() {
        build();
    }

    private void build() {  
            StyleBuilder boldStyle         = stl.style().bold();
            StyleBuilder boldCenteredStyle = stl.style(boldStyle).setHorizontalAlignment
                    (HorizontalAlignment.CENTER).setFontSize(15);
            StyleBuilder footerLeft         = stl.style().setHorizontalAlignment
                   (HorizontalAlignment.LEFT) ;
             StyleBuilder footerRight         = stl.style().setHorizontalAlignment
                   (HorizontalAlignment.RIGHT) ;
            //BufferedImage img = new BufferedImage(1200,1200,BufferedImage.TYPE_INT_RGB);
           BufferedImage img = null;
try {
   // img = ImageIO.read(new File("D:/Hysteresis.png"));
    img = ImageIO.read(new File("D:/Hysteresis.png"));
} catch (IOException e) {
}
       BufferedImage logo = null;
try {
   // img = ImageIO.read(new File("D:/Hysteresis.png"));
    logo = ImageIO.read(new File("D:/Logo.jpg"));
} catch (IOException e) {
}
        try {
            report()//create new report design
                         // .setColumnTitleStyle(boldStyle)
                         // .setColumnStyle(boldStyle)
                          .highlightDetailEvenRows()
              .columns(//add columns

                col.column(null,"Col_1",      type.stringType()),
                col.column(null,"Col_2",  type.stringType())
                                )
                           .summary(
        cmp.verticalList()
            .add(cmp.text("\n\nHYSTERISIS PLOT").setStyle(boldStyle))
            .add(cmp.text("A brief description of what this plot signifies "
                                + "which means that change in are related to"
                                + " pain relief and subsequently"
                                + "should be encouraged \n\n\n\n"))
           // .add(cmp.image(getClass().getResourceAsStream
             //     ("D:/Hysteresis.png")).setFixedDimension(300, 300))

            .add(cmp.image(img).setFixedDimension(400, 300))
            .add(cmp.text("ANALYSIS\n\n\n").setStyle(boldStyle))
            .add(cmp.text("REMARKS\n\n\n\n").setStyle(boldStyle))
            .add(cmp.text("Doctor Signature").setStyle(boldStyle))
    )
              .title(

                                cmp.horizontalList()
                                .add(
                                cmp.image(logo).setFixedDimension(70, 70),
                                cmp.verticalList()
                                .add(
                                cmp.text("Address Line 1").setStyle(boldCenteredStyle),
                                cmp.text("Address Line 2").setStyle(boldCenteredStyle),
                                cmp.text("Address Line 3").setStyle(boldCenteredStyle))
                                )

                                .newRow()
 .add(cmp.filler().setStyle(stl.style().setTopBorder(stl.pen2Point())).setFixedHeight(10))

                                )//shows report title

                              //  .pageFooter(cmp.pageXofY())//shows number of page at page footer
                                .pageFooter(
                                Templates.footerComponent,
                                 //cmp.text("Emsol Software Solution \t\t\t\t\t\t\t\t"
                               // + " copyright: gauravbvelelx@gmail.com")
                                cmp.horizontalList()
                                .add(cmp.text("Emsol Software Solution").setStyle(footerLeft),
                                cmp.text("copyright: gauravbvelex@gmail.com").setStyle(footerRight))
                                )

              .setDataSource(createDataSource())//set datasource
              .show();//create and show report
        } catch (DRException e) {
            e.printStackTrace();
        }
    }
    private JRDataSource createDataSource() {
        DRDataSource dataSource = new DRDataSource("Col_1", "Col_2");

        dataSource.add("Name","Sample");
                dataSource.add("Age","26");
                dataSource.add("Sex","Female");
                dataSource.add("Weight","53 Kg");
                dataSource.add("BMI","20");
                dataSource.add("Massage Duration (Mins)","4.5");
                dataSource.add("RPM","26");
                dataSource.add("Doctor Attended","Doctor");
                dataSource.add("Date","22-Feb-2013");

        return dataSource;
    }   

    public static void main(String[] args) {
        new DReportSample();
    }
} 
```

这段代码在几个小时前运行良好。但现在它突然显示错误：附加屏幕截图

![在此处输入图像描述](../Images/d6bb669901b8a166ad94e567e94a3fb7.png)

它在 report() 和其他部分也显示了同样的错误。基本上它无法识别动态报告库的各种类和字段，尽管该库已成功导入，但几个小时前它运行良好。

我使用动态报告的方式是添加如下库：

```
1) Downloaded dynamicreports-3.1.0-project-with-dependencies
2) Unzipped
3) In my Netbeans Project
Libraries -> Add Jar/folder -> Selecting all files from dynamicreports-3.1.0-project-with-dependencies\dynamicreports-3.1.0\lib
Libraries -> Add Jar/folder -> Selecting all files from dynamicreports-3.1.0-project-with-dependencies\dynamicreports-3.1.0\dist 
```

![在此处输入图像描述](../Images/a9f227473a348a4018b93d116db27df6.png)

它工作正常，但后来我更改了保存 dynamicreports-3.1.0-project-with-dependencies 的文件夹的名称，因此它给了我添加库的参考错误。所以我再次将其更改为以前的名称，但从那以后我得到了显示的错误。

我已经尝试了一切，构建新项目并按照提到的步骤或重新下载新的 dynamicreports-3.1.0-project-with-dependencies 并再次按照步骤操作。但似乎没有任何效果，因为我离完成我的项目如此接近，这令人沮丧。

任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T12:23:09.163

好的。。解决了。。

下面的行被删除导致错误：

导入静态 net.sf.dynamicreports.report.builder.DynamicReports.*；

# r - 带有包 powerRlaw 的多个幂律图

> ID：15050406
> 
> 赞同：4
> 
> 时间：2013-02-24T09:31:03.543
> 
> 标签：r, plot, power-law

我尝试使用包[powerlaw](https://github.com/csgillespie/poweRlaw)来绘制一些幂律拟合。它似乎适用于单条曲线。但我无法在同一张图上绘制多个图。 [参考：](https://stackoverflow.com/questions/14476426/how-to-plot-degree-distribution-in-r)这个包里有办法吗？【PS我是新手】

```
set.seed(1)
x1 <- ceiling(rlnorm(1000, 4))

x2 <- ceiling(rlnorm(1000, 2))

library(poweRlaw)

pl_d = pl_data$new(x1)
plot(pl_d)

#Now fit the powerlaw
m = displ$new(pl_d)
#Estimate the cut-off
#estimate_xmin(m)
aaa <- estimate_xmin(m)
aaa <- as.data.frame(aaa)
aaa <- aaa[2,1]
x_min <- min(table(x))
m$setXmin(aaa); m$mle()
#Plot the data and the PL line
#plot(m)
lines(m, col=2)

# next POWER LAW graph

#Plot the data
pl_d = pl_data$new(x2)
points(pl_d)

#Now fit the powerlaw
m = displ$new(pl_d)
#Estimate the cut-off
#estimate_xmin(m)
aaa <- estimate_xmin(m)
aaa <- as.data.frame(aaa)
aaa <- aaa[2,1]
x_min <- min(table(x))
m$setXmin(aaa); m$mle()
#Plot the data and the PL line
#points(m)
lines(m, col=3) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T20:05:05.083

您可以使用这些`lines`命令添加多个最佳拟合幂律。因此，使用您的数据：

```
set.seed(1)
x1 = ceiling(rlnorm(1000, 4)) 
```

我们加载包并创建一个离散的幂律对象：

```
m = displ$new(x1) 
```

然后绘制数据

```
plot(m) 
```

接下来，我们为每个幂律设置`xmin`和`alpha`并使用 将其添加到图中`lines`：

```
m$setXmin(100)
p_100 = estimate_pars(m)
m$setPars(p_100)
lines(m, col=2, lwd=2)

##Line 2    
m$setXmin(202)
p_200 = estimate_pars(m)
m$setPars(p_200)
lines(m, col=3, lwd=2) 
```

![在此处输入图像描述](../Images/9ecfa05010df51d2ec84852228bf3df6.png)

* * *

如果你想在同一个图上有多个数据集，最简单的方法是绘制一个数据集，但将数据保存为数据框。例如，生成一些数据集：

```
set.seed(1)
x1 = ceiling(rlnorm(1000, 4))
x2 = ceiling(rlnorm(1000, 5)) 
```

拟合幂律

```
m1 = displ$new(x1)
m1$setXmin(estimate_xmin(m1))

m2 = displ$new(x2)
m2$setXmin(estimate_xmin(m2)) 
```

绘制数据集 2，但将数据另存为`pts2`

```
pts2 = plot(m2) 
```

像往常一样绘制和添加线条：

```
plot(m1)
points(pts2$x, pts2$y, col=3)
lines(m1, col=2)
lines(m2, col=4) 
```

要得到：

![在此处输入图像描述](../Images/f1da78459051f202f2a659cda90fd600.png)

# php - 为什么空键在php数组中将值更改为1？

> ID：15050407
> 
> 赞同：2
> 
> 时间：2013-02-24T09:31:14.277
> 
> 标签：php, arrays, null, boolean

以下是我正在测试的代码 -

```
<?php

error_reporting(E_ALL);

$myarr = array(NULL => "swapnesh", TRUE => 1, 4 => "swap", "swap" => 4, TRUE => NULL, NULL => TRUE );
echo "<pre>";
//var_dump($myarr);
print_r($myarr);
echo count($myarr); 
```

此代码输出 -

```
Array
(
    [] => 1
    [1] => 
    [4] => swap
    [swap] => 4
)
4 
```

有关代码的疑虑/查询 -

1.  为什么将 NULL 作为键将值更改为 1（在第一个索引处）我可以考虑这样一种情况，有人可能会建议，因为 NULL 作为键被使用了两次，所以值被覆盖，但我用 FALSE 检查了它，所以它必须输出 0 但没有输出值这个案例。
2.  在第二个值 1 是空白但它应该是 1。
3.  计数是 4，我认为是 5 或 6，但对于 4，我不确定最后两个值是如何跳过的。

询问之前涉及的搜索 -

在php net上，我检查了文档，发现这是相关的，但在我的情况下无法弄清楚。链接 - [http://php.net/manual/en/language.types.array.php](http://php.net/manual/en/language.types.array.php)

**编辑** 对于第三点，我相信 TRUE & NULL 被使用了两次，所以它的输出 4 但是让我知道它是否确实如此。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T09:42:47.007

您正在使用`print_r`，它使您的输出可读，因此：

1.  NULL 键被从`"swapnesh"`to覆盖`true`，可打印表示`true`为 1
2.  `NULL`并且`false`不产生可打印格式的输出。
3.  计数为 4，因为您要覆盖 2 个键。

要获得更好的变量输出，请使用`var_dump`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T09:41:08.973

> 为什么将 NULL 作为键将值更改为 1（在第一个索引处）我可以考虑这样一种情况，有人可能会建议，因为 NULL 作为键被使用了两次，所以值被覆盖，但我用 FALSE 检查了它，所以它必须输出 0 但没有输出值这个案例。

PHP 将布尔值 FALSE 打印为空字符串。将其类型转换为 int 以获得“0”。

> 在第二个值 1 是空白但它应该是 1。

TRUE 也被用作键两次，因此它的值被覆盖为 NULL，它打印为空字符串。

> 计数是 4，我认为是 5 或 6，但对于 4，我不确定最后两个值是如何跳过的。

您的计数较低，因为数组中的最后两个值正在覆盖数组中的现有值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T09:40:37.973

`null`并且`true`不是有效的密钥。键可以是字符串或整数。`null`并`true`分别转换为空字符串和`1`，这意味着您有几个空字符串/`1`键，它们相互覆盖。

如果您想要自动索引键，请关闭键：

```
$myarr = array("swapnesh", 1, 4 => "swap", "swap" => 4, null, true); 
```

# sql-server - 左连接和内连接的性能差异

> ID：15050414
> 
> 赞同：3
> 
> 时间：2013-02-24T09:32:27.310
> 
> 标签：sql-server, sql-server-2012, left-join, inner-join, outer-join

左连接和内连接在性能方面有什么区别吗？我使用 SQL Server 2012。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-24T10:06:57.813

至少有一种情况`LEFT [OUTER] JOIN`比`[INNER] JOIN`. 我谈论使用`OUTER`而不是获得相同的结果`INNER`。

示例（我使用[AdventureWorks 2008 数据库](http://msftdbprodsamples.codeplex.com/)）：

```
-- Some metadata infos
SELECT  fk.is_not_trusted,  fk.name
FROM    sys.foreign_keys fk
WHERE   fk.parent_object_id=object_id('Sales.SalesOrderDetail');
GO

CREATE VIEW View1
AS 
SELECT  h.OrderDate, d.SalesOrderDetailID, o.ModifiedDate
FROM    Sales.SalesOrderDetail d
INNER JOIN Sales.SalesOrderHeader h ON d.SalesOrderID = h.SalesOrderID
INNER JOIN Sales.SpecialOfferProduct o ON d.SpecialOfferID=o.SpecialOfferID AND d.ProductID=o.ProductID;
GO

CREATE VIEW View2
AS
SELECT  h.OrderDate, d.SalesOrderDetailID, o.ModifiedDate
FROM    Sales.SalesOrderDetail d
INNER JOIN Sales.SalesOrderHeader h ON d.SalesOrderID = h.SalesOrderID
LEFT JOIN Sales.SpecialOfferProduct o ON d.SpecialOfferID=o.SpecialOfferID AND d.ProductID=o.ProductID;
GO

SELECT  SalesOrderDetailID
FROM    View1;

SELECT  SalesOrderDetailID
FROM    View2; 
```

第一个查询的结果：

```
is_not_trusted name
-------------- ---------------------------------------------------------------
0              FK_SalesOrderDetail_SalesOrderHeader_SalesOrderID
0              FK_SalesOrderDetail_SpecialOfferProduct_SpecialOfferIDProductID 
```

最后两个查询的执行计划： ![在此处输入图像描述](../Images/5650a841b56cb41e1562f101cc451c4e.png)

**注 1 / 视图 1：**如果我们查看执行计划，`SELECT SalesOrderDetailID FROM View1` 我们会看到[*FK 消除*](http://blogs.msdn.com/b/conor_cunningham_msft/archive/2009/11/12/conor-vs-foreign-key-join-elimination.aspx)，因为`FK_SalesOrderDetail_SalesOrderHeader_SalesOrderID`约束是可信的并且它只有一列。但是，服务器被迫（因为`INNER JOIN Sales.SpecialOfferProduct`）从第三个表（SpecialOfferProduct）读取数据，即使`SELECT/WHERE`子句不包含该表中的任何列，并且 FK 约束（FK_SalesOrderDetail_SpecialOfferProduct_SpecialOfferIDProductID）（也）是受信任的。发生这种情况是因为最后一个 FK 是多列的。

**Note 2 / View 2：**如果我们想删除读（`Scan`/ `Seek`）上的`Sales.SpecialOfferProduct`怎么办？第二个 FK 是多列的，对于这种情况，SQL Server 无法消除 FK（请参阅之前的 Conor Cunnigham 博客文章）。在这种情况下，我们需要将 替换为`INNER JOIN Sales.SpecialOfferProduct`以`LEFT OUTER JOIN Sales.SpecialOfferProduct`消除 FK。`SpecialOfferID`和`ProductID`列都是，`NOT NULL`我们有一个受信任的 FK 引用`SpecialOfferProduct`表。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-24T10:01:04.823

由于保留了额外的行，外连接可能返回更大的结果集的另一个问题是优化器在创建执行计划时具有更大范围的可能性，因为`INNER JOIN`它是可交换和关联的。

因此，对于以下示例`B`，已编入索引但未编入索引`A`。

```
CREATE TABLE A(X INT, Filler CHAR(8000))

INSERT INTO A 
SELECT TOP 10000 ROW_NUMBER() OVER (ORDER BY @@SPID), ''
FROM sys.all_columns

CREATE TABLE B(X INT PRIMARY KEY, Filler CHAR(8000))

INSERT INTO B
SELECT TOP 10000 ROW_NUMBER() OVER (ORDER BY @@SPID), ''
FROM sys.all_columns

SELECT *
FROM B INNER JOIN A ON A.X = B.X

SELECT *
FROM B LEFT JOIN A ON A.X = B.X 
```

优化器知道`B INNER JOIN A`和 `A INNER JOIN B`是相同的，并生成一个带有嵌套循环的计划，用于查找 table `B`。

![计划](../Images/3a6b42a7f1e6a1c71c19ae7825f6322a.png)

此转换对外连接无效，嵌套循环[仅支持左外连接而不支持右外连接](http://blogs.msdn.com/b/craigfr/archive/2006/08/16/702828.aspx)，因此需要使用不同的连接类型。

但是从实际的角度来看，您应该只选择您需要的连接类型，这将为您提供正确的语义。

# spring - 在开始使用 spring data neo4j 之前，我是否需要了解 spring 框架？

> ID：15050417
> 
> 赞同：1
> 
> 时间：2013-02-24T09:33:07.920
> 
> 标签：spring, neo4j, spring-data-neo4j

这是一个大学项目。教授告诉我们需要将neo4j用于图形数据库，并且由于POJO不能作为节点存储在neo4j中，我们也需要使用spring数据。听起来足够好。当我真正开始编码时，我遇到的教程远远超出了我的想象。示例代码使用了注解、xml、bean 和诸如此类的东西，没有任何关于它们来自哪里的解释。我认为它们都是我没有经验的 spring 框架的一部分。那么在考虑spring neo4j之前我需要学习多少spring？我无法向我的教授寻求帮助，因为他是管理型的人，他知道所有像技术这样的词，但不知道它们是如何工作的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T09:54:39.003

不，您不知道要了解有关 Spring 的所有知识。

我建议从[github](https://github.com/SpringSource/spring-data-neo4j/tree/master/spring-data-neo4j-examples)下载示例并开始使用它们。

我还推荐YouTube 上的这个[网络研讨会。](http://www.youtube.com/watch?v=heC-8Pq2exQ&feature=youtu.be)

还值得一提的是，您*不需要 Spring*在节点和 POJOS 之间来回映射。 [手册中的此页面](http://docs.neo4j.org/chunked/1.8/tutorials-java-embedded-entities.html)显示了一种非常采样的方法。

# c# - (OAuthException - #1) (#1) 创建共享时出错

> ID：15050422
> 
> 赞同：0
> 
> 时间：2013-02-24T09:33:34.537
> 
> 标签：c#, facebook, facebook-graph-api, facebook-c#-sdk

我有一个应用程序可以发布指向我的 2 个页面的链接。我已将访问令牌扩展为永不过期，并为每个页面获取正确的访问令牌，并使用将使用这两个令牌发布到页面的 C# 应用程序。

突然，其中一个页面无法加载到我的粉丝上并显示最新帖子。我收到一个错误：`(OAuthException - #1) (#1) An error occured while creating the share`尝试发帖时。也许页面的管理员更改了设置。我开始检查应用程序的设置。我注意到该`Sandbox`选项已禁用。我启用它；页面开始加载良好，应用程序也可以发布链接。

但是现在应用程序可以在一个页面上发布，而不能在另一个页面上发布。我重新获得了新令牌并尝试在 2 个页面上发布，但同样的情况发生了（应用程序可以发布到能够在旧令牌上发布的同一页面）。我创建了一个新应用程序并尝试使用新应用程序发布，但发生了同样的错误。

```
(OAuthException - #1) (#1) An error occured while creating the share 
```

此错误仅在尝试发布链接时显示。如果我尝试发布消息，它将正常工作。我尝试使用图形 api 资源管理器发布（克服了 C# 应用程序是原因的情况），但图形 api 资源管理器上显示了相同的错误。

奇怪的是，它工作得很好，突然停止了。我问管理员是否更改了页面或应用程序本身的任何设置（尽管他不是开发人员），但他的回答是否定的。

是否存在必须更改的缺失设置？有没有办法让它在同一页面上工作，因为我不想失去页面上的大量喜欢。这个问题的原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:13:37.633

当您的应用程序达到 Facebook 平台为您提供的每日发布限制时，通常会发生此错误，此限制是可变的，取决于用户对您的应用程序的反应，如果他们喜欢和评论，您将获得更大的每日限制，如果他们隐藏帖子和/或报告它你的每日限制减少了，你可以发布的东西类型我也改变了，这就解释了为什么你不能再发布链接了。

# google-maps-api-3 - MarkerWithLabel 标签中心对齐

> ID：15050423
> 
> 赞同：14
> 
> 时间：2013-02-24T09:33:51.307
> 
> 标签：google-maps-api-3, alignment, center

我在 Google Maps API v3 中使用 MarkerWithLabel 扩展。我想将图片下方的标签设置为居中对齐。有一个设置标签位置的 LabelAnchor 属性，我也使用这样的 CSS labelClass：

```
var myMarker = new MarkerWithLabel(
{
    position: latlng,
    draggable: false,
    raiseOnDrag: false,
    map: map,
    labelContent: "my text",
    labelAnchor: new google.maps.Point(25, 0), //(25, 27),
    labelClass: "my_label", // the CSS class for the label
    labelStyle: {opacity: 0.8},
    icon: image,
    labelInBackground: true,
    labelVisible: true,
    clickable: true,
    zIndex: 11
});

.my_label 
{
    color: black;
    background-color: beige;
    font-family: "Lucida Grande", "Arial", sans-serif;
    font-size: 10px;
    text-align: center;
    width: auto;     
    white-space: nowrap;
    padding: 4px;
    border: 1px solid grey;
    border-radius:3px;   
    box-shadow: 2px 2px 20px #888888;
} 
```

是否可以自动对齐标签框，还是需要计算文本宽度并手动设置 LabelAnchor？如果是这样，我如何计算文本宽度？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2018-10-15T09:16:23.770

其他解决方案也可以，但它们要么需要固定宽度、事件挂钩，要么需要您将内容包装在父容器中并添加一堆样式。由于标签是一个可以采用 CSS 样式的 DOM 元素，因此使标签居中的最简单方法是`transform: translateX(-50%)`在 CSS 中简单地使用：

JS：

```
new MarkerWithLabel({
  labelAnchor: { x: 0, y: 30 },
  labelClass: 'marker-label'
}) 
```

CSS：

```
.marker-label {
  transform: translateX(-50%)
} 
```

您可能需要将 labelAnchor X 增加一两个像素，以使其看起来居中。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-01-03T02:29:57.740

不是我的解决方案，但[http://shahjahanrussell.blogspot.com.au/2013/04/make-label-text-in-center-for-google.html](http://shahjahanrussell.blogspot.com.au/2013/04/make-label-text-in-center-for-google.html)上有一篇对我有用的博客文章。本质上：

```
.labels{
    color: #fff;
    font-weight: bold;
    font-size: 14px;
    opacity: 1;
    pointer-events: none;
    text-align: center;
    width: 60px;
    white-space: nowrap;
} 
```

和

```
function initialize() {
        map = new google.maps.Map(document.getElementById("map"), mapOptions);
        var marker = new MarkerWithLabel({
          position: new google.maps.LatLng(0,0),
          draggable: true,
          map: map,
          labelContent: "example",
          labelAnchor: new google.maps.Point(30, 0),
          labelClass: "labels", // the CSS class for the label
          labelStyle: {opacity: 0.75}
        });

      } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-05T10:12:16.210

我发现最简单的方法是给标签一个类（在本例中为“地图标签”），然后在地图加载后使用此代码根据标签的宽度重新定位标签：

```
google.maps.event.addListenerOnce(map, 'tilesloaded', function() {
    $('.map-label').each(function() {
        $(this).css('position', 'absolute');
        $(this).css('margin-left', '-' + ($(this).width() / 2) + 'px');
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-11T19:39:40.610

我必须手动计算和设置 LabelAnchor。还不错……我只是算出标签中左侧填充的数量，然后是长字符串中平均字符的宽度，并添加了该值的一半。

如果浏览器使用的字体与我预期的不同，此方法可能会变得不准确。一个更好的方法可能是构建一个函数，该函数可以通过 javascript 确定标签宽度，然后从那里确定标签宽度的一半。也许在 DOM 的某个地方创建一个临时的不可见标签对象并使用 jQuery 函数来拉宽度。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-18T13:57:27.650

只需这样做：

```
labelContent: "<span><?php echo $airport->name ?></span>", 
```

并使用这种风格：

```
.label-airport {
    font-family: 'Arimo', sans-serif;
    font-size: 11px;
    height: 18px;
    line-height: 18px;
    overflow: visible !important;
}

.label-airport span {
    color: #333;
    background-color: white;
    display: block;
    margin-left: -50%;
    text-align: center;
    font-weight: bold;
    padding: 0px 5px 0px 5px;
    height: 18px;
    width: auto;
    display: inline-block;
    border: 1px solid #009be0;
    white-space: nowrap;
    box-shadow: 3px 3px 5px rgba(0,0,0,0.15);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-28T12:01:59.650

这是一个不需要设置标签宽度的解决方案。当地图的`idle`事件第一次触发时，重新定位每个标签并使其可见。我正在使用[underscore.js](http://underscorejs.org/)来迭代数组。

```
$(document).ready(function() {
    // Remove setAnchor as it resets margin-left.
    MarkerLabel_.prototype.setAnchor = function() {};

    var map = new google.maps.Map(document.getElementById('map'), {});
    var markers = [];
    var locations = [];
    // …

    // Reposition each label and update the initial styles.
    google.maps.event.addListenerOnce(map, 'idle', function() {
        _.each(markers, function(marker, idx) {
            var el = $(".map-label-" + idx);
            var width = el.width();
            var css = { "margin-left": -width / 2.0 + "px", opacity: 1 };
            marker.labelStyle = css;
            el.css(css);
        });
    });

    // Create markers with `labelClass` set to `map-label`.
    // Also set the initial opacity to zero in CSS.
    _.each(locations, function(location, idx) {
        var text = document.createTextNode(location.label);
        var marker = new MarkerWithLabel({
            map: map,
            // …
            labelClass: "map-label map-label-" + idx,
            labelStyle: { opacity: 0 }
        });

        markers.push(marker);
    });
}); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-12-02T02:18:16.890

我通过用 包装标签内容解决了这个问题`<span>`，它在一个宽的、不可见的标签 div 中居中。此方法要求您定义最大标签宽度。

[http://jsfiddle.net/TT26w/7/](http://jsfiddle.net/TT26w/7/)

```
div.label {
    display:block;
    width:500px; /* Maximum width of label */
    margin-left:-250px; /* 1/2 maximum width of label */
    margin-top:-30px; /* vertical offset, negative is up */
    text-align:center;
}

div.label span {
    display:inline-block;
    padding: 5px 10px 5px 10px;
    border-radius: 5px;
    max-width:500px; /* Maximum width of label */
    min-width:50px; /* Minimum width of label */
    overflow:hidden;
    white-space: nowrap;
    text-overflow:ellipsis;
    color:white;
    background-color: rgba(80, 80, 80, 0.9);
} 
```

# c++ - 如何在 linux 上编译 Cfugue 库？

> ID：15050426
> 
> 赞同：1
> 
> 时间：2013-02-24T09:34:46.983
> 
> 标签：c++, linux, g++, vfw

我找到了一个很棒的库：[Cfugue](http://gopalakrishna.palem.in/CFugue.html)。这正是我需要的，但我不能在 linux 上使用它。他们写道，它适用于 ubuntu，但我没有成功：

g++ 说“vfw.h”不存在。据我了解，它代表“Windows 视频”。可以在linux上使用CFugue吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T09:47:00.027

（我假设您正在尝试使用 CMake 构建库，对吗？）

该标题与 Wine 一起提供。具体来说就是Wine的开发包。在大多数 Linux 发行版上，它通常被称为“wine-dev”或“wine-devel”。

请注意，CFugue 是用 C++11 编写的，因此您需要最新的 GCC 版本。4.7 应该工作，4.6 可能工作，但 4.5 很可能不会工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T09:47:12.700

根据[sourceforge的评论](http://sourceforge.net/p/cfugue/code/195/)

```
+IF(${CMAKE_SYSTEM_NAME} MATCHES "Linux")   # Linux specific code
+     SET(CFugue_Dependencies asound)
+ENDIF(${CMAKE_SYSTEM_NAME} MATCHES "Linux") 
```

它应该支持linux构建。

尝试

> cmake < 路径到 cfugue 结帐 >
> 
> 制作

然后根据结果重述您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T00:04:35.020

我不知道这是否会对您有所帮助，因为我仍然无法让 cfugue 在 linux 上运行。我给开发人员发了电子邮件，问他怎么做，他发送了这些说明：

1.  转到下载的源代码“MusicNote”目录并创建一个名为“build”的新目录
2.  cd 到新创建的“构建”目录
3.  发出命令： cmake -G 'Unix Makefiles' ..
4.  完成后，发出命令 make

您应该看到“Linking CXX executable ../Bin/StaticLibTestAppdu”行

如果您输入命令“../Bin/StaticLibTestAppdu”，它应该会运行。

但它仍然对我不起作用。这些是make的最后几行输出，我认为这意味着ALSA有问题，但我不是专家。

```
/home/tom/Workspace/cfuge/CFugue_src_22Jan12/MusicNote/src/MusicNoteLib/MIDIDrivers/AlsaDriver.cpp:167:29: note:   mismatched types ‘const std::fpos<_StateT>’ and ‘std::future_status’
make[2]: *** [CMakeFiles/MusicNoteLib.dir/src/MusicNoteLib/MIDIDrivers/AlsaDriver.cpp.o] Error 1
make[1]: *** [CMakeFiles/MusicNoteLib.dir/all] Error 2
make: *** [all] Error 2 
```

如果 ALSA 是问题所在，我不会感到惊讶。我记得试图让 FreeTTS 在 linux 下的 java 中运行但没有运气，因为 ALSA 驱动程序很糟糕。我在 2008 年第一次将 ubuntu 放在我的笔记本电脑上，声音根本不起作用。我认为较新的版本可以工作，因为它们将pulseaudio设为默认值。但似乎 linux 的声音驱动程序仍然很麻烦。

# json - 解析 JSON 输出问题

> ID：15050427
> 
> 赞同：0
> 
> 时间：2013-02-24T09:35:05.043
> 
> 标签：json, jquery-mobile

我正在调用服务以获取基于国家/地区的语言。当它返回多种语言时，我的以下代码工作正常..但是当它只返回一条记录时，输出不正确（作为“未定义”出现..请咨询。

这是我的代码：

```
$.ajax({
            type: 'POST',
            url: "http://mymethod",
            complete: function () { $.mobile.hidePageLoadingMsg(); },
            dataType: "json",
            contentType: 'application/json',
            data: JSON.stringify({
                "country": countryCode
            }),
            success: function (output, textStatus, jqXHR) {
                $.each(output.geographyInfo, function (i, theItem) {
                    try {
                        languages.push("<option value='" + theItem.languageCode + "'>" + theItem.languageName + "</option>");
                    }
                    catch (error) {
                        alert(error);
                    }
                });
                $(languages.join('')).appendTo("#dpdLanguages").trigger("create");
            }
        }); 
```

这是json输出。

这是只有一种语言时的输出：

{"geographyInfo":{"active":"true","countryCode":"US","countryName":"UNITED STATES","instanceID":"1","languageCode":"EN","languageName" :"English","re​​gionName":"North America"},"reasonDetails":null,"size":"1","status":"true"}

在多种情况下

{"geographyInfo":[{"active":"true","countryCode":"CA","countryName":"CANADA","instanceID":"1","languageCode":"EN","languageName" :"English","re​​gionName":"North America"},{"active":"true","countryCode":"CA","countryName":"CANADA","instanceID":"1","languageCode ":"FR","languageName":"French","re​​gionName":"North America"},{"active":"true","countryCode":"CA","countryName":"CANADA"," instanceID":"2","languageCode":"EN","languageName":"English","regionName":"Americas"}, {"active":"true","countryCode":"CA","countryName":"CANADA","instanceID":"2","languageCode":"FR"," languageName":"French","re​​gionName":"Americas"}],"reasonDetails":null,"size":"4","status":"true"}

是的，udidu，我认为是这样..但是如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T14:11:07.963

这里最简单的解决方案是，如果您只有一个 geographyInfo 元素将其包装在 [] 中，如下所示：

```
{"geographyInfo":[{"active":"true","countryCode":"US","countryName":"UNITED STATES","instanceID":"1","languageCode":"EN","languageName":"English","regionName":"North America"}],"reasonDetails":null,"size":"1","status":"true"} 
```

因此，它将充当单元素数组，您无需更改代码。目前，当只有一个 geographyInfo 元素时，每个循环都会将内部 geographyInfo 项目显示为单独的数组元素，并且会循环 7 次。

这是一个工作示例：

**索引.html：**

```
<!DOCTYPE html>
<html>
<head>
    <title>jQM Complex Demo</title>
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0"/>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://www.dragan-gaic.info/js/jquery-1.8.2.min.js"></script>    
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>    
    <script>
        $(document).on('pagebeforeshow', '#index', function(){     
            $('#populate-button').on('click',function(e,data){     
                $('#dpdLanguages').empty()
                $.ajax({
                    type: 'POST',
                    url: "json.php",
                    complete: function () { $.mobile.hidePageLoadingMsg(); },
                    dataType: "json",
                    contentType: 'application/json',
                    data: "",
                    success: function (output, textStatus, jqXHR) {
                        $.each(output.geographyInfo, function (i, theItem) {
                            try {
                                $('<option>').attr('value',theItem.languageCode).html(theItem.languageName).appendTo("#dpdLanguages");
                            }
                            catch (error) {
                                alert(error);
                            }
                        });
                        $('#dpdLanguages').selectmenu();  
                    }
                });
            });        
        });
    </script>
</head>
<body>
    <div data-role="page" id="index">
        <div data-theme="a" data-role="header">
            <h3>
                First Page
            </h3>
        </div>

        <div data-role="content">
            <a href="#" data-role="button" id="populate-button">Load JSON data</a>
            <select id="dpdLanguages"></select>
        </div>

        <div data-theme="a" data-role="footer" data-position="fixed">

        </div>
    </div>    
</body>
</html> 
```

**jsop.php：**

```
<?php
    echo '{"geographyInfo":[{"active":"true","countryCode":"US","countryName":"UNITED STATES","instanceID":"1","languageCode":"EN","languageName":"English","regionName":"North America"}],"reasonDetails":null,"size":"1","status":"true"}';    
?> 
```

**编辑 ：**

如果您无法更改 JSON 代码，这也可以：

```
$(document).on('pagebeforeshow', '#index', function(){     
    $('#populate-button').on('click',function(e,data){     
        $('#dpdLanguages').empty()
        $.ajax({
            type: 'POST',
            url: "json.php",
            complete: function () { $.mobile.hidePageLoadingMsg(); },
            dataType: "json",
            contentType: 'application/json',
            data: "",
            success: function (output, textStatus, jqXHR) {
                if(typeof output.geographyInfo.length !== 'undefined') {                                      
                    $.each(output.geographyInfo, function (i, theItem) {
                        try {
                            $('<option>').attr('value',theItem.languageCode).html(theItem.languageName).appendTo("#dpdLanguages");
                        }
                        catch (error) {
                            alert(error);
                        }
                    });
                } else {
                    $('<option>').attr('value',output.geographyInfo['languageCode']).html(output.geographyInfo['languageName']).appendTo("#dpdLanguages");
                }
                $('#dpdLanguages').selectmenu();                            
            }
        });
    });        
}); 
```

# c++ - 无法访问在类中声明的私有成员

> ID：15050433
> 
> 赞同：0
> 
> 时间：2013-02-24T09:35:48.357
> 
> 标签：c++, visual-studio-2010, class, private

我有一段代码，它是方法定义

```
Move add(const Move & m) {
    Move temp;
    temp.x+= (m.x +this-x);
    temp.y+= (m.y + this->y);
    return temp;
} 
```

这是类声明

```
class Move
{
private:
    double x;
    double y;
public:
    Move(double a=0,double b=0);
    void showMove() const;
    Move add(const Move & m) const;
    void reset(double a=0,double b=0);
}; 
```

它说

```
1>c:\users\filip\dysk google\c++\consoleapplication9\move.cpp(18): error C2248: 'Move::x' : cannot access private member declared in class 'Move'
1>          c:\users\filip\dysk google\c++\consoleapplication9\move.h(7) : see declaration of 'Move::x'
1>          c:\users\filip\dysk google\c++\consoleapplication9\move.h(5) : see declaration of 'Move'
1>          c:\users\filip\dysk google\c++\consoleapplication9\move.h(7) : see declaration of 'Move::x'
1>          c:\users\filip\dysk google\c++\consoleapplication9\move.h(5) : see declaration of 'Move'
1>c:\users\filip\dysk google\c++\consoleapplication9\move.cpp(18): error C2355: 'this' : can only be referenced inside non-static member functions
1>c:\users\filip\dysk google\c++\consoleapplication9\move.cpp(18): error C2227: left of '->x' must point to class/struct/union/generic type 
```

与 Move::y 相同。Any1 知道那是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-24T09:37:03.550

您需要`add`在`Move`类范围内定义：

```
Move Move::add(const Move & m) const {
    Move temp;
    temp.x+= (m.x +this-x);
    temp.y+= (m.y + this->y);
    return temp;
} 
```

否则，它被解释为非成员函数，无法访问`Move`的非公共成员。

请注意，您可以简化代码，假设两个参数构造函数集`x`和`y`：

```
Move Move::add(const Move & m) const {
    return Move(m.x + this-x, m.y + this->y);
} 
```

# matlab - Matlab中的eval（）命令

> ID：15050437
> 
> 赞同：2
> 
> 时间：2013-02-24T09:36:09.817
> 
> 标签：matlab, eval, speech-recognition

我是 Matlab 编码的初学者。我正在阅读从网上获得的有关语音识别的代码。加载音频波的 .m 文件有这样的代码

```
clc;
name=['S5T0','S5T1','S6T0','S6T1','S7T0','S7T1','S8T0','S8T1','S9T0','S9T1']; %
digit=['0123456789']; %

for d=1:length(digit)
    eval(['x=wavread(''ti_0',digit(d),'apple01.wav.wav'');']);
    for k=1:4:length(name)
          [x1 x2]=vadnew(x);
          eval(['ti_0',digit(d),'F3',name(k:k+3),'=x(100*x1:100*x2);']);  
                           %ti_00F3S0T0=wavread('x(1).wav');
          x=x(x2*100:length(x));
    end
end
save ('F3new.mat', 'ti*'); 
```

有人可以告诉我这条线在做什么吗？：

```
eval(['x=wavread(''ti_0',digit(d),'apple01.wav.wav'');']); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T10:01:44.620

该[`eval`](http://www.mathworks.co.uk/help/matlab/ref/eval.html)函数将给定的字符串计算为 MATLAB 表达式；所以，例如

```
eval('x=1') 
```

将变量设置`x`为`1`. 在这种情况下，它被用来调用`wavread`不同的输入。 [`wavread`](http://www.mathworks.co.uk/help/matlab/ref/wavread.html)是一个读取 WAV 音频文件的函数，例如语句：

```
x=wavread('ti_00apple01.wav.wav'); 
```

将 WAV 文件 'ti_00apple01.wav.wav' 读入变量`x`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T09:49:24.377

它只是将文件读入带有弹头`ti_0dapple01.wav.wav`的变量中，其中是“数字”中的数字之一。eval 评估（“运行”）输入字符串中的代码。`x``d`

为什么代码不只是：

```
 x=wavread(sprintf('ti_0%dapple01.wav.wav',d)); 
```

**很奇怪。**

# javascript - 使用此指针调用公共方法内的方法

> ID：15050438
> 
> 赞同：0
> 
> 时间：2013-02-24T09:36:13.297
> 
> 标签：javascript, module

我在下面的私有/公共方法中使用语法`JavaScript`：

```
function Cars() {
    this.carModel = "";
    this.getCarModel = function () { return this.carModel; }
    this.alertModel = function () {alert (this.getCarModel());}
} 
```

但是当我调用一个方法时`alertModel`它有错误，因为`this`指向`window`对象因此找不到它： `alert (this.getCarModel());`-`this`指向窗口

```
var newObject = new Cars();
newObject.alertModel(); 
```

我也尝试在其中声明这些方法`prototype`，但它的作用相同。

```
Cars.prototype.getCarModel = function () {
    this.getCarModel = function () { return this.carModel; }
}
Cars.prototype.alertModel = function () {
alert (this.getCarModel());
} 
```

我正在做的就是在没有这个的情况下调用它`like`：

```
 Cars.prototype.alertModel = function () {
    alert (newObject.getCarModel());
    } 
```

这是唯一的方法吗？因为在其他方法中它的作品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T09:40:54.743

您的问题是您实际上已经在范围内声明了自由浮动函数。您需要了解 Javascript 中 Scope 和 Context 之间的区别。有趣的是，[Pragmatic Coffeescript 对此](http://pragprog.com/book/tbcoffee/coffeescript)进行了很好的讨论。[这是另一个很好的资源](http://clubajax.org/javascript-scope-and-context-not-the-same-thing/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T09:55:14.210

尝试这个：

```
function Cars() {
    var carModel = "";
    this.getCarModel = function() { return carModel; };
    this.alertCarModel = function() { alert (carModel) };
} 
```

这样 carModel 将是私有的，不能公开访问，只能通过 alertCarModel 和 getCarModel 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T09:57:36.990

尝试这个：

```
function Cars() {
    this.carModel = "";
    this.getCarModel = function () { return this.carModel; }
    this.alertModel = function () {alert (this.getCarModel());}

    return {
     getCarModel: getCarModel,
     alertModel: alertModel
    }
}

var newObject = new Cars();
newObject.alertModel(); 
```

# java - 我在哪里可以找到 com.mathworks.jmi 包

> ID：15050440
> 
> 赞同：0
> 
> 时间：2013-02-24T09:36:17.500
> 
> 标签：java, matlab

我正在使用 jdk 1.7.0_15。我需要使用 com.mathworks.jmi 包。但导入此包会出现“...包不存在”之类的错误。在互联网上搜索，我没有找到任何名为 jmi 的 jar 文件。我很困惑 ：（

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T09:40:01.037

从[matlabcontrol wiki 页面](https://code.google.com/p/matlabcontrol/wiki/JMI)：

> 该接口以 MATLAB 分发的名为 jmi.jar 的 jar 文件的形式出现。它位于 matlabroot/java/jar/jmi.jar，其中 matlabroot 是您的 MATLAB 安装位置（在 Windows 上，它位于 matlabroot\java\jar\jmi.jar）。例如，在带有 MATLAB R2009b 的 OS X 上，它位于 /Applications/MATLAB_R2009b.app/java/jar/jmi.jar。这个 jar 包含的内容完全取决于安装的 MATLAB 版本。里面的所有代码都有根包com.mathworks.jmi，还有很多子包。MATLAB 的后续版本增加了 jmi.jar

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T09:44:25.057

您还必须添加`jar`到类路径中。使用`-cp`命令行上的选项。

# javascript - 如何在舞台画布周围绘制一个循环墙（html5，kineticJS）

> ID：15050442
> 
> 赞同：0
> 
> 时间：2013-02-24T09:36:31.883
> 
> 标签：javascript, jquery, html, kineticjs

```
<script src="/js/kinetic-v4.3.3.min.js"></script>
<script>
$(document).ready(function(){

    var gravity = 0.5;

    var stage = new Kinetic.Stage({

        container: 'stage',
        width: 625,
        height: 366
    });

    var wallLayer = new Kinetic.Layer();
    var walls = [];
    var wallCount = 7;

    for(var i = 0; i < wallCount; i++)
    {
        var y = i * 61;
        walls.push(new Kinetic.Rect({
            x: 0,
            y: y,
            width: 40,
            height: 60,
            fill: '#FF0000'
        }));
      wallLayer.add(walls[i]);
    }

    stage.add(wallLayer);

      var anim = new Kinetic.Animation(function(frame) {
        //wall.vy += gravity;
      //  wall.setY(wall.vy);
      }, wallLayer);

      anim.start();
})

</script>
<div id="stage">

</div> 
```

在这里，我只画了舞台的左侧，有很多墙，将每面墙推成一个数组，但是我怎样才能在一个循环中将相同的内容绘制到顶部、右侧和底部？或者我需要在 4 个循环中完成它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T18:01:25.193

您可以根据以下内容修改您的源代码。在 jsbin.com 中测试过，但不知道如何从那里保存。

```
for (var j=0; j<7; j++) {
  if (i==0 || i==6) {
    wallLayer.add(
      new Kinetic.Rect({
        x: j*61,
        y: i*61, 
        width: 40, 
        height: 60,
        fill: '#FF0000'}) 
    )
  } else if (j==0 || j==6) {
    wallLayer.add(
      new Kinetic.Rect({
        x: j*61,
        y: i*61, 
        width: 40, 
        height: 60,
        fill: '#FF0000'}) 
    )
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T10:17:29.407

You can use two loops since the opposite sides are symmetric. That is, left and right sides; and, top and bottom sides.

The following code is untested and set the dimensions properly.

```
var wallLayer = new Kinetic.Layer();
var walls = [], wallCountX = 11, wallCountY = 7;

/* shorthand */
var addWall = function(x, y, w, h){
    var wall = new Kinetic.Rect({
        x: x, y: y, width: w, height: h, fill: '#FF0000'
    });
    walls.push(wall);
    wallLayer.add(wall);    
};

/* left and right sides are symmetric */
for (var i = 0; i < wallCountY; i++) {
    addWall(0, i * 61, 40, 60);
    addWall(585, i * 61, 40, 60);
}

/* top and bottom sides are symmetric */
for (var i = 0; i < wallCountX; i++) {
    addWall(i * 61, 0, 60, 40);
    addWall(i * 61, 326, 60, 40);
} 
```

# ruby - 如何将 usr/local/bin 添加到 ubuntu 12.0.4 上的路径环境变量？

> ID：15050443
> 
> 赞同：8
> 
> 时间：2013-02-24T09:36:37.150
> 
> 标签：ruby, ubuntu, path

我刚刚在 Ubuntu 12.0.4 上安装了 ruby​​.1.8.6。

我正在从一本书中学习 ruby​​，在安装过程之后它说

> “一旦完成，您应该将 /usr/local/bin 添加到您的 PATH 环境变量中。我假设是 Linux 用户”

我被困住了，因为这家伙有一个错误的假设。

如何将 usr/local/bin 添加到路径环境变量？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-24T09:38:36.297

您可以将其添加到您的`~/.bashrc`文件中：

```
PATH=$PATH:/usr/local/bin 
```

如果你不知道怎么做，你可以在终端中执行这一行：

```
echo "PATH=\$PATH:/usr/local/bin" >> ~/.bashrc 
```

`PATH`您还可以通过在终端中输入来检查您的内容

```
echo $PATH 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-24T09:39:47.587

对于当前的终端会话，您可以：

```
export PATH=$PATH:/usr/local/bin 
```

要获得更永久的解决方案，请编辑`~/.bashrc`并添加上面的行

# java - 使用 HibernateTemplate 的问题：java.lang.NoSuchMethodError:org.hibernate.SessionFactory.openSession()Lorg/hibernate/classic/Session；

> ID：15050453
> 
> 赞同：5
> 
> 时间：2013-02-24T09:38:36.900
> 
> 标签：java, spring, hibernate, spring-mvc

我在 Spring 世界中很新，我正在疯狂地尝试使用**HibernateTemplate**抽象支持类将 Hibernate 集成到 Spring 应用程序中

我有以下类要保留在数据库表上：

```
package org.andrea.myexample.HibernateOnSpring.entity;

import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.Table;

@Entity
@Table(name="person")
public class Person {

@Id
@GeneratedValue(strategy=GenerationType.AUTO)
private int pid;

private String firstname;

private String lastname;

public int getPid() {
    return pid;
}

public void setPid(int pid) {
    this.pid = pid;
}

public String getFirstname() {
    return firstname;
}

public void setFirstname(String firstname) {
    this.firstname = firstname;
}

public String getLastname() {
    return lastname;
}

public void setLastname(String lastname) {
    this.lastname = lastname;
}
} 
```

在它旁边，我创建了一个名为**PersonDAO**的接口，我只定义了我的 CRUD 方法。所以我通过一个名为**PersonDAOImpl**的类实现了这个接口，该类也扩展了 Spring 抽象类**HibernateTemplate**：

```
package org.andrea.myexample.HibernateOnSpring.dao;

import java.util.List;

import org.andrea.myexample.HibernateOnSpring.entity.Person;
import org.springframework.orm.hibernate3.support.HibernateDaoSupport;

public class PersonDAOImpl extends HibernateDaoSupport implements PersonDAO{

public void addPerson(Person p) {
    getHibernateTemplate().saveOrUpdate(p);

}

public Person getById(int id) {
    // TODO Auto-generated method stub
    return null;
}

public List<Person> getPersonsList() {
    // TODO Auto-generated method stub
    return null;
}

public void delete(int id) {
    // TODO Auto-generated method stub

}

public void update(Person person) {
    // TODO Auto-generated method stub

}   

} 
```

（目前我正在尝试仅实现 addPerson() 方法）

然后我创建了一个主类来测试将新对象插入数据库表的操作：

```
package org.andrea.myexample.HibernateOnSpring;

import org.andrea.myexample.HibernateOnSpring.dao.PersonDAO;
import org.andrea.myexample.HibernateOnSpring.entity.Person;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class MainApp {

public static void main(String[] args) {

    ApplicationContext context = new ClassPathXmlApplicationContext("Beans.xml");
    System.out.println("Contesto recuperato: " + context);

    Person persona1 = new Person();

    persona1.setFirstname("Pippo");
    persona1.setLastname("Blabla");

    System.out.println("Creato persona1: " + persona1);

    PersonDAO dao = (PersonDAO) context.getBean("personDAOImpl");

    System.out.println("Creato dao object: " + dao);

    dao.addPerson(persona1);

    System.out.println("persona1 salvata nel database");
}

} 
```

如您所见，**PersonDAOImpl**类**扩展了 HibernateTemplate**，所以我认为它必须包含设置 sessionFactory 的操作......

问题是当我尝试运行这个 MainApp 类时，我得到以下异常：

```
Exception in thread "main" java.lang.NoSuchMethodError: org.hibernate.SessionFactory.openSession()Lorg/hibernate/classic/Session;
    at org.springframework.orm.hibernate3.SessionFactoryUtils.doGetSession(SessionFactoryUtils.java:323)
    at org.springframework.orm.hibernate3.SessionFactoryUtils.getSession(SessionFactoryUtils.java:235)
    at org.springframework.orm.hibernate3.HibernateTemplate.getSession(HibernateTemplate.java:457)
    at org.springframework.orm.hibernate3.HibernateTemplate.doExecute(HibernateTemplate.java:392)
    at org.springframework.orm.hibernate3.HibernateTemplate.executeWithNativeSession(HibernateTemplate.java:374)
    at org.springframework.orm.hibernate3.HibernateTemplate.saveOrUpdate(HibernateTemplate.java:737)
    at org.andrea.myexample.HibernateOnSpring.dao.PersonDAOImpl.addPerson(PersonDAOImpl.java:12)
    at org.andrea.myexample.HibernateOnSpring.MainApp.main(MainApp.java:26) 
```

为什么我有这个问题？我该如何解决？

为了完整起见，我还插入了包含我的依赖项列表的**pom.xml ：**

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>

<groupId>org.andrea.myexample</groupId>
<artifactId>HibernateOnSpring</artifactId>
<version>0.0.1-SNAPSHOT</version>
<packaging>jar</packaging>

<name>HibernateOnSpring</name>
<url>http://maven.apache.org</url>

<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>

<dependencies>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>3.8.1</version>
        <scope>test</scope>
    </dependency>

    <!-- Dipendenze di Spring Framework -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>3.2.1.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-beans</artifactId>
        <version>3.2.1.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>3.2.1.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context-support</artifactId>
        <version>3.2.1.RELEASE</version>
    </dependency>

    <dependency>   <!-- Usata da Hibernate 4 per LocalSessionFactoryBean -->
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>3.2.0.RELEASE</version>
    </dependency>

    <!-- Dipendenze per AOP -->
    <dependency>
        <groupId>cglib</groupId>
        <artifactId>cglib</artifactId>
        <version>2.2.2</version>
    </dependency>

    <!-- Dipendenze per Persistence Managment -->

    <dependency>    <!-- Apache BasicDataSource -->
        <groupId>commons-dbcp</groupId>
        <artifactId>commons-dbcp</artifactId>
        <version>1.4</version>
    </dependency>

    <dependency>    <!-- MySQL database driver -->
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>5.1.23</version>
    </dependency>

    <dependency>    <!-- Hibernate -->
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>4.1.9.Final</version>
    </dependency>

</dependencies>
</project> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T10:57:25.567

您应该使用 Springs Hibernate4 支持

```
import org.springframework.orm.hibernate4.support.HibernateDaoSupport; 
```

更多细节在这里：http: [//blog.springsource.org/2012/04/06/migrating-to-spring-3-1-and-hibernate-4-1/](http://blog.springsource.org/2012/04/06/migrating-to-spring-3-1-and-hibernate-4-1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-03T20:54:46.233

由于`HibernateTemplate`Hibernate 4.x 不再支持并且我当前的项目充斥着使用`HibernateTemplate`我选择创建和使用我自己的自定义`HibernateTemplate`.

而不是扩展`HibernateDaoSupport`我只是`getHibernateTemplate()`向我的 DAO 添加了一个方法。在我的自定义`HibernateTemplate`中，然后我使用`org.hibernate.SessionFactory`来执行相同的操作。

# qt - QProcess调用写函数失败

> ID：15050462
> 
> 赞同：0
> 
> 时间：2013-02-24T09:39:52.330
> 
> 标签：qt, qprocess

我需要调用 QProcess 来启动 xterm，然后我应该向它发送一些数据。为什么这些代码不能正确运行？

```
QProcess proc;
proc.start("xterm");
proc.waitForStarted();
proc.write("ls\n");
proc.waitForFinished();
proc.waitForBytesWritten();
qDebug()<<proc.readAllStandardOutput();//output: nothing
qDebug()<<proc.errorString();//output: "write error" 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T12:10:36.953

您在这里尝试做什么还不是很清楚。您的代码没有意义：您无法将 xterm 'some data' （看起来您希望它为您执行某些命令，此处为*ls*）发送到其标准输入。

如果您想要*ls*的输出，只需执行以下操作：

```
QProcess proc;
proc.start("ls");
proc.waitForFinished();
qDebug() << proc.readAllStandardOutput(); 
```

如果您希望解释器在后台运行，您可以发送命令让它执行（如 shell），您可以执行以下操作：

```
QProcess proc;
proc.start("/bin/sh");
proc.waitForStarted();
Q_FOREACH( QString cmd, QStringList() << "ls" << "date" << "echo test" )
{
    proc.write((cmd + "\n").toLocal8Bit());
    proc.waitForReadyRead();
    qDebug() << proc.readAllStandardOutput().split('\n');
}
proc.write("exit\n");
proc.waitForFinished(); 
```

# javascript - 使用 JavaScript push 方法添加新元素有效，但所有元素都具有最后添加元素的值

> ID：15050472
> 
> 赞同：0
> 
> 时间：2013-02-24T09:41:09.843
> 
> 标签：javascript, arrays

我正在使用 push 方法向现有数组 (st[]) 添加新值。添加一个新值是可行的，但是数组中的所有值都将获得最后添加的元素的值。

```
if(!window.WordCatcher){
    WordCatcher = {};
}

WordCatcher.selector = {};

WordCatcher.selector.getSelected = function(){
    var t = '';
        if(window.getSelection) {t = window.getSelection();}
        else if(document.getSelection) {t = document.getSelection();}
        else if(document.selection) {t = document.selection.createRange().text;}
    return t;
}

st = new Array();

WordCatcher.selector.dblclick = function() {
    st.push(WordCatcher.selector.getSelected());
    console.log(st);
} 
```

在 jQuery 中调用函数：

```
$(document).bind("dblclick", WordCatcher.selector.dblclick); 
```

示例：如果我双击第一个“Die”，第二个“Smart”，第三个“TV”，我将在 firebug 中得到以下日志：

```
[Die { constructor=Selection,  focusNode=textNode,  anchorNode=textNode,  mehr...}] [Smart {constructor=Selection,  focusNode=textNode,  anchorNode=textNode,  mehr...}, Smart {constructor=Selection,  focusNode=textNode,  anchorNode=textNode,  mehr...}] [TV { constructor=Selection,  focusNode=textNode,  anchorNode=textNode,  mehr...}, TV {constructor=Selection,  focusNode=textNode,  anchorNode=textNode,  mehr...}, TV {constructor=Selection,  focusNode=textNode,  anchorNode=textNode,  mehr...}] 
```

也许有人知道我在做什么工作。

最好的问候，安迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T09:48:18.313

我认为您推动了对“t”的引用。

每次更改时-所有数组元素都在更改，因为它们都引用相同的参数=>“t”。

问题可能出在您的函数中：WordCatcher.selector.getSelected

尝试更改它以返回其他内容，然后再次检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T10:17:16.150

内部窗口的选择对象是一种单例，即每个 getSelection() 调用都返回对同一对象的相同引用。因此，您必须手动获取所需的所有数据，或克隆对象，但不要存储即时结果。

# objective-c - 如何从 Objective-c 调用 WCF 函数

> ID：15050473
> 
> 赞同：1
> 
> 时间：2013-02-24T09:41:14.853
> 
> 标签：objective-c, wcf, function

这就是问题所在：有 WCF - [http://www.mathforyou.net/IOSService.svc](http://www.mathforyou.net/IOSService.svc)和函数 - iOSTest。

该函数返回一条带有服务器当前时间的短消息（它没有参数）。

问题 - 我如何从 Objective-C 调用这个函数

对不起我的英语，这是谷歌翻译）））

# python - 为什么python语句yield对游标有这种行为？

> ID：15050474
> 
> 赞同：0
> 
> 时间：2013-02-24T09:41:25.937
> 
> 标签：python, cursor, mysql-python, yield

我有以下代码（我知道如何以正确的方式进行这项工作，但将其作为示例仅用于提出问题并了解错误在哪里）：

```
import MySQLdb
import MySQLdb.cursors
connection = MySQLdb.connect(
        host=host, port=port, user=username, passwd=password, db=database, 
        cursorclass=MySQLdb.cursors.SSCursor)
cursor = connection.cursor()
sql = 'SELECT * FROM EXAMPLE_TABLE'
cursor.execute(sql)

def gen():
    yield cursor.fetchmany(5)

for i in gen():
    print i 
```

第二：

```
def gen():
    yield 'spam'

for i in gen():
    print i

# Process finished with exit code 0 
```

我不明白为什么第二个示例是一次并按原样结束，但第一个示例执行了一次然后冻结并且什么也不做。为什么他不停止退出代码0？

**奇怪的行为**：如果在第二个示例中添加以下行，在循环之前它也会打印“垃圾邮件”和“冻结”：

```
connection = MySQLdb.connect(
        host=host, port=port, user=username, passwd=password, db=database, 
        cursorclass=MySQLdb.cursors.SSCursor)
cursor = connection.cursor()
sql = 'SELECT * FROM EXAMPLE_TABLE'
cursor.execute(sql) 
```

**更新** 答案：只要连接关闭，Python 就不会退出程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T09:47:54.220

我认为在第一种情况下你应该做的是

```
result = cursor.fetchmany(5)

for item in result:
    yield item 
```

`fetchmany`方法获取查询结果的下一组行，返回一个元组列表。

`empty list`当没有更多行可用时返回An 。

# java - 创建动态 log4j 输出文件

> ID：15050476
> 
> 赞同：1
> 
> 时间：2013-02-24T09:41:48.373
> 
> 标签：java, logging, log4j

我正在尝试使用 html 布局制作 log4j 文件。这是我的 log4j 文件

```
# Define the root logger with appender file
log = /usr/home/log4j
log4j.rootLogger = DEBUG, FILE

# Define the file appender
log4j.appender.FILE=org.apache.log4j.FileAppender
log4j.appender.FILE.File=${log}/htmlLayout.html

# Define the layout for file appender
log4j.appender.FILE.layout=org.apache.log4j.HTMLLayout
log4j.appender.FILE.layout.Title=HTML Layout Example
log4j.appender.FILE.layout.LocationInfo=true 
```

这是静态的，但我想让我的主要方法通过这一行

> ```
> log4j.appender.FILE.File=myfilepath/myfilename.html 
> ```

我怎样才能做到这一点？目前我正在尝试使用属性，但它会删除所有内容，并且只显示这一行。

请注意，日志文件路径取决于执行我的项目的 jar 文件的位置，它将是这样的

> (jarDir)/logs/myfilename.html

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T10:46:00.070

您必须直接调用 log4j 配置器，而不是依赖默认的初始化行为。将属性文件命名为 log4j.properties 以外的其他名称，以便默认过程找不到它，然后在您的代码中执行

```
Properties props = new Properties();
// if MyClass is in package com.example, look for
// com/example/log4j-config.properties inside the jar
InputStream in = MyClass.class.getResourceAsStream("log4j-config.properties");
try {
  props.load(in);
} finally {
  in.close();
}

// override file location
props.setProperty("log4j.appender.FILE.File", "myfilepath/myfilename.html");

LogManager.resetConfiguration();
PropertyConfigurator.configure(props); 
```

# c# - EF5 更新断开连接图（n 层）一对多

> ID：15050480
> 
> 赞同：1
> 
> 时间：2013-02-24T09:42:33.417
> 
> 标签：c#, entity-framework-5, one-to-many, n-tier-architecture

**问题：** *在断开连接的图形场景中插入/更新与具有一对多关系的父级相关的实体*。

**更新**

我发现问题只是我添加到 Brewery 的新用户配置文件，第一次插入成功完成（= EF 看到关系并创建正确的插入语句）

```
exec sp_executesql N'insert [dbo].[BreweryUserProfiles]([BreweryId], [UserId])
values (@0, @1)
',N'@0 int,@1 int',@0=12,@1=3 
```

直到现在还没有办法让更新正常工作。

**---**

父实体（Brewery）与 Rank 是一对一的关系，与 UserProfile 是一对多的关系。我为第二个关系使用了一个连接表。当我插入/更新父啤酒厂时，我能够插入/更新等级（即使我必须添加一些代码，EF 也无法保持这种关系）。我无法插入/更新用户资料

**参考**：我使用的是通用存储库 + dbcontextextension，如下所述：http: [//www.martinwilley.com/net/code/data/genericrepository.html](http://www.martinwilley.com/net/code/data/genericrepository.html)

**数据库图**

![在此处输入图像描述](../Images/385fc8a6aa4e21b59d594425f18eb070.png)

**POCO**

```
 [Table("Breweries")]
  public class Brewery : ABrewery
  {
    //PK
    public int BreweryId { get; set; }

    //FK
    public int RankId { get; set; }

    ...

    //Navigation
    public virtual ICollection<BrewMaster> BrewMasters { get; set; }
    public virtual ICollection<UserProfile> UserProfiles { get; set; }
    public virtual Country Country { get; set; }
    public virtual Rank Rank { get; set; }
  }

  public class Rank : IRank
  {
    public int RankId { get; set; }
    public int TotalHits { get; set; }
    public decimal Value { get; set; }
  }

[Table("UserProfiles")]
public class UserProfile : IUserProfile
{
  [Key]
  public int UserId { get; set; }
  public string UserName { get; set; }

  ...

  //Navigation
  public virtual List<Email> Emails { get; set; }
  public virtual List<Social> Socials { get; set; }
  public virtual List<Telephone> Telephones { get; set; }
  public virtual Country Country { get; set; }
} 
```

**实体（啤酒厂）配置**

```
 HasMany(e => e.UserProfiles)
    .WithMany()
    .Map(m =>
    {
      m.MapLeftKey("BreweryId");
      m.MapRightKey("UserId");
      m.ToTable("BreweryUserProfiles");
    });

  Property(e => e.RankId)
    .IsRequired(); 
```

**尝试过的解决方案**

插入/更新 Rank 就足够了

```
public void AddOrUpdate(Brewery entity)
{
  entity.RankId = entity.Rank.RankId;

  _context.AddOrUpdate<Rank>(entity.Rank); //add or update is a dbcontextextension, 
                                           //basically just Add or 
                                           //Attach + change entity status

  _repository.AddOrUpdate(entity); 
```

要更新 BreweryUserProfiles 我尝试：

```
 if (entity.UserProfiles.Count > 0)
  {
    entity.UserProfiles = new List<UserProfile>();
    foreach (var user in entity.UserProfiles)
    {
      entity.UserProfiles.Add(GetUserProfile(user.UserId)); //get userprofile from db
    }
  }

  _repository.AddOrUpdate(entity); 
```

或者

```
 if (entity.UserProfiles.Count > 0)
  {
    entity.UserProfiles = new List<UserProfile>();
    foreach (var user in entity.UserProfiles)
    {
      _context.AddOrUpdate<UserProfile>(this.GetUserProfile(user.UserId)); //that basically is the same
    }
  } 
```

当我尝试对 UserProfile 执行相同操作时，显然 EF 对 UserProfile 表执行了插入/更新（没用..我需要更新 BreweryUserProfiles 表）。如果我理解正确，Rank 正在工作，因为我在 Brewery.RankId 属性中有一个 FK，而我没有（也不想要）Brewery 和 UserProfile 之间的双向导航

我希望我的问题很清楚，我尝试粘贴所有相关代码，但如果需要，我可以提供更多信息。提前致谢

# java - Sql Server 2008 上的 Java Hibernate 保存实体失败

> ID：15050489
> 
> 赞同：1
> 
> 时间：2013-02-24T09:43:48.800
> 
> 标签：java, sql-server-2008, hibernate

我正在使用 Hibernate 4.1.9 创建一个简单的 Java 应用程序。我可以从数据库中检索数据，但是当我尝试插入新记录时，它们没有出现在表中，并且出现了一个我无法弄清楚的错误。

这是输出：

```
feb. 24, 2013 10:01:52 AM org.hibernate.annotations.common.Version <clinit>
INFO: HCANN000001: Hibernate Commons Annotations {4.0.1.Final}
feb. 24, 2013 10:01:52 AM org.hibernate.Version logVersion
INFO: HHH000412: Hibernate Core {4.1.9.Final}
feb. 24, 2013 10:01:52 AM org.hibernate.cfg.Environment <clinit>
INFO: HHH000206: hibernate.properties not found
feb. 24, 2013 10:01:52 AM org.hibernate.cfg.Environment buildBytecodeProvider
INFO: HHH000021: Bytecode provider name : javassist
feb. 24, 2013 10:01:52 AM org.hibernate.cfg.Configuration configure
INFO: HHH000043: Configuring from resource: /hibernate.cfg.xml
feb. 24, 2013 10:01:52 AM org.hibernate.cfg.Configuration getConfigurationInputStream
INFO: HHH000040: Configuration resource: /hibernate.cfg.xml
feb. 24, 2013 10:01:52 AM org.hibernate.cfg.Configuration addResource
INFO: HHH000221: Reading mappings from resource: org/mine/hibernateproject01/UserEntity.hbm.xml
feb. 24, 2013 10:01:52 AM org.hibernate.cfg.Configuration doConfigure
INFO: HHH000041: Configured SessionFactory: null
feb. 24, 2013 10:01:52 AM org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure
INFO: HHH000402: Using Hibernate built-in connection pool (not for production use!)
feb. 24, 2013 10:01:52 AM org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure
INFO: HHH000115: Hibernate connection pool size: 1
feb. 24, 2013 10:01:52 AM org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure
INFO: HHH000006: Autocommit mode: false
feb. 24, 2013 10:01:52 AM org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure
INFO: HHH000401: using driver [sun.jdbc.odbc.JdbcOdbcDriver] at URL [jdbc:odbc:MySqlServer]
févr. 24, 2013 10:01:52 AM org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure
INFO: HHH000046: Connection properties: {user=, password=****}
feb. 24, 2013 10:01:52 AM org.hibernate.dialect.Dialect <init>
INFO: HHH000400: Using dialect: org.hibernate.dialect.SQLServerDialect
feb. 24, 2013 10:01:52 AM org.hibernate.engine.jdbc.internal.LobCreatorBuilder useContextualLobCreation
INFO: HHH000422: Disabling contextual LOB creation as connection was null
févr. 24, 2013 10:01:52 AM org.hibernate.engine.transaction.internal.TransactionFactoryInitiator initiateService
INFO: HHH000399: Using default transaction strategy (direct JDBC transactions)
feb. 24, 2013 10:01:52 AM org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory <init>
INFO: HHH000397: Using ASTQueryTranslatorFactory

java.lang.UnsupportedOperationException
at sun.jdbc.odbc.JdbcOdbcConnection.prepareStatement(JdbcOdbcConnection.java:1750)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at  sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.hibernate.engine.jdbc.internal.proxy.ConnectionProxyHandler.continueInvocation(ConnectionProxyHandler.java:138)
at org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke(AbstractProxyHandler.java:81)
at $Proxy4.prepareStatement(Unknown Source)
at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$2.doPrepare(StatementPreparerImpl.java:105)
at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:166)
at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareStatement(StatementPreparerImpl.java:103)
at org.hibernate.id.IdentityGenerator$InsertSelectDelegate.prepare(IdentityGenerator.java:137)
at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:55)
at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2936)
at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3447)
at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:81)
at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:362)
at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:203)
at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:183)
at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:167)
at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:320)
at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:287)
at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:193)
at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:126)
at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.saveWithGeneratedOrRequestedId(DefaultSaveOrUpdateEventListener.java:204)
at org.hibernate.event.internal.DefaultSaveEventListener.saveWithGeneratedOrRequestedId(DefaultSaveEventListener.java:55)
at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.entityIsTransient(DefaultSaveOrUpdateEventListener.java:189)
at org.hibernate.event.internal.DefaultSaveEventListener.performSaveOrUpdate(DefaultSaveEventListener.java:49)
at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:90)
at org.hibernate.internal.SessionImpl.fireSave(SessionImpl.java:756)
at org.hibernate.internal.SessionImpl.save(SessionImpl.java:748)
at org.hibernate.internal.SessionImpl.save(SessionImpl.java:744)
at org.mine.hibernateproject01.App.main(App.java:31) 
```

这是代码

```
public static void main( String[] args )
{
    Configuration config = new Configuration().configure();    
    ServiceRegistry serviceRegistry = new ServiceRegistryBuilder().applySettings(config.getProperties()).buildServiceRegistry();        
    SessionFactory sessionFactory = config.buildSessionFactory(serviceRegistry);

    Session session = sessionFactory.openSession();

    Transaction tx = null;
    try {
        tx = session.beginTransaction();
        UserEntity u = new UserEntity("name","firstname");

        session.save(u);       <== error occur here
        session.flush();
        tx.commit();
    } catch (Exception e) {
        if(tx!=null){
            tx.rollback();
        }
        System.err.println(e);
    } finally{
        session.close();             
    }
    sessionFactory.close(); 
} 
```

这是 hibernate.cfg.xml ：

```
<hibernate-configuration>
<session-factory>
    <property name="connection.driver_class">sun.jdbc.odbc.JdbcOdbcDriver</property>
    <property name="connection.url">jdbc:odbc:MySqlServer</property>
    <property name="connection.username"></property>
    <property name="connection.password"></property>

    <!-- JDBC connection pool (use the built-in) -->
    <property name="connection.pool_size">1</property>

    <!-- SQL dialect -->
    <property name="dialect">org.hibernate.dialect.SQLServerDialect</property>

    <!-- Enable Hibernate's automatic session context management -->
    <property name="current_session_context_class">thread</property>

    <!-- Disable the second-level cache  -->
    <property name="cache.provider_class">org.hibernate.cache.NoCacheProvider</property>

    <!-- Echo all executed SQL to stdout -->
    <property name="show_sql">true</property>

    <!-- Drop and re-create the database schema on startup -->
    <!-- <property name="hbm2ddl.auto">create</property>-->
    <mapping resource="org/mine/hibernateproject01/UserEntity.hbm.xml"/>
</session-factory>
</hibernate-configuration> 
```

这是 UserEntity 类和配置：

```
public class UserEntity {

    private int UserID;
    private String UserName;
    private String UserFirstName;

    public UserEntity(){

    }

    public UserEntity(String UserName, String UserFirstName) {
        this.UserName = UserName;
        this.UserFirstName = UserFirstName;
    }   

    public int getUserID() {
        return UserID;
    }

    public void setUserID(int UserID) {
        this.UserID = UserID;
    }

    public String getUserName() {
        return UserName;
    }

    public void setUserName(String UserName) {
        this.UserName = UserName;
    }

    public String getUserFirstName() {
        return UserFirstName;
    }

    public void setUserFirstName(String UserFirstName) {
        this.UserFirstName = UserFirstName;
    }    
}

<hibernate-mapping package="org.mine.hibernateproject01" schema="dbo">
    <class name="UserEntity" table="T_USERLIST" lazy="false">
        <id name="UserID" column="UserID" type="java.lang.Integer">
            <generator class="identity"/>
        </id>

        <property name="UserName" column="UserName" type="java.lang.String" length="50" not-null="true"/>
        <property name="UserFirstName" column="UserFirstName" type="java.lang.String" length="50" not-null="true"/>        

    </class>    
</hibernate-mapping> 
```

我可能做错了什么？

对此的任何建议或帮助都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T10:24:16.157

您正在使用 JDBC-ODBC 桥驱动程序，这是一个非常古老的 JDBC 驱动程序，它是在 10 多年前创建 JDBC 时构建的，目的是提供一种将 JDBC 与还没有 JDBC 驱动程序的数据库一起使用的方法，但是有一个 ODBC 驱动程序。这个驱动程序现在已经完全过时了。请改用适用于 SQL Server 的真正 JDBC 驱动程序。

请参阅[http://msdn.microsoft.com/en-us/sqlserver/aa937724.aspx](http://msdn.microsoft.com/en-us/sqlserver/aa937724.aspx)

# mysql - mySQL 查询错误无法更新 FROM 子句

> ID：15050492
> 
> 赞同：0
> 
> 时间：2013-02-24T09:44:20.530
> 
> 标签：mysql, wordpress

我正在尝试使用以下代码`post_title`通过删除其中的第一个单词来更新我的列。

```
UPDATE wp_posts 
SET post_title = (
SELECT SUBSTRING(post_title, LOCATE(' ', post_title)+1) as post_title
FROM wp_posts
WHERE post_type = 'post'); 
```

仅使用此代码时

```
SELECT SUBSTRING(post_title, LOCATE(' ', post_title)+1) as post_title
FROM wp_posts
WHERE post_type = 'post'; 
```

它没有给出任何错误，它显示了所有更新的所有行的列表，但是当我回到表格时，实际上没有任何更新。我假设那是因为这只是选择了所有的行或其他东西。这就是我尝试更新代码的原因，该代码不起作用并出现以下错误

```
You can't specify target table 'wp_posts' for update in FROM clause 
```

有人可以告诉我我的代码有什么问题吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T09:48:24.220

以下应该工作。

```
UPDATE wp_posts SET post_title = SUBSTRING(post_title, LOCATE(' ', post_title)+1) WHERE post_type = 'post'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T09:47:49.923

```
UPDATE  wp_posts a
        INNER JOIN wp_posts b
            ON a.post_type = b.post_type
SET     a.post_title = SUBSTRING(b.post_title, LOCATE(' ', b.post_title) + 1)
WHERE   b.post_type = 'post' 
```

# php - 我的域对象是否应该有一个 isValid() 方法来返回对象的当前状态？

> ID：15050497
> 
> 赞同：1
> 
> 时间：2013-02-24T09:45:08.693
> 
> 标签：php, oop, model-view-controller

我最近将表单数据验证移到了模型层，特别是在域对象设置器中（这是对还是错？）。当我在我的`User`服务中并且我这样做时

```
$user->setFirstName($firstName); 
```

并且输入太长（超过 25 个字符）我应该将域对象中的某种`state`变量设置为不稳定（可能 = 0）并在模型中设置错误消息以在视图中检索吗？

我会通过运行该`isValid()`方法来检查视图中对象的状态。

这是正确的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T09:50:31.223

这更像是一个架构问题，并且有很多答案。[Grails Web 框架](http://www.grails.org/doc/latest/ref/Domain%20Classes/validate.html)对此采取了类似的方法，但会自动神奇地添加`validate()`到域对象中。[CodeIgniter 让您推出自己的类似](http://www.web-design-talk.co.uk/501/validate-data-within-models-codeigniter/).

就个人而言，我喜欢将验证逻辑放入设置器/构造器中，如果我的先决条件不满足，则抛出异常。这意味着您的视图不必询问对象以查看它是否有效，而是您的用户必须确保他们输入有效数据或在不输入有效数据时显式处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T10:31:21.770

我想说**表单**验证与域对象无关。如果提交的表单无效，通常根本没有理由创建/修改域对象，这完全是表现层/用户界面的问题。将用户输入的验证放入域对象中违反了关注点分离原则。

然而，这是一个有争议的问题，没有绝对正确或错误的方法。因为如果你想确保域对象不能处于无效状态（在构造函数和设置器中抛出异常），你最终可能会得到重复的代码。

但是，如果您在域对象中使用验证来进行表单验证，那么您应该更喜欢异常而不是`isValid`状态。对象应始终处于有效状态，这是 OOP 的一大优势

**更新**

对于我放置输入验证的问题：我为每个控制器使用专门的请求对象，并在控制器中使用它们，如下所示：

```
try {
    $user = $this->request->extractUserFromPost();
} catch (ValidationException $e) {
    $this->showValidationError($e->getMessage(), $e->getAffectedFields());
} 
```

这些方法也可以在控制器本身中，但我更喜欢包含尽可能少的自身逻辑的瘦控制器。另一种常见的方法是在一个地方管理表单的生成和验证的表单对象（示例：）[`Zend\Form`](http://framework.zend.com/manual/2.1/en/modules/zend.form.quick-start.html#validating-forms)。如果请求总是来自表单，这是有道理的。我上面的示例适用于 Web 服务以及 HTML 用户界面。

# fluent-nhibernate - 流利的nhibernate将孩子保存在父母的桌子上

> ID：15050498
> 
> 赞同：1
> 
> 时间：2013-02-24T09:45:09.520
> 
> 标签：fluent-nhibernate, fluent-nhibernate-mapping

我有 Ienumerable 和整数，我希望这个列表与父表中的相同。

例如，如果这些是我的 Ienumerables：

```
list1 = {1, 2, 3 ,5}
list2= {2, 3, 4, 8}
list3 = {4 ,3,5 2} 
```

我希望 nhibernate 创建一个像这样的表：

```
parent= | id , item1, item2, item3, item4 |
        | 1,   1,     2,      3,     5  |
        | 2,   2,     3,      4,     8  |
        | 3,   4,     3,      5,     2  | 
```

我尝试使用以下映射：

```
Id(x => x.Id);
//Component(x => x.Cards, m =>  
  m.HasMany()).KeyColumn("cardId").Access.Field());;
  HasMany(x => x.Cards)
    //.KeyColumn("CardIdss").Table("Cardss")
    .Component(y =>
    {
        y.Map(z => z.CardId);
    }); 
```

但它创建了另一个表，这不是我的意图。有什么建议吗？谢谢。

# android - android自定义视图重绘

> ID：15050499
> 
> 赞同：1
> 
> 时间：2013-02-24T09:45:16.207
> 
> 标签：android, view

我正在尝试在`onCreate()`方法 中重绘自定义视图

```
public void onCreate(Bundle savedInstanceState)    
{    
        super.onCreate(savedInstanceState);    
        setContentView(R.layout.main);    
        circleView = (CircleView)findViewById(R.id.circleView);    
        circleView.setCircle(100, 100, 25);    
        circleView.wrapView();    
 } 
```

和自定义视图是：

```
public class CircleView extends View  
{  
    private Paint paint = null;  
    private int x = 50;  
    private int y = 50;  
    private int radius = 50;  
    public CircleView(Context context, AttributeSet attrs)   
    {  
        super(context, attrs);  
        init();  
    }  
    public CircleView(Context context)    
    {  
        super(context);  
        init();  
    }  
    private void init()  
    {  
        paint = new Paint();  
    }   
    public void setCircle(int x, int y, int radius)  
    {  
        this.x = x;  
        this.y = y;  
        this.radius = radius;  
        init();  
        this.invalidate();  
    }  
    @Override  
    protected void onDraw(Canvas canvas)   
    {  
        super.onDraw(canvas);  
        paint.setColor(Color.WHITE);  
        canvas.drawCircle(x, y, radius, paint);  
        Log.e("", "radius : " + radius);  
    }  
        public void setColor(int color)  
    {  
        paint.setColor(color);  
    }  
    public void wrapView()   
    {  
        this.setLayoutParams(new RelativeLayout.LayoutParams(radius*2, radius*2));  
        this.invalidate();  
    }  
} 
```

和xml是：

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/layoutMain"
    >

    <com.pep1439.view.CircleView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/circleView" />

</RelativeLayout> 
```

我只想调整圆圈的大小，但失败了。帮我画任意半径的圆。这该怎么做。如果我使用默认值，它工作正常。当我删除线时，它会画出圆圈`circleView.setCircle(100, 100, 25);`。我想在运行时调整圆圈。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T10:05:47.137

你设置`x`和`y`到`100`和半径到`25`。然后，您将视图的大小调整为`radius*2`，即，因此最后您要在仅大小的视图上的位置`50`绘制一个半径圆。换句话说：**您在视图区域之外绘制圆圈**。`25``100,100``50x50`

# javascript - jQuery on() 未在附加标签时触发

> ID：15050502
> 
> 赞同：0
> 
> 时间：2013-02-24T09:46:19.983
> 
> 标签：javascript, jquery

我有一种感觉，这是我正在犯的一个令人尴尬的简单错误，但我现在看不到它。

我有一个表格，我正在动态地将行附加到 - 每行的最后一列包含一个链接，单击该链接时应删除该行。目前，行添加得很好，但我不知道为什么附加到删除按钮的事件没有触发。我已删除删除代码以使用 console.log() 进行测试，但在控制台中什么也看不到。

我知道 on() 应该使用附加的 HTML，我错过了什么？

[http://jsfiddle.net/52Pbk/](http://jsfiddle.net/52Pbk/)

HTML：

```
 <div id="people">
            <table>
                <tr>
                    <th>First Name</th>
                    <th>Second Name</th>
                    <th>Age</th>
                </tr>
            </table>
        </div>
    <a href="#" id="add">Add</a> 
```

JS：

```
var html = '<tr>';
            html += '<td><input type="text" /></td>';
            html += '<td><input type="text" /></td>';
            html += '<td><input type="text" /></td>';
            html += '<td><a href="#" class="remove_btn">x</a></td>';
        html += '</tr>';

$('.remove_btn').on('click', function() {
       console.log('REMOVE BUTTON CLICKED');            
    //$(this).parent().parent().remove();
                return false;
            });

$('#add').on('click', function() {
    $('#people').append(html);
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T09:52:34.447

您正在将`click`事件处理程序绑定到所有当前的 DOM 元素。您需要`.on()`为将来动态创建的元素使用事件委托的这种语法。

```
$("#people").on("click", ".remove_btn", function(e) {
  console.log('REMOVE BUTTON CLICKED');         
  e.preventDefault();
  return false;
}); 
```

您需要`.on()`在未修改的父元素中使用。我`#people`在这种情况下使用。但是，您也可以使用更接近的父元素来缩小范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T09:54:32.650

当您在 dom 中不可用的元素上应用事件时，就会发生这种情况。因此，您必须将事件委托给其最近的现有父级：

```
$('table#people').on('click', '.remove_btn',function() { 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-24T09:52:17.647

这只是一个订单问题。在调用代码注册 onclick 事件之前，您需要附加 HTML。

```
$('#add').on('click', function() {
    $('#people').append(html);

    $('.remove_btn').on('click', function() {
           console.log('REMOVE BUTTON CLICKED');            
               //$(this).parent().parent().remove();
                        return false;
                });

    return false;
}); 
```

# python - 尝试上传带有 unicode 内容的 XML 时出现 Python ftplib UnicodeEncodeError

> ID：15050506
> 
> 赞同：2
> 
> 时间：2013-02-24T09:46:53.677
> 
> 标签：python, ftplib, python-unicode

我正在尝试使用 ftplib 将带有 unicode 内容的 XML 上传到 FTP 服务器，但是当我尝试使用 storbinary 方法上传时出现以下异常。XML 数据已正确编码为 un​​icode (utf-8)，我已经确定了这一点，我不确定为什么 storbinary 在上传时尝试将其编码为“ascii”。有人可以帮忙吗？

```
--> 429 ftp.storbinary("STOR file.xml", xml)
    430
    431 def 运行（自我）：

/usr/lib/python2.7/ftplib.pyc in storbinary(self, cmd, fp, blocksize, callback, rest)
    第463章
    464 如果不是 buf：中断
--> 465 conn.sendall(buf)
    466 如果回调：回调（buf）
    第467章

/usr/lib/python2.7/socket.pyc 在 meth(name, self, *args)
    222
    第223章
--> 224 返回 getattr(self._sock,name)(*args)
    225
    226 for _m in _socketmethods:

UnicodeEncodeError：“ascii”编解码器无法在位置 3368 编码字符 u'\xae'：序数不在范围内（128）

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T11:17:32.090

您应该将以二进制模式打开的文件传递给`ftp.storbinary()`. 例如，如果要将 Unicode 字符串作为`filename`文件上传：

```
import io

assert isinstance(unicode_string, unicode)
file = io.BytesIO(unicode_string.encode("utf-8"))
ftp.storbinary("STOR filename", file) 
```

如果`unicode_string`包含xml；确保 xml 声明中使用的字符编码与您用于存储文件的编码一致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T14:28:20.190

我能够找到解决方案，@Cairnarvon 的评论部分正确，我正在对字符串进行编码，但是写入 StringIO 实例的字符串的其他位未编码。最后，我最终创建了 XML 位并将其编码为一个整体。您可以在下面的 pastebin 链接中看到我的代码；

[http://pastebin.com/GugTLRQJ](http://pastebin.com/GugTLRQJ)

# c# - 将 XML 反序列化为模型而无需任何模糊处理

> ID：15050515
> 
> 赞同：3
> 
> 时间：2013-02-24T09:47:57.137
> 
> 标签：c#, .net, xml-serialization

我有一个普通的旧 XML 文件。通过一些`XSD.EXE`魔法，我做了一个模型。现在我想将 XML 数据读入模型。通常这只是`XmlSerializer.Deserialize`，但它一直在抱怨命名空间等等。

现在事情是这样的：我不关心名称空间或 XML 中的任何其他内容。我只希望反序列化与“简单的单行”一起工作。我计划在我的生活中解析大量的 XML，我不想花时间与我们都知道不重要的细节的臃肿格式作斗争。

所以我正在寻找一个用于 .Net 的 XML 反序列化器，它可以消除模糊，只需看到 a`<obj> <Name> ...`并将其数据放入`public string Name { get; set; }`. 它不应该比例如更难`MyObj myObj = SimpleXml.Deserialize<MyObj>(xmlString);`。很像 JSON 反序列化器的工作方式。

我在哪里可以找到像我描述的那样易于使用的 XML 反序列化器？

我明白这限制了我的 XML 阅读能力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T10:29:20.793

I am using this kind of helpers for my UI clients.

```
public string Serialize<T>(T o)
{
    var x = new XDocument();
    using(var w = x.CreateWriter())
        new XmlSerializer(typeof(T)).Serialize(w, o);
    return x.ToString();
}

public T Deserialize<T>(string s)
{
    return
        (T)new XmlSerializer(typeof(T))
        .Deserialize(XDocument.Parse(s)
        .CreateReader());
} 
```

Beware if you are using windows services, there is a known memory leak in Serialization: [http://dotnetcodebox.blogspot.fr/2013/01/xmlserializer-class-may-result-in.html](http://dotnetcodebox.blogspot.fr/2013/01/xmlserializer-class-may-result-in.html)

To avoid this, I suggest you to replace the `new XmlSerializer` of the code above by a method that creates/retrieves XmlSerializers from a cache (a Dictionary for example) as it is explained in the blog post.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T17:44:24.200

使用 xsd.exe 遇到了同样的问题，我不想有一个巨大的自动生成文件，我需要修复它才能使其工作，我花了几个小时来使反序列化与黑客和删除命名空间一起工作，等等.

如果您想要一个没有 fuzz 的单行解决方案，请尝试[xsd2code](http://xsd2code.codeplex.com/) ( [http://xsd2code.codeplex.com/](http://xsd2code.codeplex.com/) )，它可以正常工作。请注意，您需要阅读有关生成类的小指南，以便在生成之前获得所有设置，您不能只单击生成，至少对我来说它没有正确的默认设置，但它是轻而易举地正确设置。

所以我做了：

1.  用xsd.exe（xsd Hoorah.xml）生成xsd，xsd.exe的那部分没问题。
2.  使用 xsd2code 生成类（安装并查看指南）
3.  使用了 xsd2code 生成的类自带的反序列化方法

    ```
    var hoorah = Hoorah.Deserialize(xml); 
    ```

只是工作！

# mysql - 在现有列的值中添加字符

> ID：15050520
> 
> 赞同：4
> 
> 时间：2013-02-24T09:48:10.467
> 
> 标签：mysql, sql, sql-server, tsql

我需要将字符添加到列中的值。例如：

```
Price column
22.99
12.95
10.35 
```

对于我的查询输出，我需要此列显示为

```
Price column
Price is 22.99
Price is 12.95
Price is 10.35 
```

我已经使用它来将这些值转换为 char，因为我认为我必须这样做才能在此列中插入字符...

```
CONVERT (char(12), price) AS price 
```

我只是不知道如何编写命令以在每一行中添加“价格为”:(

请帮忙，谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-24T09:50:06.787

`INT`如果列的数据类型是或*数字*，则不能永久执行此操作，但您可以在`SELECT`语句中执行此操作，

在`MySQL`：

```
SELECT  CONCAT('Price is ', priceColumn) Price_Column
FROM    tableName 
```

在`TSQL`

```
SELECT  'Price is ' + CAST(priceColumn AS VARCHAR(15)) Price_Column
FROM    tableName 
```

* * *

但是如果您将该列的数据类型更改为字符串（`VARCHAR()`），那么您可以简单地执行`UPDATE`命令

在`MySQL`,

```
UPDATE  tableName
SET     priceColumn = CONCAT('Price is ', priceColumn) 
```

在`TSQL`

```
UPDATE  tableName
SET     priceColumn = 'Price is ' + CAST(priceColumn AS VARCHAR(15)) 
```

# c++ - 为什么我得到一个输出'b(1) dc dvfunc'？

> ID：15050522
> 
> 赞同：0
> 
> 时间：2013-02-24T09:48:17.113
> 
> 标签：c++

我在这里的预期输出是“bc bvfunc b(1) dc dvfunc”，但我得到了一个像“b(1) dc dvfunc”这样的输出，为什么会这样？有人可以帮帮我吗？感谢您宝贵的时间！

```
#include<iostream>

using namespace std; 

class b {
 public:
  b() {
    cout<<" bc ";
    b::vfunc();
  }
  virtual void vfunc(){ cout<<" bvfunc "; }
  b(int i){ cout<<" b(1) "; }
};

class d : public b {
public:
  d(): b(1) {
    cout<<" dc ";
    d::vfunc();
  }
  void vfunc(){ cout<<" dvfunc"; }
};

main()
{
  d d;  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T09:52:37.997

事情完成的顺序：

d() 被调用。这会调用 b(1)，然后调用构造函数的其余部分。

所以调用顺序是

```
b(1)
d() -> which is cout fc, and then cout dvfunc 
```

b() 永远不会被调用，所以它不会到达 bvfunc。b() 和 b(int i) 都是独立的构造函数，并且只会调用一个，而不是两者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T09:57:30.497

要获得所需的输出，您需要

```
d(){b(1);      //move b(1) from initializer list and put it in a constructor.  
    cout<<" dc "; 
```

FYI`initializer list`用于`initialize`在构造函数调用默认值之前类的成员。构造函数可以覆盖这些值。

# jquery - 阿贾克斯选择外卡搜索结果

> ID：15050529
> 
> 赞同：1
> 
> 时间：2013-02-24T09:49:14.777
> 
> 标签：jquery, wildcard, bootstrapper

我将 ajax-chosen 用于表单的选择字段。

```
$('#importers_tag').ajaxChosen(
    {
        dataType : 'json',
        type : 'POST',

        url : site_url + '/dashboard/load_products'
    },
    {
        generateUrl : function(q) {
            return site_url + '/dashboard/load_products/'
                    + encodeURIComponent($('#importers_tag').val()) //dynamic url to avoid duplicate in result
        },
        loadingImg : baseUrl
                + '/resources/js/plugins/chosen/loading.gif'
    }); 
```

我在 ajax 请求中的查询是通过以下查询

```
$query = $this->db->query('select * from product where product_id not in ('.$not_in.') and product_name like "%'.$q.'%"'); 
```

但是 ajax 选择的选择选项会产生“product_name like '$q%'”

我想通过两边的通配符给出选择结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T10:05:16.723

尝试另一种方式，您可以查看[http://api.jquery.com/serialize/](http://api.jquery.com/serialize/)并使用 jQuery ajax 并通过序列化发送表单数据，在后端您可以处理这些参数并进行干净的查询，而不是你可以做任何你喜欢的结果。

# visual-studio - Visual Studio Express 2012 无法打开包含文件：'windows.h'：没有这样的文件或目录

> ID：15050539
> 
> 赞同：5
> 
> 时间：2013-02-24T09:50:34.307
> 
> 标签：visual-studio, visual-c++

当我运行我的项目时，出现致命错误：

```
 Cannot open include file: 'windows.h': No such file or directory
 Cannot open include file: 'd3d11.h': No such file or directory
 Cannot open include file: 'd3dx11.h': No such file or directory 
```

我已经安装了 SDK，有人告诉我必须为 SDK 目录设置正确的路径，但我不知道在哪里做，在`Tools->Options->Projects`和我看到的解决方案中`"Option has been deprecated"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-15T22:28:45.497

@Kanglai 可能就在这里，但您看到的与 D3D 标头相关的错误有所不同。DX SDK 与 Windows SDK 分开提供。请参阅 MSDN 上的这篇文章。

[DirectX SDK 在哪里？](http://msdn.microsoft.com/en-us/library/windows/desktop/ee663275%28v=vs.85%29.aspx)

Visual C++ 处理目录的方式在最近的版本中发生了变化，因此出现了不推荐使用的消息。以下博客文章解释了这些更改以及如何在较新版本的 VS 中执行相同的操作。

[VC++ 目录](http://blogs.msdn.com/b/vsproject/archive/2009/07/07/vc-directories.aspx)

# drupal - 从代码更改节点中的字段

> ID：15050541
> 
> 赞同：1
> 
> 时间：2013-02-24T09:51:00.463
> 
> 标签：drupal, drupal-7

如何在 Drupal 7 中访问节点中的字段。我已经尝试过，但不起作用。

```
 $node=node_load($nid);
 $node->field_num[LANGUAGE_NONE][0]['value']=$num; 
```

我想我必须更具体：我首先创建一个节点并在一些字段上设置值，如下所示：

```
 $values = array(
'type' => 'scorings',
'uid' => $user->uid,
'status' => 1,
'comment' => 0,
'promote' => 0,
);
 $entity = entity_create('node', $values);
 $ewrapper = entity_metadata_wrapper('node', $entity);
 $entity->field_rond_nid[LANGUAGE_NONE][0]['value']=$nid_scorekort;
 $entity->field_golfid[LANGUAGE_NONE][0]['value']=$form_state['values']['golfid_1'];
 $ewrapper->save(true);
 entity_save('node', $entity);
 $nid=$entity->nid; 
```

这工作正常。然后我想从另一个函数（将 nid 传递给它）访问该节点的结束集值到另一个字段（field_score_1）。我试过这个：

```
 $node=node_load($nid, 'my_content type');
 $node->field_score_1[LANGUAGE_NONE][]['value'] = $my_value; 
```

但这不起作用。node_load 的接缝不允许我访问这些字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T18:29:20.927

你的`node_load()`电话不正确。

[`node_load()`](http://api.drupal.org/api/drupal/modules!node!node.module/function/node_load/7)来自函数声明的 Drupal API 文档是：

```
node.module node_load($nid = NULL, $vid = NULL, $reset = FALSE) 
```

你的第二个参数是一个字符串，而不是一个数字，就像 $vid 那样。

如果`node_load()`返回 a`FALSE`则失败。

也许您想[`EntityFieldQuery()`](http://api.drupal.org/api/drupal/includes!entity.inc/class/EntityFieldQuery/7)改用？

# twitter-bootstrap - 错误选项：';_;' 在构建 Twitter Bootstrap 时

> ID：15050547
> 
> 赞同：7
> 
> 时间：2013-02-24T09:51:51.410
> 
> 标签：twitter-bootstrap, compilation, customization, jshint

我刚刚安装并配置了环境以在本地构建自定义版本的 Twitter Bootstrap。

这就是我所做的：

1.  安装节点
2.  安装 npm
3.  少安装
4.  在本地克隆 Bootstrap
5.  运行`make build`编译 Bootstrap

**第 5 步：**

```
~/devel/parking/bootstrap$ make build
jshint js/*.js --config js/.jshintrc

js/bootstrap-affix.js: line 23, col 17, Bad option: ';_;'.
js/bootstrap-alert.js: line 23, col 17, Bad option: ';_;'.
js/bootstrap-button.js: line 23, col 17, Bad option: ';_;'.
js/bootstrap-carousel.js: line 23, col 17, Bad option: ';_;'.
js/bootstrap-collapse.js: line 23, col 17, Bad option: ';_;'.
js/bootstrap-dropdown.js: line 23, col 17, Bad option: ';_;'.
js/bootstrap-modal.js: line 23, col 17, Bad option: ';_;'.
js/bootstrap-popover.js: line 23, col 17, Bad option: ';_;'.
js/bootstrap-scrollspy.js: line 23, col 17, Bad option: ';_;'.
js/bootstrap-tab.js: line 23, col 17, Bad option: ';_;'.
js/bootstrap-tooltip.js: line 24, col 17, Bad option: ';_;'.
js/bootstrap-transition.js: line 23, col 17, Bad option: ';_;'.
js/bootstrap-typeahead.js: line 23, col 17, Bad option: ';_;'.

13 errors
make: *** [test] Error 2 
```

**第 23 行：**

```
"use strict"; // jshint ;_; 
```

我能够解决`// jshint ;_;`从第 23 行删除的问题。不过，我更愿意保留 Bootstrap 源。

我怎样才能摆脱这些错误以及“错误选项”错误是什么意思？

* * *

**js/.jshintrc：**

```
{
    "validthis": true,
    "laxcomma" : true,
    "laxbreak" : true,
    "browser"  : true,
    "eqnull"   : true,
    "debug"    : true,
    "devel"    : true,
    "boss"     : true,
    "expr"     : true,
    "asi"      : true
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-22T17:45:09.817

今天的问题是 JSHint 的最新版本与当前的 Bootstrap Makefile 不兼容，因为以前的静默警告现在会引发错误。

删除 JSHint `npm uninstall jshint`，然后安装 0.9.1 版本`npm install jshint@0.9.1`。最后运行`make`，编译成功。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-24T18:03:17.527

我刚才遇到了同样的错误，在搜索引导问题后，

我找到了解决方案，请看这些： [https ://github.com/twitter/bootstrap/pull/5244](https://github.com/twitter/bootstrap/pull/5244) [https://github.com/twitter/bootstrap/issues/7043](https://github.com/twitter/bootstrap/issues/7043)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-31T09:57:28.643

简单地卸载 JSHint 并没有为我做这件事。这是我按照[这个建议](https://groups.google.com/d/msg/twitter-bootstrap/cFy3J0nhfwM/65fEnkOTPGYJ)所做的。

```
cd bootstrap
npm uninstall -g uglify-js jshint recess connect
npm uninstall uglify-js jshint recess connect
npm install 
mkdir bin
cd bin
ln -s ../node_modules/*/bin/* . ; ln -s hint jshint
cd ..
export PATH=$PATH:$PWD/bin 
```

在清理之后运行：

```
make 
```

或任何其他 make 指令。

# android - OnTouchEvent 问题 Android

> ID：15050549
> 
> 赞同：3
> 
> 时间：2013-02-24T09:51:57.877
> 
> 标签：android, touch-event

我对 OnTouchEvent 感到沮丧。我只想检测 5 个手指。我怎样才能做到这一点？问题还在于它多次调用。这是我的代码：

```
@Override
public boolean onTouch(View v, MotionEvent event) {
    // TODO Auto-generated method stub

    int pointerCount = event.getPointerCount();

    System.out.println("My pointer....." + pointerCount);

    final int action = event.getAction();

       if(action == MotionEvent.ACTION_UP) {

           if(pointerCount >= 4){

           Log.d("MyActivity", "in onTouchEvent!");
          Toast.makeText(MyclassActivity.this, "Finger !!"+pointerCount,Toast.LENGTH_SHORT).show();

             Intent z = new Intent(MyclassActivity.this,
                        DashboardActivity.class);
                startActivity(z);
            finish();
           }      

    }

        return super.onTouchEvent(event);
    } 
```

我对这件事不满意。让我在您的帮助下准确计算 5 个手指，并避免多次调用 onTouchevent。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T10:12:35.370

我相信`MotionEvent.ACTION_POINTER_UP`每次您从屏幕上移开一根手指时都会被调用。因此，如果您用 5 根手指触摸屏幕，它会变成 1 次以上。尝试`MotionEvent.ACTION_UP`在您的实现中使用。数数所有手指 -> 检查何时`MotionEvent.ACTION_UP`调用 -> 仅当最高手指数为 5 时才编写代码。

```
int maxPointercount; 
int previousPointercount; 

@Override
    public boolean onTouch(View v, MotionEvent event) { 

     int currentpointerCount = event.getPointerCount();

     Log.d("1", "My pointer = " + currentpointerCount); //what does it say here?

     final int action = event.getAction();
          switch (action & MotionEvent.ACTION_MASK) {
               case MotionEvent.ACTION_POINTER_DOWN:          
                 if(maxPointercount <= previousPointercount){
                 maxPointercount = currentpointerCount;
                }
                previousPointercount = currentpointerCount;
          }  

    if(action == MotionEvent.ACTION_UP) {
       Log.d("3", maxPointercount + " = maxPointercount");
       if(maxPointercount == 5){ //or whatever amount of fingers, try it out. 

          //your code that will run 1 time

       }
          maxPointercount = 0;
          previousPointercount = 0;      

     }
     return super.onTouchEvent(event);
} 
```

编辑：再次修复它！现在它确实有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T17:09:57.667

我很难知道它是如何工作的，所以这是我想出的基本内容

```
public boolean onTouchEvent(MotionEvent event){
    int eventaction = event.getAction();
    String str= "";
    //touch Events, i came up with the mask 5 by trial, hope it works for all devices
    //eventaction == 0 match the first touch event ever
    if( ( eventaction & 5 ) == 5  || eventaction == 0 ){
        str= "Touch Event";
    }
    //Release Event, i came up with the mask 6 by trial, hope it works for all devices 
    //eventaction == 1 match the last release event ever, this makes it hard to know wich finger was removed 
    if( ( eventaction & 6 ) == 6  || eventaction == 1 ){
        str= "Release Event:";
    }
    if( eventaction == 2 ){
        str= "Move Event:";
        return true;//it will make a mess in the logcat, if u want remove this line
    }
    str += " With Number Of fingers " + event.getPointerCount() ;
    str += ", the finger triggered the event is : finger ";
    //some stupid thing i have done, but it works 
    //these numbers was made based on the binary mask that i was able to figure out
    //but it still has an issue with the last finger removed as its eventaction  is always 0, but this can be pragmatically known by monitoring each finger touch and release 
    switch ( eventaction ){
    case 0:
    case 5:
    case 6:
        str += "1";
        break;
    case 261:
    case 262:
        str += "2";
        break;
    case 517:
    case 518:
        str += "3";
        break;
    case 773:
    case 774:
        str += "4";
        break;
    case 1029:
    case 1030:
        str += "5";
        break;
    case 1285:
    case 1286:
        str += "6";
        break;
    case 1541:
    case 1542:
        str += "7";
        break;
    case 1797:
    case 1798:
        str += "8";
        break;
    case 2053:
    case 2054:
        str += "9";
        break;
    case 2309:
    case 2310:
        str += "10";
        break;
    }
    Log.d("Test", str );
    return true;
} 
```

希望这对任何人都有帮助，如果您仍然缺少信息，那么我很乐意提供帮助^_^。

# security - 国防部密码复杂性：用户不能重复使用他们以前的任何 X 密码

> ID：15050553
> 
> 赞同：9
> 
> 时间：2013-02-24T09:52:24.103
> 
> 标签：security, encryption, passwords, complexity-theory, stig

我已经看到了一些关于此的帖子，但我还没有看到明确的答案。因此，我想我会尝试在新的背景下（国防部）重申这个问题。

根据 DISA 的“***[应用程序安全和开发 STIG，V3R2](http://iase.disa.mil/stigs/a-z.html)*** ”，第**3.1.24.2 节密码复杂性和维护**，DoD 企业软件对密码有相当严格的指导：

*   密码长度必须至少为 15 个字符。

*   密码必须包含大写字母、小写字母、数字和特殊字符的组合。

*   更改密码后，用户不得使用姓名、电话号码、帐户名称或字典单词等个人信息。

*   密码必须在 60 天后过期。

*   用户不得重复使用之前的 10 个密码中的任何一个。

*   确保应用程序能够在更改密码时要求新帐户密码与以前的密码至少相差四个字符。

*   用户每天更改密码的次数不得超过一次，管理员或特权用户除外。特权用户可能需要重置用户忘记的密码，并且可以每天多次更改密码。

如[NullUserException 的帖子](https://stackoverflow.com/questions/7265782/checking-password-complexity-different-from-last-x-passwords)中所述，为了让开发人员真正能够检查最后 X 数量的密码（并确保新密码与以前的密码不同 [**项目符号 6** ]），必须使用可逆密码对密码进行加密方法，而不是散列密码（即使我使用的是 NSA 批准的加密算法，这也更加不安全）。提议的答案似乎很有意义，尽管似乎存在一些差异和争论，如[Dan Vinton 的帖子](https://stackoverflow.com/questions/457471/password-complexity-strategies-any-evidence-for-them)所示。

我想这里真正的问题是，*是否有人能够实现所有这些看似常见的密码复杂性约束，而不会真正降低其系统的安全性*？

* * *

**编辑：**漏洞 APP3320.7（要点 6）指出“确保应用程序有能力在更改密码时要求新帐户密码与以前的密码至少相差四个字符。” 这让我相信我必须运行一个字符串相似度算法，比如 Levenshtein 来检查相似度。我不能在哈希/盐上这样做。如果我在这里错了，请告诉我？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-24T10:30:42.487

所述的字符距离要求仅适用于（一个）前一个密码，而不是前 10 个密码。假设您的密码工具需要输入当前密码和新密码，您只需检查一下即可；无需在那里存储任何东西。（也注意到你提到的帖子的[这个答案。）](https://stackoverflow.com/a/7266812/344821)

当然，不匹配前 10 个密码中的任何一个的要求是通过检查旧哈希值来处理的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T10:02:59.800

使用可逆方法生成密码派生密钥不是一种安全的做法，您不得这样做。您也不能存储纯文本身份验证信息。由于您将存储密钥（可能还有盐，如果您喜欢这种恋物癖），保留最后 10 个密钥的副本并对照它们检查新提交的密码是微不足道的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-04-26T21:29:31.873

要求新密码与之前的 N 个密码相差 M 个字符是很疯狂的，因为这意味着密码历史要么是明文要么是可逆加密的，这两者都不安全。

当存储空间成本过高时，将密码历史限制为“最后 N 次”并因此将密码更改频率限制为“每天一次”是有意义的，但在存储空间非常便宜的今天却毫无意义。一个更合理的策略是“新密码不能与任何已知的旧密码相同”并保持不变。抛弃“最后 N 个”并抛弃“每天最多一次”规则，该规则只是为了防止用户绕过历史记录。

一些密码管理系统支持这种配置（并且已经支持了很多年）。示例：[https ://hitachi-id.com/password-manager/features/password-policy-enforcement.html](https://hitachi-id.com/password-manager/features/password-policy-enforcement.html)

# android - 以编程方式设置视图高度Android

> ID：15050556
> 
> 赞同：0
> 
> 时间：2013-02-24T09:52:36.310
> 
> 标签：android, android-layout, android-custom-view

我用公共方法定义了一个自定义视图：

```
public void setHeight(int height) {
    //this.getLayoutParams().height = height; --- NOT WORKING
    this.setLayoutParams(new RelativeLayout.LayoutParams(LayoutParams.MATCH_PARENT, height)); // --- WORKING 
```

当我使用注释掉代码时它不起作用（意味着调用此方法时视图高度没有改变），但是当我使用第二个短语时它按预期工作。

什么可以解释这种行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T09:56:55.667

这很容易 - 只需查看以下代码`setLayoutParams()`：

```
 public void setLayoutParams(ViewGroup.LayoutParams params) {
     if (params == null) {
         throw new NullPointerException("Layout parameters cannot be null");
     }
     mLayoutParams = params;
     if (mParent instanceof ViewGroup) {
         ((ViewGroup) mParent).onSetLayoutParams(this, params);
     }
     requestLayout();
 } 
```

看？`requestLayout()`它在设置布局参数后调用。

顺便说一句：Android 源代码可以在[www.grepcode.com](http://www.grepcode.com)找到，而且通常很有帮助。

# php - php 生成的按钮中的 JavaScript

> ID：15050558
> 
> 赞同：0
> 
> 时间：2013-02-24T09:52:38.943
> 
> 标签：php, javascript

下面的代码打印一个按钮，如图所示。这些按钮适用于除 IE 之外的所有浏览器。我怎样才能在上面添加javascript？

```
print "<td>" ."<a href='advancedview.php?id=$uniqueid' STYLE='text-decoration: none'><input type='Button' value='More Details' style='width:100%;height:30%'> </a>". "</td>"; 
```

我试过......`onClick='advancedview.php?id=$uniqueid'`但它不适用于ie。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T09:59:18.463

按钮 onclick 事件解析 javascript，因此如果您想更改设置 window.location 的位置

```
echo "<td><input type=\"Button\" onclick=\"window.location='advancedview.php?id=".$uniqueid."'\" value=\"More Details\" style=\"width:100%;height:30%\"></td>"; 
```

# asp.net - ajax HtmlEditorExtender 宽度问题

> ID：15050560
> 
> 赞同：1
> 
> 时间：2013-02-24T09:53:58.750
> 
> 标签：asp.net, ajax, htmleditorextender

在使用`ajax HtmlEditorExtender`时我遇到了一个奇怪的问题。即`width`属性消失，图像缩小。
最初我`textbox`与之相关的`HtmlEditorExtender`有这个文本

```
txtMessage.Text = "<span style=\" padding:10px 0px 10px 0px; width:100%; \"><img src=\"../images/img4layout2.png\" width=\"675px\" height=\"300px\" ></span><span style=\"font-weight: normal;\">Some text here.</span>"; 
```

图像看起来像这样。 ![在此处输入图像描述](../Images/aa92f099d631bb1ee768909c9f7e92b8.png)

当我单击`dropdown`页面上的任何内容或任何其他控件时，`HtmlEditorExtender`神秘的更改来源（现在没有`width`属性）

```
 <span style=" padding:10px 0px 10px 0px; width:100%; "><img src="../images/img4layout2.png" height="300px"></span><span style="font-weight: normal;">Some text here.</span> 
```

最后图像看起来像这样。 ![在此处输入图像描述](../Images/02e6f046212c2bc14820ada0aeaecbb7.png)

我没有`javascript`在此页面上使用任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T18:02:07.143

根据设计，AjaxControlToolkit 删除了添加到 HtmlEditorExtender 内容中的 html 元素的宽度、类和 id 属性。您可以下载工具包的源代码并进行一些小的修改以防止这种情况发生。

看看[Yuriy Rozhovetskiy](https://stackoverflow.com/users/360171/yuriy-rozhovetskiy)对[HTMLEditorExtender 的回答删除了“class”、“id”属性](https://stackoverflow.com/questions/15881594/htmleditorextender-removes-class-id-attributes/15936057#15936057)。

# java - 通过java程序运行windows命令

> ID：15050561
> 
> 赞同：0
> 
> 时间：2013-02-24T09:54:00.000
> 
> 标签：java, command

我想运行命令

ipmsg.exe /MSG 192.168.0.8 "文本信息"

通过一个java程序。有谁能够帮我？

我正在尝试以下几行。但它不工作..

```
Runtime run_t = Runtime.getRuntime();

Process notify = run_t.exec("cmd /c ipmsg.exe /MSG 192.168.0.8 Hello"); 
```

PS：-我的电脑通过局域网连接到IP地址为192.168.0.8的电脑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T09:58:59.883

使用 a[`ProcessBuilder`](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)可以更好地处理外部流程。此外，除了命令名称之外，始终将参数作为单独的字符串传递。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T10:14:23.100

您需要两个线程来捕获标准输出或错误输出，如下所示：

```
package demo;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

public class ExecDemo {

    public static void main(String[] args) throws Exception {

        final Process p = Runtime.getRuntime().exec("nslookup google.com");
        Thread stdout = new Thread() {
            public void run() {
                BufferedReader br = new BufferedReader(new InputStreamReader(p.getInputStream()));
                String line = null;
                try {
                    while ((line = br.readLine())!=null) {
                        System.out.println(line);
                    }
                    br.close();
                } catch (IOException ioe) {
                    ioe.printStackTrace();
                }
            }
        };
        Thread stderr = new Thread() {
            public void run() {
                BufferedReader br = new BufferedReader(new InputStreamReader(p.getErrorStream()));
                String line = null;
                try {
                    while ((line = br.readLine())!=null) {
                        System.out.println(line);
                    }
                    br.close();
                } catch (IOException ioe) {
                    ioe.printStackTrace();
                }

            }
        };
        //
        stdout.start();
        stderr.start();
        //
        stdout.join();
        stderr.join();
        //
        p.waitFor();
    }

} 
```

输出（在 Mac OS X 中）：

```
Server:     192.168.6.1
Address:    192.168.6.1#53

Non-authoritative answer:
Name:   google.com
Address: 74.125.31.113
Name:   google.com
Address: 74.125.31.138
Name:   google.com
Address: 74.125.31.139
Name:   google.com
Address: 74.125.31.100
Name:   google.com
Address: 74.125.31.101
Name:   google.com
Address: 74.125.31.102 
```

# twitter-bootstrap - 在 LESS 中覆盖

> ID：15050562
> 
> 赞同：4
> 
> 时间：2013-02-24T09:54:21.643
> 
> 标签：twitter-bootstrap, less

我正在使用 LESS 使用 Bootstrap，我是 LESS 的新手，所以我有疑问。

例如，我想将*padding*属性添加到*body*。

```
body {
  margin: 0;
  font-family: @baseFontFamily;
  font-size: @baseFontSize;
  line-height: @baseLineHeight;
  color: @textColor;
  background-color: @bodyBackground;
} 
```

在 bootstrap.less 我做了这个：

```
@import "bootstrap/scaffolding.less";
body {
  margin: 0;
  font-family: @baseFontFamily;
  font-size: @baseFontSize;
  line-height: @baseLineHeight;
  color: @textColor;
  background-color: @bodyBackground;
  padding: 50px;
} 
```

但是在编译的 CSS 文件中，我有**两个**body 类，一个是原始的，然后是我自己的。如何在不重复的情况下向类添加属性？谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T15:33:40.540

如前所述，最好不要修改引导程序更少的文件，而是将样式添加到将覆盖引导程序的样式表/更少文件中。这样，您将在升级到新版本的引导程序时避免问题 - 当您需要跟踪错误时，只需查看您的覆盖就会容易得多。

现在您可能会遇到与覆盖相关的问题，并试图弄清楚为什么您应用的样式没有覆盖引导程序的样式。在这种情况下，我建议您阅读 Andy Clarke 的精彩文章 - CSS：Specificity Wars（它有点旧，但仍然是对 CSS 特异性的一个很好的解释）：

[http://www.stuffandnonsense.co.uk/archives/css_specificity_wars.html](http://www.stuffandnonsense.co.uk/archives/css_specificity_wars.html)

*编辑*- 为了更好地解释多个类块的优势，这里首先是一个使用两个类来设置一个元素样式的示例：

CSS：

```
.center {
   margin: 0 auto;
}
img.center {
   display: block;
} 
```

HTML

```
<div class="center">This will center horizontally</div>
<img class="center" src="foo.png"><!-- this image will also center horizontally --> 
```

在上面的示例中，图像将居中，因为它将继承这两个规则。现在假设您希望嵌套 ul 的填充量低于常规（父）ul，然后您将通过定位其层次结构来覆盖它（上面发布的链接再次解释了这一点）

```
ul {
    list-style: none;
    padding: 5px;
}

ul ul {
    padding: 1px;
} 
```

*EDIT, answer for @Chris Moschini comment*

Yes you can also override Bootstrap default values through LESS if you create your own less file which imports bootstrap.less - and then override the variables you want to change.

```
@import "less/bootstrap.less";
@brand-primary: red; 
```

To see what you can override look at the file [variables.less](https://github.com/twbs/bootstrap/blob/master/less/variables.less) on git, you can also checkout the mixins.less file if you'r looking to mess around there too.

But in many cases you'll need to do some overriding through css specificity.

# django - 搜索结果 url 中的 django csrf_token

> ID：15050571
> 
> 赞同：11
> 
> 时间：2013-02-24T09:55:49.303
> 
> 标签：django, django-forms, django-views

在搜索结果 url 中有 csrf。不知道为什么存在以及如何删除它。搜索效果很好。这是网址

```
/search/?csrfmiddlewaretoken=675d1340034e094866d15a921407e3fc&q=testing 
```

这是视图：

```
def search(request):
    query = request.GET.get('q', '')
    rezult = []
    if query:
    qset1 = (
        Q(title__icontains=query) 
    )
    result = Product.objects.filter(qset1).distinct()
    if result.count() == 1:
        return HttpResponseRedirect(result[0].get_absolute_url())
    return render_to_response('search/search.html',{'query': query, 'result': result, },context_instance=RequestContext(request)) 
```

谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-24T10:09:47.893

从模板中的表单中删除`{% csrf_token %}`，您不需要它，因为您正在发出 GET 请求。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-24T10:17:47.510

您`{% csrf_token %}`在表单中添加。如果您不需要 csrf，请将其从表单中删除并添加 csrf_exempt。

看看这个 Django 示例：

```
from django.views.decorators.csrf import csrf_exempt

@csrf_exempt
def my_view(request):
     return HttpResponse('Hello world') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T10:07:40.087

我会假设您已经`{% csrf_token %}`在搜索表单的`input`元素之一中添加了。这将导致令牌与表单一起提交。

检查您的搜索表单模板。

# c++ - 如何衡量管理内存所花费的时间

> ID：15050572
> 
> 赞同：1
> 
> 时间：2013-02-24T09:55:50.000
> 
> 标签：c++, c, memory-management, metrics

这个[reddit 线程](http://www.reddit.com/r/cpp/comments/1931qv/imperfect_allocation_of_memory/)引起了我对自定义内存分配器的注意。例如，用户 Rohmboid 说：

> 如果没有明显的好处，人们就不会编写自己的池分配器。

他们怎么知道有一个？

如果花在管理内存上的时间只占程序持续时间的不到 1%，我不想浪费我的时间/金钱/精力来编写自定义分配器。我也不想切换到自定义分配器并且无法判断加速。所以我想知道：我如何衡量（或至少估计）分配/释放/获取内存所花费的时间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T10:00:50.827

> 我怎么知道有一个？

# 分析您的代码。

优化代码中不是热路径的东西是没有意义的。

如果分配器 (A) 占用了您 5% 的 CPU 时间，而您的应用程序占用了另外 95% 的时间，那么将分配器加速两次会给您`(5/2)/100 = 2.5%`带来提升。现在尝试将 B 加速一小部分。

### 如何？

最简单的方法是使用 IDE 内置的分析器；虽然我使用的是 Intel VTune，但 MSVS 相当不错；它的易用性非常好，它只是向您展示 -*在此处*优化。

使用分析程序有额外的好处；您根本不必修改代码；当您想要更改分析选项并再次运行时，您也不必重新编译。话虽如此，应用程序中的计时器也可以提供很好的结果，尽管它们很少需要*直接*放置在分配器中。最好不断缩小程序花费最多时间的可能位置。

# jpa - EJB/JPA 中的并发事务管理

> ID：15050573
> 
> 赞同：0
> 
> 时间：2013-02-24T09:55:50.900
> 
> 标签：jpa, ejb

我正在研究 EJB 3.0，其中实体 bean 由 JPA 管理。我的问题是，如果两个或多个用户将尝试使用相同的表单同时插入同一个表，JPA 将如何处理这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T10:30:08.003

It will manage it just fine, by using database transactions. If two threads try to create the same row (i.e. with the same primary key) at the same time, one will succeed, and the other will get an exception from the database, which will cause a rollback of its transaction. That means that all the other inserts, updates and deletes made in the same transaction will also be rollbacked, or cancelled if you prefer, leaving the database in a coherent state. That's the A in [ACID](http://en.wikipedia.org/wiki/ACID).

If two threads insert two different rows at the same time in the same table, then the database will handle that just fine, and both rows will be inserted.

# ios5 - AFNetworking - 默认情况下，它的 HTTP 请求是否使用 cookie 发送？

> ID：15050574
> 
> 赞同：4
> 
> 时间：2013-02-24T09:56:00.620
> 
> 标签：ios5, ios6, nsurlconnection, afnetworking, nsurlrequest

我正在尝试调试通过 AFNetworking 的 AFJSONRequestOperation 发送的 http get 请求，以查看 cookie 是否发送正确。但是，我在 http 标头中看不到任何 cookie。有高手能帮帮我吗？谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-16T17:46:41.080

`AFHTTPClient`您可以使用以下行将cookie 设置为您的或它的子类

```
[_httpClient setDefaultHeader:@"Cookie" value:@"cookie=value"]; 
```

我已经在我的服务器上尝试过这个并且它有效。它可以清楚地捕捉到 cookie 命名`cookie`和它是相关的`value`。

# symfony - 以奏鸣曲管理员的编辑形式为用户设置角色

> ID：15050576
> 
> 赞同：4
> 
> 时间：2013-02-24T09:56:06.133
> 
> 标签：symfony, symfony-2.1, fosuserbundle, sonata-admin, user-roles

我正在为一个项目使用 Symfony 2.1。我使用 FOSUserBundle 来管理用户和 SonataAdminBundle 来管理使用。

我对此有一些疑问：

1.  作为管理员，我想在用户编辑表单中设置用户角色。我怎样才能访问角色`role_hierarchy`？以及如何将它们用作选择字段，以便管理员可以为用户设置角色？

2.  当我在列表中显示角色时，它显示为如下字符串：

    ```
    [0 => ROLE_SUPER_ADMIN] [1 => ROLE_USER] 
    ```

    我怎样才能把它改成这个？

    ```
    ROLE_SUPER_ADMIN, ROLE_USER 
    ```

    我的意思是，只有数组的值。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-05-07T15:14:32.910

根据@parisssss 的回答，虽然它是错误的，但这是一个可行的解决方案。如果您保存一个角色，则奏鸣曲输入字段将显示给定角色下的所有角色。

另一方面，在数据库中只会存储最重要的角色。但这在 Sf 方式中是绝对有意义的。

```
protected function configureFormFields(FormMapper $formMapper) {
// ..
$container = $this->getConfigurationPool()->getContainer();
$roles = $container->getParameter('security.role_hierarchy.roles');

$rolesChoices = self::flattenRoles($roles);

$formMapper
    //...
    ->add('roles', 'choice', array(
           'choices'  => $rolesChoices,
           'multiple' => true
        )
    ); 
```

在另一种方法中：

```
/**
 * Turns the role's array keys into string <ROLES_NAME> keys.
 * @todo Move to convenience or make it recursive ? ;-)
 */
protected static function flattenRoles($rolesHierarchy) 
{
    $flatRoles = array();
    foreach($rolesHierarchy as $roles) {

        if(empty($roles)) {
            continue;
        }

        foreach($roles as $role) {
            if(!isset($flatRoles[$role])) {
                $flatRoles[$role] = $role;
            }
        }
    }

    return $flatRoles;
} 
```

看看它的实际效果：

![在此处输入图像描述](../Images/ecd24c7f9972f6e4bb011bcc16b8f8ed.png) ![在此处输入图像描述](../Images/933a7360008fd0c6bc5e9f1e0d222992.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-06-18T08:20:17.690

至于第二个问题，我在 User 类中添加了一个方法，如下所示

```
/**
 * @return string
 */
 public function getRolesAsString()
 {
     $roles = array();
     foreach ($this->getRoles() as $role) {
        $role = explode('_', $role);
        array_shift($role);
        $roles[] = ucfirst(strtolower(implode(' ', $role)));
     }

     return implode(', ', $roles);
 } 
```

然后你可以在你的`configureListFields`函数中声明：

```
->add('rolesAsString', 'string') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-24T19:49:51.687

我为我的第一个问题找到了答案！（但第二个尚未回答..）我在`configureFormFields`函数中添加了如下角色：

```
 protected function configureFormFields(FormMapper $formMapper) {
  //..
 $formMapper
 ->add('roles','choice',array('choices'=>$this->getConfigurationPool()->getContainer()->getParameter('security.role_hierarchy.roles'),'multiple'=>true ));
} 
```

如果有人回答第二个问题，我会很高兴:)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-08-12T11:21:41.907

Romain Bruckert 的解决方案几乎是完美的，只是它不允许设置角色，这是角色层次结构的根源。例如 ROLE_SUPER_ADMIN。这是固定方法 flattenRoles，它也返回根角色：

```
protected static function flattenRoles($rolesHierarchy)
{
    $flatRoles = [];
    foreach ($rolesHierarchy as $key => $roles) {
        $flatRoles[$key] = $key;
        if (empty($roles)) {
            continue;
        }

        foreach($roles as $role) {
            if(!isset($flatRoles[$role])) {
                $flatRoles[$role] = $role;
            }
        }
    }

    return $flatRoles;
} 
```

编辑：TrtG 已经在评论中发布了这个修复

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-11-01T01:20:51.300

稍微夸大一下，这是我的 Romain Bruckert 和 Sash 的增强版本，它为您提供了这样的数组：

```
array:4 [▼
  "ROLE_USER" => "User"
  "ROLE_ALLOWED_TO_SWITCH" => "Allowed To Switch"
  "ROLE_ADMIN" => "Admin (User, Allowed To Switch)"
  "ROLE_SUPER_ADMIN" => "Super Admin (Admin (User, Allowed To Switch))"
] 
```

[![在此处输入图像描述](../Images/b3adfba952dc83988c57b17ed1f990f3.png)](https://i.stack.imgur.com/k74lo.png)

这可以帮助您找到**所有角色**，**包括特定**角色： [![在此处输入图像描述](../Images/219627c2b00822cc0255e12d27122efa.png)](https://i.stack.imgur.com/2qgFc.png)

我知道它的代码很多，它可以做得更好，但也许它可以帮助某人，或者你至少可以使用这段代码的片段。

```
/**
 * Turns the role's array keys into string <ROLES_NAME> keys.
 * @param array $rolesHierarchy
 * @param bool $niceName
 * @param bool $withChildren
 * @param bool $withGrandChildren
 * @return array
 */
protected static function flattenRoles($rolesHierarchy, $niceName = false, $withChildren = false, $withGrandChildren = false)
{
    $flatRoles = [];
    foreach ($rolesHierarchy as $key => $roles) {
        if(!empty($roles)) {
            foreach($roles as $role) {
                if(!isset($flatRoles[$role])) {
                    $flatRoles[$role] = $niceName ? self::niceRoleName($role) : $role;
                }
            }
        }
        $flatRoles[$key] = $niceName ? self::niceRoleName($key) : $key;
        if ($withChildren && !empty($roles)) {
            if (!$recursive) {
                if ($niceName) {
                    array_walk($roles, function(&$item) { $item = self::niceRoleName($item);});
                }
                $flatRoles[$key] .= ' (' . join(', ', $roles) . ')';
            } else {
                $childRoles = [];
                foreach($roles as $role) {
                    $childRoles[$role] = $niceName ? self::niceRoleName($role) : $role;
                    if (!empty($rolesHierarchy[$role])) {
                        if ($niceName) {
                            array_walk($rolesHierarchy[$role], function(&$item) { $item = self::niceRoleName($item);});
                        }
                        $childRoles[$role] .= ' (' . join(', ', $rolesHierarchy[$role]) . ')';
                    }
                }
                $flatRoles[$key] .= ' (' . join(', ', $childRoles) . ')';
            }
        }
    }
    return $flatRoles;
}

/**
 * Remove underscors, ROLE_ prefix and uppercase words
 * @param string $role
 * @return string
 */
protected static function niceRoleName($role) {
    return ucwords(strtolower(preg_replace(['/\AROLE_/', '/_/'], ['', ' '], $role)));
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-09-29T10:39:10.417

第二个答案如下。在奏鸣曲管理 yml 文件中添加行。

```
sonata_doctrine_orm_admin:
    templates:
        types:
            list:
                user_roles: AcmeDemoBundle:Default:user_roles.html.twig 
```

并在`user_roles.html.twig`文件中添加以下行

```
{% extends 'SonataAdminBundle:CRUD:base_list_field.html.twig' %}

{% block field %}
    {% for row in value %}
        {{row}}
        {% if not loop.last %}
        ,
        {% endif %}
    {% endfor %}
{% endblock %} 
```

然后进入您的管理控制器并在`configureListFields`功能中添加此行

```
->add('roles', 'user_roles') 
```

希望这能解决你的问题

# .net - 在 WPF 中使用计时器以编程方式旋转立方体

> ID：15050583
> 
> 赞同：-1
> 
> 时间：2013-02-24T09:57:13.670
> 
> 标签：.net, wpf

我已经创建了如下所示的立方体并使用滚动来旋转它。我需要在使用计时器单击按钮时以编程方式旋转它。我该怎么做？

```
<DockPanel Margin="0" >

        <ScrollBar Name="hscroll" 
          DockPanel.Dock="Bottom"
          Orientation="Horizontal" 
          Minimum="-180" Maximum="180" 
          LargeChange="10" SmallChange="1" Value="0" />
        <ScrollBar Name="vscroll" 
          DockPanel.Dock="Right"
          Orientation="Vertical"
          Minimum="-180" Maximum="180" 
          LargeChange="10" SmallChange="1" Value="0" />

        <!--
           - The dockOuter control prevents the rendering
           - from including an implicit margin around dockCube
          -->
        <DockPanel Margin="0" Name="dockOuter" Background="White">
            <DockPanel Margin="0" Name="dockCube" Background="White">
                <Viewport3D Margin="0" Name="viewCube">
                    <ModelVisual3D>
                        <ModelVisual3D.Content>
                            <Model3DGroup>
                                <!-- Lights -->
                                <AmbientLight Color="Gray" />
                                <DirectionalLight Color="Gray" Direction="1,-2,-3" />
                                <DirectionalLight Color="Gray" Direction="-1,2,3" />

                                <!-- Top -->
                                <GeometryModel3D>
                                    <GeometryModel3D.Geometry>
                                        <MeshGeometry3D
                                            Positions = "-1,1,1 1,1,1 1,1,-1 -1,1,-1"
                                            TriangleIndices = "0 1 2     2,3,0"
                                            TextureCoordinates="0,1 1,1 1,0 0,0"
                                        />
                                    </GeometryModel3D.Geometry>
                                    <GeometryModel3D.Material>
                                        <DiffuseMaterial>
                                            <DiffuseMaterial.Brush>
                                                <ImageBrush ImageSource="Top.png"/>
                                            </DiffuseMaterial.Brush>
                                        </DiffuseMaterial>
                                    </GeometryModel3D.Material>
                                </GeometryModel3D>

                                <!-- Front -->
                                <GeometryModel3D>
                                    <GeometryModel3D.Geometry>
                                        <MeshGeometry3D
                                            Positions = "-1,-1,1 1,-1,1 1,1,1 -1,1,1"
                                            TriangleIndices = "0 1 2     2,3,0"
                                            TextureCoordinates="0,1 1,1 1,0 0,0"
                                        />
                                    </GeometryModel3D.Geometry>
                                    <GeometryModel3D.Material>
                                        <DiffuseMaterial>
                                            <DiffuseMaterial.Brush>
                                                <ImageBrush ImageSource="Front.png"/>
                                            </DiffuseMaterial.Brush>
                                        </DiffuseMaterial>
                                    </GeometryModel3D.Material>
                                </GeometryModel3D>

                                <!-- Right -->
                                <GeometryModel3D>
                                    <GeometryModel3D.Geometry>
                                        <MeshGeometry3D
                                            Positions = "1,-1,1 1,-1,-1 1,1,-1 1,1,1"
                                            TriangleIndices = "0 1 2     2,3,0"
                                            TextureCoordinates="0,1 1,1 1,0 0,0"
                                        />
                                    </GeometryModel3D.Geometry>
                                    <GeometryModel3D.Material>
                                        <DiffuseMaterial>
                                            <DiffuseMaterial.Brush>
                                                <ImageBrush ImageSource="Right.png"/>
                                            </DiffuseMaterial.Brush>
                                        </DiffuseMaterial>
                                    </GeometryModel3D.Material>
                                </GeometryModel3D>

                                <!-- Left -->
                                <GeometryModel3D>
                                    <GeometryModel3D.Geometry>
                                        <MeshGeometry3D
                                            Positions = "-1,-1,-1 -1,-1,1 -1,1,1 -1,1,-1"
                                            TriangleIndices = "0 1 2     2,3,0"
                                            TextureCoordinates="0,1 1,1 1,0 0,0"
                                        />
                                    </GeometryModel3D.Geometry>
                                    <GeometryModel3D.Material>
                                        <DiffuseMaterial>
                                            <DiffuseMaterial.Brush>
                                                <ImageBrush ImageSource="Left.png"/>
                                            </DiffuseMaterial.Brush>
                                        </DiffuseMaterial>
                                    </GeometryModel3D.Material>
                                </GeometryModel3D>

                                <!-- Back -->
                                <GeometryModel3D>
                                    <GeometryModel3D.Geometry>
                                        <MeshGeometry3D
                                            Positions = "1,-1,-1 -1,-1,-1 -1,1,-1 1,1,-1"
                                            TriangleIndices = "0 1 2     2,3,0"
                                            TextureCoordinates="0,1 1,1 1,0 0,0"
                                        />
                                    </GeometryModel3D.Geometry>
                                    <GeometryModel3D.Material>
                                        <DiffuseMaterial>
                                            <DiffuseMaterial.Brush>
                                                <ImageBrush ImageSource="Back.png"/>
                                            </DiffuseMaterial.Brush>
                                        </DiffuseMaterial>
                                    </GeometryModel3D.Material>
                                </GeometryModel3D>

                                <!-- Bottom -->
                                <GeometryModel3D>
                                    <GeometryModel3D.Geometry>
                                        <MeshGeometry3D
                                            Positions = "-1,-1,-1 1,-1,-1 1,-1,1 -1,-1,1"
                                            TriangleIndices = "0 1 2     2,3,0"
                                            TextureCoordinates="0,1 1,1 1,0 0,0"
                                        />
                                    </GeometryModel3D.Geometry>
                                    <GeometryModel3D.Material>
                                        <DiffuseMaterial>
                                            <DiffuseMaterial.Brush>
                                                <ImageBrush ImageSource="Bottom.png"/>
                                            </DiffuseMaterial.Brush>
                                        </DiffuseMaterial>
                                    </GeometryModel3D.Material>
                                </GeometryModel3D>

                            </Model3DGroup>
                        </ModelVisual3D.Content>
                    </ModelVisual3D>

                    <Viewport3D.Camera>
                        <PerspectiveCamera
                          Position = "3, 3, 3"
                          LookDirection = "-1, -1, -1"
                          UpDirection = "0, 1, 0"
                          FieldOfView = "60">
                            <PerspectiveCamera.Transform>
                                <Transform3DGroup>
                                    <RotateTransform3D>
                                        <RotateTransform3D.Rotation>
                                            <AxisAngleRotation3D
                                              Axis="0 1 0" 
                                              Angle="{Binding ElementName=hscroll, Path=Value}" />
                                        </RotateTransform3D.Rotation>
                                    </RotateTransform3D>
                                    <RotateTransform3D>
                                        <RotateTransform3D.Rotation>
                                            <AxisAngleRotation3D
                                              Axis="1 0 0" 
                                              Angle="{Binding ElementName=vscroll, Path=Value}" />
                                        </RotateTransform3D.Rotation>
                                    </RotateTransform3D>
                                </Transform3DGroup>
                            </PerspectiveCamera.Transform>
                        </PerspectiveCamera>
                    </Viewport3D.Camera>
                </Viewport3D>
            </DockPanel>
        </DockPanel>
    </DockPanel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T10:22:19.687

由于您以非平凡的方式使用 WPF，我将假设您熟悉（并使用）[MVVM](http://en.wikipedia.org/wiki/Model_View_ViewModel)模式。如果没有，请查看它，这是管理 WPF 应用程序的最佳方式。

目前，您的相机旋转绑定到滚动条值。所以为了挑剔，你的立方体保持不变，但你的相机围绕它旋转，让它看起来好像你的立方体在旋转。要从代码中影响这一点，首先在视图模型中创建两个属性并将滚动条值绑定到这些属性。然后将您的旋转绑定到这些值，而不是直接绑定到滚动条。到目前为止没有任何改变，当你测试它时，你的应用程序应该和以前一样工作。但是现在您的程序中有两个可以通过代码设置的变量。[例如，在视图模型中的Timer](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx)实例的 Tick 事件上增加它们。

请注意，WPF 通常将[StoryBoard](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.storyboard.aspx)用于动画，无需 C# 代码即可在 XAML 中使用。

# haskell - 导入无条件 - 不是错误

> ID：15050585
> 
> 赞同：3
> 
> 时间：2013-02-24T09:57:29.180
> 
> 标签：haskell

这与为下一个可怜的树液添加可搜索的东西一样多，但我很想知道*为什么*它不是错误。

我需要来自 postgresql-simple 的 FromRow 类型类，但忘记了它在自己的包中。

```
import qualified Database.Postgresql.Simple as P 
```

哎呀 - 只想要 .FromRow 子模块

```
import qualified Database.Postgresql.Simple.FromRow 
```

当然，不需要它限定，所以把名字从最后去掉。但是，我忘记删除“合格”关键字。

产生一个错误，让我很头疼，因为我没有发现错字：

```
Not in scope: type constructor or class `FromRow'
Perhaps you meant `Database.PostgreSQL.Simple.FromRow.FromRow' (imported from Database.PostgreSQL.Simple.FromRow) 
```

所以 - 这是一个问题，为什么未命名的合格导入不是错误？它对某些东西有用吗，还是我是第一个愚蠢到犯这个错误的人？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-24T10:14:33.973

`qualified`并且`as`是进口的独立特征。

`qualified`表示名称仅在*限定*名称下可用（即包含模块名称的名称）。

`as`只需更改用于限定名称的模块名称。

因此，有 4 种不同的方式来导入模块：

*   `import Database.Postgresql.Simple`— 限定名称和非限定名称均可见；合格者应具备`Database.Postgresql.Simple`

*   `import Database.Postgresql.Simple as P`— 限定名称和非限定名称均可见；合格者应具备`P`

*   `import qualified Database.Postgresql.Simple`— 只有限定的名称是可见的，它们应该用`Database.Postgresql.Simple`

*   `import qualified Database.Postgresql.Simple as P`— 只有限定的名称是可见的，它们应该用`P`

# javascript - Javascript中包含非数字字符的字符串中的数字数组

> ID：15050591
> 
> 赞同：0
> 
> 时间：2013-02-24T09:57:45.727
> 
> 标签：javascript, date

我在一些 .xml 文件中有一堆日期，格式如下`2013-02-10 12:00`：（年、月、日、小时、分钟），我想从中创建一个 Date 对象。

我`new Date(stringFromXml)`在 Chrome 中做过，它可以工作，但在 Firefox/IE 中不起作用。

我想做的是将该字符串拆分为一个 5 元素数组，并`Date`使用接受年、月、日等的构造函数手动创建一个对象。问题是我无法使其与正则表达式一起使用，并且`.split`不是t 最优雅的解决方案。

我已经知道[date.js](http://www.datejs.com/)，但我不想在我的项目中添加另一个库。

我应该怎么做才能完成这项工作？另外，我正在使用 jQuery

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T10:00:28.337

尝试[Date.parse](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/parse)。

```
var date = Date.parse(" date string here "); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T10:06:13.290

这应该让你走上正确的道路......

`var dateParts = date.split(/(-| |:)/);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T10:09:59.750

如果格式始终相同，您可以像这样将其组合在一起：

```
var parts = '2013-02-10 12:00'.split(/[: -]/);
var d = new Date(
    parts[0] /* year */, parts[1] /* month */, parts[2] /* day */, 
    parts[3] /* hour */, parts[4] /* minute */
); 
```

如果您已经拥有该[`Datepicker`](http://docs.jquery.com/UI/Datepicker)小部件，则可以使用[`parseDate()`](http://docs.jquery.com/UI/Datepicker/parseDate)日期选择器扩展中的功能：

```
var date = $.datepicker.parseDate('yy-mm-dd hh:mm', '2013-02-10 12:00'); 
```

# sql - 如何使用组合框在 vb.net 的组合框中加载列表

> ID：15050592
> 
> 赞同：-1
> 
> 时间：2013-02-24T09:57:46.483
> 
> 标签：sql, vb.net, combobox

我有一个表单，我需要在组合框中以查询作为参数来提取项目列表。在数据库中，我有三个字段，如开发、网络金融等职位，它们根据复选框上的勾号存储为是或否。因此，如果一家公司有开发职位并且其被勾选，则以 dB 为单位的值为是，否则否。依此类推我试图在组合框中加载详细信息的表格，其中包含有可用职位的公司名称。并且我正在尝试从具有 dev，net，f​​in 作为项目的位置组合框中执行此操作，因此如果选择 dev 则查询应查找具有 dev 位置的公司，并且读者应阅读并显示它在组合框中。对此有任何帮助.....这是我的代码....在此先感谢。

```
 Private Sub Button4_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button4.Click
    If ComboBox3.Text = "Developer" Then
        Dim dbprovider As String = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Users\Taher\Documents\Visual Studio 2010\Projects\WindowsApplication1\WindowsApplication1\Database1.accdb;Persist Security Info=False;"
        Me.con = New OleDb.OleDbConnection
        Dim sqlquery As String = "SELECT cname FROM company WHERE dev='"yes"';"
        Dim command As New OleDb.OleDbCommand(sqlquery, con)
        Dim reader As OleDb.OleDbDataReader
        con.ConnectionString = dbprovider
        con.Open()

        reader = command.ExecuteNonQuery()
        reader.Read()

        ComboBox3.SelectedItem.ToString()

    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T10:07:32.660

```
 public static List<string> GetAllExpenseType()
        {
            List<string> listExpenseType= new List<string>();
            SqlCommand command= null;
            try
            {
                command = new SqlCommand("select expname from Hm_ExpType", DbConnection.OpenConnection());

                SqlDataReader reader = command.ExecuteReader();

                while (reader.Read())
                {
                    listExpenseType.Add(reader[0].ToString());
                }

                reader.Close();
                DbConnection.CloseConnection(command.Connection);

                return listExpenseType;

            }
            catch (Exception exp)
            {
                throw exp;
            }

            finally { DbConnection.CloseConnection(command.Connection); }

            return listExpenseType;
        }

List<string> listexpType = ExpenseBO.GetAllExpenseType();
 comboExpType.DataSource = listexpType; 
```

# asp.net-mvc - MVC 中可重用的 CRUD 视图

> ID：15050593
> 
> 赞同：1
> 
> 时间：2013-02-24T09:57:50.453
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework, crud

是否可以创建一组允许创建更新删除查看任何模型的视图？

在每个 ViewModel 中，我们已经放置了数据注释和验证属性等。似乎创建一个视图并不遥远，通过反射可以认为模型类型获取所有信息并创建一个表单。

存在这样的剂量吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T10:01:34.240

您是否尝试过使用编辑器模板：

```
@Html.EditorForModel() 
```

为了让编辑器模板递归地下降到您的复杂视图模型属性中，您可以为 Object 类型编写一个自定义编辑器模板，正如 Brad Wilson 在中解释的那样[`this blog post`](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-4-custom-object-templates.html)（查看`Shallow Dive vs. Deep Dive`文章末尾的部分）。

# css - Firefox，IE9+ td 内 div 高度为 100% 的问题（Chrome 上的工作示例）

> ID：15050594
> 
> 赞同：7
> 
> 时间：2013-02-24T09:58:14.720
> 
> 标签：css, html, html-table

拿这个：http: [//jsfiddle.net/zVscL/4/](http://jsfiddle.net/zVscL/4/)

```
.edit-me {
height:100%; /*does not behave the same as Chrome*/
width:10px;
border:1px solid blue;
background:red;
float:left;
overflow: auto;
} 
```

在 Chrome 上打开页面，然后在 Firefox 上打开。蓝色 div 不继承

有没有解释为什么会发生这种情况？有什么修复吗？纯 HTML/CSS 解决方案更可取。

~~我一直在这个狗屎上几个小时试图让 CSS 表现出来，当我最终做 FF 时，我做到了。占用了我的开发时间。~~

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-24T10:06:56.780

`tr`尝试将and的高度设置`td`为 100%：

```
tr, td { height: 100%; } 
```

一般来说，`height: 100%`要正常工作，还必须设置元素父元素的所有高度。

**编辑：**

另一种解决方案是`td`用容器包装 的内容`div`并使用绝对定位来确保`.edit-me`div 有效地具有 100% 的高度。

这是 HTML 的样子：

```
<table border="1">
    <tr>
        <td>
            <div class="container">
                <div class="edit-me"></div>
                Foo
                <br/>
                Bar
            </div>
        </td>
        <td>hello</td>
    </tr>
</table> 
```

和CSS：

```
.container {
    position: relative;
    padding-left: 10px;
}

.edit-me {
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;

    width:10px;
    border:1px solid blue;
    background:red;
    overflow: auto;
} 
```

希望这可以帮助！

# jquery - Datepicker show legenda 以下月份在下个月点击时消失

> ID：15050600
> 
> 赞同：0
> 
> 时间：2013-02-24T09:59:56.883
> 
> 标签：jquery, datepicker, jquery-ui-datepicker

我的日期选择器下方有一个不错的图例，它运行良好，直到您点击下个月。我添加了链接，因为它很难解释，单击“Prijzen 2013”​​选项卡，然后单击 periode toevoegen 以添加日期选择器。

[https://www.huurhulp.nl/wijzigen/wijzigen.php?wijzigen_adv=4&code=321fa6715e552e9bd495753f44b04db8](https://www.huurhulp.nl/wijzigen/wijzigen.php?wijzigen_adv=4&code=321fa6715e552e9bd495753f44b04db8)

这是完成这项工作的函数（在日期选择器中显示之前）：

```
function insertMessage() {
    var legenda = '<div class="legenda"><table cellpadding="0" cellspacing="0" style="font-size:11px;color:silver;"><tr><td>Let op! Overlap in afwijkende prijzen is niet mogelijk.</td><td>Gesloten:&nbsp;&nbsp;</td><td style="background-color:red;width:15px;"></td>'
    legenda = legenda + '<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Afwijkende prijs:</td><td style="background-color:#00A800;width:15px;"></td></tr></table></div>';
    clearTimeout(insertMessage.timer);
    if ($('#ui-datepicker-div .ui-datepicker-calendar').is(':visible')){
        $('#ui-datepicker-div').append(legenda);
    }
    else {
       insertMessage.timer = setTimeout(insertMessage, 10);
    }
} 
```

我试过这个，但不起作用：

```
$('#ui-datepicker-div').delegate('.ui-datepicker-prev, .ui-datepicker-next', 'click', insertMessage); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T13:52:16.270

```
function insertMessage(next) {
var legenda = '<div class="legenda"><table cellpadding="0" cellspacing="0" style="font-size:11px;color:silver;"><tr><td>Let op! Overlap in afwijkende prijzen is niet mogelijk.</td><td>Gesloten:&nbsp;&nbsp;</td><td style="background-color:red;width:15px;"></td>';
legenda = legenda + '<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Afwijkende prijs:</td><td style="background-color:#00A800;width:15px;"></td></tr></table></div>';
clearTimeout(insertMessage.timer);
if ($('#ui-datepicker-div .ui-datepicker-calendar').is(':visible')){
    if (next == 1){
        insertMessage.timer = setTimeout(insertMessage, 10);
    }        
    $('#ui-datepicker-div').append(legenda);
}
else {
   insertMessage.timer = setTimeout(insertMessage, 10);
} 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T10:21:44.423

根据[此处](http://api.jqueryui.com/datepicker/#option-onChangeMonthYear)的文档，该`onChangeMonthYear`功能可能是您所需要的。

```
$('#ui-datepicker-div').datepicker({
  ...
  onChangeMonthYear: function( year, month, inst ) {
    insertMessage();
    },
  }
}); 
```

或类似的东西。当日期选择器移动到新的月份/年份时调用它。

# python - io.IOBase.readlines(hint) 在 python 中是什么意思？

> ID：15050607
> 
> 赞同：1
> 
> 时间：2013-02-24T10:01:10.683
> 
> 标签：python, python-2.7, python-3.x, python-2.6, readlines

来自[文档](http://docs.python.org/3.3/library/io.html#io.IOBase.readlines)：

```
readlines(hint=-1)
    Read and return a list of lines from the stream. 
    hint can be specified to control the number of lines read: 
      no more lines will be read if the total size (in bytes/characters) of all lines so far exceeds hint. 
```

提示的真正含义是什么？

在某些环境中：

```
python3 -c 'from io import StringIO;print(StringIO(u"hello\n"*10).readlines(6));import sys;print(sys.version_info[0:3])'
['hello\n', 'hello\n']
(3, 3, 0)

python -c 'from io import StringIO;print(StringIO(u"hello\n"*10).readlines(6));import sys;print(sys.version_info[0:3])'
[u'hello\n', u'hello\n']
(2, 7, 2)

python -c 'from io import StringIO;print(StringIO(u"hello\n"*10).readlines(6));import sys;print(sys.version_info[0:3])'
[u'hello\n']
(2, 6, 6) 
```

**为什么要超过 6 个字符？**

[有人说这取决于缓冲区大小](https://stackoverflow.com/questions/14541010/pythons-function-readlinesn-behavior)。

但在我的机器中，我无法取消缓冲文本 I/O。

```
>>> import sys
>>> sys.version
'3.3.0 (v3.3.0:bd8afb90ebf2, Sep 29 2012, 01:25:11) \n[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)]'
>>> open('/etc/hosts','r',3).readlines(3)
['##\n', '# Host Database\n']
>>> open('/etc/hosts','r',0).readlines(3)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: can't have unbuffered text I/O
>>> 
```

还是这种方法的错误？

* * *

2013/02/25 更新：

我检查了[源代码](http://hg.python.org/cpython/file/96f08a22f562/Lib/_pyio.py#l505)（来自 python 2.6/2.7/ [3.x](http://hg.python.org/cpython/file/96f08a22f562/Lib/_pyio.py#l505)），但我无法解释：

```
def readlines(self, hint=None):
    """Return a list of lines from the stream.

    hint can be specified to control the number of lines read: no more
    lines will be read if the total size (in bytes/characters) of all
    lines so far exceeds hint.
    """
    if hint is None or hint <= 0:
        return list(self)
    n = 0
    lines = []
    for line in self:
        lines.append(line)
        n += len(line)
        if n >= hint:
            break
    return lines 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T10:20:44.123

它已记录在案，因此不是错误：

> `buffering`是用于设置缓冲策略的可选整数。传递`0`以关闭缓冲**（仅在二进制模式下允许）**，`1`选择行缓冲（仅在文本模式下可用），以及整数 >`1` 表示固定大小的块缓冲区的大小。

回答您的问题：**“为什么超过 6 个字符？”**

这也记录在案：`readlines`总是返回完整的行：

> 可以指定提示来控制读取的行数：**如果到目前为止所有行的总大小（以字节/字符为单位）超过提示，则**不会再读取行。

这意味着：阅读另一**整行**；如果`total read size`> `hint`，则停止阅读。

在您的示例中，在读取第一`"hello"`行之后，尚未超出大小，因此读取了第二行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T03:35:16.323

我发现了 StringIO 和 BytesIO 的区别（但我不知道为什么）：

首先检查这个（python 2.7/3.3）：

```
Python 2.7.2 (default, Jun 20 2012, 16:23:33) 
[GCC 4.2.1 Compatible Apple Clang 4.0 (tags/Apple/clang-418.0.60)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> from io import BytesIO,StringIO
>>> print(BytesIO(b'hello\n'*10).readlines(6))
['hello\n']
>>> print(StringIO(u'hello\n'*10).readlines(6))
[u'hello\n', u'hello\n']
>>> 
```

StringIO 和 BytesIO 的 C 源代码链接在这里：

[模块/_io/iobase.c#l591](http://hg.python.org/cpython/file/381de621ff6a/Modules/_io/iobase.c#l591)

```
620     while (1) {
621         PyObject *line = PyIter_Next(self);
622         if (line == NULL) {
623             if (PyErr_Occurred()) {
624                 Py_DECREF(result);
625                 return NULL;
626             }
627             else
628                 break; /* StopIteration raised */
629         }
630 
631         if (PyList_Append(result, line) < 0) {
632             Py_DECREF(line);
633             Py_DECREF(result);
634             return NULL;
635         }
636         length += PyObject_Size(line);
637         Py_DECREF(line);
638 
639         if (length > hint)
640             break;
641     } 
```

* * *

[模块/_io/bytesio.c#l380](http://hg.python.org/cpython/file/381de621ff6a/Modules/_io/bytesio.c#l380)

```
413     while ((n = get_line(self, &output)) != 0) {
414         line = PyBytes_FromStringAndSize(output, n);
415         if (!line)
416             goto on_error;
417         if (PyList_Append(result, line) == -1) {
418             Py_DECREF(line);
419             goto on_error;
420         }
421         Py_DECREF(line);
422         size += n;
423         if (maxsize > 0 && size >= maxsize)
424             break;
425     }
426     return result; 
```

# ios - 从子字符串中提取字符串的一部分

> ID：15050608
> 
> 赞同：1
> 
> 时间：2013-02-24T10:01:12.000
> 
> 标签：ios, objective-c

我正在尝试找到正则表达式以从整个子字符串中提取我的字符串的一部分。请随意向我建议一个最佳方式。

所以这是这种情况，我可以得到任何 Eamil 所以让我们说 abd@gmail.com 或类似的东西，我只想删除“abd”的用户名并保存到另一个字符串中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T10:15:38.930

我认为您不需要正则表达式。只需这样做：

```
NSString* email = @"abd@gmail.com";
NSArray * components = [email componentsSeparatedByString:@"@"];
NSString* username = (NSString *)[components objectAtIndex:0]; 
```

你也可以这样做：

```
NSString* email = @"abd@gmail.com";
NSString* username = [email substringToIndex:[email rangeOfString:@"@"].location]; 
```

# c# - 删除语句的某些部分

> ID：15050612
> 
> 赞同：1
> 
> 时间：2013-02-24T10:01:47.290
> 
> 标签：c#, .net, sql, sql-server

我有一个生成许多 SQL 语句的应用程序，其选择字段都包含`AS`子句，如下所示：

```
SELECT TOP 200 [customer_name] AS [Customer Name], [customer_age] AS [Customer Age], AVG([customer_age]) AS 'Average Customer Age' FROM [tb_customers] GROUP BY [customer_age] 
```

我的陈述将始终采用这种格式。我的任务是解析它们，以便删除“TOP 200”以及**除聚合之外的**`AS`所有子句。换句话说，我想解析语句，在这种情况下，它会像这样结束：

 **```
SELECT [customer_name], [customer_age], AVG([customer_age]) AS 'Average Customer Age' FROM [tb_customers] GROUP BY [customer_age] 
```

我该怎么做呢？是否有可能，因为这似乎是一项非常复杂的解析任务，因为字段的数量永远不会相同。如果有帮助，我有一个变量来存储其中的字段数量（不包括聚合）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T10:07:12.313

您可以使用正则表达式，例如替换所有出现的

```
AS \[.*?\] 
```

带有空文本

或所有出现的

```
AS \[.*?\], 
```

用逗号“，”。

问号“？” 在这里很重要，因为它会关闭贪婪匹配。**

# android - Android 应用内计费 VS 付费应用？

> ID：15050613
> 
> 赞同：0
> 
> 时间：2013-02-24T10:01:52.137
> 
> 标签：android, google-play, in-app-billing

我是一名开发人员，我拥有一些应用程序并希望保护我的应用程序。我实现了应用内计费，但​​我发现它不稳定，因为我们有两个 API 用于 API3 和 API2，而且我的应用程序不会正式适用于所有设备。

我的问题是什么是最好的？付费应用或应用内计费！

PS：如果您知道哪个最好使用 API3 或 API2，那就太好了！
另外，如果您有任何教程也可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T13:19:27.160

我的快速统计结果显示 Android 2.3+ API3 的统治地位甚至在 2.2 上也能正常工作

其余为 1-3%。您应该将这些百分比乘以使用旧手机的用户不太可能在付费应用程序上花费太多钱的因素。

拥有这两款手机的人`Galaxy S III`更有可能支付 1 美元，而`Galaxy ACE`这两款手机都支持 API3

# macos - 没有依赖关系的已安装 MacPorts 列表

> ID：15050617
> 
> 赞同：19
> 
> 时间：2013-02-24T10:02:44.417
> 
> 标签：macos, macports

当我这样做时`port installed`，我会得到数百个项目的无用列表。但是，其中只有少数是我实际安装的第一手端口。其余的是我不需要直接关联的依赖项。

有没有办法只列出我实际安装的端口，即。我在命令行上手动输入的那些？像顶级节点列表或安装历史文件之类的？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-02-24T10:20:43.483

MacPorts 有请求和未请求端口的概念。

试试`port installed requested`。

`man 1 port`有关“请求”和伪目标的更多信息，请参阅。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-06T11:36:40.477

要获取所有已安装端口的列表*，*没有任何依赖，您可以运行

```
for port in $(port echo installed | awk '{print $1}'); do [ -z "$(port echo installed and depends:$port)" ] && echo $port; done 
```

（警告：这需要一段时间）。

# c++ - C++ 对象生命周期分析

> ID：15050622
> 
> 赞同：2
> 
> 时间：2013-02-24T10:03:30.653
> 
> 标签：c++, design-patterns, rtti

ObjectInfo 类是一个诊断类，用于跟踪统计数据，例如生命周期和对象数量。如图所示，一个特定的类继承自 ObjectInfo。然后在分析类的主体中声明该特定类的成员。

尽管该解决方案有效，但很难维护，因为它需要分析类与分析类保持同步，因为类名用于标识后者。也很难扩展分析类来收集不同的信息，例如对象的大小。

提出一个更好的解决方案，其中分析和分析类之间的依赖关系最小。

是否有可能实现一个检查来确定分析类的对象是在堆栈还是堆上创建的？

-- 对象信息.h --

```
#pragma once

class ObjectInfo
{
 public:
  ObjectInfo(const char* objectName);
  virtual ~ObjectInfo(void);

 private:

   static int  m_counter;
   int         m_objectNumber;
   const char* m_className;
}; 
```

-- 对象信息.cpp --

```
#include "StdAfx.h"
#include "ObjectInfo.h"
#include <iostream>
#include "TimePrinter.h"

using namespace std;
int ObjectInfo::m_counter = 0;
ObjectInfo::ObjectInfo(const char* name) :
m_className(name)
{
   m_objectNumber = ++m_counter;
   cout << "Object: " << m_className << "# " << m_objectNumber << " created @ " <<
   TimePrinter()<< endl;
}

ObjectInfo::~ObjectInfo(void)
{
  cout << "Object: " << m_className << "# " << m_objectNumber << " destroyed @ " << 
  TimePrinter() << endl;
} 
```

-- 使用模式 --

```
struct _AInfo : public ObjectInfo {
    _AInfo() : ObjectInfo("_A") {}
};

struct _A {
  _AInfo m_info;
}; 
```

我最初认为这个问题是在询问使用 C++ 反射技术来收集运行时信息。但是，我不知道是否有一种方法可以使用 C++ 反射来测量对象的生命周期。此外，您能否认为 C++ 反射是一种减少分析类和分析类之间依赖关系的技术？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T11:40:38.237

这可以跟踪堆栈与堆对象的创建

```
#include <iostream>

template <class CRTP>
struct AllocationTracker
{
    AllocationTracker()
    {
        ++totalCreated;
    }

    void* operator new(size_t sz)
    {
        ++heapCreated;
        return ::operator new(sz);
    }

    static int totalCreated;
    static int heapCreated;
};

template <class CRTP>
int AllocationTracker<CRTP>::totalCreated;
template <class CRTP>
int AllocationTracker<CRTP>::heapCreated;

class Derived : public AllocationTracker<Derived>
{
};

int main()
{
    using namespace std;
    cout << Derived::heapCreated << "/" << Derived::totalCreated << endl; // 0/0
    Derived dStack;
    cout << Derived::heapCreated << "/" << Derived::totalCreated << endl; // 0/1
    Derived* dHeap = new Derived;
    cout << Derived::heapCreated << "/" << Derived::totalCreated << endl; // 1/2
} 
```

这使用了 Bartek 在对您的问题的评论中提出的 CRTP。这让我们可以分别跟踪每个派生类型。它还包装了`new`由派生类继承的基类的标准，这允许我们跟踪堆分配。所以我们知道有多少实例被创建，有多少在堆上，我们可以推断其余的都在堆栈上（除非你在程序中使用对象池或其他一些更奇特的分配策略）。

# date - 从 txt 文件中读取日期时顺序错误

> ID：15050624
> 
> 赞同：0
> 
> 时间：2013-02-24T10:03:44.697
> 
> 标签：date, excel, vba

我有一个文本文件包含这样的：

```
03/02/2013 09:47:29 AM||User Name||Open||Normal||Path
03/02/2013 09:47:45 AM||User Name||Close||Normal||Path
03/02/2013 09:47:52 AM||User Name||Open||Normal||Path
03/02/2013 09:47:58 AM||User Name||Save||Normal||Path
03/02/2013 09:47:59 AM||User Name||Close||Normal||Path
03/02/2013 09:48:05 AM||User Name||Open||Normal||Path
03/02/2013 09:48:06 AM||User Name||Close||Normal||Path
03/02/2013 09:48:12 AM||User Name||Open||Normal||Path
03/02/2013 09:55:33 AM||User Name||Save||Normal||Path
03/02/2013 09:55:34 AM||User Name||Close||Normal||Path
03/02/2013 09:55:40 AM||User Name||Open||Normal||Path 
```

当我从 Excel 中的 VBA 和 GetDay 中读取这一行时，将其拆分为分隔符“||” 天是“2”，但 2 是真正的月份。

我怎样才能得到这个日期，天是 3 月是 2？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T11:34:08.427

像下面的例子应该让你朝着正确的方向前进。

```
Dim row_string as String    'this is a row of text to be manipulated.

Dim sDay as String, sMonth as String, sYear as String
Dim sDateTime as String, sDate as String
Dim rowArr as Variant, elements as Variant, dateElements as Variant

'split the initial row into elements
rowArr = Split(row_string,"||")

'first element is the datetime string
sDateTime = rowArr(0)

'split the datetime string into individual parts
elements = Split(sDateTime," ")

'grab the date element
sDate = elements(0)

'split the date element up into parts
dateElements = Split(sDate,"/")

'Assign date elements to individual variables
sDay = dateElements(0)
sMonth = dateElements(1)
sYear = dateElements(2)

If sDay = "03" And sMonth = "02" Then

'do something here............

End If 
```

或者我想你可以采用非常简单的方法并做..

```
Dim row_string as String

'check the left 5 characters of the entire string
If Left(row_string,5) = "03/02" Then

'do something here...........

End If 
```

# java - 在java中创建多维ArrayList

> ID：15050625
> 
> 赞同：0
> 
> 时间：2013-02-24T10:03:45.053
> 
> 标签：java

我想创建一个arrayList，如下所示。

```
id->1512   associated with the values -> 12,45,78
id->1578   associated with the values -> 456,78,87,96 
```

我必须做什么？我应该创建一个二维数组列表还是可以使用一维数组列表来创建？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T10:05:15.847

你正在寻找这样的东西：

```
Map<Integer, List<Integer>> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T10:19:24.573

使用[Guava Library](http://code.google.com/p/guava-libraries/)，您可以为您的关联执行此操作：

```
Multimap<Integer, Integer> map = HashMultimap.create();
map.putAll(1512, Arrays.asList(12, 45, 78));
map.putAll(1578, Arrays.asList(456, 78, 87, 96)); 
```

这是一个如何获取值的示例：

```
int key = 1512;
for (Integer value : map.get(key)) {
    System.out.println("Associated " + key + " -> " + value);
} 
```

这是 Guava 的[JavaDoc的链接](http://guava-libraries.googlecode.com/svn/tags/release03/javadoc/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T10:11:51.833

你不需要 ArrayList。阅读邻接[地图](http://docs.oracle.com/javase/tutorial/collections/interfaces/map.html)

# jquery - 淡入/淡出无限循环

> ID：15050627
> 
> 赞同：0
> 
> 时间：2013-02-24T10:03:52.187
> 
> 标签：jquery, fadein, fadeout

我有一个带有上一个和下一个箭头的自制“画廊”。现在我想让箭头在 onmouseover 事件上淡入，但是当我触摸箭头时，我得到了一个无限的淡入/淡出循环。

```
<div id="stage" style="z-index:50;" onmouseover="shownavigation(1)" onmouseout="shownavigation(2)">
    <img id ="stageimg" name="phpimg" src="uploads/phpimg.png" onload="vertAlign(this)"/>
    <div id="navright" style="z-index: 2; overflow: hidden; display:none; position: absolute; left: 300px; top: 100px; width: 15px; height: 100px; text-align: center;"> 
        <a href="javascript:void(0)" onclick="navigate('r')"><img src="images/red-pfeil.png" alt="" width="17" height="100" align="texttop" /></a>
    </div>
</div> 
```

```
function shownavigation(inout) {
    if(inout==1) {
        $("#navright").fadeIn();
    }
    else {
        $("#navright").fadeOut();
    }
} 
```

也许你有一个想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T10:29:06.160

Do ***NOT*** use inline JavaScript code. Attch events with jQuery instead. Here's a solution:

```
<div id="stage" style="z-index:50;">
    <img id ="stageimg" name="phpimg" src="uploads/phpimg.png" onload="vertAlign(this)"/>
    <div id="navright" style="z-index: 2; overflow: hidden; display:none; position: absolute; left: 300px; top: 100px; width: 15px; height: 100px; text-align: center;"> 
        <a href="javascript:void(0)" onclick="navigate('r')"><img src="images/red-pfeil.png" alt="" width="17" height="100" align="texttop" /></a>
    </div>
</div> 
```

```
$(function () {
    $("#stage").hover(function(){
        $("#navright").stop().fadeIn("slow"); 
    }, function(){
        $("#navright").stop().fadeOut('slow');
    });
}); 
```

[![jsFiddle](../Images/fa81a3acd15d6f1e155aab2a161af256.png)](http://jsfiddle.net/DJDavid98/XV9D7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T10:14:05.357

我认为将`div#navright`主 div 移出应该可以，例如：

```
<div id="stage" style="z-index:50;" onmouseover="shownavigation(1)" onmouseout="shownavigation(2)">

<img id ="stageimg" name="phpimg" src="uploads/phpimg.png" onload="vertAlign(this)"/>

</div>
//move it out
<div id="navright" style="z-index: 2; overflow: hidden; display:none; position: absolute; left: 300px; top: 100px; width: 15px; height: 100px; text-align: center;">     
  <a href="javascript:void(0)" onclick="navigate('r')">
     <img src="images/red-pfeil.png" alt="" width="17" height="100" align="texttop" />
  </a>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T10:17:04.673

首先最好使用以下代码附加事件。

```
$("#div").hover(function(){
    $("#div").fadeIn("slow");
}, function(){
    $("#div").fadeOut();
}); 
```

尝试调用`stopPropagation()`事件。

我们还可以使用默认停止传播的替代事件，如`mouseenter`、、`mouseleave`或`hover`（out 或 over）。

# c++ - cygwin中程序的返回值

> ID：15050630
> 
> 赞同：0
> 
> 时间：2013-02-24T10:04:20.183
> 
> 标签：c++, cygwin

我有这样的 C++ 代码

```
int main(int argc, char** argv){
  exit(-1);
} 
```

我在 Windows 机器上，在 Cygwin 中制作和运行这个程序。我想回显返回值（用于测试目的）。

```
echo $? 
```

给出 255 的 -1，为什么？（溢出？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T10:07:34.430

exit takes integers (0-255), `return -1` is different, exit returns 255 when given value out of range

# c++ - 当 ptr_vector 迭代器失效时

> ID：15050632
> 
> 赞同：1
> 
> 时间：2013-02-24T10:04:22.127
> 
> 标签：c++, boost, boost-ptr-container

插入和/或删除元素是否有可能使现有元素的迭代器无效。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T11:33:10.723

是的。状态的[文档](http://www.boost.org/doc/libs/1_53_0/libs/ptr_container/doc/ptr_vector.html)`boost::ptr_vector<T>`：

> A`ptr_vector<T>`是一个指针容器，它使用底层`std::vector<void*>`存储指针。

并且在 a 中插入元素或从 a 中删除元素`std::vector`会导致重新分配，因此现有的迭代器会失效。

具体来说，C++11 的第 23.3.6.5/3 节规定`erase()`：

> (3) 效果：在擦除点或擦除点之后使迭代器和引用无效。

关于`insert()`和`push_back()`：

> (1) 备注：如果新容量大于旧容量，会导致重新分配。如果没有发生重新分配，则插入点之前的所有迭代器和引用仍然有效。

因此，为了防止在元素插入的情况下迭代器失效，您可以在`reserve()`从中获取任何迭代器之前使用该函数增加向量的容量。然后，这些迭代器将保持有效，直到`size()`向量的 超过为元素空间保留的数量。

# java - 我想在文本字段上显示数组的所有 6 个元素

> ID：15050633
> 
> 赞同：0
> 
> 时间：2013-02-24T10:04:28.903
> 
> 标签：java

我在文本字段中显示数组 j 的值时遇到问题。运行时仅显示 1 个元素。

```
import java.util.Collections;
import java.util.ArrayList;
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;

public class SwingCounter extends JFrame implements ActionListener {

    // use Swing's JTextField instead of AWT's TextField
    private JTextField tfCount;
    private int counterValue = 0, numbers=0, j=0;

    public SwingCounter () {

        // retrieve the content pane of the top-level container JFrame
        Container cp = getContentPane();
        // all operations done on the content pane
        cp.setLayout(new FlowLayout());

        cp.add(new JLabel("Counter"));
        tfCount = new JTextField(10);
        tfCount.setEditable(true);
        tfCount.setText(numbers + "");
        cp.add(tfCount);

        JButton btnCount = new JButton("Count");
        cp.add(btnCount);
        btnCount.addActionListener(this);

        // exit program if close-window button clicks
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        // set initial window size
        setSize(280,80);
        // location in screen
        setLocation(400,200);
        // set this JFrame's title
        setTitle("Swing Counter");
        setVisible(true);     // Show it
    }

    public void actionPerformed(ActionEvent evt) {
        counterValue++;

        //define ArrayList to hold Integer objects
        ArrayList<Integer> numbers = new ArrayList<Integer>();
        for(int i = 0; i < 45; i++)
        {
            numbers.add(i+1);
        }

        Collections.shuffle(numbers);

        System.out.print("This week's lottery numbers are: ");
        for(int j =0; j < 6; j++)
        {
            System.out.print(numbers.get(j) + " ");
            tfCount.setText(numbers.get(j) + " ");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T10:08:20.460

you need to do this :

```
String text=""
for(int j =0; j < 6; j++)
{
text+=numbers.get(j) 
}
tfCount.setText(text); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T10:09:16.353

You are calling this in the for loop:

```
tfCount.setText(numbers.get(j) + " "); 
```

That way always the last number will be shown in the TextField. You have to concatenate the numbers in the loop and call `tfCount.setText()` afterwards.

Like this:

```
String concatenatedNumbers = "";
for(int j =0; j < 6; j++) {
   concatenatedNumbers = concatenatedNumbers + ", " + numbers.get(j);
 }
 tfCount.setText(concatenatedNumbers); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T10:09:53.840

You are overriding the text of `JTextField` 6 times, so it shows only the last one.

You first want to create a `String` containing all numbers and then use its value to set the text:

```
// String to hold the lottery numbers
String numbersString = "";
for(int j =0; j < 6; j++)
{
  // Print number to log/terminal
  System.out.print(numbers.get(j));
  // Append the string with the current number
  numbersString += numbers.get(j) + " ";
}
// Update the value of the JTextField with all the numbers at once
tfCount.setText(numbersString); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-24T10:10:20.207

Each time you call `setText()` on the text field, you replace the text it displays by another text. So create a String holding the 6 first numbers, and then set the text of the text field with the result:

```
StringBuilder sb = new StringBuilder();
for (int i = 0; i < 6; i++) {
    sb.append(numbers.get(i));
    sb.append(' ');
}
tfCount.setText(sb.toString()); 
```

# java - Jersey No MessageBodyWriter 类型为“java.io.File”的正文部分

> ID：15050634
> 
> 赞同：0
> 
> 时间：2013-02-24T10:04:31.047
> 
> 标签：java, image, file-upload, jersey, multipartform-data

我在尝试上传文件时收到该错误。我在下面有一个代码，我收到了`No MessageBodyWriter for body part of type 'java.io. File' and media type 'application/octet-stream'`异常。我昨天一整天都试图解决这个问题，但没有成功。

```
File file = new File(path);

    ClientConfig cc = new DefaultClientConfig();
    cc.getClasses().add(MultiPartWriter.class);
    Client client = Client.create(cc);

    WebResource webResource = client.resource(Constants.URL).path("images")
            .path("create");; 
    FormDataMultiPart fdmp = new FormDataMultiPart(); 

    fdmp.bodyPart(new FileDataBodyPart("filename", file, MediaType.APPLICATION_OCTET_STREAM_TYPE));
    fdmp.bodyPart(new FormDataBodyPart("data", imageData));

    ClientResponse response = webResource.type(MediaType.MULTIPART_FORM_DATA_TYPE).post(ClientResponse.class, fdmp); 
```

我尝试了其他一些版本，但我不断收到该异常。有什么建议吗？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T10:08:46.847

What about:

```
ClientConfig cc = new DefaultClientConfig();
Client client = Client.create(cc);
WebResource resource = client.resource("http://sample.com/uploadpath");
FormDataMultiPart form = new FormDataMultiPart();
File file = new File("c:/temp/file.txt");
form.field("filename", file.getName());
form.bodyPart(new FileDataBodyPart("file", file, MediaType.MULTIPART_FORM_DATA_TYPE));

ClientResponse response = resource.type(MediaType.MULTIPART_FORM_DATA).post(ClientResponse.class, form); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-23T09:48:12.777

终于我找到了解决办法！！我在android上遇到了这个问题

只需添加以下代码：

导入 com.sun.jersey.core.impl.provider.entity.InputStreamProvider；导入 com.sun.jersey.core.impl.provider.entity.StringProvider；......

```
ClientConfig cc = new DefaultClientConfig();
cc.getClasses().add(StringProvider.class);///////// here is the magic :)
cc.getClasses().add(InputStreamProvider.class);////
cc.getClasses().add(MultiPartWriter.class);////////

WebResource webResource = Client.create(cc).resource("www......");

FormDataMultiPart multiPart = new FormDataMultiPart();
multiPart.field("bla", "bla bla", MediaType.APPLICATION_JSON_TYPE);

ClientResponse response = webResource.
            type(MediaType.MULTIPART_FORM_DATA).
            post(ClientResponse.class,multiPart); 
```

# c# - C# BasicHttpBinding with BasicHttpSecurityMode.Transport for Silverlight client

> ID：15050641
> 
> 赞同：0
> 
> 时间：2013-02-24T10:06:07.510
> 
> 标签：c#, wcf, silverlight, ssl, https

i want to secure a Silverlight App with SSL. So I try to wrote a proof of concept, where I host two BasicHttpBindings. One with BasicHttpSecurityMode.None and the other with BasicHttpSecurityMode.Transport.

But I not able to get the second one running, The WCFTestClient from VS Tools display this error message

```
// Error: Cannot obtain Metadata from https://localhost:8081/ If this is
// a Windows (R) Communication Foundation service to which you have
// access, please check that you have enabled metadata publishing at the
// specified address.  For help enabling metadata publishing, please
// refer to the MSDN documentation at
// http://go.microsoft.com/fwlink/?LinkId=65455.WS-Metadata Exchange
// Error    URI: https://localhost:8081/    Metadata contains a reference
// that cannot be resolved: 'https://localhost:8081/'.    An error
// occurred while making the HTTP request to https://localhost:8081/.
// This could be due to the fact that the server certificate is not
// configured properly with HTTP.SYS in the HTTPS case. This could also
// be caused by a mismatch of the security binding between the client and
// the server.    The underlying connection was closed: An unexpected
// error occurred on a send.    Unable to read data from the transport
// connection: An existing connection was forcibly closed by the remote
// host.    An existing connection was forcibly closed by the remote
// hostHTTP GET Error    URI: https://localhost:8081/    There was an
// error downloading 'https://localhost:8081/'.    The underlying
// connection was closed: An unexpected error occurred on a send.   
// Unable to read data from the transport connection: An existing
// connection was forcibly closed by the remote host.    An existing
// connection was forcibly closed by the remote host 
```

I would be great if some could view over my code, I stuck for two days with this. It need to be done all programmatically. Thanks a lot.

Almost the whole programm: [http://pastebin.com/9j9K43tS](http://pastebin.com/9j9K43tS)

The Endpoints

```
private static readonly Uri UriBase = new Uri("http://localhost:8080/");
private static readonly Uri UriBaseService = new Uri("http://localhost:8080/Basic");

private static readonly Uri UriSecure = new Uri("https://localhost:8081/");
private static readonly Uri UriSecureService = new Uri("https://localhost:8081/Secure"); 
```

This Works

```
private static void BasicHTTPServer()
{
    var binding = new BasicHttpBinding();
    binding.Name = "binding1";
    binding.HostNameComparisonMode = HostNameComparisonMode.StrongWildcard;
    binding.Security.Mode = BasicHttpSecurityMode.None;

    // Create a ServiceHost for the CalculatorService type and provide the base address.
    _serviceHost = new ServiceHost(typeof (ServiceBasic), UriBase);

    _serviceHost.AddServiceEndpoint(typeof (IServiceBasic), binding, UriBaseService);
    _serviceHost.AddServiceEndpoint(typeof (IPolicyRetriever), new WebHttpBinding(), "")
                .Behaviors.Add(new WebHttpBehavior());
    var smb = new ServiceMetadataBehavior {HttpGetEnabled = true, HttpGetUrl = UriBase};
    _serviceHost.Description.Behaviors.Add(smb);

    // Open the ServiceHostBase to create listeners and start listening for messages.
    _serviceHost.Open();
    Logger.Log(Server.Basic, string.Format("Open at {0} Service: {1}", UriBase, UriBaseService));
} 
```

This doesn't Works

```
private static void SecureHTTPServer()
{
    var binding = new BasicHttpBinding();
    // it doesnt matter if I use BasicHttpsBinding or BasicHttpBinding
    binding.Name = "binding2";
    binding.HostNameComparisonMode = HostNameComparisonMode.StrongWildcard;
    binding.Security.Mode = BasicHttpSecurityMode.Transport;
    binding.Security.Transport.ClientCredentialType = HttpClientCredentialType.Certificate;

    // Create a ServiceHost for the CalculatorService type and provide the base address.
    _serviceHostSecure = new ServiceHost(typeof (ServiceBasic), UriSecure);
    _serviceHostSecure.Credentials.ServiceCertificate.Certificate = GetCertificate();
        //load a certificate from file
    _serviceHostSecure.Credentials.ClientCertificate.Authentication.CertificateValidationMode =
        X509CertificateValidationMode.None;

    _serviceHostSecure.AddServiceEndpoint(typeof (IServiceBasic), binding, UriSecureService);
    var webHttpBinding = new WebHttpBinding(WebHttpSecurityMode.Transport);
    webHttpBinding.Security.Transport.ClientCredentialType = HttpClientCredentialType.Certificate;

    _serviceHostSecure.AddServiceEndpoint(typeof (IPolicyRetriever), webHttpBinding, "")
                      .Behaviors.Add(new WebHttpBehavior());
    var smb = new ServiceMetadataBehavior {HttpsGetEnabled = true, HttpsGetUrl = UriSecure};
    _serviceHostSecure.Description.Behaviors.Add(smb);

    // Open the ServiceHostBase to create listeners and start listening for messages.
    _serviceHostSecure.Open();
    Logger.Log(Server.Basic, string.Format("Open at {0} Service: {1}", UriSecure, UriSecureService));
} 
```

# macos - Does MacPorts really need to install software already bundled with the OS?

> ID：15050647
> 
> 赞同：0
> 
> 时间：2013-02-24T10:06:28.393
> 
> 标签：macos, macports

I have noticed that often, MacPorts will install dependent software that is already embedded into my OS (OSX). Particularly, Python is a frequent example of this.

Is the MacPorts software so intelligent that it will check for native installations and install dependencies ONLY if the native installation is not compatible with the port I am trying to install?

Or, does it simply see in the list of dependencies that, "Aha, I need Python, and Python is not installed as a port, so I will install it" (even though there is a native installation of Python)?

Note: This question is meant generally, not only regarding Python. Just using that as an example.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T10:10:32.063

The package systems usually distrust the pre-installed software and install their own. It’s easier to control it, you get a more recent versions of the software and also have greater control over versioning, which helps with dependency management.

# twitter-bootstrap - Bootstrap 固定页脚与容器 div 一起粉碎

> ID：15050649
> 
> 赞同：1
> 
> 时间：2013-02-24T10:06:34.140
> 
> 标签：twitter-bootstrap

如果缩放，容器 div 中的内容会与固定的页脚一起粉碎。如果我在中心的表格中添加更多行，页脚不会在页面上向下移动，它会一起粉碎。

导航栏和页脚之间似乎有固定数量的像素 - 我希望页面可以根据需要展开，并且页脚始终位于底部。

我试过 class="container-fluid" 和 class="row fluid" 都没有解决这个问题。我还用 Google 搜索并广泛搜索了 stackoverflow，但找不到解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T13:36:38.807

移到`<div id="footer">`内`<div class="container">`，就在`div`桌子的后面。另外，删除`<div class="container">`页脚内的那个，没有必要。

结果应该类似于图像：

![结果](../Images/02f52e3364f9354545d5429175c0d815.png)

**编辑：**另外，如果你想让你的页脚有粘性，你可以使用[CSS-tricks](http://css-tricks.com/snippets/css/fixed-footer/)中的这个技巧。

```
#footer {
   position:fixed;
   left:0px;
   bottom:0px;
   height:50px;
   width:100%;
   background:#999;
} 
```

并记得`margin-bottom`从表中增加。

# php - Add data to google spreadsheet with javascript or php

> ID：15050650
> 
> 赞同：0
> 
> 时间：2013-02-24T10:06:43.430
> 
> 标签：php, google-sheets, save

I tries searching on many places to know how to data to google spreadsheet with javascript but found nothing that can help me. I found a zend php library that we can use to add data to google spreadsheet but it requires user google user name and password which I don't have. I want rest api to access google spreadsheet and add data to users spreadsheet by getting authorizations from them. Please help me.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T06:15:23.593

我编写了一个简单的 java 脚本库，一旦发布就可以从谷歌电子表格中获取数据。[Gsheet2json](http://rumal.github.com/Gsheet2json/)

我正在使用谷歌自定义表格填写电子表格及以上进行检索。

# php - How do i read the opensearch nodes in lastfm results

> ID：15050661
> 
> 赞同：0
> 
> 时间：2013-02-24T10:08:14.440
> 
> 标签：php, xml, api, last.fm

I am working with the lastfm api and i want to be able to paginate the search results from the artist search.

```
<results xmlns:opensearch="http://a9.com/-/spec/opensearch/1.1/" for="cher">
<opensearch:Query role="request" searchTerms="cher" startPage="1"/>
<opensearch:totalResults>1302</opensearch:totalResults>
<opensearch:startIndex>0</opensearch:startIndex>
<opensearch:itemsPerPage>30</opensearch:itemsPerPage> 
```

I would guess that it would involve taking the totalresults node and dividing it by the items per page. but how do i get the info from totalresults using php?

if this `$artists = $xml->results->artistmatches->artist;` is how i get the artists, how do i get the correct opensearch node totalresults and items per page?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T22:08:35.750

假设您使用 simpleXML：

```
$total = (int) $xml->results->children("http://a9.com/-/spec/opensearch/1.1/")->totalResults 
```

# assembly - 不同操作系统但相同处理器上的汇编代码相同还是不同？

> ID：15050662
> 
> 赞同：1
> 
> 时间：2013-02-24T10:08:19.967
> 
> 标签：assembly, compiler-construction, linker, cpu-architecture

编译 C/C++ 代码时，它会生成汇编代码。如果我有 Windows 和 Linux 双启动（即完全相同的处理器）并且我在 Windows 和 Linux 上都用 C++ 编写了一个程序，那么

编译后（链接前）的汇编代码是否相同？

我的意思是可执行文件之间的区别是链接器，写？但我不是在谈论可执行文件......我在谈论链接之前的汇编代码。

如果两个汇编代码不同，那么它们为什么以及如何不同？

库是预编译的，所以我认为这可能是不同的（如果不是，请纠正我）。但是如果我不使用库怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T10:45:12.440

不同的操作系统使用不同的可执行文件格式。

它们还通过不同的 API（`fopen()`最终将在 32 位 Windows 上调用`CreateFileA()`或在 32位`int 0x2E`Linux上调用）提供其功能，这些 API在内部以不同的方式运行。因此，在您的Windows 和 Linux程序中会有不同的代码。`sysenter``open()``int 0x80``fopen()`

不同的编译器可能使用不同的默认调用约定，或者同一个编译器可以对不同的目标操作系统使用不同的调用约定。即使在同一个编译器上，不同的优化和调试选项也会影响代码生成。

最后，即使您不使用任何库，即使其他一切都相同，不同的编译器也可以生成截然不同的代码（这通常是没有意义的事情）。这仅仅是因为它们没有使用完全相同的算法，也不是由同一个人编写的，而且没有人要求所有编译器的行为都相同。

无论如何，你的问题有什么意义？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T10:18:24.850

只要您不必使用系统调用，汇编代码将是相同的——这意味着您不能读取输入，也不能执行输出，甚至不能结束程序——什么都没有。

所以，除了一个完全无用的程序，它不能进行输入和输出并且你必须手动杀死之外，你不能创建一个在多个操作系统上通过相同代码的二进制文件，在任何地方都做同样的事情。

# java - 将东西放入 Map或转换 Map 到地图

> ID：15050664
> 
> 赞同：4
> 
> 时间：2013-02-24T10:08:42.067
> 
> 标签：java, generics, easymock, type-erasure

我很不高兴处理有人用以下定义的接口

```
public Map<?, ?> getMap(String key); 
```

我正在尝试编写使用此接口的单元测试。

```
Map<String,String> pageMaps = new HashMap<String,String();
pageMaps.put(EmptyResultsHandler.PAGEIDENT,"boogie");
pageMaps.put(EmptyResultsHandler.BROWSEPARENTNODEID, "Chompie");
Map<?,?> stupid = (Map<?, ?>)pageMaps;
EasyMock.expect(config.getMap("sillyMap")).andReturn(stupid); 
```

并且编译器正在运行。

```
The method andReturn(Map<capture#5-of ?,capture#6-of ?>) in the type IExpectationSetters<Map<capture#5-of ?,capture#6-of ?>> is not applicable for the arguments (Map<capture#7-of ?,capture#8-of ?>) 
```

如果我尝试`pageMaps`直接使用，它会告诉我：

```
The method andReturn(Map<capture#5-of ?,capture#6-of ?>) in the type IExpectationSetters<Map<capture#5-of ?,capture#6-of ?>> is not applicable for the arguments (Map<String,String>) 
```

如果我做`pageMaps`一个`Map<?,?>`，我不能把字符串放在里面。

```
The method put(capture#3-of ?, capture#4-of ?) in the type Map<capture#3-of ?,capture#4-of ?> is not applicable for the arguments (String, String) 
```

我见过一些客户端代码会进行丑陋的未经检查的转换，例如

```
@SuppressWarnings("unchecked")
        final Map<String, String> emptySearchResultsPageMaps = (Map<String, String>) conf.getMap("emptySearchResultsPage"); 
```

如何将数据转换为`Map<?,?>`，或将我的转换`Map<String,String>`为`Map<?,?>`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T10:21:22.607

1.  `Map<String, String> map = getMap("abc");`没有演员，你就无法写作
2.  这个问题更多地与easymock和`expect`and`andReturn`方法返回/预期的类型有关，我不熟悉。你可以写

    ```
    Map<String, String> expected = new HashMap<String, String> ();
    Map<?, ?> actual = getMap("someKey");
    boolean ok = actual.equals(pageMaps);
    //or in a junit like syntax
    assertEquals(expected, actual); 
    ```

不确定这是否可以与您的嘲笑内容混合在一起。这可能会起作用：

```
EasyMock.expect((Map<String, String>) config.getMap("sillyMap")).andReturn(pageMaps); 
```

另请注意，您不能使用通配符向通用集合中添加任何内容。所以这：

```
Map<?, ?> map = ...
map.put(a, b); 
```

不会编译，除非`a`和`b`为空。

# java - 将文件加载到 Eclipse 测试控制台 (VM)

> ID：15050668
> 
> 赞同：0
> 
> 时间：2013-02-24T10:09:35.437
> 
> 标签：java, eclipse

我是 Eclipse 的新手，并且一直在尝试加载 CSV 文件，以便 Eclipse 的虚拟机在我的程序中给出适当的输入时可以找到并识别它。我已经尝试过以下方法：

1.  将其复制到 SRC 文件夹。然而，这并没有帮助。我没有尝试将它复制到 bin 文件夹或任何文件夹，例如 /src/test。
2.  我还阅读了官方文档中的[相应指南](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.jubula.client.ua.help%2Fhtml%2Fmanual%2Fnode125.html)。但是，我无法找到[所描述](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.jubula.client.ua.help%2Fhtml%2Fmanual%2Fnode136.html)的中央测试编辑器。

如何将测试文件（尤其是 CSV 文件）加载到虚拟控制台中，以便在程序运行时对其进行识别？我也搜索了其他几个答案，但无法掌握这个概念。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T10:13:34.770

尝试将其放在项目的根目录中。通过代码访问文件时，会在 Java 系统变量`user.dir`中指定的目录中查找文件，该目录通常是项目的根目录。

我假设您尝试按如下方式加载文件：

```
File file = new File("myCsv.csv"); 
```

在这种情况下，以下适用：

> 默认情况下，java.io 包中的类总是根据当前用户目录解析相对路径名。此目录由系统属性 user.dir 命名，通常是调用 Java 虚拟机的目录。

# javascript - JavaScript 动态更改 div（页脚）位置 - 我的代码有什么问题？

> ID：15050670
> 
> 赞同：1
> 
> 时间：2013-02-24T10:09:53.463
> 
> 标签：javascript, css, positioning

我正在构建一个 Wordpress 主题，但页脚位置有问题。索引页很好，我在 style.css 中定义了“footer”的 margin-top，witch 将 bckimage 保存为 900px，将“foot_sadrzaj”的 margin-top 保存为 918px，因为“foot_sadrzaj”保存了文本和图像。这是链接：[http ://casabianca.ba/test/](http://casabianca.ba/test/)

好吧，如果我去页面，页面的内容在，或者在显示帖子时，在 . 我编写了一些 JS 代码来更改页脚和 foot_sadrzaj 的位置，具体取决于包含内容的元素 sadrzaj 或 sadrzaj_single 的位置和高度，但它不起作用（就像这里：[http](http://casabianca.ba/test/novosti/) ://casabianca.ba/test/novosti/ ） ....你能帮我弄清楚为什么吗？

这是代码：

```
var div = getElementById('sadrzaj');
var div2 = getElementById('sadrzaj_single');

if (div) {
    var z = div.style.offsetTop+div.style.offsetHeight;
    getElementById('footer').setAttribute(
            "style", "marginTop:" + z.toString() + "px");
    getElementById('foot_sadrzaj').setAttribute(
            "style", "marginTop:" + (z+18).toString() + "px");
}
else if (div2) {
    var z = div2.style.offsetTop+div2.style.offsetHeight;
    getElementById('footer').setAttribute(
            "style", "marginTop:" + z.toString() + "px");
    getElementById('foot_sadrzaj').setAttribute(
            "style", "marginTop:" + (z+18).toString() + "px");
} 
```

拜托，我只知道一些 JS 和零 JQuery，所以回答诸如“尝试 Jquery，我认为......”之类的东西根本没有帮助......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T12:39:45.633

您的代码中的一些修复

```
window.onload = function ()
    {
        var div=document.getElementById('sadrzaj');
        var div2=document.getElementById('sadrzaj_single');

        if(div) {
            var z=div.offsetTop+div.offsetHeight;
            var footer = document.getElementById('footer');
            footer.setAttribute("style","margin-top:" + z.toString() + "px");

            var foot_sadrzaj = document.getElementById('foot_sadrzaj');
            foot_sadrzaj.setAttribute("style","margin-top:" + (z+18) + "px");
        }
        else if (div2) {
            var z=div2offsetTop+div2.offsetHeight;
            document.getElementById('footer').setAttribute("style","margin-top:" + z + "px");
            document.getElementById('foot_sadrzaj').setAttribute("style","margin-top:" + (z+18) + "px");
        }
    } 
```

1.  您应该使用`window.onload`, 仅在文档​​准备好后运行您的脚本
2.  你不需要`style`在`div.style.offsetTop+div.style.offsetHeight`。
3.  你写`margin-top`在`.setAttribute`函数中，而不是`marginTop`.
4.  你不必添加`toString()`，JS知道如何处理这个
5.  此行`document.getElementById('footer').setAttribute("style","margin-top:" + z + "px");`正在禁用您在此处编写的内联`background-image`属性，我假设您可以从这里自己处理

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T12:14:00.447

而不是`margin-top`用于`"bottom : 0"`将事物与容器 div 的底部对齐。然后停止使用 Javascript 来定义位置，而只使用 CSS。

`"z-index:100000"`设置和设置甚至可能很有趣`"position:fixed"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T17:07:08.377

即使是艰难的代码也有效，我错过了一个角度：如果内容小于浏览器窗口怎么办。或者还没有内容？然后我的页脚挂在中间的某个地方，而不是底部。这是解决方案，感谢@Mitz 和[James Padolsey](http://james.padolsey.com/javascript/get-document-height-cross-browser/)

最终解决方案：

```
function getDocHeight() {
var D = document;
return Math.max(
        Math.max(D.body.scrollHeight, D.documentElement.scrollHeight),
        Math.max(D.body.offsetHeight, D.documentElement.offsetHeight),
        Math.max(D.body.clientHeight, D.documentElement.clientHeight)
    );
}

window.onload = function (){
    var div=document.getElementById('sadrzaj');
    if(div) {
        var z=div.offsetTop+div.offsetHeight;
    var z2=div.offsetTop+div.offsetHeight+18;
    var windowHeight= getDocHeight();
if(z>windowHeight) {
        var footer = document.getElementById('footer');
        footer.setAttribute("style","margin-top:" + z + "px");

        var foot_sadrzaj = document.getElementById('foot_sadrzaj');
        foot_sadrzaj.setAttribute("style","margin-top:" + z2 + "px");
}
else {
    var footer = document.getElementById('footer');
        footer.setAttribute("style","margin-top:" + windowHeight + "px");

        var foot_sadrzaj = document.getElementById('foot_sadrzaj');
        foot_sadrzaj.setAttribute("style","margin-top:" + (windowHeight+18) + "px");
    }
} 
```

# javascript - 将背景颜色设置为范围输入的值

> ID：15050671
> 
> 赞同：-2
> 
> 时间：2013-02-24T10:09:53.220
> 
> 标签：javascript, colors, range, background-color, rgb

这是我的代码：

```
<input id="red" name="red" type="range" min="0" max="255" step="1" value="128></input>
<label for="red">red</label>
<br>
<input id="green" name="green" type="range" min="0" max="255" step="1" value="128"></input>
<label for="green">green</label>
<br>
<input id="blue" name="blue" type="range" min="0" max="255" step="1" value="128"></input>
<label for="blue">blue</label> 
```

如何使用 JavaScript 根据范围 (RGB) 的值设置背景颜色 (html 正文)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T14:02:00.450

您想要做的是在您的输入中添加一个 onchange 部分，以便在用户更改输入滑块的值时进行处理。这就是它的样子：

```
<input id="red" name="red" type="range" min="0" max="255" step="1" value="128" onchange="changeColor()"></input>
<label for="red">red</label>
<br>
<input id="green" name="green" type="range" min="0" max="255" step="1" value="128" onchange="changeColor()"></input>
<label for="green">green</label>
<br>
<input id="blue" name="blue" type="range" min="0" max="255" step="1" value="128" onchange="changeColor()"></input>
<label for="blue">blue</label> 
```

现在你想做一个真正改变背景颜色的函数：

```
function changeColor(){
    var red = document.getElementById("red").value;
    var green = document.getElementById("green").value;
    var blue = document.getElementById("blue").value;
    document.body.style.background = "rgb(" + red + "," + green + "," + blue + ")";
} 
```

# jquery - Ajax 分页仅在第一次和第三次有效

> ID：15050675
> 
> 赞同：0
> 
> 时间：2013-02-24T10:10:09.050
> 
> 标签：jquery, wordpress

我正在使用基于 ajax 的分页，这是标记

```
<div id="portfolio-thumbs">
    <ul id="portfolio-destaque">
        HERE GOES MY LOOP AND CONTENT , some LI's with thumbs and stuff   
    </ul>
</div>
<div id="pagi-container">
    <div id="paginar">
        <?php posts_nav_link(); ?> 
    </div>
</div> 
```

`<?php posts_nav_link(); ?>`渲染看起来像这样：

```
<div id="pagi-container">
    <div id="paginar">
        <a href="http://localhost/paulo/page/2/" >next Page &raquo;</a>  
    </div>
</div> 
```

然后，我使用这个 jquery 来加载分页链接：

```
$('#paginar > a').on('click',  function(e){
    e.preventDefault();
    var link = jQuery(this).attr('href');
    jQuery('#portfolio-thumbs').html('Loading...');
    jQuery('#portfolio-thumbs').load(link+' #portfolio-destaque');
    jQuery('#pagi-container').load(link+' #paginar');   
}); 
```

当我单击 Next Page 链接时，它会`#portfolio-thumbs`使用标记 ok 加载里面的内容，唯一的区别是`#pagi-container`加载这个：

```
<div id="pagi-container">
    <div id="paginar">
        <a href="http://localhost/paulo/">« Prev Page</a> — 
        <a href="http://localhost/paulo/page/3/">Next Page »</a>  
    </div>
</div> 
```

此时，Jquery 不再工作。如果我单击任何分页链接，它会加载整个页面......在下一页中，它仅加载 1 个分页链接，它可以正常工作。我的猜测是，不知何故，我的 jquery 只与 1 一起工作`#paginar a`，当有超过 1 个链接时中断....但我不确定......有人知道吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T10:40:10.250

这是因为您正在更改 的内容`#paginar`，所以会发生链接上的事件被清除的情况。根据您的 jquery 版本，您可以使用`.live()`或将事件添加到`#pagi-container`：

`$('#pagi-container').on('click','#paginar > a',function() {... }`

# php - 是否有 ftp_rawlist() 替代方法来避免内存问题？

> ID：15050682
> 
> 赞同：0
> 
> 时间：2013-02-24T10:11:06.100
> 
> 标签：php, ftp

我正在使用 ftp_rawlist() 来获取目录中的文件列表：

```
$files = ftp_rawlist($ftp, "-A " . $ftp_dir);// obtain hidden files without "." and ".." 
```

到目前为止，一切都很好。但是有些文件夹包含数千个文件，所以我遇到了内存使用问题：

> 致命错误：Y 行 X 中允许的内存大小为 67108864 字节已用尽（尝试分配 209855912 字节）

有没有其他方法可以逐行获取 LIST 结果？也许通过 ftp_raw()？

编辑：我不想使用 ini_set('memory_limit', 'xxxM'); 因为我永远不知道需要多少内存，而且我认为这不是一个好习惯，因为某些主机不允许更改此值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T10:15:34.077

尝试增加内存限制

```
ini_set("memory_limit", "64M") 
```

64 或更多 MB

您也可以关闭最大执行时间

```
set_time_limit(0); 
```

# objective-c - “简单 FTP 示例”中上传的百分比和当前速度

> ID：15050687
> 
> 赞同：0
> 
> 时间：2013-02-24T10:11:39.237
> 
> 标签：objective-c, cocoa, ftp, data-transfer

在 Apple 的[SimpleFTPSample](http://developer.apple.com/library/ios/#samplecode/SimpleFTPSample/Introduction/Intro.html)中，是否可以显示当前文件的传输速度和上传百分比？

# ios - 总是从 CLLocationManager 获得相同的坐标

> ID：15050690
> 
> 赞同：0
> 
> 时间：2013-02-24T10:11:42.437
> 
> 标签：ios, objective-c, geolocation, core-location

我想使用 CLLocationManager 在每次点击按钮时获取当前位置，但始终获得相同的坐标:(

```
- (void)GetCoord
{
    self.currentLocation = nil;

    self.locationManager = [[CLLocationManager alloc] init];
    self.locationManager.delegate = self;
    self.locationManager.desiredAccuracy = kCLLocationAccuracyBest;
    [self.locationManager startUpdatingLocation];
}

- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation 
{
    self.currentLocation = newLocation;

    UIAlertView *alert = [[UIAlertView alloc] 
        initWithTitle:@"Megerősítés" 
        message:[NSString stringWithFormat:@"%f ::: %f", newLocation.coordinate.latitude, newLocation.coordinate.longitude] 
        delegate:self 
        cancelButtonTitle:@"Nem" 
        otherButtonTitles:nil
    ];

    [alert show];
    [self.locationManager stopUpdatingLocation];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T10:19:57.803

```
 -(void) updateLocation
    {
        [locationManager startUpdatingLocation];
    }

- (void)locationManager:(CLLocationManager *)manager
        didUpdateToLocation:(CLLocation *)newLocation 
               fromLocation:(CLLocation *)oldLocation
    {
        userLocation.latitude = newLocation.coordinate.latitude;
        userLocation.longitude = newLocation.coordinate.longitude;

        [locationManager stopUpdatingLocation];
        //Send any notification to your controller about the update location.
    } 
```

# c++ - 堆栈中的无限循环，实现为“链表”

> ID：15050691
> 
> 赞同：1
> 
> 时间：2013-02-24T10:11:45.927
> 
> 标签：c++, for-loop, linked-list, stack

请看下面的代码

```
#include <iostream>

using namespace std;

class Stack
{
public:
    Stack();
    ~Stack();

    void push(void *data);
    void *pop();
    void print();

protected:
    typedef struct Element
    {
        struct Element *next;
        void *data;

    }Element;

    Element *top;
};

Stack::Stack()
{
    top = NULL;
}

Stack::~Stack()
{
    while(top)
    {
        Element *elm = top->next;
        delete top;
        top = elm;
    }
}

void Stack::push(void *data)
{
    Element *elm = new Element;
    elm->data = data;
    elm->next = top;;
    top = elm;
}

void *Stack::pop()
{
    void *data;

    if(top==NULL) return data;

    data = top->data;

    Element *elm = top;

    top = elm->next;
    delete elm;
    return data;

}

void Stack::print()
{
    Element *elm = top;

    while(elm)
    {
        cout << *(static_cast<int *>(elm->data))<<" ";
        elm = elm->next;
    }

    cout << endl;
}

int main()
{
    Stack *st = new Stack;;

    int n1 = 10;
    int n2 = 20;
    int n3 = 30;
    int n4 = 40;
    int n5 = 50;

    st->push(&n1);
    st->push(&n2);
    st->push(&n3);
    st->push(&n4);
    st->push(&n5);
    st->print();

    cout << *(static_cast<int*>(st->pop()))<< " poped\n";
    cout << *(static_cast<int*>(st->pop()))<< " poped\n";

    st->print();

    cout << endl;

    system("pasue");
    return 0;
} 
```

实际上，我正在学习这种数据结构以这种方式实现，这是我的第一次尝试。为什么会进入无限循环？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T10:15:29.567

这是问题所在：

```
void *Stack::pop()
{
    void *data;
    //...
} 
```

使用前初始化变量：

```
void *Stack::pop()
{
    void *data = NULL;
    //...
} 
```

如果将`pop`方法放在循环中以提取所有元素，它可能永远不会返回`NULL`，因为未初始化的变量可以具有任何值（无论之前在内存位置中的值）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T10:18:00.810

You are returning garbage value

```
void *Stack::pop()
{
    void *data;

    if(top==NULL) return data; 
```

At this `if(top==NULL) return data;` data points garbage
You should return NULL

```
if(top==NULL) return top; 
```

# jquery - 在 jQuery 中使用 .each() 中的 .load() 方法不返回所有 html 内容

> ID：15050699
> 
> 赞同：1
> 
> 时间：2013-02-24T10:12:42.420
> 
> 标签：jquery

我正在尝试遍历页面中的超链接列表，从每个超链接页面加载 html 内容并将其附加到当前页面中的 div 中。但结果是只有一个页面中的 html 内容被加载并附加到 div .我怎样才能达到预期的效果。

这是我试图实现结果的代码片段：

```
$('th[scope="row"]').children("a").each(function(){
    var url = $(this).attr("href");
    var tempDiv = $('<div id=\"loadedDiv\"></div>').appendTo('.someClass');
    var fullUrl = url+' '+'.tabClass';
    $("#loadedDiv").load(fullUrl);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T10:18:32.997

您应该使用`loadedDiv`非 id 类，因为 id 必须是唯一的。

事实上，一些使代码更快更简洁的调整是

```
$('th[scope="row"]>a').each(function(){
    $('<div class=\"loadedDiv\"></div>').load(this.href + ' .tabClass').appendTo('.someClass');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T10:18:53.033

```
$('<div id=\"loadedDiv\"></div>') 
```

在 .each 循环内不是一个好主意。

你会得到一些具有相同 id 的 div。

[id和class的区别](http://css-tricks.com/the-difference-between-id-and-class/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T10:31:54.737

您在每次迭代中创建具有相同`id`,的新元素。`loadedDiv`这是无效的 HTML，因为`id`属性必须是唯一的。此外，`$("#loadedDiv")`总是会获取相同的元素，通常是第一次出现，`#loadedDiv`并且您最终会`div`一遍又一遍地重写相同的内容。

`id`如果使用链创建、附加和加载内容，则无需为新创建的元素分配属性。

```
$('th[scope="row"]').children("a").each(function(){
    var url = $(this).attr("href");
    var fullUrl = url + ' .tabClass';
    $('<div/>').appendTo('.someClass').load(fullUrl);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T10:15:48.290

不要使用负载，而是使用 $.get ：

```
$.get(fullUrl, function(response) {

    $("#loadedDiv").append(response);

}); 
```

# php - PHP：带 UTF-8 的 strpos 和 substr

> ID：15050710
> 
> 赞同：4
> 
> 时间：2013-02-24T10:13:59.773
> 
> 标签：php, utf-8, strpos

假设我有一个很长的 UTF-8 编码字符串。

并说我想检测`$var`这个字符串中是否存在。

假设`$var`总是简单的字母或ascii字符的数字（例如`"hello123"`）我不应该使用`mb_strpos`或`iconv_strpos`对吗？因为只要它与其他功能一致，位置是否在字符方面不正确并不重要。

例子：

```
$var='hello123';
$pos=strpos($utf8string,$var);
if ($pos!==false) $uptohere=substr($ut8string,0,$pos); 
```

我是否正确，`'hello123'`无论字符串是否包含花哨的 UTF-8 字符，上述代码都会提取所有内容？我的逻辑是，因为两者都`strpos`将`substr`相互一致（即使这一直是错误的），所以它应该仍然有效。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-24T10:24:30.027

是的，你是对的。字符本身没有歧义，即`hello123`在 UTF-8 中不可能有其他任何东西。您切片它的方式，无论您是按字符还是按字节数切片都没有关系。

所以是的，这是安全的，**只要您的字符串是 UTF-8 并因此与 ASCII 兼容**。

请参阅此处进行快速测试：http: [//3v4l.org/XnM8s](http://3v4l.org/XnM8s)

为什么这样有效：

UTF-8 中的字符串“汉字hello123”看起来像这样的字节（我希望它正确对齐）：

```
e6 | bc | a2 | e5 | ad | 97 | 68 | 65 | 6c | 6c | 6f | 31 | 32 | 33
     漢      |      字      | h  | e  | l  | l  | o  | 1  | 2  | 3 
```

`strpos`将查找字节序列`68656c6c6f313233`，`6`作为“hello123”的起始字节返回。`substr`将从 byte 中切出 6 个字节`0`，返回“汉字”。没有歧义。您正在按字节查找和切片，不管有多少字符。

您需要完全在*characters*中工作，在这种情况下，字符串函数必须是编码感知的。或者您完全在*bytes*中工作，在这种情况下，唯一的要求是字节不模棱两可（比如“hello123”可以匹配以 BIG5 编码的“中国”，因为字节是相同的（它们不一样，只是一个例子） ）。UTF-8 是*自同步*的，这意味着没有这种歧义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T10:21:20.237

在 UTF-8 中，您必须使用 mb_* 函数，在您的情况下，您需要将 substr 替换为

```
mb_substr($var, 0, N, 'UTF-8'); 
```

[mb_substr()](http://www.php.net/manual/en/function.mb-substr.php)

# c# - 在树视图中将文件排序到按月份命名的子文件夹中

> ID：15050711
> 
> 赞同：0
> 
> 时间：2013-02-24T10:13:59.823
> 
> 标签：c#, visual-studio-2010, treeview

我希望文件夹中的子文件夹在树视图控件中按月排列。Treeview 控件用于列出目录中的所有子文件夹。由于 treeview 根据 Windows 资源管理器获取子文件夹，但有什么方法可以按月对其进行排序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T10:24:51.740

据我了解，将您的树视图分配给此数据源

```
 var sortedDirs =
            from dirDate in
                (
                    from dir in Directory.GetDirectories(BASEDIR)
                    select new {
                        Dir = dir,
                        Date = Directory.GetCreationTime(dir)
                    })
            orderby dirDate.Date.Month
            select dirDate.Dir; 
```

# c++ - Visual C++ 运行时对象销毁顺序

> ID：15050713
> 
> 赞同：0
> 
> 时间：2013-02-24T10:14:08.587
> 
> 标签：c++, visual-c++, object-lifetime

我偶然发现了一个相当烦人的问题，它与 Visual C++ 运行时在程序退出时破坏我的对象有关。

我有一个类，用于确保对某些状态的引用是有效的。我需要将状态存储一段未知的时间，在此期间状态可能会被破坏并且我无法使用`shared_ptr`. 所以我用

```
class MyClass
{
private:   
    static std::list<MyClass*> make_list();
    static std::list<MyClass*> refed_list;          
    static void StateClosed(B* state);

public:
    B* state;
    MyClass(B* state);
    virtual ~MyClass();

    bool still_valid() const;
 }; 
```

的每个实例都`MyClass`将自己添加到`refed_list`其构造函数中，并在其析构函数中删除自己。如果封装状态关闭，`MyClass`则通知它并检查`refed_list`封装实例并使其指针无效。这并不相关，重要的是它使用 a`static list`并且它在构造函数/析构函数中访问此列表。`refed_list`我在定义的文件中初始化`MyClass`。

现在，问题.. 当我的程序关闭时，运行时`refed_list`会在某个时候清理，然后清理 的实例`MyClass`，调用它们的析构函数。然后他们尝试访问`refed_list`已经被清理的。这导致我的迭代器不正确，并且我得到未定义的行为，在这种情况下是调试断言失败。

有没有办法解决这个问题？我怀疑我可以指定不同编译单元中的哪些订单对象被破坏，但是有没有办法检查是否`refed_list`仍然有效？目前我检查`refed_list.size() == 0`它是否有效，但它的行为也未定义（我认为？）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T11:31:39.360

You can always make `refed_list` a pointer that is initialised on start up. That way it will never be cleaned up. (And any memory it uses will be recovered by the OS when your process exits.)

If that sounds like a hack to work around a deeper design problem, then it probably is. :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T11:08:14.570

我不认为这是真的：

> 当我的程序关闭时，运行时会在某个时候清理 refed_list，然后清理 MyClass 的实例，调用它们的析构函数。

运行时肯定会清理列表，但不会清理列表中的对象，因为它们是指针。唯一的方法是使用像 shared_ptr 这样的智能指针类。尽管如此，如果你这样做了，对象会在列表被销毁时尝试访问它，我不确定这是未定义的行为，但它肯定看起来很不稳定。

Perhaps you should redesign it so that the objects don't need to reference the list where they're stored, or at least to do it **before** the list is destroyed (and by that I mean before list::~list is even called).

# ruby-on-rails - Rails 上的 Backbone 如何将模型添加到来自不同视图的集合中？

> ID：15050728
> 
> 赞同：0
> 
> 时间：2013-02-24T10:15:56.593
> 
> 标签：ruby-on-rails, ruby-on-rails-3, backbone.js, coffeescript

我正在使用`Rails 3`, 和`backbone-on-rails`gem 开发 Rails 应用程序。

我有一条显示 ProductTypes 的主干路线。它有一个用于列表的主干视图和一个用于表单的视图，因此 usar 可以添加新的 ProductTypes。

一切正常，但是当我尝试将创建的模型从表单视图添加到列表视图上的集合时。我不知道如何连接两个视图。

这是我的路线：

```
class Newgvbtool.Routers.ProductTypes extends Backbone.Router
  routes:
    'companies/:company_id/product_types': 'index'

  initialize: ->
    @container = $('#product-types-view')
    @company_id = @container.data 'company_id'
    @collection = new Newgvbtool.Collections.ProductTypes([],{ company_id: @company_id })
    @collection.fetch()

  index: (company_id) ->
    view = new Newgvbtool.Views.ProductTypesIndex(collection: @collection)
    @container.append view.render().el

    newModel = new Newgvbtool.Models.ProductType({ company_id: @company_id })
    editView = new  Newgvbtool.Views.ProductTypeEdit model: newModel
    @container.append editView.render().el 
```

她是我的模特：

```
class Newgvbtool.Models.ProductType extends Backbone.Model
  initialize: (model)-> 
    @company_id = model.company_id
    @id = model.id
  url: ()->
    "/api/companies/#{@company_id}/product_types/" + (@id || '') 
```

以下是我的看法：

```
# Collection view
class Newgvbtool.Views.ProductTypesIndex extends Backbone.View

  template: JST['product_types/index']

  events: ->

  initialize: ->
    @collection.on 'reset', @render
    @collection.on 'add', @appendItem
    @collection.on 'remove', @removeItem

  render: =>
    $(@el).html @template()
    @collection.each @appendItem
    @

  appendItem: (model)=>
    view = new Newgvbtool.Views.ProductType model: model
    $('#product-types tbody').append(view.render().el)

  removeItem: (model)=>
    $('#product-types tbody').find("tr[data-id=#{model.get('id')}]").remove()

 #Item view
 class Newgvbtool.Views.ProductType extends Backbone.View

  template: JST['product_types/product_type']
  tagName: 'tr'

  events:
    'click .delete-item': 'deleteItem'

  initialize: ->
    @model.on 'highlight', @highlight
    @model.on 'change', @render

  render: =>
    $(@el).attr('data-id', @model.get('id')).html @template( model: @model)
    @

  highlight: =>
    @$('td').effect 'highlight', 1000

  deleteItem: ->
    @model.destroy(
      wait: true
    ) if confirm "Are you sure?"

#Form view
class Newgvbtool.Views.ProductTypeEdit extends Backbone.View

  template: JST['product_types/edit']

  render: =>
    $(@el).html @template( model: @model )
    @

  events: ->
    'submit #product-type-form': 'createProductType'

  createProductType: (e) ->
    e.preventDefault()

    attributes = $(e.currentTarget).serializeForm()['product_type']

    @model.save attributes,
      wait: true
      success: (model)->
        $('#product-type-form')[0].reset()
        model.trigger('highlight') 
```

有没有办法，当一个新模型保存在表单视图中时，我实际上可以将该模型添加到主集合中，以便触发添加事件并且这个新模型出现在集合视图中？

在更新项目的情况下，我可以做相反的操作，将列表中选择的模型设置到表单中，以便可以更新并将这些更改反映到集合的视图中吗？

非常感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T02:47:36.330

我建议您在应用程序上创建一个事件聚合器，这样您就可以轻松地在视图上触发自定义事件，并让另一个监听器对其做出反应。

这是 Derick Bailey 帖子的[链接](http://lostechies.com/derickbailey/2012/04/03/revisiting-the-backbone-event-aggregator-lessons-learned/)，他解释了这是如何工作的，并给出了一些关于如何实现它们的想法。

如果您使用主对象来实例化您的应用程序，您可以执行以下操作：

```
window.App =
 Models: {}
 Collections: {}
 Views: {}
 Routers: {}

 initialize: ->
  @vent = _.extend({}, Backbone.Events)
  # More code here

$(document).ready ->
  App.initialize() 
```

然后，`App.vent`将是您的事件聚合器，您可以触发如下事件：

```
App.vent.trigger "model:add:success", @model 
```

在这里，您通过模型“@model”触发“model:add:success”。然后你可以在其他地方捕捉它：

```
initialize: ->
  App.vent.on "model:add:success", @appendModel, this 
```

# php - 将排名列表存储在 mysql 表中

> ID：15050731
> 
> 赞同：4
> 
> 时间：2013-02-24T10:16:10.790
> 
> 标签：php, mysql, sql, phpmyadmin

让我们拥有这张桌子（`rank_list`）。

```
+--------+--------+--------+--------+
|  Sub   |  Name  |  Rank  | Marks  |
+--------+--------+--------+--------+
|Math2   |Smith   |       1|      85|
|Math1   |John    |       1|      92|
|Math1   |Susan   |       2|      91|
|Math1   |Abc     |       3|    90.5|
+--------+--------+--------+--------+ 
```

现在我还有四个结果。我必须插入这些给他们正确的排名。我也不接受排名超过 3 的结果。

```
Sub = Math2,    Name = Mile,  Marks = 86
Sub = Math1,    Name = Luna,  Marks = 92.5
Sub = Physics1, Name = Sakib, Marks = 88.75
Sub = Math1,    Name = Coolb, Marks = 65 
```

由于`Mile`有一个排名为 2 的标记，他将被插入为`Rank`2。

Luna 有最高分，她会得到`Rank`1 并且`Abc`将被删除（是的，已删除）。

Sakib来自Physics1，所以他将直接插入，因为他目前在物理中排名第一。

Coolb 不会被插入，因为他不在前三名。

**我希望 MySQL 查询来做到这一点。**

我可以使用 来做到这一点`PHP`，但这需要很多时间。所以，我想用 SQL 来做这个（为了更快的插入和删除）。我需要你的帮助。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T12:09:51.850

[这是如何在 MySQL 中执行分组排名](https://stackoverflow.com/questions/532878/how-to-perform-grouped-ranking-in-mysql)的一个无耻窃取的示例

您的数据库设计不太适合它，但它确实有效，并且在您达到非常多的行数之前它不会变慢，如果您觉得它太慢了，您总是可以使用触发器并创建一种“物化视图”与当前排名。

用于测试的小提琴：[http ://sqlfiddle.com/#!2/b2cd8/15](http://sqlfiddle.com/#!2/b2cd8/15)

基于您的表的 SQL：

```
SELECT Name, Sub, Marks, Rank
FROM
    (SELECT Name, Sub, Marks,
        @student:=CASE WHEN @last_sub <> Sub THEN 1 ELSE @student+1 END AS Rank,
        @last_sub:=Sub
    FROM
        (SELECT @student:= 0) AS s,
        (SELECT @class:= 0) AS c,
        (SELECT * 
            FROM rank_list
            ORDER BY Sub, Marks DESC
        ) AS temp
    ) AS temp2
WHERE Rank <= 3 
```

# apache - 浏览器下载 index.php 文件而不打开页面

> ID：15050732
> 
> 赞同：0
> 
> 时间：2013-02-24T10:16:16.850
> 
> 标签：apache, codeigniter, ubuntu

我刚刚将一个工作的 codeigniter 目录结构复制到了一个新的 ubuntu EC2 实例。我已经设置了 apache，并希望浏览器页面只显示出来，但没有！浏览器会下载 codeigniter 的 index.php 文件。

为什么会这样？

所有文件都具有 ubuntu:ubuntu 的用户/组权限。它是否必须使用不正确的权限做某事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T10:20:20.377

我对 ec2 不是很熟悉，但听起来 php 没有被加载到 apache 中。尝试`sudo a2enmod php5`并重新启动 apache。

# android - 使用 AndroidProguardScala 设置 TextView 的文本

> ID：15050733
> 
> 赞同：1
> 
> 时间：2013-02-24T10:16:37.383
> 
> 标签：android, eclipse, scala

我有一点用 Java 为 Android 编程的经验，但我最近接触了 Scala，并想用这种语言编写我的 Android 应用程序。我有 ScalaIDE nightly 和 AndroidProguardScala 的 Eclipse 设置，我可以很好地运行用 Scala 编写的 hello world 应用程序。我决定通过代码更改 TextView 的值以感受使用 Scala，但我似乎无法为 setText 做任何事情。

这是我最近的尝试：

```
import android.app.Activity
import android.os.Bundle
import android.view.Menu
import android.widget.TextView

class MainActivity extends Activity {
    def textview = findViewById(R.id.testTV)

    override def onCreate(savedInstanceState : Bundle) {
       super.onCreate(savedInstanceState)
       setContentView(R.layout.activity_main)

       val works = "Scala is working"

       textview.setText(works)

} 
```

我发现发布的原始方式是：

```
val testText = findViewById(R.id.testTV)
val works = "Scala is working"
testText setText works 
```

两种方法都行不通。两者都给我一个错误，指出 setText 不是 android.view.View 的成员。有人有这方面的经验可以帮助我吗？

这是我的 XML 文件：

```
 <TextView
        android:id="@+id/testTV"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/hello_world" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T10:24:06.933

`findViewById`可能返回 a `View`，它没有`setText`方法。由于您没有在 上声明类型`testText`，因此编译器正在推断`View`.

尝试：

```
val testText:TextView = findViewById(R.id.testTV) 
```

以便编译器知道它是 a `TextView`，并且`setText`应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T22:34:26.733

```
val str = "Hi from Scala"
findViewById(R.id.testTV).asInstanceOf[TextView].setText(str) 
```

将写入文本视图

# html - 如何显示 tag in webpage to input data other than Windows Explorer I have recently learnt how to input data to my webpage from a txt file using tag and DATASRC. However when using the following code, it only works in Internet Explore 问问题 问问题 2013-02-24T10:17:13.237 172 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I have recently learnt how to input data to my webpage from a txt file using tag and DATASRC. However when using the following code, it only works in Internet Explorer. <param name="DataURL" value="div1.txt"> <param name="UseHeader" value="false"> 

| **Team** | **P** | **W** | **L** | **F** | **A** | **Pts** |

|  |  |  |  |  |  |  |

Is there any way I can get Firefox, Chrome, and the iphone/ipad to see the data that is imported? I have very basic html and css skills but learning all the time. I was going to use PHP but the server doesn't support it. Any suggestions would be helpful otherwise I will have to continue importing tabular data in dreamweaver. cheers Richard To make a darker color multiply the RGB components by 0.5 or 0.75 for example. Scaling the RGB values, each by the same factor, has the effect of making a color darker or brighter without changing the hue. htmlobjectxhtmldatasource 4 0 回答 0 Related 1 mysql - 在 mySQL 查询中组合常用值 2 image - Tinymce粘贴图像？ 1 objective-c - 具有异步操作和 UI 的顺序执行流程 2 javascript - 我在 javascript 替换正则表达式方面需要帮助 1 asp.net-mvc-3 - MVC3 EditorFor 未在 Chrome 中填充 1 smarty - Smarty 只显示匹配字符串的一次迭代 2 php - PHP会话变量不起作用 2 android - 支持包对 Android 的影响 4 ios - 如何从 CGPoint 和 CGSize 创建 CGRect？ 1 iphone - 在 Xcode 中导入文件后的问题：自动补全在 + 标头路径如何变化时无法正常工作？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15050737
> 
> 赞同：1
> 
> 时间：
> 
> 标签：html, object, xhtml, datasource

I have recently learnt how to input data to my webpage from a txt file using tag and DATASRC. However when using the following code, it only works in Internet Explorer.

```
<OBJECT ID="league"
     CLASSID="clsid:333C7BC4-460F-11D0-BC04-0080C7055A83"
     BORDER="0"
     WIDTH="0"
     HEIGHT="0">
 <PARAM NAME="DataURL" VALUE="div1.txt" />
 <PARAM NAME="UseHeader" VALUE="false" />
</OBJECT>
  <table width="100%" border="0" cellspacing="0" cellpadding="0">
    <!--DWLayoutTable-->
    <tr> 
      <td><b>Team</b></td>
      <td width="30"><b>P</b></td>
      <td width="30"><b>W</b></td>
      <td width="30"><b>L</b></td>
      <td width="30"><b>F</b></td>
      <td width="30"><b>A</b></td>
      <td width="30"><b>Pts</b></td>
    </tr></table>

    <TABLE WIDTH="100%" DATASRC="#league" datapagesize="10" border="0" cellspacing="0" cellpadding="0">

 <TR>  
    <TD><SPAN DATAFLD="column1"></SPAN></TD>
    <TD width="30"><SPAN DATAFLD="column2"></SPAN></TD>      
    <TD width="30"><SPAN DATAFLD="column3"></SPAN></TD>
    <TD width="30"><SPAN DATAFLD="column4"></SPAN></TD>
    <TD width="30"><SPAN DATAFLD="column5"></SPAN></TD>
    <TD width="30"><SPAN DATAFLD="column6"></SPAN></TD>
    <TD width="30"><SPAN DATAFLD="column7"></SPAN></TD>
  </TR>
</TABLE> 
```

Is there any way I can get Firefox, Chrome, and the iphone/ipad to see the data that is imported?

I have very basic html and css skills but learning all the time. I was going to use PHP but the server doesn't support it.

Any suggestions would be helpful otherwise I will have to continue importing tabular data in dreamweaver.

cheers Richard

# linux - $(shell pwd) 有什么价值？

> ID：15050748
> 
> 赞同：12
> 
> 时间：2013-02-24T10:18:41.280
> 
> 标签：linux, bash, makefile

通过我发现的 MakeFile

`PROJECT_ROOT = $(shell pwd)`

它赋予什么价值？

`$SHELL`给出 shell 并`$PWD`给出当前工作目录 但是 $(shell pwd) 给出了什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-24T10:23:15.813

该`$(shell)`函数调用 shell 以执行命令。在这种情况下执行的命令是`pwd`，就像您`pwd`在 bash shell 提示符下运行一样。

因此，`$(shell pwd)`将返回当前工作目录。您可能无法保证该`$PWD`变量存在于您的 make 环境中。

# java - Java JNA sendMessage() not found

> ID：15050750
> 
> 赞同：3
> 
> 时间：2013-02-24T10:18:51.357
> 
> 标签：java, jna, sendmessage, user32

I'm trying to use [JNA](https://github.com/twall/jna) [(Overview)](https://github.com/twall/jna#readme) to send messages to an application when minimized or not on top (mouse click for example), and the I found that people are using com.sun.jna.platform.win32.User32.[SendMessage](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644950%28v=vs.85%29.aspx)A( hW, 0x0201, 0, 0);

But i can't found this function in this class.

Can someone give me an example of how to implement it if I'm doing it wrong?

CODE:

```
User32 user32;
Pointer hW = user32.GetForegroundWindow().getPointer();
user32.SendMessageA( hW, 0x0201, 0, 0 ); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-23T05:30:49.880

```
public interface User32Ext extends User32 {
User32Ext USER32EXT = (User32Ext) Native.loadLibrary("user32",

        User32Ext.class, W32APIOptions.DEFAULT_OPTIONS);

HWND FindWindowEx(HWND lpParent, HWND lpChild, String lpClassName,
        String lpWindowName);

HWND GetTopWindow(HWND hwnd);

HWND GetParent(HWND hwnd);

HWND GetDesktopWindow();

int SendMessage(HWND hWnd, int dwFlags, byte bVk, int dwExtraInfo);

int SendMessage(HWND hWnd, int Msg, int wParam, String lParam);

void keybd_event(byte bVk, byte bScan, int dwFlags, int dwExtraInfo);

void SwitchToThisWindow(HWND hWnd, boolean fAltTab);

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T19:54:46.053

你需要自己定义这个函数。所有的窗口功能都不是预定义的。

示例：（未经测试 - 仅使用示例）

```
public interface MyUser32 extends User32 {
    MyUser32 INSTANCE = (MyUser32)Native.loadLibrary("user32", MyUser32.class, W32APIOptions.DEFAULT_OPTIONS);
    LRESULT SendMessage(HWND hWnd, int Msg, WPARAM wParam, LPARAM lParam);
} 
```

# java - Java 布局管理不显示面板

> ID：15050753
> 
> 赞同：-1
> 
> 时间：2013-02-24T10:19:06.197
> 
> 标签：java, swing, applet, awt, layout-manager

我有一个简单的 java 小程序，但即使添加后面板也没有出现，我已经为面板设置了网格布局和 Jpanel 的默认布局。

```
import java.io.*;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
//<applet code="vote.class" width=400 height=200></applet>
public class vote extends JApplet implements ActionListener
{
JLabel l1,l2,l3;
JButton b1,b2,b3;
JPanel mp;
Panel p1,p2;

public void init()
{
this.setLayout(null);
mp=new JPanel();
//mp.setLayout(null);
Panel p1=new Panel();
p1.setLayout(null);
p1.setLayout(new GridLayout(3,3,5,5));

l1=new JLabel("test");
l2=new JLabel("test2");
l3=new JLabel("test2");
p1.add(l1);

p1.add(l2);
p1.add(l3);

mp.add(p1);
add(mp);
}
public void actionPerformed(ActionEvent AE)
{
}
} 
```

小程序运行空白

编辑：修改了代码现在运行的代码，但我有点困惑布局管理器如何使用值为 3、3、5、5 的网格布局表示应该有 3 行和 3 列和 5padding。所以为什么小程序是这样的

![在此处输入图像描述](../Images/b23138b090eb1af271fb772f5dff37e6.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T10:29:34.440

As going trough your code

```
this.setLayout(null); // seems to be the problem comment it or provide mp with bounds 
```

You should not do `setLayout` to null

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-24T10:38:19.770

试试这个代码。它始终如一地使用布局，仅使用 Swing 组件，为面板添加颜色以使其更清晰，并且已被视为有效。

```
import java.io.*;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
//<applet code="vote.class" width=400 height=200></applet>
public class vote extends JApplet
{
    JLabel l1,l2,l3;
    JButton b1,b2,b3;
    JPanel mp;
    // don't mix Swing with AWT components!
    JPanel p1,p2;

    public void init()
    {
        mp=new JPanel();
        mp.setBackground(Color.YELLOW);
        p1=new JPanel();
        p1.setBackground(Color.GREEN);
        p1.setLayout(new GridLayout(3,3,5,5));

        l1=new JLabel("test");
        l2=new JLabel("test2");
        l3=new JLabel("test2");
        p1.add(l1);
        p1.add(l2);
        p1.add(l3);

        mp.add(p1);
        add(mp);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T10:39:21.740

我刚刚添加了流布局，它工作正常。问题必须是蜜蜂`null` 布局。

```
public void init()
{
this.setLayout(new FlowLayout());
mp=new JPanel();
... 
```

# python - 无法使用 random.choice 打印单个字符串，只能打印单个字符

> ID：15050756
> 
> 赞同：0
> 
> 时间：2013-02-24T10:19:37.947
> 
> 标签：python, xml

这是我的代码：

```
import xml.etree.ElementTree as ET
import random

tree = ET.parse('news.xml')
root = tree.getroot()

channel = root.find('channel')

for item in channel.findall('item'):
    title = item.find('title').text
    description = item.find('description').text
    link = item.find('link').text
    print random.choice(title) 
```

这会从每个标题对象中打印出一个随机字符。我想打印出一个完整的标题字符串。这是原始的 xml 文件：[http ://www.11alive.com/rss/local/3/10.xml](http://www.11alive.com/rss/local/3/10.xml)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T10:28:39.340

改变你的`for`循环来做到这一点：

```
titles = []

for item in channel.findall('item'):
    titles.append(item.find('title').text)
    description = item.find('description').text
    link = item.find('link').text

print random.choice(titles) 
```

这将从列表中打印一个随机标题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T10:31:09.273

这就是我最终做的，感谢您的提示：

```
titlelist = []

for item in channel.findall('item'):

    title = item.find('title').text
    description = item.find('description').text
    link = item.find('link').text
    titlelist.append(title)

print random.choice(titlelist) 
```

# php - 使用 python 的请求向 php mysql POST 请求

> ID：15050761
> 
> 赞同：0
> 
> 时间：2013-02-24T10:20:27.930
> 
> 标签：php, python

我正在使用 3g 网络将一堆传感器读数从我的 raspberrypi 发送到托管的 php+mysql 数据库。我写了以下代码：

```
import requests
payload = {'reading1': 'xxxxxxx', 'reading2': 'xxxxxxx'}
r = requests.post("http://x.x.net/x.php", params=payload)
print r.status_code 
```

我的阅读可能非常频繁（大约每秒阅读 1 次）。我的问题是，这是写这个帖子请求的好习惯吗？或者我应该将我的读数存储在一个变量中，并每 5 分钟发出一次发布请求。如果后者更好，我该怎么做？

# android - 为什么我的应用程序崩溃？

> ID：15050764
> 
> 赞同：0
> 
> 时间：2013-02-24T10:20:53.233
> 
> 标签：android, text, textview, android-edittext, edit

我正在尝试在单击按钮时编辑 TextView ...这是代码的 xml 部分

```
TextView
    android:id="@+id/editText1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10" 
    android:editable="true">
/TextView>
Button
    android:id="@+id/b1"
    android:layout_width="50dp"
    android:layout_height="50dp"
    android:layout_marginLeft="10dp"
    android:layout_marginTop="50dp"
    android:text="1"
    android:onClick="write" /> 
```

单击按钮时，写入功能已被调用...一旦调用此写入功能，我的应用程序就会崩溃...

```
public void write(){
    TextView text=(TextView)findViewById(R.id.editText1);
    text.setText(Integer.toString(1));
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T10:22:19.580

尝试这样的事情

```
public void write(View view){ 
TextView text=(TextView)view; // can do like this instead of findViewById
text.setText(Integer.toString(1));
} 
```

正如@Doomsknight 评论的那样

你的方法`write`需要 View 参数，即使它没有被使用。否则它将找不到您尝试调用的方法。

# javascript - 使用 Javascript 获取 2 个数字之间的随机数，但不太可能具有特定范围

> ID：15050765
> 
> 赞同：1
> 
> 时间：2013-02-24T10:21:09.130
> 
> 标签：javascript, math, random

我使用随机数函数来获取 219 到 1500 之间的两个随机数。这按预期工作，但 id 就像 1200 到 1500 之间的数字发生的可能性降低了 50%。我怎样才能做到这一点？

我确实尝试过先搜索，但是关于随机数的内容太多了，很难找到与我的问题相关的任何内容。

```
 function getRandomBase (min, max) {

    orBase = Math.floor(Math.random() * (max - min + 1)) + min; 
    document.getElementById("box1").value = orBase;

    newBase = Math.floor(Math.random() * (max - min + 1)) + min; 
    document.getElementById("box3").value = newBase;

} 
```

[演示](http://jsfiddle.net/DelightedD0D/Ydf7g/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T10:29:57.027

我会尝试这样的事情：

```
function number() {
    var isLower = (Math.random() * 3) < 2;
    if(isLower) {
        return randomNumber(219,1199);
    } else {
        return randomNumber(1200,1500);
    }
}

function randomNumber(min,max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
} 
```

更新小提琴：http: [//jsfiddle.net/pH3ZW/1/](http://jsfiddle.net/pH3ZW/1/)

# c++ - 比较 C++ 中 char 数组的值

> ID：15050766
> 
> 赞同：16
> 
> 时间：2013-02-24T10:21:12.283
> 
> 标签：c++, arrays, char

我在我的程序中做某事有问题。我有一个 char[28] 数组来保存人名。我还有另一个 char[28] 数组，它也保留名称。我要求用户输入第一个数组的名称，第二个数组从二进制文件中读取名称。然后我将它们与 == 运算符进行比较，但即使名称相同，当我调试时它们的值看起来也不同。为什么会这样？我如何比较这两者？我的示例代码如下：

```
int main()
{
    char sName[28];
    cin>>sName;      //Get the name of the student to be searched

      /// Reading the tables

    ifstream in("students.bin", ios::in | ios::binary);

    student Student; //This is a struct

    while (in.read((char*) &Student, sizeof(student)))
    {
    if(sName==Student.name)//Student.name is also a char[28]
    {
                cout<<"found"<<endl;
        break;
    }
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-24T10:26:53.610

[您可以使用 c 风格的strcmp](http://www.cplusplus.com/reference/cstring/strcmp/)函数比较应该是字符串的 char 数组。

```
if( strcmp(sName,Student.name) == 0 ) // strings are equal 
```

在 C++ 中，您通常不直接使用数组。使用[std::string](http://www.cplusplus.com/reference/string/string/)类而不是字符数组，您与 == 的比较将按预期工作。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-24T10:24:19.610

假设`student::name`是一个`char`数组或一个指向 的指针`char`，下面的表达式

```
sName==Student.name 
```

在从`char`衰减 到 之后，比较指向 的指针。`sName``char[28]``char*`

鉴于您想比较这些数组中的字符串容器，一个简单的选择是将名称读入[`std::string`](http://en.cppreference.com/w/cpp/string/basic_string)并使用`bool operator==`：

```
#include <string> // for std::string

std::string sName;
....

if (sName==Student.name)//Student.name is also an std::string 
```

这适用于任何长度的名称，并且省去了处理数组的麻烦。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-24T10:26:11.637

if( sName == Student.name ) 正在比较地址

```
if( strcmp( sName, Student.name ) == 0 { 
  / * the strings are the same */
} 
```

不过要小心 strcmp

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-02-24T10:26:53.010

问题在于`if(sName==Student.name)`基本上比较数组的地址，而不是它们的值。
将其替换为`(strcmp(sName, Student.name) == 0)`

但总的来说，您使用的是 C++，而不是 C，我建议您使用 std::string，这将使这变得更简单。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-07-19T00:55:16.293

您可以为自己的 char 数组比较函数编写代码。开始吧

```
//Return 0 if not same other wise 1
int compare(char a[],char b[]){
    for(int i=0;a[i]!='\0';i++){
        if(a[i]!=b[i])
            return 0;
    }
    return 1;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-29T20:12:25.773

我无法发表评论，这是对 habib 比较字符串开头的答案的调整：

```
int compare(char a[], char b[]) {
    for(int i = 0; strlen(a) < strlen(b) ? a[i] != '\0' : b[i] != '\0'; i++) {
        if(a[i] != b[i])
            return 0;
    }
    return 1;
} 
```

我需要这个来比较不包括 GET 参数的 webrequest 查询。

# logic - git逻辑缺失

> ID：15050767
> 
> 赞同：2
> 
> 时间：2013-02-24T10:21:14.070
> 
> 标签：logic, branch, directory, git-commit

问题是在 4 周的时间里，我在两个不同的地点开发了一个项目。此时我的硬盘上有两个不同的目录，每个目录都包含 .git 文件夹，其中包含所有提交。

我`folderOne`有类似的东西：
`A - B - C - D - E - F - G`
我`folderTwo`有以下提交：
`A - B - X - Y - Z`

我需要的是以下内容：
`A - B - X - Y - Z - C - D - E - F - G`

此时我知道我必须将头部从forlderOne移到阶段B

```
git br gStage                # save the G stage into a branch  
git reset --hard HEAD~5      # move master on stage B 
```

现在，我的意图是把`copy/paste`内容从里面`folderTwo`变成了`folderOne`但是我知道这不是正确的方式。

你能告诉我我怎样才能得到`A - B - X .. - C .. G`.

也请随时批评我的逻辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T10:27:57.463

您要使用的是 GIT Rebasing 功能：[http ://git-scm.com/book/en/Git-Branching-Rebasing](http://git-scm.com/book/en/Git-Branching-Rebasing)

您应该能够将更改从文件夹一推送到文件夹二。然后，您应该最终得到一个存储库，其中代码在提交后分支`B`，一个与`C - D - E - F - G`另一个与`X - Y - Z`.

然后，您可以在提交 Z 之后从提交 C 开始对分支进行 rebase，从而生成一个您可以从中工作的分支。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T10:36:05.853

假设两个存储库中的 A 和 B 实际上是相同的（就像在同一个提交 id 中一样），那么我将采用另一种方式。我会将 fetch`folderOne`的分支放入`folderTwo`：

```
git fetch /path/to/folderOne master:folderOne-master 
```

然后，我会使用变基：

```
git rebase master folderOne-master 
```

这应该在`folderOne`当前 master 之上重放 master 中的提交，注意不要让 A 和 B 单独存在，因为它们是共同的。在这一步之后，`folderOne-master`应该有图表：

```
A - B - X - Y - Z - C - D - E - F - G 
```

现在，确保您在 master in 上`folderTwo`，然后合并`folderOne-master`分支：

```
git checkout master
git merge folderOne-master 
```

最后一个命令应该进行快进合并，您应该会看到您所要求的漂亮的线性历史。

为了清楚起见，如果您真正想要的是内容，并且不一定关心线性历史，那么您可以这样做：

```
git fetch /path/to/folderOne master:folderOne-master
git merge folderOne-master 
```

# php - 如何通过 PHP 中的键对数组进行排序？

> ID：15050774
> 
> 赞同：-1
> 
> 时间：2013-02-24T10:22:54.010
> 
> 标签：php, arrays, sorting

我有一个带有一堆键的数组。我想按它们的值对其中一个键进行排序。

```
Array ( 
   [0] => stdClass Object ( 
                            [id] => 1 
                            [question] => Action 
                            [specific_to_movie_id] => 1
                            [total_yes] => 4 ) 
   [1] => stdClass Object ( 
                            [id] => 2 
                            [question] => Created by DC Comics 
                            [specific_to_movie_id] => 1 
                            [total_yes] => 1 ) 
   [2] => stdClass Object ( 
                            [id] => 3 
                            [question] => Christian Bale 
                            [specific_to_movie_id] => 1 
                            [total_yes] => 1 ) 
   ) 
```

数组看起来像上面那样，我想按“Total_yes”排序

我该如何在 PHP 中执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T10:27:46.713

Because it's a little more complex than a standard array sort, you'll need to use `usort`:

```
function compare_items( $a, $b ) {
    return $a->total_yes < $b->total_yes;
}

$arrayToSort = array ( 
    (object) array( 
        'id' => 1, 
        'question' => 'Action', 
        'specific_to_movie_id' => 1,
        'total_yes' => 4
    ), 
    (object) array( 
        'id' => 2,
        'question' => 'Created by DC Comics',
        'specific_to_movie_id' => 1,
        'total_yes' => 1
    ),
    (object) array( 
        'id' => 3,
        'question' => 'Christian Bale',
        'specific_to_movie_id' => 1,
        'total_yes' => 1
    ) 
);

usort($arrayToSort, "compare_items"); 
```

If you want to reverse the sort order, just change `return $a->total_yes < $b->total_yes` to use > (greater than) instead of < (less than)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T10:26:12.710

您可以使用[usort](http://php.net/manual/en/function.usort.php)，例如：

```
function cmp($a, $b) {
  return $a < $b;
}

usort($your_array, "cmp"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T10:30:24.940

You have object, therefore you need use [usort()][http://www.php.net/manual/en/function.usort.php]

```
usort($array, function($a, $b){
    if ($a->total_yes == $b->total_yes)
        return 0;
    return ($a->total_yes > $b->total_yes) ? -1 : 1;});
print_r($array); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T10:32:44.593

您可以使用使用特定 compere 函数的 Usort() ：

**定义和使用**

> usort() 函数使用用户定义的比较函数对数组进行排序。

**句法**

> usort（数组，我的函数）；

**数组**- 必需。指定要排序的数组

**myfunction-可选**。定义可调用比较函数的字符串。如果第一个参数是 <、= 或 >，则比较函数必须返回一个整数 <、= 或 >，而不是第二个参数

```
<?php

    function cmp($a, $b)
    {
        if ($a->total_yes == $b->total_yes) {
            return 0;
        }
        return ($a->total_yes < $b->total_yes) ? -1 : 1;
    }

    usort($array, "cmp");

    ?> 
```

# c# - 如何创建和保存播放列表

> ID：15050787
> 
> 赞同：2
> 
> 时间：2013-02-24T10:25:11.530
> 
> 标签：c#, winforms, axwindowsmediaplayer

我正在尝试使用 c#.net 中的 Windows 媒体播放器组件开发媒体播放器。这是我的代码，我可以通过它制作播放列表并将歌曲添加到播放列表，播放列表的名称将显示在名为“playlistviewbar”的列表框中，然后我将此播放列表设置为当前播放列表。

但是当我运行项目和当前的 plaulist 设置时，它要求播放与播放器不匹配的媒体。它表明它有扩展名“。” 并且无法播放媒体

谁能帮我解决这个问题，也可以帮我保存播放列表..

```
WMPLib.IWMPPlaylist pl;
 public WMPLib.IWMPMedia files1,paths1;
 string playListName;

    private void toolStripButton3_Click(object sender, EventArgs e)
    {
        if (listnametxt.Text == "")
        {
            playListName = "Untitled playlist";
        }
        else
        {
            playListName = listnametxt.Text;
        }
        pl = axWindowsMediaPlayer1.playlistCollection.newPlaylist(playListName);
        playlistviewbar.Items.Add(playListName);

    }

    private void toolStripButton2_Click(object sender, EventArgs e)
    {
        if (openFileDialog1.ShowDialog() == System.Windows.Forms.DialogResult.OK)
        {
            string[] filestring=openFileDialog2.SafeFileNames;
             string[] pathstring=openFileDialog2.FileNames;
            for (int i = 0; i < filestring.Length; i++)
            {
            files1 = axWindowsMediaPlayer1.newMedia(filestring[i]);
            paths1 = axWindowsMediaPlayer1.newMedia(pathstring[i]);
            pl.appendItem(paths1);
            axWindowsMediaPlayer1.currentPlaylist =pl;
            }

        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-28T07:29:17.023

这是对我有用的代码：

```
private void button1_Click(object sender, EventArgs e)
        {
            var pl = axWindowsMediaPlayer1.playlistCollection.newPlaylist("plList");
            pl.appendItem(axWindowsMediaPlayer1.newMedia(@"D:\nosazi.wmv"));
            pl.appendItem(axWindowsMediaPlayer1.newMedia(@"D:\tasadof.mp4"));

            axWindowsMediaPlayer1.currentPlaylist = pl;
            axWindowsMediaPlayer1.Ctlcontrols.play();            
        } 
```

# html - 清除为换行符

> ID：15050788
> 
> 赞同：1
> 
> 时间：2013-02-24T10:25:16.313
> 
> 标签：html, css

有没有办法使用`clear`像换行符，例如：

```
<form action="test.html">
    <label for="name">What is your name?</label>
    <input type="text" id="name" name="name">
</form>

input {
    clear: left;
} 
```

或者它只与花车一起使用？
如果不是，在上面的示例中输入之前断行的最佳方法是什么？( `p`，`input {display: block;}`或者其他什么？)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T10:43:59.860

设置`label`为`display: block`。没有标记更改，只有 CSS。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T10:54:24.140

根据 W3C XHTML 标准，您不**应该**直接在. 因此，您可以通过以下方式将它们移动到 a 中：`<label>``<input />``<form>``<div>`

```
<form action="test.html">
    <div><label for="name">What is your name?</label></div>
    <div><input type="text" id="name" name="name"></div>
</form> 
```

或者，从语义上讲，

```
<form action="test.html">
  <ul>
    <li><label for="name">What is your name?</label></li>
    <li><input type="text" id="name" name="name"></li>
  </ul>
</form> 
```

和样式`<ul>`and `<li>`。或者，如果您不想更改标记，您可以给一个样式`label`or`input`被阻止。

```
label, input {display: block;} 
```

# iphone - 在 AppDelegate 的第二个选项卡中将 NSMutableArray 添加到 TableView

> ID：15050795
> 
> 赞同：0
> 
> 时间：2013-02-24T10:25:51.743
> 
> 标签：iphone, ios, objective-c, xcode, ios6

按照以下教程，我没有遇到任何问题：[http](http://www.raywenderlich.com/1797/how-to-create-a-simple-iphone-app-tutorial-part-1) ://www.raywenderlich.com/1797/how-to-create-a-simple-iphone-app-tutorial-part-1 。从本质上讲，本教程教人们创建一个简单的表格视图，其中填充来自 NSMutableArray 的数据，然后深入到每个项目的 DetailView 中。

然后，我尝试通过创建 TabViewController 并将创建的表视图作为此控制器的“选项卡项目 2”来增强我所拥有的功能。

这打破了表格的自动填充。

用于从**AppDelegate.m填充表的代码**

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    Person *person1 = [[Person  alloc] initWithName:@"Monica"
                                            balance:420
                                         thumbImage:[UIImage imageNamed:@"01.jpg"]
                                          fullImage:[UIImage imageNamed:@"01_t.jpg"]];
    Person *person2 = [[Person  alloc] initWithName:@"Ross"
                                            balance:630
                                         thumbImage:[UIImage imageNamed:@"02.jpg"]
                                          fullImage:[UIImage imageNamed:@"02_t.jpg"]];
    Person *person3 = [[Person  alloc] initWithName:@"Rachel"
                                            balance:420
                                         thumbImage:[UIImage imageNamed:@"03.jpg"]
                                          fullImage:[UIImage imageNamed:@"03_t.jpg"]];

    NSMutableArray *persons = [NSMutableArray arrayWithObjects:person1, person2, person3, nil];

    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
    UIViewController *initialViewController = (UIViewController *)[storyboard instantiateViewControllerWithIdentifier:@"RootViewController"];
    self.window.rootViewController = initialViewController;
    TableViewController * peopleTableViewController = [storyboard instantiateViewControllerWithIdentifier:@"PersonTableViewController"];
    [peopleTableViewController setPersons: persons];

    // Override point for customization after application launch.
    return YES;
} 
```

'persons' 是一个 Person 实例数组，它是 TableViewController 的一个属性。以下是基于**TableViewController.m**中的 'persons' 数组的表格人口：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"PersonCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    //For each person
    Person *person = [self.persons objectAtIndex:indexPath.row];
        cell.textLabel.text = person.name;
        cell.imageView.image = person.thumbImage;
        cell.detailTextLabel.text = [person getPrice];

    return cell;
} 
```

最后，故事板位于：http: [//i.stack.imgur.com/9axs8.png](http://i.stack.imgur.com/9axs8.png)

只是为了重新迭代，这一切都编译得很好，但是在测试期间，打开选项卡项目 #2 时表是空的（根据情节提要，表视图控制器存在于该表中）。这在我添加标签之前有效。

我对Objective C还是很陌生，所以如果您需要任何其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T16:25:13.287

您的问题是您正在实例化新的视图控制器，而不是使用故事板中已经存在的视图控制器。当这个应用程序启动时，标签栏控制器以及它的内容视图控制器都将被实例化。此外，因为其中一个控制器，即选项卡 2 中的一个，是导航控制器，它的根视图控制器 TableViewController 也将被实例化。所以，你只需要获取这个表视图控制器的引用，而不是创建一个新的：

```
 UITabBarController *tabVC = (UITabBarController *)self.window.rootViewController;
    UINavigationController *nav = tabVC.viewControllers[1];
    TableViewController *peopleTableViewController = nav.topViewController;
    [peopleTableViewController setPersons:persons]; 
```

这应该可行，但我认为将 Person 对象和 Person 数组的创建移动到表视图控制器的 viewDidLoad 方法会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T14:16:44.513

我认为你的问题在这里：

```
 Person *person = [self.persons objectAtIndex:indexPath.row]; 
```

尝试将您的代码放入`ViewDidLoad`而不是`AppDelegate`运行它。（只是为了测试它）

# android - 如何将字符串数组中的 unicode 字符作为外部资源

> ID：15050798
> 
> 赞同：0
> 
> 时间：2013-02-24T10:26:15.860
> 
> 标签：android, arrays

我在我的 android 应用程序中使用 unicode 字符。因为我希望它们成为外部资源，所以我在 strings.xml 中创建了字符串数组，如下所示

```
<string-array name="geez_first_chars">
    <item >"\u1200"</item>
    <item >"\u1208"</item>
    <item >"\u1210"</item>
    <item >"\u1218"</item>
    ....
</string-array> 
```

然后我在我的 Java 代码中访问它们，如下所示：

```
String fidels[] = getResources().getStringArray(R.array.geez_first_chars); 
```

但是，有运行时错误，请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:57:13.853

我自己解决了上述问题。运行时错误是由调用 getResources() 引起的...将“String fidels []”放在后面，我将调用移至 onCreate()，它运行良好。

干杯!

# regex - Construction of pattern that doesn't contain binary string

> ID：15050804
> 
> 赞同：0
> 
> 时间：2013-02-24T10:26:38.903
> 
> 标签：regex

I was trying to write a pattern which doesn't contain binary string (let's assume `101`). I know that such expressions cannot be written using `Regular Expression` considering [http://en.wikipedia.org/wiki/Regular_language](http://en.wikipedia.org/wiki/Regular_language).

I tried writing the pattern for the above problem using `Regular Expression` though and it seems to be working.

```
\b(?!101)\w+\b 
```

What I wanted to ask is that can a regular expression be written for my problem and why? And if yes, then is my regular expression correct?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-19T20:09:17.443

要匹配不包含的整个字符串`101`：

```
^(?!.*101).*$ 
```

前瞻确实是一种通过正则表达式检查字符串条件的简单方法，但您的正则表达式只会匹配不以 . 开头的字母数字单词`101`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-30T14:06:46.023

你写了

> [我知道考虑到http://en.wikipedia.org/wiki/Regular_language](http://en.wikipedia.org/wiki/Regular_language)，这样的表达式不能使用正则表达式来编写。

在那篇维基百科文章中，您似乎错过了

> 请注意，许多编程语言提供的“正则表达式”特性都增加了一些特性，使它们能够识别不能用正式正则表达式（如下正式定义）表达的语言。

负前瞻结构就是这样一个特征。

# c# - 双[] -> 双[,]

> ID：15050810
> 
> 赞同：0
> 
> 时间：2013-02-24T10:27:55.240
> 
> 标签：c#

只是好奇有没有更快/更整洁的方法来实现这一点：

```
double[] source = ... // some initialisation

var target = new double[1, source.Length];
for (var c = 0; c < source.Length; c++)
{
    target[0, c] = source[c];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T10:42:45.690

像这样初始化数组：

```
double[,] target = { { /* your list of values */ } }; 
```

然后你有一个只有一行的二维数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T10:45:15.283

由于您提到这是用于 P/Invoke，因此使用 BlockCopy 可能是合理的：

```
double[] source = new double [] {1,2,3,4,7,8,9,0};// some initialisation
double[,] target = new double[1, source.Length];

Buffer.BlockCopy(source, 0, target, 0, source.Length * sizeof(double)); 
```

# c++ - 算法函数：将其设为模板还是采用 std::function 参数？

> ID：15050815
> 
> 赞同：7
> 
> 时间：2013-02-24T10:28:13.777
> 
> 标签：c++, c++11, signals-slots, stl-algorithm, std-function

我有一个名为 Graph 的 C++ 类，它有一个算法方法 for_each_node()。我可以将其设为模板，如下所示：

```
template <class UnaryFunction>
UnaryFunction Graph::for_each_node (UnaryFunction f)
{
     /* ... */
} 
```

或者让它使用 std::function，像这样：

```
typedef std::function<void (Node&)> ForEachNodeFunc;

ForEachNodeFunc Graph::for_each_node (ForEachNodeFunc f)
{
     /* ... */
} 
```

标准算法，例如 std::for_each，使用第一种方法，而一些库，例如 gtkmm（它是 GTK+ 的 C++ 绑定），将函数作为包含它们的对象的函数指针。

每个选项的优点和缺点是什么？我不确定该选择哪个。什么会影响选择：我的 Graph 类是否是类模板，或者算法方法需要使用多少不同的函数，或者速度要求？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T10:32:10.743

看看 Andy Prowl 的这个答案，我认为这也是你问题的部分答案：

一般来说，如果您面临一个可以选择的设计情况，请使用模板...

[https://stackoverflow.com/a/14678298/1758762（std::function](https://stackoverflow.com/a/14678298/1758762) vs 模板）

# javascript - John Resig 的 Javascript 继承片段是否已弃用？

> ID：15050816
> 
> 赞同：24
> 
> 时间：2013-02-24T10:28:13.383
> 
> 标签：javascript, oop, inheritance, prototypal-inheritance

我正在寻找一种创建两个类的简单方法，一个继承自另一个，子重新定义父方法之一，并在新方法内部调用父方法。

例如，有一个类`Animal`and `Dog`，其中 Animal 类定义了一个方法，该方法`makeSound()`确定如何输出声音，然后 Dog 在其自己的方法中覆盖该`makeSound()`方法以发出“woof”声音，但同时也调用 Animal`makeSound()`来输出该 woof。

[我在这里](http://ejohn.org/blog/simple-javascript-inheritance/)查看了 John Resig 的模型，但它使用了`arguments.callee`在 ECMA 脚本 5 中明显贬值的原生属性。这是否意味着我不应该使用 John Resig 的代码？

使用 Javascript 的原型继承模型编写我的动物/狗代码的一种简洁的方法是什么？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-24T13:35:09.520

> 这是否意味着我不应该使用 John Resig 的代码？

正确，而不是在严格模式下使用 ES5 时。但是，它可以很容易地适应：

```
/* Simple JavaScript Inheritance for ES 5.1
 * based on http://ejohn.org/blog/simple-javascript-inheritance/
 *  (inspired by base2 and Prototype)
 * MIT Licensed.
 */
(function(global) {
  "use strict";
  var fnTest = /xyz/.test(function(){xyz;}) ? /\b_super\b/ : /.*/;

  // The base Class implementation (does nothing)
  function BaseClass(){}

  // Create a new Class that inherits from this class
  BaseClass.extend = function(props) {
    var _super = this.prototype;

    // Set up the prototype to inherit from the base class
    // (but without running the init constructor)
    var proto = Object.create(_super);

    // Copy the properties over onto the new prototype
    for (var name in props) {
      // Check if we're overwriting an existing function
      proto[name] = typeof props[name] === "function" && 
        typeof _super[name] == "function" && fnTest.test(props[name])
        ? (function(name, fn){
            return function() {
              var tmp = this._super;

              // Add a new ._super() method that is the same method
              // but on the super-class
              this._super = _super[name];

              // The method only need to be bound temporarily, so we
              // remove it when we're done executing
              var ret = fn.apply(this, arguments);        
              this._super = tmp;

              return ret;
            };
          })(name, props[name])
        : props[name];
    }

    // The new constructor
    var newClass = typeof proto.init === "function"
      ? proto.hasOwnProperty("init")
        ? proto.init // All construction is actually done in the init method
        : function SubClass(){ _super.init.apply(this, arguments); }
      : function EmptyClass(){};

    // Populate our constructed prototype object
    newClass.prototype = proto;

    // Enforce the constructor to be what we expect
    proto.constructor = newClass;

    // And make this class extendable
    newClass.extend = BaseClass.extend;

    return newClass;
  };

  // export
  global.Class = BaseClass;
})(this); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-01-23T07:41:12.230

带有 Object.create() + 分配构造函数的原型链

```
function Shape () {
    this.x = 0;
    this.y = 0;
}

Shape.prototype.move = function (x, y) {
    this.x += x;
    this.y += y;
};

function Rectangle () {
    Shape.apply(this, arguments); // super constructor w/ Rectangle configs if any
}

Rectangle.prototype = Object.create(Shape.prototype); // inherit Shape functionality
// works like Rectangle.prototype = new Shape() but WITHOUT invoking the constructor

Rectangle.prototype.constructor = Rectangle;

var rect = new Rectangle();

rect instanceof Rectangle && rect instanceof Shape // returns true 
```

* * *

> 来自[Object.create 文档](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/create)
> 
> 关于[新关键字的信息](https://stackoverflow.com/questions/1646698/what-is-the-new-keyword-in-javascript)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-03-22T01:34:45.047

这是我想出的使用链接以及允许 _super 工作的继承。

```
/**
 * JavaScript simple inheritance
 * by Alejandro Gonzalez Sole (base on John Resig's simple inheritance script)
 * MIT Licensed.
 **/
(function (){
    var initializing = false,
      fnTest = /xyz/.test(function(){xyz;}) ? /\b_super\b/ : /.* /;

    function Class(){};

    function inheritClass(superClass){
      var self = this;
      function Class(){
        if (!initializing && typeof this._constructor === 'function')
          this._constructor.apply(this, arguments);
      }

      Class.prototype = superClass.prototype;
      Class.prototype._constructor = superClass;
      Class.prototype.constructor = Class;
      Class.extend = extendClass;
      //currenlty if you inhert multiple classes it breaks
      Class.inherit = inheritClass;
      return Class;
    };

    function extendClass(prop) {
      var self = this;
      var _super = self.prototype;

      function Class(){
        if (!initializing && typeof this._constructor === 'function')
          this._constructor.apply(this, arguments);
      }

      initializing = true;
      var prototype = new self();
      initializing = false;

      for (var name in prop) {
        prototype[name] = typeof prop[name] == "function" &&
          typeof _super[name] == "function" && fnTest.test(prop[name]) ?
          (function(name, fn){
            return function() {
              var tmp = this._super;
              this._super = _super[name];
              var ret = fn.apply(this, arguments);
              this._super = tmp;
              return ret;
            };
          })(name, prop[name]) : prop[name];
      }

      Class.prototype = prototype;
      Class.prototype.constructor = Class;
      Class.extend = extendClass;
      Class.inherit = inheritClass;

      return Class;
    };

    Class.extend = extendClass;
    Class.inherit = inheritClass;

})();

//EXAMPLE

function Person(){
  this.name = "No name";
  console.log("PERSON CLASS CONSTRUCTOR")
}
Person.prototype.myMethod = function (t){
  console.log("MY PERSON", t, this.name);
  return -1;
}

var TestPerson = Class.inherit(Person).extend({
    _constructor: function(){
      this._super();
      this.name = "JOhn";
      console.log("TEST PERSON CONSTRUCTOR");
    },
    myMethod: function (t){
      console.log("TEST PERSON", t, this.name);
      return this._super(t)
    }
});

var test = new TestPerson();

console.log(test.myMethod("BA")); 
```

[到目前为止，我一直在我的 pixi 包装器https://github.com/guatedude2/pixijs-cli](https://github.com/guatedude2/pixijs-cli)上对其进行测试，它对我来说效果很好。

我用这种方法遇到的唯一问题是你只能继承一次。如果再次运行继承，它将覆盖先前的继承。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-24T11:27:08.547

我更喜欢**[TypeScript](http://www.typescriptlang.org/Playground/)**生成继承形式的方式（从下拉列表中选择*简单继承）。*那一个不使用`arguments.callee`，而是一个`__extends` `prototype`。

```
var __extends = this.__extends || function (d, b) {
    function __() { this.constructor = d; }
    __.prototype = b.prototype;
    d.prototype = new __();
};
var Animal = (function () {
    function Animal(name) {
        this.name = name;
    }
    Animal.prototype.move = function (meters) {
        alert(this.name + " moved " + meters + "m.");
    };
    return Animal;
})();
var Snake = (function (_super) {
    __extends(Snake, _super);
    function Snake(name) {
        _super.call(this, name);
    }
    Snake.prototype.move = function () {
        alert("Slithering...");
        _super.prototype.move.call(this, 5);
    };
    return Snake;
})(Animal);
var Horse = (function (_super) {
    __extends(Horse, _super);
    function Horse(name) {
        _super.call(this, name);
    }
    Horse.prototype.move = function () {
        alert("Galloping...");
        _super.prototype.move.call(this, 45);
    };
    return Horse;
})(Animal);
var sam = new Snake("Sammy the Python");
var tom = new Horse("Tommy the Palomino");
sam.move();
tom.move(34); 
```

# c - 将 cdecl 函数调用从 C 转换为使用带有可变参数列表的回调的 Pascal

> ID：15050818
> 
> 赞同：5
> 
> 时间：2013-02-24T10:28:16.090
> 
> 标签：c, delphi, header-files, pascal

我正在将视频编码器 DLL 的 C 头文件转换为 Delphi Pascal。

我遇到了一些使用以下功能的访问冲突问题，需要帮助解决这个问题：

```
h264venc_tt * MC_EXPORT_API h264OutVideoNew(
  void * (MC_EXPORT_API * get_rc)(const char* name),
  const struct h264_v_settings * set,
  int32_t options,
  int32_t CPU,
  int32_t frame0,
  int32_t nframes); 
```

注意：MC_EXPORT_API = cdecl

get_rc 声明如下：

```
// resource functions dispatcher
void * MC_EXPORT_API get_rc(const char* name)
{
  if (!strcmp(name, "err_printf"))
    return (void*) error_printf;
  else if (!strcmp(name, "prg_printf"))
    return (void*) progress_printf;
  else if (!strcmp(name, "wrn_printf"))
    return (void*) warn_printf;
  else if (!strcmp(name, "inf_printf"))
    return (void*) info_printf;
  return NULL;
} 
```

此函数返回指向另一个具有变量参数列表的函数的指针。其中之一被声明为：

```
void error_printf(const char * fmt, ...)
{
  char lst[256];
  va_list marker;
  va_start(marker,fmt);
  vsprintf(lst,fmt,marker);
  va_end(marker);
  printf("%s\n", lst);
} 
```

我已经将这个函数调用和 get_rc 翻译成这个 Delphi Pascal 代码：

```
PErrorMessageHandler = function (const Name: String): Pointer; cdecl varargs;

function h264OutVideoNew(
  get_rc: PErrorMessageHandler;
  settings: Ph264_v_settings;
  options: int32;
  CPU: int32;
  frame0: int32;
  nFrames: int32
): Pointer; cdecl; external 'mc_enc_avc.dll' index 4; 
```

不幸的是，我不知道如何实现上面显示的 C 风格方法 error_printf。谁能帮我指出正确的方向？我也很好奇我是否正确实现了其他功能，因为当我尝试调用该`h264OutVideoNew()`函数时遇到访问冲突。

PS！我没有在这篇文章中包含打包的记录`Th264_v_settings`/`P_h264_v_settings`因为这很长而且不是真正的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T11:38:55.693

类型的 AC 参数`char*`是指向以空字符结尾的 8 位字符数组的指针。在 Delphi 中，等效类型是`PAnsiChar`. 您不能使用`string`，因为它是托管的 Delphi 类型，在 C 中没有等价物。

此外，错误函数原型具有 void 返回值。您正在返回一个指针，这是一个错误。

您遇到的更大问题是，您无法在 Delphi 中轻松实现接收可变数量参数的 C 风格函数。你可以声明和调用这样一个函数，但你不能实现一个。这意味着这样一个带有可变参数的函数必须是一个[外部函数](http://docwiki.embarcadero.com/RADStudio/XE3/en/Procedures_and_Functions#External_Declarations)。

现在，您可以编写自己的汇编程序来填充变量参数。但是，这不是我会采取的路线。我会用 C 编写函数，然后将其编译为 .obj 文件，该文件可以使用 .obj 链接到您的 Delphi 程序中`$LINK`。

如果您实际上不需要读取变量参数，则可以像这样忽略它们：

```
TErrorMessageHandler = procedure(Name: PAnsiChar); cdecl; 
```

请注意，我进行了以下更改：

1.  将类型名称更改`T`为标准前缀。
2.  更正了`Name`参数的类型。
3.  从函数更改为过程以匹配 C 声明。
4.  删除了`varargs`我们无法在 Delphi 中实现的，因此忽略了附加参数。

然后您导入的函数将如下所示：

```
function h264OutVideoNew(
  get_rc: TErrorMessageHandler;
  settings: Ph264_v_settings;
  options: int32;
  CPU: int32;
  frame0: int32;
  nFrames: int32
): Pointer; cdecl; external 'mc_enc_avc.dll' index 4; 
```

然后你可以像这样实现错误回调函数：

```
procedure error_printf(Name: PAnsiChar); cdecl;
begin
  // do stuff here
end; 
```

# android - why filter blur dose not show on android phone? action script

> ID：15050822
> 
> 赞同：0
> 
> 时间：2013-02-24T10:29:16.857
> 
> 标签：android, actionscript-3

Currently in an Android application that I'm have develop a android application that used filter blur. the filter blur work on android emulator(SDK) but when i publish it on real android phone and run it, the filter blur dose not work in run time. any idea what i missing here?

sorry for bad grammar...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T13:27:14.067

我不相信过滤器在`renderMode`设置为`GPU`. 要使过滤器正常工作，请确保将其设置为`CPU`，尽管这样做可能会对性能产生一些其他影响。

# r - R programming ignoring/removing NA values

> ID：15050825
> 
> 赞同：-3
> 
> 时间：2013-02-24T10:29:30.003
> 
> 标签：r, delimiter, na

So I have data imported to r using data=read.delim("clipboard")

This is the last sections of the data....so I decided to use data2=na.omit(data,method="linear") which gave me this result...

But as you can see I have lost data from 290 to 293 ....for the 3rd and 4th column....pls help remove those NA values without losing data from the other columns...The data I have given you represents time and speed data...and what I'm trying to do is find the average speed every 100s etc...using a code pointed out to me earlier in my previous questions which is in this link...h

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T11:14:01.067

保持 na 值不变，但在后续操作中使用 na.rm ；例如，`sum(df[,1], na.rm = TRUE)`其中 df 是您的数据框。

# android - 不幸的是，应用程序已停止

> ID：15050828
> 
> 赞同：5
> 
> 时间：2013-02-24T10:30:04.170
> 
> 标签：android, android-layout

我在我的第一个名为“我的创造力”的 Android 应用程序的 AVD 上收到错误消息。它的显示：

> 不幸的是我的创造力已经停止

它有一个简单的文本框和一个带背景的按钮。我正在 google.developers 的帮助下解决问题。如何解决这个问题？

这是我的 LogCat：

```
02-24 10:18:48.624: I/Process(1068): Sending signal. PID: 1068 SIG: 9
02-24 10:18:51.654: W/Trace(1088): Unexpected value from nativeGetEnabledTags: 0
02-24 10:18:51.654: W/Trace(1088): Unexpected value from nativeGetEnabledTags: 0
02-24 10:18:52.194: D/dalvikvm(1088): GC_FOR_ALLOC freed 77K, 8% free 2513K/2708K, paused 52ms, total 56ms
02-24 10:18:52.534: I/dalvikvm-heap(1088): Grow heap (frag case) to 21.787MB for 20155408-byte allocation
02-24 10:18:52.674: D/dalvikvm(1088): GC_FOR_ALLOC freed 1K, 1% free 22194K/22392K, paused 137ms, total 137ms
02-24 10:18:52.784: D/dalvikvm(1088): GC_CONCURRENT freed <1K, 1% free 22194K/22392K, paused 9ms+21ms, total 109ms
02-24 10:18:55.204: D/dalvikvm(1088): GC_FOR_ALLOC freed <1K, 1% free 22194K/22392K, paused 41ms, total 41ms
02-24 10:18:55.204: I/dalvikvm-heap(1088): Forcing collection of SoftReferences for 45349648-byte allocation
02-24 10:18:55.284: D/dalvikvm(1088): GC_BEFORE_OOM freed 9K, 1% free 22184K/22392K, paused 72ms, total 73ms
02-24 10:18:55.284: E/dalvikvm-heap(1088): Out of memory on a 45349648-byte allocation.
02-24 10:18:55.284: I/dalvikvm(1088): "main" prio=5 tid=1 RUNNABLE
02-24 10:18:55.284: I/dalvikvm(1088):   | group="main" sCount=0 dsCount=0 obj=0x40a719a0 self=0x2a00bba8
02-24 10:18:55.284: I/dalvikvm(1088):   | sysTid=1088 nice=0 sched=0/0 cgrp=apps handle=1073849308
02-24 10:18:55.284: I/dalvikvm(1088):   | state=R schedstat=( 3224239902 1154906764 146 ) utm=280 stm=42 core=0
02-24 10:18:55.284: I/dalvikvm(1088):   at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
02-24 10:18:55.294: I/dalvikvm(1088):   at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:502)
02-24 10:18:55.294: I/dalvikvm(1088):   at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:355)
02-24 10:18:55.294: I/dalvikvm(1088):   at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:785)
02-24 10:18:55.294: I/dalvikvm(1088):   at android.content.res.Resources.loadDrawable(Resources.java:1965)
02-24 10:18:55.304: I/dalvikvm(1088):   at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
02-24 10:18:55.304: I/dalvikvm(1088):   at android.view.View.<init>(View.java:3328)
02-24 10:18:55.304: I/dalvikvm(1088):   at android.view.ViewGroup.<init>(ViewGroup.java:431)
02-24 10:18:55.304: I/dalvikvm(1088):   at android.widget.LinearLayout.<init>(LinearLayout.java:176)
02-24 10:18:55.304: I/dalvikvm(1088):   at android.widget.LinearLayout.<init>(LinearLayout.java:172)
02-24 10:18:55.316: I/dalvikvm(1088):   at java.lang.reflect.Constructor.constructNative(Native Method)
02-24 10:18:55.316: I/dalvikvm(1088):   at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
02-24 10:18:55.316: I/dalvikvm(1088):   at android.view.LayoutInflater.createView(LayoutInflater.java:587)
02-24 10:18:55.316: I/dalvikvm(1088):   at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
02-24 10:18:55.316: I/dalvikvm(1088):   at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
02-24 10:18:55.316: I/dalvikvm(1088):   at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
02-24 10:18:55.316: I/dalvikvm(1088):   at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
02-24 10:18:55.324: I/dalvikvm(1088):   at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
02-24 10:18:55.324: I/dalvikvm(1088):   at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
02-24 10:18:55.324: I/dalvikvm(1088):   at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
02-24 10:18:55.324: I/dalvikvm(1088):   at android.app.Activity.setContentView(Activity.java:1881)
02-24 10:18:55.334: I/dalvikvm(1088):   at com.example.iamgreat.GreatPiyu.onCreate(GreatPiyu.java:12)
02-24 10:18:55.334: I/dalvikvm(1088):   at android.app.Activity.performCreate(Activity.java:5104)
02-24 10:18:55.334: I/dalvikvm(1088):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
02-24 10:18:55.344: I/dalvikvm(1088):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
02-24 10:18:55.344: I/dalvikvm(1088):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
02-24 10:18:55.344: I/dalvikvm(1088):   at android.app.ActivityThread.access$600(ActivityThread.java:141)
02-24 10:18:55.344: I/dalvikvm(1088):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
02-24 10:18:55.354: I/dalvikvm(1088):   at android.os.Handler.dispatchMessage(Handler.java:99)
02-24 10:18:55.354: I/dalvikvm(1088):   at android.os.Looper.loop(Looper.java:137)
02-24 10:18:55.354: I/dalvikvm(1088):   at android.app.ActivityThread.main(ActivityThread.java:5039)
02-24 10:18:55.354: I/dalvikvm(1088):   at java.lang.reflect.Method.invokeNative(Native Method)
02-24 10:18:55.354: I/dalvikvm(1088):   at java.lang.reflect.Method.invoke(Method.java:511)
02-24 10:18:55.354: I/dalvikvm(1088):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-24 10:18:55.354: I/dalvikvm(1088):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-24 10:18:55.354: I/dalvikvm(1088):   at dalvik.system.NativeStart.main(Native Method)
02-24 10:18:55.364: D/skia(1088): --- allocation failed for scaled bitmap
02-24 10:18:55.404: D/AndroidRuntime(1088): Shutting down VM
02-24 10:18:55.404: W/dalvikvm(1088): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
02-24 10:18:55.515: E/AndroidRuntime(1088): FATAL EXCEPTION: main
02-24 10:18:55.515: E/AndroidRuntime(1088): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.iamgreat/com.example.iamgreat.GreatPiyu}: android.view.InflateException: Binary XML file line #1: Error inflating class <unknown>
02-24 10:18:55.515: E/AndroidRuntime(1088):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
02-24 10:18:55.515: E/AndroidRuntime(1088):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
02-24 10:18:55.515: E/AndroidRuntime(1088):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
02-24 10:18:55.515: E/AndroidRuntime(1088):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
02-24 10:18:55.515: E/AndroidRuntime(1088):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-24 10:18:55.515: E/AndroidRuntime(1088):     at android.os.Looper.loop(Looper.java:137)
02-24 10:18:55.515: E/AndroidRuntime(1088):     at android.app.ActivityThread.main(ActivityThread.java:5039)
02-24 10:18:55.515: E/AndroidRuntime(1088):     at java.lang.reflect.Method.invokeNative(Native Method)
02-24 10:18:55.515: E/AndroidRuntime(1088):     at java.lang.reflect.Method.invoke(Method.java:511)
02-24 10:18:55.515: E/AndroidRuntime(1088):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-24 10:18:55.515: E/AndroidRuntime(1088):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-24 10:18:55.515: E/AndroidRuntime(1088):     at dalvik.system.NativeStart.main(Native Method)
02-24 10:18:55.515: E/AndroidRuntime(1088): Caused by: android.view.InflateException: Binary XML file line #1: Error inflating class <unknown>
02-24 10:18:55.515: E/AndroidRuntime(1088):     at android.view.LayoutInflater.createView(LayoutInflater.java:613)
02-24 10:18:55.515: E/AndroidRuntime(1088):     at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
02-24 10:18:55.515: E/AndroidRuntime(1088):     at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
02-24 10:18:55.515: E/AndroidRuntime(1088):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
02-24 10:18:55.515: E/AndroidRuntime(1088):     at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
02-24 10:18:55.515: E/AndroidRuntime(1088):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
02-24 10:18:55.515: E/AndroidRuntime(1088):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
02-24 10:18:55.515: E/AndroidRuntime(1088):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
02-24 10:18:55.515: E/AndroidRuntime(1088):     at android.app.Activity.setContentView(Activity.java:1881)
02-24 10:18:55.515: E/AndroidRuntime(1088):     at com.example.iamgreat.GreatPiyu.onCreate(GreatPiyu.java:12)
02-24 10:18:55.515: E/AndroidRuntime(1088):     at android.app.Activity.performCreate(Activity.java:5104)
02-24 10:18:55.515: E/AndroidRuntime(1088):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
02-24 10:18:55.515: E/AndroidRuntime(1088):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
02-24 10:18:55.515: E/AndroidRuntime(1088):     ... 11 more
02-24 10:18:55.515: E/AndroidRuntime(1088): Caused by: java.lang.reflect.InvocationTargetException
02-24 10:18:55.515: E/AndroidRuntime(1088):     at java.lang.reflect.Constructor.constructNative(Native Method)
02-24 10:18:55.515: E/AndroidRuntime(1088):     at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
02-24 10:18:55.515: E/AndroidRuntime(1088):     at android.view.LayoutInflater.createView(LayoutInflater.java:587)
02-24 10:18:55.515: E/AndroidRuntime(1088):     ... 23 more
02-24 10:18:55.515: E/AndroidRuntime(1088): Caused by: java.lang.OutOfMemoryError
02-24 10:18:55.515: E/AndroidRuntime(1088):     at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
02-24 10:18:55.515: E/AndroidRuntime(1088):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:502)
02-24 10:18:55.515: E/AndroidRuntime(1088):     at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:355)
02-24 10:18:55.515: E/AndroidRuntime(1088):     at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:785)
02-24 10:18:55.515: E/AndroidRuntime(1088):     at android.content.res.Resources.loadDrawable(Resources.java:1965)
02-24 10:18:55.515: E/AndroidRuntime(1088):     at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
02-24 10:18:55.515: E/AndroidRuntime(1088):     at android.view.View.<init>(View.java:3328)
02-24 10:18:55.515: E/AndroidRuntime(1088):     at android.view.ViewGroup.<init>(ViewGroup.java:431)
02-24 10:18:55.515: E/AndroidRuntime(1088):     at android.widget.LinearLayout.<init>(LinearLayout.java:176)
02-24 10:18:55.515: E/AndroidRuntime(1088):     at android.widget.LinearLayout.<init>(LinearLayout.java:172)
02-24 10:18:55.515: E/AndroidRuntime(1088):     ... 26 more 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T10:35:54.767

45349648 字节分配的内存不足我认为您正在使用大量图像并且它无法一次全部膨胀。

看看：http: [//developer.android.com/training/displaying-bitmaps/load-bitmap.html](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

# python - Mongoimport json data and then big data

> ID：15050833
> 
> 赞同：2
> 
> 时间：2013-02-24T10:30:20.900
> 
> 标签：python, json, mongodb, mongoimport, bigdata

I'm stuck in doing a very simple import operation in MongoDB. I have a file, 200MB in size, JSON format. Its a feeds dump, format as: `{"some-headers":"", "dump":[{"item-id":"item-1"},{"item-id":"item-2"},...]}` This json feed contains words in languages other than english too, like Chinese, Japanese, Characters, etc. I tried to do a mongoimport as `mongoimport --db testdb --collection testcollection --file dump.json` but possibly, because the data is a bit complex, its treating `dump` as a column, resulting in error, due to 4MB column value limit. I further tried and a python script:

```
import simplejson
import pymongo
conn = pymongo.Connection("localhost",27017)
db = conn.testdb
c = db.testcollection
o = open("dump.json")
s = simplejson.load(o)
for x in s['dump']:
     c.insert(x)
o.close() 
```

Python is killed while running this thing, possibly due to the very limited resources I'm trying to work with. I reduced the filesize, by getting a new json dump at 50MB, now due to ASCII issues, python is troubling me again. I am looking for options both way using `mongoimport` and with above python script. Any further solutions shall also be greatly appreciated.

Also, I might some day reach the json dump ~GBs, so if there will be some other solution I should consider then, pl do highlight.

# jquery - 未调用 Ajax 发布方法

> ID：15050834
> 
> 赞同：0
> 
> 时间：2013-02-24T10:30:24.433
> 
> 标签：jquery, servlets

Ajax 没有调用 servlet

我的 web.xml：

```
<web-app xmlns="http://java.sun.com/xml/ns/javaee" version="2.5">
    <servlet>
        <servlet-name>LoginServlet</servlet-name>
        <servlet-class>com.web.LoginServlet</servlet-class>
    </servlet> 
    <servlet-mapping>
        <servlet-name>LoginServlet</servlet-name>
        <url-pattern>/LoginServlet</url-pattern>
    </servlet-mapping>
</web-app> 
```

剧本：

```
//function to check name and comment field 
function checkCommentsForm(){
    if(userName.attr("value") && userPass.attr("value"))
    {
        alert("true returned");
        return true;
    }
    else
    {
        alert("fasle returned");
        return false;  
    }
}
//When form submitted
$("#formL").submit(function(){
    if(checkCommentsForm()){
        $.ajax({
            type:"POST",
            url:"/LoginServlet/",
            data:"user="+userName.val()+"&pass="+userPass.val(),
            success: function(msg) {$('#targetDiv').hide();$("#targetDiv").html ("<h3>" + msg + "</h3>").fadeIn("slow");
            }
        });
        alert('ppppppppppppppppp----------');
    }
    else 
        alert("Please fill UserName & Password!");
    return false;
    });
}); 
```

表格：

```
<div>
    <form id="formL" name="formL" method="post" onsubmit="return false;">
        <span class="style3"><strong>Enter Username &amp;
            Password to Login : </strong></span><br> <br> <span class="style1">Username :&nbsp;</span>&nbsp;
            <input name="user" id="user" type="text"> <br>
            <span class="style1">Password :</span>&nbsp;&nbsp; <input name="pass" id="pass" type="password"> <br>
            <input name="button" id="button" value="Submit" type="submit">
    </form>
</div>
<div id="targetDiv" style="display: none;"></div> 
```

警报如下：

```
**The servlet are working but through ajax it was not called any clue what happen ?** 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T12:14:45.160

阅读 Web 浏览器开发工具集的“网络”部分中的 HTTP 流量监视器（在 Chrome/IE9/Firefox 中按 F12）。您应该已经注意到 ajax 请求返回了 HTTP 404 响应，该响应本质上是“找不到页面”错误。

您已经指定了一个域相关的 servlet URL，方法是在其前面加上`/`. 想象一下，JSP 已经打开`http://localhost:8080/context/login.jsp`，然后一个 servlet URL`/LoginServlet`会将 HTTP 请求发送到`http://localhost:8080/LoginServlet`，而您确实需要将它发送到`http://localhost:8080/context/LoginServlet`。

相应地修复它：

```
url: "LoginServlet" 
```

* * *

**与具体问题无关**，整个设计很奇怪，并没有真正逐步增强。即当最终用户禁用 JS 时，整个表单根本不起作用。您应该始终从没有任何单行 JavaScript 的完整工作表单开始。

假设一个基本的启动示例是这样的

```
<form id="login" action="login" method="post">
    <input type="text" name="user" />
    <input type="password" name="pass" />
    <input type="submit" value="Login" />
    <span id="message">${message}</span>
</form> 
```

那么你可以以一种相当可重用的方式进行增强，如下所示：

```
$("#login").submit(function() {
    var $form = $(this);
    $.post($form.attr("action"), $form.serialize(), function(data) {
        // ...
    });
    return false;
}); 
```

请注意，`$.serialize()`以适当的方式透明地序列化所有表单数据。您根本没有对用户/传递请求参数进行 URL 编码，当最终用户在用户名和/或密码中使用 URL 不安全的特殊字符时，无论如何都会破坏表单提交。

### 也可以看看：

*   [如何使用 Servlet 和 Ajax？](https://stackoverflow.com/questions/4112686/how-to-use-servlets-and-ajax/4113258#4113258)
*   [带有 JSP/Servlet 和 Ajax 的简单计算器](https://stackoverflow.com/questions/4114742/simple-calculator-in-jsp/4115298#4115298)

# ios - 核心数据 iCloud 交易日志

> ID：15050836
> 
> 赞同：2
> 
> 时间：2013-02-24T10:30:28.073
> 
> 标签：ios, icloud

我正在使用 UIManagedDocument 和 ubiquity 选项（NSPersistentStoreUbiquitousContentNameKey 和 NSPersistentStoreUbiquitousContentURLKey）测试 Core Data 和 iCloud。一切正常。我的设备在合理的时间内毫无问题地同步。数据库很小（低于 100K）。

正如我所说，我正在测试应用程序并对数据库进行大量更改，结果生成了大量事务日志。我遇到的问题是，如果我在用于测试的其中一台设备上删除并重新安装该应用程序（不删除 iCloud 数据），该应用程序需要很长时间才能打开文档。openWithCompletionHandler 需要几分钟，有时永远不会结束。如果我打开调试（-com.apple.coredata.ubiquity.logLevel 3），我可以看到有很长的等待，然后用事务日志重建数据库。如果我删除 iCloud 数据并在第一台设备上重新插入数据，则第二台设备同步没有问题。因此，我认为延迟的原因是大量事务日志（测试时为 20-30，正如我在 developer.icloud.com 上看到的那样）根据[管理核心数据 iCloud 事务日志](https://stackoverflow.com/questions/8704662/managing-core-data-icloud-transaction-Apple)将自动处理核心数据，但我看不到任何删除。也许这还需要一些时间。

我的问题是：事务日志是否得到整合？我可以强制合并日志吗？另一个推荐的选择？

我只将同步所需的基本信息子集存储在 iCloud Core Data 文件中。我有另一个包含完整数据库的本地文件，因此我可以重建 iCloud 数据库而不会丢失任何重大信息。当我检测到一堆日志并重新创建它时，也许我可以删除 iCloud DB。您认为这是一个不错的选择吗？

谢谢你的帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T22:25:14.947

> 事务日志是否得到整合？

这就是它应该如何工作的方式。

> 我可以强制合并日志吗？

不，没有直接影响事务日志存在的 API。iCloud 系统会在某个时候整合它们，但没有关于何时发生这种情况的文档，您无法强制执行。

> 另一个推荐的选择？

您可以间接限制事务日志的数量——减少保存更改的频率。事务日志对应于保存 Core Data 中的更改。这可能没什么区别，因为老实说，20-30 个事务日志并不是很多。您也许可以减少日志文件的数量，但其中的数据量仍然相同。

事务日志并不是你真正的问题。正如您所观察到的，在 iCloud 开始运行事务日志之前需要等待很长时间。在此延迟期间，iCloud 正在与 Apple 的服务器通信并下载交易日志。其中一些受网络速度和延迟的影响，其余的只是 iCloud 的方式。

# email - Do the application servers provide SMTP server implementation?

> ID：15050839
> 
> 赞同：0
> 
> 时间：2013-02-24T10:30:44.910
> 
> 标签：email, jboss, smtp, mule

I have a requirement to send emails from my Java EE based application to the customers. I am using a JBoss application server.

1.  I would like to understand if the application servers has the capability to act as an SMTP server as well.
2.  Can we use Mule ESB product to send emails? I guess Mule ESB uses the JavaMail API to send emails.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T17:13:43.553

在这里你有应该澄清你的疑虑的文档：http: [//www.mulesoft.org/documentation/display/current/SMTP+Transport+Reference](http://www.mulesoft.org/documentation/display/current/SMTP+Transport+Reference)

# java - 将 Spring 抽象工厂模式转换为 scala

> ID：15050844
> 
> 赞同：0
> 
> 时间：2013-02-24T10:31:19.490
> 
> 标签：java, spring, scala

在 Spring 中，我有一个控制器，一个提供该控制器可以访问的方法的服务接口。控制器调用服务的各种实现方法。

在 scala 中实现相同的“设计分离”是正确的实现：定义 scala 控制器，定义充当服务接口的 scala 特征。定义一个扩展此特征并提供服务实现的新类。然后控制器将实例化这个新类并调用服务方法的各种方法实现。

这是好的设计还是在实践中如何使用 Spring MVC？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T11:34:43.290

“好的设计”是相当主观的，对于每个程序员来说，“好的设计”的含义会随着时间而改变。大多数人认为有几件事是最佳实践，但即使是最佳实践也存在冲突。我个人的观点是，程序员应该继续学习这些最佳实践，更重要的是不断塑造他的代码，直到它达到适合这种情况的最佳形态。然而，随着程序员不断学习，它的“最佳”形状在这一点上不断变化。

我不能告诉你在你的情况下什么是“好的设计”设计，因为我不知道情况。最重要的是，我不是你，所以我的“好设计”对你来说并不是最好的。我建议您在一些问题的帮助下自己找到它：

*   你为谁编程？
*   你的代码能存活多久？
*   谁来维护你的代码？
*   您想创建自动测试并且愿意为此改变您的设计吗？
*   您是否需要多个单一原则的实现？
*   在这个时间点，什么风格适合你？
*   代码多久更改一次？
*   你想考虑未来，还是只创造现在需要的东西？
*   你喜欢用什么库？
*   你想花多少时间？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:18:26.363

正如其他人所评论的那样，“好的设计”是一个灵活的概念，取决于其他因素。我不会添加到该讨论中，而是提供我们方法的概述。

我们从传统的 Java 和 Spring webapp 开始，尽管我们选择了 Jersey 而不是 Spring MVC。后来，我们用 Scala 重新编码，进展顺利。我们特意保留了类 Java 风格的 Scala——这可能被视为不酷，但它运行良好且易于培训新同事。

然后我们决定放弃 Spring，连同它的 XML 和整个传递依赖关系。这很容易，因为我们已经有一组服务和控制器，它们都是具有构造函数注入依赖项的类（当然都是 TDD）。我们所要做的就是编写一个新的 Bootstrap 类来实例化服务和控制器，在每个构造函数参数列表中提供必要的具体类。方便的是，Bootstrap 类本质上是将原始 Spring 接线音译为（非常简单的）Scala。Bootstrap 类在应用启动时从 web.xml 启动。（任何使用过 Pico Container 的人都会熟悉这种方法。）

在我们的例子中，我们不需要在服务层中使用太多特征；由 TDD 驱动的具体类的简洁设计就足够了。但是，如果有必要，我们的方法也适用于服务的可插拔抽象。

现在我们有了一个除了 web.xml 之外没有 XML 的 web 应用程序，纯粹在 Scala 中，因此它很容易导航和修改，并且外部依赖项要少得多。这对我们来说非常有效。

# symfony - 可翻译的学说扩展中有默认语言环境吗？

> ID：15050849
> 
> 赞同：1
> 
> 时间：2013-02-24T10:31:40.057
> 
> 标签：symfony, doctrine-orm, doctrine-extensions

我已经实现了可翻译的扩展。如文档所示，我使用 Category （树扩展）实体和 CategoryTranslation 实体。我在 Category 实体中的所有标题都是法语。我想用英语翻译我的网站，所以我在语言环境中添加翻译`'en'`，例如，像这样：

```
$cat = $em->getRepository('MyBundle:Category')->findOneByTitle('Nourriture');
$cat->addTranslation(new CategoryTranslation('en', 'title', 'Food'));
$em->persist($cat);
$em->flush(); 
```

但是当我查看 mywebsite.com/en 时，我找到的是 Nourriture 标题，而不是英文翻译，而我在 config.yml 中的默认语言环境是`'fr'`.

当我检查 mywebsite.com/fr 时，我的标题没有翻译，显示为空白。所以我做了与上面相同的事情，但使用`'fr'`“Nourriture”作为`'fr'`语言环境的翻译。

然后我重新检查了 mywebsite.com/fr，效果很好，我有我的 Nourriture 头衔。

但它仍然不适用于 en 语言环境，我无法获得英文翻译。一切都好像我的 Category 实体中的标题是英文一样，所以它不必寻找`'en'`翻译。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T11:47:00.143

如果您使用[stof bundle](https://github.com/stof/StofDoctrineExtensionsBundle)则默认语言环境配置如下：

```
# app/config/config.yml
stof_doctrine_extensions:
default_locale: en_US 
```

否则你可以直接在[监听](https://github.com/l3pp4rd/DoctrineExtensions/blob/master/lib/Gedmo/Translatable/TranslatableListener.php#L240)器中设置 你也可以仔细阅读文档

# c++ - 当使用“pos”等于字符串长度调用 str.erase 时会发生什么？

> ID：15050850
> 
> 赞同：2
> 
> 时间：2013-02-24T10:31:51.753
> 
> 标签：c++

[字符串erase(pos,len)](http://www.cplusplus.com/reference/string/string/erase/)函数的文档并没有非常清楚地说明如果`pos`恰好是字符串的“one-past-end”会发生什么。它只是暗示这不是禁止的，但没有具体提及这种特殊情况的含义。

确实，`str.erase(str.size())`不会抛出异常。

在这种情况下真正应该发生什么？这似乎没有在任何地方明确提及。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T10:43:25.937

这不是那个“空间案例”。
一样`str.erase(0,0);`不会做任何事情。`str.erase(str.size());`告诉它从头到尾删除所有字符。什么都抹不掉。

> **C++11 §21.4.6.5：**`xlen` “效果：确定要删除的字符串 的有效长度为 和 中的较小`n`者`size() - pos`。然后该函数用长度`*this`为的`size() - xlen`字符串替换`pos`由”`*this``*this``pos + xlen`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T10:33:58.950

它写在你的链接中

> 如果 pos 大于字符串长度，则抛出 out_of_range 异常。

我认为这回答了这个问题。

# java - 用不同的扩展重构 else-if 运算符？

> ID：15050851
> 
> 赞同：2
> 
> 时间：2013-02-24T10:31:52.400
> 
> 标签：java, if-statement, refactoring

我想知道我们如何更好地使用 else-if 运算符来重构这部分代码。什么时候用不同的扩展进行 eguals 检查？

**代码：**

```
 private void findFiles(String path) {

        try {
            File root = new File(path);
            File[] list = root.listFiles();
            for (File currentFile : list) {
                if (currentFile.isDirectory()) {
                    findFiles(currentFile.getAbsolutePath());
                } else {
                    if (currentFile.getName().toLowerCase().endsWith((".txt"))) {
                        queue.put(currentFile);
                    } else if (currentFile.getName().toLowerCase()
                            .endsWith((".pdf"))) {
                        queue.put(currentFile);
                    } else if (currentFile.getName().toLowerCase()
                            .endsWith((".doc"))) {
                        queue.put(currentFile);
                    } else if (currentFile.getName().toLowerCase()
                            .endsWith((".docx"))) {
                        queue.put(currentFile);
                    } else if (currentFile.getName().toLowerCase()
                            .endsWith((".html"))) {
                        queue.put(currentFile);
                    } else if (currentFile.getName().toLowerCase()
                            .endsWith((".htm"))) {
                        queue.put(currentFile);
                    } else if (currentFile.getName().toLowerCase()
                            .endsWith((".xml"))) {
                        queue.put(currentFile);
                    } else if (currentFile.getName().toLowerCase()
                            .endsWith((".djvu"))) {
                        queue.put(currentFile);
                    } else if (currentFile.getName().toLowerCase()
                            .endsWith((".djv"))) {
                        queue.put(currentFile);
                    } else if (currentFile.getName().toLowerCase()
                            .endsWith((".rar"))) {
                        queue.put(currentFile);
                    } else if (currentFile.getName().toLowerCase()
                            .endsWith((".rtf"))) {
                        queue.put(currentFile);
                    } 
                }
            }
        } catch (InterruptedException e) {
            e.printStackTrace();
        }

    }
} 
```

**问题：**

*   如何更好地重构代码？让
    理解更简单。
*   我们可以使用其他方法来检查`extentions` 变体吗？

谢谢，
纳扎尔。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-24T10:36:11.127

您可以用以下内容替换整个检查扩展列表：

```
// outside the loop (or even method):
Set<String> extensions = new HashSet<>(Arrays.asList(".txt", ".pdf", ".doc",
                 ".docx", ".html", ".htm", ".xml", ".djvu", ".rar", ".rtf"));
// in the loop:
String fileName = currentFile.getName().toLowerCase();
if (extensions.contains(fileName.substring(fileName.lastIndexOf(".")))) {
    queue.put(currentFile);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T10:37:26.300

最好的解决方案是将其重构为 STRATEGY 模式，如下[所示](https://stackoverflow.com/questions/6529856/modifying-if-else-to-strategy-pattern)：

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-24T10:39:56.820

您可以使用正则表达式：

```
String s = currentFile.getName().toLowerCase();
if (s.matches("^.+?\\.(txt|pdf|doc|docx|html|htm|xml|djvu|rar|rtf)$")) {
    queue.put(currentFile);
} 
```

这假设要采取的操作对于所有扩展都是相同的。

详细说明：

```
^         beginning of string
.+        one or more characters
?         non greedy -> don't consume characters that match the rest of the regex
\\.       a period
(pdf|doc) match pdf or doc
$         the end of the string 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-24T10:40:45.803

我将创建一个 getExtension() 方法，该方法返回文件的扩展名，以及一组最终接受的扩展名：

```
private static final Set<String> ACCEPTED_EXTENSIONS = 
    Collections.unmodifiableSet(new HashSet<String>(Arrays.asList(".txt", ".doc", ...));

private String getExtension(File f) {
    // TODO return the extension of the file
} 
```

然后代码将简化为：

```
private void findFiles(String path) {

    try {
        File root = new File(path);
        File[] list = root.listFiles();
        for (File currentFile : list) {
            if (currentFile.isDirectory()) {
                findFiles(currentFile.getAbsolutePath());
            } 
            else if (ACCEPTED_EXTENSIONS.contains(getExtension(currentFile))) {
                queue.put(currentFile);
            }
        }
    } 
    catch (InterruptedException e) {
        e.printStackTrace();
    } 
```

或者更好的是，我会创建一个 FileFilter，它只接受具有可接受扩展名之一的目录和文件（使用相同的集合和`getExtension()`方法），并且会使用`root.listFiles(fileFilter)`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-24T10:41:21.777

**创建一个方法**

```
public boolean isPermissibleFileType(String fileName){
    String[] fileTypes = {".pdf",".doc",".docx",".html",".htm",".xml",".djvu",".djv",".rar",".rtf"};
    return Arrays.asList(fileTypes).contains(fileName.substring(fileName.lastIndexOf('.')).toLowerCase());
} 
```

**在循环中使用方法**

```
private void findFiles(String path) {

        try {
            File root = new File(path);
            File[] list = root.listFiles();
            for (File currentFile : list) {
                if (currentFile.isDirectory()) {
                    findFiles(currentFile.getAbsolutePath());
                } else {
                    if(isPermissibleFileType(currentFile.getName()){
                       queue.put(currentFile);
                    }
                }
            }
        } catch (InterruptedException e) {
            e.printStackTrace();
        }

    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-24T10:43:06.707

[您可以使用类FileNameFilter](http://docs.oracle.com/javase/6/docs/api/java/io/FilenameFilter.html)将扩展检查提取到一些辅助方法中。然后对于递归，您可以使用原始查找器方法。

# javascript - 在多个 chrome.storage API 调用中防止竞争条件的最佳方法？

> ID：15050861
> 
> 赞同：11
> 
> 时间：2013-02-24T10:33:05.907
> 
> 标签：javascript, google-chrome-extension, locking, race-condition

1.  某事要求一项任务
2.  其他东西将任务列表从存储中拉出，并检查那里是否有任务。
3.  如果有任务，它会删除一个并将较小的“任务列表”放回存储中。

如果出现多个请求，则在第 2 步和第 3 步之间可能会出现*竞争条件*，并且同一任务将被执行两次。

在“签出”单个任务时“锁定”“任务表”以防止任何其他请求是正确的解决方案吗？

什么是对性能影响最小的解决方案，例如执行延迟，以及应该如何使用 chrome.storage API 在 javascript 中实现？

例如一些代码：

```
function decide_response ( ) {
    if(script.replay_type == "reissue") {
            function next_task( tasks ) {
                var no_tasks = (tasks.length == 0);
                if( no_tasks ) {
                    target_complete_responses.close_requester();
                }
                else {
                    var next_task = tasks.pop();
                    function notify_execute () {
                        target_complete_responses.notify_requester_execute( next_task );
                    }
                    setTable("tasks", tasks, notify_execute);
                }
            }
            getTable( "tasks", next_tasks );
    ...
    }
...
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T17:14:27.720

我认为您可以利用 javascript 在上下文中是单线程的这一事实，即使使用异步 chrome.storage API，也可以在没有锁的情况下进行管理。只要您不使用 chrome.storage.sync，那就是 - 如果云端可能有变化，也可能没有变化，我认为所有的赌注都没有了。

我会做这样的事情（即刻写下，未经测试，无错误处理）：

```
var getTask = (function() {
  // Private list of requests.
  var callbackQueue = [];

  // This function is called when chrome.storage.local.set() has
  // completed storing the updated task list.
  var tasksWritten = function(nComplete) {
    // Remove completed requests from the queue.
    callbackQueue = callbackQueue.slice(nComplete);

    // Handle any newly arrived requests.
    if (callbackQueue.length)
      chrome.storage.local.get('tasks', distributeTasks);
  };

  // This function is called via chrome.storage.local.get() with the
  // task list.
  var distributeTasks = function(items) {
    // Invoke callbacks with tasks.
    var tasks = items['tasks'];
    for (var i = 0; i < callbackQueue.length; ++i)
      callbackQueue[i](tasks[i] || null);

    // Update and store the task list. Pass the number of requests
    // handled as an argument to the set() handler because the queue
    // length may change by the time the handler is invoked.
    chrome.storage.local.set(
      { 'tasks': tasks.slice(callbackQueue.length) },
      function() {
        tasksWritten(callbackQueue.length);
      }
    );
  };

  // This is the public function task consumers call to get a new
  // task. The task is returned via the callback argument.
  return function(callback) {
    if (callbackQueue.push(callback) === 1)
      chrome.storage.local.get('tasks', distributeTasks);
  };
})(); 
```

这会将来自消费者的任务请求作为回调存储在本地内存的队列中。当一个新请求到达时，回调被添加到队列中，并且如果这是队列中唯一的请求，则获取任务**列表**。否则我们可以假设队列已经被处理（这是一个隐式锁，只允许一个执行链访问任务列表）。

获取任务列表时，将任务分配给请求。请注意，如果在获取完成之前已经有更多请求到达，则可能有多个请求。如果请求多于任务，则此代码仅将 null 传递给回调。要在更多任务到达之前阻止请求，请保留未使用的回调并在添加任务时重新启动请求处理。如果任务可以动态生成和消耗，请记住，那里也需要防止竞争条件，但此处未显示。

在存储更新的任务列表之前，防止再次读取任务列表很重要。为此，在更新完成之前不会从队列中删除请求。然后我们需要确保处理同时到达的所有请求（可以将对 chrome.storage.local.get() 的调用短路，但为了简单起见，我这样做了）。

这种方法应该非常有效，因为它应该尽量减少对任务列表的更新，同时仍然尽可能快地响应。没有显式锁定或等待。如果您在其他上下文中有任务使用者，请设置调用 getTask() 函数的 chrome.extension 消息处理程序。

# flash - Vaadin 7 闪光灯无法正常工作

> ID：15050863
> 
> 赞同：0
> 
> 时间：2013-02-24T10:33:19.627
> 
> 标签：flash, vaadin

我正在为我的 Web 应用程序使用 Vaadin 7，但我遇到了 Flash 集成问题。

我尝试像这样嵌入 Flash 动画：

```
@Theme("testtheme")
public class TsetUI extends UI {
@Override
protected void init(VaadinRequest request) {
    final HorizontalLayout layout = new HorizontalLayout();
    layout.setWidth("100%");
    setContent(layout);
    Flash flash = new Flash(null, new ThemeResource("flash/logo.swf"));
    layout.addComponent(flash);
}
} 
```

但它不显示动画，只是一些空白。

swf 文件位于：

WebContent/VAADIN/themes/testtheme/flash/logo.swf

我不知道我做错了什么。请...我需要一些帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:28:10.290

终于找到了解决这个问题的方法：

我使用 vaadin 6 中的“旧”方式来解决这个问题（使用嵌入式对象）：

```
@Override
protected void init(VaadinRequest request) {
    final HorizontalLayout layout = new HorizontalLayout();
    layout.setWidth("100%");
    setContent(layout);
    Embedded logo = new Embedded();
    logo.setSource(new ThemeResource("flash/logo.swf"));
    logo.setMimeType("application/x-shockwave-flash");
    // TYPE_BROWSER
    logo.setType(2);
    layout.addComponent(logo);
} 
```

但是有一个问题：性能很差，因为 Flash 文件的渲染很不方便（很多 div 和 iframe ......）

# jquery - 如何组合两个数组，将第一个数组用作键，第二个数组用作值？

> ID：15050870
> 
> 赞同：2
> 
> 时间：2013-02-24T10:34:21.233
> 
> 标签：jquery

我有两个数组：

```
$array1 = array(1,2,3);
$array2 = array(dog, cat, fox); 
```

如何组合两个数组，将第一个数组用作键，第二个数组用作值？

```
$array3 = array(1 => dog, 2 => cat, 4 => fox); 
```

在 php 中我们有 array_combine(); 但我似乎找不到在 jQuery 中执行此操作的好方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T10:38:19.340

使用 jQuery，使用循环：

```
var array3 = {};
$.each(array1, function(i) {
    array3[array1[i]] = array2[i];
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T10:40:51.757

一个简单的`for`循环应该可以做到这一点。

```
var arr1 = [3, 5, 7],       // keys, integers or "integer strings" e.g. "5"
    arr2 = ['a', 'b', 'c']; // values

var arr3 = [], i;

for (i = 0; i < arr1.length; ++i) {
    arr3[arr1[i]] = arr2[i];
}

arr3; // [undefined × 3, "a", undefined × 1, "b", undefined × 1, "c"] 
```

**编辑：**如果您使用非整数（例如，不是`1`, `2`, .. 或`'1'`, `'2'`, ..）作为键，那么您要在 JavaScript 中创建的不是*Array*，而是*Object* `myObj = {}`。*Array*不会抱怨像这样添加键，因为在 JavaScript 中它继承自Object *，*但它会被认为是不好的做法并且难以调试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T10:41:07.030

```
var array3 = {};
for (var i = 0; i < array1.length; i++) {
   array3[array1[i]] = array2[i];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T10:43:16.357

在 js 中，与 php 不同，哈希和数组是两个不同的东西。

所以，我假设你想要一个对象作为最终结果而不是数组。

```
var $array1 = array(1,2,3);
var $array2 = array(dog, cat, fox);
var obj = {};

for(var i=0,len=$array1.length; i < len ;i++) {
 obj[$array1[i]] = $array2[i];
} 
```

另外，查看[js 中的 array_combine](http://phpjs.org/functions/array_combine/)。

你会发现很多其他 js 等价的 php 函数。

# c# - xml 数据到数据集

> ID：15050875
> 
> 赞同：0
> 
> 时间：2013-02-24T10:35:33.900
> 
> 标签：c#, xml, dataset

我正在尝试将此 xml 信息放入表中。我尝试将 xml 读入数据集...

```
 string myXMLfile = @"..\..\..\BR7.xml";

        //http://tatts.com/pagedata/racing/2011/10/5/BR7.xml
        //http://tatts.com/racing/2011/10/5/BR/7

        DataSet ds = new DataSet();
        try
        {
            ds.ReadXml(myXMLfile);

            for (int i = 0; i < ds.Tables.Count; i++)
            {
                listBox1.Items.Add(ds.Tables[i].TableName);
            }

            dgvRunner.DataSource = ds;
            dgvRunner.DataMember = "Runner";

            dgvWinOdds.DataSource = ds;
            dgvWinOdds.DataMember = "WinOdds";

            dgvPlaceOdds.DataSource = ds;
            dgvPlaceOdds.DataMember = "PlaceOdds";

            dgvFixedOdds.DataSource = ds;
            dgvFixedOdds.DataMember = "FixedOdds"; 
```

但我有四个单独的表。Runner、WinOdds、PlaceOdds 和 fixedOdds 如何将 Runner 的所有信息放入一个表中？

这是一些xml...

```
-<Runner RunnerNo="1" Rtng="93" LastResult="0X1" Form="W" Weight="57.0" Handicap="0" Barrier="10" RiderChanged="N" Rider="P SCHMIDT(A)" Scratched="N" RunnerName="PREACHER BOY">
<WinOdds CalcTime="2011-10-05T16:51:07" LastCalcTime="2011-10-05T16:46:32" Short="N" Lastodds="11.50" Odds="10.70"/>
<PlaceOdds Short="N" Lastodds="3.50" Odds="3.30"/>
-<FixedOdds RaceDayDate="2011-10-05T00:00:00" MeetingCode="BR" RaceNo="07" RunnerNo="01" LateScratching="0" Status="w" OfferName="PREACHER BOY" RetailPlaceOdds="3.3500" RetailWinOdds="12.0000" PlaceOdds="3.3500" WinOdds="12.0000" OfferId="981020"><Book SubEventId="863449" BookStatus="F"/> 
</FixedOdds>
</Runner> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T11:39:07.643

我会提出一种将`Runner`子属性的所有属性移动到`Runner`节点属性集合的方法。这需要以下假设：

1.  节点中的每个嵌套元素内部最多有 1 个嵌套元素（即元素内部`Runner`只有一个元素）`Book``FixedOdds`
2.  属性将通过为其原始节点的名称添加前缀来重命名（元素中的`CalcTime`属性`WinOdds`将被复制到`Runner`属性的集合中，名称为`WinOddsCalcTime`）
3.  您可以保留或删除子节点（我在代码示例中选择删除它们）

这是代码：

```
 string myXMLfile = @"xml.xml";

    DataSet ds = new DataSet();

    try
    {

        XmlDocument doc = new XmlDocument();
        doc.Load(myXMLfile);

        var runners = doc.SelectNodes("/Runner");

        foreach (XmlNode runner in runners)
        {
            foreach (XmlNode child in runner.ChildNodes)
            {
                for (int i = 0; i < child.Attributes.Count; i++)
                {
                    var at =doc.CreateAttribute(child.Name + child.Attributes[i].Name);
                    at.Value=child.Attributes[i].Value;
                    runner.Attributes.Append(at);
                }
                if (child.Name == "FixedOdds")
                {
                    foreach (XmlNode book in child.ChildNodes)
                    {
                        for (int i = 0; i < book.Attributes.Count; i++)
                        {
                            var at = doc.CreateAttribute(book.Name + book.Attributes[i].Name);
                            at.Value = book.Attributes[i].Value;
                            runner.Attributes.Append(at);
                        }
                    }
                }

                // delete the attributes and the children nodes
                child.RemoveAll();
            }

            // delete the child noeds
            while (runner.ChildNodes.Count > 0)
            {
                runner.RemoveChild(runner.ChildNodes[0]);
            }
        }

        doc.Save("xml1.xml");

        ds.ReadXml("xml1.xml");

        for (int i = 0; i < ds.Tables.Count; i++)
        {
            listBox1.Items.Add(ds.Tables[i].TableName);
        }

        dgvRunner.DataSource = ds;
        dgvRunner.DataMember = "Runner";

        //dgvWinOdds.DataSource = ds;
        //dgvWinOdds.DataMember = "WinOdds";

        //dgvPlaceOdds.DataSource = ds;
        //dgvPlaceOdds.DataMember = "PlaceOdds";

        //dgvFixedOdds.DataSource = ds;
        //dgvFixedOdds.DataMember = "FixedOdds";
    }
    catch (Exception)
    { }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T10:48:09.757

您应该在每个表中都有关于 RunnerNo 的信息（WinOdd 和 PlaceOdds 中缺少它），以便您可以关联您的四个数据表。您可以将 RunnerNo 定义为 Unique

之后，您只使用一个gridview 并将四个数据表之间的关系作为gridview 的DataMember。

这是一个关系应该是什么样子的[示例](http://tinypic.com/view.php?pic=keuuy1&s=6)

# mysql - 在 concat 中使用存储的盐

> ID：15050883
> 
> 赞同：1
> 
> 时间：2013-02-24T10:36:35.000
> 
> 标签：mysql

考虑以下查询，无论用户名无效还是密码错误，它都会返回相同的输出（只是一个示例，我知道 SQL 注入）：

```
CREATE TABLE users (
    username VARCHAR(64),
    password CHAR(40)
);

SELECT FROM users
      WHERE username = '{$username}'
        AND password = sha1('{$password}'); 
```

我想添加一个盐字段，但不是在应用程序中检索它并连接，我更希望 MySQL 在引擎中进行连接：

```
CREATE TABLE users (
    username VARCHAR(64),
    salt VARCHAR(128),
    password CHAR(40)
);

SELECT FROM users
      WHERE username = '{$username}'
        AND password = sha1(CONCAT(<salt_field>, '{$password}')); 
```

我会用什么代替`<salt_field>`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T11:25:50.423

您可以根据需要引用任何列。在这种情况下，您可以使用`WHERE password = SHA1(CONCAT(salt, <password>))`. 请注意，密码仍然可以被嗅探。是否信任环境取决于您。一个很好的例子，但不太有用，是以下查询：`WHERE lastName = username`. 在这种情况下，您会将用户的姓氏与他们选择的用户名进行比较。因此，在这种情况下，它将返回所有用户名与其姓氏相同的用户。

当您连接多个表时也会发生这种情况。实际上，您将第一个表的所有行与第二个表中的行连接起来，但只返回与给定条件匹配的行。聪明的优化将导致不考虑所有可能的组合，而只是考虑其中的一小部分。

# jquery - 当 Firebug 处于活动状态时，Jquery 对话框冻结

> ID：15050888
> 
> 赞同：2
> 
> 时间：2013-02-24T10:37:13.270
> 
> 标签：jquery, firefox, firebug

我有非常简单的 jquery 对话框，比如

```
$(".myDialog").dialog({
    close: function() { 
        $(this).dialog('destroy').remove();
    }
}); 
```

代码运行良好，直到我更新到 jquery 1.9.1 和 firefox 19 + firebug 1.11.2。现在它冻结了firefox，但如果我关闭了firebug，它仍然可以工作。

不幸的是我找不到类似的问题，现在我有一个小的解决方法：

```
if (window.console && (window.console.firebug || window.console.exception)) {
    $(this).dialog('close').remove();
} 
```

当然这只是部分解决方案，也许有人有其他选择？

UPD：似乎只有在包含 bootstrap bootstrap-dropdown.js 插件的情况下才会陷入无限递归。我在这里发布了整个示例[http://code.google.com/p/fbug/issues/detail?id=4938](http://code.google.com/p/fbug/issues/detail?id=4938)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T21:54:56.447

是的。它`StackOverflow Exception`在 jquery 里面（在我的情况下是 1.9.0）。这是更具体的信息：

```
Uncaught SyntaxError: Invalid regular expression: /(^|\.)dialog9(\.|$)/: Stack overflow 
```

所以我会在几个小时内处理解决方案并尽快报告。

# html - 表格第二列中的 HTML CSS 图像未正确显示

> ID：15050892
> 
> 赞同：0
> 
> 时间：2013-02-24T10:37:46.143
> 
> 标签：html, css, html-table

我正在尝试创建一个表，该表在第一列中有一个列表，在第二列中有一个图像。但是，当我将图像放在第二列时，它会将第一列的列表向下移动。这是发生的事情：

![图像向下移动列表](../Images/1806d5c0885f311c937c9361142f9185.png)

如您所见，图像将列表向下移动。我怎么能得到它，所以它看起来像这样：

![在此处输入图像描述](../Images/8f9fe8d3eed5215eff0113e03aa95aa4.png)

这是表格的代码。

```
<table border="0">
  <tr>
    <td>
      <ul>
        <li>F1</li>
        <li>ALMS</li>
        <li>Le Mans 24 Hour</li>
        <li>WTCCBritish GT</li>
        <li>BTCC</li>
        <li>Toca support races</li>
     </ul>
   </td>
   <td>
     <a href="http://www.motorground.co.uk/wp-content/uploads/2013/02/track-day-0732.jpg"><img src="http://www.motorground.co.uk/wp-content/uploads/2013/02/track-day-0732-300x200.jpg" alt="PrivateTuitionimg073" width="300" height="200" class="aligncenter size-medium wp-image-23" /></a>
   </td>
  </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T10:41:09.870

您必须添加到您的 img 样式：float:right 并将其放置在同一单元格中 te 列表的底部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T10:46:47.277

通常您必须为表格单元格设置垂直对齐方式。

看看这个内容。这应该回答你的问题；）

[http://phrogz.net/css/vertical-align/index.html](http://phrogz.net/css/vertical-align/index.html)

# python - 带有 Django 的 Python 2.7：sqlite 不起作用

> ID：15050901
> 
> 赞同：-1
> 
> 时间：2013-02-24T10:38:54.840
> 
> 标签：python, django

我正在尝试按照本教程使用 Django 的基本站点： [https ://docs.djangoproject.com/en/dev/intro/tutorial01/](https://docs.djangoproject.com/en/dev/intro/tutorial01/)

但是，当我尝试使用以下命令创建数据库模式时：

```
python manage.py sql polls 
```

Python 不创建模式，我得到以下输出：

```
sqlite3.OperationalError: unable to open database file 
```

我的 manage.py 配置：

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'E:\estudos\projetos\hangover\site\newsite\', # Or path to database file if using sqlite3.
        'USER': '',                      # Not used with sqlite3.
        'PASSWORD': '',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
} 
```

对于民意调查应用程序

```
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'polls',
    # Uncomment the next line to enable the admin:
    # 'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T10:44:02.490

将您的`NAME`字符串替换为`r'E:\estudos\projetos\hangover\site\newsite\db.sqlite'`, 或类似的。

这里有两个问题。一个是Python使用反斜杠来表示字符串中的转义字符，因此`\newsite`实际上表示换行符然后是“ewsite”；`r`告诉它不要那样做。另一个是您提供的是目录的路径，而不是文件。

# doctrine-orm - symfony2：无法在嵌入对象中保存父 ID

> ID：15050909
> 
> 赞同：3
> 
> 时间：2013-02-24T10:39:57.123
> 
> 标签：doctrine-orm, symfony-2.1

我正在尝试使用我的第一个嵌入式表单（SF2.1 + Doctrine2）

实体：

```
<?php
namespace Chris\BabelBundle\Entity;
use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;
use Doctrine\Common\Collections\ArrayCollection;

/**
 * @ORM\Entity
 */
class Needs
{
    /**
     * @ORM\GeneratedValue
     * @ORM\Id
     * @ORM\Column(type="integer")
     */
    private $id;

    /**
         * @ORM\ManyToOne(targetEntity="Projects")
         * @Assert\NotBlank()
         */
    private $relatedproject;

    /**
         * @ORM\ManyToOne(targetEntity="Activities")
         * @Assert\NotBlank()
         */
    private $relatedactivity;

    /**
         * @ORM\ManyToOne(targetEntity="Jobs")
         * @Assert\NotBlank()
         */
    private $relatedjob;

    /**
     * @ORM\Column(type="string", length=255)
     * @Assert\NotBlank()
     */
    private $firstname;

    /**
     * @ORM\Column(type="string", length=255)
     * @Assert\NotBlank()
     */
    private $lastname;

    /**
         * @ORM\ManyToOne(targetEntity="Experiences")
         * @Assert\NotBlank()
         */
    private $relatedexperience;

    /**
         * @ORM\ManyToOne(targetEntity="Plants")
         * @Assert\NotBlank()
         */
    private $maintrainingplant;

    /**
         * @ORM\Column(type="date")
         * @Assert\NotBlank()
         */
    private $trainingneedstart;

    /**
         * @ORM\Column(type="date")
         * @Assert\NotBlank()
         */
    private $readytowork;

    /**
     * @var ArrayCollection $trainings
     *
     * @ORM\OneToMany(targetEntity="Trainings", mappedBy="training", cascade={"persist", "remove", "merge"})
     */
    private $trainings;

    /**
     * Constructor
     */
    public function __construct()
    {
        $this->trainings = new \Doctrine\Common\Collections\ArrayCollection();
    }

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set firstname
     *
     * @param string $firstname
     * @return Needs
     */
    public function setFirstname($firstname)
    {
        $this->firstname = $firstname;

        return $this;
    }

    /**
     * Get firstname
     *
     * @return string 
     */
    public function getFirstname()
    {
        return $this->firstname;
    }

    /**
     * Set lastname
     *
     * @param string $lastname
     * @return Needs
     */
    public function setLastname($lastname)
    {
        $this->lastname = $lastname;

        return $this;
    }

    /**
     * Get lastname
     *
     * @return string 
     */
    public function getLastname()
    {
        return $this->lastname;
    }

    /**
     * Set trainingneedstart
     *
     * @param \DateTime $trainingneedstart
     * @return Needs
     */
    public function setTrainingneedstart($trainingneedstart)
    {
        $this->trainingneedstart = $trainingneedstart;

        return $this;
    }

    /**
     * Get trainingneedstart
     *
     * @return \DateTime 
     */
    public function getTrainingneedstart()
    {
        return $this->trainingneedstart;
    }

    /**
     * Set readytowork
     *
     * @param \DateTime $readytowork
     * @return Needs
     */
    public function setReadytowork($readytowork)
    {
        $this->readytowork = $readytowork;

        return $this;
    }

    /**
     * Get readytowork
     *
     * @return \DateTime 
     */
    public function getReadytowork()
    {
        return $this->readytowork;
    }

    /**
     * Set relatedproject
     *
     * @param \Chris\BabelBundle\Entity\Projects $relatedproject
     * @return Needs
     */
    public function setRelatedproject(\Chris\BabelBundle\Entity\Projects $relatedproject = null)
    {
        $this->relatedproject = $relatedproject;

        return $this;
    }

    /**
     * Get relatedproject
     *
     * @return \Chris\BabelBundle\Entity\Projects 
     */
    public function getRelatedproject()
    {
        return $this->relatedproject;
    }

    /**
     * Set relatedactivity
     *
     * @param \Chris\BabelBundle\Entity\Activities $relatedactivity
     * @return Needs
     */
    public function setRelatedactivity(\Chris\BabelBundle\Entity\Activities $relatedactivity = null)
    {
        $this->relatedactivity = $relatedactivity;

        return $this;
    }

    /**
     * Get relatedactivity
     *
     * @return \Chris\BabelBundle\Entity\Activities 
     */
    public function getRelatedactivity()
    {
        return $this->relatedactivity;
    }

    /**
     * Set relatedjob
     *
     * @param \Chris\BabelBundle\Entity\Jobs $relatedjob
     * @return Needs
     */
    public function setRelatedjob(\Chris\BabelBundle\Entity\Jobs $relatedjob = null)
    {
        $this->relatedjob = $relatedjob;

        return $this;
    }

    /**
     * Get relatedjob
     *
     * @return \Chris\BabelBundle\Entity\Jobs 
     */
    public function getRelatedjob()
    {
        return $this->relatedjob;
    }

    /**
     * Set relatedexperience
     *
     * @param \Chris\BabelBundle\Entity\Experiences $relatedexperience
     * @return Needs
     */
    public function setRelatedexperience(\Chris\BabelBundle\Entity\Experiences $relatedexperience = null)
    {
        $this->relatedexperience = $relatedexperience;

        return $this;
    }

    /**
     * Get relatedexperience
     *
     * @return \Chris\BabelBundle\Entity\Experiences 
     */
    public function getRelatedexperience()
    {
        return $this->relatedexperience;
    }

    /**
     * Set maintrainingplant
     *
     * @param \Chris\BabelBundle\Entity\Plants $maintrainingplant
     * @return Needs
     */
    public function setMaintrainingplant(\Chris\BabelBundle\Entity\Plants $maintrainingplant = null)
    {
        $this->maintrainingplant = $maintrainingplant;

        return $this;
    }

    /**
     * Get maintrainingplant
     *
     * @return \Chris\BabelBundle\Entity\Plants 
     */
    public function getMaintrainingplant()
    {
        return $this->maintrainingplant;
    }

    /**
     * Add trainings
     *
     * @param \Chris\BabelBundle\Entity\Trainings $trainings
     * @return Needs
     */
    public function addTraining(\Chris\BabelBundle\Entity\Trainings $trainings)
    {
        $this->trainings[] = $trainings;

        return $this;
    }

    /**
     * Remove trainings
     *
     * @param \Chris\BabelBundle\Entity\Trainings $trainings
     */
    public function removeTraining(\Chris\BabelBundle\Entity\Trainings $trainings)
    {
        $this->trainings->removeElement($trainings);
    }

    /**
     * Get trainings
     *
     * @return \Doctrine\Common\Collections\Collection 
     */
    public function getTrainings()
    {
        return $this->trainings;
    }
    public function __toString() {return $this->getFirstname();}
}

<?php
namespace Chris\BabelBundle\Entity;
use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;
/**
 * @ORM\Entity
 */
class Trainings
{
    /**
     * @ORM\GeneratedValue
     * @ORM\Id
     * @ORM\Column(type="integer")
     */
    private $id;

    /**
         * @ORM\ManyToOne(targetEntity="Plants")
         * @Assert\NotBlank()
         */
    private $trainingplant;

    /**
         * @ORM\Column(type="date")
         * @Assert\NotBlank()
         */
    private $trainingstart;

    /**
         * @ORM\Column(type="date")
         * @Assert\NotBlank()
         */
    private $trainingend;

    /**
     * @var Needs $trainings
     *
     * @ORM\ManyToOne(targetEntity="Needs", inversedBy="trainings", cascade={"persist", "remove", "merge"})
     * @ORM\JoinColumns({
     *  @ORM\JoinColumn(name="Needs_id", referencedColumnName="id")
     * })
     */
    private $training;

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set trainingstart
     *
     * @param \DateTime $trainingstart
     * @return Trainings
     */
    public function setTrainingstart($trainingstart)
    {
        $this->trainingstart = $trainingstart;

        return $this;
    }

    /**
     * Get trainingstart
     *
     * @return \DateTime 
     */
    public function getTrainingstart()
    {
        return $this->trainingstart;
    }

    /**
     * Set trainingend
     *
     * @param \DateTime $trainingend
     * @return Trainings
     */
    public function setTrainingend($trainingend)
    {
        $this->trainingend = $trainingend;

        return $this;
    }

    /**
     * Get trainingend
     *
     * @return \DateTime 
     */
    public function getTrainingend()
    {
        return $this->trainingend;
    }

    /**
     * Set trainingplant
     *
     * @param \Chris\BabelBundle\Entity\Plants $trainingplant
     * @return Trainings
     */
    public function setTrainingplant(\Chris\BabelBundle\Entity\Plants $trainingplant = null)
    {
        $this->trainingplant = $trainingplant;

        return $this;
    }

    /**
     * Get trainingplant
     *
     * @return \Chris\BabelBundle\Entity\Plants 
     */
    public function getTrainingplant()
    {
        return $this->trainingplant;
    }

    /**
     * Set training
     *
     * @param \Chris\BabelBundle\Entity\Needs $training
     * @return Trainings
     */
    public function setTraining(\Chris\BabelBundle\Entity\Needs $training = null)
    {
        $this->training = $training;
        return $this;
    }

    /**
     * Get training
     *
     * @return \Chris\BabelBundle\Entity\Needs 
     */
    public function getTraining()
    {
        return $this->training;
    }
} 
```

2个控制器：

```
<?php

namespace Chris\BabelBundle\Controller;

use Symfony\Component\HttpFoundation\Request;
use Symfony\Bundle\FrameworkBundle\Controller\Controller;

use Chris\BabelBundle\Entity\Needs;
use Chris\BabelBundle\Form\NeedsType;

/**
 * Needs controller.
 *
 */
class NeedsController extends Controller
{
    /**
     * Lists all Needs entities.
     *
     */
    public function indexAction()
    {
        $em = $this->getDoctrine()->getManager();

        $entities = $em->getRepository('ChrisBabelBundle:Needs')->findAll();

        return $this->render('ChrisBabelBundle:Needs:index.html.twig', array(
            'entities' => $entities,
        ));
    }

    /**
     * Finds and displays a Needs entity.
     *
     */
    public function showAction($id)
    {
        $em = $this->getDoctrine()->getManager();

        $entity = $em->getRepository('ChrisBabelBundle:Needs')->find($id);

        if (!$entity) {
            throw $this->createNotFoundException('Unable to find Needs entity.');
        }

        return $this->render('ChrisBabelBundle:Needs:show.html.twig', array(
            'entity'      => $entity,        ));
    }

    /**
     * Displays a form to create a new Needs entity.
     *
     */
    public function newAction()
    {
        $entity = new Needs();
        $form   = $this->createForm(new NeedsType(), $entity);

        return $this->render('ChrisBabelBundle:Needs:new.html.twig', array(
            'entity' => $entity,
            'form'   => $form->createView(),
        ));
    }

    /**
     * Creates a new Needs entity.
     *
     */
    public function createAction(Request $request)
    {
        $entity  = new Needs();

        $form = $this->createForm(new NeedsType(), $entity);
        $form->bind($request);

        if ($form->isValid()) {
            $em = $this->getDoctrine()->getManager();
            $em->persist($entity);
            $em->flush();

            return $this->redirect($this->generateUrl('needs_show', array('id' => $entity->getId())));
        }

        return $this->render('ChrisBabelBundle:Needs:new.html.twig', array(
            'entity' => $entity,
            'form'   => $form->createView(),
        ));
    }

    /**
     * Displays a form to edit an existing Needs entity.
     *
     */
    public function editAction($id)
    {
        $em = $this->getDoctrine()->getManager();

        $entity = $em->getRepository('ChrisBabelBundle:Needs')->find($id);

        if (!$entity) {
            throw $this->createNotFoundException('Unable to find Needs entity.');
        }

        $editForm = $this->createForm(new NeedsType(), $entity);

        return $this->render('ChrisBabelBundle:Needs:edit.html.twig', array(
            'entity'      => $entity,
            'edit_form'   => $editForm->createView(),
        ));
    }

    /**
     * Edits an existing Needs entity.
     *
     */
    public function updateAction(Request $request, $id)
    {
        $em = $this->getDoctrine()->getManager();

        $entity = $em->getRepository('ChrisBabelBundle:Needs')->find($id);

        if (!$entity) {
            throw $this->createNotFoundException('Unable to find Needs entity.');
        }

        $editForm = $this->createForm(new NeedsType(), $entity);
        $editForm->bind($request);

        if ($editForm->isValid()) {
            $em->persist($entity);
            $em->flush();

            return $this->redirect($this->generateUrl('needs_edit', array('id' => $id)));
        }

        return $this->render('ChrisBabelBundle:Needs:edit.html.twig', array(
            'entity'      => $entity,
            'edit_form'   => $editForm->createView(),
        ));
    }

    /**
     * Deletes a Needs entity.
     *
     */
    public function deleteAction($id)
    {
        $em = $this->container->get('doctrine')->getEntityManager();
        $metier = $em->find('ChrisBabelBundle:Needs', $id);
        if (!$metier)
        {
            throw new NotFoundHttpException("Need not found");
        }
        $em->remove($metier); $em->flush();
        return $this->redirect($this->generateUrl('needs'));
    }
}

<?php

namespace Chris\BabelBundle\Controller;

use Symfony\Component\HttpFoundation\Request;
use Symfony\Bundle\FrameworkBundle\Controller\Controller;

use Chris\BabelBundle\Entity\Trainings;
use Chris\BabelBundle\Form\TrainingsType;

/**
 * Trainings controller.
 *
 */
class TrainingsController extends Controller
{
    /**
     * Lists all Trainings entities.
     *
     */
    public function indexAction()
    {
        $em = $this->getDoctrine()->getManager();

        $entities = $em->getRepository('ChrisBabelBundle:Trainings')->findAll();

        return $this->render('ChrisBabelBundle:Trainings:index.html.twig', array(
            'entities' => $entities,
        ));
    }

    /**
     * Finds and displays a Trainings entity.
     *
     */
    public function showAction($id)
    {
        $em = $this->getDoctrine()->getManager();

        $entity = $em->getRepository('ChrisBabelBundle:Trainings')->find($id);

        if (!$entity) {
            throw $this->createNotFoundException('Unable to find Trainings entity.');
        }

        $deleteForm = $this->createDeleteForm($id);

        return $this->render('ChrisBabelBundle:Trainings:show.html.twig', array(
            'entity'      => $entity,
            'delete_form' => $deleteForm->createView(),        ));
    }

    /**
     * Displays a form to create a new Trainings entity.
     *
     */
    public function newAction()
    {
        $entity = new Trainings();
        $form   = $this->createForm(new TrainingsType(), $entity);

        return $this->render('ChrisBabelBundle:Trainings:new.html.twig', array(
            'entity' => $entity,
            'form'   => $form->createView(),
        ));
    }

    /**
     * Creates a new Trainings entity.
     *
     */
    public function createAction(Request $request)
    {
        $entity  = new Trainings();
        $form = $this->createForm(new TrainingsType(), $entity);
        $form->bind($request);

        if ($form->isValid()) {
            $em = $this->getDoctrine()->getManager();
            $em->persist($entity);
            $em->flush();

            return $this->redirect($this->generateUrl('trainings_show', array('id' => $entity->getId())));
        }

        return $this->render('ChrisBabelBundle:Trainings:new.html.twig', array(
            'entity' => $entity,
            'form'   => $form->createView(),
        ));
    }

    /**
     * Displays a form to edit an existing Trainings entity.
     *
     */
    public function editAction($id)
    {
        $em = $this->getDoctrine()->getManager();

        $entity = $em->getRepository('ChrisBabelBundle:Trainings')->find($id);

        if (!$entity) {
            throw $this->createNotFoundException('Unable to find Trainings entity.');
        }

        $editForm = $this->createForm(new TrainingsType(), $entity);
        $deleteForm = $this->createDeleteForm($id);

        return $this->render('ChrisBabelBundle:Trainings:edit.html.twig', array(
            'entity'      => $entity,
            'edit_form'   => $editForm->createView(),
            'delete_form' => $deleteForm->createView(),
        ));
    }

    /**
     * Edits an existing Trainings entity.
     *
     */
    public function updateAction(Request $request, $id)
    {
        $em = $this->getDoctrine()->getManager();

        $entity = $em->getRepository('ChrisBabelBundle:Trainings')->find($id);

        if (!$entity) {
            throw $this->createNotFoundException('Unable to find Trainings entity.');
        }

        $deleteForm = $this->createDeleteForm($id);
        $editForm = $this->createForm(new TrainingsType(), $entity);
        $editForm->bind($request);

        if ($editForm->isValid()) {
            $em->persist($entity);
            $em->flush();

            return $this->redirect($this->generateUrl('trainings_edit', array('id' => $id)));
        }

        return $this->render('ChrisBabelBundle:Trainings:edit.html.twig', array(
            'entity'      => $entity,
            'edit_form'   => $editForm->createView(),
            'delete_form' => $deleteForm->createView(),
        ));
    }

    /**
     * Deletes a Trainings entity.
     *
     */
    public function deleteAction(Request $request, $id)
    {
        $form = $this->createDeleteForm($id);
        $form->bind($request);

        if ($form->isValid()) {
            $em = $this->getDoctrine()->getManager();
            $entity = $em->getRepository('ChrisBabelBundle:Trainings')->find($id);

            if (!$entity) {
                throw $this->createNotFoundException('Unable to find Trainings entity.');
            }

            $em->remove($entity);
            $em->flush();
        }

        return $this->redirect($this->generateUrl('trainings'));
    }

    private function createDeleteForm($id)
    {
        return $this->createFormBuilder(array('id' => $id))
            ->add('id', 'hidden')
            ->getForm()
        ;
    }
} 
```

最后是表格：

```
<?php

namespace Chris\BabelBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;

class NeedsType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('firstname')
            ->add('lastname')
            ->add('trainingneedstart')
            ->add('readytowork')
            ->add('relatedproject')
            ->add('relatedactivity')
            ->add('relatedjob')
            ->add('relatedexperience')
            ->add('maintrainingplant')
// Ajout du formulaire imbriqué des trainings en collection
            ->add('trainings', 'collection', array('type' => new TrainingsType(),
                'allow_add' => true,
                'allow_delete' => true,
                'by_reference' => false,
                ))
        ;
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class' => 'Chris\BabelBundle\Entity\Needs'
        ));
    }

    public function getName()
    {
        return 'chris_babelbundle_needstype';
    }
}

<?php

namespace Chris\BabelBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;

class TrainingsType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('trainingstart')
            ->add('trainingend')
            ->add('trainingplant')
            ->add('training')
        ;
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class' => 'Chris\BabelBundle\Entity\Trainings'
        ));
    }

    public function getName()
    {
        return 'chris_babelbundle_trainingstype';
    }
} 
```

除了保存的培训不包含数据库中的需求 ID 之外，这大部分都有效，因此，在编辑需求时，我无法检索多个培训。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T18:59:31.013

最后我在法国 IRC 的帮助下找到了解决方案:)

我只需要像这样修改需求实体：

```
/**
     * Add trainings
     *
     * @param \Chris\BabelBundle\Entity\Trainings $trainings
     * @return Needs
     */
    public function addTraining(\Chris\BabelBundle\Entity\Trainings $trainings)
    {
        $this->trainings[] = $trainings;

        $trainings->setTraining($this);

        return $this;
    } 
```

# php - Wordpress 中的自定义页面模板

> ID：15050910
> 
> 赞同：1
> 
> 时间：2013-02-24T10:39:57.937
> 
> 标签：php, wordpress, fopen

我在 Wordpress 中使用自定义页面模板。我按照以下步骤制作它：

1.  将 /wp-content/themes/themename/ 目录中的 page.php 文件复制到另一个名为 submit.php 的文件中
2.  在开始时在 PHP 代码中插入模板名称。我无法在此处发布代码段，stackoverflow 没有显示它。

3.  现在它显示在页面模板下的 wp-admin 面板中。

我在 Wordpress 的自定义页面上有一个 HTML 表单。PHP 将读取最终用户在文本区域中输入的数据并将其写入存储在服务器上的文件中。

只要我以这种方式将此数据写入文件，一切都会顺利：

```
$fp=fopen("filename.txt","w") or die("Can't open the file"); 
```

但是，由于此文件将在路径中可用：

```
http://sitename.com/wordpress/wp-content/themes/themename/filename.txt 
```

因此，它将从 HTML 表单中读取的数据存储在当前目录中。相反，我想将其写入存储在另一个位置的文件中。比方说：

```
http://sitename.com/wordpress/files/filename.txt 
```

为此，我以这种方式修改了代码：

```
$fp=fopen("../../../files/filename.txt","w") or die("Can't open the file"); 
```

PHP 脚本因错误消息而死，无法打开文件。

我尝试将输出写入**wp-content/uploads**目录，如下所示。

```
$filename="../../uploads/".$cartype.".txt";
$fp=fopen($filename,"w") or die("can't open the file"); 
```

它给出了错误：无法打开文件。

$cartype 只是一个通过 HTML 表单输入读取的值。

我已经将上传文件夹的权限设置为 777。

我也试过这个：

```
$filename="/wp-content/uploads/".$cartype.".txt";
$fp=fopen(ABSPATH.$filename,"w") or die("can't open the file"); 
```

它再次给出错误：无法打开文件。

请注意，我稍后以这种方式将数据写入文件：

```
fwrite($fp,$data) 
```

此外，一旦我能够做到这一点，我想限制对“文件”目录的权限，以便只有 wordpress 管理员可以使用 FTP 或类似替代方法读取该目录中的文件。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T10:43:55.317

但是你可以`chmod 777 /path/to/wordpress/files/`，我会把它们放进去，`wp-content/uploads`因为那可能已经是可写的了。

# java - Java 旧应用程序第一次在 Eclipse 上运行

> ID：15050913
> 
> 赞同：-3
> 
> 时间：2013-02-24T10:40:18.700
> 
> 标签：java, eclipse, spring

我花了 14 天或更长时间来运行这个应用程序。

我的java版本是jdk1.6.0_39，tomcat是6.0，Spring是2.5.4。

当我将它导入 Eclipse 并在服务器上运行应用程序时，我得到了这个：

```
INFO: Initializing Spring root WebApplicationContext
ERROR [main] ContextLoader.initWebApplicationContext(215) | Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name '_filterChainProxyPostProcessor': BeanPostProcessor before instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.transaction.config.internalTransactionAdvisor': Cannot create inner bean '(inner bean)' of type [org.springframework.transaction.interceptor.TransactionInterceptor] while setting bean property 'transactionInterceptor'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)#1': Cannot resolve reference to bean 'transactionManager' while setting bean property 'transactionManager'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager' defined in class path resource [applicationContext-dao.xml]: Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [applicationContext-dao.xml]: Invocation of init method failed; nested exception is org.hibernate.AnnotationException: @OneToOne or @ManyToOne on com.itfuture.okapi.model.CrmEmail.crmContactPerson references an unknown entity: com.itfuture.okapi.model.CrmContactPerson
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:405)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:380)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:264)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:220)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:261)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:185)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164)
    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:881)
    at org.springframework.context.support.AbstractApplicationContext.registerBeanPostProcessors(AbstractApplicationContext.java:606)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:366)
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:255)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:199)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:45)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4206)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4705)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.transaction.config.internalTransactionAdvisor': Cannot create inner bean '(inner bean)' of type [org.springframework.transaction.interceptor.TransactionInterceptor] while setting bean property 'transactionInterceptor'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)#1': Cannot resolve reference to bean 'transactionManager' while setting bean property 'transactionManager'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager' defined in class path resource [applicationContext-dao.xml]: Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [applicationContext-dao.xml]: Invocation of init method failed; nested exception is org.hibernate.AnnotationException: @OneToOne or @ManyToOne on com.itfuture.okapi.model.CrmEmail.crmContactPerson references an unknown entity: com.itfuture.okapi.model.CrmContactPerson
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:230)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:122)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1244)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1008)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:470)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:409)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:380)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:264)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:220)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:261)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:185)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164)
    at org.springframework.aop.framework.autoproxy.BeanFactoryAdvisorRetrievalHelper.findAdvisorBeans(BeanFactoryAdvisorRetrievalHelper.java:87)
    at org.springframework.aop.framework.autoproxy.AbstractAdvisorAutoProxyCreator.findCandidateAdvisors(AbstractAdvisorAutoProxyCreator.java:98)
    at org.springframework.aop.aspectj.annotation.AnnotationAwareAspectJAutoProxyCreator.findCandidateAdvisors(AnnotationAwareAspectJAutoProxyCreator.java:83)
    at org.springframework.aop.aspectj.autoproxy.AspectJAwareAdvisorAutoProxyCreator.shouldSkip(AspectJAwareAdvisorAutoProxyCreator.java:105)
    at org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.postProcessBeforeInstantiation(AbstractAutoProxyCreator.java:266)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInstantiation(AbstractAutowireCapableBeanFactory.java:789)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.resolveBeforeInstantiation(AbstractAutowireCapableBeanFactory.java:760)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:399)
    ... 28 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)#1': Cannot resolve reference to bean 'transactionManager' while setting bean property 'transactionManager'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager' defined in class path resource [applicationContext-dao.xml]: Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [applicationContext-dao.xml]: Invocation of init method failed; nested exception is org.hibernate.AnnotationException: @OneToOne or @ManyToOne on com.itfuture.okapi.model.CrmEmail.crmContactPerson references an unknown entity: com.itfuture.okapi.model.CrmContactPerson
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:275) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T10:45:34.330

把它留在这里：

```
org.hibernate.AnnotationException: @OneToOne or @ManyToOne on com.itfuture.okapi.model.CrmEmail.crmContactPerson references an unknown entity: com.itfuture.okapi.model.CrmContactPerson 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T14:59:56.287

问题是您没有`com.itfuture.okapi.model.CrmContactPerson`在 sessionFactory bean 的列表属性中添加您的类。只需添加如下行：

```
 <bean class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean" id="sessionFactory">
    <property name="dataSource" ref="dataSource"/>
    <property name="annotatedClasses">
        <list>
            <value>com.itfuture.okapi.model.CrmContactPerson</value> // add this line
            .
            .
            .
        </list>
    </property>
    .
    .
    .
</bean> 
```

你完成了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T10:49:06.877

您在 CrmContactPerson 类的顶部有 @Entity 注释吗？因为看起来 CrmContactPerson 不是有效的实体候选者。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T22:53:24.133

但是当我与所有错误和warrnigs作斗争并通过tomcat或jetty运行项目时，我得到了这个例外。

[http://jyf3e7434b3d.nazwa.pl/consol/jetty-conole.txt](http://jyf3e7434b3d.nazwa.pl/consol/jetty-conole.txt)

你觉得问题出在哪里？

我可能没有正确的 lib jar 吗？

很抱歉这篇文章中的混乱，但我现在不使用 Java。这是我第一次运行项目。

# php - 从字符串中获取电子邮件 - 正则表达式语法 + preg_match_all

> ID：15050915
> 
> 赞同：10
> 
> 时间：2013-02-24T10:40:35.283
> 
> 标签：php, regex, preg-match, preg-match-all

我正在尝试从字符串中获取电子邮件：

```
$string = "bla bla pickachu@domain.com MIME-Version: balbasur@domain.com bla bla bla";
$matches = array();
$pattern = '\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b';
preg_match_all($pattern,$string,$matches);
print_r($matches); 
```

我得到的错误是：

> ***分隔符不能是字母数字或反斜杠***

我从这里得到了正则表达式语法[http://www.regular-expressions.info/email.html](http://www.regular-expressions.info/email.html)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-24T10:45:24.113

像这样

```
$pattern = '/[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b/i'; 
```

或更小的版本:)

```
$pattern = '/[a-z\d._%+-]+@[a-z\d.-]+\.[a-z]{2,4}\b/i'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T10:45:25.247

使用 PCRE 正则表达式函数时，需要用分隔符将模式括起来：

[PHP 分隔符](http://php.net/manual/en/regexp.reference.delimiters.php)

> 常用的分隔符是正斜杠 (/)、井号 (#) 和波浪号 (~)。以下是有效分隔模式的所有示例。

```
/foo bar/
#^[^0-9]$#
+php+
%[a-zA-Z0-9_-]% 
```

然后您必须将此行更正为：

```
$pattern = '/\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b/'; 
```

或者

```
$pattern = '#\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b#'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T10:44:58.747

您只需要将模式包装在适当的分隔符中，例如正斜杠。像这样：

```
$pattern = '/\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b/'; 
```

# android - 为什么导航列表返回到位置 0？

> ID：15050916
> 
> 赞同：2
> 
> 时间：2013-02-24T10:40:41.103
> 
> 标签：android, uinavigationbar

我有这个片段活动，它在其操作栏中使用下拉导航列表。根据选择的选项，它要么显示来自服务器的元素列表，要么调用其他活动（到目前为止，它显示了“其他活动”的面包块）。

事情是，我发现如果我选择说选项 2（第一个选项是 0），等待列表加载然后旋转设备，导航列表返回到位置 0（并加载了 0 选项列表）。我必须保存该选项，以便在旋转设备时，它仍会显示我选择的列表，但无论如何导航列表都会返回选项 0。如果我现在重新旋转设备，它会加载 0 选项列表（因为它是当时选择的一个）。

我的课从这个延伸

```
public class TapabookListNavigationalActivity extends TapabookBaseActivity 
implements OnNavigationListener {

protected Boolean  esUnTablet = true;
protected Fragment fragment1; 
protected Fragment fragment2;

protected ActionBar bar;
protected ActionBarDropDownAdapter dda;

public static final int ID_TAPAS_RECIENTES = 0;
public static final int ID_BUSCA_TAPA_MUNICIPIO = 1;
public static final int ID_BUSCA_TAPA_PROVINCIA = 2;
public static final int ID_BUSCA_TAPA= 3;
public static final int ID_BUSCA_BAR = 4;
public static final int ID_SUBE_TAPA= 5;

protected ArrayList<ActionBarMenuItem> opciones;
protected Dao mDao;
//protected static int ID_NAVIGATIONAL_THIS = 0;

public Dao getDao(){
    return mDao;
}

@Override
protected void checkUserToken() {
    if(ConfiguracionApp.getInstance().getTokenUsuario().equalsIgnoreCase("")){
        // no hay token
        Intent intent = new Intent(this, EntryFA.class);
        intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(intent);
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater menuInflater = getSupportMenuInflater();
    menuInflater.inflate(R.menu.menu, menu);

    // Calling super after populating the menu is necessary here to ensure that the
    // action bar helpers have a chance to handle this event.
    return super.onCreateOptionsMenu(menu);
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // si no está logado, que vuelva al login
    checkUserToken();

    bar = getSupportActionBar();
    loadNavigationList(Tapabook.getProvincia(),Tapabook.getMunicipio());

}

@Override
public boolean onNavigationItemSelected(int itemPosition, long itemId) {
    boolean handled = true;
    Tapabook.d("TapabookListNavigationalActivity onNavigationItemSelected : " + itemId);
    Intent intent = new Intent(this, TapaListFA.class);
    if(itemPosition == ID_TAPAS_RECIENTES || 
            itemPosition == ID_BUSCA_TAPA_MUNICIPIO || 
            itemPosition == ID_BUSCA_TAPA_PROVINCIA ||
            itemPosition == ID_BUSCA_TAPA){
        croutonInfo("ID_TAPAS_RECIENTES");
        intent.putExtra(TapaListFA.TYPE_LIST,ID_TAPAS_RECIENTES );
    }else if(itemPosition == ID_BUSCA_BAR ){
        croutonInfo("ID_BUSCA_BAR");
    }else if(itemPosition == ID_SUBE_TAPA ){
        croutonInfo("ID_SUBE_TAPA");
    }else{
        handled = false;
    }

    return handled;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    int itemId = item.getItemId();

    if (itemId == R.id.menu_item_acerca_de){

    }else if (itemId == R.id.menu_item_enviar_email){
        Intent intent = new Intent(Intent.ACTION_SENDTO);
        intent.setData(Uri.parse(Tapabook.MAILTO));
        intent.putExtra(android.content.Intent.EXTRA_SUBJECT, Tapabook.SUBJECT);
        startActivity(intent);
    }else if (itemId == R.id.menu_item_privacidad){
        FragmentManager fm = getSupportFragmentManager();
        PrivacyDF pdf = new PrivacyDF();

        pdf.show(fm, "fragment_privacy");

    }
    return false;
}

@Override
public void onGeolocalizador(String direccion, String provincia,
        String municipio, String region, float precisionMetros) {
    super.onGeolocalizador(direccion, provincia, municipio, region, precisionMetros);
    loadNavigationList(provincia,municipio);

}
protected void loadNavigationList(String provincia,String municipio){
    opciones = new ArrayList<ActionBarMenuItem>();
    opciones.add(
            new ActionBarMenuItem(
                    ID_TAPAS_RECIENTES, 
                    //R.drawable.ic_menu_buscar_bar,
                    getString(R.string.menu_nav_ver_últimas_tapas)
                    ));
    opciones.add(
            new ActionBarMenuItem(
                    ID_BUSCA_TAPA_MUNICIPIO, 
                    //R.drawable.ic_menu_buscar_tapa,
                    getString(R.string.menu_nav_ver_tapas_municipio) 
                    + " " + municipio
                    ));
    Tapabook.d("ActionBarMenuItem Municipio "  + municipio);
    opciones.add(
            new ActionBarMenuItem(
                    ID_BUSCA_TAPA_PROVINCIA, 
                    //R.drawable.ic_menu_buscar_tapa,
                    getString(R.string.menu_nav_ver_tapas_provincia).replace("%%%", provincia) 
                    //+ " " + provincia
                    ));
    Tapabook.d("ActionBarMenuItem Provincia "  + provincia);
    opciones.add(
            new ActionBarMenuItem(
                    ID_BUSCA_TAPA,
                    //R.drawable.ic_menu_buscar_tapa, 
                    getString(R.string.menu_nav_buscar_tapas)
                    ));
    opciones.add(
            new ActionBarMenuItem(
                    ID_BUSCA_BAR,
                    //R.drawable.ic_menu_subir_tapa,
                    getString(R.string.menu_nav_buscar_bares)
                    ));
    opciones.add(
            new ActionBarMenuItem(
                    ID_SUBE_TAPA,
                    //R.drawable.ic_menu_subir_tapa,
                    getString(R.string.menu_nav_subir_tapa)
                    ));

    dda 
    = new ActionBarDropDownAdapter(
            this, 
            R.layout.actionbar_menu_item, 
            opciones);
    bar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
    bar.setListNavigationCallbacks(dda, this);
}

} 
```

这是显示列表的类

```
public class TapaListFA extends TapabookListNavigationalActivity {

public static final String TYPE_LIST ="list_type";
public static final String LIST_LOADED  ="list_loaded";
public static final String NAVIGATION_POINT ="navigation_point";
private static boolean loadedList = false;
private static int navigationPoint = -1;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_tapa_list);

    Bundle extras= getIntent().getExtras();
    int listType = extras.getInt(TYPE_LIST);
    //
    Tapabook.d("pre-prepareList >> " + listType);
    if(!loadedList){
        Tapabook.d("TapaListFA.onCreate loadedList not loaded, load list");
        if(navigationPoint>=0){
            Tapabook.d("TapaListFA.onCreate navPoint: " + navigationPoint);
            setNavigationPoint(navigationPoint);
            //prepareList(navigationPoint);
        }else{
            Tapabook.d("TapaListFA.onCreate listType: " + listType);
            setNavigationPoint(listType);
            //prepareList(listType);
        }
        loadedList = true;
    }

    Tapabook.d("TapaListFA.onCreate fin");
}

public void prepareList(int type){
    Tapabook.d("TapaListFA.prepareList: " + type);
    ListaTapasParametros ltparam = new ListaTapasParametros();
    ltparam.setPagina(0);
    switch (type){
    case ID_BUSCA_TAPA_MUNICIPIO:
        ltparam.setProvincia(Tapabook.getProvincia());
        break;
    case ID_BUSCA_TAPA_PROVINCIA:
        ltparam.setProvincia(Tapabook.getMunicipio());
        break;
    case ID_BUSCA_TAPA:
        croutonInfo("Buscador");
        break;
    case ID_TAPAS_RECIENTES:
        break;
    default:
        Tapabook.wtf("¿qué tipo está entrando?  " + type);
    }
    Tapabook.d("TapaListFA.prepareList: showTapaList" + type);
    showTapaList(type, ltparam);
}

private void showTapaList(int typeOfList, ListaTapasParametros params) {
    Tapabook.d("TapaListFA.showTapaList" + typeOfList);
    FragmentManager fm = getSupportFragmentManager();
    FragmentTransaction ft = fm.beginTransaction();
    TapaListFragment tlf = new TapaListFragment();

    // Replace whatever is in the fragment_container view with this fragment,
    // and add the transaction to the back stack
    ft.replace(R.id.tla_container, tlf);
    ft.addToBackStack(null);
    Bundle args = new Bundle();
    args.putInt(TYPE_LIST, typeOfList);
    // Commit the transaction
    tlf.setRetainInstance(true);
    ft.commitAllowingStateLoss();
    tlf.setArguments(args);
    tlf.loadTapaList(typeOfList, params, 0);
    Tapabook.d("TapaListFA.showTapaList fin " + typeOfList);
}

public void startSearch(ListaTapasParametros params){
    showTapaList(ID_BUSCA_TAPA, params);
}

@Override
public boolean onNavigationItemSelected(int itemPosition, long itemId) {
    boolean handled = true;
    Intent intent;
    Tapabook.d("TapaListFA.onNavigationItemSelected : " + itemId);
    if(itemId == ID_TAPAS_RECIENTES  || itemId == ID_BUSCA_TAPA_MUNICIPIO 
            || itemId == ID_BUSCA_TAPA_PROVINCIA ){
        if(navigationPoint >= itemPosition){
            Tapabook.d("TapaListFA.onNavigationItemSelected prepareList navigationPoint : " + navigationPoint); 
            prepareList(navigationPoint );
        }else{
            Tapabook.d("TapaListFA.onNavigationItemSelected prepareList itemPosition: " + itemPosition);    
            prepareList(itemPosition);
        }

    }else if (itemId == ID_BUSCA_TAPA){
        FragmentManager fm = getSupportFragmentManager();
        TapaSearchDF tsdf = new TapaSearchDF();
        tsdf.setRetainInstance(true);
        tsdf.show(fm, "tapa_search_fragment");

    }else if(itemId == ID_BUSCA_BAR  || itemId == ID_SUBE_TAPA ){
        croutonInfo("ID_BUSCA_BAR/ID_SUBE_TAPA");
        Tapabook.d("TapaListFA.onNavigationItemSelected buscabar/subetapa : " + itemId);
        super.onNavigationItemSelected(itemPosition, itemId);
    }else{
        handled = false;
        Tapabook.d("TapaListFA.onNavigationItemSelected (unhandled) : " + itemId);
    }
    navigationPoint = (int) itemId;
    return handled;
}

@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    Tapabook.d("TapaListFA.onSaveInstanceState loadedList=" + loadedList);
    outState.putBoolean(LIST_LOADED,loadedList);
    navigationPoint = bar.getSelectedNavigationIndex();
    Tapabook.d("TapaListFA.onRestoreInstanceState navigationPoint=" + navigationPoint);
    outState.putInt(NAVIGATION_POINT, navigationPoint);
}

@Override
protected void onRestoreInstanceState(Bundle savedInstanceState) {
    super.onRestoreInstanceState(savedInstanceState);
    loadedList = savedInstanceState.getBoolean(LIST_LOADED);
    Tapabook.d("TapaListFA.onRestoreInstanceState loadedList=" + loadedList);
    navigationPoint = savedInstanceState.getInt(NAVIGATION_POINT);
    Tapabook.d("TapaListFA.onRestoreInstanceState navigationPoint=" + navigationPoint);
    setNavigationPoint(navigationPoint);

}

private void setNavigationPoint(int navPoint) {
    Tapabook.d("TapaListFA.setNavigationPoint navPoint: " + navPoint);
    if(navPoint>=0){
        bar.setSelectedNavigationItem(navPoint );
        navigationPoint = navPoint;
    }else
        Tapabook.w("TapaListFA.setNavigationPoint navPoint: " + navPoint);
}

} 
```

这是活动开始时的LOGCAT

```
02-24 11:37:23.491: D/TAPABOOK(31943): activities.TapaListFA.onCreate
02-24 11:37:23.511: D/TAPABOOK(31943): TapaListFA.onCreate loadedList not loaded, load list
02-24 11:37:23.511: D/TAPABOOK(31943): TapaListFA.onCreate listType: 0
02-24 11:37:23.511: D/TAPABOOK(31943): TapaListFA.setNavigationPoint navPoint: 0
02-24 11:37:23.511: D/TAPABOOK(31943): TapaListFA.onCreate fin
02-24 11:37:23.511: D/TAPABOOK(31943): activities.TapaListFA.onStart
02-24 11:37:23.511: D/TAPABOOK(31943): activities.TapaListFA.onResume
02-24 11:37:24.182: D/TAPABOOK(31943): TapaListFA.onNavigationItemSelected : 0
02-24 11:37:24.182: D/TAPABOOK(31943): TapaListFA.onNavigationItemSelected prepareList navigationPoint : 0
02-24 11:37:24.182: D/TAPABOOK(31943): TapaListFA.prepareList: 0
02-24 11:37:24.182: D/TAPABOOK(31943): TapaListFA.prepareList: showTapaList0
02-24 11:37:24.182: D/TAPABOOK(31943): TapaListFA.showTapaList0
02-24 11:37:24.212: D/TAPABOOK(31943): TapaListFA.showTapaList fin 0
02-24 11:37:24.882: D/TAPABOOK(31943): TapaListFA.onNavigationItemSelected : 0
02-24 11:37:24.882: D/TAPABOOK(31943): TapaListFA.onNavigationItemSelected prepareList navigationPoint : 0
02-24 11:37:24.882: D/TAPABOOK(31943): TapaListFA.prepareList: 0
02-24 11:37:24.882: D/TAPABOOK(31943): TapaListFA.prepareList: showTapaList0
02-24 11:37:24.882: D/TAPABOOK(31943): TapaListFA.showTapaList0
02-24 11:37:24.882: D/TAPABOOK(31943): TapaListFA.showTapaList fin 0
02-24 11:37:24.923: D/TAPABOOK(31943): TapaListFA.onNavigationItemSelected : 0
02-24 11:37:24.923: D/TAPABOOK(31943): TapaListFA.onNavigationItemSelected prepareList navigationPoint : 0
02-24 11:37:24.923: D/TAPABOOK(31943): TapaListFA.prepareList: 0
02-24 11:37:24.923: D/TAPABOOK(31943): TapaListFA.prepareList: showTapaList0
02-24 11:37:24.923: D/TAPABOOK(31943): TapaListFA.showTapaList0
02-24 11:37:24.923: D/TAPABOOK(31943): TapaListFA.showTapaList fin 0 
```

在这里，我在下拉列表中选择选项 1

```
02-24 11:38:04.234: D/TAPABOOK(31943): TapaListFA.onNavigationItemSelected : 1
02-24 11:38:04.234: D/TAPABOOK(31943): TapaListFA.onNavigationItemSelected prepareList itemPosition: 1
02-24 11:38:04.234: D/TAPABOOK(31943): TapaListFA.prepareList: 1
02-24 11:38:04.234: D/TAPABOOK(31943): TapaListFA.prepareList: showTapaList1
02-24 11:38:04.244: D/TAPABOOK(31943): TapaListFA.showTapaList1
02-24 11:38:04.244: D/TAPABOOK(31943): TapaListFA.showTapaList fin 1 
```

现在我旋转设备。它显示了正确的列表，但下拉菜单返回选项 0

```
02-24 11:38:25.838: D/TAPABOOK(31943): activities.TapaListFA.onPause
02-24 11:38:25.838: D/TAPABOOK(31943): TapaListFA.onSaveInstanceState loadedList=true
02-24 11:38:25.838: D/TAPABOOK(31943): TapaListFA.onRestoreInstanceState navigationPoint=1
02-24 11:38:25.848: D/TAPABOOK(31943): activities.TapaListFA.onStop
02-24 11:38:25.888: D/TAPABOOK(31943): activities.TapaListFA.onCreate
02-24 11:38:25.948: D/TAPABOOK(31943): TapaListFA.onCreate fin
02-24 11:38:25.968: D/TAPABOOK(31943): activities.TapaListFA.onStart
02-24 11:38:25.968: D/TAPABOOK(31943): TapaListFA.onRestoreInstanceState loadedList=true
02-24 11:38:25.968: D/TAPABOOK(31943): TapaListFA.onRestoreInstanceState navigationPoint=1
02-24 11:38:25.968: D/TAPABOOK(31943): TapaListFA.setNavigationPoint navPoint: 1
02-24 11:38:25.968: D/TAPABOOK(31943): activities.TapaListFA.onResume
02-24 11:38:26.028: D/TAPABOOK(31943): TapaListFA.onNavigationItemSelected : 1
02-24 11:38:26.028: D/TAPABOOK(31943): TapaListFA.onNavigationItemSelected prepareList navigationPoint : 1
02-24 11:38:26.028: D/TAPABOOK(31943): TapaListFA.prepareList: 1
02-24 11:38:26.028: D/TAPABOOK(31943): TapaListFA.prepareList: showTapaList1
02-24 11:38:26.028: D/TAPABOOK(31943): TapaListFA.showTapaList1
02-24 11:38:26.028: D/TAPABOOK(31943): TapaListFA.showTapaList fin 1
02-24 11:38:26.358: D/TAPABOOK(31943): TapaListFA.onNavigationItemSelected : 0
02-24 11:38:26.358: D/TAPABOOK(31943): TapaListFA.onNavigationItemSelected prepareList navigationPoint : 1
02-24 11:38:26.358: D/TAPABOOK(31943): TapaListFA.prepareList: 1
02-24 11:38:26.358: D/TAPABOOK(31943): TapaListFA.prepareList: showTapaList1
02-24 11:38:26.358: D/TAPABOOK(31943): TapaListFA.showTapaList1
02-24 11:38:26.358: D/TAPABOOK(31943): TapaListFA.showTapaList fin 1 
```

为什么它不断回到选项0？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T10:51:15.473

看看这个：

> 除非您另外指定，否则配置更改（例如屏幕方向、语言、输入设备等的更改）将导致您当前的活动被破坏，并通过正常的活动生命周期过程
> 
> 在某些特殊情况下，您可能希望根据一种或多种类型的配置更改绕过重新启动活动。这是通过清单中的[android:configChanges](http://developer.android.com/reference/android/R.attr.html#configChanges)属性完成的。对于您说您在那里处理的任何类型的配置更改，您将收到对当前活动的 [onConfigurationChanged(Configuration)](http://developer.android.com/reference/android/app/Activity.html#onConfigurationChanged%28android.content.res.Configuration%29)方法的调用，而不是重新启动。但是，如果配置更改涉及您未处理的任何内容，则活动仍将重新启动，并且 不会调用[onConfigurationChanged(Configuration) 。](http://developer.android.com/reference/android/app/Activity.html#onConfigurationChanged%28android.content.res.Configuration%29)

# c++ - QML Listview在字体更改时显示统一宽度

> ID：15050917
> 
> 赞同：1
> 
> 时间：2013-02-24T10:40:45.427
> 
> 标签：c++, qml, qt5

我有一个简单的列表视图。我需要用户能够操纵字体大小（视觉障碍问题）。QML 非常乐意为 listView 项目计算新的宽度和高度，但由于字符串的长度不同，导致 listView 看起来像堆叠得很糟糕的盒子。我需要的是让它看起来像一个最长字符串宽度的矩形，如果它到达窗口的边缘则换行。我想我使 listView 项目背景透明并计算 listView 所在矩形的宽度以适应更新的字体大小。我尝试了几种方法来做到这一点，但都没有成功。

有什么线索吗？下面的代码（来自 c++ 的数据）

```
import QtQuick 2.0

Rectangle
{
id: theMenu
property double fontSize: menuManager.menuFontPointSize
property double menuWidth: menuManager.menuItemHeight
Component
{
    id: menuEntryDelegate

    Rectangle
    {
        id: menuItemContainer
        width: menuEntry.width
        height: menuEntry.height * 1.25
        anchors.top: prompts.bottom
        property double fontSize: theMenu.fontSize

        state: ListView.isCurrentItem ? "selected" : "notselected"

        Text
        {
            id: menuEntry
            font.pointSize: fontSize
            //width: parent.width
            wrapMode: Text.WordWrap
            text: displayText
            clip: true
        }

        MouseArea
        {
            hoverEnabled: false
            anchors.fill: parent
            onClicked: menuHolder.currentIndex = index
            onDoubleClicked: menuManager.displayMenu(menuHolder.currentIndex)
        }

        states:
        [
            State
            {
                name: "selected"
                PropertyChanges
                {
                    target: menuItemContainer
                    color: "#FAFCD9"
                }
                PropertyChanges
                {
                    target: icon
                    source: iconUrl
                }
                PropertyChanges
                {
                    target: prompts
                    text: getPrompt()
                }
                PropertyChanges
                {
                    target: menuEntry
                    color: "black"
                }
            },

            State
            {
                name: "notselected"
                PropertyChanges
                {
                    target: menuItemContainer
                    color: "black"
                }
                PropertyChanges
                {
                    target: menuEntry
                    color: "white"
                }
            },
            State
            {
                name: "hidden"
                PropertyChanges
                {
                    target: menuItemContainer
                    color: "green"
                }
            }

        ]

    }
}

Rectangle
{
    id: menuContainer
    width: menuManager.menuWidth
    height: (50 * 9) //TBD
    anchors.horizontalCenter: parent.horizontalCenter
    anchors.top: prompts.bottom
    color: "purple"
    ListView
    {
        id: menuHolder
        model: menuModel
        anchors.fill: parent
        opacity: 1

       /* header: Rectangle
        {
            TextBox {}
    }*/
        header: Rectangle
        {
            width: menuHolder.width
            height: 50
            color: "#2A51A3"

           Text
            {
               id: header
               anchors.centerIn: parent

               text: "FIX" + currentMenu.displayText
               font.pointSize: currentMenu.fontPointSize
               color: "green"
               width: parent.width
               wrapMode: Text.WordWrap
            }
        }

        delegate: menuEntryDelegate
        focus: true

        add: Transition
        {
            NumberAnimation { properties: "x,y" }
        }

        Keys.onPressed:
        {
            if(event.key === Qt.Key_F1)
            {
                theMenu.z = -1
            }
            else if(event.key === Qt.Key_F3)
            {
                theMenu.z = 1
            }
            else if(event.key === Qt.Key_F2)
            {
                menuManager.menuFontPointSize *= menuManager.scale
                theMenu.fontSize = menuManager.menuFontPointSize

            }
            else if(event.key === Qt.Key_F10)
            {
                scaleFactor -= 0.1
                menuContainer.scale = scaleFactor
                promptsContainer.scale = scaleFactor
                //promptsContainer.z = 1
            }
            else if(event.key === Qt.Key_Right)//zoom in
            {
                menuContainer.x +=10
            }
            else if(event.key === Qt.Key_Left)//zoom out
            {
                menuContainer.x -=10
            }
            else if(event.key === Qt.Key_Home)//go back to Main menu
            {
                menuManager.displayMainMenu();
                theMenu.fontSize = menuManager.menuFontPointSize
            }
            //Ways to select a menu item
            else if((event.key >= Qt.Key_1 && event.key <= Qt.Key_9)
                    || event.key === Qt.Key_Return || event.key === Qt.Key_Enter)
            {
                if(event.key >= Qt.Key_1 && event.key <= Qt.Key_9)
                {
                    menuHolder.currentIndex = event.key  - Qt.Key_1;
                }
                menuManager.displayMenu(menuHolder.currentIndex);
                theMenu.fontSize = menuManager.menuFontPointSize
            }
            menuEntryDelegate.updateIcon()
        }
    }
} 
```

}@

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T21:04:52.443

只需使用：

```
width: parent.width; 
```

在`menuItemContainer`委托组件中的 Rectangle 元素中，填充 ListView 宽度。

然后添加：

```
anchors { left: parent.left; right: parent.right } 
```

给`menuEntry` Text 元素设置一个最大尺寸，这样它就可以知道它什么时候必须换行（否则它将无限向右延伸）。

# crystal-reports - 水晶报表排序总和值

> ID：15050923
> 
> 赞同：1
> 
> 时间：2013-02-24T10:41:13.010
> 
> 标签：crystal-reports, crystal-reports-2008

您好我正在使用 Crystal Report 2008，我的设计是这样的：

```
 Report header
 Page Header
 Group Header#1 (group by Customer) 
 Group Header#2 (group by Size) (S, M, L)
 Details
 Group Header#2 (group by Size) (S, M, L)
 Group Header#1 (group by Customer) 
```

因为我想按客户和大小获取值，所以我将汇总字段放在组标题 2 中，所以我有这样的输出：

```
 Customer          Size          Amount
    ----------------------------------------
    CUS-A             SMALL          23500
    CUS-A             MEDIUM         33000
    CUS-B             SMALL          25500
    CUS-B             LARGE          22500
    CUS-C             SMALL          50500
    CUS-C             MEDIUM         20500
    CUS-C             LARGE          15500 
```

输出是正确的，但是如何按降序对金额进行排序，输出应该是这样的：

```
Customer          Size          Amount
    ----------------------------------------
    CUS-C             SMALL          50500
    CUS-A             MEDIUM         33000
    CUS-B             SMALL          25500
    CUS-A             SMALL          23500
    CUS-B             LARGE          22500
    CUS-C             MEDIUM         20500
    CUS-C             LARGE          15500 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T16:51:55.773

您要做的第一件事是将报告更改为使用单个组而不是两个单独的组。创建一个结合了客户和大小的新公式，并改用它：`{Table.Customer} + ' ' + {Table.Size}`

现在，进入“组排序专家”（在“报告”菜单下）。在“For this group sort”下拉菜单中，选择“All”，基于“Sum of {Table.Amount}”。（请注意，这是假设组金额总和已经在您的报告中。如果不是，您需要添加它。）最后，选择“降序”单选按钮。

# android - 复制到图库的Android透明图像获得纯黑色背景

> ID：15050930
> 
> 赞同：3
> 
> 时间：2013-02-24T10:42:30.680
> 
> 标签：android, png, gallery, android-imageview, png-transparency

我使用以下语句将图像从资产复制到图库应用程序，效果很好：

```
MediaStore.Images.Media.insertImage(getContentResolver(), myBitmap, myTitle ,  myDescription); 
```

图像是具有透明背景的 png 文件。当我将它们从资产加载到例如 ImageView 时，它们会正确显示。

问题是，以前导入图像的透明背景在画廊中变成了纯黑色。

png 是由 gimp 创建的 png24。我还尝试了由 Apple 的预览应用程序添加的透明 gif 和带有透明度的 png，结果相同。

为什么会发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-26T13:25:10.927

我知道这是一个老问题，但我也遇到了同样的问题。问题是`MediaStore.Images.Media.insertImage`存储文件的 MIME_TYPE 为“image/jpeg”，而 jpeg 不支持透明度。

一种解决方案是制作您自己的使用另一种图像格式的内容提供程序。[毕加索](http://square.github.io/picasso/)图像库可能也值得一看。

# unit-testing - ValidationContext 的单元测试失败了？

> ID：15050933
> 
> 赞同：0
> 
> 时间：2013-02-24T10:42:42.207
> 
> 标签：unit-testing, validation, domain-driven-design

我正在尝试对具有基类的对象进行单元测试验证。我预计 3 个属性（电子邮件、电话和技能>0）验证失败，但测试失败。

基类

```
public abstract class Person : Entity
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string UserName { get; set; }
    public string FullName { get { return string.Format("{0} {1}", FirstName, LastName); } }
    public string Email { get; set; }
    public string Phone { get; set; }
    public DateTime DateAdded { get; set; }
    public bool Active { get; set; }        
} 
```

派生类

```
 public class Contractor : Person, IValidatableObject
{
    public Address Address { get; set; }
    public List<Skill> SkillSet { get; set; }
    public DateTime? NextAvailableDate { get; set; }

    public Contractor()
    {

    }

    public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {
        if (string.IsNullOrWhiteSpace(base.FirstName))
            yield return new ValidationResult("The First Name field cannot be empty.");

        if (string.IsNullOrWhiteSpace(base.LastName))
            yield return new ValidationResult("The Last Name field cannot be empty.");

        if (string.IsNullOrWhiteSpace(base.Email))
            yield return new ValidationResult("The Email field cannot be empty.");

        if (string.IsNullOrWhiteSpace(base.Phone))
            yield return new ValidationResult("The Phone field cannot be empty.");

        if (SkillSet.Count() < 1)
            yield return new ValidationResult("A contractor must have at least one skill.");
    } 
```

测试

```
[TestMethod]
    public void contractor_is_missing_email_phone_skill_when_created()
    {
        //Arrange
        Contractor contractor = new Contractor { FirstName = "abc", LastName = "def" };

        //Act
        ValidationContext context = new ValidationContext(contractor);
        IEnumerable<ValidationResult> result = contractor.Validate(new ValidationContext(contractor));
        List<ValidationResult> r = new List<ValidationResult>(result);

        //Assert
        Assert.IsTrue(r.Count == 3);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T14:29:27.677

创建新承包商时初始化您的列表。

```
public Contractor()
   {
      SkillSet = new List<Skill>();
   } 
```

# android - 相机意图不返回文件路径

> ID：15050942
> 
> 赞同：0
> 
> 时间：2013-02-24T10:43:37.450
> 
> 标签：android, android-intent, camera

我的相机 Intent 有问题。它将图片保存到存储中，但不会将文件路径返回给我的活动。当我删除 EXTRA_OUTPUT 时，它会返回文件路径，但是图像的尺寸非常小。是否有任何解决方案可以在不使用 EXTRA_OUTPUT 的情况下获取原始尺寸的图片？

这是我的代码：

```
 public void onClick(View arg0) {
    switch (arg0.getId()) {     
     case R.id.btnImageCapture:
       preinsertedUri = getContentResolver().insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, new ContentValues());
        Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
        intent.putExtra(MediaStore.EXTRA_OUTPUT, preinsertedUri);
         startActivityForResult(intent, OPEN_CAMERA);
       break;
       }
    } 
```

* * *

```
 @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
     super.onActivityResult(requestCode, resultCode, data);
     switch(requestCode){
     case OPEN_CAMERA:
         if (resultCode == RESULT_OK && data != null) {
                  Uri imageUri = null;
                  imageUri = data.getData();
                 if(imageUri == null && preinsertedUri != null){
                  imageUri = preinsertedUri;
                 }
                  String[] filePathColumn = { MediaStore.Images.Media.DATA };
                  Cursor cursor = getContentResolver().query(imageUri, filePathColumn, null, null, null);
                  int columnIndex = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
                  cursor.moveToFirst();
                  filePath = cursor.getString(columnIndex);
                try {
                 Bitmap photo = (Bitmap) data.getExtras().get("data");
                 ByteArrayOutputStream bytes = new ByteArrayOutputStream();
                 photo.compress(Bitmap.CompressFormat.JPEG, 100, bytes);
                         File f = new File(filePath);
                         f.createNewFile();
                         FileOutputStream fo = new FileOutputStream(f);
                         fo.write(bytes.toByteArray());
                         fo.close();
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                 break;
          } 
       }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T10:46:02.810

试试这个可能对你有帮助。

当我从相机捕捉照片时，我使用光标实现逻辑并迭代光标并获取从相机捕捉的最后一张照片路径。

它给出了从相机拍摄的最后一张照片的路径。

```
Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
startActivityForResult(cameraIntent, CAMERA_REQUEST_CODE);

Cursor cursor = getContentResolver().query(Media.EXTERNAL_CONTENT_URI, new String[]{Media.DATA, Media.DATE_ADDED, MediaStore.Images.ImageColumns.ORIENTATION}, Media.DATE_ADDED, null, "date_added ASC");
if(cursor != null && cursor.moveToFirst())
{
    do {
        uri = Uri.parse(cursor.getString(cursor.getColumnIndex(Media.DATA)));
        photoPath = uri.toString();
    }while(cursor.moveToNext());
    cursor.close();
} 
```

# ios - 蓝牙 LE iOS - 如何使用 scanForPeripheralsWithServices:options 仅查找最近的设备：

> ID：15050945
> 
> 赞同：1
> 
> 时间：2013-02-24T10:43:48.653
> 
> 标签：ios, ios5, bluetooth, core-bluetooth

我试图在扫描外围设备时控制 LE BT 信号强度。问题是当我附近有很多外围设备时，我只想检测离我最近的外围设备。我在用

```
scanForPeripheralsWithServices:options: 
```

我可以降低设备的 BT 功率，以便扫描只显示最近的设备吗？我正在尝试使用 RSSI 参数过滤远端外围设备，但它不一致。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T07:46:59.757

我不认为这是可能的。唯一的限制是搜索具有特定服务的外围设备。仅连接最近的外围设备由您决定。

# php - 当我的应用发布到 Facebook 时，大多数手机上都不会显示“通过我的应用”

> ID：15050951
> 
> 赞同：0
> 
> 时间：2013-02-24T10:44:12.627
> 
> 标签：php, facebook, facebook-graph-api, curl, libcurl

我们在 Facebook 上有一个应用程序。即使用户处于离线状态，它也会代表用户每小时发布一次报价。但是当 php 脚本运行以发布到用户时间线时，我实际上面临着 2 个严重的问题。

首先也是最紧迫的是，当您从 BlackBerry、Samsung 和 iphone 等新的触摸手机阅读新闻提要时，用户名下不会显示“通过应用程序名称”。这一点非常关键，因为应用用户不喜欢在没有“通过应用名称”的情况下直接代表他们发布内容。

其次，脚本需要将近 40 秒才能执行，但是到目前为止我只有 15 个用户。请帮忙。这是我的 PHP 代码：

```
<?PHP
require_once '../inc/config.php';

$dbh = new PDO('mysql:dbname=' . $db_name . ';host=' . $db_host . ';charset=utf8', $db_username, $db_password);

$dbh->setAttribute(PDO::ATTR_EMULATE_PREPARES, 1);
$dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

$sqlid  = "SELECT fb_id FROM offline_access_users";
$sqlmsg = "SELECT msg_id,message FROM fb_messages WHERE msg_id = (SELECT MAX(msg_id) FROM fb_messages WHERE sent = 'No' ORDER BY msg_id)";

try {
    $stmt = $dbh->prepare($sqlid);

    $stmt->execute();

    $msg = $dbh->prepare($sqlmsg);

    $msg->execute();

    $msg_to = $msg->fetch();

    $msg_tosend = $msg_to['message'];

    $msg_tosendid = $msg_to['msg_id'];
}
catch (PDOException $e) {
    echo $e->getMessage();
    die();
}

while ($value = $stmt->fetch()) {
    $id  = $value['fb_id'];
    $url = "https://graph.facebook.com/" . $id . "/feed";

    $ch = curl_init();

    $attachment = array(

        'access_token' => $access_token,
        'message' => $msg_tosend,
        'app_id' => $fb_app_id,
        'from' => $fb_app_id,
        'display' => "touch",
        'to' => "",
        'redirect_uri' => "http://mydomain.com",
        'link' => "",
        'picture' => "",
        'source' => "",
        'caption' => "",
        'description' => "",
        'actions' => ""
    );

    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_FRESH_CONNECT, TRUE);
    curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 0);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
    curl_setopt($ch, CURLOPT_POST, TRUE);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $attachment);

    $result = curl_exec($ch);
}

curl_close($ch);

$sqlupdate = "UPDATE fb_messages SET sent = 'Yes' WHERE msg_id=" . $msg_tosendid;

try {
    $stmt = $dbh->prepare($sqlupdate);

    $stmt->execute();
}
catch (PDOException $e) {
    echo $e->getMessage();
    die();
}

$db = null;

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T15:00:43.153

1-第一个问题“通过应用程序名称”主要不支持手机、平板电脑的官方 Facebook 应用程序。但是您仍然可以从`News Feed`Web 浏览器中看到它，这是 Facebook 的政策，不是您的问题。就像 Twitter 的官方网站一样。

2-这是您的代码和数据库查询的优化问题！，既然你使用PHP，为什么你不使用`Facebook PHP SDK`？

**`PST`**：我知道你真正在做什么，当你拥有大量订阅者时，你会面临很多问题，你必须优化你的发布算法，**不要**试图同时向所有用户发送相同的帖子。时间，你的应用程序将被**禁止**。

我以前做过这个脚本，所有这些问题都遇到了我，希望你绕过它们。

# c# - FileUpload 在本地运行良好，但在我发布项目时效果不佳

> ID：15050952
> 
> 赞同：0
> 
> 时间：2013-02-24T10:44:20.467
> 
> 标签：c#, asp.net, file-upload

我已经使用 asp.net c# 开发了一个 Web 应用程序。有一个 FileUpload Control 必须上传人员照片。但是当我发布该网站时，它无法正常工作！虽然在本地版本上没有看到任何问题。我一直在尝试以下方法：

1.  检查 web.config 中的 HttpRuntime => executionTime="60", maxRequestLength="4097151"
2.  在网上搜索并没有任何结果

这是我的代码：

```
fupImage.SaveAs(Server.MapPath(@"\UploadedImages\" + fupImage.FileName));
fupImage.SaveAs(Server.MapPath(@"\UploadedImages\" + fupImage.FileName)); 
```

这可能有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T10:55:46.420

确保您已设置 form enctype="multipart/form-data" 并且您保存的路径确实存在并且您有权限。你可以通过调试检查它..

这是完整的代码

```
<form id="Form1" method="post" action="/home/save" enctype="multipart/form-data">
   <input type="file" name="file" />
    <input type="submit" value="OK" />
</form>

 [HttpPost]
    public ActionResult Save(HttpPostedFileBase file)
    {
        // Verify that the user selected a file
        if (file != null && file.ContentLength > 0) 
        {
            // extract only the fielname
            var fileName = Path.GetFileName(file.FileName);
            // store the file inside ~/App_Data/uploads folder
            var path = Path.Combine(Server.MapPath("~/UploadedImages"), fileName);
            file.SaveAs(path);
        }
        // redirect back to the index action to show the form once again
        return RedirectToAction("Index");        
    } 
```

# qt - QT：Qtableview 换行文本

> ID：15050953
> 
> 赞同：0
> 
> 时间：2013-02-24T10:44:25.990
> 
> 标签：qt, qtableview, qstandarditemmodel

我正在使用 Qt 的 QtableView。我面临一个问题。我无法修复内容以完成单元格。就我而言，我有固定的列大小，并且可以拉伸行。以下是示例代码

```
#include <QApplication>
#include"QStandardItemModel"
#include"QTableView"
#include"QStandardItem"

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);

              QStandardItemModel *model = new QStandardItemModel(8,3);
              QTableView * pQTableView = new QTableView();

            for(int r = 0;r<8;r++)
                    for(int c = 0; c<3; c++)
                    {
                       QModelIndex index1= model->index(r,c);

                       QVariant  value("Swaminarayan maharaj");
                        model->setData(index1, value,Qt::DisplayRole );

                       QVariant  value1( Qt::AlignCenter);

                        model->setData(index1, value1,Qt::TextAlignmentRole );

                    }

            pQTableView->resize(400,400);

        pQTableView->setModel(model);

        pQTableView->setColumnWidth(0, 100);
        pQTableView->setColumnWidth(1, 100);
        pQTableView->setColumnWidth(2, 100);
pQTableView->show();

    return a.exec();
} 
```

如您所见，我希望每个单元格都有“Swaminarayan maharaj”。但是 Swaminarayan 应该在单元格的第一行，而“maharaj”在第二行。简而言之，每个单元格以两行显示内容。

在以下链接中，我找到了 Qt::TextWordWrap 但我无法在我的代码中使用
[http://www.qtcentre.org/threads/27839-For-Qt-4-6-x-how-to-auto-size -text-to-fit-in-a-specified-width](http://www.qtcentre.org/threads/27839-For-Qt-4-6-x-how-to-auto-size-text-to-fit-in-a-specified-width)

# php - 在while循环中点击AJAX更新数据库

> ID：15050955
> 
> 赞同：0
> 
> 时间：2013-02-24T10:44:35.863
> 
> 标签：php, mysql, ajax, wordpress, while-loop

我正在为一些自定义媒体审查目的开发 WordPress 系统插件。我已经设置了大部分东西，但还有一些。

目前我坚持点击更新数据库（onlink）以使用 AJAX 更新表值。参考下面的代码。它有 while 循环，我想在循环中使用 AJAX 来更新媒体状态。我不确定这是正确的方法，还是有另一种简单的方法可以实现。任何建议将不胜感激。

**代码：**

```
<?php
$media_item = mysql_query($media_sql);

if ($media_item) {

echo '<ul class="rm-media-list">'; 

    while ($media = mysql_fetch_array($media_item)) {

        $m_uid = $media['user_id'];
        $m_uname = $media['user_login'];

        $media_class = new q2a_review_media;
        $thumb_path = $media_class->rm_thumbnail_url($pid,$m_uid);
        $media_url = $media_class->rm_media_url($pid,$m_uid);
        $mediaid = $media['id'];
        $image_name = $media['image_name'];                                

        echo '<li>';
        echo '<span class="rm-media-user"><a href="'.admin_url( 'user-edit.php?user_id=' . $m_uid, 'http' ).'">',$m_uname,'</a></span>';
        echo '<a href="'.$media_url.$image_name.'" rel="lightbox['.$pid.']" title="Post: '.$pid.' |  '.$ptitle.' | Image: '.$image_name.' | by: '.$m_uname.' " ><img src="'.$thumb_path.$image_name.'" alt="'.$media['image_name'].'" width="56" class="rm-thumbs-list" /></a>';
        echo '<span class="rm-action-links"><a href="#" id="approve-'.$mediaid.'" >Approve</a> | <a href="#" id="delete-'.$mediaid.'" >Delete</a></span>';                            
        echo '</li>';
    }

} else {

    echo 'No media found';

}

echo '</ul>';                        
?> 
```

**数据库表：** ![在此处输入图像描述](../Images/e0c352794bf6af8d46ff338dd0a712a3.png)

**我的插件页面输出** ![在此处输入图像描述](../Images/a9688426991aff531b9af7f097d3f3fb.png)

在上图中，您可以看到名为`Approve`|的链接 `Delete`在这里，我想使用 ajax 与数据库进行交互。当管理员点击它时，它会将列`Approve`中的值从 0 更新为 1，然后它将从目录中删除行和图像。希望我发布了足够的数据来理解。如果没有，请告诉我，我会尝试添加更多信息。`status``Delete`

百万谢谢.... :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T23:06:32.747

首先，您的语句`echo '</ul>';`需要在`if`循环的一部分。

您的 AJAX 代码不必在 while 循环内。以下是您可以如何操作代码以发出 AJAX 请求。

让我们先稍微修改一下您的`<a>`标签：

```
<a href="#" class="approve-button" id="'.$mediaid.'">Approve</a> 
```

此更改允许您拥有一组带有`class="approve-button"`和`id="the id of the item you want to approve"`

现在，我们可以使用一些 JavaScript 来发出 AJAX 请求。为方便起见，我将使用 jQuery 发出此请求：

```
<script type="text/javascript">

//Attach an onclick handler to each of your buttons that are meant to "approve"
$('.approve-button').click(function(){

   //Get the ID of the button that was clicked on
   var id_of_item_to_approve = $(this).attr("id");

   Make an AJAX request
   $.ajax({
      url: "some-page.php", //This is the page where you will handle your SQL insert
      type: "post",
      data: "id=" + id_of_item_to_approve, //The data your sending to some-page.php
      success: function(){
          console.log("AJAX request was successfull");
      },
      error:function(){
          console.log("AJAX request was a failure");
      }   
    });

});

</script> 
```

就目前`some-page.php`而言，这是您需要做的：

*   拥有将更改数据库的 SQL 语句
*   要访问附加到单击的批准按钮的 ID，您可以使用`$_POST`数组，因为 AJAX 请求的类型是“post”。具体来说，这是存储您的 ID 的位置：`$_POST['id']`

* * *

仅供参考：要在您的页面上导入 jQuery，您可以使用：

```
<script src='http://code.jquery.com/jquery-latest.min.js' type='text/javascript'></script> 
```

# php - 使用 Javascript / PHP 获取用户时区字符串？

> ID：15050957
> 
> 赞同：5
> 
> 时间：2013-02-24T10:44:58.633
> 
> 标签：php, timezone

我试图在 singup 上将用户的时区作为字符串。例子：

```
$timezone = "Asia/Tel_Aviv"; 
```

在研究这个问题时，我得到了如何[使用 Javascript 获取时区偏移量](https://stackoverflow.com/a/1809974/806061)，但我仍然不清楚**如何将时区偏移量转换为 php 中的时区字符串，如上所示？**

或者，我在 Javascript/PHP 中使用哪种其他方法来获取每个用户的时区字符串？

我真的不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-24T11:07:12.127

您不能仅在 PHP 中执行此操作。

您可以使用 Javascript 设置 cookie 中的值，然后使用 PHP 在下一页（重新）加载时读取 cookie。

Javascript：

```
var dateVar = new Date()
var offset = dateVar.getTimezoneOffset();
document.cookie = "offset="+offset; 
```

PHP：

```
echo $_COOKIE['offset']; 
```

使用它来将偏移量转换为 PHP 中的友好时区名称。Javascript 以分钟为单位返回偏移量，而这个 PHP 函数期望输入以秒为单位 - 所以乘以 60。第三个参数是一个布尔值，表示您是否处于夏令时。阅读手册并更新代码以满足您的需求。

```
echo timezone_name_from_abbr("", intval($_COOKIE['offset'])*60, 0); 
```

[http://php.net/manual/en/function.timezone-name-from-abbr.php](http://php.net/manual/en/function.timezone-name-from-abbr.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T11:06:40.323

1.  您无法从偏移量中获取时区名称。那是因为在任何给定时间有许多时区具有相同的偏移量，因此您不能根据偏移量选择一个。（如果你这样做了，当时区进入或离开 DST 时，这会咬你一口，改变偏移量。
2.  您最好的选择是通过 IP 地址进行地理定位（谷歌它，那里有很多材料）作为最好的初步猜测，然后让用户自己*选择他的时区*。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-11T19:48:48.290

```
function tzone(){
    if(isset($_SESSION["tz"])){ $return = $_SESSION["tz"]; } else {
        $ip = $_SERVER["REMOTE_ADDR"];
        $getip = file_get_contents("http://freegeoip.net/json/$ip");
        $getip = json_decode($getip);
        $lat = $getip->latitude; $lng = $getip->longitude; $country = $getip->country_name;
        $getzone = file_get_contents("http://api.geonames.org/timezoneJSON?lat=$lat&lng=$lng&username=demo"); //you can change "demo" to your own username. its free service
        $getzone = json_decode($getzone);
        $zone = $getzone->timezoneId;
        $_SESSION["tz"] = $zone;
        $return = $_SESSION["tz"];
    }
    return $return;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-09-17T14:18:33.067

# jsp - 将jar文件导入jsp不起作用

> ID：15050958
> 
> 赞同：1
> 
> 时间：2013-02-24T10:45:00.490
> 
> 标签：jsp, servlets, jar

已经有很多问题了，但似乎没有什么可以解决这个问题。我在`WEB-INF\lib`文件夹中放置了一个 3rd 方 jar 文件。主类`Control`存在于一个名为`Mainn`. 如果调用主类的main方法应该运行jar文件，下面的代码有什么问题？

```
 <%@ page import="Mainn.Control"%>
   <% String[] a=new String[1];
   Mainn.Control.main(a); %> 
```

或者有没有其他方法可以让这个jar文件从jsp页面运行？
编辑：我得到的只是一个空白屏幕。没有错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T10:52:00.387

为了不出现空白屏幕，您必须向 JSP 的输出编写器写入一些内容。但你不这样做。你所做的就是调用一个类的方法。我猜这个类有`System.out.println()`陈述。但是`System.out.println()`写入服务器上的 JSP 容器（tomcat 或您正在使用的任何东西）的控制台。它不写给 JSP 的作者。

# javascript - 阻止网站打开窗口

> ID：15050962
> 
> 赞同：-1
> 
> 时间：2013-02-24T10:45:25.127
> 
> 标签：javascript, jquery, browser, popup

![在此处输入图像描述](../Images/b22e7e35c618c07a37584c747f5cd30c.png)我的网站收到“阻止网站打开窗口”。部署后。

没有太多棘手的代码。

```
 if( $('#textbox').val().length == 0 ) {
alert("please fill the details");
} 
```

在显示警报时，我收到了上述警报。当我单击允许其正常工作时。

仅发生在`IE and firefox`.

请帮忙。真烦人。在开发模式下它不会到来。在tomcat上部署后得到这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T10:48:47.230

这是您浏览器中的设置。在开发中它没有发生，因为您可能在本地运行它。尝试禁用弹出窗口阻止程序或将您的域添加到允许列表

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T11:21:10.457

您正在使用警告框来警告用户他们没有正确填写表单。你不想这样做的原因有很多。其中之一是浏览器可能会阻止页面这样做。其他原因都与这种行为对用户的讨厌程度有关。

用户可能将他们的扬声器开得太高，以至于您的警报框使他们耳聋。他们可能碰巧点击了警报框显示的某些内容，导致他们丢失桌面上的警报框并阻止他们浏览您的网站。但是，您可能会比以往任何时候都惹恼您的用户 - 浏览器通过阻止警报框来帮您一个忙！

如果表单填写不正确，请显示一个带有红色背景的 HTML 元素，以警告他们。这可以实现您想要的，而不会产生噪音或强迫用户找到并点击它。每个人都是赢家！

# cakephp - CakePHP 2.3 分页命名为 args

> ID：15050970
> 
> 赞同：0
> 
> 时间：2013-02-24T10:46:13.077
> 
> 标签：cakephp, routing, pagination

我为我的分页创建架构：

```
Router::connect(__('news') .'/'. __('paginate') .'/:page', array(  
    'controller' => 'news',  
    'action' => 'index'), array(   
        'persist' => array(  
          'language'))); 
```

但是控制器中的“命名”参数仍然为空

我的问题是如何通过以下链接准备路由器以使用分页：news/paginate/4、news/paginate/5 等...

我使用蛋糕 2.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T12:37:55.743

您不能在路由中使用命名参数。

无关，从 2.2 开始，您不需要`true`调用第二个参数。`__()`检查 API。

# html - 刷新页面后验证错误消息仍然存在

> ID：15050972
> 
> 赞同：0
> 
> 时间：2013-02-24T10:46:31.950
> 
> 标签：html, validation, jsf, page-refresh

我正在努力学习 JSF。

我有一个带有注释@ManagedBean @RequestScoped 的简单Hello.java ...

在 index.xhtml 我有：

```
<h:inputText id="username" 
             value="#{hello.name}"
             required="true"
             requiredMessage="A name is required.">
</h:inputText>
<h:commandButton id="submit" value="Submit" action="response">
</h:commandButton> 
```

我的问题是，当我单击提交按钮而不填写名称字段时，我收到错误消息。但是当我刷新页面时，错误消息仍然存在。为什么它不消失？我怎样才能让它消失？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T11:46:04.580

您正在刷新表单提交。所以表单被提交并再次验证。有点理智的浏览器会为此显示警告，例如“您确定要重新发送帖子数据吗？”。你没见过这个吗？

无论如何，我不确定您期望什么，因为这是同步 POST 表单上完全自然和标准的 HTML/webbrowser 行为（因此与 JSF 完全无关，因为它在这个“问题”的上下文中只是一个 HTML 代码生成器），但是如果您想避免在刷新 POST 请求时重新执行 POST 请求，那么最简单的方法是使其成为异步 POST 请求（通过 ajax）而不是同步请求。这是一个嵌套的问题

```
<f:ajax execute="@form" render="@form" /> 
```

里面`<h:commandButton>`。浏览器刷新仅刷新最后一个同步请求，然后将成为初始 GET 请求。

# ruby - Graph DBs/Language 组合推荐

> ID：15050973
> 
> 赞同：1
> 
> 时间：2013-02-24T10:46:35.553
> 
> 标签：ruby, ruby-on-rails-3, neo4j

我正在开始一个依赖社交网络图的新项目。

我查看了 Neo4j.rb。由于缺乏完整的 ActiveRecord 兼容性，我必须审查应该可以正常工作的代码。

尝试使用[此处](http://net.tutsplus.com/tutorials/ruby/how-to-use-omniauth-to-authenticate-your-users/)描述的基础知识时，我被困在缺少的方法上`find_by_provider_and_uid`，而使用 Devise 需要一个 fork 才能与 Neo4j.rb 一起使用。

其他替代品各有其问题。例如：

*   Neography 让我编写 Cypher 语法
*   Pacer 几乎没有文档

有没有人构建了一个纯粹的 neo4j/orientDB 项目来实现模块化身份验证（OpenID、Twitter 和 Facebook）？

如果是这样，您会推荐什么框架和语言？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T20:36:35.680

Max De Marzi 使用 Facebook 和 twitter API（以及 OpenAuth）在 heroku 上部署了许多应用程序。见[http://maxdemarzi.com](http://maxdemarzi.com)

并且 cypher 是未来的发展方向，在neography 之上还有一个名为neoid 的框架，它增加了Rails 支持。( [https://github.com/elado/neoid](https://github.com/elado/neoid) )

Neo4j.rb 用于嵌入式部署，即您在 webapp 中运行 Neo4j。

# javascript - 如何使用javascript从另一个页面更改框架的src？

> ID：15050976
> 
> 赞同：0
> 
> 时间：2013-02-24T10:46:40.240
> 
> 标签：javascript

在这里，我想更改具有 id="bodyFrame" 并且位于单独的 html 文档上的框架的 src 属性。我如何通过javascript引用它。

```
<html>
    <head>
        <script>
            function loadpage()
            {
                var s=document.getElementById('selection');
                //alert(s.value);
                var k=document.getElementById('bodyFrame');
                alert(k);

            }
        </script>
    </head>
    <body>
        Select the page to visit :
        <select id="selection" onchange="loadpage()">
            <option value="Home">Home</option>
            <option value="Staff">Staff</option>
            <option value="Table">Table</option>
            <option value="Video">Video</option>
        </select>
    </body>
</html> 
```

在这里，我正在寻找解决方案，而不是`document.getElementById('bodyFrame');`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T10:53:22.203

尝试`parent`或`opener`。这些将为您提供所需的窗口，具体取决于您的方案。无论如何，您只需编写`debugger;`代码，代码就会停在该行（如果您启用了客户端调试），因此您可以检查`parent`和`opener`保存的值是什么。

# c# - 在 Windows 8 中将图像从 SavePicker 流式传输到文件

> ID：15050982
> 
> 赞同：0
> 
> 时间：2013-02-24T10:47:07.267
> 
> 标签：c#, .net, windows-8

我需要将本地存储文件夹中的图像保存到从 SavePicker 中选择的文件中。我应该使用流吗？这是我的代码：

```
 StorageFile file = await savePicker.PickSaveFileAsync();
            if (null != file)
            {
                var localFolder = Windows.Storage.ApplicationData.Current.LocalFolder;
                StorageFile current_photo = await localFolder.GetFileAsync(img.Tag.ToString());

                // TODO Stream from current_photo to file
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T16:07:43.333

[CopyAsync](http://msdn.microsoft.com/en-us/library/windows/apps/br227106.aspx)应该这样做：

```
await current_photo.CopyAndReplaceAsync(file); 
```

# ruby - 使用 Capistrano 部署仅限 cron 作业的应用程序？

> ID：15050984
> 
> 赞同：0
> 
> 时间：2013-02-24T10:47:20.250
> 
> 标签：ruby, deployment, capistrano, whenever

我有一个仅作为 cron 作业运行的应用程序。我正在使用when gem 来维护和部署我的cron 作业。

这是我当前的部署脚本。

```
require "bundler/capistrano"
require "whenever/capistrano"

set :application, "my-app"
set :domain, "example.com"
set :bundle_runner, "bundle exec"

# Git
set :scm, :git
set :repository, "git@bitbucket.org:username/my-app.rb.git"
set :branch, "master"

# Config
role :app, "example.com"
set :deploy_to,  "/opt/apps/#{application}"
set :deploy_via, :remote_cache
set :keep_releases, 5
set :git_enable_submodules, 1
set :git_shallow_clone, 1

# User
set :user, "webmaster"
set :use_sudo, false

# SSH
ssh_options[:paranoid] = false
ssh_options[:forward_agent] = true

set :bundle_cmd, "bundle"
set :bundle_without, [:test, :development]
set :bundle_flags,    "--deployment --without=development,test"

set :whenever_command, "#{bundle_cmd} exec whenever"

namespace :deploy do
  task :restart, roles: [:app] do
    whenever.update_crontab
  end
end 
```

问题是我在部署过程中遇到了这个错误。

```
* executing "cd -- /opt/apps/my-app/releases/20130224004202 && bbundle2 exec rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile && cp -- /opt/apps/my-app/shared/assets/manifest.yml /opt/apps/my-app/releases/20130224004202/assets_manifest.yml"
    servers: ["example.com"]
    [example.com] executing command
*** [err :: example.com] rake aborted!
*** [err :: example.com] No Rakefile found (looking for: rakefile, Rakefile, rakefile.rb, Rakefile.rb)
*** [err :: example.com] 
*** [err :: example.com] (See full trace by running task with --trace)
    command finished in 802ms
*** [deploy:update_code] rolling back
  * executing "rm -rf /opt/apps/my-app/releases/20130224004202; true"
    servers: ["example.com"]
    [example.com] executing command
    command finished in 111ms 
```

看起来 Capistrano 认为这是一个 Rails 应用程序，但事实并非如此。有没有办法只在运行时执行以下操作`cap deploy`

*   从远程存储库下载源代码。
*   更新`current`文件夹。
*   随时更新 crontabs。

# ios - 如何动态生成CoreData对象

> ID：15050985
> 
> 赞同：1
> 
> 时间：2013-02-24T10:47:28.557
> 
> 标签：ios, xcode, core-data

我在文档/讨论中没有找到明确的“否”，但怀疑无法在运行时以编程方式生成 CoreData 对象。

我想做的类似于从运行代码中执行 DDL 命令（例如“创建表”、“删除表”等），因为我不知道直到我询问用户他的表需要多少列，或者他们需要什么数据类型。也许他需要多张桌子。

有谁知道这是否可能？希望有一个指向要阅读的东西的指针。（我也会很感激学习负面的，所以我可以停止怀疑。）

如果在 CoreData 中不可行，这会是切换到 SQLite 的理由吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T22:34:21.440

您可以在运行时创建整个 Core Data 模型——根本不需要使用 Xcode 的数据建模器，并且 API 支持创建和配置模型的每个细节。但它可能不像你想要的那样灵活。尽管您可以创建新的实体描述或修改现有的描述，但您只能在加载数据存储文件**之前这样做。**读取和写入数据后，您必须将数据模型视为固定的。此时更改它会产生异常。

它与典型的 SQLite 用法不太一样。这有点像 SQLite 表是在一个文件中定义的，而数据存储在另一个文件中——您可以动态修改表，但只能在加载实际数据之前进行。（我知道这不是 SQLite 的真正工作方式，但这基本上是 Core Data 强制执行的方法）。

如果您希望需要按照您的描述修改您的模型/模式，那么直接 SQLite 访问可能会更好。有几个 Objective-C SQLite 包装器允许使用 ObjC 风格的方法，同时仍然支持 SQLite 风格的访问：

*   [PL数据库](http://code.google.com/p/pldatabase/)
*   [调频数据库](https://github.com/ccgus/fmdb)

# android - Android 从 OnItemClickListener 获取 packageName

> ID：15050986
> 
> 赞同：0
> 
> 时间：2013-02-24T10:47:30.283
> 
> 标签：android, listview, package

我将应用程序**标签**放入 ListView。我想从 OnItemClickListener 获取**packageName** (com.blabla.blabla)。我该怎么做？我的代码在这里：

```
uygList = new ArrayList<String>();

final PackageManager pm = getPackageManager();
List<ApplicationInfo> paketler = pm.getInstalledApplications(PackageManager.GET_META_DATA);
for (ApplicationInfo paketBilgi : paketler) {

    if (paketBilgi.packageName.equals(c.getString(0))) {

        uygList.add(paketBilgi.loadLabel(pm).toString());

        if (sayi<c.getCount()-1) {
            sayi++;
            c.moveToNext();
        }

    }

}

lv.setAdapter(new ArrayAdapter<String>(Uygulamalar.this, android.R.layout.simple_list_item_1, uygList));

lv.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent, View view, int pos, long id) {

        // I want to get the packageName that selected from ListView like (com.blabla.blabla)

    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T11:17:13.933

你可以使用这个：

```
lv.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View view, int pos, long id) {
            for (ApplicationInfo paketBilgi : paketler) {
                String s = paketBilgi.loadLabel(pm).toString();
                if(s.equals(uygList.get(pos))){
                    String packageName = paketBilgi.packageName;
                }
            }
        }
    });

But if 2 apps have same label there will be problem so it would be better if you can use   another list and store the package names and use it.

final List<String> packageNames = new Arraylist<String>();

uygList.add(paketBilgi.loadLabel(pm).toString()); 
packageNames.add(paketBilgi.packageName);

lv.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent, View view, int pos, long id) {
        String packageName =  packageNames.get(pos);
    // I want to get the packageName that selected from ListView like (com.blabla.blabla)
    }
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-24T11:49:00.860

public void onItemClick(AdapterView parent, View view, int pos, long id) {

```
 // I want to get the packageName that selected from ListView like (com.blabla.blabla)

} 
```

param pos 是 uygList 中的位置

# php - 在 php 中使用 javascript 函数

> ID：15050988
> 
> 赞同：0
> 
> 时间：2013-02-24T10:47:41.877
> 
> 标签：php, javascript, class

我正在尝试使用函数 changeClass 来更改表行的类：

```
<tr class="formatHTML5" onclick='changeClass(this,"class1","class2");'>

<script>
function changeClass(elem, className1,className2)
{
elem.className = (elem.className == className1)?className2:className1;
}
</script> 
```

这很好用，但是当我尝试在 php 中回显它时，它似乎不起作用：

```
echo "<tr class='formatHTML5' onclick='changeClass(this,'class1','class2');'>"; 
```

我不能在回声中使用 " 标记。知道如何使它工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T10:56:04.183

你必须逃避引号：

`echo "<tr class='formatHTML5' onclick='changeClass(this,\"class1\",\"class2\");'>";`

# c# - 使用文本框加载图像，逐字符读取

> ID：15050989
> 
> 赞同：1
> 
> 时间：2013-02-24T10:47:45.917
> 
> 标签：c#, winforms, textbox, picturebox

我想做一个程序，在将数字输入文本框后会显示适当的图像。例如，如果您键入 1 和 2，将显示蜡烛和天鹅，程序将帮助记住数字的助记系统。这是我的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
namespace WindowsFormsApplication9
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }
        private void textBox1_TextChanged(object sender, EventArgs e)
        {
            string dane = textBox1.Text;

            if (dane == "")
            {
                MessageBox.Show("No number");
            }
            else
            {
                bool jest_liczba = true;
                try
                {
                    double dane_ok = System.Convert.ToDouble(dane);
                }
                catch
                {
                    MessageBox.Show("no int");
                    jest_liczba = false;
                }
                if (jest_liczba == true)
                {

                }
            }
        }
        private void button1_Click(object sender, EventArgs e)
        {  
            string temp = textBox1.Text; //table
            for (int i = 0; i < temp.Length; i++)
            {
                textBox1.Text = char.ToString(temp[i]);
            }         
            string _katalog = @"c:\obrazki\"; //load picture
            string _typ = ".jpg";
            int _liczba;
            if (Int32.TryParse(textBox1.Text, out _liczba))
            {
                pictureBox1.Image = Image.FromFile(_katalog + _liczba + _typ);
            }
        }
    }
} 
```

输入几个数字后的程序，只显示一个图像。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T13:41:09.443

我不确定你的 for..loop 正在完成什么。只需将其注释掉：

```
// string temp = textBox1.Text; //table
// for (int i = 0; i < temp.Length; i++)
// {
//   textBox1.Text = char.ToString(temp[i]);
// } 
```

该循环当前用临时字符串的最后一个字符替换 TextBox 文本。

# android - 收听 3rd Party App-Start

> ID：15050990
> 
> 赞同：1
> 
> 时间：2013-02-24T10:47:47.993
> 
> 标签：android

是否可以在我的应用程序中实现类似的功能：

*   用户启动 App2，
*   App1 注意到，
*   App1 启动服务
*   用户一直在 App2 中
*   用户关闭/停止 App2
*   App1 停止服务

如果这是可能的，或者只有一部分可能发布答案，我将不胜感激！

# forms - 如何在 Coldfusion CFC 中声明动态表单字段默认值？

> ID：15050992
> 
> 赞同：2
> 
> 时间：2013-02-24T10:47:58.383
> 
> 标签：forms, dynamic, coldfusion, cfc

我正在寻找一种在 CFC 中动态声明表单默认值的方法，我通过 AJAX 调用。当前 CFC 发送订单，我需要将其分解为子订单。

我一直在使用这个：

```
 <!--- static defaults --->
 <cffunction name="Defaults" access="public" returntype="struct" output="false" 
    hint="Assign default values to instance">
    <cfscript>
        var formDefaults = {
              versenden=""
            , speichern="" 
            ...
        }
    </cfscript>
    <cfreturn formDefaults />
</cffunction>

<cffunction name="Commit" access="public" returntype="struct" output="false" hint="database handler">

 <!--- add dynamic form fields --->
 <cfscript>             
    var LOCAL = {};
    variables.defs = THIS.Defaults();
 </cfscript>
 <cfloop collection="#VARIABLES.Instance.FormData#" item="formField">
    <cfscript>
        if (   LEFT(formField, 5) EQ "MENGE" 
            OR LEFT(formField, 3) EQ "EAN" 
            OR LEFT(formField, 12) EQ "BESTELL_TEXT" 
            OR LEFT(formField, 10) EQ "BESTELLTYP" 
            ...
          ) {
          variables.defs[formField]="";
        }
    </cfscript>
</cfloop>
<cfscript>
    structAppend(variables.defs, VARIABLES.Instance.FormData);                  
    LOCAL.Basket = variables.defs;  
</cfscript>

... 
```

所以我首先声明静态表单字段（仅限单个实例），然后尝试将动态表单字段动态附加到我的数组中，这可能会被多次传输（`MENGE38, MENGE39, MENGE40`等）

虽然这可以正常工作，但我需要在我的表单名称中添加另一个计数元素，所以我必须更改`MENGE`为类似的东西，`counter.MENGE`或者`MENGE.counter`然后发送这样的表单值：

```
MENGE.1.38
MENGE.1.40
MENGE.1.41
MENGE.2.37 
```

计数器表示子订单，此字段用于。

问题是，这破坏了我的动态表单字段声明，我不明白为什么。我收到以下错误：

```
Diagnose: Element MENGE.1 is undefined in a CFML structure referenced as part of an expression. 
```

**问题：**
谁能给我一个提示可能是什么问题？我是否也必须对 HTML 页面上的表单字段进行参数化（不应该这样做）？

谢谢！

**编辑**：
问题出在我的验证函数中，我还需要声明我上面所做的修改。新函数如下所示：

```
<cffunction name="Validate" access="public" returntype="array" output="false" hint="validate form inputs and return an array of faulty field names.">
   <cfscript>
     var LOCAL = {};
     var double = structNew();
     double.form = VARIABLES.Instance.FormData;
     double.criteria = VARIABLES.Instance.Validation;
  </cfscript>

  <!--- add dynamic form fields for validation... I FORGOT TO UPDATE THIS--->
  <cfloop collection="#VARIABLES.Instance.FormData#" item="formField">
     <cfscript>
        if (   LEFT(formField, 5) EQ "MENGE" 
            OR LEFT(formField, 10) EQ 'BESTELLTYP'
            OR LEFT(formField, 3) EQ "EAN" 
            OR LEFT(formField, 12) EQ "BESTELL_TEXT" 
            ...
        ) {
           VARIABLES.Instance.Validation[formField]="pass";
        }
     </cfscript>
  </cfloop>
  <!--- Get error names and type --->
  <cfinvoke component="form_validate" method="validate_fields" double="#double#" returnvariable="validation_errors"></cfinvoke>
  <cfset LOCAL.ErrorMessages = validation_errors />
  <cfreturn LOCAL.ErrorMessages /> 
```

因为我没有在这个函数中添加新的更新的 if 子句，所以我收到了错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T15:16:25.830

要以 Dan Bracuk 的答案为基础，请使用下划线（尽管您需要更改“BESTELL_TEXT”的名称）。将它与 listFirst、listGetAt 和 listLast 的组合使用以确定字段名称结构，使用下划线作为分隔符。请注意我是如何使用 list 函数清理你的大 IF 的。编写的此代码可能无法满足您的需求，但想说明概念而无需了解您的业务需求。

```
<cfscript>
var orders=structNew();
item=listFirst(formField,'_');
orderNames = "MENGE,EAN,BESTELLTEXT,BESTELLTYPE";
if (listFindNoCase(orderNames,item,'_')){
    if (!structKeyExists(orders,item)){
        // initialize item
        orders[item]=structNew();
    }
    orderID="";
    subOrderId="";
    if (listLen(formField,'_') gt 1) {
        orderID=listGetAt(formField,2,'_');
    }
    if (listLen(formField,'_') eq 2) {
        orders[item][orderId]=formData[formField];
    }
    if (listLen(formField,'_') eq 3) {
        subOrderId=listLast(formField,'_');
        orders[item][orderId][subOrderId]=formData[formField];
    }

}
</cfscript> 
```

# laravel - Laravel 4 的 github 项目在哪里？

> ID：15050994
> 
> 赞同：-1
> 
> 时间：2013-02-24T10:48:03.263
> 
> 标签：laravel, laravel-4

现在 Laravel 4 仍处于测试阶段，我在哪里可以找到 Laravel 4 的 github 项目？

如果您对我投反对票，请让我解释一下，为什么我要问。Laravel 3 目前（2013 年 2 月）是稳定版本，Laravel 4 处于测试阶段。过去，每个组件都是一个单独的项目。然后这发生了变化，它们被合并了（据我所知）。但是只要在 Google 上搜索`Laravel 4 github`仍然会给我 Laravel 3 存储库。**所以，现在轮到你们反对者来解释为什么我被反对了。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T10:49:11.227

你可以在[开发](https://github.com/laravel/laravel/tree/develop)分支上找到它。

# php - Sending unlimited requests to a PHP file

> ID：15050996
> 
> 赞同：-6
> 
> 时间：2013-02-24T10:48:21.110
> 
> 标签：php, ajax

Wondering if infinity requests to a PHP script can overload a website. What do you think?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T10:54:27.477

Try apache bench... `ab -n 10000 -c 1000`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T10:53:32.420

Use **[ab](http://httpd.apache.org/docs/2.2/programs/ab.html)** if you have access to a command line.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T10:53:32.240

The fact that it handles an AJAX request doesn't really matter. It's the same with the fact that a PHP scripts sends the request - it does not matter that it *comes* from a PHP script. So your question basically is: "Does my server go down if a PHP scripts is called very often?" and this only depends on the Hardware and Installation of your Server.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T11:10:04.280

If you are bench testing your Apache server for a particular configuration you need to measure the number of concurrent requests vs the response time.

It makes little difference if the server is able to handle X number of concurrent requests if the response time is too long. The is because users are impatient and likely to just move on.

# c++ - 代码块电源功能在c中不起作用

> ID：15050997
> 
> 赞同：1
> 
> 时间：2013-02-24T10:48:21.897
> 
> 标签：c++, c, codeblocks

我正在使用代码块来学习 c。我的代码是

```
#include<stdio.h>
#include<math.h>
int main()
{
  int x;
  x = pow(5,2);
  printf("%d", x);
}

Output is 25 
```

当我使用此代码时

```
#include<stdio.h>
#include<math.h>
int main()
{
  int x,i,j;
  printf("please enter first value");
  scanf("%d", &i);//5
  printf("please enter second value");//2
  scanf("%d", &j);
  x = pow(i,j);
  printf("%d", x);
}

Output is 24 
```

这里有什么问题？我只是在使用扫描功能并以同样的方式使用 pow 功能来获取价值。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-24T11:04:34.373

我怀疑你有一个幼稚的实现`pow`（`libm`我得到 25，应该是）。如果在不检查（小）积分指数和特殊处理的情况下计算为正数，你`pow(x,y)`会`exp(y*log(x))`得到`x`

```
Prelude> 2 * log 5
3.2188758248682006
Prelude> exp it
24.999999999999996 
```

结果`double`略小于 25，因此当它转换为`int`它时，它会被截断为 24。

要检查，请将结果分配`pow(i,j)`给 a`double`并打印出来。

使用 hardcoded `pow(5,2)`，编译器（很可能，即使没有优化也是 gcc 所做的）在编译期间精确计算结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T10:58:56.663

尝试将初始化更改为：

```
int x=-1 ,i=-1 ,j=-1; 
```

最后打印到这个：

```
printf("pow(%d, %d) == %d\n", i, j, x); 
```

这应该很好地暗示了这个问题。此外，检查 的返回值`scanf`，它们应该返回读取的项目数，即。1 上面的代码。

几乎可以肯定，您为 scanf 输入了无效输入，`i`或者`j`未初始化，而 24 只是垃圾值。

此外，在启用警告的情况下进行编译，并修复它们（例如，添加`return 0;`到 end of `main`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T10:56:05.560

您的代码在我的 Windows x64 上正确给出了 25。

您可能需要再次运行它，看看您是否读错了……
缺少的“返回 0；” 不是这里的问题。

如果有任何事情可能出错，
您可以尝试添加

```
fflush(stdin);//or out 
```

在非常 scanf 和 printf 之后。如果任何冲洗解决了您的问题，您就知道出了什么问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T15:53:00.303

使用您的代码，我得到了正确的结果 25。虽然尝试更改结果的数据类型，例如浮点数或双精度数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-24T10:58:25.850

貌似第二个程序没什么问题，除了最后一定要加

```
return 0; 
```

如果你用 2 读取值 j，那么结果将只有 25。