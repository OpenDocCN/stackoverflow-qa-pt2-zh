# StackOverflow 问答 16198000-16198999

# c - 用 connect() 识别问题

> ID：16198005
> 
> 赞同：-1
> 
> 时间：2013-04-24T17:03:41.467
> 
> 标签：c, network-programming

我一直在使用代理服务器。它必须连接到另一个“监视器”程序并从该程序获取连接地址信息。该程序在已知的 ip 和端口上运行。如果我使用以下连接它可以正常工作：

```
struct hostent *serv;
int sockfd;
struct sockaddr_in serv_addr;

serv = gethostbyname("localhost");
sockfd = socket(AF)INET, SOCK_STREAM, 0);
   if (sockfd < 0)
      /*   Error handling    */ 
bzero((char *) &serv_addr, sizeof (serv_addr));
serv_addr.sin_family = AF_INET;
bcopy((char *) server->h_addr, (char *) &serv_addr.sin_addr.s_addr, server->h_length);
serv_addr.sin_port = htons(portno); // portno is an int holding the port number
if (connect(sockfd, (struct sockaddr *) &serv_addr, sizeof(serv_addr)) < 0)
   /*    error handling   */ 
```

但是我想使用确切的 IP 地址而不是本地主机，它们可能并不总是在同一台机器上，并且 gethostbyname () 已过时。我试图像这样使用 getaddrinfo() ：

```
struct addrinfo hints, *server;
int sockfd, i;
char *host = "192.168.2.4";
char *port = "4044";

memset(&hints, 0, sizeof(struct addrinfo));
hints.ai_family = AF_INET;
hints.ai_socktype = SOCK_STREAM;
hints.ai_flags = 0;
hints.ai_protocol = IPPROTO_TCP;  // have also tried it with 0
i = getaddrinfo(host, port, &hints, &server);
if (i != 0) 
   /*    Error handling   */
sockfd = socket(server->ai_family, server->ai_socktype, server->ai_protocol);
freeaddrinfo (server); // have also tried without this line
if (sockfd < 0)
   /*   Error handling    */
printf("Attempting to connect\n");
if (connect(sockfd, server->ai_addr, server->ai_addrlen) != -1) 
   /*    Error handling   */ 
printf("Connection attempt complete\n"); 
```

第二次尝试在 connect() 命令上挂起很长时间，最后返回错误。我已经在几个地方查看了示例，并在 stackoverflow 上搜索了以前的问题，但找不到问题，或者为什么一个有效而另一个无效。我认为它与 server->ai_addr 值有关，但尚未能够验证它。

任何帮助将不胜感激，我做错了什么吗？我不知道在哪里可以寻找更多的想法来检查。

编辑更新：我发现了一个问题。在 if (connect (/* */) != -1) 行中，它应该是 != 0。我正在查看的其中一个示例使用了 bind() 语句。如果我将本地主机地址与第二个可能一起使用，它将适用于该更改。但是我仍然无法连接到特定的 IP 地址节点。我开始怀疑给我的 ip 地址不是这台计算机可以接收网络流量的地址。我不知道如何检查。我会看到如果我能找出更多关于使用特定 IP 地址的错误信息，并再次使用这些信息进行编辑。

编辑更新：我添加了#include 并尝试在系统调用返回后打印出错误代码。我还打印了退货单。它返回一个-1，根据我发现的文档，这意味着当我尝试打印 errno it seg faults 时发生错误。

```
fprintf(stderr, "Error Code %s\n", errno); // seg faults 
```

但是将其更改为：

```
fprintf(stderr, "Error Code %d\n", errno); // returns Error Code 60 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T07:00:39.050

给我的 ip 地址不是我正在使用的计算机上的 ip。我最终决定IP地址一定是问题所在。我在我的计算机上找到了 IP 地址，并让服务器程序绑定到它。我还将它作为上面包含的代码的 IP 地址而不是本地主机，它能够连接，无论服务器是在该特定 IP 地址上还是简单地连接到 INADDR_ANY。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T17:34:01.237

尝试更换

```
hints.ai_flags = 0; 
```

和

```
hints.ai_flags = AI_NUMERICHOST; 
```

看看会发生什么。

# css - 滚动 - Div 内的 Div

> ID：16198013
> 
> 赞同：0
> 
> 时间：2013-04-24T17:04:01.650
> 
> 标签：css, html, overflow, parallax

我正在尝试在另一个 DIV 上放置一个滚动条。

所以...第一个 div 是一个类似于 div 的内容。只需一些边距、填充和位置即可将我的内容放在中心列中。

在这个 div 里面，我想放一个垂直滚动的文本框。例如，我会将高度为 800 像素的内容放在高度为 400 像素的空间中。

滚动类：

```
.scrollbox {
   overflow-y: auto !important;
   /*background: blue !important;*/
   height: 800px;
   width:100%; 
       } 
```

但它什么也没发生。

看：[http ://www.agenciarara.com.br/2013/marinheiros](http://www.agenciarara.com.br/2013/marinheiros)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:14:35.270

scoll 的问题出在你的 paralax 脚本中，试试这部分代码：

**CSS**

```
.scrollbox {
    position: relative;
    height: 400px;
    width: 100%;
    overflow-y: scroll;
    z-index: 9999; /*higher than paralax */ 
} 
```

# python - Do you need python to run a python gtk/pyQt application?

> ID：16198017
> 
> 赞同：0
> 
> 时间：2013-04-24T17:04:19.870
> 
> 标签：python, asynchronous, gtk, pyqt

I am considering porting what is a small application from a JavaScript bookmarklet for work to a python GTK application. However, while people can run my bookmarklet on either Chrome or Firefox, I don't want to proceed to use Python GTK or PyQT if they need to have python installed. Is there a way to distribute the application with requisite files to avoid needing everyone to install Python on their workstations?

If there are other solutions which offer ability to send async http requests with competent libraries for html dom traversing/parsing (not c#/HAP), I am willing to compromise.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:15:14.263

You should have a look on [py2exe](http://www.py2exe.org/) or [py2app](https://pypi.python.org/pypi/py2app), which can build python applications that contain all needed libraries.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-19T20:38:58.260

Also take a look at [PyInstaller](https://github.com/pyinstaller/pyinstaller/wiki "PyInstaller"). The support for python3 is still experimental, but I have never had any problems so far. I prefer it over py2exe and py2app because of its ease of use.

# python - 无法理解此代码

> ID：16198018
> 
> 赞同：0
> 
> 时间：2013-04-24T17:04:21.057
> 
> 标签：python, recursion, nested, depth

我刚开始学习递归，我有一个任务要编写一个程序来告诉列表的嵌套深度。好吧，我四处浏览并找到了执行此操作的工作代码，但我仍然无法理解它是如何工作的。这是代码：

```
def depth(L) :
    nesting = [] 
    for c in L:
        if type(c)  == type(nesting) :
            nesting.append(depth(c)) 
    if len(nesting)  > 0:
        return 1 + max(nesting)
    return 1 
```

所以很自然，我开始对调用递归的追加感到困惑。有没有人有一个简单的方法来解释这里发生了什么？我不确定实际附加了什么，并且在我的脑海中使用测试用例进行检查并没有帮助。谢谢！

编辑：抱歉，如果格式不好，我是用手机输入的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T17:47:55.873

让我以简单的方式向您展示，更改代码如下：（### 是我添加到您的代码中的新行，以便您可以看到那里发生的事情）

```
def depth(L) :
    nesting = []
    for c in L:
        if type(c)  == type(nesting) :
            print 'nesting before append', nesting ###      
            nesting.append(depth(c))
            print 'nesting after append', nesting ###
    if len(nesting)  > 0:
        return 1 + max(nesting)
    return 1 
```

现在让我们制作一个深度为三的列表：

```
l=[[1,2,3],[1,2,[4]],'asdfg'] 
```

你可以看到我们的列表有 3 个元素。其中一个是一个列表，另一个是一个列表，它本身有另一个列表，最后一个是一个字符串。可以清楚的看到这个列表的深度是3（即主列表的第二个元素有2个列表嵌套在一起）

让我们运行这段代码：

```
>>> depth(l)
nesting before append []
nesting after append [1]
nesting before append [1]
nesting before append []
nesting after append [1]
nesting after append [1, 2]
3 
```

小菜一碟！此函数将 1 附加到嵌套中。然后如果该元素还有另一个列表，它会附加 1 + 嵌套中的最大数量，这是时间函数本身被调用的数量。如果元素是字符串，则跳过它。

最后，它返回嵌套中的最大数量，即递归发生的最大次数，即主列表中列表中存在列表的次数，即深度。在我们的例子中，第二个元素 + 1=3 的递归发生了两次，正如我们预期的那样。

如果您仍然无法获取它，请尝试`print`在函数中添加更多语句或其他变量并仔细观察它们，最终您会得到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T17:41:45.300

让我们从几个例子开始。

首先，让我们考虑一个只有一层深度的列表。例如，`[1, 2, 3]`。

在上面的列表中，代码以调用`depth()`with开始`L = [1, 2, 3]`。它生成一个空列表`nesting`。遍历`L`ie的所有元素，`1, 2, 3`并没有找到通过测试的单个元素`type(c) == type(nesting)`。检查`len(nesting) > 0`失败并且代码返回 1，这是列表的深度。

接下来，我们举一个深度为 2 的例子，即`[[1, 2], 3]`。`depth()`调用该函数`L = [[1, 2], 3]`并创建一个空列表`nesting`。该循环遍历 L ie 的 2 个元素，`[1, 2] , 3`并且因为`type([1, 2]) == type(nesting)`,`nesting.append(depth(c))`被调用。与前面的例子类似，`depth(c)`即`depth([1, 2])`返回一个 1`nesting`现在变成`[1]`。循环执行后，代码评估测试`len(nesting) > 0`结果`True`和返回`1 + max(nesting)`结果。`1 + 1 = 2`

类似地，深度 3 的代码如下，依此类推。

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T17:29:00.557

所以这似乎是一个函数，它接受一个列表并计算，正如你所说的，它的嵌套深度。嵌套是一个列表，所以`if type(c) == type(nesting)`说的是：如果列表中的项目`L`是一个列表，则再次运行该函数并附加它，当它再次运行该函数时，它将执行相同的测试，直到列表中没有更多的嵌套列表`L`然后返回 1 + 嵌套列表的最大数量，因为每个列表的深度都是 1。

请告诉我是否有任何不清楚的地方

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T17:36:16.930

该算法访问嵌套列表并为每一级递归添加一个。调用链是这样的：

```
depth([1, 2, [3, [4, 5], 6], 7]) =
    1 + depth([3, [4, 5], 6]) = 3
        1 + depth([4, 5]) = 2
            1 
```

由于 depth([4,5]) 永远不会进入`if type(c) == type(nesting)`条件，因为没有元素是列表，它从外部返回返回 1，这是基本情况。

在这种情况下，对于给定的深度，您有多个嵌套列表，例如`[1, [2, 3], [4, [5, 6]]`，最大深度`[2,3]`和`[4, [5, 6]]`都附加在深度调用上，其中最大值由内部返回返回。

# google-sheets - 在 Google 电子表格中自动查找工作周的开始和结束时间

> ID：16198019
> 
> 赞同：15
> 
> 时间：2013-04-24T17:04:23.883
> 
> 标签：google-sheets

我的工作周是从周一到周日，我需要找到一种方法让 2 个不同的单元格根据 =today() 自动更新当前工作周的开始和结束的实际日期。

有没有公​​式可以找到这个？

相似地：

是否还有类似的方法可以在不同的单元格中自动执行当月的第一天和最后一天？

提前感谢您的任何帮助

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-24T20:34:57.273

假设您在 A1 中引用日期...

包含该日期的工作周开始（假设工作周从星期一开始）：

`=A1-WEEKDAY(A1;3)`

工作周结束：

`=A1-WEEKDAY(A1;3)+6`

月初：

`=EOMONTH(A1;-1)+1`

月底：

`=EOMONTH(A1;0)`

我知道这是 Microsoft Excel 文档，但这[描述](http://office.microsoft.com/en-au/excel-help/eomonth-HP005209076.aspx)了 EOMONTH 函数。

# c - 如何知道一个包是否使用 C 安装在 Linux 中

> ID：16198021
> 
> 赞同：1
> 
> 时间：2013-04-24T17:04:25.800
> 
> 标签：c, linux

我正在用 C 语言为我的项目创建一个闹钟。我正在使用 mgp123 命令（在包 mpg321 中）运行闹钟声音。它只适用于 UBUNTU 用户。我需要该程序检查是否安装了 mpg321。如果软件包 mpg321 是使用 C 程序安装的，我如何使用 C 找到？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T17:08:45.747

您可以使用`system()`

```
system("mpg321 -h"); 
```

如果命令返回错误而`mpg321`不是未安装

# xml - 如何在 wordpress 中导入附属窗口数据提要 XML

> ID：16198023
> 
> 赞同：0
> 
> 时间：2013-04-24T17:04:29.603
> 
> 标签：xml, wordpress, dataimporthandler

我需要帮助，我想从这个站点[https://www.affiliatewindow.com](https://www.affiliatewindow.com)将 Affiliate Window 数据馈送 XML 导入我的 wordpress 网站。所以请帮助我如何做到这一点。请帮助我。

谢谢，优素福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:24:41.137

要将 xml 提要添加到您的网站，请查看下面的代码。

```
<?php
include_once(ABSPATH . WPINC . '/feed.php');
$feed = fetch_feed( http://uk.affiliatewindow.com/feed/ );
$rss = $feed;
if(!empty($rss)):
$maxitems = $rss->get_item_quantity(4);
$rss_items = $rss->get_items(0, $maxitems);
endif;
?> 
<?php if ($maxitems == 0) echo 'No news';
else
foreach ( $rss_items as $item ) : ?>

<?php
 // display item title and date  

        echo '<span class="comment_author"><a href="http://uk.affiliatewindow.com/" target="_blank">' . substr($item->get_title(), 0, 65) . '...</a></span><br>'; ?>
        <?
        // if single item, display content
        if(isset($_GET['item']))
        {

            echo ' <span class="latest_content"><a href="http://uk.affiliatewindow.com/" target="_blank">'. substr($item->get_content(), 0, 30).'</a></span>';
        }

        echo '<span class="latest_content">' . shorten($item->get_description(), 150).'</span><br>';

?>

<?php endforeach; ?> 
```

在这一行`$feed = fetch_feed( http://uk.affiliatewindow.com/feed/ );`是提要地址下一步我相信你现在会！

在这里，我从您想要的网站导入了提要。在侧边栏中查找外部馈送。 [http://5wpthemes.com/press5/](http://5wpthemes.com/press5/)

你唯一需要做的就是设置href地址！

告诉我它是否工作！

# magento - 如何获取选定的属性 Magento

> ID：16198024
> 
> 赞同：0
> 
> 时间：2013-04-24T17:04:31.613
> 
> 标签：magento, attributes

我需要的比较简单……我需要获取产品页面中已经选择的属性。

更好地解释：我有一个可配置的产品，有两个属性，大小和颜色。当我去购买产品时，我有选择属性的选项，我有一个按钮可以执行一些操作并且需要获取选择的属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:44:32.070

在更改下拉列表时执行 ajax 调用，该调用将从所选值返回

这将为您提供所有属性选项和值。根据您的要求更改它

```
$attribute = Mage::getSingleton('eav/config')->getAttribute('catalog_product', 'color');
if ($attribute->usesSource()) {
    $options = $attribute->getSource()->getAllOptions(false);
} 
```

仍然不确定你想要实现什么

# c++ - 如何断言内存已释放

> ID：16198028
> 
> 赞同：0
> 
> 时间：2013-04-24T17:04:42.073
> 
> 标签：c++, c, memory-leaks, free, assert

我有一个没有内存的功能。

我想在调用此函数后断言该函数已释放给定的内存。

而且我无法更改此功能中的任何内容。

我需要它来进行单次测试。我想测试我的函数，我想检查我的函数在调用它后是否真的释放了内存

问题在代码中

```
void func(char *mem)
{
  // Some where in the function there is a free of the memory
  // The free could be into if condition so there is a risk to not be executed
}

int main()
{
   char *mem = malloc(20);
   func(mem);
   // how to assert here that the memory is freed?
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T17:11:38.803

简短的回答：没有办法做到这一点。

确保释放的内存不会被意外重用或识别某些指针已释放的常用方法是在释放后立即将其设置为 NULL。为此，在您的示例中，您需要对`func()`. 如果您无法对其进行任何更改，`func()`则无法确定传递给它的指针是否已释放或仍然有效。

此外，如果您 func() 将为某些调用而不是为其他调用释放内存，那么这是一个糟糕的设计。必须有一种更好、更透明的方式来管理动态分配的内存。

# c++ - 析构函数在作用域结束前被调用

> ID：16198029
> 
> 赞同：3
> 
> 时间：2013-04-24T17:04:45.400
> 
> 标签：c++, destructor

出于某种原因，在 main func 中创建一个对象后，析构函数被立即调用，它不应该只在 main 完成时调用吗？谢谢

代码：

```
#include <iostream>
#include <cstring>
#include <vector>
using namespace std; 

class check{                                                   //create class check
public:
    string m_bank_name;
    int m_check_number;
    int m_branch_number;
    char* m_check_sum;

    check ( string bank_name, int check_number, int branch_number, char* check_sum){
        int a_size = (strlen(check_sum)+1);
        m_check_sum = new char[a_size]();
        for (int i=0;i<a_size;i++)
        {
            m_check_sum[i]=check_sum[i];
        }
        m_bank_name= bank_name;
        m_check_number = check_number;
        m_branch_number = branch_number;
    }

    ~check (){
        delete [] m_check_sum;
        cout<<"deleted!"<<endl;     
        }
};

void main(){

    check ob1= check("poalim",809877,12,"4578");
    cout<<ob1.m_check_sum<<endl;
    getchar();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T17:07:33.367

这个表达

```
check("poalim",809877,12,"4578") 
```

创建一个在完整表达式 (;) 之后立即被销毁的临时对象

在被销毁之前，它被复制到`ob1`，在 main 函数结束时被销毁。

也许你的意思是写

```
int main(){ //note the correct return type of main
  check ob1("poalim",809877,12,"4578"); //direct constructor call
  cout<<ob1.m_check_sum<<endl;
  getchar(); 
} 
```

我真的建议你阅读一本关于 C++基础的[好书。](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)

# c# - 通过 SMTP 服务器以编程方式发送电子邮件

> ID：16198030
> 
> 赞同：3
> 
> 时间：2013-04-24T17:04:45.700
> 
> 标签：c#, smtp

尝试通过 SMTP 服务器发送电子邮件，但我在`smtp.Send(mail);`代码片段上收到了一个无法描述的错误。

服务器端，中继 IP 地址看起来正确。为我所缺少的东西而挠头。

```
MailMessage mail = new MailMessage();
mail.To.Add(txtEmail.Text);

mail.From = new MailAddress("no-reply@company.us");
mail.Subject = "Thank you for your submission...";
mail.Body = "This is where the body text goes";
mail.IsBodyHtml = false;

SmtpClient smtp = new SmtpClient();
smtp.Host = "mailex.company.us";
smtp.Credentials = new System.Net.NetworkCredential
     ("AdminName", "************");

smtp.EnableSsl = false;

if (fileuploadResume.HasFile)
{
    mail.Attachments.Add(new Attachment(fileuploadResume.PostedFile.InputStream,
        fileuploadResume.FileName));
}

smtp.Send(mail); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T17:41:41.090

尝试`smtp.DeliveryMethod = SmtpDeliveryMethod.Network;`在发送前添加。

作为参考，这是我的标准邮件功能：

```
public void sendMail(MailMessage msg)
{
    string username = "username";  //email address or domain user for exchange authentication
    string password = "password";  //password
    SmtpClient mClient = new SmtpClient();
    mClient.Host = "mailex.company.us";
    mClient.Credentials = new NetworkCredential(username, password);
    mClient.DeliveryMethod = SmtpDeliveryMethod.Network;
    mClient.Timeout = 100000;
    mClient.Send(msg);
} 
```

通常称为这样的：

```
MailMessage msg = new MailMessage();
msg.From = new MailAddress("fromAddr");
msg.To.Add(anAddr);

if (File.Exists(fullExportPath))
{
    Attachment mailAttachment = new Attachment(fullExportPath); //attach
    msg.Attachments.Add(mailAttachment);
    msg.Subject = "Subj";
    msg.IsBodyHtml = true;
    msg.BodyEncoding = Encoding.ASCII;
    msg.Body = "Body";
    sendMail(msg);
}
else
{
    //handle missing attachments
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-06T15:49:28.707

```
 var client = new SmtpClient("smtp.gmail.com", 587);
            Credentials = new NetworkCredential("sendermailadress", "senderpassword"),
            EnableSsl = true
            client.Send("sender mail adress","receiver mail adress", "subject", "body");
            MessageBox.Show("mail sent"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-22T19:23:18.617

这是为 C# 格式化的 Adil 的答案：

```
public static class Email
{
    private static string _senderEmailAddress = "sendermailadress";
    private static string _senderPassword = "senderpassword";

    public static void SendEmail(string receiverEmailAddress, string subject, string body)
    {
        try
        {
            var client = new SmtpClient("smtp.gmail.com", 587)
            {
                Credentials = new NetworkCredential(_senderEmailAddress, _senderPassword),
                EnableSsl = true
            };
            client.Send(_senderEmailAddress, receiverEmailAddress, subject, body);
        }
        catch (Exception e)
        {
            Console.WriteLine("Exception sending email." + Environment.NewLine + e);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-15T13:08:57.547

你没有指定端口。

```
smtp.Port = 1111; // whatever port your SMTP server uses 
```

SMTP 具有三个不同的“标准”端口：25、465 和 587。根据 msdn 文档，Port 属性的默认值为 25。

# c# - 在 REST 中为 GET 请求传递 DTO

> ID：16198033
> 
> 赞同：1
> 
> 时间：2013-04-24T17:04:52.260
> 
> 标签：c#, asp.net, wcf, rest

我有一个用于搜索用户的 REST 方法。现在我有以下 REST 方法的签名：

```
MyResponse GetUsers(UserSearchDTO search, int pageno, int totalrecords); 
```

即它接受一个对象`UserSearchDTO`，pageno 和 totalrecords 参数。URL 看起来像

```
myapp/users?pageno={pageno}&totalrecords={totalrecords} 
```

最终客户端将为此服务发送“PUT”请求，例如：

`myapp/users?pageno=1&totalrecords=10`并随之传递 UserSearchDTO 发布的 xml 数据，例如

```
<UserSearchDTO><Department>d</Department><Name>abc</Name></UserSearchDTO> 
```

这是一个好的架构吗，即为了让用户使用“PUT”请求类型。这样做的原因是因为最终客户端必须以 xml 形式传递 UserSearchDTO？

我在想的另一种方法是纯“GET”，即不使用`UserSearchDTO`我应该有以下签名：

```
 MyResponse GetUsers(string department,string name,...., int pageno, int totalrecords); 
```

最终客户端会这样称呼它：myapp/users?department=d&name=abc&......&pageno=1&totalrecords=10

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:33:38.500

我正在编写我的第一个 REST 服务，所以我不是专家，但在我看来，我认为最好使用 GET 请求，因为这正是你正在做的——从服务器获取数据. 这将使其他开发人员更容易支持该应用程序，而不是试图找出您为什么使用 PUT 进行基本数据检索。

如果可能，我建议您尝试将 UserSearchDTO XML 转换为客户端上的字符串并将其作为字符串传递给 GetUsers 方法，然后将该字符串加载到服务器上的 XmlDocument() 中并将其解析为 DTO。然后您的方法签名将如下所示：

```
MyResponse GetUsers(string userSearchXmlString, int pageno, int totalrecords); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T17:46:30.427

看起来您正在使用 WCF REST。使用 WCF REST，您必须自己实现查询机制，就像您尝试做的那样。您是否考虑过使用 ASP.NET Web API？在 Web API 中，您的`GetUsers()`方法只需要返回一个`IQueryable<User>`并且 Web API 使用[OData 查询功能](http://www.odata.org/documentation/odata-v3-documentation/odata-core/#1023_Querying_Collections)包装它，该功能可以为您处理投影、过滤、排序、聚合和分页。

# c++ - while循环不起作用c ++

> ID：16198037
> 
> 赞同：0
> 
> 时间：2013-04-24T17:04:59.130
> 
> 标签：c++, for-loop, while-loop, do-while

下面是我的代码：

我正在将用户输入数据与现有的二维数组进行比较。当用户输入正确的用户 id 时，程序可以正常工作，但是当有人输入错误的用户 id 时，程序会崩溃。

```
 bool cust=false;
        int row=0;

        do
        {
            cout<<"enter your user id"<<endl;
            cin>>uid;
            cout<<"enter your password"<<endl;
            cin>>upw;

            while(uid!=dataarray[row][3])
            {
                row++;
            }

            if(uid==dataarray[row][3])
            {
                cout<<"found customer"<<endl;
                cust=true;
                break;
            }

            else
            {
                cout<<"No customer found"<<endl;
                break;
            }

        }while(!cust); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:08:55.060

您需要限制行数。否则这个调用：

```
 while(uid!=dataarray[row][3])
        {
            row++;
        } 
```

当您尝试访问 dataarray[30000] 并且您只分配了 30000 个时会崩溃。

就像是：

```
 ...Allocate dataarray with dataarray[MaxNumberOfRows][MaxNumberOfColumns] ... 

 while ((row < MaxNumberOfRows) && (uid!= dataarray[row][3]) { row ++; } 
 if (row == MaxNumberOfRows) {... uid not found... } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T17:15:49.433

你在休息时做错了什么。A`break`使程序退出 while 循环。

`else { ... }`因此，您应该删除子句中的循环。您可以将其替换为`continue`，这将导致程序跳到`while`循环的下一个执行。

事实上，`curl`当你使用`break`. 当用户输入一个好的密码时，`break`它将使其离开`while`循环并且不`curl`进行额外的检查。

此外，`int row = 0`应该在`while`循环内。

最后，您的内部 while 循环将导致`row`索引超出`dataarray`数组的范围。您将必须检查`row`不超过此最大值。

我会这样纠正它：

```
 do {
        cout<<"enter your user id"<<endl;
        cin>>uid;
        cout<<"enter your password"<<endl;
        cin>>upw;

        int row=0;

        while(row < dataarray.size() - 1 && uid != dataarray[row][3])
        {
            row++;
        }

        if(uid==dataarray[row][3])
        {
            cout<<"found customer"<<endl;
            break;
        }

        else
        {
            cout<<"No customer found"<<endl;
            continue;
        }

    } while(true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T17:09:40.547

这个循环有问题：

```
 while(uid!=dataarray[row][3])
 {
    row++;
 } 
```

如果您输入`uid`2D 矩阵中不存在的一个，则此 while 循环将继续运行，直到`row`超出范围，如果您尝试访问不属于 2D 矩阵的内存，程序将崩溃。您还需要确保它`row`不会大于总行数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T17:09:53.217

当您的 uid 不正确时，它将进入 while 循环：

```
while(uid!=dataarray[row][3])
        {
            row++;
        } 
```

如果你对 row 的值没有限制，程序会一直在这个循环中运行，最后会崩溃。

# rest - Rest Webservices 异常返回堆栈跟踪

> ID：16198044
> 
> 赞同：0
> 
> 时间：2013-04-24T17:05:22.433
> 
> 标签：rest

我们有使用 spring 和 cxf 的 rest webservices。当一个检查异常被抛出时，我们通过soap ui得到正确的本地化异常。

但是，当抛出未经检查的运行时异常时，我们只会得到一个堆栈跟踪，说明 Web 服务无法加载。

```
@XmlType
@XmlAccessorType(XmlAccessType.FIELD)
@XmlRootElement
public class WebServiceExceptionWrapper extends Exception {

    /** Type (class name). */
    private String type;

    /** Message. */
    private String message;

    /** Stack trace. */
    private StackTraceElement[] stackTrace;

    /** Cause. */
    private Throwable cause;

    /** The localized message. */
    private String localeErrorCode;

    /**
     * Construct a wrapper around an exception.
     * 
     * @param e exception
     */
    public WebServiceExceptionWrapper(final Exception e) {
        this.type = e.getClass().getName();
        this.message = StringEscapeUtils.escapeHtml(e.getLocalizedMessage());
        this.stackTrace = e.getStackTrace();
        this.cause = e.getCause();
        if(e instanceof DetailedException) {
            this.localeErrorCode = StringEscapeUtils.escapeHtml(((DetailedException) e).getLocaleErrorCode());
        }
    }

    /**
     * Gets the type.
     * 
     * @return the type
     */
    @XmlElement(nillable = true)
    public String getType() {
        return this.type;
    }

    /**
     * Sets the type.
     * 
     * @param type the type to set
     */
    public void setType(final String type) {
        this.type = type;
    }

    /**
     * Gets the message.
     * 
     * @return the message
     */
    @XmlElement(nillable = true)
    public String getMessage() {
        return this.message;
    }

    /**
     * Sets the message.
     * 
     * @param message the message to set
     */
    public void setMessage(final String message) {
        this.message = message;
    }

    /**
     * Gets the stackTrace.
     * 
     * @return the stackTrace
     */
    @XmlElement(nillable = true)
    public StackTraceElement[] getStackTrace() {
        return this.stackTrace;
    }

    /**
     * Sets the stackTrace.
     * 
     * @param stackTrace the stackTrace to set
     */
    public void setStackTrace(final StackTraceElement[] stackTrace) {
        this.stackTrace = stackTrace;
    }

    /**
     * Gets the cause.
     * 
     * @return the cause
     */
    @XmlElement(nillable = true)
    public Throwable getCause() {
        return this.cause;
    }

    /**
     * Sets the cause.
     * 
     * @param cause the cause to set
     */
    public void setCause(final Throwable cause) {
        this.cause = cause;
    }

    /**
     * @return the localeErrorCode
     */
    @XmlElement(nillable = true)
    public String getLocaleErrorCode() {
        return this.localeErrorCode;
    }

    /**
     * @param localeErrorCode the localeErrorCode to set
     */
    public void setLocaleErrorCode(final String localeErrorCode) {
        this.localeErrorCode = localeErrorCode;
    } 
```

我如何防止返回堆栈跟踪。我只想要一个响应代码和一个响应消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T20:16:36.383

使用 Apache-CXF 在 JAX-RS Web 服务中处理异常流的最简单方法是通过标有 @Provider 注释的 javax.ws.rs.ext.ExceptionMapper 类（或在 jaxrs:server 的 Provider 部分（jaxrs:providers ). 然后，您可以捕获要返回特定状态代码的特定异常，例如：

```
@Provider
public class FooExceptionMapper implements ExceptionMapper<FooException>  {

    @Override
    public Response toResponse(FooException exception) {
        ... do your work you want to maybe do here
        return Response.status(Response.Status.BAD_REQUEST).entity(...whatever...).build();
    }
} 
```

现在您为这个映射器创建一个 bean（或使用注释驱动），将它绑定到您的服务方法，然后捕获您的异常。在你的 catch 块中简单地抛出这个并让 cxf 的拦截器框架接管。

# java - 在批处理文件中，如何获取名称中数字最大的文件？

> ID：16198045
> 
> 赞同：0
> 
> 时间：2013-04-24T17:05:31.170
> 
> 标签：java, cmd, filenames

我需要在命令提示符窗口批处理文件中执行此操作。我有一个批处理文件，我需要比较两个文件的文件名；例如，我有`whatever-5428.jar`并且`whatever-9001.jar`可能还有更多`whatever*.jar`文件。

我需要为我的批处理文件制作一个脚本，以便它使用编号最高的 jar。（9001高于5428）。这对我来说变得更加困难，因为我不能这样做`java -jar -Xmx2G -XX:MaxPermSize=256m whatever*.jar`，因为 java 不喜欢通配符。

我需要将它与上面的 java 脚本一起使用，因为我使用一定数量的 RAM 和 Perm Size 启动它。

在批处理文件中，我怎样才能得到其中编号最大的 jar 文件？我完全不确定如何使用 java，我只是从批处理文件中启动它，也许有一些方法可以使用某些方法来检查具有最高编号的文件，然后使用以下命令行启动该文件：`java -jar -Xmx2G -XX:MaxPermSize=256m MYFILENAMEWITHTHEHIGHESTNUMBERATTHEEND.jar`

在此处查看我的批处理文件：[http ://www.fileswap.com/dl/XyvIN2VpgF/](http://www.fileswap.com/dl/XyvIN2VpgF/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T17:08:45.840

我会使用[Java Regex](http://www.vogella.com/articles/JavaRegularExpressions/article.html)解析出数字以在两个文件之间进行比较。正则表达式非常灵活，能够处理通配符

编辑：参见下面的输出示例：

```
public static void main(String[] args) throws Exception
{
    System.out.println(getTrailingNumber("whatever-5428.jar"));
    System.out.println(getTrailingNumber("whatever-9001.jar"));
}

public static String getTrailingNumber(String filename)
{
    Pattern pattern = Pattern.compile("-(\\d+)\\.");

    Matcher matcher = pattern.matcher(filename);
    matcher.find();

    return matcher.group(1);
} 
```

输出：

> 5428
> 9001

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T17:36:35.897

在 Windows 批处理文件中使用 DOS 进行字符串匹配和正则表达式是一个非常丑陋的 hack。这就像试图用电锯敲钉子一样。你*可以*做到，但你应该这样做吗？不。

dos 命令`findstr`可以执行有限数量的匹配和正则表达式，如下例所示：

```
@Echo Off
CD "C:\workspace"
Dir /B>Dir.temp
FindStr /R "[0-9]" "Dir.temp">FindStr.temp
Del Dir.temp
For /F "tokens=*" %%a In (FindStr.temp) Do Call :WorkIt "%%a"
Del FindStr.temp
Exit /B

:WorkIt
:: Insert code here.  Use %1 to get the file name with quotes.  For example:
Echo Found a number in %1
Exit /B 
```

1.  创建一个名为 C:\workspace 的目录。
2.  创建一个名为 mybat.bat 的文件并将上面的代码放入其中。
3.  将两个文件放在 C:\workspace 中`1234.txt`，并调用`abcd.txt`
4.  运行上面的bat文件。
5.  输出如下：

> C:\工作区>mybatch.bat
> 
> 在“1234.txt”中找到一个数字

DOS`FindStr`命令只返回编号为 0 到 9 的文件/文件夹。它省略了`abcd.txt`并包括了`1234.txt`. 您可以增加正则表达式的复杂性以仅解析数字，然后将它们转换为整数，然后返回具有最大数字的那个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-14T01:02:29.453

```
for /f %%a in ('dir /b ^|sort /r ^|findstr /r [0-9]') do (
  set "filename=%%a"
  goto done
)
:done
echo the highest found is %filename%
exit /b 0 
```

# php - jquery/php .css() 函数不起作用

> ID：16198049
> 
> 赞同：1
> 
> 时间：2013-04-24T17:05:56.733
> 
> 标签：php, javascript, jquery, css

我已经被一个问题困扰了 2-3 天了。我无法从我在这里或其他来源看到的任何帖子中找到补救措施。我想也许我可以在自己的帖子中得到一些帮助。这是代码：

```
 $grn="/img/grn.png";
    $red="/img/red.png";
    echo "<script>";

    $cnt=0;
    for($i=0;$i<3;$i++)
    {
        $cnt=$cnt+100;
        for($a=1;$a<30;$a++)
        {
            $iid=$cnt+$a;

            echo    "$(document).ready(function()
                    {
                        $(\"#".$iid."\").click(function()
                        {
                            $.get(\"test.php\",{ iddd : ".$iid."},function(data) 
                            {

                                if(data==1)
                                {
                                    $(\"#".$iid."\").css('background-image',url(\"img/grn.png\"));
                                    $(\"#dene\").html(\"<p>GREEN ".$iid."</P>\");
                                }

                                if(data==0)
                                {
                                    $(\"#".$iid."\").css('background-image',url(\"img/red.png\"));
                                    $(\"#dene\").html(\"<p>RED ".$iid."</P>\");
                                }
                            }) 
                        }) 
                    });";
        }
    }
            echo "</script>"; 
```

我知道我的压痕不是很好。但是我有点着急。我的问题是，这条线：

```
 $(\"#".$iid."\").css('background-image',url(\"img/grn.png\")); 
```

不管用。当它不执行时，jquery 也不会在同一 if 语句中执行另一条语句。知道为什么会发生吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T17:08:44.340

你的 url css 需要用引号引起来

```
 v                    v
$(\"#".$iid."\").css('background-image','url(\"img/grn.png\")'); 
```

PS。快点与否，练习正确的缩进/代码格式！一旦你习惯了它并不需要很长时间。

`document.ready`当您只需要一个时，您还创建了大量的s。这是一个经过清理的版本，在 PHP 中更易于阅读：

```
<?php
    $grn="/img/grn.png";
    $red="/img/red.png";
    echo "<script>
        $(document).ready(function(){
    ";
    $cnt=0;
    for ($i=0;$i<3;$i++) {
        $cnt=$cnt+100;
        for($a=1;$a<30;$a++) {
            $iid=$cnt+$a;
            echo <<<EOF

            $("#{$iid}").click(function() {
                $.get("test.php",{ iddd : {$iid}},function(data) {

                    if(data==1) {
                        $("#{$iid}").css('background-image','url("img/grn.png")');
                        $("#dene").html("<p>GREEN {$iid}</P>");
                    }
                    if(data==0) {
                        $("#{$iid}").css('background-image','url("img/red.png")');
                        $("#dene").html("<p>RED {$iid}</P>");
                    }
                });
            });
EOF;
        }
    }
    echo "
        });
    </script>";
?> 
```

在 JS 中：[http ://codepad.org/SVa2If8H](http://codepad.org/SVa2If8H)

* * *

# 更好的解决方案

以整数开头的 Id 属性[不是有效的 W3 HTML](https://stackoverflow.com/a/79022/763468)。您应该重新处理您的 html 元素，可能在数据属性中包含 ID：

```
<span data-iid="123">Click Me</span> 
```

那么你就不需要 PHP 生成的 JS，只需这一点：

```
$(document).ready(function(){

    $("[data-iid]").click(function() {
        var iid = $(this).attr('data-iid');
        $.get("test.php",{ iddd : iid},function(data) {

            if(data==1) {
                $(this).css('background-image','url("img/grn.png")');
                $("#dene").html("<p>GREEN " + iid + "</P>");
            }
            if(data==0) {
                $(this).css('background-image','url("img/red.png")');
                $("#dene").html("<p>RED " + iid + "</P>");
            }
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T17:08:28.160

您需要为背景图像设置的值加上引号...

```
$(\"#".$iid."\").css('background-image','url(\"img/grn.png\")'); 
```

# tomcat6 - 升级声纳（tomcat+声纳）

> ID：16198050
> 
> 赞同：0
> 
> 时间：2013-04-24T17:05:58.890
> 
> 标签：tomcat6, sonarqube

我已经用声纳 2.9 安装了 apache-tomcat。我需要将声纳升级到最新版本。我应该怎么做才能通过工具本身进行升级？

环境 ：

*   linux - debian wheezy
*   JDK 1.6
*   声纳 2.9 升级到 3.5
*   apache-tomcat-6.0.36

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T13:20:17.347

信息：部署配置描述符 sonar.xml 16:44:00,697 |-INFO 在 ch.qos.logback.classic.LoggerContext [默认] - 找不到资源 [logback.groovy] 16:44:00,698 |-INFO 在 ch. qos.logback.classic.LoggerContext[default] - 找不到资源 [logback-test.xml] 16:44:00,698 |-CH.qos.logback.classic.LoggerContext [default] 中的信息 - 找不到资源 [logback .xml] 16:44:00,699 |-CH.qos.logback.classic.LoggerContext[default] 中的信息 - 设置默认配置。16:44:00,892 |-ch.qos.logback.classic.joran.action.ConfigurationAction 中的信息 - 未设置调试属性 16:44:00,894 |-ch.qos.logback.core.joran.action.AppenderAction 中的信息 -即将实例化类型为 [ch.qos.logback.core.ConsoleAppender] 的附加程序 16:44:00,894 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - 将附加程序命名为 [SONAR_WAR] 16:44： 00, 928 |-CH.qos.logback.core.joran.action.NestedComplexPropertyIA 中的信息 - 假设 [评估器] 属性 16:44:00,952 中的默认类型 [ch.qos.logback.classic.boolex.JaninoEventEvaluator] .qos.logback.classic.boolex.JaninoEventEvaluator@4c538974 - 添加 [return] 前缀和分号后缀。表达式变为 [return message.startsWith("files: File not found: /maven");] 16:44:00,952 |-INFO in ch.qos.logback.classic.boolex.JaninoEventEvaluator@4c538974 - 另见[http://logback.qos.ch/codes.html#block](http://logback.qos.ch/codes.html#block) 16:44:01,060 |- ch.qos.logback.core.ConsoleAppender[SONAR_WAR] 中的警告 - 此附加程序不再承认布局作为子组件，而是设置一个编码器。16:44:01,060 |- ch.qos.logback.core.ConsoleAppender[SONAR_WAR] 中的警告 - 为确保兼容性，请将布局包装在 LayoutWrappingEncoder 中。16:44:01,060 |- ch.qos.logback.core.ConsoleAppender[SONAR_WAR] 中的警告 - 另请参阅[http://logback.qos.ch/codes.html#layoutInsteadOfEncoder](http://logback.qos.ch/codes.html#layoutInsteadOfEncoder)了解详情

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T07:16:40.390

您可以在以下升级指南文档中找到所有必需的信息：

[http://docs.codehaus.org/display/SONAR/Upgrade+Guide](http://docs.codehaus.org/display/SONAR/Upgrade+Guide)

当您从相当旧的 Sonar 版本升级时，这里有一些建议：

*   不需要逐个版本升级，直接从2.9升级到3.5.1即可

*   但是，请阅读从 2.9 到 3.5.1 的所有版本升级说明，以免错过一些重要更改

*   显然：**请在开始迁移之前备份您的数据库**，以防在此过程中出现一些问题

如果你遵循这个，一切都应该没问题！

# lisp - 如何在 LISP 中覆盖 (defun eval (expr)) 函数

> ID：16198053
> 
> 赞同：3
> 
> 时间：2013-04-24T17:06:01.563
> 
> 标签：lisp, elisp, common-lisp, clisp, xlispstat

我是 LISP 编程的新手，现在是学期末，我们的老师要求我们做这个项目，我一直在努力完成它，但我被卡住了，所以任何帮助都将不胜感激。项目是`eval (expr)`在 Lisp 中编写一个函数来覆盖已经存在的函数。这是详细信息：

项目描述：以空格分隔的算术表达式中的项目；

```
; Input:
;    1\. The form of arithmetic expression given in prefix notation like LISP 
; Assumptions:
;    1\. binary operations for +, -, *, and / 
;    2\. integer division, no reals
;    3\. an arithmetic expression occupies only one line
;    4\. nested arithmetic expressions permitted
;    5\. all given inputs are syntax correct
;    6\. no need for error handling 
```

我写了一个可以对简单算术表达式进行评估的代码，它可以工作！！但我不能让它在嵌套算术运算上工作。我想我的递归部分有问题，我做错了什么，但它到底是什么 idk :(

这是我的代码：

```
; Assign a character string to a global variable input-prompt
; treat input-prompt as a constant global variable
(setf input-prompt "Please input an arithmetic expression: ")

(setf output-prompt "The value is: ")

(defun prompt-for-input (msg)
  (format t msg)
  (format t "~%"))   ; ~% new line

(defun prompt-for-output (msg)
  (format t msg))

(defun output-msg (result)
  (format t "~S" result) ; ~S takes the result into the print message
  (format t "~%"))

(defun eval (expr)
  (print "My EVAL Function is Working *_*")
  (if (numberp expr) expr)     
  (cond
    ((eq (car expr) '+)
      (if (and (numberp (cadr  expr)) 
               (numberp (caddr expr))) ;to check if we have simple expression
        (+ (cadr expr) (caddr expr)) ;in case both are numbers we add normally
        (if (not (numberp (cadr expr))) 
           ;in case the second argument is not number 
           ;we need to call eval again to check the expression 
          ((eval (cadr exp)))
          (if (not (numberp (caddr expr))) 
             ;in case the third argument is not a number 
             ;we need to call eval again to check the expression
            ((eval (caddr exp)))
            (0)))))
    ((eq (car expr) '-)
      (if (and (numberp (cadr  expr)) 
               (numberp (caddr expr))) ;to check if we have simple expression
        (- (cadr expr) (caddr expr)) ;in case both are numbers we add normally
        (if (not (numberp (cadr expr))) 
           ;in case the second argument is not number 
           ;we need to call eval again to check the expression 
          ((eval (cadr exp)))
          (if (not (numberp (caddr expr))) 
             ;in case the third argument is not a number 
             ;we need to call eval again to check the expression
            ((eval (caddr exp)))
            (0)))))
    ((eq (car expr) '*)
      (if (and (numberp (cadr  expr)) 
               (numberp (caddr expr))) ;to check if we have simple expression
        (* (cadr expr) (caddr expr)) ;in case both are numbers we add normally
        (if (not (numberp (cadr expr))) 
           ;in case the second argument is not number 
           ;we need to call eval again to check the expression 
          ((eval (cadr exp)))
          (if (not (numberp (caddr expr))) 
             ;in case the third argument is not a number 
             ;we need to call eval again to check the expression
            ((eval (caddr exp)))
            (0)))))
    ((eq (car expr) '/)
      (if (and (numberp (cadr  expr)) 
               (numberp (caddr expr))) ;to check if we have simple expression
        (/ (cadr expr) (caddr expr)) ;in case both are numbers we add normally
        (if (not (numberp (cadr expr))) 
           ;in case the second argument is not number 
           ;we need to call eval again to check the expression 
          ((eval (cadr exp)))
          (if (not (numberp (caddr expr))) 
             ;in case the third argument is not a number 
             ;we need to call eval again to check the expression
            ((eval (caddr exp)))
            (0)))))))

    ; it should have eval(expr) function which returns the value of the
    ; arithmetic expression
    ; for instance, 
    ; (+ 2 3) outputs 5
    ; (+ (* 3 2) (/ 4 2))) outputs 8
    ; (* (- 2 3) 5) outputs -5 

    ; driver accepts the input arithmetic expression
    ; evaluate the arithmetic expression
    ; output the reulst of the evaluation of the arithmetic expression
    ; execution is in the loop; to exit the loop; type cntrl-c

(defun driver ()
  (prompt-for-input input-prompt) 
     ;to print "Please input an arithmetic expression
  (let ((expression (read)))      
    (output-msg expression)
    (let ((result (eval expression)))
      (prompt-for-output output-prompt)  
      (output-msg result)))
  (driver)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T19:30:40.023

首先，起到作用的基本调用是......鼓声...... -

```
(apply (symbol-function (car expr)) (cdr expr)) 
```

这假设 - 暂时 - 表达式中的所有参数都已经是数字。

这一行替换了代码中的所有四种情况，它们都是彼此的精确副本，直到要执行的操作。

现在，为了确保我们有号码，我们只需要`eval`在每个号码上调用相同的号码。如果它们是数字，它们将保持原样，如果不是 - 它们将被评估。

让我们只调用我们的新函数`calc`“计算”，而不是：

```
(defun calc (expr)     ; our "eval"
  (cond
    ((numberp expr) expr)
    (T (call (car expr)
             (mapcar #'calc (cdr expr))))))

(defun call (op args)  ; our "apply"
  (apply (symbol-function op)
         args)) 
```

就这样。如果您考虑这种作弊，您可以手动调用该操作，但您仍然不需要为此复制相同的代码块*四次*。:)

如果您确实编写了`call`自己手动调用操作，请注意默认值为`(*)`1，而不是 0；`(-)`并且Common Lisp 中没有默认值`(/)`（在 CLisp 中测试过）。另外，`(/ 2)`应该返回`1/2`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T17:25:57.897

一些提示：

*   像这样的表达`(0)`没有意义。`0`不是函数。类似`((foo))`也没有任何意义。

*   你应该正确地格式化和缩进 Lisp 代码。编辑帮忙。

*   避免使用 , , , ... 之类的功能-使用, `CAR`, `CDR`, ...`CADR``FIRST``REST``SECOND`

*   不要调用函数`EVAL`。这是 Common Lisp 中的内置函数。

# c# - SharePoint SuiteBar 菜单自定义

> ID：16198055
> 
> 赞同：0
> 
> 时间：2013-04-24T17:06:06.057
> 
> 标签：c#, sharepoint, drop-down-menu, sharepoint-2013

我正在寻找自定义 SharePoint 网站顶部的下拉菜单。我使用的是 2013，但我确信来自早期版本的 SP 的解决方案将是相似或相同的。

我已经自定义了 Suite 栏以包含更多链接——在这篇文章之后：[http ://www.sharepointjohn.com/sharepoint-2013-adding-links-suite-bar-newsfeed-skydrive-sites-overriding-suitelinksdelegate-delegate -控制/](http://www.sharepointjohn.com/sharepoint-2013-adding-links-suite-bar-newsfeed-skydrive-sites-overriding-suitelinksdelegate-delegate-control/)

**现在我要自定义的是用户菜单。当您单击它时，您会看到“关于我”和“退出”选项。**

有谁知道将项目添加到此下拉菜单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T20:27:52.803

1.  打开'C:\Program Files\Common Files\microsoft shared\Web Server Extensions\15\TEMPLATE\CONTROLTEMPLATES\welcome.ascx

2.  <`SharePoint:MenuItemTemplate runat="server" ID="项目标题" Text="<%$Resources:wss,personalactions_Title%>" Description="<%$Resources:wss,personalactions_Title_description%>" MenuGroupId="100 " Sequence="100"
    UseShortId="true" />'

3.  回到您的网站，参考该页面，您应该会很好。

谢谢。

# c - 有多个套接字时Linux OS如何调度线程

> ID：16198057
> 
> 赞同：0
> 
> 时间：2013-04-24T17:06:13.013
> 
> 标签：c, linux, gcc, numa

例如，在具有 2 个四核处理器的双插槽系统中，线程调度程序是否尝试将线程保持在同一处理器中的同一进程中？因为在一个进程中的线程有很多共享内存访问的情况下，在不同的处理器中交错不同进程的线程会降低性能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T19:40:16.837

这取决于。

在当前的 Intel 平台上，BIOS 默认值似乎是内存在系统中的插槽之间逐页交错。分配 1Mbyte，一半在一个套接字上，一半在另一个套接字上。这意味着无论您的线程在哪里，它们都可以平等地访问数据。

这使得操作系统非常简单——任何地方都可以。

这可能对你不利。呈现给操作系统的 SMP 硬件环境是由 CPU 在 QPI 上协作合成的。如果有很多线程都在访问相同的数据，那么这些链接会变得非常繁忙。如果他们太忙，那么这会限制性能，并且您会受到 I/O 限制。这就是我所在的地方；采用英特尔内存子系统设计的 Z80 内核与我实际拥有的 nahelem 内核一样快（好吧，我可能夸大了......）。

归根结底，真正的问题是内存不够快。英特尔和 AMD 最近都在内存方面做了一些令人印象深刻的事情，但我们仍然受到其缓慢的阻碍。理想情况下，内存应该足够快，以便所有内核都有时钟频率访问时间。Cell 处理器就是这样做的——每个 SPE 都有一些 SRAM 而不是缓存，一旦你对它们有所了解，你就可以让它们真正唱歌。

===编辑===

还有更多。正如 Basile Starynkevitch 暗示的那样，另一种方法是采用 NUMA。

NUMA 是现代 CPU 的实际体现，内存访问是不统一的，因为其他 CPU 插槽上的内存不能通过寻址总线直接访问。相反，CPU 通过 QPI 链接（或 AMD 的 Hypertransport）请求数据，以要求其他 CPU 从其内存中获取数据并将其发送回。因为 CPU 在硬件中为您完成所有这些工作，所以最终看起来就像一个传统的 SMP 环境。QPI / Hypertransport 非常快，所以大多数时候它足够快。

如果您编写代码以反映硬件架构，那么理论上您可以进行改进。因此，这可能涉及（例如）在系统中拥有两个数据副本，每个套接字上一个。Linux 中有内存关联例程专门以这种方式分配内存，而不是在所有套接字之间交错。还有 CPU 关联例程允许您控制线程在哪个 CPU 内核上运行，这个想法是您在靠近将要处理的数据缓冲区的内核上运行它。

好的，所以这可能意味着对源代码进行大量投资以使其适合您（特别是如果该数据重复与程序的流程不匹配），但如果 QPI 已成为一个有问题的瓶颈，它是唯一的你可以做的事情。

我在某种程度上摆弄了这个。在某种程度上，这是一个正确的 faff。英特尔和 AMD（以及操作系统和库）的整体思路是为您提供一个 SMP 环境，在大多数情况下，这个环境非常好。但是，它们让您通过加载大量库函数来使用 NUMA，您必须调用这些函数来部署所需的线程和内存。

但是，对于需要一点额外速度的边缘情况，如果架构和操作系统是严格的 NUMA，根本没有 SMP，那会更容易。实际上就像 Cell 处理器一样。更容易，不是因为它写起来很简单（实际上它会更难），而是如果你让它运行起来，你就会确定它是硬件所能达到的一样快。使用我们现在拥有的伪造 SMP，您可以尝试使用 NUMA，但您大多想知道它是否尽可能快。这不像库告诉您您正在访问实际驻留在另一个套接字上的内存，它们只是让您这样做，而没有暗示还有改进的空间。

# jquery-plugins - jQuery 标签管理器 – 页面将使用 get 变量重新加载

> ID：16198062
> 
> 赞同：0
> 
> 时间：2013-04-24T17:06:31.560
> 
> 标签：jquery-plugins

我试图在最后几天徒劳地实现 jQuery 标签管理器（ [http://welldonethings.com/tags/manager ）......](http://welldonethings.com/tags/manager)

环境是什么样的：它是一个引导驱动的网站，上面有几个元素，应该能够被标记（在引导模式中）。

到目前为止我所做的：我已将 tagManager 类添加到我的输入字段中。

```
<form>
   <input type="text" name="tags_0" placeholder="Tags" class="tagManager">
</form> 
```

此外，在我网站的 head 部分中，我包含了一个自定义 javascript 文件：

```
<script type='text/javascript' src="js/javascript.js"></script> 
```

该文件如下所示：

```
jQuery(".tagManager").tagsManager(); 
```

当然还包括 jQuery 库和 bootstrap & TagsManager css 文件。

但是，当我输入标签时，它会使用 get-variable "?tags_0=test" 重新加载网站

我现在有点沮丧。看起来很简单，但我无法让它工作......

最好的问候，尼科

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-20T22:03:58.043

This probabily isn't going to help the original poster since this was asked some time ago, but I was having the exact same problem and when I searched for help I found this question, so my answer might help someone that ends up here with the same problem.

I was trying to use this jQuery plugin as well and I was having a hard time to get it working too. Spent hours checking the code and searching for help but always got to the conclusion that the code was correct, so I had no idea what was wrong. However, somehow, it then started working. One thing I noticed was that if I had the call for the css file first and then the js files, it would show some weird thing in the place where it should have the "x" for deleting the tag. But if I called the js files first and then the css file, it would work perfectly.

This is the code I used:

```
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="bootstrap-tagmanager.js"></script>
<link href="bootstrap-tagmanager.css" rel="stylesheet" type="text/css">
</head>
<body>

<input type="text" name="products" placeholder="Add your Products" class="tagManager">

<script>
 jQuery(".tagManager").tagsManager();
</script>

</body> 
```

Hope this helps someone.

# json - 使用Spring框架的jsp中的动态表

> ID：16198066
> 
> 赞同：1
> 
> 时间：2013-04-24T17:06:43.263
> 
> 标签：json, spring, dynamic-tables

我在 Spring MVC 中工作。剧情是这样的。。

1.  我从下拉框中选择一个值，然后单击 jsp 上的一个按钮。
2.  使用 javascript 函数触发事件。
3.  根据输入，执行一些数据库查询，检索记录并将
    数据设置为控制器类中的 JSON 对象。
4.  如何使用 table 将此 JSON 对象填充到同一个 jsp 中？
5.  我可以在新选项卡中填充相同的内容吗？

如果您提出解决方案，那么这对我和我的朋友们将非常有帮助.. 谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:48:19.977

要使用 JOSN 对象，更好的选择是使用 JQuery 并使用 JQuery 向控制器发送请求并获取 JSON 对象并在 html 代码中简单打印。

另一种选择是在控制器中生成 html 代码并作为响应发送，然后将该响应简单地打印为 div 的 html 源。你在找我吗？

# javascript - 拒绝从带有亚马逊网址的 pdf.js 中获取不安全的标头“Accept-Ranges”错误

> ID：16198067
> 
> 赞同：15
> 
> 时间：2013-04-24T17:06:46.067
> 
> 标签：javascript, pdf, amazon-ec2, pdf.js

我正在尝试将 pdf.js 与范围请求一起使用（渐进式加载 pdf 文档），但是当我尝试从 amazon s3 url 加载 pdf 时，此错误出现在控制台中：

-拒绝获得不安全的标题“Accept-Ranges”

并且 pdf 不是通过 206 部分内容（范围请求）加载，而是通过 200 加载，然后在查看器中查看。

这是 pdf 网址的示例：

[https://kotob.s3.amazonaws.com/book.pdf?Signature=irgVfoAZuPPIp5kpCesni2MzpLo%3D&Expires=1366576877&AWSAccessKeyId=AKIAILBHXSTPUIBTRMSA](https://kotob.s3.amazonaws.com/book.pdf?Signature=irgVfoAZuPPIp5kpCesni2MzpLo%3D&Expires=1366576877&AWSAccessKeyId=AKIAILBHXSTPUIBTRMSA)

任何帮助

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-07-16T07:11:14.663

像这样在亚马逊上设置 CORS 政策似乎有帮助。

```
<?xml version="1.0" encoding="UTF-8"?>
<CORSConfiguration xmlns="http://s3.amazonaws.com/doc/2006-03-01/">
    <CORSRule>
        <AllowedOrigin>*</AllowedOrigin>
        <AllowedMethod>GET</AllowedMethod>
        <AllowedMethod>PUT</AllowedMethod>
        <AllowedMethod>POST</AllowedMethod>
        <AllowedMethod>DELETE</AllowedMethod>
        <MaxAgeSeconds>3000</MaxAgeSeconds>
        <!-- this part is critical -->
        <AllowedHeader>*</AllowedHeader>
        <ExposeHeader>Accept-Ranges</ExposeHeader>
        <ExposeHeader>Content-Encoding</ExposeHeader>
        <ExposeHeader>Content-Length </ExposeHeader>
        <ExposeHeader>Content-Range</ExposeHeader>
     </CORSRule>
</CORSConfiguration> 
```

但是在我将资源放在 CDN 上之后，这不起作用。无论如何，即使在 CDN 上使用 200，在 S3 上使用 206 部分下载，它似乎也快得多。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-11-12T15:02:22.717

迟到的答案，但是使用 Azure blobs（我知道你问过 AWS，但这让我发疯了想弄清楚所以无论如何都要回答）你必须将 Accept-Ranges 专门设置为允许的标头，只是将其设置为`*`不起作用。

我使用以下 C# 代码来执行此操作：

```
var url = new Uri(String.Format("https://yourblob.blob.core.windows.net"));
var credentials = new StorageCredentials("accountname", "key");
var client = new CloudBlobClient(url, credentials);

var corsRule = new CorsRule();

corsRule.ExposedHeaders.Add("Accept-Ranges");
corsRule.ExposedHeaders.Add("Content-Encoding");
corsRule.ExposedHeaders.Add("Content-Length");
corsRule.ExposedHeaders.Add("Content-Type");

corsRule.AllowedHeaders.Add("Accept-Ranges");
corsRule.AllowedHeaders.Add("Content-Encoding");
corsRule.AllowedHeaders.Add("Content-Length");
corsRule.AllowedHeaders.Add("Content-Type");

var serviceProperties = CloudBlobClient.GetServiceProperties();
serviceProperties.Cors.CorsRules.Clear();
serviceProperties.Cors.CorsRules.Add(corsRule);
client.SetServiceProperties(serviceProperties); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-27T20:32:36.067

你需要设置

```
Access-Control-Allow-Headers : Accept-Ranges 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-14T05:20:29.567

我也有同样的问题。我没有直接传递 url，而是使用 url ="url" 和 withCredentials = true 传递对象。

传递直接 url 时 Cookie 未通过

查看以下内容以了解如何形成 [PDF.JS 的对象：使用 ArrayBuffer 或 Blob 而不是 URL 渲染 PDF](https://stackoverflow.com/questions/24288221/pdf-js-render-pdf-using-an-arraybuffer-or-blob-instead-of-url)

# matlab - 将while循环数据保存到向量中

> ID：16198068
> 
> 赞同：0
> 
> 时间：2013-04-24T17:06:49.487
> 
> 标签：matlab, vector, while-loop

我有这个while循环，它运行良好并提供正确的输出数据，但它结束时只保存最新的数据点，我怎样才能将每个循环数据保存到一个向量中？

```
t0=0.15; % Initial time
v0=46.5285; % Initial velocity
h0=3.4896; %Initial height
dt=0.001; % Timesteps/Precision
m=0.05; %Mass
g=9.81; % The gravitational constant

Velocity2=46.5285;

t = t0;
while Velocity2>=-20
Velocity2=hastighet(acceleration(0,m,g),t,v0,t0);
Height2=hojd(acceleration(0,m,g),t,h0,v0,t0);
 t=t+dt;
end 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:15:02.983

```
t = t0;
velocityData = [];
heightData = [];
timeData = [];
counter = 1;

while Velocity2>=-20
    Velocity2=hastighet(acceleration(0,m,g),t,v0,t0);
    Height2=hojd(acceleration(0,m,g),t,h0,v0,t0);
    velocityData(counter) = Velocity2;
    heightData(counter) = Height2;
    timeData(counter) = t;
    t=t+dt;
    counter = counter + 1;
end 
```

# html - 在一行中显示文本和图像（内联）

> ID：16198069
> 
> 赞同：0
> 
> 时间：2013-04-24T17:06:56.160
> 
> 标签：html

我想在我的网站顶部有一个徽标栏。我希望这是一个简单的文本，旁边有一个图像。

我正在使用以下代码，但图像显示在文本下方。我正在使用一个 div，它在我设置为内联的列表中同时包含文本和图像，但它们没有显示在一行中。

```
<doctype! html>
<html>

<head>
    <title> Breaditt </title>
    <style>
html, body {
font-family: sans-serif;
margin: 0;
padding: 0; }

#logobar {
background: rgb(206, 211, 255);
display: inline-block; }

#logobar ul {
list-style-type: none;
margin: 0; }

#logobar li {
display: inline; }

#logobar p {
font-size: 18;
font-family: Comic sans MS; }

    </style>
</head>

<body>

    <div id="logobar">
        <ul>
        <li><p> Breaditt </p></li>
        <li><img src="img/logo.jpg" alt="breaditt cat" width="100"     height="100"></li>
        </ul>
    </div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:13:14.990

无需使用列表。尝试：

```
<div id="logobar">
   <p> Breaditt </p>
   <img src="img/logo.jpg" alt="breaditt cat" width="100"     height="100">
</div> 
```

使用 CSS：

```
#logobar>* {
display: inline; } 
```

[例子](http://fiddle.jshell.net/WkMSW/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T17:09:44.293

您应该删除文本周围的段落。该段落是块元素，它将打破行：

```
<div id="logobar">
    <ul>
        <li>Breaditt</li>
        <li><img src="img/logo.jpg" alt="breaditt cat" width="100"     height="100"></li>
    </ul>
</div> 
```

另一种选择是内联段落：

```
#logobar p {
    font-size: 18;
    font-family: Comic sans MS; 
    display: inline;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T17:10:02.167

改变：

```
#logobar li {
    display: inline;
} 
```

至

```
#logobar li {
    float: left;
} 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/WKLmG/1/)**

# django - 在 Django 中为扩展用户扩展 UserCreationForm

> ID：16198077
> 
> 赞同：1
> 
> 时间：2013-04-24T17:07:18.570
> 
> 标签：django, django-forms, django-users

我扩展了我的 django 用户，现在需要创建一个注册表单。

我已经弄清楚了大部分，但我不知道如何排除注册期间不需要的字段。知道我在注册表中看到所有字段。

这是代码：

模型.py

```
class Artist(Model):
    user = OneToOneField(User, unique=True)
    address = CharField(max_length=50)
    city = CharField(max_length=30)
    ustid = CharField(max_length=14)
    date_of_birth = DateField()
    bio = CharField(max_length=500)
    def __unicode__(self):
        return self.user.get_full_name()

User.profile = property(lambda u: Artist.objects.get_or_create(user=u)[0]) 
```

表格.py

```
class RegistrationForm(UserCreationForm):
    class Meta:
        model = User

    def __init__(self, *args, **kwargs):
        super(RegistrationForm, self).__init__(*args, **kwargs)
        artist_kwargs = kwargs.copy()
        if kwargs.has_key('instance'):
            self.artist = kwargs['instance'].artist
            artist_kwargs['instance'] = self.artist
        self.artist_form = ArtistForm(*args, **artist_kwargs)
        self.fields.update(self.artist_form.fields)
        self.initial.update(self.artist_form.initial)

    def clean(self):
        cleaned_data = super(RegistrationForm, self).clean()
        self.errors.update(self.artist_form.errors)
        return cleaned_data

    def save(self, commit=True):
        self.artist_form.save(commit)
        return super(RegistrationForm, self).save(commit) 
```

如何排除字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:20:25.157

```
class Meta:
    model = User
    exclude = ('bio',) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T20:39:10.803

您不能包含或排除不是元模型成员的字段。

您可以做的是在每种形式中都这样做。在这种情况下，`UserCreationForm`由 扩展`ArtistForm`。只需限制表单中属于正确元模型的字段即可。

# networking - 分析 `pcap` 文件中每个 tcp 数据包的 tcp 有效负载

> ID：16198082
> 
> 赞同：2
> 
> 时间：2013-04-24T17:07:26.503
> 
> 标签：networking, pcap, libpcap, tcpdump

我`pcap`在每个 pcap 文件中有很多文件还有一些 tcp 数据包我要执行以下步骤：

1过滤pcap文件以获得预期的tcp数据包（如果使用tshark，过滤器就像 `tcp.srcport==80 and tcp.dstport==20000`）。每个 tcp 包中的 tcp 数据都是几十字节的，

```
 1) the first 2 bytes are sequence number
  2) the second 2 bytes indicate a length: **n**
  3) the following **n** bytes are random (if **n** is 2, then there are 2 random bytes)
  4) immediately after the **n** bytes is an IP address 
```

2 从每个 tcp 数据包中，我想获取源 IP 和 IP 地址字符串，如中所述`4)`

最重要的是，我只是想从每个tcp数据包中获取一个IP对，源IP很容易从tshark中获得，但是tcp数据中的IP地址需要花点功夫

有没有可以用于我的目标的好的源代码片段或好的方法？谢谢！

# php - content-type 导致 chrome 调用函数两次

> ID：16198085
> 
> 赞同：3
> 
> 时间：2013-04-24T17:07:35.507
> 
> 标签：php, google-chrome, pdf, content-type

以下代码最特殊的问题。它向浏览器返回一个 pdf 报告。

```
function cart_aspdf() {
    trace('cart_aspdf_in');
    $file = 'order_WS000250.pdf';
    header('Content-type: application/pdf');
    header('Content-Disposition: inline; filename="' . $file . '"');
    $file =  APPPATH.'pdfcache/'.$file;
    header('Content-Transfer-Encoding: binary');
    header('Content-Length: ' . filesize($file));
    header('Accept-Ranges: bytes');
    trace('cart_aspdf_readfile');
    @readfile($file);
    trace('cart_aspdf_out');
} 
```

Opera,firefox,ie,safari 中的跟踪输出如您所料：

> 1.  cart_aspdf_in
> 2.  cart_aspdf_readfile
> 3.  cart_aspdf_out

但是 chrome 的跟踪显示以下内容，这似乎表明该函数至少被调用了两次，如果不是三次的话。为什么会这样？

> 1.  cart_aspdf_in
> 2.  cart_aspdf_readfile
> 3.  cart_aspdf_out
> 4.  cart_aspdf_in
> 5.  cart_aspdf_readfile
> 6.  cart_aspdf_in
> 7.  cart_aspdf_readfile
> 8.  cart_aspdf_out

如果我省略 content-type 行，则不会出现问题，但是 chrome 显示了没有用的原始 pdf 数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T21:58:14.267

我遇到了同样的问题。

```
header('Content-Disposition: inline;'); 
```

无论出于何种原因，当内容处置是内联时，它会调用该页面两次。

这给了我尝试使用引荐来源网址的问题，因为第二次调用没有传递引荐来源网址数据。

使用

```
header('Content-Disposition: attachment;'); 
```

只运行一次，但不会在浏览器 PDF 查看器中显示。它将改为下载文件。

我认为这需要发布在 chrome 的 bugtracker 上。这很烦人，并且对于流式传输文件会浪费带宽。

# command-line - .tar 与 .tgz ...有什么区别？

> ID：16198087
> 
> 赞同：7
> 
> 时间：2013-04-24T17:07:50.850
> 
> 标签：command-line, tar

所以我只是归档了一个电子邮件提交的作业，并被讲师要求使用 tar 命令并创建一个 .tgz 文件，我使用以下命令行脚本完成了该文件：

```
tar -cvf filename.tgz {main.cpp other filenames here} 
```

存档或任何内容都没有问题，但是当我通过电子邮件发送文件时，gmail 阻止我说我的文件包含可执行文件（我假设 main.cpp？），并且出于安全原因不允许这样做。

因此，我运行了相同的脚本，但这次创建了一个 .tar 文件，如下所示：

```
tar -cvf filename.tar {main.cpp filenames here} 
```

再次，档案很好，但现在 gmail 可以让我通过电子邮件发送档案。那么区别是什么呢？我只是为此目的才真正使用过 tar，所以我并不真正熟悉不同扩展的用途。显然，我已经找到了获得所需功能的方法，但像所有修补匠一样，我很好奇。

你说什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-24T17:09:09.843

完全没有区别。文件名只是一个文件名。 *通常*，当您使用该`tgz`表单时，它表明您已经 gzip 压缩了 tar 文件（作为第二步或使用`z`标志）：

```
tar zcvf filename.tgz {filenames} 
```

或者

```
tar cvf filename {filenames}
gzip -S .tgz filename 
```

`.tar`，另一方面，通常表示“这是一个*未压缩*的tar 文件”：

```
tar cvf filename.tar {filenames} 
```

大多数现代 tar 实现还支持`j`使用`bzip2`压缩的标志，因此您也可以使用：

```
tar jcvf filename.tar.bz2 {filenames} 
```

# twitter-bootstrap - LESS：作为mixin访问媒体查询中的类

> ID：16198088
> 
> 赞同：5
> 
> 时间：2013-04-24T17:07:55.273
> 
> 标签：twitter-bootstrap, less, media-queries

假设有这样的声明（实际上是 Bootstrap）：

```
@media screen and (min-width: 768px) {
  .navbar {
    padding-top: 0;
  }
} 
```

是否可以像任何其他类或 mixin 一样访问此媒体查询中的 .navbar （它外部也有一个声明）？我想在其他地方重新使用它的声明（嗯，不完全是这个，但你明白了:-)），例如：

```
.left-nav {
    .navbar; // Use the one from the media query here.
} 
```

LESS可以做到这一点吗？

我见过一个[非常相似的问题](https://stackoverflow.com/questions/14384029/using-class-set-in-media-query-as-mixin-in-less)，虽然这里的区别是我不能重构 `.navbar`到媒体查询之外，因为这是在 Bootstrap 的 LESS 文件中。我知道 LESS 不关心媒体查询，因为它们只是另一种类型的选择器；但是如何访问这些选择器中的声明（我尝试了一些明显的选择器，但都没有奏效）。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T19:41:24.390

我不知道除了从自身*内部*之外的任何方式，`@media`例如：

**这个少**

```
@media screen and (min-width: 768px) {
  .navbar {
    padding-top: 0;
  }
  .left-nav {
    .navbar; // Use the one from the media query here.
  }
}

.navbar {
  padding: 20px;
} 
```

**生成这个 CSS**

```
@media screen and (min-width: 768px) {
  .navbar {
    padding-top: 0;
  }
  .left-nav {
    padding-top: 0;
  }
}
.navbar {
  padding: 20px;
} 
```

我相当肯定这*不是*你想要做的。

但是，我相信，由于`@media`它本身不是一个选择器（它是浏览器的查询字符串），因此它本身不能作为一个 mixin 或作为 LESS 中的命名空间来访问，因此它的内容是无法访问的你渴望。

如果我错了，我希望有人发布答案——但我并不期待它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-12-06T18:25:43.993

@media 在使用 LESS 时实际上被解释为 LESS 变量。如果它没有被声明为任何东西，那么它将不起作用，但您可以将它用作一个 LESS 变量，该变量设置为带有文字字符串的本机 CSS 含义，因此作为一个 LESS 变量，我将 @media 设置为这样：

```
@media: "@media"; 
```

然后我可以像使用原生 css 所期望的那样使用@media，例如：

```
.random-widget {
    height: 100px;    
    @media (min-width: @screen-sm) {         
        height: 300px;
    }  
} 
```

# python - sqlite 3 列不存在，即使它已创建

> ID：16198091
> 
> 赞同：0
> 
> 时间：2013-04-24T17:08:08.180
> 
> 标签：python, sqlite

我在数据库中创建了一个表，其中有一列名为“recipeName”。将新创建的表提交到数据库后，出现以下错误：

```
 OperationalError: table recipes has no column named recipeName 
```

这是创建表的代码，以及将内容输入数据库的代码......

```
 cursor.execute("""CREATE TABLE IF NOT EXISTS \
                                                recipes('id INT PRIMARY KEY AUTO_INCREMENT, recipeName')""")

#Save data to database
conn.commit()

cursor.execute("""INSERT INTO recipes(recipeName) VALUES('%s')""" % (recipeName)) 
```

我会非常感谢我得到的任何帮助......这让我很困惑......我已经工作了好几天了，但我一直无法找到解决办法......

提前致谢 ：）

瑞恩:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:11:39.217

```
cursor.execute("CREATE TABLE IF NOT EXISTS recipes([id] INTEGER PRIMARY KEY AUTOINCREMENT, [recipeName])") 
```

您只有一列名为：`'id INT PRIMARY KEY AUTO_INCREMENT, recipeName'`

同样在 sqlite 中，您需要使用 INTEGER PRIMARY KEY AUTOINCREMENT（不是 INT 和 AUTO_INCREMENT）

# oracle - Oracle Date Function with between operator 在 oracle 10g 中没有给出正确的结果？

> ID：16198096
> 
> 赞同：1
> 
> 时间：2013-04-24T17:08:30.617
> 
> 标签：oracle, oracle10g

我开发了一个查询

```
select accountname count(transactions)
from table1 group by accountname
where date between '27-mar-2012' and '27-jan-2013' 
```

但它给出了所有交易而不考虑和运算符之间，即它正在考虑从一月到十二月的所有值。我的表包含日期列值，例如 27-mar-2012 ...

如果我使用

```
select accountname count(transactions) from table1
group by accountname
where date between cast('27-mar-2012' as date) and cast( '27-jan-2013' as date) 
```

我得到错误的结果。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T21:54:09.443

一种可能性是 Oracle 正在运行查询：

```
select accountname, count(transactions)
from table1
group by accountname 
```

因为该`where`子句在`group by`.

我会建议：

```
select accountname, count(transactions)
from table1
where date between to_date('2012-03-27', 'yyyy-mm-dd') and to_date('2013-01-27', 'yyyy-mm-dd')
group by accountname 
```

`to_date()`比 更安全`convert()`。使用 ANSI 标准日期格式是个好主意（恕我直言）。

# css - CSS 页面居中

> ID：16198098
> 
> 赞同：0
> 
> 时间：2013-04-24T17:08:35.197
> 
> 标签：css, center, conflict

我不确定我的代码在哪里搞砸了，但我正试图让我的代码居中。这是我到目前为止所拥有的：

我遇到的问题是页面实际上不会居中。加载时，左边距只有 10px。我确定某处存在冲突，或者我只是搞砸了一些事情，而且我已经搜索了几个小时，但一无所获。这是以下代码：

```
body {
background-color: #12121D;
}   

#contain {
display: block;
width: 1000px;
margin: 0 auto;
}

.version{
text-align:right;
font-family: Calibri, sans-serif, serif;
text-decoration:none;
color:#00F;
}

#header {
width: 1000px;
height: 230px;
    }

#logo {
width: 600px;
margin: 50px 0px 0px 10px;
padding: 0px;
float: left;
position: absolute;
  }

#banner {
text-align: right;
float: right;
z-index: -1;
    }

#menu {
height: 80px;
margin: 0 auto;
}

#main {
height: 500px;
width: 850px;
margin-left: 75px;
/*position: absolute;*/
z-index: 4;
/*float: left*/;
  }

#content {
width: 850px;
height: 500px;
float: left;
margin-left: 0px;
     } 
```

html如下：

```
<body>
<div id="contain">
    <div id="header">
        <div id="logo"> <img src="images/logo.png" alt="logo" />
        <br />
        <a class="version" href="JavaScript:changeSheets(1)">View       Mobile<a/>
        </div>
        <div id="banner"><img src="images/banner.png" alt="banner"/></div>
    </div>
<div id="menu">
    <div class="pages">
    <ul>
        <li><a href="index.html">Front Page</a></li>
        <li><a href="reviews.html">Reviews</a></li>
        <li><a href="releases.html">Releases</a></li>
        <li><a href="author.html">About Me</a></li>
        <li><a href="contact.html">Contact Info</a></li>
    </ul>
    </div>
</div>
<div id="main">
    <div id="content">
        <div class="why" id="whyBackground"> <img src="images/reviewsites.png" alt="reviewsites"/>
            <h1>Why am I doing this?</h1>
            <br />
            Insert text here
            <h1>What is my goal?</h1>
            Insert text here
        </div>
    </div>
</div>
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:23:20.683

您好，您的代码是：

```
http://jsfiddle.net/w9Zgc/2/ 
```

在我的屏幕上，较大的 1920px 页面居中。我认为你的屏幕分辨率接近 1024px 宽度，所以左边距等于 10px 是相当合理的。另一个建议是重置主体的填充和边距

```
body, html {
    padding:0;
    margin: 0;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-24T19:09:49.263

从您在[http://jsbin.com/itiwez/2/edit的链接来看](http://jsbin.com/itiwez/2/edit)

我在你的 CSS 中删除`@charset "utf-8"`了它并立即工作（至少在你的 jsbin 演示中）。您的 CSS 文件实际上是 UTF-8 格式吗？

仅供参考：[为什么指定@charset "UTF-8"；在你的 CSS 文件中？](https://stackoverflow.com/questions/2526033/why-specify-charset-utf-8-in-your-css-file)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-24T17:21:36.370

帮助您居中 div 的一件事是指定宽度，然后将左右边距设置为自动：

```
#main{
   width: 850px;
   margin-left: auto;
   margin-right: auto;
} 
```

# python - 有没有办法向 Python Suds 客户端提供外部 WSDL 文件

> ID：16198111
> 
> 赞同：2
> 
> 时间：2013-04-24T17:09:11.817
> 
> 标签：python, soap, wsdl, suds

我正在使用项目提供外部 WSDL 文件的 SOAP 服务。我正在使用 Python + Suds 连接到该服务。我遇到了问题，因为 (https) 服务 URL 如下所示：

/sipxconfig/services/UserService?wsdl

但是该 URL的 WSDL 与项目提供的外部 WSDL 文件*不匹配。*返回的 SOAP 文档*与*外部 WSDL 文件匹配。所以我的 suds 客户提出了一个错误。

到目前为止，我已经设法通过编写一个 suds 插件来“纠正”返回的 SOAP XML 以使其与动态创建的 WSDL（在 URL 处）相匹配来解决这个问题。但是，我希望有一种方法可以为 subs 客户端提供外部 WSDL 文件，然后将其切换为使用服务的 URL。

我试过这样的事情：

```
wsdl_file = os.path.abspath(args.wsdl_file)
client = Client("file://%s" % wsdl_file, transport=t, username=sip_user, password=sip_pwd, doctor=doctor)
client.set_options(location=url)

#Get the results.
user_search = client.factory.create("UserSearch")
user_search.byUserName = args.find_user
user_search.byFuzzyUserNameOrAlias = args.fuzzy
user_search.byGroup = args.group

result = client.service.findUser(user_search)
#^^^
#Error here! 
```

但它最终导致`MethodNotFound`异常。我在另一个终端上运行 netstat，我可以看到客户端没有与外部服务建立网络连接。

有其他人设法从文件中提供 Suds WSDL 吗？

谢谢，卡尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T18:40:23.110

所以我确定我在正确的轨道上，但我的 SOAP 服务有多个端口。我需要执行以下操作：

```
wsdl_file = os.path.abspath(args.wsdl_file)
client = Client("file://%s" % wsdl_file, transport=t, username=sip_user, password=sip_pwd, doctor=doctor)
client.set_options(location=url)

#Get the results.
user_search = client.factory.create("UserSearch")
user_search.byUserName = args.find_user
user_search.byFuzzyUserNameOrAlias = args.fuzzy
user_search.byGroup = args.group

result = client.service['UserService'].findUser(user_search)
#                      ^^^^^^^^^^^^^^^
# This was the missing bit that threw me off! 
```

谢谢，卡尔

# mysql - 如何在此触发器中使用 concat 函数

> ID：16198112
> 
> 赞同：0
> 
> 时间：2013-04-24T17:09:12.000
> 
> 标签：mysql, triggers

我在下面有这个触发器，它在 emplog 表中插入新值，我想让我的触发器在描述列中插入发生的事件，例如，如果我更改了 last_name，我希望它显示为 old.lastname 更改为new.last_name，如果它是更新的名字或性别或出生日期或婚姻或社会保障号码，它应该做同样的事情，我是一个新手我怎么能做到这一点让说我想使用 concat 函数？

```
CREATE TRIGGER emplog_update AFTER UPDATE ON emp 
FOR EACH ROW 
INSERT INTO emplog VALUES 
(NEW.id,NEW.lastname,NEW.firstname,NEW.gender,NEW.dob,NEW.marital,NEW.SSN,'U',NULL,USER(),('this is where the description will go')); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:55:10.547

您可以使用`select`而不是`values`生成列列表。

您可以使用`concat_ws()`case 语句来比较值，从而将字符串连接在一起。以下版本假定列没有 NULL 值：

```
CREATE TRIGGER emplog_update AFTER UPDATE ON emp 
FOR EACH ROW 
INSERT INTO emplog  (id, lastnmae, firstname, . . .)
    select NEW.id,NEW.lastname,NEW.firstname,NEW.gender,NEW.dob,NEW.marital,NEW.SSN,'U',NULL,USER(),
           concat_ws(',',
                     (case when new.id <> old.id then 'id' end),
                     (case when new.lastname <> old.lastname then 'lastname' end),
                     (case when new.firstname <> old.firstname then 'firstname' end),
                     . . .
                    ); 
```

请注意，您应该在`insert`staetment 中列出表格的列。这是保持代码可维护性的好习惯，对于触发器尤其重要。如果有人删除或重命名列，则触发器可能会在下一次更新时失败，并带有难以理解的电子邮件消息。

`...`用所有列的类似代码替换。

# python - FANN Python 绑定失败

> ID：16198113
> 
> 赞同：2
> 
> 时间：2013-04-24T17:09:18.340
> 
> 标签：python, neural-network, swig, fann

我刚刚构建并安装了[libfann](http://leenissen.dk/fann/wp/language-bindings/)和相关的 python 绑定。python 设置似乎运行正常：

```
$ sudo python setup.py install
Running SWIG before: swig -c++ -python pyfann/pyfann.i
running install
running build
running build_py
copying pyfann/libfann.py -> build/lib.macosx-10.5-x86_64-2.7/pyfann
running build_ext
building 'pyfann._libfann' extension
gcc -fno-strict-aliasing -I/Users/dwilliams/Desktop/Anaconda/include -arch x86_64 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -DSWIG_COMPILE -I../src/include -I/Users/dwilliams/Desktop/Anaconda/include/python2.7 -c pyfann/pyfann_wrap.cxx -o build/temp.macosx-10.5-x86_64-2.7/pyfann/pyfann_wrap.o
cc1plus: warning: command line option "-Wstrict-prototypes" is valid for Ada/C/ObjC but not for C++
g++ -bundle -undefined dynamic_lookup -L/Users/dwilliams/Desktop/Anaconda/lib -arch x86_64 -arch x86_64 build/temp.macosx-10.5-x86_64-2.7/pyfann/pyfann_wrap.o ../src/doublefann.o -o     build/lib.macosx-10.5-x86_64-2.7/pyfann/_libfann.so
running install_lib
creating /Users/dwilliams/Desktop/Anaconda/lib/python2.7/site-packages/pyfann
copying build/lib.macosx-10.5-x86_64-2.7/pyfann/__init__.py ->     /Users/dwilliams/Desktop/Anaconda/lib/python2.7/site-packages/pyfann
copying build/lib.macosx-10.5-x86_64-2.7/pyfann/_libfann.so -> /Users/dwilliams/Desktop/Anaconda/lib/python2.7/site-packages/pyfann
copying build/lib.macosx-10.5-x86_64-2.7/pyfann/libfann.py -> /Users/dwilliams/Desktop/Anaconda/lib/python2.7/site-packages/pyfann 
```

但随后导入失败：

```
$ python -c 'import pyfann'
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "pyfann/__init__.py", line 4, in <module>
    import libfann
  File "pyfann/libfann.py", line 26, in <module>
    _libfann = swig_import_helper()
  File "pyfann/libfann.py", line 18, in swig_import_helper
    import _libfann
ImportError: No module named _libfann 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T09:08:02.760

我遇到了类似的问题，但在 Mac OS 10.7 上使用了 python 3。以下对我有用，所以希望它可以帮助你一点：

我的错误，类似于你的：

```
>>> import pyfann
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/pyfann/__init__.py", line 4, in <module>
    import libfann
ImportError: No module named 'libfann' 
```

所以，我环顾了一下文件`__init__.py`，它看起来像这样：

```
#
# Fast Artificial Neural Network library for Python
#
import libfann
__all__ = [
    'libfann'
] 
```

由于某种原因，它找不到 libfann，但 libfann 与 .libfann 位于完全相同的文件夹中`__init__.py`。也许我们可以编辑`__init__.py`并告诉它 libfann 在哪里：

```
#
# Fast Artificial Neural Network library for Python
#

# import imp so we can load modules ourselves rather than through import magic
import imp

# try to load libfann, giving the exact path of where libfann resides
imp.load_source ('libfann','/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/pyfann/libfann.py') 
```

然后尝试运行以下示例之一：

```
python3 ~/Downloads/FANN-2.2.0-Source/python/examples/simple_train.py 
FANN Error 1: Unable to open configuration file "../../examples/xor.data" for reading.
FANN Error 2: Unable to open configuration file "nets/xor_float.net" for writing. 
```

我不得不打开 simple_train.py 并输入它抱怨找不到配置文件的完整路径，但现在它运行正常：

```
python3 ~/Downloads/FANN-2.2.0-Source/python/examples/simple_train.py
Max epochs   100000\. Desired error: 0.0001000000.
Epochs            1\. Current error: 0.2500073016\. Bit fail 4.
Epochs           39\. Current error: 0.0000279390\. Bit fail 0. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-16T21:18:53.830

就我而言，“将 fann2.libfann 作为 libfann 导入”有效。

托马斯

# highcharts - highcharts 散点图未加载大量数据

> ID：16198114
> 
> 赞同：1
> 
> 时间：2013-04-24T17:09:20.470
> 
> 标签：highcharts

所以我正在构建一个散点图，连续显示一些点，基本上显示有人搞砸的时间差距。出于某种原因，当我得到很多数据点时，图表什么也不加载，我不知道为什么。但是如果我减少它会加载的点。

很遗憾，我无法通过这里的代码，它太大了。但是我设置了一个简单的页面，您可以在其中看到它

[http://beta.sc2replaystats.com/highchart_test.php](http://beta.sc2replaystats.com/highchart_test.php)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T18:28:34.697

查看 turboThreshold 属性：

[http://api.highcharts.com/highcharts#plotOptions.series.turboThreshold](http://api.highcharts.com/highcharts#plotOptions.series.turboThreshold)

# javascript - 使用 nodejs 和 socketio 从 arduino 读取数据

> ID：16198115
> 
> 赞同：1
> 
> 时间：2013-04-24T17:09:20.973
> 
> 标签：javascript, node.js, socket.io, arduino

我有这个在 arduino 中运行的简单代码

```
char inp;
void setup(){
  Serial.begin(9600);
}

void loop(){
  while(Serial.available()>0){
    inp = Serial.read();
    Serial.print(inp);
  }
  Serial.print("--");
  delay(200);
} 
```

所以它不断写“--”，如果我向 arduino 发送一些东西，它会回复

然后我有一个js文件

```
var strinInfo = "";
tempSerial.on("data", function(data) {
  console.log("data -> " + data);
  if (stringInfo.length < 37){
    stringInfo += data;
  }else{
    io.sockets.emit("message", stringInfo);
    stringInfo = ""
  }
}); 
```

它通过套接字发送我从 arduino 得到的东西。我的问题是，例如，如果我发送

```
"thisisanunusuallongandterriblestringofsymbolsblablablablablablabla" 
```

缺少字符：

```
---------thisisanunusuallongandterribles, 
gofsymbolsblablablablabla--blabla ----, 
-------------------------------------, 
```

在这个例子中，我缺少“trin”。有没有办法不丢失那些字符？

我从节点开始，所以我的猜测是在它发出消息的时间之间......那一刻的内容已经消失了，也许我错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:20:46.200

查看您的代码，可能有几件事。

1.  您可能在侦听器准备好之前发送数据，下面的上述库已解决。
2.  下面这行让我担心`if (stringInfo.length < 37){`。如果您获得连续的小数据包，则使您超过 37 的数据包将仅打印该部分，`stringInfo`但不会打印该`data`部分。

连接到 Arduino 的库：

*   `[Johnny Five][1]`
*   `[Firmata][2]`

这两个程序都与 Arduinos 交互。Firmata 是低级别的，Johnny-5 运​​行在顶部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-10T10:17:53.003

我相信这可能是`baud-rate`.

如果您使用`serialport`模块与 Arduino 进行串行通信，则必须设置`serialport baud-rate`为 9600（与接收端即 Arduino 相同）。

默认串口波特率为 115200。

# javascript - 我如何从 ajax 加载的 JQuery ui 选项卡中获取此方法

> ID：16198118
> 
> 赞同：2
> 
> 时间：2013-04-24T17:09:26.903
> 
> 标签：javascript, jquery, ajax, jquery-ui, tabs

我正在使用[jquery ui 选项卡](http://jqueryui.com/tabs/#ajax)来加载一个 html，在那个 html 中我有一个方法。

```
$("#tabs").tabs({               
                beforeLoad: function (event, ui) {
                    ui.jqXHR.error(function () {
                        ui.panel.html(
                          "Couldn't load this tab. We'll try to fix this as soon as possible. " +
                          "If this wouldn't be a demo.");
                    });
                    ui.jqXHR.success(function () {
                        alertMe()
                    });
                }
            });

<div id="tabs" style="height: 100%">
        <ul>
            <li><a href="Map.html">Tab 1</a></li>
        </ul>
 </div> 
```

在 map.html 我有 alertMe 方法。在这里它显示 alertMe 是未定义的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T17:51:16.533

当服务器成功返回响应时调用 jqXHR 'success'，但在任何选项卡呈现逻辑发生之前（例如将 html/js 添加到页面）。所以更好的解决方案是使用 tabs 控件的 load 方法来处理调用：

```
$('tab's).tabs({
    beforeLoad: ...
    load: function() {
       alertMe(); // Global JS on loaded fragment will be available on page now
    }
}); 
```

API 文档：[http ://api.jqueryui.com/tabs/#event-load](http://api.jqueryui.com/tabs/#event-load)

# javascript - superslides jquery插件定制

> ID：16198121
> 
> 赞同：0
> 
> 时间：2013-04-24T17:09:39.233
> 
> 标签：javascript, jquery, jquery-plugins

大家好，

我需要帮助自定义这个 jquery 插件，以便分页看起来像带有文本的链接，而不是默认的。

所以基本上页面上的输出应该是：Link1 | 链接2 | 链接3等 我尝试创建一个数组并将该数组返回给 addPaginationItem() 函数，但是，所有尝试都非常不成功。

任何帮助将不胜感激，因为我一直在努力。

2个主要功能我需要操作的代码如下：

```
 addPaginationItem = function(i) {
  if (!(i >= 0)) {
    i = _this.size() - 1;
  }
  return $pagination.append($("<a>", {
    href: "#" + i,
    "class": _this.current === $pagination.children().length ? "current" : void 0
  }));
};
addPagination = function() {
  var array, last_index;
  if (!_this.options.pagination || _this.size() === 1) {
    return;
  }
  if ($(el).find("." + _this.options.classes.pagination).length) {
    last_index = $pagination.children().last().index();
    array = $children;
  } else {
    last_index = 0;
    array = new Array(_this.size() - last_index);
    $pagination = $pagination.appendTo(_this.el);
  }
  return $.each(array, function(i) {
    return addPaginationItem(i);
  });
}; 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:40:33.020

我已经解决了我自己的问题。我想我只需要离开代码一会儿。谢谢大家。我添加了以下代码，解决了我的问题

```
addPaginationItem = function(i,linkText) {

  if (!(i >= 0)) {
    i = _this.size() - 1;
  }

  return $pagination.append($("<a>", {
    href: "#" + i,
    text:linkText,
    "class": _this.current === $pagination.children().length ? "current" : void 0
  }));
};

addPagination = function() {
  var array, last_index;
  var hrefText = ['test1','test2','test3','test4'];

  if (!_this.options.pagination || _this.size() === 1) {
    return;
  }
  if ($(el).find("." + _this.options.classes.pagination).length) {
    last_index = $pagination.children().last().index();
    array = $children;
  } else {
    last_index = 0;
    array = new Array(_this.size() - last_index);
    $pagination = $pagination.appendTo(_this.el);
  }

  $.each(hrefText,function(intIndex,objValue) {
    linkText = objValue;
     return addPaginationItem(intIndex,linkText)
  });

}; 
```

# c# - 在 C# 中将 MS Access 颜色代码转换为十六进制

> ID：16198122
> 
> 赞同：6
> 
> 时间：2013-04-24T17:09:39.407
> 
> 标签：c#, asp.net, .net, ms-access

有没有办法在 C# 中将 MS Access 颜色代码转换为十六进制？

```
e.g.

 - (white) 16777215 -> #FFFFFF
 - (black) 0        -> #000000
 - (blue)  16711680 -> #0000FF 
```

这是我在stackoverflow上找到的一些参考表

*   [http://www.endprod.com/colors/invcol.htm](http://www.endprod.com/colors/invcol.htm)
*   [http://cloford.com/resources/colours/500col.htm](http://cloford.com/resources/colours/500col.htm)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T17:11:25.207

您可以像这样转换为十六进制：

```
 string hexValue = "#" + 16777215.ToString("X"); 
```

或者将其包装在一个方法中：

```
 public static string AccessToHex(int colorCode) {
      return "#" + colorCode.ToString("X");
 } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-24T18:09:56.853

您需要将值转换为十六进制，然后将前两位与后两位翻转。例如，将原始值 16711680 转换为蓝色会得到十六进制值 FF0000。但是，蓝色的值为 0000FF；需要交换（所以是的，另一个答案是错误的......）

该值也被填充以始终具有 6 个必需的数字。

```
string rawHex = msAccessColorCode.ToString("X").PadLeft(6, '0');
string hexColorCode = "#" + rawHex.Substring(4, 2) + rawHex.Substring(2, 2) + rawHex.Substring(0, 2); 
```

要执行相反的操作（十六进制 -> Ms Acces），只需反过来执行这些步骤。去掉多余的`#`字符，翻转第一个/最后两个值并将该数字从基数 16 转换为基数 10。

```
string input = "#0000FF";
string hexColorCode = input.TrimStart('#');
string rawHex = hexColorCode.Substring(4, 2) + hexColorCode.Substring(2, 2) + hexColorCode.Substring(0, 2);
string result = Convert.ToInt32(rawHex, 16).ToString(); //16711680 
```

请注意，`Intew.Max`它设置为`0x7FFFFFFF`（并且我们的颜色代码上限为`0xFFFFFF`），因此`Convert.ToInt32`在这里使用它而不是`Int64`.

# python - multiprocessing.Pool.imap_unordered 在 Python 2.6 中挂起？

> ID：16198125
> 
> 赞同：2
> 
> 时间：2013-04-24T17:09:40.653
> 
> 标签：python, multiprocessing

使用 Python 2.6.7 运行时，以下脚本挂起。`[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]`它在 Python 2.7 中按预期打印。这可能是 Python 2.6 中的错误吗？有什么解决方法吗？

```
def p1(x):
    return x + 1

class Tasks(object):

    @property
    def mapper(self):
        from multiprocessing import Pool
        pool = Pool(processes=2)
        return pool.imap_unordered

    def run(self):
        xs = range(10)
        return self.mapper(p1, xs)

ts = Tasks()
print(list(ts.run())) 
```

在我的程序中，我可以通过重写`Tasks.run`来解决挂起：

```
 def run(self):
        xs = range(10)
        mapper = mapper
        return mapper(p1, xs) 
```

但我无法用上面的脚本重现这个。

另请注意，`@property`这里的使用是必不可少的。像下面这样分配解决了这个问题`mapper`：`__init__`

```
def __init__(self):
    from multiprocessing import Pool
    pool = Pool(processes=2)
    self.mapper = pool.imap_unordered 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-12T15:30:39.190

是的，这是python2.6中的一个bug

您正在使用的`Pool`对象需要在某处保持引用，否则 python 将在尝试使用*imap**方法（可能还有其他方法）时挂起

这是您的示例的修复程序。请注意，池对象保存在 Tasks 对象中，这可能会破坏您现有的代码。

```
class Tasks(object):
    _pool = None

    @property
    def mapper(self):
        from multiprocessing import Pool
        if self._pool is None:
            self._pool = Pool(processes=2)
        return self._pool.imap_unordered

    def run(self):
        xs = range(10)
        return self.mapper(p1, xs) 
```

# ruby-on-rails - 从rails中的视图下载字符串

> ID：16198132
> 
> 赞同：0
> 
> 时间：2013-04-24T17:10:06.640
> 
> 标签：ruby-on-rails

是否可以从我的 rails 项目的视图中使用 data_send 方法？

到目前为止，我一直在尝试这个

```
//<%= send_data( "myString", :filename => "download.txt" ) %> 
```

我收到一条错误消息

```
undefined method `send_data' 
```

我需要什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T17:19:25.130

这没有*任何*意义。如果您在视图中，根据定义，您选择呈现视图并且您的请求已经在发送数据（缓冲无法承受）。您不能在一个请求中既将 HTML（或 XML 或 JSON 或您正在呈现的任何类型的视图）发送到浏览器，*又将*名为“download.txt”的文件发送到浏览器。

您需要第二个操作，您的视图链接到该操作，并`send_data`在控制器中输出文件。

# git - 如何将分支上的热修复合并到主控

> ID：16198139
> 
> 赞同：3
> 
> 时间：2013-04-24T17:10:34.777
> 
> 标签：git

如果我从遥控器上的如下结构开始：

```
A-B-C-D-F-G  master
   \
    E-H-I  branch 
```

我克隆分支并进行更改'J'（&提交并推送到远程分支）我怎样才能将'J'合并到主控而不降低'H'和'I'？是否可以仅通过推送更改“J”来完成，或者我是否需要切换到本地回购跟踪主机并合并本地“J”更改并将其推送到主机？

```
A-B-C-D-F-G-J  master
   \       
    E-H-I-J  branch 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T18:23:22.090

创造一个反映现实的历史，从而为自己避免下游的潜在麻烦，

```
git checkout -b Jbranch B
git cherry-pick J
git checkout -B branch I
git merge Jbranch
git checkout -B master G
git merge Jbranch
git branch -d Jbranch 
```

生产

```
A..B..C..D..F..G..J''  master
   |             /
   |\........J'.+
   |             \ 
    \....E..H..I..J    branch 
```

新旧“分支”提示中的“J”提交树将是相同的，只是这次具有明确的历史记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T17:36:56.857

您可以[选择](https://www.kernel.org/pub/software/scm/git/docs/git-cherry-pick.html)更改 J。Cherry-picking 仅将特定提交复制到分支。

```
$ git checkout master
$ git cherry-pick J 
```

请注意，提交 J 现在将被复制（它将存在于每个分支上）。

# c# - 绑定到新成员显示；构建组合列表

> ID：16198141
> 
> 赞同：0
> 
> 时间：2013-04-24T17:10:35.987
> 
> 标签：c#, data-binding, binding, combobox

我正在尝试为程序构建一个组合列表，以用应用程序列表填充组合框。它不断抛出“无法绑定到新的显示成员。参数名称：newDisplayMember”

```
private void BuildComboList()
    {
        Applicant defaultApplicant = new Applicant();

        applicationList = defaultApplicant.GetList();
        applicantList.DataSource = applicationList;
        applicantList.DisplayMember = "DisplayName";
        applicantList.ValueMember = "DisplayValue";
    } 
```

申请人类别

```
public class Applicant
{
    //Members

    private int applicant_ID;
    private string applicant_fname; 
    private string applicant_lname;
    private string applicant_phone;
    private string applicant_address1;
    private string applicant_address2;
    private string applicant_city;
    private string applicant_state;
    private string applicant_zip;
    private string applicant_email;

    //properties

    public int Applicant_ID
    {
        get { return applicant_ID; }
        set { applicant_ID = value; }
    }

     public string Applicant_fname
    {
        get { return applicant_fname; }
        set { applicant_fname = value; }
    }

    public string Applicant_lname
    {
        get { return applicant_lname; }
        set { applicant_lname = value; }
    }

    public string Applicant_phone
    {
        get { return applicant_phone; }
        set { applicant_phone = value; }
    }

    public string Applicant_address1
    {
        get { return applicant_address1; }
        set { applicant_address1 = value; }
    }

    public string Applicant_address2
    {
        get { return applicant_address2; }
        set { applicant_address2 = value; }
    }

    public string Applicant_city
    {
        get { return applicant_city; }
        set { applicant_city = value; }
    }

    public string Applicant_state
    {
        get { return applicant_state; }
        set { applicant_state = value; }
    }

    public string Applicant_zip
    {
        get { return applicant_zip; }
        set { applicant_zip = value; }
    }

    public string Applicant_email
    {
        get { return applicant_email; }
        set { applicant_email = value; }
    }

    //Constructors

    private void DefaultValues()
    {
        applicant_ID = 0;
        applicant_fname = "";
        applicant_lname = "";
        applicant_phone = "";
        applicant_address1 = "";
        applicant_address2 = "";
        applicant_city = "";
        applicant_state = "";
        applicant_zip = "";
        applicant_email = "";
    }

    private void Rec2Members(ApplicantRecord record)//defined in ApplicantDL
    {
        applicant_ID = record.applicant_ID;
        applicant_fname = record.applicant_fname;
        applicant_lname = record.applicant_lname;
        applicant_phone = record.applicant_phone;
        applicant_address1 = record.applicant_address1;
        applicant_address2 = record.applicant_address2;
        applicant_city = record.applicant_city;
        applicant_state = record.applicant_state;
        applicant_zip = record.applicant_zip;
        applicant_email = record.applicant_email;
    }

    public ApplicantRecord ToRecord()
    {
        ApplicantRecord record = new ApplicantRecord();

        record.applicant_ID = applicant_ID;
        record.applicant_fname = applicant_fname;
        record.applicant_lname = applicant_lname;
        record.applicant_phone = applicant_phone;
        record.applicant_address1 = applicant_address1;
        record.applicant_address2 = applicant_address2;
        record.applicant_city = applicant_city;
        record.applicant_state = applicant_state;
        record.applicant_zip = applicant_zip;
        record.applicant_email = applicant_email;

        return record;
    }

    public List<ApplicantRecord> GetList()
    {
        return Approval_Form.ApplicantRecord.ApplicantDL.GetList();
    }

    public void Insert()
    {
        applicant_ID = Approval_Form.ApplicantRecord.ApplicantDL.Insert(applicant_fname, applicant_lname, applicant_phone, applicant_address1, applicant_address2, applicant_city, applicant_state, applicant_zip, applicant_email);
    }

    public void Select(int applicant_ID)
    {
        ApplicantRecord record = Approval_Form.ApplicantRecord.ApplicantDL.Select(applicant_ID);
        Rec2Members(record);
    }

    public void Update()
    {
        if (applicant_ID != 0)
        {
            Approval_Form.ApplicantRecord.ApplicantDL.Update(applicant_ID, applicant_fname, applicant_lname, applicant_phone, applicant_address1, applicant_address2, applicant_city, applicant_state, applicant_zip, applicant_email);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:30:07.773

我认为应该是：

```
private void BuildComboList()
{
    Applicant defaultApplicant = new Applicant();

    applicationList = defaultApplicant.GetList();
    applicantList.DataSource = applicationList;
    applicantList.DisplayMember = "Applicant_fname";
    applicantList.ValueMember = "Applicant_ID";
} 
```

您可以进一步更改申请人类别，如下所示：

1.  添加两个属性。

    公共字符串 DisplayName { get { return (applicant_fname + " " +applicant_lname; } }

    公共字符串 DisplayValue { get { return (applicant_ID.ToString(); } }

2.  保持数据绑定为：

    私人无效BuildComboList（）{申请人defaultApplicant =新申请人（）;

    ```
    applicationList = defaultApplicant.GetList();
    applicantList.DataSource = applicationList;
    applicantList.DisplayMember = "DisplayName";
    applicantList.ValueMember = "DisplayValue"; 
    ```

    }

# c - 将可变数量的参数传递给 C 函数

> ID：16198142
> 
> 赞同：0
> 
> 时间：2013-04-24T17:10:38.877
> 
> 标签：c, sockets, methods

不知道如何最好地描述这一点，但在这里解释一下。我希望能够用`printf`IE 做我能做的事情`printf("Variable:%@",astring);`

调用下面的方法我会运行`write_sock(sock,"my message but i want a variable in here a well");`

那有意义吗？

```
static void write_sock(int sock, const char *msg)
{
    int len = strlen(msg);
    if (write(sock, msg, len) != len)
    {
        perror("short write on socket");
        exit(1);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:15:58.157

你说的是变量参数的使用......（注意： vasprintf() 可能可用也可能不可用......我只是在这里用它来说明）

```
#include <stdio.h>
#include <stdarg.h>

static void write_sock(int sock, const char *msg, ... )
{
    va_list args;
    va_start( args, msg );
    char* newMsg;

    vasprintf( &newMsg, msg, args );

    int len = strlen(newMsg);
    if (write(sock, newMsg, len) != len)
    {
        perror("short write on socket");
        exit(1);
    }

    free( newMsg );

    va_end( args );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T17:16:05.193

只需使用[`sprintf(3)`](http://www.manpagez.com/man/3/sprintf/)：

```
char buffer[100];
sprintf(buffer, "Variable: %d", x);
write_sock(sock, buffer); 
```

# c++ - 组合 ECDSA 密钥

> ID：16198145
> 
> 赞同：0
> 
> 时间：2013-04-24T17:10:45.497
> 
> 标签：c++, openssl, addition, ecdsa, modular-arithmetic

如何将两个 ECDSA 私钥/公钥对组合成一个？我知道它是通过 openssl 中的模块化添加完成的，我只是不明白它是如何工作的。谁能给我解释一下？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T03:19:22.597

您可以通过添加两个私钥来做到这一点

```
privkey = privateA + privateB (mod order) 
```

或者，在 OpenSSL 代码中：

```
BN_mod_add_quick(privkey, privateA, privateB, order); 
```

这里`order`是最小的数 where `order = s - j`，这样`sP = jP`对于椭圆曲线上的点 P。您的新私钥的公钥是`pubkey = privkey * G`，或者：

```
EC_POINT_mul(group, pubkey, privkey, NULL, NULL, ctx); 
```

`order`和生成点的值`G`是曲线参数，在创建和设置时设置`group`（一个 EC_GROUP 对象）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T17:46:16.833

ECDSA 私钥 - 只是一个数字，基点的顺序。您可以只添加两个私钥（即数字），减少和模基点顺序，并将基点取幂到这个顺序。但是你为什么需要这个？

# symfony - Symfony2在服务定义问题中将关联数组作为参数传递

> ID：16198147
> 
> 赞同：7
> 
> 时间：2013-04-24T17:10:47.677
> 
> 标签：symfony, symfony-2.1

我正在尝试将关联数组作为参数传递给服务定义（准确地说是 Solarium）。但是，我收到以下错误：

> “可捕获的致命错误：传递给 Symfony\Component\DependencyInjection\Definition::setArguments() 的参数 1 必须是数组类型，给定字符串，”

我的 services.yml 内容如下：

```
parameters:
    mynamespace.api.solrclient.config: 
        endpoint:
            solrserver:
                host: "search.mysite.com"
                port: "80"
                path: "/solr/"

services:        
    mynamespace.api.solrclient:
        class: Solarium\Client
        arguments: "%mynamespace.api.solrclient.config%" 
```

我定义参数数组的方式有什么明显的错误吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-24T20:07:38.973

参数必须是一个数组，试试：

```
services:
    mynamespace.api.solrclient:
        class: Solarium\Client
        arguments: [%mynamespace.api.solrclient.config%] 
```

# sql - postgresql数据库上的sql插入失败

> ID：16198154
> 
> 赞同：0
> 
> 时间：2013-04-24T17:11:22.507
> 
> 标签：sql, postgresql, insert

我正在尝试使用 pgadmin3 运行以下插入语句：

```
INSERT INTO device 
VALUES
(12345, 
'asdf',
'OY8YuDFLYdv', 
'2', 
'myname', 
'2013-04-24 11:30:08',
 Null,Null) 
```

但我不断收到以下错误消息：

```
ERROR:  invalid input syntax for integer: "asdf"
LINE 4: 'asdf',
        ^

********** Error **********

ERROR: invalid input syntax for integer: "asdf"
SQL state: 22P02
Character: 42 
```

这是表定义：

```
CREATE TABLE device
(
  device_id integer NOT NULL DEFAULT nextval('device_device_id_seq'::regclass),
  userid integer NOT NULL,
  description character varying(255),
  password character varying(255) NOT NULL,
  user_id integer NOT NULL,
  createdname character varying(255),
  createddatetime timestamp without time zone,
  updatedname character varying(255),
  updateddatetime timestamp without time zone,
  CONSTRAINT device_pkey PRIMARY KEY (device_id )
)
WITH (
  OIDS=FALSE
);
ALTER TABLE device
  OWNER TO appadmin; 
```

你能告诉我哪里出错了吗？我尝试将单引号更改为双引号，但这没有帮助。如果不需要，我不想在 INSERT 中列出所有列名。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T17:35:51.633

显然，您希望 INSERT 跳过 `device_id`，因为它是主键并且具有来自序列的默认值。这不会发生，所以 PostgreSQL 认为你的意思是这样的：

```
insert into device (device_id, userid, ...)
            values (12345,     'asdf', ...); 
```

如果您坚持不明确列出您的列（并使维护您的代码的人不必要地遭受痛苦），那么您可以`DEFAULT`在 中指定`VALUES`告诉 PostgreSQL 使用 PK 的默认值；来自[精美手册](http://www.postgresql.org/docs/current/static/sql-insert.html)：

> ```
> INSERT INTO table_name [ ( column_name [, ...] ) ]
>     { DEFAULT VALUES | VALUES ( { expression | DEFAULT } [, ...] ) [, ...] | query }
>     [ RETURNING * | output_expression [ [ AS ] output_name ] [, ...] ] 
> ```
> 
> [...] `DEFAULT`
> 相应的列将填充其默认值。

例如：

```
INSERT INTO device 
VALUES
(DEFAULT,
12345, 
'asdf',
... 
```

但实际上，您应该只指定列以使 SQL 在架构更改时更易于理解和更健壮。

# asp.net-mvc - 如何在 asp.net mvc 3 中使下载动作异步？

> ID：16198157
> 
> 赞同：3
> 
> 时间：2013-04-24T17:11:35.800
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asynchronous

我正在将文件流式传输到客户端以供下载。但是文件大小可能非常大（最多几 GB），因此我不想阻止用户单击网页上的其他按钮，这些按钮与下载相同的控制器。从互联网上阅读，我发现我可以使用“Async”和“Completed”后缀使其异步，这是我的代码：

```
 public void DownloadAsync(string filename, string Id, string docId)
    {
        AsyncManager.OutstandingOperations.Increment();

        // code to get the file from server and send it to client.

        AsyncManager.OutstandingOperations.Decrement();

    }
    public ActionResult DownloadCompleted()
    {
        return RedirectToAction("Index");
    }

     public string OtherAction()
     {
         // code for this action.
     } 
```

当我单击网页上的下载并单击“OtherAction”按钮时。它仍然同步处理请求。“OtherAction”只是向用户返回一个字符串，并不耗费时间，这就是我没有让它异步的原因。

我是否需要在 .Increment() 和 .Decrement() 操作之间包含一些代码来包装代码以在“某物”内下载文件以启动新线程或类似的东西？我无法弄清楚我在这里还缺少什么。我从 AsyncController 继承控制器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-26T17:38:46.497

我认为您在这里遗漏了一些概念。你有两个部分。

**服务器**
每个请求都是异步的，即使不使用任何 Async，所以用户可以向服务器发送其他请求而不会被阻塞。

**客户端**
只要用户开始下载并且不退出浏览器或停止下载，用户就可以在同一个标​​签页或另一个标签页中继续进行操作。下载完成的请求不会停止。

因此，您不需要在服务器中进行任何异步操作。如果下载量很大，我会建议我的用户使用一些下载管理器

# .htaccess - nginx GET .php 变量

> ID：16198158
> 
> 赞同：0
> 
> 时间：2013-04-24T17:11:36.757
> 
> 标签：.htaccess, mod-rewrite, nginx, rewrite, php

我有一堆需要 .php?id=123 的 PHP 文件，我需要全部获取它们。我如何在我的配置文件中完成它们？

我似乎无法弄清楚如何利用

```
get1.php?id=stuff
get2.php?id=stuff
get3.php?id=stuff 
```

等等...

问题是当它们都在同一个根目录下时我该怎么做？

* * *

**使用以下内容我在 p.php?id=945 上得到 500 ERROR 但 PHP 工作正常但我无法登录或获取 POST 数据工作**

```
server {
      listen 80;
      server_name site.com www.site.com;
      root /home/site/public_html;
      location / {
      index  index.php index.html index.htm;
      location ~.*\.(3gp|gif|jpg|jpeg|png|ico|wmv|avi|asf|asx|mpg|mpeg|mp4|pls|mp3|mid|wav|swf|flv|html|htm|txt|js|css|exe|zip|tar|rar|gz|tgz|bz2|uha|7z|doc|docx|xls|xlsx|pdf|iso)$ {
      expires 1d;
      try_files $uri?$args @backend;
      }
      error_page 405 = @backend;
      add_header X-Cache "HIT from Backend";
        fastcgi_pass   127.0.0.1:9001;
        fastcgi_index  index.php;
        fastcgi_param  SCRIPT_FILENAME $document_root$fastcgi_script_name;
        include        fastcgi_params;
      }
      location @backend {
      internal;
        fastcgi_pass   127.0.0.1:9001;
        fastcgi_index  index.php;
        fastcgi_param  SCRIPT_FILENAME $document_root$fastcgi_script_name;
        include        fastcgi_params;
      }
      location ~ .*\.(php|jsp|cgi|pl|py)?$ {
        try_files $uri?$args /index.php;
        fastcgi_pass   127.0.0.1:9001;
        fastcgi_index  index.php;
        fastcgi_param  SCRIPT_FILENAME $document_root$fastcgi_script_name;
        include        fastcgi_params;
      }
      location ~ /\.ht {
      deny all;
      }
    } 
```

这：只有 500 秒重写或内部重定向周期，而内部重定向到“/index.php”

```
server {
    listen       80;
    server_name site.com www.site.com;
    root /home/site/public_html;

    #try and serve static files directly
    location ~* ^[^\?\&]+\.(html|jpg|jpeg|gif|png|ico|css|zip|tgz|gz|rar|bz2|doc|xls|pdf|ppt|txt|tar|mid|midi|wav|bmp|rtf|js)$ {
        try_files $uri @inPlaceDynamicFile;
        expires 24h;
        add_header Pragma public;
        add_header Cache-Control "public, must-revalidate, proxy-revalidate";
    }

    #allow us to have dynamic css/js files
    location @inPlaceDynamicFile {
        # examples /css/cssIncludes.css => /css/cssIncludes.css.php
        try_files $uri.php =404;

        fastcgi_pass   127.0.0.1:9001;
        include       fastcgi_params.conf;
    }

    location  / {
        try_files $uri?$args /index.php?q=$uri&$args;
        fastcgi_pass   127.0.0.1:9000;
        fastcgi_param  SCRIPT_FILENAME $document_root$fastcgi_script_name;
        include       fastcgi_params.conf;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:03:52.290

> “这个对吗？”

没有。

1）根不应该在一个位置块中，它应该只在一个服务器块中。

2) Apache rewrite 测试是否是现有文件是使用 try_files 完成的，而不是使用 Nginx rewrite。[也可以看看](https://stackoverflow.com/questions/16088663/apache-mod-rewrite-to-nginx-rewrite-rules/16095173#16095173)

3）您的 proxy_pass 将传递到必须是循环重定向的同一台服务器。

4) 你在一个位置块内还有一个位置块，这看起来很奇怪。尽管某些高级配置可能需要它，但您正在做的事情并不需要它。

我想你可能希望你的 nginx conf 是这样的：

```
server {
    listen       80;
    server_name site.com www.site.com;
    root /home/site/public_html;

    #try and serve static files directly
    location ~* ^[^\?\&]+\.(html|jpg|jpeg|gif|png|ico|css|zip|tgz|gz|rar|bz2|doc|xls|pdf|ppt|txt|tar|mid|midi|wav|bmp|rtf|js)$ {
        try_files $uri @inPlaceDynamicFile;
        expires 24h;
        add_header Pragma public;
        add_header Cache-Control "public, must-revalidate, proxy-revalidate";
    }

    #allow us to have dynamic css/js files
    location @inPlaceDynamicFile {
        # examples /css/cssIncludes.css => /css/cssIncludes.css.php
        try_files $uri.php =404;

        fastcgi_pass   127.0.0.1:9000;
        include       fastcgi_params.conf;
    }

    location  / {
        try_files $uri /p.php?q=$uri&$args;
        fastcgi_pass   127.0.0.1:9000;
        fastcgi_param  SCRIPT_FILENAME $document_root$fastcgi_script_name;
        include       fastcgi_params.conf;
    }
} 
```

如果您确实希望包含 .php 的唯一请求转到您的`p.php`文件，那么您应该将最后一个位置块替换为：

```
location  ~ /(.*)\.php {
    try_files $uri /p.php?q=$uri&$args;
    fastcgi_pass   127.0.0.1:9000;
    fastcgi_param  SCRIPT_FILENAME $document_root$fastcgi_script_name;
    include       fastcgi_params.conf;
}

location  / {
    try_files /index.php =404;
    fastcgi_pass   127.0.0.1:9000;
    fastcgi_param  SCRIPT_FILENAME $document_root$fastcgi_script_name;
    include       fastcgi_params.conf;
} 
```

*编辑*

> 我是否需要为每个具有 $_GET['']; 的 php 文件创建特定的重写？

不 - 您应该能够使用 try_files 将它们传递给任何文件，例如：

```
location  / {
        try_files $uri?$args /index.php?q=$uri&$args;
        fastcgi_pass   127.0.0.1:9000;
        fastcgi_param  SCRIPT_FILENAME $document_root$fastcgi_script_name;
        include       fastcgi_params.conf;
    } 
```

如果 .php 文件存在并附加了查询字符串，这将匹配对 php 文件的任何 .php 请求，然后如果 .php 文件不存在并传入查询字符串和路径，则返回到 index.php 。

# erlang - Emakefile - 自定义行为未定义

> ID：16198171
> 
> 赞同：5
> 
> 时间：2013-04-24T17:12:03.967
> 
> 标签：erlang, makefile, behavior

我的`test`项目是这样组织的：

./Emakefile:

```
{"source/*", [debug_info, {outdir, "binary"}]}. 
```

./source/test.erl:

```
-module(test).
-behaviour(test_behaviour). 
```

./source/test_behaviour.erl:

```
-module(test_behaviour).
-export([behaviour_info/1]).

behaviour_info(callbacks) -> [];
behaviour_info(_) -> undefined. 
```

当我`erl -make`在项目目录 ( `.`) 中使用命令时，我得到以下输出：

```
重新编译：source/test_behaviour
重新编译：源码/测试
源/test.erl:2：警告：行为 test_behaviour 未定义
```

为什么`erl`打印此警告？它之前编译`test_behaviour.erl`过`test.erl`，所以我想应该可以`test_behaviour.beam`在`binary`文件夹中找到它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T17:48:33.013

行为在编译时解决。因此，Erlang 编译器应该找到行为束文件并调用行为模块的`behaviour_info/1`函数。

这里 test_behaviour.beam 不在编译器的代码路径中。您可以通过调用运行

```
erl -pa ebin -make 
```

这为我解决了这个问题。我尝试在 Emakefile 中指定，但没有运气。也找不到文档。还发现 -pa ebin 的 oder 必须在 -make 之前（虽然不知道为什么）。

# iphone - 在 Storyboard 中以编程方式呈现 ViewController

> ID：16198176
> 
> 赞同：0
> 
> 时间：2013-04-24T17:12:22.017
> 
> 标签：iphone, ios, objective-c, uiviewcontroller, uinavigationcontroller

我正在尝试在情节提要中以编程方式呈现视图控制器，我正在使用下面提到的代码，但它不起作用，没有给我任何回应......

```
- (void)buttonPressed
{
NSLog(@"called");

UIStoryboard *sb = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:nil];

UINavigationController *vc = [sb instantiateViewControllerWithIdentifier:@"123"];

vc.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;

[self.navigationController presentModalViewController:vc animated:YES];
} 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:29:01.893

```
NSLog(@"called");

    UIStoryboard *sb = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];

    UINavigationController *vc = [sb instantiateInitialViewController];

    vc.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
    [self presentViewController:vc animated:YES completion:nil]; 
```

# javascript - jQuery 似乎没有克隆事件，而只是 html/xml？

> ID：16198179
> 
> 赞同：0
> 
> 时间：2013-04-24T17:12:29.263
> 
> 标签：javascript, jquery

我有一个作为演示编写的测试脚本，我正在构建一个模板，但是当我克隆它时，它似乎没有触发事件。

```
var $shifter = $("<a class='shifter'>^</a>");
$shifter.click(function(){
    alert("ping");
}); 
```

您可以在以下位置查看我的整个模板：http: [//jsfiddle.net/fallenreaper/drdCp/2/](http://jsfiddle.net/fallenreaper/drdCp/2/) 一切都在 Javascript 中完成，因此 HTML 仅包含示例表单 PRE-COMPONENTS。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T17:14:25.770

使用[.clone(true)](http://api.jquery.com/clone/)克隆事件

# css - 在响应式网格中连续显示图像时，如何保持图像的高度/宽度相同？

> ID：16198182
> 
> 赞同：0
> 
> 时间：2013-04-24T17:12:36.037
> 
> 标签：css, sass, grid-layout

我有一个固定宽度的基于 % 的网格（目前）。该代码基于这篇 css-tricks 文章：[http ://css-tricks.com/dont-overthink-it-grids/](http://css-tricks.com/dont-overthink-it-grids/)

效果很好，直到我有一列包含多个相同大小的响应图像并且需要彼此相邻堆叠（浮动）。由于填充问题和其他问题，我无法让所有三个图像的宽度和高度都相同，尽管它们是以这种方式开始的。最后一个总是更高。[这是一个显示问题的代码笔： http](http://codepen.io/joshmath/pen/dEuIv) ://codepen.io/joshmath/pen/dEuIv

对此的任何帮助将不胜感激。我以前遇到过这个问题，但总是会根据具体情况来解决这个问题。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:27:40.273

无论出于何种原因，如果您从最后一个元素中删除 padding-right: 0 样式，它就可以解决问题。

看起来您正在尝试使用填充在元素之间添加间距。我尝试使用 Chrome 开发工具代替的是使用边距而不是填充，然后将元素的宽度稍微减小到 29.5% 左右。这似乎奏效了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T17:27:47.193

只需将以下内容添加到您的 CSS 中。将大小设置为您喜欢的任何大小，并且网格中的所有图像都将保持该大小，如果它们需要增长/缩小，请改用高度/宽度百分比。

.grid img { 宽度：350px; 高度：400px；}

# regex - 用于检查两个单词和一个数量的复杂正则表达式

> ID：16198184
> 
> 赞同：1
> 
> 时间：2013-04-24T17:12:39.040
> 
> 标签：regex

好的，我想做的是检查是否存在

*   “测试项目-1”
*   大于 1 的数字
*   “KG. Kg, kg, Kilo(s) or Kilogram(s)”列表中可能出现的单词之一

其中任何项目可以按任何顺序排列，并且彼此之间不得超过 6 个字。

必须在正则表达式中完成，因为无法访问底层脚本引擎

这就是我所拥有的，因为有一种检查更大的方法，然后我决定使用 1-999 的范围进行数字检查。

```
\b(?:[T|t]estItem-1\W+(?:\w+\W+){1,6}(^[0-9]|[1-9][0-9]|[1-9][0-9][0-9])$)\W+(?:\w+\W+){1,6}[K|k]il[o|os]|[K|k][[G|GS]|[g|gs]]|[|K|k]ilogra[m|ms]\b 
```

我需要找到的示例如下 -

> “TestItem-1 在 12 公斤以上的数量上不稳定”
> “1 公斤的 TestItem-1”

虽然我不想找到——

> “15 个单位的 TestItem-1”

我知道我得到的不是工作每个部分似乎彼此独立但不能一起工作。

我将其传递给比我更伟大的思想:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:39:32.320

你可以尝试这样的事情：

```
\b(?:[2-9]|\d\d+)\b\s\b(?:KG.|Kg,|kg,|Kilos?|Kilograms?)\b(?:\S+\s){0,6}\bTestItem-1\b|\bTestItem-1\b(?:\S+\s){0,6}\b(?:[2-9]|\d\d+)\b\s\b(?:KG.|Kg,|kg,|Kilos?|Kilograms?)\b 
```

复制并不理想，但没有环顾四周，这是我能想到的最好的。我会尝试改进一下。

# jquery - 如何格式化 ListView 的 Kendo UI 外部模板中的参数集？

> ID：16198187
> 
> 赞同：0
> 
> 时间：2013-04-24T17:12:41.730
> 
> 标签：jquery, listview, kendo-ui

我有一个看起来像这样的 Kendo UI 外部模板：

```
<script type="text/x-kendo-tmpl" id="dispositivosTemplate">
    <div class="containerElement" style="background-color: transparent" value="${UniqueId}" onclick="showSubsettingDetails(this)">
        <dl>
            <dd class="elementList dispositivoElement">${UniqueId}: ${Ubicacion}</dd>
        </dl>
    </div>
    <br/>
</script> 
```

我使用以下代码设置此模板：

```
var template = '#dispositivosTemplate';
var dataSourceList = new kendo.data.DataSource({
    data: src
});
$('#listView').kendoListView({
    dataSource: dataSourceList,
    template: kendo.template($(template).html())
}); 
```

其中*src*是通过 AJAX 调用获得的对象数组，每个对象都有一个字符串类型的*Ubicacion*属性，其值往往很长。

我想要做的是为属性*Ubicacion*在我的 Kendo UI ListView 中显示的方式提供格式，例如，而不是在 ListView *“Calle Santa Lucia，墨西哥州，墨西哥”*的项目中显示以下内容, 更改它，使其看起来像*“Called Santa Lucia...”*，而不更改*Ubicacion*属性中的原始值。

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T20:08:30.450

此处解释了模板定义中 javascript 代码的用法： [http ://demos.kendoui.c​​om/web/templates/expressions.html](http://demos.kendoui.com/web/templates/expressions.html)

但是，如果您想要做的只是缩短显示的文本，那么您可能需要查看`text-overflow: ellipsis`css 属性

编辑：甚至更好的教程在这里： [http ://docs.kendoui.c​​om/getting-started/framework/templates/overview](http://docs.kendoui.com/getting-started/framework/templates/overview)

# jquery - jquery加载页面的一部分而不加载其他部分的图像

> ID：16198191
> 
> 赞同：0
> 
> 时间：2013-04-24T17:12:49.787
> 
> 标签：jquery

我正在使用 jQuery .load 函数从包含有关每个项目的一些数据的外部 php 文件中提取数据，当您单击一个项目时，与该项目相关的部分会被加载，但由于整个内容都在一个 php 中，它首先加载该页面上的所有内容，包括图像，然后显示请求的部分，这使得第一个项目花费的时间太长，

有没有办法加载一个部分而不是其他部分的图像？

```
$('#ContentHolder').load('content.php #section',function(){
Do Something
)}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:30:09.867

您是否尝试使用井号加载页面的一部分？那行不通...如果您不知道或想知道RegEx，可能会起作用的是这样的-试试这个-受其他人评论的启发：

```
 $.get('content.php', function(data) {
        var repData = data.replace('src', 'data-src');
        var parsedData = $(repData).parseHTML();           
        var extractData = $(parsedData).children('div#mySection').html();

        $('#ContentHolder').html(extractData);
    }); 
```

# c# - iOS 上的 Monogame 性能问题

> ID：16198193
> 
> 赞同：1
> 
> 时间：2013-04-24T17:12:51.503
> 
> 标签：c#, ios, xna, monogame

我和我的朋友正在使用 monogame 框架为 Ipad/Iphone 开发游戏。我们正处于开发的最后阶段，我们在游戏部署方面遇到了一些问题。

这是我们的第一个 IOS 游戏，我们真的需要帮助来完成这个游戏。

这是我们的网站：[http](http://www.dumativa.com.br/index.php/pt-BR/projetos/dragon-festival) ://www.dumativa.com.br/index.php/pt-BR/projetos/dragon-festival （这不是游戏的最新版本，但您可以看到它的样子）

由于这是我们的第一场比赛，我们犯了一些错误，我们正在努力纠正。我们的纹理是针对 ipad 尺寸 (1024x768) 制作的。我们真的不知道这是否是正确的方法。我们认为最好将它们缩小到 iphone 而不是相反。

我们需要以下主题的帮助：

1 - PVRTC 压缩。

1.1 - 为了提高游戏性能真的有必要实施吗？

1.2 - 透明度如何与这些压缩纹理一起工作？我们有一些具有透明度渐变的纹理，我们想知道压缩后它会如何处理。

1.3 - 您是否建议我们使用“2 的幂”将所有纹理重新制作为纹理图集，以使 PVRTC 压缩工作？

2 - ARMv7

2.1 - 它如何帮助提高游戏性能？

2.2 - 我在monodevelop中启用它后，我们如何确保它正常工作？

3 - 纹理大小/分辨率

3.1 - 我们对缩放是否正确，或者我们应该为 iphone 分辨率开发纹理，然后将它们缩放到 ipad？

3.2 - 我们是否应该有两个不同的应用程序（一个用于iphone，一个用于ipad）具有相同的纹理但每个设备的尺寸不同？

4 - 建议

你有什么我们遗漏的建议或观点吗？我们真的不知道如何进一步改进上面列出的主题。我们需要每一个可能的方向。

基本上我们需要决定我们需要采取哪种方式来提高我们的表现和游戏体验。我们非常感谢您的帮助，一旦这款游戏推出，您将不会后悔 :)！

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:45:44.557

您大多数问题的答案将是“视情况而定”。无法替代在实际目标设备上进行测试并查看它是否可以接受。

我有两个一般性建议：(a) 确保你有尽可能少的纹理/精灵表，理想情况下每个场景一个 2D 游戏。(b) 是的，我会为不同的目标设备创建调整大小/重新采样的图形，而不是依赖动态缩放。这对于像 iPad mini 这样的非 Retina 硬件非常重要，在这种情况下，不必要地加载巨大的图像是一个糟糕的主意。最好先下载稍大的文件，然后再获得最佳的播放体验。

# asp.net - Visual Studio 2012 中的单元测试 Web 窗体

> ID：16198194
> 
> 赞同：0
> 
> 时间：2013-04-24T17:12:56.620
> 
> 标签：asp.net, unit-testing, visual-studio-2012, webforms

我似乎找不到关于如何***在 Visual Studio 2012 中对 Web 表单进行单元测试***的演练/教程/博客文章等。MSDN 似乎没有涵盖它。我能够从浏览演练中获得的唯一一件事是，我需要明确分离关注点才能适当地测试 aspx.cs 文件。我错过了什么？最近有没有关于如何在 Web 窗体项目中实现简单单元测试的可靠演练？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:42:01.887

单元测试你的代码实际上是不可能的，因为没有上下文，没有请求和模拟所有这些都非常困难。

您应该做的是将您的逻辑分离到另一个库中并对该库进行单元测试。这只会在您的代码中留下查看特定代码。

然后可以通过 UI 测试来测试该代码（例如使用 Selenium 之类的工具）

# asp.net - 一瞥如何保持调试信息？

> ID：16198195
> 
> 赞同：2
> 
> 时间：2013-04-24T17:12:59.517
> 
> 标签：asp.net, asp.net-mvc-4, load-balancing, glimpse, web-farm

[Glimpse](http://getglimpse.com/)如何持久保存收集的数据？都保存在内存中了吗？有没有办法将数据保存在数据库中？

我问这个是因为如果我在多台机器上安装了一个网站（负载平衡），我可以使用 glimpse 进行调试，还是从一台服务器收集的数据无法从其他服务器访问？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T14:49:54.307

[`IPersistenceStore`](https://github.com/Glimpse/Glimpse/blob/739afdba40e61ea31b42e6d0ddfbeed8f9c561be/source/Glimpse.Core/Framework/IPersistenceStore.cs)是要实现的接口。

Glimpse 开箱即用，带有一个名为 的内存存储[`ApplicationPersistenceStore`](https://github.com/Glimpse/Glimpse/blob/739afdba40e61ea31b42e6d0ddfbeed8f9c561be/source/Glimpse.Core/Framework/ApplicationPersistenceStore.cs)，但您的实现可以将数据写入数据库、文件系统、分布式缓存——只要满足您的需求。

要将您的实现连接到 Glimpse，您需要创建一个并配置Glimpse[`IServiceLocator`](https://github.com/Glimpse/Glimpse/blob/739afdba40e61ea31b42e6d0ddfbeed8f9c561be/source/Glimpse.Core/Framework/IServiceLocator.cs)以通过.`serviceLocatorType``glimpse``web.config`

如果您想查看示例`IServiceLocator`实现，可以查看[`AspNetServiceLocator`](https://github.com/Glimpse/Glimpse/blob/739afdba40e61ea31b42e6d0ddfbeed8f9c561be/source/Glimpse.AspNet/AspNetServiceLocator.cs).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T13:02:52.653

通过查看[History 选项卡](http://getglimpse.com/Help/History-Tab)页面，我怀疑文档尚未编写，它目前是这样说的：

> **持久存储**
> 
> **TODO：**链接到如何更新的示例`IPersistenseStore`。

我查看了代码，找不到`IPersistenseStore`接口。但是我可以找到[`IDataStore`](https://github.com/Glimpse/Glimpse/blob/739afdba40e61ea31b42e6d0ddfbeed8f9c561be/source/Glimpse.Core/Extensibility/IDataStore.cs)我建议您开始寻找的界面。

目前似乎有两个接口的实现，[`DictionaryDataStoreAdapter`](https://github.com/Glimpse/Glimpse/blob/739afdba40e61ea31b42e6d0ddfbeed8f9c561be/source/Glimpse.Core/Extensibility/DictionaryDataStoreAdapter.cs)类和[`HttpApplicationStateBaseDataStoreAdapter`](https://github.com/Glimpse/Glimpse/blob/739afdba40e61ea31b42e6d0ddfbeed8f9c561be/source/Glimpse.AspNet/HttpApplicationStateBaseDataStoreAdapter.cs)类。

* * *

**更新**

有一个[`IPersistenceStore`](https://github.com/Glimpse/Glimpse/blob/739afdba40e61ea31b42e6d0ddfbeed8f9c561be/source/Glimpse.Core/Framework/IPersistenceStore.cs)由[`ApplicationPersistenceStore`](https://github.com/Glimpse/Glimpse/blob/739afdba40e61ea31b42e6d0ddfbeed8f9c561be/source/Glimpse.Core/Framework/ApplicationPersistenceStore.cs)该类实现的接口。虽然这个类似乎遵循 a [`IDataStore`](https://github.com/Glimpse/Glimpse/blob/739afdba40e61ea31b42e6d0ddfbeed8f9c561be/source/Glimpse.Core/Extensibility/IDataStore.cs)，所以这可能仍然是实现自定义解决方案的地方。

# java - 添加元素对象

> ID：16198205
> 
> 赞同：-1
> 
> 时间：2013-04-24T17:13:26.877
> 
> 标签：java, database, object, arraylist, operators

上面有代码`java`

```
Object[] param = {1,2,3,4};
Array array = connection.createArrayOf("integer", param);
CallableStatement proc = connection.prepareCall("{ call net_trains(?, ?) }");

proc.setArray(1, array);
proc.setInt(2, Ids.get(k))
proc.execute(); 
```

与其直接初始化 Object 数组，不如有机会用任意数量的元素填充它

```
ArrayList<String> ProcessedTherms = new ArrayList<String>(); 
```

怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:15:15.750

尝试使用 ArrayList 中的元素填充 Array。

```
for(int i =0 ; i < ProcessedTherms.size() ; i++){
    param[i] = ProcessedTherms.get(i);    
} 
```

**注意：** ArrayList 和 Array 的大小应该相同。否则你可能会得到 IndexOutOfBound 异常。

# javascript - javascript代码和zindex

> ID：16198206
> 
> 赞同：1
> 
> 时间：2013-04-24T17:13:38.323
> 
> 标签：javascript, html, z-index

我在使用 javascript 更改 z-index 时遇到问题，任何人都可以帮助我解决问题所在，

我想要做的是在单击按钮后在另一个框的顶部出现一个框，但它似乎不起作用。

```
function toggleupload(){
            var but = document.getElementById('picbutton').innerHTML;
            if (but == "Change Picture"){
                            document.getElementById('picbutton').innerHTML = "Hide upload box";
                            document.getElementById('uploadbox').style.zIndex = 2;
                            document.getElementById('profilebasic').style.zIndex = 1;
            }
            if (but == "Hide upload box"){
                            document.getElementById('picbutton').innerHTML = "Change Picture";
                            document.getElementById('uploadbox').style.zIndex = 1;
                            document.getElementById('profilebasic').style.zIndex = 2;
            }

}

#profilebasic{
            width:300px;
            height:300px;
            z-index:2;
            background-color:#0F0;

}
#uploadbox {
            position:absolute;
            top:0px;
            left:0px;
            width:300px;
            height:300px;
            z-index:1;
            background-color:#F00;

}
#uploadbo{
            text-align:center;
            width:300px;
            height:300px;
            z-index:3;

}

<div id="uploadbo">
<div id="profilebasic">
</div>
<div id="uploadbox">
</div>
<button  onclick="toggleupload();" id="picbutton">Change Picture</button>
            </div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T17:19:21.923

该`z-index`属性[仅适用于定位元素](https://developer.mozilla.org/en-US/docs/CSS/Understanding_z-index/Adding_z-index)，因此您需要明确设置位置，`profilebasic`例如：

```
#profilebasic {
    width:300px;
    height:300px;
    z-index:2;
    background-color:#0F0;
    position:absolute;
} 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/rbs8d/1/)**

（请注意，我还必须在您的按钮上设置一些 CSS，否则它最终会出现在您定位的 div 下。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T17:21:18.900

由于`uploadbox`已经从前面开始，我假设您想交换这些。

根据 z-index 规则，一个绝对定位的 div 仍然会出现在一个非绝对定位的 div 前面，除非它的 z-index 值为负。

也就是说，对您想要在后面的框使用负 z-index。

[http://jsfiddle.net/X54gr/](http://jsfiddle.net/X54gr/)

# magento - 需要 Magento MagMI 导入器帮助

> ID：16198210
> 
> 赞同：0
> 
> 时间：2013-04-24T17:14:04.610
> 
> 标签：magento, magmi

我在数据库中有一组数据，我可以通过脚本将其导出为任何格式。

我的问题是我需要执行以下操作（我已准备好所有数据和图像）

- 导入产品 - 导入相关图像（最多 8 个） - 导入类别（3 或 4 个级别） - 许多产品有变体（尺寸、颜色等......）变体有自己的 sku - 一些产品有多个可以选择的属性（选择尺寸，选择颜色）每个组合都有自己的 sku --- 小部件 A 有 5 种颜色和 5 种尺寸（25 个 sku） - 所有产品都有 3 层定价

MagMI 会处理所有这些吗？如果这里有人对此有很好的经验，请在Skype“JoshMarthaller”上给我发消息，我们可能会为你做一些工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T04:14:57.020

Magmi 会做所有这些事情。对于您所描述的，您将需要几个与核心 magmi 产品捆绑在一起的插件。可配置项导入、分层产品导入、图像属性处理器、导入类别听起来就像您需要的那样。它们都使用 csv 文件或使用 datapump API（我已经使用了 magento 1.7）

# events - 使用 GtkD 的键输入

> ID：16198211
> 
> 赞同：2
> 
> 时间：2013-04-24T17:14:05.360
> 
> 标签：events, user-interface, gtk, d, gtkd

我是 gtk 和 GtkD 的初学者。
现在，我正在尝试参考[this](https://stackoverflow.com/questions/902349/handling-key-presses-in-gtk-gtkd "在 GTK+ (gtkD) 中处理按键")从键盘获取输入。
但是，似乎三年来工具包发生了一些变化。
我在下面写了代码。但是，我在回调函数中得到了奇怪的*ev值。*

我看不出一个人去的任何解决方案的前景。
那么，你能告诉我在哪里修改吗？

我提前感谢你，也感谢你对我英语不好的病人。

* * *

我正在使用 gtkD-2.1.1 和 gtk+3.2.3。
这是完整的代码：

```
 import std.stdio;  
    import gtkc.gdktypes;  
    import gtk.MainWindow;  
    import gtk.Widget;  
    import gdk.Event;  
    import gtk.Main;  

    class Window : MainWindow{  
    immutable width = 200;  
    immutable height = 200;   
        this(){    
            super("input test");   
            setDefaultSize(width,height);  
            setEvents(EventMask.KEY_PRESS_MASK);  // Actually I don't know how this works

            auto callback_func = cast(bool delegate(Event,Widget))&get_key; // I doubt this cast 
            this.addOnKeyPress(callback_func);

            showAll();
        }
        bool get_key(GdkEventKey* ev, Widget widget){
            writefln("sender %s", widget);

            writefln("type %x",ev.type);
            writefln("window* %x",ev.window);
            writefln("send_event %x",ev.sendEvent);
            writefln("time %x",ev.time);
            writefln("state %x",ev.state);
            writefln("keyval %x",ev.keyval);
            writefln("length %x",ev.length);
            writefln("gchar* %x",ev.string);
            writefln("hardware_keycode %x",ev.hardwareKeycode);
            writefln("group %x",ev.group);
            writefln("is_modifier %x\n",ev.bitfield0);

            return true;
        }
    }

    void main(string[] args){  
        Main.init(args);  
        auto win = new Window();  
        Main.run();  
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T13:17:00.653

是的，演员阵容是错误的。我猜 Signature with`GdkEventKey*`已经过时了。改变你`get_key`采取一个`Event`，你应该得到正确的结果：

```
 ...
    auto call = &get_key;
    ...
    bool get_key(Event e, Widget widget){
        GdkEventKey* ev = e.key();
    ... 
```

我从来没有对 GtkD 做过任何事情，这只是浏览文档的结果。所以，这可能不是最佳实践，但它应该让你重新上路。

# oracle - 查询-oracle表格后如何保留块位置

> ID：16198217
> 
> 赞同：3
> 
> 时间：2013-04-24T17:14:25.303
> 
> 标签：oracle, forms, oracle10g, oracleforms

我有一个带有 data_block 的 oracle 表单，它显示 25 个项目。

在表单上，​​我有一个滚动条和一个“删除”按钮。当数据块中的一个项目被选中并按下“删除”按钮时，它会从数据库中删除所选项目，然后执行 data_block 查询。

默认情况下，这会将用户返回到列表的顶部。

我正在尝试导航到从列表中删除的记录之前的记录。

这可以使用 GO_RECORD(number) 内置函数 (BIF) 来完成（假设 number 是 :System.cursor_record 的保存值）。

这就是我遇到问题的地方。GO_RECORD BIF 会将记录带到显示的项目列表的顶部或底部。这可能会导致列表在没有警告的情况下上移 20 个项目。

ie 例如，正在显示数据块中的记录 23 - 47，并选择记录 33。如果删除记录 33 并且我们使用函数 GO_RECORD(32)，那么显示的记录将是 32-56（有效地将列表向下移动 9 条记录）。

我假设为了避免这种转变，我需要有某种方法来确定记录在显示中的位置（而不是 data_block）。

有谁知道这个功能是否存在？

或者有没有人有另一种方法可以让我得到同样的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-29T11:55:05.060

首先将此程序创建为程序单元

```
 PROCEDURE SYNC_BLOCK
            -----------------------------------------------------------------------*
            --  Synchronizes the display of any scrollable block.
            --  After running an edit that loops through all records, this will
            --  restore the block's display so that the same top record is again
            --  at the top of the block's display.
            --  Blk is the name of the block.
            --  Rec_Num is the desired target current record.
            --  Top_Rec is the original Top Record of the block captured
            --  before the looping process began.
            (BLK      VARCHAR2,
            REC_NUM  NUMBER,
            TOP_REC  NUMBER) IS
            BLK_ID    BLOCK;
            TOP_NEW   PLS_INTEGER;
            REC_N     PLS_INTEGER;
            --
            Procedure Check_success is begin
            If not form_success then
            Raise form_trigger_failure;
            End if;
            End Check_success;
            Procedure Go_Rec(rec_num number) is begin
            Go_Record(Rec_num);
            Check_Success;
            End Go_Rec;
            BEGIN
            BLK_ID := FIND_BLOCK(BLK);
            IF ID_NULL(BLK_ID) THEN
            Message('  U72_GO_REC_SYNC_BLOCK: CANNOT FIND BLOCK '''||BLK||'''');
            Raise Form_trigger_failure;
            END IF;
            IF BLK <> :SYSTEM.CURSOR_BLOCK THEN
            GO_BLOCK(BLK);
            Check_Success;
            END IF;
            IF :SYSTEM.CURSOR_RECORD <> REC_NUM THEN
            GO_REC(REC_NUM);
            END IF;
            -- may need to re-set the display to the rows originally shown
            TOP_NEW := GET_BLOCK_PROPERTY(BLK_ID, TOP_RECORD);
            IF TOP_REC <> TOP_NEW THEN
            IF TOP_REC < TOP_NEW THEN
            IF :SYSTEM.CURSOR_RECORD <> TOP_REC THEN
            GO_REC(TOP_REC);
            END IF;
            ELSE
            REC_N := GET_BLOCK_PROPERTY(BLK_ID, RECORDS_DISPLAYED)
            + TOP_REC - 1;
            IF :SYSTEM.CURSOR_RECORD <> REC_N THEN
            GO_REC(REC_N);
            END IF;
            END IF;
            SYNCHRONIZE;
            -- Found that Sync caused focus change to different block. Fix here.
            IF BLK <> :SYSTEM.CURSOR_BLOCK THEN
            GO_BLOCK(BLK);
            Check_Success;
            END IF;
            IF :SYSTEM.CURSOR_RECORD <> REC_NUM THEN
            GO_REC(REC_NUM);
            END IF;
            END IF;
            -- can't go_rec to NEW record, so need to test here
            IF  :SYSTEM.LAST_RECORD = 'TRUE'
            AND REC_NUM = 1 + :SYSTEM.CURSOR_RECORD THEN
            NEXT_RECORD;
            Check_Success;
            END IF;
            --
            END SYNC_BLOCK; 
```

其次，下面的五行代码完全符合您的要求

```
xx:=GET_BLOCK_PROPERTY('blk',TOP_RECORD);
xxx:=GET_BLOCK_PROPERTY('blk',CURRENT_RECORD );
go_block('blk');
execute_query();
SYNC_BLOCK('blk',xxx,xx); 
```

如果您需要更多信息，请随时与我联系

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-04T13:02:29.810

-- 保存最高记录

```
 l_top_rec:= GET_BLOCK_PROPERTY('EXP_DETAIL_BLK', TOP_RECORD);
 l_cur_rec:= :SYSTEM.CURSOR_RECORD; 
```

——你的行动

```
 execute_query; // or othres actions... 
```

——创造最高纪录

```
go_block(block_name);
--
first_record;
loop
  exit when GET_BLOCK_PROPERTY(block_name, TOP_RECORD) = l_top_rec;
  next_record;
end loop;
go_record(l_top_rec);
--
loop
  exit when :SYSTEM.CURSOR_RECORD = l_cur_rec or :SYSTEM.LAST_RECORD = 'TRUE';
  next_record;
end loop; 
```

# sql-server - 将 COALESCE 与数值一起使用

> ID：16198219
> 
> 赞同：0
> 
> 时间：2013-04-24T17:14:27.940
> 
> 标签：sql-server, null

我有以下代码：

```
set @mystring = coalesce(numericval,''); 
```

我想要的是以下行为：

*   numericval 为 null - 将 @mystring 设置为空白
*   numericval 不为 null 然后将其转换为字符串并设置 @mystring

我无法将其合并为数值，因为该值将被输出，并且当它为空时我无法将其转换。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:20:05.443

试试这个

```
 Declare @mystring as varchar(Max)
    set @mystring = coalesce(Cast(numericval as varchar),'');
    Select @mystring 
```

# c++ - OpenGL圆绘制得到一个椭圆

> ID：16198220
> 
> 赞同：1
> 
> 时间：2013-04-24T17:14:29.917
> 
> 标签：c++, math, opengl, trigonometry, geometry

我试图在opengl中画一个圆圈，但我似乎无法获得正确的坐标，所以无论我使用什么方法，我总是得到一个省略号。当前代码如下：

```
void Ball::Render() {
    float center_position_x = _body->GetWorldCenter().x;
    float center_position_y = _body->GetWorldCenter().y;
    float radius = static_cast<b2CircleShape*>(_body->GetFixtureList()->GetShape())->m_radius;

    glBegin(GL_LINE_STRIP);
        for(float angle = 0; angle <= 360; ++angle) {
            float angleInRadians = glm::radians(angle);
            float x = glm::cos(angleInRadians);
            float y = glm::sin(angleInRadians);

            glVertex3f(x,y,0);
        }
    glEnd();
} 
```

（我知道代码应该在原点绘制圆，但即使那样它也不是一个完美的圆，如果我理解正确，应该在原点绘制一个半径 = 1 的圆）

我使用的其他方法是： [http://slabode.exofire.net/circle_draw.shtml](http://slabode.exofire.net/circle_draw.shtml) [http://www.opengl.org/discussion_boards/showthread.php/167955-drawing-a-smooth-circle](http://www.opengl.org/discussion_boards/showthread.php/167955-drawing-a-smooth-circle)

这是我的 OpenGL 窗口设置代码（它是一个存根程序，所以我从硬编码值开始）： `gluOrtho2D(-10, 15, -10, 15);`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:31:35.037

使用 gluOrtho2D(-WIDOWS_WIDTH, WIDOWS_WIDTH, -WINDOWS_HEIGHT, WINDOWS_HEIGHT);

顺便说一句，您在 2013 年使用的是固定管道。使用顶点着色器，这将很容易理解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T21:28:43.150

由 gluOrtho2d 定义的 2D 投影矩阵的纵横比必须与您正在渲染的视口/窗口相同，否则您会注意到正在渲染的图形中的失真。您可以使用上述 gluOrtho2d 语句或其他编写方式 -

浮动 ar = (float)WindowWidth/WindowHeight;

gluOrtho2D(-1*ar, ar, -1, 1)

# javascript - 将 JavaScript 方法移动到全局范围

> ID：16198225
> 
> 赞同：0
> 
> 时间：2013-04-24T17:14:38.267
> 
> 标签：javascript, function

在 JavaScript 中，是否可以将内部函数从一个函数移动到全局范围？我还没有找到任何直接的方法来做到这一点。

```
function moveMethodsIntoGlobalScope(functionName){
    //move all of functionName's methods into the global scope
    //methodsToPutIntoGlobalScope should be used as the input for this function.
}

//I want all of the methods in this function to be moved into the global scope so that they can be called outside this function.
function methodsToPutInGlobalScope(){
    function alertSomething(){
        alert("This should be moved into the global scope, so that it can be called from outside the function that encloses it.");
    }
    function alertSomethingElse(){
        alert("This should also be moved into the global scope.");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T17:16:04.600

如果您不想进行更改，`methodsToPutInGLobalSpace`可以使用以下肮脏的技巧：

```
var parts = methodsToPutInGlobalScope.toString().split('\n');
eval(parts.splice(1, parts.length - 2).join('')); 
```

作为最终解决方案，我们可以使用：

```
moveMethodsIntoGlobalScope(methodsToPutInGlobalScope);
alertSomething(); //why doesn't this work?

function moveMethodsIntoGlobalScope(functionName){
    var parts = functionName.toString().split('\n');
    eval.call(window, parts.splice(1, parts.length - 2).join(''));  
}

//I want all of the methods in this function to be moved into the global scope so that they can be called outside this function.
function methodsToPutInGlobalScope(){
    function alertSomething(){
        alert("This should be moved into the global scope, so that it can be called from outside the function that encloses it.");
    }
    function alertSomethingElse(){
        alert("This should also be moved into the global scope.");
    }
} 
```

[**现场演示**](http://jsfiddle.net/mgechev/5CC52/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T17:29:53.623

不是很复杂，但会工作。

```
function copyInto(arr, context) {
    //move all of functionName's methods into the global scope
    //methodsToPutIntoGlobalScope should be used as the input for this function.
    for (var i = 0; i < arr.length; i += 2) {
        var exportName = arr[i];
        var value = arr[i + 1];
        eval(exportName + "=" + value.toString());
    }
}

//I want all of the methods in this function to be moved into the global scope so that they can be called outside this function.
function methodsToPutInGlobalScope() {
    function alertSomething() {
        alert("This should be moved into the global scope, so that it can be called from outside the function that encloses it.");
    }

    function alertSomethingElse() {
        alert("This should also be moved into the global scope.");
    }

    copyInto(["alertSomething", alertSomething, "alertSomethingElse", alertSomethingElse], window);
}

methodsToPutInGlobalScope();
alertSomething();
alertSomethingElse(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T17:41:09.343

是的，这是**可能的**。如果您使用`var`关键字声明变量，则该变量仅成为本地变量，但如果您不这样做，它将成为全局变量。

```
function foo(){

   var test = 'test'; // <- Using var keyword
}

foo(); // <- execute the function

console.log(test); // undefined 
```

但是如果我们在没有`var`关键字的情况下做同样的事情：

```
function foo(){

   test = 'test'; // <- Using var keyword
}

foo(); // <- execute the function

console.log(test); // test 
```

为了使您的内部函数全局化，您需要声明不带关键字的**匿名函数**`var`

```
function methodsToPutInGlobalScope() {

    alertSomething = function () {
        alert("This should be moved into the global scope, so that it can be called from outside the function that encloses it.");
    }

    alertSomethingElse = function () {
        alert("This should also be moved into the global scope.");
    }

}

methodsToPutInGlobalScope(); // <- Don't forget to execute this function

alertSomething(); // Works
alertSomethingElse(); // Works as well 
```

# python - 如果我对一组相关类使用多表继承，他们可以有单独的管理员吗？

> ID：16198226
> 
> 赞同：0
> 
> 时间：2013-04-24T17:14:41.707
> 
> 标签：python, django

我需要在 Multi Table Inheritance 和 ABC Inheritance 之间进行选择，我不确定是否仍然可以为每个子类设置单独的管理员。我需要每个子类管理屏幕中的所有基类字段和子类中的所有字段。

如果这是一个愚蠢的问题，我很抱歉，我什至还没有完成手册，但我有一个截止日期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:28:48.080

当然，您可以为每个模型设置一个管理屏幕，并且基本模型中的所有字段都将出现在子模型上。

[来自 django 文档](https://docs.djangoproject.com/en/dev/topics/db/models/#multi-table-inheritance)：

> 层次结构中的每个模型都是一个模型

然后，如果您有：

**模型.py**

```
class Service(models.Model):
    owner = models.ForeignKey('auth.User')
    name = models.CharField(max_length=128)

class VariationAService(Service):
    # fields

class VariationBService(Service):
    # more fields 
```

你可以这样做：

**管理员.py**

```
class ServiceAdmin(admin.ModelAdmin):
    [...]

class VariationAServiceAdmin(admin.ModelAdmin):
    [...]

class VariationBServiceAdmin(admin.ModelAdmin):
    [...] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T17:26:19.537

无论哪种方式，您都会获得所有字段。两者的区别在于多表继承...

```
class Place(models.Model):
    name = models.CharField(max_length=50)
    address = models.CharField(max_length=80)

class Restaurant(Place):
    serves_hot_dogs = models.BooleanField()
    serves_pizza = models.BooleanField() 
```

...您将同时获得一个`Place`对象和`Restaurant`对象，它们都可以在管理员中进行编辑，但具有抽象基类...

```
class Place(models.Model):
    name = models.CharField(max_length=50)
    address = models.CharField(max_length=80)

    class Meta:
        abstract = True

class Restaurant(Place):
    serves_hot_dogs = models.BooleanField()
    serves_pizza = models.BooleanField() 
```

...你只会得到一个`Restaurant`可以在管理员中编辑的对象。

# yii - 使用操作过滤器执行事务

> ID：16198228
> 
> 赞同：1
> 
> 时间：2013-04-24T17:14:43.773
> 
> 标签：yii

我想在 Yii 中创建一个 TransactionFilter 以应用于一个操作以将其包装在一个事务中，这样我就不必每次想要使用事务时一遍又一遍地编写相同的代码，至少这是我的想法。我有

```
class TransactionFilter extends CFilter
{
    public function filter($filterChain)
    {
        if(Yii::app()->getRequest()->getIsPostRequest())
        {
            $transaction= Yii::app()->db->beginTransaction();
            try {
                $filterChain->run();
                $transaction->commit();
            }catch(Exception $e) {
                $transaction->rollback();
            }
        }
        else
            $filterChain->run();
        }
} 
```

这是我的用户类中的过滤器方法：

```
public function filters()
{
    return array(
        'accessControl',
        'postOnly + delete',
        array('application.components.TransactionFilter + create'),
    );
} 
```

我假设 $filterChain->run() 最终会执行该操作，但是当操作中有重定向时会出现问题，它从未在过滤器中的 $filterChain->run() 语句之后完成

我不知道这种方法在 Yii 中是否可取和可行，如果不是，如果有另一种方法或者我必须坚持传统方法，我将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T11:14:22.693

您必须开始交易：

```
protected function preFilter($filterChain) 
```

并提交，回滚：

```
protected function postFilter($filterChain) 
```

# c# - C# Windows Mobile 6.5.3 扩展 Winform MainMenu

> ID：16198232
> 
> 赞同：1
> 
> 时间：2013-04-24T17:14:50.333
> 
> 标签：c#, winforms, windows-mobile, subclass

我想要做的是扩展 Windows Mobile Winforms 的 MainMenu 以具有第二个菜单级别。如果您在菜单按钮上提示较短，它将执行事件操作，但如果您按下它更长的时间，则应弹出第二个菜单级别。MainMenu 的托管功能非常缺乏，所以我不得不另谋出路。我通过派生 MainMenu 并添加了一些 SubClassing 将其存档。

```
public delegate IntPtr Win32WndProc(IntPtr hWnd, int msg, int wParam, int lParam);

[DllImport("coredll.dll", EntryPoint = "FindWindow", SetLastError = true)]
public static extern IntPtr FindWindow(string lpClassName, IntPtr lpWindowName);

[DllImport("coredll.dll")]
public static extern bool EnableWindow(IntPtr hWnd, bool bEnable);

[DllImport("coredll")]
public static extern IntPtr SetWindowLong(IntPtr hWnd, int nIndex, Win32WndProc newProc);

int GWL_WNDPROC = (-4);
int GW_CHILD = 5;

IntPtr _oldToolbarProc;
IntPtr _oldMenuWorkerProc

void Hookup()
{   
    //find the window to hook
    var hWndHooked = FindWindow("HHTaskbar", IntPtr.Zero);
    if (hWndHooked == IntPtr.Zero)
        return;

    //enable the taskbar, not realy necessary
    EnableWindow(hWndHooked, true);          

    //find the menu_worker window
    var menuWorkerWnd = FindWindow("menu_worker", IntPtr.Zero);
    if (menuWorkerWnd  == IntPtr.Zero)
        return;

    var toolbarWnd = GetWindow(menuWorkerWnd, GW_CHILD);
    if (toolbarWnd == IntPtr.Zero)
        return;

    Win32WndProc newMenuWorker = MenuWorkerProc;
    _oldMenuWorkerProc = SetWindowLong(menuWorkerWnd, GWL_WNDPROC, newMenuWorker);

    Win32WndProc newToolbar = ToolbarProc;
    _oldToolbarProc = SetWindowLong(newToolbarWnd, GWL_WNDPROC, newToolbar);
} 
```

工具栏子类化测量 WM_LBUTTONDOWN 和 WM_LBUTTONUP 之间的时间，并根据这些事件之间的跳跃时间调用上下文菜单。

如果调用上下文菜单，则 menu_worker 子类必须禁止按下按钮的 WM_COMMAND。

这适用于单个窗口。但是，如果我在第二种形式上使用它，它们将识别相同的工具栏和 menuworker 以及应用程序崩溃。

我尝试的是在父表单的 onFocus /onLostFocus 事件中挂钩和取消挂钩。但遗憾的是 onFocus 在正确的窗口可见之前被调用并且它也得到了错误的窗口句柄:(

我现在所做的（我知道一个非常糟糕的 hack）是在 onFocus 事件中开始一个时间，然后等待 1000 毫秒然后将其连接起来。这导致 50:50 更改以挂接右侧窗口。

对正确的窗口进行子类化难道没有更好的解决方案吗？

# android - Android：FileNotFoundException 如何创建文件？

> ID：16198241
> 
> 赞同：0
> 
> 时间：2013-04-24T17:15:17.990
> 
> 标签：android, filenotfoundexception

我有以下代码：

```
 try{
             File sdCard = Environment.getExternalStorageDirectory();
             File directory = new File (sdCard.getAbsolutePath() + "/statReporter/");
             directory.mkdirs();

             //Path and name of XML file
             File file = new File(directory, appendTimeStamp("statReporter") + ".csv");
             FileOutputStream fOut = new FileOutputStream(file);
             OutputStreamWriter osw = new OutputStreamWriter(fOut);

             //Write to CSV File
             osw.write(message);
             osw.write(',');

             //Flush and close OutPutStreamWriter and close FileOutputStream
             osw.flush();
             osw.close();
             fOut.close();

             Log.d("File Logger:", "File write successfully!");

     }catch(IOException ioe){
             ioe.printStackTrace();
     } 
```

我得到以下异常：

```
java.io.FileNotFoundException: /mnt/sdcard/statReporter/Date:3/24/2013Time:11:932statReporter,.csv: open failed: ENOENT (No such file or directory) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:18:29.563

我发现了错误：

我更改了文件名。摆脱了“：”和“/”和“，”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T17:18:59.890

在文件名`Date:3/24/2013Time:11:932statReporter,.csv`中有`/`分隔符..这将被视为一个目录。

# oop - 为什么我不能对重载 subsref 的类使用内置函数？

> ID：16198244
> 
> 赞同：6
> 
> 时间：2013-04-24T17:15:28.923
> 
> 标签：oop, matlab, overriding, built-in

我想为特定类仅重载一种类型的 subsref 调用（'()' 类型），并将任何其他调用留给 Matlab 的内置 subsref - 具体来说，我希望 Matlab 通过 '. ' 类型。但是，当 subsref 在类中重载时，Matlab 的“内置”函数似乎不起作用。

考虑这个类：

```
classdef TestBuiltIn
    properties
        testprop = 'This is the built in method';
    end

    methods
        function v = subsref(this, s)
            disp('This is the overloaded method');
        end
    end
end 
```

要使用重载的 subsref 方法，我这样做：

```
t = TestBuiltIn;
t.testprop
    >> This is the overloaded method 
```

正如预期的那样。但现在我想调用 Matlab 内置的 subsref 方法。为了确保我做的事情正确，首先我尝试对结构进行类似的调用：

```
x.testprop = 'Accessed correctly';
s.type = '.';
s.subs = 'testprop';
builtin('subsref', x, s)
    >> Accessed correctly 
```

这也是意料之中的。但是，当我在 TestBuiltIn 上尝试相同的方法时：

```
builtin('subsref', t, s)
    >> This is the overloaded method 
```

...Matlab 调用重载方法而不是内置方法。当我要求它调用*内置*方法时，为什么Matlab会调用*重载*方法？

 *更新：响应@Andrew Janke 的回答，该解决方案几乎可以工作，但并不完全。考虑这个类：

```
classdef TestIndexing
    properties
        prop1
        child
    end

    methods
        function this = TestIndexing(n)
            if nargin==0
                n = 1;
            end

            this.prop1 = n;
            if n<2
                this.child = TestIndexing(n+1);
            else
                this.child = ['child on instance ' num2str(n)];
            end
        end

        function v = subsref(this, s)
            if strcmp(s(1).type, '()')
                v = 'overloaded method';
            else
                v = builtin('subsref', this, s);
            end
        end
    end
end 
```

所有这些都有效：

```
t = TestIndexing;
t(1)
    >> overloaded method
t.prop1
    >> 1
t.child
    >> [TestIndexing instance]
t.child.prop1
    >> 2 
```

但这不起作用；它为孩子使用内置的 subsref 而不是重载的 subsref：

```
t.child(1)
    >> [TestIndexing instance] 
```

请注意，上述行为与这两种行为都不一致（正如预期的那样）：

```
tc = t.child;
tc(1)
    >> overloaded method

x.child = t.child;
x.child(1)
    >> overloaded method 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T20:40:14.977

这是可能的，IIRC。要更改`()`但不更改`{}`“。”，请编写您的`subsref`方法以将这些其他情况从重载的 subsref 中传递给内置的 subsref，而不是尝试从外部显式调用内置函数。

```
function B = subsref(A, S)
    % Handle the first indexing on your obj itself
    switch S(1).type
        case '()'
            B = % ... do your custom "()" behavior ...
        otherwise
            % Enable normal "." and "{}" behavior
            B = builtin('subsref', A, S(1))
        end
    end
    % Handle "chaining" (not sure this part is fully correct; it is tricky)
    orig_B = B; % hold on to a copy for debugging purposes
    if numel(S) > 1
        B = subsref(B, S(2:end)); % regular call, not "builtin", to support overrides
    end
end 
```

（如果该`builtin`调用不起作用，您可以直接放入使用`.`and的情况`{}`，因为`subsref`在类定义中忽略了重载。）

为了使其功能齐全，您可能需要将 B 更改为 varargout，并将链接行为添加到“()”案例中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T21:56:20.627

为了扩展[Mathworks 板上](http://www.mathworks.com/matlabcentral/answers/73430-why-can-t-i-use-builtin-for-classes-that-overload-subsref)给出的解释，builtin 只能在重载方法中工作以访问预先存在的（内置）方法。

在 Matlab 中重载方法有效地将内置实现从除执行遮蔽的方法之外的*所有内容*中遮蔽，并且执行遮蔽的方法必须使用 builtin 来访问内置实现而不是递归到自身。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T20:49:44.100

一般来说。您应该`builtin(m,s)`在被重载的函数内部使用。这在 MATLAB 文档中有明确规定。

[http://www.mathworks.com/help/matlab/ref/builtin.html](http://www.mathworks.com/help/matlab/ref/builtin.html)

> builtin(function,x1,...,xn) 使用输入参数 x1 到 xn 执行内置函数。使用 builtin 从重载函数的方法中执行原始内置。为了正常工作，你绝不能重载内置。

考虑这段代码：

```
classdef TestBuiltIn
    properties
        testprop = 'This is the built in method';
        testprop2 = 'This is the derived subsref ';
    end
    methods

        function v = subsref(m, s)
            disp('enter subsref no matter how!');
            v = builtin('subsref',m, s);
        end
    end
end 
```

和测试命令

```
clear;
t = TestBuiltIn;
builtin('subsref', t, s)
s.type = '.';
s.subs = 'testprop';
s2 = s;
s2.subs = 'testprop2';

>> builtin('subsref', t, s1)

enter subsref no matter how!

ans =

This is the derived subsref 

>> builtin('subsref', t, s)
enter subsref no matter how!

ans =

This is the built in method 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-03T02:21:44.133

在此问题的更新版本中，当您调用 时`t.child(1)`，该`subsref`函数将接收`s`带有`s(1).type='.', s(1).subs='child'`and的参数`s(2).type='()', s(2).subs='1'`。[正如Andrew Janke](https://stackoverflow.com/users/105904/andrew-janke)在他的回答中提到的那样，对这个表达式的评估不是一步一步的。因此，在覆盖 时`subsref`，您应该首先处理 '.' 来处理此操作链。操作员。这是您的案例的不完整示例，

```
function v = subsref(this, s)
    switch s(1).type
       case '.'
           member = s(1).subs;
           if ismethod(this, member)
               % invoke builtin function to access method member
               % there is issue about the number of output arguments
               v = builtin('subsref',this,s);
           elseif isprop(this, member) % property
               if length(s) == 1
                   % invoke builtin function to access method member
                   v = builtin('subsref', this, s);
               elseif length(s) == 2 && strcmp(s(2).type,'()')
                   % this is where you evaluate 'tc.child(1)'
               else
                   % add other cases when you need, otherwise calling builtin
               end
           else
               % handling error.
           end
       case '()'
           % this is where you evaluate 't(1)'
           % you may need to handle something like 't(1).prop1', like the '.' case
       otherwise
           % by default, calling the builtin.
    end
end 
```

您还可以在[代码模式中找到关于 subsref 和 subsasgn 方法](https://cn.mathworks.com/help/matlab/matlab_oop/code-patterns-for-subsref-and-subsasgn-methods.html)的详细代码示例和说明。

您可能需要知道的另一件事是，此类中的*方法成员*也将通过`subsref`'.'调用。手术。看看这个[关于类的主题 subsref：如何调度方法？](https://cn.mathworks.com/matlabcentral/newsreader/view_thread/236103)，你会发现`builtin`函数没有返回值（因为调用的方法没有返回值）。但是， 的返回值`builtin`被赋值给`v`（即使`v`被替换为`varargout`），这是一个明显的错误。作者还给出了一个临时解决方案，通过使用`try ... catch`来解决这个错误。*

# javascript - 粘贴后从文本框中获取值

> ID：16198249
> 
> 赞同：7
> 
> 时间：2013-04-24T17:15:43.630
> 
> 标签：javascript, jquery

我有一个这样的场景，我动态生成了文本框。我必须验证文本框最多 15 个字符并限制特殊字符。

下面是在 document.ready() 中生成文本框并将粘贴事件绑定到它们的代码。

```
$(document).ready(function(){

  //Generate textboxes..i have some logic by which i am generating
  //textboxes on the fly and giving textboxes a class flagText
  GenerateFlagBoxes();

  //i am binding the textboxes by class names
   var $flagArea = $('.flagText');
    $flagArea.bind('paste', function () {
        var element = this;
        setTimeout(function () {
            alert($(element).val());
        }, 100);
    });

}); 
```

但这不起作用。我提供的警报没有到来。我认为在就绪事件中创建的控件不能绑定到监听事件。我错了。我不知道为什么会这样。我想要一些建议。

提前致谢。

这个小提琴正在工作。我正在检查，我可能在某些地方错了。我会更新我错的地方；

[http://jsfiddle.net/mnsscorp/8QFGE/1/](http://jsfiddle.net/mnsscorp/8QFGE/1/)

是的，现在可以工作了。在准备好的文档中，我可以绑定粘贴事件。我在代码中的某些地方出错了。:) 感谢您的建议。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T17:18:31.407

尝试动态生成元素的事件委托 -

```
$(document).on('paste','.flagText',function(){
    var element = this;
    setTimeout(function () {
        alert($(element).val());
    }, 100);
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T17:18:26.697

对于动态元素，您需要一个事件委托，例如[`on`](http://api.jquery.com/on/).

尝试这个：

```
$("body").on('paste', '.flagText', function () {
    setTimeout(function () {
        alert($(this).val());
    }, 100);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-30T04:47:05.190

使用目标

```
var $flagArea = $('.flagText');
    $flagArea.bind('paste', function (e) {
        setTimeout(function () {
            alert(e.target.value);
        }, 100);
    }); 
```

# c++ - 窃取 cv::Mat 的资源到 IplImage

> ID：16198255
> 
> 赞同：0
> 
> 时间：2013-04-24T17:15:57.353
> 
> 标签：c++, c, opencv

下面是将cv::Mat的资源复制到IplImage中的源代码

```
//copy the resource of src into IplImage
void copy_mat_Ipl(cv::Mat const &src, IplImage **dst)
{
         IplImage* old = *dst;
        IplImage temp_src = src;
        *dst = cvCloneImage(&temp_src);
        cvReleaseImage(&old);
} 
```

但我不想复制它，我想要的是从 cv::Mat 窃取资源我必须窃取它，因为 cv::Mat 可能是函数中的本地对象如果我不窃取它但是做这样的事情

```
void move_mat_to_Ipl(cv::Mat &src, IplImage **dst)
{
         IplImage* old = *dst;            
        **dst = src;
        cvReleaseImage(&old);
}

void some_function(IplImage **dst)
{
   cv::Mat src;
   //do something
   move_mat_to_Ipl(src, dst);
} 
```

src 的资源将是空闲的，然后 dst 将持有一个悬空指针 我怎么能窃取 cv::Mat 的资源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:14:19.020

你将不得不改变`move_mat_to_Ipl function`

```
IplImage ** move_mat_to_Ipl(cv::Mat &src, IplImage **dst)
{
    IplImage* old = *dst;
    IplImage temp_src = src;
    **dst = src;
    cvReleaseImage(&old);

    return **dst;
} 
```

这将[返回](http://www.cplusplus.com/doc/tutorial/functions/)**dst，然后您可以将其传递给另一个函数

# c# - 更新面板一定遗漏了一些东西，但无法弄清楚是什么

> ID：16198260
> 
> 赞同：0
> 
> 时间：2013-04-24T17:16:02.677
> 
> 标签：c#, asp.net, visual-studio-2012, updatepanel

```
<asp:Content runat="server" ID="BodyContent" ContentPlaceHolderID="MainContent">
<asp:ScriptManager ID="ScriptManager1" runat="server" />
<div id="Container" onclick="__doPostBack('UpdatePanel1', '');">
    <asp:UpdatePanel runat="server" ID="UpdatePanel1"
        OnLoad="UpdatePanel1_Load">
        <ContentTemplate>
            <asp:Label runat="server" ID="Label1" />
        </ContentTemplate>
    </asp:UpdatePanel>
</div>
</asp:Content> 
```

代码隐藏

```
public partial class _Default : Page
    {
    protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected void UpdatePanel1_Load(object sender, EventArgs e)
    {
        Label1.Text = DateTime.Now.ToString();
        UpdatePanel1.Update();

    }

} 
```

我在这里遗漏了一些东西，我已经做了 100 次，但这一次它似乎拒绝工作。我只需要一双额外的眼睛来看看我不是什么。我只是告诉更新面板在单击 div 时进行更新，问题是它总是进行整页回发。

我尝试了下面的两个建议，但没有运气让我头疼的是我也在一个全新的项目中尝试过，但一点运气都没有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T17:33:47.033

我相信您在调用 Update() 时会导致递归，因为它将再次落在 Load 事件中。只需删除 Update() 它应该可以工作。

# javascript - JavaScript中显示当前时间的PDF简单示例？

> ID：16198268
> 
> 赞同：-1
> 
> 时间：2013-04-24T17:16:30.917
> 
> 标签：javascript, security, pdf

我正在寻找一个简单的示例，它将 JavaScript 放入 PDF 文件中，以便 PDF 在打开时显示当前时间。有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T18:20:01.823

查看 Didier Stevens 的 make-pdf-javascript 工具 [http://blog.didierstevens.com/programs/pdf-tools/](http://blog.didierstevens.com/programs/pdf-tools/)

# php - 使用条件或在 cdbcriteria 中

> ID：16198274
> 
> 赞同：1
> 
> 时间：2013-04-24T17:17:03.850
> 
> 标签：php, yii

目前我的代码看起来像这样

```
 $criteria = new CDbCriteria();
    $criteria->compare('visible', 1);
    $criteria->compare('branch_id', $this->id); 
```

我想要的是做这样的事情

```
`branch_id`='$this->id' OR `branch_id` is NULL 
```

如何用`compare`功能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T17:30:58.737

[Yii 条件 <IS NULL>](https://stackoverflow.com/questions/5349788/yii-condition-is-null)

所以也许你想做

```
$idCrit = new CDbCriteria();
$idCrit->compare('branch_id', $this->id);
$idCrit->addCondition('branch_id is NULL', 'OR');

$criteria->mergeWith($idCrit); 
```

所有其他的东西在哪里`$criteria`？

一些进一步的阅读；

*   [http://www.yiiframework.com/doc/api/1.1/CDbCriteria#addCondition-detail](http://www.yiiframework.com/doc/api/1.1/CDbCriteria#addCondition-detail)
*   [http://www.yiiframework.com/doc/api/1.1/CDbCriteria#mergeWith-detail](http://www.yiiframework.com/doc/api/1.1/CDbCriteria#mergeWith-detail)

（具体看`$operator`论证。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-06T20:55:48.670

这对我有用：

```
$criteria->compare('field', array(NULL)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-07T03:19:28.290

使用这个：
**$criteria->compare('branch_id', array($this->id, null));**

正如您在代码中看到的：
[https://github.com/yiisoft/yii/blob/1.1.14/framework/db/schema/CDbCriteria.php#L414](https://github.com/yiisoft/yii/blob/1.1.14/framework/db/schema/CDbCriteria.php#L414)

“如果该值是一个数组，则比较通过精确匹配中的任何值来完成阵列。”

# java - 为文本到二进制程序创建一个新行

> ID：16198277
> 
> 赞同：0
> 
> 时间：2013-04-24T17:17:16.757
> 
> 标签：java

好的，这是我的程序，它可以工作，但我无法让二进制文件进入下一行。相反，它会变长并离开屏幕。

```
import javax.swing.*;

public class TextToBinary{
public static void main(String[] args) {

    String y;

    JOptionPane.showMessageDialog(null, "Welcome to the Binary Canary.","Binary Canary", JOptionPane.PLAIN_MESSAGE);

    y = JOptionPane.showInputDialog(null,"Write the word to be converted to binary: ","Binary Canary", JOptionPane.PLAIN_MESSAGE);

     String s = y;
      byte[] bytes = s.getBytes();
      StringBuilder binary = new StringBuilder();
      for (byte b : bytes)
      {  
         int val = b;
         for (int i = 0; i < 8; i++)
         {
            binary.append((val & 128) == 0 ? 0 : 1);
            val <<= 1;
         }
         binary.append(' ');
      }

      JOptionPane.showMessageDialog(null, "'" + s + "' to binary: " +"\n" +binary,"Binary Canary", JOptionPane.PLAIN_MESSAGE);

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:32:54.307

您已经创建了一组 8 个二进制数字来构成一个字节。只需为要在一行上显示的字节数添加一个计数器。

我选择了 4 来编写这个示例。

```
import javax.swing.JOptionPane;

public class TextToBinary {
    public static void main(String[] args) {

        String y;

        JOptionPane.showMessageDialog(null, "Welcome to the Binary Canary.",
                "Binary Canary", JOptionPane.PLAIN_MESSAGE);

        y = JOptionPane.showInputDialog(null,
                "Write the word to be converted to binary: ", "Binary Canary",
                JOptionPane.PLAIN_MESSAGE);

        String s = y;
        byte[] bytes = s.getBytes();
        StringBuilder binary = new StringBuilder();
        int byteCount = 0;
        for (byte b : bytes) {
            int val = b;
            for (int i = 0; i < 8; i++) {
                binary.append((val & 128) == 0 ? 0 : 1);
                val <<= 1;
            }
            binary.append(' ');
            byteCount++;
            if (byteCount >= 4) {
                binary.append("\n");
                byteCount = 0;
            }
        }

        JOptionPane.showMessageDialog(null, "'" + s + "' to binary: " + "\n"
                + binary, "Binary Canary", JOptionPane.PLAIN_MESSAGE);

        System.exit(0);
    }
} 
```

# c# - 如何设置由 Visual Studio 2010 应用程序创建的文本文件的路径？

> ID：16198278
> 
> 赞同：-5
> 
> 时间：2013-04-24T17:17:20.133
> 
> 标签：c#, visual-studio-2010, file, text, path

我正在使用 C# 在 Visual Studio 2010 中创建一个应用程序，只是为了生成一个字符串，该字符串包含该应用程序运行时手动输入的数据。我已经给出了一个创建按钮来生成该文本文件。如何在保存该应用程序 exe 文件的位置创建该文本文件？它是在代码中给出的 C:\ 中生成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:27:19.757

可执行文件所在的文件夹是：

```
string executableLocation = System.IO.Path.GetDirectoryName(
    System.Reflection.Assembly.GetExecutingAssembly().Location); 
```

因此，您要将文件保存到：

```
System.IO.Path.Combine(executableLocation, "myfile.txt"); 
```

# android - 将视频缩略图放入arraylist

> ID：16198279
> 
> 赞同：0
> 
> 时间：2013-04-24T17:17:24.043
> 
> 标签：android, arraylist, cursor, thumbnails

我正在尝试查询视频缩略图并将其放入数组列表中。但是，当我尝试将其添加到 arraylist 时，会出现此错误

```
04-24 12:09:35.489: D/Checking Database(11505): in the Do while
04-24 12:09:35.494: D/Checking Database(11505): the columnindex is 1
04-24 12:09:35.494: D/AndroidRuntime(11505): Shutting down VM
04-24 12:09:35.494: W/dalvikvm(11505): threadid=1: thread exiting with uncaught exception (group=0x40c351f8)
04-24 12:09:35.504: E/AndroidRuntime(11505): FATAL EXCEPTION: main
04-24 12:09:35.504: E/AndroidRuntime(11505): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.camerapreview/com.example.camerapreview.Gridview}: android.database.CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0
04-24 12:09:35.504: E/AndroidRuntime(11505):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1968)
04-24 12:09:35.504: E/AndroidRuntime(11505):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1993)
04-24 12:09:35.504: E/AndroidRuntime(11505):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
04-24 12:09:35.504: E/AndroidRuntime(11505):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1159)
04-24 12:09:35.504: E/AndroidRuntime(11505):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-24 12:09:35.504: E/AndroidRuntime(11505):    at android.os.Looper.loop(Looper.java:137)
04-24 12:09:35.504: E/AndroidRuntime(11505):    at android.app.ActivityThread.main(ActivityThread.java:4507)
04-24 12:09:35.504: E/AndroidRuntime(11505):    at java.lang.reflect.Method.invokeNative(Native Method)
04-24 12:09:35.504: E/AndroidRuntime(11505):    at java.lang.reflect.Method.invoke(Method.java:511)
04-24 12:09:35.504: E/AndroidRuntime(11505):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
04-24 12:09:35.504: E/AndroidRuntime(11505):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
04-24 12:09:35.504: E/AndroidRuntime(11505):    at dalvik.system.NativeStart.main(Native Method)
04-24 12:09:35.504: E/AndroidRuntime(11505): Caused by: android.database.CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0
04-24 12:09:35.504: E/AndroidRuntime(11505):    at android.database.AbstractCursor.checkPosition(AbstractCursor.java:400)
04-24 12:09:35.504: E/AndroidRuntime(11505):    at android.database.AbstractWindowedCursor.checkPosition(AbstractWindowedCursor.java:136)
04-24 12:09:35.504: E/AndroidRuntime(11505):    at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:50)
04-24 12:09:35.504: E/AndroidRuntime(11505):    at android.database.CursorWrapper.getString(CursorWrapper.java:114)
04-24 12:09:35.504: E/AndroidRuntime(11505):    at com.example.camerapreview.Gridview.onCreate(Gridview.java:63)
04-24 12:09:35.504: E/AndroidRuntime(11505):    at android.app.Activity.performCreate(Activity.java:4465)
04-24 12:09:35.504: E/AndroidRuntime(11505):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
04-24 12:09:35.504: E/AndroidRuntime(11505):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1932)
04-24 12:09:35.504: E/AndroidRuntime(11505):    ... 11 more 
```

这是我正在使用的代码。

```
String[] thumbColumns = {
        MediaStore.Video.Thumbnails.VIDEO_ID,
        MediaStore.Video.Thumbnails.DATA
};

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.preview);

GridView gridview = (GridView) this.findViewById(R.id.gridview);

    thumbCursor = this.getContentResolver().query(MediaStore.Video.Thumbnails.EXTERNAL_CONTENT_URI,
        thumbColumns,
        null,
        null, null);

    ArrayList<String> thumb = new ArrayList<String>();

            thumbCursor.moveToFirst();

            do {
                Log.d(TAG, "in the Do while");

                int columnindex = thumbCursor.getColumnIndexOrThrow(MediaStore.Video.Thumbnails.DATA);
                Log.d(TAG, "the columnindex is " + columnindex);                

                thumb.add(thumbCursor.getString(columnindex));

            } while (thumbCursor.moveToNext()); 
```

任何帮助将非常感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:21:49.113

> 引起：android.database.CursorIndexOutOfBoundsException：请求索引0，大小为0

你`thumbCursor`是空的，在从光标读取值之前请检查它是否包含任何数据，否则你会得到上面的异常。

像这样检查

```
if( thumbCursor.moveToFirst())
 {
    do {
                    Log.d(TAG, "in the Do while");
                    int columnindex = thumbCursor.getColumnIndexOrThrow(MediaStore.Video.Thumbnails.DATA);
                    Log.d(TAG, "the columnindex is " + columnindex);                
                    thumb.add(thumbCursor.getString(columnindex));
                } while (thumbCursor.moveToNext());
    } 
```

# haskell - Haskell 中的 GADT 枚举

> ID：16198280
> 
> 赞同：8
> 
> 时间：2013-04-24T17:17:24.557
> 
> 标签：haskell, combinatorics, gadt

您能否告诉我 Enum 类的 Haskell 派生机制是否有任何扩展？我的意思是除了“空构造函数”之外还有很多合理的情况。有没有关于这个主题的作品？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T08:30:42.167

你真的需要 GADT 吗？或者您只是想解除对只有空构造函数的普通枚举类型的限制？如果是后者，那么还有选择。一种是将 GHC 的`Generic`机制与适当的通用枚举类的实现一起使用。这在`generic-deriving`包中可用。这是一个例子：

```
{-# LANGUAGE DeriveGeneric #-}
import Generics.Deriving

data Tree a = Leaf a | Node (Tree a) (Tree a)
  deriving (Show, Generic)

instance GEnum Bool
instance GEnum a => GEnum (Tree a)

test :: [Tree Bool]
test = take 10 genum 
```

现在，`test`是以下列表：

```
[ Leaf False
, Node (Leaf False) (Leaf False)
, Leaf True
, Node (Leaf False) (Node (Leaf False) (Leaf False))
, Node (Node (Leaf False) (Leaf False)) (Leaf False)
, Node (Leaf False) (Leaf True)
, Node (Node (Leaf False) (Leaf False)) (Node (Leaf False) (Leaf False))
, Node (Leaf True) (Leaf False),Node (Leaf False) (Node (Leaf False) (Node (Leaf False) (Leaf False)))
, Node (Node (Leaf False) (Leaf False)) (Leaf True)
] 
```

此实现`genum`使用对角化来合并产品。这保证了每个值实际上都出现在列表中的某个位置，但反过来可能会导致令人惊讶的顺序。

# c++ - 文本框 MFC SDI 不会出现

> ID：16198284
> 
> 赞同：0
> 
> 时间：2013-04-24T17:17:45.367
> 
> 标签：c++, mfc, textbox, sdi

我正在尝试在我的表单中添加一个文本框（我想将从此框中输入的数据传递到文档进行存储），但我无法让文本框正常工作。

贝娄是我尝试过的代码。为什么我的文本框没有出现，以及如何正确地让文本框出现在我的视图中。

```
void CMy861a4VasilkovskiyView::OnDraw(CDC* pDC)
{
    CMy861a4VasilkovskiyDoc* pDoc = GetDocument();
    ASSERT_VALID(pDoc);
    if (!pDoc)
        return;
    const CString str("Hello");
    pDC->TextOut(0, 0, str);
    CEdit m_edit;
    CRect rect(20,20,10,10);// (85, 110, 180, 210);

    m_edit.Create(WS_CHILD | WS_VISIBLE | WS_TABSTOP |
             ES_AUTOHSCROLL | WS_BORDER, rect, this, ES_LEFT);
   // m_edit.SetFocus();

    // TODO: add draw code for native data here
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:51:36.383

我可以看到几个问题：

1.  OnDraw() 不是创建 CEdit 控件的正确位置 - CMy861a4VasilkovskiyView::Create() 可能是最好的位置。如果你把它留在 OnDraw() 中，这将在每次重绘视图时重新创建 CEdit 控件，这不是你想要的。
2.  您的 CEdit m_edit 变量必须是您的 CMy861a4VasilkovskiyView 类的成员变量。这是它没有被绘制的主要原因 - 在它被绘制之前 m_edit 超出了范围。

# jquery - 鼠标悬停在整个页面上的滑动菜单面板

> ID：16198293
> 
> 赞同：-2
> 
> 时间：2013-04-24T17:18:27.527
> 
> 标签：jquery, css

我是 CSS 和 jquery 的新手，我正在寻求有关贯穿整个页面的滑动菜单面板的帮助。当鼠标悬停完成时，这应该可以工作。这就是我所说的： ![在此处输入图像描述](https://i.stack.imgur.com/F5C34.jpg)

它保持这样，直到鼠标悬停完成。当鼠标悬停时，整个部分像这样滑动：

![在此处输入图像描述](https://i.stack.imgur.com/9RrPR.gif)

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:36:23.973

有一个非常简单的滑动菜单，仅在 CSS 中构建

**HTML**

```
<div class="menu">
    <ul>
        <li><a href="#">item 1</a></li>
        <li><a href="#">item 2</a></li>    
        <li><a href="#">item 3</a></li>
    </ul>
</div> 
```

**CSS**

```
.menu {
    position: relative;
    width: 100%;
    height: 40px;
    vertical-align: middle;
    top: 0;
    left: 0;
    background-color: #ccc;
    z-index: 1;

}
.menu ul {
    display:block;
    position: absolute;
    left: -200px;
    top:0;
    width: 200px;
    padding:10px 0;
    margin:0;
    -webkit-transition: all 1.3s ease-in-out;
    -moz-transition: all 1.3s ease-in-out;
    -o-transition: all 1.3s ease-in-out;
    -ms-transition: all 1.3s ease-in-out;   
    transition: all 1.3s ease-in-out;
}
.menu:hover ul {
    left: 0;

}
.menu li {
    list-style: none;
    display: inline;
    margin:0 10px;
    font-family: tahoma;
}
.menu li a {
    color: #999;
    padding: 0;
    text-decoration: none;

} 
```

**演示**

[http://jsfiddle.net/sqJyw/](http://jsfiddle.net/sqJyw/)

# ruby-on-rails - 如何以升序方式对迁移脚本文件夹进行排序

> ID：16198294
> 
> 赞同：0
> 
> 时间：2013-04-24T17:18:29.437
> 
> 标签：ruby-on-rails, rails-migrations

如何按升序对迁移脚本文件夹进行排序（即，我希望在执行`ls -l`命令时最近创建的脚本位于底部）。目前它以混合的方式出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:26:26.953

在 Rails 根目录中，`ls -ltr db/migrate/`

或者在 db/migrate 中，只需`ls -ltr`

* * *

```
Jason-Kim-MacBook-Pro:composer jkim$ ls -ltr db/migrate/
total 152
-rwxr-xr-x  1 jkim  staff   194 Apr  1 11:20 20130212221628_create_templatings.rb
-rwxr-xr-x  1 jkim  staff   230 Apr  1 11:20 20130212212402_create_locales.rb
-rwxr-xr-x  1 jkim  staff   188 Apr  1 11:20 20130212210032_create_websites.rb
-rwxr-xr-x  1 jkim  staff   270 Apr  1 11:20 20130206224119_create_speaks.rb
-rwxr-xr-x  1 jkim  staff   176 Apr  1 11:20 20130206224111_create_languages.rb
-rwxr-xr-x  1 jkim  staff   176 Apr  1 11:20 20130206224104_create_countries.rb
-rwxr-xr-x  1 jkim  staff   233 Apr  1 11:20 20130107231329_create_imagedescs.rb
-rwxr-xr-x  1 jkim  staff   276 Apr  1 11:20 20130107231313_create_textdescs.rb
-rwxr-xr-x  1 jkim  staff   227 Apr  1 11:20 20121207002247_create_images.rb
-rwxr-xr-x  1 jkim  staff   229 Apr  1 11:20 20121130213128_create_fields.rb
-rwxr-xr-x  1 jkim  staff   240 Apr  1 11:20 20121130213101_create_templates.rb
-rw-r--r--  1 jkim  staff   248 Apr  9 18:38 20130329210956_create_varinstances.rb
-rw-r--r--  1 jkim  staff   181 Apr  9 18:38 20130329203628_create_variables.rb
-rwxr-xr-x  1 jkim  staff  1518 Apr 12 14:51 20130122211324_devise_create_users.rb
-rw-r--r--  1 jkim  staff   201 Apr 12 15:14 20130412213724_create_profiles.rb
-rw-r--r--  1 jkim  staff   257 Apr 17 10:35 20130417173202_change_data_type_for_value_in_varinstance.rb
-rw-r--r--  1 jkim  staff   140 Apr 17 14:27 20130417212708_add_latest_change_made_by_to_pages.rb
-rwxr-xr-x  1 jkim  staff   489 Apr 17 14:27 20121130213117_create_pages.rb
-rw-r--r--  1 jkim  staff   177 Apr 19 14:59 20130418182926_add_locking_attributes_to_pages.rb 
```

# mysql - mysql插入多行是部分保存的数据

> ID：16198306
> 
> 赞同：1
> 
> 时间：2013-04-24T17:19:07.363
> 
> 标签：mysql

假设我有这样的查询

```
INSERT INTO mytable(`title`, `name`) VALUES  // row1
(`title1`, `name1`), // row 2
(`title2`, `name2`), // row 3
(`title3`, `name3 is too long for the table corresponding field`); // row 4 
```

并尝试保存到数据库中，我得到了类似的错误`data truncated for column name`，所以我想问一下行（第 2 行和第 3 行）和/或第三行的`title`字段是否将保存在表中，或者如果出现此错误，则不会有数据已保存（以防万一，首先“检查”所有数据是否可以正确保存，然后尝试保存）谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-03T20:11:32.337

在 mysql 5.6.13 中，以下 SQL 无法插入任何记录：

```
INSERT INTO mytable(title, name) VALUES 
('title1', 'name1'), 
('title2', 'name2'), 
('title3', 'name3 is too long for the table corresponding field'); 
```

如果您希望截断数据并插入所有三个记录，请使用“IGNORE”：

```
INSERT IGNORE INTO mytable(title, name) VALUES 
('title1', 'name1'), 
('title2', 'name2'), 
('title3', 'name3 is too long for the table corresponding field'); 
```

# algorithm - 如何将网络划分为不同大小的子网？

> ID：16198307
> 
> 赞同：0
> 
> 时间：2013-04-24T17:19:09.547
> 
> 标签：algorithm, networking, ip, subnet

我有一个网络`193.219.64.0/24`，我需要切断`193.219.64.24/30`它。所以现在我在网络中间有一个子网。在对给定网络的其余部分进行子网划分时，为了最大限度地利用地址，我应该考虑哪些步骤？

我正在学习本[教程](http://www.youtube.com/watch?v=WzH8uVG11WY)，但是中间没有最小大小的子网。更重要的是，我不知道网络需要哪些子网。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:39:17.147

我们可以从：

因为我们的网络掩码是 /24 我们有 0-255 IP 范围，我们也想要 192.219.64.24/30，所以从 192.219.64.0/25 开始我们可以从 192.219.64.128/25 开始并继续..

193.219.64.128 /25
--> 192.219.64.255（将给出128地址）

193.219.64.64 /26 --> 192.219.64.127（将给出64个地址）

193.219.64.32 /27 --> 192.219.64.63（将给出 32 个地址）

193.219.64.24 /30 --> 192.219.64.27（将给出4个地址）所需的一个......等等......

# c++ - 我只是很困惑

> ID：16198309
> 
> 赞同：0
> 
> 时间：2013-04-24T17:19:24.503
> 
> 标签：c++, xcode, arrays, setw

我的老师一直告诉我，我必须将 setw 与正在修改的项目放在同一行。我以为我做到了，但她一直告诉我不是，她还一直告诉我我的参数标记错误，所以如果有人可以帮助我解决我的 setw 问题和我的参数问题，那就太好了。我在每个函数下方的注释中标记了参数的含义。

```
#include <iostream>
#include <iomanip>
using namespace std;
const int MAX=14;
void startArray(int beadArray[MAX]);//Creates the array that gets printed out
void printArray(int beadArray[MAX]);//Prints out the array
void board(int beadArray[MAX]);     //Creates the board out of stars
void makeSolidLine(int numStars);   //makeSolidLine makes a line out of numStars
void line();                        // A line of stars with 6 spaces inbetween
void topBinNum();                   //Numbers in top of the board
void bottomBinNum();                //Numbers in the bottom bin
void topBinNumValue();                  //Values of each slot in the top bin
void bottomBinNumValue();               //Values of each slot in the bottom bin
int gameOver(int beadArray[MAX]);       //Declares the winner by adding bins and comparing the totals

int main()
{
    int beadArray[MAX];
    startArray(beadArray);
    board(beadArray);
    int winner;
    winner=gameOver(beadArray);
    cout<<winner;
    system("pause");
    return 0;

}
/*Calls the functions in proper order so the code will run smoothly
 parameter=n/a
 return value=n/a
 */
void topBinNum() 
{
    cout<<"*      ";
    for(int i=0; i<6; i++)
    {
        cout<<"*"<<setw(4)<<i<<setw(3);
    }
    cout<<"*";
    cout<<"      *\n";

}
/*Numbers the slots on the board starting at 0 setting spaces and a * between slots then moving to the next slot adding 1 and so on until at 5 then it stops
 parameter=n/a
 return value=n/a
 */
void bottomBinNum()     
{
    cout<<"*      ";
    for(int i=12; i>6; i--)
    {
        cout<<"*"<<setw(4)<<i<<setw(3);
    }
    cout<<"*";
    cout<<"      *\n";
}
/*Numbers the slots on the board starting at 12 setting spaces and a * between slots then moving to the next slot subtracting 1 and so on until at 7 then it stops
 parameter=n/a
 return value=n/a
 */
void makeSolidLine(int numStars) 
{
    for (int count=0; count<numStars; count++)  
    {
        cout<<"*";
    }
}
/*Prints out a solid line of *
 parameter=int numStars
 return value=n/a
 */
void line()  
{
    for (int count=0; count<8; count++)
    {
        cout<<"*";
        for(int count=0; count<6; count++)  
        {
            cout<<" ";
        }
    }
    cout<<"*\n";
}
/*Prints out a line of * with six spaces inbetween
 parameter=n/a
 return value=n/a
 */
void startArray (int beadArray[MAX])
{
    for(int i=0; i<MAX; ++i)
    {
        beadArray[i]=4;
    }
    beadArray[6]=0;
    beadArray[13]=0;
}
/*gives each slot a value
 parameter=int beadArray[MAX]) keeps array from going above the MAX
 return value=n/a
 */
void printArray (int beadArray[MAX])
{

    for(int i=0; i<MAX; i++)
    {
        cout<<beadArray[i];
        cout<<endl<<endl;
    }
}
/*Finds data needed to print out the numbers in the correct order
 parameter=int beadArray[MAX] keeps array from going above the MAX
 return value=n/a
 */
void topBinNumValue(int beadArray[MAX])
{
    cout<<"*      ";
    for(int i=0; i<6; i++)
    {
        cout<<"*"<<setw(4)<<beadArray[i]<<setw(3);
    }

    cout<<"*";
    cout<<"      *\n";
}
/*
 topBinNumValue calls the parameter int beadArray[MAX] which is the slot scores from 0-4 and outputs five 4's with no return value
 parameter=int beadArray[MAX] keeps array from going above the MAX
 return value=n/a
 */
void bottomBinNumValue(int beadArray[MAX])
{
    for(int i=13; i>5; i--)
    {
        cout<<"*"<<setw(4)<<beadArray[i] <<setw(3);
    }

    cout<<"  *\n";

}
/*
 bottomBinNumValue calls the parameter int bead array[max] which is the slot scores from 6-13 and outputs a 0 then five 4's and another 0 with no return value
 parameter=int beadArray[max] keeps array from going above the MAX
 return value=n/a
*/
void board(int beadArray[MAX]) 
{
    makeSolidLine(57);
    cout<<endl;
    line();
    topBinNum();
    line();
    topBinNumValue(beadArray);
    line();
    cout<<"*  13  ";
    makeSolidLine(43);
    cout<<"   6  *";
    cout<<endl;
    line();
    bottomBinNum();
    line();
    bottomBinNumValue(beadArray);
    line();
    makeSolidLine(57);
    cout<<endl;
}
/*Creates the board with numbers in proper location by calling all the previously created codes the print out the board.
 parameter=int beadArray[MAX] keeps array from going above the MAX
 return value=n/a
 */
int gameOver(int beadArray[MAX])
{
    int total1=0;
    int total2=0;
    int winner=0;
    for(int i=0; i<6; i++)
    {
        total1=total1+beadArray[i];
    }
    for(int i=12; i>6; i--)
    {
        total2=total2+beadArray[i];
    }
    if(total1==0||total2==0)  
    {
        if(total1>total2)
        {

            winner =1;
        }
        else
        {

            winner=2;
        }
    }
    else
    {
        winner= -1;
    }
    return winner;

}
/*Adds the totals to beadArray[13 & 6] checks to see which slot is higher and displays the winner if there is one.
parameter=int beadArray[MAX] keeps array from going above the MAX
return value=winner, who ever won the game is the return value
*/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:42:06.770

这里是[一些文档`std::setw`](http://en.cppreference.com/w/cpp/io/manip/setw)。

从那个链接：

> 当用于表达式`out << setw(n)`... 时，将流输出或输入的宽度参数设置为正好 n。

所以你的线：

```
 cout<<"*"<<setw(4)<<i<<setw(3); 
```

这些事情**是按这个顺序**做的：

*   印刷`"*"`
*   `cout` **设置现在将使用**的宽度`4`
*   打印`i`宽度为 4
*   `cout` **设置现在将使用**的宽度`3`

之后打印的任何内容都将具有 3 的宽度。

你的老师似乎不喜欢它不清楚要打印*什么*宽度为 3，因为下一个打印的东西在不同的行上。

# wpf - 如何转换已经绑定到多重绑定的控件

> ID：16198311
> 
> 赞同：0
> 
> 时间：2013-04-24T17:19:28.217
> 
> 标签：wpf, binding, multibinding

假设我有一个已经绑定到 XAML 中的转换器的 FrameworkElement。以编程方式，我希望在运行时将绑定附加到现有绑定 - 例如在控件的加载事件中，有效地使其成为多重绑定。

如何获取（例如） Visibility 属性上的现有绑定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:46:41.670

你可能会做这样的事情：

```
var oldBinding = BindingOperations.GetBinding(element, UIElement.VisibilityProperty);

var newBinding = new MultiBinding { Converter = ... };

var firstBinding = new Binding
{
    Path = oldBinding.Path,
    Source = oldBinding.Source // or RelativeSource or ElementName
};

var secondBinding = new Binding
{
    ...
};

newBinding.Bindings.Add(firstBinding);
newBinding.Bindings.Add(secondBinding);

BindingOperations.SetBinding(element, UIElement.VisibilityProperty, newBinding); 
```

# xpath - Groovy + WebDriver：如何在 xpath 中使用变量？

> ID：16198314
> 
> 赞同：0
> 
> 时间：2013-04-24T17:19:35.033
> 
> 标签：xpath, groovy, webdriver

此代码有效：

```
MyField = driver.findElement(By.xpath("//select/option[contains(text(), '10.11.12.13')]"))
MyField.click() 
```

此代码不起作用（未选择元素）

```
ClientHost = '10.11.12.13'
MyField = driver.findElement(By.xpath("//select/option[contains(text(), ClientHost)]"))
MyField.click() 
```

**问题：如何将变量值传递给 xpath？**

谢谢，浣熊

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T17:34:24.533

这应该工作

```
 myField = driver.findElement(By.xpath("//select/option[contains(text(), '$ClientHost')]") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T21:58:26.533

尝试

```
MyField = driver.findElement(By.xpath("//select/option[contains(text(), '" + ClientHost + "')]")) 
```

您的代码不起作用，因为您的变量在字符串中没有被解释为这样，它被视为字符串'ClientHost'。您必须将变量连接到字符串中才能以您想要的方式工作。

# sitecore - Sitecore 页面编辑器 Javascript 错误

> ID：16198315
> 
> 赞同：1
> 
> 时间：2013-04-24T17:19:40.567
> 
> 标签：sitecore, sitecore6, page-editor

在我目前正在进行的 sitecore 项目中，我们注意到我们的页面编辑器的行为不像 Vanilla 安装的页面编辑器。对于每个占位符，我们必须单击两次以使编辑器专注于该占位符。在第一次单击时，工具栏弹出焦点更改为指向我们刚刚单击的占位符或子布局，但仅在第二次单击时突出显示该项目。

我相信这种行为是由于我们遇到的 JS 错误。错误是：

```
Uncaught TypeError: Cannot read property 'sc-renderMoreSection' of undefined 
renderTemplate 
Sitecore.PageModes.ChromeControls.Base.extend.renderMoreSection
Sitecore.PageModes.ChromeControls.Base.extend.updateCommands
Sitecore.PageModes.ChromeControls.Base.extend.show
Sitecore.PageModes.SelectionFrame.Sitecore.PageModes.ChromeFrame.extend.showSides
value
Sitecore.PageModes.ChromeFrame.Base.extend.show
Sitecore.PageModes.SelectionFrame.Sitecore.PageModes.ChromeFrame.extend.show     
value 
select
Sitecore.PageModes.Chrome.Base.extend._clickHandler
c jquery.noconflict.js:16
d.event.handle jquery.noconflict.js:16
k.handle.m 
```

JS 位于生成的脚本中，该脚本在 Sitecore 安装中似乎非常标准。发生此错误的方法是

```
this.renderTemplate = function(templateName, template, data, options) {
   if (!$sc.template[templateName]) {
      $sc.template(templateName, template);
   }
  return $sc.tmpl(templateName, data, options);
}; 
```

在`!$sc.template[templateName]`语句中，因为模板未定义。

有没有人遇到过类似的事情？有人知道可能导致此问题的原因吗？

我们正在运行 Sitecore 6.5 和 jQuery 1.7.2

编辑：在解决此问题一天后，我发现了以下内容：

Sitecore 的页面编辑器正在覆盖我们的 jQuery 版本 1.7.1，我们在无冲突模式下运行它与它自己的版本 1.5.1，它在无冲突模式下运行。我们的脚本与 $$$ 别名没有冲突，sitecore 与 $sc 没有冲突。最后，我们的 $ 是 jquery 1.5.1（这让我感到困惑，因为如果我正确理解无冲突，它应该返回到标准 $）。

就页面编辑器而言，这无关紧要。我正在测试我的调整的页面不使用依赖于 1.7 的 jQuery。该问题与 sitecore 页面编辑器脚本包含的“模板”jquery 插件有关。由于我无法确定的原因，此模块在页面编辑器中不起作用，并且是错误的根源。我们的其他 Sitecore 站点仍然使用该站点包含的站点运行。删除模板插件会导致其他网站的行为方式与我们的网站当前相同。

此外，Sitecore 在此脚本中也包含原型，但未映射到 $

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T13:02:40.237

此问题是由安装了共享源模块“分类法”引起的。看来这个模块在 Sitecore 6.5 的页面编辑器中表现不佳

它强制加载 jQuery，然后对其调用不冲突，将其别名为 $sc。然后，当页面编辑器的脚本实际加载时，$sc 永远不会被新的 jQuery 副本覆盖，因为 $sc 不是未定义的。这意味着编辑器脚本加载的插件不在 $sc 变量上，正如人们所预料的那样，这会导致整个系统停止正常运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T20:43:42.720

尝试在 NoConflict 模式下在代码中使用 jQuery，因为 jQuery 使用 $ 符号但 Sitecore 也使用，这可能会导致冲突。

```
jQuery.noConflict(); 
```

完成此操作后，您需要在调用 jQuery 脚本时使用 jQuery 而不是 $，或者创建一个嵌入 jQuery 脚本的新函数，如下面的链接中所述。

另请参阅[此链接](http://api.jquery.com/jQuery.noConflict/)

# java - Java mysql连接在第二类中失败

> ID：16198316
> 
> 赞同：0
> 
> 时间：2013-04-24T17:19:45.170
> 
> 标签：java, mysql

我有一个运行良好的 java 类（我的意思是 mysql 连接到 sql 是成功的）但是在同一个包中，我有另一个类。我试图从那里创建连接对象，然后打算将连接用于各种目的。这是工作正常的类（我将函数名从 public static void main(String[] args) 更改为 connect()。我真的不确定为什么无法从其他文件调用连接。

**db.java**

```
import java.sql.*;
import java.util.Properties;

public class db
{
  // The JDBC Connector Class.
  String dbClassName = "com.mysql.jdbc.Driver";

  // Connection string. emotherearth is the database the program
  // is connecting to. You can include user and password after this
  // by adding (say) ?user=paulr&password=paulr. Not recommended!

   String CONNECTION =
                          "jdbc:mysql://127.0.0.1/news";

  public Connection Connect() throws
                             ClassNotFoundException,SQLException
  {
    System.out.println(dbClassName);
    // Class.forName(xxx) loads the jdbc classes and
    // creates a drivermanager class factory
    Class.forName(dbClassName);

    // Properties for user and password. Here the user and password are both 'paulr'
    Properties p = new Properties();
    p.put("user","root");
    p.put("password","akshay");

    // Now try to connect
    Connection c = DriverManager.getConnection(CONNECTION,p);

    System.out.println("It works !");
    return c;
    }

} 
```

从这些类中，我尝试调用该函数：

```
import java.sql.*;

public class findl {

    public static void main(String[] args)
    {
        System.out.println("hi");
    }   
    public Connection conn(){
        db dbs = new db();
        Connection clr = dbs.Connect();
        return clr;
            }

} 
```

脚注：错误是在线 `Connections clr = dbs.connect()`和日食说

```
 1)unhandled exception type sqlexception

 2)unhandled classnotfoundexception. 
```

如果加载 mysql.jar 有问题，那么它不应该首先工作（在原始类中）。请告诉我我错过了什么。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:27:45.963

使用这个而不是第二个文件

```
 import java.sql.*;

 public class findl {

  public static void main(String[] args)
        {
            System.out.println("hi");
        }   
try{
    public Connection conn(){
        db dbs = new db();
        Connection clr = dbs.Connect();
        return clr;
            }
}

 catch(SQLException s){} 
```

捕捉（ClassNotFoundException e）{

```
}

    } 
```

标记try-catch

将此代码放在 try-catch 中并在 catch 块中处理 sqlException

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T17:22:41.613

第二个示例中的方法`conn`必须表明它`throws SQLException`和第一个类中的`ClassNotFoundException`一样`public Connection Connect() throws ClassNotFoundException,SQLException`。

那是你的问题：检查异常。

# c# - Ajax 调用后部分视图未完全重新渲染

> ID：16198317
> 
> 赞同：1
> 
> 时间：2013-04-24T17:19:45.913
> 
> 标签：c#, jquery, ajax, asp.net-mvc

我有一个部分观点，我需要在 Ajax 调用后完全刷新。当我这样做时，它的一部分是但不是全部。当我逐步浏览它以查看捕获的内容时，看起来只是局部视图中的表单正在刷新，而不是其他部分。有什么可能导致这种情况吗？

刷新视图和包含其他部分视图的视图的 jQuery 和 Ajax：

```
<script type="text/javascript" charset="utf-8">
$(document).ready(function () {
    $('#ChangeHeatName').click(function (e) {
        var tdata = $('#form1').serialize();
        var origname = $('#HeatNameDiv').find('input[name="heatName"]').first().val();
        var newname = $('#HeatNameDiv').find('input[name="updatedHeat"]').first().val();
        $.ajax({
            type: "POST",
            data: {
                mCollection: tdata,
                heatName: origname,
                updatedHeat: newname
            },
            url: '@Url.Action("ChangeHeatName","Home")',
            //url: "/Home/ChangeHeatName",
            success: function (result) { success(result); }
        });
    });

    function success(result) {

        $('#HeatNameDiv').dialog('close');
        //Ajax with problem
        $.ajax({
            type: "GET",
            url: '@Url.Action("ButtonsPartial","Home")',
            success: function (result2) { $("#ButtonsPartial").html(result2); }
        });
        $("#Partial_Chem_Analysis").html(result);
    }
});
</script>

<section>
<div id ="ButtonsPartial" title="ButtonsPartial">
    @Html.Action("ButtonsPartial", "Home")
</div>
<div id="Partial_Chem_Analysis" title="Partial_Chem_Analysis">
    @Html.Action("PartialChemAnalysis", "Home", Model)
</div>
</section>
<section> 
```

部分观点：

```
@using System.Data;
@using System.Dynamic;
@using System.Collections.Generic;
@using System.Linq;
@model TheManhattanProject.Models.ButtonsModel

<div id="Chem_Buttons">
<h2 class="alignleft">Chemistry Table</h2>
<p class="alignright">Heat Name<input type="text" name="heat_name" value="@Model.heatName" class="search-query" placeholder="Search" style ="width:100px" readonly="true"/>
<button class="btn btn-success" id="Change_Heat_Name" value="Change_Heat_Name" name="action:Change_Heat_Name" type="button"> Change Heat Name</button>
Grade<input type="text" name="heat_grade" value="@Model.grade" class="search-query" placeholder="Search" style="width:100px" readonly="true"/>
<button class="btn btn-success" id="ChangeHeatGrade" value="ChangeHeatGrade" name="action:Change_Grade" type="button">Change Grade</button>
Delete Record<input type="text" name="delete_record" value="@Model.heatName" class="search-query" placeholder="Search" style ="width:100px" readonly="true"/>
<button class="btn btn-success" id="DeleteRecord" value="DeleteRecord" name="action:Delete_Record" type="button">Delete Record</button>
  </p>
  <div style="clear: both;"></div>
  </div>
<div id="HeatNameDiv" title="Change Heat Name">
    @using (Html.BeginForm("ChangeHeatName", "Home", "POST"))
   {
    <section>
        Heat Name:<input type="text" name="heatName" value="@Model.heatName" style ="width:100px" readonly="true"/>
        //Value staying to what was entered not ""
        Change to:<input type="text" name="updatedHeat" value="" style="width: 100px" />
        <input type="button" id="ChangeHeatName" name="ChangeHeatName" value="Change" />
    </section>
}
</div>

<div id="HeatGradeDiv" title="Change Heat Grade">
@using (Html.BeginForm("ChangeGrade", "Home", "POST"))
{
    <section>
        Heat Grade:<input type="text" name="grade" value="@Model.grade" style ="width:100px" readonly="true"/>
        Change to:<input type="text" name="updatedGrade" value="" style="width: 100px" />
        <input type ="hidden" name="hiddenHeat" value ="@Model.heatName)" />
        <input type="button" id="ChangeGrade" name="ChangeGrade" value="Change" />
    </section>
}
</div>

<div id="DeleteRecordDiv" title="Delete Record">
@using (Html.BeginForm("DeleteRecord", "Home", "POST"))
{
<section>
    Heat Name:<input type="text" name="heatName" value="@Model.heatName" style ="width:100px" readonly="true"/>
    <input type="button" id="DeleteRecordBtn" name="DeleteRecordBtn" value="Delete" />
</section>
}
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:08:49.890

据我了解，在您进行编辑后，这段代码的响应给您带来了问题。

```
$.ajax({
    type: "GET",
    url: '@Url.Action("ButtonsPartial","Home")',
    success: function (result2) { $("#ButtonsPartial").html(result2); }
}); 
```

有几件事是

1.  您没有显示带有`ButtonsPartial`id 的容器。因此，如果它不存在，则无法显示结果。
2.  它使用 GET 并且可以被您的浏览器缓存。使用诸如 firebug 或开发人员工具之类的浏览器调试器，您可以查看对 ajax 调用的响应，并查看它是否真的从您的服务器获取新数据。

**编辑：**我现在看到你的`ButtonsPartial`div 了。所以＃1不是问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T17:50:31.917

您没有 Partial_Chem_Analysis 标签

# perl - Build.PL 不会在 git repo 中运行

> ID：16198318
> 
> 赞同：2
> 
> 时间：2013-04-24T17:19:53.177
> 
> 标签：perl, bioperl

我正在尝试运行 bioperl-live 包，并且我已经 git 克隆了以下 repo

```
git clone https://github.com/bioperl/bioperl-live.git 
```

并 cd 到 bio-perl live 的安装位置。然后我尝试运行：

```
perl Build.PL 
```

我回来了：

```
Checking prerequisites...
  build_requires:
    !  Test::Most is not installed 
```

所以我打开了一个 cpan shell，当我从 cpan 运行时：

```
cpan>install Test::Most 
```

并重复构建我得到同样的错误。有人介意克隆上面的 git repo（如果你想检查自己，可以在[https://github.com/bioperl/bioperl-live](https://github.com/bioperl/bioperl-live)找到），如果你遇到同样的问题，请告诉我。

请注意，其他包中的其他 Build.PL 文件不会发生这种情况 - 它运行良好。那个 git repo 中一定有一些损坏/丢失的东西。

谢谢

更新 - 当我运行 perl -wle 'use Test::Most'

我得到：

无法在 @INC 中找到 Test/Most.pm（@INC 包含：/home/arron/src/bioperl-live /etc/perl /usr/local/lib/perl/5.12.4 /usr/local/share/ perl/5.12.4 /usr/lib/perl5 /usr/share/perl5 /usr/lib/perl/5.12 /usr/share/perl/5.12 /usr/local/lib/site_perl .) at -e line 1\. BEGIN failed——编译在 -e line 1 处中止。`enter code here`

还将 cpan 配置为以 root 身份安装，然后安装 Test::Most 没有区别。这么大惊小怪！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:47:40.240

我怀疑这是 bioperl 的问题。您使用的命令更有可能`cpan`不是为`perl`您用于运行`Build.PL`. 所以 Test::Most 正在安装，但不是为您的 perl 安装的。您可以确认 Test::Most 是否安装了`perl -wle 'use Test::Most'`.

检查`which cpan`和`which perl`。它们应该具有相同的根路径。IE。`/usr/bin/cpan`和`/usr/bin/perl`。

一种可能性是您正在跑步`sudo cpan`，但只是`perl Build.PL`. `sudo`可能正在改变你的`PATH`，从而拿起一个不同`cpan`的和不同的`perl`。如果你正在做`sudo cpan`一定要做`sudo which cpan`。

`! print "$^X\n"`您可以通过在 cpan 提示符 下键入来检查正在安装的 perl cpan 。`!`告诉 cpan 执行任意 perl 代码。 `$^X`是一个保存 perl 路径的变量。这是一个为正确的 perl 安装 cpan 的示例。

```
$ cpan

cpan shell -- CPAN exploration and modules installation (v1.9800)
Enter 'h' for help.

cpan[1]> ! print "$^X\n"
/Users/schwern/perl5/perlbrew/perls/perl-5.16.2-threads/bin/perl
cpan[1]> q

$ which perl
/Users/schwern/perl5/perlbrew/perls/perl-5.16.2-threads/bin/perl 
```

此外，您应该避免以 root 身份运行 cpan ，而是[将 CPAN 配置为以 root 身份安装](http://www.preshweb.co.uk/2011/03/configuring-cpan-pm-to-use-sudo-to-install/)。您可能需`sudo chown yourusername -R ~/.cpan`要这样做，因为 root 可能拥有您的`.cpan`目录。

# java - 从 Oracle Db 切换到 MySQL。命名查询不再有效

> ID：16198320
> 
> 赞同：0
> 
> 时间：2013-04-24T17:20:07.750
> 
> 标签：java, mysql, hibernate

这适用于 Oracle，但我们被告知要切换到 MySQL。在更改驱动程序信息和其他相关设置以指向 MySQL 数据库后，我不再能够执行我的命名查询。这是实体中定义的最简单的一个：

> @NamedQuery(name="get_capability", query="select cb from Capability cb where cb.financial_Id = :fiId")

然后我有代码来执行查询，如下所示：

> 查询 = em.createNamedQuery("get_capability");
> 
> . . .
> 
> query.setParameter("fiId", fiId);
> 
> query.setMaxResults(1);
> 
> cabability = (Capability) query.getSingleResult();

最后一行抛出异常：

> 2013-04-24 10:46:00,677 WARN [org.hibernate.util.JDBCExceptionReporter] (http-127.0.0.1-8080-1) SQL 错误：1248，SQLState：42000
> 
> 2013-04-24 10:46:00,677 错误 [org.hibernate.util.JDBCExceptionReporter] (http-127.0.0.1-8080-1) 每个派生表都必须有自己的别名

生成的 SQL 记录在日志文件中，如下所示：

```
/* named HQL query get_capability */ select
    * 
from
    ( select
        capability0_.FINANCIAL_ID as FINANCIAL1_272_,
        capability0_.ACTIVE_CONNECTIONS as ACTIVE2_272_,
        capability0_.ALLOWED_CONNECTIONS as ALLOWED3_272_,
        capability0_.COMPLETE_DETAILS as COMPLETE4_272_,
        capability0_.FI_NAME as FI5_272_,
        capability0_.MESSAGE_FORMAT as MESSAGE6_272_,
        capability0_.PROVIDER_ID as PROVIDER7_272_,
        capability0_.STATUS as STATUS272_,
        capability0_.SUPPORTS_ACCOUNTS as SUPPORTS9_272_,
        capability0_.SUPPORTS_CUSTOMER as SUPPORTS10_272_,
        capability0_.SUPPORTS_IMAGE as SUPPORTS11_272_,
        capability0_.SUPPORTS_STATEMENTS as SUPPORTS12_272_,
        capability0_.SUPPORTS_TRANSACTIONS as SUPPORTS13_272_,
        capability0_.SUPPORTS_TRANSFER as SUPPORTS14_272_ 
    from
        INSTITUTION capability0_ 
    where
        capability0_.FINANCIAL_ID=? ) 
where
    rownum <= ? 
```

我已经阅读了此错误的含义，即每个派生表都需要一个别名，并且我可以编辑派生 SQL 以通过添加别名来使其工作。我的问题是这个。由于这是一个派生查询 (SQL)，我如何告诉 hibernate 添加别名，或者告诉 MySQL 不需要它？

休眠部分配置：

```
<property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect" />   
<property name="hibernate.connection.driver_class" value="com.mysql.jdbc.Driver"/> 
<property name="hibernate.showSql" value="true" /> 
<property name="hibernate.format_sql" value="true"/> 
<property name="hibernate.use_sql_comments" value="true"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T21:51:56.560

因为`ROWNUM`是 MySQL 中不支持的 Oracle 关键字（例如，请参阅[此问题](https://stackoverflow.com/q/8509996/422353)），我认为 Hibernate 在构建查询时仍然以 Oracle 为目标。

验证您是否已更改为相应的 Hibernate 方言。

*（为后代添加了答案）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-10T19:19:36.717

您在 FROM 中的子查询是“派生表”，您必须命名该派生表。

像这样的东西应该工作

```
select
    RES.field1, RES.field2 
from
    ( select
        capability0_.FINANCIAL_ID as FINANCIAL1_272_,
        capability0_.ACTIVE_CONNECTIONS as ACTIVE2_272_,
        capability0_.ALLOWED_CONNECTIONS as ALLOWED3_272_,
        capability0_.COMPLETE_DETAILS as COMPLETE4_272_,
        capability0_.FI_NAME as FI5_272_,
        capability0_.MESSAGE_FORMAT as MESSAGE6_272_,
        capability0_.PROVIDER_ID as PROVIDER7_272_,
        capability0_.STATUS as STATUS272_,
        capability0_.SUPPORTS_ACCOUNTS as SUPPORTS9_272_,
        capability0_.SUPPORTS_CUSTOMER as SUPPORTS10_272_,
        capability0_.SUPPORTS_IMAGE as SUPPORTS11_272_,
        capability0_.SUPPORTS_STATEMENTS as SUPPORTS12_272_,
        capability0_.SUPPORTS_TRANSACTIONS as SUPPORTS13_272_,
        capability0_.SUPPORTS_TRANSFER as SUPPORTS14_272_ 
    from
        INSTITUTION capability0_ 
    where
        capability0_.FINANCIAL_ID=? ) **RES**
where
    rownum <= ? 
```

# javascript - 嵌套的复杂指令没有被执行？

> ID：16198325
> 
> 赞同：0
> 
> 时间：2013-04-24T17:20:31.093
> 
> 标签：javascript, angularjs, nested, angularjs-directive

我尝试按照[John Lindquist的](http://egghead.io)[这个 youtube 教程](http://www.youtube.com/watch?v=UCn7CwS5fKg)，他通过将指令分类为组件和容器来解释指令。 所以我试着这样做，有一个容器（幻灯片）可以容纳不同的项目（文本区域、图像、视频......），但我的例子更具动态性。 他的例子是这样的：

```
<panel title="{{title}}">
  <element text="{{body}}"></element>
</panel> 
```

但我的更像是这样的：

```
<slide ng-repeat="slide in slides" slide-id="{{slide.id}}">
  <component
    element="component"
    type="{{component.type}}"
    ng-repeat="component in slide.components"
  >
  </component>
</slide> 
```

这并不是组件指令（取自[this SO question](https://stackoverflow.com/questions/15929386/angularjs-complex-directives-for-custom-tags)）的全部内容，它是一个指令，它将采用类型并将模板更改为正确的指令，例如，如果编辑器更改此：

```
<component
  element="component"
  type="{{component.type}}"
  ng-repeat="component in slide.components"
>
</component> 
```

对此：

```
<component
  element="component"
  editor
  ng-repeat="component in slide.components"
>
</component> 
```

然后编辑器指令将通过将最后一个模板更改为：

```
<div
  contenteditable="true"
  class="editor text-content"
>
  {{element.content.text}}
</div> 
```

但我不知道为什么它不工作组件指令根本没有被执行，我认为隔离范围有问题，也许我错过了一些理解。
[Plunker 中的工作示例](http://plnkr.co/edit/Elvytpz3SUOv0PrPk2Ph?p=preview)。

### 更新：

感谢[Marco Alves](https://stackoverflow.com/users/456406/marco-alves)向我指出缺少的限制，我不记得我最初是使用链接函数还是编译函数编写示例，但它应该使用编译函数，因为带有链接函数的解决方案可能看起来是工作，但打开控制台后出现一个奇怪的错误（至少对我来说很奇怪）：

> 错误：InvalidCharacterError：DOM 异常 5
> 错误：指定了无效或非法字符，例如在 XML 名称中。
> 在 x.extend.attr(jquery.min.js:5:4051)
> 在 Function.x.extend.access(jquery.min.js:4:5847)
> 在 x.fn.extend.attr (jquery.min.js :5:715) 在 nodeLinkFn (angular.js:4774:13)
> 的链接 (component-directive.js:7:11)在 angular.js:4914:15 在 nodeLinkFn (angular.js:4768:24) 在 angular .js:4913:13 at angular.js:9782:11 at WrappedCallback (angular.js:7303:59) angular.js:6173 (匿名函数) angular.js:6173 (匿名函数) angular.js:5219 nodeLinkFn angular .js:4777 （匿名函数） angular.js:4914
> 
> `<div contenteditable="true" class="ng-scope editor text-content ng-binding" element="component" type="" ng-repeat="component in slide.components" editor="">`
> 
> nodeLinkFn angular.js:4768
> (匿名函数) angular.js:4913
> (匿名函数) angular.js:9782
> WrappedCallback angular.js:7303
> WrappedCallback angular.js:7303
> (匿名函数) angular.js:7340
> Scope.$eval angular .js:8685
> Scope.$digest angular.js:8548
> Scope.$apply angular.js:8771
> done angular.js:10004
> completeRequest angular.js:10180
> xhr.onreadystatechange

检查来自[Marco Alves的](https://stackoverflow.com/users/456406/marco-alves)[答案](http://plnkr.co/edit/z9BDVTX5GtRqS0H3XJJr?p=preview)。 所以组件指令是这样的：

```
app.directive('component', ['$compile', function($compile){
  return {
    restrict: "E",
    compile:function(tElement, tAttrs){
      var el = tElement[0];
      if(el.getAttribute('type')){
        el.removeAttribute('type');
        el.setAttribute(tAttrs.type,'');
        return function(scope){
          $compile(el)(scope);
        };
      }
    }
  };
}]); 
```

这样做的问题是组件指令仍然没有被编译，即使它在这个[plunker 示例](http://plnkr.co/edit/jbdAEGcHHmY5aZJKTuGs?p=preview)中工作正常。
任何帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T21:01:37.830

对于初学者，您忘记将组件指令上的限制属性设置为 E...这就是它没有被编译的原因。

编辑 1：

得到它来呈现组件指令，但仍然有其他错误。

看看：[http ://plnkr.co/edit/ENkWIVUnHubxydWgB4pU?p=preview](http://plnkr.co/edit/ENkWIVUnHubxydWgB4pU?p=preview)

编辑2：

我想我解决了。[http://plnkr.co/edit/ENkWIVUnHubxydWgB4pU?p=preview](http://plnkr.co/edit/ENkWIVUnHubxydWgB4pU?p=preview)

我变了：

*   移除了组件指令定义中的“E”属性
*   在 componente 指令链接器中使用 removeAttr 来删除类型和组件属性
*   更改了 index.html 以使用组件指令作为属性而不是元素

# gruntjs - 在 Grunt 退出时杀死生成的进程

> ID：16198327
> 
> 赞同：17
> 
> 时间：2013-04-24T17:20:35.010
> 
> 标签：gruntjs

我目前正在尝试执行几个需要将任务生成到子进程中的步骤。例如：

1.  观看文件
2.  启动我的静态站点生成器的预览服务器

我可以轻松地使用诸如[grunt-concurrent](https://github.com/sindresorhus/grunt-concurrent)之类的任务来同时运行这两个任务。但是，当我退出 grunt 时，子进程（在这种情况下 - 我正在使用[grunt-shell](https://github.com/sindresorhus/grunt-shell)运行的静态站点生成器）继续运行。我想让这些任务同时运行 - 但也让它们在 grunt 退出时被杀死。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T13:02:33.007

不确定这如何与 grunt-shell 一起使用。但是如果你设置了一个自定义的 grunt 任务来运行你的服务器，你可以尝试这样的事情：

```
 var spawn = require('child_process').spawn;
  var server = spawn('myserver', ['--foo']);
  process.on('exit', function() {
     grunt.log.writeln('killing myserver...');
     server.kill();
     grunt.log.writeln('killed myserver');
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T14:52:02.287

是否有某些原因您不使用 grunt-contrib-connect 在项目根目录中启动服务器？

如果可能的话，不要使用 grunt-shell，并且当你的 grunt 进程退出时服务器将自动关闭

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-26T20:54:50.540

也许这就是创建[grunt-exit](https://www.npmjs.org/package/grunt-exit)的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-07T23:25:34.020

显然，`grunt-shell`不处理`process`退出事件：[https ://github.com/sindresorhus/grunt-shell/blob/master/tasks/shell.js](https://github.com/sindresorhus/grunt-shell/blob/master/tasks/shell.js)

因此，我怀疑您的 grunt 进程正在退出，并且`grunt-shell`从未警告它的子进程父进程正在停止。

例如，`grunt-concurrent`确实杀死了它的子进程，正如我们在这里看到的：

```
process.on('exit', function () {
    cpCache.forEach(function (el) {
        el.kill();
    });
}); 
```

来源：[https ://github.com/sindresorhus/grunt-concurrent/blob/master/tasks/concurrent.js#L55](https://github.com/sindresorhus/grunt-concurrent/blob/master/tasks/concurrent.js#L55)

所以，使用`grunt-shell`对你不起作用。

一种解决方案是`wintersmith`在您的 Gruntfile 中要求并在自定义任务中以编程方式运行它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-17T18:45:49.850

[请参阅我在https://stackoverflow.com/a/32057486/626810](https://stackoverflow.com/a/32057486/626810)上的回答。

当您有一个明确需要调用的脚本（例如：当该进程被守护时）时，这很有用。

# html - HTML5 和 CSS 布局

> ID：16198331
> 
> 赞同：-2
> 
> 时间：2013-04-24T17:20:53.230
> 
> 标签：html, css

我已经对下面的布局进行了编码，但是在测试时，“登录或注册”链接没有定位到页面的右侧。任何帮助表示赞赏。

**HTML**

```
<header>
   <h1>Heading</h1>
   <p>A clean, minimal, grid-based layout focusing attention on your work.</p
   <a href="/">Login or Signup</a>
</header> 
```

**CSS**

```
body {
  font-family: 'open sans';
  color: #333;
}

header {
  padding: 20px 20px 20px 50px;
}

a {
  color: #333;
  text-decoration: none;
}

h1, h2 {
  font-weight: 300;
} 
```

**期望的结果**

![http://oi38.tinypic.com/161nqrd.jpg](https://i.stack.imgur.com/m2LxP.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T17:24:56.463

关闭`<p>`标签

```
<header>
<h1>Heading</h1>
<p>A clean, minimal, grid-based layout focusing attention on your work.</p>
<div id="login"><a href="/">Login or Signup</a><div>
</header> 
```

在链接上放置一个 div 以使其正确浮动。是一种选择。

```
#login{
float:right;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T17:36:15.480

**HTML**

```
<header>
   <a href="/">Login or Signup</a>
   <h1>Heading</h1>
   <p>A clean, minimal, grid-based layout focusing attention on your work.</p>
</header> 
```

**CSS**

```
body {
  font-family: 'open sans';
  color: #333;
}

header {
  padding: 20px 20px 20px 50px;
}

header a {
  color: #333;
  text-decoration: none;
  float: right;
  padding-top: 30px;
}

h1, h2 {
  font-weight: 300;
} 
```

**[演示](http://jsfiddle.net/fjr5K/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T17:24:27.260

您可以通过使用浮动来实现此布局，并将页面的不同侧面包装在`div`标签中，这些标签基本上充当容器。

HTML：

```
<header>
<div id="title-desc">
   <h1>Heading</h1>
   <p>A clean, minimal, grid-based layout focusing attention on your work.</p>
</div>
<div id="login-box">
   <a href="/">Login or Signup</a>
</div>
</header> 
```

CSS：

```
#title-desc{
float: left;
}

#login-box{
float: right;
} 
```

# [工作示例](http://jsfiddle.net/NcNat/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T17:29:03.313

我会将您的*登录名/注册名*放入它自己的 div 或 span 或其他内容中。然后在 CSS 中指定你想要的位置。

# ruby - 如果值超出范围，Ruby 优雅地返回最小值/最大值

> ID：16198332
> 
> 赞同：3
> 
> 时间：2013-04-24T17:21:01.660
> 
> 标签：ruby

所以我正在编写一个程序来模拟一个过程并需要计算费用。逻辑是，如果费用金额小于最小值，则使用最小值，如果费用金额大于最大值，则使用最大值。

我当然可以在多行上实现这一点，但我很想知道在 Ruby 中是否有更优雅的方法来做到这一点。

```
fee_amount = <whatever logic I need>
if fee_amount < min return min
if fee_amount > max return max
return fee_amount 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-24T17:27:31.067

如果您正在寻找不那么丑陋（或至少短）的单线：

```
[min,fee_amount,max].sort[1] 
```

绝对不是 Rubyish，因为乍一看并不直观。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-24T17:58:55.077

如果只是一次，我会推荐Shawn Balesstracci的答案，这是最美丽的。

或者，以下是我个人库中的一些方法：

```
module Comparable
  def at_least other; self < other ? other : self end
  def at_most other; self > other ? other : self end
end 
```

我这样使用它：

```
fee_amount = <whatever logic I need>.at_least(min).at_most(max) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-01-09T14:50:29.147

Ruby 2.4 添加的[Comparable#clamp](http://ruby-doc.org/core-2.6.0/Comparable.html#method-i-clamp)正是这样做的

```
fee_amount.clamp(min, max) 
```

[https://blog.bigbinary.com/2016/12/13/ruby-2-4-adds-comparable-clamp-method.html](https://blog.bigbinary.com/2016/12/13/ruby-2-4-adds-comparable-clamp-method.html)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-24T17:22:57.630

使用后缀条件，这将是非常红宝石风格。

```
return min if fee_amount < min
return max if fee_amount > max
fee_amount 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-24T19:59:24.430

这是一个简短的单行：

```
 [[min, fee_amount].max, max].min 
```

我的想法是，您应该将其包装在一个具有描述性名称的方法中：

```
 def limit_by_range(value, min, max)
   [[min, value].max, max].min
 end 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-25T09:20:20.870

```
n = (n <= max || n >= min) ? n : (n < min ? min : max) 
```

有点通用

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-24T17:22:44.970

没有一种*优雅*的方式可以在一行中做到这一点。通过将这么多逻辑塞进一行代码，你会变*得不那么优雅。*

您现有的代码可以被大量清理：

```
fee_amount = <logic>
fee_amount = min if fee_amount < min
fee_amount = max if fee_amount > max 
```

与这个非常丑陋的单线...

```
fee_amount = if fee_amount < min then min elsif fee_amount > max then max else fee_amount end 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-03-31T03:53:14.160

```
# stabby lambda function:
map = ->(val, min, max) { [min, val, max].sort[1] }

# call stabby function:
map.call(2.5, 1, 3)
=> 2.5
# or shorter:
map[2.5, 1, 3]
=> 2.5 
```

# debugging - 尝试在 Visual Studio 2012 中调试时出错

> ID：16198347
> 
> 赞同：1
> 
> 时间：2013-04-24T17:22:00.140
> 
> 标签：debugging, visual-studio-2012

当我尝试运行“开始调试”时，出现错误：

“无法启动已配置的 Visual Studio 开发 Web 服务器。无法开始调试。不支持操作。未知错误：0x80040d10。[OK]”

单击“确定”。

我再次运行“开始调试”...但现在打开“ASP.NET 开发服务器 - 端口 1809”但现在我收到错误：

“无法附加到应用程序'WebDev.WebServer20.EXE'（PID：6592）使用'GUSTAVO-PC'。不支持操作。未知错误：0x80040d10。仍然要继续吗？[是|否]

有人有类似的问题吗？

在 Windows 7 x64 上运行。以管理员身份运行 Visual Studio 2012 Professional 版本 11.0.60315.01 Update 2。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-05-30T18:43:21.210

根据此解决方案，我在应用 URL 重写规则将流量从 http 重定向到 https 后遇到了这个问题：

[web.config 中的 Https 重定向](https://stackoverflow.com/questions/27961050/iis-8-5-url-rewrite-force-redirect-http-https-for-non-www)

这会导致错误，因为我的解决方案配置了带有启动项目 url 的本地 iis。

在这种情况下似乎发生的是项目 url 无法在 iis 7.5 中解析，因为 https 绑定不在主机名上，而是在空白主机名上。

[![iis 绑定配置](https://i.stack.imgur.com/4Q6WO.png)](https://i.stack.imgur.com/4Q6WO.png)

诊断此问题的另一种方法是，如果您进入项目属性、Web 选项卡，并尝试将项目 url 更改为 https 而不是 http。您将收到此消息，就好像您在 iis 中的设置有误（但实际上它正在工作并且 iss 正在为链接提供服务）。

> 为 Web 项目 xxxx 指定的本地 IIS URL [https://xxxx.com/](https://xxxx.com/)尚未配置。要保留这些设置，您需要配置虚拟目录。您现在要创建虚拟目录吗？

我最终做的是排除要在本地开发 url 中应用的 https 重定向规则。

```
<rewrite>
  <rules>
    <rule name="Redirect to HTTPS" stopProcessing="true">
      <match url="(.*)" />
      <conditions logicalGrouping="MatchAll">
        <add input="{HTTPS}" pattern="^OFF$" />
        <add input="{HTTP_HOST}" pattern="^local.development.com" negate="true" />
      </conditions>
      <action type="Redirect" url="https://{HTTP_HOST}{REQUEST_URI}" redirectType="SeeOther" />
    </rule>
  </rules>
</rewrite> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T17:35:26.610

听起来您的系统无法将进程映像加载到内存中。这可能是由于加载链中某处的注册表文件损坏。我怀疑这是可执行文件的问题。我曾经遇到过类似的问题，我只是通过运行修复安装来解决 - 从此不用担心:)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-11-19T18:44:57.697

当我尝试更改语言时，我也遇到了这个问题。

当我输入默认语言时，错误消失了。

# jakarta-ee - 为什么 Find All 方法选择错误的字段

> ID：16198348
> 
> 赞同：-1
> 
> 时间：2013-04-24T17:22:19.440
> 
> 标签：jakarta-ee, playframework, ebean

```
public class Userr extends Model{
    @Id
    public Long id;
    @OneToMany
    List<Badge> badges;
}

public class Badge extends Model{
    @Id
    public Long id;
    @ManyToOne
    Userr user;
} 
```

这些是我的 2 个模型，这是生成的错误：

> **[RuntimeException** : `java.lang.IllegalArgumentException`: 查询抛出`SQLException`:Column `"T1.USERR_ID"`not found; SQL 语句：`select t0.id c0 , t1.id_ c1, t1.name_ c2, t1.desc_ c3, t1.img_url_ c4, t1.effect_ c5, t1.user_id c6 from userr t0 left outer join badge t1 on t1.userr_id = t0.id where t0.id = ? order by t0.id`[42122-168] 绑定值：[ `null`] 查询为：（`select t0.id c0 , t1.id_ c1, t1.name_ c2, t1.desc_ c3, t1.img_url_ c4, t1.effect_ c5, t1.user_id c6 from userr t0 left outer join badge t1 on t1.userr_id = t0.id where t0.id = ? order by t0.id`通过引用链`com.avaje.ebean.common.BeanList[0]->models.Userr["created_badges"]`：）**]**

我想知道为什么它使用而不是 在我的模型文件中调用字段来翻译`findAll`查询。`userr_id``user_id``user_id`

我尝试更改`user`为`userr`并且它起作用了，因为它将它翻译成`<classname>_id`

这是一个错误吗？还是我用错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T00:29:52.517

这不是BUG！这是 DDL 生成模式的默认行为。我将向您解释常见的可能情况：

### `1st case`：您之前没有在数据库上创建表

当您第一次构建应用程序时不使用现有表，我认为您之前遇到的问题不会发生（只要您使用默认配置值并将应用程序设置为 DEV 模式）。直截了当，假设您有 2 个像以前一样的模型：

```
@Entity
public class Userr extends Model {
    @Id
    public Long id;
    public String realName;
    @OneToMany
    List<Badge> badges;
}

@Entity
public class Badge extends Model {
    @Id
    public Long id;
    @ManyToOne
    Userr user;
} 
```

在您运行应用程序时，简单的框架应该告诉 DDL 生成模式查看您连接的数据库并查找是否存在名为`userr`and的表`badge`。因为您之前没有创建过这两个表，所以框架会在您的数据库上自动生成这两个表。根据您的模型，框架将使用类似于 (PostgreSQL script) 的脚本生成您的表：

```
-- the java class name is 'Userr' generated as 'userr'
CREATE TABLE userr {
    -- long on java generated as bigint
    id        bigint,
    -- 'realName' on java generated as 'realname' and string on java generated as varchar whose length 255 
    realname  character varying(255),
    -- one to many 'badges' field is not generated
    CONSTRAINT pk_userr PRIMARY KEY (id), -- id as primary key
}
-- the java class name is 'Badge' generated as 'badge'
CREATE TABLE badge {
    id        bigint,
    -- 'Userr' Object with MayToOne relation generated as the foreign key to the id on 'userr' table
    userr_id  bigint,
    CONSTRAINT pk_badge PRIMARY KEY (id),                      
    CONSTRAINT fk_badge_userr FOREIGN KEY (userr_id)
       REFERENCES userr (id) MATCH SIMPLE
       ON UPDATE NO ACTION ON DELETE NO ACTION,

} 
```

### `2nd case`：您在数据库上有现有表

假设您之前有 2 个名称为`user_account`和的表`badge`。该`user_account`表如下所示：

```
CREATE TABLE user_account {
    id        bigint,
    real_name character varying(100),
    CONSTRAINT pk_userr PRIMARY KEY (id),
}
CREATE TABLE badge {
    id        bigint,
    user_id   bigint,
    CONSTRAINT pk_badge PRIMARY KEY (id),                      
    CONSTRAINT fk_badge_user_account FOREIGN KEY (user_id)
       REFERENCES user_account (id) MATCH SIMPLE
       ON UPDATE NO ACTION ON DELETE NO ACTION,
} 
```

您可以使用以下代码正确使用**以前的模型**（*经过一些修改*）来处理当前表：

```
@javax.persistence.Entity
// define this model as table named 'user_account'
@javax.persistence.Table(name = "user_account")
public class Userr extends Model {
    @Id
    public Long id;
    // define this field as column named 'real_name' whose length is 100
    @javax.persistence.Column(name = "real_name", length = 100)
    public String realName;
    @OneToMany
    List<Badge> badges;
}

@javax.persistence.Entity
public class Badge extends Model {
    @Id
    public Long id;
    @ManyToOne
    // define this field as column named 'user_id' and 
    // this act as reference to model 'Userr' using field named 'id' on it
    @javax.persistence.JoinColumn(name = "user_id", referencedColumnName = "id")
    Userr user;
} 
```

希望这可以帮助您更好地理解 DDL 生成模式.. :)

# java - Dojo xhrPost 内容加密 Java 控制器 Spring

> ID：16198349
> 
> 赞同：0
> 
> 时间：2013-04-24T17:22:27.303
> 
> 标签：java, javascript, json, spring-mvc, dojo

我正在使用 dojo xhrPost。我有一个 JS 对象，我将其转换为 json，然后使用 xhrPost 发送到 Java 控制器。如果我 console.log 内容它是有效的 JSON。Controller 类方法参数值看起来像是加密的什么的。

（如果有一些语法错误，道歉，我在没有我的 IDE 的情况下写这个但是帖子到达控制器等，没有控制台错误，并且 js 文件中生成的 json 是有效的。问题是：什么可以正在修改我的 json 路由到控制器？）

..来自我的js文件

```
var formValues = dijit.byId('form').get('value');
var obj = {};
obj.attr1 = formValues.name;
obj.attr2 = formValues.address;

var objJson = dojo.fromJson(obj);
consol.log(objJson);

var xhrPost = {
      handleAs: "json",
      url : urlAddsVariable, 
      content : { objJson: objJson},
      load: function(response){
        console.error(reponse);
      },
      error: function(error){
        console.error(error);
      }
} 
```

console.log >>> {"attr1" : "name", "attr2" = "address value"}

.. java 控制器

```
@RequestMapping("/add.json")
@ResponseBody
public void add(@RequestParam(objJSon) String json) {

// The objJson string has changed.  The attribute names and values are visible but they are wrapped in characters e.g. S%%%%**attr1**DFSS%%%%**name**FSS  etc.
} 
```

任何指针？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:36:43.937

问题是您发送 json，但该方法使用 POST/request 数据。如果您删除 handleAs:，它将正常工作

```
var xhrPost = {
   url : urlAddsVariable, 
   content : { objJson: objJson},
   load: function(response){
     console.error(reponse);
   },
   error: function(error){
     console.error(error);
   }
 } 
```

# curl - 从 GitHub 拉取请求中获取评论列表

> ID：16198351
> 
> 赞同：10
> 
> 时间：2013-04-24T17:22:29.313
> 
> 标签：curl, github, github-api

根据[http://developer.github.com/v3/pulls/comments/#list-comments-on-a-pull-request](http://developer.github.com/v3/pulls/comments/#list-comments-on-a-pull-request)

我应该能够通过发出以下 curl 语句来获得评论列表，但是，它返回空，好像没有评论一样，任何想法为什么？或者我怎样才能让它工作？

```
curl "https://api.github.com/repos/37signals/sub/pulls/37/comments" -v 
```

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-24T19:39:33.980

[请注意Pull requests API 文档](http://developer.github.com/v3/pulls/)顶部附近的文本（在 TOC 下）：

> 拉取请求 API 允许您列出、查看、编辑、创建甚至合并拉取请求。可以通过问题评论 API 管理对拉取请求的评论。

[因此，您当前使用](http://developer.github.com/v3/pulls/comments/)的 API 端点用于拉取请求审查评论，而不是普通的拉取请求评论：

> 拉取请求评论评论是对统一差异的一部分的评论。这些与提交评论（直接应用于提交，在拉取请求视图之外）和问题评论（不引用统一差异的一部分）是分开的。

由于您引用的拉取请求没有任何评论评论，因此您得到了正确的结果（一个空列表）。但是，正如我上面提到的，您应该点击的 API 端点是问题评论的端点（只需使用相同的拉取请求 ID，因为它等于问题 ID）：

```
curl "https://api.github.com/repos/37signals/sub/issues/37/comments" -v 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-09T15:42:44.507

请注意

```
GET /repos/{owner}/{repo}/issues/{issue_number}/comments
GET /repos/{owner}/{repo}/pulls/{issue_number}/comments 
```

不要返回相同的评论！例如，对于[Facebook 的 react](https://github.com/facebook/react)中的 pull request 22878，我们得到问题评论 ID `[988239459, 988246552, 988274918]`（均以 9 开​​头）和 pull request 评论`[764333623, 764334882]`（以 7 开头）。

如果您想获得来自 GitHub 的所有评论，则需要查询这两个 API 端点。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2020-03-20T15:41:28.490

您可以单击评论标题中的日期以获取评论的 URL。它会在地址栏中为您提供特定的评论 URL。您可以复制链接并与您的同事共享以解决这些问题。

享受..！！

# java - JPA NamedQuery 返回空的 ResultList

> ID：16198352
> 
> 赞同：1
> 
> 时间：2013-04-24T17:22:30.767
> 
> 标签：java, jpa, eclipselink, ibm-midrange

我正在使用 Netbeans 7.3、Glassfish 3.1.2.2 开发一个使用 EclipseLink JPA 2.0 连接到 AS400 的应用程序。所有查询都正常工作，直到我到达特定的 NamedQuery：

```
SELECT u FROM Table1 u WHERE u.field1 IN (:field1) 
AND SUBSTRING(u.field2,3,1) IN (:hack) AND 
SUBSTRING(u.field3,2,2) IN (:field3) ORDER BY u.field1 
```

参数设置如下：

```
Query query = getEntityManager().createNamedQuery("Table1.findAllWithRestrictions").setParameter("hack", "'S','C'").setParameter("field1", start).setParameter("field3", finish); 
```

查询执行但返回一个空列表。打开日志记录会给我生成的 SQL：

```
SELECT FIELD1, FIELD2, FIELD3, FIELD4, FIELD5, FIELD6 
FROM ABC.DATAB.TABLE1 WHERE (((FIELD1 IN ('00')) AND 
(SUBSTR(FIELD2, 3, 1) IN ('S','C'))) AND 
(SUBSTR(FIELD3, 2, 2) IN ('0S'))) ORDER BY FIELD1 ASC 
```

针对同一数据库连接运行此生成的 SQL 会返回几行。任何地方的日志中都没有抛出异常，只有一个空的 ResultList。我可能做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:52:01.883

出于性能原因，JPA 的一些实现使用缓存（例如 EclipseLink）。如果您的数据库中的数据与您在正在运行的应用程序上看到的不一致，我会尝试重新启动。此外，您可能希望了解一些刷新缓存或禁用缓存的方法。

示例：[Eclipselink JPA 缓存](http://wiki.eclipse.org/EclipseLink/Examples/JPA/Caching#How_to_refresh_the_cache)

# javascript - 有什么方法可以根据参数修改 Jasmine 间谍？

> ID：16198353
> 
> 赞同：187
> 
> 时间：2013-04-24T17:22:35.580
> 
> 标签：javascript, unit-testing, jasmine

我有一个要测试的函数，它使用不同的参数两次调用外部 API 方法。我想用 Jasmine 间谍模拟这个外部 API，并根据参数返回不同的东西。茉莉花有没有办法做到这一点？我能想到的最好的方法是使用 andCallFake 进行破解：

```
var functionToTest = function() {
  var userName = externalApi.get('abc');
  var userId = externalApi.get('123');
};

describe('my fn', function() {
  it('gets user name and ID', function() {
    spyOn(externalApi, 'get').andCallFake(function(myParam) {
      if (myParam == 'abc') {
        return 'Jane';
      } else if (myParam == '123') {
        return 98765;
      }
    });
  });
}); 
```

* * *

## 回答 #1

> 赞同：275
> 
> 时间：2013-04-25T06:45:52.397

In Jasmine versions 3.0 and above you can use `withArgs`

```
describe('my fn', function() {
  it('gets user name and ID', function() {
    spyOn(externalApi, 'get')
      .withArgs('abc').and.returnValue('Jane')
      .withArgs('123').and.returnValue(98765);
  });
}); 
```

For Jasmine versions earlier than 3.0 `callFake` is the right way to go, but you can simplify it using an object to hold the return values

```
describe('my fn', function() {
  var params = {
    'abc': 'Jane', 
    '123': 98765
  }

  it('gets user name and ID', function() {
    spyOn(externalApi, 'get').and.callFake(function(myParam) {
     return params[myParam]
    });
  });
}); 
```

Depending on the version of Jasmine, the syntax is slightly different:

*   1.3.1: `.andCallFake(fn)`
*   2.0: `.and.callFake(fn)`

**Resources:**

*   [withArgs docs](https://jasmine.github.io/api/3.0/Spy.html#withArgs)
*   [callFake docs](http://jasmine.github.io/edge/introduction.html#section-Spies:_%3Ccode%3Eand.callFake%3C/code%3E)
*   [andCallFake vs and.callFake](https://stackoverflow.com/questions/22041745/jasmine-spyonobj-method-andcallfake-or-and-callfake)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-11-15T06:17:33.567

你也可以`$provide`用来创建一个间谍。并模拟使用`and.returnValues`而不是`and.returnValue`传入参数化数据。

> **根据 Jasmine 文档：**通过将间谍与 链接起来`and.returnValues`，对函数的所有调用将按顺序返回特定值，直到它到达返回值列表的末尾，此时它将为所有后续调用返回 undefined。

```
describe('my fn', () => {
    beforeEach(module($provide => {
        $provide.value('externalApi', jasmine.createSpyObj('externalApi', ['get']));
    }));

        it('get userName and Id', inject((externalApi) => {
            // Given
            externalApi.get.and.returnValues('abc','123');

            // When
            //insert your condition

            // Then
            // insert the expectation                
        }));
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-04T19:02:09.573

在我的例子中，我有一个正在测试的组件，在它的构造函数中，有一个配置服务，它带有一个名为**getAppConfigValue**的方法，它被调用了两次，每次都使用不同的参数：

```
constructor(private configSvc: ConfigService) {
  this.configSvc.getAppConfigValue('a_string');
  this.configSvc.getAppConfigValue('another_string');
} 
```

在我的规范中，我在 TestBed 中提供了 ConfigService，如下所示：

```
{
  provide: ConfigService,
  useValue: {
    getAppConfigValue: (key: any): any {
      if (key === 'a_string) {
        return 'a_value';
      } else if (key === 'another_string') {
        return 'another_value';
      }
    }
  } as ConfigService
} 
```

因此，只要**getAppConfigValue**的签名与实际 ConfigService 中指定的相同，就可以修改该函数内部所做的事情。

# visual-studio-2012 - 在 rdlc 报告中插入一个简单的分页符

> ID：16198358
> 
> 赞同：7
> 
> 时间：2013-04-24T17:22:47.753
> 
> 标签：visual-studio-2012, report, rdlc

这是一个非常简单的事情，但我一直无法找到任何东西。我有一份报告，最后，我有一个“总计”行。我只是想在这一行之前插入一个分页符，以便它打印在单独的页面上。我该怎么做呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-12-03T15:17:07.987

这是[有关如何在报表中设置分页符的 MSDN 页面](http://msdn.microsoft.com/en-us/library/ms251733%28v=vs.90%29.aspx)。

该页面指出：

> 项目分页符仅适用于报表项目矩形、表格、矩阵、列表和图表。

所以我认为将行总控件放在它自己的 Rectangle 上，该矩形是在 Tablix 之后添加的，但不与 Tablix 重叠。*然后在 Rectangle 属性中指定它之前*应该有一个分页符。

我还发现这个链接解释了如何在特定行之后强制分页，如果您的总数是 Tablix 的一部分，这可能会有所帮助：

[rdlc 报告中特定行后的分页符](http://yeasir007.blogspot.com/2012/10/page-break-after-specific-rows-in-rdlc.html)

# java - 如何从字符串创建 Java 内置对象

> ID：16198363
> 
> 赞同：2
> 
> 时间：2013-04-24T17:23:05.757
> 
> 标签：java, reflection

假设我想从字符串创建一个 Java 对象。

```
Object obj = Class.forName("com.my.object.MyObject").newInstance(); 
```

我能够创建 MyObject。我的问题是如何从字符串创建 Java 内置对象，例如 Long 或 String。我需要这样做，因为我只能以文本格式知道运行时对象的类型。

我这样做了，但没有奏效。

```
Object obj = Class.forName("java.lang.Long").newInstance(); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-24T17:29:33.130

`java.lang.Long`没有无参数构造函数，所以你不能这样调用`newInstance`。相反，您必须使用正确的参数查找构造函数，构建参数数组，然后调用构造函数。

```
Constructor constr = Class.forName("java.lang.Long").getConstructor(String.class);
Object myLong = constr.invoke("5"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T17:30:36.517

阅读文档`newInstance()`，它会告诉你它调用了一个类的无参数构造函数。如果内置（或任何其他）类具有这样的构造函数，您可以同样创建它。否则，您必须使用 调用特定的构造函数[`Class.getConstructor()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getConstructor%28java.lang.Class...%29)，并传递适当的参数。[`new Long(String)`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getConstructor%28java.lang.Class...%29)因此，例如调用构造函数：

```
Class.forName("java.lang.Long")
     .getConstructor(String.class)
     .newInstance("12345"); 
```

# android - AChartEngine 条形图中的笔划

> ID：16198367
> 
> 赞同：1
> 
> 时间：2013-04-24T17:23:19.567
> 
> 标签：android, achartengine, stroke

如何在 AChartEngine 条形图中画笔画？

这对我不起作用：

```
mCurrentSeries = new XYSeries("Sample Data");

mDataset.addSeries(mCurrentSeries);

mCurrentRenderer = new XYSeriesRenderer();

mCurrentRenderer.setStroke(BasicStroke.SOLID); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:29:41.913

这在 AChartEngine 中尚不支持。有关更多说明，请参阅[此内容。](https://stackoverflow.com/questions/16137039/achartengine-barchart-using-basicstroke-to-add-a-solid-outline)

# c# - 使用副本集时在c#mongo驱动程序中连接到哪个节点

> ID：16198369
> 
> 赞同：1
> 
> 时间：2013-04-24T17:23:28.707
> 
> 标签：c#, mongodb, driver

我有一个连接字符串设置如下：

```
mongodb://54.225.?.?,54.214.?.?, 54.214.?.?/rs0?connect=replicaset;replicaSet=rs0;slaveOk=true;readPreference=nearest 
```

我已将 readPreference 设置为最近。在测试和生产过程中，有时我们希望保证并检查我们是否正在与离客户端最近的某些节点进行通信。我知道这是自动处理的，但是我可以通过驱动程序使用什么方法来找出我连接到特定数据库调用的实际副本集成员。

例如，我有三个数据中心，我希望我们的应用程序使用离它最近的一个，但我想确保我们连接到它，因为应用程序需要最大的性能和减少的延迟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T04:59:03.187

您没有连接到单个服务器 - 您连接到整个副本集。因此，由于驱动程序保持对集合中所有成员的连接打开，它知道将写入发送到主节点，并且知道何时可以将某些特殊读取发送到辅助节点（除非它是隐藏的辅助节点）。

如果你想保证读取到某个数据中心，那么你应该使用“标签”而不是“最近的”——当你将标签与副本集的成员相关联时，你可以指定你希望某些读取只去带有特定标签的成员。

请注意，由于驱动程序通过 ping 时间确定“最近”，因此您可能会通过强制其转到物理上最近的数据中心来破坏最佳性能，而该数据中心目前可能比更远的数据中心经历更长的延迟。

# javascript - 何时使用 __proto__ 以及何时使用原型

> ID：16198371
> 
> 赞同：1
> 
> 时间：2013-04-24T17:23:30.630
> 
> 标签：javascript

`__proto__`总而言之，我总是被对象的和属性弄糊涂`prototype`，尤其是在原型继承链中，假设有一个名为 的对象`test`，代码如下。

```
test.add();//try to call a method name add. 
```

在我的理解中，我画了一个图表来演示搜索的流程。但我不确定它是否正确。请帮助审查它。谢谢。

![在此处输入图像描述](https://i.stack.imgur.com/IlC5N.png)

**根据 Minko Gechev 的回答对其进行了更正。**

![在此处输入图像描述](https://i.stack.imgur.com/dspxM.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T17:24:36.040

只有函数有`prototype`属性，但任何对象都有`__proto__`属性。

通常，`__proto__`最好使用类似`Object.create`.

这是一个例子：

```
function Person() {
}
var proto = { bar: 'baz' };
Person.prototype = proto; 
```

这样，您使用构造函数创建的任何对象都`Person`将具有`__proto__`引用的属性`proto`

作为结论，我们可以说：

原型属性仅用于构造函数，它设置`__proto__`将使用此构造函数创建的所有对象的属性。当解释器在寻找给定对象的属性时，`foo`它首先使用该对象，然后再使用该对象`foo`，`foo.__proto__`依此`foo.__proto__.__proto__`类推，无论是否找到该属性。

# c - 将 uint** 转换为 uint

> ID：16198372
> 
> 赞同：-1
> 
> 时间：2013-04-24T17:23:34.263
> 
> 标签：c, double-pointer

我有以下代码

```
unsigned int headerbytes = 0U;
    headerbytes = (unsigned int*)strtoull(packet_space->header, NULL, 0);

    packetHeader header = deconstructPacketHeader((&headerbytes)); 
```

packet_space 是一个 char[]，基本上它是一个 4 字节的 char 数组，我想将其转换为无符号整数。deconstructPacketHeader() 采用无符号整数，但 stroutll （使用我的演员表）返回一个双指针。基本上，我如何获得 uint 的实际值（取消引用两次），以便我可以通过 deconstructPacketHeader() 传递它？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:28:55.973

可能你想的太复杂了。

尝试

```
unsigned long long headerbytes = 0ULL;
headerbytes = strtoull(packet_space->header, NULL, 0);
packetHeader header = deconstructPacketHeader(headerbytes); 
```

# javascript - Javascript比较变量

> ID：16198374
> 
> 赞同：-1
> 
> 时间：2013-04-24T17:23:40.130
> 
> 标签：javascript

嘿，我正在制作简单的游戏并完成一些功能，但我不确定我在这里做错了什么。它总是提醒“不正确”我已经制作了一个文本框和一个按钮。当按下按钮时，它会调用 getAnswer() 并将变量与文本框中的任何内容进行比较。我觉得我在分配变量 textBox 时做错了。但不确定。

```
var currentWord = "hi"

function getAnswer(){
var textBox = document.getElementById('answer_box');
if (textBox == currentWord){
alert("Correct!");
}else{
alert("Incorrect!");
} 
```

按钮和文本框代码

```
<input type="text" id="answer_box"/>
<input type="button" value="Submit" onclick="getAnswer();" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T17:25:45.573

您需要比较文本框的值而不是元素本身：

```
textBox == currentWord 
```

应该

```
textBox.value == currentWord 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T17:25:08.767

您需要将文本框的**值**与变量进行比较，而不是文本框本身！

`var textBox = document.getElementById('answer_box').value;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T17:24:51.857

您没有从文本框中获取值。尝试：

```
var textBox = document.getElementById('answer_box').value; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T17:25:53.423

在比较中使用 textbox.value ！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T17:26:13.860

您的 textBox 包含 DOM 元素而不是值，您需要使用 .value 获取值；

所以你需要

```
if (textBox.value === currentWord) 
```

# jquery - 使用 jquery 从具有名称结构的输入中获取值

> ID：16198375
> 
> 赞同：0
> 
> 时间：2013-04-24T17:23:42.427
> 
> 标签：jquery

文本输入具有数组样式的名称（name="post[2][id]"）。我需要使用这个结构名称在 jQuery 脚本中获取这些值。这样我就可以像普通数组一样工作了。

```
$(document).ready(function(){   
    var data = {};
    data['post'] = {};

    var fields = $("#user input");

    $.each(fields, function(index, field) {
        data[$(field).attr('name')] = $(field).val();
    });

    console.log(data);
});

<div id="user">
    <input type="text" name="name" value="Joy" />
    <input type="text" name="post[1][id]" value="2" />
    <input type="text" name="post[1][name]" value="test" />
    <input type="text" name="post[2][id]" value="3" />
    <input type="text" name="post[2][name]" value="test 2" />
</div> 
```

现在我的名字在数据变量中添加了类似的字符串，所以这很糟糕。我需要这个：

```
alert(data.post.1.id) // 2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T17:53:02.677

简短的回答：

无需扩展 jQuery 的选择器，您可以使用 jQuery 的`contains`选择器：[http ://api.jquery.com/attribute-contains-selector/](http://api.jquery.com/attribute-contains-selector/)

像这样

`$('input[name*="["][name*="]"]')`

把它翻译成英文，意思是，*给我`input`名字包含的 s`[`和`]`*

* * *

长答案：

简短的回答实际上应该是足够的。

但仅供参考...

重复使用`[name...]`是因为一个缺点，我们不能在这样的选择器中使用通配符。

另一个缺点是它们没有定义严格的发生顺序。例如，`post]1[`也将匹配名称。

如果您确实需要确保名称具有正确的字符串模式，您可以扩展 jQuery 的选择器以执行 Regex 操作以获得更严格的选择规则。

这是一个很好的：http: [//james.padolsey.com/javascript/regex-selector-for-jquery/](http://james.padolsey.com/javascript/regex-selector-for-jquery/)

# python - 如果在 Maya 中成功导入模块，如何运行程序

> ID：16198376
> 
> 赞同：0
> 
> 时间：2013-04-24T17:23:46.527
> 
> 标签：python, procedure, maya

我刚刚完成一个可以作为模块运行的脚本。我在原始脚本中有一个过程调用，所以它在导入时运行，打开我的 GUI。

如果模块导入正确，假设我想打开这个窗口。我该怎么做呢？

```
i.e 
try:
 import maya.cmds as cmds
except:
   pass 
```

#procedure 在这里定义

```
if __name__ == '__main__':
    createGUI() 
```

当我在 Maya 中将脚本作为模块导入时，我的 GUI 没有打开，我做错了什么？谢谢

但是，如果我使用 pydoc 来做文档和以前的格式，它会正确输出。但是，如果我在 if 语句之外调用任何过程，它就会这样做。
今天晚些时候将上传我的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T02:10:09.877

if **name** == **main**是“如果我在解释器中作为脚本运行”的标准习语。但是模块中所有松散的语句都将在导入时执行。如果您想在导入模块时运行代码，只需将可执行代码放在脚本底部（因此在调用之前定义了所有名称），它将在两个地方运行。

那就是：*不要*。除了琐碎的初始化和特定于模块的设置之外，您真的不想编写在导入时运行的代码。最好这样写：

```
def create_my_gui():
   # do stuff

if name == "__main__":
   create_my_gui() 
```

然后从 Maya 中导入的任何代码调用该模块：

```
import myModule
myModule.create_my_gui() 
```

这样，您就可以决定何时弹出 gui，而不是每次弹出打开模块时都显示它。否则，您无法在不导致 gui 运行的情况下查看模块以获取函数或类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T17:40:43.897

尝试在模块中打印`__name__`变量。当您在 Maya 中导入它时，它可能是其他模块的一部分，因此不会`'__main__'`。这也有效：

```
import myModule 
myModule.createGUI() 
```

# sql - 带有两个语句的 SQL 函数

> ID：16198379
> 
> 赞同：0
> 
> 时间：2013-04-24T17:24:05.530
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我从来没有使用过 T-SQL 函数 我有这张表

```
id   name 
 1   Juan
 2   Maria
 3   Pepita
 4   Pepon 
```

我想在表中插入空间以生成 ea 新 ID，类似这样

```
 insert into tbfornec (nome) values (' ') 
```

并返回这个新 ID 的值：

```
 select max(idfornec) from tbfornec 
```

有了这两个陈述，我试着写这个：

```
 create function ultimo ()
  returns int @mayor  as

  insert into tbfornec (nome) values (' ') 
```

市长=从 tbfornec 中选择 max(idfornec)
我做错了什么？？？ķ

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T17:34:09.483

我将创建一个过程并用于`scope_identity()`返回最后插入的 id：

```
create procedure ultimo (@name varchar(100)) 
as 
begin
  insert into tbfornec values (@name)
  select scope_identity()
end 
```

然后调用它：

```
exec ultimo ' '; 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!3/30d9b/2)

顺便说一句——我认为您不能`INSERT`在用户定义的函数中使用语句。有关附加信息，请参阅此[帖子](https://stackoverflow.com/questions/5088252/insert-query-in-sql-function)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T17:51:27.650

如果您正在修改（插入、更新、删除、创建、删除等）数据库中的任何内容，那么您应该使用存储过程而不是函数。

[数学函数](http://en.wikipedia.org/wiki/Function_%28mathematics%29)是一种结构，它接受一个或多个输入并返回一些输出。它不应该修改任何底层数据或结构。T-SQL 函数也不例外。它本质上是向数据库引擎询问问题的答案，而不是要求它做某事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T17:59:02.883

这是我的解决方案，正在工作

```
create procedure ultimo (@name varchar(10)) 
as 
begin
insert into tbfornec (nome) values (@name)
select scope_identity()
end

ultimo '' 
```

我不知道功能不会插入，删除，更新非常感谢你们:)

# wpf - 使用 SelectionMode="Multiple" 作为 ListView 的 WPF DataGrid？

> ID：16198380
> 
> 赞同：0
> 
> 时间：2013-04-24T17:24:15.343
> 
> 标签：wpf, listview, datagrid

对于 WPF DataGrid，您有 2 种选择模式：单一和扩展。对于 WPF ListView，您有 3 种选择模式：单、多和扩展。

我的要求是让 Datagrid 在 ListView 中选择作为 Multiple SelectionMode 的项目。这意味着： - 您在不按 Ctrl 的情况下选择多个项目，并且 - 在 DataGrid 中拖动鼠标时不会选择多个项目。

是的，我知道我可以使用 ListView 并为其设置样式以使其看起来像所需的 Datagrid，但是已经完成了太多工作（样式、事件设置器、DataGridCheckBoxColumns、DataGridTemplateColumns 等等）。

以前有没有人解决过这个问题？无论是使用背后的代码还是扩展 Datagrid。

# android - 在其他布局上显示 videoView 全屏

> ID：16198382
> 
> 赞同：1
> 
> 时间：2013-04-24T17:24:24.210
> 
> 标签：android, fragment, android-videoview

我正在开发一个 android 应用程序，其中使用 TabHost 使用各种选项卡，一个选项卡包含视频视图。我也在顶部使用图像。我的布局是

|主要|

--|图片|

--|标签主机|

----|线性布局|

----|框架布局|

----|标签小部件|

我想全屏显示我的视频，这只是刚刚结束。我还想切换正常模式下的全屏视频应该适合 |images| 和选项卡，在全屏模式下，应覆盖所有可见区域。

我的 activity_main_screen.xml 是

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<ImageView
    android:id="@+id/btn_rating"
    android:layout_width="177px"
    android:layout_height="38px"
    android:layout_marginBottom="6px"
    android:layout_marginLeft="3px"
    android:layout_marginTop="3px"
    android:background="@drawable/rate_button"
    android:contentDescription="@string/homeButton" />

<ImageView
    android:id="@+id/titleImage"
    android:layout_width="264px"
    android:layout_height="42px"
    android:layout_centerHorizontal="true"
    android:contentDescription="@string/titleImage" />

<TabHost
    android:id="@android:id/tabhost"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_below="@+id/btn_rating" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1" />

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="match_parent"
            android:layout_height="50px"
            android:layout_marginBottom="-10px"
            android:gravity="center"
            android:paddingBottom="8px" />
    </LinearLayout>
</TabHost> 
```

和

activity_video.xml 是：`

```
<FrameLayout
    android:id="@+id/fragment_container"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_gravity="center"
    tools:ignore="PxUsage" >
</FrameLayout> 
```

`

Fragment_video_play.xml 是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
       android:layout_width="fill_parent"
       android:layout_height="fill_parent" > 
```

请建议我如何全屏显示视频？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:02:05.093

我如何让我的 VideoView 填满整个屏幕（忽略纵横比可能存在的问题）如下：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="match_parent"
     android:layout_height="match_parent" >

    <VideoView
         android:id="@+id/VideoView"
         android:layout_width="match_parent"
         android:layout_height="match_parent"
         android:layout_alignParentLeft="true"
         android:layout_alignParentRight="true"
         android:layout_alignParentBottom="true"
         android:layout_alignParentTop="true"
         android:layout_below="@id/buttonContainer"/>
</RelativeLayout> 
```

但是，我不建议在其他 UI 元素之上绘制视频，因为这是过度绘制，会降低应用程序的性能。

# java - 在jFrame中启用右键单击

> ID：16198383
> 
> 赞同：0
> 
> 时间：2013-04-24T17:24:24.257
> 
> 标签：java, menu, popup, click

嘿，我正在寻找如何使用 NetBeans 启用（仅且仅）右键单击并在 jFrame 中显示弹出菜单；使用我的代码：

```
 private void formMouseClicked(java.awt.event.MouseEvent evt){                                  

            pop.show(evt.getComponent(),evt.getX(), evt.getY());
     } 
```

我仍然无法获得最佳结果，因为它还会在左键单击时弹出提示我任何提示我正在做任何错误提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T12:10:38.553

这才是真正应该做的事

```
 private void textfiledMousePressed(java.awt.event.MouseEvent evt) {                               

             if (evt.getModifiers() == MouseEvent.BUTTON3_MASK){  
                p.show(evt.getComponent(), evt.getX(), evt.getY());
             }
       } 
```

不要忘记添加导入

```
 import java.awt.event.MouseEvent; 
```

玩得开心...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T17:28:22.457

您可以使用：

```
if (evt.isPopupTrigger()){
//Show menu and do stuff here
} 
```

# java - MouseListener 无响应

> ID：16198386
> 
> 赞同：0
> 
> 时间：2013-04-24T17:24:29.827
> 
> 标签：java, mouseevent, mouselistener

我的游戏处理射击的 MouseListener 在使用单独的鼠标时没有响应，但在我的笔记本电脑上使用内置鼠标时没有响应。在我的播放器类中，mouseClicked 方法如下所示：

```
public void mouseClicked(MouseEvent e){
    if(e.getButton() == MouseEvent.BUTTON1){
        fire();
    }
} 
```

在扩展 JPanel 的单独类中，我像这样实现 MouseListener：

```
addMouseListener(new MouseAdapter(){
        public void mouseClicked(MouseEvent e){
            player.mouseClicked(e);
        }
    }); 
```

我一直使用我的内置鼠标来编码和测试游戏，每次单击鼠标左键时，玩家都会开始射击，但现在当我想尝试用鼠标玩游戏时，我注意到玩家没有每次我按下鼠标左键时都开始拍摄，但更多的是 80% 的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:11:07.513

> 我注意到玩家并没有在每次按下鼠标左键时都开始射击，而是有 80% 的时间。

尝试使用`mousePressed()`而不是 mouseClicked()。只有在同一位置生成 mousePressed() 和 mouseReleased() 事件时才会生成 mouseClicked 事件。也许您正在将鼠标移动一两个像素，因此不会生成 mouseClicked 事件。

```
if(e.getButton() == MouseEvent.BUTTON1) 
```

此外，代替上述内容，请使用以下更易于阅读的内容：

```
if (SwingUtilities.isLeftMouseButton(e)) 
```

# google-apps-script - 带有忽略字符的谷歌电子表格排序脚本？

> ID：16198387
> 
> 赞同：0
> 
> 时间：2013-04-24T17:24:30.400
> 
> 标签：google-apps-script

首先，如果这个问题已经得到回答，我真的很抱歉。我对脚本的所有事情都有非常基本的掌握，所以如果我已经在没有意识到的情况下遇到了我的问题的答案，我不会感到惊讶（因为它超出了我的想象）......

我有一个大型库存电子表格，我想按字母顺序排序，但是库存中的许多项目在我想排序的第一个主要词之前都有各种前缀。是否可以创建一个脚本，我可以指定一组在排序中应忽略的字符串或字符？在搜索涉及基于指定分隔符生成新列的答案时，我看到了很多建议，但我认为这种方法不适用于我，因为库存中的项目没有一致的前缀（或前缀）。当我尝试这个建议时，我想为每个项目排序的主要词是不同的列，具体取决于项目名称。希望这是有道理的......如果有人作为模板，甚至只是一个链接让我开始创建这样的脚本，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T23:17:35.027

我在下面这个例子中站在 Serge 的肩膀上，使用正则表达式来匹配样本中较大的单词（5 个或更多字母......你可以改变这个，但 {7,} 是最高的，它将匹配两个 Menthyl和丙氨酸。当然丁氧基碳...也可以匹配，因为它要长得多。）：

```
function test2(){
         Logger.log(sort2( ['(1R,2S,5R)-(-)-Menthyl (S)-p-toluenesulfinate' ,'D-Alanine','Cis-3-(N-Tert-Butoxycarbonylamino)cyclopentanecarboxylic acid']));
       }

      function sort2(array){
          array.sort(function(x,y){
            var xp = x.match(/\b[A-z]{5,}\b.*$/m);
            var yp = y.match(/\b[A-z]{5,}\b.*$/m);
            return xp == yp ? 0 : xp > yp ? -1 : 1;// replace xp > yp with xp < yp for ascending order 
            });
          return array  
      } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T20:00:08.780

您可以使用数组来执行此操作，这是一个示例，其中我按空格后的第一个字符降序排序（小写）。

您可以在排序函数中选择其他参数。

```
function test(){
  Logger.log(['xyz 123','wxy 234','vwx 345','abc 456',])
  Logger.log(sort(['xyz 123','wxy 234','vwx 345','abc 456',]))
 }
function sort(array){
    array.sort(function(x,y){
      var xp = x.toLowerCase().substring(x.indexOf(' ')+1);
      var yp = y.toLowerCase().substring(y.indexOf(' ')+1);
      return xp == yp ? 0 : xp > yp ? -1 : 1;// replace xp > yp with xp < yp for ascending order 
      });
    return array  
} 
```

日志输出：

```
[xyz 123, wxy 234, vwx 345, abc 456]
[abc 456, vwx 345, wxy 234, xyz 123] 
```

如您所见，它按空格后的数字排序（降序）

# google-app-engine - Appengine 云端点有问题吗？

> ID：16198389
> 
> 赞同：2
> 
> 时间：2013-04-24T17:24:38.463
> 
> 标签：google-app-engine, google-cloud-endpoints

在过去 2 天里，我一直无法更新我的端点。我的日志状态成功部署和更新，但发现文档返回 502。还有其他人有问题吗？

Java 运行时。

更新：我已尝试更改为已知可以使用但也无法使用的旧版本。我的所有端点都已关闭。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T18:00:54.573

我可以确认 Endpoints 目前已关闭，我们正在努力。

编辑：服务现在应该回来了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T18:33:22.653

总体而言，Google Cloud Endpoints 目前似乎存在问题。

按照这个 StackOverflow 问题：[生成谷歌云端点客户端库时出错](https://stackoverflow.com/questions/16158013/error-generating-google-cloud-endpoint-client-libraries)

并与 Google 代码相关的问题：[https ://code.google.com/p/googleappengine/issues/detail?id=9214](https://code.google.com/p/googleappengine/issues/detail?id=9214)

# iphone - 如何将图像裁剪为框架

> ID：16198390
> 
> 赞同：0
> 
> 时间：2013-04-24T17:24:40.517
> 
> 标签：iphone, image-processing, uiimageview

我有帧大小为 200 * 200 的 UIImageView。我想从适合该帧的相机或库中拍照。

你有任何例子可以做到这一点，比如 Instagram、Pose 应用程序。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:32:22.730

此方法允许您在图像上设置要裁剪的矩形，并返回裁剪后的图像。享受你的种植:)

```
- (UIImage *)cropImage:(UIImage *)image inRect:(CGRect)rect  {
    CGImageRef imageRef = CGImageCreateWithImageInRect(image.CGImage, rect);
    UIImage *resultImage = [UIImage imageWithCGImage:imageRef];
    CGImageRelease(imageRef);

    return resultImage;
} 
```

# iphone - 为什么 range.location == NSNotFound 意味着找到一个单词而不是相反？

> ID：16198391
> 
> 赞同：1
> 
> 时间：2013-04-24T17:24:40.883
> 
> 标签：iphone, objective-c, spell-checking, nsrange

在这个问题（[iPhone Objective-c：detecting a 'real' word](https://stackoverflow.com/questions/6861161/iphone-objective-c-detecting-a-real-word/6861260#6861260)）中，如果该单词是“real word”，则函数返回以下行为真

```
return misspelledRange.location == NSNotFound; 
```

我很困惑为什么这是“==”而不是“！=”。“不等于 NSNotFound”是否意味着找到了这个词——就像这个答案中的情况一样，[NSRange 是否可以确定一段文本是否存在于更大的字符串中？](https://stackoverflow.com/questions/4715830/can-nsrange-determine-if-a-snippet-of-text-exists-in-a-larger-string)?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T17:29:43.043

如果我理解正确，如果给定单词​​不包含拼写错误的单词，该函数将返回 true *，*所以

```
return misspelledRange.location == NSNotFound; 
```

说得通。

# excel - 要粘贴到另一张工作表中的数据的动态范围？

> ID：16198397
> 
> 赞同：0
> 
> 时间：2013-04-24T17:24:46.347
> 
> 标签：excel, vba

我有一张有两个标签的工作表：

在**选项卡 1**上，我在 J、K 列中有一个连续的数据块，其行数不同，但总是从 J1、K1 开始。

在**选项卡 2**上，我仅在 A 列中有一个数据，从 A1 开始。

我正在寻找使我能够在选项卡 1 中动态选择整个数据块的代码，无论行数有多深。

然后粘贴该块，它从选项卡 2 中 A 列的第一个空单元格开始。

这是我迄今为止的尝试：

```
Sub put_there2()
Dim r1 As Range
Dim r2 As Range
Dim r3 As Range
Dim LastRowNumber As Long
Dim LastCell As Range
Dim WS As Worksheet

Set r1 = Range("A2:A100") 'Paste Location

Set WS = Worksheets("Sheet1")
With WS                                                 ' sheet in which to measure range of data to be pasted
    Set LastCell = .Cells(.Rows.Count, 10).End(xlUp)
    LastRowNumber = LastCell.Row

End With

Set r2 = Range(Cells(2, 10), Cells(LastRowNumber, 11))       'region to be copied

For Each r3 In r1
    If r3.Value = "" Then
        r2.Copy r3
        Exit Sub
    End If
Next

End Sub 
```

感谢您的想法，

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:11:54.590

这是我需要的代码，非常感谢

```
Sub test()
    Application.ScreenUpdating = False

    Dim s1 As Excel.Worksheet
    Dim s2 As Excel.Worksheet
    Dim iLastCellS2 As Excel.Range
    Dim iLastRowS1 As Long

    Set s1 = Sheets("Sheet1")
    Set s2 = Sheets("Sheet2")

    ' get last row number of J in Sheet1
    iLastRowS1 = s1.Cells(s1.Rows.Count, "J").End(xlUp).Row

    ' get last AVAILABLE cell to past into
    Set iLastCellS2 = s2.Cells(s2.Rows.Count, "A").End(xlUp).Offset(1, 0)

    'copy&paste into sheet2
    s1.Range("J1", s1.Cells(iLastRowS1, "K")).Copy iLastCellS2

    Application.ScreenUpdating = True
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T17:39:03.417

请注意，当您使用 Range() 对象时，您正在隐式引用 ActiveSheet，它可能不是您认为的工作表。最好明确指出您需要参考的工作表。

尝试这个：

```
Sub test()
    Application.ScreenUpdating = False

    Dim s1 As Excel.Worksheet
    Dim s2 As Excel.Worksheet
    Dim iLastCellS2 As Excel.Range
    Dim iLastRowS1 As Long

    Set s1 = Sheets("Sheet1")
    Set s2 = Sheets("Sheet2")

    ' get last row of J in Sheet1
    iLastRowS1 = s1.Cells(s1.Rows.Count, "J").End(xlUp).Row

    ' get last AVAILABLE cell to past into
    Set iLastCellS2 = s2.Cells(s2.Rows.Count, "A").End(xlUp).Offset(1, 0)

    'copy into sheet2
    s1.Range("J1", s1.Cells(iLastRowS1, "J")).Copy iLastCellS2

    ' get last row of K and copy
    iLastRowS1 = s1.Cells(s1.Rows.Count, "K").End(xlUp).Row
    Set iLastCellS2 = s2.Cells(s2.Rows.Count, "A").End(xlUp).Offset(1, 0)

    s1.Range("K1", s1.Cells(iLastRowS1, "K")).Copy iLastCellS2

    Application.ScreenUpdating = True
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T17:46:15.303

一个简短的答案将是

```
Set ws = Sheets("Sheet1")
ws.Range(ws.Range("J1:K1"), ws.Range("J1:K1").End(xlDown)).Copy
Sheets("Sheet2").Range("A1").End(xlDown).Offset(1,0).Paste 
```

万一K也需要去A然后代码将是

```
Set ws = Sheets("Sheet1")

ws.Range(ws.Range("J1"), ws.Range("J1").End(xlDown)).Copy
Sheets("Sheet2").Range("A1").End(xlDown).Offset(1,0).Paste

ws.Range(ws.Range("K1"), ws.Range("K1").End(xlDown)).Copy
Sheets("Sheet2").Range("A1").End(xlDown).Offset(1,0).Paste 
```

# php - 在 PHP 中使用正则表达式删除所有出现的 html标签

> ID：16198400
> 
> 赞同：1
> 
> 时间：2013-04-24T17:24:57.807
> 
> 标签：php, regex

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:27:00.970

将您的正则表达式更改为不贪婪：添加 U 修饰符。

```
$pattern = '~<a(.*)>(.*)</a>~U'; 
```

应该可以满足您的需求。

# java - java中的计算器程序

> ID：16198401
> 
> 赞同：2
> 
> 时间：2013-04-24T17:25:01.253
> 
> 标签：java

我是 java 初学者，我在一个在线可用程序的帮助下编写了这段代码。附加的代码是按下计算器按钮时执行操作的代码的一部分。在 CalculatorDemo 类中，我已经初始化了所有按钮（b0-b24）和 TextField tf。在这堂课中，我使用 char OP 作为标志，因此，当我按“+”时，OP 被分配“+”，我什至在命令提示符下检查了它。但是当我按 '=' 时，OP 会自动分配 '\0' 我不知道如何以及为什么。因此，根本不执行任何操作。而且我不明白逻辑错在哪里。请帮忙

```
 import java.awt.event.*;
    import java.awt.*;

class CalculatorActionperform implements ActionListener
{
    CalculatorDemo temp;
    public boolean foundKey;
    String command;
    String s="", s1,s2,s3,s4,s5,s6;
     int  n; 
     char OP;

CalculatorActionperform(CalculatorDemo d)
    {
temp=d;

    }

public void actionPerformed(ActionEvent e)
        {

        if(e.getSource()==temp.b23)
            {
            s3=temp.tf.getText();
            s4="0";
            s5=s3+s4;
            temp.tf.setText(s5); 
            }
        if(e.getSource()==temp.b22)
            {
            s3=temp.tf.getText();
            s4="1";
            s5=s3+s4;
            temp.tf.setText(s5); 
            }
        if(e.getSource()==temp.b21)
            {
            s3=temp.tf.getText();
            s4="2";
            s5=s3+s4;
            temp.tf.setText(s5);
            }
        if(e.getSource()==temp.b20)
            {
            s3=temp.tf.getText();
            s4="3";
            s5=s3+s4;
            temp.tf.setText(s5);
            }
        if(e.getSource()==temp.b15)
            {
            s3=temp.tf.getText();
            s4="4";
            s5=s3+s4;
            temp.tf.setText(s5); 
            }
        if(e.getSource()==temp.b16)
            {
            s3=temp.tf.getText();
            s4="5";
            s5=s3+s4;
            temp.tf.setText(s5); 
            }
        if(e.getSource()==temp.b17)
            {
            s3=temp.tf.getText();
            s4="6";
            s5=s3+s4;
            temp.tf.setText(s5);
            }
        if(e.getSource()==temp.b12)
            {
            s3=temp.tf.getText();
            s4="7";
            s5=s3+s4;
            temp.tf.setText(s5);
            }
        if(e.getSource()==temp.b11)
            {
            s3=temp.tf.getText();
            s4="8";
            s5=s3+s4;
            temp.tf.setText(s5);
            }
        if(e.getSource()==temp.b10)
            {
            s3=temp.tf.getText();
            s4="9";
            s5=s3+s4;
            temp.tf.setText(s5);
            }
        if(e.getSource()==temp.b14)
            {
            s1=temp.tf.getText();
            temp.tf.setText("");
            OP='+';

            }
        if(e.getSource()==temp.b19)
            {
            s1=temp.tf.getText();
            temp.tf.setText("");
            OP='-';
            }
        if(e.getSource()==temp.b18)
            {
            s1=temp.tf.getText();
            temp.tf.setText("");
            OP='*';
            }
        if(e.getSource()==temp.b13)
            {
            s1=temp.tf.getText();
            temp.tf.setText("");
            OP='/';
            }
        if(e.getSource()==temp.b9)   /* b9= '=' */
            {
            s2=temp.tf.getText();

            if(OP=='\0')
                {
                System.out.println("null");
                }
            if(OP=='+')
            {
            n=Integer.parseInt(s1)+Integer.parseInt(s2);
            temp.tf.setText(String.valueOf(n));
            }
                    else
                        if(OP=='-')
                            {
                            n=Integer.parseInt(s1)-Integer.parseInt(s2);
                            temp.tf.setText(String.valueOf(n));
                            }
                    else 
                        if(OP=='*')
                            {
                            n=Integer.parseInt(s1)*Integer.parseInt(s2); 
                            temp.tf.setText(String.valueOf(n)); 
                            }
                    else 

                    if(OP=='/')
                            {
                            n=Integer.parseInt(s1)/Integer.parseInt(s2); 
                            temp.tf.setText(String.valueOf(n));
                            }
                                }

            if(e.getSource()==temp.b6)
                {
                temp.tf.setText("");
                }
        }
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-25T01:22:47.123

我不会深入讨论您在问题中发布的代码，而是试图帮助您实现编写计算器演示的总体目标。

**第一步应该是通过写下来清楚地了解问题：**

> 我需要一个带有显示屏的计算器和一个带有数字 0-9 的小键盘以及运算符 +、-、x 和一个 = 按钮。计算器应该从键盘读取一系列数字，然后是数学运算符，然后是另一系列数字，依此类推。每个不间断的数字序列都应转换为整数值。
> 
> 计算器应计算将数学运算符应用于第一个和第二个整数值的结果。如果输入了更多的运算符和整数，则应将数学运算符应用于先前计算的结果和进一步的整数。这个过程应该一直持续到等号按钮被按下。当数字在键盘上被按下时，它们应该出现在附加到目前输入的这些数字的文本显示中。
> 
> 当按下操作符或等号按钮时，这表示整数输入的结束，如果计算完成，则结果应显示在显示屏上，否则整数应保留在显示屏中，直到按下另一个数字 - 然后应清除显示并显示新数字，并像以前一样附加后续数字。

从这个描述中，我们可以识别出一些名词：Calculator、Button、Display、Keypad、Digit、Operator、Integer、Result ...和一些动词：Read、Press、Convert、Calculate、Apply、Enter、Complete、Show、Remain、Clear , 显示, 追加

这些让我们了解程序所需的状态和行为。然后我们决定如何在我们的实现中对这些进行建模。通常，名词可以建模为类/实例变量（状态），动词可以建模为方法（行为）。

这是一种可能的设计：

一个名为 Calculator 的类，使用 Swing 组件来表示 Buttons/Keypad 和 Display；使用原始 int 类型来表示 Integer/Result/Digit；使用 Java 数学运算符来表示运算符。

**让我们开始制作它的骨骼：**

```
public class Calculator {
    private JFrame window;
    private List<JButton> keypad;
    private JLabel display;
    private int result;
    private StringBuffer digitsEntered;
    private int integerEntered;
} 
```

现在我们需要弄清楚我们将如何阅读/按下按钮。我们将需要设置我们`JButton`的 s 以响应被激活并将该事件连接到我们在 Calculator 类中定义的方法。

一种方法是创建`JButton`s 并向它们添加监听器。我们可以`Calculator`实现`ActionListener`接口，这迫使它定义一个`actionPerformed`带有单个`ActionEvent`参数的方法。`JButton`我们可以通过创建in`Calculator`的构造函数来了解它是如何工作的。

```
public class Calculator implements ActionListener {
    private JFrame window;
    private List<JButton> keypad;
    private JLabel display;
    private int result;
    private StringBuffer digitsEntered;
    private int integerEntered;

    public Calculator() {
        JButton zeroButton = new JButton("0");
        zeroButton.addActionListener(this);
    }

    public void actionPerformed(ActionEvent e) {
        // this would get executed when zeroButton is pressed
    }
} 
```

**请注意，此代码不会做任何事情，**因为我们还没有设置窗口并将按钮连接到它。但是，代码应该说明我们如何通过按下按钮来运行代码。

**让我们通过设置一切来让这段代码处于工作状态：**

```
public class Calculator implements ActionListener {
    private JFrame window;
    private List<JButton> keypad;
    private JLabel display;
    private int result;
    private StringBuffer digitsEntered;
    private int integerEntered;

    public Calculator() {
        window = new JFrame("Calculator");
        window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JButton zeroButton = new JButton("0");
        zeroButton.addActionListener(this);
        window.add(zeroButton, BorderLayout.CENTER);

        window.pack();
        window.setVisible(true);
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        // this would get executed when zeroButton is pressed
        JOptionPane.showMessageDialog(window, "Button pressed");
    }

    public static void main(String[] args) {
        new Calculator();
    }
} 
```

好的，我们需要不止一个按钮，我们需要一个完整的负载。让我们将数字设为 0-9：

```
for (int digit = 0; digit <=9; digit++) {
    JButton button = new JButton(Integer.toString(digit));
    button.addActionListener(this);
    window.add(button);
} 
```

**嗯，这不正常**- 窗口上只出现一个按钮。那是因为我们有默认的窗口布局，这不是我们需要的。我们希望按钮出现在网格中，在窗口中组合在一起。让我们创建一个`JPanel`来将按钮组合在一起并使用一个`GridLayout`面板，然后我们可以将面板添加到窗口中。

```
 public Calculator() {
        window = new JFrame("Calculator");
        window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel digitsPanel = new JPanel();
        digitsPanel.setLayout(new GridLayout(4, 3));
        for (int digit = 0; digit <=9; digit++) {
            JButton button = new JButton(Integer.toString(digit));
            button.addActionListener(this);
            digitsPanel.add(button);
        }
        window.add(digitsPanel);

        window.pack();
        window.setVisible(true);
    } 
```

这还不错，但是数字并没有按照您在小键盘上看到的通常顺序出现。那是因为它们按照从左上角到右下角的添加顺序出现。我们可以通过用数组指定我们想要的顺序来解决这个问题，然后迭代它（我们为此使用*for-each*样式迭代器，因为它更整洁）。当我们这样做时，我们可以对数学运算符和等号按钮做类似的事情，并将它们也添加到框架中（这里我们将明确用于窗口的布局，我们将使用 a `BorderLayout`）。

```
 public Calculator() {
        window = new JFrame("Calculator");
        window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        window.setLayout(new BorderLayout());

        JPanel digitsPanel = new JPanel();
        digitsPanel.setLayout(new GridLayout(4, 3));
        int[] digitOrder = new int[] { 7,8,9,4,5,6,1,2,3,0 };
        for (int digit : digitOrder) {
            JButton button = new JButton(Integer.toString(digit));
            button.addActionListener(this);
            digitsPanel.add(button);
        }
        window.add(digitsPanel, BorderLayout.CENTER);

        JPanel operatorsPanel = new JPanel();
        operatorsPanel.setLayout(new GridLayout(5,1));
        String[] operators = new String[] { "+","-","x","/","=" };
        for (String operator : operators) {
            JButton button = new JButton(operator);
            button.addActionListener(this);
            operatorsPanel.add(button);
        }
        window.add(operatorsPanel, BorderLayout.EAST);

        window.pack();
        window.setVisible(true);
    } 
```

好的，我们几乎完成了组件。我们只需要添加一个显示器。

```
 ...
    private JLabel display;
    ...
    public Calculator() {
        window = new JFrame("Calculator");
        ...
        display = new JLabel();
        display.setHorizontalAlignment(JLabel.RIGHT);
        display.setText("0");
        window.add(display, BorderLayout.NORTH);
        ...
        window.pack();
        window.setVisible(true);
    } 
```

**现在我们只需要实现**响应按钮按下的逻辑。首先，让我们看看如果按下数字，我们需要做什么。我们需要处理 Append 和 Show 动词，并将该数字附加到我们的输入并显示它。

```
 StringBuffer digitsEntered;
    ...
    public Calculator() {
        ...
        digitsEntered = new StringBuffer();
        ...
    }

    public void actionPerformed(ActionEvent e) {
        if (e.getSource() instanceof JButton) {
            String buttonText = ((JButton)e.getSource()).getText();
            if (Character.isDigit(buttonText.charAt(0))) {
                digitsEntered.append(buttonText.charAt(0));
                display.setText(digitsEntered.toString());
            }
        }
    } 
```

凉爽的。现在我们需要实现 Convert 动词并将我们的数字转换为整数。这将在按下运算符或等于时发生。我们需要记住按下了哪个运算符，这样我们就知道在输入第二个整数时要进行什么计算。

```
 private String currentOperator;
    ...
    public void actionPerformed(ActionEvent e) {
        if (e.getSource() instanceof JButton) {
            String buttonText = ((JButton)e.getSource()).getText();
            if (Character.isDigit(buttonText.charAt(0))) {
                digitsEntered.append(buttonText.charAt(0));
                display.setText(digitsEntered.toString());

            } else {
                integerEntered = Integer.parseInt(digitsEntered.toString());
                digitsEntered.setLength(0); // clear out the input so a new integer can be entered
                currentOperator = buttonText; // remember the operator
            }
        }
    } 
```

现在我们实际上需要处理第二次按下运算符或等于时，我们已经保存了一个整数和运算符。在这里我们可以实现Calculate/Apply动词的+部分并显示结果。

```
 ...
            } else {
                if (currentOperator == null) {
                    integerEntered = Integer.parseInt(digitsEntered.toString());
                } else {
                    int previousInteger = integerEntered;
                    integerEntered = Integer.parseInt(digitsEntered.toString());

                    if ("+".equals(currentOperator)) {
                        result = previousInteger + integerEntered;
                        display.setText(Integer.toString(result));
                    }
                }
                digitsEntered.setLength(0); // clear out the input so a new integer can be entered
                currentOperator = buttonText; // remember the operator
            }
            ... 
```

这不太对。它将把前两个整数的总和而不是到目前为止输入的所有整数的总和放入结果中。我们需要将第一个值存储在中，`result`然后将每个后续整数添加到存储在中的值中`result`。这意味着我们不再需要该变量，并且我们在和`previousInteger`中都有一些重复的代码，我们可以在.`if``else``if`

```
 ...
                integerEntered = Integer.parseInt(digitsEntered.toString());
                if (currentOperator == null) {
                    result = integerEntered;
                } else {
                    if ("+".equals(currentOperator)) {
                        result = result + integerEntered;
                        display.setText(Integer.toString(result));
                    }
                }
                ... 
```

让我们实现其他运算符。

```
 ...
                integerEntered = Integer.parseInt(digitsEntered.toString());
                if (currentOperator == null) {
                    result = integerEntered;
                } else {
                    if ("+".equals(currentOperator)) {
                        result = result + integerEntered;
                    } else if ("-".equals(currentOperator)) {
                        result = result - integerEntered;
                    } else if ("x".equals(currentOperator)) {
                        result = result * integerEntered;
                    } else if ("/".equals(currentOperator)) {
                        result = result / integerEntered;
                    } else if ("=".equals(currentOperator)) {
                        result = integerEntered;
                    } else {
                        // Unrecognised operator
                    }
                    display.setText(Integer.toString(result));
                }
                ... 
```

在这里，我们将 = 设为一个操作符，其作用类似于重置并允许我们开始新的计算。如果您尝试点击 = then +（在结果中添加一个数字），您可能会注意到您得到一个错误；这是因为输入中没有数字可以转换为 + 运算符的整数。在这种情况下，我们可以通过跳过计算来解决这个问题。

```
 ...
                if (digitsEntered.length() > 0) { 
                    integerEntered = Integer.parseInt(digitsEntered.toString());
                    if (currentOperator == null) {
                        result = integerEntered;
                    } else {
                        if ("+".equals(currentOperator)) {
                            result = result + integerEntered;
                        } else if ("-".equals(currentOperator)) {
                            result = result - integerEntered;
                        } else if ("x".equals(currentOperator)) {
                            result = result * integerEntered;
                        } else if ("/".equals(currentOperator)) {
                            result = result / integerEntered;
                        } else if ("=".equals(currentOperator)) {
                            result = integerEntered;
                        } else {
                            // Unrecognised operator
                        }
                        display.setText(Integer.toString(result));
                    }
                }
                ... 
```

这是到目前为止的完整代码。它不处理除以 0，`keypad`从不使用并且可以删除，并且`integerEntered`实际上只需要是局部变量而不是实例变量。但是，代码应该大部分都可以工作，如果您发现任何问题，请告诉我。我也有一个更简洁的版本（我所做的第一个实现），但解释起来并不那么简单。

```
import java.awt.BorderLayout;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.List;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;

public class Calculator implements ActionListener {
    private JFrame window;
    private List<JButton> keypad;
    private JLabel display;
    private int result;
    private StringBuffer digitsEntered;
    private int integerEntered;
    private String currentOperator;

    public Calculator() {
        window = new JFrame();
        window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        window.setLayout(new BorderLayout());

        digitsEntered = new StringBuffer();

        display = new JLabel();
        display.setHorizontalAlignment(JLabel.RIGHT);
        display.setText("0");
        window.add(display, BorderLayout.NORTH);

        JPanel digitsPanel = new JPanel();
        digitsPanel.setLayout(new GridLayout(4, 3));
        int[] digitOrder = new int[] { 7,8,9,4,5,6,1,2,3,0 };
        for (int digit : digitOrder) {
            JButton button = new JButton(Integer.toString(digit));
            button.addActionListener(this);
            digitsPanel.add(button);
        }
        window.add(digitsPanel, BorderLayout.CENTER);

        JPanel operatorsPanel = new JPanel();
        operatorsPanel.setLayout(new GridLayout(5,1));
        String[] operators = new String[] { "+","-","x","/","=" };
        for (String operator : operators) {
            JButton button = new JButton(operator);
            button.addActionListener(this);
            operatorsPanel.add(button);
        }
        window.add(operatorsPanel, BorderLayout.EAST);

        window.pack();
        window.setVisible(true);
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        if (e.getSource() instanceof JButton) {
            String buttonText = ((JButton)e.getSource()).getText();
            if (Character.isDigit(buttonText.charAt(0))) {
                digitsEntered.append(buttonText.charAt(0));
                display.setText(digitsEntered.toString());
            } else {
                if (digitsEntered.length() > 0) { 
                    integerEntered = Integer.parseInt(digitsEntered.toString());
                    if (currentOperator == null) {
                        result = integerEntered;
                    } else {
                        if ("+".equals(currentOperator)) {
                            result = result + integerEntered;
                        } else if ("-".equals(currentOperator)) {
                            result = result - integerEntered;
                        } else if ("x".equals(currentOperator)) {
                            result = result * integerEntered;
                        } else if ("/".equals(currentOperator)) {
                            result = result / integerEntered;
                        } else if ("=".equals(currentOperator)) {
                            result = integerEntered;
                        } else {
                            // Unrecognised operator
                        }
                        display.setText(Integer.toString(result));
                    }
                }
                digitsEntered.setLength(0); // clear out the input so a new integer can be entered
                currentOperator = buttonText; // remember the operator
            }
        }
    }

    public static void main(String[] args) {
        new Calculator();
    }
} 
```

这是更清洁但更复杂的版本：

```
import java.awt.BorderLayout;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;

import javax.swing.AbstractAction;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;
import javax.swing.border.EmptyBorder;

public class CalculatorDemo extends JFrame  {
    private static final long serialVersionUID = 1L;

    private StringBuffer inputBuffer = new StringBuffer();
    private String queuedOperator = null;
    private int leftHandSide = 0;
    private JLabel inputDisplay;
    private JLabel operatorIndicator;

    private class DigitButtonAction extends AbstractAction {
        private static final long serialVersionUID = 1L;
        private final int digit;
        public DigitButtonAction(final int digit) {
            super(Integer.toString(digit));
            this.digit = digit;
        }
        @Override
        public void actionPerformed(ActionEvent e) {
            enterDigit(digit);
        }
    }
    private class OperatorButtonAction extends AbstractAction {
        private static final long serialVersionUID = 1L;
        private final String operator;
        public OperatorButtonAction(final String operator) {
            super(operator);
            this.operator = operator;
        }
        @Override
        public void actionPerformed(ActionEvent e) {
            performOperation(operator);
        }
    }

    public CalculatorDemo() {
        super("Calculator");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLayout(new BorderLayout());
        setSize(100, 200);

        // Create display text field
        inputDisplay = new JLabel();
        inputDisplay.setHorizontalAlignment(JLabel.RIGHT);
        inputDisplay.setText(Integer.toString(leftHandSide));

        operatorIndicator = new JLabel();
        operatorIndicator.setBorder(new EmptyBorder(0, 4, 0, 4));

        final JPanel display = new JPanel();
        display.setLayout(new BorderLayout());
        display.add(inputDisplay, BorderLayout.CENTER);
        display.add(operatorIndicator, BorderLayout.WEST);

        // Create number buttons
        final JPanel digitPanel = new JPanel();
        digitPanel.setLayout(new GridLayout(4,3));
        final int[] digitKeyOrder = new int[] { 7,8,9,4,5,6,1,2,3 };
        for (int digit : digitKeyOrder) {
            digitPanel.add(new JButton(new DigitButtonAction(digit)));
        }
        digitPanel.add(new JPanel()); // Blank spacer panel
        digitPanel.add(new JButton(new DigitButtonAction(0)));

        // Create operators
        final String[] OPERATORS = { "+","-","*","/","=" };
        final JPanel operatorPanel = new JPanel();
        operatorPanel.setLayout(new GridLayout(OPERATORS.length, 1));
        for (String op : OPERATORS) {
            operatorPanel.add(new JButton(new OperatorButtonAction(op)));
        }

        add(digitPanel, BorderLayout.CENTER);
        add(operatorPanel, BorderLayout.EAST);
        add(display, BorderLayout.NORTH);

        pack();
    }

    private void enterDigit(final int digit) {
        if (digit == 0 && inputBuffer.length() == 0) return;
        inputBuffer.append(Integer.toString(digit));
        inputDisplay.setText(inputBuffer.toString());
    }

    private int calculate(final int leftHandSide, final String operator, final int rightHandSide) {
        if (operator == null) return rightHandSide;
        else if ("+".equals(operator)) return leftHandSide + rightHandSide;
        else if ("-".equals(operator)) return leftHandSide - rightHandSide;
        else if ("*".equals(operator)) return leftHandSide * rightHandSide;
        else if ("/".equals(operator)) return leftHandSide / rightHandSide;
        else if ("=".equals(operator)) return rightHandSide;
        else {
            throw new IllegalStateException("Unrecognised operator " + operator);
        }
    }

    private void performOperation(final String operator) {
        try {
            final int rightHandSide = Integer.parseInt(inputBuffer.toString());
            leftHandSide = calculate(leftHandSide, queuedOperator, rightHandSide);
        } catch (NumberFormatException e) {
            // Ignore failure to parse inputBuffer to integer
            // calculate() not called, just carry on and clear the
            // inputBuffer and queue a new operator
        } catch (ArithmeticException e) {
            // Divide by 0 in calculate()
            operatorIndicator.setText("");
            inputDisplay.setText(e.getMessage());
            queuedOperator = null;
            return;
        } catch (IllegalStateException e) {
            // Unrecognised operator
            operatorIndicator.setText("");
            inputDisplay.setText(e.getMessage());
            queuedOperator = null;
            return;
        }
        inputBuffer.setLength(0); // Clear inputBuffer
        queuedOperator = operator; // Queue next operator
        // Update display
        operatorIndicator.setText(queuedOperator);
        inputDisplay.setText(Integer.toString(leftHandSide));
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new CalculatorDemo().setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-18T11:03:52.517

```
import java.util.Scanner;
public class Calculator {

public static void main(String[] args) {

    Scanner input = new Scanner(System.in);

    Math. = new Maths();

    double answer = 0;
    double inputA, inputB;
    char operator;
    boolean done = false;

     while (done == false) {
        System.out.print("Please enter your sum: ");

        inputA = input.nextDouble();
        operator = input.next().charAt(0);
        inputB = input.nextDouble();        

        switch (operator) {
            case '+': answer = Math.add(inputA, inputB);
                      break;
            case '-': answer = Math.subtract(inputA, inputB);
                      break;
            case '*': answer = Math.multiply(inputA, inputB);
                      break;
            case '/': answer = Math.divide(inputA, inputB);
                      break;
            case '^': answer = Math.power(inputA, inputB);
                      break;
        }

            System.out.println(answer);             
    }       

    input.close();

  }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-15T11:27:55.507

```
class InvalidNum2 extends Exception
{
    InvalidNum2()
    {   
    super("Invalid Num:num2 cannot be zero");
    }

}
class Calculator
{
static int div(int n,int m) throws InvalidNum2
    {
        if(m==0)
        {
            throw new InvalidNum2();
        }
        else
        {
            return(n/m);
        }
    }
     public static void main(String args[])
    {

        int num1,num2;
        int a,b,c,d;

        num1=Integer.parseInt(args[0]);
        num2=Integer.parseInt(args[2]);
        char op=args[1].charAt(0);

                if(args.length!=3)
        {
            System.out.println("incorrect no. of argument");
                System.exit(0);
        }
               else
                {
           try
           {
                    switch(op)
            {
                case '+' :
                                          a=num1+num2;
                      System.out.println("additiom:"+a);
                      break;
                case '-' :
                      b=num1-num2;
                      System.out.println("Sub:"+b);
                      break;
                case '*' :
                      c=num1*num2;
                      System.out.println("mul:"+c);
                      break;
                case '/' :
                       d=div(num1,num2);
                       System.out.println("div:"+d);
                       break;
                               default :
                                       { System.out.println("wrong ch");}
            }
            }catch(Exception E){
System.out.println(E);}
        }

    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-15T11:36:09.460

```
import java.awt.*;
import java.awt.event.*;
import java.applet.*;

public class calculatatorApp extends Applet implements ActionListener {

            Button b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,ad,sub,mul,div,mo,eq,c;
            TextField t1;
            static int a=0,b=0,res=0;
                public calculatatorApp()
                {   

                    Panel p1=new Panel();
                    Panel p2=new Panel();

                    t1=new TextField(10);
                    b0=new Button("0");
                    b1=new Button("1");
                    b2=new Button("2");
                    b3=new Button("3");
                    b4=new Button("4");
                    b5=new Button("5");
                    b6=new Button("6");
                    b7=new Button("7");
                    b8=new Button("8");
                    b9=new Button("9");
                    ad=new Button("+");
                    sub=new Button("-");
                    mul=new Button("*");
                    div=new Button("/");
                    mo=new Button("%");
                    eq=new Button("=");
                    c=new Button("c");

                    c.addActionListener(this);
                    b0.addActionListener(this);
                    b1.addActionListener(this);
                    b2.addActionListener(this);
                    b3.addActionListener(this);
                    b4.addActionListener(this);
                    b5.addActionListener(this);
                    b6.addActionListener(this);
                    b7.addActionListener(this);
                    b8.addActionListener(this);
                    b9.addActionListener(this);
                    ad.addActionListener(this);
                    sub.addActionListener(this);
                    mul.addActionListener(this);
                    div.addActionListener(this);
                    mo.addActionListener(this);
                    eq.addActionListener(this);

                    p1.add(t1);
                    p2.add(b1);
                    p2.add(b2);
                    p2.add(b3);
                    p2.add(ad);
                    p2.add(b4);
                    p2.add(b5);
                    p2.add(b6);
                    p2.add(sub);
                    p2.add(b7);
                    p2.add(b8);
                    p2.add(b9);
                    p2.add(mul);
                    p2.add(b0);
                    p2.add(c);
                    p2.add(eq);
                    p2.add(mo);
                    p2.add(div);

                }

                @Override
                public void actionPerformed(ActionEvent ae) {
                    // TODO Auto-generated method stub

                    String str=ae.getActionCommand();
                    if(str.equals("0"))
                    {
                        t1.setText(t1.getText()+""+str);

                    }
                    if(str.equals("1"))
                    {
                        t1.setText(t1.getText()+""+str);

                    }
                    if(str.equals("2"))
                    {
                        t1.setText(t1.getText()+""+str);

                    }
                    if(str.equals("3"))
                    {
                        t1.setText(t1.getText()+""+str);

                    }
                    if(str.equals("4"))
                    {
                        t1.setText(t1.getText()+""+str);

                    }
                    if(str.equals("5"))
                    {
                        t1.setText(t1.getText()+""+str);

                    }
                    if(str.equals("6"))
                    {
                        t1.setText(t1.getText()+""+str);

                    }
                    if(str.equals("7"))
                    {
                        t1.setText(t1.getText()+""+str);

                    }
                    if(str.equals("8"))
                    {
                        t1.setText(t1.getText()+""+str);

                    }
                    if(str.equals("9"))
                    {
                        t1.setText(t1.getText()+""+str);

                    }

                    if(t1.getText().equals("0"))
                    {
                        t1.setText("");

                    }   
                    if(str.equals("+")|| str.equals("-")||str.equals("*")||str.equals("/")||str.equals("%") )
                        {
                        a=Integer.parseInt(t1.getText());
                        t1.setText("");
                    }
                        if(str.equals("=")){
                            b=Integer.parseInt(t1.getText());

                        res=a+b;
                        t1.setText(""+res);
                        res=a-b;
                        t1.setText(""+res);
                        res=a*b;
                        t1.setText(""+res);
                        res=a/b;
                        t1.setText(""+res);
                        res=a%b;
                        t1.setText(""+res);

                        }

                }
} 
```

# jquery - 如何使用 jQuery 比较两个值？

> ID：16198404
> 
> 赞同：1
> 
> 时间：2013-04-24T17:25:09.150
> 
> 标签：jquery, html, compare

我正在尝试使用 jQuery 比较 html 表中的两个值，并在数量 > 库存时提醒用户。

我想在当前行中选择值：

## JS

```
 $('.item_quantity').change(function(){       
        var $this=$(this);        
        var quantity=$this.val();        
        // var inventory=$this.next('.item_inventory, td').text();
         var inventory=$(this).next('td, .item_inventory').text();

        console.log('quantity: ', quantity, 'inventory: ', inventory);
        if (quantity > inventory) {
          alert('Your order quantity ' + quantity + ' is greater than ' + inventory + ' inventory');
        }            
    });               
}); 
```

## HTML

```
<table >    
  <tr>         
    <td><form method=""><input class="item_quantity" type="text"  data-prodid="249" value=""/></form></td>
    <td  class="item_inventory">10</td>
    <td>Product 1</td>
  </tr>

  <tr>         
    <td><form method=""><input class="item_quantity" type="text" data-prodid="2" value=""/></form></td>
    <td class="item_inventory">7</td>
    <td>Product 2</td>
  </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T17:56:00.780

## 变化

```
var $this=$(this);        
var quantity=$this.val(); 
```

至

```
var quantity = parseInt($(this).val()); 
```

1.  您不必实例化`$this`即可访问`.val()`，
2.  您必须将值解析为一个 int，否则它是一个返回的字符串。请参阅下面的说明。

* * *

```
var inventory=$(this).next('td, .item_inventory').text(); 
```

至

```
var inventory = parseInt( $(this).closest('tr').find('.item_inventory').html()); 
```

1.  `.item_inventory`不是您的`.item_quantity`字段的直接兄弟，因此`next()`不会检索 DOM 元素。考虑找到两个元素的父元素，然后使用`find()`.
2.  您仍然必须将值解析为 int。

* * *

## 为什么是 int 而不是字符串？

两个字符串比较的结果不是您需要的：字符串比较将逐个比较两个字符串的每个字符，最后确定比较结果。

例子 ：

如果比较*'10'*和*'8'*，那么当它比较两个字符串时，它会比较两者，它会比较*'1'*和*'8'*，然后*是 '0'*和*nuts*。

在那一刻，*'1'*将比*'8'*更接近字母表的开头，然后您的测试将返回 false，无论后面的字符是什么。

有关更多详细信息，请参阅[本文](http://javascript.about.com/od/decisionmaking/a/des02.htm)。

[可用的工作小提琴](http://jsfiddle.net/bigood/eYWwy/)。

# java - 如何从类似于 eclipse 的命令行创建可运行的 jar 文件

> ID：16198409
> 
> 赞同：5
> 
> 时间：2013-04-24T17:25:17.497
> 
> 标签：java, linux, command-line, jar, executable-jar

我知道 Eclipse 会生成一个可运行的 jar 文件，其中包含提取并包含在 jar 文件中的所有库 .jar 文件。从命令提示符手动创建 jar 文件时，我该如何做类似的事情。我是否需要将所有 lib jar 提取到 classes 文件夹中？

目前我正在使用 -

```
 jar cvfm example.jar manifest.txt -C  Classes/ . 
```

这会创建一个包含所有类文件的 jar 文件，并且我需要将所有库 jar 放在与此 example.jar 存在的同一文件夹中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T17:34:32.870

jar 命令行实用程序无法执行此类操作。依赖问题有3个主要解决方案：

1.  在您的 MANIFEST.MF 中，您可以引用其他 jar 文件作为类路径的一部分，然后人们可以调用您的代码，`java -jar [just your jar]`并且您的依赖项将被拾取
2.  您可以将代码和依赖项打包到一个胖 jar 中（这就是您所描述的）。通常您只需将项目转换为使用一些构建工具（比简单的 javac 和 jar 更高级）并配置该工具。例如[与 Maven](http://maven.apache.org/)。[在此处](http://www.thekua.com/atwork/2008/10/generating-a-single-fat-jar-artifact-from-maven/)和[此处](https://code.google.com/p/maven-fatjar-plugin/)查看 2 种不同的方法
3.  （再次使用构建工具）您可以使用比胖罐更好的东西 - 使用[one-jar](http://one-jar.sourceforge.net/)。不同之处在于，使用胖 jar，您会冒着不同库中同名文件“冲突”的风险

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-02T23:36:17.317

上述答案无疑是正确的。诚然又快又脏：

将所需的 jar 文件复制到 javac 创建类文件的输出目录中。

```
cp $LIB_PATH/*.jar $TARGET_PATH
cd $TARGET_PATH
for filename in ./*.jar; do
    echo "merge library $filename to FAT jat"
    unzip "$filename"
    rm -rf META-INF
    rm "$filename"
done 
```

然后创建 jar 文件并确保包含所有必需的类：

```
jar cmf manifest.mf $TARGET_JAR_NAME com/* javax/* org/* 
```

# wordpress - wordpress 安装时出现 403 错误，但站点仍在运行

> ID：16198412
> 
> 赞同：0
> 
> 时间：2013-04-24T17:25:22.283
> 
> 标签：wordpress, apache, .htaccess, cpanel, http-status-code-403

我在网站上收到“403 Forbidden”错误，即使该网站仍然可以查看..

cPanel 错误控制台正在填满；“选项指令禁止的目录索引”我不确定这是否相关..

htaccess 文件；

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress

<IfModule mod_expires.c>

# Enable expirations
ExpiresActive On

# Default directive
ExpiresDefault "access plus 1 month"

# My favicon
ExpiresByType image/x-icon "access plus 1 year”

# Images
ExpiresByType image/gif "access plus 1 month"
ExpiresByType image/png "access plus 1 month"
ExpiresByType image/jpg "access plus 1 month"
ExpiresByType image/jpeg "access plus 1 month"

# CSS
ExpiresByType text/css "access 1 month”

# Javascript
ExpiresByType application/javascript "access plus 1 year"

</IfModule>

# compress text, html, javascript, css, xml:
AddOutputFilterByType DEFLATE text/plain
AddOutputFilterByType DEFLATE text/html
AddOutputFilterByType DEFLATE text/xml
AddOutputFilterByType DEFLATE text/css
AddOutputFilterByType DEFLATE application/xml
AddOutputFilterByType DEFLATE application/xhtml+xml
AddOutputFilterByType DEFLATE application/rss+xml
AddOutputFilterByType DEFLATE application/javascript
AddOutputFilterByType DEFLATE application/x-javascript

# Or, compress certain file types by extension:
<files *.html>
SetOutputFilter DEFLATE
</files> 
```

我已经尝试停用所有插件，但这并没有解决问题。我不知道还能去哪里看..

谢谢

# ios - 如何在 Objective-c 中检测 USB 驱动器的大小和名称

> ID：16198413
> 
> 赞同：0
> 
> 时间：2013-04-24T17:25:28.590
> 
> 标签：ios, objective-c, xcode, macos

使用 NSWorkSpace 检测到我有多少个 USB 驱动器后，我仍然想知道具体驱动器的大小和名称。如何获取这些信息？我尝试使用 NSFileSystemSize，但似乎我得到的大小不是驱动器的总大小。它可能只是该驱动器中的文件大小之一。有人知道吗？

感谢和抱歉我的英语不好，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T17:32:28.427

要获取卷大小，请获取卷路径作为 URL，然后使用`-getResourceValue:forKey:error:`with`NSURLVolumeTotalCapacityKey`作为键。

```
NSError *error;
NSNumber *volumeSize;
if([volumeURL getResourceValue:&volumeSize
                        forKey:NSURLVolumeTotalCapacityKey
                         error:&error])
{
  NSLog(@"Volume size in bytes: %@", volumeSize);
}
else
{
  /* Handle error */
} 
```

其他卷属性（包括名称）可以通过右键获取；有效密钥列表在[这里](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html)。

# c - 如何通过调用堆栈传递函数指针？

> ID：16198414
> 
> 赞同：2
> 
> 时间：2013-04-24T17:25:28.753
> 
> 标签：c

我不确定我是否有这个问题的最佳标题，请随时改进。

如果我有

```
typedef void (*VoidFunction)(void); 
```

然后是适合这种类型的一系列函数，我可以编写一种“事务”包装函数，如下所示：

```
void doTransaction(VoidFunction function)
{
    doSomePreambleWork();
    function();
    doSomePostambleWork();
} 
```

如果我有一系列接受单个 int 参数的函数，我可以清洗-冲洗-重复：

```
typedef void (*VoidOneIntFunction)(int a);
void doTransactionOneInt(VoidFunctionOneInt function, int a)
{
    doSomePreambleWork();
    function(a);
    doSomePostambleWork();
} 
```

留下返回类型的问题（iow，假设返回类型为 void），是否可以泛化这种模式，这样我只需要编写一个包装函数，例如：

```
// ????? I'm not sure how i'd type the passed function
void doTransactionGeneric(void * function, ...)
{
    doSomePreambleWork();
    function(); // ????? and i don't know how i'd go about calling it...
    doSomePostambleWork();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T17:36:37.107

如果要使用`...`称为**可变参数**的语法，则可以使用`va_list`来访问参数列表，例如：

```
#include <stdarg.h>

typedef void (*VoidArgsFunction)(va_list args);

void doTransactionGeneric(VoidArgsFunction function, ...)
{
    doSomePreambleWork();

    va_list args;
    va_start(args, function);
    function(args);
    va_end(args);

    doSomePostambleWork();
} 
```

在被调用函数内部，它可以根据需要`va_arg()`从 访问各个参数值`va_list`​​，例如：

```
#include <stdarg.h>

void someFunction(va_list args)
{
    int param1 = va_arg(args, int);
    char *param2 = va_arg(args, char*);
    ...
}

doTransactionGeneric(&somefunction, 12345, "Hello World"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T17:27:47.960

> 我不确定如何输入传递的函数

就像您在其他任何地方声明一个函数指针一样：

```
void doTransactionGeneric(void (*function)(void), ...) 
```

> 而且我不知道该怎么称呼它...

就像你已经做过的那样：

```
function(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T17:43:40.927

这是一个建议。

假设您有几个功能（如您的问题）：

```
typedef void (*VoidFunction)(void);
typedef void (*VoidFunctionOneInt)(int);
// we can add more 
```

让我们定义类型枚举（我们不必使用枚举，但这更能说明问题）：

```
typedef enum
{
   e_fn_void,     // void return, no args
   e_fn_void_int, // void return, one int
                  // we can add more...
} void_function_kind_t; 
```

然后，假设我们有一些通用处理器。我们需要提供函数的类型、函数指针和参数：

```
void some_generic_function(void_function_kind_t kind, void *fn, ...)
{
   va_list args;
   va_start(args, fn);

   // here - make a call
   switch (kind)
   {
   case e_fn_void:
        // no arguments
        ((VoidFunction)fn)();
        break;
   case e_fn_void_int:
        {
           int arg0 = va_arg(args,int);
           ((VoidFunctionOneInt)fn)(arg0);
        }
        break;
   default: // error - unsupported function type
        break;
   }

   va_end(args);
} 
```

# ruby-on-rails-3 - 如何从 Rails 3 中的控制器调用模型方法？

> ID：16198415
> 
> 赞同：0
> 
> 时间：2013-04-24T17:25:30.420
> 
> 标签：ruby-on-rails-3, model-view-controller, model, controller

在我的模型中，我有类似的东西：

```
class CML < Lead
 def model_method
  #something
 end
end 
```

在我的控制器中：

```
def recommend
    @var.model_method
    #more stuff
  end 
```

@var 是一个 CML 对象，但是我不断得到：

> 未定义的方法 `model_method' 用于#

有谁知道为什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:26:49.080

那时@var 似乎是空的

你应该使用类似的东西（选择一个）：

```
@var = Var.find params[:id]
#or
@var = Var.new
#or
@var = Var.create 
```

那么你可以打电话给你的

`@var.model_method`

# java - 在实例变量上实际使用延迟初始化

> ID：16198416
> 
> 赞同：0
> 
> 时间：2013-04-24T17:25:36.253
> 
> 标签：java

我想了解一些实际情况，在这些情况下我们需要使用实例变量的延迟初始化。对于所有线程都可以使用相同文件处理程序的场景，我已经将单例模式用于静态变量，但我不确定它可以实际使用的场景。

问候， 拉马坎特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:32:28.837

每当单例非常占用资源（内存、处理能力、带宽、网络端口等）时，您只想按需创建它，因为在从不需要单例的情况下，急切地初始化会浪费资源。

另一个原因：如果初始化单例的资源仅在实际需要单例时存在，它可以使您的系统更加健壮。例如，假设单例是一个打印假脱机程序。如果系统中当前没有打印机，则不值得分配一个试图连接到不存在的打印机的假脱机程序。由于用户不应该在系统中没有打印机的情况下请求打印，因此惰性假脱机程序提供了完全正确的行为而没有明确的逻辑。用户从不请求 pring，因此假脱机程序永远不会初始化，并且永远不会有失败的连接尝试。

延迟初始化有意义的潜在资源密集型单例的其他示例：记录器、独特的 SOA 服务、独特的通用网络服务、缓存管理器、负载平衡器、伪随机数流生成器、资源管理器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T17:31:54.680

例如，您有一个`User`关联了图像的实体，因此当您阅读用户时，您并不总是需要图像，因此请尝试在实际需要时延迟加载该图像

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T17:35:15.863

也许是模板库的模板抽象。模板用`String`s 初始化，但仅在实际请求/运行模板时才编译为快速的内部表示。

# ios - 如何在屏幕底部创建一个 UIDatePicker 并收集数据？

> ID：16198417
> 
> 赞同：0
> 
> 时间：2013-04-24T17:25:36.753
> 
> 标签：ios, objective-c, nsdate, frame, uidatepicker

这是两个问题。。

1.  如何将我的 UIDatePicker 放在页面底部？
2.  如何从选择器获取日期。

这是我添加日期选择器时的代码：

```
picker = [[UIDatePicker alloc] initWithFrame:CGRectMake(0, 0, 0, 0)];
[picker addTarget:self action:@selector(customDate:) forControlEvents:UIControlEventValueChanged];
[self.view addSubview:picker]; 
```

这是我的`customDate:`功能

```
- (void)customDate:(id)sender {

} 
```

所以……我该怎么办？我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:28:58.313

应该看起来像这样：

```
- (void) customDate:(id)sender{
    NSLocale *usLocale = [[NSLocale alloc]
        initWithLocaleIdentifier:@"en_US"];

    NSDate *pickerDate = [picker date];
    NSString *selectionString = [[NSString alloc] initWithFormat:@"%@",
         [pickerDate descriptionWithLocale:usLocale]];
    //do something with the date string
} 
```

用字符串把你需要做的事情放在那里，无论是设置标签还是其他什么。

并设置框架：

```
picker = [[UIDatePicker alloc] initWithFrame:CGRectMake(0, 250, 320, 100)]; 
```

那里的数字表示日期选择器的位置和大小，所以它是（x 位置，y 位置，宽度，高度）

# php - 带有复选框的 POST

> ID：16198418
> 
> 赞同：0
> 
> 时间：2013-04-24T17:25:40.980
> 
> 标签：php, javascript, jquery, sql

以下代码由 JQuery 1.3 组成。我怎样才能让它与最新版本一起工作：1.9.1 当单击删除链接时，我还需要它来删除选中的复选框。我想我应该为此使用 remove() 函数。

复选框是这样的：

```
<input type="checkbox" name="prog" value="C"> 
```

```
$(document).ready(function()
    {
        $("#submit_prog").click(
                function()
                {
                    var query_string = '';

                    $("input[@type='checkbox'][@name='prog']").each(
                        function()
                        {
                            if(this.checked)
                            {
                                query_string += "&prog[]=" + this.value;
                            }
                        });

                    $.ajax(
                        {
                            type: "POST",
                            url: "post_prog.php",
                            data: "id=1" + query_string,
                            success: 
                                function(t) 
                                {
                                    $("div#content").empty().append(t);
                                },
                            error:
                                function()
                                {
                                    $("div#content").append("An error occured during processing");
                                }
                         });    
                });
    }); 
```

编辑：我可以这样做以删除删除复选框：

```
function(event)
{
   if(this.checked)
    {
    query_string += "&prog[]=" + this.value;
    $(this).remove();
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T17:29:00.457

我认为这条线应该读

```
$("input[@type='checkbox'][@name='prog']") 
```

作为

```
$("input[type='checkbox'][name='prog']") 
```

更改事件处理程序的签名也是一个好主意

```
 $("#submit_prog").click(function () { 
```

至

```
 $("#submit_prog").on('click', function () { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T18:34:48.630

请注意，您只能选择`:checked`复选框以消除对`if`语句的需要。

```
$(document).ready(function() {
    $("#submit_prog").on("click", function () {
         var query_string = '';

         $("input[type='checkbox'][name='prog']:checked").each(function () {
             query_string += "&prog[]=" + this.value;
             $(this).remove();
         });

         $.ajax({
             type: "POST",
             url: "post_prog.php",
             data: "id=1" + query_string,
             success: function(t) {
                 $("div#content").empty().append(t);
             },
             error: function() {
                 $("div#content").append("An error occured during processing");
             }
         });    
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T17:42:42.843

1-从选择器中删除“@”

2- 使用 jQuery.on('click', function(){} 而不是 jQuery.click() 函数

3- 使用 jQuery 承诺函数：

```
$.ajax({
    type: "POST",
    url: "post_prog.php",
    data: "id=1" + query_string
})
    .done(function (t) {
    $("div#content").empty().append(t);
})
    .error(function () {
    $("div#content").append("An error occured during processing");
}); 
```

# sql - 在实体框架中使用正则表达式进行搜索

> ID：16198421
> 
> 赞同：3
> 
> 时间：2013-04-24T17:25:47.810
> 
> 标签：sql, entity-framework, sql-server-2008, entity-sql

我想在数据库表中搜索字符串模式。

搜索模式只是用户输入的字符串。但是，要搜索的字段之间可以有空格，或者用户可以在字符串中输入空格。

所以我想创建一个正则表达式，如果说字符串是“测试”，我会寻找可能在两者之间有空格的正则表达式，就像这样

```
T[\s]*e[\s]*s[\s]*t. 
```

任何人都可以建议我如何在实体框架中执行此操作 - 或使用 ESQL 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:20:50.473

对于该模式，您不需要正则表达式。您最好将它们修剪掉，然后进行搜索。你可以这样：

```
SELECT * FROM MyTable
WHERE REPLACE(MyColumn, ' ', '') LIKE '%' + REPLACE(@YourVariable, ' ', '') + '%' 
```

# arm - ARM 周期精确模拟器

> ID：16198424
> 
> 赞同：4
> 
> 时间：2013-04-24T17:25:48.887
> 
> 标签：arm, profiler, simulator

那里有免费且周期精确的 ARM (Cortex A9) 模拟器吗？

我认为 ARM IDE 提供了某种分析器，但首先我不确定它是否提供命令行界面，其次它不是免费的。我希望从 GNU 中找到一些东西，但我找不到任何东西......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T18:33:06.703

没有可用于最新 ARM 内核的免费周期精确模拟器。您最好的选择是购买 Cortex A9 开发板（如 Pandaboard）并将其用于性能基准测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-18T04:22:45.100

随着对 Carbon Design System 的收购，ARM 开始为其内核提供周期精确模型。与功能准确但周期不准确的快速模型相比，这些模型速度较慢。有关更多详细信息，请参阅 [http://www.arm.com/products/tools/models/cycle-models.php](http://www.arm.com/products/tools/models/cycle-models.php)

# mongodb - MongoDB：如何找出数组字段是否包含元素？

> ID：16198429
> 
> 赞同：81
> 
> 时间：2013-04-24T17:26:07.140
> 
> 标签：mongodb

我有两个系列。第一个集合包含学生：

```
{ "_id" : ObjectId("51780f796ec4051a536015cf"), "name" : "John" }
{ "_id" : ObjectId("51780f796ec4051a536015d0"), "name" : "Sam" }
{ "_id" : ObjectId("51780f796ec4051a536015d1"), "name" : "Chris" }
{ "_id" : ObjectId("51780f796ec4051a536015d2"), "name" : "Joe" } 
```

第二个集合包含课程：

```
{
        "_id" : ObjectId("51780fb5c9c41825e3e21fc4"),
        "name" : "CS 101",
        "students" : [
                ObjectId("51780f796ec4051a536015cf"),
                ObjectId("51780f796ec4051a536015d0"),
                ObjectId("51780f796ec4051a536015d2")
        ]
}
{
        "_id" : ObjectId("51780fb5c9c41825e3e21fc5"),
        "name" : "Literature",
        "students" : [
                ObjectId("51780f796ec4051a536015d0"),
                ObjectId("51780f796ec4051a536015d0"),
                ObjectId("51780f796ec4051a536015d2")
        ]
}
{
        "_id" : ObjectId("51780fb5c9c41825e3e21fc6"),
        "name" : "Physics",
        "students" : [
                ObjectId("51780f796ec4051a536015cf"),
                ObjectId("51780f796ec4051a536015d0")
        ]
} 
```

每个课程文档都包含`students`一个数组，其中包含为该课程注册的学生列表。当学生在网页上查看课程时，他需要查看他是否已经注册了该课程。为了做到这一点，当`courses`代表学生查询集合时，我们需要确定`students`数组是否已经包含学生的 ObjectId。有没有办法在查找查询的投影中指定仅当它存在时才`ObjectId`从数组中检索学生？`students`

我试图看看我是否可以使用 $elemMatch 运算符，但它适用于一系列子文档。我知道我可以使用聚合框架，但在这种情况下似乎有点过分了。聚合框架可能不会像单个查找查询那样快。有没有办法查询课程集合，以便返回的文档可以采用与此类似的形式？

```
{
        "_id" : ObjectId("51780fb5c9c41825e3e21fc4"),
        "name" : "CS 101",
        "students" : [
                ObjectId("51780f796ec4051a536015d0"),
        ]
} 
```

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-04-25T04:54:02.883

[基于此的**编辑现在可以在最近的版本中]**

【更新答案】只有在已经注册的情况下，您可以通过以下方式获取班级名称和学生ID。

```
db.student.find({},
 {_id:0, name:1, students:{$elemMatch:{$eq:ObjectId("51780f796ec4051a536015cf")}}}) 
```

你会得到你所期望的：

```
{ "name" : "CS 101", "students" : [ ObjectId("51780f796ec4051a536015cf") ] }
{ "name" : "Literature" }
{ "name" : "Physics", "students" : [ ObjectId("51780f796ec4051a536015cf") ] } 
```

[原答案] 目前无法做你想做的事。这是不幸的，因为如果学生作为对象存储在数组中，您将能够做到这一点。事实上，我对您只使用 ObjectId() 感到有点惊讶，因为如果您想显示参加特定课程的学生列表，您*总是*需要查找学生（首先查找 Id 的列表，然后再查找）在学生集合中查找名称 - 两个查询而不是一个！）

如果您在课程数组中存储（作为示例）一个 ID 和名称，如下所示：

```
{
        "_id" : ObjectId("51780fb5c9c41825e3e21fc6"),
        "name" : "Physics",
        "students" : [
                {id: ObjectId("51780f796ec4051a536015cf"), name: "John"},
                {id: ObjectId("51780f796ec4051a536015d0"), name: "Sam"}
        ]
} 
```

您的查询将只是：

```
db.course.find( { }, 
                { students : 
                    { $elemMatch : 
                       { id : ObjectId("51780f796ec4051a536015d0"), 
                         name : "Sam" 
                       } 
                    } 
                } 
); 
```

如果那个学生只注册了 CS 101，你会回来：

```
{ "name" : "Literature" }
{ "name" : "Physics" }
{
    "name" : "CS 101",
    "students" : [
        {
            "id" : ObjectId("51780f796ec4051a536015cf"),
            "name" : "John"
        }
    ]
} 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-04-24T17:31:42.003

看来[`$in`](http://docs.mongodb.org/manual/reference/operator/in/)运营商可以很好地满足您的目的。

你可以做这样的事情（伪查询）：

```
if (db.courses.find({"students" : {"$in" : [studentId]}, "course" : courseId }).count() > 0) {
  // student is enrolled in class
} 
```

或者，您可以删除该`"course" : courseId`子句并取回学生注册的所有课程的集合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-21T10:17:04.870

**我试图通过提出问题陈述和解决方案来解释。我希望它会有所帮助**

*问题陈述：*

查找所有已发布的产品，名称为 ABC 产品或 PQR 产品，价格应小于 15/-

*解决方案：*

以下是需要注意的条件

1.  产品价格应低于 15
2.  产品名称应为 ABC 产品或 PQR 产品
3.  产品应处于已发布状态。

下面是应用上述标准来创建查询和获取数据的语句。

```
$elements = $collection->find(
             Array(
                [price] => Array( [$lt] => 15 ),
                [$or] => Array(
                            [0]=>Array(
                                    [product_name]=>Array(
                                       [$in]=>Array(
                                            [0] => ABC Product,
                                            [1]=> PQR Product
                                            )
                                        )
                                    )
                                ),
                [state]=>Published
                )
            ); 
```

# ajax - Javascript编码函数和unicode

> ID：16198430
> 
> 赞同：1
> 
> 时间：2013-04-24T17:26:11.483
> 
> 标签：ajax

我使用 ASP.NET MVC 和 kendo ui 编辑器和 jquery ajax。

基本上，如果我在剑道 ui 编辑器中有一个 £ 字符，并使用 ajax 和以下代码将内容发布到服务器：

```
$.ajax({
    url: "/API/saveContent",
    data: "content=' + escape($("#textContent").data("kendoEditor").value()),
    type: "POST", dataType: 'json', async: false,
    success: function (data) {},
    error: function () { alert('ajax error'); }
}); 
```

我最终在服务器上得到的是一个 ? 字符而不是 £。

html 页面是 UTF-8，因此对服务器的 ajax 调用是 unicode 并且 javascript 转义函数不是以 unicode 方式工作，它只是使用扩展的 ascii 字符集并将 £ 编码为：%A3

javascript中有没有办法用unicode完成这个转义功能，我想我想最终得到：%C2%A3（我通过有一个UTF-8 html页面来解决这个问题，并将£放在一个文本框中并提交形式和提琴手它表明这是帖子请求正文中的内容）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:36:17.690

你应该使用`encodeURIComponent`而不是`escape`

```
data: "content=" + encodeURIComponent($("#textContent").data("kendoEditor").value()), 
```

# android - 矩形交点计算的 Minkowski 和

> ID：16198437
> 
> 赞同：1
> 
> 时间：2013-04-24T17:26:30.033
> 
> 标签：android, algorithm, sprite, collision-detection, collision

我一直在研究确定 2 个矩形相交位置的最佳方法，并一直在研究使用 Minkowski 和。

如果有人能解释如何使用 Minkowski 和来确定 2 个矩形何时何地（即哪个边）碰撞，我将不胜感激。

我已经阅读了很多关于此的内容，但我不确定如何正确实现这一点。

谢谢

代码是：

```
float w = 0.5 * (A.width() + B.width());
float h = 0.5 * (A.height() + B.height());
float dx = A.centerX() - B.centerX();
float dy = A.centerY() - B.centerY();

if (abs(dx) <= w && abs(dy) <= h)
{
/* collision! */
float wy = w * dy;
float hx = h * dx;

if (wy > hx)
    if (wy > -hx)
        /* collision at the top */
    else
        /* on the left */
else
    if (wy > -hx)
        /* on the right */
    else
        /* at the bottom */
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T06:16:01.950

如果您的矩形是轴对齐的，那么有一个简单的方法：

矩形 A 和 B**不**相交，如果

```
(A.Left > B.Right) or 
(A.Right < B.Left) or 
(A.Top < B.Bottom) or 
(A.Bottom > B.Top) 
```

否则会发生碰撞。

如果您的矩形不是轴对齐的，那么您可以使用有效的[分离轴算法](http://www.geometrictools.com/Documentation/MethodOfSeparatingAxes.pdf)

**编辑：**使用 Minkowski 和的动态碰撞：

让我们有移动矩形 A 和站立矩形 B。让我们 A 的速度向量是 (vx, vy)。我们想找到第一次碰撞的时刻并确定哪些边缘相互接触。

首先，将A矩形缩小到中心相同的点，将B.Width对称地扩大A.Width，将B.Height扩大A.Height（Minkowski求和）。现在我们必须找到直线（射线）与矩形的交点。 ![在此处输入图像描述](https://i.stack.imgur.com/JP5q9.png)

有一些方法，例如，我们可以使用[Liang-Barsky 线裁剪算法](http://www.skytopia.com/project/articles/compsci/clipping.html)。请注意，我们不必检查所有交叉点，因为我们只需要第一次碰撞 - 如果 vx >=0，检查与左边缘的交叉点并忘记右边缘等等......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-20T05:47:28.720

我迟到了 7 年，但我想我会分享一些“几何外行”的直觉，我在这几个小时里摸不着头脑。

附件是涉及该算法的问题的一些注释，我通过这些注释帮助我理解值之间的关系。（希望为我的回复附上注释不会太违反 Stack Overflow 的政策）

[![第 1 页](https://i.stack.imgur.com/1d7NE.png)](https://i.stack.imgur.com/1d7NE.png)

[![第2页](https://i.stack.imgur.com/CrJZQ.png)](https://i.stack.imgur.com/CrJZQ.png)

# android - ADT Bundle for mac 已损坏

> ID：16198438
> 
> 赞同：8
> 
> 时间：2013-04-24T17:26:33.377
> 
> 标签：android, eclipse, macos, adt

我下载了[ADT Bundle for mac](http://developer.android.com/sdk/index.html)并将其保存在`/development`. 当我尝试打开 Eclipse 时，我的 mac 显示`"Eclipse" is damaged and can't be opened. You should move it to the Trash`. 我把整个东西都扔了，然后再次尝试下载，我得到了同样的错误。有谁知道解决这个问题？我的 Mac 是 osx 10.8.3 处理器 3.1 GHz Intel Core i5。

`/Application`仅供参考：我在执行上述操作之前删除了一个旧的 eclipse 文件夹。较旧的已删除 juno eclipse（版本：Juno Service Release 2）是否会造成一些干扰？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-07-14T16:30:17.290

此错误与应用程序和[Gatekeeper](http://support.apple.com/kb/ht5290)的签名有关。

> “损坏”的应用程序。– 该应用程序已被开发人员以外的其他人更改。

[Eclipse Bugzilla](https://bugs.eclipse.org/bugs/show_bug.cgi?id=398450)中也报告了该错误

一个简单的修复（如上述错误报告中的 #2 评论所建议）是暂时禁用 Gatekeeper。访问系统偏好设置 > 安全和隐私 > 在“允许从以下位置下载应用程序”中选择“任何地方”。现在运行应用程序，您可以再次启用 Gatekeeper。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-07T23:57:18.000

我在[这里](https://bugs.eclipse.org/bugs/show_bug.cgi?id=398450)找到了一种解决方法，在命令行中转到包含 Elicpse.app 目录的目录并执行

```
xattr -d com.apple.quarantine Eclipse.app/ 
```

问题似乎无论如何都没有解决

# c++ - 通过 std::shared_ptr 强制执行对象

> ID：16198441
> 
> 赞同：0
> 
> 时间：2013-04-24T17:26:40.713
> 
> 标签：c++, c++11

我有一个设计问题。在我的应用程序中，我有几个类要使用`std::shared_ptr`. 我们想要强制这些类应该由我们`std::shared_ptr`唯一的创建。因此，我们考虑做类似的事情：

```
template <typename T>
class make_sharable_only
{
    make_sharable_only();
    ~make_sharable_only();

public:
    template <typename ...Args>
    static std::shared_ptr<T> CreateShareInstance(Args ...args)
    {
        std::shared_ptr<T> ptr;
        ptr.reset(new T(args...));

        return ptr;
    }

};
    class A: public make_sharable_only<A>
    {

    };

void f()
{
    auto aPtr = A::CreateShareInstance();
} 
```

但是，问题是甚`CreateShareInstance`至无法创建 A 的实例。我不想创建`friend`关系。有没有办法为此目的定义这样的基类？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T17:43:47.923

> 我不想建立`friend`关系。

为什么不？为什么拒绝一个可行的解决方案？

如果您希望某个其他类对私有/受保护成员具有特殊访问权限，那么它需要从您的类派生（不是您的类的基础），或者它需要是您的类的朋友。

我假设您打算在`A`.

还有这个：

```
 std::shared_ptr<T> ptr;
    ptr.reset(new T(args...));

    return ptr; 
```

应该：

```
 return make_shared<T>(std::forward<Args>(args)...); 
```

一旦你这样写，它就非常简单，没有理由尝试使用基类，只需在 上放置一个工厂函数`A`，只需要三行代码（四行使其成为模板）：

```
class A {
  A() = default;
public:
  static std::shared_ptr<A> create() {
    return std::make_shared<A>();
  }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T04:50:54.870

您无法实例化`shared_ptr<make_sharable_only>`，因为`make_sharable_only::~make_sharable_only`它是私有的。您可以将构造函数保留为私有并将析构函数设为公开（好吧，有人可以删除从 shared_ptr 获得的原始指针，但不太可能意外这样做）。

# sharepoint - 如何安排共享点工作流的执行

> ID：16198442
> 
> 赞同：3
> 
> 时间：2013-04-24T17:26:42.867
> 
> 标签：sharepoint, sharepoint-2013

Sharepoint 2013 是否为工作流调度提供本机解决方案？

我知道**HarePoint Workflow Scheduler**作为替代解决方案，但我想知道新的 Sharepoint 2013 功能是否包含此功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-15T20:19:07.023

您可以使用任务计划工具（例如 SQL Server 代理或 Windows 任务计划程序）并让其执行启动工作流的 PowerShell 脚本。

这是一个例子：[http ://www.thesysadminhimself.com/2013/09/sharepoint-start-workflow-all-items-powershell.html](http://www.thesysadminhimself.com/2013/09/sharepoint-start-workflow-all-items-powershell.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-10T17:26:29.783

[我的团队开发的SharePoint Workflow Scheduler](http://plumsail.com/workflow-scheduler/)支持 SharePoint 2013 工作流以及 SharePoint 2010 工作流。

它具有友好的调度界面，另外还支持 cron 语法来创建极其复杂的调度。

请参阅文档：

*   [如何安排工作流程](http://plumsail.com/workflow-scheduler/docs/schedule-workflow/)
*   [如何使用*cron*语法创建高级计划](http://plumsail.com/workflow-scheduler/docs/advanced-schedule-cron-syntax/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T06:49:06.367

据我所知，SharePoint 2013 没有用于工作流调度的本机解决方案。但是，从我的脑海中，我可以建议以下方法：

1.  创建一个 SharePoint 计时器作业，它将根据您提供的计划触发您的工作流。
2.  使用工作流服务创建控制台应用程序以手动触发工作流。完成此操作后，根据您希望它运行的计划设置计划任务。
3.  [此处](http://sharepointgypsy.blogspot.com/2011/01/sharepoint-designer-workflows-3.html)显示的博客文章演示了如何让工作流每天运行一次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-10T22:50:13.610

您可以使用权限和管理的信息管理策略设置中的过期策略。这将允许您设置定时、重复的工作流程。不确定这是您要设置的工作流类型。我在这里找到了信息：http: [//blogs.askcts.com/2013/05/14/creating-a-timed-workflow-in-sharepoint-2010/](http://blogs.askcts.com/2013/05/14/creating-a-timed-workflow-in-sharepoint-2010/)

它回答了 Sharepoint 2010 的问题，但也适用于 Sharepoint 2013

# jquery - 如何在我的内容左下角设置浮动 div？

> ID：16198444
> 
> 赞同：5
> 
> 时间：2013-04-24T17:26:47.460
> 
> 标签：jquery, css

我希望能够在我的内容的左下角放置一个 div（就像这个线框上的 div n°2 一样）。

诀窍是我想这样做而不必手动将其插入“内容”div中。

（上下文：我有 500 多个 wordpress 帖子我想这样做，而手动插入解决方案似乎很痛苦并且充其量是近似的）。

我尝试使用 position:absolute;bottom:0px; 但如果我这样做，div 2 会在我的内容之上并掩盖我的一些文本内容。

关于如何将 div2 的底部与内容的确切底部对齐的任何线索？用 Jquery 可能吗？

这是我的 HTML 代码的概述。

```
<div class="contenu">
    <div id="1"><img class="ad_300x250" style="float:left; margin:0 10px 0 0;" src="300x250_3.jpg" /></div>
    <div id="2"><img class="ad_300x250" src="300x250_3.jpg" /></div>
    <p>Loin, très loin, au delà des monts Mots, à mille lieues des pays Voyellie et Consonnia, demeurent les Bolos Bolos. Ils vivent en retrait, à Bourg-en-Lettres, sur les côtes de la Sémantique, un vaste océan de langues.</p>
            <p>Un petit ruisseau, du nom de Larousse, coule en leur lieu et les approvisionne en règlalades nécessaires en tout genre; un pays paradisiagmatique, dans lequel des pans entiers de phrases prémâchées vous volent litéralement tout cuit dans la bouche. Pas même la toute puissante Ponctuation ne régit les Bolos Bolos - une vie on ne peut moins orthodoxographique.</p>
            <h2>Titre 2 </h2>
            <p>Un jour pourtant, une petite ligne de Bolo Bolo du nom de Lorem Ipsum décida de s'aventurer dans la vaste Grammaire.</p>
            <h3>Titre 3 </h3>
            <p>Le grand Oxymore voulut l'en dissuader, le prevenant que là-bas cela fourmillait de vils Virgulos, de sauvages </p>
            <h2>Titre 2 </h2>
            <p>Pointdexclamators et de sournois Semicolons qui l'attendraient pour sûr au prochain paragraphe, mais ces mots ne firent écho dans </p>
            <ul>
                <li>
                    l'oreille du petit Bolo
                </li>
                <li>
                    qui ne se laissa point déconcerter.
                </li>
                <li>
                    Il pacqua ses 12 lettrines, glissa son initiale dans sa panse et se mit en route.
                </li>
            </ul>
            <p>Alors qu'il avait gravi les premiers flancs de la chaîne des monts Italiques, il jeta un dernier regard sur la skyline de Bourg-en-Lettres, sa ville alphanatale, la headline d'Alphabetville, la subline de sa propre rue, le passage Motus. Le coeur lourd et nostalgique, une question rhétorique lui coula le long de la joue, puis, il se remit en route. </p>
            <p>En chemin, il rencontra un Copy. Le Copy prévint le petit Bolo que là d'où il venait, il avait déjà maintes et maintes fois été ressaisi, et que tout ce qui désormais restait de leurs origines était le mot "et", et que le petit Bolo ferait bien de se raviser, rebrousser chemin et retourner en son sain et sauf bercail. Mais toutes bonnes</p>

            <p>Alors qu'il avait gravi les premiers flancs de la cha&icirc;ne des monts Italiques, il jeta un dernier regard sur la skyline de Bourg-en-Lettres, sa ville alphanatale, la headline d'Alphabetville, la subline de sa propre rue, le passage Motus. Le coeur lourd et nostalgique, une question rh&eacute;torique lui coula le long de la joue, puis, il se remit en route.</p>
        </div> 
```

![在此处输入图像描述](https://i.stack.imgur.com/SmRge.jpg)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T17:34:25.650

只需使用 float: left 与 div1 完全相同，但将 div2 放在最后一段文本之前。

所以...

```
<div class="wrapper">
   <div class="left1">
   <!-- DIV 1 -->
   </div>

   <p>Paragraph 1</p>

   <!-- more in the middle -->

   <p>Paragraph 5</p>

   <div class="left2">
   <!-- DIV 2 -->
   </div>

   <p>Paragraph 6</p>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T18:46:40.100

**使用 CSS 规则修复**

针对您的评论：

> `context : 我有 500 多个 wordpress 帖子我想这样做，而手动插入解决方案似乎很痛苦，充其量是近似的

您可以结合使用伪元素和第 n 个子选择器（请检查完整的浏览器支持）

唯一要解决的问题是，一个非常大的结尾段落会从底部留出一条或多条线。我想这不是什么大问题。

无论如何，使用这个伪你将能够找到你的第二个 div，而 css 忘记了标记。您可以将**img**标签或背景用于我所说的图像目的：之前，因此图像将被最后一段的文本包裹。在我的示例中，我使用了颜色背景和固定大小来查看伪元素

```
.contenu p:nth-last-child(1):before {
    content:" ";   /* Or the image */
    display:block;
    width:200px;
    height:100px;
    background:#ff0000;  /* or the image */
    float:left;

} 
```

See a fiddle [here](http://jsfiddle.net/FMzKx/) 当然 div id ="2" 不再需要。

**顺便说一句，重要的是：** 并非所有解析器都会对以数字开头的 id 感到满意！

# c# - 为什么它给我相同的输出？

> ID：16198447
> 
> 赞同：1
> 
> 时间：2013-04-24T17:26:55.487
> 
> 标签：c#, linq

首先运行以下代码

```
var list = new List<int> {1, 5, 0, 65, 2, 1, 0, 10};

            var ordered = list.OrderBy(i => ++i);

            foreach (var i in ordered)
            {
                Console.WriteLine(i);
            } 
```

输出：0 0 1 1 2 5 10 65

然后，

```
var list = new List<int> {1, 5, 0, 65, 2, 1, 0, 10};

            var ordered = list.OrderBy(i => --i);

            foreach (var i in ordered)
            {
                Console.WriteLine(i);
            } 
```

输出：和之前一样

我的问题是为什么会这样？？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-24T17:27:58.540

> 我的问题是为什么会这样？？

您的第二种形式实际上与以下内容相同：

```
var ordered = list.OrderBy(i => i - 1); 
```

...这不会改变顺序，除非你有一个`Int32.MinValue`.

*您在 lambda 表达式中更改参数*值的事实是无关紧要的——该参数值在之后被有效地丢弃。它不会改变序列中的值。如果你想要 -1 -1 0 0 1 4 9 64 的输出，那么你应该使用：

```
var ordered = list.Select(i => i - 1).OrderBy(i => i); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T17:29:11.577

您示例中的变量`i`不是列表中项目的别名，它实际上是列表中该项目的值的*副本*。改变该副本不会改变序列本身中的项目。

请注意，按照设计，LINQ 操作应避免对它们所采用的委托造成副作用。它们是为*查询*序列而设计的，因此它们不应该改变序列本身。LINQ 编程“风格”会说您应该创建一个新序列，该序列基于您拥有的列表，但每个项目都略有更改。这称为“投影”，使用以下`Select`方法完成：

```
var newList = list.Select(i => i + 1)
    .OrderBy(i => i); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T17:37:47.093

也许您希望按负值对所有内容进行排序（有效地反转排序）？在这种情况下，您可以使用`OrderByDescending`：

```
var list = new List<int> {1, 5, 0, 65, 2, 1, 0, 10};

var ordered = list.OrderBy(i => i);

foreach (var i in ordered)
{
    Console.WriteLine(i);
} 
```

输出：0 0 1 1 2 5 10 65

```
var list = new List<int> {1, 5, 0, 65, 2, 1, 0, 10};

var ordered = list.OrderByDescending(i => i);

foreach (var i in ordered)
{
    Console.WriteLine(i);
} 
```

输出：65 10 5 2 1 1 0 0

`++`并将`--`变量的值分别更改为正或负 1。它们不会改变变量的符号。

```
int x = 5;
--x; 
```

执行上述操作后， 的`x`值为`4`。

# chef-infra - 在流浪厨师独奏食谱中覆盖主机名

> ID：16198448
> 
> 赞同：1
> 
> 时间：2013-04-24T17:27:00.707
> 
> 标签：chef-infra, vagrant

编写我的第一个流浪厨师独奏食谱时，我想到了一些简单的事情，比如更改主机名。在流浪文件中，我有这个；

```
 config.vm.provision :chef_solo do |chef|
    chef.cookbooks_path = "../../chef/cookbooks"
    chef.roles_path = "../../chef/roles"
    chef.data_bags_path = "../../chef/data_bags"

    chef.json = { :hostname => "foofoo" }
    chef.add_recipe "myrecipe" 
```

在 myrecipes/recipes/default.rb 中；

```
myvar = node[:hostname]

template "/tmp/myfile" do
    source "myfile.erb"
    owner "root"
    group "root"
    mode 0644
    variables(
        :myvar => myvar
    )
end 
```

在 myrecipe/templates/default/myfile.erb 中；

```
<%= @myvar %> 
```

这实际上是行不通的。/tmp/myfile 一直以 /etc/hostname 中的真实主机名结尾。敲了半天头后，我发现了这些变化；

在流浪文件中；

```
chef.json = { :myhostname => "foofoo" } 
```

在配方文件中；

```
myvar = node[:myhostname] 
```

所以，似乎 ':hostname' 在某种程度上是特殊的，但尽我所能，我找不到任何解释原因或如何覆盖它的文档，或者可能有哪些其他“特殊”值可用。

大多数文档似乎都假设我还没有达到某种程度的能力。所以，我可能已经看到了答案，但没有认出来。谁能指出我可以解释这一点的“绝对初学者”文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:23:28.537

第一：这也是我对 chef-solo 的第一次实验，并且：更改主机名**并不是**最简单的事情（因为其余的 Chef 运行旧主机名仍然存在，所以你必须做一些丑陋的事情来重新启动 Chef 等...) ;-)

第二：`node['hostname']`确实很特别（它是一个所谓的[自动属性），它通过](http://docs.opscode.com/ohai_automatic_attributes.html)[ohai](http://docs.opscode.com/ohai.html)从目标主机更新，因此您可以在模板中使用它，例如。

编辑：您可以使用[此食谱](https://github.com/franco/chef-hostname)来应用主机名。

# android - Titanium 无法构建或模拟 android 应用程序

> ID：16198454
> 
> 赞同：3
> 
> 时间：2013-04-24T17:27:13.760
> 
> 标签：android, android-emulator, titanium, titanium-mobile

我刚刚安装并配置了 Titanium Studio，它是开发我的 Android 应用程序的依赖项，但没有一个应用程序，即使是钛的示例应用程序也不会在模拟器中启动。
我可以`Mobile Web Preview`在浏览器中看到，但是当我尝试时，我`Android Emulator`在控制台中收到以下错误：

```
[INFO] Force including all modules...
[INFO] Compiling Javascript Resources ...
[INFO] Compiling localization files
[ERROR] error: more than one emulator
[ERROR] Exception occured while building Android project:
[ERROR] Traceback (most recent call last):
[ERROR]   File "C:\Users\Administrator\AppData\Roaming\Titanium\mobilesdk\win32\3.1.0.GA\android\builder.py", line 2528, in <module>
[ERROR]     builder.build_and_run(False, avd_id, debugger_host=debugger_host, profiler_host=profiler_host)
[ERROR]   File "C:\Users\Administrator\AppData\Roaming\Titanium\mobilesdk\win32\3.1.0.GA\android\builder.py", line 2285, in build_and_run
[ERROR]     self.push_deploy_json()
[ERROR]   File "C:\Users\Administrator\AppData\Roaming\Titanium\mobilesdk\win32\3.1.0.GA\android\builder.py", line 1954, in push_deploy_json
[ERROR]     sdcard_available = self.wait_for_sdcard()
[ERROR]   File "C:\Users\Administrator\AppData\Roaming\Titanium\mobilesdk\win32\3.1.0.GA\android\builder.py", line 1907, in wait_for_sdcard
[ERROR]     if 'SDCARD READY' in output:
[ERROR] TypeError: argument of type 'NoneType' is not iterable
[ERROR] :  Build process exited with code 1
[ERROR] :  Project failed to build after 33s 353ms 
```

Android 模拟器打开，一切看起来都找到了，但我的应用程序无法构建。

我找到[了这个页面](https://wiki.appcelerator.org/display/tis/Errors+Building+Titanium+Projects#ErrorsBuildingTitaniumProjects-Builderrorinconsoleoutput)并复制了编译命令并像这样手动运行它：

```
python "c:\Users\Administrator\AppData\Roaming\npm\titanium.CMD" "--no-colors" "--no-prompt" "build" "--platform" "android" "--sdk" "3.1.0.GA" "--log-level" "trace" "--target" "emulator" "--android-sdk" "C:\Users\Administrator\Desktop\adt-bundle-windows-x86_64-20130219\sdk" "--avd-id" "2" "--avd-abi" "armeabi" "--avd-skin" "HVGA" "--skip-js-minify" 
```

但是python给了我这个错误：

```
File "c:\Users\Administrator\AppData\Roaming\npm\titanium.CMD", line 1
:: Created by npm, please don't edit manually.
^
SyntaxError: invalid syntax 
```

我究竟做错了什么？问题在哪里？

**附加信息：**
我在 Windows Server 2008 R2 上使用最新版本的 Titanium Studio（内部版本：3.1.0.201304151600）；
我的系统上安装了`node.js`, `npm`, `node.acs`,`python`并且环境变量正确且有效；
我有两个版本`android-2.2`的Android SDK。`android-17`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-27T12:45:09.233

经过数小时的搜索和寻找太多没有答案的类似问题，我自己修复了它。
对于从`[ERROR] error: more than one emulator`Titanium Studio 开始遇到错误的每个人，问题可能是由于以下原因之一：

*   您有一台连接到计算机的 Android 设备
*   你有一个像**BlueStacks**这样的 Android 模拟器应用程序。

我的错误是因为 BlueStacks 在后台运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-08T13:54:19.403

# 答案 1：

似乎构建工具已通过最新的 Android SDK 更新移动到另一个目录。在 /Applications/Android-sdk/platform-tools 中创建了指向 aapt 和 dx 的符号链接：

```
ln -s /Applications/Android-sdk/build-tools/17.0.0/aapt aapt ln -s /Applications/Android-sdk/build-tools/17.0.0/dx dx 
```

这为我解决了这个问题（在挖掘了他们的 Python 代码之后）。

# 答案 2：

我在 Windows 上，所以我使用了 mklink。我必须添加一个指向 lib/dx.jar 的链接才能正常工作。我首先将文件夹“lib”添加到平台工具文件夹，然后在命令行中添加：

```
cd %YOUR_ANDROID_DIR%\platform-tools    
mklink aapt.exe ..\build-tools\android-4.2.2\aapt.exe
mklink dx.bat ..\build-tools\android-4.2.2\dx.bat      
cd lib                              
mklink dx.bat ..\..\build-tools\android-4.2.2\lib\dx.jar 
```

# 答案 3：

我复制了以下文件：

```
C:\Android\build-tools\17.0.0\aapt.exe to C:\Android\platform-tools\aapt.exe
C:\Android\build-tools\17.0.0\dx.bat  to  C:\Android\platform-tools\dx.bat
C:\Android\build-tools\17.0.0\lib  to  C:\Android\platform-tools\lib 
```

然后我清理了项目并重建，现在一切正常。

来源：http: [//developer.appcelerator.com/question/152497/titanium-sdk-310-error-typeerror-argument-of-type-nonetype-is-not-iterable-on-building-android-app#comment -175782](http://developer.appcelerator.com/question/152497/titanium-sdk-310-error-typeerror-argument-of-type-nonetype-is-not-iterable-on-building-android-app#comment-175782)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T20:48:35.350

虽然它应该是一个评论，但想回答它。

1.  您是否删除了构建文件夹并尝试重新部署。
2.  尝试在以前版本的钛sdk中编译？如果你尝试过，你是否得到同样的错误。

**如果这些都不起作用，请尝试...**

1.  尝试从 android sdk 安装平台工具。
2.  还要在命令行中检查您的 JDK 版本，有时这可能很疯狂，因为您的环境变量可能完全指向不同的 JDK 路径，而您可能没有在 Titanium 中使用。

# javascript - 在图像悬停时显示文本

> ID：16198458
> 
> 赞同：0
> 
> 时间：2013-04-24T17:27:20.023
> 
> 标签：javascript, jquery

我试图在将鼠标悬停在放置在 div ( `#web01`) 中的图像上时显示图像描述。

我一直在玩弄`mouseenter`/`mouseleave`并且能够显示文本，但是当我将它链接到 div 时，它似乎不起作用。

这可能很容易，但我看不出我做错了什么。

```
$(document).ready(function () {
    $("#web01").mouseenter(function () {
        $("#titel").html('<p class="titel">description</p>');
    });
    $("#web01").mouseleave(function () {
        $("#titel").html('<p class="titel"></p>');
    });
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:31:46.797

我认为你需要这样的东西：

[http://jqueryui.com/tooltip/](http://jqueryui.com/tooltip/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T17:31:59.643

假设您打算命名您的元素`title1`而不是`titel1`（拼写错误），只需更改 id 即可`title1`解决问题。我在下面给出了一个工作示例。

# [工作示例](http://jsfiddle.net/4zfBy/9/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T17:31:18.097

`<div id="web01" title="myTitle">...</div>`或`<img src="..." title="myTitle"/>`将显示本机浏览器标题（工具提示）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T17:34:06.143

在[http://api.jquery.com/mouseenter/](http://api.jquery.com/mouseenter/)的示例中，我看到他们在函数中使用了**这个**。

```
$(document).ready(function(){
 $("#web01").mouseenter(function(){
  $("#titel",this).html('description'); 
 });

 $("#web01").mouseleave(function() { 
  $("#titel",this).html(''); 
 });
}); 
```

# php - JS传变量给.php，php根据变量返回，javascript显示，使用AJAX，用bind('input', function()触发

> ID：16198468
> 
> 赞同：0
> 
> 时间：2013-04-24T17:27:51.107
> 
> 标签：php, javascript, ajax

我正在尝试使表单自动填充一些输入字段 onchange，我似乎无法弄清楚如何将#url 字段发送到我的 php 脚本，非常欢迎任何输入或建议。

```
$('#url').bind('input', function () {}); 
```

在 keychange 上将输入 id $url 的值发送到 ajax.php

这将以该值运行

```
$query = "SELECT * FROM `inserted_posts` WHERE `search_name` = '$url'"; 
```

结果回显

```
echo json_encode($array); 
```

然后显示在其他输入字段中

```
 $.ajax({
            url: 'ajax.php',   
            data: "", 

            dataType: 'json', //data format      
            success: function (data) //on recieve of reply
            {
                var catagoryPHP = data[1]; 
                var imageNamePHP = data[3];

                $('#catagory').html(catagoryPHP);
                $('#imageName').html(imageNamePHP);
            }
            }); 
```

我似乎无法弄清楚如何将 $URL 发送到 ajax.php 并启动​​事件链？

我所有的代码

JS：

```
$(function () {
$('#url').bind('input', function () {
    $(this).val() // get  value

    $(function () {
        //-----------------------------------------------------------------------
        // 2) Send a http request with AJAX http://api.jquery.com/jQuery.ajax/
        //-----------------------------------------------------------------------
        $.ajax({
            url: 'ajax.php', //the script to call to get data          
            data: "", //you can insert url argumnets here to pass to api.php
            //for example "id=5&parent=6"
            dataType: 'json', //data format      
            success: function (data) //on recieve of reply
            {
                var catagoryPHP = data[1]; 
                var imageNamePHP = data[3];

                //--------------------------------------------------------------------
                // 3) Update html content
                //--------------------------------------------------------------------
                $('#catagory').html(catagoryPHP);
                $('#imageName').html(imageNamePHP);

            }
        });
    });
});
}); 
```

ajax.php

```
<?php
require_once ('DBconnect.php');

$query = "SELECT * FROM `inserted_posts` WHERE `search_name` = '$url'";
$result = mysql_query($query);

$array = mysql_fetch_array($result);

echo json_encode($array);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:33:11.120

```
 $.ajax({
        type: 'POST', // Can be 'GET'
        url: 'ajax.php',      
        data: { url: $('#url').val() },         
        success: function (data) //on recieve of reply
        {
            /* Your code to execute on success of the request */
        }
    }); 
```

#url 将在您的 php 脚本中作为 $_POST['url'] 或 $_GET['url'] 访问，具体取决于您`type`为请求输入的类型。

请记住使用准备好的语句或`mysqli_escape_string()`函数来清理所有用户输入。

# windows - 在 Visual Studio 调试器退出时执行代码

> ID：16198476
> 
> 赞同：0
> 
> 时间：2013-04-24T17:28:24.930
> 
> 标签：windows, visual-studio, winapi, visual-studio-debugging

我有一个外部输入设备，我需要在可执行退出时关闭它。

当 Visual Studio 调试器退出时，有没有办法在 C 中执行代码，以便我可以关闭设备？

# ios - iOS 自动释放池块

> ID：16198477
> 
> 赞同：17
> 
> 时间：2013-04-24T17:28:25.040
> 
> 标签：ios, memory-management, objective-c-blocks, autorelease, nsautoreleasepool

当我要**自动释放池块**时，我正在阅读苹果关于内存管理的文档，这让我开始思考。

```
 Any object sent an autorelease message inside the autorelease pool block is  
 released at the end of the block. 
```

我不确定我是否完全理解这一点。无论如何，在自动释放池块中创建的任何对象都会在块的末尾释放，因为那是它的生命周期。当对象到达块的末尾时无论如何都会被释放，为什么你需要调用自动释放对象呢？

为了更清楚，我将举例说明我的想法：

```
 @autoreleasepool {

    MyObject *obj = [[MyObject alloc] init]; // no autorelease call here

    /* use the object*/
   //....
   // in the end it should get deallocated because it's lifespan ends, right?
   // so why do we need to call autorelease then?!
  } 
```

**PS：**请不要告诉我因为ARC我们不需要做一些事情，因为ARC会照顾它们。我完全意识到这一点，但我想暂时将 ARC 放在一边，以了解内存管理的机制。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-24T17:38:58.660

Autorelease 只是从对象中删除一个保留计数，它不会像在 c 中那样立即“释放”内存。当自动释放池结束时，所有计数为 0 的自动释放对象都将释放其内存。

有时你会创建很多对象。一个例子是一个循环，它每次迭代并将新数据添加到字符串时都会创建新字符串。您可能不需要以前版本的字符串，并希望释放那些使用的内存。您可以通过显式使用自动释放池来完成此操作，而不是等待它自然完成。

```
//Note: answers are psudocode

//Non Arc Env
@autoreleasepool 
{

    MyObject *obj = [[MyObject alloc] init]; // no autorelease call here
    //Since MyObject is never released its a leak even when the pool exits

}
//Non Arc Env
@autoreleasepool 
{

    MyObject *obj = [[[MyObject alloc] init] autorelease]; 
    //Memory is freed once the block ends

}
// Arc Env
@autoreleasepool 
{

    MyObject *obj = [[MyObject alloc] init]; 
    //No need to do anything once the obj variable is out of scope there are no strong pointers so the memory will free

}

// Arc Env
MyObject *obj //strong pointer from elsewhere in scope
@autoreleasepool 
{

    obj = [[MyObject alloc] init]; 
    //Not freed still has a strong pointer 

} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-24T18:00:09.413

（主要只是提供一些额外的背景知识；@ Kibitz503 让您找到正确的答案。）

```
@autoreleasepool {

  MyObject *obj = [[MyObject alloc] init]; // no autorelease call here

  /* use the object*/
  //....
  // in the end it should get deallocated because it's lifespan ends, right?
  // so why do we need to call autorelease then?!
} 
```

> PS：请不要告诉我因为ARC我们不需要做一些事情，因为ARC会照顾它们。我完全意识到这一点，但我想暂时将 ARC 放在一边，以了解内存管理的机制。

好的，我们不考虑ARC。在上面，如果没有 ARC，`obj`就不会被释放。只是因为 ARC 添加了额外的`release`调用，*才可*能被释放（以您的示例为例，我们实际上不知道，因为我们不知道 中发生了什么`use the object`）。

正如@Kibitz503 解释的那样，“释放”并不意味着“解除分配”。在块结束时，自动释放池耗尽，这意味着任何挂起`autorelease`的调用都将`release`在块结束时发送。如果这导致对象达到 0 保留计数，则将其释放。

但是无论上面是否在一个块中，没有 ARC 都是泄漏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-19T07:28:19.093

自动释放池将对象的释放推迟到池的末尾，这避免了它在到达末尾之前被释放的可能性。所以基本上，就是要确保对象在池结束之前不会被释放。

# forms - frm-92095 9n 表单生成器 V10

> ID：16198478
> 
> 赞同：0
> 
> 时间：2013-04-24T17:28:39.363
> 
> 标签：forms, oracle

操作系统是 WIN 7 64 位

我在运行表单时遇到问题。我收到消息 FRM-92095 Oracle Jinitiator version too low。

我尝试了两件事，但仍然无法正常工作： 1- 我将此参数添加到 java :-Djava.vendor="Sun Microsystems Inc."

2- 在运行时，应用服务器 url：http://:8889/forms/frmservlet?config=jpi

有没有人对此有想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T13:36:51.860

适用于以下环境的解决方案：

*   Windows 7 家庭高级版 64 位
*   Oracle 表单（32 位）10.1.2.0.2
*   Opera 浏览器 12.14 64 位

是：

*   设置 Windows 7 系统环境变量 JAVA_TOOL_OPTIONS=-Djava.vendor="Sun Microsystems Inc."

另请注意，对于此环境，无需为 java.util.xml 设置参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T20:52:15.247

你看过[http://oracleformsinfo.wordpress.com/2012/06/17/frm-92095-oracle-jinitiator-version-too-low-disable-jre-1-7-auto-update-for-all- e-business-suite-and-oracle-forms-end-users/](http://oracleformsinfo.wordpress.com/2012/06/17/frm-92095-oracle-jinitiator-version-too-low-disable-jre-1-7-auto-update-for-all-e-business-suite-and-oracle-forms-end-users/)

它告诉您如何为 Windows 7 安装

# meteor - 在 Meteor 中使用 Stripe 支付表单

> ID：16198480
> 
> 赞同：5
> 
> 时间：2013-04-24T17:28:43.057
> 
> 标签：meteor, stripe-payments

我正在尝试在 Meteor 中使用 Strip Payment Form：

放置 Stripe 表单时：

```
<form action="" method="POST">
 <script
   src="https://checkout.stripe.com/v2/checkout.js" class="stripe-button"
   data-key=x
   data-amount="2000"
   data-name="Demo Site"
   data-description="2 widgets ($20.00)"
   data-image="/128x128.png">
 </script> 
```

它不工作，

我知道 Meteor 不会在 .html 文件中运行脚本。而且我可以使用 Stripe.js。

但是有没有办法使用 Form 而不是处理 Stripe.js？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-05-14T00:19:06.787

我假设您在谈论[Stripe Checkout](https://stripe.com/docs/checkout)。请参阅自定义按钮部分。

`<head>`在模板文件中添加 Stripe Checkout 的脚本标签。

```
<head>
    <script src="https://checkout.stripe.com/v2/checkout.js"></script>
</head> 
```

然后将按钮、锚点或其他可点击标签添加到您的模板。

```
<template name="payment">
    <button>Pay</button>
</template> 
```

然后添加一个事件以在单击按钮时在 Stripe 的模式窗口中打开表单。

```
Template.payment.events({
    'click button': function(e) {
        e.preventDefault();

        StripeCheckout.open({
            key: 'YOUR PUBLIC KEY',
            amount: 5000,
            name: 'The Store',
            description: 'A whole bag of awesome ($50.00)',
            panelLabel: 'Pay Now',
            token: function(res) {
                // Do something with res.id
                // Store it in Mongo and/or create a charge on the server-side
                console.info(res);
            }
        });
    }
}); 
```

当返回响应时，Stripe 将使用“令牌”函数作为其回调。该响应对象的 id 属性是您用来向客户收费的信用卡令牌。

# c - gcc 如何处理 -Wtype-limits？

> ID：16198487
> 
> 赞同：6
> 
> 时间：2013-04-24T17:28:59.483
> 
> 标签：c, gcc, types

我正在测试一个带有*gcc 4.4.5*和`-Wtype-limits`选项的小代码片段。

```
#include <assert.h>
#include <limits.h>
#include <stdint.h>

int main(void)
{
    /* With other values of v, the behavior of the compiler is the same. */
    uint16_t v = 0; 
    assert((unsigned int)INT_MAX < (unsigned int)v); /* l. 7 */
    return 0;
} 
```

然后，编译器向我抛出以下警告：

`main.c:7: warning: comparison is always false due to limited range of data type`

但是，据我所知，`INT_MAX`可能等于`+32767`（来自*C11 (n1570)，§ 5.2.4.2.1 Sizes of integer types`<limits.h>`*）。在这种情况下，变量`v`将能够保存 value `INT_MAX+1`，并且表达式 in`assert`将被评估为`1`。

因此，我可以看到两个问题：

*   GCC 考虑到了我的架构，因为实际上`INT_MAX`不等于`+32767`. 在那种情况下，它会减少`-Wtype-limits`对我的好处。
*   这是一个错误。

它让我想到第二个选项是以下代码，它不会产生任何具有相同选项的警告。

```
#include <assert.h>
#include <limits.h>
#include <stdint.h>

int main(void)
{
    assert((unsigned int)INT_MAX < (unsigned int)UINT16_MAX);
    return 0;
} 
```

那么，正确答案是什么？

*PS：*顺便说一句，因为我的旧版本*gcc* ，我不得不道歉。也许下一个版本的行为会有所不同。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T19:11:26.567

GCC 确实考虑了类型的实际已知限制。它知道`int`在您的情况下超过 16 位宽，因此会发出警告。

您不会收到任何警告

```
#include <assert.h>
#include <limits.h>
#include <stdint.h>

int main(void)
{
    assert((unsigned int)INT_MAX < (unsigned int)UINT16_MAX);
    return 0;
} 
```

因为标准在 7.20.2 (2) 中说：

> 任何已定义宏的每个实例都应替换为适用于`#if`预处理指令的常量表达式，**并且该表达式应具有与作为根据整数提升转换的相应类型的对象的表达式相同的类型。**

所以对于 32 位宽`int`的 s，宏`UINT16_MAX`是 an `int`，因此所涉及类型的限制不能保证比较始终为假（或真）。

# c# - 从 MainViewModel 调用 ViewModel 的方法

> ID：16198491
> 
> 赞同：3
> 
> 时间：2013-04-24T17:29:04.490
> 
> 标签：c#, mvvm, viewmodel, communication

我在 2 个 ViewModel 之间进行通信时遇到了问题。在此处下载我的应用程序以查看问题：[http ://www76.zippyshare.com/v/26081324/file.html](http://www76.zippyshare.com/v/26081324/file.html)

我有 2 个视图。

*   带有数据上下文“MainViewModel”的“MainView.xaml”。

*   带有数据上下文“FirstViewModel”的“FirstView.xaml”。

MainView 有一个 ContentControl，其 Content = FirstView。我的 FirstViewModel 看起来像这样：

```
public class FirstViewModel : ViewModelBase
{

    public FirstViewModel()
        {
        One = "0";
        Two = "0";
        Ergebnis = 0;
    }
    private string _one;
    public string One
    {
        get { return _one; }
        set
        {
            if (value != null)
            {
                    _one = value;
                    Calculate();
                    RaisePropertyChanged(() => One);
            }
        }
    }

    private string _two;
    public string Two
    {
        get { return _two; }
        set
        {
                    _two = value;
                    Calculate();
                    RaisePropertyChanged(() => Two9;
        }

    }

    private decimal _ergebnis;
    public decimal Ergebnis
    {
        get { return _ergebnis; }
        set
        {
            if (value != null)
            {
                if (value != _ergebnis)
                {
                    _ergebnis = value;
                    RaisePropertyChanged(() => Ergebnis);
                }
            }

        }
    }

    public void Calculate()
    {
        if (Two != null)
        {
            for (int i = 0; i < 500; i++)
            {
                Ergebnis = i;
            }
            Ergebnis = (decimal.Parse(One) + decimal.Parse(Two));
        }
    } 
```

如您所见，每次更改属性“One”或“Two”的值时，它都会调用Calculate()。我现在想要的是，当我单击 MainView 中的按钮时，MainViewModel 必须在 FirstViewModel 中调用 Calculate()。所以我在属性中注释掉了Calculate()，并在我的MainViewModel中实现了一个RelayCommand：

主视图中的按钮

```
<Button Grid.Row="3" Command="{Binding ChangeValue}" /> 
```

主视图模型

```
public MainViewModel
{
    ChangeValue = new RelayCommand(ChangeValueCommandExecute);
}

public RelayCommand ChangeValue { get; private set; }
private FirstViewModel fwm;

private void ChangeValueCommandExecute()
{
    //CurrentView = Content of the ContentControl in the MainView, which is FirstView
    if (CurrentView.Content.ToString().Contains("FirstView"))
    {   
        fwm.Calculate();
    }
} 
```

这意味着当我单击按钮时，将调用 ChangeValueCommandExecute()。该命令将调用 fwm.Calculate() 并设置新的总和 (=Ergebnis)。问题是当调用Calculate() 时，'One' 和'Two' 的值总是“0”。那么如何在另一个 ViewModel 中调用一个 ViewModel 的方法呢？

编辑：为了清楚起见：我想在不使用“new FirstViewModel()”的情况下调用 FirstViewModel() 的“Calculate()”方法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T22:20:43.150

我无法查看您的项目，因为它需要 Windows 8，但您确定`FirstViewModel`您所拥有的与`DataContext`您在 中所指`FirstView`的相同吗？从我所看到的，你在which的构造函数中更新了 a是私有的。`FirstViewModel``MainViewModel``FirstViewModel``MainViewModel`

# ruby-on-rails - 我可以在 HAML 中要求 Ruby 库吗

> ID：16198498
> 
> 赞同：-2
> 
> 时间：2013-04-24T17:29:26.223
> 
> 标签：ruby-on-rails, haml, gravatar

我可以做这个 HAML 吗？

```
-require 'digest/md5'
.user-info
  =@user.name
  %img{ :src => "http://www.gravatar.com/avatar/#{Digest::MD5.hexdigest(@user.email)}" } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T17:36:21.807

您可以在帮助文件中提取此功能

```
require 'digest/md5'
class GravatarHelper
  def gravatar_image(email)
    image_tag("http://www.gravatar.com/avatar/#{Digest::MD5.hexdigest(email)}" )
  end

end 
```

然后视野变得清晰

# c++ - 用表达式树非侵入式地替换自定义类型

> ID：16198502
> 
> 赞同：1
> 
> 时间：2013-04-24T17:29:35.177
> 
> 标签：c++, lazy-evaluation, boost-proto

我正在尝试将惰性评估引入现有的代码项目。项目核心基本上由使用自定义类型的大量计算组成（它的作用类似于 double，但在后台执行额外的工作）。

我们的目标是使用 boost proto 引入惰性求值概念，以优化现有表达式。

限制：

*   无法触及现有的计算
*   使用的类型由 typedef 定义，因此可以替换类型本身

我们试图实现一个简单的概念证明，但没有管理代码以使其按预期运行。这是我们到目前为止得到的：

```
#include <boost/proto/proto.hpp>
#include <complex>
#include <iostream>

using namespace std;
using namespace boost;
using namespace boost::proto;

// The custom implemented Type
typedef std::complex<double> my_type;

// The Basic expression wrapper
template< typename Expr = proto::terminal< my_type >::type >
struct MyDoubleExpr
  : proto::extends< Expr, MyDoubleExpr< Expr >, proto::default_domain >
{
    typedef
        proto::extends< Expr, MyDoubleExpr< Expr >, proto::default_domain >
    base_type;

    MyDoubleExpr( Expr const &expr = Expr() )
      : base_type( expr )
    {}

  // Overloading of all Constructors supported by the custom type
  typedef typename proto::terminal< my_type >::type expr_type;
  MyDoubleExpr( double const &d)
    : base_type( expr_type::make(my_type(d)))
    {}

  // Lazy assignment is desired
    BOOST_PROTO_EXTENDS_USING_ASSIGN(MyDoubleExpr)

};

// unintrusively replace the existing type with
// the expression template
typedef MyDoubleExpr<> replaced_type;

int main() {

  replaced_type a = 2.0, b = 1.5;

  proto::default_context ctx;

  // The replaced type is created as template specialisation
  // proto::terminal< my_type >::type -> cannot store expressions
  replaced_type c;
  c = (a + b) * 2.0;
  std::cout << "c: " << proto::eval(c,ctx) << endl << endl;
  proto::display_expr(c);

  // Initialisation does not work directly ?
  //replaced_type d = a+b;

  // using auto works fine, so the expression basically works
  auto e = (a + b) * 2.0;
  std::cout << "e: " << proto::eval(e,ctx) << endl;
  proto::display_expr(e);

  getchar();
  return 0;
} 
```

我们的主要问题是我们无法定义一种既适用于文字又适用于表达式的类型。在这个例子中，c 是一个 proto::terminal 类型的表达式并且忽略了表达式的赋值。使用 auto 存储表达式时，它工作正常。此外，直接初始化是不可能的。

如果我正确理解我们的问题，我们将需要两种不同类型的表达式和文字，这是不可能的，因为我们只能更改现有类型。

我们还研究了其他选项，例如使用 BOOST_PROTO_DEFINE_OPERATORS(...) 使我们的自定义类型成为非侵入式终端，但也不能进行延迟分配。

所以，我们的问题是我们是否可以实现我们想要的，或者我们是否必须更改现有代码以引入惰性评估？

感谢您的帮助，马蒂亚斯`enter code here`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T01:26:12.523

查看 Proto 文档中的[惰性向量示例](http://www.boost.org/doc/libs/1_53_0/doc/html/proto/users_guide.html#boost_proto.users_guide.examples.lazy_vector)。有一个`lazy_vector_expr`用于惰性向量表达式的`lazy_vector`模板，以及一个专门用于终端的模板（它继承了它的大部分实现`lazy_vector_expr`）。`lazy_vector`定义一个`+=`接受任意惰性向量表达式的运算符，对它们求值并存储结果。

在我看来，您正在做类似的事情。但是`+=`，您正在寻找普通的分配和转换构造，而不是 。所以定义一个模板的构造函数和赋值运算符。像（未经测试）...

```
template<typename XXX = proto::is_proto_expr> // hack, needed to for ADL
struct replaced_type_t
  : MyDoubleExpr< proto::terminal<double>::type > 
{
    replaced_type_t(double d = 0.0)
      : MyDoubleExpr< proto::terminal<double>::type >(
            proto::terminal<double>::type::make(d)
        )
    {}
    // Converting constructor
    template<typename OtherExpr>
    replaced_type_t(MyDoubleExpr<OtherExpr> const & e)
    {
        // Evaluate e, assign to *this
    }
    // Converting assignment
    template<typename OtherExpr>
    replaced_type_t& operator=(MyDoubleExpr<OtherExpr> const & e)
    {
        // Evaluate e, assign to *this
    }
};

typedef replaced_type_t<> replaced_type; 
```

顺便说一句，当你使用 时`BOOST_PROTO_EXTENDS_USING_ASSIGN`，你得到的是一个重载的赋值运算符，它构建了一个更大的表达式。所以这：

```
replaced_type c;
c = (a + b) * 2.0; 
```

...将产生一个令人兴奋的效果，即创建一个`MyDoubleExpr<>`包含分配节点的临时对象，然后将其丢弃。

！

# javascript - Date.toJSON() 和 Date.toISOString() 之间的区别

> ID：16198506
> 
> 赞同：34
> 
> 时间：2013-04-24T17:29:48.390
> 
> 标签：javascript, date

我正在检查如何以下列格式显示 JavaScript 日期：`YYYY-MM-DDTHH:mm:ss.sssZ`，但我看到有两种方法这样做：[.toJSON()](http://www.w3schools.com/jsref/jsref_tojson.asp)和[.toISOString()](http://www.w3schools.com/jsref/jsref_toisostring.asp)。它们之间有什么真正的区别吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-07-09T11:37:07.473

一个方便的区别是，如果您的日期无效，`.toJSON()`将输出`null`. 但是，`.toISOString()`的行为可能会有所不同。在 Firefox 中，这会输出一个字符串`"Invalid Date"`，但在 chrome 中会引发异常。

编辑：最新版本的 Firefox 已将行为修复为与 chrome 相同（引发异常）。但是，.toJSON() 和 .toISOString() 之间的区别仍然存在。（输出 null 与引发异常）

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-04-24T17:35:56.460

在内部，如果可用，则`toJSON()`调用，所以没有区别。`toISOString()`

> ## 15.9.5.44 Date.prototype.toJSON（键）
> 
> 此函数提供 Date 对象的字符串表示形式，供 JSON.stringify (15.12.3) 使用。
> 
> 当使用参数 key 调用 toJSON 方法时，将执行以下步骤：
> 
> 1.  令 O 为调用 ToObject 的结果，并将 this 值作为其参数。
>     
>     
> 2.  设 tv 为 ToPrimitive(O, hint Number)。
>     
>     
> 3.  如果 tv 是一个数字并且不是有限的，则返回 null。
>     
>     
> 4.  **令 toISO 为使用参数“toISOString”调用 O 的 [[Get]] 内部方法的结果。**
>     
>     
> 5.  如果 IsCallable(toISO) 为 false，则抛出 TypeError 异常。
>     
>     
> 6.  **返回调用 toISO 的 [[Call]] 内部方法的结果，其中 O 作为 this 值和一个空参数列表。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T17:33:13.510

JSON 日期格式遵循 ISO 8601，这也是`toISOString`产生的。两种方法返回的值之间没有功能差异。

# python - 将推文分类

> ID：16198508
> 
> 赞同：1
> 
> 时间：2013-04-24T17:29:57.280
> 
> 标签：python, machine-learning, nlp

我希望编写一个脚本来解析用户的推文并将其分类为先前指定的类别。例如：

> “如果 Ed Miliband 被 Blairites '引诱'，他将失去选举，”工会主席说[http://bit.ly/145CRAD](http://bit.ly/145CRAD) “

将在域政治中分类。

> “亲爱的萨钦，你已经 40 岁了。买一辆跑车，和 20 岁的金发女郎约会。享受你的中年危机。把 IPL 留给男孩 - 你的粉丝”

将在域 Cricket 中进行分类。

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T17:53:53.307

您正在寻找“[主题模型](http://en.wikipedia.org/wiki/Topic_model)”。技术包括潜在狄利克雷分配等。Wikipedia 文章包含指向诸如[Mallet](http://mallet.cs.umass.edu/)之类的资源的链接，这些资源应该对您有所帮助。

您没有具体说明您想使用什么语言，也没有说明“最佳”是什么意思？最容易实施、最快还是最好的结果？

另一种选择是使用人工（例如 Amazon Mechanical Turk），这可能会为您提供“最好”的推文结果，因为所有的缩写、讽刺和哈希标签都很难分类……#notAnEasyProblem。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T17:40:40.777

这是自然语言处理（NLP）领域的一个复杂问题，称为**[文档分类](http://en.wikipedia.org/wiki/Document_classification)**。最好的开源库之一由[斯坦福 NLP Group](http://nlp.stanford.edu/software/classifier.shtml)维护。祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T17:43:27.207

1.  主题分类（传统分类技术）
2.  例如，实体提取和更复杂的技术来识别与人或推文帐户相关的主题。

这篇论文将是一个很好的起点…… [http://dl.acm.org/citation.cfm?id=1835643](http://dl.acm.org/citation.cfm?id=1835643) [http://www.tmrfindia.org/ijcsa/v9i15.pdf](http://www.tmrfindia.org/ijcsa/v9i15.pdf)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-16T15:58:32.980

lda怎么样？主题模型！

你可以在 python 中尝试 online-lda

[http://www.cs.princeton.edu/~blei/topicmodeling.html](http://www.cs.princeton.edu/~blei/topicmodeling.html)

那么如果你想尝试分布式lda（更快）

你可以试试 light-lda

# java - 链表上的合并排序

> ID：16198511
> 
> 赞同：0
> 
> 时间：2013-04-24T17:30:07.900
> 
> 标签：java, mergesort

我有作业 - 在 java 中编写一个合并排序算法。我使用 LinkedList 来存储我的数据。我尝试将伪代码从维基百科（[http://en.wikipedia.org/wiki/Merge_sort](http://en.wikipedia.org/wiki/Merge_sort)）转换为 java，但它不起作用。我不知道为什么，我需要你们的帮助。

这是我的 MergeSort 类。

```
import java.util.Comparator;

public class MergeSort {
private final Comparator comparator;

public MergeSort(Comparator comparator) {
    this.comparator = comparator;
}

public LinkedList sort(LinkedList list) {
    if(list.size() <= 1) {
        return list;
    }

    LinkedList left = new LinkedList();
    LinkedList right = new LinkedList();

    int middle = list.size() / 2;
    for(int i = 0; i < middle; i++) {
        left.add(list.get(i));
    }

    for(int i = list.size(); i >= middle; i--) {
        right.add(list.get(i));
    }

    left = sort(left);
    right = sort(right);

    return merge(left, right);
}

public LinkedList merge(LinkedList left, LinkedList right) {
    LinkedList result = new LinkedList();

    while(left.size() > 0 || right.size() > 0) {
        if(left.size() > 0 && right.size() > 0) {
            if(comparator.compare(left.get(0), right.get(0)) <= 0) {
                result.add(left.delete(0));
            }
            else {
                result.add(right.delete(0));
            }
        }
        else if(left.size() > 0) {
            result.add(left.delete(0));
        }
        else if(right.size() > 0) {
            result.add(right.delete(0));
        }
    }
    return result;
} 
```

}

其中有一个“StackOverflowError 异常”。我试图删除错误，但我不能。谢谢你的帮助。

PS对不起我糟糕的语言。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:07:40.857

在第 33 行，您的上数组索引需要从列表大小减一开始：

```
 for(int i = list.size()-1; i >= middle; i--) { 
```

# c++ - 在 C++ 中设置向量

> ID：16198512
> 
> 赞同：2
> 
> 时间：2013-04-24T17:30:07.763
> 
> 标签：c++, class, vector

我正在尝试设置一个向量来存储一组棒球投手。我想存储一个投手的名字 Joe Smith（字符串）和他过去两年的平均得分 - 2.44 和 3.68。我还想存储第二个投手的名字 - Bob Jones（字符串）和他的平均得分 5.22 和 4.78。这是一个更大的家庭作业的一部分，但我才刚刚开始使用向量。我遇到的问题是我的教科书说向量只能用于存储相同类型的值，而我发现的所有示例都主要使用整数值。例如，我在 cplusplus.com 上找到了这个示例

```
// constructing vectors
#include <iostream>
#include <vector>

int main ()
{
unsigned int i;

// constructors used in the same order as described above:
std::vector<int> first;                                // empty vector of ints
std::vector<int> second (4,100);                       // four ints with value 100
std::vector<int> third (second.begin(),second.end());  // iterating through second
std::vector<int> fourth (third);                       // a copy of third

// the iterator constructor can also be used to construct from arrays:
int myints[] = {16,2,77,29};
std::vector<int> fifth (myints, myints + sizeof(myints) / sizeof(int) );

std::cout << "The contents of fifth are:";
for (std::vector<int>::iterator it = fifth.begin(); it != fifth.end(); ++it)
std::cout << ' ' << *it;
std::cout << '\n';

return 0;
} 
```

有什么办法可以更改此代码以接受一个字符串和两个双精度数？我不需要从用户那里得到任何输入，我只需要在 int main() 中初始化两个投手。我已经为他们设置了一个类，如下所示，但是分配需要一个向量。

```
#ifndef PITCHER_H
#define PITCHER_H
#include <string>

using namespace std;

class Pitcher
{
private:
    string _name;
    double _ERA1;
    double _ERA2;

public:
    Pitcher();
    Pitcher(string, double, double);
    ~Pitcher();
    void SetName(string);
    void SetERA1(double);
    void SetERA2(double);
    string GetName();
    double GetERA1();
    double GetERA2();       

};

#endif

#include "Pitcher.h"
#include <iostream>
#include <string>
#include <vector>
#include <iomanip>
using namespace std;

Pitcher::Pitcher()
{
}

Pitcher::Pitcher(string name, double ERA1, double ERA2)
{
_name = name;
_ERA1 = ERA1;
_ERA2 = ERA2;
}

Pitcher::~Pitcher()
{
}

void Pitcher::SetName(string name)
{
_name = name;
}

void Pitcher::SetERA1(double ERA1)
{
_ERA1 = ERA1;
}

void Pitcher::SetERA2(double ERA2)
{
_ERA2 = ERA2;
}

string Pitcher::GetName()
{
return _name;
}

double Pitcher::GetERA1()
{ 
return _ERA1;
}

double Pitcher::GetERA2()
{
return _ERA2;
}

#include <iostream>
#include <string>
#include <vector>
#include <iomanip>
#include "Pitcher.h"

using namespace std;

int main()
{

Pitcher Pitcher1("Joe Smith", 2.44, 3.68);

cout << Pitcher1.GetName() << endl;
cout << Pitcher1.GetERA1() << endl;
cout << Pitcher1.GetERA2() << endl;

system("PAUSE");
return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T17:33:12.040

好吧，我想你想存储一个投手向量

```
 vector<Pitcher> pitchers;
 Pitcher p1("name", 0.5, 0.1); //create a pitcher
 pitchers.push_back(p1); //add the pitcher to the vector
 ...//fill in some other pitchers
 //to print all the pitchers
 for(unsigned i = 0; i < pitchers.size(); ++i)
 {
      cout << pitchers[i].GetName() << " " << pitchers[i].GetERA1() << "\n";
 } 
```

希望这个例子能澄清一些事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T17:33:26.837

你想要类似的东西吗

```
vector<Pitcher*> *vecPit=new vector<Pitcher*>(); 
```

你加上

```
vecPit->push_back(new Pitcher("string", 2.123, 2.123) 
```

# java - Google 电子表格 getFeed 错误和理解

> ID：16198518
> 
> 赞同：2
> 
> 时间：2013-04-24T17:30:23.733
> 
> 标签：java, authentication, nullpointerexception, spreadsheet

我正在尝试使用 Google 电子表格，但遇到了一个我无法理解的问题。

以下是我解释自己之前的代码：

```
SpreadsheetService service =
        new SpreadsheetService("MySpreadsheetIntegration-v1");

service.setOAuth2Credentials(credential);
//service.setHeader("Authorization", "Bearer "+credential.getRefreshToken());

// TODO: Authorize the service object for a specific user (see other sections)

// Define the URL to request.  This should never change.
URL SPREADSHEET_FEED_URL = new URL(
    "https://spreadsheets.google.com/feeds/spreadsheets/private/full");

// Make a request to the API and get all spreadsheets.
SpreadsheetFeed feed = null;
try {
    feed = service.getFeed(SPREADSHEET_FEED_URL, SpreadsheetFeed.class);
} catch (ServiceException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
List<SpreadsheetEntry> spreadsheets = feed.getEntries();

// Iterate through all of the spreadsheets returned
for (SpreadsheetEntry spreadsheet : spreadsheets) {
  // Print the title of this spreadsheet to the screen
  System.out.println(spreadsheet.getTitle().getPlainText());
} 
```

我要做的是阅读变量凭证指向的帐户中可用的电子表格。我有 AccessToken 和 RefreshToken 那里。

当我运行代码时发生的情况是 Try Catch 进入 Catch 并出现以下错误：

```
Exception in thread "main" java.lang.NullPointerException: No authentication header information
at com.google.gdata.util.AuthenticationException.initFromAuthHeader(AuthenticationException.java:96)
at com.google.gdata.util.AuthenticationException.<init>(AuthenticationException.java:67)
at com.google.gdata.client.http.HttpGDataRequest.handleErrorResponse(HttpGDataRequest.java:608)
at com.google.gdata.client.http.GoogleGDataRequest.handleErrorResponse(GoogleGDataRequest.java:564)
at com.google.gdata.client.http.HttpGDataRequest.checkResponse(HttpGDataRequest.java:560)
at com.google.gdata.client.http.HttpGDataRequest.execute(HttpGDataRequest.java:538)
at com.google.gdata.client.http.GoogleGDataRequest.execute(GoogleGDataRequest.java:536)
at com.google.gdata.client.Service.getFeed(Service.java:1135)
at com.google.gdata.client.Service.getFeed(Service.java:998)
at com.google.gdata.client.GoogleService.getFeed(GoogleService.java:645)
at com.google.gdata.client.Service.getFeed(Service.java:1017)
at DriveCommandLine.main(DriveCommandLine.java:69) 
```

我玩过服务变量中的函数，如您所见，我有一行注释。我尝试使用 AccessToken 而不是 RefreshToken ，它仍然给我上面写的错误。

我无法理解这个错误：它来自哪里？为什么会这样？我该如何解决？

如果有人可以帮助我，那就太好了。如果我有任何信息，我会回来提供更多信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-31T08:44:15.583

这个问题已经很自豪地**解决**了：

好的，所以我的错误 - 饲料。

我正在使用 OAth2，当您重定向用户时，您可以检索附加了 SCOPES 的访问令牌，这意味着您将授予应用程序什么样的权限。我错过了以下最后两个关于提要的内容：

```
private static final List<String> SCOPES = Arrays.asList(
  "https://www.googleapis.com/auth/drive.file",
  "https://www.googleapis.com/auth/userinfo.email",
  "https://www.googleapis.com/auth/userinfo.profile",
  "https://docs.google.com/feeds",
  "https://spreadsheets.google.com/feeds"); 
```

如[https://developers.google.com/google-apps/spreadsheets/?hl=pt-BR](https://developers.google.com/google-apps/spreadsheets/?hl=pt-BR)在“使用 OAuth 2.0 授权请求”下所见。

需要指出的另一件事是，某些用户似乎存在以下问题：

```
service.setOAuth2Credentials(credential); 
```

因此，修复它的一种方法是在调用之前刷新令牌，如下所示：

```
credential.refreshToken();
srv.setOAuth2Credentials(credential); 
```

我希望遇到这篇文章的人会发现上面的信息很有用！:)

祝你有美好的一天，编码员！

# java - 图像未正确显示

> ID：16198524
> 
> 赞同：-1
> 
> 时间：2013-04-24T17:30:38.517
> 
> 标签：java

我正在尝试实现一个简单的闪屏。因此，我有两个类，`Loader`它们是的子类`JFrame`和`Background`（的子类`JComponent`，用作`GlassPane`）来保存实际图像。在这张图片下方应该有一个小的进度条。

加载图像后，我会立即显示窗口。这工作得很好。但它不会显示图像。滚动条占据整个框架。如果我手动缩小窗口并将其放回前面，则会显示图像。

为什么图像没有立即显示？

这是代码：

**装载机**

```
public class Loader extends JFrame{

    private static final int _WIDTH  = 500;
    private static final int _HEIGHT = 300;

    private JProgressBar bar;
    private Background bg;

    public Loader (){
        super("Risiko Loader");
        this.setAlwaysOnTop(true);
        Dimension window = Toolkit.getDefaultToolkit().getScreenSize();
        this.setBounds(window.width / 2 - _WIDTH / 2, window.height / 2 - _HEIGHT / 2, _WIDTH, _HEIGHT);
        this.setUndecorated(true);
        this.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);
        this.setResizable(false);
        this.setFocusable(true);
        this.setBackground(new Color(1.0f,0.0f,1.0f,1.0f));
        this.setFocusableWindowState(true);

        this.setIcons();

        bar = new JProgressBar();

        bar.setSize(_WIDTH, 20);
        bar.setLocation(0, _HEIGHT - 20);
        bar.setValue(0);
        bar.setMinimum(0);
        bar.setMaximum(100);

        this.add(bar);

        bg = new Background();
        this.setGlassPane(this.bg);
        this.bgIsReady();
    }

    private void bgIsReady(){
        do {
            try {
                Thread.sleep(100);
            }catch(Exception e){}
        }while(this.bg.tracker.statusID(1, false) == MediaTracker.COMPLETE);

        this.setVisible(true);
        this.getGlassPane().setVisible(true);
        this.getGlassPane().repaint();
        bar.setValue(50);
    }

    private void setIcons(){
        ArrayList<Image> icons = new ArrayList<>();
        icons.add(Toolkit.getDefaultToolkit().getImage(System.getProperty("user.dir") + File.separator + "images" + File.separator + "icon16.png"));
        icons.add(Toolkit.getDefaultToolkit().getImage(System.getProperty("user.dir") + File.separator + "images" + File.separator + "icon32.png"));
        this.setIconImages(icons);
    }

    public static void main(String [] args){

        Loader l = new Loader();
    }
} 
```

和**背景**

```
public class Background extends JComponent{
    private Image img;

    public MediaTracker tracker;

    public Background(){
        this.tracker =  new MediaTracker(this);
        String imgPath = System.getProperty("user.dir") + File.separator + "images" + File.separator + "splash.png";
        this.img = Toolkit.getDefaultToolkit().getImage(imgPath);
        this.tracker.addImage(this.img, 1);
    }

    @Override
    public void paintComponent(Graphics g) {
        if(this.tracker.statusID(1, false) == MediaTracker.LOADING) {//not loaded
            return;
        }
        // Draw the background image
        g.drawImage(this.img, 1, 1, null);
        System.out.println("p");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T17:54:03.973

大概就是这部分——

```
do {
    try {
        Thread.sleep(100);
    }catch(Exception e){}
}while(this.bg.tracker.statusID(1, false) == MediaTracker.COMPLETE); 
```

您可能应该检查`MediaTracker.LOADING`in`while`而不是`MediaTracker.COMPLETE`. 现在可能发生的情况是代码休眠了 100 毫秒，检查`MediaTracker`状态，它仍然`MediaTracker.LOADING`是 ，而不是`COMPLETE`，所以代码继续并设置您的框架、玻璃窗格等可见，而无需先加载图像。加载图像的时间必须超过 100 毫秒 - 否则你的问题将是你的框架永远不会出现。

另一方面——如果你想制作“一个简单的闪屏”——这太复杂了。

Java 1.6+中有一个内置的[SplashScreen](http://docs.oracle.com/javase/tutorial/uiswing/misc/splashscreen.html)类。

即使您想自己重新创建它，您也可以使用 a `JFrame`with `BorderLayout`，将 a `JLabel`with an`ImageIcon`图片放入`BorderLayout.CENTER`，然后将`JProgressBar`in`BorderLayout.SOUTH`作为更简单的选项放入。

# android - onLocationUpdate 未在服务中调用

> ID：16198528
> 
> 赞同：0
> 
> 时间：2013-04-24T17:31:01.203
> 
> 标签：android, service, background, gps

我正在开发一个需要在一段时间内检索用户位置的应用程序。我在活动中使用了 LocationListener 接口，它运行良好，但是当我在我的 android 服务中实现它时，它没有被调用。这是 onCreate 方法：

```
public void onCreate() {
    super.onCreate();
    turned= true;       
    locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);
    criteria = new Criteria();
    criteria.setAccuracy(Criteria.ACCURACY_FINE);
    locationManager = (LocationManager) this
            .getSystemService(LOCATION_SERVICE);
    String provider = locationManager.getBestProvider(criteria, true);
    locationManager
            .requestLocationUpdates(provider, 0, 0, this); ...} 
```

我真的很感谢任何帮助，服务似乎很好，因为我发送 Toast 并且它们已发送，但从未调用过 onLocationUpdate。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-22T17:48:00.933

编辑：正如 Shobhit Puri 所说，它只需要在 onStartCommand()

```
public int onStartCommand (Intent intent, int flags, int startId)
{
    super.onCreate();
    encendido = true;       
    locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);
    criteria = new Criteria();
    criteria.setAccuracy(Criteria.ACCURACY_FINE);
    locationManager = (LocationManager) this
            .getSystemService(LOCATION_SERVICE);
    String provider = locationManager.getBestProvider(criteria, true);
    locationManager
            .requestLocationUpdates(provider, 0, 0, this);
    return START_STICKY;
} 
```

# iphone - Tableview 自身和 Viewcontroller [多个 segues]

> ID：16198534
> 
> 赞同：0
> 
> 时间：2013-04-24T17:31:29.833
> 
> 标签：iphone, ios, uitableview, ios6, uistoryboardsegue

我有一个`UITableView`包含许多单元格的单元格，并且取决于单元格的内容，它应该`UITableView`与新单元格或`UIViewController`. 我可以做到这一点，但不能同时做到这一点，有可能做到吗？

我想在这样的 prepareForSegue 方法中：

```
 - (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
 {
      NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];

     if ([[segue identifier] isEqualToString:@"NextLevel"]) {
         [segue.destinationViewController setActualNodo:[actualNodo getSonAtIndex:indexPath.row]];
     } else if ([[segue identifier] isEqualToString:@"Service"]) {
         [segue.destinationViewController setServiceName: whatever]
     }

 } 
```

问题出在情节提要中，我无法从同一个单元格中按 ctrl+拖动两个 segue。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T20:09:33.510

不，这对于 IB 中的 segues 是不可能的。您可以按照您在 prepareForSegue 中显示的方式检查所有源自控制器的不同 segue，但 UI 元素只能连接一个 segue。

为了做你想做的事，你应该从 table view 控制器本身到新控制器进行 segue。然后，在 中`didSelectRowAtIndexPath`，使用您想要决定是转到这个新控制器（使用`[self performSegueWithIdentifier:sender:]`）还是使用新单元格更新表格视图的任何逻辑。

# excel - Excel：在列中搜索指定值，在同一行不同列中返回值

> ID：16198536
> 
> 赞同：3
> 
> 时间：2013-04-24T17:31:31.707
> 
> 标签：excel, indexing, lookup

这是我的问题：

我有一个系统生成的报告，可以轻松更新。但是，该报告非常长且复杂，我正在尝试使用复杂报告将其合并为更简单的摘要报告。

我的系统输出带有发票编号参考和已付款/未付款状态的已售商品清单。它没有给我一份清晰的发票清单。我需要的是列出长长的清单，并制作一份带有已付款/未付款状态的发票的简短清单。

示例：工作表“详细信息”

![细节](https://i122.photobucket.com/albums/o265/killacat09/Capture_zps8a919928.png)

工作表“摘要”

![概括](https://i122.photobucket.com/albums/o265/killacat09/Capture_zpsd46d840b.png)

因此，需要一个公式在明细表中查找与汇总表 A 列中的值匹配的发票，并将状态返回到 B 列。我还需要相同或相似的公式来返回发票的总金额进入C列这应该是一个如此简单的修复但在这里我要疯了......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T17:36:19.223

您是否尝试过 VLOOKUP，例如在摘要表的 B2 中

`=VLOOKUP(A2,Detail!A:E,4,0)`

这将为您提供相关行的第四列数据（即状态）。对于您想要第 5 列的金额，因此将其更改为 C2 中的此公式

`=VLOOKUP(A2,Detail!A:E,5,0)`

根据需要将两个公式复制到最远的列......

从您的评论看来，您可能想为第二个公式汇总几个金额......所以使用 SUMIF 来做到这一点，即

`=SUMIF(Detail!A:A,A2,Detail!E:E)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T19:31:23.373

问题的第二部分需要一个 SUMIF 或 SUMIFS 公式。对于我在此处列出的简化示例，公式为：

```
=SUMIF('Detail'!A:A,A2,'Detail'!E:E) 
```

我的实际问题需要一个 SUMIFS 公式，因为我在同一张发票上有重复项目（将其视为“轮胎”的 5 个行项目而不是 1 个），并且我需要逐项添加按发票的摘要。

# c++ - 内置mpi的自定义boost python模块？

> ID：16198539
> 
> 赞同：0
> 
> 时间：2013-04-24T17:31:36.083
> 
> 标签：c++, python, boost, mpi

原则上，是否可以使用 boost python 库在 C++ 中创建具有 MPI 功能的自定义 python 模块？所以我想知道我是否可以在库的一些函数中包含 MPI 功能，然后创建一个这样的 python 脚本：

```
import myModule

A = myModule.myClass()

A.doSomething() 
```

其中 doSomething() 是一个具有并行化机会的函数。然后我会做

```
mpirun -np [NUM_PROCS] python my_script.py [OPTIONS] 
```

并获得并行功能。如果这是可能的，我将如何去做？我的意思是显然我需要在我的模块的源代码中包含一些 MPI 库，但是我需要在 python 脚本中做一些事情以确保它并行运行吗？我必须与 GIL 战斗吗？似乎没有太多关于这方面的文档，所以我对如何去做有点无能为力。或者，如果我在某处遗漏了一些文档，我们将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T10:17:13.443

经过一些实验，可以做到这一点。该库需要用mpicxx编译，调用它的python脚本需要初始化mpi环境。比如我用mpi4py做MPI.COMM_WORLD。然后所有进程调用库函数，该函数可以包含控制进程之间数据流的代码。

# pharo - 将 Seaside 加载到 Pharo 2.0

> ID：16198543
> 
> 赞同：6
> 
> 时间：2013-04-24T17:31:55.993
> 
> 标签：pharo, seaside

Pharo 2.0 最近发布了。我下载了它，并尝试运行它：

```
Gofer new
    squeaksource: 'MetacelloRepository';
    package: 'ConfigurationOfSeaside30';
    load.
(Smalltalk at: #ConfigurationOfSeaside30) load. 
```

它完成了，但没有在世界菜单的工具子菜单中创建“海边控制面板”菜单选项。

下一步要采取什么措施？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-24T20:21:10.747

控制面板是使用 OB 构建的，它不再适用于 Pharo 2.0

因此，您需要以编程方式启动适配器。在 Pharo 2.0 中，默认适配器已成为 Zinc 适配器。您可以通过执行以下表达式来启动它：

```
ZnZincServerAdaptor startOn: 8080 
```

这会在端口 8080 上启动适配器。

# string - Haskell，在使用 IO Integer 计算该字符串时返回字符串

> ID：16198544
> 
> 赞同：1
> 
> 时间：2013-04-24T17:31:56.850
> 
> 标签：string, haskell, io, xmonad

今天我遇到了以下问题：

我可以使用名为 getScreenWidth 的函数使用 Xlib 绑定​​读取 Haskell 中的当前屏幕分辨率（--> 我得到一个 IO 整数）。到目前为止，这是有效的。

现在我想将该值用作我的桌面环境 (xmonad) 插件的标签。插件基础结构只允许将“WorkspaceId”（基本上是一个整数）映射到字符串的函数。

```
...
-- Constructor for PrettyPrint: 
ppCurrent :: WorkspaceId -> String
... 
```

目前我正在使用自己的函数将 ID 映射到字符串，该函数正在工作：

```
myPPCurrent :: WorkspaceId -> String
myPPCurrent x = "Desktop: " ++ show x 
```

输出如预期的那样“桌面：1”（或我使用的任何 ID）。

现在我希望它是“桌面：1 (1680px)”，其中 1680 等于 getScreenWidth 的返回值。

**我的问题：** getScreenWidth 返回 IO Integer，所以我不能简单地使用，

```
myPPCurrent x = do
    y <- getScreenWidth
    return "Desktop: " ++ show x ++ show y 
```

因为我的返回类型不是字符串。谷歌告诉我，我无法在 Haskell 中将“IO Integer”转换为“Integer”，所以我真的不知道如何在使用“IO Integer”生成该字符串。

这甚至可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T18:33:37.627

我从未使用过 XMonad：我将这个答案基于一般的 Haskell 知识以及我在 2.5 分钟内在互联网上找到的内容。

无论如何，我假设你在某个地方有一个`main`调用`xmonad`.

```
main = xmonad myConfig 
```

或者可能

```
main = xmonad XConfig {
          normalBorderColor = "#8080ff",
          -- etc 
```

管他呢。让我们看看类型。

```
main :: IO ()
xmonad :: (LayoutClass l Window, Read (l Window)) => XConfig l -> IO ()
myConfig :: XConfig l -- whatever type `l` is 
```

现在假设`myConfig`我们有

```
makeMyConfig :: IO (XConfig l) -- I still don't know what `l` is 
```

`makeMyConfig`不是配置 --- 它会在运行时进行配置，可能取决于磁盘中的文件、时间或屏幕分辨率....您可以像这样使用它：

```
main = do
    config <- makeMyConfig
    xmonad config 
```

关键是因为`XConfig l`我们现在使用的 s 是从 an 派生的`IO (XConfig l)`，它可以合并`String`从 s 派生的`IO String`s 和`Integer`从 s 派生的`IO Integer`s 等。所以这就是你在`getScreenWidth`配置中使用的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T17:50:13.570

进入 IO monad 后，您将无法离开，因此您需要返回 an`IO String`而不是 a `String`eg

```
myPPCurrent :: WorkspaceId -> Integer -> String
myPPCurrent x = "Desktop: " ++ show x ++ show y

getWorkspaceName :: WorkspaceId -> IO String
getWorkspaceName id = do
    w <- getScreenWidth
    return $ myPPCurrent id w 
```

# python - 从子进程调用中获取退出代码和标准错误

> ID：16198546
> 
> 赞同：81
> 
> 时间：2013-04-24T17:32:04.273
> 
> 标签：python, python-3.x

我阅读了 subprocess 提供的函数 - call、check_call、check_output，并了解了每个函数的工作原理和功能上的不同。我目前正在使用check_output，所以我可以访问stdout，并使用“try block”来捕获异常，如下所示：

```
# "cmnd" is a string that contains the command along with it's arguments. 
try:
    cmnd_output = check_output(cmnd, stderr=STDOUT, shell=True, timeout=3, universal_newlines=True);                         
except CalledProcessError:                                                                                                   
    print("Status : FAIL")                                                                                                   
print("Output: \n{}\n".format(cmnd_output)) 
```

我遇到的问题是抛出异常时，“cmnd_output”未初始化并且无权访问stderr，并且我收到以下错误消息：

```
print("Output: \n{}\n".format(cmnd_output))
UnboundLocalError: local variable 'cmnd_output' referenced before assignment 
```

我认为那是因为异常导致“check_output”立即退出，没有任何进一步的处理，也就是在 try 块中分配给“cmnd_output”。如果我错了，请纠正我。

有什么方法可以访问 stderr （如果发送到 stout 就可以了）并可以访问退出代码。我可以根据退出代码手动检查通过/失败，而不会抛出异常。

谢谢你，艾哈迈德。

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2013-04-24T17:38:26.783

试试这个版本：

```
import subprocess
try:
    output = subprocess.check_output(
        cmnd, stderr=subprocess.STDOUT, shell=True, timeout=3,
        universal_newlines=True)
except subprocess.CalledProcessError as exc:
    print("Status : FAIL", exc.returncode, exc.output)
else:
    print("Output: \n{}\n".format(output)) 
```

这样，只有在调用成功时才会打印输出。如果是，[`CalledProcessError`](http://docs.python.org/3/library/subprocess.html#subprocess.CalledProcessError)您打印返回码和输出。

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2014-12-26T20:09:57.750

接受的解决方案涵盖了您可以混合`stdout`和`stderr`的情况，但是在子进程（无论出于何种原因）决定使用`stderr`IN ADDITION 来`stdout`进行非失败输出（即输出非关键警告）的情况下，然后给定的解决方案可能并不理想。

例如，如果您将对输出进行额外的处理，例如转换为 JSON，并且您`stderr`将`stderr`.

我发现在这种情况下可以使用以下方法：

```
cmd_args = ... what you want to execute ...

pipes = subprocess.Popen(cmd_args, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
#If you are using python 2.x, you need to include shell=True in the above line
std_out, std_err = pipes.communicate()

if pipes.returncode != 0:
    # an error happened!
    err_msg = "%s. Code: %s" % (std_err.strip(), pipes.returncode)
    raise Exception(err_msg)

elif len(std_err):
    # return code is 0 (no error), but we may want to
    # do something with the info on std_err
    # i.e. logger.warning(std_err)

# do whatever you want with std_out
# i.e. json.loads(std_out) 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2018-02-15T17:45:04.563

两种建议的解决方案要么混合标准输出/标准错误，要么使用`Popen`不像`check_output`. `check_output`但是，如果您只是使用管道*捕获 stderr*，则可以在使用时完成相同的事情，并保持 stdout/stderr 分开：

```
import sys
import subprocess

try:
    subprocess.check_output(cmnd, stderr=subprocess.PIPE)
except subprocess.CalledProcessError as e:
    print('exit code: {}'.format(e.returncode))
    print('stdout: {}'.format(e.output.decode(sys.getfilesystemencoding())))
    print('stderr: {}'.format(e.stderr.decode(sys.getfilesystemencoding()))) 
```

在此示例中，由于我们捕获了 stderr，因此它在异常的`stderr`属性中可用（不使用管道捕获，它只是`None`）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-19T13:47:26.897

我有类似的要求，以下对我有用：

```
 try:
        with open ("vtcstderr.out", "w") as file:
            rawOutput = subprocess.check_output(
                command,
                stderr=file,
                shell=True
            )
    except subprocess.CalledProcessError as error:
        # this is the stdout
        rawOutput = error.output

    with open ("vtcstderr.out", "r") as file:
        # this is the stderr
        errorLines = file.readlines() 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-04-24T17:36:22.557

为什么不在 try 语句之前初始化变量 cmnd_output 呢？这样，它将按照您期望的方式工作。以下行将起作用，只需将其添加到 try 语句上方：

```
cmnd_output = '' 
```

# selenium-webdriver - Selenium：RDC 最小化时元素不可见错误

> ID：16198549
> 
> 赞同：0
> 
> 时间：2013-04-24T17:32:11.383
> 
> 标签：selenium-webdriver, watir-webdriver

我在 Windows XP 远程桌面上使用 Selenium WebDriver 运行 WATIR 自动化测试，我注意到当我最小化 RDC 时`Element is not currently visible`，我的断言开始出现随机错误。如果我让 RDC 最大化并坐下来进行测试，它们都运行良好。我发现以下软件版本的组合，即使存在较新的版本，给我的兼容性问题也最少。

ruby (1.8.7) selenium-webdriver (2.21.2) watir-webdriver (0.6.2) firefox (10.0.2)

关于为什么测试只在 RDC 可见的情况下运行的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T11:06:38.937

当您最小化远程桌面会话时，它会变得无 GUI，并且 GUI 操作将失败。

我们用于[RIATest的解决方案](http://www.cogitek.com/riatest.html)的解决方案如下（不确定它是否有助于 Selenium，但它应该）。

在您连接的客户端计算机上执行以下操作：

1.  关闭所有远程桌面会话。
2.  打开注册表编辑器。
3.  转到密钥 HKEY_CURRENT_USER\Software\Microsoft\Terminal Server Client（或 HKEY_LOCAL_MACHINE\Software\Microsoft\Terminal Server Client，如果要为所有用户设置它）。
4.  添加一个 DWORD 值 RemoteDesktop_SuppressWhenMinimized 并将其设置为 2。
5.  关闭注册表编辑器。

# ant - 如何通过 Cygwin 在 Ant 中伪造 OS 系列

> ID：16198552
> 
> 赞同：3
> 
> 时间：2013-04-24T17:32:24.463
> 
> 标签：ant, cygwin

我有一个检查操作系统系列的**Ant脚本**

```
<os family="windows" /> 
```

因此它正在构建我的应用程序。我想使用**Cygwin**，我期待当我通过 Cygwin 调用它时，它会给我 Linux/Unix 版本，而不是 Windows 版本。但显然这并没有发生。

通过 Cygwin 运行时，我能以某种方式伪造操作系统吗？

我已经尝试将环境变量 $OS 设置为 Linux，但这没有帮助。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T19:00:08.730

一个简单的解决方案是将您的特定 linux 任务放在它自己的目标中，如下所示：

```
<target name="linuxbuild" if="islinuxbuild">
...
</target>
<target name="windowsbuild" unless="islinuxbuild">
...
</target> 
```

并使用以下命令开始为 linux 构建 ant：

```
ant -f yourbuild.xml -Dislinuxbuild=whatever 
```

否则 ：

```
ant -f yourbuild.xml 
```

自 Ant 1.8.x 以来，目标中的 if/unless 属性已被扩展以获得额外的灵活性，请参阅[Ant 手册 if/unless 属性](http://ant.apache.org/manual/properties.html#if+unless)，但我的示例仍然适用于任何 ant 版本。

# c++ - 在编译时将 XML 文件转换为 CodeSynthesis XSD 生成的数据对象模型

> ID：16198560
> 
> 赞同：2
> 
> 时间：2013-04-24T17:32:54.013
> 
> 标签：c++, xml, xsd, codesynthesis

[**在CodeSynthesis XSD**](http://www.codesynthesis.com/products/xsd/)的帮助下，可以从 XML 模式 (XSD) 生成 C++ 数据对象模型。然后可以在生成的 XML 解析函数的帮助下，在运行时将有效的 XML 文件读入此数据对象模型。

我想知道是否可以生成 C++ 代码，该代码在编译时启动一个表示特定 XML 文件的对象。换句话说，不是在运行时读取 XML 文件，而是在编译时生成 C++ 代码来获得与 XML 解析函数相同的对象。

我知道在编译时可以先将 XML 文件读入 C++ 数据对象模型，然后将其写入 CodeSynthesis XSD 支持的二进制格式之一。这肯定会在运行时加快读取数据的速度，但我很感兴趣是否可以生成 C++ 代码以获得“编译入”对象。

# javascript - 如何定义模式并仅在模式被破坏时才允许模式重复

> ID：16198564
> 
> 赞同：3
> 
> 时间：2013-04-24T17:32:59.510
> 
> 标签：javascript, regex, regular-language

我正在尝试编写一个 JavaScript 正则表达式以仅允许以下输入：

*   数字
*   中间有逗号的数字
*   中间有连字符的数字，但后面只能跟另一个数字或逗号，后面跟一个数字。这种模式可以再次重复。

到目前为止，我有以下表达式：

```
^[0-9]$|^[0-9]+$|^[0-9](-?,?[0-9])*$ 
```

但是，这是允许`1-1-1`的，这是我不想要的。连字符只有在后面没有另一个数字-连字符-数字组合时才会出现。

此链接可能有帮助：[http ://regexr.com?34ljt](http://regexr.com?34ljt)

以下样本应评估为有效：

> 01,03,05-08,10
> 01,03,05
> 01,03,05-08
> 01
> 1,1,5-6,1,1
> 1,1,5-6,1,1-3
> 12,12, 1-9
> 1-9,5,5
> 1-9,9,9,5-6
> 1-2
> 11-11
> 11,11
> 1,1
> 1,1,1
> 11,11,11
> 1111
> 1,1,1, 1,1,1
> 1
> 56,1
> 1,1
> 1,3
> 1,3,4,5
> 1,3

以下样本应评估为无效：

> sdfdf 11-11-11-11
> 1-1-1-1-1
> f
> 01
> ,
> 01,03,05-08, -1,4
> -,-5,8909
> 1,1,1-1-1
> 1,1 ,11-1111-1
> 1-1-1
> 1,,1
> 1--1
> 1-
> 1,,
> ,-1-
> df
> -1
> ,1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T17:45:56.793

很好的链接，并感谢提供足够的示例来彻底确定解决方案是否正确。这似乎有效：

```
^([0-9]+(-[0-9]+)?(,(?!$)|$))+$ 
```

[http://regexr.com?34lk6](http://regexr.com?34lk6)

所以：数字，可选地后跟一个破折号和更多数字，后跟一个逗号（除非逗号是行尾之前的最后一个字符）或行尾。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T17:41:11.993

尝试

```
/^\d+(-\d+)?(,\d+(-\d+)?)*$/ 
```

*进一步的评论*

如果存在连续范围，防止匹配的一种方法是添加负前瞻

```
(?!.*-\d+,\d+-) 
```

所以正则表达式变成

```
/^(?!.*-\d+,\d+-)\d+(-\d+)?(,\d+(-\d+)?)*$/ 
```

如果可以匹配否定前瞻内的模式，则它会阻止整个正则表达式匹配。使用`.*`，以便如果`-1,1-`在字符串前面的任何位置找到 eg，将阻止匹配。

# php - 查询无法将 php 变量存储在数据库中

> ID：16198574
> 
> 赞同：0
> 
> 时间：2013-04-24T17:33:18.963
> 
> 标签：php, mysql

```
<?php
session_start();
if(!isset($_SESSION["is_logged_in"]))
{
die("You are not logged in");
}

$con=mysql_connect("localhost","root","")
or die("Couldn't connect to Server");

$db=mysql_select_db("library")
or die("couldn't select database");

if(isset($_SESSION['cart']))
{
$id=$_SESSION['id'];
$id=mysql_real_escape_string($id);
echo $id;
$dt=date('m/d/Y');
$dt=mysql_real_escape_string($dt);
echo $dt;

**$q1=("INSERT INTO order VALUES(DEFAULT,$id,$dt)");**
$r1=mysql_query($q1) or trigger_error(mysql_error()." in ".$q1);

**$q2=("SELECT * FROM order WHERE uid=$id");**
$r2=mysql_query($q2) or trigger_error(mysql_error()." in ".$q2);

if($r2)
{

while($row2 = mysql_fetch_array($result)) 
{   
$oid=$row['order_id'];
$items=count($_SESSION['cart']);

for($i=1;$i<$items;$i++)
{
$isbn=$_SESSION['cart'][$i];
$q3=('INSERT INTO orderinfo(order_id,isbn) VALUES($oid,$isbn)');
$r3=mysql_query($q3) or trigger_error(mysql_error()." in ".$q3);
}
}
}
}
?> 
```

这段代码是我用来插入会话数组的，其中第一项作为用户 id，其余的产品 id 到数据库中....查询每次都失败并要求我参考手册..我相信有我将php变量存储到数据库中的方式存在问题..请帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:34:44.723

尝试这个：

`Order`是Mysql的保留字

修改这些行：

```
**$q1=("INSERT INTO `order` VALUES('DEFAULT','$id','$dt')");**

**$q2=("SELECT * FROM `order` WHERE uid=$id");** 
```

# php - 使用 PHP 更改环境变量

> ID：16198575
> 
> 赞同：0
> 
> 时间：2013-04-24T17:33:22.963
> 
> 标签：php, linux

我想在不使用标准输出的情况下将 PHP 中的变量提供给 bash。我的问题可以简化为以下问题：

**如何使这段代码工作？**

```
export A=1;
php -r "echo 'variable A equals: '.\$_SERVER['A'].\"\n\";"
php -r "\$_SERVER['A']=0;"
echo $A 
```

**编辑：**

以下代码不起作用：

```
export A=1;
php -r "echo 'variable A equals: '.\$_SERVER['A'].\"\n\";"
php -r "putenv(\"A=0\");"
// Same problem with:
// php -r "exec(\"export A=0\");"
echo $A 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:35:15.380

您想研究使用`putenv`. [http://php.net/manual/en/function.putenv.php](http://php.net/manual/en/function.putenv.php)

如果您在不同的范围内运行它（例如，让 PHP 脚本终止，然后运行 ​​BASH 脚本），请尝试以下操作以指定`myvar`为文件的输出：

```
$ myvar=$(php -f example.php) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T17:35:52.477

```
putenv("A=0"); 
```

应该可以按预期工作:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T17:37:10.060

这个怎么样？`exec("export A=".$_SERVER['A'].)`

# ios - 从 NIB 加载视图返回零帧视图 - 怎么办？

> ID：16198576
> 
> 赞同：1
> 
> 时间：2013-04-24T17:33:26.280
> 
> 标签：ios, objective-c

我有一个视图控制器，它正在创建另一个视图控制并将结果视图添加到它的子视图中。但问题是视图是使用框架 (0, 0, 0, 0) 创建的。

如果我手动设置框架是可以的，但我不想手动设置框架，我想要自动调整大小。这是代码：

```
GridViewController *gridVC = [[GridViewController alloc] initWithNibName:@"GridView" bundle:nil];
[self addChildViewController:gridVC];
[self.view addSubview:gridVC.view]; 
```

`self.view`有正常帧，并且`gridVc.view`有 (0,0,0,0) 帧；

在 xib 我有几个视图，视图连接正确，文件所有者设置正确，一切看起来都很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:16:25.507

当做这样的视图控制器包含时（顺便说一句，我希望你也有你的[`didMoveToParentViewController`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/didMoveToParentViewController%3a)电话），我总是设置`frame`，例如

```
gridVC.view.frame = self.view.bounds; 
```

诚然，我经常将我的子视图添加到一个不占用整个屏幕的容器中，因此在这种情况下它很关键，但是，我仍然不确定你为什么不愿只设置`frame`.

完成此操作后，假设您正确设置了自动调整大小的蒙版，所有内容都会根据需要自动调整大小。

仅供参考，Apple`frame`在示例代码中也设置了添加子视图的时间（参见示例[14-1](http://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomContainerViewControllers/CreatingCustomContainerViewControllers.html#//apple_ref/doc/uid/TP40007457-CH18-SW13)）。

显然，如果您使用自动布局，您将设置约束（或使用`translatesAutoresizingMaskIntoConstraints`），但想法是相同的。

# javascript - Bootstrap 导航栏（附加导航栏）在滚动期间调整大小

> ID：16198580
> 
> 赞同：2
> 
> 时间：2013-04-24T17:33:41.530
> 
> 标签：javascript, jquery, css, twitter-bootstrap, affix

我在早期开发中有一个以引导程序为主题的网站，并且正在经历来自粘性导航栏的奇怪行为。在 Chrome 中向下滚动一半后（以及最初在 Firefox 中滚动时），导航栏缩小到其宽度的一半。谁能想到造成这种情况的原因？

[您可以在http://studiomimo.com](http://studiomimo.com)看到此行为的演示

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T21:05:53.023

看起来您同时使用了词缀和滚动间谍。我认为您不需要同时使用两者，这可能是导致问题的原因。你最好只使用scrollspy。

为此，请将您的 body 标签更改为：

```
<body data-spy="scroll" data-target=".navbar" data-offset-top="50"> 
```

然后将您的导航栏 div 更改为：

```
<div class="navbar navbar-inverse navbar-fixed-top"> 
```

这将在让 scrollspy 工作的同时停止调整大小的问题。但是，如果您希望导航栏小于全宽，最好不要使用`navbar-fixed-top`导航栏，而是自己将导航栏固定到顶部，执行以下操作：

```
@media (min-width: 481px) {
  .navbar {
    position: fixed;
    z-index: 1030;
    width: 80%;
    margin: 20px auto;
  }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-09T10:03:13.690

在你的 CSS 中尝试这个以导航包装器 id 为基础

*html*

```
<nav id="nav-wrapper" class="navbar-default" role="navigation" data-spy="affix" data-offset-top="60"> 
```

*css*

```
#nav-wrapper.affix {
top: 0 !important;
width: 100% !important;
} 
```

它应该可以解决您的调整大小问题，*问候！*

# javascript - RequireJS、Shim、依赖项未正确加载

> ID：16198593
> 
> 赞同：2
> 
> 时间：2013-04-24T17:34:33.760
> 
> 标签：javascript, requirejs

我一直在从事一个前端脚本比以前更多的项目，我决定使用 RequireJS 来保持它的组织性。在整夜闲逛之后，我仍然遇到一些问题，其中某些依赖项似乎在事后加载。

例如，Sammy 需要 jQuery 才能工作。刷新我的应用程序会导致“Sammy，函数未定义”类型的错误。加载 jQuery 之前是否执行 Require 函数？

**需要配置：**

```
 require.config({
        paths: {
            'jquery': 'vendor/jquery.2.min',
            'sammy': 'vendor/sammy',
        },
        shim: {
            'jquery': {
                debs: [],
                exports: '$'
            },
            'sammy': {
                debs: ['jquery'],
                exports: 'Sammy'
            }
            ... 
```

至于我的导航：

```
define([
    'jquery',
    'sammy'
], function($, Sammy) {

    return Sammy(function() {
    ... 
```

在我大约 10% 的测试中，在点击 Sammy 功能时，应用程序会弹出以下内容：

```
Uncaught ReferenceError: jQuery is not defined sammy.js:2120
Uncaught TypeError: undefined is not a function 
```

RequireJS 的工作方式让我感到困惑。我错过了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-24T17:54:16.517

您的配置中有错字，正确的属性名称将`deps`不是[文档](http://requirejs.org/docs/api.html#config)`debs`中指定的名称。

```
'jquery': {
    deps: [],
    exports: '$'
},
'sammy': {
    deps: ['jquery'],
    exports: 'Sammy'
} 
```

# excel - 如何使用一个电子表格中的数据填写另一个电子表格中的类似字段？

> ID：16198595
> 
> 赞同：1
> 
> 时间：2013-04-24T17:34:34.173
> 
> 标签：excel, spreadsheet

每个月我都必须生成数百名员工的名册，其中包括联系信息、工作地点、等级等。我的任务是用相关详细信息填写任何空白单元格，我可以从上个月的电子表格或互联网数据库。名单每个月变化不大。如何使用旧名册中的信息填充新名册？例如，如果我在上个月的花名册中有 A1: `John Smith`, B1:和 A1: , B1:在本月的花名册中，有没有办法在上个月的电子表格中自动找到约翰史密斯的号码并将其显示在本月的电子表格中？`(123)-456-789``John Smith``n/a`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:52:26.297

您可以使用 的公式`vlookup`。

在新工作表的单元格 B1 中，您可以：

`=vlookup(A1, PreviousmonthSheet!A:B, 2, false)`

`vlookup`基本上在您选择的工作表中找到相应的值（在这种情况下，上个月的工作表）并返回某个索引旁边的值（在这种情况下，`John Smith`）。

在这种情况下，它需要“John Smith”，在 A 列的工作表中查找它`PreviousmonthSheet`，并返回 B 列中的值（A 列的第二列，因此在`2`那里）。False 表示完全匹配，您很可能想要使用它。

公式为：

`=vlookup(lookup_value, tablearray, column_index_no, [range_lookup])`

编辑：如果它是另一个工作簿，您需要在`tablearray`部分中插入工作簿名称，如下所示：

`=vlookup(A1, [Workbookname.xlsx]PreviousmonthSheet!A:B, 2, false)`

# draw - 如何为两个不同的点绘制 Voronoi 图

> ID：16198596
> 
> 赞同：2
> 
> 时间：2013-04-24T17:34:36.020
> 
> 标签：draw, diagram, points, voronoi

我试图弄清楚如何为两个不同的点绘制 Voronoi 图。

有人能帮我吗。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T12:13:08.873

如我的图片所示，您应该只连接您的点，然后通过中心画一条线，与该线段正交。

![图](https://i.stack.imgur.com/gEMR9.png)

# c++ - 不同对象类型之间的 C++ 赋值

> ID：16198600
> 
> 赞同：1
> 
> 时间：2013-04-24T17:34:48.047
> 
> 标签：c++, class, variable-assignment

我有一堆联合类（union_a、union_b、...），它们都具有相同的数据成员和不同的成员函数。我希望能够将任何类的对象分配给任何其他类的对象，并在任何 ctor 中使用它进行初始化。“工作”联合 union_z 用作中介。在 VC 中一切正常。在 GC 中，最后一行得到“错误：请求从 'union_a' 转换为非标量类型 'union_b'”。

可以的话请帮帮我，我...

```
union union_z{int m;};

union union_a{
    int  m;

    union_a(){}
    union_a(union_z x){m = x.m;}

    void operator=(union_z x){m = x.m;}
    operator union_z(){return *(union_z *)this;}
};

union union_b{
    int  m;

    union_b(){}
    union_b(union_z x){m = x.m;}

    void operator=(union_z x){m = x.m;}
    operator union_z(){return *(union_z *)this;}
};

union_a  a;
union_b  b(a);
b = a;
union_b  b1 = a; //error: conversion from ‘union_a’ to non-scalar type ‘union_b’ requested 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T17:38:53.877

G++ 是正确的。复制初始化的正式语法是将右边的表达式转换为`=`目标类型，然后复制它。在这种情况下，假设隐式转换为`union_a`to `union_b`。而且没有；唯一的转换需要两个用户定义的转换，并且两个用户定义的转换永远不能用于隐式转换。

请参阅 §8.5/16 和 §13.3.1.4（C++11，但关于早期版本的规则并没有改变）。

# ruby - 在回车符 (\r) 或换行符 (\n) 之前和之后用省略号截断行

> ID：16198602
> 
> 赞同：0
> 
> 时间：2013-04-24T17:34:48.970
> 
> 标签：ruby, jruby

我有这一段（可能我有不止一段）

```
=> "On the server side,\n\nmy EJB3 application uses Spring for configuring all sorts of things. So,\n\nmy EJBs all look up various ApplicationContexts and use them as a sort of\r\nwell, I was going to say poor man's JNDI, but the reality is that JNDI in the J2EE environment is really a poor man's Spring. :-)\n\nOn the GUI side,\n\nI use it instead of resource injection to get access to my EJBs.\n\nThat lets me test the GUI component with simple pojos.\n\nHope that helps." 
```

上`irb`，我将其分配到`x`

```
x = %q{On the server side,\n\nmy EJB3 application uses Spring for configuring all sorts of things. So,\n\nmy EJBs all look up various ApplicationContexts and use them as a sort of\r\nwell, I was going to say poor man's JNDI, but the reality is that JNDI in the J2EE environment is really a poor man's Spring. :-)\n\nOn the GUI side,\n\nI use it instead of resource injection to get access to my EJBs. \n\nThat lets me test the GUI component with simple pojos.\n\nHope that helps.} 
```

根据回车符（\r）和换行符（\n），我只需要上面段落中的这些细节，任何想法我该怎么做？

```
my EJB3 application uses Spring for configuring all sorts of things. So,...my EJBs all look up various ApplicationContexts and use them as a sort of...I use it instead of resource injection to get access to my EJBs.... 
```

非常简单的方法-假设我有`a\nabc\r\nd\r\nab\neba`并且搜索关键字是`b`，我只需要`abcabeba`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:14:57.753

我不知道`<em>\1</em>`这里的相关性如何，但我想你可能想要这个。

```
x.scan(/.*ejb.*/i).join("...") 
```

请注意，正则表达式处于单行模式。

或者，如果您在 Linux 上执行此操作，并且仍然需要处理 (not only `\n`but also) `\r`，那么这可能更安全：

```
x.scan(/[^\n\r]*ejb[^\n\r]*/i).join("...") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T18:14:22.797

```
s = eval("%q{a\nabc\r\nd\r\nab\neba}")
p s.split("\n").select{|x| x.include? 'b'}.join('')
#=>"abcabeba" 
```

# scala - Intellij 多模块 maven 项目，其中一个子模块中的更新不会传播到战争

> ID：16198604
> 
> 赞同：7
> 
> 时间：2013-04-24T17:34:53.063
> 
> 标签：scala, maven, jar, intellij-idea, war

我正在使用 Intellij Idea 12 并有一个多模块 maven 项目。

为了简单起见，让我们假设我有：

*   模块 A - 编译为 JAR
*   模块 B - 取决于模块 A 并编译为 JAR
*   模块 C - 取决于模块 B，但编译为 WAR

我知道 Intellij 有它自己的 maven 项目构建机制，所以当我第一次构建 WAR 并将其部署到 Tomcat 时，通常一切正常。当您需要在其中一个子模块中进行更改时，问题就开始了，例如模块 A 并重建战争（重建模块 C）

Intellij 似乎使用了以前构建的旧模块 A jar，并忽略了我在制作/构建模块 C 时在模块 A 中所做的任何更改。

我发现解决此问题的唯一方法是在模块 A 和 B 上运行 Maven 构建，并最初使用 Maven 构建 WAR 并将其部署为外部源。

问题是我要部署 10 个 WAR，以及 20 多个编译成 jar 的子模块。当我只想查看我在影响一个 WAR 的子模块之一中所做的更改时，重建所有战争是没有意义的。并且在支付 Intellij Ultimate 许可证的同时使用命令行在外部构建它们肯定没有意义（所以我可以使用应用程序服务器）

现在将此行为与其他 IDE 进行比较 1\. Netbeans 自然地通过 Maven 与 maven 项目一起工作，所有构建/部署等都是使用 Maven 完成的，而不是通过某种内部机制。2\. Eclipse 的内部机制也是如此，但所有 JAR 都会在 WAR 项目重建时更新。（或其他一些有效的魔法）

IDEA 是否有不同的工作方式，或者没有？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-02T07:35:48.620

最终我找到了一个混合解决方案：在运行 Tomcat 之前要做的事情：

1.  全部清洁
2.  构建、打包和注册（在存储库中）所有应该成为 JAR 的项目
3.  仅编译（不构建）WAR 项目
4.  使用 Intellij 构建 WAR 工件（这是热插拔可用性所必需的）

这就是我启动Tomcat的方式。

详细资料：

1.  创建 3 个 Maven 运行配置

    1.1**清理**所有项目![适用于所有项目的 Maven Clean](https://i.stack.imgur.com/KPaHf.png) 1.2使用 JAR 工件**构建所有项目。**您需要使用 '-pl' maven 选项手动包含所有项目。或者，您可以在启动此配置之前运行“Maven clean”（查看屏幕截图）![构建罐子](https://i.stack.imgur.com/qrzjO.png) 1.3使用 WAR 工件**编译所有项目 -****不使用 Maven 打包**![编译 WAR](https://i.stack.imgur.com/IdmAj.png)

2.  创建 Tomcat 配置以构建 War 工件并包含要在 Launch 之前运行的其他配置![在此处输入图像描述](https://i.stack.imgur.com/HmGT6.png)

现在，当 Tomcat 运行时，可以热交换代码更改（如果 JVM 允许）或简单地重新启动服务器以包含所有新代码/更改。这样做的缺点是 Tomcat 的启动时间稍长。这是我们愿意忍受的东西......现在

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T21:29:52.497

我认为热代码部署仅适用于爆炸的工件。在 IDEA 11 中，我重命名了分解后的目录，因为 maven artefacts 位于相同的位置并且名称相同。

# python - python linux时间戳到日期时间和反向

> ID：16198606
> 
> 赞同：7
> 
> 时间：2013-04-24T17:35:07.207
> 
> 标签：python, python-3.3

我想知道如何将日期时间转换`Wed Apr 24 19:25:06 2013 GMT`为 Linux 时间戳`1366831506000`（13 位）] 并使用 python 反转。

例如：

```
Wed Apr 24 19:25:06 2013 GMT 
```

到

```
1366831506000 
```

并从

```
1366831506000 
```

到

```
Wed Apr 24 19:25:06 2013 GMT 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-24T17:40:12.590

从字符串到时间戳，使用[`time.strptime()`](http://docs.python.org/3/library/time.html#time.strptime)，将结果`struct_time`元组传递给[`time.mktime()`](http://docs.python.org/3/library/time.html#time.mktime); 您的时间戳使用*毫秒*，而不是 UNIX 秒作为浮点值，因此您需要乘以 1000：

```
import time

datestr = "Wed Apr 24 19:25:06 2013 GMT"
time.mktime(time.strptime(datestr, "%a %b %d %H:%M:%S %Y %Z")) * 1000 
```

在另一个方向，使用[`time.strptime()`](http://docs.python.org/3/library/time.html#time.strftime)，传入`struct_time`由 创建的元组[`time.gmtime()`](http://docs.python.org/3/library/time.html#time.gmtime)，首先将时间戳除以 1000：

```
timestamp = 1366831506000
time.strftime("%a %d %b %Y %H:%M:%S GMT", time.gmtime(timestamp / 1000.0)) 
```

演示：

```
>>> datestr = "Wed Apr 24 19:25:06 2013 GMT"
>>> time.mktime(time.strptime(datestr, "%a %b %d %H:%M:%S %Y %Z")) * 1000
1366827906000.0
>>> timestamp = 1366831506000
>>> time.strftime("%a %d %b %Y %H:%M:%S GMT", time.gmtime(timestamp / 1000.0))
'Wed 24 Apr 2013 19:25:06 GMT' 
```

# java - Android通过url设置ImageButton背景

> ID：16198609
> 
> 赞同：0
> 
> 时间：2013-04-24T17:35:19.087
> 
> 标签：java, android, android-asynctask, imagebutton

我正在尝试通过 url 将背景图像添加到 ImageButton。

我已经像这样从 google android 文档中修改了 downloadimagetask。

```
class DownloadImageButtonTask extends AsyncTask<String, Void, Bitmap> {
        ImageView bmImage;

        public DownloadImageButtonTask(ImageButton bmImage) {
            this.bmImage = bmImage;
        }

        protected Bitmap doInBackground(String... urls) {
            String urldisplay = urls[0];
            Bitmap mIcon11 = null;
            try {
                InputStream in = new java.net.URL(urldisplay).openStream();
                mIcon11 = BitmapFactory.decodeStream(in);
            } catch (Exception e) {
                Log.e("Error", e.getMessage());
                e.printStackTrace();
            }
            return mIcon11;
        }

        protected void onPostExecute(Bitmap result) {
            bmImage.setImageBitmap(result);
        }
    } 
```

我收到一个错误 :: Caused by: java.lang.NullPointerException: println 需要一条消息

在这一行 :: Log.e("Error", e.getMessage());

我将此异步任务称为

```
new DownloadImageButtonTask((ImageButton) findViewById(R.id.my_image_btn))
            .execute("any image url"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:38:39.483

设置尝试设置

```
if( e.getMessage()!=null)
{
Log.e("Error", e.getMessage());
e.printStackTrace();
} 
```

或者干脆

```
String exception= (e.getMessage()!=null)?ex.getMessage():"Exception occured";
 Log.e("Error", exception); 
```

# servlets - 我正在用 servlet 和 jsp 开发在线考试系统

> ID：16198610
> 
> 赞同：-1
> 
> 时间：2013-04-24T17:35:21.817
> 
> 标签：servlets

我正在用 servlet 开发在线考试应用程序。当我使用 getParamter(-) 方法读取单选按钮值时，它的显示/返回“on”是某些参数名称的参数值。它随机改变它们的值。

例如，当我们首先要求它显示单选按钮的 2,5 个问题的“on”值时。第二次显示“on” 7,4 单选按钮问题。

请验证我的代码并告诉我我的错误是什么

# 代码

```
import java.io.IOException;
import java.io.PrintWriter;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.Statement;

import javax.servlet.RequestDispatcher;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

public class ExamSrv extends HttpServlet {

  public void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    int j = 1;
    PrintWriter pw = response.getWriter();
    response.setContentType("text/html");
    Connection con = null;
    ResultSet resultSet = null;
    Statement st = null;
    try {
      Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
      con = DriverManager.getConnection("jdbc:odbc:accdsn");
      st = con.createStatement();
      resultSet = st.executeQuery("select qno,question,option1,option2,option3,option4 from Level1 where qno<=10");
      pw.println("<form action=ansurl name=ans method=get>");
      while (resultSet.next()) {

        int k = resultSet.getInt(1);

        pw.println(k + ").");
        pw.println("<b><font size=3>" + resultSet.getString(2) + "</font></b><br><br>");
        pw.println("<input type=radio name=opt" + j + " value=1 unchecked/>a)<b>" + resultSet.getString(3) +
                   "</b> &nbsp;&nbsp;");
        pw.println("<input type=radio name=opt" + j + " value =2 />b)<b>" + resultSet.getString(4) +
                   "</b> &nbsp;&nbsp;");
        pw.println("<input type=radio name=opt" + j + " vaule=3 />c)<b>" + resultSet.getString(5) +
                   "</b> &nbsp;&nbsp;");
        pw.println("<input type=radio name=opt" + j + " value=4 />d)<b>" + resultSet.getString(6) +
                   "</b><br><br><br> ");

        j++;

      }
      pw.println("<input type=submit name=submit value=submit>");
      pw.println("</form>");

    } catch (Exception e) {
      e.printStackTrace();
    }
  }

  public void doPost(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException {
    doGet(req, res);
  }
} 
```

但我将表单方法修改为“POST”，它在浏览器上显示将不支持发布..

# 在读的时候

```
public class AnsSrv extends HttpServlet {
  public void doGet(HttpServletRequest req, HttpServletResponse response) throws ServletException, IOException {
    int j = 1, cnt = 0, fal = 0;
    PrintWriter pw = response.getWriter();
    response.setContentType("text/html");
    Connection con = null;
    ResultSet resultSet = null;
    Statement st = null;
    try {
      Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
      con = DriverManager.getConnection("jdbc:odbc:accdsn");
      st = con.createStatement();
      resultSet = st.executeQuery("select answer from Level1 where qno<=10");

      while (resultSet.next()) {
        if (req.getParameter("opt" + j).equals(resultSet.getString(1))
          {
           pw.println("opt"+j+"<br>"); //here it shows "on " value as on browser window
          cnt++;
        else
          fal++;
        j++;
      }

      pw.println("your marks are:" + (cnt - fal));

    } catch (Exception e) {
      e.printStackTrace();
    }

  }

  public void doPost(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException {
    doGet(req, res);
  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:02:39.783

```
while(resultSet.next())
{
           if(req.getParameter("opt"+j).equals(resultSet.getString(1)))
                 cnt++;
              else
              {            // block only if you wont to execute both the statements.
                fal++;
                j++;
              }

} 
```

在 Java == 中，它不比较字符串的值。它比较对象的引用。所以使用equals方法

# git - 为什么 git clone 不下拉描述文件？

> ID：16198611
> 
> 赞同：2
> 
> 时间：2013-04-24T17:35:24.907
> 
> 标签：git

我一直在设置 cgit（gitweb 的替代品），它从描述文件中提取 Repo 的描述。( `.git/description in a normal repo, and /description in a --bare`) 但是 git 似乎只是忽略了`git clone`(and `git clone --mirror`) 中的文件，这意味着当您 git clone 存储库时，描述文件与您执行新的 git init 相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T17:59:26.247

描述文件不是存储库的跟踪部分，并且在克隆期间不会遇到。这是设计的。它的唯一目的是为[GitWeb](https://git.wiki.kernel.org/index.php/Gitweb)命名存储库。

# java - 将格式应用于 JFormattedTextField 后，有没有办法强制验证？

> ID：16198614
> 
> 赞同：2
> 
> 时间：2013-04-24T17:35:32.227
> 
> 标签：java, swing, jformattedtextfield, numberformatter, inputverifier

我要做的第一件事是创建一个`NumberFormat`适合我需要的：

```
this.format = NumberFormat.getIntegerInstance();
this.format.setMinimumIntegerDigits(6);
this.format.setMaximumIntegerDigits(6);
this.format.setGroupingUsed(false); 
```

然后我将它应用到 JFormattedTextField：

```
this.fld_id = new JFormattedTextField(this.format); 
```

然后我设置这个字段的`InputVerifier`，像这样：

```
this.fld_id.setInputVerifier(new IdVerifier()); 
```

我`IdVerifier`只是看看输入的文本是否符合正则表达式：

```
private class IdVerifier extends InputVerifier {
        public boolean verify(final JComponent arg0) {
            final JFormattedTextField verifyJTF = (JFormattedTextField) arg0;

            if (!verifyJTF.getText().matches("\\d{6}")) {
                return false;
            }

            return true;
        }

        public boolean shouldYieldFocus(final JComponent arg0) {
            if (!this.verify(arg0)) {
                arg0.setBackground(Color.RED);
            } else {
                arg0.setBackground(UIManager.getColor("TextField.background"));
            }

            return true;
        }
} 
```

但是，当我这样做时，我会在 中输入一个值`JFormattedTextField`，比如说“1”。这被重新格式化为“000001” `NumberFormatter`。但是，在此示例中，文本字段的背景仍设置为红色。

什么是正确的方法来确保格式化的内容`JFormattedTextField`是被 消耗的`InputVerifier`？我预计默认行为是失去焦点，应用格式化程序，然后验证输入。然而，情况显然并非如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:51:55.080

查看 InputVerifier 的定义，听起来 GUI 工作不应该在`verify`or`shouldYieldFocus`方法中进行。InputVerifier 仅用于决定焦点是否应该从一个字段跳转到另一个字段。

我认为您最好将一个 ActionListener 附加到您的 JFormattedTextField 上，然后在该侦听器的主体中简单地调用您的正则表达式和红色绘制代码。然后每次文本字段的内容更改时都会进行检查。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-24T17:41:31.120

将正则表达式更改为`\\d{1,6}`，它可能不接受前导零作为数字

# javascript - JQuery 文件上传

> ID：16198615
> 
> 赞同：-1
> 
> 时间：2013-04-24T17:35:39.273
> 
> 标签：javascript, jquery, html, file-upload

我想知道如何在加载所有文件后立即调用函数。不是在他们上传的时候，我的意思是在他们的 html 加载之后。

我想在用户选择所有文件后准确地触发我的功能。在他们出现在屏幕上之后。我想对他们的 HTML 进行更改，所以我不仅需要在用户选择文件之后触发我的函数，而且需要在创建文件的 HTML 之后触发我的函数。

这是我正在使用的 API：http: [//blueimp.github.io/jQuery-File-Upload/](http://blueimp.github.io/jQuery-File-Upload/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:40:59.203

我认为这可能会解决您的问题。你应该看看这个：[https ://github.com/blueimp/jQuery-File-Upload/wiki/API#Callbacks](https://github.com/blueimp/jQuery-File-Upload/wiki/API#Callbacks)

> 使用它们的第二种方法是将事件侦听器绑定到小部件元素：
> 
> $('#fileupload')
> 
> ```
> .bind('fileuploaddrop', function (e, data) {/* ... */})
> 
> .bind('fileuploadchange', function (e, data) {/* ... */}); Each event name has "fileupload" as prefix. 
> ```
> 
> 注意：通过绑定方法添加额外的事件侦听器是保留 jQuery File Upload UI 版本的回调设置的首选选项。

所以你可以做你的自定义事件，例如调用`fileuploadcomplete`或任何最适合你的。

# php - 在 PHP 代码中选择第一张图片，而不是随机的

> ID：16198616
> 
> 赞同：0
> 
> 时间：2013-04-24T17:35:41.597
> 
> 标签：php

下面的代码打印出博客文章中的所有 IMG 标签，然后随机显示一张图片。如何制作代码以使其始终显示第一张图像？

```
$DOM = new DOMDocument();

$string =
'Test hei
<img src="bild1e1">
string
<img src="bilde2" />
Mere tekst her........
<img src="bilde3" />
<img src="bilde4" />
fffffff
';

preg_match_all('/<img[^>]+>/i', $string, $var);

echo 'Det finnes totalt <strong>' . count($var[0]) . '</strong> img-tager i stringen. Disse ble funnet:<br>';

foreach($var[0] as $id => $value)
        echo '#' . ($id+1) . ': ' . htmlspecialchars($value) . '<br>';

echo '<br><br>';

$randomPic = array_rand($var[0], 1);

$DOM->loadHTML($var[0][$randomPic]);
$tag = $DOM->getElementsByTagName('img');
foreach ($tag as $i)
        echo '<strong>Random bilde-URL:</strong> ' . $i->getAttribute('src'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T17:38:10.127

```
$DOM->loadHTML($var[0][$randomPic]); 
```

那么应该是

```
$DOM->loadHTML($var[0][0]); 
```

# rest - 尝试请求 RESTful URI 时，Jetty 日志返回“服务器发送 HTTP 状态代码 503：服务不可用”

> ID：16198632
> 
> 赞同：0
> 
> 时间：2013-04-24T17:36:33.760
> 
> 标签：rest, jetty, jax-rs

大家好，我正在尝试创建一个 RESTful Web 服务，它将通过 SOAP 从 SAP 应用程序中获取一些数据，然后将这些数据传输到 JSON，然后可以通过 REST 调用访问这些数据。

我正在使用 Jetty 作为我的应用程序服务器，当我尝试访问这个 URL 时，我在运行 Jetty 的终端中得到了这个： `http://localhost:9090/cxf/json/appName/filteredList/someVar=test?nocache=y` 我的浏览器只显示“{“MyData”：[]}”

`ERROR - SapSoapHelper - Loading wsdl from: file:/Users/me/workspace/projects/myProjects/target/classes/wsdl/myWSDL.wsdl ERROR - SapSoapHelper - There was a problem calling the web service com.sun.xml.internal.ws.client.ClientTransportException: The server sent HTTP status code 503: Service Unavailable at com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.checkStatusCode(HttpTransportPipe.java:196) at com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.process(HttpTransportPipe.java:168) at com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.processRequest(HttpTransportPipe.java:83) at com.sun.xml.internal.ws.transport.DeferredTransportPipe.processRequest(DeferredTransportPipe.java:105) at com.sun.xml.internal.ws.api.pipe.Fiber.__doRun(Fiber.java:587) at com.sun.xml.internal.ws.api.pipe.Fiber._doRun(Fiber.java:546) at com.sun.xml.internal.ws.api.pipe.Fiber.doRun(Fiber.java:531) at com.sun.xml.internal.ws.api.pipe.Fiber.runSync(Fiber.java:428) at com.sun.xml.internal.ws.client.Stub.process(Stub.java:211) at com.sun.xml.internal.ws.client.sei.SEIStub.doProcess(SEIStub.java:124) at com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:98) at com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:78) at com.sun.xml.internal.ws.client.sei.SEIStub.invoke(SEIStub.java:107) at com.sun.proxy.$Proxy49.runQueryAsAService(Unknown Source) at com.cirrus.web.sbus.sapbi.DynOpenOpps.filteredList(DynOpenOpps.java:92) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:597) at org.apache.cxf.service.invoker.AbstractInvoker.performInvocation(AbstractInvoker.java:173) at org.apache.cxf.service.invoker.AbstractInvoker.invoke(AbstractInvoker.java:89) at org.apache.cxf.jaxrs.JAXRSInvoker.invoke(JAXRSInvoker.java:166) at org.apache.cxf.jaxrs.JAXRSInvoker.invoke(JAXRSInvoker.java:93) at org.apache.cxf.interceptor.ServiceInvokerInterceptor$1.run(ServiceInvokerInterceptor.java:58) at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:439) at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303) at java.util.concurrent.FutureTask.run(FutureTask.java:138) at org.apache.cxf.workqueue.SynchronousExecutor.execute(SynchronousExecutor.java:37) at org.apache.cxf.interceptor.ServiceInvokerInterceptor.handleMessage(ServiceInvokerInterceptor.java:106) at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:263) at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:123) at org.apache.cxf.transport.http.AbstractHTTPDestination.invoke(AbstractHTTPDestination.java:206) at org.apache.cxf.transport.servlet.ServletController.invokeDestination(ServletController.java:213) at org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:154) at org.apache.cxf.transport.servlet.CXFNonSpringServlet.invoke(CXFNonSpringServlet.java:126) at org.apache.cxf.transport.servlet.AbstractHTTPServlet.handleRequest(AbstractHTTPServlet.java:184) at org.apache.cxf.transport.servlet.AbstractHTTPServlet.doGet(AbstractHTTPServlet.java:112) at javax.servlet.http.HttpServlet.service(HttpServlet.java:734) at org.apache.cxf.transport.servlet.AbstractHTTPServlet.service(AbstractHTTPServlet.java:163) at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:575) at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1365) at com.cirrus.web.sbus.sapbi.filter.CacheFilter.doFilter(CacheFilter.java:175) at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1336) at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:483) at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119) at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:520) at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:233) at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1061) at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:412) at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:192) at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:995) at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117) at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:250) at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:149) at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:111) at org.eclipse.jetty.server.Server.handle(Server.java:351) at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:451) at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:916) at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:647) at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:233) at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:75) at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:615) at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:45) at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:598) at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:533) at java.lang.Thread.run(Thread.java:680)`

我很确定我的注释是正确的，我想知道这是否可能是 Jetty 的问题。有什么建议吗？

这是我的 web.xml 文件的一个片段，我是 REST Web 服务的新手，所以我不确定还有哪些其他信息有助于弄清楚发生了什么。

```
<servlet-mapping>
<servlet-name>CXFServlet</servlet-name>
<url-pattern>/cxf/*</url-pattern>
</servlet-mapping> 
```

任何帮助将不胜感激，谢谢。

FIX：我终于弄清楚为什么会发生这种情况。我在公司防火墙后面工作，并在 ~/.bash_profile 中编辑了我的 $http_proxy 以适应这一点。我必须从 ~/.bash_profile 中删除我的 $http_proxy 设置才能使其正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:48:32.030

可能是以下情况之一。

1.  您的 Web 应用程序中的某些东西正在抛出基于[javax.servlet.UnavailableException](http://docs.oracle.com/javaee/6/api/javax/servlet/UnavailableException.html)的异常。Jetty 的内部 Servlet 实现将捕获它并以 503（服务不可用）响应。

2.  您的 webapp 正在尝试与抛出 503 的另一台服务器进行通信，并且此错误只是被转发回您的客户端（此假设基于`com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe`堆栈跟踪中存在该行）

# firefox-addon-sdk - Firefox Addon SDK 上的外部数据库？

> ID：16198635
> 
> 赞同：1
> 
> 时间：2013-04-24T17:36:37.117
> 
> 标签：firefox-addon-sdk

我是开发 Firefox 扩展的新手。

我打算做一个类似网络注释器扩展的东西，人们可以在不同的计算机上共享笔记。我正在考虑将笔记放在外部数据库上，例如，使用外部 MySQL 数据库。

是否可以在 Addon SDK 中执行此操作？先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:41:57.280

通常，开发人员解决此问题的方法是将 mysql 数据库作为 Web 服务公开给 Web（例如用 Node.js、python、php 或您最熟悉的任何东西编写）并在该 Web 中保存和获取数据使用 http 请求的服务。

Web 服务客户端部分，您将使用请求模块：

[https://addons.mozilla.org/en-US/developers/docs/sdk/latest/modules/sdk/request.html](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/modules/sdk/request.html)

# javascript - 你能用javascript填充只读输入字段吗？

> ID：16198637
> 
> 赞同：0
> 
> 时间：2013-04-24T17:36:53.510
> 
> 标签：javascript, internet-explorer-9

我正在编辑一些代码，这些代码使用 ajax 根据下拉列表中的用户选择来填写用户数据表单。我不希望用户编辑表单字段，所以我将输入字段设为只读。这产生了一个不确定的问题，有时，主要是在 IE9 和怪癖中，输入三个只读输入字段不会填充。但是，我只是让一个用户证明它发生在 chrome 中。

是否将输入字段标记为只读，保护它免受所有写入或仅写入免受用户干预？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:41:19.713

将输入字段标记为只读可以保护它免受用户干预。您可以使用脚本来更改标记输入字段的文本的值。如果您想更多地玩弄这个概念，我建议您访问[http://www.w3schools.com/tags/tryit.asp?filename=tryhtml_input_readonly 。](http://www.w3schools.com/tags/tryit.asp?filename=tryhtml_input_readonly)

快乐编码！路由映射器

# ios - 如何从 AudioUnits C 函数调用 Objective-C 方法？(iOS)

> ID：16198641
> 
> 赞同：0
> 
> 时间：2013-04-24T17:36:56.667
> 
> 标签：ios, audio, core-audio

我找到了一个很棒的关于 AudioUnits 的教程（[http://www.cocoawithlove.com/2010/10/ios-tone-generator-introduction-to.html](http://www.cocoawithlove.com/2010/10/ios-tone-generator-introduction-to.html)），我已经开始在我的系统上工作了；但是，我无法从 RenderTone C 函数调用我的 Objective-C 方法。

在与 RenderTone 相同的 m 文件中，我有以下方法：

```
- (Float32)signalGenerator:(int)sample withSampleRate:(int)Fs andFrequency:(float)frequency{ 
```

当我尝试从 RenderTone 函数调用此方法时，XCode 给我以下错误：“使用未声明的标识符‘signalGenerator’。” 如果它在同一个文件中，为什么它看不到这个方法？

谢谢阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:06:04.557

在`RenderTone()`函数中，

```
ToneGeneratorViewController *viewController = (ToneGeneratorViewController *)inRefCon; 
```

是您的视图控制器的实例，因此您可以调用您的方法

```
Float32 x = [viewController signalGenerator:13 withSampleRate:14 andFrequency:15]; 
```

从内部`RenderTone()`。要让编译器知道该方法，您可以

*   `RenderTone()`在方块内移动`@implementation ToneGeneratorViewController`，或
*   使用类扩展添加函数原型：

    ```
    @interface ToneGeneratorViewController ()
    - (Float32)signalGenerator:(int)sample withSampleRate:(int)Fs andFrequency:(float)frequency;
    @end 
    ```

# sql - 需要统计过去 24 小时内发生的状态代码

> ID：16198642
> 
> 赞同：0
> 
> 时间：2013-04-24T17:37:01.933
> 
> 标签：sql

我需要一些简单查询的帮助，该查询从 NetBackup 的错误日志数据库中提取最近的作业状态代码。

我是 SQL 新手（使用它的第二天），但设法组合了一个简单的脚本来显示相关数据以及如何通过特定状态代码对其进行过滤。

我的问题 - 我该如何修改它，以显示找到的状态代码列表......以及每个出现的次数？

如;

```
STATUS  COUNT
0       112
1        11
8         5
58        3
191       1
288       7
800       3 
```

（我意识到示例查询请求的数据比需要的多，但想显示字段名称等。）

```
SELECT
  id as 'Job ID',
  clientName as 'Client',
  mediaServerName as 'Media Server',
  statusCode as 'Exit Status',
  UtcBigIntToNomTime(startTime) as 'Start Time',
  UtcBigIntToNomTime(endTime) as 'End Time'  

FROM domain_JobArchive

WHERE
  DATEDIFF(hour, UtcBigIntToNomTime(endTime), GETDATE()) <= 24
  and
 statusCode = 1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:46:52.127

```
SELECT statusCode AS STATUS, COUNT(*) AS COUNT
  FROM domain_JobArchive
 WHERE DATEDIFF(hour, UtcBigIntToNomTime(endTime), GETDATE()) <= 24
 GROUP BY statusCode 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T17:46:58.580

```
SELECT statusCode, COUNT(*)
FROM domain_JobArchive
GROUP BY statusCode 
```

# java - 使用 jSoup 在应用程序中显示图像

> ID：16198643
> 
> 赞同：0
> 
> 时间：2013-04-24T17:37:02.917
> 
> 标签：java, android, android-layout, listview, jsoup

我正在尝试创建一个从网站（如 9gag）加载照片的简单应用程序。我正在使用 jSoup 和 asyncTask。问题是当我运行应用程序时，它只向我显示图像的 url。我该怎么做才能在 listView 中显示图像而不是 url。这是我的 LoadImages 类：

```
public class LoadImages extends AsyncTask<String, Integer, Elements> {

    private ArrayAdapter adapter;
    private ArrayList list;

    public LoadImages(ArrayList list, ArrayAdapter adapter)
    {
        this.list = list;
        this.adapter = adapter;
    }

    @Override
    protected Elements doInBackground(String... params) {
         org.jsoup.nodes.Document doc = null;
            try
            {
                doc =Jsoup.connect("http://mongol.co.il/").get();
                return  doc.select("img[src$=.png]");
            }
            catch (IOException e1)
            {
                e1.printStackTrace();
            }
        return null;
    }

    @Override
    protected void onPostExecute(Elements result) {
        super.onPostExecute(result);
        for ( org.jsoup.nodes.Element div : result )
        {
            list.add(div);
        }
        adapter.notifyDataSetChanged();

    }

} 
```

这是我的主要活动：

```
public class MainActivity extends Activity{

    private ListView listView;
    private ArrayAdapter adapter;
    private ArrayList list;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.listview);
         listView = (ListView) findViewById( R.id.listview); 
         list = new ArrayList();

          adapter = new ArrayAdapter(this,
                android.R.layout.simple_list_item_1, list);

            listView.setAdapter(adapter);
            new LoadImages(list, adapter).execute();

    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:47:50.597

显示图像，而不是 URL 字符串。查看此答案以获取更多信息：

[Android：从 URL 读取图像](https://stackoverflow.com/questions/6531273/android-image-reading-from-url)

[有没有另一种方法来显示来自 url 的图像？](https://stackoverflow.com/questions/9443959/is-there-another-way-to-display-image-from-url)

# ruby - 异常仅在行尾使用 `rescue` 捕获，但在使用 `begin rescue` 块时不会捕获

> ID：16198644
> 
> 赞同：0
> 
> 时间：2013-04-24T17:37:03.547
> 
> 标签：ruby, exception, rescue

我有一个失败的声明：

```
result = service.load_data() 
```

现在以下内容抑制了错误，然后我可以检查`nil`

```
result = service.load_data() rescue nil 
```

但是，当我执行以下操作时，初始错误会直接被抛出到 UI 并且我没有得到`details`异常。

```
begin
   result = service.load_data()
rescue => details         
   logger.fatal "Failed to load the data: #{details}"
end 
```

我确信我必须遗漏一个愚蠢的细节，但我似乎无法在这里发现问题。那么为什么不`rescue`调用块呢？

**更新：**我得到的错误是：

```
getaddrinfo: nodename nor servname provided, or not known 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T17:43:05.750

```
begin
   result = service.load_data()
rescue AnExceptionKlass => details    # here the name is SocketError    
   logger.fatal "Failed to load the data: #{details}"
end 
```

使用上述。

*尝试在此处复制错误，如下所示：*

```
require 'net/http'
Net::HTTP.start('http://www.google.com') do |http|
response = http.get('/')
puts response
end
#=> getaddrinfo: No such host is known.  (SocketError) 
```

*修复如下：*

```
require 'net/http'

begin

  htt = Net::HTTP.start('http://www.google.com')
  response = htt.get('/')
  puts response

rescue SocketError => details    # or the Exception class name may be SocketError    
   p "Failed to load the data: #{details}"
end

#=> "Failed to load the data: getaddrinfo: No such host is known. " 
```

# c# - 使用 MemoryStream 分配内存

> ID：16198645
> 
> 赞同：0
> 
> 时间：2013-04-24T17:37:06.480
> 
> 标签：c#, .net, memory

我的问题很简单..

当传递一个 MemoryStream 对象时，内部缓冲区（字节 []）是否在内存中再次分配？

问题来自内存碎片的地方，这在大规模系统中可能会出现问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T17:42:26.603

那要看。如果您通过构造函数从 byte[] 初始化 MemoryStream，则：不。MemoryStream 将拒绝调整大小，因为它只是现有缓冲区的一个窗口。

如果您创建一个新的 MemoryStream*而不*传入缓冲区，那么您将一个缓冲区写入内存流 - 那么：是的。在这种情况下，缓冲区是不相关的，即使它们碰巧具有相同的字节内容。

编辑：澄清 - 我只是指*建设*。之后，当你传递它时：不，当然它不是重复的。它是一个类：您只传递对单个对象的引用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T17:44:58.260

不，当传递任何对象时，您只是传递对该对象的引用。您仍在引用相同的`MemoryStream`，它仍在引用相同的内部缓冲区。没有任何东西被重新分配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T17:44:59.530

在 C# 中，每个非值类型实际上都是底层的引用，因此当您将 MemoryStream 传递给方法时，您应该只将引用传递给 MemoryStream，而不是 MemoryStream 的副本。

[http://msdn.microsoft.com/en-us/library/0f66670z(v=vs.71).aspx#vclrfpassingmethodparameters_referencetypes](http://msdn.microsoft.com/en-us/library/0f66670z(v=vs.71).aspx#vclrfpassingmethodparameters_referencetypes)

# sql - 查询结果为变量

> ID：16198648
> 
> 赞同：1
> 
> 时间：2013-04-24T17:37:10.123
> 
> 标签：sql, ms-access, vba

这就是我想要做的。单击 btnDraw 后，我希望 Access 运行查询 Test 并将结果带回字符串获胜者。然后在 lblWinner 中显示结果。

```
Private Sub btnDraw_Click()

Dim winner As String

winner = ???????

lblWinner.Caption = winner

End Sub 
```

这是 TEST 查询的 SQL 代码：

```
SELECT TOP 1 [Goth Table].representative
FROM [Goth Table]
WHERE ((([Goth Table].[Would you like to be entered in the drawing])=Yes))
ORDER BY Rnd(Int(Now()*id)-Now()*id); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:42:30.950

尝试：

```
 Winner=
 currentdb.openrecordset("
 SELECT TOP 1 [Goth Table].representative
 FROM [Goth Table]
 WHERE [Goth Table].[Would you like to be entered in the drawing]=Yes
 ORDER BY Rnd(Int(Now()*id)-Now()*id);").fields(0)
 ") 
```

我添加了一些换行符以提高可读性。您可能想要删除这些。我也很好奇你的 Order By 条款。这不是您问题的一部分，但是按随机数排序如何让您成为赢家？

# c++ - 如何在其他计算机上运行 Qt 5 应用程序 (Windows 7)

> ID：16198649
> 
> 赞同：12
> 
> 时间：2013-04-24T17:37:10.227
> 
> 标签：c++, windows, qt, dll, windows-7-x64

我在 Windows 7 Ultimate 上使用 Qt 5.0.2 开发了一个简单的应用程序。作为编译器，QtCreator 使用了 MSVC2012_64bit。而且我无法将我的应用程序移动到其他计算机上。这没用。Qt 应用程序需要我找不到的 DLL。依赖资源管理器认为`.dll`没有找到下面的s。我在哪里可以找到它们？为什么这个问题如此广泛传播？所有人都抱怨他们`.exe`用Qt开发的不能在其他电脑上工作。 ![在此处输入图像描述](https://i.stack.imgur.com/fRN24.png)

**EDIT1：**顺便说一句，当我添加`DCOMP.dll`从互联网下载时，未找到的 dll 变成现在的 2-3 倍 :)

**EDIT2：**另请注意，在其他计算机（Windows 7 Home Premium）上，当我双击 exe 文件时，它显示它加载并且没有效果，根本没有错误。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-24T20:58:03.603

这是我需要的 dll 列表，并且我已经复制了该`C:\Qt\Qt5.0.2\5.0.2\mingw47_32\plugins\platforms`文件夹：

![在此处输入图像描述](https://i.stack.imgur.com/CDKYD.png)

就这个，它对我有用。顺便说一句，我将 Windows 7 Ultimate 64x 和 Qt 5.0.2 用于 Qt 的 Windows 32 位（MinGW 4.7、650 MB）包。

编辑：您可能还需要复制 QtCreator 的 .dll，并且您可能需要有一个以`qt.conf`以下内容命名的文件（从@Renato 答案复制）：

```
[Paths]

Libraries=./platforms 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-09-08T13:35:00.077

只需`qt.conf`使用以下内容将文件添加到您的应用程序目录

```
[Paths]

Libraries=./platforms 
```

然后将您将在目录 C:\Qt\Qt5.1.1\Tools\QtCreator\bin 中找到的子目录“平台”复制到同一个应用程序目录

就这样。

这解决了，因为 qtcore.dll 是使用 qt 安装的内部路径编译的。（我不知道为什么！）。因为，当应用程序启动时，qtcore 始终会读取 qt.conf，“平台”中的库将被包含在内，并且该应用程序可以在任何主机上运行。

警告：qtcore 和平台子目录必须来自同一个 qt 安装。

对不起英语，但解决方案工作正常。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-09-23T01:17:10.210

现在的 Qt（至少从 Qt 5.2 开始，如果不是更早的话）附带“windeployqt.exe”，当指向您编译的程序时（并且，如果像我一样使用它们，作为“-- qmldir path/to/QML/files" 对于 Qt Quick 程序）应该将所有必需的 DLL 输出到与您的编译程序当前所在的目录相同的目录中。因此，例如，对于我自己在本地构建机器上，我运行了以下内容：

```
 windeployqt --qmldir C:\Code\AppSource C:\Code\build-msvc2010\release 
```

这是使用 Qt 5.5 在我的 $PATH 中的 Qt \bin 目录（或者，我猜在 Windows 用语中，%PATH% ;)）使用 Qt 5.5，尽管我在 5.2 和 5.3 中也做了同样的事情。

IIRC，如果使用 MSVC 作为编译器，我仍然需要手动复制这些 DLL（在我的情况下是 msvc2010，因此是 msvcp100.dll 和 msvcr100.dll），但我可能记错了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-28T21:10:43.593

感谢各位的帮助！

对我来说，只是以某种方式添加`qwindows.dll`到`/platforms`目录并没有削减它。
通过直接将整个**插件**目录复制到我的应用程序的二进制目录并创建一个`qt.conf`包含以下内容的文件，我终于让一切正常工作：

```
[Paths]
Plugins=./plugins 
```

# javascript - 单击时清除 Javascript 中的表单字段

> ID：16198652
> 
> 赞同：4
> 
> 时间：2013-04-24T17:37:17.133
> 
> 标签：javascript, forms

很抱歉提前提出新问题！我正在用 Javascript 制作一个计算器应用程序，并且很难使用“C”（清除）按钮来清除该字段。编辑：澄清一下，清除按钮不仅应该清除字段，还应该清除内存中的所有内容，以便我可以开始新的计算。`<input type="reset" value="C"/>`清除该字段，但保留我在内存中按下的最后一个按钮。

```
 <script>
      input = "";

      function handleClick(data) {

        input += data;
        document.getElementById("output").value = input;
        console.log(input);
      }

      function evaluateExpression(data) {
        input = document.getElementById("output").value = eval(input);
      }

      function clear(data) {
        input = data;
        input = document.getElementById("output").reset(); 
        console.log(input);
      }

    </script>

    <div id="calculator">

      <form>
        <input type="text" id="output" />
      </form>

      <button onclick="handleClick(1)">1</button>
      <button onclick="handleClick(2)">2</button>
      <button onclick="handleClick(3)">3</button>
      <button onclick="handleClick(4)">4</button>
      <button onclick="handleClick(5)">5</button>
      <button onclick="handleClick(6)">6</button>
      <button onclick="handleClick(7)">7</button>
      <button onclick="handleClick(8)">8</button>
      <button onclick="handleClick(9)">9</button>
      <button onclick="clear(0)">C</button>
      <button onclick="handleClick('+')">+</button>
      <button onclick="handleClick('-')">-</button>
      <button onclick="handleClick('/')">/</button>
      <button onclick="handleClick('*')">*</button>
      <button onclick="evaluateExpression()">=</button>
    </div> 
```

“清除”功能只是不想工作。我哪里错了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T17:40:19.390

在表单上进行重置。[关联](http://www.w3schools.com/jsref/met_form_reset.asp)

```
document.getElementById("frm").reset(); 
```

或像这样设置文本框的值

```
 document.getElementById('output').value = ""; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T17:38:43.447

为什么不只使用内置`reset`类型？

```
<input type="reset" value="C"/> 
```

这必须在`<form>`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-10-08T15:19:27.453

对于重置表单输入字段，这对我有用：

```
 document.getElementById('elementId').value = ""; 
```

如果您尝试重置页面上不是表单的元素，这对我有用：

```
 document.getElementById('elementId').innerHTML = ""; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T17:43:22.680

这是清除输入字段值的示例

```
<input id="entry" type="text"></input>
<button id="clear">Clear</button>

var entry = document.getElementById("entry"),
    clear = document.getElementById("clear");

function clearfield() {   
    // EDIT: place code for clearing anything else that would be affected here
    entry.value = "";
}

clear.addEventListener("click", clearfield, false); 
```

在[jsfiddle上](http://jsfiddle.net/Xotic750/VCj7W/)

这是使用[form.reset的示例](https://developer.mozilla.org/en/docs/DOM/form.reset)

```
<form id="myForm">
    <input id="entry" type="text"></input>
</form>
<button id="clear">Clear</button>

var clear = document.getElementById("clear"),
    form = document.getElementById("myForm");

function clearfield() {
    // EDIT: place code for clearing anything else that would be affected here
    form.reset();
}

clear.addEventListener("click", clearfield, false); 
```

在[jsfiddle上](http://jsfiddle.net/Xotic750/4YzS6/)

此外，内联 javascript 被认为是不好的做法，您应该考虑使用诸如[addEventListener](https://developer.mozilla.org/en-US/docs/DOM/EventTarget.addEventListener?redirectlocale=en-US&redirectslug=DOM/element.addEventListener)之类的方法。

IE`onclick="doit();"`

> 为什么要使用 addEventListener？
> 
> addEventListener 是注册 W3C DOM 中指定的事件侦听器的方法。它的好处如下：
> 
> 它允许为事件添加多个处理程序。这对于即使使用其他库/扩展也需要正常工作的 DHTML 库或 Mozilla 扩展特别有用。当侦听器被激活时，它可以让您对阶段进行更细粒度的控制（捕获与冒泡）它适用于任何 DOM 元素，而不仅仅是 HTML 元素。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-24T17:41:04.090

你不能只将输出文本设置为空白字符串吗？

（ 或者 ）

如果您使用计算器将其设置为 0，则更有可能？

```
document.getElementById("output").value = 0; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-24T17:45:12.080

你想这样做[吗？](http://jsfiddle.net/Q6Wqn/1/)

然后试试这段代码，

```
function clear(data) {
         document.getElementById("output").value=data; 
      } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-24T17:44:29.367

点击 C 按钮，清除输出值

```
 document.getElementById('output').value = ""; 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-07-02T22:21:14.887

```
 $(function(){
    $("input").click(function(){
        if(this.value == 0)
        {
            this.value='';
            return;
        }
        else
        {
            return;
        }
    });
}); 
```

将“输入”改为#YourFieldId，去掉里面的if，但保留this.value='';

如果您可以使用 jquery，那是清除单击字段的最佳方法...

您还可以始终有条件检查输入，然后像上面的代码一样清除其中包含“0”的输入字段。

# eclipse - 颠覆移动文件

> ID：16198653
> 
> 赞同：1
> 
> 时间：2013-04-24T17:37:17.243
> 
> 标签：eclipse, subclipse

我正在 Eclipse/Subclipse 下开发一个项目，看起来 Subclipse 行为不端。

出于某种原因，一个文件（我们称之为`report.xml`）不断被重命名`report.xml.svntmp`。（我假设 Subclipse 是基于该扩展的罪魁祸首；我不确定它是否真的如此。）显然，这会导致想要查看该文件的代码出现问题。有人对造成这种情况的原因以及如何阻止它有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:47:05.690

如果你刷新它会消失吗？唯一使用该文件扩展名的是一些代码来修复 Eclipse 中的拖放复制和粘贴操作。Eclipse 将这些作为文件删除发送，这会导致 Subclipse 运行 svn delete。有一些代码可以检测文件何时立即被新版本替换。要撤消删除，我们必须运行 svn revert。但是，这也会替换文件内容。因此，当前文件内容被放入 .svntmp 文件中，然后在恢复运行后移回原位。

见：
[http ://subclipse.tigris.org/issues/show_bug.cgi?id=772](http://subclipse.tigris.org/issues/show_bug.cgi?id=772)

[http://subclipse.tigris.org/issues/show_bug.cgi?id=781](http://subclipse.tigris.org/issues/show_bug.cgi?id=781)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T18:29:27.980

因此，不要将 SVN 管理的文件夹从一个项目复制到另一个项目。你复制了一些 SVN 信息，这会导致 Subclipse 变得混乱并且有点破坏性。

# ruby-on-rails - 编辑链接不适用于在 ruby on rails blog 中编辑评论

> ID：16198654
> 
> 赞同：7
> 
> 时间：2013-04-24T17:37:27.573
> 
> 标签：ruby-on-rails, ruby, hyperlink

我正在尝试在博客中实现编辑评论功能。我可以在文章上创建评论并显示它们。当我点击文章特定评论的“编辑”链接时，它需要我编辑评论表单，但它不包含任何内容。就像我们编辑关于堆栈溢出的任何评论或问题一样，我们需要编辑带有内容的页面。但就我而言，我需要编辑评论页面，但它是空的（不包含评论内容）。以下是我的代码文件。

评论控制器.rb

```
 class CommentsController < ApplicationController
         before_filter :user_signed_in, except: [:create]
        def new
          @comment = Comment.new
        end

        def create
          @article = Article.find(params[:article_id])
          @comment = @article.comments.build(params[:comment])
          @comment.user_id = current_user.id
          @comment.save
            flash[:success] = "Comment created!"
            redirect_to article_path(@comment.article)
        end

        def edit
        @comment = Comment.find(params[:id])
        end

        def update
         @comment = Comment.find(params[:id])
         @article = @comment.article
         respond_to do |format|
          if @comment.update_attributes(params[:comment])
            redirect_to @article_path(@article)
          else
           render :action => "edit" 
          end
        end

        def destroy
         @comment = Comment.find(params[:id])
        @article = Article.find(params[:article_id])
        @comment.destroy
           redirect_to @article_path(@artilce) 
        end

    end 
```

评论/edit.html.erb

```
 <h3>Editing comment</h3>
    <%= render :partial => 'comment_form' %> 
```

评论/_comment_form.html.erb

```
<%= form_for ([@article, Comment.new]) do |f| %>
 <%= f.text_area :content, :style => "width:727px; height:100px; border: 1px solid #999999;margin-top:80px; background-color:#FFFFFF;margin-left:-33px" %>
     <div class="actions">
     <%= f.submit "Add Comment", :style => "margin-right:20px; margin-left:560px; background-color:#66C9Ef; color:#FFFFFF; border: 0px solid #82b548; border-radius: 3px 3px 3px 3px; font-size: 1.3rem;" %>
  </div>
<% end %> 
```

comments/_comment.html.erb （这里我给出了编辑文章评论的链接）

```
 <% if @article.comments.count  >= 1 %>
  <div style="border: px solid #66c9ee;border-radius: 0px 0px 0px 0px;margin: 10px -30px 15px; padding:     10px 15px 25px; background: none repeat scroll 0 0 #F2F2F2; width:700px; font-size: 1.2em;border-bottom: 0px solid #DDDDDD;">   
      <%= comment.content %>
         <div id="tabula"> 
            <ul id="tabula">
             <li> <div style="color: #0077CC;margin-rigth:200px; font-size: 1.0em;margin-top:4px;background-color:#;"> <%= comment.user.username if comment.user %></div></li>
             <li> <div style="color: #0077CC; background-color:; margin-top:4px; margin-left:25px;"> <p> <%= time_ago_in_words(comment.created_at.in_time_zone("Asia/Calcutta"))  unless comment.created_at.nil? %>  </p></div></li>
             <li> <div style="color: #0077CC; background-color:; margin-top:4px; margin-left:25px;"> <%= link_to "edit", edit_article_comment_path(@article ,comment) %> </div></li>
            </ul>
           </div>
    <% else %>
        <div style="color:#0077CC;margin-left:25px;font-size:1.4em;"> be first to comment</div>
  <% end %> 
```

耙路线结果。（不完整）

```
 articles GET    /articles(.:format)                               articles#index
                     POST   /articles(.:format)                               articles#create
         new_article GET    /articles/new(.:format)                           articles#new
        edit_article GET    /articles/:id/edit(.:format)                      articles#edit
             article GET    /articles/:id(.:format)                           articles#show
                     PUT    /articles/:id(.:format)                           articles#update
                     DELETE /articles/:id(.:format)                           articles#destroy
     dashboard_index GET    /dashboard(.:format)                              dashboard#index
                     POST   /dashboard(.:format)                              dashboard#create
       new_dashboard GET    /dashboard/new(.:format)                          dashboard#new
      edit_dashboard GET    /dashboard/:id/edit(.:format)                     dashboard#edit
           dashboard GET    /dashboard/:id(.:format)                          dashboard#show
                     PUT    /dashboard/:id(.:format)                          dashboard#update
                     DELETE /dashboard/:id(.:format)                          dashboard#destroy

                   tags GET    /tags(.:format)                                   tags#index
                         POST   /tags(.:format)                                   tags#create
                 new_tag GET    /tags/new(.:format)                               tags#new
                edit_tag GET    /tags/:id/edit(.:format)                          tags#edit
                     tag GET    /tags/:id(.:format)                               tags#show
                         PUT    /tags/:id(.:format)                               tags#update
                         DELETE /tags/:id(.:format)                               tags#destroy
        article_comments GET    /articles/:article_id/comments(.:format)          comments#index
                         POST   /articles/:article_id/comments(.:format)          comments#create
     new_article_comment GET    /articles/:article_id/comments/new(.:format)      comments#new
    edit_article_comment GET    /articles/:article_id/comments/:id/edit(.:format) comments#edit
         article_comment GET    /articles/:article_id/comments/:id(.:format)      comments#show
                         PUT    /articles/:article_id/comments/:id(.:format)      comments#update
                         DELETE /articles/:article_id/comments/:id(.:format)      comments#destroy
                         GET    /articles(.:format)                               articles#index
                         POST   /articles(.:format)                               articles#create
                         GET    /articles/new(.:format)                           articles#new
                         GET    /articles/:id/edit(.:format)                      articles#edit
                         GET    /articles/:id(.:format)                           articles#show
                         PUT    /articles/:id(.:format)                           articles#update
                         DELETE /articles/:id(.:format)                           articles#destroy 
```

路线.rb

```
 Mau::Application.routes.draw do
      devise_for :users
      root :to => 'articles#index'
      resources :articles
      resources :dashboard
      resources :tags
      resources :articles do
      resources :comments
    end
    end 
```

文章控制器.rb

```
class ArticlesController < ApplicationController
  before_filter :is_user_admin, only: [:new, :create, :edit, :destroy]
  before_filter :log_impression, :only=> [:show]

    def is_user_admin
      redirect_to(action: :index) unless current_user.try(:is_admin?) 
      return false 
    end

   def log_impression
     @article = Article.find(params[:id])
     # this assumes you have a current_user method in your authentication system
      @article.impressions.create(ip_address: request.remote_ip,user_id:current_user.id)
   end

      def index
          @articles = Article.all(:order => "created_at DESC")
      @article_titles = Article.first(10)
      @tags = Tag.all
      end

    def show
      @article = Article.find(params[:id])
      @related_articles = Article.joins(:taggings).where('articles.id != ?', @article.id).where(taggings: { tag_id: @article.tag_ids })           
      @article_popular =  Article.order('articles.impressions_count DESC').limit(5)
    end

      def new
      @article = Article.new
      end

    def create
      @article = Article.new(params[:article])
      @article.user_id = current_user.id
      if @article.save
        flash[:success] = "article created!"
        redirect_to article_path(@article)
      else
        render 'new' 
      end 
    end

    def destroy
      @article = Article.find(params[:id])
      @article.destroy
      redirect_to action:  'index'  
    end

    def edit
      @article = Article.find(params[:id])
    end

    def update
      @article = Article.find(params[:id])
      if @article.update_attributes(params[:article])
       flash.notice = "Article '#{@article.title}' Updated!"
       redirect_to article_path(@article)
      else 
        render 'edit'
      end
    end
end 
```

articles/show.html.erb（这只是show的相关代码）

```
 <div id="commentform">
         <%= render :partial => 'comments/comment_form' %>
           <% @article.comments.each do |c| %>
             <% if !c.nil? %>
               <div id ="commentdisplay"> <%= render partial: 'comments/comment', :locals => { :comment => c } %> </div>
             <% end %> 
            <% end %> 
       </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T17:44:57.680

```
form_for ([@article, Comment.new]) 
```

应该

```
form_for ([@article, @comment]) 
```

在评论/_comment_form.html.erb

# android - 在 Android 中被打包为 Intent 后从 Messenger 中检索 Handler

> ID：16198657
> 
> 赞同：1
> 
> 时间：2013-04-24T17:37:48.420
> 
> 标签：android, android-intent, xamarin, android-handler, messenger

**注意：以下所有代码均基于 C#/Mono/Xamarin.Android。**

我有一个后台服务，它在某个时刻启动一个活动并将其传递给一个处理程序，包装在一个 Messenger 中：

```
intent.PutExtra("myHandler", new Messenger(handler));
context.StartActivity(intent); 
```

当活动开始时，我想从意图中解开该处理程序，并在用户执行某些操作（例如单击按钮）时使用它将消息发送回服务。我尝试了明显的：

```
override void OnCreate(Bundle bundle)
{
    ...

    myButton.Click += (s, e) => {
        var messenger = (Messenger)Intent.GetParcelableExtra("myHandler");
        var handler = (Handler)messenger.Binder; // This fails with invalid cast.

        handler.SendMessage(new Message() { What = MyButtonClicked });
    };
} 
```

调试器告诉我它`message.Binder`是 Handler 类型，但转换失败。谷歌没有发现任何有用的东西。我可能做错了什么，不是吗？

**编辑：天哪，我以某种方式设法忽略了该`Messenger.Send()`方法。显然，我应该使用它来向包装的 Handler 发送消息！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:01:41.887

正确的方法是使用`messenger.Send()`方法。

# neural-network - 前馈神经网络中的错误检查

> ID：16198658
> 
> 赞同：1
> 
> 时间：2013-04-24T17:37:52.890
> 
> 标签：neural-network

我的网络的错误是否可能会减少，然后再次增加？只是想检查我是否以正确的方式编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:00:44.947

是的，错误可能会暂时增加。这是因为您没有一直测试一个输入和预期的输出（而且您不应该这样做，因为这样网络将专门用于该特定的输入-输出集）。神经网络并不隐含地“知道”它正朝着正确的方向前进。您基本上是在遍历误差表面以找到误差低于某个阈值的位置。因此，在特定时期内误差肯定会增加，但*总体而言*，随着反向传播根据误差调整权重，您的误差率应该会降低。

例如，假设您正在尝试创建一个可以识别数字的神经网络。因此，您为“1”和预期输出提供净输入。输出不匹配，因此您调整权重。所以这意味着网络识别“1”的误差会更低。但是下一个输入可能是“4”，而“4”的误差可能更大，因此网络将再次自我调整。关键是为权重找到一种“快乐的媒介”，以便它们识别输入并在一定的误差阈值内提供适当的输出。

但是，我不确定您所说的“减少，然后增加直到最后一个时期”是什么意思。你是只训练一定数量的 epoch，还是训练到你的网络达到某个错误阈值？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T18:38:07.493

作为对 Vivin Paliath 回答的补充，典型的培训如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/aiory.png)

请注意，如果网络以太大的学习率进行训练，它可能会[破坏训练性能](http://www.mathworks.com/help/nnet/examples/too-large-a-learning-rate.html)：

![在此处输入图像描述](https://i.stack.imgur.com/fDYQA.png)

相关：[反向传播应该使用什么学习率？](https://stackoverflow.com/a/11415434/395857)

# javascript - 当通过匿名函数包围对象时，显示错误消息

> ID：16198663
> 
> 赞同：1
> 
> 时间：2013-04-24T17:38:14.770
> 
> 标签：javascript, anonymous-function

我有以下简单的例子。

```
(function() { 
var note = {
   show: function() {
        alert('hi');
    }
 };
})(); 
```

使用时

```
note.show(); 
```

显示错误信息`ReferenceError: note is not defined`。但是当使用没有被匿名函数包围的笔记对象时工作正常。

现在，如何在匿名函数之外或其他页面中使用笔记对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T17:41:53.257

我相信您打算使用类似模块模式的东西。一个非常基本的例子是：

```
var note = (function() { 
 return {
   show: function() {
        alert('hi');
    }
 };
}()); 
```

这仅在您内部有闭包时才有用，例如：

```
var note = (function() { 
   var someNumber = 10;
   return {
      show: function() {
         alert('hi');
      },
      someNumberTimes(n) {
         return someNumber * n;
      }
   };
}());
console.log(note.someNumberTimes(5)); // 50 
```

# ruby-on-rails - 搜索后不显示搜索数据

> ID：16198665
> 
> 赞同：0
> 
> 时间：2013-04-24T17:38:18.093
> 
> 标签：ruby-on-rails, ransack

我已经安装了ransack，它似乎很容易使用。但是，当我单击搜索时，它只会刷新页面，不会显示正确的数据。在页面上，我有一个搜索框，其中列出了所有注册的用户名（管理员和用户）。对于搜索框，我输入了“管理员”，当我单击搜索时，页面重新加载，我继续看到所有注册用户（管理员和用户）。它应该仅在搜索后显示“管理员”。知道为什么会这样吗？

用户控制器：

```
 def index
     @search = User.search(params[:q])
     @users = @search.result
     @users = User.all
   end 
```

索引.html：

```
<%= search_form_for @search do |f| %>
  <div class="field">
    <%= f.label :username_cont, "Name contains" %>
    <%= f.text_field :username_cont %>
  </div>
  <div class="actions"><%= f.submit "Search" %></div>
<% end %>

<% @users.each do |user| %>
    <li>
       <%= link_to user.username, user %>
        <% if current_user.admin? || current_user == @user %>
            <%= link_to "Edit #{user} profile", user %>
            | <%= link_to "delete", user, method: :delete,
                                          data: { confirm: "You sure?"} %>
        <% end %>
        </li>
        <% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:41:13.790

您应该得到所有结果而不是搜索结果......您正在覆盖实例变量

这个：

```
@users = @search.result
@users = User.all 
```

应该只是：

```
@users = @search.result 
```

或者更好：

```
@search = User.search(params[:q])
if params[:q].present?
  @users = @search.result
else
  @users = User.all
end 
```

综上所述...您的表单是否提交了“q”的参数？我不知道洗劫，但我认为你的形式也需要改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T17:51:43.367

您正在使用 覆盖搜索结果`@user = User.all`。删除该行。

您的表单可能没问题，因为那是您正在使用的 ransack builder，并且您说它返回到当前页面。当它返回到当前页面时，您`http://localhost:3000/users?q= (search parameters here)`在 url 中看到了吗？

# android - 如何在 Android 中更改微调器的列表背景颜色

> ID：16198666
> 
> 赞同：16
> 
> 时间：2013-04-24T17:38:21.577
> 
> 标签：android, android-spinner

我正在动态创建一个新的微调器，如何更改我的列表背景颜色？

当前的背景颜色是一些深灰色：

![两个木偶](https://s10.postimg.cc/dkxj9kkyh/image.png) 当我将微调器的背景属性更改为白色时，我遇到了这种不需要的情况：

![两个木偶](https://s2.postimg.cc/wnl6pjqfd/image.png) 我希望它在活动中是透明的，只有当我打开微调器（按下它）时，我希望背景是白色的。

这是我创建微调器的代码：

我正在创建适配器：

```
 mAdapter = new ArrayAdapter<String>(getApplicationContext(), 
                                     R.layout.spinner, R.id.Language, lang);
    LinearLayout layoutHolder = 
                         (LinearLayout)findViewById(R.id.RegisterFormLayout);
    Spinner spinner = new Spinner(getApplicationContext());
    LayoutParams layParams= new 
                Spinner.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT,       
                                         ViewGroup.LayoutParams.WRAP_CONTENT);
    spinner.setLayoutParams(layParams);
    spinner.setAdapter(mAdapter); 
    spinner.setOnItemSelectedListener(new myOnItemSelectedListener());
    if (lang != null)
       spinner.setSelection(lang.intValue());
    spinnerList.add(spinner);
    layoutHolder.addView(spinner); 
```

我的 spinner.xml 布局是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="vertical" 
android:id="@+id/SpinnerLayout">

<TextView
    android:id="@+id/Language"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:textColor="#ffffff"
    android:background="#00ffffff"
    android:padding="5dp" />
</LinearLayout> 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-25T09:02:13.480

我认为通过主题更改无法实现此要求。因为 Spinner 构造函数仅当您在布局 xml 中写入时才会在 popupBackground attr 上分配值，否则它将使用默认主题值。像下面

```
 <Spinner
    android:id="@+id/spinner1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:popupBackground="@android:color/holo_green_dark" /> 
```

// 只是尝试改变弹出背景

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-25T10:14:05.667

解决方案是在动态创建微调器时添加此代码：

```
spinner.setPopupBackgroundResource(R.drawable.spinner); 
```

并在 Drawable 文件夹下创建 spinner.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<shape
    xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle">
    <solid android:color="#ffffff" />
</shape> 
```

此解决方案要求 API 级别为 16 及以上。

结果：

![两个木偶](https://s14.postimg.cc/6efty1foh/image.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-30T21:41:48.770

为了解决你的问题，试试这个。

```
android:popupBackground="#00826b" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T08:30:48.190

在我的 spinner.xml

在 LinearLayout 中使用它：`android:background="#ffffff"`

# performance - SQL Server 多次插入的不同持续时间

> ID：16198670
> 
> 赞同：0
> 
> 时间：2013-04-24T17:38:34.597
> 
> 标签：performance, sql-server-2008, insert

我每天都在运行 Web 应用程序并将大量数据导入 sql server 数据库。不幸的是，我遇到了服务器故障（硬盘坏了），我不得不在新机器上重新安装 SQL Server 和其他应用程序。我的问题是，在从头开始设置系统后，将数据导入数据库开始变得非常漫长。新机器比旧机器（64GB RAM，8 个线程......）快得多，并且在应用程序上执行的所有其他操作都在瞬间执行。

数据导入如下所示：

1.  读取 XML 文件
2.  遍历每一行并将其插入数据库（没有批量插入，没有事务 - 只是干​​净的插入命令）

在服务器故障处理 200 000 行之前大约需要 2 分钟，现在大约需要 20 分钟 :( 我想我已经尝试了一切，这是 SQL Profiler 的屏幕截图：

[http://content.screencast.com/users/czyzas/folders/Jing/media/50bc21c1-1e98-478e-88d1-0751f447b619/2013-04-24_1932.png](http://content.screencast.com/users/czyzas/folders/Jing/media/50bc21c1-1e98-478e-88d1-0751f447b619/2013-04-24_1932.png)

表中的所有行都是插入语句。如您所见，持续时间从 7 到 120 不等，所以我认为这就是问题所在。有没有人知道可能是什么原因？

提前致谢！:)

ps 系统中有两个硬盘（RAID），SQL Server 2008 R2

编辑：数据库是从备份创建的

表架构如下所示：

```
create table [tempUpload].[Import_0016704] (
ROWNO int identity primary key,
[TheDate] nvarchar(10) COLLATE SQL_Latin1_General_CP1_CI_AS ,
[Campaign] nvarchar(35) COLLATE SQL_Latin1_General_CP1_CI_AS ,
[AdGroup] nvarchar(7) COLLATE SQL_Latin1_General_CP1_CI_AS ,
[Domain] nvarchar(50) COLLATE SQL_Latin1_General_CP1_CI_AS ,
[Impressions] nvarchar(5) COLLATE SQL_Latin1_General_CP1_CI_AS ,
[Cost] nvarchar(8) COLLATE SQL_Latin1_General_CP1_CI_AS ,
[ConversionsOnePerClick] nvarchar(1) COLLATE SQL_Latin1_General_CP1_CI_AS ,
[Clicks] nvarchar(2) COLLATE SQL_Latin1_General_CP1_CI_AS ,
[ClientId] nvarchar(10) COLLATE SQL_Latin1_General_CP1_CI_AS 
) 
```

单个插入看起来像这样：

```
exec sp_executesql N'insert into  [tempUpload].[Import_0016704] ([TheDate],[Campaign],    [AdGroup],[Domain],[Impressions],[Cost],[ConversionsOnePerClick],[Clicks],[ClientId])     
select 
@v_165,@v_166,@v_167,@v_168,@v_172,@v_174,@v_176,@v_173,@v_177',
N'@v_165 nvarchar(20), @v_166 nvarchar(70),@v_167 nvarchar(14),@v_168 nvarchar(100),@v_172 nvarchar(10),@v_174 nvarchar(16),@v_176 nvarchar(2),@v_173 nvarchar(4),@v_177 nvarchar(20)',
@v_165=N'2013-04-07',@v_166=N'Tematy',
@v_167=N'120x600',
@v_168=N'gallery.com',
@v_172=N'21',
@v_174=N'0',
@v_176=N'0',
@v_173=N'0',
@v_177=N'243' 
```

如果您需要更多详细信息，请给我一个标志。

# wordpress - Wordpress：将年份和月份存储在变量中

> ID：16198671
> 
> 赞同：0
> 
> 时间：2013-04-24T17:38:37.317
> 
> 标签：wordpress, variables, date

在 Wordpress 网站上的特定存档页面上，我有以下网址：

```
http://fruitpage/2013/04/ 
```

年份和月份数字告诉 Wordpress 要显示哪些帖子（2013 年 4 月的帖子）。有没有办法使用 Wordpress 功能将 2013 存储在一个变量中，将 04 存储在另一个变量中？

目标是能够回显 url 中的年份和月份，例如：

```
echo $urlYear; //echoes out 2013 that is found in the url
echo $urlMonth; //echoes out 04 that is found in the url 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:15:44.823

在存档页面中，您可以**在 post 循环中**`the_date()`简单调用函数

 **```
$year = the_date('Y');

$month = the_date('m'); 
```

`get_the_time()`也试试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-30T10:25:43.983

就用这些

```
<?php echo get_the_date('M'); ?> for month
<?php echo get_the_date('Y'); ?> for year 
```**

# nlp - 食品信息提取

> ID：16198679
> 
> 赞同：-3
> 
> 时间：2013-04-24T17:39:20.383
> 
> 标签：nlp, information-extraction

我正在使用美国农业部营养数据库，其食物有以下描述：

例如：

```
Cheese, fontina
Cheese, cheddar
Cheese, cottage, lowfat, 2% milkfat
Cheese, cottage, lowfat, 1% milkfat
Apples, raw, with skin
Apples, dried, sulfured, uncooked
Apples, frozen, unsweetened, heated
McDONALD'S, BIG MAC (without Big Mac Sauce)
McDONALD'S, BIG MAC
Sandwiches and burgers, roast beef sandwich with cheese 
```

这里有一个模式，逗号显然用于分隔实体。按照上面的例子，cheese 是 cheddar、cottage 和 fontina 的父代。

为了从这个来源中提取信息，我已经做了一些工作。我认为：

*   词性标注：如果一个词是形容词或动词，则不是食物名称的一部分
*   freqdist/wordcount：这样做是为了获得食物描述中的单词层次结构

但是当我大规模运行它时，我会得到不准确的结果。POS 标记在某些描述中失败，并且当同一个句子中存在具有相似频率的单词时，freqdist/wordcount 没有用。

这是我想要得到的结果的一个例子：

输入数据：

```
Cheese, fontina
Cheese, cheddar
Cheese, cottage, lowfat, 2% milkfat
Cheese, cottage, lowfat, 1% milkfat 
```

输出数据：

```
Cheese is the parent of fontina, cottage and cheddar. lowfat is a "characteristic" cheese cottage. Cottage, cheddar and fontina are the "principal foods". 
```

输入数据：

```
Sandwiches and burgers, roast beef sandwich with cheese 
```

输出数据：

```
Cheese is a characteristic of roast beef sandwich. The category of the food is    sandwiches and burgers and the "principal food" is roast beef sandwich. 
```

我是初学者，所以我想得到一些关于它的指导。关于 NLP 的信息很多，如果没有对该主题的广泛了解，很难确定该走哪条路。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T23:57:03.777

这不是一个真正的 NLP 问题......

数据是一棵树。将每条线视为树形图中的部分路径。第二个逗号之后的单词似乎是叶子的值。

# functional-programming - 作为嵌套对的二叉树

> ID：16198680
> 
> 赞同：0
> 
> 时间：2013-04-24T17:39:26.767
> 
> 标签：functional-programming, binary-tree, sml

我试图将通用二叉树表示为一对。

我将使用 SML 语法作为示例。这是我的 btree 类型定义：

```
datatype btree = leaf | branch of btree*btree; 
```

所以，我想写一个函数，给定一个 btree，打印以下内容：

```
bprint leaf = 0
bprint (branch (leaf,leaf)) = (0,0)
bprint (branch (leaf, branch (leaf,leaf))) = (0, (0, 0)) 
```

等等。

问题是这个函数总是返回不同的类型。这显然是 SML 的问题，也可能是其他函数式语言的问题。

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T04:51:27.360

如果您真的不需要其他任何地方的字符串表示，正如其他人已经提到的那样，只需打印树可能是最简单的方法：

```
open TextIO

datatype btree = leaf | branch of btree * btree

fun print_btree leaf = print "0"
  | print_btree (branch (s, t)) =
    (print "("; print_btree s; print ", "; print_btree t; print ")") 
```

如果您还希望能够获得一个表示 a 的字符串`btree`，那么简单的解决方案是：

```
fun btree_to_string leaf = "0"
  | btree_to_string (branch (s, t)) =
    "(" ^ btree_to_string s ^ ", " ^ btree_to_string t ^ ")" 
```

但是，我并不真正推荐这种变体，因为对于 big `btree`s，由于许多字符串连接存在问题。

值得考虑的是以下变体，它通过一个技巧（例如也用于 Haskell 的`Show`类中）避免了连接问题，即，不是处理字符串，而是处理从 char 列表到 char 列表的函数。然后可以用函数组合代替串联

```
fun btree_to_string' t =
  let
    fun add s t = s @ t
    fun add_btree leaf = add [#"0"]
      | add_btree (branch (s, t)) =
        add [#"("] o add_btree s o add [#",", #" "] o add_btree t o add [#")"]
  in implode (add_btree t []) end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T21:53:54.807

由于您要做的就是将树结构打印到屏幕上，因此您可以这样做并让函数的返回类型为`unit`. 这不是试图返回元组`(0, (0, 0))`，而是将字符串 (0, (0, 0)) 打印到屏幕上。这样你就不会在类型方面遇到任何困难。

# meteor - 使用模型构建流星应用程序

> ID：16198682
> 
> 赞同：1
> 
> 时间：2013-04-24T17:39:28.573
> 
> 标签：meteor

我正在构建一个运行良好的流星应用程序。但是来自 Backbone，我想念结构。尤其是模型。在非官方的常见问题解答中，他们说明了将模型放在哪里，但我找不到任何示例。

流星模型是什么样的？BB 型号是一个不错的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-29T17:44:04.690

你可能想看看：[https ://github.com/Exygy/minimongoid](https://github.com/Exygy/minimongoid)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-27T21:01:42.387

我会推荐使用流星天文学[https://github.com/jagi/meteor-astronomy](https://github.com/jagi/meteor-astronomy)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-05T15:44:13.390

我为流星模型创建了一个大气包。这是链接[https://github.com/EmmN/meteor-mini-models](https://github.com/EmmN/meteor-mini-models)。希望这可以帮助。

# javascript - 匿名 Google Pagespeed

> ID：16198683
> 
> 赞同：-2
> 
> 时间：2013-04-24T17:39:31.067
> 
> 标签：javascript, anonymous-function

我是 JavaScript 新手。如何匿名化 Google Pagespeed？

这是原始代码： http: [//pastebin.com/xRbTekDA](http://pastebin.com/xRbTekDA)。它在我加载页面时工作

这是匿名代码： http: [//pastebin.com/fj9rP7FM](http://pastebin.com/fj9rP7FM)。每次我加载页面时它都会显示一个 javascript 错误。它说“ReferenceError：runPagespeedCallbacks 未定义”，因为我匿名了。

如何匿名化该原始代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:55:34.560

您遇到的问题是代码期望调用的方法不在范围内。因此，如果您稍微修改代码，这应该可以消除错误。这段代码应该可以解决这个问题。[http://pastebin.com/RrQ2848j](http://pastebin.com/RrQ2848j)

请注意，我只是返回回调函数并将其分配为变量。您可以采取其他方法，但需要在全局范围内调用某些方法。

这样做的原因是正在创建一个脚本块来获取脚本和数据，因为 AJAX(XHR) 请求会违反在 yourdomain.com 上执行时尝试访问 google.com 的同源策略。下载脚本时，它会期望调用全局范围内的函数以将一些数据传递给它。在创建脚本块时，该函数在 SRC 属性的查询字符串中命名，如下所示：

```
function runPagespeed() {
  var s = document.createElement('script');
  s.type = 'text/javascript';
  s.async = true;
  var query = [
    'url=' + YN_URL,
    'callback=runPagespeedCallbacks',
    'key=' + API_KEY
  ].join('&');
  s.src = API_URL + query;
  document.head.insertBefore(s, null);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T17:49:53.047

两者之间的唯一区别是第二个包装在立即调用的函数表达式（IIFE）中。IIFE 封装了代码，因此自由变量不是全局可见的。通常这是一件好事，但如果其他服务依赖于该代码，它将不可见。

# visual-studio-2010 - 使用 Visual Studio 编译时出现 AVG 警告

> ID：16198686
> 
> 赞同：2
> 
> 时间：2013-04-24T17:39:45.853
> 
> 标签：visual-studio-2010, average

我试图在 Visual Studio 中编译我的代码，每次我这样做时，AVG 都会给我一个警告，说存在威胁“可能有害的程序 hacktool.wun”，并显示刚刚创建的 exe 的文件路径。知道为什么会这样吗？![这是问题的屏幕截图](https://i.stack.imgur.com/rsHaM.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T17:54:55.747

对于初学者，无论程序是否编译，请尝试暂时禁用您的防病毒软件。从长远来看，我建议将您的程序添加为例外。以下链接提供了从检测中排除文件和文件夹的步骤。

[http://www.avg.com/ww-en/faq.num-5187](http://www.avg.com/ww-en/faq.num-5187)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T17:54:13.187

看看这个，似乎它只是积极检测 AVG 的错误

[http://forums.cnet.com/7723-19703_102-571744/avg-detects-hacktool-ono-in-hello-world-app/](http://forums.cnet.com/7723-19703_102-571744/avg-detects-hacktool-ono-in-hello-world-app/)

# c# - 如何使用 C# 将 CSV 文件转换为 MDB（Access 数据库）

> ID：16198694
> 
> 赞同：0
> 
> 时间：2013-04-24T17:40:17.770
> 
> 标签：c#, database, csv

如何使用 C# 将 CSV 文件转换为 MDB（Access 数据库）。我真的需要将其添加到我的程序中，代码片段对这个项目非常有用。提前致谢 ：）

# r - 如果没有金额聚合的中间步骤，如何获得相同的图？

> ID：16198697
> 
> 赞同：6
> 
> 时间：2013-04-24T17:40:21.580
> 
> 标签：r, ggplot2, histogram

如果没有聚合列的中间计算，如何获得相同的图。

我有这个数据：

```
set.seed(1234)
dat <- data.frame(month = gl(3,1,20),
                  family= gl(5,1,20),
                  amount= sample(1:3,20,rep=TRUE)) 
```

使用此代码，我得到一个条形图。其中每个 bar 是按家庭和按月计算的金额总和。首先，我创建一个新的聚合列 V1。

```
## I am using data.table , you can get it by ddply also
library(data.table)
dd <- data.table(dat)
hh <- dd[,sum(amount),by=list(month,family)] 
```

然后我使用此代码进行绘图：

```
ggplot(data=hh,aes(x=month,y=V1,fill=family))+
  geom_bar(stat = "identity") 
```

要得到这个情节：

![在此处输入图像描述](https://i.stack.imgur.com/t9Brg.png)

这可行，但我想要更简单的方法。我认为使用`stat_sum`或其他`ggplot2`技术我可以在没有中间聚合步骤的情况下做到这一点。像这样的东西：

```
 ## don't run this doesn't work
 ggplot(data=dat,aes(x=month,y=amount,fill=family))+
  geom_bar(stat = "sum") 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T17:57:26.380

```
ggplot(data=dat,aes(x=month,y=amount,fill=family,group=family))+
  geom_bar(stat = "summary",fun.y=sum) 
```

![在此处输入图像描述](https://i.stack.imgur.com/lOfzr.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T17:56:14.220

我在 [R 帮助邮件列表](http://r.789695.n4.nabble.com/ggplot2-stacked-bar-sum-of-values-rather-than-count-td4298342.html)中发现有一个参数`weight=`可用于获取特定值的总和，而不是在生成堆叠条形图时使用计数。您必须提供`x`值、`fill=`值并`weight=amount`确保`amount`使用值的总和来制作条形高度。这也自动确保`fill=`值以相同的顺序排列。

```
ggplot(dat,aes(month,fill=family,weight=amount))+geom_bar() 
```

![在此处输入图像描述](https://i.stack.imgur.com/s4UrI.png)

# pointers - 在 64 位指针中使用额外的 16 位

> ID：16198700
> 
> 赞同：27
> 
> 时间：2013-04-24T17:40:47.477
> 
> 标签：pointers, 64-bit, x86-64, memory-access

我读到[64 位机器实际上只使用 48 位地址](https://stackoverflow.com/q/6716946/995714)（具体来说，我使用的是 Intel Core i7）。

我希望额外的 16 位（位 48-63）与地址无关，并且会被忽略。但是当我尝试访问这样的地址时，我得到了一个信号`EXC_BAD_ACCESS`。

我的代码是：

```
int *p1 = &val;
int *p2 = (int *)((long)p1 | 1ll<<48);//set bit 48, which should be irrelevant
int v = *p2; //Here I receive a signal EXC_BAD_ACCESS. 
```

为什么会这样？有没有办法使用这 16 位？

这可用于构建对缓存更友好的链表。代替使用 8 个字节用于下一个 ptr 和 8 个字节用于键（由于对齐限制），键可以嵌入到指针中。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-08-25T07:04:34.107

高位是保留的，以防将来增加地址总线，所以你不能像那样简单地使用它

> AMD64 架构定义了 64 位虚拟地址格式，其中低位 48 位在当前实现中使用（...）架构定义**允许在未来的实现中将此限制提高到完整的 64 位**，扩展了虚拟地址空间为 16 EB（2^(个 64)字节）。相比之下，x86 只有 4 GB（2 ^(32)字节）。
> 
> ^([http://en.wikipedia.org/wiki/X86-64#Architectural_features](http://en.wikipedia.org/wiki/X86-64#Architectural_features))

更重要的是，根据同一篇文章[Emphasis mine]：

> ...在架构的第一个实现中，实际上只有虚拟地址的最低有效 48 位会用于地址转换（页表查找）。此外，**任何虚拟地址的第 48 位到第 63 位都必须是第 47 位的副本**（以类似于*符号扩展*的方式），否则处理器将引发异常。符合此规则的地址称为“规范形式”。

由于即使高位未被使用，CPU 也会检查它们，因此它们并不是真正“无关紧要”的。在使用指针之前，您需要确保地址是规范的。其他一些 64 位架构（如 ARM64）可以选择忽略高位，因此您可以更轻松地将数据存储在指针中。

* * *

也就是说，在 x86_64 中，**如果需要，您仍然可以自由使用高 16 位**（如果虚拟地址不超过 48 位，请参见下文），但您必须先通过符号扩展来检查和修复指针[值](https://en.wikipedia.org/wiki/Sign_extension)取消引用。

^(请注意，将指针值转换`long`为**不是正确的方法，**因为`long`不能保证足够宽以存储指针。您需要使用[`uintptr_t`或`intptr_t`](https://stackoverflow.com/q/6326338/995714)。)

```
int *p1 = &val; // original pointer
uint8_t data = ...;
const uintptr_t MASK = ~(1ULL << 48);

// === Store data into the pointer ===
// Note: To be on the safe side and future-proof (because future implementations
//     can increase the number of significant bits in the pointer), we should
//     store values from the most significant bits down to the lower ones
int *p2 = (int *)(((uintptr_t)p1 & MASK) | (data << 56));

// === Get the data stored in the pointer ===
data = (uintptr_t)p2 >> 56;

// === Deference the pointer ===
// Sign extend first to make the pointer canonical
// Note: Technically this is implementation defined. You may want a more
//     standard-compliant way to sign-extend the value
intptr_t p3 = ((intptr_t)p2 << 16) >> 16;
val = *(int*)p3; 
```

[WebKit 的 JavaScriptCore 和 Mozilla 的 SpiderMonkey 引擎](https://wingolog.org/archives/2011/05/18/value-representation-in-javascript-implementations)以及[LuaJIT](http://lua-users.org/lists/lua-l/2009-11/msg00089.html)在[nan-boxing 技术](https://anniecherkaev.com/the-secret-life-of-nan)中使用了这个。如果值为 NaN，则低 48 位将存储*指向对象*的指针，高 16 位用作标记位，否则为双精度值。

以前[Linux也使用GS基地址的第63^位来](https://software.intel.com/security-software-guidance/best-practices/guidance-enabling-fsgsbase)表示该值是否被内核写入

实际上，您通常也可以使用第 48^位。因为大多数现代 64 位操作系统将内核和用户空间分成两半，所以第 47 位始终为零，您有 17 个最高位可供使用

* * *

您还可以使用**低位**存储数据。它被称为[标记指针](https://en.wikipedia.org/wiki/Tagged_pointer)。如果`int`是 4 字节对齐，则 2 个低位始终为 0，您可以像在 32 位体系结构中一样使用它们。对于 64 位值，您可以使用 3 个低位，因为它们已经是 8 字节对齐的。同样，您还需要在取消引用之前清除这些位。

```
int *p1 = &val; // the pointer we want to store the value into
int tag = 1;
const uintptr_t MASK = ~0x03ULL;

// === Store the tag ===
int *p2 = (int *)(((uintptr_t)p1 & MASK) | tag);

// === Get the tag ===
tag = (uintptr_t)p2 & 0x03;

// === Get the referenced data ===
// Clear the 2 tag bits before using the pointer
intptr_t p3 = (uintptr_t)p2 & MASK;
val = *(int*)p3; 
```

一个著名的用户是具有[SMI（小整数）优化](https://stackoverflow.com/q/57348783/995714)的 V8 引擎。地址中的最低位将用作类型的标记：

*   **如果为 1**，则该值是指向真实数据（对象、浮点数或更大的整数）的指针。下一个高位 (w) 指示指针是弱的还是强的。只需清除标签位并取消引用它
*   **如果它是 0**，它是一个小整数。在带有指针压缩的 32 位 V8 或 64 位 V8 中，它是一个 31 位 int，执行有符号右移 1 以恢复该值；在没有指针压缩的 64 位 V8 中，它是上半部分的 32 位 int

> ```
>  32-bit V8
>                            |----- 32 bits -----|
>    Pointer:                |_____address_____w1|
>    Smi:                    |___int31_value____0|
>    
>    64-bit V8
>                |----- 32 bits -----|----- 32 bits -----|
>    Pointer:    |________________address______________w1|
>    Smi:        |____int32_value____|0000000000000000000| 
> ```
> 
> [https://v8.dev/blog/pointer-compression](https://v8.dev/blog/pointer-compression)

* * *

如下所述，英特尔发布了[PML5](https://en.wikipedia.org/wiki/Intel_5-level_paging)，它提供了一个[57 位的虚拟地址空间](https://software.intel.com/content/dam/develop/public/us/en/documents/5-level-paging-white-paper.pdf)，如果你在这样的系统上，你只能使用 7 个高位

不过，您仍然可以使用一些解决方法来获得更多免费位。首先，您可以尝试在 64 位操作系统中使用 32 位指针。在 Linux 中，如果允许 x32abi，则指针只有 32 位长。在 Windows 中，只需清除`/LARGEADDRESSAWARE`标志，指针现在只有 32 位有效位，您可以将高 32 位用于您的目的。请参阅 [如何在 Windows 上检测 X32？](https://stackoverflow.com/a/55460361/995714). 另一种方法是使用一些[指针压缩](https://docs.google.com/document/d/10qh2-b4C5OtSg-xLwyZpEI5ZihVBPtn1xwKBbQC26yI/edit)技巧：[V8 中的压缩指针实现与 JVM 的压缩 Oops 有何不同？](https://stackoverflow.com/q/59276104/995714)

您可以通过请求操作系统仅在低区域分配内存来进一步获得更多位。例如，如果您可以确保您的应用程序永远不会使用超过 64MB 的内存，那么您只需要一个 26 位地址。如果所有分配都是 32 字节对齐的，那么您还有 5 位要使用，这意味着您可以在指针中存储 64 - 21 = 43 位信息！

我想[ZGC](https://dinfuehr.github.io/blog/a-first-look-into-zgc/)就是一个例子。它仅使用 42 位进行寻址，允许 2 ^(42)字节 = 4 × 2 ^(40)字节 = 4 TB

> 因此，ZGC 仅保留从地址 4TB 开始的 16TB 地址空间（但实际上并未使用所有这些内存）。
> 
> [ZGC 初探](https://dinfuehr.github.io/blog/a-first-look-into-zgc/)

它使用指针中的位，如下所示：

```
 6                 4 4 4  4 4                                             0
 3                 7 6 5  2 1                                             0
+-------------------+-+----+-----------------------------------------------+
|00000000 00000000 0|0|1111|11 11111111 11111111 11111111 11111111 11111111|
+-------------------+-+----+-----------------------------------------------+
|                   | |    |
|                   | |    * 41-0 Object Offset (42-bits, 4TB address space)
|                   | |
|                   | * 45-42 Metadata Bits (4-bits)  0001 = Marked0
|                   |                                 0010 = Marked1
|                   |                                 0100 = Remapped
|                   |                                 1000 = Finalizable
|                   |
|                   * 46-46 Unused (1-bit, always zero)
|
* 63-47 Fixed (17-bits, always zero) 
```

有关如何执行此操作的更多信息，请参阅

*   [在 2GB 范围内分配内存](https://stackoverflow.com/q/54729401/995714)
*   [如何保证VirtualAlloc分配的虚拟内存地址在2-4GB之间](https://stackoverflow.com/q/63275557/995714)
*   [分配到低内存地址](https://stackoverflow.com/q/48631207/995714)
*   [如何在地址范围 > 4 GiB 中进行 malloc](https://stackoverflow.com/q/5343722/995714)
*   [自定义堆/内存分配范围](https://stackoverflow.com/q/45475282/995714)

* * *

***旁注：***与指针相比，在键值很小的情况下使用链表会浪费大量内存，而且由于缓存局部性不好，它也会变慢。事实上，你不应该在大多数现实生活中的问题中使用链表

*   [Bjarne Stroustrup 说我们必须避免使用链表](https://stackoverflow.com/q/34170566/995714)
*   [为什么你永远不应该在你的代码中再次使用链表](https://kjellkod.wordpress.com/2012/02/25/why-you-should-never-ever-ever-use-linked-list-in-your-code-again/)
*   [数字运算：为什么你永远不应该在你的代码中再次使用链表](https://www.codeproject.com/articles/340797/number-crunching-why-you-should-never-ever-ever-us)
*   [Bjarne Stroustrup：为什么你应该避免使用链表](https://www.reddit.com/r/programming/comments/25xpre/bjarne_stroustrup_why_you_should_avoid_linked/)
*   [列表是邪恶的吗？——Bjarne Stroustrup](https://isocpp.org/blog/2014/06/stroustrup-lists)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-05-21T08:18:13.430

规范化 AMD/Intel x64 指针的符合标准的方法（基于规范指针和 48 位寻址的当前文档）是

```
int *p2 = (int *)(((uintptr_t)p1 & ((1ull << 48) - 1)) |
    ~(((uintptr_t)p1 & (1ull << 47)) - 1)); 
```

这首先清除指针的高 16 位。然后，如果第 47 位为 1，则设置第 47 位到第 63 位，但如果第 47 位为 0，则与值 0 进行逻辑或运算（无变化）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-08-25T14:10:33.417

我猜没有人提到在这种情况下可能使用位字段（[https://en.cppreference.com/w/cpp/language/bit_field](https://en.cppreference.com/w/cpp/language/bit_field)），例如

```
template<typename T>
struct My64Ptr
{
    signed long long ptr : 48; // as per phuclv's comment, we need the type to be signed to be sign extended
    unsigned long long ch : 8; // ...and, what's more, as Peter Cordes pointed out, it's better to mark signedness of bit field explicitly (before C++14)
    unsigned long long b1 : 1; // Additionally, as Peter found out, types can differ by sign and it doesn't mean the beginning of another bit field (MSVC is particularly strict about it: other type == new bit field)
    unsigned long long b2 : 1;
    unsigned long long b3 : 1;
    unsigned long long still5bitsLeft : 5;

    inline My64Ptr(T* ptr) : ptr((long long) ptr)
    {
    }

    inline operator T*()
    {
        return (T*) ptr;
    }
    inline T* operator->()
    {
        return (T*)ptr;
    }
};

My64Ptr<const char> ptr ("abcdefg");
ptr.ch = 'Z';
ptr.b1 = true;
ptr.still5bitsLeft = 23;
std::cout << ptr << ", char=" << char(ptr.ch) << ", byte1=" << ptr.b1 << 
  ", 5bitsLeft=" << ptr.still5bitsLeft << " ...BTW: sizeof(ptr)=" << sizeof(ptr);

// The output is: abcdefg, char=Z, byte1=1, 5bitsLeft=23 ...BTW: sizeof(ptr)=8
// With all signed long long fields, the output would be: abcdefg, char=Z, byte1=-1, 5bitsLeft=-9 ...BTW: sizeof(ptr)=8 
```

如果我们真的想节省一些内存，我认为尝试使用这 16 位可能是一种非常方便的方法。所有按位（& 和 |）操作和转换为完整的 64 位指针都由编译器完成（当然，在运行时执行）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-25T10:00:55.773

根据英特尔手册（第 1 卷，第 3.3.7.1 节），线性地址必须采用规范形式。这意味着实际上只使用了 48 位，而额外的 16 位是符号扩展的。此外，实现需要检查地址是否为该格式以及是否不生成异常。这就是为什么无法使用那些额外的 16 位的原因。

这样做的原因很简单。目前 48 位虚拟地址空间已经绰绰有余（由于 CPU 的生产成本，没有必要让它更大），但毫无疑问，将来需要额外的位。如果应用程序/内核将它们用于自己的目的，则会出现兼容性问题，而这正是 CPU 供应商想要避免的。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-04-24T18:27:34.310

物理内存是 48 位寻址的。这足以解决大量 RAM。但是，在 CPU 内核上运行的程序和 RAM 之间是内存管理单元，它是 CPU 的一部分。您的程序正在寻址虚拟内存，而 MMU 负责在虚拟地址和物理地址之间进行转换。虚拟地址是 64 位的。

虚拟地址的值不会告诉您相应的物理地址。事实上，由于虚拟内存系统的工作方式，无法保证相应的物理地址时时刻刻都是相同的。而且，如果您对 mmap() 有创意，您可以使两个或多个虚拟地址指向同一个物理地址（无论它发生在哪里）。如果您随后写入其中任何一个虚拟地址，您实际上只是在写入一个物理地址（无论它发生在哪里）。这种技巧在信号处理中非常有用。

因此，当您篡改指针的第 48 位（指向虚拟地址）时，MMU 无法在操作系统（或您自己使用 malloc()）分配给您的程序的内存表中找到该新地址. 它会引发一个中断以示抗议，操作系统会捕捉到它并使用您提到的信号终止您的程序。

如果您想了解更多信息，我建议您谷歌搜索“现代计算机体系结构”并阅读支持您的程序的硬件。

# python - Django - 覆盖 django-tables2 LinkColumn 的数据内容

> ID：16198701
> 
> 赞同：4
> 
> 时间：2013-04-24T17:40:49.913
> 
> 标签：python, django, django-forms, django-tables2

我使用 django-tables2 LinkColumn 创建一个列，该列调用一个允许导出表中对象的函数。

**表格.py：**

```
class FilesTable(tables.Table):
    id = tables.LinkColumn('downloadFile', args=[A('pk')], verbose_name='Export') 
```

我希望本专栏的内容是 downloadFile 函数的 href ：导出为文本，而不是 id。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-27T09:00:40.403

类似的东西应该可以工作（*警告*我这里没有 Python，所以它没有经过测试，但你会明白的）：

```
类 CustomTextLinkColumn(LinkColumn):
  def __init__(self, viewname, urlconf=None, args=None,
    kwargs=None，current_app=None，attrs=None，custom_text=None，**额外）：
    super(CustomTextLinkColumn, self).__init__(viewname, urlconf=urlconf,
      args=args，kwargs=kwargs，current_app=current_app，attrs=attrs，**额外）
    self.custom_text = custom_text

  def 渲染（自我，价值，记录，bound_column）：
    return super(CustomTextLinkColumn, self).render(self,
      self.custom_text 如果 self.custom_text 其他值，
      记录，bound_column）    

```

然后你可以像这样使用它

```
id = CustomTextLinkColumn('downloadFile', args=[A('pk')],
  custom_text='出口'，verbose_name='出口'，）

```

当然，您始终可以使用 TemplateColumn 或向 FilesTable 添加 render_id 方法，但 CustomTextLinkColumn 绝对是最干燥的方法:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-13T02:17:43.747

我无法发表评论，所以我需要添加另一个答案。我将更正“渲染”调用在参数列表中不应包含“自我”。

```
class CustomTextLinkColumn(LinkColumn):
  def __init__(self, viewname, urlconf=None, args=None, 
    kwargs=None, current_app=None, attrs=None, custom_text=None, **extra):
    super(CustomTextLinkColumn, self).__init__(viewname, urlconf=urlconf, 
      args=args, kwargs=kwargs, current_app=current_app, attrs=attrs, **extra)
    self.custom_text = custom_text

  def render(self, value, record, bound_column):
    return super(CustomTextLinkColumn, self).render( 
      self.custom_text if self.custom_text else value, 
      record, bound_column) 
```

正如 Serafeim 所说，使用：

```
id = CustomTextLinkColumn('downloadFile', args=[A('pk')], 
  custom_text='Export', verbose_name='Export', ) 
```

# javascript - Create dynamic vertical rule in d3

> ID：16198702
> 
> 赞同：0
> 
> 时间：2013-04-24T17:40:50.053
> 
> 标签：javascript, jquery, d3.js

I want to create a vertical rule like the one shown at [http://bost.ocks.org/mike/cubism/intro/demo-stocks.html](http://bost.ocks.org/mike/cubism/intro/demo-stocks.html) that updates its value dynamically according to the user's mouse.

This demo uses cubism.js but I'd like to use d3 and/or jQuery to achieve the same effect. Any suggestions?

EDIT: I've tried creating rules according to the ones in this thread ([How to make a vertical line in HTML](https://stackoverflow.com/questions/3148415/how-to-make-a-vertical-line)), but I don't know how to position it and move it according to the user's mouse position.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T23:12:01.227

您需要更新您的问题以包含有关您实际想要的更多详细信息，但这是使用 d3 的一种实现：http: [//jsfiddle.net/q3P4v/](http://jsfiddle.net/q3P4v/)

```
d3.select('html').on('mousemove', function() {
    var xpos = d3.event.pageX;
    var rule = d3.select('body').selectAll('div.rule')
        .data([0]);
    rule.enter().append('div')
        .attr('class', 'rule')
      .append('span');
    rule.style('left', xpos + 'px');
    rule.select('span').text(xpos);
}); 
```

请注意，这取决于一些相关的 CSS，如小提琴所示。

# vb.net - 微软文本编码

> ID：16198704
> 
> 赞同：0
> 
> 时间：2013-04-24T17:41:02.920
> 
> 标签：vb.net, ascii

从调制解调器返回一个字符串；

TÁÎË ÐROÄÕCT ÖOLÕÍE TC ÖOLÕÍE ÕLLÁÇE ÈEIÇÈT WÁTER TEÍÐ

当我将文本保存到文档并在 Word 中打开时，我可以使用“US-ASCII”编码对其进行解码并获得以下文本。

TANK PRODUCT VOLUME TC VOLUME Ullage Height 水温

但是对于我的一生，我无法弄清楚如何在 vb 中获得相同的结果。我正在使用 Visual Basic Express 2010。

如果有人可以提供帮助，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:42:31.660

谢谢您的帮助。事实证明，这不是你们都指出的编码问题，而是字长和奇偶校验都需要调整。调制解调器上的最终设置最终为 9600-7-Odd-1。

# html - Twitter Bootstrap 测试环境

> ID：16198719
> 
> 赞同：8
> 
> 时间：2013-04-24T17:41:45.087
> 
> 标签：html, css, twitter-bootstrap

我将对 Twitter Boostrap 进行更改以生成我自己的主题，并且想要某种备忘单来显示调整样式和 CSS 的结果。

理想情况下，一个包含所有 Twitter Boostrap 元素的网页可能会很棒，而不是让它们散开的 Bootstrap 文档。

更好的是在各种元素上带有注释的页面，以显示您对 variables.less 文件的更改结果。

有谁知道我应该看的任何资源？提前致谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-24T17:46:21.530

我正是为此目的创建了[Bootply 。](http://www.bootply.com)Bootply 是一个“jsfiddle”风格的应用程序，可让您编辑 Bootstrap 友好的 HTML、JS 和 CSS。它包括 Bootstrap 和 jQuery，您还可以从工具栏中选择 Bootstrap 片段并粘贴到编辑器中。只需单击“运行”即可查看结果。

**Bootply 特性**

*   包含所有 Bootstrap CSS、组件和 Javascript 的工具栏
*   命名、标记和分享*有效*的Bootstrap 示例
*   全屏或移动/响应式预览
*   包括 FontAwesome、jQueryUI 和其他 Bootstrap-ready 扩展
*   测试不同的 Bootstrap 版本

**[http://www.bootply.com](http://www.bootply.com)**

此外，此[测试页面](http://bootply.com/65566)对于一次查看所有可用元素很有用。

# java - 泽西例外

> ID：16198721
> 
> 赞同：0
> 
> 时间：2013-04-24T17:41:51.027
> 
> 标签：java, jersey

有谁知道这个例外是什么意思？我正在使用 GWT - Java 1.7。

这里是控制台输出：

```
[WARN] failed jersey-servlet
javax.servlet.ServletException: com.sun.jersey.spi.inject.Errors$ErrorMessagesException
at org.mortbay.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:437)
at org.mortbay.jetty.servlet.ServletHolder.doStart(ServletHolder.java:256)
... 
```

这是 web.xml：

```
<servlet>
  <servlet-name>jersey-servlet</servlet-name>
  <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
  <init-param>
     <param-name>com.sun.jersey.config.property.packages</param-name>
     <param-value>de.mme2app.open.server, org.codehaus.jackson.jaxrs</param-value>
  </init-param>
  <init-param>
     <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>
     <param-value>true</param-value>
  </init-param>
  <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
  <servlet-name>jersey-servlet</servlet-name>
  <url-pattern>/rest/*</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:51:22.060

我还没有验证这是否会导致该错误，但`com.sun.jersey.config.property.packages`参数应该只指向包含您的资源和提供程序的包。它似乎不`org.codehaus.jackson.jaxrs`属于那里。试试吧：

```
<init-param>
    <param-name>com.sun.jersey.config.property.packages</param-name>
    <param-value>de.mme2app.open.server</param-value>
</init-param> 
```

假设`de.mme2app.open.server`您的项目中包含资源/提供者的包。

# java - 检测当前时间是否在两个设置时间之间

> ID：16198725
> 
> 赞同：1
> 
> 时间：2013-04-24T17:41:55.953
> 
> 标签：java, android, date

我有一个包含服务的程序。该程序具有允许用户设置、禁用和启用时间的设置。在这两次之间（当然，如果启用了选项），程序不应该工作。

我实际上很难做到这一点。我已经成功地将“禁用”和“启用”时间转换为毫秒。我有以下代码，但它没有按预期工作。我想检测当前时间是否在两个设置时间之间，所以我可以在那个时候禁用服务。

```
public boolean isCurrentTimeBetween_enableDisable() {       
    long sysTime = System.currentTimeMillis();

    if((sysTime > disableTime && sysTime < enableTime)) {
        return true;
    }
    return false;
} 
```

谁能给我更好的提示？

**更新：**

如果用户选择让我们说

*   禁用时间：15:00
*   启用时间：22:00

然后代码按预期工作。

但是，如果用户选择让我们说：

*   禁用时间：22:00
*   启用时间：06:00

那么很明显，启用时间是下一天。所以我写了以下代码：

```
if(todaysDisableDate(context).getTime() > enableAt.getTime()) {
    enableCal.add(Calendar.DAY_OF_MONTH, 1);
    enableAt = formatEnableDate.parse(enableCal.get(Calendar.DAY_OF_MONTH) + "-" +(enableCal.get(Calendar.MONTH)+1) + "-" + enableCal.get(Calendar.YEAR) + " " + endHours_string + ":" + endMinutes_string);
} 
```

下面的代码正在获取实际日期。

```
public Date todaysDisableDate(Context context) {
    Calendar disableCal = Calendar.getInstance();

    getTimeValues_preferences((ContextWrapper) context, true, false); // this only gets a string for hour and minute (which is set up in preferences )

    Date disableAt = null;

    try {
        disableAt = formatDisableDate.parse(disableCal.get(Calendar.DAY_OF_MONTH)+"-"+(disableCal.get(Calendar.MONTH)+1)+"-"+disableCal.get(Calendar.YEAR)+" "+startHours_string+":"+startMinutes_string); // današnji datum z današnjo uro
    } catch (ParseException e) {
        e.printStackTrace();
    }
    return disableAt;
}

public Date todaysEnableDate(Context context) { 
    Calendar enableCal = Calendar.getInstance();

    getTimeValues_preferences((ContextWrapper) context, false, true);

    Date enableAt = null;
    try {
        enableAt = formatEnableDate.parse(enableCal.get(Calendar.DAY_OF_MONTH)+"-"+(enableCal.get(Calendar.MONTH)+1)+"-"+enableCal.get(Calendar.YEAR)+" "+endHours_string+":"+endMinutes_string); // današnji datum z današnjo uro

        if(todaysDisableDate(context).getTime() > enableAt.getTime()) {         
            enableCal.add(Calendar.DAY_OF_MONTH, 1);
            enableAt = formatEnableDate.parse(enableCal.get(Calendar.DAY_OF_MONTH)+"-"+(enableCal.get(Calendar.MONTH)+1)+"-"+enableCal.get(Calendar.YEAR)+" "+endHours_string+":"+endMinutes_string);
        }
    } catch (ParseException e) {
    }
    return enableAt;
} 
```

如果服务在 00:00 之前开始，则代码工作正常。但是，如果服务在（第二天）午夜之后开始，那么我从方法中得到错误`isCurrentTimeBetween_enableDisable()`，因为方法`todaysDisableDate(Context context)`和`todaysEnableDate(Context context)`第二天退出（与系统时间相同的那一天）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T19:32:41.920

您是否*必须*比较代码中的日期？如果这是项目要求，那么您可以忽略以下内容。

否则，我认为您可以使用`AlarmManager`创建功能而无需实际比较日期。您可以创建一个“启用”意图和一个“禁用”意图，`AlarmManager`以便在预定时间触发。像这样的东西：

当用户确认时间表时注册您的警报。

```
Intent intent = new Intent(context, yourAlarmReceiver.class);  //or implicit with action
PendingIntent pIntent = PendingIntent.getBroadcast(
    context, requestCode, intent, PendingIntent.FLAG_UPDATE_CURRENT);
AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
am.setRepeating (typeConstant, triggerAtMillis, intervalMillis, pIntent); 
```

你只需要弄清楚是什么`triggerAtMillis`来确定那个广播的第一个镜头，并且`intervalMillis`会是一整天，这在`AlarmManager`课堂上是一个常数。

`yourAlarmReceiver`设置应该扩展的自定义接收器类（我写为） `BroadcastReceiver`，并在您的服务中注册接收器。在 中，`onReceive()`您应该基于 执行相应的操作`intent.getAction()`。如果您想要更多自定义，请不要忘记使用意图过滤器注册您的接收器。

```
@Override
public void onReceive(Context context, Intent intent) {
switch(intent.getAction()){
case "enable": //enable if not enabled
case "disable": //disable if not disabled
default: break;
}
} 
```

通过这种方式，它可以节省你一些时间来比较今天和明天。您可以通过获取当前系统时间（可能采用 24 小时格式）来确定第一次拍摄的时间，并确定您的预期时间是否已经过去。无论是否通过，您只需将初始触发时间设置为`currentTime + difference`.

希望它会有所启发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T18:58:07.887

我建议您使用开始日期和结束日期本身......而不是将它们转换为毫秒。但这只是在您不确定的情况下。

```
private String compareStringOne = "9:45";
private String compareStringTwo = "1:45";

SimpleDateFormat inputParser = new SimpleDateFormat(inputFormat, Locale.US);

private void compareDates(){
    Calendar now = Calendar.getInstance();

    int hour = now.get(Calendar.HOUR);
    int minute = now.get(Calendar.MINUTE);

    date = parseDate(hour + ":" + minute);
    dateCompareOne = parseDate(compareStringOne);
    dateCompareTwo = parseDate(compareStringTwo);

    if ( dateCompareOne.before( date ) && dateCompareTwo.after(date)) {
        //This is where you determine if the date is inbetween
    }
}

private Date parseDate(String date) {

    try {
        return inputParser.parse(date);
    } catch (java.text.ParseException e) {
        return new Date(0);
    }
} 
```

# image - 如何通过在左侧添加图像来自定义我的 ListView

> ID：16198728
> 
> 赞同：0
> 
> 时间：2013-04-24T17:41:58.920
> 
> 标签：image, list, view

我只想用左侧的图像自定义我的 ListView

```
package com.project.test;
import java.net.URI;
import java.net.URL;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

import org.apache.http.NameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.R.id;
import android.app.ListActivity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.net.Uri;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.ImageView;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.TextView;

public class ContactUs extends ListActivity {

    // Progress Dialog
    private ProgressDialog pDialog;

    // Creating JSON Parser object
    JSONParser jParser = new JSONParser();
    ListView list;
     LazyAdapter adapter;
    ArrayList<HashMap<String, String>> contactsList;

    // url to get all contacts list
    private static String url_all_contacts = "http://10.0.2.2/test/get_all_staff.php";

    // JSON Node names
    private static final String TAG_SUCCESS = "success";
    private static final String TAG_CONTACT = "contacts";
    private static final String TAG_PID = "pid";
    private static final String TAG_NAME = "name";
    private static final String TAG_IMAGE = "image";

    static final String KEY_SONG = "song"; // parent node
    static final String KEY_ID = "id";
    static final String KEY_TITLE = "title";
    static final String KEY_ARTIST = "artist";
    static final String KEY_DURATION = "duration";
    static final String KEY_THUMB_URL = "thumb_url";

    // contacts JSONArray
    JSONArray contacts = null;
    ImageView img = (ImageView)findViewById(R.id.image);

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.all_staff);

        // Hashmap for ListView
        contactsList = new ArrayList<HashMap<String, String>>();

        // Loading contacts in Background Thread
        new LoadAllcontacts().execute();
            //list = getListView();
        // Get listview
        //ListView lv = getListView();

        // on seleting single product
        // launching Edit Product Screen
        /*
            lv.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                // getting values from selected ListItem
                String pid = ((TextView) view.findViewById(R.id.pid)).getText()
                        .toString();

                // Starting new intent
                Intent in = new Intent(getApplicationContext(),
                        GetAllStaffDetails.class);
                // sending pid to next activity
                in.putExtra(TAG_PID, pid);

                // starting new activity and expecting some response back
                startActivityForResult(in, 100);
            }
        });
        */
    }

    // Response from Edit Product Activity
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        // if result code 100
        if (resultCode == 100) {
            // if result code 100 is received
            // means user edited/deleted product
            // reload this screen again
            Intent intent = getIntent();
            finish();
            startActivity(intent);
        }

    }

    /**
     * Background Async Task to Load all product by making HTTP Request
     * */
    class LoadAllcontacts extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(ContactUs.this);
            pDialog.setMessage("Loading contacts. Please wait...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }

        /**
         * getting All contacts from url
         * */
        protected String doInBackground(String... args) {
            // Building Parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            // getting JSON string from URL
            JSONObject json = jParser.makeHttpRequest(url_all_contacts, "GET",
                    params);

            // Check your log cat for JSON reponse
            Log.d("All contacts: ", json.toString());

            try {
                // Checking for SUCCESS TAG
                int success = json.getInt(TAG_SUCCESS);

                if (success == 1) {
                    // contacts found
                    // Getting Array of contacts
                    contacts = json.getJSONArray(TAG_CONTACT);

                    // looping through All contacts
                    for (int i = 0; i < contacts.length(); i++) {
                        JSONObject c = contacts.getJSONObject(i);

                        // Storing each json item in variable
                        String id = c.getString(TAG_PID);
                        String name = c.getString(TAG_NAME);
                        String image = c.getString(TAG_IMAGE);

                        // creating new HashMap
                        HashMap<String, String> map = new HashMap<String, String>();

                        // adding each child node to HashMap key => value
                        map.put(TAG_PID, id);
                        map.put(TAG_NAME, name);

                        // adding HashList to ArrayList
                        contactsList.add(map);
                    }
                    //list = (ListView)findViewById(id.list);
                    //list.setAdapter(contactsList);

                } else {
                    // no contacts found
                    // Launch Add New product Activity
                    Intent i = new Intent(getApplicationContext(),
                            NewProductActivity.class);
                    // Closing all previous activities
                    i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(i);
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog after getting all contacts
            pDialog.dismiss();
            // updating UI from Background Thread
            runOnUiThread(new Runnable() {
                public void run() {
                    /**
                     * Updating parsed JSON data into ListView
                     * */
                       //adapter=new LazyAdapter(this, contactsList);

                    ListAdapter adapter = new SimpleAdapter(ContactUs.this,
                            contactsList, R.layout.list_row, new String[] {
                                    TAG_PID, TAG_NAME }, new int[] { R.id.pid,
                                    R.id.name });

                    // updating listview
                    setListAdapter(adapter);
                }
            });

        }

    }
} 
```

这是现在正在使用的代码，但是我在如何使用 JSON 从数据库中检索图像然后将图像插入到 ListView 时遇到了一些困难。所以请帮忙？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:52:07.097

如果您得不到答案，请提供更多详细信息。

您将从哪个领域获得图像？这是一个 url、文件系统引用或者可能是 base64 数据，或者......

在您的布局 ( `R.layout.list_row`) 中，您应该有一个 ImageView，您可以在其中设置`Drawable`要显示的任何类型的对象。

并删除`runOnUiThread`呼叫，因为`onPostExecute`您已经在 UI 线程上。

# android - 在 Android 中预缓存无限数据集的良好内存管理策略是什么？

> ID：16198731
> 
> 赞同：2
> 
> 时间：2013-04-24T17:42:05.310
> 
> 标签：android, performance, caching, memory-management

我正在开发一个处理任意数量的用户定义视图的 Android 应用程序。视图可以非常简单和轻量级，或者它们可以非常复杂并且需要相对较长的时间来实例化。

当用户从一个视图切换到另一个视图时，我想使用后台线程来预缓存其中一些视图以提高响应能力。我有一种方法可以为每个视图设置优先级，以确定它们应该添加到缓存中或从缓存中删除的顺序。

我的问题是我需要确定何时内存不足。我想我可以用它`MemoryInfo`来确定我有多少可用内存。但是设置阈值是否有一个好的经验法则？我应该在什么时候停止缓存其他视图？在什么时候我应该考虑从缓存中删除低优先级的视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:28:13.783

我认为没有普遍的答案。

这通常取决于您的 UI 是如何构建的，您希望用户如何使用视图以及屏幕上可以容纳多少视图（即使它们是可变高度的）。

您可以看到一些模板，了解 Android 如何在 ListView/Adapter 组合中创建/预缓存视图。

[AbsListView 实现](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.5_r4/android/widget/AbsListView.java#AbsListView.RecycleBin.clear%28%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T22:47:08.057

根据我的阅读，我需要关注的内存限制是 Dalvik 堆限制，而不是设备上可用的总内存。我使用这个过程来获取当前的堆利用率：

```
Java.Lang.Runtime rt = Java.Lang.Runtime.GetRuntime();
long heapused = rt.TotalMemory() - rt.FreeMemory();
long heapmax = rt.MaxMemory();
double ratio = (double)heapused / (double)heapmax; 
```

我以低利用率积极预缓存，并以高比率积极清除缓存。

# eclipse - 如何在 Eclipse 中启用/使用 XSLT 文档功能？

> ID：16198733
> 
> 赞同：0
> 
> 时间：2013-04-24T17:42:13.473
> 
> 标签：eclipse, function, xslt, layout, document

我正在尝试编写一个 XSLT 文件，该文件将处理一个 Android Activity 布局 xml 文件并创建一个等效的 HTML。

在创建/测试 xslt 文件时，我使用的是**eclipse xslt**工具。

此路径上的障碍之一是许多值不是直接保存在 Android 布局文件中（例如字符串/文本值），而是保存在位于“values”文件夹中的单独 xml 文件中

我一直在尝试使用 xslt 函数 'document' 打开 strings.xml 文件，但没有成功。

1.  **Q) 是否需要启用任何 Eclipse 权限才能使 xslt 文档功能运行？**

2.  **Q) 我对文档功能应该如何运作的理解是否有遗漏？**

尝试访问 android strings.xml 文件的**TextView**模板（在 xslt 文件中）中包含的行是：

**`<xsl:value-of select="document('../values/strings.xml')/String[@name=substring-after(@android:text,'/')]" />`**

*   布局文件位于 res/layout 文件夹中
*   xslt 位于 res/xsl 文件夹中。
*   strings.xml 文件位于 res/values 文件夹中

以下是代码示例：

**Android XML 布局片段**：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
    <!-- This is the full screen vertical layout -->

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="250dp"
    android:layout_height="wrap_content"
    android:layout_marginTop="10dp"    
    android:orientation="vertical" >
    <!-- This is the main content vertical layout -->

    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" 
        android:paddingLeft="@dimen/mainHeadingIndent" >
        <!--  This is the Status Section Vertical content layout -->

            <TextView
                style="@style/HeadingTextStyle"
                android:id="@+id/textView2"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight=".5"
                android:text="@string/Status"/>
**The rest of the layout file is intentionally omitted** 
```

**这是 XSLT 文件**：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:android="http://schemas.android.com/apk/res/android">
    <xsl:output method="html" version="4.0" encoding="iso-8859-1"
        indent="yes" />

    <xsl:template match="/">
        <html>
            <head>
            </head>
            <body>
                <xsl:for-each select="LinearLayout">
                    <xsl:call-template name="LinearLayout">
                    </xsl:call-template>
                </xsl:for-each>
            </body>
        </html>
    </xsl:template>

    <xsl:template name="LinearLayout">
        <xsl:variable name="width">
            <xsl:value-of select="@android:layout_width" />
        </xsl:variable>
        <xsl:variable name="height">
            <xsl:value-of select="@android:layout_height" />
        </xsl:variable>
        <xsl:variable name="margin">
            <xsl:value-of select="@android:layout_margin" />
        </xsl:variable>
        <xsl:variable name="orient">
            <xsl:value-of select="@android:orientation" />
        </xsl:variable>
        <xsl:variable name="pos">
            <xsl:number value="position()" format="1" />
        </xsl:variable>

        <div div_pos='{$pos}' Width='{$width}' Height='{$height}' Margin='{$margin}'
            Orient='{$orient}'>
            <xsl:for-each select="LinearLayout">
                <xsl:call-template name="LinearLayout">
                </xsl:call-template>
            </xsl:for-each>
            <xsl:for-each select="TextView">
                <xsl:call-template name="TextView">
                </xsl:call-template>
            </xsl:for-each>
            <xsl:for-each select="ImageButton">
                <xsl:call-template name="ImageButton">
                </xsl:call-template>
            </xsl:for-each>
            <xsl:for-each select="Spinner">
                <xsl:call-template name="Spinner">
                </xsl:call-template>
            </xsl:for-each>
            <xsl:for-each select="Button">
                <xsl:call-template name="Button">
                </xsl:call-template>
            </xsl:for-each>
        </div>
    </xsl:template>

    <xsl:template name="ImageButton">
        <div id="{@android:id}">
            <xsl:comment>
                ImageButton
            </xsl:comment>
        </div>
    </xsl:template>

    <xsl:template name="TextView">
        <xsl:variable name="pos">
            <xsl:number value="position()" format="1" />
        </xsl:variable>
        Text field =
        <xsl:value-of select="@android:text" />
        <xsl:variable name="txt">
            <xsl:choose>
                <xsl:when test="contains(@android:text,'/')">
                    <xsl:value-of select="document('../values/strings.xml')/String[@name=substring-after(@android:text,'/')]" />
                <!-- 
                    <xsl:value-of select="substring-after(@android:text,'/')" />
                -->
                </xsl:when>
                <xsl:otherwise>
                    <xsl:value-of select="@android:text" />
                </xsl:otherwise>
            </xsl:choose>
        </xsl:variable>
        <div id="{@android:id}">
            <xsl:comment>
                TextView Element
            </xsl:comment>
            <p>
                Text pointer is: <xsl:value-of select="$txt" />
            </p>
            <!-- <p>Text pointer is:<xsl:copy-of select="$txt"/></p> <xsl:value-of 
                select="document('../values/strings.xml')/String[@name=$txt]" />
                    <xsl:value-of select="substring-after(@android:text,'/')" />
                -->
        </div>
        endoftext
        <br />
    </xsl:template>
    <xsl:template name="Spinner">
        <div id="{@android:id}">
            <xsl:comment>
                Spinner
            </xsl:comment>
        </div>
    </xsl:template>
    <xsl:template name="Button">
        <div id="{@android:id}">
            <xsl:comment>
                Button
            </xsl:comment>
        </div>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T20:13:56.743

您需要在 XPath 中包含文档的根元素（这很容易忘记）：

```
<xsl:value-of select="document('../values/strings.xml')/*/String[@name=substring-   after(@android:text,'/')]" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T23:18:14.980

嗯，我已经解决了。最大的问题是当 xslt 失败时，它通常会默默地失败....即没有错误

事实证明，问题本身并不是文档功能。这是遵循文档功能的选择标准。这有一个问题，即没有选定的节点，因此语句没有输出。这一切都使它看起来像文档功能不起作用。

最大的变化是 substring-after 子句没有/没有针对正确的属性进行评估。通过拆分子字符串子句，它开始工作。正如他们所说，这是“FM”（翻转魔术）！

这是我用以下内容替换文档行的内容：

```
<xsl:variable name='string_value'>
  <xsl:value-of select="substring-after(@android:text,'/')" />
</xsl:variable>
<xsl:value-of select="$string_value"/>
<xsl:value-of select="document('../values/strings.xml')/*/string[@name=$string_value]"/> 
```

这成功地从 strings.xml 文件中提取了正确的值。

# c - 使用 C 的子集进行语法检查

> ID：16198734
> 
> 赞同：4
> 
> 时间：2013-04-24T17:42:14.387
> 
> 标签：c

我想构建一个基于 Web 的服务，让用户输入一些 C 代码，然后服务器将编译并运行并返回结果。我知道，我知道，安全噩梦。所以也许我可以选择 chroot 或 lxc 或类似的东西。关于这些，stackoverflow 上有很好的帖子。另一种选择是使用编程竞赛软件。

我正在做的不是一般的编程目的。用户将能够向一些存根函数添加代码，仅此而已。他们不需要能够使用指针、数组或字符串。他们不应该能够打开/关闭/读取/写入文件或套接字或共享内存。他们甚至无法创建自己的功能。他们应该只能执行以下操作：

```
// style comments
/* */ style comments
declare variables of type int, double, float, int64_t, int32_t, uint64_t, uint32_t
for, while, do
+, -, *, /, % arithmetic operators ( * as dereference is NOT allowed )
( )
+, - unary operators
++, -- operators
math functions like sin, cos, abs, fabs, etc
a bunch of API functions that will exist
switch, case, break
{ }
if, else, ==, !=
=, +=, -=, *=, /=, etc 
```

有没有一种工具可以用来检查给定的 C 代码块，以确保它只包含那些元素？

如果我找不到现有的解决方案，我可以使用 Antlr 或类似的东西自己想出它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:07:32.113

有关运行用户代码的 Web 服务的真实示例，请查看[Travis CI](https://travis-ci.org/)持续集成服务。开源项目使用它以集中方式运行其单元测试。Travis 流程有点像这样：

*   从已知良好的配置启动**全新的**虚拟机。
*   加载和编译用户代码。
*   运行测试并显示结果。
*   丢弃虚拟机。

有一个时间限制（10 分钟 IIRC）来防止人们在系统上运行僵尸网络，但除此之外，VM 功能齐全并连接到 Internet。无需限制语法或其他人为限制。

要记住的想法是，无论您对用户进行多少限制，您都永远无法保护服务器免受用户代码的威胁。另一种方法是假设服务器在被用户代码触及的那一刻就完全被破坏了，然后就将其丢弃，这就是 Travis 所做的。VM 软件通常具有快照功能来帮助这种事情。

# jquery-animate - 为什么这个用于 animate() 的 toggle() 不起作用？

> ID：16198735
> 
> 赞同：0
> 
> 时间：2013-04-24T17:42:21.210
> 
> 标签：jquery-animate, jquery

我有这个`toggle()`方法`animate()`，因此单击它会切换动画和所有内联样式，并且在交替单击时它将删除它们并返回到正常状态。但是，当我添加切换代码时，它不再起作用（即，它在没有切换的情况下工作，但在第一次单击后不会再次返回）。

```
$("a").click(function () {
    $("ul li").each(function (index) {
        $("a").toggle(function () {
            $("ul li").animate({
                'top': ((index + 1) * 31) + 6 + "px",
                'opacity': '1'
            }, 0);
        }, function () {
            $("ul li").animate({
                'top': '0',
                'opacity': '0'
            }, 0);
        });
    });
}); 
```

我想我可能使用错误的切换（我已经读过应该在被点击的元素上使用切换，但我不确定我是否正确）而且我也不确定这个`each()`功能. 感谢您的任何帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:15:39.103

此解决方案将为您工作。只需将整个代码复制并粘贴到一个 html 文件中，然后检查即可。

```
 <html xmlns="http://www.w3.org/1999/xhtml">
<head>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<style>
ul li {
    position: absolute;
    opacity: 0;
}
</style>
</head>

<body>
<ul>
    <li>Lorem Ipsum 1</li>
    <li>Lorem Ipsum 2</li>
    <li>Lorem Ipsum 3</li>
</ul>
<a href="#" t="0">Click me</a>

<script type="text/javascript">
$("a").click(function () {
if($(this).attr("t")=="0"){
$(this).attr("t","1");
    $("ul li").each(function (index) {
        $(this).animate({
            'top': ((index + 1) * 31) + 6 + "px",
            'opacity': '1'
        }, "slow");
    });
    }else
    {
        $(this).attr("t","0");
        $("ul li").each(function (index) {
        $(this).animate({
            'top': "0px",
            'opacity': '0'
        }, "slow");
    });
    }
});

</script>

</body>
</html> 
```

# jquery - 如何取消以前的 javascript 操作

> ID：16198742
> 
> 赞同：-1
> 
> 时间：2013-04-24T17:42:31.517
> 
> 标签：jquery

我正在尝试在字符数超过 X 时切断一个元素，然后添加一个链接以将其扩展回来。

我在这里有工作脚本：[JSFiddle](http://jsfiddle.net/3VM8A/)

问题是，当单击“阅读更多”链接时，前一个链接会`substr`立即将其切断。

**我怎样才能做到这一点，它不会打败自己？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:46:45.007

如果您更改，您的[代码可以正常工作：](http://jsfiddle.net/3VM8A/1/)

```
$(object).text() = text; 
```

至：

```
$(object).text(text); 
```

# android - Android Share Intent LinkedIn V3.0 不一致行为

> ID：16198744
> 
> 赞同：0
> 
> 时间：2013-04-24T17:42:48.030
> 
> 标签：android, android-intent, linkedin

从 3.0 版开始，我注意到在使用共享意图通过 LinkedIn 共享某些内容时存在一些不一致的行为。起初我认为这是我的应用程序的问题，但我注意到其他应用程序的问题。

我第一次分享 LinkedIn 应用程序时重定向回其主页。

第二次以后它按预期工作 - 它显示更新状态活动。

我的问题是：这只是我设备上的问题还是其他开发人员遇到了这个问题。下面是我分享一些东西的代码。

```
Intent shareIntent = new Intent(Intent.ACTION_SEND);
     shareIntent.setType("text/plain");

 shareIntent.putExtra(Intent.EXTRA_TEXT, "some text");
 shareIntent.putExtra(Intent.EXTRA_SUBJECT, "Sharing something awesome"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T15:02:05.877

这已在今天（2013 年 4 月 26 日）的更新问题中得到修复。我不能再复制它了。

# css - css - box shadow covering all contained divs using absolute positioning

> ID：16198745
> 
> 赞同：3
> 
> 时间：2013-04-24T17:42:49.593
> 
> 标签：css

Here's a reference [http://cssdesk.com/rHWcz](http://cssdesk.com/rHWcz)

What I'm trying to do is have one of the div's contained be under the box shadow. I think using absolute positioning might be giving me some problems, but it has to be absolute positioned. It doesn't matter which one, but one of the box div's cannot lay on top of the box shadow. Any ideas?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T18:03:37.820

为了解决这个问题，您可能需要解决一些问题。首先是您的 HTML 模棱两可/格式不正确：

```
<div class="out"><div class="left">
</div>
<div class="right"></div> 
```

我的假设是你真正的意思是：

```
<div class="out">
 <div class="left"></div>
 <div class="right"></div>
</div> 
```

（你错过了一个结束`</div>`）

修复此问题后，最简单的解决方案实际上是将阴影*从*底层标记 (the `.out` `div`) 中拉出，而是将阴影创建为*覆盖*。

例子：

```
<div class="out">
 <div class="left"></div>
 <div class="right"></div>
 <div class="shadow"></div>
</div> 
```

完成此操作后，您可以轻松地将`.left`and`.right` `<div>`元素放置在您想要的位置，然后强制`.shadow` `div`出现*在 top 上*。

考虑以下 CSS（我还对您的 CSS 进行了一些规范化以减少重复）：

```
.out, .shadow {
  height: 600px; width: 600px;
}
.out {
  background-color: AliceBlue;
  position: relative;
}
.shadow {
  background: transparent;
  -webkit-box-shadow: inset 0px 0px 5px 5px ;
  box-shadow: inset 0px 0px 5px 5px;
  position: absolute; top: 0; left: 0;
}
.left, .right {
  height: 100px; width: 100px;
  bottom: 0;
  position: absolute;
}
.left {
  background-color: green;
  left: 0; 
}
.right {
  background-color: red;
  right: 0;
} 
```

因为它`.shadow` `div`出现在*最后*，所以你不需要任何特殊`z-order`的东西就可以让它出现在顶部。

[这是一个工作 cssdesk](http://cssdesk.com/JQpgs)来演示它的实际操作。

**编辑：**

如评论中所述 - 原始问题实际上只要求两个框之一出现*在*. `box-shadow`如果您希望其中一个出现在其*上方*，只需移动该框的 HTML 标记，使其出现*在 之后*，`.shadow` `<div>`如下所示：

```
<div class="out">
 <div class="left"></div>
 <div class="shadow"></div>
 <div class="right"></div>
</div> 
```

这将导致`.right`框（红色的）出现在阴影*上方*，而不是下方 - 无需任何`z-index`肮脏。

我已更新 cssdesk 示例以显示此版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T18:06:33.880

**HTML**

```
<div class="wrapper">
    <div class="out"></div>  
    <div class="left"></div>
    <div class="right"></div>
</div> 
```

**CSS**

```
.wrapper {
    position: relative;
    width:600px;
    height:600px
}
.out {
    width:600px;
    height:600px;
    background-color:aliceblue;
    position:relative;
    -webkit-box-shadow: inset 0px 0px 5px 5px ;
    box-shadow: inset 0px 0px 5px 5px;
    z-index: 2;
}  
.left {
    width:100px;
    height:100px;
    background-color:green;left:0; bottom:0;
    position:absolute;
    z-index: 1;
}
.right {
      width:100px;
      height:100px;
      background-color:red;right:0; bottom:0;
      position:absolute;
      z-index:4;
} 
```

**演示**

```
http://jsfiddle.net/sqJyw/4/ 
```

**解释**

我添加了包装你的内容的 div，操纵你的 samll div 的 z-index 来显示或隐藏它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T17:51:03.863

```
.left, .right {
  z-index: -1;
} 
```

但是，您必须将背景颜色删除`.out`。没有办法在另一个盒子阴影和背景之间放置一个元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T17:58:14.580

另一种选择是创建另一个元素，容器的高度和宽度，并将其定位到绝对的左上角。

你可以在这里看到一个[例子](http://jsfiddle.net/MAckM/12/)

```
position:absolute;
top:0;
left:0;
width:100%;
height:100%; 
```

您会遇到无法单击带有框阴影的定位元素下方的任何内容的问题。解决此问题的一种方法是在用户悬停时将其隐藏。

# scala - How can I safely return an object to a pool after asynchronous usage?

> ID：16198747
> 
> 赞同：1
> 
> 时间：2013-04-24T17:42:58.280
> 
> 标签：scala, asynchronous, concurrency, pool

Given I have a pool of objects, how can I safely return an an pooled object back to the pool after usage if the usage is asynchronous? (using `Future` and `Promise` in this case)

Here's an example:

```
 pool
        .take
        .flatMap {
        connection =>
          connection
            .sendQuery("SELECT 0")
            .map {
            query =>
              pool.giveBack(connection)
              query.rows.get(0, 0)
          }
      } 
```

The problem here is that if the `sendQuery` call fails, the object will never be returned to the pool. Is there some kind of pipeline sequence for futures what would allow me to safely return this object to the pool even if the code itself fails to do so or should I just ignore this?

The pool implementation is [this one](https://github.com/mauricio/postgresql-netty/blob/8a1c4f9b6b310d22327ef7c03c8717f6c02ea9a4/src/main/scala/com/github/mauricio/async/db/postgresql/pool/SingleThreadedAsyncObjectPool.scala) and the pooled object is [this one](https://github.com/mauricio/postgresql-netty/blob/8a1c4f9b6b310d22327ef7c03c8717f6c02ea9a4/src/main/scala/com/github/mauricio/async/db/Connection.scala).

My main objective here is to make the pool usage be as little error prone as possible and as it stands currently it's clearly not that, since the programmer could forget to return the object and the pool would quickly exhaust itself.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T20:40:31.883

您正在寻找 Future 的“andThen”方法。

# python - Why and how does the Python interpreter remember literal objects

> ID：16198748
> 
> 赞同：2
> 
> 时间：2013-04-24T17:42:59.693
> 
> 标签：python, literals, name-binding

I am surprised by the following result, using `Python 2.7.4`:

```
>>> id(5)
5068376

>>> id(5)
5068376 
```

When the expression 5 is evaluated, a new object is created with the identity of 5068376\. Now, I would expect that repeating the same statement would create *another* new object, whose identity would be unique, since simply evaluating an expression doesn't yield any references to the object and the object should be garbage collected.

It's not that the interpreter is reusing the same memory address either:

```
>>> id(6)
5068364

>>> id(5)
5068376 
```

So what gives? Does the interpreter do behind-the-scenes binding of literals?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T17:44:37.070

在 Python 中有一系列小数作为单例保存；任何引用都将始终返回相同的对象，并且它们永远不会被垃圾收集。

```
>>> for x,y in enumerate(range(1000)):
    if x is not y:
        print x,y
        break

257 257 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T17:52:44.313

这里有两件事：

*   小 Python 整数（从 -5 到 256 包括在内）是*interned*；文字整数被翻译成相同数字的完全相同的对象。对于这些整数，它们 `id()`将是常数。

*   仅在对象的生命周期内`id()`是唯一的；如果第一个对象已被再次清除，则可以稍后将其重新用于另一个对象。您不会将文字存储在任何地方，因此*可以*再次重用内存地址：

    ```
    >>> id('foo bar')
    4572936304
    >>> id('bar baz')
    4572936304 
    ```

    这里`'foo bar'`和`'bar baz'`是两个不同的对象，但它们的生命周期不重叠。第一个被创建，传递给`id()`函数，然后再次被销毁。`id()`然后依次创建、传递和销毁第二个字符串。

# java - 在 Hadoop 中使用 NullWritable 的优势

> ID：16198752
> 
> 赞同：28
> 
> 时间：2013-04-24T17:43:12.423
> 
> 标签：java, hadoop, mapreduce

与使用文本（即）相比，`NullWritable`使用`null`键/值有什么优势。我从《Hadoop：权威指南》一书中看到以下内容。`null``new Text(null)`

> `NullWritable`是 的一种特殊类型`Writable`，因为它的序列化长度为零。没有字节被写入流或从流中读取。它用作占位符；例如，在 MapReduce 中，`NullWritable`当您不需要使用该位置时，可以将键或值声明为 a — 它有效地存储了一个常量空值。当您想要存储值列表时， NullWritable 也可以用作键`SequenceFile`，而不是键值对。它是一个不可变的单例：可以通过调用来检索实例 `NullWritable.get()`

我不清楚如何使用`NullWritable`? 在开始的输出文件中是否会有一个常量值指示该文件的键或值是`null`，以便 MapReduce 框架可以忽略读取`null`键/值（以 为准`null`）？`null`另外，文本实际上是如何序列化的？

谢谢，

文卡特

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-24T18:42:11.607

键/值类型必须在运行时给出，因此任何写入或读取`NullWritables`的内容都会提前知道它将处理该类型；文件中没有标记或任何内容。从技术上讲，`NullWritables`它们是“读取”的，只是“读取” a`NullWritable`实际上是无操作的。您可以亲眼看到根本没有任何书面或阅读内容：

```
NullWritable nw = NullWritable.get();
ByteArrayOutputStream out = new ByteArrayOutputStream();
nw.write(new DataOutputStream(out));
System.out.println(Arrays.toString(out.toByteArray())); // prints "[]"

ByteArrayInputStream in = new ByteArrayInputStream(new byte[0]);
nw.readFields(new DataInputStream(in)); // works just fine 
```

至于你的问题`new Text(null)`，再次，你可以试试看：

```
Text text = new Text((String)null);
ByteArrayOutputStream out = new ByteArrayOutputStream();
text.write(new DataOutputStream(out)); // throws NullPointerException
System.out.println(Arrays.toString(out.toByteArray())); 
```

`Text`根本无法使用`null` `String`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-01T11:24:16.693

我改变了运行方法。和成功

```
@Override
public int run(String[] strings) throws Exception {
    Configuration config = HBaseConfiguration.create();  
    //set job name
    Job job = new Job(config, "Import from file ");
    job.setJarByClass(LogRun.class);
    //set map class
    job.setMapperClass(LogMapper.class);

    //set output format and output table name
    //job.setOutputFormatClass(TableOutputFormat.class);
    //job.getConfiguration().set(TableOutputFormat.OUTPUT_TABLE, "crm_data");
    //job.setOutputKeyClass(ImmutableBytesWritable.class);
    //job.setOutputValueClass(Put.class);

    TableMapReduceUtil.initTableReducerJob("crm_data", null, job);
    job.setNumReduceTasks(0);
    TableMapReduceUtil.addDependencyJars(job);

    FileInputFormat.addInputPath(job, new Path(strings[0]));

    int ret = job.waitForCompletion(true) ? 0 : 1;
    return ret;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-27T09:20:06.657

您始终可以将字符串包装在您自己的 Writable 类中，并使用一个布尔值指示它是否有空白字符串：

```
@Override
public void readFields(DataInput in) throws IOException { 
    ...
    boolean hasWord = in.readBoolean();
    if( hasWord ) {
        word = in.readUTF();
    }
    ...
} 
```

和

```
@Override
public void write(DataOutput out) throws IOException {
    ...
    boolean hasWord = StringUtils.isNotBlank(word);
    out.writeBoolean(hasWord);
    if(hasWord) {
        out.writeUTF(word);
    }
    ...
} 
```

# c# - C# Datagridview 如何将单元格编辑回数据库

> ID：16198753
> 
> 赞同：0
> 
> 时间：2013-04-24T17:43:15.910
> 
> 标签：c#, mysql, database, datagridview

祝大家有美好的一天。我有这个填充 Datagridview 的代码。我试图编辑它。但似乎我无法保存对数据库的任何更改。虽然我没有收到任何错误。任何帮助将非常感激。非常感谢！

```
private void FrmViewCustomer_Load(object sender, EventArgs e)
        {
            string query = "SELECT CONCAT(firstname,', ',lastname) AS NAME, orderedgood AS OrderedGood FROM customer c;";

            using (MySqlConnection conn = new MySqlConnection(ConfigurationManager.ConnectionStrings["default"].ConnectionString))
            {
                conn.Open();
                using (MySqlCommand command = new MySqlCommand(query, conn))
                {

                    using (adapter = new MySqlDataAdapter(command))
                    {
                        dataGridView1.Rows.Clear();

                        dataGridView1.AllowUserToAddRows = false;
                        DataTable dt = new DataTable();
                        adapter.Fill(dt);
                        dataGridView1.DataSource = dt;
                    }
                }
            }
        }

        private void button1_Click(object sender, EventArgs e)
        {
            DataTable dt = new DataTable();
            this.adapter.Update(dt);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T14:49:05.347

我的表

```
id   name   
1    John
2    Carl
3    Sam 
```

后面的 C# 代码：

```
public partial class Form1 : Form
{
    DataTable dt = null;
    DataGridView dgv = null;

    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        dt = new DataTable();

        using (MySqlConnection conn = new MySqlConnection("server=localhost;user=root;pwd=1234;database=test;"))
        {
            conn.Open();
            using (MySqlCommand cmd = new MySqlCommand())
            {
                cmd.Connection = conn;
                cmd.CommandText = "select * from MyTable;";
                MySqlDataAdapter da = new MySqlDataAdapter(cmd);
                da.Fill(dt);
            }
            conn.Close();
        }

        dgv = new DataGridView();
        dgv.AllowUserToAddRows = false;
        dgv.CellEndEdit += new DataGridViewCellEventHandler(dgv_CellEndEdit);
        dgv.CellValidating += new DataGridViewCellValidatingEventHandler(dgv_CellValidating);
        dgv.Dock = DockStyle.Fill;
        dgv.DataSource = dt;
        this.Controls.Add(dgv);
    }

    void dgv_CellValidating(object sender, DataGridViewCellValidatingEventArgs e)
    {
        if (e.ColumnIndex == 0)
        {
            dgv.CancelEdit();
        }
    }

    void dgv_CellEndEdit(object sender, DataGridViewCellEventArgs e)
    {
        string id = dt.Rows[e.RowIndex]["id"] + "";
        string col = dt.Columns[e.ColumnIndex].ColumnName;
        string data = dgv.Rows[e.RowIndex].Cells[e.ColumnIndex].Value+"";

        string sql = string.Format("UPDATE `MyTable` SET `{0}` = '{1}' WHERE ID = {2};", col, data, id);

        using (MySqlConnection conn = new MySqlConnection("server=localhost;user=root;pwd=1234;database=test;"))
        {
            conn.Open();
            using (MySqlCommand cmd = new MySqlCommand())
            {
                cmd.Connection = conn;
                cmd.CommandText = sql;
                cmd.ExecuteNonQuery();
            }
            conn.Close();
        }
    }
} 
```

# android - 如何在 Android 中从 XML 更改 TabWidget 的背景颜色

> ID：16198758
> 
> 赞同：1
> 
> 时间：2013-04-24T17:43:27.847
> 
> 标签：android, android-tabhost, android-ui, android-xml, android-tabactivity

我遇到过这个问题。我在视图顶部有一个选项卡小部件，其中有四个选项卡。我被要求更改整个选项卡视图区域的背景颜色。不是针对任何选项卡，而是针对该选项卡视图的整个区域。

由于某些品牌原因，我还被要求不要更改任何源代码。所以我只能通过xml文件来做。我四处搜索，但似乎所有解决方案都是使用 java 代码。所以我想知道是否有一种方法可以通过仅使用资源文件来更改小部件背景颜色（只是颜色，而不是图像）？

这是我的选项卡布局的布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <RelativeLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:padding="5dp"
        >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@color/tabbackgroundcolor" />

        <FrameLayout
            android:layout_below="@android:id/tabs"
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:padding="5dp"
        />
    </RelativeLayout>
</TabHost> 
```

您可以看到我在 TabWidget 部分添加了“android:background="@color/tabbackgroundcolor"”，但是它不起作用..

谢谢！

# url - Drupal 7: how to get image url to display image

> ID：16198762
> 
> 赞同：1
> 
> 时间：2013-04-24T17:43:50.153
> 
> 标签：url, drupal-7

In Drupal 7, I'm using the feeds module to pull in a bunch of books

That's all working perfectly. I am not setting up some views. the feed pulls in an image url to on o my field like this `[http://img.techbook.com/techwords/content/bk/blak/003834/full_image.jpg` but of course I need

```
<img src="http://img.techbook.com/techwords/content/bk/blak/003834/full_image.jpg" /> 
```

to display the image on the page

What is the best method of altering this fields' text, or is there a method so I can automatically format correctly. There are hundres of these, so manually do it is not an option

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T03:11:54.433

您可以使用 Feeds Tamper，它可以让您在传入的 feed 数据进入之前对其进行操作（即用 img 标签包装 url）：[http ://drupal.org/project/feeds_tamper](http://drupal.org/project/feeds_tamper)

或者

您可以简单地将 URL 导入到字段中，然后使用包含 img 标记的模板文件来呈现 URL。

像这样：在 node--content-type-name-here.tpl.php

```
<img src="<?php print render($content['field_url']); ?>" /> 
```

我会推荐后者，并且只使用 Feeds Tamper 进行更严重的操作。

# html - CSS div 缩小时缩小

> ID：16198766
> 
> 赞同：0
> 
> 时间：2013-04-24T17:44:00.927
> 
> 标签：html, css, css-float

我正在为我的网站的面包屑使用 div。它在浏览器窗口的实际大小和放大时保持恒定大小。但在缩小时，div 正在缩小。

这是正在使用的代码。我需要在某处进行编辑吗？

```
 <style>

.breadcrumb { 
        list-style: none; 
        overflow: hidden; 
        font: 18px Lucida Sans Unicode;
        text-align: center;
}
.breadcrumb li { 
        float: left;

}
.breadcrumb li a {
        color: white;
        text-decoration: none; 
        padding: 11px 0 11px 55px;
        background:  #327ea4;                   /* fallback color */
        background:  #327ea4; 
        position: relative; 
        display: block;
        float: left;
        width: 15.12em;
        /*width: 15.1185em;*/
        cursor: default;
        border-top-left-radius: .4em;
        pointer-events: none;
}
.breadcrumb li a:after { 
        content: " "; 
        display: block; 
        width: 0; 
        height: 0;
        border-top: 50px solid transparent;           /* Go big on the size, and let overflow hide */
        border-bottom: 50px solid transparent;
        border-left: 30px solid  #327ea4;
        position: absolute;
        top: 50%;
        margin-top: -50px; 
        left: 100%;
        z-index: 2; 
}   
.breadcrumb li a:before { 
        content: " "; 
        display: block; 
        width: 0; 
        height: 0;
        border-top: 50px solid transparent;           /* Go big on the size, and let overflow hide */
        border-bottom: 50px solid transparent;
        border-left: 30px solid white;
        position: absolute;
        top: 50%;
        margin-top: -50px; 
        margin-left: 1px;
        left: 100%;
        z-index: 1; 
}   
.breadcrumb li:first-child a {
        padding-left: 30px;
}
.breadcrumb li:nth-child(2) a       { background:        #7fc1ec; color: #327ea4; cursor: default;}
.breadcrumb li:nth-child(2) a:after { border-left-color: #7fc1ec; color: #327ea4; cursor: default;}
.breadcrumb li:nth-child(3) a       { background:        #7fc1ec; color: #327ea4; cursor: default;}
.breadcrumb li:nth-child(3) a:after { border-left-color: #7fc1ec; color: #327ea4; cursor: default;}
.breadcrumb li:nth-child(4) a       { background:        #7fc1ec; color: #327ea4; cursor: default;}
.breadcrumb li:nth-child(4) a:after { border-left-color: #7fc1ec; color: #327ea4; cursor: default; }
.breadcrumb li:last-child a {
        /*background: white !important;*/
        /*color: black;*/
        pointer-events: none;
        cursor: default;
        border-top-right-radius: .4em;
}
.breadcrumb li:last-child a:after { border: 0; }
    </style>

<div style="width:75em;" oncontextmenu="return false"  >
    <ul class="breadcrumb">
        <li><a href="#">Step 1</a></li>
        <li><a href="#">Step 2</a></li>
        <li><a href="#">Step 3</a></li>
                    <li><a href="#">Step 4</a></li>
    </ul>

</div> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:55:40.077

当您在 EM 中定义元素的高度或宽度时，例如在以下代码段中...

```
.breadcrumb li a {
        color: white;
        text-decoration: none; 
        padding: 11px 0 11px 55px;
        background:  #327ea4;
        background:  #327ea4; 
        position: relative; 
        display: block;
        float: left;
        width: 15.12em; /* <-- RIGHT HERE */
        cursor: default;
        border-top-left-radius: .4em;
        pointer-events: none;
} 
```

...您实际上是将元素的大小绑定到该元素的字体大小。

当您增加浏览器“缩放”时，所发生的只是字体大小正在增加（以像素为单位）。

例子：

`font-size: 10px`，因此`width: 2em`== `width: 20px`。

缩放（增加字体大小）

`font-size: 12px`，因此`width: 2em`== `width: 24px`。

# sql - ms access - 3 table join w/ complex JOIN condition on third table

> ID：16198768
> 
> 赞同：1
> 
> 时间：2013-04-24T17:44:10.750
> 
> 标签：sql, ms-access

I need to join multiple tables in access. Access has some odd syntax when it comes to joins, and I cant seem to get this right

In particular, C needs to consider fields from both A and B

```
 select a.*, B.*, c.* 
  from 
  (tblOne as A 
   Left join tblTwo as B on  A.ParentId = B.Id )
   left join tblThree as C on C.ParentId = B.Id and C.ShoeSize = A.ShoeSize 
```

I have encountered and gotten past putting each Parens thing when more than 2 tables are involved. I can join in C as long as I only want to refer to 1 of the other tables. This type thing is fairly straight forward in SQL Server. Any help would be appreciated, I cant seem to find an answer on google.

The client is currently using ms Access 2003\. If the problem can be remedied by a newer version, I am pretty I could talk them into an upgrade.

thanks

greg

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:44:44.870

我刚刚在 Access 2010 中尝试了以下方法，它*似乎*有效，但我必须承认，我对如何在“现实世界”中使用它并没有清晰的认识......

```
SELECT ab.*, c.* 
FROM 
(
    SELECT a.ID AS ID1, a.ShoeSize AS ShoeSize1, b.ID AS ID2 
    FROM tblOne a LEFT JOIN tblTwo b 
        ON a.ParentId = b.Id
) ab LEFT JOIN tblThree c 
    ON c.ParentId = ab.ID2 and c.ShoeSize = ab.ShoeSize1 
```

# macos - Is there any difference in position of the NSViews in the object menu in the interface builder?

> ID：16198771
> 
> 赞同：0
> 
> 时间：2013-04-24T17:44:29.863
> 
> 标签：macos, cocoa, nsview, nib

Here is what I have in my Objects menu in the interface builder

![enter image description here](https://i.stack.imgur.com/gWwOq.png)

Im curious if the order of ImageView , PaintView and PlayerView matters? In my case I want to stack them in the following order: PlayerView / ImageView / PaintView where paint view is on the very top (closest to the "user").

Does anyone know how I can do it here?!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T02:48:03.240

这是对的。那里的层次结构将对应于视图的绘制顺序。在您的图像中，Paint View 将位于 Player View 等之上。

# java - CXF 服务客户端中的“IOException：奇怪的 I/O 流”

> ID：16198778
> 
> 赞同：0
> 
> 时间：2013-04-24T17:45:00.930
> 
> 标签：java, web-services, soap, cxf

我们在 CXF 中看到了间歇性错误。响应相当大（几百 KB），启用了 MTOM，并为 CXF 请求/响应日志拦截器启用调试解决了这个问题，类似于[这篇文章](https://stackoverflow.com/questions/5902048/apache-cxf-why-does-putting-cxf-logging-on-my-jax-ws-endpoint-fix-this-issue)（未解决）。我们的项目正在利用 CXF 版本 2.2.9。

```
javax.xml.ws.soap.SOAPFaultException: Unmarshalling Error: [was class java.io.IOException] Strange I/O stream, returned 0 bytes on read 
                at org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:146)
                at com.sun.proxy.$Proxy751.browseFiles(Unknown Source)
…
                at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.RuntimeException: [was class java.io.IOException] Strange I/O stream, returned 0 bytes on read
                at com.ctc.wstx.util.ExceptionUtil.throwRuntimeException(ExceptionUtil.java:18)
                at com.ctc.wstx.sr.StreamScanner.throwLazyError(StreamScanner.java:731)
                at com.ctc.wstx.sr.BasicStreamReader.safeFinishToken(BasicStreamReader.java:3657)
                at com.ctc.wstx.sr.BasicStreamReader.getTextCharacters(BasicStreamReader.java:830)
                at com.sun.xml.bind.v2.runtime.unmarshaller.StAXStreamConnector.handleCharacters(StAXStreamConnector.java:323)
…
                at org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:124)
                ... 51 more
Caused by: java.io.IOException: Strange I/O stream, returned 0 bytes on read
                at com.ctc.wstx.io.BaseReader.reportStrangeStream(BaseReader.java:148)
                at com.ctc.wstx.io.UTF8Reader.loadMore(UTF8Reader.java:373)
… 
```

我最初认为这是由响应数据中的错误/无效字符（编码？）引起的；但是，它现在看起来更像是一个网络问题。很奇怪，在遇到此问题之前，该服务已经运行了很长时间（几年）而没有出现问题。

为什么会出现这个错误？有没有办法在不启用调试日志记录的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:22:14.667

升级到较新版本的 CXF 可能会解决此问题。CXF mime 流中有一些错误。特别是，这看起来非常类似于：

[https://issues.apache.org/jira/browse/CXF-3068](https://issues.apache.org/jira/browse/CXF-3068)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T23:41:46.737

基于[此](https://stackoverflow.com/questions/2319395/what-0-returned-by-inputstream-read-means-how-to-handle-this)并考虑 com.ctc.wstx.io.UTF8Reader.loadMore 的源代码，[当](http://grepcode.com/file/repo1.maven.org/maven2/org.codehaus.woodstox/wstx-asl/3.2.5/com/ctc/wstx/io/UTF8Reader.java#UTF8Reader.loadMore%28int%29)通过[BaseReader(ReaderConfig, InputStream, byte[], int, int)](http://grepcode.com/file/repo1.maven.org/maven2/org.codehaus.woodstox/wstx-asl/3.2.5/com/ctc/wstx/io/BaseReader.java#BaseReader.%3Cinit%3E%28com.ctc.wstx.api.ReaderConfig%2Cjava.io.InputStream%2Cbyte%5B%5D%2Cint%2Cint%29)传递给[mBuffer](http://grepcode.com/file/repo1.maven.org/maven2/org.codehaus.woodstox/wstx-asl/3.2.5/com/ctc/wstx/io/BaseReader.java#BaseReader.0mBuffer)的缓冲区为零长度时，可能会出现问题。

loadMore [()](http://grepcode.com/file/repo1.maven.org/maven2/org.codehaus.woodstox/wstx-asl/3.2.5/com/ctc/wstx/io/UTF8Reader.java#UTF8Reader.loadMore%28int%29)方法实现是否正确？如果[read()](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/io/InputStream.java#InputStream.read%28byte%5B%5D%29)返回 0，他们应该这样做吗？

# google-chrome-extension - Chrome 扩展程序：消息传递

> ID：16198779
> 
> 赞同：0
> 
> 时间：2013-04-24T17:45:01.200
> 
> 标签：google-chrome-extension, message-passing

我坚持在我的 Google Chrome 扩展程序中传递消息。

我有这个 popup.js：

```
chrome.runtime.onMessage.addListener(
  function(request, sender, sendResponse) {
    if (request.do == 'popup_refreshMessage')
      jQuery('#message').html(request.message);
  }
); 

jQuery('input[type=button]').click(function(){
  chrome.runtime.sendMessage({
    do: "background_start"
  });
}); 
```

这个popup.html：

```
<html>
<body>
  Message: 
  <div id="message"></div>

  <input type="button" value="Start">
</body>
</html> 
```

现在，我希望背景页面在我的弹出窗口中定期刷新消息。所以，background.js 看起来像这样：

```
chrome.runtime.onMessage.addListener(
  function(request, sender, sendResponse) {
    if (request.do == 'background_start') {
      var periodicFunc = function() {
        request.callback({
          do: "popup_refreshMessage",
          message: Math.random()
        });
        setTimeout(myFunc, 1000);
      }
    periodicFunc();
  }
}); 
```

但是当我单击按钮时，什么也没有发生，并且控制台中出现“未捕获的类型错误：无法调用未定义的方法 'addListener'”。

如何编写背景页面以在弹出窗口中定期更新 HTML？谢谢你。

# apache - 在 Apache 配置条件语句中使用 shell 环境变量？

> ID：16198784
> 
> 赞同：1
> 
> 时间：2013-04-24T17:45:19.470
> 
> 标签：apache, apache2

我不清楚我是否可以有一个变量，例如

```
LAN_ALIAS=some.local.domain 
```

在我的 shell 环境中，并有条件地使用它来生成一个 ServerAlias 指令：

```
<MagicalIfEnvVar LAN_ALIAS>
  ServerAlias ${LAN_ALIAS}
</MagicalIfEnvVar> 
```

我一直在阅读 Apache 文档，但正如您可以想象的那样，搜索“环境变量”（及其变体）会导致很多无用的参考。

有什么方法可以在 Apache2.2 中做类似的事情吗？

# r - 从R中的矩阵中提取正元素

> ID：16198785
> 
> 赞同：-1
> 
> 时间：2013-04-24T17:45:20.713
> 
> 标签：r, select, matrix, extract

我有这个 6x6 矩阵，

```
1    1    2    1    2    2
1    3    1    1    2    1
0    5    1    1    0    3
0    5    0    2    1    3
4    1    3    3    2    3
2    3    3    0    2    3 
```

我需要找到一种方法来选择所有大于 0 的值，这样我就可以创建一个包含所有大于 0 的元素的向量。有没有简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T17:48:09.427

假设`mat`是你的矩阵

```
mat[mat>0]
 [1] 1 1 4 2 1 3 5 5 1 3 2 1 1 3 3 1 1 1 2 3 2 2 1 2 2 2 1 3 3 3 3 
```

# python - 如何在我当前在 mac（而不是 2.6）上的 python2.7 安装中使 pip 安装 python 模块？

> ID：16198789
> 
> 赞同：0
> 
> 时间：2013-04-24T17:45:33.487
> 
> 标签：python, macos, pip, macports

我有一个使用 macports 安装 python 的 mac。我喜欢这种方式，因为我可以手动安装 numpy、scipy 等，而无需弄乱像 enthought 这样的预构建包。我现在想安装 web.py，但是在尝试通过 easy_install 和 pip 安装它之后，我无法在交互式 python 命令行上导入它。安装它时，它还说：Installed /Library/Python/2.6/site-packages/web.py-0.37-py2.6.egg 当我输入“python”时它说以下内容：Python 2.7.3（默认， Oct 22 2012, 06:12:28) [GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] 在达尔文

当我输入“which python”时，我得到：/opt/local/bin/python

所以我的问题是：当我在命令行上输入“python”时，如何在 python 安装中制作 easy_install 和/或 pip install 模块？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-14T18:57:35.830

如果您使用 macports for python，那么您也应该通过 macports 安装 pip 和 easy_install。你似乎有一个非 macports pipon 你的路径。

安装 py27-pip 将在您的路径上为您提供一个 pip-2.7 可执行脚本，与 easy_install 类似。

macports 版本的名称中包含 python 版本，以便安装多个版本的 python。如果您只想要 pip，则创建一个 bash 别名或将 pip-2.7 脚本链接到您路径上的目录中的 pip。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T18:49:55.393

我也在我的 Mac 上进行 Django 开发，但找到了一个更好的解决方案（允许轻松使用 pip）使用 Vagrant + VirtualBox + Chef 在本地 VM 中安装 Django（这将允许您复制生产服务器设置）。然后，您可以在本地浏览器上访问它。这里有一个很好的介绍：

[http://blog.smalleycreative.com/tutorials/setup-a-django-vm-with-vagrant-virtualbox-and-chef/](http://blog.smalleycreative.com/tutorials/setup-a-django-vm-with-vagrant-virtualbox-and-chef/)

我已经更新了教程提供的 vagrantfile 以使用新的 Ubuntu 版本、包括 emacs、python 和 MySQL 客户端。我希望这有帮助。

需要额外的 git repos：

```
git clone git://github.com/opscode-cookbooks/emacs
git clone git://github.com/opscode-cookbooks/python
git clone git://github.com/opscode-cookbooks/mysql 
```

和流浪文件：

```
Vagrant::Config.run do |config|
  config.vm.define :djangovm do |django_config|
    # Every Vagrant virtual environment requires a box to build off of.
    django_config.vm.box = "precise32"

    # The url from where the 'config.vm.box' box will be fetched if it
    # doesn't already exist on the user's system.
    django_config.vm.box_url = "http://files.vagrantup.com/precise32.box"

    # Forward a port from the guest to the host, which allows for outside
    # computers to access the VM, whereas host only networking does not.
    django_config.vm.forward_port 80, 8080
    django_config.vm.forward_port 8000, 8001

    # Enable provisioning with chef solo, specifying a cookbooks path (relative
    # to this Vagrantfile), and adding some recipes and/or roles.
    #
    django_config.vm.provision :chef_solo do |chef|
      chef.cookbooks_path = "cookbooks"
      chef.add_recipe "apt"
      chef.add_recipe "apache2::mod_wsgi"
      chef.add_recipe "build-essential"
      chef.add_recipe "git"
      chef.add_recipe "vim"
      chef.add_recipe "emacs"
      chef.add_recipe "python"
      chef.add_recipe "mysql"
    #
    #   # You may also specify custom JSON attributes:
    #   chef.json = { :mysql_password => "foo" }
    end
  end
end 
```

# php - Get current URL path with query string in PHP

> ID：16198790
> 
> 赞同：135
> 
> 时间：2013-04-24T17:45:36.397
> 
> 标签：php, url

I need to get the path from the URL of the current request. For example, if the current URL is:

```
"http://www.example.com/example/test/hi.php?randomvariable=1" 
```

I would want this:

```
"/example/test/hi.php?randomvariable=1" 
```

* * *

## 回答 #1

> 赞同：253
> 
> 时间：2013-04-24T17:47:08.760

你想要`$_SERVER['REQUEST_URI']`。从[文档](http://php.net/manual/en/reserved.variables.server.php)：

> ### `'REQUEST_URI'`
> 
> 为访问此页面而提供的 URI；例如，`'/index.html'`。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2013-04-24T17:48:43.070

它应该是 ：

```
$_SERVER['REQUEST_URI']; 
```

看看：[Get the full URL in PHP](https://stackoverflow.com/questions/6768793/php-get-the-full-url)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-07-27T05:54:31.703

```
<?php
function current_url()
{
    $url      = "http://" . $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI'];
    $validURL = str_replace("&", "&amp;", $url);
    return $validURL;
}
//echo "page URL is : ".current_url();

$offer_url = current_url();

?>

<?php

if ($offer_url == "checking url name") {
?> <p> hi this is manip5595 </p>

<?php
}
?> 
```

# python - 使用 pip 将包安装到特定的相对目录

> ID：16198791
> 
> 赞同：2
> 
> 时间：2013-04-24T17:45:36.450
> 
> 标签：python, pip, distutils

我有几个软件包需要安装在这样的目录中：

../site-packages/mynamespace/packages

主要是出于历史原因，因此进口不会中断。

有几个这样的包，我们需要能够根据项目的需要选择我们需要的包。

所以，这一切都需要在 requirements.txt 文件中发生，所以在 requirements.txt 中是这样的

```
requests
celery
beautifulsoup4
path/to/mypackage1
path/to/mypackage3
path/to/mypackage5 
```

（例如）

然后我需要

```
path/to/mypackage1
path/to/mypackage3
path/to/mypackage5 
```

安装到：

```
../site-packages/mynamespace/packages 
```

因此，mypackage1、mypackage3 和 mypacakge5 是否都可以从

```
from mynamespace.packages import mypackage1 #(and 3 and 5) 
```

到目前为止，我尝试做的是创建一个 site.cfg 文件以与 setup.py 一起使用，但我认为 pip 可能正在创建它自己的安装值并绕过 site.cfg，如下所示：

```
[install]
install-base=$HOME
install-purelib=Lib\site-packages\mynamespace\packages 
```

此外，每个环境都在虚拟环境中运行。

我想过要运行两个单独的需求文件，但这不可行。我需要将所有包放在一个 requirements.txt 文件中，该文件只需通过 pip install -r requirements.txt 调用

我想过让它们直接安装到站点包，然后将导入添加到，`mynamespace.packages.__init__.py`但这也是不可行的。这些包需要实际位于 site-pacakges.mynamespace.packages 下。

此外，--target 对我不起作用，因为 A.）这只是绝对路径（相对路径有效，但这是基于用户当前所在的位置）B.）这违反了上述单个 requirements.txt 的要求文件（否则请求等都会转到另一个目录）

我想一定有办法破解site.cfg。

理想情况下，如果我可以在 requirements.txt 中添加 --target=relative_path 来解决我的问题，但我认为这是不可能的。需求文件中只允许使用几个选项（-e 是一个），但不允许使用 -t。即便如此，它必须是相对的，基于用于安装的站点包目录，而不是相对于用户所在的位置。

此外，这需要在所有操作系统中工作。

谢谢

# python - 行为不端的python sys脚本

> ID：16198798
> 
> 赞同：0
> 
> 时间：2013-04-24T17:46:04.163
> 
> 标签：python, linux

我制作了这个用于更新系统的小 Python 脚本（但还没有输入所有命令，只是想尝试一个更新命令）我的系统，但是在进入 root/超级用户模式后它行为异常。

我想知道是否有人可以指出问题/错误。

```
import os

print "\t Entering Upgrade Mode "

if os.system("su")==1:
      print "passed"
      os.system("apt-get update")
      os.system(exit)
else:
      print "failed" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:08:05.777

我怀疑调用`su`是问题所在。直到您退出子外壳（在这种情况下将您从根目录中注销），调用才会退出。这意味着任何后续调用都会再次以（可能）普通用户的身份执行。

尝试以下操作：

```
import os

print "\t Entering Upgrade Mode "

os.system("sudo apt-get update") 
```

或者`su`需要`-c`标志来处理后续命令，例如

```
su -c "echo Hello" 
```

您可能应该使用`subprocess`；`os.system`已弃用。

# php - Magento 异常处理

> ID：16198801
> 
> 赞同：1
> 
> 时间：2013-04-24T17:46:06.317
> 
> 标签：php, magento, exception-handling

我想为特定异常添加一些处理

```
Zend_Db_Statement_Exception' with message 
'SQL ERROR: SQLSTATE[HY000]: General error: 2006 MySQL server has gone away 
```

我更喜欢在相当低级别的地方对异常消息进行字符串比较，这样在我的应用程序逻辑中，我可以简单地捕获一个友好的异常`My_Module_Exception_MysqlGoneAway`，例如应用逻辑。

所以在这种特殊情况下，错误是由 load() 方法触发的，所以我可以重写 Mage_Core_Model_Abstract，重载 load() 方法并添加异常处理。但这不是万无一失的，b/c 这种事情也可能由收集负载或其他代码区域触发。

所以另一种选择是覆盖`lib/Varien/Db/Adapter/Pdo/Mysql.php`in `app/code/local`，并在那里添加异常处理，但这似乎有点矫枉过正，只是为了有一个很好的异常类。

有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T20:40:02.873

正如您提出的最佳解决方案是在本地覆盖 MySQL.php 适配器，因为这是任何 MySQL 事务都将使用的文件。对于这个错误，虽然我会更多地调查原因，因为 MySQL 消失可能意味着存在更大的问题。

您是否正在登录 MySQL 以查看它为什么断开连接？

回到你的观点，适配器类是所有其他类继承逻辑的地方，并且是查询数据库的主要主力，有几个实例需要添加额外的逻辑来捕获异常。连接、RawQuery 等

# c# - C# - 替换字符串中的字符

> ID：16198802
> 
> 赞同：2
> 
> 时间：2013-04-24T17:46:11.823
> 
> 标签：c#, string, connection-string

我有一个包含登录名、数据库和密码的字符串。

```
string str = "user Id=abc, database=DDD, Password=mypasswd" 
```

我希望能够用不同的值替换数据库值“DDD”。

我尝试使用 string.Replace，但我不知道现有数据库将是什么。

有谁知道一个简单的解决方案？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-24T17:55:24.047

**以下是 MSDN 唯一推荐的防止连接字符串注入攻击的方法**

[http://msdn.microsoft.com/en-us/library/ms254947.aspx](http://msdn.microsoft.com/en-us/library/ms254947.aspx)

```
// cs stores previous connection string which came from config

System.Data.SqlClient.SqlConnectionStringBuilder builder = 
    new System.Data.SqlClient.SqlConnectionStringBuilder(cs);
builder.InitialCatalog = "NEWDB";

// you get your database name replaced properly...
cs = builder.ToString(); 
```

根据数据库或数据库驱动程序的类型，您必须使用不同的类，对于 MySql，它应该是 MySqlConnectionStringBuilder，属性名称可能是 Database。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-24T17:54:14.337

一种替代方法是使用正则表达式，这将为您替换：

```
using System.Text.RegularExpressions;

string cStr = "user Id=abc, database=DDD, Password=mypasswd";
Console.WriteLine(cStr);

Regex r = new Regex("(?<=database=)(.+?)(?=,)");
cStr = r.Replace(cStr, "NewDatabaseName");

Console.WriteLine(cStr); 
```

**注意：**这是经过编译、运行和验证的，`scriptcs`因此它相当可放入您的解决方案中。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-24T17:48:39.303

使用[String.Format](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)怎么样？

```
string username = "abc";
string database = "myDB";
string password = "my_pw";

string str = String.Format("user Id={0}, database={1}, Password={2}",
                           username, database, password); 
```

然后，您可以从配置文件中加载这些值（甚至整个连接字符串）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-24T17:54:03.467

正则表达式也是一种选择：

```
string str = "user Id=abc, database=DDD, Password=mypasswd",
    newDatabase = "newDb";

Console.WriteLine( Regex.Replace( str, @"(?<=database=)(.*?)(?=,)", m => newDatabase ) ); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-24T17:48:08.617

在逗号分隔符处拆分字符串，然后取结果数组的第二个索引，在等号分隔符处拆分，替换第二个元素，然后重新组合所有

```
string str = "user Id=abc, database=DDD, Password=mypasswd";
string[] parts = str.Split(',');
string[] dbparts = parts[1].Split('=');
dbparts[1] = "new_database_name";

parts[1] = string.Join("=", dbparts);
string final = string.Join(", ", parts); 
```

而且，好吧，进行一些错误检查会更安全。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-24T18:01:58.633

与上述相同，但如果您对 LINQ 感兴趣

```
string str = "user Id=abc, database=DDD, Password=mypasswd";

var q = from part in str.Split(new[] {','})
                let trimedPart= part.Trim()
                let replacedPart  =trimedPart.StartsWith("database=")?trimedPart.Replace("DDD","newValue"):trimedPart
                select replacedPart;

        var newConStr = q.Aggregate((current, next) => current + "," + next); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-24T18:09:59.250

这些解决方案都很棒，但是一条长而令人困惑的线路不是有一定的优雅吗？

```
"user Id=abc, database=DDD, Password=mypasswd".Substring(0, "user Id=abc, database=DDD, Password=mypasswd".IndexOf("database=")) + "database=" + "[YOUR VALUE HERE]" + ", " + "user Id=abc, database=DDD, Password=mypasswd".Substring("user Id=abc, database=DDD, Password=mypasswd".IndexOf("Password=")) 
```

输出：`user Id=abc, database=[YOUR VALUE HERE], Password=mypasswd`

# java - 显示时区自定义 ID

> ID：16198807
> 
> 赞同：3
> 
> 时间：2013-04-24T17:46:18.797
> 
> 标签：java, timezone

我需要显示当前的时区自定义 ID（“GMT+X”格式，X 介于 1 和 23 之间）。我尝试以下说明但没有成功：

*   `TimeZone.getDefault().getID()`=> 结果：“欧洲/巴黎”
*   `TimeZone.getDefault().getDisplayName(true, TimeZone.SHORT)`=> 结果：“CEST”

我该怎么做（例如“GMT+2”）？

提前致谢~Mounir

# php - 每个设备提供不同的图像

> ID：16198813
> 
> 赞同：0
> 
> 时间：2013-04-24T17:46:30.563
> 
> 标签：php, iphone, html, ipad, twitter-bootstrap

我开始创建对移动设备友好的网站和应用程序。

我正在使用引导程序和 HTML5，所以我可以重新安排我的布局。

我的问题是，根据查看网站的设备调整图像大小的最佳方法是什么？

我应该制作多个版本的主要图像，例如网站徽标，即适用于 Iphone、Ipad 和台式电脑的版本吗？或者有一张高度和宽度发生变化的图像？

我目前有一个 PHP 类，它通过检查标头来检测用户正在使用的浏览器，例如 Ipad safari 浏览器在用户代理标头中有“ipad”。

我知道这不是 100% 可靠的并且可以被欺骗。我会说 95% 的时间它会是准确的，因为真正有兴趣使用您的网站的用户不会因为 lolz 而试图破坏它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:50:33.733

我可能只会使用宽度和高度的方法。我的大多数移动实现都非常关注图形，所以这不是问题。如果您还没有这样做，您还应该查看视口元标记。

[如何为 iPhone 设置正确处理旋转的视口元数据？](https://stackoverflow.com/questions/1230019/how-to-set-viewport-meta-for-iphone-that-handles-rotation-properly)

[使用 Viewport 创建适合移动设备的版本](https://stackoverflow.com/questions/6293511/using-viewport-to-create-a-mobile-friendly-version)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T20:53:33.460

如果您询问如何将不同尺寸的图像发送到不同的设备（基于窗口宽度）[自适应图像](http://adaptive-images.com)是一个不错的选择。它将测试访问者的视点，然后根据您指定的断点发送适当大小的图像。

祝你好运！

# java - 防止 AsyncTask 在 bindView 中多次运行

> ID：16198814
> 
> 赞同：0
> 
> 时间：2013-04-24T17:46:30.950
> 
> 标签：java, android, android-asynctask, android-cursoradapter

我有一个自定义`CursorAdapter`，它在其方法中使用多个`AsyncTask`s`bindView`将图像加载到网格中。

运行时`bindView`，我`AsyncTask`的 s 会多次启动。这会增加我的堆大小，并可能导致内存不足错误。

最好的方法是什么，让`AsyncTask`s 只运行一次？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:53:21.607

您可以缓存 Asynctask 的结果。您可能想研究一下 Github 上有一个非常有用的项目。[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T18:00:45.603

我认为您正在寻找[AsyncTaskLoader](http://developer.android.com/reference/android/content/AsyncTaskLoader.html)或其[支持包](http://developer.android.com/reference/android/support/v4/content/AsyncTaskLoader.html)实现。它为您处理一切。

如何使用它的一个例子：

```
public SampleLoader extends AsyncTaskLoader<List<SampleItem>> {

  // We hold a reference to the Loader’s data here.
  private List<SampleItem> mData;

  public SampleLoader(Context ctx) {
    // Loaders may be used across multiple Activitys (assuming they aren't
    // bound to the LoaderManager), so NEVER hold a reference to the context
    // directly. Doing so will cause you to leak an entire Activity's context.
    // The superclass constructor will store a reference to the Application
    // Context instead, and can be retrieved with a call to getContext().
    super(ctx);
  }

  /****************************************************/
  /** (1) A task that performs the asynchronous load **/
  /****************************************************/

  @Override
  public List<SampleItem> loadInBackground() {
    // This method is called on a background thread and should generate a
    // new set of data to be delivered back to the client.
    List<SampleItem> data = new ArrayList<SampleItem>();

    // TODO: Perform the query here and add the results to 'data'.

    return data;
  }

  /********************************************************/
  /** (2) Deliver the results to the registered listener **/
  /********************************************************/

  @Override
  public void deliverResult(List<SampleItem> data) {
    if (isReset()) {
      // The Loader has been reset; ignore the result and invalidate the data.
      releaseResources(data);
      return;
    }

    // Hold a reference to the old data so it doesn't get garbag ecollected.
    // We must protect it until the new data has been delivered.
    List<SampleItem> oldData = mData;
    mData = data;

    if (isStarted()) {
      // If the Loader is in a started state, deliver the results to the
      // client. The superclass method does this for us.
      super.deliverResult(data);
    }

    // Invalidate the old data as we don't need it any more.
    if (oldData != null && oldData != data) {
      releaseResources(oldData);
    }
  }

  /*********************************************************/
  /** (3) Implement the Loader’s state-dependent behavior **/
  /*********************************************************/

  @Override
  protected void onStartLoading() {
    if (mData != null) {
      // Deliver any previously loaded data immediately.
      deliverResult(mData);
    }

    // Begin monitoring the underlying data source.
    if (mObserver == null) {
      mObserver = new SampleObserver();
      // TODO: register the observer
    }

    if (takeContentChanged() || mData == null) {
      // When the observer detects a change, it should call onContentChanged()
      // on the Loader, which will cause the next call to takeContentChanged()
      // to return true. If this is ever the case (or if the current data is
      // null), we force a new load.
      forceLoad();
    }
  }

  @Override
  protected void onStopLoading() {
    // The Loader is in a stopped state, so we should attempt to cancel the
    // current load (if there is one).
    cancelLoad();

    // Note that we leave the observer as is. Loaders in a stopped state
    // should still monitor the data source for changes so that the Loader
    // will know to force a new load if it is ever started again.
  }

  @Override
  protected void onReset() {
    // Ensure the loader has been stopped.
    onStopLoading();

    // At this point we can release the resources associated with 'mData'.
    if (mData != null) {
      releaseResources(mData);
      mData = null;
    }

    // The Loader is being reset, so we should stop monitoring for changes.
    if (mObserver != null) {
      // TODO: unregister the observer
      mObserver = null;
    }
  }

  @Override
  public void onCanceled(List<SampleItem> data) {
    // Attempt to cancel the current asynchronous load.
    super.onCanceled(data);

    // The load has been canceled, so we should release the resources
    // associated with 'data'.
    releaseResources(data);
  }

  private void releaseResources(List<SampleItem> data) {
    // For a simple List, there is nothing to do. For something like a Cursor, we
    // would close it in this method. All resources associated with the Loader
    // should be released here.
  }

  /*********************************************************************/
  /** (4) Observer which receives notifications when the data changes **/
  /*********************************************************************/

  // NOTE: Implementing an observer is outside the scope of this post (this example
  // uses a made-up "SampleObserver" to illustrate when/where the observer should
  // be initialized).

  // The observer could be anything so long as it is able to detect content changes
  // and report them to the loader with a call to onContentChanged(). For example,
  // if you were writing a Loader which loads a list of all installed applications
  // on the device, the observer could be a BroadcastReceiver that listens for the
  // ACTION_PACKAGE_ADDED intent, and calls onContentChanged() on the particular
  // Loader whenever the receiver detects that a new application has been installed.
  // Please don’t hesitate to leave a comment if you still find this confusing! :)
  private SampleObserver mObserver;
} 
```

来源：[androiddesignpatterns.com - 实现加载器（第 3 部分）](http://www.androiddesignpatterns.com/2012/08/implementing-loaders.html)

# mysql - 在 phpmyadmin 中导入数据库时 出错

> ID：16198816
> 
> 赞同：0
> 
> 时间：2013-04-24T17:46:31.160
> 
> 标签：mysql, database, import, phpmyadmin, xampp

当我尝试导入我的数据库时，我收到了这个错误。我不知道我该怎么办，请帮忙。

--

## -- 数据库：`oddjobexchange`

--

## -------------------------------------------------- ---- --

-- TABLE 结构 FOR TABLE `admin`-- CREATE TABLE IF NOT EXISTS `admin`( `Email`varchar(30) NOT NULL, `Password`varchar(35) NOT NULL, PRIMARY KEY ( `Email`)) ENGINE = InnoDB DEFAULT CHARSET = latin1;

MySQL 说：文档

## #1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取正确的语法，以便在“表的表结构”附近使用`admin`

如果不存在则创建表`admin`（'Em' 在第 10 行

帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T17:47:25.953

前两个破折号后需要有一个空格。否则它不是一个有效的评论：

```
------------------------------------------------------ -- 
```

应该：

```
-- ---------------------------------------------------- -- 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T18:07:26.360

只需将以下内容添加到文件顶部。

创建数据库数据库名称；使用数据库名称；

# ios - isgl3d pod 文件未在 iPad 中显示

> ID：16198817
> 
> 赞同：0
> 
> 时间：2013-04-24T17:46:34.433
> 
> 标签：ios, ipad, isgl3d

我正在尝试使用 ISGL3D 框架将 POD 文件 3d 对象（从 Blender 导出）导入我的 ipad。我没有收到任何错误，但我的 ipad 只显示黑屏。我尝试逐行调试，似乎是相机问题。

这是我在 HelloWorldView 中的代码：

```
- (id) init {

if ((self = [super init])) {

    container = [[self.scene createNode] retain];

    // Import pod data
    _podImporter = [Isgl3dPODImporter podImporterWithFile:@"ee.pod"];
    Isgl3dLight * light  = [Isgl3dLight lightWithHexColor:@"000000" diffuseColor:@"FFFFFF" specularColor:@"FFFFFF" attenuation:0.001];
    light.position = iv3(0, 0, 2);
    light.renderLight = YES;
    [container addChild:light];
///Problem seems to start from below
    [self.camera removeFromParent];
    self.camera = [_podImporter cameraAtIndex:0];
    [self.scene addChild:self.camera];

    role01 = [_podImporter meshNodeWithName:@"Sphere"];
    [vound addChild:role01];

    [self schedule:@selector(tick:)];
}
return self;} 
```

我试图在没有 _podImporter 相机的情况下仅添加 3d 对象，但我得到异常，它无法找到我的 3d 对象。请帮忙，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:59:10.363

我花了一段时间才发现问题：

我错过了这段代码：

```
[_podImporter buildSceneObjects]; 
```

所以让 podImporter 工作的正确代码是

```
- (id) init {

if ((self = [super init])) {

container = [[self.scene createNode] retain];

// Import pod data
_podImporter = [Isgl3dPODImporter podImporterWithFile:@"ee.pod"];

[_podImporter buildSceneObjects];///<--- Put it here or anywhere before the camera code

Isgl3dLight * light  = [Isgl3dLight lightWithHexColor:@"000000" diffuseColor:@"FFFFFF" specularColor:@"FFFFFF" attenuation:0.001];
light.position = iv3(0, 0, 2);
light.renderLight = YES;
[container addChild:light];
[self.camera removeFromParent];
self.camera = [_podImporter cameraAtIndex:0];
[self.scene addChild:self.camera];

role01 = [_podImporter meshNodeWithName:@"Sphere"];
[vound addChild:role01];

[self schedule:@selector(tick:)]; 
```

} 返回自我；}

# c# - 需要从 C# 中的 ArrayList 中删除值

> ID：16198819
> 
> 赞同：1
> 
> 时间：2013-04-24T17:46:37.350
> 
> 标签：c#, arraylist

所以我被要求删除以字母 G、GE、G= 或 Z**结尾**的旅游代码。唯一不好的是我相信我们将这个调用用于很多页面，这就是我无法更改数据库的原因首先打电话，所以我想专门为这个人做这个。我的代码正在调用一个数组列表，其中填充了我们拥有的所有旅游代码。有什么办法可以删除带有上述字母的旅行。这是我要处理的。

```
public void LoadTourCodes()
{
    ddlTourCode.Items.Clear();

    if (ddlTourCode.Visible)
    {
        ddlTourCode.Items.Add(new ListItem(" ", ""));

        ArrayList tourCodes;
        tourCodes = EblTipTours.FindTourCodes();

        foreach (string tourCode in tourCodes)
        {                   
            ddlTourCode.Items.Add(tourCode);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T17:49:32.210

您可以使用 LINQ 来完成，如下所示：

```
var toRemove = new []{"G", "GE", "G=", "Z"};
foreach (string tourCode in tourCodes.Where(code => !toRemove.Any(suffix => code.EndsWith(suffix)))) {
    ddlTourCode.Items.Add(tourCode);
} 
```

如果你不能使用 LINQ，因为它是一个遗留系统，你可以像这样重写代码：

```
string[] toRemove = new string[] {"G", "GE", "G=", "Z"};
foreach (string tourCode in tourCodes) {
    bool good = true;
    foreach (string suffix in toRemove) {
        if (tourCode.EndsWith(suffix)) {
            good = false;
            break;
        }
    }
    if (!good) continue;
    ddlTourCode.Items.Add(tourCode);
} 
```

# algorithm - 小网格中节点的最佳布局，其中节点输出是其相邻节点的函数

> ID：16198820
> 
> 赞同：2
> 
> 时间：2013-04-24T17:46:37.420
> 
> 标签：algorithm, graph-theory, graph-algorithm, mathematical-optimization

**通用目标**

假设我们有一个“小”10x10 网格，其中一些固定节点 @ 放置在随机位置

```
. . . . . . . . . . 
. . . . . . . . . . 
. . . @ . . . . . . 
. . . @ . . . . . . 
. . . . . . . . . . 
. . . . . @ . . . . 
. . . . . . . . . . 
. . . . . . . @ . . 
. . . . . . . . . . 
. . . . . . . . . . 
```

假设我们有大约 30 个节点，其值是它相邻的节点的函数（邻接被定义为围绕一个点的 8 个点中的任何一个）。也就是说，如果我们考虑放置在地图上的节点 A 和 B

```
. . . . . . . . . .     . . . . . . . . . . 
. . . . . . . . . .     . . . . . . . . . . 
. . A @ . . B . . .     . . A @ . . . . . . 
. . . @ . . . . . .     . B . @ . . . . . . 
. . . . . . . . . .     . . . . . . . . . . 
. . . . . @ . . . .     . . . . . @ . . . . 
. . . . . . . . . .     . . . . . . . . . . 
. . . . . . . @ . .     . . . . . . . @ . . 
. . . . . . . . . .     . . . . . . . . . . 
. . . . . . . . . .     . . . . . . . . . . 
```

在这两个映射中 A 和 B 的输出可能不同，因为 A 和 B 在第二个映射中相邻但在第一个映射中不相邻。

我们的目标是将所有节点放置在地图上，以使所有节点的总和最大（或至少相当不错）。

**针对我的特定问题的其他限制**

1.  大约有 8 个“类”节点。每个类中的所有节点的行为都相同，因此可以用来减少搜索空间。
2.  某些节点在整体价值中占主导地位，因此知道这一点可以让我围绕这些核心节点进行优化。
3.  每个节点通常只有两个或三个其他类的节点，当它与这些类的节点相邻时会增加它的值。
4.  所有值均≥ 0。
5.  我想在几秒钟内找到合适的拟合......所以有一些计算空间，但 5 秒内的一个很好的解决方案比 2 天内的完美解决方案要好。

**天真的贪婪方法**

我现在正在做的是采用简单的贪婪方法，然后微调结果。

我查看网格上的所有位置并考虑所有尚未放置的节点，然后选择我找到的最佳位置。如果有多个“最佳”位置，我会随机选择一个。我这样做，直到所有节点都已放置。

在这个初始过程之后，我会随机选择一个节点，并通过查看所有开放点来尝试为它找到一个更好的位置。我考虑移动节点对节点本身以及它的相邻邻居的影响，所以如果它已经在整体上处于最佳位置，我不会移动它。我这样做几千次以“微调”我的布局。

由于随机因素，给定相同的输入，我可以获得非常不同的输出，因此我多次执行此过程并获得最佳结果。

**问题**

我怎样才能比这种天真的贪婪方法做得更好？

我觉得应该有一个更好的解决方案来考虑先验邻接信息，但它让我望而却步。任何想法、链接或提示将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T14:56:35.030

我最近研究了一种类似的算法。

**想法：**

我们想限制我们的选项以获得计算时间（这是我的问题，因为我已经在 3D 中完成了它）

在您的情况下，您希望将节点放置在已放置的节点旁边似乎是合乎逻辑的。让我们标记 p 的可能性。

```
. p . . . . .
p @ p p . . .
. p p @ p . .
. p @ p . . .
. p p . . . .
p @ @ p . p .
p p p . p @ p 
```

**初始化**：

让我们称“Cluster”为一个包含可能位置的数组。这是所有 p 的数组

对于您需要放置的每个节点，您可以在这些 p 中找到最佳选项；因此，对于每个新节点，您都会得到类似 Node::(place & value)

**迭代：**

您放置最好的节点，这将删除集群中的 1 种可能性并添加一些（取决于已经周围的节点）

现在您要更新每个节点的最佳位置和价值。但是您可以在少数修改的节点上工作，因为已经计算了所有其他可能性：

```
. p . . . . .  A : recently placed
p @ p p . . .  C : new possibilities / possible changes
. p p @ p . .
. p @ p . . .
. C A C . . .
p @ @ p . p .
p p p . p @ p 
```

例如，这里对于每个剩下的节点只需要 2 次计算。如果新值更大 => 更改（值和位置）

迭代。

**错误的可能性：**

我不知道这是否能完美地解决您的问题，因为我无法知道是否需要先放置“更大”的值，但我想是的。

如果您的值与周围毛孔的数量呈线性或几乎呈线性关系，则此解决方案将不是完美的解决方案，但应该是正确的解决方案。

我找不到用英语说的方法，但在法语中，我称这种算法为“Algorithme de progress de front”，类似于“Front-Progress Algorithm”。也许你能找到一些基于此的东西，但我在快速搜索后没有找到。

我希望它对你有所帮助。

# ruby-on-rails - 如何模拟非 DB 模型并让它在调用时返回给定列表

> ID：16198827
> 
> 赞同：0
> 
> 时间：2013-04-24T17:46:52.627
> 
> 标签：ruby-on-rails, rspec, mocking

我有一个`CommentList`带有静态方法的类`fetch`。问题是，它不是一个 ActiveRecord 模型，但它通过 http 调用来获取数据。

```
class CommentList
  def self.fetch
    # http-foo here
    return ['some', 'data']
  end
end 
```

现在我想要另一个模型使用这个 fetch 方法并模拟该`CommentList#fetch`方法以在我的规范中返回给定的数据集。

我只能找到与 DB 一起玩的嘲弄宝石。

我完全忽略了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:57:33.597

如果您使用的是 rspec，应该很容易做到这一点：

```
CommentList.stub(:fetch => ['some', 'data']) 
```

或者让它更像是一种期望：

```
CommentList.should_receive(:fetch).and_return(['some', 'data']) 
```

另一个更复杂的解决方案是设置 VCR。基本上它在这种情况下所做的是第一次运行测试时，CommentList 会真正命中外部 http 服务并取回数据。VCR 然后保存该响应，从那时起，它返回缓存的响应。

好消息是，如果您想重新测试外部 API 调用（也许他们的 API 已更改？），您只需删除 VCR 保存的数据，运行测试，您的测试将再次针对外部服务运行并缓存新数据。

# python - Python text formatting

> ID：16198839
> 
> 赞同：-4
> 
> 时间：2013-04-24T17:47:37.100
> 
> 标签：python, string-formatting

Need some help with Python string formatting
I have two code:

```
a = "Hello"
b = False
p = "Python rocks"
q = True 
```

I want to print a,b,p & q like this:

```
Hello ................................. False
Python rocks .......................... True 
```

The total length of each line (From Hello to False) is fixed say 70 chars.

(edit) Following was being tried. Clearly not a good way (and incorrect), hence the question

```
arr = [ ["Hello", False], ["Python rocks", True]]
totallen = 70

for e in arr:
    result = "{0}".format(e[1])
    dottedlen = totallen - len(e[0]) - len(result) - 2
    dottedstr = "." * dottedlen
    str = "".join([e[0], " ", dottedstr, " ", result])
    print str 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:53:51.810

使用[字符串格式](http://docs.python.org/2/library/string.html#formatspec)：

```
In [48]: def solve(a,b):
    a,b=str(a),str(b)
    spaces=len(a.split())-1
    return "{0} {1} {2}".format(a,"."*(68-len(a)-len(b)-spaces),b)
   ....: 

In [49]: print solve(a,b);print solve(p,q)
Hello .......................................................... False
Python rocks ................................................... True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T17:53:19.597

只需创建一个函数来添加句点直到您的固定数量的字符：

```
def formatter(my_string,length,my_boolean):
    my_string += " " + "." * (length - len(my_string))
    print my_string, my_boolean
formatter(a,70,b)
formatter(p,70,q) 
```

注意：使用 print 而不是 return 的原因是，当您返回然后打印它时，使用此方法会打印以下内容：

```
('Hello .................................................................', False)
('Python rocks ..........................................................', False) 
```

但没有返回，直接从函数中打印它会给你你想要的：

```
Hello ................................................................. False
Python rocks .......................................................... False 
```

# android - Android, start a new activity and pass it a variable

> ID：16198840
> 
> 赞同：1
> 
> 时间：2013-04-24T17:47:37.927
> 
> 标签：android, variables, android-activity

I want to start a new activity with a variable passed in it.

Code so far:

```
if(mostLikelyThingHeard.toUpperCase().equals("PLAY ONE"))
{
    startActivity(new Intent("com.shaz.new"));
    //I want to send an int value `1` to the new activity.
} 
```

Can this be done?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T17:49:22.543

利用`putExtra(key, value)`

这样做

```
 if(mostLikelyThingHeard.toUpperCase().equals("PLAY ONE"))
    {
    Intent i=new Intent("com.shaz.new");
     i.putExtra("key","value")
    startActivity(i);
    } 
```

**取回：**

`int value =getIntent().getIntExtra("key", 0);`0 是默认值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T18:48:14.833

假设有两个类，一类是 A，另一类是 B。您想将一些数据从 A 传递到 B。

**从 A 类：**

```
Intent result = new Intent(A.this,B.class);

result.putExtra("videoId", videoId);

result.putExtra("title",titleEdit.getText().toString());

result.putExtra("des", descriptionEdit.getText().toString());

result.putExtra("gps", passingGPS);

startActivity(result); 
```

通过上面的代码，您已经从 A 开始 B 活动并传递了一些数据。当 B 活动开始时，您必须获取在从 A 类调用 B 类时传递的那些数据。您必须按照这种方式获取您通过的 A 类的值。

**B类：**

```
VideoID = getIntent().getExtras().getString("videoId");

GPS = getIntent().getExtras().getString("gps");

Description = getIntent().getExtras().getString("des");

Title = getIntent().getExtras().getString("title"); 
```

现在您将能够在 B 类中使用这些值。

希望这将帮助您“通过传递一些数据开始新活动”。

# java - Battleship runtime error during Moves between user and computer

> ID：16198845
> 
> 赞同：0
> 
> 时间：2013-04-24T17:47:57.707
> 
> 标签：java, runtime-error

i am having a problem on my Battleship project. The problem is at Move checking and making.

When i click at enemy board and computer's turn comes I get null pointer exception at hit = inShips[i].checkMove(x, y); at checkMove method.

Here is the full project: [http://db.tt/V6YiTJVw](http://db.tt/V6YiTJVw) (You need to change image paths at selectionPanel and selectionFrame classes)

Thanks for your help

```
 public void checkMove(JButton[][] inBoard, Ship[] inShips, int x, int y) {
        boolean hit = false;
       // Ship[] inShips = new Ship[5];
        int i = -1;
        System.out.println("CHECKING MOVE AT CLASS PLAYBOARD (checkMove): ");
        System.out.println("xCoord " + x);
        System.out.println("yCoord " + y);
        System.out.println("");
    //    do {
            i++;
            System.out.println("INSHIPS: ");
            System.out.println("!!!!!!!!!!!!!!!! " + i);
            hit = inShips[i].checkMove(x, y);
            System.out.println("IS HIT? : " + String.valueOf(hit));
     //   } while ((i < 4) && (!hit)); 
```

**checkMove at ship class:**

```
 public boolean checkMove(int x, int y)
  { 
    for (int i = 0; i < this.size; i++)
    {
      if ((this.shipCoords[i][0] == x) && (this.shipCoords[i][1] == y))
      {
        this.piecesHit += 1;
        this.lastPieceHit[0] = x;
        this.lastPieceHit[1] = y;

        if (this.piecesHit == this.size)
          this.sunk = true;
        return true;
      }
    }

    return false;
  }

public void getMove(int x, int y) {
    if(this.computer == null) 
    checkMove(this.myBoard, this.myShips, x, y);
    else
    checkMove(this.myBoard, this.myShips, x, y);

    if (this.myTurn == -1) 
        return;

    this.myTurn = 1;
    this.status.setText("Status: Waiting for your move.");

}

public void getMove(int x, int y) {
        System.out.println("GETTING MOVE FROM COMPUTER CLASS: ");
        System.out.println("%%%%%%%%%%%%COMPUTER CLASS X COORD FIRST COMES: " + x);
        System.out.println("%%%%%%%%%%%%COMPUTER CLASS Y COORD FIRST COMES: " + y);
        this.computerGameBoard.getMove(x, y); //Gets move from the player from PlayBoard class t through computerGameBoard variable.

        int XCoord = this.compMoves[this.numMove][0];
        int YCoord = this.compMoves[this.numMove][2];
         System.out.println("!@#*(!@(#&*!@*&#!@*(#*(!@&*$^!@&$^#!@&*(#@!#!@");
           for(int[] zz : compMoves) {
                System.out.println("");

                System.out.println(Arrays.toString(zz));
            }
        System.out.println("XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXCOORD: " + XCoord);
        System.out.println("YYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYCOORD: " + YCoord);
        this.playerGameBoard.getMove(XCoord, YCoord);
        this.computerGameBoard.makeMove(XCoord, YCoord);
        this.numMove = numMove + 1;
    }

 public void makeMove(int x, int y)
  {
      System.out.println("MAKING MOVE WITH COORDS:   X " + x + "  Y " +y );
    checkMove(this.opponentBoard, this.opponentShips, x, y);
    if (this.myTurn == -1)
      return;
    this.myTurn = 0;
    this.status.setText("Status: Waiting for opponent move");

    if (this.computer != null)
      this.computer.getMove(x, y);
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:25:22.787

您的问题是我在其他人第一次使用对象数组时看到的常见问题。创建对象数组时，会创建数组，但数组的各个元素是`null`，即它们不引用对象。创建数组后，您需要创建真实对象：

```
Ship inShips[] = new Ship[5];
for(int i = 0; i < inShips.length; ++i)
    inShips[i] = new Ship(); 
```

当您在对象上调用方法时，引用后面需要有一个真实的对象。如果引用是`null`，则它不引用对象。由于您在引用上调用方法`null`，因此您的程序崩溃并且您得到一个`NullPointerException`.

# objective-c - Reaching items in JSON.

> ID：16198846
> 
> 赞同：0
> 
> 时间：2013-04-24T17:48:03.227
> 
> 标签：objective-c, json

I have problem reaching the title and description string in my JSON. I can reach the tab name and the category name, but I don't know how to reach the item description and title.

Here's my JSON:

```
{
    "tab1": 
    [
        {
            "category1Tab1":
            [
                {   
                    "title":"film1", 
                    "description": "desc1"
                },
                { 
                    "title": "film2",
                    "description": "desc2"
                }
            ],
             "category2Tab1":
             [
                  {
                      "title": "tv",
                      "description": "desc1"
                  },
                  {
                      "title": "tv2",
                      "description": "desc2"
                  }
              ]
        }
    ],
    "tab2": 
    [
        {
            "category1Tab2":
            [ 
                {   
                    "title":"item1", 
                    "description": "desc1"
                },
                { 
                    "title": "item2",
                    "description": "desc2"
                 }
            ]
        }
    ]

} 
```

Here's my code for parsing:

```
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"test" ofType:@"json"];
NSString *contents = [NSString stringWithContentsOfFile: filePath  encoding: NSUTF8StringEncoding error: nil];
SBJsonParser *jsonParser = [[SBJsonParser alloc] init];

NSMutableDictionary *json = [jsonParser objectWithString: contents];
jsonParser = nil;

for (NSString *tab in json)
{
    Tab *tabObj = [[Tab alloc] init];
    tabObj.title = tab;

    NSDictionary *categoryDict = [[json valueForKey: tabObj.title] objectAtIndex: 0];
    for (NSString *key in categoryDict)
    {

        Category *catObj = [[Category alloc] init];
        catObj.name = key;

        //Code for the items

    }

} 
```

How can I reach each title and description and push them into my Category model object array called items?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:00:51.367

```
for (NSString *key in categoryDict)
{

    Category *catObj = [[Category alloc] init];
    catObj.name = key;

    NSArray *items = [categoryDict objectForKey:key];
    // you should add error checking to make sure this is actually an NSArray

    for (NSDictionary *dict in items) {
        NSString *theTitle = [dict objectForKey:@"title"];
        NSString *theDescription = [dict objectForKey:@"description"];

        // do something with theTitle and theDescription
    }

} 
```

# objective-c - 写入 Protobuf CodedOutputStream

> ID：16198859
> 
> 赞同：0
> 
> 时间：2013-04-24T17:48:56.933
> 
> 标签：objective-c, protocol-buffers

我在使用 Protobuf 的 Objective-C 端口写入 CodedOutput 流时遇到问题：

```
 POPMessage_Builder* builder = [[POPMessage_Builder alloc] init];
    [builder setPayload:@"Hello, world!"];
    POPMessage* message = [builder build];

    NSOutputStream* rawOutput = [NSOutputStream outputStreamToMemory];

    PBCodedOutputStream* os = [PBCodedOutputStream streamWithOutputStream:rawOutput];
    [message writeToCodedOutputStream:os];
    [os flush];

    NSData* data = [rawOutput propertyForKey:NSStreamDataWrittenToMemoryStreamKey];

    NSLog(@"%@", data); 
```

最后数据始终为空。我已经尝试向它写入各种东西，但似乎 PBCodedOutputStream 似乎从未写入 nsoutputstream。

有没有人有这方面的经验？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T02:13:32.160

我只花了几个小时调试这个确切的问题。

```
[rawOutput open]; 
```

来自 Apple Notes：必须先打开流，然后才能使用它。

PS - 他们对设计一个必须在使用前打开的内存流非常有帮助。当您尝试写入未打开的流时，streamError 属性为 null。

# c# - 在 Windows Phone 8 上拍摄纵向视频

> ID：16198863
> 
> 赞同：2
> 
> 时间：2013-04-24T17:49:10.870
> 
> 标签：c#, windows-phone-8

我正在构建一个具有固定纵向方向的应用程序，我需要在应用程序中实现视频捕获功能。

我知道没有与[此处](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh394006%28v=vs.105%29.aspx)解释的照片捕获任务类似的视频捕获任务（如果有，请告知！），所以我决定制作自己的页面。我[将此示例代码](http://code.msdn.microsoft.com/wpapps/Video-Recorder-Sample-5e800bbf)用作指南，并且能够捕获视频。然而，唯一的问题是生成的视频总是横向的。我在捕获设备类上看不到任何方法或属性来改变方向。我尝试在 VideoCaptureDevice 实例上更改“DesiredFormat”，但它会引发 ArgumentException。

如果这甚至是一种方法，我尝试设置 DesiredFormat 的代码。

```
videoCaptureDevice.DesiredFormat = new VideoFormat(PixelFormatType.Format32bppArgb, 480, 720, 30); 
```

这一行给了我 ArgumentException。

我确实在 viewFinderBrush 上应用了旋转变换，因此当用户录制时，视频的方向正确。然而，结果总是风景。

我想要完成的事情是不可能的吗？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T17:53:27.530

您无法使用 DesiredFormat 更改方向，我不建议这样做，因为分辨率特定于各个设备，因为相机不同，而且并非所有设备都支持 720p 视频。

问题是，任何 Windows Phone 上的摄像头**始终**处于横向模式。因此，为了使其看起来正确，您需要将后置摄像头分别旋转 90 度，将前置摄像头旋转 270 度。

使用前置摄像头时，您还需要在 y 轴上镜像摄像头。

# perl - Where should Perl script point to when put on web server?

> ID：16198864
> 
> 赞同：0
> 
> 时间：2013-04-24T17:49:12.667
> 
> 标签：perl, hosting

I need to perform a scheduled backup of my MySQL database.

My web hosting service can run PHP and Perl scripts at chosen hours, so I've decided I would make a Perl script that would call `mysqldump`.

But in the first line of the Perl script I should put the location of the perl interpreter like `#!/usr/bin/perl` in Linux.

I didn't find the `perl` file in my `/` directory (I have `cgi-bin` directory).

What should I put in this path?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T17:54:57.197

不`#!/usr/bin/perl`适合你吗？您确实需要询问您的服务提供商他们在哪里安装了 perl。但是，您将通过使用获得可移植性

```
#!/usr/bin/env perl 
```

相反，它将搜索目录`PATH`以确定 perl 在每个平台上的安装位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T20:09:42.290

`whereis`此外，您可以使用命令找到路径：

```
whereis perl 
```

`/usr/bin/perl`如果安装不是自定义的，这通常会产生路径。

```
#!/usr/bin/perl 
```

是**shebang**线。[在这里](http://en.wikipedia.org/wiki/Shebang_%28Unix%29)查看更多。

# php - Add complete HTML starting from Doctype to iframe with jQuery

> ID：16198869
> 
> 赞同：1
> 
> 时间：2013-04-24T17:49:31.167
> 
> 标签：php, jquery, html, iframe

So what I'm doing is, with a super simple PHP proxy that only uses `file_get_contents` I fetch an HTML and convert it to htmlentities in UTF-8 format. After that with jQuery which is doing the AJAX call I want to get the whole HTML which includes the tags, `<html><head><body>code..</body></head></html>` into an iframe so then I can traverse it with jQuery in search of inputs. Is there a way to do this? If it can be done some other way that is welcomed too, I'm just doing iframe because I thought that it was the best option. Since it's a complete HTML doc with doctype and everything I think I can't just append it to a div and then traverse it. My jQuery code is as follows:

```
$(document).ready(function(){

var globalCount = 0;

function countInputs(data, url){
    var unparsedHTML = data.html; // get data from json object which is in htmlentities
    var iframeCreate = $('<iframe id="iframe"></iframe>');
    var iframe = $('#iframe');
    if(iframe.length){
        iframe.remove(); // if iframe exists remove it to clean it
        iframeCreate.insertAfter($('#result'));   //create iframe     
    }else{
        iframeCreate.insertAfter($('#result'));   //create iframe     
    }
    iframe.html(unparsedHTML).text(); // insert html in iframe using html(text).text() to decode htmlentities as seen in some stackoverflow examples
    var inputs = iframe.contents().find('input'); //find inputs on iframe
    var count = inputs.length;
    var output = '';
    globalCount = globalCount + count;
    output = "Count for url: " + url + " is: " + count + " , the global count is: " + globalCount;
    console.log(output);
    $('#result').append(output);
}

/*SNIP ----- SNIP */

function getPage(urls){ 
    console.log("getPage");
    for(i = 0; i < urls.length; i++){
        var u = urls[i];    
        console.log("new request: " + urls[i]);
        var xhr = $.ajax(
        {
            url: "xDomain.php",
            type: "GET",
            dataType: "json",
            data: {
                "url":u
            }
        })

        xhr.done(function(data){
            console.log("Done, starting next function");
            countInputs(data, u)
            });
        xhr.fail(function (jqXHR, textStatus, errorThrown) {
            if (typeof console == 'object' && typeof console.log == 'function') {
                console.log(jqXHR);
                console.log(textStatus);
                console.log(errorThrown);
            }
        });

    }
}

/*SNIP------------SNIP*/

}); 
```

The problem is that nothing is ever loaded into the iframe, no error is thrown and the request is successful bringing the HTML in the response. For example if I give the URL [http://google.com](http://google.com) to the script it should give a count of N inputs back. Since if you go to Google and type in the URL `javascript: alert(document.getElementsByTagName('input').length)` will alert N number of inputs since there's N inputs. I hope that with the example provided everything is clearer.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T18:02:07.223

您需要使用`contentDocument`iframe 的属性将内容放入其中。

另外：您需要将 iframeCreate 附加到文档的某处，否则“#iframe”不会返回任何内容。

[http://www.w3schools.com/jsref/prop_frame_contentdocument.asp](http://www.w3schools.com/jsref/prop_frame_contentdocument.asp)

[这个答案](https://stackoverflow.com/questions/14186070/javascript-create-an-iframe-with-strict-doctype)让您知道将所有内容放入 iframe 的 contentDocument

例子：

```
var iframe =  $('#iframe');
var idoc = iframe[0].contentDocument;
idoc.open();
idoc.write(mytext);
idoc.close(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T17:59:25.673

在客户端做服务器工作？恕我直言，这不是最聪明的主意。我认为你这样做的原因是因为你想用 jquery 操作 dom（也许 simplexml 似乎对你没有吸引力？）。在这种情况下，我建议查看[http://querypath.org/](http://querypath.org/)。它是服务器的 jquery。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T20:18:30.067

我注意到，如果您将 HTML 放入`iframe`中，它将被编码。如果 iframe 包含立即下降的输入，则调用`$("iframe input").length`将返回 0。

如果您使用 a`div`代替，则不会对 HTML 进行编码，从而允许您计算元素的数量：

```
$(document).ready(function() {

    //works :)
    console.log("inputs in div: " + $("div input").length);

    //returns 0
    console.log("inputs in iframe: " + $("iframe input").length);
}); 
```

[在 jsFiddle 上运行它](http://jsfiddle.net/jamesseanwright/UQqQB/ "jsFiddle")。

除此之外，我没有看到任何问题，尽管如果您可以克服跨域限制，我也会在客户端获取 HTML（到目前为止，我想不出您会如何做到这一点）。

# c# - request.ContentType = "application/json" 在 WCF 方法上给出错误的请求错误

> ID：16198871
> 
> 赞同：0
> 
> 时间：2013-04-24T17:49:36.183
> 
> 标签：c#, asp.net, wcf, rest

我使用[WCF REST 服务模板 40(CS)](http://visualstudiogallery.msdn.microsoft.com/fbc7e5c1-a0d2-41bd-9d7b-e54c845394cd)创建了一个 WCF 服务 ，方法头如下所示：

```
[WebInvoke(UriTemplate = "CTNotification", Method = "POST", ResponseFormat = WebMessageFormat.Json,
          RequestFormat = WebMessageFormat.Json)]      

public string CTNotification(Stream contents) 
```

这是我使用它的方式：

```
 string url = ConfigurationManager.AppSettings["serviceUrl"];                  
 string requestUrl = string.Format("{0}CTNotification", url);

 HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(requestUrl);
 request.Method = "POST";
 request.ContentType = "application/json";
 //request.ContentType = "text/plain"; 
 request.Timeout = 5000000;                

 byte[] fileToSend = File.ReadAllBytes(Server.MapPath("~/json.txt"));
 request.ContentLength = fileToSend.Length;

 using (Stream requestStream = request.GetRequestStream())
 {
     // Send the file as body request.
     requestStream.Write(fileToSend, 0, fileToSend.Length);
     requestStream.Close();
 }

 using (HttpWebResponse response = (HttpWebResponse)request.GetResponse())
     Console.WriteLine("HTTP/{0} {1} {2}", response.ProtocolVersion, (int)response.StatusCode, response.StatusDescription);

 Label1.Text = "file uploaded successfully"; 
```

它给出错误 400。但如果它使内容类型简单，它可以工作，但我想传递存储在 json.txt 中的 json。请建议我怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:11:20.137

您的服务出现 400 错误，因为您传递给服务的数据不是 JSON 格式。你已经用它修饰了你的操作合约，`RequestFormat = WebMessageFormat.Json`所以它只接受 JSON 格式的数据。

您正在使用数据向服务发出请求`Stream`，其 MIME 类型为`"text/plain" and "application/octet-stream"`. 要将 JSON 发送到存储在文件中的服务，您需要在服务和客户端中进行以下更改：

服务：

```
[WebInvoke(UriTemplate = "CTNotification", Method = "POST", ResponseFormat =WebMessageFormat.Json, RequestFormat = WebMessageFormat.Json)]

public string CTNotification(string contents) 
```

客户：

```
string fileToSend = File.ReadAllText(Server.MapPath("~/json.txt")); 
```

希望这可以帮助你。

# java - 将 ArrayList 的每个元素添加到另一个 ArrayList 的每个元素

> ID：16198874
> 
> 赞同：0
> 
> 时间：2013-04-24T17:49:51.217
> 
> 标签：java, arraylist

我有一个包含 N 个项目的 ArrayList。我想遍历 ArrayList，并将 ArrayList 中的每个项目添加到另一个 ArrayList 中的等效项目。我已经尝试过了，但它不起作用：

```
ArrayList<Integer> arrList1 = new ArrayList<Integer>();

for(String key: myMap.keyValues() {
    ArrayList<Integer> dynArrList = getArrayListFromSomewhereElse();

    for(Integer i : dynArrList) {
       arrList1.set(i, arrList1.get(i) + dynArrList.get(i)); // sum each item
    }
} 
```

我得到索引越界异常。我试图初始化 arrList1，但没有任何区别。我还尝试为其设置最小尺寸。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T18:27:22.793

您没有提供两个整数列表来相加。你有`dynArrList`一个加数，你有`arrList1`结果。但是你没有第二个加数，它应该告诉你你还没有真正理解你的问题。要么你的真正任务不是你想象的那样，要么你没有正确地确定你从哪里获取数据。

所以，假设你有两个`List<Integer>`s。尽可能对接口编程。您将如何逐项求和？编写一个 sum 方法，并识别如果两个列表的大小不同会发生什么。

```
public List<Integer> sum(List<Integer> left, List<Integer> right) {
    if (left.size() != right.size()) {
        // A runtime exception you write saying that you can't add two
        // arrays of different sizes.
        throw new VectorShapeException(left.size(), right.size());
    }
    List<Integer> vectorSum = new ArrayList<>();
    for (int i = 0; i < left.size(); ++i) {
        vectorSum.add(left.get(i) + right.get(i));
    }
    return vectorSum;
} 
```

确定您要添加的内容，然后使用它。

现在，假设您有计算两个整数数组列表的点积的任务。您可能需要两件事——一种对一个列表的元素求和的方法，以及一种获取产品向量的方法。这可能很浪费，因为您可能不需要中间列表，而且您会浪费空间。第一个任务很简单：

```
public int sum(List<Integer> list) {
    int total = 0;
    for(Integer element: list) {
        total += element;
    }
   return total;
} 
```

第二个很容易；只需复制并重命名即可：

```
public List<Integer> product(List<Integer> left, List<Integer> right) {
    if (left.size() != right.size()) {
        // A runtime exception you write saying that you can't multiply two
        // arrays of different sizes.
        throw new VectorShapeException(left.size(), right.size());
    }
    List<Integer> vectorProd = new ArrayList<>();
    for (int i = 0; i < left.size(); ++i) {
        vectorProd.add(left.get(i) * right.get(i));
    }
    return vectorProd;
}

public int dotProduct(List<Integer> left, List<Integer> right) {
    return sum(product(left, right));
} 
```

但是这里有一个乏味的问题。剪切、粘贴和修改是我没有真正思考的标志。2 参数 sum 和 product 方法之间唯一真正的区别是运算符和名称。这导致了函数式编程，现在这可能太多了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T17:53:48.097

索引越界异常来自您的循环：

```
for(Integer i : dynArrList) {
    arrList1.set(i, arrList1.get(i) + dynArrList.get(i));
} 
```

在这种情况下`i`，不是列表中的索引。无法保证您的任何列表都包含`i`元素。您可能需要一个标准`for`循环：

```
for(int i = 0; i < dynArrList.size(); i++) {
    arrList1.set(i, arrList1.get(i) + dynArrList.get(i));
} 
```

此外，如果您要计算任何类型的总和，您需要确保两个列表具有相同数量的元素，或者您只计算两个列表中较短者的长度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T18:37:25.367

如果 arrList1 上面没有任何内容，如何将元素设置为 arrList1.get(i) + dynArrList.get(i)？必须缺少设置 arrList1 值的步骤。如示例中所述，使用 .add 代替 .set 作为可增长列表。

```
ArrayList<Integer> arrList1 = new ArrayList<Integer>();//has no values and no size

ArrayList<Integer> dynArrList = getArrayListFromSomewhereElse();

for(Integer i : dynArrList) {
   arrList1.add(i); // sum each item
} 
```

或使用中间 ArrayList 来执行合并/最终列表。

```
ArrayList<Integer> arrList1 = getArrayFromALocation();//may have values and size
ArrayList<Integer> dynArrList = getArrayListFromSomewhereElse();
ArrayList<Integer> mergedList1 = new ArrayList<Integer>();

for(int i =0; i<  dynArrList.size(); i++) {//assuming larger
if ( i < arrList1 .size() )
   mergedList1.add(new Integer(dynArrList.get(i).intValue()+(arrList1 .get(i).intValue())); // sum each item
else
    mergedList1.add(new Integer(dynArrList.get(i).intValue()+0));
}
}
return mergedList1; 
```

# javascript - 使用 grunt-crx 任务时出错

> ID：16198876
> 
> 赞同：0
> 
> 时间：2013-04-24T17:49:52.673
> 
> 标签：javascript, google-chrome-extension, gruntjs

我在我的 Gruntfile 中使用 grunt-crx 任务，如下所示：

```
crx: {
            packExtension: {
                src: "../build/unpacked",
                dest: "../build/dist"
            }
        } 
```

运行 crx 任务（单独）时，我收到以下错误消息：

```
Warning: Object function lodash(value) {
    // exit early if already wrapped
    if (value && value.__wrapped__) {
      return value;
    }
    // allow invoking `lodash` without the `new` operator
    if (!(this instanceof lodash)) {
      return new lodash(value);
    }
    this.__wrapped__ = value;
  } has no method 'assign' Use --force to continue 
```

并且在命令行中使用带有 grunt 的“--force”来运行任务也会导致相同的错误。

我是 grunt 和 grunt-crx 的新手，所以我不确定这是一个 grunt 问题还是它特定于 grunt-crx 任务，但任何帮助使其工作将不胜感激！

作为说明，我已经尝试了以下事情，但没有任何运气。

1.  不使用相对路径
2.  指定除 src 和 dest 之外的 pem 文件
3.  将 ../build/unpacked 移动到 ./packed 以便所有内容都在同一个目录中（我不得不这样做或将 force 选项与其他 grunt 任务一起使用。）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T13:45:26.397

我有同样的问题，看起来作者在 0.2.1 版本中引入了一个在 0.2.0 中不存在的错误。卸载当前版本：

npm 卸载 grunt-crx --save-dev

然后安装以前的版本：

npm install grunt-crx@0.2.0 --save-dev

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-29T22:52:54.623

这确实与我测试扩展的 lodash 版本有关（它比引入的版本更早`assign`）。

该`0.2.2`版本解决了这个问题。

试试看！

# decorator - StructureMap EnrichWith 不指定具体类

> ID：16198878
> 
> 赞同：0
> 
> 时间：2013-04-24T17:49:53.877
> 
> 标签：decorator, structuremap

我有三个组件：

1.  接口
2.  实现
3.  授权

我的授权程序集包含不同接口和实现的装饰器。

我知道我可以在装饰中使用类似的东西：

```
For<ISomething>
.Use<ConcreteSomething>
.EnrichWith<ISomething>((ctx, r) => new ConcreteSomethingDecorator)); 
```

但在我的情况下，我的 Implementations 程序集中有一个注册表，而我的 Authorizations 程序集中有一个注册表。（我不希望我的 Authorization and Implementations 程序集知道另一个）。

我不希望我的 Authorizations 程序集引用 Implementations 程序集，所以我正在寻找类似的东西：

```
For<ISomething>
.EnrichWith<ISomething>((ctx, r) => new ConcreteSomethingDecorator)); 
```

在我的引导程序中，我想使用标志添加 AuthorizationRegistry 以在调试模式下跳过它。

我的问题（终于！）：是否可以在不指定具体类的情况下丰富接口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:37:22.400

我找到了做到这一点的方法！

只需使用 EnrichAllWith 而不是 EnrichWith！

# deployment - 使用 Windows Azure 的部署和回滚策略

> ID：16198879
> 
> 赞同：0
> 
> 时间：2013-04-24T17:50:02.547
> 
> 标签：deployment, azure

我希望 Microsoft Azure 在应用程序部署和回滚领域提供服务。

具体来说，我有兴趣使用 Azure 完成以下任务：

*   以零停机时间部署应用程序
*   在部署失败的情况下回滚应用程序

这些功能/服务是否已融入 Azure？

这样你就可以感受到我的痛苦……现在，我通过 Visual Studio 的部署策略是文件系统部署。我需要计划停机时间，而且大多数时候系统上仍有用户丢失数据（因此抱怨）并忽略警告。并且基于功能请求和部署的紧迫性，有时会潜入一个错误。用户发现了这一点，显然我们需要立即回滚（无意中需要另一个计划外的维护窗口）。

如果您使用 Azure 有过积极的“零停机部署”和“应用程序回滚”体验，请分享。

谢谢，迈克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T17:58:11.217

是的，这些功能已融入 Azure，特别是在部署到暂存和生产暂存 VIP 切换功能时。

为了实现零停机，您可以部署到暂存环境，进行测试直到您满意，然后 VIP 将暂存部署切换到生产环境。如果您离开并运行暂存部署，如果您在生产中遇到任何意外问题，您可以 VIP 将它们切换回来。

当然，这样做的负面影响是，只要您继续使用，暂存环境就会花费您的钱。您总是可以在一段时间内进行现场测试，当您确定没有任何阻碍时，只需关闭暂存环境，直到下一次部署。

[https://www.windowsazure.com/en-us/manage/services/cloud-services/how-to-manage-a-cloud-service/](https://www.windowsazure.com/en-us/manage/services/cloud-services/how-to-manage-a-cloud-service/)

# javascript - jquery自动刷新功能的问题

> ID：16198881
> 
> 赞同：0
> 
> 时间：2013-04-24T17:50:06.387
> 
> 标签：javascript, jquery, html

我希望你们中的一个人可能会就我在使用 jquery auto_refresh 函数时遇到的问题指出正确的方向 - 下面的代码 - > 嗯，它刷新了一切，但遗憾的是它看起来很难看。Oo 当刷新发生时，它会不成比例地闪烁。显然必须有一个更顺畅的方式来做到这一点......

* * *

```
<script>
var auto_refresh = setInterval(
function ()
{
$('#basic').load('resources_basic.php');
}, 1000);

$(function() {
$( "#draggable_res" ).draggable();
});
</script> 
```

* * *

```
<div id="draggable_res" class="ui-widget-content">
<h5> Resources </h5>
  <div id="Accordion1" class="Accordion" tabindex="0">
    <div class="AccordionPanel">
      <div class="AccordionPanelTab">Basic Resources</div>
      <div class="AccordionPanelContent">
         <div id="basic"><?php include 'resources_basic.php'; ?></div>
      </div>
    </div> 
```

* * *

```
<table width="160" border="2" cellspacing="2" cellpadding="2">
          <tr>
            <td width="30"><img src="images/product/gold.gif" width="30" height="30" alt="Gold" /></td>
            <td width="110"><?php echo $row_resourcesbasic_rs['gold']; ?></td>
          </tr>
          <tr>
            <td width="30"><img src="images/product/wood.gif" width="30" height="30" alt="Wood" /></td>
            <td width="110"><?php echo $row_resourcesbasic_rs['wood']; ?></td>
          </tr>
          <tr>
            <td width="30"><img src="images/product/clay.gif" width="30" height="30" alt="Clay" /></td>
            <td width="110"><?php echo $row_resourcesbasic_rs['clay']; ?></td>
          </tr>
          <tr>
            <td width="30"><img src="images/product/stone.gif" width="30" height="30" alt="Stone" /></td>
            <td width="110"><?php echo $row_resourcesbasic_rs['stone']; ?></td>
          </tr>
        </table> 
```

**提前致谢 ：）**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:52:33.990

有些褪色？*这将使您的刷新更顺畅*

```
$('#basic').fadeOut('fast');

$('#basic').load('resources_basic.php',function(){
   $('#basic').fadeIn('fast'); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T17:56:24.827

显然，您需要为要添加动态数据的容器设置初始大小。否则，它会在每次加载和闪烁时调整大小。初始大小最好通过 CSS 设置，例如

```
#basic {
width: 100px;
height:100px;
background-color: #cccccc;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T17:59:59.600

您可以链接淡入淡出功能以获得更平滑的过渡：

```
var auto_refresh = setInterval(function (){
     $('#basic').fadeOut(500).load('resources_basic.php').fadeIn('fast');
}, 1000); 
```

# scala - scala中的单位 - 无法理解

> ID：16198884
> 
> 赞同：6
> 
> 时间：2013-04-24T17:50:16.417
> 
> 标签：scala

我被这种语法所困扰：

```
def foreach(f: Tweet => Unit): Unit = {
    f(elem)
    left.foreach(f)
    right.foreach(f)
  } 
```

where`Tweet`是一个具有三个变量的类。函数返回是什么意思`Unit`？我尝试了不同的方法，但在这种情况下无法调用函数本身。

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T18:09:55.747

Scala 中的 Unit 与 Java 中的 void 相同，此外，Java 将 Scala 的 Unit 视为 void，反之亦然。所以在java中它可以写成：

```
void foreach(MethodThatReturnsVoid f) {
    f.apply(elem)
    left.foreach(f)
    right.foreach(f)
} 
```

它有点伪代码（因为 java 还不支持一流的函数），但我希望你已经明白了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-25T00:57:35.670

返回 Unit 意味着该函数不返回任何内容。换句话说，您调用该函数是因为它的副作用，而不是它为您计算的任何东西。

鉴于您的 foreach 示例，这里有一些可能有意义的功能。

```
// A Tweet class with 3 values (shorter declaration than vars).
case class Tweet( a: Int, b: String, c: String )

// Print out the contents of a Tweet.
def tweetFunc( t: Tweet ): Unit = {
  println( "I am a Tweet. %d %s %s".format( t.a, t.b, t.c ) )
}

// The data that is used by the foreach function.
val elem = Tweet( 1, "Hello", "World" )
val left = List( elem, Tweet( 2, "a", "b" ) )
val right = List( Tweet( 3, "c", "d" ) )

// Original foreach function.
def foreach(f: Tweet => Unit): Unit = {
  f(elem)
  left.foreach(f)
  right.foreach(f)
}

// Call the foreach function with tweetFunc as the parameter.
foreach( tweetFunc _ )

///// OUTPUT /////
I am a Tweet. 1 Hello World    // from f(elem)
I am a Tweet. 1 Hello World    // from left.foreach(f)
I am a Tweet. 2 a b            // from left.foreach(f)
I am a Tweet. 3 c d            // from right.foreach(f) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T18:32:07.063

这里提到了 Unit 的定义： [http ://www.scala-lang.org/api/current/index.html#scala.Unit](http://www.scala-lang.org/api/current/index.html#scala.Unit)

它与 java 中的 void 并不完全相同，因为它是子类型而不是保留字。这种设计更好，因为`void`现在像其他类型一样被视为头等类型。由于您的代码明确定义了所有类型，因此您可以看到 Unit 可以替换为另一种类型，并且语法仍然正确。或者，Unit 始终可以替换为 {} 或推断。在没有返回值的定义中，可以这样写。

```
def foreach(f: Tweet => Unit) { ... } 
```

# c++ - Toggling a bit in a bitmap of chars

> ID：16198886
> 
> 赞同：0
> 
> 时间：2013-04-24T17:50:23.250
> 
> 标签：c++, bitmap, bit-manipulation

Suppose I have a bitmap like this:

```
sizeofBitmapInBits = 16; // must be multiple of 8
char* bitmap = new char[sizeofBitmapInBits/8](); // 2 bytes 
```

And I want to toggle a single bit of this bitmap, let's say bit n° 11.

Is this correct?

```
int numBit = 11;
int posBitmap = floor(numBit / 8); // this gives me the byte in the bitmap
char ch = bitmap[posBitmap];

int positionInByte = numBit - posBitmap * 8 ; // this gives me the bit in the byte
ch |= 1 << positionInByte; // or ch |= 0 << positionInByte
bitmap[posBitmap] = ch; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T17:58:20.653

它看起来基本上是正确的，但它比它需要的要复杂一些。我要做的唯一技术更改是使用`unsigned char`而不是`char`. 除此之外，您不需要`floor`，并且可以`%`用来计算位偏移：

```
int index = numBit / 8;
int offset = numBit % 8;
bitmap[offset] |= 1 << offset; 
```

正如@graygoose124 指出的那样，它会打开一点，但不会关闭它。要切换它，请替换`|=`为`^=`。更一般地，使用

```
bitmap[index] |= 1 << offset; 
```

打开一点，和

```
bitmap[index] &= ~(1 << offset); 
```

关掉一点，和

```
bitmap[index] ^= 1 << offset; 
```

切换一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T18:13:09.167

为了让它比@Pete Becker 回答更简单，为什么不使用 bitset（[http://www.cplusplus.com/reference/bitset/bitset/](http://www.cplusplus.com/reference/bitset/bitset/)）：

```
#include <bitset>
std::bitset<16> bitmap;

int numBit = 11;
bitmap.flip(numBit); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T17:55:45.637

我做了一个简短的忽略，除了`|=`. （虽然，我觉得它可以更容易地完成）

目前，您的代码将打开一点，但如果您尝试将其关闭，则不会发生任何事情。( `1 | 1 = 1`, `1 | 0 = 1`)

相反，您应该使用`^=`, 因为`1 ^ 1 = 0`和`0 ^ 1 = 1`.

# error-handling - swi-prolog 家谱中的错误

> ID：16198892
> 
> 赞同：-2
> 
> 时间：2013-04-24T17:50:42.440
> 
> 标签：error-handling, prolog

我正在尝试学习 swi-prolog 的基础知识，我从一个简单的家谱开始。当我尝试编译代码时，它一直`Syntax error: Operator expected`在第 47-53 行给我一个`Singleton variables:[B, C]`警告，在第 60 和 61 行给出一个警告。如果熟悉该语言的人可以查看代码并告诉我我可能做错了什么，它会不胜感激。此外，如果有人可以推荐一个好的 swi-prolog 编译器，那将不胜感激。

这是代码

```
%
%Lineage
%

parent_child(stan, lisa).
parent_child(stan, steve).
parent_child(gertrude, steve).
parent_child(steve, adam).
parent_child(steve, brian).
parent_child(steve, jessie).
parent_child(ann, jessie).
parent_child(lisa, dave).
parent_child(allice, adam).
parent_child(ann, brian).

%
%Gender
%

male(adam).
male(brian).
male(dave).
male(kyle).
male(steve).
male(stan).
female(allice).
female(ann).
female(jessie).
female(gertrude).
female(lisa).

%
%Relation Clauses
%

father(X, Y) :- parent_child(X, Y), male(X).
mother(X, Y) :- parent_child(X, Y), feamle(X).

grandfather(X, Z) :- parent_child(X, Y), parent_child(Y, Z), male(X).
grandmother(X, Z) :- parent_child(X, Y), parent_child(Y, Z), female(X).

brother(X, Y) :- parent_child(A, X), parent_child(B, X), parent_child(A, Y), 
                 parent_child(B, Y), female(A), male(B), male(Y).
brothers(X, Y) :- parent_child(A, X), parent_child(B, X), parent_child(A, Y), 
                  parent_child(B, Y), female(A), male(B), male(X), male(y).
sister(X, Y) :- parent_child(A, X), parent_child(B, X), parent_child(A, Y), 
                parent_child(B, Y), female(A), male(B), female(Y).
sisters(X, Y) :- parent_child(A, X), parent_child(B, X), parent_child(A, Y), 
                 parent_child(B, Y), female(A), male(B), female(X), female(Y).

aunt(X, Y) :- parent_child(A, X), parent_child(B, Y), Parent(A, B).
aunt_nephew(X, Y) :- parent_child(A, X), parent_child(B, Y), Parent(A, B), 
                     female(X), male(Y).
aunt_niece(X, Y) :- parent_child(A, X), parent_child(B, Y), Parent(A, B), 
                    female(X), female(Y).

uncle(X, Y) :- parent_child(A, X), parent_child(B, Y), Parent(A, B).
uncle_nephew(X, Y) :- parent_child(A, X), parent_child(B, Y), Parent(A, B), 
                      male(X), male(Y).
uncle_niece(X, Y) :- parent_child(A, X), parent_child(B, Y), Parent(A, B), 
                     male(X), female(Y).

cousin(X, Y) :- parent_child(A, X), parent_child(C, A), parent_child(B, Y), 
                parent_child(C, B).
cousin_male(X, Y) :- parent_child(A, X), parent_child(C, A), 
                     parent_child(B, Y), parent_child(C, B), male(Y).
cousin_female(X, Y) :- parent_child(A, X), parent_child(C, A), 
                       parent_child(B, Y), parent_child(C, B), female(Y).

half_brother(X, Y) :- parent_child(A, X), parent_child(A, Y), 
                      parent_child(B, X), parent_child(C, Y), male(X).
half_sister(X, Y) :- parent_child(A, X), parent_child(A, Y), 
                     parent_child(B, X), parent_child(C, Y), female(X). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T20:17:47.497

`brothers(X,Y):- ... male(B), male(X), male(y).`您在所有变量必须以大写字母开头的第二个子句中有错字。

所有*谓词*必须以*小写*字母开头。在第 47 - 53 行中有一个谓词调用“ `Parent(A, B)`”，它以大写字母开头。那是无效的语法。当它更改为`parent(A, B)`时，错误消失。

关于单例变量的警告意味着该变量仅在谓词主体中使用一次，即未使用其值。您可以只使用无名 var`_`代替。通常这意味着你忽略了一些东西。

在这里，您可能是这个意思`B \= C`。其他变量也是如此，比如`X`and `Y`，可能。

仅使用不同命名的变量并不能确保它们的值不同，您需要为此添加显式检查 -*在*两个变量都已实例化之后。要在实例化*之前*注册您的意图，您必须使用[`dif/2`](http://www.swi-prolog.org/pldoc/man?predicate=dif/2)：

```
2 ?- dif(X,Y),X=1,Y=2.

X = 1
Y = 2

3 ?- dif(X,Y),X=1,Y=1.

No 
```

# c - 用户输入以制作链表

> ID：16198893
> 
> 赞同：0
> 
> 时间：2013-04-24T17:50:44.160
> 
> 标签：c, linked-list, c99, getc

我有一个 ac 99 编程课程的项目，要求我们向用户询问一个句子，然后逐个字符地获取该句子并将每个字符单独存储在链表中。我们被告知我们需要使用 getc() 和一个 while 循环来读取句子并存储到链表中。

到目前为止，我知道您需要执行 while 循环，直到 getc 遇到“\n”。除此之外，我什至不知道从哪里开始。除了这个项目，我对这个类没有任何问题。

非常感谢任何有关方法或其他方法的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:00:56.647

任务中最重要的部分不是读取输入（除了循环的 getc 之外没有更多的东西），而是知道链表是​​什么，以及如何制作这样的链表。看看这个。为了让您开始，一个链表如下所示：

![一个链表](https://i.stack.imgur.com/gdprZ.gif)

你需要对*指针*、*malloc*、*free*和*structs*有很好的了解。如果您仍然卡住，请查看这些主题。

# multithreading - Node.js 是否适合计算密集型 Web 服务

> ID：16198894
> 
> 赞同：1
> 
> 时间：2013-04-24T17:50:46.173
> 
> 标签：multithreading, apache, node.js, iis, computation

我将创建一组包含计算密集型代码的 Web 服务。计算可以从 1/2 秒到 20 秒运行。计算存在于 C 代码中。

我可能不会同时有超过 20 个 Web 服务请求，其中只有几个是运行时间较长的计算。

我的理解是 node.js 在单个线程中运行，所以我必须编写一个 node.js 插件来连接我的 C 代码。然后 C 代码必须在其自己的线程中执行。我会使用 node.js 提供的线程池来异步运行这些计算。我会在多核机器上运行它以最大限度地提高性能。

我描述的架构听起来是否正确并且 node.js 是否适合这样做？在这样的应用程序中，Apache 或 IIS 会更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:05:35.550

您可以制作本机 C 程序，并让节点执行二进制文件，并在完成时回调。我认为有几种方法，这是从[nodejitsu](http://docs.nodejitsu.com/articles/child-processes/how-to-spawn-a-child-process)`child_process.exec(command, [options], callback)`复制的示例：

```
var childProcess = require('child_process'),
     ls;

 ls = childProcess.exec('ls -l', function (error, stdout, stderr) {
   if (error) {
     console.log(error.stack);
     console.log('Error code: '+error.code);
     console.log('Signal received: '+error.signal);
   }
   console.log('Child Process STDOUT: '+stdout);
   console.log('Child Process STDERR: '+stderr);
 });

 ls.on('exit', function (code) {
   console.log('Child process exited with exit code '+code);
 }); 
```

*编辑*
如果您需要在启动后将输入传递给您的进程，请[`child_process.spawn`](http://nodejs.org/api/child_process.html#child_process_child_process_spawn_command_args_options)改用。

Node 可以很好地处理 apache 的任务；我使用[express](https://github.com/visionmedia/express)来托管文件和动态页面；我的应用程序逻辑是在对特定路由发出特定 HTTP 请求时由 Express 调用的 javascript 代码。

除非您限制同时计算，否则您的机器可能会陷入困境。我对线程池一无所知或评论。 [caolan/async](https://github.com/caolan/async#queueworker-concurrency)可以帮助管理并发计算（和其他控制流任务）。

# scala - named database in Play and Squeryl test gave error

> ID：16198901
> 
> 赞同：0
> 
> 时间：2013-04-24T17:51:38.420
> 
> 标签：scala, playframework-2.0, squeryl

I followed [this link](http://www.artima.com/articles/play2_scala_squeryl.html) “Test the Model” part to write a test in `Play` and `Squeryl`. But I am using a named database "test" rather than "default". The following code does not work

```
import models.{AppDB, Bar}

import org.scalatest.FlatSpec
import org.scalatest.matchers.ShouldMatchers

import org.squeryl.PrimitiveTypeMode.inTransaction

import play.api.test._
import play.api.test.Helpers._

class BarSpec extends FlatSpec with ShouldMatchers {

  "A Bar" should "be creatable" in {
    running(FakeApplication(additionalConfiguration = inMemoryDatabase("test"))) {
      inTransaction {
        val bar = AppDB.barTable insert Bar(Some("foo"))
        bar.id should not equal(0)
      }
    }
  }

} 
```

I got an error saying:

```
[info] BarSpec:
[info] A Bar 
[info] - should be creatable *** FAILED ***
[info]   com.typesafe.config.ConfigException$BadPath: path parameter: Invalid path ' - could not find datasource for default': Token not allowed in path expression: '-' (you can double-quote this token if you really want it here)
[info]   at com.typesafe.config.impl.Parser.parsePathExpression(Parser.java:881)
[info]   at com.typesafe.config.impl.Parser.parsePath(Parser.java:921)
[info]   at com.typesafe.config.impl.Path.newPath(Path.java:206)
[info]   at com.typesafe.config.impl.SimpleConfig.hasPath(SimpleConfig.java:70)
[info]   at play.api.Configuration.reportError(Configuration.scala:549)
[info]   at play.api.db.BoneCPApi.play$api$db$BoneCPApi$$error(DB.scala:274)
[info]   at play.api.db.BoneCPApi$$anonfun$getDataSource$5.apply(DB.scala:413)
[info]   at play.api.db.BoneCPApi$$anonfun$getDataSource$5.apply(DB.scala:413)
[info]   at scala.Option.getOrElse(Option.scala:108)
[info]   at play.api.db.BoneCPApi.getDataSource(DB.scala:413)
[info]   ...
[error] Failed: : Total 5, Failed 3, Errors 0, Passed 2, Skipped 0
[error] Failed tests:
[error]     DataSourceTest
[error]     BarSpec
java.lang.RuntimeException: Tests unsuccessful 
```

I guess I cannot directly use inTransaction here. But what should I do to make the test case pass when I use non-"default" database names?

Thank you.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T21:00:42.273

您只需要为多个数据库设置连接，例如：

```
package models

import org.squeryl.adapters.{H2Adapter}
import org.squeryl.Session
import play.api.Application
import play.api.db.DB

object TestConn {

  def test_session(app : Application) = Session.create( DB.getConnection("test")(app), new H2Adapter)

} 
```

然后在你的 BarSpec 中：

```
 .....
    "A Bar" should "be creatable" in {
        running(FakeApplication()) {
          transaction(TestConn.test_session(current)){
            val bar = AppDB.barTable insert Bar(Some("foo"))
            bar.id should not equal(0)
          }
        }
      } 
   ..... 
```

请注意，对于这些情况，您的数据库模式可能具有 conf/evalutions/test 目录。

# highcharts - legend labelFormatter: getting space between name and percentage so they line up

> ID：16198902
> 
> 赞同：1
> 
> 时间：2013-04-24T17:51:41.557
> 
> 标签：highcharts

I'm trying to use HighCharts 2.3.5 to get names and percentages to line up in a legend.

Right now the legend looks like this:

```
symbol aValue aPercentage
symbol somethingElse aPercentage
symbol v aPercentage 
```

What I want is this:

```
symbol aValue         aPercentage
symbol somethingElse  aPercentage
symbol v              aPercentage 
```

I've resorted to something that sure seems hacky. I set left:0px;right:0px; and then add some nbsps. The div ends up looking like this:

```
<div style="left:0px;top:0px;display:inline-block;position:absolute;">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;44.7%
</div> 
```

Is there a better way to do this?

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T21:38:05.370

Thanks for the suggestions. By accident I found this: [HighCharts Pie Chart Legend value alignment](https://stackoverflow.com/questions/16223616/highcharts-pie-chart-legend-value-alignment/16232167#16232167)

That fiddle and the floating solved it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T07:43:57.737

您可以为图例项设置宽度：

[http://api.highcharts.com/highcharts#legend.itemWidth](http://api.highcharts.com/highcharts#legend.itemWidth)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T09:49:11.417

使用图例项格式化程序 alonwithe 选项`useHTML: true`

使用 formatter 函数，您可以返回 html 代码。您可以根据需要构建图例项目。

# xml - DTD Qualifiers - difference between placing them inside or outside the parentheses

> ID：16198905
> 
> 赞同：0
> 
> 时间：2013-04-24T17:52:01.477
> 
> 标签：xml, dtd

I'm a writing a DTD for an XML document that has `<students>` as its root element and may contain 0+ `<student>` elements.

What is the difference between declaring

```
<!ELEMENT students (student)*> 
```

and

```
<!ELEMENT students (student+)> 
```

They are both validating.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T01:01:45.130

内容模型`(student)*`接受零个或多个`student`元素；内容模型`(student+)`接受一个或多个。

OP 在他关于发生指示符在括号内还是括号外何时重要的推测性评论中是正确的。

附加到名称的出现指示符（如`(student+)`）适用于该名称的元素。附加到带括号的组（如 中）的出现指示符`(student)*`适用于整个组。当括号内的组仅包含一个标记时，如在这些情况下，出现指示符的位置无效。所以`(student+)`和`(student)+`意思是一样的，用星号代替加号的对应对也是一样的。

当组包含多个标记时，指示符的位置确实会有所不同： `(a | b)+`接受任何混合`a`元素的非空序列`b`，同时`(a+ | b+)`接受非空`a`元素序列或非空元素序列`b`，但不接受混合. （有些学习者对此有问题，但值得学习。）同样，`(a, b)+`定义`(a+, b+)`两种不同的语言。

# c# - TIBCO Rendezvous Rv Daemon - Monitor status and errors

> ID：16198907
> 
> 赞同：1
> 
> 时间：2013-04-24T17:52:03.520
> 
> 标签：c#, tibco-rv

I am working with receiving rv messages, and I cant seem to find away to watch the status of the rv daemon. That is I want to listen to the daemon for errors and report them when they occur. I have been searching through the source code of TIBCO, but I cant seem to find anything useful in there. Does anyone have any idea on how to do this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-02T14:42:01.070

你试过听`_RV.ERROR.>`和`_RV.WARN.>`主题吗？您需要订阅每个连接的传输，以及进程间传输以获得非传输特定的错误。这一切都在 RV 手册的“咨询消息”部分中进行了描述。让你胃口大开

> Rendezvous 软件向 Rendezvous 程序提供异步咨询消息。咨询消息指示错误、警告和其他信息。
> 
> 与状态码（在特定 Rendezvous 调用中指示成功或失败）相比，异步咨询消息通知程序发生在程序直接控制流之外的事件——例如，程序处理入站消息的速度太慢，导致守护进程的消息队列溢出。

公平的警告，我正在使用 7.3 版，所以在新版本中情况可能会有所改变。

# mysql - Generate a products quantity sold from each state. Mysql query

> ID：16198909
> 
> 赞同：0
> 
> 时间：2013-04-24T17:52:08.267
> 
> 标签：mysql

This is the end result that I am trying to achieve:

Tally of quantity sold for each product for each state for a specific date (this month for example)

```
 District State A   District State B 
Product A                 356                934
Product B                 343                232 
```

**Scenario**

I have the following points that need to be made clear:

*   My system is up and running so to change schema around would be difficult until the next update.
*   I have districts known as '**States**', such as kansas or texas for example.
*   I have a table of Products known as '**Products**' with no price associated with them
*   I have a table consisting of **State Product Prices** with a link to the 'States' and 'Product' table, with the addition of a '**price column**'. So each state have their own prices for the list of products.
*   I have customers known as '**Agents'** each connected to a specific state so that during the order process (in my application) each agent is charged the correct product price obtained from the state product price table.
*   I have an Order table consisting of orders made by Agents with the **date** that the order was placed recorded as well in the same orders table. This table does not contain the list of products bought. Thats what the next table is there for (orderLines table)
*   I have an **Orderlines** table which stores all the products bought with their quantity sold connected to one order from the orders table. so there can be many orderlines per order.

This being said The following tables look like this:

**States table**

```
State_Id
State_Name 
```

**Products table**

```
Product_Id
Product_Name 
```

**State product prices table**

```
StateProduct_Id
State_Id - referenced to states table
Product_Id - linked to products table
StateProduct_Price 
```

**Agents table**

```
Agent_Id
Agent_Name
State_Id - linked to states table 
```

**Orders Table**

```
Order_Id
Agent_Id
Order_DatePurchased - in the end this date is what will be used to calculate the total quantity of products sold within a certain date 
```

**Order Lines table:**

```
OrderLine_Id 
Order_Id - linked to the orders table
Agent_Id - linked to the agents table
Product_Id - linked to the products table not products state table
OrderLine_ProductNameATOP - at time of purchase
OrderLine_QuantitySoldATOP - at time of purchase 
```

It is the order lines table that will be used to grab the quantity of that specific product sold referenced by the product id which will be used in the report.

I need a query to be able to product the report shown above.

What can i do to get this report?! I hope someone can help. I dont expect someone to do it for me, just an explanation would be great

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T19:33:19.213

您需要一个交叉表报告，这不是在 MySQL 中生成的最简单的东西。

这是一个查询（未经测试），用于获取一月份的结果集：

```
Select 
   OrderLines.Product_Id,
   States.State_Name,
   Sum(OrderLines.OrderLine_QuantitySoldATOP) as Quantity
From ( (
   OrderLines 
      Inner Join Orders on OrderLines.Order_Id = Orders.Order_Id )
      Inner Join Agents on OrderLines.Agent_ID = Agents.Agent_ID )
      Inner Join States on Agents.State_Id = States.State_Id 
Where 
   Orders.Order_DatePurchased >= '2013-01-01' and
   Orders.Order_DatePurchased < '2013-02-01' 
Group by 
   OrderLines.Product_Id,
   States.State_Name 
```

现在您需要在交叉表中对其进行格式化。此链接将带您进入一个页面，该页面解释了如何利用存储过程将结果集从上面的查询转换为您需要的布局。

```
http://www.danradigan.com/wordpress/2011/03/pivot-tables-in-mysql/ 
```

# javascript - 检测流星中的电话间隙

> ID：16198911
> 
> 赞同：1
> 
> 时间：2013-04-24T17:52:22.650
> 
> 标签：javascript, cordova, meteor

现在，我正在 Meteor JS 框架中构建一个应用程序——该应用程序既可以从浏览器运行，也可以与 Cordova Phonegap 打包以供 iOS / Android 使用。

我希望能够检测我是否在科尔多瓦。我还是想区分手机浏览器和手机PhoneGap的使用。

[在移动浏览器或 PhoneGap 应用程序之间](https://stackoverflow.com/questions/10347539/detect-between-a-mobile-browser-or-a-phonegap-application)进行检测对我来说没有意义，因为我仍在通过 HTTP 调用加载 Meteor 应用程序。

我还能如何检测用户是否从 PhoneGap 加载我们的应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-26T21:41:56.020

今天要容易得多：

```
if (Meteor.isCordova) {
  console.log("Printed only in mobile cordova apps");
} 
```

[Meteor Docs：添加 Cordova/Phonegap 特定的 Javascript 代码](https://github.com/meteor/meteor/wiki/Meteor-Cordova-Phonegap-integration#adding-cordovaphonegap-specific-javascript-code-to-your-application)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T18:52:48.593

好吧，您可以随时检查是否启动了 deviceready 处理程序并使用会话哈希来存储它，例如

```
document.addEventListener("deviceready", function() {
    Session.set("isphonegap",true);
}, false); 
```

您可以反应性地使用它，例如

```
Deps.autorun() {
    if(Session.equals("isphonegap", true)) {
         //Yes its phonegap!
    }
} 
```

唯一的事情是您必须假设它始终不是 phonegap，如果`deviceready`触发（在 phonegap/cordova 内的设备上），那么您可以检查`Session.get("isphonegap")`设备是否在模板帮助程序中使用 phonegap 或其他任何反应变量可以运行的地方

# javascript - 如何设置字符串中的字符数？

> ID：16198915
> 
> 赞同：0
> 
> 时间：2013-04-24T17:52:38.840
> 
> 标签：javascript, string, google-feed-api

我正在使用此脚本从博客加载新闻，使用 Google AJAX 提要 API。如何从 Google Ajax FEED Api 设置标题的字符数？下面是我的脚本

HTML

```
<div id="feeddiv">

</div> 
```

脚本

```
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
    google.load("feeds", "1") //Load Google Ajax Feed API (version 1)
</script>

<script type="text/javascript">

    var feedcontainer=document.getElementById("feeddiv")
    var feedurl="http://anatomicshoes.wordpress.com/feed/"
    var feedlimit=4
    var rssoutput="<ul>"
    function rssfeedsetup(){
        var feedpointer=new google.feeds.Feed(feedurl) //Google Feed API method
        feedpointer.setNumEntries(feedlimit) //Google Feed API method
        feedpointer.load(displayfeed) //Google Feed API method
    }

    function displayfeed(result){
        if (!result.error){
            var thefeeds=result.feed.entries
            for (var i=0; i<thefeeds.length; i++){

            var pubDate = thefeeds[i].publishedDate;
            var date = new Date(pubDate);

            var months = Array("01", "02", "03", "04", "05", "06", "07", "08", "09", "10", "11", "12");
            var string = date.getDate() + "/" + months[date.getMonth()] + "/" + date.getFullYear()

            rssoutput+="<li><span>•&lt;/span> <small>" + string + "</small> - <a href='" + thefeeds[i].link + "' target='_blank'>" + thefeeds[i].title + "</a></li>"
            }
            rssoutput+="</ul>"
            feedcontainer.innerHTML=rssoutput

        } else
         alert("Erro ao carregar as notícias!")
    }

    window.onload=function(){
        rssfeedsetup()
    }
    </script> 
```

这是输出：

```
• 18/04/2013 - Vincent Ko features the Jardins…
• 12/04/2013 - Stay stylish this Spring…
• 10/04/2013 - Coming soon….
• 5/04/2013 - Introducing the Jardins – A development in Ethical footwear! 
```

但我想要这样的东西（不是整个标题）：

```
• 18/04/2013 - Vincent Ko features the...
• 12/04/2013 - Stay stylish this Spring...
• 10/04/2013 - Coming soon...
• 5/04/2013 - Introducing the Jardins... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:11:13.207

你可以做这样的事情......（不是很优雅）：

```
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
    google.load("feeds", "1") //Load Google Ajax Feed API (version 1)
</script>

<script type="text/javascript">

    function shortenString(str){
        var limit = 23;
        if(str.length > limit)
            str = str.substring(0, limit) + '...';
        return str;
    }

    var feedcontainer=document.getElementById("feeddiv")
    var feedurl="http://anatomicshoes.wordpress.com/feed/"
    var feedlimit=4
    var rssoutput="<ul>"
    function rssfeedsetup(){
        var feedpointer=new google.feeds.Feed(feedurl) //Google Feed API method
        feedpointer.setNumEntries(feedlimit) //Google Feed API method
        feedpointer.load(displayfeed) //Google Feed API method
    }

    function displayfeed(result){
        if (!result.error){
            var thefeeds=result.feed.entries
            for (var i=0; i<thefeeds.length; i++){

            var pubDate = thefeeds[i].publishedDate;
            var date = new Date(pubDate);

            var months = Array("01", "02", "03", "04", "05", "06", "07", "08", "09", "10", "11", "12");
            var string = date.getDate() + "/" + months[date.getMonth()] + "/" + date.getFullYear()

            rssoutput+="<li><span>•&lt;/span> <small>" + string + "</small> - <a href='" + thefeeds[i].link + "' target='_blank'>" + shortenString(thefeeds[i].title) + "</a></li>"
            }
            rssoutput+="</ul>"
            feedcontainer.innerHTML=rssoutput

        } else
         alert("Erro ao carregar as notícias!")
    }

    window.onload=function(){
        rssfeedsetup()
    }
    </script> 
```

演示：http: [//jsfiddle.net/dirtyd77/QRBUP/2/](http://jsfiddle.net/dirtyd77/QRBUP/2/)

# javascript - 如何向 PayPal JavaScriptButtons 添加选项选择

> ID：16198921
> 
> 赞同：2
> 
> 时间：2013-04-24T17:52:47.757
> 
> 标签：javascript, paypal, paypal-buttons

我正在尝试使用新的 PayPal JavaScriptButtons：[https](https://github.com/paypal/JavaScriptButtons) ://github.com/paypal/JavaScriptButtons 。如何添加产品变体下拉选择？

```
<script src="paypal-button-minicart.min.js?merchant=YOUR_MERCHANT_ID"
data-button="cart"
data-name="Product in your cart"
data-amount="1.00"
data-quantity-editable="1" 
data-on0="size"
data-os0="small"
data-os0="large"
data-option_select0="small"
data-option_select0="large"
></script> 
```

我从购物车的 HTML 变量中获取`on0`变量`option_select0`名：[https](https://www.x.com/developers/paypal/documentation-tools/paypal-payments-standard/integration-guide/Appx_websitestandard_htmlvariables#id08A6HH0D0TA) ://www.x.com/developers/paypal/documentation-tools/paypal-payments-standard/integration-guide/Appx_websitestandard_htmlvariables#id08A6HH0D0TA ，但我可以找不到有关如何正确使用它们的任何参考。

我只能生成隐藏字段，例如`<input type="hidden" name="os0" value="small">`. 如何获得带有列表的实际下拉列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-04T15:39:00.140

尝试使用以下格式的选项字段： data-option0="Color=Blue:8.00,Green:12.00,Red:10.00" data-option1="Size=Small,Medium,Large"

和示例按钮代码在这里：

```
 <script src="button.js?merchant=YOUR_MERCHANT_ID"
        data-button="cart"
        data-name="Product in your cart"
        data-amount="1.00"
        data-quantity-editable="1" 
        data-type="form"
        data-host="www.sandbox.paypal.com"
        data-option0="Size=Small:8.00,Large:12.00"
        data-option1="Color=Red,Green,Blue"
        ></script> 
```

# opencv - 正确的空间相机方向

> ID：16198923
> 
> 赞同：4
> 
> 时间：2013-04-24T17:52:49.617
> 
> 标签：opencv, matrix, rotation, camera-calibration

我正在执行 OpenCV 校准示例中描述的相机校准（它适用于镜头校正）。另外我现在想做一个空间校正。意味着当相机不平行于棋盘时，我想获得使棋盘平行于相机所需的旋转。这就是我正在做的事情：

```
// calculate intrinsic matrix and distortion coefficients for lens correction and get
// the rotation "rotation"
cvCalibrateCamera2(object_points,image_points,point_counts,cvGetSize(gray_image),
                   intrinsic_matrix, distortion_coeffs,
                   rotation,NULL,
                   0);
...
// convert the rotation to a 3x3 matrix
cv::Rodrigues(rotation,rotMtx,cv::noArray());
// generate maps for lens correction
cv::initUndistortRectifyMap(intrinsic,distortion,cv::Mat(),
                            cv::getOptimalNewCameraMatrix(intrinsic,distortion,imageSize,1,imageSize,0),
                                                         imageSize, CV_16SC2,*handle->mapx,*handle->mapy);
...
// perform lens correction
cv::remap(cv::Mat(sImage),dImage,*handle->mapx,*handle->mapy,cv::INTER_LINEAR);
...
// apply the rotation to make the mage parallel to the camera
cv::warpPerspective(dImage,dImage2,rotMtx,cv::Size(handle->width,handle->height),cv::INTER_LANCZOS4,cv::BORDER_TRANSPARENT,cv::Scalar()); 
```

cvCalibrateCamera2() 返回的旋转 3x1 旋转值是 !=0，所以返回了一些东西。但是 warpPerspective() 不会旋转图像。

这里有什么问题？我应该如何正确“并行化”图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-06T12:14:24.780

根据我对主题的理解，您用于“*并行化*”图像的旋转矩阵提供了**两个图像平面**之间的旋转。您正在寻找的是**从图像平面到相机平面的转换**。这需要计算平面之间的*单应性。*您需要弄清楚是什么矩阵将您从图像平面带到相机平面。使用此矩阵来并行化您的图像。

此外，*calibrateCamera*为您提供前向转换，以返回您需要反转矩阵的原始数据。

试试看这个 - [Homography](http://people.scs.carleton.ca/~c_shu/Courses/comp4900d/notes/homography.pdf?g_q=homography)

*提示*：使用焦距和主点信息在图像和相机平面之间移动。

# javascript - 图像上的 contenteditable removeFormat

> ID：16198925
> 
> 赞同：2
> 
> 时间：2013-04-24T17:52:59.087
> 
> 标签：javascript, html, contenteditable

我正在尝试将 contenteditable DIV 与作为表单一部分的 textarea 同步。

我`innerHTML`从 DIV 中提取，但我希望能够从`img`标签中删除嵌套格式（粗体、斜体、下划线等）。在访问 div 的 innerHTML 之前删除图像上的任何格式可能比在 html 上使用正则表达式更容易。

我可以使用：

```
 document.execCommand('removeFormat', false, null); 
```

*但是我怎么可能只删除图像上的格式？*

（另外我需要在图像上使用 ALT 标签，似乎不可能用`execCommand`/来完成`insertImage`。这是正确的吗？我最终遵循了关于[Contenteditable 文本编辑器和光标位置](https://stackoverflow.com/questions/2937975/contenteditable-text-editor-and-cursor-position/9575021#9575021)的建议并正在使用`insertHTML`）

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T20:55:14.860

遵循@tim-down 的建议是我尝试导航 DOM 并从 IMG 标签中删除文本格式。

奖励将奖励给更优雅的解决方案。

这里的工作示例：http: [//jsfiddle.net/tjzGg/](http://jsfiddle.net/tjzGg/)

```
function setCaret() {
    var el = document.getElementById("editable");
    recurseDOM(el);
    el.focus();
}

function recurseDOM(el) {
    var nIndex = 0;
    var elNode = el.childNodes[nIndex];
    while (elNode) {
        var tag = elNode.tagName;
        if (tag) {
            if (tag.toUpperCase() == 'IMG') {
                var range = document.createRange();
                var sel = window.getSelection();
                range.selectNode(elNode);
                sel.removeAllRanges();
                sel.addRange(range);
                document.execCommand('removeFormat', false, null);
            } else if (elNode.childElementCount) {
                recurseDOM(elNode);
            }
        }
        nIndex++;
        elNode = el.childNodes[nIndex];
    }
} 
```

# c - 使用 pthread 进行变量更改

> ID：16198929
> 
> 赞同：0
> 
> 时间：2013-04-24T17:53:06.613
> 
> 标签：c, pthreads

我正在使用 pthread 在 C 中做一个小游戏。我有一个矩阵（int 的二维表），它的某些字符由数字（3、4、5，其他数字不是线程）表示。那些角色必须在我的矩阵中移动。 `serveurAff`用于显示表格。

`tabD`，`tabCrim`并且`tabJournaliste`是全球性的。它们都是指针。

这是我的代码`main`：

```
int statut, i,arg[2];
while (!serveurAff.fin)
    pthread_cond_wait(&serveurAff.termine, &serveurAff.mutex);
serveurAff.reqATraiter = 1;
serveurAff.fin = 0;
pthread_cond_signal(&serveurAff.requete);
pthread_mutex_unlock(&serveurAff.mutex);
//detective thread
for(i = 0; i < 3; i++){
    arg[0] = tabD[i]->posY;
    arg[1] = tabD[i]->posX;
    printf("test1 \n ");
    statut = pthread_create(&tabD[i]->threaddete, NULL, routinePersonne, (void *) &arg);
}
//criminel thread
for(i = 0; i < 5; i++){
    arg[0] = tabCrim[i]->posY;
    arg[1] = tabCrim[i]->posX;
    printf("test2 \n ");
    statut = pthread_create(&tabCrim[i]->threadcrim, NULL, routinePersonne, (void *) &arg);
}
//thread journaliste
for(i = 0; i < 3; i++){
    arg[0] = tabJournaliste[i]->posY;
    arg[1] = tabJournaliste[i]->posX;
    printf("test3 \n ");
    statut = pthread_create(&tabJournaliste[i]->threadjour, NULL, routinePersonne, (void *) &arg);
}
pthread_join(threadAff, NULL); 
```

当我在开始我的 pthread 之前写一个时`printf`，对于“一些迭代”位置是可以的

```
 test1 
 test1 
 test1 
 test2 
 test2 
 test2 
 test2 
 test2 
 test3 
 test3 
 test3 
 coord1 => 9, coord0, 1 
xancien => 9 yancien => 1 
coord1 => 20, coord0, 7 
xancien => 20 yancien => 7 
azazaz

Etape 0
01   5 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
02   0 4 4 4 0 0 0 0 0 0 0 2 2 0 0 0 0 0 0 0 0 0 5 0 0 0 0 0 0 0 
03   0 0 0 0 0 0 0 0 0 3 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
04   0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 3 0 0 0 0 0 0 0 0 0 0 0 0 0 
05   0 0 3 0 0 2 2 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 5 0 0 0 0 0 0 
coord1 => 2, coord0, 4 
xancien => 2 yancien => 4 
coord1 => 0, coord0, 0 
coord1 => 20, coord0, 7 
xancien => 20 yancien => 7 
coord1 => 23, coord0, 4 
xancien => 23 yancien => 4 
xancien => 0 yancien => 0 
coord1 => 0, coord0, 0 
xancien => 0 yancien => 0 
coord1 => 20, coord0, 7 
xancien => 20 yancien => 7 
06   0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 5 0 0 0 0 0 0 
07   0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
08   0 0 0 0 0 0 0 0 0 0 0 0 1 1 0 0 0 0 0 0 0 5 0 3 0 0 0 3 0 0 
09   0 0 0 0 0 0 0 0 0 0 0 5 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
coord1 => 23, coord0, 4 
xancien => 23 yancien => 4 
coord1 => 0, coord0, 0 
xancien => 0 yancien => 0 
coord1 => 0, coord0, 0 
xancien => 0 yancien => 0 
coord1 => 0, coord0, 0 
xancien => 0 yancien => 0 
```

正如您在一些迭代之后所看到的，所有值都是 0 ...如果我`printf("test1")`在启动线程之前不写，则值始终等于 0。

这里的一部分`routinePersonne`：

```
void *routinePersonne(void *arg) {
while (1){
int* coord = (int*)arg;     
        int xancien = coord[1]; 
        int yancien = coord[0];
        printf("coord1 => %d, coord0, %d \n",xancien,yancien);
        printf("xancien => %d yancien => %d \n",xancien,yancien);

        int i =0;
        crimines* c;
        detective* d;
        journaliste* j;
        //on récupére le type de la personne
        int element = g->carte[yancien][xancien];
        switch(element){
            case CRIMINEL:
                c = malloc(sizeof(criminels));
                while(tabCrim[i]->posX != xancien && tabCrim[i]->posY != yancien){
                    i++;
                }
                c = tabCrim[i];
            break;
            case DETECTIVE:
                d = malloc(sizeof(detective));
                while(tabD[i]->posX != xancien && tabD[i]->posY != yancien){
                    i++;
                }
                d = tabD[i];
            break;
            case JOURNALISTE:
                j = malloc(sizeof(journaliste));
                while(tabJournaliste[i]->posX != xancien && tabJournaliste[i]->posY != yancien){
                    i++;
                }
                j = tabJournaliste[i];
        }
...
} 
```

所以我认为这是一个同步的问题，但我不知道在哪里......

ps：对不起我的英语:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T21:07:53.920

您对所有线程使用相同的`arg`数组。所以你的线程都将共享一组坐标。虽然我仍然无法准确指出这些坐标变为零的代码行，但很可能是某些重新初始化`posY`并`posX`解释了这一点。没有代码很难说。

另一方面，您的`malloc`调用似乎毫无意义，因为您对该内存没有做任何事情，甚至最终会覆盖指针，从而造成内存泄漏。也许您错过了 C 没有数组赋值运算符的事实。你可以写`a = b`if `a`is of type`int*`和`b`is of type `int*`or `int[]`，但这*不会*复制所有元素，而是简单地将数组的地址存储`b`在变量 中`a`。用于`memcpy`创建副本。

# php - MP3 文件在从表单上传后变小并损坏

> ID：16198934
> 
> 赞同：0
> 
> 时间：2013-04-24T17:53:24.600
> 
> 标签：php, file-upload, corruption

这是原始 mp3 文件：[Pon-3jay LongR.mp3](http://eqreverb.com/sound_manager/songs/Pon-3jay%20LongR.mp3)
这是损坏的版本：[pon-3jay longr.mp3](http://eqreverb.com/form/uploads/songs/djdavid98/pon-3jay%20longr.mp3)

这是移动文件的脚本：

```
<?php

require_once "File.php";
$path = "uploads/songs/";
$valid_formats = array("mp3");
$File = new File();

$path = $path."djdavid98/";

    if(isset($_POST) and $_SERVER['REQUEST_METHOD'] == "POST"){
        $name = $_FILES['song']['name'];
        $size = $_FILES['song']['size'];
        $tmp  = $_FILES['song']['tmp_name'];

        if (!is_dir($path)) mkdir($path, 0777, true);

        if($File->upload($tmp, $actual_song_name,$path)){
            echo response($path.$actual_song_name,$actual_song_name,$txt.".".$ext);
        }
        else echo errText("Upload failed!", $path );
    }

function errText($str,$fileName){
    return '{"song":{"sucess":"0","message":"' .$str. '","fileName":"' . $fileName . '"}}';
}
function response($filePath,$actualFileName,$fileName){
    return '{"song":{"sucess":"1","path":"' . $filePath . '","fileName":"' . $fileName . '"}}';
}

?> 
```

文件.php：

```
<?php
    class File {
        public function upload($file, $filename, $target_path) {
            if (empty($filename)) { break; }
            try {
                $target_path = $target_path . $filename;

                if(move_uploaded_file($file, $target_path)) {
                    return true;
                } else{
                    return false;
                }
            } catch (Exception $ex) {
                echo "Error on <strong>Line " . $ex->getLine() . " </strong>: " . $ex->getMessage();
            }
        }
    }
?> 
```

形式：

```
<form class="upload_form" enctype="multipart/form-data" style="height:0;opacity:0;">
    <div class="grid-100 grid-parent">
        <div class="grid-20">
            ...
            <div data-input>
                <span>Song</span>
                <div class="grid-100 grid-parent fileSelect">
                    <div class="grid-60">
                        <input type="text" disabled class="file-holder">
                    </div>
                    <div class="file-wrapper grid-40">
                        <input type="file" name="song" required>
                        <div class="button styleWarning">Browse</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="grid-80 grid-parent">
            ...
        </div>
    </div>
</form> 
```

该脚本在 CloudFlare 主机上运行，​​以防万一发生任何更改。据我所知，所有上传的 mp3 文件都作为相同的文件上传。老实说，我不知道为什么会发生这种情况以及如何解决这个问题。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T20:01:48.100

无意中保存了封面艺术（图像）文件而不是 mp3 文件。

参考 ajaxprocessform.php 中的以下行：

```
$tmp = $_FILES['cover']['tmp_name']; //this is the image

if (!is_dir($path)) mkdir($path, 0777, true); 

if($File->upload($tmp, $actual_song_name,$path)){ //image saved with mp3 path 
```

# wpf - 我想在 wpf 的第一个 listview 上选择它之后在第二个 listview 上选择同一行，怎么做？

> ID：16198936
> 
> 赞同：0
> 
> 时间：2013-04-24T17:53:30.663
> 
> 标签：wpf, xaml, events, listview, binding

所以我有两个与第一列（TestID）相关的列表视图。当我在第一个列表视图中选择行时，我希望在第二个列表视图中自动选择该行。这就是我到目前为止所拥有的。

```
AutomationTestResults tr = new AutomationTestResults();
    public int SelectedTestID
    {

        get
        {

            return tr.TestID;
        }

        set
        {
            tr.TestID = value;
            NotifyPropertyChanged("SelectedTestID");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    public void NotifyPropertyChanged(String propertyName)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    } 
```

=============XAML===================================== =====================

```
<ListView ItemsSource="{Binding TRCollection }" SelectedItem="{Binding SelectedTestID}" SelectionChanged="ListView_SelectionChanged"
                  Grid.Row="1" Height="197" HorizontalAlignment="Left" Margin="12,22,0,0" Name="listView1" VerticalAlignment="Top" Width="680">
        </ListView>
        <ListView ItemsSource="{Binding TCCollection}" SelectedItem="{Binding SelectedTestID}" SelectionChanged="ListView_SelectionChanged"
                  Grid.Row="1" Height="245" HorizontalAlignment="Left" Margin="12,251,0,0" Name="listView2" VerticalAlignment="Top" Width="680" > 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:00:33.880

如果您需要做的就是在第二个 ListView 中选择相应的行，您可以像这样绑定“SelectedIndex”属性

```
<ListView ItemsSource="{Binding TRCollection }" SelectedItem="{Binding SelectedTestID}" SelectionChanged="ListView_SelectionChanged"
          Grid.Row="1" Height="197" HorizontalAlignment="Left" Margin="12,22,0,0" Name="listView1" VerticalAlignment="Top" Width="680"/>

<ListView ItemsSource="{Binding TCCollection}" SelectedIndex="{Binding Path=SelectedIndex, ElementName=listView1}" SelectedItem="{Binding SelectedTestID}" SelectionChanged="ListView_SelectionChanged"
          Grid.Row="1" Height="245" HorizontalAlignment="Left" Margin="12,251,0,0" Name="listView2" VerticalAlignment="Top" Width="680" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T18:00:14.140

为什么不只是

```
<ListView x:Name="listView1"/> <!-- etc.. -->

<ListView SelectedItem="{Binding SelectedItem, ElementName=listView1}"/> 
```

# java - 从java中的mysql获取1个特定用户的请求

> ID：16198952
> 
> 赞同：0
> 
> 时间：2013-04-24T17:54:15.910
> 
> 标签：java, mysql, get

我有一个带有表的 MySQL 数据库（称为数据库）：事件、gebruiker 和 situatie。现在我需要用 Java 编写代码（使用 netbeans）来测试我的宁静 Web 服务。我能够检索所有用户（=gebruikers，荷兰语），但是当我想通过搜索其主键“用户名”来检索一个特定用户时，我在测试 restful web 服务时收到此 500 错误。请帮忙！这是我在java中的代码：

```
@Stateless
@Path("gebruikers")
public class GebruikerService {

@Resource(name = "jdbc/socialebuurt")
private DataSource source;

/*
 * Request all users.
 */

@GET
@Produces(MediaType.APPLICATION_JSON)
public List<Gebruiker> getGebruikers() {
    try (Connection conn = source.getConnection()) {
        try (PreparedStatement stat = conn.prepareStatement("SELECT * FROM gebruiker")) {
            try (ResultSet rs = stat.executeQuery()) {
                List<Gebruiker> results = new ArrayList<>();
                while (rs.next()) {
                    Gebruiker g = new Gebruiker();
                    g.setUsername(rs.getString("Username"));
                    g.setNaam(rs.getString("Naam"));
                    g.setVoornaam(rs.getString("Voornaam"));
                    g.setStraat(rs.getString("Straat"));
                    g.setHuisNr(rs.getInt("huisnr"));
                    g.setPostcode(rs.getInt("postcode"));
                    g.setGemeente(rs.getString("gemeente"));
                    g.setWachtwoord(rs.getString("wachtwoord"));
                    results.add(g);
                }
                return results;
            }
        }
    } catch (SQLException ex) {
        throw new WebApplicationException(ex);
    }
}

/*
 * Request one specific user.
 */

@Path("{username}")
@GET
@Produces(MediaType.APPLICATION_JSON)
public Gebruiker getGebruiker(@PathParam("username") String username) {
    try (Connection conn = source.getConnection()) {
        try (PreparedStatement stat = conn.prepareStatement("SELECT * FROM gebruiker WHERE username = ?")) {
            stat.setString(1,"");
            try (ResultSet rs = stat.executeQuery()) {
                if (rs.next()) {
                    Gebruiker ge = new Gebruiker();
                    ge.setUsername(rs.getString("Username"));
                    ge.setNaam(rs.getString("Naam"));
                    ge.setVoornaam(rs.getString("Voornaam"));
                    ge.setStraat(rs.getString("Straat"));
                    ge.setHuisNr(rs.getInt("huisnr"));
                    ge.setPostcode(rs.getInt("postcode"));
                    ge.setGemeente(rs.getString("gemeente"));
                    ge.setWachtwoord(rs.getString("wachtwoord"));
                    return ge;
                } else {
                    throw new WebApplicationException(Status.NOT_FOUND);
                }
            }
        }
    } catch (SQLException ex) {
        throw new WebApplicationException(ex);
    }
}
} 
```

表'gebruiker'具有以下属性：用户名（主键，varchar（26）），naam（文本），voornaam（文本），straat（文本），huisNr（int（11）），邮政编码（int（4））， gemeente（文本），wachtwoord（文本）。如果需要更多信息，请询问。谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:57:01.240

您需要[`WHERE`](http://www.tutorialspoint.com/mysql/mysql-where-clause.htm)在语句中包含一个子句，如下所示：

```
"SELECT * FROM gebruiker WHERE username =" + username; 
```

# jsf - selectOneMenu 在提交后始终将列表中的最后一项显示为选定项

> ID：16198954
> 
> 赞同：2
> 
> 时间：2013-04-24T17:54:17.580
> 
> 标签：jsf, primefaces, converter, selectonemenu

信息

*   JSF 2.0
*   Primefaces 3.4
*   两个对象都是 People 对象

我有一个简单的下拉菜单，包含在提交表单提交（AJAX 调用）上的选择的表单中：

```
<h:form>

....

                    <p:selectOneMenu converter="personconverter"
                        value="#{searchperson.viewPerson.relatedTo}" filter="true"
                        filterMatchMode="startsWith">
                        <f:selectItems value="#{searchperson.people}" var="person"
                            itemLabel="#{person.fullName}" itemValue="#{person}" />
                    </p:selectOneMenu>
....
                    <p:commandButton value="Save"
                        actionListener="#{searchperson.updatePerson}" />
</h:form> 
```

当我向服务器提交请求时，与 selectOneMenu 关联的对象会正确传递，并且我可以使用此更改更新我的后端。

当页面重新渲染时，p:selectOneMenu中的值：

```
(value="#{searchperson.viewPerson.relatedTo}") 
```

***不呈现刚刚提交的新更改。它呈现人员列表中的最后一个 Person 对象。***

以下是其他部分：

转换器：

```
@FacesConverter("personconverter")
public class PersonConverter implements Converter {

@Override
public Object getAsObject(FacesContext arg0, UIComponent arg1, String value) {

    People pApi = new People();
    Person per = new Person();

    try {
        per = pApi.getPerson(Long.parseLong(value));
    }
    catch(Exception e) {
        e.printStackTrace();
    }
    return per;
}

@Override
public String getAsString(FacesContext arg0, UIComponent arg1, Object arg2) {

    return String.valueOf(((Person) arg2).getId());
} 
```

}

对象类

```
@Override
public boolean equals(Object object) {
    return true; //just to pass through temporarily
}

@Override
public int hashCode() {
    return 0;
} 
```

人脸配置.xml

```
<converter>
    <converter-for-class>com.obj.Person</converter-for-class>
    <converter-class>com.converter.PersonConverter</converter-class>
</converter 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T18:15:05.207

您的`equals()`和的实现`hashCode()`被严重破坏。这样，**每个**实例都`Person`被认为是彼此相等的，因此 JSF 将无法根据可用项目列表识别正确的选定项目。您必须至少根据他们的[合同](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)来实施它们。

相应地修复它，因为它具有`id`表示唯一标识符的属性：

```
@Override
public boolean equals(Object other) {
    return (id != null && other != null && getClass() == other.getClass())
         ? id.equals(((Person) other).id)
         : (other == this);
}

@Override
public int hashCode() {
    return (id != null) 
         ? (getClass().hashCode() + id.hashCode()) 
         : super.hashCode();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-06T10:25:28.507

我知道 BalusC 是解决这个问题的最佳答案；但是我遇到了同样的问题，我只会通过示例来解释它以帮助其他人理解问题。

在更正之前，我使用以下 Java 服务器代码

```
@Override
public boolean equals(Object o) 
    {
    if (this == o) return true;
    if (getClass() != o.getClass()) return false;

    if (o == null)
        {
        return (nId == null);
        }

    PostLabellingMeetingEntity that = (PostLabellingMeetingEntity) o;

    if (nId == null)
        {
        return (that.nId == null);
        }

    return (!nId.equals(that.nId));
    } 
```

没有纠正错误，我可以使用 SelectOneMenu 选择一个项目；但是在保存页面并再次显示后，保存的项目不会显示，并且总是显示列表的最后一项。

错误只是我只有一个“！” 作为回报声明是完全不正确的。

我将其替换为

```
//2018-09-04:BS: big BUG
//return (!nId.equals(that.nId));
return (nId.equals(that.nId)); 
```

我的问题已经解决了:-)

在简历中：即使小部件的某些部分继续正常工作，一个坏角色也会完全破坏应用程序。

# java - 如何将Java中的字符串拆分为不同大小的部分？

> ID：16198966
> 
> 赞同：1
> 
> 时间：2013-04-24T17:54:57.457
> 
> 标签：java, regex, split

我有一个时间戳：`200212312359` 如何将其拆分为`2012.12.31.23.59`

简单的方法是`.split("(?<=\\G.{2})")`，然后组合数组的前 2 个元素，但我想知道是否有任何更专业的解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T18:05:15.967

您可以通过一个`replaceAll`调用和一个有点过于复杂的正则表达式来获得相同的结果。

```
"200212312359".replaceAll("(^\\d{4}|\\d{2})(?!$)", "$1.") 
```

分解后，它在 start 处匹配 4 位数字`^\\d{4}`，或`\\d{2}`在其他任何地方匹配 2 位数字，在输入末尾带有负前瞻`(?!$)`以避免匹配最后一对。然后它用连接到数字的点替换 4 或 2 位数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T17:58:17.610

您的解决方案不一定不专业；它只是不直观。如果您通过简单解释它拆分的日期格式来评论它，那么这与任何其他解决方案一样专业，恕我直言。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T18:12:29.930

此外，如果您知道每个值的位置（点分隔），您可以使用 substring 方法：

```
 String unformatted = String.valueOf(200212312359);
 String year = unformatted.substring(0,4); 
 String month = unformatted.substring(4,6);
 String day = unformatted.substring(6,8); 
 String hour = unformatted.substring(8,10);
 String minute = unformatted.substring(10,12);
 String formatted = String.format("%s.%s.%s.%s.%s", year, month, day, hour, minute); 
```

请阅读[http://docs.oracle.com/javase/7/docs/api/java/lang/String.html](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T18:33:28.083

正如科琳在评论中指出的那样，您可以使用组来创建新的格式化日期。这是示例

```
Pattern p = Pattern.compile("^(\\d{4})(\\d{2})(\\d{2})(\\d{2})(\\d{2})$");
Matcher m = p.matcher("200212312359");
StringBuilder sb = new StringBuilder();
if (m.find()) {
    sb.append(m.group(1));
    for (int i = 2; i <= m.groupCount(); i++)
        sb.append(".").append(m.group(i));
}
System.out.println(sb); 
```

输出：`2002.12.31.23.59`

您还可以使用[命名组](https://stackoverflow.com/questions/415580/regex-named-groups-in-java)来命名每个组并使用它们而不是它们的编号：

```
Pattern p2 = Pattern.compile("^(?<year>\\d{4})(?<month>\\d{2})" +
        "(?<day>\\d{2})(?<hour>\\d{2})(?<minute>\\d{2})$");
Matcher m2 = p2.matcher("200212312359");
if (m2.find()) {
    String formatedDate = m2.group("year") + "." + m2.group("month")
            + "." + m2.group("day") + "." + m2.group("hour") 
            + "." + m2.group("minute");
    System.out.println(formatedDate);
} 
```

* * *

您还可以更新您的拆分以防止像这样在前两位数字上拆分

```
"200212312359".split("(?<=^\\d{4}|(?!^)\\G.{2})" 
```

# c++ - 许多库错误，nodefualtlib 无法正常工作

> ID：16198969
> 
> 赞同：0
> 
> 时间：2013-04-24T17:55:06.913
> 
> 标签：c++

我正在尝试使用 C++ 在 Visual Studio 2008 上使用名为 Dark Gdk 的图形库制作一个小游戏。显然“libcmt.lib”与任何其他库发生冲突。所以我把 /NODEFAULTLIB:libcmt.lib 现在它在我的代码的第 1 行中给了我一个大约 1000 行长的错误列表。我不知道如何继续。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T22:58:08.730

根据[这个论坛主题](http://forum.thegamecreators.com/?m=forum_view&t=122531&b=22)，您必须进入项目属性 -> C/C++ -> 代码生成 -> 运行时库（正如 Hans 在上面的评论中所说）并将其设置为 /MT，而不是 /MTd。这是因为 DarkGDK 没有提供调试库。

# c# - NotImplementedException 未被用户代码处理

> ID：16198976
> 
> 赞同：-3
> 
> 时间：2013-04-24T17:55:39.110
> 
> 标签：c#, asp.net

我们正在使用 C# 和 ASP.Net 网络表单在 Visual Studio 2010 中创建站点。我们不知道为什么它在在线教程之后出现故障和出错，在修复其他问题后，代码出现了这个错误，我不知道如何修复它或者我做错了什么，如果有人能看到问题，请让我知道。

```
using System;
using System.Collections;
using System.Configuration;
using System.Data.SqlClient;

public class ConnectionClass
{
private SqlConnection conn;
private SqlCommand command;

ConnectionClass()
{
    string connectionString = ConfigurationManager.ConnectionStrings["Connection"].ToString();
    conn = new SqlConnection(connectionString);
    command = new SqlCommand("", conn);
}

private ArrayList GetClothesByType(string ClothesType)
{
    ArrayList list = new ArrayList();
    string query = string.Format("SELECT * FROM fusey WHERE type LIKE '{0}'", ClothesType);

    try
    {
        conn.Open();
        command.CommandText = query;
        SqlDataReader reader = command.ExecuteReader();

        while (reader.Read())
        {
            int id = reader.GetInt32(0);
            string name = reader.GetString(1);
            string type = reader.GetString(2);
            double price = reader.GetDouble(3);
            string size = reader.GetString(4);
            string image = reader.GetString(5);
            string review = reader.GetString(6);

            Fusey fusey = new Fusey(id, name, type, price, size, image, review);
            list.Add(fusey);
        }
    }
    finally
    {
        conn.Close();
    }

    return list;
}

internal static ArrayList GetClothesByType(object ClothesType)
{
    throw new NotImplementedException();
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:04:20.840

我认为您错误地调用了静态方法而不是私有方法。
如果您的意图是调用将字符串作为输入参数的方法，那么您需要将其声明为 public 并创建该类的实例`ConnectionClass`

```
ConnectionClass cs = new ConnectionClass(....);
ArrayList clothes = cs.GetClothesByType("t-shirt"); 
```

但是，让我指出，以这种方式存储连接是一种不好的做法。
DbConnection 是一种宝贵的资源，应该在需要时使用并立即释放。此外，永远不要理所当然地认为您的用户在键盘上键入了什么，然后盲目地将其传递给数据库引擎。
您打开[Sql Injection](https://stackoverflow.com/questions/332365/how-does-the-sql-injection-from-the-bobby-tables-xkcd-comic-work) Attacks 的方式，始终使用参数化查询

```
public ArrayList GetClothesByType(string ClothesType)
{
    ArrayList list = new ArrayList();

    string query = "SELECT * FROM fusey WHERE type LIKE @ctype";
    string connectionString = ConfigurationManager.ConnectionStrings["Connection"].ToString();
    using(SqlConnection conn = new SqlConnection(connectionString))
    using(SqlCommand command = new SqlCommand(query, conn))
    { 
       command.Parameters.AddWithValue("@ctype", ClothesType);
       conn.Open();
       SqlDataReader reader = command.ExecuteReader();
       .....
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T17:57:45.240

你得到一个未实现的异常？那是因为它**没有实现**。

```
internal static ArrayList GetClothesByType(object ClothesType)
{
    throw new NotImplementedException(); // you need to implement this method
} 
```

我在你的代码中没有看到你称之为这个的任何地方，但是你在某个地方，我想当你这样做时，你会得到这个异常。

如果您有兴趣，请[参阅有关 NotImplementedException 的 MSDN 文档](http://msdn.microsoft.com/en-us/library/system.notimplementedexception.aspx)

我还看到你有一个重载`GetClothesByType`- 你可能会混淆方法调用并传入 a`object`而不是 a `string`，导致它调用错误的、未实现的方法。

你能告诉我们你打电话的地方`GetClothesByType`吗？

# scala - F# 的可区分联合与 Scala 的案例类有何不同？还是一样？

> ID：16198979
> 
> 赞同：4
> 
> 时间：2013-04-24T17:55:51.653
> 
> 标签：scala, f#, case-class, discriminated-union

我在网上四处寻找在 scala 中可能类似于或像 F# 可区分联合一样工作的东西，但无论我在哪里看，我都找不到任何东西，除了看起来有点像它的案例类。 . 但是它们到底有什么不同呢？

例如：

```
type Shape =
    | Circle of double
    | Square of double

let area =
    function
    | Circle radius -> 3.1415 * radius * radius
    | Square length -> length * length

let circle = Circle(15.0)
printfn "The circle's area is %A" (area circle) 
```

上面的代码基本上是一个案例类，还是我必须做一些不同的事情才能获得相同的功能？

# android - 未将 HTC Desire C 与 eclipse 连接

> ID：16198980
> 
> 赞同：-1
> 
> 时间：2013-04-24T17:55:55.873
> 
> 标签：android

我在窗口 8 上不断收到此错误。

```
No active compatible AVD's or devices found. Relaunch this configuration after connecting a device or starting an AVD. 
```

我加

```
android:debuggable="true" 
```

在清单文件中并重新启动 adb 但没有工作。

我尝试通过窗口管理器从 <sdk> extras\google\usb_driver 安装谷歌驱动程序，但它没有检测到这些驱动程序。

我还在这个线程的 android_winusb.inf 中添加了一行。 [在我的手机上调试（Eclipse、Android）](https://stackoverflow.com/questions/4038613/debugging-on-my-phone-eclipse-android)

Ronnie Overby 的这些台词回答了。

请告诉我如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:12:02.990

您可以尝试安装同步管理器，驱动程序随之而来： [http ://www.htc.com/www/software/htc-sync-manager/](http://www.htc.com/www/software/htc-sync-manager/)

# java - 继承-为什么我不能在子类中声明一个私有方法在super中具有相同的方法签名？

> ID：16198983
> 
> 赞同：0
> 
> 时间：2013-04-24T17:56:07.723
> 
> 标签：java, inheritance

我的书没有给出最好的解释，我想了解为什么当我在超类中有相同的方法签名时，我不能在子类中有私有方法。除了超类中的方法是公共的。

我试着用谷歌搜索这个答案，我能找到的只是覆盖私有方法的东西。但是，我试图用私有方法覆盖公共方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:00:01.500

通过创建派生方法`private`，您将更改超类制定的合同，防止任何进一步的子类访问原始`public`方法。

传递类型为超类的参数的函数不会事先知道是否允许调用该方法。这会很糟糕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T17:59:55.180

如果可以，那又怎样？您已经用私有方法覆盖了公共方法，这将使超类方法不可见。依靠该方法可用的代码将会中断。OO 的思想之一（称为[Liskov 替换原则](https://stackoverflow.com/a/56904/217324)）是程序应该能够在高级别的操作对象，而不必知道正在使用的确切实现类；任何子类的对象都应该可以替代其超类的对象。能够使超类方法无效会破坏这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T18:02:20.910

根据[Java Language Specification](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.8.3)的第 8.4.8.3 节，在覆盖时不能削弱方法的访问权限，具体而言：

> 覆盖或隐藏方法的访问修饰符（第 6.6 节）必须提供至少与覆盖或隐藏方法一样多的访问权限，如下所示：
> 
> 如果被覆盖或隐藏的方法是公开的，那么覆盖或隐藏的方法必须是公开的；否则，会发生编译时错误。
> 
> 如果被覆盖或隐藏的方法是受保护的，那么覆盖或隐藏的方法必须是受保护的或公开的；否则，会发生编译时错误。
> 
> 如果被覆盖或隐藏的方法具有默认（包）访问权限，则覆盖或隐藏方法不能是私有的；否则，会发生编译时错误。

这样做是为了如果您有对子类对象的超类引用，那么您仍然可以调用该方法，无论它是什么类——超类或任何子类——例如

```
Superclass obj = new Subclass();
obj.method(); 
```

应该还是`public`。

# python - 使用 python 创建客户端和服务器程序以发送 TCP 和 UDP 数据包

> ID：16198985
> 
> 赞同：2
> 
> 时间：2013-04-24T17:56:13.467
> 
> 标签：python, sockets, tcp, udp

如果用户询问他是否想通过 TCP 或 UDP 发送，我必须用 python 编写一个客户端和一个服务器程序。服务器只是发回数据，因为我想知道需要多长时间（RTT）。

服务器如何检测客户端发送 TCP 或 UPD 数据？

这仅用于教育目的，不打算用于生产。

到目前为止，我有以下代码：

客户端.py

```
import socket

numerofpackets = int(raw_input("How many packets should be sent?\n> "))
connectiontype = raw_input("TCP or UDP?\n> ")
hostname = 'localhost'
i = 0

if connectiontype != "TCP" and connectiontype != "UDP":
    print "Input not valid. Either type TCP or UDP"
else:
    if connectiontype == "TCP":
        s = socket.socket(socket.AF_INET, socket.SOCK_STREAM) 
        s.connect((hostname, 50000))

        while i < numerofpackets:
            start_time = time.time()
            s.send('tcp') 
            response = s.recv(1024)
            print time.time() - start_time
            i = i + 1

        s.close()
    elif connectiontype == "UDP":
        s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)

        while i < numerofpackets:
            start_time = time.time()
            s.sendto('udp', (hostname, 50000)) 
            response, serverAddress = s.recvfrom(1024)
            print time.time() - start_time
            i = i + 1

    s.close() 
```

和服务器：

```
#for tcp
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM) 
s.bind(("", 50000)) 
s.listen(1)

while True: 
    komm, addr = s.accept() 
    data = komm.recv(1024)
    komm.send(data) 

s.close()

#for udp
sudp = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)

sudp.bind(("", 50000)) 
while True: 
    daten, addr = sudp.recvfrom(1024)
    s.sendto(daten, addr)

s.close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:10:51.123

服务器必须同时监听 UDP 和 TCP。您可以使用两个服务器进程、线程或使用[select](http://docs.python.org/2/howto/sockets.html)阻塞您的服务器。

# c# - 部分视图刷新和脚本不起作用

> ID：16198987
> 
> 赞同：0
> 
> 时间：2013-04-24T17:56:20.690
> 
> 标签：c#, javascript, jquery, asp.net-mvc-4, partial-views

在我的 C# MVC4 应用程序中，我有一个包含以下两个脚本的局部视图：

```
<script type="text/javascript" charset="utf-8">
    $(document).ready(function () {
        $('.rowselection').click(function (e) {
            var tdata = $('#form1').serialize();
            $.ajax({
                type: "POST",
                data: tdata,
                url: "/Home/PartialAverage",
                success: function (result) { success(result); }
            });
        });

        function success(result) {
            $("#Display_Average").html(result);
        }
    });
</script>
<script type="text/javascript" charset="utf-8">
    $(document).ready(function () {
        if ($('.AVEexists').length) {
            $('#SubmitButton').hide();
        }
    });
</script> 
```

当部分视图被刷新时，第一个脚本仍然可以按需要工作。然而，第二个脚本似乎不起作用，因为在第一次加载局部时正确隐藏的按钮在刷新局部并且不包含任何具有类 .AVE 的元素时不会重新出现

这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:03:07.770

这是你的全部观点吗？或者这些 .AVEexists 元素是否在这个局部视图中？如果提交按钮在您的局部视图之外，您不应该这样做吗

```
$(document).ready(function () {
    if ($('.AVEexists').length) {
        $('#SubmitButton').hide();
    }
    else {
        $('#SubmitButton').show();
    }

}); 
```

在第二个脚本中？

# scala - 具有密封参数的 Scala 方法相关类型

> ID：16198990
> 
> 赞同：1
> 
> 时间：2013-04-24T17:56:25.463
> 
> 标签：scala

可以说我有一些密封的课程

```
sealed abstract class SomeEnumThing {
    type RenderedType
}
object Type1 extends SomeEnumThing {
    type RenderedType = String
}
object Type2 extends SomeEnumThing  {
     type RenderedType = Array[Byte]
} 
```

我想要一个方法根据传入的参数中定义的抽象类型返回，例如

```
def render(something : SomeEnumThing) : something.RenderedType = { .... } 
```

什么是正确的语法。这是否可能，我认为这与 2.10 方法相关类型有关。

编辑：更新示例

```
sealed abstract class SomeThing {
    type RenderedType
}
object Type1 extends SomeThing {
    type RenderedType = String
}
object Type2 extends SomeThing  {
     type RenderedType = Long
}

def render(something : SomeThing) : something.RenderedType = 
  something match {
    case Type1 => "test"
    case Type2 => 0l
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:41:33.953

从结构上讲，您在示例中的内容似乎是正确的，但问题是您将在这些省略号内部做什么来返回`something.RenderedType`. 我将一个快速的 impl 放在一起以检查所有内容是否编译（并且确实如此），但就像我说的，它归结为该渲染函数内部发生的事情。这是我的代码：

```
object RenderedTypeTest {

  def render(something : SomeEnumThing) : something.RenderedType = {
    something.renderType
  }
}

sealed abstract class SomeEnumThing {
    type RenderedType
    def renderType:RenderedType
}
object Type1 extends SomeEnumThing {
    type RenderedType = String
    def renderType = "hello"
}
object Type2 extends SomeEnumThing  {
     type RenderedType = Array[Byte]
     def renderType = Array()
} 
```

# r - RODBC 无法一次向 oracle 表中插入一行记录

> ID：16198992
> 
> 赞同：1
> 
> 时间：2013-04-24T17:56:27.873
> 
> 标签：r, oracle

我需要一次向 oracle 表中插入一行。如果重复，由于PK设置，将不会插入。我需要拒绝将重复行插入到 db 表中。

我正在使用 RODBC 执行此操作，即使在晚上 7:00 之后表格上没有重复值，也无法在晚上 7:00 之后将记录插入到表格中。Dat 数据帧在 7PM 之前和 7PM 之后具有值。但是目标 oracle 表在晚上 7 点之后没有任何值。任何想法，我还能如何实现这一点以确保将值一次插入表中的一行？

```
tryCatch({

  ch=odbcConnect("<id>",pwd = "<password>")
  sqlSave(ch,dat, tablename="<tablename>", rownames=FALSE, append=TRUE, fast=FALSE)
  },error = function(e) {
    print(e)
  })
  odbcClose(ch) 
```

我收到此错误：

```
<simpleError in sqlSave(ch, dat, tablename = "<tablename>", rownames = FALSE,     append = TRUE, fast = FALSE): un
able to append to table '<tablename'> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:33:24.230

我考虑过这个解决方案，但如果速度更快，我可以接受任何其他解决方案。

这就是我一次处理一条记录并插入数据库的方法。如果重复记录，该重复记录将被拒​​绝，R 将继续下一条记录：

```
for (k in 1:nrow(dat)) 
  {

    j<-dat[k,]

         tryCatch({

                  ch=odbcConnect("<id>",pwd = "<password>")
                  sqlSave(ch,j, tablename="<TableName>", rownames=FALSE, append=TRUE)
               },error = function(e) {
          print(e)
             })
}

 odbcClose(ch) 
```

# angularjs - angularjs：在指令模板中设置类属性

> ID：16198995
> 
> 赞同：1
> 
> 时间：2013-04-24T17:56:49.090
> 
> 标签：angularjs, angularjs-directive

我正在尝试设置我的指令的类属性。我就是这样做的：

指令中的相关代码

```
template: '<input class="myClass" />'

scope:{
 myClass = '@'
} 
```

这就是我所说的

```
<my-directive my-class="someClass" /> 
```

不幸的是，什么也没有发生。没有错误，但只是没有设置类。

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T18:07:21.030

myClass 是新隔离范围中的范围变量。你必须写`template: '<input class="{{myClass}}" />`或`template: '<input ng-class="myClass" />`

# macos - 如何更改 OSX 中的文件夹图标？

> ID：16198997
> 
> 赞同：0
> 
> 时间：2013-04-24T17:56:59.313
> 
> 标签：macos, osx-lion, osx-mountain-lion

如何更改桌面上文件夹上的图标。我正在寻找自己如何做到这一点。我找到了答案并将其发布在下面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T17:57:31.223

1.  在预览中打开要用作图标的图像
2.  按“Cmd”+“A”选择整个图像 按“Cmd”+“C”复制图像
3.  右键单击要更改图标的文件夹
4.  选择“获取信息”单击此窗口右上角的当前图标
5.  按 'Cmd' + 'V' 粘贴并替换它

现在应该更改图标。