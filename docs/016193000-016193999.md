# StackOverflow 问答 16193000-16193999

# ruby-on-rails - 将 Rails form_for 路由到自定义控制器的语法

> ID：16193000
> 
> 赞同：6
> 
> 时间：2013-04-24T13:14:15.433
> 
> 标签：ruby-on-rails, controller, form-for

尝试过论坛、文档和博客建议。他们收敛于对我来说无法正确保存并通过所需控制器路由的语法。

大局，我有两个共享功能的软件应用程序。为了实现共享功能，我让 Rails 生成 Shared::Widgets。这个 MVC 工作得很好。使用标准共享/小部件等路由查看、更新、创建或删除没有问题。

然后，对于特定于产品的功能，我创建了两个控制器：Product1::Widgets 和 Product2::Widgets。两者都继承自 Shared::Widgets 控制器。除了产品特定的布局外，两者都是空的。

这个方案几乎行得通。当我路由到 product1/widgets 时，它会将 layout 设置为 product1 并调用 shared/widgets 的 index 方法。结果是使用 product1 布局显示 shared/widgets/index.html.erb。同样，当我路由到 product2/widgets 时，这会设置 product2 布局并调用 shared/widgets 的 index 方法。结果是使用 product2 布局显示 shared/widgets/index.html.erb。完美的。

但现在我们到了form_for。因为它实现了 rails 魔法，它真的很想直接路由到 Shared::Widgets 控制器。但这不是我想要的。我希望它路由到适当的产品控制器以设置布局。rails 生成的 form_for 是这样的：

```
form_for(@shared_widget, :html => { :class => "form"}) do |f| 
```

我试过了：

```
form_for([:product1, @widget], :html => { :class => "form"}) do |f| 
```

但这会重复命名空间（product1_widget_shared_widget_path）。

我尝试了以下三种格式，似乎都正确路由，并保存记录，但记录为空（列为空白）：

```
form_for(@widget, url => "product1/widget", :html => { :class => "form"}) do |f| 

form_for(@widget, url => url_for(:controller => "widget"), :html => { :class => "form"}) do |f| 

form_for(@widget, url => url_for(:controller => "widget", :action => "create"), :html => { :class => "form"}) do |f| 
```

有什么帮助吗？如果上面的代码有拼写错误，那是由于转录造成的。我使用的实际代码通过了解释器。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-02T16:17:58.023

尝试这个

```
form_for(url: { controller: "posts", action: "create" }, html => { :class => "form" }, method: "post") do |f| 
```

# photosphere - 如何打开光球相机？

> ID：16193002
> 
> 赞同：6
> 
> 时间：2013-04-24T13:14:17.510
> 
> 标签：photosphere

Android API 我们不必在光球模式下打开相机。当我们打开普通相机时，如何在相机选项中显示光球模式选项。

要打开普通相机，我使用了以下意图：

1）意图意图=新意图（MediaStore.ACTION_IMAGE_CAPTURE）；

startActivityForResult（意图，CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE）；

2）意图意图=新意图（android.provider.MediaStore.ACTION_IMAGE_CAPTURE）；

startActivityForResult（意图，CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE）；

3）意图意图=新意图（“android.media.action.IMAGE_CAPTURE”）；

startActivityForResult（意图，CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE）；

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-29T00:21:46.523

不幸的是，现在无法直接在 Photo Sphere 模式下打开相机，但考虑到足够的兴趣，我认为我们应该添加它。

# html - 在配备 Retina 的 Mac Book Pro 上为非 Retina 显示器创建标记

> ID：16193010
> 
> 赞同：1
> 
> 时间：2013-04-24T13:14:39.970
> 
> 标签：html, sass, compass-sass, retina-display

我刚买了一台配备 Retina 显示屏的 Mac Book Pro，因为我必须为它优化网站上的图形。我正在用指南针生成两个精灵，其中一个是双倍大小的。

所以我想知道如何在 Retina 显示器上查看网站，但避免媒体查询，没有双倍尺寸的图像，你明白我的意思吗？

最简单的方法是什么？我应该改变分辨率还是只禁用媒体查询来看看？

# objective-c - NSTextField 可访问性 - 如何为画外音提供替代文本

> ID：16193012
> 
> 赞同：4
> 
> 时间：2013-04-24T13:14:41.800
> 
> 标签：objective-c, accessibility, nstextfield, appkit

这可能很明显，但是我以前从未使用 NSAccessibility 做过任何工作，所以我假设我所问的是我忽略的一些简单的事情。

我有一个 NSTextField 显示这样的持续时间，15:39。此文本字段是基于视图的 NSTableView 中 NSTableCellView 的子视图。

启用 VoiceOver 后，它当前会显示“一五，三九”，这似乎完全没用。相反，我希望它说“持续时间是 15 分 39 秒”。

我可以生成所需的字符串，但我无法弄清楚我必须设置哪些可访问性属性才能实现这一点。

我尝试在 IB 中设置可访问性描述，但没有效果（无论是在 NSTextField 还是 NSTextFieldCell 上设置）。

我还尝试覆盖**accessibilityValue：**和**accessibilityAttributeValue：forParameter：**以便为以下内容提供自定义属性值：

*   NSAccessibilityNumberOfCharactersAttribute
*   NSAccessibilityStringForRangeParameterizedAttribute
*   NSAccessibilityAttributedStringForRangeParameterizedAttribute
*   NSAccessibilityStringForRangeParameterizedAttribute。

这似乎是正确的轨道，因为这确实允许我替换通过配音大声朗读的内容，但是，为 NSAccessibilityVisibleCharacterRangeAttribute 提供与“15:39”字符串的长度不匹配的任何 NSRange 会导致配音完全跳过当读取 NSTableCellView 的内容时这个字段。所以，我能做的最好的就是让旁白说“Durat”，而不是读出“15:39”:(

我尝试过的一切，我都尝试过 NSTextField 和 NSTextFieldCell。

理想情况下，我更愿意做我在 iOS 中所做的事情，只设置 NSTableCellView 的accessibilityLabel，但我认为在 AppKit 中没有合理的方法可以做到这一点。希望我只是错过了一些东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-12-24T11:47:44.397

我可以通过设置[`accessibilityValueDescription`](https://developer.apple.com/documentation/appkit/nsaccessibility/1535113-accessibilityvaluedescription?language=objc)NSTextField 来实现这一点。此方法是 OS X 10.10 及更高版本上新的辅助功能 API 的一部分。使用较旧的 API，您也许可以使用`kAXValueDescriptionAttribute`来实现相同的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-27T15:18:19.240

覆盖 Voice Over 阅读的文本的解决方案比我想象的要简单得多。我所要做的就是覆盖为 NSAccessibilityAttributedStringForRangeParameterizedAttribute 返回的值：

```
// The displayed text for this text field is "45m".
// The voice over for this field incorrectly reads "forty five meters" instead of "forty five minutes".  
// The following forces it to read "Duration forty five minutes"

-(id)accessibilityAttributeValue:(NSString *)attribute forParameter:(id)parameter {
return ([attribute isEqualToString:NSAccessibilityAttributedStringForRangeParameterizedAttribute])
        ? [[NSAttributedString alloc] initWithString:@"Duration: 45min"];
        : [super accessibilityAttributeValue:attribute forParameter:parameter];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T00:27:39.507

我相信我已经回答了自己的问题，至少足以控制单击表格单元格视图时读取的内容。

通过覆盖**accessibilityIsIgnored**以在我的NSTableCellView 子类中返回“NO”，我能够通过覆盖单元格的NSAccessibilityTitleAttribute 来准确指定我想要为表格单元格读取的内容。在 b/c 之前我没有尝试过这个，我误解了**accessibilityIsIgnored**选择器的目的。

从**accessibilityIsIgnored**的文档中：

> 当询问一个对象的孩子时，不应该包括被忽略的孩子；相反，**被忽略的孩子应该被他们自己的未被忽略的孩子所取代**。

我希望能够准确控制将来读取各个 NSTextField 的内容，但控制整个 NSTableCellView 读取的内容实际上对于我的特定情况是理想的。

# c# - wp7 无法从后台工作人员获取当前页面

> ID：16193013
> 
> 赞同：0
> 
> 时间：2013-04-24T13:14:42.523
> 
> 标签：c#, windows-phone-7, backgroundworker

不幸的是，在windows phone 7中没有android中的“广播接收器”概念，所以我正在尝试做类似的事情。

在我的应用程序中，我运行一个调用函数的后台工作程序，完成后我必须刷新页面中的一些数据。我不知道完成时所需的页面是否是当前页面，所以我必须进行测试。我在某个论坛找到了这段代码：

```
var frame = Application.Current.RootVisual as PhoneApplicationFrame;
var startPage = frame.Content as PhoneApplicationPage; 
```

这在运行时给了我一个“ `System.UnauthorizedAccessException`”异常。事实上，访问所有 Application.Current 属性会产生相同的异常。我想了解的是，如果我无法从后台工作人员或线程访问当前页面，为什么我仍然需要它？如果我在主 UI 线程中，我知道我站在哪个页面正确？我在这里错过了什么吗？

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T14:59:37.720

您只能`Application.Current`从 UI 线程访问。从后台线程使用`Dispatcher.BeginInvoke`将执行委托给 UI 线程：

```
Deployment.Current.Dispatcher.BeginInvoke(() => 
{
    // Your code needing Application.Current
}); 
```

# c# - 分隔符分隔的字符串到 TreeView C#

> ID：16193015
> 
> 赞同：3
> 
> 时间：2013-04-24T13:14:45.893
> 
> 标签：c#, treeview, delimiter, treenode

我有一个像这样的输入流：

```
John
Peter
Vanesa
Vanesa.New
Josh
Josh.New
Josh.New.Under
... 
```

我需要像这样将节点添加到 TreeView Someting：

```
+Customers
   +John
   +Peter
   +Vanesa
      +New
   +Josh
      +New
         +Under
 ... 
```

我有一个想法用参数'。'分割每个字符串，但我遇到了动态加载节点的问题。也许我必须使用某种 foreach ......

我有带有记录 id 和 GroupName 的旧数据库表“组”。都充满了这些字符串。我需要创建某种“地址”，例如：John.Element 或 Vanesa.New.Element 或 Josh.New.Under.Element，其中 Element 是从其他数据表中记录的。DB连接不是问题，问题是动态填充树

现在我已经完成了添加不包含“。”的字符串：

```
 reader = readGroups.ExecuteNonQuery();
    while(reader.Read())
    {
        string[] buff = reader.GetValue(1).ToString().Split('.');
        if (buff.Length == 1)
        {
            treeView1.Nodes[0].Nodes.Add(reader.GetValue(1));
        }
        else
        {
            //group contains '.'
        }
    } 
```

编辑：我还有一个问题。有这样的记录：John, John.New, John.Old, John.Older, John.Oldest ... 所以当AddNodes() 方法运行时，方法末尾的foreach 会清除John.New, John。 Old, John.Older 节点，但他们必须进入树节点 John。如果你有什么想法...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T15:50:41.760

对于winforms，这是您需要的。我正在使用递归在每个父节点中添加每个子节点。我已经进行了更改，以便它在开始将任何节点添加到实际树视图之前创建一个唯一节点列表

```
 internal class TreeNodeHierachy
    {
        public int Level { get; set; }
        public TreeNode Node { get; set; }
        public Guid Id { get; set; }
        public Guid ParentId { get; set; }
        public string RootText { get; set; }
    }

    private List<TreeNodeHierachy> overAllNodeList; 

    private void AddNodes(IEnumerable<string> data)
    {
        overAllNodeList = new List<TreeNodeHierachy>();
        foreach (var item in data)
        {
            var nodeList = new List<TreeNodeHierachy>();
            var split = item.Split('.');
            for (var i = 0; i < split.Count(); i++)
            {
                var guid = Guid.NewGuid();
                var parent = i == 0 ? null : nodeList.First(n => n.Level == i - 1);
                var root = i == 0 ? null : nodeList.First(n => n.Level == 0);
                nodeList.Add(new TreeNodeHierachy
                    {
                        Level = i,
                        Node = new TreeNode(split[i]) { Tag = guid },
                        Id = guid,
                        ParentId = parent != null ? parent.Id : Guid.Empty,
                        RootText = root != null ? root.RootText : split[i]
                    });
            }

            // figure out dups here
            if (!overAllNodeList.Any())
            {
                overAllNodeList.AddRange(nodeList);
            }
            else
            {
                nodeList = nodeList.OrderBy(x => x.Level).ToList();
                for (var i = 0; i < nodeList.Count; i++)
                {

                    var existingNode = overAllNodeList.FirstOrDefault(
                        n => n.Node.Text == nodeList[i].Node.Text && n.Level == nodeList[i].Level && n.RootText == nodeList[i].RootText);
                    if (existingNode != null && (i + 1) < nodeList.Count)
                    {

                        nodeList[i + 1].ParentId = existingNode.Id;
                    }
                    else
                    {
                        overAllNodeList.Add(nodeList[i]);
                    }
                }
            }
        }

        foreach (var treeNodeHierachy in overAllNodeList.Where(x => x.Level == 0))
        {
            treeView1.Nodes.Add(AddChildNodes(treeNodeHierachy));
        }
    }

    private TreeNode AddChildNodes(TreeNodeHierachy node)
    {
        var treeNode = node.Node;
        foreach (var treeNodeHierachy in overAllNodeList.Where(n => n.ParentId == node.Id))
        {
            treeNode.Nodes.Add(AddChildNodes(treeNodeHierachy));
        }
        return treeNode;
    }

    /// <summary>
    /// Handles the Click event of the button1 control.
    /// </summary>
    /// <param name="sender">The source of the event.</param>
    /// <param name="e">The <see cref="System.EventArgs"/> instance containing the event data.</param>
    private void button1_Click(object sender, EventArgs e)
    {
        //SearchActiveDirectoryWithCriteria("(mailnickname=TM418)");

        var test = new List<string>
            {
                "John",
                "Peter",
                "Vanesa",
                "Vanesa.New",
                "Josh",
                "Josh.New",
                "Josh.New.Under",
                "Josh.Old"
            };

        AddNodes(test);           
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T13:43:22.710

这可能主要做你想做的事，你还需要一些带有 TreeView 的 xaml，称为`treeView`：

```
 public TreeViewItem root;

    public MainWindow()
    {
        InitializeComponent();

        root = new TreeViewItem
        {
            Header = "Customers"
        };

        treeView.Items.Add(root);

        addNode("John");
        addNode("Peter");
        addNode("Vanesa.New");
        addNode("Josh");
        addNode("Josh.New");
        addNode("Josh.New.Under");
    }

    private void addNode(string values)
    {
        var n = root;

        foreach (var val in values.Split('.'))
        {
            var isNew = true;

            foreach (var existingNode in n.Items)
            {
                if (((TreeViewItem)existingNode).Header.ToString() == val)
                {
                    n = (TreeViewItem)existingNode;
                    isNew = false;
                }
            }

            if (isNew)
            {
                var newNode = new TreeViewItem
                {
                    Header = val
                };

                n.Items.Add(newNode);

                n = newNode;
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-31T16:51:35.323

回复@charles380 解决方案：我已更新代码以使用 WPF .Net Core 树视图。

```
public class TreeNodeHierarchy
    {
        public int Level { get; set; }
        public TreeViewItem Node { get; set; }
        public Guid Id { get; set; }
        public Guid ParentId { get; set; }
        public string RootText { get; set; }
    }
    public class TreeManager{

        public List<TreeNodeHierarchy> overAllNodeList;

        public void AddNodes(IEnumerable<string> data, ref TreeView treeView1)
        {
            overAllNodeList = new List<TreeNodeHierarchy>();
            foreach (var item in data)
            {
                //\test
                var nodeList = new List<TreeNodeHierarchy>();
                var split = item.Split('.', StringSplitOptions.RemoveEmptyEntries);
                for (var i = 0; i < split.Count(); i++)
                {
                    var guid = Guid.NewGuid();
                    var parent = i == 0 ? null : nodeList.First(n => n.Level == i - 1);
                    var root = i == 0 ? null : nodeList.First(n => n.Level == 0);
                    nodeList.Add(new TreeNodeHierarchy
                    {
                        Level = i,
                        Node = new TreeViewItem { Header = split[i],   Tag = guid },
                        Id = guid,
                        ParentId = parent != null ? parent.Id : Guid.Empty,
                        RootText = root != null ? root.RootText : split[i]
                    });
                }

                // figure out dups here
                if (!overAllNodeList.Any())
                {
                    overAllNodeList.AddRange(nodeList);
                }
                else
                {
                    nodeList = nodeList.OrderBy(x => x.Level).ToList();
                    for (var i = 0; i < nodeList.Count; i++)
                    {

                        var existingNode = overAllNodeList.FirstOrDefault(
                            n => n.Node.Header.ToString() == nodeList[i].Node.Header.ToString() && n.Level == nodeList[i].Level && n.RootText == nodeList[i].RootText);

                        if (existingNode != null && (i + 1) < nodeList.Count)
                        {

                            nodeList[i + 1].ParentId = existingNode.Id;
                        }
                        else
                        {
                            overAllNodeList.Add(nodeList[i]);
                        }
                    }
                }
            }

            foreach (var treeNodeHierachy in overAllNodeList.Where(x => x.Level == 0))
            {
                treeView1.Items.Add(AddChildNodes(treeNodeHierachy));
            }
        }

        private TreeViewItem AddChildNodes(TreeNodeHierarchy node)
        {
            var treeNode = node.Node;
            foreach (var treeNodeHierachy in overAllNodeList.Where(n => n.ParentId == node.Id))
            {
                treeNode.Items.Add(AddChildNodes(treeNodeHierachy));
            }
            return treeNode;
        }
    }
} 
```

示例调用代码：

```
 var lstFolders= new List<string>
            {
                "John",
                "Peter",
                "Vanesa",
                "Vanesa.New",
                "Josh",
                "Josh.New",
                "Josh.New.Under",
                "Josh.Old"
            };
TreeManager treeManager = new TreeManager();
treeManager.AddNodes(lstFolders, ref tr); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-07T18:55:39.080

我有同样的问题。我以这种方式解决了这个问题：

定义一个实现树的类：

```
class TreeBuilder
{
    public int index,depth;
    public string text;
    public Dictionary<string,TreeBuilder> childs;
    public void addToTreeVeiw(System.Windows.Forms.TreeNode root, TreeBuilder tb) {
        foreach (string key in tb.childs.Keys) {
            System.Windows.Forms.TreeNode t = root.Nodes.Add(tb.childs[key].text);
            addToTreeVeiw(t, tb.childs[key]);

        }
    }
} 
```

主要部分：

```
string[] lis = {"a","b","a.a","a.ab","c","cc.a","a.b.dd","samad.hah.hoh"};
            treeView1.Nodes.Clear();
            TreeBuilder Troot = new TreeBuilder();
            TreeBuilder son;
            Troot.depth = 0;
            Troot.index = 0;
            Troot.text = "root";
            Troot.childs = new Dictionary<string, TreeBuilder>();

            foreach (string str in lis)
            {
                string[] seperated = str.Split('.');
                son = Troot;
                int index= 0;
                for (int depth = 0; depth < seperated.Length; depth++)
                {
                    if (son.childs.ContainsKey(seperated[depth]))
                    {
                        son = son.childs[seperated[depth]];
                    }
                    else {
                        son.childs.Add(seperated[depth],new TreeBuilder());
                        son = son.childs[seperated[depth]];
                        son.index= ++index;
                        son.depth = depth+1;
                        son.text = seperated[depth];
                        son.childs = new Dictionary<string, TreeBuilder>();
                    }
                }
            }
            treeView1.Nodes.Add("root");
            Troot.addToTreeVeiw(treeView1.Nodes[0], Troot); 
```

我想结果就是你想要的：

[![在此处输入图像描述](https://i.stack.imgur.com/HEhZo.png)](https://i.stack.imgur.com/HEhZo.png)

# asp.net - 上传、重命名和调整图像大小时出现 ASP.NET 错误

> ID：16193024
> 
> 赞同：0
> 
> 时间：2013-04-24T13:15:10.677
> 
> 标签：asp.net, file-upload, image-resizing, file-rename

下午，我正在尝试使用 asp.net FileUpload 控件上传文件。在保存图像之前，我需要使用用户 GUID 重命名文件，然后将图像大小调整为 128 像素。

但是，当它进行保存时，我收到错误**GDI+ 中发生一般错误。**我不知道如何排序。

有人可以查看我的代码并提供一些指导吗

```
protected void btnUpload_Click(object sender, EventArgs e)
    {
        Guid userGuid = (Guid)Membership.GetUser().ProviderUserKey; 

        string directory = Server.MapPath("imgs/users");
        string fileExt = Path.GetExtension(fuSample.PostedFile.FileName);
        string fileName = userGuid + fileExt;

        //Check File ext, make sure its an image!
        if (fileExt == ".jpeg" || fileExt == ".jpg" || fileExt == ".png" || fileExt == ".gif")
        {
            //Now we check to make sure its less than 600kb
            if (fuSample.PostedFile.ContentLength < 614400)
            {
                //Delete an existing file.
                if (File.Exists(directory + fileName))
                    File.Delete(directory + fileName);

                // Create a bitmap of the content of the fileUpload control in memory
                Bitmap originalBMP = new Bitmap(fuSample.FileContent);

                // Calculate the new image dimensions
                int origWidth = originalBMP.Width;
                int origHeight = originalBMP.Height;
                int sngRatio = origWidth / origHeight;
                int newWidth = 128;
                int newHeight = newWidth / sngRatio;

                // Create a new bitmap which will hold the previous resized bitmap
                Bitmap newBMP = new Bitmap(originalBMP, newWidth, newHeight);
                // Create a graphic based on the new bitmap
                Graphics oGraphics = Graphics.FromImage(newBMP);

                // Set the properties for the new graphic file
                oGraphics.SmoothingMode = SmoothingMode.AntiAlias; oGraphics.InterpolationMode = InterpolationMode.HighQualityBicubic;
                // Draw the new graphic based on the resized bitmap
                oGraphics.DrawImage(originalBMP, 0, 0, newWidth, newHeight);

                // Save the new graphic file to the server
                newBMP.Save(directory + fileName);

                // Once finished with the bitmap objects, we deallocate them.
                originalBMP.Dispose();
                newBMP.Dispose();
                oGraphics.Dispose();

                //Success! 

            }
            else
            {
                //error here, img too big
            }
        }
        else
        {
            notifybar.Attributes.Add("style", "display:block;");
            notifybar.Attributes.Add("class", "failed");
            notifyText.Text = "Valid Image files only please! (.png, .jpg, .jpeg, or .gif)";
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T14:57:57.287

It could be something as simple as a file overwrite conflict. There are many dangerous bugs in this code, however, and it's not using RAM very efficiently.

I would suggest a different approach (using the `ImageResizer` NuGet package):

```
var j = new ImageJob(fuSample,"~/imgs/users/<guid>.<ext>", 
  new ResizeSettings("maxwidth=128;maxheight=128"));
j.Build();
string imageUrl = PathUtils.GuessVirtualPath(j.FinalPath) 
```

# php - 如何在 php 中获得 getop() 的高级用法，如 python argparse

> ID：16193034
> 
> 赞同：2
> 
> 时间：2013-04-24T13:15:43.900
> 
> 标签：php, python, argparse, getopt

我通常[在 Python 中使用 argparse 模块](http://docs.python.org/3.4/library/argparse.html)来检测选项/参数、打印使用等。我试图在 PHP 中从本机代码或使用一些轻量级库/框架获得相同的结果，而无需编写大量的换行。

根据我的研究，我刚刚发现[getop() 的原生 PHP 实现](http://php.net/manual/es/function.getopt.php)，它与[getop() 的 C 实现](http://linux.die.net/man/3/getopt)非常相似，并且作为某些用途的框架非常有限（独占选项、前缀选项、参数冲突处理程序、选择，元变量等）。我想找到一种简单的方法来在 PHP 中获得相同的结果，而无需使用 raw `argv`、[重新发明轮子](http://framework.zend.com/manual/en/zend.console.getopt.rules.html)或实现“[另一个改进](http://pear.php.net/package/Console_CommandLine)的 getop() 库”来解​​析参数。

这是`argparse`示例在 Python 中的外观：

```
from argparse import ArgumentParser, ONE_OR_MORE, ArgumentDefaultsHelpFormatter

__version__ = '3.14'
description = 'some description'

parser = ArgumentParser(
                         prog                  = 'someprogram',
                         description           = description,
                         epilog                = None,
                         parents               = [],
                         formatter_class       = ArgumentDefaultsHelpFormatter,
                         prefix_chars          = '-',
                         fromfile_prefix_chars = None,
                         argument_default      = None,
                         conflict_handler      = 'error',
                         add_help              = True,
                        )

parser.add_argument('-o', '--output',
                    action         = 'store',
                    metavar        = '/path/to/output',
                    dest           = 'output',
                    choices       = None,
                    help           = 'Set the output directory')

parser.add_argument('-q', '--quiet',
                    action         = 'store_true',
                    dest           = 'quiet', 
                    default        = False,
                    help           = 'Don\'t print status messages to stdout')

parser.add_argument(option_strings = ['FILES'], 
                    metavar        = 'FILES', 
                    nargs          = ONE_OR_MORE,
                    type=str,
                    dest           = 'FILES',
                    help           = 'One or more files to process')

parser.add_argument('-v', '--version', 
                    action  ='version',
                    version ='%(prog)s {version}'.format(version = __version__),
                    help    = 'Shows the program version')

args = parser.parse_args() 
```

在 PHP 中，您可以转换相同的行为，但您需要很多行来完全模拟 Python 之类的参数解析器。

PS：请不要把这个问题当作python vs php，我可能是相同的ruby vs php、java vs php或其他。它只是关于如何使用本机库以另一种不同的语言很好地和高效地移植代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T16:35:47.943

我刚刚发现了一个与 python argparse 库几乎相似的东西。[php 库 Getopt.PHP](https://github.com/ulrichsg/getopt-php)在argparse 中部分模拟具有多个功能和相同行为的解析器。

例如`add_options()`~=`addOptions()`带有位置或必需参数的方法、自动使用生成、检索值、错误处理等。

目前，它仍然需要一些更高级的功能，如冲突处理程序、选择或元变量、仅解析已知值、参数排除、nargs 等。但我可以轻松扩展或将其用作良好的实现基础开始。

我的问题中的 Python 示例代码几乎可以翻译（缺少功能）为：

```
$getopt = new Getopt;
$getopt->addOptions(array(
    array('o', 'output', Getopt::OPTIONAL_ARGUMENT, 'Set the output directory'),
    array('q', 'quiet', Getopt::OPTIONAL_ARGUMENT, 'Don\'t print status messages to stdout'),
    array('v', 'version', Getopt::OPTIONAL_ARGUMENT, 'Shows the program version'),
    array('FILES', NULL, Getopt::REQUIRED_ARGUMENT),
));

$getopt->parse(); 
```

# c# - 无法获取我的应用程序的应用程序页面 (100)

> ID：16193035
> 
> 赞同：0
> 
> 时间：2013-04-24T13:15:45.250
> 
> 标签：c#, facebook, facebook-graph-api, facebook-c#-sdk

我的应用程序有 3 个与之关联的页面。这是他们的身份证：

*   151500351683665（社区页面）
*   143448712494935（社区页面）
*   563925353640654（申请页面）

使用 facebook C# SDK，我正在尝试使用以下 url 格式在这些页面上执行 GET：

```
graph.facebook.com/{pageId} 
```

*   [http://graph.facebook.com/563925353640654](http://graph.facebook.com/563925353640654) -> 错误
*   [http://graph.facebook.com/143448712494935](http://graph.facebook.com/143448712494935) -> 好的
*   [http://graph.facebook.com/151500351683665](http://graph.facebook.com/151500351683665) -> 好的

我在社区页面上是成功的，但是在尝试以这种方式访问​​应用程序页面时，我收到了一个不受支持的 GET 请求 (100)。我不确定最近发生了什么，整个事情都没有传递任何访问令牌，因为我认为这是公共信息：/

有任何想法吗？

注意：直到最近，我才能够在没有任何访问令牌的情况下发出上述 GET 请求——因为我相信我正在访问公共信息。只是无法访问单个页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:22:14.037

[从这个 SO 线程](https://stackoverflow.com/questions/13739609/unsupported-get-request-in-facebook-graph-api)复制答案

```
This error occures due to several problems in the permissions of your page

1\. Go to edit page->manage permission

Check Age restrictions: 13+

2\. Go to basic information -> Start Type:: set to launched 
```

# ios - 一对多关系中的 NSFetchedResultsController

> ID：16193038
> 
> 赞同：0
> 
> 时间：2013-04-24T13:15:49.673
> 
> 标签：ios, core-data

我有这个一对多的关系实体。An`NSFetchedResultsController`用于表格视图以显示团队列表。这部分我理解并且工作正常。现在在这个团队表视图中，如果选择一个团队，另一个表视图将显示成员列表。

目前我使用一个数组来保存成员集中的对象，如下所示：

```
NSArray *membersList = [NSArray arrayWithArray:[aTeam.members allObjects]]; 
```

但是我不清楚第二阶段。我是否需要`NSFetchedResultsController`使用选定的团队名称作为成员列表表视图的获取谓词而不是像上面那样扩展故障？

![在此处输入图像描述](https://i.stack.imgur.com/5pmaV.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:13:01.873

如果你喜欢跟踪那些项目（成员）的变化，或者数据集非常大，你应该使用 FRC。
如果您的数据不是从外部源更新的，并且相对“小”，您可以使用该关系作为您的数据源。

FRC 可让您跟踪更改并以有效的方式访问您的数据（根据需要进行故障和非故障对象，批量获取......）。

# opengl - imageStore() 不适用于 AMD 硬件 (OpenGL 4.2)

> ID：16193043
> 
> 赞同：0
> 
> 时间：2013-04-24T13:16:01.393
> 
> 标签：opengl, glsl, shader

我在 Nvidia 硬件上尝试了这段代码没有任何问题，但在 AMD 上，imageStore() 函数似乎没有做任何事情（虽然没有抛出 GL 错误，但我检查了）

**着色器：**

```
#extension GL_EXT_shader_image_load_store : require

layout(size4x32) uniform image2D A;
void main(void){
    vec4 output = vec4(0.111, 0.222 , 0.333, 0.444);
    imageStore(A, ivec2(gl_FragCoord.xy-vec2(0.5,0.5)), output);
} 
```

**调用程序：**

```
glUseProgram(program);
glUniform1i(glGetUniformLocation (program , "A" ), id);

glBindImageTexture(id, texture, 0, GL_FALSE, 0, GL_WRITE_ONLY, GL_RGBA32F);

//Bind the fbo associated with the texture to run a shader per pixel
glBindFramebuffer(GL_FRAMEBUFFER, fbo);
glViewport(0, 0, width, height);
glDrawBuffer(GL_NONE);  //Forbid gl_FragColor to be modified

//Render a quad
draw();

//Then read the texture... 
```

正如 Nicol Bolas 在另一个线程中所建议的那样（[imageStore() 出现问题（OpenGL 4.3）](https://stackoverflow.com/questions/14285849/trouble-with-imagestore-opengl-4-3)），我尝试添加一些障碍，以确保当我读回纹理但没有更改时写入内存，imageStore 的纹理应该写入未修改。

```
void main(void){
   vec4 output = vec4(0.111, 0.222 , 0.333, 0.444);
   memoryBarrier();
   imageStore(A, ivec2(gl_FragCoord.xy), output);
   memoryBarrier();
} 
```

在主程序中：

```
...
draw();
glMemoryBarrierEXT(GL_ALL_BARRIER_BITS);
... 
```

另一方面，如果我删除 glDrawBuffer(GL_NONE) 以简单地使用 gl_FragColor 输出我的值，它会像往常一样工作：

```
void main(void){
   gl_FragColor = vec4(0.111, 0.222 , 0.333, 0.444);
} 
```

但我真的需要用 imageStore 来做，因为我想使用分散写入。我也尝试使用 imageLoad 并且没有任何问题。这个 imageStore 函数发生了什么？

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T07:32:12.053

我的 AMD 卡可能和你有同样的问题。然后我查看了 OpenGL 示例包的源代码：[http ://www.g-truc.net/project-0026.html#menu](http://www.g-truc.net/project-0026.html#menu)

在研究这个与 imageStore 相关的源代码时，我发现为纹理添加以下两行使我的代码适用于 AMD（java 中的代码）

gl.glTexParameteri(GL2.GL_TEXTURE_2D, GL2.GL_TEXTURE_MIN_FILTER, GL2.GL_NEAREST); gl.glTexParameteri(GL2.GL_TEXTURE_2D, GL2.GL_TEXTURE_MAG_FILTER, GL2.GL_NEAREST);

如果它不适合您，只需将您的代码与 OpenGL 示例包进行比较即可找到更多信息。

# php - 如何在 PHP 中将整数转换为字符

> ID：16193046
> 
> 赞同：2
> 
> 时间：2013-04-24T13:16:06.440
> 
> 标签：php

有人可以帮我创建一个函数来将整数转换为 PHP 中的字符，如下所示：

```
'A' => 0,
'B' => 1,
'C' => 2,
'D' => 3,
'E' => 4,
'F' => 5,
'G' => 6,
'H' => 7,
'I' => 8,
'J' => 9 
```

如果数字是 100，那么它应该生成 BAA。

A、B、C……只是一个例子。我正在尝试用代码加密数字。

我需要这个来处理一些像这样的词

```
0 => zero
1 => one 
```

ETC

但是当我给数字 10 时，它应该输出`onezero`.

提前致谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-24T13:18:14.053

像这样简单尝试

```
 $letter = chr($i+65);
    echo $letter; 
```

给出'A'

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T13:18:19.383

这可能对您有用：

```
$numarr=array('A' => 0, 'B' => 1, 'C' => 2);
$narr = array_flip($numarr);

$num = 100;
$arr = str_split($num);

$str = '';
foreach($arr as $s)
   $str .= $narr[$s];
echo $str . "\n"; //BAA 
```

### 现场演示：http: [//ideone.com/3XqoZ7](http://ideone.com/3XqoZ7)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T13:29:39.797

```
<?php
$list=array('A' => 0,
'B' => 1,
'C' => 2,
'D' => 3,
'E' => 4,
'F' => 5,
'G' => 6,
'H' => 7,
'I' => 8,
'J' => 9);
 $num=1234; //your value
 $temp='';
 $arr_num=str_split ($num);
foreach($arr_num as $data)
{
$temp.=array_search($data,$list);
}
$num=$temp;
echo $num; // here we get BCDE
?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T13:37:02.023

```
<?php
$number = 100;
$len = strlen($number);
for($i=0;$i<$len;$i++) {
    echo printAlphabet(substr($number,$i,1));
}
function printAlphabet($pos) {
    $letter = chr($pos+65);
    return $letter;
}
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T13:22:22.337

如果我正确理解你想要做什么，有一个函数可以返回字母在字母表中的位置，你可以这样做：

```
<?php
    function chartonumber($char) {
        return ord(strtolower($char)) - 96;
    }
    echo chartonumber('A')."\n";
    echo chartonumber('b')."\n";
    echo chartonumber('E')."\n";
?> 
```

这将打印：

```
1
2
5 
```

分别是字母A、b、E的位置。

它是如何工作的： - 它确保使字母小写。- 它将其转换为 ascii int。- 减去前面的 96 个 ascii 表字符。

玩得开心 ：）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-18T18:19:16.193

我创建了一个抽象函数：

```
 private function getCoordinates($row, $col){
            $letter = $this->getLetter($col);
            return $letter.$row;
    }

    private function getLetter($col){
            // 64+1 = 65 ==>> "A"
            $letter = '';
            if ($col<=26){
                    $letter = chr(64+$col);
            } else {
                    $newCol = intdiv($col, 26);
                    $resCol = ($col % 26);
                    $letter = $this->getLetter($newCol).chr(64+$resCol);
            }
            return $letter;
    }

TEST:
la letra para fila:7 y columna:1 es : A7
la letra para fila:7 y columna:26 es : Z7
la letra para fila:7 y columna:27 es : AA7
la letra para fila:7 y columna:23455756 es : AYHMVL7 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-04-24T13:21:00.473

```
<?php
$stack = array("A", "B");
array_push($stack, "C", "D", "E", "F", "G", "H","I","J");
print_r($stack);
?> 
```

# ms-access - Access 中的 IIf 函数；建立层次结构

> ID：16193051
> 
> 赞同：2
> 
> 时间：2013-04-24T13:16:30.310
> 
> 标签：ms-access

我找到了一些与我的情况相似的答案，但我似乎无法适应它们。

我有一个表格，人们可以在其中输入发货人或销售人号码（两个不同的列），然后进行注释。两种类型中只有少数几个有注释，但所有记录都需要作为更大查询的一部分返回。我想建立关于笔记的层次结构。基本上：

1.  如果 Sold to 不为 null 且 Ship to 为 null，则返回 Sold to notes。
2.  如果 Ship to 不为 null 并且 Sold to 为 null，则返回 Ship to notes。
3.  如果 Ship to 不为 null 且 Sold to 不为 null，则返回 Ship to notes。
4.  如果两者都为空，则不执行任何操作（如返回字段空白）

这足够清楚吗？我很确定我应该为此使用 IIf 函数，但除此之外我不确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:35:19.893

`IIf()`会这样做，但`Switch()`会更紧凑一些。尝试这样的事情：

```
Switch(Not IsNull([Ship to]), [Ship to notes], Not IsNull([Sold to]), [Sold to notes]) 
```

有关更多信息`Switch()`，请查看[此处](http://office.microsoft.com/en-ca/access-help/switch-function-HA001228918.aspx?CTT=1)。

# c# - 给类对象一个值c#

> ID：16193052
> 
> 赞同：5
> 
> 时间：2013-04-24T13:16:41.003
> 
> 标签：c#, .net, arrays, class

我有一个叫做扑克牌的类，它继承自卡片类。我将它实例化为一个名为chuckcards 的对象。数据成员之一是 CARD ID。我正在尝试为该值分配一个 int 。它在类中被声明为公共的。这是它的实例化方式。

`playingcards[] chuckcards = new playingcards[10];`

这是我尝试分配值的方式。

```
for (int ctr = 1; ctr < 10; ctr++)
        {

            chuckcards[ctr].cardID =  ctr;

            temp++;
        } 
```

我得到的错误是

> 你调用的对象是空的。

我不知道我做错了什么？我可以制作一个将值分配给每个成员的方法吗？如果是这样，那对某些事情来说会很痛苦，但我能做到吗？还是他们的简单方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T13:18:07.923

当您调用 时`new playingcards[10]`，它只会创建具有该类型默认值的占位符，该类型`null`用于引用类型。您将不得不实际更新扑克牌才能使用它

```
 for (int ctr = 1; ctr < 10; ctr++)
    {
        chuckcards[ctr] = new playcards{cardID=ctr};
        temp++;
    } 
```

我也使用了对象初始化器将代码简化为一行。

这是发生的事情：

```
var chuckcards = new playingcards[10]; 
```

结果如下：

```
chuckcards[0] = null
...
chuckcards[9] = null 
```

所以，你不能做

```
chuckcards[0].cardID 
```

因为它真的

```
null.cardID 
```

所以，一旦你初始化了这个值，它就会有一个引用：

```
chuckcards[0] = new playingcards();
chuckcards[0].cardID = ctr; 
```

评估为

```
[ref to playingcards].cardID 
```

这是有效的

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-24T13:18:21.077

您已经定义了一个包含 10 个插槽的数组来保存扑克牌的实例，但每个插槽仍然为空
在进入循环之前，您需要在每个插槽中添加一个实例

```
 chuckcards[0] = new  playingcards(); 
```

等等..... (1,2,...9=最大索引)

最终，您可以检查循环内部是否已将实例分配给特定插槽

```
 for (int ctr = 0; ctr < 10; ctr++)
 {
    if(chuckcards[i] != null)
    {
        chuckcards[ctr].cardID =  ctr;
        temp++;
    }
 } 
```

请记住，数组索引从零开始，而不是从一开始

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-24T13:18:07.553

您需要提供`chuckcards[ctr]`一个对象实例：

```
chuckcards[ctr] = new playingcards();
chuckcards[ctr].cardID = ctr; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-24T13:19:05.360

chuckcards[ctr] 为空，你必须实例化它

```
playingcards[] chuckcards = new playingcards[10];

for (int ctr = 0; ctr < 10; ctr++)
{
   chuckcards[ctr] = new playingcards();
   chuckcards[ctr].cardID =  ctr;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-24T13:23:25.657

卡盘卡[ctr] 为空。你需要实例化它。

```
for (int ctr = 1; ctr < 10; ctr++)
{
    chuckcards[ctr] = new playingcards();
    chuckcards[ctr].cardID =  ctr;
    temp++;
} 
```

为了减少代码，您可以创建另一个需要 id 的构造函数。然后你有：

```
for (int ctr = 1; ctr < 10; ctr++)
{
    chuckcards[ctr] = new playingcards(ctr);
    temp++;
} 
```

# c# - 通过评估子记录集查找重复的父行

> ID：16193053
> 
> 赞同：0
> 
> 时间：2013-04-24T13:16:40.850
> 
> 标签：c#, sql-server, linq, linq-to-sql

我正在尝试在表中查找`parent`谁的`child`记录使其与父表中的另一条记录重复的行。所以它类似于计数 > 1 的 group by，除了条件基于子记录是否匹配。在下面的示例表格图中，您会看到我有三个数据列，但我只想在比较中使用其中两个。

表/列：

*   家长
    *   父母ID
*   孩子
    *   fkParentID
    *   字段1
    *   字段2
    *   字段 3（忽略）

我愿意使用 MS SQL、C# 或 LINQ to SQL

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:09:29.527

这是一个愚蠢的 Northwind 示例：

```
Select 
ods.OrderID 
, derived1.Quantity
, derived1.Discount 
, derived1.SETKey
, TotalsItemsInThisSet = derived1.MYC
, ThisSetCardinal = ROW_NUMBER()  OVER(PARTITION BY derived1.Quantity, derived1.Discount ORDER BY derived1.Quantity, derived1.Discount) 
from 
    dbo.[Order Details] ods
    join
    ( select Quantity, Discount , COUNT(*) as MYC , ROW_NUMBER() OVER (Order by Quantity, Discount) AS SETKey from dbo.[Order Details] where Quantity > 50 and Discount > 0 GROUP BY Quantity, Discount Having Count(*) > 1 ) derived1
    on ods.Quantity = derived1.Quantity and ods.Discount = derived1.Discount
order by  
    derived1.Quantity, derived1.Discount 
```

结果：

```
OrderID     Quantity Discount      SETKey               TotalsItemsInThisSet ThisSetCardinal
----------- -------- ------------- -------------------- -------------------- --------------------
10361       55       0.1           1                    2                    1
10451       55       0.1           1                    2                    2
10269       60       0.05          2                    9                    1
10273       60       0.05          2                    9                    2
10419       60       0.05          2                    9                    3
10492       60       0.05          2                    9                    4
10570       60       0.05          2                    9                    5
10590       60       0.05          2                    9                    6
10637       60       0.05          2                    9                    7
10865       60       0.05          2                    9                    8
11012       60       0.05          2                    9                    9
10390       60       0.1           3                    4                    1
10485       60       0.1           3                    4                    2
10688       60       0.1           3                    4                    3
10845       60       0.1           3                    4                    4
10475       60       0.15          4                    4                    1
10693       60       0.15          4                    4                    2
10817       60       0.15          4                    4                    3
10990       60       0.15          4                    4                    4
10424       60       0.2           5                    4                    1
10567       60       0.2           5                    4                    2
10700       60       0.2           5                    4                    3
10847       60       0.2           5                    4                    4
10263       60       0.25          6                    7                    1
10263       60       0.25          6                    7                    2
10461       60       0.25          6                    7                    3
10802       60       0.25          6                    7                    4
10912       60       0.25          6                    7                    5
10918       60       0.25          6                    7                    6
11030       60       0.25          6                    7                    7
10854       65       0.15          7                    2                    1
10990       65       0.15          7                    2                    2
10339       70       0.05          8                    6                    1
10359       70       0.05          8                    6                    2
10605       70       0.05          8                    6                    3
10658       70       0.05          8                    6                    4
10658       70       0.05          8                    6                    5
11008       70       0.05          8                    6                    6
10395       70       0.1           9                    3                    1
10845       70       0.1           9                    3                    2
11033       70       0.1           9                    3                    3
10267       70       0.15          10                   4                    1
10324       70       0.15          10                   4                    2
10403       70       0.15          10                   4                    3
10543       70       0.15          10                   4                    4
10430       70       0.2           11                   2                    1
10773       70       0.2           11                   2                    2
10344       70       0.25          12                   3                    1
10372       70       0.25          12                   3                    2
10393       70       0.25          12                   3                    3
10359       80       0.05          13                   3                    1
10472       80       0.05          13                   3                    2
10865       80       0.05          13                   3                    3
10516       80       0.1           14                   2                    1
10765       80       0.1           14                   2                    2
10324       80       0.15          15                   2                    1
10633       80       0.15          15                   2                    2
10373       80       0.2           16                   2                    1
10847       80       0.2           16                   2                    2
10515       84       0.15          17                   2                    1
10983       84       0.15          17                   2                    2
10549       100      0.15          18                   2                    1
10854       100      0.15          18                   2                    2
11030       100      0.25          19                   2                    1
11030       100      0.25          19                   2                    2
10776       120      0.05          20                   2                    1
10894       120      0.05          20                   2                    2
10398       120      0.1           21                   2                    1
10451       120      0.1           21                   2                    2 
```

# php - 使用php上传图片文件

> ID：16193054
> 
> 赞同：0
> 
> 时间：2013-04-24T13:16:42.800
> 
> 标签：php

我正在使用它在 php 中上传文件

```
 Image <input type="file" name="file" /> 
```

它正在工作。但是背景是白色的，所以它不可见，这意味着它不像这个[链接](http://www.c-sharpcorner.com/UploadFile/051e29/image-uploading-in-php/)中给出的那样工作。我无法修改我的背景，它应该是白色的。默认情况下，文本是“未选择文件”，我可以修改它吗？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:23:20.133

文件输入的样式由您使用的浏览器调节（我认为在您的情况下可能是 chrome）。但是有机会使用 Javascript 或 CSS 来设置它们的样式，请看[这里](https://www.google.ch/search?q=css%20input%20type%20submit%20not%20working%20ie&aq=f&oq=css%20input%20type%20submit%20not%20working%20ie&aqs=chrome.0.64j0.5217j0&sourceid=chrome&ie=UTF-8#hl=de&sclient=psy-ab&q=javascript%7Cjquery%7Ccss3%20style%20file%20input&oq=javascript%7Cjquery%7Ccss3%20style%20file%20input&gs_l=serp.3...4606.6605.2.6682.12.12.0.0.0.4.192.1343.6j5.11.0...0.0...1c.1.11.psy-ab.bfpqZWSEtq4&pbx=1&bav=on.2,or.r_cp.r_qf.&bvm=bv.45580626,d.bGE&fp=70393516d72f0caf&biw=1476&bih=878)或[这里](https://stackoverflow.com/questions/3226167/how-to-style-input-file-with-css3-javascript)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T13:34:48.953

不同的浏览器在显示 HTML 元素方面有不同的方法。例如。
[CSS：Chrome 中按钮的大小与 Firefox 不同](https://stackoverflow.com/questions/2954659/css-size-of-buttons-in-chrome-is-different-than-firefox)

# c# - 使用 Microsoft.EnterpriseLibrary5.0 时出错

> ID：16193059
> 
> 赞同：0
> 
> 时间：2013-04-24T13:16:57.087
> 
> 标签：c#, enterprise-library-5

我想使用 EnterpriseLibrary 5.0 dll 登录我的项目。为此，我已将这些 dll 添加到我的参考资料中：

```
Microsoft.Practices.EnterpriseLibrary.Common
Microsoft.Practices.EnterpriseLibrary.Data
Microsoft.Practices.EnterpriseLibrary.Logging
Microsoft.Practices.EnterpriseLibrary.Logging.Database 
```

然后我写这个：

```
using Microsoft.Practices.EnterpriseLibrary.Data; 
using Microsoft.Practices.EnterpriseLibrary.Common.Configuration; 
using Microsoft.Practices.EnterpriseLibrary.Logging; 
```

然后我写道：

```
LogEntry logEntry = new LogEntry();
logEntry.Message = "Message";
Logger.Write(logEntry); 
```

但是当我的代码执行时，我在最后一行得到了这个异常：

> 尝试获取 LogWriter 类型的实例时发生激活错误，键“”

有这个 InnerException：

> 依赖项解析失败，type = \"Microsoft.Practices.EnterpriseLibrary.Logging.LogWriter\", name = \"(none)\"。\r\n发生异常时：调用构造函数 Microsoft.Practices.EnterpriseLibrary.Logging.TraceListeners .FlatFileTraceListener(System.String fileName, System.String header, System.String footer, Microsoft.Practices.EnterpriseLibrary.Logging.Formatters.ILogFormatter 格式化程序)。\r\n异常是: IOException - 设备未准备好。\r\n \r\n---------------------------------------------- -\r\n发生异常时，容器为：\r\n\r\n 正在解决 Microsoft.Practices.EnterpriseLibrary.Logging.LogWriterImpl,LogWriter。**默认** （映射自 Microsoft.Practices.EnterpriseLibrary.Logging.LogWriter，（无））\r\n 解析构造函数 Microsoft.Practices.EnterpriseLibrary.Logging.LogWriterImpl(Microsoft.Practices.EnterpriseLibrary.Logging.LogWriterStructureHolder structureHolder) 的参数“structureHolder” , Microsoft.Practices.EnterpriseLibrary.Logging.Instrumentation.ILoggingInstrumentationProvider instrumentationProvider, Microsoft.Practices.EnterpriseLibrary.Logging.ILoggingUpdateCoordinator updateCoordinator)\r\n 正在解决 Microsoft.Practices.EnterpriseLibrary.Logging.LogWriterStructureHolder,LogWriterStructureHolder。**默认** （从 Microsoft.Practices.EnterpriseLibrary.Logging.LogWriterStructureHolder 映射，（无））\r\n 解析构造函数 Microsoft.Practices.EnterpriseLibrary.Logging.LogWriterStructureHolder 的参数 \"traceSources\"(System.Collections.Generic.IEnumerable `1[[Microsoft.Practices.EnterpriseLibrary.Logging.Filters.ILogFilter, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35]] filters, System.Collections.Generic.IEnumerable`1[[ System.String，mscorlib，版本=4.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089]] traceSourceNames，System.Collections.Generic.IEnumerable`1[[Microsoft.Practices.EnterpriseLibrary.Logging.LogSource, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35]] traceSources, Microsoft.Practices.EnterpriseLibrary.Logging.LogSource allEventsTraceSource, Microsoft.Practices.EnterpriseLibrary.Logging.LogSource notProcessedTraceSource, Microsoft.Practices.EnterpriseLibrary.Logging.LogSource errorsTraceSource, System.String defaultCategory, System.Boolean tracingEnabled, System.Boolean logWarningsWhenNoCategoriesMatch, System.Boolean revertImpersonation)\r\n Resolving Microsoft.Practices.EnterpriseLibrary.Logging.LogSource,Trace\r\n
> Resolving parameter \"traceListeners\" of constructor Microsoft.Practices.EnterpriseLibrary.Logging.LogSource(System.String name, System.Collections.Generic.IEnumerable`1[[System.Diagnostics.TraceListener, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]] traceListeners, System.Diagnostics.SourceLevels 级别, System.Boolean autoFlush, Microsoft.Practices.EnterpriseLibrary.Logging.Instrumentation。 ILoggingInstrumentationProvider instrumentationProvider)\r\n 正在解析 Microsoft.Practices.EnterpriseLibrary.Logging.TraceListeners.ReconfigurableTraceListenerWrapper、Flat FileTrace 侦听器（映射自 System.Diagnostics.TraceListener、Flat FileTrace 侦听器）\r\n 解析构造函数 Microsoft 的参数“wrappedTraceListener” .Practices.EnterpriseLibrary.Logging.TraceListeners.ReconfigurableTraceListenerWrapper（System.Diagnostics.TraceListener WrappedTraceListener，Microsoft.Practices.EnterpriseLibrary.Logging。ILoggingUpdateCoordinator 协调器）\r\n 正在解决 Microsoft.Practices.EnterpriseLibrary.Logging.TraceListeners.FlatFileTraceListener、Flat FileTrace 侦听器‌实现（映射自 System.Diagnostics.TraceListener、Flat FileTrace 侦听器‌实现）\r\n 调用构造函数 Microsoft.Practices.EnterpriseLibrary.Logging。 TraceListeners.FlatFileTraceListener（System.String 文件名，System.String 标头，System.String 页脚，Microsoft.Practices.EnterpriseLibrary.Logging.Formatters.ILogFormatter 格式化程序）EnterpriseLibrary.Logging.TraceListeners.FlatFileTraceListener（System.String 文件名，System.String 标头，System.String 页脚，Microsoft.Practices.EnterpriseLibrary.Logging.Formatters.ILogFormatter 格式化程序）EnterpriseLibrary.Logging.TraceListeners.FlatFileTraceListener（System.String 文件名，System.String 标头，System.String 页脚，Microsoft.Practices.EnterpriseLibrary.Logging.Formatters.ILogFormatter 格式化程序）

它有这个 InnerException：

> 设备未准备好。

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:27:07.393

阅读以下文章：[如何配置和使用 Microsoft Enterprise Library 5 进行日志记录](http://www.gonetdotnet.info/posts/configure-and-use-enterprise-library-5-logging)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-18T08:18:01.567

此错误来自 app.config 文件。我会使用有一些错误的相同 app.config 文件。当我使用使用 EntLib 应用程序创建的 app.config 时，我的错误解决了。

# html - WCAG 2.0：技术 H44 和技术 F68 之间的区别

> ID：16193063
> 
> 赞同：1
> 
> 时间：2013-04-24T13:17:02.947
> 
> 标签：html, accessibility, wcag

[有人可以解释一下技术 H44](http://www.w3.org/TR/WCAG20-TECHS/H44.html)和[技术 F68](http://www.w3.org/TR/WCAG20-TECHS/F68.html)之间的区别吗？

它们与同一组指令相关，并且对我来说似乎完全相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:19:48.770

H44 描述了一种通过一些成功标准的方法。

F68 展示了人们在通过其他方法呈现应该在标签中的信息*失败*的努力中所做的各种常见事情。这些方法存在导致其中两个标准不满足的问题。

# asp.net - 来自 Asp.net 的线性条码扫描

> ID：16193064
> 
> 赞同：0
> 
> 时间：2013-04-24T13:17:02.903
> 
> 标签：asp.net

我需要在我的 asp.net 应用程序中实现条形码读取功能。此条码预先打印为线性条码，现在我想通过 asp.net 应用程序中的条码阅读器读取此条码。所以你能帮助开发这个代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:32:29.600

看看[这个 JS 代码](http://manuels.github.io/unix-toolbox.js-exact-image/demo/)，使用它你可以从 ASP 调用 JS 函数，然后将值返回到你的服务器端代码并​​相应地处理它。

# windows-7 - 得到“命令的语法不正确。” 运行新的 Amazon CLI 时

> ID：16193069
> 
> 赞同：0
> 
> 时间：2013-04-24T13:17:15.800
> 
> 标签：windows-7, python-2.7, amazon-web-services

在 Windows 上运行 Python27。尝试运行新的 AWS 命令​​行界面（可在此处找到：http: [//aws.amazon.com/cli/](http://aws.amazon.com/cli/)），并收到错误“命令的语法不正确”。运行任何东西时。

甚至“aws help”也会出现此错误。我知道一切都已安装，因为常规垃圾命令 (asdf) 给出了不同的错误。

我在 powershell 中遇到与在 cmd 中相同的错误。

谷歌搜索，在重命名/移动包含空格而不使用引号的文件时，通常会遇到该错误。我曾希望将我的 python 安装移动到 c:\python27\ 会解决这个问题，但它没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:17:15.800

将 python 移动到非空间路径是正确的选择。

aws 命令在查找所有 python 安装时有点激进。它会在您的 PATH 目录中搜索 python.exe（或 .bat 或 .cmd）。当我移动我的 python 目录时，我已经手动更改了这个。

它还会搜索您的文件关联（我没有更改）并且仍在查找 c:\program files\python27\ 并且在空间上窒息。

这个问题帮助我修复了文件关联，我现在可以开始了。

[如何在 XP 中更改 .py Python 文件的文件关联？](https://stackoverflow.com/questions/8196314/how-do-you-change-file-association-for-py-python-files-in-xp)

如果您发现 aws 命令稍慢，您可能会通过跳过所有这些搜索废话并将您的 python.exe 路径硬编码到 aws.cmd 文件中来加快它。

# php - 用mysql从前面修剪前几个字符

> ID：16193076
> 
> 赞同：1
> 
> 时间：2013-04-24T13:17:22.863
> 
> 标签：php, mysql

我在 mysql 中有一个表，其中的列`comp_post_code`是 whivh 邮政编码格式没有空格`M4W1A3`，但有些邮政编码是这样的，带有,`AB T1H2J1`等等。我想从中删除这额外的 AB BC 位。`BC V6X3P7``QC G0C2R0`

我怎么能在mysql中做到这一点......（`AB BC QC is just example there r many others in them, but all are in front and with space and postcode dont have space`）

编辑...我试过这个

```
UPDATE canada_database
SET comp_post_code= SUBSTRING(comp_post_code, 3) 
```

但是它从所有行中删除第一个 3 ......正如我所提到的，有一些有这个问题不是全部..如果我这样做会影响所有。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T13:26:53.813

```
UPDATE canada_database SET comp_post_code = substring_index( comp_post_code, ' ', -1 ) 
```

手册：[substring_index()](http://dev.mysql.com/doc/refman/5.6/en/string-functions.html#function_substring-index)。

请参阅[sqlfiddle](http://sqlfiddle.com/#!2/530db/1/0)上的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T13:46:40.813

作为一种替代方式...您可以使用正则表达式查询选择您的数据...

```
select * from canada_database where comp_post_code regexp '[A-Z]{2} [A-Z]*'; 
```

然后遍历它们并使用 PHP 更新每个...因为 mysql 不支持基于正则表达式的替换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T13:47:17.817

```
UPDATE canada_database
SET comp_post_code = if(LOCATE(' ',comp_post_code) > 0 , SUBSTRING(comp_post_code , 3) , comp_post_code) 
```

# java - 在同一个包eclipse中制作了一个类的副本

> ID：16193083
> 
> 赞同：0
> 
> 时间：2013-04-24T13:17:48.980
> 
> 标签：java, eclipse, classpath, buildpath

项目 A 已将项目 B 添加到其构建路径中并且工作正常（没有运行时异常）。在 B 中，我复制了其中一个类，将其放在 B 中的同一个包中，将其重命名（例如“myNewClass”）。在 A 中，我导入了新创建的类（位于 B 中），创建了一个实例并调用了该实例的一个方法（一切都编译得很好）。问题是当我运行我的代码并遇到这行代码时，它会抛出一个 classNotFoundException。

提到包资源管理器视图中的“myNewClass”旁边显示一个小问号可能会很有用。

如何将“myNewClass”添加到构建路径以阻止运行时异常的发生？

提前感谢您的任何回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:24:48.710

将 myNewClass 添加到 projectB 后，创建一个项目 B 的 jar 并将其添加到项目 A 的构建路径中。这应该可以正常工作。

# c# - WebBrowser 控件抛出看似随机的 NullReferenceException

> ID：16193084
> 
> 赞同：-1
> 
> 时间：2013-04-24T13:17:49.177
> 
> 标签：c#, winforms, exception-handling, webbrowser-control, nullreferenceexception

几天来，我正在研究基于 WebBrowser 的网络爬虫。在使用了几个使用 Threads 和 DocumentCompleted 事件的原型之后，我决定尝试看看我是否可以制作一个简单、易于理解的 Webscraper。

目标是创建一个不涉及实际 Thread 对象的 Webscraper。我希望它按顺序工作（即转到 url、执行操作、转到其他 url 等）。

这是我到目前为止得到的：

```
public static class Webscraper
{
    private static WebBrowser _wb;
    public static string URL;

    //WebBrowser objects have to run in Single Thread Appartment for some reason.
    [STAThread] 
    public static void Init_Browser()
    { 
        _wb = new WebBrowser();
    }

    public static void Navigate_And_Wait(string url)
    {
        //Navigate to a specific url.
        _wb.Navigate(url);

        //Wait till the url is loaded.
        while (_wb.IsBusy) ;

        //Loop until current url == target url. (In case a website loads urls in steps)
        while (!_wb.Url.ToString().Contains(url))
        {
            //Wait till next url is loaded
            while (_wb.IsBusy) ;
        }

        //Place URL
        URL = _wb.Url.ToString();
    }
} 
```

我是一个新手程序员，但我认为这是非常简单的代码。这就是为什么我讨厌程序出于某种原因在这段代码中抛出 NullReferenceException 的原因：

```
 _wb.Url.ToString().Contains(url) 
```

我刚刚调用了 _wb.Navigate() 方法，因此 NullReference 不能位于 _wb 对象本身中。所以我唯一能想象的是 _wb.Url 对象是空的。但是 while _wb.IsBusy() 循环应该可以防止这种情况。

那么发生了什么，我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T06:55:40.177

UI 线程上的忙碌等待 ( `while (_wb.IsBusy) ;`) 不太可取。如果您使用 .Net 4.5 的新功能[*async/await*](http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx)，您可以获得类似的效果（*即转到 url、执行操作、转到其他 url 等*） 。

```
public static class SOExtensions
{
    public static Task NavigateAsync(this WebBrowser wb, string url)
    {
        TaskCompletionSource<object> tcs = new TaskCompletionSource<object>();
        WebBrowserDocumentCompletedEventHandler completedEvent = null;
        completedEvent = (sender, e) =>
        {
            wb.DocumentCompleted -= completedEvent;
            tcs.SetResult(null);
        };
        wb.DocumentCompleted += completedEvent;

        wb.ScriptErrorsSuppressed = true;
        wb.Navigate(url);

        return tcs.Task;
    }
}

async void ProcessButtonClick()
{
    await webBrowser1.NavigateAsync("http://www.stackoverflow.com");
    MessageBox.Show(webBrowser1.DocumentTitle);

    await webBrowser1.NavigateAsync("http://www.google.com");
    MessageBox.Show(webBrowser1.DocumentTitle);
} 
```

# r - 编译包 quantreg 时未链接到 lapack

> ID：16193088
> 
> 赞同：1
> 
> 时间：2013-04-24T13:17:58.560
> 
> 标签：r, lapack, quantreg

包`quantreg`安装失败，因为它没有链接到 lapack：

```
install.packages("quantreg") 
```

[剪辑]

```
gcc -std=gnu99 -shared -o quantreg.so akj.o boot.o brute.o chlfct.o cholesky.o combos.o crq.o crqfnb.o dsel05.o etime.o extract.o idmin.o iswap.o kuantile.o mcmb.o penalty.o powell.o rls.o rq0.o rq1.o rqbr.o rqfn.o rqfnb.o rqfnc.o rqs.o sparskit2.o srqfn.o srqfnc.o srtpai.o -L/home/myself/R/x86_64-pc-linux-gnu-library/2.15/Rcpp/lib -lRcpp -Wl,-rpath,/home/myself/R/x86_64-pc-linux-gnu-library/2.15/Rcpp/lib -lprofiler -lgfortran -lm -lquadmath -L/usr/lib/R/lib -lR 
```

[剪辑]

```
unable to load shared object '/home/myself/R/x86_64-pc-linux-gnu-library/2.15/quantreg/libs/quantreg.so':
/home/myself/R/x86_64-pc-linux-gnu-library/2.15/quantreg/libs/quantreg.so: undefined symbol: dposv_ 
```

奇怪的是，从头开始创建新用户时，一切正常（并且日志中有一个“-llapack”）。

我怀疑某些环境变量对此负责，但无法确定是哪一个：取消设置 LIBRARY_PATH 和 LD_LIBRARY_PATH 时，仍然会发生这种情况。感谢您的任何想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T15:54:55.250

我在 .R 中有一个 makevars 文件，其中包含

```
PKG_LIBS = `$(R_HOME)/bin/Rscript -e "Rcpp:::LdFlags()"` -lprofiler 
```

# c++ - 注册后如何裁剪图像数据？

> ID：16193090
> 
> 赞同：0
> 
> 时间：2013-04-24T13:18:01.323
> 
> 标签：c++, image-processing, vtk, medical

这是一个关于 vtk 程序的问题。

我正在 3D MRI 和 3D US 图像之间进行严格的配准。美国数据的大小比 MRI 大得多。首先，我在两张图像的同一个器官上取一些地标。然后，我使用“vtkLandmarkTransform”在这些地标点之间进行转换。最后，我使用“vtkImageReslice”将转换应用于 MRI 数据。所以我得到了一个巨大的核磁共振数据。

如何裁剪大量数据以使新的 MRI 数据具有与美国图像相同的大小并显示与美国图像相同的器官位置？

她是我的密码

```
vtkSmartPointer<vtkPoints> sourcePoints = vtkSmartPointer<vtkPoints>::New();//Input source points
for ( int t = 0; t < 6; t++ )
{
    float sourcePoint[3] = {inital_points_mri[t][0], inital_points_mri[t][1], inital_points_mri[t][2]};
    sourcePoints->InsertNextPoint(sourcePoint);
}

vtkSmartPointer<vtkPoints> targetPoints = vtkSmartPointer<vtkPoints>::New();//Input target points
for ( int t = 0; t < 6; t++ )
{
    float targetPoint[3] = {inital_points_us[t][0], inital_points_us[t][1], inital_points_us[t][2]};
    targetPoints->InsertNextPoint(targetPoint);
}

vtkSmartPointer<vtkLandmarkTransform> landmarkTransform = vtkSmartPointer<vtkLandmarkTransform>::New();//get landmark transform
landmarkTransform->SetSourceLandmarks(sourcePoints);
landmarkTransform->SetTargetLandmarks(targetPoints);
landmarkTransform->SetModeToSimilarity ();
landmarkTransform->Update();

vtkSmartPointer<vtkImageReslice> transform2 = vtkSmartPointer<vtkImageReslice>::New(); // Apply transform
transform2->SetInput(MRIimagedata); // Input MRI image
transform2->AutoCropOutputOn();  // I'm not sure I need it or not?
// transform2->SetOutputExtent(0,499,0,489,0,358); // set the extent as US data, but can't get the same organ position
landmarkTransform->Inverse();
transform2->SetResliceTransform(landmarkTransform);
transform2->Update();
vtkImageData* transformImage = transform2->GetOutput(); 
```

感谢您的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T15:48:35.120

对不起大家。我在这部分犯了一个愚蠢的错误。

我在原点 (0, 0, 0) 的坐标上获取 MRI 的地标。然后我将变换应用于 MRI 数据，但忘记了 MRI 数据的偏移量不是 (0, 0, 0)。这就是为什么我无法得到正确的结果。

回到我的问题：如何使用 VTK 裁剪图像数据？答案很简单：使用以下代码设置输出原点和扩展参数：

```
vtkSmartPointer<vtkImageReslice> transform2 = vtkSmartPointer<vtkImageReslice>::New();
transform2->SetInput(MRIimagedata);
// transform2->AutoCropOutputOn();  //It's not necessary 
landmarkTransform1->Inverse();
transform2->SetResliceTransform(landmarkTransform1);
transform2->SetOutputOrigin(0,0,0);  //set the origin of new image data. It's where we start our crop
transform2->SetOutputExtent(0,499,0,489,0,358);  //set the range to crop from big data 
```

如果转换正确，您将得到正确的结果。

这是我的代码

```
// read MRI image data
vtkSmartPointer<vtkMetaImageReader> reader1 =
    vtkSmartPointer<vtkMetaImageReader>::New();
reader1->SetFileName("MRI.mhd");
reader1->Update();
vtkImageData* MRIimagedata = reader1->GetOutput();
double* origin_MRI = MRIimagedata->GetOrigin();

// generate landmark transforms
vtkSmartPointer<vtkPoints> sourcePoints1 = vtkSmartPointer<vtkPoints>::New();//Input landmarks on MRI data, should add the offset of MRI data
for ( int t = 0; t < 6; t++ )
{
    float sourcePoint1[3] = {inital_points_mri[t][0]+origin_MRI[0], inital_points_mri[t][1]+origin_MRI[1], inital_points_mri[t][2]+origin_MRI[2]};
    sourcePoints1->InsertNextPoint(sourcePoint1);
}

vtkSmartPointer<vtkPoints> targetPoints1 = vtkSmartPointer<vtkPoints>::New();//input landmarks on US data, the offset of US is (0,0,0)
for ( int t = 0; t < 6; t++ )
{
    float targetPoint1[3] = {inital_points_us[t][0], inital_points_us[t][1], inital_points_us[t][2]};
    targetPoints1->InsertNextPoint(targetPoint1);
}

vtkSmartPointer<vtkLandmarkTransform> landmarkTransform1 = vtkSmartPointer<vtkLandmarkTransform>::New();
landmarkTransform1->SetSourceLandmarks(sourcePoints1);
landmarkTransform1->SetTargetLandmarks(targetPoints1);
landmarkTransform1->SetModeToSimilarity();
landmarkTransform1->Update();

vtkSmartPointer<vtkImageReslice> transform2 = vtkSmartPointer<vtkImageReslice>::New();
transform2->SetInput(MRIimagedata);
// transform2->AutoCropOutputOn();
landmarkTransform1->Inverse();
transform2->SetResliceTransform(landmarkTransform1);
transform2->SetOutputOrigin(0,0,0);
transform2->SetOutputExtent(0,499,0,489,0,358);
transform2->Update();
vtkImageData* transformImage = transform2->GetOutput(); 
```

# c# - 使用 CodeFirst 使用 Entity Framework 检查表是否为空

> ID：16193100
> 
> 赞同：15
> 
> 时间：2013-04-24T13:18:32.300
> 
> 标签：c#, .net, entity-framework

我正在使用 MVVM 开发一个应用程序，我想在其中使用 Entity Framwork 5.0。这是我第一次使用EF，所以希望我能解释我的问题，以便大家理解。我的应用程序有一个嵌入式数据库，并且我使用 Code-First 方法。

这是一个说明问题的示例：如果我理解正确，这里我设置了我在嵌入式数据库中设置为表的项目模型。

```
class CreateDbContext : DbContext
{
    public CreateDbContext() : base() { }

    public CreateDbContext(String nameOrConnectionString) : base(nameOrConnectionString) { }

    public DbSet<Project> Projects { set; get; }
} 
```

现在在我的 ProjectViewModel 中，我想在执行任何操作之前检查数据库中的 Project 表是否为空。

```
using (var db = new CreateDbContext())
{
    if(db.Projects <-- checked if this is Tablet is empty ??)
} 
```

我应该怎么做，或者甚至可能吗？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-04-24T13:19:23.197

这应该有效：

```
using (var db = new CreateDbContext())
{
    if(!db.Projects.Any())
    {
        // The table is empty
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-02-25T21:01:51.633

您还可以使用`Count()`：

```
if(db.Projects.Count() == 0) 
{
    // The table is empty.
} 
```

要查看两者之间的差异`Any()`，`Count()`请参阅[此问题](https://stackoverflow.com/questions/305092/which-method-performs-better-any-vs-count-0)。

# c# - 不应允许单个零或 0.##

> ID：16193105
> 
> 赞同：0
> 
> 时间：2013-04-24T13:18:47.923
> 
> 标签：c#, regex, winforms

如何在数字（十进制可能低于）文本框中限制单个零？文本框可以接受任何数字，但不应只接受零或“0.##”作为值。

例如：“900.55”、“200.00”有效，“0”、“0.105”无效。

我试过`^[1-9]\d\.?\d[0-9]*`但它接受“0”和“0.##”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T13:22:52.357

您快到了。

```
^[1-9][0-9]*(\.[0-9]+)?$ 
```

输入必须

*   以数字 1-9 开头
*   后跟 0-9 的任意序列
*   和可选的：
    *   一个点后跟一个或多个 0-9。

* * *

笔记：

1.  这也不允许`3.`。如果您不希望这样，请将最后一个替换`+`为`*`.
2.  您可以使用`\d`而不是`[0-9]`. 我使用后者来保持一致`[1-9]`并保持简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T13:37:48.030

我认为这样做会更简单：

```
float result;
return float.TryParse(textBox1.Text, out result) && result < 1; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T13:30:44.773

我认为你很接近，但在一个组中包含小数和后面的数字可能更容易，并使整个组只允许一次像这样：

```
^[1-9][0-9]*(\.\d*)? 
```

此外，这里是一个测试[正则表达式](http://regexpal.com/)的有用站点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T14:05:10.163

如果文本框只接受有效数字，而您只想断言它 > 0。那么您真正需要的是

```
^[1-9] 
```

或者如果允许尾随前缀零

```
^0*[1-9] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-30T05:24:23.123

我遇到了同样的情况并解决了这个问题。试试看。

> @"[^0]*[0-9].\d{2}$

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-24T14:31:22.263

您也可以使用否定的前瞻来编写它：

`^(?!0\b)\d+(\.\d*)?$`

这有一个额外的好处，就是接受前面带有`0`022 之类的数字。

# jquery - 如何在asp.net中将基于复选框的bool值从视图发送到控制器

> ID：16193108
> 
> 赞同：0
> 
> 时间：2013-04-24T13:18:56.110
> 
> 标签：jquery, ajax, asp.net-mvc-4, kendo-ui

在我看来，我有一个网格（来自 KendoUI），我想根据复选框的状态进行更新。这个想法是，我想在单击复选框时将复选框的值（布尔值）发送到我的控制器，然后调用为我的数据提供数据的服务，并将复选框中的布尔值作为参数。从那里，我想用来自服务调用的新数据刷新已经在我的网格中填充的列表。

我尝试了一些 ajax 调用，但我似乎无法解决这个问题。

这是我的索引视图：

```
<div class="row-fluid">
    <div class="span12">
        <div class="k-block">
            <div class="k-header">Unit List</div>
            @Html.CheckBox("mycheckbox")
            @(Html.Kendo().Grid(Model.UnitTypes)
            .Name("Grid")
            .Columns(columns =>
                {
                    columns.Bound(p => p.Id).Groupable(false);
                    columns.Bound(p => p.Name);
                    columns.Command(command => { command.Custom("Edit Unit"); }).Width(160);
                })
                .Groupable()
                .Pageable()
                .Sortable()
                .Scrollable()
                .Filterable()
                  )
          }

        </div>
    </div> 
```

这是我的控制器：

```
public ActionResult Index()
{
    var client = new UnitServiceClient();
    var listOfUnitsFromService = client.GetListOfUnits(true);

    var model = new UnitModel
                    {
                        UnitTypes = listOfUnitsFromService.ToList()
                    };
    return View(model);
} 
```

希望有人可以提供帮助，因为我对 ajax 调用一无所知:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:57:14.357

您要做的是创建一个控制器操作，该操作接受一个布尔值并返回一个包含网格所有 HTML 的 PartialView。

然后，您的 Ajax 将调用该控制器操作，传入布尔值并从服务器接收网格 HTML。然后它将使用新的 HTML 更新包含网格的 div。

**控制器**

```
[HttpPost]
public PartialViewResult Blah(bool someFlag)
{
    // Standard controller code.  Load a model.  Return a PartialView.
} 
```

**阿贾克斯**

```
$.ajax({
    type: "post",
    dataType: "html",
    url: '/Home/Blah',
    data: 'someFlag=' + $('#mycheckbox').val(),
    success: function (response) {
        $('#k-block').html(response);
    },
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:29:03.063

好的，所以我找到了我的解决方案，至少现在是这样。最终将复选框与我的 FormsCollection 一起传递到控制器中，然后根据其“开/关”值进行处理。

我的表单只是通过使用以下标记行提交的：

```
<input type="checkbox" name="refresh" class="k-checkbox" id="refresh" onclick="document.forms.refreshForm.submit();"/> 
```

然后，我根据模型中的“已禁用”属性为我的行设置样式，如下所示：

```
 @(Html.Kendo().Grid(Model.UnitTypes)
          .Name("Grid")
          .RowAction(row =>
              {
                  if (row.DataItem.Disabled)
                  {
                      row.HtmlAttributes["style"] = "background-color: LightGray";
                  }
              })
          .Columns(columns =>
              {
                  columns.Bound(p => p.Id).Groupable(false);
                  columns.Bound(p => p.Name);
                  columns.Bound(p => p.Disabled);
                  columns.Command(command => { command.Custom("Edit Unit"); }).Width(160);
              })
          .Groupable()
          .Pageable()
          .Sortable()
          .Scrollable()
          .Filterable()) 
```

# php - 数据库错误：无法在数据库中输出数据 [键 1 的重复条目“0”]

> ID：16193115
> 
> 赞同：0
> 
> 时间：2013-04-24T13:19:23.507
> 
> 标签：php, sql, database

我的朋友有这个疑问：

```
preg_match_all("#<description>(.*?)</description>#s",$Rss,$message);  
$count = count($message[0]);
$message[0] = str_replace('<description><![CDATA[',' ',$message[0]);
$message[0] = str_replace('</description>]]>',' ',$message[0]);

for($i=0;$i<$count;$i++){    

$db->query("INSERT INTO ".prefix."topicmessage (message,forumid,catid) VALUES ('".$message[0][$i]."','".$MyRows['forumid']."','".forums('CATID',$MyRows['forumid'])."')",__file__,__line__);

} 
```

但他 qet 这个数据库错误：

```
DATABASE ERROR: can not output data in datebase [Duplicate entry '0' for key 1] in C:\AppServ\www\ala\Rss_Caller.php on line 57 
```

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:25:39.083

您有一个没有自动增量的主键字段，您没有在查询中给出值。

可能类似于“topicmessageid”

所以向该字段添加一个自动增量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T13:24:39.223

这意味着您正在尝试将记录插入数据库，其中**0**作为**键值**，这可能是主键、辅助键或唯一约束。

检查您插入的主键的值，如果它不是编程错误，请尝试更改您的 AUTO_INCREMENT

希望这会有所帮助，不要犹豫再问更多问题=）

# asp.net-mvc - 在 Razor Mvc 的 _layout 母版页中动态设置 css 文件名

> ID：16193118
> 
> 赞同：0
> 
> 时间：2013-04-24T13:19:44.350
> 
> 标签：asp.net-mvc, razor

我的 _layout.cshtml 中引用了一个 css 文件

```
<link rel="stylesheet" type="text/css" href="//css/styles-640.css" /> 
```

有 2 个不同版本（640 和 720）用于以不同大小显示页面

大小是查询字符串中的一个值

如何从查询字符串中读取值并将其动态注入到 .css 文件的文件名中？

这是在母版页 (_layout.cshtml) 中，它显然有很多不同的 ViewModel，具体取决于正在呈现的视图

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:34:26.220

```
@if(Request["size"] == 640) {
    <link rel="stylesheet" type="text/css" href="//css/styles-640.css" />
} else {
    <link rel="stylesheet" type="text/css" href="//css/styles-720.css" />
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T13:42:49.933

这很简单，在_layout.cshtml 中使用条件**@if**。不记得调用强制转换函数。

Request.QueryString["big"] 和 Request["big"] 是一样的

```
@if (Request.QueryString["big"].AsBool()==true)
{
    <link rel="stylesheet" type="text/css" href="//css/styles-720.css" />

}
else
{
    <link rel="stylesheet" type="text/css" href="//css/styles-640.css" />
} 
```

# jsf - javax.servlet.ServletException： 事件：不支持行编辑

> ID：16193120
> 
> 赞同：1
> 
> 时间：2013-04-24T13:19:44.467
> 
> 标签：jsf, jsf-2, primefaces, xhtml

我在尝试使用 PrimeFaces 使每一行都可编辑时收到一条错误消息。我在网上查了很多人都在使用这个。但是，当我尝试创建一个包含可以编辑每一行的报告的页面时。我收到 Event:rowEdit 不支持的错误。有人可以指出我的错误或我需要在我的 XHTML 文件中包含的内容。或者，如果我做的事情完全正确。这张表有很多数据，这就是我采用这种方法的原因

以下是有关我的设置的附加信息：

1.  玻璃鱼 v3
2.  JPA2.1
3.  PrimeFaces3.5（我已经将 jar 包含在我的项目的构建路径中，因为其他报告页面正在努力确认 primefaces 正在工作）
4.  EJB 3.1

**这是我的 XHTML 代码**

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui">

<f:metadata>
    <f:viewParam name="userId" value="#{loginBean.username}"></f:viewParam>
</f:metadata>
<h:head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
    <link href="./css/PageLayout.css" rel="stylesheet" type="text/css" />

    <title>Edit Lord of Data Entries</title>
</h:head>
<h:body>

    <div style="background-color: #205a8c; width: auto; height: 60px">
        <h3>Edit Lord Of Data</h3>
    </div>
    <div id="breadcrumb" align="left">
        <h:form>
            <p:breadCrumb>
                <p:menuitem value="Home" url="home.jsf"></p:menuitem>
                <p:menuitem value="Home" url="home.jsf"></p:menuitem>
                <p:menuitem value="Users" url="reportUsers.jsf"></p:menuitem>
                <p:menuitem value="Groups" url="reportGroups.jsf"></p:menuitem>
                <p:menuitem value="User's Group" url="reportUserGroup.jsf"></p:menuitem>
            </p:breadCrumb>
        </h:form>
    </div>
    <h:form id="form">
        <p:growl id="messages" showDetail="true"></p:growl>
        <p:dataTable var="myReport"  
            value="#{lordOfDataAdminManagedBean.lodAdmin_list}" id="lodlist"
            editable="true" paginator="true"
            rows="500"
                paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                rowsPerPageTemplate="500,1000,5000">

            <f:facet name="header"> Lord Of Data Report</f:facet>

            <p:ajax event="rowEdit"
                listener="#{lordOfDataAdminManagedBean.onEditListener}"></p:ajax>
            <p:ajax event="rowEditCancel"
                listener="#{lordOfDataAdminManagedBean.onCancel}"></p:ajax>

            <p:column>
                <p:rowEditor></p:rowEditor>
            </p:column>
            <p:column headerText="Row Id">
                <p:cellEditor>
                    <f:facet name="output">
                        <h:outputText value="#{myReport.rowId}"></h:outputText>
                    </f:facet>
                    <f:facet name="input">
                        <p:inputText value="#{myReport.rowId}"></p:inputText>
                    </f:facet>
                </p:cellEditor>
            </p:column>

            <p:column headerText="Group Id">
                <p:cellEditor>
                    <f:facet name="output">
                        <h:outputText value="#{myReport.security}"></h:outputText>
                    </f:facet>
                    <f:facet name="input">
                        <p:inputText value="#{myReport.security}"></p:inputText>
                    </f:facet>
                </p:cellEditor>
            </p:column>

            <p:column headerText="Type">
                <p:cellEditor>
                    <f:facet name="output">
                        <h:outputText value="#{myReport.type}"></h:outputText>
                    </f:facet>
                    <f:facet name="input">
                        <p:inputText value="#{myReport.type}"></p:inputText>
                    </f:facet>
                </p:cellEditor>
            </p:column>

            <p:column headerText="Auto">
                <p:cellEditor>
                    <f:facet name="output">
                        <h:outputText value="#{myReport.auto}"></h:outputText>
                    </f:facet>
                    <f:facet name="input">
                        <p:inputText value="#{myReport.auto}"></p:inputText>
                    </f:facet>
                </p:cellEditor>
            </p:column>

            <p:column headerText="Access">
                <p:cellEditor>
                    <f:facet name="output">
                        <h:outputText value="#{myReport.access}"></h:outputText>
                    </f:facet>
                    <f:facet name="input">
                        <p:inputText value="#{myReport.access}"></p:inputText>
                    </f:facet>
                </p:cellEditor>
            </p:column>

            <p:column headerText="Comment">
                <p:cellEditor>
                    <f:facet name="output">
                        <h:outputText value="#{myReport.comment}"></h:outputText>
                    </f:facet>
                    <f:facet name="input">
                        <p:inputText value="#{myReport.comment}"></p:inputText>
                    </f:facet>
                </p:cellEditor>
            </p:column>

            <p:column headerText="LOD1 Domain">
                <p:cellEditor>
                    <f:facet name="output">
                        <h:outputText value="#{myReport.LOD1Domain}"></h:outputText>
                    </f:facet>
                    <f:facet name="input">
                        <p:inputText value="#{myReport.LOD1Domain}"></p:inputText>
                    </f:facet>
                </p:cellEditor>
            </p:column>

            <p:column headerText="LOD1 User">
                <p:cellEditor>
                    <f:facet name="output">
                        <h:outputText value="#{myReport.LOD1User}"></h:outputText>
                    </f:facet>
                    <f:facet name="input">
                        <p:inputText value="#{myReport.LOD1User}"></p:inputText>
                    </f:facet>
                </p:cellEditor>
            </p:column>

            <p:column headerText="LOD1 Mail">
                <p:cellEditor>
                    <f:facet name="output">
                        <h:outputText value="#{myReport.LOD1Mail}"></h:outputText>
                    </f:facet>
                    <f:facet name="input">
                        <p:inputText value="#{myReport.LOD1Mail}"></p:inputText>
                    </f:facet>
                </p:cellEditor>
            </p:column>

            <p:column headerText="LOD1 Display Name">
                <p:cellEditor>
                    <f:facet name="output">
                        <h:outputText value="#{myReport.LOD1DisplayName}"></h:outputText>
                    </f:facet>
                    <f:facet name="input">
                        <p:inputText value="#{myReport.LOD1DisplayName}"></p:inputText>
                    </f:facet>
                </p:cellEditor>
            </p:column>

            <p:column headerText="LOD1 Cost Center">
                <p:cellEditor>
                    <f:facet name="output">
                        <h:outputText value="#{myReport.LOD1CostCenter}"></h:outputText>
                    </f:facet>
                    <f:facet name="input">
                        <p:inputText value="#{myReport.LOD1CostCenter}"></p:inputText>
                    </f:facet>
                </p:cellEditor>
            </p:column>

            <p:column headerText="LOD2 User">
                <p:cellEditor>
                    <f:facet name="output">
                        <h:outputText value="#{myReport.LOD2User}"></h:outputText>
                    </f:facet>
                    <f:facet name="input">
                        <p:inputText value="#{myReport.LOD2User}"></p:inputText>
                    </f:facet>
                </p:cellEditor>
            </p:column>

            <p:column headerText="LOD2 Mail">
                <p:cellEditor>
                    <f:facet name="output">
                        <h:outputText value="#{myReport.LOD2Mail}"></h:outputText>
                    </f:facet>
                    <f:facet name="input">
                        <p:inputText value="#{myReport.LOD2Mail}"></p:inputText>
                    </f:facet>
                </p:cellEditor>
            </p:column>

            <p:column headerText="LOD2 Display Name">
                <p:cellEditor>
                    <f:facet name="output">
                        <h:outputText value="#{myReport.LOD2DisplayName}"></h:outputText>
                    </f:facet>
                    <f:facet name="input">
                        <p:inputText value="#{myReport.LOD2DisplayName}"></p:inputText>
                    </f:facet>
                </p:cellEditor>
            </p:column>

            <p:column headerText="LOD2 Cost Center">
                <p:cellEditor>
                    <f:facet name="output">
                        <h:outputText value="#{myReport.LOD2CostCenter}"></h:outputText>
                    </f:facet>
                    <f:facet name="input">
                        <p:inputText value="#{myReport.LOD2CostCenter}"></p:inputText>
                    </f:facet>
                </p:cellEditor>
            </p:column>

            <p:column headerText="Domain1">
                <p:cellEditor>
                    <f:facet name="output">
                        <h:outputText value="#{myReport.domain1}"></h:outputText>
                    </f:facet>
                    <f:facet name="input">
                        <p:inputText value="#{myReport.domain1}"></p:inputText>
                    </f:facet>
                </p:cellEditor>
            </p:column>

            <p:column headerText="RechteGruppe Read">
                <p:cellEditor>
                    <f:facet name="output">
                        <h:outputText value="#{myReport.rechteGruppeRead}"></h:outputText>
                    </f:facet>
                    <f:facet name="input">
                        <p:inputText value="#{myReport.rechteGruppeRead}"></p:inputText>
                    </f:facet>
                </p:cellEditor>
            </p:column>

            <p:column headerText="AuthentifizierteBenutzer">
                <p:cellEditor>
                    <f:facet name="output">
                        <h:outputText value="#{myReport.authentifizierteBenutzer}"></h:outputText>
                    </f:facet>
                    <f:facet name="input">
                        <p:inputText value="#{myReport.authentifizierteBenutzer}"></p:inputText>
                    </f:facet>
                </p:cellEditor>
            </p:column>

            <p:column headerText="LOD2 Domain">
                <p:cellEditor>
                    <f:facet name="output">
                        <h:outputText value="#{myReport.LOD2Domain}"></h:outputText>
                    </f:facet>
                    <f:facet name="input">
                        <p:inputText value="#{myReport.LOD2Domain}"></p:inputText>
                    </f:facet>
                </p:cellEditor>
            </p:column>

            <p:column headerText="Email Send Status">
                <p:cellEditor>
                    <f:facet name="output">
                        <h:outputText value="#{myReport.emailSendStatus}"></h:outputText>
                    </f:facet>
                    <f:facet name="input">
                        <p:inputText value="#{myReport.emailSendStatus}"></p:inputText>
                    </f:facet>
                </p:cellEditor>
            </p:column>

            <p:column headerText="Email Feedback">
                <p:cellEditor>
                    <f:facet name="output">
                        <h:outputText value="#{myReport.emailFeedback}"></h:outputText>
                    </f:facet>
                    <f:facet name="input">
                        <p:inputText value="#{myReport.emailFeedback}"></p:inputText>
                    </f:facet>
                </p:cellEditor>
            </p:column>

            <p:column headerText="Comment1">
                <p:cellEditor>
                    <f:facet name="output">
                        <h:outputText value="#{myReport.comment1}"></h:outputText>
                    </f:facet>
                    <f:facet name="input">
                        <p:inputText value="#{myReport.comment1}"></p:inputText>
                    </f:facet>
                </p:cellEditor>
            </p:column>

            <p:column headerText="Comment2">
                <p:cellEditor>
                    <f:facet name="output">
                        <h:outputText value="#{myReport.comment2}"></h:outputText>
                    </f:facet>
                    <f:facet name="input">
                        <p:inputText value="#{myReport.comment2}"></p:inputText>
                    </f:facet>
                </p:cellEditor>
            </p:column>

            <p:column headerText="Comment 3">
                <p:cellEditor>
                    <f:facet name="output">
                        <h:outputText value="#{myReport.comment3}"></h:outputText>
                    </f:facet>
                    <f:facet name="input">
                        <p:inputText value="#{myReport.comment3}"></p:inputText>
                    </f:facet>
                </p:cellEditor>
            </p:column>

            <p:column headerText="Username">
                <p:cellEditor>
                    <f:facet name="output">
                        <h:outputText value="#{myReport.username}"></h:outputText>
                    </f:facet>
                    <f:facet name="input">
                        <p:inputText value="#{myReport.username}"></p:inputText>
                    </f:facet>
                </p:cellEditor>
            </p:column>

        </p:dataTable>
    </h:form>

</h:body>

</html> 
```

**用于处理编辑功能的托管 Bean 代码片段**

```
public void onEditListener(RowEditEvent event) {

        FacesMessage msg = new FacesMessage("Edited");

        try {
            Lodreport mydata = (Lodreport) event.getObject();
            if (mydata == null) {
                System.out.println("No data input found");
            } else {
                lODBR.updateReport(mydata);
                FacesContext.getCurrentInstance().addMessage(null, msg);
            }
        } catch (Exception e) {

        }
    }

     public void onCancel(RowEditEvent event) {  
         FacesMessage msg = new FacesMessage("Cancelled");
         FacesContext.getCurrentInstance().addMessage(null, msg);
     } 
```

**错误堆栈跟踪**

```
WARNING: StandardWrapperValve[Faces Servlet]: PWC1406: Servlet.service() for servlet Faces Servlet threw exception
javax.faces.view.facelets.TagException: /editNewLODAdmin.xhtml @44,7 <p:ajax> Event:rowEdit is not supported.
    at org.primefaces.component.behavior.ajax.AjaxBehaviorHandler.applyAttachedObject(AjaxBehaviorHandler.java:149)
    at org.primefaces.component.behavior.ajax.AjaxBehaviorHandler.apply(AjaxBehaviorHandler.java:127)
    at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:137)
    at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:184)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
    at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:137)
    at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:184)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
    at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
    at com.sun.faces.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:93)
    at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
    at com.sun.faces.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:86)
    at com.sun.faces.facelets.impl.DefaultFacelet.apply(DefaultFacelet.java:152)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.buildView(FaceletViewHandlingStrategy.java:774)
    at com.sun.faces.application.view.StateManagementStrategyImpl.restoreView(StateManagementStrategyImpl.java:223)
    at com.sun.faces.application.StateManagerImpl.restoreView(StateManagerImpl.java:188)
    at com.sun.faces.application.view.ViewHandlingStrategy.restoreView(ViewHandlingStrategy.java:123)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.restoreView(FaceletViewHandlingStrategy.java:453)
    at com.sun.faces.application.view.MultiViewHandler.restoreView(MultiViewHandler.java:148)
    at com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:192)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:116)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T03:38:13.623

它不起作用，因为

1.  从技术上讲，您没有向表格添加行编辑支持，您正在编辑一个单元格。向您的表添加一个`<p:rowEditor/>`以挂钩`rowEdit`事件

2.  你的桌子，它不是一张真正的桌子。`<p:dataTable/>`标签实际上并没有包装 the或`<p:column/>`其他任何东西

你应该拥有的：

```
 <p:dataTable var="myReport" value="#{lordOfDataAdminManagedBean.lodAdmin_list}" id="lodlist" editable="true">

            <f:facet name="header"> Lord Of Data Report</f:facet>

            <p:ajax event="rowEdit"
                listener="#{lordOfDataAdminManagedBean.onEditListener}"
                ></p:ajax>
            <p:ajax event="rowEditCancel"
                listener="#{lordOfDataAdminManagedBean.onCancel}"
                ></p:ajax>

            <p:column headerText="Row Id">
                <p:cellEditor>
                    <f:facet name="output">
                        <h:outputText value="#{myReport.rowId}"></h:outputText>
                    </f:facet>
                    <f:facet name="input">
                        <p:inputText value="#{myReport.rowId}"></p:inputText>
                    </f:facet>
                </p:cellEditor>
            </p:column>
            <p:column>
                <p:rowEditor />
            </p:column>
     </p:dataTable> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-24T14:56:29.933

我懂了：

```
<p:dataTable var="myReport"
                    value="#{lordOfDataAdminManagedBean.lodAdmin_list}" id="lodlist"
                    editable="true"></p:dataTable>

                <f:facet name="header"> Lord Of Data Report</f:facet>

                <p:ajax event="rowEdit"
                    listener="#{lordOfDataAdminManagedBean.onEditListener}"
                    ></p:ajax>
                <p:ajax event="rowEditCancel"
                    listener="#{lordOfDataAdminManagedBean.onCancel}"
                    ></p:ajax>

                <p:column headerText="Row Id">
                    <p:cellEditor>
                        <f:facet name="output">
                            <h:outputText value="#{myReport.rowId}"></h:outputText>
                        </f:facet>
                        <f:facet name="input">
                            <p:inputText value="#{myReport.rowId}"></p:inputText>
                        </f:facet>
                    </p:cellEditor>
                </p:column> 
```

你得试试：

```
 <p:dataTable var="myReport"
                        value="#{lordOfDataAdminManagedBean.lodAdmin_list}" id="lodlist"
                        editable="true">

                    <f:facet name="header"> Lord Of Data Report</f:facet>

                    <p:ajax event="rowEdit"
                        listener="#{lordOfDataAdminManagedBean.onEditListener}"
                        ></p:ajax>
                    <p:ajax event="rowEditCancel"
                        listener="#{lordOfDataAdminManagedBean.onCancel}"
                        ></p:ajax>

                    <p:column headerText="Row Id">
                        <p:cellEditor>
                            <f:facet name="output">
                                <h:outputText value="#{myReport.rowId}"></h:outputText>
                            </f:facet>
                            <f:facet name="input">
                                <p:inputText value="#{myReport.rowId}"></p:inputText>
                            </f:facet>
                        </p:cellEditor>
                    </p:column>
</p:dataTable> 
```

# soapui - 我们可以使用 AutoIT 在 SOAP UI 窗口中自动向 Web 服务发送请求吗

> ID：16193123
> 
> 赞同：2
> 
> 时间：2013-04-24T13:20:08.133
> 
> 标签：soapui, autoit

我们能否使用 AutoIT 在 SOAP UI 窗口中自动向 Web 服务发送请求。AutoIT 无法识别 SOAP UI 窗口中的几个控件。AutoIT 窗口信息也没有显示任何控制细节。如果有任何其他方法可以在 SOAP UI 窗口中自动向 Web 服务发送请求，请建议我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T18:36:47.127

而不是使用 AutoIt 自动推送 SoapUI gui，

1.  尝试使用适当的断言为您的 Web 服务设置 SoapUI 项目（测试例如连接性、模式合规性等）然后

2.  现在您已准备好考虑如何自动执行这些 SoapUI 项目。正如 gaelperret 所提到的，最好的来源是[在 soapui.org 上](http://www.soapui.org/Test-Automation/functional-tests.html)。基本上你必须使用正确的参数运行 {soapui.home}/bin/testrunner.bat。

如果您想要回归/健全性测试，您可以设置一个 Hudson 环境来管理计划和重复的测试周期。[请参阅我之前的回答](https://stackoverflow.com/questions/16067021/automation-testing-web-services/16210635#16210635)。

您还可以设置 AutoIt 脚本来执行 testrunner.bat。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T09:41:53.873

是的，还有另一种方法可以使用命令行自动执行您的请求：http: [//www.soapui.org/Test-Automation/functional-tests.html](http://www.soapui.org/Test-Automation/functional-tests.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T13:37:55.413

使用控制细节是理想的方式，但最坏的情况是，您可以最大化 SOAP UI 窗口，然后使用 MouseMove 和 MouseClick。

# javascript - 将 HTML 加载到 DIV 中，但保留 CSS、JS 包括

> ID：16193124
> 
> 赞同：1
> 
> 时间：2013-04-24T13:20:14.680
> 
> 标签：javascript, jquery, ajax

我有一个索引页面，我想从一个非常不同的目录加载另一个页面到 DIV，但我希望将加载到 DIV 的页面保留 CSS 和 JS，这可能吗？

似乎它只加载到 DIV 中，其他页面的正文并忘记了 JS 和 CSS 包括在内。

我正在使用此代码将 HTML 加载到 div 中：

```
<script type="text/javascript">
            function processAjax(url) { 

                if (window.XMLHttpRequest) { // Non-IE browsers 
                    req = new XMLHttpRequest(); 
                    req.onreadystatechange = targetDiv; 
                    try { 
                        req.open("GET", url, true); 
                        } catch (e) { 
                        alert(e); 
                    } 
                    req.send(null); 
                    } else if (window.ActiveXObject) { // IE 
                    req = new ActiveXObject("Microsoft.XMLHTTP"); 
                    if (req) { 
                        req.onreadystatechange = targetDiv; 
                        req.open("GET", url, true); 
                        req.send(); 

                    } 
                } 
            } 

            function targetDiv() { 
                if (req.readyState == 4) { // Complete 
                    if (req.status == 200) { // OK response 
                        document.getElementById("mContent").innerHTML = req.responseText; 
                        } else { 
                        alert("Problem: " + req.statusText); 
                    } 
                } 
            }  
        </script> 
```

* * *

用法：

```
<a href="javascript:processAjax('./DataTables/extras/Editor/treinamentos/index.html');">My Page</a> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T13:23:49.840

你为什么不使用一个 IFRAME 标记，其中包含你想用你想使用的 js 和 css 显示的页面的 url。

```
<iframe src="mypage.html"></iframe> 
```

# llvm - use llvm to implement a arm disassembler

> ID：16193125
> 
> 赞同：0
> 
> 时间：2013-04-24T13:20:22.547
> 
> 标签：llvm, disassembly

recently, i want to analyze some library which in android. but arm assembler is hardly to understand,so i want to use llvm to implement a disassembler i find a document about this topic at here:[http://llvm.org/docs/MarkedUpDisassembly.html#instruction-annotations](http://llvm.org/docs/MarkedUpDisassembly.html#instruction-annotations) and a cpp file at here [http://llvm.org/docs/doxygen/html/ARMDisassembler_8cpp_source.html](http://llvm.org/docs/doxygen/html/ARMDisassembler_8cpp_source.html) and then use some rules to translate assembler code to c code.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T15:57:18.273

LLVM 中没有任何内容可以帮助您将程序集转换为 C 代码。LLVM 提供的反汇编功能可以将其支持的目标的机器代码（二进制文件）反汇编成汇编。

此外，如果您发现程序集难以理解，我应该说您可能不会理解生成的 C 代码。由反编译工具（将汇编转换为 C 的常用名称）创建的 C 代码可读性不强，无论如何您必须对汇编语言有很强的了解才能理解它。

# c# - 在c#中计算文件夹中的文件数

> ID：16193126
> 
> 赞同：0
> 
> 时间：2013-04-24T13:20:27.563
> 
> 标签：c#

我是编程新手，需要帮助才能在 C# 中创建 Windows 应用程序来计算文件夹中的文件数。

我会用什么方法让它计数？

**更新 02/01/2016

正是它所说的，文件夹中包含的文件数量。

例如，如果一个文件夹包含 3 个图像文件和 3 个文本文件，则应用程序应返回值 6。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-24T13:23:24.187

您应该使用[Directory.GetFiles](http://msdn.microsoft.com/en-us/library/3hwtke0f.aspx)方法。

```
int fileCount = Directory.GetFiles(@"C:\MyFolder").Length; 
```

如果您也想搜索子目录，可以使用以下代码：

```
int fileCount = Directory.GetFiles(@"c:\MyDir\", "*.*", SearchOption.AllDirectories).Length; 
```

请注意，如果目录不存在，则会抛出[DirectoryNotFoundException](http://msdn.microsoft.com/en-us/library/system.io.directorynotfoundexception.aspx)，因此如果您不确定目录是否存在，您可以使用 try ... catch 块或使用[Directory.Exists 方法](http://msdn.microsoft.com/en-us/library/system.io.directory.exists.aspx)检查目录是否存在：

```
if (Directory.Exists(dirName))
{
    // Your code here
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-24T13:23:06.413

```
// This searches in the current directory and also sub directories
int folderCount = Directory.GetFiles(path, "*.*", SearchOption.AllDirectories).Length;
// This searches only in the current directory
int folderCount = Directory.GetFiles(path, "*.*", SearchOption.TopDirectory).Length; 
```

祝你好运！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-24T13:21:20.177

您可以使用`System.IO.DirectoryInfo`;

```
DirectoryInfo info = new DirectoryInfo(your folder path);
info.GetFiles().Count(); 
```

或按照建议：

```
info.EnumerateFiles(); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-24T13:21:48.583

尝试这个：

```
var files = Directory.GetFiles(@"C:\SomeFolder").Length; 
```

请注意，如果该目录不存在，这将引发异常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T13:23:01.747

`DirectoryInfo`课堂会帮助你。

```
var info = new DirectoryInfo("D:\\");
var files = info.GetFiles();
var dirs = info.GetDirectories();
files.Length;
dirs.Length; 
```

# javascript - Open Source PHP Mail Script not working?

> ID：16193129
> 
> 赞同：0
> 
> 时间：2013-04-24T13:20:31.660
> 
> 标签：javascript, php, jquery, email

I am working on a website, and I don't like to write mail scripts again and again. I am trying this Javascript:

```
<script>

$(document).ready(function(){

$("#button").click(function(e){
e.preventDefault();
var arr=createDomString($("#contactForm"));
console.log(arr);
//var data=createDomArray($("#contactForm"));

$.ajax({

    type:'POST',
    url:'php/mailer.php',
    data:"datastring="+arr,
    //datatype:"json",
    success: function(d){           
        console.log("php response "+d);
    }           

});
});

});

</script> 
```

However, I get this error

```
Uncaught ReferenceError: createDomString is not defined 
```

Is there a problem with the script or am I doing something wrong?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:23:04.303

包括

```
<script type="text/javascript" src="js/mailer.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T13:22:29.103

确保包括

```
<script type="text/javascript" src="js/mailer.js"></script> 
```

createDOMString 在那里定义，所以我可以放心地假设它不包含在您的脚本中；）

# c# - WCF、POCO 和继承：数据合约问题

> ID：16193130
> 
> 赞同：0
> 
> 时间：2013-04-24T13:20:37.973
> 
> 标签：c#, wcf, inheritance, poco

我有一个使用 Entity Framework 5.0 和 POCO 实体的 WCF 服务器应用程序。服务器通过 WCF 将 POCO 直接序列化到客户端应用程序（我按照以下博客文章中的说明设法做到了这一点：http: [//www.sanderstechnology.com/?](http://www.sanderstechnology.com/?p=10142) p=10142 ）。这一直工作得很好，直到我今天遇到一个新问题。

我的数据模型中有一个简单的情况，如下图所示：[http ://roponenp.kapsi.fi/images/datamodel.png](http://roponenp.kapsi.fi/images/datamodel.png)

在我的服务器中，我有一个可用于获取块的方法：

```
[OperationContract]
[ApplyDataContractResolver]
[CyclicReferencesAware(true)]
List<Block> GetBlocks(); 
```

我需要在我的回复中包含链接到块的项目，因此我执行以下操作：

```
public List<Block> GetBlocks()
{
    using (ModelContainer db = new ModelContainer())
    {
        db.Configuration.ProxyCreationEnabled = false;
        db.Configuration.LazyLoadingEnabled = false;
        return db.Block.Include(it => it.Project).ToList();
    }
} 
```

在我的数据库中，我有 ProjectA 和 ProjectB 类型的实例（从 Project 继承）。因此，上面的 LINQ 查询实际上包括 ProjectA 和 ProjectB 的类型，以响应我的响应。这些类型被序列化并发送到客户端。发生这种情况时，我在客户端收到以下错误（服务器应用程序中没有错误）：

> 服务器没有提供有意义的回复；这可能是由于合同不匹配、会话过早关闭或内部服务器错误造成的。

问题似乎是在我的数据合同类型 Block 链接到类型 Project。但是，我的响应返回的数据包含链接到 Blocks 的类型 ProjectA 和 ProjectB。

我不知道如何解决这个问题。我认为它可以通过实现自定义 DataContractResolver 来解决，但我还没有找到任何工作示例如何做到这一点。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:55:13.970

如果您的对象包含其他类型而不是显而易见的类型（例如接口实现或派生类），您将需要[KnownType属性。](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.knowntypeattribute.aspx)

查看MSDN中的示例，它非常好。

```
[ServiceContract]
[KnownType(typeof(ProjectA))]
[KnownType(typeof(ProjectB))]
class SomeService
{
  [OperationContract]
  [ApplyDataContractResolver]
  [CyclicReferencesAware(true)]
  List<Block> GetBlocks(); 
```

# haskell - haskell, typing with ordering

> ID：16193132
> 
> 赞同：1
> 
> 时间：2013-04-24T13:20:44.053
> 
> 标签：haskell, hugs

I have one problem. I want to implement function which will compare two nodes and give ordering,where nodes the following structure:

```
data Node a = Node { label :: a, adjacent :: [(a,Int)] } deriving Show

sortNode:: Node a->Node a->Ordering
sortNode node1 node2
    | takeLabel node1 > takeLabel node2 = GT
    | takeLabel node1 < takeLabel node2 = LT
    | takeLabel node1 == takeLabel node2 = EQ 
```

hugs complain about this

```
ERROR "Network.hs":35 - Cannot justify constraints in explicitly typed binding
*** Expression    : sortNode
*** Type          : Node a -> Node a -> Ordering
*** Given context : ()
*** Constraints   : Ord a 
```

can you explain?(i am beginner in haskell)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T13:47:49.520

Your type signature for *sortNode* specifies an empty context but (<) and (>) require that type *a* is an instance of class **Ord** and (==) requires that it is an instance of class **Eq**. You need to add a constraint to the context as Nikita suggested or omit the explicit type signature and the interpreter will be able to infer it.

```
sortNode :: (Ord a) => Node a -> Node a -> Ordering 
```

# .net - 在 cmd 提示符下运行 aspnet_regiis.exe -iru 时出错

> ID：16193134
> 
> 赞同：1
> 
> 时间：2013-04-24T13:20:46.083
> 
> 标签：.net, iis, cmd

当我尝试在我的 CMD 提示符下运行 aspnet_regiis.exe -iru 时，它给了我这个；

> 此版本的操作系统不支持此选项。然后，管理员应使用“打开/关闭 Windows 功能”对话框、服务器管理工​​具或 dism.exe 命令行工具来安装/卸载带有 IIS8 的 ASp.NET 4.5。

我安装了 Win 8 和 IIS 7.5。我需要这个，以便我可以删除这个错误：

> 无法从程序集“System.ServiceModel，Version=3.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”加载类型“System.ServiceModel.Activation.ServiceHttpModule”。

谢谢

PS 我从 C:\Windows\Microsoft.NET\Framework64\v4.0.30319 以管理员身份运行 cmd

# iphone - What happens under the hood when we do presentViewController?

> ID：16193141
> 
> 赞同：14
> 
> 时间：2013-04-24T13:21:09.693
> 
> 标签：iphone, ios, objective-c, ipad, uiviewcontroller

Given the below code

```
self.view.backgroundColor = [UIColor yellowColor];
MyViewController *myVC = [[MyViewController alloc] initWithNibName:@"MyView" bundle:nil]
myVC.view.backgroundColor = [UIColor clearColor];
myVC.modalPresentationStyle = UIModalPresentationFullScreen;
[self presentViewController:myVC animated:NO completion:nil]; 
```

What happens under the hood when we call presentViewController ? When myVC is visible I cannot see yellow color, then I checked myVC.view.superView in it's viewDidAppear method and it is UIWindow.

**Q1.** Is that mean until the modal window is up presentingViewController.view (self.view in above case) is removed from the View hierarchy and presentedViewController.view (myVC.view in above case) is added over UIWindow ?

**Q2.** What will be the case if myVC.modalPresentationStyle != UIModalPresentationFullScreen ?

**Q3.** Does iOS also remove all the views from UIWindow except presentedViewController.view until the full screen modal dialog is up for optimization ? If NO why not ?

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-28T18:39:56.017

首先，让我们讨论没有动画的情况。

打电话之前`present`：

1.  你的窗口有一个视图层次结构，从它的`rootViewController`视图开始。

打电话后`present:`

1.  视图层次结构仍然存在而没有更改。
2.  一个特殊的全屏视图称为“调光视图”被添加到窗口中（也就是说，不是在`rootViewController`的视图内，而是在窗口内（窗口也是一个`UIView`）。这个视图是透明的，使呈现控制器变暗并阻止用户相互作用。
3.  然后将呈现的（模态）控制器的视图也添加到窗口中。

在窗口和呈现的控制器窗口之间添加了一些其他视图。如果您记录视图层次结构，您将看到已命名的类`_ControllerWrapperView`或类似名称。但是，这在 iOS 版本之间发生了变化，您不应该依赖视图结构。请注意，模态控制器永远不可能是透明的，因为它不是窗口的直接子视图，并且控制器和窗口之间的包装器是不透明的。

动画案例几乎相同。只有步骤之间有一些花哨的动画。

**编辑2：** 答案真的有点不正确。iPhone 和 iPad 提供的控制器之间存在很大差异。

在 iPhone 上，呈现的控制器始终全屏显示，而呈现的控制器实际上已从窗口中移除。

在 iPad 上，如果呈现的控制器不是全屏的（请参阅 参考资料`UIModalPresentationStyle`），呈现的控制器会停留在窗口中。

你的问题：

> 这是否意味着在模态窗口启动之前，从 View 层次结构中删除 presentingViewController.view （在上述情况下为 self.view ）并在 UIWindow 上添加presentingViewController.view （在上述情况下为myVC.view ）？

如果控制器是全屏的，那么这个说法是正确的。否则，呈现视图控制器会保留在那里，但整个内容会被其他视图重叠（即使它们是半透明的）。此外，呈现的和呈现的控制器视图之间总是存在一些视图。

> 如果 myVC.modalPresentationStyle != UIModalPresentationFullScreen 会怎样？

请参阅上一个问题的答案 - 在 iPhone 上，没有区别。

> iOS 是否还会从 UIWindow 中删除除presentedViewController.view 之外的所有视图，直到全屏模式对话框进行优化？如果没有，为什么不呢？

从我的测试中，只有呈现控制器从窗口层次结构中删除。这可能是为了优化绘图性能。这是系统可以安全移除的唯一控制器。删除任何其他视图可能会导致问题（例如，应该始终可见的视图）。

**编辑：** 如果你想制作一个透明的控制器，你可以：

1.  `+[UIView transition...]`使用过渡动画 ( )将视图直接添加到您的视图层次结构（控制器的视图或窗口）
2.  相同，但也将子控制器添加到您的控制器。

# html - 我在 webcontent(Eclipse) 之外有一个 xml 文件。我需要使用 href 访问它。

> ID：16193148
> 
> 赞同：0
> 
> 时间：2013-04-24T13:21:32.260
> 
> 标签：html, eclipse

这是我的 xml 文件 C:\Workspace\Auto\src\com\TestSuite\chacha.xml 的路径

这里 Auto 是我在 Eclipse 中的项目名称，TestSuite 是 com 下的一个文件夹，其中包含 xml 文件。

当我使用内部浏览器时，该链接运行良好，但即使我给出绝对路径，IE 或 chrome 也无法识别该路径。

请帮忙！

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T15:08:40.437

右键单击 Eclipse 项目，然后选择`Properties`. 从那里，选择`Deployment Assembly`。添加文件夹`TestSuite`，它现在应该包含在您的构建中。

（这假设您的项目设置为动态 Web 项目）

# sql - Null 在 sql 中的 Join 中不匹配

> ID：16193151
> 
> 赞同：1
> 
> 时间：2013-04-24T13:21:37.097
> 
> 标签：sql, oracle, oracle11g

在下面的查询 c.EXTRA_CALLOFF_FLAG = a.EXTRA_CALLOFF_FLAG 它有两个匹配项，一个是 Y，另一个值为 NULL

```
SELECT PICKUP_WK_NBR,REGION_CD,GLOBAL_DUNS_NBR,GLOBAL_SUPPLIER_NAME,a.EXTRA_CALLOFF_FLAG,
       nvl((SELECT sum(c.CALLOFF_QTY)
               FROM GMMT_OWNER.OR_SA_ATTAIN_DTL_T c join GMMT_OWNER.OR_SA_INCOTERMS_T d
                 on
                  c.SUPPLIER_INCOTERMS_1_CD = d.INCOTERMS_CD
               WHERE
                  d.PICKUP_ARRIVAL_FLAG='P'  and
                  a.PICKUP_WK_NBR = c.PICKUP_WK_NBR and
                  a.GLOBAL_DUNS_NBR = c.GLOBAL_DUNS_NBR and
                  a.REGION_CD=c.REGION_CD and 
                  c.EXTRA_CALLOFF_FLAG = a.EXTRA_CALLOFF_FLAG and
                  a.SUPPLIER_INCOTERMS_1_CD = c.SUPPLIER_INCOTERMS_1_CD
                 ),0) total_items_ordered
FROM
                GMMT_OWNER.OR_SA_ATTAIN_DTL_T a join GMMT_OWNER.OR_SA_INCOTERMS_T b on
                a.SUPPLIER_INCOTERMS_1_CD = b.INCOTERMS_CD
WHERE
                b.PICKUP_ARRIVAL_FLAG='P' and
                (a.PICKUP_WK_NBR between '201301' AND '201301')  and
                a.SUPPLIER_INCOTERMS_1_CD IN ('EXW')        and 
                a.GLOBAL_DUNS_NBR IN ('43898092') and
                a.REGION_CD IN ('AP')                     
GROUP BY
                PICKUP_WK_NBR,REGION_CD,GLOBAL_DUNS_NBR,GLOBAL_SUPPLIER_NAME,a.EXTRA_CALLOFF_FLAG,a.SUPPLIER_INCOTERMS_1_CD
ORDER BY a.PICKUP_WK_NBR; 
```

它给出了错误的结果。我不确定内部和外部表连接之间的 NULL 是否匹配？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:15:49.090

正如 Gordon 在评论中所说，您不能将 null 视为一个值。

不过，您可能应该重新考虑加入可以为空的列。

不过，听起来您想将其视为可能的值。一种方法是使用 nvl()。

这是使您的联接条件具有价值的一种方法。引号之间的字符串在等号两边必须相同。

改变

```
c.EXTRA_CALLOFF_FLAG = a.EXTRA_CALLOFF_FLAG 
```

至

```
nvl(c.EXTRA_CALLOFF_FLAG, 'null') = nvl(a.EXTRA_CALLOFF_FLAG, 'null') 
```

# sql - SQL Server convert select a column and convert it to a string

> ID：16193152
> 
> 赞同：31
> 
> 时间：2013-04-24T13:21:39.237
> 
> 标签：sql, sql-server, string, select

Is it possible to write a statement that selects a column from a table and converts the results to a string?

Ideally I would want to have comma separated values.

For example, say that the SELECT statement looks something like

```
SELECT column
FROM table
WHERE column<10 
```

and the result is a column with values

```
|column|
--------
|  1   |
|  3   |
|  5   |
|  9   | 
```

I want as a result the string "1, 3, 5, 9"

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-04-24T13:27:32.413

你可以这样做：

**[小提琴演示](http://sqlfiddle.com/#!3/3bfea/3)**

```
declare @results varchar(500)

select @results = coalesce(@results + ',', '') +  convert(varchar(12),col)
from t
order by col

select @results as results

| RESULTS |
-----------
| 1,3,5,9 | 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2018-12-19T20:04:04.837

SQL Server 2017 中有一个新方法：

`SELECT STRING_AGG (column, ',') AS column FROM Table;`

这将为`1,3,5,9`您生产

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-04-24T13:26:04.533

```
select  stuff(list,1,1,'')
from    (
        select  ',' + cast(col1 as varchar(16)) as [text()]
        from    YourTable
        for     xml path('')
        ) as Sub(list) 
```

[SQL Fiddle 的示例。](http://sqlfiddle.com/#!6/0e28a/1/0)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-08-15T11:01:35.670

```
SELECT  CAST(<COLUMN Name> AS VARCHAR(3)) + ','
FROM    <TABLE Name>
FOR     XML PATH('') 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-09-06T22:02:17.130

当前接受的答案不适用于多个分组。
当您需要对列行值的类别进行操作时，请尝试此操作。

假设我有以下数据：

```
+---------+-----------+
| column1 |  column2  |
+---------+-----------+
| cat     | Felon     |
| cat     | Purz      |
| dog     | Fido      |
| dog     | Beethoven |
| dog     | Buddy     |
| bird    | Tweety    |
+---------+-----------+ 
```

我想要这个作为我的输出：

```
+------+----------------------+
| type |        names         |
+------+----------------------+
| cat  | Felon,Purz           |
| dog  | Fido,Beethoven,Buddy |
| bird | Tweety               |
+------+----------------------+ 
```

（如果你跟着：

```
create table #column_to_list (column1 varchar(30), column2 varchar(30))
insert into #column_to_list
values 
('cat','Felon'),
('cat','Purz'),
('dog','Fido'),
('dog','Beethoven'),
('dog','Buddy'),
('bird','Tweety') 
```

)

现在——我不想深入到所有的语法，但正如你所看到的，这对我们来说是最初的技巧：

```
select ',' + cast(column2 as varchar(255)) as [text()]  
from #column_to_list sub
where column1 = 'dog'
for xml path('')
--Using "as [text()]" here is specific to the “for XML” line after our where clause and we can’t give a name to our selection, hence the weird column_name 
```

输出：

```
+------------------------------------------+
| XML_F52E2B61-18A1-11d1-B105-00805F49916B |
+------------------------------------------+
| ,Fido,Beethoven,Buddy                    |
+------------------------------------------+ 
```

您可以看到它的局限性在于它仅用于一个分组（其中 column1 = 'dog'）并且它在前面留下了一个逗号，另外它的名字很奇怪。

因此，首先让我们使用“stuff”函数处理前导逗号并将我们的列命名为 stuff_list：

```
select stuff([list],1,1,'') as stuff_list
from (select ',' + cast(column2 as varchar(255)) as [text()]
         from #column_to_list sub
         where column1 = 'dog'
         for xml path('')
         ) sub_query([list]) 
--"sub_query([list])" just names our column as '[list]' so we can refer to it in the stuff function. 
```

输出：

```
+----------------------+
|      stuff_list      |
+----------------------+
| Fido,Beethoven,Buddy |
+----------------------+ 
```

最后，让我们把它混入一个 select 语句中，注意对 top_query 别名的引用定义了我们想要的 column1（在此处的第 5 行）：

```
select top_query.column1, 
          (select stuff([list],1,1,'') as stuff_list
         from (select ',' + cast(column2 as varchar(255)) as [text()]
                  from #column_to_list sub
                  where sub.column1 = top_query.column1
                  for xml path('')
                  ) sub_query([list])
              ) as pet_list
from  #column_to_list top_query
group by column1
order by column1 
```

输出：

```
+---------+----------------------+
| column1 |       pet_list       |
+---------+----------------------+
| bird    | Tweety               |
| cat     | Felon,Purz           |
| dog     | Fido,Beethoven,Buddy |
+---------+----------------------+ 
```

我们完成了。

你可以在这里阅读更多：

*   [SQL 服务器中的 FOR XML PATH 和 [text()]](https://stackoverflow.com/questions/32225634/for-xml-path-in-sql-server-and-text)
*   [https://docs.microsoft.com/en-us/sql/relational-databases/xml/use-path-mode-with-for-xml?view=sql-server-2017](https://docs.microsoft.com/en-us/sql/relational-databases/xml/use-path-mode-with-for-xml?view=sql-server-2017)
*   [https://www.codeproject.com/Articles/691102/String-Aggregation-in-the-World-of-SQL-Server](https://www.codeproject.com/Articles/691102/String-Aggregation-in-the-World-of-SQL-Server)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-08-26T14:59:25.153

这是创建可重用列以逗号分隔的字符串的尝试。在这种情况下，我只有一个具有值的字符串，我不想要空字符串或空值。

首先，我创建一个用户定义类型，它是一个单列表。

```
-- ================================
-- Create User-defined Table Type
-- ================================
USE [RSINET.MVC]
GO

-- Create the data type
CREATE TYPE [dbo].[SingleVarcharColumn] AS TABLE 
(
    data NVARCHAR(max)
)
GO 
```

该类型的真正目的是简化创建标量函数以将列放入逗号分隔值中。

```
-- ================================================
-- Template generated from Template Explorer using:
-- Create Scalar Function (New Menu).SQL
--
-- Use the Specify Values for Template Parameters 
-- command (Ctrl-Shift-M) to fill in the parameter 
-- values below.
--
-- This block of comments will not be included in
-- the definition of the function.
-- ================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:  Rob Peterson        
-- Create date: 8-26-2015
-- Description: This will take a single varchar column and convert it to
-- comma separated values.
-- =============================================
CREATE FUNCTION fnGetCommaSeparatedString 
(
    -- Add the parameters for the function here
    @column AS [dbo].[SingleVarcharColumn] READONLY
)
RETURNS VARCHAR(max)
AS
BEGIN
-- Declare the return variable here
DECLARE @result VARCHAR(MAX)
DECLARE @current VARCHAR(MAX)
DECLARE @counter INT
DECLARE @c CURSOR

SET @result = ''
SET @counter = 0
-- Add the T-SQL statements to compute the return value here
SET @c = CURSOR FAST_FORWARD
    FOR SELECT COALESCE(data,'') FROM @column
    OPEN @c
    FETCH NEXT FROM @c
    INTO @current
    WHILE @@FETCH_STATUS = 0
    BEGIN
        IF @result <> '' AND @current <> '' SET @result = @result + ',' + @current
        IF @result = '' AND @current <> '' SET @result = @current
    FETCH NEXT FROM @c
    INTO @current
    END
    CLOSE @c
    DEALLOCATE @c
-- Return the result of the function
RETURN @result

END
GO 
```

现在，要使用这个。我将要转换为逗号分隔字符串的列选择为 SingleVarcharColumn 类型。

```
DECLARE @s as SingleVarcharColumn

INSERT INTO @s VALUES ('rob')
INSERT INTO @s VALUES ('paul')
INSERT INTO @s VALUES ('james')
INSERT INTO @s VALUES (null)

INSERT INTO @s
SELECT iClientID FROM [dbo].tClient

SELECT [dbo].fnGetCommaSeparatedString(@s) 
```

得到这样的结果。

抢，保罗，詹姆斯，1,9,10,11,12,13,14,15,16,18,19,23,26,27,28,29,30,31,32,34,35,36, 37,38,39,40,41,42,44,45,46,47,48,49,50,52,53,54,56,57,59,60,61,62,63,64,65, 66,67,68,69,70,71,72,74,75,76,77,78,81,82,83,84,87,88,90,91,92,93,94,98,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,120,121,122,123,124,125,126,127,128,129,131,132,133,134,135,136,137,138,139,140,​​141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159

我将我的 SingleVarcharColumn 类型中的数据列设置为 NVARCHAR(MAX)，这可能会损害性能，但我正在寻找灵活性，并且它的运行速度足以满足我的目的。如果它是 varchar 并且宽度固定且较小，它可能会更快，但我还没有测试过。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-09-25T19:44:26.647

```
ALTER PROCEDURE [dbo].[spConvertir_CampoACadena]( @nomb_tabla   varchar(30),
                          @campo_tabla  varchar(30),
                          @delimitador  varchar(5),
                          @respuesta    varchar(max) OUTPUT
)
AS
DECLARE @query      varchar(1000),
    @cadena     varchar(500)
BEGIN
  SET @query = 'SELECT @cadena  = COALESCE(@cadena + '''+ @delimitador +''', '+ '''''' +') + '+ @campo_tabla + ' FROM '+@nomb_tabla
  --select @query
  EXEC(@query)
  SET @respuesta = @cadena  
END 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-08-29T09:41:22.003

您可以使用以下方法：

```
select
STUFF(
        (
        select ', ' + CONVERT(varchar(10), ID) FROM @temp
        where ID<50
group by ID for xml path('')
        ), 1, 2, '') as IDs 
```

* * *

## 执行：

```
Declare @temp Table(
ID int
)
insert into @temp
(ID)
values
(1)
insert into @temp
(ID)
values
(3)
insert into @temp
(ID)
values
(5)
insert into @temp
(ID)
values
(9)

 select
STUFF(
        (
        select ', ' + CONVERT(varchar(10), ID) FROM @temp
        where ID<50
group by ID for xml path('')
        ), 1, 2, '') as IDs 
```

## 结果将是：

[![在此处输入图像描述](https://i.stack.imgur.com/4ilX0.png)](https://i.stack.imgur.com/4ilX0.png)

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2020-02-22T09:44:27.870

使用**LISTAGG**函数，例如。`SELECT LISTAGG(colmn) FROM table_name;`

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2020-12-28T16:44:04.187

```
+------+----------------------+
| type |        names         |
+------+----------------------+
| cat  | Felon                |
| cat  | Purz                 |
| dog  | Fido                 |
| dog  | Beethoven            |
| dog  | Buddy                |
| bird | Tweety               |
+------+----------------------+ 
```

* * *

```
select group_concat(name) from Pets
group by type 
```

在这里，您可以轻松地在单个 SQL 中获得答案，并且通过在 SQL 中使用 group by，您可以根据该列值分隔结果。您也可以使用自己的自定义分隔符来拆分值

结果：

```
+------+----------------------+
| type |        names         |
+------+----------------------+
| cat  | Felon,Purz           |
| dog  | Fido,Beethoven,Buddy |
| bird | Tweety               |
+------+----------------------+ 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2020-04-04T05:12:06.270

使用最简单的方法 -

```
SELECT GROUP_CONCAT(Column) from table 
```

# postgresql - Sub Query in select clause with Squeryl

> ID：16193153
> 
> 赞同：0
> 
> 时间：2013-04-24T13:21:43.350
> 
> 标签：postgresql, scala, squeryl

I'm trying to replicate the following query usine Squeryl.

```
SELECT c.order_number,p.customer,p.base,( 
  SELECT sum(quantity) FROM "Stock" s where s.base = p.base  
) as stock 
FROM "Card" c, "Part" p WHERE c."partId" = p."idField"; 
```

I have the following code for selecting the Cards and Parts but I cannot see a way to add a sumation into the select clause.

```
from(cards, parts)((c,p) => 
where(c.partId === p.id)    
select(c,p) 
```

Any help is much appreciated!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T16:47:03.310

在 Squeryl 中，您可以[`Queryable`](http://squeryl.org/api/index.html#org.squeryl.Query)在查询的 from 子句中使用任何对象。因此，要创建子查询，类似以下内容应该适合您：

```
def subQuery = from(stock)(s => groupBy(s.base) compute(sum(s.quantity)))

from(cards, parts, subquery)((c, p, sq) =>
  where(c.partId === p.idField and sq.key === p.base)
  select(c.orderNumber, p.customer, sq.measures)) 
```

当然，字段名称可能略有不同，只是猜测类定义。如果您想要整个对象`cards`而`parts`不是原始查询中的单个字段 - 只需将 select 子句更改为：`select(c, p, sq.measures)`

# c++ - 将伪代码翻译成 C++

> ID：16193154
> 
> 赞同：0
> 
> 时间：2013-04-24T13:21:46.977
> 
> 标签：c++, pseudocode

我得到了一个伪代码来翻译成 C++：

```
 Set a Boolean variable “first” to true.
    While another value has been read successfully
          If first is true
          Set the minimum to the value.
          Set first to false.
          Else if the value is less than the minimum
          Set the minimum to the value.
    Print the minimum 
```

这是我的代码：

```
bool first = true;
bool read_value = true;
int value = 0;
int minimum = 0;
cout << "Enter an integer : " ;
cin >> value;
while(cin.hasNextInt())   // error here
{
    cout << "Enter another integer : " ;
    cin >> minimum;
    if( first == true){
        minimum = value;
        first = false;
    }else if ( value < minimum){
        minimum = value;
    }
}
cout << minimum;

system("PAUSE");
return 0; 
```

那里的 hasNextInt 有错误。而且我真的不知道伪代码想要什么。有人可以向我解释吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:24:50.273

标准 C++ 库中没有`hasNextInt()`函数（这就是您无法编译的原因）。但是，Java 中有一个！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T13:27:05.383

这更接近您想要的代码：

```
cout << "Enter an integer : " ;
while( cin >> value )
{
    if( first == true){
        minimum = value;
     first = false;
    }else if ( value < minimum){
        minimum = value;
    }
    cout << "Enter another integer : " ;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T13:29:19.133

那是愚蠢的伪代码。如果没有一些毫无价值的布尔，我们可以做得更好......

```
int min = std::numeric_limits<int>::max();

for(int val; cin >> val)
{
    if(val < min)
        min = val;
}

cout << "Minimum: " << min << '\n'; 
```

# java - 如何使用 onclick 和 java 在 selenium webdriver 中单击图像

> ID：16193157
> 
> 赞同：0
> 
> 时间：2013-04-24T13:21:49.693
> 
> 标签：java, selenium-webdriver

我在具有相同 Img 源和类名的两个表下的同一框架中有一个图像刷新按钮，但刷新按钮的 onclick 是不同的。这是刷新按钮的 HTML 编码。对于第一个刷新按钮：

```
<SPAN class=AddNew onclick=fnRefreshCAStatus();>
  <IMG src="../../SWB/BulkUpload/Images/refresh.gif"> Refresh</SPAN> 
```

对于第二个刷新按钮：

```
<SPAN class=AddNew onclick=fnGetCAAttributeCount()>
  <IMG src="../../SWB/BulkUpload/Images/refresh.gif">&nbsp; Refresh </SPAN> 
```

请帮我继续。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T15:38:43.253

理想情况下，您将为`id`两个跨度定义（不同）属性，然后执行

```
WebDriver driver = getWebDriver();
driver.findElement(By.id("firstSpan")).click(); 
```

如果您将 HTML 保留原样（我不建议这样做），您会这样做

```
int index = 1; // for the second span
WebDriver driver = getWebDriver();
driver.findElements(By.className("AddNew")).get(index).click(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T11:04:48.493

您可以使用 Xpath 索引来做到这一点。喜欢，

拳头找到页面上的所有刷新按钮，

```
List<WebElement> refreshBtn =  driver.findElements(By.xpath("//*[text()='Refresh']")); 
```

然后如果你想点击第一个刷新按钮使用，

```
refreshBtn.get(0).click(); 
```

如果是第二个，

```
refreshBtn.get(1).click(); 
```

# svg - nvd3 Chart - xAxis label

> ID：16193160
> 
> 赞同：3
> 
> 时间：2013-04-24T13:21:53.347
> 
> 标签：svg, d3.js, nvd3.js

How we align the long xAxis labels in zig zag manner? (Don't use rotateLabels), Or Is there any possibility to text wrap for those long xAxis labels in nvd3 charts?

Please find attached images for reference...

**Actual Image with - Issue**

![enter image description here](https://i.stack.imgur.com/RCPXJ.jpg)

**Expected Result - 1**

![enter image description here](https://i.stack.imgur.com/dOSMC.jpg)

**Expected Result - 2**

![enter image description here](https://i.stack.imgur.com/dTbUK.jpg)

Thanks in advance...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T16:15:24.240

**对于预期结果 1：** 您可以添加以下选项：`.staggerLabels(true)`如您[在此处](http://nvd3.org/examples/discreteBar.html)看到的。

**对于预期结果 2：** 在图表中使用它之前，您必须通过用新行替换空格来手动对数据执行此操作。如果您正在处理数字，您还可以查看[d3 字符串格式。](https://github.com/mbostock/d3/wiki/Formatting)

# css - 悬停不与第 n 个孩子一起工作

> ID：16193161
> 
> 赞同：5
> 
> 时间：2013-04-24T13:21:53.580
> 
> 标签：css, hover, css-selectors

他我在探索 CSS 3 的特性时遇到了一些麻烦：

对于一个表格，我制作了这个 CSS：

```
table.sortable tbody tr td {
    border-bottom:1px solid;
    height: 20px;
}

table.sortable tbody tr:hover {
    background-color:#BCD2E5 !important;
}

table.sortable tbody tr:nth-child(odd) td {
    background-color: #F3FAFF;
}
table.sortable tbody tr:nth-child(even) td {
    background-color: #FFFFFF;
}

table.new{
    background-color: rgb(255, 255, 187);
}

table.reaction{
    background-color: rgb(255, 128, 64);
}

table.send{
    background-color: rgba(154, 211, 109, 0.470588);
} 
```

问题是悬停不起作用，但如果我将第 n 个子选择器注释掉，它确实有效。同样在某些情况下，我必须给一些行不同的背景颜色。这是给用户的，所以他们可以很容易地看到一些东西的状态。因此，如果我将一个类分配给`class="send"`一行，它必须从该类发送的背景颜色中获取。

为什么这行不通？！还是我错过了什么！？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-24T13:28:15.260

您正在将`background-color`行`nth-child`应用于`td`. `background-color`上显示在的`td`上方。`background-color``tr`

将您的 CSS 更改为以下内容对我有用（`td`从末尾`nth-child`选择器中删除）：

```
table.sortable tbody tr:hover {
    background-color:#BCD2E5 !important;
}

table.sortable tbody tr:nth-child(odd) {
    background-color: #F3FAFF;
}
table.sortable tbody tr:nth-child(even) {
    background-color: #FFFFFF;
} 
```

* * *

**或者**

添加`td`到`hover`选择器的末尾，如下所示：

```
table.sortable tbody tr:hover td {
    background-color:#BCD2E5 !important;
} 
```

[请参阅此代码笔： http](http://codepen.io/keithwyland/pen/woLmh) ://codepen.io/keithwyland/pen/woLmh

* * *

**还**

如果将选择器移到 CSS 中的选择`hover`器*之后*`nth-child`，则不需要`!important`. 所以，像这样：

```
table.sortable tbody tr:nth-child(odd) {
    background-color: #F3FAFF;
}
table.sortable tbody tr:nth-child(even) {
    background-color: #FFFFFF;
}

table.sortable tbody tr:hover {
    background-color:#BCD2E5;
} 
```

# ios - CLLocationManager 突然没有请求许可，也没有出现在“隐私”选项卡中

> ID：16193162
> 
> 赞同：1
> 
> 时间：2013-04-24T13:21:58.550
> 
> 标签：ios, geolocation, cllocationmanager

在我的应用程序中，我创建了一个处理位置服务的类。例如，我像这样启动位置服务：

```
- (void)startLocationServices{
locationManager = [[CLLocationManager alloc] init];
locationManager.delegate = self;
if([CLLocationManager locationServicesEnabled] == YES && [CLLocationManager authorizationStatus] == kCLAuthorizationStatusAuthorized)
{
    [locationManager startUpdatingLocation];
}
else {
    //NSLog(@"Location services is not enabled");
    //[self locationDeniedPolicy];
}} 
```

如果我需要用户的位置，我会创建这个位置类的视图控制器子类。位置类本身是 UIViewController 的子类。

这曾经工作得很好。当用户导航到这个位置类的子类的视图控制器时，它会第一次请求位置权限。此外，该应用程序将列在“设置”应用程序的隐私选项卡中。

我突然意识到该应用程序不再显示在“隐私”选项卡中，并且也没有请求位置许可。它根本不使用定位服务！我不知道为什么会这样？是 xcode 的更新改变了事情吗？不知道！

有什么线索吗？

# algorithm - 算法：某种版本的生产者/消费者？调度

> ID：16193163
> 
> 赞同：1
> 
> 时间：2013-04-24T13:22:02.510
> 
> 标签：algorithm, scheduled-tasks, scheduling, producer-consumer

我不确定这是否是生产者/消费者问题，但我找不到更好的方式来表达我的问题。

我想知道这个问题（或类似问题）是否已经解决。如果没有，是NP问题吗？这是问题的描述和我要回答的问题

*   假设您有 4 个生产者和 2 个消费者。
*   假设您已经知道生产者将要生产的所有东西（作为项目列表，每个项目的大小不同）
*   假设每个消费者可以以不同的速度消费任何数据（例如，消费者 1 消费任何商品的速度是消费者 2 的两倍）

问题：如果我控制调度程序（意味着哪个消费者得到什么项目），我如何找出哪些项目分配将使消费者最快完成（消耗所有项目）。

我希望这是有道理的。我花了几个小时思考这个问题，然后又花了几个小时寻找可能的解决方案，但仍然没有运气。希望我能从每个人那里得到一些头脑风暴/解决方案。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:54:25.797

我相信这是[装箱问题](http://en.wikipedia.org/wiki/Bin_packing_problem)的一种变体，你有两个不同大小的箱子，而不是一个箱子；您希望最小化使用的 bin 总数，并且您希望使用大致相同数量的每个 bin 类型。这是一个 NP-Hard 问题。

请注意，我认为这里使用的生产者数量不相关。

# jsf-2 - How to get input component's value by index in ajax listener method?

> ID：16193164
> 
> 赞同：1
> 
> 时间：2013-04-24T13:22:04.340
> 
> 标签：jsf-2, primefaces

I'm dynamically generating a `#{materielBean2.nbrsalle}` amount of dropdowns:

```
<c:forEach begin="1" end="#{materielBean2.nbrsalle}" var="i">
    <p:selectOneMenu id="p#{i}" value="#{materielBean2.pole}">
        <f:selectItem itemLabel="Select Pole" itemValue="" />
        <f:selectItems value="#{materielBean2.poles}" />
        <p:ajax event="change" update="s#{i}" listener="#{materielBean2.salleChange(i)}" />
    </p:selectOneMenu>
</c:forEach> 
```

I have a `Map<String, String>` property where I'd like to save the selected values.

```
private Map<String, String> selectedPoles = new HashMap<String, String>(); 
```

The ajax change listener method is as follows:

```
public void sallechange(int i) {
    selectedPoles.put(i, pole);
} 
```

How do I get the selected `pole` value of index `i` in the listener method?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:00:36.457

只需将输入值直接绑定到该映射。

```
<p:selectOneMenu id="p#{i}" value="#{materielBean2.selectedPoles[i]}"> 
```

您只需要更改地图以获取整数键。

```
private Map<Integer, String> selectedPoles = new HashMap<Integer, String>(); 
```

或者也许只是使用一个可以以完全相同的方式访问的简单数组。

```
private String[] selectedPoles = new String[poles.size()]; 
```

无论哪种方式，这样你都可以完全摆脱`<p:ajax>`。JSF 会神奇地为您设置它。

```
<p:selectOneMenu id="p#{i}" value="#{materielBean2.selectedPoles[i]}">
    <f:selectItem itemLabel="Select Pole" itemValue="" />
    <f:selectItems value="#{materielBean2.poles}" />
</p:selectOneMenu> 
```

# ruby-on-rails - Ruby on Rails: BCrypt InvalidSalt Error

> ID：16193166
> 
> 赞同：2
> 
> 时间：2013-04-24T13:22:13.430
> 
> 标签：ruby-on-rails, ruby, bcrypt

I'm new to rails (and ruby in general), so my problem is probably easy to solve. I'm trying to create a simple app where you can create a user and log in. I'm encrypting the password with BCrypt and when i try to log in i get this error: `BCrypt::Errors::InvalidSalt in SessionsController#login_attempt`

Not sure what files i need to share to solve the problem, so i'll start by sharing the files where it says the error occours.

**user.rb**

```
 class User < ActiveRecord::Base
        before_save :encrypt_password
        after_save :clear_password

        attr_accessor :password
        attr_accessible :username, :email, :password, :password_confirmation

        EMAIL_REGEX = /^[A-Z0-9._%+-]+@[A-Z0-9.-]+.[A-Z]{2,4}$/i
        validates :username, :presence => true, :uniqueness => true, :length => { :in => 3..20 }
        validates :email, :presence => true, :uniqueness => true, :format => EMAIL_REGEX
        validates :password, :confirmation => true #password_confirmation attr
        validates_length_of :password, :in => 6..20, :on => :create

        def encrypt_password
            if :password.present?
                self.salt = BCrypt::Engine.generate_salt
                self.encrypted_password= BCrypt::Engine.hash_secret(:password, :salt)
            end
        end

        def clear_password
            self.password = nil
        end

        def self.authenticate(username_or_email="", login_password="")
            if  EMAIL_REGEX.match(username_or_email)    
                user = User.find_by_email(username_or_email)
            else
                user = User.find_by_username(username_or_email)
            end

            if user && user.match_password(login_password)
                return user
            else
                return false
            end
        end

        def match_password(login_password="")
            encrypted_password == BCrypt::Engine.hash_secret(login_password, salt)
        end
    end 
```

**session_controller.rb**

```
class SessionsController < ApplicationController

  before_filter :authenticate_user, :only => [:home, :profile, :setting]
  before_filter :save_login_state, :only => [:login, :login_attempt]

  def login
    #Login Form
  end

  def login_attempt
    authorized_user = User.authenticate(params[:username_or_email],params[:login_password])
    if authorized_user
      flash[:notice] = "Wow Welcome again, you logged in as #{authorized_user.username}"
      redirect_to(:action => 'home')
    else
      flash[:notice] = "Invalid Username or Password"
      flash[:color]= "invalid"
      render "login"    
    end
  end

  def home
  end

  def profile
  end

  def setting
  end

  def logout
  session[:user_id] = nil
  redirect_to :action => 'login'
  end
end 
```

I followed a tutorial to get this far, so if you can please explain the error too.

Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T15:21:34.710

没有必要在db中有一个salt字段，用加密的密码应该就足够了。如果你使用`BCrypt::Password`而不是`BCrypt::Engine`你可以将 salt 和 enc_pasword 保存在同一个字段中。尝试更改这些方法`user.rb`

```
def encrypt_password
    self.encrypted_password = BCrypt::Password.create(password) if password.present?
end

def match_password(login_password="")
    BCrypt::Password.new(password) == login_password
end 
```

# python - Reportlab：从画布链接到内部鸭嘴兽标签

> ID：16193173
> 
> 赞同：1
> 
> 时间：2013-04-24T13:22:32.663
> 
> 标签：python, reportlab

我可以轻松地在我的鸭嘴兽文档的主体中创建链接，在段落对象中使用和标记。

不过，我有一个使用画布的标题（因为它是两遍 afterFlowable 交易），并且我想在标题中放置一个链接，指向鸭嘴兽中定义的锚标签之一。有没有办法做到这一点？

# gwt - JBoss - 无法取消引用对象

> ID：16193174
> 
> 赞同：1
> 
> 时间：2013-04-24T13:22:33.007
> 
> 标签：gwt, jboss, datasource, jndi, connection-pooling

我用码头创建了 GWT 项目，并使用 JNDI 作为数据源。当我运行 GWT 应用程序时，一切正常，但是当我将 .war 文件复制到 JBoss 并运行它时，出现错误。JBoss 版本 - 4.2.3.GA

```
javax.naming.NamingException: Could not dereference object [Root exception is 
javax.naming.NameNotFoundException: jdbc not bound] at 
org.jnp.interfaces.NamingContext.resolveLink(NamingContext.java:1215) at 
org.jnp.interfaces.NamingContext.lookup(NamingContext.java:758) at 
org.jnp.interfaces.NamingContext.lookup(NamingContext.java:774) at 
org.jnp.interfaces.NamingContext.lookup(NamingContext.java:627) at 
javax.naming.InitialContext.lookup(InitialContext.java:392) at 
```

jboss-web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<jboss-web>
    <resource-ref>
        <res-ref-name>jdbc/base</res-ref-name>
        <jndi-name>jdbc/base</jndi-name>
        <res-type>javax.sql.DataSource</res-type>
        <res-auth>Container</res-auth>
    </resource-ref>
</jboss-web> 
```

码头-env.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE Configure PUBLIC "-//Mort Bay Consulting//DTD Configure//EN" "http://jetty.mortbay.org/configure.dtd">
<Configure class="org.mortbay.jetty.webapp.WebAppContext">
<New id="base" class="org.mortbay.jetty.plus.naming.Resource">
    <Arg>jdbc/base</Arg>
    <Arg>
     <New class="org.apache.tomcat.jdbc.pool.DataSource">
            <Set name="driverClassName">org.postgresql.Driver</Set>
            <Set name="url">jdbc:postgresql://database/test</Set>
            <Set name="username">user</Set>
            <Set name="password">password</Set>
            <Set name="maxActive">10</Set>
            <Set name="maxIdle">4</Set>
     </New>
    </Arg>
</New>
</Configure> 
```

web.xml

```
<resource-ref>
    <description>My DataSource Reference</description>
    <res-ref-name>jdbc/base</res-ref-name>
    <res-type>javax.sql.DataSource</res-type>
    <res-auth>Container</res-auth>
</resource-ref> 
```

GreetingServiceImpl.java

```
 InitialContext ic = new InitialContext();
        DataSource ds = (DataSource)ic.lookup("java:comp/env/jdbc/base");
        Connection con = ds.getConnection(); 
```

怎么了？感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:08:33.773

我已经解决了我的问题。我创建了 base-ds.xml

```
<datasources>
   <local-tx-datasource>
      <jndi-name>jdbc/base</jndi-name>
      <connection-url>jdbc:postgresql://database/test</connection-url>
      <driver-class>org.postgresql.Driver</driver-class>
      <user-name>user</user-name>
      <password>password</password>
      <min-pool-size>4</min-pool-size>
      <max-pool-size>10</max-pool-size>
   </local-tx-datasource>
</datasources> 
```

我在 jboss-web.xml 中更改了 jndi-name

```
 <jndi-name>java:/jdbc/base</jndi-name> 
```

如何在 JBoss 中为该数据源连接 Tomcat 连接池？

# javascript - 将脚本从内部存储注入到cordova inappbrowser

> ID：16193182
> 
> 赞同：2
> 
> 时间：2013-04-24T13:23:00.390
> 
> 标签：javascript, cordova, phonegap-plugins, inappbrowser

我们可以在 Apache Cordova 中使用它来实例化 Inappbrowser：

```
var ref = window.open('http://apache.org', '_blank', 'location=yes'); 
```

非常直接:)

现在，我想从**InAppBrowser**中加载的页面中的本地存储注入一些脚本。

在科尔多瓦的[InAppBrowser.java](https://github.com/apache/cordova-android/blob/master/framework/src/org/apache/cordova/InAppBrowser.java)我发现了这个方法：

```
private void injectDeferredObject(String source, String jsWrapper) 
```

但不知道如何从 Cordova Api 调用它:(

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T18:32:24.430

看起来这是一个非常新的功能，允许使用类似`ref.executeScript(details,callback)`. 它实际上记录在这里：[https](https://github.com/apache/cordova-docs/blob/master/docs/en/edge/cordova/inappbrowser/inappbrowser.md#executescript) ://github.com/apache/cordova-docs/blob/master/docs/en/edge/cordova/inappbrowser/inappbrowser.md#executescript但看起来不像文档网站更新了。

当前构建的 JavaScript 版本似乎没有这个（只需搜索“executeScript”，你会发现它不存在。看起来你可以尝试构建自己的 JavaScript 副本来测试它，因为存储库中已经存在桥代码：[https](https://github.com/apache/cordova-js/blob/master/lib/common/plugin/InAppBrowser.js#L55) ://github.com/apache/cordova-js/blob/master/lib/common/plugin/InAppBrowser.js#L55 ，正如您所指出的，已经有 Java 代码支持这一点（所以，它至少应该在 Android 上工作。）我不确定这个功能的测试或支持有多好，所以你可能会遇到一些问题。你应该尝试一下，让我们知道！

您可以在此处找到构建 JavaScript 的说明：[https ://github.com/apache/cordova-js](https://github.com/apache/cordova-js)

# python - Python and lambda functions

> ID：16193183
> 
> 赞同：1
> 
> 时间：2013-04-24T13:23:00.707
> 
> 标签：python, python-2.7, lambda

Might seems like a nooby question (myabe it is), but why does python behave like that:

```
>>>a = []
>>>for i in xrange(5):
...    a.append(lambda: i + 1)

>>>a[0]()
5
>>>a[1]()
5
>>>a[2]()
5
>>>a[3]()
5
>>>a[4]()
5 
```

when there are different functions stored in a:

```
>>aaa
[<function <lambda> at 0x100499d70>, <function <lambda> at 0x100499e60>, <function <lambda> at 0x100499ed8>, <function <lambda> at 0x100499de8>, <function <lambda> at 0x10049f050>] 
```

or have I missed something really important in python docs?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T13:29:23.100

`i`闭包建立在最终为的值之上`4`。

如果你想保留`i`在 lambda 中，你可以使用默认变量。

```
>>>for i in xrange(5):
...    a.append(lambda x=i: x + 1) 
```

# oracle - SQL loop to input employees

> ID：16193191
> 
> 赞同：0
> 
> 时间：2013-04-24T13:23:16.647
> 
> 标签：oracle, loops, plsql

I am trying to create a FOR loop which inserts 1000 employees into the employee table. It's ok if they have the same name but the other 3 values must have different values. I need the emp_id to insert the 1000 employees from 307_1307, have the manager emp_id either 304 or 305(randomly chosen) and the salary between 22,000 and 200,000(randomly chosen). How would I go about doing this and how would I assign the sequence to be the primary key i.e the emp_id going from 307 to 1307?

```
CREATE SEQUENCE seq6
START WITH 307
INCREMENT BY 1
CACHE 10
NOCYCLE;

BEGIN
FOR i IN 1..1000 LOOP
INSERT INTO EMPLOYEE (EMP_ID, FNAME, LNAME, MANAGER_EMP_ID, salary) VALUES('307 - 1307','tommy', 'walsh', '304 or 305', 'between 22000 and 200,000');
END LOOP;
END;
/ 
```

Any ideas?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T13:59:14.973

使用 sequence 和 DBMS_RANDOM 包函数：

```
INSERT INTO EMPLOYEE (EMP_ID, FNAME, LNAME, MANAGER_EMP_ID, salary)
VALUES(seq6.nextVal,'tommy', 'walsh',
   CAST(DBMS_RANDOM.VALUE(304,305) AS INTEGER),
   CAST(DBMS_RANDOM.VALUE(22,200) AS INTEGER)*1000); 
```

# asp.net-mvc - ASP.NET-MVC 3 force log for every page

> ID：16193193
> 
> 赞同：0
> 
> 时间：2013-04-24T13:23:17.447
> 
> 标签：asp.net-mvc, asp.net-mvc-3, authentication

I'm new to ASP.NET and not the most experienced of programmers.

I have recently been introduced to ASP.NET-MVC 3 for an application I'd like to build.

I have the basic functionality down but am not to familiar with the login.

The built-in login works for what I want (just something simple), but I want to ensure that a login must be used before any of the actual functionality appears.

What would be the best way of doing this?

Any help would be greatly appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:29:33.257

在您的控制器中，您应该使用 Authorize 属性，这会在执行修饰操作之前强制授权。

例如，在您的家庭控制器中添加以下`[Authorize]`内容

```
[Authorize]
public ViewResult Index()
{
    return View();
} 
```

您还可以装饰整个控制器，这将强制所有方法在使用之前被授权，例如：

```
[Authorize]
public class HomeController : Controller
{
    public ActionResult Index()
    {
        return View();
    }
} 
```

# python - 从 numpy 数组中获取最小的 N 值，忽略 inf 和 nan

> ID：16193202
> 
> 赞同：7
> 
> 时间：2013-04-24T13:23:36.650
> 
> 标签：python, arrays, math, numpy

我需要一个好的、快速的方法来从一个可以有任意多个`nan`和/或`inf`值的 numpy 数组中找到 10 个最小的实数值。

我需要确定这些最小实际值的索引，而不是值本身。

我从 numpy中找到了`argmin`and函数。`nanargmin`他们并没有真正完成工作，因为我还想指定超过 1 个值，例如我想要最小的 100 个值。此外，当数组中存在最小值时，它们都返回`-inf`值作为最小值。

`heapq.nsmallest`有点工作，但它也返回`nan`和`-inf`值作为最小值。它也没有给我我正在寻找的索引。

在这里的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-24T13:35:24.580

唯一应该丢弃的值是负无限值。所以试试：

```
import numpy as np
a = np.random.rand(20)
a[4] = -np.inf
k = 10
a[np.isneginf(a)] = inf
result = a[np.argsort(a)[:k]] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T01:25:36.833

在我看来，您可以只`n`从排序数组中获取第一个有限值，而不是尝试修改原始数组，这可能很危险。

```
n = 10
b = np.sort(a)
smalls = b[np.isfinite(b)][n:] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T13:41:20.910

`inf`你可以像这样找到和的索引`Nan`：

```
a=np.array([[12,12,111],[np.inf,np.inf,1,2,3],[np.nan,7,8]]) 
```

您可以循环`a`并检查它：

```
for item in a:    
    idxInf=(np.isnan(a[item])).nonzero()
    idxNan=(np.isnan(a[item])).nonzero() 
```

IE：

```
In [17]: (np.isnan(a[2]))
Out[17]: array([ True, False, False], dtype=bool)

In [18]: (np.isnan(a[2])).nonzero()
Out[18]: (array([0]),) 
```

# objective-c - 带有变量的目标 c 操作

> ID：16193204
> 
> 赞同：5
> 
> 时间：2013-04-24T13:23:41.930
> 
> 标签：objective-c, parsing

有没有一种相对简单的方法可以在 Objective C 中将数学运算符与字符串变量一起使用？

例如：

字符串“x*x”应该返回“x^2”

字符串“x/x”应该返回“1”

我正在寻找实际上会使用变量名称“x”而没有分配数值并以“x”形式返回答案的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:28:54.570

如果您将“x”值作为字符串，那么您可以将其评估为：

```
NSString *string=@"3*3";
NSExpression *expression = [NSExpression expressionWithFormat:string];
float result = [[expression expressionValueWithObject:nil context:nil] floatValue];
NSLog(@"%f", result); 
```

还，

```
NSString *string=@"34*(2.56+1.79)-42/1.5";
NSNumber *result=[NSExpression expressionWithFormat:string];
NSLog(@"%@", result); 
```

根据您的要求将任何数据类型更改`float`为`int`etc

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T14:08:36.133

我已经寻找了一个进行代数操作的Objective C lib，但还没有找到太多。

因此，您最好的选择可能是使用 C 库（毕竟，Objective C 是 ANSI C 的超集，您可以将两者混合使用）。

查看这个 C 数学库列表：

[http://www.mathtools.net/C_C__/Mathematics/](http://www.mathtools.net/C_C__/Mathematics/)

从该列表中，似乎[Mathomatic](http://mathomatic.org/)可能有用。

**在 Objective C 中使用 C 库的两种策略：**

1.  只需从您的 Objective C 代码中调用 C 函数

2.  为 C 库创建一个 Objective C 包装器并使用它（并可能将其发布给其他人使用:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-08T16:57:43.657

您可以查看 GiNaC 库 (www.ginac.de)。它是开源数学库。您可以使用此库简化代数表达式。您还可以在 OSX 上编译它并将其链接到您的 Xcode 项目中，就像静态 C++ 库一样。1.您需要下载Ginac、CLN和Pkg-Config（[http://www.freedesktop.org/wiki/Software/pkg-config/](http://www.freedesktop.org/wiki/Software/pkg-config/)）。2\. 解压并编译 /usr/local 目录下的 Pkg-Config 3\. 解压并编译 CLN 4\. 解压并编译 Ginac

然后转到 Xcode 中的项目设置，选择您的目标，并将您的头文件路径放在 Build Settings 中的 Header Search Path 中。然后转到 Build Phases - Link Binary With Libraries 单击“+”并选择 Add Other，然后选择您编译的库文件 libginac.a 这就是我的想法。不要忘记将您的 ginac.h 文件包含到您的类头文件中。

```
#include <ginac.h> 
```

# jquery - 如何在 jQuery keydown 事件处理程序中检测 SHIFT 键？

> ID：16193205
> 
> 赞同：6
> 
> 时间：2013-04-24T13:23:42.747
> 
> 标签：jquery, events, keyboard

我有以下 jQuery 函数

```
jQuery.fn.integerMask =
function () {
return this.each(function () {
  $(this).keydown(function (e) {
    var key = (e.keyCode ? e.keyCode : e.which);
    // allow backspace, tab, delete, arrows, numbers and keypad numbers ONLY
    return (
              key == 8 ||
              key == 9 ||
              key == 46 ||
              key == 37 ||
              key == 39 ||
              (key >= 48 && key <= 57) ||
              (key >= 96 && key <= 105));
              );
      });
    });
  }; 
```

用于输入数字。问题是 SHIFT+8 会导致输入星号 * 字符。似乎允许“8”键与 SHIFT 组合。如何防止 SHIFT+8 被接受并插入“*”字符？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-07-02T02:49:47.490

```
<!DOCTYPE html>
<html>
<head>
<script>
function isKeyPressed(event)
{
if (event.shiftKey==1)
  {
  alert("The shift key was pressed!");
  }
else
  {
  alert("The shift key was NOT pressed!");
  }
}
</script>
</head>

<body onmousedown="isKeyPressed(event)">

<p>Click somewhere in the document. An alert box will tell you if you pressed the shift key or not.</p>

</body>
</html> 
```

关键字-> event.shiftKey

来源：[http ://www.w3schools.com/jsref/tryit.asp?filename=try_dom_event_shiftkey](http://www.w3schools.com/jsref/tryit.asp?filename=try_dom_event_shiftkey)

# ember.js - The best way to achieve a find in ember js and not lose the current controller scope

> ID：16193209
> 
> 赞同：0
> 
> 时间：2013-04-24T13:24:00.027
> 
> 标签：ember.js

I want to do an ember js find based on an id.

If an object with that id exists I would like to perform some logic on that object.

So, I do so based on the following code:

```
Cluey.UsersController = Ember.ArrayController.extend({
  keypadNum: "",
  loginWithPin: function() {
    var res;
    console.log("Login with pin: " + this.get('loginPin'));
    res = Cluey.User.find({
      pin: this.get('loginPin')
    });
    return res.on('didLoad', function() {
      var user;
      if (res.get('firstObject') != null) {
        user = res.objectAt(0);
        return this.doLogin(user);
      } else {
        return alert("User not found with pin " + this.get('loginPin'));
      }
    });
  },
  doLogin: function(user) {
    //some code
  }
}); 
```

The problem is that once I am in the res.on('didLoad') callback, I lose the scope of the controller, and therefore when I try to access this.get("loginPin"), it is returned as undefined.

Does anyone know how to solve this.

thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T14:53:51.683

如果您将对象作为`on`事件中的第二个参数传递，它将成为回调中的上下文。

`this`您可以作为事件的第二个参数传递`didLoad`：

```
res.on('didLoad', this, function() {
  var user;
  if (res.get('firstObject') != null) {
    user = res.objectAt(0);
    return this.doLogin(user);
  } else {
    return alert("User not found with pin " + this.get('loginPin'));
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-03T20:43:37.957

您可以创建一个名为`self`并分配`this`给它的 var。

```
Cluey.UsersController = Ember.ArrayController.extend({
  keypadNum: "",
  var self = this;
  loginWithPin: function() {
    var res;
    console.log("Login with pin: " + this.get('loginPin'));
    res = Cluey.User.find({
      pin: self.get('loginPin')
    });
    return res.on('didLoad', function() {
      var user;
      if (res.get('firstObject') != null) {
        user = res.objectAt(0);
        return this.doLogin(user);
      } else {
        return alert("User not found with pin " + this.get('loginPin'));
      }
    });
  },
  doLogin: function(user) {
    //some code
  }
}); 
```

# .htaccess - 如何使用 wamp 服务器在 magento 中构建多个站点

> ID：16193212
> 
> 赞同：2
> 
> 时间：2013-04-24T13:24:07.473
> 
> 标签：.htaccess, wamp, magento-1.7

我是 magento 的新手，我已经在 VirtueMart 为 joomla 工作了一年，我注意到它没有多商店功能，直到一个朋友把我介绍给 magento。我已在我的 Windows7 上成功地将 magento(1.7.0.2) 安装到 WAMP 2.2 (PHP v5.3.13) 中。

我按照此处的指示成功创建了根类别：[http](http://www.templatemonster.com/help/magento-how-to-set-up-and-manage-multiple-stores.html) ://www.templatemonster.com/help/magento-how-to-set-up-and-manage-multiple-stores.html但就我自己而言，我正在使用子目录（即`//domain/magento`作为主存储和存储`//domain/magento/crunchies`2）。

在后端为脆饼创建了一个根类别。我将 index.php 和 htaccess 从 magento 文件夹（`c:/wamp/www/magento`）复制到 crunchies 文件夹（`c:/wamp/www/magento/crunchise`）。在 crunchies 的 index.php 副本上，`$mageFilenam =‘app/Mage.php’;`我将其更改为`$mageFilename=‘../app/Mage.php’;` 并保存更改，我还打开复制的 htaccess 文件并将以下内容添加到它的结尾：

```
SetEnvIf Host.*MainWebsite.*MAGE_RUN_CODE= base";

SetEnvIfHost .*www.crunchies.com.*MAGE_RUN_TYPE="cruncies_code"; 
```

在 System>manage store of backend 创建的网站名称为：Main Website（用于 main store）和 www.crunchies.com（用于 store2）。

当我指向`domain/magento`我的浏览器时，它显示主页但是当我指向时`domain/magento/crunchies`，我得到`:\"mydirectery"../app/Mage.php was not found.`

请问我该如何解决这个问题？我的 wamp 配置中是否还有其他设置遗漏？

# if-statement - 野牛在别处晃来晃去

> ID：16193214
> 
> 赞同：2
> 
> 时间：2013-04-24T13:24:10.987
> 
> 标签：if-statement, compiler-construction, grammar, bison

我的语法中有以下规则：

```
block:                  TLBRACE statements TRBRACE
                        | TLBRACE TRBRACE
                        ;

statements:             statement 
                        | statements statement 
                        ;

statement:              TIF TLPAREN expression TRPAREN TTHEN statement
                        | TIF TLPAREN expression TRPAREN TTHEN statement TELSE statement
                        | TWHILE TLPAREN expression TRPAREN statement 
                        | TDO statement TLPAREN expression TRPAREN 
                        | TFOR TLPAREN forinits TSEMICOLON expression TSEMICOLON expressions TRPAREN statement 
                        | block 
                        | declaration TSEMICOLON
                        | expression TSEMICOLON
                        ; 
```

我知道悬空的 else 问题。这就是我在语法文件顶部指定“%left TELSE”的原因。无论如何，即使我指示 Bison 优先使用 TELSE 令牌，也会产生移位/减少冲突。我还尝试删除“%left TELSE”命令（只是看看它是否有任何区别）并且没有任何变化。我总是有同样的转变/减少冲突。

我使用 Bison 的 --verbose 标志得到的输出是：

```
State 117

   32 statement: "if" "(" expression ")" "then" statement .  ["identifier", "string value", "double", "int", "lint", "message", "string", "double value", "int value", "(", "{", "}", "-", "do", "else", "for", "if", "while", "binary not"]
   33          | "if" "(" expression ")" "then" statement . "else" statement

    "else"  shift and going to state 122

    "else"    [reducing with rule 32 (statement)]
    $default  reducing with rule 32 (statement) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T14:38:29.083

我在声明时摆脱了冲突`%left TTHEN`。我不能给你一个完整的解释，但运算符优先级与一个接一个地比较运算符有关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-28T08:23:19.173

使用`%nonassoc`.

```
%nonassoc THEN

%nonassoc ELSE

%%

statement:              TIF TLPAREN expression TRPAREN TTHEN statement %prec THEN

                        | TIF TLPAREN expression TRPAREN TTHEN statement TELSE statement

%% 
```

在这里，解析器将令牌推入堆栈，当`IF`表达式被推送时，下一个令牌是`ELSE`，就会发生冲突。

解析器应该根据`if_statement`规则减少 IF 表达式，或者它应该将下一个`ELSE`标记移入堆栈。您必须确定规则的优先级，在这种情况下，您必须比使用and赋予`ELSE`令牌更高的优先级。在优先级大于，并且通过使用优先级小于并且冲突得到解决。`if_statement``%nonassoc``%prec``%nonassoc``ELSE``THEN``%prec``if_statment``if_else_statment`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T12:12:49.047

这是一个经常被问到的问题。看看[改革语法以消除 if-then-else 中的 shift reduce 冲突，](https://stackoverflow.com/questions/12731922/reforming-the-grammar-to-remove-shift-reduce-conflict/12734499#12734499)它解释了冲突解决的工作原理。

# java - Error while publishing Bean through JMX

> ID：16193217
> 
> 赞同：0
> 
> 时间：2013-04-24T13:24:15.327
> 
> 标签：java, jmx

I am trying to register a bean on JMX. I am getting error on line `mbs.registerMBean(metadataObj, name);`. Error says

```
Multiple markers at this line
    - Syntax error on token "(", delete 
     this token
    - Syntax error on token ")", delete 
     this token 
```

I have no idea what it is about.

This bean has basic metadata about request start/end time. **Class**

```
 package test.performance;

public class RequestPerformanceMetadata implements PerformanceMetadataMBean{

    private double startTime;
    private double endTime;
    private double timeTook;
    private String requestType;
    private int numOfRequests;

    PerformanceMetadataMBean metadataObj = new RequestPerformanceMetadata();

    MBeanServer mbs = ManagementFactory.getPlatformMBeanServer();
    ObjectName name = new ObjectName("test.performace:type=PerformanceMetadataMBean");      

    mbs.registerMBean(metadataObj, name);

    public double getTimeTook() {
        return timeTook;
    }
    public void setTimeTook(double timeTook) {
        this.timeTook = timeTook;
    } 
```

**Interface**

```
package test.performance;

public interface PerformanceMetadataMBean {

    double getTimeTook();
    void setTimeTook(double timeTook);
    String getRequestType();
    void setRequestType(String requestType); 
```

On

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T14:27:45.823

这里有很多问题。

从**msb = ....**开始，没有方法.... 它需要在方法中。接下来，**new ObjectName(...)**抛出一个异常，所以你需要将它包装在一个 try/catch 块中。另外，您确定要在**RequestPerformanceMetadata***内*创建*另一个***RequestPerformanceMetadata**实例吗？也许您想简单地注册**这个**实例。

 *******看看这个代码片段：

```
class RequestPerformanceMetadata implements PerformanceMetadataMBean {
    private double startTime;
    private double endTime;
    private double timeTook;
    private String requestType;
    private int numOfRequests;
    private MBeanServer mbs = ManagementFactory.getPlatformMBeanServer();
    private ObjectName name;

    public RequestPerformanceMetadata() {
        try {
            name = new ObjectName("test.performace:type=PerformanceMetadataMBean"); 
            mbs.registerMBean(this, name);     
        } catch (Exception ex) {
            throw new RuntimeException("Yo dog. Bad object name", ex);
        }       
    }    
   //........... snip ...........
} 
```*******

# clojure - Cypher QL doesn't execute atomically query

> ID：16193222
> 
> 赞同：1
> 
> 时间：2013-04-24T13:24:22.297
> 
> 标签：clojure, transactions, neo4j, cypher

I'm starting to work with Neo4j and I noticed a really bad behaviour when updating a property on a node I am reading at the same moment. The clojure code I wrote use Neocons library to communicate with Neo4j:

```
(ns ams.utils.t.test-cypher-error
  (:require [clojurewerkz.neocons.rest :as rest]
            [clojurewerkz.neocons.rest.nodes :as nodes]
            [clojurewerkz.neocons.rest.cypher :as cypher]))

(rest/connect! "http://192.168.0.101:7474/db/data")

(def counter-id (:id (nodes/create {:counter 0})))

(defn update-counter [] (cypher/query "START c = node({id}) SET c.counter = c.counter + 1 RETURN c.counter as counter" {"id" counter-id}))

(doall (apply pcalls (repeat 10 update-counter)))

(println "Counter:" ((comp :counter :data) (nodes/get counter-id)))

(nodes/destroy counter-id) 
```

Guess the result:

`Counter: 4`

Sometimes is 5, sometimes 4, but you got the problem here: between the `START` and the `SET` clause the value of the counter is changed but cypher doesn't catch it!

Two questions here:

*   Am I doing something wrong?
*   Is there any viable unique counter rest generation algorithm in Neo4j?

Neo4j version is 1.9RC1, thanks in advance!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T16:19:30.340

您遇到的问题是 neo4j 没有隐式读锁定。所以有时会发生以下情况：

1.  查询 1 开始
2.  查询 1 将值读取`counter`为 3
3.  查询 1 将`counter`值设置为 3+1 = 4
4.  查询 2 开始
5.  查询 2 读取`counter`值为 4
6.  查询 2 将`counter`值设置为 4+1 = 5

这就是有时会发生的情况：

1.  查询 1 开始
2.  查询 2 开始
3.  查询 1 将值读取`counter`为 3
4.  查询 2 将值读取`counter`为 3
5.  查询 1 将`counter`值设置为 3+1 = 4
6.  查询 2 将`counter`值设置为 3+1 = 4

在读锁定数据库（如大多数 SQL 服务器）中，情况 #2 不可能发生。查询 2 将启动，然后将阻塞，直到查询 1 提交或回滚。

可能有一种方法可以显式设置读取锁，但**不能通过 REST API**。事务[API](http://api.neo4j.org/current/org/neo4j/graphdb/Transaction.html#acquireReadLock%28org.neo4j.graphdb.PropertyContainer%29)看起来很有希望，尽管我不完全确定它能否为您提供您想要的东西，而且，REST 不支持它。

# javascript - how to implement Swipe view in mobile using javascript?

> ID：16193223
> 
> 赞同：4
> 
> 时间：2013-04-24T13:24:24.160
> 
> 标签：javascript, android, cordova, swipeview

I am implementing a project in Phonegap-android.i would like to add a **SWIPE VIEW** for the length of the data available in the database.

Please guide how to implement the swipe view using java script similar to the one in android.

I have tried out with many but was not successful.. i have tried it with **hammer.js,iscroll.js,Swipeview.js,idangerous Swiper.js.**

For, the last two i.e **Swipeview.js,idangerous Swiper.js**,i had an android bug

```
Miss a drag as we are waiting for WebCore's response for touch down. 
```

I tried fixing it with the code

```
document.addEventListener( 'touchstart', function(e){ onStart(e); }, false );
function onStart ( touchEvent ) {
  if( navigator.userAgent.match(/Android/i) ) {
    touchEvent.preventDefault();
  }
} 
```

inspite of this code i faced the same WARNING. Whereas with **hammer.js,iscroll.js** it did not execute properply.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T12:07:48.333

检查以下链接，这些链接将指导您进行滑动视图：

1.  [iscroll-4](http://cubiq.org/iscroll-4)
2.  [扫一扫](http://swipejs.com/)
3.  [http://cubiq.org/swipeview](http://cubiq.org/swipeview)

# sharepoint-2010 - Sharepoint farm solution recycle which application pool?

> ID：16193225
> 
> 赞同：0
> 
> 时间：2013-04-24T13:24:30.247
> 
> 标签：sharepoint-2010, application-pool, farm-solution

I have SharePoint Project which deploy as Farm Solution. I have multiple Web Application (SPWebApplication) in SharePoint. Each Web Application has dedicated application pool. I want to know if I deploy project as Farm Solution then all application pool recycles or particular one application pool will recycle ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T18:49:22.503

您的场解决方案可以部署到多个 Web 应用程序。如果是这种情况，则部署该解决方案的所有 Web 应用程序都将回收。

在 Install-SPSolution 和 Uninstall-SPSolution 脚本中指定 -WebApplication 参数也很重要，否则它们可能会回收所有 Web 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:21:03.923

只有您的 SharePoint 项目的应用程序池会回收。请注意，您在项目的属性窗口中定义站点 url。然后，当您部署项目时，请注意在“输出”窗口中，您可以看到：

```
Recycle IIS Application Pool: 
    Recycling IIS application pool '<application pool name>'... 
```

因此，只有与您的站点 url 相关的应用程序池将被回收。

# liquibase - modifyDataType in Liquibase against SQL Server

> ID：16193227
> 
> 赞同：1
> 
> 时间：2013-04-24T13:24:32.310
> 
> 标签：liquibase

I am trying to modify the data type on a number of columns from int to bigint using:

```
<modifyDataType tableName="ACCESS_HISTORY" columnName="ID" newDataType="${LongType}"/> 
```

Where I have defined LongType to be:

```
<property name="LongType" value="bigint" dbms="mssql"/> 
```

I noticed in the Liquibase JIRA ([https://liquibase.jira.com/browse/CORE-1062](https://liquibase.jira.com/browse/CORE-1062)) that there is a known issue from 2011 relating to the PKs and FKs that need to be dropped. Dropping and re-creating the keys isn't really an option for me.

The error I got was:

```
liquibase.exception.MigrationFailedExc
eption: Migration failed for change set ChangeColumnTypes.xml::4-4-060
-2::thof:
     Reason: liquibase.exception.DatabaseException: Error executing SQL ALTER TA
BLE [dbo].[ACCESS_HISTORY] ALTER COLUMN [ID] BIGINT: The object 'PK_Access_Histo
ry' is dependent on column 'ID'.:
          Caused By: Error executing SQL ALTER TABLE [dbo].[ACCESS_HISTORY] ALTE 
```

R COLUMN [ID] BIGINT: The object 'PK_Access_History' is dependent on column 'ID'

I was wondering if anyone had got around this? Thanks in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:38:37.790

恐怕除非你放弃 PK 约束，否则目前没有办法做到这一点。看起来您正在谈论的错误虽然计划在 liquibase 的第 3 版中修复，但是此版本没有发布日期。

对不起！

由于 Liquibase 是开源的，您始终可以自己修复错误。:)

# xml - XML Schema Use Attribute Cannot Appear in Element

> ID：16193228
> 
> 赞同：4
> 
> 时间：2013-04-24T13:24:35.703
> 
> 标签：xml, xsd

So when I put in the `use ="required"` attribute into my schema for an XML assignment, I get the following message:

> s4s-att-not-allowed: Attribute 'use' cannot appear in element 'element'.

What does it mean? It doesn't seem to be affecting my code at all, and the use attribute is required for this assignment.

Schema Code:

```
<?xml version="1.0" encoding="UTF-8"?>

<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
<xs:element name="Inventory">
<xs:complexType>
  <xs:sequence>
    <xs:element name="Items" use="required">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="PartID" type="xs:ID" use="required"/>
          <xs:element name="Part_Desc" type="xs:string" use="required"/>
          <xs:element name="Price" type="xs:decimal" use="required"/>
                        <xs:restriction base="xs:decimal">
                 <xs:fractionDigits value="2"/>
                </xs:restriction>
        </xs:sequence>
        <xs:attribute name="vendor_id" type="xs:int" use="required"/>
       </xs:complexType>
       </xs:element>
      </xs:sequence>
    </xs:complexType>
   </xs:element>
</xs:schema> 
```

And here is my XML code:

```
<?xml version="1.0" encoding="UTF-8"?>
   <Inventory xsi:noNamespaceSchemaLocation="exam.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

<Items vendor_id="2">        
<PartID>a101</PartID>       
<Part_Desc>Keyboard</Part_Desc>        
<Price>79.99</Price>    
</Items>    

 <Items vendor_id="5">        
 <PartID>a404</PartID>        
 <Part_Desc>Wireless Mouse</Part_Desc>        
 <Price>59.99</Price>    
 </Items>    

 <Items vendor_id="3">        
 <PartID>a120</PartID>       
 <Part_Desc>2 GB USB Drive</Part_Desc>        
 <Price>18.99</Price>   
 </Items>    

 <Items vendor_id="8">        
 <PartID>c506</PartID>   
 <Part_Desc>24" Monitor</Part_Desc>        
 <Price>459.99</Price>  
 </Items>

 </Inventory> 
```

The code seems to work still, there are not errors.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T15:00:01.687

该`use`属性仅对`xs:attribute`元素有效。

如果要指定元素是必需的还是可选的，请使用该`minOccurs`属性。

所需元素：

```
<xs:element name="PartID" type="xs:ID" minOccurs="1"/> 
```

元素可选：

```
<xs:element name="PartID" type="xs:ID" minOccurs="0"/> 
```

请注意，默认情况下`minOccurs`是`1`，而默认情况下`use`是`optional`。

**更新**

的使用`restriction`需要定义一个（简单）类型。这个：

```
 <xs:element name="Price" minOccurs="1">
   <xs:simpleType>
     <xs:restriction base="xs:decimal">
       <xs:fractionDigits value="2"/>
     </xs:restriction>
   </xs:simpleType>
 </xs:element> 
```

定义`Price`为小数部分为 2 位的小数。

# html - 表格内按钮的对齐方式

> ID：16193232
> 
> 赞同：1
> 
> 时间：2013-04-24T13:24:42.963
> 
> 标签：html, asp.net, asp.net-mvc-3, html-table

我的页面看起来像：

![在此处输入图像描述](https://i.stack.imgur.com/TulEP.jpg)

我想将“保存”按钮移动到文本区域的右侧，而不是下方。

```
<th style="width:300px; text-align:center;">    
    <div style="position:relative; width:10px;">                       
       <textarea id="Utility" class='<%# GetIdOfCommentBox((int)Eval("id")) %>'
                 type="text" runat="server" rows="5" maxlength="200" />
       <input id="SubmitComments" type="button" value="Save"
              onclick="SubmitButton()"
              style="background-color:#EBEBFF; font-family:'Tahoma'; padding-left:3.8em; padding-right:3.8em; padding-top:0.3em; padding-bottom:0.3em" /> 
    </div>
</th> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:27:11.490

你可以使用

```
style="float: right" 
```

但为了使用它，您需要将容器 div `width`(10px) 更改为更大的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T13:28:06.473

你在使用某种 .css 吗？

如果您正在使用它：

```
.SubmitComments{
margin-right:0px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T13:33:45.030

```
<div style='float:right;width:100%'><input id="SubmitComments" type="button" value="Save" ... /></div>
<div style='clear:both'></div> 
```

# iphone - 使用填充使 UIWebView 内容居中

> ID：16193233
> 
> 赞同：1
> 
> 时间：2013-04-24T13:24:43.913
> 
> 标签：iphone, ios, objective-c

我有一个加载 html5 横幅的 UIView。我在横幅的每一侧都得到了填充，这是可以预料的，因为横幅宽度比 UIWebView 短。但是.. 每边的填充比我应该得到的要大得多。

如果横幅比 UIWebView 短，我只想让横幅居中。

而不是看起来像这样：（其中 X 是横幅，O 是填充）

|OOXXXXXXOO|

它看起来像这样：

|OOOOXXXXXX|

在这里，如果我启用滚动，我可以像第一个示例一样将其居中。

我该如何解决？

**代码**

```
UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:bannerIdentifier];

if (!cell) {

cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"bannerCell"];
UIWebView *webView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, cell.contentView.bounds.size.width, cell.contentView.bounds.size.height)];
webView.autoresizingMask = UIViewAutoresizingFlexibleHeight|UIViewAutoresizingFlexibleWidth|UIViewAutoresizingFlexibleLeftMargin|UIViewAutoresizingFlexibleRightMargin;
webView.userInteractionEnabled = YES;
webView.backgroundColor = [UIColor clearColor];
webView.opaque = NO;
webView.delegate = self;
webView.scrollView.bounces = NO;
webView.scrollView.scrollEnabled = NO;
webView.scalesPageToFit = YES;

NSURL *url = [NSURL URLWithString:@"http://example.com/page.html"];
NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
[webView loadRequest:requestObj];
[cell.contentView addSubview:webView];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T14:27:30.240

事情是 UIWebView 显示 HTML，这意味着，如果您的 HTML 必须按照您的意愿呈现 - 实现此目的的唯一正确方法是修复加载的 HTML（和/或 css）。您可以通过以下几种方式做到这一点：

1.  如果您可以访问服务器上的 HTML 数据，您可以调整它以在 UIWebView 中正确呈现。
2.  如果您无权访问服务器上的 HTML 数据，您可以使用 stringByEvaluatingJavaScriptFromString: 并修复 DOM 中所需的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T14:34:30.367

您可以使用`stringByEvaluatingJavaScriptFromString:`Javascript 查询 DOM 以获取所需元素的宽度。然后，您可以调整 webview 的大小以适合该大小。

这给了你宽度： `document.getElementById('YOURID').offsetWidth;`

# wpf - 在数据网格模板列标题中实现组合框全选按钮

> ID：16193235
> 
> 赞同：2
> 
> 时间：2013-04-24T13:24:47.953
> 
> 标签：wpf, binding, datagrid, datagridtemplatecolumn

在我的 CreateBatchViewModel 类中——>我正在绑定的 CreateBatch.cs 的视图模型

```
Datagrid ItemsSource="{Binding VersionList,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay}" 
```

其中 VersionList 是 CreateBatchViewModel 类中的一个 Observable 集合属性，这样 DataGrid:VersionId、DocumentId 等中的所有属性都绑定到 VersionGridViewVM 类。

```
public ObservableCollection<VersionGridViewVM> VersionList
{
  get 
  {
return _versionList;
  }
  set 
  {
if (value != null)
    _versionList = value;
RaisePropertyChanged("VersionList");
  }
} 
```

**我希望模板标题列中的组合框绑定到 CreateBatchViewModel 中的 CheckALL 属性**。怎么做？CreateBatch.xaml（数据网格）

```
<DataGrid.Columns>
<DataGridTemplateColumn>
<DataGridTemplateColumn.Header>
<CheckBox IsChecked="{Binding     Path=CreateBatchViewModel.CheckAll,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay}">
</CheckBox>
</DataGridTemplateColumn.Header>
<DataGridTemplateColumn.CellTemplate>
<DataTemplate>
<CheckBox IsChecked="{Binding IsChecked,UpdateSourceTrigger=PropertyChanged}">            </CheckBox>
</DataTemplate>
</DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn>
<DataGridTextColumn Header="Version ID" Binding="{Binding VersionId}"/>
<DataGridTextColumn Header="Document ID" Binding="{Binding DocumentId}"/>
<DataGridTextColumn Header="Version Format" Binding="{Binding VersionFormat}"/>
</DataGrid.Columns> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T14:31:47.857

试试这个：

```
<DataGridTemplateColumn>
    <DataGridTemplateColumn.Header>
        <CheckBox IsChecked="{Binding DataContext.CheckAll, 
                              RelativeSource={RelativeSource FindAncestor, AncestorType=DataGrid}}" />
    </DataGridTemplateColumn.Header>
</DataGridTemplateColumn> 
```

# performance - 提高 Web 服务性能

> ID：16193238
> 
> 赞同：1
> 
> 时间：2013-04-24T13:24:50.073
> 
> 标签：performance, web-services, web-applications, architecture

我有一个 Web 服务，它需要很少的参数，基于我需要应用一些业务逻辑并返回字符串值（旧或新）的参数，该服务将在生产环境中频繁命中（每秒超过 10 个请求）。实现业务逻辑的最佳方式是什么，我希望服务非常快速且响应迅速。

1.  将数据（条件）存储在 SQL 表中，并在 C# 中应用业务逻辑并返回值。
2.  将数据（条件）存储在 XML 文件中并每次读取文件，并在 C# 中应用业务逻辑并返回值。
3.  将数据（条件）存储在 SQL 表中并编写存储过程以实现 SP 侧的业务逻辑并将值返回给服务。

注意：数据（条件）不会经常变化。

请提出解决此问题的最佳方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:43:22.927

最快的方法是将一些内存缓存层（例如redis）推送到您的业务逻辑前面。该解决方案的有效性取决于可能有​​多少不同的参数组合。如果不是很多 - 您可以将它们全部存储在内存中，并且如果条件已更改，则始终使缓存无效。

你说数据不会经常变化。我的问题是 - 如果数据（条件）变化必须实时呈现给用户，或者任何延迟都是可能的？如果是这样，您可以使用反向代理缓存（例如清漆） - 这应该非常快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T14:55:22.207

过早的优化是一件危险的事情。我的 2 美分，我建议尽可能快速轻松地先构建它。然后“让它变得更好”。添加图层等。最后一步是“让它更快”。在迈出第一步之前，您正在考虑最后一步。

# objective-c - Post data on web server with web service

> ID：16193243
> 
> 赞同：1
> 
> 时间：2013-04-24T13:25:14.800
> 
> 标签：objective-c, json, web-services, ios5

Hello I am tying to save data on web server with a web service implemented in PHP.

I am trying below code to do it. I am getting response from server but the data is not getting saved to server. I have wasted 5-6 hours of the day in googling and trying code given on net. But nothing seems to work :(

```
NSDictionary *someInfo = [NSDictionary dictionaryWithObjectsAndKeys:
                                      txtTreasureName.text, @"name",
                                      txtDescription.text, @"description",
                                      txtMaterials.text, @"materials",
                                      @"77.3833", @"longitude",
                                      @"29.0167", @"latitude",
                                        categoryIdStr, @"categoryId",
                                      nil];

        NSError *error;
        NSData *jsonData = [NSJSONSerialization dataWithJSONObject:treasureInfo
                                                        options:NSJSONWritingPrettyPrinted 
                                                            error:&error];    

        if (! jsonData) {

            DLog(@"Got an error: %@", error);

        } else {
        NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];        
        NSString *urlString = @"http://www.myurl.php";

        NSURL *url = [NSURL URLWithString:urlString];        
        [request setURL:url];
        [request setHTTPMethod:@"POST"];

        [request setValue:@"application/json"
    forHTTPHeaderField:@"Content-Type"];

        [request setValue:@"application/json"
    forHTTPHeaderField:@"Accept"];

        [request setValue:[NSString stringWithFormat:@"%d",
                           [jsonData length]]
       forHTTPHeaderField:@"Content-length"];

        [request setHTTPBody:jsonData];

        DLog(@"%@", request);

        [[NSURLConnection alloc]
         initWithRequest:request
         delegate:self];

        // Print json
        DLog(@"JSON summary: %@", [[NSString alloc] initWithData:jsonData
                                                        encoding:NSUTF8StringEncoding]);

        NSOperationQueue *queue = [[NSOperationQueue alloc] init];            
        [NSURLConnection sendAsynchronousRequest:request
                                                      queue:queue
                                          completionHandler:^(NSURLResponse *response,
                                                              NSData *data, NSError *error) {

                                              if ([data length] &&
                                                  error == nil) {

                                                  DLog(@"%@", [[NSString alloc] initWithData:data
                                                                                    encoding:NSUTF8StringEncoding]);
                                                  if ([self shouldDismiss]) {

                                                      [self dismissViewControllerAnimated:YES
                                                                               completion:nil];

                                                  }

                                              }                                             
                                          }];      

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T15:21:24.700

在函数中设置请求 URL，您已经创建了数据字典

```
NSDictionary *someInfo = [NSDictionary dictionaryWithObjectsAndKeys:
                          txtTreasureName.text, @"name",
                          txtDescription.text, @"description",
                          txtMaterials.text, @"materials",
                          @"77.3833", @"longitude",
                          @"29.0167", @"latitude",
                          categoryIdStr, @"categoryId",
                          nil]; 
```

将此函数添加到您的实现文件并调用它，其余的将不会被此函数

```
[self postWith:someInfo]; 
```

添加这个

```
- (void)postWith:(NSDictionary *)post_vars
{
#warning Add your Webservice URL here
    NSString *urlString = [NSString stringWithFormat:@"YourHostString"];

    NSURL *url = [NSURL URLWithString:urlString];
    NSString *boundary = @"----1010101010";

    //  define content type and add Body Boundry
    NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];

    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
    [request setHTTPMethod:@"POST"];
    [request addValue:contentType forHTTPHeaderField: @"Content-Type"];

    NSMutableData *body = [NSMutableData data];
    [body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];

    NSEnumerator *enumerator = [post_vars keyEnumerator];
    NSString *key;
    NSString *value;
    NSString *content_disposition;

    while ((key = (NSString *)[enumerator nextObject])) {
        value = (NSString *)[post_vars objectForKey:key];

        content_disposition = [NSString stringWithFormat:@"Content-Disposition: form-data; name=\"%@\"\r\n\r\n", key];
        [body appendData:[content_disposition dataUsingEncoding:NSUTF8StringEncoding]];
        [body appendData:[value dataUsingEncoding:NSUTF8StringEncoding]];
        [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];        
    }

    //Close the request body with Boundry
    [body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

    [request setHTTPBody:body];
    [request addValue:[NSString stringWithFormat:@"%d", body.length] forHTTPHeaderField: @"Content-Length"];

    NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
    NSString *returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];
    NSLog(@"%@", returnString);        
} 
```

# iphone - iPhone - 适用于 iOS 的 IMA WAV ADPCM 音频流

> ID：16193244
> 
> 赞同：0
> 
> 时间：2013-04-24T13:25:16.320
> 
> 标签：iphone, ffmpeg, audio-streaming, vlc

我正在尝试为将播放实验室视频流的学校项目编写应用程序。他们使用 Foscam 摄像头，据我了解，他们仅以 FFMPEG 和 VLC（FFMPEG 和其他的包装器，对吗？）传输音频。我可以在 UIWebView 中播放视频流，但我不知道如何让音频工作。我在这里阅读了一堆关于不同音频流选项的帖子，但没有一个支持这种格式。我也研究过 VLCKit，但这似乎只适用于 OS X，而不适用于 iOS。

是否有可以从 VLC/FFMPEG 文件流式传输 IMA WAV ADPCM 音频的框架或套件，或者有人知道从 Foscam 获取音频的更好方法吗？

编辑-我对流有更多了解，并且尝试了一些方法。我尝试了 AVPlayer，但发现了音频文件流和音频队列服务，但找不到好的教程。

我还找到了[这个](http://www.cocoawithlove.com/2008/09/streaming-and-playing-live-mp3-stream.html)网站，并用我的流尝试了这个项目，但没有成功。

# qt - 在 Qt Symbian 中捕获 FM 广播

> ID：16193245
> 
> 赞同：1
> 
> 时间：2013-04-24T13:25:17.150
> 
> 标签：qt, audio, symbian, capture

我正在尝试使用 Qt 和我的 Symbian 设备（C7-00 Belle Refresh）捕获 FM 收音机，但没有效果，这是怎么回事？有可能吗？

[音频输入路由 Symbian API](http://www.developer.nokia.com/Community/Wiki/Archived%3aAudio_Input_Routing_Symbian_API)

```
audiosource = new QAudioCaptureSource(this);
audiosource->setAudioInput("FM Radio");

QAudioEncoderSettings settings;
settings.setCodec("audio/vorbis");
settings.setQuality(QtMultimediaKit::HighQuality);

capture = new QMediaRecorder(audiosource, this);
capture->setEncodingSettings(settings, QVideoEncoderSettings(), "audio/mp4");
capture->setOutputLocation(QUrl('e:/record.mp4'));
capture->record();

QTimer::singleShot(seconds * 1000, capture, SLOT(stop())) 
```

# excel - Excel copying part of a string between characters

> ID：16193247
> 
> 赞同：1
> 
> 时间：2013-04-24T13:25:23.263
> 
> 标签：excel

Is there a way of returning part of a string between certain characters in excel? For example my string looks like this:

```
`switchrefid` = {switchrefid: } 
```

I need to cut the part of the string between the ' (apostrophes) so it just returns switchrefid

I'm sure there must be a formula for this i just cant think of the one to use.

Thanks in advance.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T13:39:29.057

只要 ``` 字符在您的数据中恰好出现两次，您就可以：

```
=LEFT(RIGHT(A1, LEN(A1)-FIND("`", A1)), FIND("`",RIGHT(A1, LEN(A1)-FIND("`", A1)))-1) 
```

虽然它非常可怕！

（编辑：当然，这假设您的数据在 A1 中。）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-24T14:06:03.023

还有两个选项，如果单词总是从第二个字符开始并在最后一个字符之前结束，您可以简单地使用：

```
=MID(A1,2,LEN(A1)-2) ' Minus 2 for the 2 ticks 
```

第二种选择是用任何类似的东西代替刻度：

```
=SUBSTITUTE(A1,"`","") 
```

用替身也是支持多个替身。因此，如果您出于某种原因有 `switchrefid` 并且只想摆脱三个刻度中的 2 个，则可以使用：

```
=SUBSTITUTE(A1,"`","",2) 
```

这将返回 switchrefid`

虽然它不适用于“switchrefid”，因为它仍然会返回 switchrefid，因为它只删除要删除的文本的第 2 个实例

# c# - Cannot add icon in shell extension with C#

> ID：16193249
> 
> 赞同：3
> 
> 时间：2013-04-24T13:25:24.510
> 
> 标签：c#, shell-extensions

I've found a very nice tutorial and i am trying to understand something that is not in this tutorial (because the tut itself works fine) [http://www.codeproject.com/Articles/9163/File-Rating-a-practical-example-of-shell-extension](http://www.codeproject.com/Articles/9163/File-Rating-a-practical-example-of-shell-extension)

When you look at applications like WinRar, TortoiseSVN, Antivirus-apps and many more, there is an icon next to the Shell Extension Item.

I would like to know how this is done. (Programmatically with C#)

Adding a separator works, adding a submenu works and click+action also works, but i'm struggling with the icon. This cannot be so hard. Can somebody help me?

And please don't say that Microsoft doesn't longer support this in .NET 4.0, because it is not guaranteed and therefore they don't supply samplecode. If all those other apps can do it, then it is possible.

Please supply me some sample code, some tutorials or maybe even a working piece of code.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T13:37:46.777

请看下面的文章，它使用 .NET 4.0 它使用[SharpShell](https://www.nuget.org/packages/SharpShell) nuget 包创建 Windows Shell 扩展。

[NET Shell 扩展 - Shell 上下文菜单](http://www.codeproject.com/Articles/512956/NET-Shell-Extensions-Shell-Context-Menus)

使用此库，您可以在创建上下文菜单条时直接设置图像，如下所示

```
protected override ContextMenuStrip CreateMenu()
{
    //  Create the menu strip.
    var menu = new ContextMenuStrip();

    //  Create a 'count lines' item.
    var itemCountLines = new ToolStripMenuItem
    {
        Text = "Count Lines...",
        Image = Properties.Resources.CountLines
    };

    //  When we click, we'll count the lines.
    itemCountLines.Click += (sender, args) => CountLines();

    //  Add the item to the context menu.
    menu.Items.Add(itemCountLines);

    //  Return the menu.
    return menu;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-21T18:59:42.060

您只需添加到以下注册表项：HKEY_LOCAL_MACHINE\SOFTWARE\Classes*\shellex\ContextMenuHandlers，这是代码：

```
 string TimeStamp = DateTime.Now.ToString("dd-MM-yyyy");

string key = "HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\*\\shellex\\ContextMenuHandlers\\Winrar";
string valueName = "MyWinrar";
Microsoft.Win32.Registry.SetValue(key, valueName, HERE WHAT YOU WANT TO START, Microsoft.Win32.RegistryValueKind.String); 
```

我希望这个对你有用！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T13:32:26.140

您列出的所有应用程序都使用 COM 和非托管代码来创建覆盖图标处理程序。甚至还有一个特殊的项目 TortoiseOverlays，它提供了一个通用库，用于为 TortoiceCSV、TortoiseSVN 和 TortoiseGIT 绘制图标。您可以查看它的源代码以了解它是如何完成的。如果您想绘制类似的图标，您可能应该重复使用它。

不建议将 .Net 用于此类扩展，因为当针对不同 .Net 版本构建的多个扩展会尝试在资源管理器进程中加载​​时，它们会使资源管理器崩溃。

# android - 使用 Eclipse 运行时，Google 地图仅显示灰色图块

> ID：16193253
> 
> 赞同：0
> 
> 时间：2013-04-24T13:25:36.760
> 
> 标签：android, google-maps, google-api

我使用 sha 1 证书为调试密钥库生成了一个 Android 密钥。我在我的 xml 中使用了那个 api 键我无法获得地图的覆盖。而不是它，我只得到了灰色瓷砖。

**错误：**

在 java.lang.Thread.run(Thread.java:1019)

IOException 处理：26

java.io.IOException：服务器返回：3

```
android_maps_conflict_avoidance.com.google.googlenav.map.BaseTileRequest.readResponseData(BaseTileRequest.java:115)

android_maps_conflict_avoidance.com.google.googlenav.map.MapService$MapTileRequest.readResponseData(MapService.java:1473)

android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.processDataRequest(DataRequestDispatcher.java:1117)

android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.serviceRequests(DataRequestDispatcher.java:994)

android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher$DispatcherServer.run(DataRequestDispatcher.java:1702) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:45:09.557

如果您非常确定您的 SHA1 密钥是正确的，请确保您打开“Google Maps Android API v2”服务而不是“Google Maps API v2”。并使用您的 SHA1 密钥和您的应用程序名称来应用新的 Android 密钥以在您的应用程序中使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T16:23:56.627

拉吉。我有一个类似的问题让他们在我的应用程序中工作。不幸的是，API 密钥生成非常重要，这相当简单......即使您的密钥正确，同样的症状也会持续存在......但是，您没有所有其他组件到位。本教程最终对我有用....我认为我的问题不是在我的工作区中正确引用更新的 Google Play 库。我通过使用 Eclipse ADT SDK Manager 删除并重新安装 Google Play 库项目解决了这个问题。

我正在考虑编写自己的教程以包含来自 Eclipse IDE 的屏幕截图，这对我来说也是一种新体验。也许让您的应用程序运行将为该过程提供一些结构，但是....女士。史密斯写了一个非常好的教程，对我有用，但我一开始并不那么聪明。;-)

[Sue Smith 在 mobile tuts+ 上的最新教程](http://mobile.tutsplus.com/tutorials/android/android-sdk-working-with-google-maps-application-setup/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T13:31:24.630

你确定你生成了 SHA1 密钥吗？尝试此代码以确保：

```
private void getShaKey() {

 try {
 PackageInfo info = getPackageManager().getPackageInfo("YOUR.Package.Name",
 PackageManager.GET_SIGNATURES);
 for (Signature signature : info.signatures) {
 MessageDigest md = MessageDigest.getInstance("SHA");
 md.update(signature.toByteArray());
 Log.v(TAG, "KeyHash:" + Base64.encodeToString(md.digest(),
 Base64.DEFAULT));
 }
 } catch (NameNotFoundException e) {
 e.printStackTrace();
 } catch (NoSuchAlgorithmException e) {
 e.printStackTrace();
 }

 } 
```

如果没有帮助，请附上您的 java 代码、布局 xml、logcat 输出和清单文件。

# c# - 如何创建可以在任何项目中使用的静态类

> ID：16193261
> 
> 赞同：-6
> 
> 时间：2013-04-24T13:25:59.050
> 
> 标签：c#, visual-studio-2010, class, static

我正在尝试创建一个静态类 ( `IntNode`, `IntList`)，我可以使用类名通过任何项目访问该类。

我已将文件名保存为类名（IntNode.cs），并`public`在类名之前添加，但在其他项目上仍然无法识别。

我还缺少什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T13:27:17.243

想要使用该类的项目需要做以下两件事之一：

1.  引用已在其中定义类的程序集。
2.  直接将 *.cs 文件添加到项目中。您可以将它们添加为本地副本或链接。

选项 1 是首选。

# php - 除了 mail() 函数之外，在 php 中发送大量邮件的架构

> ID：16193262
> 
> 赞同：0
> 
> 时间：2013-04-24T13:26:01.240
> 
> 标签：php, massmail

我想问我可以使用PHP`mail()`函数发送大量邮件，但问题是它很慢，在阅读其他帖子后，原因是这个邮件函数每次发送邮件时都会打开套接字并关闭套接字（正确如果我错了我）。这让它变慢了。

所以我发现了其他的东西来解决这个问题，比如[phpmailer](http://www.phplist.com/details)，但我不想要任何工具，我想要的只是获得正确的方式，通过它我可以更快地发送邮件并且看起来更突出。

就像我脑子里有这个：

1.  创建一个可以保存邮件数据并存储到文件中的文件，然后可以运行其他文件，该文件读取文件并从表中获取用户邮件并逐个发送。但我不知道如何在没有邮件的情况下发送这些邮件（ ） 功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:56:38.597

你有没有看过任何框架？像 Swift Mailer 这样的东西会适合你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T13:44:21.427

您用于在 php 文件中直接发送邮件功能

```
mail(to,subject,message,headers,parameters) 
```

你还提到了

[http://www.w3schools.com/php/func_mail_mail.asp](http://www.w3schools.com/php/func_mail_mail.asp)

你还推荐了一个网站

[http://in3.php.net/manual-lookup.php?pattern=mail+function&scope=quickref](http://in3.php.net/manual-lookup.php?pattern=mail+function&scope=quickref)

这个网站的所有帮助都可以解决您的问题....

# nhibernate - NHibernate - 为什么这个集合没有初始化/急切地获取？

> ID：16193268
> 
> 赞同：1
> 
> 时间：2013-04-24T13:26:15.643
> 
> 标签：nhibernate, eager

考虑到这一点：

```
var pfs = Session.QueryOver<Pegfile>()
                .JoinAlias(pf => pf.Responses, () => responseAlias)
                .List(); 
```

其次是这个

```
Debug.Print(pfs.First().Responses.Count.ToString()); 
```

为什么那个调试语句会让 NHibernate 返回并重新查询 Response 集合，它肯定是在第一个查询中初始化的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T13:33:36.527

您需要使用`Fetch`来预加载集合：

```
var pfs = Session.QueryOver<Pegfile>()
                .JoinAlias(pf => pf.Responses, () => responseAlias)
                .Fetch(pf => pf.Responses).Eager
                .List(); 
```

`JoinAlias`为集合设置别名，以便您可以在 where 子句等中引用它。

我不确定 QueryOver 但 LINQ 提供程序还使用了几种优化，这些优化会导致集合无法加载，例如`COUNT`在调用`Count`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T13:30:38.300

每次都找我，为什么我不记得了？**加入必须是一个左撇子**- grr 在同等程度上爱恨 NH。

```
var pfs = Session.QueryOver<Pegfile>()
                .Left.JoinAlias(pf => pf.Responses, () => responseAlias)
                .List(); 
```

# php - Magento Checkout Stuck 在计费信息后

> ID：16193270
> 
> 赞同：3
> 
> 时间：2013-04-24T13:26:20.247
> 
> 标签：php, magento, magento-1.7

嗨，我知道这个问题有很多线程，但没有什么能解决我的问题。在我单击第一个 continue 后（计费信息后），结帐页面重定向到购物车。Firebug 告诉我 ajax 响应是“403 Session Expired”

有人在 Magento 遇到过这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T14:14:01.153

您的服务器中可能未安装 PHP-MCRYPT 请检查。这解决了我的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-19T13:05:31.040

在控制台中，检查您的 URL 参数，然后单击结算信息中的继续。该 URL 可能不包含`index`或不包含`progress`参数。

参见`_expireAjax()`类函数中的以下代码`Mage_Checkout_OnepageController`

( `app/code/core/Mage/Checkout/controllers/OnepageController.php`)

```
if (Mage::getSingleton('checkout/session')->getCartWasUpdated(true)
    && !in_array($action, array('index', 'progress'))
) {  
    $this->_ajaxRedirectResponse();
    return true;
} 
```

注释掉这段代码可以解决你的问题。`$action`但是，您可以尝试找出请求 URL 中参数 ( ) 的问题，而不是仅仅注释掉代码。

# cordova - Mobile app not showing any view at start up on iphone & android device

> ID：16193274
> 
> 赞同：1
> 
> 时间：2013-04-24T13:26:41.680
> 
> 标签：cordova, angularjs, phonegap-build

I am developing an app using angularjs and phonegap.

My issue is that when I am deploying, using phonegap build phonegap version 2.5, and having in my index:

```
<script src="phonegap.js"></script> 
```

and not having the cordova library copied.

also in the index:

```
<body ng-app="MyApp">

<div class="container" ng-view></div> 
```

The result is that the build is just great I can install it my iOS and android device and both are behaving the same.

**I can see the background I set up in the CSS file but nothing else shows up.** The alert I set up in the first controller dosen't show up neither. It works just well with the ripple emulation but dosen't work once deployed to iOS or android device.

I simplfied my index to the maximin also I am not using any directive that uses jquery to make sure this is not the issue, I am not even loadign any other library.

I added this meta info, as adviced in other SO question

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" /> 
```

I also added (also tried [Brian Ford cool service](http://briantford.com/blog/angular-phonegap.html)) but for simplyfy

```
MyApp.run(function ($rootScope, $location) {       
    document.addEventListener('deviceready', function () { 
        navigator.notification.alert("Corodova device ready triggered!"); --> This does gets triggered!
        //MyApp.initialize(); => commented out cause it did not make any change and I beleive it is not needed. We already have <body ng-app="MyApp"> in index
}, false); 
```

});

I also left config.xml to the minimum:

```
<?xml version="1.0" encoding="UTF-8"?>
 <widget xmlns      = "***"
    xmlns:gap   = "http://phonegap.com/ns/1.0"
    id         = "***"
    version     = "1.0.2">

  <name>***</name>

  <description>***</description>

  <author email="***@***.com">***</author>

   <icon src="./styles/img/logo.png" gap:role="default" />  

  <feature name="http://api.phonegap.com/1.0/network"/>
  <feature name="http://api.phonegap.com/1.0/geolocation"/>
  <feature name="http://api.phonegap.com/1.0/camera"/>

  <preference name="orientation" value="portrait" />

  <preference name="phonegap-version" value="2.5.0" />
  <preference name="target-device" value="universal" />

  <!-- Splash Screens -->
  <gap:splash src="splash.png" />
  <gap:splash src="./styles/img/logo.png" gap:platform="android" gap:density="ldpi" />
  <gap:splash src="./styles/img/logo.png" gap:platform="android" gap:density="mdpi" />
  <gap:splash src="./styles/img/logo.png" gap:platform="android" gap:density="hdpi" />
</widget> 
```

Thanks in advance!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:01:59.927

我终于找到了解决方案。

在为满足编码准则而进行重命名时，我将所有视图文件更改为驼峰式。但是我没有改变我的 app.js 看起来像：

```
 $routeProvider
 .when('/', {
    templateUrl: 'views/Sign.html',   <--- mind the case sensitive issue! the capital s screw it up  . . . 
    controller: 'SignCtrl' 
```

![在此处输入图像描述](https://i.stack.imgur.com/pZvQx.png)

# c# - XML file written to Response contains page HTML

> ID：16193275
> 
> 赞同：1
> 
> 时间：2013-04-24T13:26:45.023
> 
> 标签：c#, asp.net, xml, response.write

I'm trying to write an XML file to the response when a button is clicked so the user can download the file. This works fine with an Excel file, but when I use the "text/xml" content type the file contains the expected contents, but with the webpage HTML appended to the end.

I assume since the button click is returning the page HTML it is merged with the file. I tried using `Response.ClearContent()` to try and clear the response, but it didn't work.

```
protected void Button1_Click(object sender, EventArgs e) {
    string fileName = "myFile.xml";
    string filePath = Server.MapPath("~/temp/myFile.xml");
    Response.ContentType = "text/xml";
    Response.AppendHeader("Content-Disposition", "attachment; filename=" + fileName);
    Response.ClearContent(); //I assumed this would clear the HTML before the file is written.
    Response.WriteFile(filePath);
    Response.Flush();
    File.Delete(filePath);
    Context.ApplicationInstance.CompleteRequest();
} 
```

How do I make sure the page is not written to the XML file?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T13:30:09.470

HTML 是在按钮的事件引发*后*`Click`呈现的，因此此时清除内容不会有任何效果。

尝试添加`Response.End();`到方法的末尾。

# php - Writing specs for a class that behaves differently depending upon constructor arguments

> ID：16193277
> 
> 赞同：1
> 
> 时间：2013-04-24T13:26:45.640
> 
> 标签：php, bdd, phpspec

If you have a class that responds differently depending upon constructor arguments, how do you go about writing a spec for that class?

```
class Route
{
  function __construct($url, array $methods = array())
  {
    // stores methods and url in private member variables
    // creates a regex to match $url against incoming request URLs
  }

  public function isMatch($url)
  {
    // checks if the incoming request url matches against this url
  }
} 
```

Example use:

```
$a = new Route('/users/:id');
$a->isMatch('/users/1') // returns true;
$b = new Route('/users');
$b->isMatch('/users') // returns true 
```

If I set up my spec for this class using the let function from phpspec:

```
class Route extends ObjectBehaviour
{
  function let() 
  {
    $this->beConstructedWith('/users/:id')
  }
} 
```

My spec can only check if the behaviour of this class works in one of the cases.

I've contemplated adding setter methods to allow me to test around this, but it seems like I'd be breaking encapsulation for the purpose of testing.

I'm struggling to find anything that touches upon this, so I'm started to think that maybe this is bad code smell situation.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-20T16:09:13.200

`beConstructedWith()`并不总是需要从`let()`方法中调用。您也可以从规范中调用它。

在我看来，以不止一种方式设置对象并没有错。但是，您应该避免[在构造函数中做太多工作](http://misko.hevery.com/code-reviewers-guide/flaw-constructor-does-real-work/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T13:35:24.600

1.  构造函数只能用于获取将在此处设置为成员属性的变量。这里不应该做进一步的逻辑......
2.  按照第 1 点的想法，应该有另一个逻辑来确定接下来会发生什么（例如`if Object->hasProperty(X) then do x()`，等）
3.  那么评论将是简单明了的。

例子：

```
class Route
{
    private $url;
    private $methods = array();

    /**
     * Constructor method, sets the attributes to private member variables
     * @param string $url URL pattern
     * @param array $methods Methods that should be used with given URL
     */
    function __construct($url, $methods = array())
    {
        $this->url      = $url;
        $this->methods  = $methods;
    }

    // ...

} 
```

# java - Neo4j提取子图的交互式查询

> ID：16193278
> 
> 赞同：0
> 
> 时间：2013-04-24T13:26:47.120
> 
> 标签：java, neo4j

我需要根据用户定义的条件（例如属性值和标签）提取子图（节点和边的子集）。使用 cypher 或 gremlin 之类的查询语言，或者简单地使用 java 方法编码，这已经是可行的。

但是，由于我正在处理大图，我希望保留提取的子图以供进一步查询，甚至迭代子提取查询过程。

我看过这些讨论：[在 neo4j](https://stackoverflow.com/questions/16101789/extract-subgraph-in-neo4j)中[提取子图，从 neo4j 数据库](https://stackoverflow.com/questions/15587173/extracting-subgraph-from-neo4j-database)中提取子图。但是，我无法弄清楚我的情况的答案。

我正在考虑一些替代方案：

1.  每次我需要提取子图时都建立一个新索引
2.  使用缓存来存储可能对算术计算有用的节点/边，例如平均值等。
3.  创建一个嵌入式 ne4j 的新实例，但这真的很昂贵！

还有一点，getByID 比索引查找便宜。我知道这取决于具体情况：大图或小索引...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T07:04:13.637

您可以创建一个新的 neo4j java 嵌入式数据库来保存您的结果并进一步查询吗？恕我直言，无需启动另一台服务器。

此外，getByID 通常比索引查找便宜，因为您避免了索引往返。索引查找非常适合文本匹配等更复杂的查找。

# html - How can i "limit" a text inside a ?

> ID：16193279
> 
> 赞同：4
> 
> 时间：2013-04-24T13:26:51.790
> 
> 标签：html, text, out

i have a mail template newsletter here: [http://www.newsletter.vendopor.com/m29-04-13/index2.html](http://www.newsletter.vendopor.com/m29-04-13/index2.html)

But at the end, have a paragraph that contains that text: Por favor, envía este correo a las personas que creas le puede ayudar nuestro...

And this text, go out the paragraph (i have a width 380 attribute in css and keeps going out).

It's at the end of the page

I've searched in google, but can't find the solution

Works fine on Chrome, but in Mozilla (last version) the text is going out.

Thanks a lot for your help

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-24T13:33:40.927

## 您可以使用`text-overflow: ellipsis;`

```
div {
    width:200px; 
    overflow:hidden; 
    border:1px solid #f00;
    text-overflow:ellipsis;
    white-space:nowrap; 
}
```

```
<div>This is very very long text This is very very long text This is very very long text </div>
```

祝你好运...

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-24T13:29:30.233

```
<?php echo substr('your text',0,500); ?> 
```

打印文本的前 500 个字符

或者当您不想使用 php 并且只想在到达块的末尾时文本消失时添加`overflow:hidden;`div 块的 css

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-04-28T20:15:58.647

我找到了，这添加到段落中：white-space: normal; 你可以在这里了解一些关于空白的知识：sidar.org/recur/desdi/traduc/es/css/...它现在在 mozilla 中运行良好，谢谢大家！

# php - 如何使用 imap_fetchbody 忽略附加的图像？

> ID：16193281
> 
> 赞同：1
> 
> 时间：2013-04-24T13:26:55.177
> 
> 标签：php, format, imap, email-attachments

我正在使用带有 imap_fetchbody 函数的 PHP 脚本来读取电子邮件帐户，但是当我收到附有图像的邮件时，整个邮件都会变脏。我怎样才能只得到文本部分？我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:51:55.710

您可以使用 fetchstructure。

[http://www.php.net/manual/en/function.imap-fetchstructure.php](http://www.php.net/manual/en/function.imap-fetchstructure.php)

文档下方的评论中有几个非常有用的示例。

# android - 如何获取图片在 ImageView 中的位置？

> ID：16193282
> 
> 赞同：10
> 
> 时间：2013-04-24T13:26:55.710
> 
> 标签：android, android-imageview

我有一个不同尺寸的图片库。`ImageView`每个图像都按顺序（通过）显示在内部`OnTouchListener`。我需要知道我展示亲戚的图片框架的位置，`ImageView`但是通过我所做的测试，我只得到了`ImageView`. 任何想法？

![在此处输入图像描述](https://i.stack.imgur.com/0mTCN.png)

我需要 (x1, y1) 和 (x2, y2) 的值。

提前致谢。

这是我的课：

```
public class PuzzleView extends ImageView {

protected Paint currentPaint;    

protected boolean drawRect = false;    
protected float left;
protected float top;
protected float right;
protected float bottom;

protected float pixelX;
protected float pixelY;

protected int nChunksX = 5;
protected int nChunksY = 5;

protected int currentWidth = 0;
protected int currentHeight = 0;

public PuzzleView(Context context, AttributeSet attrs) {
    super(context, attrs);

    currentPaint = new Paint();
    currentPaint.setDither(true);
    currentPaint.setColor(0xFF00CC00);  
    currentPaint.setStyle(Paint.Style.STROKE);
    currentPaint.setStrokeJoin(Paint.Join.ROUND);
    currentPaint.setStrokeCap(Paint.Cap.ROUND);
    currentPaint.setStrokeWidth(2);                           
}

@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);

    float chunkWidth = currentWidth / nChunksX;
    float chunkHeight = currentHeight / nChunksY;

    float posX = ((int)(pixelX / chunkWidth)) * chunkWidth;
    float posY = ((int)(pixelY / chunkHeight)) * chunkHeight;

    canvas.drawRect(posX, posY, posX + chunkWidth, posY + chunkHeight, currentPaint);

    Rect rect = this.getDrawable().getBounds();
    canvas.drawRect(rect, currentPaint);
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);

    // Get image matrix values and place them in an array
    float[] f = new float[9];
    getImageMatrix().getValues(f);

    // Extract the scale values using the constants (if aspect ratio maintained, scaleX == scaleY)
    final float scaleX = f[Matrix.MSCALE_X];
    final float scaleY = f[Matrix.MSCALE_Y];

    // Get the drawable (could also get the bitmap behind the drawable and getWidth/getHeight)
    final Drawable d = getDrawable();
    final int origW = d.getIntrinsicWidth();
    final int origH = d.getIntrinsicHeight();

    // Calculate the actual dimensions
    final int actW = Math.round(origW * scaleX);
    final int actH = Math.round(origH * scaleY);

    currentWidth = actW;
    currentHeight = actH;
}

public boolean isDrawRect() {
    return drawRect;
}

public void setDrawRect(boolean drawRect) {
    this.drawRect = drawRect;
}

public float getLeftRect() {
    return left;
}

public void setLeftRect(float left) {
    this.left = left;
}

public float getTopRect() {
    return top;
}

public void setTopRect(float top) {
    this.top = top;
}

public float getRightRect() {
    return right;
}

public void setRightRect(float right) {
    this.right = right;
}

public float getBottomRect() {
    return bottom;
}

public void setBottomRect(float bottom) {
    this.bottom = bottom;
}

public float getPixelX() {
    return pixelX;
}

public void setPixelX(float pixelX) {
    this.pixelX = pixelX;
}

public float getPixelY() {
    return pixelY;
}

public void setPixelY(float pixelY) {
    this.pixelY = pixelY;
}

public int getChunksX() {
    return nChunksX;
}

public void setChunksX(int nChunksX) {
    this.nChunksX = nChunksX;
}

public int getChunksY() {
    return nChunksY;
}

public void setChunksY(int nChunksY) {         
    this.nChunksY = nChunksY;
}
} 
```

目前，源图像在 XML 文件中定义：

```
<com.jocajica.shakepic.PuzzleView
    android:id="@+id/imageViewSelected"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:contentDescription="@string/image_selected"
    android:src="@android:drawable/progress_indeterminate_horizontal" /> 
```

我需要在图像上绘制一个网格。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-11-14T13:14:51.283

根据 Jacob Nordfalk 的链接，我能够生成一个静态方法，允许您从 ImageView 获取图像位置和尺寸。

```
/**
 * Returns the bitmap position inside an imageView.
 * @param imageView source ImageView
 * @return 0: left, 1: top, 2: width, 3: height
 */
public static int[] getBitmapPositionInsideImageView(ImageView imageView) {
    int[] ret = new int[4];

    if (imageView == null || imageView.getDrawable() == null)
        return ret;

    // Get image dimensions
    // Get image matrix values and place them in an array
    float[] f = new float[9];
    imageView.getImageMatrix().getValues(f);

    // Extract the scale values using the constants (if aspect ratio maintained, scaleX == scaleY)
    final float scaleX = f[Matrix.MSCALE_X];
    final float scaleY = f[Matrix.MSCALE_Y];

    // Get the drawable (could also get the bitmap behind the drawable and getWidth/getHeight)
    final Drawable d = imageView.getDrawable();
    final int origW = d.getIntrinsicWidth();
    final int origH = d.getIntrinsicHeight();

    // Calculate the actual dimensions
    final int actW = Math.round(origW * scaleX);
    final int actH = Math.round(origH * scaleY);

    ret[2] = actW;
    ret[3] = actH;

    // Get image position
    // We assume that the image is centered into ImageView
    int imgViewW = imageView.getWidth();
    int imgViewH = imageView.getHeight();

    int top = (int) (imgViewH - actH)/2;
    int left = (int) (imgViewW - actW)/2;

    ret[0] = left;
    ret[1] = top;

    return ret;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-06T07:29:27.353

您应该使用 getImageMatrix()：

```
float[] imageMatrix = new float[9];
getImageMatrix().getValues(imageMatrix);
scale = imageMatrix[Matrix.MSCALE_X];
transX = imageMatrix[Matrix.MTRANS_X]; 
```

另请参阅
[尝试获取 ImageView 中图像的显示大小](https://stackoverflow.com/questions/3855218/trying-to-get-the-display-size-of-an-image-in-an-imageview)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-11-12T13:33:37.270

感谢 Quentis S. 和 Jacob Nordfalk 提供了非常有用的例程。

我冒昧地将返回值从数组更改为 Rect 对象。

```
 /**
 * Returns the bitmap position inside an imageView.
 *
 * @param imageView source ImageView
 * @return Rect position of the bitmap in the ImageView
 */
public static final Rect getBitmapPositionInsideImageView(ImageView imageView)
{
    Rect rect = new Rect();

    if (imageView == null || imageView.getDrawable() == null)
    {
        return rect;
    }

    // Get image dimensions
    // Get image matrix values and place them in an array
    float[] f = new float[9];
    imageView.getImageMatrix().getValues(f);

    // Extract the scale values using the constants (if aspect ratio maintained, scaleX == scaleY)
    final float scaleX = f[Matrix.MSCALE_X];
    final float scaleY = f[Matrix.MSCALE_Y];

    // Get the drawable (could also get the bitmap behind the drawable and getWidth/getHeight)
    final Drawable d     = imageView.getDrawable();
    final int      origW = d.getIntrinsicWidth();
    final int      origH = d.getIntrinsicHeight();

    // Calculate the actual dimensions
    final int actW = Math.round(origW * scaleX);
    final int actH = Math.round(origH * scaleY);

    // Get image position
    // We assume that the image is centered into ImageView
    int imgViewW = imageView.getWidth();
    int imgViewH = imageView.getHeight();

    rect.top  = (int) (imgViewH - actH) / 2;
    rect.left = (int) (imgViewW - actW) / 2;

    rect.bottom = rect.top + actH;
    rect.right  = rect.left + actW;

    return rect;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-16T13:04:22.647

覆盖 onLayout 方法

```
 //inside puzzleView
    float[] matrix = new float[9];
    @Override
    protected void onLayout(boolean changed, int left, int top, int right, int bottom) {

        super.onLayout(changed, left, top, right, bottom);
        matrix = getMatrix();

    }    
    public void getMatrix(){
         return matrix;
    }

    private float[] getMatrix() {

        final float[] matrix = new float[9];
        getImageMatrix().getValues(matrix);

        return matrix;
    } 
```

并使用它来获取值

```
 // Extract the scale and translation values from the matrix.
       float scaleX = matrix[Matrix.MSCALE_X];
       float scaleY = matrix[Matrix.MSCALE_Y];
       float transX = matrix[Matrix.MTRANS_X];
       float transY = matrix[Matrix.MTRANS_Y]; 
```

我希望这对你有帮助

# google-chrome - html5 video won't loop in chrome

> ID：16193290
> 
> 赞同：1
> 
> 时间：2013-04-24T13:27:19.897
> 
> 标签：google-chrome, html5-video, websphere-7

I'm having the same issue as described in this post:

[HTML5 video will not loop](https://stackoverflow.com/questions/8088364/html5-video-will-not-loop)

So basically my videos won't loop (and cannot be seeked ) in chrome. The same markup works fine when i host my page on an apache server and even if i open it from the file system, and about a week ago it worked in a portlet over websphere appserver 7.0\. All i have done on server side was adding video mime types for mp4, ogv, etc... other than that i have no idea what could have gone wrong.

Am i missing some settings on the server? Or if it is the issue with the ranged requests, how do you resolve that on websphere?

My code is like this:

```
<video preload="metadata" width="340">                      
<source src="video.webm" type="video/webm"  />  
<source src="video.mp4" type="video/mp4" />                     
<source src="video.ogv" type="video/ogg"  />
</video> 
```

I start the video and set the loop attribute like this:

```
var $video = ...                            
if($video && $video.canPlayType) {
$video.play();
$video.loop = 1;
} 
```

Thanks in advance for any answer!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T18:07:36.237

你试过做 HTML5 循环标签吗？

```
<video id="yourID" autoplay="autoplay" loop="loop">
<!--source code here-->
</video> 
```

编辑：要让它从 JavaScript 工作，请执行以下操作。

```
var video = document.createElement('video'); //To create the video element.
video.loop = true; 
```

# javascript - 在文件准备好时打开你好编辑器

> ID：16193301
> 
> 赞同：0
> 
> 时间：2013-04-24T13:27:56.690
> 
> 标签：javascript, contenteditable, hallo-js

我正在尝试在第一个元素或任何地方打开 halo 编辑器工具栏，`document.ready`我`focus`只需要打开它并不重要

我尝试在可编辑元素上触发单击事件和焦点事件，但没有任何效果。我还尝试将插入符号放在可编辑元素中：

```
var el = document.getElementById("content");
var range = document.createRange();
var sel = window.getSelection();
range.setStart(el.firstChild, 2);
range.collapse(true);
sel.removeAllRanges();
sel.addRange(range); 
```

还有其他想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:25:11.270

我明白了，必须在元素中插入插入符号，然后触发`halloactivated`事件`document.ready`

```
 var range = rangy.createRange();
   var sel = rangy.getSelection();
   range.selectNode(el);
   sel.removeAllRanges();
   sel.addRange(range);

   jQuery('#content').trigger('halloactivated'); 
```

# api - 编写处理异常的 Scala 方法签名的最佳方法

> ID：16193302
> 
> 赞同：3
> 
> 时间：2013-04-24T13:27:56.757
> 
> 标签：api, scala, exception, scalaz, scalaz7

为了在 Scala 中处理异常，我更喜欢避免基本的`try`/`catch`并从 Scalaz 的函数式思维中受益（在某些情况下`Validation`类似于类型）。`Either`

我的应用程序公开了一些服务。想象一下我的服务层中的这种方法（没有真正意义，但对概念有好处）。如果所有规则都成功通过，它将`Buyer`（购买者）与他的新关联`Car`并返回包含此关联：`Car`

```
def create(carDTO: CarDTO, buyerDTO: BuyerDTO): Validation[Either[TechnicalFailure, List[CarCreationFailure]], CarDTO] 
```

说明：创建 a`Car`可能会导致两种异常类型之一：

*   **`Throwable`包装异常的**技术故障**（例如，当数据库崩溃时） 。**
***   **业务失败**（防止不一致的自定义应用程序规则，例如，`Car`具有非法状态）。`CarCreationFailure`是一个，当然可以通过更多的`precised`失败来扩展。**

 **我的问题特别关注客户端，并专门处理不止一种潜力`Business Failure`。

是否应该将返回类型`Validation[Either[TechnicalFailure, List[CarCreationFailure]], CarDTO]`替换为不那么繁琐的：`ValidationNel[Throwable, CarDTO]`

请注意此处`ValidationNel`（将错误/异常累积到 a 中`NonEmptyList`）。

缺点是新读者乍一看无法猜测此方法返回`TechnicalFailure`或`CarCreationFailure`（`BusinessFailure`so 的子类）；只是一个太可怕了`Throwable`。

他将被迫对`Throwable`我的应用程序中包含的每种类型应用模式匹配，以确保不会忘记任何人... => 混乱。

这些解决方案中最干净的方法是什么，或者可能是……另一种？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T15:59:04.520

在这样的情况下，我个人使用一个名为的自定义类`Tri`，它的工作方式类似于`Try`和`Either`：

```
sealed trait Tri [+Value, +Problem] { ... }
final case class Good[+Value](v: Value) extends Tri[Value, Nothing] { ... }
final case class Bad[+Problem](p: Problem) extends Tri[Nothing, Problem] { ... }
final case class Ugly(th: Throwable) extends Tri[Nothing, Nothing] { ... } 
```

用适当的方法来处理人们想要的最常见的操作。在这种情况下，我会简单地返回给客户

```
Tri[CarDTO, List[CarCreationFailure]] 
```

并根据需要将异常包装到自定义异常类中。这既是关于代码本身正常工作时可能发生或可能不发生的事情，也未说明（像往常一样）迟早需要处理的异常情况，包括数据库错误之类的事情。然后你只是例如：

```
create(car, buyer) match {
  case Good(dto) => // Yay
  case Bad(xs) =>   // Handle list of car creation failures
  case Ugly(th) =>  // Handle exceptions
} 
```

我不知道 Scalaz7 中有任何类似的功能，尽管您可以`\/`比在 Scalazless Scala 中更容易地构建这些部分（正如您所拥有的，但为什么不使用？），因此您可能不太愿意创建这种三方错误处理类.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T17:07:21.460

我们使用类似于 Rex Kerr 使用的东西（更简单但不太优雅）。

所有业务异常/错误都包含在 custom`BusinessException`中，所有其他错误都抛出各种异常。

我们使用基本`Try`的，servlet 的代码看起来像（非常简化）

```
 ( req getParameter "action" match {

        case null          ⇒ Failure( new BusinessException( "Missing required parameter 'action'" ) )
        case "doThis"  ⇒ doThis()
        case "doThat"  ⇒ doThat( req )
        case x         ⇒ Failure( new BusinessException( "Uknown Action '" + x + "'" ) )
    } ) match {

        case Success( someResponse ) ⇒ //send 200 with some response
        case Failure(t) if t.isInstanceOf[BusinessException] => //send 400 with exception message 
        case Failure( t )        ⇒ //send 500 with exception message
    } 
```

诸如`doThis`具有类型签名的方法

```
def doThis(): Try[ Option[ String ] ] = Try {
    //do stuff
} 
```

这种简单机制的优点是很容易包装现有的抛出异常的 Java 代码，这就是我们的用例。**

# java - 这是一种在 Java 中创建只读列表的方法吗？

> ID：16193312
> 
> 赞同：1
> 
> 时间：2013-04-24T13:28:20.273
> 
> 标签：java, list

用java思考 说：

> 要从 AbstractList 创建只读列表，您必须实现 get() 和 size()。

这让我很困惑，代码如下：

```
 public class CountingIntegerList
extends AbstractList<Integer> {
  private int size;
  public CountingIntegerList(int size) {
    this.size = size < 0 ? 0 : size;
  }
  public Integer get(int index) {
    return Integer.valueOf(index);
  }
  public int size() { return size; }
  public static void main(String[] args) {
    List list = new CountingIntegerList(30);
  }
} 
```

列表是只读列表吗？为什么？

好的，答案是肯定的，因为我扩展`AbstractList`并抛出`UnsupportedOperationException`if `set`or`and`被调用。如果我想得到一个unmodifiableList，`Collections.unmodifiableList()`是一个不错的选择。但请记住，它们都不是一成不变的：

```
 List<StringBuilder> list = new ArrayList<StringBuilder>();
      StringBuilder sb = new StringBuilder();
      sb.append("hello");
      list.add(sb);
      System.out.println(list);
      list = Collections.unmodifiableList(list);
      sb.append("world");
      System.out.println(list); 
```

里面有一个`flyweight pattern`。`CountingIntegerList`因为每次`get()`调用，它都从 Integer 中获取缓存，源代码`valueOf()`：

```
 public static Integer valueOf(int i) {
    final int offset = 128;
    if (i >= -128 && i <= 127) { // must cache 
        return IntegerCache.cache[i + offset];
    }
        return new Integer(i);
    } 
```

对吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T13:33:57.670

它是只读的（甚至是不可变的），因为`add`会抛出`UnsupportedOperationException`as will `remove`。

`AbstractList`为您处理创建迭代器、计算哈希码和相等性的所有工作。这很有帮助。完全没有必要换行`unmodifiableList`。

后来你问是否`AbstractList`主要用于创建不可修改的列表。实际上它用于创建任何类型的随机访问列表。在我的数据结构课程中，我们使用诸如此类的抽象类来节省实现列表类的大部分工作。甚至`Collection`接口也有 13 个方法，除了其中两个之外，所有方法都是由`AbstractCollection`.

有一个相关的类`AbstractSequentialList`可以帮助创建非随机访问的列表（例如链表）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T13:31:19.173

因为`set`如果未实现，则会引发 UnsupportedOperationException。见[API](http://docs.oracle.com/javase/7/docs/api/java/util/AbstractList.html#set%28int,%20E%29)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-24T13:32:55.663

您可以将您的列表包装在[UnmodifiableList中](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collections.html#unmodifiableList%28java.util.List%29)

```
List readOnlyList = Collections.unmodifiableList(yourList) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T13:32:34.133

将 ArrayList 传递给[Collections.unmodifiableList()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collections.html#unmodifiableList%28java.util.List%29)

> 返回指定列表的不可修改视图。此方法允许模块为用户提供对内部列表的“只读”访问权限。对返回列表的查询操作“通读”到指定列表，并尝试修改返回的列表，无论是直接还是通过其迭代器，都会导致 UnsupportedOperationException。如果指定的列表是可序列化的，则返回的列表将是可序列化的。同样，如果指定的列表执行，则返回的列表将实现 RandomAccess。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T13:54:08.423

这有点棘手。列表不能改变和/或元素也不能改变？;)

```
StringBuilder builder = new StringBuilder();
    builder.append("Hello");
    List<StringBuilder> list = new ArrayList<StringBuilder>();
    list.add(builder);

    Collection<StringBuilder> canNotChange = Collections.unmodifiableCollection(list);
    builder.append(" World");
    System.out.println(canNotChange.iterator().next()); 
```

# php - 执行 php 代码后影响页面布局

> ID：16193313
> 
> 赞同：-1
> 
> 时间：2013-04-24T13:28:29.113
> 
> 标签：php

任何人都可以帮助我解决这个问题。我尝试构建基本的联系表单，但是当执行 PHP 代码以显示错误消息时，页面看起来没有背景颜色和页脚，而没有错误时看起来很好？

**主表单文件contact.php**

```
<form name="contactform" method="post" action="send_form_email.php">
<table width="450px">
<tr>
 <td valign="top">
  <label for="first_name">First Name *</label>
 </td>
 <td valign="top">
  <input  type="text" name="first_name" maxlength="50" size="30">
 </td>
</tr>
<tr>
 <td valign="top"">
  <label for="last_name">Last Name *</label>
 </td>
 <td valign="top">
  <input  type="text" name="last_name" maxlength="50" size="30">
 </td>
</tr>
<tr>
 <td valign="top">
  <label for="email">Email Address *</label>
 </td>
 <td valign="top">
  <input  type="text" name="email" maxlength="80" size="30">
 </td>
</tr>
<tr>
 <td valign="top">
  <label for="telephone">Telephone Number</label>
 </td>
 <td valign="top">
  <input  type="text" name="telephone" maxlength="30" size="30">
 </td>
</tr>
<tr>
 <td valign="top">
  <label for="comments">Comments *</label>
 </td>
 <td valign="top">
  <textarea  name="comments" maxlength="1000" cols="25" rows="6"></textarea>
 </td>
</tr>
<tr>
 <td colspan="2" style="text-align:center">
  <input type="submit" value="Submit">   <a href="http://www.freecontactform.com/email_form.php">Email Form</a>
 </td>
</tr>
</table>
</form> 
```

**和执行代码的php代码**

```
<?php
if(isset($_POST['email'])) {

// EDIT THE 2 LINES BELOW AS REQUIRED
$email_to = "you@yourdomain.com";
$email_subject = "Your email subject line";

function died($error) {
    // your error code can go here
    echo "We are very sorry, but there were error(s) found with the form you submitted. ";
    echo "These errors appear below.<br /><br />";
    echo $error."<br /><br />";
    echo "Please go back and fix these errors.<br /><br />";
    die();
}

// validation expected data exists
if(!isset($_POST['first_name']) ||
    !isset($_POST['last_name']) ||
    !isset($_POST['email']) ||
    !isset($_POST['telephone']) ||
    !isset($_POST['comments'])) {
    died('We are sorry, but there appears to be a problem with the form you            submitted.');       
}

$first_name = $_POST['first_name']; // required
$last_name = $_POST['last_name']; // required
$email_from = $_POST['email']; // required
$telephone = $_POST['telephone']; // not required
$comments = $_POST['comments']; // required

$error_message = "";
$email_exp = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/';

if(!preg_match($email_exp,$email_from)) {
    $error_message .= 'The Email Address you entered does not appear to be valid.<br />';
  }
    $string_exp = "/^[A-Za-z .'-]+$/";
  if(!preg_match($string_exp,$first_name)) {
    $error_message .= 'The First Name you entered does not appear to be valid.<br />';
  }
  if(!preg_match($string_exp,$last_name)) {
    $error_message .= 'The Last Name you entered does not appear to be valid.<br />';
  }
  if(strlen($comments) < 2) {
    $error_message .= 'The Comments you entered do not appear to be valid.<br />';
  }
  if(strlen($error_message) > 0) {
    died($error_message);
  }
    $email_message = "Form details below.\n\n";

    function clean_string($string) {
      $bad = array("content-type","bcc:","to:","cc:","href");
      return str_replace($bad,"",$string);
    }

    $email_message .= "First Name: ".clean_string($first_name)."\n";
    $email_message .= "Last Name: ".clean_string($last_name)."\n";
    $email_message .= "Email: ".clean_string($email_from)."\n";
    $email_message .= "Telephone: ".clean_string($telephone)."\n";
    $email_message .= "Comments: ".clean_string($comments)."\n";

     // create email headers
     $headers = 'From: '.$email_from."\r\n".
     'Reply-To: '.$email_from."\r\n" .
    'X-Mailer: PHP/' . phpversion();
     @mail($email_to, $email_subject, $email_message, $headers);  
    ?>

    <!-- include your own success html here -->

    Thank you for contacting us. We will be in touch with you very soon.

    <?php
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:56:20.563

您需要将“}”添加到 php 的第 8 行并删除

```
<?php
}
?> 
```

从 php 的末尾。

全面修正

```
<?php
if(isset($_POST['email'])) {

// EDIT THE 2 LINES BELOW AS REQUIRED
$email_to = "you@yourdomain.com";
$email_subject = "Your email subject line";

// added this
}

function died($error) {
    // your error code can go here
    echo "We are very sorry, but there were error(s) found with the form you submitted. ";
    echo "These errors appear below.<br /><br />";
    echo $error."<br /><br />";
    echo "Please go back and fix these errors.<br /><br />";
    die();
}

// validation expected data exists
if(!isset($_POST['first_name']) ||
    !isset($_POST['last_name']) ||
    !isset($_POST['email']) ||
    !isset($_POST['telephone']) ||
    !isset($_POST['comments'])) {
    died('We are sorry, but there appears to be a problem with the form you            submitted.');       
}

$first_name = $_POST['first_name']; // required
$last_name = $_POST['last_name']; // required
$email_from = $_POST['email']; // required
$telephone = $_POST['telephone']; // not required
$comments = $_POST['comments']; // required

$error_message = "";
$email_exp = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/';

if(!preg_match($email_exp,$email_from)) {
    $error_message .= 'The Email Address you entered does not appear to be valid.<br />';
  }
    $string_exp = "/^[A-Za-z .'-]+$/";
  if(!preg_match($string_exp,$first_name)) {
    $error_message .= 'The First Name you entered does not appear to be valid.<br />';
  }
  if(!preg_match($string_exp,$last_name)) {
    $error_message .= 'The Last Name you entered does not appear to be valid.<br />';
  }
  if(strlen($comments) < 2) {
    $error_message .= 'The Comments you entered do not appear to be valid.<br />';
  }
  if(strlen($error_message) > 0) {
    died($error_message);
  }
    $email_message = "Form details below.\n\n";

    function clean_string($string) {
      $bad = array("content-type","bcc:","to:","cc:","href");
      return str_replace($bad,"",$string);
    }

    $email_message .= "First Name: ".clean_string($first_name)."\n";
    $email_message .= "Last Name: ".clean_string($last_name)."\n";
    $email_message .= "Email: ".clean_string($email_from)."\n";
    $email_message .= "Telephone: ".clean_string($telephone)."\n";
    $email_message .= "Comments: ".clean_string($comments)."\n";

     // create email headers
     $headers = 'From: '.$email_from."\r\n".
     'Reply-To: '.$email_from."\r\n" .
    'X-Mailer: PHP/' . phpversion();
     @mail($email_to, $email_subject, $email_message, $headers);  
    ?>

    <!-- include your own success html here -->

    Thank you for contacting us. We will be in touch with you very soon. 
```

# postgresql - postgresql 数字类型，没有尾随零

> ID：16193321
> 
> 赞同：1
> 
> 时间：2013-04-24T13:29:14.473
> 
> 标签：postgresql, numeric

当使用数字类型时，例如像这样`numeric(4,2)`，如果存储在他`1.2`的数字中，在数字的末尾添加零来填充`scale`部分吗？那就是结果是`1.20`

有可能将“短”刻度保存为“短”吗？那是没有在末尾添加零？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T16:00:56.677

您不必担心`scale`零件使用的额外空间。

根据没有尾随零保存的数字类型的[文档](http://www.postgresql.org/docs/9.2/static/datatype-numeric.html)值：

> 数值是物理存储的，没有任何额外的前导零或尾随零。因此，列的声明精度和比例是最大值，而不是固定分配。（在这个意义上，数字类型更类似于 varchar(n) 而不是 char(n)。）实际的存储要求是每组四个十进制数字需要两个字节，加上三到八个字节的开销。

# java - HttpClient 不适用于 localhost

> ID：16193322
> 
> 赞同：3
> 
> 时间：2013-04-24T13:29:16.957
> 
> 标签：java, web-services, localhost, apache-commons-httpclient

我在 java Jersey REST 中开发了一个 Web 服务。我使用 HttpClient 来调用一个基本的 GET 方法。

在浏览器上使用此 URL`http://localhost:8080/myserver/rest/location`时，它可以工作。

使用此代码调用 GET 方法时，我收到 404 Not Found 错误。

```
private static final String BASIC_URL = "http://localhost:8080/myserver/rest/location";

public static boolean isAlive() throws URISyntaxException, ClientProtocolException, IOException{
    HttpClient httpclient = new DefaultHttpClient();
    HttpGet get=new HttpGet(BASIC_URL);
    System.out.println(get.getURI());

      System.out.println("after adding all namevalues: "+get.getURI());
      HttpResponse response = httpclient.execute(get);
    StatusLine statusLine = response.getStatusLine();

    if (statusLine.getStatusCode() != 200) {
        System.out.println("response status="+statusLine.getStatusCode());
        return false;
    }
    System.out.println("Response sent succesfully with status "+200);
    return true;
} 
```

有什么线索吗？

更新

另外，我尝试`http://192.168.9.160:8080/LocationRetreiverServer/rest/location`了（我的本地 IP），它给出了 Not Found 错误！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:35:37.187

响应“404 Not Found”清楚地表明您成功地向服务器发出了 HTTP 请求，服务器返回了这个 HTTP 响应。所以问题似乎并不源于 localhost 部分。

例如，您可能缺少一些必需的标头。

比较浏览器发出的完整 HTTP 请求和 HttpClient 发出的完整 HTTP 请求。

# jquery - 在 AJAX 页面中加载函数

> ID：16193327
> 
> 赞同：4
> 
> 时间：2013-04-24T13:29:27.870
> 
> 标签：jquery, ajax

I have a page (orderhistory) where we have an "email" button that, when selected, performs an ajax request and loads an ajax page (emailform) onto a previously "display:none" div. 我希望能够将一个函数绑定到这个 ajax 页面上的某个东西上。

我意识到我可以通过在 ajax 请求成功时绑定函数来在 orderhistory 页面上完成这项工作。但是，我们的网站都在使用同一个 ajax 页面，因此如果我可以将函数添加到 ajax 页面中，而不必编辑调用 ajax 页面的每个主机页面上的每个函数，将节省大量时间.

我遇到的问题是没有触发该功能的事件。我不能使用 $(document).ready ，因为 ajax 页面正在加载到已经准备好的文档上的 div 中。

我错过了什么吗？有没有一种简单的方法可以做到这一点？希望我是清楚的。

提前致谢。

```
<script>
$(function(){
    alert('loaded')
    $('#EmailFrm_Sender').select2();
})
</script> 
```

这是调用函数。如果我取消注释 select2 函数，它将在 ajax 页面上工作。如果我将相同的功能直接放在 ajax 页面中，它将不会加载。

```
$(".SOEmailLink").click(function(){
  $.get('/SAM/AJAX/BalloonEmailForm.asp', {FormKey:$(this).attr('Formkey'), FormName:('SalesOrder')}, function(data){
    hr_CenterBalloon(data);/*
    $('#EmailFrm_Sender').select2();*/
  })
}); 
```

这是简单的代码。正如我在评论中所说，如果我自己运行这个页面（使用适当的插件链接和 jquery 文件），函数会绑定并触发警报。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T14:12:12.207

不需要事件来触发该功能。`<script>`只需在 HTML 片段的标签内直接调用函数本身即可：

```
<div id="EmailFrm_Sender">
    your form content
</div>
<script>
    // common functions defined here
    ...

    // and then invoke stuff that needs to be run now
    $('#EmailFrm_Sender').select2();
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T13:44:54.867

您的电子邮件表单文件：

```
<script>
    $(function() {
      alert('LOADED!!!');
    });
</script>
<div>
<!-- form -->
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T14:20:14.860

如果您使用 jQuery，该`$.ajax`函数有一个成功回调，您可以使用它来调用类似的函数。

# java - 调用future API提供的方法

> ID：16193328
> 
> 赞同：0
> 
> 时间：2013-04-24T13:29:28.183
> 
> 标签：java, android, reflection

我想扩展我[之前的问题](https://stackoverflow.com/questions/16189525/ongloballayoutlistener-deprecation-and-compatibility)。

如果在我的代码中有未来 API 提供的方法，如果我检查版本，我在 LogCat 中有以下警告

```
04-24 09:30:12.565: I/dalvikvm(471): Could not find method android.view.ViewTreeObserver.removeOnGlobalLayoutListener, referenced from method com.my.project.ActivityHome.removeLayoutListenerPost16
04-24 09:30:12.565: W/dalvikvm(471): VFY: unable to resolve virtual method 2950: Landroid/view/ViewTreeObserver;.removeOnGlobalLayoutListener (Landroid/view/ViewTreeObserver$OnGlobalLayoutListener;)V 
```

就我而言（请参阅链接的问题），我可以使用反射解决

```
try {
    Method m = ViewTreeObserver.class.getMethod("removeOnGlobalLayoutListener", OnGlobalLayoutListener.class);
    m.invoke(observer, listener);   
} catch (NoSuchMethodException e) {
    e.printStackTrace();
} catch (IllegalArgumentException e) {
    e.printStackTrace();
} catch (IllegalAccessException e) {
    e.printStackTrace();
} catch (InvocationTargetException e) {
    e.printStackTrace();
} 
```

我的问题是：最好使用反射并避免警告，还是最好忽略警告避免反射？

我的反射代码没有捕获异常，但我不确定它是否正确，是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:40:39.180

警告只是一个警告，它不会在执行过程中造成任何问题。

使用反射和异常处理测试方法的存在**成本很高**，应尽可能避免。

您应该`Build.VERSION.SDK_INT`检查您实际在哪个平台上运行的常量

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.GINGERBREAD) {
   // Do something using Gingerbread API
else {
   // Workaround for earlier version of android
} 
```

# c# - 计数或 Skip(1).Any() 我想找出是否有超过 1 条记录 - 实体框架

> ID：16193331
> 
> 赞同：11
> 
> 时间：2013-04-24T13:29:34.297
> 
> 标签：c#, sql-server, linq, entity-framework, tsql

我不确定什么时候，但我读到了一篇关于此的文章，它表明在使用实体框架时使用`Skip(1).Any()`比`Count()`同情更好（我可能记错了）。在看到生成的 T-SQL 代码后，我不确定这一点。

这是第一个选项：

```
int userConnectionCount = _dbContext.HubConnections.Count(conn => conn.UserId == user.Id);
bool isAtSingleConnection = (userConnectionCount == 1); 
```

这会生成以下合理的 T-SQL 代码：

```
SELECT 
[GroupBy1].[A1] AS [C1]
FROM ( SELECT 
  COUNT(1) AS [A1]
    FROM [dbo].[HubConnections] AS [Extent1]
    WHERE [Extent1].[UserId] = @p__linq__0
)  AS [GroupBy1] 
```

这是我记得的另一个选项，它是建议的查询：

```
bool isAtSingleConnection = !_dbContext
    .HubConnections.OrderBy(conn => conn.Id)
    .Skip(1).Any(conn => conn.UserId == user.Id); 
```

这是为上述 LINQ 查询生成的 T-SQL：

```
SELECT 
CASE WHEN ( EXISTS (SELECT 
    1 AS [C1]
    FROM ( SELECT [Extent1].[Id] AS [Id], [Extent1].[UserId] AS [UserId]
        FROM ( SELECT [Extent1].[Id] AS [Id], [Extent1].[UserId] AS [UserId], row_number() OVER (ORDER BY [Extent1].[Id] ASC) AS [row_number]
            FROM [dbo].[HubConnections] AS [Extent1]
        )  AS [Extent1]
        WHERE [Extent1].[row_number] > 1
    )  AS [Skip1]
    WHERE [Skip1].[UserId] = @p__linq__0
)) THEN cast(1 as bit) WHEN ( NOT EXISTS (SELECT 
    1 AS [C1]
    FROM ( SELECT [Extent2].[Id] AS [Id], [Extent2].[UserId] AS [UserId]
        FROM ( SELECT [Extent2].[Id] AS [Id], [Extent2].[UserId] AS [UserId], row_number() OVER (ORDER BY [Extent2].[Id] ASC) AS [row_number]
            FROM [dbo].[HubConnections] AS [Extent2]
        )  AS [Extent2]
        WHERE [Extent2].[row_number] > 1
    )  AS [Skip2]
    WHERE [Skip2].[UserId] = @p__linq__0
)) THEN cast(0 as bit) END AS [C1]
FROM  ( SELECT 1 AS X ) AS [SingleRowTable1]; 
```

哪一个是正确的方法？这两者之间有很大的性能差异吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-24T19:18:17.183

查询性能取决于很多因素，例如存在的索引、实际数据、关于存在的数据的统计信息的陈旧程度等。SQL 查询计划优化器会查看这些不同的指标以提出有效的查询计划。因此，任何说查询 1 总是比查询 2 好或相反的直接答案都是不正确的。

也就是说，我在下面的回答试图解释文章的立场以及如何`Skip(1).Any()`（稍微）比做`Count() > 1`. 第二个查询虽然尺寸更大并且几乎不可读，但看起来可以以一种有效的方式进行解释。同样，这取决于上述内容。这个想法是，在`Count()`. 在计数情况下，假设存在所需的索引（Id 上的聚集索引以使 OrderBy 在第二种情况下有效），数据库必须经过计数行数。在第二种情况下，它必须经过最多两行才能得出答案。

让我们的分析更加科学，看看我的上述理论是否站得住脚。为此，我正在创建一个虚拟客户数据库。客户类型如下所示，

```
public class Customer
{
    public int ID { get; set; }
    public string Name { get; set; }
    public int Age { get; set; }
} 
```

我正在使用此代码为数据库播种一些 100K 随机行（我真的必须证明这一点），

```
 for (int j = 0; j < 100; j++)
    {
        using (CustomersContext db = new CustomersContext())
        {
            Random r = new Random();
            for (int i = 0; i < 1000; i++)
            {
                Customer c = new Customer
                {
                    Name = Guid.NewGuid().ToString(),
                    Age = r.Next(0, 100)
                };
                db.Customers.Add(c);
            }
            db.SaveChanges();
        }
    } 
```

示例代码[在这里](https://gist.github.com/raghuramn/5454730)。

现在，我要使用的查询如下，

```
db.Customers.Where(c => c.Age == 26).Count() > 1; // scenario 1

db.Customers.Where(c => c.Age == 26).OrderBy(c => c.ID).Skip(1).Any() // scenario 2 
```

我已经启动 SQL 探查器来捕获查询计划。捕获的计划如下所示，

## 场景一：

查看上图中场景 1 的估计成本和实际行数。 ![方案 1 - 估计成本](https://i.stack.imgur.com/GkJEa.png) ![场景 1 - 实际行数](https://i.stack.imgur.com/04iJv.png)

## 场景二：

在下图中查看方案 2 的估计成本和实际行数。 ![方案 2 - 估计成本](https://i.stack.imgur.com/Xd7yE.png) ![场景 2 - 实际行数](https://i.stack.imgur.com/U4Mw2.png)

根据最初的猜测，与 Count 情况相比，Skip 和任何情况下的估计成本和行数都更少。

## 结论：

除了所有这些分析之外，正如许多其他人之前评论的那样，这些不是您应该尝试在代码中进行的性能优化。像这样的事情会以非常小的（我会说不存在）性能优势损害可读性。我只是为了好玩而进行此分析，并且永远不会将其用作选择方案 2 的基础。我会衡量并查看执行 a`Count()`是否真的会伤害更改要使用的代码`Skip().Any()`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-24T19:21:18.113

> 我读过一篇关于此的文章，它表明 的用法`Skip(1).Any()`优于`Count()`.

*该语句在 LINQ to objects 查询上*是完全正确的。在 LINQ to objects 查询上，`Skip(1).Any()`只需要尝试获取序列的前两项，它可以忽略它之后的所有项。如果序列涉及相当昂贵的操作（并适当地推迟执行），或者更重要的是，如果序列是无限的，这可能是一件大事。对于大多数查询，它会*有点*重要，但通常不是很多。

对于基于查询提供程序的 LINQ 查询，它不太可能有显着差异。正如您所见，特别是使用 EF，生成的查询并没有明显不同。有没有*可能*有区别，当然。查询提供者可以比另一种情况更好地处理一种情况，通过其中一种或另一种使用的特定重构可以更好地优化特定查询，等等。

如果有人暗示这两者之间的 EF 查询存在重大差异，则很可能他们错误地应用了旨在仅适用于 LINQ to objects 查询的指南。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T19:12:37.707

这肯定取决于您在表/数据集中的记录数。如果您有很多记录，那么对身份进行计数会非常快，因为它已编入索引，但跳过一条记录然后获取下一条记录会更快。

当然，在任何一种情况下，这个过程都可以在亚毫秒内完成。除非您的记录数超过 10,000 条以上，否则除非您需要它在特定阈值以下返回，否则这真的无关紧要。不要忘记 SQL Server 将缓存查询执行计划。如果您重新运行相同的查询，则在第一次运行后您可能看不到差异，除非数据在其下方发生了相当大的变化。

# r - R中前三个值的移动平均值

> ID：16193333
> 
> 赞同：14
> 
> 时间：2013-04-24T13:29:37.613
> 
> 标签：r, zoo, moving-average

在 zoo 包中有一个名为 rollmean 的函数，它使您能够制作移动平均线。将`rollmean(x,3)`采用下表中的上一个、当前和下一个值（即 4、6 和 2）。这显示在第二列中。

```
x   rollmean    ma3
4       
6   4.0 
2   4.3 
5   3.0         4.0
2   6.3         4.3
12  6.0         3.0
4   6.0         6.3
2               6.0 
```

我想完成同样的工作，但是通过平均第四行中的前 3 个值。这显示在第三列中。谁能告诉我有助于完成此任务的函数名称？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-24T13:33:05.183

你可以使用`rollmean`，但是设置`align='right'`。或者您可以使用`rollmeanr`默认`align='right'`设置。

```
ma3 <- rollmeanr(x[,1],3,fill=NA) 
```

...但你仍然需要滞后结果。另一种解决方案是使用参数`rollapply`列表`width`：

```
ma3 <- rollapplyr(x[,1],list(-(3:1)),mean,fill=NA) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-08-24T02:25:20.143

我努力寻找一个简单的移动平均线函数，它可以灵活地做我需要的事情。我终于写了几个函数，基于 rinni 在上面在评论中给出的过滤器函数扩展了一个函数（但它本身不起作用，因为它将包括 3 个周期平均值中的当前观察值）。

1.  包含当前观测值的移动平均函数

    ```
    mav <- function(x,n){filter(x,rep(1/n,n), sides=1)} 
    ```

2.  不包括当前观测值的移动平均函数

    ```
    mavback <- function(x,n){
      a<-mav(x,1)
      b<-mav(x,(n+1))
      c<-(1/n)*((n+1)*b - a)
      return(c)
    } 
    ```

3.  回溯移动平均函数，不包括当前 obs，基于从 [h1] 周期开始的 [h2] 读数

    ```
    mavback1<-function(x,h1,h2){
      a<-mavback(x,h1)
      b<-mavback(x,h1-h2)
      c<-(1/h2)*(h1*a -(h1-h2)*b)
      return(c)
    } 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-18T13:15:49.990

w_i_l_l 的 mavback 函数基于他的 mav 函数的更简单实现

`mavback <- function(x,n){ filter(x, c(0, rep(1/n,n)), sides=1) }`

# sql-server - SSDT 寄存器数据层应用程序

> ID：16193339
> 
> 赞同：0
> 
> 时间：2013-04-24T13:29:58.250
> 
> 标签：sql-server, sql-server-data-tools, database-project

我在发布 SSDT 数据库项目并将其注册为数据层应用程序时遇到问题。让我解释。

我有一个数据库 (A)，它通过链接服务器引用了另外两个数据库 (B & C)。我已经创建了基于 B 和 C 的项目，并对项目进行了快照，以便为数据库 B 和 C 创建 dacpac。我已经为数据库 A 创建了一个数据库项目，它通过 dacpac 对 B 和 C 进行了数据库引用。我已设置 SQLCMD 变量并修改了 db 项目 ddl 脚本以使用 SQLCMD 变量代替未解析的链接服务器名称。项目建成！

我正在尝试将项目发布为数据层应用程序，但不断收到以下错误“注册为 DAC 数据库的数据库必须由 SQL 2005 SP4、SQL 2008 SP2、SQL 2008 R2、SQL 2012 或 SQL Azure 的实例托管” . 顺便说一句，我正在运行 SQL Server 2012。

我想我会测试我是否可以通过 SSMS 注册为数据层应用程序。在 SSMS 中，“注册为数据层应用程序”选项显示为灰色。因此，我尝试“导出数据层应用程序”并收到一些关于链接服务器对象的错误。

我的问题是；是否可以部署 SSDT 数据库项目并将其注册为项目使用链接服务器的数据层应用程序，还是我做错了什么？如果可能的话，有人可以提供一些建议。

我已经打破谷歌寻找答案，所以任何帮助将不胜感激......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-08T08:54:53.020

我最近遇到了这个错误，所以我会为遇到这个问题的其他人添加我的解决方案，已经添加到[dba 堆栈交换中](https://dba.stackexchange.com/questions/40879/registering-a-ssdt-database-project-as-a-data-tier-application-fails)

结果在我的 publish.xml 中，我将 RegisterDataTierApplication 设置为 True。我第一次发布数据库时它运行良好，但后来我得到了同样的错误，因为数据库已经注册为数据层应用程序。

通过设置为 false （或取消选中 gui 中的复选框）它可以正常工作。

# cmake - CMake 与关于生成的文件

> ID：16193343
> 
> 赞同：1
> 
> 时间：2013-04-24T13:30:18.513
> 
> 标签：cmake, dynamically-generated, tntnet

今天是个好日子。

我有以下情况：我有一个 CMake 文件，它应该编译我的应用程序，它包括：

1.  一个或多个`cpp`文件
2.  有些模板文件（`ecpp`_ `cpp`_`WEB_COMPONENTS``.ecpp``.cpp`

这是 CMakeLists.txt（简化版）

```
cmake_minimum_required (VERSION 2.6)
set (PROJECT sinfonifry)
set (ECPPC /usr/local/bin/ecppc)
set (WEB_COMPONENTS 
     images 
     menu
     css
)

set(${PROJECT}_SOURCES
  ""
  CACHE INTERNAL ${PROJECT}_SOURCES
)

foreach(comp ${WEB_COMPONENTS})
  list(APPEND ${PROJECT}_SOURCES ${CMAKE_CURRENT_BINARY_DIR}/${comp}.cpp )

  execute_process(COMMAND ${ECPPC} -o ${CMAKE_CURRENT_BINARY_DIR}/${comp}.cpp -v
                  ${CMAKE_CURRENT_SOURCE_DIR}/${comp}.ecpp 
                  WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR} OUTPUT_QUIET
                 )
endforeach()

list(APPEND ${PROJECT}_SOURCES main.cpp )
add_executable(${PROJECT}_exe ${${PROJECT}_SOURCES})
target_link_libraries(${PROJECT}_exe cxxtools dl tntnet tntdb) 
```

现在，发生了什么：第一次（即：创建构建目录，运行 cmake-gui，选择 Web 组件，配置，生成，制作）CMake 很好地执行了`${ECPPC}`命令，即。它在二进制目录中生成所需的 CPP 文件，并将它们链接在一起。

过了一会儿，显然在我工作的时候，我修改了一个组件文件（例如`images.ecpp`）并`make`在构建目录中再次运行。但是现在，CMake 不会拾取`ecpp`文件的更改。我必须去 cmake-gui，删除缓存，从零开始一切。这是非常令人厌烦和缓慢的。

所以，两个问题：

1.  我可以告诉 CMake 跟踪它的变化并在它发生变化时`images.ecpp`调用它的编译器吗？`${ECPPC}`

2.  我怎样才能`make clean`让它也删除生成的`cpp`文件。

谢谢你的时间，f。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T14:00:34.687

而不是`execute_process()`你想使用`add_custom_command()`. 见这里：[https ://stackoverflow.com/a/2362222/4323](https://stackoverflow.com/a/2362222/4323)

基本上你告诉 CMake `OUTPUT`（生成的文件名）`COMMAND`、 和`DEPENDS`（.ecpp 文件名）。这使其了解如何将源代码转换为必要的 C++ 生成文件。然后，将生成的文件添加到某个目标，例如`add_executable()`，或添加到`add_custom_command()`依赖项（如果不需要编译，您可能需要它）。

# batch-file - 批处理文件打开 pwd 和用户 Ms 访问 .mdb 数据库

> ID：16193348
> 
> 赞同：0
> 
> 时间：2013-04-24T13:30:46.623
> 
> 标签：batch-file, ms-access, passwords

我有一个 Ms Access 数据库，我想从我的 .bat 文件中的一个选项打开，但无法弄清楚。

现在我有：

```
Start C:\SomeFolder\MyDBName.mdb /user MyUserName/pwd MyPassword 
```

另外，我还有一个问题。我有一个一直打开的程序，如果它在桌面上打开，则 MyDBName.mdb 将无法打开，但如果程序关闭，则 MyDBName.mdb 将打开，这是为什么呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T14:53:23.017

如果你输入开始/？在命令提示符下你会看到第一个参数是“title”

将您的起始线更改为

```
 Start "" C:\SomeFolder\MyDBName.mdb /user MyUserName /pwd MyPassword 
```

它应该可以工作。

正如 Gord 所提到的，有问题的程序可能具有对数据库的独占访问权限。您可以使用 taskkill 首先通过插入该行来关闭该程序

```
 taskkill /IM [Your program name.exe] 
```

在起跑线之前。

# c# - 在 Scala 中实现类似 LINQ 的功能

> ID：16193353
> 
> 赞同：4
> 
> 时间：2013-04-24T13:31:06.427
> 
> 标签：c#, linq, scala

LINQ-to-SQL 在 C# 中工作是因为编译器“魔术”允许表达式树和匿名函数使用相同的语法。如果`users`在`IQueryable`此处，`users.Where(u => u.UserId == 1)`则编译器将创建一个表达式树并最终将其传递给查询生成器。在没有编译器帮助的 Scala 中如何实现类似的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:55:52.313

[Slick](http://slick.typesafe.com/)是官方的类型安全工具，可以满足您的需求

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T13:55:26.523

自 Scala 2.10 以来，编译*器提供了* [帮助](http://docs.scala-lang.org/overviews/macros/overview.html)。

与 LINQ-to-SQL 最接近的类似物是[SLICK](http://slick.typesafe.com/ "光滑的")。

# c# - 使用 TypeConverter.ConvertFromString() 以自定义格式解析字符串

> ID：16193355
> 
> 赞同：11
> 
> 时间：2013-04-24T13:31:11.517
> 
> 标签：c#, .net, parsing, datetime, type-conversion

使用`TypeConverter.ConvertFromString()`，我需要在从字符串解析数据时提供自定义格式（例如，使用`DateTime`:`"ddMMyyyy"`或`"MMMM dd, yyyy"`）。

`TypeConverter.ConvertFromString()`具有以下重载：

```
public object ConvertFromString(ITypeDescriptorContext context, 
                                CultureInfo culture, 
                                string text); 
```

[我在MSDN](http://msdn.microsoft.com/en-us/library/system.componentmodel.itypedescriptorcontext%28v=vs.80%29.aspx)上查了关于`ITypeDescriptorContext`.

> ITypeDescriptorContext 接口提供有关组件的上下文信息。ITypeDescriptorContext 通常在设计时用于提供有关设计时容器的信息。该接口常用于类型转换。

这听起来像是我需要使用的，但我在任何地方都找不到任何示例。

我正在使用以下通用方法：

```
public T ParseValue<T>(string value)
{
    return (T)TypeDescriptor.GetConverter(typeof(T)).ConvertFromString(value);
} 
```

调用代码示例：

```
DateTime date = ParseValue<DateTime>("02062001");
decimal amount = ParseValue<decimal>("1.3423"); 
```

我希望能够将某种通用格式信息解析到此`ParseValue()`方法中，供`ConvertFromString()`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T13:41:40.827

您可以创建一个自定义 CultureInfo ，保存您的格式。

另一种解决方案是在一些辅助方法中包装转换，该方法将 DateTime.Parse 用于日期，将 TypeConverter 用于其他类型。

# vb.net - 从 vb.net 以 infopath 形式调用 Sql 过程

> ID：16193360
> 
> 赞同：1
> 
> 时间：2013-04-24T13:31:30.063
> 
> 标签：vb.net

我正在尝试执行以下代码以使用 vb.net 从 infopath 表单调用 sql 过程，我调试并检查了错误，但代码正在正确执行，并且在检索执行过程后收到的输出消息时遇到问题。

请帮我尽快解决这些问题

谢谢

```
Try
         Dim con As New SqlConnection("Data Source= XXXX;Initial Catalog= XXXXX;Integrated Security=true")
         Dim cmd As New SqlCommand
         Dim dr As SqlDataReader
         con.Open()
         cmd.CommandType = Data.CommandType.StoredProcedure
         cmd.CommandText = "Procedure Name"
         cmd.Parameters.Add(New SqlParameter("@Name", SqlDbType.VarChar, 50)).Value = "XXX" 
         cmd.Parameters.Add(New SqlParameter("@CustID", SqlDbType.VarChar, 20)).Value = "XXX"  
         cmd.Connection = con
         dr = cmd.Executereader()
         dr.Read()
         If dr.HasRows Then
             MessageBox.Show(dr.GetString(0))
         End If
                con.Close()
Catch ex As Exception
         MessageBox.Show(ex.Message)
End Try 
```

我的 Sql 程序：

```
enter code here

Create procedure Test_Infopath

@Name varchar(50),
@CustID Varchar(20)
      AS 

      Declare @Condition INT
      SELECT @Condition = CustID FROM temp_infopath WHERE CustID = @CustID
      IF @CustID= @Condition
      BEGIN 
                Print 'Customer ID already Exists'
      END
      Else 
                Print 'Submit the form to insert the data' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:52:04.443

所以你想在你的存储过程中返回消息，而不是一条记录。
然而，ADO.NET 的 SqlDataReader 和其他方法被认为返回记录而不是消息字符串。
我建议你以这种方式改变你的程序

```
ALTER PROCEDURE Test_Infopath
    @Name varchar(50),
    @CustID Varchar(20)
    AS 

    Declare @Condition INT
    SELECT @Condition = CustID FROM temp_infopath WHERE CustID = @CustID

    IF @CustID= @Condition
        SELECT 'Customer ID already Exists'
    Else 
        SELECT 'Submit the form to insert the data' 
```

现在 SqlDataReader 会将消息视为 SELECT 返回的记录
顺便说一句，当您返回由单行组成的单条记录时，通常编写此场景的方法是通过 SqlCommand 的 ExecuteScalar 方法，而不涉及另一个对象实例像 SqlDataReader。

```
cmd.Connection = con
Dim message = cmd.ExecuteScalar().ToString()
MessageBox.Show(message) 
```

# r - 如何为 2 个绘制的条创建 1 个 x 轴标签

> ID：16193362
> 
> 赞同：1
> 
> 时间：2013-04-24T11:14:42.317
> 
> 标签：r, data-visualization

我创建了一个条形图，但需要更改 x 轴标签，以便前两个条有一个标签，接下来的两个条有第二个标签。目前，4 个绘制的条中的每一个都单独标记，但每个标签重复两次。抱歉，如果术语不正确，我对整个 R 事物都是新手。

我输入的代码是：

```
attach(flydiets)
y <- matrix(protein,nrow = 100, ncol = 4, byrow = FALSE)
y[ , c(1,2,3,4)] <- y[ , c(1,3,2,4)]
means <- apply(y,2,mean)
tags = c("25°", "25°","28°", "28°")
barx <- barplot(means, beside=TRUE,col=c("white","grey"), 
ylim=c(0,600),  names.arg=tags, axis.lty=1, xlab="Temperature (°C)",
ylab="Protein Consumed (µg)")
sd <- apply(y,2,sd)## calculate a standard deviation for each column of y
sd <- matrix(sd,2,2) ## arrange them as a 2 x 2 matrix
se <- sd/sqrt(100)  ## convert them to standard errors
arrows(barx,means+1.96*se, barx, means-1.96*se, angle=90, code=3, length=0.1) 
legend("topright", legend=c("Male", "Female"), fill=c("white", "grey"), cex=0.8) 
```

任何帮助，将不胜感激。干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T04:44:11.797

下面是原始数据集的缩减样本。

“性”、“温度”、“碳水化合物”、“蛋白质”

"M","25", 396.075, 358.28

"M","25", 252.70, 204.70

"M","25", 441.81, 461.86

"M","25", 430.88, 374.67

“M”、“25”、520.46、439.10

"M","25", 484.45, 561.66

"M","28", 590.17, 429.98

“M”、“28”、383.23、517.82

"M","28", 431.945, 289.22

“M”、“28”、410.61、530.89

"M","28", 622.14, 533.25

"M","28", 509.58, 425.89

"F","25", 489.68, 209.87

"F","25", 451.03, 34.30

"F","25", 461.01, 283.88

"F","25", 715.74, 506.62

"F","25", 576.33, 476.30

“F”、“28”、450.12、452.56

"F","28", 498.53, 376.46

"F","28", 517.02, 303.82

"F","28", 355.84, 78.65

"F","28", 404.07, 229.88

"F","28", 537.57, 253.27

谢谢你的帮助

# libjingle - 构建 libjingle 后未获取二进制文件

> ID：16193364
> 
> 赞同：1
> 
> 时间：2013-04-24T13:31:36.210
> 
> 标签：libjingle

我正在尝试构建 libjingle。我已经完成了自述文件中提到的步骤，但我仍然没有得到二进制文件。

我遵循的步骤是：
我使用 GYP 构建
* 安装的 depot-tools
* gclient config [http://libjingle.googlecode.com/svn/trunk](http://libjingle.googlecode.com/svn/trunk)
* gclient sync
* gclient runhooks
* make

但正如 README 的最后一部分所述，我应该在 talk/build/dbg/staging 或 talk/build/opt/staging 下获取二进制文件。
但我在这些路径中没有得到任何东西。
请帮我。
我做错什么了吗？

# database - 自定义桌面应用程序的中央数据管理

> ID：16193371
> 
> 赞同：0
> 
> 时间：2013-04-24T13:32:00.560
> 
> 标签：database, amazon-ec2, cloud, desktop

我有网络编程背景，其中数据和代码都存在于服务器上。带有 mysql 之类的 Web 主机数量众多且价格便宜，因此从多台电脑上使用该应用程序从来都不是问题。

然而，我正在考虑切换到构建桌面应用程序，但唯一让我烦恼的因素是我使用的多台电脑之间的数据同步。我正在考虑可能设置一个带有 postgresql 的轻型亚马逊 ec2 实例，并让我的桌面应用程序使用它。

我有几个问题：

*   我很好奇通过在 ec2 而不是本地网络上运行数据库可能会产生什么延迟，任何经验或见解都值得赞赏。
*   有更好/更明显/更便宜的解决方案吗？
*   我查看了定价，年度合同似乎降至每月 24.48 美元。虽然不是很贵，但也不是很便宜。在什么时候运行本地服务器变得更有趣？
*   我显然不会在一天中的大部分时间（睡觉、工作……）使用我的应用程序。我想知道我是否可以让亚马逊服务器进入一种“睡眠”模式并在被戳时醒来。第一个桌面应用程序的初始延迟是可以接受的。这种行为背后的原因是为了节省实例的费用，前提是它实际上只需要 10% 的时间。

我欢迎任何关于如何最好地解决这个问题的反馈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T02:20:41.703

1.  这可能会变得丑陋。您所做的每一个查询都会有与之相关的延迟。如果您有很多查询，这可以很快加起来。因此，请保持低查询次数，并尽可能尝试预取和缓存数据。
2.  没有足够的信息来回答这个问题。
3.  取决于本地服务器的成本。请记住，您需要支付电费才能继续运行。
4.  您可以在不需要时停止您的实例，除了高利用率预留，当它处于停止状态时您不会被计费。对于高利用率预订，您仍需支付全部费用。

# bash - 为什么我的 bash 脚本不起作用

> ID：16193373
> 
> 赞同：1
> 
> 时间：2013-04-24T13:32:02.503
> 
> 标签：bash

我在 bash（一个新手）中编写了一个脚本，该脚本在本地闪存驱动器上创建一个文件并在其上写入随机数据，直到它填满。然后它将文件复制到外部 USB 驱动器并删除本地文件。一旦文件被填满并且它在 USB 驱动器上，它就会被复制回本地 NAND 闪存，删除，然后再次从 USB 闪存驱动器复制（无限期，直到用户停止它或发生错误，以首先 - 这是在一个while循环中）。当我运行脚本时，它显示：

```
nand_test.sh: line 19: /tmp/activity.log: Text file busy
nand_test.sh: line 19: /tmp/activity.log: Text file busy
nand_test.sh: line 19: /tmp/activity.log: Text file busy
nand_test.sh: line 19: /tmp/activity.log: Text file busy 
```

就挂在那里。有人可以告诉我我的脚本是否有错误吗？当谈到 bash 时，我很绿色。下面是代码：

```
LOG="/tmp/activity.log"

function if_error
{
if [[ $? -ne 0 ]]
then
  print "$1 TIME:$TIME" | tee -a $LOG
  exit $?

fi
}

#whenever the echo command is ran this function allows me add a timestamp

function echo {
  /bin/echo `date` $* | $LOG
}

#condition below checks if activity.log exists. If not, it creates it.

mydir="/media/myusb"
chmod +x /tmp/activity.log
activity="/tmp/activity.log"

if [ -e "$activity" ];then
  echo -    "$activity" LOG ALREADY EXISTS >> "$activity"

else
  > /activity.log
  #echo -    "$activity" LOG HAS BEEN CREATED >> "$activity"

fi

#condition below checks if myusb directory is created. If not, it creates it.

if [ -d "$mydir" ];then
  echo -    "$mydir" ALREADY EXISTS >> "$activity"

else
  mkdir /media/myusb
 #echo -     "$mydir" HAS BEEN CREATED >> "$activity"

fi

#check if external usb has been mounted. if not mount it.
device0="/dev/sda1"

if [ -b "$device0" ];then
  echo -    "$device0" IS ALREADY MOUNTED >> "$activity"
else
  mount LABEL=MYFLASH /media/myusb
 #echo -    "$device0" HAS BEEN MOUNTED >> "$activity"
fi

#condition below checks if testfile.txt has been created. If not, it creates it.

testfile="/storage/testfile.txt"

if [ -e "$testfile" ];then
  echo -    "$testfile" FILE ALREADY EXISTS >> "$activity"

else
  >> /storage/testfile.txt
  #echo -    "$testfile" HAS BEEN CREATED! >> "$activity"

fi

dd if=/dev/urandom of=/storage/testfile.txt >> "$activity"
ret=$?
if_error "urandom data failed writing to testfile.txt"

if [ "$ret" gt 0 ];then
  echo -    "NAND FLASH DATA TEST FAILED >> "$activity"
else
  cp "$testfile" "$mydir"
fi

rm "$testfile"
sync
sleep 3

while [ -e "/media/myusb/testfile.txt" ]
do
 cp /media/myusb/testfile.txt /storage
 sync
 DIFF= diff /media/myusb/testfile.txt "$testfile"
 if [ "$DIFF" != "" ];then
   echo -    "ERROR: THE FILE HAS BEEN MODIFIED" >> "$activity"

 else
   echo -    "FILE COMPARISON SUCCESSFUL" >> "$activity"
 fi
 rm "$testfile"
 sync 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:36:55.680

您在顶部有这一行：

```
LOG="/tmp/activity.log" 
```

接着：

```
/bin/echo `date` $* | $LOG 
```

这是没有意义的，因为您需要在管道之后有一个有效的 Unix 命令，而不仅仅是文件名。

# jboss - JBPM 流程设计器 - WebServices

> ID：16193374
> 
> 赞同：0
> 
> 时间：2013-04-24T13:32:05.100
> 
> 标签：jboss, jbpm, bpmn

我正在尝试将 WebService 服务任务添加到 JBPM 中的流程。我想直接从流程设计工具添加和配置任务。

JBPM 有 3 个可用于创建流程的可能工具、eclipse 插件：RulesFlow 编辑器和 BPMN2 Modeler，以及合并到 Drools 中的 Onyx Designer。到目前为止，我还没有设法在其中任何一个中做到这一点。

[我可以通过手动编辑流程 XML 文件（如下所示：http: //mswiderski.blogspot.com/2012/07/service-task-with-web-service.html](http://mswiderski.blogspot.com/2012/07/service-task-with-web-service.html) ）将 WS 添加到流程中，但我们需要能够在图形工具中完成（商业原因，不要问）。BPMN2 Modeler 最接近理论上可行的生成 XML，但是当我尝试运行它时，它会出现一堆错误。

我知道我提供的链接表明这些工具尚未提供 WS 功能，但也许有人对这个问题有一些想法。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T20:39:47.870

我不相信您可以直接从设计工具中创建服务任务。我在[这里](http://docs.jboss.org/jbpm/v5.4/userguide/ch.domain-specific-processes.html)关注了这个：

在您创建了工作项定义之后，您应该能够看到您可以在流程设计中添加该服务任务。请记住，在开始该过程之前，您必须将其注册到您的会话中。希望这可以帮助

# android - 页面不存在时的友好警告

> ID：16193376
> 
> 赞同：0
> 
> 时间：2013-04-24T13:32:15.653
> 
> 标签：android, cordova

我正在使用 phonegap 构建我们网站之一的离线版本。它工作正常，但是有时我可能会错过静态 html 中的一个链接，如果不小心点击了应用程序，应用程序就会崩溃。

是否有一个'catch'，或者什么，所以我可以弹出一个消息框，上面写着“这只是一个演示版本，这个链接被禁用”

非常感谢您的帮助！

汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:22:33.103

只需通过ajax请求检查页面是否存在

```
$.ajax({
    url:'http://www.example.com/somefile.ext or relative path',
    type:'HEAD',
    error: function()
    {
        //file not exists
    },
    success: function()
    {
        //file exists
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T12:25:42.173

您可以在单击时添加事件处理程序，检查页面是否存在，如果不存在，请调用 event.preventDefault（转到页面）和 stopPropagation

```
$('.classLink').on('click', function (event) {

            event.preventDefault();
            event.stopPropagation();
}); 
```

您可以使用`return false`来达到相同的结果。来自[http://api.jquery.com/on/](http://api.jquery.com/on/)：

> 从事件处理程序返回 false 将自动调用 event.stopPropagation() 和 event.preventDefault()。也可以为处理程序传递一个 false 值作为 function(){ return false; 的简写。}。所以， $("a.disabled").on("click", false); 将事件处理程序附加到具有“已禁用”类的所有链接，以防止在单击它们时跟踪它们，并阻止事件冒泡。

# image - 调整图像大小（动态）不起作用

> ID：16193382
> 
> 赞同：0
> 
> 时间：2013-04-24T13:32:33.930
> 
> 标签：image, resize

我正在使用来自 Bit Repository 的这个脚本。 `<IMG SRC="resize_image.php?image=sunset.jpg&new_width=32&new_height=32">`

我的问题是，它没有在我的托管服务器上显示任何图像。 [http://www.belowyellow.dx.am/resize_image/demo.html](http://www.belowyellow.dx.am/resize_image/demo.html)

但它适用于我的本地主机，希望有人可以帮助我。谢谢你。

来源： http: [//www.bitrepository.com/resize-an-image-keeping-its-aspect-ratio-using-php-and-gd.html](http://www.bitrepository.com/resize-an-image-keeping-its-aspect-ratio-using-php-and-gd.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:40:37.860

如果您在尝试将其嵌入标签之前查看您的[PHP 脚本](http://www.belowyellow.dx.am/resize_image/resize_image.php?image=sunset.jpg&new_width=32&new_height=32)`img`返回的内容，您会在图像数据之前看到一些警告。

由于 PHP 在您的图像输出之前输出文本，它不能再更改 HTTP 标头，因此您的图像作为文本输出。

```
set_time_limit(10000);
error_reporting(E_ALL ^ E_NOTICE); 
```

您应该从 resize_image.php 中删除这两行。[`set_time_limit`](http://php.net/manual/en/function.set-time-limit.php)在您的生产服务器上显然已禁用，因此第一行无用并生成警告。第二[`error_reporting`](http://php.net/manual/en/function.error-reporting.php)行是问题的真正根源，它告诉 PHP 显示**各种**警告和通知。这种错误报告只能在本地调试环境中使用，而**不能在生产服务器上使用**。如果删除此行，您将获得不应显示任何警告的默认错误报告，并且您的图像应正确输出。

# sql - 如何从一组中选择具有所有值行的id

> ID：16193387
> 
> 赞同：-2
> 
> 时间：2013-04-24T13:32:47.693
> 
> 标签：sql

我想从一个包含“篮球”和“足球”两个程序行的表中选择所有 ID

给定这样的表：

```
Id  program
1   basketball
2   football
3   basketball
2   basketball
1   football
4   football
5   basketball 
```

我怎样才能得到这样的结果：

```
id
1
2 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T13:35:26.693

由于您要返回`id`同时具有 和 的值`football`，`basketball`因此可以使用以下方法获取结果：

```
select id
from yt
where program in ('basketball', 'football')
group by id
having count(distinct program) = 2; 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/6cedd/1)。

因为也可以通过多次加入您的桌子来完成：

```
select t1.id
from yt t1
inner join yt t2
  on t1.id = t2.id
where t1.program = 'basketball'
  and t2.program = 'football'; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/6cedd/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T14:14:26.793

我认为聚合是最通用的方法：

```
select id
from table
group by id
having sum(case when program = 'Football' then 1 else 0 end) > 0 and
       sum(case when program = 'Basketball' then 1 else 0 end) > 0 
```

该`sum()`语句正在计算分别具有“足球”和“篮球”的行数。如果存在，则该数字大于 0。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-24T13:40:06.583

您可以使用`IN`or`OR`语法来做到这一点：

```
SELECT id
FROM table
WHERE program = 'basketball'
OR program = 'football'; 
```

如果您只想获得前两个结果，请添加`LIMIT 2`到最后。

顺便说一句，没有主键的表是非常糟糕的做法，没有办法索引这个表，所以性能会很差。

# asp.net - 新网站或 MVC 应用程序

> ID：16193397
> 
> 赞同：-2
> 
> 时间：2013-04-24T13:33:16.417
> 
> 标签：asp.net, asp.net-mvc-4, .net-4.0

我有一个主要从数据库呈现页面的网站。我们网站里面还有一个用户管理系统，需要登录，个人资料管理，信用卡处理等。网站有些地方有应用功能，比如论坛，但是大部分网站都是动态内容，渲染自a 数据库。使用与网站无关的内部 CMS 输入内容。

我正在将网站从 ASP 升级到 .Net 4.5 框架。VS 2012 中这个新项目的最佳选择是什么？一个 ASP.Net MVC 4 应用程序（Internet 应用程序）还是一个新的 ASP.Net 网站（Razor v2）？

我倾向于 ASP.Net MVC 4 应用程序（Internet 应用程序，Razor），而不是网站。

**更新：** 我实际上已经对此进行了大量阅读，无论是在 SO 还是其他站点，但仍然不确定哪个是从经典 ASP 迁移到 .Net 以满足我的特定需求的最佳选择。

当前的：

1.  经典的 ASP 网站（100 页），面向公众。
2.  当从数据库填充数据时，大多数页面都是从数据库呈现的，在 .asp 页面中使用模板 HTML。可以将其与功能上的 WordPress 网站进行比较。内容输入 CMS，并通过模板呈现在网站上。
3.  会员登录网站，拥有个人资料，付款等等。
4.  有一个论坛
5.  所有为搜索引擎设计的 URL。IIS 中的 URL 重写。我需要保留现有的 URL，并让它们与新的 .Net 站点一起使用。重要的。
6.  客户端操作是必须的，与 jQuery 工具、灯箱等集成。
7.  据说，这不是一个“应用程序”网站。这是一个面向公众的网站，例如 MSNBC 或类似网站，经常更新（每月几次，如果不是更多的话）。

我无法为迁移到 .Net 选择理想的项目类型。我不认为 Web 表单是一个好的选择，根据我所阅读的内容，MVC 4 似乎是一个不错的选择，但也许我可以使用标准 ASP.Net 网站（Razor v2）模板完成所有必要的事情.

我想从已经做过的人那里得到一些关于如何处理这个问题的意见。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:54:58.247

我会使用 .NET MVC 4 。但是，如果您遇到困难，则没有太多在线资源。但我认为无论如何你都会活下来。唯一的缺点是你需要更多的时间来学习新东西，因为它与旧东西有很大不同。

如果您有足够的时间，请使用 MVC 4。一旦您使用它完成项目，您以后可以轻松地进行任何更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T15:31:15.343

您可以开箱即用地创建三种网站（以及许多子类型）。ASP.NET WebForms、ASP.NET 网页和 ASP.NET MVC。您选择哪一个与其他任何事情一样取决于个人喜好，尽管某些类型的网站使某些事情更容易做。

一般来说（这些不是硬性规定）

WebForms - 这是 90% 的人这样做的方式，那里有很多知识、书籍和信息。它可以工作，但是在创建符合标准的 html、可测试性和可维护性方面，您必须处理很多事情。所有这些问题都有解决方案，而且众所周知，但总的来说它被认为是“旧技术”（虽然不像经典 asp 那样古老）

WebPages - 该技术基于 Razor 视图引擎，将页面视为更像经典 ASP，您可以在其中混合代码和 html。通常，这允许您快速创建具有功能的网站，但代价是长期可维护性和可测试性。与任何事情一样，您可以强制流程解决这些问题，但框架本身并不真正适合它。

MVC - 该技术基于众所周知且易于理解的 MVC 用户界面模式。它侧重于关注点分离，以提高可维护性、可测试性和易于开发。它确实需要与传统的 ASP.NET 开发有很大的不同，并且需要一个陡峭的学习曲线。您必须比 WebForms 更深入地了解 HTML、CSS 和 JavaScript。

我尽我所能使用 MVC，这对我来说更合乎逻辑。MVC 是那些真正令人困惑的事情之一，直到你达到“啊哈！” 片刻，然后一切都卡入到位。

你选择什么完全取决于你。你必须决定你想如何发展，这将指导你的决定。

# sql - 使用 If When 的 SQL 更新语句

> ID：16193400
> 
> 赞同：4
> 
> 时间：2013-04-24T13:33:25.560
> 
> 标签：sql, sql-update

我试图用另一列的值更新一列，如果该列也不为空。如果为空，则用第 3 列更新第 1 列

这是一个例子：

```
day_phone sec_phone alt_phone cell_phone
555-555-1212 空 空 空
空 555-555-1234 空 空
空 空 555-555-4321 空
空 空 空 555-555-5678
空 555-123-4567 555-867-5309 空
```

所以我想要完成的是更新所有记录，以便 day_phone 最终得到一个结果，如果多列中有记录，最好是它找到的第一个。最终结果应如下所示：

```
day_phone sec_phone alt_phone cell_phone
555-555-1212 空 空 空
555-555-1234 555-555-1234 无 无
555-555-4321 空 555-555-4321 空
555-555-5678 空 空 555-555-5678
555-123-4567 555-123-4567 555-867-5309 空
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T13:35:05.097

只需使用`COALESCE`

```
UPDATE  tableName
SET     day_phone = COALESCE(day_phone, sec_phone, alt_phone, cell_phone) 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/e0118d/1)

如果您只想在`day_phone`为空时更新，那么您可以添加额外的条件，

```
UPDATE  tableName
SET     day_phone = COALESCE(sec_phone, alt_phone, cell_phone)
WHERE   day_phone IS NULL 
```

这将使更新更快，因为只有选定的行被更新。如果您在 column 上有索引，则速度会更快`day_phone`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T13:39:41.530

最简单的方法是一系列更新语句。

```
UPDATE table_name
SET column1=column2
WHERE column1 IS NULL
AND column2 IS NOT NULL 
```

重复第 3、4 列等...按优先顺序运行。

[http://www.w3schools.com/sql/sql_null_values.asp](http://www.w3schools.com/sql/sql_null_values.asp)

[http://www.w3schools.com/sql/sql_update.asp](http://www.w3schools.com/sql/sql_update.asp)

# wordpress - 用于自定义分类的 wordpress 永久链接

> ID：16193401
> 
> 赞同：1
> 
> 时间：2013-04-24T13:33:30.933
> 
> 标签：wordpress, permalinks, custom-taxonomy

我在 wordpress 中使用部落事件并一直在努力解决以下问题：

我有按类别过滤的事件（自定义帖子类型）（此插件的默认分类）。我正在使用“漂亮的永久链接设置”，所以我的网址看起来像这样：[website.com]/events/category/Amsterdam/（当我的类别是阿姆斯特丹时）。

现在的问题是：当我试图从阿姆斯特丹获取所有属于“音乐会”类型的帖子时，我通过另一个名为“event_type”（音乐会，酒吧......）的自定义分类法对我的帖子进行了子过滤，我的网址是：[ website.com]/events/category/amsterdam/?event_type=concert 默认永久链接设置的 url 是：[website.com]/index.php?tribe_events_cat=amsterdam&event_type=concert

如何让 WordPress 转换并将我的网址识别为：[website.com]/events/category/amsterdam/event_type/concert/

我知道它与 rewrite_rules_array 有关，但无法做到。任何帮助将不胜感激！

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:36:22.097

当您注册自定义帖子类型时：

```
function people_init() {
    // create a new taxonomy
    register_taxonomy(
        'people',
        'post',
        array(
            'label' => __( 'People' ),
            'rewrite' => array( 'slug' => 'person' ),
            'capabilities' => array(
                'assign_terms' => 'edit_guides',
                'edit_terms' => 'publish_guides'
            )
        )
    );
}
add_action( 'init', 'people_init' ); 
```

签出“重写”参数。更多您可以在这里查看：http: [//codex.wordpress.org/Function_Reference/register_taxonomy](http://codex.wordpress.org/Function_Reference/register_taxonomy)

有时您还需要通过转到永久链接设置并单击保存来刷新永久链接结构（不要问我为什么）；）。

# jquery - 在 Spring 3 和 JSP 中实现多项目选择器

> ID：16193402
> 
> 赞同：0
> 
> 时间：2013-04-24T13:33:35.037
> 
> 标签：jquery, spring, jsp

我想在 Spring 3 和 JSP 中实现如下 UI 表单（使用 Java Swing 轻松实现）：

![在此处输入图像描述](https://i.stack.imgur.com/5lfzP.jpg)

谷歌搜索我发现了类似的东西，但不是一个可以节省我一些开发时间的完整示例。有人有快速完整的教程或链接吗？这个想法是让它动态工作，所以我想这应该包括一些 jQuery。

提前致谢 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:37:04.257

一般来说，这样的模式是

*   使用适用于您的框架的 JSP 标签将您的控制器和 JSP 与标准 HTML 输入连接起来
*   在现有 HTML 之上分层 jQuery UI

对于此特定示例，请参阅：[可过滤的多选组合框穿梭/传输小部件](https://stackoverflow.com/questions/13366940/filterable-multi-select-combobox-shuttle-transfer-widget)

有关如何在客户端执行此操作的想法。您将使用 JS 和 jQuery 在您的 JSP 中包含客户端代码。

在服务器端，它看起来就像`<select>`是您在`@Controller`方法中处理的模型的一部分。

对于滑块之类的东西（看起来像常规文本输入），这是一种类似的模式。

# javascript - 页面刷新时是否清理了 window.document ？

> ID：16193407
> 
> 赞同：0
> 
> 时间：2013-04-24T13:33:42.043
> 
> 标签：javascript, window

我正在使用该`window`对象保存一些值，以便在其他功能中访问它们，我的一位同事建议我保存我的数据，`window.document`原因是在每次页面加载时都会清理 window.document。

我想知道这是否正确，因为很明显 DOM 已重新加载，但我的模块等其他数据我对此表示怀疑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:41:19.293

当页面重新加载时，整个 DOM 被重建并且`window`对象被清除（可能它是一个全新的对象，尽管这取决于浏览器）。除了本地存储和 cookie，上一页中没有任何内容。哦，我想你也可以数一数历史。

这意味着当新页面加载时，它会重新加载您的 JavaScript 库，这些都是全新的副本，它们会重新初始化。

# java - Ant Deploy War to Glassfish 3 服务器在 GWT 失败

> ID：16193415
> 
> 赞同：0
> 
> 时间：2013-04-24T13:34:00.060
> 
> 标签：java, ant, rpc, smartgwt, build.xml

我正在开发一个系统来部署从 GWT 接口中选择的应用程序。我已经相应地编写了 build.xml；

```
<target
    name="deploywar"
    description="Varolan WAR dosyasını yayınlar." >
    <echo level="info" >
        Proje sunucuda yayinlaniyor... 
    </echo>
    <exec
        executable="cmd"
        failonerror="true" >
        <arg value="/c" />
        <arg value="D:/enlil/glassfish3/bin/asadmin --passwordfile D:/stajyer/password.txt deploy --contextroot /GlassfishDeployment dist/MobilHis.war" />
    </exec>
</target> 
```

并从 Java 调用此目标；

```
buildfile = new java.io.File("build.xml");
p = new Project();
p.setUserProperty("ant.file", buildfile.getAbsolutePath());
p.init();
helper = ProjectHelper.getProjectHelper();
p.addReference("ant.projectHelper", helper);
helper.parse(p, buildfile);
p.executeTarget("deploywar"); 
```

当我从 test(main) 类调用这个过程时，我的意思不是从 Web 界面，它执行部署过程。但是当我通过 RPC 回调从 web 界面调用这个方法时，我得到了这个错误。

```
exec returned: 1
D:\stajyer\Glassfish Deployment\war\build.xml:83: exec returned: 1
    at org.apache.tools.ant.taskdefs.ExecTask.runExecute(ExecTask.java:591)
at org.apache.tools.ant.taskdefs.ExecTask.runExec(ExecTask.java:617)
at org.apache.tools.ant.taskdefs.ExecTask.execute(ExecTask.java:452)
at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:275)
at org.apache.tools.ant.Task.perform(Task.java:364)
at org.apache.tools.ant.Target.execute(Target.java:341)
at org.apache.tools.ant.Target.performTasks(Target.java:369)
at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1216)
at org.apache.tools.ant.Project.executeTarget(Project.java:1185)
at com.enlil.source.server.RunAntXmlFile.deployWar(RunAntXmlFile.java:58)
at com.enlil.source.server.FTPProcessImpl.deployFiles(FTPProcessImpl.java:120)
at com.enlil.source.server.FTPProcessImpl.updateFiles(FTPProcessImpl.java:350)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:569)
at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:487)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:362)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:729)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:405)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.handler.RequestLogHandler.handle(RequestLogHandler.java:49)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:324)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:505)
at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:843)
at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:647)
at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:211)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:380)
at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:395)
at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:488) 
```

我找不到问题出在哪里。感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T11:03:34.153

我发现在我的项目文件夹中有 2 个 build.xml 文件，而我的类引用了另一个，我不知道为什么我有两个，但是当我将代码粘贴到其他 build.xml 时，所有问题都已修复向上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T12:46:05.097

尝试跟随。

```
<exec executable="D:/enlil/glassfish3/bin/asadmin" failonerror="true">
    <arg value="--passwordfile"/>
    <arg value="D:/stajyer/password.txt"/>
    <arg value="deploy"/>
    <arg value="--contextroot"/>
    <arg value="/GlassfishDeployment"/>
    <arg value="dist/MobilHis.war"/>
</exec> 
```

将参数保存在单独的`<arg/>`元素中。

这可能是因为 glassfish 无法打开命令提示符。

# delphi - DELPHI：在 TComponent 中声明 HTTPRIO.OnBeforeExecute

> ID：16193416
> 
> 赞同：0
> 
> 时间：2013-04-24T13:34:03.703
> 
> 标签：delphi, soap, delphi-2005

使用 Delphi 2005，我创建了一个测试应用程序（使用 TForm）来测试 SOAP API。不幸的是，这个 API 声明了一些由 Delphi 保留的枚举（应用程序、系统和终端）。我重命名了 SOAP 文件中的枚举（_Application、_Terminal 和 _System），并且能够编写 OnBeforeExecute 和 OnAfterExecute 方法来用提交前后的原始名称替换这些重命名的枚举。

我现在正在尝试将其合并到我的更大项目中，并希望在类文件（无形式）中捕获此 SOAP API 的所有代码。通过我的测试应用程序，我向表单添加了一个 THTTPRIO 对象（来自工具面板），并且可以轻松地在对象检查器中设置 OnBeforeExecute 和 OnAfterExecute 方法。现在使用类（一个 TComponent），我无法像使用表单一样使用 Tool Palette 添加 THTTPRIO 对象。我尝试通过代码创建 THTTPRIO 对象，但遇到了一些错误。

我得到错误（见下面的代码`E2009 incompatible types: 'Parameter lists differ'`） `FEPS_HTTPRIO.OnAfterExecute := HTTPRIOAfterExecute;`

为什么我会在这个问题上得到错误，而不是在这个问题上 `FEPS_HTTPRIO.OnBeforeExecute := HTTPRIOBeforeExecute;`，我如何在我的类中实现这两种方法？

以下是我通过代码创建 THTTPRIO 的方式：

```
unit c_MoSh;

interface

uses classes, forms, Windows, SysUtils, c_MoShAPI, InvokeRegistry, controls;

Type

  TMoSh = class(TComponent)
  private
    ...
    procedure HTTPRIOBeforeExecute(const MethodName: string;
                                    var SOAPRequest: WideString);
    procedure HTTPRIOAfterExecute(const MethodName: string;
                                    var SOAPResponse: TStream);

  ...

constructor TMoSh.Create();
begin
  FEPS_HTTPRIO := THTTPRIO.Create(self);
  FEPS_HTTPRIO.OnBeforeExecute := HTTPRIOBeforeExecute;
  FEPS_HTTPRIO.OnAfterExecute := HTTPRIOAfterExecute;       <-- Error line

end;

procedure TMosquitoShield.HTTPRIOBeforeExecute(const MethodName: string;
                                    var SOAPRequest: WideString);
var
  tmpString: TStringList;
begin

  try

    SOAPRequest := StringReplace(SOAPRequest,'<ReversalType>_Application','<ReversalType>Application',[RfReplaceAll]);
    SOAPRequest := StringReplace(SOAPRequest,'<ReversalType>_System','<ReversalType>System',[RfReplaceAll]);
    SOAPRequest := StringReplace(SOAPRequest,'<CardholderPresentCode>NotPresent2','<CardholderPresentCode>NotPresent',[RfReplaceAll]);
    SOAPRequest := StringReplace(SOAPRequest,'<DeviceInputCode>NotUsed3','<DeviceInputCode>NotUsed',[RfReplaceAll]);

  except
    on ER : ERemotableException do
      ShowMessage(ER.ClassName + ' error raised, with message : ' + ER.FaultDetail + ' :: '
                    + ER.Message);

    on E : Exception do
      ShowMessage(E.ClassName + ' error raised, with message : ' + E.Message);
  end;

end;

procedure TMosquitoShield.HTTPRIOAfterExecute(const MethodName: string;
                                    var SOAPResponse: TStream);
var
  tmpString: TStringList;
begin

  try
    tmpString := TStringList.Create;
    SOAPResponse.Position := 0;
    tmpString.LoadFromStream(SOAPResponse);

    tmpString.Text := StringReplace(tmpString.Text,'Application','_Application',[RfReplaceAll]);
    tmpString.Text := StringReplace(tmpString.Text,'System','_System',[RfReplaceAll]);
    tmpString.Text := StringReplace(tmpString.Text,'<PASSUpdaterOption>Null','<PASSUpdaterOption>Null2',[RfReplaceAll]);
    tmpString.Text := StringReplace(tmpString.Text,'<TransactionSetupMethod>Null','<TransactionSetupMethod>Null3',[RfReplaceAll]);
    tmpString.Text := StringReplace(tmpString.Text,'<Device>Null','<Device>Null4',[RfReplaceAll]);
    tmpString.Text := StringReplace(tmpString.Text,'<ConsentCode>NotUsed','<ConsentCode>NotUsed2',[RfReplaceAll]);
    tmpString.Text := StringReplace(tmpString.Text,'<DeviceInputCode>NotUsed','<DeviceInputCode>NotUsed3',[RfReplaceAll]);

    SOAPResponse.Position := 0;
    tmpString.SaveToStream(SOAPResponse);

  except
    on ER : ERemotableException do
      ShowMessage(ER.ClassName + ' error raised, with message : ' + ER.FaultDetail + ' :: '
                    + ER.Message);

    on E : Exception do
      ShowMessage(E.ClassName + ' error raised, with message : ' + E.Message);
  end;

end; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T13:43:34.347

您的方法签名必须与事件类型的签名完全匹配。删除方法中的`var`before`SOAPResponse`参数`HTTPRIOAfterExecute`。

至于您描述的名称冲突，您可以通过在代码元素（枚举成员、变量、类型等）前面加上单元名称来避免它们：`SOAP_API.Application`- 对于 SOAP 枚举，`Forms.Application`对于 Delphi`Application`全局。

# php - 带有复选框的表单输入字段，反之亦然 - 缺少第一个值

> ID：16193417
> 
> 赞同：3
> 
> 时间：2013-04-24T13:34:07.320
> 
> 标签：php, javascript, jquery, forms, checkbox

我有一个小表格，其中我将一个数组`$menu`列为复选框。

使用 jQuery（参见下面的脚本），然后我将复选框的值放入（最终隐藏的）输入字段中。我知道这不是传统方式，但我想将它们全部存储为一个统一的值。

再次加载表单时（或提交后），我当然需要使用存储为字符串的值（来自输入字段）再次填充这些字段。

我使用一个简单`strpos()`的三元运算符 for `"checked"`。

我的问题是，在每次加载时，列表上检查的第一个值将不会被确认，也不会被检查。总是`first one`and `only the first one`（它在列表中的上部 - 我不是指第`ABSOLUTE`一个，而是第一个要先前检查的。保存的字符串中的第一个。）。这意味着如果我显示输入字段（不隐藏），我可以看到字符串中的值，但复选框不是`"checked"`。

其余的都运行良好....

也许只是我的眼睛累了，但我真的找不到问题所在:-)

任何输入将不胜感激..

```
global $menu;
    $output = '';

    for ($i = 1; $i <= 100; $i++){
        if ($menu[$i][2]){

        $find = $menu[$i][2];
        $pos = strpos($opp_array['brsa_menu_list'], $find);

            $output .=  '</br><input class="checkbox remove_check" type="checkbox" ' .(($pos) ? ' checked ':'') . 'name="option1" value="'  . $menu[$i][2] .'"> '  . $menu[$i][2] ;
        }
     }
echo '<b>Available menus  :  </b><br>' . $output .'<br>';

?>

<p>
    <input class="regular-text" id="sbrsamenu_list" name="brsa_s[brsa_menu_list]" type="text" value="<?php echo $opp_array['brsa_menu_list']; ?>"/>

    <label class="description" for="sbrsamenu_list">
    </br><?php echo 'Please write the menu items'; ?>
    </label>
</p> 
```

和js

```
<script type="text/javascript">

    // <![CDATA[
        jQuery(document).ready(function() {

    var $checkboxes = jQuery(".remove_check");
    $checkboxes.on('change', function() {
        var ids = $checkboxes.filter(':checked').map(function() {
            return this.value;
        }).get().join(' | ');
        jQuery('#sbrsamenu_list').val(ids);
    });

        });

    // ]]>
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T13:42:58.943

如果`$pos`是一个布尔值，表示一个字符串是否出现在另一个字符串中，您应该比较来自`strpos()`against的值`false`：

```
$pos = strpos($opp_array['brsa_menu_list'], $find) !== false; 
```

否则，如果`$find`出现在字符串的开头，则`strpos()`返回`0`代码中的`false`.

# google-calendar-api - 晚上 7 点之后的谷歌日历事件直到第二天使用谷歌事件 API 检索

> ID：16193421
> 
> 赞同：0
> 
> 时间：2013-04-24T13:34:18.497
> 
> 标签：google-calendar-api

我已经更新了这个，因为这个问题比原来的更有意义。我仍然包含我用来显示正在发生的事情的测试代码。

有关我发现的更多最新信息，请参阅评论。

执行 API 来抓取今天的事件（应该有 1 个）：

```
/calendar/v3/calendars/{calid}/events?calendarId={calid}&singleEvents=true&timeMin=2013-04-24T00:00:00.000Z&timeMax=2013-04-25T00:00:00.000Z 
```

它什么也不检索。不返回任何事件。

如果我执行以下操作（即第二天）：

```
/calendar/v3/calendars/{calid}/events?calendarId={calid}&singleEvents=true&timeMin=2013-04-25T00:00:00.000Z&timeMax=2013-04-26T00:00:00.000Z 
```

它检索设置为 24 日（但在晚上 7 点之后）而不是 25 日的以下内容：

```
{
 "kind": "calendar#events",
 "etag": "\"GZxpEFttRDAOmLHnWRxLHHWPGwk/01XVNYQjwJ5jTmd05uIgK9e6Uhw\"",
 "summary": "test calendar",
 "description": "test calendar",
 "updated": "2013-04-24T13:09:12.000Z",
 "timeZone": "America/Chicago",
 "items": [
  {
   "kind": "calendar#event",
   "etag": "\"GZxpEFttRDAOmLHnWRxLHHWPGwk/Z2NhbDAwMDAxMzY2MTQ4ODczODI3MDAw\"",
   "id": "d1mdj3dasor22f0nm0lbohru7s",
   "status": "confirmed",
   "htmlLink": "https://www.google.com/calendar/event?eid=ZDFtZGozZGFzb3IyMmYwbm0wbGJvaHJ1N3MgYnZzdG9vbHMuY29tX2xidWt1ZmlnczJjMmFycjViODgycDVhYWhvQGc",
   "created": "2013-04-16T21:47:53.000Z",
   "updated": "2013-04-16T21:47:53.827Z",
   "summary": "this should happen 4/24/2013",
   "description": "testing event",
   "creator": {
    "email": "{my email address}",
    "displayName": "my name"
   },
   "organizer": {
    "email": "{calid}",
    "displayName": "test calendar",
    "self": true
   },
   "start": {
    "dateTime": "2013-04-24T21:21:19-05:00"
   },
   "end": {
    "dateTime": "2013-04-24T21:21:19-05:00"
   },
   "iCalUID": "d1mdj3dasor22f0nm0lbohru7s@google.com",
   "sequence": 0,
   "extendedProperties": {
    "private": {
     "evtKey": "key"
    }
   },
   "reminders": {
    "useDefault": true
   }
  }
 ]
} 
```

它应该在 24 日的第一次 api 调用中检索它，而不是 25 日的第二次 api 调用，除非我遗漏了什么。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-03T13:27:34.927

有点晚了，但如果你仍然需要它。我认为您检索到的事件`d1mdj3dasor22f0nm0lbohru7`似乎在日历的默认时区，即美国/芝加哥。这就解释了为什么它仅在您将查询设置为 UTC 时间 25 时才显示

# iphone - 移动端和网络服务器之间的数据同步

> ID：16193422
> 
> 赞同：3
> 
> 时间：2013-04-24T13:34:18.577
> 
> 标签：iphone, ios, data-synchronization

您将如何实施确保移动设备和 Web 服务器上的数据同步的数据同步解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T13:45:04.277

看一下本教程（[第一部分](http://www.raywenderlich.com/15916/how-to-synchronize-core-data-with-a-web-service-part-1)和[第二部分](http://www.raywenderlich.com/17927/how-to-synchronize-core-data-with-a-web-service-part-2)），基本上他们所做的就是添加一个时间戳属性来存储最后的修改。它被开发用于与 parse.com 后端服务同步，但它可以扩展到任何后端。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T13:56:02.147

为此，我们在公司中使用了 Unix-Timestamp。服务器通过 tls 以 json 格式与我们通信，客户端使用[AsyncSocket](https://github.com/roustem/AsyncSocket)。对于 Web-Server (https)，​​您可以将 REST 服务和[ASIHTTP](https://github.com/pokeb/asi-http-request/tree)用于客户端。但是我们的解决方案用于独立于客户端的服务，因此如果您只能使用 IOS/OS X 访问，则使用其他解决方案进行直接同步可能会更容易:)

# ios - 如何在正则表达式枚举块的末尾得到通知？

> ID：16193423
> 
> 赞同：1
> 
> 时间：2013-04-24T13:34:22.007
> 
> 标签：ios, regex

我正在使用以下代码来操作我的`str`字符串：

```
NSString *pattern = @"\\['(.*?)',(.*?),(.*?),(.*?),(.*?)\\]";
NSRegularExpression *regex = [NSRegularExpression
                              regularExpressionWithPattern:pattern
                              options:NSRegularExpressionCaseInsensitive
                              error:nil];
[regex enumerateMatchesInString:str
                        options:0
                          range:NSMakeRange(0, [str length])
                     usingBlock:^(NSTextCheckingResult *result, NSMatchingFlags flags, BOOL *stop){
                         if (result != nil) 
                         {
                                 // do something with matched string
                         }
                 }]; 
```

我如何知道块何时处于最后一次迭代中，以便我可以相应地同步我的程序？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:38:29.177

尽管存在我们经常与异步操作相关联的块，但这些枚举方法不会异步发生。它同步运行。你应该没事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T13:40:33.587

您可以在正则表达式之后立即同步您的程序：

```
[regex enumerateMatchesInString: ... ];
[self syncMyProgram]; 
```

# javascript - 单击时显示 div，单击外部时隐藏

> ID：16193424
> 
> 赞同：5
> 
> 时间：2013-04-24T13:34:21.953
> 
> 标签：javascript, html, hide, show

我试图在单击链接后显示#subscribe-pop div，并在单击链接之外的任何位置时隐藏它。如果我更改以下内容，我可以让它显示和隐藏：

```
$('document').click(function() { 
```

至

```
$('#SomeOtherRandomDiv').click(function() { 
```

HTML：

```
<div id="footleft">
    <a href="#" onclick="toggle_visibility('subscribe-pop');">Click here to show div</a>
    <div id="subscribe-pop"><p>my content</p></div>
</div> 
```

脚本：

```
<script type="text/javascript">
    function toggle_visibility(id) {
        var e = document.getElementById("subscribe-pop");
        if(e.style.display == 'block')
            e.style.display = 'none';
        else
            e.style.display = 'block';
        }
    }

    $('document').click(function() {
        $('#subscribe-pop').hide(); //Hide the menus if visible
    });

    $('#subscribe-pop').click(function(e){
        e.stopPropagation();
    });
</script> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-24T14:06:34.123

您必须停止容器中的事件传播（在本例中为“footleft”），因此父元素不会注意到事件已被触发。

像这样的东西：

**HTML**

```
 <div id="footleft">
    <a href="#" id='link'>Click here to show div</a>
    <div id="subscribe-pop"><p>my content</p></div>
 </div> 
```

**JS**

```
 $('html').click(function() {
    $('#subscribe-pop').hide();
 })

 $('#footleft').click(function(e){
     e.stopPropagation();
 });

 $('#link').click(function(e) {
     $('#subscribe-pop').toggle();
 }); 
```

看到它在[**这里**](http://jsfiddle.net/4yBGt/)工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T14:21:38.643

我认为提问者正在尝试完成 div 的 jquery 模态类型显示。

如果您想查看此[链接](http://www.jacklmoore.com/demo/modal/modal2.html)，则加载页面时会显示一个模态 div，因为它会使背景变暗，从而将您的眼睛吸引到屏幕中心。

此外，我编译了一个简短的[jsFiddle](http://jsfiddle.net/KevinIsNowOnline/P45bE/8/)供您查看。如果您被允许根据您的要求使用 jquery，您还可以查看他们的网站。

这是显示或隐藏弹出 div 的代码

```
var toggleVisibility = function (){
     if($('#subscribe-pop').is(":not(:visible)") ){
            $('#subscribe-pop').show(); 
        }else{
             $('#subscribe-pop').hide(); 
        }   
    } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-24T13:49:24.917

改成`$(document).click()`应该`$('html').click()`可以解决主要问题。

其次，您根本不需要该`toggle_visibility()`功能，您可以简单地执行以下操作：

```
$('#subscribe-pop').toggle(); 
```

参考：更改`body`为`html`根据此答案：[如何检测元素外的点击？](https://stackoverflow.com/questions/152975/how-to-detect-a-click-outside-an-element)

# ios - 在 webview 上自动调整掩码大小没有任何区别

> ID：16193425
> 
> 赞同：0
> 
> 时间：2013-04-24T13:34:21.960
> 
> 标签：ios, objective-c, uiwebview, autoresizingmask

如何将自动调整大小掩码添加到 web 视图。

我试过这个

```
[self.webView setAutoresizingMask:UIViewAutoresizingFlexibleBottomMargin];
[self.webView reload]; 
```

webview 不会根据模态对话框的大小而改变大小。如果方向改变，那么我会改变模态对话框的大小，这样键盘就不会越过文本框。虽然 webview 大小没有改变。

**当模态对话框的高度较小时，我希望 webview 保持在顶部并降低高度。**

我也尝试过手动调整它的大小，但 webview 不想改变大小。这是我试图手动更改它

```
self.webView.frame = CGRectMake(self.webView.frame.origin.x, self.webView.frame.origin.y, self.webView.frame.size.width, 0);
[self.webView reload]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T14:02:46.243

```
[self.webView setAutoresizingMask:UIViewAutoresizingFlexibleBottomMargin]; 
```

表示视图可以改变它的高度以保持它的底部和它的父视图控制器底部之间的距离相同

```
self.webView.frame = CGRectMake(self.webView.frame.origin.x, self.webView.frame.origin.y, self.webView.frame.size.width, 0); 
```

表示您要更改视图的尺寸，使其保持相同的原点 x、y、相同的宽度但高度为 0...

你可能想做的是 CGRect parentFrame = self.webView.superview.frame self.webview.frame = CGRectMake(0, 0, parentFrame.size.width, parentFrame.size.height);

```
 [self.webView setAutoresizingMask:(UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight)]; 
```

然后，您的 webview 应该始终完全填充它的父视图

注意 [self.webview 重新加载]；不重绘 webview 但重新加载 html 页面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T13:58:52.617

我怀疑您的键盘显示在 webView 的父视图上。如果父视图不改变大小，则 webView 将无事可做。

另外，我怀疑你真正想要的是：

```
self.webView.autoresizingMask = UIViewAutoresizingFlexibleHeight; 
```

# java - HashSet 中的额外逗号

> ID：16193426
> 
> 赞同：1
> 
> 时间：2013-04-24T13:34:23.117
> 
> 标签：java

我正在尝试按大写字母拆分字符串，例如当字符串为“SizeColorSize”时，aoutput 数组为：{“Size”、“Color”、“Size”}。这工作正常。现在我想从数组中删除重复项，这就是我使用 HashSet 的原因，这样我就有了 ["Color", "Size"] 排序的集合。然后我在 MySQL 表中打印输出。

但问题是在输出中我多了一个逗号：[, "Color", "Size"]。知道为什么会这样吗？

这是代码的一部分：

```
for (int j = 0; j < configPair.size(); j++) {
    r = configPair.get(j).split("(?=\\p{Lu})");
    for (int i = 0; i < r.length; i++) {
        r = new HashSet<String>(Arrays.asList(r)).toArray(new String[0]);
        r[i].trim();
        Arrays.sort(r);
        Set<String> mySet = new HashSet<String>(Arrays.asList(r));
        sqlAttributeConfig = "INSERT INTO Config_Attributes (Config_Pairs) VALUES ('"
                    + mySet + "')";
        System.out.print(r[i]);             
    }
    System.out.println();
    r = null;
    con.stmt.executeUpdate(sqlAttributeConfig);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T13:40:02.030

当 a 的开头`String`与 中的正则表达式模式匹配时`String.split()`，它会产生一个额外的空`String`。

所以`split`会返回 ["", "Size", "Color", "Size"] 而不是 ["Size", "Color", "Size]，因此行为。

Split 的官方 Javadoc 是这样说的：

> 此方法返回的数组包含输入序列的每个子字符串，这些子字符串由与此模式匹配的另一个子序列终止或在输入序列的末尾终止。

所以我猜前导空`String`符合“输入序列的子字符串，由与此模式匹配的另一个子序列终止”，如文档中所述。

# php - 文件上传错误

> ID：16193427
> 
> 赞同：0
> 
> 时间：2013-04-24T13:34:25.460
> 
> 标签：php, apache, file-upload

我正在尝试在动态创建的文件夹中上传文件。它在我的本地主机中正常工作，但在服务器上却显示错误。错误是： -

> 警告：move_uploaded_file() [function.move-uploaded-file]：open_basedir 限制生效。文件（/tmp/php323kcy）不在允许的路径中：/home/..../public_html/www..com./.../controller/add-product-process 中的 (/home/) .php 在第 83 行

我的 PHP 代码在这里

```
<?php

include 'connection.php';

if(isset($_POST['product_name']) && ($_POST['category'])&& ($_POST['sub-category']) && ($_POST['product_qty']) && ($_POST['price']) && ($_POST['description']) && ($_POST['weight']))

{

 $pname = $_POST['product_name'];

 $category = $_POST['category'];

 $scategory = $_POST['sub-category'];

 $qty = $_POST['product_qty'];

 $price = $_POST['price'];

 $desc = $_POST['description'];

 $dp=$_POST['dp'];

 $offer= $_POST['offer'];

 $size=$_POST['size'];

 $weight=$_POST['weight'];

if(isset($_POST['color']))

{

$color=$_POST['color'];

}

else

{

$color = "N/A";

}

$query3 = mysql_query("select category_id from category where category_name='$category'");

$row3 = mysql_fetch_array($query3);

$query4 = mysql_query("select sub_category_id from sub_category where sub_category_name='$scategory'");

$row4 = mysql_fetch_array($query4);

$query1 = mysql_query("select product_id from stock");

while ($row = mysql_fetch_row($query1)) {

    $id = $row[0];

}

$str1 = substr($id, 2, 5);

if (($str1 >= 1) && ($str1 < 9)) {

    $str1++;

  echo  $new_id = "RD0000" . $str1;

} else if (($str1 >= 9) && ($str1 < 99)) {

    $str1++;

   echo $new_id = "RD000" . $str1;

} else if (($str1 >= 99) && ($str1 < 999)) {

    $str1++;

    echo $new_id = "RD00" . $str1;

} else if (($str1 >= 999) && ($str1 < 9999)) {

    $str1++;

   echo $new_id = "RD0" . $str1;

} else if (($str1 >= 9999) && ($str1 < 99999)) {

    $str1++;

   echo $new_id = "RD" . $str1;

} else {

    echo 'Error: Contact PSSP.';

}

$dirPath = "../products/$new_id";

$imgpath = "products/$new_id";

$result = mkdir($dirPath, 0755);

if ($result == 1) {

    echo $dirPath . " has been created";

} else {

    echo $dirPath . " has NOT been created";

}

define ("FILEREPOSITORY","../products/$new_id");

for ($i = 0; $i < sizeof($_FILES['uploadfile']['name']); $i++) {        

echo $path=$new_id.$i;

$filename = $dirPath.$path.'.jpeg';

           if (is_uploaded_file($_FILES['uploadfile']['tmp_name'][$i])) 

            {

            $filename2 = $imgpath."/".$path.'.jpeg';

            $fl[$i]=$filename2;

                        if ($_FILES['uploadfile']['type'][$i] != "image/jpeg") 

              {

                 echo "<p>Must be Image file.</p>";

              } 

             else if(file_exists($filename))

                {

              echo "already exist";

               }

              else 

                {

         //$name = $_POST['corname'];

         $result = move_uploaded_file($_FILES['uploadfile']['tmp_name'][$i], FILEREPOSITORY."/$path.jpeg");
            echo "result is".$result;
         if ($result == 1) 

            {

            echo "<p>File successfully uploaded.</p>";

            }

            else 

            {

            echo "not uploaded";

            }

            }

            }

            }

                        $files=implode(',',$fl);

> 
$query2 = mysql_query("insert into stock(product_id,product_name,category,sub_category,quantity,price,dp,offer,description,image,size,weight,color)values('$new_id','$pname','$row3[0]','$row4[0]','$qty','$price','$dp','$offer','$desc','$files','$size','$weight','$color')");

if (!$query2) {

    echo mysql_error();

} else {

    ?>

    <script language="javascript" type="text/javascript">

        // Print a message

        alert('Successfully Added..');

        // Redirect to some page of the site.

        window.location = '../add-product.php';

    </script>

    <?php

}

}

else

{

    echo "Error in page...";

}

?> 
```

请注意我的问题..

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T15:12:20.933

您的主机帐户配置为 PHP 上传不起作用：

*   Apache 将临时文件存储在`/tmp`.
*   PHP 不允许读取外部文件`/home/`（有趣的是，它显然允许读取*其他*用户的文件）。

第一条路径由[`upload_tmp_dir`指令](http://www.php.net/manual/en/ini.core.php#ini.upload-tmp-dir)控制。第二条路径由[`open_basedir`指令](http://www.php.net/manual/en/ini.core.php#ini.open-basedir)控制。据我所知，它们都是不允许更改的全局设置。

您需要联系支持并寻求帮助以解决此问题。

# linq-to-entities - LINQ 查询 EF 错误

> ID：16193429
> 
> 赞同：0
> 
> 时间：2013-04-24T13:34:28.653
> 
> 标签：linq-to-entities

我应用了我在这里找到的灵魂，将实体返回的列表的值组合成一个字符串，作为这篇文章指南： [Concat all strings inside a List<string> using LINQ](https://stackoverflow.com/questions/559415/concat-all-strings-inside-a-liststring-using-linq)

但它给出了错误：

```
LINQ to Entities does not recognize the method 'System.String Aggregate ....' and this method
cannot be translated into a store expression 
```

我该如何解决这个...最好的问候

# x86 - 使用 AVX2 收集指令时的加载地址计算

> ID：16193434
> 
> 赞同：14
> 
> 时间：2013-04-24T13:34:42.227
> 
> 标签：x86, sse, simd, avx2

查看 AVX2 内在文档，收集了加载指令，例如`VPGATHERDD`：

```
__m128i _mm_i32gather_epi32 (int const * base, __m128i index, const int scale); 
```

从文档中我不清楚的是计算的加载地址是 *元素*地址还是*字节*地址，即 element 的加载地址`i`：

```
load_addr = base + index[i] * scale;               // (1) element addressing ? 
```

或者：

```
load_addr = (char *)base + index[i] * scale;       // (2) byte addressing ? 
```

从[英特尔文档](http://software.intel.com/sites/products/documentation/studio/composer/en-us/2011Update/compiler_c/intref_cls/common/intref_avx2_mm256_i32gather_epi32.htm)看来，它可能是 (2)，但考虑到收集负载的最小元素大小是 32 位，这没有多大意义 - 为什么要从未对齐的地址加载（即使用 scale < 4 ) ?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-24T15:13:17.857

收集说明没有任何对齐要求。所以不允许字节寻址就太严格了。

另一个原因是一致性。使用 SIB 寻址，我们显然有*字节*地址：

```
MOV eax, [rcx + rdx * 2] 
```

由于`VPGATHERDD`只是该`MOV`指令的矢量化变体，因此我们不应期望 VSIB 寻址有任何不同：

```
VPGATHERDD ymm0, [rcx + ymm2 * 2], ymm3 
```

至于*字节*寻址的实际用途，我们可以有一个 24 位彩色图像，其中每个像素都是 3 字节对齐的。我们可以使用单个 VPGATHERDD 指令加载 8 个像素，但前提是 VSIB 中的“缩放”字段为“1”并`VPGATHERDD`使用*字节*寻址。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-24T14:44:30.740

从此处可用的英特尔[AVX 编程参考文档](http://software.intel.com/en-us/blogs/2011/06/13/haswell-new-instruction-descriptions-now-available)中的描述来看，收集指令似乎使用字节寻址。具体来说，请参阅指令描述中的以下引文`VPGATHERDD`（第 389 页）：

> ```
> DISP: optional 1, 2, 4 byte displacement;
> DATA_ADDR = BASE_ADDR + (SignExtend(VINDEX[i+31:i])*SCALE + DISP; 
> ```

由于您可以使用 1/2/4 字节位移，我会假设整个内存地址是一个字节地址。虽然它可能不是一个常见的应用程序，但在某些情况下，您可能希望从未对齐的地址中读取 32 位或 64 位值。与 ARM 相比，这是 x86 架构更灵活的事情之一。如果需要，您可以灵活地执行未对齐的访问，而不是像其他人那样触发 CPU 异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-26T02:33:10.313

> 为什么要从未对齐的地址加载（即使用比例 < 4）？

未对齐的负载不是 scale < element size 的唯一用例。您可能只有预缩放字节偏移的索引。或者考虑对指向结构的指针数组进行矢量化循环：您可以使用零的基本“地址”或结构中的小整数偏移量来收集。

支持这个用例是英特尔设计 asm 指令来支持这个用例的一个原因，因为收集应该帮助编译器自动矢量化更多代码。它也很自然地适合 VSIB 字节在机器代码编码中非常接近 SIB，但它们可以很容易地预先偏置比例因子，让您选择比例 = 4、8、16、32（或 8 ,16,32,64 用于 qword 集合）具有 2 位比例字段。

大于元素大小的比例因子在许多情况下也不是很明显有用，并且很容易在收集之前使用单个左移指令来模拟。但是**要解决一个内置的比例因子是不可能的**，因此允许未缩放的索引显然是更灵活的设计选择。

* * *

其他用例：收集 16 位元素。使用 32 位聚集并在聚集后屏蔽每个元素的上半部分。（或者只是让它拿着垃圾）。如果您的任何索引都是奇数（比例因子为 2），这将导致负载未对齐，因此如果它们跨越 4k 边界（与真正的 16 位收集不同），它可能会很慢。

您还可以想象使用聚集作为解压缩函数的一部分，在经过一些解码后，您有一个偏移向量到缓冲区，并且您需要任意 4 字节或 8 字节的数据窗口。

# mongodb - Mongoengine 如何判断 2 个 EmbeddedDocuments 是否相等？

> ID：16193435
> 
> 赞同：0
> 
> 时间：2013-04-24T13:34:42.643
> 
> 标签：mongodb, mongoengine

我有以下 Mongoengine 文档：

```
class MyEmbed(EmbeddedDocument):
    embedField = StringField(primary_key=True)
    varField = StringField()

class TestDoc(Document):
    myField = StringField()
    embed_list = ListField(EmbeddedDocumentField(MyEmbed)) 
```

所以我保留了一个嵌入文档的列表，如果它们不存在，我希望添加新文档。问题是，当我使用原子更新运算符**add_to_set**时，事情并没有按照我想要的方式进行。这就是我想要做的：

```
embed1 = models.MyEmbed(embedField="F1")
parent = models.TestDoc(myField="ParentField")
embed_list = []
embed_list.append(embed1)
parent.embed_list = embed_list
parent.save()

embed2 = models.MyEmbed(embedField="F1", varField="varField")
TestDoc.objects(id=parent.id).update_one(add_to_set__embed_list=embed2) 
```

问题是这样做之后，我在数据库中有一个包含 2 个元素的嵌入文档列表。我想要的是决定一个字段（在这种情况下为 embedField） 2 EmbeddedDocuments 是否相等，而不是考虑所有属性。我的问题是：

*   Mongoengine 决定 2 个 EmbeddedDocuments 是否相等的默认标准是什么？
*   如何重新定义使 Mongoengine 决定 2 个 EmbeddedDocuments 何时相等的函数？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T09:20:52.223

实际检查是在 MongoDB 内部完成的，而**不是**mongoengine。

发送到 mongodb 的对象应该是相同的，但这就是它变得棘手的地方，因为 BSON 顺序很重要，而在带有字典的 python 中则不是。当转换为发送到 mongodb 时，mongoengine 只需传递一个字典。这是一个错误 - 所以我添加了[#296](https://github.com/MongoEngine/mongoengine/issues/296)并将修复 0.8

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-25T07:35:33.020

请参阅[https://github.com/MongoEngine/mongoengine/blob/master/mongoengine/document.py#L51](https://github.com/MongoEngine/mongoengine/blob/master/mongoengine/document.py#L51)和[https://github.com/MongoEngine/mongoengine/blob/master/mongoengine/base/document.py#L52](https://github.com/MongoEngine/mongoengine/blob/master/mongoengine/base/document.py#L52)：

```
def __eq__(self, other):
    if isinstance(other, self.__class__):
        return self._data == other._data
    return False 
```

它比较嵌入式文档数据的字典。所以你可以重写这个方法。

如果您查看调用 QuerySet 更新（查找`add_to_set`和`addToSet`）的文档更新，您会发现 mongoengine 不会检查列表中存在的文档，只需调用[mongo $addToSet 操作](http://docs.mongodb.org/manual/reference/operator/addToSet/)：[https ://github.com/MongoEngine/mongoengine/blob/master /mongoengine/queryset/transform.py#L156](https://github.com/MongoEngine/mongoengine/blob/master/mongoengine/queryset/transform.py#L156)。

在您的代码中，您有文档`MyEmbed(embedField="F1")`并尝试添加另一个文档`MyEmbed(embedField="F1", varField="varField")`，所以逻辑正确：它添加新文档。如果您尝试下一个代码：

```
embed1 = models.MyEmbed(embedField="F1")
parent = models.TestDoc(myField="ParentField")
embed_list = []
embed_list.append(embed1)
parent.embed_list = embed_list
parent.save()

embed2 = models.MyEmbed(embedField="F1", varField="varField")
TestDoc.objects(id=parent.id).update_one(add_to_set__embed_list=embed2)

embed3 = models.MyEmbed(embedField="F1")
TestDoc.objects(id=parent.id).update_one(add_to_set__embed_list=embed3)

embed4 = models.MyEmbed(embedField="F1", varField="varField")
TestDoc.objects(id=parent.id).update_one(add_to_set__embed_list=embed4) 
```

你可以发现 parent 只包含`embed1`and `embed2`。

因此，要解决您的问题，您可以覆盖`__eq__`方法并检查列表中的文档，但您必须找到更新文档列表的另一种解决方案，因为它直接调用 mongo 方法。

# iphone - ios 中特定朋友信息流上的 Google+ 分享帖子

> ID：16193439
> 
> 赞同：0
> 
> 时间：2013-04-24T13:34:56.870
> 
> 标签：iphone, ios, ios6, google-plus

google+ 中是否有任何网址或技术可用于在某个特定朋友的信息流上分享帖子？

我找到了这个 url：[https](https://plus.google.com/share?url=) ://plus.google.com/share?url= {your url} 但这个 url 的问题是我们不能在 url 的参数中传递朋友的 id 或朋友的名字为了在浏览器中打开链接时，在该字段（我们提到要与谁分享帖子）上写下预先填写的朋友姓名。

当我使用上面找到的 url 时，我必须在打开链接后在浏览器上手动选择朋友的名字。我想预先填写我们要与之分享的朋友的名字。

任何人都可以帮助我。这是我的要求之一。我正在 xcode 中开发应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T15:36:16.837

Google+ 不允许以编程方式写入任何人的信息流。Google+ 中的用户始终可以控制分享内容和分享对象。您可以使用[适用于 iOS 的 Google+ SDK 来**提示**用户分享](https://developers.google.com/+/mobile/ios/share)，但他们拥有选择分享给谁的最终控制权。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T14:12:48.273

对于原生 iOS，无法预填充收件人。您可以在 Android 上通过 Javascript 在 Web 上共享渲染，但不能使用 iOS SDK。如果您感兴趣的话，绝对值得在问题跟踪器上请求该功能！[https://code.google.com/p/google-plus-platform/issues/list](https://code.google.com/p/google-plus-platform/issues/list)

# entity-framework - Entity Framework 不会为我的存储过程创建复杂类型？

> ID：16193446
> 
> 赞同：0
> 
> 时间：2013-04-24T13:35:25.107
> 
> 标签：entity-framework, tsql, entity-framework-5

我编写了以下生成报告的 sql。我运行一些 sql sueries 并将它们的结果存储在临时表中，并在存储过程结束时将所有表合并在一起。但是，当我将此存储过程添加到 EF 时，它不会为它创建一个复杂的类型，没有它就没有用。如何让 EF 识别返回的结果集并创建复杂类型。

```
ALTER PROC [dbo].[Report_AllMediaDetails] 
(
@profileID AS INT,
@organisationID as INT,
@startDate as date,
@endDate as date
)
AS 

    create table #Temp_ReportData
    (
        ItemOrgID  int,
        MediaName  char(100),
        CountryName  char(100),
        ItemOverRideDate DateTime,
        Rating int, 
        BatchNo int,
        NoInBatch int,
        BatchDate DateTime

    ) 

    insert into #Temp_ReportData
    select
    oi.ID,
    mc.Name as MediaName,
    lcc.Name as Country,
    i.OverrideDate as Date,
    oi.Rating,
    b.ID BatchNo,
    i.NumInBatch ItemNumberInBatch,
    bah.ChangedAtUtc as BatchDate

    from 
    ProfileResults PR 
    INNER JOIN Items i ON PR.ItemID = I.ID
    inner join Batches b on b.ID=i.BatchID
    inner join ItemOrganisations oi on i.ID=oi.ItemID 
    inner join Lookup_MediaChannels mc on i.MediaChannelID=mc.id
    left outer join Lookup_Cities lc on lc.ID=mc.CityID
    left outer join Lookup_Countries lcc on lcc.ID=mc.CountryID
    inner join BatchActionHistory bah on b.ID=bah.batchid

    where pr.ProfileID = @profileID
    and oi.OrganisationID = @organisationID
    and b.StatusID IN (6,7)
    and bah.BatchActionID = 6
    and i.StatusID = 2
    and i.IsRelevant = 1
    and i.OverrideDate between @startDate and @endDate

--Create a temp table to hold the B section ByLines

    create table #Temp_ReportByLines
    (
    ItemOrgID  int,
    ByLine char(100),
    BatchNo int,
    NumInBatch int,
    BatchDate Date,
    Rating int,
    ItemOverRideDate date
    )

    insert into #Temp_ReportByLines
    select
    oi.ID,
    bl1.FirstName +' '+ bl1.Surname as ByLine,
    b.ID,
    i.NumInBatch,
    bah.ChangedAtUtc,
    oi.rating,
    i.OverrideDate

    from ProfileResults PR 
    INNER JOIN Items i ON PR.ItemID = I.ID
    inner join Batches b on b.ID=i.BatchID
    inner join ItemOrganisations oi on i.ID=oi.ItemID
    left outer join ItemByLines ib on ib.ItemID=i.ID
    left outer join ByLines bl1 on bl1.ID=ib.ByLineID
    inner join BatchActionHistory bah on b.ID=bah.batchid

    where pr.ProfileID = @profileID
    and oi.OrganisationID = @organisationID
    and b.StatusID IN (6,7)
    and bah.BatchActionID = 6
    and i.StatusID = 2
    and i.IsRelevant = 1
    and bl1.IsByLine=1
    and i.OverrideDate between @startDate and @endDate

--Create a temp table to hold the I section issues

    create table #Temp_ReportIssues
    (
        ItemOrgID int,
        IssueNo int,
        Issue char(300),        
        BatchNo int,
        NumInBatch int,
        BatchDate Date,
        Rating int,
        ItemOverRideDate date
    )

    insert into #Temp_ReportIssues
    select 
    iss.ItemOrganisationID,
    pri.Code, pri.Name,
    td.BatchNo,
    td.NoInBatch,
    td.BatchDate,
    td.Rating,
    td.ItemOverRideDate

    from ItemOrganisationIssues iss
    inner join #Temp_ReportData td on td.itemorgid= iss.ItemOrganisationID
    inner join ProjectIssues pri on pri.ID=iss.IssueID

--Create a temp table to hold the M section messages

    create table #Temp_ReportMessages
    (
        ItemOrgID  int,
        MessageType  char(100),
        MessageNo  int,
        BatchNo int,
        NumInBatch int,
        BatchDate Date,
        Rating int,
        itemOverRideDate date
    ) 

    insert into #Temp_ReportMessages 
    select 
    itemorgid, lmt.Name as MessageType ,pm.NeptuneMessageID as MessageNo,
    td.BatchNo,
    td.NoInBatch,
    td.BatchDate,
    td.Rating,
    td.ItemOverRideDate

    from #Temp_ReportData td
    left outer join ItemOrganisationMessages iom on iom.ItemOrganisationID=td.ItemOrgID
    left outer join ProjectMessages pm on iom.MessageID=pm.id
    left outer join Lookup_MessageTypes lmt on lmt.ID=pm.MessageTypeID

--Create a temp table to hold the S section Source

    create table #Temp_ReportSources
    (
        ItemOrgID  int,
        SourceFullName  char(100),
        SourceType  char(20),
        BatchNo int,
        NumInBatch int,
        BatchDate Date,
        Rating int,
        ItemOverRideDate date

    ) 

    insert into #Temp_ReportSources
    select 
    ios.ItemOrganisationID,
    bl2.FirstName+' '+bl2.Surname as SourceFullName,
    lst.name as SourceTypeDesc,
    td.BatchNo,
    td.NoInBatch,
    td.BatchDate,
    td.Rating,
    td.ItemOverRideDate

    from ItemOrganisationSources ios 
    inner join #Temp_ReportData td on td.ItemOrgID = ios.ItemOrganisationID
    inner join ByLines bl2 on bl2.ID=ios.ByLineID and bl2.IsByLine=0
    left outer join Lookup_SourceTypes lst on lst.ID=ios.SourceTypeID

-- Union all the temp tables into a formatted resultset

    select

    td.MediaName,td.CountryName,td.ItemOverRideDate, td.Rating,td.BatchNo,td.NoInBatch, td.BatchDate,  '' as DataType,'' as ByLine,'' as IssueNo,'' as Issue, '' MessageNo, '' as Message,'' as SourceName,'' as SourceType from #Temp_ReportData td

    union select '','',tb.ItemOverRideDate,tb.rating,tb.batchno,tb.NumInBatch,tb.batchdate,'B', tb.ByLine,'','','','','','' from #Temp_ReportByLines tb
    union select '','',tr.ItemOverRideDate,tr.rating,tr.batchno,tr.NumInBatch,tr.batchdate,'I','',tr.issueno,tr.issue,'','','', '' from #Temp_ReportIssues tr
    union select '','',tm.ItemOverRideDate,tm.rating,tm.batchno,tm.NumInBatch,tm.batchdate,'M','','','',tm.messageno,tm.messagetype,'','' from #Temp_ReportMessages tm
    union select '','',ts.ItemOverRideDate,ts.rating,ts.batchno,ts.NumInBatch,ts.batchdate,'S','','','','','',ts.sourcefullname,ts.sourcetype from #Temp_ReportSources ts

    order by td.NoInBatch,td.BatchNo, datatype 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:51:55.597

EF 不会为您创建复杂类型，但 EF 可以实例化声明复杂类型的对象集合。

例如

```
public class AType {
     public String Prop1 {get; set;}
}

context.Database.SqlQuery<AType>("select c1 as Prop1 from ATable"); 
```

将返回`AType`. 如果您将查询替换为对存储过程的调用，则相同。

在你的情况下，你必须声明一个类型来映射你的存储过程的返回。

否则，您可能会环顾四周，[但](http://msdn.microsoft.com/en-us/library/vstudio/dd264736.aspx)：

*   不知道EF能不能用
*   您将失去使用编译语言的优势。

----- 版本

经过一些动态测试后，返回了正确的数字或​​对象，但我对它们无能为力。

# fonts - 为什么我的 WOFF 字体比 TTF 字体大？

> ID：16193451
> 
> 赞同：2
> 
> 时间：2013-04-24T13:35:34.553
> 
> 标签：fonts, icons, webfonts, woff

据我了解（[来源](https://en.wikipedia.org/wiki/Web_Open_Font_Format)），WOFF 格式基本上是一种压缩的 OTF/TTF 字体。

如果确实如此，那么为什么我的 WOFF 字体比我的 TTF 字体大，如下面的屏幕截图所示。

![字体大小](https://i.stack.imgur.com/BeX60.png)

这些字体是使用流行的[Icomoon.io](http://icomoon.io)服务生成的。

有没有其他人注意到他们的字体有类似的结果？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T16:55:14.107

假设 woff 文件是根据[规范](http://www.w3.org/TR/WOFF/)正确构建的（[不允许压缩字体表大于](http://www.w3.org/TR/WOFF/#conform-compressedlarger)原始表），大小增加可归因于包含[扩展元数据](http://www.w3.org/TR/WOFF/#Metadata)和/或[私有数据](http://www.w3.org/TR/WOFF/#Private)。

# jsp - 注销后如何保护我的帐户？

> ID：16193455
> 
> 赞同：3
> 
> 时间：2013-04-24T13:35:41.570
> 
> 标签：jsp, jakarta-ee, servlet-filters, logout, back-button-control

我有一种情况 - 在我从页面注销后，如果有人在浏览器中单击“返回”按钮，它会自动再次进入返回页面。在 Logout.java (Servlet) 我使用：

```
session.invalidate();
request.getRequestDispatcher("index.jsp").forward(request,response); 
```

一切正常。但是注销后，如果我在浏览器中单击返回按钮（左上角），它会回到我所在的位置。如果我单击返回，我想这样做，那么必须说您的会话已过期或登录或其他。怎么做。请提出您宝贵的建议。
我刚读到这个&我创建了一个servlet FilterURL.java：

```
public class FilterURL extends HttpServlet implements Filter {
    @Override
    public void init(FilterConfig config) throws ServletException {
    //
    }

    @Override
    public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {
      HttpServletResponse hsr = (HttpServletResponse) res;
      hsr.setHeader("Cache-Control", "no-cache, no-store, must-revalidate"); // HTTP 1.1.
      hsr.setHeader("Pragma", "no-cache"); // HTTP 1.0.
      hsr.setDateHeader("Expires", 0); // Proxies.
      chain.doFilter(req, res);
    }

    @Override
    public void destroy() {
    //
    }

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    //
    }
} 
```

还有我的 web.xml:(在 web-app 下)

```
<filter>
    <filter-name>FilterURL</filter-name>
    <filter-class>com.filter.url.sys.FilterURL</filter-class>
</filter>
<filter-mapping>
    <filter-name>FilterURL</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

但它不会工作。我错了什么？？
我从这个页面读到它：

1.  [如何在 Java 中使用 servlet 过滤器来更改传入的 servlet 请求 url？](https://stackoverflow.com/questions/2725102/how-to-use-a-servlet-filter-in-java-to-change-an-incoming-servlet-request-url)
2.  [防止用户在注销后看到以前访问过的安全页面](https://stackoverflow.com/questions/4194207/prevent-user-from-going-back-to-the-previous-secured-page-after-logout?rq=1)
3.  [http://tutorials.jenkov.com/java-servlets/servlet-filters.html](http://tutorials.jenkov.com/java-servlets/servlet-filters.html)
4.  [servlet会话，注销后，当按下浏览器的后退按钮时，再次显示安全页面](https://stackoverflow.com/questions/14219749/servlet-session-after-logout-when-back-button-of-browser-is-pressed-again)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T13:44:09.303

在`filter`

```
HttpSession session = request.getSession(false);
                                 // don't create if it doesn't exist
if(session != null && !session.isNew()) {
    chain.doFilter(request, response);
} else {
    response.sendRedirect("/index.jsp");
} 
```

请参阅[在 servlet 和 jsp 中检查会话](https://stackoverflow.com/questions/2974274/checking-session-in-servlet-and-jsp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T13:40:07.583

使用 servlet 过滤器链接以获得更好的安全性。

**来源甲骨文**

**堆栈溢出时存在解释**

[如何在 Java 中使用 servlet 过滤器来更改传入的 servlet 请求 url？](https://stackoverflow.com/questions/2725102/how-to-use-a-servlet-filter-in-java-to-change-an-incoming-servlet-request-url)

**有关教程，请参阅此链接。**

[http://viralpatel.net/blogs/tutorial-java-servlet-filter-example-using-eclipse-apache-tomcat/](http://viralpatel.net/blogs/tutorial-java-servlet-filter-example-using-eclipse-apache-tomcat/)

*一个很好的*——http: [//tutorials.jenkov.com/java-servlets/servlet-filters.html](http://tutorials.jenkov.com/java-servlets/servlet-filters.html)

过滤器可以执行许多不同类型的功能。我们将讨论本文中斜体项目的示例：

*   基于用户身份的身份验证阻止请求。

*   记录和审计——跟踪 Web 应用程序的用户。

*   图像转换-缩放贴图等。

*   数据压缩——使下载更小。

*   本地化——将请求和响应定位到特定的语言环境。

*   XML 内容的 XSL/T 转换——以 Web 应用程序响应为目标的不止一种类型的客户端。

阅读官方文档[http://www.oracle.com/technetwork/java/filters-137243.html](http://www.oracle.com/technetwork/java/filters-137243.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T13:53:07.360

它是否再次从服务器加载页面？然后您需要检查您的用户识别和会话代码。其他答案中已经给出了一些提示。

如果该页面在浏览器的缓存中，那么您很不走运，浏览器可以再次显示它。毕竟是本地文件。

但是有一些可能的解决方法（如果您的用户和会话识别有效）。

*   设置过期的 HTTP 标头，缓存控制，以便*建议*浏览器每次都重新加载页面。取决于浏览器的行为方式。
*   全部使用 JavaScript，即构建单页 Web 应用程序，从而完全删除后退按钮功能。有时是一种有效的方法，但不是每次都有效。当使用应该可以通过唯一 URL 访问的资源时，它不是。
*   在注销和新页面之间进行重定向（如redirect-after-post），因此单击后退按钮将引导用户到重定向页面，并在注销后立即再次回到您将用户发送到的页面。
*   在每个页面上使用一些 Ajax 来检查用户是否仍然登录；如果没有，请重定向到登录页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T15:01:35.923

它是这样完成的：

```
<script>
   history.forward();
</script> 
```

在每个页面的部分添加`<head>`它可以防止这个问题。

# ruby-on-rails - 如何创建用户的文章

> ID：16193457
> 
> 赞同：1
> 
> 时间：2013-04-24T13:35:42.263
> 
> 标签：ruby-on-rails, bdd, factory-bot, rspec-rails

我正在使用 RSpec、FactoryGirls 测试控制器。
这是我的工厂.rb

```
FactoryGirl.define do
  factory :user do |user|
    user.sequence(:name) { Faker::Internet.user_name }
    user.email Faker::Internet.email
    user.password "password"
    user.password_confirmation "password"
  end

  factory :article do
    user
    title Faker::Lorem.sentence(5)
    content Faker::Lorem.paragraph(20)
  end
end 
```

我如何在这里创建用户的文章
这是articles_controller_spec

```
 describe ArticlesController do
      let(:user) do
        user = FactoryGirl.create(:user)
        user.confirm!
        user
      end

      describe "GET #index" do
        it "populates an array of articles of the user" do
          #how can i create an article of the user here
          sign_in user
          get :index
          assigns(:articles).should eq([article])
        end

        it "renders the :index view" do
          get :index
          response.should render_template :index
        end
      end
    end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:45:24.847

您可以指定一个用户工厂已经有文章

```
FactoryGirl.define do
  factory :user do |user|
    user.sequence(:name) { Faker::Internet.user_name }
    user.email Faker::Internet.email
    user.password "password"
    user.password_confirmation "password"
  end

  factory :article do
    user
    title Faker::Lorem.sentence(5)
    content Faker::Lorem.paragraph(20)
  end

  trait :with_articles do
    after :create do |user|
      FactoryGirl.create_list :article, 2, :user => user
    end
  end
end 
```

然后在你的控制器测试中

```
FactoryGirl.create :user, :with_articles # => returns user with 2 articles 
```

**更新**

我认为您想查看每个用户的所有文章.. 如果是这样的话，请使用

`get :index, {:id => user.id}`

这样您就可以查找用户并在控制器中获取所有文章

```
@user = User.find(params[:id]);
@articles = @user.articles 
```

如果不是这样，那就做

```
@articles =  Article.all 
```

使用后`trait :with_articles`应该显示至少 2`Articles`

你可以用一个简单的断言来测试这个，比如expect(@article.size).to eq(2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T14:14:25.423

```
 describe ArticlesController do
    let(:user) do
      user = FactoryGirl.create(:user)
      user.confirm!
      user
  end

   describe "GET #index" do
    it "populates an array of articles of the user" do
      #how can i create an article of the user here
      sign_in user
      get :index
      assigns(:articles).should eq([article])
    end

    it "renders the :index view" do
      get :index
      response.should render_template :index
    end

     it "assign all atricles to @atricles" do
       get :index
       assigns(:atricles).your_awesome_test_check #  assigns(:articles) would give you access to instance variable
     end
  end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T15:53:29.593

旧版本，而不是特征，是这样的：

```
describe ArticlesController do

  ..

  describe "GET #index" do
    it "populates an array of articles of the user" do

      article = FactoryGirl.create(:article, :user => user)

      sign_in user
      get :index
      assigns(:articles).should eq([article])
    end

  ..

end 
```

# excel - 有没有办法计算 VBA 枚举中的元素？

> ID：16193458
> 
> 赞同：6
> 
> 时间：2013-04-24T13:35:43.990
> 
> 标签：excel, vba, enums

有没有一种正确的方法来计算 VBA 中枚举的元素？目前，我留下一个枚举值，`KeepThisOneHere`如下例所示

```
Enum TestEnum
   ValueA
   ValueB
   ValueC
   KeepThisOneHere
End Enum 
```

我使用最后一个值来知道大小......我不喜欢这个解决方案，因为我不确定我是否能保证这些值总是以相同的方式被索引，并且代码可能会被第三方更改可能会在最后一个特殊值之后添加值，默默地破坏其余代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T14:16:04.567

不确定这里的礼仪，所以我会发布它，如果有建议，我会回来删除它。[Chip Pearson 在 Code Cage 论坛 ( http://www.thecodecage.com/forumz/microsoft-excel-forum/170961-loop-enumeration-constants.html](http://www.thecodecage.com/forumz/microsoft-excel-forum/170961-loop-enumeration-constants.html) )上发布了此代码。我的机器上没有 TypeLinInfo DLL，所以我无法测试它（我确信谷歌会找到下载 TLBINF32.dll 的地方）。尽管如此，这是他的整个帖子，以防止其他人注册论坛：

只有在您的计算机上安装了 TypeLibInfo DLL 时，您才能执行此操作。在 VBA 中，转到 Tools 菜单，选择 References，然后向下滚动到“TypeLib Info”。如果该项目存在，请检查它。如果它不存在，那就放弃阅读，因为你不能做你想做的事。您需要的 DLL 文件名为 TLBINF32.dll。

以下代码显示了如何获取 XLYesNoGuess 枚举中的名称和值：

```
Sub AAA()
    Dim TLIApp As TLI.TLIApplication
    Dim TLILibInfo As TLI.TypeLibInfo
    Dim MemInfo As TLI.MemberInfo
    Dim N As Long
    Dim S As String
    Dim ConstName As String

    Set TLIApp = New TLI.TLIApplication
    Set TLILibInfo = New TLI.TypeLibInfo
    Set TLILibInfo = TLIApp.TypeLibInfoFromFile( _
        ThisWorkbook.VBProject.References("EXCEL").FullPath)

    ConstName = "XLYesNoGuess"
    For Each MemInfo In _
        TLILibInfo.Constants.NamedItem(ConstName).Members
        S = MemInfo.Name
        N = MemInfo.Value
        Debug.Print S, CStr(N)
    Next MemInfo
End Sub 
```

使用这些知识，您可以创建两个有用的功能。EnumNames 返回一个字符串数组，其中包含枚举中值的名称：

```
Function EnumNames(EnumGroupName As String) As String()
    Dim TLIApp As TLI.TLIApplication
    Dim TLILibInfo As TLI.TypeLibInfo
    Dim MemInfo As TLI.MemberInfo
    Dim Arr() As String
    Dim Ndx As Long
    Set TLIApp = New TLI.TLIApplication
    Set TLILibInfo = New TLI.TypeLibInfo
    Set TLILibInfo = TLIApp.TypeLibInfoFromFile( _
        ThisWorkbook.VBProject.References("EXCEL").FullPath)
    On Error Resume Next
    With TLILibInfo.Constants.NamedItem(EnumGroupName)
        ReDim Arr(1 To .Members.Count)
        For Each MemInfo In .Members
            Ndx = Ndx + 1
            Arr(Ndx) = MemInfo.Name
        Next MemInfo
    End With

    EnumNames = Arr
End Function 
```

您可以使用以下代码调用此函数：

```
Sub ZZZ()
    Dim Arr() As String
    Dim N As Long
    Arr = EnumNames("XLYesNoGuess")
    For N = LBound(Arr) To UBound(Arr)
        Debug.Print Arr(N)
    Next N
End Sub 
```

您还可以创建一个函数来测试是否为枚举定义了值：

```
Function IsValidValue(EnumGroupName As String, Value As Long) As
    Boolean
    Dim TLIApp As TLI.TLIApplication
    Dim TLILibInfo As TLI.TypeLibInfo
    Dim MemInfo As TLI.MemberInfo
    Dim Ndx As Long
    Set TLIApp = New TLI.TLIApplication
    Set TLILibInfo = New TLI.TypeLibInfo
    Set TLILibInfo = TLIApp.TypeLibInfoFromFile( _
        ThisWorkbook.VBProject.References("EXCEL").FullPath)
    On Error Resume Next
    With TLILibInfo.Constants.NamedItem(EnumGroupName)
        For Ndx = 1 To .Members.Count
            If .Members(Ndx).Value = Value Then
                IsValidValue = True
                Exit Function
            End If
        Next Ndx
    End With
    IsValidValue = False
End Function 
```

如果为 EnumGroupName 定义了值，则此函数返回 True，如果未定义，则返回 False。您可以使用如下代码调用此函数：

```
Sub ABC()
    Dim B As Boolean
    B = IsValidValue("XLYesNoGuess", xlYes)
    Debug.Print B ' True for xlYes
    B = IsValidValue("XLYesNoGuess", 12345)
    Debug.Print B ' False for 12345
End Sub 
```

诚挚的，Chip Pearson Microsoft MVP 1998 - 2010 Pearson Software Consulting, LLC www.cpearson.com [网站上的电子邮件]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-08T19:35:16.593

这是我的解决方法的一个示例，非常简单：

```
Enum FileSpecFields
    FileSpecFields_Start                    '(zero-based)
        FileNameIdx = FileSpecFields_Start
        FolderNameIdx
        BasePathIdx
        FullPathIdx
        CopyStatus
    FileSpecFields_End = CopyStatus
End Enum

'...

ReDim FileSpecList(1 To MaxFiles, FileSpecFields_Start To FileSpecFields_End) As String

'... 
```

但请注意，如果您使用基于 1 的 Enum，您可能需要调整 _End 值定义，具体取决于您使用它的方式。此外，对于从零开始的枚举，_End 值与其项目数不同。而且，如果您在最后添加项目，则必须相应地更新 _End 值的定义。最后，如果你的枚举是一个不连续的值范围，那么所有的赌注都是用这种方法！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T13:58:38.107

没有办法得到计数。

您需要做的是循环遍历 Enum 的元素，直到到达最后一个。

Chip Pearson 对枚举常量有一些很好的提示：[Chip Pearson: Enum Variable Type](http://www.cpearson.com/excel/Enums.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-18T09:56:45.033

**如果您在设计时知道枚举类型，则**可以将它们转换为**`Static Property Get MyEnumColl() as Collection ...`**（不需要类，在第一次访问时静态初始化），从而轻松循环它们或计算它们，如下[所示](https://stackoverflow.com/a/56646199/1915920)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-02-05T19:27:56.607

```
Sub count()
    Dim n, c

    For n = headers.frstItem To headers.lastItem
        c = c + 1
    Next
    Debug.Print c
End Sub 
```

# ios - 室内导航（也许是 MapBox？）

> ID：16193459
> 
> 赞同：7
> 
> 时间：2013-04-24T13:35:46.287
> 
> 标签：ios, navigation, maps, mapbox

再会，

我想知道，是否可以使用 iOS 版 Mapbox 创建“室内”地图（或者是否有人有其他建议）？我有一份室内平面图的 PDF。我想我需要将其转换为 MBTiles ( [http://mapbox.com/developers/mbtiles/](http://mapbox.com/developers/mbtiles/) ) 格式。我怎么能做到这一点？

Allso，在为人员绘制到建筑物中某些设施的“步行路线”时。“它”应该知道这个人可以走到哪里。

目前我正在尝试用 CATiledLayers 创建一些东西（但我有点卡住了（我可以使用“平铺”格式显示地图。）并且正在寻找 MapBox 可能很有用，因为它在地图上具有“绘制”矢量之类的东西，或带有信息等的图标。对于步行方向，我正在考虑“点缀”步行路线，以便“Dijkstra 算法”可以确定路径。即使可能，我如何在 Mabbox 中解决这个问题？

任何正确方向的帮助将不胜感激。

亲切的问候，

马蒂因·迪克斯特拉

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T15:25:34.843

您可以使用 MapBox 执行此操作。为了将图像或 PDF 转换为 MBTiles 格式，您需要使用[TileMill](http://tilemill.com)。您基本上需要将图像转换为地理格式。最简单的方法是将 PDF 导出为 TIFF，然后将其设为 GeoTIFF 并按照[这些说明](http://mapbox.com/tilemill/docs/guides/reprojecting-geotiff/)进行操作。这将使您可以地理启用图像，将其导入 TileMill，然后将其导出为 MBTiles。然后，您可以使用[MapBox iOS SDK](http://mapbox.com/mobile)将其带到 iOS。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-27T23:25:51.550

您可以使用诸如[interior.io](https://indoor.io)之类的服务来生成地图。那里有很多室内服务，市场上还有更多。

# sql-server-2008-r2 - 按年份划分

> ID：16193465
> 
> 赞同：2
> 
> 时间：2013-04-24T13:36:16.647
> 
> 标签：sql-server-2008-r2

我有一张这样的**年表**。每年都有`12`值**（固定）**

```
declare @t table (FiscalYear int,[Month] varchar(25))
insert into @t values
(2011,'Jan'),(2011,'Feb'),(2011,'Mar'),(2011,'Apr'),
(2011,'May'),(2011,'Jun'),(2011,'Jul'),(2011,'Aug'),
(2011,'Sep'),(2011,'Oct'),(2011,'Nov'),(2011,'Dec'),
(2012,'Jan'),(2012,'Feb'),(2012,'Mar'),(2012,'Apr'),
(2012,'May'),(2012,'Jun'),(2012,'Jul'),(2012,'Aug'),
(2012,'Sep'),(2012,'Oct'),(2012,'Nov'),(2012,'Dec'),
(2013,'Jan'),(2013,'Feb'),(2013,'Mar'),(2013,'Apr'),
(2013,'May'),(2013,'Jun'),(2013,'Jul'),(2013,'Aug'),
(2013,'Sep'),(2013,'Oct'),(2013,'Nov'),(2013,'Dec') 
```

我想输出为

```
FYear   Month   Qt  Qtp
2011    Jan     1   1
2011    Feb     1   2
2011    Mar     1   3
2011    Apr     2   1
2011    May     2   2
2011    Jun     2   3
2011    Jul     3   1
2011    Aug     3   2
2011    Sep     3   3
2011    Oct     4   1
2011    Nov     4   2
2011    Dec     4   3
2012    Jan     1   1
2012    Feb     1   2
2012    Mar     1   3
2012    Apr     2   1
2012    May     2   2
2012    Jun     2   3
2012    Jul     3   1
2012    Aug     3   2
2012    Sep     3   3
2012    Oct     4   1
2012    Nov     4   2
2012    Dec     4   3
2013    Jan     1   1
2013    Feb     1   2
2013    Mar     1   3
2013    Apr     2   1
2013    May     2   2
2013    Jun     2   3
2013    Jul     3   1
2013    Aug     3   2
2013    Sep     3   3
2013    Oct     4   1
2013    Nov     4   2
2013    Dec     4   3 
```

我怎么能做到这一点`SQLServer2008R2`。我尝试过使用**DenseRank、RowNuber、Partitioned，**但都是徒劳的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T13:43:47.280

Tru 使用**[Ntile](http://msdn.microsoft.com/en-IN/library/ms175126.aspx)**：

```
--select * from @t      
SELECT * ,
ROW_NUMBER() OVER ( PARTITION BY FYear, Qt ORDER BY FYear ) Qtp   
from
(SELECT FYear,[Month],
NTILE(4) OVER ( PARTITION BY FYear ORDER BY FYear ) AS Qt
FROM @t) PERIOD
ORDER BY FYear ,Qt ,ROW_NUMBER() OVER ( PARTITION BY FYear, Qt ORDER BY FYear) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T13:43:19.877

我建议使用从 2013 年 12 月到您喜欢的年份的日期值动态填充表格（您可以更改 @COUNT_Y 变量以添加更多年份）。

SQL 有一些有趣的日期时间函数，比如 DATEPART，它可以告诉你一个月的哪个季度等。

** 答案因问题改变而改变 **

```
 DECLARE @DATES TABLE
    (
        xDATE DATETIME
    )

    DECLARE @STARTDATE DATETIME = '12-31-2013'

    DECLARE @COUNT_X INT = 0
    DECLARE @COUNT_X_MAX INT = 11

    DECLARE @COUNT_Y INT = 0
    DECLARE @COUNT_Y_MAX INT = 2

    WHILE (@COUNT_Y <= @COUNT_Y_MAX)
    BEGIN

        SET @COUNT_X = 0

        WHILE (@COUNT_X <= @COUNT_X_MAX)
        BEGIN

            INSERT INTO @DATES
            SELECT DATEADD(MONTH, -@COUNT_X, DATEADD(YEAR,-@COUNT_Y, @STARTDATE))

            SET @COUNT_X = @COUNT_X + 1
        END

        SET @COUNT_Y = @COUNT_Y + 1
    END

    SELECT * FROM
    (SELECT
    DATEPART(YEAR, D.xDATE) AS [YEAR],
    DATEPART(MONTH, D.xDATE) AS [MONTH],
    DATENAME(MONTH, D.xDATE) AS [MONTH_NAME],
    DATEPART(QUARTER, D.xDATE) AS [QUARTER],
    DATEPART(MONTH, D.xDATE) - (3 * (DATEPART(QUARTER, D.xDATE) - 1)) AS [QTP]
    FROM @DATES D) t
    ORDER BY T.YEAR, T.MONTH 
```

# google-maps - 您将在数据库、坐标或地址中存储什么？

> ID：16193469
> 
> 赞同：2
> 
> 时间：2013-04-24T13:36:50.423
> 
> 标签：google-maps, geolocation, coordinates, geocoding, street-address

我正在构建一个使用 GMaps API v3 的应用程序，并且利用地理编码功能，我不知道存储在数据库中是否更好：

1.  坐标（纬度和经度）
    *   当我需要放置标记时，只需放置即可
    *   当我需要地址时，查询API
2.  地址（作为字符串）
    *   当我需要放置标记时，请查询 API
    *   当我需要发布地址时，只需打印即可
3.  存储两者

你会推荐什么？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T13:42:35.953

我建议：

**1）同时存储**

2）蔓越莓和薄荷马提尼。（优秀的伏特加饮料，编程成功后服用）。

# bash - bash: "${A:-B}" 运算符

> ID：16193470
> 
> 赞同：1
> 
> 时间：2013-04-24T13:36:53.237
> 
> 标签：bash, operators

我一直在重构一些 bash 代码，并偶然发现了这个 bash 符号：

```
"${string_a:-string_b}" 
```

我在命令行上玩了一点：

```
$ echo "${string_a:-string_b}"
string_b
$ export string_a=string_a_value
$ echo "${string_a:-string_b}"
string_a_value 
```

我似乎该`{a:-b}`符号返回*变量* `a`的值（如果已定义），否则返回*字符串* `b`。

我在哪里可以找到这个运算符的更正式的定义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T13:42:37.173

您可以使用[man bash](https://www.gnu.org/software/bash/manual/bashref.html)访问 bash 文档。搜索类型`/`

> ${参数：-字}
> 
> > 使用默认值。如果*参数*未设置或为空，则替换*单词的扩展。*否则，*参数*的值被替换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T13:42:27.623

同侪压力，我发表我的评论作为答案:)

我喜欢这张参考卡片：[Advanced Bash-Scripting Guide](http://tldp.org/LDP/abs/html/refcards.html)，特别是在您的情况下，它会很有用*"# Table B-4\. Parameter Substitution and Expansion"*。

我不会复制他们表示不侵犯任何版权的任何问题。只需在那里找到所有信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T13:54:44.517

另一个有用的链接是 Bash 参考手册中的[Shell Parameter Expansion 部分](http://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion)。`:-`运算符定义为：

> ${parameter:-word} 如果 parameter 未设置或为 null，则替换 word 的扩展。否则，参数的值被替换。

顺便说一句，bash 具有三个相似的运算符`${parameter:=word}`,`${parameter:?word}`和`${parameter:+word}`, 在该部分中定义。

# c# - Processing data in DataTable - how to find minimum and maximum for each column?

> ID：16193482
> 
> 赞同：2
> 
> 时间：2013-04-24T13:37:16.620
> 
> 标签：c#, datatable

I have DataTable object that is filled with numeric data from my database. I have to handle all possible numeric-like data types (int32, int64, float, even datetime, but that last is not necessary).

I have to normalize all data in columns, each column separately, so I need to find maximum and minimum values for each column to calculate normalization coefficient.

Do I have to iterate "manually" through all rows to find these max and min values?

Some background:

I don't want to do this in SQL, because its kind of scientific application, where user works in SQL language and writes very complicated SQL queries. I don't want to force user to write even more complicated queries to get normalized data or get min/max values

Colums are fully dynamic, they depend on SQL query written by user.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T13:44:09.537

> 我是否必须“手动”遍历所有行才能找到这些最大值和最小值？

*手动*定义。是的，您必须通过枚举 all来计算`Min`和值。但这可以用旧方法或用`Max``DataRows``DataTable.Compute`

[**林克**](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.min.aspx)：

```
int minVal = table.AsEnumerable().Min(r => r.Field<int>("ColName"));
int maxVal = table.AsEnumerable().Max(r => r.Field<int>("ColName")); 
```

[`DataTable.Compute`](http://msdn.microsoft.com/en-us/library/system.data.datatable.compute.aspx)：

```
int maxVal = (int)table.Compute("Max(ColName)", ""); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T13:45:02.643

你也可以使用

```
Convert.ToInt32(datatable.Compute("min(columnname)", string.Empty));
Convert.ToInt32(datatable.Compute("max(columnname)", string.Empty)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T13:47:30.097

您可以使用`DataTable.Select()`as 来做到这一点：

```
DataRow [] dr = dataTable.Select("ID= MAX(ID)");  

 if(dr !=null)
    {
     // Console.WriteLine(dr[0]["ID"]);
        int maxVal=Convert.ToInt32(dr[0]["ID"]);
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T13:43:23.857

尝试这个：

```
var min = myTable.AsEnumerable().Min(x => (int)x["column"]);
var max = myTable.AsEnumerable().Max(x => (int)x["column"]); 
```

您需要确保您有对 的引用`System.Data.DataSetExtensions`，默认情况下它不会添加到新项目中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-27T06:32:14.363

这对我来说很好

```
int  max = Convert.ToInt32(datatable_name.AsEnumerable()
                        .Max(row => row["column_Name"])); 
```

# c - `qsort()` 真的是快速排序吗？

> ID：16193483
> 
> 赞同：3
> 
> 时间：2013-04-24T13:37:18.017
> 
> 标签：c, sorting

可能是个愚蠢的问题，但是是否可以保证`qsort()`C 标准库中的例程确实实现了快速排序算法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T13:39:06.900

由于标准中没有任何内容专门指定 QuickSort，因此没有。

# wcf - 无域设置中的 WCF

> ID：16193492
> 
> 赞同：0
> 
> 时间：2013-04-24T13:37:51.003
> 
> 标签：wcf, web-services, security

我有一个 .NET 客户端-服务器系统，它使用 WCF 进行通信。

通信必须是安全的。到目前为止，我使用 Windows 凭据进行身份验证。

但是现在出现了一个新的要求——系统必须在客户端和服务器位于不同域（或客户端不在任何域中）的情况下工作。

Windows 凭据身份验证在此设置中不起作用。AFAIR，WCF 支持以下安全机制

*   Windows 身份验证
*   X509 证书
*   已发行代币
*   用户名和密码。

我应该使用哪一个，如果

1.  我需要以尽可能少的努力实施修复，
2.  客户端和服务器位于不同的域中（因此，Windows 身份验证不是一种选择）和
3.  通信必须是安全的（服务器不得处理来自未经授权的客户端的请求）

?

# windows - Trying to give permission to Apache on Dropbox folder via Alias on Windows

> ID：16193496
> 
> 赞同：1
> 
> 时间：2013-04-24T13:38:03.617
> 
> 标签：windows, apache, permissions, xampp, dropbox

Im trying to setup a alias to dropbox using Xampp on windows 7.

I gave recursive full access permission to "Everyone" on C: and D: but I'm still getting a 403 Forbidden error on apache.

Dropbox is on C:\Users\João\Dropbox and Xampp is on D:\xampp

My alias is Alias /pp C:/Users/João/Dropbox/pp

The alias is working since I got a 403 and not a 404 error.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-13T11:11:46.173

这对我有用。

将符号链接到保管箱。在命令行提示符中

> **`mklink /D D:\xampp\path-to-the-www-root C:\Users\João\Dropbox\YourProject`**

将 xampp 指向 www-root 中的目录并打开 FollowSymLinks（对于 Apache）

# sql - 如果未找到行，则从过滤器中选择返回值

> ID：16193499
> 
> 赞同：0
> 
> 时间：2013-04-24T13:38:23.137
> 
> 标签：sql, oracle10g

我需要一个总是返回至少一条记录的选择语句。像这样的东西

```
SELECT id, date FROM mytable WHERE id = <INPUT_ID> AND date = <INPUT_DATE>
UNION ALL
SELECT VALUE_FROM_FILTER(id), VALUE_FROM_FILTER(date) WHERE NOT EXISTS (SELECT * FROM mytable WHERE id = <INPUT_ID> AND date = <INPUT_DATE>) 
```

因此，如果查询返回 0 行，则它至少会返回包含输入值的一行。这在 SQL 中可能吗？

我正在使用 Oracle 10.2

`<INPUT_ID>`并且`<INPUT_DATE>`只是任何未知值的替代品

（根据答案和评论，我将问题修改为更明显）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:25:58.560

不完全确定我是否遵循，但我*认为*这可以满足您的要求：

```
with t as (select <INPUT ID> as input_id, <INPUT DATE> as input_date from dual)
select input_id, input_date
from t
left join mytable mt on mt.id = t.input_id and mt.date = t.input_date; 
```

使用一些示例数据：

```
create table mytable (id number, date_fld date);
insert into mytable (id, date_fld) values (1, date '2013-04-24');
insert into mytable (id, date_fld) values (2, date '2013-04-22');
insert into mytable (id, date_fld) values (2, date '2013-04-22');
insert into mytable (id, date_fld) values (2, date '2013-04-23'); 
```

...和查询：

```
with t as (select 1 as input_id, date '2013-04-21' as input_date from dual)
select input_id, input_date
from t
left join mytable mt on mt.id = t.input_id and mt.date_fld = t.input_date;

  INPUT_ID INPUT_DAT
---------- ---------
         1 21-APR-13

with t as (select 1 as input_id, date '2013-04-24' as input_date from dual)
select input_id, input_date
from t
left join mytable mt on mt.id = t.input_id and mt.date_fld = t.input_date;

  INPUT_ID INPUT_DAT
---------- ---------
         1 24-APR-13

with t as (select 2 as input_id, date '2013-04-22' as input_date from dual)
select input_id, input_date
from t
left join mytable mt on mt.id = t.input_id and mt.date_fld = t.input_date;

  INPUT_ID INPUT_DAT
---------- ---------
         2 22-APR-13
         2 22-APR-13 
```

现在我已经输入了，我有一种讨厌的感觉，我在回答错误的问题，你真的想把它转换`{WHERE}`成一个新的查询来做这个。恐怕查询和应用程序之间的交互对我来说不是很清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T13:53:12.923

您可以根据第一个查询不返回结果这一事实来断言“默认”行：

```
SELECT id, date FROM mytable WHERE id = @INPUT_ID AND date = @INPUT_DATE
UNION
SELECT @INPUT_ID AS id, @INPUT_DATE AS date FROM DUAL
WHERE NOT EXISTS (SELECT * FROM mytable WHERE id = @INPUT_ID AND date = @INPUT_DATE) 
```

# android - SQL Server 和 SQLite 通过 USB 复制数据 (Android)

> ID：16193503
> 
> 赞同：1
> 
> 时间：2013-04-24T13:38:31.097
> 
> 标签：android, sql, web-services, sqlite, usb

我有一个项目，我正在尝试通过 USB 同步 SQL 服务器数据库和 SQLite 数据库。我目前可以通过 WiFi 直接连接到 SQL Server 数据库并实时使用这些数据，或者我可以同步两个数据库以便复制数据。这可以通过USB完成吗？我已经阅读了有关开发人员使用 Web 服务通过 USB 进行连接的信息。如果是这样，我如何通过 USB 连接到 Web 服务？我已经查看了可能与“Android、USB、SQL、SQLite 和 Web 服务”有关的每个“Stackoverflow”页面。

所以我的问题是：

*   有没有办法通过 USB 连接到 SQL Server 以复制（Android 设备）SQLite 数据库中的数据？
*   如果是这样，我可以使用什么 API 来执行此操作？
*   如果通过 USB 与 SQL 服务器数据库通信需要 Web 服务，我如何通过 USB 连接到 Web 服务？
*   我看过 Restful 技术，我喜欢通信的轻量级。这可以用来通过USB进行通信吗？

感谢所有的帮助！

# css - Having a crisp edge at the top of a box shadow via CSS?

> ID：16193504
> 
> 赞同：0
> 
> 时间：2013-04-24T13:38:31.983
> 
> 标签：css

I'm using the following css technique to design a box shadow around a div element...

```
-webkit-box-shadow:0 0 10px #303030;
-moz-box-shadow:0 0 10px #303030;
box-shadow:0 0 10px #303030; 
```

But is there a way to tell the css to stop the shadow effect at the top of the div? I just want to the left, right and bottom of the div element to have the effect.

Thanks for any advice

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T13:42:58.853

[演示](http://jsfiddle.net/uXGKp/)

```
div{
    height: 300px;
    width: 300px;
    -webkit-box-shadow:0 5px 10px #303030;
    -moz-box-shadow:0 5px 10px #303030;
    box-shadow:0 5px 10px #303030;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T14:05:25.537

根据[规范](http://www.w3.org/TR/css3-background/#the-box-shadow)，第二个值是垂直插图。只需更新该值以获得“投影”效果：

```
盒子阴影：0 10px 10px #303030;

```

此外，[请查看本文](https://catalin.red/how-to-create-slick-effects-with-css3-box-shadow/)了解您可以使用 box-shadow 实现的其他一些很酷的效果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T13:48:02.297

为了完全摆脱顶部阴影*而不延长底部阴影*，我的解决方案是在 div 内包含另一个具有白色背景的元素，并绝对定位它以隐藏顶部阴影。

```
<div>
    <span></span>    
</div>

div {
    margin-top:20px;
    height:300px;
    width:300px;
    -webkit-box-shadow:0 0 10px #303030;
    position:relative;
}
span {
    display:block;
    position:absolute;
    top:-10px;
    height:10px;
    width:100%;
    background:#fff;
} 
```

[http://jsfiddle.net/QE8Bh/1/](http://jsfiddle.net/QE8Bh/1/)

# c++ - 在 Windows 7 上构建的 C++ 应用程序（使用 VS2010 IDE 和 VS2008 工具集）在 Windows 7 上运行，但在 Win XP 上不运行

> ID：16193506
> 
> 赞同：0
> 
> 时间：2013-04-24T13:38:37.360
> 
> 标签：c++, windows, winapi, windows-7, windows-xp

我有一个 C++ 应用程序，它是在 Windows 7 上使用 VS 2010 IDE 针对 VS2008 工具集构建的。我已经验证它依赖于 msvc*90.dll。

当我将其移至 XP Professional SP3 机器时，会出现此问题。我也安装了 32 位 vs 2008 可再发行包。

但是，应用程序无法运行。没有错误报告。甚至查看器也没有登录到系统。

有什么提示吗？

PS：我已经看过以下线程。

*   [在 Win7 上构建的程序无法在 WinXP 上运行](https://stackoverflow.com/questions/6311754/program-built-on-win7-wont-run-on-winxp)
*   [如何在 windows 7/visual studio 2008 下为 windows XP 编译](https://stackoverflow.com/questions/2581752/how-do-i-compile-for-windows-xp-under-windows-7-visual-studio-2008)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:42:12.823

您是否使用[Dependency Walker](http://www.dependencywalker.com/)检查了该 Windows XP 系统中的 DLL 。这可以帮助您确定您是否没有遗漏另一个依赖项或没有处理并行执行问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-23T06:17:27.393

这个问题现在已经解决了。该问题与依赖关系无关。相反，它是文件系统中不存在的某个目录。

# c# - trying to dynamic asp:FileUpload , refresh trouble

> ID：16193511
> 
> 赞同：0
> 
> 时间：2013-04-24T13:39:06.313
> 
> 标签：c#, asp.net, file-upload

i need the users of my web system to do uploads ( up 4 ).

the upload itself its working , but i dont want all for box appering at start, so tried to hide the 2nd ,3rd and 4th upload boxes until the user need them .

here the aspx code part

```
<fieldset>
    <div class="frm tam">
    </div>
    <div class="lin">
        <asp:FileUpload ID="FileUpload1" runat="server" /></div>
    <div class="lin">
        <asp:FileUpload ID="FileUpload2" runat="server" Visible="false" /></div>
    <div class="lin">
        <asp:FileUpload ID="FileUpload3" runat="server" Visible="false" /></div>
    <div class="lin">
        <asp:FileUpload ID="FileUpload4" runat="server" Visible="false" /></div>
    <div class="lin">
        <asp:Button ID="btnUpload" runat="server" Text="Upload"OnClick="btnUpload_Click" />
        <asp:Button ID="btnAdd" runat="server" Text="ADD File" OnClick="btnAdd_Click" />
        <asp:Button ID="btnRem" runat="server" Text="Remove File" OnClick="btnRem_Click" />
    </div>
</fieldset> 
```

and the code behind to show and hide the boxes

```
protected void btnAdd_Click(object sender, EventArgs e)
{
    if (FileUpload2.Visible == false)
    {
        FileUpload2.Visible = true;
    }
    else if (FileUpload3.Visible == false)
    {
        FileUpload3.Visible = true;
    }
    else if (FileUpload4.Visible == false)
    {
        FileUpload4.Visible = true;
    }
}

protected void btnRem_Click(object sender, EventArgs e)
{
    if (FileUpload4.Visible == true)
    {
        FileUpload4.Visible = false;
    }
    else if (FileUpload3.Visible == true)
    {
        FileUpload3.Visible = false;
    }
    else if (FileUpload2.Visible == true)
    {
        FileUpload2.Visible = false;
    }
} 
```

and when i click on Add File, the new box appear but the filepaths selected on the other boxes are cleared. Can i avoid this clear ?

*edit: i´m using net framework 4.0 .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:57:07.777

该文件在回发时丢失。或者，您可以使用 JavaScript 来实现

```
<div id="div1">
   <asp:FileUpload ID="FileUpload1" runat="server" />
</div>

<div id="div2" style="display:none">   <!-- visibility:hidden -->
   <asp:FileUpload ID="FileUpload2" runat="server" />
</div>

<div id="div3" style="display:none">
   <asp:FileUpload ID="FileUpload3" runat="server" />
</div>

<div id="div4" style="display:none">
   <asp:FileUpload ID="FileUpload4" runat="server" />
</div> 
```

然后将每个 FileUpload 控件放在每个 div 中。

```
<input type="button" valud="Add" onclick="addControls()" /> 
```

然后使用 JavaScript 使它们可见

```
function addControls()
{
   document.getElementById('div2').style.display = 'inline-block';
   //$('#div2').show(); <--- JQuery
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T13:53:04.430

这里的问题是上传文件的工作方式与大多数输入控件略有不同......

它不是发布输入的文件路径值，而是实际发布文件内容，因此在回发时该值会丢失。

在我看来，您最好的选择是在客户端上使用 javascript 来显示/隐藏这些上传控件。这也将是更好的用户体验，因为用户不必每次都等待回发。

你可以用jQuery做到这一点......

[http://jsfiddle.net/BAwfH/2/](http://jsfiddle.net/BAwfH/2/)

```
<fieldset>
<div class="frm tam">
</div>
<div class="lin">
    <asp:FileUpload ID="FileUpload1" runat="server" />
</div>
<div class="lin">
    <asp:FileUpload ID="FileUpload2" runat="server" />
</div>
<div class="lin">
    <asp:FileUpload ID="FileUpload3" runat="server" />
</div>
<div class="lin">
    <asp:FileUpload ID="FileUpload4" runat="server" />
</div>
<div>
    <asp:Button ID="btnUpload" runat="server" Text="Upload"OnClick="btnUpload_Click" />
    <asp:Button ID="btnAdd" class="add-button" runat="server" Text="ADD File" OnClick="btnAdd_Click" />
    <asp:Button ID="btnRem" runat="server" Text="Remove File" OnClick="btnRem_Click" />
</div> 
```

```
<script type="text/javascript">
$(document).ready(function(){
var lines = $('.lin');
lines.hide();
lines.filter(':first').show();

$('.add-button').click(function(){
    lines.filter(':hidden:first').show();

    if(lines.filter(':hidden').length == 0)
        $(this).hide();
}); 
```

});

# java - java监控对象：线程BLOCK在一些

> ID：16193515
> 
> 赞同：1
> 
> 时间：2013-04-24T13:39:18.953
> 
> 标签：java, static-analysis, thread-dump, thread-state

在拼命尝试任何方法来解决我的负载测试故障时，我遇到了[TDA](https://java.net/projects/tda)，这是一个用于 Java 的线程转储分析工具。不知何故，我不觉得我在关注它的输出。例如，在有一个 8 个线程被 BLOCKED 的监视器实例的情况下，不应该有一个线程处于 RUNNABLE 状态吗？某些线程必须获得该监视器的锁定才能将其他 8 个线程置于 BLOCKED 状态，是吗？

第二件事 - 关于 TDA 术语 - 有一个类别“线程在监视器上休眠（675 个线程休眠）”和一个称为“线程锁定监视器（806 个线程锁定）”。这两个类别都包含 WAITING、BLOCKED 或 TIMED_WAITING 的线程。我能说的唯一区别是后一类还包含处于 RUNNABLE 状态的线程。它们之间还有其他区别吗？我没有得到的是“睡在监视器上”的句法。

谢谢！

# css - Heading with text background

> ID：16193516
> 
> 赞同：1
> 
> 时间：2013-04-24T13:39:25.583
> 
> 标签：css, html

I want to make a heading, that looks like this

![enter image description here](https://i.stack.imgur.com/OGNgK.png)

I tried the following:

**HTML**

```
<span class="header">Hallo</span><br /><span class="header">und Willkommen</span> 
```

**CSS:**

```
span.header {
    background: #404040;
    color: #fff;
    display: inline;
    line-height: 43px;
    padding: 5px 10px;
    font-size: 24px;
    text-transform: uppercase;
} 
```

It works, but I want the line to break automatically within a `h1`, without using `<span>` and a `<br />`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:56:06.413

我喜欢在一个类中使用这组属性来帮助我处理一些对齐问题（也是跨浏览问题）：

```
.line_100{
    display:inline;
    float:left;
    height:auto;
    position:relative;
    text-align:left;
    width:100%
} 
```

如果您希望每个短语使用一个完整的行并且您不想使用`</br>`，您可以将每一行添加到 a 中并调用我提到的这个 css 类......看看我制作的这个[jsfiddle](http://jsfiddle.net/UCxxg/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T14:25:57.793

我建议使用上述限制的两种替代解决方案

> “h1 标题没有中断，没有跨度......”

**第一个**：仅使用标题标签 h1， **第二个**：帮助 <a> 标签

**第一种选择：仅使用标题标签 h1**

![在此处输入图像描述](https://i.stack.imgur.com/UWujq.png)

有一些小的限制，您可以利用值为**“pre-wrap”****的空白**属性（您可以尝试其他值。我认为这是更合适的）它会像使用**pre**标签一样工作。

 ****注意紧跟第一个标签并在同一行中开始文本。如果不是，您将在标题中获得额外的一行您将标题打破为在 pre 标签内书写。

```
<div>
   <h class="header">HALLO&nbsp;
 UND WILLKOMMEN</h>   
</div> 
```

对于 css，您可以避免使用 display:inline 声明，如果您愿意的话。

```
h.header{
    background: #404040;
    color: #fff;
    /* display:inline;*/
    line-height: 43px;
    padding: 5px 10px;
    font-size: 24px;
    text-transform: uppercase;
    white-space:pre-wrap;
  } 
```

**我用nbsp 实例**破解的第一行中没有右填充的小问题；

[在这里](http://jsfiddle.net/Fico/63AWm/)摆弄

**第二种选择：帮助 < a > ：**

![在此处输入图像描述](https://i.stack.imgur.com/ajOTx.png)

```
<div>
   <h1 class="header">
       <a>HALLO</a>
       <a>UND WILLKOMMEN</a>
    </h1>   
</div> 
```

试图保留您原来的 .header 类，我只将显示修改为表格，而不是顶部和底部的填充，我包含了一个边距声明

```
h1.header a{
    background: #404040;
    color: #fff;
    display:table;
    line-height: 43px;
    padding: 0px 10px;
    margin:5px;
    font-size: 24px;
    text-transform: uppercase;
  } 
```

[在这里](http://jsfiddle.net/Fico/X5cfL/)摆弄

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T13:45:31.770

您可以使用 clear: both 创建换行符而不`<br/>`

```
h1.header {
    background: #404040;
    color: #fff;
    display: inline;
    line-height: 43px;
    padding: 5px 10px;
    font-size: 24px;
    text-transform: uppercase;
    clear: both;
    float: left;
} 
```

[http://jsfiddle.net/S2m9n/1/](http://jsfiddle.net/S2m9n/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T13:54:37.407

如果没有`<br>`你如何指示线路应该在哪里中断？或者，既然你称它为“自动”，那么代码应该如何确定在哪里中断？**提供您想要**使用的 HTML 可能会有所帮助，以便我们获得更好的图片。

如果您使用没有其他标签的单个 h1，我猜它必须在宽度上中断。****

# bash - Remove duplicated files in linux fs with ending e+$

> ID：16193517
> 
> 赞同：0
> 
> 时间：2013-04-24T13:39:27.177
> 
> 标签：bash, filesystems, duplicate-removal

I have big filesystem structure which contains many files with different extensions, for example

```
index.html
logo.png
package.zip 
```

Many of those files has its duplicates with added `e` letter at the end, so:

```
index.htmle
index.htmlee
package.zipe 
```

and so on.

I have to remove recursively every duplicated file with `e+$` at the end. But if there is file

```
file.exe 
```

it should remove

```
file.exee
file.exeee 
```

but not

```
file.exe 
```

What is the best way to remove those files ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T14:29:52.550

首先，我假设您有目录中所有文件的列表。它可以是纯文本文件。让我们称之为`list`

那么这个单线将完成这项工作：

```
sort list|awk '{if(p&&$0~p"e+$")print "rm "$0;p=$0}' 
```

上面的这一行将打印`rm foo`命令，`foo`是重复的文件。举个例子：

```
kent$  cat list
index.html
logo.png
logo.pnge
package.zip
index.htmle
index.htmlee
package.zipe
file.exe
file.exee
file.exeee

kent$  sort list|awk '{if(p&&$0~p"e+$")print "rm "$0;p=$0}' 
rm file.exee
rm file.exeee
rm index.htmle
rm index.htmlee
rm logo.pnge
rm package.zipe 
```

你可以看到，所有重复的文件都在生成的`rm command`. 如果你想执行，只需将这条线传递给`|sh`：

```
sort list|awk '{if(p&&$0~p"e+$")print "rm "$0;p=$0}'|sh 
```

**编辑**

最好用引号将文件名括起来，因为文件名可能包含空格和其他特殊字符：

```
sort list|awk '{if(p&&$0~p"e+$")print "rm \""$0"\"";p=$0}' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T14:30:09.093

您需要找到所有以“e”结尾的文件

```
find ./ -name "*e" 
```

然后需要反向排序以先命名较长的名称

```
| sort -r 
```

然后去掉“e”

```
 chk4File=`echo $FILE | sed -e 's/e$//g'` 
```

然后比较以确保它在删除最后带有'e'的文件之前存在

```
 if [ "${FILE}" != "${chk4File}" ] && [ -e ${chk4File} ]; then 
```

将它们放在一起...该示例不会删除任何文件...只是告诉您哪些文件将被删除...我建议在不删除任何文件的情况下进行测试运行，并在真正删除之前查看结果。只需从 rm 命令中删除 # in 即可使其生效。

```
#!/bin/sh
for FILE in `find ./ -name "*e" | sort -r`
do
    chk4File=`echo $FILE | sed -e 's/e$//g'`
    if [ "${FILE}" != "${chk4File}" ] && [ -e ${chk4File} ]; then
        echo "Removing ${FILE} since ${chk4File} was found.."
        #rm -rf ${FILE}
    else
        echo "NOT Removing ${FILE} since ${chk4File} was NOT found.."
    fi 
```

# python - TypeError：预期的字符串或缓冲区

> ID：16193521
> 
> 赞同：45
> 
> 时间：2013-04-24T13:39:36.693
> 
> 标签：python, regex

我有这个简单的代码：

```
import re, sys

f = open('findallEX.txt', 'r')
lines = f.readlines()
match = re.findall('[A-Z]+', lines)
print match 
```

我不知道为什么我收到错误：

> '预期的字符串或缓冲区'

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-24T13:41:31.663

`lines`是一个列表。`re.findall()`不带清单。

```
>>> import re
>>> f = open('README.md', 'r')
>>> lines = f.readlines()
>>> match = re.findall('[A-Z]+', lines)
Traceback (most recent call last):
  File "<input>", line 1, in <module>
  File "/usr/lib/python2.7/re.py", line 177, in findall
    return _compile(pattern, flags).findall(string)
TypeError: expected string or buffer
>>> type(lines)
<type 'list'> 
```

从`help(file.readlines)`. 即`readlines()`用于循环/迭代：

```
readlines(...)
    readlines([size]) -> list of strings, each a line from the file. 
```

要查找文件中的所有大写字符：

```
>>> import re
>>> re.findall('[A-Z]+', open('README.md', 'r').read())
['S', 'E', 'A', 'P', 'S', 'I', 'R', 'C', 'I', 'A', 'P', 'O', 'G', 'P', 'P', 'T', 'V', 'W', 'V', 'D', 'A', 'L', 'U', 'O', 'I', 'L', 'P', 'A', 'D', 'V', 'S', 'M', 'S', 'L', 'I', 'D', 'V', 'S', 'M', 'A', 'P', 'T', 'P', 'Y', 'C', 'M', 'V', 'Y', 'C', 'M', 'R', 'R', 'B', 'P', 'M', 'L', 'F', 'D', 'W', 'V', 'C', 'X', 'S'] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-24T13:42:17.220

`lines`是一个字符串列表，`re.findall`不适用于它。尝试：

```
import re, sys

f = open('findallEX.txt', 'r')
lines = f.read()
match = re.findall('[A-Z]+', lines)
print match 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-24T13:42:21.433

`readlines()`将返回文件中所有行的列表，列表也是如此`lines`。你可能想要这样的东西：

```
for line in f.readlines(): # Iterates through every line and looks for a match
#or
#for line in f:
    match = re.findall('[A-Z]+', line)
    print match 
```

或者，如果文件不是太大，您可以将其作为单个字符串抓取：

```
lines = f.read() # Warning: reads the FULL FILE into memory. This can be bad.
match = re.findall('[A-Z]+', lines)
print match 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-04-07T13:26:40.243

您的代码段中的“行”术语由一组字符串组成。

```
 lines = f.readlines()
 match = re.findall('[A-Z]+', lines) 
```

您不能将整行发送到`re.findall('pattern',<string>)`

您可以尝试逐行发送

```
 for i in lines:
  match = re.findall('[A-Z]+', i)
  print match 
```

或将整个行集合转换为单行（每行由空格分隔）

```
 NEW_LIST=' '.join(lines)
 match=re.findall('[A-Z]+' ,NEW_LIST)
 print match 
```

这可能会帮助你

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-08-09T12:53:21.890

re.findall 在字符串中查找所有出现的正则表达式并在列表中返回。在这里，您使用的是字符串列表，您需要使用 re.findall

注意 - 如果正则表达式失败，则返回一个空列表。

```
import re, sys

f = open('picklee', 'r')
lines = f.readlines()  
regex = re.compile(r'[A-Z]+')
for line in lines:
     print (re.findall(regex, line)) 
```

# android - 首选项不起作用

> ID：16193522
> 
> 赞同：2
> 
> 时间：2013-04-24T13:39:37.170
> 
> 标签：android, preferences

我的应用程序中存在偏好问题。

我创建了preference.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">

        <!-- General screen  -->
        <PreferenceCategory
                android:title="@string/general_category"
                android:key="prefGeneralCategory">
        <CheckBoxPreference
                        android:icon="@drawable/content_discard"
                        android:title="@string/pref_general_vibration"
                        android:defaultValue="false"
                        android:key="prefVibration"
                        android:summaryOn="checked"
                        android:summaryOff="unchecked" 
                        />
                       <!--  android:summary="@string/pref_general_vibration_description" -->

        <CheckBoxPreference
                        android:title="@string/pref_general_record_battery"
                        android:defaultValue="true"
                        android:summary="@string/pref_general_record_battery_description"
                        android:key="prefRecordBattery" />

        <ListPreference
                        android:title="@string/pref_network_type"
                        android:summary="@string/pref_network_type_description"
                        android:key="prefNetworkType"
                        android:defaultValue="1"
                        android:entries="@array/prefNetworkArray"
                        android:entryValues="@array/prefNetworkValues" />
        </PreferenceCategory>

        <!-- Network screen  -->

        <PreferenceCategory
                android:title="@string/pref_network_screen"
                android:key="prefNetworkCategory">

        <PreferenceScreen
                android:title="@string/pref_network_screen"
                android:key="prefNetworkScreen"
                >
                <CheckBoxPreference
                        android:title="@string/pref_network_update"
                        android:defaultValue="false"
                        android:summary="@string/pref_network_update_description"
                        android:key="prefUpdate" />

         </PreferenceScreen>
         </PreferenceCategory>
</PreferenceScreen> 
```

我的一般屏幕是好的，但是第二个屏幕（网络屏幕）是黑色的（下图）

![在此处输入图像描述](https://i.stack.imgur.com/PlKYX.png)

第二个问题是 ListPreference。它给了我错误：

```
04-24 15:20:29.689: E/AndroidRuntime(399): FATAL EXCEPTION: main
04-24 15:20:29.689: E/AndroidRuntime(399): java.lang.NullPointerException
04-24 15:20:29.689: E/AndroidRuntime(399):  at android.preference.ListPreference.findIndexOfValue(ListPreference.java:169)
04-24 15:20:29.689: E/AndroidRuntime(399):  at android.preference.ListPreference.getValueIndex(ListPreference.java:178)
04-24 15:20:29.689: E/AndroidRuntime(399):  at android.preference.ListPreference.onPrepareDialogBuilder(ListPreference.java:190)
04-24 15:20:29.689: E/AndroidRuntime(399):  at android.preference.DialogPreference.showDialog(DialogPreference.java:293)
04-24 15:20:29.689: E/AndroidRuntime(399):  at android.preference.DialogPreference.onClick(DialogPreference.java:264)
04-24 15:20:29.689: E/AndroidRuntime(399):  at android.preference.Preference.performClick(Preference.java:810)
04-24 15:20:29.689: E/AndroidRuntime(399):  at android.preference.PreferenceScreen.onItemClick(PreferenceScreen.java:190)
04-24 15:20:29.689: E/AndroidRuntime(399):  at android.widget.AdapterView.performItemClick(AdapterView.java:284)
04-24 15:20:29.689: E/AndroidRuntime(399):  at android.widget.ListView.performItemClick(ListView.java:3513)
04-24 15:20:29.689: E/AndroidRuntime(399):  at android.widget.AbsListView$PerformClick.run(AbsListView.java:1812)
04-24 15:20:29.689: E/AndroidRuntime(399):  at android.os.Handler.handleCallback(Handler.java:587)
04-24 15:20:29.689: E/AndroidRuntime(399):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-24 15:20:29.689: E/AndroidRuntime(399):  at android.os.Looper.loop(Looper.java:123)
04-24 15:20:29.689: E/AndroidRuntime(399):  at android.app.ActivityThread.main(ActivityThread.java:3683)
04-24 15:20:29.689: E/AndroidRuntime(399):  at java.lang.reflect.Method.invokeNative(Native Method)
04-24 15:20:29.689: E/AndroidRuntime(399):  at java.lang.reflect.Method.invoke(Method.java:507)
04-24 15:20:29.689: E/AndroidRuntime(399):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-24 15:20:29.689: E/AndroidRuntime(399):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-24 15:20:29.689: E/AndroidRuntime(399):  at dalvik.system.NativeStart.main(Native Method) 
```

这些是我的其他文件：

```
<resources>
...

    <string name="general_category">Obecné</string>
        <string name="pref_general_vibration">Povolit vibrace</string>
        <string name="pref_general_record_battery">Kontrola baterie</string>
        <string name="pref_general_record_battery_description">vypnout nahrávání, pokud je baterie pod 20%</string>

    <string name="pref_network_screen">Síťové nastavení</string>
        <string name="pref_network_type">Volba sítě</string>
        <string name="pref_network_type_description">Vyberte typ připojení</string>
        <string name="pref_network_update">Automatické aktualizace</string>
        <string name="pref_network_update_description">Povolení k automatické aktualizace aplikace</string>

    <string-array name="prefNetworkArray">
    <item name="net1">wifi (default)</item>
    <item name="net2">3G</item>
    <item name="net3">wifi/3G</item>
    </string-array>
    <integer-array name="prefNetworkValues">
    <item name="net1">1</item>
    <item name="net2">2</item>
    <item name="net3">3</item>
    </integer-array>

...

</resources> 
```

在 PreferenceActivity 我只有：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.layout.preferences);   } 
```

请问有人能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-06T10:19:33.003

我修复了 nullPointerException 的第二个问题。ListPreference 不适用于整数数组，因此我将其更改为字符串数组。

```
<string-array name="prefNetworkArray">
<item name="net1">wifi (default)</item>
<item name="net2">3G</item>
<item name="net3">wifi/3G</item>
</string-array>
<string-array name="prefNetworkValues">
<item name="net1">1</item>
<item name="net2">2</item>
<item name="net3">3</item>
</string-array> 
```

# gerrit - Gerrit 在尝试提交更改时要求 rebase

> ID：16193524
> 
> 赞同：0
> 
> 时间：2013-04-24T13:39:41.617
> 
> 标签：gerrit

我正在使用 gerrit 进行代码审查。在合并更改时，我收到诸如“rebase you change”之类的错误。我认为这是因为父母的变化。我想知道在这种情况下父母是什么。以及 gerrit 如何决定哪个应该是上载以供审查的任何更改的父提交？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-05T13:34:01.293

通常父母将是当前的“主人”（HEAD）。因此，您必须使用 gerrit 中显示的命令来检索您的更改。然后做一个：

```
git rebase master 
```

将您的更改重新设置为当前的主人。

如果一切顺利（并且在最终调用“ `git rebase --continue`”之后），您可以使用以下命令将您的 rebased 更改推送到 gerrit：

```
git push origin HEAD:refs/for/master 
```

# php - 如何过滤 XSS 但仍允许基本格式标记

> ID：16193527
> 
> 赞同：0
> 
> 时间：2013-04-24T13:39:48.927
> 
> 标签：php, html, editor, xss, input-sanitization

我正在开发一个允许人们使用编辑器输入 html 格式内容的网站。

但是，我担心 XSS 注入。编辑器显然使用 Javascripts 在客户端过滤信息，但我几乎不能相信这一点，因为不信任来自客户端的任何内容是一种很好的做法。

我希望能够将某些标签列入白名单，例如：

```
<br> <img src=""> <p> <b> 
```

但仍然对 XSS 攻击的输入执行安全过滤。

我考虑使用[http://php.net/manual/en/function.strip-tags.php](http://php.net/manual/en/function.strip-tags.php)但我注意到 img 标签是 XSS 黑客的最爱之一。

是否有可能制作一个可以做到这一点的功能？会安全吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T13:45:16.533

使用[HTMLPurifier](http://htmlpurifier.org/)：

```
$config = HTMLPurifier_Config::createDefault();

// the tags and attributes you want to allow
$config->set('HTML.Allowed', 'br,img[src],p,b');

$purifier = new HTMLPurifier($config);

print $purifier->purify($inputHtml); 
```

* * *

另一种可能的解决方案是将您的 HTML 加载到[`DomDocument`](http://php.net/manual/en/class.domdocument.php)中，删除不需要的元素或属性并获取更新的 HTML

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T13:49:16.380

我还是更喜欢BB代码。[你可以在http://phpclasses.org](http://phpclasses.org)找到一个不错的 BB 解析器类

# mysql - mysql function, how to refer to table field datatype

> ID：16193528
> 
> 赞同：1
> 
> 时间：2013-04-24T13:39:53.803
> 
> 标签：mysql, function, stored-procedures, sqldatatypes

in MYSQL i have a myfield column in mytable table which has let's say a varchar(8) data type

```
CREATE TABLE mytable  ( 
    id      INT  NOT NULL,
    myfield VARCHAR( 8 )) 
```

in a function or procedure i'd like to refer to myfield datatype, something like that:

```
DECLARE myvar mytable.myfield%TYPE 
```

in alternative to explicitly declare it

```
DECLARE myvar VARCHAR( 8 ) 
```

Is there a way in a MYSQL function or procedure, to refer to a column datatype when declaring variable o return type? thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T09:42:02.447

在 MySQL 中没有办法做到这一点。DECLARE 必须静态声明变量的类型和大小。

# ruby-on-rails - 当列数据来自使用服务器端处理的关联表时，DataTables 不会排序

> ID：16193530
> 
> 赞同：0
> 
> 时间：2013-04-24T13:39:59.600
> 
> 标签：ruby-on-rails, datatables

使用服务器端处理对关联表中的列数据进行排序？

Railscast 第 340 集允许在服务器端操作数据表，但不允许您对关联的表值进行排序

```
class Workshop < ActiveRecord::Base 
  belongs_to :location, :class_name => 'Location'
end

class Location < ActiveRecord::Base
  has_many :workshops
  attr_accessible :name,
end 
```

记录通过 id 关联（workshop.id = location_id）

在 Workshop 数据表类上，显示的信息是 location_name

```
class WorkshopsDatatable
  def data
    workshops.map do |workshop|
    {
      id:           workshop.id,
      location:     workshop.location_name,
    }
  end
end 
```

我希望能够按 location_name 而不是 location_id 对位置列进行排序。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:02:32.380

谢谢您的回答。我担心这是不可能的，因为 json 渲染是指 Workshops 活动记录而不是 Location 活动记录

```
<div class="well well-tzippy datatable-component">
  <table id="workshops" class="table-striped" data-source="<%= workshops_url(format: "json") %>">
    <thead>
      <tr>
      <th class="text-left">Title</th>
       <th class="text-left">Instructor</th>
       <th>Scheduled Time</th>
       <th class="text-left">Location</th>
       <th class="text-left">Contact</th>
       <th>Stats</th>

     </tr>
   </thead>
  <tbody>
  </tbody> 
```

请注意，数据源指的是 Workshop_path，因此 location_name 是与 Workshop 活动记录关联的表 Locations 的列，通过 location_id= Workshop.id：

```
data-source="<%= workshops_url(format: "json") %>"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T01:07:04.133

修改您的 WorkshopsDatatable 类中的行，如下所示：

```
def sort_column
  columns = %w[id location_name]
  columns[params[:iSortCol_0].to_i]
end 
```

# c# - 使用C#删除xml文件中的xml标签变量

> ID：16193533
> 
> 赞同：0
> 
> 时间：2013-04-24T13:40:05.053
> 
> 标签：c#, xml, tags

我有带有标签的 xml 文件，`<File>`我需要从这些标签中删除一些变量及其值。`version="$(Version_Infralution.Common.dll)">Infralution.Common.dll`以及所有变量版本及其值。我怎样才能在 C# 中做到这一点？

部分 XML 文件内容：

```
 <File version="$(Version_Infralution.Common.dll)">Infralution.Common.dll</File> 
 <File version="$(Version_Infralution.Common.dll)">Infralution.Controls.dll</File>
 <File version="$(Version_Infralution.Common.dll)">Infralution.Controls.VirtualTree.dll</File>
 <File size="73728">Infralution.RichText.dll</File>
 <File version="$(Version_Interop.DSOFile.dll)">Interop.DSOFile.dll</File>
 <File version="$(Version_NLog.dll)">NLog.dll</File> 
```

样本结果：

```
 <File>Infralution.Common.dll</File> 
 <File>Infralution.Controls.dll</File>
 <File>Infralution.Controls.VirtualTree.dll</File>
 <File size="73728">Infralution.RichText.dll</File>
 <File>Interop.DSOFile.dll</File>
 <File>NLog.dll</File> 
```

XML 文件结构在标签之前有很多子标签，例如：

```
<Products>
    <Product name="Connectors">
      <Registry>
        <Reg key="HKEY_CURRENT_USER\Software\ScanJour\iBox\Install" value_name="SettingsEditorShortcuts" value="1" platform="x64" />
      </Registry>
      <SharedProductRef name="SharedProduct for: ModelBuilder Client, iBox Search, Connectors" />
      <SharedProductRef name="SharedProduct for: ModelBuilder Client, iBox Server\iBox Utilities, iBox Server, iBox Server\ADODBC Manager, iBox Search, Connectors\Connector Manager, Connectors" />
      <SharedProductRef name="SharedProduct for: SharePoint Server Add-on\Search Control Webpart, Connectors" />
    </Product>
    <Product name="Connectors\Connector Manager">
      <FileSystem>
        <Dir name="ProgramFilesX64" value="ScanJour\iBox\Common Components\ConnectorManager\">
          <File version="$(Version_CSScriptLibrary.v2.0.dll)">CSScriptLibrary.v2.0.dll</File>
          <File version="$(Version_Infralution.Common.dll)">Infralution.Common.dll</File>
          <File version="$(Version_Infralution.Common.dll)">Infralution.Controls.dll</File> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:55:48.763

[您可以使用LINQ-to-XML](http://msdn.microsoft.com/en-us/library/bb387098.aspx)轻松修改XML 。首先将源文档解析为一个[`XDocument`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)对象（您可以使用 加载文件[`.Load`](http://msdn.microsoft.com/en-us/library/bb343181.aspx)，或使用 处理包含 XML 的字符串变量[`.Parse`](http://msdn.microsoft.com/en-us/library/bb345532.aspx)）：

```
var xdoc = XDocument.Load("/path/to/filename.xml"); 
```

您可以通过过滤特定节点并使用扩展方法来删除不需要的节点（此示例删除具有精确值的属性的[`.Remove`](http://msdn.microsoft.com/en-us/library/bb357554.aspx)任何类型元素- 如果要验证其他条件，可以链接多个条件约束）：`<File>``version``$(Version_Infralution.Common.dll)`

```
xdoc.Descendants("File")
    .Where(x =>
        x.Attribute("version") != null &&
        x.Attribute("version").Value == "$(Version_Infralution.Common.dll)")
    .Remove(); 
```

样本结果：

```
<Files>
  <File size="73728">Infralution.RichText.dll</File>
  <File version="$(Version_Interop.DSOFile.dll)">Interop.DSOFile.dll</File>
  <File version="$(Version_NLog.dll)">NLog.dll</File>
</Files> 
```

* * *

您还可以更改特定节点，例如更改节点的内容或特定属性的值，或完全删除属性 - 此示例从具有以下版本的`version`任何元素中删除属性：`<File>``"$(Version_Infralution.Common.dll)"`

```
foreach (var xn in xdoc.Descendants("File")) {
    if (xn.Attribute("version") != null &&
          xn.Attribute("version").Value == "$(Version_Infralution.Common.dll)") {
        xn.Attribute("version").Remove();
    }
} 
```

样本结果：

```
<Files>
  <File>Infralution.Common.dll</File>
  <File>Infralution.Controls.dll</File>
  <File>Infralution.Controls.VirtualTree.dll</File>
  <File size="73728">Infralution.RichText.dll</File>
  <File version="$(Version_Interop.DSOFile.dll)">Interop.DSOFile.dll</File>
  <File version="$(Version_NLog.dll)">NLog.dll</File>
</Files> 
```

* * *

最后，您可以将结果保存到文件中[`.Save`](http://msdn.microsoft.com/en-us/library/bb345830.aspx)：

```
xdoc.Save("/path/to/newfilename.xml"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T07:28:34.217

我正在回答我自己的问题（也许有人也需要这个解决方案）工作代码：

```
 String path = @"C:\iBoxProductValidator.xml";
    String pathResult = @"C:\iBoxProductValidatorResult.xml";

    XmlDocument configDoc = new XmlDocument();

    configDoc.Load(path);

    XmlNodeList projectNodes = configDoc.GetElementsByTagName("File");

    for (int i = 0; i < projectNodes.Count; i++)
    {
        if (projectNodes[i].Attributes["version"] != null)
        {
            projectNodes[i].Attributes.Remove(projectNodes[i].Attributes["version"]);
        }
    }

    configDoc.Save(pathResult); 
```

# jquery - 使 div 在每个浏览器中可旋转

> ID：16193536
> 
> 赞同：5
> 
> 时间：2013-04-24T13:40:11.353
> 
> 标签：jquery, css, jquery-ui, rotation

首先，**我** [在 jQuery 中看到了 Rotating a Div Element，](https://stackoverflow.com/questions/382591/rotating-a-div-element-in-jquery) 但它并没有给我想要的解决方案。

我有一个带有可拖动 div 的 div。

所以 1 个主 div（bord），其中 div（类睡眠）在 div 睡眠中是缩放到 div 的 100% 宽度和高度（保持纵横比）的图像。

div 是可调整大小和可拖动的。

我希望图像（div）能够与右上角的处理程序一起旋转，就像右下角的调整大小一样。

目前 div 板中 1 个放置图像的 html 看起来像。

```
<div class="ui-draggable sleep ui-resizable" style="position: absolute; z-index: 1; left: 125px; top: 46px;">
  <img src="/imgurl.jpg" class="center">
  <div class="ui-resizable-handle ui-resizable-e" style="z-index: 90;"></div>
  <div class="ui-resizable-handle ui-resizable-s" style="z-index: 90;"></div>
  <div class="ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se" style="z-index: 90;"></div>
</div> 
```

可拖动/可调整大小项目的 Jquery

```
.draggable({stack: ".sleep", containment: '#bord' })
    .resizable
    ({containment:'#bord',aspectRatio: true})
    .css({position: 'absolute'}) 
```

我想让它在每个浏览器中都可以旋转。

有人可以以正确的方式帮助我吗？

**编辑**更清晰的问题：

我希望删除的 div 像在这个网站上一样可旋转：http: [//mydeco.floorplanner.com/rooms/moodboard/](http://mydeco.floorplanner.com/rooms/moodboard/)

我正在制作一些看起来像那个网站的东西：我有可以删除图像的 div。

下降后，我希望它们可以与处理程序一起旋转。

我已经使 div 可放置可调整大小和可拖动。见上面的代码。

但我不知道从哪里开始旋转，这就是我发布问题的原因。

我没有例子，因为我不知道从哪里开始。

![例子](https://i.stack.imgur.com/947qa.png)

我做了一个测试页，如果我得到了一点评价，但效果不佳。

您可以单击左侧的图像之一。

然后他们被标记为白色边框然后单击

Omhoog Rechts Omlaag 更改方向的链接。但我希望他们用处理程序而不是按钮转身。

有超过 600 行代码，其中大部分是 php 和 jquery，我试着做一个小提琴，但它的代码太多了。所有 jquery 都可以在源代码中查看。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-14T17:04:57.397

因为这对我来说很有趣，因为我知道将来我可能需要这样的东西，所以我比平时做了更多的研究，我很高兴，因为我找到了完美的解决方案。

看看这个 JQuery 插件[https://github.com/gthmb/jquery-free-transform](https://github.com/gthmb/jquery-free-transform)

这个插件不仅可以让你旋转，还可以自由变换元素，希望对你有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-11T01:42:52.490

看看 CSS3 转换属性，特别是[`rotate`](https://developer.mozilla.org/en-US/docs/Web/CSS/transform?redirectlocale=en-US&redirectslug=CSS/transform#rotate)特性。

[根据 caniuse](http://caniuse.com/#feat=transforms2d)的说法，以下浏览器支持 CSS3 2d 变换的旋转功能：

*   IE >9
*   FF >3
*   铬 >4
*   歌剧 >10
*   iOS Safari >3
*   安卓浏览器>2.1
*   BB浏览器 >7
*   Opera 手机 >11
*   铬（适用于安卓）
*   火狐（安卓）

iwanttouse.com 汇总了这些数据，并表示[87.44% 的用户可以使用它](http://www.iwanttouse.com/#transforms2d)。

不确定您对浏览器支持的要求是什么，但如果您想在 IE<9 中执行旋转，请查看 IE 中的[css rotate 属性](https://stackoverflow.com/questions/4617220/css-rotate-property-in-ie)。您需要查看[useragentman 的 IE 转换转换器](http://www.useragentman.com/IETransformsTranslator/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-08T23:22:48.840

好的 Sven，我检查了您作为示例放置的网站，他们使用了一个名为 ExtJS 的库（这是 HTML5 就绪，因此与所有现代浏览器兼容），它具有旋转任何元素[Ext.draw.Draw-method-的功能旋转](http://docs.sencha.com/extjs/4.2.0/#!/api/Ext.draw.Draw-method-rotate)

现在，您说提供给您的解决方案与所有浏览器不兼容，好的，然后组合解决方案，在您发布的链接中提供了可以组合以使其与所有浏览器兼容的解决方案（似乎大多数解决方案都使用 CSS 所以你应该在那里很安全）你所要做的就是像@Jay Blanchard 建议的那样努力并开始编写一些代码。

最后，我给您的另一个解决方案（如果您不能将 ExtJS 库包含到您的项目中）是使用名为 raphaeljs 的 Javascript 库。[Element.transform([tstr])](http://raphaeljs.com/reference.html#Element.transform)

在我看来，您可以做的是将句柄图像附加到 div，获取句柄的位置（x，y）并传递元素需要旋转的度数。

就代码而言，我目前没有任何代码，但如果我有机会，我会在接下来的几个小时左右想出一些东西

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-11T06:41:06.587

为什么不使用 jQuery UI Rotation 插件：请访问 -> [http://vremenno.net/js/jquery-ui-rotation-using-css-transform/](http://vremenno.net/js/jquery-ui-rotation-using-css-transform/) 并且您可以点击这里下载插件 -> [http:// /vremenno.net/examples/jquery-ui-rotation/jquery.ui.rotation.zip](http://vremenno.net/examples/jquery-ui-rotation/jquery.ui.rotation.zip)

# networking - 3G 换塔时 TCP 连接会发生什么？

> ID：16193538
> 
> 赞同：8
> 
> 时间：2013-04-24T13:40:14.550
> 
> 标签：networking, tcp, 3g

`IOError: request data read error`在 3G 网络上上传数据时，我随机进入Django 的 POST 处理程序。Django 引发特定异常的[问题已经得到解答](https://stackoverflow.com/questions/3823280/ioerror-request-data-read-error)（总结：据称发生在客户端断开 TCP 连接时）。但是，就我而言，我正在尝试解决根本问题。

从我缩小问题范围的尝试中，我发现：

*   无法在 WiFi 上重现
*   不能仅在 GPRS 上重现
*   可在各种类型的手机（Android 和 iPhone）和多个运营商上重现
*   在某些地方似乎没有发生
*   似乎发生在其他位置，尤其是当我可以看到数据速度指示器在`3G`,`H`和`H+`(UMTS, HSDPA 和 HSPA+)之间切换时

我的疯狂猜测是那里发生的事情是交换塔。那么当 3G 在塔之间切换时 TCP 连接会发生什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-09T19:04:41.210

当您在性能良好的网络中进行切换时，TCP 连接本身通常不会出现任何连接中断，即使发生这种情况，TCP 通常也会简单地退出并重试。

3G 网络中实际上存在不同类型的切换，具体取决于您要移动的“塔”在运营商接入网络中连接到什么，以及接入节点又在运营商核心网络中连接到什么。它还取决于核心网络的配置方式——一些网络将在接入节点和核心节点之间进行一对一的映射，而一些网络将允许接入节点池共享核心节点，这将减少在一个核心节点之间进行传输的可能性和另一个。

以下指南很好地概述了 3G 网络中的切换类型： [http ://www.3g4g.co.uk/Tutorial/ZG/zg_handover.html](http://www.3g4g.co.uk/Tutorial/ZG/zg_handover.html)

# wpf - 调用 IDataErrorInfo 时更改

> ID：16193541
> 
> 赞同：1
> 
> 时间：2013-04-24T13:40:24.867
> 
> 标签：wpf, validation, xaml, idataerrorinfo

我正在尝试将我的验证配置为仅在单击保存按钮时触发。我以前从未使用过 IDataErrorInfo，所以从一开始我就不太清楚如何设置它。我试图保持 MVVM 路径。有什么我可以调用来手动验证我的字段单击保存按钮吗？

实施：

```
 IDataErrorInfo 
```

文本框 XAML：

```
 Text="{Binding Name, Mode=TwoWay, ValidatesOnDataErrors=True}" /> 
```

代码：

```
 public string Error
    {
        get { throw new NotImplementedException(); }
    }

    public string this[string columnName]
    {
        get
        {
            if (columnName == "Name")
            {
                if (!Name.Length() >= 6)
                {
                    return "Name must be 6 chars.";
                }
                else
                {
                    return null;
                }
            }
            return null;
        }
    } 
```

保存命令：

```
 private void Save() {
       //db save, etc..
       Need to validate all properity fields

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T20:49:30.753

我使用 IValidateableObject。如果您的对象类实现了此接口，它公开了您可以覆盖的 validate 方法，那么您可以仅在需要时在 object.validate 上调用此验证。它返回真或假。在该验证函数中，您可以遍历对象属性并根据您的自定义 bunisness 逻辑将所需的列添加到 IDataerrorInfo。我通过创建一个由我的模型/对象类继承的 Validationbase 类来做到这一点。

这是我的验证基类的示例，您可以将其继承到模型/对象类中：

```
using Microsoft.VisualBasic;
using System;
using System.Collections;
using System.Collections.Generic;
using System.Data;
using System.Diagnostics;
using System.ComponentModel;
using System.Collections.Concurrent;
using System.ComponentModel.DataAnnotations;
using System.ComponentModel.DataAnnotations.Schema;

public class ValidationBase : IValidatableObject, IDataErrorInfo, INotifyPropertyChanged
{

         #region "DECLARATIONS"
         protected Dictionary<string, string> _propertyErrors = new Dictionary<string, string>();
         protected List<ValidationResult> _validationResults = new List<ValidationResult>();
         public bool HasErrors {
                 get { return (_propertyErrors.Count + _validationResults.Count) > 0; }
         }
         #endregion
         #region "IValidatableObject IMPLEMENTATION"
         public virtual IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
         {
                 return null;
         }
         #endregion
         #region "iDataError OBJECTS"
         //Returns an error message
         //In this case it is a general message, which is
         //returned if the list contains elements of errors
         public string Error {
                 get {
                          if (_propertyErrors.Count > 0) {
                                   return "Object data is invalid";
                          } else {
                                   return null;
                          }
                 }
         }

         public string this[string columnName] {
                 get {
                          if (_propertyErrors.ContainsKey(columnName)) {
                                   return _propertyErrors[columnName].ToString();
                          } else {
                                   return null;
                          }
                 }
         }

         #endregion
         #region "IDataError FUNCTIONS"
         //Adds an error to the collection, if not already present
         //with the same key
         protected void AddError(string columnName, string msg)
         {
                 if (!_propertyErrors.ContainsKey(columnName)) {
                          _propertyErrors.Add(columnName, msg);
                          OnPropertyChanged(columnName);
                 }
         }

         //Removes an error from the collection, if present
         protected void RemoveError(string columnName)
         {
                 if (_propertyErrors.ContainsKey(columnName)) {
                          _propertyErrors.Remove(columnName);
                          OnPropertyChanged(columnName);
                 }
         }
         public void ClearErrors()
         {
                 _propertyErrors.Clear();
         }
         #endregion
         #region "INotifyPropertyChanged IMPLEMENTATION"
         public event PropertyChangedEventHandler INotifyPropertyChanged.PropertyChanged;
         public delegate void PropertyChangedEventHandler(object sender, PropertyChangedEventArgs e);

         protected virtual void OnPropertyChanged(string propertyName)
         {
                 if (PropertyChanged != null) {
                          PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
                 }
         }
         #endregion

} 
```

如果您使用实体框架作为模型，我相信将在通过 db.SaveChanges 保存对象之前调用 validate 方法

以下是如何在模型中实现验证库：

```
using Microsoft.VisualBasic;
using System;
using System.Collections;
using System.Collections.Generic;
using System.Data;
using System.Diagnostics;
public partial class vendor : ValidationBase
{

    #region "PROPERTIES"
    public bool HasChanges { get; set; }
    #endregion

    #region "VALIDATION FUNCTIONS"

    public override IEnumerable<ComponentModel.DataAnnotations.ValidationResult> Validate(ComponentModel.DataAnnotations.ValidationContext validationContext)
    {
        return base.Validate(validationContext);
        PropertyValitaion(true);
    }

    public void PropertyValitaion(bool bAllProperties, string sProperty = "")
    {
        //your property specific logic goes here

    }
    #endregion

} 
```

# dbcontext - Xceed DataGrid QueryableSource and DbContext

> ID：16193542
> 
> 赞同：1
> 
> 时间：2013-04-24T13:40:29.290
> 
> 标签：dbcontext, xceed

I'm trying implement DataGridVirtualizingQueryableCollectionViewSource like documentation: [http://doc.xceedsoft.com/products/xceedwpfdatagrid/Xceed.Wpf.DataGrid.v4.5~Xceed.Wpf.DataGrid.DataGridVirtualizingQueryableCollectionViewSource.html](http://doc.xceedsoft.com/products/xceedwpfdatagrid/Xceed.Wpf.DataGrid.v4.5~Xceed.Wpf.DataGrid.DataGridVirtualizingQueryableCollectionViewSource.html)
Using ObjectContext API everything is normal.
However when using DbContext API, the cells content aren't showed.
Does anyone know anything about this?

```
/// <summary>
/// WITH THIS WORKS.
/// </summary>
public partial class AdventureWorksEntities : ObjectContext 

/// <summary>
/// WITH THIS DOES NOT WORK.
/// </summary> 
public partial class AdventureWorksEntities : DbContext 
```

My source below:

```
<Grid xmlns:xcdg="http://schemas.xceed.com/wpf/xaml/datagrid">
    <Grid.Resources>

        <xcdg:DataGridVirtualizingQueryableCollectionViewSource 
            x:Key="cvs_queryableSource"
            QueryableSource="{Binding Path=QueryableSource}"/>

    </Grid.Resources>
    <xcdg:DataGridControl ItemsSource="{Binding Source={StaticResource cvs_queryableSource}}">
    </xcdg:DataGridControl>
</Grid>

public partial class MainWindow : Window
{
    public MainWindow()
    {
        this.DataContext = this;
        InitializeComponent();
    }

    public IQueryable QueryableSource
    {
        get
        {
            if (m_queryable == null)
            {
                m_northwind = new AdventureWorksEntities();
                m_queryable = m_northwind.Contact;
            }
            return m_queryable;
        }
    }

    private AdventureWorksEntities m_northwind;
    private IQueryable m_queryable;
} 
```

Thank you!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T20:20:25.973

我不知道为什么，但我的查询中的一个简单 OrderBy 解决了这个问题。

```
public IQueryable QueryableSource
{
    get
    {
        if (m_queryable == null)
        {
            m_northwind = new AdventureWorksEntities();
            m_queryable = m_northwind.Contact.OrderBy(p => p.SomeField);
        }
        return m_queryable;
    }
} 
```

再次感谢！

# r - 如何创建包含星期几的向量？

> ID：16193549
> 
> 赞同：11
> 
> 时间：2013-04-24T13:40:36.317
> 
> 标签：r

我经常需要一个包含星期几的向量，但我总是把它打出来：

```
days.of.week <- c("Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday") 
```

这很容易，因为它很短，但总是有错别字的可能性。有没有办法以编程方式创建一个包含星期几的向量？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-24T13:45:46.497

一种可能：

```
days.of.week <- weekdays(Sys.Date()+0:6) 
```

总是从星期一开始：

```
days.of.week <- weekdays(as.Date(4,"1970-01-01",tz="GMT")+0:6) 
```

或者您可以按照自己的方式定义它，但是在您的`.Rprofile`, 所以它在启动时总是可用的。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-24T13:47:24.800

你去吧，工作日的向量“星期一”，...，“星期日”：

```
days.of.week <- weekdays(x=as.Date(seq(7), origin="1950-01-01")) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T15:37:26.033

虽然基于函数的答案很巧妙，但 Joshua 的最后一条评论很到位。如果你有一个经常使用的变量，要么在你的变量中创建它，要么从文件中`.Rprofile`加载它，使用类似 .`.Rdata``.Rprofile``load('daysofweek.rdata')`

请注意，更改一周的第一天就像

`neworder <- days.of.week[c(2:7,1)]`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-15T14:15:42.387

另一种方法是使用`weekdays`with `ISOdate`：

```
weekdays(ISOdate(1, 1, 1:7))
#[1] "Monday"    "Tuesday"   "Wednesday" "Thursday"  "Friday"    "Saturday"  "Sunday" 
```

`Sys.setlocale`并且可以使用其他语言来获取它。

```
Sys.setlocale("LC_TIME", "de_DE.UTF-8")
#[1] "de_DE.UTF-8"

weekdays(ISOdate(1, 1, 1:7))
#[1] "Montag"     "Dienstag"   "Mittwoch"   "Donnerstag" "Freitag"    "Samstag"    "Sonntag" 
```

也可以使用`format`

```
format(ISOdate(1, 1, 1:7), "%A")
#[1] "Monday"    "Tuesday"   "Wednesday" "Thursday"  "Friday"    "Saturday"  "Sunday" 
```

或获取缩写的工作日名称

```
format(ISOdate(1, 1, 1:7), "%a")
#weekdays(ISOdate(1, 1, 1:7), TRUE) #Alternative
#[1] "Mon" "Tue" "Wed" "Thu" "Fri" "Sat" "Sun" 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-09-23T11:10:46.563

根据今天的日期，我们还可以找到一周中的几天

```
weekdays(as.Date(seq(7),origin=Sys.Date() - as.POSIXlt(Sys.Date())$wday ))
 [1] "Monday"    "Tuesday"   "Wednesday" "Thursday"  "Friday"    "Saturday" 
 [7] "Sunday" 
```

# javascript - Javascript 如果只在函数外工作

> ID：16193552
> 
> 赞同：1
> 
> 时间：2013-04-24T13:40:39.397
> 
> 标签：javascript, html, scripting

我无法让我的 javascript 函数工作。

```
if (!cHp) { cHp = 200 }; 
```

像魅力一样工作，但是

```
function checkNull(x, y) {
if (!x) { x = y; }
} 
```

根本不起作用。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T13:43:26.473

它确实有效，但对您没有任何好处，因为 JavaScript 纯粹是按值调用。这意味着在您的函数中，参数“x”和“y”包含调用环境中存在的值的*副本*。

因此，

```
checkNull(b, 2 + 17); 
```

导致将变量“b”的值和数字 19 的副本传递给函数。该函数可以对“x”和“y”做任何它想做的事情，但这对调用上下文中的变量“b”没有影响。

*编辑*- 可以扩展这个话题并切断过长的评论线程，让我们谈谈“按值调用”（以及，相比之下，“按引用调用”）的含义。在按值调用参数传递方案中，调用环境中的实际参数值被复制到被调用函数的参数变量中。在按引用调用方案中，对调用环境中某种变量的引用被传递给被调用函数。这两者有什么不同？

在按值调用方案中，会发生以下情况：

```
var a = 1;
function change(b) {
  b = 2;
}

change(a);
alert(a); // still 1 
```

然而，在按引用调用的方案中，这是真的：

```
// FANTASY CODE - NOT REAL JAVASCRIPT
var a = 1;
function change(b) {
  b = 2;
}

change(a);
alert(a); // it is 2 in this fantasy call-by-reference code 
```

请注意，引用调用方案的一个含义是调用环境中的实际参数必须是变量或对象属性或其他东西；也就是说，它必须是编程语言术语中所谓的“左值”。另一种说法是它必须是可以出现在赋值表达式左侧的东西。

由于 JavaScript 中的变量将对象作为它们的“值”，事情变得有点混乱。当您将对象分配给变量时：

```
var myObj = {}; 
```

您实际上是在分配对该对象的*引用。*这在 JavaScript 中是完全透明的，你真的不需要考虑它。处理对象值就像 JavaScript 中的原始值一样简单。然而，这意味着当一个对象值被传递给一个函数时，变量的*实际*值是对该对象的*引用*这一事实意味着 JavaScript 的按值调用语义看起来类似于 call-by -参考方案：

```
var a = { property: 1 };
function change(b) {
  b.property = 2;
}

change(a);
alert(a.property); // it's 2!! OMG call-by-reference! (not) 
```

是的，函数可以修改作为参数传递的对象的属性值。那是引用调用吗？ **不**，不是，至少如果您关心“引用调用”一词的含义，则不是。即使那个函数可以改变“property”属性的值，*它仍然不能改变“a”本身的值！* 这就是引用调用的意思。

现在还有其他很少见的参数传递方案。一种令人着迷的是 ALGOL 60 中的“按名称调用”。该方案所做的是将实际参数排序视为隐式函数，这样在被调用函数中对参数的引用将重新-评估参数表达式。还有“call-by-value/result”，表示实际参数是按值传递的，但是当函数返回时，函数中参数的then-current值被隐式复制回调用中的源变量环境。（该方案还要求实际参数是左值，如引用调用。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T14:13:51.277

您需要做的是让函数返回一个值并将返回值分配给一个变量。尝试这样的事情：

```
var checkNull = function (x, y) {
        if (!x) {
            return y;
        }
        return x;
    },
    cHp,
    testVar;

cHp = checkNull(testVar, 200);  // will return 200 since testVar is undefined

testVar = 100;

cHp = checkNull(testVar, 200);  // will return 100 since testVar is defined 
```

# jquery - jquery css和动画功能效率

> ID：16193554
> 
> 赞同：2
> 
> 时间：2013-04-24T13:40:40.807
> 
> 标签：jquery, css, performance, jquery-animate

所以我想知道你们对使用 jquery css 或 animate 属性动画对象的效率有何看法。例如..

```
$('button').click(function(){
     $('obj to change').css( 'pos', x );
}); 
```

这与 css 过渡属性一起使用

CSS：

```
transition:all 0.7s ease-in-out; 
```

VS

```
$('button').click(function(){
     $('obj to change').animate({ pos , 'x' });
}, 2000, function() { 
     // Animation complete.
}); 
```

提前感谢大家的输入，或者如果您有更好的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-12T12:26:03.697

CSS3 过渡是硬件加速的，因此您可以在支持的浏览器中看到巨大的性能提升。我强烈推荐使用[http://ricostacruz.com/jquery.transit/](http://ricostacruz.com/jquery.transit/) - 它会检测浏览器是否支持 css3 转换并在旧浏览器上回退到常规的 .animate() 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-12T18:30:21.957

我一直使用 css 过渡，并且总是将 jquery 动画视为后备选项。如果您还没有，请开始在您的项目中使用 Modernizr ( [http://modernizr.com](http://modernizr.com) )——它是一个特征检测库。您可以根据浏览器支持的内容实现回退，因此在这种情况下：

```
$('button').click(function(){
    // Does the browser support csstransitions?
    if (Modernizr.csstransitions) {
        // If so, change the css and let the browser animate the transition
        $('obj to change').css( 'pos', x );
    } else {
        // Otherwise use jQuery to animate the transition
        $('obj to change').animate({ pos , 'x' });
    }
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-12T12:36:55.843

jQuery 非常适合创建适用于大多数浏览器的动画，但会随着并发动画数量的增加而迅速下降，特别是如果您使用花哨的缓动函数（来自 jquery.easing.js）。

随着并发动画水平的提高，CSS3 动画的表现会更好。但是它们可以在更多 b 中得到支持 你对 CSS3 动画的控制较少，而且它们更难以跟踪，特别是如果你在 js 中使用回调函数。

就我个人而言，我总是喜欢 jQuery 动画。永远不要对 CSS3 浏览器支持太确定！

# php - Retrieve link created by htacces file using php

> ID：16193556
> 
> 赞同：3
> 
> 时间：2013-04-24T13:40:49.227
> 
> 标签：php, html, .htaccess

I am trying to retrieve an url form the Adress bar in a joomla enviroment.

The URL´s are put together with HTACCES i think.. Wich causes url to look like this:

```
www.myadress.com/webshop/category/shopitem/flypage.tpl.php 
```

Now when i use a server request URI it will give me something like this:

```
/index.php?option=com_virtuemart&Itemid=41&category_id=25&flypage=flypage.tpl&lang=nl&limitstart=0&page=shop.product_details&product_id=59 
```

Anybody that can help me with this? I need it to build a custom crumbmenu..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T21:00:00.650

取决于服务器，但有时这些是可用的。

```
$_SERVER['REDIRECT_SCRIPT_URL']

$_SERVER['REDIRECT_SCRIPT_URI'] 
```

如果这不起作用，我会尝试从 .htaccess 设置自定义全局，如另一个问题[中所述。](https://stackoverflow.com/questions/8781181/how-to-set-a-custom-global-from-htaccess)

# c++ - why C++ have a reference type "&"?

> ID：16193557
> 
> 赞同：1
> 
> 时间：2013-04-24T13:40:58.183
> 
> 标签：c++

C++ has already have pointer type, and it is already very powerful, but it also have reference type, whose most work can also be done by pointer, so what's the advantage of reference type? why C++'s creator added this type into it?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:41:50.557

首先，它表明对象不能为空。

其次，它不能被赋值为指向另一个变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T13:42:52.133

答案是“复制构造函数”。

C++ 是一种基于值的语言。当你说的时候`Foo x; Foo y = x;`，你需要一种方法`y`来获得与`x`. 为此，您需要一个复制构造函数。复制构造函数必须将对象作为参数`x`，但它不能*复制*它，因为这正是我们试图定义的操作。

所以它必须通过*引用*来获取参数。

（你本*可以*让复制构造函数行为怪异并获取地址，但这会出乎意料并且会使语言变得一团糟，尤其是考虑到它是从 C 语言演变而来的。新的类型特性是一种更清洁、更强大的解决方案。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T13:42:58.873

reference 仅在他的生命中引用一个对象，并且它必须有一个要引用的对象（不能为 null）。

**我相信**C++ 的创建者的目标是只使用引用（如 C#），但必须允许使用指针有两个原因： C++ 中的引用不够强大，无法拥有所有需要的功能，而 C++ 承诺与 C 具有反向可比性（C 编译 C++ 编译的所有内容）

# facebook - Facebook 实时更新不会将签到推送到业务页面

> ID：16193558
> 
> 赞同：1
> 
> 时间：2013-04-24T13:40:59.650
> 
> 标签：facebook, facebook-graph-api, real-time-updates

我为应用程序设置了实时更新，以获取页面字段提要和签入的实时更新。

该应用程序的权限是：

```
create_event 
create_note  
email  
export_stream  
friends_location  
manage_notifications  
manage_pages  
photo_upload  
publish_actions  
publish_checkins  
publish_stream  
read_friendlists  
read_page_mailboxes  
read_stream  
share_item  
sms  
status_update  
user_online_presence  
user_photos  
video_upload  
xmpp_login 
```

为了测试这一点，我创建了一个页面，然后订阅了应用程序以获取该页面的实时更新。

我通过发送一个`/PAGE_ID/tabs`带有相关身份验证令牌的帖子请求并`app_id`作为我在图形资源管理器上返回的应用程序 ID 来做到这一点`true`，虽然我收到了帖子的推送通知，但我仍然没有收到它们进行签到。

我在 Facebook 中为业务页面添加了一个位置，当用户在他们的手机上搜索地名时，它就会出现。

我错过了什么吗？还是签入已被弃用？

# merge - Merge sort recursions

> ID：16193559
> 
> 赞同：0
> 
> 时间：2013-04-24T13:41:02.197
> 
> 标签：merge, mergesort

I have a problem. I started to learn how merge sort works, and now I'm stuck. I don't understand second recursion in merge function.

```
int merge_sort(int input[], int p, int r)
{
      if ( p >= r ) return 0; 

        int mid = floor((p + r) / 2);
        merge_sort(input, p, mid);
        **merge_sort(input, mid + 1, r);** 
        merge(input, p, r);
} 
```

When first recursion is finished, I end up with something like this: Original array: 3 4 5 6 7 8

3 4 5 | 6 7 8

3 4 | 5

3 | 4

3

And then second recursion starts. So, my question is: does second recursion starts from array with only one element ( array with only one number, 3 in this case) or from original array ( 6 element array from beginning)? I hope you will understand what I mean. Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:08:18.787

我无法从您的代码中分辨出来，因为您总是在传递输入数组。但是是的，这个想法是分而治之，所以第一个电话应该是

合并排序：3 4 5 6 7 8

第一次递归：3 4 5

第二次递归：6 7 8

看看这张维基百科图片：[http ://en.wikipedia.org/wiki/File:Merge_sort_algorithm_diagram.svg](http://en.wikipedia.org/wiki/File:Merge_sort_algorithm_diagram.svg)

# asp.net-mvc-3 - SQL Server 表、视图和 EF 实体，我使用的是字符串类型的通用列，其中许多将为空。我在浪费空间吗？

> ID：16193561
> 
> 赞同：0
> 
> 时间：2013-04-24T13:41:02.777
> 
> 标签：asp.net-mvc-3, sql-server-2008, entity-framework, sql-server-2008-r2

我需要实现报表中存在的多种实体类型，如产品、客户等。这些实体的属性都可以是字符串。因为可能有相当多的这些“实体”，我不想为每一个创建很多很多表。因此，我创建了一个通用“类”表，其中包含多个 C1...C30 类型的列`varchar(max)`。

然后我为每个实体创建一个视图，例如`vwProduct`. 然后，我将这些视图映射到实体框架中，作为实体（即`Product`），我从中受益于所有 EF 优点，例如数据注释。我使用了一个很好的 EF 设计器工具，它使我也可以在一个地方管理 EF 模型。

但是，由于某些实体可能只有 5 个属性，因此会有许多 Cn 列保留为空。这是一个问题吗？我认为不是因为 SQL Server 2008 R2 已针对此类事情进行了优化。也许我应该使用更好的数据类型。

也不确定性能将如何受到影响，因为将通过视图查询/更新一个物理表的所有内容。然而，这又是企业 DBMS 存在的理由。

通用物理表、数据库视图和 EF（POCO 类）的组合对我来说似乎很强大，尤其是在 MVC 框架中。

想法？

非常感谢。

# git - What happens with the original commits between and after a "git rebase --onto"?

> ID：16193565
> 
> 赞同：2
> 
> 时间：2013-04-24T13:41:12.230
> 
> 标签：git

On the [git man page for rebase](ftp://www.kernel.org/pub/software/scm/git/docs/git-rebase.html) you can find one example for rebasing branches.

```
 H---I---J topicB
                       /
              E---F---G  topicA
             /
A---B---C---D  master 
```

The command `git rebase --onto master topicA topicB` would yield ...

```
 H'--I'--J'  topicB
            /
            | E---F---G  topicA
            |/
A---B---C---D  master 
```

... which is quite reasonable as far as I understand rebasing. Unfortunately the next example shows a different output. Basically it describes how rebasing can be used to remove commits:

```
E---F---G---H---I---J  topicA 
```

According to the man page calling `git rebase --onto topicA~5 topicA~3 topicA` would yield ...

```
E---H'---I'---J'  topicA 
```

..., and thus, "remove `F` and `G`".

But actually I don't see a big difference between the first and the second example:

```
 H---I topicA
       /
  F---G topicA~3
 /
E topicA~5 
```

So the result should be more like

```
 H'--I'--J'  topicB
/
| F---G  
|/
E 
```

Are `F` and `G` still there or are they really removed? At least `gitk` shows me `F` and `G` and even `H`, `I` and `J`. Are this unreachable commits? Will they be "garbage-collected" after some time? Or will there be forever on my disk (even pushed to a remote). Can this be applied on the first example as well? Are `H`, `I` and `J` still there?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:52:31.247

它们没有被删除，提交仍然存在，如果您知道提交，您可以检查它们、标记它们、创建分支等。 git reflog 命令可以帮助找到它们。

如果没有任何东西涉及它们，它们最终将被垃圾收集。[此](https://www.kernel.org/pub/software/scm/git/docs/git-gc.html)页面会告诉您更多相关信息。默认情况下是 90 天之后。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T16:39:43.460

之后原件`E---F---G---H---I---J`都*还在*。变基不能改变任何东西。认为它更像是为 rebase 下的每个提交生成一个补丁，然后将其应用于正在创建的新分支。`F`并且`G`没有被删除；从`G`to的变化`H`在. 然后从to的变化在新的创造之上重播。最后，分支——只是一个指针——被重新指向，原来的分支从视图中消失了，因为现在没有任何东西指向它的任何部分。`E``H'``H``I``H'``I'``J'`

# jquery - 移动网站无法在黑莓上加载

> ID：16193567
> 
> 赞同：2
> 
> 时间：2013-04-24T13:41:16.847
> 
> 标签：jquery, jquery-mobile, asp.net-mvc-4, blackberry

我们有一个使用以下技术构建的移动网站解决方案：

*   Asp.net mvc 4（在 .net 4 中运行）
*   jQuery Mobile (v1.3.0)
*   jQuery 验证

有没有可能这些技术与黑莓的内置浏览器不兼容？

测试是在 Blackberry Bold 9900 (OS 7) 上完成的。

目前，当打开网站时，我们会收到页面正在加载的指示，一些元素会闪烁，然后它会停止并且只显示一个空白页面。下载 Opera for blackberry 后，网站显示正确。难道是黑莓浏览器已经过时了？

我知道这是一个非常模糊的问题。也许有人以前用黑莓经历过这种行为？我只是在寻找关于从哪里开始寻找的想法。

这是文档标题的代码片段，也许这可能是原因？

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>Ommited</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <link rel="icon" href="/jecon.ico" sizes="16x16 32x32 72x72" type="image/vnd.microsoft.icon">
        <meta name="description" content="Ommited"
        <link href='http://fonts.googleapis.com/css?family=Lato:400,700,900,400italic,700italic,900italic' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
        <link rel="stylesheet" href="/Content/Ommited.css" />
    </head> 
```

在布局页面的底部，我们有：

```
<script src="/Scripts/jquery-1.7.1.js"></script>
        <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js" ></script>
        <script src="/Scripts/jquery.validate.js"></script>
        <script src="/Scripts/jquery.validate.unobtrusive.js"></script>
        <script>
            $(document).live('pageinit', function () {
                $.validator.unobtrusive.parse('form');
            });
        </script>
        @RenderSection("scripts", required: false)
    </body>
</html> 
```

上面解析了验证`document.live`以修复 ajax 请求后的表单（jquery mobile 做了很多）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T15:44:46.157

过去我在使用默认的黑莓浏览器时也遇到过同样的问题。我也在使用 jQuery Core 1.7.1，然后回到 1.6.4，问题得到了解决。那时 1.7.1 是可用的最新内核，而 1.6.4 是 jQuery Mobile 支持的最新内核，因此此时您可以升级而不是降级。

jQuery Mobile 网站建议将 jQuery Core 1.9.1 与 jQuery Mobile 1.3.1 一起使用（我不确定 1.3.0 是否相同，但似乎很有可能）。

*来源：http: [//jquerymobile.com/blog/2013/04/10/announcing-jquery-mobile-1-3-1/](http://jquerymobile.com/blog/2013/04/10/announcing-jquery-mobile-1-3-1/)*

# java - 按上次修改日期获取文件

> ID：16193571
> 
> 赞同：4
> 
> 时间：2013-04-24T13:41:25.403
> 
> 标签：java, file, directory

在 lastmodified 日期之前获取文件的最快方法是什么？我有一个包含一些 txt 文件的目录。用户可以按日期进行研究，我按最后修改日期（在 File[] 中）列出目录中的所有文件，然后搜索具有特定日期的正确文件。我使用使用 lastmodified 日期的集合排序来对我的文件进行排序。当我从本地驱动器获取文件时速度很快，但是当我想访问网络（专用网络）上的驱动器时，获取文件可能需要大约 10 分钟。我知道我不能比网络快，但是有没有比我的解决方案更快的解决方案？

我的代码示例：

```
File[] files = repertoire.listFiles();         

Arrays.sort(files, new Comparator<File>() {
    @Override
    public int compare(File o1, File o2) {
        return Long.valueOf(o2.lastModified()).compareTo(o1.lastModified());
    }
});

for (File element : files) {
    // i get the right file;
} 
```

谢谢你的帮助

**这是解决方案：**

```
Path repertoiry = Paths.get(repertoire.getAbsolutePath());
final DirectoryStream<Path> stream = Files.newDirectoryStream(repertoiry, new DirectoryStream.Filter<Path>() {
     @Override
     public boolean accept(Path entry) throws IOException {
          return Files.getLastModifiedTime(entry, LinkOption.NOFOLLOW_LINKS).toMillis() >= (dateRechercheeA.getTime() - (24 * 60 * 60 * 1000)) && Files.getLastModifiedTime(entry, LinkOption.NOFOLLOW_LINKS).toMillis() <= (dateRechercheeB.getTime() + (24 * 60 * 60 * 1000));
     }
});
for (Path path : stream) {
     if (!path.toFile().getName().endsWith("TAM") && !path.toFile().getName().endsWith("RAM")) {
         listFichiers.add(path.toFile());
     }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T14:46:26.230

使用 java 7 NIO 包，可以过滤目录以仅列出所需的文件。
（警告`DirectoryStreams`不要遍历子目录。）

```
Path repertoire = Paths.get("[repertoire]");
try ( DirectoryStream<Path> stream = Files.newDirectoryStream(repertoire, new DirectoryStream.Filter<Path>() {
        @Override
        public boolean accept(Path entry) throws IOException {
            return Files.getLastModifiedTime(entry, LinkOption.NOFOLLOW_LINKS).toMillis() = [DATE_SEARCHED (long)] 
        }
 })){

     for (Path path : stream) {
          // Path filtered...
     }
 } 
```

通常，此解决方案比创建完整的文件列表、对列表进行排序并在此之后遍历列表以找到正确的日期提供更好的性能。

使用您的代码：

```
//use final keyword to permit access in the filter.
final Date dateRechercheeA = new Date();
final Date dateRechercheeB = new Date();

Path repertoire = Paths.get("[repertoire]");
try (DirectoryStream<Path> stream = Files.newDirectoryStream(repertoire, new DirectoryStream.Filter<Path>() {
    @Override
    public boolean accept(Path entry) throws IOException {
        long entryDateDays = Files.getLastModifiedTime(entry, LinkOption.NOFOLLOW_LINKS).to(TimeUnit.DAYS);
        return !entry.getFileName().endsWith("TAM") //does not take TAM file
                && !entry.getFileName().endsWith("RAM") //does not take RAM file
                && ((dateRechercheeB == null && Math.abs(entryDateDays - TimeUnit.DAYS.toDays(dateRechercheeA.getTime())) <= 1)
                || (dateRechercheeB != null && entryDateDays >= (TimeUnit.DAYS.toDays(dateRechercheeA.getTime()) - 1) && entryDateDays <= (TimeUnit.DAYS.toDays(dateRechercheeA.getTime()) + 1)));
    }
})) {
    Iterator<Path> it = stream.iterator();
    //Iterate good file...

} 
```

过滤器直接在接受方法中而不是之后。

[JAVA SE 7 - 文件 - newDirectoryStream()](http://docs.oracle.com/javase/7/docs/api/index.html?java/nio/file/Files.html)

# python - How do I perform secondary sorting in python?

> ID：16193578
> 
> 赞同：34
> 
> 时间：2013-04-24T13:41:42.120
> 
> 标签：python

If i have a list of numbers `[4,2,5,1,3]` I want to sort it first by some function `f` and then for numbers with the same value of `f` i want it to be sorted by the magnitude of the number.

This code does not seem to be working.

```
list5 = sorted(list5)
list5 = sorted(list5, key = lambda vertex: degree(vertex)) 
```

Secondary sorting first: list5 is sorted based on magnitude. Primary sorting next: list5 is sorted based on some function of the numbers.

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2013-04-24T13:44:18.320

按 (firstkey, secondkey) 元组对其进行排序：

```
sorted(list5, key=lambda vertex: (degree(vertex), vertex)) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-04-12T04:04:47.073

[来自关于排序](https://docs.python.org/3/howto/sorting.html#sortinghowto)的 Python 3 文档

```
from operator import itemgetter, attrgetter
student_objects = [
    Student('john', 'A', 15),
    Student('jane', 'B', 12),
    Student('dave', 'B', 10),
]
student_tuples = [
    ('john', 'A', 15),
    ('jane', 'B', 12),
    ('dave', 'B', 10),
]

#The operator module functions allow multiple levels of sorting. For example, to sort by grade then by age:

sorted(student_tuples, key=itemgetter(1,2))
sorted(student_objects, key=attrgetter('grade', 'age')) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-24T13:49:45.070

在电话上，但您可以按元组排序。

```
sorted(list5, lambda x: (degree(x),x)) 
```

如果需要，请不要忘记反向标志。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-24T22:33:25.550

这就是我会做的。

```
s = ['a', 'ac', 'b', 'ab']
s.sort(key=lambda x: (x[0], x[1]) if len(x)>1 else (x[0],)) 
```

结果：

```
['a', 'ab', 'ac', 'b'] 
```

# dynamics-crm - MS Dynamics CRM 快速查找

> ID：16193583
> 
> 赞同：1
> 
> 时间：2013-04-24T13:42:01.280
> 
> 标签：dynamics-crm, quick-search

例如，我有一个带有“描述”字段的实体。在“添加查找列”中该实体的设置中，我检查了“描述”字段。“描述”有以下文字：“关于实体的一些话”。当我输入快速查找字段文本“一些单词”时，我得到了我的实体，但是当我输入文本“关于实体”时，我什么也得不到。这看起来像搜索引擎尝试查找字段为“描述”的实体，该字段以“某些单词”开头，但不会尝试查找哪些包含键入的文本。我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T13:50:54.840

尝试在搜索词组前后添加 *。

所以搜索：`*about entity*`

* 充当任意数量字符的通配符。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-02-18T09:39:30.267

我找到了答案。

1.  转到以下路径并找到“stage.js”文件“C:\Program Files\Microsoft Dynamics CRM\CRMWeb_static_common\scripts\”

2.  在进行任何修改之前创建此文件的备份副本，以便您也拥有原始副本

3.  在 EmEditor 等文本编辑器中打开“stage.js”

4.  找到下面这行代码：sFindCriteria=Trim(findCriteria.value.replace(/[*]+/,"*"));findCriteria.value=sFindCriteria;

5.  现在将其更改为： sFindCriteria=Trim(findCriteria.value.replace(/[*]+/," *"));if (sFindCriteria != "" && sFindCriteria.substr(0, 1) != "* ") sFindCriteria = "*" + sFindCriteria;findCriteria.value=sFindCriteria;

6.  保存文件并尝试快速查找以查看更改

# asp.net-mvc - 多个局部视图中的 Knockout foreach 循环内的 Kendo ComboBox

> ID：16193587
> 
> 赞同：0
> 
> 时间：2013-04-24T13:42:20.293
> 
> 标签：asp.net-mvc, knockout.js, kendo-ui, knockout-2.0, knockout-mvc

我有一个执行以下操作的视图：

```
 @Html.EditorFor(e => e.Items1WithLabels) @* Call partial *@
  @Html.EditorFor(m => m.Items2WithLabels) @* Call partial *@
  @Html.EditorFor(m => m.Items3WithLabels) @* Call partial *@

@* more stuff *@

  <script type="text/javascript">

    $(function() {
      var data = @(Html.Raw(Json.Encode(@Model)));
      var vm = new viewModel(data); // created by js script
      ko.applyBindings(vm);

    });

        // validation and saving part (irrelevant)

  </script> 
```

局部视图仅因模型类型而有所不同，如下所示。

Kendo ComboBox 没有正确渲染，[Telerik 建议](http://www.kendoui.com/forums/mvc/combobox/strange-behavior-inside-tbody---combobox-won%27t-open.aspx)我使用后期处理事件。

```
@model AppName.ViewModels.Items1WithLabels

<table>
    <tbody data-bind="foreach: {data: Items1, afterRender: initCombo1}">
    <tr>
        <td>
        <input type="text" class="combo"/>             
        </td>
        @* Much more stuff, but omitting for simplicity
    </tr>
    @* Much more stuff, but omitting for simplicity
    </tbody>
</table> 
```

Items1 嵌入到 viewModel 中，因此我可以将它们作为 vm.Items1 访问。我也有需要作为 vm.Item1Labels 进入 ComboBox 的标签列表，但根据 Telerik 必须在后处理事件中使用它，这对我来说很好。

基本上遵循 Telerik 的建议，我需要将`initCombo1:`... `initCombo2:`... 等嵌入到 my`ko.applyBindings(vm)`中，但正如您在上面的初始视图中看到的那样，它已经与预构建的 viewModel 一起使用。

如果我按照 Telerik 的要求做，它看起来像这样：

```
ko.applyBindings({
    Items1: vm.Items1,
    initCombo1: function (elements, item) {
        $(elements).find(".combo").kendoComboBox({
        dataSource: vm.Items1Labels,
        index: 3,
        placeholder: "Select ...",
        suggest: true
        });
    }
    Items2: vm.Items2,
    initCombo2: function (elements, item) {
        $(elements).find(".combo").kendoComboBox({
        dataSource: vm.Items2Labels,
        index: 1,
        placeholder: "Select ...",
        suggest: true
        });
    }
  }); 
```

这对我来说看起来非常人为和不必要的混乱，我不确定它是否会起作用，因为它是从多个局部视图调用的......

哪位懂knockout的大神帮忙看看！如何正确而优雅地做到这一点，所以它最终会起作用

# machine-learning - 使用 Weka 预测 Google Play 评分

> ID：16193589
> 
> 赞同：1
> 
> 时间：2013-04-24T13:42:21.530
> 
> 标签：machine-learning, google-play, weka, metrics, prediction

我是 Weka 3.7.9 的新手。我有一个 arff 文件，其中包含这些属性、类和数据： http: [//pastebin.com/s8hivv0U](http://pastebin.com/s8hivv0U)

此文件代表 Android 项目。所以，1-9。属性是不同类型的指标：

1.  lloc - 逻辑代码行
2.  nid - ID 数
3.  nle - 嵌套级别
4.  nel - 元素数
5.  nip - 输入元素的数量
6.  activites - 来自 AndroidManifest 的活动数量
7.  inside-permissions - 来自 AndroidManifest 的内部权限数
8.  outside-permissions - 来自 AndroidManifest 的外部权限数
9.  all-permissions - 来自 AndroidManifest 的权限数
10.  {4、4.6、3.8、2.6 类。5、3.2、3.6、4.2、4.1}

最后一个是包含 Google Play 项目评级的类。

所以每一行都是Andorid项目。（当然，原始的 *.arff 文件包含更多的项目......）

我想用学习算法分析数据。预测变量从 1 到 9。我想确定哪些预测变量对 Google Play 评分的影响最大。

我怎样才能做到这一点？最好的方法是什么？如果可能的话，我想请你向我解释一下。

在此先感谢，彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T01:20:14.797

## 班级类型

首先，如果您希望输出是连续的，我建议您将`class`类型更改为 。`numeric`否则，我建议将类标签类型保留为`nominal`（就像您现在拥有的那样），但将您的评级更改为`{1, 2, 3, 4, 5}`.

如果您更改为数字输出（例如，您可以给出 4.5 星的预测），那么您将需要使用能够进行数字类的分类器。

## 使用 Weka

我建议查看[文档](http://www.cs.waikato.ac.nz/ml/weka/documentation.html)以了解有关使用 Weka 的更多信息，可能通过阅读一些教程。例如，双击您的 ARFF 文件后，您应该在`Classify`选项卡中完成大部分工作。选择一个分类器，然后选择`Start`。

## 分类器

### 回归

[回归](https://en.wikipedia.org/wiki/Regression_analysis)，特别是[线性回归](https://en.wikipedia.org/wiki/Linear_regression)很好，因为它很容易解释，因为它只是为每个属性分配一个权重，并使用这些权重的乘法和加法来给出输出。

我使用了您的示例文件并`LinearRegression`用.`3.9667``0.4722`

不满意，接下来我试`SimpleLinearRegression`了 ，它给出了一个模型 `-0.02 * activites + 4.13`，并且会给出一个 的平均绝对误差`0.472`。

`SMOreg`给出以下模型

```
weights:
 +       0.1147 * (normalized) lloc
 -       0.0404 * (normalized) nid
 -       0.1662 * (normalized) nle
 -       0.0647 * (normalized) nel
 +       0.3385 * (normalized) nip
 -       0.1352 * (normalized) activites
 -       0.019  * (normalized) inside-permissions
 -       0.0464 * (normalized) outside-permissions
 +       0.1602 * (normalized) all-permissions
 +       0.5921 
```

并且平均绝对误差为`0.3859`. 但在这一点上，我认为数据点如此之少，你的数据就[过拟合](https://en.wikipedia.org/wiki/Overfitting)了。

### 最近的邻居

如果您有更多数据（在 Weka 中称为） ，使用[k 最近邻](https://en.wikipedia.org/wiki/K-nearest_neighbors_algorithm)可能是一种可行的方法。`KStar`

### 决策树

该`DecisionStump`算法输出该模型的平均绝对误差为`0.3424`，但也可能过度拟合。

```
inside-permissions <= 1.5 : 2.6
inside-permissions > 1.5 : 4.090909090909091
inside-permissions is missing : 3.966666666666667 
```

## 更多数据

如您所见，考虑到您只有 12 个数据点，模型和错误率并没有那么高。要建立一个非常好的模型，您需要更多的数据。要准确了解模型的运行情况，您不仅需要有足够的数据进行训练，还需要有足够的数据作为单独的测试集保存，仅用于测试模型的性能。

# php - MVC 模式：在视图中使用模型中的函数

> ID：16193591
> 
> 赞同：1
> 
> 时间：2013-04-24T13:42:26.283
> 
> 标签：php, codeigniter, model-view-controller

我一直在使用 CodeIgniter 开发一个 Web 应用程序。

我还实现了 MVC 结构之后的所有功能，但我不确定到目前为止我是否感到困惑......

如果我在视图中使用模型中的函数，是否违反了 MVC 模式？这是否被视为与模型交谈的视图？

让我展示一些代码：

我的控制器中的一个：

```
public function loader($page){
    #load pages if these settings will be loaded for sure
        if ( ! defined('BASEPATH')) exit('No direct script access allowed');

        $this->load->helper('url');
        $this->load->library('session');
        $this->load->model('app_model');
        $this->load->model('app_user_model');
        $this->load->view('app/header');
        $this->load->view($page);
        $this->load->view('app/footer');
    } 
```

我的模型中的一个：

```
public function submit_login($username, $pass){
    //try to login, if the login credentials are correct, set the user session to username.

        $this->db->select("name, PersonName");
        $this->db->where("name", $username);
        $this->db->where("pass", $pass);
        $result = $this->db->get("members");

        if ($result->num_rows() > 0){
            foreach($result->result() as $user){
                $this->session->set_userdata('user_name', $user->PersonName);
                $this->session->set_userdata('user', $user->name);
            }
            return 1;
        }return 0;
    } 
```

部分观点：

```
$is_login = $this->app_user_model->is_loggedin();

if($is_login){
    //if user is logged in, prompt to log out
    echo "Welcome back ".$this->session->userdata['user_name'].".";
    echo anchor(base_url('profile/logout'), "logout" );
    echo "<br/>";
}else{

    echo validation_errors();
    //if user is not logged in, ask to log in first
    echo form_open('profile/login');

    $user_name = array(
                'maxlength'   => '25',
                'size'        => '55',
                'style'       => 'width:30%; margin-left:5%',
                'name'        => 'username',
                );

    //get the date 
    echo "<div class='user_name_input'>";
    echo "Username(email)";
    echo form_input($user_name, '', 'class="user_name"');
    echo "</div>"; 
```

在这种情况下，我从 user_model 调用 is_loggedin() ..

我是否正确遵循 MVC 模式？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T13:56:29.690

导致不要评判，但我认为你错过了 MVC 的重点。

url 调用相关的控制器，控制器调用模型层来获取数据并确定视图，然后调用正确的视图。

因此，在您的情况下，您调用登录控制器，该控制器调用模型来检查登录，并从那里显示注销按钮或错误。

我相信您可以按照自己的方式使用它，但是，我认为这是不正确的使用方式。

# sahi - Sahi 区分大小写的问题

> ID：16193600
> 
> 赞同：1
> 
> 时间：2013-04-24T13:42:47.673
> 
> 标签：sahi

我遇到过不同浏览器在不同情况下（上、下）返回字段的问题。在大多数情况下，以下方法对我有用：

```
_click(_link("/Next/i")); 
```

但是，我在网页上有一个名称中带有括号的项目，这种方法不起作用：

```
_assert(_isVisible(_link("/Noticeboard(Active Tab)/i"))); 
```

关于如何克服这个问题的任何想法？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-19T13:55:55.170

你可以试试：

_assert(_isVisible(_link("/Noticeboard\(活动标签\)/i")));

反斜杠是为了逃避“（”的真正目的。

# javascript - 如何更改父表单查找值

> ID：16193602
> 
> 赞同：0
> 
> 时间：2013-04-24T13:42:50.737
> 
> 标签：javascript, dynamics-crm-2011, crm

当我从现有机会中打开潜在客户，然后仅更改名字或姓氏的值时，更改也会反映在机会实体中的潜在客户查找中，因此我在联系实体的 onsave 中编写了一个脚本。

```
function getname()
{
    var lookupValue = new Array();
    lookupValue[0] = new Object();
    lookupValue[0].id = Xrm.Page.data.entity.getId();
    lookupValue[0].name = Xrm.Page.data.entity.attributes.get("firstname").getValue()+" " +Xrm.Page.data.entity.attributes.get("lastname").getValue();
    alert(Xrm.Page.data.entity.attributes.get("firstname").getValue()+" " +Xrm.Page.data.entity.attributes.get("lastname").getValue());
    lookupValue[0].entityType = "Contact";
    window.top.opener.Xrm.Page.data.entity.attributes.get("customerid").setValue(lookupValue);
            window.top.opener.Xrm.Page.data.entity.attributes.get("name").setValue(Xrm.Page.data.entity.attributes.get("firstname").getValue());

} 
```

如果您查看上面的代码，那么您会发现我已经设置了父查找的值，但是它没有用我已经更改了机会的文本框主题（名称）的值，所以它对我有用，但我不知道为什么在查找中没有工作。

如果您查看我上面的代码，您会发现一行 window.top.opener.Xrm.Page.data.entity.attributes.get("name").setValue(Xrm.Page.data.entity.attributes.get("名字").getValue()); 这个工作完美，但在查找时不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T14:53:26.793

序言：不支持这种代码。

如果你想让它工作，你只需要改变`name`属性，因为`id`并且`entityType`不会改变（至少你描述的行为）

最好还添加一个检查开瓶器内是否有字段：

```
function getname()
{
if (window.top.opener.Xrm.Page.getAttribute("customerid") != null)
{
    var previous = window.top.opener.Xrm.Page.getAttribute("customerid").getValue();
    previous[0].name = Xrm.Page.getAttribute("firstname").getValue() + " " + Xrm.Page.getAttribute("lastname").getValue();
    window.top.opener.Xrm.Page.getAttribute("customerid").setValue(previous);
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T14:04:38.193

查找对象将始终显示相关实体的主要属性。你无法改变这一点。因此，尝试设置该值不起作用我并不感到惊讶。它永远不会。

你想达到什么目的？为什么要更改查找中的显示以不代表它链接到的记录？

# ajax - Internet Explorer 9 未发布 AJAX 发布请求

> ID：16193605
> 
> 赞同：0
> 
> 时间：2013-04-24T13:42:58.013
> 
> 标签：ajax, forms, internet-explorer, post, submit

我的 javascript AJAX 代码如下。这在 Chrome 和 FF 中按预期工作，但在 IE 中，我发现 POST 变量永远不会`customer_savedesign.php`低于它，但它仍然在控制台中输出“得到结果”。我认为如果我们`.serialize()`在表单数据上使用 jquery 函数，IE 会起作用，但它仍然不起作用。我也没有使用`.submit()`，只是直接进行ajax调用。

```
 $.ajax({
           type: "POST",
           url: "customer_savedesign.php",
           data: $('#designform').serialize(), 
           success: function(data)
          {   arr = data.split(':');
              console.log("got result");
              // show response from the php script.
              console.log("arr1 is " + arr[1]);
           } 
       }); 
```

## 编辑

我的表格如下所示：

```
 <div class='lefttable'>
    <form id='designform' name='designform' method='post' action='customer_savedesign.php'> 
<table style='margin-top:20px;text-align:right; bidi-direction:rtl; font-size:12pt' class='form' id='arabic-fields'>

<tr><td>اسم الشركة</td></tr>
<tr><td> <textarea tabindex="1" type='text' class='large ar arindic expand20-60' id='ar_Company_Name' style='bidi-direction:rtl; text-align:right;'></textarea> </td></tr>

<tr><td>رسالة الشركة</td></tr>
<tr><td> <textarea type='text' tabindex="1" class='large ar arindic expand20-60' id='ar_Company_Message' style='bidi-direction:rtl; text-align:right;'></textarea> </td></tr>

</table>
<input type='button' id='newfield' class='ar newfield' value='نص جديد' />

<input type='hidden' id='state_history' style='width:300px; height:30px;' />
<input type='hidden' id='current_state' style='width:300px; height:30px;' />
<input type='hidden' name='designid' id='designid' value='<?php echo $d->getID(); ?>' />
<input type='hidden' name='parentid' id='parentid' value='<?php echo $d->getParentID(); ?>'/>
<input type='hidden' name='productid' id='productid' value='0'/>
<input type='hidden' name='templateid' id='templateid' value='0'/>
<input type='hidden' name='orientation' id ='orientation' value='<?php echo $orientation; ?>' />
<input type='hidden' name='side' id='side' value='<?php echo $side; ?>' />
<input type='hidden' name='userid' id='userid' value='<?php echo $user_id; ?>'/>
<input type='hidden' name='usertype' id='usertype' value='<?php echo $user_type; ?>'/>
<input type='hidden' name='designdata' id='designdata' />
<input type='hidden' name='designtag' id='designtag' />
<input type='hidden' name='orderdetailid' id='orderdetailid' value='<?php echo $order_detail_id; ?>' />
<input type='hidden' name='wasnew' id='wasnew' value='<?php echo $wasnew; ?>' />
<input type='hidden' name='action' id='action' value='<?php echo $_GET['action']; ?>' />
<input type='hidden' name='saveasaction' id='saveasaction'  />
</form>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:46:04.400

尝试使用 .serializaArray() 而不是 .serialize()。此外，不要在 IE 中使用 console.log()，因为如果控制台未打开，它将失败。

# iphone - 如何在没有过渡动画的情况下执行 segue

> ID：16193612
> 
> 赞同：31
> 
> 时间：2013-04-24T13:43:19.463
> 
> 标签：iphone, ios, ipad, storyboard

我有一个以导航控制器开头的应用程序。这个导航控制器可以打开模态视图控制器：

```
- (void)openModalController:(id)sender
{
    [self performSegueWithIdentifier:@"SegueIdentifier"];
} 
```

但是当用户使用 url 方案打开应用程序时，我想展示打开模式控制器的应用程序。所以我添加了一些方法并尝试了：

```
// Controller

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated]; // animated == NO in initial loading 

    if (_shouldOpenModalController) {
        [self openModalController:nil];
    }
}

- (void)setShouldOpenModalController:(BOOL)flag
{
    _shouldOpenModalController = flag;
}

// AppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    if (launchOptions) {
        UINavigationController *nc = (UINavigationController *)self.window.rootViewController;
        MyViewController *c = (MyViewController *)[ns topViewController];
        [c setShouldOpenModalController];
    }
} 
```

但这里有一个问题：`openModalController:`我在情节提要中设置的过渡动画执行转场。没有动画怎么办？这项任务还有另一种方法吗？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-04-24T14:29:40.787

在 Storyboard 中复制您的 segue，并为第二个提供不同的 ID。

然后，您可以在新版本中更改过渡。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2015-10-17T05:47:45.967

```
 self.performSegueWithIdentifier("loginSegue",sender: nil) 
```

[![在此处输入图像描述](https://i.stack.imgur.com/yYSUP.png)](https://i.stack.imgur.com/yYSUP.png)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-10-01T20:31:06.887

我正在使用此代码段请求授权`viewDidLoad`：

```
[UIView setAnimationsEnabled:NO];
self.view.hidden = YES;

[self performSegueWithIdentifier:@"segue_auth" sender:self];

dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(0.4 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^{
    [UIView setAnimationsEnabled:YES];
    self.view.hidden = NO;
}); 
```

授权后，后退转换会根据我的需要进行动画处理。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-01-01T14:19:15.423

我们可以的另一种方式

```
YourViewController *aYourViewController = [self.storyboard   instantiateViewControllerWithIdentifier:@"aYourViewControllerIdentifier"];
[self.navigationController pushViewController:aYourViewController animated:NO]; 
```

`@"aYourViewControllerIdentifier"`并在情节提要中添加to view 控制器。

# c# - ASP.NET MVC 表单提交到索引而不是提交到正确的操作

> ID：16193615
> 
> 赞同：1
> 
> 时间：2013-04-24T13:43:20.453
> 
> 标签：c#, asp.net-mvc, action, forms, http-post

我创建了一个用作局部视图的表单。

我在“保存”操作处放置了一个断点，当我单击提交按钮时，它会验证数据，但从未到达该操作，而是`Index`多次到达该操作！

这是代码：

```
@model Models.Category

@using (Html.BeginForm("Save", "Categories", FormMethod.Post))
{
  @Html.AntiForgeryToken()

  <fieldset>
    <legend>Category</legend>

    @Html.HiddenFor(model => model.CategoryId)

    <p>@((Model.CategoryId > 0 ? "Edit" : "New") + " category")</p>

    <div class="editor-label">
      @Html.LabelFor(model => Model.Title)
    </div>
    <div class="editor-field">
      @Html.EditorFor(model => Model.Title)
      @Html.ValidationMessageFor(model => Model.Title)
    </div>

    <div class="editor-label">
      @Html.LabelFor(model => Model.Description)
    </div>
    <div class="editor-field">
      @Html.EditorFor(model => Model.Description)
      @Html.ValidationMessageFor(model => Model.Description)
    </div>

    <p>
      <input type="submit" value="Save">
      @Html.ValidationSummary(true)
    </p>
  </fieldset>
} 
```

行动：

```
[HttpPost]
[ValidateAntiForgeryToken]
public ActionResult Save(Category category)
{
  throw new Exception("Exception has been thrown!");
} 
```

这是我点击“保存”时发生的屏幕截图，出现验证错误，但未`Save`调用该操作，也未引发异常。
相反，`Index`动作被触发！

![在此处输入图像描述](https://i.stack.imgur.com/gpil6.png)

我还可以检查什么来追踪问题？谁将页面重定向到索引？？？

[您可以在此处](http://jsfiddle.net/c9DHW/)查看输出 HTML 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T05:31:20.267

我在`RouteConfig.cs`文件中发现了问题。

有一个错误的映射混淆了路由，我猜它使用该`Index`操作作为默认操作，而不是由于设置错误而未找到的特定操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T13:46:21.540

尝试在方法中指定`Action`and ：`Controller``BeginForm`

```
Html.BeginForm("Save", "YourController", FormMethod.Post) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T14:25:40.407

您是否使用不显眼的验证？如果是这样，验证发生在客户端，假设您的模型指定 Title 是必需的，根据您的代码看起来很可能。

如果您希望无论验证状态如何都调用您的操作，您将需要在您的操作中进行验证，而不是通过不显眼的客户端验证。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-29T15:55:37.927

我认为这是由于 ValidateAntiForgeryToken 可能是您的操作方法未与您的表单请求映射删除此标签或根据本教程中的内容执行此操作：

*   [http://blog.stevensanderson.com/2008/09/01/prevent-cross-site-request-forgery-csrf-using-aspnet-mvcs-antiforgerytoken-helper/](http://blog.stevensanderson.com/2008/09/01/prevent-cross-site-request-forgery-csrf-using-aspnet-mvcs-antiforgerytoken-helper/)

并看到这个：

*   [ValidateAntiForgeryToken 用途、解释和示例](https://stackoverflow.com/questions/13621934/could-you-explain-validateantiforgerytoken-purpose-and-show-me-example-about-val)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-08T18:57:47.610

`[Authorize]`如果标签位于控制器的顶部，也会发生错误。如果用户未登录，`[AllowAnonymous]`则不会加载未标记的操作。

# asp.net - 使用 Asp.Net Cache，对空缓存的调用队列等待第一次调用是否更新了缓存？

> ID：16193623
> 
> 赞同：1
> 
> 时间：2013-04-24T13:43:32.387
> 
> 标签：asp.net, caching

我们正在使用 Asp.Net 缓存，通过将缓存属性放在我们要缓存的 WCF 方法上，因此我们无法控制缓存代码。

如果一个人有一个空缓存并获得 10 次相同类型的调用，其中第一次调用花费了很长时间以至于在第二次调用到达之前它没有更新缓存，那么第二次调用是否会尝试做同样的事情，依此类推，直到第一次调用更新了缓存？

我们正在使用 ASP.Net 缓存的 WCF 体验这种情况，并希望第二次调用等到第一次调用更新缓存。有办法吗？

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:51:26.433

您可以使用[lock 语句](http://msdn.microsoft.com/en-us/library/c5kehkcz%28v=vs.71%29.aspx)来阻止多个线程同时执行一段代码，例如：

```
 static object lockKey = new object();
    ..
    if(isInCache)
    {
     return cachedValue;
    }
    else
    {
     lock(lockKey)
     {
      //Code that updates cache
     }
    } 
```

# expression - WF。NativeActivity 中的 C# 表达式

> ID：16193628
> 
> 赞同：3
> 
> 时间：2013-04-24T13:43:51.757
> 
> 标签：expression, workflow-foundation

我正在尝试在 NativeActivity 中使用自定义 c# 表达式

它适用于简单的表达式，如*Condition = new CSharpValue("1 == 1")*

它不适用于此类表达式*Condition = new CSharpValue("Address == null")*

由于表达式编译错误“当前上下文中不存在名称‘xxxxx’”，我无法在表达式中引用活动的变量或 InArgument

**工作代码**

```
var act = new ExecuteIfTrue
{
    Condition = new CSharpValue<Boolean>("1 == 1"),
    Address = new InArgument<MailAddress>(ctx => new MailAddress { DisplayName = "TestDisplayName" }),
    Body = new WriteLine { Text = "Rest!" }
};

CompileCSharpExpressions<MailAddress>(act);
WorkflowInvoker.Invoke(act); 
```

**Non-Working 代码（参考 NativeActivity 的 InArgument）**

```
var act = new ExecuteIfTrue
{
    Condition = new CSharpValue<Boolean>("Address.Email == null"),
    //Condition = new CSharpValue<Boolean>("MailAddressVar == null"),
    Address = new InArgument<MailAddress>(ctx => new MailAddress { DisplayName = "TestDisplayName" }),
    Body = new WriteLine { Text = "Rest!" }
};

CompileCSharpExpressions<MailAddress>(act);
WorkflowInvoker.Invoke(act); 
```

**NativeActivity**

```
public class ExecuteIfTrue : NativeActivity
{
    [RequiredArgument]
    public InArgument<bool> Condition { get; set; }

    [RequiredArgument]
    public InArgument<MailAddress> Address { get; set; }

    public Variable<MailAddress> MailAddressVar;

    public Activity Body { get; set; }

    public ExecuteIfTrue()
    {
        MailAddressVar = new Variable<MailAddress> { Default = null };
    }

    protected override void Execute(NativeActivityContext context)
    {
        if (context.GetValue(this.Condition) && this.Body != null)
            context.ScheduleActivity(this.Body);
    }

    protected override void CacheMetadata(NativeActivityMetadata metadata)
    {
        metadata.AddImplementationVariable(MailAddressVar);
        base.CacheMetadata(metadata);
    }
}

public class MailAddress
{
    public String Email { get; set; }
    public String DisplayName { get; set; }
} 
```

**辅助方法**

```
public static void CompileCSharpExpressions<T>(Activity activity)
{
    var impl = new AttachableMemberIdentifier(typeof(TextExpression), "NamespacesForImplementation");
    var namespaces = new List<string> { typeof(T).Namespace };
    TextExpression.SetReferencesForImplementation(activity, new AssemblyReference { Assembly = typeof(T).Assembly });
    AttachablePropertyServices.SetProperty(activity, impl, namespaces);

    var activityName = activity.GetType().ToString();
    var activityType = activityName.Split('.').Last() + "_CompiledExpressionRoot";
    var activityNamespace = string.Join(".", activityName.Split('.').Reverse().Skip(1).Reverse());

    var settings = new TextExpressionCompilerSettings
    {
        Activity = activity,
        Language = "C#",
        ActivityName = activityType,
        ActivityNamespace = activityNamespace,
        RootNamespace = null,
        GenerateAsPartialClass = false,
        AlwaysGenerateSource = true,
        ForImplementation = false
    };

    var results = new TextExpressionCompiler(settings).Compile();

    if (results.HasErrors)
    {
        throw new Exception("Compilation failed.");
    }

    var compiledExpressionRoot = Activator.CreateInstance(results.ResultType, new object[] { activity }) as ICompiledExpressionRoot;
    CompiledExpressionInvoker.SetCompiledExpressionRoot(activity, compiledExpressionRoot);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-02T14:22:31.623

错误非常明确；您的表达式在范围内没有变量`MailAddressVar`。

原因是您需要将变量传递给表达式。该`ExecuteIfTrue`活动没有变量参数。

**而是尝试这样的事情：**

```
Variable<string> mailAddressVar = new Variable<string>(name: "MailAddressVar", defaultValue: null);

Activity seq = new Sequence
{
    Variables = { mailAddressVar },
    Activities = 
    {
        new ExecuteIfTrue
        {       
            //Condition = new CSharpValue<Boolean>("Address.Email == null"),
            Condition = new CSharpValue<Boolean>("MailAddressVar == null"),
            Address = new InArgument<MailAddress>(ctx => new MailAddress { DisplayName = "TestDisplayName" }),
            Body = new WriteLine { Text = "Rest!" }
        }
    }
};

ExecuteIfTrue.CompileCSharpExpressions<MailAddress>(seq);
WorkflowInvoker.Invoke(seq); 
```

# sqlite - 使用 Python 3 读取 SQLite 2 数据库

> ID：16193630
> 
> 赞同：0
> 
> 时间：2013-04-24T13:43:58.237
> 
> 标签：sqlite, python-3.x

我有一个旧的 SQLite 2 数据库，我想使用 Python 3（在 Windows 上）读取它。不幸的是，Python 的 sqlite3 库似乎不支持 SQLite 2 数据库。有没有其他方便的方法可以在 Python 3 中读取这种类型的数据库？我应该编译旧版本的 pysqlite 吗？这样的版本会与 Python 3 兼容吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-08T12:59:53.667

作为 pysqlite 的作者，我很确定还没有人将 pysqlite 1.x 移植到 Python 3。唯一有意义的解决方案是theomega建议的解决方案。

如果您只需要从 Python 访问数据以将它们导入其他地方，但无法执行 sqlite2 转储/sqlite3 恢复舞蹈，则有一个选项，但不方便：使用内置 ctypes 模块从SQLite 2 DLL。然后，您将自己实现一个最小版本的 pysqlite，它只包含您真正需要的内容。

# python - 如何使用 pyramid_sockjs 消息传递？

> ID：16193632
> 
> 赞同：2
> 
> 时间：2013-04-24T13:44:01.123
> 
> 标签：python, redis, rabbitmq, pyramid, gevent-socketio

我正在使用[pyramid_sockjs](https://github.com/fafhrd91/pyramid_sockjs)构建一个 Pyramid 应用程序。这个应用程序需要对来自 redis pub/sub 或 rabbitmq 的传入消息做出反应。我应该在哪里插入逻辑来监听消息系统并通过向 sockjs 客户端发送消息来做出反应？

我找到[了 socket.io 的这个链接](http://blog.abourget.net/2011/3/31/new-and-hot-part-6-redis-publish-and-subscribe/)，我想对 sockjs 和 Pyramid 做同样的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-06T15:01:31.103

假设您设置了一个金字塔配置，`config.include('pyramd_sockjs')`后跟`config.add_sockjs_route()`. 这里的一般困难是弄清楚如何获取应用程序当前的 sockjs-sessions。我在考虑三种情况：

1.  通常你会对来自你自己的子类中的消息做出反应，`pyramid_sockjs.session.Session`如[聊天示例](https://github.com/fafhrd91/pyramid_sockjs/blob/master/examples/chat.py)所示。
2.  从您的一个视图中广播消息就像调用一样简单`request.get_sockjs_manager().broadcast(some_message)`
3.  但是，如果您既不在 sockjs-messaging- 也不在 http-request-cycle 中，那么您必须求助于`registry`所有插件都会留下痕迹的金字塔。

在视频的[第 5 分钟](http://www.youtube.com/watch?feature=player_embedded&v=hrpO2pzzMUE#t=301)，您会写出这样的内容：

```
def listener():
    r = redis.Redis()
    r.subscribe(['foo'])
    for msg in r.listen():
        from pyramid.threadlocal import get_current_registry
        get_current_registry().__sockjs_managers__[''].broadcast(msg) 
```

解释上述黑客：

*   `get_current_registry`通常[不鼓励](http://docs.pylonsproject.org/projects/pyramid/en/1.0-branch/api/threadlocal.html)使用，因为很难测试您的代码。它返回当前请求的或全局注册表——金字塔的中心核心组件。
*   对于`__sockjs_managers__`pyramid_sockjs 应该像为`request`.
*   空字符串是 pyramid_sockjs 的默认`name`属性（传递为 kw`add_sockjs_route`以更改它）

不幸的是，pyramid_sockjs 还没有提供“房间”，因此您的消息将被广播到所有连接的客户端，而无需任何先前的过滤机制。以帮助您可能想要子类化`pyramid_sockjs.session.Session`and `.SessionManager`。（如果你这样做，请告诉！）

# c# - EmguCV：如何转换使用指针和步骤的代码？

> ID：16193644
> 
> 赞同：0
> 
> 时间：2013-04-24T13:44:42.433
> 
> 标签：c#, .net, image-processing, emgucv

我正在尝试将使用 OpenCV 1.0 编写的开源库中的一些代码转换为 .NET 中的 EmguCV C#。

这是有问题的代码：

```
float* ptr = rotatedEdges->data.fl;
int step = rotatedEdges->step / sizeof(float);

for(i = 0; i < _LOCAL_ROT_DIVS; ++i)
{
    reRowPtrs[i] = ptr + i*step;
} 
```

我知道`rotatedEdges`有一个`Data`吸气剂，但这会返回一个二维浮点数组。在 OpenCV`data`中，一维浮点数组中的字段（如果我的记忆正确的话）。所以我想知道做这个循环的正确方法是什么，所以它做的事情完全相同？

谢谢！

***编辑***

[这是](http://code.google.com/p/cvaddon/source/browse/cvaddon_fast_sym/cvaddon_fast_sym_detect.cpp)我在评论中要求转换的代码页面。

# python - 递归解决方案的制定（循环变量）

> ID：16193645
> 
> 赞同：0
> 
> 时间：2013-04-24T13:44:43.383
> 
> 标签：python, recursion, for-loop

请考虑以下算法：

```
 for(j1 = n upto 0)
     for(j2 = n-j1 upto 0)
       for(j3 = n-j1-j2 upto 0)
        .
         .
           for (jmax = n -j1 - j2 - j_(max-1))
            {
             count++;
             product.append(j1 * j2 ... jmax); // just an example
            } 
```

如您所见，关于上述算法片段的一些相关点：

1.  我列出了一个具有可变数量的 for 循环的算法。
2.  我在每个最内层循环计算的结果被附加到一个列表中。该列表将增长到“计数”的维度。

这个问题是否适合递归？如果是，我真的不知道如何解决这个问题。我正在尝试用 python 编写代码，我不希望你们提供任何代码。只是一些正确方向的指针或示例。谢谢你。

这是示例案例[http://pastebin.com/PiLNTWED的初步尝试](http://pastebin.com/PiLNTWED)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:59:16.613

您还可以考虑使用*itertools*模块中的排列、组合或产品。如果您想要 i、j、k、... 的所有可能组合（即嵌套 for 循环），您可以使用：

```
for p in product(range(n), repeat=depth):
    j1, j2, j3, ... = p # the same as nested for loops
    # do stuff here 
```

但请注意，循环中的迭代次数呈指数增长！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-27T10:45:48.150

您的算法正在查找加起来等于或小于的非负整数的所有`m`-tuples（`m`作为伪代码的`max`下标）。在 Python 中，最自然的表达方式是使用递归生成器：`j``n`

```
def gen_tuples(m, n):
    if m == 0:
        yield ()
    else:
        for x in range(n, -1, -1):
            for sub_result in gen_tuples(m-1, n-x):
                yield (x,)+sub_result 
```

示例输出：

```
>>> for x, y, z in gen_sums(3, 3):
    print(x, y, z)

3 0 0
2 1 0
2 0 1
2 0 0
1 2 0
1 1 1
1 1 0
1 0 2
1 0 1
1 0 0
0 3 0
0 2 1
0 2 0
0 1 2
0 1 1
0 1 0
0 0 3
0 0 2
0 0 1
0 0 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T13:56:56.250

玩具示例将转化为一种尾递归，因此，就我个人而言，我不希望递归版本对代码审查和维护更有洞察力。

但是，要熟悉该原理，请尝试从单个循环中分解出不变的部分/常用术语并尝试识别模式（并最好在事后证明它！）。您应该能够修复要编写的递归过程的签名。用循环体固有的部分充实它（并且不要忘记终止条件）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T14:10:55.100

通常，如果要将`for`循环转换为递归调用，则需要将`for`语句替换为`if`语句。对于嵌套循环，您会将它们转换为函数调用。

练习时，首先对有效的代码进行愚蠢的翻译，然后尝试查看以后可以优化的地方。

为了让您有一个想法尝试适用于您的情况，我会翻译如下内容：

```
results = []
for i in range(n):
    results.append(do_stuff(i, n)) 
```

像这样：

```
results = []

def loop(n, results, i=0):
    if i >= n:
        return results
    results.append(do_stuff(i, n))
    i += 1
    loop(n, results, i) 
```

有不同的方法来处理返回结果列表，但您可以适应您的需要。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-27T11:56:00.273

-- 作为对 Blckgnht 优秀列表的回应 -- 这里考虑 n = 2 和 max = 3 的情况

```
def simpletest():    

    '''
    I am going to just test the algo listing with assumption
    degree n = 2
    max = dim(m_p(n-1)) = 3, 
    so j1 j2 and upto j3 are required for every entry into m_p(degree2)
    Lets just print j1,j2,j3 to verify if the function
    works in other general version where the number of for loops is not known
    '''
    n = 2
    count = 0
    for j1 in range(n, -1, -1):
        for j2 in range(n -j1, -1, -1):
            j3 = (n-(j1+j2)) 
            count = count + 1
            print 'To calculate m_p(%d)[%d], j1,j2,j3 = ' %(n,count), j1, j2, j3

    assert(count==6)        # just a checkpoint. See P.169 for a proof
    print 'No. of entries =', count 
```

此代码的输出（并且它是正确的）。

```
 In [54]: %run _myCode/Python/invariant_hack.py
To calculate m_p(2)[1], j1,j2,j3 =  2 0 0
To calculate m_p(2)[2], j1,j2,j3 =  1 1 0
To calculate m_p(2)[3], j1,j2,j3 =  1 0 1
To calculate m_p(2)[4], j1,j2,j3 =  0 2 0
To calculate m_p(2)[5], j1,j2,j3 =  0 1 1
To calculate m_p(2)[6], j1,j2,j3 =  0 0 2
No. of entries = 6 
```

# jquery - 使用 jQuery 和 JSON 显示来自 MeetUp API 的组

> ID：16193653
> 
> 赞同：0
> 
> 时间：2013-04-24T13:45:00.327
> 
> 标签：jquery, json, api, meetup

我正在尝试制作一个小部件，该小部件将根据其成员 ID 显示某人所属的聚会组。

这是我的 HTML 文件。

```
<!DOCTYPE html>
<html>
<head>
<title>Meetup Groups by Member ID</title>
<script type="text/javascript" src="http://jqueryjs.googlecode.com/files/jquery-1.3.2.min.js"></script>
<script>
$(document).ready(function(){
$.getJSON("https://api.meetup.com/2/groups?&sign=true&member_id=8377069&page=20&api&key=API_KEY&only=name,link", displayGroups);

function displayGroups(data) {
    var htmlString = "";
    $.each(data.items, function (i, item) {
        htmlString += '<h3><a href="' + item.link + '" target="_blank">' + item.name + '</a></h3>';
    });
    $('#groups').html(htmlString);
}
});
</script>
</head>

<body>
<div id="groups"></div>
</body>

</html> 
```

这是 JSON 输出（当我将请求 URL 放入浏览器时）：

```
{"results":[{"name":"The New York Python Meetup Group","link":"http:\/\/www.meetup.com\/nycpython\/"},{"name":"WordPress NYC Meetup Group","link":"http:\/\/www.meetup.com\/WordPressNYC\/"},{"name":"Coworking Community NYC","link":"http:\/\/www.meetup.com\/coworking-nyc\/"},{"name":"NYC Ruby Roundtable","link":"http:\/\/www.meetup.com\/nycruby\/"},{"name":"Why Leave Astoria?!","link":"http:\/\/www.meetup.com\/whyleaveastoria\/"},{"name":"#betaNYC, formerly Open NY Forum","link":"http:\/\/www.meetup.com\/betanyc\/"},{"name":"New York Open Statistical Programming Meetup","link":"http:\/\/www.meetup.com\/nyhackr\/"},{"name":"Django-NYC","link":"http:\/\/www.meetup.com\/django-nyc\/"},{"name":"NYC Redditors","link":"http:\/\/www.meetup.com\/NYC-Redditors\/"},{"name":"Startup Addicts NYC","link":"http:\/\/www.meetup.com\/startupddict\/"},{"name":"Woodside - Sunnyside Runners","link":"http:\/\/www.meetup.com\/Woodside-Sunnyside-Runners\/"},{"name":"NY HTML5 User Group","link":"http:\/\/www.meetup.com\/NY-HTML5-User-Group\/"},{"name":"Hacks\/Hackers New York","link":"http:\/\/www.meetup.com\/hackshackersny\/"},{"name":"New York City Geek Adventure Group","link":"http:\/\/www.meetup.com\/Astoria-Long-Island-City-Geek-Adventure-Group\/"},{"name":"Mukti's Kitchen","link":"http:\/\/www.meetup.com\/MuktisKitchen\/"},{"name":"Unearth Ruby","link":"http:\/\/www.meetup.com\/unearthruby\/"},{"name":"Awesome People of Sunnyside Queens Unite!","link":"http:\/\/www.meetup.com\/Awesome-People-of-Sunnyside-Queens-Unite\/"},{"name":"New York Data Visualization and Infographics","link":"http:\/\/www.meetup.com\/New-York-Datavisualization-and-Infographics\/"},{"name":"Google NYC Tech Talks","link":"http:\/\/www.meetup.com\/google-nyc-tech-talks\/"},{"name":"Crisismappers NYC","link":"http:\/\/www.meetup.com\/Crisismappers-NYC\/"}],"meta":{"lon":"","count":20,"signed_url":"http:\/\/api.meetup.com\/2\/groups?radius=25.0&order=id&desc=false&member_id=8377069&offset=0&format=json&only=name%2Clink&page=20&fields=&sig_id=8377069&sig=651d9c728df7bb62915fdc1fbae1b2b87d36c35b","link":"https:\/\/api.meetup.com\/2\/groups","next":"https:\/\/api.meetup.com\/2\/groups?key=4d366a414432e7e442d6eb1e124f&radius=25.0&order=id&member_id=8377069&format=json&page=20&desc=false&offset=1&only=name%2Clink&fields=&sign=true","total_count":26,"url":"https:\/\/api.meetup.com\/2\/groups?key=4d366a414432e7e442d6eb1e124f&radius=25.0&order=id&member_id=8377069&format=json&page=20&desc=false&offset=0&only=name%2Clink&fields=&sign=true","id":"","title":"Meetup Groups v2","updated":1366809331000,"description":"\"\"","method":"Groups","lat":""}} 
```

我在控制台中没有收到任何错误。页面上没有打印任何内容。任何想法我做错了什么？

编辑：我想不知何故我实际上并没有检索任何数据。当我测试 HTML 页面时，控制台没有显示响应，但当我在浏览器中运行 API 调用 URL 时显示响应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T14:44:55.207

赫普·德普。API 请求 URL 中需要**`?callback?`**。

完整答案：

```
<!DOCTYPE html>
<html>
<head>
    <title>Meetup Groups by Member ID</title>
    <script type="text/javascript" src="http://jqueryjs.googlecode.com/files/jquery-1.3.2.min.js"></script>
    <script type="text/javascript">
    $(document).ready(function(){
    $.getJSON("https://api.meetup.com/2/groups?callback=?&sign=true&member_id=8377069&page=20&api&key=API_KEY&only=name,link", 
function (data) {
    var htmlString = "";
    $.each(data.results, function (i, item) {
        htmlString += '<h3><a href="' + item.link + '" target="_blank">' + item.name + '</a></h3>';
    });
    $('#groups').html(htmlString);});
    });
    </script>
    </head>

    <body>
    <div id="groups"></div>
    </body>

    </html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T14:13:43.270

我确实认为该函数需要在用作回调之前定义。我会将其更改为：

```
$.getJSON("https://api.meetup.com/2/groups?&sign=true&member_id=8377069&page=20&api&key=API_KEY&only=name,link", 
function (data) {
    var htmlString = "";
    $.each(data.items, function (i, item) {
        htmlString += '<h3><a href="' + item.link + '" target="_blank">' + item.name + '</a></h3>';
    });
    $('#groups').html(htmlString);}); 
```

这避免了不必要的函数定义并使您的代码更清晰。

# c# - 引发异常的最小起订量设置功能不起作用

> ID：16193655
> 
> 赞同：9
> 
> 时间：2013-04-24T13:45:02.367
> 
> 标签：c#, unit-testing, moq

我有以下函数签名：

```
T SomeMethod(Expression<Func<T, string>> param1, 
             , params Expression<Func<T, object>>[] items); 
```

我希望它每次执行时都抛出异常。

我尝试进行以下设置：

```
myMock.Setup(x => x.SomeMethod(Moq.It.IsAny<Expression<Func<SomeClass, string>>>()))
      .Throws(new Exception()); 
```

一切正常，但是当我到达此方法时，它不会引发异常（尽管该对象是我的模拟对象）。

我假设我的设置不正确。

我尝试了很多变化，现在我有点沮丧。

我会放更多代码，但它受到限制。我想上传的每件作品都应该改变，所以请原谅我对信息的吝啬。

希望这已经足够了，有人可以帮助我。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-24T13:48:14.797

看起来问题出在`params`参数中。尝试将其添加到设置中

```
myMock.Setup(x => x.SomeMethod(
         Moq.It.IsAny<Expression<Func<SomeClass, string>>>()),
         Moq.It.IsAny<Expression<Func<T, object>>[]>())
      ).Throws(new Exception()); 
```

# list - Generating list of fixed value in alloy

> ID：16193660
> 
> 赞同：0
> 
> 时间：2013-04-24T13:45:29.750
> 
> 标签：list, alloy

I am trying to create a list of coins which denote a value.suppose 9 rs will contain a sequence 5->2->2 . 8rs will have 5rs->2rs->1rs. 7rs will have 5->2 . The coins can be of the type 10Rs, 5rs, 2rs,1rs. Here in this code tenr implies list of coins of value ten and tenrs implies coin of ten rs. How can I create such a list? I've been trying but all in vain . Also when I execute and click on show it shows multiple coins assigned to a single coin node. Any help will be appreciated. Actually I am trying to use it in a vending machine. I checked your code and I am currently trying to implement it . I am also providing my code for vending machine.

```
sig coin{}

sig oners,twors,fivers,tenrs,null1 in coin {}

sig list
{

next :  coin lone -> lone coin
}

sig oner,twor,threer,fourr,sixr,sevenr,eightr,niner,fiver,tenr,nullr in list {}

fact {
    //  all c:choco | all c1:choco -c | c1.choice != c.choice
    //  all m: machine| some n:m.null1 | some ors: m.oners| ors->n in (m.oner).next
    all  l:list| all c:coin| c->c not  in l.next
    all  l:list|no c : coin | (c in c.^(l.next ))
    //all m: machine| all o:m.oner | oners->null1 in o
   all o:oner| all n: null1|all l:list|oners->null1 in o.next and #n.(l.next)=0
            all n:nullr| all n1:null1| #n1.(n.next)= 1  and #(n.next).n1=0 and n1->null1 in n.next
    all t:tenr| all tr:tenrs | #tr.(t.next)= 1 and #(t.next).tr=0 and tr->null1 in t.next
all t:twor| all tr:twors | #tr.(t.next)= 1 and #(t.next).tr=0 and tr->null1 in t.next
} 
```

* * *

Vending machine

```
sig button {}

sig coin{}

sig choco{
    value:one coin,
    choice :one button
            }
fact {
        all c:choco | all c1:choco -c | c1.choice != c.choice
        }
sig machine{
    a,b,c,d : one button,
    oners,twors,fivers ,tenrs,null1: set coin,
    cadbury, kitkat, eclairs , gum,null: lone choco
    }

{
  #(fivers+tenrs+null+twors+oners) = 5 
  #(a+b+c+d) = 4
    #   (cadbury+kitkat+ eclairs +gum) =4
    cadbury=choice.a
    cadbury= value.tenrs
        kitkat=choice.b
        kitkat=value.fivers
        eclairs=choice.c
        eclairs=value.oners
        gum=choice.d
            gum=value.twors
}

pred show{}

pred chocolate [before,after:machine , x: coin, op:choco, opc: coin, ip:button]
    {
    before.a=after.a
    before.b=after.b
    before.c=after.c
    before.d=after.d
    before.cadbury=after.cadbury
    before.kitkat=after.kitkat
    before.eclairs=after.eclairs
    before.gum=after.gum
    before.null1=after.null1
    before.oners=after.oners
    before.twors=after.twors
    before.fivers=after.fivers
    before.tenrs=after.tenrs
        before.null=after.null
    x = before.oners or x= before.twors or x= before.fivers or x= before.tenrs
    ip = before.a or ip = before.b or ip=before.c or ip = before.d 
    ip=before.a =>op=before.cadbury or op=none

        ip=before.b =>op=before.kitkat or op=none

    ip=before.c =>op=before.eclairs or op=none

    ip=before.d =>op=before.gum or op=none
    op=before.gum=>x=before.twors
    op=before.cadbury=>x=before.tenrs
    op=before.eclairs=>x=before.oners
    op=before.kitkat=>x=before.fivers
    (ip=before.c and x=before.oners =>op=after.eclairs and opc=after.null1)
    or   
    (ip=before.c and x=before.twors =>op=after.eclairs and opc=after.oners)
    or
        (ip=before.c and x=before.fivers =>op=after.eclairs and opc=after.twors)
    or
        (ip=before.c and x=before.tenrs =>op=after.eclairs and opc=after.fivers)
    or
    (ip=before.c and x=before.null1 =>op=after.null and opc=after.null1)
or
(ip=before.d and x=before.twors =>op=after.gum and opc=after.null1)
    or
(ip=before.d and x=before.oners =>op=after.null and opc=after.oners)
or
(ip=before.d and x=before.fivers =>op=after.gum and opc=after.twors)
or
(ip=before.d and x=before.tenrs =>op=after.gum and opc=after.fivers)
or
    (ip=before.d and x=before.null1 =>op=after.null and opc=after.null1)
or
(ip=before.b and x=before.fivers =>op=after.kitkat and opc=after.null1)   
    or
(ip=before.b and x=before.tenrs =>op=after.kitkat and opc=after.fivers)
or 
(ip=before.b and x=before.oners =>op=after.null and opc=after.oners)
or
(ip=before.b and x=before.twors =>op=after.null and opc=after.twors)
or
    (ip=before.b and x=before.null1 =>op=after.null and opc=after.null1)
or
    (ip=before.a and x=before.tenrs =>op=after.cadbury and opc=after.null1)
or
    (ip=before.a and x=before.fivers =>op=after.null and opc=after.fivers)
or
    (ip=before.a and x=before.twors =>op=after.null and opc=after.twors)
or
    (ip=before.a and x=before.null1 =>op=after.null and opc=after.null1)
}

run chocolate for exactly 2 machine, 8 button, 8 choco, 10 coin 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T15:02:07.273

```
abstract sig Coin {
  value: Int
}

sig Oners extends Coin {} { value = 1 }
sig Twors extends Coin {} { value = 2 }
sig Fivers extends Coin {}{ value = 5 }
sig Tenrs extends Coin {} { value = 10 }

sig List {
  coins: seq Coin
}

pred sumTo(l: List, val: Int) {
  (sum idx: l.coins.Coin | l.coins[idx].value) = val
}

run {
  //some l5: List | sumTo[l5, 5]
  some l10: List | sumTo[l10, 10]
} for 10 but 5 Int 
```

# yii - 如何在 Yii 中使用 XGoogleChart

> ID：16193663
> 
> 赞同：1
> 
> 时间：2013-04-24T13:45:40.887
> 
> 标签：yii, yii-extensions

我尝试使用 XGoogleChart 在 Yii 中创建饼图，我真的很想像本教程一样创建饼图[http://www.eha.ee/labs/yiiplay/index.php/en/site/extension?view=charts](http://www.eha.ee/labs/yiiplay/index.php/en/site/extension?view=charts)，我尝试制作这样的简单代码：

```
<?php
$data=Stock::model()->findAll(array("select"=>"t1.item_name,stock",
                                              "join"=>"JOIN tb_dtl t1 ON   
                                                       t1.brg_id=t.brg_id",
                                              'limit'=>5

 ));

$items=array();
foreach($data as $i)
{
   $items1=$i['item_name'];
   $items2=$i['stock'];
   $items[]=array($items1 => $items2);
}

$this->widget('application.extensions.XGoogleChart',array(
    'type'=>'pie',
    'title'=>'Inventory',
    **'data'=>$items,**
    'size'=>array(400,300), // width and height of the chart image
    'color'=>array('6f8a09', '3285ce','dddddd'), // if there are fewer color than slices, then colors are interpolated.
));

?> 
```

问题是图表没有显示，我的代码有什么问题，任何人都可以帮助我。谢谢

# c# - 在数据访问层中使用存储过程

> ID：16193666
> 
> 赞同：0
> 
> 时间：2013-04-24T13:45:45.837
> 
> 标签：c#, visual-studio-2010, data-access-layer

我有一个简单的应用程序，它从数据库中读取以设置类中的属性，然后将结果集输出到屏幕以及写入文件。我正在尝试提前计划我的应用程序是一个 Web 应用程序，并希望它的设计尽可能接近最佳实践。我想知道我的 DAL 设计是否有任何重大缺陷，以及我从用户那里获取输入并将其设置为参数的方式是否正常，或者是否有更好的方法。程序中的所有内容都按预期工作。

达尔

```
public static List<Customers> GetCustomersByName()
        {
            //make the list of the type that the method will be returning
            List<Customers> c = new List<Customers>();
            //make a connection string variable
            string cs = ConfigurationManager.ConnectionStrings["dbcs"].ConnectionString;
            using (SqlConnection con = new SqlConnection(cs))
            {
                using(SqlCommand cmd = new SqlCommand("spFindCustomersByName",con))
                {
                    con.Open();
                    //this stored procedure has one input parameter, how do I send that to the data access layer?
                    cmd.CommandType = CommandType.StoredProcedure;
                    cmd.Parameters.Add("@lastName", SqlDbType.VarChar, 50);
                    //only way I could think of to get the value entered from a screen into 
                    //a parameter
                    cmd.Parameters["@lastName"].Value = Customers.AddSpParams();

                    //instantiate SqlDataReader
                    SqlDataReader rdr = cmd.ExecuteReader();
                    while(rdr.Read())
                    {
                        Customers custList = new Customers();
                        custList.CustomerId = Convert.ToInt32(rdr["customerId"]);
                        custList.LastName = rdr["lastName"].ToString();
                        custList.FirstName = rdr["firstName"].ToString();
                        custList.DateHired = (DateTime)rdr["dateHired"];
                        c.Add(custList);

                    }

                }
                return c;
            } 
```

为存储过程的输入参数赋值的方法

```
public static string AddSpParams()
        {
            Console.Write("Search for a string in customer's name: ");
            string nameParam = Console.ReadLine();
            return nameParam;
        } 
```

写入文本文件，写入控制台

```
static void Main(string[] args)
        {
            Console.WriteLine("This is only a test");
            List<Customers> c = DataAccessCustomers.GetCustomersByName();
            using (StreamWriter sw = new StreamWriter(@"C:\Users\customersList.txt"))
            {
                foreach(Customers custList in c)
                {
                    //write to console
                    Console.WriteLine(custList.CustomerId + "\t" + custList.FirstName + "\t" +
                        custList.LastName + "\t" + custList.DateHired);
                    //write to file
                    sw.WriteLine(custList.CustomerId + "\t" + custList.FirstName + "\t" +
                        custList.LastName + "\t" + custList.DateHired);
                }
            }
            Console.ReadLine();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:51:48.607

基本上，这里的设计异常小点没有问题。我假设您的存储过程和`Customer`类不支持空值。因此，这里的主要缺陷是您的代码仍然无法处理 DBNull 值：

```
custList.LastName = rdr["lastName"].ToString();
custList.FirstName = rdr["firstName"].ToString();
custList.DateHired = (DateTime)rdr["dateHired"]; 
```

`.ToString()`您应该在调用或装箱之前检查 rdr["lastName"] 和 rdr["firstName"] 的 DBNull 值`(DateTime)rdr["dateHired"];` 希望这有帮助。

# batch-file - 批处理文件检测到它所在的 USB 闪存驱动器的驱动器号，然后打开 cmd 提示符

> ID：16193678
> 
> 赞同：0
> 
> 时间：2013-04-24T13:46:30.517
> 
> 标签：batch-file, cmd, usb, drive-letter

我想将批处理文件放在 USB 闪存驱动器上，我可以插入并运行批处理。我希望批处理检测已分配给 USB 闪存驱动器的驱动器号，然后打开命令提示符并将目录更改为 USB 闪存驱动器的驱动器号，然后在 cmd 提示符中键入命令字符串并输入一个 CR 来执行命令。

我什至不知道从哪里开始。我已经搜索了与 cmd 批处理相关的主题，但在将 USB 闪存驱动器插入 PC 后实际检测到分配了 USB 闪存驱动器的驱动器号方面没有任何运气。

任何帮助将非常感激。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T14:12:59.390

这将告诉您分配的驱动器号

```
@echo off
setlocal   
set wmi='wmic logicaldisk where "volumeserialnumber='32A78F3B'" get caption'
    for /f "skip=1 delims=" %%A in (%wmi%) do (
        for /f "tokens=1 delims=:" %%B in ("%%A") do (set drive=%%B)
    )
echo %drive% 
```

要获取卷序列号，请键入

```
vol [drive letter of flashdrive:] 
```

但是，如果您从 USB 驱动器运行批处理文件，则所有这些都不是必需的。只需插入

```
cd /d %~dp0 
```

在批处理文件的顶部，它将更改为运行批处理文件的目录。从那里只需添加您的代码。

您希望在插入 USB 驱动器时自动运行批处理文件吗？你的问题在这一点上不清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T14:23:49.410

我编写了一个名为**USBMON**的实用程序，当您运行脚本时，它会获取所有连接驱动器的列表，从列表中排除 cd-rom 和 hdd，然后脚本开始监视等待在免费中插入新的 USB 驱动器字母，然后将所有文件从插入的 USB 复制到一个文件夹。

您可以对属性进行更改，而不是复制文件，而是打开 CMD 窗口。

PS：变量名是英文的，但注释行、回声和信息是西班牙文，但我认为很容易理解，你也可以使用谷歌翻译。

```
@Echo OFF

Title USB MON v0.3
REM By Elektro H@cker

Setlocal enabledelayedexpansion
Color 07

:: :: :: :: :: :: :: ::
::                   ::
::   CONFIGURACIÓN   ::
::                   ::
:: :: :: :: :: :: :: ::
::
::
:: Directorio de inicio
Set "DIR=%~d0"
::
:: Directorio del log
Set "LOGFILE=.\USBMON.log"
::
:: Letras a monitorizar
Set "DRIVES= B C D E F G H I J K L M N O P Q R S T U V W X Y Z "
::
:: Letras hexadecimales (NO TOCAR)
Set "DRIVES_HEX=A:1 B:2 C:4 D:8 E:16 F:32 G:64 H:128 I:256 J:512 K:1024 L:2048 M:4096 N:8192 O:16384 P:32768 Q:65536 R:131072 S:262144 T:524288 U:1048576 V:2097152 W:4194304 X:8388608 Y:16777216 Z:33554432"
::
:: Ocultar unidades vacías en "MI PC"                (ACTIVAR / DESACTIVAR)
Set "HideDrivesWithNoMedia=ACTIVAR"
::
:: Ocultar la unidad de inicio de USB MON en "MI PC" (ACTIVAR / DESACTIVAR)
Set "HideUSBMONDrive=DESACTIVAR"
::
:: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: ::

REM Inicio del LOG
Call :Logo
Call :Write_Log >NUL
Call :Write_Log -------------------- >NUL
Call :Write_Log Iniciando USB MON... >NUL
Call :Write_Log -------------------- >NUL
Call :Write_Log >NUL

REM Ocultar unidades vacías en "MI PC"
REG Query "HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\Advanced" /V "HideDrivesWithNoMedia" >NUL 2>&1 && (
    FOR /F "Tokens=3 Delims= " %%a in ('reg query "HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\Advanced" /V "HideDrivesWithNoMedia" 2^>NUL') do (
       Set "Value=%%a"
)) || (Set "Value=0x1")
IF /I "%HideDrivesWithNoMedia%" EQU "ACTIVAR" (
    IF /I NOT "%Value%" EQU "0x0" (
        Call :Write_Log [+] Ocultando las unidades va´c¡as en MI PC...
        REG ADD "HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\Advanced" /V "HideDrivesWithNoMedia" /T "REG_DWORD" /D "0" /F >NUL
    ) ELSE (
        Set "HideDrivesWithNoMedia="
    )
)

REM Ocultar la unidad de inicio de USB MON
IF /I "%HideUSBMONDrive%" EQU "ACTIVAR" (
    REG QUERY "HKCU\SOFTWARE\Microsoft\Windows\CurrentVersion\RunOnce" /V "ShowDrive_%DIR::=%" >NUL 2>&1 && (SET "HideUSBMONDrive=") || (
        Call :Write_Log [+] Ocultando la unidad de USB MON en MI PC [%DIR%]...
        FOR %%# in (%DRIVES_HEX%) do (
            Echo %%# | FIND "%DIR%" >NUL && (
                Call SET "DIR_HEX=%%#"
                CALL REG ADD "HKCU\Software\Microsoft\Windows\CurrentVersion\Policies\Explorer" /V "NoDrives" /T "REG_DWORD" /D "%%DIR_HEX:~2%%" /F >NUL
            )
        )
    )
)

REM Reinicia el proceso explorer.exe
Echo " %HideDrivesWithNoMedia% , %HideUSBMONDrive% " | FINDSTR /I "\<ACTIVAR\>" >NUL && (
    START /W Taskkill /F /IM "explorer.exe" >NUL
    START /B explorer.exe
    Timeout /T 5 2>NUL || (Ping -n 5 localhost >NUL)
)

REM Para revertir los cambios para "Ocultar unidades vacías en "MI PC"" en el próximo reinicio del sistema
IF /I NOT "%Value%" EQU "0x0" (REG ADD "HKCU\SOFTWARE\Microsoft\Windows\CurrentVersion\RunOnce" /V "ShowDrivesWithNoMedia" /D "CMD /C REG ADD "HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\Advanced" /V "HideDrivesWithNoMedia" /T "REG_DWORD" /D "1" /F >NUL" /F >NUL)
REM Para revertir los cambios para "Ocultar la unidad de inicio de USB MON" en el próximo reinicio del sistema
IF /I "%HideUSBMONDrive%" EQU "ACTIVAR" (REG ADD "HKCU\SOFTWARE\Microsoft\Windows\CurrentVersion\RunOnce" /V "ShowDrive_%DIR::=%" /D "CMD /C REG DELETE "HKCU\Software\Microsoft\Windows\CurrentVersion\Policies\Explorer" /V "NoDrives" /F >NUL" /F >NUL)

REM Inicia el servicio de Disco Virtual para poder usar Diskpart
:SERVICE
Call :Logo
SC query "VDS" | FIND /I "PENDING" >NUL && (
    Call :Write_Log Hay una detenci£n pendiente del servicio de Disco virtual.
    Call :Write_Log Esperando a que el servicio pueda reanudarse para continuar...
    Timeout /T 5 2>NUL || (Ping -n 5 localhost >NUL)
    Goto :Service
)
SC query "VDS" | FIND /I "STOPPED" >NUL && (
    Call :Write_Log El servicio de Disco virtual est… detenido.
    Call :Write_Log Iniciando el servicio...
    sc config "VDS" start= "demand" >NUL 2>&1
    sc start "VDS" >NUL 2>&1 || (
        Call :Write_Log         
        Call :Write_Log * ERROR CRÖTICO *
        Call :Write_Log No se pudo iniciar el servicio de Disco virtual, Compruebe sus permisos de usuario.
        Call :Write_Log Terminando el proceso...
        Exit /B 1
    )
) & (Call :Write_Log El servicio de Disco virtual se ha iniciado.)

REM Parámetros
IF        "%~1" EQU "/?"        (Goto :command_help)
IF /I     "%~1" EQU "-ayuda"    (Goto :extended_help)
IF /I     "%~1" EQU "-instalar" (Goto :install)
IF /I     "%~1" EQU "-test"     (Goto :test)
IF /I NOT "%~1" EQU "" (Call :Logo & Echo: Par…metro desconocido: %1 & Exit /B 1)

REM Elimina archivos temporales de una sesión anterior
DEL /Q "%WINDIR%\Temp\USBMON*" 2>NUL

REM Elimina los discos fijos para la monitorizaci£n
For /F "Tokens=3 delims= " %%# in ('Echo list vol ^| diskpart') DO (Set "DRIVES=!DRIVES: %%# = !")

REM Elimina los dispositivos de DVD-ROM para la monitorizaci£n
For %%# in (%DRIVES%) DO (fsutil fsinfo drivetype %%#: | FIND /I "ROM" >NUL && (Set "DRIVES=!DRIVES: %%# = !"))

REM Monitoreo y auto-copiado
:MONITOR
Call :Logo
Echo Unidad de origen: [%DIR%]
Call :Write_Log Monitorizando unidades:!DRIVES!
Echo+ & Call :Write_Log >NUL
For /F "Tokens=3 delims= " %%# in ('Echo list vol ^| diskpart') DO (
    Echo "%DRIVES%" | FIND /I "%%#" >NUL && (
        For /F "Tokens=7,* delims= " %%A in ('Vol %%#: ^| FIND /I " %%# "') Do (
            IF "%%B" EQU "tiene etiqueta." (Set "LBL=Sin etiqueta") ELSE (Set "LBL=%%B")
            Call :Write_Log Hay un dispositivo conectado en la unidad [%%#:] con etiqueta "!LBL!"
        )
        Call :Write_Log  [+] Buscando archivos....
        DIR /B /A "%%#:\*" >NUL 2>&1 && (
            Call :Write_Log  [+] Copiando archivos de la unidad [%%#:] a la unidad [%DIR%]
            MKDIR "%WINDIR%\Temp" 2>NUL
            MKDIR "%DIR%\USBMON %COMPUTERNAME: =% [%%#] !LBL!" 2>NUL
            IF EXIST "%WINDIR%\Temp\USBMON_%COMPUTERNAME: =%_[%%#]_!LBL: =!_Lista.txt" (
                XCOPY /A /C /E /H /J /K /O /Q /X "%%#:\*" "%DIR%\USBMON %COMPUTERNAME: =% [%%#] !LBL!\" /EXCLUDE:%WINDIR%\Temp\USBMON_%COMPUTERNAME: =%_[%%#]_!LBL: =!_Lista.txt
            ) ELSE (
                XCOPY /A /C /E /H /J /K /O /Q /X /Y "%%#:\*" "%DIR%\USBMON %COMPUTERNAME: =% [%%#] !LBL!\"
            )
            DEL /Q "%WINDIR%\Temp\USBMON_%COMPUTERNAME: =%_[%%#]_!LBL: =!_Lista.txt" 2>NUL
            PUSHD "%%#:\"
            For /R %%a in (*) do (Echo %%a>>"%WINDIR%\Temp\USBMON_%COMPUTERNAME: =%_[%%#]_!LBL: =!_Lista.txt")
            POPD
        ) || (
            Call :Write_Log  [+] La unidad est… vac¡a...
        )
        )
    )
)
Timeout /T 10 2>NUL || (Ping -n 10 localhost >NUL)
Goto :MONITOR

:LOGO
CLS
ECHO+
ECHO+                                                          .------.
ECHO+      _   _  ____   ____       __  __   ___   _   _       ^| from-.-----.
ECHO+     ^| ^| ^| ^|/ ___^| ^| __ )     ^|  \/  ^| / _ \ ^| \ ^| ^|      ^| that-^| -----^|
ECHO+     ^| ^| ^| ^|\___ \ ^|  _ \     ^| ^|\/^| ^|^| ^| ^| ^|^|  \^| ^|      ^| -usb-^| to---^|
ECHO+     ^| ^|_^| ^| ___) ^|^| ^|_) ^|    ^| ^|  ^| ^|^| ^|_^| ^|^| ^|\  ^|      ^| -----^| -my--^|
ECHO+      \___/ ^|____/ ^|____/     ^|_^|  ^|_^| \___/ ^|_^| \_^|      '------^| drive^|
ECHO+       By Elektro H@cker                                    v0.3 '------'                                        
ECHO+
GOTO:EOF

:WRITE_LOG
Echo %*
Call Echo [%DATE%] [%TIME: =%] %* >> "%LOGFILE%"
GOTO:EOF

:INSTALL

Call :Logo
Set "Extraibles="
For /F "Tokens=3 delims= " %%# in ('Echo list vol ^| diskpart ^| FIND /I "xtra"') DO (Set "Extraibles=!Extraibles! %%#")
Echo Dispositivos extraibles conectados:!Extraibles! | MORE
Echo Escribe la letra del dispositivo donde se instalar… USB MON...
Set /P "DriveDest=>> "
If Not exist "%DriveDest%:" (Goto :Install) ELSE (Copy /Y %0 "%DriveDest%:\%~n0.bat" >NUL)
Call :Logo
Echo Unidad seleccionada: [%DriveDest%:] | MORE

COPY /Y "%CD%\%~n0.BAT" "%DriveDest%:\%~n0.BAT" >NUL

Choice /M "¨Quiere crear un autorun.inf?"

If "!ERRORLEVEL!" EQU "1" (
    Choice /M "¨Quiere que USBMON se ejecute en modo oculto?"
    If "!ERRORLEVEL!" EQU "1" (
        Set "EXT=vbs"
        (
         Echo Set wshShell = CreateObject("WScript.Shell"^) 
         Echo wshShell.run """" ^& ".\%~n0.BAT" ^& """", 0
        )>"%DriveDest%:\%~n0.vbs"
    ) ELSE (
        Set "EXT=bat"
    )
    (
    Echo [autorun]
    Echo shellexecute=%~n0.!EXT!
    Echo shell\open\command=%~n0.!EXT!
    Echo shell\explore\command=%~n0.!EXT!
    Echo shell=explore
    Echo open=%~n0.!EXT!
    Echo action =Ejecutar USB MON
    Echo Language=
    Echo ID=en
    )>"%DriveDest%:\autorun.inf"
    Attrib -A +S +H +R "%DriveDest%:\autorun.inf"
)
Call :Logo
Echo Gracias por utilizar USB MON           :^) | MORE
Pause&Exit /B 0

:TEST
Call :Logo
Echo: Comenzando el test... | MORE
Echo: [+] Buscando alguna unidad extra¡ble en el PC...
Echo list vol | diskpart | FIND /I "xtra" >NUL || (
    Echo: * ERROR CRÖTICO *
    Echo: Porfavor inserta un dispositivo extra¡ble en el PC.
    Exit /B 1
)
For /F "Tokens=3 delims= " %%# in ('Echo list vol ^| diskpart ^| FIND /I "xtra"') DO (
    IF "%%#:" EQU "%DIR%" (
        Echo: * ERROR CRÖTICO *
        Echo: No debes ejecutar USB MON desde la unidad extra¡ble en este test.
        Exit /B 1
    )
    Echo: [+] Unidad extra¡ble encontrada [%%#:] | MORE
    Call :Write_Log Iniciando un test en la unidad [%%#:] >NUL
    Set "DRIVES= %%# "
    MKDIR "%WINDIR%\Temp" 2>NUL
    DEL /Q "%WINDIR%\Temp\USBMON_[%%#]*" 2>NUL
)
Echo: Se procede a monitorizar la unidad [%DRIVES: =%:]...
Timeout /T 10 2>NUL || (Ping -n 5 localhost >NUL)
Goto :Monitor

:COMMAND_HELP
call :Logo
Echo: /?        ^^^| Muestra esta ayuda | MORE
Echo: -ayuda    ^^^| Muestra la ayuda extendida | MORE
Echo: -instalar ^^^| Instala USBMON en un dispositivo extra¡ble | MORE
Echo: -test     ^^^| Inicia un test en un dispositivo extra¡ble | MORE
Exit /B 0

:EXTENDED_HELP
Call :Logo
Echo - ¨Que es USB MON?
Echo   ________________ | MORE
Echo: USB MON (USB Monitor) es un programa portable con el f¡n de monitorizar
Echo: los nuevos dispositivos extraibles que se conecten a un PC
Echo: y copiar autom…ticamente su contenido a la carpeta de USB MON. | MORE
Echo: USB MON no afecta a los dispositivos que ya se encuentren conectados a un PC
Echo: en el momento que se ejecuta el programa. | MORE
Echo: En pocas palabras, USB MON es un "roba USB" autom…tico. | MORE
Pause&Call :Logo

Call :Logo
Echo - ¨USB MON es compatible con todas las versiones de Windows?
Echo   __________________________________________________________ | MORE
Echo: USB MON ha sido testeado £nicamente en Windows 7,
Echo: pero no deber¡a dar problemas en Windows XP y Vista. | MORE
Pause&Call :Logo

Echo - Consejos para un correcto uso de USB MON
Echo   ________________________________________ | MORE
Echo: Es conveniente ejecutar USB MON sin que hayan medios extraibles conectados
Echo: en ese momento al PC, ya que esa letra de unidad quedar¡a descartada. | MORE
Echo: Es NECESARIO ocultar las unidades vac¡as en MI PC. | MORE
Pause&Call :Logo

Echo - ¨Como funciona USB MON?
Echo   _______________________ | MORE
Echo: Al ejecutar USB MON se obtiene una lista de las letras de las unidades
Echo: conectadas al equipo en ese momento, esas letras se descartan
Echo: y se comienza a monitorizar el resto de letras en el equipo.
Echo: (Por eso es conveniente los consejos de uso de USB MON^) | MORE
Echo: Cuando USB MON detecta un dispositivo extraible insertado en alguna de las
Echo: letras monitorizadas, se buscan archivos en esa unidad y se copian
Echo: a la carpeta del programa, excluyendo duplicados de archivos
echo: que se hayan copiado anteriormente de esa misma unidad. | MORE
Pause&Call :Logo

Echo - ¨Como funciona las opciones de "Ocultar unidades" de USB MON?
Echo   _____________________________________________________________ | MORE
Echo Ocultar unidades vac¡as en "MI PC":
Echo: Se escribe una clave en el registro para ocultar las unidades visibles
Echo: sin medios insertados. | MORE
Echo Ocultar la unidad de inicio de USB MON en "MI PC":
Echo: Se escribe una clave en el registro para ocultar la unidad desde
Echo: donde se inicia USB MON. | MORE
Echo: Los cambios efectuados se revierten en el pr¢ximo reinicio del sistema.| MORE
Echo: Si alguna de las dos opciones está activada se reiniciará el proceso del
Echo: explorer.exe, para que los cambios surgan efecto al instante. | MORE
Pause&Call :Logo

Echo - ¨Los antivirus pueden detectar USB MON?
Echo   _______________________________________ | MORE
Echo: En mi £ltimo escaneo online solo lo ha detectado 1 de 42 antivirus: | MORE
Echo: DrWeb  BATCH.Virus
Echo: Fecha: 2012-09-26 | MORE
Pause&Call :Logo

Echo - ¨Que es un autorun.inf?
Echo   _______________________ | MORE
Echo: Un autorun es un archivo de personalizaci¢n preconfigurado para USB/CD/DVD.
Echo; Se puede personalizar el aspecto del dispositivo, y ejecutar un proceso. | MORE
Echo: Un autorun es detectado por el servicio de Reproducci£n autom…tica de windows,
Echo; La ejecuci¢n del autorun depende de que el servico est‚ habilitado en el PC. | MORE
Echo: El servicio se puede habilitar desde la herramienta "Services.MSC". | MORE
Pause&Call :Logo

Echo - ¨Para que sirve la opci¢n "-instalar" de USB MON?
Echo   _________________________________________________ | MORE
Echo: Sirve para portabilizar el programa hacia una unidad extraible. | MORE
Echo: La opci¢n est… pensada para ser instalada en un pendrive, as¡, con
Echo: la ayuda de un autorun.inf, poder insertar el pendrive en otro equipo,
Echo: y monitorizar ese equipo para copiar los otros medios EXTRAIBLES a tu pendrive. | MORE
Pause&Call :Logo

Echo - ¨Para que sirve la opci¢n "-test" de USB MON?
Echo   _____________________________________________ | MORE
Echo: Sirve para realizar una peque¤a prueba de monitorizaci¢n en una 
Echo: unidad extra¡ble aleat¢ria de tu PC. | MORE
Echo: Es una prueba para ver si todo funciona con normalidad. | MORE
Echo: PD: El test ha de cancelarse manualmente apretando "CTRL + C" o cerrando CMD. | MORE
Pause&Call :Logo

Echo - Cuando intento instalar USB MON con el autorun.inf no me funciona, ¨Porqu‚?
Echo   ___________________________________________________________________________ | MORE
Echo Windows XP/Vista:
Echo: El servicio de "Reproducci¢n autom…tica" debe estar activado en el equipo. | MORE
Echo Windows 7:
Echo: Microsoft deshabilit£ POR COMPLETO el uso de un autorun.inf en pendrives,
Echo: La £nica manera de ejecutar un autorun.inf es disponer de un pendrive,
Echo: que se haga pasar por un dispositivo de CD-ROM para auto-reproducirse. | MORE
Echo: PD: Inf¢rmate en internet sobre el modelo de pendrive antes de adquirirlo. | MORE
Pause&Call :Logo

Echo - ¨Donde puedo conseguir m…s programas tuyos?
Echo   ___________________________________________ | MORE
Echo: No tengo ninguna web ni blog personal, pero puedes visitar www.elhacker.net | MORE
Echo: All¡ encontrar…s m…s scripts £tiles de todo tipo usando el buscador del foro,
Echo: Tambi‚n me encontrar…s moderando la secci¢n de Scripting, donde siempre estar‚
Echo: dispuesto y encantado de resolver tus dudas. | MORE
Pause&Exit/B 0 
```

# python - 如何以编程方式将新函数添加到 Python 中的当前范围？

> ID：16193684
> 
> 赞同：1
> 
> 时间：2013-04-24T13:46:49.463
> 
> 标签：python, function, dynamic, python-3.x, scope

在 Python[中，很容易以编程方式创建新函数](https://stackoverflow.com/questions/4582521/python-creating-dynamic-functions)。我如何将其分配给当前范围内以编程方式确定的名称？

这就是我想做的（在非工作代码中）：

```
obj_types = ('cat', 'dog', 'donkey', 'camel')
for obj_type in obj_types:
    'create_'+obj_type = lambda id: id 
```

在上面的例子中，赋值`lambda`给一个待确定的函数名显然是行不通的。在实际代码中，函数本身将由函数工厂创建。

背景是懒惰和不要重复自己：我有十几个对象类型，我会为其分配一个生成的函数。所以代码目前看起来像：

```
create_cat   = make_creator('cat')
# ...
create_camel = make_creator('camel') 
```

函数`create_cat`等在解析器中使用硬编码。

如果我以编程方式将类创建为新类型，如[文档](http://docs.python.org/3/library/types.html)`types.new_class()`中所见，这似乎是解决方案。（错误）使用这种方法是我最好的选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T13:52:15.257

完成您尝试做的事情（但不创建具有动态名称的函数）的一种方法是`dict`使用名称作为键将 lamda 存储在 a 中。而不是打电话给`create_cat()`你`create['cat']()`。这将与解析器逻辑中的非硬编码名称很好地吻合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T14:42:02.933

Vaughn Cato 指出，可以直接分配到`locals()[object_type] = factory(object_type)`. 但是[Python 文档禁止这样做](http://docs.python.org/3/library/functions.html#locals)：“注意：不应修改此字典的内容；更改可能不会影响解释器使用的局部变量和自由变量的值”

D. Shawley 指出，使用`dict()`条目将保存函数的对象会更明智。`create['cat']()`在解析器中使用会很简单。虽然这很引人注目，但我不喜欢括号和刻度所需的语法开销。

JF Sebastian 指着类。这就是我最终得到的结果：

```
# Omitting code of these classes for clarity
class Entity:
    def __init__(file_name, line_number):
        # Store location, good for debug, messages, and general indexing

# The following classes are the real objects to be generated by a parser
# Their constructors must consume whatever data is provided by the tokens
# as well as calling super() to forward the file_name,line_number info.
class Cat(Entity): pass
class Camel(Entity): pass

class Parser:
    def parse_file(self, fn):
        # ...

        # Function factory to wrap object constructor calls
        def create_factory(obj_type):
            def creator(text, line_number, token):
                try:
                    return obj_type(*token,
                                    file_name=fn, line_number=line_number)
                except Exception as e:
                    # For debug of constructor during development
                    print(e)
            return creator

        # Helper class, serving as a 'dictionary' of obj construction functions
        class create: pass
            for obj_type in (Cat, Camel):
                setattr(create,
                        obj_type.__name__.lower(),
                        create_factory(obj_type))

        # Parsing code now can use (again simplified for clarity):
        expression = Keyword('cat').setParseAction(create.cat) 
```

这是用于部署[pyparsing 解析器](http://pyparsing.wikispaces.com/)的帮助代码。D. Shawley 是正确的，因为 dict 实际上更容易允许动态生成解析器语法。

# android - 如何使用带有右侧菜单的右侧按钮和带有左侧菜单的左侧按钮像新的 facebook 应用程序一样滑动 Activity

> ID：16193685
> 
> 赞同：0
> 
> 时间：2013-04-24T13:46:49.637
> 
> 标签：android

请任何人告诉我如何做到这一点。我尝试了很多，但我只能从左到右滑动。我也使用 sideMenu libray，但我无法执行从左菜单到左按钮和从右菜单到右按钮的滑动。

请给我解决方案。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:05:47.250

尝试这个：

[https://github.com/jfeinstein10/SlidingMenu/](https://github.com/jfeinstein10/SlidingMenu/)

它对我有用，但不要忘记使用

```
getSlidingMenu().setMode(SlidingMenu.LEFT_RIGHT); 
```

能够在两侧使用菜单。

# sql - 在mybatis中使用sql显示一对多映射

> ID：16193687
> 
> 赞同：0
> 
> 时间：2013-04-24T13:46:56.043
> 
> 标签：sql, mysqli, mybatis

我必须表

```
Tasks:
 id
 title
 Description

Task_reply_mapping
task_id
parent_id 
```

我编写了以下查询来获取数据

```
 select t1.id,t1.title,t1.description,t2.id,t2.title,t2.description
from tasks t1
left join Task_reply_mapping trm on t1.id =  trm.task_id 
    left join tasks t2 on t2.id = t1.id
    order by fe.created_at desc limit 0,10 
```

这似乎工作正常，但它没有正确填充数据。我想知道这个查询是否正确？

在我的映射器文件中，我有

```
 <resultMap id="TaskResultMap" type="com.mycom.myproj.bean.TaskBean">
    <id column="id" jdbcType="BIGINT" property="id" />
    <result column="title" jdbcType="VARCHAR" property="title" />
    <result column="description" jdbcType="VARCHAR" property="description" />
  <collection ofType="com.mycom.myproj.bean.TaskBean" property="replyTask">
    <id column="id" jdbcType="BIGINT" property="id" />
        <result column="title" jdbcType="VARCHAR" property="title" />
        <result column="description" jdbcType="VARCHAR" property="description" />
   </collection>
  </resultMap> 
```

或者我在映射器类中做错了什么。

对象中的记录被放置，就像首先索引它放置最新任务，无论是它的回复还是新任务等等。

它应该像这样插入记录

```
 Task1
     --1st reply task
     --2nd reply task
  Task 2
      --1st reply task
      --2nd reply task 
```

如果需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:05:14.680

Not sure where the problem is.

I think maybe the query and the mapping are not correct.

Try this:

```
select 
    t1.id
    ,t1.title
    ,t1.description
    ,t2.id as id_2
    ,t2.title as title_2
    ,t2.description as description_2
from tasks t1
    left join Task_reply_mapping trm on t1.id =  trm.task_id 
    left join tasks t2 on t2.id = t1.id
order by fe.created_at desc limit 0,10 
```

Mapping

```
<resultMap id="TaskResultMap" type="com.mycom.myproj.bean.TaskBean">
    <id column="id" jdbcType="BIGINT" property="id" />
    <result column="title" jdbcType="VARCHAR" property="title" />
    <result column="description" jdbcType="VARCHAR" property="description" />
    <collection ofType="com.mycom.myproj.bean.TaskBean" property="replyTask">
    <id column="id_2" jdbcType="BIGINT" property="id" />
        <result column="title_2" jdbcType="VARCHAR" property="title" />
        <result column="description_2" jdbcType="VARCHAR" property="description" />
   </collection>
</resultMap> 
```

In you query, you have to `id`, two ´title`and two`description` so the problem could be there.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T13:56:17.213

第二个`join`必须与`Task_reply_mapping`表：

```
select t1.id,
       t1.title,
       t1.description,
       t2.id,
       t2.title,
       t2.description
  from tasks t1
       left join Task_reply_mapping trm
           on t1.id = trm.task_id 
       left join tasks t2
           on t2.id = trm.parent_id 
```

[这是一个演示。](http://www.sqlfiddle.com/#!2/fa1dc/2)

# asp.net - Npgsql 无法通过 PgPool 建立与 CentOS PostgreSQL 的连接

> ID：16193690
> 
> 赞同：1
> 
> 时间：2013-04-24T13:47:04.290
> 
> 标签：asp.net, postgresql, centos, npgsql, pgpool

我在 Asp.net 中有一个 Web 应用程序连接到一个单独的数据库服务器，该数据库服务器运行 CentOS 和 PostgreSQL。此设置工作正常。

为了提高数据库服务器的性能，我尝试安装和配置 PgPool-II 以在 CentOS 服务器上汇集数据库连接。

配置完成后，我可以从 CentOS 命令行使用 pgpool 配置的端口连接到 PostgreSQL，因此我假设 pgpool 已启动并正在运行。

当我尝试使用我的新 pgpool 端口从我的 web 应用程序连接到数据库服务器时，我在事件日志中得到以下 NpgdslException：

> 无法建立到“[db-server 的 IP 地址]”的连接

一些配置文件：

pgpool.conf：

```
listen_address = '*'
port = 6432
pcp_port = 9898

enable_pool_hba = true

socket_dir = '/tmp'
pcp_socket_dir = '/tmp'

backend_hostname = ''
backend_port = 5432

num_init_children = 50
max_pool = 4
connection_life_time = 120
client_idle_limit = 0

debug_level = 0 
```

pool_hba.conf：

```
# TYPE  DATABASE    USER        CIDR-ADDRESS          METHOD

# "local" is for Unix domain socket connections only
local   all         all                               trust
# IPv4 local connections:
host    all         all         127.0.0.1/32          trust
# Network access
host    all             all     192.168.0.0/24          md5 
```

我在 /etc/sysconfig/iptables 中配置的 CentOS 防火墙中打开了所有端口。 **因此，当我在我的 web 应用程序中连接到端口 5432 时，一切都很好，但是当我将端口更改为 6432（pgpool 的端口）时，我得到了上述异常。**

有谁能够帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-25T03:27:15.330

首先要做的是确保 pgpool 在正确的端口上运行。这可以使用 fuser 轻松完成：

```
fuser -n tcp 6432 
```

如果它没有返回任何内容，则您的端口上没有任何内容正在监听。在这种情况下，请确保 pgpool 正在运行：

```
ps -A | grep pgpool 
```

如果这仅显示您的 grep，那么您的 pgpool 尚未启动。有关如何启动它的信息，请参阅您的 rpm 信息。这可能涉及`chkconfig`和`system`

# c# - 主线程迭代之间的资源锁定（Async/Await）

> ID：16193692
> 
> 赞同：2
> 
> 时间：2013-04-24T13:47:16.667
> 
> 标签：c#, locking, async-await

假设我有一个带有两个按钮 (`button1`和`button2`) 和一个资源对象 ( `r`) 的表单。资源有自己的锁定和解锁代码来处理并发。资源可以被任何线程修改。

单击时`button1`，它的处理程序会对其`r`自身进行一些修改，然后`_IndependentResourceModifierAsync()`异步调用它`r`在生成的任务中进行一些修改。`_IndependentResourceModifierAsync()`在执行此操作之前获取`r`' 锁。也因为处理程序`r`自己搞砸了，它也获得了`r`' 锁。

单击时`button2`，它只是`_IndependentResourceModifierAsync()`直接调用。它本身没有锁定。

如您所知，按钮的处理程序将始终在主线程上执行（除了 spawned `Task`）。

我想保证两件事：

1.  如果在主线程锁定资源时单击`button1`或`button2`单击，将引发异常。（不能使用`Monitor`or`Mutex`因为它们是线程驱动的）
2.  `button1_Click()`从through嵌套的锁`_IndependentResourceModiferAsync()`不应导致死锁。（不能使用`Semaphore`）。

基本上，我认为我正在寻找的是一个“基于堆栈的锁”，如果这样的事情存在或什至是可能的。因为当异步方法在等待之后继续时，它会恢复堆栈状态。我做了很多寻找其他有这个问题但没有找到的人。这可能意味着我把事情复杂化了，但我很好奇人们对此有什么看法。可能有一些非常明显的东西我错过了。非常感谢。

```
public class Resource
{
    public bool TryLock();
    public void Lock();
    public void Unlock();
    ...
}

public class MainForm : Form
{
    private Resource r;
    private async void button1_Click(object sender, EventArgs e)
    {
        if (!r.TryLock())
            throw InvalidOperationException("Resource already acquired");
        try
        {
            //Mess with r here... then call another procedure that messes with r independently.
            await _IndependentResourceModiferAsync();
        }
        finally
        {
            r.Unlock();
        }
    }

    private async void button2_Click(object sender, EventArgs e)
    {
        await _IndependentResourceModifierAsync();
    }

    private async void _IndependentResourceModiferAsync()
    {
        //This procedure needs to check the lock too because he can be called independently
        if (!r.TryLock())
            throw InvalidOperationException("Resource already acquired");
            try
            {
                await Task.Factory.StartNew(new Action(() => {
                    // Mess around with R for a long time.
                }));
            }
            finally
            {
                r.Unlock();
            }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T14:54:14.483

我相信表现得相当好的异步重入锁定是不可能的。这是因为当您启动异步操作时，您不需要立即执行`await`它。

例如，假设您将事件处理程序更改为如下内容：

```
private async void button1_Click(object sender, EventArgs e)
{
    if (!r.TryLock())
        throw InvalidOperationException("Resource already acquired");
    try
    {
        var task = _IndependentResourceModiferAsync();
        // Mess with r here
        await task;
    }
    finally
    {
        r.Unlock();
    }
} 
```

如果锁是异步可重入的，则`r`在事件处理程序中使用的代码和在调用的异步方法中的代码可以同时工作（因为它们可以在不同的线程上运行）。这意味着这种锁是不安全的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-25T00:18:30.070

> 资源有自己的锁定和解锁代码来处理并发。资源可以被任何线程修改。

有一面黄旗。我发现从长远来看，保护资源（而不是让它们保护自己）的设计通常会更好。

> 当 button1 被点击时，它的处理程序会对 r 本身进行一些修改，然后异步调用 _IndependentResourceModifierAsync() ，这会在生成的任务中对 r 进行一些修改。_IndependentResourceModifierAsync() 在执行此操作之前获取 r 的锁。也因为处理程序正在弄乱 r 本身，它也获得了 r 的锁。

还有一面红旗。递归锁几乎总是一个坏主意。[我在博客上解释了我的推理。](http://blog.stephencleary.com/2013/04/recursive-re-entrant-locks.html)

我还收到了另一个关于设计的警告：

> 如果在主线程锁定资源时单击 button1 或 button2，则会引发异常。（不能使用 Monitor 或 Mutex，因为它们是线程驱动的）

这对我来说听起来不对。有没有其他方法可以做到这一点？随着状态的变化禁用按钮似乎是一种更好的方法。

* * *

我强烈建议重构以消除对锁递归的要求。然后您可以使用`SemaphoreSlim`with`WaitAsync`异步获取锁和`Wait(0)`“try-lock”。

所以你的代码最终看起来像这样：

```
class Resource
{
  private readonly SemaphoreSlim mutex = new SemaphoreSlim(1);

  // Take the lock immediately, throwing an exception if it isn't available.
  public IDisposable ImmediateLock()
  {
    if (!mutex.Wait(0))
      throw new InvalidOperationException("Cannot acquire resource");
    return new AnonymousDisposable(() => mutex.Release());
  }

  // Take the lock asynchronously.
  public async Task<IDisposable> LockAsync()
  {
    await mutex.WaitAsync();
    return new AnonymousDisposable(() => mutex.Release());
  }
}

async void button1Click(..)
{
  using (r.ImmediateLock())
  {
    ... // mess with r
    await _IndependentResourceModiferUnsafeAsync();
  }
}

async void button2Click(..)
{
  using (r.ImmediateLock())
  {
    await _IndependentResourceModiferUnsafeAsync();
  }
}

async Task _IndependentResourceModiferAsync()
{
  using (await r.LockAsync())
  {
    await _IndependentResourceModiferUnsafeAsync();
  }
}

async Task _IndependentResourceModiferUnsafeAsync()
{
  ... // code here assumes it owns the resource lock
} 
```

* * *

> 我做了很多寻找其他有这个问题但没有找到的人。这可能意味着我把事情复杂化了，但我很好奇人们对此有什么看法。

很长一段时间，这是不可能的（完全，句号，句号）。使用 .NET 4.5，这是可能的，但它并不漂亮。这很复杂。我不知道*有人*在生产中实际这样做，我当然不推荐它。

也就是说，我一直在使用[异步递归锁作为](https://nitoasyncex.codeplex.com/SourceControl/changeset/view/cfd83ac30725#Source/AdvancedExamples/RecursiveAsyncLockExample.cs)我的 AsyncEx 库中的示例（它永远不会成为公共 API 的一部分）。您可以像这样使用它（遵循[AsyncEx 已取消令牌同步操作](http://blog.stephencleary.com/2013/04/cancellationtoken-behavior-with-asyncex.html)的约定）：

```
class Resource
{
  private readonly RecursiveAsyncLock mutex = new RecursiveAsyncLock();
  public RecursiveLockAsync.RecursiveLockAwaitable LockAsync(bool immediate = false)
  {
    if (immediate)
      return mutex.LockAsync(new CancellationToken(true));
    return mutex.LockAsync();
  }
}

async void button1Click(..)
{
  using (r.LockAsync(true))
  {
    ... // mess with r
    await _IndependentResourceModiferAsync();
  }
}

async void button2Click(..)
{
  using (r.LockAsync(true))
  {
    await _IndependentResourceModiferAsync();
  }
}

async Task _IndependentResourceModiferAsync()
{
  using (await r.LockAsync())
  {
    ...
  }
} 
```

的代码`RecursiveAsyncLock`不是很长，但想想就非常令人费解。它从我在博客中详细描述的[隐式异步上下文](http://blog.stephencleary.com/2013/04/implicit-async-context-asynclocal.html)开始（仅靠它本身很难理解），然后使用自定义等待对象在最终用户`async`方法中的正确时间“注入”代码。

你正处于任何人试验过的边缘。`RecursiveAsyncLock`根本没有经过彻底测试，而且很可能永远不会。

小心行事，探险家。这里是龙。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-24T13:51:15.563

我认为你应该看看[`SemaphoreSlim`](http://msdn.microsoft.com/en-us/library/system.threading.semaphoreslim.aspx)（计数为 1）：

*   它不是可重入的（它不属于线程）
*   支持异步等待（`WaitAsync`）

我现在没有时间检查您的方案，但我*认为*它适合。

编辑：我刚刚注意到这个问题：

> 因为当异步方法在等待之后继续时，它会恢复堆栈状态。

不，绝对没有。这很容易显示 - 添加一个响应按钮单击的异步方法，如下所示：

```
public void HandleClick(object sender, EventArgs e)
{
    Console.WriteLine("Before");
    await Task.Delay(1000);
    Console.WriteLine("After");
} 
```

在你的两个调用上设置一个断点`Console.WriteLine`——你会注意到在*之前*，`await`你有一个堆栈跟踪，包括 WinForms 中的“按钮处理”代码；之后堆栈看起来会非常不同。

# python - 如何创建一个类以在 Python 中下载文件

> ID：16193694
> 
> 赞同：1
> 
> 时间：2013-04-24T13:47:19.340
> 
> 标签：python, class

我正在尝试用 Python 编写一个类来打开给定的特定 URL 并返回该 URL 的数据...

```
class Openurl:

   def download(self, url):

     req = urllib2.Request( url )
     content = urllib2.urlopen( req )
     data = content.read()
     content.close()
     return data

url = 'www.somesite.com'
dl = openurl()
data = dl.download(url) 
```

有人可以纠正我的方法吗？我知道有人可能会问为什么不直接打开它，但我想在下载时显示一条消息。该类将只有一个实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T14:00:07.410

你有几个问题。

我确定您的原始代码中没有的一个是 import 失败`urllib2`。

第二个问题`dl = openurl()`应该是`dl = Openurl()`。这是因为 Python 区分大小写。

第三个问题是你的 URL 需要`http://`在它之前。这消除了一个`unknown url type`错误。在那之后，你应该好好去！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T13:57:29.760

应该是`dl = Openurl()`，python区分大小写

# batch-file - 批处理 For 循环排除文件名包含

> ID：16193702
> 
> 赞同：6
> 
> 时间：2013-04-24T13:47:30.507
> 
> 标签：batch-file

我有一个简单的批处理文件，它将遍历所有 *Test.htm 文件并复制它们。一些文件将包含我不想复制的字符串。

```
FOR /R "C:\" %%g IN (*Test.htm) DO  (
echo %%g
) 
```

我想要的伪代码：

```
@echo off
FOR /R "C:\" %%g IN (*Test.htm) DO ( 
   if %%g contains "Exclude" do nothing
else 
   copy...
) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-24T14:17:26.810

**对于文件名：**

```
@echo off

FOR /R "C:\" %%g IN (*Test.htm) DO ( 
   (Echo "%%g" | FIND /I "Exclude" 1>NUL) || (
       Copy "%%g"...
   )
) 
```

**对于文件内容：**

```
@echo off

FOR /R "C:\" %%g IN (*Test.htm) DO ( 
   (Type "%%g" | FIND /I "Exclude" 1>NUL) || (
       Copy "%%g"...
   )
) 
```

# jquery - 使用 jquery validate 进行条件验证

> ID：16193704
> 
> 赞同：1
> 
> 时间：2013-04-24T13:47:31.783
> 
> 标签：jquery, jquery-validate

使用 jquery-validate 1.11.0

在我的表单中，我有一个条件，如果在字段 A 中输入文本，则字段 B 和 C 成为必需的。如果在字段 B 中输入文本，则 A 和 C 成为必填项，依此类推。此外，如果字段 D 中有任何文本，请将其清除。

如果在字段 D 中输入了文本，则清除字段 A、B、C 并使它们不需要。

我有一个错误，如果我先填写字段 A，它似乎会根据需要提交绕过其他 2 个字段。如果我先填写字段 b 或 c，则确保字段 A 是必需的。

[http://jsfiddle.net/rockitdev/mxtXX/47/](http://jsfiddle.net/rockitdev/mxtXX/47/)

```
<form id="search" name="search" method="post" action="">
    <label for="a">Text A</label>
    <input id="a" type="text" class="search-person" />
    <label for="b">Text B</label>
    <input id="b" type="text" class="search-person" />
    <label for="c">Text C</label>
    <input id="c" type="text" class="search-person" />
    <label for="d">Text D</label>
    <input id="d" type="text" class="search-hcn" />
    <p>
        <input class="btn btn-primary" type="submit" value="Submit" />
    </p>
</form>

$('.search-person').focus(function () {
    $('.search-hcn').val(' ').removeClass("required");
    $('.search-person').addClass("required");
});

$('.search-hcn').focus(function () {

    $('.search-person').val(' ').removeClass("required");
    $('.search-hcn').addClass("required");
});

$('#search').validate(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T14:01:01.667

您可以使用`depends`validate 插件提供的选项来执行此操作。

注意：删除值不是验证的一部分

```
$('#search').validate({
    rules: {
        a: {
            required: {
                depends: function(element) {
                    return $('#b').val().length > 0 || $('#c').val().length > 0
                }
            }
        },
        b: {
            required: {
                depends: function(element) {
                    return $('#a').val().length > 0 || $('#c').val().length > 0
                }
            }
        },
        c: {
            required: {
                depends: function(element) {
                    return $('#a').val().length > 0 || $('#b').val().length > 0
                }
            }
        },
        d: {
            required: {
                depends: function(element) {
                    return $('#a').val().length == 0 || $('#b').val().length == 0 && $('#c').val().length == 0
                }
            }
        }
    }
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/UkMA9/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T13:59:20.690

在字段上设置`name`属性`input`可以解决问题。

[JSFiddle](http://jsfiddle.net/mxtXX/52/)

```
<form id="search" name="search" method="post" action="">
    <label for="a">Text A</label>
    <input id="a" type="text" class="search-person" name="person1" />
    <label for="b">Text B</label>
    <input id="b" type="text" class="search-person" name="person2" />
    <label for="c">Text C</label>
    <input id="c" type="text" class="search-person" name="person3" />
    <label for="d">Text D</label>
    <input id="d" type="text" class="search-hcn" name="hcn" />
    <p>
        <input class="btn btn-primary" type="submit" value="Submit" />
    </p>
</form> 
```

* * *

该`debug`选项对于查找此类错误很有用。

```
$('#search').validate({debug: true}); 
```

# android - 使用 SherlockActivity 在 SherlockFragments 中设置 setSupportProgressBarIndeterminate

> ID：16193705
> 
> 赞同：2
> 
> 时间：2013-04-24T13:47:35.677
> 
> 标签：android, android-actionbar, actionbarsherlock, android-viewpager, viewpagerindicator

我正在使用 Jake 的 ActionBarSherlock 和 ViewPagerIndicator。我意识到我不能`setSupportProgressBarIndeterminate`用 SherlockActivity 设置 SherlockFragments。

在 SherlockActivity 中，我有

```
@Override
protected void onCreate(Bundle arg0) {
        super.onCreate(arg0);
        requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);
        setTheme(R.style.Theme_Sherlock_Light_DarkActionBar);
        ActionBar actionbar = getSupportActionBar();
        actionbar.setDisplayHomeAsUpEnabled(true);
        //setSupportProgressBarVisibility(true);
    } 
```

在我的 SherlockFragment 的**Asynctask 中**

```
@Override
        protected void onPreExecute() {
            getSherlockActivity().getSupportActionBar();
            getSherlockActivity().setSupportProgressBarVisibility(true);
            getSherlockActivity().setSupportProgressBarIndeterminate(true);
        } 
```

进度条不出现。有什么理由吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T15:53:46.560

您需要使用`setSupportProgressBarIndeterminateVisibility`来使不确定的进度条显示。

# eclipse - 播放测试资源文件夹在 eclipse 中不可见

> ID：16193707
> 
> 赞同：0
> 
> 时间：2013-04-24T13:47:36.647
> 
> 标签：eclipse, testing, playframework-2.0, classpath, playframework-2.1

在 project/Build.scala 文件定义为

```
val main = PlayProject(appName, appVersion, appDependencies, mainLang = JAVA).settings(defaultScalaSettings:_*).settings(
    ,resourceDirectory in Test <<= baseDirectory(_ / "test-resources")
) 
```

运行`show test:resource-directories`会显示

```
[info] List(C:\Users\grigocn\work\reliable-transport-ui\test-resources, C:\Users\grigocn\work\reliable-transport-ui\target\scala-2.9.1\resource_managed\test) 
```

但是运行`eclipsify`不会将该文件夹添加到eclipse项目中。

我应该如何配置项目让 eclipsify 插件知道这个资源目录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T04:54:48.157

Try adding this to the `.settings()` block of your Build.scala:

```
unmanagedClasspath in Test <+= baseDirectory map { bd => Attributed.blank(bd / "test-resources") } 
```

This is from a Play 2.1 project, but I don't think the syntax changed between 2.0 and 2.1.

# css - 超链接悬停时的 CSS3 过渡

> ID：16193713
> 
> 赞同：0
> 
> 时间：2013-04-24T13:47:47.210
> 
> 标签：css, css-transitions

我有以下**演示**：http: [//jsfiddle.net/EHrk4/2/](http://jsfiddle.net/EHrk4/2/)

***#main*是否有可能保持不透明度 1 *，直到*我将鼠标悬停在超链接上，然后它变为 0.3？**

**HTML：**

```
<div id="main">    
    <a href="#">hover me to fade out main</a>
</div> 
```

**CSS：**

```
#main {
    -webkit-transition: opacity 0.3s;
    -moz-transition: opacity 0.3s;
    -ms-transition: opacity 0.3s;
    -o-transition: opacity 0.3s;
    transition: opacity 0.3s;
    height:400px;
    width:400px;
    background:red
}

#main:not(:hover) {
    opacity: 0.3;
} 
```

非常感谢您的任何指点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:56:42.463

否 - 您的链接在您想要影响的元素内，目前 CSS2 或 CSS3 中没有父选择器。

如果您的锚点是 div 的兄弟元素，您可以根据需要影响 div 的不透明度 - 就像在这个快速**[jsFiddle](http://jsfiddle.net/EHrk4/4/)**示例中一样。

在纯 CSS 中影响同级的示例：

HTML：

```
<a href="#">hover me to fade out main</a>
<div id="main">
</div> 
```

CSS：

```
a:hover + #main {
    opacity:0.5;
} 
```

* * *

如果它必须在里面，我建议使用[**jQuery**](http://jquery.com/)之类的 Javascript 库来实现它。

* * *

或者，看看[**下面的答案**](https://stackoverflow.com/a/4997602/1586880)，它解释了影响子元素的不透明度的解决方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T13:59:45.613

我会亲自通过jquery来做。

[http://jsfiddle.net/EHrk4/5/](http://jsfiddle.net/EHrk4/5/)

江青

```
$('#link').hover(function(){
    $('#main').addClass('hover');
}, function(){
   $('#main').removeClass('hover');
}) 
```

CSS

```
#main {
    -webkit-transition: opacity 0.3s;
    -moz-transition: opacity 0.3s;
    -ms-transition: opacity 0.3s;
    -o-transition: opacity 0.3s;
    transition: opacity 0.3s;
    height:400px;
    width:400px;
    background:red
}

.hover {
    opacity: 0.3;
} 
```

编辑：

根据我们的评论，这里是如何在保持子元素不透明度为 1 的同时做到这一点。

[http://jsfiddle.net/EHrk4/11/](http://jsfiddle.net/EHrk4/11/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T13:55:01.813

是的，这是可能的，例如：

```
#main,a{
   display:block;
   height:100px;
   width:100px;
} 
```

使`height,width`锚标记的 与 相同`#main`。因此，当您将链接悬停时，它会给您带来整个`#main`. 否则，您可以使用`jquery`它。

# groovy - groovy：超类中闭包中的变量范围（MissingPropertyException）

> ID：16193717
> 
> 赞同：3
> 
> 时间：2013-04-24T13:47:58.340
> 
> 标签：groovy, scope, closures, superclass

我的印象是闭包作为被调用的实际类（而不是实现的超类）运行，因此当某些变量不可见时（例如超类中的私有）会中断。

例如

```
package comp.ds.GenericTest2

import groovy.transform.CompileStatic

@CompileStatic
class ClosureScopeC {
        private List<String> list = new ArrayList<String>()
        private int accessThisPrivateVariable = 0;

        void add(String a) {
                list.add(a)
                println("before ${accessThisPrivateVariable} ${this.class.name}")
                // do something with a closure
                list.each {String it ->
                        if (it == a) {
                                // accessThisPrivateVariable belongs to ClosureScopeC
                                accessThisPrivateVariable++
                        }
                }
                println("after ${accessThisPrivateVariable}")
        }
}

// this works fine
a = new ClosureScopeC()
a.add("abc")
a.add("abc")

// child class
class ClosureScopeD extends ClosureScopeC {
        void doSomething(String obj) {
                this.add(obj)
        }
}

b = new ClosureScopeD()

// THIS THROWS groovy.lang.MissingPropertyException: No such property: accessThisPrivateVariable for class: comp.ds.GenericTest2.ClosureScopeD
b.doSomething("abc") 
```

最后一行抛出一个 MissingPropertyException：子类调用超类的“add”方法，该方法执行“each”闭包，该闭包使用“accessThisPrivateVariable”。

我是 groovy 的新手，所以我认为必须有一种简单的方法来做到这一点，因为否则闭包似乎完全破坏了在超类中完成的私有实现的封装......这似乎是一个非常普遍的需求（引用它自己的私有变量的超类实现）

我正在使用 groovy 2.1.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-15T20:09:51.477

我发现这是一个很好的参考，描述了 Groovy 变量范围如何工作并适用于您的情况：[Closure in groovy cannot use private field when called from extended class](https://stackoverflow.com/questions/24071667/closure-in-groovy-cannot-use-private-field-when-called-from-extending-class)

从上面的链接中，我意识到由于您已声明`accessThisPrivateVariable`为私有，Groovy 不会为变量自动生成 getter/setter。请记住，即使在 Java 中，子类也不能直接访问私有变量。

更改代码以显式添加 getter/setter，解决了问题：

```
package com.test
import groovy.transform.CompileStatic

@CompileStatic
class ClosureScopeC {
    private List<String> list = new ArrayList<String>()
    private int accessThisPrivateVariable = 0;

    int getAccessThisPrivateVariable() { accessThisPrivateVariable }
    void setAccessThisPrivateVariable(int value ){this.accessThisPrivateVariable = value}

    void add(String a) {
        list.add(a)
        println("before ${accessThisPrivateVariable} ${this.class.name}")
        // do something with a closure
        list.each {String it ->
            if (it == a) {
                 // accessThisPrivateVariable belongs to ClosureScopeC
                accessThisPrivateVariable++
            }
        }
        println("after ${accessThisPrivateVariable}")
    }
}

// this works fine
a = new ClosureScopeC()
a.add("abc")
a.add("abc")

// child class
class ClosureScopeD extends ClosureScopeC {
    void doSomething(String obj) {
        super.add(obj)
    }
}

b = new ClosureScopeD()
b.doSomething("abc") 
```

有一种更简单的方法，只需将访问修饰符（应该重命名属性）设置为受保护，这样子类就可以访问属性..问题解决了。

```
protected int accessThisProtectedVariable 
```

为了澄清您对 Groovy 可能破坏封装的担忧声明：请放心，它没有。

通过将字段声明为私有，Groovy 通过有意暂停公共 getter/setter 的自动生成来保留封装。一旦私有，您现在负责并完全控制子类（受保护）或所有对象类（公共）如何或是否有办法通过显式添加方法来访问该字段 - 如果这有意义的话。

请记住，按照惯例，当您的代码引用该字段时，Groovy 总是调用 getter 或 setter。所以，像这样的声明：

```
def f = obj.someField 
```

实际上会调用该`obj.getSomeField()`方法。同样地：

```
obj.someField = 5 
```

将调用该`obj.setSomeField(5)`方法。

# r - R中栅格库的栅格化函数中的“区域”和“多边形”是什么意思？

> ID：16193724
> 
> 赞同：0
> 
> 时间：2013-04-24T13:48:06.270
> 
> 标签：r, polygon, raster, rasterize

当我使用 R 中光栅库中的函数 rasterize 时，控制台中会出现此消息：

```
"Found 6085 region(s) and 6409 polygon(s)". 
```

shapefile 中有 6085 个多边形，所以我想知道这两个术语是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T13:58:12.277

多边形是通过线（边）以某种方式相互连接的一组点（顶点）。从这个意义上说，区域是一个更高的抽象级别，即一个区域由一个或多个多边形组成。

# bluetooth - 几次连接后，Arduino HC-05 蓝牙崩溃

> ID：16193727
> 
> 赞同：1
> 
> 时间：2013-04-24T13:48:15.537
> 
> 标签：bluetooth, arduino

所以我使用了一个 Arduino Nano 和一个 HC-05 蓝牙模块。问题是，在一个接一个地进行多次连接后，模块停止连接到设备。android 应用程序不是问题，因为我尝试连接其他应用程序和同样的问题。

我确实尝试在 arduino nano 上添加一个看门狗，但似乎它不会在循环中崩溃。有什么建议我能做什么？

编辑：所以我看到如果我使用带有原始引导加载程序的看门狗不起作用，有其他解决方案如何重置或者为什么我的蓝牙模块在崩溃后不允许连接？

# .net - 将用户控件分配给选项卡项

> ID：16193730
> 
> 赞同：0
> 
> 时间：2013-04-24T13:48:24.280
> 
> 标签：.net, wpf, c#-4.0, data-binding

我正在尝试将名为 Analysis 的用户控件动态分配给 2 个选项卡项。但是，两个选项卡项具有不同的结构，因此我有 2 个分配函数通过将不同的数据传递给同一用户控件来填充两个选项卡项。

```
<TabItem  Header="Ambiguities" Style="{DynamicResource AnalysisTabItem}" >
     <AnalysisControls:Analysis ></AnalysisControls:Analysis>
</TabItem>
<TabItem x:Name="tcer"  Style="{DynamicResource AnalysisTabItem}" MouseLeftButtonDown="TCERLOAD" >
     <TabItem.Header >
         <Button  Click="TCERLOADButton_Click">
              <Button.Template>
                   <ControlTemplate>
                        <Label>TCER</Label>
                   </ControlTemplate>
              </Button.Template>
         </Button>
     </TabItem.Header>
<AnalysisControls:Analysis></AnalysisControls:Analysis>
</TabItem>
</TabControl> 
```

现在我希望在按钮单击事件上填充第二个 tabitem。所以这就是我用来分配它的东西。第一个 Tabitem 在初始化时自动填充。

```
private void TCERLOADButton_Click(object sender, RoutedEventArgs e)
{
        AnalysisViewModel a1 = new AnalysisViewModel();
        tcer.DataContext = a1.GetInstance1();
} 
```

但是，它并没有给我必要的结果。请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T15:07:08.147

您可以像构造函数一样将参数传递给 XAML 中的 UserControls，

不太清楚你在这里试图做什么很难给出解决方案，

# java - 如何清理和重建 JCreator 中的类？

> ID：16193731
> 
> 赞同：0
> 
> 时间：2013-04-24T13:48:41.490
> 
> 标签：java, jcreator

每次更改代码时，我都会得到过时的输出，因此我必须删除所有 .class 文件并再次运行项目以刷新输出。

# javascript - Durandal 和 JavaScript 严格模式。如何让实例淘汰？

> ID：16193733
> 
> 赞同：0
> 
> 时间：2013-04-24T13:48:46.167
> 
> 标签：javascript, knockout.js, durandal

Durandal 使用 Knockout，因此需要在 Durandal 之前加载 Knockout 脚本。在我的 ViewModel 上的 JavaScript 中使用严格模式时，“ko”变量不存在并给我一个错误。我认为我需要能够将 Knockout 作为模块加载，但这样做会加载 Knockout 两次，然后我的绑定会变得混乱。我似乎无法掌握 Durandal 使用的 Knockout 实例。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T13:36:32.483

我认为简短的回答是“你不能”。

正如您所说，Durandal 使用 Knockout 作为全局对象，以便在开发时更容易（与 jQuery 相同）。这将需要更改 Durandal 以始终将 Knockout 和 jQuery 作为模块加载。

# javascript - Javascript 正则表达式：根据长度创建不同的空格：1 000、10 000、100 000

> ID：16193734
> 
> 赞同：2
> 
> 时间：2013-04-24T13:48:47.880
> 
> 标签：javascript

所以，我有这个字符串，它可以包含任何长度的数字。

```
10
100
1000
10000
100000 
```

我需要一个使字符串像这样的正则表达式：

```
10
100
1 000
10 000
100 000 
```

对于 100000，我做了这个：`/.{1,3}/g`，但这仅适用于 100 000 及以上。这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T13:53:37.903

所以基本上你想要千位分隔符。

查看[`number_format`PHPJS](http://phpjs.org/functions/number_format/)，或使用此简化版本：

```
var num = 10000;
alert((""+num).replace(/\B(?=(?:\d{3})+(?!\d))/g," ")) // 10 000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T13:53:51.013

您可以查看[phpjs 上的代码](http://phpjs.org/functions/number_format/)。

他创建了一个 Javascript 函数来模仿 php 的`number_format()`.

这是复制/粘贴，我删除了评论：

```
function number_format (number, decimals, dec_point, thousands_sep) {
  number = (number + '').replace(/[^0-9+\-Ee.]/g, '');
  var n = !isFinite(+number) ? 0 : +number,
    prec = !isFinite(+decimals) ? 0 : Math.abs(decimals),
    sep = (typeof thousands_sep === 'undefined') ? ',' : thousands_sep,
    dec = (typeof dec_point === 'undefined') ? '.' : dec_point,
    s = '',
    toFixedFix = function (n, prec) {
      var k = Math.pow(10, prec);
      return '' + Math.round(n * k) / k;
    };
  // Fix for IE parseFloat(0.55).toFixed(0) = 0;
  s = (prec ? toFixedFix(n, prec) : '' + Math.round(n)).split('.');
  if (s[0].length > 3) {
    s[0] = s[0].replace(/\B(?=(?:\d{3})+(?!\d))/g, sep);
  }
  if ((s[1] || '').length < prec) {
    s[1] = s[1] || '';
    s[1] += new Array(prec - s[1].length + 1).join('0');
  }
  return s.join(dec);
} 
```

我不相信这段代码。

# android - 如何在Android中连续淡入和淡出按钮？

> ID：16193740
> 
> 赞同：0
> 
> 时间：2013-04-24T13:49:08.113
> 
> 标签：android, animation, infinite

当用户激活一项功能时，我想在我的 android 应用程序中淡入和淡出一个按钮。我在 stackoverflow 上看到了显示淡入或淡出的示例。但是有没有一种简单的方法可以将输入/输出动画组合在一起，重复无限的时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:54:10.007

在您的`Animation`对象上使用以下内容：

```
myAnimation.setRepeatCount(Animation.INFINITE);
myAnimation.setRepeatMode(Animation.REVERSE); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T14:02:02.220

我不是 100% 确定你的问题，但这对我来说是一个继续淡出和淡入动画：

```
int value = 0;
    for (int i=0;i<100000;i++){
        if (value == 0){
            doFadeOutAnimation();
            value = 1;
        }
        else if (value == 1){
            doFadeInAnimation();
            value = 0;
        }
    } 
```

# sql - 亚马逊红移中的多对多交集表

> ID：16193741
> 
> 赞同：2
> 
> 时间：2013-04-24T13:49:08.457
> 
> 标签：sql, amazon-redshift

如何在普通 sql 中执行类似于多对多基数表的最佳方法。

示例 - 三个表：Product(id identity, name varchar(max)), Sale(id identity,customer varchar(max)), SalesLine(id identity, product integer references product, sale integer references sale)：

```
INSERT INTO Product (name) VALUES ('new product');
INSERT INTO Sale (customer) VALUES ('new customer');
INSERT INTO SaleLine(product, sale) VALUES(?,?); 
```

在 postgresql 中，类似的东西`currval`很有帮助，但这在 amazon redshift 中不可用。

我在想也许需要其他一些范例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T10:45:23.017

AFAIK redshift 不支持插入返回/currval/类似的东西。你可以在亚马逊红移论坛[https://forums.aws.amazon.com/thread.jspa?messageID=449390看到这个](https://forums.aws.amazon.com/thread.jspa?messageID=449390)

如果您有串行插入（不是来自多个线程），我的建议是不要使用 Identity 列，而是维护一个 pk 和一个具有高价值的 ref 表并自己指定 ID。

PS这个解决方案也适用于并行插入它只是有点棘手。

# neventstore - EventStore 重复提交查询

> ID：16193742
> 
> 赞同：2
> 
> 时间：2013-04-24T13:49:09.143
> 
> 标签：neventstore

为什么@Jonathan Oliver 的 EventStore 的 SQL 持久性用作`CommitSequence`检测重复提交的标准之一？为什么不`StreamId`足够`CommitId`？

请参阅下面的 SQL。

```
SELECT COUNT(*) 
FROM Commits
WHERE StreamId = @StreamId
  AND CommitSequence = @CommitSequence
  AND CommitId = @CommitId 
```

此 SQL 语句来自`SqlPersistenceEngine.DetectDuplicate()`. 它用于确定`DuplicateCommitException`应该抛出 a 还是只抛出`ConcurrencyException`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T00:03:58.827

不确定你的 SQL 是关于什么的。

CommitSequence 参与唯一索引的原因是，如果有 2 个人同时在修改 v5，那么一个人可能会写一个带有 1 个事件的 v6，而另一个人会写一个带有不同事件的 v6。

在某些情况下，所有编写者都有一个共同的提交 ID 来源，但很多时候（Common Domain 会这样做），只是生成一个随机`Guid`的提交 ID，在这种情况下，您仍然希望检测到冲突。

我想有人可能会滥用 GUID 来创建一个固定序列，该序列对 StreamVersion（上面的 v6）进行编码以生成 Commit Id 以使其冗余，但对我来说，它显然是需要和有用的。

请务必阅读 NuGet 包 BTW 中的自述文件 - IMO 对这些内容的大部分进行了很好的解释。

# java - 访客模式的实现

> ID：16193752
> 
> 赞同：1
> 
> 时间：2013-04-24T13:49:30.390
> 
> 标签：java

我们在游戏中实施了一个库存作为学校作业。清单是使用包含项目的 ArrayList 实现的。有不同类型的物品：手榴弹、火箭发射器等。

我们需要能够将每个项目存储在一个数组列表中。但是，有些物品有限制（例如，库存中只能有 6 个手榴弹。）

我们不允许使用 instanceof。所以我们实现了一个访客模式，将手榴弹添加到我们的库存中，我们为手榴弹使用了与其他物品不同的列表。在评估任务期间，我们被告知我们应该将每个项目存储在同一个列表中。我们不允许对库存中的手榴弹进行计数。在尝试将手榴弹添加到库存之前，我们应该计算手榴弹的数量。但我们不知道如何实现这一目标。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T13:54:53.740

您猜到的访问者模式是正确的选择。但实施后，它看起来像这样：（伪代码）：

```
interface InventoryVisitor{
    onGrenade(theGrenade);
    onDefaultItem(theItem);
}

class DefaultItem{
    visit(visitor){visitor.onDefaultItem(this);}
}

class Grenade extends DefaultItem{
    visit(visitor){visitor.onGrenade(this);}
} 
```

然后，您`visit`使用 InventoryVisitor 的实现调用inventoryList 的每个项目，例如计算手榴弹的数量并抛出异常，如果有超过六个。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-24T13:56:43.660

我假设您有一些接口`Item`，并且在该接口上您可以有一个`getItemType`返回枚举值的方法。

```
public enum ItemType {
    Grenade,
    RocketLauncher
}

public interface Item {
    ItemType getItemType();
} 
```

它不是很花哨，但您至少可以不使用就询问项目它是什么类型，`instanceof`并且您不必使用访问者模式。但也许模式是任务的一部分？

# internet-explorer-8 - Zend Framework 2 重定向如果旧浏览器如何？

> ID：16193753
> 
> 赞同：-2
> 
> 时间：2013-04-24T13:49:37.403
> 
> 标签：internet-explorer-8, zend-framework2

我需要在使用 Ie 8 或更早版本的页面（不支持）用户中重定向我该怎么办？帮手？第二个问题，如果我给用户机会继续，我必须在会话中存储这个偏好？

谢谢斯特凡诺

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:08:20.397

一种解决方案

**onBootstrap**似乎是正确的，但没有机会继续进行。 [http://php.net/manual/fr/function.get-browser.php](http://php.net/manual/fr/function.get-browser.php)

其他 **使用 javascript 检查的解决方案** [如何检测浏览器的版本？](https://stackoverflow.com/questions/5916900/detect-version-of-browser) 是更好的解决方案并将其存储在 cookie 中

# java - 如何使用 jdom2 访问前面的第一个文本节点

> ID：16193754
> 
> 赞同：0
> 
> 时间：2013-04-24T13:49:39.943
> 
> 标签：java, dom, tree, implementation

给定一个元素节点，我想使用 jdom2 访问前面的第一个文本节点。例如：

```
<tr>
   <td>Price:</td>
   <td>
       <span>
           <b>$15.99</b>
       </span>
       <span>
           ........
       </span>
   </td>
</tr> 
```

如果我们给定元素，我们如何获得前面的文本“价格：”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T01:54:23.310

好的，现在我有答案了。XPath：

```
"preceding::text()[normalize-space(.)!=''][position()=1]" 
```

可以找到前面的文本节点。

# wcf - 是否有监控 WCF 队列的工具？

> ID：16193757
> 
> 赞同：2
> 
> 时间：2013-04-24T13:49:49.443
> 
> 标签：wcf, monitor

是否有任何工具可以监视来自 WCF 服务的传入和传出呼叫？

我不是说 MSMQ，我的意思是排队的呼叫服务无法处理，因为它很忙。

也许是性能监视器的一些配置文件？

亲切的问候马丁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-20T20:02:30.620

对于托管在 IIS 上的 WCF，您可以使用[ASP.NET 性能计数器](http://msdn.microsoft.com/en-us/library/fxk122b4.aspx)来查看排队请求的数量、当前请求等，例如：

*   **ASP.NET\Requests 排队**
*   **Web 服务\当前连接**

尽管 WCF 有很多可用的[性能计数器](http://msdn.microsoft.com/pl-pl/library/ms750527%28v=vs.110%29.aspx)，但没有一个指示队列长度。

如果您正在谈论排队的消息内容，那么没有简单的方法。我唯一能想到的就是对进程进行完整的内存转储并对其进行调查。但这当然是非常侵入性的单发任务。

# node.js - 如何在外部 node.js 应用程序中重载函数？

> ID：16193759
> 
> 赞同：0
> 
> 时间：2013-04-24T13:49:51.390
> 
> 标签：node.js, overloading

我是 node.js 编程的新手。我需要更改现有 node.js 应用程序（Haraka SMTP 服务器）中一项功能的行为。

这样做的最佳做法是什么？我应该使用插件还是有其他方法可以在 node.js 应用程序中重载一个特定的 JS 函数？这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T14:13:09.943

节点`require`缓存加载的对象。因此，您可以覆盖对象的函数，做一些事情，调用原始函数，然后再做一些事情。

```
var fs = require('fs');

var origRenameSync = fs.renameSync;
fs.renameSync = function(oldPath, newPath) {
    newPath += ".renamed";
    origRenameSync.call(this, oldPath, newPath);
    // do more here
}; 
```

这是一个糟糕的例子，你**永远不应该以这种方式更改核心库**。您无法预见所有副作用。

但是，如果您知道自己在做什么，则可以采用现有的库而无需在内部更改它们。这是一种非常灵活的装饰函数的方式。

# wpf - Citrix Receiver 无法显示直接绘图软件并且无法使用通知用户事件

> ID：16193765
> 
> 赞同：-1
> 
> 时间：2013-04-24T13:50:22.367
> 
> 标签：wpf, directx, citrix, citrix-access-gateway

Citrix Receiver无法显示直接绘制软件，只能执行。我的软件是C#编写的，使用SQL server2005和直接绘制皮肤。如何解决？

第二个问题：我用的是最新的Citrix SDK，在iPad上无法使用notify user event。我的Citrix是3.0版本，因为公司已经购买了那个版本的软件，所以无法更新。

```
int __cdecl main(int argc, char **argv)
{
    CMPRESULT rc;
    HANDLE hCMP = NULL;

    // initialize for STA (Single Thread Apartment) in COM
    rc = CMPInitialize(FALSE);

    ReportStatus("CMPInitialize", rc);

    // Open a handle to the mobile device
    rc = CMPOpen(&hCMP);

    ReportStatus("CMPOpen", rc);

    if(CMP_SUCCESS(rc)) 
```

我测试了代码并失败了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T04:38:07.173

版本 3.0 iOS 接收器太旧，无法支持 Citrix Mobile App SDK。如果您必须使用旧版本的接收器，那么您将无法使用此 SDK。

仅供参考，Citrix Mobile App SDK 的官方论坛在这里：

[http://forums.citrix.com/forum.jspa?forumID=1366&start=0](http://forums.citrix.com/forum.jspa?forumID=1366&start=0)

如果您在该论坛上发帖，您更有可能得到对您的问题的答复。

# javascript - 用ajax加载的调用函数

> ID：16193766
> 
> 赞同：0
> 
> 时间：2013-04-24T13:50:24.577
> 
> 标签：javascript, jquery, html, ajax

我正在从 html 将数据加载到我的 div，如下所示：

```
$('#result').load('ajax/test.html'); 
```

在里面`test.html`我有一个`alertme`功能。
有没有办法在当前文档中加载html后调用此方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T13:53:49.717

```
$('#result').load('ajax/test.html', function(){
    alertme();
}); 
```

*   [没有包装功能的无效示例](http://jsfiddle.net/KpNaw/)
*   [带有包装功能的工作示例](http://jsfiddle.net/KpNaw/1)

# ios - 从 UIPageViewController 中删除之前添加的 viewController

> ID：16193767
> 
> 赞同：0
> 
> 时间：2013-04-24T13:50:24.590
> 
> 标签：ios, objective-c, uiviewcontroller, uipageviewcontroller

我正在使用一个数组在 UIPageViewController 上添加一些 viewController。问题是当您进一步滑动时它们会留在内存中，我想删除它们。我找到了这个委托方法：

```
- (void)pageViewController:(UIPageViewController *)pvc didFinishAnimating:(BOOL)finished previousViewControllers:(NSArray *)previousViewControllers transitionCompleted:(BOOL)completed
{
    // If the page did not turn
    if (!completed)
    {
        return;
    }
    // This is where I want to delete the previousViewControllers to release memory
} 
```

但是如何删除那些previousViewControllers？如果您向后滚动，它们需要重新加载，但我需要删除它们，否则它们会一直留在内存中。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-24T14:20:01.270

我从来没有使用过`UIPageViewController`，但它似乎`previousViewControllers`是一个只读的。我要做的是向以前的 ViewController 发送一条消息，告诉它们重新加载。

例如，我相信这将访问显示的最后一个 ViewController ：

```
MyVC *lastVC = (MyVC*)[previousViewControllers objectAtIndex:[previousViewControllers count]-1];
lastVC.reloadFlag = YES; // Assuming you have a reloadFlag property in your MyVC class 
```

因此，您可以将其放入问题中的方法中。

然后确保在您返回 ViewController 时`viewWillAppear`在您的`MyVC *`对象中调用，如果是，请在其中放入一个简单的东西：

```
if(_reloadFlag) {
    //updateUI
} 
```

这只是一个想法，您可能需要更改一些内容才能使其正常工作。

# javascript - 在 JS 或 Rails 中自动缩短 URL

> ID：16193769
> 
> 赞同：1
> 
> 时间：2013-04-24T13:50:40.737
> 
> 标签：javascript, jquery, ruby-on-rails

例如，在 Twitter 中，如果您在推文中发布链接，`http://stackoverflow.com/questions/8699459/get-title-content-via-link-in-rails`

URL 会自动更改为缩短的 URL： ![在此处输入图像描述](https://i.stack.imgur.com/H5dB8.jpg)

对应的 Html 是：

```
 <span class="invisible">http://</span>
  <span class="js-display-url">stackoverflow.com/questions/8699</span>
  <span class="invisible">459/get-title-content-via-link-in-rails</span> 
```

（`http://`and`long part`被隐藏）

那么我该如何实现呢？我相信这与JS有关？或者我应该如何使用 Rails 来解决这个问题？

非常感谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:59:38.273

我认为这就是您正在寻找或至少接近它的东西。

```
aHref.innerHTML = aHref.match(/([\w\d\-_]*\.)+(\w*$|\w*\/[\w\d]*)/)[0]; 
```

简而言之; 这将忽略协议：// 并采用以“。”结尾的每个字符串。（对于子域）直到它到达最后一项（可以是“com”，也可以是“uk”，如“co.uk”），由“$”（字符串结尾）或“/”表示一个字母数字字符串。使用生成的字符串替换 innerHTML 或显示的内容值。

例如：“ [http://test.couch.com/333/fire](http://test.couch.com/333/fire) ”会变成“test.couch.com/333”

编辑：我应该补充一点，我只考虑了

```
A-Za-z0-9 and -_ 
```

在 url 中直到 "/" 并且只有

```
A-Za-z0-9 
```

对于其余部分。

编辑 2：在 Rails 控制器中使用

同样的原则也适用，但没有 innerHTML，因为它是一个 DOM 元素属性

```
 url = url.match(/([\w\d\-_]*\.)+(\w*$|\w*\/[\w\d]*)/).first 
```

上面的行将与 javascript 执行相同的操作，或者至少会创建相同的缩短 url。

如果您的意思是如何与助手一起使用：

```
shortUrl= url.match(/([\w\d\-_]*\.)+(\w*$|\w*\/[\w\d]*)/).first
link_to  shortUrl, url 
```

# sql - 查询处理 Sql Server

> ID：16193771
> 
> 赞同：1
> 
> 时间：2013-04-24T13:50:42.063
> 
> 标签：sql, sql-server-2005, rdbms, database

请帮助我查询。我在 DBMS 方面很薄弱。

我有一个表`TBLParent`，其中有如下几行

```
pkParentId   FKProductId     Name
  1              5             P1
  2              5             P2
  3              3             P3 
```

我有另一张桌子`TBLChild`，里面有它的孩子

```
pkId     fkParentId    ChildName
 1            1          C1
 2            1          c2
 3            2          c1 
```

现在，问题是我想要基于`productId`.

例如：我想

```
select 
    TBLParent.pkParentId, TBLParent.FKProductId, 
    TBLParent.Name, 
    count of its children
where   
    TBLParent.FKProductId = 5 
```

我试过这样

```
Select 
    count(TBLChild.pkId) AS total, 
    TBLChild.fkParentId    
from  
    TBLChild 
group by 
    TBLChild.fkParentId 
```

但是我怎样才能用这个计数附加父表的记录呢？

这会给我计数，但我将如何将父记录附加到此计数。我的意思是说输出将是

```
pkParentId   Name      Count
  1           P1         2
  2           P2         1 
```

请帮忙请帮忙请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T14:00:22.100

```
SELECT P.pkParentId
      ,P.Name
      ,COUNT(*)
FROM tblParent P
INNER JOIN tblChild C ON P.pkParentId = C.fkParentId
WHERE P.pkParentId = @yourValueHere
GROUP BY P.pkParentId, P.Name 
```

# puppet - 如果文件被某个包修改，则执行 puppet 类

> ID：16193772
> 
> 赞同：0
> 
> 时间：2013-04-24T13:50:47.150
> 
> 标签：puppet

我正在使用 puppet 来部署标准化的 ubuntu 安装以及配置文件。我面临安装某个包（通过依赖项）将覆盖关键配置文件的问题。有没有办法监控这个文件是否改变（被某些包覆盖）并恢复它的原始内容？实现这一目标的最佳方法是什么？

这是负责配置的类`/etc/nsswitch.conf`：

```
class nsswitchconfig {

    # roll out nsswitch   
    class { 'nsswitch':
            passwd => ['compat'],
            group => ['compat'],
            hosts  => ['files'],
            automount => ['files'],
    }

    notify { "hate #8040": message => "work around bug #8040" }

} 
```

这是覆盖的类`/etc/nsswitch.conf`

```
class desktop {

    include nsswitchconfig

    $package_name = ["ubuntu-desktop" ]
    package { $package_name:
                ensure => latest,
            }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T20:55:36.733

如果 nsswitch 类配置了该文件，您只需要确保它在覆盖它的类**之后运行。**

所以在你的情况下：

```
class { 'nsswitch':
            passwd => ['compat'],
            group => ['compat'],
            hosts  => ['files'],
            automount => ['files'],
            require   => Class['desktop'],
    } 
```

应该做的伎俩。（注意要求部分）

# c - C中是否有任何精确的三角函数？

> ID：16193783
> 
> 赞同：1
> 
> 时间：2013-04-24T13:51:16.740
> 
> 标签：c, trigonometry

我正在处理一些需要使用三角函数的编程问题。不幸的是，`math.h`库中的函数似乎不准确。这是一个例子：

```
#include <stdio.h>
#include <math.h>    
int main() {
  double a, b, c, d;
  a = sin(0.0);
  b = sin(90.0);
  c = cos(0.0);
  d = cos(90.0);
  printf("A = %lf\nB = %lf\nC = %lf\nD = %lf\n", a, b, c, d);
  return (0);
} 
```

输出：

```
A = 0.000000
B = 0.893997
C = 1.000000
D = -0.448074 
```

那么有没有办法让这些函数准确呢？还是我必须使用系列制作自己的功能？

我用谷歌搜索，到目前为止找不到任何方法来使功能准确，但使用系列。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-24T13:55:13.083

函数`sin()`和`cos()`期望弧度。它们通常是“忠实的”，也就是说，它们在数学结果的 1 [ULP](http://en.wikipedia.org/wiki/Unit_in_the_last_place "单位在最后一位")范围内产生结果，至少对于多达几千个参数。

```
#include <stdio.h>
#include <math.h>    
int main() {
  double a, b, c, d;
  a = sin(0.0);
  b = sin(0.5 * 3.1415926535897932);
  c = cos(0.0);
  d = cos(0.5 * 3.1415926535897932);
  printf("A = %lf\nB = %lf\nC = %lf\nD = %lf\n", a, b, c, d);
  return (0);
}

A = 0.000000
B = 1.000000
C = 1.000000
D = 0.000000 
```

**编辑添加：**

Camilo Martinez 指出，“Unit in the Last Place”是一个特殊的概念。简单来说，有有限数量的`double`值，在零附近更密集：

```
++-+-+-+---+---+-------+---------------+-------------------------------+-- 
```

您正在计算的精确三角值几乎总是介于这两个`double`s 之间（唯一的例外是`sin(0.0) = 0.0`和`cos(0.0) = 1.0`）：

```
++-+-+-+---+---+-------+---------------+-------------------------------+--
                       |    ^          |
                     lower  |       upper
                     double |       double
                            |
                   exact (mathematical) result 
```

大多数库提供的函数在正常情况下会`double`立即为您提供精确结果的上方或数学结果的下方。考虑到问题的难度，这非常好。

一些库提供的函数将为您提供**最接近**精确结果的双精度输入（甚至`1E21`）。这是一个惊人的结果。直到最近，这只能以昂贵的计算为代价来获得，但现在，您甚至可以获得几乎与过去不太准确的函数一样快的结果。

最后，有时您甚至没有申请`sin()`或申请`cos()`您想要的数字，而只是对其最接近的`double`近似值。在您的示例中，一旦修复就是这种情况：您想将`sin()`and`cos()`应用于 π/2，但不能，因为 π/2 不能表示为 a `double`。您必须将它们应用到最近的可用`double`位置（这是固定程序所做的）。

这种不准确可能会**加剧**。他们确实给浮点计算带来了坏名声的过程，但实际上，浮点不准确性复合的方式是非常可预测的，并且可以在编写使用浮点的程序时考虑在内。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T14:49:02.947

如果您确实需要以度数工作并获得正确的结果，那么标准的三角函数是不够的。例如，`cos(90*M_PI/180)`不会屈服`0.0`。错误可能小于 1ulp，除非正确结果为零（或可能非常接近零），因此您可能只是决定对使用它们感到满意。为了获得更好的结果，您需要调整现有算法以在度数上工作（在某些方面这会更容易，因为参数减少是实现三角函数最困难的部分之一，在度数上是微不足道的）并做一些数值分析，以确保您在所需的误差范围内。

以度为单位工作的快速修复方法是仅使用 30 的特殊情况倍数（所有确切结果均下降），然后`cos(x*M_PI/180)`对所有其他值调用等。这不会是完美的，但至少它会避免在应该精确的点上引入混乱的不精确性。

# asp.net-mvc - 实体框架异常”在 linq to 实体中不支持指定的类型成员，只有属性

> ID：16193785
> 
> 赞同：-1
> 
> 时间：2013-04-24T13:51:26.463
> 
> 标签：asp.net-mvc, entity-framework, exception, ef-code-first

以下代码快照引发异常。

```
 public Models.Web.User GetLogingUser(string username, string password)
   {
       using (Data.User_Repository repository = new Data.User_Repository())
       {
      IQueryable<Models.Web.User> query = repository.FindAll().Select(x =>new             Models.Web.User()).Where(c => c.UserName.Equals(username.ToString())).AsQueryable();
           return query.Where(x => x.Password.Equals(password.ToString())).First();
       }
   } 
```

在这里，存储库类具有通用方法 insert、update、delete、find、findall 等。在调试过程中，我发现输入的用户名记录被检索但是当它分配给“查询”变量时，我得到以下错误异常。请帮助我。感谢“在 LINQ to Entities 中不支持指定的类型成员 'UserName'。仅支持初始化程序、实体成员和实体导航属性。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:12:34.857

它的 .Equals() 是你的问题。使用`==,`因为这将在数据库服务器上执行，它将使用为您的数据库配置的案例比较类型。

# c# - 如何为每个项目循环 listbox.FindString()

> ID：16193786
> 
> 赞同：0
> 
> 时间：2013-04-24T13:51:29.820
> 
> 标签：c#, search, loops, listbox

我一直试图找到一种方法来循环`listbox.FindString()`每个项目以搜索项目列表框。只是一个例子：

示例代码：

```
string myString = "hi";

int index = listBox1.FindString(myString, -1);

if (index != -1) {
    listBox1.SetSelected(index, true);
    MessageBox.Show("Found the item \"" + myString + "\" at index: " + index);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:53:26.557

您可以使用`while`循环：

```
int index = ListBox.NoMatches;
while ((index = listBox1.FindString(myString, index)) != ListBox.NoMatches)
{
    MessageBox.Show("Found the item \"" + myString + "\" at index: " + index);
} 
```

# jquery - jquery rating-plugin 在引导弹出窗口中不起作用

> ID：16193791
> 
> 赞同：3
> 
> 时间：2013-04-24T13:51:47.183
> 
> 标签：jquery, twitter-bootstrap, popover

我正在使用 jQuery 评级插件 ( [http://wbotelhos.com/raty](http://wbotelhos.com/raty) )。如果我把它放在一个 Bootstrap 弹出窗口中，它就不再工作了，控制台中没有显示错误。它只显示“星星”，但没有任何功能。

我尝试了两个不同的评级插件 - 都不能在弹出框内工作。

的HTML：

```
<button id="popup_rating" data-container="body" data-html="true" data-trigger="click" data-placement="top" data-title="Rating" class="btn rating">Rating</button>
<div id="popover_content_wrapper" class="hide">
        <div id="star"></div>
</div> 
```

js：

```
<script>
    $(function () {

        ...

        $("#popup_rating").popover({
            content: function() {
              return $('#popover_content_wrapper').html();
            }
        });  
        $('#star').raty();

    })
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T08:34:42.340

有更简单的解决方案......只需在弹出窗口的末尾添加 .click 并调用 raty 如下例......就像一个魅力......我也以同样的方式添加了引导滑块

```
$('.popover-input-1').popover(
{
  html: true,
  trigger: 'click',
  content: $(".form-input-1").html()
}).click(function(){
//raty star rating  
  $('#star').raty();

//bootstrap slider
  $('#sl1').slider({
    formater: function(value) {
      return 'Current value: '+value;
    }
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:47:45.343

我自己修复了它并将所有内容都放在数据内容属性中：

```
<button id="popup_rating"  data-container="body" data-html="true" 
data-trigger="click" data-placement="top" data-title="Rating" class="btn rating" 
data-content="Hallo: <div id='star'></div><script>$(function () { 
$('#star').raty({ path: 'js/' }); } </script>">Rating</button> 
```

不确定这是否是优雅的方式，但它有效:-)

# java - 如何以编程方式动态添加 liferay portlet 实例并单击按钮将 portlet 安装到仪表板页面？

> ID：16193798
> 
> 赞同：2
> 
> 时间：2013-04-24T13:51:59.263
> 
> 标签：java, liferay, portlet

我有一个动态创建的 liferay portlet 实例并以编程方式添加到布局中，如下所示

```
String portletId = objUtil.addPortlet("/prj/reports", "XYZPortlet_WAR_ecpmportlet", "column-2",groupId, "type: " + getSelectedType()); 
```

因此，它向`/reports`页面添加了一个 portlet。
我想在 Portlet 下方添加一个按钮，该`send to dashboard`按钮在单击我想将此 Portlet 永久安装到用户仪表板的按钮时调用。

***注意：***可以将任意数量的 portlet 实例添加到`/report`s 页面。

如您所见，XYZPortlet 是 liferay-portlet.xml 中定义的 portlet 的 ID，liferay-display.xml 对于我添加到报告页面的所有 portlet 保持相同。

我想动态地为 portlet 实例分配一个新的 ID 并将其永久安装到仪表板布局中。

谁能建议一种方法来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T13:57:33.043

简单获取全局 portletId 并将其添加到用户主页：

```
LayoutTypePortlet layoutTypePortlet = (LayoutTypePortlet) userlayout.getLayoutType();
String portletInstanceId = layoutTypePortlet.addPortletId(0, portletId, columnId, -1, false);
LayoutLocalServiceUtil.updateLayout(userlayout.getGroupId(), userlayout.isPrivateLayout(), userlayout.getLayoutId(), userlayout.getTypeSettings()); 
```

# ios - Objective-C iOS 捕获一个 js/html 事件

> ID：16193799
> 
> 赞同：0
> 
> 时间：2013-04-24T13:52:00.493
> 
> 标签：ios, objective-c, uiwebview

我刚从objective-c/ios开始，我试图从嵌入uiwebview的html中捕获一个事件。

在android中，您可以使用js界面来完成。

我已经设法从ios调用了一个js函数，现在我需要做相反的事情。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:58:58.780

您不能将`Objective`-C 代码与`HTML`在 UIWebView 上本地运行的文件混合。也就是说，有一些解决方法可能适合您的需求。

我使用的一种方法是让 HTML 链接到自定义 URL，并在 UIWebView 委托类中的适当方法上检测到该链接，如下所示：

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType 
```

在该方法中，您将通过检查请求参数来检查您创建的 URL 模式，然后决定在您的 Objective-C 代码上编写什么选择器。

[有关简单的函数调用，请参阅此博客。](http://davinccoder.wordpress.com/2011/06/28/call-ios-method-for-html-button-click/)

[您需要的另一个博客](http://iosameer.blogspot.in/2012/09/bridge-between-javascripthtml-and.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T14:11:59.037

您可以通过使用目标 C 中的 phone gap 框架来实现这一点。我在 phonegap 项目中使用了相同的框架来调用设备令牌。

这是在 javascript 中使用的示例。

```
 cordova.exec(null, null, "deviceCls", "getDeviceToken", [args] 
```

您必须将您的类（deviceCls）指向 phonegap 插件 plist。

[在此处](http://phonegap.com)检查电话间隙链接

# css - 在 td class="hidden-phone" 上调整字体大小

> ID：16193800
> 
> 赞同：1
> 
> 时间：2013-04-24T13:52:05.143
> 
> 标签：css, ruby-on-rails, twitter-bootstrap

我有一个列，我想缩小其字体大小，但我无法让设置生效。这是原始代码：

```
<td class="hidden-phone"><%= thing_to_shrink %></td> 
```

我试过了：

```
<td class="hidden-phone" style="font-size:small;"><%= thing_to_shrink %></td> 
```

和

```
<span style="font-size:small;"><td class="hidden-phone"><%= thing_to_shrink %></td></span> 
```

有人有想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T14:01:33.347

返回的是什么`thing_to_shrink`，如果它是一个字符串，它应该可以工作并且会采用`12px`类的`hidden-phone`字体大小

```
<td class="hidden-phone">SOME STRING</td> 
```

但它正在生成类似于以下内容的 HTML

```
<td class="hidden-phone">
  <span style="font-size:20px;"> SOME STRING</span>
</td> 
```

那么它将采用字体大小 20px 而不是 12px

# java - 如何在android中使用post数据调用webservice

> ID：16193801
> 
> 赞同：0
> 
> 时间：2013-04-24T13:52:07.273
> 
> 标签：java, android, web-services

我没有得到任何回应，我的代码有什么问题。由于隐私政策，我没有提供正确的 URL。

```
public static String URL = "http://www.example.com/web_service/mainAPI.php";
final String body = String.format("rquest={\"method\":\"upcoming_shows\",\"body\":[{}]}");
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.upcoming_show);
    try{    
        Log.d("In Try", "Going...");
        final HttpClient client = new DefaultHttpClient();
        final HttpPost postMethod = new HttpPost(URL);
        postMethod.setEntity(new StringEntity(body, "utf-8"));
        final HttpResponse response = client.execute(postMethod);
        final String responseData = EntityUtils.toString(response.getEntity(), "utf-8");
        Toast.makeText(UpcomingShow.this, responseData, Toast.LENGTH_SHORT).show();
        }catch (Exception e) {
            // TODO: handle exception
            e.printStackTrace();
        } 
```

请给我一些解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T15:41:39.080

1.  您正在尝试在 UI 线程上访问网络，这不再被允许。见[这里](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)。[在](https://stackoverflow.com/questions/6343166/android-os-networkonmainthreadexception/6343299#6343299)这里。
2.  你可能有一个错字`String body`，它说`rquest`，我相信它应该是`request`（在第 2 行）

# android - Android SMS 接收：我在接收器中获取 pdus null

> ID：16193806
> 
> 赞同：1
> 
> 时间：2013-04-24T13:52:16.780
> 
> 标签：android, sms

我在发送短信接收器时遇到问题。我在`Manifest`权限和意图过滤器中设置，在`Activity`- 创建短信并`BroadcastReceiver`捕获意图，如教程

这是来自的代码`Activity`

```
 try {
            String DELIVERED = "SMS_RECEIVED";
            PendingIntent deliveredPI = PendingIntent.getBroadcast(context, 0, new Intent(DELIVERED), 0);
            SmsManager smsManager = SmsManager.getDefault();
            smsManager.sendTextMessage(contact.getPhone(), null, message, null, deliveredPI);
        } catch (Exception e) {
            Log.e(LOG_TAG, "Sms do not sent");
        } 
```

这是权限`Manifest`

```
<uses-permission android:name="android.permission.SEND_SMS" />
<uses-permission android:name="android.permission.RECEIVE_SMS" />
<uses-permission android:name="android.permission.READ_CONTACTS"/>
    ...
    <receiver android:name="com.uniquare.sms.globals.DeliveredReceiver">
        <intent-filter>
            <action android:name="android.provider.Telephony.SMS_RECEIVED" />
        </intent-filter>
    </receiver> 
```

和一部分`Receivers`

```
 public class DeliveredReceiver extends BroadcastReceiver {
private static final String LOG_TAG = "DeliveredReceiver";

@Override
public void onReceive(Context context, Intent intent) {
    Log.d(LOG_TAG, "onReceive()");
    //get the SMS message passed in
    Bundle bundle = intent.getExtras();
    SmsMessage[] msgs = null;
    String phone = "";
    if (bundle != null) {
        //retrieve the SMS message received
        Object[] pdus = (Object[]) bundle.get("pdus");
        msgs = new SmsMessage[pdus.length];
                    ..... 
```

对我来说有些奇怪。如果我向我当前的设备发送短信，`BroadcastReceiver`工作正常。但是，如果我从联系人列表发送给其他用户`BroadcastReceiver`根本不起作用。

我尝试设置`android.provider.Telephony.SMS_RECEIVED`而不是`SMS_RECEIVED`in `Activity` `PendingIntent`：

```
 String DELIVERED = "android.provider.Telephony.SMS_RECEIVED";
            PendingIntent deliveredPI = PendingIntent.getBroadcast(context, 0, new Intent(DELIVERED), 0); 
```

在这种情况下`DeliveredReceiver`是有效的，`onReceive`被调用，但是当我尝试从中获取时`pdus`，`Object[] pdus = (Object[]) bundle.get("pdus");`我得到了`null`.

你有同样的问题吗？你能建议我吗？

# php - 字符串在 PHP 中被随机截断

> ID：16193807
> 
> 赞同：2
> 
> 时间：2013-04-24T13:52:21.570
> 
> 标签：php, string, truncate

我正在开发的 PHP 脚本有问题。有时（非常罕见，但会发生）字符串没有正确连接，因为字符串的片段在此过程中会丢失，从而导致随机截断的字符串。

这是一个示例，它是收集订单信息并通过电子邮件将其发送给客户端的代码的一部分（这就是我被迫使用 html 表格的原因）。

```
$rowList[$rowCode] .= '<tr><td class="lens-price-serv"><small>' . $lang['services'] . ':</small>&nbsp;<strong>' . money_format( '%i', $srvPriceTotal ) . '</strong></td></tr>'; 
```

代码工作得很好。不过，今天早上，我收到了一封带有以下 html 的电子邮件（对应于我发布的 PHP 代码）：

```
<tr><td class="lens-price-serv"><s>Services: <strong>€ 10,00</strong></s></td></tr> 
```

我无法获得确切的 html 代码，这个来自 Chrome 的开发者工具。我认为发生的事情是“小”标签在字符串连接期间被截断，变成了一个开放的“s”标签。这个标签，没有相应的闭包'/s'标签，在关闭'td'之前被浏览器自动关闭。

这个问题很难复制。我尝试使用相同的参数创建新订单，但效果很好。

这是该问题第二次出现；第一次是在代码的另一部分，但字符串也被截断，导致输出错误。

这个问题会不会是服务器造成的？此脚本由运行 Apache 2.2.24 和 PHP 5.3.21 的共享主机托管。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T19:20:43.953

你也可以试试

```
$rowList[$rowCode] .= "<tr><td class='lens-price-serv'><small>{$lang['services']}:</small>&nbsp;<strong>" . money_format( '%i', $srvPriceTotal ) . "</strong></td></tr>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T07:14:32.657

Try to use

```
$rowList[$rowCode] .= "<tr><td class='lens-price-serv'><small>$lang['services']:</small>&nbsp;<strong>" . money_format( '%i', $srvPriceTotal ) . "</strong></td></tr>"; 
```

# html - 如何找出在我的样式表中覆盖 css 的 css 是什么？

> ID：16193810
> 
> 赞同：1
> 
> 时间：2013-04-24T13:52:46.743
> 
> 标签：html, css, printing, stylesheet

我创建了一个链接到我的 html 页面的打印样式表。字体、颜色等的更改在打印版本中有效，但我无法在打印版本中更改 div 的大小。例如，如果我的页面上有一个 300px X 300px 的内容 div，如果我更改打印版本中的尺寸，它不会更改它。为了找出问题的根源，我使用了检查元素来查看我的打印页面中是否有一个 css 覆盖了它。我发现内容 div 的宽度是由 body 宽度控制的。所以我尝试更改打印样式表中的内容高度和正文 div。那没有用。我还尝试为主 css 和打印 css 创建一个单独的样式表。那没有用。有没有另一种方法可以解决这个问题......可能类似于断点，但对于 html？

HTML：

```
 <!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <!--- TITLE - FROM SPECIFIC TO GENERAL --->
    <title>Page</title>
    <cfinclude template="/assets2011/webfonts/comment.htm" />
    <link rel="stylesheet" type="text/css"        href="/assets2011/MyFontsWebfontsOrderM2845569_css.css" />
    <link rel="stylesheet" type="text/css" href="/assets2011/css/global.css" />
    <link  href="print.css" type="text/css" rel="stylesheet" media="print"/>
    <style>

     body{
     width: 8700px;
     height:2000px;
     overflow: hidden;
     }
     #section{
     width: 8000px;
     float: left;
      height: 1000;
      z-index: 1;
      }
         #content{
       width: 1000px; height:300px; margin-top: 10px; margin-left: 50px; overflow: auto;
       }
      .navbarLeft{
      height: 700px;
      width: 40px;
       top:0;
     z-index: 2;
       position:absolute;
      background-position: 50% 30%;
       background-image: url(navL.png);
     background-repeat: no-repeat;
    opacity: 0.05;
      }
      .navbarLeft:hover{
       opacity: 0.5;
       }
        .navbarRight{
       height: 700px;
      width: 40px;
    top: 0;
     z-index: 2;
    position: absolute;
    background-position: 50% 30%;
    background-image: url(navR.png);
    background-repeat: no-repeat;
    opacity: 0.05;
    left: 2013px;
     }
    .navbarRight:hover{
      opacity: 0.5;
    }
    table,tr,td {
    border:1px solid black;
    }

    </style>

     </head>
      <body>
      <!--Factor 1-->
     <div class="section" id="factor1">
     <div id="content">  
     <!--Begin Content-->
            <p>textiyiuypilkhjkujp;mjl;juipoupoj;hikhiyuiuj</p>
        </div>  
    <!--End Content-->

      <!-- Navigation -->
     <ul class="nav">  
    <a href="#factor2"><div class= "navbarLeft" id="menu" style="left: 755px;"></div></a>
      </ul>
      </div>
      <!--End Factor 1--> 

   <!--Factor 2-->
   <div class="section" id="factor2">
    <div id="content">
        <p>text2khlikhlkj;ljlji0piomloj;lkjoippm,klikp</p>
     </div>
     <ul class="nav">
     <a href="#factor1"><div class= "navbarRight" id="menu" style="left: 2005px;"></div>  
      </a>
     <a href="#factor3"><div class= "navbarLeft" id="menu" style="left: 2755px;"></div></a>
     </ul>
    </div>
     <!--End Factor 2-->

    <!--JavaScript-->
     <script type="text/javascript"   
               src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script type="text/javascript" src="../newUI/jquery.easing.1.3.js"></script>
    <script type="text/javascript">
            $(function() {
                $('ul.nav a').bind('click',function(event){
                    var $anchor = $(this);
                    $('html, body').stop().animate({
                        scrollLeft: $($anchor.attr('href')).offset().left
                    }, 1000);
                    event.preventDefault();
                });
            });
      </script>
      </body>
    </html> 
```

CSS 打印样式表：

```
 body{
         width: 1000px;
        }

    #section, .navbarLeft, .navbarRight{
    display:none;
    }

    #content{
       font-size: 110px;
       overflow:visible;
       height: 1000px;
       page-break-after: always;
       margin-top:10px; 
       margin-left:50px; 
    } 

    p a:after {
    content: " (" attr(href) ")";
    font-size: 50%;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:05:22.327

我发现 Chrome 浏览器开发者工具非常适合调试 CSS 问题。

在 Chrome 中打开页面并按 F12

![在此处输入图像描述](https://i.stack.imgur.com/cJi3y.png)

查看元素选项卡的右侧，您将看到应用于左侧所选 HTML 元素的所有 CSS。

您可以在工具箱中编辑 CSS，它会立即使用您的更改更新浏览器窗口。

可以在此处找到有关这些工具的更多信息：[https ://developers.google.com/chrome-developer-tools/](https://developers.google.com/chrome-developer-tools/)

# html - 图片卡在左边

> ID：16193812
> 
> 赞同：1
> 
> 时间：2013-04-24T13:52:50.470
> 
> 标签：html, css

好的，这是我正在制作的带有花式框的订阅框，一切进展顺利。这里只是一个小问题。我正在使用的图像卡在左侧，甚至 margin 属性也没有用。

```
<style type="text/css">
    body{
        background-image:url(../../images/subscribe.png);
        background-repeat:no-repeat;
        background-position:left bottom;
        margin-bottom:85px;
        line-height:2px;
        margin-left:10px;
        margin-right:10px;

    }
    #h1_1 {

        something;

    }
    #h1_2 {
        something;
    }
    #h1_3 {
        something;

    }

/*
    #img1_1 {
        background-position:left bottom;
        margin:0px;
        background-repeat:no-repeat;

    }
    */

    </style>
    </head>
    <body>

        <p id="h1_1">
        <b>Subscribe Us</b>
        <br>
        <p id="h1_2"> Sometext</p><!-- end h1_2 -->

        <p id="h1_3"> sometext</p><!-- end h1_3 -->
        </p> <!-- end h1_1 -->

     <!--   <img src="../../images/subscribe.png" id="img1_1">  -->

    </body>
    </html> 
```

如果应用了边距属性，则整个身体都会移动，并且如果我不将图像放在背景中，则在正文中创建，这样我就无法在图像旁边写下确切的文本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T13:57:44.103

我认为这会让你朝着正确的方向前进：

如果您使用 img 标签，那么这应该可以

```
#img1_1 {
    margin-left: 20px; 
} 
```

如果您使用背景图像，则应使用背景位置：

```
body {
    background-position: 20px 20px;
} 
```

没有冒犯，但我建议您进一步深入研究 CSS 和 HTML，因为这是一个非常基本的 CSS 问题。

# xcode - 我很想念 Xcode 中 Visual Studio 的 Control+Tab 快捷方式

> ID：16193813
> 
> 赞同：1
> 
> 时间：2013-04-24T13:52:56.360
> 
> 标签：xcode, macos, visual-studio, shortcuts

它在 Xcode 中的等价物是什么？我可以在 Xcode 中制作自己的自定义快捷方式吗？

Visual Studio 中还有哪些其他有用的键盘快捷键在 Xcode 中具有对应功能？

注意：Control+Tab 将代码切换回最近打开的代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:57:43.623

您可以使用这个小箭头将您带到最后编辑的代码。

![在此处输入图像描述](https://i.stack.imgur.com/vkZnO.png)

这些快捷方式在这里：

![在此处输入图像描述](https://i.stack.imgur.com/gGROw.png)

还可以在鼠标中轻扫将带您回到上一个文件。

# c++ - C++ - 使用地址解释转换 const

> ID：16193816
> 
> 赞同：1
> 
> 时间：2013-04-24T13:53:03.517
> 
> 标签：c++, casting, constants

我在 c++ 中编写了以下代码。
我想对 const 变量进行强制转换并对其进行更改，这是代码：

```
#include <iostream>
using namespace std;
int main()
{
    int const a = 5;
    int* ptr = (int*)&a;
    *ptr = 10;
    cout<<"a is : "<< a << endl;

    system("pause");
} 
```

这段代码通过了编译器，我希望程序打印屏幕 10 ，
但屏幕上的结果是 5。
当我运行调试器时， &a 中的内存已更改为 10，就像我预期的那样。
知道为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T13:55:40.147

首先，这是未定义的行为。不要这样做。其次，编译器优化了实际上在`&a`您打印时查看内存，`a`因为您告诉编译器`a`永远不会改变（您说它是`const`）。所以它实际上变成了...

`cout << "a is : "<<5 << endl;`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T13:56:48.640

您正在使用有问题的代码调用未定义的行为，试图更改声明为的变量，方法`const`是丢弃 const 是不允许的（除非*const 变量*实际上是对不是的变量的引用`const`）。

对您的结果的一种合理且极有可能的解释是，编译器知道 的值不`a`应该改变，因此它几乎可以替换所有出现的`a`with `5`。IE。“*查找*”已优化。

*当它被声明为 always be 时，为什么要查看它的地址`a`来读取它的值`5`？*

* * *

**让我们看看编译器可能会将代码片段转换成哪些指令**

*foo.cpp*

```
void func (int)
{
  /* ... */
}

int
main (int argc, char *argv[])
{
  const int a = 10; 

  int * p     = &const_cast<int&> (a);

  *p = 20; 

  func (a);
} 
```

`main`如给出的组装说明`g++ -S foo.cpp`

```
main:
.LFB1:
  .cfi_startproc
  pushq %rbp
  .cfi_def_cfa_offset 16
  .cfi_offset 6, -16 
  movq  %rsp, %rbp
  .cfi_def_cfa_register 6
  subq  $32, %rsp
  movl  %edi, -20(%rbp)
  movq  %rsi, -32(%rbp)
  movl  $10, -12(%rbp)
  leaq  -12(%rbp), %rax
  movq  %rax, -8(%rbp)
  movq  -8(%rbp), %rax # store the adress of `a` in %rax
  movl  $20, (%rax)    # store 20 at the location pointed to by %rax  (ie. &a)
  movl  $10, %edi      # put 10 in register %edi (placeholder for first argument to function)
                       # # notice how the value is not read from `a`
                       # # but is a constant
  call  _Z4funci       # call `func`
  movl  $0, %eax
  leave
  .cfi_def_cfa 7, 8
  ret 
  .cfi_endproc 
```

如上所见， 的值`20`确实放置在包含 ( ) 的地址的存储`%rax`地址`(%rax)`中`a`，`movl $20, (%rax)`但我们调用的参数`void func (int)`是常数`10`( `movl $10, %edi`)。

如前所述；编译器假定 的值`a`不会改变，而不是每次`a`使用时都读取内存位置，而是将其替换为常量 value `10`。

# c++ - 如何创建将坐标初始化为随机值的构造函数？

> ID：16193823
> 
> 赞同：0
> 
> 时间：2013-04-24T13:53:07.323
> 
> 标签：c++, constructor

我有这个类“Point”，它以 x 和 y 作为参数。但是我需要创建一个将它们初始化为随机值的构造函数。我不知道它是如何完成的。这是我的代码：我创建了构造函数，但即使我设置了 x 和 y，我得到的值也是荒谬的。

```
#include <iostream>
#include <cmath>
#include <ctime>

    using namespace std;
    class Point
    {
    private:
        double x;
        double y;

    public:

        double get_x()
        {
            return x;
        }
        void set_x (double x)
        {
            this->x = x;
        }
        double get_y()
        {
            return y;
        }
        void set_y(double y)
        {
            this->y = y;
        }
        double distanceTo(Point p)
        {
            double x2 = p.get_x();
            double y2 = p.get_y();
            return sqrt( pow(x-x2,2) + pow(y-y2,2) );
        }
        Point(double x, double y)
        {
            x = rand()*1.0 / RAND_MAX  * 100;
            y = rand()*1.0 / RAND_MAX  * 100;
        }
        Point(){};

    };

    void main()
    {
        Point a(1.2,0.5);
        Point b;
        b.set_x(1);
        b.set_y(1);
        cout << a.distanceTo(b);
        system ("Pause");
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T14:00:07.210

那是因为您没有初始化成员变量，而是更改了传递给构造函数的变量的副本。因此，您看到垃圾值`x`和`y`（类版本）从未初始化。您应该将其更改为：

```
Point()
{
    x = rand()*1.0 / RAND_MAX  * 100;
    y = rand()*1.0 / RAND_MAX  * 100;
} 
```

此外，您永远不会`srand()`在任何地方调用 - 您需要在某些时候执行此操作以正确播种随机生成器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T14:02:44.080

改变

```
Point(){}; 
```

至

```
Point()
{
    x = rand()*1.0 / RAND_MAX  * 100;
    y = rand()*1.0 / RAND_MAX  * 100;
} 
```

我还建议更改您的参数\成员名称以避免错误。我个人喜欢`m_`为会员使用：

```
private:
    double m_x;
    double m_y; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T13:59:39.943

因为您正在更改构造函数中的临时变量（同一范围内的名称冲突）。尝试：

```
Point(double x, double y)
{
  Point::x = rand()*1.0 / RAND_MAX  * 100;
  Point::y = rand()*1.0 / RAND_MAX  * 100;
} 
```

但这完全忽略了给构造函数的参数。但既然现在你知道如何区分不同范围的变量，我相信你可以从这里继续下去。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T14:01:50.887

您的默认构造函数什么都不做。它甚至不初始化值，这意味着它们将具有未指定的值。

您的构造函数采用两个参数只是分配给参数，因为它们的名称会影响成员的名称。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T14:05:19.160

您遇到了“名称冲突”。在这个函数中

```
 Point(double x, double y)
    {
        x = rand()*1.0 / RAND_MAX  * 100;
        y = rand()*1.0 / RAND_MAX  * 100;
    } 
```

分配时，编译器不知道您指的是哪个 x。语言规则会说应该分配输入参数 - 但你不应该依赖它 - 因为它不必要地令人困惑。

一个好的做法是对成员变量采用命名约定。两种常见的方法是在成员前面加上“m”或“_”。我个人喜欢“m”。

然后你的代码变成：

```
class Point
{
   public:
      double mX;
      double mY;

   Point(double x, double y)
    {
        mX = rand()*1.0 / RAND_MAX  * 100;
        mY = rand()*1.0 / RAND_MAX  * 100;
    }
} 
```

在这种情况下，构造函数参数也是多余的，可以删除。

上面的其他一些答案也是正确的 - 但如果您必须在简单函数中明确范围名称（例如 Point:: ），则这是不良类设计的标志。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-24T14:25:28.627

*错误：*您更改了按值传递给构造函数的变量的本地副本（它们与成员变量具有相同的名称）并且成员变量未初始化，因此您的程序具有未定义的行为。

*如何解决：*您必须明确指出要分配的变量。此外，重载您的构造函数，因此您将有一个（默认）用于随机值，一个用于用户预定义。

*还：*

*   最好将函数中*不会更改*的值作为*常量传递*
*   您可能希望`double` *按引用*传递，*而不是按值传递*
*   在构造函数主体中使用*初始化列表*而不是赋值
*   在这里使用常量引用时，您不需要解析名称，因为您无法更改常量值，因此编译器会更改成员变量

*代码：*

```
class Point
{
public:
    Point() : 
        x(rand()*1.0 / RAND_MAX  * 100), 
        y(rand()*1.0 / RAND_MAX  * 100)
    {

    }

    Point(const double& x, const double& y) :
        x(x), 
        y(x)
    {

    }

private:
    double x, y;

};

int main()
{
    Point pt(42, 3.14);
    Point pt_random;
} 
```

访问器功能相同：

```
 double GetX() const { return x; }
    void SetX(const double& x) { Point::x = x; } 
```

# c - 初始化指向数组的指针的正确语法

> ID：16193829
> 
> 赞同：4
> 
> 时间：2013-04-24T13:53:34.130
> 
> 标签：c, pointers

如何正确初始化指向 C 中的数组的指针

这是我的代码

```
int (*data[10]);
int a[10];
data = &a[0]; /* gives a warning "int *" cannot be assigned to entity of "int (*)[10]" */ 
```

我怎样才能摆脱这个警告？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T13:56:00.333

1.  正确声明指向数组的指针：

    ```
    int (*data)[10]; 
    ```

2.  为它分配一个指向数组的指针：

    ```
    int a[10];
    data = &a; 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T13:56:35.347

我相信你的括号是错误的。你需要：

```
int (*data)[10]; 
```

请注意，您可以使用[cdecl.org](http://www.cdecl.org/)来获得这些方面的帮助。

对于您的原始代码，它说：

> 将数据声明为指向 int 的指针的数组 10

对于我来说，它说：

> 将数据声明为指向 int 数组 10 的指针

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T13:55:58.290

该变量`data`是一个指针数组，您尝试为其分配一个指针。如果要声明`data`为指向数组的指针，则必须重新排列括号：

```
int (*data)[10]; 
```

我建议您阅读有关[顺时针/螺旋规则](http://c-faq.com/decl/spiral.anderson.html)的信息。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-24T13:55:42.343

```
int **data;
int a[10];
data = &a; 
```

您可以按照其他建议定义数据：`int (*date)[10];`
但我相信，在您希望将该数组的大小从 10 更改为其他任何值的那一天，将其用作双指针会更容易！

# business-process-management - 有什么好方法可以退回到 activiti 工作流任务中吗？

> ID：16193831
> 
> 赞同：1
> 
> 时间：2013-04-24T13:53:37.840
> 
> 标签：business-process-management, activiti

我正在使用 activiti bpm 引擎来控制我的工作流程。如果我在选择上犯了错误，是否可以退后一步？如果没有，应该怎么做？我必须完成工作流程并开始新的工作流程吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-26T10:17:49.430

工作流中没有“返回”之类的东西，它很好地反对.. 流程；）如果您不想让用户有“后退”的可能性，您可以再次为相同的任务建模其他流程刚刚完成。

# r - 编写用户定义的函数

> ID：16193832
> 
> 赞同：0
> 
> 时间：2013-04-24T13:53:38.060
> 
> 标签：r, function, user-defined-functions

我是编写函数的新手，我不确定从哪里开始。下面是此示例中名为 m1 的数据框的子集。我想编写一个函数来遍历数据集并按数字提取长度和深度信息。例如，如果它遇到数字 1，它会获取长度和深度并将它们插入到新数据帧或向量的第一行中。如果数字等于 2，它会执行相同的操作，依此类推。

```
 length number depth
 [1,]    109      1    10
 [2,]    109      1    10
 [3,]    109      1    10
 [4,]    109      1    10
 [5,]    109      1    10
 [6,]    109      1    10
 [7,]    109      1    10
 [8,]    109      1    10
 [9,]    109      1    10
[10,]    109      1    10
[11,]    109      1    10
[12,]    109      1    10
[13,]    107      2    10
[14,]    107      2    10
[15,]    107      2    10
[16,]    107      2    10
[17,]    107      2    10
[18,]    107      2    10
[19,]    107      2    10
[20,]    107      2    10 
```

如果数字等于 1，则尝试编写一个函数以获取上述输出。

```
length.fun=function(x)
{
  lengths=numeric()
  depth=numeric()
  if (x[2]==1)
  {
    lengths=x[1]
    depth=x[3]
  }
  return(cbind(depth,lengths))
}

length.fun(m1) 
```

但是，我得到的输出是这样的：

```
length.fun(m1)
   depth lengths 
```

任何帮助是极大的赞赏。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T14:05:29.170

# 编辑：

从您的评论中，我了解到您想要获得唯一的行。幸运的是，有一个专门用于此的功能：

```
unique(m1)

#       length number depth
# [1,]     109      1    10
# [13,]    107      2    10 
```

`unique(m1)[,-2]`只会给你两列。用于`as.data.frame`将矩阵转换为 data.frame。

* * *

`m1`是一个矩阵。矩阵只是具有维度属性的向量。`m1[2]`为您提供向量中的第二个值，即`109`. 因此，您的`if`条件是`FALSE`并且您`cbind`在函数中清空向量。

这可以满足您的要求：

```
m1[m1[,2]==1,c(1,3)] 
```

您应该阅读 R 中的矩阵子集。

您可以使用调试功能来检查发生了什么。这是一个例子：

首先使用在你的函数中插入断点`browser`。

```
length.fun=function(x)
{
  lengths=numeric()
  depth=numeric()
  if (x[2]==1)
  {browser("1")
    lengths=x[1]
    depth=x[3]
  }
  browser("2")
  return(cbind(depth,lengths))
} 
```

现在使用 调用该函数`trace`。

```
trace(length.fun(m1)) 
```

您将收到一个提示，允许您检查变量的状态。

```
> trace(length.fun(m1))
Called from: length.fun(m1)
Browse[1]> browserText()
[1] "2"
Browse[1]> lengths
numeric(0)
Browse[1]> Q 
```

如您所见，到达的第一个断点是第二个断点。因此，`if`构造的条件是`FALSE`并且里面的代码从未被执行。的值也证实了这一点`lengths`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T14:05:57.870

编辑：从问题中不清楚数据是矩阵形式还是数据框形式。

如果它是一个数据框，那么 x[2] 是一个长度 > 1 的向量。因此，您的条件将只测试第一个元素。如果是矩阵，请看@Roland的解释。

作为初学者，在编写函数时，建议从“内向外”进行。即，不要先编写函数。从简单的代码片段开始。看看`m1[2]`给了什么。查看由`m1[2]==1`（表达式是 TRUE 还是 FALSE）给出的布尔值。然后尝试运行条件。只有当代码的主要/关键部分按预期工作时，手头有特定的数据，才能将函数包装在该代码周围。

您尝试实现的特定功能必须循环遍历第 2 列中的所有值。因此，需要某种循环，例如`for`or `apply`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T14:11:21.427

您可以使用 split 函数将数据框拆分为单独的数据框列表。如果您的数据框被称为 foo 那么：

```
foo.split<-split(foo[,c('length','depth')],foo$number) 
```

给定这个列表，您可以命名列表中的每个元素，提取元素等。

请注意，这仅适用于数据帧。如果您有矩阵，则可以使用 data.frame() 函数将其转换为数据框。

# html - 旁边突然消失 - 从未见过这个问题

> ID：16193834
> 
> 赞同：1
> 
> 时间：2013-04-24T13:53:45.470
> 
> 标签：html, css, firefox, browser, cross-browser

我目前正在创建一个网站，其中有一个名为 Aside 的 div。这基本上是网站的一部分。

我将它包含在我的 index.php 中。

没有什么严重的，但是我有一个很大的问题。我昨天一切正常。今天，当我在我的 Firefox 浏览器中访问该网站时，我恰好看到 Aside div 完全消失了。当我让 Firebug 检查 Aside div 时，它显示该 div 是灰色的。所以我猜这意味着它没有显示出来。

我已经在我的文档中搜索了每个“display:none”，但我没有找到任何与 Aside div 相关的内容。

我已经在 Internet Explorer 中尝试过，我也遇到了同样的问题。但是我在 Chrome 中已经厌倦了它，它运行得很好，它显示了一切。

比我在我的虚拟机浏览器中尝试过的，所有 3 个浏览器都显示了备用 div。

我也在我的 VPS 上尝试过，那里也没问题！

那么我的浏览器或我的代码到底会发生什么，它不只显示旁边的 div？可能是什么问题？

我从来没有见过这样的事情，因为昨天还可以，今天就坏了……

任何帮助都将不胜感激。

我也试图删除我的历史和一切，但它是一样的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:26:02.323

在您的 Firefox 副本中禁用 AdBlock / AdBlock Plus，或提供`div`另一个 ID / 类作为快速修复。我首先想到这个的原因是因为我有一个更明显的“广告”ID `div`，我只注意到在我测试网站时安装了 AdBlock Plus 的 Firefox 副本中被屏蔽了。

如果您打算继续使用 AdBlock，一个更永久的解决方法是`div`从您正在使用的关键字/过滤规则列表中删除被阻止的名称。

# iphone - iPhone 相机工具栏按钮

> ID：16193844
> 
> 赞同：0
> 
> 时间：2013-04-24T13:54:11.637
> 
> 标签：iphone, xcode

iPhone 相机工具栏包含以下按钮： 取消/记录

我想将取消按钮更改为将我带到照片库的小图像按钮。

我不确定我是否需要使用叠加层，或者在这种情况下 xcode 是否有更舒服的东西，因为这是众所周知和使用的东西。

有这样的事情吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:06:27.920

[UIImagePickerController 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html)

> 您可以自定义图像选择器控制器来自己管理用户交互。为此，请提供一个包含您要显示的控件的覆盖视图，并使用“捕获静止图像或电影”中描述的方法。除了或代替默认控件，您还可以显示自定义叠加视图。UIImagePickerController 类的自定义覆盖视图在 iOS 3.1 及更高版本中可通过 cameraOverlayView 属性获得。有关代码示例，请参阅 PhotoPicker 示例代码项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T14:07:58.450

您可以将 overlayView 设置为您的`UIImagePickerController`

```
imagePicker.cameraOverlayView = yourOverlayView; 
```

# c++ - 类重载 new 和 delete vs 放置 new 与定制的内存类

> ID：16193846
> 
> 赞同：0
> 
> 时间：2013-04-24T13:54:15.517
> 
> 标签：c++, memory-management, new-operator, delete-operator

我正在调查使用类重载新闻和删除与放置新闻之间的利弊。我的意思是，要么使用自己的运算符重载声明我可能希望新建和删除的每个类，要么使用内存管理器通过放置 new 为我提供所需的内存。

我有一个内存管理器，允许我从多个池中分配内存：

```
enum MemPool
{
  kPool1,
  kPool2,
}

class MemoryManager
{
public:
  template <typename T>
  void* Allocate(MemPool pool); 
  void  Remove(MemPool pool, void* ptr);

};

MemoryManager g_mmgr; 
```

Allocate 是模板化的，因为在调试模式下我存储了每个分配的名称（通过 typeid(T).name()），我可以通过 sizeof(T) 获取每个分配的大小

我认为自己在如何分配方面至少有 2 个选项，并且正在尝试确定哪个在语法使用、效率、安全性和可移植性方面最好。

选项 1 是有一个带有新闻和删除的模板基类，它封装了内存池并为我很好地键入。

```
template <typename T, MemPool pool>
class MemPoolUser
{
public:
  static void* operator new(int size)
  {
    return g_mmgr.Allocate<T>(pool);
  }

  static void operator delete(void* ptr)
  {
    g_mmgr.Remove(pool,ptr);
  }
}; 
```

然后我可以确保每个可能需要通过 MemoryManager 更新的类都这样声明：

```
class MyClass : public MemPoolUser<MyClass, kPool1>
{

}; 
```

这将允许我简单地做

```
MyClass* c = new MyClass();
...
delete c; 
```

并且将调用 MemPoolUser 中正确的 new 和 delete。

选项 2 是使用展示位置新闻：

```
class MyClass
{

};

MyClass* c = new (g_mmgr.Allocate<MyClass>(kPool1)) MyClass();
....
c->~MyClass();
g_mmgr.Remove(kPool1,c); 
```

这些选项中的每一个都有哪些优点和缺点？选项 1 看起来更简洁，但我必须知道我希望每个类从中分配的内存池的类型，这可能取决于其他运行时因素。

选项 2 更灵活，但新增和删除在语法上很难看（它可以包含在 #defines 中）

所以我的问题是，除了上面提到的问题之外，这两个选项还有什么我没有考虑到的，并且一个比另一个更危险吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:06:00.817

如果您必须首先执行此操作（并且我希望您确实有一些相当不错的用例，其中对这些对象的特定内存池有特定需求），我肯定会选择`operator new`and`operator delete`解决方案。它允许使用它的应用程序代码在典型代码之外用最少的额外代码编写。

# assembly - 程序执行'ret'但不执行它

> ID：16193849
> 
> 赞同：0
> 
> 时间：2013-04-24T13:54:19.450
> 
> 标签：assembly, x86, masm, irvine32

我写了 GreatCommonDivisor 并使用了声明 ret down `repeat....until`，但发现它仍然进入`repeat ..... until`并导致除以零错误。

我认为`ret`弹出调用者下一行的地址，但为什么它会跳转到`repeat...until`？

```
ps:eax is dividend and ebx is divisor. 
```

提前谢谢。

```
INCLUDE Irvine32.inc

.data

.code
main PROC
mov eax, 75
mov ebx, 18
call gcd
main ENDP

gcd PROC 

or eax,eax;set SF
.IF Sign?
    Neg eax
.Else 
.EndIf

or ebx,ebx;set SF
.IF Sign?
    Neg ebx
.Else 
.EndIf

.Repeat 
mov edx, 0
div ebx

mov eax, ebx
mov ebx, edx    
.Until ebx <= 0

call WriteInt
ret
gcd ENDP

END main 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T15:01:13.337

不知道你为什么做了`main`一个`PROC`. 还有一种可能是，由于您对代码的排序方式，它会`gcd`在到达末尾后再次执行`main`（我在这台机器上没有方便的 MASM 来验证这一点）。

我会像这样构建程序：

```
INCLUDE Irvine32.inc

.data
.code

gcd PROC 
; gcd implementation omitted for brevity..
ret
gcd ENDP

main:
mov eax, 75
mov ebx, 18
call gcd

END main 
```

# html - 垂直居中对齐容器 div

> ID：16193856
> 
> 赞同：0
> 
> 时间：2013-04-24T13:54:52.820
> 
> 标签：html, css

我正在创建一个工具栏样式的导航菜单，其中内容被动态添加到容器中。

我想将容器 div 的中心垂直对齐到屏幕的中心。

这是我的方法 [http://cssdeck.com/labs/cmwvyjud](http://cssdeck.com/labs/cmwvyjud)

我知道这不是应该的样子，但我无法找到进行这种垂直对齐的替代方法。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T14:00:01.273

如果您知道需要居中的内容的高度，则可以取该高度的一半并使用类似`margin-top:-(contentHeight/2)px`

参见示例：[http](http://cssdeck.com/labs/atwispr6) ://cssdeck.com/labs/atwispr6 ，这里我知道内容是 300px，所以当我取一半时，我有 150px。所以`margin-top:-150px`

**编辑** 我已经更新了示例，使其动态化

```
 $(function(){
        var $container = $("#container")    
        $container.css("margin-top", "-" + ($container.height()/2) + "px");
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T14:23:54.770

如果您正在寻找纯 CSS 解决方案，您有 2 个选项。如果您愿意添加一个额外的容器，您可以使用`display: table`. 如果标记无法更改，那么 Flexbox 就是您要寻找的。

# 显示：表格

[http://cssdeck.com/labs/jdzltkla](http://cssdeck.com/labs/jdzltkla)

```
body{
    background-color:black;
}

#container{
    position: fixed;
    display: table;
    top: 0;
    bottom: 0;
    left: 10px;
}

.foo {
    display: table-cell;
    vertical-align: middle;
}

#container .foo > * {
    width: 50px;
    height: 50px;
    background-color:white;
    margin-bottom: 10px;
}

<div id="container">
    <div class="foo">
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
    </div>
</div> 
```

这适用于几乎所有东西，包括 IE8+

# 弹性盒

[http://codepen.io/cimmanon/pen/sKqkE](http://codepen.io/cimmanon/pen/sKqkE)

```
body {
  background-color: black;
}

#container {
  position: fixed;
  display: -webkit-box;
  display: -moz-box;
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
  -webkit-box-orient: vertical;
  -moz-box-orient: vertical;
  -webkit-box-direction: normal;
  -moz-box-direction: normal;
  -webkit-flex-direction: column;
  -ms-flex-direction: column;
  flex-direction: column;
  -webkit-box-pack: center;
  -moz-box-pack: center;
  -ms-flex-pack: center;
  -webkit-justify-content: center;
  justify-content: center;
  top: 0;
  bottom: 0;
  left: 10px;
}

#container * {
  width: 50px;
  height: 50px;
  background-color: white;
  margin-bottom: 10px;
} 
```

这适用于 Chrome、Opera、Firefox、IE10 和 Safari。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T14:29:01.417

内容为 300 像素，屏幕高度为（例如 768 像素），因此您必须将内容与屏幕高度进行比较，而不是内容本身...

所以内容大约是屏幕高度的 40%，你可以使用`top:25%;`top..

或在 jQuery 中：

```
var container_height = parseInt($("#container").css("height"));
$("#container").css("top", (parseInt((screen.height-container_height)/2))+"px"); 
```

# sql - 修改存储过程是否只是更新存储过程定义？

> ID：16193858
> 
> 赞同：0
> 
> 时间：2013-04-24T13:54:54.173
> 
> 标签：sql, sql-server, stored-procedures

我需要修改一个存储过程，并且我想了解“修改”存储过程的实际作用。我有一个存储过程，其中有如下语句：

```
ALTER PROCEDURE [dbo].[get_orders]
    INSERT INTO customer (id, date, name) 
    VALUES(@id, getdate(), @name)

    SELECT
    full_id,
    fname,
    lname,
    ...
    FROM orders 
```

例如，如果我通过在 Select 语句中添加一列来修改此存储过程（右键单击 SSMS 中的 sp，然后选择“修改”），然后单击“执行”（或按 F5），这是否只会更新存储过程定义，还是它也会“运行”其中的代码，例如，运行“INSERT”语句（或者如果有“DELETE”）并实际执行一些插入（或删除）？

我假设它只会更新存储过程，而不是实际运行其中的查询，但我只是想确定一下。对不起，如果这个问题看起来很基本，但我无法轻易找到答案。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:56:39.000

当您`alter`定义存储过程时，您所做的就是 - 更改所述过程中的定义/代码。它不会进入`execute`程序，要这样做，您需要`exec`在程序完成后进行程序`alter`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T13:56:50.120

如果您在该语句上执行它应该只存储过程更改。

当您在资源管理器中找到您的程序然后点击执行时，它将运行该程序。

# jquery - 在手风琴中显示和隐藏内容

> ID：16193859
> 
> 赞同：0
> 
> 时间：2013-04-24T13:54:54.797
> 
> 标签：jquery, html

我有一个显示列表的基本 jquery 手风琴。在当前场景中，我希望通过单击按钮隐藏一些内容，并在再次单击按钮时再次可见。例如。

```
1) Title 1
2) Title 2
3) Title 3
4) Title 4

<input type='button' value='show/hide'> 
```

我希望标题 2 在用户单击按钮时隐藏和可见。

我用过

```
document.getElementById("sec2").style.display == "block" 
```

这样做手风琴变得隐藏和可见，但结构受到损害。即它在“Title 2”打开时可见，而我希望它关闭。

它是标准的 Jquery 手风琴。

```
<div id="accordion">
  <h3 id='sec1'>Section 1</h3>
  <div id='div1'>
    <p>
    Title 1.
    </p>
  </div>
  <h3 id='sec2'>Section 2</h3>
  <div id='div2'>
    <p>
     Title .
    </p>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:17:17.993

您应该尝试以下操作（使用可折叠选项 true）：

```
$('#accordion').accordion( "activate" , 2) 
```

在这里查看更多信息：http: [//docs.jquery.com/UI/API/1.8/Accordion](http://docs.jquery.com/UI/API/1.8/Accordion)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T05:07:08.537

嘿伙计们，感谢您的回复，但一切似乎都不起作用，所以我终于决定静态解决这个问题。以下是我尝试过的。

```
$(function() {
  for(var i = 3; i>=0; i--)
  {
    $( "#accordion" ).accordion({
     active: i,
    });
  }
}); 
```

这最终会成功，关闭所有 div 并让顶部保持打开状态，而且动画效果也很好......；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T14:20:46.157

尝试这个：

```
<input type='button' id="myButton" value='show/hide'> 
```

```
$("#myButton").click(function () {
  $("#sec2").toggle();
  $("#accordion").accordion("option", "active", false);
  //or use $("#accordion").accordion("option", "active", index); to select the option you want to be active
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T14:33:53.077

您可以在**1.9.x**`toggle`之前的 jquery中使用：参见[Demo](http://jsfiddle.net/wG5n8/)

 **```
$("#btnToggle").toggle(function(){
    $("#div2>p").hide();
}, function(){
    $("#div2>p").show();
}); 
```**

# powerbuilder - 如何定义 DataWindowChild 的 DataObject？

> ID：16193865
> 
> 赞同：0
> 
> 时间：2013-04-24T13:55:02.613
> 
> 标签：powerbuilder

我的函数有一个 DataWindowChild 类型的输入参数 adwc。是否有可能以某种方式发现它的 DataObject？没有指向放置 DWC 的 DataWindow 的指针，因此我们不能询问该字段的“dddw.name”。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:23:49.863

AFAIK，答案是否定的。您可以执行 adwc.Describe("datawindow.syntax") 来获取它的定义（或任何 Describe() 来获取各种属性），或者按照您的建议，您可以修改您的函数以获取父级和访问 dddw.name 的列名。

目标是什么？也许如果我们知道最终游戏，我们可以提出更有价值的建议。

祝你好运，

特里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T20:36:08.327

您不应该编写关心 DataWindow 对象名称的代码。有几个原因。

1.  DataWindow 是一个动态对象。DataWindow 控件为数据对象报告的名称是最后一个按名称设置的名称。可以通过 Create 加载一个完全不同的 DataWindow，并且名称不会改变。
2.  检查 DataWindow 名称的代码很脆弱。假设您的代码正在检查 dddw 是否为`d_emp`或`d_manager`. 当有人创建一个新的经理 dddw 并将其命名时，`d_manager_v2`您的代码可能会以一种意想不到且令人困惑的方式失败。
3.  您关心 DataWindow 名称的代码可能会违反[One Responsibility](http://c2.com/cgi/wiki?OneResponsibilityRule)等设计原则。

根据 Ursego 的评论添加

对于您的 DataWindow/DataStore，您拥有`uf_row_exists(ls_search_expr)`. 您正在尝试为 DataWindowChild 编写函数，但没有 DataWindow 控件，DataWindowChild 不存在，与 DataWindow 一样。如果添加`uf_child_row_exists(ls_column, ls_search_expr)`到 DataWindow/DataStore，您将同时拥有父级和子级。

# c# - C# 中的命名参数和 params 关键字

> ID：16193871
> 
> 赞同：17
> 
> 时间：2013-04-24T13:55:18.213
> 
> 标签：c#, .net, named-parameters

我有一个使用`params`关键字声明的可变长度参数列表的 C# 方法：

```
public void VariableLengthParameterFunction (object firstParam, 
                                             params object[] secondParam) 
```

调用方法时有没有使用命名参数的方法？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-24T13:58:00.817

您可以使用这样的命名参数调用它：

```
VariableLengthParameterFunction(
    secondParam: new object[] { 5, 7, 3, 2 }, 
    firstParam: 4); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T14:01:24.013

编辑：我假设您想`params object[] secondParam`使用命名参数访问数组。

目前只有方法内的代码知道`secondParam`可能包含什么。`object[]`仅从方法签名来看，该数组中每个元素的 和 名称/类型之间没有联系。

此外，由于您使用的是`params`关键字，因此`secondParam[1]`如果不提供`secondParam[0]`(or `null`) 的值，就无法提供。

也许你可以创建一个重载，它接受命名参数，然后创建`object[]`然后调用这个方法。或者反过来。

# c# - Nhibernate - 表值函数

> ID：16193872
> 
> 赞同：1
> 
> 时间：2013-04-24T13:55:18.323
> 
> 标签：c#, linq, nhibernate, linq-to-nhibernate

我可以生成以下 SQL：

> [dbo].[CategoryMatch]([CategoryId], ???) = 1

使用以下 HQL 生成器：

```
treeBuilder.Equality(treeBuilder.MethodCall("[dbo].[CategoryMatch]", new[] {
    visitor.Visit(arguments[0]).AsExpression(),
    visitor.Visit(arguments[1]).AsExpression()
}), treeBuilder.Constant(1)); 
```

但是我发现这并不像说：

> [CategoryId] IN (SELECT [Id] FROM [dbo].GetCategories(???))

如何使用新的 SQL 来调整上面的 HQL 生成器？我会很感激帮助。谢谢

**更新：**

到目前为止，我想出了以下内容：

```
treeBuilder.In(
    visitor.Visit(arguments[0]).AsExpression(),
    treeBuilder.SelectFrom(
        treeBuilder.From(
            treeBuilder.Range(
                treeBuilder.MethodCall("[dbo].[GetCategories]", new[] {
                    visitor.Visit(arguments[1]).AsExpression()
                }).AsExpression(),
                treeBuilder.Alias("c")
            )
        )
    )
); 
```

但这给出了错误：

> 不支持指定的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T08:22:00.337

我设法想出了以下几点：

```
treeBuilder.In(
    visitor.Visit(arguments[0]).AsExpression(),
    treeBuilder.MethodCall("SELECT [Id] FROM [dbo].[GetCategories]", new[] {
        visitor.Visit(arguments[1]).AsExpression()
    }).AsExpression()
) 
```

这有点像黑客，但它可以工作，所以我想它现在就可以了。

# linux-kernel - 这些 Linux Kernel Oops 字段是什么意思？

> ID：16193873
> 
> 赞同：2
> 
> 时间：2013-04-24T13:55:19.980
> 
> 标签：linux-kernel, panic

我在开发人员的生活中已经遇到过一些 Oops，虽然我熟悉可以从这些 Oops 中检索到的一些信息，但仍有一些我无法理解的信息，因此无法用于解决问题。

您将在下面找到一个糟糕的示例，我将描述我可以从中推断出的内容。然后，我会问剩下的信息可以教给我什么关于这个问题的信息。

```
[  716.485951] BUG: unable to handle kernel paging request at fc132158
[  716.485973] IP: [<fc1936e7>] ubi_change_vtbl_record+0x87/0x1c0 [ubi]
[  716.485986] *pdpt = 00000000019e6001 *pde = 000000002c558067 *pte = 0000000000000000 
[  716.485997] Oops: 0002 [#1] SMP 
[  716.486004] Modules linked in: ubi(O) mtdchar nandsim nand mtd nand_ids nand_bch bch nand_ecc bnep rfcomm bluetooth parport_pc ppdev lp parport nfsd nfs_acl auth_rpcgss nfs fscache lockd sunrpc binfmt_misc dm_crypt snd_hda_codec_hdmi snd_hda_codec_analog kvm_intel snd_hda_intel snd_hda_codec snd_hwdep kvm snd_pcm snd_seq_midi snd_rawmidi snd_seq_midi_event hid_generic snd_seq cdc_acm snd_timer snd_seq_device mei tpm_tis snd mac_hid serio_raw soundcore lpc_ich snd_page_alloc microcode coretemp usbhid hid nouveau usb_storage ttm drm_kms_helper drm floppy e1000e i2c_algo_bit mxm_wmi video wmi
[  716.486128] Pid: 3994, comm: ubimkvol Tainted: G           O 3.8.0-rc3+ #3 LENOVO 6239AS8/LENOVO
[  716.486136] EIP: 0060:[<fc1936e7>] EFLAGS: 00010246 CPU: 0
[  716.486144] EIP is at ubi_change_vtbl_record+0x87/0x1c0 [ubi]
[  716.486151] EAX: 000000ac EBX: eb5ea000 ECX: 0000002b EDX: 00000000
[  716.486157] ESI: eb4d1d74 EDI: fc132158 EBP: eb4d1d40 ESP: eb4d1d20
[  716.486164]  DS: 007b ES: 007b FS: 00d8 GS: 00e0 SS: 0068
[  716.486170] CR0: 8005003b CR2: fc132158 CR3: 27542000 CR4: 000407f0
[  716.486176] DR0: 00000000 DR1: 00000000 DR2: 00000000 DR3: 00000000
[  716.486183] DR6: ffff0ff0 DR7: 00000400
[  716.486188] Process ubimkvol (pid: 3994, ti=eb4d0000 task=ec01d9b0 task.ti=eb4d0000)
[  716.486195] Stack:
[  716.486199]  e755f000 eb4d1d2c c11cad11 eb4d1d34 eb543c00 eb5ea000 00000000 eb4d1e20
[  716.486215]  eb4d1e30 fc195412 e755f000 fc1adf01 eb5ea26c 00000002 0000009e eb5ea480
[  716.486232]  00000002 e755f22c e755f2ac e755f000 eb4d1d74 2a000000 01000000 00000000
[  716.486248] Call Trace:
[  716.486257]  [<c11cad11>] ? sysfs_create_file+0x21/0x30
[  716.486266]  [<fc195412>] ubi_create_volume+0x4b2/0x790 [ubi]
[  716.486277]  [<fc19967a>] ubi_cdev_ioctl+0x5da/0xac0 [ubi]
[  716.486285]  [<c117202a>] ? link_path_walk+0x5a/0x7d0
[  716.486294]  [<fc1990a0>] ? vol_cdev_ioctl+0x440/0x440 [ubi]
[  716.486842]  [<c1177e12>] do_vfs_ioctl+0x82/0x5b0
[  716.487703]  [<c1171ced>] ? final_putname+0x1d/0x40
[  716.488564]  [<c1171ced>] ? final_putname+0x1d/0x40
[  716.489422]  [<c1171ced>] ? final_putname+0x1d/0x40
[  716.489891]  [<c1171eb4>] ? putname+0x24/0x40
[  716.489891]  [<c1167239>] ? do_sys_open+0x169/0x1d0
[  716.489891]  [<c11783b0>] sys_ioctl+0x70/0x80
[  716.489891]  [<c16205cd>] sysenter_do_call+0x12/0x38
[  716.489891] Code: ac 00 00 00 03 bb c8 04 00 00 f7 c7 01 00 00 00 0f 85 ee 00 00 00 f7 c7 02 00 00 00 0f 85 ca 00 00 00 89 c1 31 d2 c1 e9 02 a8 02 <f3> a5 74 0b 0f b7 16 66 89 17 ba 02 00 00 00 a8 01 74 07 0f b6
[  716.489891] EIP: [<fc1936e7>] ubi_change_vtbl_record+0x87/0x1c0 [ubi] SS:ESP 0068:eb4d1d20
[  716.489891] CR2: 00000000fc132158
[  716.516453] ---[ end trace 473b15a7780e19ea ]--- 
```

内核似乎想要访问错误的页面。现在，

*   糟糕的代码 0002 告诉我它是在尝试以用户模式读取内容时发生的。
*   指令指针位于`ubi_change_vtbl_record`，这意味着违规指令位于此函数中。
*   我可以从调用跟踪中推断出导致故障函数的路径（从 process 启动的 ioctl `ubimkvol`）

从那里，“堆栈”是任务原始堆栈的转储吗？我可以看到提到的一些值也是调用跟踪中的函数地址。然后，我得到了花哨的值，例如`EAX`, `EBX`... `DR7`。我认为它们是 CPU 寄存器，但我仍然不知道它们到底是什么。

最后，下面这行让我迷失了：

```
[  716.485986] *pdpt = 00000000019e6001 *pde = 000000002c558067 *pte = 0000000000000000 
```

什么是 pdpt、pde 和 pte ？我觉得它们是关于页面错误的信息，但在谷歌搜索后我无法检索到更多信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:13:21.517

是的，EAX 等是 32 位 x86 处理器寄存器。pdpt（页目录指针表）、pde（页目录项）、pte（页表项）都是分页结构。

IP（也适用于 32 位处理器的 EIP 或 64 位处理器的 RIP）是 Oops 时的指令指针。

堆栈是此处理器的原始堆栈。每个处理器都有自己的堆栈。请注意，在此架构上，堆栈会向下增长（地址以 0xfxxxxxx 开头）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-16T20:41:24.523

如果我错了，请纠正我，OOPS 0002 表示在内核模式下写入时找不到页面：

```
bit 0 == 0 means no page found, 1 means a protection fault
bit 1 == 0 means read, 1 means write
bit 2 == 0 means kernel, 1 means user-mode 
```

# mysql - 在hibernate hql中实现行号

> ID：16193874
> 
> 赞同：1
> 
> 时间：2013-04-24T13:55:21.083
> 
> 标签：mysql, database, jakarta-ee, hql

我正在尝试在我的 java servlet 中使用 mysql 查询，但是由于 '@' 它在 hql ( `org.hibernate.QueryException: unexpected char: '@'`) 中不受支持，所以我被卡住了。该查询应该在我的表中选择每第 n 行（例如 10 行），如下所示：

```
SELECT ranked.COLUMN_NAME
FROM ( 
    SELECT 
        @row := @row +1 AS rownum, COLUMN_NAME
    FROM ( 
        SELECT @row :=0) r, TABLENAME
    ) ranked 
WHERE rownum % 10 = 1 
```

任何想法将不胜感激。

# java - ZK Bandbox Listbox autoPaging 过滤问题

> ID：16193875
> 
> 赞同：0
> 
> 时间：2013-04-24T13:55:22.027
> 
> 标签：java, listbox, zk

我有一个使用 ZK 5.0.8（MVC 方法）的 bandBox，里面是一个列表框，它稍后显示记录我在 bandBox eventListener[event] 中过滤结果 onChanging 但有时 pageSize 和分页与列表框上的结果不同步有时不是 IT 上的记录（0 个匹配项）仍然显示

```
 1/ 13[ 1 - 4 / 51] 
```

为什么是这样？？有人可以给我一个提示。这是我的相关代码

```
<bandbox id="bandforcode" autodrop="true" width="270px">    
<listbox id="listBoxForCode" height="250px" width="300px" mold="paging" autopaging="true">
 public void setListBoxForBandBoxFromDB(Listbox box,String ref)//Filtering
 {     
   final ArrayList<Student>students = new ArrayList<Student>(manager.getListForStudentsByRefBandBox(ref));     
   box.getItems().removeAll(box.getItems());       
   BindingListModelList model = new BindingListModelList(students,false);
   box.setModel(model);
}
box.addEventListener("onChanging",new EventListener()//Listener
{
    public void onEvent(Event event) throws Exception
    {                       
    final Bandbox band = (Bandbox)event.getTarget();
    final org.zkoss.zk.ui.event.InputEvent inputEvent=(org.zkoss.zk.ui.event.InputEvent)event;              
    final String initialText = inputEvent.getValue();                                  

setListBoxForBandBoxFromDB((Listbox)band.getFirstChild().getFirstChild(),initialText);                          
     }
}); 
```

请看下面的图片。

[截屏](http://www.flickr.com/photos/95199877@N03/8677215545/in/photostream)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T02:24:14.033

我认为问题可能是这个

```
box.getItems().removeAll(box.getItems()); 
```

`Items`使用`Model`. _

将其更改为

```
box.getModel().clear(); 
```

或者只是删除该行，因为无论如何您都设置了新模型。

# android - 在下次更新中替换应用程序中的数据库文件

> ID：16193877
> 
> 赞同：0
> 
> 时间：2013-04-24T13:55:28.530
> 
> 标签：android, android-sqlite

我的应用程序在assets 目录中有一个数据库文件，当应用程序第一次运行或数据库不存在时，应用程序将其导入。当用户下次更新应用程序时，我想用我拥有的数据库替换数据库。它应该只在用户更新它时运行，这样就不会丢失任何数据。

有人能帮帮我吗？

这是我的代码： http: [//pastie.org/private/bni5iwbob1oklyxx5atolq#66](http://pastie.org/private/bni5iwbob1oklyxx5atolq#66)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T13:27:47.210

您必须更新您在构造函数中使用的 Db 版本

```
public DbImportHelper(Context context) {
    super(context, DB_NAME, null, 1);
    this.myContext = context;
    // TODO Auto-generated constructor stub
} 
```

这样[onUpgrade](https://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html)就会被调用。当您初始化数据库时，系统会检查设备上存在的数据库的当前版本。如果版本不匹配，则调用 onUpgrade 或 onDownGrade 方法。

所以你可以将构造函数更改为类似

```
public DbImportHelper(Context context) {
    super(context, DB_NAME, null, 2);
    this.myContext = context;
    // TODO Auto-generated constructor stub
} 
```

一个建议避免使用像 1,2,55 这样的幻数，你可以为它们分配一个常数。这样你就不必一直搜索你的代码。

# matlab - matlab中3d矩阵与向量的相关性

> ID：16193879
> 
> 赞同：2
> 
> 时间：2013-04-24T13:55:30.947
> 
> 标签：matlab, image-processing, correlation, feature-detection

我有一个 KxLxM 矩阵 A，它是一个图像，每个像素位置都有一个长度为 M 的特征向量。我还有一个特征向量 v，长度为 M。在图像 A 的每个像素位置，我想计算像素的特征向量与我的特征向量 v 的相关性。

我已经使用循环完成了此操作，但是在 matlab 中循环很慢。有没有人建议如何矢量化这个？

```
function test()
A = rand(4,5,3);
v = [1 2 3];
c = somecorr(A, v);
size(c)

function c = somecorr(a,v)
c = a(:,:,1).*0;
for y = 1:size(a,1)
    for x = 1:size(a,2)
        c(y,x) = corr2(squeeze(a(y,x,1:length(v)))',v);
    end
end

>>test()
ans =

 4     5 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T14:14:04.807

你可以试试这个，看看它是否更快：

```
function c = somecorr2(a,v)

    as = reshape(a,size(a,1)*size(a,2),size(a,3));
    cs = corr(as',v');
    c = reshape(cs,size(a,1),size(a,2));
    size(c) 
```

我只做了一些小测试，但它似乎快了 100 倍以上。至少对于我的测试用例。

如果你没有'corr'函数，你可以使用它，灵感来自这个[答案]（ [什么是在matlab中计算列相关性的快速方法](https://stackoverflow.com/questions/9262933/what-is-a-fast-way-to-compute-column-by-column-correlation-in-matlab)）：

```
function C = manualCorr(A,B)
    An=bsxfun(@minus,A,mean(A,1)); %%% zero-mean
    Bn=bsxfun(@minus,B,mean(B,1)); %%% zero-mean
    An=bsxfun(@times,An,1./sqrt(sum(An.^2,1))); %% L2-normalization
    Bn=bsxfun(@times,Bn,1./sqrt(sum(Bn.^2,1))); %% L2-normalization
    C=sum(An.*repmat(Bn,1,size(An,2)),1); %% correlation 
```

对于 100x100x3 矩阵，我得到以下运行时：

您的版本：1.643065 秒。我的'corr'：0.007191秒。我的'manualCorr'：0.006206秒。

我使用的是 Matlab R2012a。

# java - 在空格的情况下包括空格而不是破折号

> ID：16193883
> 
> 赞同：0
> 
> 时间：2013-04-24T13:55:43.980
> 
> 标签：java

好的，首先我想说我是 Java 开发的新手......考虑到这一点，我目前正在尝试使 tryWord 的值包含空格，而不是在 s 中的空格的情况下包含破折号。谁能帮我？

```
 String tryWord = "";
    for (int i = 0; i < s.length(); i++) {
        tryWord += "-";
    }
    System.out.println(s + tryWord);

Value for s
------------
private static String randomOutput() {
    String array[] = new String[10];
    array[0] = "Hamlet";
    array[1] = "Mysts of Avalon";
    array[2] = "The Iliad";
    array[3] = "Tales from Edger Allan Poe";
    array[4] = "The Children of Hurin";
    array[5] = "The Red Badge of Courage";
    array[6] = "Of Mice and Men";
    array[7] =  "Utopia"; 
    array[8] =  "Chariots of the Gods";
    array[9] =  "a Brief History of Time";

    ArrayList<String> list = new ArrayList<String>(Arrays.asList(array));
    Collections.shuffle(list);
    String s = list.get(0);
    return s;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:56:47.737

你可以在java中使用`replace` or `replaceAll`，它会解决问题

```
tryWord = s.replaceAll("\\s", "-"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T13:59:36.980

```
 tryWord += s.charAt(i) == ' ' ? " " : "-"; 
```

这称为三元表达式`... ? ... : ...`，一种 if ith char is space then space else dash。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T13:57:48.307

用这个：

```
 tryWord.replace(oldChar, newChar); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-04T19:05:11.687

试试这个：

```
if (s.charAt(i) == ' ') {
   tryWord += ' ';
} else {
   tryWord += '-';
} 
```

# xcode - 核心数据，在同一实例中向实体添加多个项目

> ID：16193884
> 
> 赞同：0
> 
> 时间：2013-04-24T13:55:42.367
> 
> 标签：xcode, core-data, add, record

我的代码设置了它的实体、上下文等，然后保存了一条记录，一切正常。然后我想保存一条新记录，但代码会覆盖原始记录。

如何在同一个实例中编写多个项目？

```
AppDelegate *appdelagate = [[UIApplication sharedApplication]delegate];
context = [appdelagate managedObjectContext];
NSEntityDescription *entitydesc = [NSEntityDescription entityForName:@"UserData" inManagedObjectContext:context];
NSManagedObject *userData = [[NSManagedObject alloc]initWithEntity:entitydesc insertIntoManagedObjectContext:context];
            [userData setValue:@"Bob" forKey:@"userCD"];
            [userData setValue:@"Tall" forKey:@"dataCD"];
            // Store in the DB
            [context save:&error]; 
```

一些如何移动到下一个记录

```
 [userData setValue:@"John" forKey:@"userCD"];
    [userData setValue:@"Short" forKey:@"dataCD"];
    // Store in the DB
    [context save:&error]; 
```

我想我需要释放 userData 并再次声明......我还认为我错过了很多东西，应该停止思考 SQL。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T14:02:25.937

那是因为您更改了第一个`userData`对象的属性，而不是创建一个新对象：

```
NSManagedObject *userData;
// Create first object:
userData = [[NSManagedObject alloc]initWithEntity:entitydesc insertIntoManagedObjectContext:context];
[userData setValue:@"Bob" forKey:@"userCD"];
[userData setValue:@"Tall" forKey:@"dataCD"];
[context save:&error];
// [userData release];  only if you don't compile with ARC

// Create second object:
userData = [[NSManagedObject alloc]initWithEntity:entitydesc insertIntoManagedObjectContext:context];
[userData setValue:@"John" forKey:@"userCD"];
[userData setValue:@"Short" forKey:@"dataCD"];
[context save:&error];
// [userData release];  only if you don't compile with ARC 
```

# bash - 使用 Drush make 安装 Drupal 并安装配置文件并使用 bash 脚本 - 如何回答是/否？

> ID：16193892
> 
> 赞同：1
> 
> 时间：2013-04-24T13:55:59.303
> 
> 标签：bash, drupal, drush

我有一个 bash 脚本，当我运行它时，我被问到一个问题：

> “您将要创建一个站点/默认/文件目录并创建一个站点/默认/settings.php 文件并删除您的 'geo_test' 数据库中的所有表。您要继续吗？（是/否）”

如何自动回答“y”？

```
#!/bin/bash
cd /Applications/MAMP/htdocs
#sudo rm -rf geoslate
drush make distro.make geoslate --working-copy --no-gitinfofile
cd geoslate
drush si geoslate --db-url='mysql://root:root@localhost/geo_test' --site-name=Geoslate 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T14:46:11.383

添加`-y`选项应该：

```
drush si geoslate -y --db-url='mysql://root:root@localhost/geo_test' --site-name=Geoslate 
```

# regex - 替换为 RegEx 时搜索周围的空格

> ID：16193902
> 
> 赞同：0
> 
> 时间：2013-04-24T13:56:11.573
> 
> 标签：regex, vbscript

我正在尝试执行替换。考虑以下字符串：

```
Please replace something in this sentence.
and replace <b>something&nbsp;</b> in this sentence.
But not here http://www.mysite.com/something/mypage.html
Or here \\myserver\something\myshare\ 
```

我想替换`something`为`somethingelse`，但是`something`可以出现在我的源代码中的 URL 或 UNC 中，我不想替换它。我还有一些有趣的 HTML 正在进行。

这是我正在使用的模式：

```
\b[^/\\]Something[^/\\]\b 
```

哪个有效，但是我也得到了第一个`something`后面的空间。如果我替换`something`为`somethingelse`我得到的结果：

```
Please replacesomethingelsein this sentence.
and replace <b>somethingelse&nbsp;</b> in this sentence.
But not here http://www.mysite.com/something/mypage.html
Or here \\myserver\something\myshare\ 
```

第二个实例有效，第一个带有空格的实例无效。

如何忽略周围是否存在空格`something`？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T14:05:27.260

你想要做的是使用后视和前瞻，所以你的正则表达式应该看起来像这样， `\b(?<!/\\)something(?=[^/\\])\b`.

由于您将 包含`[^/\\]`在正则表达式中，因此它实际上匹配“某物”之前的字符，然后将其包含在您声明不想要的响应中。当您想确认某物是否存在（向前或向后）并且不让它与您验证的那些部分实际匹配时，您可以使用前瞻和后瞻来处理该验证。有关前瞻和后瞻的更多信息，我将[其](http://www.perlmonks.org/?node_id=518444)用作参考。

[您可以使用您提供的示例](http://rubular.com/r/8BkcvdiICl)查看我在此处所做的测试。.

编辑：[VBScript 不支持look-behinds](http://www.regular-expressions.info/vbscript.html)，但似乎完全支持look-aheads。由于正则表达式使用前后验证（这是多余的），它仍然应该只使用积极的前瞻（检查您概述的 NOT 条件）`\bsomething(?=[^\/\\])\b`：.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T14:13:38.307

[http://msdn.microsoft.com/en-us/library/k9z80300(v=vs.84).aspx](http://msdn.microsoft.com/en-us/library/k9z80300(v=vs.84).aspx)

所以：

```
ReplaceTest("\b([^/\\])Something([^/\\])\b", "$1SomethingElse$2") 
```

**注意**：不包括不区分大小写的搜索。

# c++ - 如何在 linux 中使用 c++ 程序从远程 url 获取数据？

> ID：16193905
> 
> 赞同：1
> 
> 时间：2013-04-24T13:56:17.863
> 
> 标签：c++, popen

我希望通过我的 C++ 程序读取 Web 上托管的 XML 文件。我正在研究 LINUX。我目前正在使用 popen 阅读。

```
FILE* remote = popen("curl 'my_url_to_xml', "r")
fread(buf, 1024, 1, remote); 
```

它可以工作并为我提供 url 中的内容，但是即使我没有打印任何内容，它也会将这些额外的内容转储到屏幕上。整个操作也需要大约 3000 毫秒。这对我的用例来说太多了。

```
% Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                             Dload  Upload   Total   Spent    Left  Speed
0    71    0    71    0     0    309      0 --:--:-- --:--:-- --:--:--     0 
```

有什么办法可以解决这个问题或替代 popen 吗？我希望避免使用 libcurl 等第三方库。任何本机解决方案？

编辑——好的，我接受即使是非本地解决方案也被接受。我的第一个担忧是公开的。如果这个倾销问题可以解决，我会选择 popen 本身。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T14:12:50.340

`curl`使用静音开关呼叫：`-s`或`--silent`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T14:03:22.647

> 我希望避免使用 libcurl 等第三方库。任何本机解决方案？

不。C++ 不是“网络语言”，它对内置的 XML 或 HTTP 的支持为零。您需要使用像 libcurl 这样的库。或者另一种编程语言。或者自己重新实现其中之一。

说真的，只需使用 libcurl 或类似的东西就可以了。或者更好的是，使用 Python。:)

# javascript - 如何从弹出窗口到父页面检索图像 src 属性

> ID：16193908
> 
> 赞同：0
> 
> 时间：2013-04-24T13:56:25.780
> 
> 标签：javascript, jquery, attributes

我从弹出窗口中调用一个 js 函数，如下所示：

```
<img onclick=parent.updateFunction('"+ item.id +"','"+ item.image +"','"+ item.label +"'); src=/mypath/ /> 
```

这就是我尝试在 hte 父页面中显示 src 属性的方式：

```
 function updateFunction(id, image, label) {

  alert($(this).attr('src')); 
```

结果暂时未定义...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:49:18.340

我建议不要使用内联 JavaScript

```
<img src="test.jpg" /> 
```

用它来获取`src`

```
$('img').click(function () {
    alert($(this).attr('src'));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T07:52:02.813

您需要传递`this.src`给函数。见[小提琴](http://jsfiddle.net/anpsmn/vPyMm/)

```
<img src="http://jsfiddle.net/img/logo.png" onclick ="update(this.src)" />

//script
update = function(src){
 alert(src);
} 
```

# filemaker - Filemaker - 根据另一个字段对字段求和

> ID：16193909
> 
> 赞同：0
> 
> 时间：2013-04-24T13:56:28.217
> 
> 标签：filemaker

在 Filemaker Pro 12 中，我正在尝试为计算字段编写一个公式，该公式将根据同一个相关表中的另一个字段对相关表中的一个字段进行求和。正常的 Filemaker 总和方程如下所示：

总和（资产::资产数量）

但是，我需要指定只有与名为 Asset Type 且值为“Building”的字段相关的数量将用于过滤将在总和中使用的 Asset Quantity 中的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T15:52:40.483

有几种方法可以做到这一点：

### 一个新的计算字段

首先，您可以在资产表中添加一个新的计算字段，例如建筑数量，其计算值为：

```
If (Asset Type = "Building" ; Asset Quantity ; 0) 
```

然后您可以使用这个新建筑数量的总和，就像您之前使用 Sum(Assets::Asset Quantity) 一样。

### 新的关系

其次，您可以在主表中添加一个新的计算字段，其值始终等于“Building”，然后添加 Assets 表的新表实例。我们将其命名为“BuildingAssets”并设置关系，以便您的 ID 匹配，并且您的新“Building”字段与资产类型匹配

```
Summary ID     \____________/ BuildingAssets::Summary ID
BuildingText   /            \ BuildingAssets::Asset Type 
```

然后你将使用

```
Sum (BuildingAssets::Asset Quantity) 
```

而不是 Sum (Assets::Asset Quantity)，这样您就只需要通过 Building 类型。

### 执行SQL

最后，FileMaker 12 引入了 ExecuteSQL 步骤。这可能是执行上述操作的最优雅的方式，因为它不涉及更改任何架构。该声明将类似于：

```
SELECT
  SUM (Asset Quantity)
FROM
  Assets
WHERE
  Summary ID = ID AND
  Asset Type = Building 
```

有关更多信息，请查看 FileMaker 的页面：[http ://www.filemaker.com/12help/html/func_ref3.33.6.html](http://www.filemaker.com/12help/html/func_ref3.33.6.html)

另请查看 FileMaker SQL Sugar ("@") 模块以帮助构建查询：[http ://www.modularfilemaker.org/2013/03/filemaker-sql-sugar/](http://www.modularfilemaker.org/2013/03/filemaker-sql-sugar/)

# c - 在哪里可以找到更新 zmq 教程？

> ID：16193918
> 
> 赞同：1
> 
> 时间：2013-04-24T13:56:40.567
> 
> 标签：c, zeromq

我有以下有用的页面[http://www.zeromq.org/code:examples-chat](http://www.zeromq.org/code:examples-chat)

但是，它表示“*此文本已被弃用，并且指的是旧版本的 ØMQ。出于历史兴趣，它保留在这里。请勿使用此来学习 ØMQ。* ”

问题> 在哪里可以找到 zmq 的更新教程？

谢谢

# mysql - 如果没有结果，则另一个 WHERE 子句

> ID：16193920
> 
> 赞同：5
> 
> 时间：2013-04-24T13:56:42.777
> 
> 标签：mysql

在 mysql 的一个查询中执行此操作的最佳方法是什么？

```
SELECT * FROM products WHERE language = 1 
```

如果没有结果

```
SELECT * FROM products WHERE language = 2 AND country = 1 
```

如果没有结果

```
SELECT * FROM products WHERE language = 2 AND country = 2 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T14:07:23.860

我已经对其进行了编辑以使其工作，但它不再优雅。

* * *

原来的（没有最后一个也不存在）有一个缺陷。

事实证明这并不像我想象的那么聪明。请参阅下面的评论。如果第一个和第三个查询返回数据，它将失败。如果您只有一个工会，但不是两个或更多工会，它确实有效。

* * *

在mysql中很容易：

```
select SQL_CALC_FOUND_ROWS * from products where language = 1
union
SELECT * FROM products WHERE language = 2 AND country = 1 and found_rows()=0
union
SELECT * FROM products WHERE language = 2 AND country = 2 and found_rows()=0 
AND not exists(select * from products where language = 1) 
```

在此处查看 found_rows() 和 SQL_CALC_FOUND_ROWS 的讨论：http: [//dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_found-rows](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_found-rows)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T14:08:00.103

您可以使用以下内容：（根据评论编辑为使用 EXISTS 和 LIMIT）。

```
(
SELECT * FROM products WHERE language = 1
)
UNION
(
SELECT * FROM products WHERE language = 2 AND country = 1
AND NOT EXISTS(SELECT count(*) FROM products WHERE language = 1 limit 1)
)
UNION
(
SELECT * FROM products WHERE language = 2 AND country = 2 
AND NOT EXISTS(SELECT count(*) FROM products WHERE language = 2 AND country = 1 limit 1)
AND NOT EXISTS(SELECT count(*) FROM products WHERE language = 1 limit 1)
) 
```

您使用嵌套查询和 count(*) 检查先前的查询是否为 NULL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T14:03:57.307

MySQL 缺少一次性允许这样做的功能
示例：`DENSE_RANK`窗口函数，或[`TOP..WITH TIES`](https://stackoverflow.com/q/9392470/27535)

因此，不使用临时表或 IF 语句（无论如何都需要 MySQL 中的存储过程），然后在客户端上将其过滤为最低优先级值。即消费行直到值改变

```
SELECT *, 1 AS priority FROM products WHERE language = 1
UNION ALL
SELECT *, 2 AS priority FROM products WHERE language = 2 AND country = 1
UNION ALL
SELECT *, 3 AS priority FROM products WHERE language = 2 AND country = 2
ORDER BY priority; 
```

这确实消除了到 MySQL 服务器的往返，即使不是很理想。并且它还避免了在 EXISTS 子句中重新评估以前的 SELECT

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T14:08:05.993

尝试：

```
select p.* 
from (select min(language) minlang, min(country) minctry 
      from products where language = 1 or
                          (language = 2 and country in (1,2)) ) c
join products p 
on p.language = c.minlang and (c.minlang=1 or p.country=c.minctry) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-24T14:17:40.527

似乎没有什么好办法，如果可能的话，你最好把它做成一个过程，要么填充临时表，要么将 RowSet 对象返回给客户端

*   [从存储过程中选择数据](https://stackoverflow.com/questions/4493932)
*   [MySql 存储过程：如何从过程表中选择？](https://stackoverflow.com/questions/1629324/)

但是，如果没有任何可能，您似乎限制了二级和三级查询：

```
SELECT * FROM products WHERE language = 1

UNION ALL

SELECT * FROM products WHERE language = 2 AND country = 1 
   AND NOT EXISTS (SELECT * FROM products WHERE language = 1)

UNION ALL

SELECT * FROM products WHERE language = 2 AND country = 2
   AND NOT EXISTS (SELECT * FROM products WHERE language = 1 OR (language = 2 AND country = 1 )) 
```

但这一定是丑陋而缓慢的。

也许 LEFT JOIN with IS NULL 会比 NOT EXISTS 好

# ios - 如何在iOS中追踪电话？

> ID：16193932
> 
> 赞同：0
> 
> 时间：2013-04-24T13:57:17.573
> 
> 标签：ios

我想知道如何在 iOS 代码中跟踪通话信息。我只是希望它创建一个可以记录电话的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:58:39.287

这对于 Apple 提供的公共 API 是不可能的。

# php - PHP：我可以选择返回数据库结果的顺序吗

> ID：16193933
> 
> 赞同：0
> 
> 时间：2013-04-24T13:57:26.527
> 
> 标签：php, mysqli

我正在使用 *mysqli_fetch_array()* 从我的数据库中提取评论，但无论如何要按照最新的优先顺序将它们提取出来？

这是我的代码：

```
while($row_comments = mysqli_fetch_array($result_get_comments)){
?>
    <div class="itemFullWidth itemStyle">
        <p><?php echo $row_comments['comment_author'];?> says:
        <br>
        <?php echo $row_comments['comment_content'] ?>
        </p>
    </div>

<?php
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:59:17.033

说到*领域*

```
SELECT field1, field5, fieldXX, field_last FROM ...
   //  ^ here your order goes 
```

但是，如果您想订购返回的*行*，

```
SELECT ... FROM ... ORDER BY id DESC
// DESC means biggest value first ^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T14:01:06.680

`SELECT * FROM myTable ORDER BY date DESC`

更多关于它[的信息](http://www.w3schools.com/sql/sql_orderby.asp)。

请注意，`DESC`（降序）在这里很重要，以便获得最新的。默认值为`ASC`（升序）。

`ORDER BY`只有在您的日期被正确存储的情况下才能正常运行，而不是作为`VARCHAR`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T14:02:04.390

您没有使用 *mysqli_fetch_array* 来提取评论，而是使用它将结果放入数组中。您可能正在使用 *mysqli_query* 来获取评论，因此您需要查看那里，而不是在仅格式化已经获取和排序的结果的数组函数中......

就像是：

```
"SELECT fields,go,here FROM comments ORDER BY id DESC 
```

将起作用，如果您使用的是 ID，或者您可以按 *comment_date* 对它们进行排序，例如，如果您有这样的字段等。

# maven - 在 Jenkins 中运行 JUnit Selenium 测试的问题

> ID：16193936
> 
> 赞同：0
> 
> 时间：2013-04-24T13:57:31.730
> 
> 标签：maven, selenium, junit, jenkins

我是使用 Selenium 和 Jenkins 的初学者。所以这是我的问题。

我上了一个 Linux VM，jenkins，它已安装并获得了插件：JUnit 附件和 filesystem_SCM。

我在该 VM 的文件夹中找到了包含我的硒测试的 java 文件。

我会从 jenkins 执行那些在 Selenium RC 打开的 Windows 机器上执行的脚本。

我怎么能那样做？我见过 Selenium 网格插件，或者只是尝试使用包含 mvn 指令的 shell 命令创建作业，但我真的不明白该怎么做？有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:12:51.087

我相信你想要做的是将一台 Windows 机器（VM 非常棒）配置为 Selenium 从属机器，然后在那里执行你的测试。在这种情况下，您的 Jenkins Master（Linux 虚拟机）将触发从属设备（Windows 虚拟机）执行构建。

在 Jenkins 中，您可以通过让 Slave 执行通过 JUnit 运行测试的构建来做到这一点。您可以将执行测试配置为 Jenkins 中的单独构建，或者简单地作为主构建中的构建步骤。

以下是一些相关链接：

*   [Jenkins 分布式构建](https://wiki.jenkins-ci.org/display/JENKINS/Distributed+builds)
*   [在 Jenkins 中设置主从机](https://wiki.jenkins-ci.org/display/JENKINS/Step+by+step+guide+to+set+up+master+and+slave+machines)

# c# - 如何让 MVC4 Web API 在同一个控制器中支持 HTTP 动词和“动作”方法？

> ID：16193939
> 
> 赞同：1
> 
> 时间：2013-04-24T13:57:38.347
> 
> 标签：c#, rest, asp.net-mvc-4, routes

如何设置路由以支持此功能？

*   GET /api/values/ **有效**
*   GET /api/values/1 **作品**
*   POST /api/values**有效**
*   PUT /api/values **有效**
*   删除 /api/values**有效**
*   获取 /api/values/GetSomeStuff/1 不起作用 **！**

如果我切换路线，那么 GetSomeStuff 可以工作，但是 /api/values 不起作用。如何配置路由以使它们都工作？

示例方法：

```
 // GET api/values
    public IEnumerable<string> Get()
    {
        return new string[] { "value1", "value2" };
    }

    // GET api/values/5
    public string Get(int id)
    {
        return "value";
    }

    // POST api/values
    public void Post([FromBody]string value)
    {
    }

    // PUT api/values/5
    public void Put(int id, [FromBody]string value)
    {
    }

    // DELETE api/values/5
    public void Delete(int id)
    {
    }

    // GET api/values/5
    [HttpGet]
    public string GetSomeStuff(int id)
    {
        return "stuff";
    } 
```

路线设置如下：

```
config.Routes.MapHttpRoute(
            name: "ActionApi",
            routeTemplate: "api/{controller}/{action}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );

        config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:22:49.017

如何代替：

```
GET /api/values/GetSomeStuff/1 
```

你这样设计你的网址：

```
GET /api/someStuff/1 
```

现在您可以简单地对其`SomeStuffController`进行`Get(int id)`操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T15:47:13.167

您可以尝试以下路线：

```
 config.Routes.MapHttpRoute(
            name: "DefaultController",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional },
            constraints: new { id = @"^[0-9]*$" }
        );

        config.Routes.MapHttpRoute(
            name: "DefaultController2",
            routeTemplate: "api/{controller}/{action}/{id2}"
        ); 
```

并将您的操作方法更改为：

```
 [HttpGet]
    public string GetSomeStuff(int id2)
    {
        return "stuff";
    } 
```

# xpages - 无法在应用程序布局控件 (XPages) 中设置元素

> ID：16193946
> 
> 赞同：0
> 
> 时间：2013-04-24T13:57:56.580
> 
> 标签：xpages, lotus-domino, xpages-extlib

好的，我有两个自定义控件：

*   MainLayout：包含一个应用程序布局控件（来自 Domino 扩展库）
*   Section1：包含一个带有标题和一些项目的部分

现在我创建一个新的 XPage，并将 MainLayout 控件拖到上面。

现在我想将 Section1 拖到页面上，并将其连接到 MainLayout 的 LeftColumn 区域......这看起来很简单，但由于某种原因我无法让它工作。

当我将 section1 控件拖到 leftColumn 区域时，组件总是被插入到页面顶部。“LeftColumn”旁边的小铅笔图标对我来说似乎只是装饰，因为无论您左键单击还是右键单击它，都没有任何反应......

这应该如何工作？

更新：

这是添加 MainLayout 控件后我的 xpage 的样子：

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core" xmlns:xc="http://www.ibm.com/xsp/custom">

    <xp:this.resources>
        <xp:styleSheet href="/custom.css"></xp:styleSheet>
    </xp:this.resources>
    <xc:MainLayout></xc:MainLayout>

</xp:view> 
```

MainLayout 自定义组件的 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core"
    xmlns:xe="http://www.ibm.com/xsp/coreex"
    xmlns:xc="http://www.ibm.com/xsp/custom">
    <xe:applicationLayout id="applicationLayout1">
        <xe:this.configuration>
            <xe:oneuiApplication titleBarName="Test"
                    placeBarName="Server1" legalText="YadaYada">
                <xe:this.footerLinks>
                    <xe:userTreeNode label="User 1"></xe:userTreeNode>
                </xe:this.footerLinks>
                <xe:this.bannerUtilityLinks>
                    <xe:loginTreeNode label="Login 1"></xe:loginTreeNode>
                </xe:this.bannerUtilityLinks>
                <xe:this.placeBarActions>
                    <xe:basicContainerNode label="Select server">
                        <xe:this.children>
                            <xe:basicLeafNode label="Server1"></xe:basicLeafNode>
                        </xe:this.children>
                    </xe:basicContainerNode>
                </xe:this.placeBarActions>
            </xe:oneuiApplication>
        </xe:this.configuration>
    </xe:applicationLayout>
</xp:view> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T15:07:46.227

我还有一个使用应用程序布局的自定义。在我的自定义控件中，我在配置标记上方有以下代码 ![在此处输入图像描述](https://i.stack.imgur.com/oBem4.png)

在我使用自定义布局的 XPage 中，我通过以下代码引用了我的 LeftColumn 可编辑区域 ![在此处输入图像描述](https://i.stack.imgur.com/6tBoZ.png)

# html - 将 ul li 列表设置为浮动位置

> ID：16193949
> 
> 赞同：1
> 
> 时间：2013-04-24T13:58:00.630
> 
> 标签：html, css

这是我的 html 代码：-

```
<div id="load">
<ul>
    <li>Activities
    <div>
    <ul>
        <li>Physical1
        <div>
        <ul>
            <li>Cricket
            <div>
            <ul>
                <li>One Day</li>
            </ul>
            </li>
        </ul>
        </li>
        <li>Test1
        <div>
            <ul>
                <li>Test At Abc</li>
            </ul>
        </li>
        <li>Test2
            <div>
            <ul>
        <li>Test At Xyz</li>
    </ul>
    </li>
</ul>
</li>
</ul>
</div> 
```

这是我的CSS：-

```
li{
color:red;
border-left:1px solid green;
}
li{
list-style:none;
}
ul > li > div > ul {
    display: none;  // hide all submenus

}

li:hover > div > ul {
    display: block; // show sub menu when parent li is hovered
} 
```

现在我想要这种类型的清单：- ![在此处输入图像描述](https://i.stack.imgur.com/Kl4Ee.png)

我认为使用适当的位置 css 样式就完成了。
或浮动我认为它是可能的。任何帮助都来...
谢谢...

# php - join() 数组用反引号包裹每个值

> ID：16193951
> 
> 赞同：0
> 
> 时间：2013-04-24T13:58:02.550
> 
> 标签：php

如何用[反引号](http://en.wikipedia.org/wiki/Backtick)加入包含每个值的数组数据？

在不改变阵列本身的情况下需要一条线的解决方案。

```
$coldata = array('value1','value2','value3');
$joined_coldata = join(', ', $coldata); 
```

预期结果：

```
`value1`, `value2`, `value3` 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T13:59:48.707

```
$joined_coldata = empty($coldata)?"":"`".implode('`, `', $coldata)."`"; 
```

这会在每个连接周围使用反引号来内爆字符串（join 是内爆的别名），并在结果周围添加反引号，该结果看起来像内爆：

```
value1`, `value2`, ..., `valueN 
```

并额外检查它是否为空：然后它不输出任何内容而不是两个反引号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T14:01:54.763

这是“便宜”的方式：

```
$joined_coldata = "`".implode("`, `",$coldata)."`"; 
```

以及“正确”的方式（扩展到几行，但都是一行“代码”）：

```
$joined_coldata = implode(",",array_map(function($a) {
    // perform escaping here
    return "`".$a."`";
},$coldata)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T14:01:07.010

```
$coldata = array('value1','value2','value3');
$joined_coldata = "'" . join("','", $coldata) . "'"; 
```

应该做的伎俩

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T13:59:44.027

不漂亮，但这是最简单的方法：

```
$joined_coldata = '`' . join('`, `', $coldata) . '`'; 
```

确保它`$coldata`不是空的 - 如果是，您需要单独处理它以避免获得单个空元素！

# core-data - Core Data Single Managed Object Context and two threads

> ID：16193955
> 
> 赞同：0
> 
> 时间：2013-04-24T13:58:21.380
> 
> 标签：core-data, nsmanagedobjectcontext

I am going crazy trying to figure this out. I am working on an application that is syncing up data from the webserver. There is a background thread that is pulling data from the server to the application. At the same time I am making changes to the UI. The values changed on UI are being saved to core data in foreground.

Through out the application I have one managedObjectContext that I fetch from the app delegate every time I create a fetchController . App delegate code

```
- (NSManagedObjectContext *)managedObjectContext
{
    if (__managedObjectContext != nil) {
        return __managedObjectContext;
    }

    NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];
    if (coordinator != nil) {
        __managedObjectContext = [[NSManagedObjectContext alloc] init];
        [__managedObjectContext setPersistentStoreCoordinator:coordinator];
    }
    return __managedObjectContext;
} 
```

Now the problem is I am getting error while trying to save the context. The errors are happening randomly in the code. I am saving the context as soon as I am making change to any entity. Also I have two relationships each in each entity one to its child that is one to many and one to its parents that is to - one. All relationship have appropriate inverse.

I think I am doing something conceptually wrong over here by mentaining one context. Could you please advice how I should manage context in a situation where both background and foreground threads are reading and writing to the coredata. Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:11:14.027

Managed object contexts are not thread safe, so if you use the same one on more than one thread without considering concurrency-- you're going to have major problems. As in, crashing and/or data loss and maybe even data corruption. There are a couple of ways to deal with this:

1.  Use one of the queue concurrency types when creating the context-- see docs for `initWithConcurrencyType:`. Then, whenever you access the data store, use either `performBlock:` or `performBlockAndWait:` to synchronize access.

2.  Create a new managed object context for the background thread. Use `NSManagedObjectContextDidSaveNotification` and `mergeChangesFromContextDidSaveNotification:` to keep multiple contexts synchronized.

But whatever you do, do **not** just use one managed object context on more than one thread.

# javascript - 从 html5 添加或删除控件属性 标签

> ID：16193957
> 
> 赞同：4
> 
> 时间：2013-04-24T13:58:31.443
> 
> 标签：javascript, jquery, attributes, html5-video

我正在寻找一种基于用户代理字符串将控件属性添加到视频标签的方法。

我不希望在 Ipad 和 Android 以外的任何浏览器或设备上显示控件属性。所以我认为用户代理是最好的识别方式，因为 ipad 和 android 这两个词出现在它们各自的 UA 标头中。

实现我的目标的最佳方式是什么？我试过这个没有运气：

```
<script type="text/javascript">
  var myVideo = document.getElementById("myVideo");
  var agent = navigator.userAgent.toLowerCase();
  var addAttr = (agent.indexOf('ipad')!=-1) || agent.indexOf('android')!=-1);
  if (addAttr) {
    myVideo.setAttribute("controls","controls");
  }
  else {
    document.write("");
  }
</script> 
```

这是我的 html5 视频资料

```
<video id="myVideo" width="1170" height="324" preload="metadata" autoplay="true">
  <source src="movie.mp4" type="video/mp4">
  <source src="movie.ogg" type="video/ogg">
  <object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" 
    codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,16,0"
    width="1170" height="324" >
    <param name="movie" value="movie.swf">
    <param name="quality" value="high">
    <param name="play" value="true">
    <param name="LOOP" value="false">
    <embed src="movie.swf" width="1170" height="324" play="true" loop="false" quality="high" pluginspage="http://www.macromedia.com/go/getflashplayer" 
    type="application/x-shockwave-flash">
    </embed>
  </object>
</video> 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-08-27T01:43:31.917

如果没有 jQuery，甚至更短：

```
//Add
myVideo.controls = "controls";

//Remove
myVideo.controls = ""; 
```

*   基于此，您已经像以前一样创建了一个变量 myVideo：

    var myVideo = document.getElementById("myVideo");

希望有帮助:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-05T13:48:27.173

你可以用 jQuery 做到这一点：

```
//Add
$('#myVideo').prop("controls", true);

//Remove
$('#myVideo').prop("controls", false); 
```

# c# - 将 PDF 流式传输到浏览器？

> ID：16193960
> 
> 赞同：5
> 
> 时间：2013-04-24T13:58:37.423
> 
> 标签：c#, asp.net, pdf, stream

谁能告诉我如何将pdf流式传输到新的标签浏览器？我只是在内存中有 pdf 流，当我单击链接以在新选项卡或窗口浏览器中显示 PDF 时，我想要。我怎么能那样做？感谢！！！

我有这个链接：

```
<a id="hrefPdf" runat="server" href="#" target="_blank"><asp:Literal ID="PdfName" runat="server"></asp:Literal></a> 
```

在我后面的代码中，我在 onload 事件中有这个：

```
 Stream pdf= getPdf
                if (pdf != null)
                {
                    SetLinkPDF(pdf);
                }

    private void SetLinkPDF(IFile pdf)
    {
        hrefPdf.href = "MyPDF to the Browser"
        PdfName.Text = pdf.PdfName;      
    } 
```

不知何故我必须处理流pdf（IFile包含PDF的名称、流、元数据等）

我可以做些什么来处理这个，当我点击在新浏览器上显示流时？

我有另一个问题，没有工作 OnClientClick="aspnetForm.target='_blank';" timbck2 建议我。我必须在新窗口中打开文件（图像或 pdf），我该怎么办？不工作。感谢！

Timbbck2 我的asp代码是：

```
<asp:LinkButton runat="server" ID="LinkButtonFile" OnClick="LinkButtonFile_Click" OnClientClick="aspnetForm.target = '_blank';"></asp:LinkButton> 
```

谢谢！！！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-24T15:26:16.503

我已经从磁盘上的文件完成了这项工作——从内存流中发送数据应该没有太大的不同。除了数据本身之外，您还需要向浏览器提供两条元数据。首先，您需要提供数据的 MIME 类型（在您的情况下是`application/pdf`），然后在 Content-Length 标头中提供数据的大小（以字节（整数）为单位），然后发送数据本身。

总而言之（考虑到评论以及我*认为*您要问的内容，您的标记将如下所示：

```
<asp:LinkButton ID="whatever" runat="server" OnClick="lnkButton_Click" 
  OnClientClick="aspnetForm.target='_blank';">your link text</aspnet:LinkButton> 
```

后面代码中的这几行 C# 代码应该可以解决问题（或多或少）：

```
protected void lnkButton_Click(object sender, EventArgs e)
{
    Response.ClearContent();
    Response.ContentType = "application/pdf";
    Response.AddHeader("Content-Disposition", "inline; filename=" + docName);
    Response.AddHeader("Content-Length", docSize.ToString());
    Response.BinaryWrite((byte[])docStream);
    Response.End();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T14:03:58.063

要直接在浏览器中显示 pdf，您应该为响应设置内容类型`application/pdf`

您的用户还应该安装某种 pdf 阅读器才能正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T14:09:29.467

你试过[Response.BinaryWrite](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.binarywrite.aspx)吗？您可能还想设置一些标题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-31T22:07:34.420

最佳答案建议首先将流转换（转换）为 byte[]，这会将文件下载到服务器（从它来自的任何流），然后将其发送到客户端。

如果您需要`Stream`为某些外部服务（例如我的 Azure 存储）提供 a 作为参数，您可以使用以下方法。

```
public ActionResult Coupons(string file)
{
    Response.AddHeader("Content-Disposition", "inline; filename=" + file);
    Response.ContentType = "application/pdf";
    AzureStorage.DownloadFile(file, Response.OutputStream);//second parameters asks for a 'Stream', you can use whatever stream you want here, just put it in the Response.OutputStream
    return new EmptyResult();
} 
```

这会将文件直接流式传输到客户端（据我所知）。

# teamcity - 如何隐藏选定用户的 TeamCity 配置？

> ID：16193963
> 
> 赞同：8
> 
> 时间：2013-04-24T13:58:41.973
> 
> 标签：teamcity, teamcity-7.1

我有一个`Dac.Test`包含 3 个配置的 TeamCity 项目：`DEV`、`QA`、`PROD`。

![在此处输入图像描述](https://i.stack.imgur.com/4SDsF.png)

我也有一些用户与他们的角色相关联。这是否可以**隐藏/显示**选定用户或组的某些**配置？**

例如：与组关联的用户：`Testers`可以看到`QA`配置，但不能`PROD`和`DEV`。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-01-21T12:20:52.557

无法管理每个构建的用户权限，这仅在项目级别可用。您可以在项目中创建一个子项目`Dac.Test`来满足这一点

如果您正在寻找一种方法来阻止人们错误地运行此构建，则以下方法将起作用。

此方法使用单击运行按钮后会弹出的提示框，它还需要用户输入确认他们的意思是运行构建。 **没有人可以意外运行此构建**

1.  转到 TeamCity UI 中的构建配置
2.  从这里，转到编辑配置设置 --> 参数 --> 添加新参数
3.  输入类似“确认”的内容作为参数名称
4.  然后在“规格：”旁边，单击“编辑...”按钮
5.  设置参数，如以下屏幕截图所示：

![在此处输入图像描述](https://i.stack.imgur.com/vUSsA.png)

现在，当您单击运行按钮时，系统会提示您并要求您确认。用户必须在出现的提示框中输入“是”，任何其他值都将阻止用户构建： ![在此处输入图像描述](https://i.stack.imgur.com/juyOx.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T14:24:11.347

这最好通过使用 TeamCity 的内置[角色管理](http://confluence.jetbrains.com/display/TCD7/Role+and+Permission)来完成。角色允许您为用户和组设置细粒度的权限。然而，一个潜在的问题是角色的范围是项目（而不是构建配置）。您需要创建一个单独的`Dac.Test QA`项目+配置并`Testers`在那里提供必要的权限。您还需要确保他们被剥夺了`Dac.Test`项目的所有权限。

# java - Servlet - 将响应导出到 Excel 文件

> ID：16193970
> 
> 赞同：3
> 
> 时间：2013-04-24T13:59:06.390
> 
> 标签：java, excel, jsp, servlets, response

我无法将响应从 servlet 导出到 excel 文件。请看下面的代码：

测试.java：

```
 @Override
public void doPost(HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException {
response.setContentType("text/html");
out = response.getWriter();
out.print("<form name=\"test\" method=\"post\" action=\"Export\">");
out.print("<table border=\"1\" cellpadding=\"3\" bordercolor='black'");
out.print("<tr>");
out.print("<td>1</td>");
out.print("<td>hello how are you?</td>");
out.print("</tr>");
out.print("</table>");
out.print("<td><input type=\"submit\" name =\"submit1\" value=\"Export To Excel\"></td>");
out.print("</form>"); 
```

单击提交按钮时会生成一个不包含任何值的 Excel 表。查看`Export.java`单击提交按钮时调用的内容。

导出.java

```
public class Export extends HttpServlet {

@Override
public void doPost(HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException {
    String submit1 = request.getParameter("submit1");
   if (submit1 != null) {
        response.setContentType("application/vnd.ms-excel");
        response.setHeader("Content-Disposition", "attachment; filename=users.xls");
    }
}
} 
```

此外，据观察，如果我在 中编写以下代码`Test.java`，它的工作正常并且 excel 表确实包含表格值。

```
response.setContentType("application/vnd.ms-excel");
response.setHeader("Content-Disposition", "attachment; filename=users.xls"); 
```

单击提交按钮时，有什么方法可以将输出转发`Export.java`到。`Test.java`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T07:38:52.633

最后，我找到了解决方案！我把所有的`out.print()`东西都存储到一个`StringBuffer`. 然后使用`getServletContext().setAttribute("test", Buffer);`我将整个内容转发到另一个 servlet，并从另一个 servlet 中使用`StringBuffer data = (StringBuffer) getServletContext().getAttribute("test");`.

最后，

```
response.setContentType("application/vnd.ms-excel");
response.setHeader("Content-Disposition", "attachment; filename=sample.xls");
response.getWriter().write(data.toString());` 
```

做了这项工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T23:00:42.990

您必须在打印响应之前调用 setContentType。您不能打印您的 HTML 表，然后让用户单击一个按钮，将他们带到一个完全不同的 servlet，除了将 setContentType 设置为 Excel 并期望它以某种方式记住您的 HTML 表之外什么都不做。您还应该真正考虑获取 Java 的 Excel 库（例如 Apache POI）并使用 application/msexcel 而不是依赖 application/vnd.ms-excel 将 HTML 转换为 Excel，如果该项目旨在具有任何真实世界用处。

# php - Ajax 调用在 Chrome 上可以正常工作，但在 IE7 上不行

> ID：16193976
> 
> 赞同：0
> 
> 时间：2013-04-24T13:59:24.757
> 
> 标签：php, javascript, ajax, internet-explorer-7

首先我想说这个问题只在使用 Internet Explorer 7 时发生，当我使用 Chrome 时一切正常。

所以，我遇到的问题如下，我有一个非常简单的 PHP 文件，它有一个文档编号的输入框，然后它有一个提交按钮，差不多就是这样，问题（我认为）来自我打电话的地方使用 Ajax 的第二个 PHP 文件（该文件负责查询 MYSQL 数据库并返回带有一些数据的表和图形）但是当我运行 IE7 时，在调用**succes 函数后我什么也没得到：（响应）** .

这是我调用第二个文件的函数：

```
function realizaProceso(valorDocumento){
    var parametros = {
            "valorDocumento" : valorDocumento
    };
    if ($.browser.msie  && parseInt($.browser.version, 10) === 7) {

        } else {

        }

    $.ajax({
            data:  parametros + "&r=" + Math.random(),
            cache: false,
            url:   'proceso.php',
            type:  'post',
            dataType : 'text',
            beforeSend: function () {

                    $("#resultado").html("Procesando, espere por favor...");
            },
            success:  function (response) {

                    $("#resultado").html(response);
            }
    }); 
```

}

正如你所看到的，我已经尝试了一些在这个网站上的 symilar 线程上建议的东西，比如使用**cache: false，**或者在每次调用时添加一些随机生成的数据。

这是完整 PHP 文件的[链接。](http://pastebin.com/LPLR4NzU)

**<--更新-->**

所以在遵循了你们给我的一些建议之后，我终于可以调用另一个 PHP 文件了，现在的问题是，我什至认为我可以调用它，由于某种原因，IE7 没有解析 PHP 脚本返回的内容，这里是[链接到 proceso.php 文件](http://pastebin.com/f4P5AXMR)，在此先感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T14:08:57.917

Stack Overflow 上已经有一些帖子，其中包含与 javascript 解析、jQuery 不完全支持 IE7 相关的多种解决方案（但这可能是基于版本的），以及以 IE7 不赞成的方式格式化的 html。你可以在这里找到这些答案：

[IE7 中的 jQuery AJAX 问题（可能还有其他版本）](https://stackoverflow.com/questions/2318743/jquery-ajax-problem-in-ie7-possibly-other-versions-as-well)

[IE7 和 IE6 中的 jQuery .ajax 方法不起作用，但在 Firefox 中工作正常](https://stackoverflow.com/questions/2320090/jquery-ajax-method-in-ie7-ie6-not-working-but-working-fine-in-firefox)

# wordpress - 没有作者的自定义帖子类型

> ID：16193978
> 
> 赞同：3
> 
> 时间：2013-04-24T13:59:34.567
> 
> 标签：wordpress

我正在向新帖子中插入信息，当我使用 var_dump 时，我看不到任何作者 ID，因此，我以后无法检索它。

```
global $user_ID;
$new_post = array(
'post_title' => $_POST['titulo_necessidade'],
'post_content' => $_POST['conteudo_necessidade'],
        'post_status' => 'publish',
        'post_date' => date('Y-m-d H:i:s'),
        'post_author' => $user_ID,
        'post_type' => 'necessidade',
        'post_category' =>  array(0)
    );
    $post_id = wp_insert_post($new_post);
    var_dump(get_post_meta($post_id)); 
```

我得到的结果如下

数组（3）{[“titulo_necessidade”]=>数组（1）{[0]=>字符串（7）“tyktyuk”}[“conteudo_necessidade”]=>数组（1）{[0]=>字符串（7 ) "tkyutut" } ["submit_necessidade"]=> 数组(1) { [0]=> 字符串(6) "Enviar" } }

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T14:33:40.820

检查是否在注册自定义帖子类型时`register_post_type`指定`author`为支持。

有关自定义帖子类型的更多信息：http: [//codex.wordpress.org/Function_Reference/post_type_supports](http://codex.wordpress.org/Function_Reference/post_type_supports)

# c++ - 构建 Qt Slog 时的错误信息计算

> ID：16193980
> 
> 赞同：0
> 
> 时间：2013-04-24T13:59:37.143
> 
> 标签：c++, qt

嘿伙计们，我正在尝试制作以下插槽：用户应该在行编辑中输入一系列数字，它们之间有空格（例如：5 10 15 10 2）我希望将这些数字存储到整数向量中。全部读取后，我希望通过以下方式更改向量的值 - 从第二个元素开始到最后，每个元素都应等于以下内容`vector[i] = vector[i] - vector[i-1]`：同样，这不计入第一个。我会做更多的计算，但看起来我还不能完全正确地完成这项工作。

布局如下：一个按钮、一个 lineEdit 和一个 Label。这是头文件：

```
#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QMainWindow>
#include <QVector>
namespace Ui {
class MainWindow;
}

class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();

private:
    Ui::MainWindow *ui;
    QVector<int> vec;
private slots:
    void compute();
};

#endif // MAINWINDOW_H 
```

和实施：

```
#include "mainwindow.h"
#include "ui_mainwindow.h"
#include <QString>

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);
    connect(ui->lineEdit
            , SIGNAL(editingFinished()), this, SLOT(compute()));
    connect(ui->pushButton
            , SIGNAL(pressed()), this, SLOT(compute()));
}

MainWindow::~MainWindow()
{
    delete ui;
}

void MainWindow :: compute()
{
    // Read user input
    QString numbers = ui->lineEdit->text();
    QString tmp; // create temp string which will be used to store the temp substrings of each int
   numbers+="   ";
    for(int i = 0; i < numbers.length()-1; i++)
    {
        if(numbers[i].isDigit())
        {
            tmp +=numbers[i];
        }
        else
        {
            bool ok = true;
            int iTime = tmp.toInt(&ok, 10);
            vec.push_back((iTime));
            tmp="";
        }
    }
    //compute the real vector that we will search the max subarray from
    for(int i = 1; i < vec.size(); i++)
    {
        vec[i] = vec[i] - vec[i-1];
    }

    int tt = 0;
    for(int z = 0; z != vec.size(); z++)
    {
        tt+= vec[z];

    }
    ui->label->setText( QString::number(tt));
} 
```

我不会发布主要功能，因为它是您创建 Qt GUI 应用程序时的标准功能。所以，问题是，下面这行： `ui->label->setText( QString::number(tt));`总是在标签上打印零。我在代码块中制作了这个程序，没有 Qt GUI 库，我让它工作了。我很好奇问题出在哪里。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T14:01:38.650

```
for(int z = 0; z != vec.size(); z++) 
```

应该：

```
for(int z = 0; z < vec.size(); z++) 
```

# javascript - Grails RemoteFunction 创建了错误的 javascript

> ID：16193981
> 
> 赞同：0
> 
> 时间：2013-04-24T13:59:39.153
> 
> 标签：javascript, grails, dojo

我正在从一位离开我公司的工程师那里接手一个项目，并且必须快速了解 Grails，所以如果这是一个菜鸟问题，那么我就是菜鸟。

在我的一个 GSP 文件中，我在 javaScript 函数中间有一个 remoteFunction 调用：

```
function fnCreateEntitiesPerForceChart() {
      var interval = $("#entitiesPerForceTimeIntervalSelect").val();
      var url = '${createLink(controller: 'federation', action: 'createEntitiesPerForceChart')}?interval='+escape(interval);
      $("#entitiesPerForceChart").attr("src", url);

      ${remoteFunction(controller: 'federation', 
        action: 'getEntitiesPerForceTable', 
        params: '\'interval=\'+interval', 
        onSuccess: 'fnUpdateEntitiesPerForceTable(data,textStatus)')}; 
    } 
```

该 remoteFunction 调用被发送到客户端，如下所示：

```
try{DojoGrailsSpinner.show();}catch(e){} dojo.xhr('Get',{content:{'interval='+interval}, preventCache:true, url:'/FederationReporter/federation/getEntitiesPerForceTable', load:function(response){ fnUpdateEntitiesPerForceTable(data,textStatus); }, handle:function(response,ioargs){try{DojoGrailsSpinner.hide();}catch(e){} }, error:function(error,ioargs){try{DojoGrailsSpinner.hide();}catch(e){} } });; 
```

导致错误： SyntaxError: missing : after property id ...){} dojo.xhr('Get',{content:{'interval=' **+** interval}, preventCache:true, url:'/Fed.. .

联邦（第 400 行，第 60 列）（这是第二个“间隔”之前的粗体“+”

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T14:19:21.343

Dojo`content`应该是一个键值对。

`{content:{'interval': interval}`

# actionscript-3 - AS3 - 检查数组的结果并添加到计数器

> ID：16193989
> 
> 赞同：0
> 
> 时间：2013-04-24T13:59:53.200
> 
> 标签：actionscript-3, flash, flash-cs6

我正在尝试进行视频测验，当您单击它时，会将值 1 添加到数组中。数组大小上升到 [9] 并且我正在尝试从数组中读取，以便如果在 [0] 和 [9] 之间的数组中有值 1，它将向计数器添加 1。

我让它只为数组中的第一个值工作，所以我知道它有效，但我不确定如何让它从所有数组中读取以检查 1 的值。

到目前为止，这是我的代码：

```
if (clickTimes[0] == 1)
{
counter2++;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T14:16:06.473

更好的是，使用`for each...in`循环。它确实与常规循环没有什么不同`for`，但它确实提供了一些语法糖。

```
for each (var i:int in clickTimes)
{
    if (i == 1)
    {
        counter2++;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T14:59:16.087

```
var clickTimes:Array = [1,1,1,0,0,0,1,1,0] // 5 1's and 4 0's
var counter2:int = 0

clickTimes.forEach(function(obj:*){
                       if (obj == 1){
                           counter2++;
                       }
                   })

trace(counter2) // traces 5 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T14:28:51.297

为了它的美丽...

`counter2 = clickTimes.join('').replace(/0/g, '').length;`

它将所有值放在一个字符串中，删除零并计算剩下的字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T14:06:53.607

使用循环怎么样？

```
for (var i:int = 0; i < clickTimes.length; ++i)
{
    if (clickTimes[i] == 1)
        counter2++;
} 
```

`counter2`对于数组中每个值为 1 的元素，这将增加`clickTimes`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T15:34:32.843

你不需要`if`。只是以下内容：

```
var clickTimes:Array = [1,1,1,0,0,0,1,1,0] // 5 1's and 4 0's
var counter2:int = 0;

for each (var i:int in clickTimes)
{
    counter2 += i;
}

trace(counter2); //5 
```

# c++ - OpenGL/C++：使用顶点缓冲区进行从后到前渲染

> ID：16193990
> 
> 赞同：1
> 
> 时间：2013-04-24T13:59:53.933
> 
> 标签：c++, opengl, transparency, vbo

我目前正在思考如何以从后到前的顺序有效地在顶点缓冲区中渲染多边形以使透明度正常工作..

我设置了顶点缓冲区和索引缓冲区，进行 glDrawElements 渲染，除了透明度之外，一切都运行良好，因为我目前以任意（创建对象的顺序）顺序渲染..

稍后我将实现八叉树渲染，但这只会有助于整体顶点缓冲区渲染顺序（首先渲染哪个顶点缓冲区），而不是顶点缓冲区内的顺序。

我唯一能想到的就是每次我更改相机位置时重新排序我的索引缓冲区，这感觉非常低效，因为我每个 vbo 存储了大约 65.000 个顶点（使用 GLushort 作为索引以实现大约 1- 的最佳 vbo 大小4MB)..

有没有更好的方法来排序顶点缓冲区对象中的顶点（或者更好地表述索引缓冲区对象中的相应索引）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T14:05:22.863

有两种方法（虽然我自己没有使用过）

1.  剥离（双剥离）[http://developer.download.nvidia.com/SDK/10/opengl/src/dual_depth_peeling/doc/DualDepthPeeling.pdf](http://developer.download.nvidia.com/SDK/10/opengl/src/dual_depth_peeling/doc/DualDepthPeeling.pdf)

2.  随机透明度 [http://www.cse.chalmers.se/~d00sint/StochasticTransparency_I3D2010.pdf](http://www.cse.chalmers.se/~d00sint/StochasticTransparency_I3D2010.pdf)

此外，如果您的对象是凸面剥离，则可以通过第一次绘制`back faces`和`front faces`（使用`GL_CULL_FACE`和反转法线以在着色器中正确照明）轻松实现

# oracle - 存储过程来比较 2 个字段并在另一个表中返回不匹配

> ID：16193992
> 
> 赞同：0
> 
> 时间：2013-04-24T13:59:54.980
> 
> 标签：oracle, stored-procedures, oracle-sqldeveloper

我在 Oracle SQL Developer 中创建存储过程。我正在尝试比较 2 个表的两列，如果任何表有更多记录，我需要收集它们并将其存储在（另一个表）中投掷

ORA-01422：精确提取返回超过请求的行数 ORA-06512：在“TEST_VAL”，第 73 行 ORA-06512：在第 2 行

如果我将其作为 SQL 查询运行，这是运行良好的查询

```
SELECT h.STATEMENTNUMBER, h.STATEMENTTOTAL
FROM statement_header h
MINUS
SELECT j.STATEMENTNUMBER, j.STATEMENTTOTAL
FROM jwf_statement j; 
```

我的存储过程看起来像这样

```
create or replace PROCEDURE        TEST_VAL 
IS
l_num_recs        VARCHAR2 (20);
BEGIN
select STATEMENTNUMBER into  l_num_recs
from
(SELECT H.STATEMENTNUMBER, H.STATEMENTTOTAL
FROM statement_header H
MINUS
SELECT J.STATEMENTNUMBER, J.STATEMENTTOTAL
FROM jwf_statement J

);
insert into l_num_recs values(l_num_recs);
Commit;
End; 
```

任何帮助都会得到帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T14:04:06.393

```
create or replace PROCEDURE        TEST_VAL 
IS
BEGIN
insert into destinationTableName
select STATEMENTNUMBER
from
(SELECT H.STATEMENTNUMBER, H.STATEMENTTOTAL
FROM erocks.statement_header_staging H
MINUS
SELECT J.STATEMENTNUMBER, J.STATEMENTTOTAL
FROM erocks.ps_jwf_statement_staging J
);
Commit;
End; 
```

# php - 为什么这个 foreach 循环会提前结束？

> ID：16193997
> 
> 赞同：2
> 
> 时间：2013-04-24T14:00:12.623
> 
> 标签：php, wordpress, loops, foreach

我想知道为什么这个函数中的 foreach 循环在它只经过一次循环后输出数据后就结束了。我在 MySQL 中运行了查询，它返回了我正在寻找的 8 条记录。当我`print_r`在 foreach 之前和之后将所有内容打包到数组中时，它会在数组中显示 8 个记录集。

但是，当我在页面上运行该函数时，它只输出第一个记录集然后停止。任何想法为什么会这样？

此外，将这一切塞进一个函数中还有一个很长很愚蠢的理由。只知道，这是我唯一的选择。

```
function query_hp_hero_events() {
global $wpdb;

$sql = "SELECT SQL_CALC_FOUND_ROWS *, mt2.meta_value AS start_time, mt3.meta_value AS end_time, mt4.meta_value AS start_date, mt5.meta_value AS event_id, mt6.meta_value AS event_meta, mt7.meta_value AS event_thumb FROM wp_posts INNER JOIN wp_term_relationships ON (wp_posts.ID = wp_term_relationships.object_id) INNER JOIN wp_postmeta ON (wp_posts.ID = wp_postmeta.post_id) INNER JOIN wp_postmeta AS mt1 ON (wp_posts.ID = mt1.post_id) INNER JOIN wp_postmeta AS mt2 ON (wp_posts.ID = mt2.post_id AND mt2.meta_key = 'event_start_time') INNER JOIN wp_postmeta AS mt3 ON (wp_posts.ID = mt3.post_id AND mt3.meta_key = 'event_end_time') INNER JOIN wp_postmeta AS mt4 ON (wp_posts.ID = mt4.post_id AND mt4.meta_key = 'event_start_date') INNER JOIN wp_postmeta AS mt5 ON (wp_posts.ID = mt5.post_id AND mt5.meta_key = 'event_id') INNER JOIN wp_postmeta AS mt6 ON (wp_posts.ID = mt6.post_id AND mt6.meta_key = 'event_meta') INNER JOIN wp_postmeta AS mt7 ON (wp_posts.ID = mt7.post_id AND mt7.meta_key = 'event_thumbnail_url') WHERE 1=1 AND ( wp_term_relationships.term_taxonomy_id IN (7) ) AND wp_posts.post_type = 'espresso_event' AND (wp_posts.post_status = 'publish') AND (wp_postmeta.meta_key = 'event_start_date' AND  (mt1.meta_key = 'event_start_date' AND CAST(mt1.meta_value AS DATE) >= '" . date('Y-m-d') . "') ) GROUP BY wp_posts.ID ORDER BY CAST(wp_postmeta.meta_value AS DATE) ASC, CAST(mt2.meta_value AS TIME) ASC LIMIT 0, 8";

echo $sql;

$events_query = $wpdb->get_results( $wpdb->prepare( $sql ));

foreach ($events_query as $event_listing) {

    $eventDate = strtotime($event_listing->start_date);
    $eventEndTime = strtotime($event_listing->end_time);
    $eventStartTime = strtotime($event_listing->start_time);
    $eventId = $event_listing->event_id;
    $eventMeta = $event_listing->event_meta;
    $eventThumb = $event_listing->event_thumb;

    $newEventMeta = unserialize($eventMeta);
    $newEventMeta2 = unserialize($newEventMeta);

    $homepageOverride = $newEventMeta2["homepage_override"];
    $ticketLink = $newEventMeta2["ticket_link"];
    $suiteRentals = $newEventMeta2["suite_rentals_link"];
    $vipTickets = $newEventMeta2["vip_ticket_link"];
    $groupTicketSales = $newEventMeta2["group_sales_link"];
    $parkingLink = $newEventMeta2["parking"];

    if ($eventDate >= strtotime(date('Y-m-d')) && $eventEndTime >= strtotime(date('G:i'))) {

        $hero = '<div id="event' . $eventId . '">';
        $hero .= '<div class="details">';
        if ( in_category( 'news' ) ) {
            $hero .= '<h1><a href="' . get_permalink() . '">' . $event_listing->post_title . '</a></h1>';
        } else {
        $hero .= '<h1><a href="/event-registration/?ee=' . $eventId . '">' . $event_listing->post_title . '</a></h1>';
        }

        if ( isset ( $homepageOverride ) && $homepageOverride != "" ) {
            $hero .= '<h2>' . $homepageOverride . '</h2>';
        } else {
            $hero .= homepage_event_date_range($eventId, $eventStartTime);
        }

        $hero .= '<ul>';
        if ( in_category( 'news' ) ) {
            $hero .= '<li><a href="' . get_permalink() . '">More Info</a></li>';
        } else {
            $hero .= '<li><a href="/event-registration/?ee=' . $eventId . '">More Info</a></li>';
        }
        if ( isset ( $ticketLink ) && $ticketLink != "" ) { $hero .= '<li><a href="' . $ticketLink . '" rel="external">Buy Tickets</a></li>'; }
        if ( isset ( $suiteRentals) && $suiteRentals != "" ) { $hero .= '<li><a href="' . $suiteRentals . '">Suite Rentals</a></li>'; }
        if ( isset ( $vipTickets) && $vipTickets != "" ) { $hero .= '<li><a href="' . $vipTickets . '">VIP Seats</a></li>'; }
        if ( isset ( $groupTicketSales) && $groupTicketSales != "" ) { $hero .= '<li><a href="' . $groupTicketSales . '">Group Tickets</a></li>'; }
        if ( isset ( $parkingLink) && $parkingLink != "" ) { $hero .= '<li><a href="' . $parkingLink . '" rel="external">Parking</a></li>'; }
        $hero .= '</ul>';

        $hero .= '</div>';

        if ( isset( $regexMatch[0] ) && $regexMatch[0] != "" && isset( $youtubeIdMatch[0] ) && $youtubeIdMatch[0] != "") {
            $hero .= '<div class="yt-video-player" id="videoplayerdiv1" src="http://www.youtube.com/v/' . $youtubeIdMatch[0] . '?enablejsapi=1&playerapiid=videoplayergen1&version=3"></div>';
        } else {
            $hero .= '<img src="' . $eventThumb . '" width="595" height="350" alt="" class="heroImg" />';
        }

        $hero .= '</div>';

    }

    return $hero;

}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T14:02:49.243

你的`return`内部有一个`foreach`- 一旦它击中`return`，函数就会返回，并且不再执行迭代。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T14:03:19.200

因为您在 for 循环中返回。所以 foreach 循环在每次运行时退出。删除返回并将结果添加到变量并在之后使用它们。不要在 for 循环中返回

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T14:03:09.073

返回 $hero; 位于循环内部，会导致循环仅运行一次。