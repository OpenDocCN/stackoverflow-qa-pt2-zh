# StackOverflow 问答 15754000-15754999

# ios - iOS 序列化/反序列化无法正常工作

> ID：15754000
> 
> 赞同：0
> 
> 时间：2013-04-02T00:12:54.630
> 
> 标签：ios, objective-c, serialization, deserialization

所以我有一个对象，我在其中实现了 NS Coding。我整天都在为此绞尽脑汁。据我了解，因为我已经实现了 NSCoding，所以当在数组本身上调用归档/取消归档方法时，应该对数组的索引进行编码和解码。因此，要么我对它的工作原理的理解不正确，要么我的实现中有一些错误。

文件被写入，数组被反序列化并显示其中有一个对象。但是数组中的类没有数据。

实现如下所示：

```
#pragma mark NSCoding

#define kTitle              @"Title"
#define kDescription        @"Description"
#define kIsCompleted        @"IsCompleted"
#define kDate               @"Date"
#define kImage              @"Image"

-(id)initWithCoder:(NSCoder *)decoder
{
    [super init];
    title = [decoder decodeObjectForKey:kTitle];
    description = [decoder decodeObjectForKey:kDescription];
    isCompleted = [decoder decodeBoolForKey:kIsCompleted];
    date = [decoder decodeObjectForKey:kDate];
    image = [decoder decodeObjectForKey:kImage];

    return self;
}

-(void) encodeWithCoder:(NSCoder *) encoder
{
    [encoder encodeObject:title forKey:kTitle];
    [encoder encodeObject:description forKey:kDescription];
    [encoder encodeBool:isCompleted forKey:kIsCompleted];
    [encoder encodeObject:date forKey:kDate];
    [encoder encodeObject:image forKey:kImage];
}

@end 
```

编码看起来像这样，有一些故障排除更改：

```
-(void) writeFile
{
    NSData *encodedObject;
    encodedObject = [NSKeyedArchiver archivedDataWithRootObject: bucketItems];
    //NSFileHandle *file;
   // file = [NSFileHandle fileHandleForWritingAtPath:filePath];

    //if(true)//file == nil)
    //{
        //NSLog(@"Failed to open a file handle for writing. Attempting to create a file.");
        //[[NSFileManager defaultManager] createFileAtPath:filePath contents:nil attributes:nil];
        //file = [NSFileHandle fileHandleForWritingAtPath:filePath];
        //if(file == nil)
        //{
         //   NSLog(@"Unable to create new file.");
       // }
    //}

    [encodedObject writeToFile:self.filePath atomically:YES];
    //[file writeData: encodedObject];
    //[file closeFile];
} 
```

然后解码发生在这里，程序启动，检查是否有保存的数据，并加载它

```
NSFileHandle *file = [NSFileHandle fileHandleForReadingAtPath:filePath];
        NSData *fileData;
        fileData = [file readDataToEndOfFile];
        bucketItems = [NSKeyedUnarchiver unarchiveObjectWithData:fileData];
        NSLog(@"Data file found: loading");
        [file closeFile]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T01:38:40.457

在您的`initWithCoder:`方法中，我发现缺少两件事 - 分配`[super init]`to的结果`self`，以及保留或复制直接分配给实例变量的任何对象。您可能可以在不将 [super init] 分配给 self 的情况下逃脱，但不保留实例变量将是灾难性的。

在手动引用计数环境中，除非调用转移所有权的方法，否则对象不会获得分配给实例变量的值的所有权。这些方法是`new`、`alloc`、`retain`和`copy`/ `mutableCopy`（也是 Core Foundation 创建和复制函数）。使用首字母缩写词 NARC 作为它们的助记符。由于创建分配给 ivars ( `NSKeyedUnarchiver`) 的对象的对象和对象本身都不拥有它们，因此它们被释放。为避免这种情况，请保留或复制您分配给 ivars 的对象。如果您怀疑分配的对象可能是可变的并且可能被另一个对象突变，则应该进行复制以防止不必要的突变。否则，保留这些值。最后，确保您通过调用放弃这些对象的所有权`release`在 中`dealloc`，或在对它们进行任何进一步分配之前（应通过综合或手动实现的 setter 方法完成）。

最后一件事 - 您可以使用`NSKeyedArchiver`和`NSKeyedUnarchiver`方法`archiveRootObject:toFile:`，`unarchiveObjectWithFile:`而不是处理文件处理程序和`NSFileManager`. 这适用于简单的情况，尽管它的错误报告很差。

# java - 我想解析网页并将数据放入 excel 文件中

> ID：15754001
> 
> 赞同：0
> 
> 时间：2013-04-02T00:12:55.747
> 
> 标签：java, excel, parsing, web, webpage

我想在java中创建一个程序，它接受一个URL并将其解析为不同的字符串，然后将其存储到一个excel文件中。我从来没有对网页或 excel 文件做过任何事情，所以我想知道；

我从哪里开始？

我试图掌握对过程的理解，以及在实际开始项目之前我需要学习使用的任何方法。我没有想出太多，但我相信我正在寻找错误的关键字来寻找我正在寻找的东西。

任何帮助表示赞赏。

编辑：我将通过使用止赎房屋的 URL 来实现这一点，并希望程序在各自的列中获取床位数、浴室数、平方英尺、价格和位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T00:17:39.293

您需要实现一个刮板，或者找到一个可以使用的刮板。刮板用于从标记文件或任何表示层文件中提取数据（假设相关方无权访问底层数据层）。

你没有说你将如何实现它。有些库会写出 excel 文件。[Poi](http://poi.apache.org)似乎是玩得最多的一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T00:21:21.390

您想开始发出 HTTP 请求，然后将响应正文作为字符串返回。然后，您将能够根据需要解析响应字符串。

这是过去的答案，可以帮助您入门。

[如何在 Java 中将 http 响应正文作为字符串获取？](https://stackoverflow.com/questions/5769717/how-can-i-get-an-http-response-body-as-a-string-in-java)

# python - 在 python 上使用 C++ dll

> ID：15754004
> 
> 赞同：1
> 
> 时间：2013-04-02T00:13:20.427
> 
> 标签：python

我有一个涉及行人模拟的项目我计划在带有 Ctypes 的 python 中使用 libpedsim.dll 但到目前为止我无法使这些函数正常工作谁能指出如何使用这个 DLL？

这是类文档： http: [//pedsim.silmaril.org/documentation/libpedsim/latest/classPed_1_1Tscene.html](http://pedsim.silmaril.org/documentation/libpedsim/latest/classPed_1_1Tscene.html) 这是下载链接：http: [//pedsim.silmaril.org/download/](http://pedsim.silmaril.org/download/)

我试图这样称呼它，但它说'WindowsError：异常：访问冲突写入0x00000000'

```
from ctypes import *
pedsim = windll.libpedsim
lib = cdll.LoadLibrary('libpedsim.dll')
lib[6]()
getattr(pedsim, "??0Tscene@Ped@@QAE@ABV01@@Z") 
```

# file - 如何通过文本文件中列出的文件列表进行 ack 搜索？

> ID：15754007
> 
> 赞同：1
> 
> 时间：2013-04-02T00:13:37.040
> 
> 标签：file, search, grep, ack

我有 foo.txt 包含文件名列表，由换行符分隔。我想要做的是使用 ack 搜索 foo.txt 中列出的文件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-03T20:52:33.293

使用 ack 2.0 和新`-x`选项，您可以执行此操作

```
cat foo.txt | ack -x search-string 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T00:17:05.410

```
xargs -0 -n 1 grep search-string < foo.txt 

# -0 to handle filenames with spaces
# -n 1 means process a single file at a time 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T00:15:18.383

尝试这样做：

```
$ ack foo file
foo 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-12T14:16:58.220

~~将其通过管道传输到列表中的文件：~~

~~`cat listoffiles.txt | ack -i searchstring --files-from=-`~~

在下面安迪的评论之后，经过测试以确保它确实有效，最好的答案实际上是：

`ack -i searchstring --files-from=listoffiles.txt`

# database - 某些 PostgreSQL 数据库无法通过 Navicat 或 pgAdmin 等客户端看到

> ID：15754010
> 
> 赞同：3
> 
> 时间：2013-04-02T00:13:51.660
> 
> 标签：database, postgresql, ubuntu, pgadmin, navicat

当我使用 pgAdmin 或 Navicat 登录查看我的远程 PostgreSQL 数据库时，我可以毫无问题地连接，并且下面列表中的前三个数据库显示正常。但由于某种原因，我无法让最后两个数据库（“template0”和“template1”）与其他数据库一起显示。此外，当我 ssh 进入服务器的数据库时，我可以运行“SELECT * FROM a_table_in_template1_database;” 它毫无问题地显示了表的所有内容，所以我知道数据库和其中的表一切正常。如何让“template1”数据库显示在此列表中并工作？这是我运行“\list”时 PostgreSQL 的终端输出：

```
template1=# \list
                                List of databases
     Name      |  Owner   | Encoding | Collation | Ctype |   Access privileges   
---------------+----------+----------+-----------+-------+-----------------------
 mygigline     | jball037 | LATIN1   | en_US     | en_US | 
 mygiglinemain | postgres | LATIN1   | en_US     | en_US | 
 postgres      | postgres | LATIN1   | en_US     | en_US | 
 template0     | postgres | LATIN1   | en_US     | en_US | =c/postgres
 template1     | postgres | LATIN1   | en_US     | en_US | =CTc/postgres
                                                         : postgres=CTc/postgres
(5 rows) 
```

看起来可能有“访问权限”导致了这种情况。但是，我已经完成了类似“GRANT ALL ON DATABASE template1 TO postgres”之类的操作，但这似乎没有帮助。

另一个有用的信息：当我使用 Navicat 登录并显示三个数据库时，我可以单击“打开数据库”选项，然后输入“template1”，它将与其他三个数据库，但我无法单击它或对其进行任何操作。

我只想能够在 Navicat 或 pgAdmin 中显示我的所有 5 个数据库，并且能够访问所有这些数据库：) 任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T00:20:27.910

这些工具倾向于隐藏数据库 where `pg_database.datistemplate`is `true`，因为它们被认为是“内部”数据库而不是普通用户数据库。

客户端应用程序可能会提供取消隐藏这些 DB 的设置，或者您可以直接按名称打开它们。

请注意，这`template0`通常是一个您无法修改的只读数据库，因此在管理 UI 中访问它几乎没有意义。`template1`可以连接和修改，但是`template1`当您创建新数据库时（没有显式`TEMPLATE`选项），您所做的任何事情都会被复制，因此您通常不想更改它。

我强烈建议您忽略`template0`and `template1`。假装它们不存在。

# java - 在哪里写入文件android

> ID：15754014
> 
> 赞同：1
> 
> 时间：2013-04-02T00:14:08.580
> 
> 标签：java, android, file

我正在创建一个应用程序，我需要在其中读取文件，可能进行更改并回写。目前我在资产中有初始文件并且它可以正常读取，但是我刚刚发现您无法写入该位置。我想写入内部存储。

我应该在哪里写入文件，以便我的应用程序可以在手机上写入并访问文件？

我通过不同的实现不断收到各种不同的错误：以下为我提供了

filenotfound 异常：EROFS 只读文件系统

```
public void write(Entry[] newEntries){
 try {
   FileOutputStream os = new FileOutputStream(new File("combinationswrite.txt"));
   OutputStreamWriter osw = new OutputStreamWriter(os);
   for (int j = 0; j < newEntries.length; j++){
      if (newEntries[j] != null){
       osw.write(newEntries[j].symbol);
       osw.write("\t");
       for (int i =0; i<6; i++){
        osw.write(newEntries[j].getNode(i));
        if( i < 5)
         osw.write(",");
        else
         osw.write("\n");
       }
      }
   }
   osw.flush();
   osw.close();
  } catch (IOException e) {
   e.printStackTrace();
  }
 } 
```

在文档中尝试以下实现时：http: [//developer.android.com/training/basics/data-storage/files.html](http://developer.android.com/training/basics/data-storage/files.html)

无法识别 openFileOutput 方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T00:22:21.190

从您引用的链接中，让您的代码像这样

```
 public void write(Entry[] newEntries){
     try {
       FileOutputStream os = new FileOutputStream( getTempFile(context , "combinationswrite.txt"));
       OutputStreamWriter osw = new OutputStreamWriter(os);
       for (int j = 0; j < newEntries.length; j++){
          if (newEntries[j] != null){
           osw.write(newEntries[j].symbol);
           osw.write("\t");
           for (int i =0; i<6; i++){
            osw.write(newEntries[j].getNode(i));
            if( i < 5)
             osw.write(",");
            else
             osw.write("\n");
           }
          }
       }
       osw.flush();
       osw.close();
      } catch (IOException e) {
       e.printStackTrace();
      }
     }

public File getTempFile(Context context, String url) {
    File file;
    try {
        String fileName = Uri.parse(url).getLastPathSegment();
        file = File.createTempFile(fileName, null, context.getCacheDir());
    catch (IOException e) {
        // Error while creating file
    }
    return file;
} 
```

此方法`getTempFile`将从内部存储中返回您的文件

# ios - filepicker.io - iOS 中支持的文件类型？

> ID：15754018
> 
> 赞同：0
> 
> 时间：2013-04-02T00:14:49.150
> 
> 标签：ios, objective-c, xcode, filepicker.io

我一直在查看 filepicker.io 文档，试图找出支持哪些文件类型，但没有任何运气，因为我正在开发一个与之集成的 ios 应用程序。此外，有没有一种快速的方法来确定文件是图像、视频还是其他类型的文件？Filepicker 会返回一个响应 url，其中包含键/值对：

> FPPickerControllerMediaType = 类型；

但是，类型的形式是 public.jpeg 或 public.mp4 等。在不知道支持的确切文件类型的情况下，很难解析给定文件的各种类型可能会准确地弄清楚如何处理它。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T00:39:53.470

您可以使用 QLPreviewController 检查文件是否可以启动。

这是文档

[+ (BOOL) canPreviewItem: (id < QLPreviewItem >) 项目](http://developer.apple.com/library/ios/documentation/NetworkingInternet/Reference/QLPreviewController_Class/Reference/Reference.html#//apple_ref/occ/clm/QLPreviewController/canPreviewItem%3a)

# ruby-on-rails - Ruby on Rails Heroku 应用程序崩溃

> ID：15754020
> 
> 赞同：0
> 
> 时间：2013-04-02T00:14:52.463
> 
> 标签：ruby-on-rails, heroku, crash

我的应用程序可以在本地运行，但不能在 Heroku 网站上运行。

关于这种情况，我已经搜索并尝试了许多其他帖子。

[http://majorleaguebetting.herokuapp.com/](http://majorleaguebetting.herokuapp.com/)

在将数据库更改为 pg 之前，我使用的是 SQLite3

**Heroku 日志**

```
 2013-04-01T22:19:23+00:00 heroku[api]: Starting process with command `bundle exec rake db:migrate` by coryr32@gmail.com
2013-04-01T22:19:25+00:00 heroku[run.4531]: Awaiting client
2013-04-01T22:19:25+00:00 heroku[run.4531]: Starting process with command `bundle exec rake db:migrate`
2013-04-01T22:19:26+00:00 heroku[run.4531]: State changed from starting to up
2013-04-01T22:19:34+00:00 heroku[web.1]: State changed from crashed to starting
2013-04-01T22:19:34+00:00 heroku[run.4531]: Process exited with status 0
2013-04-01T22:19:34+00:00 heroku[run.4531]: State changed from up to complete
2013-04-01T22:19:36+00:00 heroku[web.1]: Starting process with command `bundle exec thin start -R config.ru -e $RAILS_ENV -p 14899`
2013-04-01T22:19:39+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2013-04-01T22:19:39+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2013-04-01T22:19:43+00:00 app[web.1]: Connecting to database specified by DATABASE_URL
2013-04-01T22:19:43+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:in `block in require'
2013-04-01T22:19:43+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:359:in `require_or_load'
2013-04-01T22:19:43+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/dynamic_matchers.rb:55:in `method_missing': undefined local variable or method `current_user' for Head2headBet(Table doesn't exist):Class (NameError)
2013-04-01T22:19:43+00:00 app[web.1]:   from /app/app/models/head2head_bet.rb:12:in `<class:Head2headBet>'
2013-04-01T22:19:43+00:00 app[web.1]:   from /app/app/models/head2head_bet.rb:8:in `<top (required)>'
2013-04-01T22:19:43+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:in `require'
2013-04-01T22:19:43+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:236:in `load_dependency'
2013-04-01T22:19:43+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/engine.rb:438:in `block in eager_load!'
2013-04-01T22:19:43+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/engine.rb:436:in `each'
2013-04-01T22:19:43+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/application/finisher.rb:53:in `block in <module:Finisher>'
2013-04-01T22:19:43+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/engine.rb:436:in `eager_load!'
2013-04-01T22:19:43+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/initializable.rb:30:in `instance_exec'
2013-04-01T22:19:43+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/initializable.rb:30:in `run'
2013-04-01T22:19:43+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:313:in `depend_on'
2013-04-01T22:19:43+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:225:in `require_dependency'
2013-04-01T22:19:43+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:in `require'
2013-04-01T22:19:43+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/initializable.rb:54:in `each'
2013-04-01T22:19:43+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/application.rb:136:in `initialize!'
2013-04-01T22:19:43+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/engine.rb:439:in `block (2 levels) in eager_load!'
2013-04-01T22:19:43+00:00 app[web.1]:   from /app/config/environment.rb:5:in `<top (required)>'
2013-04-01T22:19:43+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/builder.rb:51:in `instance_eval'
2013-04-01T22:19:43+00:00 app[web.1]:   from config.ru:3:in `block in <main>'
2013-04-01T22:19:43+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/initializable.rb:55:in `block in run_initializers'
2013-04-01T22:19:43+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/engine.rb:438:in `each'
2013-04-01T22:19:43+00:00 app[web.1]:   from config.ru:1:in `<main>'
2013-04-01T22:19:43+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/thin/controllers/controller.rb:181:in `load_rackup_config'
2013-04-01T22:19:43+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/thin/runner.rb:187:in `run_command'
2013-04-01T22:19:43+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/initializable.rb:54:in `run_initializers'
2013-04-01T22:19:43+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/builder.rb:51:in `initialize'
2013-04-01T22:19:43+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/railtie/configurable.rb:30:in `method_missing'
2013-04-01T22:19:43+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/thin/controllers/controller.rb:71:in `start'
2013-04-01T22:19:43+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/thin/runner.rb:152:in `run!'
2013-04-01T22:19:43+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/bin/thin:19:in `load'
2013-04-01T22:19:43+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/bin/thin:19:in `<main>'
2013-04-01T22:19:43+00:00 app[web.1]:   from config.ru:3:in `require'
2013-04-01T22:19:43+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/rack/adapter/loader.rb:33:in `load'
2013-04-01T22:19:43+00:00 app[web.1]:   from config.ru:1:in `new'
2013-04-01T22:19:43+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/rack/adapter/loader.rb:33:in `eval'
2013-04-01T22:19:43+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/bin/thin:6:in `<top (required)>'
2013-04-01T22:19:45+00:00 heroku[web.1]: Process exited with status 1
2013-04-01T22:19:45+00:00 heroku[web.1]: State changed from starting to crashed
2013-04-01T22:19:58+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=majorleaguebetting.herokuapp.com fwd="173.16.26.137" dyno= connect= service= status=503 bytes=
2013-04-01T22:19:59+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/puq5so.com?g=49501E2D-56F4-42FB-B15E-C774D06A7D24&s=5FA810DC-7AF7-11E2-97F6-12313B082201&z=2631278 host=majorleaguebetting.herokuapp.com fwd="173.16.26.137" dyno= connect= service= status=503 bytes=
2013-04-01T22:20:00+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/favicon.ico host=majorleaguebetting.herokuapp.com fwd="173.16.26.137" dyno= connect= service= status=503 bytes=
2013-04-01T22:24:27+00:00 heroku[api]: Starting process with command `bundle exec rake db:reset` by coryr32@gmail.com
2013-04-01T22:24:30+00:00 heroku[run.9491]: Awaiting client
2013-04-01T22:24:30+00:00 heroku[run.9491]: Starting process with command `bundle exec rake db:reset`
2013-04-01T22:24:30+00:00 heroku[run.9491]: State changed from starting to up
2013-04-01T22:24:44+00:00 heroku[run.9491]: Client connection closed. Sending SIGHUP to all processes
2013-04-01T22:24:45+00:00 heroku[run.9491]: Process exited with status 0
2013-04-01T22:24:45+00:00 heroku[run.9491]: State changed from up to complete
2013-04-01T22:25:06+00:00 heroku[api]: Starting process with command `bundle exec rake db:setup` by coryr32@gmail.com
2013-04-01T22:25:11+00:00 heroku[run.2856]: Awaiting client
2013-04-01T22:25:11+00:00 heroku[run.2856]: Starting process with command `bundle exec rake db:setup`
2013-04-01T22:25:11+00:00 heroku[run.2856]: State changed from starting to up
2013-04-01T22:25:29+00:00 heroku[run.2856]: Client connection closed. Sending SIGHUP to all processes
2013-04-01T22:25:31+00:00 heroku[run.2856]: Process exited with status 0
2013-04-01T22:25:31+00:00 heroku[run.2856]: State changed from up to complete
2013-04-01T22:25:37+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=majorleaguebetting.herokuapp.com fwd="173.16.26.137" dyno= connect= service= status=503 bytes=
2013-04-01T22:25:38+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/puq5so.com?g=49501E2D-56F4-42FB-B15E-C774D06A7D24&s=5FA810DC-7AF7-11E2-97F6-12313B082201&z=2631617 host=majorleaguebetting.herokuapp.com fwd="173.16.26.137" dyno= connect= service= status=503 bytes=
2013-04-01T22:25:38+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/favicon.ico host=majorleaguebetting.herokuapp.com fwd="173.16.26.137" dyno= connect= service= status=503 bytes=
2013-04-01T22:25:40+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=majorleaguebetting.herokuapp.com fwd="173.16.26.137" dyno= connect= service= status=503 bytes=
2013-04-01T22:25:40+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/puq5so.com?g=49501E2D-56F4-42FB-B15E-C774D06A7D24&s=5FA810DC-7AF7-11E2-97F6-12313B082201&z=2631619 host=majorleaguebetting.herokuapp.com fwd="173.16.26.137" dyno= connect= service= status=503 bytes=
2013-04-01T22:25:41+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/favicon.ico host=majorleaguebetting.herokuapp.com fwd="173.16.26.137" dyno= connect= service= status=503 bytes=
2013-04-01T22:26:01+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=majorleaguebetting.herokuapp.com fwd="173.16.26.137" dyno= connect= service= status=503 bytes=
2013-04-01T22:26:02+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/puq5so.com?g=49501E2D-56F4-42FB-B15E-C774D06A7D24&s=5FA810DC-7AF7-11E2-97F6-12313B082201&z=2631641 host=majorleaguebetting.herokuapp.com fwd="173.16.26.137" dyno= connect= service= status=503 bytes=
2013-04-01T22:26:02+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/favicon.ico host=majorleaguebetting.herokuapp.com fwd="173.16.26.137" dyno= connect= service= status=503 bytes= 
```

**宝石文件**

```
source 'http://rubygems.org'

gem 'rails', '3.2.13'
gem 'railties', '3.2.13'
gem 'execjs'
gem 'therubyracer', '0.11.4'
gem 'jquery-rails'
gem 'nokogiri', '1.5.0'
gem "colorbox-rails", "~> 0.0.7"
gem 'formtastic'
gem 'tabletastic'
gem "paperclip", "~> 2.4"
gem 'faker', '0.3.1'
gem 'thin'
gem 'pg'

group :assets do
  gem 'sass-rails'
  gem 'coffee-rails'
  gem 'uglifier'
end

gem 'sqlite3', :group => [:development, :test]

group :development, :test do
  gem 'rspec-rails', '~> 2.6'
  gem 'annotate', :git => 'git://github.com/ctran/annotate_models.git'
end

group :test do
  gem 'rspec-rails', '~> 2.6'
  gem 'turn', :require => false
  gem 'factory_girl_rails', '1.0'
end

group :production do
  gem 'thin'
  gem 'pg'
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T00:28:18.693

尝试从头开始创建数据库：

```
heroku run rake db:create
heroku run rake db:schema:load
heroku run rake db:migrate 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-02T00:26:41.767

您似乎在引用`current_user`未定义的位置。

另外 - 作为过去使用过 Heroku 的人，如果您是喜欢完全控制您的设置的开发人员类型，我强烈建议您使用像 Linode 这样的托管 VPS 设置。在使用 Heroku 并切换到 Linode 时，我们遇到了很多缓慢的支持问题以及更高的账单，并且从未回头。

您可能还想考虑亚马逊 AWS，因为它们的价格不断下降。

只是我以前去过那里的人的 2 美分。

最后一个想法 - 因为您现在正在使用 PG，请注意它对待布尔值的方式与其他 DB 不同（“true”而不是 1）。请参阅此处：[MySQL、PostgreSQL 和 SQLite 中数据库列类型的比较？（交叉映射）](https://stackoverflow.com/questions/1942586/comparison-of-database-column-types-in-mysql-postgresql-and-sqlite-cross-map)

# android - ListView：如何使选定的项目保持“点亮”

> ID：15754028
> 
> 赞同：0
> 
> 时间：2013-04-02T00:15:51.753
> 
> 标签：android, android-widget

我正在使用 ListView 来显示项目列表。我点击一个项目以“选择”它，该项目在列表中短暂变为橙色，但随后返回背景颜色。

如何使该项目保持“点亮”，直到我取消选择它（通过再次点击该项目）？

另外，我可以调用一个方法来清除该列表的所有选定项目吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T00:43:56.407

您需要使用选择器，然后在 onListItemClick() 中使用**setSelected(true)**

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_selected="true"
        android:drawable="@color/orange" />
    <item android:state_selected="false"
        android:drawable="@android:color/list_default" />
</selector> 
```

还要覆盖我的 onListItemClick() 方法：

```
@Override
protected void onListItemClick(ListView l, View view, int position, long id) {
    super.onListItemClick(l, view, position, id);
    view.setSelected(true);
}

EDIT:
public class YourClass extends ListActivity implements OnItemClickListener {

@Override
public void onCreate(Bundle icicle){
    super.onCreate(icicle);
    setContentView(R.layout.your_layout);

    getListView().setOnItemClickListener(this);
}

@Override
public void onItemClick(AdapterView<?> arg0, View view, int arg2, long arg3) {
    view.setSelected(true);
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T00:27:43.610

你需要一份状态清单

在 res/drawable 创建一个 list_selector.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >

<item 
    android:state_selected="true"
    android:drawable="@color/orange" />

</selector> 
```

在列表视图项的布局中，将以下代码添加到主框架布局中

```
android:background="@drawable/list_selector" 
```

确保`orange color`在`res/values/colors`

# uiimageview - Xcode UIImageView 布局问题。请帮助我？

> ID：15754030
> 
> 赞同：1
> 
> 时间：2013-04-02T00:15:56.370
> 
> 标签：uiimageview, screen, xcode4.5

我正在尝试根据 iphone 屏幕的大小更改我的应用程序首页（第一个交互式视图控制器）上的一些图像视图。我的应用程序的第一个视图中有以下代码：

```
- (void)viewDidLoad
{
[super viewDidLoad];

UIImage *image = [UIImage imageNamed:@"background.png"];
self.view.layer.contents = (id) image.CGImage;

if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
 {
CGSize result = [[UIScreen mainScreen] bounds].size;
if(result.height == 960)
{

    [MALE setFrame:CGRectMake(72, 20, 175, 100)];
    [MALE setImage:[UIImage imageNamed:@"Blue Female Symbol.png"]];
    [FEMALE setFrame:CGRectMake(65, 60, 200, 120)];
    [FEMALE setImage:[UIImage imageNamed:@"Red Male Symbol.png"]];

}

if(result.height == 1136)
{
    [MALE setFrame:CGRectMake(200, 100, 175, 100)];
    [MALE setImage:[UIImage imageNamed:@"Red Male Symbol.png"]];
    [FEMALE setFrame:CGRectMake(200, 300, 175, 100)];
    [FEMALE setImage:[UIImage imageNamed:@"Blue Female Symbol.png"]];

}
} 
```

}

不幸的是，这段代码似乎对实际的屏幕布局没有影响，实际上并没有产生任何 UIImage 视图。

谁能告诉我我做错了什么？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-20T23:21:29.693

我遇到了类似的问题。我的问题是我打开了自动布局。使用自动布局，它会为您调整框架，您不能自己在代码中调整它们。要关闭它，只需单击情节提要中的任何视图并转到文件检查器，“Interface Builder Document”下应该有一个选项已选中自动布局，只需取消选中该框，您应该能够调整框架。

![它应该看起来像这样](https://i.stack.imgur.com/A0QNP.png)

在情节提要中执行此操作将关闭情节提要中每个视图的自动布局，但不会关闭您可能拥有的任何 .xib 文件中的视图。

我希望这能解决你的问题！

# javascript - 使用 d3.js 从 .csv 导入数据

> ID：15754035
> 
> 赞同：19
> 
> 时间：2013-04-02T00:16:43.000
> 
> 标签：javascript, csv, d3.js, import-from-csv

我正在尝试使用 d3.js 从 .csv 导入一些数据。我在这样做时遇到了麻烦，想知道是否有人可以伸出援手。我的 .csv 文件格式如下：

```
max_i,min_i,max_f,min_f
-122.1430195,-122.1430195,-122.415278,37.778643
-122.1430195,-122.1430195,-122.40815,37.785034
-122.4194155,-122.4194155,-122.4330827,37.7851673
-122.4194155,-122.4194155,-122.4330827,37.7851673
-118.4911912,-118.4911912,-118.3672828,33.9164666
-121.8374777,-121.8374777,-121.8498415,39.7241178
-115.172816,-115.172816,-115.078011,36.1586877
-82.5618186,-82.5618186,-79.2274115,37.9308282
-79.9958864,-79.9958864,-80.260396,40.1787544
-74.1243063,-74.1243063,-74.040948,40.729688
-106.609991,-106.609991,-106.015897,35.640949 
```

我正在尝试使用以下代码加载数据：

```
var dataset = []
d3.csv("data.csv", function(data) {
   dataset = data.map(function(d) { return [ +d["max_i"], +d["min_i"] ]; });
});
console.log(dataset) 
```

但是，我只是在控制台中得到一个空的 []。谁能指出我的错误？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-02T01:09:57.090

将其更改为：

```
var dataset = []
d3.csv("data.csv", function(data) {
   dataset = data.map(function(d) { return [ +d["max_i"], +d["min_i"] ]; });
   console.log(dataset)
}); 
```

一旦您的数据返回，您需要检查回调中的数据集。

# php - 如何在php版本之间切换

> ID：15754038
> 
> 赞同：0
> 
> 时间：2013-04-02T00:16:53.680
> 
> 标签：php, mamp

MAMP 主页显示服务器使用的当前 php 版本 (5.4.10)。在该`conf`文件夹中，还有其他几个 php 版本，我需要切换到其中一个。如何用 MAMP 做到这一点？谢谢。 ![在此处输入图像描述](https://i.stack.imgur.com/0WPPw.png)

# ruby - 远程 UDP 套接字不接收数据包

> ID：15754041
> 
> 赞同：1
> 
> 时间：2013-04-02T00:17:19.800
> 
> 标签：ruby, sockets, udp

我使用 udp 套接字编程创建了两个文件，一个发送和其他接收，我确实将接收的文件放在另一台具有不同提供程序的计算机中，我执行了发送方，在接收方之后，我确实看到接收方没有收到任何数据包， ip配置没关系，发送方发送给接收方IP和端口，有人说我需要“打开” udp端口，但是MMORPG游戏使用这种策略，有必要吗？接收器在您的 IP 和定义的端口上执行 Bind()，请参阅代码。

发件人：

```
begin
    sender = UDPSocket.new()
    host   = "10.100.1.115"
    port   = 3001
  while true
    p "Enviando..."
    sender.send("Numero #{10}",0,host,port)
    sleep 0.1
  end
  rescue
    p $!
  end
gets 
```

接收者：

```
begin
    myIP = IPSocket.getaddress(Socket.gethostname) # => 10.100.1.115
    puts "Seu IP => #{myIP}"
    sock = UDPSocket.new()
    sock.bind(myIP,3001)
    puts "#=========================#"
    puts "....Esperando Pacotes....."
    puts "#=========================#"
    while true
     line = sock.recvfrom(1024)
     puts "Recebido : #{line}"
    end
  rescue
    p $!
  end
  gets 
```

有什么问题吗？我需要使用 NAT？，如果是，我如何使用？游戏开发人员使用什么公共策略使客户端套接字 udp 接收服务器计算机发送的数据包？

（对不起，我的英语不好，我知道）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:30:46.683

如果另一台计算机位于路由器或 NAT 后面，则必须在路由器上进行配置以将数据包转发到实际计算机。

# php - PHP 类成员和方法

> ID：15754043
> 
> 赞同：5
> 
> 时间：2013-04-02T00:17:37.870
> 
> 标签：php, oop, class

我四处搜索，但找不到关于在 PHP 类中使用 $this 的明确答案（如果有的话）。我仍在尝试使用 OOP 方法，并希望确保我使用的是最佳实践。

所以我的问题是关于你应该如何以及何时定义变量以及何时应该使用 $this 来引用它们。

假设我有以下课程....

```
class Foo {

private $pin;
private $stat;

public function get_stat($pin) {
            $this->stat = shell_exec("blah read $pin");
            return $this->stat;
    }
} 
```

所以在上面的函数中，我将 var $pin 传递给了类方法。这工作得很好，而不必使用 $this->pin ...但是下面的代码似乎更像是做同样事情的正确方法.....

```
class Foo {

private $pin = 0;
private $stat = 0;

public function get_stat($pin) {
            $this->pin = $pin;
            $this->stat = shell_exec("blah read $this->pin");
            return $this->stat;
    }
} 
```

此外，我已将 $pin 和 $stat 变量设置为 = 0。我认为这可以只是一个默认值，或者我可以像第一个示例中那样定义它们 private $pin; 和私人 $stat;.

回到我的问题，关于如何在类方法中使用成员和 $this 的最佳实践是什么？每个示例的优点或缺点是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T00:20:53.780

使用任何类成员时都必须使用 $this。使用局部变量时不能使用它。如果没有必要，你应该避免使用类成员，就像`$this->pin`你的第二个例子一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T00:40:46.097

“最佳实践”取决于您的需求。在您的示例中，看起来 pin 是静态的。您最初可以设置它，甚至不将其传递给方法。

```
private $pin = 'abc123';

public function get_stat() {
    $this->stat = shell_exec("blah read $this->pin");
    return $this->stat;
} 
```

仅当您需要类中的方法可以访问它们时，设置类变量才有意义。在您的示例中， key 和 stat 都可能在许多方法中使用，因此将它们定义为类变量并使用 and 访问它们`$this->key`是`$this->stat`合理且合乎逻辑的。如果像 stat 这样的东西仅用于特定方法或根据特定数据集进行更改，使 stat 成为许多对象的属性而不是类的公共属性，那将是没有意义的。

正如 Sven 指出的那样，使用`$this->pin`when`$pin`传递给类是不理智的。将其分配为类变量并`$this->pin`在引脚不变且对实例通用的情况下使用会更合乎逻辑，在这种情况下，您不需要将任何内容传递给该方法。例如，密钥不太可能更改的 API 请求。如果可以是任何东西，例如来自数据库的结果、用户输入或其他任何来源不明的东西，则传递`$key`给该方法是有意义的。`$key`

我不知道这是否会有很大帮助，但如果您打算根据一般或抽象传递的任何内容更改 pin 或 stat 的值，这里有一个使用 getter 和 setter 的示例。 [Getter 和 Setter？](https://stackoverflow.com/questions/4478661/getter-and-setter)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-02T00:33:42.757

如果你想坚持 OOP 的良好实践，那么你应该为你的实例变量设置 setter 和 getter。例如，这是您的代码的修订版：

```
class Foo {

    // common practice to begin private variables and methods with an underscore
    private $_pin = 0;
    private $_stat = 0;

    // this is called a setter because we are setting a value
    // note the lack of a return
    public function setStat($stat) {
        // we use $this-> because we are referencing THIS instance of THIS class/object
        // and in doing so we refer to our private $_stat instance variable.
        $this->_stat = $stat;
    }

    // this is called a getter because we are getting a value
    // not how we are NOT setting values here.
    public function getStat() {
        return $this->_stat;
    }

} 
```

所以总的来说，`$this`当你引用**这个**类的实例（也称为对象）时，你会使用它。拥有一个类的好处是您可以拥有一个类定义的多个对象。例如：

```
class Person {

    public $name, $age, $gender;

    public function setName($name) {
        $this->name = $name;
    }
    public function setAge($age) {
        $this->age = $age;
    }
    public function setGender($gender) {
        $this->gender = $gender;
    }
    public function getName() {
        return $this->name;
    }
    public function getAge() {
        return $this->age;
    }
    public function getGender() {
        return $this->gender;
    }

}

// outside the class
$john = new Person();
$john->setName('John Doe');
$john->setAge(22);
$john->setGender('male');
var_dump($john); 
```

将`var_dump`显示：

```
object(Person)#1 (3) { 
    ["name"]=> string(8) "John Doe" // $this->name
    ["age"]=> int(22)               // $this->age
    ["gender"]=> string(4) "male"   // $this->gender
} 
```

希望这可以帮助！

# file - vim：gf的反义词是什么？

> ID：15754045
> 
> 赞同：4
> 
> 时间：2013-04-02T00:17:47.273
> 
> 标签：file, vim

使用 vim 时，我在文件之间跳转：

*   标签： `ctrl`-`]`和`ctrl`- `t`,
*   跳转标记： `ctrl`-`i`和`ctrl`-`o`以及
*   编辑位置：`g`-`;`和`g`- `,`。

我需要的有点不同...

从我跳到的文件中`g`- `f`：
*重新打开前一个文件的最简单方法是什么？*

如果您在切换文件后进行了大量更改，则上述所有内容都无济于事。跳回上一个标签也不起作用，ofc。

这里的任何大师都可以为我提供一些见解吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T00:25:06.727

`Ctrl`您可以使用-`^`或`Ctrl`-返回到上一个缓冲区`o`。

[更多信息](http://vim.wikia.com/wiki/Open_file_under_cursor)

或者，如果您不想保存当前更改，请执行 a`:tabnew`和“2 `Ctrl`- `o`”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T00:25:49.303

`ctrl`- （`^`或`ctrl`-在美国键盘布局上。）实际上是.`shift``6``:e#`

请参阅`:h alternate-file`或`:h ctrl-^`了解更多信息。

这也使得可以使用相同的命令在两个最近编辑的文件之间进行交换。

# ruby-on-rails - RoR 中 has_many 关联中的额外字段

> ID：15754046
> 
> 赞同：0
> 
> 时间：2013-04-02T00:17:55.963
> 
> 标签：ruby-on-rails, rails-activerecord

我有2个模型。有项目和类别。他们彼此有 has_many 关联。加入表调用 categories_items 并且没有模型。默认情况下，它具有 item_id、category_id 和时间戳。

目标是向此连接表添加额外的字段。如果我只是通过迁移将字段添加到此表中，我该如何访问它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T00:30:09.340

通过创建一个连接模型并定义一个

```
has_many :items, through: <model> 
```

关系。有关详细信息，请参阅[Ruby on Rails 指南](http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association)。

# ruby-on-rails - 如何让 ActiveRecord 使用 :cast_booleans？

> ID：15754048
> 
> 赞同：3
> 
> 时间：2013-04-02T00:18:44.977
> 
> 标签：ruby-on-rails, mysql2

在将 Ruby on Rails 与 mysql2 适配器一起使用时，我想在我的数据库中访问和写入几个 BIT 列。但是，当`ActiveRecord`尝试写入 BIT 列时，mysql 抱怨`x'30'`和`x'31'`（即 '0' 和 '1'）对于 BIT(1) 列来说太大了。

适配器 mysql2 在连接的查询函数中具有哈希选项 `connection.query(str, :cast_booleans=>true)`，以便能够将`FalseClass`and`TrueClass`转换为`b'0'`and`b'1'`而不是`x'30'`and `x'31'`。但是，我从不`.query`直接访问，我将其留给`ActiveRecord`（否则，rails 有什么意义？）。

我如何告诉`ActiveRecord`使用`:cast_booleans`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T12:58:38.953

我深入研究了 Rails 源代码，发现：

[https://github.com/rails/rails/blob/master/activerecord/lib/active_record/connection_adapter/abstract_mysql_adapter.rb](https://github.com/rails/rails/blob/master/activerecord/lib/active_record/connection_adapters/abstract_mysql_adapter.rb)

也许你可以覆盖`quoted_true`and `quoted_false`？

# ruby-on-rails - 通过关联查询订单记录数

> ID：15754049
> 
> 赞同：0
> 
> 时间：2013-04-02T00:18:51.237
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我有两个模型

```
class Location < ActiveRecord::Base
  has_many :people, :as => :person
end

class People < ActiveRecord::Base
  belongs_to :person, :polymorphic => true
end 
```

我想运行`Location`where 子句。然后我想对查询进行排序，以便与它相关联的人最多的位置排在第一位，然后按降序排列。

```
Location.where(place: "Waffle House")#Some query attached to this, but what do I write? 
```

我该如何编写这个查询？可能吗？

已解决：解决了解决方案。虽然 hacky 它现在可以工作，直到我可以创建一个 SQL 语句。基本上遍历选定的位置，计算每个位置的人数，并添加一个虚拟属性和人数，并对哈希数组进行排序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T00:23:33.717

查看有关条件连接的 Active Record Guide 部分，应该会为您指明正确的方向。

[http://guides.rubyonrails.org/active_record_querying.html#specifying-conditions-on-the-joined-tables](http://guides.rubyonrails.org/active_record_querying.html#specifying-conditions-on-the-joined-tables)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T03:39:55.830

尝试这个：

```
Location.joins("(
  SELECT person_id location_id, COUNT(1) people_count
  FROM people
  WHERE person_type = 'Location'
  GROUP BY person_id
  ) a ON a.location_id = locations.id"
).order("a.people_count DESC") 
```

# html - 如何使复选框 IE7 和 IE8 兼容？（使用 jQuery）

> ID：15754050
> 
> 赞同：4
> 
> 时间：2013-04-02T00:18:52.983
> 
> 标签：html, forms, css, internet-explorer-7

IE8 截图（错误）： ![在此处输入图像描述](https://i.stack.imgur.com/fublg.jpg)

谷歌浏览器“屏幕截图”（应该是什么样子）： ![在此处输入图像描述](https://i.stack.imgur.com/CUZVG.jpg)

当前复选框已使用 CSS3 进行样式设置，有什么方法可以使其兼容吗？

我们在 JSFiddle 中完成的复选框样式是 CSS3 技术的一部分，因此较低的浏览器无法呈现其中的一些，这就是原因。请检查 IE Tester 上的表格（如果使用 Windows，您可以下载并测试较低的 IE 版本），您会明白我的意思。

[http://www.fratellistorante.com.au/contact.html](http://www.fratelliristorante.com.au/contact.html)

[http://jsfiddle.net/E5CxM/2/](http://jsfiddle.net/E5CxM/2/)

```
<p>
<label></label>
<input type="checkbox" id="checkbox" name="checkbox" class="regular-checkbox big-checkbox" value="Yes" checked="checked">
<label for="checkbox" style="margin-right:10px;"></label>Subscribe me to your mailing list for upcoming events, hot offers and deals
</p> 
```

*注意：我们还使用了 Dropkick (jQuery)，它只设置选择框的样式，但不设置复选框的样式。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T00:30:38.307

它不起作用的原因是因为旧的 IE 不支持`:after`.

我已更新您的 HTML 以使用隐藏`<span>`来保存复选标记，并调整 CSS 以切换其可见性。

[更新小提琴](http://jsfiddle.net/E5CxM/11/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T00:29:07.920

```
<!--[if IE]>
<link rel="stylesheet" type="text/css" href="all-ie-only.css" />
<![endif]--> 
```

现在创建一个名为 all-ie-only.css 的 css 文件并将他的 lite 版本放到 IE 中，因为他有 bug。您可以使用相同的方法制作不同的文本框。

# c# - 删除最旧元素的大小有限的字典？

> ID：15754052
> 
> 赞同：13
> 
> 时间：2013-04-02T00:18:54.497
> 
> 标签：c#, data-structures

是否存在可用于散列数据的现有数据结构，可以删除最旧的元素？

我现在正在考虑的方法是让一个字典和一个队列使用字典进行快速查找，并能够使用队列从字典中删除最旧的元素。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-02T00:41:57.547

您可以使用[OrderedDictionary](http://msdn.microsoft.com/en-us/library/ms132577.aspx)。这将保持插入顺序（与`SortedDictionary`按键排序的 a 不同）。然后，您可以删除第一个被认为是最旧的可用元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-03-24T11:32:46.580

OrderedDictionary 是一个很好的建议，但如果您需要字典中的字符串以外的类型，试试这个；

```
public sealed class SizedDictionary<TKey, TValue> : Dictionary<TKey, TValue> {

private int maxSize;
private Queue<TKey> keys;

public SizedDictionary(int size) {
    maxSize = size;
    keys = new Queue<TKey>();
}

new public void Add (TKey key, TValue value) {
    if (key==null) throw new ArgumentNullException();
    base.Add(key, value);
    keys.Enqueue(key);
    if (keys.Count > maxSize) base.Remove(keys.Dequeue());
}

new public bool Remove (TKey key) {
    if (key==null) throw new ArgumentNullException();
    if (!keys.Contains(key)) return false;
    var newQueue = new Queue<TKey>();
    while (keys.Count>0) {
        var thisKey = keys.Dequeue();
        if (!thisKey.Equals(key)) newQueue.Enqueue(thisKey);
    }
    keys=newQueue;
    return base.Remove(key);
}
} 
```

我使用的是密封类，因为我们只是隐藏了 add 和 remove 方法，所以如果要继承这个类，就不清楚使用的是哪个版本。更完整的解决方案将使用内部字典而不是继承，但这会更加冗长

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T00:44:20.530

`System.Collections.Generic.SortedList`只是一个按键排序的字典。如果键在某种程度上是临时的，`RemoveAt`当您想要添加另一个条目时，您可以简单地使用在达到特定大小时删除第一个元素。

很可能，由于您提到`Dictionary`，您可能没有临时密钥。但是，a`Dictionary`只是`KeyValuePair<K,V>`对象的集合。因此，您可以有一个排序列表，其中值是 a `KeyValuePair<K,V>`，键是添加元素的日期/时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T01:13:45.997

因为你有一个特定的要求，我会用后面的队列/缓冲区来实现字典（例如评论中提到的循环缓冲区）。

OrderedDictionary 是一个不错的选择，也是如何做到这一点的一个很好的来源（我不想在这里发布它，但你可以很容易地找到它）——你只需要比 ArrayList 更好的东西来保存你的元素（并进行出队） - 因为您不断删除“第一个”。

# java - 相机错误 1001

> ID：15754054
> 
> 赞同：6
> 
> 时间：2013-04-02T00:19:04.610
> 
> 标签：java, android, video, android-camera

在过去的几天里，我一直在尝试解决这个错误，但没有运气。我正在尝试构建一个应用程序来记录我的 RTP 传输的视频文件以发送到服务器。LOGCAT 不提供任何其他消息

`Camera Error 1001`并且消息不断重复，直到我停止应用程序。相机初始化并且准备运行正常。调用 MediaRecorder.start() 时会引发错误。

这是录像机类的代码。

```
MediaRecorder mMediaRec;
Camera mCamera;
Button startRecording = null;
SurfaceView mSurfaceView;
SurfaceHolder mSurfaceHolder;
//CameraPreview mPreview;
boolean isRecording = false;
public static Socket sock;
public Uri filePath;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_media_streamer);
    // Show the Up button in the action bar.
    setupActionBar();
    //addListenerOnButton();

    Log.d(" Streamer On create", "Initializing camera");
    initialize();
    //startRecording();

}

/**
 * Set up the {@link android.app.ActionBar}, if the API is available.
 */
@TargetApi(Build.VERSION_CODES.HONEYCOMB)
private void setupActionBar() {
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
        getActionBar().setDisplayHomeAsUpEnabled(true);
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.media_streamer, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case android.R.id.home:
        // This ID represents the Home or Up button. In the case of this
        // activity, the Up button is shown. Use NavUtils to allow users
        // to navigate up one level in the application structure. For
        // more details, see the Navigation pattern on Android Design:
        //
        // http://developer.android.com/design/patterns/navigation.html#up-vs-back
        //
        NavUtils.navigateUpFromSameTask(this);
        return true;
    }
    return super.onOptionsItemSelected(item);
}

public void initialize()
{

    startRecording = (Button)findViewById(R.id.button_start);
    mCamera = Camera.open();

    Log.d("Initialization", "Camera opened");
    mSurfaceView = (SurfaceView)findViewById(R.id.survace_camera);
    mSurfaceHolder = mSurfaceView.getHolder();
    mSurfaceHolder.addCallback(this);
    //setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
    //mSurfaceHolder.setType(SurfaceHholder.SURFACE_TYPE_PUSH_BUFFERS);
    Log.d("Streamer init", "Camera Initialized");
}

protected void startRecording()
{
    //Socket sock = new Socket();

        Log.d("Start recording method","Attempting to start recording");

        try
        {
            mMediaRec = new MediaRecorder();

            mMediaRec.setPreviewDisplay(mSurfaceHolder.getSurface());

            mCamera.unlock();
            mMediaRec.setCamera(mCamera);
            mMediaRec.setVideoSource(MediaRecorder.VideoSource.CAMERA);
            mMediaRec.setAudioSource(MediaRecorder.AudioSource.MIC);
            mMediaRec.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
            mMediaRec.setAudioEncoder(MediaRecorder.AudioEncoder.DEFAULT);
            mMediaRec.setVideoEncoder(MediaRecorder.VideoEncoder.DEFAULT);

            filePath = getOutputMediaFileUri();
            mMediaRec.setOutputFile(filePath.getPath());

            mMediaRec.setMaxFileSize(50000);
            Thread.sleep(2000);
            //mMediaRec.set
            //mCamera.unlock();
            mMediaRec.prepare();
            Log.d("Start recording", "Recorder params set");
            Thread.sleep(2000);
            mMediaRec.start();
            isRecording = true;

} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
        //StreamerBGManager bg = new StreamerBGManager();
        //bg.doInBackground(new String[]{});
catch (InterruptedException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
catch(IllegalStateException e)
{
e.printStackTrace();
releaseMediaRecorder();
releaseCamera();
}

}

protected void stopRecording()
{
    mMediaRec.stop();
    mMediaRec.release();
    mCamera.release();
    releaseMediaRecorder();
    releaseCamera();
    isRecording = false;
}

private void releaseMediaRecorder()
{
    if(mMediaRec != null)
    {
        mMediaRec.reset();
        mMediaRec.release();
        mMediaRec = null;
        mCamera.lock();
        isRecording = false;
    }
}

private void releaseCamera()
{
    if (mCamera != null){
        mCamera.release();        // release the camera for other applications
        mCamera = null;
        isRecording = false;
    }
}

public void toggleRecord(View view)
{
    if(isRecording)
        stopRecording();
    else
        startRecording();
}

/*public void addListenerOnButton()
{

    startRecording.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            if(isRecording)
                stopRecording();
            else
                startRecording();

        }
    });
}*/

@Override
public void surfaceChanged(SurfaceHolder holder, int format, int width,
        int height) {
}

@Override
public void surfaceCreated(SurfaceHolder holder) {
    if (mCamera != null){
      Parameters params = mCamera.getParameters();

      mCamera.setParameters(params);
        try {
            mCamera.setPreviewDisplay(mSurfaceHolder);
            mCamera.startPreview();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    else {
        Toast.makeText(getApplicationContext(), "Camera not available!",    Toast.LENGTH_LONG).show();
        finish();
    }
}

@Override
public void surfaceDestroyed(SurfaceHolder holder) {
    mCamera.stopPreview();
    mCamera.release();
    //mMediaRec.release();
} 
```

# ruby-on-rails - 如何在 Rails 中测试随机事件？

> ID：15754057
> 
> 赞同：0
> 
> 时间：2013-04-02T00:19:27.200
> 
> 标签：ruby-on-rails

我遇到了一个有趣的任务。

需要制定一种方法，以某种方式随机（在 10-15% 的情况下）修改字符串。

我如何使用 TDD 做到这一点？

例如，如何确保修改的概率不超过 15%？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T00:23:54.910

只需使用随机数生成：

```
def change_string_fifteen_percent_of_the_time
    if rand() <= 0.15
        # change string here
    end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T00:33:49.973

如果您问如何测试：运行您的方法 100 次（例如）并断言字符串没有更改超过 15 次。

# java - 将 UTC 时间戳转换为本地设备时间戳

> ID：15754058
> 
> 赞同：1
> 
> 时间：2013-04-02T00:19:59.323
> 
> 标签：java, android, timestamp

出于某种原因，我总是很难正确显示时间戳，但无论如何这是我的问题。

我正在从中提取事件，`Calendar Provider API`并且某些事件（例如`US Holidays`日历事件）采用 UTC，因此时间戳不是设备上应有的时间戳（当然，除非设备位于该时区）。

我有一个时间戳，`1374105600000`它是`07/18/2013 00:00:00 UTC`7 月 18 日午夜 UTC。我想要的是 7 月 18 日午夜本地设备时间的时间戳。

这就是我所做的

```
Calendar cal = Calendar.getInstance();
TimeZone tz = cal.getTimeZone();
cal.setTimeInMillis(time);

long offset = tz.getRawOffset(); //gives me -18000000 5hr difference since I am in EST which I think is actually wrong because it should be a 4hr difference now with DST 
```

因此，如果我将其添加到 UTC 时间戳

```
long local = time+offset; 
```

它给了我不正确的时间`july 17th at 3:00PM`

如果我减去时间

```
long local = time-offset; 
```

我仍然得到错误的时间，它给了我，`july 18th at 1:00AM`但我认为我什至不应该减去，因为这对`+`时区差异的人不起作用。

我在做什么错，为什么我不能获得正确的偏移量来获得正确的时间？

我也将其用作参考[链接](https://stackoverflow.com/questions/14853389/how-to-convert-utc-timestamp-to-device-local-time-in-android)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T01:12:31.580

由于Java `does not`ATTACH`Timezone`使用对象来附加信息`Date`，因此进行转换有点奇怪。请查看下面的清单，我正在尝试将时间从“UTC”（格林威治标准时间）转换为“EST”（可以是纽约的时区）

```
import java.util.Calendar;
import java.util.Date;
import java.util.TimeZone;

public class TimeZoneTest {

    /**
     * @param args
     */
    public static void main(String[] args) {
        Calendar gmtTime = Calendar.getInstance(TimeZone.getTimeZone("UTC"));
        Calendar estTime = Calendar.getInstance(TimeZone.getTimeZone("America/New_York"));

        System.out.println(getInputDate() + " (Actually GMT)");
        estTime.setTime(getInputDate());

        gmtTime.clear();
        gmtTime.set(estTime.get(Calendar.YEAR), estTime.get(Calendar.MONTH), 
                estTime.get(Calendar.DAY_OF_MONTH), estTime.get(Calendar.HOUR_OF_DAY), estTime.get(Calendar.MINUTE));
        gmtTime.set(Calendar.SECOND, estTime.get(Calendar.SECOND));
        Date estDate = gmtTime.getTime();
        System.out.println(estDate + "(Actually EST)");
    }

    private static Date getInputDate() {
        Calendar instance = Calendar.getInstance();
        instance.clear();
        instance.set(2014, 3, 2, 9, 0, 0);
        Date input = instance.getTime();
        return input;
    }

} 
```

输出是

```
Wed Apr 02 09:00:00 IST 2014 (Actually GMT)
Wed Apr 02 05:00:00 IST 2014(Actually EST) 
```

这实际上是[正确的](http://www.timeanddate.com/worldclock/converted.html?iso=20130402T09&p1=0&p2=179)

**编辑**：重要的是使用“America/New_York”而不是“EST”来考虑夏令时

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T00:48:31.347

嗯..下面的代码颠倒了你的场景，但也许你可以利用它？

```
private  Date cvtToGmt( Date date )
{
   TimeZone tz = TimeZone.getDefault();
   Date ret = new Date( date.getTime() - tz.getRawOffset() );

   // if we are now in DST, back off by the delta.  Note that we are checking the GMT date, this is the KEY.
   if ( tz.inDaylightTime( ret ))
   {
      Date dstDate = new Date( ret.getTime() - tz.getDSTSavings() );

      // check to make sure we have not crossed back into standard time
      // this happens when we are on the cusp of DST (7pm the day before the change for PDT)
      if ( tz.inDaylightTime( dstDate ))
      {
         ret = dstDate;
      }
   }

   return ret;
} 
```

# java - 如何在 Eclipse for android 中设置自定义密钥库以进行调试

> ID：15754060
> 
> 赞同：19
> 
> 时间：2013-04-02T00:20:07.567
> 
> 标签：java, android, apk, code-signing, android-keystore

我有一个用于签署我的 apk 的自定义密钥库。现在我想使用相同的密钥库进行调试。当我去 eclipse->windows->preferences->android->build 并设置我的自定义密钥库时，我得到“密钥库被篡改，或者密码不正确”？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-04-02T00:32:19.517

我遇到了同样的问题，以下是正确创建可用于在 Eclipse 中调试的自定义密钥库的步骤：

基本上你应该做的是将别名`storepasswd`和`keypasswd`别名更改`androiddebugkey`为“android”。

以下是命令：

```
keytool -changealias -keystore mykeystore.keystore -alias [old alias] -destalias androiddebugkey
keytool -keypasswd -keystore mykeystore.keystore -alias androiddebugkey
keytool -storepasswd -keystore mykeystore.keystore 
```

如果您不知道旧别名，请使用

```
keytool -list -v -keystore mykeystore.keystore 
```

在命令提示符下无法输入密码

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-05-20T05:29:19.327

设置自定义密钥存储的最简单方法。

不需要命令。

步骤（对于 ADT）：

1.导出任何项目（它将向您显示创建自定义密钥库的选项）。

![在此处输入图像描述](https://i.stack.imgur.com/yLj4E.png)

使用扩展名“ **.keystore** ”创建您的密钥库并提供密码 android 并按下一步。

2.![在此处输入图像描述](https://i.stack.imgur.com/1SG6e.png)

给出别名 = **androiddebugkey**和密码 = **android**

现在按完成，您的密钥库已准备就绪。

1.转到windows -> 首选项

并给出您的自定义密钥库文件的路径

![在此处输入图像描述](https://i.stack.imgur.com/ELbca.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-01-24T12:17:44.087

我在尝试调试发布的 apk 时遇到了同样的问题。所以我尝试了 Saeid 解决方案，但没有成功。然后我找到了这个博客（[http://blogprogramistyandroid.blogspot.com.br/2011/04/converting-release-keys-to-debug.html](http://blogprogramistyandroid.blogspot.com.br/2011/04/converting-release-keys-to-debug.html)），我得到了最简单的解决方案：

做这个命令：

keytool -importkeystore -v -srckeystore release.keystore -destkeystore custom-debug.keystore -srcstorepass release-pass -deststorepass android -srcalias release-key -destalias androiddebugkey -srckeypass release-pass -destkeypass android

当然，将源密钥库的密码和别名替换为用于创建发布密钥库的密码和别名。

完毕

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-11T23:40:12.787

前段时间我们办公室也有同样的问题。由于我们经常需要这个，所以我们编写了一个简单的脚本来轻松将发布密钥库转换为调试密钥库。

该脚本可在[https://github.com/IntellexApps/key2debug上找到](https://github.com/IntellexApps/key2debug)

我们现在使用它有一段时间了，所以应该很稳定。

干杯！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-28T11:41:57.620

修改keystore内容后，就可以在: 中设置eclipse了`Preferences->Android->Build`，如下图： [Eclipse change debug keystore](http://i.stack.imgur.com/PbFgb.png)

# vb.net - 无法使用实体框架保存记录

> ID：15754061
> 
> 赞同：1
> 
> 时间：2013-04-02T00:20:16.780
> 
> 标签：vb.net, winforms, frameworks, entity

有人可以帮忙吗？

我是一个绝对的初学者。但是我在网上搜了一下。在 VB 中显示的例子并不多。

我创建了一个包含 win 表单的测试项目。然后添加了另一个包含实体模型的项目，在构建模型后，我将这个引用添加到了 Win 表单项目。之后，我将模型对象添加为数据源。

我将数据源控件拖到表单中并添加了以下代码。

```
Private context As TestModelEntities

Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load

    context = New TestModelEntities

    Dim query = context.employees
    EmployeeBindingSource.DataSource = query.ToList

End Sub

Private Sub DepartmentBindingNavigatorSaveItem_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles EmployeeBindingNavigatorSaveItem.Click

    Try
        context.SaveChanges()
        MessageBox.Show("Changes saved to the database.")
        Me.Refresh()
    Catch ex As Exception
        MessageBox.Show(ex.Message)
    End Try
End Sub 
```

我整天都在挠头。不知道我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T00:25:20.970

在您的`DepartmentBindingNavigatorSaveItem_Click`方法中，您似乎没有`context`在调用之前添加任何内容`context.SaveChanges()`。

因此，实体框架不知道任何新添加的实体，也没有持久化它们。

尝试将您的实体添加到上下文中，然后调用`context.SaveChanges()`.

**更新**

这是一篇关于向上下文添加/附加实体的 MSDN 文章：[实体框架添加/附加和实体状态](http://msdn.microsoft.com/en-us/data/jj592676.aspx)

不幸的是，它在 C# 中（我在 VB.NET 中找不到翻译或等效文章），`Employee`但`Department`在`SaveChanges()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-18T14:27:22.573

我对你的问题有点困惑，但我可能有一些可以提供帮助的提示。首先，正如@Philip Tenn 所说，您需要将您创建的任何内容添加到上下文中。在 vb.net 中真的很简单，只需编写：

Context.Table.Add(Object2Add)。

这会将对象放入该数据表中。现在，当您查询时，您应该说以下内容：

将 MyQuery 调暗为 IEnumerable(of DataTable) = (From a in Context.DataTable).ToList。

这将从该数据表中获取所有内容并将其存储在列表中。您的代码可能遇到的一个问题是，需要在每个子程序中单独声明上下文（因此 Dim Context 作为新的 TestModelEntity）或全局（因此公共上下文作为新的 testModelEntity（这在您的子程序之外））。我知道我迟到了几年，但希望这对某人有所帮助！

# jquery - jQuery UI 滑块：Chrome 中的滞后

> ID：15754066
> 
> 赞同：-1
> 
> 时间：2013-04-02T00:20:50.043
> 
> 标签：jquery, user-interface, jquery-ui-slider

我在这里有同样的问题： [jQuery UI Slider: move the value along (with) the handle](https://stackoverflow.com/questions/7415963/jquery-ui-slider-move-the-value-along-with-the-handle)

"*我在我的页面中使用了 jQuery UI 滑块组件来设置价格范围。我还可以使用它们的 ui.values[] 来设置和显示其他 div 中的新值。如何才能在句柄。也就是说，如果我将句柄移动到 100 美元，我想在该句柄正下方设置“100 美元”文本。* ”

有答案（[http://jsfiddle.net/william/RSkpH/1/](http://jsfiddle.net/william/RSkpH/1/)），但我对滑块中的“动画：”慢“”功能有问题。帮助如何使用句柄为值设置动画。我的滑块在移动后会留下垃圾:( [http://data2.floomby.com/files/share/2_4_2013/6TZ1DOmbk2pRqvCF0nfVw.jpg](http://data2.floomby.com/files/share/2_4_2013/6TZ1DOmbk2pRqvCF0nfVw.jpg)

谢谢

```
$("#slider").slider({
    range: true,
    min: 100,
    max: 500,
    step: 10,
    values: [100, 500],
    animate: "slow",
    slide: function(event, ui) {
        var delay = function() {
            var handleIndex = $(ui.handle).data('index.uiSliderHandle');
            var label = handleIndex == 0 ? '#min' : '#max';
            $(label).html('$' + ui.value).position({
                my: 'center top',
                at: 'center bottom',
                of: ui.handle,
                offset: "0, 10"
            });
        };
        // wait for the ui.handle to set its position<br>
        setTimeout(delay, 5);
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T00:41:22.770

你应该使用`change`回调而不是`slide`回调。`change`只要滑块的值发生变化，就会触发，这是您所需要的。

```
//...
change: function(event, ui) {
    var delay = function() {
    //... 
```

# 编辑

问题是所有`slider`提供的事件都在动画完成之前被触发。这使得将标签实际移动到句柄下方有点棘手，因为在句柄移动之前设置了值，并且当句柄到达其最终位置时，不会触发回调来捕获它。

我发现将标签放在手柄元素内更方便。像这样，他们将自己保持在把手下方。看到这个小提琴：http: [//jsfiddle.net/ohcibi/RvSgj/2/](http://jsfiddle.net/ohcibi/RvSgj/2/)

# 更新

最后一个小提琴似乎在 Chromium for Linux 中不起作用，发生了一个奇怪的 gfx 错误（请参阅屏幕截图的注释）。Firefox 19.0.2、Opera 12.14 和最新的 Windows 版 Chrome 都在渲染它。

# java - Java JTextArea、JLabel 和其他组件：如何设置位置

> ID：15754072
> 
> 赞同：1
> 
> 时间：2013-04-02T00:21:18.473
> 
> 标签：java, swing, location, jlabel, jcomponent

`JLabel`例如，如果我有一个，并且我调用了该`setLocation()`方法，则什么也不会发生。与所有其他`JComponent`s 相同。如何指定位置？能够将这些`Component`s 移动到任何我想去的地方就好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T00:23:46.997

布局管理器将为您定位组件。可以不使用布局管理器并自己定位组件，但不建议这样做。[请从 oracle http://docs.oracle.com/javase/tutorial/uiswing/layout/none.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/none.html)阅读以下教程

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T00:23:58.677

我猜`LayoutManager`你的面板或框架正在为你设置标签的位置。

您需要做的是将布局设置为`null`（这将使框架不会尝试自行布局组件）：

```
public GUI() 
{
    setLayout(null);
} 
```

但是，我不容忍这种解决方法，因为`LayoutManager`s 在映射组件的位置时非常有用。此外，当`LayoutManager`is时`null`，您必须每次跟踪新组件，在窗口移动缩小时自行执行布局计算等。请查看[本教程](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)`LayoutManager`以获取有关s的帮助

# python - 将输入的以空格分隔的项目添加到字典中。Python

> ID：15754076
> 
> 赞同：1
> 
> 时间：2013-04-02T00:21:50.140
> 
> 标签：python, loops, input, dictionary, spaces

我需要制作一个程序，要求用户输入城市，然后输入那里的温度。城市和温度被一个空间隔开。当用户输入“停止”时，程序停止请求输入并报告最冷的城市。您始终可以假设用户输入了一个城市，然后是一个空格，然后是温度。

```
Sample Output:

Enter city followed by temperature > Edmonton -2
Enter city followed by temperature > Toronto 3
Enter city followed by temperature > Vancouver -1
Enter city followed by temperature > Ottawa -3
Enter city followed by temperature > stop
{'Toronto': 3, 'Edmonton': -2, 'Vancouver': -1, 'Ottawa': -3}
The coldest city is Ottawa -3 
```

我遇到的问题是如何将输入的项目放入字典表单中。我不明白它如何与输入项目中的空间一起工作。我还有其他三个遵循这种格式的程序，输入包括空格，我真的无法弄清楚/找到如何解决它。任何帮助，将不胜感激。

PS：我正在上初学者的计算科学课程..是啊..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T00:25:34.833

您需要使用该方法将输入拆分为键和值部分[`split()`](http://docs.python.org/2.7/library/stdtypes.html#str.split)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T00:29:20.153

一个示例 ipython 会话：

```
In [1]: a = raw_input('City temp: ')
City temp: Edmonton -2

In [2]: a
Out[2]: 'Edmonton -2'

In [3]: d = {}

In [4]: a = a.split()

In [5]: d[a[0]] = a[1]

In [6]: d
Out[6]: {'Edmonton': '-2'} 
```

显然有更多的pythonic方法可以做到这一点。您可以通过阅读[文档来解决它们](http://docs.python.org/2/tutorial/datastructures.html#dictionaries)

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T00:30:21.713

你想使用[`string.split()`](http://docs.python.org/2/library/stdtypes.html#str.split)：

```
d = {}
for i in range(5):
    user = input('Enter city followed by temperature') 
    # use raw_input(prompt) if using Python 2.x
    data = user.split()
    d[data[0]] = int(data[1]) 
```

或者，您可以将每对作为元组附加到列表中，然后使用以下`dict()`函数：

```
dataPoints = []
for i in range(5):
    user = input('Enter city followed by temperature')
    data = user.split()
    dataPoints.append((data[0], int(data[1])))
d = dict(dataPoints) 
```

# angularjs - 为什么 AngularJS + fb-like 给我“拒绝显示文档，因为 X-Frame-Options 禁止显示。” 间歇性的？

> ID：15754077
> 
> 赞同：0
> 
> 时间：2013-04-02T00:22:00.350
> 
> 标签：angularjs, facebook-like, facebook-javascript-sdk

我的 HTML 中有这个

```
<div class="container" ng-controller="MyControl">
   ....(some html removed)....
   <fb-like data-href="...." data-send="false" data-layout="button_count" data-width="120" data-show-faces="false" data-font="verdana"></fb-like> 
```

在我的 JS 中，我没有将 Facebook 异步初始化放在 MyControl 中，而是放在其他一些控件中。并在文档准备好时加载 Facebook 脚本。

```
function SomeOtherControl($scope,$rootScope) {
    ...(some code removed)....
window.fbAsyncInit = function() {
  // init the FB JS SDK
  FB.init({
    appId      : '...', // App ID from the App Dashboard
    channelUrl : '...', // Channel File for x-domain communication
    status     : false, // check the login status upon init?
    cookie     : true, // set sessions cookies to allow your server to access the session?
    xfbml      : true  // parse XFBML tags on this page?
  });
  FbLogin($scope,true);
  $rootScope.lastFbLogin = new Date();
  $rootScope.$apply('lastFbLogin')
};
angular.element(document).ready(function(){
    (function(d, debug){
       var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
       if (d.getElementById(id)) {return;}
       js = d.createElement('script'); js.id = id; js.async = true;
       js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
       ref.parentNode.insertBefore(js, ref);
    }(document, /*debug*/ false));
}) 
```

lastFbLogin 现在是空的

```
$rootScope.$watch('lastFbLogin',function(newVal,oldVal){
    if (!!newVal) {
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:36:44.987

我认为这与 Angular 无关。'forbidden by X-Frame Options' 错误表明 Facebook SDK 将 fb-like（或其他标签）替换为 iframe，并且 iframe 包含不打算在 iframe 中呈现的网站。使用解决方案查看此[类似问题](https://stackoverflow.com/questions/9491540/refused-to-display-document-because-display-forbidden-by-x-frame-options)。

# java - JTable & Filereader 实现

> ID：15754078
> 
> 赞同：0
> 
> 时间：2013-04-02T00:22:01.103
> 
> 标签：java, swing, file-io, jtable

`JTable`使用填充`FileReader`

但是，我查看了 Internet，但未能找到好的教程或示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T00:47:24.440

您的基本问题是翻译问题。如何从状态 A 到状态 B。您需要将文件的内容转换为可以将其包装成某种状态的状态`TableModel`。

我会从

*   [基本 IO](http://docs.oracle.com/javase/tutorial/essential/io/)
*   [如何使用表格](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)

一旦你有能力读取文件并以某种有意义的方式存储它的内容（我会创建一个很好的类，它能够处理每一行的数据并将它们全部放入类似的东西中`ArrayList`，但这就是我），然后我会弄清楚如何将这些数据放入表中。

一旦你有了某种结构的数据，进入表格就相对简单了。

# iphone - UITableView 显示按钮错误

> ID：15754079
> 
> 赞同：0
> 
> 时间：2013-04-02T00:22:12.323
> 
> 标签：iphone, objective-c, xcode, uitableview

当用户单击公开按钮时，我执行一个推送新视图的 segue

控制器到当前导航控制器。问题是当我弹出推

控制器到达 UITableView 我发现披露按钮仍然是黑暗的

蓝色的！！！`see attached image.`

![在此处输入图像描述](https://i.stack.imgur.com/9eKl2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T05:13:36.320

你有没有尝试过这个，希望它会对你有所帮助。

```
- (void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath {

[tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationNone];
[tableView selectRowAtIndexPath:indexPath animated:NO scrollPosition:UITableViewScrollPositionNone];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T00:34:39.630

那是因为单元格被选中了。选中状态默认不清除。添加到`viewWillAppear`方法：

```
[self.tableView deselectRowAtIndexPath:[self.tableView indexPathForSelectedRow] animated:animated]; 
```

取决于你命名你的 tableView 属性。

# python - python序列化SOAP文件中的ascii错误

> ID：15754084
> 
> 赞同：0
> 
> 时间：2013-04-02T00:22:32.867
> 
> 标签：python, soap, unicode, suds

我正在为 API 开发一个肥皂包装器（我知道 REST 存在......这是我工作中的一个项目），我正在为此使用 SUDS 库。

我发现[了这个](https://stackoverflow.com/questions/6601107/how-to-send-a-file-through-soap-in-python)问题，答案对我帮助很大。在尝试了几件事并稍微修改了那个问题指向我的脚本后，我收到了以下错误：

```
UnicodeDecodeError: 'ascii' codec can't decode byte 0x82 in position 2159: ordinal not in range(128) 
```

将请求发送到 SOAP 端点时会发生这种情况，我尝试使用带有 NFKD 选项的 unicodedata 来规范化它，但我仍然得到相同的错误。

由于这不是一个简单的文本，这是来自音频文件的实际数据，我不确定，但我想修改它应该会破坏实际数据，所以我不知道该怎么做。

这就是我正在做的事情，这与另一个问题中的过程没有太大不同：

```
file = open('path/to/the/file.mp3', 'rb')
mime_type = 'audio/mpeg'
audio_data = file.read()
bin_param = (audio_data, uuid.uuid4(), mime_type)

with_soap_attachment(client.service.set_greeting, bin_param, request_data) 
```

据我了解，该脚本将所有输入参数转换为 SOAP 消息字符串，然后将其封装为 Request 对象并将其发送到 SOAP 端点，因此，问题是 audio_data 包含无效的 ascii 字符。

这里有什么线索吗？

**编辑：2013 年 4 月 4 日**

这是包装器的实际代码

```
#coding: utf-8
from suds.transport import Request
import re
import uuid

def with_soap_attachment(suds_method, attachment_data, soap_location, *args, **kwargs):
    MIME_DEFAULT = 'text/plain'
    attachment_transfer_encoding = 'binary'
    soap_method = suds_method.method

    if len(attachment_data) == 3:
        data, attachment_id, attachment_mimetype = attachment_data
    elif len(attachment_data) == 2:
        data, attachment_mimetype = attachment_data
        attachment_id = uuid.uuid4()
    elif len(attachment_data) == 1:
        data = attachment_data
        attachment_mimetype = MIME_DEFAULT
        attachment_id = uuid.uuid4()

    soap_client = suds_method.clientclass(kwargs)
    binding = soap_method.binding.input
    soap_xml = binding.get_message(soap_method, args, kwargs)

    boundary_id = 'uuid:%s' % uuid.uuid4()
    root_part_id ='uuid:%s' % uuid.uuid4()
    request_headers = {
      'Content-Type': '; '.join([
          'multipart/related',
          'type="text/xml"',
          'start="<%s>"' % root_part_id,
          'boundary="%s"' % boundary_id,
        ]),
    }
    soap_headers = '\n'.join([
      'Content-Type: text/xml; charset=UTF-8',
      'Content-Transfer-Encoding: 8bit',
      'Content-Id: <%s>' % root_part_id,
      '',
    ])
    attachment_headers = '\n'.join([
      'Content-Type: %s' % attachment_mimetype,
      'Content-Transfer-Encoding: %s' % attachment_transfer_encoding,
      'Content-Id: <%s>' % attachment_id,
      '',
    ])

    request_text = '\n'.join([
      '',
      '--%s' % boundary_id,
      soap_headers,
      unicode(soap_xml),
      '--%s' % boundary_id,
      attachment_headers,
      data,
      '--%s--' % boundary_id
    ])

    location = soap_location

    headers = suds_method.client.options.headers.copy()
    headers.update(request_headers)
    request = Request(location, request_text)
    request.headers = headers

    response = suds_method.client.options.transport.send(request)
    return response 
```

这是整个回溯

```
---------------------------------------------------------------------------
UnicodeDecodeError                        Traceback (most recent call last)
/home/israelord/.virtualenvs/ringtu-env/local/lib/python2.7/site-packages/django/core/management/commands/shell.pyc in <module>()
----> 1 soap_attachments.with_soap_attachment(service.set_menu_prompt, bin_param, AUTOATTENDANT_ENDPOINT, request)

/home/israelord/Work/4geeks/ringtu/ringtu/services/soap_attachments.py in with_soap_attachment(suds_method, attachment_data, soap_location, *args, **kwargs)
     54       attachment_headers,
     55       data,
---> 56       '--%s--' % boundary_id
     57     ])
     58 

UnicodeDecodeError: 'ascii' codec can't decode byte 0x82 in position 148: ordinal not in range(128) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T00:31:21.897

好吧，包装器不支持二进制文件，因为它只使用`Content-Transfer-Encoding: 8bit`当然不能处理二进制文件的文件。您可能需要参考 SOAP 附件规范对其进行修改。

# java - 在 webapp 中并发访问文件的最佳解决方案

> ID：15754086
> 
> 赞同：1
> 
> 时间：2013-04-02T00:22:44.717
> 
> 标签：java, guava

我正在编写一个 web 应用程序（SpringMVC +JSF），它允许用户上传他们的文件并与其他人编辑/共享它们。在这个应用程序的服务层上，我使用 guava 来处理所有文件 IO，但不幸的是，从我目前在参考手册中看到的内容来看，guava 并没有解决并发访问文件的问题。

我知道Java提供的FileChannel类有一个lock方法在一定程度上解决了这个问题，但是它与guava IO框架不太适合。在我摆脱 guava 并使用 FileChannel 和 InputStream 重写我的代码之前，我想知道是否有任何其他方法可以做到这一点，而无需完全切换到另一个 IO 包。

（将文件名映射到锁的大型哈希表对我来说似乎不是一个好的解决方案。当用户群很大时，内存中存储的东西太多。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T00:55:29.730

使用数据库。文件系统非常适合存储实际文件内容——但对于存储和管理用户、文件详细信息、共享以及编辑和版本历史等，数据库是绝对需要的。

为了避免上传失败导致信息丢失，上传和编辑（例如）需要转到一个新文件——不要覆盖现有文件，并且可能会丢弃它。

编辑和共享也可能是针对可能具有连续版本（磁盘上的实际文件）的实体（可能是“文档”表中的一行）。

因此，至少出于两个原因，“文件系统文件”不同于您需要跟踪的实体以及您的用户希望使用的实体。

如果您假定的用户群*确实*变大了，他们可能会期待一个真正的应用程序。凭借可靠的数据库，记录用户访问、文档版本、共享以及磁盘上基础文件的位置和锁定状态，变得简单而可靠。

没有这样的数据库，就不可能可靠地工作。

# javascript - 如何获得 KineticJS 舞台的左上坐标和上坐标？

> ID：15754087
> 
> 赞同：0
> 
> 时间：2013-04-02T00:22:56.640
> 
> 标签：javascript, html, canvas, kineticjs

我正在尝试获取鼠标光标的坐标并在它离开我的 KineticJS 阶段时进行操作。但我需要获取鼠标相对于舞台画布的坐标。所以当鼠标光标从左边缘离开舞台时，坐标应该为0，当它从顶部离开时，无论舞台在网页中的哪个位置，y坐标都应该是0。我写了一个函数，但我在控制台中得到了 NaN。

container 是放置舞台的 div

```
function checkBounds(e) {
    var canvas = document.getElementById("container");
    console.log(e.clientX - stage.getX() + "," + e.clientY - stage.getY());
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T00:26:13.117

这是一些在网页上查找容器偏移量的 jquery 代码。

```
 var containerOffset=$("#container").offset();
    var offsetX=containerOffset.left;
    var offsetY=containerOffset.top; 
```

以下是如何在事件处理程序中获得确切的鼠标位置

```
 function handleMouseDown(e){
      mouseX=parseInt(e.clientX-offsetX);
      mouseY=parseInt(e.clientY-offsetY);

      // Put your mousedown stuff here

    } 
```

# java - 无法弄清楚如何覆盖超类中的方法

> ID：15754092
> 
> 赞同：-2
> 
> 时间：2013-04-02T00:23:34.233
> 
> 标签：java, class, inheritance

这是课堂作业。我们得到这个代码：

```
public class Person {
private String name;
private int age;

public Person(String n, int a)
{
this.name = n;
this.age = a;
}
public String getName()
{
return name;
}

public int getAge()
{
return age;
}

public void setName(String n)
{
name = n;
}

public void setAge(int a)
{
age = a;
}

public void print( )
{
System.out.println("Name: " + name);
System.out.println("Age: " + age);
}
} 
```

我们必须在这里覆盖这个类中的 print 方法，它扩展了 Person 类：

```
public class CollegeKid extends Person
{
private double gpa;

 public double getGPA()
{
 return gpa;
}

public void setGPA(double g)
{
  gpa = g;
}

public void print( )
{/* your code here */
  }
} 
```

对第一个代码的格式感到抱歉。

我试着写

```
public void print(){
super.print();
SOP("Name " + name);
SOP("Age " + age);
SOP("GPA " + gpa);} 
```

但这没有用..

这是我得到的编译错误：编译错误（第 2 行，第 31 列）：名称在继承中具有私有访问权限 I.Person 编译错误（第 3 行，第 30 列）：年龄在继承中具有私有访问权限 I.Person

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T00:27:22.433

要利用超类功能，您可以正确调用`super.print();`. `name`和`age`变量`private`在`Person`. _ 但是您不必再次打印姓名和年龄；对超类方法的调用已经解决了这个问题。您只需要一份`System.out.println`GPA 声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T00:27:35.530

```
CollegeKid kid = new CollegeKid()
kid.set...(...)
kid.print() 
```

# java - 如何按顺序制作junit测试运行方法

> ID：15754094
> 
> 赞同：14
> 
> 时间：2013-04-02T00:23:40.517
> 
> 标签：java, spring, junit, memcached

伙计们！我有一个新问题要问你。我正在使用不同的缓存管理器将一些数据添加到缓存中，但我正面临着它的问题。我正在使用junit和spring来做。当我运行测试时，测试方法是随机执行的，但我需要它们按顺序执行。怎么做？？这是一些代码和验证控制台输出：

服务等级：

```
@Service("HelloCache")
public class CacheServiceImpl implements CacheInterface {
    @Autowired
    @Qualifier("memcachedClient")
    private MemcachedClient mBean;

    public void Add(String key, Object object) {
        mBean.set(key, 12, object);
    }

    public void Get(String key) {
        mBean.get(key);
    }

    public void Delete(String key) {
        mBean.delete(key);
    }    
} 
```

这是测试：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = "file:src/main/java/spring.xml")
public class UsingMemcachedTest extends TestCase {
    @Autowired
    @Qualifier("HelloCache")
    private CacheInterface emcached;
    private byte[][] i = new byte[2500][3000];
    private String key = "j";
    @Test
    public void testAddBulkObjects() {
        System.out.println("");
        System.out.println("This is async BULK adding test");
        long time = System.currentTimeMillis();
        for (int k=1; k<=1000; k++) {
            emcached.Add(key+k, i);
        }
        long time2 = System.currentTimeMillis();
        long timeE=time2-time;
        System.out.println("Vremya add BULK objects: " + timeE);
        System.out.println("");
    }

    @Test
    public void testGetBulkObjects() {
        System.out.println("");
        System.out.println("This is getting BULK objects test");
        long time = System.currentTimeMillis(); 
        for (int k=1; k<=1000; k++) {
            emcached.Get(key+k);
        }
        long time2 = System.currentTimeMillis();
        long timeE=time2-time;
        System.out.println("Vremya Get object: " + timeE);
        System.out.println("");
    } 

    @Test
    public void testDeleteBulkObjects() {
        System.out.println("");
        System.out.println("This is deleting BULK objects test");
        long time = System.currentTimeMillis();
        for (int k=1; k<=1000; k++) {
            emcached.Delete(key+k);
        }
        long time2 = System.currentTimeMillis();
        long timeE=time2-time;
        System.out.println("Vremya delete object: " + timeE);
        System.out.println("");
    } 
```

和输出：

```
This is deleting BULK objects test
Vremya delete object: 137

This is getting BULK objects test
Vremya Get object: 703

This is async BULK adding test
Vremya add BULK objects: 87681 
```

请帮忙！！=)

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2014-04-10T12:23:15.203

从 4.11 版开始，您可以使用注释指定执行顺序并按方法名称排序：

```
import org.junit.Test;
import org.junit.FixMethodOrder;
import org.junit.runners.MethodSorters;

@FixMethodOrder(MethodSorters.NAME_ASCENDING)
public class MyTest {

    @Test
    public void test1Create() {
        System.out.println("first");
    }

    @Test
    public void test2Update() {
        System.out.println("second");
    }
} 
```

**[请参阅 JUnit 4.11 发行说明](https://github.com/junit-team/junit/blob/master/doc/ReleaseNotes4.11.md#test-execution-order)**

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-02T00:30:35.377

JUnit 不承诺测试运行的顺序。根据运行测试的环境和上下文，顺序会有所不同。

由于这个原因（和其他原因），它被认为是非常糟糕的测试设计，因为它会影响测试的行为。您可以使用@Before 为您提供一个干净的工作状态，然后为特定测试进行任何设置作为该测试的一部分。

以下问题的公认答案给出了一个很好的解释和一些有用资源的链接： [如何在 JUnit4 中按特定顺序运行测试方法？](https://stackoverflow.com/questions/3693626/how-to-run-test-methods-in-spec-order-in-junit4)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-02T01:55:11.457

JUnit 4.11 添加了一些很酷的东西，允许您控制[测试执行顺序](https://github.com/junit-team/junit/blob/master/doc/ReleaseNotes4.11.md#test-execution-order)

# android - 带有多行项目的微调器与 Froyo 上的选定项目显示重叠

> ID：15754099
> 
> 赞同：8
> 
> 时间：2013-04-02T00:23:57.770
> 
> 标签：android, android-layout, styles, android-spinner, android-holo-everywhere

我正在尝试创建在所有版本的 Android 上看起来都相同的 Spinner，回到 Froyo。为此，我正在使用[HoloEverywhere](https://github.com/Prototik/HoloEverywhere)。一些微调器项目文本不止一行，我希望它换行。

使用默认布局，`android.R.layout.simple_spinner_dropdown_item`或[HoloEverywhere 的替代它](https://github.com/Prototik/HoloEverywhere/blob/master/library/res/layout/simple_spinner_dropdown_item.xml)，省略文本而不是换行。

以 HoloEverywhere 的布局作为自定义布局的起点，`singleLine`设置为`false`、`ellipsize`设置为`none`和`layout_height`设置为`wrap_content`无济于事，文本仍然被截断。

我*可以*`TextView`通过将a包裹在下拉列表中正确包裹文本`LinearLayout`，但在**Froyo**设备上，这会弄乱**所选**项目的显示： ![每次你无法统一回顾弗罗约时，杰克沃顿都会流下一滴眼泪。](https://i.stack.imgur.com/gZIzh.png)

此方法适用于较新的设备。下拉项目布局适用于所有设备。但是，当我使用自定义下拉项布局时，**Froyo会将此奇怪的文本重叠。**每个选择都堆积在最后一个之上。

这个问题： [Spinner does not wrap text -- 这是一个 Android 错误吗？](https://stackoverflow.com/questions/14139106/spinner-does-not-wrap-text-is-this-an-android-bug?rq=1)关于 Spinners 中的文本换行表明，唯一的方法是从头开始重新创建样式而不继承，但这听起来很疯狂并且容易出现问题。

my_simple_list_item_1.xml：

```
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android" 
  android:layout_width="300dp"
  android:layout_height="wrap_content" >   

  <TextView
    android:id="@+id/android:text1"
    android:layout_width="wrap_content"
    android:layout_height="50dp"
    android:ellipsize="marquee"
    android:layout_gravity="center_vertical"
    android:singleLine="false"/>
</LinearLayout> 
```

爪哇：

```
 import org.holoeverywhere.widget.Spinner;

    spinner1.setAdapter(ArrayAdapter.createFromResource(this,
            R.array.array_of_strings, R.layout.my_simple_list_item_1)); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T22:54:17.117

我找到了解决方案。由于微调器的初始显示只能处理文本视图，因此文本被换行，并且我找到了另一种建议使用线性布局的解决方案。这使得微调器的下拉列表看起来正确。事实证明，适配器有一个名为 setDropDownViewResource() 的资源，它允许您为下拉菜单设置与微调器选择中显示的不同的视图。

```
 import org.holoeverywhere.widget.Spinner;

 ArrayAdapter adapter1 = ArrayAdapter.createFromResource(this,R.array.array_of_strings,R.layout.simple_list_item_1);
 adapter1.setDropDownViewResource(R.layout.my_simple_list_item_1);
 spQ1.setAdapter(adapter1); 
```

在本例中，simple_list_item 是 android 提供的默认视图，而 mY_simple_list_item 是

```
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android" 
android:layout_width="300dp"
android:layout_height="wrap_content" >   

<TextView
  android:id="@+id/android:text1"
  android:layout_width="wrap_content"
  android:layout_height="50dp"
  android:ellipsize="marquee"
  android:layout_gravity="center_vertical"
  android:singleLine="false"/>

</LinearLayout> 
```

现在文本包裹在微调器的下拉视图和微调器显示的选择中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T00:33:36.790

听起来你正在上坡。我的猜测是，您的客户将永远无法通过包装文本获得 100% 可靠且一致的结果。

请参阅： [Spinner 不换行 - 这是 Android 错误吗？](https://stackoverflow.com/questions/14139106/spinner-does-not-wrap-text-is-this-an-android-bug?rq=1)

# android - Eclipse 中的硬编码字符串

> ID：15754105
> 
> 赞同：1
> 
> 时间：2013-04-02T00:24:31.413
> 
> 标签：android, xml, eclipse

在开发应用程序时，我注意到每当我不使用“@string/”...

> android:text="@string/stringName"

然后写

> 机器人：文本=“字符串名称”

Eclipse 希望我添加回“@string/”。这是为什么？硬编码字符串有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T00:29:10.733

如果您使用字符串资源，您可以轻松翻译您的应用程序。例如，您可以将其翻译成德语，只需将您的字符串资源放入 values-de 文件夹并翻译它们即可。然后，Android 将根据手机的当前语言环境选择正确的字符串。它还提高了应用程序的效率。

这就是它的样子：

/values/strings.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <string name="app_name">Simple Calculator</string>
    <string name="welcome_message">Welcome!</string>

</resources> 
```

/values-de/strings.xml（德语）：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <string name="app_name">Simpler Taschenrechner</string>
    <string name="welcome_message">Willkommen!</string>

</resources> 
```

编辑：

就像@EGHDK 提到的那样；如果您想更改一些文本，它可以为您节省大量时间。使用字符串资源，您可以将所有内容集中在一处。

# wordpress - 如何显示带有 id 的 wordpress 类别列表

> ID：15754106
> 
> 赞同：2
> 
> 时间：2013-04-02T00:25:03.083
> 
> 标签：wordpress, list, parent-child, categories

谁能告诉我如何显示我的wordpress类别（父母和孩子）以及他们的ID。我希望它们以这种方式打印：

Europe,United Kingdom,London（Europe 是父类，而他们的子类是英国）10,20,33（这些是他们的 id）

欧洲,法国,巴黎 10,22,45

欧洲、法国、戛纳10、22、49

我尝试了这段代码，但它对我不起作用：

```
 <?php  
$categories = get_the_category();
 $this_cat_ID = $categories[0]->cat_ID;
 $this_cat_name = $categories[0]->cat_name;
 $this_cat_url = get_category_link($this_cat_ID);
 // get the sub category if we have them
 foreach ($categories as $cat) {
    $parent = $cat->category_parent;
    if ($parent != 0 ){
       $sub_cat_ID = $cat->cat_ID;
       $sub_cat_name = $cat->cat_name;
       $sub_cat_url = get_category_link($sub_cat_ID);
    }
 }
 if (!$sub_cat_ID) {
   echo $this_cat_ID;
} else {
   echo $sub_cat_ID;
}
?> 
```

非常感谢您的帮助谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T00:31:16.910

WordPress 函数[wp_list_categories](http://codex.wordpress.org/Template_Tags/wp_list_categories)将返回所有类别的列表。如果将分层标志设置为 true，您将获得整个层次结构。有关详细信息，请阅读上面链接中的法典文章。

还有一个[get_categories 函数](http://codex.wordpress.org/Function_Reference/get_categories) 返回未格式化的结果。您可以在自己的 PHP 代码中使用它。

第三种选择是读取数据库，有三个表 wp_terms、wp_term_taxonomy 和 wp_term_relationships 包含类别树。这是[数据库结构](http://codex.wordpress.org/Database_Description)。

编辑：这是一个短代码，它将产生一个像这样的列表作为嵌套的列表集合：

```
function show_categories($atts, $content) {
    extract( shortcode_atts( array('taxonomy' => 'category'), $atts ) );
    $cats = get_categories(array('taxonomy' => $taxonomy,'hide_empty' => 0, 'hierarchical' => 0, 'parent' => 0));
    return show_categories_level($cats, '', '', $taxonomy);
}

function show_categories_level($cats, $names, $ids,$taxonomy) {
    $res = '<ul>';
    foreach ($cats as $cat) {
        if($names)$n = "$names, $cat->name"; else $n = $cat->name;
        if($ids)$i = "$ids, $cat->term_id"; else $i = $cat->term_id;    
        $res = $res."<li>$n : $i</li>";
        $kittens = get_categories(array('taxonomy' => $taxonomy,'hide_empty' => 0, 'hierarchical' => 0, 'parent' =>$cat->term_id));
        if($kittens) {
            $res .= ("<li>".show_categories_level($kittens, $n, $i, $taxonomy)."</li>");
        }
    }
    return $res."</ul>";
}
add_shortcode('show-categories', 'show_categories'); 
```

要使用此代码，请将此代码添加到您的 functions.php 并将短代码添加到您希望它显示的任何位置：

```
<h2>Default Categories</h2>
[show-categories] 
```

或者您可以指定要列出的分类

```
<h2>My Taxonomy Categories</h2>
[show-categories taxonomy="my_taxonomy"] 
```

这不是获得此结果的最有效方法，但它在这里有效。如果您从 get_categories 的分层版本开始或使用数据库，您可以获得更快的版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T03:12:10.517

你想在哪里显示这个？内循环？外部？在single.php 中？类别.php？……？

如果你想在单独的地方显示它，首先包含 wp-load.php，像这样

```
<? php

header('Content-Type: text/html; charset: UTF-8');
require( '../../../../wp-load.php' ); // use the path which will fit your situation

$my_query = new WP_Query();
$my_query->query(array(
          'post_type' => 'post',
          'orderby'   => 'title',
          'order'     => 'ASC',
        ));

if ($my_query->have_posts()) : while ($my_query->have_posts()) : $my_query->the_post(); 

// use your code here after checking codex

endwhile;
endif;
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T05:16:03.973

我想做的是： [我遵循的步骤](http://www.ehow.com/how_8381770_export-list-categories-wordpress.html)（请检查此链接）

我只想更改此代码：

```
<ul> <?php wp_list_categories('show_count=1&title_li=&hide_empty=0'); ?></ul> 
```

这样所有类别及其子类别的列表将与它们的 id 一起以这种格式显示：

示例： **Europe,United Kingdom,London, East Ham : 25,28,34,36** 这只是一个父类别（欧洲）及其子类别（英国），英国的子类别是伦敦，伦敦的子类别是东汉姆​​。25是欧洲的id，28是英国的id，34是伦敦的id，36是东汉姆的id

请注意：我只想在上面链接中描述的页面上显示此列表。非常感谢

# python - 基于 Django 类的视图 (TemplateView) 中的 URL 参数和逻辑

> ID：15754122
> 
> 赞同：113
> 
> 时间：2013-04-02T00:26:28.920
> 
> 标签：python, django, django-class-based-views

我不清楚如何最好地访问 Django 1.5 中基于类的视图中的 URL 参数。

考虑以下：

**看法：**

```
from django.views.generic.base import TemplateView

class Yearly(TemplateView):
    template_name = "calendars/yearly.html"

    current_year = datetime.datetime.now().year
    current_month = datetime.datetime.now().month

    def get_context_data(self, **kwargs):
        context = super(Yearly, self).get_context_data(**kwargs)
        context['current_year'] = self.current_year
        context['current_month'] = self.current_month
        return context 
```

**网址会议：**

```
from .views import Yearly

urlpatterns = patterns('',
    url(
        regex=r'^(?P<year>\d+)/$',
        view=Yearly.as_view(),
        name='yearly-view'
    ),
) 
```

我想`year`在我的视图中访问参数，所以我可以执行如下逻辑：

```
month_names = [
    "January", "February", "March", "April", 
    "May", "June", "July", "August", 
    "September", "October", "November", "December"
]

for month, month_name in enumerate(month_names, start=1):
    is_current = False
    if year == current_year and month == current_month:
        is_current = True
        months.append({
            'month': month,
            'name': month_name,
            'is_current': is_current
        }) 
```

如何最好地访问 CBV 中的 url 参数，例如上面的子类，`TemplateView`以及理想情况下应该在哪里放置这样的逻辑，例如。在一个方法？

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2013-04-02T01:09:50.403

要在基于类的视图中访问 url 参数，请使用`self.args`or`self.kwargs`这样您就可以访问它`self.kwargs['year']`

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2014-01-26T16:26:50.833

如果您像这样传递 URL 参数：

```
http://<my_url>/?order_by=created 
```

您可以使用以下方法在基于类的视图中访问它`self.request.GET`（它既不在`self.args`也不在`self.kwargs`）：

```
from django.views.generic.list import ListView

class MyClassBasedView(ListView):
    ...
    def get_queryset(self):
        order_by = self.request.GET.get('order_by') or '-created'
        qs = super().get_queryset()
        return qs.order_by(order_by) 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2016-05-20T00:58:47.367

[我找到了这个优雅的解决方案，对于 django 1.5 或更高版本，正如此处](http://reinout.vanrees.org/weblog/2014/05/19/context.html)指出的那样：

> Django 的基于通用类的视图现在自动在上下文中包含视图变量。此变量指向您的视图对象。

在你的views.py中：

```
from django.views.generic.base import TemplateView    

class Yearly(TemplateView):
    template_name = "calendars/yearly.html"
    # Not here 
    current_year = datetime.datetime.now().year
    current_month = datetime.datetime.now().month

    # dispatch is called when the class instance loads
    def dispatch(self, request, *args, **kwargs):
        self.year = kwargs.get('year', "any_default")

    # other code

    # needed to have an HttpResponse
    return super(Yearly, self).dispatch(request, *args, **kwargs) 
```

在这个[问题](https://stackoverflow.com/a/11448882/5476782)中找到的调度解决方案。
由于[视图](https://docs.djangoproject.com/en/1.9/topics/http/views/)已经在模板上下文中传递，您实际上不需要担心它。在您的模板文件 yearly.html 中，可以通过以下方式访问这些视图属性：

```
{{ view.year }}
{{ view.current_year }}
{{ view.current_month }} 
```

您可以**保持 urlconf**原样。

值得一提的是，将信息获取到模板的上下文中会覆盖 get_context_data()，因此它以某种方式破坏了 django 的*操作 bean*流。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2018-06-05T20:10:07.167

不如只使用 Python 装饰器来使其易于理解：

```
class Yearly(TemplateView):

    @property
    def year(self):
       return self.kwargs['year'] 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-06-21T11:20:38.730

到目前为止，我只能从 get_queryset 方法中访问这些 url 参数，尽管我只尝试使用 ListView 而不是 TemplateView。我将使用 url 参数在对象实例上创建一个属性，然后在 get_context_data 中使用该属性来填充上下文：

```
class Yearly(TemplateView):
    template_name = "calendars/yearly.html"

    current_year = datetime.datetime.now().year
    current_month = datetime.datetime.now().month

    def get_queryset(self):
        self.year = self.kwargs['year']
        queryset = super(Yearly, self).get_queryset()
        return queryset

    def get_context_data(self, **kwargs):
        context = super(Yearly, self).get_context_data(**kwargs)
        context['current_year'] = self.current_year
        context['current_month'] = self.current_month
        context['year'] = self.year
        return context 
```

# matlab - 将多个制表符分隔的文件从不同的子目录导入matlab

> ID：15754125
> 
> 赞同：0
> 
> 时间：2013-04-02T00:26:37.297
> 
> 标签：matlab

对不起，我是 matlab 新手。

我所拥有的：一个包含大约 80 个子文件夹的文件夹，分别标记为 Day01、Day02、Day03 等。每个子文件夹都有一个名为“sample_ids.txt”的文件。它是制表符分隔格式的 anxm 矩阵。

我需要什么： 1 个数据结构，它是一个矩阵数组，其中每个矩阵都是来自“sample_ids.txt”的数据，它应该按 Day01、Day02、Day03 等的字母顺序排列。

我不知道如何从 A 点到 B 点。任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T00:56:06.553

您可以将此问题分解为两部分：查找文件并将它们读入内存。

查找文件非常容易，并且[已经在 StackOverflow 上进行了介绍](https://stackoverflow.com/questions/11621846/loop-through-files-in-a-folder-in-matlab)。

要将它们加载到内存中，您需要一个多维数组，这就像创建一个常规数组并开始使用更多索引维度一样简单：`A = ones(2); A(:,:,2) = ones(2);`例如，将为您提供一个大小为 2×2×的 3 维数组2、到处都是。

你想要的，可能是想要这样的东西：

```
A = [] % No prealocation. Fix for speed-up.
files = dir('./Day*/sample_ids.txt');
for file = files
    temp = load(file.name);
    A(:,:,size(A,3)+1) = temp;
end

disp(A) % display the contents of A afterards... 
```

我没有对这段代码进行广泛的测试，但它应该可以正常工作。

**几个重要的点：**

1.  所有文件必须包含*完全相同维度*的矩阵- MATLAB 无法处理在不同层中具有不同维度的数组（至少不能使用常规数组 - 您可以使用元胞数组，但这很快就会变得更加复杂......）。可以将其视为尝试从不同长度的向量构建矩阵。

2.  如果你有很多数据，并且你知道有多少，你可以通过预先分配 A 来节省大量时间。这就像`A = zeros(k,l,m)`每个`m`数据文件中包含`k`行和`l`列一样简单。如果这样做，您还必须找出当前文件的索引，因此您可以将其用作分配中的第三个索引（在循环块的第二行）。我把它作为一个互联网研究 excersize :)

# python - 将字典中的浮点值转换为两位小数

> ID：15754127
> 
> 赞同：0
> 
> 时间：2013-04-02T00:26:42.893
> 
> 标签：python, dictionary, python-2.4

注意，使用 Python 2.4。这是我称为 d_ourbook 的字典：

```
 {'130405C00465000': [[8.6999999999999993, 8.9000000000000004, 0.50749999999999995, 32.810000000000002, -141.1575]]} 
```

该值是浮点数列表。我正在尝试制作一个显示相同字典但值限制为两个浮点的函数。

我做了一个浮点-> 2decimal 字符串函数，称为 two(floatnum)：

```
def two(floatnum):
    return '%.2f' %(floatnum) 
```

我循环或压缩字典并将所有值转换为两个（值）的函数一直是一场噩梦，并返回所需的浮点参数：

```
Traceback (most recent call last):
  File "esecombo.py", line 496, in ?
    print ' -- dt: ', dt(d_ourbook)
  File "esecombo.py", line 23, in dt
    new_d_name = dict(zip(d_name.keys(), [two(value)for value in d_name.values()]))
  File "esecombo.py", line 10, in two
    return '%.2f' %(floatnum)
TypeError: float argument required 
```

任何帮助都是救命稻草。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:09:46.163

假设这`d_name`是您提供的字典，那么`d_name.values()`是浮点列表列表。所以 value 是一个浮点列表列表，你不能把它交给`two()`没有错误。

即使你得到了解决，zip也会根据最短的参数返回一些元组。以便：

```
new_d_name = dict(zip(d_name.keys(), 
                      [two(value) for value in (d_name.values()[0][0])])) 
```

结果是`{'130405C00465000': '8.70'}`

这假设**所有**值都是列表类型中的单个项目列表，如示例中所示，在这种情况下，您可能可以使用：

```
new_d_name = dict(zip(d_name.keys(), 
                      [[two(value) for value in (d_name.values()[0][0])]])) 
```

要得到：

```
{'130405C00465000': ['8.70', '8.90', '0.51', '32.81', '-141.16']} 
```

# ember.js - 没有“addArrayObserver”或“removeArrayObserver”

> ID：15754130
> 
> 赞同：3
> 
> 时间：2013-04-02T00:27:27.577
> 
> 标签：ember.js, ember-data

我正在建模一个有助于管理数据库表的管理界面。有两种模型：[DbxTables，DbxColumns]。我想允许用户使用 Boostrap 的选项卡菜单选择一个表，然后能够看到该表中的列。这主要是有效的。例如，如果我输入`http://my.domain.com/index.html#/performance`where `performance`is the name of the *table*我会得到以下信息：

![性能表](https://i.stack.imgur.com/ah0Jn.png)

如果我决定通过操作 URL 转到另一张桌子 - 例如`http://my.domain.com/index.html#/food`- 然后它将成功切换到右侧窗格中的食物列。当我在左侧标签菜单中使用我的 {{linkTo}} 链接时，问题就出现了。发生以下两种情况之一：

1.  如果 {{linkTo}} 看起来像，`{{linkTo 'columns' this}}`那么它使 URL 参数类似于，`<App.DbxTable:ember371:performance>`而不仅仅是`performance`
2.  如果 {{linkTo}} 看起来像这样`{{linkTo 'columns' this.id}}`，那么它正确设置了 ULR 参数（或者至少它在 URL 窗口中显示）但是如果我单击左侧选项卡菜单中的“用餐”，我会收到以下错误:*对象餐没有方法 'addArrayObserver'*。如果我单击其他内容，则会出现带有“*对象餐没有方法'removeArrayObserver'* ”的错误消息。

在上述两种情况下，收到错误后，右侧的列名都不会更新。{{linkTo}} 的第一种风格是来自 Tom Dale 的[截屏视频](https://www.youtube.com/watch?v=Ga99hMi7wfY)似乎暗示了正确的语法。但是，看到链接关闭，我想出了这个`this.id`方法。任何帮助将不胜感激。

对于一些额外的代码上下文（router.js）：

```
App.Router.map(function() {
    this.resource('about');
    this.resource('dbx', function() {
        this.resource('columns', { path: ':dbx_table'});
    });
    this.resource('oauth');
    this.resource('postTypeMappings');
});

App.DbxRoute = Ember.Route.extend({
    model: function() {
        return App.DbxTable.find();
    }
});
App.ColumnsRoute = Ember.Route.extend({
    model: function(table) {
        return App.DbxColumn.find(table);
    }
}); 
```

型号：dbx_table.js

```
App.DbxTable = DS.Model.extend({
    name: DS.attr("string"),
    desc: DS.attr("string"),
    db_column: DS.attr("string"),
    columns: DS.attr("raw")
}); 
```

型号：dbx_column.js

```
App.DbxColumn = DS.Model.extend({
    name: DS.attr("string"),
    dbType: DS.attr("string"),
    insight: DS.attr("string"),
    enum: DS.attr("string"),
    staticUom: DS.attr("string"),
    uomContext: DS.attr("string"),
    jsonStruct: DS.attr("string"),
    desc: DS.attr("string")
}); 
```

型号：store.js

```
App.Store = DS.Store.extend({
    revision: 12,
    adapter: DS.RESTAdapter.reopen({
        namespace: 'api/lifegadget'
    })
});

DS.RESTAdapter.registerTransform('raw', {
    deserialize: function(serialized) {
        return serialized;
    },  
    serialize: function(deserialized) {
        return deserialized;
    }
}); 
```

更新（添加车把）：

为了提供更多细节。以下是车把模板：

```
<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>Ember Starter Kit</title>
  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/bootstrap.css">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>

  <script type="text/x-handlebars">
    <div class="navbar">
      <div class="navbar-inner">
        <a class="brand" href="#">Admin</a>
        <ul class="nav">
            <li>{{#linkTo "dbx"}}DBX{{/linkTo}}</li>
            <li>{{#linkTo "postTypeMappings"}}Post Mappings{{/linkTo}}</li>
            <li>{{#linkTo "oauth"}}OAuth{{/linkTo}}</li>
            <li>{{#linkTo "about"}}About{{/linkTo}}</li>
        </ul>
      </div>
    </div>
    <div id="outlet-target">
    {{outlet}}
    </div>
  </script>

  <script type="text/x-handlebars" id="about">
  <div class='about'>
      Admin Screen
  </div>
  </script>

  <script type="text/x-handlebars" id="dbx">
  <div class='dbx'>
  <div id="dbx-table-pane" class="tabbable tabs-left">
    <ul class="nav nav-tabs">
        {{#each model}}
            <li>
                {{#linkTo "columns" this}}{{db_column}}{{/linkTo}}
            </li>
        {{/each}}
        <li id="add-table">
            <a href="#section-add-table" data-toggle="tab"><em>Add DBX Table</em></a>
        </li>       
    </ul>
    <div id="dbx-main" class="tab-content">
    {{outlet}}
    </div
  </div>

  </script>

  <script type="text/x-handlebars" id="columns">
      The columns are:
      <ul>
        {{#each model}}
        <li>{{name}}</li>
        {{/each}}
      </ul>
  </script> 

  <script src="js/libs/jquery-1.9.1.js"></script>
  <script src="js/libs/handlebars-1.0.0-rc.3.js"></script>
  <script src="js/libs/ember-1.0.0-rc.2.js"></script>
  <script src="js/libs/ember-data-12.js"></script>
  <script src="js/app.js"></script>
  <script src="js/router.js"></script>
  <script src="js/models/store.js"></script>
  <script src="js/models/dbx_table.js"></script>
  <script src="js/models/dbx_column.js"></script>

</body>
</html> 
```

更新 2：

我现在添加了一个演示问题的短视频：[https ://vimeo.com/63388787](https://vimeo.com/63388787)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:47:34.230

这看起来类似于这个问题：[How to show the string value of a non id field for a model in an ember.js route?](https://stackoverflow.com/questions/15375127/how-to-show-the-string-value-of-a-non-id-field-for-a-model-in-an-ember-js-route)

我认为您需要使用[`serialize`钩子](http://emberjs.com/api/classes/Ember.Route.html#method_serialize)`ColumnsRoute`来定义模型如何转换为 URL 动态段。

```
App.ColumnsRoute = Ember.Route.extend({
    model: function(table) {
        return App.DbxColumn.find(table);
    },
    //dbx_table matches the dynamic route name in your router, and I am assuming
    // you want to use the DbxColumn.name as the URL parameter
    serialize: function(model) {
      return {dbx_table: model.get('name')}; 
    }
}); 
```

当`model`直接导航到 URL 时，钩子处理将 URL 转换为模型对象，并且`serialize`当路由转换为使用已经存在的对象时，例如使用 when`transitionTo`或 a时，钩子用于构造 URL `{{#linkTo}}`。

# javascript - 幻灯片使用 MooTools JavaScript - 如何定位幻灯片以在浏览器窗口中重新缩放

> ID：15754133
> 
> 赞同：0
> 
> 时间：2013-04-02T00:27:34.210
> 
> 标签：javascript, css, image, mootools, slideshow

我正在尝试创建一个幻灯片，在下一个使用 Mootools Javascript 时淡化图像。幻灯片在浏览器中工作，但布局让我心痛。我将它放置在网页的某个区域，每当我在 IE 和 Google Chrome 中重新调整浏览器窗口的大小时，幻灯片都不会重新缩放。我不知道幻灯片图像是否太大，但在缩小时它似乎不适合窗口浏览器，它只是向左延伸。

这是 JSFiddle [http://jsfiddle.net/TE75y/10/](http://jsfiddle.net/TE75y/10/)中的代码（我是使用 JSFiddle 的新手，所以请原谅幻灯片图像的轻微错误）。

Javascript

```
<script type="text/javascript">

window.addEvent('domready',function() {
    /* settings */
    var showDuration = 3000;
    var container = $('banner-container');
    var images = container.getElements('img');
    var currentIndex = 0;
    var interval;
    /* opacity and fade */
    images.each(function(img,i){ 
        if(i > 0) {
            img.set('opacity',0);
        }
    });
    /* worker */
    var show = function() {
        images[currentIndex].fade('out');
        images[currentIndex = currentIndex < images.length - 1 ? currentIndex+1 : 0].fade('in');
    };
    /* start once the page is finished loading */
    window.addEvent('load',function(){
        interval = show.periodical(showDuration);
    });
});

 </script> 
```

的HTML

```
<div id="banner-container">

<div>
<img src="../images/banner5.jpg" width="1090" height="340" alt="banner 5"/>
</div>
<div>
<img src="../images/banner7.jpg" width="1090" height="340" alt="banner 7"/>
</div>
<div>
<img src="../images/creamfields.jpg" width="1090" height="340" alt="creamfields"/>
</div>
<div>
<img src="../images/Creamfileds-Banner.jpg" width="1090" height="340" alt="creamfield 2"/>
</div> 
```

CSS

```
#banner-container {
position: relative;
height: 340px;
width: 960px;
margin-left: 450px;
}
#banner-container > div {
position: absolute;
top: 55px;
left: 10px;
right: 10px;
bottom: 10px;
}

#banner-container img {
display: block;
position: absolute;
background-color: #F5F5F5;
border: 1px solid #FFFFFF;
-moz-box-shadow: 0 0 22px #000000;
-webkit-box-shadow: 0 0 22px #000000;
box-shadow: 0 0 22px #000000;
top: 0;
left: 0;
z-index: 1;
height: 340px;
width: 960px;
} 
```

我真的很感激一些有用的解决方案，因为我尝试了大多数不起作用的解决方案，我似乎无法理解如何解决它。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:09:34.017

我刚刚对您的代码进行了一些整理，现在可以使用了。

你应该学习如何使用 jsfiddle（它很简单）所以看看我的 jsfiddle 并学习。

[http://jsfiddle.net/87ZkC/](http://jsfiddle.net/87ZkC/)

放入html：

```
<div id="banner-container">

<div class="slides-wrapper">

<img src="http://routenote.com/blog/wp-content/uploads/2009/11/festival-crowd.jpg" width="1090" height="340" alt="banner 5"/> 

<img src="http://unfoldstudentlife.co.uk/wp-content/uploads/2012/07/Glastonbury-2005-music-festival-Pyramid-Stage-CL.jpg" width="1090" height="340" alt="banner 7"/> 
<img src="http://www.cable-london.com/images/uploads/content/Festival_Crowd1.jpeg" width="1090" height="340" alt="creamfields"/> 

<img src="http://huntingothers.com/wp-content/uploads/2011/07/festypic.jpg" width="1090" height="340" alt="creamfield 2"/> 
</div> 

</div> 
```

放入css：

```
#banner-container {
position: relative;
height: 340px;
width: 960px;
margin-left: 450px;
}
#banner-container > div {
position: absolute;
top: 55px;
left: 10px;
right: 10px;
bottom: 10px;
}

#banner-container img {
display: block;
position: absolute;
background-color: #F5F5F5;
border: 1px solid #FFFFFF;
-moz-box-shadow: 0 0 22px #000000;
-webkit-box-shadow: 0 0 22px #000000;
box-shadow: 0 0 22px #000000;
top: 0;
left: 0;
z-index: 1;
height: 340px;
width: 960px;
} 
```

放入js：

```
/* settings */
    var showDuration = 3000;
    var container = $('banner-container');
    var images = container.getElements('img');
    var currentIndex = 0;
    var interval;
    /* opacity and fade */
    images.each(function(img,i){ 
        if(i > 0) {
            img.set('opacity',0);
        }
    });
    /* worker */
    var show = function() {
        images[currentIndex].fade('out');
        images[currentIndex = currentIndex < images.length - 1 ? currentIndex+1 : 0].fade('in');
    };

var  interval = show.periodical(showDuration); 
```

此外，在左侧的“Frameworks & Extensions”部分包括 mootools。

# php - PHP 刷新页面

> ID：15754142
> 
> 赞同：5
> 
> 时间：2013-04-02T00:28:43.277
> 
> 标签：php

目前我对 GoDaddy 及其托管有疑问。PHP 脚本允许运行的最长时间设置为 120 秒 = 2 分钟。

有时当我运行我的脚本时，它需要超过 120 秒，有时需要 30 秒。

当它花费超过 120 秒时，我得到一个`Internal Server Error (500)`.

我的问题是，是否可以确定脚本运行时间是否为 110 秒，然后刷新页面，以免发生内部服务器错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T00:53:48.783

如果导致您的脚本长时间运行的原因是某种自包含的阻塞功能（如数据库查询），那么您有点搞砸了。

如果没有，假设你处于一个非常大的循环中，那么你自己做数学。

在脚本的最开始，保存当前时间：`$t_start = time();`

然后在你的循环的顶部，做一个`$runtime = time() - $t_start;`然后你知道你已经运行了多长时间，如果接近你的 120 限制，可以使用它来优雅地中断你的循环。

# php - 打印包含文件的文件名，不包含

> ID：15754144
> 
> 赞同：1
> 
> 时间：2013-04-02T00:29:05.147
> 
> 标签：php, httprequest, canonical-link, http-host

我有`example1.php`，`example2.php`包括`example3.php`. 在`example3.php`我有：

```
<link rel="canonical" href="http://website.com/<?php echo basename(__FILE__); ?>"> 
```

我想要的是让`example1.php`/依赖于文件`example2.php`，*包括*. 问题当然是输出。是否可以获得包含文件的文件名，而不是包含的文件名？`href` *`example3.php``__FILE__``example3.php`*

 *请不要建议使用 XSS 漏洞`SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI']`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T00:30:09.980

如果您不想使用任何 $_SERVER[''] 类型来获取文件名您可以使用

```
pathinfo(__FILE__, PATHINFO_BASENAME) 
```

只是得到你想要的文件名

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T01:09:31.137

（警告：这个技巧可能无法扩展，但在这种情况下会起作用。）

使用[get_included_files()](http://php.net/manual/en/function.get-included-files.php)返回的元素 0 。那将是启动链的原始文件

在 example3.php 中：

`$gif = get_included_files();`

那么你可以做

`<link rel="canonical" href="http://website.com/<?php echo basename($gif[0]); ?>">`*

# javascript - 删除字符串中的重复数字

> ID：15754145
> 
> 赞同：0
> 
> 时间：2013-04-02T00:29:07.463
> 
> 标签：javascript, regex

我有这个字符串

40993648 70381211 - PAOLA MILENA PEREZ SUAREZ40993648 70381211 - CARLOS FERNANDO PEREZ CADAVID

数字可以改变。

所以我想消除这个重复的数字

40993648 **70381211** - PAOLA MILENA PEREZ SUAREZ **40993648** 70381211 - CARLOS FERNANDO PEREZ CADAVID

含义：第二个数字序列（70378111）和第三个数字序列（40993648）。

我该怎么做？

注意：所有字符串每次都可以更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T01:36:59.933

我使用了 JQuery。下面的代码只是删除了第二个和第三个数字序列。我希望适合你。

```
<!DOCTYPE html>
<html>
    <head>
        <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    </head>

    <body>
        <p></p>
        <script>
        var str = "40993648 70381211 - PAOLA MILENA PEREZ SUAREZ 40993648 70381211 - CARLOS FERNANDO PEREZ CADAVID";
        var arr = str.split(' ');
        var new_arr = [];
        var counter = 0;

        $.map(arr, function(n, i) {
            if ( $.isNumeric(n) ) {
                if ( ( counter !== 1 ) && ( counter !== 2 ) ) {
                    new_arr.push(n);
                }
                counter++;
            } else {
                new_arr.push(n);
            }
            return n;
        });
        $('p').append(new_arr.join(' '));
        </script>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T02:24:08.823

您可以使用正则表达式来捕获*除*您不想要的数字之外的所有内容，然后将它们重新组合在一起。

[http://jsfiddle.net/9FCft/](http://jsfiddle.net/9FCft/)

**JavaScript**

```
var str = "40993648 70381211 - PAOLA MILENA PEREZ SUAREZ 40993648 70381211 - CARLOS FERNANDO"
var regex = /(\d+) \d+(.* )\d+ (\d+.*)/
var result = str.match(regex)

result.slice(1,result.length).join("")
/* 40993648 - PAOLA MILENA PEREZ SUAREZ 70381211 - CARLOS FERNANDO */ 
```

**编辑：**只需用逗号替换`var regex`.

[http://jsfiddle.net/9FCft/1/](http://jsfiddle.net/9FCft/1/)

**JavaScript**

```
var str = "40993648,70381211 - PAOLA MILENA PEREZ SUAREZ 40993648,70381211 - CARLOS FERNANDO PEREZ CADAVID"
var regex = /(\d+),\d+(.* )\d+,(\d+.*)/
var result = str.match(regex)

result.slice(1,result.length).join("")
/* 40993648 - PAOLA MILENA PEREZ SUAREZ 70381211 - CARLOS FERNANDO PEREZ CADAVID */ 
```

**资源：**

[http://www.regular-expressions.info](http://www.regular-expressions.info)是阅读一般正则表达式的好地方。大多数语言都支持正则表达式。

[https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)为 JavaScript 提供了很好的文档。

[RegexPal](http://regexpal.com)也非常适合在 JavaScript 中测试正则表达式。

# asp.net - 如何为可变单元格宽度设置固定表格边框宽度

> ID：15754147
> 
> 赞同：1
> 
> 时间：2013-04-02T00:29:08.047
> 
> 标签：asp.net, html, width, html-table, radiobuttonlist

我有几个 RadiobuttonLists 并且列表项的所有标签文本都有不同的宽度。例如

单选按钮列表 #1

```
(o) this is a really long label         [textbox]

(o) this is another really long label   [textbox] 
```

单选按钮列表 #2

```
(o) short label   [textbox]

(o) short         [textbox] 
```

如您所见，文本框自然地将它们的位置设置在每个单选按钮列表集的最长标签的固定位置内。这就是我想要的。（单选按钮列表和文本框都`<td>`位于`<tables>`.）

但是，我在所有 4 个边上的每张桌子周围都有一个边框（所以想象一下我上面示例下方的浅蓝色背景是边框）。

我需要所有表格的宽度相同，即宽度为 800 像素。

由于我不知道前 2 个的宽度，`<td>`我如何确保它们加起来为 800px？

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T01:51:55.997

您应该能够使用简单的 css 规则来控制它。您可以将表格宽度设置为 800px，然后设置输入字段的宽度，并让 td 填充到它们的最大宽度。看看这个小提琴的例子.. [http://jsfiddle.net/JLF2n/](http://jsfiddle.net/JLF2n/)

```
table{width:500px;background-color:#0af;border:2px solid #00f;padding:4px;}

td{border:2px solid #0f0;background-color:#afa;}
td+td{border:2px solid #ff0;background-color:#cc0;width:100px;}
input{width:100px;} 
```

希望这可以帮助

# r - 这个 R 循环函数有什么问题？

> ID：15754148
> 
> 赞同：0
> 
> 时间：2013-04-02T00:29:09.660
> 
> 标签：r, loops

我正在尝试运行这样的循环函数：

```
x <- c(1,2,3,4,7,8,9,10,13,14,15,16,19,20,22,23,24,26) 
n<-rep(NA,length(x))
for (ii in 1:length(x)){
  n[ii]<-subset(dat1, Plot==ii)
} 
```

但是，出现了错误消息：

```
There were 18 warnings (use warnings() to see them) 
```

我正在寻找的输出是来自 main data 的 18 个单独的数据 n1,n2,n3,n4,n7,...n24&n26 子集`dat1`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-03T20:32:32.593

我在理解你想要做什么时遇到了一点麻烦，但是如果你有一个 vector `dat1`，并且你想形成一个`n`包含 的第一个、第二个、...、第 26 个元素的新向量，`dat1`那么在R.尝试：

```
> dat1 <- 1:60
> x <- c(1,2,3,4,7,8,9,10,13,14,15,16,19,20,22,23,24,26)
> n <- dat1[x]
> n
 [1]  1  2  3  4  7  8  9 10 13 14 15 16 19 20 22 23 24 26 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-03T20:44:29.220

如果您要做的是创建一个 data.frames 的“向量”，每个都对应于`Plot`变量的某个级别，那么您应该使用 a `list`，而不是 a `vector`。

```
x <- c(1,2,3,4,7,8,9,10,13,14,15,16,19,20,22,23,24,26) 
n <- list()
length(n) <- length(x)

for (ii in 1:length(x)){
  n[[ii]] <- subset(dat1, Plot==ii)
} 
```

# android - AsyncTask 的 onPostExecute 内的 AsyncTask？

> ID：15754152
> 
> 赞同：1
> 
> 时间：2013-04-02T00:29:26.357
> 
> 标签：android, android-asynctask

在 Android 活动中，我正在 onCreate 方法中执行 AsyncTask。我应该在 AsyncTask 的 onPostExecute 中还是在 OnCreate 方法中声明 UI 按钮的处理函数？我可以在此按钮 onClick 处理程序中创建另一个 AsyncTask 吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T01:08:22.837

一点代码将有助于更好地回答您。但是对构造函数或`execute()`方法的调用可以在其中完成，`onCreate()`但实际的类应该在单独的文件中创建，或者作为你的内部类创建`Activity`，这取决于你的需要。您正在解释的内容可能会起作用，但我不会将`onClick`事件放入您的`AsyncTask`. 如果没有别的，为了可读性。此外，在我看来，这可能会使它更容易出错。`AsyncTask`您可能需要for之外的局部变量，`onClick()`这样可以减少范围问题。`AsyncTask`从内部调用 an`onClick()`通常可以。我希望这是有道理的，但如果您需要更多说明，请随时询问

# javascript - 在 javascript 中创建文件

> ID：15754153
> 
> 赞同：0
> 
> 时间：2013-04-02T00:29:35.700
> 
> 标签：javascript, html

小问题：

是否可以使用 JavaScript 创建新文件？我正在寻找类似 PHP 函数`fopen`和`fput`. 这完全不可能吗？那么 JavaScript 函数`OpenTextFile()`呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T00:38:33.157

显然只有 HTML5 才有可能。

[http://www.htmlgoodies.com/beyond/javascript/read-text-files-using-the-javascript-filereader.html#fbid=exNerx1ZaKk](http://www.htmlgoodies.com/beyond/javascript/read-text-files-using-the-javascript-filereader.html#fbid=exNerx1ZaKk)

这是创建文本文件：

[使用 javascript 创建一个文本文件](https://stackoverflow.com/questions/5403912/create-a-text-file-using-javascript)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T01:06:30.080

这里有一些资源可以帮助您入门。

**写入文件/目录：** [http ://www.html5rocks.com/en/tutorials/file/filesystem/](http://www.html5rocks.com/en/tutorials/file/filesystem/)

**下载文件：** [http ://html5-demos.appspot.com/static/a.download.html](http://html5-demos.appspot.com/static/a.download.html)

**下载压缩包：** [http ://stuk.github.com/jszip/](http://stuk.github.com/jszip/)

**读取文件**：[http ://www.html5rocks.com/en/tutorials/file/dndfiles/](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

***前 2 名仅适用于 chrome。***

*jszip*具有混合支持，所有现代浏览器都支持使用 HTML5 读取文件。

可以将数据设置为链接的 href。但是用户必须右键单击 > 将链接另存为并添加扩展名。

```
<a id="test" target="_blank">click me</a>

document.getElementById('test').href = "data:text/json;charset=utf-8," + escape("Your String goes here"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T00:32:17.220

在浏览器中，没有。服务器端（如在 node.js 中），是的。

没有 js 函数可以从文件系统打开文本文件，但是您可以通过 Ajax 请求获取服务器上文本文件的内容。

# 3d - Kinect 点云曲面墙

> ID：15754157
> 
> 赞同：4
> 
> 时间：2013-04-02T00:30:02.337
> 
> 标签：3d, kinect, point-clouds

在我的 Kinect 项目中，我正在尝试从 Kinect 传感器创建点云。显示 3D 点时，我得到了一个倾斜的模型，其中墙壁和地板是弯曲的。

编辑：我正在使用微软的 Kinect SDK。这个点云是在传感器离墙一两英尺远的情况下生成的。

![Kinect 示例](https://i.stack.imgur.com/omFvV.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T23:17:54.963

我找到了答案。我使用的是深度图像，它不是真实世界的坐标。我使用 Kinect SDK 中的 CoordinateMapper 类将深度图像转换为 SkeletonPoints，这是真实世界的坐标。

它会是这样的：

```
using (DepthImageFrame depthFrame = e.OpenDepthImageFrame()) {
  DepthImagePixel[] depth = new DepthImagePixel[depthFrame.PixelDataLength];
  SkeletonPoint[] realPoints = new SkeletonPoint[depth.Length];

  depthFrame.CopyDepthImagePixelDataTo(depth);

  CoordinateMapper mapper = new CoordinateMapper(sensor);
  mapper.MapDepthFrameToSkeletonFrame(DEPTH_FORMAT, depth, realPoints);
} 
```

# ruby - 如何解压缩数组？

> ID：15754158
> 
> 赞同：31
> 
> 时间：2013-04-02T00:30:03.370
> 
> 标签：ruby, arrays

如何在 Ruby 中解压缩数组，就像 Python 中的这个示例：

```
>>> x = [1, 2, 3]
>>> y = [4, 5, 6]
>>> zipped = zip(x, y)
>>> zipped
[(1, 4), (2, 5), (3, 6)]
>>> x2, y2 = zip(*zipped)
>>> x == list(x2) and y == list(y2) 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-04-02T00:36:52.083

使用[`transpose`](http://apidock.com/ruby/v1_9_3_392/Array/transpose)：

```
> zipped = x.zip(y)
=> [[1, 4], [2, 5], [3, 6]]
> x2, y2 = zipped.transpose
> x2
=> [1, 2, 3]
> y2
=> [4, 5, 6] 
```

# php - something()->Something 总是有效的 php 吗？这个好用吗？

> ID：15754169
> 
> 赞同：-3
> 
> 时间：2013-04-02T00:30:52.150
> 
> 标签：php, function

我看到的例子首先将它放入一个变量中。它提取了大量数据。我猜是一个对象。但我只需要一小块。

```
$data = something();
echo $data->Something; 
```

我只是尝试过，这从未在任何 php 代码中看到过，只是尝试过。即使在ond php版本中，这也总是有效吗？没有人这样做是有原因的，还是我没有看到足够的代码？

```
echo something()->Something; 
```

它工作正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T00:50:55.343

自 PHP 引入类（PHP 版本 5.0.0）以来，支持从函数的返回引用对象属性。

这可以通过以下简单的测试用例来证明：

```
class Something {
    public $foo;
}
function get() {
    $obj = new Something;
    $obj->foo = 'bar';
    return $obj;
}

echo get()->foo; 
```

这将在每个 PHP 版本 >= 5.0.0 上[打印。`bar`](http://3v4l.org/8mRDi)

# javascript - 重置骨干集合的“插入排序顺序”

> ID：15754173
> 
> 赞同：0
> 
> 时间：2013-04-02T00:31:18.193
> 
> 标签：javascript, backbone.js

我在运行时在我的骨干集合上设置和取消设置比较器函数，我想知道是否有办法将集合“重置”为其原始插入顺序。例如...

```
var Mod = Backbone.Model.extend({});
var Col = Backbone.Collection.extend({ model: Mod });
var col = new Col([
    { name: "andy" },
    { name: "chad" },
    { name: "ashley" },
    { name: "louis" }
]);

col.comparator = function(p1, p2) {
    return p1.get('name') < p2.get('name') ? -1
        : (p1.get('name') > p2.get('name') ? 1 : 0 );
}
col.sort();

col.comparator = false;

// throws, was hoping this would return 
// the collection to insertion order
col.sort(); 
```

请忽略我在此处设置的比较器功能可以替换为`sortBy`实现的事实。这只是一个人为的例子。从 Backbone 源代码中我很清楚，如果您尝试对没有比较器的集合进行排序，它将抛出：

```
// ... from BB source ...
sort: function(options) {
    if (!this.comparator) throw new Error('Cannot sort a set without a comparator');
    // ... 
```

有没有办法将集合的顺序返回到插入顺序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T04:02:55.310

您可以将原件保存在收藏夹中。就像是：

```
col.originalComp = col.comparator;
col.comparator = function(){};
...Do Stuff ...
col.comparator = col.originalComp; //Back to original 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T08:42:42.937

不，没有。尽管您可以轻松地保留一些数组来保留此信息以供以后使用。重新定义 add 方法，“破解”解析方法……
但是，遗憾的是，拥有一个方法是没有意义的。

# android - Google Maps API v2 - 我无法在我的应用中显示地图

> ID：15754176
> 
> 赞同：2
> 
> 时间：2013-04-02T00:31:33.087
> 
> 标签：android, google-maps, google-maps-api-2

我是 Google Maps API 的新手，我正在尝试在我的应用程序中显示地图。每次尝试都失败了，我不明白为什么。

这里是logcat。

```
<!-- language: c# --> 04-02 02:03:21.259: W/dalvikvm(24325): VFY: unable to resolve virtual method 3693: Lcom/kurtis/myapp/Mapexample;.getFragmentManager ()Landroid/app/FragmentManager;
04-02 02:03:21.269: W/dalvikvm(24325): VFY: unable to resolve virtual method 3693: Lcom/kurtis/myapp/Mapexample;.getFragmentManager ()Landroid/app/FragmentManager;
04-02 02:03:21.279: W/dalvikvm(24325): VFY: unable to resolve instance field 23
04-02 02:03:21.419: W/dalvikvm(24325): Unable to resolve superclass of Lmaps/p/s; (425)
04-02 02:03:21.429: W/dalvikvm(24325): Link of class 'Lmaps/p/s;' failed
04-02 02:03:21.429: W/dalvikvm(24325): Unable to resolve superclass of Lmaps/y/bo; (3818)
04-02 02:03:21.429: W/dalvikvm(24325): Link of class 'Lmaps/y/bo;' failed
04-02 02:03:21.429: W/dalvikvm(24325): Unable to resolve superclass of Lmaps/i/k; (4206)
04-02 02:03:21.429: W/dalvikvm(24325): Link of class 'Lmaps/i/k;' failed
04-02 02:03:21.429: E/dalvikvm(24325): Could not find class 'maps.i.k', referenced from method maps.z.ag.a
04-02 02:03:21.429: W/dalvikvm(24325): VFY: unable to resolve new-instance 3538 (Lmaps/i/k;) in Lmaps/z/ag;
04-02 02:03:21.979: W/dalvikvm(24325): threadid=1: thread exiting with uncaught exception (group=0x40174560)
04-02 02:03:21.979: E/AndroidRuntime(24325): FATAL EXCEPTION: main
04-02 02:03:21.979: E/AndroidRuntime(24325): java.lang.NoSuchMethodError: com.kurtis.myapp.Mapexample.getFragmentManager
04-02 02:03:21.979: E/AndroidRuntime(24325):    at com.kurtis.myapp.Mapexample.onCreate(Mapexample.java:26)
04-02 02:03:21.979: E/AndroidRuntime(24325):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-02 02:03:21.979: E/AndroidRuntime(24325):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1623)
04-02 02:03:21.979: E/AndroidRuntime(24325):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1675)
04-02 02:03:21.979: E/AndroidRuntime(24325):    at android.app.ActivityThread.access$1500(ActivityThread.java:121)
04-02 02:03:21.979: E/AndroidRuntime(24325):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:943)
04-02 02:03:21.979: E/AndroidRuntime(24325):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-02 02:03:21.979: E/AndroidRuntime(24325):    at android.os.Looper.loop(Looper.java:130)
04-02 02:03:21.979: E/AndroidRuntime(24325):    at android.app.ActivityThread.main(ActivityThread.java:3768)
04-02 02:03:21.979: E/AndroidRuntime(24325):    at java.lang.reflect.Method.invokeNative(Native Method)
04-02 02:03:21.979: E/AndroidRuntime(24325):    at java.lang.reflect.Method.invoke(Method.java:507)
04-02 02:03:21.979: E/AndroidRuntime(24325):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:878)
04-02 02:03:21.979: E/AndroidRuntime(24325):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:636)
04-02 02:03:21.979: E/AndroidRuntime(24325):    at dalvik.system.NativeStart.main(Native Method) 
```

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.android"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="9"
                android:targetSdkVersion="16" />
  <uses-permission android:name="android.permission.INTERNET" />
  <uses-permission android:name="android.permission.CAMERA" />
  <uses-feature android:name="android.hardware.camera" 
                android:required="false"/>
  <uses-feature android:name="android.hardware.camera.any"
                android:required="false" />

  <permission android:name="com.kurtis.myapp.permission.MAPS_RECEIVE" android:protectionLevel="signature"/>
  <uses-permission android:name="com.kurtis.myapp.permission.MAPS_RECEIVE"/>
  <uses-permission android:name="android.permission.INTERNET" />
  <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
  <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
  <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
  <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
  <uses-feature
    android:glEsVersion="0x00020000"
    android:required="true"/>

    <application
        android:icon="@drawable/icona"
        android:label="@string/app_name" >
        <activity
            android:name="com.kurtis.myapp.Home"
            android:label="@string/app_name"
            android:screenOrientation="portrait" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity
            android:name="com.kurtis.myapp.Mapexample"
            android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
            android:screenOrientation="portrait" >
        </activity>

        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="AIzaXXXXXXXXXXXXXXXXXXXXXXXXXq9M" />
    </application>

</manifest> 
```

活动：

```
package com.kurtis.myapp;

import com.example.android.R;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.MapFragment;
import com.google.android.gms.maps.SupportMapFragment;

import android.annotation.SuppressLint;
import android.annotation.TargetApi;
import android.os.Build;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;

@SuppressLint("NewApi")
@TargetApi(Build.VERSION_CODES.HONEYCOMB)
public class Mapexample extends FragmentActivity {
    private GoogleMap mMap;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mapexample);

        mMap = ((MapFragment) getFragmentManager().findFragmentById(R.id.map)).getMap();
    }

    private void setUpMapIfNeeded() {
        // Do a null check to confirm that we have not already instantiated the map.
        if (mMap == null) {
            mMap = ((MapFragment) getFragmentManager().findFragmentById(R.id.map)).getMap();
            // Check if we were successful in obtaining the map.
            if (mMap != null) {
                // The Map is verified. It is now safe to manipulate the map.

            }
        }
    }
} 
```

...和布局：

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
 android:id="@+id/map"
 android:layout_width="match_parent"
 android:layout_height="match_parent"
 class="com.google.android.gms.maps.SupportMapFragment"/> 
```

你有解决这个问题的想法吗？

PS对不起我的英语不好...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T07:06:30.217

因为您编写了面向 SDK 9 的应用程序，并且`SupportMapFragment`在您的 XML 文件中使用（应该如此）。然后你必须使用`getSupportFragmentManager`和`SupportMapFragment`方法。

像那样：

```
map = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map)).getMap(); 
```

而不是这个：

```
mMap = ((MapFragment) getFragmentManager().findFragmentById(R.id.map)).getMap(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T03:38:17.213

看起来它无法找到地图 API。您是否下载并配置了 Google Play 服务 SDK：[https](https://developers.google.com/maps/documentation/android/start#the_google_maps_api_key) ://developers.google.com/maps/documentation/android/start#the_google_maps_api_key ？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T06:21:04.220

使用`getSupportFragmentManager()`而不是`getFragmentManager()`. 后者仅在 Honecomb 之后定义（并且您的 minsdk 是 GingerBread），而前者在支持库中定义（我看到您在扩展时使用它`FragmentActivity`）。

这就是为什么您必须添加`@TargetApi`和`@SupressLint`... ADT 警告您并且您将其静音... =) 您应该删除它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-11T11:06:59.300

在 xml 文件中使用 android:name="com.google.android.gms.maps.SupportMapFragment" 而不是 class="com.google.android.gms.maps.SupportMapFragment" 让我知道它正在工作

# ruby-on-rails - 在 rails 中使用 mustache 视图模板的最简单方法是什么？

> ID：15754177
> 
> 赞同：5
> 
> 时间：2013-04-02T00:31:35.197
> 
> 标签：ruby-on-rails, gem, mustache

我可以做：

```
render :text => Mustache.render(view_template_in_a_string, object_hash) 
```

在我的控制器中，但将 view_template_in_a_string 放在 view/controllername/action.mustache.html 下的 viewname.mustache.html 文件中似乎更传统，就像我使用 action.html.erb 一样

目前我使用

```
gem 'mustache' 
```

满足我的小胡子需求

如何像使用 erb 一样使用小胡子视图

* * *

我知道小胡子是没有逻辑的，我的观点不需要逻辑

* * *

我目前的黑客：

```
# controllers/thing_controller.rb
def some_action
    hash = {:name => 'a name!!'}
    vw = File.read('./app/views/'+params[:controller]+'/'+params[:action]+'.html.mustache') || ""
    render :text => Mustache.render(vw, hash), :layout => true
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-08-13T19:07:24.067

自原始解决方案 mustache-rails 不复存在以来的更新答案。

宝石是：

[https://github.com/agoragames/stache](https://github.com/agoragames/stache)

还有一个多余但简单的示例来说明如何在我们的 rails 项目中使用 stache，我们将开始一个 Noises 演示应用程序。

首先，我们将把 the`mustache`和`stache`gem 添加到我们的 Gemfile 中并运行`bundle install`。

然后在`config/application.rb`我们需要告诉`stache`我们使用`mustache`（另一个可用的选项是`handlebars`；另外，这个和其他配置选项可以在他们的[github 页面](https://github.com/agoragames/stache)上找到）。

```
Stache.configure do |config|
  config.use :mustache
end 
```

这是示例目录结构，其中包含我们应用程序的一些示例文件：

```
app/
  controllers/
    noises_controller.rb
    models/
      noise.rb
  templates/ 
    noises/
      animal.mustache
  views/ 
    noises/
      animal.rb 
```

在`controllers/noises_controller.rb`

```
class NoisesController < ApplicationController
  def animal
  end
end 
```

在`models/noise.rb`

```
class Noise < ActiveRecord::Base 
  def self.dog 
    "ar roof"
  end

  def self.sheep 
    "baa"
  end 

  def self.bullfrog 
    "borborygmus"
  end 
end 
```

在`templates/noises/animal.mustache`

```
<p>This is what a dog sounds like: {{ dog }}</p>
<p>This is what a sheep sounds like: {{ sheep }}</p>
<p>And bullfrogs can sound like: {{ bullfrog }}</p> 
```

在`views/noises/animal.rb`

```
module Noises 
  class Animal < Stache::Mustache::View 
    def dog 
      Noise.dog
    end 

    def sheep 
      Noise.sheep 
    end 

    def bullfrog 
      Noise.bullfrog 
    end 
  end
end 
```

希望这能阐明一个示例，说明人们如何使用`stache`并`mustache`在 Rails 应用程序中提供正确的视图模板。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T08:44:23.727

只需使用这个宝石：

[https://github.com/josh/mustache-rails](https://github.com/josh/mustache-rails)

这样您就可以轻松配置 Rails 应用程序以提供正确的视图模板，这样您就不再需要 hack。

# artificial-intelligence - SOM（自组织地图）和 K-Means 有什么区别？

> ID：15754178
> 
> 赞同：14
> 
> 时间：2013-04-02T00:31:36.530
> 
> 标签：artificial-intelligence, k-means, som, self-organizing-maps

stackoverflow中只有一个与此相关的问题，更多的是关于哪个更好。我只是不明白其中的区别。我的意思是它们都使用随机分配给集群的向量，它们都使用不同集群的质心以确定获胜的输出节点。我的意思是，区别到底在哪里？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-02T06:19:45.507

在 K-means 中，节点（质心）彼此独立。获胜的节点有机会适应每个自我，而且只有那个。在 SOM 中，节点（质心）被放置在网格上，因此每个节点都被认为有一些邻居，与它们相邻或靠近它的节点代表它们在网格上的位置。因此，获胜节点不仅会适应自己，还会导致其邻居发生变化。K-Means 可以被认为是 SOM 的一种特殊情况，在修改质心向量时没有考虑邻居。更多信息，你仍然可以谷歌它....

# javascript - 在点击 UIWebView 时执行 JavaScript 命令

> ID：15754179
> 
> 赞同：0
> 
> 时间：2013-04-02T00:31:44.997
> 
> 标签：javascript, iphone, ios, uiwebview, uiwebviewdelegate

当我点击按钮或菜单进入网络时，我需要获取或捕获执行的 JavaScript 命令`UIWebView`

我不知道哪个功能使用站点来上传文件，所以我需要捕获它。

这样做的目的是通过点击`UIButton`. JS 执行到`UIWebView`with`[webView stringByEvaluatingJavaScriptFromString:@"js_code_here"];`

有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T05:01:33.600

试试这个在 xcode 项目中调用 js 文件。，

```
- (void)markHighlightedString
{
    // The JS File
    NSString *filePath  = [[NSBundle mainBundle] pathForResource:@"HighlightedString" ofType:@"js" inDirectory:@""]; // your js file name
    NSData *fileData    = [NSData dataWithContentsOfFile:filePath];
    NSString *jsString  = [[NSMutableString alloc] initWithData:fileData encoding:NSUTF8StringEncoding];
    [webview stringByEvaluatingJavaScriptFromString:jsString];

    // The JS Function
    NSString *startSearch   = [NSString stringWithFormat:@"stylizeHighlightedString()"]; // your js function which you want to call
    [webview stringByEvaluatingJavaScriptFromString:startSearch];
} 
```

希望这会有所帮助，谢谢。快乐编码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T00:57:57.210

如果您知道与按钮/菜单关联的元素 id 或类，则可以解析 HTML。

# javascript - 为什么使用 jquery 来修改样式属性？

> ID：15754181
> 
> 赞同：-2
> 
> 时间：2013-04-02T00:32:03.650
> 
> 标签：javascript, jquery, stylesheet

当涉及到修改格式和布局（样式表）时，为什么 jquery 比普通 javascript 更有利？

普通的 javascript 已经提供了诸如“getelementsbyclassname”或“getelementsbyid”之类的函数来获取元素对象的句柄，那么为什么要使用 jquery 接口呢？

我读过它“更容易”......究竟如何？

“更高效”？但它增加了另一层抽象......

确保库很容易下载，因为它是 CDN 版的，但我想要一些更简约的东西。

### 编辑（在听到 ohcibi 的回应后）：

另一个问题：如果我只关心修改样式表，sizzle.js 会是一个更简约的选择吗？它的实现（就其范围而言）是否与 jQuery 一样完整？它执行得更快吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T00:35:05.747

简而言之：跨浏览器兼容性、易于编写/阅读、更高效的编码、无处不在的使用。

此外，它不会取代所有 javascript。如果您愿意，或者对于浏览器普遍识别（或多或少）的一些简单事物，您可以使用 javascript。

重申一下：更有效的编码。

对于 jquery 已经为您所做的所有不同浏览器怪癖，用纯 js 编写所有内容并不是更简约。但是，如果您有时间，请随意这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T00:35:49.657

`getElementsByClassname`等等不提供完整的 CSS3 特色选择器。另外，它们不是 100% 兼容浏览器的。

如果您只对这些选择器感兴趣。试试[sizzle.js](http://sizzlejs.com)，它是 jQuery 用来选择元素的。

# c++ - 性能：重载 [] 和对函数的调用

> ID：15754183
> 
> 赞同：0
> 
> 时间：2013-04-02T00:32:14.247
> 
> 标签：c++

我最初对调用重载 [] 以获取成员数据和调用 getData(index) 之类的函数的性能的想法是相同的。由于调用 [] 本质上是一个函数调用。假设它们获取相同的数据，如 values[1] 和 values.getData(1) 将返回相同的值。我错了吗？如果它们执行相同，在这种情况下使用 [] 是否有非性能优势？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T00:43:34.803

它们是相同的，在引擎盖下。重载运算符只是函数调用的独特语法。唯一改变的是调用它的代码的外观。

您甚至可以强制操作员调用看起来像函数。

```
values[1] 
```

也可以写成

```
values.operator[]( 1 )
//     ^^^^^^^^^^ This is effectively the name of your function. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T00:43:01.173

正如您在问题中提到的那样，两者都是同一件事。重载只是函数调用。没有性能增益。

然而，`operator[]`从历史上看，这意味着（或预计会有）内存中存在连续的内部数据表示形式，或者更普遍地用作容器类数据结构的索引。因此，它通常在向量、数组、矩阵等类中实现。

# facebook - 将 Facebook 照片放在我的网页上

> ID：15754185
> 
> 赞同：-1
> 
> 时间：2013-04-02T00:32:17.177
> 
> 标签：facebook, photos

我已经找了几个月了，我只是厌倦了寻找......

我有一个个人 facebook 帐户。它不是商业帐户或粉丝帐户或类似的东西。我想自动将照片放在我的个人网站上。这就是我发现的：数百个关于它有多简单的示例，但它们仅适用于粉丝帐户。一些人声称，如果我花几年时间制作一个 Horoku 应用程序，我*也许*可以让它工作。许多关于尝试过这个的人的博客，放弃了，安装了 Wordpress 并将所有内容转换为 Wordpress，尝试了所有 Facebook 照片小部件，却发现它们都不起作用，最后放弃了。

那么......是否有任何人编写了一些代码来获取与公众共享的所有相册的名称以及与个人 Facebook 帐户与公众共享的所有图片的示例？另外 - 这不是对小部件或应用程序的请求。我之前两次问过这个问题，两次都立即关闭，因为第一个嗡嗡声说我要的是 Wordpress 小部件或应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T02:28:46.910

### 最简单的方法：

*   [在IFTTT](http://ifttt.com/)上获得一个帐户并设置一个食谱，将照片上传到您的个人 Facebook 帐户并将它们发布到您可以访问或嵌入您网站的公共位置。

### 第二种最简单的方法：

*   [创建一个](https://www.facebook.com/pages/create/)只有您可以发布到的 Facebook 页面。
*   与该页面共享您的照片。
*   查询`https://graph.facebook.com/PAGE_ID/photos`（不需要访问令牌）并解析返回的 json 以显示照片（或使用任意数量的教程/准备好的脚本来显示照片）。

### 完全符合您要求的方式：

*   [创建一个 Facebook 应用程序](https://developers.facebook.com/apps)（不是 Heroku 应用程序）。
*   使用您的网站信息为“使用 Facebook 登录的网站”配置应用程序。
*   仅使用权限[登录该应用程序](https://developers.facebook.com/docs/concepts/login/)`user_photos`并存储您获得的短期访问令牌。
*   [扩展短期访问令牌](https://developers.facebook.com/docs/howtos/login/extending-tokens/)并存储它。
*   使用此访问令牌查询`https://graph.facebook.com/me/albums?access_token=ACCESS_TOKEN`，找到`id`您要分享的相册。
*   编写脚本以查询`https://graph.facebook.com/ALBUM_ID/photos.fields(source)&access_token=ACCESS_TOKEN`和解析返回的 json 对象，以使用每个`source`对象中返回的 url 作为`src`for`<img>`标签来显示这些照片。
*   编写一个提醒系统，让您至少每 60 天或到期时更新您存储的访问令牌一次。

# php - OOP PHP - 访问实例和方法

> ID：15754190
> 
> 赞同：0
> 
> 时间：2013-04-02T00:32:36.113
> 
> 标签：php, oop

我试图找到我的问题的解决方案，但没有成功。例如：

*   我有一个主要课程：

    ```
     class System {  
          public function loadClass($instance, $name)
          {
            $this->$instance = new $name;
          } 
        } 
    ```

而且我想要，我可以简单地将另一个类加载到名为 System 的主类中。

```
 <?php
          $system = new System;
          $system->loadClass('db', 'database');
    ?> 
```

它正在工作..但是我需要从任何已加载的类中访问已加载类的所有方法（和实例），如下所示：

```
 <?php   
        class System {  
          public function loadClass($instance, $name)
          {
            $this->$instance = new $name;
          } 

          public function run()
          {
            echo $this->subA->methodA();
            echo $this->subB->methodB();      
          }
        }

        class subClassA extends System {
          function __construct()
          {
            echo $this->subB->methodB();    
          }

          public function methodA()
          {
            return 'okA';
          }
        }

        class subClassB extends System {
          function __construct()
          {
            echo $this->subA->methodA();
          }

          public function methodB()
          {
            return 'okB';
          }
        }

        $system = new System;

        $system->loadClass('subA', 'subClassA');
        $system->loadClass('subB', 'subClassB');

        $system->run();
?> 
```

不使用静态方法和实例怎么可能？

# java - 自定义构造函数作为一个简单的方法

> ID：15754192
> 
> 赞同：0
> 
> 时间：2013-04-02T00:32:39.743
> 
> 标签：java, android

我有一堂课叫`Screen`. 每次我想在我的应用程序中设置一个新屏幕时，我都会调用以下方法：

```
public void setScreen(Screen screen) {
        if(this.screen != null) {
            this.screen.pause();
            this.screen.onDispose();

        }
        this.getGraphics().drawColor(Color.BLACK); // Clear virtual framebuffer
        this.screen = screen;
        this.screen.load();
        this.screen.resume(); 
        WSLog.e(Game.GAME_ENGINE_TAG, this, "New Screen has been created");
} 
```

现在我的问题是：是否可以用方法替换构造函数的函数`load`？

我这样做是因为在设置新屏幕时，必须先处理当前屏幕，然后才能加载新屏幕，但是如果我在构造函数中完成所有加载，那么新屏幕将首先初始化，然后当前的将被处置（这并不理想）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T00:49:35.067

这是完全有效的，你根本没有替换构造函数。a 的主要作用`constructor`是初始化变量，使对象处于有效状态以供使用。然而，这并不意味着对象必须立即履行其所有职责。假设你设计了一个`Engine`类。调用它的构造函数并不意味着立即启动引擎。`start`在创建对象实例后拥有允许启动引擎的方法并没有错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T00:56:42.403

这绝对是允许的。
在 C# 中使用窗口窗体时，有一个名为 InitializeComponents() 的方法，用于设置窗体的所有对象和事件。您的方案是有效的，因为就像您说的那样，有时您不想这样做。

构造函数至少用于初始化变量和/或分配空间。不要害怕将更多代码放入其他方法中，尤其是当您可以设想不想使用一段代码的时候。它使您的程序更加灵活。

祝你好运 ：）

# html - 如何让 xsl:fo 允许表格单元格取空块并打印多行

> ID：15754193
> 
> 赞同：3
> 
> 时间：2013-04-02T00:32:42.590
> 
> 标签：html, xml, xslt, xsl-fo, apache-fop

我有一行，其中一列有一个数据列表。假设我有一行，第三列有 0 行或更多行。`<xsl:for-each select="./parts">`由于某种原因，我的代码似乎不起作用。我不确定如何实现它。我收到此错误。

> org.apache.fop.events.LoggingEventListener processEvent 以下功能尚未由 Apache FOP 实现：table-layout="auto" (on fo:table) (没有可用的上下文信息) [4/1/13 19: 14:38:002 CDT] 00000053 SystemErr R org.apache.fop.fo.ValidationException：“fo:table-cell”缺少子元素。所需的内容模型：marker* (%block;)+（没有可用的上下文信息）

我有这个代码，这不起作用。

```
<xsl:for-each select="./List">
  <fo:table-row>
    <fo:table-cell border="solid 1px" text-align="center">
      <fo:block font-size="8pt"><xsl:value-of select="group" /></fo:block>
    <fo:table-cell>
  <fo:table-cell border="solid 1px" text-align="left">
    <xsl:for-each select="./parts">
      <fo:block font-size="8pt"><xsl:value-of select="partNumber" /><fo:leader />
      </fo:block>
    </xsl:for-each>
  </fo:table-cell>
 </fo:table-row>
</xsl:for-each> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-10T16:31:31.243

尝试删除严格的验证：

`fopFactory.setStrictValidation(false);`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-01T16:14:00.823

好的，所以你得到的问题来自这个块。

```
<fo:table-cell border="solid 1px" text-align="left">
    <xsl:for-each select="./parts">
      <fo:block font-size="8pt"><xsl:value-of select="partNumber" /><fo:leader />
      </fo:block>
    </xsl:for-each>
  </fo:table-cell> 
```

正如我相信其他人已经指出的那样，如果您有 0 个零件元素，那么您的表格单元格就没有块子元素。在我看来，有两个简单的解决方法。首先，尝试将您的 for-each 语句包装在另一个块元素中，就像这样。

```
<fo:table-cell border="solid 1px" text-align="left">
<fo:block>
    <xsl:for-each select="./parts">
      <fo:block font-size="8pt"><xsl:value-of select="partNumber" /><fo:leader />
      </fo:block>
    </xsl:for-each>
<fo:block>
  </fo:table-cell> 
```

如果您发现它对您的格式有不良影响，您可以使用填充和其他属性，以便添加的块仍然保留您的对齐方式。这肯定会解决您的问题。一种稍微复杂一点的替代方法是使用 xsl:choose 语句来测试在尝试迭代它们之前是否至少有一个部分，否则它会插入一个空块。

```
<fo:table-cell border="solid 1px" text-align="left">
<xsl:choose>
<xsl:when test="count(./parts) &gt; 0">
    <xsl:for-each select="./parts">
      <fo:block font-size="8pt"><xsl:value-of select="partNumber" /><fo:leader />
      </fo:block>
    </xsl:for-each>
</xsl:when>
<xsl:otherwise>
<fo:block>&#160;</fo:block>
</xsl:otherwise>
</xsl:choose>
  </fo:table-cell> 
```

虽然这更长，但它也更具可扩展性，例如，如果将来您希望它在有数据的情况下显示部件列表，并且如果不显示另一个值（也可能存在也可能不存在），您可以简单地添加另一个 when 块来减轻逻辑中的变化。

最后一点，我在 else 语句中放入的块 contains ，它只是单个空格的编码。如果您希望您的“空”块仍然保留一行空间（即，如果没有文本内容，则阻止它折叠），您可以使用空白来防止块折叠，否则，如果您不关心它是否崩溃，只需删除空白即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-07T08:06:19.493

如果您查看[fo:table-cell 的 W3 XSL-FO 规范，](http://www.w3.org/TR/xsl/#fo_table-cell)您将看到

```
Contents:

(%block;)+ 
```

+ 表示“一个或多个”，即强制

并且 %block 实体由 W3[定义如下](http://www.w3.org/TR/xsl/#block.fo.list)

```
The parameter entity, "%block;" in the content models below, contains the following formatting objects:

     block
     block-container
     table-and-caption
     table
     list-block 
```

所以 Navin Rawat 是对的，你需要确保你的牢房里有东西。

/ 科尔姆

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-29T07:01:01.043

有时您的代码似乎：

```
<xsl:for-each select="./parts">
   <fo:block font-size="8pt"><xsl:value-of select="partNumber" /><fo:leader />
    </fo:block>
 </xsl:for-each> 
```

不返回任何东西。您需要将其放入变量中并检查它。如果没有值则置空以避免此错误。

# android - Android - 每 1 分钟吐司消息

> ID：15754195
> 
> 赞同：2
> 
> 时间：2013-04-02T00:32:52.607
> 
> 标签：android, service, android-service, alarmmanager, toast

我正在尝试在 Android 中实现一项服务，该服务在 Android 中每 1 分钟显示一条 toast 消息。我是 Android 开发的新手，并且了解了有助于我做到这一点的 AlarmManager。我已经通过以下方式实现了代码：

这是我的 IIManagerActivity 类

```
package com.example.iimanager;

import android.app.Activity;
import android.app.AlarmManager;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.os.SystemClock;
import android.view.Menu;
import android.widget.Toast;

public class IIManagerActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_iimanager);
        AlarmManager mgr=(AlarmManager)getSystemService(Context.ALARM_SERVICE);
        Intent i=new Intent(this, SampleService.class);
        PendingIntent pi=PendingIntent.getService(this, 0, i, 0);
        mgr.setInexactRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP,  SystemClock.elapsedRealtime(), AlarmManager.INTERVAL_FIFTEEN_MINUTES/900, pi);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_iimanager, menu);
        return true;
    }
} 
```

这是我的 SampleService，用于显示敬酒消息。出于某种原因，无论我等待多长时间，我都无法看到敬酒消息。

```
package com.example.iimanager;

import android.app.IntentService;
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.widget.Toast;

public class SampleService extends IntentService {

    public SampleService() {
        super("SimpleService");
        //Toast.makeText(getApplicationContext(), "this is my Toast message!!! =)", Toast.LENGTH_LONG).show();
    }

    @Override
    protected void onHandleIntent(Intent intent) {
         //do something
        Toast.makeText(getApplicationContext(), "this is my Toast message!!! =)", Toast.LENGTH_LONG).show();
    }
} 
```

你能告诉我哪里出了问题以及需要做些什么来纠正它吗？

非常感谢您提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T02:47:33.550

复制以下 3 行用于 toast 调用

> 定时器 timer = new Timer();
> TimerTask updateProfile = new SampleService(SampleService.this); timer.scheduleAtFixedRate(updateProfile, 10,1000);

```
class CustomTimerTask extends TimerTask {
private Context context;
private Handler mHandler = new Handler();
        // Write Custom Constructor to pass Context
    public CustomTimerTask(Context con) {
        this.context = con;
    }

    @Override
    public void run() {
    new Thread(new Runnable() {
        @Override
        public void run() {
            mHandler.post(new Runnable() {
            @Override
            public void run() {
Toast.makeText(getApplicationContext(), "this is my Toast message!!! =)", Toast.LENGTH_LONG).show();    
        }
    });
}
}).start();

}

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-28T10:36:01.907

试试下面的代码，

**MainActivity.java**

```
public class MyService extends Service {

public static final long INTERVAL=60000;//variable for execute services every 1 minute
private Handler mHandler=new Handler(); // run on another Thread to avoid crash
private Timer mTimer=null; // timer handling

@Nullable
@Override
public IBinder onBind(Intent intent) {
    throw new UnsupportedOperationException("unsupported Operation");
}
@Override
public void onCreate() {
    // cancel if service is  already existed
        if(mTimer!=null)
            mTimer.cancel();
    else
            mTimer=new Timer(); // recreate new timer
    mTimer.scheduleAtFixedRate(new TimeDisplayTimerTask(),0,INTERVAL);// schedule task
}
@Override
public void onDestroy() {
    Toast.makeText(this, "In Destroy", Toast.LENGTH_SHORT).show();//display toast when method called
    mTimer.cancel();//cancel the timer
}
//inner class of TimeDisplayTimerTask
private class TimeDisplayTimerTask extends TimerTask {
    @Override
    public void run() {
        // run on another thread
        mHandler.post(new Runnable() {
            @Override
            public void run() {
                // display toast at every 1 minute
                Toast.makeText(getApplicationContext(), "Notify", Toast.LENGTH_SHORT).show();
            }
        });
    }
}
} 
```

**MainActivity.java**

```
public class MainActivity extends AppCompatActivity {
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);//load the layout file
    startService(new Intent(this,MyService.class));//use to start the services
}
} 
```

还要将此代码添加到您的清单文件中

**AndroidManifest.xml**

```
<service android:name=".MyService"
        android:enabled="true"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T02:12:01.190

尝试创建一个 Timer 对象。然后使用`scheduleAtFixedRate(TimerTask)`来重复 Toast 消息。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-02T00:47:08.980

您可以只创建一个包含您的代码的循环线程。

像这样：

```
public class Toaster extends Thread{                      
    public void run(){              
    //Your code to loop

    thread.sleep(60000)           
         }
    } 
```

希望能帮助到你！

# c++ - 模板查询，访问私有成员

> ID：15754198
> 
> 赞同：2
> 
> 时间：2013-04-02T00:33:07.850
> 
> 标签：c++, templates

我指的是“用 C++ 思考”一书中提到的练习之一。下面的代码片段会为调用 h.play 引发错误，我理解，因为成员 i 是私有的。但我期待同样的错误打电话给me.play。如果我评论调用h.play，代码编译得很好。为什么调用me.play没有错误？

```
class Buddy {};

template<class T> class My {
  int i;
public:
  void play(My<Buddy>& s) {
    s.i = 3;
  }
};

int main() {
  My<int> h;
  My<Buddy> me, bud;
  h.play(bud);
  me.play(bud);
} 
```

谢谢你。

[编辑] 有没有办法查看编译器生成了哪些代码

```
My<int> h and 
My<Buddy> me 
```

? （任何类似于 -E 编译器标志的东西）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T00:37:11.930

成员对于具有相同类型的另一个对象的实例始终是“公共的”。

这意味着一个`My<Buddy>`实例（例如）可以访问另一个实例（例如）`me`的私有成员。`My<Buddy>``bud`

请记住，这`My<int>`是与 完全不同的类型`My<Buddy>`，因此它无法访问这些成员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T00:37:21.520

因为该`play`方法被定义为引用`My<Buddy>`而不是 a `My<T>`，所以当在 的另一个实例上调用时，有效类是相同的类型`My<Buddy>`。因此私有成员是可访问的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T01:03:24.463

与只是假装具有强大的静态类型系统和泛型（看看你的 Java）的语言不同，C++ 允许你根据类型模板化的参数（参数通常是类型）来消除静态参数类型（模板类型）的歧义。

*注意*：您还可以使用派生（动态/后期绑定）类型作为静态参数化类型的参数，但在这种情况下不相关。

换句话说，在 C++ 中：

*   `typeid(me) == typeid(bud)`将是**TRUE**
*   `typeid(h) == typeid(me)`将是**FALSE**

即使类型“我的”是相同的。

**您可以从与公共类型相同的**类型访问私有数据成员 ，但正如您所见，第二个比较是错误的，因为操作数**的**类型不同，因此您违反了类型的访问限制。

另外，我认为没有任何方法可以查看编译器生成的代码。（据我所知。）

# jquery - 验证所需元素，jQuery Star Rating

> ID：15754200
> 
> 赞同：3
> 
> 时间：2013-04-02T00:33:21.673
> 
> 标签：jquery, validation, rating

我使用[fyneworks.com/jquery/star-rating/](http://www.fyneworks.com/jquery/star-rating/)在我的网站上进行星级评分。但是我在使用 jquery 进行验证时遇到了一些麻烦。我希望用户必须使用它。

我用这个：

```
 $('#formid').validate({ 
    rules: {
        nameofradiobutton: { required: true }
    }
  }); 
```

进行验证，但正常情况 `{ required: true }`下它不起作用。

但我想以类似规则的格式拥有它。

请帮我寻找解决方案很多小时，但我找不到有效的解决方案......

我的收音机 HTML 如下所示：

```
<input name="star" type="radio" value="1"class="star"/>
<input name="star" type="radio" value="2"class="star"/>
<input name="star" type="radio" value="3"class="star"/>
<input name="star" type="radio" value="4"class="star"/>
<input name="star" type="radio" value="5"class="star"/> 
```

我的实际验证调用如下所示：

```
$('#starform').validate({ 

        rules: {

        star: {
            required: true,
        },

    },

    messages: {
        star: {
            required: "<br />Please choose a star.",
        },

    },
        errorPlacement: function (error, element) {
         if ( element.is(":checkbox") )
         error.appendTo(element.parent("td").next("td"));
         else if ( element.is(":radio") )
         error.appendTo(element.parent("td").next("td"));
         else
         error.appendTo( element.parent());
        }       

}); 
```

* * *

我的表格是这样的

```
<input name="star" type="radio" value="1"class="star"/>
<input name="star" type="radio" value="2"class="star"/>
<input name="star" type="radio" value="3"class="star"/>
<input name="star" type="radio" value="4"class="star"/>
<input name="star" type="radio" value="5"class="star"/> 
```

我的验证是这样的

```
 $(document).ready(function () {

    $('#starform').validate({ 

            rules: {

            star: {
                required: true,
            },

        },

        messages: {
            star: {
                required: "<br />Please choose a star.",
            },

        },
            errorPlacement: function (error, element) {
             if ( element.is(":checkbox") )
             error.appendTo(element.parent("td").next("td"));
             else if ( element.is(":radio") )
             error.appendTo(element.parent("td").next("td"));
             else
             error.appendTo( element.parent());
            }       

    });

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T21:20:07.063

因为你的星级插件隐藏了无线电输入，jQuery Validate 默认忽略它们。您需要做的就是添加`ignore:''`到您的验证选项中，您的代码将起作用：

```
$('#starform').validate({ 
    ignore:'',

    //... the rest of your rules and options to follow
}); 
```

有关该选项的详细信息，请参见[此处。](http://docs.jquery.com/Plugins/Validation/validate#toptions)`ignore`

# php - 如何从每笔贝宝交易中减少交易？

> ID：15754201
> 
> 赞同：0
> 
> 时间：2013-04-02T00:33:34.307
> 
> 标签：php, e-commerce, paypal, payment-gateway

我遇到了技术问题。我能够从我的 php 网站进行贝宝交易调用。这是一个拍卖网站。卖家将他们的产品放到网上拍卖，买家则咬牙切齿。对于每次成功的拍卖，付款都可以作为 PayPal 交易进行处理。

但是我怎样才能减少（服务费，1 美元）？我正在考虑两个 API 调用，但这需要买家支付两次。有什么方法可以使用 PayPal 或者我需要其他交易服务，比如亚马逊灵活支付？

非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T00:39:11.980

无法将部分付款从用户的 PayPal 交易转给您自己。您最好提前出售用户可以用于每笔交易的代金券。这样他们就不会被迫在购买时进行两次交易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T00:40:41.753

您可以从您的帐户向收款人发起交易，这不需要用户提交两次交易。

每当我有机会时，我都强烈推荐[Stripe.com 。](https://stripe.com/)API 非常简单。您可以使用 Stripe 接受付款，然后在交易完成后，让您的服务器将剩余部分发送到卖家的 Paypal 帐户。

# python - 如何在python argparse中使参数可选

> ID：15754208
> 
> 赞同：32
> 
> 时间：2013-04-02T00:34:13.737
> 
> 标签：python, argparse

我想让 myprog 的这些调用工作，而不是其他的。

```
$ python3 myprog.py -i infile -o outfile
$ python3 myprog.py -o outfile
$ python3 myprog.py -o
$ python3 myprog.py 
```

特别是我想让指定输入文件而不是输出文件是非法的。

在第三种情况下，假定输出文件的默认名称为“out.json”。在第二种、第三种和第四种情况下，假定输入文件的默认名称为“file.n.json”，其中 n 是整数版本号。在第四种情况下，输出文件将是“file.n+1.json”，其中 n+1 是比输入文件上的版本大一号的版本号。我的代码的相关部分是：

```
import argparse

parser = argparse.ArgumentParser(description="first python version")
parser.add_argument('-i', '--infile', nargs=1, type=argparse.FileType('r'), help='input file, in JSON format')
parser.add_argument('-o', '--outfile', nargs='?', type=argparse.FileType('w'), default='out.json', help='output file, in JSON format')

args = parser.parse_args()

print("Here's what we saw on the command line: ")
print("args.infile",args.infile)
print("args.outfile",args.outfile)

if args.infile and not args.outfile:
    parser.error("dont specify an infile without specifying an outfile")
elif not args.infile:
    print("fetching infile")
else: # neither was specified on the command line
    print("fetching both infile and outfile") 
```

问题是，当我跑步时

```
$ python3 myprog.py -i infile.json 
```

而不是我希望的解析器错误，我得到：

```
Here's what we saw on the command line: 
args.infile [<_io.TextIOWrapper name='infile.json' mode='r' encoding='UTF-8'>]
args.outfile <_io.TextIOWrapper name='out.json' mode='w' encoding='UTF-8'>
fetching both infile and outfile 
```

...这表明即使命令行上没有“-o”，它的行为也好像有。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-01-06T13:23:36.460

作为所选答案的附加内容：

在不指定文件的情况下运行的选项`-o`可以使用`const`与`nargs='?'`.

从[文档](https://docs.python.org/3/library/argparse.html#const)：

> 当使用选项字符串（如 -f 或 --foo）和 nargs='?' 调用 add_argument() 时。这将创建一个可选参数，后面可以跟零个或一个命令行参数。解析命令行时，如果遇到选项字符串后没有命令行参数，则将假定 const 的值。有关示例，请参见 nargs 描述。

示例（使用字符串类型）：

```
parser.add_argument('-o', '--outfile', nargs='?', const='arg_was_not_given', help='output file, in JSON format')

args = parser.parse_args()

if args.outfile is None:
    print('Option not given at all')
elif args.outfile == 'arg_was_not_given':
    print('Option given, but no command-line argument: "-o"')
elif:
    print('Option and command-line argument given: "-o <file>"') 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-04-02T00:52:42.750

您为 outfile 指定了默认参数。

```
parser.add_argument('-o', '--outfile', nargs='?', type=argparse.FileType('w'), default='out.json', help='output file, in JSON format') 
```

如果`-o`未在命令行中指定该选项，则 arg 解析器将插入默认参数。

将其更改为：

```
parser.add_argument('-o', '--outfile', nargs='?', type=argparse.FileType('w'), help='output file, in JSON format') 
```

事情应该如你所愿。

* * *

如果您希望能够在`-o`没有文件名的情况下指定 ，您可能需要以下内容：

`out_file = args.out if args.out is not None else 'json.out'`

如果您指定不带参数的 ，我不确定相关参数是否为`None`or `''`（即空字符串）`-o`——我怀疑它是`None`，但我不确定。您必须对其进行测试才能确定。

如果没有使用 argparse 的额外逻辑，我不知道如何做到这一点。

# ruby - 查找通过 require/include 加载的所有类/模块

> ID：15754212
> 
> 赞同：0
> 
> 时间：2013-04-02T00:34:29.480
> 
> 标签：ruby

Ruby 中有没有办法通过当前脚本中的 require/include 找到所有加载的类/模块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T00:40:44.630

不追溯。AFAIK 运行时不会记录从何处加载某些内容，因此无法判断当前脚本是否是加载负责创建特定类或模块的文件的脚本。最接近的方法是跟踪自己正在加载的内容，或者遍历 ObjectSpace 以查找在给定时间点加载的所有类和模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:04:44.977

类和模块是常量。

因此，如果您要从 Object 中获取所有常量，然后执行 require，并在加载后从调用中减去该信息，您会看到任何新的东西。

它可能看起来像这样：

```
my_constants = Object.constants
require 'my_library'
new_classes_and_modules = my_constants - Object.constants 
```

# android - 在 Android 中更改 DatePicker 的方向？

> ID：15754214
> 
> 赞同：0
> 
> 时间：2013-04-02T00:34:38.483
> 
> 标签：android, eclipse, datepicker, orientation

我在使用 DatePicker 时遇到了一些 UI 问题。在我的应用程序中设置日期依赖于星期几，DatePicker 在没有日历的情况下缺少这一天，所以我使用日历以便用户可以看到星期几。唯一的问题是，它像这样并排显示它们：

![在此处输入图像描述](https://i.stack.imgur.com/f90eE.png)

这使得日历显得非常局促，尤其是因为这是在移动设备上，所以数字非常小。有没有办法改变方向，滑块在顶部，日历在底部？当它旁边没有滑块时，日历看起来要好得多，因为它更大，但我需要滑块和日历。

# google-maps - 是否可以覆盖 Google 地图事件的默认行为

> ID：15754218
> 
> 赞同：1
> 
> 时间：2013-04-02T00:35:24.170
> 
> 标签：google-maps

我正在尝试对可编辑多边形的移动进行限制。我想防止内部路径被拉到外部路径之外。我正在使用谷歌地图 google.maps.geometry.poly.containsLocation 函数来检查新点是否在外部边界内，但如果它在外部，我找不到阻止动作发生的方法。

我已尝试返回 false 但多边形仍会转到新位置

```
google.maps.event.addListener(poly.getPaths().getArray()[1], 'set_at', function() {
  return keepInside(this, arguments[0], arguments[1]);
});

function keepInside(polygon, index, new_point)
{
    outer_edge = new google.maps.Polygon({
      paths: polygon.getArray(),
    });
    is_in = google.maps.geometry.poly.containsLocation(new_point,outer_edge);
    if(!is_in)
    {
        return false;
    }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-24T18:27:46.223

您与原始代码非常接近。您可以将点设置回其原始位置，而不是返回 false。此外，传递给`set_at`侦听器的第二个参数不是新点，而是旧点。尝试这个：

```
google.maps.event.addListener(poly.getPaths().getArray()[1], 'set_at', function(index, oldPoint) {
  return keepInside(this, index, this.getAt(index), oldPoint);
});

function keepInside(polygon, index, newPoint, oldPoint)
{
    outer_edge = new google.maps.Polygon({
      paths: polygon.getArray(),
    });
    if(!google.maps.geometry.poly.containsLocation(newPoint, outer_edge))
    {
        polygon.setAt(index, oldPoint);
    }
} 
```

# javascript - 在单个语句中声明具有额外属性的 javascript 函数？

> ID：15754233
> 
> 赞同：1
> 
> 时间：2013-04-02T00:37:15.633
> 
> 标签：javascript, closures

我知道我可以在函数上定义属性，然后可以从函数内部访问这些属性。现在，我能解决的唯一语法涉及两个语句。有没有更简洁的方式来表达以下内容：

```
function myFunc() {
    // do some work
}
myFunc.myProp = 0; 
```

我不是在寻找一个*字符*更少的解决方案——这不是代码高尔夫。我问的是“是否有不同的函数声明模式具有其他可取的优点？” 这几乎是关于使用闭包的方法（因为我怀疑答案就在那里）。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T00:52:33.890

*特别是*如果你想从函数本身内部访问函数的属性，你最好这样做：

```
var theFunction = function() {
  function theRealFunction() {
    // the code
    if (theRealFunction.something == "not whatever")
      // do something
    // more code
  }

  theRealFunction.something = "whatever";
  return theRealFunction;
}(); 
```

这样做是将您的函数声明包装在一个匿名函数中。通过函数名访问函数属性的问题在于，它必须通过在周围范围内查找函数名来做到这一点。这有点恶心，但至少这样它涉及一个本质上是私有的范围。无论结果函数（作为匿名函数的返回值返回）是否分配给不同的变量、作为处理函数传递给函数等，它都可以工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T00:56:26.463

这真的，真的完全取决于。如果您正在寻找私有变量，那么您可以轻松地从函数返回一个函数——内部函数将包含对其父范围的访问。

```
var outer_function = (function () {
    var private_var = "secret",
        public_var  = "public",

        inner_function = function () {
            return private_var;
        };

    inner_function.public_var = public_var;
    return inner_function;
}()); 
```

`outer_function`现在等于`inner_function`，可以访问随附的数据。任何附加到内部的属性（以您所做的方式）现在都可以作为`outer`.

为此，您可以返回一个类的构造函数，它具有公共静态属性，其中包含的变量充当私有静态属性，在您构建的“类”的每个实例之间共享。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T00:59:02.663

不完全是您问题的答案，但是如果您想阅读一些可以在定义 javascript 函数时使用的不同设计模式，这是我读过的关于该主题的最佳文章之一：

[http://www.klauskomenda.com/code/javascript-programming-patterns/](http://www.klauskomenda.com/code/javascript-programming-patterns/)

# c - 如何正确使用 list.h（来自 Linux 内核）中的 list_for_each 宏？

> ID：15754236
> 
> 赞同：4
> 
> 时间：2013-04-02T00:37:22.773
> 
> 标签：c, linked-list

我很难使用 Linux 内核中的 list.h 为我的代码提供链表功能。我怀疑我几乎有功能代码，但我在某处混淆了指针。

如何正确使用 list_for_each 宏？在我的代码中，它陷入了无限循环并且没有退出列表。下面是我的代码片段中的问题所在（查看 add_kv 函数）：

```
dict_entry *alloc_dict(void)
{
    //allocates the linked list head node
    dict_entry *d = malloc(sizeof(dict_entry));
    INIT_LIST_HEAD(&d->list);
    return d;
}

void free_dict(dict_entry *d)
{
    //TODO: free each dict_entry struct and their keys and values.
    free(d);
}

int add_kv(dict_entry *d, char *key, char *value)
{
    if(!key || !d) return 0; //if key or d is null, return 0

    struct list_head *p; //serves as the cursor
    dict_entry *entry; //empty dict_entry
    entry = alloc_dict(); //allocate memory for it

    list_for_each(p, &d->list){
        d = list_entry(p, dict_entry, list); //CHANGED TO d FROM entry
        printf("gothere, p = %p\n",p); // something in here is creating an infinite loop. p is moving back and forth. this is the big problem in this code
        if(strcmp(entry->key, key) == 0){
            free(entry->value);
            entry->value = 0;
            entry->value = malloc(strlen(value));
            strcpy(entry->value, value);
            return 1; //how do i get rid of entry?
        }
    }
    //If you haven't returned by now, continue on to add a new entry at the end of the list 
    entry->key = malloc(strlen(key)); //allocate memory for the key
    strcpy(entry->key, key); //copy the key value to the key in the entry
    entry->value = malloc(strlen(value)); //allocate memory for value
    strcpy(entry->value, value); //copy value value to the value in the entry

    list_add(&entry->list,&d->list); //tacks the list of the new entry onto the existing list (provided as d)
    return 1;
} 
```

下面是 list.h 中的 list_for_each 宏，供参考：

```
/**
 * list_for_each    -   iterate over a list
 * @pos:    the &struct list_head to use as a loop cursor.
 * @head:   the head for your list.
 */
#define list_for_each(pos, head) \
    for (pos = (head)->next; pos != (head); pos = pos->next) 
```

这里是 list.h 中的 list_entry 宏，也供参考：

```
/**
 * list_entry - get the struct for this entry
 * @ptr:    the &struct list_head pointer.
 * @type:   the type of the struct this is embedded in.
 * @member: the name of the list_struct within the struct.
 */
#define list_entry(ptr, type, member) \
    container_of(ptr, type, member) 
```

...以及我正在使用的 dict_entry 结构：

```
 6 typedef struct {
  7   char *key;
  8   char *value;
  9   struct list_head list;
 10 }dict_entry; 
```

...运行时，会发生这种情况：

```
gothere, p = 0x1178050
gothere, p = 0x1178020
gothere, p = 0x1178050
gothere, p = 0x1178020 
```

一遍又一遍地。

关于如何使用 list.h 实现列表的一个很好的解释可以在[这里](https://web.archive.org/web/20150310021226/www.makelinux.net/ldd3/chp-11-sect-5)找到以供参考。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T12:18:18.127

You are reassigning the variable `d` for some reason, and this breaks the `list_for_each` macro.

You have this code:

```
list_for_each(p, &d->list){
    d = list_entry(p, dict_entry, list); 
```

The macro reevaluates `&d->list` on each iteration to see when the list end is reached. Since `d` is reassigned, this check fails and it loops forever.

# iphone - 更改 UITableViewCell 附件后 UITableViewCellAccessoryDe tailDisclosureButton 消失

> ID：15754240
> 
> 赞同：1
> 
> 时间：2013-04-02T00:38:03.513
> 
> 标签：iphone, ios, objective-c, xcode, cocoa-touch

我有一个`UITableView`包含图像、文本和披露按钮的单元格。我正在加载这样的单元格：

```
- (UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
    static NSString *cellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if(!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:cellIdentifier];
    }

    if ([indexPath row] == [[self multas] count]) {
        [[cell textLabel] setText:@"Carregar mais..."];
    } 
    else 
    {
        Multa *multa = [self.multas objectAtIndex:indexPath.row];

        NSString *dataIsolada = [[NSString stringWithFormat:[multa dataOcorrencia]] substringWithRange:NSMakeRange(0, 10)];

        [[cell textLabel] setText:[NSString stringWithFormat:dataIsolada]];
        [[cell detailTextLabel] setText:[multa descricao]];
        [cell.imageView setImageWithURL:[NSURL URLWithString:[multa fotoURL]]
                       placeholderImage:[UIImage imageNamed:@"carregando.jpeg"]];
        [cell.imageView setContentMode: UIViewContentModeScaleAspectFit];
        [cell setAccessoryType:UITableViewCellAccessoryDetailDisclosureButton];
    }

    return cell;
} 
```

当用户点击显示按钮时，我将显示按钮切换为活动指示器，然后使用导航控制器将另一个视图推送到屏幕：

```
- (void)carregarDetalhesMulta:(UITableView *)tableView comMulta:(Multa *)multa 
{
    DetalheMultaViewController *form = [[DetalheMultaViewController alloc] initWithMulta:multa];
    form.delegate = self;

    UINavigationController *navigation = [[UINavigationController alloc] initWithRootViewController:form];

    [self presentModalViewController:navigation animated:YES];
}

- (void) tableView: (UITableView *) tableView accessoryButtonTappedForRowWithIndexPath: (NSIndexPath *) indexPath
{
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    UIActivityIndicatorView *spinner = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle: UIActivityIndicatorViewStyleGray];
    spinner.frame = CGRectMake(0, 0, 24, 24);
    cell.accessoryView = spinner;
    [spinner startAnimating];

    Multa *multa = [self.multas objectAtIndex:indexPath.row];

    double delayInSeconds = 0.1;
    dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);

    dispatch_after(popTime, dispatch_get_main_queue(), ^(void){

       [spinner stopAnimating];
       [self carregarDetalhesMulta:tableView comMulta:multa];
       [cell setAccessoryType:UITableViewCellAccessoryDetailDisclosureButton];
    });

} 
```

请注意，我最后将附件改回了一个披露按钮。问题是：当我返回（通过点击返回按钮）到包含 的视图时`UITableView`，我点击的行没有显示任何披露按钮或活动指示器。我做错了什么？在无需重新加载表格视图的情况下切换这些控件的更好方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T04:33:39.540

`accessoryView`财产优先于财产`accessoryType`。如果您将 设置`accessoryView`为`nil`，您将再次看到附件按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T04:29:29.670

这是我从问题中了解到的：您希望附件视图成为一个披露按钮，当点击该按钮时，它会成为一个活动指示器。短暂延迟后，您想推送到新的视图控制器。

这是我的做法：

1.  将情节提要中的原型单元设置为具有附件：无。
2.  从您的视图控制器添加一个推送segue到您想要的目标vc，给它一个标识符，比如@“MyPushSegue”

将附件视图添加到 cellForRowAtIndexPath 中的单元格（如果没有的话）：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];
    // the rest of your cellForRowAtIndexPath

     if (!cell.accessoryView)
        cell.accessoryView = [self createAccessoryView];

    return cell;
} 
```

以这种方式创建附件视图（假设为 ARC）：

```
- (UIView *)createAccessoryView {

    UIView *accessoryView = [[UIView alloc] initWithFrame:CGRectZero];
    UIButton *disclosureButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];

    disclosureButton.tag = 100;
    [disclosureButton addTarget:self action:@selector(pressedAccessory:) forControlEvents:UIControlEventTouchUpInside];

    UIActivityIndicatorView *aiv = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
    aiv.tag = 101;
    aiv.alpha = 0.0;
    aiv.center = disclosureButton.center;

    accessoryView.bounds = disclosureButton.bounds;
    [accessoryView addSubview:aiv];
    [accessoryView addSubview:disclosureButton];
    return accessoryView;
} 
```

上面的公开按钮在按钮被按下时触发一个方法。此方法应更改选择器视图的状态并触发您在情节提要中设置的 push segue：

```
- (void)pressedAccessory:(UIButton *)sender {

    UIView *accessoryView = sender.superview;
    [self setAccessoryView:accessoryView waiting:YES];

    // let the user see the spinner for 1 seconds
    dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, 1 * NSEC_PER_SEC);
    dispatch_after(popTime, dispatch_get_main_queue(), ^(void) {
        [self performSegueWithIdentifier:@"MyPushSegue" sender:self];
        [self setAccessoryView:accessoryView waiting:NO];
    });
} 
```

最后，为了解决您遇到的问题，我们不会用微调器替换附件视图，而是通过隐藏/显示按钮和隐藏/显示微调器来更改它的外观，具体取决于我们想要的状态：

```
- (void)setAccessoryView:(UIView *)accessoryView waiting:(BOOL)waiting {

    UIButton *disclosureButton = (UIButton *)[accessoryView viewWithTag:100];
    UIActivityIndicatorView *aiv = (UIActivityIndicatorView *)[accessoryView viewWithTag:101];
    [UIView animateWithDuration:0.1 animations:^{
        disclosureButton.alpha = (waiting)? 0.0 : 1.0;
        aiv.alpha = (waiting)? 1.0 : 0.0;
    }];

    if (waiting) [aiv startAnimating]; else [aiv stopAnimating];
} 
```

# matlab - 如何在 Latex 中包含 Matlab 输出？

> ID：15754241
> 
> 赞同：1
> 
> 时间：2013-04-02T00:38:26.917
> 
> 标签：matlab, latex

我知道我可以使用“mcode”在 Latex 中包含 Matlab 脚本，例如：

```
\begin{lstlisting}
clear, clc 
load('Data.mat');
\end{lstlisting} 
```

但是我该如何处理 Matlab 脚本输出呢？非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T03:47:45.837

该[`mcode`包](http://www.mathworks.com/matlabcentral/fileexchange/8015-m-code-latex-package)用于[`listings`](http://ctan.org/pkg/listings)设置适当的格式。事实上，以下内容来自`mcode.sty`：

```
%%   PLEASE NOTE that this package does nothing but save you from
%%   figuring out some configurations  in setting up the LISTINGS
%%   package. ALL the work is done by that package!  Thus, please
%%   refer your questions to the listings package documentation. 
```

因此，加载后`mcode`，使用以下命令输入列表`\lstinputlisting{<file>}`：

![在此处输入图像描述](https://i.stack.imgur.com/rBawU.png)

```
\documentclass{article}
\usepackage{filecontents}% http://ctan.org/pkg/filecontents
\usepackage[framed,numbered,autolinebreaks,useliterate]{mcode}
\begin{filecontents*}{mscript.mat}
function y = myfun(aa, sigma, options)

  sigma

  y = aa .* pdf('logn', aa, -0.5*sigma^2, sigma)

  %y = 1/(sigma.*sqrt(2.*pi)) .* exp((-((log(aa)+0.5*sigma.^2)).^2) ./ (2.*sigma.^2));
\end{filecontents*}
\begin{document}
\lstinputlisting{mscript.mat}
\end{document} 
```

上面的例子取自[附录中的插入 MATLAB 代码](https://tex.stackexchange.com/q/75116/5764)。

* * *

对于插入 MATLAB 输出，我建议使用以下`verbatim`环境：

![在此处输入图像描述](https://i.stack.imgur.com/fzEiY.png)

```
\documentclass{article}
\begin{document}
\begin{verbatim}
>> A = [16 3 2 13; 5 10 11 8; 9 6 7 12; 4 15 14 1]
A =
 16  3  2 13
  5 10 11  8
  9  6  7 12
  4 15 14  1

>> A(2,3)
ans =
 11
\end{verbatim}
\end{document} 
```

# javascript - 正确使用数据表中的类与 ID

> ID：15754242
> 
> 赞同：3
> 
> 时间：2013-04-02T00:38:27.157
> 
> 标签：javascript, jquery, asp.net, html

请记住，我是客户端脚本的新手，正在学习我的方式......

我需要创建一个包含表格数据的页面，并让用户能够单击特定链接以带来模式弹出窗口并提交请求。

我将此表单放入 DIV 并使用 jQuery 显示它，没问题。对于“表格”，我对如何以最佳方式连接点击和数据感到两难。我倾向于用类来做，但是我的 HTML 看起来是这样的：

```
<ItemTemplate>
  <tr>
    <td class="tripId"><%# DataBinder.Eval(Container.DataItem, "TripId")%></td>
    <td class="pickupDate"><%# DataBinder.Eval(Container.DataItem, "PickupDate", "{0:MM/dd/yy}")%></td>
    <td class="from"><%# DataBinder.Eval(Container.DataItem, "FromCity")%>, <%# DataBinder.Eval(Container.DataItem, "FromState")%></td>
    <td class="deliveryDate"><%# DataBinder.Eval(Container.DataItem, "DeliveryDate", "{0:MM/dd/yy}")%></td>
    <td class="to"><%# DataBinder.Eval(Container.DataItem, "ToCity")%>, <%# DataBinder.Eval(Container.DataItem, "ToState")%></td>
    <td class="weight"><%# DataBinder.Eval(Container.DataItem, "Weight")%></td>
    <td><%# DataBinder.Eval(Container.DataItem, "LoadedMiles")%></td>
    <td><%# DataBinder.Eval(Container.DataItem, "RequiredEquipment")%></td>
    <td><a href="#" class="inquireLink"><strong>Inquire now</strong></a></td>
  </tr>
</ItemTemplate> 
```

在javascript中，我像这样挂钩所有href：

```
// Hookup link events to handle modal popup
$(".inquireLink").on("click", function (event) {
    event.preventDefault();
    inquireAboutTrip($(this));
});

function inquireAboutTrip($link) {
   // Link located on <TR> so we can traverse up and then into each cell to get data
} 
```

因此，我可以从链接遍历到 TR，然后进入每个 CLASS 以查找 TD 内的数据。然后我可以根据需要在表单上使用这些数据。有两个问题：VS2012 抱怨所有这些类都是未定义的（当然它们不在 CSS 上）。另一个问题是，对于每一行，我都有这个标记的重复。我希望它更干净。我知道如果我使用 jQuery，我可以依赖 TR 中的 TD 顺序。代码变得更脆弱，但 HTML 更少。

解决此类问题的常用方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T01:00:10.087

退一步考虑一下你的结构，就它所持有的数据而言，这可能会有所帮助。

您在这里拥有的是表格中的一行，该行中有一堆单元格。其中一行是指某个“Trip”实体的 ID。但实际上，该行中的所有字段都指的是同一个“Trip”。

我通常解决这个问题的方法是将标识符在层次结构中尽可能地提高。在这种情况下，我会使用某种识别方案来识别*行（我通常会制作自己的自定义参数，但如果您愿意，可以使用 ID）：*

```
<tr tripId="<%# DataBinder.Eval(Container.DataItem, "TripId")%>">
    <td class="tripId"><%# DataBinder.Eval(Container.DataItem, "TripId")%></td>
    <td><a href="#" class="inquireLink"><strong>Inquire now</strong></a></td>
</tr> 
```

现在，我们可以开始将`<tr/>`块视为一个整体“Trip”：

```
$("[tripId]").each(
    function(indx, elem) {
        $(elem).find(".inquireLink").click( ... );
        // Or better yet, if there is only ever a single anchor tag in the "Inquire" cell:
        $(elem).find("a").click( ... );
    }
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T01:03:21.320

首先，我不会因为 VS 抱怨无效课程而感到心痛。就 VS 所知，它们来自 CDN。此外，不使用额外的课程也没有什么坏处。

就简洁而言，您*可以*使用`<td>`order 并删除类属性，但是您将失去稍后在不更改代码的情况下重新设置样式/重新排序它们的能力（也许您想重新组织列顺序）。我也不会太依赖于找到 parent `<tr>`，而是倾向于另一个类（比如`.item`），所以它最多可以`.item`到`.to`,`from`等。如果你愿意的话，这让你以后可以自由地移动到 a`<ul>`或`<div>`s像。

另一种选择是使用`data-*`属性，但是，对我来说，这是另一层膨胀，如果信息已经存在并且您只是重新设计它，那么这不是必需的。除非模型要使用 AJAX 并且您只是存储 a `data-id`，否则没有必要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T01:02:42.223

您正在按照现在的方式进行操作，这正是类的使用方式。忽略来自 VS 的警告，它不太擅长验证 HTML，尤其是在有趣地使用 ASP.NET 模板时。

在我看来，这种在每个上指定类的方法`<td>`远远优于依赖 jQuery 中的顺序，`<td>`因为你的 jQuery 变得更加健壮。

你`tripId`可以在你的`<tr>`身上，因为这样你的其他人更容易获得它`<td>`。例如，您还可以选择相关数据`$('#trip-10 .weight')`。

```
<ItemTemplate>
  <tr id="trip-<%# DataBinder.Eval(Container.DataItem, "TripId")%>">
    <td class="tripId"><%# DataBinder.Eval(Container.DataItem, "TripId")%></td>
    <td class="pickupDate"><%# DataBinder.Eval(Container.DataItem, "PickupDate", "{0:MM/dd/yy}")%></td>
    <td class="from"><%# DataBinder.Eval(Container.DataItem, "FromCity")%>, <%# DataBinder.Eval(Container.DataItem, "FromState")%></td>
    <td class="deliveryDate"><%# DataBinder.Eval(Container.DataItem, "DeliveryDate", "{0:MM/dd/yy}")%></td>
    <td class="to"><%# DataBinder.Eval(Container.DataItem, "ToCity")%>, <%# DataBinder.Eval(Container.DataItem, "ToState")%></td>
    <td class="weight"><%# DataBinder.Eval(Container.DataItem, "Weight")%></td>
    <td><%# DataBinder.Eval(Container.DataItem, "LoadedMiles")%></td>
    <td><%# DataBinder.Eval(Container.DataItem, "RequiredEquipment")%></td>
    <td><a href="#" class="inquireLink"><strong>Inquire now</strong></a></td>
  </tr>
</ItemTemplate> 
```

# node.js - 在 Express Node.js 中检索、修改然后提供远程 zip 存档

> ID：15754245
> 
> 赞同：0
> 
> 时间：2013-04-02T00:38:51.203
> 
> 标签：node.js, express, adm-zip

正如你从标题中猜到的那样，我只是为了学习而写一个小东西。

[这是我在 Pastebin 中的代码](http://pastebin.com/Dicq2cjf)

如您所见，我正在尝试根据 express 请求的参数从 github 获取一个压缩的 repo，然后将其提供给客户端。最初我只是将 https 响应传送到客户端的响应，但压缩存档有一个我试图删除的顶级文件夹（因为它来自 github）。我对此很陌生，而且很迷茫。关于如何修改内存中的 zip 存档的任何建议？

**编辑：**我尝试创建一个单独的存档，然后遍历每个 zipEntries 并尝试将其添加到新存档中，并且所有文件最终都在顶部，就像我的目标一样，但它们都显示为文件夹温拉尔。

[这是第二次尝试](http://pastebin.com/9pxZjVYE)

# javascript - 获取数组中的第 n 个最小数字位置

> ID：15754250
> 
> 赞同：0
> 
> 时间：2013-04-02T00:39:12.997
> 
> 标签：javascript, jquery, arrays, algorithm, sorting

非常基本的问题，但我似乎找不到任何关于如何在 Javascript 中解决它的示例。

我想创建一个函数，在其中传递一个表示“n”的数字，它返回数组中第 n 个最小数字的位置。

例如，如果我这样做：

```
array = [5,6,1,1,1,8]
n = 3
location = nth_smallest(array, n) 
```

然后位置将等于 4，因为第三个最低的数字是 1，但是我想跳过该数字的前几个重复项。

找到第 n 个最小数字的位置的常见解决方案是：

```
array = [5,6,1,1,1,8]
n = 3
nth_lowest = array.slice(0).sort()[n]
location = $.inArray(nth_lowest, array) 
```

然而问题是它总是返回位置为 2，因为它知道第三小的数字是 1，但 inArray 函数不关心重复。

有没有办法做到这一点，可能不使用排序功能？它似乎占用了大量的处理，这是一个将经常运行的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T00:55:23.053

```
// remap array as pairs of value and index
// e.g. change [5, 6, 1] to [[5, 0], [6, 1], [1, 2]]
var augmented_array = array.map(function(val, index) { return [val, index]; });
// sort pairs by the first position, breaking ties by the second
augmented_array.sort(function(a, b) {
    var ret = a[0] - b[0];
    if (ret == 0) ret = a[1] - b[1];
    return ret;
});
// example array will now be [[1, 2], [5, 0], [6, 1]]
// so we get the location by just looking at the second position of a pair
var location = augmented_array[n - 1][1]; 
```

如果您希望最后一个位置具有该值，请在排序后执行：

```
var position = n - 1;
while (position < augmented_array.length - 1 &&
       augmented_array[position][0] == augmented_array[position + 1][0]) {
  ++position;
}
var location = augmented_array[position][1]; 
```

或者，如果您想要第一个位置，请执行以下操作：

```
var position = n - 1;
while (position > 0 &&
       augmented_array[position][0] == augmented_array[position - 1][0]) {
  --position;
}
var location = augmented_array[position][1]; 
```

当然，`lastIndexOf`或者`indexOf`，正如其他答案之一所建议的那样，会导致更少的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T00:43:42.903

如果我正确理解您的问题，您正在寻找第 n 个最低数字的*最后一个实例的位置？*如果是这样，试试这个：

```
array = [5,6,1,1,1,8];
n = 3;
nth_smallest = array.slice(0).sort()[n];
location = array.lastIndexOf(nth_smallest); // assumes non-ancient browser and/or shim 
```

`lastIndexOf`可以像这样完成一个haxy shim ：

```
function lastIndexOf(array,item) {
    return array.join("\x00").match(new RegExp(".*\x00"+item+"\x00"))[0].split("\x00").length-1;
} 
```

这个垫片需要像这样调用：`location = lastIndexOf(array,nth_smallest);`

# c - UDP sendto 和 recvfrom 在不同的端口上

> ID：15754251
> 
> 赞同：0
> 
> 时间：2013-04-02T00:39:27.927
> 
> 标签：c, sockets, udp, modbus

在决定尝试与工作中的某些设备交谈后，我正试图围绕套接字的工作原理。基本细节是设备使用基于 UDP 的 ModBus RTU 协议。数据表说设备在端口 2001 上侦听并回复端口 2000。在尝试找到一些示例代码后，我找到了一个 modbus 库并设法让它与一些发送和接收似乎相同的模拟器一起工作港口。但是，我似乎无法让它与我的设备一起使用。我认为问题与端口有关。我看了一遍，似乎找不到任何有用的东西（也许我只是没有足够好的理解）。这是我正在使用的代码，有没有人有任何指针。

```
//------------------------------------------------------------------------------
// Copyright (C) 2010, Raditex AB
// All rights reserved.
//
// FreeSCADA
// http://www.FreeSCADA.com
// freescada@freescada.com
//
//------------------------------------------------------------------------------

#include "modbus.h"
#include "modbus-udp.h"

#include <stdlib.h>
#include <stdio.h>
#include <sys/types.h>
#include <sys/time.h>
#include <sys/socket.h>
#include <netdb.h>
#include <string.h>
#include <errno.h>
#include <unistd.h>
#include <netinet/in.h>
#include <arpa/inet.h>

//------------------------------------------------------------------------------
//
//
//------------------------------------------------------------------------------
int
modbus_udp_close(modbus_udp_handle_t *handle)
{
    if (handle == NULL)
        return -1;

    close(handle->sock);

    return 0;
}

//------------------------------------------------------------------------------
//
//
//------------------------------------------------------------------------------
int
modbus_udp_init(char *host, int port, modbus_udp_handle_t *handle, int delay)
{
    struct timeval timeout;

    if (handle == NULL)
        return -1;

    if ((handle->sock = socket(AF_INET, SOCK_DGRAM, 0)) < 0)
    {
        snprintf(modbus_error_str, sizeof(modbus_error_str), "%s: couldn't get socket: %s",
                 __PRETTY_FUNCTION__, strerror(errno));
        return -1;
    }

    timeout.tv_sec  = delay;
    timeout.tv_usec = 0;

    if (setsockopt(handle->sock, SOL_SOCKET, SO_RCVTIMEO, (const void *)&timeout, sizeof(struct timeval)) == -1)
    {
        snprintf(modbus_error_str, sizeof(modbus_error_str), "%s: couldn't set receive timeout: %s.",
                 __PRETTY_FUNCTION__, strerror(errno));
        return -1;
    }

    /*
     if ((flags = fcntl(handle->sock, F_GETFL, 0)) == -1)
     {
     snprintf(modbus_error_str, sizeof(modbus_error_str),
     "%s: couldn't get fd option non-blocking: F_GETFL.", __PRETTY_FUNCTION__);
     return NULL;
     }

     if (fcntl(io->sock, F_SETFL, flags|O_NONBLOCK) == -1)
     {
     snprintf(modbus_error_str, sizeof(modbus_error_str),
     "%s: couldn't set option non-blocking: F_SETFL.", __PRETTY_FUNCTION__);
     return NULL;
     }
     */

    handle->saddr.sin_family = AF_INET;

    if ((handle->addr = gethostbyname(host)) == NULL)
    {
        snprintf(modbus_error_str, sizeof(modbus_error_str), "%s: couldn't get host: %s: %s",
                 __PRETTY_FUNCTION__, strerror(errno), host);
        return -1;
    }

    bcopy((char *) handle->addr->h_addr,
          (char *)&handle->saddr.sin_addr,
          handle->addr->h_length);

    handle->saddr.sin_port = htons(port);

    return 0;
}

//------------------------------------------------------------------------------
//
//
//------------------------------------------------------------------------------
int
modbus_udp_send(modbus_udp_handle_t *handle, modbus_packet_t *pkt)
{
    char buff[256];
    int len;

    if (pkt == NULL)
        return -1;

    len = modbus_packet_pack(pkt, buff, sizeof(buff));

    if (sendto(handle->sock, buff, len, 0, (struct sockaddr *)&handle->saddr, sizeof(handle->saddr)) != len)
    {
        snprintf(modbus_error_str, sizeof(modbus_error_str),
                 "%s: failed to send modbus UDP packet", __PRETTY_FUNCTION__);
        return -1;
    }

    return 0;
}

//------------------------------------------------------------------------------
//
//
//------------------------------------------------------------------------------
int
modbus_udp_recv(modbus_udp_handle_t *handle, modbus_packet_t *pkt)
{
    socklen_t fromlen;
    struct sockaddr_in caller;
    char buff[256];
    int len;

    // read UDP data
    fromlen = sizeof (caller);
    if ((len = recvfrom(handle->sock, buff, sizeof(buff), 0, (struct sockaddr *)&caller, &fromlen)) > 0)
    {
        return modbus_packet_parse(pkt, buff, len);
    }

    return -1;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T01:17:50.917

> 数据表说设备在端口 2001 上侦听并回复端口 2000。

这意味着您需要创建一个套接字并将`bind()`其连接到端口 2000 上的本地 IP，然后`sendto()`在端口 2001 上创建设备的 IP。您显示的代码根本没有调用`bind()`，因此没有本地端口用于`recvfrom()`接收数据。

# python - 按星期几查找下一个日期

> ID：15754254
> 
> 赞同：3
> 
> 时间：2013-04-02T00:39:49.047
> 
> 标签：python, datetime

我正在使用“日期时间”，但无法弄清楚如何按星期几以“%Y-%M-%d”格式获取日期。例如：

由于今天是 2013 年 4 月 1 日（星期一），那么下一个星期二或星期四会获取什么代码？（输出应该是 2013-04-02 - 星期二）

或者如果日期是 2013 年 4 月 2 日，星期二，那么下一个星期一、星期三或星期五的代码会是什么？（输出应该是 2013-04-03 - 第二天或星期三）

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T01:09:54.733

这有效：

```
import datetime as dt

dow={d:i for i,d in 
         enumerate('Mon,Tue,Wed,Thu,Fri,Sat,Sun'.split(','))}

def next_dow(d,day):
    while d.weekday()!=day:
        d+=dt.timedelta(1)

    return d   

d1=min(next_dow(dt.datetime(2013,4,1),day) 
                 for day in (dow['Tue'],dow['Thu']))   
d2=min(next_dow(dt.datetime(2013,4,2),day) 
                 for day in (dow['Mon'],dow['Wed'],dow['Fri'])) 

for d in d1,d2:
    print d.strftime('%Y-%m-%d') 
```

或者（也许更好但不太一般）：

```
def next_dow(d,days):
    while d.weekday() not in days:
        d+=dt.timedelta(1)

    return d   

d1=next_dow(dt.datetime(2013,4,1),(dow['Tue'],dow['Thu']))
d2=next_dow(dt.datetime(2013,4,2),(dow['Mon'],dow['Wed'],dow['Fri']))

for d in d1,d2:
    print d.strftime('%Y-%m-%d') 
```

印刷：

```
2013-04-02 
2013-04-03 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T00:44:48.817

你可以尝试这样的事情：

```
from datetime import datetime
from datetime import timedelta

def return_next_tues_thur(dt):
    while True:
        dt += timedelta(days=1)
        dow = dt.strftime(%w)
        if dow == 2 || dow == 4:
           return dt

dt = datetime.now()  # Or you set it: dt = datetime(2013, 4, 1)
next_tues_thur = return_next_tues_thur(dt)
print next_tues_thur.strftime("%Y-%m-%d") 
```

这使用`strftime`方法和`%w`修饰符从对象获取星期几`datetime`。（`%w`将返回 0 到 6 范围内的 int，其中 0 是星期日。）

这个想法应该很容易扩展到星期一/星期三/星期五。

# ruby-on-rails - 根据 Rails 用户的动态菜单

> ID：15754258
> 
> 赞同：1
> 
> 时间：2013-04-02T00:40:07.550
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在开发 Rails 上的手动访问控制，需要一些有关动态菜单的帮助。

我有 3 个模型：用户、组和功能

用户有一组

组有很多用户

群组有很多功能

用户通过组具有许多功能。

K. 现在，当我使用“admin”登录时，我想呈现一个具有管理员组功能的动态菜单。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T00:44:56.167

沿着这条线作为一个助手

```
def admin_content(current_user)
  if current_user.admin?
    render 'partial'
  end
end 
```

然后你可以在你的视图中调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T00:47:04.840

看看[CanCan](https://github.com/ryanb/cancan)，它“是 Ruby on Rails 的一个授权库，它限制了允许给定用户访问的资源。”

然后，您可以使用`initialize`他们在[示例](https://github.com/ryanb/cancan/wiki/defining-abilities)中提供的方法来更好地控制您的菜单。

```
 def initialize(user)
    user ||= User.new # guest user (not logged in)
    if user.admin?
      can :manage, :all
    else
      can :read, :all
    end
  end 
```

# ember.js - Ember.js View 甚至没有正确地将上下文传递给路由器

> ID：15754259
> 
> 赞同：1
> 
> 时间：2013-04-02T00:40:09.087
> 
> 标签：ember.js

我在使用 ember.js 时遇到了一些麻烦。

我有以下代码可以正确调用路由器中的事件来创建笔记本。但是，它不会传递笔记本上下文，它是未定义的。我一直在寻找几个小时来尝试找到解决方案。

我发现[了 this](https://github.com/emberjs/ember.js/issues/1692)和[this](https://stackoverflow.com/questions/11552417/emberjs-how-to-transition-to-a-router-from-a-controllers-action)，它们很有帮助，但我不完全确定我是否走在正确的轨道上。我错过了什么吗？

路线

```
App.NotebooksNewRoute = Ember.Route.extend
    model: ->
        App.Notebook.createRecord()
    events:
        create: (notebook) ->
            #persist notebook 
```

形式

```
{{#with content}}
    <form {{action create content on="submit" }} >
        <div>
            {{view Ember.TextField placeholder="Enter a title" valueBinding="title" }}
        </div>

        <div>
            {{view Ember.TextArea placeholder="Notes" valueBinding="description" }}
        </div>

        <button type="submit">Create</button>
    </form>
{{/with}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T03:05:12.733

> 我错过了什么吗？

更改`{{action create content on="submit" }}`为`{{action create this on="submit" }}`

> 为什么？

当您使用 handlebars helper`{{#with}}`时，封闭的块将在指定变量的上下文中呈现。因此，之后`{{#with content}}`，`this`无论是什么，您都可以直接访问像和这样的`content`属性，而不是和`title``description``content.title``content.description`

# iphone - 如何以编程方式将 UIButton 添加到工具栏上？

> ID：15754265
> 
> 赞同：-2
> 
> 时间：2013-04-02T00:40:54.927
> 
> 标签：iphone, ios, xcode, ipad

我正在努力将 UIButton 添加到屏幕底部的工具栏，问题是它似乎没有出现在工具栏的顶部，而是隐藏在它的下方。

我试图将其添加到的工具栏代码（以及下面的返回按钮代码）是；

请忽略坐标，因为它们不是 100%，但 iPhone 版本至少应该显示在工具栏上，因为它在同一区域周围，我可以在之后调整它。

```
//Insert Main Toolbar On Main View
    if (IS_IPHONE_5) {

            //offsetY = (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone) ? 6 : 6 * 2;

        offsetY = (1136 - 960) / 2;

        frameRect = CGRectMake(0, SCREEN_HEIGHT - 53, 320 * 2, 53);

    }else if (IS_IPHONE || IS_IPHONE_4) {
            offsetY = 0;
            frameRect = CGRectMake(0, SCREEN_HEIGHT - 53, 320 * 2, 53);

    } else {

        frameRect = CGRectMake(0, 1024 - 53 * 2, 768 * 2, 53 * 2);
    }

  offsetY = (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone) ? 6 : 6 * 2;

    main_toolbar = [[UIImageView alloc] initWithFrame:frameRect];
    [main_toolbar setImage:[UIImage imageNamed:[g_AppUtils resourceNameForDevice:@"ToolbarBackground" ofType:@"png"]]];
    main_toolbar.userInteractionEnabled = YES;
    [self.view addSubview:main_toolbar];
    [main_toolbar release];

    //Insert Go Back Button On Main Toolbar
    goHome_button = [[UIButton alloc] initWithFrame:frameRect];
    goHome_button = [UIButton buttonWithType:UIButtonTypeCustom];
    [goHome_button setImage:[UIImage imageNamed:@"BackButton.png"] forState:UIControlStateNormal];

    [goHome_button addTarget:self action:@selector(backButtonPressed:) forControlEvents:UIControlEventTouchUpInside];

    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone) {
        goHome_button.frame = CGRectMake(55, 410, 46, 42);
    } else {
        goHome_button.frame = CGRectMake(80.0, 210.0, 160.0, 40.0);
    }

   [main_toolbar addSubview:goHome_button];
  [self.view addSubview:goHome_button]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T03:40:44.010

您需要使用 initWithCustomView 创建 UIBarButtonItem 以将 UIButton 与其关联。接下来将所有条形按钮项添加到 UIToolBar 的 setItems 方法。像这样的东西：

```
UIBarButtonItem *barButton = [[UIBarButtonItem alloc] initWithCustomView:myButton];
[buttons addObject:barButton];  // buttons is a NSMutableArray
[mainToolBar setItems:buttons animated:YES]; 
```

对于间距：

```
UIBarButtonItem *spacerFlex = [[UIBarButtonItem alloc]
                            initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace
                               target:nil
                               action:nil];

UIBarButtonItem *spacer = [[UIBarButtonItem alloc]
                               initWithBarButtonSystemItem:UIBarButtonSystemItemFixedSpace
                               target:nil
                               action:nil];
[spacer setWidth:50];  // 50 just an example 
```

将 spcerFlex 或 spacer 添加到按钮数组中......根据您需要的布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T00:47:37.747

您正在将按钮添加到您的视图中。

```
...  
[main_toolbar addSubview:goHome_button];
[self.view addSubview:goHome_button]; <--- Remove this line 
```

# c - 数组中的最大值

> ID：15754266
> 
> 赞同：-1
> 
> 时间：2013-04-02T00:41:02.900
> 
> 标签：c, arrays

我被要求编写一个程序，该程序接受一个数字列表，直到遇到非数字（最多 30 个数字），将数字放入一个数组中，并跟踪插入了多少个数字。然后它应该扫描数组以找到最大的数字，并打印最大的数字。

这就是我想出的：

```
#include<stdio.h>
int main()

{
    const int INPUT = 30 ;
    int size [INPUT];
    int i, big;

  printf("Type integer numbers, followed by q to quit: ");
  while (scanf("%d", &size[INPUT]) != 'q')
 {

    for(i=0;i<size;i++)
      scanf("%d",&INPUT[i]);
  big = INPUT[0];

  for(i=1;i<size;i++)

  {
      if(big<INPUT[i])
           big=INPUT[i];
  }

  printf("The largest number is %d",big);
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T01:12:30.003

除了问题，我在评论中列出。你好像被变量名弄糊涂了~反正我给你做了一些代码。

```
#include<stdio.h>

int main()
{
    const int MAX_INPUT = 30 ;
    int input[MAX_INPUT];
    int size=0, big;

    printf("Type integer numbers, followed by q to quit: ");
    while(size < MAX_INPUT){
        if(scanf("%d", &input[size]) != 1){
            break;
        }
        ++size;
    }

    if(size ==0){
        return 0;
    }

    big = input[size-1];

    while( size-- > 0)
    {
        if(big<input[size]){
            big=input[size];
        }
    }

    printf("The largest number is %d\n",big);
    return 0;
} 
```

经 GCC 4.1.2 和 Linux 测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T01:01:07.050

[scanf 的返回值](http://www.s-gms.ms.edus.si/cgi-bin/man-cgi?scanf%203C)：

> 成功完成后，这些函数返回成功匹配和分配的输入项的数量

此外，您正在混合大小和输入，您实际上希望大小为常数，输入为数组：

```
const int SIZE = 30 ;
int input[SIZE]; 
```

所以while循环应该是这样的：

```
while (scanf("%d", &input[some_index]) == 1) 
```

当然这是错误的：

```
scanf("%d",&INPUT[i]);  // should be ==> &input[i] 
```

# java - 将字符串转换为 JInternalFrame

> ID：15754267
> 
> 赞同：0
> 
> 时间：2013-04-02T00:41:09.260
> 
> 标签：java, swing, casting, persistence, jinternalframe

我有一个字符串，它是我已写入文件的 JInternalFrame.toString()，现在我需要一种方法将其作为 JInternalFrame 加载回来。数据字符串看起来像

`javax.swing.JInternalFrame[,0,0,500x400,invalid,hidden,layout=javax.swing.plaf.basic.BasicInternalFrameUI$Handler,alignmentX=0.0,alignmentY=0.0,border=com.apple.laf.AquaInternalFrameUI$CompoundUIBorder@2e00e753,flags=16777216,maximumSize=,minimumSize=java.awt.Dimension[width=150,height=65],preferredSize=,closable=true,defaultCloseOperation=DISPOSE_ON_CLOSE,desktopIcon=javax.swing.JInternalFrame$JDesktopIcon[,0,0,64x64,invalid,hidden,layout=java.awt.BorderLayout,alignmentX=0.0,alignmentY=0.0,border=,flags=0,maximumSize=,minimumSize=,preferredSize=],frameIcon=,iconable=false,isClosed=false,isIcon=false,isMaximum=false,isSelected=false,maximizable=true,opened=false,resizable=true,rootPane=javax.swing.JRootPane[,0,0,0x0,invalid,layout=javax.swing.JRootPane$RootLayout,alignmentX=0.0,alignmentY=0.0,border=,flags=449,maximumSize=,minimumSize=,preferredSize=],rootPaneCheckingEnabled=true,title=Test app]`

我知道不能将字符串转换为 JInternalFrame，但必须有某种方法来转换它。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T00:52:24.667

我不会尝试序列化`JInternalFrame`. 为什么？来自[Javadoc 的`JInternalFrame`](http://docs.oracle.com/javase/6/docs/api/javax/swing/JInternalFrame.html)：

> **警告**：此类的序列化对象将与未来的 Swing 版本不兼容。当前的序列化支持适用于运行相同版本 Swing 的应用程序之间的短期存储或 RMI。^(从 1.4 开始，对所有 JavaBeans TM)的长期存储的支持已添加到 java.beans 包中。请参阅 [XMLEncoder](http://docs.oracle.com/javase/6/docs/api/java/beans/XMLEncoder.html)。

我会听取警告并考虑实施`XMLEncoder`到您的程序中。

# c# - 无法序列化 System.ComponentModel.ISite 类型的成员

> ID：15754272
> 
> 赞同：0
> 
> 时间：2013-04-02T00:41:53.583
> 
> 标签：c#, .net, asmx

我正在尝试在 Web 浏览器中运行 vector.asmx 并收到以下错误。问题是什么？

无法序列化 System.ComponentModel.MarshalByValueComponent.Site 类型的 System.ComponentModel.ISite 成员，因为它是一个接口。

[我的代码]

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Services;

namespace WebApplication2
{
    /// <summary>
    /// Summary description for Vector
    /// </summary>
    [WebService(Namespace = "http://tempuri.org/")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    [System.ComponentModel.ToolboxItem(false)]
    // To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
    // [System.Web.Script.Services.ScriptService]
    public class Vector : System.Web.Services.WebService
    {

        public double X { get; set; }

        public double Y { get; set; }

        public double Z { get; set; }

        [WebMethod]
        public double MagnitudeSquared()
        {
            return X * X + Y * Y + Z * Z;
        }

        [WebMethod]
        public double Magnitude()
        {
            return Math.Sqrt(MagnitudeSquared());
        }

        [WebMethod]
        public static Vector operator -(Vector v1, Vector v2)
        {
            Vector result = new Vector();

            result.X = v1.X - v2.X;
            result.Y = v1.Y - v2.Y;
            result.Z = v1.Z - v2.Z;

            return result;
        }

        [WebMethod]
        public static Vector operator +(Vector v1, Vector v2)
        {
            Vector result = new Vector();

            result.X = v1.X + v2.X;
            result.Y = v1.Y + v2.Y;
            result.Z = v1.Z + v2.Z;

            return result;
        }

        [WebMethod]
        public static Vector operator *(Vector v1, double factor)
        {
            Vector result = new Vector();

            result.X = v1.X * factor;
            result.Y = v1.Y * factor;
            result.Z = v1.Z * factor;

            return result;
        }

        [WebMethod]
        public Vector Clone()
        {
            Vector result = new Vector();

            result.X = this.X;
            result.Y = this.Y;
            result.Z = this.Z;

            return result;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T00:42:59.013

您不能返回 Vector 类。那将是对服务实例的引用，这是没有意义的。

* * *

事实上，你的整个服务毫无意义。Web 服务是一个专门的类。像组合数据和行为这样的普通 OO 概念是行不通的。您应该有一个这样的类`Vector`包含所有公共数据，而另一个类`VectorService`是服务本身。它会接受 type 的参数`Vector`，并且也会返回这样的值。

# time - 2个嵌套for循环的时间复杂度

> ID：15754274
> 
> 赞同：1
> 
> 时间：2013-04-02T00:42:00.483
> 
> 标签：time, complexity-theory

这个问题是从过去的试卷中修改的，只是想知道我是否做对了

根据给定整数 n 的操作数计算以下代码的时间复杂度 T(n)：

```
 for ( int i = 1; i < n*n*n; i *= n ) {
      for ( int j = 0; j < n; j += 2 ) {
         for ( int k = 1; k < n; k *= 3 ) {
         // constant number C of elementary operations
         }
       }
     } 
```

到目前为止，我想出了 n^3 * n * log n = O(n^4 log n)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T00:53:18.357

我会去的。

第一个循环是*O(1)*常数，因为它总是运行 3 次迭代 ( `1*n*n*n == n*n*n`)。

```
for ( int i = 1; i < n*n*n; i *= n ) 
```

第二个循环是*O(0.5n) = O(n)*。

```
for ( int j = 0; j < n; j += 2 ) 
```

第三个循环是*O(log n)*。

```
for ( int k = 1; k < n; k *= 3 ) 
```

因此算法的时间复杂度是*O(n log n)*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T04:22:24.050

我认为你错过了关键点。我在问题中看不到任何地方，它要求您根据 Big-Oh 计算复杂性。相反，它要求给定整数 n 的操作数。

这是我的解决方案，

对于给定的 n，内部循环变量连续采用以下值：k = 1 ,3^0, 3, 3^2, 。. . , 3^(m-1)

因此，内部循环对变量 j 和 i 的每对值执行 C log3n 操作。

中间循环变量 j 取 n=2 个值，

对于给定的 n，外部循环变量 i 采用三个值，1、n 和 n^2。

因此整段代码的时间复杂度等于T(n) = 3C(n/2)log3n = 1.5Cnlog3n。

您可能想检查一下，但这是我对您问题的解释。

# xcode - iPhone App Ad-hoc 测试

> ID：15754277
> 
> 赞同：1
> 
> 时间：2013-04-02T00:42:28.903
> 
> 标签：xcode, testing

所以我目前正在为居住在另一个州的其他人制作一个应用程序。有什么方法可以让我以某种方式将它（临时？）上传到某个地方，然后他们可以将其下载到手机上进行测试？我猜我必须知道他们的 iPhone 的 ID。

如果这是可能的，我该怎么做？我目前拥有 99 美元的开发人员许可证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T06:14:02.983

先打开[http://www.diawi.com](http://www.diawi.com)

现在拖放项目的 .ipa 文件和配置文件。

单击发送按钮后，将创建一个链接

现在您可以将此链接发送到某个地方，他/她可以下载您的应用程序。

希望它会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T04:05:37.380

@菲尔围巾，

创建一个 Ad-hoc 分发证书并向其中添加设备（使用他们的设备 uuid）。使用创建的分发证书编译 Xcode 项目。创建 .ipa 文件并发送分发证书和 .ipa 文件。使用两者，他们可以安装。

以下链接可能对您有所帮助：

```
 http://stackoverflow.com/questions/5265292/xcode-4-create-ipa-file-instead-of-xcarchive
http://stackoverflow.com/questions/4711586/how-to-make-an-ipa-file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T04:28:22.367

有一些网站提供了上传 .ipa 文件的便利，然后将 URL 返回到您的应用程序，这不会公开可见。您只需要与您的客户共享此 URL，并确保您的应用程序的 .ipa 文件已为客户端设备签名，否则它不会安装在他的设备上。

网站是：- [http://www.diawi.com/](http://www.diawi.com/) [https://testflightapp.com/](https://testflightapp.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T06:17:58.440

当然，您可以为他们提供测试版本。这就是临时分发的目的。

您可以通过多种方式提供构建。.api文件是你知道的输出文件。运行代码复制api即可分享

创建配置文件时，我们添加要测试的设备列表，因此在此处添加客户端`udid`并下载并安装新配置文件

并从开发人员门户创建临时分发证书

最好的方法是[通过空中分发](https://stackoverflow.com/questions/8439127/ios-enterprise-distribution-through-ota)

# .net - 如何根据请求中的主机对网页进行品牌化？

> ID：15754279
> 
> 赞同：0
> 
> 时间：2013-04-02T00:42:36.620
> 
> 标签：.net, asp.net-mvc-4

好的，所以我正在构建一个最终将基于请求主机进行品牌标记的页面。例如，如果用户浏览 www.firsthost.com，我的过滤器会检测到这一点并将其设置为品牌 1。如果用户浏览至 www.secondhost.com，我的过滤器会检测到它并将其设置为品牌 2。这些品牌 id用于动态选择页面上的资产和选项。

目前，我正在做的是在 ActionFilter 内部进行此确定并将品牌 ID 填充到会话中，然后在控制器中引用它，我使用它来构建具有正确引用和资产的视图模型。我不喜欢的是我必须创建一个方法来从会话中挖掘出这个品牌 ID，并在控制器中的每个操作中调用它，我真的不喜欢将它塞进会话中的想法任何一个。显然我想对用户隐藏它，所以我真的不想把它放入 cookie 中。

有没有人接触过这个？你是怎么解决这个问题的？我只是在寻找一种更清洁（如果不是更安全）的方法来实现此功能，如果框架已经有一些帮助，我更愿意使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T00:48:34.990

您可以在过滤器中执行此操作并将品牌信息传递给 ViewBag 中的视图。像这样的东西在概念上会起作用：

```
public class SetBrandFilter : IActionFilter
{
    public void OnActionExecuting(ActionExecutingContext filterContext)
    {
        filterContext.Controller.ViewBag.Brand = GetBrandInformationForHost(filterContext.HttpContext.Request.Url.Host)
    }
} 
```

您可以将此过滤器设置为属性并将其应用于您的控制器（或基本控制器），或将其注册为全局过滤器。您将在此过滤器中处理所有品牌数据，因此您完全不必在操作中担心它。

这与您现在正在执行的操作类似，但不是使用会话（对于您传递的数据类型而言，这并不是真正必需的，因为它仅与单个请求相关）您使用 ViewBag。

# html - HTML5 Canvas.toDataURL 的默认质量是什么？

> ID：15754281
> 
> 赞同：7
> 
> 时间：2013-04-02T00:42:49.323
> 
> 标签：html, html5-canvas

根据 mozilla，canvas.toDataURL(1,2) 的第二个参数是：

> 如果请求的类型是image/jpeg或image/webp，那么第二个参数，如果它在0.0和1.0之间，则视为表示图像质量；如果第二个参数是其他参数，则使用图像质量的默认值。其他参数被忽略。

但是我找不到任何地方告诉我默认值实际上是什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T01:13:48.417

根据[规范](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html)，它暗示默认依赖于浏览器：

> 如果第二个参数是 0.0 到 1.0（含）范围内的数字，则必须将其视为所需的质量级别。如果它不是数字或超出该范围，则**用户代理**必须使用**其**默认值，就好像参数已被省略一样。

**编辑：**根据[一位用户](https://stackoverflow.com/q/8371510/577306)的说法，Firefox 的默认值为 0.92。

> 您可以将 JPEG 质量指定为 toDataURL 函数的第二个参数。Firefox 中的默认质量为 0.92 (92%)。

根据这个[webkit 错误报告](https://bugs.webkit.org/show_bug.cgi?id=49365#c6)Chrome 使用相同的。

> ...为 Skia 位图添加基于 libjpeg 的图像编码器。默认编码质量为 92 以匹配 Mozilla...

# ruby-on-rails-3 - 添加引导程序后，link_to 路径未链接

> ID：15754285
> 
> 赞同：0
> 
> 时间：2013-04-02T00:43:02.903
> 
> 标签：ruby-on-rails-3, twitter-bootstrap, routes, rake

我有一个基于`SAAS`此处托管的条带应用程序的 rails 应用程序：

[http://railsapps.github.com/rails-recurly-subscription-saas/](http://railsapps.github.com/rails-recurly-subscription-saas/)

我为此添加了 twitter 引导程序，并且我的路径不再创建链接。

例如我的路由文件有：

```
resources :users 
```

但是没有 users_path 在我的 erb 文件中创建指向该位置的链接

```
<%= link_to 'Admin', users_path %> 
```

我可以提供任何想法或其他信息吗？

**耙路线：**

```
E:\Sites>rake routes  
            stripe_event        /stripe                        StripeEvent::Engine  
            content_gold GET    /content/gold(.:format)        content#gold  
          content_silver GET    /content/silver(.:format)      content#silver  
        content_platinum GET    /content/platinum(.:format)    content#platinum  
                    root        /                              home#index  
                    root        /                              home#index  
        new_user_session GET    /users/sign_in(.:format)       devise/sessions#new  
            user_session POST   /users/sign_in(.:format)       devise/sessions#create  
    destroy_user_session DELETE /users/sign_out(.:format)      devise/sessions#destroy  
           user_password POST   /users/password(.:format)      devise/passwords#create  
       new_user_password GET    /users/password/new(.:format)  devise/passwords#new  
      edit_user_password GET    /users/password/edit(.:format) devise/passwords#edit  
                         PUT    /users/password(.:format)      devise/passwords#update  
cancel_user_registration GET    /users/cancel(.:format)        registrations#cancel  
       user_registration POST   /users(.:format)               registrations#create  
   new_user_registration GET    /users/sign_up(.:format)       registrations#new  
  edit_user_registration GET    /users/edit(.:format)          registrations#edit  
                         PUT    /users(.:format)               registrations#update  
                         DELETE /users(.:format)               registrations#destroy  
             update_plan PUT    /update_plan(.:format)         registrations#update_plan  
             update_card PUT    /update_card(.:format)         registrations#update_card  
                   users GET    /users(.:format)               users#index  
                         POST   /users(.:format)               users#create  
                new_user GET    /users/new(.:format)           users#new  
               edit_user GET    /users/:id/edit(.:format)      users#edit  
                    user GET    /users/:id(.:format)           users#show  
                         PUT    /users/:id(.:format)           users#update  
                         DELETE /users/:id(.:format)           users#destroy 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:34:29.413

所以这似乎是由于当我从 wrapbootstrap 模板添加资产/图像目录时对图像的错误引用引起的。

我将此行添加到 config.assets.enabled=true 下的 application.rb 文件中

```
config.assets.paths << Rails.root.join("app", "images") 
```

为了让我的图像在此之后显示，我必须将它们更改为 rails 格式，所以 background: img(..) 变成了

```
background: image-url('images/social_icons.png') 
```

# ios - 从 Plist 到详细视图控制器的 Web 视图的 URL

> ID：15754295
> 
> 赞同：-4
> 
> 时间：2013-04-02T00:44:17.090
> 
> 标签：ios, objective-c, xcode, url, plist

我有一个乐队应用程序，该应用程序需要在其上安装乐器音阶。为此，我试图拥有一个带有比例名称和描述的 PList 文件。我已经研究过，我能找到的只是传递图像，而不是 URL。我已经完成了plist。这是其中的一部分：

![/Users/grandslam700/Desktop/Scr​​een Shot 2013-04-01 at 7.05.50 PM.png](https://i.stack.imgur.com/57BMj.png) 而且我还有一个表格视图，用于获取 Plist 文件的名称和比例部分。

![在此处输入图像描述](https://i.stack.imgur.com/tvPsF.png)

我不知道该怎么做是，如何深入到详细视图控制器，然后将单击的表视图单元格的 URL 加载到 UI Webview 中，这是主表的 .m 中的代码看法：

```
#import "TableViewController.h"
#import "DetailView.h"
@interface TableViewController ()
@end

@implementation TableViewController
@synthesize content = _content;

-(NSArray *)content
{
    if (!_content) {
        _content = [[NSArray alloc] initWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"Scales" ofType:@"plist"]];
    }
return _content;
}
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

    // Make sure your segue name in storyboard is the same as this line
    if ([[segue identifier] isEqualToString:@"Detail"])
    {
        // Get reference to the destination view controller
    }
}

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
    // Custom initialization
    }
return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

// Uncomment the following line to preserve selection between presentations.
// self.clearsSelectionOnViewWillAppear = NO;

// Uncomment the following line to display an Edit button in the navigation bar for this view controller.
// self.navigationItem.rightBarButtonItem = self.editButtonItem;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

#pragma mark - Table view data source
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return [self.content count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    cell.textLabel.text = [[self.content objectAtIndex:indexPath.row] valueForKey:@"Name"];
    cell.detailTextLabel.text = [[self.content objectAtIndex:indexPath.row] valueForKey:@"Scale"];

return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
// Navigation logic may go here. Create and push another view controller.
/*
     <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc] initWithNibName:@"<#Nib name#>" bundle:nil];
 // ...
 // Pass the selected object to the new view controller.
 [self.navigationController pushViewController:detailViewController animated:YES];
  */
}

@end 
```

`如果有人知道如何做到这一点，请帮助我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T01:07:59.117

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    DetailViewController *detailViewController = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:nil];
 detailViewController.webLink = [[self.content objectAtIndex:indexPath.row] valueForKey:@"URL"];//webLink is NSStringProperty in DetailViewController.h
 [self.navigationController pushViewController:detailViewController animated:YES];
} 
```

在 DetailViewController 的 viewDidLoad 中加载 UIWebView 使用 XIB

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self.webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:self.webLink]]];
} 
```

关于如何推送到 WebViewController，参考示例代码： [https ://github.com/lequysang/github_zip/blob/master/TestTapOnWeb.zip](https://github.com/lequysang/github_zip/blob/master/TestTapOnWeb.zip)

带故事板。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"showDetail"]) {
        NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
     NSString *webLink = [[self.content objectAtIndex:indexPath.row] valueForKey:@"URL"];//webLink is NSStringProperty in DetailViewController.h
        [[segue destinationViewController] setWebLink:webLink];
    }
} 
```

# javascript - Javascript onsubmit 与 cgi 动作？

> ID：15754296
> 
> 赞同：0
> 
> 时间：2013-04-02T00:44:18.563
> 
> 标签：javascript, html, cgi, onsubmit

我有一个 html 表单并在该操作上运行了一个 cgi 脚本，然后我有一个 javascript onsubmit 函数，该函数应该检查单选按钮是否已填写，否则将不会提交。

```
<script>
function checkscript()
{
 .... check if a radio button was clicked otherwise dont submit.  
}
</script>

<form action="default.cgi" method="post" onsubmit="return checkscript()" enctype=
"application/x-www-form-urlencoded">
<h1>Choose</h1>

<p><input type="radio" name="Radio" value="1" /><font size="5"
color="#0033CC">Instant Psychology</font><br />
<br />
<input type="radio" name="Radio" value="2" /><font size="5"
color="#CC0000">Instant Geography</font><br />
<br />
<form/> 
```

我可以在 html 文件中的 Javascript 函数中执行此操作，还是需要在 cgi 脚本中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T00:48:32.257

以下脚本适用于所有浏览器。首先，获取页面上的输入，然后遍历每个检查 Radio 的 name 属性。一旦它找到一个选中（选中）的 Radio 输入，它就会返回 true，这将提交表单。但是，如果没有检查（选择）任何输入，则脚本将返回 false 并阻止提交。

```
function checkscript()
{
    var inputs = document.getElementsByTagName("input");
    for (var i=0, l=inputs.length; i<l; i++) {
        if (inputs[i].name === "Radio" && inputs[i].checked) return true;
    }
    return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T00:49:35.710

如果你可以使用 jquery，你可以这样做

```
function checkscript(){
  if($('#radio-button').is(':checked')) return true;
  else return false;
} 
```

是的，你可以把它放在你的 html 文件中。

希望这可以帮助。

# java - 当用户在输入中输入特定字符串时中断程序

> ID：15754299
> 
> 赞同：5
> 
> 时间：2013-04-02T00:44:53.047
> 
> 标签：java, string, break, do-while

我想让它让用户输入一些字符串，并且程序接受控制台输入，直到用户输入“/done”..所以它是如何工作的：

1.  打印给用户：输入您的字符串

2.  用户输入：你好日食。

嗨测试等等

bla 456 测试更多/完成

一旦用户在任何大小的任何字符串中输入 /done，程序就会中断。如果您按“回车”键，程序不会结束。它只会在你输入 /done 时结束。到目前为止我是如何设置我的程序的：

```
Scanner 123 = new Scanner(System.in);
string input = "";
System.out.println("Enter your string: ");

do {
    input = 123.nextLine();
    System.out.print("Rest of program here..");
}

while (!input.equals("/done")); 
```

我尝试在 while 循环下放置类似下面的内容，但我认为我做得不对。

```
while (!input.equals("/done"));
    if input.equals("/done");
    break;
} 
```

我知道使用 do-while 循环，只要 boolean in while 为假，它就会继续。所以对于我的程序，程序接受输入，直到用户输入 /done 所以布尔值是假的，直到输入字符串 /done 。然后根据上面的逻辑，只要输入等于“/done”，程序就会中断

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T11:56:00.217

```
 Scanner s=new Scanner(System.in);
         String input = "";
         String[] parts;
         System.out.println("Enter your string: ");
         while (true){
             input=s.nextLine();
            if (input.contains("/done")){
            parts=input.split("/done");
            //Use parts[0] to do any processing you want with the part of the string entered before /done in that line
                break;
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-29T05:40:57.440

我认为这会很好

```
Scanner scanner = new Scanner(System.in);
    String input = "";
    System.out.println("Enter your string: ");
        do {
        input = scanner.nextLine();
    } while (!input.contains("/done"));
    System.out.print("Rest of program here.."); 
```

# visual-studio-2010 - 在不打开 IDE 的情况下从 Visual Studio 控制台运行解决方案

> ID：15754302
> 
> 赞同：15
> 
> 时间：2013-04-02T00:44:59.553
> 
> 标签：visual-studio-2010, command-line, msbuild, console, devenv

我正在使用[Visual Studio 2010](http://en.wikipedia.org/wiki/Microsoft_Visual_Studio#Visual_Studio_2010) SP1。

我首先尝试的是：

1.  从开始菜单打开 Visual Studio 控制台工具
2.  导航到项目文件夹（其中已经包含一个可执行文件）
3.  跑：`msbuild myproject.sln or msbuild myproject.sln /p:Configuration=Release`
4.  这构建成功，但我找不到要运行的可执行文件

1.  我尝试的第二件事是上面的步骤 1 和 2
2.  跑步：`devenv myproject.sln /Build and devenv myproject.sln /Run`
3.  这有点工作，但它似乎打开了 IDE 来运行构建
4.  重点是完全避免使用 ide。

现在，如何在不打开 IDE 的情况下构建和运行解决方案？

**- - - - - - - - - - - - - 固定的 - - - - - - - - - - - - --------**

问题是我在错误的地方寻找可执行文件（菜鸟错误）。我最终使用了这个批处理文件：

```
msbuild myproj.sln /p:configuration=Release
cd (("Path to executable" usually in the Debug/Release Folder))
myExecutableName
cd (("Path to original folder")) 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-02T00:56:33.573

*   导航到您的解决方案文件夹
*   运行：msbuild myproject.sln /p:Configuration=Release（或调试）
*   cd myproject （在您的解决方案文件夹中 - 它是一个子文件夹）
*   光盘盒
*   cd 发布（或调试）
*   运行：myproject.exe

您可以将三个单独的`cd`命令替换为一个命令：

```
cd myproject\bin\Release 
```

或者只是从解决方案文件夹中运行您的可执行文件：

```
myproject\bin\Release\myproject.exe 
```

# asp.net - ASP.NET 禁用按钮并运行该功能

> ID：15754307
> 
> 赞同：1
> 
> 时间：2013-04-02T00:45:39.933
> 
> 标签：asp.net, asp-classic

我正面临这个问题，我设法禁用按钮，但不知何故该功能没有运行。我怀疑该功能在我的按钮被禁用后立即停止。当用户单击按钮时，任何可以解决此问题的想法，该按钮将立即被禁用，并且该按钮将运行后面的功能。以下是我用于按钮的代码。

```
<INPUT TYPE ="Submit" NAME ="Submit1" ID = "Submit1" VALUE ="Create New Sales Contract" 
       SIZE ="30" onclick="**this.disabled=true;*** CheckGWidth(this.form), 
       this.form.ContractType.value='N'*" > 
```

笔记：

1.  this.disabled=true; 禁用此按钮
2.  CheckGWidth(this.form),this.form.ContractType.value='N'

这是一个将处理此页面的功能'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T00:50:48.273

禁用按钮不会阻止其余代码触发。我怀疑还有其他事情发生。

这可以使用`document.getElementById`而不是`this.form`：

```
<form id="form1" action="" method="post">
    <INPUT TYPE ="submit" NAME ="Submit1" ID = "Submit1" VALUE ="Create New Sales Contract" SIZE ="30" onclick="this.disabled=true;CheckGWidth(this.form);document.getElementById('ContractType').value='N';return false;" />
    <INPUT TYPE="text" NAME="ContractType" ID="ContractType" /> 
</form>

<script>
    function CheckGWidth(f){
        alert("This works");
    }
</script> 
```

[JS 小提琴演示](http://jsfiddle.net/NN2Cx/)

使用 Firebug 或 Chrome 或开发者工具并检查您的 javascript 问题...

# android - 如何迭代 GridLayout 单元格？

> ID：15754308
> 
> 赞同：2
> 
> 时间：2013-04-02T00:45:48.243
> 
> 标签：android

我想以编程方式迭代 GridLayout 单元格，迭代应该应用于布局边界，其中每个单元格都包含一个 ImageButton，我知道布局是 LinearLayout 和 TableLayout 的混合。

有没有办法遍历 GridLayout 单元格？

或者，伪代码的等效代码是什么： View v <- layout[i][j] ？

# javascript - jquery 可排序、IE 和无限滚动

> ID：15754310
> 
> 赞同：0
> 
> 时间：2013-04-02T00:45:52.990
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-sortable

在 IE 中查看这个小提琴：

[http://jsfiddle.net/GA4Qs/108/](http://jsfiddle.net/GA4Qs/108/)

注意风格`style="position:relative;clear:both;max-height:100px;overflow:auto;"`

基本上，我想要它，以便当您滚动并向下拖动到可滚动 div 的底部时，它会相应地滚动。问题出在 IE 中，您将能够将项目拖到底部，使其无限滚动

有没有办法防止在 IE 中发生这种情况，以便在向下拖动可排序项目而不是让它无限滚动时它会停在底部？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T21:32:29.230

我对这个主题了解不多，但您可以使用 JQuery 在其可移动对象上的包含选项，如下所示：

```
$('#psP').sortable({
placeholder: "ui-state-highlight",
helper:'clone',
containment: "parent"
}); 
```

同时删除`Overflow:auto;`

[这](http://jsfiddle.net/strydom/GA4Qs/112/)是您更新的 jsFiddle。注意：您将需要摆弄事物的大小，就像我给您的小提琴一样，它不允许您进入可分类区域。这是由于收容区和您的 DIV 的大小。应该不难弄清楚。

我希望这就是你要找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-09T09:27:56.927

```
 $(".sortable_portlets").sortable({
                    connectWith: ".portlet-drag",
                    revert: 'true',
                    items: ".sortable_portlets",
                    containment: "document",
                    axis :'x',
                    scroll: false,

                  }); 
```

遏制选项将限制您的滚动。还有其他方法。您可以设置轴来限制这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-09T09:29:15.300

使用溢出：隐藏，包含：'父'，如果需要，还可以根据需要使用轴：'x'或'y'进行限制。

# php - 在 PHP 中创建 ZIP 文件会出现浏览器错误，而不是脚本错误

> ID：15754313
> 
> 赞同：2
> 
> 时间：2013-04-02T00:46:23.327
> 
> 标签：php, zip

我创建了一个代码来备份整个网站并单击即可自动下载。这是我的代码的样子：

```
if (file_exists("file.zip")) {
  unlink("file.zip");
}
$folder_array = array();
$file_array = array();
function listFolderFiles($dir){
  global $folder_array;
  global $file_array;
  $ffs = scandir($dir);
  foreach($ffs as $ff){
    if ($ff != '.' && $ff != '..') {
      if (is_dir($dir.'/'.$ff)) {
        $new_item = "$dir/$ff";
        $new_item = str_replace('..//','',$new_item);
        if ($new_item !== "stats") {
          array_push($folder_array, $new_item);
          listFolderFiles($dir.'/'.$ff);
        }
      }
      else {
        $new_item = "$dir/$ff";
        $new_item = str_replace('..//','',$new_item);
        if (($new_item !== "stats/logs") && ($new_item !== "stats/")) {
          array_push($file_array, $new_item);
        }
      }
    }
  }
}
listFolderFiles('../');
$zip = new ZipArchive;
if ($zip->open('file.zip', true ? ZIPARCHIVE::OVERWRITE:ZIPARCHIVE::CREATE) === TRUE) {
  foreach($folder_array as $folder) {
    $zip->addEmptyDir($folder);
  }
  foreach($file_array as $key => $file) {
    $file_path = "../$file";
    $zip->addFile($file_path, $file);
  }
}
$zip->close();
$file = "file.zip";
chmod("$file", 0700);
header("Content-type: application/zip");
header("Content-Disposition: attachment; filename=". $file);
readfile($file); 
```

现在这段代码在一段时间内运行良好，但今天看来它不想工作。问题是，这不是 PHP 脚本错误。我检查了我的错误日志，没有任何显示。这似乎是浏览器错误，但每个浏览器都会显示不同的消息：

Chrome 显示“此网页不可用” Firefox 显示“连接已重置” Internet Explorer 显示“此页面无法显示”

即使出现这些错误，ZIP 文件仍在创建中，我可以从服务器下载它。

以下是经过广泛研究后我尝试过的事情清单：

1）我删除了自动下载 ZIP 文件的代码（所有代码都是在我关闭 ZIP 文件后编写的）。仍然得到浏览器错误。

2）我读到可能有太多文件被打开并且超出了我的限制。我添加了代码以在每 200 个文件后关闭并重新打开 ZIP 文件。仍然没有工作。

3) 我将文件数量限制为 ZIP。低于 500 时一切正常。在 500 到 1,000 个文件之间，代码将在部分时间内工作。有时它会顺利通过，其他的它会给我浏览器错误。在 1,000 左右之后，它根本无法正常工作。

托管是通过 GoDaddy 进行的。

PHP 版本为 5.2.17

max_execution_time 设置为 240（代码永远不会这么长，通常只需要大约 30 秒即可运行）

memory_limit 设置为 500M（超过所有文件组合大小的两倍）

我很茫然，我真的不知道发生了什么，因为几周前这段代码对 1,500 个文件运行良好。同样，ZIP 文件仍在创建中，没有 PHP 错误，只有浏览器返回这些错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T01:24:51.477

我不知道你的代码有什么问题，但我正在使用下面的代码，它一直在和我一起工作。

```
function create_zip($path, $save_as)
{
    if (!extension_loaded('zip'))
        throw new ErrorException('Extension ZIP has not been compiled or loaded in php.');
    else if(!file_exists($path))
        throw new ErrorException('The file/path you want to zip doesn\'t exist!');

    $zip = new ZipArchive();
    if (!$zip->open($save_as, ZIPARCHIVE::CREATE))
        throw new ErrorException('Could not create zip file!');

    $ignore = array('.','..');
    if($path == dirname($save_as))
        $ignore[] = basename($save_as);

    $path = str_replace('\\', '/', realpath($path));

    if (is_dir($path)) {
        $files = new RecursiveIteratorIterator(new RecursiveDirectoryIterator($path), RecursiveIteratorIterator::SELF_FIRST);
        foreach ($files as $file) {
            $file = str_replace('\\', '/', $file);

            if( in_array(substr($file, strrpos($file, '/')+1),$ignore )) continue;

            $file = realpath($file);
            if (is_dir($file)) {
                $zip->addEmptyDir(str_replace($path . '/', '', $file . '/'));
            }
            else if (is_file($file)) {
                $zip->addFromString(str_replace($path . '/', '', $file), file_get_contents($file));
            }
        }
    }
    else if (is_file($path)) {
        $zip->addFromString(basename($path), file_get_contents($path));
    }

    return $zip->close();
}

$zip = create_zip('/path/to/your/zip/directory', '/path/to/your/save.zip');

header('Content-Description: File Transfer');
header('Content-Type: application/octet-stream');
header('Content-Disposition: attachment; filename="'.basename('/path/to/your/save.zip').'"');
header('Content-Transfer-Encoding: binary');
header('Expires: 0');
header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
header('Pragma: public');
header('Content-Length: ' . filesize('/path/to/your/save.zip'));
echo readfile('/path/to/your/save.zip'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-01T05:56:11.703

实例化一个迭代器（在创建 zip 存档之前，以防 zip 文件是在源文件夹中创建的）并遍历目录以获取文件列表。

[查看更多代码：点我](http://madhubheemagani.blogspot.in/2013/04/create-zip-file-using-php.html)

# c# - 在 Windows 窗体中显示当前打开文件的名称？

> ID：15754315
> 
> 赞同：0
> 
> 时间：2013-04-02T00:46:25.040
> 
> 标签：c#, winforms, visual-studio-2012, openfiledialog

我正在使用 Visual Studio 2012 在 C# 中创建一个基本的文本编辑软件。

我想在标签中显示打开文件的名称。

目前，我的`OpenFileDialog`代码包括：

```
OpenFileDialog ofd = new OpenFileDialog();
ofd.ShowDialog();
try
{
    richTextBoxPrintCtrl1.Text = ofd.FileName;
    StreamReader sr = new StreamReader(richTextBoxPrintCtrl1.Text);
    richTextBoxPrintCtrl1.Text = sr.ReadToEnd();
    sr.Close();

    richTextBoxPrintCtrl1.LoadFile(ofd.FileName, RichTextBoxStreamType.RichText);
}
catch { }
} 
```

例如，我使用这个软件打开 Document.rtf。如何在标签（命名`filename1`）中显示“Document.rtf”或任何其他打开的文件标题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T00:48:34.860

采用`Path.GetFileName Method`

```
string fileName = @"C:\mydir\myfile.ext";
string result = Path.GetFileName(fileName); 
Console.WriteLine(result); // outputs  myfile.ext 
```

*   [Path.GetFileName 方法](http://msdn.microsoft.com/en-us/library/system.io.path.getfilename.aspx)

**更新 1**

```
string fileName = ofd.FileName;
richTextBoxPrintCtrl1.LoadFile(fileName, RichTextBoxStreamType.RichText);
label1.Text = Path.GetFileName(fileName); //  here's your label 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T00:54:18.877

首先，检查用户是否实际选择了`OpenFileDialog`. 然后设置文本：

```
OpenFileDialog ofd = new OpenFileDialog();
// make sure user selects a file
if (ofd.ShowDialog() == System.Windows.Forms.DialogResult.OK) {
    try{
        // load contents
        richTextBoxPrintCtrl1.LoadFile(ofd.FileName, RichTextBoxStreamType.RichText); 
        // update label with file name
        filename1.Text = System.IO.Path.GetFileName(ofd.FileName);
    }catch{
        // handle exception as you wish
    }
} 
```

# c# - Csla DataPortal 未找到已实现的方法 (Silverlight)

> ID：15754317
> 
> 赞同：1
> 
> 时间：2013-04-02T00:46:42.730
> 
> 标签：c#, wcf, silverlight, csla

我正在开发一个将 CSLA 用于业务对象的 Silverlight 应用程序。

我正在尝试正确设置 DataPortal，以便它正确调用包含在我的 .Net 类库中的 DataPortal 方法。

我设置了我的 Model 和 Model.Silverlight 项目，因此 silverlight 项目中的类被创建为链接，我的 DataPortal 方法都在 #if !SILVERLIGHT 编译器指令中。silverlight UI 引用 Model.Silverlight 项目并使用 Get 方法，然后调用 DataPortal.FetchAsync。

我的项目布局图片在这里[http://i.imgur.com/V3pQppa.jpg](http://i.imgur.com/V3pQppa.jpg)

我的问题是 FetchAsync 返回错误 DataPortal_Fetch 未实现，尽管具有正确签名的方法存在于 #if !SILVERLIGHT 块中。

这让我相信数据门户配置不正确。我已经创建了 Web 服务，我可以通过右键单击 > 在浏览器中查看来浏览它。Web 服务也为 App_Startup 中的 Csla.DataPortalClient.WcfProxy.DefaultUrl 正确设置。所以老实说，我不知道还能尝试什么。

希望有人能提供帮助，因为这个问题已经困扰了我好几天，我无法在 CSLA 论坛上注册并在那里发帖。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T22:58:09.013

看来我的问题是我在**App_Startup中缺少这一行**

`Csla.DataPortal.ProxyTypeName = typeof(Csla.DataPortalClient.WcfProxy).AssemblyQualifiedName;`

这似乎在**CSLA 4.5中变得需要**

现在数据门户正在正确地找到实现的方法

# c# - 使用 c# 将链接插入到电子邮件发送中

> ID：15754319
> 
> 赞同：13
> 
> 时间：2013-04-02T00:46:51.917
> 
> 标签：c#

我开发了一个使用 c# 自动发送电子邮件的程序，我想在该电子邮件中插入一个指向网站的链接。我该怎么做？

```
public bool genarateEmail(String from, String to, String cc, String displayName, 
                          String password, String subjet, String body)
{
    bool EmailIsSent = false;

    MailMessage m = new MailMessage();
    SmtpClient sc = new SmtpClient();
    try
    {
        m.From = new MailAddress(from, displayName);
        m.To.Add(new MailAddress(to, displayName));
        m.CC.Add(new MailAddress("xxx@gmail.com", "Display name CC"));

        m.Subject = subjet;
        m.IsBodyHtml = true;
        m.Body = body;

        sc.Host = "smtp.gmail.com";
        sc.Port = 587;
        sc.Credentials = new
        System.Net.NetworkCredential(from, password);
        sc.EnableSsl = true;
        sc.Send(m);

        EmailIsSent = true;

    }
    catch (Exception ex)
    {
        EmailIsSent = false;
    }

    return EmailIsSent;
} 
```

我想通过这封电子邮件发送一个链接。我应该如何将其添加到电子邮件中？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-02T00:49:35.670

您应该能够在`body`变量中添加链接的标记：

`body = "blah blah <a href='http://www.example.com'>blah</a>";`

您不必做任何特别的事情，因为您指定您的正文包含 HTML ( `m.IsBodyHtml = true`)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-02T00:54:07.570

```
 String body = "Your message : <a href='http://www.example.com'></a>"
 m.Body = body; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T00:53:10.770

体内。这将要求将正文构造为 HTML，以便 a or 可用于呈现您的链接。您可以使用 StringTemplate 之类的东西来生成包含链接的 html。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-03T20:57:24.140

对于某些动态链接，如果链接没有像 localhost:xxxx/myPage 一样预先添加 http（安全问题），电子邮件服务提供商不会将您的链接显示到电子邮件正文中

```
m.body = "<a href='http://" + Request.Url.Authority + "/myPage'>click here</a>" 
```

# java - java中的模运算符是如何工作的？

> ID：15754323
> 
> 赞同：-1
> 
> 时间：2013-04-02T00:47:16.137
> 
> 标签：java, function, modulus, machine-code

我即将开始对大量代码进行优化，并且我需要确切知道在使用模运算符时执行了哪些操作。我已经搜索了很长一段时间，但我找不到任何关于它背后的机器代码的信息。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T01:50:06.500

如果你需要知道

> 当使用模运算符时，究竟执行了哪些操作

那么我建议你“做错了”。

模数可能因操作系统和底层架构而异。它可能会有所不同，也可能不会，但如果您需要依赖实施，您的时间可能最好花在其他地方。不保证实现保持不变，或在不同机器之间保持一致。

为什么你认为模数是计算的主要来源？无论其实现如何，该操作很可能是一个常数——即，如果它在一个大 O 大于常数时间的算法中运行，则首先优化该算法。

问问自己为什么需要优化。计算时间是否（显着）长于预期？

然后问问自己 90 - 99% 的计算都花在了哪里。尝试使用分析器获取数字，即使您认为自己知道时间花在了哪里。它可能会为您提供线索或阐明错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T00:49:31.880

大多数平台都内置了整数模运算符。执行具有与除法相当的时序的指令，产生模数。

编译器可以对除数进行优化，它是 2 的幂：`x % 512`编译器可以使用可能更快的`x & 0x01FF`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-19T14:54:17.883

> 有任何想法吗？

是的，不要在这上面浪费时间。除了试图在自己的工作中击败编译器之外，还有其他一些代码可以改进得更多

# javascript - 如果数据存在，淘汰 js 网格交换输入字段

> ID：15754326
> 
> 赞同：1
> 
> 时间：2013-04-02T00:47:56.547
> 
> 标签：javascript, jquery, knockout.js

我有一个可编辑的网格，在用户使用 ajax 登录后，我会在其中填充数据。

我用设备列表和运输信息填充它。在设备列表 json 中，我有一个布尔值“byod”，如果所选行的设备将此数据设置为“0”，我想将“MAC 地址”文本字段与“Ship To”下拉菜单交换。

小提琴在这里[http://jsfiddle.net/QTUqD/15/](http://jsfiddle.net/QTUqD/15/)，代码如下：

```
<form id="extMngForm">

    <table class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>Extension</th>
                <th>Name</th>
                <th>Email</th>
                <th>Pin</th>
                <th>Device</th>
                <th>MAC Address</th>
                <th>Ship To</th>
                <th style="width: 100px; text-align:right;"></th>
            </tr>
        </thead>
       <tbody data-bind=" template:{name:templateToUse, foreach: pagedList }"></tbody>
    </table>

    <p class="pull-right addExt"><a class="btn btn-primary" data-bind="click: $root.add" href="#" title="edit"><i class="icon-plus"></i> Add Extension</a></p>

    <div class="pagination pull-left" data-bind='visible: pagedList().length > 0'>
        <ul><li data-bind="css: { disabled: pageIndex() === 0 }"><a href="#" data-bind="click: previousPage">Previous</a></li></ul>
        <ul data-bind="foreach: allPages">
            <li data-bind="css: { active: $data.pageNumber === ($root.pageIndex() + 1) }"><a href="#" data-bind="text: $data.pageNumber, click: function() { $root.moveToPage($data.pageNumber-1); }"></a></li>
        </ul>
        <ul><li data-bind="css: { disabled: pageIndex() === maxPageIndex() }"><a href="#" data-bind="click: nextPage">Next</a></li></ul>
    </div>

    <br clear="all" />
    <script id="extItems" type="text/html">
       <tr>
            <td style="width:20px;" data-bind="text: extension"></td>
            <td data-bind="text: name"></td>
            <td data-bind="text: email"></td>
            <td style="width:20px;" data-bind="text: vmpin"></td>
            <td data-bind="text: device.asObject && device.asObject() && device.asObject().name"></td>
            <td data-bind="text: macAddress"></td>
            <td data-bind="text: shipTo"></td>
            <td class="buttons">
                <a class="btn" data-bind="click: $root.edit" href="#" title="edit"><i class="icon-edit"></i></a>
                <a class="btn" data-bind="click: $root.remove" href="#" title="remove"><i class="icon-remove"></i></a>
            </td>
        </tr>
    </script>

    <script id="editExts" type="text/html">
        <tr>
            <td style="width:20px;"><input style="width:65px;min-width: 65px;" data-errorposition="b" class="required" name="extension" data-bind="value: extension" /></td>
            <td><input data-errorposition="b" class="required" name="name" data-bind="value: name" /></td>
            <td><input data-errorposition="b" class="required" name="email" data-bind="value: email" /></td>
            <td style="width:20px;"><input style="width:65px;min-width: 65px;" data-errorposition="b" class="required" name="vmpin" data-bind="value: vmpin" /></td>
            <td>

            <select data-bind="options: $root.devicesForItem($data), optionsText: 'name', optionsValue: 'id', value: device, valueAsObject: 'asObject'"></select>

            </td>
            <td><input name="macAddress" data-bind="value: macAddress" /></td>
            <td><select style="width:100px;" data-bind="options: $root.addressList, optionsText: 'locationName', optionsValue: 'locationName', value: shipTo"></select></td>
            <td class="buttons">
                <a class="btn btn-success" data-bind="click: $root.save" href="#" title="save"><i class="icon-ok"></i></a>
                <a class="btn" data-bind="click: $root.remove" href="#" title="remove"><i class="icon-remove"></i></a>
            </td>
        </tr>
    </script>
</form> 
```

* * *

```
window.ExtListViewModel = new function () {
    var self = this;
    window.viewModel = self;

    self.list = ko.observableArray();
    self.pageSize = ko.observable(10);
    self.pageIndex = ko.observable(0);
    self.selectedItem = ko.observable();
    self.extQty = ko.observable(20);

    self.devices = ko.observableArray([{"id":"gxp2100","name":"Grandstream GXP-2100","qty":"2","byod":"1"}, {"id":"gxp2100","name":"Grandstream GXP-2100 (BYOD)","qty":"1","byod":"0"}, {"id":"pcom331","name":"Polycom 331","qty":"2","byod":"0"}, {"id":"pcom331","name":"Polycom 331 (BYOD)","qty":"1","byod":"1"}]);
    self.addressList = ko.observableArray(['addressList']);
    self.availableDevices = ko.computed(function() {        
        var usedQuantities = {};
        self.list().forEach(function(item) {
            var device = item.device();
            if (device) {
                usedQuantities[device.id] = 1 + (usedQuantities[device.id] || 0);
            }
        });

        return self.devices().filter(function(device) {
            var usedQuantity = usedQuantities[device.id] || 0;
            return device.qty > usedQuantity;
        });
    });
    self.devicesForItem = function(item) {        
        var availableDevices = self.availableDevices();
        return self.devices().filter(function(device) {
            return device === item.device() || availableDevices.indexOf(device) !== -1;
        });
    }

    self.edit = function (item) {
            self.selectedItem(item);
    };

    self.cancel = function () {
        self.selectedItem(null);
    };

    self.add = function () {
            var newItem = new Extension();
            self.list.push(newItem);
            self.selectedItem(newItem);
            self.moveToPage(self.maxPageIndex());
    };
    self.remove = function (item) {

            if (confirm('Are you sure you wish to delete this item?')) {

                    self.list.remove(item);
                    if (self.pageIndex() > self.maxPageIndex()) {
                        self.moveToPage(self.maxPageIndex());
                    }

            }
    };
    self.save = function () {
            self.selectedItem(null);
    };

    self.templateToUse = function (item) {
        return self.selectedItem() === item ? 'editExts' : 'extItems';
    };

    self.pagedList = ko.dependentObservable(function () {
        var size = self.pageSize();
        var start = self.pageIndex() * size;
        return self.list.slice(start, start + size);
    });
    self.maxPageIndex = ko.dependentObservable(function () {
        return Math.ceil(self.list().length / self.pageSize()) - 1;
    });
    self.previousPage = function () {
        if (self.pageIndex() > 0) {
            self.pageIndex(self.pageIndex() - 1);
        }
    };
    self.nextPage = function () {
        if (self.pageIndex() < self.maxPageIndex()) {
            self.pageIndex(self.pageIndex() + 1);
        }
    };
    self.allPages = ko.dependentObservable(function () {
        var pages = [];
        for (i = 0; i <= self.maxPageIndex() ; i++) {
            pages.push({ pageNumber: (i + 1) });
        }
        return pages;
    });
    self.moveToPage = function (index) {
        self.pageIndex(index);
    };

};

ko.applyBindings(ExtListViewModel, document.getElementById('extMngForm'));

function Extension(extension, name, email, vmpin, device, macAddress, shipTo){
    this.extension = ko.observable(extension);
    this.name = ko.observable(name);
    this.email = ko.observable(email);
    this.vmpin = ko.observable(vmpin);
    this.device = ko.observable(device);
    this.macAddress = ko.observable(macAddress);
    this.shipTo = ko.observable(shipTo);
};
ExtListViewModel.addressList = [{"shipping_address_street":"555 Lane","shipping_address_state":"TX","shipping_address_city":"Dallas","shipping_address_postalcode":"75000","locationName":"Preset"}, {"shipping_address_street":"555 Lane","shipping_address_state":"TX","shipping_address_city":"Dallas","shipping_address_postalcode":"75000","locationName":"Home"}];

//Shows device name not value (knockout extension)
ko.bindingHandlers.valueAsObject = {
    init: function(element, valueAccessor, allBindingsAccessor) {
        var value = allBindingsAccessor().value,
            prop = valueAccessor() || 'asObject';

        //add an "asObject" sub-observable to the observable bound against "value"
        if (ko.isObservable(value) && !value[prop]) {
              value[prop] = ko.observable();
        }
    },
    //whenever the value or options are updated, populated the "asObject" observable
    update: function(element, valueAccessor, allBindingsAccessor) {
        var prop = valueAccessor(),
            all = allBindingsAccessor(),
            options = ko.utils.unwrapObservable(all.options),
            value = all.value,
            key = ko.utils.unwrapObservable(value),
            keyProp = all.optionsValue,
            //loop through the options, find a match based on the current "value"
            match = ko.utils.arrayFirst(options, function(option) {
               return option[keyProp] === key;
            });

        //set the "asObject" observable to our match
        value[prop](match);
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T05:10:25.020

首先，就像我在您最近的另一篇文章中向您展示的那样，`optionsValue`如果您希望值成为对象本身（然后您不需要 valueAsObject 的东西），请不要对您的选择使用绑定。所以：

```
<select data-bind="options: $root.devicesForItem($data), optionsText: 'name', value: device"></select> 
```

其次，您的 ID 必须是唯一的（不像您当前的示例），因为您的代码依赖于此。

然后，剩下的就很简单了，您只需要在扩展对象中使用一个简单的计算布尔值来说明是否显示 MAC 地址或运输的东西，例如：

```
this.showMac = ko.computed(function() {
        if (self.device())
            return self.device().byod !== '0';
        return true;
}); 
```

并在绑定中使用这个计算，例如`<!-- ko if: showMac -->`或`<td data-bind="text: showMac() ? macAddress : shipTo>"`

小提琴：http: [//jsfiddle.net/antishok/QTUqD/16/](http://jsfiddle.net/antishok/QTUqD/16/)

# python - 使用 NaN 绘制/创建数据集的散点图

> ID：15754333
> 
> 赞同：8
> 
> 时间：2013-04-02T00:48:36.137
> 
> 标签：python, matplotlib

我想使用 pylab 绘制散点图，但是，我的一些数据是`NaN`，像这样：

```
a = [1, 2, 3]
b = [1, 2, None] 
```

`pylab.scatter(a,b)`不起作用。

有什么方法可以在不显示这些`NaN`值的情况下绘制真正的价值点吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-02T01:04:48.093

如果您使用`NaN`s，一切都会完美无缺。 `None`不是一回事。A`NaN`是一个浮点数。

举个例子：

```
import numpy as np
import matplotlib.pyplot as plt

plt.scatter([1, 2, 3], [1, 2, np.nan])
plt.show() 
```

![在此处输入图像描述](https://i.stack.imgur.com/uBGLy.png)

如果您想处理丢失的数据，请查看`pandas`或 numpy 掩码数组（并加载您的数据）。`numpy.genfromtxt`掩码数组内置于 numpy 中，但`pandas`它是一个非常有用的库，并且具有非常好的缺失值功能。

举个例子：

```
import matplotlib.pyplot as plt
import pandas

x = pandas.Series([1, 2, 3])
y = pandas.Series([1, 2, None])
plt.scatter(x, y)
plt.show() 
```

`pandas`使用`NaN`s 表示掩码数据，而掩码数组使用单独的掩码数组。这意味着掩码数组可以潜在地保留原始数据，同时暂时将其标记为“丢失”或“坏”。但是，它们使用更多的内存，并且有一个隐藏的陷阱，可以通过使用`NaN`s 来表示缺失的数据来避免。

作为另一个示例，同时使用掩码数组和`NaN`s，这次使用折线图：

```
import numpy as np
import matplotlib.pyplot as plt

x = np.linspace(0, 6 * np.pi, 300)
y = np.cos(x)

y1 = np.ma.masked_where(y > 0.7, y)

y2 = y.copy()
y2[y > 0.7] = np.nan

fig, axes = plt.subplots(nrows=3, sharex=True, sharey=True)
for ax, ydata in zip(axes, [y, y1, y2]):
    ax.plot(x, ydata)
    ax.axhline(0.7, color='red')

axes[0].set_title('Original')
axes[1].set_title('Masked Arrays')
axes[2].set_title("Using NaN's")

fig.tight_layout()

plt.show() 
```

![在此处输入图像描述](https://i.stack.imgur.com/HtRYY.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T01:05:08.470

因为您是在 2D 空间中绘图，所以您的点需要由 X 和 Y 值定义。如果其中一个值为 None，则该点不能存在于 2D 空间中，因此无法绘制，因此您应该从另一个列表中删除 None 及其对应的值。

有很多方法可以做到这一点。这是一个：

```
a = [1, 2, 3]
b = [1, None, 2]

i = 0
while i < len(a):
    if a[i] == None or b[i] == None:
        a = a[:i] + a[i+1:]
        b = b[:i] + b[i+1:]
    else:
        i += 1

"""Now a = [1, 3] and b = [1, 2]"""

pylab.scatter(a,b) 
```

# tortoisegit - Git克隆太慢了

> ID：15754335
> 
> 赞同：25
> 
> 时间：2013-04-02T00:49:18.613
> 
> 标签：tortoisegit, git-clone, git-bash, git

这是我第一次构建git服务器。当我使用 TortoiseGit-1.8.1.0-32bit 处理操作时，一切正常！

但是如果我使用`git clone`命令或者 git bash，那么 git clone 的进程速度就太慢了。我附上了两张图片，显示了`git clone`下面的相对传输速度。

有人可以给我一些建议吗？

![通过 TortoiseGit 克隆](https://i.stack.imgur.com/2BpHc.png)

![通过 git 命令克隆](https://i.stack.imgur.com/rjVVP.png)

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2016-09-21T03:51:47.233

也许您可以先只获取最新版本，然后再获取其余版本：

```
$ git clone --depth=1 git@github.com:joe/hello-world.git
$ cd hello-world
$ git fetch --unshallow 
```

感谢[这篇文章](https://codeyarns.com/2016/01/12/slow-speed-on-git-clone/)！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-10T01:04:10.877

如果您和我一样，已将 TortoiseGit 配置为使用 Putty 的 plink 进行连接（并使用 pageant 等），这可能会对您有所帮助：

尝试在 Putty（默认设置）中启用以下设置：

1.  **SSH -> Auth：“允许代理转发”**（我相信这是改变“一切”的那个）
2.  SSH ->“启用压缩”
3.  会话 -> 选择“默认设置” ->**保存**

对我来说，这导致从 143.00 KiB/s 到**4.50 MiB/s**

希望这可以帮助。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-08-28T12:27:46.410

这里有两个问题：

1.  您的 OpenSSL 不是最新的
2.  SSH 协议比 HTTPS 慢（但不是很多）

**第 1 部分。OpenSSL**

按照文章中的指示，[http://darrell.mozingo.net/2011/09/29/painfully-slow-clone-speeds-with-msysgit-gitextensions/](http://darrell.mozingo.net/2011/09/29/painfully-slow-clone-speeds-with-msysgit-gitextensions/)，我成功地提高了我的网络吞吐量`git clone`从 1 MiB/s 至 28 MiB/s。这个结果是通过将 OpenSSL 从版本 0.9.8e 升级到版本 1.0.1e 来实现的。

**第 2 部分. SSH 协议**

SSH 协议比 HTTPS 协议慢一点，但不足以保证我在第 1 部分中提到的速度差异或您所看到的。请通读本文以获取有关 Git 协议的更多信息：http: [//media.pragprog.com/titles/tsgit/chap-008-extract.html](http://media.pragprog.com/titles/tsgit/chap-008-extract.html)。

# qt - 没有 LookBehind 功能的正则表达式

> ID：15754337
> 
> 赞同：1
> 
> 时间：2013-04-02T00:49:31.990
> 
> 标签：qt, qregexp

我正在尝试编写一个查找所有 ';' 的正则表达式 后面没有新行 (\n) 字符的字符。

```
;(?!\\\n) 
```

以及前面没有“;”的所有新行 (\n) 字符 特点：

```
(?< !;)\\\n 
```

不幸的是，我使用的是 Qt 4.7.4 QRegExp，它不支持“往后看”。如何重写上面的正则表达式，使其不使用“向后看”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T03:11:18.547

从文档中引用：

[http://doc.qt.digia.com/4.7/qregexp.html#details](http://doc.qt.digia.com/4.7/qregexp.html#details)

> 使用与 Perl 相同的语法支持零宽度正和零宽度负前瞻断言 (?=pattern) 和 (?!pattern)。

可能发生的情况是您在 Windows 机器上运行，该机器已插入`\r\n`而不只是`\n`... 或者它可能是在 Windows 机器上创建的文本文件。

需要注意的一件事是，我发现对于后视，您不能使用大多数正则表达式处理程序进行可变长度的后视。

如果lookbehinds/lookaheads 仍然给您带来麻烦，另一个要查看的选项是使用捕获组，然后仅引用您感兴趣的捕获组。

从文档的[代码示例部分](http://doc.qt.digia.com/4.7/qregexp.html#code-examples)，它有这个：

```
str = "Nokia Corporation\tqt.nokia.com\tNorway";
QString company, web, country;
rx.setPattern("^([^\t]+)\t([^\t]+)\t([^\t]+)$");
if (rx.indexIn(str) != -1) {
    company = rx.cap(1);
    web = rx.cap(2);
    country = rx.cap(3);
} 
```

捕获组用括号定义，稍后通过从 1 开始的索引访问。第零个索引是整个匹配项（不分成捕获组）。

[http://doc.qt.digia.com/4.7/qregexp.html#cap](http://doc.qt.digia.com/4.7/qregexp.html#cap)

[http://doc.qt.digia.com/4.7/qregexp.html#capturedTexts](http://doc.qt.digia.com/4.7/qregexp.html#capturedTexts)

希望有帮助。正则表达式在正常工作时会很有趣。祝你好运。

我也喜欢使用这个[工具](http://gskinner.com/RegExr/)。格式可能与 QRegEx 略有不同，但一旦你拥有它，它的翻译和测试速度非常快。

更新：这是一个完整的套件，展示了 4 个不同的捕获字符串以及它们在 QRegEx 中发现的内容：

```
#include <QCoreApplication>
#include <QRegExp>
#include <QString>
#include <QDebug>
#include <QStringList>

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);

    QString str =
            "This is a long string;\n"
            "with some semi colons;\n"
            "sometimes followed by a new line;\n"
            "and other times followed; by something else.\n"

            "(;)([^\\n]) find a semicolon and a new line\n"
            "(;)(?!\\n)  find a semicolon not followed by a new line, negative look-ahead\n"

            "([^;])(\\n) find a non semicolon and a new line\n"
            "(?<!;)(\\n) find a new line, not preceeded by a semicolon.\n";

    QList <QRegExp> rx_list;

    QRegExp rx_colon_and_non_newline;
    rx_colon_and_non_newline.setPattern("(;)([^\\n])");

    QRegExp rx_colon_and_neg_lookahead;
    rx_colon_and_neg_lookahead.setPattern("(;)(?!\\n)");

    QRegExp rx_non_colon_and_newline;
    rx_non_colon_and_newline.setPattern("([^;])(\\n)");

    QRegExp rx_neg_lookbehind_and_newline;
    rx_neg_lookbehind_and_newline.setPattern("(?<!;)(\\n)");

    rx_list << rx_colon_and_non_newline
            << rx_colon_and_neg_lookahead
            << rx_non_colon_and_newline
            << rx_neg_lookbehind_and_newline;

    foreach(QRegExp rx, rx_list)
    {
        int count = 0;
        int pos = 0;
        qDebug() << "Pattern" << rx.pattern();
        while ((pos = rx.indexIn(str, pos)) != -1) {
            QStringList capturedTexts(rx.capturedTexts());

            for(int i = 0; i<capturedTexts.size(); i++)
                capturedTexts[i].replace('\n',"\\n");

            qDebug() << "\t" << count << "Found at position" << pos << capturedTexts;
            // qDebug() << rx.cap();
            pos += rx.matchedLength();
            ++count;
        }
        if(count == 0)
            qDebug() << "\tNo matches found.";
    }

    return a.exec();
} 
```

输出：

```
Pattern "(;)([^\n])"
         0 Found at position 104 ("; ", ";", " ")
         1 Found at position 126 (";)", ";", ")")
         2 Found at position 169 (";)", ";", ")")
         3 Found at position 247 (";]", ";", "]")
         4 Found at position 295 (";)", ";", ")")
Pattern "(;)(?!\n)"
         0 Found at position 104 (";", ";")
         1 Found at position 126 (";", ";")
         2 Found at position 169 (";", ";")
         3 Found at position 247 (";", ";")
         4 Found at position 295 (";", ";")
Pattern "([^;])(\n)"
         0 Found at position 123 (".\n", ".", "\n")
         1 Found at position 166 ("e\n", "e", "\n")
         2 Found at position 242 ("d\n", "d", "\n")
         3 Found at position 289 ("e\n", "e", "\n")
         4 Found at position 347 (".\n", ".", "\n")
Pattern "(?<!;)(\n)"
        No matches found. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-05T07:23:51.940

> 不支持 Perl 的后向断言、“独立”子表达式和条件表达式。

来自[http://doc.qt.io/archives/qt-4.8/qregexp.html](http://doc.qt.io/archives/qt-4.8/qregexp.html)

所以`(?<;!;)\n`不起作用
并且`(?!;)\n`将匹配所有换行符
，无论它们前面是否有`;`

# asp.net-mvc - MVC4 Azure 部署找不到 WebPages 或 WebMatrix 引用

> ID：15754346
> 
> 赞同：7
> 
> 时间：2013-04-02T00:50:10.927
> 
> 标签：asp.net-mvc, azure

我正在尝试通过 GitHub 自动将站点部署到 Azure，并在提交到主分支后，Azure 将其拾取并尝试部署，但我收到一条“部署失败”消息，错误如下：

> App_Start\AuthConfig.cs(1,21)：错误 CS0234：命名空间“Microsoft.Web”中不存在类型或命名空间名称“WebPages”（您是否缺少程序集引用？） [C:\DWASFiles\Sites\ xxxxx\VirtualDirectory0\site\repository\xxxxx.UI.Web\xxxxx.UI.Web.csproj]

和

> Controllers\AccountController.cs(18,7)：错误 CS0246：找不到类型或命名空间名称“WebMatrix”（是否缺少 using 指令或程序集引用？） [C:\DWASFiles\Sites\xxxxx\VirtualDirectory0 \site\repository\xxxxx.UI.Web\xxxxx.UI.Web.csproj]

MVC 4（和 WebMatrix/WebPages 依赖项）通过 NuGet 安装在我的 UI.Web 项目中，而不是从 GAC 加载。程序集引用上的 Copy Local 设置为 true。知道为什么我可能会遇到这些部署问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:20:18.380

您是否尝试过使用 NuGet 包还原进行部署？然后，Azure 应该在部署期间下载所有依赖项，并且 GitHub 不会乱扔二进制文件。

只需右键单击**解决方案**并点击“启用 NuGet 包还原”。使用已创建的项目目录中的 packages.config 提交解决方案目录中的 .nuget 文件夹。

- 至于你当前的问题 - 你可以删除你的 GitHub 链接，这会很有帮助。也许您对 Visual Studio 使用了默认的 .ignore 并且确实阻止了提交二进制文件。

# ios - 如何使封闭的 UIView 与嵌入式 UIDatePicker 大小相同？

> ID：15754348
> 
> 赞同：0
> 
> 时间：2013-04-02T00:50:19.030
> 
> 标签：ios, objective-c, uiview

我在 UIView 中有一个 UIDatePicker，看起来像这样（我将背景颜色更改为红色，因此它会在这个问题中脱颖而出）：

![在此处输入图像描述](https://i.stack.imgur.com/SGKIg.png)

我希望 UIView 适合 UIDatePicker 所以没有红色。这是我的代码：

```
-(void) showModalCalendar:(int)tag {

UIViewController* popoverContent = [[UIViewController alloc] init];

UIView *popoverView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 216)]; 
popoverView.backgroundColor = [UIColor redColor];

//  the full UIDatePicker
datePicker=[[UIDatePicker alloc]init];
datePicker.frame=CGRectMake(0,44,320, 216);

//  set the locale to en-GB for testing!
NSLocale *uk = [[NSLocale alloc] initWithLocaleIdentifier:@"en_GB"];
[datePicker setLocale:uk];

if(tag == 202)  {
    datePicker.datePickerMode = UIDatePickerModeDateAndTime;
    [datePicker setTag:205];
}
else if(tag == 203)  {
    datePicker.datePickerMode = UIDatePickerModeTime;
    [datePicker setTag:206];
}

[datePicker setMinuteInterval:15];

[datePicker addTarget:self action:@selector(dateDidChange:) forControlEvents:UIControlEventValueChanged];

[popoverView addSubview:datePicker];

popoverContent.view = popoverView;

popoverController = [[UIPopoverController alloc] initWithContentViewController:popoverContent];

popoverController.delegate = (id)self;

[popoverController setPopoverContentSize:CGSizeMake(320, 264) animated:NO];

switch (tag)  {  //  displays the popover datepicker
    case 202:  //  appointment start time
        [popoverController presentPopoverFromRect:boApptStart.frame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionDown animated:YES];
        break;
    case 203:  //  appointment end time
        [popoverController presentPopoverFromRect:boApptEnd.frame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionDown animated:YES];
        break;
} 
```

}

我需要做什么或改变什么？

**更新 - 我们越来越近了！（我认为）：D**

![在此处输入图像描述](https://i.stack.imgur.com/CZ9jw.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T01:04:43.313

更改此行

```
datePicker.frame=CGRectMake(0,44,320, 216); 
```

到这条线

```
datePicker.frame = CGRectMake(0, 0, 320, 216); 
```

然后在你的视图控制器上设置 contentSizeForViewInPopover，像这样

```
popoverContent.contentSizeForViewInPopover = CGSizeMake(320.0, 216.0); 
```

# ruby - 中断从红宝石调用的孩子

> ID：15754350
> 
> 赞同：13
> 
> 时间：2013-04-02T00:50:41.930
> 
> 标签：ruby

为什么用调用创建的子进程`system`中断 ruby​​ 进程不会中断 ruby​​ 进程本身？他们应该属于同一个组，所以都应该被打断。这也对 ruby​​2.0 无效。

给定 ruby​​ 1.8.7 补丁 371、ruby 1.9.3 补丁 392 和 ruby​​2.0 补丁 0：

在 bash 中运行`ruby1.8 -e 'system "sleep 100"; p $?; sleep'`并按 ⌃C 只会杀死对`sleep 100`.

Ruby 1.9 的行为相同。

虽然运行`ruby2.0 -e 'system "sleep 100"; p $?; sleep'`会中断内部命令和 ruby​​ 进程本身.2.0.0-p0

**- 编辑 -**

阅读源代码我发现处理`SIGINT`,`SIGQUIT`并`SIGHUP`在方法中切换为忽略，`rb_syswait`然后等待创建的子进程完成然后恢复处理程序（`rb_syswait`在[ruby​​ v1.8.7-p370](http://rxr.whitequark.org/mri/ident?v=1.8.7-p370;i=rb_syswait)、[ruby v1.9.3-p362](http://rxr.whitequark.org/mri/ident?v=1.9.3-p362;i=rb_syswait)中并且没有阻塞[ruby​​ 中的处理程序v2.0.0-p0](http://rxr.whitequark.org/mri/ident?v=2.0.0-p0;i=rb_syswait) )。

为什么它完成了，为什么只为`system`and `IO.popen`，而不是`%x{}`or `fork{}`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T15:06:54.947

对于解决方法，您可以自己传播 SIGINT。您可以检查系统命令是否因信号而退出，如果是，则提高 SIGINT：

```
ruby1.8 -e 'system "sleep 100"; p $?; Process.kill("INT",0) if $?.signaled?; sleep' 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-14T12:15:45.380

这似乎不是 Ruby 的问题，而是您没有指定的操作系统的问题。进程分组和低级系统路由由操作系统内核完成。

# php - foreach 多次使用它们

> ID：15754353
> 
> 赞同：0
> 
> 时间：2013-04-02T00:51:34.013
> 
> 标签：php

```
http://pastebin.com/MFCQzJQ8 
```

我有这段代码，我正试图让它输出结果

```
echo $attack.' Attacks Have Been Stopped On Server '.$id.'<br>'; 
```

每次都不同，但我只能更改服务器 ID 或攻击，但我每次都需要更改并在新行上输出。

[http://gyazo.com/f38c20ecef5af72dcc534be88101f8a2](http://gyazo.com/f38c20ecef5af72dcc534be88101f8a2)

```
 <?php
    if (isset($_POST['stop']))
    {
        $ids = $_POST['id'];
        $urls = $_POST['url'];
        $attacks = $_POST['attack'];
        foreach($urls as $url);
        foreach($attacks as $attack);
        foreach($ids as $id);

            echo '<div class="nNote nSuccess hideit"><p><strong>SUCCESS: </strong><br>';

            foreach($ids as $id){
            if($attack == "NONE"){$attack = "No";}
            echo $attack.' Attacks Have Been Stopped On Server '.$id.'<br>';
            }
            echo '</p></div>';
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T00:54:48.807

您可以将数组合并为一个并对其进行迭代：

```
foreach(array_map(null,$ids,$urls,$attacks) as list($id,$url,$attack)) {
    // code body here
} 
```

# javascript - 将“长格式”日期时间字符串转换为 javascript 日期对象

> ID：15754356
> 
> 赞同：1
> 
> 时间：2013-04-02T00:52:11.250
> 
> 标签：javascript, json, date, rfc3339

我有一个返回 JSON 对象的当前时间 web 服务，如下所示

```
{
  "tz": "America\/Chicago", 
  "hour": 15, 
  "datetime": "Mon, 01 Apr 2013 15:46:58 -0500", 
  "second": 58, 
  "error": false, 
  "minute": 46
} 
```

是否有一个简单的方法来转换长格式的日期时间字符串

```
"datetime": "Mon, 01 Apr 2013 15:46:58 -0500" 
```

成一个 javascript 日期对象？（除了使用正则表达式来解析字符串）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T00:55:15.473

```
var dt= "Mon, 01 Apr 2013 15:46:58 -050";
var date = new Date(dt);
alert(date.getDay()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T00:59:34.247

```
var dat = {
  "tz": "America\/Chicago", 
  "hour": 15, 
  "datetime": "Mon, 01 Apr 2013 15:46:58 -0500", 
  "second": 58, 
  "error": false, 
  "minute": 46
};

var dateObj = new Date(dat.datetime); 
```

[Mozilla 开发者网络](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)可能会向您展示一些更有用的信息。Date 构造函数将为您解析字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T01:01:11.780

这可能会被否决，但您可能需要考虑使用[momentjs](http://momentjs.com/docs/)进行日期/时间操作。使用起来不错的库。

```
var myDate = moment(myObj.datetime); 
```

Now`myDate`是一个 JavaScript Date 对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T02:06:36.693

解析日期字符串的唯一安全方法是自己进行。ES5 为 Date.parse 定义了一个基于 ISO8601 的标准字符串，但并非所有正在使用的浏览器都支持它，并且您的字符串无论如何都与该格式不一致。

其他字符串值适用于有限的浏览器集，但这对于 Web 应用程序来说不是可靠的策略。

解析日期字符串相当简单：拆分位，从各个部分创建一个日期对象，并在需要时应用偏移量。因此，如果您的字符串是 Mon, 01 Apr 2013 15:46:58 -0500，您可以使用如下函数：

```
function parseDateString(s) {
  var months = {jan:0,feb:1,mar:2,apr:3,may:4,jun:5,
                jul:6,aug:7,sep:8,oct:9,nov:10,dec:11};
  s = s.split(/[\s:]/);

  var d = new Date(s[3], months[s[2].toLowerCase()], s[1], s[4], s[5], s[6]);
  var sign = s[7]<0? 1 : -1;
  var l = s[7].length;

  // offsetMinutes is minutes to add to time to get UTC
  var offsetMinutes = sign * s[7].substring(l-2,l) + sign * s[7].substring(l-4,l-2) * 60;

  // Add offset and subtract offset of current timezone
  d.setMinutes(d.getMinutes() + offsetMinutes - d.getTimezoneOffset());

  return d;
}

var s = 'Mon, 01 Apr 2013 15:46:58 -0500'
alert(s + '\n' + parseDateString(s));  // Mon, 01 Apr 2013 15:46:58 -0500
                                       // Tue Apr 02 2013 06:46:58 GMT+1000 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T03:12:54.967

/* 您可以在需要时将日期字符串重写为更常见的格式——获取月份和时区是大部分工作：*/

```
function rewriteDate(str){
    var months= ['jan', 'feb', 'mar', 'apr', 'may', 'jun', 
    'jul', 'aug', 'sep', 'oct', 'nov', 'dec'],
    dA= str.toLowerCase().split(' '),
    m= months.indexOf(dA[2].substring(0, 3));

    ++m;
    if(m<10) m= '0'+m;
    dA[2]= m;

    var dmy= dA.slice(1, 4).reverse().join('-');

    var t= 'T'+dA[4], L= dA[5].length-2,
    z= dA[5].substring(0, L)+':'+dA[5].substring(L);
    return dmy+t+z;
}

var jsn={
    "datetime":"Mon, 01 Apr 2013 15:46:58 -0500"
};
jsn["datetime"]= rewriteDate(jsn.datetime);
//returns:  (string) "2013-04-01T15:46:58-05:00"

alert(new Date(jsn.datetime).toUTCString());

//  returns: (Date) Mon, 01 Apr 2013 20:46:58 GMT 
```

# javascript - 当调用来自 iFrame 时，如何获取主机站点的 Http_Referrer？

> ID：15754357
> 
> 赞同：0
> 
> 时间：2013-04-02T00:52:20.743
> 
> 标签：javascript, .net, http, web

我有一个模块，它读取 Http Calls 以获取 Http_Referrer 并对其进行操作。现在，最近我不得不将我的客户端页面放在一个 iFrame 中，用于不同的主机站点。发生这种情况时，我希望能够知道主机站点的 url 是什么。如何使用 HttpRequest 对象来实现这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T01:08:47.663

如果 iframe 和主页面不在同一个（子）域中，则不允许访问父页面的 URL，使用 http 引荐来源网址有一些花哨的解决方法，但它们并不可靠

在此处查看更多详细信息[从 iframe 访问父 URL](https://stackoverflow.com/questions/3420004/access-parent-url-from-iframe)

# r - 线性回归中使用的显式公式

> ID：15754362
> 
> 赞同：4
> 
> 时间：2013-04-02T00:52:49.823
> 
> 标签：r

我有一个公式列表，我使用`lapply`and`lm`创建一个回归模型列表。但是，当我查看`call`每个线性模型的组件时，我看到的不是显式公式，而是我解析为线性模型的变量的名称。例如使用 mtcars 数据集：

```
temp_formula_list = list(as.formula(hp~1),as.formula(hp~cyl))
temp_fm_list = lapply(temp_formula_list, function(x) lm(data = mtcars, formula = x)) 
```

然后检查`call`：`temp_fm_list[[2]]`

```
temp_fm_list[[2]]$call 
```

给

```
lm(formula = x, data = mtcars) 
```

当我希望它明确给出

```
lm(formula = hp~cyl, data = mtcars) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-02T01:01:54.957

`bquote`您可以对用于构建调用的语言进行一些简单的计算。

```
 temp_fm_list = lapply(temp_formula_list, function(x) {
  lmc <- bquote( lm(data = mtcars, formula = .(x)))
  eval(lmc)                                                      
  })
temp_fm_list
# Call:
#   lm(formula = hp ~ 1, data = mtcars)
# 
# Coefficients:
#   (Intercept)  
# 146.7  
# 
# 
# [[2]]
# 
# Call:
#   lm(formula = hp ~ cyl, data = mtcars)
# 
# Coefficients:
#   (Intercept)          cyl  
# -51.05        31.96 
```

注意

```
function(x) do.call('lm', list(formula = x, data = quote(mtcars)) 
```

也可以工作

* * *

## 其他方法....

即使使用原始调用，您也可以从`terms`与模型关联的对象重新创建公式

例如

```
x <- hp ~ cyl

lmo <- lm(formula = x, data = mtcars)

formula(lmo)
## hp ~ cyl

lmo$call 

# lm(formula = x, data = mtcars) 
```

如果你愿意，你可以弄乱这个`call`对象（尽管这是相当危险的做法）

```
# for example

lmo$call$formula <- x
lmo$call 
##  lm(formula = hp ~ cyl, data = mtcars)

## however you can create rubbish here too
lmo$call$formula <- 'complete garbage'
lmo$call 
## lm(formula = "complete garbage", data = mtcars)

# but, being careful, you could use it appropriately
temp_fm_list = lapply(temp_formula_list, function(x) {
  oo <- lm(data = mtcars, formula = x)
  oo$call$formula <-x
  oo
})

temp_fm_list
# Call:
#   lm(formula = hp ~ 1, data = mtcars)
# 
# Coefficients:
#   (Intercept)  
# 146.7  
# 
# 
# [[2]]
# 
# Call:
#   lm(formula = hp ~ cyl, data = mtcars)
# 
# Coefficients:
#   (Intercept)          cyl  
# -51.05        31.96 
```

# c# - 声明类型“x”时缺少部分修饰符 - 由设计人员自动生成的代码引起

> ID：15754364
> 
> 赞同：9
> 
> 时间：2013-04-02T00:53:06.967
> 
> 标签：c#, winforms, partial, declare

完整的错误描述如下：

![在此处输入图像描述](https://i.stack.imgur.com/5oMi2.jpg)

我发现之前发布了一些类似的问题：[A](https://stackoverflow.com/questions/8533473/missing-partial-modifier-on-declaration-of-type-x-another-partial-declaration-o)和[B](https://stackoverflow.com/questions/12866436/missing-partial-modifier-on-declaration-another-partial-declaration-of-this-ty)

但是A和B中的问题没有提供问题描述的详细信息（也许我们提示了相同的错误信息但由不同的原因引起？我不确定..）。无论如何，A和B中的答案都没有好的解决方案。所以我决定发布类似的问题，并提供更多细节。

我的问题如下：

Designer 会自动生成一个新代码 (ErrSer1.Designer)，其中包含 (ErrSer.Designer) 中相同的部分类名。[显示在 printScreen_1 -> 第 25 行]

我们可以看到的区别是，一个在 ErrSer1.Designer 中（额外的自动生成的）

> 内部类 ErrSer

另一个在 ErrSer.Designer 中（应该是原来的那个）

> 部分类 ErrSer

这是显示 ErrSer1.Designer 的 printScreen_1 （额外的自动生成的）[注意第 25 行]

![在此处输入图像描述](https://i.stack.imgur.com/qnQqe.jpg)

这是显示 ErrSer.Designer 的 printScreen_2 （原始的和通常的）[注意第 3 行]

![在此处输入图像描述](https://i.stack.imgur.com/ezkUv.jpg)

最后......我能做些什么来解决这个恼人的自动生成代码问题？

**EDIT1：** 我的 ErrSer 表单声明如下

```
public partial class ErrSer : Form 
```

**EDIT2：** 我的 .csproj 文件

[我的 .csproj 文件位置](https://drive.google.com/file/d/0B6wTfkJvzke_OHBRT3pPRUlvTWs/edit?usp=sharing)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-21T09:59:17.890

您（意外）已将“ErrSer.resx”文件的“自定义工具”属性设置为“ResXFileCodeGenerator”。因此 Visual Studio 会为该文件生成一个冗余源文件。

要解决此问题，请打开解决方案资源管理器，然后在“FormFile”文件夹中展开“ErrSer.cs”节点。右键单击“ErrSer.resx”文件并选择“属性”。在属性窗口中清除“自定义工具”属性的值：

![解决方案资源管理器和属性窗口](https://i.stack.imgur.com/4ofbV.png)

清除指定的值，然后构建项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-20T14:17:28.037

您的问题是您有一个`Form`命名的`ErrSer`资源文件和`ErrSer`一个使用自定义工具集命名的资源文件。我想到这个案子的发生只有两个条件

1.  您有一个表单，并且您不小心在该文件上设置了自定义工具属性，因此即使您不需要生成它并且为您的资源生成了 ErrSer.Designer.cs 文件。

2.  你有一个表单并且你创建了一个同名的 ResX。

对于第一种情况，只需删除 ResX 文件和生成的 Designer 文件上的自定义工具属性。对于第二种情况，重命名您的 ResX 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-21T11:35:20.090

@jhyap：你有两个选择..

1.  将系统生成的类标记为部分。

原因：您已经创建了一个与系统生成的类相似的部分类。但是系统不知道您创建了具有相同名称的类。通过使用关键字 partial 标记系统生成的类。编译器会将您编写的类与系统生成的类合并，并将其视为单个类。

注意：如果您决定将系统生成的类标记为部分，则必须将访问修饰符从内部修改为公共，或者将您的类设置为内部。因为访问修饰符在使用部分类概念时应该匹配。

1.  更改您编写的类的名称。

原因：如果您想确保您编写的类与系统生成的类无关，并且您不想将系统生成类的成员与您的类合并。那么这是最好的解决方案。

上述步骤之一肯定会解决您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-15T04:47:27.967

看这篇[文章](http://www.codeproject.com/Articles/13830/Extended-Strongly-Typed-Resource-Generator)，你似乎可以改变后面代码生成的行为。

提供的代码似乎适用于 vs 2005/2008（最后一次修改似乎是 2009 年）

也许你可以适应 2010 年或以后

[根据这篇文章](http://visualstudiogallery.msdn.microsoft.com/18e29594-3527-4bbb-986a-52b610b77e23)，2012 年似乎有一个扩展名

# php - symfony2 表单无法正确呈现密码

> ID：15754365
> 
> 赞同：0
> 
> 时间：2013-04-02T00:53:08.940
> 
> 标签：php, symfony

我有一个要求用户注册的两步表单。这是一些代码：

```
public function earlySignupAction(Request $request)
    {
        $user = new User();

        $form = $this->createFormBuilder($user)
            ->add('username', 'text')
            ->add('email', 'email')
            ->add('password', 'password')
            ->getForm();

        $form->bind($request);

        if ($form->isValid()) {
            $em = $this->getDoctrine()->getEntityManager();
            $userRepository = $em->getRepository('MySiteUserBundle:User');
            $userFoundByUsername = $userRepository->findOneBy(array('username' => $user->getUsername()));

            if ($userFoundByUsername) {
                $this->get('session')->getFlashBag()->add('notice', "Already registered!\n We will notify you soon!");
            } 

            $additionalInfoForm = $this->createForm(new UserType(), $user, array(
                'mode' => 'additional_signup_info'
            ));

            return $this->render('MySiteMainBundle:Signup:index.html.twig',  array(
                'additionalInfoForm' => $additionalInfoForm->createView()));
        }else{
            foreach($form->getErrors() as $key => $error){
                $this->get('session')->getFlashBag()->add('error', $error->getMessage());
            }    
        }

        return $this->redirect($this->generateUrl('MySiteMainBundle_signup_fail'));
    } 
```

现在我想要/应该发生的是，在第二种形式（`$additionaInfoForm`）中，密码字段将根据输入的密码预先填充`$form`，但我实际上不是。知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T01:26:09.723

字段类型密码有一个属性，**always_empty**，默认为真。根据文档：

> 如果设置为 true，则该字段将始终呈现空白，即使相应的字段具有值。当设置为 false 时，将呈现密码字段，并将 value 属性设置为其 true 值。简而言之，如果由于某种原因您想使用已输入框中的密码值呈现密码字段，请将其设置为 false。

所以你会改变：

```
->add('password', 'password') 
```

至

```
->add('password', 'password', array('always_empty' => false)) 
```

# mysql - 优化 GROUP BY 性能 - 增加大约 5 秒的查询时间

> ID：15754368
> 
> 赞同：5
> 
> 时间：2013-04-02T00:53:23.657
> 
> 标签：mysql

我正在一个大型数据库上运行各种各样的分析，这对于我们的应用程序的用户来说是典型的。它存储了数百万条记录，我花时间确保字段类型是它们需要的类型（尽管我们也可以规范化这些列中的三个并将其移动到外键）。

默认情况下，查询按相关信息分组并统计重复记录的问题。这个组杀死了我们 - 查询在`0.08`几秒钟内运行并将其减慢到`5.89`平均水平。

一个示例查询：

```
SELECT player, x, y, z, COUNT(id), action_type
FROM prism_actions WHERE world = 'world'
AND (prism_actions.x BETWEEN -1119.650147217701 AND -919.650147217701)
AND (prism_actions.y BETWEEN -33.0 AND 167.0)
AND (prism_actions.z BETWEEN 385.14867792476133 AND 585.1486779247614) 
AND prism_actions.action_time >= '2013-01-31 17:09:16'
GROUP BY prism_actions.block_id 
LIMIT 1000; 
```

我已经尝试了我们的应用程序可能使用的各种不同的查询，分组依据是最大的性能损失之一。

我们当前的表结构：

```
CREATE TABLE IF NOT EXISTS `prism_actions` (
  `id` int(11) unsigned NOT NULL auto_increment,
  `action_time` timestamp NOT NULL default CURRENT_TIMESTAMP,
  `action_type` varchar(25) NOT NULL,
  `player` varchar(16) NOT NULL,
  `world` varchar(255) NOT NULL,
  `x` int(11) NOT NULL,
  `y` int(11) NOT NULL,
  `z` int(11) NOT NULL,
  `block_id` mediumint(5) default NULL,
  `block_subid` mediumint(5) default NULL,
  `old_block_id` mediumint(5) default NULL,
  `old_block_subid` mediumint(5) default NULL,
  `data` varchar(255) default NULL,
  PRIMARY KEY  (`id`),
  KEY `x` (`x`),
  KEY `action_type` (`action_type`),
  KEY `player` (`player`),
  KEY `block_id` (`block_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=44525743 ; 
```

我们通常按三个字段分组，但这些字段对性能影响不大。我尝试过使用索引（有些人针对我们遇到的其他问题推荐了组合索引，但是用户可能会请求应用程序的查询有很多变体 - 无法真正知道他们将使用哪些字段） .

如何提高分组的性能​​？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T04:44:09.900

尝试以下更改：

1.  创建一个包含 world、block_id、x、y、z 和 action time 的复合索引
2.  使 block_id “不为空”
3.  对于 x、y、z 条件，将值向上取整，因为 x、y、z 无论如何都是整数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T02:31:02.040

您在查询中使用了 MySQL 的非标准功能。阅读：[http ://dev.mysql.com/doc/refman/5.5/en/group-by-extensions.html](http://dev.mysql.com/doc/refman/5.5/en/group-by-extensions.html)

这个特性对大表是有害的，因为它允许程序员向 MySQL 引擎隐藏他的意图。目前尚不清楚您将从`GROUP BY`子句中省略的所有项目获得什么结果。

此外，`COUNT(*)`比 快一点`COUNT(id)`，因为它不需要逻辑来清除`id`. 无论如何，您的桌子上没有它们，但仍然存在。

在优化查询时，您可能应该尝试使用标准 SQL。尝试这个：

```
 SELECT block_id, player, 
         x, y, z, 
         COUNT(*) action_type
    FROM prism_actions 
   WHERE world = 'world'
     AND prism_actions.x BETWEEN -1119.650147217701 AND -919.650147217701
     AND prism_actions.y BETWEEN -33.0 AND 167.0
     AND prism_actions.z BETWEEN 385.14867792476133 AND 585.1486779247614
     AND prism_actions.action_time >= '2013-01-31 17:09:16'
GROUP BY block_id, player, x, y, z 
   LIMIT 1000 
```

对于 block_id、player 和 position 的每个不同值，它将为您提供一行。

但是，您可能想要这个：

```
 SELECT block_id, player, 
         AVG(x) x, AVG(y) y, AVG(z) z, 
         COUNT(*) action_type
    FROM prism_actions 
   WHERE world = 'world'
     AND prism_actions.x BETWEEN -1119.650147217701 AND -919.650147217701
     AND prism_actions.y BETWEEN -33.0              AND 167.0
     AND prism_actions.z BETWEEN 385.14867792476133 AND 585.1486779247614 
     AND prism_actions.action_time >= '2013-01-31 17:09:16'
GROUP BY block_id, player 
   LIMIT 1000 
```

这将为每个匹配的 block_id 和 player 提供一行记录数和 x、y、z 的平均值。您还可以使用 MIN 和 MAX 来获取边界立方体而不是平均位置。

假设您还按`action_type`（根据您的评论）进行分组，请尝试以下操作：

```
 SELECT block_id, player, action_type 
         AVG(x) AS x, AVG(y) AS y, AVG(z) AS z, 
         COUNT(*) AS num
    FROM prism_actions 
   WHERE world = 'world'
     AND prism_actions.x BETWEEN -1119.650147217701 AND -919.650147217701
     AND prism_actions.y BETWEEN -33.0              AND 167.0
     AND prism_actions.z BETWEEN 385.14867792476133 AND 585.1486779247614 
     AND prism_actions.action_time >= '2013-01-31 17:09:16'
GROUP BY block_id, player, action_type 
   LIMIT 1000 
```

是否有某些原因您没有索引`y`,`z`和`action_time`？您的查询似乎对这些列值非常有选择性。

如果您不需要`AVG(x) AS x, AVG(y) AS y, AVG(z) AS z`结果集中的列，请将它们保留以节省时间。

LIMIT 子句对你有什么作用？请记住，结果集中的行顺序在形式上是不可预测的，因此 LIMIT 子句可能会不时选择不同的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T01:03:17.407

假设同一个查询在 3 列中表现良好，`group by`但在 1 列中表现不佳`block_id`，我们可以问有什么区别？

不同之处在于它`block_id`有一个索引。你会认为索引总能提高性能，但事实并非如此。我建议您删除索引`block_id`，看看它是否会提高您的查询性能。

幕后发生的事情（假设这解决了性能问题）是索引查找记录，然后必须从表中随机获取。下一个记录可能位于很远的地方。很快，页面缓存已满，每次读取记录都需要从磁盘读取页面。一个主要的性能瓶颈。

排序方法确实会读取数据，但效率更高，因为它一次读取一页上的所有记录。因此，删除索引*可能会*提高性能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T03:12:24.670

我在我的电脑上运行了一些脚本，我发现这个查询有两种情况

**第一的**

你应该计算有多少不同的`world`列值，因为那里有一个相等的子句，如果你有很多不同的值`world`，你可以在 world 和 block_id 上添加索引

> 更改表 prism_actions 添加索引 world_block_id(world, block_id)

它将使用此索引进行分组查询。

**第二**

将索引添加到 (x, y, z)

会有很多结果被过滤，它不会花费太多

**编辑：**

您可能应该像这样重写您的查询

> 解释 select player, x, y, z, count(a.id), action_type from prism_actions a inner join (select id from prism_actions
> where (x BETWEEN -1119.650147217701 AND -919.650147217701)
> AND (y BETWEEN -33.0 AND 167.0)
> AND (z BETWEEN 385.14867792476133 AND 585.1486779247614)
> AND action_time >= '2013-01-31 17:09:16') b on a.id=b.id group by a.block_id;

添加索引 x_y_z

> 警报表 prism_actions 添加索引 x_y_x(x, y, z);

# java - 如何使用按钮在文本字段中输入内容？

> ID：15754374
> 
> 赞同：2
> 
> 时间：2013-04-02T00:54:15.290
> 
> 标签：java, swing, user-interface, keyboard, awt

在我正在尝试制作的程序中，有三个文本字段伴随着几个按钮（每个代表一个数字）。我正在尝试获取它，以便您可以通过单击按钮（而不是键盘）来输入。到目前为止，我得到了这个：

```
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;
import javax.swing.text.*;

public class GUI extends JFrame {

    private JButton[] numPad = new JButton[10];
    private JTextField totalBill = new JTextField();
    private JTextField totalPeople = new JTextField();
    private JTextField tipPercentage = new JTextField();
    private JTextField tipAmount = new JTextField();
    private JTextField grandTotal = new JTextField();
    private JTextField totalPerPerson = new JTextField();
    private JButton doneButton = new JButton("Done");
    private JButton clearButton = new JButton("Clear");
    ////////////////////////////////////////////////////////////////////////
    private JPanel superContainer;
    private JPanel container;
    private JPanel panel1 = new JPanel();
    private JPanel panel2 = new JPanel();

    public GUI() {

            //Set JFrame title.
            super("Tip Calculator");

            superContainer = new JPanel();
            superContainer.setLayout(new BoxLayout(superContainer, BoxLayout.Y_AXIS));

    //Create a container to hold two GridLayouts beside one another.
            container = new JPanel();
            container.setLayout(new BoxLayout(container, BoxLayout.X_AXIS));

    //Create panels to be placed in container panel.
            panel1.setPreferredSize(new Dimension(500, 250));
            panel1.setLayout(new GridLayout(4,3,10,10));
            panel2.setPreferredSize(new Dimension(500, 250));
            panel2.setLayout(new GridLayout(7,2,10,10));

            //Populate all the JButtons for the numPad.
            for (int i=0; i<=9; i++) {
                numPad[i] = new JButton(Integer.toString(i));
            }

            //Place each numPad button on the first JPanel.
            for (int i=1; i<=9; i++) {
                panel1.add(numPad[i]);
            }
            panel1.add(numPad[0]);

            //Populate second GridLayout.
            panel2.add(new JLabel("Total Bill: "));
            panel2.add(totalBill);
            panel2.add(new JLabel("Total People: "));
            panel2.add(totalPeople);
            panel2.add(new JLabel("Total Percentage: "));
            panel2.add(tipPercentage);
            panel2.add(doneButton);
            panel2.add(clearButton);
            panel2.add(new JLabel("Tip Amount: "));
            panel2.add(tipAmount);
            panel2.add(new JLabel("Grand Total: "));
            panel2.add(grandTotal);
            panel2.add(new JLabel("Total/Person: "));
            panel2.add(totalPerPerson);
            grandTotal.setEditable(false);
            tipAmount.setEditable(false);
            totalPerPerson.setEditable(false);

            //Add the first GridLayout panel to the container.
            container.add(panel1);
            //Create a space between the GridLayout panels.
            container.add(Box.createRigidArea(new Dimension(30,0)));
            //Add the second GridLayout panel to the container.
            container.add(panel2);

            //Same as above but with title ontop and container panel below.
            superContainer.add(new JLabel("Title"));
            superContainer.add(Box.createRigidArea(new Dimension(0,30)));
            superContainer.add(container);

            //The panel the JFrame uses.
            this.setContentPane(superContainer);

            TheHandler handler = new TheHandler();
            doneButton.addActionListener(handler);
            clearButton.addActionListener(handler);

    }

    private class TheHandler implements ActionListener {

            public void actionPerformed(ActionEvent e) {

                   if (e.getSource()==doneButton) {
                            tipAmount.setText(Double.toString(Double.parseDouble(totalBill.getText()) * (Double.parseDouble(tipPercentage.getText()) / 100)));
                            grandTotal.setText(Double.toString(Double.parseDouble(tipAmount.getText()) + Double.parseDouble(totalBill.getText())));
                            totalPerPerson.setText(Double.toString(Double.parseDouble(grandTotal.getText()) / Double.parseDouble(totalPeople.getText()))); }
                    else if (e.getSource()==clearButton) {
                            grandTotal.setText("");
                            tipAmount.setText("");
                            totalPerPerson.setText("");
                            totalBill.setText("0");
                            tipPercentage.setText("0");
                            totalPeople.setText("1");
                            totalBill.requestFocus();
                            totalBill.selectAll(); }

            }

    }

} 
```

在网上搜索后，我发现了以下代码：

```
 private class AddDigit extends TextAction {
        private String digit;

        public AddDigit(String digit) {

            super( digit );
            this.digit = digit;

        }

        public void actionPerformed(ActionEvent e) {

            JTextComponent component = getFocusedComponent();
            component.replaceSelection( digit );

        }

    } 
```

唯一的问题是，我不知道如何使用我找到的代码（我找到的代码是第二个块）。

[我从哪里得到代码的。](https://stackoverflow.com/questions/8763695/add-text-to-a-text-field-via-jbuttons-when-there-are-two-textfields-calculator?rq=1)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T01:13:10.903

如果您不“期望”用户使用键盘来导航按钮，那么我只会让它们无法聚焦。这样，用户可以点击按钮，但当前活动的字段不会失去焦点。用户可以直接在字段中键入或单击小键盘...

![在此处输入图像描述](https://i.stack.imgur.com/djXc6.png)

```
import java.awt.BorderLayout;
import java.awt.Component;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.GridLayout;
import java.awt.KeyboardFocusManager;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.text.JTextComponent;

public class TestNumPad {

    public static void main(String[] args) {
        new TestNumPad();
    }

    public TestNumPad() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        public TestPane() {
            setLayout(new GridBagLayout());
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridwidth = GridBagConstraints.REMAINDER;
            JTextField field = new JTextField(10);
            add(field, gbc);
            add(new NumPad(), gbc);
            field.requestFocusInWindow();
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }
    }

    public class NumPad extends JPanel {

        private ActionHandler actionHandler;

        public NumPad() {
            setLayout(new GridLayout(4, 3));
            actionHandler = new ActionHandler();
            for (int index = 1; index < 10; index++) {
                add(createButton(index));
            }
            add(new JPanel());
            add(createButton(0));
            add(new JPanel());
        }

        protected JButton createButton(int index) {
            JButton btn = new JButton(String.valueOf(index));
            btn.setFocusable(false);
            btn.addActionListener(actionHandler);
            return btn;
        }

        public class ActionHandler implements ActionListener {

            @Override
            public void actionPerformed(ActionEvent e) {
                Object source = e.getSource();
                if (source instanceof JButton) {
                    JButton btn = (JButton) source;
                    try {
                        int value = Integer.parseInt(btn.getText().trim());
                        Component comp = KeyboardFocusManager.getCurrentKeyboardFocusManager().getFocusOwner();
                        if (comp instanceof JTextComponent) {
                            JTextComponent tc = (JTextComponent) comp;
                            tc.setText(tc.getText() + value);
                        }
                    } catch (Exception exp) {
                        exp.printStackTrace();
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T01:14:30.870

您需要做的实质是：
1\. 创建一个将数字附加到文本框末尾的方法
2\. 为调用该方法的每个按钮添加一个事件侦听器，将当前按钮的值传递给该方法。

例如：

```
// Method to Append Number to Textbox
public void addNumberToTextBox(int currentVal) {
     txtOutputBox.Value = txtOutputBox.Value + currentVal
} 

// Initialize Some Buttons 
JButton btnOne = new JButton("1");
JButton btnTwo = new JButton("2");
JButton btnThree = new JButton("3");

// Add an ActionListener to the buttons
ButtonHandler handler = new ButtonHandler();
btnOne.addActionListener(handler);
btnTwo.addActionListener(handler);
btnThree.addActionListener(handler);

// Class to deal with when a button is pressed
private class ButtonHandler implements ActionListener {
   public void actionPerformed(ActionEvent e) {
      // Converst the number to int
      int num = Integer.parseInt(e.getSource().Value);
      // Call the method
      addNumberToTextBox(num);                     
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T01:57:31.740

> 我不知道如何使用我找到的代码

您从 Action 创建一个按钮，然后将该按钮添加到您的 GUI。例如：

```
JButton one = new JButton( new AddDigit("1") ); 
```

该代码会将文本添加到具有焦点的最后一个文本字段。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-05T18:48:56.077

查看此演示代码。它将显示一个基本文本字段和一个文本区域，其中**文本字段是可编辑**的，而**文本区域是不可编辑**的。

当用户在文本字段中按 Enter 时，程序会将文本字段的内容复制到文本区域，然后选择文本字段中的所有文本。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class TextDemo extends JPanel implements ActionListener {
    protected JTextField textField;
    protected JTextArea textArea;
    private final static String newline = "\n";

    public TextDemo() {
        super(new GridBagLayout());

        textField = new JTextField(20);
        textField.addActionListener(this);

        textArea = new JTextArea(5, 20);
        textArea.setEditable(false);
        JScrollPane scrollPane = new JScrollPane(textArea);

        //Add Components to this panel.
        GridBagConstraints c = new GridBagConstraints();
        c.gridwidth = GridBagConstraints.REMAINDER;

        c.fill = GridBagConstraints.HORIZONTAL;
        add(textField, c);

        c.fill = GridBagConstraints.BOTH;
        c.weightx = 1.0;
        c.weighty = 1.0;
        add(scrollPane, c);
    }

    public void actionPerformed(ActionEvent evt) {
        String text = textField.getText();
        textArea.append(text + newline);
        textField.selectAll();

        //Make sure the new text is visible, even if there
        //was a selection in the text area.
        textArea.setCaretPosition(textArea.getDocument().getLength());
    }

    /**
     * Create the GUI and show it.  For thread safety,
     * this method should be invoked from the
     * event dispatch thread.
     */
    private static void createAndShowGUI() {
        //Create and set up the window.
        JFrame frame = new JFrame("TextDemo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //Add contents to the window.
        frame.add(new TextDemo());

        //Display the window.
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        //Schedule a job for the event dispatch thread:
        //creating and showing this application's GUI.
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    } 
```

查看以了解有关 JFrame 按钮和文本字段的更多信息：[https ://javatutorial.net/jframe-buttons-listeners-text-fields](https://javatutorial.net/jframe-buttons-listeners-text-fields)

# ace-editor - ACE Editor 行焦点问题

> ID：15754377
> 
> 赞同：0
> 
> 时间：2013-04-02T00:54:33.820
> 
> 标签：ace-editor

我想在不是 div 标签的每一行中放置一些文本，并通过鼠标单击来聚焦它们。默认情况下，ace 编辑器仅将鼠标光标聚焦在行文本内。我想专注于添加元素的线外。（[https://github.com/ajaxorg/ace/issues/1342](https://github.com/ajaxorg/ace/issues/1342)）

我已经在 lib/ace/layer/text.js 中插入了我的代码，如下所示。（只注意 mingji 的评论）

this.$renderLine = function(stringBuilder, row, onlyContents, foldLine) {

```
var lineNumber = row;
if (!foldLine && foldLine != false)
    foldLine = this.session.getFoldLine(row);

if (foldLine)
    var tokens = this.$getFoldLineTokens(row, foldLine);
else
    var tokens = this.session.getTokens(row);

if (!onlyContents) {
    stringBuilder.push(
        "<div class='ace_line' style='height:", this.config.lineHeight, "px'>"
    );
}

if (tokens.length) {
    var splits = this.session.getRowSplitData(row);
    if (splits && splits.length)
        this.$renderWrappedLine(stringBuilder, tokens, splits, onlyContents);
    else
        this.$renderSimpleLine(stringBuilder, tokens);
}

if (this.showInvisibles) {
    if (foldLine)
        row = foldLine.end.row

    stringBuilder.push(
        "<span class='ace_invisible'>",
        row == this.session.getLength() - 1 ? this.EOF_CHAR : this.EOL_CHAR,
        "</span>"
    );
}

****//<<2013.03.30 mingji add this code for comment input
stringBuilder.push(
    "<table id='notegrid",lineNumber,"' border='0' class='ace_notecomment' cellpadding='0' cellspacing='0' style='height:", this.config.lineHeight-4, "px;'> \
    <tr id='R",lineNumber,"'> \
    <td class='ace_notecomment_cn' >//note_cn</td> \
    <td class='ace_notecomment_en' >//note_en</td> \
    </tr> \
    </table>"
);
//>>**

if (!onlyContents)
    stringBuilder.push("</div>"); 
```

};

像这样在我的编辑器的每一行中显示的一些表格文本。但我无法将鼠标光标集中在行的表 td 元素上。

# javascript - 从返回的数组中获取变量

> ID：15754378
> 
> 赞同：2
> 
> 时间：2013-04-02T00:54:34.770
> 
> 标签：javascript, arrays

一个非常简单的问题，我就是找不到答案：

我有一个返回数组的回调函数：

```
function(data){
console.log(data);
} 
```

回报：

```
[Object]
    0: Object
        created: 1343816682
        created_userid: "12"
        id: "72"
        status: "Live" 
```

我需要提取返回的“id”并将其设置为变量。通常我会这样处理：

```
var id = (data.id); 
```

但这不起作用，大概是因为返回的数组与我通常处理的结构不同。

一些明亮的火花可以通过向我展示正确的语法来帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T00:56:23.747

我想也许你想要`data[0].id`？

# c++ - ifstream wchar_t minGW c++

> ID：15754379
> 
> 赞同：0
> 
> 时间：2013-04-02T00:54:39.860
> 
> 标签：c++, mingw

我将 eclipse 与 minGW 32 一起使用。我创建了一个类：

```
Data(HWND hwnd,  wchar_t szFileName[MAX_PATH])
{
std::vector<std::string> fileRows;  
    string sIn;
    ifstream infile;
    infile.open(szFileName);
    infile.seekg(0,ios::beg);

    // fill vector with file rows
    while ( getline(infile,sIn ) )
    {
       fileRows.push_back(sIn);
    }
} 
```

但`ifstream`在 MinGW 中无法解决`wchar_t`. 如何将文件行存储在`fileRows`向量中？绝对确定文件行是字符串而不是 wstring。所以我应该将这些行存储在`std::vector<std::string>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T00:59:58.367

如果您打算使用 读取文本数据`wchar_t`，请使用[`std::wifstream`](http://en.cppreference.com/w/cpp/io/basic_ifstream)读取并[`std::wstring`](http://en.cppreference.com/w/cpp/string/basic_string)存储它。

`std::ifstream`并且`std::string`是专门为使用而设计的`char`。

# c# - 从 C# 到 Arduino 通过网络接收的不完整数据

> ID：15754383
> 
> 赞同：0
> 
> 时间：2013-04-02T00:55:01.960
> 
> 标签：c#, wpf, serial-port, arduino, tcpclient

我正在尝试从 WPF C# 应用程序向作为服务器运行的 Arduino 发送一个单词。时不时地不发送完整的工作。

### C# 代码

```
public void send(String message)
{
    TcpClient tcpclnt = new TcpClient();
    ConState.Content = "Connecting.....";
    try
    {
        tcpclnt.Connect("192.168.0.177", 23);
        ConState.Content = "Connected";

        String str = message;
        Stream stm = tcpclnt.GetStream();

        ASCIIEncoding asen = new ASCIIEncoding();
        byte[] ba = asen.GetBytes(str);

        stm.Write(ba, 0, ba.Length);

        tcpclnt.Close();

    }
    catch (Exception)
    {
        ConState.Content = "Not Connected";
        return;
    }
} 
```

它是如何发送到方法的：

```
String mes = "back;";
send(mes); 
```

### Arduino代码：

```
if (client.available() > 0) {
    // Read the bytes incoming from the client:
    char thisChar = client.read();

    if (thisChar == ';')
    {
        //Add a space
        Serial.println("");
    }
    else {
        //Print because it's not a space
        Serial.write(thisChar);
    }
} 
```

Arduino 正在使用聊天服务器示例。我正在发送“回”；和“前进”；穿过。串行监视器上的结果：

```
back
forwaback
forward
back
forwaforwar 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:19:45.463

问题似乎出在这段代码上：

```
if (client.available() > 0) {

  // read the bytes incoming from the client:
  char thisChar = client.read();

  ...
} 
```

它的作用是：

*   检查我们是否收到了来自客户端的数据
*   **从客户端缓冲区读取单个字节**
*   退出，继续做其他事情

正如 OP 所指出的，这直接来自 Arduino[聊天服务器示例](http://arduino.cc/en/Tutorial/ChatServer)。在该示例中，这是否正常工作`loop()`取决于在`alreadyConnected`建立新连接后立即设置的标志：如果不是，则在读取任何数据之前刷新缓冲区。那是一种可能的地雷。

* * *

尽管如此，在 OP 的情况下，没有理由将`if`块更改为`while`循环，换句话说，而不是

```
if (client.available() > 0) { 
```

有

```
while (client.available() > 0) { 
```

有一个声明的唯一原因是，如果您有发送大量数据的客户端，请`if`确保您经常执行其他处理：如果从内部完成客户端数据的读取，则此循环将不会退出，直到有没有来自客户端的更多数据。由于在所询问的情况下这似乎不是问题，因此更改是有道理的。`loop()``while``if``while`

# sql-server - 为什么“SELECT 1 from”会在另一个执行 DELETE 的进程上导致 LCK_M_IX 我有一张列出 Patient_clinic_visits 的表格。我有 SQLSERVER 2005 后端。Access2010 前端。 每天早上，该表都需要从医院大型机的数据转储中刷新。 此数据转储包括前一天的信息（谁参加、没有参加、取消）和未来 6 周的预约。 因此，我在 Patient_clinic_visits where V 问问题 问问题 2013-04-02T00:56:19.667 2578 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我有一张列出 Patient_clinic_visits 的表格。我有 SQLSERVER 2005 后端。Access2010 前端。 每天早上，该表都需要从医院大型机的数据转储中刷新。 此数据转储包括前一天的信息（谁参加、没有参加、取消）和未来 6 周的预约。 因此，我在 Patient_clinic_visits where Visit_Date > (a day) and < (a day + 1) 中执行“DELETE *”，以便在经过一些处理后上传新数据之前依次清理每天的表格。 在大多数日子里，每天只有大约 100-150 条记录。它们是 Master_Patient_Table 中 Pat_ID 的一个外键，上面有 NO_ACTION 链。 目前，在处理了几天的数据后，此 Delete 查询在 Access 前端超时（即周一、周二、周三......） 我运行 sp_whoisactive 并得到： 00 01:53:01.926 52 [[query SELECT 1 FROM "dbo"."Patient_Clinic_Visits"]] RAHCC_User (265ms)ASYNC_NETWORK_IO 0 0 0 NULL 51 0 0 2 暂停 0 NULL SAH0020663 RAHCC_DB Microsoft MDB RAHCC 2013-04-02 09： 08:33.027 0 2013-04-02 11:01:35.033 00 00:00:27.610 53 [[查询 -- 从 Patient_Clinic_Visits 中删除诊所日期 >= '26-Mar-2013' AND Clinic_date < '27-Mar-2013' AND Clinic_location = 'MONC' ]] HAD\jhogan05 (27596ms) LCK_M_IX 16 0 0 52 1,074 0 0 130 暂停 2 NULL SAH0048645 RAHCC_DB Microsoft SQL Server Management Studio Express - 查询 2013-04-02 11:01:07.343 0 2013-04-02 11:01:35.033 这表明我的客户端前端正在等待“来自 Patient_Clinic_Vists 的 SELECT 1”，这会阻止该过程。显然这是由于客户端上的 ASYNC_NETWORK_IO （这可能发生在 Access 前端执行表请求然后不处理数据时）。 a）但是“从 Patient_Clinic_Visits 中选择 1”实际上应该只返回 TRUE 或 FALSE ？这不太可能填满任何东西，并且不清楚为什么会导致阻塞情况？ b) 我在 Access 前端的任何地方都找不到“SELECT 1 ...”。这可能是 SQLSERVER 为响应更复杂的选择而做出的一系列子选择的一部分吗？如果是这样，我如何在该进程历史记录中找到导致这种情况的真正选择？ 干杯， 乔恩高清 a) 查询“从 Patient_Clinic_Visits 中选择 1”将返回空结果集（如果 Patient_Clinic_Visits 表为空）或包含与 Patient_Clinic_Visits 表一样多的行的结果集，每行中都有一个 1。为此，SQL Server 必须针对整个 Patient_Clinic_Visits 表发出查询，这（假设默认锁定行为）将导致共享（读取）锁成为针对该表中的行的问题。 b) （注意：OP 在评论中提到了这一点）我可能遗漏了一些东西，但我看不出你在哪里提出了基于 sp_whosactive 的“从 Patient_Clinic_Vists 中选择 1”查询。了解从应用程序发送到数据库服务器的 SQL 的最佳方式可能是使用带有适当过滤器的 SQL Profiler（可能仅过滤来自运行应用程序的主机的连接）。 sql-serverms-accessvbams-access-2010sp-who2 4 1 回答 1 This answer is useful 1 a) 查询“从 Patient_Clinic_Visits 中选择 1”将返回空结果集（如果 Patient_Clinic_Visits 表为空）或包含与 Patient_Clinic_Visits 表一样多的行的结果集，每行中都有一个 1。为此，SQL Server 必须针对整个 Patient_Clinic_Visits 表发出查询，这（假设默认锁定行为）将导致共享（读取）锁成为针对该表中的行的问题。 b) （注意：OP 在评论中提到了这一点）我可能遗漏了一些东西，但我看不出你在哪里提出了基于 sp_whosactive 的“从 Patient_Clinic_Vists 中选择 1”查询。了解从应用程序发送到数据库服务器的 SQL 的最佳方式可能是使用带有适当过滤器的 SQL Profiler（可能仅过滤来自运行应用程序的主机的连接）。 于 2013-04-02T03:12:51.947 回答 Related 1 jquery - MVC 使用 jquery 更新视图的模型 0 linux - 如何在构建动态库时强制 libtool 使用静态库？ 4 php - 在 Phalcon php 框架中创建 Excel 文件 5 java - 休眠 NoCacheRegionFactoryAvailableException 1 hibernate - 使用 Hibernate Projections 查找两列之间的差异 3 java - java.lang.NumberFormatException：对于输入字符串：“10.0” 2 vb.net - 打开应用程序路径+特定文件夹的按钮 2 c - 短路评估是否保证评估顺序？ 0 c# - 在 wp7 中的 XAML 中开始故事板 1 html - HTML5：当页眉等于文章页眉时怎么办？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15754391
> 
> 赞同：1
> 
> 时间：
> 
> 标签：sql-server, ms-access, vba, ms-access-2010, sp-who2

我有一张列出 Patient_clinic_visits 的表格。我有 SQLSERVER 2005 后端。Access2010 前端。

每天早上，该表都需要从医院大型机的数据转储中刷新。

此数据转储包括前一天的信息（谁参加、没有参加、取消）和未来 6 周的预约。

因此，我在 Patient_clinic_visits where Visit_Date > (a day) and < (a day + 1) 中执行“DELETE *”，以便在经过一些处理后上传新数据之前依次清理每天的表格。

在大多数日子里，每天只有大约 100-150 条记录。它们是 Master_Patient_Table 中 Pat_ID 的一个外键，上面有 NO_ACTION 链。

目前，在处理了几天的数据后，此 Delete 查询在 Access 前端超时（即周一、周二、周三......）

我运行 sp_whoisactive 并得到：

> 00 01:53:01.926 52 [[query SELECT 1 FROM "dbo"."Patient_Clinic_Visits"]] RAHCC_User (265ms)ASYNC_NETWORK_IO 0 0 0 NULL 51 0 0 2 暂停 0 NULL SAH0020663 RAHCC_DB Microsoft MDB RAHCC 2013-04-02 09： 08:33.027 0 2013-04-02 11:01:35.033
> 
> 00 00:00:27.610 53 [[查询 -- 从 Patient_Clinic_Visits 中删除诊所日期 >= '26-Mar-2013' AND Clinic_date < '27-Mar-2013' AND Clinic_location = 'MONC' ]] HAD\jhogan05 (27596ms) LCK_M_IX 16 0 0 52 1,074 0 0 130 暂停 ​​2 NULL SAH0048645 RAHCC_DB Microsoft SQL Server Management Studio Express - 查询 2013-04-02 11:01:07.343 0 2013-04-02 11:01:35.033

这表明我的客户端前端正在等待“来自 Patient_Clinic_Vists 的 SELECT 1”，这会阻止该过程。显然这是由于客户端上的 ASYNC_NETWORK_IO （这可能发生在 Access 前端执行表请求然后不处理数据时）。

a）但是“从 Patient_Clinic_Visits 中选择 1”实际上应该只返回 TRUE 或 FALSE ？这不太可能填满任何东西，并且不清楚为什么会导致阻塞情况？

b) 我在 Access 前端的任何地方都找不到“SELECT 1 ...”。这可能是 SQLSERVER 为响应更复杂的选择而做出的一系列子选择的一部分吗？如果是这样，我如何在该进程历史记录中找到导致这种情况的真正选择？

干杯，

乔恩高清

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T03:12:51.947

a) 查询“从 Patient_Clinic_Visits 中选择 1”将返回空结果集（如果 Patient_Clinic_Visits 表为空）或包含与 Patient_Clinic_Visits 表一样多的行的结果集，每行中都有一个 1。为此，SQL Server 必须针对整个 Patient_Clinic_Visits 表发出查询，这（假设默认锁定行为）将导致共享（读取）锁成为针对该表中的行的问题。

b) （注意：OP 在评论中提到了这一点）我可能遗漏了一些东西，但我看不出你在哪里提出了基于 sp_whosactive 的“从 Patient_Clinic_Vists 中选择 1”查询。了解从应用程序发送到数据库服务器的 SQL 的最佳方式可能是使用带有适当过滤器的 SQL Profiler（可能仅过滤来自运行应用程序的主机的连接）。

# php - ListView 与 android mysql 数据库使用 php

> ID：15754397
> 
> 赞同：2
> 
> 时间：2013-04-02T00:56:47.560
> 
> 标签：php, android, mysql, listview

我正在制作一个连接到外部的 android 应用程序，`mysql database`并且我有一个**登录**和**注册**功能正在使用它。

我的数据库中有一个名为课程的表，其中包含列名称和时间。我一直在寻找一种方法来读取数据库并在列表视图中显示该表的内容，但我找不到任何适合我的方法。

我意识到有很多类似的问题，但我没有发现其中任何一个有帮助，我真的开始挣扎。

**这是我的活动页面：**

```
package com.example.studentregister;

//imports

import com.example.studentregister.library.JSONParser;
import com.example.studentregister.R;

public class ProfilePage extends ListActivity {
// Progress Dialog
private ProgressDialog pDialog;

// Creating JSON Parser object
JSONParser jParser = new JSONParser();

ArrayList<HashMap<String, String>> lessonList;

// url to get all products list
private static String url_all_lessons = "http://192.168.0.6/android_login_api/get_all_lessons.php";

// JSON Node names
private static final String TAG_SUCCESS = "success";
private static final String TAG_LESSONS = "lessons";
private static final String TAG_PID = "uid";
private static final String TAG_NAME = "name";

// products JSONArray
JSONArray lessons = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.profilepage);

    // Hashmap for ListView
    lessonList = new ArrayList<HashMap<String, String>>();

    // Loading products in Background Thread
    new LoadAllProducts().execute();

    // Get listview
    ListView lv = getListView();

}

// Response from Edit Product Activity
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    // if result code 100
    if (resultCode == 100) {
        // if result code 100 is received
        // means user edited/deleted product
        // reload this screen again
        Intent intent = getIntent();
        finish();
        startActivity(intent);
    }

}

/**
 * Background Async Task to Load all product by making HTTP Request
 * */
class LoadAllProducts extends AsyncTask<String, String, String> {

    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(ProfilePage.this);
        pDialog.setMessage("Loading products. Please wait...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    /**
     * getting All products from url
     * */
    protected String doInBackground(String... args) {
        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        // getting JSON string from URL
        JSONObject json = jParser.makeHttpRequest(url_all_lessons, "GET", params);

        // Check your log cat for JSON reponse
        Log.d("All Products: ", json.toString());

        try {
            // Checking for SUCCESS TAG
            int success = json.getInt(TAG_SUCCESS);

            if (success == 1) {
                // products found
                // Getting Array of Products
                lessons = json.getJSONArray(TAG_LESSONS);

                // looping through All Products
                for (int i = 0; i < lessons.length(); i++) {
                    JSONObject c = lessons.getJSONObject(i);

                    // Storing each json item in variable
                    String id = c.getString(TAG_PID);
                    String name = c.getString(TAG_NAME);

                    // creating new HashMap
                    HashMap<String, String> map = new HashMap<String, String>();

                    // adding each child node to HashMap key => value
                    map.put(TAG_PID, id);
                    map.put(TAG_NAME, name);

                    // adding HashList to ArrayList
                    lessonList.add(map);
                }
            } else {
                // no products found
                // Launch Add New product Activity
                Intent i = new Intent(getApplicationContext(),
                        LoginActivity.class);
                // Closing all previous activities
                i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(i);
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        return null;
    }

    /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute(String file_url) {
        // dismiss the dialog after getting all products
        pDialog.dismiss();
        // updating UI from Background Thread
        runOnUiThread(new Runnable() {
            public void run() {
                /**
                 * Updating parsed JSON data into ListView
                 * */
                ListAdapter adapter = new SimpleAdapter(
                        ProfilePage.this, lessonList,
                        R.layout.eachlesson, new String[] { TAG_PID,
                                TAG_NAME},
                        new int[] { R.id.uid, R.id.name });
                // updating listview
                setListAdapter(adapter);
            }
        });

    }

}
} 
```

这是我的两个xml文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">
    <!-- Main ListView
         Always give id value as list(@android:id/list)
    -->
<ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"/> 
```

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <!-- Name Label -->
    <TextView
        android:id="@+id/name"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingTop="6dip"
        android:paddingLeft="6dip"
        android:textSize="17dip"
        android:textStyle="bold" />

</LinearLayout> 
```

问题atm是列表适配器中的uid

```
new int[] { R.id.uid, R.id.name }); 
```

无法解决或不是字段。但是我在另一个项目上没有这个错误的例子，但页面上没有显示任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T01:23:43.817

你应该用 R.id.name 在第二个 xml 上广告 R.id.uid。为什么你不创建那个 id？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T20:50:42.353

我不是很肯定（在 Android 上使用 MySql 时），但是在使用 sqlite 时，你必须有一个名为 _id 的文件，否则它将不起作用。我将从您的 mysql 数据库中开始。您还必须在显示数据时选择该字段，否则它将不起作用。我花了几个小时来处理这个具体问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-30T17:02:09.397

也许这个博客可以帮助你： http: [//nanang18nurhidayat.files.wordpress.com/2013/03/list-view-with-image-from-url-mysql-json-php.pdf](http://nanang18nurhidayat.files.wordpress.com/2013/03/list-view-with-image-from-url-mysql-json-php.pdf)

# ember.js - emberjs新手 - 未为路由器定义地图功能

> ID：15754398
> 
> 赞同：0
> 
> 时间：2013-04-02T00:56:54.077
> 
> 标签：ember.js, ember-old-router

我只是从 emberjs 开始。我正在创建一个简单的 index.html 页面，顶部有两个链接：关于和帖子。这是遵循 emberjs 主页上的标准示例。我在浏览器中收到错误

> “未捕获的类型错误：无法调用未定义的方法‘映射’”

所以这意味着我的路由器是未定义的。这是为什么？

这是 app.js 代码：

```
var App = Ember.Application.create();

App.router.map(function(){

}); 
```

所以我试图定义它......

```
var App = Ember.Application.create();

App.Router = Ember.Router.extend({
  enableLogging: true,
  location: 'hash'
});

App.Router.map(function(){

}); 
```

我仍然得到错误。我很困惑 ：（。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:13:32.903

确保您使用的是来自[http://emberjs.com/](http://emberjs.com/)的最新版本的 Ember (1.0.0-RC.2) 。

您发布的示例是不再使用的旧式路由器。新样式在[本指南](http://emberjs.com/guides/routing/)中进行了解释，定义如下：

```
App.Router.map(function() {
  this.route("about", { path: "/about" });
  this.route("favorites", { path: "/favs" });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T01:09:41.747

所以我遇到了关于stackoverflow的另一个问题。[http://goo.gl/JVEs9](http://goo.gl/JVEs9)。我从链接中获得了一个版本的 ember (1.0.0-pre.2) 并重新编写了代码，如下所示：

```
var App = Ember.Application.create();

App.Router.map(function(match){
    match('/').to('index');
    match('about').to('about');  
}); 
```

这似乎有效。我仍然无法得到：

```
var App = Ember.Application.create();

App.Router.map(function(){
    this.resource('about');
}); 
```

我得到错误

> Uncaught TypeError: Object # has no method 'resource'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T12:42:10.080

资源不是终点。尝试以下操作：

```
App.Router.map(function() {

  this.resource('about', function() {
  });

}); 
```

# java - 单击按钮后图像不显示

> ID：15754402
> 
> 赞同：0
> 
> 时间：2013-04-02T00:57:33.363
> 
> 标签：java, netbeans, jlabel, imageicon

我在单击按钮后无法添加图像，我只添加了带有 jlabel/imageicon 的代码

```
JLabel picture;     
public Check() {   
    picture = new JLabel(createImageIcon("images\\exit.png"));   
    add(picture, BorderLayout.WEST);   
}   

 public void actionPerformed(ActionEvent e) {   
    picture.setIcon(createImageIcon("images\\update.png"));   
    }   

protected static ImageIcon createImageIcon(String path) {   
    java.net.URL imgURL = Check.class.getResource(path);   
    System.err.println(imgURL);   
    if (imgURL != null) {   
        return new ImageIcon(imgURL);   
    } else {   
        System.err.println("Couldn't find file: " + path);   
        return null;   

    }   
} 
```

我的路径总是为空，可能是什么问题

当我测试另一种方式时，图像路径是正确的，

```
public Check() {   
String imgStr = "images\\exit.png";   
     ImageIcon image = new ImageIcon(imgStr);   
     JLabel label1 = new JLabel(image, JLabel.CENTER);   
     JPanel South = new JPanel();   
     South.add(label1);   
     add("South", South);   
} 
```

图像出现，但这是在我运行它时完成的，图像已经存在，而不是当我单击按钮时。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T07:23:56.513

请尝试`picture.setIcon(createImageIcon("/images/update.png"));`，因为看起来您的图像是从类路径加载的。

看这里：

> 查找具有给定名称的资源。如果没有找到具有此名称的资源，则此方法返回 null。搜索与给定类关联的资源的规则由该类的定义类加载器实现。
> 
> 在对资源名称进行以下更改后，此方法将调用委托给其类加载器：如果资源名称以“/”开头，则它不变；否则，在转换“.”之后，包名称将附加到资源名称之前。到 ”/”。如果此对象由引导加载程序加载，则调用委托给 ClassLoader.getSystemResource。

*[http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Class.html#getResource%28java.lang.String%29](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Class.html#getResource%28java.lang.String%29)*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T07:29:25.853

或者您可以简单地在执行的操作方法中添加这一行。

```
 picture = new JLabel(new ImageIcon("/images/update.png")); 
```

# iphone - iOS - 在两个滚动视图上使用 TPKeyboardAvoiding，它们会相互影响

> ID：15754406
> 
> 赞同：0
> 
> 时间：2013-04-02T00:58:30.913
> 
> 标签：iphone, ios, uitextfield

找到 michaeltyson/TPKeyboardAvoiding 解决键盘阻塞文本字段问题真是太幸运了。TPKeyboardAvoiding 非常好。用户只需将自定义类定义为 TPKeyboardAvoiding 即可实现。

我的问题和问题是：

在我的情况下，我有两个视图，包括滚动视图。在每个滚动视图中，都有多个文本字段。一种观点与另一种观点相衔接。在 segued 视图的最后一个文本字段被编辑后，前一个视图无法滚动到最后一个文本字段。

总而言之，在用户编辑一个滚动视图后，另一个视图的内容插入 -> 底部值发生了变化！有人和我有类似的经历吗？

正确一个

![正确一个](https://i.stack.imgur.com/HleGI.png)

错了一个

![错了一个](https://i.stack.imgur.com/QabDT.png)

我不成功的尝试：我尝试将另一对 TPKeyboardAvoidingScrollView.h & .m 文件复制到项目中，并将它们重命名。它不起作用。 ![在此处输入图像描述](https://i.stack.imgur.com/5JrlR.png)

![在此处输入图像描述](https://i.stack.imgur.com/S8GXZ.png)

顺便说一句，即使是 segued 视图也不能完全提升最后一个文本字段。![在此处输入图像描述](https://i.stack.imgur.com/OCD9b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-04T11:54:03.877

I have not used TPKeyboardAvoid with two Scroll views but sometime using alternate framework might solve your problem :

You can give try to following frameworks -

[https://github.com/muanis/sampleapps_scrollview](https://github.com/muanis/sampleapps_scrollview)

[https://github.com/kirpichenko/EKKeyboardAvoiding](https://github.com/kirpichenko/EKKeyboardAvoiding)

[https://github.com/freerunnering/SwipeSelection](https://github.com/freerunnering/SwipeSelection)

[https://github.com/rnystrom/RNAvatarLogin](https://github.com/rnystrom/RNAvatarLogin)

[https://github.com/lupidan/UIKeyboardCoView](https://github.com/lupidan/UIKeyboardCoView)

# css - 导航菜单中的嵌套 LI 未显示正确的背景颜色

> ID：15754407
> 
> 赞同：0
> 
> 时间：2013-04-02T00:58:45.303
> 
> 标签：css

我有一个导航菜单，每个 LI 都有不同的背景底边框。然后我希望每个子菜单在悬停时都包含该背景边框。问题是我根据 listItems 的数量分配背景颜色。这会延续到子菜单，这是我不想要的。如果您看到，一些比主菜单有更多 LI 的子菜单，它们在经过与主菜单相同的编号后具有正确的背景颜色。我希望这一切都有意义。

任何人都知道如何让每个子菜单都有自己的背景悬停？

起点：http: [//jsfiddle.net/trevoray/BgMAj/](http://jsfiddle.net/trevoray/BgMAj/)

```
 .nav li:first-child + li:hover > a {
background: #0f2992;
color: white;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T01:16:41.490

只需添加`> a`ID hover css：

```
#sub-members li:hover > a {} 
```

[更新小提琴](http://jsfiddle.net/NotInUse/BgMAj/2/)

# entity-framework - ASP.Net WebAPI OData - 实体上的复合键

> ID：15754412
> 
> 赞同：0
> 
> 时间：2013-04-02T00:59:25.880
> 
> 标签：entity-framework, asp.net-web-api, odata

我的 EF 数据模型中有一些实体，其中实体的键是两列的组合。

虚构（但相当接近）的例子......三个实体

```
Patients
  PatientID           (PK)
  PatientName, etc

Identifiers
  PatientID           (PK)
  IdentifierTypeID    (PK)
  Code
  StartDate, etc

IdentifierTypes
  IdentifierTypeID    (PK)
  Description 
```

Identifiers 表有一个复合键。基本上是患者和 IdentifierTypes 之间的多对多，但数据在连接表上。这应该无关紧要，但如果确实如此，ID 就是 GUID（SQL Server 中的唯一标识符）。

我可以稍微弯曲我的数据库以在标识符中创建一个新列，例如“IdentifierID”，它可能是主键，但我们有一个遗留代码库，如果可以避免的话，我宁愿不修改它。

我可以看到几种避免修改表的解决方案，尽管我不确定在 WebAPI 中是否真的可行

a）在数据库中创建一个视图并将其作为我的实体的基础。视图的形式为

```
select 
  *,
  IdentifierID = cast( PatientID as varchar(50) ) + '_' + cast( IdentifierTypeID as varchar(50) )
from Identifiers 
```

这有一个问题是从实体框架中寻找 IdentifierID 会很慢。我可以用我想的索引视图来纠正这个问题。

b) 与 (a) 相同，但在我的控制器的 [Queryable] Get() 方法中，我改为使用 ODataQueryOptions 和一些表达式解析魔法（根本没有经验）来查看我们是否在 IdentifierID 上进行过滤，如果是的话，将其拆分为 PatientID 和 IdentifierTypeID 上的过滤器

c) 我保持原样，并在 WebAPI OData 堆栈中发现了一些对 Tuple 作为实体键的未知支持。那太棒了 :) 我继承自 EntitySetController<>，所以看起来我继承自 EntitySetController>

d) (c) 的一些混合，虽然不那么聪明，但仍能达到相同的结果

在 OData 规范中似乎有复合键，因为 StackOverflow 上的另一个问题说明了如何在 OData 中处理这样的实体（使用 WCF 数据服务）。[如何处理 OData Url 中使用复合身份密钥的实体？](https://stackoverflow.com/questions/12509111/how-to-address-entity-that-uses-composite-identity-key-in-odata-url)

我不介意使用每晚构建，甚至使用 ASP.Net 源代码——我已经在周末单步执行 OData 请求以解决另一个问题（我的错）在查询字符串中格式化 GUID：P 我希望有人已经投资理解这一点的时间，我可以避免另一天在框架源代码中遇到断点。

谢谢你的帮助，伊恩

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T01:11:33.577

可以使用 Web API OData 执行复合键。你甚至不需要使用每晚构建来做到这一点。RTM 位应该是好的。有关详细信息，请参阅 Hongye 的此出色[示例](http://aspnet.codeplex.com/SourceControl/changeset/view/9cb7243bd9fe3b2df484bf2409af943f39533588#Samples/WebApi/ODataCompositeKeySample/ReadMe.txt)。

# ruby - 为什么在 Sinatra/Padrino 中为 nil:NilClass 定义未定义的方法“电子邮件”？

> ID：15754413
> 
> 赞同：1
> 
> 时间：2013-04-02T00:59:27.067
> 
> 标签：ruby, sinatra, padrino

我正在关注本教程[http://www.padrinorb.com/guides/blog-tutorial](http://www.padrinorb.com/guides/blog-tutorial)并`undefined method email for nil:NilClass`在将用户分配给所有现有帖子后出现错误。

我错过了什么吗？可能教程与最新版本的 Padrino 已过时？

我需要在 models/account.rb 中添加某种关联吗？

**更新和解决方案**

确保在应用结构的主文件夹中有 post.rb 模型。我在应用程序/模型下有它。

```
#app/models/post.rb
class Post < ActiveRecord::Base
  belongs_to :account
  validates_presence_of :title
  validates_presence_of :body
end 
```

然后

```
$ padrino rake ar:migrate:redo 
```

# javascript - 脚本调试器确认 JSON 键和字符串之间的预期条件检查，但是我得到了不想要的结果？

> ID：15754414
> 
> 赞同：0
> 
> 时间：2013-04-02T00:59:29.933
> 
> 标签：javascript, json

我正在寻找修改我从这个方便[的 Json-to-HTML-Table](https://github.com/afshinm/Json-to-HTML-Table)脚本中获得的输出表，我在这里偶然发现了 SO。有一点（第 86 行），*json-to-table.js*传递一个 JSON 对象并生成用作表头的数组键。可选地，此`array_key`函数只能为`search_value`传递的指定参数生成一个键。但是，我 [尝试] 对其进行修改，以便返回所有不匹配的数组键`search_value`。这是我更改后的功能：

```
function array_keys(input, search_value, argStrict)
{
    var search = typeof search_value !== 'undefined', tmp_arr = [], strict = !!argStrict, include = '', key = '';

    if (input && typeof input === 'object' && input.change_key_case) { // Duck-type check for our own array()-created PHPJS_Array
        return input.keys(search_value, argStrict);
    }

    for (key in input)
    {
        if (input.hasOwnProperty(key))
        {
            include = false;
            if (search)
            {
                if (strict && input[key] == search_value)
                    include = false;
                else if (input[key] == search_value)
                    include = false;
                else
                    include = true;
            } 
            if (include)
                tmp_arr[tmp_arr.length] = key;
        }
    }
    return tmp_arr;
} 
```

现在，我这样做的原因是因为我希望生成的表不包含 JSON 对象中的特定列：

```
{
    "examItemCategories": [
        {
            "catgoryName": "01-Normal processes",
            "catgoryPath": "General Area\\01-Normal processes",
            "numberOfItems": 2,
            "percentage": "6.06"
        }
    ]
} 
```

鉴于我无法修改传递的原始 JSON obj，我正在确定是否尝试修改表创建后（例如删除列），或期间。在查看`array_keys`函数后，我觉得我可以轻松地反转对`search_value`.

我现在`array_keys(parsedJson[0], 'catgoryPath');`从 json-to-table 脚本调用。（是的，*catgoryPath*是正确拼写的名称哈哈）。然后我在函数内的 for 循环处设置了一个断点，以便`array_keys`在 Firebug 中跟踪它。

第一次迭代：`catgoryName`被添加到`tmp_arr`，第二次迭代：`catgoryPath`被添加到`tmp_arr`...并继续进行第 3 次和第 4 次迭代。我不想`catgoryPath`添加。

查看脚本调试器，在第二次迭代中，是否`catgoryPath`添加归结为条件：`else if (input[key] == search_value)`行。问题是，根据 Firebug ，在相应的迭代中，变量`key`和变量都等于“catgoryPath”。`search_value`那么，`include = false;`火应该正确吗？

任何帮助表示赞赏，对内联代码的长度和自由使用表示歉意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:30:48.923

`array_keys`如果您使用的是 JS > 1.8.5，则可以使用[Object.keys(obj)](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys)返回给定对象自己的可枚举属性的数组，而不是使用 json-to-table 脚本中的函数。

然后，返回的键数组用作表头，由于脚本，表在表头下填充了 JSON 数据。在创建表之前，我使用了我的表头数组并使用[array.splice(index, howMany)](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/splice)而不是`delete`（[参见此处](https://stackoverflow.com/questions/500606/javascript-array-delete-elements)）来保存我的数组索引值。

# css - 即使 HTML 和正文高度为 100%，Div 也不会将高度拉伸到窗口底部

> ID：15754416
> 
> 赞同：0
> 
> 时间：2013-04-02T00:59:51.510
> 
> 标签：css, html, twitter-bootstrap

我正在尝试制作一个延伸到窗口底部的 div，以便 div 内容的任何溢出都会触发滚动。我在网上查看了如何将 div 拉伸到窗口底部，以及所有所说的 make`html`和`body`都具有`height: 100%;`. 我已经这样做了，但它仍然不起作用。相关代码如下：

**html:**

```
<script type="text/x-handlebars">
  <div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container">
        <a class="btn btn-navbar">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
      </div>
    </div>
  </div>

  {{outlet}}
</script>

<script type="text/x-handlebars" id="tasks">
  <div class="tasklist row-fluid span8 offset2">
    <table class="table table-bordered table-hover">
      {{#each model}}
        {{partial 'tasks/taskListElement'}}
      {{/each}}
    </table>
  </div>
</script> 
```

**CSS：**

```
html, body {height: 100%;}

.tasklist {
  height: 100%;
  overflow: scroll;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T01:14:55.903

您已经将您的标签包含`div.tasklist`在一个`script`可能是问题的标签中，它获得了其父级的 100% 高度，即`script#tasks`. `<script>`有自己的风格，尝试也应用 100% 高度`script#tasks`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T01:02:55.373

你有一个重置的css文件附件吗？如果没有，某些浏览器会默认添加边距或填充，因此您最终会出现间隙。这是它的链接。

[http://meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

# django - 在视图 GET 方法上使用 @csrf_protect

> ID：15754424
> 
> 赞同：1
> 
> 时间：2013-04-02T01:01:03.063
> 
> 标签：django, python-2.7, django-views, django-csrf, django-1.5

我的大部分 GET 请求都是由 Angular 触发的，这使得在 header 中设置 CSRF Token 变得很容易。这对于 POST 请求已经是开箱即用的了，但是我想知道我是否也可以对 GET 请求使用 CSRF 保护。

我最初的直觉是`@csrf_protect`在 View 的 get 方法之前添加，例如：

```
class ProjectView(View):
    @csrf_protect
    def get(self, request, *args, **kwargs):
        ... 
```

但是，这会产生错误：

```
AttributeError at /project
'ProjectView' object has no attribute 'COOKIES'

File "c:\Apps\msysgit\simpletask\lib\site-packages\django\middleware\csrf.py" in process_view
  95\.                 request.COOKIES[settings.CSRF_COOKIE_NAME]) 
```

所以我猜想POST请求提供了一些GET请求没有提供的东西。有一个更好的方法吗？

此外，在任何人提到所有敏感信息都应该通过 POST 请求提取之前（正如我最近几次看到的那样），我尝试坚持使用 GET 的原因是我正在尝试根据 RESTful 指南构建，这意味着 GET 请求用于提取数据，POST 用于新记录，PUT 用于更新，DELETE 用于数据删除。

**编辑**：

由于似乎有一种情绪我不应该尝试上述方法，虽然我现在有点同意，但我试图阻止的漏洞在以下 3 个链接中讨论：

*   [http://haacked.com/archive/2008/11/20/anatomy-of-a-subtle-json-vulnerability.aspx](http://haacked.com/archive/2008/11/20/anatomy-of-a-subtle-json-vulnerability.aspx)
*   [http://haacked.com/archive/2009/06/24/json-hijacking.aspx](http://haacked.com/archive/2009/06/24/json-hijacking.aspx)
*   [http://balpha.de/2013/02/plain-text-considered-harmful-a-cross-domain-exploit/](http://balpha.de/2013/02/plain-text-considered-harmful-a-cross-domain-exploit/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T04:23:07.333

我认为您不太了解 CSRF 实际保护的内容。CSRF 利用网站对用户浏览器的信任；通过利用允许攻击者代表用户运行命令的会话 cookie。

该站点信任该请求，因为它尚未使浏览器的会话 cookie 过期。这就是为什么在大多数 CSRF 缓解技术中，会为每个具有副作用的请求生成唯一的 OTP。攻击者不知道为 OTP 生成的密钥，因此无法伪造合法请求。

对于所有具有副作用的 URL（如 POST、PUT、DELETE），您都需要 CSRF。对于 GET 来说，拥有它没有任何意义，因为 GET 请求——**如果你正确地执行 REST——**应该是幂等的——如果运行多次，它们会返回相同的结果并且它们不应该有任何副作用。

CSRF 保护并不能防止信息泄露或中间人攻击。因此，如果您有想要保护的敏感信息，请使用 HTTPS。为防止对 API 的不规范使用，请使用身份验证和授权。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T04:07:19.550

你需要使用`method_decorator`

[https://docs.djangoproject.com/en/1.4/topics/class-based-views/#decorating-the-class](https://docs.djangoproject.com/en/1.4/topics/class-based-views/#decorating-the-class)

所以你的代码将是

```
class ProjectView(View):`
    @method_decorator(csrf_protect)
    def get(self, request, *args, **kwargs): 
```

**[编辑]** 但是`csrf_protect`只会检查 POST 请求（它有 `if request.method == 'POST' 检查）所以你必须自己实现一些东西。

# c# - 为什么我在 C# 编译器“未分配的局部变量”中出现此错误

> ID：15754426
> 
> 赞同：2
> 
> 时间：2013-04-02T01:01:07.673
> 
> 标签：c#, arrays, compiler-errors, duplicates, unassigned-variable

我收到以下错误。使用未分配的局部变量 markduplicate。我不明白为什么？该程序在数组中查找重复项。我一直试图弄清楚，我觉得我很接近。谢谢您的帮助。

```
using System;

class duplicate 
{
    static void Main() 
    {
    const int Array_Size = 5;
    int [] number = new int [Array_Size];
    int i;

    for ( i = 0; i < Array_Size; i++) 
    {
        Console.Write("Element " + i + ":    ");
        number[i] = Int32.Parse(Console.ReadLine());
        if (number[i] < 9 || number[i] > 101)
        {
            Console.WriteLine("Enter Number between 10 - 100");
            number[i] = Int32.Parse(Console.ReadLine());
        }
    }

    bool markduplicate;
    for (i = 0; i < Array_Size; i++)
    {
        for (int j = 0; j < Array_Size; j++) 
        {
            if (i != j)
            {
                if (number[j] == number[i])
                {
                    markduplicate = true;
                }
            }

            if (markduplicate != true) 
            {
                Console.WriteLine("Element " + i + "    " + number[i]);
            }
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T01:03:32.073

这是因为 C# 的代码分析器检测到存在通过您的程序的路径，当`markduplicate`' 的值在对其进行任何分配之前将被引用时。具体来说，这将在嵌套循环的第一次迭代期间发生，此时`i`和`j`都为零：`if (i != j)`包含赋值的块不会执行，因此将`markduplicate`在下`if`一条语句中检索 的值。

要解决此问题，请更改

```
bool markduplicate; 
```

至

```
bool markduplicate = false; 
```

在声明中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T01:05:52.680

编译器认为您可以在设置`if (markduplicate != true)`之前点击该行`markduplicate`。

如果您认为编译器错误，请在声明 eg 时给它一个值`bool markduplicate = true;`。如果您分析并认为编译器是正确的，请相应地调整您的代码。

另外：`if (markduplicate != true)`被认为是糟糕的风格。改为使用`if(!markduplicate)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T01:04:15.420

你已经声明了布尔变量`markduplicate`，但是你没有给它一个初始值——编译器不知道它最初应该是真还是假。

在这种情况下，很明显你希望它最初是错误的，所以放这个：

```
bool markduplicate = false; 
```

它现在将被编译。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T01:06:13.337

在您的代码中，`(i != j)`在它为真之前为假，因此您正在检查没有分配任何内容的变量的值。

您需要在其声明中为 markduplicate 分配一个值，或者您需要确保任何导致对其值进行条件检查的路径都首先分配了一个值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T01:08:14.117

您必须分配`markdefault`给其中一个`true`或`false`在您的声明中。否则，如果`number [j] != number [i]`, then`markdefault`将不会被赋值并且`if markduplicate != true`无法被评估。

# iphone - NSMutableArray 不保留方法外的对象

> ID：15754432
> 
> 赞同：-1
> 
> 时间：2013-04-02T01:02:04.663
> 
> 标签：iphone, objective-c, nsmutablearray, nsarray

在我的`-viewDidLoad`方法中，我初始化了 many `NSMutableDictionaries`，并将它们添加到类头文件中`NSMutableArray`声明的初始化 via中。`@property`相关代码如下所示。简而言之，我正在从 HTML 网页中抓取信息。

```
 NSMutableDictionary *dict = [[NSMutableDictionary alloc] init];
_regionalDicts = [[NSMutableArray alloc] init];

for (int i = 0; i < [strings count]; i++) {
    NSString *str = [strings objectAtIndex:i];
    //Property parser:
    if ([str rangeOfString:@"<td>"].location != NSNotFound) {
        NSString *parsedTD1 = [str stringByReplacingOccurrencesOfString:@"<td>" withString:@""];
        NSString *parsedTD2 = [parsedTD1 stringByReplacingOccurrencesOfString:@"</td>" withString:@""];
        NSString *parsedTD3 = [parsedTD2 stringByReplacingOccurrencesOfString:@"&nbsp;" withString:@"\n"];

        NSString *final = [parsedTD3 stringByReplacingOccurrencesOfString:@"\t" withString:@""];

        //NSLog(@"Final string: %@", final);

        if ([final isEqualToString:@""]) {
            continue;
        }

        if (gotEventType == NO) {
            gotEventType = YES;
            [dict setObject:final forKey:@"type"];
            continue;
        }

        if (gotRegional == YES && gotLocation == NO) {
            gotLocation = YES;
            [dict setObject:final forKey:@"location"];
            continue;
        }
        if (gotLocation == YES && gotCity == NO) {
            gotCity = YES;
            NSString *cityToReturn = [final stringByReplacingOccurrencesOfString:@"\n" withString:@""];
            [dict setObject:cityToReturn forKey:@"city"];
            continue;
        }     
        if (gotRegional == YES && gotEventType == YES && gotCity == YES && gotLocation == YES && gotURL == YES) {
            gotRegional = NO;
            gotEventType = NO;
            gotCity = NO;
            gotLocation = NO;
            gotURL = NO;

            NSLog(@"Regional: %@", [dict objectForKey:@"regional"]);
            NSLog(@"Type: %@", [dict objectForKey:@"type"]);
            NSLog(@"City: %@", [dict objectForKey:@"city"]);

            //Testing to see if anything is nil
            NSLog(@"Location: %@\n", [dict objectForKey:@"location"]);
            if (!_regionalDicts) {
                NSLog(@"Dict is nil");
            }
            [_regionalDicts addObject:dict];
            NSLog(@"Objects in array: %u", [_regionalDicts count]);
            NSMutableDictionary *tempDict = [_regionalDicts objectAtIndex:[_regionalDicts count]-1];
            NSLog(@"Regional in array: %@", [tempDict objectForKey:@"regional"]);
            [dict removeAllObjects];

            continue;
        } 
```

很明显，生成的字典是在可变数组中生成并保留的，`_regionalDicts`可变数组在头文件中声明如下：

```
@property (strong, nonatomic) IBOutlet NSMutableArray *regionalDicts; 
```

但是，当我尝试将信息传递给同一类中的表格视图单元格时，字典的内容为空。数组中的对象与我期望的字典一样多，但它们不包含任何内容。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    if (_regionalDicts) {
        NSMutableDictionary *dict = [_regionalDicts objectAtIndex:0];
        NSLog(@"Setting label %@", [dict objectForKey:@"city"]);
        [cell.textLabel setText:[dict objectForKey:@"regional"]];
    }

    return cell;
} 
```

回报：

```
2013-04-01 19:58:50.250 MatchScrape[53570:207] Setting label (null) 
```

我只能想象应该归咎于内存管理问题。为什么在添加它们的方法范围之外访问时，类数组的内容会被取消，但允许数组保留相同的计数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T01:31:09.957

您似乎认为将字典添加到数组中实际上并没有将字典添加到数组中，而是添加了字典的*副本*。您可能正在考虑它如何在像 C++ 这样的语言中工作——但这​​不是它在这里的工作方式。记住，Objective-C 对象总是通过引用访问：你永远不会直接将对象本身存储在变量或数组中——你只是在一个指向实际对象的指针周围混洗，它通常位于堆上。

因此，当您添加`_dict`到数组中时，数组中的对象与 . 引用的对象完全相同`_dict`。你对该字典所做的任何事情——无论你使用什么引用——都会在引用该字典的其他任何地方反映出来，因为它是同一个字典。你没有复制它。因此，当您这样做时`[_dict removeAllObjects]`，将从字典中删除所有对象，最终得到一个包含相同空字典的数组。

# jquery - 在jquery中链接元素的简单方法

> ID：15754433
> 
> 赞同：-2
> 
> 时间：2013-04-02T01:02:34.537
> 
> 标签：jquery, html, css, menu

我有一个使用子菜单的菜单，该菜单对隐藏和显示 jquery 功能进行操作。问题是，如果我将鼠标悬停在主菜单元素上，当我点击子菜单元素时，它就会消失。所以我想知道如果你没有将鼠标悬停在主菜单元素或子菜单块上，我是否可以让它消失我的网站是[http://www.spencedesign.netau.net/lori/#](http://www.spencedesign.netau.net/lori/#)。

我还有另一个较小的问题，当页面加载时，子菜单没有隐藏，即使 css 说我认为这是在使用 CSS和 jQuery`display: none;`之间的混淆和`display: none;``.hide()``.show()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T02:55:23.360

该脚本的编写方式是，子菜单仅在悬停在主菜单项上时才会显示（并继续显示）。一旦您离开该项目，子菜单就会隐藏。

一个简单的解决方案是在执行`hide()`.

[**示例**](http://jsbin.com/useviz/1)//[**代码**](http://jsbin.com/useviz/1/edit)

但是，jquery 并不喜欢它。此解决方案*主要*适用于 Chrome，但会引发一些错误。

尽管这是一个相对简单的菜单，但我在这里的建议是查看一些 jquery 菜单插件。没有必要重新发明轮子……即使你只需要一个简单的轮子。

至于第二个较小的问题，这是由于`display:none`被分配给 sub_menu `id`（您的页面上不存在）。改为将`class`此类附加到每个子菜单 div。

# google-analytics - 如何在 Flurry SDK（Android 和 iOS）中提交用户分数

> ID：15754438
> 
> 赞同：1
> 
> 时间：2013-04-02T01:02:59.607
> 
> 标签：google-analytics, flurry

所以，我需要将用户分数提交给 Flurry，以获得有关用户可以达到多少平均分数的信息。我已经设置了 logEventWithParameter

*   事件名称 = “游戏结果”
*   参数 = {"USER_SCORE",""}

然后我查看了我的 Flurry 仪表板，它不计算 USER_SCORE 参数的平均值。我想我弄错了 Flurry 在这种情况下的工作方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T02:27:21.307

找到了答案！在[Flurry 的常见问题解答](http://support.flurry.com/index.php?title=Analytics/FAQ/Events)中写道：

> **我可以创建的事件和参数的数量是否有限制？**是的，每个应用程序有 300 个事件的限制。每个事件最多可以有 10 个参数，每个参数可以有任意数量的值。
> 
> 请注意，我们目前仅显示 Flurry 门户中任何事件的前 500 个参数值。如果您想跟踪诸如分数之类的东西，它可以有无限数量的值，我们建议为您的参数值创建一个分布。

不幸的是，Flurry 不支持这种用例。所以我必须创建分数分布组，例如 SCORE_GROUP = {0-5000, 5001-10000, >10000}

# asp.net - ASP.NET IIS 与 IIS Express

> ID：15754444
> 
> 赞同：1
> 
> 时间：2013-04-02T01:03:24.050
> 
> 标签：asp.net, iis

我有一个 ASP.NET 4.0 Web 项目，我从源代码管理中获得并尝试在我的 PC（Win7、VS 2010）上运行。它抱怨说它是为 IIS Express 配置的，但我有 IIS。

所以我下载了 IIS Express，但后来它抱怨我两者都有！

这是我需要在这台 PC 上完成的唯一项目。我不想更改其他开发人员的配置，但是当我进入程序时，IIS 不在列表中（IIS Express 是）。

有没有办法可以禁用/删除 IIS 并离开 IIS Express？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T01:06:16.103

IIS 列在控制面板 > 程序和功能 > Windows 功能下，它没有列在主程序列表中，而是在单独的弹出窗口中。

但是，您的应用程序不应该只在 IIS Express 上运行 - 它应该在完整的 IIS 上运行。为什么需要脱节的配置？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T01:12:48.213

IIS 是 Windows 的一部分 - 您可以在打开或关闭 Windows 功能下安装/卸载它。[http://windows.microsoft.com/en-US/windows-vista/Turn-Windows-features-on-or-off?woldogcb=0](http://windows.microsoft.com/en-US/windows-vista/Turn-Windows-features-on-or-off?woldogcb=0)（查找 Internet 信息服务）。

如果您没有为当前项目指定“将服务器设置应用于所有用户（存储在项目文件中）”，您也可以仅为您更改项目设置 - 请参阅项目设置的“Web”选项卡。

# rest - Amazon S3：开发工具包或 REST API

> ID：15754449
> 
> 赞同：17
> 
> 时间：2013-04-02T01:03:46.107
> 
> 标签：rest, sdk, amazon-web-services, amazon-s3

我必须使用 Amazon S3 以 Java 编程方式上传一些静态内容。当我开始阅读时，我发现要做的方式是通过他们的 SDK（REST API 的包装器）或使用 REST API。从亚马逊的 AWS 网站上，发现了这个：

“您可以使用 REST API 或 AWS 开发工具包向 Amazon S3 发送请求”。

想了解哪种方法更好。我认为使用 SDK 肯定会使编程更容易，但是直接使用 SDK 与 Rest API 的优缺点是什么。

出于某种原因，我发现直接使用 REST API 比使用 SDK 更困难。我能够使用 SDk 做一些基本的事情——创建存储桶、列出对象、获取对象、使缓存无效等。但是在编写 REST API 代码时遇到了一些困难——尤其是生成签名。

如果我最终使用 SDK，这可能并不重要，但我仍然想知道如何使用 REST API 来做到这一点。如果有人在 Java 中有一些关于添加对象、获取对象、获取列表等的优秀代码示例，那将非常有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-02T01:15:14.283

如果你已经有你的语言的 SDK，去吧；从项目的角度来看，这很容易。SDK 是他们已经为您完成和测试的额外工程，无需额外费用。换句话说，SDK 已经为您将 HTTP REST API 转换为应用程序域/语言。

将 REST API 视为 AWS 必须支持的最低公分母，而 SDK（可能）在其下实现 REST API。在某些情况下（例如：某些 Windows Azure SDK），SDK 实际上更高效，因为它们切换到基于 TCP 的通信通道而不是 REST（即 TCP*加*HTTP），从而消除了一些 HTTP 开销

除非您的全部目标是花费额外的时间（开发 + 测试）来学习底层 REST API，否则我会投票给 SDK。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-06-06T05:59:34.273

在我自己的意见中，API 为您提供了做任何您喜欢的事情的空间。如果您计划在未来更改云服务，它也会有所帮助，但如果使用 sdk 方法，您将不得不再次编码，因为您的应用程序需要更改并且 SDK 嵌入在您的应用程序中。我知道回复晚了，但它可能会对某人有所帮助。

# ios - ios 可本地化的字符串不起作用

> ID：15754457
> 
> 赞同：1
> 
> 时间：2013-04-02T01:05:16.783
> 
> 标签：ios, xcode, localization, localizable.strings

我制作了一个本地化为两种语言（英语和丹麦语，默认为英语）的 ios 应用程序。
我制作了一个带有两个子文件 en 和 da 的 Localizable.strings。
一切都应该正确，我看到从字符串文件中加载英文文本很好。但丹麦人没有。

我试图通过下面的代码检查首选语言，它是丹麦语。

```
[[NSLocale preferredLanguages] objectAtIndex:0]; 
```

我试过清理 + 删除和重建，但没有运气。

我知道 Localizable.strings 文件正在工作，因为它正在获取英文文本。我知道它通过上面的代码行看到了丹麦本地化。我错过了什么？

只是添加几个例子：
来自EN：

```
"YesButton" = "Done";
"NoButton" = "Not yet!";
"NextButton" = "Next";
"BackButton" = "Back";
"EditButton" = "Edit";
"DoneButton" = "Done"; 
```

和丹麦人：

```
"YesButton" = "Færdig";
"NoButton" = "Ikke endnu!";
"NextButton" = "Næste";
"BackButton" = "Tilbage";
"EditButton" = "Redigér";
"DoneButton" = "Færdig"; 
```

获取文本的代码是：

```
[yesButton setTitle:NSLocalizedString(@"YesButton", nil) forState:UIControlStateNormal]; 
```

即使preferredLang是da（丹麦语），它也会返回“Done”！

希望有人有想法？:)

提前致谢。

编辑:::
实际的丹麦-丹麦本地化出了点问题。我不知道苹果是否更新了它或他们做了什么，但它从被称为“丹麦-丹麦”变成了“丹麦”。在制作了全新的丹麦语本地化并删除了旧的本地化后，它起作用了！疯狂的事情。让你摸不着头脑！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T01:23:51.497

我以前也发生过类似的事情。我为解决这个问题所做的只是将字符串编码从以下位置更改：

```
encoding:NSASCIIStringEncoding 
```

到

```
encoding:NSUTF8StringEncoding 
```

~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.

现在假设问题不是字符串编码。您也可以解决它并执行以下操作：

```
NSString * language = [[NSLocale preferredLanguages] objectAtIndex:0];

NSString yesButtonStr=@"";
NSString noButtonStr=@"";
NSString nextButtonStr=@"";

if([@"en"  caseInsensitiveCompare:language] == NSOrderedSame )
{
yesButtonStr = @"Done";
noButtonStr= @"Not yet!";
nextButtonStr = @"Next";
//...
}
else if if([@"da"  caseInsensitiveCompare:language] == NSOrderedSame )
{
yesButtonStr = @"Færdig";
noButtonStr = @"Ikke endnu!";
nextButtonStr = @"Næste";
//...
} 
```

然后：

```
[yesButton setTitle:NSLocalizedString(yesButtonStr, nil) forState:UIControlStateNormal]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T04:49:38.037

试试这个，

```
NSString *translatedString = [self languageSelectedStringForKey:@"YesButton"]; // Give your key here

-(NSString*) languageSelectedStringForKey:(NSString*) key
{
    NSString *path;
    path = [[NSBundle mainBundle] pathForResource:@"en" ofType:@"lproj"]; // give your language type in pathForResource, i.e. "en" for english, "da" for Danish
    NSBundle* languageBundle = [NSBundle bundleWithPath:path];
    NSString* str=[languageBundle localizedStringForKey:key value:@"" table:nil];
    return str;
} 
```

希望这会有所帮助，谢谢。快乐编码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T02:24:43.210

实际的丹麦本地化有问题。
当我开始进行本地化时，它被称为“丹麦-丹麦”。更新 ios 和/或 xcode 后，现在只有“丹麦语”。
所以不得不进行全新的本地化。

谢谢苹果......不是！

# matlab - 如何在 matlab 中制作“彩色地图”图？

> ID：15754459
> 
> 赞同：28
> 
> 时间：2013-04-02T01:05:24.453
> 
> 标签：matlab, plot

我有一些以 matlab 格式存储的数据（两个参数的函数），我想用 matlab 来绘制它。一旦我读入数据，我就用它`mesh()`来制作一个情节。我的`mesh()`情节给了我函数的值作为颜色和表面高度，如下所示：

![作为两个自变量的函数的颜色和表面高度。](https://i.stack.imgur.com/flnYn.jpg)

我应该使用什么 matlab 绘图函数来制作因变量仅表示为*颜色*的 2D 网格图？我正在寻找类似`pm3d map`gnuplot 的东西。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-04-02T01:24:40.097

默认情况下`mesh`，将根据（默认）`jet`颜色图对表面值进行着色（即热度更高）。您还可以使用`surf`填充表面补丁并将`'EdgeColor'`属性设置为`'None'`（因此补丁边缘不可见）。

```
[X,Y] = meshgrid(-8:.5:8);
R = sqrt(X.^2 + Y.^2) + eps;
Z = sin(R)./R;

% surface in 3D
figure;
surf(Z,'EdgeColor','None'); 
```

![在此处输入图像描述](https://i.stack.imgur.com/lYPXt.png)

**2D地图**：可以通过切换`view`图形的属性来获得2D地图

```
% 2D map using view
figure;
surf(Z,'EdgeColor','None');
view(2); 
```

![在此处输入图像描述](https://i.stack.imgur.com/MloE4.png)

...或将其中的值视为矩阵，使用并选择适当的[颜色](http://www.mathworks.com/help/matlab/ref/colormap.html)`Z`图将其视为缩放图像。`imagesc`

```
% using imagesc to view just Z
figure;
imagesc(Z); 
colormap jet; 
```

![在此处输入图像描述](https://i.stack.imgur.com/AZDRc.png)

地图的颜色托盘由 控制`colormap(map)`，其中`map`可以是自定义的或 MATLAB 提供的任何内置颜色图：

![在此处输入图像描述](https://i.stack.imgur.com/dP9eY.gif)

**更新/优化地图**：地图上的几个设计选项（分辨率、平滑、轴等）可以由常规 MATLAB 选项控制。正如@Floris 指出的那样，这是一个平滑的、等轴的、无轴标签图，适用于这个例子：

```
figure;
surf(X, Y, Z,'EdgeColor', 'None', 'facecolor', 'interp');
view(2);
axis equal; 
axis off; 
```

![在此处输入图像描述](https://i.stack.imgur.com/Sd45L.png)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-04-02T04:06:55.410

gevang的回答很棒。还有另一种方法可以直接使用`pcolor`. 代码：

```
[X,Y] = meshgrid(-8:.5:8);
R = sqrt(X.^2 + Y.^2) + eps;
Z = sin(R)./R;
figure;
subplot(1,3,1);
pcolor(X,Y,Z); 
subplot(1,3,2);
pcolor(X,Y,Z); shading flat;
subplot(1,3,3);
pcolor(X,Y,Z); shading interp; 
```

输出：

![在此处输入图像描述](https://i.stack.imgur.com/vKM8q.jpg)

此外，`pcolor`也是平坦的，如此处所示（`pcolor`是 2d 基础；上面的 3d 图形是使用 生成的`mesh`）：

![在此处输入图像描述](https://i.stack.imgur.com/yWVTD.jpg)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-03-02T22:05:11.743

请注意，pcolor 和“surf + view(2)”都不会显示 2D 数据的最后一行和最后一列。

另一方面，使用 imagesc 时，您必须小心轴。仅 gevang 的答案中的 surf 和 imagesc 示例（几乎 - 除了最后一行和最后一列）彼此对应，因为 2D sinc 函数是对称的。

为了说明这两点，我使用以下代码制作了下图：

```
[x, y] = meshgrid(1:10,1:5);
z      = x.^3 + y.^3;

subplot(3,1,1)
imagesc(flipud(z)), axis equal tight, colorbar
set(gca, 'YTick', 1:5, 'YTickLabel', 5:-1:1);
title('imagesc')

subplot(3,1,2)
surf(x,y,z,'EdgeColor','None'), view(2), axis equal tight, colorbar
title('surf with view(2)')

subplot(3,1,3)
imagesc(flipud(z)), axis equal tight, colorbar
axis([0.5 9.5 1.5 5.5])
set(gca, 'YTick', 1:5, 'YTickLabel', 5:-1:1);
title('imagesc cropped')

colormap jet 
```

![冲浪与图像](https://i.stack.imgur.com/NY2Hk.png)

如您所见，冲浪图中缺少第 10 行和第 5 列。（您也可以在其他答案的图片中看到这一点。）

请注意，如果 x 和 y 不是 1:1:N，则如何使用“set(gca, 'YTick'...”(和 Xtick) 命令正确设置 x 和 y 刻度标签。

另请注意，仅当您的 z 数据对应于 xs 和 ys （每个）等距时， imagesc 才有意义。如果不是，您可以使用 surf （并且可能复制最后一列和最后一行以及一个“（end，end）”值 - 尽管这是一种肮脏的方法）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-14T11:30:03.660

我还建议使用`contourf(Z)`. 对于我的问题，我想在 2D 中可视化 3D 直方图，但轮廓过于平滑，无法表示直方图条的顶视图。

所以就我而言，我更喜欢使用 jucestain 的答案。默认`shading faceted`的`pcolor()`更合适。但是，`pcolor()`不使用绘制矩阵的最后一行和最后一列。为此，我使用了以下`padarray()`功能：

```
pcolor(padarray(Z,[1 1],0,'post')) 
```

抱歉，如果这与原始帖子无关

# sorting - xslt选择组的最大值

> ID：15754460
> 
> 赞同：2
> 
> 时间：2013-04-02T01:05:29.863
> 
> 标签：sorting, xslt, max

我需要一个 xsl，它从任何“object_name”中获取最大的“item_revision_id”。从这个输入......

```
<rows>
    <row>
        <row_element property_name="object_name">pluto</row_element>
        <row_element property_name="description">description of version 00</row_element>
        <row_element property_name="item_revision_id">00</row_element>
    </row>
    <row>
        <row_element property_name="object_name">pluto</row_element>
        <row_element property_name="description">description of version 01</row_element>
        <row_element property_name="item_revision_id">01</row_element>
    </row>
    <row>
        <row_element property_name="object_name">pippo</row_element>
        <row_element property_name="description">description of version 02</row_element>
        <row_element property_name="item_revision_id">02</row_element>
    </row>
    <row>
        <row_element property_name="object_name">pippo</row_element>
        <row_element property_name="description">description of version 00</row_element>
        <row_element property_name="item_revision_id">00</row_element>
    </row>
</rows> 
```

所需的输出是

```
 <?xml version="1.0" encoding="Windows-1252"?>
    <rows>
    <row>
        <row_element property_name="object_name">pluto</row_element>
        <row_element property_name="description">description of version 01</row_element>
        <row_element property_name="item_revision_id">01</row_element>
    </row>
    <row>
        <row_element property_name="object_name">pippo</row_element>
        <row_element property_name="description">description of version 02</row_element>
        <row_element property_name="item_revision_id">02</row_element>
    </row>
</rows> 
```

我想获得最大的行元素，而不是创建一个具有混合值的新元素

```
<?xml version="1.0" encoding="Windows-1252"?>
<rows>
    <row><!-- this is right -->
        <row_element property_name="object_name">pluto</row_element>
        <row_element property_name="description">description of version 01</row_element>
        <row_element property_name="item_revision_id">01</row_element>
    </row>
    <row><!-- this is wrong -->
        <row_element property_name="object_name">pippo</row_element>
        <row_element property_name="description">description of version 00</row_element>
        <row_element property_name="item_revision_id">02</row_element>
    </row>
</rows> 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T02:13:04.453

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kRowByObjName" match="row" use="*[@property_name='object_name']"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match=
 "row[not(generate-id()
         =
          generate-id(key('kRowByObjName', *[@property_name='object_name'])[1])
         )]"/>

<xsl:template match="*[@property_name='item_revision_id']/text()">
  <xsl:for-each select="key('kRowByObjName', ../../*[@property_name='object_name'])">
   <xsl:sort select="*[@property_name='item_revision_id']"
             data-type="number" order="descending"/>
   <xsl:if test="position()=1">
     <xsl:value-of select="*[@property_name='item_revision_id']"/>
   </xsl:if>
  </xsl:for-each>
</xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<rows>
    <row>
        <row_element property_name="object_name">pluto</row_element>
        <row_element property_name="item_revision_id">00</row_element>
    </row>
    <row>
        <row_element property_name="object_name">pluto</row_element>
        <row_element property_name="item_revision_id">01</row_element>
    </row>
    <row>
        <row_element property_name="object_name">pippo</row_element>
        <row_element property_name="item_revision_id">02</row_element>
    </row>
    <row>
        <row_element property_name="object_name">pippo</row_element>
        <row_element property_name="item_revision_id">00</row_element>
    </row>
</rows> 
```

**产生想要的正确结果**：

```
<rows>
   <row>
      <row_element property_name="object_name">pluto</row_element>
      <row_element property_name="item_revision_id">01</row_element>
   </row>
   <row>
      <row_element property_name="object_name">pippo</row_element>
      <row_element property_name="item_revision_id">02</row_element>
   </row>
</rows> 
```

* * *

**二、XSLT 2.0 解决方案**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kRowByObjName" match="row" use="*[@property_name='object_name']"/>

 <xsl:template match="/*">
  <rows>
    <xsl:for-each-group select="row" group-by="*[@property_name='object_name']">
      <row>
        <xsl:sequence select="*[@property_name='object_name']"/>
        <xsl:sequence select=
        "current-group()
          /*[@property_name='item_revision_id'
           and
             . = max(current-group()/*[@property_name='item_revision_id']/number())
            ]"/>
      </row>
    </xsl:for-each-group>
  </rows>
 </xsl:template>
</xsl:stylesheet> 
```

# php - PDO fetchAll() 主键作为数组组键

> ID：15754461
> 
> 赞同：13
> 
> 时间：2013-04-02T01:05:52.200
> 
> 标签：php, pdo

我想将特定数据库的内容存储到一个数组中，按它们的主键分组。（而不是 PDO fetchAll() 组织它们的无用方式）。

我当前的代码：

```
$DownloadsPDO = $database->dbh->prepare("SELECT * FROM `downloads`");
$DownloadsArray =  $DownloadsPDO->execute();
$DownloadsArray =  $DownloadsPDO->fetchAll(); 
```

然后输出：

```
Array ( [0] => Array ( [id] => 0 [0] => 0 [path] => /xx-xx/testfile.zip [1] => /xx-xx/testfile.zip [name] => Test Script [2] => Test Script [status] => 1 [3] => 1 ) [1] => Array ( [id] => 1 [0] => 1 [path] => /xx-xx/test--file.zip [1] => /xxxx/testfile.zip [name] => New Script-UPDATE [2] => New Script-UPDATE [status] => 1 [3] => 1 ) ) 
```

我正在考虑使用`PDO::FETCH_PAIR`，但是我将很快扩展我希望能够在此脚本上使用的数据量。这目前有效，但是当我开始扩大下载量并且更多的客户端开始发挥作用时，显然数据的分组方式会导致问题。

我可以通过主键（即 id）对每个数组进行分组吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-04-28T22:53:46.077

你可以使用

```
$results = array_map('reset', $stmt->fetchAll(PDO::FETCH_GROUP|PDO::FETCH_ASSOC)) 
```

`PDO::FETCH_GROUP|PDO::FETCH_ASSOC`返回一个数组数组。第一列用作键，然后在键内是该键的所有结果的数组。但是，在我们的场景中，每个键只包含 1 行。`reset()`返回数组中的第一个元素，从而消除 1 级嵌套。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-04-16T17:40:00.460

这应该会产生您正在寻找的东西：

```
$results = $pdos->fetchAll(\PDO::FETCH_UNIQUE|\PDO::FETCH_ASSOC); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-02T11:13:32.813

我决定用 fetch() 循环遍历结果并将它们输入到一个数组中，这是我使用的代码，它工作得很好：

```
$DownloadsPDO = $database->dbh->query("SELECT * FROM `downloads`");
$Array = array();
while ($d = $DownloadsPDO->fetch()) {
    $Array[$d['id']]["id"] = $d['id'];
    $Array[$d['id']]["name"] = $d['name'];
    $Array[$d['id']]["path"] = $d['path'];                          
}

// Outputs
Array ( [1] => Array ( [id] => 1 [name] => Test Script [path] => /xxxx/testfile.zip ) [2] => Array ( [id] => 2 [name] => New Script-UPDATE [path] => /xxxx/testfile.zip ) ) 
```

它使用主键（即 id）作为数组键的名称，然后将数据添加到其中。

想我会添加这个作为答案，因为这解决了它，感谢帮助过的人，我希望这对其他希望实现同样目标的人有所帮助。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-05-13T09:30:15.370

我想指出唯一适合我的解决方案：

`fetchAll(\PDO::FETCH_GROUP|\PDO::FETCH_UNIQUE|\PDO::FETCH_ASSOC);`

请注意，这将从结果集中删除第一列。所以查询必须是：

`SELECT id_keyname AS arrkey, id_keyname, .... FROM ...`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-02T01:57:43.717

我仍然建议你循环使用`fetch()`方法。否则，您可以使用[`array_reduce()`](http://www.php.net/manual/en/function.array-reduce.php)来遍历数组。键盘上的示例在[这里](http://codepad.viper-7.com/LTb4cs)。

代码（以人类可读的形式）将是：

```
$myFinalArray = array_reduce($myInputArray, function($returnArray, $temp) { 
    $temp2 = $temp['id']; 
    unset($temp['id']); 
    $returnArray[$temp2] = $temp; 
    return $returnArray;
  }
); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-02T01:23:40.760

> 所以，我的问题是；我是否可以通过主键（即 id）对每个数组进行分组

当然，这里有 2 个选项：更改查询**或**解析结果集。所以，我确定您不想更改查询本身，所以我会解析结果集。

**注意：** 您应该在有意义的情况下使用准备好的 SQL 语句。如果你想绑定一些参数，那么它就可以了。但在这种情况下，你只想得到结果集，所以`prepare()`会`fetch()`有点过头了。

所以你有了：

```
Array ( [0] => Array ( [id] => 0 [0] => 0 [path] => /xx-xx/testfile.zip [1] => /xx-xx/testfile.zip [name] => Test Script [2] => Test Script [status] => 1 [3] => 1 ) [1] => Array ( [id] => 1 [0] => 1 [path] => /xx-xx/test--file.zip [1] => /xxxx/testfile.zip [name] => New Script-UPDATE [2] => New Script-UPDATE [status] => 1 [3] => 1 ) ) 
```

你想要：

```
Array( [id] => Array('bar' => 'foo') ....) 
```

好吧，你可以这样做：

```
$stmt = $database->dbh->query("SELECT * FROM `downloads`");
$result = array();

foreach($stmt as $array){

  $result[$array['id']] = $array;
}

print_r($result); // Outputs: Array(Array('id' => Array(...))) 
```

# python - python列表中总和==n的所有可能的数字集

> ID：15754463
> 
> 赞同：-6
> 
> 时间：2013-04-02T01:05:56.990
> 
> 标签：python, list

我想根据 n 对列表进行一些更改。例如：

l=[0,0,0,0,0,0,0,0,0,0,0,0] n=4 ：

```
 print   l   #first iteration will print :[1,1,1,1,0,0,0,0,0,0,0,0]    # 4=1+1+1+1
 print   l   #next iteration will print :[1,1,0,2,0,0,0,0,0,0,0,0]    # 4=1+1+2
 print   l   #next iteration will print :[0,2,0,2,0,0,0,0,0,0,0,0]    # 4=2+2
 print   l   #next iteration will print :[1,0,0,3,0,0,0,0,0,0,0,0]    # 4=1+3
 print   l   #last iteration will print :[0,0,0,4,0,0,0,0,0,0,0,0]    # 4=4 
```

**列表中的序列对我来说无关紧要**，但元素必须远离 =>9 **应该是 sum==n.Rest 用零填充的每个可能的数字集**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T01:22:10.820

```
l=[0,0,0,0,0,0,0,0,0,0,0,0]
n = 11

for i in range (0,n):
        l[i] = 1 

print l
carryidx = 0 
for i in reversed(range(0,n - 1)):
        v = l[ n - 1] + l[i]
        if v > 9:
                while l[carryidx] > 9:
                        carryidx += 1
                l[carryidx] += 1
        else:
                l[n - 1] = v 
        l[i] = l[i] - 1 
        print l 
```

**输出**

```
[1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0]
[1, 1, 1, 1, 0, 2, 0, 0, 0, 0, 0, 0]
[1, 1, 1, 0, 0, 3, 0, 0, 0, 0, 0, 0]
[1, 1, 0, 0, 0, 4, 0, 0, 0, 0, 0, 0]
[1, 0, 0, 0, 0, 5, 0, 0, 0, 0, 0, 0]
[0, 0, 0, 0, 0, 6, 0, 0, 0, 0, 0, 0] 
```

# playframework - 播放框架和组合框

> ID：15754468
> 
> 赞同：0
> 
> 时间：2013-04-02T01:06:17.323
> 
> 标签：playframework, playframework-2.0

我有两个简单的实体，一个是**客户**，其基本字符串为 customerName，**用户**具有电子邮件、密码和与客户的一种关系。

所以一个用户有一个客户，它是必需的。我有一种表格可以传递给我的观点：

```
static Form<User> formUser = Form.form(User.class);
...
...
return ok(views.html.user.index.render(formUser, Customer.find.all())); 
```

在我看来，我使用表单助手。例如：

```
@helper.form(routes.Users.newUser()) {
    @inputText(userForm("email"))
    @select(
        field = userForm("customer"),
        customers.map{ c =>
            c.id.toString -> c.customerName
        },
        args = '_label -> "Customer"
)
    <input type="submit" value="New" />
} 
```

但是在我的 POST 方法中，我的 bindFromRequest**出现错误，****客户字段**为**“无效值”**。

 **```
Form<User> filledForm = formUser.bindFromRequest();
if (filledForm.hasErrors()) {
    return badRequest(views.html.user.index.render(filledForm, Customer.find.all()));
}
User user = filledForm.get() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T20:40:10.327

我遇到了同样的问题，解决方案是引用对象 id 而不是 Object。

```
 @select(
            EmployeeForm("legalEntity**.id"**),
            entities.map{ l =>  l.id.toString -> l.name
        },
        '_label -> "Entity"  
    ) 
```**

# sql-server - 如果值为空，则获取先前的值 sql server 2008

> ID：15754472
> 
> 赞同：2
> 
> 时间：2013-04-02T01:07:05.357
> 
> 标签：sql-server, tsql

我的桌子看起来像这样

```
Id Description
5  Null
4  This is a description
3  This is a description
2  Null
1  Null 
```

我需要创建一个更新语句，如果前一个值不为空，它将更新空值。

```
Id Description
5  This is a description
4  This is a description
3  This is a description
2  Null
1  Null 
```

任何建议或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T01:20:11.750

我想这就是你要找的：

```
update toupdate
set description = updateto.description 
from yourtable toupdate
  join yourtable updateto on updateto.id = toupdate.id - 1
where updateto.description is not null
  and toupdate.description is null; 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!3/4a8a0/1)

这会产生以下结果：

```
ID  DESCRIPTION
5   This is a description
4   This is a description
3   This is a description
2   (null)
1   (null) 
```

*编辑：正如 Aaron Bertrand 的评论所指出的。*

如果您的 ID 不连续，您可以使用`row_number()`函数加入而不是 id：

```
with cte as (
    select *, row_number() over (order by (select null)) rn
    from yourtable
  )
update toupdate
set description = updateto.description 
from cte toupdate
  join cte updateto on toupdate.rn = updateto.rn - 1
where updateto.description is not null
  and toupdate.description is null; 
```

您可以根据需要按标准更改订单。

[更新的 SQL Fiddle](http://sqlfiddle.com/#!3/cb9af/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T01:12:56.430

做这种事情的最常见方法（我知道）是使用自联接：

```
-- WARNING: Untested Code
UPDATE YourTable
SET Origin.Description = Proxy.Description
FROM YourTable Origin
JOIN YourTable Proxy
    ON Origin.Id = Proxy.Id - 1
WHERE Origin.Description IS NULL
AND Proxy.Description IS NOT NULL 
```

这将连接`YourTable`到自身，因此一行看起来像这样：

```
Origin.Id | Origin.Description | Proxy.Id | Proxy.Description
------------------------------------------------------------------
        5 |               NULL |        4 | This is a description 
```

**编辑**
如果您不能保证总是递增 ID，那么您将要使用`ROW_NUMBER`：

```
;WITH NumberedRows
AS
    (
    SELECT *
        , ROW_NUMBER() OVER(ORDER BY Id) AS [Row #]
     FROM YourTable
     )
SELECT *
FROM NumberedRows Origin
JOIN NumberedRows Proxy
    ON Origin.Id = Proxy.Id - 1
WHERE Origin.Description IS NULL
AND Proxy.Description IS NOT NULL 
```

# mysql - 如何将文件导入表中？

> ID：15754473
> 
> 赞同：-2
> 
> 时间：2013-04-02T01:07:10.270
> 
> 标签：mysql, file-io, load, local

我正在尝试使用 CSV 文件中的数据填充表

我怎样才能正确地做到这一点？

这是我目前拥有的

```
INSERT INTO  time_zones_master (time_zone_id, UTC_Offset, master_name, display_name)
VALUES
LOAD DATA LOCAL INFILE 'd:\\UploadFiles/tzids.csv' 
FIELDS TERMINATED BY ',' 
LINES TERMINATED BY '\n' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T01:17:20.167

您将面临将 CSV 文件中的列与表中的列匹配的问题。我建议使用具有非常好的导入对话框的 mySQL 客户端。
一种选择是基于 Windows 的**[HeidiSQL](http://www.heidisql.com)**。可能有很多，但我正在使用这个:-D

```
LOAD DATA LOCAL INFILE 'C:\\Desktop\\csvfile.csv' INTO TABLE `database`.`table` CHARACTER SET latin1 FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"' ESCAPED BY '"' LINES TERMINATED BY '\n' (`col1`, `col2`, `col3`, `col4`);
SHOW WARNINGS; 
```

# c++ - 类矩阵类的深拷贝

> ID：15754476
> 
> 赞同：0
> 
> 时间：2013-04-02T01:07:36.107
> 
> 标签：c++, pointers, operator-overloading, overloading

我有一个行为类似于矩阵的类。所以用例是这样的：

```
Matrix matrix(10,10);
matrix[0][0]=4;
//set the values for the rest of the matrix
cout<<matrix[1][2]<<endl; 
```

代码：

```
#include <iostream>
#include <cstdlib>
#include <cstdio>
#include <cstring>
#include <sstream>

using namespace std;

class Matrix {
public:

    Matrix(int x, int y);

    class Proxy {
    public:

        Proxy(int* _array) : _array(_array) {
        }

        int &operator[](int index) const {
            return _array[index];
        }
    private:
        int* _array;
    };

   Proxy operator[](int index) const {
      return Proxy(_arrayofarrays[index]);
   }
   Proxy operator[](int index) {
      return Proxy(_arrayofarrays[index]);
   }

    const Matrix& operator=(const Matrix& othersales);

private:
    int** _arrayofarrays;
    int x, y;
};

Matrix::Matrix(int x, int y) {
    _arrayofarrays = new int*[x];
    for (int i = 0; i < x; ++i)
        _arrayofarrays[i] = new int[y];
}

const Matrix& Matrix::operator=(const Matrix& othermatrix) {
    new (this) Matrix(x, y);
    for (int i = 0; i < 3; i++)
        for (int j = 0; j < 3; j++)
            _arrayofarrays[i][j] = othermatrix._arrayofarrays[i][j];

    return *this;
}

int main() {

    Matrix a(2, 3);
    a[0][0] = 1;
    a[0][1] = 2;
    a[0][2] = 3;
    a[1][0] = 4;
    a[1][1] = 5;
    a[1][2] = 6;

    cout << a[1][2] << endl;
    //prints out 6

    const Matrix b = a;
    cout << b[1][2] << endl;

    a[1][2] = 3;

    cout << a[1][2] << endl;
    // prints out 3
    cout << b[1][2] << endl;
    // prints out 3 as well
} 
```

通过调用`const Matrix b = a;`我想创建 Matrix 的新实例，它将具有与当时相同的值`a`。然而`b`，正在受到更改中的值的影响`a`。因此，如果我更改 中的某个值`a`，那么它也会更改`b`。而且我不希望它表现得像这样。

所以我需要创建一个`b`不受`a`自身影响的副本。

这些可能是愚蠢的问题，但对我来说，作为一个 java 人和一个 C++ 新手，所有这些东西真的很令人困惑，所以感谢任何有用的建议......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T01:21:30.400

您的实施存在一些问题。最简单的一个是你得到的错误......

在你的`Matrix`类中，`operator[]`是一个非常量成员函数，这意味着它只能在非常量对象上执行。您`operator=`通过 获取右侧对象`const &`，因此您无法调用`operator[]`它。这里的问题是，您没有提供`operator[]`承诺不修改对象的实现，一旦将其添加到您的类型中，它就应该编译。

比这更重要的是您正在泄漏内存。当您调用`operator=`一个对象时，您正在就地创建一个不同的对象`Matrix`，而无需事先释放它所持有的内存。那是内存泄漏。

的实现`operator=`也不是线程安全的。如果为任何内部数组分配内存失败并引发异常，则您的对象将处于既不是原始状态也不是有效状态的状态。这本身就是不好的。

与前一个相关，尽管更正一个可能会导致另一个，如果存在*aliasing*`operator=` ，您的实现是不安全的，也就是说，如果您自行分配它会失败。第一行将泄漏内存并创建新缓冲区，然后从那里将新缓冲区复制到自身中，丢失原始信息。

 *`operator[]`最后，如果您放弃使用和使用`operator()`两个索引的要求，则可以改进类型的实现。用户代码必须进行调整（并且看起来不像二维数组），但它提供了更多的表示自由度（您可以以任何您想要的方式在内部存储信息）。同时，不需要分配一个指针数组，然后分配 N 个`int`. 您可以执行 NxM 的单个内存分配并进行指针运算来寻址每个位置（这与/`ints`的使用无关），这将减少内存占用并使布局更紧凑，提高缓存性能（更不用说减少动态分配的数量乘以 M 倍）`operator[]``operator()`

> 通过调用`const Matrix b = a;`我想创建 Matrix 的新实例，它在那一刻将具有相同的 a 值。然而，b 受到改变 a 中的值的影响。

好吧，这是我在第一次阅读时错过的另一个问题。该表达式`const Matrix b = a;`不涉及`operator=`，而是涉及复制构造函数。谷歌的另一件事：*三法则*（基本上，如果您手动实现复制构造函数、赋值或析构函数中的一个，您可能想要实现所有三个）。如果不定义您自己的复制构造函数，编译器将为您隐式定义一个执行浅拷贝（即复制存储在其中的指针`Matrix`但不为其分配内存）的复制构造函数。复制完成后，两者`Matrix` *共享*`delete []`相同的内存，如果您的析构函数释放内存，当第二个析构函数运行并尝试已删除的内存时，您将遇到未定义行为。*

# uikit - UIKit 对象是否需要在主线程上解除分配？

> ID：15754479
> 
> 赞同：1
> 
> 时间：2013-04-02T01:07:41.143
> 
> 标签：uikit

关于`UIView`，Apple 对线程建议有一些评论：

[https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW147](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW147)

> 对应用程序用户界面的操作必须在主线程上进行。因此，您应该始终从应用程序主线程中运行的代码调用 UIView 类的方法。唯一可能不是绝对必要的情况是在创建视图对象本身时，但所有其他操作都应在主线程上进行。

在后台线程中释放 UIView 对象通常（不）安全吗？无论哪种情况，我都在寻找一些支持文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-25T16:37:24.690

是的，UIKit 对象需要在主线程上释放。在后台线程中释放 UIView 对象是不安全的。有关更多详细信息，请参见[此处](https://stackoverflow.com/questions/2746197/dealloc-on-background-thread/24410372#24410372)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-16T16:52:22.120

iOS Developer Library 文档链接到**NSView Restrictions**部分，所以我猜它们也适用于 UIView。

> **NSView 限制**
> 
> NSView 类通常不是线程安全的。您应该仅从应用程序的主线程创建、**销毁、调整大小、移动和对 NSView 对象执行其他操作。**只要将绘图调用与 lockFocusIfCanDraw 和 unlockFocus 调用括起来，从辅助线程绘图就是线程安全的。

来源： [https ://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/Multithreading/ThreadSafetySummary/ThreadSafetySummary.html#//apple_ref/doc/uid/10000057i-CH12-123427](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/Multithreading/ThreadSafetySummary/ThreadSafetySummary.html#//apple_ref/doc/uid/10000057i-CH12-123427)

我希望这有帮助。

# xml - 需要带有 JAXB 的 JSON 字段

> ID：15754482
> 
> 赞同：4
> 
> 时间：2013-04-02T01:08:05.843
> 
> 标签：xml, json, jaxb, annotations, jersey

我有以下。

```
@XmlRootElement
public class SomeObject {

    private String requiredField;

    @XmlElement(name="address", required=true)
    public String getRequiredField() {
        return requiredField;
    }

    public void setRequiredField(String requiredField) {
        this.requiredField = requiredField;
    }    

} 
```

但是，当相应的 Jersey 资源使用生成此对象所需的 JSON 时，它会成功创建该对象，无论是否带有按要求注释的字段。

使用 Jersey 和 JAXB，或者直接相关的技术，有没有办法确保 requiredField 的值出现在消费的 JSON 中？上面的示例缺少什么？

例子：

我想要的是拒绝如下调用，因为 JSON 正文不包含 requiredField 的值。

```
curl -i -X POST -H 'content-type:application/json' -d '{}' http://some/uri 
```

相反，我希望这样的事情能够奏效。

```
curl -i -X POST -H 'content-type:application/json' -d '{"requiredField":"Hello, world!"}' http://some/uri 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T07:30:05.103

您可以为您的字段设置默认值。

```
@XmlRootElement
public class SomeObject {

    private String requiredField = "Hello world!"; 

    //...  
} 
```

现在，如果您不在运行时为此字段设置新值，那么在 JSON 中您将看到 `"Hello world!"`字符串

# java - 来自 getResourceAsStream 的 InputStream 结果为 NULL

> ID：15754484
> 
> 赞同：0
> 
> 时间：2013-04-02T01:08:21.430
> 
> 标签：java, netbeans, jar, nullpointerexception, inputstream

```
 InputStream input = Faculty.class.getClassLoader().getResourceAsStream("Resources\\Names.txt");
        DataInputStream in = new DataInputStream(input);
        BufferedReader br = new BufferedReader(new InputStreamReader(in));
        String strLine;
        while ((strLine = br.readLine()) != null && !strLine.equals("")) {
            keywords.add(strLine);
        } 
```

上面的代码在 NetBeans 中工作。但是当我将代码打包到一个可执行的 Jar 中并从命令行运行它时，它给了我一个 NullPointerException 因为未初始化的`input`. 所以我怀疑 Jar 无法读取打包在其中的资源文件。该文件夹`Resources`直接位于我项目的源文件夹下。任何人都可以提示尝试什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T02:06:40.517

你应该这样写：

```
getResourceAsStream("/Resources/Names.txt"); 
```

如果不添加前缀'/'，则表示你的路径是基于你的类路径，而不是根路径

# responsive-design - 视口调整大小查看器

> ID：15754486
> 
> 赞同：0
> 
> 时间：2013-04-02T01:08:23.150
> 
> 标签：responsive-design

我创建了一个响应式网页，现在我需要检查 3 个断点台式机、平板电脑和 android 上的页面。

任何人都可以帮助工具来测试不同宽度的页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T01:13:29.990

我通常使用浏览器插件、firefox的[firesizer和 Chrome 的](https://addons.mozilla.org/en-us/firefox/addon/firesizer/)[window](https://chrome.google.com/webstore/detail/window-resizer/kkelicaakdanhinjdeammmilcgefonfh?hl=en) resizer 。

# highslide - highslide 刷新父级

> ID：15754492
> 
> 赞同：1
> 
> 时间：2013-04-02T01:09:26.213
> 
> 标签：highslide

使用 Highslide 我想在使用 close X 关闭 ajax 窗口时刷新父页面。我已经在页面上有一个按钮可以执行此操作，但不能保证用户会使用该按钮。我已经尝试了几个我发现的例子，但似乎没有一个有效。

```
hs.Expander.prototype.onAfterClose = function() {
parent.window.location.reload();
}

hs.Expander.prototype.onAfterClose = function() {
if (this.a.id == 'tag-send-form') parent.window.location.reload();
} 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T13:59:50.073

将其放在 Highslide Javascript 文件之后的脚本块中（或在您的 highslide.config.js 文件中）：

```
hs.Expander.prototype.onAfterClose = function() {
    window.location.reload();
}; 
```

**注意：此代码需要 highslide-full.js**

# excel - 将重复条目与 Excel 中的唯一数据相结合

> ID：15754501
> 
> 赞同：11
> 
> 时间：2013-04-02T01:10:06.287
> 
> 标签：excel, excel-2011

我有一个 Excel 数据库，我试图避免手动组合重复数据。除了标签列之外，我有一堆基本相同的列表。我想做的是将这 5 个列表合并为 1 个列表，使类别成为单个单元格中的逗号分隔列表。

转这个

![数据示例](https://i1113.photobucket.com/albums/k501/modsuperstar/ScreenShot2013-04-01at85740PM_zps71f07491.png)

进入这个

![期望的结果](https://i1113.photobucket.com/albums/k501/modsuperstar/ScreenShot2013-04-01at90443PM_zps7f15a378.png)

有没有办法做到这一点？我的文档有几千个列表，所以我显然试图避免手动编辑路线。我是 Excel 新手，因此您可以指出我的任何手持或教程将不胜感激。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-02T04:22:01.077

这也可以使用公式来完成。为了使我的示例正常工作，数据需要按第一列排序，并且需要有一个标题行。

您还需要两列（C 和 D）。首先，添加一个公式，如果 A 列中的数据与其上方的行相同，则本质上说连接 B 列中的数据，否则重置连接。下一列将包含一个用于识别最终串联的公式，以便您稍后进行排序。

这就是我对列 A 和 B 中的列表和类别的处理方式（同样，数据需要按 A 列排序，并且需要有一个标题行）： ![在此处输入图像描述](https://i.stack.imgur.com/3hhaC.png)

这是结果。现在我将复制整个范围并将值粘贴到另一张表中。D 列为零的行是我想要使用的。按 D 列排序会将它们浮动到顶部。 ![在此处输入图像描述](https://i.stack.imgur.com/RAydG.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T01:44:08.790

这将（应该）从源工作表生成一个新工作表，其中连接了重复项。

要使用以下代码，您需要将其添加到 VBA 编辑器中的新模块

打开 VBA 编辑器的快捷方式是`Alt+F11`（对于 Windows）和`Alt+Fn+F11`（对于 Mac）

打开编辑器后，通过从主菜单栏中的“插入”菜单中选择它来添加一个新模块。它应该会自动打开准备接受代码的模块，如果没有，您需要从项目资源管理器中选择它（将被命名为“ModuleN”，其中 N 是下一个可用编号）。

我不确定“Scripting.Dictionary”是否在 osx 中可用，但尝试一下也无妨。

```
Option Explicit

Sub Main()
Dim Source As Worksheet: Set Source = ThisWorkbook.Worksheets("Sheet1")
Dim Destination As Worksheet: Set Destination = ThisWorkbook.Worksheets("Sheet2")

Dim Records As Object: Set Records = CreateObject("Scripting.Dictionary")

Dim Data As Variant
Dim Index As Long
Dim Row As Integer: Row = 1

Data = Source.Range("A1", "B" & Source.Rows(Source.UsedRange.Rows.Count).Row).Value2

For Index = LBound(Data, 1) To UBound(Data, 1)
    If Records.Exists(Data(Index, 1)) Then
        Destination.Cells(Records(Data(Index, 1)), 2).Value2 = Destination.Cells(Records(Data(Index, 1)), 2).Value2 & ", " & Data(Index, 2)
    Else
        Records.Add Data(Index, 1), Row
        Destination.Cells(Row, 1).Value2 = Data(Index, 1)
        Destination.Cells(Row, 2).Value2 = Data(Index, 2)
        Row = Row + 1
    End If
Next Index

Set Records = Nothing

End Sub 
```

# php - mysql 创建一个新行而不是更新现有行

> ID：15754502
> 
> 赞同：1
> 
> 时间：2013-04-02T01:10:14.923
> 
> 标签：php, mysql, sql, sql-update, sql-insert

我正在尝试为特定用户更新 bio 列，但我得到了一个新行。经历过类似的问题，但无法解决我的情况。

```
if (isset($_SESSION['logged_in']) && $_SESSION['name_of_user'] == $profile_name) {
    $pageOwner = true;
}
if (isset($_POST['submit'])) {
    $bio = $_POST['bio'];

    if (empty($bio)) {
        $error = "Missing Bio";
    } else {
        if ($member_bio->num_rows == 1) {

            if ($query = $db->query("UPDATE user_account SET 'bio'='$bio' WHERE 'id_user'='$id'")) {
                $ok_mesg = "Profile has been updated!!!";

            } else {
                $error = "ERROR on our end";
            }
        } else {
            if ($query = $db->query("INSERT INTO user_account (bio) VALUES('$bio')")) {

                $ok_msg = "Profile has been updated";
            } else {
                $error = "Error on our end";
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T01:15:20.157

`UPDATE`如果值已经存在或者`INSERT`不存在，您可以直接使用`INSERT...ON DUPLICATE KEY UPDATE`

但首先你需要指定一个唯一的列，

```
ALTER TABLE user_account ADD CONSTRAINT tb_uq UNIQUE (id_user) 
```

如果列`ID_USER`已经是主键，则跳过第一种方法。实现后，您现在可以使用以下语法

```
INSERT INTO user_account (id_user, bio) 
VALUES($id, '$bio')
ON DUPLICATE KEY UPDATE bio = '$bio'; 
```

*   [INSERT ... ON DUPLICATE KEY UPDATE 语法](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

# java - 使用骆驼，我如何使用标头的值来定义 XPath 表达式？

> ID：15754505
> 
> 赞同：1
> 
> 时间：2013-04-02T01:11:03.347
> 
> 标签：java, spring, apache-camel

我有一个标头，其中包含 XPath 定义：

```
myXPath = "/bookshop/author/books/1|/bookshop/author/books/2" 
```

然后我想在 Xpath 表达式中使用它来设置另一个标题，如下所示：

```
<setHeader headerName="authorBooks">
    <xpath resultType="org.w3c.dom.NodeList">${in.header.myXPath}</xpath>
</setHeader> 
```

阅读[文档](https://camel.apache.org/xpath.html)，您似乎可以将标头值用作表达式的一部分，但不能定义整个内容？我试过这个，但没有奏效：

```
<xpath resultType="org.w3c.dom.NodeList">in:header('myXPath')</xpath> 
```

有人知道这样做的方法吗？我发现这个错误似乎可以满足我的要求，但要到 3.0 才能修复： [https ://issues.apache.org/jira/browse/CAMEL-3697](https://issues.apache.org/jira/browse/CAMEL-3697)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T05:40:24.307

与 Camel 几乎一样，当 DSL 受限于您的情况时，您可以切换到在普通 Java 处理器/bean 中执行此特定部分。

您可以使用[XPathBuilder](https://camel.apache.org/xpath.html#XPath-UsingXPathBuilderwithoutanExchange)来执行您的表达式并手动检索标题。

伪代码：

```
 String result = XPathBuilder.xpath(exchange.getIn().getHeader("myXpath",String.class)).evaluate(context, exchange.getIn().getBody()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T11:31:52.980

在 Camel 2.11 中，这更容易，因为您可以直接在标头上执行 xpath。请参阅*在 Headers 上使用 XPath*部分[的官方文档](https://camel.apache.org/components/latest/xpath-language.html)。

# c++ - 错误：“。”之前的预期构造函数、析构函数或类型转换 令牌 - 了解 fstream

> ID：15754507
> 
> 赞同：0
> 
> 时间：2013-04-02T01:11:14.877
> 
> 标签：c++, file, fstream

我有一个简单的问题。我只是在学习如何使用`fstream`数据文件进行打印，而我只是在编译时遇到了问题。我在这段代码的第 11 行和第 20 行遇到了同样的错误。另外，我不太确定我是否在代码末尾正确地从文件中打印。

我得到的错误是：

> '错误：'.'之前的预期构造函数、析构函数或类型转换 令牌'

对于第 11 行和第 20 行，这是相同的错误，但使用字符`<<`而不是`.`. 我也收到此错误：

> “错误：'if'之前的预期不合格ID”

出于某种原因，尽管我很确定我的语法在这些方面是正确的。这些错误是否有某种关联？这是我的*main.cpp*文件：

```
#include <iostream>
#include <string>

#include <fstream>

using namespace std;

ofstream outFile;
string filename = "test.txt";

outFile.open(filename.c_str() );

if (!outFile) {
  cerr << "File "
       << filename
       << " failed to open for output."
       << endl;
}

outFile << "Hello world!"
        << 2013
        << 3.14
        << "The end."
        << endl;

outFile.close();

ifstream inFile;

inFile.open("test.txt");

if (!inFile) {
  cerr << "File "
       << filename
       << " failed to open for input."
       << endl;
}

int i=0;

while (inFile >> i) {

  cout<< i
  << endl;
  i++;
  cout<< "Year is: "
      << i
      << endl;
  i++;
  cout<< "PI is about: "
      << i
      <<endl;
  i++;
  cout<< i
  <<endl;  
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T01:14:52.887

据我所知，您缺少`main`或其他某种原因，`function`这不是一个合适的程序，例如：

```
int main()
{
    ofstream outFile;
    string filename = "test.txt";

    /// rest of your code
 } 
```

写出文件的代码看起来工作正常，下一个问题是当你在这里读回文件时：

```
while (inFile >> i) 
```

你有混合数据，这不是`int`首先，这样的事情可能会更好地开始：

```
std::string str ;

while (std::getline(inFile, str))
{
        std::cout << str << std::endl ;
} 
```

# rebol - REBOL 对象的类型声明

> ID：15754512
> 
> 赞同：4
> 
> 时间：2013-04-02T01:11:29.267
> 
> 标签：rebol

我知道您可以键入声明参数并返回函数

```
 some-func: function [
   "some func"
    number [ integer! ] 
    ] [
    result [ integer! ]
    ] [
    help number
    return number
    ]

    some-func 1
    some-func "blah"

    NUMBER is an integer of value: 1
    ** Script error: some-func does not allow string! for its number argument 
```

那么对象属性呢？

```
o: make object! [
    a [string!]
    b [integer!]
    c [o2]
    none
]

o2: make object! [
    c [string!]
]

an-object: make o [
    a: 3.141 
    b: "an integer"
    c: "blah"
]

help an-object

N-OBJECT is an object of value:
a               decimal!  3.141
b               string!   "an integer"
c               string!   "blah" 
```

我已经将属性的类型声明作为示例，但它只是用于文档吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-28T01:12:39.367

这是一个非常好的问题，也是我多年来一直在思考的问题。事实证明，Rebol 的内部对象存储机制可以处理这个问题，但是没有办法在源代码中表达出来。你为什么不问？原因如下：

Rebol 目前有名称-值对的概念。这就是上下文和对象的表达方式。但是，通常希望对象包含其他信息，而不仅仅是名称或值。数据类型就是一个很好的例子。其他示例是附加到值的注释，以及对值的保护/权限（例如允许读取和写入）。

所以，问题就变成了：我们希望在语言语法中支持多少种不同的特性，具体来说，我们将如何做到这一点？这些功能的“可选”特性使情况变得更加复杂。因此，您不能真正使用位置语义来描述对象。这意味着添加一个句法方法，这意味着添加关键字（因为 Rebol 确实试图避免使用标点符号。）

因此，结果，源表单会变得相当冗长，我认为我们可以质疑是否值得我们从首先允许该功能中获得的好处。

因此，这是 Rebol 的简单原理优先于特征蠕变的情况。

说了这么多，如果你有一个简单的方法的想法，那就让大家知道吧！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T01:45:59.823

它仅用于文档.. 类型检查仅对函数进行。

# javascript - 如何使用 AngularJS 模板渲染 html

> ID：15754515
> 
> 赞同：68
> 
> 时间：2013-04-02T01:12:30.977
> 
> 标签：javascript, angularjs

这是我的模板：

```
<div class="span12">
  <ng:view></ng:view>
</div> 
```

这是我的视图模板：

```
<h1>{{stuff.title}}</h1>

{{stuff.content}} 
```

我得到了`content`as html，我想在视图中显示它，但我得到的只是原始 html 代码。如何呈现该 HTML？

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2013-04-02T01:14:53.873

利用-

```
<span ng-bind-html="myContent"></span> 
```

你需要告诉 angular 不要逃避它。

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2014-08-26T07:31:55.107

为此，我使用了自定义过滤器。

在我的应用程序中：

```
myApp.filter('rawHtml', ['$sce', function($sce){
  return function(val) {
    return $sce.trustAsHtml(val);
  };
}]); 
```

然后，在视图中：

```
<h1>{{ stuff.title}}</h1>

<div ng-bind-html="stuff.content | rawHtml"></div> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-05-18T09:05:32.020

在 Angular 4+ 中，我们可以使用`innerHTML`property 而不是`ng-bind-html`.

就我而言，它正在工作，我正在使用**angular 5**。

```
<div class="chart-body" [innerHTML]="htmlContent"></div> 
```

in.ts 文件

```
let htmlContent = 'This is the `<b>Bold</b>` text.'; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-11-23T14:42:25.207

您应该遵循 Angular 文档并使用 $sce - $sce 是一项为 AngularJS 提供严格上下文转义服务的服务。这是一个文档：[http ://docs-angularjs-org-dev.appspot.com/api/ng.directive:ngBindHtmlUnsafe](http://docs-angularjs-org-dev.appspot.com/api/ng.directive:ngBindHtmlUnsafe)

让我们以异步加载 Eventbrite 登录按钮为例

在您的控制器中：

```
someAppControllers.controller('SomeCtrl', ['$scope', '$sce', 'eventbriteLogin', 
  function($scope, $sce, eventbriteLogin) {

    eventbriteLogin.fetchButton(function(data){
      $scope.buttonLogin = $sce.trustAsHtml(data);
    });
  }]); 
```

在您看来，只需添加：

```
<span ng-bind-html="buttonLogin"></span> 
```

在您的服务中：

```
someAppServices.factory('eventbriteLogin', function($resource){
   return {
        fetchButton: function(callback){
            Eventbrite.prototype.widget.login({'app_key': 'YOUR_API_KEY'}, function(widget_html){
                callback(widget_html);
            })
      }
    }
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-10-06T10:34:51.797

所以也许你想在你的 index.html 中有这个来加载库、脚本，并使用视图初始化应用程序：

```
<html>
  <body ng-app="yourApp">
    <div class="span12">
      <div ng-view=""></div>
    </div>
    <script src="http://code.angularjs.org/1.2.0-rc.2/angular.js"></script>
    <script src="script.js"></script>
  </body>
</html> 
```

那么 yourView.html 可能只是：

```
<div>
  <h1>{{ stuff.h1 }}</h1>
  <p>{{ stuff.content }}</p>
</div> 
```

scripts.js 可以让您的控制器带有 $scope 的数据。

```
angular.module('yourApp')
    .controller('YourCtrl', function ($scope) {
      $scope.stuff = {
        'h1':'Title',
        'content':"A paragraph..."
      };
    }); 
```

最后，您必须配置路由并分配控制器以查看它的 $scope（即您的数据对象）

```
angular.module('yourApp', [])
.config(function ($routeProvider) {
  $routeProvider
    .when('/', {
      templateUrl: 'views/yourView.html',
      controller: 'YourCtrl'
    });
}); 
```

我还没有测试过，如果有错误，很抱歉，但我认为这是获取数据的 Angularish 方式

# java - 如何编写文本文件 Java

> ID：15754523
> 
> 赞同：64
> 
> 时间：2013-04-02T01:13:07.120
> 
> 标签：java, file, file-io

以下代码不会生成文件（我在任何地方都看不到该文件）。什么不见​​了？

```
try {
    //create a temporary file
    String timeLog = new SimpleDateFormat("yyyyMMdd_HHmmss").format(
        Calendar.getInstance().getTime());
    File logFile=new File(timeLog);

    BufferedWriter writer = new BufferedWriter(new FileWriter(logFile));
    writer.write (string);

    //Close writer
    writer.close();
} catch(Exception e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2013-04-02T01:29:06.633

我认为你的期望和现实不匹配（但他们什么时候;））

基本上，您认为文件的写入位置和文件实际写入的位置是不相等的（嗯，也许我应该写一个`if`声明；））

```
public class TestWriteFile {

    public static void main(String[] args) {
        BufferedWriter writer = null;
        try {
            //create a temporary file
            String timeLog = new SimpleDateFormat("yyyyMMdd_HHmmss").format(Calendar.getInstance().getTime());
            File logFile = new File(timeLog);

            // This will output the full path where the file will be written to...
            System.out.println(logFile.getCanonicalPath());

            writer = new BufferedWriter(new FileWriter(logFile));
            writer.write("Hello world!");
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            try {
                // Close the writer regardless of what happens...
                writer.close();
            } catch (Exception e) {
            }
        }
    }
} 
```

另请注意，您的示例将覆盖任何现有文件。如果要将文本附加到文件中，则应改为执行以下操作：

```
writer = new BufferedWriter(new FileWriter(logFile, true)); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-12-04T09:47:59.820

我想在 MadProgrammer 的回答中添加更多内容。

多行写入的情况下，执行命令时

```
writer.write(string); 
```

人们可能会注意到，换行符在写入文件中被省略或跳过，即使它们出现在调试期间，或者如果相同的文本打印到终端上，

```
System.out.println("\n"); 
```

因此，整个文本是一大块文本，这在大多数情况下是不可取的。换行符可以依赖于平台，所以最好从java系统属性中获取这个字符使用

```
String newline = System.getProperty("line.separator"); 
```

然后使用换行变量而不是“\n”。这将以您想要的方式获得输出。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-04-06T19:54:54.337

在 java 7 中现在可以做

```
try(BufferedWriter w = ....)
{
  w.write(...);
}
catch(IOException)
{
} 
```

w.close 将自动完成

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-05-09T22:07:53.550

它不是创建文件，因为您从未真正创建过文件。你为它做了一个对象。创建实例不会创建文件。

```
File newFile = new File("directory", "fileName.txt"); 
```

你可以这样做来制作一个文件：

```
newFile.createNewFile(); 
```

你可以这样做来创建一个文件夹：

```
newFile.mkdir(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-12-21T22:23:12.097

使用 java 8`LocalDateTime`和 java 7 try-with 语句：

```
public class WriteFile {

    public static void main(String[] args) {

        String timeLog = DateTimeFormatter.ofPattern("yyyyMMdd_HHmmss").format(LocalDateTime.now());
        File logFile = new File(timeLog);

        try (BufferedWriter bw = new BufferedWriter(new FileWriter(logFile))) 
        {
            System.out.println("File was written to: "  + logFile.getCanonicalPath());
            bw.write("Hello world!");
        } 
        catch (IOException e) 
        {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-13T05:39:32.450

您可以尝试使用 Java 库。[FileUtils](http://commons.apache.org/proper/commons-io/apidocs/org/apache/commons/io/FileUtils.html)，它有许多写入文件的函数。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-05-22T17:27:49.243

它对我有用。确保在 timeLog 旁边附加“.txt”。我在一个用 Netbeans 打开的简单程序中使用了它，它将程序写入主文件夹（builder 和 src 文件夹所在的位置）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-09-26T10:14:31.660

## 对我来说最简单的方法就是：

```
 try {
                FileWriter writer = new FileWriter("C:/Your/Absolute/Path/YourFile.txt");
                writer.write("Wow, this is so easy!");
                writer.close();
            } catch (IOException e) {
                e.printStackTrace();
            } 
```

## 有用的提示和技巧：

*   给它一个特定的路径：

    new FileWriter("C:/Your/Absolute/Path/YourFile.txt");

*   新队

    writer.write("\r\n");

*   将行追加到现有 txt

    新的 FileWriter("log.txt");

希望它有效！

# http-headers - 为什么不使用 HTTP 标头进行 Retina Display 检测？

> ID：15754532
> 
> 赞同：3
> 
> 时间：2013-04-02T01:13:38.287
> 
> 标签：http-headers, wordpress, retina-display, highdpi

我是名为[WP Retina 2x](http://wordpress.org/extend/plugins/wp-retina-2x/)的 WordPress 插件的开发者。它工作得非常好——为此做了很多工作——但有些事情让我很困扰。

在服务器端检测 Retina 显示器的众所周知的技巧是使用基于 window.devicePixelRatio 值的 cookie。它工作得很好，但我认为这是一种解决方法。更烦人的是，在生成 HTML 之前（第一次访问），您无法知道显示是否为视网膜。

我们有许多可用的 HTTP 标头，为什么浏览器不简单地添加一个**新**标头？我们可以有一个**Accept DevicePixelRatio**（默认情况下具有诸如“2;1”或“1”之类的值 - 我们甚至可以在未来有一个“4”，只是为了与史蒂夫乔布斯相矛盾：p）而且我们不需要 cookie了。整个工作流程会干净得多。我也相信**服务器应该知道**有关客户端的技术细节，并让用户身份或偏好到 cookie。

我现在不知道如何推广这个想法，但首先你能告诉我这是否是个好主意吗？如果是，我们如何让浏览器实现它？（我想这不会那么容易，但我们需要一个起点）。或者也许......你会有完全不同的想法吗？

# java - 查询未返回任何结果

> ID：15754547
> 
> 赞同：0
> 
> 时间：2013-04-02T01:15:03.717
> 
> 标签：java, sql, database, postgresql

```
Connection con = null;
Statement stmt = null;
Statement resultStmt = null;
ResultSet rs = null;
try {
    // load database driver driver
    System.out.println("Database driver is: " + DataSource.getClassName());
    Class.forName(DataSource.getClassName());

    // connect to database from a given URL with a given username and password
    System.out.println("Database URL is: " + DataSource.getURL());
    con = DriverManager.getConnection(DataSource.getURL(), DataSource.getUserName(), DataSource.getPassword());

    // create an SQL statement object
    stmt = con.createStatement();

    stmt.executeUpdate("INSERT INTO leadcustomer " + "VALUES(1, 'junwei', 'Li', 'heaven road','test@test.com')");

    String SQLStatement = "SELECT * FROM leadcustomer";
    System.out.println("Q1 SQL Statement is: " + SQLStatement);

    rs = resultStmt.executeQuery(SQLStatement);

    while (rs.next()) {
        int customerid = rs.getInt("customerid");
        String fistname = rs.getString("firstname");
        String surname = rs.getString("surname");
        String billAddress = rs.getString("billingAddress");
        String email = rs.getString("email");

        System.out.println("customerid : " + customerid);
        System.out.println("firstname : " + fistname);
        System.out.println("surname : " + surname);
        System.out.println("billingAddress : " + billAddress);
        System.out.println("email : " + email);

        System.out.println(customerid + " : " + fistname + "--" + surname + "--" + billAddress + ":" + email);
    }

    con.close();

    // extract name from first row and print

} catch (SQLException e) {
    // print details of SQL error
    // could be multiple errors chained together
    System.err.println("Error(s) occurred");
    while (e != null) {
        System.err.println("SQLException : " + e.getMessage());
        System.err.println("SQLState : " + e.getSQLState());
        System.err.println("SQLCode : " + e.getErrorCode());
        e = e.getNextException();
        System.err.println();
    }
} 
```

我正在尝试插入数据并在插入后选择表。但它返回错误消息“查询未返回任何结果”

我确实使用`executeUpdate`and`executeQuery`用于不同的 SQL 语句。

有什么建议吗？

顺便说一句，插入操作运行成功。我唯一想要的就是解决错误并执行select语句打印出表格..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T01:24:17.013

您的 resultStmt 尚未初始化。添加

```
resultStmt = con.createStatement(); 
```

前

```
rs = resultStmt.executeQuery(SQLStatement); 
```

# c# - 在 IBM MQ 客户端中传递 ID

> ID：15754550
> 
> 赞同：1
> 
> 时间：2013-04-02T01:15:36.950
> 
> 标签：c#, .net, ibm-mq

我将消息从一个队列读到另一个队列。但是，我的相关 ID 没有保留。

如果导入队列中的消息的关联 ID 为“ABC12345”，当我将其放入导出队列时，关联 ID 的值是不同的。

> 如何在 2 个队列之间保持相同的关联 ID 并始终拥有唯一的消息 ID？

得到：

```
mqQueue.Get(mqMsg);
string messageID = Convert.ToString(mqMsg.MessageId);
string correlationID = Convert.ToString(mqMsg.CorrelationId); 
```

例如，如果相关 id 为“000123456789”，则在读取后，将其放回原处时，同一消息的值会发生变化。

放：

```
 mqMsg.CorrelationId = System.Text.Encoding.UTF8.GetBytes(correlationID);
 mqQueue.Put(mqMsg, mqPutMsgOpts); 
```

我正在通过 MQ.NET 类使用 MQ PUT 和 GET 选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T05:19:45.730

当我将消息放入另一个队列时，下面的代码片段会保留相关 ID。在我的示例中，我执行以下操作：

1)`importQ`使用唯一的相关 ID 发送消息。
2) 从`importQ`.
3) 将收到的消息放到`exportQ`

```
 public static void preserveCorreLid()
    {
        Hashtable mqProps = new Hashtable();
        MQQueueManager qm = null;
        String strCorrelId = "00123456789";

        try
        {
            mqProps.Add(MQC.TRANSPORT_PROPERTY, MQC.TRANSPORT_MQSERIES_MANAGED);
            mqProps.Add(MQC.CHANNEL_PROPERTY, "NET.CLIENT.CHL");
            mqProps.Add(MQC.HOST_NAME_PROPERTY, "localhost");
            mqProps.Add(MQC.PORT_PROPERTY, 2099);

            qm = new MQQueueManager("QM", mqProps);

            MQQueue importQ = qm.AccessQueue("IMPORTQ", MQC.MQOO_INPUT_SHARED |MQC.MQOO_OUTPUT | MQC.MQOO_FAIL_IF_QUIESCING );

            MQMessage mqPutMsg = new MQMessage();
            mqPutMsg.WriteString("This is an import message");
            mqPutMsg.CorrelationId = System.Text.Encoding.UTF8.GetBytes(strCorrelId);
            MQPutMessageOptions mqpmo = new MQPutMessageOptions();
            importQ.Put(mqPutMsg,mqpmo);

            MQMessage respMsg = new MQMessage();
            MQGetMessageOptions gmo = new MQGetMessageOptions();
            gmo.WaitInterval = 3000;
            gmo.Options = MQC.MQGMO_WAIT;

            try
            {
                importQ.Get(respMsg, gmo);
            }
            catch (MQException ex)
            {
                Console.Write(ex);

                Console.WriteLine("Queue Name : " + importQ.Name + ":");
            }
            importQ.Close();

            MQQueue exportQ = qm.AccessQueue("EXPORTQ", MQC.MQOO_OUTPUT | MQC.MQOO_FAIL_IF_QUIESCING);
            exportQ.Put(respMsg);
            exportQ.Close();
            qm.Disconnect();
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex);
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:10:44.673

这行代码为我提供了相关 ID

```
 correlationID = System.Text.Encoding.UTF8.GetString(mqMsg.CorrelationId); 
```

# r - 为什么 R 在我导入的数据集名称前加上 X

> ID：15754554
> 
> 赞同：1
> 
> 时间：2013-04-02T01:15:53.530
> 
> 标签：r, csv, import-from-csv

我不知道为什么标题名称会得到“X”。使用quote=""导入时的前缀。这是代码：

```
xhead = read.csv("~/Desktop/dbdump/users.txt", na.strings = "\\N", quote="", nrows = 1000) 
```

这给了我：

```
names(xhead)
 [1] "X.userId."             "X.fullName."           "X.email."              "X.password."          
 [5] "X.activated."          "X.registrationDate."   "X.locale."             ... 
```

然而：

```
yhead = read.csv("~/Desktop/dbdump/users.txt", na.strings = "\\N", nrows = 1000)
names(yhead)
 [1] "userId"             "fullName"           "email"              "password"          
 [5] "activated"          "registrationDate"   "locale"            ... 
```

我有 quote="" 的原因是我被截断了记录，大概是因为埋在我的 15000 条记录中，有一个杂散的引号。

这是我的数据文件的样子：

```
"userId", "fullName","email","password","activated","registrationDate","locale","notifyOnUpdates","lastSyncTime","plan_id","plan_period_months","plan_price","plan_exp_date","plan_is_trial","plan_is_trial_used","q_hear","q_occupation","pp_subid","pp_payments","pp_since","pp_cancelled","apikey"
"2","Adam Smith","a@mail.com","*****","1","2004-07-23 14:19:32","en_US","1","2011-04-07 07:29:17","3",\N,\N,\N,"0","1",\N,\N,\N,\N,\N,\N,"d7734dce-4ae2-102a-8951-0040ca38ff83" 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T01:55:42.220

列名`make.names`在返回之前运行。引号不是列名的有效字符。您可以通过运行来查看差异：

```
make.names(c('"userId"', "fullName"))
[1] "X.userId." "fullName" 
```

从`make.names`帮助：

> 语法上有效的名称由字母、数字和点或下划线字符组成，并以字母或点开头，后跟数字。... 如有必要，可在前面加上字符“X”。所有无效字符都被翻译为“.”。

一个建议是调用`read.csv`跳过第一行，并且不包括标题来获取大量数据。

```
dd <- read.csv("~/Desktop/dbdump/users.txt", na.strings = "\\N", 
         quote="", nrows = 1000, header = FALSE, skip = 1) 
```

`scan`然后，您可以使用（这是`read.csv`在后台调用的内容）读取列名

```
names(dd) <- scan("~/Desktop/dbdump/users.txt", what = character(), nlines=1,sep =',') 
```

# r - 如何删除数据框中列满足特定条件的行

> ID：15754556
> 
> 赞同：0
> 
> 时间：2013-04-02T01:16:26.693
> 
> 标签：r, dataframe

我有一个看起来像这样的数据框

```
df <- data.frame(cbind(1:10, sample(c(1:5), 10, replace=TRUE)))
# in real case the columns could be more than two
# and the column name could be anything. 
```

我想要做的是删除所有列的值小于5的所有行。这样做的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T01:20:59.857

```
df[!apply(df,1,function(x)all(x<5)),] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T01:21:14.360

首先...请停止使用`cbind`创建data.frames。如果你继续，你会后悔的。R会惩罚你。

```
df[ !rowSums(df <5) == length(df), ] 
```

（length() 函数返回数据框中的列数。）

# mongodb - MongoDB 聚合框架 - 动态字段重命名

> ID：15754558
> 
> 赞同：8
> 
> 时间：2013-04-02T01:16:40.660
> 
> 标签：mongodb, mongodb-query

我发现 MongoDB 聚合框架非常强大——它似乎是展平对象的好选择。我的架构在一个名为`materials`. 数量`materials`是可变的，但特定字段`category`在数组中的对象中是唯一的。我想使用聚合框架来展平结构并根据字段的值动态重命名`category`字段。我找不到一种简单的方法来使用 a`$project`和`$cond`. 有办法吗？

物质对象数组的原因是允许简单的搜索：

例如`{ 'materials.name' : 'XYZ' }`，拉回找到“XYZ”的任何文档。

**例如之前和之后的文件**

```
{
"_id" : ObjectId("123456"),
"materials" : [
    {
        "name" : "XYZ",
        "type" : "Red",
        ...
        "category" : "A"
    },
    {
        "name" : "ZYX",
        "type" : "Blue",
        ...
        "category" : "B"
    }]
} 
```

**至**

```
{
"material_A_name" : "XYZ",
"material_A_type" : "Red",
...
"material_B_name" : "ZYX",
"material_B_type" : "Blue",
...
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-01T20:46:28.063

[在 jira https://jira.mongodb.org/browse/SERVER-5947](https://jira.mongodb.org/browse/SERVER-5947)中有这样的请求- 如果您想拥有此功能，请投票。

同时，如果您事先知道键的可能值是什么（即“类别”的所有唯一值），并且我[在我的博客](http://www.kamsky.org/1/post/2013/04/using-aggregation-framework-to-reshape-schema.html)上有一些示例代码，则有一种解决方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-12-11T06:17:39.553

这对 MongoDB v4.4 很有用，

*   `$map``materials`迭代数组的循环
*   `$map`使用转换为数组后迭代`name`和字段的循环，根据字段和值使用连接您的关键字段要求，`type``$objectToArray``$concat`
*   返回第一个`$map`将返回的结果从第二个`$map`数组转换为对象使用`$arrayToObject`
*   `$unwind`解构`materials`数组
*   `$group`通过 null 并将`materials`对象合并到一个对象
*   `$replaceRoot`替换根中的对象

```
db.collection.aggregate([
  {
    $project: {
      materials: {
        $map: {
          input: "$materials",
          as: "m",
          in: {
            $arrayToObject: [
              {
                $map: {
                  input: {
                    $objectToArray: {
                      name: "$$m.name",
                      type: "$$m.type"
                    }
                  },
                  in: {
                    k: { $concat: ["material", "_", "$$m.category", "_", "$$this.k"] },
                    v: "$$this.v"
                  }
                }
              }
            ]
          }
        }
      }
    }
  },
  { $unwind: "$materials" },
  {
    $group: {
      _id: null,
      materials: { $mergeObjects: "$materials" }
    }
  },
  { $replaceRoot: { newRoot: "$materials" } }
]) 
```

[操场](https://mongoplayground.net/p/7xzLA_3ie_q)

# c - 在节点中存储一个 int

> ID：15754562
> 
> 赞同：0
> 
> 时间：2013-04-02T01:16:55.363
> 
> 标签：c, linked-list

```
#include <stdio.h>
#include <stdlib.h>

struct Fraction { 
    int num;
    int denom;
};

struct PolyTerm {
    int expo;
    struct Fraction coeff;
};

struct PolyNode {
    struct PolyTerm* dataPtr;
    struct PolyNode* next;
};

typedef struct Fraction* FractionAddr;
typedef struct PolyNode* PolyNodeAdr;
typedef struct PolyNode* PolyList;

int main() {
    int exponet;
    PolyNodeAdr polyNode = 0;

    printf("\n\tPlease Enter expoent: ");
    scanf("%d", &exponet);

    polyNode->dataPtr->expo = exponet;

    //printf("\n%d\n",polyNode->dataPtr->expo);

    return;
} 
```

在上面的代码中，我试图将 exponet 存储到 polynode 结构中的 expo 中

但我尝试了很多方法，但错误不断出现

不是expo是一个int吗？为什么我不能将指数（int）存储到其中？

当我刚刚放入`struct PolyTerm dataPtr;`polyNode 的结构时，我检查了几种方法

总的来说，`polyNode->dataPtr.expo = exponet;`它会起作用

我认为因为 dataPtr 是一个指针`struct PolyTerm* dataPtr;`

但我不知道要修复它

谁能向我解释为什么我不能这样做以及解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T01:27:52.590

您正在取消引用`NULL`指针。

`polyNode == NULL`

`dataPtr == anything`.

`polyNode->dataPtr->expo`实际上也是如此`(NULL)->dataPtr->expo`。它没有意义。存在分段错误，因为您试图访问受限内存。这就是为什么 Windows 会弹出该消息的原因。

编辑：感谢@Nik 指出我回答中的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T01:29:20.283

没有分配内存`PolyNodeAdr polyNode`

您必须在声明 polyNode 后添加它`polyNode->dataPtr->expo = exponet;`才能工作

```
polyNode = malloc( sizeof( struct PolyNode )) ;
polyNode->dataPtr = malloc( sizeof( struct PolyTerm )) ; 
```

`struct PolyNode`请注意not的用法，`PolyNodeAdr`因为您 `PolyNodeAdr`使用 typedef 更改为指针。

此外，您不应该 typedef 指针，因为您丢失了名称是指针的信息。

例如：

```
typedef struct PolyNode* PolyNodeAdr; 
```

应该：

```
typedef struct PolyNode PolyNodeAdr; 
```

所以后来你声明：

```
PolyNodeAdr * polyNode; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T01:34:58.373

您必须为要取消引用的所有指针分配内存。完成后释放内存。

```
int main() {
    int exponet;
    PolyNodeAdr polyNode = (PolyNodeAdr)malloc(sizeof(PolyNode));
    polyNode->dataPtr = (PolyTerm*)malloc(sizeof(PolyTerm));

    printf("\n\tPlease Enter expoent: ");
    scanf("%d", &exponet);

    polyNode->dataPtr->expo = exponet;

    //printf("\n%d\n",polyNode->dataPtr->expo);

    free(polyNode->dataPtr);
    free(polyNode);
    return 0;
} 
```

# solr - SOLR中的索引映射类型结构

> ID：15754563
> 
> 赞同：0
> 
> 时间：2013-04-02T01:16:56.150
> 
> 标签：solr

您好，我需要执行以下操作

我必须按技能提供分面搜索，例如：Java、C++ 等...

当用户点击 Java 时，应该显示经验年限，因此用户可以查询具有 3 年 Java 经验，1 年 C++ 经验的人。

我想知道如何在 SOLR 中对此进行索引以实现要求。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T03:56:21.667

可能您可以尝试以下方法：-

1.  将技能存储在单独的多值字段中以进行分面
2.  为技能创建动态字段，以便技能中的字段名称和它所持有的值是经验年限
3.  如果您对任何字段（例如 Java）进行过滤，请使用分面范围查询将年经验作为分面范围返回

# windows - 在 Windows 上使用 node.js 在 PHPStorm 6 中设置 LESS 文件观察器？

> ID：15754568
> 
> 赞同：6
> 
> 时间：2013-04-02T01:17:32.387
> 
> 标签：windows, node.js, less, phpstorm

我最近转换到 PHPStorm 并且非常喜欢它。我正在尝试让“文件观察器”与我的 LESS 代码一起使用，并且我希望它使用 lessc 命令。我安装了 node.js 并且命令“lessc”在 Windows 命令提示符下工作，但它不想在 PHPStorm 中工作。

这是我对文件观察器的配置：

![在此处输入图像描述](https://i.stack.imgur.com/9t6Wa.png)

当文件观察器运行时，我得到这个错误不断出现：

> 执行观察程序“LESS”时发生异常。观察者被禁用。修复它。：无法运行程序“C:\Users\Jason\AppData\Roaming\npm\lessc”（在目录“F:\Plan2Share_v1\public\css”中）：CreateProcess 错误=193，%1 不是有效的 Win32应用

一旦我再次启用观察者，它就会以某种方式禁用并再次向我抛出上述错误。我对 node.js 和 PHPStorm 很陌生。任何关于我可能出错的方向将不胜感激。

编辑：遵循@josh3736 的方向。我现在在 PHPStorm 的运行控制台中得到了他的错误。

```
"C:\Program Files\nodejs\node.exe" C:\Users\Jason\AppData\Roaming\npm\lessc F:\Plan2Share_v1\public\css\style.less

C:\Users\Jason\AppData\Roaming\npm\lessc:2 basedir=`dirname "$0"`
        ^ SyntaxError: Unexpected token ILLEGAL
    at Module._compile (module.js:439:25)
    at Object.Module._extensions..js (module.js:474:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Function.Module.runMain (module.js:497:10)
    at startup (node.js:119:16)
    at node.js:901:3 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T01:32:39.070

该错误告诉我们 PHPStorm 正在调用[`CreateProcess`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425(v=vs.85).aspx)，它只能启动可执行文件。它不能运行脚本/批处理文件，就是这样`lessc`。（PHPStorm 必须使用[`ShellExecute`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762153(v=vs.85).aspx)它。）

要解决此限制，您必须将 Node 安装（最有可能是 C:\Program Files\nodejs\node.exe）指定为可执行文件，并且参数可能应该类似于`C:\Users\Jason\AppData\Roaming\npm\node_modules\less\bin\lessc $FileName$`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-26T14:32:47.610

1.  变更计划：`C:\Users\Jason\AppData\Roaming\npm\lessc.cmd`
2.  更改参数：`--no-color $FileName$`
3.  申请

图片：[https ://dl.dropboxusercontent.com/u/4287697/2014-09-26_11h25_29.png](https://dl.dropboxusercontent.com/u/4287697/2014-09-26_11h25_29.png)

# ruby-on-rails - 为什么我不能在 Heroku 中删除和重建整个搜索数据库？

> ID：15754569
> 
> 赞同：1
> 
> 时间：2013-04-02T01:17:42.003
> 
> 标签：ruby-on-rails, heroku, pg-search

在 localhost 和我的 Heroku staging 应用程序上，pg_search 工作得很好。

在我的 Heroku 产品应用程序中，除了参考模型（我仍想包含）之外，pg_search 仍然显示我的脚注模型（我不再想包含）的搜索结果。

我有...

```
# /app/models/reference.rb
class Reference < ActiveRecord::Base
  has_paper_trail
  include PgSearch
  multisearchable :against => [:source_text, :citation]
end 
```

我已从`include PgSearch`我的`/app/models/footnote.rb`.

我的流程从手动将一些工作人员分配给应用程序开始。（我通常使用 workless 自动执行此操作。）

然后我做：

```
$ heroku run rails console --app testivate
Running `rails console` attached to terminal... up, run.2840
Connecting to database specified by DATABASE_URL
Loading production environment (Rails 3.2.11)
irb(main):001:0> PgSearch::Footnote.delete_all
NameError: uninitialized constant PgSearch::Footnote
irb(main):002:0> PgSearch::Reference.delete_all
irb(main):003:0> PgSearch::Multisearch.rebuild(Reference)
   (1.3ms)  BEGIN
  SQL (56.2ms)  DELETE FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_type" = 'Reference'
   (1279.8ms)  INSERT INTO "pg_search_documents" (searchable_type, searchable_id, content, created_at, updated_at)
 SELECT 'Reference' AS searchable_type,
 "references".id AS searchable_id,
 (
 coalesce("references".source_text::text, '') || ' ' || coalesce("references".citation::text, '')
 ) AS content,
 '2013-04-02 01:05:09.330250' AS created_at,
 '2013-04-02 01:05:09.330250' AS updated_at
 FROM "references"

   (33.8ms)  COMMIT
=> #<PG::Result:0x00000006c849b0>
irb(main):004:0> 
```

`#<PG::Result:0x00000006c849b0>`尽管我刚刚要求 pg_search 索引 53 个文档，每个文档包含 3000 到 15,000 个单词，但最后一步会立即返回结果。

我可以假设重建过程正在进行中吗？是否有某种方法可以确认它何时完成，以便我可以缩减工作进程？（我是否需要为此分配工作进程？）

顺便说一句，以下方法也只需要几秒钟，这似乎不对：

```
$ heroku run rake pg_search:multisearch:rebuild[Reference] --app testivate
Running `rake pg_search:multisearch:rebuild[Reference]` attached to terminal... up, run.3303
Connecting to database specified by DATABASE_URL
   (1.5ms)  BEGIN
  SQL (95.4ms)  DELETE FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_type" = 'Reference'
   (1070.3ms)  INSERT INTO "pg_search_documents" (searchable_type, searchable_id, content, created_at, updated_at)
 SELECT 'Reference' AS searchable_type,
 "references".id AS searchable_id,
 (
 coalesce("references".source_text::text, '') || ' ' || coalesce("references".citation::text, '')
 ) AS content,
 '2013-04-02 01:10:07.355707' AS created_at,
 '2013-04-02 01:10:07.355707' AS updated_at
 FROM "references"

   (103.3ms)  COMMIT 
```

在所有这些尝试之后，我仍然在搜索结果中获得了脚注模型的实例。我怎样才能摆脱它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T02:05:51.013

这有点苛刻，但`heroku run rake db:migrate:redo`成功了。

# ios - 如何使 ViewController 成为 CollectionView 的数据源？

> ID：15754574
> 
> 赞同：0
> 
> 时间：2013-04-02T01:18:15.447
> 
> 标签：ios, uiviewcontroller, protocols, uicollectionview, uitableview

我正在尝试在不使用集合视图控制器的情况下填充集合视图的单元格。我希望我的集合视图所在的视图控制器负责用其内容填充单元格。

任何有关如何解决此问题的建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T01:58:43.137

您需要做的就是将委托方法添加到您的 UIViewController 并将 UIViewController 作为 NIB 中的数据源链接到 UICollectionView。这是一个例子：

```
@interface MainViewController : UIViewController <UICollectionViewDataSource, UICollectionViewDelegateFlowLayout> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T02:23:57.353

```
 myCollectionView.delegate = self;
 myCollectionView.dataSource = self; 
```

# html - 如何保持来自 Dancer Route 的 HTTP 连接

> ID：15754575
> 
> 赞同：1
> 
> 时间：2013-04-02T01:18:26.703
> 
> 标签：html, perl, http, dancer

我在一个项目中使用 Perl Dancer，我想实现 SSE [http://www.html5rocks.com/en/tutorials/eventsource/basics/#toc-introduction-differences](http://www.html5rocks.com/en/tutorials/eventsource/basics/#toc-introduction-differences)

我有一条舞者路线，我正在努力保持活力

```
get '/stream' => sub{
    my $response = Dancer::SharedData->response;
    debug($response->exists);
    $response->status(200);
    $response->content("data: cool test\n\n");
    $response->content_type( 'text/event-stream' );
    $response->header( 'Cache-Control' => 'no-cache' );
    $response->header( 'Connection' => 'Keep-Alive' );
    $response->pass;
    return undef;
}; 
```

似乎从舞者路线返回任何东西都会关闭连接。理想情况下，我想保持打开状态并存储`$response`以将更多数据推送到以后。

更新：在进一步的研究中，舞者使用的 PSGI 应该可以做到这一点： [http](http://search.cpan.org/~miyagawa/PSGI-1.03/PSGI.pod#Delayed_Reponse_and_Streaming_Body) ://search.cpan.org/~miyagawa/PSGI-1.03/PSGI.pod#Delayed_Reponse_and_Streaming_Body 目前正在研究 一种中间件方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-11T21:01:01.933

这里的答案是转移到不同的网络服务器。我使用的是不持有http连接的starman。移动到mojolicious或twiggy。

# salesforce - 如果两个页面使用相同的控制器，但第二个页面使用控制器扩展，我如何将变量状态从一个页面传递到另一个页面？

> ID：15754576
> 
> 赞同：2
> 
> 时间：2013-04-02T01:18:27.230
> 
> 标签：salesforce, apex-code, visualforce, force.com

我有一个页面需要将数据传递到另一个页面。它们都使用相同的控制器，但第二页有自己的控制器扩展。当第一页向第二页传递数据时，第二页会调用控制器的构造函数。如果我从第二页中删除控制器扩展，则可以传递数据，并且仅在第一页上调用构造函数，而不是在第二页上。

如果两个页面使用相同的控制器，但一个页面使用控制器扩展，我如何将状态从一个页面传递到另一个页面？

比如下面的代码，如果我在 outputText 中为变量 t 输入数据，然后进入下一页，状态不会保存，构造函数会被调用，第 2 页的 t 的值为“构造”。如果 testExtension 从第二页中删除，那么一切正常。

顶点/测试1 VisualForce

```
<apex:page controller="test">
    <apex:outputText value="{!t}" />
    <apex:commandButton action="/test2" value="Go to test2" />
</apex:page> 
```

控制器

```
class test {
    public String t {get; set;}
    public test() {
        t = 'construct';
    }
} 
```

顶点/测试2 VisaulForce

```
<apex:page controller="test" extension="testExtension">
    <apex:outputLabel value="{!t}" />
</apex:page> 
```

控制器扩展：

```
class testExtension {
    public testExtension(test controller) {  
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:38:59.353

```
public with sharing class Fake01_Controller {

    public String fake02String {get;set;}

    public PageReference fake03Submit() {
        PageReference prToNavigate = null;

        prToNavigate = Page.Fake_02;

        return prToNavigate;
    }

} 
```

假01页：

```
<apex:form >

    <apex:inputText value="{!fake02String}" />

    <apex:commandButton action="{!fake03Submit}" 
        value="Navigate to Fake 02" 
    />

</apex:form> 
```

假02页：

```
<apex:form >

    <apex:outputText value="{!fake02String}" />

</apex:form> 
```

请阅读有关[setRedirect](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_pages_pagereference.htm)方法的 PageReference：

> 如果设置为 false，则重定向是一个服务器端转发，当且仅当目标页面使用相同的控制器并包含源页面使用的扩展的正确子集时才会保留视图状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T06:59:20.673

```
class test {
    public String t {get; set;}
    public test() {
        t = 'construct';
    }
   public PageReference test2() {
       return page.test2;
    }
}

<apex:page controller="test">
    <apex:outputText value="{!t}" />
    <apex:commandButton action="{!test2)" value="Go to test2" />
</apex:page> 
```

# java - 如何禁用相同布局的按钮之间的交互？

> ID：15754577
> 
> 赞同：0
> 
> 时间：2013-04-02T01:18:30.787
> 
> 标签：java, android

我有两组布局，填充有按钮。有没有办法禁用相同布局的按钮之间的任何交互？当我单击一个按钮然后从同一布局中单击另一个按钮时，我只需要什么都不会发生。对于属于上下布局的按钮，我用“和”标记了每个按钮。我每种5个。我有一些相反布局的交互按钮，效果很好（实际上任何两个给定按钮之间的交互都很好，这很糟糕），但我不希望相同布局的按钮之间的交互。

这是我的游戏课，不是全部，只是重要的部分。另外，我已经删除了其余按钮的代码，只剩下 4 个按钮，每个布局 2 个，以节省一些空间。我从 sqlite 数据库导入一些文本，并将其随机设置为我的按钮。

```
final OnClickListener clickListener = new OnClickListener() {

            private Button buttonClicked;

            public void onClick(View v) {

                Button button = (Button) v;
                button.getBackground().setColorFilter(new LightingColorFilter(0xFFFFFFFF, 0x003333));

                if (buttonClicked == null) {
                    // first button is clicked
                    buttonClicked = button;
                } else {
                    // second button is clicked
                    if (buttonClicked.getTag().equals(button.getTag())) {
                        button.getBackground().setColorFilter(new LightingColorFilter(0xFFFFFFFF, 0x66FF33));
                        buttonClicked.getBackground().setColorFilter(new LightingColorFilter(0xFFFFFFFF, 0x66FF33));
                      buttonClicked.setEnabled(false);
                        button.setEnabled(false);
                    } else {
                        buttonClicked.setEnabled(false);
                        buttonClicked.setTextColor(Color.GRAY);
                        buttonClicked.getBackground().setColorFilter(new LightingColorFilter(0xFFFFFFFF, 0xFFCC99));
                        button.getBackground().clearColorFilter();
                    }
                    buttonClicked = null;

            }
     };

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.game);

        a1 = (Button) findViewById(R.id.bA1);
        a2 = (Button) findViewById(R.id.bA2);
        b1 = (Button) findViewById(R.id.bB1);
        b2 = (Button) findViewById(R.id.bB2);

        nextQuestion();
        }

        public void nextQuestion() {

        TestAdapter mDbHelper = new TestAdapter(this);
        mDbHelper.createDatabase();

        try{ 

            mDbHelper.open();

            Cursor c = mDbHelper.getTestData(generateWhereClause());

            mAnsweredQuestions.add(c.getLong(0));

            ArrayList<MyStruct> labelsA = new ArrayList<MyStruct>();
            ArrayList<MyStruct> labelsB = new ArrayList<MyStruct>();

            labelsA.add(new MyStruct(c.getString(2), "1")); // this tag should be the same to button that matches
            labelsB.add(new MyStruct(c.getString(3), "1"));
            labelsA.add(new MyStruct(c.getString(4), "2"));
            labelsB.add(new MyStruct(c.getString(5), "2"));

            Collections.shuffle(labelsA);
            Collections.shuffle(labelsB);

            pitanje.setText(c.getString(1));

            a1.setText(labelsA.get(0).label);
            a1.setTag(labelsA.get(0).tag);
            a1.setOnClickListener(clickListener);
            a1.getBackground().clearColorFilter();
            a1.setEnabled(true);
            b1.setText(labelsB.get(0).label);
            b1.setTag(labelsB.get(0).tag);
            b1.setOnClickListener(clickListener);
            b1.getBackground().clearColorFilter();
            b1.setEnabled(true);
            a2.setText(labelsA.get(1).label);
            a2.setTag(labelsA.get(1).tag);
            a2.setOnClickListener(clickListener);
            a2.getBackground().clearColorFilter();
            a2.setEnabled(true);
            b2.setText(labelsB.get(1).label);
            b2.setTag(labelsB.get(1).tag);
            b2.setOnClickListener(clickListener);
            b2.getBackground().clearColorFilter();
            b2.setEnabled(true);

        }

        finally{ 
            mDbHelper.close();
        } 
```

XML:

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="@drawable/background">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="30dp"
        android:gravity="top|center"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/tvPitanje"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Ovde ce biti postavljeno pitanje"
            android:textColor="#ffffff"
            android:textSize="18sp" />

    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="360dp"
        android:orientation="horizontal" >

        <LinearLayout
            android:id="@+id/kolona1"
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="50"
            android:gravity="top"
            android:orientation="vertical"
            android:paddingLeft="3dp"
            android:paddingRight="2dp" >

            <Button
                android:id="@+id/bA1"
                android:layout_width="fill_parent"
                android:layout_height="41dp"
                android:layout_gravity="clip_horizontal"
                android:layout_marginBottom="1.5dp"
                android:background="@drawable/buttons"
                android:gravity="center_vertical|center_horizontal"
                android:padding="0dp"
                android:tag="l"
                android:text="A1"
                android:textColor="#ffffff"
                android:textSize="16sp" />

            <Button
                android:id="@+id/bA2"
                android:layout_width="fill_parent"
                android:layout_height="41dp"
                android:text="A2"
                android:background="@drawable/buttons"
                android:textColor="#ffffff"
                android:layout_marginBottom="1.5dp"
                android:layout_marginTop="1.5dp"
                android:tag="l"
                android:padding="0dp"
                android:textSize="16sp" />

            <Button
                android:id="@+id/bA3"
                android:layout_width="fill_parent"
                android:layout_height="41dp"
                android:text="A3"
                android:background="@drawable/buttons"
                android:textColor="#ffffff"
                android:layout_marginBottom="1.5dp"
                android:layout_marginTop="1.5dp"
                android:tag="l"
                android:padding="0dp"
                android:textSize="16sp" />

            <Button
                android:id="@+id/bA4"
                android:layout_width="fill_parent"
                android:layout_height="41dp"
                android:text="A4"
                android:background="@drawable/buttons"
                android:textColor="#ffffff"
                android:layout_marginBottom="1.5dp"
                android:layout_marginTop="1.5dp"
                android:tag="l"
                android:padding="0dp"
                android:textSize="16sp" />

            <Button
                android:id="@+id/bA5"
                android:layout_width="fill_parent"
                android:layout_height="41dp"
                android:text="A5"
                android:background="@drawable/buttons"
                android:textColor="#ffffff"
                android:layout_marginBottom="1.5dp"
                android:layout_marginTop="1.5dp"
                android:tag="l"
                android:padding="0dp"
                android:textSize="16sp" />

            <Button
                android:id="@+id/bA6"
                android:layout_width="fill_parent"
                android:layout_height="41dp"
                android:text="A6"
                android:background="@drawable/buttons"
                android:textColor="#ffffff"
                android:layout_marginBottom="1.5dp"
                android:layout_marginTop="1.5dp"
                android:tag="l"
                android:padding="0dp"
                android:textSize="16sp" />

            <Button
                android:id="@+id/bA7"
                android:layout_width="fill_parent"
                android:layout_height="41dp"
                android:text="A7"
                android:background="@drawable/buttons"
                android:textColor="#ffffff"
                android:layout_marginBottom="1.5dp"
                android:layout_marginTop="1.5dp"
                android:tag="l"
                android:padding="0dp"
                android:textSize="16sp" />

            <Button
                android:id="@+id/bA8"
                android:layout_width="fill_parent"
                android:layout_height="41dp"
                android:text="A8"
                android:background="@drawable/buttons"
                android:textColor="#ffffff"
                android:layout_marginTop="1.5dp"
                android:tag="l"
                android:padding="0dp"
                android:textSize="16sp" />

        </LinearLayout>

        <LinearLayout
            android:id="@+id/kolona2"
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="50"
            android:gravity="top"
            android:orientation="vertical"
            android:paddingLeft="2dp"
            android:paddingRight="3dp" >

            <Button
                android:id="@+id/bB1"
                android:layout_width="fill_parent"
                android:layout_height="41dp"
                android:layout_gravity="top|fill_horizontal"
                android:layout_marginBottom="1.5dp"
                android:background="@drawable/buttons"
                android:gravity="top|center_horizontal"
                android:tag="r"
                android:text="B1"
                android:textColor="#ffffff"
                android:textSize="16sp" />

            <Button
                android:id="@+id/bB2"
                android:layout_width="fill_parent"
                android:layout_height="41dp"
                android:layout_marginBottom="1.5dp"
                android:layout_marginTop="1.5dp"
                android:background="@drawable/buttons"
                android:gravity="top|center_horizontal"
                android:tag="r"
                android:text="B2"
                android:textColor="#ffffff"
                android:textSize="16sp" />

            <Button
                android:id="@+id/bB3"
                android:layout_width="fill_parent"
                android:layout_height="41dp"
                android:layout_marginBottom="1.5dp"
                android:layout_marginTop="1.5dp"
                android:background="@drawable/buttons"
                android:gravity="top|center_horizontal"
                android:tag="r"
                android:text="B3"
                android:textColor="#ffffff"
                android:textSize="16sp" />

            <Button
                android:id="@+id/bB4"
                android:layout_width="fill_parent"
                android:layout_height="41dp"
                android:layout_marginBottom="1.5dp"
                android:layout_marginTop="1.5dp"
                android:background="@drawable/buttons"
                android:gravity="top|center_horizontal"
                android:tag="r"
                android:text="B4"
                android:textColor="#ffffff"
                android:textSize="16sp" />

            <Button
                android:id="@+id/bB5"
                android:layout_width="fill_parent"
                android:layout_height="41dp"
                android:layout_marginBottom="1.5dp"
                android:layout_marginTop="1.5dp"
                android:background="@drawable/buttons"
                android:gravity="top|center_horizontal"
                android:tag="r"
                android:text="B5"
                android:textColor="#ffffff"
                android:textSize="16sp" />

            <Button
                android:id="@+id/bB6"
                android:layout_width="fill_parent"
                android:layout_height="41dp"
                android:layout_marginBottom="1.5dp"
                android:layout_marginTop="1.5dp"
                android:background="@drawable/buttons"
                android:gravity="top|center_horizontal"
                android:tag="r"
                android:text="B6"
                android:textColor="#ffffff"
                android:textSize="16sp" />

            <Button
                android:id="@+id/bB7"
                android:layout_width="fill_parent"
                android:layout_height="41dp"
                android:layout_marginBottom="1.5dp"
                android:layout_marginTop="1.5dp"
                android:background="@drawable/buttons"
                android:gravity="top|center_horizontal"
                android:tag="r"
                android:text="B7"
                android:textColor="#ffffff"
                android:textSize="16sp" />

            <Button
                android:id="@+id/bB8"
                android:layout_width="fill_parent"
                android:layout_height="41dp"
                android:layout_marginTop="1.5dp"
                android:background="@drawable/buttons"
                android:gravity="top|center_horizontal"
                android:tag="r"
                android:text="B8"
                android:textColor="#ffffff"
                android:textSize="16sp" />

        </LinearLayout>

    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="50dp"
        android:orientation="horizontal"
        android:weightSum="3" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:gravity="center" >

            <Button
                android:id="@+id/bIzlaz"
                android:layout_width="80dp"
                android:layout_height="42dp"
                android:layout_gravity="center"
                android:background="@drawable/buttons"
                android:gravity="center"
                android:text="Izlaz!"
                android:textColor="#ffffff"
                android:textSize="20sp" />

        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:gravity="center" >

            <TextView
                android:id="@+id/tvPoeni"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/tvScore"
                android:textColor="#ffffff"
                android:textSize="21sp" />

        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:gravity="center" >

            <TextView
                android:id="@+id/tvVreme"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="30"
                android:textColor="#ff0000"
                android:textSize="21sp" />

        </LinearLayout>

    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:02:52.143

您可以使用该`getParent`方法并比较两个视图的父级。如果父级相同，则按钮位于相同的布局中，不会发生任何事情。

改变你的其他：

```
} else {
    // second button is clicked 
```

... 到一个 else if：

```
// only do stuff if buttons are in different layouts
} else if (button.getParent () != buttonClicked.getParent()) {
     // second button is clicked 
```

# c# - 这些线是什么意思？

> ID：15754580
> 
> 赞同：-3
> 
> 时间：2013-04-02T01:19:02.530
> 
> 标签：c#

很抱歉这个非常模糊的问题，但我不确定如何谷歌/问这个。

基本上，我在很多 c# 代码中看到了这 2 行（类似的）：

```
[DllImport("user32.dll")] 
```

和

```
Task<string> getStringTask = client.GetStringAsync("http://msdn.microsoft.com"); 
```

在第一个片段中，它实际上在做什么。有什么`[ ]`用？

在第二个片段中，`<string>`声明是什么，因此我可以找到更多信息。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T01:22:59.870

`[DllImport("user32.dll")]`

*   该`DllImport`属性允许您指定包含该方法的 DLL 的名称。通常的做法是将 C# 方法命名为与导出的方法相同的名称，但您也可以为 C# 方法使用不同的名称。

请参阅[平台调用教程](http://msdn.microsoft.com/en-us/library/aa288468%28v=vs.71%29.aspx)

`Task<string>`-- 见[泛型](http://msdn.microsoft.com/en-us/library/512aeb7t%28v=vs.110%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T01:23:11.477

> 像 [DllImport("msvcrt.dll")] 吗？

C#代码可以直接调用非托管代码有两种方式：

1.**直接调用从DLL中导出的函数。**

2.在 COM 对象上调用接口方法（有关此方面的更多信息，您还没有问过！请参阅 COM 互操作部分 C# 客户端教程）。

> **简单地说**， `DllImport`并`dllexport`启用与 DLL 文件的互操作。我们可以使用 C++ DLL 动态链接库，或自定义的旧版 DLL — 甚至是我们无法重写但能够修改的。

最佳导师： http: [//www.dotnetperls.com/dllimport](http://www.dotnetperls.com/dllimport)

> **直接从 C# 调用 DLL 导出**
> 要将方法声明为具有来自 DLL 导出的实现，请执行以下操作： 使用 static 和 extern C# 关键字声明方法。将 DllImport 属性附加到该方法。DllImport 属性允许您指定包含该方法的 DLL 的名称。通常的做法是将 C# 方法命名为与导出的方法相同的名称，但您也可以为 C# 方法使用不同的名称。（可选）为方法的参数和返回值指定自定义封送处理信息，这将覆盖 .NET Framework 默认封送处理。

**示例 1**

```
This example shows you how to use the DllImport attribute to output a message by calling puts from msvcrt.dll.

// PInvokeTest.cs
using System;
using System.Runtime.InteropServices;

class PlatformInvokeTest
{
    [DllImport("msvcrt.dll")]
    public static extern int puts(string c);
    [DllImport("msvcrt.dll")]
    internal static extern int _flushall();

    public static void Main() 
    {
        puts("Test");
        _flushall();
    }
} 
```

> 输出
> 
> 测试

* * *

**严格的引用**

* * *

[http://msdn.microsoft.com/en-us/library/aa288468%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/aa288468%28v=vs.71%29.aspx)
[http://www.codeproject.com/Articles/189374/The-Basics-of-Task-Parallelism -via-C](http://www.codeproject.com/Articles/189374/The-Basics-of-Task-Parallelism-via-C)
[http://www.dreamincode.net/forums/topic/211613-very-basic-introduction-to-tasks/](http://www.dreamincode.net/forums/topic/211613-very-basic-introduction-to-tasks/)
[http://www.basarat.com/2011/06/best-tutorial-of- c-async.html](http://www.basarat.com/2011/06/best-tutorial-of-c-async.html)

# c - 线程中的 epoll 和哈希表

> ID：15754582
> 
> 赞同：0
> 
> 时间：2013-04-02T01:19:27.853
> 
> 标签：c, linux, multithreading, epoll

我有带有工作线程的多线程应用程序，我正在使用哈希表在两个 opend sd（套接字描述符）之间路由消息，每个线程都在使用 epoll_wait 等待新连接，因此当创建新的 sd 时，它将被添加到哈希，它将开始路由消息。可以从没有互斥锁的哈希中删除吗？或者下面的假设是否正确？

我正在考虑它的原因是因为我将从哈希中删除它应该是安全的，因为新的 sd # 不会有相同的 sd # 保存在哈希中，除非它用 close(sd) 关闭。

```
//Global var
struct route_table {
       int from_sd;
       int to_sd;
};

//end of global var
int main()
{
     route_table = malloc(sizeof(struct route_table) * file-max); //allocate an array for all fds from /proc/sys/fs/file-max

}

void *worker_function(void *)//lpthread
{
   epoll_wait()
  if (events & EPOLLIN)
  {
   if (route_table[fd].from_sd == fd)
           send_msg(route_table[fd].to_sd, msg)
  }

  if (events & EPOLLERR)
//EPOLLERR above is just an example, I'm covering all other errors
  {
   if (route_table[fd].from_sd == fd) {
           route_table[fd].to_sd   = 0; //remove from hash
           route_table[fd].from_sd = 0; //remove from hash then another worker thread starts working, so the other worker won't hit the same slot as the sd is still open for this thread
           shutdown(sd, SHUT_RDWR);//we don't care about this one
           close(sd); //now control is back for this thread then this sd will be removed and now new thread can have the same sd # with no problem
   }
  }    

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T05:33:52.080

您的代码示例并不是那么清楚。线程如何相互关联？像 epoll_wait() 这样的地方没有显示正常的参数。最典型的是，单个线程将调用 epoll_wait() 来服务多个 fd。但是，如果您有多个线程执行它们自己的 epoll_wait() 然后引用哈希表，则很可能该哈希需要 MT 保护。

# c++ - 使用 OpenCV 从图像中检测最大矩形

> ID：15754583
> 
> 赞同：3
> 
> 时间：2013-04-02T01:19:48.600
> 
> 标签：c++, python, opencv, image-processing

[我在这里](https://stackoverflow.com/questions/15744520/cropping-out-an-image-from-an-existing-image)问了一个先前的问题，并按照答案中的建议，我构建了以下程序，我认为该程序可以检测到大矩形，但它根本没有检测到矩形。不过，它确实适用于这张[图片](http://cl.ly/1e363U230V342g0l123t)。

[原始图像](https://i.stack.imgur.com/MKcXt.png)

[所需图像](https://i.stack.imgur.com/hMTnv.png)

我希望解决方案不仅适用于该图像，还适用于此类不同的图像。以下代码的主要部分来自 SO 上的不同答案

我的完整程序：

```
#include <cv.h>
#include <highgui.h>
using namespace cv;
using namespace std;

double angle(  Point pt1,  Point pt2,  Point pt0 ) {
    double dx1 = pt1.x - pt0.x;
    double dy1 = pt1.y - pt0.y;
    double dx2 = pt2.x - pt0.x;
    double dy2 = pt2.y - pt0.y;
    return (dx1*dx2 + dy1*dy2)/sqrt((dx1*dx1 + dy1*dy1)*(dx2*dx2 + dy2*dy2) + 1e-10);
}

void find_squares( Mat& image,  vector< vector< Point> >& squares)
{
    // blur will enhance edge detection
    Mat blurred(image);
    medianBlur(image, blurred, 9);

     Mat gray0(blurred.size(), CV_8U), gray;
     vector< vector< Point> > contours;

    // find squares in every color plane of the image
    for (int c = 0; c < 3; c++)
    {
        int ch[] = {c, 0};
         mixChannels(&blurred, 1, &gray0, 1, ch, 1);

        // try several threshold levels
        const int threshold_level = 2;
        for (int l = 0; l < threshold_level; l++)
        {
            // Use Canny instead of zero threshold level!
            // Canny helps to catch squares with gradient shading
            if (l == 0)
            {
                 Canny(gray0, gray, 10, 20, 3); // 

                // Dilate helps to remove potential holes between edge segments
                 dilate(gray, gray,  Mat(),  Point(-1,-1));
            }
            else
            {
                    gray = gray0 >= (l+1) * 255 / threshold_level;
            }

            // Find contours and store them in a list
             findContours(gray, contours, CV_RETR_LIST, CV_CHAIN_APPROX_SIMPLE);

            // Test contours
             vector< Point> approx;
            for (size_t i = 0; i < contours.size(); i++)
            {
                    // approximate contour with accuracy proportional
                    // to the contour perimeter
                     approxPolyDP( Mat(contours[i]), approx,  arcLength( Mat(contours[i]), true)*0.02, true);

                    // Note: absolute value of an area is used because
                    // area may be positive or negative - in accordance with the
                    // contour orientation
                    if (approx.size() == 4 &&
                            fabs(contourArea( Mat(approx))) > 1000 &&
                            isContourConvex( Mat(approx)))
                    {
                            double maxCosine = 0;

                            for (int j = 2; j < 5; j++)
                            {
                                    double cosine = fabs(angle(approx[j%4], approx[j-2], approx[j-1]));
                                    maxCosine = MAX(maxCosine, cosine);
                            }

                            if (maxCosine < 0.3)
                                    squares.push_back(approx);
                    }
            }
        }
    }
}

void find_largest_square(const vector<vector <Point> >& squares, vector<Point>& biggest_square) {
    if (!squares.size()) {
        return;
    }

    int max_width = 0;
    int max_height = 0;
    int max_square_idx = 0;
    const int n_points = 4;

    for (size_t i = 0; i < squares.size(); i++) {
        Rect rectangle = boundingRect(Mat(squares[i]));
        if ((rectangle.width >= max_width) && (rectangle.height >= max_height)) {
            max_width = rectangle.width;
            max_height = rectangle.height;
            max_square_idx = i;
        }
    }
    biggest_square = squares[max_square_idx];

}

int main(int argc, char* argv[])
{
    Mat img =  imread(argv[1]);
    if (img.empty())
    {
         cout << "!!! imread() failed to open target image" <<  endl;
        return -1;        
    }
    vector< vector< Point> > squares;
    find_squares(img, squares);
    vector<Point> largest_square;
    find_largest_square(squares, largest_square);
    for (int i = 0; i < 4; ++i) {
        line(img, largest_square[i], largest_square[(i+1)%4], Scalar(0, 255, 0), 1, CV_AA);
    }
    imwrite("squares.png", img);
    imshow("squares", img);
    waitKey(0);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:05:55.907

我认为您可以使用 findContours 函数轻松做到这一点 - [http://docs.opencv.org/doc/tutorials/imgproc/shapeescriptors/find_contours/find_contours.html](http://docs.opencv.org/doc/tutorials/imgproc/shapedescriptors/find_contours/find_contours.html)最大的轮廓（或最终第二大的轮廓）应该是黑色矩形的轮廓。然后只需找到将围绕此轮廓的最小矩形（只需找到具有最大/最小 x/y 坐标的点）。

# python - 使用 Python 只保留字符串中的某些字符？

> ID：15754587
> 
> 赞同：12
> 
> 时间：2013-04-02T01:20:19.650
> 
> 标签：python, string, replace

在我的程序中，我有一个这样的字符串：

ag ct oso gcota

使用 python，我的目标是去掉空格，只保留 a、t、c 和 g 字符。我了解如何摆脱空白（我只是使用 line = line.replace(" ", "")）。但是，当它们可能是字母表中的任何其他字母时，我怎样才能摆脱我不需要的字符呢？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-02T01:27:17.440

一个非常优雅和快速的方法是使用正则表达式：

```
import re

str = 'ag ct oso gcota'
str = re.sub('[^atcg]', '', str)

"""str is now 'agctgcta""" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-02T01:21:55.083

我可能会做类似的事情：

```
chars_i_want = set('atcg')
final_string = ''.join(c for c in start_string if c in chars_i_want) 
```

这可能是最简单的方法。

* * *

另一种选择是`str.translate`用来做这项工作：

```
import string
chars_to_remove = string.printable.translate(None,'acgt')
final_string = start_string.translate(None,chars_to_remove) 
```

我不确定哪个会更好。需要通过定时`timeit`才能确定。

* * *

**更新**：时间！

```
import re
import string

def test_re(s,regex=re.compile('[^atgc]')):
    return regex.sub(s,'')

def test_join1(s,chars_keep=set('atgc')):
    return ''.join(c for c in s if c in chars_keep)

def test_join2(s,chars_keep=set('atgc')):
    """ list-comp is faster, but less 'idiomatic' """
    return ''.join([c for c in s if c in chars_keep])

def translate(s,chars_to_remove = string.printable.translate(None,'acgt')):
    return s.translate(None,chars_to_remove)

import timeit

s = 'ag ct oso gcota'
for func in "test_re","test_join1","test_join2","translate":
    print func,timeit.timeit('{0}(s)'.format(func),'from __main__ import s,{0}'.format(func)) 
```

可悲的是（对我来说），`regex`在我的机器上获胜：

```
test_re 0.901512145996
test_join1 6.00346088409
test_join2 3.66561293602
translate 1.0741918087 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-10-18T18:30:15.020

人们在投票之前是否测试了 mgilson 的 test_re() 函数？[re.sub()](https://docs.python.org/3.4/library/re.html#re.sub)的参数是相反的，所以它在一个空字符串中进行替换，并且总是返回空字符串。

我在 python 3.4 中工作；string.translate() 只接受一个参数，一个字典。因为构建这个字典有开销，所以我把它移出了函数。公平地说，我还将正则表达式编译移出函数（这并没有产生明显的差异）。

```
import re
import string

regex=re.compile('[^atgc]')

chars_to_remove = string.printable.translate({ ord('a'): None, ord('c'): None, ord('g'): None, ord('t'): None })
cmap = {}
for c in chars_to_remove:
    cmap[ord(c)] = None

def test_re(s):
    return regex.sub('',s)

def test_join1(s,chars_keep=set('atgc')):
    return ''.join(c for c in s if c in chars_keep)

def test_join2(s,chars_keep=set('atgc')):
    """ list-comp is faster, but less 'idiomatic' """
    return ''.join([c for c in s if c in chars_keep])

def translate(s):
    return s.translate(cmap)

import timeit

s = 'ag ct oso gcota'
for func in "test_re","test_join1","test_join2","translate":
    print(func,timeit.timeit('{0}(s)'.format(func),'from __main__ import s,{0}'.format(func))) 
```

以下是时间安排：

```
test_re 3.3141989699797705
test_join1 2.4452173250028864
test_join2 2.081048655003542
translate 1.9390292020107154 
```

太糟糕了 string.translate() 没有选项来控制如何处理不在地图中的字符。当前的实现是保留它们，但我们也可以选择删除它们，以防我们想要保留的字符远少于我们想要删除的字符（哦，你好，unicode）。

# javascript - 带有上传jquery的多进度条

> ID：15754588
> 
> 赞同：0
> 
> 时间：2013-04-02T01:20:43.330
> 
> 标签：javascript, jquery

当我上传多个文件时，我的进度条出现错误，我找不到问题：（

我上传了多个文件，但文件是：

1.  1.jpg

2.  2.jpg

3.  3.jpg

4.  4.jpg

拖动文件时的示例错误

*   1.jpg / 完成

*   1.jpg / 完成

*   1.jpg / 完成

*   1.jpg / 完成

我的进度条有问题，我找不到问题出在哪里..

我的脚本：

```
(function ($) {
    var body = document.body;
    var h = $(document).height();

    var u = {
        message: 'Drag and drop file here..',
        post_url: 'upload.php'
    }
    $.fn.dragme = function (uu) {
        var t = this;

        if (uu) $.extend(u, uu);
        t.each(function () {
            $(body).append("<div class='droparea' style='height: 100%;display:none;'><span class='message'>" + u.message + "</span></div>");
            $('.message').css({
                top: '50%',
                color: '#F8F8F8',
                margin: '45%',
                position: 'relative'
            });
            $(t).on({
                dragenter: function (d) {
                    d.preventDefault();
                    d.stopPropagation();
                    if ($('.droparea').length != 1) {
                        $('.droparea').css('display', 'block');
                        $('.message').css({
                            top: '50%',
                            color: '#F8F8F8',
                            margin: '45%',
                            position: 'relative'
                        });

                    }
                    console.log('dragEnter');
                },
                //---------------------------dragover basic ----------------------------------------//

                dragover: function (d) {
                    d.preventDefault();
                    d.stopPropagation();
                    $('.droparea').css('display', 'block');
                    //console.log('dragover');
                },
                //---------------------------dragleave basic ----------------------------------------//

                dragleave: function (d) {
                    d.preventDefault();
                    d.stopPropagation();
                    $('.droparea').on('dragleave', function (d) {
                        $('.droparea').remove();
                    });
                }
            });
            //---------------------------drop add template ----------------------------------------//

            this.addEventListener('drop', function (e) {
                e.preventDefault();
                e.stopPropagation();
                $('.droparea').remove();
                var files = e.dataTransfer.files;
                var template = '<li class="file-preview" id="' + files.name + '">' +
                    '<div class="progress">' +
                    '<div class="progressbaru">cool</div>' +
                    '</div>' +
                    '</li>';

                upload(files, $(this), 0); //upload 1 files
                $('#container').append(template);
            }, false);
        });

        //-------------------------------------------------------------------------------//
        //                          function upload
        //-------------------------------------------------------------------------------//

        function upload(files, area, index) {
            var file = files[index];
            var xhr = new XMLHttpRequest();

            var template = '<li class="file-preview" id="' + files.name + '">' +
                '<div class="progress">' +
                '<div class="progressbaru"></div>' +
                '</div>' +
                '</li>';

            var formData = new FormData();
            formData.append("file", files);

            //-------------------------- load -----------------------------------------------//

            xhr.addEventListener('load', function (e) {

                if (index < files.length - 1) {
                    alert('here');
                    upload(files,area, index+1); // upload+1...
                    $('container').append(template);
                    console.log(e);
                }

            }, false);

            //---------------------------progressbar----------------------------------------//

           xhr.upload.addEventListener('progress',function(e){
                if (e.lengthComputable) {
                    var pourcent = Math.round(e.loaded / e.total * 100);
                    $('.progressbaru').css('width', pourcent + "%");
                    console.log(e);

        }
        else {
            alert("Failed to compute file upload length");
        }

            },false);
            //---------------------------! end progressbar----------------------------------------//

            xhr.open('post', u.post_url, true); //in real is post
            //xhr.setRequestHeader("Content-Type", "multipart/form-data");
            xhr.send(formData);

            xhr.onreadystatechange = function (e) {
                if (xhr.readyState == 4) {
                    console.log(['xhr upload complete', e]);

                }
            }
            //console.log(formData); 
        }
    }

})(jQuery);

$(document).ready(function () {
        $('body').dragme({

        });
    }); 
```

简单的html代码：

```
<body>
    <div id="list">
        <ul id="container"></ul>
    </div>
</body> 
```

任何建议，将不胜感激。谢谢！

**更新，** 视频中的错误：[http ://www.youtube.com/watch?v=5B8P4kNFp_g](http://www.youtube.com/watch?v=5B8P4kNFp_g)

# c# - c# 在属性中使用 ArrayLists

> ID：15754589
> 
> 赞同：-3
> 
> 时间：2013-04-02T01:20:46.797
> 
> 标签：c#, class, properties

我希望能够有一个名为 Musician 的类，它有一个名为 Hits( 的规则/属性是一个数组列表，有两个名为 ListHits() 和 AddHits(string) 的方法

ListHits 返回一个字符串，其中包含用逗号分隔的所有匹配项

AddHit – 向 Hits arrayList 添加命中。每个命中都是一个长度在 1 到 50 个字符之间的字符串，没有前导或尾随空格。

我不知道该怎么做我熟悉集合并向列表添加值，我知道如何设置基本属性

- 我已经尝试了几个小时，请帮助！

```
public class Musician : Celebrity
{

    private string _hits;

    public string Hits
    {
        get { return _hits; }
        set
        {

            if (value.Length < 1)
            {
                throw new Exception("need more then 2 characters");
            }
            if (value.Length > 50)
            {
                throw new Exception("needs to be less then 50 characters");
            }

            else
            {

                _hits = value.Trim();

            }

        }
    }

    public Musician()
    {
        //
        // TODO: Add constructor logic here
        //
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T01:32:21.453

首先，您应该尝试使用 a`List<string>`而不是`ArrayList`. `ArrayList`是您在 C#在 2.0 版中添加[泛型之前使用的。](http://msdn.microsoft.com/en-us/library/512aeb7t%28v=vs.80%29.aspx)`List<T>`允许您保留有关列表中项目的键入信息，从而使您能够更轻松地编写正确的代码。

您发布的代码似乎与您要求的详细信息并不真正匹配，但这样的事情应该符合您的指定：

```
public class Musician
{
    private List<string> _hits;

    public string ListHits()
    {
        return string.Join(", ", _hits);
    }

    public void AddHit(string hit)
    {
        /*
         *  validate the hit
         */
        _hits.Add(hit);
    }
} 
```

密钥`string.Join`用于将`_hits`列表转换为逗号分隔的字符串。从那里开始，剩下的只是基本的 C# 概念。

# c++ - c++中的表达式可以更改变量值吗

> ID：15754594
> 
> 赞同：1
> 
> 时间：2013-04-02T01:21:15.217
> 
> 标签：c++

我有这行代码

```
next_step_camera_x_rotation=step_camera_x_rotation+delta_x; 
```

我想知道 or 的值是否`step_camera_x_rotation`被`delta_x`改变了

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T01:23:25.797

一般来说，它*不应该*，但这并不意味着它不会。这实际上取决于对象的类型以及实现方式`operator+`和`operator=`实现方式。如果它是一个健全的实现，它不应该修改任何一个参数，但是语言中没有规则可以保证这一点。

如果类型是*基本*类型，那么答案是添加不会改变参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T01:24:40.637

如果它们是变量，则`step_camera_x_rotation`和的值可以在内部更改它们的值。`delta_x``volatile`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T01:24:43.140

表达式可以改变变量的值：

```
v = (a=3) + 3; 
```

但是您在问题中拥有的那个不会改变右侧参数的值

```
v = a + b; 
```

这个表达式既`a`不会也`b`不会改变。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T03:05:18.280

由于我们在这里处理的是病理情况，因此如果一侧的值是对另一侧的值的引用，则等式右侧的值可能会发生变化。

例如，如果您已声明：

```
int step_camera_x_rotation = 1;
int delta_x = 2;
int &next_step_camera_x_rotation = delta_x;  // you'd be crazy to do this
next_step_camera_x_rotation=step_camera_x_rotation+delta_x; // delta_x just changed 
```

您可以使用预处理器实现类似的效果。

# mysql - Spring中如何同步数据库访问

> ID：15754600
> 
> 赞同：3
> 
> 时间：2013-04-02T01:21:30.130
> 
> 标签：mysql, database, spring, servlets, jdbc

在Spring框架的mySQL上访问和更新数据时遇到一个问题，想请教大家最有效的加锁TABLE行的方法。

假设我有两张表：一张记录所有圆圈及其 id 和位置，另一张记录所有具有相同列的正方形。每个圆圈的位置都可以独立修改，正方形也是如此。但是方块的位置也可以通过移动圆圈的位置来调整。伪代码如下：

```
Public ShapeMovingService{

   @Transaction (isolation=required) 
   public moveCirclePosition(int id, int newPosition){
       //move circle=id to a new position
       //also move the square which relates to this circle accordingly
    }
   @Transaction (isolation=required) 
   public moveSquarePosition(int id, int newPosition){
       //move square=id to a new position
    }   
}

public CircleDao extends JdbcTemplateSupport{
    public updatePosition(int id, int position){
       //query a circle from circle TABLE with id
       //update the position of the circle
       //ALSO: modify the position of the square which relates to this circle
    }

} 

public SquareDao extends JdbcTemplateSupport{
        public updatePosition(int id, int position){
           //query a square from squareTABLE with id
           //update the position of the square               
        }
} 
```

我做了几个线程来完成以下任务：

*   两个线程不断更新圈子id=1的位置
*   一个线程不断更新圈子id=2的位置
*   一个线程不断更新方块id=1的位置
*   一个线程不断更新方块id=2的位置

移动 id=2 的圆的位置会影响 id=1 的位置；circle id=1 与其他方格没有关系，方格 id=2 也没有。

我的问题是，我应该在什么时候通过事务注释或同步关键字锁定数据库操作，这样就不会发生数据损坏？然而，不同的圈子仍然可以同时更新。现在我锁定了 updatePosition 函数，但这意味着一次只能更新一个圆形/正方形。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T04:13:38.160

您可以探索一下hibernate version-type field，它可以解决目的，如果您没有使用hibernate，那么可以考虑实现与您的base dao相同的一部分。

如果您需要详细信息，请告知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T03:10:27.643

您需要进行悲观和乐观锁定。Spring 支持锁定。请参阅 [如何通过 iBatis 防止 UPDATE 中的并发问题](https://stackoverflow.com/questions/12613621/how-to-prevent-concurrency-issue-in-update-via-ibatis/14934598#14934598)。

# sql - 为 HSQLDB 中的列指定默认空字符串的正确方法？

> ID：15754601
> 
> 赞同：2
> 
> 时间：2013-04-02T01:21:45.003
> 
> 标签：sql, constraints, hsqldb, ddl

可以使用默认空字符串指定表列的能力和方式似乎取决于 RDBMS 实现。

此答案（[默认为空字符串的列](https://stackoverflow.com/questions/3357953/default-a-column-with-empty-string)）和此答案（[使用 DEFAULT 空字符串避免 NULL 列](https://stackoverflow.com/questions/3421659/avoid-null-columns-using-default-empty-string)）表明可以使用 CREATE TABLE 列规则设置默认空字符串，该规则使用带有 DEFAULT 约束的空单引号文字。

这是我在 HSQLDB 2.2.9 中使用的 DDL 摘录。我正在使用 SQuirreL 3.4.0 对数据库执行 SQL：

```
CREATE CACHED TABLE Clients ( 
    cli_id       INTEGER       GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    mRN          VARCHAR(24)   NOT NULL UNIQUE,
    lastName     VARCHAR(48)   NOT NULL,
    midName      VARCHAR(24),
    firstName    VARCHAR(24)   DEFAULT '' NOT NULL,
); 
```

lastName 不能为 NULL

midName 没有列规则

firstName 不可为空，并尝试通过指定前面答案所建议的空字符串文字将其默认为空字符串。

当我使用 SQuirreL 使该表可编辑，然后在表中插入一行时，列中出现以下值：

```
lastName:    (empty)
midName:     <null>
firstName:   '' 
```

似乎 HSQLDB 中的语义 DEFAULT '' NOT NULL 导致该列默认为两个单引号而不是空字符串。当列规则 NOT NULL 在没有 DEFAULT 规则的情况下单独使用时，看起来好像在插入新行时 SQuirreL 报告了一个空字符串。

有人可以确认在 HSQLDB 中将 VARCHAR 列默认为非空、空、零长度字符串的正确方法是使用这些语义：

```
CREATE CACHED TABLE Clients ( 
    cli_id       INTEGER       GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    mRN          VARCHAR(24)   NOT NULL UNIQUE,
    lastName     VARCHAR(48)   NOT NULL,
    midName      VARCHAR(24)   NOT NULL,
    firstName    VARCHAR(24)   NOT NULL,
); 
```

谢谢 ：-）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T06:10:42.673

正确的方法其实是你原来的 CREATE TABLE。如果列没有 DEFAULT 子句但有 NOT NULL 约束，则它没有默认值，并且在插入表时必须包含该列的值。

可能是 SQuirreL 客户端使用它自己的约定来显示或插入 firstName 列。

您可以使用 HSQLDB DatabaseManager 使用 SQL 语句插入不完整的行：

```
INSERT INTO clients(mrn, lastname) VALUES 'mrn00', 'Aname' 
```

并使用 SELECT 检查结果：

```
SELECT * FROM clients 
```

当您切换到 View->Results in Text 时会显示这一点

```
CLI_ID MRN   LASTNAME MIDNAME FIRSTNAME 
------ ----- -------- ------- --------- 
0      mrn00 Aname    (null) 
```

# php - Zend_Search_Lucene 中如何控制评分和排序，所以一个字段比另一个字段更重要？

> ID：15754602
> 
> 赞同：1
> 
> 时间：2013-04-02T01:21:53.153
> 
> 标签：php, zend-framework, zend-search-lucene

据我了解，在阅读[文档](http://framework.zend.com/manual/1.12/en/zend.search.lucene.html)（尤其是[评分](http://framework.zend.com/manual/1.12/en/zend.search.lucene.searching.html#zend.search.lucene.searching.sorting)部分）后，我添加的每个字段在对搜索结果进行评分时都具有相同的重要性。我有以下代码：

```
protected static $_indexPath = 'tmp/search/indexes/projects';

public static function createSearchIndex()
{
    $_index = new Zend_Search_Lucene(APPLICATION_PATH . self::$_indexPath, true);

    $_projects_stmt = self::getProjectsStatement();
    $_count = 0;

    while ($row = $_projects_stmt->fetch()) {

        $doc = new Zend_Search_Lucene_Document();

        $doc->addField(Zend_Search_Lucene_Field::text('name', $row['name']));
        $doc->addField(Zend_Search_Lucene_Field::text('description', $row['description']));
        $doc->addField(Zend_Search_Lucene_Field::unIndexed('projectId', $row['id']));

        $_index->addDocument($doc);
    }

    $_index->optimize();
    $_index->commit();
} 
```

代码很简单 - 我正在生成索引，基于从 db 获取的数据，并将其保存在指定的位置。

我在很多地方寻找，因为我想要的行为是该`name`字段比`description`（比如说 75% 和 25%）更重要。因此，当我搜索某个短语时，它会在第一个文档的描述和第二个文档的名称中找到，那么第二个文档的分数实际上会高 3 倍，并且会在我的列表中显示得更高。

有没有办法以这种方式控制评分/排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T03:34:55.380

我是根据这个文档页面找到的。您需要创建新的`Similarity`算法类，并覆盖`lengthNorm`方法。`Default`我从类中复制了这个方法，添加了`$multiplier`变量，并在需要时设置它的值（对于我想要的列）：

```
class Zend_Search_Lucene_Search_Similarity_Projects extends Zend_Search_Lucene_Search_Similarity_Default
{
    /**
     * @param string $fieldName
     * @param integer $numTerms
     * @return float
     */
    public function lengthNorm($fieldName, $numTerms)
    {
        if ($numTerms == 0) {
            return 1E10;
        }

        $multiplier = 1;

        if($fieldName == 'name') {
            $multiplier = 3;
        }

        return 1.0/sqrt($numTerms / $multiplier);
    }
} 
```

然后，您唯一需要做的事情（从问题中编辑代码）就是`Similarity`在索引之前将您的新算法类设置为默认方法：

```
protected static $_indexPath = 'tmp/search/indexes/projects';

public static function createSearchIndex()
{
    Zend_Search_Lucene_Search_Similarity::setDefault(new Zend_Search_Lucene_Search_Similarity_Projects());

    $_index = new Zend_Search_Lucene(APPLICATION_PATH . self::$_indexPath, true);

    $_projects_stmt = self::getProjectsStatement();
    $_count = 0;

    while ($row = $_projects_stmt->fetch()) {

        $doc = new Zend_Search_Lucene_Document();

        $doc->addField(Zend_Search_Lucene_Field::text('name', $row['name']));
        $doc->addField(Zend_Search_Lucene_Field::text('description', $row['description']));
        $doc->addField(Zend_Search_Lucene_Field::unIndexed('projectId', $row['id']));

        $_index->addDocument($doc);
    }

    $_index->optimize();
    $_index->commit();
} 
```

我想额外提升`name`领域，但你可以和任何人一起做。

# javascript - 使用主干模板创建独特的 div

> ID：15754608
> 
> 赞同：1
> 
> 时间：2013-04-02T01:22:11.880
> 
> 标签：javascript, jquery, backbone.js, underscore.js

我不确定这是否可能，因为我对网络非常陌生。所以基本上我想要做的是，遍历一个数组，并为数组中的每个元素，用适当的信息填充主干视图。我认为我可以做的是在我的 .cshtml 中声明这个模板：

```
<div id="template-sample-validation-error">
    <form id="sample-validation-form" class="form">
                <div id="sampleName" class="control-label">Sample Name:</div>
        </form>
</div> 
```

（实际模板中实际上还有更多字段，但我没有将它们全部包含在内）。

因此，使用该模板，我认为我可以将视图绑定到该模板并为集合中的每个项目附加一个新模板。问题是，由于 id 不是唯一的，在我的主干视图的初始化方法中，我无法获取唯一项：

```
// some of the backbone view
SampleValidationView = (function() {
    return Backbone.View.extend({
        initialize: function (sample) {
            var sampleMessage = sample.get('sampleName');

// iterating and creating a SampleValidationView to render
_.each(samples, function (aView) {                
            var errorView = new SampleValidationView(aView);
            this.$('#template-sample-validation-error').append(errorView.render().$el);
        }); 
```

然后我找到了这个帖子，基本上就是给div加了一个数字，让div唯一。
[创建具有唯一 ID 的动态 div - jQuery](https://stackoverflow.com/questions/3416227/create-dynamic-div-with-unique-ids-jquery)

我不确定如何用我创建的模板做这样的事情。我想另一种选择是做一些与帖子中所做的类似的事情，但我认为为每个视图都有一个模板，并且让每个视图根据数组中的项目数量相互附加会更干净。但我被困住了。任何想法将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T03:58:02.543

如果您在模板中使用下划线，则可以在 id 末尾添加 <%= %> 以附加模型的 id 或传入的对象。例如：

```
<div id-"unique-id-<%= id %>">
    ...content
</div> 
```

当您调用 _.template({id : 1}) 时，它只会将模型的 id 或传递给模板的对象放入模板中。这会给：

```
<div id-"unique-id-1">
    ...content
</div> 
```

您应该做什么而不是使用 jquery 显式查找#template-sample-validation-error，您应该声明视图的 el var。这使您可以简单地调用 this.$el。所以也许是这样的：

```
// some of the backbone view
SampleValidationView = (function() {
    return Backbone.View.extend({

        el : '#template-sample-validation-error',
        template : _.template($('#template-sample-validation-error').html()),

        initialize: function (sample) {
            var sampleMessage = sample.get('sampleName');
        },

        render : function(){
            this.$el.html(this.template({id : 1})); // Some unique id

            // iterating and creating a SampleValidationView to render
            _.each(samples, function (aView) {                
                var errorView = new SampleValidationView(aView);
                this.$el.append(errorView.render().$el);
        }
    }); 
```

# python - 如何在使用 boto 上传到 s3 时进行 gzip

> ID：15754610
> 
> 赞同：16
> 
> 时间：2013-04-02T01:22:48.833
> 
> 标签：python, amazon-s3, gzip, boto

我有一个很大的本地文件。我想使用该`boto`库将该文件的压缩版本上传到 S3。该文件太大，无法在上传之前在磁盘上有效地对其进行 gzip，因此应在上传期间以流式方式对其进行 gzip。

该`boto`库知道一个函数，该函数`set_contents_from_file()`需要一个类似文件的对象，它将从中读取。

库`gzip`知道`GzipFile`可以通过名为的参数获取对象的类`fileobj`；压缩时它将写入此对象。

我想把这两个功能结合起来，但是一个API想自己读，另一个API想自己写；都不知道被动操作（比如被写入或被读取）。

有人知道如何以工作方式将这些结合起来吗？

编辑：我接受了一个答案（见下文），因为它提示我去哪里，但如果你有同样的问题，你可能会发现我自己的答案（也在下文）更有帮助，因为我在其中使用分段上传实现了一个解决方案.

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-03T23:17:06.487

我实施了 garnaat 接受的答案的评论中暗示的解决方案：

```
import cStringIO
import gzip

def sendFileGz(bucket, key, fileName, suffix='.gz'):
    key += suffix
    mpu = bucket.initiate_multipart_upload(key)
    stream = cStringIO.StringIO()
    compressor = gzip.GzipFile(fileobj=stream, mode='w')

    def uploadPart(partCount=[0]):
        partCount[0] += 1
        stream.seek(0)
        mpu.upload_part_from_file(stream, partCount[0])
        stream.seek(0)
        stream.truncate()

    with file(fileName) as inputFile:
        while True:  # until EOF
            chunk = inputFile.read(8192)
            if not chunk:  # EOF?
                compressor.close()
                uploadPart()
                mpu.complete_upload()
                break
            compressor.write(chunk)
            if stream.tell() > 10<<20:  # min size for multipart upload is 5242880
                uploadPart() 
```

它似乎没有问题。毕竟，流媒体在大多数情况下只是数据的分块。在这种情况下，块大约有 10MB 大，但谁在乎呢？只要我们不是在谈论几个 GB 块，我就可以了。

* * *

Python 3 的更新：

```
from io import BytesIO
import gzip

def sendFileGz(bucket, key, fileName, suffix='.gz'):
    key += suffix
    mpu = bucket.initiate_multipart_upload(key)
    stream = BytesIO()
    compressor = gzip.GzipFile(fileobj=stream, mode='w')

    def uploadPart(partCount=[0]):
        partCount[0] += 1
        stream.seek(0)
        mpu.upload_part_from_file(stream, partCount[0])
        stream.seek(0)
        stream.truncate()

    with open(fileName, "rb") as inputFile:
        while True:  # until EOF
            chunk = inputFile.read(8192)
            if not chunk:  # EOF?
                compressor.close()
                uploadPart()
                mpu.complete_upload()
                break
            compressor.write(chunk)
            if stream.tell() > 10<<20:  # min size for multipart upload is 5242880
                uploadPart() 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-09-04T08:22:58.960

您还可以使用 gzip 轻松压缩 Bytes 并轻松上传如下：

```
import gzip
import boto3

cred = boto3.Session().get_credentials()

s3client = boto3.client('s3',
                            aws_access_key_id=cred.access_key,
                            aws_secret_access_key=cred.secret_key,
                            aws_session_token=cred.token
                            )

bucketname = 'my-bucket-name'      
key = 'filename.gz'  

s_in = b"Lots of content here"
gzip_object = gzip.compress(s_in)

s3client.put_object(Bucket=bucket, Body=gzip_object, Key=key) 
```

可以`s_in`用任何字节、io.BytesIO、pickle 转储、文件等替换。

如果你想上传压缩的 Json，那么这里是一个很好的例子：[Uploadcompressed Json to S3](https://gist.github.com/a-hisame/be1c1746520b2b5589901a1045bb2174)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-02T12:14:24.477

确实没有办法做到这一点，因为 S3 不支持真正的流输入（即分块传输编码）。您必须在上传之前知道 Content-Length，唯一知道的方法是先执行 gzip 操作。

# php - 1美元和2美元是什么意思？

> ID：15754611
> 
> 赞同：3
> 
> 时间：2013-04-02T01:22:59.623
> 
> 标签：php, sql

这行代码中的 $1 和 $2 是什么意思？它们是变量吗？但是如何在字符串中使用它们呢？

```
$query = "select * from php_project.student where student_num=$1 and student_pass=$2"; 
```

编辑：这是接下来的几行：

```
 $stmt = pg_prepare($dbconn,"ps",$query);
        $result = pg_execute($dbconn,"ps",array($studentnum,$password));
        if (!$result){
            die("error in SQL query:".pg_last_error());
        } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T01:34:47.123

$1 和 $2 不是变量。它们被用作字符串中的占位符。

在 PHP 中 $(number first) 不是变量。自己试试：

```
$1 = "bob";
>> Parse error: syntax error, unexpected T_LNUMBER, expecting T_VARIABLE or '$' in php shell code on line 1 
```

所以“$1”实际上是一个表示“$1”的字符串。

你可以使用 str_replace，得到这个：

```
php > echo str_replace("$1", "'Bob'", $query);
>> select * from php_project.student where student_num='Bob' and student_pass=$2 
```

**更新**

根据您的更新， pg_prepare 实际上是这样说的：

> 如果使用了任何参数，它们在查询中被称为 $1、$2 等。

因此，在您的情况下，`array($studentnum,$password)`在您的查询中，基本上将 $1 替换为 '$studentnum' 和 $2 替换为 '$password'，但也会正确转义值以防止 SQL 注入攻击。

[http://php.net/manual/en/function.pg-prepare.php](http://php.net/manual/en/function.pg-prepare.php)

# jquery - 使用 jquery 调用 post web api 方法

> ID：15754613
> 
> 赞同：1
> 
> 时间：2013-04-02T01:23:01.180
> 
> 标签：jquery, asp.net, json, web-services, asp.net-web-api

我有一个如下的网络方法

```
 public HttpResponseMessage PostDeviceControl(DeviceAccessRequest deviceAccessRequest)
    {

        var deviceAccessResponse = new DeviceAccessResponse(deviceAccessRequest.RequestId)
            {
                Status = "OK"
            };
        var response = Request.CreateResponse<DeviceAccessResponse>(HttpStatusCode.OK, deviceAccessResponse);
        return response;
    } 
```

这就是我从 C# 应用程序中使用它的方式，而且效果很好

```
 using (var client = new HttpClient())
        {
            client.BaseAddress = new Uri("http://localhost:55208/");

            var request = new DeviceAccessRequest
            {
                RequestId = Guid.NewGuid().ToString(),
                DeviceId = "ACU/B2/01/R1",
                AccessType ="Unlock",
                LoginId = "tester",
                Password = "tester" ,                    
            };
            var response = client.PostAsJsonAsync("api/accesspanel", request).Result;
            if (response.IsSuccessStatusCode)
            {
                var deviceAccessResponse = response.Content.ReadAsAsync<DeviceAccessResponse>().Result;

            }
        } 
```

这是我的jQuery片段

```
var request = {
    RequestId: "123",
    DeviceId: "ACU/B2/01/R1",
    AccessType: "Unlock",
    LoginId: "tester",
    Password: "tester"
};
alert(JSON.stringify(request));
$.ajax({
    url: 'http://localhost:55208/api/accesspanel',
    type: 'POST',
    data: JSON.stringify(request),
    contentType: "application/json;charset=utf-8",
    success: function (data) {
        alert(JSON.stringify(data));
    },
    error: function (x, y, z) {
        alert(x + '\n' + y + '\n' + z);
    }
}); 
```

我在我的 web api 方法中设置了一个断点，但它没有中断。并且我的 ajax() 的错误部分被调用。

我究竟做错了什么？

# .htaccess - 如何将 [NE] 与 mod_rewrite 一起使用

> ID：15754615
> 
> 赞同：0
> 
> 时间：2013-04-02T01:23:19.147
> 
> 标签：.htaccess, mod-rewrite

我的文件系统中有以下文件

```
/http/domain/www.punchedin.com/hello%20world.txt 
```

请注意 %20 是文字，不应转换为空格。

可以使用以下 URL 访问该文件

```
http://www.punchedin.com/domain/www.punchedin.com/hello%2520world.txt 
```

我有以下 .htaccess 规则

```
RewriteRule ^home/(.*)$ /domain/%{HTTP_HOST}/$1 [NE,L] 
```

我希望能够使用以下 URL 访问该文件

```
http://www.punchedin.com/home/hello%2520world.txt 
```

但它总是返回 404 错误。

我对我的问题有部分答案，要让它返回文件，我必须像这样对 URL 进行双重编码......

```
http://www.punchedin.com/home/hello%252520world.txt 
```

有什么想法可以避免对 URL 进行双重编码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T02:43:33.997

# 解决了

为了解决这个问题，我需要避免对 URL 进行双重解码。为了实现这一点，我将原始 /home 重定向替换为使用 THE_REQUEST 的修改后的重定向..

我换了这条线...

```
RewriteRule ^home/(.*)$ /domain/%{HTTP_HOST}/$1 [NE,L] 
```

用这些...

```
RewriteCond %{THE_REQUEST} ^(\S*)\s/home/(\S*) [NC]
RewriteRule ^home/(.*)$ /domain/%{HTTP_HOST}/%2 [L] 
```

THE_REQUEST 是原始请求，因此尚未对其进行任何 URL 解码

# web-services - web服务的war文件

> ID：15754616
> 
> 赞同：0
> 
> 时间：2013-04-02T01:23:22.063
> 
> 标签：web-services, web, client, war

我正在使用 Exlipse (Java EE - JUNO-)、Tomcat 和 CXF 开发 Web 服务。

我有问题，因为我不确定如何导出战争文件；特别是已经创建了两个文件夹。一个用于服务，另一个用于客户端。

任何人都可以向我解释如何正确导出和部署war文件。

谢谢;

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T01:37:26.457

在项目资源管理器中，您可以右键单击项目名称 → 导出 → WAR 文件

WAR 文件用于 Web 应用程序。对于第二个项目（客户端），您应该导出为 JAR 文件。您可以选择“导出源文件”选项。

您可以在 Apache Tomcat 等 Web 应用程序服务器上部署 WAR 文件。我不知道具体如何，但它很简单，你可以搜索它。

# javascript - this.route() 和 this.resource() 有什么区别？

> ID：15754619
> 
> 赞同：6
> 
> 时间：2013-04-02T01:23:43.967
> 
> 标签：javascript, ember.js

我知道路由用于将 URL 映射到模板，但显然您可以使用 this.route 或 this.resource 定义路由

```
App.Router.map(function() {
  this.route("about", { path: "/about" });
  this.route("favorites", { path: "/favs" });
});

App.Router.map(function() {
  this.resource('posts', { path: '/posts' }, function() {
    this.route('new');
  });
}); 
```

如果您想定义路由的子路由，您是否只使用 this.resource 或者我没有得到其他理由？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T02:55:22.087

> 如果您想定义路由的子路由，您是否只使用 this.resource 或者我没有得到其他理由？

这是基本的想法。

*   资源 = 父母（通常是名词）
*   路线=孩子（通常是动词）

另请记住，路由器始终指向当前路由。它不能转换为资源。在幕后 ember 会在每个资源下自动生成一个“索引”路由，所以即使你定义了这样的东西：

```
App.Router.map(function() {
  this.resource("about", { path: "/about" });
}); 
```

你最终得到这个：

```
App.Router.map(function() {
  this.resource('about', { path: '/about' }, function() {
    this.route('index');
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-01T07:20:45.860

这是在 ember 3.x 中折旧的。没有了`this.resource()`

# asp.net-mvc-3 - ASP.NET MVC3 webdeploy：生产环境中的数据库部署

> ID：15754621
> 
> 赞同：1
> 
> 时间：2013-04-02T01:24:01.637
> 
> 标签：asp.net-mvc-3, webdeploy

我正在使用 webdeploy 将我的 Web 应用程序部署到 IIS。为此，我遵循了 Microsoft 的 12 部分教程。我成功地将它部署在我的本地 IIS 上。

我现在必须将其部署到生产环境中，并且我遵循相同的步骤。我通过 VP 连接到远程机器。表单 VS2010 发布配置文件连接到服务器成功。但是当我输入数据库连接字符串为“Data Source=xxxx\SQLExpress;Initial Catalog=SWSS;Integrated Security=True”并尝试预览数据库时，我收到以下错误：

```
Web deployment task failed. ((4/1/2013 9:18:42 PM) An error occurred when the request was processed on the remote computer.)
(4/1/2013 9:18:42 PM) An error occurred when the request was processed on the remote computer.
Exception has been thrown by the target of an invocation.
Member 'ClassName' was not found. 
```

远程计算机未启用 TCP/IP。1\. 在生产机器上启用此功能是否安全？2\. 如果没有，如何部署DB，利用dbdacfx？

更新1：

根据下面的评论，我将连接字符串更改如下：“Data Source=SWSS\SQLExpress;Initial Catalog=SWSS;User Id=xxxx;Password=xxxx;”

我在 SQL Server 中使用 SQL 身份验证而不是 Windows 身份验证创建了一个 sysadmin 用户。现在错误如下：

```
Web deployment task failed. (Could not generate deployment script.
Unable to connect to target server.
  Learn more at: http://go.microsoft.com/fwlink/?LinkId=221672#ERROR_EXECUTING_METHOD.) 
```

更新 2：

在 SQL Server 上使用混合模式身份验证解决了我的问题。

# sql - 搜索字符串通配符并显示到文本框和组合框数据

> ID：15754624
> 
> 赞同：0
> 
> 时间：2013-04-02T01:24:18.527
> 
> 标签：sql, vb.net, winforms, combobox, textbox

我在这里有一个用于搜索字符串的代码，并将数据显示到文本框和组合框，但是有一个小错误，任何人都可以帮助我修改代码

```
Dim sqlconn As New SqlClient.SqlConnection
    sqlconn.ConnectionString = "server = SKPI-APPS1;" & _
    "Database = EOEMS;integrated security=true"

    sqlconn.open()

    Dim dt As New DataTable
    Dim ds As New DataSet
    ds.Tables.Add(dt)
    Dim da As New OleDbDataAdapter

    da = New OleDbDataAdapter("Select * from tblOfficeEquipmentProfile where OE_ID like '%" & txtSearchOEID.Text & "%'", sqlconn)
    da.Fill(dt) 
```

此行带有蓝色下划线并显示错误“OVERLOAD RESOLUTION”

```
New OleDbDataAdapter("Select * from tblOfficeEquipmentProfile where OE_ID like '%" & txtSearchOEID.Text & "%'", sqlconn) 
```

正如我所关心的，这是在数据网格上显示数据..但这次我想在文本框和组合框上显示数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T01:34:45.517

您不能将 SqlConnection 用作创建 OldDbDataAdapter 的第二个参数。

```
Dim sqlconn As New SqlClient.SqlConnection
....
Dim da As New OleDbDataAdapter
....
da = New OleDbDataAdapter("Select .....%'", sqlconn) 
```

您不应该将 OleDb 与 SQL .Net 对象混合使用...要么将
**SqlDataAdapter**与**SqlConnection**一起使用，要么将
**OleDbDataAdapter**与**OleDbConnection**一起使用。

# .htaccess - 重写与重定向与 mod_rewrite 漂亮的 URL

> ID：15754625
> 
> 赞同：0
> 
> 时间：2013-04-02T01:24:29.530
> 
> 标签：.htaccess, mod-rewrite, redirect, friendly-url

我正在使用标准片段将“myfile”的请求路由到“myfile.php”，使用 Apache：

```
# Add .php-extension to base URLS using rewrite (so links can omit it)
<IfModule mod_rewrite.c>
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_FILENAME}\.php -f
  RewriteRule ^(.*)$ $1.php
</IfModule> 
```

它有效。当我在浏览器中键入“mydomain.com/myfile”时，我看到页面加载，URL 栏中没有“.php”。伟大的。

但现在也很清楚，我仍然可以继续在旧位置“mydomain.com/myfile.php”查看页面。并且有一些问题：

1) SEO：我正在稀释链接汁，将内容拆分为两个 URL，一个带有“.php”，一个没有。不重要，但是嘿...

2) 世界上任何现有的指向该站点的公共链接将继续看到未经美化的 URL。叶赫。

3) 最重要的是，我所有现有的内部导航链接将继续指向未经美化的 URL。*破坏者*。

我的头在这一点上开始旋转。我想我想要的是在服务器上将非“.PHP”版本重写为“.PHP”，但*还将*带有扩展名的旧链接重定向到无扩展名的内容。是否有解决这个难题的标准“最佳实践”方式？应该通过我的导航并从链接中删除所有“.php”文件扩展名以一劳永逸地摆脱扩展名吗？似乎是错误的路径，但它是有可能发生的 :) 更严重的是，在 LAMP 堆栈中保存没有扩展名的 PHP 文件是否安全？（我什至从未尝试过，因为太习惯于避免它）。如何完成向漂亮 URL 的过渡？

提前感谢您的任何指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T17:42:49.010

### 短期

对于您所有的非漂亮链接，都有一个 RewriteRule 以重定向到其相应的漂亮链接**status=301 (permanent redirect)**。这样，搜索引擎将开始缓存您的新漂亮链接，同时逐渐丢弃所有旧的非漂亮链接。这是该部分的 .htaccess 内容：

```
## hide .php extension
# To externally redirect /dir/foo.php to /dir/foo with 301
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s([^.]+)\.php [NC]
RewriteRule ^ %1 [R=301,L]

## To internally forward /dir/foo to /dir/foo.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{DOCUMENT_ROOT}/$1.php -f
RewriteRule ^(.*?)/?$ /$1.php [L] 
```

### 长期

考虑将您的内部非漂亮链接转换为漂亮链接（删除`\.php`）。

# ruby-on-rails - NameError: main:Object 的未定义局部变量或方法“app”

> ID：15754627
> 
> 赞同：2
> 
> 时间：2013-04-02T01:24:37.670
> 
> 标签：ruby-on-rails, pry

我想知道在使用[pry](https://github.com/pry/pry)时是否可以访问变量`app`？

例如，当我尝试访问时，`root_path`我收到以下错误：

```
[14] pry(main)> app.root_path
NameError: undefined local variable or method `app' for main:Object 
```

[有人](https://stackoverflow.com/questions/1397644/testing-routes-in-the-console#comment19535097_1397660)说“它现在可以与 pry 和 3.2.9 一起使用”。我正在使用 rails 3.2.12，但它似乎不起作用。

我`gem 'pry'`在我的 GemFile 组开发中和`config/environments/development.rb`以下

```
 # Use Pry instead of IRB
  silence_warnings do
    begin
      require 'pry'
      IRB = Pry
    rescue LoadError
    end
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T01:37:45.777

是的，它有效

```
➜  MyApp git:(master) rc
Loading development environment (Rails 3.2.13)
[1] pry(main)> app.root_path
=> "/" 
```

我使用支持您在初始化程序`pry-rails`中的覆盖。`IRB`

```
group :development do
  gem 'pry-rails'
end 
```

[https://github.com/rweng/pry-rails](https://github.com/rweng/pry-rails)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T03:20:12.397

虽然这已经解决了，但如果您出于某种原因不想或不能使用“pry-rails”gem，您还可以将以下内容添加到您的 .pryrc 文件中：

```
if defined?(Rails) && Rails.env
  extend Rails::ConsoleMethods
end 
```

您可以在[pry wiki中阅读更多内容](https://github.com/pry/pry/wiki/Setting-up-Rails-or-Heroku-to-use-Pry#wiki-with_gemfile)

# java - Android HttpURLConnection：处理 HTTP 重定向

> ID：15754633
> 
> 赞同：10
> 
> 时间：2013-04-02T01:25:09.837
> 
> 标签：java, android, http, redirect, httpurlconnection

我正在使用`HttpURLConnection`这样的方式检索 URL：

```
URL url = new URL(address);
HttpURLConnection connection = (HttpURLConnection) url.openConnection();
connection.setInstanceFollowRedirects(true);
// ... 
```

我现在想知道是否有重定向以及它是永久（301）还是临时（302），以便在第一种情况下更新数据库中的 URL，但在第二种情况下不更新。

这是否可能同时仍然使用重定向处理，`HttpURLConnection`如果，如何？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-02T01:53:10.770

`getUrl()`调用后只需调用`URLConnection`实例`getInputStream()`：

```
URLConnection con = new URL(url).openConnection();
System.out.println("Orignal URL: " + con.getURL());
con.connect();
System.out.println("Connected URL: " + con.getURL());
InputStream is = con.getInputStream();
System.out.println("Redirected URL: " + con.getURL());
is.close(); 
```

如果您需要在实际获取其内容之前知道重定向是否发生，这里是示例代码：

```
HttpURLConnection con = (HttpURLConnection) (new URL(url).openConnection());
con.setInstanceFollowRedirects(false);
con.connect();
int responseCode = con.getResponseCode();
System.out.println(responseCode);
String location = con.getHeaderField("Location");
System.out.println(location); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-07-22T10:36:01.723

```
private HttpURLConnection openConnection(String url) throws IOException {
    HttpURLConnection connection;
    boolean redirected;
    do {
        connection = (HttpURLConnection) new URL(url).openConnection();
        int code = connection.getResponseCode();
        redirected = code == HTTP_MOVED_PERM || code == HTTP_MOVED_TEMP || code == HTTP_SEE_OTHER;
        if (redirected) {
            url = connection.getHeaderField("Location");
            connection.disconnect();
        }
    } while (redirected);
    return connection;
} 
```

# algorithm - 找到一条路径，其中最小边成本和最大边成本之间的差异在所有路径中都是最小的

> ID：15754634
> 
> 赞同：0
> 
> 时间：2013-04-02T01:25:11.400
> 
> 标签：algorithm, graph

我们必须在图中找到从源到汇的路线，其中最大成本边和最小成本边之间的差异最小。

我尝试使用递归解决方案，但它会在循环条件下失败，并且修改后的 dijkstra 也失败了。

有没有一种算法我不必找到所有路线然后找到最小值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-08-08T03:25:40.797

按权重对边进行排序（按非递减顺序），然​​后为每个边执行下一个：添加下一条边（按非递减顺序权重更大或相等的边），直到源和接收器连接，然后更新您的回答最后一个边缘之间的差异，如下所示：

```
 ans = INFINITE
    for each Edge e1 in E (sorted by weight in non-decreasing order)
        clear the temporal graph
        for each Edge e2 in E
            if e2.weight >= e1.weight  
                add e2 to the temporal graph
                if sink and source are connected in the temporal graph
                    ans = min(ans, e2.weight - e1.weight)
                    break
    print ans 
```

如果您使用 UNION-FIND 结构添加边并检查源和接收器之间的连通性，您应该得到 O(edges^2) 的总时间

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-02T04:38:32.087

好的，所以您有一个图，并且您需要找到从一个节点（源）到另一个节点（接收器）的路径，以使路径上的最大边权重减去路径上的最小边权重最小化。你没有说你的图是有向的，可以有负边权重，还是有循环，所以让我们假设所有这些问题的答案都是“是”。

在计算您的路径“分数”（边缘权重之间的最大差异）时，我们观察到这些类似于路径距离：您可能有一条从 A 到 B 的路径得分更高（不受欢迎）或更低（合意）。如果我们将路径分数视为路径权重，我们观察到，当我们通过添加新边来构建路径时，路径分数（=权重）只会增加：给定路径 A->B->C，其中权重（A->B） =1且权重（B->C）=5，路径得分为4，如果我将边C->D添加到路径A->B->C，路径得分只能增加或保持不变：最小边重和最大边重之差不小于4。

所有这一切的结论是，我们可以探索图寻找最佳路径，就好像我们正在寻找没有负边的图中的最佳路径一样。但是，可能存在（并且可能存在，鉴于所描述的连接性）循环。这意味着[Dijkstra 的算法](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)，如果正确实现，将具有相对于我们今天所知道的该图的拓扑结构的最佳性能。

### 没有全图探索就没有解决方案

人们可能会误以为我们可以在不探索整个图的情况下就哪条边应该属于最佳路径做出局部良好的决策。下面的子图说明了这个问题：

![在此处输入图像描述](https://i.stack.imgur.com/fPlaR.png)

假设您需要一条从 A 到 F 的路径，并且您位于节点 B。鉴于您所知道的一切，您会选择一条到 C 的路径，因为它可以最小化路径分数。你（还）不知道的是，该路径中的下一条边将导致该路径的分数大幅增加。如果您知道您会选择边 B->D 作为最佳路径中的下一个元素。

# numpy - iPython中指定域上的最大函数

> ID：15754637
> 
> 赞同：1
> 
> 时间：2013-04-02T01:25:40.160
> 
> 标签：numpy, scipy, ipython, max

我正在尝试为 1 < R < 20 找到以下函数的最大值。如何将其实现到代码中？

解决方案应该是 R 约为 15.5 左右。

```
#!/usr/bin/env python
#  Plotting the energy for circular Hohmann transfer

import scipy
import matplotlib
import numpy as np
import pylab

def f(R):
    return 1 / np.sqrt(R) - (np.sqrt(2) * (1 - R)) / (np.sqrt(2) * (1 + R)) - 1

x = np.arange(1, 20)
pylab.plot(x, f(x), 'r')
pylab.show() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T01:50:41.317

您可以使用`scipy.optimizie.fmin`：

```
>>> scipy.optimize.fmin(lambda r: -f(r), 10)
Optimization terminated successfully.
         Current function value: -0.134884
         Iterations: 16
         Function evaluations: 32
array([ 11.44451904]) 
```

这实际上是最大值：

```
>>> x = np.linspace(1, 20, 1000)
>>> plt.plot(x, f(x))
[<matplotlib.lines.Line2D object at 0x0000000007BAEF98>]
>>> plt.show() 
```

![在此处输入图像描述](https://i.stack.imgur.com/r6i2V.png)

# android - 通过意图 act ion_send 将文件发送到带有结果代码的另一台设备并使用它

> ID：15754642
> 
> 赞同：0
> 
> 时间：2013-04-02T01:26:33.613
> 
> 标签：android, android-intent, return-code

我正在使用此代码将文件发送到另一台设备：

```
 Intent i = new Intent(Intent.ACTION_SEND);
            i.setType("image/*");
            i.putExtra(Intent.EXTRA_STREAM, uri);
            startActivity(Intent.createChooser(i, "Send File")); 
```

这很好用，但如果在其他设备上收到文件，我需要获取结果代码。

我还想在另一台设备上的同一应用程序中使用接收到的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T01:45:02.560

您需要覆盖 Activity.onActivityResult() 然后检查它的参数：

**requestCode：**标识哪个应用程序返回了这些结果。您将在调用 startActivityForResult() 时定义它。

**resultCode：**通知您此应用程序是成功、失败还是其他情况。

**数据：**保存此应用返回的任何信息。这可能为空。

另请查看[本教程](http://www.mybringback.com/tutorial-series/12186/android-startactivityforresult-example/)以获取代码示例。

# java - Java矩阵运算，并行colt矩阵-矩阵乘法

> ID：15754643
> 
> 赞同：1
> 
> 时间：2013-04-02T01:26:35.100
> 
> 标签：java, multithreading, matrix-multiplication, colt

我在 java 中使用 Jama 进行矩阵运算，但由于它们没有稀疏矩阵，所以我开始使用[Parallel Cold Library (PColt)](https://sites.google.com/site/piotrwendykier/software/parallelcolt)。它是 Colt 的多线程版本。我试图将两个方阵相乘，AxB（它是矩阵矩阵乘法，不是元素（或标量）乘法），大小（NxN）。我在 PColt 中找不到提供的矩阵矩阵乘法方法（我没有t想要元素乘法），所以我将方法编码如下。当我将 N=1000 两个矩阵相乘时，需要将近 5 分钟才能完成。如果有人知道如何在 pcolt 中将两个矩阵相乘，那将非常感激。或者，如果您发现代码中有任何不必要的错误并导致复杂性很高，请通知我。我的方法如下：

```
 /**
 * Linear algebraic matrix-matrix multiplication; (new)A = A x B. A[i,j] =
 * Sum(A[i,k] * B[k,j]), k=0..n-1\. Matrix shapes: A(m x n), B(n x p), A(m x
 * p).
 * 
 * @param matrix1
 *            first matrix
 * @param matrix2
 *            second matrix
 * @return changes matrix1 with new values matrix-matrix multiplication
 */

public static FloatMatrix2D multiplyMatrix(FloatMatrix2D matrix1,
        FloatMatrix2D matrix2) {
    // create a matrix same size of input matrix
    FloatMatrix2D resultMatrix = matrix1.like();
    // matrix-matrix multiplication row of first matrix must be equal to
    // column of second matrix
    if (matrix1.rows() == matrix2.columns()) {
        for (int i = 0; i < matrix1.rows(); i++) {
            for (int j = 0; j < matrix2.columns(); j++) {
                FloatMatrix1D rowVec = getRow(matrix1, i).copy();
                FloatMatrix1D colVec = getCol(matrix2, j).copy();
                // first multiplies each row with each column and then sum
                // up the result and assign the result to value of matrix
                float multOfVects = rowVec.assign(colVec,
                        FloatFunctions.mult).aggregate(FloatFunctions.plus,
                        FloatFunctions.identity);
                // set sum of vectors to the new matrix
                resultMatrix.setQuick(i, j, multOfVects);

            }
            System.out.println(" i th row "+ i);
        }
    } else {
        System.err
                .println("Row size of first matrix must be equal to Column size of second matrix: "
                        + matrix1 + " != " + matrix2);
    }

    return resultMatrix;
} 
```

## 解决方案...

Okie Dokie，我得到了解决方案。其实忘了上面的代码。PColt 提供矩阵-矩阵乘法，但方法名称令人困惑。为了将两个矩阵相乘，请使用以下方法：

```
public DoubleMatrix2D zMult(DoubleMatrix2D B,
                            DoubleMatrix2D C) 
```

线性代数矩阵-矩阵乘法；C = A x B；

在这里，注意参数的顺序，因为结果保存到最后一个参数`C`。`C`也可以设置为 null，这会导致返回一个新的矩阵。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-22T10:46:18.937

矩阵乘法方法在`DoubleAlgebra`类中。

```
DenseDoubleAlgebra algebra = new DenseDoubleAlgebra();
DoubleMatrix2D productMatrix = algebra.mult(aMatrix, anotherMatrix); 
```

# javascript - Liquid Slider（在滚动结束时链接到另一个页面，而不是滚动回第一个选项卡？）jQuery

> ID：15754645
> 
> 赞同：0
> 
> 时间：2013-04-02T01:26:48.920
> 
> 标签：javascript, jquery, dynamic, slider

**jQuery / Javascript / PHP**

我在网站上使用**[Liquid Slider](http://liquidslider.kevinbatdorf.com/)**作为分页机制，我使用它的方式基本上是让它平滑地左右滚动页面，反之亦然。

我现在要完成的是：让动态箭头链接到滚动末尾的外部页面（一旦检测到它位于最后一页/选项卡），而不是让它滚动回它首先开始。

由于作者网站最初不支持这种选项种类，我想知道这里是否有人知道如何实现这一点？

我的动态箭头片段及其回调函数（不包括函数）：

```
 $('#slider-id').liquidSlider({
        continuous:false,
        dynamicArrows:true,
        dynamicTabs: false,
        callbackFunction: function(){ drawLines() }
    });

    $('.liquid-nav-right-arrow').click(function(){
        simRefresh(), simRefresh2();
    });

    $('.liquid-nav-left-arrow').click(function(){
        simRefresh(), simRefresh2();
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T06:10:25.690

You can set conditionals based on the current panel (tab).

```
callbackFunction: function () {

var sliderObject = $.data( $('#slider-id)[0], 'liquidSlider');

if ( (sliderObject).currentTab === 4 ) {
  //turn off click event
  //update link
} 
```

Then if you want to reset the events again, you can try `sliderObject.registerArrows()`, although I haven't tested this out.

# sterling-db - SterlingDB 2.0 测试版

> ID：15754646
> 
> 赞同：0
> 
> 时间：2013-04-02T01:26:51.617
> 
> 标签：sterling-db

我是一个完整的英镑新手，所以请原谅我的问题。我已前往新的 GitHub 存储库并下载了 SterlingDB 2.0 Beta 的最新源代码。我正在开发一个新项目，该项目将在 Windows 8 Store 应用程序、Windows 8 Phone 应用程序和 WPF 桌面应用程序中使用 Sterling，所有这些都基于 MVVM Light。因此，在源代码中使用您的测试项目，我了解商店和电话应用程序如何使用英镑，但 WPF 桌面如何使用英镑。或者更好的是需要在桌面应用程序中引用什么 dll。我使用 Wintellect.Sterling.Core 和 Wintellect.Sterling.Server 作为我的参考，但这只是因为我希望 WPF 应用程序使用应用程序文件夹。这对这个新版本是否正确？

顺便说一句，乔希，干得好...

奥格布拉特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:59:51.687

您应该能够使用[FileSystemDriver](https://github.com/petermorlion/SterlingDB/blob/master/Wintellect.Sterling.Server/FileSystem/FileSystemDriver.cs)（它确实在 Wintellect.Sterling.Server 程序集中）并指定您希望保存数据库的路径。

# c++ - 为什么编译会导致缺少模板参数错误？

> ID：15754649
> 
> 赞同：0
> 
> 时间：2013-04-02T01:27:17.347
> 
> 标签：c++, templates

我希望使用带有模板参数 V 的 Spring 类：

```
#include "Spring.hpp"
template <typename K, typename L>
    struct spring_value {
        K spring_constant;
        L spring_length;
};

typedef Spring<std::vector<spring_value<double, double>>> Spring;
typedef Spring::value value;   // why struct Force does not see this? 

struct Force {
    value v = {1.0, 2.0};   // error
    spring_value<double,double> v = {1.0, 2.0};   // ok, but ...
    double s = v.spring_value;   // also error

} 
```

春季班：

```
template <typename V>               
class Spring {

public:
 typedef V value;       

} 
```

但是，该程序会产生`missing template arguments before 'v'`错误。为什么没有`struct Force`看到`spring value`或`value`在 Spring 类中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T01:40:12.033

这甚至不应该编译：

```
typedef Spring<spring_value<double, double>> Spring; 
```

你不能有两个同名的类型！

将模板重命名为`Spring_`，或者给它一个默认的模板参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T03:00:43.450

我知道这个问题已经回答了，但是......

这不会为我编译（您的原始代码）：

```
struct Force {
  value v = {1.0, 2.0}; //error
} 
```

但这确实：

```
struct Force {
  value v = {{1.0, 2.0}};
} 
```

`v`是结构的向量。第二个版本`v`使用单个元素初始化向量，该元素本身使用 values 初始化`{1.0, 2.0}`。

# database - 无法连接到 EM，即使 Listern、dbconsole 和 DB 都在运行

> ID：15754657
> 
> 赞同：0
> 
> 时间：2013-04-02T01:28:57.373
> 
> 标签：database, oracle11g, oracle-enterprise-linux

我昨天在 OEL5 上安装了 Oracle 11g，并且能够通过 EM（[https://localhost.localdomain:1158/em](https://localhost.localdomain:1158/em)）访问它。但是，今天尝试连接时无法连接。

我可以连接到 db vis sqlplus 并验证 Listener 和 dbconsole 正在运行。我多次关闭并启动 DB、dbaconsole 和 Listerner，但仍然无法访问 EM ( [https://localhost.localdomain:1158/em](https://localhost.localdomain:1158/em) )。此外，在重新安装机器后完成此操作，但仍然是同样的问题。

我检查了以下具有警告和错误的日志文件：

***emdctl.trc***

```
2013-04-01 14:00:27,196 Thread-3348649696 WARN  http: nmehl_connect_internal: connect failed to (localhost.localdomain:1830)
: Connection refused (error = 111)
2013-04-01 14:00:27,196 Thread-3348649696 ERROR main: nmectla_agentctl: Error connecting to http://localhost.localdomain:183
0/emd/main. Returning status code 1
2013-04-01 15:52:32,626 Thread-3858654944 WARN  http: nmehl_connect_internal: connect failed to (localhost.localdomain:5500)
: Connection refused (error = 111)
2013-04-01 16:01:08,737 Thread-2888275680 WARN  http: nmehl_connect_internal: connect failed to (localhost.localdomain:5500)
: Connection refused (error = 111) 
```

***emagent.log***

```
2013-04-01 12:34:33,620 Thread-4251236064 Starting Agent 10.2.0.4.4 from /u01/app/oracle/product/11.2.0/dbhome_1 (00701)
2013-04-01 12:34:34,403 Thread-4251236064 Undefined column name __intervalONNECT_DATA in expression ((gc_cr_recv < _gc_cr_re
cv) ? 0 : (gc_cr_recv - _gc_cr_recv))/__intervalONNECT_DATA=(SID=%SID%)))
             (00104)
2013-04-01 12:34:34,403 Thread-4251236064 Undefined column name __intervalCT_DATA in expression ((gc_cur_recv < _gc_cur_recv
) ? 0 : (gc_cur_recv - _gc_cur_recv))/__intervalCT_DATA=(SID=%SID%)))
             (00104) 
```

***emagent.trc***

```
2013-04-02 00:18:35,273 Thread-1468947040 ERROR recvlets: Error setting threshold for metric file, target orcl.localdomain o
racle_database
2013-04-02 00:18:35,273 Thread-1468947040 ERROR recvlets: Tried to set threshold on metric file, target orcl.localdomain ora
cle_database,                   for uninitialized recvlet AQMetrics
2013-04-02 00:18:35,273 Thread-1468947040 ERROR recvlets: Error setting threshold for metric file, target orcl.localdomain o
racle_database
2013-04-02 00:18:35,273 Thread-1468947040 ERROR recvlets: Tried to set threshold on metric service, target orcl.localdomain
oracle_database,                   for uninitialized recvlet AQMetrics
2013-04-02 00:18:35,273 Thread-1468947040 ERROR recvlets: Error setting threshold for metric service, target orcl.localdomai
n oracle_database
2013-04-02 00:18:35,273 Thread-1468947040 ERROR recvlets: Tried to set threshold on metric service, target orcl.localdomain
oracle_database,                   for uninitialized recvlet AQMetrics
2013-04-02 00:18:35,273 Thread-1468947040 ERROR recvlets: Error setting threshold for metric service, target orcl.localdomai
n oracle_database
2013-04-02 00:18:35,273 Thread-1468947040 WARN  upload: Upload manager has no Failure script: disabled
2013-04-02 00:18:35,273 Thread-1468947040 WARN  upload: Amount of upload data will be recalculated due to reload.enabling co
llections and regenerating metadata.
2013-04-02 00:18:35,273 Thread-1468947040 WARN  TargetManager: Regenerating all Metadata
2013-04-02 00:18:35,286 Thread-1466931808 ERROR pingManager: nmepm_pingReposURL: Did not receive a response header from repo
sitory
2013-04-02 00:18:35,298 Thread-1466931808 ERROR pingManager: nmepm_pingReposURL: Did not receive a response header from repo
sitory
2013-04-02 00:18:35,332 Thread-1468947040 WARN  upload: Truncating value of "SHORT_NAME" from "Average Synchronous Single-Block Read Latency (ms)" to "Average Synchronous Single-Block Read La"
2013-04-02 00:18:35,332 Thread-1468947040 WARN  upload: Truncating value of "SHORT_NAME" from "Average Synchronous Single-Block Read Latency (ms)" to "Average Synchronous Single-Block Read La"
2013-04-02 00:18:35,414 Thread-1468947040 WARN  upload: Truncating value of "COLUMN_LABEL" from "Total messages processed per queue per subscriber per minute in the last interval" to "Total messages processed per queue per subscriber per minute in "
2013-04-02 00:18:35,414 Thread-1468947040 WARN  upload: Truncating value of "COLUMN_LABEL" from "Total messages received per queue per subscriber per minute in the last interval" to "Total messages received per queue per subscriber per minute in t"
2013-04-02 00:18:35,414 Thread-1468947040 WARN  upload: Truncating value of "COLUMN_LABEL" from "Messages processed per queue (%) per subscriber per minute in the last interval" to "Messages processed per queue (%) per subscriber per minute in th"
2013-04-02 00:18:35,414 Thread-1468947040 WARN  upload: Truncating value of "COLUMN_LABEL" from "Age of the first message in persistent queue per subscriber (seconds)" to "Age of the first message in persistent queue per subscriber (sec"
2013-04-02 00:18:35,415 Thread-1468947040 WARN  upload: Truncating value of "COLUMN_LABEL" from "Age of the first message in the buffered queue per queue (seconds)" to "Age of the first message in the buffered queue per queue (second"
2013-04-02 00:18:35,427 Thread-1468947040 WARN  collector: enable collector
2013-04-02 00:18:35,429 Thread-1468947040 WARN  collector: the column name first_message_age in this condition does not exist in metric aq_msgs_persistentq_per_subscriber
2013-04-02 00:18:35,432 Thread-1468947040 WARN  collector: the column name first_message_age in this condition does not exist in metric aq_msgs_persistentq_per_subscriber
2013-04-02 00:18:35,415 Thread-1468947040 WARN  upload: Truncating value of "COLUMN_LABEL" from "Age of the first message in
 the buffered queue per queue (seconds)" to "Age of the first message in the buffered queue per queue (second"
2013-04-02 00:18:35,427 Thread-1468947040 WARN  collector: enable collector
2013-04-02 00:18:35,429 Thread-1468947040 WARN  collector: the column name first_message_age in this condition does not exis
t in metric aq_msgs_persistentq_per_subscriber
2013-04-02 00:18:35,432 Thread-1468947040 WARN  collector: the column name first_message_age in this condition does not exis
t in metric aq_msgs_persistentq_per_subscriber
2013-04-02 00:18:35,435 Thread-1468947040 WARN  collector: Regenerating all DefaultColls
2013-04-02 00:18:36,505 Thread-1466931808 ERROR upload: Exceeded max. amount of upload data: 312 files, 45.885256 MB Data. 3
9.01% of disk used. Disabling collections.
2013-04-02 00:18:36,505 Thread-1466931808 WARN  collector: Disable collector
2013-04-02 00:19:05,550 Thread-1468947040 ERROR pingManager: nmepm_pingReposURL: Did not receive a response header from repo
sitory
2013-04-02 00:19:05,561 Thread-1468947040 ERROR pingManager: nmepm_pingReposURL: Did not receive a response header from repository
2013-04-02 00:19:35,939 Thread-1468947040 ERROR pingManager: nmepm_pingReposURL: Did not receive a response header from repository
2013-04-02 00:19:36,060 Thread-1468947040 ERROR pingManager: nmepm_pingReposURL: Did not receive a response header from repository 
```

这两天我上网查了一下，一直没能解决这个问题。这可能是 localho 的问题，非常感谢任何帮助/建议，如果您可以提供易于遵循的说明，因为我是 Linux 和 Oracle 11g 的新手。

非常感谢advance.st.localdomain，但我不确定如何检查或更新它。

如果您能提供易于遵循的说明，我将不胜感激，因为我是 Linux 和 Oracle 11g 的新手。

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-27T10:27:28.370

请在 /etc/hosts 文件中添加 IP 地址和主机名并重新启动 dbconsole，问题将得到解决。

谢谢阿尼尔

# jquery - FitText 和 FastClick 不适用于 jQuery Mobile 多页面布局

> ID：15754662
> 
> 赞同：1
> 
> 时间：2013-04-02T01:29:40.267
> 
> 标签：jquery, jquery-mobile, jquery-plugins

我的问题是我正在使用 FitText 和 FastClick jQuery 插件，当我将所有内容都放在多`.html`张纸上时，它们都可以正常工作。但是当我在 jQuery Mobile 的多页模板中设置它们时，所有内容都在一个 HTML 文件中，插件在第 2 页之后就无法工作。所有其他 JS 和 CSS 都可以正常工作，只是不是这 2 个插件；虽然重新调整窗口大小将使 FitText 工作。就像一开始只是不读取窗口大小一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-27T08:32:53.960

你试过 jQuery mobile 内置的 'vclick' [300ms 延迟提交功能](http://demos.jquerymobile.com/1.2.1/docs/api/events.html)吗？通过使用它，您可以省略使用 FastClick。因为 fastclick 通过消除 300 毫秒的延迟来做同样的事情。您对 Jquery mobile 和 FitText 没有任何问题。因此，同时使用“vclick”和 FitText 不会有任何问题。你不必面对很多麻烦。这是一个例子。

```
$("#element").bind('vclick', function(event) {
   decrementInput(this.id);event.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-01T07:47:19.610

页面头部引用的脚本和样式在通过 Ajax 加载页面时不会产生任何影响，多页页面模板就是这种情况，但如果通过 HTTP 正常请求页面，它们将执行。

在编写 jQuery Mobile 站点脚本时，需要考虑这两种情况。通过 Ajax 请求时忽略页面头部的原因是重新执行相同 JavaScript 的可能性非常高（在站点的每个页面中引用相同的脚本很常见）。

由于尝试解决该问题的复杂性，执行特定于页面的脚本的任务留给个人，并假设每个浏览会话只执行一次头部脚本。

解决方法是每次页面显示时调用插件。值得注意的是，在每个页面调用插件时都必须给出一个新的 ID 或类。即 $('#FittetxtA')。对于第一页，$('#FittetxtB') 对于第二页，依此类推。下面的方法是我用于缩放插件并按预期工作的方法。如果没有每个页面的“pageshow”功能，我无法放大任何页面，只能放大第一页。

例子

```
<script>
            $( '#page1' ).on( 'pageshow',function(event){

             /// call to pluggings /// 

             $("#Fit_a").fitText(1.2, { minFontSize: '20px', maxFontSize: '40px' });

             FastClick.attach(document.body);

            });

             $( '#page2' ).on( 'pageshow',function(event){

             /// call to pluggings ///

             $("#Fit_b").fitText(1.2, { minFontSize: '20px', maxFontSize: '40px' });

             FastClick.attach(document.body);

            });

             $( '#page3' ).on( 'pageshow',function(event){

             /// call to plugging ///

            $("#Fit_c").fitText(1.2, { minFontSize: '20px', maxFontSize: '40px' });

            FastClick.attach(document.body);

            });

             /// etc ///
        </script> 
```

我不是 100% 确定这是调用 Fast click 的最佳方式，因为当我检查 Github 页面时，我没有看到很多关于调用此插件的不同示例

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-30T22:51:52.993

好吧，这可以解决 fitText 的问题：

```
$(document).on('pageshow', function () {
    $("h1").fitText(0.273);
    $(".download").fitText(1);
    /* or put whatever you want to fit in here */
}); 
```

[在这里](http://jsfiddle.net/5TDg9/J5gKj/)工作的 jsfiddle 示例。

# html - 使用所有可用空间在另一个 div 中居中 div

> ID：15754664
> 
> 赞同：0
> 
> 时间：2013-04-02T01:29:59.353
> 
> 标签：html, css

我想使用父 div 中的所有可用空间来居中 div。
看看[这个](http://jsfiddle.net/p8DGH/)jsfiddle。使用这种方法，无论父对象的宽度如何，div 都将浮动在中心，从而在行的远端创建如此多的空白。
![在此处输入图像描述](https://i.stack.imgur.com/tniqu.png) 但我想让第一个和最后一个黄色盒子分别贴在左右边缘，中间的盒子应该漂浮在中间。
当我调整父 div 的大小时，子 div 应该会自动调整自己。
是否可以？
另一个问题，这是一个延续，我可以从标记中删除“行”div并仍然获得相同的结果吗？

HTML：

```
<div class="container">
<div class="row">
    <div>Row 1 1</div>
    <div>Row 1 2</div>
    <div>Row 1 3</div>
    <div>Row 1 4</div>
</div>
<div class="row">
    <div>Row 2 1</div>
    <div>Row 2 2</div>
    <div>Row 2 3</div>
    <div>Row 2 4</div>
</div>
</div> 
```

CSS：

```
body{
    margin: 0;
    padding: 0;
}

.container{
    border: 1px solid #2aF1E2;
    overflow: hidden;
}

.row{
    margin: 10px;
    border: 1px solid #2351E2;
    overflow: hidden;
    text-align: center;
}

.row div{
    margin: 10px 0 10px 0;
    display: inline-block;
    width: 100px;
    border: 1px solid #eac300;  
    padding: 5px;
    text-align: initial;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T04:11:22.683

您正在寻找的是所谓的**Flexbox**。无论如何，如果你买得起一个包装，我想你可以使用它。

但是使用纯 CSS 你可以这样做：

**HTML**

```
<div class="container">
<div class="row">
    <div class="wrap left"><div>Row 1 1</div></div>
    <div class="wrap mid"><div>Row 1 2</div></div>
    <div class="wrap mid"><div>Row 1 3</div></div>
    <div class="wrap right"><div>Row 1 4</div></div>
</div>
<div class="row">
    <div class="wrap left"><div>Row 2 1</div></div>
    <div class="wrap mid"><div>Row 2 2</div></div>
    <div class="wrap mid"><div>Row 2 3</div></div>
    <div class="wrap right"><div>Row 2 4</div></div>
</div>
</div> 
```

**CSS**

```
.row div div{
    margin: 10px 0 10px 0;
    display: inline-block;
    width: 100px;
    border: 1px solid #eac300;  
    padding: 5px;
    text-align: initial;
}

.wrap {width: 25%; float: left;} 
```

### 截屏

![](https://i.imgur.com/kSICANA.png)

### 小提琴：http: [//jsfiddle.net/praveenscience/p8DGH/3/](http://jsfiddle.net/praveenscience/p8DGH/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T03:04:33.823

留下你现在拥有的标记，你可以用 Flexbox 得到你想要的东西。

[http://jsfiddle.net/4CXuy/3/](http://jsfiddle.net/4CXuy/3/)

```
.container {
  border: 1px solid #2aF1E2;
}

.row {
  margin: 10px;
  border: 1px solid #2351E2;
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flexbox;
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
  -webkit-box-pack: justify;
  -moz-box-pack: justify;
  -webkit-flex-pack: justify;
  -ms-flex-pack: justify;
  -webkit-justify-content: space-between;
  justify-content: space-between;
}

.row div {
  margin: 10px 0 10px 0;
  display: inline-block;
  width: 100px;
  border: 1px solid #eac300;
  padding: 5px;
} 
```

如果要删除`.row`元素，则必须使用百分比来确保您的项目正好排成 4 列。

[http://caniuse.com/#feat=flexbox](http://caniuse.com/#feat=flexbox)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T01:35:19.270

我认为这并不理想，但是：

```
body{
    margin: 0;
    padding: 0;
}

div{
    margin: 0;
    padding: 0;
}

.container{
    border: 1px solid #2aF1E2;
    overflow: hidden;
}

.row{
    margin: 10px;
    border: 1px solid #2351E2;
    overflow:hidden;
    text-align: center;
}

.row div{
    margin: 10px 0 10px 0;
    display: inline-block;
    width: 100px;
    border: 1px solid #eac300;  
    padding: 5px;
    text-align: initial;
}

.row div:first-child {
    float: left;
    margin-left: 5px;
}

.row div:last-child {
    float: right;
    margin-right: 5px; 
} 
```

这是[jsfiddle](http://jsfiddle.net/4CXuy/)

更新：

```
.row div{
    margin: 10px 5% 10px 5%;
    display: inline-block;
    width: 100px;
    border: 1px solid #eac300;  
    padding: 5px;
    text-align: initial;
}

.row div:first-child {
    float: left;
}

.row div:last-child {
    float: right;   
} 
```

它仍然不能 100% 工作，例如当屏幕尺寸太小时会发生一些奇怪的事情，但我有点期望使用百分比。

# c - 如何从函数中打印字符串，该函数在C中返回该字符串上的指针？

> ID：15754665
> 
> 赞同：3
> 
> 时间：2013-04-02T01:30:09.143
> 
> 标签：c, function-pointers

这是我的 C 程序：

```
#include <stdio.h>

char const* voice(void){
  return "hey!";
}

int main(){
const char* (*pointer)(void);
pointer = &voice;

printf ("%s\n", *pointer); // check down *
return 0;
} 
```

*   *我正在尝试打印从指针返回的内容，但似乎无法正常工作。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T01:32:19.300

您需要调用函数指针，即使用括号：

```
#include <stdio.h>

char const* voice(void){
  return "hey!";
}

int main(){
const char* (*pointer)(void);
pointer = &voice;

printf ("%s\n", pointer());
//              ^^^^^^^^^
return 0;
} 
```

`*`函数指针不需要。（也不是`&`）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T01:32:15.807

您通过指针调用函数的方式与直接调用函数的方式完全相同，就好像该指针是函数的名称一样：

```
printf ("%s\n", pointer()); 
```

从 ANSI C 标准开始，函数指针周围的星号和 & 号是可选的。

# python - 使用 Cython 进行动态内存分配

> ID：15754667
> 
> 赞同：1
> 
> 时间：2013-04-02T01:30:23.747
> 
> 标签：python, cython

我有这段代码运行得太慢了。

```
 returnMask = []
 for curPage in range(numPages):
    print curPage
    curPageAddr = curPage + startPage
    cumMask = np.ones((numBytes)).astype(int) * 0xff 
    for maskFunction, maskAction in maskPattern:
            #maskArgs['funcArgs']['startPage'] = curPageAddr
            #maskArgs['funcArgs']['numPages'] = 1
            inputArgs['funcArgs']['startPage'] = curPageAddr
            inputArgs['funcArgs']['numPages'] = 1
            curMaskName, curMaskData = maskFunction(inputArgs)
            if (maskAction == 'include'):
                    maskIn = np.array(curMaskData).astype(int)
            if (maskAction == 'exclude'):
                    maskIn = (~np.array(curMaskData).astype(int)) & 0xff
            cumMask = cumMask & maskIn
    print "cumMask size %d" % len(cumMask)
    returnMask += cumMask.astype(int).tolist() 
```

基本上，我的外部 for 循环循环了 2000 次，每次都将 2048 个字节的列表附加到 returnMask 中。我在想我可以使用 Cython，将 returnMask 更改为动态分配的 c 数组，这可能有助于加快我的代码速度。谁能告诉我这是否是解决这个问题的好方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T03:41:38.710

很难说 - 它有多慢（以秒为单位）？

我的第一个猜测是你`maskFunction`一直在占用。

其次，`np.array().astype()`将两个都很慢的函数链接在一起，运行`~`是第三个函数。然后你的外循环有`astype`and `tolist`，它们都很慢。在 Cython 中做这些事情是你真正看到改进的地方。

我真的很怀疑`range`并且`print`正在花费大量时间。

你测量过瓶颈吗？我通常`time.time()`围绕各种函数进行一些调用，并在整个循环中取平均值：

```
dt = np.zeros( (len(loop),) )
for i in loop:
    t = time.time()
    slow_function()
    dt[i] = time.time() - t
print "avg. time for slow_function was %.3f s" % dt.mean() 
```

# drupal - Drupal View 的公开过滤器——缺少当前选项

> ID：15754676
> 
> 赞同：0
> 
> 时间：2013-04-02T01:31:37.510
> 
> 标签：drupal, drupal-views, options, drupal-exposed-filter

我们有一个由 Feeds 导入填充的内容类型。我们有一个带有暴露过滤器的页面，其中一个暴露的过滤器用于“年份”。上次我们进行更新时，我们在数据中添加了新的一年。（以前它的值是 2009-2012）。现在我们有年份值为“2013”​​的记录。

然而！在我看来，在“年份”的公开过滤器中，没有列出 2013 年。为什么？我需要做些什么来重置视图以收集所有年份值吗？

# java - 如何向谷歌云端点添加身份验证？

> ID：15754677
> 
> 赞同：4
> 
> 时间：2013-04-02T01:32:13.367
> 
> 标签：java, android, google-app-engine, google-oauth, google-cloud-endpoints

从 Google Cloud Endpoint 开始，tic tac toe 示例（请参阅[https://github.com/GoogleCloudPlatform/appengine-endpoints-tictactoe-java](https://github.com/GoogleCloudPlatform/appengine-endpoints-tictactoe-java)）

然后，在最新的 Android Ellipse 插件中通过 Ellipse 创建一个“AppEngine Connected Android Project”（参见[https://developers.google.com/eclipse/docs/endpoints-androidconnected-gae](https://developers.google.com/eclipse/docs/endpoints-androidconnected-gae)）

现在这会创建没有身份验证的端点。

```
// @Api(name = "messageEndpoint")
//NO AUTHENTICATION; OPEN ENDPOINT! 
```

现在尝试使用 tic tac toe 应用程序作为示例添加身份验证。

```
@Api(name = "messageEndpoint",
version = "v1",
clientIds = {Ids.WEB_CLIENT_ID, Ids.ANDROID_CLIENT_ID, Ids.IOS_CLIENT_ID, com.google.api.server.spi.Constant.API_EXPLORER_CLIENT_ID},
audiences = {Ids.ANDROID_AUDIENCE} 
```

)

如果出现 oauth 异常，请添加以下内容：

```
//public void sendMessage(@Named("message") String message)
  //throws IOException {

public void sendMessage(@Named("message") String message)
  throws OAuthRequestException,IOException { 
```

并使用 api explorer https://[your-app-id].appspot.com/_ah/api/explorer 进行测试，我将 [your-app-id] 替换为我的特定应用程序 ID。

```
POST https://[your-app-id].appspot.com/_ah/api/messageEndpoint/v1/sendMessage/test
X-JavaScript-User-Agent:  Google APIs Explorer

503 Service Unavailable

cache-control:  private, max-age=0
content-encoding:  gzip
content-length:  193
content-type:  application/json; charset=UTF-8
date:  Mon, 01 Apr 2013 22:57:17 GMT
expires:  Mon, 01 Apr 2013 22:57:17 GMT
server:  GSE

{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "backendError",
    "message": "java.lang.NoClassDefFoundError: Could not initialize class com.brooklynmarathon.citysync.endpoints.EMF"
   }
  ],
  "code": 503,
  "message": "java.lang.NoClassDefFoundError: Could not initialize class com.brooklynmarathon.citysync.endpoints.EMF"
 }
} 
```

我尝试使用我下载的井字游戏应用程序（感谢 Google Dev Rel）并在此处构建和上传：[https ://brooklynmarathon.appspot.com/_ah/api/explorer](https://brooklynmarathon.appspot.com/_ah/api/explorer)

当我尝试访问分数列表时，我看到：

```
GET https://brooklynmarathon.appspot.com/_ah/api/tictactoe/v1/score

X-JavaScript-User-Agent:  Google APIs Explorer

Response

401 Unauthorized

- Hide headers -

cache-control:  private, max-age=0
content-encoding:  gzip
content-length:  193
content-type:  application/json; charset=UTF-8
date:  Tue, 02 Apr 2013 01:14:40 GMT
expires:  Tue, 02 Apr 2013 01:14:40 GMT
server:  GSE
www-authenticate:  GoogleLogin realm="https://www.google.com/accounts/ClientLogin", service="xapi"

{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "required",
    "message": "com.google.appengine.api.oauth.OAuthRequestException: Invalid user.",
    "locationType": "header",
    "location": "Authorization"
   }
  ],
  "code": 401,
  "message": "com.google.appengine.api.oauth.OAuthRequestException: Invalid user."
 }
} 
```

我的问题是为什么井字游戏示例有标题：“www-authenticate: GoogleLogin realm="https://www.google.com/accounts/ClientLogin", service="xapi" 和

一般来说，我们如何向“App Engine Connected Android Project”生成的端点添加身份验证？

从 web 应用程序、android 客户端或 iOS 客户端，我们可以从 api explorer 测试它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:18:34.903

“一般来说，我们如何向“App Engine Connected Android Project”生成的端点添加身份验证？”

这样做的说明在这里：
[https ://developers.google.com/appengine/docs/java/endpoints/consume_android#making-authenticated-calls](https://developers.google.com/appengine/docs/java/endpoints/consume_android#making-authenticated-calls)

您还将在此处（在后续页面上）看到有关 iOS 和 Javascript 的说明。

在服务器端，您需要将 User 对象添加为端点方法的第一个参数。

我不知道你其他问题的答案。

# msbuild - .NET 4.5 的南特

> ID：15754687
> 
> 赞同：2
> 
> 时间：2013-04-02T01:33:07.293
> 
> 标签：msbuild, .net-4.5, nant

我们使用 Nant 来自动化我们的构建。我们正在将项目升级到 .NET 4.5。看起来 Nant 0.92 是最新版本，仅支持 .NET 4.0。有没有办法让 Nant 使用 .NET 4.5？我查看了 Nant 站点，找不到任何有关支持 .NET 4.5 的详细信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T17:43:42.183

.NET 4.5 是 .NET 4 的就地升级，因此您仍然使用相同的 MSBuild 路径来构建您的项目。如果您直接调用 msbuild.exe，您可以利用任何版本的 NAnt 来构建您的项目。

鉴于下面的示例，当您想要更改为 .NET 5（或任何其他版本的 .NET）时，您只需更新指向 msbuild.exe 的属性，其余的应该可以工作（假设 msbuild.exe 中没有重大更改论据）。

```
<property name="MSBuildPath" value="c:\Windows\Microsoft.NET\Framework64\v4.0.30319\MSBuild.exe"/>    
<target name="build">
  <exec program="${MSBuildPath}">
    <arg line='"${SolutionFile}"' />
    <arg line="/property:Configuration=${SolutionConfiguration}" />
    <arg value="/target:Rebuild" />
    <arg value="/verbosity:normal" />
    <arg value="/nologo" />
  </exec>
</target> 
```

# scala - scala 二维数组

> ID：15754688
> 
> 赞同：19
> 
> 时间：2013-04-02T01:33:10.363
> 
> 标签：scala, multidimensional-array

这听起来很容易，但我就是做不好。

如何在 Scala 中创建大小为 100 x 60 的二维数组？假设我有一个名为 Abcd 的类，我想创建一个 Abcd 的二维数组。我尝试使用以下代码但不起作用。

```
var myArray = new Array[Array[Abcd]](100,60) 
```

它抱怨“构造函数数组的参数太多”

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-04-02T01:42:56.520

目前推荐的方法是使用[`ofDim`](http://www.scala-lang.org/api/current/index.html#scala.Array$)：

```
var myArray = Array.ofDim[Abcd](100, 60) 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-04-02T08:08:47.773

或者，如果您希望数组以 ABCD 而不是空值开头

```
Array.fill[ABCD](100,6) { new ABCD } 
```

或者如果 ABCD 因位置而有规律地变化

```
Array.tabulate[ABCD](100,6) { (i,j) => new ABCD(i,j) } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-05-31T15:37:06.890

我知道这个问题得到了回答，但我遇到的一个问题是@alexwriteshere 的解决方案和@Chick 的解决方案只有在你想要一个矩阵时才有效。

为了能够创建一个二维数组（如果被视为第一个行数，然后是列数），请执行以下操作：

```
val array = Array.ofDim[Array[Char]](2)
array(0) = Array.ofDim[Char](10)
array(1) = Array.ofDim[Char](20) 
```

# mvvm - Windows 8 快照视图 Caliburn.Micro

> ID：15754693
> 
> 赞同：0
> 
> 时间：2013-04-02T01:34:02.310
> 
> 标签：mvvm, windows-8, windows-store-apps, winrt-xaml, caliburn.micro

我将 Caliburn.Micro 与我的 Windows 8 商店应用程序一起使用。我需要为每个视图实现一个快照视图，通常可以通过使每个视图成为布局感知页面并以这种方式实现它来完成，但是，Caliburn.Micro，至少据我所知不允许您使用布局感知页面. 我还没有找到任何关于如何在 Caliburn.Micro 中为 WinRT 管理视觉状态的信息。我有一个用于布局 UI 的快照视图网格和一个用于完整视图的网格，我只需要能够在用户命令上在两者之间切换。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T01:45:34.267

我还没有使用过 Caliburn.Micro，但如果它定义了自己的基页面类 - 您可以合并来自 LayoutAwarePage 的代码和该基类以获得您需要的所有支持。

# django - 芹菜 celerybeat 不滴答作响

> ID：15754694
> 
> 赞同：0
> 
> 时间：2013-04-02T01:34:06.393
> 
> 标签：django, redis, celery, django-celery

我有以下设置：

```
celery-with-redis - 3.0        - active 
celery          - 3.0.12       - active 
django-celery   - 3.0.11       - active
django-kombu    - 0.9.4        - active
kombu           - 2.5.8        - active
redis           - 2.4.10 
```

我的芹菜设置如下：

```
BROKER_URL = "redis://:password@localhost:6379/0"
REDIS_DB = 0
REDIS_CONNECT_RETRY = True
CELERY_SEND_EVENTS=True
CELERY_RESULT_BACKEND="redis://:password@localhost:6379/0"
CELERY_TASK_RESULT_EXPIRES =  10
CELERYBEAT_SCHEDULER="djcelery.schedulers.DatabaseScheduler" 
```

检查我的 celerybeat 日志文件，它具有以下内容

```
<ModelEntry: celery.backend_cleanup celery.backend_cleanup(*[], **{}) {<crontab: * 4 * * * (m/h/d/dM/MY)>}>
<ModelEntry: testing  spider.tasks.downloadCEA(*[], **{}) {<crontab: 4 9 * * * (m/h/d/dM/MY)>}>
[2013-04-02 09:16:15,364: DEBUG/MainProcess] Celerybeat: Ticking with max interval->5.00 seconds 
```

但是，它并没有像日志文件中预期的那样唤醒和休眠，通过管理界面修改的任务更改也没有反映在日志文件中。但是，当我重新启动 redis 时，适当的行为又回来了。

任何人都可以就此提出建议吗？

更新：我快速`top`检查了我的 redis 进程——它消耗了 100% 的 cpu 使用率！任何人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:36:39.033

不好意思，在这里回答我的问题。

原来我使用的是旧版本的 kombu，并且许多与 redis 的连接都是由工作人员创建的。将问题升级到更高版本解决了该问题。

@asksol[在此处](https://github.com/celery/kombu/issues/178)描述了此问题。

# c# - 使用插件覆盖 autofac 注册

> ID：15754702
> 
> 赞同：16
> 
> 时间：2013-04-02T01:35:40.720
> 
> 标签：c#, dependency-injection, autofac

我有一个`IFoo`由 实现的服务`DefaultFoo`，并且我已经在我的 autofac 容器中注册了它。

现在我想允许`IFoo`在插件程序集中实现的替代实现，它可以放在“插件”文件夹中。如果存在，我如何配置 autofac 以更喜欢这种替代实现？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-02T03:18:27.293

如果你注册了一些接口实现，Autofac 将使用最新的注册。其他注册将被覆盖。在您的情况下，Autofac 将使用插件注册，如果插件存在并注册自己的 IFoo 服务实现。

> 如果多个组件公开相同的服务，Autofac 将使用最后注册的组件作为该服务的默认提供者。

查看[默认注册](http://docs.autofac.org/en/latest/register/registration.html#default-registrations)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T12:47:30.597

正如 Memoizer 所说，最新的注册会覆盖早期的注册。我最终得到了这样的结果：

```
// gather plugin assemblies
string applicationPath = Path.GetDirectoryName(
    Assembly.GetEntryAssembly().Location);
string pluginsPath = Path.Combine(applicationPath, "plugins");
Assembly[] pluginAssemblies = 
    Directory.EnumerateFiles(pluginsPath, "*.dll")
    .Select(path => Assembly.LoadFile(path))
    .ToArray();

// register types
var builder = new ContainerBuilder();
builder.Register<IFoo>(context => new DefaultFoo());
builder.RegisterAssemblyTypes(pluginAssemblies)
    .Where(type => type.IsAssignableTo<IFoo>())
    .As<IFoo>();

// test which IFoo implementation is selected
var container = builder.Build();
IFoo foo = container.Resolve<IFoo>();
Console.WriteLine(foo.GetType().FullName); 
```

# ios - 如何将 setNeedsDisplay 与内容滚动结合起来？

> ID：15754703
> 
> 赞同：0
> 
> 时间：2013-04-02T01:35:42.583
> 
> 标签：ios, uikit, core-graphics

我实现了一个自定义 UIView，它可以绘制无法以任何其他方式绘制的复杂图形（通过 drawRect）。由于绘制的项目位于一个非常大的平面上（想想世界地图），由于内存限制，我无法使用 UIScrollView。我管理自己的原点和缩放变量，并根据这些变量绘制图形。我还实现了用于平移、放大和缩小、双击和单击等的手势识别器。这一切都很棒。

但我需要优化：当用户用他/她的手指平移时，我相应地更改我的内部原点变量并调用 setNeedsDisplay。这在模拟器和 iPhone 5 上运行良好，但在 iPad 3 上它有点慢（不算太糟糕，但仍然很明显）。我想要实现的是只为那些需要显示的区域（即屏幕上由于平移而显示的新到达项目）调用 setNeedsDisplay，并滚动（移动）已经在屏幕上的区域。显示屏幕的 1/10 会比显示 1/1 快得多，因为我已经进行了优化以快速确定哪些项目落在屏幕上并只显示那些项目。

换句话说，而不是调用

```
thisView.originPoint = thisView.originPoint - 10;
[thisView setNeedsDisplay]; 
```

我希望我能以某种方式打电话

```
thisView.originPoint = thisView.originPoint - 10;
[thisView setNeedsDisplayInRect: CGMakeRect(320-10,0,320,480)
    withScroll: CGMakerect(0,0,320-10,480) scrollBy: CGPointMake(-10,0); 
```

这显然只是程式化的代码。仅仅滚动视图的内容是没有帮助的（虽然我现在不知道该怎么做），因为 drawRect 可能会在很久以后调用，并且可能与对 setNeedsDisplay 的另一个调用结合使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T03:28:46.650

您可以考虑在完全绘制视图后`[self.layer renderInContext:aContext]`缓存屏幕图像。`UIGraphicsGetImageFromCurrentImageContext()`当用户平移时，该图像可以绘制在不同的位置，例如。用户拖动时向左平移。同时，必要的数据也会被异步加载。在用户完成拖动或数据加载后，您将设置一个标志让 setNeedsDisplay 在所需部分绘制，然后缓存新图像。

此外，[CATiledLayer](http://developer.apple.com/documentation/GraphicsImaging/Reference/CATiledLayer_class/Introduction/Introduction.html)类的功能与您正在寻找的类似，但它需要对您已有的内容进行更多修改。

希望这可以帮助！

# css - 选择时禁用突出显示表列的 CSS 规则

> ID：15754704
> 
> 赞同：7
> 
> 时间：2013-04-02T01:36:15.533
> 
> 标签：css, select, html-table, cross-browser, highlight

# 背景

希望禁用突出显示表格的第一列。

# HTML 源代码

```
<table>
<tbody>
    <tr><td class="unselectable" unselectable="on"><button value="1" unselectable="on" class="unselectable"><div unselectable="on" class="unselectable">&#x2718;</div></button></td><td>Row 1</td></tr>
    <tr><td class="unselectable" unselectable="on"><button value="2" unselectable="on" class="unselectable"><div unselectable="on" class="unselectable">&#x2718;</div></button></td><td>Row 2</td></tr>
    <tr><td class="unselectable" unselectable="on"><button value="3" unselectable="on" class="unselectable"><div unselectable="on" class="unselectable">&#x2718;</div></button></td><td>Row 3</td></tr>
</tbody>
</table> 
```

# CSS 源代码

```
*.unselectable {
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: -moz-none;
  -ms-user-select: none;
  user-select: none;
} 
```

# 小提琴

[http://jsfiddle.net/2LQfg/1/](http://jsfiddle.net/2LQfg/1/)

# 问题

当用户选择并在表格上拖动鼠标按钮时，按钮文本 (✘) 突出显示（不希望出现的行为）。当用户复制和粘贴值时，值 (✘) 不包括在内（期望的行为）。

为了澄清，这是当前的行为（不希望的）：

![不受欢迎的](https://i.stack.imgur.com/p9M6g.png)

下图显示了在表格上拖动鼠标后所需的行为：

![期望的](https://i.stack.imgur.com/d7UVg.png)

大多数用户可能不会在意，但这是一种略微误导的用户体验。无论用户突出显示文本并复制它，都希望复制所有突出显示的文本。通过添加`unselectable`类，按钮的 (✘) 值会突出显示，但不会被复制。用户根本不应该能够突出显示（选择）（✘）*，因为*它设置为`unselectable`。

# 环境

我在 Xubuntu 上使用 Firefox 19.0.2，但我寻求跨浏览器的解决方案。

# 问题

防止用户突出显示第一个表格列（包含按钮）的跨浏览器方法是什么？

# 有关的

*   [如何使用 CSS 禁用文本选择突出显示？](https://stackoverflow.com/questions/826782/css-rule-to-disable-text-selection-highlighting)
*   [有没有办法使 DIV 不可选择？](https://stackoverflow.com/questions/924916/is-there-a-way-to-make-a-div-unselectable)
*   [使用 CSS 或其他非 JS 方法模仿“onselectstart=return false”？](https://stackoverflow.com/questions/1637298/imitate-onselectstart-return-false-using-css-or-other-non-js-approach)
*   [http://www.mindfiresolutions.com/Using-of-onselectstart-and-its-alternative-for-Firefox-239.php](http://www.mindfiresolutions.com/Using-of-onselectstart-and-its-alternative-for-Firefox-239.php)
*   [http://therelentlessfrontend.com/2010/02/13/how-to-disable-text-selection-in-a-table/](http://therelentlessfrontend.com/2010/02/13/how-to-disable-text-selection-in-a-table/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T03:18:40.207

`content`如果通过CSS 规则设置，浏览器似乎不会复制内容。希望你不需要支持 IE7

```
button.unselectable:after {
    content: "\2718";
} 
```

[http://jsfiddle.net/ExplosionPIlls/2LQfg/50/](http://jsfiddle.net/ExplosionPIlls/2LQfg/50/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T03:22:03.560

## 只是一种解决方法

到目前为止，我只找到了一个相当不方便的解决方法。它隐藏元素中的所有“实际”文本，`unselectable`并通过伪元素将其替换为伪文本`:before`。注意：如果不需要在 html 中实际包含“实际”文本，则`span`可以消除下面的嵌套元素（以及因此的一些冗余 html）和关联的 css，但这一切都取决于文本的“重要性”程度在您的实际应用程序中（用于屏幕阅读器、搜索引擎等）。

**[小提琴的例子。](http://jsfiddle.net/2LQfg/51/)**

**HTML**

```
<table>
<tbody>
    <tr><td><button value="1"><div class="unselectable" data-content="&#x2718"><span>&#x2718;</span></div></button></td><td>Row 1</td></tr>
    <tr><td><button value="2"><div unselectable="on"   class="unselectable" data-content="&#x2718"><span>&#x2718;</span></div></button></td><td>Row 2</td></tr>
    <tr><td><button value="3"><div unselectable="on"  class="unselectable" data-content="&#x2718"><span>&#x2718;</span></div></button></td><td>Row 3</td></tr>
</tbody>
</table> 
```

**CSS**

```
*.unselectable {
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: -moz-none;
  -ms-user-select: none;
  user-select: none;
}

*.unselectable span {
    display: none;
}

*.unselectable:before {
    content: attr(data-content);
} 
```

# java - URL目录中的Java列表文件？

> ID：15754707
> 
> 赞同：1
> 
> 时间：2013-04-02T01:36:41.910
> 
> 标签：java, url, webserver

这可能吗？我可以在我的网络服务器上创建一个名为 /gamelevels/ 且扩展名为 .gamelevel 的文件夹，在其中指向一个 URL 并从那里检索所有 .gamelevel 文件吗？java中似乎不存在这样的东西（谷歌搜索/ SO）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T01:52:29.360

某些服务器配置为在提供目录的 URL 时提供内容的 HTML 列表。如果服务器提供该列表，则客户端可以解析列表中的内容。

*服务器提供该列表被认为是一个**安全漏洞**。*

# c - 浮点数不准确

> ID：15754711
> 
> 赞同：0
> 
> 时间：2013-04-02T01:37:12.657
> 
> 标签：c, floating-point, type-conversion, rounding

在以下程序中混合使用 int 和 double 会产生一个奇怪的结果：

```
int main()
{
    double x = 9.90, y = 10.0, z, w;
    int    ip, fp;

    z = y - x;

    ip = (int) z;

    w = (z - ip)*100;

    printf( "\nx = %f\ty = %f\tz = %f\tw = %f\n",
            x, y, z, w );

    printf("\nip = %d", ip); /* So far, so good */

    fp = (int) w; /* Why does fp get 9 and not 10??? */

    printf("\nfp = %d\n", fp);

    return 0;
} 
```

结果：

```
x = 9.900000    y = 10.000000   z = 0.100000    w = 10.000000

ip = 0
fp = 9 (Should be 10!) 
```

结果与使用 MingGW (WinXP) e Clang (MacOSX) 相同。谁能解释这种奇怪的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T03:18:47.157

问题是您实际上是在尝试做`w = 0.1 * 100`0.1 值，而浮点数不能精确表示（与`1/3`不能用十进制精确表示的方式相同）。

你得到的二进制 0.1 是这样的：

```
0.00011001100110011001100110011001100110011001100110011001... 
```

最后 4 位数字永远重复。

虽然双精度数没有无限位数，所以它实际上是：

```
1.100110011001100110011001100110011001100110011001100110 * 2**(-4) 
```

数字因为不适合而被丢弃，从“01001001 ...”开始。因为丢弃的数字以 a 开头，`0`所以数字将被四舍五入。这意味着您实际上最终会执行类似`w = 0.9999999999 * 100`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T03:34:33.880

出现错误是因为 a`double`不能完全保持 value `9.9`。它可以管理的最接近的实际上是`9.9000000000000003552713678800500929355621337890625`. 所以你的价值`w`不是`10`，它真的`9.99999999999996447286321199499070644378662109375`。

当您使用`%f`printf 时，它会将您的值四舍五入到小数点后 6 位。如果您将 printf 格式更改为类似的格式`%.60f`，您可以看到您的值的完整精度。

# java - 在 Microsoft Visual Studio 2012 中使用 Java

> ID：15754713
> 
> 赞同：42
> 
> 时间：2013-04-02T01:37:21.243
> 
> 标签：java, visual-studio

我最初是一名 C++ 程序员，Visual Studio 为我提供了出色的工作。但是，我最近想扩展到 C# 和 Java。Visual Studio 支持 C#，我现在对它有了一些经验，但它不支持 Java。有没有人有任何提示让我允许 Visual Studio 与 Java 一起使用？我正在考虑尝试使用 Visual Studio SDK 的加载项向导来创建 Java 支持的扩展，但在我开始深入研究可能非常复杂的事情之前，我想知道这里是否有人曾经尝试过并且可能已经尝试过对我解决这个问题的一些建议。在互联网上搜索了很多之后，我发现 Visual Studio 不支持 Java，而且我发现的一些解决方法也很差。

澄清：

我想为 Visual Studio 2012 编写一个插件，使其能够与 Java prgramming 一起使用。我希望在创建项目文件时可以选择制作 .java 文件，并且在编译时，我希望它使用 javac 编译器进行编译（我已经下载了它）。

额外细节：

我知道已经有 Java IDE，比如 eclipse，我只是想知道是否可以让它与 Visual Studio 一起工作。我非常喜欢 Visual Studio，并且已经使用了一段时间，我希望能够使用我所知道的所有语言使用相同的界面进行编程。

是的，C# 是一种增强的 Java，但是我可能需要做一些特别需要 Java 的事情，所以我需要一种方法来编写这些。我可以使用 eclipse 或其他 IDE，但如果可能的话，我更喜欢 Visual Studio。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-02-24T18:25:16.857

有一个 Visual Studio 插件支持 Java 语言：http: [//visualstudiogallery.msdn.microsoft.com/bc561769-36ff-4a40-9504-e266e8706f93](http://visualstudiogallery.msdn.microsoft.com/bc561769-36ff-4a40-9504-e266e8706f93)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-02-24T23:19:00.367

[IntegraStudio](http://softerg.com/integra/isHome.htm)支持 Visual Studio 中 Java 项目的语法着色、构建、调试和查找定义和引用（F12 和 ALT-F12）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-07-26T13:23:06.710

理论上可以通过为 VS 项目定义自定义构建步骤来完成。你可以制作一个文件模板来创建一个新的java文件，不知道你是否可以让它把东西放在正确的包里，所以你最终可能会写很多java ide会扔的东西已经。这不是不可能的，但是从经验来看（我在 mac 上使用过 xcode，在 windows、eclipse、netbeans、code::blocks 中使用过 xcode，并最终从命令行为 java 和 c++ 编译了很多）它更容易学习新的想法。

如果你坚持，我发现了这个：http: [//improve.dk/compiling-java-in-visual-studio/](http://improve.dk/compiling-java-in-visual-studio/)

我计划关注并尝试修改它以创建一个通用的 java 模板

如果可能的话（意思是如果我足够了解我在做什么）我打算为 java 项目和文件实现一个自定义向导。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-07-15T08:30:27.563

您可以使用 Visual Studio for Java [http://visualstudiogallery.msdn.microsoft.com/bc561769-36ff-4a40-9504-e266e8706f93](http://visualstudiogallery.msdn.microsoft.com/bc561769-36ff-4a40-9504-e266e8706f93)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-01-01T19:14:49.763

[Java 语言支持](https://visualstudiogallery.msdn.microsoft.com/bc561769-36ff-4a40-9504-e266e8706f93)扩展为 Java 编程语言提供了基本功能。当前的编辑功能包括：

*   语法高亮和大括号匹配
*   概述对快速折叠类和函数的支持
*   列出当前文档中的类、枚举、接口、字段和方法的下拉栏

如果您想贡献，那么该项目已被移至其自己的[GitHub 存储库](https://github.com/tunnelvisionlabs/JavaForVS)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-01-16T21:20:35.310

如果您精通 C# 和 Visual Studio，您可以尝试[IKVM](http://www.ikvm.net/)。这并不完全符合您的要求，但肯定会通过允许您从 C# 调用 Java 库来帮助弥合差距，反之亦然。您可以在 Visual Studio 中使用它，但它在[MonoDevelop中也有](http://monodevelop.com/)[一流的支持](http://www.mono-project.com/Java)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-04T09:20:11.090

使用 Visual Studio IDE 将 Java 移植到 C#：

目前我正在使用 Visual Studio IDE 环境将代码从 Java 移植到 C#。为什么？Java 拥有庞大的库，而 C# 可以访问 UWP 生态系统。

为了支持编辑和调试以及检查 Java 字节码（反汇编），您可以尝试：

*   [Java 语言支持](https://visualstudiogallery.msdn.microsoft.com/bc561769-36ff-4a40-9504-e266e8706f93) 仅供参考：请阅读[问题](https://github.com/tunnelvisionlabs/JavaForVS/issues)以了解限制和错误的概述

为了支持 Android (Java/C++) 开发，您可以尝试：

*   [适用于 Android 和 Eclipse Android 项目导入的 Java 语言服务](https://visualstudiogallery.msdn.microsoft.com/53e6e65b-fa0f-411a-a98d-7911009537ac) 仅供参考：此[博客](https://blogs.msdn.microsoft.com/vcblog/2015/11/06/java-debugging-and-language-support-in-visual-studio-for-android/)让 NetBeans 和 Eclipse IDE java 开发人员兴奋不已:-)

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2013-04-02T02:04:36.213

如果您想开始使用 Java，那么使用 Java IDE 会更开心。IntelliJ Community Edition、Eclipse 和 Netbeans 都是免费的。

我知道可以将 IntelliJ 设置为使用 Visual Studio 键盘快捷键，因此即使您像我一样是键盘迷，在 Java IDE 中也不会感到格格不入。

IDE 的差异很小，使用 Java IDE 进行 Java 开发可以节省大量时间。

祝你好运！

* * *

## 回答 #9

> 赞同：-15
> 
> 时间：2014-02-07T00:01:29.343

Java 不支持网络框架。Java 有自己的框架。Visual Studio 曾经一度支持 J++ 和 J#，它们是为希望使用 .Net 进行开发的 Java 开发人员设计的，但此后已经不复存在。

大多数人在想要开发 Java 时，他们只是从 Netbeans、Eclipse 或类似的东西开始。他们不会在这样的网站上到处询问是否可以在 Visual Studio 中开发 Java 东西。

老实说，Java 在 Visual Studio 中表现不佳。甲骨文和微软是两个独立的实体，他们需要保持这种状态。我希望看到的 Oracle 和 Microsoft 的唯一组合是适用于 Windows 的 Java 和适用于 Windows 的 Java 开发工具。我不想在 Visual Studio 中看到 Java。C# 在拐角处挥之不去会让人感到困惑。

# c# - c# windows form app中的动态标签

> ID：15754716
> 
> 赞同：0
> 
> 时间：2013-04-02T01:37:41.090
> 
> 标签：c#, winforms, updown

因此，我试图获得一个标签来反映正在发生的任何操作的当前设置。

```
this.SettingXLbl.Text = "The current value-set is " + SettingUpDown.Value; 
```

我修改了自动生成的代码以尝试在 SettingUpDown 中显示当前值，但我只得到零。

我交易仍然`.Value`得到`.Minimum`零结果。up-down 的最小值大于零，所以我不确定我需要做些什么不同的事情来让它反映 up-down 中保持的当前值。

是否还有其他一些我需要更改的属性而不是文本本身。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T01:44:10.103

```
this.SettingXLbl.Text = "The current value-set is " + SettingUpDown.Value; 
```

`InitializeComponent`您在设计器的方法中更改了该行。该方法仅在构造表单时调用一次。所以它总是会反映`SettingUpDown.Value`那个时间点的值，在表单构建时可能是 0。

在某些情况下，您必须明确更新标签的文本。例如，`NumericUpDown`控件有一个[`ValueChanged`事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.numericupdown.valuechanged.aspx)，您可以在该事件中在值更改时更改标签的文本。只需在设计器中选择组件，在“属性”窗口中让它显示事件，然后双击该`ValueChanged`事件。Visual Studio 将插入一个方法存根并将其与事件相关联。您可以使用您想要竞标的任何代码填充此存根。像这样的东西：

```
public void SettingUpDown_ValueChanged(object sender, EventArguments e)
{
    this.SettingXLbl.Text = "The current value-set is " + SettingUpDown.Value;
} 
```

# c# - Javascript 计数 asp.net

> ID：15754720
> 
> 赞同：-3
> 
> 时间：2013-04-02T01:38:43.860
> 
> 标签：c#, javascript, asp.net, timer

我一直试图在网上找到这个解决方案，但到目前为止还没有运气。我需要一个简单的 JavaScript 代码 (HH:MM:SS) 来计算秒数。我有一个 asp.net c# web 应用程序。我想在页面加载时运行该计数。JavaScript 应该能够做的是：当它达到 2 分钟时，将计时器的背景更改为黄色。当它达到 4 分钟时，将计时器的背景更改为红色。当达到 10 分钟时，播放 .mp3 或 wav 文件。

任何人都可以指出正确的方向吗？它不一定必须在 JavaScript 中完成。如果我可以在 c# asp.net 中做到这一点，那对我来说很好。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T02:02:31.843

柜台：

```
 var count = 0;
 count ++; 
```

定时器：

```
var intervalID = window.setInterval(everySecond, 1000);

function everySecond()
{  // do something
} 
```

检查计数器是否高于 120 秒或 240 秒：

```
if (count > 120)
{ ....
} 
```

设置颜色：有 2 个基于类的 CSS 样式，并在需要时切换类......即[JQuery.addClass](http://api.jquery.com/addClass/) -`$("#myText").addClass("myRedBackground");`

# mysql - MySQL 视图已创建 - 对其运行查询需要几分钟

> ID：15754721
> 
> 赞同：0
> 
> 时间：2013-04-02T01:38:48.313
> 
> 标签：mysql, view

我已将以下查询转换为视图表名销售板：

```
select 
distinct(p.paymentID) AS paymentID,
j.jobID AS jobID,j.jobNumber AS jobNumber,j.jobType AS jobType, j.countType AS countType, j.countID AS countID,
ui.userID AS salesRep,
(
    case 
        when (j.idType = 'dealership') then d.dealershipName 
        when (j.idType = 'Group') then g.groupName 
        when (j.idType = 'Agency') then a.agencyName 
    end
) AS dealershipName,
(
    case 
        when (p.manualTimestamp <> '0000-00-00 00:00:00') then p.manualTimestamp 
        when (p.manualTimestamp = '0000-00-00 00:00:00') then from_unixtime(p.timestamp) 
    end
) AS checkTS,
p.paymentAmount AS paymentAmount,
po.estimatedMailArrival AS estimatedMailArrival 
from jobs j 
left join smdealershipjoins smdj on j.dealershipID = smdj.dealership 
left join smgroupjoins smgj on j.dealershipID = smgj.groupID 
left join smagencyjoins smaj on j.dealershipID = smaj.agencyID 
join userinfo ui on 
(
    case 
        when (j.idType = 'dealership') then (smdj.sm = ui.userID) 
        when (j.idType = 'Group') then (smgj.sm = ui.userID) 
        when (j.idType = 'Agency') then (smaj.sm = ui.userID) 
    end
) 
left join dealerships d on smdj.dealership = d.dealershipID 
left join dealershipgroups g on smgj.groupID = g.groupID 
left join agencies a on smaj.agencyID = a.agencyID 
join payments p on j.jobID = p.jobID 
left join purchaseorders po on j.jobID = po.jobID 
order by 
(
    case 
        when (p.manualTimestamp <> '0000-00-00 00:00:00') then p.manualTimestamp 
        when (p.manualTimestamp = '0000-00-00 00:00:00') then from_unixtime(p.timestamp) 
    end
) desc 
```

视图保存并返回预期结果。但是，每当我在新视图表上运行最简单的查询时，查询都需要几分钟才能运行。我四处搜寻，看看是否有什么可以解决的 - 但我空手而归:(

有什么可以做的吗？我绞尽脑汁想寻求帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T01:57:48.803

如果任何结果集的大小超过了您的查询的大小，`innodb_buffer_pool_size`由于 I/O 分页，您的查询将花费大量时间。`ORDER BY`在您的情况下，由于该子句，您的 from 语句中包含的每个表都必须加载到内存中。

通过使用分区或增加缓冲池的大小来减少提取的数据量。

# c++ - 当我们将指针作为参数传递时，C 扩展关键字 typeof 是如何工作的？

> ID：15754725
> 
> 赞同：1
> 
> 时间：2013-04-02T01:39:20.570
> 
> 标签：c++, c, assembly, x86

我使用 GNU 编译器并找到了 typeof 的用法，例如 typeof(ptr + 1) 而不是 typeof(ptr)，这很有趣，并推动我找出 typeof 的作用。

我写测试代码：

```
struct haha
{
    int a;
    int b;
    void *c;
};

struct haha myhaha;

int main(void)

{

typeof(&myhaha + 1) _tmp = &myhaha;
return 0;
} 
```

并获取汇编代码：

```
 80483e4:   55                      push   %ebp
 80483e5:   89 e5                   mov    %esp,%ebp
 80483e7:   83 e4 f0                and    $0xfffffff0,%esp
 80483ea:   83 ec 20                sub    $0x20,%esp
 80483ed:   c7 44 24 1c 1c a0 04    movl   $0x804a01c,0x1c(%esp)
 80483f4:   08 
 80483f5:   b8 e0 84 04 08          mov    $0x80484e0,%eax
 80483fa:   c7 44 24 04 1c a0 04    movl   $0x804a01c,0x4(%esp) 
```

我可以找到 80483ed 行移动 myhaha 的地址。typeof(ptr + 1) 和 typeof(ptr) 具有相同的汇编代码。typeof 究竟如何获取参数的类型？

# css - CSS 下拉菜单在 IE9 中不起作用

> ID：15754726
> 
> 赞同：0
> 
> 时间：2013-04-02T01:39:25.253
> 
> 标签：css, drop-down-menu, internet-explorer-9

更新：我正在使用 Yahoo 的 SiteBuilder 软件，因为我怀疑问题可能与 doctype 标题有关，所以我在 Google 上搜索了 SiteBuilder。另一个论坛中有人建议将以下内容添加到提问者的网站

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
```

我尝试将其添加到页面 HTML 的顶部。下拉菜单在 IE9 中有效，但在 IE 和 Firefox 中，文本、登录框等都卡在屏幕的左上角。所以它似乎是 Doctype 中的一些东西，但还有其他一些事情正在发生，这让一切变得不合时宜。基于此发展的任何建议？

谢谢！

我将首先声明我是一个完全的新手，当涉及到这些东西时。因此，如果我提出基本问题或需要过于明确的说明，请原谅我。

基本上，我想向我的新网站添加一个下拉导航菜单。我在网上找到了一个代码，经过反复试验，我找到了自己的代码。一切似乎都很好，直到我在 IE9 上测试它。当我将指针悬停在它上面时，下拉菜单不会下拉。它在 Firefox（我的主要浏览器）中运行良好，一位朋友确认它在 Chrome 上运行。

一些谷歌搜索后，我可以看到这是一个相当普遍的问题。我试图找到一个可行的解决方案，但要么建议的修复不起作用，要么我真的不明白他们在说什么。正如我所说，我是一个努力理解这种新语言的新手。

这是网站： http: [//gardenstatelegacy.com/GSL2_Test_Home.html](http://gardenstatelegacy.com/GSL2_Test_Home.html)

这是一个进展中的工作。“订阅”链接适用于 Firefox 和 IE9。“资源”选项卡应该有下拉菜单。当前在该下拉列表中有效的唯一链接是“顾问目录”。我尝试使用 IE9 中的“兼容性视图”选项，但它没有做任何事情。

我正在复制并粘贴我在下面使用的代码。如果有人知道为什么这与 IE 不兼容，请告诉我以及如何修复它。再说一次，我是新手，所以请让它简单一点。预先感谢您的任何帮助！

```
<!DOCTYPE html>
<html>   
  <head> 
   <style type="text/css">      
        body {
            padding: 0; 
            margin: 0;
        }

        #wrap   {
            width: 100%;
            height: 50px; 
            margin: 0; 
            z-index: 99;
            position: relative;
            background-color: #660000;
        }

        .navbar {
            height: 50px;
            padding: 0;
            margin: 0;
            position: absolute;
            border-right: 1px solid #660000;
        }

        .navbar li {
            height: 50px;
            width: 142px; 
            float: left; 
            text-align: center; 
            list-style: none; 
            font: normal bold 12px/1.2em Arial, Verdana, Helvetica;  
            padding: 0;
            margin: 0;
            background-color: #660000;                  
        }

        .navbar a {                         
            padding: 18px 0; 
            border-left: 1px solid #C4BD97;
            border-right: 1px solid #C4BD97;
            text-decoration: none;
            color: white;
            display: block;
        }

        .navbar li:hover, a:hover {
            background-color: #660000;
        }

        .navbar li ul {
            display: none;
            height: 50px;                                   
            margin: 0;
            padding: 0;                             
        }

        .navbar li:hover ul {
            display: block;                                 
        }

        .navbar li ul li {
            background-color: #660000;
        }

        .navbar li ul li a {
            border-left: 1px solid #C4BD97; 
            border-right: 1px solid #C4BD97; 
            border-top: 1px solid #C4BD97; 
            border-bottom: 1px solid #C4BD97; 
        }

        .navbar li ul li a:hover {
            background-color: #660000;
        }
    </style>                            
 </head>
 <body>
   <div id="wrap">
        <ul class="navbar">
            <li><a href="#">Home</a></li>
            <li><a href="#">Sample Issue</a></li>
            <li><a href="http://gardenstatelegacy.com/Subscribe.html">Subscribe</a></li>
            <li><a href="#">Resources</a>
                <ul>
                    <li><a href="#">History Sites/Groups</a></li>
                    <li><a href="#">Speakers Bureau</a></li>
                    <li><a href="http://gardenstatelegacy.com/Professional_Directory.html">Consultant Directory</a></li>
                    <li><a href="#">Links</a></li>
                </ul>         
            </li>
            <li><a href="#">About GSL</a>
                <ul>
                    <li><a href="#" >Mission Statement</a></li>
                    <li><a href="#">Who We Are</a></li>
                    <li><a href="#">News</a></li>
                </ul>         
            </li>
            <li><a href="#">GSL Store</a></li>
            <li><a href="#">Advertise</a></li>
        </ul>
   </div>
 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T01:55:24.343

我有一个类似的问题，我记得我弄乱了 z-index（增加了值）并删除了“float：left”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T01:49:29.020

我没有适合您的解决方案，但我确认它在 IE10 中不起作用，但在 FireFox 19 中起作用（都在 PC 上）。

您可能要检查的一件事是文档类型，因为众所周知，在涉及 CSS 时会导致跨浏览器问题。尝试设置它，看看是否有帮助。

抱歉，我无法提供更多帮助。

# mysql - 无法访问 mysqldump

> ID：15754727
> 
> 赞同：1
> 
> 时间：2013-04-02T01:39:26.003
> 
> 标签：mysql

我在 Program Files/MySQL/MySQL 5.6/bin 下有 mysqldump，但我无法在命令行上访问。我什至尝试插入整个文件目录，但没有奏效。我知道输入 mysqldump 应该在命令行上工作。似乎有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T01:42:09.400

它可能不在您的范围内`PATH`，因此您应该对其进行调整。

如果指定可执行文件的完整路径不起作用，那么您可能弄错了它的位置，或者您需要发布您收到的错误消息。

# c - 从缓冲区读取数据的最佳实践

> ID：15754729
> 
> 赞同：0
> 
> 时间：2013-04-02T01:39:36.150
> 
> 标签：c, buffer, uart

我想收到有关如何从 UART 缓冲区读取数据的想法。更准确地说，我需要一种在缓冲区中找到一些字符串模式的方法。问题是，如果我等待搜索这个字符串，缓冲区会被再次写入，计数器会发生变化，数据可以有也可以没有模式。好吧，我认为这个解释有点难以理解，所以请随时问其他问题。

```
void f(char * buffer) {

char * p;
p = strstr(buffer, "abc");

printf(p);
} 
```

我认为就我而言，UART 是按块写入的，而不是按字符写入的，并且无法说数据已完成，因为它是连续的流。为了更好地说明，它是一个读取 NMEA 协议中的 GPS 数据并尝试从这些数据中获取信息的代码。

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T02:03:52.417

你的问题不清楚，但我看到很多人误解了缓冲区的工作原理，所以我想我可以提供帮助。

根据您的说法，您希望将数据读入缓冲区，并担心它会部分匹配您的搜索字符串。然后，当您阅读其余部分时，您会覆盖第一批数据。

因此，这取决于您如何处理数据。您不需要每次都读入内存的同一部分。缓冲区的全部意义在于它为您提供了可以填充的空间，必要时随机播放然后丢弃。

有很多方法可以有效地使用缓冲区。我会给你一个最容易理解的，虽然它可能不是最有效的：

当您读入缓冲区时，您会维护一个索引（我们称之为它`tail`），以便您知道最后一个字节在哪里。您最多可以读取缓冲区大小的`N`字节。`N`在处理数据时，您最多可以检查`tail`.

要跟踪您已经处理的内容，请维护一个`head`索引。一旦确定需要读取更多数据，就将 和 之间的所有内容`head`移到`tail`缓冲区的开头（使用`memmove`，*NOT* `memcpy`）。您设置`head = 0`和`tail = tail-head`。现在您可以读取`N - tail`更多字节。`tail`自然地，您从索引之后开始读入缓冲区中的一个位置。

如果您希望能够将整个匹配字符串作为连续字节进行测试，这是最简单的缓冲方法。

如果你想更进一步，不需要太多的想象力就能意识到你根本不需要移动数据。你可以到处`head`追逐。`tail`这称为*环形*（或*循环*）缓冲区。这样做的困难是你不能使用普通的字符串匹配，但你自己的滚动并不需要太多。

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T01:46:52.933

您可以接收每个字符并将它们累积（复制）在常规缓冲区中以供以后比较。或者，更好的方法是接收每个字符并保留一个状态变量来告诉您您在比赛中的距离：

```
size_t state = 0;
while( c=get_char_uart() ) {
    if (str_to_match[state] == c)  {
        state++;
        if (state == strlen(str_to_match)) {
            /* success */
        }
    }
    else 
        state = 0;
} 
```

如果您期待重复的字符序列（“abcabd”），它会变得更加棘手。在这种情况下，如果你失败了，`d`你可能需要寻找`c`. 被警告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T01:44:01.813

你能接收所有数据然后处理字符串吗？我认为代码是这样的：

```
char *p_uart = read_from_uart();

void search_string(char *p_uart)
{
    static char last_remain_char[20];
    char new_data[1000] = {0};
    char *p = NULL;
    int n = 0;

    n = snprintf(new_data, sizeof(new_data), "%s%s", last_remain_char, p_uart);
    p = strstr(new_data, "abc");

    strcpy(last_remain_char, new_data + (n - (strlen("abc") - 1)));
} 
```

# java - 如果 NoClassDefFoundError 是由 ClassNotFoundException 引起的，为什么 Java 期望您同时捕获两个 throwable？

> ID：15754730
> 
> 赞同：17
> 
> 时间：2013-04-02T01:39:38.417
> 
> 标签：java, exception, error-handling, throwable

当我运行此代码时，应用程序以 ClassNotFoundException 退出：

```
//uncaught ClassNotFoundException
try
{
    Class<?> clazz = defineClass(null, bytes, 0, bytes.length, null);
    table.put(clazz.getName(), clazz);
}
catch (NoClassDefFoundError e)
{
} 
```

当我尝试编译此代码时，编译器抱怨 ClassNotFoundException 不可访问，因为它不是从 try-catch 语句的 try 子句中抛出的。

```
//Won't compile
try
{
    Class<?> clazz = defineClass(null, bytes, 0, bytes.length, null);
    table.put(clazz.getName(), clazz);
}
catch (ClassNotFoundException e)
{
} 
```

当我运行这段代码时，唯一被捕获的是 NoClassDefFoundError。

```
//catches throwable of type java.lang.NoClassDefFoundError,
//with a java.lang.ClassNotFoundException as its cause
try
{
    Class<?> clazz = defineClass(null, bytes, 0, bytes.length, null);
    table.put(clazz.getName(), clazz);
}
catch (Throwable e)
{
    System.out.println(e.getClass().getName());
    System.out.println(e.getCause().getClass().getName());
} 
```

以下代码将编译并捕获错误（并且只有错误），但它很笨拙：

```
//possible workaround
try
{
    Class<?> clazz = defineClass(null, bytes, 0, bytes.length, null);
    table.put(clazz.getName(), clazz);
    if (1 == 0) throw new ClassNotFoundException(); // we want the code to compile
}
catch (ClassNotFoundException e)
{
    System.out.println("ex");
}
catch (NoClassDefFoundError e)
{
    System.out.println("err");
} 
```

然而，当我编写以下内容时，我可以在没有 catch 子句的情况下摆脱错误原因：

```
//and yet this works just fine...
try
{
    throw new Error(new IOException());
}
catch (Error e)
{
    System.out.println("err");
} 
```

示例 3 会让我得出结论，throwable 是 NoClassDefFoundError。示例 1 会让我得出结论，throwable 是 ClassNotFoundException。然而，示例 2 表明 java 甚至不允许我编写代码来正确捕获 ClassNotFoundException。

就在我即将断定这里的问题是由异常引起的错误时，我运行了前面示例中显示的代码，这表明这不是规则。

有人可以解释一下这里发生了什么吗？

PS：这是堆栈跟踪：

```
 java.lang.NoClassDefFoundError: com/my/pckage/MyClass
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
at Main$MyClassLoader.getClasses(Main.java:78)
at Main.main(Main.java:109)
 Caused by: java.lang.ClassNotFoundException: com.my.pckage.MyClass
at java.lang.ClassLoader.findClass(ClassLoader.java:522)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
... 4 more 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-02T03:10:09.337

所以，你误解了你的堆栈跟踪。

```
java.lang.NoClassDefFoundError: com/my/package/MyClass
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
    at Main$MyClassLoader.getClasses(Main.java:78)
    at Main.main(Main.java:109)
Caused by: java.lang.ClassNotFoundException: com.my.package.MyClass 
```

您的代码正在生成一个`NoClassDefFoundError`. ***根本原因***`ClassNotFoundException`是一个。请记住，这`cause`是 Throwable 类的一个属性，并且在打印堆栈跟踪时，Java 将显示有关直接异常及其潜在原因的信息。很难说为什么该`define`方法在内部失败，但可以肯定的是 - 您不能`package`在包名称中使用关键字。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-02T02:41:30.543

NoClassDefFoundError 在找到类的 .class 时发生，但无法从该 .class 构造该类。

有几种不同的场景经常发生，还有一些更晦涩的场景。

*   .class 文件包含与类文件名/包不匹配的名称（和包）
*   找不到验证和初始化类所需的类
*   类初始化期间发生错误

在这些场景中的大多数情况下，还有一个更早发生的错误或异常，被类加载器捕获，并发出新错误信号。

目前尚不清楚上述异常回溯中究竟发生了哪种情况，但我猜测某种名称不匹配。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T02:02:53.787

`NoClassDefFoundError`实际上是一个子类，`Error`这些不应该被捕获。有关详细信息，请参阅[错误的文档](http://docs.oracle.com/javase/6/docs/api/java/lang/Error.html)。以下重要说明：

> Error 是 Throwable 的子类，表示合理的应用程序不应尝试捕获的严重问题。大多数此类错误是异常情况。
> 
> 方法不需要在其 throws 子句中声明任何可能在方法执行期间抛出但未被捕获的 Error 子类，因为这些错误是不应该发生的异常情况。

出于这个原因，我认为你应该仔细看看你的代码，看看你做错了什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-17T14:22:34.647

```
//and yet this works just fine...
try
{
    throw new Error(new IOException());
}
catch (Error e)
{
    System.out.println("err");
} 
```

将其替换为：

```
//and yet this still works fine...
try
{
    throw new NoClassDefFoundError(new ClassNotFoundException());
}
catch (Error e)
{
    System.out.println("err");
} 
```

试试 e.printStackTrace() 你会看到类似的输出。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-02T02:15:50.347

正如已经指出的那样，Java 不允许您处理错误。

无论如何，我不确定您尝试解决这些异常（和错误）的原因是什么，但这些是程序员并不真正需要担心的事件（大多数时候）。对我来说，这是您的代码/项目中其他地方存在问题的症状。如果系统抛出 a `ClassNotFoundException`，并且它允许您捕获它，您将如何处理它？还是您更愿意解决应用程序所需的某个类不在类路径中的实际问题？

此外，您可能需要检查[NoClassDefFoundError 和 ClassNotFoundException 之间的区别，](https://stackoverflow.com/questions/1457863/what-is-the-difference-between-noclassdeffounderror-and-classnotfoundexception)以更好地解决您的问题。

# ssms - 导航到 SSMS 中的特定数据库

> ID：15754737
> 
> 赞同：1
> 
> 时间：2013-04-02T01:41:55.440
> 
> 标签：ssms

有没有办法直接打开特定数据库中的对象而不在 SQL 服务器上加载整个数据库列表？

我尝试输入`Database=[name]`并`Initial Catalog=[name]`输入附加连接参数，但这没有用。

我还尝试在“连接属性”选项卡上设置`[name]`in`Connect to database`参数，但这也不起作用。

有什么办法吗？

# html - 如何更改键盘布局

> ID：15754744
> 
> 赞同：0
> 
> 时间：2013-04-02T01:43:35.937
> 
> 标签：html, jquery-mobile, mobile, keyboard

我正在使用 jQuery Mobile 1.2.0 来开发我的网络应用程序。主页由解释应用程序的文本和两个文本字段组成，让用户可以输入一些信息： 现在我在 iPhone 上启动应用程序，我有点想知道。如果我编辑第一个字段，那么键盘将在右下角显示一个带有“打开”标题的按钮。如果我编辑第二个字段，那么键盘将在右下角显示一个带有“搜索”标题的按钮。如何更改字幕以及支持哪些键盘布局？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T01:56:55.227

我很确定弹出的键盘与 html5 输入类型属性有关，与 jquery mobile 无关。例如：

```
 <input type="url" /> 
```

应返回带有专用 .com 按钮的键盘

textarea 应该显示 return 而不是 go

电子邮件应显示专用的 @ 符号键

Number 将返回数字键盘，依此类推

只需确保您的目标受众浏览器类型支持 html5 输入类型

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T04:58:24.390

不仅在 iPhone 中，在 Android 中基于输入元素的`type`键盘也会采用不同的形状。

[您可以在此链接](http://www.w3schools.com/html/html5_form_input_types.asp)中查看一些可用的文本输入类型，但请记住，并非所有浏览器都支持所有输入类型。

下面的一些例子。

```
// To get search button
<input type="search" name="mySearch">
// to get numbers only
<input type="numbers" name="myNumber"> 
```

jQuery Mobile 文档有关于这个字段的更多信息。在此处查看[官方文档](http://view.jquerymobile.com/1.3.0/docs/widgets/textinputs/)。

希望这足以让您开始。

# c++ - 屏幕输出有什么问题？

> ID：15754745
> 
> 赞同：0
> 
> 时间：2013-04-02T01:43:56.523
> 
> 标签：c++

代码运行良好，一切正常；

```
printf("\nEnter number of hours ");
scanf("%f", &hours);

{
    if (hours>=5) {
        calc_charge=minimum_fee;
        bill = hours * minimum_fee;
        printf("%i", &bill);
    }
    else
        if(hours>=8) {
            bill=hours*mini_fee;
            printf("%i", &bill);
        }
        else
            if (hours <= 24) {
                bill = hours*maximum_fee;
                printf("%i", &bill);
            }

    while (hours >= 4) {
        bill = hours*minimum_fee;
        printf("%i", &bill);
    } 
```

但输出是

> 34525160134525160134525160134525160134525160134525160134525160134525160134525160134525160134525160134525160134525160134525160134525160134525160134525160134525160134525160134525160134525160134525160134525160134525160134525160134525160134525160134525160134525160134525160134525160134525160134525160134525160134525160134525160134525160134525160134525160134525160134525160

我似乎找不到任何问题，代码只是没有进行计算。为什么不？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-02T01:44:45.937

删除`&`所有 printfs。您想打印变量的值而不是其地址。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-16T14:22:02.947

除了`&`按照 Armin 的建议删除之外，它还可能有助于`\n`在您的 printfs 中添加换行符或至少空格，例如：

```
printf("%i\n", bill); 
```

否则，您的号码将彼此相邻打印。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-16T15:01:13.717

您的代码中有一个无限循环：

```
while (hours >= 4) {
    bill = hours*minimum_fee;
    printf("%i", &bill);
} 
```

也许您只想打印一次：

```
 bill = hours*minimum_fee;
    printf("%i", &bill); 
```

或者也许你想写`if`而不是`while`？（只是猜测，不是建议）

# javascript - 使用可拖动，我怎样才能获得元素行进的距离？

> ID：15754757
> 
> 赞同：0
> 
> 时间：2013-04-02T01:45:51.597
> 
> 标签：javascript, jquery

我试图提取一个元素自从我拿起它以来已经走过的距离。我试图抓住传递给处理程序的事件的`offset`和，但它们总是为零......`position``target``stop`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T01:52:52.957

`drag`您可以看到回调中的行进方向，如下所示：

```
var diffX = 0;
var diffY = 0;

$('#some_div').draggable({
    drag: function(e, ui) {
        var start = ui.originalPosition,
            end = ui.position;

        diffX = end.left - start.left;
        diffY = end.top - start.top;
    },
    stop: function(e, ui) {
        console.info('Dragged: X = %o, Y = %o', diffX, diffY);
    }
}); 
```

# windows - Windows shell 控制台中的 shift-insert ctrl-insert

> ID：15754758
> 
> 赞同：1
> 
> 时间：2013-04-02T01:45:56.093
> 
> 标签：windows, shell, copy-paste

我想使用击键在 Windows 7 中的 shell 窗口和编辑器之间进行复制和粘贴（例如，在运行 irb 和 emacs 的 cygwin shell 之间）。`Ctrl-insert`并且`Shift-insert`会很好地工作，但是当我在我的 shell 中使用它们时，它们只是打印出来`;5~`，`;2~`而不是实际复制和粘贴。有没有办法让他们实际复制并粘贴到 shell 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T23:00:00.793

我实际上决定使用[Console](http://sourceforge.net/projects/console/)，一个 shell 替代品。它允许我分配我想要复制/粘贴的任何击键。我希望我很久以前就知道了。到目前为止效果很好。

# ruby - 我们何时使用 ruby 模块与使用类组合？

> ID：15754768
> 
> 赞同：9
> 
> 时间：2013-04-02T01:46:53.413
> 
> 标签：ruby, inheritance, multiple-inheritance, composition, mixins

之前有人问过类似的问题，但我特别问的是使用组合作为使用模块 mixins 的替代方法。

```
class Helper
  def do_somthing
  end
end 
```

如果我需要“使用”一个类但不继承它，我只需编写它并使用它。

```
class MyStuff
  def initialize
    helper = Helper.new
    helper.do_something
  end
end 
```

我为什么要为此创建一个模块：

```
 module Helper
   def do_something
   end
 end

class MyStuff
  include Helper
end 
```

我看到的唯一区别是，如果我使用模块，周围不会有很多`Helper`物体。但是我没有看到周围有更多物体而不是更大物体的任何东西。

此外，我不知道将来是否需要对它进行子类化。那么我如何决定我的库的用户是想要使用模块 mixin，还是想要使用组合呢？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-12-18T14:39:44.667

`Helper`当和类之间的关系`MyStuff`是所有权关系时，使用**组合**。这被称为**“拥有”**关系。例如，假设您有`Person`一个班级和一个`Car`班级。你会使用组合，因为一个人有车：

```
class Person
  def initialize
    @car = Car.new
  end
end

class Car
  def accelerate
    # implementation
  end
end 
```

当`Helper` **“表现得像”** `MyStuff`时，使用**模块 mixin**。`Helper`，在这种情况下，扮演的**角色**`MyStuff`。**这与“is-a”关系**有点不同，这意味着您应该使用**传统继承**。例如，假设我们有一个`Person`类和一个`Sleeper`模块。一个人有时会扮演睡眠者的角色，但其他物体也是如此——例如`Dog`，，`Frog`甚至可能`Computer`。这些其他类中的每一个都代表可以睡觉的东西。

```
module Sleeper
  def go_to_sleep
    # implementation
  end
end

class Person
  include Sleeper
end

class Computer
  include Sleeper
end 
```

Sandi Metz 的 Practical [*Object-Oriented Design in Ruby*](http://www.poodr.com/)是这些主题的*绝佳*资源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T03:13:47.377

这是“<a href="http://en.wikipedia.org/wiki/Duck_typing" rel="nofollow">Duck Typing”的问题。如果您希望您的班级表现得像一个`Helper`，那么您就这样做了`include`。无论您是要[封装](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29) `Helper`行为，正确的选择是`require`.

混[`Enumerable`](http://ruby-doc.org/core-2.0/Enumerable.html)在一起，你通过实现唯一的方法给你的类大量的`each`方法。包装`Array`您可能会向其他人隐藏迭代并将其仅用于保存您的数据。反之亦然。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T02:24:48.083

模块 mixin 更像是多重继承，所以遵循通常的继承与组合规则——is-a 或 has-a。顺便说一句，它是`include Helper`，不是`require 'Helper'`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T02:33:58.917

有几点我可以分享：

*   如果你需要在不同的类和模块中共享共同的行为，你应该把它做成模块，以便以后你可以`include`在任何你喜欢的地方使用模块。它也将有助于测试，因为它已经干了。

*   在责任的情况下，您可以将其制成新的模块，以明确理解并提高代码库的可读性。这将有助于减少应该易于遵循和维护的主要类的大小。

您可能会注意到一件事，它为您的where本身`include`添加了功能。`instance``extend``Class`

# java - 如何从 java servlet 发送带有变量的 HTML 电子邮件？

> ID：15754770
> 
> 赞同：0
> 
> 时间：2013-04-02T01:47:13.000
> 
> 标签：java, html, servlets

我目前有一个用 Java 编码的服务器（一个亚马逊 EC2 实例），它有许多 servlet 来执行各种 Web 服务。到目前为止，我一直在使用如下代码发送邀请电子邮件：

```
public void sendInvitationEmail(String nameFrom, String emailTo, String withID)
        {

            SendEmailRequest request = new SendEmailRequest().withSource("invitation@myserver.com");

            List<String> toAddresses = new ArrayList<String>();
            toAddresses.add(emailTo);
            Destination dest = new Destination().withToAddresses(toAddresses);
            request.setDestination(dest);

            Content subjContent = new Content().withData("My Service Invitation Email");
            Message msg = new Message().withSubject(subjContent);

            String textVer = nameFrom +" has invited you to try My Service.";
            String htmlVer = "<p>"+nameFrom+" has invited you to try My Service.</p>";
            // Include a body in both text and HTML formats
            Content textContent = new Content().withData(textVer);
            Content htmlContent = new Content().withData(htmlVer);
            Body body = new Body().withHtml(htmlContent).withText(textContent);
            msg.setBody(body);

            request.setMessage(msg);

            try {           
                ses.sendEmail(request);
            }catch (AmazonServiceException ase) {
                handleExceptions(ase);
            } catch (AmazonClientException ace) {
                handleExceptions(ace);  
            }
        } 
```

我已经成功发送了电子邮件，其中包含基于我的代码生成的外部变量的人名。我的问题是，我将如何处理更复杂的 HTML 电子邮件？我已经生成了一个布局更复杂的 HTML 文件，但我仍然需要通过我的代码修改这些变量。该文件是一个 HTML，所以我认为（不确定）我可以将它作为一大串文本读取，然后将其添加到 htmlVer 字符串中。但我想知道是否有更简单的方法来读取 HTML 文件，只需更改一些变量，然后简单地将其添加到 Amazon SES 的内容部分。

我在这里采取了错误的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T02:52:12.700

您可以使用 Thymeleaf 之类的模板引擎来处理 html 并注入属性。

就这么简单：

```
ClassLoaderTemplateResolver resolver = new ClassLoaderTemplateResolver();
resolver.setTemplateMode("HTML5");
resolver.setSuffix(".html");
TemplateEngine templateEngine = new TemplateEngine();
templateEngine.setTemplateResolver(resolver);
final Context context = new Context(Locale.CANADA);
String name = "John Doe";
context.setVariable("name", name);

final String html = templateEngine.process("myhtml", context); 
```

有一个`myhtml.html`文件：

```
<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-3.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <title>My first template with Thymeleaf</title>
</head>
<body>
    <p th:text="${name}">A Random Name</p> 
</body>
</html> 
```

引擎处理完 HTML 文件后，`html`java 代码中的变量将包含上面的 HTML，但会将`<p>`元素的内容替换为您在上下文中传递的值。

如果您使用 DreamWeaver 之类的工具来制作 html，这不是问题。您可以使用文本编辑器并`th:text`稍后添加（或其他）属性。这是 Thymeleaf 的优势之一，您可以分别制作模板和 java 代码，并在需要时加入它们。

# html - 网站不显示图像或加载外部 CSS、JS

> ID：15754774
> 
> 赞同：1
> 
> 时间：2013-04-02T01:47:51.400
> 
> 标签：html, validation, hyperlink, live, brokenimage

我为一所学校建立的网站上周上线了，虽然在本地看起来不错，但在网上却很糟糕。

这是它的链接：[http ://www.centennial-s.schools.nsw.edu.au/](http://www.centennial-s.schools.nsw.edu.au/)

我发现的问题是：

1.  不显示图像。
2.  未加载 CSS 文件。
3.  未加载 JS 文件。
4.  内部链接都不起作用（外部链接很好）。

事实上，只要 index.html 链接到自身内部的某些东西，它就不起作用。我什至无法离开 index.html 来测试其他页面。

我已经与教育 IT 支持部门进行了交谈，他们直言不讳地告诉我代码无效，我应该对其进行验证。我有尽可能多的，我现在得到的唯一错误是：

```
"Element text not allowed as child of element a in this context. (Suppressing further errors from this subtree.)" 
```

关于页脚中的一些文本链接。

我不确定如何解决此错误。但是有人可以告诉我这是否足以彻底破坏页面上的每个链接？

如果是这样，我该如何使它有效？以及如何让页面实时运行？

随意验证网站：http: [//validator.w3.org/](http://validator.w3.org/)

提前致谢，

山姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T01:56:14.787

这不是验证问题；即使 HTML 未验证（即使 CSS 最终无法正常工作），链接也应该可以工作并且 CSS 应该加载。

当你说：

> 事实上，只要 index.html 链接到自身内部的某些东西，它就不起作用。我什至无法离开 index.html 来测试其他页面。

找出个别页面无法加载的原因。您应该能够浏览链接并使用绝对 URL 加载各个页面。例如，尝试获取[http://www.centennial-s.schools.nsw.edu.au/css/indexStyle.css](http://www.centennial-s.schools.nsw.edu.au/css/indexStyle.css) - 你应该获取 CSS，而不是索引页面。

寻找某种可能导致服务器提供错误文件的重写或错误处理。

更新：我做了更多的探索并确认无论您请求哪个文件，服务器总是发回默认的 HTML 页面。一定要检查我上面提到的项目，并确认您实际上可以加载 CSS、JS、图像等。这可能不是您的代码或该代码的验证，而是服务器问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T02:04:58.907

如果您只是想让它进行验证，请删除`<text>`标签。我查看了 HTML4 和 HTML5 的元素列表，没有找到任何`text`元素。像这样的一些小错误可能会导致多个验证错误。

文本元素导致 12 个验证错误。

HTML4 元素：

[http://www.w3.org/TR/html4/index/elements.html](http://www.w3.org/TR/html4/index/elements.html)

HTML5 元素：

[http://www.w3.org/TR/html-markup/elements.html](http://www.w3.org/TR/html-markup/elements.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T02:00:15.913

这似乎是一个重写问题，因为每个 URL 都会打开相同的页面。这绝对不是 HTML 验证问题。服务器将自己报告为 IIS 7.5...因为听起来您自己无权访问它，所以您应该告诉 IT 支持负责人服务器配置错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T02:05:19.340

[http://www.centennial-s.schools.nsw.edu.au/SpryAssets/SpryCollapsiblePanel.css](http://www.centennial-s.schools.nsw.edu.au/SpryAssets/SpryCollapsiblePanel.css)不存在。 [http://www.centennial-s.schools.nsw.edu.au/images/buttons/contactButton.png](http://www.centennial-s.schools.nsw.edu.au/images/buttons/contactButton.png)不存在。

是导致重定向的 404 响应，还是您有永久重定向以使所有内容都返回到您的主页。

# api - 使用批处理脚本从 XML 数据中读取标签

> ID：15754775
> 
> 赞同：0
> 
> 时间：2013-04-02T01:48:18.450
> 
> 标签：api, batch-file, cmd, wget

我愿意为我正在尝试做的事情提出建议，但结束游戏：使用 Windows 'wget' 命令从 weatherbug 下载天气 API 并获取该 xml 数据并将其存储到离线 xml 文件中，然后使用批处理脚本读取它.

我可以使用以下方法使其正常工作：

```
for /F "tokens=2 delims=><" %%i IN ('findstr /L "aws:temp>" wb_weather.xml') 
    do set cTemp=%%i 
```

但只有 XML 的格式如下：

```
<aws:temp units="&deg;F">43.9</aws:temp>
<aws:temp-high units="&deg;F">62</aws:temp-high>
<aws:temp-low units="&deg;F">41</aws:temp-low>
<aws:temp-rate units="&deg;F/h">0</aws:temp-rate> 
```

一旦我使用“wget”命令从网站上获取数据，数据看起来像这样（假设都是一行）：

```
<aws:temp units="&deg;F">43.9</aws:temp><aws:temp-high units="&deg;F">62</aws:temp-high><aws:temp-low units="&deg;F">41</aws:temp-low><aws:temp-rate units="&deg;F/h">0</aws:temp-rate> 
```

并且我上面的代码将无法正常工作。

我对整个 API 和批处理脚本编码非常陌生，但我使用批处理脚本，因为该项目的下一部分（分类）将需要批处理脚本格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T04:25:43.180

```
for /F "tokens=2 delims=><" %%i IN (
'type wb_weather.xml^|sed s/\x3e\x3c/\x3e\x0d\x0a\x3c/g^|findstr /L "aws:temp>"'
) DO ECHO %%i 
```

可以为您工作 - 如果您可以使用 SED。

SED 替换`><`为`>[CR][LF]<`呈现您认为有效的格式。

谷歌 GNU SED...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T04:58:53.010

你写道：**`and the code I have from the above will not work correctly`**。

请问，您对这一点做过测试吗？

您的代码指示从以“aws:temp>”结尾的唯一行中获取第二个标记。但是，如果其他行按照您上面显示的顺序与第一行组合，那么您想要的数据仍放置在包含前四行的新长行的*第二个标记处。*这意味着您的原始代码应该仍然可以正常工作！

如果您想要的数据放在另一行中，您只需更改“tokens =”数字即可将数据放在长行中的新位置。例如，“tokens=5”将获取第二行中的最高温度数据。

如果数据文件只包含四行的结果，那么你不需要使用`findstr`命令！

安东尼奥

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T16:41:45.233

*如果您可以将 XML 解析为*XML，而不仅仅是为了获取数据而必须刮掉的一堆垃圾，那么您将拥有更多的灵活性。为此，请允许我建议一个混合批处理/JScript 解决方案。

这具有额外的好处，使您能够通过`XMLHTTP`请求获取 XML 提要，消除对`wget`或类似的依赖。

将以下文件另存为`weather.bat`，根据需要修改API代码和邮政编码，试一试。

```
@if (@a==@b) @end /*

:: batch script portion

@echo off
setlocal

set "apicode=A1111111111"
set "zipcode=55555"
set "url=http://api.wxbug.net/getLiveWeatherRSS.aspx?ACode=%apicode%&zipCode=%zipcode%&UnitType=0&OutputType=1"

for /f "tokens=1*" %%a in ('cscript /nologo /e:jscript "%~f0" "%url%" ^|^| goto :EOF') do (
    set "%%a=%%b"
)

echo Temp: %awstemp%
echo High: %awstemphigh%
echo Low: %awstemplow%
echo Rate: %awstemprate%

echo;

:: show all variables beginning with aws and their values
set aws

goto :EOF

:: JScript portion */

function die(txt) {
    WSH.StdErr.WriteLine(txt.split(/\r?\n/).join(' '));
    WSH.Quit(1);
}

var x=new ActiveXObject("Microsoft.XMLHTTP");
x.open("GET",WSH.Arguments(0),true);
x.setRequestHeader('User-Agent','XMLHTTP/1.0');
x.send('');
var timeout = 60;
for (var i = 20 * timeout; x.readyState != 4 && i >= 0; i--) {
    if (!i) die("Timeout error.");
    WSH.Sleep(50)
};

if (!x.responseXML.hasChildNodes) die(x.responseText);

// Note: These dom nodes are appropriate for getLiveWeatherRSS.aspx and
// getLiveCompactWeatherRSS.aspx.  For parsing other feeds, change the
// root XPath node appropriately.
var dom = x.responseXML, dom = dom.selectSingleNode('//aws:ob') || dom.selectSingleNode('//aws:weather');

var out = [];
for (var i=0; i<dom.childNodes.length; i++) {
    if (dom.childNodes[i].hasChildNodes) {
        var item = dom.childNodes[i].nodeName.replace(/\W/g, '');
        var value = dom.childNodes[i].text;
        if (/rate$/.test(item) && value && value > 0) value = '+' + value;
        var units = dom.childNodes[i].getAttribute('units') || '';
        out.push(item + ' ' + value + units.replace('&deg;','°').replace('"',''));
    }
}
WSH.Echo(out.join('\n')); 
```

# php - 具有用户友好网址的网站结构

> ID：15754776
> 
> 赞同：0
> 
> 时间：2013-04-02T01:48:19.250
> 
> 标签：php, regex, .htaccess, codeigniter, web

好的，所以我知道这个问题的标题有点含糊，之前必须回答过，但是我花了几个小时研究各种解决方案，但没有一个能完全回答我要找的东西。

好的，所以我制作了一个导航结构类似于此的网站 -

### 导航结构

```
Home
Products
    Overview
        Feature sub-page
        Feature sub-page
        Feature sub-page
    Videos
    Demonstrations
Training
... 
```

所以到目前为止我的想法是有一个文件结构：

### 文件结构

```
resources/
    config.php
public_html/
   index.php
   menu.php
   head.php
   footer.php
   css/
   images/
   js/
   pages/
       home/
           index.php
           home.php
       products/
           index.php
           sub-page.php
           sub-page.php
           videos.php
           demonstrations.php
       training/
           index.php
       ... 
```

所以我使用带有路径变量的 config.php 来维护链接。对于我使用的每个“类别”

```
pages/CATEGORY/index.php?page=XXX 
```

我真正想要的是一种构建我的文件或设置 .htaccess 的方法，以便它提供干净的 url 看起来像：

```
products home page -  mysite/products/
products video page - mysite/videos  OR  mysite/products/videos
products sub-pages -  mysite/products/sub-page 
```

能够屏蔽我的实际文件结构，并且当 products/index.php 之类的页面具有 $_GET 变量时，可以将 url 转换为：

```
mysites/products/sub-page 
```

我当然看过 mod_rewrite，并且正在考虑类似

```
RewriteRule products/sub-page products/index.php?page=sub-page-name 
```

可能有效，但不会回答屏蔽文件夹结构（即“页面”）。这将需要使用正则表达式的每个“类别”至少有一个规则

澄清一下：所有 pages/categories/index.php 包含所有到级别的 .php 部分（头、菜单、页脚等），顶级 index.php 只包含 pages/home/index.php

注意：我还需要支持404页面进入子页面，这样如果我确实使用

```
index.php?page=sub-page-name 
```

并且子页面实际上并不存在，它显示有效消息，甚至只是恢复到默认 index.php 内容（根据现有文件或“批准值”列表对变量进行条件检查）

-编辑-

所以我现在看的解决方案是：

```
RewriteRule ^(.*)/products/$ http://.../public_html/pages/products/index.php
RewriteRule ^(.*)/products/videos$ http://.../public_html/pages/products/index.php?page=videos
RewriteRule ^(.*)/products/demonstrations$ http://.../public_html/pages/products/index.php?page=demonstrations 
```

但这只能解决部分问题（而且对我来说有点太具体了，但如果绝对需要的话，我可以忍受）

我在做子页面时怎么样，这个数字非常大并且可能会发生变化。我可以使用而不是为每个子页面执行 1 条规则

```
RewriteRule ^(.*)/products/info/(.*)$ http://.../public_html/pages/products/index.php?product=XXX 
```

即使我让用户自己传入变量“？product”，我会写

```
RewriteRule ^(.*)/products/?product(.*)$ http://.../public_html/pages/products/index.php?product=$1 
```

或类似的？

另外，我需要这两种方式都可以使用，因此如果他们使用完整的 url（即 with `?page`），它会更改为被屏蔽的 url

-编辑-

所以我现在使用 CodeIgniter php 框架，它是一个非常轻量级的 mvc 框架，它不会对你强制执行太多严格的规则，它还允许我将它放在我的 routes.php 中：

```
$route['products/info/(:any)'] = "products/view_info/$1";
$route['(:any)/(:any)'] = "$1/view/$2";
$route['(:any)'] = "$1/view"; 
```

其中，当在我的 .htaccess 中与此结合使用时：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* index.php/$0 [PT,L] 
```

解决了我的问题。

我现在并没有太严格地使用它，在我的videos.php页面中仍然有一堆javascript控制我的youtubeapi请求，但我可以将它转换为model.php和jquery ajax hybred，如果我能得到我的model.php轻松融入，而不会导致我将所有 api 处理代码重写为 php

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T02:43:21.523

使顶部 index.php 控制所有页面。因此 /products/sub-page 将被重写为 /index.php?page=%2Fproducts%2Fsub-page。我认为您的重写规则如下所示：

```
RewriteRule ^(.*)$ index.php?page=$1 
```

然后你的 index.php 看起来像这样：

```
include( 'pages'.$_GET['page'] ); 
```

你可能需要在它之前有一些规则来排除对你的 css、图像和 javascript 的重写。

# javascript - 循环播放一系列视频

> ID：15754785
> 
> 赞同：1
> 
> 时间：2013-04-02T01:49:45.357
> 
> 标签：javascript, loops, video

我对javascript真的很陌生。我已经尝试了很多不同的方法，但我似乎无法让它工作。我有 4 个非常短的视频，我想一个接一个地循环播放。基本上，只要视频结束，下一个视频就会开始（它们是一组从上一个动画开始的动画）。我尝试了很多不同的方法，但似乎无法让它发挥作用。有谁知道我会怎么做？

我找到了这个

[http://www.mindfiresolutions.com/How-to-play-multiple-videos-in-a-loop-using-HTML5-and-JavaScript-1799.php](http://www.mindfiresolutions.com/How-to-play-multiple-videos-in-a-loop-using-HTML5-and-JavaScript-1799.php)

这基本上是我想做的，但它似乎对我不起作用。

编辑：我设法用这种方法做到了。不过一定有更简单的方法

```
var myVideo = _V_("myvideoplayer");
var banners = new Array("banner1_mov","banner2_mov","banner3_mov","banner4_mov");
var count = 0

function onComplete(){
    count++;
    var myVideo1 = document.getElementsByTagName('video')[0];
    var videoPlaying = myVideo1.currentSrc;
    var ext = videoPlaying.substr(videoPlaying.lastIndexOf("."));
    myVideo1.width = '1140';
    myVideo1.src = "video/"+banners[count]+ext;

    myVideo.load();
    myVideo.play();
    myVideo.removeEvent("ended", onComplete);
};

myVideo.addEvent("ended", myHandler);

function myHandler() {
if(count == 3){
count = -1;
onComplete();
}
else{
onComplete();
}

       } 
```

# php - 如何在 SQL 中加入 2 个表

> ID：15754787
> 
> 赞同：0
> 
> 时间：2013-04-02T01:49:58.593
> 
> 标签：php, sql, join, mysqli

```
$results = mysqli_query($con,"SELECT * FROM dayalpha WHERE d_id= '".$_POST['dtb']."'");

echo "<table border='0'>
<tr>
<td>Day Name</td>
<td>Type</td>
<td>Alphabet</td>
</tr>";

while($row = mysqli_fetch_array($results))
 {
  echo "<tr>";
  echo "<td>" . $row['dayname'] . "</td>";
  echo "<td>" . $row['type'] . "</td>";
  echo "<td>" . $row['alpha'] ."</td>";
  echo "<td>" . $row['alpha1'] ."</td>";
  echo "<td>" . $row['alpha2'] ."</td>";
  echo "<td>" . $row['alpha3'] ."</td>";
  echo "<td>" . $row['alpha4'] ."</td>";
  echo "<td>" . $row['alpha5'] ."</td>";
  echo "<td>" . $row['alpha6'] ."</td>";
  echo "</tr>";
  }
echo "</table>"; 
```

在这里，我显示了我的 dayalpha 表中的字母。每个字母表都应该链接到 babyname 表中的多个 bname，只要 alpha == iname （即 name initial 存储在 babyname 表中）。

```
 -----------------
    My Babyname Table
    -----------------
    iname    bname    gender    mean

    K        Komal    Female    Tender
    K        Kiran    Male      Ray
    K        Kamlesh  Male      God
    N        Nityesh  Male      Yash

    -----------------
    My dayalpha table 
    -----------------
    dayname   type     alpha  alpha1  alpha2....
    Monday    vyainjan K      G       D
    Wednesday vyainjan T      D       N 
```

如何将 dayalpha 中的值链接到 babyname 的多个值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T02:04:14.747

如果您按原样保留表，则此 SQL 可能会起作用。

```
SELECT b.*
FROM babyname a
   INNER JOIN dayalpha b ON (a.iname = b.alpha OR a.iname = b.alpha2 OR a.iname = b.alpha3 ...)
WHERE b.dayname = 'Monday' 
```

据我了解您的问题，这是正确的答案。

# php - 在api调用中使用输入表单作为变量，php

> ID：15754788
> 
> 赞同：0
> 
> 时间：2013-04-02T01:50:04.383
> 
> 标签：php, api, user-variables

基本上我正在做的是获取一个用户定义的变量，在这种情况下是鸟的名字，然后将该变量插入到 url api 调用中。一旦我得到它，我就知道如何解析和回显数据，我似乎无法找到将部分 url 设置为用户定义变量的任何内容。这是我到目前为止所拥有的

```
input type="text" name="idtest" value="<?php echo htmlspecialchars($searchbird); ?>" />
$url = "http://ebird.org/ws1.1/data/obs/region_spp/recent?rtype=subnational2&r=US-AZ-013&sci=$searchbird";
$xml = simplexml_load_file($url);

    foreach ($xml->result->location as $location):
        $locname=$location->{'loc-name'};
        $lat=$location->{'lat'};
        $lng=$location->{'lng'};
        $locid=$location->{'loc-id'};
echo " blah blah"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T01:57:22.403

假设`$searchbird`是用户提交的数据：

```
$url = "http://ebird.org/ws1.1/data/obs/region_spp/recent?" . http_build_query(array(
  'rtype' => 'subnational2',
  'r' => 'US-AZ-013',
  'sci' => $searchbird,
)); 
```

这将确保`$searchbird`在构造的 URL 中正确转义。

# android - 如何使图像视图进入曲线

> ID：15754793
> 
> 赞同：1
> 
> 时间：2013-04-02T01:50:21.287
> 
> 标签：android, android-layout, android-intent, android-widget, android-animation

我是android新手...我想做一个摩天轮游戏，我需要在轮子中移动摩天轮...我使用：

```
 TranslateAnimation transAnimation1 = new TranslateAnimation(0, 145, 0, 275);
          transAnimation1.setDuration(6000);
          ChairA1.startAnimation(transAnimation1);

          TranslateAnimation transAnimation2 = new TranslateAnimation(0, 50, 0, 50);
          transAnimation2.setDuration(6000);
          ChairA2.startAnimation(transAnimation2);

          TranslateAnimation transAnimation3 = new TranslateAnimation(0, 50, 0, 50);
          transAnimation3.setDuration(6000);
          ChairA3.startAnimation(transAnimation3);

          TranslateAnimation transAnimation4 = new TranslateAnimation(0, 50, 0, 50);
          transAnimation4.setDuration(6000);
          ChairA4.startAnimation(transAnimation4);

          TranslateAnimation transAnimation5 = new TranslateAnimation(0, 50, 0, 50);
          transAnimation5.setDuration(6000);
          ChairA5.startAnimation(transAnimation5);

          TranslateAnimation transAnimation6 = new TranslateAnimation(0, 50, 0, 50);
          transAnimation6.setDuration(6000);
          ChairA6.startAnimation(transAnimation6);

          TranslateAnimation transAnimation7 = new TranslateAnimation(0, 50, 0, 50);
          transAnimation7.setDuration(6000);
          ChairA7.startAnimation(transAnimation7);

          TranslateAnimation transAnimation8 = new TranslateAnimation(0, 50, 0, 50);
          transAnimation8.setDuration(6000);
          ChairA8.startAnimation(transAnimation8); 
```

我的摩天轮上有 8 把椅子，但问题是摩天轮是圆形的，我无法在曲线目的地制作 ImageView（椅子）……有人能帮我吗……我真的需要帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T02:24:21.640

这是代码。它写得不好，但它完成了工作。不要问我椅子的初始定位是怎么做的。我只是使用了RelativeLayout 并猜测了边距。为了让这个动画在不同的手机上看起来漂亮并正确对齐，你还有很多工作要做。

这是`MainActivity.java`

```
package com.example.ferriswheel;

import android.animation.ObjectAnimator;
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.animation.Animation;
import android.view.animation.LinearInterpolator;
import android.widget.ImageView;
import android.widget.RelativeLayout;

public class MainActivity extends Activity {
    RelativeLayout ferrisWheelLayout;
    ObjectAnimator spin;
    ImageView chairView1, chairView2, chairView3, chairView4;
    ObjectAnimator counterSpin1, counterSpin2, counterSpin3, counterSpin4;
    boolean currentlySpinning;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    public void onToggleClicked(View view) {
        if (currentlySpinning) {
            stopAnimation(view); 
            currentlySpinning = false;
        } else {
            startAnimation(view);
            currentlySpinning = true;
        }
    }

    public void stopAnimation(View view) {
        spin.cancel();
        counterSpin1.cancel();
        counterSpin2.cancel();
        counterSpin3.cancel();
        counterSpin4.cancel();  
    }

    public void startAnimation(View view) {
        chairView1 = (ImageView) findViewById(R.id.chair1);
        chairView2 = (ImageView) findViewById(R.id.chair2);
        chairView3 = (ImageView) findViewById(R.id.chair3);
        chairView4 = (ImageView) findViewById(R.id.chair4);
        ferrisWheelLayout = (RelativeLayout) findViewById(R.id.parentWheelLayout);

        spin = ObjectAnimator.ofFloat(ferrisWheelLayout, "rotation", 0f, 360f);
        spin.setRepeatMode(-1);
        spin.setRepeatCount(Animation.INFINITE);
        spin.setDuration(8000);
        spin.setInterpolator(new LinearInterpolator());
        spin.start();

        counterSpin1 = ObjectAnimator
                .ofFloat(chairView1, "rotation", 0f, -360f);
        counterSpin1.setRepeatMode(-1);
        counterSpin1.setRepeatCount(Animation.INFINITE);
        counterSpin1.setDuration(8000);
        counterSpin1.setInterpolator(new LinearInterpolator());
        counterSpin1.start();

        counterSpin2 = ObjectAnimator
                .ofFloat(chairView2, "rotation", 0f, -360f);
        counterSpin2.setRepeatMode(-1);
        counterSpin2.setRepeatCount(Animation.INFINITE);
        counterSpin2.setDuration(8000);
        counterSpin2.setInterpolator(new LinearInterpolator());
        counterSpin2.start();

        counterSpin3 = ObjectAnimator
                .ofFloat(chairView3, "rotation", 0f, -360f);
        counterSpin3.setRepeatMode(-1);
        counterSpin3.setRepeatCount(Animation.INFINITE);
        counterSpin3.setDuration(8000);
        counterSpin3.setInterpolator(new LinearInterpolator());
        counterSpin3.start();

        counterSpin4 = ObjectAnimator
                .ofFloat(chairView4, "rotation", 0f, -360f);
        counterSpin4.setRepeatMode(-1);
        counterSpin4.setRepeatCount(Animation.INFINITE);
        counterSpin4.setDuration(8000);
        counterSpin4.setInterpolator(new LinearInterpolator());
        counterSpin4.start();

    }
} 
```

这是它的布局`activity_main.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/parentWheelLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:onClick="onToggleClicked" >

    <ImageView
        android:id="@+id/wheelSpokes"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:src="@drawable/ic_launcher" />

    <ImageView
        android:id="@+id/chair1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="top"
        android:layout_marginBottom="100dp"
        android:layout_marginLeft="100dp"
        android:layout_marginRight="100dp"
        android:layout_marginTop="100dp"
        android:src="@drawable/ic_launcher" />

        <ImageView
        android:id="@+id/chair2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="top"
        android:layout_marginBottom="100dp"
        android:layout_marginLeft="200dp"
        android:layout_marginRight="100dp"
        android:layout_marginTop="100dp"
        android:src="@drawable/ic_launcher" />

        <ImageView
        android:id="@+id/chair3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="top"
        android:layout_marginBottom="100dp"
        android:layout_marginLeft="100dp"
        android:layout_marginRight="100dp"
        android:layout_marginTop="300dp"
        android:src="@drawable/ic_launcher" />

         <ImageView
             android:id="@+id/chair4"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:layout_gravity="top"
             android:layout_marginBottom="100dp"
             android:layout_marginLeft="200dp"
             android:layout_marginRight="100dp"
             android:layout_marginTop="300dp"
             android:adjustViewBounds="true"
             android:src="@drawable/ic_launcher" />

</RelativeLayout> 
```

**代码背后的一些理论：**

想象一个摩天轮单向旋转 90 度。在那段时间，摩天轮上的一把椅子通常会做什么？那把椅子随着摩天轮沿着摩天轮的轴线移动，**同时**，那把椅子也绕着自己的轴线旋转了负90度。

换句话说，我们可以让椅子开始绕自己的轴旋转，同时，如果我们可以将摩天轮和椅子组合起来，将其封闭在一个更大的视图中，那么我们可以从较大的轴以相同的速率在相反方向上。

希望这对你有意义。

# c - Casear Cipher c 程序不接受

> ID：15754794
> 
> 赞同：0
> 
> 时间：2013-04-02T01:50:29.997
> 
> 标签：c, algorithm, encryption

为什么我的代码不接受不包含字符 az AZ 0-9 的字符串？如果要对此进行加密以转移例如“aaaaa [[[[[[””，我会收到错误消息。我想要代码，以便它也可以接受空格或任何内容，并跳过那些不是 az、AZ、0-9 的代码。

为什么我的最后一个 else 语句不起作用？

例如：

```
"a       a" shift 1 
```

应该

```
"b       b" 
```

我的代码：

```
#include <stdio.h>

int main (){

    char word[20];
    int rotx;

    printf("enter string\n");
    scanf("%s", word);

    printf("enter rotations\n");
    scanf("%d", &rotx);

    encrypt(word, rotx);

    return 0;
}

void encrypt (char word[], int rotx){

    int w = strlen(word) - 1;
    int i = 0;

    for ( ; i <= w; i++)
        if ((word[i] + rotx) >= 65 && (word[i] + rotx) <=90)
        {
                word[i] += (rotx);
        }
        else if ((word[i] + rotx) >= 97 && (word[i] + rotx) <=122)
        {
                   word[i] += (rotx);
        }
        else if ((word[i] + rotx) >= 48 && (word[i] +rotx) <= 57)
        {
                word[i] += (rotx);
        }
        else if ((word[i] + rotx) > 90 && (word[i]+rotx) <97)
        {
                word[i] = 64 + (rotx - (90-word[i]));
        }
        else if ((word[i] + rotx) > 122)
        {
                word[i] = 96 + (rotx - (122-word[i]));
        }
        else 
        {
        continue;
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T01:58:55.940

如果您使用`scanf()`获取字符串作为输入，它会接收字符串，忽略空格。所以如果你输入

```
hello world 
```

只要

```
hello 
```

被scanf作为输入。所以使用 fgets()

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T02:23:04.487

老实说，我不知道你在做什么。这是我认为凯撒密码基于我阅读的维基百科的代码。如果有人发现*出于演示原因而有害的非句法缺陷，请*告诉我。

PS，考虑阅读“ [https://www.kernel.org/doc/Documentation/CodingStyle](https://www.kernel.org/doc/Documentation/CodingStyle) ”，它会帮助你（和我）很多。PS：如果我打破了上面的编码风格，它不会让我成为伪君子，我只是选择最适合我的风格。

花了5分钟写代码。

```
#include <stdio.h>
#include <string.h>

void encrypt(char *res, char *word, int rot)
{
    int len;
    int i;
    int tmp;

    len = strlen(word);

    for (i = 0; i < len; ++i) {
        tmp = word[i] - 'a';
        tmp += rot;
        tmp %= ('z' - 'a');
        res[i] = tmp + 'a';
    }

    res[len] = 0;
}

void decrypt(char *res, char *word, int rot)
{
    int len;
    int i;
    int tmp;

    len = strlen(word);

    for (i = 0; i < len; ++i) {
        tmp = word[i] - 'a';
        tmp -= rot;
        tmp %= ('z' - 'a');
        res[i] = tmp + 'a';
    }

    res[len] = 0;
}

int main()
{
    char word[20];
    char result[20];
    char decode[20];
    int rot;

    printf("enter a word: ");
    scanf("%s", word);

    printf("enter rotations: ");
    scanf("%d", &rot);

    encrypt(result, word, rot);    

    printf("result: %s\n", result);

    decrypt(decode, result, rot);

    printf("decode: %s\n", decode);

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T02:20:34.683

您`scanf()`不会读取空格，因此将其更改为以下样式，

```
scanf("%[^\n]", word); 
```

请不要使用`gets()`它，因为它已被弃用并且它的使用很危险，尤其是当您的目标是提供安全性时。

你也不需要这么复杂的`encrypt()`函数，下面给出的循环足以实现凯撒密码，

```
for ( ; i <= w; i++)
  {     
     word[i] +=rotx;
  } 
```

# iphone - UIScrollView滚动时帧率慢，为什么？

> ID：15754798
> 
> 赞同：3
> 
> 时间：2013-04-02T01:51:46.250
> 
> 标签：iphone, uiscrollview, frame-rate

在我的滚动视图中，我有大约 20 个 UIView，每个都有一个标签和按钮，每当我滚动时，滚动视图都会滞后。为什么是这样？可能是因为我在滚动视图中对 UIViews 进行了子分类吗？在我的视图控制器中创建 UIView 会更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T01:58:41.080

您提供的信息远远不够，任何人都无法具体回答（例如，您根本没有提供任何信息）。但没有必要猜测。使用仪器并找出导致问题的原因。此外，对于一些非常有用的一般原则，以及使用 Instruments 调试慢速滚动的一些技术，请观看有关此主题的 WWDC 2012 视频，例如 Session 238 - iOS App Performance: Graphics and Animations。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T02:44:18.447

您是否将数据同步加载到单元格中？

# google-app-engine - App Engine ndb StructuredProperty __get__

> ID：15754801
> 
> 赞同：0
> 
> 时间：2013-04-02T01:52:08.827
> 
> 标签：google-app-engine, app-engine-ndb

好吧，我卡住了。我`StructuredProperty`在实体上有一个简单的（只有一层深）属性。在运行时，我想按名称获取其中一个“子属性”的值`StructuredProperty`。例如;

```
class Address(ndb.Model):
  street = ndb.StringProperty()
  # ...

class Person(ndb.Model):
  # ...
  address = ndb.StructuredProperty(Address) 
```

然后在运行时我希望能够执行以下操作：

```
prop = entity._properties['address']
sub_prop = prop.__getattr__('street')
value = sub_prop.__get__(entity, Person) 
```

或使用`GenericProperty`或任何最有效的方法。但是我已经尝试了许多变体，但我显然遗漏了一些东西。当然，我想这样做的原因是确实有许多类似命名`Address`的`StructuredProperty`，并且我知道根据运行时上下文我想要哪一个。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T21:49:05.960

鲍比是对的。我得到的是房产，而不是我想象的房产价值（漫长的一天）。

简单的答案是

```
getattr(prop, 'some_name') 
```

# javascript - 这会捕获所有电话号码格式吗？

> ID：15754803
> 
> 赞同：3
> 
> 时间：2013-04-02T01:52:18.070
> 
> 标签：javascript, regex

我一直在研究将用户输入转换为可读形式的电话号码的代码。当用户输入电话号码时，我不会擦洗任何东西，但我会尝试在输出时将其擦洗回屏幕。下面是我正在使用的辅助函数。有没有人看到这个没有抓住的案例？

```
var formatPhone = function(raw){
  var parts = raw.replace(/[^0-9X]/gi, '').split('x');
  var result = parts[0];
  switch(result.length){
    case(13):
      result = result.replace(/(\d{3})(\d{3})(\d{3})(\d{4})/, '+$1 ($2) $3-$4');
      break;
    case(12):
      result = result.replace(/(\d{2})(\d{3})(\d{3})(\d{4})/, '+$1 ($2) $3-$4');
      break;
    case(11):
      result = result.replace(/(\d{1})(\d{3})(\d{3})(\d{4})/, '$1 ($2) $3-$4');
      break;
    case(10):
      result = result.replace(/(\d{3})(\d{3})(\d{4})/, '($1)v$2-$3');
      break;
    case(7):
      result = result.replace(/(\d{3})(\d{4})/, '$1-$2');
      break;
    default:
      result = result;
  }
  if(parts.length>1){
    result += ' ext ' + parts[1];
  }
  return new Handlebars.SafeString(result);
}; 
```

代码的一般解释：

1.  使用倒置正则表达式去除除 0-9 和 Xx 之外的所有字符
2.  根据 Xx 拆分字符串
3.  取第一部分并根据其长度计算输出格式
    *   对于 12 和 13 个字符串（假定为国际），在前面加上 +
    *   对于 11 个字符串，使用 n (nnn) nnn-nnnn
    *   对于 10 个字符，使用 (nnn) nnn-nnnn
    *   对于 7 个字符，使用 nnn-nnnn
    *   对于所有其他字符长度，只需输出它
4.  接下来，如果部件数组有第二部分，则追加 ext 和其余部分

听起来对吗？我应该抓到吗？还是其他特殊字符？

# ember-data - ember-data 在 app.js 中不可用

> ID：15754806
> 
> 赞同：1
> 
> 时间：2013-04-02T01:52:33.240
> 
> 标签：ember-data

我下载了 ember-data repo，运行 bundle 和 rake dist，然后从 dist 文件夹中获取 ember-data.js 文件。我把它放在我的 ember 应用程序中。现在尝试以下代码：

```
var App = Ember.Application.create();

App.Router.map(function(){
    this.resource('about');
});

App.Store = DS.Store.extend({
  revision: 11
}); 
```

我得到错误：

```
Uncaught ReferenceError: DS is not defined 
```

我也是 javascript 新手。这可能是一个 javascript 错误。我可以通过键入 window.DS.Store 或 this.DS.Store 在控制台中获取 DS.Store。为什么它在 app.js 中不可用？

这是索引文件：

```
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="js/libs/jquery-1.9.1.js"><\/script>')</script>
  <script src="js/libs/handlebars-1.0.0-rc.3.js"></script>
  <script src="js/libs/ember-1.0.0-rc.2.js"></script>
  <script src="js/app.js"></script>
  <script src="js/libs/ember-data.js"></script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-19T22:21:17.743

我很确定同时您的问题已解决，但记录如下：

您必须更改加载 javascript 的顺序。在您的情况下`app.js`，之前已包含在内，`ember-data.js`因此`app.js`对 ember-data 一无所知。

```
<script src="js/libs/ember-data.js"></script>
<script src="js/app.js"></script> 
```

# autotools - 如何在 linux 系统之外使用替代库

> ID：15754811
> 
> 赞同：1
> 
> 时间：2013-04-02T01:53:27.947
> 
> 标签：autotools, autoconf, automake

我正在构建一个由 GNU autoconf 配置的开源项目。它取决于 glib2.36，它报告 glib 库的版本低于该版本。但是我不想在“/usr/lib”路径中替换我系统的glib。我的想法是下载 glib2.36 并从头开始构建并将其安装到“$HOME/local”。然后我想使用 --prefix=$HOME/local 来配置项目。

```
 $cd ~/tmp/glib-2.36.0$
    $./configure  --prefix=$HOME/local
    $make
    $make install

    $cd ~/tmp/project
    $./configure --prefix=$HOME/local 
```

但它仍然报告“检查 GLIB - 版本 >= 2.36.0 ... 否”我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T07:15:01.603

`--prefix`没有指定 ./configure 查找库的位置。它设置运行时安装文件的位置`make install`。`./configure --help`将向您展示更多选择。

如果使用 pkg-config，则无法设置`GLIB_CFLAGS`和`GLIB_LIBS`env 变量来更改特定包的路径。

但你会先检查`./configure --help`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T08:29:32.570

假设您的项目使用 pkg-config 和`PKG_CHECK_MODULES`宏，您可以检查 pkg-config 在哪里查找`.pc`文件：`pkg-config --variable pc_path pkg-config`

您可以通过设置变量指定 pkg-config 首先搜索的路径*。*`PKG_CONFIG_PATH`因此，您可以使用以下内容调用配置：

`env PKG_CONFIG_PATH="$HOME/local/pkgconfig" ./configure --prefix=$HOME/local`

# ld - GNU ld 链接器错误“未知重定位类型 30”是什么意思？

> ID：15754818
> 
> 赞同：0
> 
> 时间：2013-04-02T01:55:05.657
> 
> 标签：ld, xilinx, microblaze

我和一位同事今天使用以下版本的 LD 遇到了这个奇怪的错误：

```
$ mb-ld --version
GNU ld (GNU Binutils) 2.21.53.20110813
Copyright 2011 Free Software Foundation, Inc. 
```

这是 GNU 工具链的一部分，具有 MicroBlaze 架构支持，作为 Xilinx ISE 14.4 嵌入式开发套件 (EDK) 工具的一部分分发。我的构建平台是 Red Hat Enterprise Linux Server release 5.9 for x86_64。

更一般地说，我想到了其他一些问题：

1.  是否有所有 GNU ld 重定位类型的主列表？
2.  如果没有，那么有没有办法询问我的特定版本的 LD 以确定重定位类型的含义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-02T08:30:22.830

```
1\. Is there a master list of all GNU ld relocation types? 
```

不，它基于硬件架构

```
2\. If not, then is there a way to interrogate my specific version of LD to determine what a relocation type means? 
```

Kinda，您可以找到适合您硬件的类型。Microblaze 是一个软 CPU，但它模仿了 PowerPC 的架构。在快速搜索“PowerPC 重定位类型”后，我发现[http://math-atlas.sourceforge.net/devel/assembly/elfspec_ppc.pdf](http://math-atlas.sourceforge.net/devel/assembly/elfspec_ppc.pdf)（表 4-8）我们有以下重定位类型

```
Table 4-8 Relocation Types
Name                       Value Field      Calculation
R_PPC_NONE                 0     none       none
R_PPC_ADDR32               1     word32     S + A
R_PPC_ADDR24               2     low24*     (S + A) >> 2
R_PPC_ADDR16               3     half16*    S + A
R_PPC_ADDR16_LO            4     half16     #lo(S + A)
R_PPC_ADDR16_HI            5     half16     #hi(S + A)
R_PPC_ADDR16_HA            6     half16     #ha(S + A)
R_PPC_ADDR14               7     low14*     (S + A) >> 2
R_PPC_ADDR14_BRTAKEN       8     low14*     (S + A) >> 2
R_PPC_ADDR14_BRNTAKEN      9     low14*     (S + A) >> 2
R_PPC_REL24                10    low24*     (S + A - P) >> 2
R_PPC_REL14                11    low14*     (S + A - P) >> 2
R_PPC_REL14_BRTAKEN        12    low14*     (S + A - P) >> 2
R_PPC_REL14_BRNTAKEN       13    low14*     (S + A - P) >> 2
R_PPC_GOT16                14    half16*    G + A
R_PPC_GOT16_LO             15    half16     #lo(G + A)
R_PPC_GOT16_HI             16    half16     #hi(G + A)
R_PPC_GOT16_HA             17    half16     #ha(G + A)
R_PPC_PLTREL24             18    low24*     (L + A - P) >> 2
R_PPC_COPY                 19    none       none
R_PPC_GLOB_DAT             20    word32     S + A
R_PPC_JMP_SLOT             21    none       see below
R_PPC_RELATIVE             22    word32     B + A
R_PPC_LOCAL24PC            23    low24*     see below
R_PPC_UADDR32              24    word32     S + A
R_PPC_UADDR16              25    half16*    S + A
R_PPC_REL32                26    word32     S + A - P
R_PPC_PLT32                27    word32     L + A 
```

我的猜测是这些对于 MicroBlaze 将是相同的（可能在名称中使用 R_MB 而不是 R_PPC）。当然应该有一个官方文件可以告诉你到底发生了什么，我还没有找到它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-09-26T21:27:53.420

使用带有选项 -r 的 objdump.exe 来查找输出中每个符号的重定位类型。我不知道类型记录在哪里。

# javascript - 淡化过渡Javascript？

> ID：15754823
> 
> 赞同：0
> 
> 时间：2013-04-02T01:55:47.820
> 
> 标签：javascript, html

我的`index.html`文件中有一个用 Javascript 编写的小幻灯片，目前只是从一个图像跳到另一个图像。我希望能找到一种可以添加的淡入淡出效果，以便它淡入一个图像并在设定的时间后淡出到下一个图像。但是，我对 Javascript 还很陌生，不太确定如何去做。这是我现在拥有的：

```
<script type="text/javascript">
  <!--          
    var step=1 
    function slide() {
        document.images.slide.src=eval("image"+step+".src")
        if(step<10)
            step++
        else
            step=1
        setTimeout("slide()",2500)
    }
    slide()
  //-->
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T02:07:18.897

我不确定 jQuery 是如何做到这一点的，但[CSS3 转换](http://www.w3.org/TR/css3-transitions/)是做到这一点的方法。

它是非常小的代码，并且会比任何 JavaScript 解决方案执行得更好。

你可以参考这里的例子：http: [//css3.bradshawenterprises.com/cfimg/](http://css3.bradshawenterprises.com/cfimg/)

当前所有浏览器都支持 CSS3 过渡。IE9 似乎没有它，而不是漂亮的褪色它会立即改变图像。所以应该是安全的。

# c# - 如何使用 Moq 测试 ServiceStack 服务

> ID：15754824
> 
> 赞同：4
> 
> 时间：2013-04-02T01:55:53.467
> 
> 标签：c#, unit-testing, moq, servicestack

我有一个使用 ServiceStack 创建的休息服务，使用 nHibernate 作为从 SqlCe 数据库获取数据的一种方式。我一直在尝试使用 nUnit 和 Moq 编写一些单元测试——我已经成功地模拟了 nHibernate 实现以返回 null、无效对象等等——但是`NullReferenceException`当我调用基类来设置 HttpStatus 等时，我的测试总是抛出一个。

```
public List <ParameterDto> Get (ParameterAll parameterAll)
    {
        List <ParameterDto> parameterResponseList = new List <ParameterDto> ();
        try
        {
            List <ParameterDomainObject> parameterDomainObjectList = _ParameterDao.getAllParameters ();
            foreach (ParameterDomainObject parameterDomainObject in parameterDomainObjectList)
            {
                parameterResponseList.Add (parameterDomainObject.ToDto ());
            }
        }
        catch (WebServiceException webEx)
        {
            Debug.WriteLine ("WebServiceException.ErrorCode         " + webEx.ErrorCode);
            Debug.WriteLine ("WebServiceException.ErrorMessage      " + webEx.ErrorMessage);
            Debug.WriteLine ("WebServiceException.ResponseStatus    " + webEx.ResponseStatus);
            Debug.WriteLine ("WebServiceException.StatusCode        " + webEx.StatusCode);
            Debug.WriteLine ("WebServiceException.StatusDescription " + webEx.StatusDescription);
            Debug.WriteLine ("WebServiceException.ErrorCode         " + webEx.ErrorCode);
        }
        catch (DomainObjectNotFoundException domainObjectNotFoundException)
        {
            base.Response.StatusCode = (int) HttpStatusCode.NotFound;
            base.Response.AddHeader ("Reason",
                                     domainObjectNotFoundException.Message);
        }
        catch (Exception exception)
        {
            Debug.WriteLine ("Exception: " + exception.Message);
            base.Response.StatusCode = (int) HttpStatusCode.InternalServerError;
            base.Response.AddHeader ("Reason",
                                     exception.Message);
        }
        /* Always throws an exception here, or anywhere base.Response is called */
        base.Response.StatusCode = (int) HttpStatusCode.OK;
        base.Response.AddHeader ("Reason",
                                 Strings.ParameterRestResponse_Get_OK);
        return parameterResponseList;
    } 
```

该服务在使用 RestClient 和 Firefox 进行测试时运行良好，当我注释掉`base.Response`代码时，我猜我可能只是没有在单元测试中设置正确的东西？

```
 [Test]
    public void Test_Method_Get_AllParameters_Unsucessful ()
    {
        Mock <IRequestContext> mockedRequestContext = new Mock<IRequestContext>();
        mockedRequestContext.SetupGet(f => f.AbsoluteUri).Returns("http:/localhost:8080/parameters/all");

        Mock<IParameterDao> mockedParameterDao = new Mock<IParameterDao>();
        mockedParameterDao.Setup (returns => returns.getAllParameters ()).Returns (new List <ParameterDomainObject> ());
        Assert.IsNotNull (mockedParameterDao);

        ParameterRestService service = new ParameterRestService(mockedParameterDao.Object)
        {
            RequestContext = mockedRequestContext.Object
        };

        List <ParameterDto> parameterDtos = service.Get (new ParameterAll ());
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T16:56:40.383

看起来您只需要模拟 Service 类的 Response 属性。它没有设置器受到保护，但你应该能够模拟它做类似的事情......

```
 Mock<IRequestContext> mockedRequestContext = new Mock<IRequestContext>();
    Mock<IHttpResponse> mockedResponse = new Mock<IHttpResponse>();
    mockedRequestContext.SetupGet(f => f.AbsoluteUri).Returns("http:/localhost:8080/parameters/all");
    mockedRequestContext.Setup(f => f.Get<IHttpResponse>()).Returns(mockedResponse.Object); 
```

# sql - WHERE CLAUSE 中的 IF 语句

> ID：15754825
> 
> 赞同：0
> 
> 时间：2013-04-02T01:55:55.623
> 
> 标签：sql, sql-server

我有一个看起来像这样的存储过程：

```
-- @intUserType int (Passed in from sproc)

IF @intUserType = 1
BEGIN
    SELECT * FROM Users
    WHERE Users.isDeleted = 0
END

IF @intUserType = 4
BEGIN
    SELECT * FROM Users
    WHERE Users.isDeleted = 0
    AND Users.UserType <> 1
END

IF @intUserType = 3
BEGIN
    SELECT * FROM Users
    WHERE Users.isDeleted = 0
    AND Users.UserType IN (1,3,4)
END 
```

我想缩短它并且不使用这么多的选择语句，有点像：

```
SELECT * FROM Users
WHERE Users.isDeleted = 1
AND
    IF @intUserType = 1
        THEN Users.UserType > 0
    ELSE IF @intUserType = 4
        THEN Users.UserType <> 1
    ELSE IF @intUserType = 3
        THEN Users.UserType NOT IN(1,3,4)
    END
END 
```

谢谢你的帮助。

抢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T01:59:08.967

```
SELECT * FROM Users
WHERE Users.isDeleted = 0 AND
( 
   (@intUserType = 1) OR
   (@intUserType = 4 AND Users.UserType <> 1) OR 
   (@intUserType = 3 AND Users.UserType IN (1,3,4))
) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-02T01:57:28.573

```
SELECT * FROM Users
WHERE @intUserType = 1 AND Users.isDeleted = 0
  OR (@intUserType = 4 AND Users.isDeleted = 0 AND Users.UserType <> 1)
  OR (@intUserType = 3 AND Users.isDeleted = 0 AND Users.UserType IN (1,3,4)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T03:03:53.377

这是另一种方法，只是为了完整性。您可以构建一个 CASE 函数来评估 WHERE 子句中的多个表达式：

```
SELECT * 
FROM Users
WHERE 
   CASE 
      WHEN @intUserType = 1 AND Users.isDeleted = 0 THEN 1
      WHEN @intUserType = 4 AND Users.isDeleted = 0 AND Users.UserType <> 1 THEN 1
      WHEN @intUserType = 3 AND Users.isDeleted = 0 AND Users.UserType IN (1,3,4) THEN 1
      ELSE 0
   END = 1; 
```

# heroku - 在 Media Temple 上使用 DNS 的 Heroku 站点

> ID：15754827
> 
> 赞同：0
> 
> 时间：2013-04-02T01:56:10.157
> 
> 标签：heroku, dns, cname, mediatemple

我有一个旧的 PHP 站点，它托管在 media Temple 上。但我想在 HEROKU 上托管的 Rails 中添加一个管理区域。

我正在尝试将关注者的子域名 admin.mysite.com 设置为 heroku。

在我的媒体庙帐户上，我转到 **编辑区域文件：mysite.com** 我添加了一个新行

> 名称 = 管理员 类型 = cname 数据 = mysite.herokuapp.com

但是当我去 mysite.herokuapp.com 它工作正常但是当我去 admin.mysite.com 我得到 Heroku | 没有这样的应用

我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T02:36:36.333

您需要将自定义域添加到您的 Heroku 应用程序。请参阅此开发中心指南，[自定义域](https://devcenter.heroku.com/articles/custom-domains)。

本质上：

```
$ heroku domains:add  admin.mysite.com --app my_app 
```

# java - 在 JFrame 窗口上临时显示 JPanel

> ID：15754828
> 
> 赞同：0
> 
> 时间：2013-04-02T01:56:14.330
> 
> 标签：java, swing, graphics, jframe, jpanel

我正在开发一个基于主 JFrame 的图形棋盘游戏程序。游戏板本身源自 JPanel。

当有人获胜时，我希望能够在整个窗口上显示“胜利屏幕”。我想我可以从一开始就成功显示的“欢迎屏幕”扩展这个想法。当这段代码运行时，欢迎屏幕出现，停留 2 秒，然后消失，游戏板出现并准备好玩。希望这些基本部分足以说明我如何设置它：

```
public class MyGame{     
  public static Board b;                //Board extends JPanel
  public static Window gameWindow;      //Window extends JFrame
  ...
  public static void main(String args[]) throws IOException{
    ...
    gameWindow = new Window("My Game"); 
    //DisplayScreen extends JPanel
    DisplayScreen intro = new DisplayScreen("welcomeScreen.png"); 
    gameWindow.setSize(960, 570); 
    gameWindow.add(intro); 
    gameWindow.setVisible(true); 
    wait(2); //just a function I wrote 
    ...
    b = new Board("board.png"); 
    ... 
    gameWindow.remove(intro);  
    gameWindow.add(b); 
    gameWindow.repaint(); 
    gameWindow.setVisible(true); 
    ...
  }
  ... 
} 
```

诚然，它需要大量的试验和错误才能让它发挥作用。不过，就我的一生而言，我无法弄清楚如何在游戏后期的某个时刻临时放置胜利画面。我想我可以通过中心`MyGame`班的一个函数来做到这一点（我在`Window`班上和其他地方都试过，但没有成功）。就像是：

```
public static void VictoryScreen(){
    DisplayScreen victoryScreen = new DisplayScreen("victoryScreen.jpg");   
    victoryScreen.setVisible(true); 
    gameWindow.add(victoryScreen); 
} 
```

不幸的是，这没有显示任何内容。我已经尝试了各种方式，，，`add`等等`setVisible`，`validate`并查看了其他一些问题，但似乎没有任何效果。我还尝试将`victoryScreen`声明放在初始欢迎屏幕旁边并将其设置为不可见（然后在我想显示它时设置为可见），但这只是在一开始就在所有内容上放置一个灰色面板。似乎在构造某些东西时，它会自动绘制。将电路板作为另一个 JPanel 层似乎很冒险，但我对 JSwing 知之甚少。

无论如何，我被难住了。关于使胜利屏幕（以及最终其他屏幕）按需要显示的程序的任何建议？

*编辑：这是我覆盖`paintComponent`屏幕显示类的方式：

```
public void paintComponent(Graphics g){ 

              //works fine for welcome screen
      g.drawImage(screenImage, 0, 0, 960, 540, null); 
      repaint(); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T02:01:45.780

一种方法是通过 CardLayout 和多个 JPanel。

另一种方法是设计一个状态机，其中程序状态在一个面板中发生变化。

老实说，这在当前的 java 状态下是一个非常困难的问题，出于演示目的，坚持第一个。就个人而言，我更喜欢第二种选择。

这两种方法都令人沮丧且无效，因为 CardLayout 不是为游戏屏幕变化而设计的，而制作一个严重依赖全局状态的程序真的很难推理......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T02:18:55.993

这可能不是最佳做法，但如果这么快就到期了——

我的直接反应是只使用 setContentPane 替换 JFrame 的内容，然后用游戏板再次调用它以将其重新设置。

我认为对 .add 的调用与对介绍屏幕的调用方式不同的原因是，您没有在添加胜利屏幕之前删除游戏板，而是在添加游戏板之前删除了介绍。也许如果您删除游戏板然后调用 add 将胜利屏幕放入它会起作用？

# c# - 从 telnet 读取的 backgroundworker 循环 - C#

> ID：15754831
> 
> 赞同：1
> 
> 时间：2013-04-02T01:56:50.017
> 
> 标签：c#, backgroundworker

对编程相当陌生，但需要此代码才能使我正在构建的一些硬件正常工作。

我正在编写 ac# 程序以连接到 telnet 服务器并从提要中读取然后显示在文本框中（听起来很简单）...

连接按钮连接 telnet 并运行一个后台工作程序，然后等待 telnet 会话发送数据，然后输出到后台工作程序完整部分中的文本框。

我的问题是，一旦收到读取，我如何让后台工作人员再次运行？

如果我在封装backgroundworker starter 的connect 按钮中使用while 循环，那么ui 会冻结（这是使用后台worker 开始的全部意义）。

谢谢你的帮助。

粗毛

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T02:33:01.000

你没有说你是如何从远程登录服务器读取的。

我不建议为此使用 a`BackgroundWorker`甚至 a `Task`。您可以让您的 GUI 代码创建一个[`TcpClient`](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient.aspx)实例。创建完成后，按钮处理程序将调用`BeginConnect`，传递对将在建立连接时调用的函数的引用。

当调用连接回调时，它会获取流（调用`GetStream`），并`BeginRead`在流上调用。并且读取处理程序再次调用`BeginRead`。所以你最终得到的是一个异步循环。

请参阅[BeginConnect](http://msdn.microsoft.com/en-us/library/ms145193.aspx)和[EndConnect](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient.endconnect.aspx)的示例，以及`NetworkStream` [BeginRead](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient.endconnect.aspx)和`EndRead`方法。

此外，您可能会通过搜索 [TcpClient asynchronous example] 获得一些有用的信息。

# debugging - 如何从中间 Web API 服务捕获 HTTP 流量？

> ID：15754832
> 
> 赞同：2
> 
> 时间：2013-04-02T01:56:54.137
> 
> 标签：debugging, rest, asp.net-web-api, fiddler, wireshark

这是我目前拥有的设置：

**客户端应用程序 -----> 中间 Web API 服务（接收来自客户端的调用） ------> 3rd 方 RESTful 服务（接收来自中间服务的调用）**

因此，如果我从客户端向中间服务发起调用，***或者***从中间服务向第 3 方服务发起调用，我可以使用 Fiddler 或 Wireshark 来检查 POSTed XML/JSON。

问题是当我一直从客户端拨打电话时，我想检查从**中间服务**发送到第 3 方服务的实际原始 HTTP 传出消息。如果我在包含中间服务的服务器上运行 Fiddler，我看不到 HTTP 流量从它出站。我也尝试过 Wireshark，但它也不会占用流量。但是我知道它正在发生，因为第 3 方服务正在向我发送错误。

中介服务充当客户端应用程序对第​​ 3 方服务的门面，并在使另一个 HTTP 客户端出站到第 3 方服务之前处理来自客户端的数据。我在第 3 方服务接受传出消息时遇到问题，并且确实需要看到中间服务省略了原始 HTTP 消息（我正在使用 a`HttpClient.PostAsync`将数据发布到第 3 方服务）。在发送之前我已经将它保存到数据库中，但我提取的内容似乎还可以。

所以主要问题是，我如何获得我的中介服务正在发布到第 3 方服务的消息？是否有 Fiddler、Wireshark 或其他程序可用于检查从该中介服务出站的 HTTP 消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T17:40:18.410

配置您的“中间 Web API 服务”以通过在同一（或不同）计算机上运行的 Fiddler 实例代理其流量，这将正常工作。

如果您的服务是用 .NET 编写的，您可以手动配置其代理： [http](http://www.fiddler2.com/fiddler/help/hookup.asp#Q-DOTNET) ://www.fiddler2.com/fiddler/help/hookup.asp#Q-DOTNET或者您可以更新 machine.config 或 web.config ：[http](http://www.telerik.com/automated-testing-tools/blog/eric-lawrence/13-01-08/capturing-traffic-from-net-services-with-fiddler.aspx) ://www.telerik.com/automated-testing-tools/blog/eric-lawrence/13-01-08/capturing-traffic-from-net-services-with-fiddler.aspx使其流量通过Fiddler 实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:17:21.447

我认为 Fiddler 不会起作用，因为它只会拦截在浏览器中进行的调用。你可以对你的中间代码进行修改吗？您可以注入一个处理程序来记录用于调用第三方服务的 HttpClient 中的消息。处理程序看起来像这样，

```
public class LogginHandler : DelegatingHandler
{
    public LogginHandler(HttpMessageHandler inner)
        : base(inner)
    {
    }

    protected override async Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, System.Threading.CancellationToken cancellationToken)
    {
            using (var fs = new FileStream("c:\\temp\\log.txt", FileMode.Create, FileAccess.Write))
            {
                await request.Content.CopyToAsync(fs);
            }

            return await base.SendAsync(request, cancellationToken);

    }
} 
```

以及在这样的 HttpClient 实例中注入此处理程序的代码，

```
HttpClient client = new HttpClient(new LogginHandler(new HttpClientHandler())); 
```

# python - py2exe / cx_Oracle - 生成的 dist 中的 OCI.dll

> ID：15754835
> 
> 赞同：1
> 
> 时间：2013-04-02T01:57:08.760
> 
> 标签：python, python-2.7, python-3.x, py2exe, cx-oracle

我正在尝试为使用 cx_Oracle 模块的 python 脚本生成可执行文件。生成的分发文件夹中有 OCI.dll，我想避免这种情况，因为目标机器可能有不同版本的 Oracle 客户端，我想使用目标机器上存在的 dll 版本。

py2exe 文档有一个专门针对此问题的页面。链接是[http://www.py2exe.org/index.cgi/ExcludingDlls](http://www.py2exe.org/index.cgi/ExcludingDlls)

然而，这对我不起作用。我尝试过以下操作，但 OCI.dll 总是出现在 dist 文件夹中……我不确定我是否在这里遗漏了什么……感谢您的评论。

我尝试了以下两种方法

```
opts = {"py2exe": {"dll_excludes": "OCI.dll","includes": "decimal",}}
setup(options = opts) 
```

和

```
setup(options = {"py2exe": { "dll_excludes": ["oci.dll"]}}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-11T19:36:42.057

我已经成功使用了这种格式：

```
options={"py2exe" : {"dll_excludes": ["OCI.dll",], "includes" : ["decimal", ]}}) 
```

# c# - 在 C# 中将参数从父级传递到 iframe

> ID：15754836
> 
> 赞同：0
> 
> 时间：2013-04-02T01:57:19.810
> 
> 标签：c#, iframe, treeview

我的 Default.aspx 页面中有一个树形视图菜单，Parameter.aspx 页面中有一组带有多个控件的面​​板。Parameters.aspx 被导入到 iframe 中的 Default 中。根据用户选择的树节点，Parameters.aspx 中的某些面板应该是可见的或隐藏的。例如，如果用户选择第一个节点，则面板 4 是隐藏的，但如果用户选择第二个节点，则所有面板都是可见的。（我将它们分开是因为Parameters.aspx 会执行回发，这会导致每次选择treeNode 时都会打开一个新选项卡）。我试过 < iframe id="iframe" runat="server" src="Parameters.aspx?Param1=<%=treeview_reportName%>" class="noba" scrolling="no">

然后用查询字符串调用它，但我得到一个变量不存在错误。当我尝试传递一个会话时，当我从 Parameters.aspx 调用它时它总是返回 null 后面的所有代码都在 C# 中

这是 Default.aspx：

```
 <asp:TreeView ID="treeReport" runat="server" DataSourceID="XmlDataSource1" 
                    ImageSet="Arrows" NodeWrap="True" Width="250px" 
                    LeafNodeStyle-NodeSpacing="2.5px" Font-Names="Arial,Helvetica,sans-serif"
                    OnSelectedNodeChanged="treeReport_SelectedNodeChanged">
                    <DataBindings>
                        <asp:TreeNodeBinding DataMember="ReportTitle" ValueField="Name" 
                            PopulateOnDemand="True" Target="_self"/>
                        <asp:TreeNodeBinding DataMember="ChildReport" ValueField="Value" 
                            PopulateOnDemand="True" Target="_self"/>
                        <asp:TreeNodeBinding DataMember="Reports" ValueField="#Name" Target="_self" />
                    </DataBindings>
                    <HoverNodeStyle Font-Underline="True" ForeColor="#5555DD" />
                    <LeafNodeStyle NodeSpacing="2px" />
                    <NodeStyle Font-Names="Verdana" Font-Size="8pt" ForeColor="Black" 
                        HorizontalPadding="5px" NodeSpacing="0px" VerticalPadding="0px" />
                    <RootNodeStyle Font-Bold="True" Font-Size="8pt"/>
                    <ParentNodeStyle Font-Bold="True" />
                    <SelectedNodeStyle Font-Underline="True" ForeColor="#5555DD" 
                        HorizontalPadding="0px" VerticalPadding="0px" />
</asp:TreeView> 
```

树视图代码隐藏是

```
protected void treeReport_SelectedNodeChanged(object sender, EventArgs e)
        {
            string treenodeText = treeReport.SelectedNode.Text;
            string treeview_reportName = "summary";
            switch (treenodeText)
            {
                case "Overall incident analysis":
                    treeview_reportName = "overall";
                    break;
                case "All incidents":
                    treeview_reportName = "summary";
                    break;
                default:
                    treeview_reportName = "overall";
                    break;
            }

            Session["ReportGenerate"] = treeview_reportName;
        } 
```

和Parameters.aspx

```
<asp:Panel ID="pn1" runat="server" Width="610px" Visible="true" CssClass="project-content" >
 //Some controls here
</asp:Panel>

<asp:Panel ID="pn2" runat="server" Width="610px" Visible="true" CssClass="project-content" >
 //Some controls here
</asp:Panel>

<asp:Panel ID="pn3" runat="server" Width="610px" Visible="true" CssClass="project-content" >
 //Some controls here
</asp:Panel>

<asp:Panel ID="pn4" runat="server" Width="610px" Visible="true" CssClass="project-content" >
 //Some controls here
</asp:Panel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T02:32:51.760

我认为使用 Session 在页面之间传递参数只能作为最后的手段。我认为在这种情况下查询字符串是一个更好的选择。

一种选择是在 SelectedNodeChange 回发事件中设置 iframe 控件的 src 属性。您需要确保 iframe 控件具有 runat=server 属性。请参阅以下代码：

```
 protected void treeReport_SelectedNodeChanged(object sender, EventArgs e)
 {
        string treenodeText = treeReport.SelectedNode.Text;
        string treeview_reportName = "summary";
        switch (treenodeText)
        {
            case "Overall incident analysis":
                treeview_reportName = "overall";
                break;
            case "All incidents":
                treeview_reportName = "summary";
                break;
            default:
                treeview_reportName = "overall";
                break;
        }

        iframe.Attributes.Add("src", 
             string.Format("Parameters.aspx?Param1={0}", treeview_reportName));
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-14T09:03:18.313

在我的版本中，我需要从女巫页面知道我到 Ifarme，所以我在我去 iframe 的页面中使用它，我有这个

```
 <iframe runat="server" id="YourID"  name="YOURname" src="MY_Frame.aspx?source_page=Mypage"></iframe> 
```

在我放置的 Frame 的 C# 中（在 Page_Load 中）

```
String SourcePage = Request.QueryString["source_page"].ToString(); 
```

你得到（SourcePage =MYpage）

希望对你有帮助

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-03-07T00:47:03.090

```
 Mensaje = "Se envio una notificación al Agente: ";
                HtmlControl contentPanel1 = (HtmlControl)this.PnlError.FindControl("Iframe1");
                contentPanel1.Attributes["src"] = "../webMPH/wGeneroEnvio.aspx?lblMensaje=" + Mensaje.Trim()
                                                                           + "&lblUsuario=" + NombreAgente
                                                                           + "&lblMail=" + MailAgente; 
```

# wordpress - Wordpress 拉取类别 ID

> ID：15754850
> 
> 赞同：0
> 
> 时间：2013-04-02T01:58:52.667
> 
> 标签：wordpress, categories

当有人查看类别页面并将其包含在短代码中以使用插件显示类别中的帖子时，我试图提取当前类别 ID ...这就是我所拥有的...

```
<?php 
$category = get_category( get_query_var( 'cat' ) );
$cat_id = $category->cat_ID;
echo do_shortcode('[ajaxgrid cats="<?php get_the_category( $cat_id ) ?>"]'); ?> 
```

但它不起作用，它只显示所有帖子，所以我不认为类别 id 被正确提取......任何人都有任何想法......谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T03:22:37.440

猫应该包含这样的数字：a,b,c,d....我不认为它是一个数组，而 get_the_category() 正在返回数组。

`cat1,cat2,cat3`您应该创建一个函数，该函数从类似的数组中返回类似 : 的字符串`{cat1,cat2,cat3}`。我认为用逗号分开显示类别是解决方案。

我希望你找到它。

# c# - 优化 C# 自定义 Xml 解析器类

> ID：15754853
> 
> 赞同：0
> 
> 时间：2013-04-02T01:59:27.160
> 
> 标签：c#, .net, xml, linq

我正在尝试编写一个 XML 解析器来解析大学在给定日历年和学期的情况下提供的所有课程。特别是，我试图获取部门的首字母缩写词（即金融的 FIN 等）、课程编号（即数学 415、415 将是数字）、课程名称以及课程值得学分的数量。

我试图解析的文件可以在[这里找到](http://courses.illinois.edu/cisapp/explorer/schedule.xml)

**编辑和更新**

在读者更深入地了解 XML 解析以及优化它的最佳方法后，我偶然发现了这篇博客[POST](http://codingrules.blogspot.com/2010/06/c-xmlreader.html)

假设该文章中运行的测试结果既诚实又准确，似乎 XmlReader 的性能远远优于 XDocument 和 XmlDocument，这验证了以下出色答案中所说的内容。话虽如此，我使用 XmlReader 重新编码了我的解析器类，同时限制了单个方法中使用的读取器数量。

这是新的解析器类：

```
 public void ParseDepartments()
        {
            // Create reader for the given calendar year and semester xml file
            using (XmlReader reader = XmlReader.Create(xmlPath)) {
                reader.ReadToFollowing("subjects");  // Navigate to the element 'subjects'
                while (!reader.EOF) {
                    string pth = reader.GetAttribute("href");  // Get department's xml path
                    string acro = reader.GetAttribute("id");  // Get the department's acronym
                    reader.Read();  // Read through current element, ensures we visit each element
                    if (acro != null && acro != string.Empty) {  // If the acronym is valid, add it to the department list
                        deps.AddDepartment(acro, pth);
                    }
                }
            }
        }

        public void ParseDepCourses()
        {
            //  Loop through all the departments, and visit there respective xml file
            foreach (KeyValuePair<string, string> department in deps.DepartmentPaths) {
                try {
                    using (XmlReader reader = XmlReader.Create(department.Value)) {
                        reader.ReadToFollowing("courses");  // Navigate to the element 'courses'
                        while (!reader.EOF) {
                            string pth = reader.GetAttribute("href");
                            string num = reader.GetAttribute("id");
                            reader.Read();
                            if (num != null && num != string.Empty) {
                                string crseName = reader.Value;  //  reader.Value is the element's value, i.e. <elementTag>Value</elementTag> 
                                deps[department.Key].Add(new CourseObject(num, crseName, termID, pth)); // Add the course to the department's course list
                            }
                        }
                    }
                } catch (WebException) { }  // WebException is thrown (Error 404) when there is no xml file found, or in other words, the department has no courses
            }

        }

        public void ParseCourseInformation()
        {
            Regex expr = new Regex(@"^\S(L*)\d\b|^\S(L*)\b|^\S\d\b|^\S\b", RegexOptions.IgnoreCase | RegexOptions.Singleline | RegexOptions.IgnorePatternWhitespace);  // A regular expression that will check each section and determine if it is a 'Lecture' section, at which point, that section's xml file is visited, and instructor added
            foreach (KeyValuePair<string, Collection<CourseObject>> pair in deps) {
                foreach (CourseObject crse in pair.Value) {
                    try {
                        using (XmlReader reader = XmlReader.Create(crse.XmlPath)) {
                            reader.ReadToFollowing("creditHours");  // Get credit hours for the course
                            crse.ParseCreditHours(reader.Value);  //  Class method to parse the string and grab the correct integer values
                            reader.ReadToFollowing("sections"); //  Navigate to the element 'sections'
                            while (!reader.EOF) {
                                string pth = reader.GetAttribute("href");
                                string crn = reader.GetAttribute("id");
                                reader.Read();
                                if (crn != null && crn != string.Empty) {
                                    string sction = reader.Value;
                                    if (expr.IsMatch(sction)) {  // Check if sction is a 'Lecture' section
                                        using (XmlReader reader2 = XmlReader.Create(pth)) {  //  Navigate to its xml file
                                            reader2.ReadToFollowing("instructors");  // Navigate to the element 'instructors'
                                            while (!reader2.EOF) {
                                                string firstName = reader2.GetAttribute("firstName");
                                                string lastName = reader2.GetAttribute("lastName");
                                                reader2.Read();
                                                if ((firstName != null && firstName != string.Empty) && (lastName != null && lastName != string.Empty)) { //  Check and make sure its a valid name
                                                    string instr = firstName + ". " + lastName;  //  Concatenate into full name
                                                    crse.AddSection(pth, sction, crn, instr);  //  Add section to course
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    } catch (WebException) { }  // No course/section information found
                }
            }
        } 
```

尽管此代码的执行需要相当长的时间（10-30 分钟之间的任何时间），但考虑到要解析的大量数据，这是可以预期的。感谢所有发布答案的人，非常感谢。我希望这对可能有类似问题/疑问的任何其他人有所帮助。

谢谢，

大卫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T02:05:01.557

好吧，显然加载 XML 文件有点慢（例如，因为它们很大或者因为下载它们需要时间）并且`XDocument`即使您只使用其中的一小部分，使用也会将它们完全加载并解析到内存中。递归地进行三层深度会使整个过程非常缓慢，但最终它会结束（如预期或通过`OutOfMemoryException`）。¹

看看[`XmlReader`类](http://msdn.microsoft.com/en-us/library/system.xml.xmlreader.aspx)。它允许您按顺序读取 XML 文件，挑选出您需要的任何内容，并在您获得所需的所有信息时中止读取。然而，它的工作原理与它有很大的不同，`XDocument`也不太直观。在那个 MSDN 页面上有一些例子，[在 Stackoverflow 上](https://stackoverflow.com/questions/2441673/reading-xml-with-xmlreader-in-c-sharp)也有。

附带说明：在开始阅读另一个 XML 文件之前，请`XmlReader`考虑阅读*并关闭阅读器。*这使您的应用程序的内存占用最小。

¹ ) 例如，假设您正在读取一个包含 10 年 3 季 60 门课程的文件，那么您的代码正在下载、解析、验证和处理 10 * 3 * 60 = 1800 个文件。它需要从（与您的本地电脑相比）慢速互联网下载它们。不要期望整个过程很快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T02:05:35.560

循环不会变得无限，它只是变得非常非常慢。这是因为调用

```
XDocument hoursDoc = XDocument.Load(crsePath); 
```

打开另一个 XML 文件并对其进行解析。考虑到当所有信息都在内存中时处理持续 25 秒，为您遇到的每门课程打开一个附加文件会减慢处理速度也就不足为奇了。

# c# - 为什么我的 HttpPostedFileBase 总是为空？

> ID：15754855
> 
> 赞同：1
> 
> 时间：2013-04-02T01:59:33.337
> 
> 标签：c#, asp.net-mvc-3

它看起来与其他问题相似，但他们遇到的所有问题都是 HTML 中输入类型 =“文件”的名称与控制器中的参数名称之间的命名不匹配。我已经多次检查并重新检查了很多东西，但 HttpPostedFileBase 的值仍然始终返回为 null，这导致控制器中出现 NullReferenceException。这是代码：- HTML 代码：-

```
 @using (Html.BeginForm(new { enctype = "multipart/form-data" }))
     {
@Html.ValidationSummary(true)
<fieldset>
    <legend>Please Fill in the following details and Upload your Design Pic</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.chest)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.chest)
        @Html.ValidationMessageFor(model => model.chest)
    </div>
    <p>
        <label for="file">Design File Pic:</label>
        <input type="file" name="file" />
    </p>
    <p>
        <input type="submit" value="Order" />
    </p> 
```

在控制器中：-

```
 [HttpPost]
    [Authorize]
    public ActionResult Index(DesignOrder order, HttpPostedFileBase file)
    {
        string fileurl=null;
        if (file.ContentLength > 0) {
            fileurl = Path.Combine("../../Images/UserUploads",User.Identity.Name + file.FileName);
            file.SaveAs(fileurl); 
        }
    } 
```

if(file.ContentLength>0) 出现错误——NullreferenceException。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T02:04:33.087

因为`Html.BeginForm(object)`是 for `RouteValues`，而不是元素属性。您需要对属性使用更大的重载。试试这个：

```
Html.BeginForm("action", "controller", null, FormMethod.Post, new { enctype = "multipart/form-data" }) 
```

请参阅此处了解我的意思： http: [//msdn.microsoft.com/en-us/library/dd470793 (v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/dd470793(v=vs.108).aspx)

# css - 在这种情况下，使用 CSS 设置数据样式的最佳方法是什么？

> ID：15754856
> 
> 赞同：0
> 
> 时间：2013-04-02T01:59:37.967
> 
> 标签：css, styles, standards

我对这一切都很陌生。

出于某种原因，我痴迷于在 CSS 文件中完成所有样式。

因此，即使对于像设计一个句子这样简单的事情，我也会这样做：

```
<p class="content"> Welcome to my site </p> 
```

而不是这样：

```
<p style="font-size: 13pt; font-weight: bold;"> Welcome to my site </p> 
```

为了这个问题，上面的文字只会在整个网站上使用一次。现在哪个是技术上最好的方法？一个比另一个更好还是更快？你会用哪种方式？

另外，如果我想设置“欢迎来到我的网站”文本的样式，但上面或下面没有任何额外的空间`<p>`，那么最好使用什么标签？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T02:18:24.380

你的第一种方法是最好的，因为它遵循了一个对 web 开发非常有用的原则，*不要重复自己*。

例如，如果您有几个页面以某种方式强调文本，您不想一遍又一遍地重复所有这些样式。这就是您使用外部 CSS 文件的原因，因此您的所有样式信息都在一个位置，并且 HTML 文件严格用于内容和结构。

另外作为旁注，不要创建太多类，充分利用 HTML 和 HTML5 中内置的标签，例如 em、h1 到 h6、strong 等，因为它们会在编写 HTML 时为您节省一些时间和CSS

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T02:01:15.917

第一个更好，第二个由于几个原因而皱眉。

想一想，如果你有 10 个段落具有相同的样式，并且有一天你决定改变这种样式。那么，哪种方式更容易：查看所有页面并查看每个段落，还是只在一个地方更改？

此外，通过不使用内联样式，您是：

1.  使您的代码更易于阅读。
2.  很有可能使您的网站更快（文件更小，浏览器很可能会缓存您的 css）。
3.  使您更难重复使用您的样式。
4.  对可能继承您项目的任何人都友善。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T02:06:05.670

对于您的前三个问题，请参阅此[答案](https://stackoverflow.com/a/3145843/1468180)。如果您不希望 p 标签上方和下方有间距，请使用

```
<p style="margin: 0;"> Welcome to my site </p> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T02:11:38.767

你应该改掉使用内联样式的习惯，它们是不好的，并且会妨碍你的标记变得干净和易于阅读。即使它只针对一个元素，您也可以`id`在 CSS 中定位 then ，这表明只会有一个（每页）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-02T03:41:22.107

当然第一种方法更可取。它看起来更好，更干净，更正确。您应该始终保持一致，并且外部样式表是要走的路。如果你想更干净，你可以避免 class="content" 如果它在一个具有特定名称的 div 中，并且你希望该 div 中的所有段落具有相同的样式（你应该这样做）。

例如：

```
<div class="content"><p>Welcome to my site</p> ~~~ other content ~~~~ </div> 
```

进而

```
#content p { ~~~ styles ~~~ } 
```

现在，就您的其他问题而言。要让内容周围没有任何空间，请使用`<span>`标签。您可以将其设置为与标签相同的样式，`<p>`据我所知，它周围没有任何空间，并且不会对边距或填充做出反应。

# ruby - 如何在 DataMapper 中按顺序使用聚合？

> ID：15754858
> 
> 赞同：2
> 
> 时间：2013-04-02T01:59:51.153
> 
> 标签：ruby, datamapper, ruby-datamapper

我有一个简单的课程，例如：

```
class Foo
    include DataMapper::Resource
    property :id, Serial
    property :bar, Text, lazy: false
    property :created_on, DateTime, default: lambda { |r,p| DateTime.now }
end 
```

我想选择它们，按 bar 分组并按 max(created_on) 排序。我需要的 SQL 是：

```
SELECT "bar" FROM "foo" GROUP BY "bar" ORDER BY MAX("created_on") DESC 
```

但我不知道如何使用 DataMapper 来获得它。

我试过类似的东西：

```
Foo.all(fields: [:bar], unique: true, order: [:created_on.desc.max]) 
```

但你不能像那样使用 max 。我不知道该怎么做。

你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T14:49:48.717

似乎没有必要使用最大聚合。通过按 created_on 列的降序排序，它会找到 MAX 并从那里开始。

你可能会逃脱：

```
Foo.all(fields: [:bar], unique: true, order: [created_on.desc]) 
```

不使用 .max 的顺序。

这将与以下内容相同：

```
SELECT "bar" FROM "foo" GROUP BY "bar" ORDER BY "created_on" DESC 
```

希望这有效。

也看看 [http://datamapper.org/docs/find.html](http://datamapper.org/docs/find.html)

# javascript - 如何使用javascript设置ID？

> ID：15754859
> 
> 赞同：56
> 
> 时间：2013-04-02T02:00:12.080
> 
> 标签：javascript

我正在生成一个包含很多产品的页面，为此，我需要很多 ID，并且我使用服务器端（Python）完成了它，所以我为每个产品发送了它自己的`<div id='hello1'> test </div>`

现在因为用户将 dinamycaly 设置一个值并在浏览器中查看结果，所以我想生成另一个`ID`，我已经找到了`btoa("hello1")`，所以我生成了另一个`ID`

`btoa("hello1")`那么问题来了，我该如何输入`<div>`？

编辑：我要生成的是另一个`<div>`，而不是更新第一个。

```
<input id="{{str(product["avt"]["fto"])}}" > this will become  <input id="12232" > because it is special to Tornado Template
<span>New price :</span>
<span id=btoa({{str(produit["avt"]["fto"])}})> This  is where i use innerHTML </span> 
```

如您所见，用户将输入一个值并动态查看它。

这将在 Python 中使用：

```
<span id="{{base64.b64encode(str(produit["avt"]["fto"]))}}"></span> 
```

但我如果可以使用 Javascript 完成，服务器将免费进行一半的操作！

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2013-04-02T02:01:56.040

你的意思是这样吗？

```
var hello1 = document.getElementById('hello1');
hello1.id = btoa(hello1.id); 
```

* * *

为了进一步举例，假设您想获取所有具有“abc”类的元素。我们可以用它`querySelectorAll()`来完成这个：

**HTML**

```
<div class="abc"></div>
<div class="abc"></div> 
```

**JS**

```
var abcElements = document.querySelectorAll('.abc');

// Set their ids
for (var i = 0; i < abcElements.length; i++)
    abcElements[i].id = 'abc-' + i; 
```

这会将 ID 分配`'abc-<index number>'`给每个元素。所以它会是这样的：

```
<div class="abc" id="abc-0"></div>
<div class="abc" id="abc-1"></div> 
```

* * *

要创建一个元素并分配一个`id`我们可以使用`document.createElement()`然后`appendChild()`。

```
var div = document.createElement('div');
div.id = 'hello1';

var body = document.querySelector('body');
body.appendChild(div); 
```

* * *

**更新**

`id`如果您的脚本在您的 HTML 文件中，您可以像这样设置元素。

```
<input id="{{str(product["avt"]["fto"])}}" >
<span>New price :</span>
<span class="assign-me">

<script type="text/javascript">
    var s = document.getElementsByClassName('assign-me')[0];
    s.id = btoa({{str(produit["avt"]["fto"])}});
</script> 
```

不过，您的要求仍然不是 100% 清楚。

# r - 当我没有超级用户权限时在 R 上安装“ncdf”

> ID：15754861
> 
> 赞同：0
> 
> 时间：2013-04-02T02:00:43.230
> 
> 标签：r, unix, netcdf, supercomputers

我可以访问一台我没有超级用户权限的超级计算机。这台机器有 netcdf 版本 3 和 4 可用，但我不知道它是否有 R 安装所需的开发库`ncdf`。我通常用它来运行并行化的 R 代码。通常我可以将软件包安装到个人库中，效果很好。例如：

```
> install.packages('plm')
Installing package(s) into '/home/diag/opt/R/local/lib'
(as 'lib' is unspecified)
Warning in install.packages("plm") :
  'lib = "/home/diag/opt/R/local/lib"' is not writable
Would you like to use a personal library instead?  (y/n) 
```

我需要这个`ncdf`包，但是我无法安装它，因为机器找不到一些`ncdf`依赖的netcdf库。这台机器有 netcdf 版本 3 和 4 可用，但我不知道它是否有 R 安装所需的开发库`ncdf`，也不知道如何检查。我正在努力争取截止日期，不幸的是管理员无法帮助我解决问题。

这是我尝试安装时发生的情况`ncdf`：

```
[andrewcd@computer-login2 ~]$ module load R
[andrewcd@computer-login2 ~]$ module load netcdf/3.6.2
[andrewcd@computer-login2 ~]$ R           

R version 2.15.2 (2012-10-26) -- "Trick or Treat" 
```

...（切）

```
Type 'q()' to quit R.

[Previously saved workspace restored]

> install.packages('ncdf')
Installing package(s) into '/home/diag/opt/R/local/lib'
(as 'lib' is unspecified)
Warning in install.packages("ncdf") :
  'lib = "/home/diag/opt/R/local/lib"' is not writable
Would you like to use a personal library instead?  (y/n) y
--- Please select a CRAN mirror for use in this session ---
CRAN mirror 

 1: 0-Cloud                       2: Argentina (La Plata) 
```

...（切）

```
91: Vietnam                      

Selection: 75
trying URL 'http://cran.stat.ucla.edu/src/contrib/ncdf_1.6.6.tar.gz'
Content type 'application/x-tar' length 79403 bytes (77 Kb)
opened URL
==================================================
downloaded 77 Kb

* installing *source* package 'ncdf' ...
** package 'ncdf' successfully unpacked and MD5 sums checked
checking for nc-config... no
checking for gcc... gcc -std=gnu99
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc -std=gnu99 accepts -g... yes
checking for gcc -std=gnu99 option to accept ISO C89... none needed
checking how to run the C preprocessor... gcc -std=gnu99 -E
checking for grep that handles long lines and -e... /bin/grep
checking for egrep... /bin/grep -E
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking netcdf.h usability... no
checking netcdf.h presence... no
checking for netcdf.h... no
configure: error: netcdf header netcdf.h not found
ERROR: configuration failed for package 'ncdf'
* removing '/home/andrewcd/R/x86_64-unknown-linux-gnu-library/2.15/ncdf'

The downloaded source packages are in
    '/tmp/RtmpIDiTdL/downloaded_packages'
Warning message:
In install.packages("ncdf") :
  installation of package 'ncdf' had non-zero exit status 
```

有人知道我可以做些什么来使 R 能够找到所需的库吗？

另外，请注意，我更喜欢使用`ncdf`它`ncdf4`（为了与现有代码兼容）。但是，当我尝试安装时`ncdf4`，我收到以下错误消息，这可能具有指导意义：

```
* installing *source* package 'ncdf4' ...
** package 'ncdf4' successfully unpacked and MD5 sums checked
checking for nc-config... no
-----------------------------------------------------------------------------------
Error, nc-config not found or not executable.  This is a script that comes with the
netcdf library, version 4.1-beta2 or later, and must be present for configuration
to succeed.

If you installed the netcdf library (and nc-config) in a standard location, nc-config
should be found automatically.  Otherwise, you can specify the full path and name of
the nc-config script by passing the --with-nc-config=/full/path/nc-config argument
flag to the configure script.  For example:

./configure --with-nc-config=/sw/dist/netcdf4/bin/nc-config

Special note for R users:
-------------------------
To pass the configure flag to R, use something like this:

R CMD INSTALL --configure-args="--with-nc-config=/home/joe/bin/nc-config" ncdf4

where you should replace /home/joe/bin etc. with the location where you have
installed the nc-config script that came with the netcdf 4 distribution.
-----------------------------------------------------------------------------------
ERROR: configuration failed for package 'ncdf4'
* removing '/home/andrewcd/R/x86_64-unknown-linux-gnu-library/2.15/ncdf4'

The downloaded source packages are in
    '/tmp/RtmpIDiTdL/downloaded_packages'
Warning message:
In install.packages("ncdf4") :
  installation of package 'ncdf4' had non-zero exit status 
```

显然系统找不到“nc-config”。（我自己找不到）。

任何关于我可以做什么，或者我可以要求超级用户为我做什么的建议，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T05:54:46.140

嗨，我认为您在安装“ncdf”时遇到的错误是：

```
configure: error: netcdf header netcdf.h not found 
```

您必须安装包含 netcdf.h 头文件的 linux 包。您可能需要超级用户访问权限才能执行相同操作。如果您有超级用户访问权限，那么您可以在提供此头文件的 linux detribtion 的存储库中搜索并安装它。

# c++ - 将 wchar_t 转换为 char c++

> ID：15754863
> 
> 赞同：0
> 
> 时间：2013-04-02T02:00:57.180
> 
> 标签：c++, char, wchar-t

我使用mingw编译器。如何转换`wchar_t`为`char`？

```
Data(HWND hwnd,  wchar_t szFileName[MAX_PATH])
{
    string sIn;
    ifstream infile;
    infile.open(szFileName);
    infile.seekg(0,ios::beg);

    // fill vector with file rows
    while ( getline(infile,sIn ) )
    {
       fileRows.push_back(sIn);
    }
} 
```

我想将 wchar_t szFileName 转换为 char szFileNameChar。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T02:04:54.513

```
string str("i'm char[]");
wstring wstr(str.begin(), str.end());

wstring wstr(L"i'm wchar_t[]");
string str(wstr.begin(), wstr.end()); 
```

详细解释请参考以下帖子： [std::wstring VS std::string](https://stackoverflow.com/questions/402283/stdwstring-vs-stdstring)

# android - 启动时出现 Android libGDX 错误 No JNI_Onload found

> ID：15754864
> 
> 赞同：0
> 
> 时间：2013-04-02T02:01:08.180
> 
> 标签：android, android-ndk, intellij-idea, libgdx

我的游戏在桌面上运行，但是当我在 Android 上启动时，我可以看到这些消息出现在日志中。

```
04-01 21:50:10.314: D/ActivityThread(21047): setTargetHeapConcurrentStart:2097152
04-01 21:50:10.334: D/dalvikvm(21047): Trying to load lib /data/data/com.vulcanic.flickit/lib/libgdx.so 0x41e53a48
04-01 21:50:10.334: D/dalvikvm(21047): Added shared lib /data/data/com.vulcanic.flickit/lib/libgdx.so 0x41e53a48
04-01 21:50:10.334: D/dalvikvm(21047): No JNI_OnLoad found in /data/data/com.vulcanic.flickit/lib/libgdx.so 0x41e53a48, skipping init
04-01 21:50:10.344: D/libEGL(21047): loaded /system/lib/egl/libEGL_adreno200.so
04-01 21:50:10.344: D/libEGL(21047): loaded /system/lib/egl/libGLESv1_CM_adreno200.so
04-01 21:50:10.354: D/libEGL(21047): loaded /system/lib/egl/libGLESv2_adreno200.so
04-01 21:50:10.364: I/Adreno200-EGL(21047): <qeglDrvAPI_eglInitialize:269>: EGL 1.4 QUALCOMM build: AU_LINUX_ANDROID_JB_REL_RB4.04.01.02.16.049_msm8960_JB_REL_RB4.2_Merge_release_AU (Merge)
04-01 21:50:10.364: I/Adreno200-EGL(21047): Build Date: 12/12/12 Wed
04-01 21:50:10.364: I/Adreno200-EGL(21047): Local Branch: 
04-01 21:50:10.364: I/Adreno200-EGL(21047): Remote Branch: m/jb_rel_rb4.2
04-01 21:50:10.364: I/Adreno200-EGL(21047): Local Patches: NONE
04-01 21:50:10.364: I/Adreno200-EGL(21047): Reconstruct Branch: AU_LINUX_ANDROID_JB_REL_RB4.04.01.02.16.049 +  NOTHING 
```

我在 Android 项目的 libs 目录中有`armeabi`and目录。`armeabi-v7a`

如果有帮助，我正在使用 IntelliJ IDEA 12.0.4。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T03:24:53.430

这不是错误。`JNI_OnLoad`NDK 库中不需要。直接无视（好了。

# html - div 的水平滚动未按预期工作

> ID：15754866
> 
> 赞同：0
> 
> 时间：2013-04-02T02:01:31.463
> 
> 标签：html, css

我制作了一个 jsfiddle 来演示我的问题： [这里与 css 一起](http://jsfiddle.net/rbarkas/PvY5Z/)

```
<div -d=wrapper">
<div id="header">Hello, I'm the header</div>
<div id="content">
    <div id="content-left" >Some text in left</div>
    <div id="content-right">Some text in right</div>
</div>
<div id="footer">Footer</div>
</div> 
```

我想要的是让 div 的 content-left 和 content-right 随着窗口在 x 轴上变窄而变得更窄和新芽滚动条。

它的作用是一旦两个 div 都没有足够的空间，它会将 content-right 堆叠在 content-left 下，而不是缩小它们。我希望滚动条仅在需要时出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T02:04:50.410

为 #content显式设置`width`，否则它将尝试变得聪明并包装元素。

[jsFiddle](http://jsfiddle.net/WrZ3x/)

```
#content {width:300px;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T02:10:01.700

**[JSFiddle](http://jsfiddle.net/PvY5Z/4/)**

`max-width`如果需要，请在...上设置 a`#content`然后为每列设置 50% 的宽度。

```
#content{
max-width: 300px;
}

#content-left{
width: 50%;
}

#content-right{
width: 50%;
} 
```

# mysql - mysql将字段转换为列

> ID：15754867
> 
> 赞同：0
> 
> 时间：2013-04-02T02:01:34.947
> 
> 标签：mysql, pivot

我有以下表格

```
表 1 表 2
id q_id 内容 id w_id q_id c_id 排名
---------------------- ---------------------------- --------------------
95 2046 1=E 123 22404 2046 100 1

96 2046 2=G 124 22404 2046 101 2

97 2046 3=N 125 22404 2046 102 2

98 2046 4=B 126 22404 2046 103 2

99 2046 5=V 127 22404 2046 104 3

100 2046 A1 128 22404 2046 105 3

101 2046 A2

102 2046 A3

103 2046 A4

104 2046 A5

105 2046 A6

```

我需要从表格行转换到列

原始结果：

```

c_id 内容 EGNBV
----------------------------------------------
100 A1 1 0 0 0 0

101 A2 0 1 0 0 0

102 A3 0 1 0 0 0

103 A4 0 1 0 0 0

104 A5 0 0 1 0 0

105 A6 0 0 1 0 0

```

结果 1 的代码：

```
(SELECT c.id, c.content, a.E, a.G, a.N, a.B, a.V FROM table_1 t
INNER JOIN 
(SELECT t1.id,  
  Count(IF(t2.ranking=1,1,0)) AS E,
  Count(IF(t2.ranking=2,1,0)) AS G,
  Count(IF(t2.ranking=3,1,0)) AS N,
  Count(IF(t2.ranking=4,1,0))AS B,
  Count(IF(t2.ranking=5,1,0)) AS V
FROM table_1 t1, table_2 t2 
WHERE t1.question_id = 2046 AND t2.question_id = 2046 AND t2.choice_id = t1.id 
AND t2.ranking >= 0 AND t2.w_id IN (22404)
GROUP BY t1.id) a ON a.id = t1.id); 
```

到新结果：

```
内容 A1 A2 A3 A4 A5 A6
-----------------------------------------------------------
1=E 1 0 0 0 0 0

2=G 0 1 1 1 0 0

3=N 0 0 0 0 1 1

4=B 0 0 0 0 0 0

5=V 0 0 0 0 0 0

```

我正在使用 MySql，但不能使用 pivot。另外，我想我不会知道否。表 1 中的“A”表示最高可达“A30”。因此它应该是动态的.....任何人都可以给我关于结果 2 的建议吗？

* * *

@bluefeet 我想我需要在 where caluse 中再添加两个条件，因为左连接可能会加入 table_1 中的大量数据。所以它不能显示结果。

```
select c.content,
sum(case when t1.content = 'A1' then 1 else 0 end) A1,
sum(case when t1.content = 'A2' then 1 else 0 end) A2,
sum(case when t1.content = 'A3' then 1 else 0 end) A3,
sum(case when t1.content = 'A4' then 1 else 0 end) A4,
sum(case when t1.content = 'A5' then 1 else 0 end) A5
from table_1 c
left join table_2 t2
on left(c.content, 1) = t2.ranking
left join table_1 t1
on t2.c_id = t1.id
where locate('=', c.content) > 0 and c.id IN (95,96,97,98,99) and w_id = 22404
group by  c.content; 
```

结果会是这样

```
| CONTENT | A1 | A2 | A3 | A4 | A5 | A6 |
-----------------------------------------
|     1=E |  1 |  0 |  0 |  0 |  0 |  0 |
|     2=G |  0 |  1 |  1 |  1 |  0 |  0 |
|     3=N |  0 |  0 |  0 |  0 |  1 |  1 | 
```

缺少两行（4=B，5=V）。

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:23:40.040

以下查询应该为您提供结果，但是它做了一些假设：

*   最后一`content`列将始终存在等号`=`。这用于定位内容中的行。
*   带有符号的`content`列值`=`将关联的排名作为第一个字符。此字符用于将行加入到排名中`table_2`

如果您有已知数量的值，则可以使用以下内容：

```
select c.content,
  sum(case when t1.content = 'A1' then 1 else 0 end) A1,
  sum(case when t1.content = 'A2' then 1 else 0 end) A2,
  sum(case when t1.content = 'A3' then 1 else 0 end) A3,
  sum(case when t1.content = 'A4' then 1 else 0 end) A4,
  sum(case when t1.content = 'A5' then 1 else 0 end) A5
from table_1 c
left join table_2 t2
  on left(c.content, 1) = t2.ranking
left join table_1 t1
  on t2.c_id = t1.id
where locate('=', c.content) > 0
group by  c.content; 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/393c0/96)。

如果您将有未知数量的`A`值，那么您可以使用准备好的语句来生成动态 SQL：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'sum(CASE WHEN t1.content = ''',
      content,
      ''' THEN 1 else 0 END) AS `',
      content, '`'
    )
  ) INTO @sql
FROM Table_1
where locate('=', content)= 0;

SET @sql 
  = CONCAT('SELECT c.content, ', @sql, ' 
            from table_1 c
            left join table_2 t2
              on left(c.content, 1) = t2.ranking
            left join table_1 t1
              on t2.c_id = t1.id
            where locate(''='', c.content) > 0
            group by  c.content;');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/393c0/97)。两者都给出结果：

```
| CONTENT | A1 | A2 | A3 | A4 | A5 | A6 |
-----------------------------------------
|     1=E |  1 |  0 |  0 |  0 |  0 |  0 |
|     2=G |  0 |  1 |  1 |  1 |  0 |  0 |
|     3=N |  0 |  0 |  0 |  0 |  1 |  1 |
|     4=B |  0 |  0 |  0 |  0 |  0 |  0 |
|     5=V |  0 |  0 |  0 |  0 |  0 |  0 | 
```

# ruby-on-rails - 作为准备模型的一种方式，我应该如何将表单数据传递给我的新操作？

> ID：15754869
> 
> 赞同：0
> 
> 时间：2013-04-02T02:01:47.517
> 
> 标签：ruby-on-rails

我有发票，在发票索引中我有一个“创建新发票”按钮。这会出现一个表格，他们可以在其中选择发票的客户。但是，我不确定如何将其传递给 invoices#new 操作以在下一页加载之前准备数据。我该怎么做呢？

编辑：

invoices#new 页面之前的表格基本上只是告诉发票它是针对哪个客户的。然后我将在发票新页面中自动填写客户地址

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T02:43:37.640

在选择客户端操作的控制器中执行以下操作（我将称之为`select_client`）：

```
def select_client
  @clients = Client.all
end 
```

在您的第一个表单上执行以下操作：

```
<%= form_tag(new_invoice_path, method: :get %>
# the above can use GET or you could leave it out if you wanted
  <%= select_tag "client", options_from_collection_for_select(@clients, "id", "name") %>
  # button etc.
<% end %> 
```

然后在`invoices#new`

```
def new
  # after completing the previous form the invoices#new URL should have the
  # client ID attached to it, http://localhost:3000/invoices/new?client=3
  @client = Client.find(params[:client])
  # the next line should auto-populate your form in invoices/new.html.erb
  @invoice = Invoice.new(address: @client.address, name: @client.name)
end 
```

# eclipse - 遵循这些说明的 Eclipse CPP 和 GNU

> ID：15754872
> 
> 赞同：0
> 
> 时间：2013-04-02T02:02:20.890
> 
> 标签：eclipse, opengl, build, precompiled

我正在尝试构建一个给定的预编译头文件来创建一个静态库。我不使用 eclipse ide（我使用 VC++10），我需要帮助理解这些说明：

如何构建 GLUS：

1.  安装适用于 C/C++ 开发人员的 Eclipse IDE 和适用于您的操作系统的 GNU 编译器集合。
2.  解压缩此 ZIP 文件并将 workspace-cpp 文件夹设置为您的 Eclipse 工作区。
3.  将每个文件夹作为单独的现有项目导入。
4.  将 Eclipse 中的构建配置设置为您的操作系统。
5.  构建 GLUS。

我有 GLUS 的所有文件，但我还没有将 GLEW 和 GFLW 与 eclipse 链接（为 vc++10 做过，但不知道在 eclipse 中如何）。所以我也需要帮助。

替代方案：为什么我不在 VC++10 上编译它？好吧，我尝试并不断收到错误 C1853 并且无法解决它。所以我试图通过说明解决问题。>.>

否则，如果有帮助，所有来源都在 .c 中。有什么想法吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T03:00:17.043

似乎 GLUS 的源代码存档支持 CMake，那么为什么不直接使用它呢？[在此处](https://github.com/McNopper/GLUS)下载最新的 GLUS 源，将源解压缩到任意目录，然后打开终端/命令提示符。导航到您提取源代码的目录并输入`cmake .`（假设 cmake 安装在您的系统路径中）

**在 Windows 中**：

CMake 将生成一个 Visual Studio 解决方案文件，您可以使用 VS 打开并使用 F5 构建该文件。如果构建成功，这将在 GLUS/Debug 中生成一个 glus.lib 文件。将此库文件添加到您的 lib 路径，并将 /src 中的 src 文件添加到您的包含路径。

现在，如果您仍然收到预编译头错误（错误 C1853），请在解决方案资源管理器中选择项目节点，右键单击，选择“属性->配置属性->C/C++->高级->编译为”。选择“编译为 C 代码 (/TC)”。此外，您可能需要导航到“属性->配置属性->C/C++->预编译头文件”。您可以在此处查看您可能想要使用的预编译头文件的选项设置；

**在 Unix / Linux / MAC 中**：

在运行 cmake 类型`make all`以构建并将`sudo make install`生成的文件推送到您的系统路径之后。

# python - 循环之神再次出击 - 尽管有 GUI 主循环，如何保持套接字连接？

> ID：15754878
> 
> 赞同：3
> 
> 时间：2013-04-02T02:02:48.443
> 
> 标签：python, sockets, client-server, tkinter

**问题**

如何`mainloop`在同一个脚本中同时运行 Tkinter 和无限服务器循环？

**背景**

我正在 Tkinter ( [Python 2.7.3](http://docs.python.org/2/) ) 中创建一个 GUI 服务器。到目前为止，GUI 工作正常，服务器工作正常，*但*我在集成两者时遇到问题。据我所知（如果我错了，请纠正我）服务器需要在无限循环上运行才能接受新用户。遗憾的是，GUI 还需要一个无限循环。我想知道如何让两个循环同时运行。

我当前的 mainloop 函数看起来像这样（`s`是套接字对象）：

```
def mainloop(s):
    while True:
        channel, addr = s.accept()
        print "Connected with", addr 
```

这显然是保持服务器运行所必需的（我认为）。但问题是，这个循环出现在我之前`mainloop`，因此我遇到了问题。如果我反过来做，服务器永远不会打开。

**完整代码**

我的服务器代码在[这里](http://pastebin.com/Aj541zUi)，我的客户端在[这里](http://pastebin.com/C2PjVWUU)。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T02:28:58.000

使用线程模块在新线程中打开您的服务器主循环。

代替

```
mainloop(s) 
```

和

```
thread.start_new_thread(mainloop, (s,)) 
```

然后你可以调用 root.mainloop() 来运行 Tkinter，就像你做的那样。

* * *

**更新**

根据 A. Rodas 在下面的评论，最好使用`threading`与 Python 3 兼容的较新模块。

所以你可以更换

```
mainloop(s) 
```

和

```
threading.Thread(target=mainloop, args=(s,)).start() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T04:17:22.757

您可能想使用 Twisted [http://twistedmatrix.com/trac/](http://twistedmatrix.com/trac/)

它将 Tk 循环集成到其反应器循环中（负责联网）[http://twistedmatrix.com/documents/8.2.0/api/twisted.internet.tksupport.html](http://twistedmatrix.com/documents/8.2.0/api/twisted.internet.tksupport.html)，您可以轻松构建协议....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T02:33:31.457

在单独的线程中运行它们。有关更多信息，请参阅[线程模块文档](http://docs.python.org/2/library/threading.html)。

# ios - 用于 int 值的 StringWithFormat 有一个问题

> ID：15754881
> 
> 赞同：2
> 
> 时间：2013-04-02T02:03:16.707
> 
> 标签：ios, objective-c, int, logic, stringwithformat

我目前有一个自定义格式并显示在标签中的 int 值。int 值始终是一个 5 位数字，我在十分位和百分之一之间用 + 符号显示它。如果 number = 12345，则 displayNumber = 123+45。

```
ViewController.m

int high = number / 100;
int low = number - (high * 100);
NSString *displayNumber = [NSString stringWithFormat:@"%d+%d", high, low]; 
```

我的问题是数字在十分位时为零。如果 number = 12304，displayNumber 将显示为 123+4，我希望它显示为 123+04。我已经尝试使用 if 语句来表示 low < 10，但这与我的其余代码不能很好地结合。有没有什么简单的方法可以让低位显示两位数，即使它是一位数？提前感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T02:10:16.170

试试这个：

```
NSString *displayNumber = [NSString stringWithFormat:@"%d+%02d", high, low];
//                                                         ^^
//                                                         ||
//                                                         |+-- Two positions
//                                                         +--- Pad with zeros 
```

该声明

```
int low = number - (high * 100); 
```

可以优化为

```
int low = number % 100; 
```

您也可以完全跳过临时变量：

```
NSString *displayNumber = [NSString stringWithFormat:@"%d+%02d", number/100, number%100]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T22:52:56.417

下面的代码在它等于 0 时保留了特定情况的第十位。前任。编号 = 12304，显示编号 = 123+04。我没有像 dasblinkenlight 建议的那样优化它。感谢dasblinkenlight！

```
 int high = number / 100;
  int low = number - (high * 100);

  NSString *displayNumber = [NSString stringWithFormat:@"%d+%02d", high, low]; 
```

# actionscript-3 - 物体卡在击中其他最近移除的物体的隐形版本

> ID：15754882
> 
> 赞同：1
> 
> 时间：2013-04-02T02:03:35.903
> 
> 标签：actionscript-3, flash

大家好，我在玩一个简单的 Flash 游戏时遇到了问题。到目前为止，一旦射弹击中物体，就很难将其移除。

经过网站发现添加 .parent.removeChild(wtv); 删除对象。当使用我的玩家发射的物体击中一个物体时，两者都会被移除，但是当另一个物体在同一位置发射时，发射的物体会击中一个刚刚移除的不可见物体，然后在该位置移除而不是继续直到舞台结束或其他物体被击中。这似乎只发生在被发射的物体被移除时。

这是代码，我认为问题出在 moveLaser 函数中，如果需要更多信息，请告诉我，任何建议都会很棒，谢谢。

```
package{

import flash.display.MovieClip;
import flash.events.Event;
import flash.events.KeyboardEvent;
import flash.ui.Keyboard;
import flash.display3D.IndexBuffer3D;

public class Level_1 extends MovieClip{
    private var player:SpaceShip;
    private var objects:Array;
    private var probMoveObj:int;
    private var bgStars:Level1_stars;

    public function Level_1(){
        addEventListener(Event.ADDED_TO_STAGE, onAddedToStage);
    }

    public function onAddedToStage(event:Event):void{
        removeEventListener(Event.ADDED_TO_STAGE, onAddedToStage);

        probMoveObj = 1;

        bgStars = new Level1_stars();
        player = new SpaceShip();
        objects = new Array(50);

        bgStars.vx = 50;
        addChild(bgStars);

        for(var i:int = 0; i < objects.length; i++){
            objects[i] = new GameObject();
            addGameObjects(objects[i]);
        }

        player.x = 100;
        player.y = stage.stageHeight - 250;
        addChild(player);

        bgStars.addEventListener(Event.ENTER_FRAME, moveBackground);
        player.addEventListener(Event.ENTER_FRAME, movePlayer);
        stage.addEventListener(KeyboardEvent.KEY_DOWN, checkKey);
        stage.addEventListener(KeyboardEvent.KEY_DOWN, checkFire);

    }

    public function movePlayer(event:Event):void{

        /*for(var i:int = 0; i < objects.length; i++){
            if(objects[i].hitTestObject(player.hit)){
                objects[i].removeEventListener(Event.ENTER_FRAME, moveObject);
                trace("HIT");
            }
        }*/
    }

    public function checkFire(event:KeyboardEvent):void{
        if(event.keyCode == Keyboard.SPACE){
            trace("SPACE");
            var laser:Ship_laser = new Ship_laser();
            var laser2:Ship_laser = new Ship_laser();
            laser.x  = player.x + 30;
            laser2.x = player.x + 30;
            laser.y = player.y - 30;
            laser2.y = player.y + 30;
            laser.addEventListener(Event.ENTER_FRAME, moveLaser);
            laser2.addEventListener(Event.ENTER_FRAME, moveLaser);
            addChild(laser);
            addChild(laser2);
        }
    }

    public function checkKey(event:KeyboardEvent):void{

        if(event.keyCode == Keyboard.UP){
            if((player.y - (player.height / 2)) >= 0){
                player.y -= 10;
                trace("UP");
            }
        }
        else if(event.keyCode == Keyboard.DOWN){
            if((player.y +(player.height / 2)) <= stage.stageHeight){
                player.y += 10;
                trace("down");
            }
        }
        else if(event.keyCode == Keyboard.LEFT){
            if(player.x - (player.width / 2) >= 0){
                player.x -= 10;
                trace("LEFT");
            }
        }
        else if(event.keyCode == Keyboard.RIGHT){
            if(player.x + (player.width / 2) <= stage.stageWidth){
                player.x += 10;
                trace("RIGHT");
            }
        }
    }

    public function addGameObjects(gameObj:GameObject):void{
        // position the object randomly, but to the right of the player
            gameObj.x = stage.stageWidth + (Math.ceil(Math.random() * (4000 + gameObj.width/2)));
            gameObj.y = Math.ceil(Math.random() * (stage.stageHeight - 100 - gameObj.height/2));
            // add object to the stage
            addChild(gameObj);
            // set the velocity of the object
            gameObj.vx = -Math.ceil((Math.random() + 1) * 2);
            // move the object each frame
            gameObj.addEventListener(Event.ENTER_FRAME, moveObject);
    }

    private function moveObject(event:Event):void
    {
        var gameObj:GameObject = event.target as GameObject;
        gameObj.x += gameObj.vx;
    }

    private function moveBackground(event:Event):void{

        if(bgStars.x < ((bgStars.width / 2 + 100) * -1)){
            bgStars.x = 0;   
        }
        else{
            bgStars.x -= bgStars.vx;
        }
    }

    private function moveLaser(event:Event):void{

        var laser:Ship_laser = event.target as Ship_laser;

        for(var i:int = 0; i < objects.length; i++){
            if(objects[i].hitTestObject(laser.hit)){
                objects[i].removeEventListener(Event.ENTER_FRAME, moveObject);
                if(objects[i].parent){
                    objects[i].parent.removeChild(objects[i]);
                }

                removeEventListener(Event.ENTER_FRAME, moveLaser);
                if(laser.parent){
                    laser.parent.removeChild(laser);
                }

            }
        }

        if(laser.x > stage.stageWidth){
            trace("LASER REMOVED");

            removeEventListener(Event.ENTER_FRAME, moveLaser);
            if(laser.parent){
                laser.parent.removeChild(laser);
            }
        }
        else{
            laser.x += 20;
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T03:27:19.763

您的`laser`对象已附加到`this`，但出于某种最奇怪的原因，您`laser.removeChild()`本质上是要求`laser`将其从自身中删除。你已经省略`parent`了那里。

```
laser.parent.removeChild(laser); 
```

此外，如果您的激光将同时到达舞台边缘并`gameObject`在同一帧上击中 a ，则存在一个缺陷，尝试`laser`连续两次删除时会遇到 1009 错误，第一次调用 null `laser.parent`，第二次调用将调用方法空引用。你也必须解决这个问题，可能`if (laser.parent)`就像你对对象所做的那样。

更新：您还从错误的对象中删除了事件侦听器，您将其连接到激光，并从中删除`this`不是激光。你应该做：

```
laser.removeEventListener(Event.ENTER_FRAME, moveLaser); 
```

# python - 如何使用 pymongo 处理庞大的集合

> ID：15754883
> 
> 赞同：0
> 
> 时间：2013-04-02T02:03:50.530
> 
> 标签：python, mongodb, cursor, pymongo

我在网上寻找我的问题，但有点卡住了，我正在尝试使用 pymongo 使用游标检查 MongoDB 上的一个巨大集合，但是它似乎没有像 JS 这样的 python 实现 hasNext() 。

这是我的代码：

```
cursor = news.find() 
while(cursor.hasNext()):    
     doc = cursor.next() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T04:19:46.200

知道了！

pymongo 没有 hasNext()，如果没有更多对象，则 next() 方法返回 None，所以这就是诀窍

不管怎样，谢谢！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-19T06:04:54.670

您可以通过**for**语句查看集合

```
for record in cursor:
  print record 
```

**for**关键字实际上为您调用了**_ *iter* _()**和**next()**。 [http://docs.python.org/2/library/collections.html#collections.Iterator](http://docs.python.org/2/library/collections.html#collections.Iterator)

**pymongo 中的光标**对象带有这两种方法。 [https://github.com/mongodb/mongo-python-driver/blob/master/pymongo/cursor.py#L1010](https://github.com/mongodb/mongo-python-driver/blob/master/pymongo/cursor.py#L1010)

# scalability - 全局数据类型的可扩展性

> ID：15754885
> 
> 赞同：2
> 
> 时间：2013-04-02T02:03:54.480
> 
> 标签：scalability, c1-cms

有谁知道全局数据类型的可扩展性如何？我正在尝试制作注册用户列表，想知道它是否可以支持大量用户（例如 100k）。Composite 管理 UI 显然不是，因为它试图在树节点下显示所有用户数据。如果你有 10 万件物品，我无法想象会是这样。

有人有这方面的经验吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:52:16.767

数据层对此没有任何问题，但确实不能使用正常的树结构来显示这么多的数据。相反，您应该创建显示分页列表的自定义页面，并具有搜索和过滤功能。

[以下是如何从控制台http://docs.composite.net/Console/Guide-to-Applications/How-to-Execute-Custom-Commands](http://docs.composite.net/Console/Guide-to-Applications/How-to-Execute-Custom-Commands)打开您自己的页面（aspx、cshtml 或其他第三方）的指南

# string - 如何在R中获取不超过一定长度的字符串

> ID：15754887
> 
> 赞同：1
> 
> 时间：2013-04-02T02:04:15.653
> 
> 标签：string, r

我有一个看起来像这样的字符串向量

```
x <- c("WDNTO","WDRN","WDSAX","WECAX","WEN","WEDTO") 
```

我想要做的是只提取不超过 4 个字符的字符串，导致

```
 WDNT,WDRN,WDSA,WECA,WEN,WEDT 
```

有什么办法呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T02:10:21.430

```
substr(x,1,4)
?substr 
```

我对SO的第一个回答！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T02:07:54.970

使用`substr`，例如

```
substr(x, 1, 4) 
```

# python - python捕获退出/捕获系统异常并发出kerberos命令

> ID：15754888
> 
> 赞同：0
> 
> 时间：2013-04-02T02:04:22.493
> 
> 标签：python, unix, scripting, kerberos

我们目前正在我们的 unix 环境中迁移到 SSH 和 Kerberos 身份验证方案。每当脚本中断、出现错误或脚本成功执行时，我都需要在我们所有的自动化 python 脚本中发出 Kerberos OS 命令。我知道在 bash 中您可以在退出时陷入陷阱，但根据我的研究，python 中没有该功能。我的尝试是使用 try/except/else 块并且可以工作，但不会捕获直接进程终止并发出命令。我绝不是 python 专家，所以有人知道更好的方法或要研究的函数吗？此外，这只适用于调用主函数的简单脚本，我的一些脚本是面向对象的并且更复杂，我的方法不起作用。这是我对一个简单循环的尝试。有什么建议吗？

```
def main():
    while (True):
        print "Interrupt Me..."

def watchForInterrupts(x):
    #define function to issue kdestroy command
    def issueKdestroy():
        import os
        os.system("kdestroy -q")
        print "issued kdestroy"
    try:
        x()
    except: 
        print "interrupted, issuing kdestroy"
        #call issueKdestroy function if interrupted
        issueKdestroy()
    #else block to issue kdestroy if script completed successfully
    else:
        print "executed successfully, issuing cleanup kdestroy"
        issueKdestroy()

#call watchForInterrupts function with main passed as a parameter 
watchForInterrupts(main) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T04:15:32.887

尝试使用此模块：

[http://docs.python.org/2/library/atexit.html](http://docs.python.org/2/library/atexit.html)

它定义了一种更方便的设置关闭挂钩的方法。

```
import atexit

@atexit.register
def goodbye():
    print "You are now leaving the Python sector." 
```

整齐吧？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T02:44:00.620

我建议使用`finally`

```
def watchForInterrupts(x):
    ...
    try:
        x()
    finally: 
        # Clean up no matter what happens in try part of block
        issueKdestroy() 
```

如果需要，您可以针对各种异常采取特定操作

```
def watchForInterrupts(x):
    ...
    try:
        x()
    except KeyboardInterrupt:
        print "User requested termination, cleaning up"
    except SystemExit:
        # You may want to re-raise this
        print "Program terminated abnormally"
    else:
        print "Executed sucessfully"
    finally: 
        # Clean up no matter what happens in try part of block
        issueKdestroy() 
```

您还应该避免`except`在不指定异常的情况下。例如，如果您在被调用的函数中有一个 SyntaxError，它会被异常处理程序捕获，并且您不会收到此警报。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T04:13:07.867

在另一个答案的基础上，使用 try...finally 并添加一个信号处理程序以确保在发出 SIGQUIT 时调用 finally。

```
import signal
import os
import sys

def callKdestroy():
    print "call kdestroy"

def signal_handler(signum, frame):
    # ensures unwinding of Python execution.
    print "got signal"
    sys.exit(1)

signal.signal(signal.SIGTERM, signal_handler)

try:
    ...
finally:
    callKdestroy() 
```

# javascript - Angular 指令不评估内部 ng-repeat

> ID：15754889
> 
> 赞同：10
> 
> 时间：2013-04-02T02:04:22.820
> 
> 标签：javascript, angularjs, angularjs-directive, angularjs-ng-repeat

我有以下设置：

应用程序/指令

```
var app = angular.module("MyApp", []);

app.directive("adminRosterItem", function () {
    return {
        restrict: "E",
        scope: {
            displayText: "@"
        },
        template: "<td>{{ displayText }}</td>", // should I have this?
        link: function(scope, element, attrs){
            // What do I put here? I don't seem to have any
            // element to initialize (set up event handlers, for example)
        },
        compile: function(?,?,?){} // should I have this? If so, what goes inside?
    }
}); 
```

控制器

```
function PositionsController($scope) {
           $scope.positions = [{ Name: "Quarterback", Code: "QB" },
                               { Name: "Wide Receiver", Code: "WR" }
                              ]; 
} 
```

HTML：

```
<div ng-app="MyApp">
    <div ng-controller="PositionsController">            
        <table>
            <tr ng-repeat="position in positions">
                <admin-roster-item displayText="{{ position.Name + ' (' + position.Code + ')' }}"></admin-roster-item>
             </tr>
         </table>       
    </div>
</div> 
```

这是一个非常简单的示例，但我无法渲染它。也许有一些教程没有告诉我，或者那是秘密的 Angular 知识？

如果我删除`<tr ng-repeat="..." />`and place内的指令`<td>{{ displayText }}</td>`，它将显示所有记录。

但我希望该指令比单个`<td>{{}}</td>`（最终）更复杂，以便我可以在多个应用程序中重用该指令。

所以，我真的在问我们如何正确地创建一个进入 ng-repeat 的指令？我错过了什么？应该从上面的代码中删除什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T02:46:11.743

忽略所有理论方面，您可以通过进行两个简单的更改来使您的代码正常工作。

1.  不要在属性名称中使用大小写混合。 `displaytext` *不是* `displayText`
2.  将`<td>`标签放在指令之外，在模板中

这样做，它会奏效；它认为这些都是 Angular 错误。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-02T02:31:31.357

同意您需要考虑指令的开始和结束位置。这是一个 plnkr，它说明了绑定到数组中每个项目的指令 - [http://plnkr.co/edit/IU8fANreYP7NYrs4swTW?p=preview](http://plnkr.co/edit/IU8fANreYP7NYrs4swTW?p=preview)

如果您希望该指令封装由父范围定义的集合的枚举，它会变得有点棘手。我不确定以下是否是“最佳实践”，但这就是我处理它的方式——http: [//plnkr.co/edit/IU8fANreYP7NYrs4swTW ?p=preview](http://plnkr.co/edit/IU8fANreYP7NYrs4swTW?p=preview)

当依赖指令执行迭代时，您会涉及到嵌入，这是一个虚构的词，意思是（据我了解）获取父项中定义的内容，将其推送到指令中，然后对其进行评估。我已经使用 angular 几个月了，我开始认为要求指令进行迭代是一种气味，我一直能够围绕它进行设计。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T02:29:21.093

我认为解决此问题的正确方法是将对象发送到管理员名册项目中，如下所示：

```
<tr ng-repeat="position in positions">
  <admin-roster-item pos="position">         
  </admin-roster-item>
</tr> 
```

并在指令中：

```
var app = angular.module("MyApp", []);

app.directive("adminRosterItem", function () {
  return {
    restrict: "E",
    scope: {
        pos: "@"
    },
    template: "<td>{{ formattedText }}</td>", // should I have this?
    link: function(scope, element, attrs){
        // all of this can easily be done with a filter, but i understand you just want to     
        // know how it works
        scope.formattedText = scope.pos.Name + ' (' + scope.pos.Code + ')';
    }
  }
}); 
```

PS。我没有测试这个！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-27T10:52:09.490

不要将您的指令编写为 ng-repeat 的子级，而是尝试将自定义指令保持在与 ng-repeat 相同的级别，这

```
<tr ng-repeat="position in positions" admin-roster-item displayText="{{ position.Name + ' (' + position.Code + ')' }}"></tr> 
```

此外，允许将您的自定义指令用作属性。AngulaJS 已将 ng-repeat 优先级定义为 1000，因此有时当您制作自定义指令时，ng-repeat 不会很好地处理它。

第二个选项（仅在第一个失败时尝试）是将自定义指令的优先级设置为高于 ngRepeat 的优先级，即设置为 1001。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-21T08:57:17.367

我有类似的问题，如果视图包含指令（'mydirective'），我的视图中的 ng-repeat 没有被评估

我的指令定义是

```
angular.module('myApp')
  .directive('myDirective', function () {
    return {
      templateUrl: 'components/directives/mydirective.html',
      restrict: 'EA',
      controller: 'MyDirectiveController',
      controllerAs: 'vm',
      link: function (scope, element, attrs) {
      }
    };
  }); 
```

我的视图控制器定义是

```
 angular.module('myApp')
    .component('myView', {
      templateUrl: 'app/views/myview.html',
      controller: myViewComponent,
      controllerAs: "vm"
    }); 
```

您可以注意到两个控制器都由 'vm' 通过使用 'controllerAs' 参数引用。这就是问题的原因。当指令出现在视图中时，角度总是指指令控制器中定义的“vm”而不是视图。

当我为控制器引用提供不同的名称时，问题消失了

现在，我的指令定义是

```
angular.module('myApp')
  .directive('myDirective', function () {
    return {
      templateUrl: 'components/directives/mydirective.html',
      restrict: 'EA',
      controller: 'MyDirectiveController',
      controllerAs: 'directiveVM',
      link: function (scope, element, attrs) {
      }
    };
  }); 
```

我的视图控制器定义是

```
 angular.module('myApp')
    .component('myView', {
      templateUrl: 'app/views/myview.html',
      controller: myViewComponent,
      controllerAs: "viewCtrlVM"
    }); 
```

希望能帮助到你。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-28T07:53:07.370

有完全相同的问题。在 ng-repeat 中有一个自定义指令，table->tr->td->directive，当使用 ng-repeat 和 Array.sort 对表格进行排序时，表格确实改变了顺序，但指令没有重新渲染。问题是我正在使用

```
track by $index 
```

从 ng-repeat 中按索引删除轨道并修复。

# ios - iOS应用程序退出而没有日志

> ID：15754906
> 
> 赞同：0
> 
> 时间：2013-04-02T02:06:30.193
> 
> 标签：ios, crash, stack-trace

我正在调试一个 iOS 应用程序。

当我跑

```
 ProductListViewController *pListController = [[ProductListViewController alloc] initWithStyle:UITableViewStylePlain];
        pListController.title = @"我的收藏";
        //pListController.product=self.product;
        pListController.opeType = Get_MyCollect;
        [self.navigationController pushViewController:pListController animated:YES]; 
```

我的应用程序退出时没有在我的 Xcode 输出中打印任何内容？

任何的想法？

我在编辑方案中打开所有选项

也没有更多的信息打印。

![在此处输入图像描述](https://i.stack.imgur.com/RiPJK.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T02:09:48.100

创建一个异常断点以在抛出所有异常时暂停它们。这至少会让您了解问题出在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T03:26:11.940

您有一个名为 ProductListViewController 的自定义 UITableViewController，并像这样实例化它：

```
[[ProductListViewController alloc] initWithStyle:UITableViewStylePlain]; 
```

问题是您还有一个 ProductListViewController 笔尖。在 iOS 6（不是 iOS 5 及之前的版本）中，当您说出上述代码行时，此笔尖会自动加载为您的 ProductListViewController 视图控制器的笔尖。因此 ProductListViewController 必须是 nib 的所有者，并且它`view`和它都`tableView`必须是 nib 中的 UITableView。

或者，只需更改 nib 的名称，或删除 nib（并重建项目文件夹）！现在您的 UITableViewController 将创建自己的 UITableView。

# c++ - 使用双链接列表构建学生列表队列

> ID：15754909
> 
> 赞同：-1
> 
> 时间：2013-04-02T02:06:46.537
> 
> 标签：c++, linked-list, queue

抱歉所有问题，但这个功能给我带来了很多问题。我几乎完成了，但我还有最后一个错误。此功能的重点是每天一次弹出 3 个学生。一天完成，它会移动到第二天并弹出下一个 3（有移动到下一个队列列表的可能性）。我的 num2 代表一天，每次完成 3 个学生时，它应该将天增加 1。

当我运行程序时，我得到了一些奇怪的结果。如果我留在同一个队列列表上，这一天会增加，但是当我跳转时，它会卡在第一个增量上。例子：

我有两个队列列表

第一个队列列表：Rachel、Ed、Amy、Matt 第二个队列列表：John、Daniel、Nick

结果：

Day1：瑞秋、艾德、艾米

第2天：

马特，是最后一个学生... 约翰，丹尼尔，

第 2 天：

尼克，是最后一个学生。

关于为什么会发生这种情况的任何想法？

主功能

```
 int s = 0;
    int d = 1;
    cout<<"How many Student do you currently have appointments with? "<<endl;
    cin>>s;
    cout<<"What day would you like to start seeing students?"<<endl;
    cin>>d;
    cout<<"Day "<<d<<endl;

    s = priority1->enqueue(s,d);
    s = priority2->enqueue(s,d);
    s = priority3->enqueue(s,d);
    s = priority4->enqueue(s,d); 
```

队列函数调用

```
int enqueue(int x, int& m)
{
    n->pop_front(x,m);
} 
```

LinkList Pop_front 函数

```
int pop_front(int x, int& m)
    {
        int num = x;
        int num2 = m;
        string value;
        while(front != NULL)
            {   
                if(num == 3)
                {
                    num = 0;
                    num2++;
                    cout<<endl<<endl<<"Day "<<num2<<endl;
                }
                while(num<3)
                {
                    Node *temp = front;
                    if(front->next)
                    {   value = front->name;
                        front = front->next;
                        front->prev = NULL;
                        size--;
                        delete temp;
                        cout<<value<<", "<<endl;
                        num++;
                        continue;
                    }
                    cout<<endl;
                    if(front->next == NULL)
                    {
                        value=front->name;
                        front = NULL;
                        back = NULL;
                        delete temp;
                        size--;
                        cout<<value<<", is the last student in this priority Queue list"<<endl;
                        num++;
                        return num;
                    }
                }
}
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T02:20:08.287

您正在路过`m`，它代表天数`reference`：

```
int pop_front(int x, int& m) 
```

但是你`num2`在函数体中使用：

```
num2++;
cout<<endl<<endl<<"Day "<<num2<<endl; 
```

因此，您不会`m`在每次调用`enqueue`. 该参考仅适用于`m`，当您分配`m`给`num2`您时，您正在创建一个新变量并且它们没有链接，因此`num2`不会反映对 的更改`m`。

# python - 如何根据处理程序本身中的 URL 获取处理程序类？

> ID：15754911
> 
> 赞同：0
> 
> 时间：2013-04-02T02:07:07.800
> 
> 标签：python, webapp2

我想了半天怎么问这个问题。如果标题不够清楚，请见谅。

所以我有一个单页应用程序，其中所有路由都在 JavaScript (AngularJS) 中完成。从服务器我根据需要只返回部分 HTML。现在我想确保 Google 可以使用 _escaped_fragment_ 索引我的应用程序。例如，在我的应用程序中，我有一个 URL：

[http://example.com/user/profile/a](http://example.com/user/profile/a)

这将变成：

[http://example.com/?_escaped_fragment_=user/profile/a](http://example.com/?_escaped_fragment_=user/profile/a)

当谷歌索引我时。这意味着所有请求都将通过我的 IndexHandler 来决定如何处理它。

在 IndexHandler 中，我想以某种方式获取处理“/user/profile/a”的类，这样我就可以在其上调用特殊方法来返回页面的完整 HTML（不是部分）。

伪代码看起来像这样：

```
 class IndexHandler(webapp2.RequestHandler):

    def get(self):

        # In my example this would return 'user/profile/a'
        fragment = self.request.GET.get('_escaped_fragment_', '')

        if fragment:
            fragment = '/' + fragment

            # This is something I have no idea how to do
            clas_Im_looking_for = XXXX(fragment).get_handler()

            response = webapp2.Response()
            handler = clas_Im_looking_for(request, response)

            # Fragment get is my method
            response = handler.fragment_get() 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:01:45.963

我不是 SEO 专家，但我建议使用 301 重定向将传入请求重定向到“友好 URL”。通过这种方式，您可以确保漂亮的 URL 被编入索引，因此任何找到您的网站的人也将使用那里的 URL 来访问您的应用程序。

您应该确保这些 URL 以对用户有意义的方式响应...

这也解决了您分配正确的处理程序来处理 URL 的问题。你的应用程序知道如何做到这一点。由于您现在处于应用程序的特定处理程序中，因此您实际上已经深入了解路由。

可能有一种方法可以在处理程序代码中使用反向引用顶级应用程序对象`self.app`或使用类似的东西`webapp2.get_app()`来获取应用程序对象，然后使用路由器来匹配正确的处理程序（[在此处](http://webapp-improved.appspot.com/api/webapp2.html#webapp2.Router)记录）

然而，重定向解决方案更优雅：

```
class IndexHandler(webapp2.RequestHandler):

    def get(self):

        # In my example this would return 'user/profile/a'
        fragment = self.request.GET.get('_escaped_fragment_', '')

        if fragment:
            fragment = '/' + fragment
            self.redirect(fragment, permanent=True) 
```

# java - 将 JAVA 应用程序连接到 SQL SERVER

> ID：15754912
> 
> 赞同：2
> 
> 时间：2013-04-02T02:07:10.507
> 
> 标签：java, database, ms-access-2007, joptionpane

我正在尝试将 JAVA 连接到 SQL SERVER，但我不知道该怎么做，上学期我们制作了一个使用 MS ACCESS 作为数据库的程序，我想知道我是否也可以使用它来连接我正在为 SQL SERVER 创建的程序。

这是我在 Java.Main 中使用的代码：

```
package pkg3a3pgroupsix;

import java.sql.*;
import javax.swing.*;
public class Main {

Connection conn = null;
ResultSet rs = null;
PreparedStatement pst = null;
Statement s;

    public static Connection ConnectDatabase(){

    try{
        Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
        Connection conn = DriverManager.getConnection("jdbc:odbc:Driver={Microsoft Access Driver (*.mdb)}; DBQ=BillingSystem.mdb");

        return conn;
    }catch(Exception e){
        JOptionPane.showMessageDialog(null, e);
        return null;

    }
}

    public static void main(String[] args) {
         try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Windows".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(Login.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(Login.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(Login.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(Login.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        // TODO code application logic here
    }
} 
```

这是我用来登录的代码：

```
package pkg3a3pgroupsix;

import java.awt.*;
import java.nio.channels.SeekableByteChannel;
import javax.swing.*;
import java.sql.*;
public class Login extends javax.swing.JFrame {
Connection conn;
ResultSet rs = null;
PreparedStatement pst = null;
int counter = 0;

public void registration(){
    User_Registration ur = new User_Registration();
    ur.setVisible(true);
    ur.setExtendedState(MAXIMIZED_BOTH);
    this.dispose();
}
public void exit (){
    int selectedOption = JOptionPane.showConfirmDialog(null, 
                                  "Do you wanna close the window?", 
                                  "Exit", 
                                  JOptionPane.YES_NO_OPTION); 
        if (selectedOption == JOptionPane.YES_OPTION) { this.dispose();}
}

    public Login() {
        initComponents();
    }                      

    private void btnloginActionPerformed(java.awt.event.ActionEvent evt) {                                         
            // TODO add your handling code here:
        String sqllogin = "select * from Employee where Username='" + jTextField1.getText() + "' and Password='" + jPasswordField1.getText() + "'";
        try {
            pst = conn.prepareStatement(sqllogin);
            rs = pst.executeQuery();
            if (rs.next()) {
            SelectionScreen s = new SelectionScreen();
            s.setVisible(true);
            this.dispose();counter = 0;}
            else {JOptionPane.showMessageDialog(null, "Invalid Username or Password!");counter += 1;
            if (counter == 1) {JOptionPane.showMessageDialog(null, "WARNING! 1st Attempt of Log-In!");} 
            else if (counter == 2) {JOptionPane.showMessageDialog(null, "WARNING! 2nd Attempt of Log-In!");}}
            if (counter == 3) {JOptionPane.showMessageDialog(null, "WARNING! 3rd Attempt of Log-In!");
            {JOptionPane.showMessageDialog(null, "The Program Will Shutdown.");this.dispose();}}}
        catch (Exception e) {JOptionPane.showMessageDialog(null, e);}
    }                                        

    private void formWindowOpened(java.awt.event.WindowEvent evt) {                                  

        conn = Main.ConnectDatabase();
    }                                 

    private void btnexitActionPerformed(java.awt.event.ActionEvent evt) {                                        

        exit();
    }                                       

    private void btnAdminActionPerformed(java.awt.event.ActionEvent evt) {                                         

        String sqllogin = "select * from Login where Username='" + jTextField1.getText() + "' and Password='" + jPasswordField1.getText() + "'";
        try {
            pst = conn.prepareStatement(sqllogin);
            rs = pst.executeQuery();
            if (rs.next()) {
            User_Registration UR = new User_Registration();
            UR.setVisible(true);
            this.dispose();counter = 0;}
            else {JOptionPane.showMessageDialog(null, "Invalid Username or Password!");counter += 1;
            if (counter == 1) {JOptionPane.showMessageDialog(null, "WARNING! 1st Attempt of Log-In!");} 
            else if (counter == 2) {JOptionPane.showMessageDialog(null, "WARNING! 2nd Attempt of Log-In!");}}
            if (counter == 3) {JOptionPane.showMessageDialog(null, "WARNING! 3rd Attempt of Log-In!");
            {JOptionPane.showMessageDialog(null, "The Program Will Shutdown.");this.dispose();}}}
        catch (Exception e) {JOptionPane.showMessageDialog(null, e);}
    } 
```

我可以用这个吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T12:50:43.633

要从 Java 应用程序连接到 MS SQL Server，您需要使用`JDBC API`. `JDBC API`提供连接到数据库、加载适当的驱动程序、发送 SQL 查询、检索结果等的类和方法。

*如何连接到数据库：* “<code>Connection”对象表示与数据库的连接。要建立连接，请使用方法“<code>DriverManager.getConnection”。此方法接受一个包含 URL 的字符串，该 URL 表示我们尝试连接的数据库。下面是建立连接的示例代码：

```
private String DATABASE_URL = "jdbc:odbc:embedded_sql_app"; // establish connection to database
Connection connection = DriverManager.getConnection( DATABASE_URL,"sa","123" ); 
```

关于数据库 URL 以及如何创建它的详细讨论可以在本文末尾提供的资源中找到。

*查询数据库：*提供`JDBC API`三个接口用于向数据库发送 SQL 语句，'<code>Connection' 接口中的相应方法创建它们的实例。 **1.** `Statement` - 由“<code>Connection.createStatement”方法创建。'<code>Statement' 对象用于发送不带参数的 SQL 语句。 **2.** `PreparedStatement` - 由“<code>Connection.prepareStatement 方法”创建。'<code>PreparedStatement' 对象用于预编译的 SQL 语句。这些可以将一个或多个参数作为输入参数（`IN`参数）。 **3.** `CallableStatement` - 由“<code>Connection.prepareCall”方法创建。'<代码>

*检索结果：* '<code>ResultSet 是一个 Java 对象，其中包含执行 SQL 查询的结果。存储在“<code>ResultSet”对象中的数据是通过一组允许访问当前行的各个列的 get 方法检索的。'<code>ResultSet.next' 方法用于移动到 '<code>ResultSet' 的下一行，使其成为当前行。下面的代码片段执行一个返回行集合的查询，列'<code>a'作为'<code>int'，列'<code>b'作为'<code>String'，列' <code>c' 作为 '<code>float'：

```
 java.sql.Statement stmt = con.createStatement();
 ResultSet rs = stmt.executeQuery("SELECT a, b, c FROM Table1");
 while (rs.next()) { // retrieve and print the values for the current row
     int i = rs.getInt("a");
     String s = rs.getString("b");
     float f = rs.getFloat("c");
     System.out.println("ROW = " + i + " " + s + " " + f);
 } 
```

这只是关于如何从 Java 与数据库进行交互的简要介绍。有关上述项目的更多详细信息以及有关传递参数、执行存储过程等的信息，请参阅以下资源：( [http://www.shahriarnk.com/embedding-sql-c-sharp-java-shahriar /#Shahriar_N_Embedding_SQL_in_Java](http://www.shahriarnk.com/embedding-sql-c-sharp-java-shahriar/#Shahriar_N_Embedding_SQL_in_Java)）在这里，您还将找到有关如何以编程方式与数据库交互的信息；即不使用SQL。希望您觉得这个有帮助。

资料来源：[www.shahriarnk.com/embedding-sql-c-sharp-java-shahriar/](http://www.shahriarnk.com/embedding-sql-c-sharp-java-shahriar/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T02:16:00.320

您连接到的每个 DB（数据库）都将具有不同的连接字符串，并且您将拥有不同的类，具体取决于您使用的数据库。这是您在上面的示例中使用的那个：

```
Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
Connection conn = DriverManager.getConnection("jdbc:odbc:Driver={Microsoft Access Driver (*.mdb)}; DBQ=BillingSystem.mdb"); 
```

您需要获取 SQL Server 和驱动程序的连接字符串。两者都很容易研究。

如果您轻松使用 eclipse、netbeans 或大多数 IDE，它们将有一个服务器资源管理器窗口，您可以在其中添加连接，并让您轻松访问连接字符串。

# php - 警告：pg_fetch_array(): 3 不是有效的 PostgreSQL 结果资源

> ID：15754914
> 
> 赞同：0
> 
> 时间：2013-04-02T02:07:26.177
> 
> 标签：php, postgresql

我正在尝试将数据库中的一些记录打印到表中：

```
 session_start();
if(!isset($_SESSION['studentnum'])){
    echo "Please "."<a href='login.php'>login</a>";
    exit;
}

$host = "localhost";
$username = "xyz";
$password = "abc";
$database = "mno";
$port = "5432";

$dbh = pg_connect("host=".$host." port=".$port." dbname=".$database." user=".$username." password=".$password);
if (!$dbh){
    die("Error in connection: ".pg_last_error());
}
$studentnum = $_SESSION['studentnum'];

$sql = "select * from project.student s, project.courses c 
where s.student_num = c.student_num and s.student_num='".$studentnum."'";
$result = pg_query($sql) or die('Query failed: ' . pg_last_error());
pg_free_result($result);
pg_close($dbh); 
```

进而

```
<?php
while ($line = pg_fetch_array($result)) {  <= this is line 52
    echo "\t<tr>\n";
    foreach ($line as $col_value) {
        echo "\t\t<td>$col_value</td>\n";
    }
    echo "\t</tr>\n";
}
?> 
```

但我收到此错误：

```
 SCREAM: Error suppression ignored for
( ! ) Warning: pg_fetch_array(): 3 is not a valid PostgreSQL result resource in D:\wamp\www\records.php on line 52 
```

我做错什么了？我在其他地方使用了相同的代码并且它有效，所以我不确定这里缺少什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T03:06:18.350

我想到了。`pg_free_result($result);`使用前不小心打了电话`$result`

# ruby-on-rails - 重定向到编辑

> ID：15754919
> 
> 赞同：8
> 
> 时间：2013-04-02T02:08:47.653
> 
> 标签：ruby-on-rails, ruby-on-rails-3, redirect, controller, routes

我的应用程序中有一个很长的表单，所以我设置了一个`_new_form.html.erb`在我的`new.html.erb`. 在用户更新此表单并通过一些基本验证后，我希望它们被重定向到`edit.html.erb`呈现完整表单的表单，即`_new_form.html.erb`.

我确定这是基本的东西，但我不知道该怎么做。

我已经尝试使用以下内容更新我的 Contoller 中的**Create**操作，但我现在知道了。

IE

```
 def create
    @location = Location.new(params[:location])
      #redirect_to :action => "edit"

    respond_to do |format|
      if @location.save
        format.html { redirect_to edit_location_path(:id), notice: 'Location was successfully created.' }
        format.json { render json: @location, status: :created, location: @location }
      else
        format.html { render action: "new" }
        format.json { render json: @location.errors, status: :unprocessable_entity }
      end
    end
  end 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-02T02:12:38.887

您正在尝试重定向到`edit_location_path(:id)`. 该符号`:id`不是您要在此处传递的。您想要位置的 id 或位置本身：`redirect_to edit_location_path(@location)`

# json - 通过 MySQLI 保存时从 JSON 数据中删除双引号

> ID：15754924
> 
> 赞同：0
> 
> 时间：2013-04-02T02:10:11.633
> 
> 标签：json, mysqli, double-quotes

我使用的是 PHP 5.2，当我使用`json_encode`双引号时，双引号被转义（它们后面有一个斜杠）。当我尝试使用`mysqli_query($db, "INSERT ...")`它保存它时，它会删除斜杠，当我尝试从表中检索 JSON 对象时，它是无效的，因为字符串中的双引号没有被转义。我目前已将其设置为 utf8_unicode_ci。我一直在使用 sqlite2 数据库并且没有问题。

```
mysqli_query($db, "INSERT INTO the_table (data) VALUES ('$json_data')"); 
```

数据示例 = 'video "Video Name".'; 所以它在单引号字符串中使用双引号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T02:16:31.110

您需要逃脱`$json_data`才能插入。

```
$stmt = mysqli_prepare($db, "INSERT INTO the_table (data) VALUES (?)");
mysqli_stmt_bind_param($stmt, 's', $json_data);
mysqli_stmt_execute($stmt); 
```

# ios - 在 UITableViewCell 中播放视频

> ID：15754933
> 
> 赞同：5
> 
> 时间：2013-04-02T02:11:49.547
> 
> 标签：ios

我正在尝试在单元格本身而不是全屏视频显示中播放视频。我正在`MPMoviePlayerController`为此目的使用。

我已经定义

```
MPMoviePlayerController *moviePlayer; 
```

在实施部分

然后在`cellForRowAtIndexPath:`

我这样做

```
cell = [tableView dequeueReusableCellWithIdentifier:simpleTableVideoIdentifier];

            if (cell == nil){
                cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:simpleTableVideoIdentifier];
            }
            NSDictionary *dictionary = [dataArray objectAtIndex:indexPath.section];
            NSDictionary *data = dictionary;
            if ([data[@"type_of_post"] isEqualToString:@"video"]) {
                NSString *path = data[@"video"];
                NSURL *videoURL = [NSURL URLWithString:path];
                moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:videoURL];
                [moviePlayer setControlStyle:MPMovieControlStyleNone];
                moviePlayer.scalingMode = MPMovieScalingModeAspectFit;
                [moviePlayer.view setFrame:CGRectMake(10.0, 0.0, 300.0 , 400.0)];
                [cell addSubview:moviePlayer.view];
                 moviePlayer.view.hidden = NO;
                [moviePlayer prepareToPlay];
                [moviePlayer play];
            }else{
                //do something else
            } 
```

显然我给它分配了一个高度`heightForRowAtIndexPath:`

但是它在`MPMoviePlayerController *moviePlayer;`全球范围内定义的点并不仅仅停留在其单元格上，而是在我向下滚动时继续下降。除了我所描述的之外，我不确定还有什么其他方法可以实现这一点，这显然不是正确的方法。如果有人能引导我走向正确的方向，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T02:28:44.343

永远不要向单元格添加子视图：

```
[cell addSubview:moviePlayer.view]; 
```

仅将其添加到 contentView：

```
[cell.contentView addSubview:moviePlayer.view]; 
```

你犯的另一个大错误是你忘记了这个单元是可以重复使用的。当用户滚动时，单元格将用于表格的不同行。所以它被重用了，现在电影播放器​​视图仍在其中，即使现在这是表格的错误行。您不仅需要*将*电影播放器​​视图添加到正确的单元格，还需要*将*其从所有错误的单元格中删除（在`else`代码的一部分中）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-02-28T09:07:12.003

每次单元格出现在屏幕上时，您真的不应该分配新对象。您应该继承一个 UITableViewCell 并添加一个 MPMoviePlayerController 作为属性，如果没有视频，可以将其设置为播放或停止并隐藏视图。所以你的代码应该看起来更像：

```
#import CustomCell.h    
CustomCell *cell = [tableView dequeueReusableCellWithIdentifier:@"cellIdent"];
    if (!cell) {
        cell = [[CustomCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"cellIdent"]];
    }

    NSDictionary *dict = dataArray[indexPath.row];
    if ([dict[@"type_of_post"] isEqualToString:@"video"]) {
        NSString *path = @"http://<path to your video>";
        [cell.movie setContentURL:[NSURL URLWithString:path]];
        [cell.movie prepareToPlay];
        [cell.movie play];
        cell.movie.view.hidden = NO;
    } else {
         [cell.movie stop];
         cell.movie.view.hidden = YES;
         } 
```

现在，如果您不知道单元格应该如何显示 CustomCell.h：

```
@interface CustomCell : UITableViewCell
@property (nonatomic, retain) MPMoviePlayerController *movie;
@end 
```

自定义单元格.m：

```
@implementation CustomCell
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier {
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        self.movie = [[MPMoviePlayerController alloc] init];
        self.movie.controlStyle = MPMovieControlStyleNone;
        self.movie.scalingMode = MPMovieScalingModeAspectFit;
        [self.contentView addSubview:self.movie.view];
    }
    return self;
 }
 - (void)layoutSubviews {
     [super layoutSubviews];
     self.movie.frame = CGRectMake(10, 0, self.bounds.size.width - 20, self.bounds.size.height);
 }
@end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T02:30:36.627

当调用以下 UITableViewDelegate 方法时，您可以在单元格上创建并覆盖它，而不是为每个单元格创建播放器。您仍然可以将一个看起来像玩家的图像添加到每个单元格中，以使每个单元格都具有玩家的外观和感觉。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

# php - ErrorHandler::handleError - Cakephp

> ID：15754939
> 
> 赞同：0
> 
> 时间：2013-04-02T02:12:14.570
> 
> 标签：php, cakephp, cakephp-2.0, newrelic

我使用 New Relic 来调试我的应用程序，我花时间的大问题是 ErrorHandler::handleError。我不知道它是什么。

我在“Core.php”中设置了“Configure::write('debug', 2)”，但没有显示任何错误。

谢了。

费利佩·马克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:25:31.240

首先，如果您刚开始使用 CakePHP，我建议您从基础开始，了解框架，并且在您了解基础之前*不要*开始使用高级、自定义和/或外部工具。

`ErrorHandler::handleError`是 CakePHP 使用的默认 ErrorHandler。文档的这一部分描述了如何创建自己的 ErrorHandler；

[创建自己的错误处理程序](http://book.cakephp.org/2.0/en/development/errors.html#creating-your-own-error-handler)

您可以创建一个“挂钩”到 New Relic 功能的错误处理程序。我不知道现有的插件可以做到这一点，但谷歌可能是你的朋友。

# ruby-on-rails - Rails API 版本控制的通配符匹配导致无限重定向

> ID：15754941
> 
> 赞同：3
> 
> 时间：2013-04-02T02:12:47.470
> 
> 标签：ruby-on-rails, rails-routing

[我正在关注此处发布的关于使用 Rails 路由对 API 进行版本控制](https://stackoverflow.com/a/9627796/458968)的出色解决方案，但我一直遇到无限重定向。

这是我的一部分`routes.rb`

```
 namespace :api do

    namespace :v1 do
      resources :books
    end

    namespace :v2 do
      resources :books
    end

    match 'v:api/*path', :to => redirect("/api/v2/%{path}")
    match '*path', :to => redirect("/api/v2/%{path}")

  end 
```

这与发布的答案几乎相同。访问`/api/v1/books/list.json`按预期工作`api/v2/books/list.json`。我遇到的问题是`/api/books/list.json`，应该重定向到`/api/v1/books/list.json`。如果我尝试访问 api 而不指定哪个版本，我的浏览器会以无限重定向响应。我的日志如下所示：

```
Started GET "/api/books/list.json?max_number=10" for 127.0.0.1 at 2013-04-01 22:00:51 -0400

Started GET "/api/v1/books%2Flist" for 127.0.0.1 at 2013-04-01 22:00:51 -0400

Started GET "/api/v1/books%2Flist" for 127.0.0.1 at 2013-04-01 22:00:51 -0400

Started GET "/api/v1/books%2Flist" for 127.0.0.1 at 2013-04-01 22:00:51 -0400

//... and so on 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T04:16:59.227

不知道为什么 Ryan Biggs 在发布的问题中的回答不再起作用，但这就是我为了解决它而将其更改为：

```
 namespace :api do

    namespace :v1 do
     resources :books do
      collection do
       get 'list'
       get '/*path', :to => redirect("http://localhost:3000")
      end
     end
    end

    namespace :v2 do
     resources :books do
      collection do
       get 'list'
      end
     end
    end

  match 'v:api/*path', :to => redirect{|params, req|
    "/api/v1/#{params[:path]}.#{params[:format]}#{params[:query_string]}?#{req.query_string}"
  }
  match '*path', :to => redirect{|params, req|
    "/api/v1/#{params[:path]}.#{params[:format]}#{params[:query_string]}?#{req.query_string}"
  }
end 
```

# javascript - Yui3对Yui2的解释

> ID：15754943
> 
> 赞同：0
> 
> 时间：2013-04-02T02:12:58.067
> 
> 标签：javascript, yui

您如何将此代码从 yui2 迁移到 yui3？

Yui2：

```
this._suspensionPlanPanel = document.getElementById("rn_"+this.instanceID+"_SuspensionPlanPanel");
var td_list = YAHOO.util.Dom.getElementsByClassName("rn_SuspensionPlan_Target","td",this._suspensionPlanPanel);
this._suspensionPlanTargetTemplate = td_list[0]; 
```

我试过把它变成这个（Yui3）：

```
this._suspensionPlanPanel = this.Y.one(this.baseSelector+"_SuspensionPlanPanel");
var td_list = this.Y.all(this._suspensionPlanPanel.get('id') + ' td.rn_SuspensionPlan_Target');
this._suspensionPlanTargetTemplate = td_list[0]; 
```

但它总是以未定义的形式出现。Console.loging td_list 给了我消息：

```
undefined: not bound to any nodes { _query="rn_SuspensionForm_12_Su....rn_SuspensionPlan_Time", _nodes=[0], invoke=function(), more...} 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T03:28:48.497

1.  我不确定您在此示例之前的代码是什么样的，但 Y 对象可能不应该附加到“this”。

2.  Y.one() 采用 CSS 选择器字符串，而不是纯字符串 ID。如果您之前调用过 document.getElementById('foo')，则 YUI3 等效项是 Y.one('#foo')。

请务必阅读[http://yuilibrary.com/yui/docs/node/](http://yuilibrary.com/yui/docs/node/)上的 YUI 节点用户指南以获取更多上下文和示例。祝你好运！

# c# - 如何清除/重置 WPF 水晶报表查看器

> ID：15754945
> 
> 赞同：4
> 
> 时间：2013-04-02T02:13:04.617
> 
> 标签：c#, wpf, mvvm, crystal-reports

首先让我说我绝不是 WPF 专家，所以如果我遗漏了什么，那么我很抱歉。

我正在开发一个用 C# 编写的应用程序，其中 WPF 使用 MVVM 模式。我正在研究的是一个通用的报表查看器视图。表单的设计相当简单，一个组合框控件和一个带有 2 个选项卡的选项卡控件。第一个选项卡具有自定义参数控件，第二个选项卡具有 WPF Crystal Reports (CR) 查看器。

表单的功能也相当简单，当您更改组合框选择时，它会查找适当的 CR 报告（使用桌面引擎，对于 VS2010 的 CR）并查询设计以获取然后显示在选项卡 1 中的参数。用户填写根据需要在参数中输入并按下“开始”按钮，该按钮将参数值传递回报告，执行并将其放入选项卡 2 上的查看器控件中，该选项卡被聚焦。

一切都很好，您可以更改组合，填写参数并反复查看报告，而不会发生任何戏剧性事件。这个问题更多地是一个“可用性”问题。

如果您已经在 CR 查看器中选择并查看了一个报告，当您选择一个新报告时，您在参数选项卡中拥有第二个报告的参数，但第一个报告的预览仍在查看器中，具体取决于用户，可能会令人困惑。

当用户选择一个新报告时，参数是集中的，但我想“清除”CR 查看器，我不知道如何实现这一点。我在 View 代码中的一个事件中设置了报告，该事件是通过按下“开始”按钮从 ViewModel 中的方法调用的。

```
this.crystalReportsViewer.ViewerCore.ReportSource = this.ViewModel.Report; 
```

但是我没有尝试过让我清除报表查看器。

```
this.crystalReportsViewer.ViewerCore.ReportSource = null;

this.crystalReportsViewer.Content = null;

this.crystalReportsViewer.ViewerCore.Content = null;

this.crystalReportsViewer.ViewerCore.ReportSource = new ReportDocument();

this.crystalReportsViewer = new CrystalReportsViewer();
this.crystalReportsViewer.Owner = Window.GetWindow(this); 
```

我无法在报告生成尝试之间关闭并重新打开视图，并且根据需要使控件可见或隐藏是一个可怕的问题。

任何帮助将不胜感激！

# cloudbees - 使用 cloudbees 进行目录映射

> ID：15754946
> 
> 赞同：1
> 
> 时间：2013-04-02T02:13:25.537
> 
> 标签：cloudbees

任何人都知道什么时候在 CloudBees 中我可以进行目录映射？Tomcat 确实

```
<Context path="/abc" docBase="/a/b/c" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:37:45.590

我认为如果不破解相关的 tomcat clickstack 来自定义容器，你就无法做到这一点。无论如何，为什么在 /abc 下没有这样的静态资源？

# vb.net - VB.NET 抓取图像的一部分并将其放大到另一个图片框中

> ID：15754951
> 
> 赞同：1
> 
> 时间：2013-04-02T02:14:04.120
> 
> 标签：vb.net, picturebox

在 vb.net 中，当我单击图片框中的图像时，我正在尝试捕获鼠标位置并使用图片框 1 中图像的放大部分填充第二个图片框。

代码似乎正在工作......有点......它抓住了图片框1中的一部分图像......但不是我点击的部分。

```
 Private Function magnify(ByVal position As Point)
    vert2.Clear()
    horz2.Clear()

    Dim img As New Bitmap(preciseBox.Width, preciseBox.Height)
    Dim gr As Graphics = Graphics.FromImage(img)
    Dim src As New Rectangle(position.X - 50, position.Y - 50, 100, 100)
    Dim dest As New Rectangle(0, 0, img.Width, img.Height)

    Try
        gr.DrawImage(xrayBox.Image, dest, src, GraphicsUnit.Pixel)
        img = New Bitmap(img, img.Width, img.Height)
        preciseBox.Image = img

        'Draws the crosshair on the magnify box
        vert2.Add(New Point(img.Width / 2, 0))
        vert2.Add(New Point(img.Width / 2, img.Height))
        horz2.Add(New Point(0, img.Height / 2))
        horz2.Add(New Point(img.Width, img.Height / 2))

        draw2 = True
        preciseBox.Invalidate()
    Catch ex As Exception

    End Try
    Return 0
End Function 
```

Picturebox1 尺寸（运行时）：宽度 646px 高度 687px Picturebox1.Image 尺寸（运行时）：宽度 646px 高度 484px Picturebox2 尺寸（运行时）：宽度 370px 高度 230px

# java - 打印产生错误“找不到名为 'LayoutDirection1.png' 的图像。”

> ID：15754952
> 
> 赞同：1
> 
> 时间：2013-04-02T02:14:06.137
> 
> 标签：java, macos, printing

我最近尝试运行Oracle 的[基本打印程序](http://docs.oracle.com/javase/tutorial/2d/printing/printable.html)教程中包含的[HelloWorldPrinter.java文件。](http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/2d/printing/examples/HelloWorldPrinter.java)代码完成了它应该做的事情，但是在打印对话框出现之前，我在控制台中得到以下输出，它以红色字母显示：

```
2013-04-01 21:06:09.512 java[16458:407] Could not find image named 'LayoutDirection1.png'. 
```

显然已经报告了一个问题，但我没有看到打印对话框有任何问题。我不确定这意味着什么，以及它是否是我应该解决的问题。当我将 HelloWorldPrinter 导出到应用程序中时，仍然会出现此错误（通过 Console.app），因此这不是 Eclipse 的问题。如果重要的话，我目前使用的是 Mac OS 10.7.5。

编辑：还尝试删除有关设置外观和设置为默认 Mac OS X 外观的行，但它没有解决问题。

# actionscript-3 - Flex 是否在调用 SkinnableComponent 中的 invalidateSkinState() 时调度事件？

> ID：15754953
> 
> 赞同：0
> 
> 时间：2013-04-02T02:14:15.423
> 
> 标签：actionscript-3, apache-flex

我在`SkinnableComponent`Flex 应用程序上使用 s，并且正在测试某些组件的行为。

我想测试`invalidateSkinState()`在自定义事件的组件内执行的调用。我试图听不同的事件，`FlexEvent.STATE_CHANGE_COMPLETE`但没有处理任何事情。文档没有说明这一点，或者我找不到在哪里......

换句话说，我想知道托管组件如何告知皮肤其状态已更改。

有没有人尝试进行此类测试并找到了解决方案？

我会接受任何解决方案，即使它不涉及事件，但我想保持测试代码现在的样子（即没有方法覆盖，没有第三个事件调度等）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T01:37:06.883

正如 www.Flextras.com 的评论中所述，对 invalidateSkinState() 的调用不会触发任何事件。

当布局管理器处理时，组件稍后可能会分派某些事件。但是，我的问题是测试（单元测试）对特定事件的测试组件执行的调用`invalidateSkiState()`，我不能等待这样的事件。此外，组件永远不会添加到阶段，因此布局管理器永远不会处理它。

所以我想出了一个解决方案，涉及扩展测试的组件类以进行测试。这样我就不必修改测试代码。

这是我的测试用例类的示例：

```
package com.example.components
{
    import org.flexunit.Assert;

    public class ComponentTests
    {
        [Test]
        public function testSkinStateIsInvalidatedOnCustomEvent():void
        {
            var component:ComponentForTests = new ComponentForTests();
            var event:CustomEvent = new CustomEvent();
            // Here we set up the event for the test

            testedComponent.init();
            testedComponent.isStateInvalidated = false;
            testedComponent.handleCustomEvent(event);
            Assert.assertTrue("Skin state should be invalidated",
                              testedComponent.isStateInvalidated);
        }
    }
}

import com.example.components.TestedComponent;

internal class ComponentForTests extends TestedComponent
{
    internal var isStateInvalidated:Boolean = false;

    override public function invalidateSkinState():void
    {
        isStateInvalidated = true;
        super.invalidateSkinState();
    }
} 
```

我把它贴在这里以防它可以帮助别人。尽管如此，这个解决方案仍然受到批评，欢迎任何更好的解决方案。

# c# - 无法创建新的 MatchCollection - 未定义构造函数

> ID：15754954
> 
> 赞同：4
> 
> 时间：2013-04-02T02:14:31.980
> 
> 标签：c#

所以，也许我累了，但为什么我不能创造一个新的`MatchCollection`？

我有一个`MatchCollection`通过调用返回 a 的方法`regex.Matches`：

```
public static MatchCollection GetStringsWithinBiggerString(string sourceString)
{
    Regex regex = new Regex(@"\$\(.+?\)");

    return regex.Matches(sourceString);
} 
```

如果参数为空，我想要做的是返回一个空集合：

```
public static MatchCollection GetStringsWithinBiggerString(string sourceString)
{
    if (sourceString == null)
    {
        return new MatchCollection();
    }

    Regex regex = new Regex(@"\$\(.+?\)");

    return regex.Matches(sourceString);
} 
```

但这不会因为这一行而编译：

```
return new MatchCollection(); 
```

错误：

> 'System.Text.RegularExpressions.MatchCollection' 类型没有定义构造函数。

一个类型怎么能没有定义构造函数？我认为如果没有明确定义构造函数，则会创建一个默认构造函数。是否无法`MatchCollection`为我的方法创建一个新实例以返回？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T02:30:34.877

非常恰当地使用[Null Object](http://en.wikipedia.org/wiki/Null_Object_pattern)模式！

像这样实现：

```
public static MatchCollection GetStringsWithinBiggerString(string sourceString)
{
    Regex regex = new Regex(@"\$\(.+?\)");

    return regex.Matches(sourceString ?? String.Empty);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T02:16:04.807

> 一个类型怎么能没有定义构造函数？

它不能。但是它可以通过使它们成为非公开的来隐藏它的所有构造函数——即私有的、内部的或受保护的。此外，一旦定义了构造函数，默认构造函数就变得不可访问。同一命名空间中的其他类可以访问内部构造函数，但命名空间外部的类将无法直接实例化一个类。

PS如果你想创建一个空的匹配集合，你总是可以创建一个匹配某些东西的表达式，然后传递给它其他东西：

```
Regex regex = new Regex(@"foo");
var empty = regex.Matches("bar"); // "foo" does not match "bar" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T02:18:11.783

也许一种解决方法：

如果将`sourceString`其`null`设置为`""`并继续执行。

# node.js - 在 Node + Mongo 中强制使用单个数据库写入器

> ID：15754955
> 
> 赞同：3
> 
> 时间：2013-04-02T02:14:50.177
> 
> 标签：node.js, mongodb

为了减少读取时间，我对存储在 MongoDB 中的一些数据进行了非规范化。每当我执行写操作时都需要刷新它，以使其与底层数据保持一致。

为了避免任何竞争条件，我想将其分离到一个单线程的后台任务中。在 Java 中，我会简单地将 Command 对象放入队列中，并让读取器线程一次处理一个。但是在 Node 中，每当我执行任何类型的数据库操作时，它都会异步发生，因此我会遇到竞争条件问题。

我想做的例子：

**应用程序线程**

1.  插入新的“投标”
2.  将“BidPlaced”对象放入队列

**后台线程**

1.  流行“出价”
2.  从所有出价中查找最大值（价格）。更新 Auction.highestBid。

我仍然在思考 Node 的并发模型（以防你看不出来！）。我如何在 Node.js 中实现这样的目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:38:01.983

我有一个类似的应用程序，我使用[child_process](http://nodejs.org/api/child_process.html#child_process_child_process)来分叉后台作业，因此：

1.  插入新的“投标”
2.  将“BidPlaced”对象放入队列

然后我会将队列中的下一个投标发送给子进程：

```
// Application Thread
var child = cp.fork('the background thread module');
child.send(nextBid); 
```

在后台线程上监听消息：

```
// Background Thread
process.on('message', function(bid) {
    // Do your background work
    process.send(bid);
}); 
```

然后在应用程序中监听后台完成：

```
// Application Thread
child.on('message', function(lastBid) {
    // Check the queue and do it again
}); 
```

# optimization - 在 scipy iPython 错误中优化

> ID：15754957
> 
> 赞同：0
> 
> 时间：2013-04-02T02:15:10.143
> 
> 标签：optimization, scipy, ipython

在 Jamie 在这篇[文章](https://stackoverflow.com/questions/15754637/maximum-of-a-function-on-a-specified-domain-in-ipython#)中的帮助之后，我知道我需要使用 scipy.optimize。但是，我不断收到以下错误：

```
Traceback (most recent call last):
  File "./hw7problem5.py", line 19, in <module>
    print(max_R)
NameError: name 'max_R' is not defined

#!/usr/bin/env python
#  Plotting the energy for circular Hohmann transfer

import scipy
import matplotlib
import numpy as np
import pylab

def f(R):
    return ((1 / np.sqrt(R)) - ((np.sqrt(2) * (1 - R)) / (np.sqrt(2)
        * (1 + R))) - 1)
    max_r = scipy.optimize.fmin(lambda r: 1 / f(r), 20)

x = np.arange(1, 25, 0.001)
pylab.plot(x, f(x), 'r')
pylab.show()

print(max_R) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T02:22:30.257

`max_R`应该是`max_r`。Python 区分大小写。

您也没有将函数的结果存储在任何地方：

```
x = np.arange(1, 25, 0.001)
max_r = f(x)

pylab.plot(x, max_r, 'r')
pylab.show()

print(max_r) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:45:17.797

这似乎是由于工作并输出了正确的解决方案。

```
#!/usr/bin/env python
#  Plotting the energy for circular Hohmann transfer

import scipy
import matplotlib
import numpy as np
import pylab
from scipy.optimize import fmin

def f(R):
    return ((1 / np.sqrt(R)) - ((np.sqrt(2) * (1 - R)) / (np.sqrt(R
        * (1 + R)))) - 1)

x = np.arange(1, 20, .001)
max_r = fmin(lambda r: 1.0 / f(r), 20)

pylab.plot(x, f(x), 'r')
pylab.show()

print(max_r) 
```

# c# - 序列化异常：在解析完成之前遇到流结束 - C#

> ID：15754965
> 
> 赞同：1
> 
> 时间：2013-04-02T02:16:07.357
> 
> 标签：c#, serialization, binaryformatter

我正在尝试将字节数组转换为对象。为了消除任何可能的问题，我创建了一个简单的 windows 窗体，它只是调用破坏我的原始代码的函数，我得到了同样的错误。关于发生了什么的任何想法？

```
 private void button1_Click(object sender, EventArgs e)
    {
        byte[] myArray = new byte[] {1, 2, 3, 4, 5, 6, 7};
        object myObject = ByteArrayToObject(myArray);

        if(myObject != null)
        {
            button1.Text = "good";
        }
    }

    private object ByteArrayToObject(byte[] arrBytes)
    {
        System.Runtime.Serialization.Formatters.Binary.BinaryFormatter binForm = new System.Runtime.Serialization.Formatters.Binary.BinaryFormatter();
        MemoryStream memStream = new MemoryStream(arrBytes);
        memStream.Position = 0;
        return binForm.Deserialize(memStream);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T02:30:58.960

由于您并没有真正说出您对生成的对象做了什么，因此很难给您一个更具体的答案。然而一个字节数组*已经*是一个对象：

```
private void button1_Click(object sender, EventArgs e)
{
    byte[] myArray = new byte[] { 1, 2, 3, 4, 5, 6, 7 };
    object myObject = myArray as object;

    if (myObject != null)
    {
        button1.Text = "good";
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T02:34:56.083

`BinaryFormatter`不仅仅是读/写字节。

试试这个例子，你首先序列化然后读取序列化对象的内容：

```
byte[] myArray = new byte[] { 1, 2, 3, 4, 5, 6, 7 };

System.Runtime.Serialization.Formatters.Binary.BinaryFormatter binForm = new System.Runtime.Serialization.Formatters.Binary.BinaryFormatter();
MemoryStream memStream = new MemoryStream();
// Serialize the array
binForm.Serialize(memStream, myArray);
// Read serialized object
memStream.Position = 0;
byte[] myArrayAgain = new byte[memStream.Length];
memStream.Read(myArrayAgain, 0, myArrayAgain.Length); 
```

原来序列化的内容是这样的：

```
0, 1, 0, 0, 0, 255, 255, 255, 255, 1, 0, 0, 0, 0, 0, 0, 0, 15, 1, 0, 0, 0, 7, 0, 0, 0, 2, 1, 2, 3, 4, 5, 6, 7, 11 
```

你看，有一个页眉和一个页脚。你的实际对象几乎在最后。

# actionscript-3 - 在 AS3 中检查安全面板记住选项的状态

> ID：15754966
> 
> 赞同：10
> 
> 时间：2013-04-02T02:16:09.427
> 
> 标签：actionscript-3, flash

是否可以在使用 AS3 的相机的闪光灯安全面板中获取“记住”选项的状态？最好有一个函数，如果记住选项被选中，则返回 1，未选中时返回 0，如果由于浏览器/客户端设置而无法使用记住选项，则返回 -1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-21T06:23:09.660

您可以使用 Flash 中的 cookie 来存储此变量。那么，为什么不使用它。

例子：

```
var mySharedObject:SharedObject = SharedObject.getLocal("republicofcode");
mySharedObject.data.firstName = "John";
mySharedObject.data.lastName = "Doe";
mySharedObject.flush();
trace(mySharedObject.data.firstName);
trace(mySharedObject.data.lastName); 
```

[有关我的共享对象的更多信息，请参阅链接](http://www.republicofcode.com/tutorials/flash/as3sharedobject/)

# php - preg_match 用于点、空格或制表符

> ID：15754969
> 
> 赞同：1
> 
> 时间：2013-04-02T02:16:51.503
> 
> 标签：php, preg-replace, preg-match, preg-match-all

给定

```
$str=array( "Chelsea 0-5 MAN-UNITED",
            "Chelsea 0-2 Aston Villa",
            "Chelsea 0-3 Pokemon (TRASH i dont want)"); 
```

我试图达到的输出：

```
array(
    array('teams'=>'chelsea Vs MAN-UNITED','score'=>'0-5')
    array('teams'=>'chelsea Vs Aston Villa','score'=>'0-2')
    array('teams'=>'chelsea Vs Pokemon','score'=>'0-3')
    ); 
```

我目前的方法是使用 explode(' ',$str); 然后移动 [0]。与'.[2] 进入团队和 [1] 进入得分..

这工作正常，除非团队名称中有空格，或者 () 中有额外的文本。

那么这可以使用 preg_match 来完成吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T02:28:08.967

您可以使用

```
preg_split('/ (\d+-\d+) /', $str, 3, PREG_SPLIT_DELIM_CAPTURE); 
```

这会将您想要的三个段放入一个数组中。在上面的第一个示例中：

```
array(3) {
  [0] =>
  string(8) "Chelsea"
  [1] =>
  string(3) "0-5"
  [2] =>
  string(11) "MAN-UNITED"
} 
```

然后，您可以进一步过滤第一个和第三个结果以删除垃圾。不幸的是，你没有给出处理垃圾的具体规则。如果团队和分数之间可能存在垃圾，除非您知道自己在寻找什么，否则可能很难将其清除。我也不确定是否`\d+-\d+`可以出现在除分数之外的字符串中的任何位置。

另一种可能是

```
preg_match('/([a-z\.\s]+)(\d+-\d+)([a-z\.\s]+)/i', $str, $matches); 
```

...将三件物品存放在其中`$matches`并清除垃圾。但是，它不允许团队名称中包含数字，并且不会修剪尾随/前导空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T02:29:40.583

试试这个：

```
$str=array( "Chelsea 0-5 MAN-UNITED",
            "Chelsea 0-2 Aston Villa",
            "Chelsea 0-3 Pokemon (TRASH i dont want)");

$arr = array();

$pattern = "/([0-9]+\-[0-9]+)/";
foreach ($str as $sub) {
    $parts = preg_split($pattern, $sub, -1, PREG_SPLIT_DELIM_CAPTURE);
    if (count($parts) == 3) {
        $team1 = trim(preg_replace("/\(.*\Z/", "", $parts[0]));
        $score = trim($parts[1]);
        $team2 = trim(preg_replace("/\(.*\Z/", "", $parts[2]));

        $teams = "$team1 Vs $team2";

        $element = array("teams" => $teams, "score" => $score);
        $arr[] = $element;
    }
}

print_r($arr); 
```

输入：

```
$str=array( "Chelsea 0-5 MAN-UNITED",
        "Chelsea 0-2 Aston Villa",
        "Chelsea 0-3 Pokemon (TRASH i dont want)"); 
```

输出：

```
Array
(
    [0] => Array
        (
            [teams] => Chelsea Vs MAN-UNITED
            [score] => 0-5
        )

    [1] => Array
        (
            [teams] => Chelsea Vs Aston Villa
            [score] => 0-2
        )

    [2] => Array
        (
            [teams] => Chelsea Vs Pokemon
            [score] => 0-3
        )

) 
```

这是在行动：[http ://eval.in/14236](http://eval.in/14236)

哦，请确保您至少使用 PHP 4.0.5。就是在那个时候`PREG_SPLIT_DELIM_CAPTURE`介绍的。

# mysql - MySQL查询特定年份和地区

> ID：15754972
> 
> 赞同：0
> 
> 时间：2013-04-02T02:17:21.190
> 
> 标签：mysql, sql, database

我尝试进行查询，我可以在数据库中看到 2007 年和 2008 年美国和世界其他地区的销售净额以及所有小计和总计。（值得一提的是，美国和 World 是区域，已在数据库中编码）

我的查询：

```
SELECT country regionname, sum(custamot)Totsales 
FROM( select o.customerid, sum(netamount) custamot, c.country
FROM orders o join customers c
on o.customerid = c.customerid
where country like 'US' 
group by c.customerid ) iv; 
```

这个查询只是告诉我美国的总销售额（你可以看到没有一年）。我尝试了没有该部分的查询：

```
where country like 'US' 
```

但结果是一样的。我找不到向我显示特定年份的美国和世界的查询...

任何想法都会有所帮助

谢天谢地，乔普

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T02:19:35.413

您需要`group by`在外面添加一个子句：

```
SELECT country as regionname, sum(custamot) as Totsales 
FROM (select o.customerid, sum(netamount) custamot, c.country
      FROM orders o join
           customers c
           on o.customerid = c.customerid
      group by c.customerid
     ) iv
group by country; 
```

实际上，您不需要子查询：

```
select country as regionname, sum(netamount) as Totsales
FROM orders o join
     customers c
     on o.customerid = c.customerid
group by country; 
```

要在同一查询中获取总数，请使用`with rollup`：

```
select country as regionname, sum(netamount) as Totsales
FROM orders o join
     customers c
     on o.customerid = c.customerid
group by country with rollup; 
```

最后，要添加年份，要么使用`where`子句，要么试试这个：

```
select year(orderdate) as yr, country as regionname, sum(netamount) as Totsales
FROM orders o join
     customers c
     on o.customerid = c.customerid
group by year(orderdate), country with rollup; 
```

并将 US 和 ROW 分开：

```
select year(orderdate) as yr,
       (case when country = 'US' then 'US' else 'ROW' end) as region,
       sum(netamount) as TotSales
FROM orders o join
     customers c
     on o.customerid = c.customerid
group by year(orderdate),  (case when country = 'US' then 'US' else 'ROW' end) with rollup; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T02:23:22.803

像这样的东西：

```
SELECT country as regionname, sum(custamot)Totsales 
FROM( select o.customerid, sum(netamount) custamot, c.country
      FROM orders o join customers c
       on o.customerid = c.customerid
      where left(my_date,4) between 2007 and 2008
      group by c.customerid ) iv
group by country 
```

萨卢多斯 ;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T02:24:03.070

要获得某一年的结果，假设您有一个日期字段，

```
where YourDateField >= {d '2007-01-01'}
and YourDateField < {d '2008-01-01'} 
```

# c# - c# 对自定义列表进行排序

> ID：15754973
> 
> 赞同：2
> 
> 时间：2013-04-02T02:17:35.153
> 
> 标签：c#, linq, list, sorting, object

我有以下列表：

```
public class Address{
    public string Number { get; set; }
    public string Street { get; set; }
    public string Suburb { get; set; }
}

List<Address> MyAddressList = new List<Address>(); 
```

我想做的是按郊区然后街道对这个列表进行排序。我已经看到我可以按以下属性之一进行排序（在这种情况下为郊区）：

```
MyAddressList = MyAddressList.OrderBy( x => x.Suburb ).ToList(); 
```

但我想先按 Suburb 然后按 Street 排序。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T02:18:30.953

您可以使用 ThenBy（或 ThenByDescending）调用来链接进一步的排序：

```
MyAddressList = MyAddressList.OrderBy( x => x.Suburb ).ThenBy(x => x.Street).ToList(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T02:18:58.057

您可以使用 ThenBy

> 按升序对序列中的元素进行后续排序。

[http://msdn.microsoft.com/en-us/library/system.linq.queryable.thenby.aspx](http://msdn.microsoft.com/en-us/library/system.linq.queryable.thenby.aspx)

```
MyAddressList = 
   MyAddressList.OrderBy( x => x.Suburb ).ThenBy(x => x.Street).ToList(); 
```

如果需要，您还可以[链接多个 ThenBy](https://stackoverflow.com/questions/3760001/linq-orderby-versus-thenby)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T02:35:22.837

您也可以`Comparison`像这样使用委托：

```
private int CompareAddress(Address first, Address second)
{
    if (first.Suburb.Equals(second.Suburb))
    {
        return first.Street.CompareTo(second.Street);
    }
    else
    {
        return first.Suburb.CompareTo(second.Suburb);
    }
} 
```

然后：

```
List<Address> MyAddressList = new List<Address>();
MyAddressList.Sort(CompareAddress); 
```

# java - 使用递归将字符串与通配符匹配

> ID：15754974
> 
> 赞同：0
> 
> 时间：2013-04-02T02:17:54.230
> 
> 标签：java, recursion, wildcard

对不起，如果这很长，但请多多包涵。我正在尝试通过递归检查 2 个字符串是否相同（我可以通过基本切掉字符串的一部分来做到这一点）并且通配符有特殊情况：

我一生都无法得到它，我试图检查是否`'@'`存在并再次调用该函数以及 asterix 的类似想法，但我无法得到它。任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T02:29:51.190

只显示代码的相关部分：

```
else if (c1String.equals("@") || c2String.equals("@")) {
            return areTheSame(x.substring(1), y.substring(1));
        }

        else if (c1String.equals("*") || c2String.equals("*")){
            return true;
        } 
```

我只是用 .equals 替换了 (==) 作为字符串。这会处理您的前两种情况。

== 检查您不需要的引用相等性。您需要检查值是否相同，因此需要使用 .equals 方法进行字符串比较。

我建议您阅读有关这方面的 java 文档以进一步清楚。

第三是一种特殊情况，您需要明确地处理它

```
else if (x.length() == 0 && y.length() != 0 || y.length() == 0
            && x.length() != 0) {
        return false;
    } 
```

此代码块强制返回 false。[您将需要在此 if 块中处理您的特殊情况，并为第三种情况强制返回 true。]

希望这可以帮助。

# prolog - 第一个谓词中的 Prolog Cut 运算符

> ID：15754981
> 
> 赞同：2
> 
> 时间：2013-04-02T02:18:26.960
> 
> 标签：prolog

我在 Prolog 中有以下基础：

```
holiday(friday,may1).
weather(friday,fair).
weather(saturday,fair).
weather(sunday,fair).
weekend(saturday).
weekend(sunday).

picnic(Day) :- !,weather(Day,fair), weekend(Day).
picnic(Day) :- holiday(Day,may1). 
```

当我运行时，`picnic(When).`我得到以下跟踪：

```
[trace]  ?- picnic(When).
   Call: (6) picnic(_G716) ? creep
   Call: (7) weather(_G716, fair) ? creep
   Exit: (7) weather(friday, fair) ? creep
   Call: (7) weekend(friday) ? creep
   Fail: (7) weekend(friday) ? creep
   Redo: (7) weather(_G716, fair) ? creep
   Exit: (7) weather(saturday, fair) ? creep
   Call: (7) weekend(saturday) ? creep
   Exit: (7) weekend(saturday) ? creep
   Exit: (6) picnic(saturday) ? creep
When = saturday ;
   Redo: (7) weather(_G716, fair) ? creep
   Exit: (7) weather(sunday, fair) ? creep
   Call: (7) weekend(sunday) ? creep
   Exit: (7) weekend(sunday) ? creep
   Exit: (6) picnic(sunday) ? creep
When = sunday. 
```

**我的疑问是：据我所知，cut 运算符应该在!**左侧的谓词时停止搜索替代方案。信号为真。第一个位置的信号是什么意思？为什么解释器一直在寻找可以使其他谓词为真的其他值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T02:53:23.527

该削减的效果是您的第二条 picnic/1 规则将被完全忽略。在您的程序生命周期内，它永远不会有机会触发。

但是在可用的替代方案（切线右侧的目标）中，回溯仍然在起作用，您可以在跟踪中清楚地观察到它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-07T09:55:15.100

Prolog 的艺术，第 11 部分，剪切和否定 “操作上，剪切处理如下。目标成功并将 Prolog 提交给所有选择，因为父目标与剪切发生的子句的头部统一。” 因此，一旦您的首要目标与您的第一次野餐/1 的负责人统一，它就不能与您的第二次野餐/1 的负责人统一。

# java - 如何使用具有多个参数的数据类 toString？

> ID：15754987
> 
> 赞同：1
> 
> 时间：2013-04-02T02:19:18.177
> 
> 标签：java, android

```
ArrayList<Items> itemsClass = new ArrayList<Items>();

itemClass.add(new Items(String, int, boolean));

public class Items{

    String x;
    int y;
    boolean z;

    public Items(String x, int y, boolean z){
        x = this.x;
        y = this.y;
        z = this.z;
    }

    public toString(){

        /*
         *This is my question
        */

    }

} 
```

如何在此类中使用构造函数编写 toString 方法，以便可以添加到我的 ArrayList？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T02:29:16.410

toString 方法与添加到 ArrayList 无关。toString 方法将用于以您想要的方式打印出对象。如果你写

```
// Instantiate the itemsClass
ArrayList itemsClass = new ArrayList();

// Add multiple Items to the itemClass
itemClass.add(new Items("String1", 0, true));
itemClass.add(new Items("String2", 1, true));

// Uses the individual itemClasses toString methods
System.out.println(itemClass[0]);
System.out.println(itemClass[1]); 
```

您缺少 toString 的返回类型。像这样的东西适用于您的项目 toString：

```
public String toString(){
   string result = "";
   result += "String: " + x + "\n";
   result += "Integer: " + y + "\n";
   result += "Boolean: " + z + "\n";
   return result;
} 
```

这将产生如下输出：

```
String:  String1
Integer: true
Boolean: 1

String: String2
Integer: true
Boolean: 1 
```

# javascript - 谷歌图表：如何使“空白”的右侧为空？

> ID：15754989
> 
> 赞同：4
> 
> 时间：2013-04-02T02:19:45.540
> 
> 标签：javascript, css, google-visualization

我使用谷歌图表来构建一些图形和文本描述。

在第一次迭代中，我为每种图形类型使用了小“标题”，看起来不错。但在某些时候，我已经为每个图表添加了总价值......并且文本开始被包装。

**问题 1：**有什么方法可以防止文本换行（见图表的右侧部分）？

我试过将文本放在“...”中，但谷歌图表只是将这些标签转换为纯文本。

**问题2：**有没有办法将整个图形向左移动并占用未使用的区域，以便右侧部分有更多的文本空间？

**欢迎任何想法！**可能还有其他适合我的解决方案吗？

PS 请在屏幕截图中查看现在的样子： ![在此处输入图像描述](https://i.stack.imgur.com/pIILy.png)

PPS 这是我用来显示图表的 JS 代码

```
<script type="text/javascript" src="/js/jquery.js"></script>
<script type="text/javascript" src="/js/google/jsapi.js"></script>
<script type="text/javascript">

    google.load("visualization", "1", { packages: ["corechart"] });
    google.setOnLoadCallback(drawChart);
    var expArray = [<%=ExperienceArray %>];

    function drawChart() {
        if (expArray.length > 0) {
            $('#chart_div').show();
            $('#MessagesDiv').hide();

            var total = 0, train = 0, match = 0, ageing = 0;
            for (var i = 0; i < expArray.length; i++) {
                total += expArray[i][1];
                train += expArray[i][2];
                match += expArray[i][3];
                ageing += expArray[i][4];
            }
            var data = google.visualization.arrayToDataTable([
                ['№', 'Total (' + total + ')', 'Training (' + train + ')', 'Matches (' + match + ')', 'Ageing (' + ageing + ')']
            ].concat(expArray));

            var options = {
                title: 'Gained experience',
                allowHtml: 'true',
                hAxis: { title: '', titleTextStyle: { color: 'black' } },
                colors: ['#00FF00', '#6600CC', '#0000CC', '#000000']
            };

            var chart = new google.visualization.AreaChart(document.getElementById('chart_div'));
            chart.draw(data, options);
        } else {
            $('#chart_div').hide();
            alert("Data are absent");
        }
    }
</script>

<div id="chart_div" style="width: 900px; height: 500px;"></div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T10:23:46.200

将以下代码（根据需要进行调整）添加到您的选项中：`chartArea: {left: 0}`

所以你的选项文件会变成这样：

```
 var options = {
            title: 'Gained experience',
            allowHtml: 'true',
            hAxis: { title: '', titleTextStyle: { color: 'black' } },
            colors: ['#00FF00', '#6600CC', '#0000CC', '#000000'],
            chartArea: {left: 0}
        }; 
```

*注意：当前设置将切掉整个轴标签，因此您想使用大小大于 0 的适当大小（您可以使用算法计算某些内容，或者只是摆弄直到您想要它）。*

然而，对于传奇来说，没有诀窍。

当 Google 为图表创建 SVG 时，它会将图例分成两行（两个单独的 SVG 文本元素），因此不容易调整。你不能很容易地修复它。一种选择是创建一个仅包含图例（没有图表区域）的单独图表，该图表将模仿图例，然后将两个图表链接在一起（如果您想单击与图例的交互性）。

或者，您可以使用任何字体大小来减小字体大小，`legend: {textStyle: {fontSize: 8}}`或者使用任何会阻止文本换行的字体大小（同样，您可以创建一个算法或摆弄它直到它起作用）。

作为一个单独的选项，您可以创建一个手动图例并使用 javascript 来模拟点击交互，然后您可以使用 CSS/Javascript 来设置您想要的格式。

# jpa - @OneToOne 是否需要 CascadeType.MERGE？

> ID：15754995
> 
> 赞同：1
> 
> 时间：2013-04-02T02:20:41.837
> 
> 标签：jpa, merge, cascade, one-to-one

在以下装修和条件下，

```
/**
 * passsalt.
 */
@JoinColumn(name = "PASSSALT_ID", nullable = false)
@OneToOne(cascade = {CascadeType.PERSIST,
                     CascadeType.MERGE, // is this actually required?
                     CascadeType.REMOVE},
          optional = false, orphanRemoval = true)
@NotNull
@XmlTransient
private Morton passsalt; 
```

*   `passsalt`必须与该实体一起存在。( `CascadeType.PERSIST`)
*   `passsalt`可以用新`detached`实例替换。( `CascadeType.MERGE`?)
*   `passsalt`删除此实体时必须删除。( `CascadeType.REMOVE`)
*   `Morton`没有要更新的字段

问题：`CascadeType.MERGE`是强制性的吗？

我在有无的情况下进行了测试，没有`CascadeType.MERGE`它似乎也可以工作。

Q2：问题标题中的“是”是否正确？应该是“是”吗？

这是一种替换的方法`passsalt`。

```
public boolean nassword(final Shadow reference, final byte[] password,
                        final byte[] nassword) {

    passsalt = new Morton();
    passcode = passsalt.salty(nassword);

    return true;
} 
```

我用以下方法进行了测试。

```
@Test(enabled = true, invocationCount = 1)
public void testNassword0() {
    final EntityManager manager = LocalPU.createEntityManager();
    try {
        final EntityTransaction transaction = manager.getTransaction();
        transaction.begin();
        try {
            final String username = newUsername(manager);
            final byte[] password = newPassword();
            Shadow shadow = persistInstance(manager, username, password);
            Assert.assertTrue(shadow.puthenticate(shadow, password));
            System.out.println("=========================================");
            LOGGER.log(Level.INFO, "mortons: {0}",
                       MORTONS(manager, 0, 1024));
            final byte[] nassword = newPassword();
            shadow.nassword(shadow, password, nassword);
            shadow = manager.merge(shadow);
            manager.flush();
            System.out.println("=========================================");
            LOGGER.log(Level.INFO, "mortons: {0}",
                       MORTONS(manager, 0, 1024));
            Assert.assertFalse(shadow.puthenticate(shadow, password));
            Assert.assertTrue(shadow.puthenticate(shadow, nassword));
            transaction.commit();
        } catch (Exception e) {
            transaction.rollback();
            e.printStackTrace(System.err);
            Assert.fail(e.getMessage());
        }
    } finally {
        manager.close();
    }
} 
```

这是输出。

```
4월 02, 2013 11:55:03 오전 org.hibernate.validator.internal.util.Version <clinit>
INFO: HV000001: Hibernate Validator 4.3.0.Final
[EL Info]: 2013-04-02 11:55:03.897--ServerSession(571229670)--EclipseLink, version: Eclipse Persistence Services - 2.3.2.v20111125-r10461
[EL Info]: 2013-04-02 11:55:04.744--ServerSession(571229670)--file:/E:/svnwc/jinahya.googlecode.com/trunk/com.googlecode.jinahya/jinahya-ee/target/test-classes/_localPU login successful
4월 02, 2013 11:55:06 오전 com.googlecode.jinahya.persistence.Morton _PrePersist
INFO: _PrePersist(): Morton@1760972179&id=1048576
4월 02, 2013 11:55:06 오전 com.googlecode.jinahya.persistence.Shadow puthenticate
INFO: puthenticate(Shadow@1311874806?id=1048576&username=0KIWHFirmA581Qf5AscsrVbN9YW30pAF&passcode=[B@57d01cc, [B@5200fae4)
4월 02, 2013 11:55:06 오전 com.googlecode.jinahya.persistence.Shadow puthenticate
INFO: passsalt: Morton@1760972179&id=1048576
=========================================
4월 02, 2013 11:55:08 오전 com.googlecode.jinahya.persistence.ShadowTest testNassword0
INFO: mortons: [Morton@1760972179&id=1048576]
4월 02, 2013 11:55:08 오전 com.googlecode.jinahya.persistence.Shadow nassword
INFO: nassword(Shadow@1311874806?id=1048576&username=0KIWHFirmA581Qf5AscsrVbN9YW30pAF&passcode=[B@57d01cc, [B@5200fae4, [B@1b6ac76b)
4월 02, 2013 11:55:08 오전 com.googlecode.jinahya.persistence.Shadow puthenticate
INFO: puthenticate(Shadow@1311874806?id=1048576&username=0KIWHFirmA581Qf5AscsrVbN9YW30pAF&passcode=[B@57d01cc, [B@5200fae4)
4월 02, 2013 11:55:08 오전 com.googlecode.jinahya.persistence.Shadow puthenticate
INFO: passsalt: Morton@1760972179&id=1048576
4월 02, 2013 11:55:11 오전 com.googlecode.jinahya.persistence.Morton _PrePersist
INFO: _PrePersist(): Morton@93935309&id=1048577
=========================================
4월 02, 2013 11:55:11 오전 com.googlecode.jinahya.persistence.ShadowTest testNassword0
INFO: mortons: [Morton@93935309&id=1048577]
4월 02, 2013 11:55:11 오전 com.googlecode.jinahya.persistence.Shadow puthenticate
INFO: puthenticate(Shadow@1311874806?id=1048576&username=0KIWHFirmA581Qf5AscsrVbN9YW30pAF&passcode=[B@641e8314, [B@5200fae4)
4월 02, 2013 11:55:11 오전 com.googlecode.jinahya.persistence.Shadow puthenticate
INFO: passsalt: Morton@93935309&id=1048577
4월 02, 2013 11:55:12 오전 com.googlecode.jinahya.persistence.Shadow puthenticate
INFO: puthenticate(Shadow@1311874806?id=1048576&username=0KIWHFirmA581Qf5AscsrVbN9YW30pAF&passcode=[B@641e8314, [B@1b6ac76b)
4월 02, 2013 11:55:12 오전 com.googlecode.jinahya.persistence.Shadow puthenticate
INFO: passsalt: Morton@93935309&id=1048577 
```

总之，

```
After persisted ->           mortons: [Morton@1760972179&id=1048576]
After replaced and merged -> mortons: [Morton@93935309&id=1048577] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T14:24:20.340

简短的回答，它不是必需的。

级联持久化和合并是分开的事情。当您在拥有实体上调用 persist 时使用 Cascade Persist，从而导致在引用的 passsalt 上也调用 persist。如果 cascade persist 在关系上，则暗示在调用刷新或提交时也会找到引用新对象。

另一方面，合并以相同的方式应用于合并操作。当您在实体上调用合并时，它会导致在 passsalt 上也调用合并。如果它存在并且刚刚分离，则将获取更改。如果它是新的，它将被插入，类似于调用persist。当未指定级联合并并且关系引用分离的对象时会发生什么被规范涵盖，但如果实体是新实体会发生什么似乎是灰色的。它声明返回的拥有实体引用了 passsalt 的托管实例，这意味着它无论如何都会被插入，因为托管实例需要在刷新或提交时与数据库同步。所以它应该没有效果，但是根据您使用合并 api 的方式以及您的 JPA 提供程序的行为方式，您可能希望保持它的设置。

此外，您正在使用 orphanRemoval，因此级联删除是隐含的并且不需要。OrphanRemoval 意味着引用的 passsalt 不能在没有所有者实体的情况下存在，因此当所有者被删除或取消引用 passsalt 时，它将从数据库中删除而无需级联删除设置。

# c#-4.0 - 如何获取 WPF 应用程序上第二个按钮的文本

> ID：15754996
> 
> 赞同：0
> 
> 时间：2013-04-02T02:20:44.980
> 
> 标签：c#-4.0, automation, coded-ui-tests

我正在使用 CodedUI 在 WPF 应用程序上实现自动化，我在一个表单中有 2 个按钮，我想验证每个按钮的文本。但是在运行时只通过了脚本。因为第二个脚本的实际结果总是第一个按钮的实际结果。那么我如何获得第二个文本来验证？请帮我。

（我在录制时看到它们是相同的 AutomationID）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-20T16:00:40.583

检查 uitest 文件中按钮的搜索属性和搜索配置。如果属性不明确，codedui每次都会找到相同的按钮。如果您有权访问应用程序源，请尝试为按钮提供唯一的友好名称。

# asp-classic - ASP禁用按钮和运行功能

> ID：15754997
> 
> 赞同：2
> 
> 时间：2013-04-02T02:20:47.870
> 
> 标签：asp-classic

我想要一个禁用按钮并运行该功能的网页，刷新页面后，该按钮将重新启用。该按钮是使用以下方法创建的。问题是当我点击按钮时，它可以禁用但它不会运行该功能，页面甚至不会刷新。不知道问题出在哪里。

`set common = server.createobject("Pen_Ebizcommonproc.stringproc")`

`<%=common.writeButton ("Submit1","Submit","Create New Sales Contract",30,"onclick=""this.disabled=true;CheckGWidth(this.form);this.form.ContractType.value='N';""")%>`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T08:02:18.853

我主要做的是在 javascript 函数中提取它。我记得禁用按钮会取消该按钮的任何后续内联操作。

```
<form action="test.asp" method="post">
    <input type="submit" onclick="doSomething(this);" />
    <input type="text" id="ContractType" name="ContractType" />
</form> 
```

然后在javascript中

```
function doSomething(sender)
{
    sender.disabled=true;
    CheckGWidth(sender.form);
    sender.form.ContractType.value='N';
    sender.form.submit();
} 
```

希望这有任何帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T02:29:04.963

我不得不这样做几次，以便刷新页面和重新访问页面的处理方式与第一次访问或在页面上有多个表单时提交表单的一部分后不同，例如在计算更新时购物车。

根据场景，我使用 cookie 记录加载的页面，以便我可以检测它是第一次访问、刷新还是什么。如果您有两个按钮用于“更新”或“完成”之类的操作，则它们可以使用具有不同隐藏字段的单独表单来表示 mode=update 或 mode=finish。