# StackOverflow 问答 15578000-15578999

# perl - 在 Windows 7 上设置 Active Perl 5.8.6

> ID：15578002
> 
> 赞同：2
> 
> 时间：2013-03-22T19:02:21.333
> 
> 标签：perl

我知道以前有人问过这个问题，但是我发现的所有解决方案都不适合我。这是我想要做的。

我需要能够通过键入以下命令通过命令提示符运行 perl 脚本：

```
helloworld param1 param2 
```

如果我现在尝试这样做，我的参数不会在@ARGV 中捕获。但是，如果我输入：

```
perl helloworld.pl param1 param2 
```

参数在@ARGV 中捕获。

我已经从有关此主题的其他帖子中完成了以下操作：

```
assoc .pl=Perl
ftype Perl="C:\Perl\Bin\perl.exe" "%1" %* 
```

我还单击了开始->默认程序->将文件类型或协议与程序关联。搜索 .pl 并浏览到 C:\Perl\bin\perl.exe。

我还使用 regedit 将 HKCR\Perl\shell\open\command 中的 open 值更改为：

```
(Default) REG_SZ "C:\Perl\Bin\perl.exe" %1 %* 
```

在完成所有这些之后，我仍然无法通过键入以下内容来执行脚本：

```
helloworld param1 param2 
```

对于我可能错过的任何其他意见或建议，我将不胜感激......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T19:42:41.117

你说你有

```
"C:\Perl\Bin\perl.exe" "%1" %* 
```

但是你把它改成了

```
"C:\Perl\Bin\perl.exe" %1 %* 
```

应该是前者。

* * *

使用您描述的设置，您应该使用

```
helloworld.pl param1 param2
          ^^^ 
```

如果要省略`.pl`，则必须添加`.pl`到`PATHEXT`env var。

```
>set PATHEXT=.PL;%PATHEXT%

>type a.pl
print "$ARGV[0], $ARGV[1]!\n";

>a Hello World
Hello, World! 
```

（当然，您可能希望通过更改启动环境而不是仅更改此 shell 来使更改更持久。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T15:00:08.840

我下载了以下应用程序：

[http://creativelement.com/powertools/](http://creativelement.com/powertools/)

我用它来创建 .pl 与 perl.exe 的关联，然后我可以在没有 perl 或 .pl 的情况下运行 perl 脚本，它也会接受我的参数。与我在这些线程中阅读的所有内容相比，我不确定它做了什么，但我只是想我会与大家分享。

谢谢

# arrays - TWIG 如何从数组中获取第一项

> ID：15578003
> 
> 赞同：45
> 
> 时间：2013-03-22T19:02:27.357
> 
> 标签：arrays, twig

我需要从树枝模板中的字段中获取第一项。有什么功能吗？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2013-03-23T08:15:42.487

是的，有，它被称为[`first`](http://twig.sensiolabs.org/doc/filters/first.html)。其余部分是从文档中复制的。

> 1.12.2 版中的新功能：第一个过滤器是在 Twig 1.12.2 中添加的。

第一个过滤器返回序列、映射或字符串的第一个“元素”：

```
{{ [1, 2, 3, 4]|first }}
{# outputs 1 #}

{{ { a: 1, b: 2, c: 3, d: 4 }|first }}
{# outputs 1 #}

{{ '1234'|first }}
{# outputs 1 #} 
```

它也适用于实现 Traversable 接口的对象。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-03-17T08:09:25.940

我正在寻找带有 twig 的数组的最后一个元素，发现了这个问题，发现 Twig 也有一个[`last`](http://twig.sensiolabs.org/doc/filters/last.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-20T07:29:14.793

在**Twig 文档**：[https](https://twig.symfony.com/doc/3.x/filters/first.html) ://twig.symfony.com/doc/3.x/filters/first.html ，您还可以找到更好的答案和其他相关内容。

# javascript - 如何将 JavaScript 编译器（如 Jurassic、ClearScript）集成到 Visual Studio 2010 shell

> ID：15578007
> 
> 赞同：4
> 
> 时间：2013-03-22T19:02:40.120
> 
> 标签：javascript, visual-studio-debugging, jurassic

我有一个项目，我必须支持从 Jurassic 或 ClearScript 或任何其他开源 java 脚本编译器（用于 .net）到 Visual Studio 2010 隔离 shell 的 javascript 调试。我的要求是我可以使用 F5、F10 并放置一个断点，以便我可以调试自定义 java 脚本代码。我在网上搜索了很多，但找不到任何有用的东西:-(。我已经下载了 IronPthyon 隔离外壳项目，但它看起来非常复杂，我只想将已经实现的编译器（侏罗纪或 clearscript）集成到隔离外壳中。

提前非常感谢。

# mpi - 使用和不使用 mpirun 运行程序的区别

> ID：15578009
> 
> 赞同：13
> 
> 时间：2013-03-22T19:02:46.093
> 
> 标签：mpi, openmpi

`MPI_Open_port`我在 MPI 中使用和实现了点对点连接`MPI_Comm_accept`。我使用运行服务器和客户端程序

```
rafael@server1:~$ mpirun server
rafael@server2:~$ mpirun client 
```

在不同的电脑上。我注意到

```
rafael@server1:~$ ./server
rafael@server2:~$ ./client 
```

也可以正常工作。您知道使用和不使用启动 MPI 可执行文件之间是否有任何区别`mpirun`？

当然，我不能给出额外的参数（例如`mpirun --mca btl self,openib`），并且所有进程的等级为0，这完全可以。但是还有什么不那么明显的吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-22T23:32:35.247

在没有`mpirun`/`mpiexec`的情况下运行称为“单例`MPI_INIT`”，是 MPI 对高质量实现的建议的一部分，可在最新 MPI 标准文档的 §10.5.2 中找到：

> 一个高质量的实现将允许任何进程（包括那些没有以“并行应用程序”机制启动的进程）通过调用`MPI_INIT`. 然后，这样的进程可以使用`MPI_COMM_ACCEPT`and`MPI_COMM_CONNECT`例程连接到其他 MPI 进程，或者生成其他 MPI 进程。MPI 不强制要求这种行为，但在技术上可行的情况下强烈鼓励这种行为。
> 
> 如果一个进程进入`MPI_INIT`并确定没有采取任何特殊步骤（即，它没有被赋予`MPI_COMM_WORLD`与其他进程形成 an 的信息）它成功并形成一个单例 MPI 程序，即`MPI_COMM_WORLD`大小为 1 的程序。

`mpirun`在您的情况下使用的是标准文本中提到的*“并行应用程序”机制。*它提供`MPI_INIT`了建立`MPI_COMM_WORLD`所有已启动进程所需的信息。如果没有来自`mpirun`进程的信息，则只能作为单例 MPI 实例运行，因此它们都具有等级`0`（这没关系，因为每个`MPI_COMM_WORLD`都是单独的）。

# fine-uploader - 是否可以使用精细上传器上传 url 文件并对其进行分块/分区？

> ID：15578010
> 
> 赞同：0
> 
> 时间：2013-03-22T19:02:47.250
> 
> 标签：fine-uploader

我也想上传 url 文件，但在示例中我只能从本地机器上传文件。是否可以使用精细上传器上传 url 文件并对其进行分块/分区？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:30:41.540

Fine Uploader 仅在您的计算机或网络上上传文件。如果您无法使用浏览器中的文件选择器访问它，则无法上传。

# css - Zurb 基金会：广告被切断

> ID：15578012
> 
> 赞同：0
> 
> 时间：2013-03-22T19:02:54.893
> 
> 标签：css, iframe, responsive-design, zurb-foundation

我在 Zurb Foundation 3 中创建了一个相当典型的布局。这是一行，左侧有 8 列（包含一个轨道滑块），右侧有 4 列广告（“侥幸”广告）和广告下方的框，在桌面上运行良好：

![桌面](../Images/983fd899cc044a22c395b0f91fcfaa14.png)

问题是当我去 iPad 宽度和网格重新调整大小时。广告的右边缘被切断，如下图所示（电器广告）。这是由于在 iframe 中投放的广告。我怎样才能防止这种情况？

![平板电脑](../Images/c1293e485807b037eafa280be990ccf1.png)

我尝试将广告上的包装 div 设置为最小宽度 300 像素（广告为 300 像素）。我曾尝试将宽度设置为 300 像素，它保留了广告尺寸，但右侧的 8 列块不会缩小以适应广告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:35:33.347

我假设您在 iframed 广告上设置了 width="" 属性。您可以通过告诉框架它是使用 flexvideo 的 iframed 视频来欺骗基础以保持您的广告内容流畅。

```
<div class="flex-video">
    <iframe width="420" height="315"
            src="../ads/yourfilenamehere.swf"
            frameborder="0"
            allowfullscreen>
    </iframe>
</div><!--/flex-video--> 
```

将此类添加到 iframe 周围的 div 将使它们保持响应。

# android - 在我的 Android 项目中向 custom_rules.xml 添加自定义 ant 任务

> ID：15578013
> 
> 赞同：4
> 
> 时间：2013-03-22T19:03:12.917
> 
> 标签：android, ant, build

我想在我的 Android 项目的 Ant 脚本中添加一个任务，以便从源代码生成 Javadocs。为此，我已将`custom_rules.xml`文件修改为

```
<project name="bbct-android-common-tests-custom-rules" default="help">
    <property name="javadoc.dir" value=""/>
    <task name="javadoc" description="Generate Javadocs">
        <javadoc sourcedir="${src.dir}" destdir="${javadoc.dir}"/>
    </task>
</project> 
```

并将以下行添加到`ant.properties`：

```
javadoc.dir=javadoc 
```

现在，当我运行时`ant javadoc`，我收到以下错误消息：

> $ ant javadoc
> 构建文件：e:\devel\src\java\bbct\android\common\test\build.xml
> 
> 构建失败
> e:\devel\src\java\bbct\android\common\test\build.xml:69：执行此行时出现以下错误：
> e:\devel\src\java\bbct\android\common\test \custom_rules.xml:22：问题：创建任务或类型任务失败
> 原因：名称未定义。
> 行动：检查拼写。
> 行动：检查是否已声明任何自定义任务/类型。
> 行动：检查任何/声明已经发生。
> 
> 总时间：0秒

我还在`<javadoc>`任务中替换了我的属性值，但仍然出现相同的错误。

Also, my google search has been in vain. I have found several articles about building Javadocs from Eclipse and writing custom Ant scripts in general, just nothing about simply adding a task to the default script. Does anyone know where I can look to figure out what I need to do to fix this problem?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T20:12:25.880

It should be

```
<target name="javadoc" description="Generate Javadocs">
        <javadoc sourcedir="${src.dir}" destdir="${javadoc.dir}"/>
</target> 
```

Notice the use of `target` and not `task`

# java - 对象作为参数传递，为什么我们不能在类中声明它

> ID：15578014
> 
> 赞同：-2
> 
> 时间：2013-03-22T19:03:12.970
> 
> 标签：java

这段代码的问题是，每当我运行它时，它都会显示

编译错误——

“找不到符号：构造函数 mywindowadapter(frame1)

位置：类 mywindowadapter mywindowadapter mwa=new mywindowadapter()"

```
import java.awt.*;
import java.awt.event.*;
/*<applet code=frame2 width=500 height=500>
</applet>*/
class frame2 extends Frame
{
    frame2(String title)
    {
        super(title);
        mywindowadapter mwa=new mywindowadapter();
        addWindowListener(mwa);     
    }
    public static void main(String ar[])
    {
        frame1 f=new frame1("my frame");
        f.setVisible(true);
        f.setSize(200,100);

     }
    public void paint(Graphics g)
     {
    g.drawString("hello frame",60,70);
     }
}
class mywindowadapter extends WindowAdapter
{

    mywindowadapter()
    {
        frame2 f=new frame2();  
    }
    public void windowClosing(WindowEvent we)
    {
        f.setVisible(false);
        System.exit(0);
    }
} 
```

下面的代码是上面代码的修正版。我无法理解前面代码中生成的错误。请帮忙！！

```
import java.awt.*;
import java.awt.event.*;
/*<applet code=frame1 width=500 height=500>
</applet>*/
class frame1 extends Frame
 {
    frame1(String title)
    {
        super(title);
        mywindowadapter mwa=new mywindowadapter(this);
        addWindowListener(mwa);     
    }
    public static void main(String ar[])
    {
        frame1 f=new frame1("my frame");
        f.setVisible(true);
        f.setSize(200,100);

    }
   public void paint(Graphics g)
    {
        g.drawString("hello frame",60,70);
    }
}
class mywindowadapter extends WindowAdapter
{
    frame1 f;
    mywindowadapter(frame1 f)
    {
        this.f=f;   
    }
    public void windowClosing(WindowEvent we)
    {
        f.setVisible(false);
        System.exit(0);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:44:29.863

因为在您的构造函数中，`frame1`您正在尝试创建一个适配器实例，该实例利用[适配器模式](http://en.wikipedia.org/wiki/Adapter_pattern)并将处理事件委托`frame1`给您作为参数传递的引用的适配器。此适配器由您添加到的侦听器列表中的侦听器使用`frame1`。

# objective-c - 如何确定 NSBezierPaths 是否在 Cocoa 中相交？

> ID：15578017
> 
> 赞同：5
> 
> 时间：2013-03-22T19:03:34.147
> 
> 标签：objective-c, cocoa, nsbezierpath

我很难弄清楚如何确定可可中两个 NSBezierPath 封闭对象的交集。我在网上做了一些研究，到目前为止还没有找到答案。

这就是我所拥有的。 ![在此处输入图像描述](../Images/385fe64522724eaf1403b3f42ee59784.png)

我需要编写某种在所有这些情况下都返回 true 的方法。

到目前为止，我在想的是通过使用**bezierPathByFlateningPath来展平矩形，然后使用****elementAtIndex: associatedPoints:**获取每个元素（作为线段）来 遍历其中的每个点并检查第二个对象（矩形或椭圆）是否包含该点（使用**containsPoint:**）。

但是，我不知道如何遍历一个段的所有点......

如果有人有任何提示或想法可能会有所帮助，我将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T19:34:16.137

如果您有 2 个贝塞尔路径矩形并且知道它们的每个框架，那么您可以使用[`NSIntersectsRect()`](https://developer.apple.com/library/mac/documentation/cocoa/reference/foundation/miscellaneous/foundation_functions/reference/reference.html#//apple_ref/c/func/NSIntersectsRect)：

```
NSRect rect1 = NSMakeRect(20.0, 150.0, 300.0, 100.0);
NSRect rect2 = NSMakeRect(100.0, 100.0, 100.0, 200.0);

[[NSColor redColor] set];

[NSBezierPath strokeRect:rect1];
[NSBezierPath strokeRect:rect2];

BOOL intersects = NSIntersectsRect(rect1, rect2);

NSLog(@"intersects == %@", (intersects ? @"YES" : @"NO")); 
```

产生：

![在此处输入图像描述](../Images/83deada9e18da271ea45bc31b1bb444e.png)

在这种情况下，它将记录`intersects == YES`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-13T15:43:26.670

这是一个非常快速和干净的解决方案。它还可以测试多条路径而不是一条，这很好，不是吗？

它适用于 CGBezier（iOS 和 MacOS 兼容）

**• 1 - 创建必要的上下文**

**创建一个与视图大小相同的 16 位、一个组件（无 alpha）图形端口**。

*   不要在每次测试时重新创建此上下文，这很耗时。仅在调整视图大小时重新创建它。
*   我们称这个上下文*为computeContext*

**创建一个 16 位、一个分量（无 alpha）、宽度和高度为 1 像素的图形端口。**

*   让我们将此上下文称为*testContext*

**• 2 - 当您需要测试路径交叉点时：**

我们在*computeContext*中进行以下操作：

*   清除上下文（它将是全黑的）
*   将上下文剪辑到要测试的路径
*   用白色填充所有要测试的路径
*   *（从现在开始，您不需要在 computeContext 中。）*获取图像并将其绘制在*testContext*中，如下所示：

> ```
> CGImageRef clippedPathsImage = CGBitmapContextCreateImage(computeContext);
> CGRect     onePixSquare = CGRectMake(0,0,1,1);
> CGContextDrawImage(testContext, onePixSquare, clippedPathsImage); 
> ```

（不用担心，图像创建功能很快。它不会分配任何内存，因为位是在 bitmapContext 中分配的）

**我们完成了！**

```
long*   data = CGBitmapContextGetData(testContext);  
BOOL    intersects = (*data!=0); 
```

*   这比使用 alpha 值进行一些构图要快得多

*   这比测试大图像中的所有像素要快得多。图像缩放是在内部进行的，硬件加速。所以这没什么大不了的。

但是，如果您想更快地加速并且可以提供更低的精度，您可以创建一个较小的 computeContext，例如 25% 的视图大小，并使用比例变换矩阵渲染所有路径。

1 像素上下文中的传输会更快，但您不确定是否检测到小于 4 像素大小的交叉点（比例为 25%，逻辑）。

不要使用 8 位灰度。我认为它不会加快处理速度，并且在减少到 1 个像素时会损失很多精度。足以失败。

> **不要忘记，在使用 hard 方法之前要做的第一个测试是测试边界框相交！**

就这样

用库打开了一个 GitHub ;) [https://github.com/moosefactory](https://github.com/moosefactory)

希望这会有所帮助，干杯！;)

* * *

这是创建 16 位灰色上下文的代码。它可以更简洁，但我声明变量以使其清楚。您不需要任何 bitmapInfo（最后一个参数），因为没有 alphaValue，而且我们不使用浮点格式。

```
-(CGContextRef)createComputeContext
{
    size_t  w = (size_t)self.bounds.size.width;
    size_t  h = (size_t)self.bounds.size.height;
    size_t  nComps = 1;
    size_t  bits   = 16;
    size_t  bitsPerPix  = bits*nComps;
    size_t  bytesPerRow = bitsPerPix*w;    
    CGColorSpaceRef  cs = CGColorSpaceCreateDeviceGray();

    CGContextRef bmContext = CGBitmapContextCreate(NULL, w, h, bits, bytesPerRow, cs, 0);

    return bmContext;
} 
```

# python - 如何检查字符串是否为电子邮件？

> ID：15578019
> 
> 赞同：0
> 
> 时间：2013-03-22T19:03:37.733
> 
> 标签：python, regex, email

我目前使用以下代码：

```
regexp = re.compile(r'[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}', re.IGNORECASE)
email = regexp.findall(stext)
if email:
    email = email[0] 
```

但即使`stext`包含除电子邮件之外的其他文本（例如，`some text email@example.com some other text`），它也可以工作。当我想检查是否**仅**`stext`包含（好的，可能带有前导或/和尾随空格，没有其他字符）时。`email@example.com`

 **PS。我还认为可能我应该使用`mail.is_email_valid`而不是正则表达式，它将[允许](http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/api/mail.py?spec=svn257&r=257#212)我支持长域，`.museam`如`.рф`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T19:06:21.353

您需要在开头添加 ^ ，表示“文本从这里开始”，最后添加 $ ，表示“此处不再有文本”。

那将给出：

`r'^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T19:20:23.487

使用这个正则表达式：

```
\s?[A-Z0-9_-+%]+@[A-Z0-9_-+%]+\.[A-Z0-9]\s? 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T20:05:22.583

为什么不在电子邮件之前和之后使用 \b 作为单词边界？**

# python - 在 Scrapy 中创建可编辑的 CrawlSpider 规则

> ID：15578021
> 
> 赞同：2
> 
> 时间：2013-03-22T19:03:42.860
> 
> 标签：python, web-crawler, scrapy

我一直在尝试创建一个可以轻松更改的简单 Scrapy CrawlSpider 脚本，但我无法弄清楚如何让链接提取器规则正常工作。

这是我的代码：

```
class LernaSpider(CrawlSpider):
"""Our ad-hoc spider"""

name = "lerna"

def __init__(self, url, allow_follow='.*', deny_follow='', allow_extraction='.*', deny_extraction=''):
    parsed_url = urlparse(url)
    domain = str(parsed_url.netloc)
    self.allowed_domains = [domain]
    self.start_urls = [url]
    self.rules = (
        # Extract links
        # and follow links from them (since no callback means follow=True by default).
        Rule(SgmlLinkExtractor(allow=(allow_follow, ), deny=(deny_follow, ))),

        # Extract links and parse them with the spider's method parse_item
        Rule(SgmlLinkExtractor(allow=(allow_extraction, ), deny=(deny_extraction, )), callback='parse_item'),
    )

    super(LernaSpider, self).__init__()

def parse_item(self, response):

    print 'Crawling... %s' % response.url
    # more stuff here 
```

我有这段代码，但我永远无法让允许/拒绝规则正常工作，我真的不明白为什么。留下空字符串会导致它否认一切吗？我想既然它是一个 RE，它只会在我输入 '.*' 或其他什么的情况下进行全面拒绝。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T22:44:36.013

你自己实例化蜘蛛吗？就像是：

```
spider = LernaSpider('http://example.com') 
```

因为否则，如果您`$scrapy crawl lerna`从命令行运行，您将错误地使用 url 作为构造函数中的第一个参数（应该是名称），并且您没有将其传递给超级。也许试试这个：

```
class LernaSpider(CrawlSpider):
    """Our ad-hoc spider"""

    name = "lerna"

    def __init__(self, name=None, url=url, allow_follow='.*', deny_follow='', allow_extraction='.*', deny_extraction='', **kw):
        parsed_url = urlparse(url)
        domain = str(parsed_url.netloc)
        self.allowed_domains = [domain]
        self.start_urls = [url]
        self.rules = (
            # Extract links
            # and follow links from them (since no callback means follow=True by default).
            Rule(SgmlLinkExtractor(allow=allow_follow, deny=deny_follow)),

            # Extract links and parse them with the spider's method parse_item
            Rule(SgmlLinkExtractor(allow=allow_extraction, deny=deny_extraction), callback='parse_item'),
        )
        super(LernaSpider, self).__init__(name, **kw)

    def parse_item(self, response):
        print 'Crawling... %s' % response.url
        # more stuff here 
```

正则表达式的东西看起来很好：空值允许所有并且不拒绝。

# objective-c - 什么是 alt 处理程序，谈论 Objective-C 运行时系统异常处理？

> ID：15578025
> 
> 赞同：3
> 
> 时间：2013-03-22T19:03:58.480
> 
> 标签：objective-c, exception-handling, objective-c-runtime

查看 Objective-C 运行时系统源代码，特别是在[objc-exception.mm](http://opensource.apple.com/source/objc4/objc4-532/runtime/objc-exception.mm)文件中，我发现了表达式“alt handler”和处理 alt 处理程序的函数。我不知道它是什么，但是根据文件注释，如果运行时库是在没有 alt 处理程序支持的情况下编译的，那么只有 zerocost 实现，我也不知道是什么。

那么，当我们谈论 Objective-C 运行时库时，什么是 alt 处理程序，什么是零成本异常处理？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T13:59:13.553

Objective-C 运行时库允许开发人员在系统第二次展开堆栈时指定每个堆栈帧调用的函数，在清理阶段，在它找到刚刚抛出的异常的 catch 子句之后。

因此，对于熟悉 Unwind 库和 ObjC 异常处理系统的人来说，当`__objc_personality_v0`针对当前堆栈帧的 Unwind Context 调用Objective-C 个性例程（语境。如果找到 alt 处理程序，则首先调用它。此后，由于 ObjC 异常处理机制使用 C++ ABI 展开堆栈，因此调用 cxx 个性函数 ( `__gxx_personality_v0`)。然而，只有在清理阶段而不是搜索阶段调用 objc 个性例程时才会这样做。因此，如果没有找到当前异常的 catch 子句，则不会调用 alt 处理程序（如果有）。

关于零成本部分，cxx 个性函数使用了零成本的异常处理。因此，如果在没有 alt 处理程序支持的情况下编译运行时库，则只有零成本实现，因为`__gxx_personality_v0`无论如何都会调用。

Objective-C 库公共 API 提供了两个函数来分别为特定的 Unwind Context:`objc_addExceptionHandler`和添加和删除 alt 处理程序`objc_removeExceptionHandler`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T00:14:16.490

路易斯，你是对的，因为有一个函数存储在这个函数上，当抛出异常时，该函数被调用，但是如果找不到异常处理程序，程序会自动终止，你是不正确的（这有点更有趣比起那个来说）。触发异常的那一刻（错误的内存读取，div 为 0，等等），操作系统 (windows/*nix) 会查看其已安装的异常处理程序链并调用它找到的第一个（通过`try{}catch{}`堵塞。现在，如果尚未编程，则执行默认处理程序，在大多数情况下，这会结束程序并执行堆栈展开。在内核模式编程中，如果您不安装自己的处理程序，则可以对整个系统进行段错误处理，默认的异常处理程序仅在大部分情况下提供给用户模式程序。

我可以为你写一个非常长的答案，但我为你找到了一个完美的网站，我认为它有助于回答你的问题，这将有助于理解你可以在编译器级别实现异常处理程序的不同方式，特别是回答你的“零成本”异常处理程序和代码中的 SJLJ 技术说明：

[异常处理解释](http://llvm.org/docs/ExceptionHandling.html)

# asp.net - ASP 报表应用程序中的 SSRS 报表格式问题

> ID：15578035
> 
> 赞同：0
> 
> 时间：2013-03-22T19:04:28.860
> 
> 标签：asp.net, ssrs-2008, report-viewer2010

我有一个 SSRS 报告，它通过 ReportViewer 控件（VS2010）显示在自定义 asp.net 报告应用程序中。SSRS 报表在报表服务器上和通过报表管理器呈现良好，但在报表应用程序中，列宽和高度被拉伸和扩展，完全放弃了 tablix 的格式。我认为这是 ReportViewer 控件中的标签的问题。有没有人想到为什么会发生这种情况？提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:17:08.463

这可能会有所帮助，但最好尝试一下。

如果您右键单击数据集的属性并转到其中的选项选项卡，您会发现默认为自动的宽度灵敏度。请把它设为假并尝试一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T22:58:59.037

关于通过不同前端托管的 SSRS 的一些想法：

1.  如果您通过 VS 进行标准 ASP.NET 创建，则 ASP.NET 或任何可能使用通过“母版页”实现的 CSS 形式的东西。您可以暂时将其关闭以进行故障排除或创建未实现母版页的页面，然后通过该页面托管 SSRS 吗？

2.  这是来自 SSRS 的所有报告还是其中一些？SSRS 语言只是 XML，您可以将报表对象嵌套在一个矩形中，看看这是否可以欺骗前端的标记。

3.  这是通过直接链接到 SSRS Web 服务的“ReportViewer”对象托管的吗？您也可以通过许多其他方式调用 Web 服务，但是它们需要更多时间来设置。您可以通过 html“表单”查看对服务的 SSRS 调用，也可以在 C# 中设置自己的代理类，以获取 Excel、PDF、MHTML 等类型渲染的二进制形式。

# asp.net-web-api - ASP.NET WebAPI OData 服务器端分页

> ID：15578036
> 
> 赞同：0
> 
> 时间：2013-03-22T19:04:32.807
> 
> 标签：asp.net-web-api, entity-framework-5, paging, odata

我有一个 ASP.NET WebAPI OData 服务。EntitySetController<,>.Get() 方法之一返回实体框架查询。由于实体框架查询返回很多行，我想使用服务器端分页来保持内存占用合理。此外，在这种情况下，$skiptoken 比 $skip 快得多。

[Queryable(PageSize = n)] 属性似乎并没有完全满足我的需要，原因有两个：

*   他们实际的 SQL 查询没有分页。就像它在做 .AsEnumerable().Take(n)
*   “下一个链接”使用 $skip 而不是 $skiptoken

有什么办法可以完成我想做的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T20:23:20.660

已经有一个工作项：

[http://aspnetwebstack.codeplex.com/workitem/500](http://aspnetwebstack.codeplex.com/workitem/500)

你可以投票。同时，没有什么能阻止您不使用 PageSize 并自己实现分页。`ODataQueryOptions`确实公开了 $skiptoken 原始值供您解析，并且您可以返回 a`PageResult<T>`来表示结果页面，并带有基于 $skiptoken 的下一页链接。

# java - 单击 JButton 时为 JButton 绘制不同的图像

> ID：15578037
> 
> 赞同：1
> 
> 时间：2013-03-22T19:04:37.773
> 
> 标签：java, swing, graphics, jbutton

我正忙着用Java制作游戏。然而，我正在努力让 GUI 正常工作。

我正在努力解决的问题：

当按下按钮时，我希望它显示一个彩色圆圈，当再次按下按钮时，我希望它在旧圆圈周围画一个圆圈，这可能会发生，直到每个按钮上最多四个圆圈。（所以有一个小圆圈，中圆圈等）有人知道如何做到这一点吗？第一次画一个圆圈并不难，但是当按钮上的图像在第二次单击后需要更改时会变得很困难，我无法使其正常工作。

欢迎所有帮助、提示和想法！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T19:08:08.353

您可以为按下按钮的次数添加一个计数器，并根据需要从最宽处开始绘制尽可能多的圆，并根据需要增加半径。

要绘制此图，请查看[Java 2D 教程](http://docs.oracle.com/javase/tutorial/2d/index.html)。

# neural-network - 训练具有约束单元的神经网络

> ID：15578038
> 
> 赞同：1
> 
> 时间：2013-03-22T19:04:37.483
> 
> 标签：neural-network, biological-neural-network

**动机：**

用于对象识别的最先进算法是通过反向传播训练的深度卷积神经网络，其中主要问题是让网络处于良好的局部最小值：http: [//books.nips.cc/papers/files/nips25 /NIPS2012_0534.pdf](http://books.nips.cc/papers/files/nips25/NIPS2012_0534.pdf)

可以从支持对象识别的神经元记录来自大脑的尖峰计数，并且可以合理地声称近似这些神经元响应的神经网络处于良好的局部最小值。[http://www.sciencedirect.com/science/article/pii/S089662731200092X](http://www.sciencedirect.com/science/article/pii/S089662731200092X)

如果您要约束神经网络中的一个单元子集以再现某些输入的某些值（例如，响应这些图像从神经元记录的尖峰计数），然后通过受约束的梯度下降来减少误差，它可能能够迫使网络稳定在一个好的局部最小值。

**准确的问题：**

鉴于网络中的某些神经元必须具有某些预定值，在最大限度减少误差的方向上改变神经网络权重的计算效率最高的方法是什么？

**迄今为止的进展：**

这似乎是一个非常困难的拉格朗日乘数问题，在做了一些工作并搜索了有关该主题的现有文献之后，我想知道是否有人听说过类似的工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-16T05:36:37.833

您最好的选择是 Kullback-Liebler Divergence (KL)。它允许您设置您希望神经元接近的值。在python中，

```
def _binary_KL_divergence(p, p_hat):
    """
    Computes the a real, KL divergence of two binomial distributions with
    probabilities p  and p_hat respectively.
    """
    return (p * np.log(p / p_hat)) + ((1 - p) * np.log((1 - p) / (1 - p_hat))) 
```

其中`p`是约束值，`p_hat`是样本的平均激活值（或神经元值）。就像将术语添加到目标函数一样简单。因此，如果算法最小化平方误差`||H(X) - y||^2`，则新形式为`||H(X) - y||^2 + KL_divergence_term`。

作为成本函数的一部分，它惩罚偏离`p`较高或较低的平均激活（图 1）。权重如何更新取决于新目标函数的偏微分。

![在此处输入图像描述](../Images/f281de314ab4b93a71761f3656eb9c4f.png)

```
 (Figure 1 : KL-Divergence Cost when `p = 0.2) 
```

事实上，我从 Sparse Auto-encoders 中汲取了这个想法，更多细节可以在[Lecture Notes on Sparse Autoencoders](http://www.stanford.edu/class/cs294a/sparseAutoencoder.pdf)中看到。

祝你好运！

# c++ - 返回指针的函数总是返回相同的值

> ID：15578040
> 
> 赞同：0
> 
> 时间：2013-03-22T19:04:47.513
> 
> 标签：c++, pointers, return-value, calloc

我对 C++ 编程相当陌生，我很难理解我当前项目的问题所在。我有一大堆 uint32_t 我想用预处理值填充。对于第一次计算来说一切都很好，但是从第二次开始，只有 *processed 指针的内存地址发生了变化，而不是它的值。

```
uint32_t *candPreprocessed = (uint32_t*) malloc(sizeof(uint32_t) * indices.size());
for(int j = 0; j < indices.size()-1; j++)
{
    char *candidate = (char*) malloc(sizeof(char) * (indices[j+1] - indices[j]) + 1);

    ... 

    uint32_t *processed = preprocess((uint8_t*) candidate, len);
    memcpy(candPreprocessed + j * sizeof(uint32_t), processed, sizeof(uint32_t));
    processed = NULL;

    // free the messages
    free(candidate);
    free(processed);
} 
```

预处理如下所示：

```
uint32_t* preprocess(uint8_t *word, size_t wordLength)
{
    uint8_t *toProcess = (uint8_t*) calloc(120, 1);

     ...

    return (uint32_t*) (toProcess);
} 
```

据我了解，free(processed) 调用应该释放在预处理期间创建的指针所占用的内存。在循环的以下迭代中，获取一个新的候选并计算一个新的长度，因此参数发生了变化。我错过了什么，为什么这没有反映在输出中？

谁能指出我正确的方向？提前致谢！

编辑：根据要求，简短的自包含编译示例 -

```
#include <iostream>
#include <stdio.h>
#include <stdint.h>
#include <stdlib.h>
#include <string.h>

uint32_t* preprocess(uint8_t *word, size_t wordLength)
{
    // preprocessing
    uint8_t *toProcess = (uint8_t*) calloc(120, 1);
    memcpy(toProcess, word, wordLength);
    toProcess[wordLength] = 128;
    int numBits = 8 * wordLength;
    memcpy(toProcess + 56, &numBits, 1);
    return (uint32_t*) (toProcess);
}

int main(int argc, char* argv[])
{
    char cand[12] = {'1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c'};
int indices[4] = {0,4,8,12};
for(int j = 0; j < 3; j++)
{
    // extract the message from the wordlist
    char *candidate = (char*) malloc(sizeof(char) * (4) + 1);
    int i=0;
    for(int k = indices[j]; k < indices[j+1]; k++)
        candidate[i++] = cand[k];
    candidate[i] = '\0';
    size_t len = strlen(candidate);

    uint32_t *processed = preprocess((uint8_t*) candidate, len);

    std::cout << processed << std::endl;

    // free the messages
    free(candidate);
    free(processed);
}

return 0;
} 
```

这会产生三个输出，其中两个是相同的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:19:03.523

由于问题的描述仍然很模糊（尽管有很多评论），我有点猜测：

```
memcpy(candPreprocessed + j * sizeof(uint32_t), processed, sizeof(uint32_t)); 
```

在我看来不对。`candPreprocessed`是指向 的指针`uint32_t`。我怀疑您实际上并不想`candPreprocessed`每 4 个条目将数据移动到数组中。

尝试：

```
memcpy(candPreprocessed + j, processed, sizeof(uint32_t)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T19:14:16.873

此行似乎将一次迭代的结果附加到更大的缓冲区：

```
 memcpy(candPreprocessed + j * sizeof(uint32_t), processed, sizeof(uint32_t)); 
```

但它只复制 4 个字节（单个`uint32_t`）。这可能是问题所在。

如果*是*问题所在，并且您修复了它，那么下一个问题将是目标缓冲区不够大，无法获取所有结果。

您提到了 C++ 编程 - 如果您尝试实际使用 C++，您会发现这要容易得多！`std::vector`会有很大帮助。

# haskell - 使用坐标计算随机三角形的边界框

> ID：15578041
> 
> 赞同：2
> 
> 时间：2013-03-22T19:04:57.067
> 
> 标签：haskell, geometry, bounding-box

我正在寻找一种合适的方法来计算三角形的矩形边界框，该三角形具有三个角作为点 - (x1,y1)、(x2,y2)、(x3,y3)。

这是我正在使用的数据类型（按照建议，我添加了更多构造函数）：

```
data Shape =
     Circle Point Double |
     Rectangle Point Point |
     Triangle Point Point Point 
```

边界框函数的形式应该是“bounding :: Shape -> Shape”。我还尝试了矩形和圆形的边界框：

```
bounding :: Shape -> Shape
bounding (Rectangle (Point x y) (Point z z1)) = (Rectangle (Point x y) (Point z z1))
bounding (Circle (Point p w) r) = (Rectangle (Point (p-r) (w-r)) (Point (p+r) (w+r))) 
```

如果应该使用图形坐标系（其中（x，y）坐标应该被视为（x，-y）），这些是否正确？

有人可以帮帮我吗？PS 不需要图形库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T20:48:18.247

I'm only posting this answer to make the point that bounding boxes and rectangles are not the same things.

```
data Point = Point Double Double   -- Point x y

data BoundingBox = BoundingBox Double Double Double Double
                            -- top    left   bottom right

data Shape
    = Circle Point Double
    | Rectangle Point Point Double
        -- yes, you need two points and a scalar to specify arbitrary rectangles
    | Triangle Point Point Point

boundingBox :: Shape -> BoundingBox
boundingBox (Circle (Point x y) r) = BoundingBox (y-r) (x-r) (y+r) (x+r)
boundingBox (Rectangle (Point x0 y0) (Point x1 y1) d)
        = BoundingBox (minimum ys) (minimum xs) (maximum ys) (maximum xs) where
    xs = [x0, x1, x1+dx, x0+dx]
    ys = [y0, y1, y1+dy, y0+dy]
    d' = d / ((x0-x1)^^2 + ((y0-y1)^^2)
    dx = d' * (y0-y1)
    dy = d' * (x1-x0)
boundingBox (Triangle (Point x0 y0) (Point x1 y1) (Point x2 y2))
        = BoundingBox (minimum ys) (minimum xs) (maximum ys) (maximum xs) where
    xs = [x0, x1, x2]
    ys = [y0, y1, y2] 
```

As an exercise, factor out the common code from the `Rectangle` and `Triangle` cases. (Bonus points for finding and fixing any bugs I've placed in the `Rectangle` case.)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T20:33:18.710

基于@dave4420 的出色观察，我假设它`Rectangles`与 x/y 轴对齐。

根据您对 的规则`Circle`，看起来 x,y 最小的点排在第一位，而 x,y 最大的点在 中排在第二位`Rectangle`。

您可能应该坚持使用数字后缀，`x`而`y`不是发明新名称，例如, `p`，`w`这些名称非常令人困惑。`z``z1`

a 的边界框`Rectangle`就是它`Rectangle`本身。

a 的边界框将`Triangle`是`Rectangle`从任意点开始具有最小和最大 x,y 的 a。

```
bounding :: Shape -> Shape
bounding rect@(Rectangle _ _) = rect
bounding (Circle (Point x y) r) = Rectangle p1 p2 where
  p1 = (Point (x-r) (y-r))
  p2 = (Point (x+r) (y+r))
bounding (Triangle (Point x1 y1) (Point x2 y2) (Point x3 y3)) = Rectangle p1 p2 where
  p1 = Point (minimum [x1 x2 x3]) (minimum [y1 y2 y3])
  p2 = Point (maximum [x1 x2 x3]) (maximum [y1 y2 y3]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T19:24:01.850

你试过什么？你有代码吗？

你需要：

```
 data Shape = Triangle Point Point Point | Rectangle Point Point 
```

假设x向右增加，y向上增加。左上角是 (min{x1, x2, x3}, max{y1, y2, y3}) 并且你需要右下角。

* * *

### 编辑

x 应该向右增加，y 向下增加。我添加了三角形一，删除了不必要的括号并派生（显示）以便能够打印形状数据类型。给你的完整代码：

```
data Point = Point Double Double deriving (Show)

data Shape =
        Circle Point Double |
        Rectangle Point Point |
        Triangle Point Point Point deriving (Show)

bounding :: Shape -> Shape
bounding (Rectangle (Point x y) (Point z z1)) = Rectangle (Point x y) (Point z z1)
bounding (Circle (Point p w) r) = Rectangle (Point (p-r) (w-r)) (Point (p+r) (w+r))
bounding (Triangle (Point x1 y1) (Point x2 y2) (Point x3 y3)) = Rectangle 
        (Point (minimum [x1, x2, x3]) (minimum [y1, y2, y3])) 
        (Point (maximum [x1, x2, x3]) (maximum [y1, y2, y3])) 
```

# image - jQuery幻灯片从加载图像

> ID：15578042
> 
> 赞同：0
> 
> 时间：2013-03-22T19:04:59.997
> 
> 标签：image, tags, slideshow

我的名字是琳达，我是这个董事会的新手 :)。

我目前正在制作超大幻灯片，我想要实现的是采用这样的自动生成列表：

编辑：

感谢您的快速回答，但我认为您误解了这部分:)：例如，我试图得到这个：

```
<ul>
<li><span class="image">/images/image1.jpg</span></li>
<li><span class="image">/images/image2.jpg</span></li>
</ul> 
```

**用js到这个：**

```
slides : [
            {'image1' : "/images/image1.jpg"},
            {'image3' : "/images/image3.jpg"} ], 
```

我几乎可以使用这个[http://jsfiddle.net/jfriend00/bYs​​4x/脚本，但上面的代码在](http://jsfiddle.net/jfriend00/bYs4x/)*image*周围插入了一些感叹号。我怎样才能摆脱它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:14:34.063

好吧，我不确定如何解决这个问题，但我认为你必须这样做

```
 slides : [
            {'image1' : "/images/image1.jpg"},
            {'image2' : "/images/image2.jpg"},
            {'image3' : "/images/image3.jpg"} ], 
```

而且我认为您将不得不引用 JSON 元素，

幻灯片[0].image1，幻灯片[0].image2....

# scala - 带有隐式参数的 Scala 设计模式（在 Scala 中播放 2.x）

> ID：15578044
> 
> 赞同：3
> 
> 时间：2013-03-22T19:05:01.093
> 
> 标签：scala, playframework, playframework-2.0, implicit

我正在做一个 play 2.1 项目，需要一些关于 scala 设计问题的指导。对于我们的应用程序，模型层需要一个存储来自传入请求的客户端信息的请求上下文对象。

```
case class ClientContext(clientName: String) 

object ClientContext {
  def apply(request: Request) = {
    new ClientContext(request.params("clientName")) //pseudo code
  }
} 
```

我的模型

```
object MyDAO {
  def findAll(context: ClientContext) = { ... }
} 
```

然后在我们的控制器中，我们需要将它传递给模型的 dao 方法：

```
object MyController extends Controller {
  def index = Action { implicit request => 
    val results = MyDAO.findAll(ClientContext(request))
    Ok(results)
  }
} 
```

由类`implicit request`提供`Action`（我想）这种方法的问题是我需要为调用 MyDAO.findAll 的每个控制器操作编写`implicit request =>`和。`ClientContext(request)`

有没有办法通过 Action 包装器和隐式值来改进代码？我希望能够`context: ClientContext`在方法中声明为隐式参数`MyDAO.findAll`并按以下方式编写我的操作：

```
object MyDAO {
  def findAll(implicit context: ClientContext) = { ... }
}

def index = ActionWithContext {
  val results = MyDAO.findAll
  Ok(results)
} 
```

是否可以编写一个 ActionWithContext （具有应用方法的方法或对象）来实现这一点？我现在最接近的是以下

```
def ActionWithContext(action: ClientContext => Result) = {
  Action { implicit request =>
    action(ClientContext(request))
  }
} 
```

用法

```
def index = ActionWithContext { context => 
  val results = MyDAO.findAll(context)
  Ok(results)
} 
```

任何改进此设计的建议都会有所帮助。谢谢！

PS：老实说，如果这是在 Java 上，我什至不会考虑进一步简化代码，但由于它是 scala，我认为这可能是学习一些 scala 模式的好机会。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T19:18:56.163

我已经使用隐式实现了类似的东西：

我打电话给我`Header`而不是，`Context`但我们都在完成同样的事情。

我所有的控制器都混合了这个`Header`特征：

```
object Accounts extends AuthController with Header { ... } 
```

我的`Header`特质看起来像这样：

```
trait Header {
    implicit def withUserInfo(implicit maybeUser: Option[User]): UserInfo = {
        // create user info object
    }
} 
```

然后我可以像这样编写我的控制器操作：

```
def index = MaybeAuthenticated { implicit maybeUser => implicit request =>
    // do stuff
    val foo = new Foo()
    Ok(views.html.accounts.index(foo))
} 
```

模板具有如下方法签名的地方：

```
@(foo: Foo)(implicit userInfo: UserInfo) 
```

`MaybeAuthenticated`只是一个可选择恢复`User`对象的动作，它来自 play20-auth 模块。事实上，我在这里向您展示了两种可能性：

1.  将特征与带有隐式参数的隐式函数混合。
2.  编写自己的操作方法，例如`MaybeAuthenticated`

`MaybeAuthenticated`看起来像这样：

```
private def maybeAuthenticated(f: Option[Account] => Request[AnyContent] => Result): Action[AnyContent] = {
    Action(BodyParsers.parse.anyContent)(req => f(restoreUser(req))(req))
}

protected def MaybeAuthenticated = maybeAuthenticated _ 
```

我认为第一种方法更容易理解。

编辑：我认为有必要对隐式进行一些进一步的解释。

让我们考虑一下`implicit`上面使用的位置：

### 隐式 def withUserInfo（隐式可能用户：选项 [用户]）：用户信息

在混入的对象中`Header`，此方法将在范围内。编译器将搜索要求`UserInfo`对象在 a`Option[User]`已经在范围内的范围内的函数。编译器将*隐式*调用`withUserInfo`以提供缺少的`UserInfo`对象。

`UserInfo`请注意我的模板所需的隐式对象。当我调用这个模板函数（`Ok(...)`调用）时，编译器必须填写隐式`UserInfo`对象。它将通过调用`withUserInfo`和传递范围内的隐式来实现`maybeUser`。

希望澄清一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T22:35:27.383

感谢 Ryan 的建议，这里是另一个解决方案在 ClientContext 对象中使 apply 方法也是一个隐式转换，它接受一个隐式参数

```
object ClientContext {
  implicit def apply(implicit request: Request) = {
    new ClientContext(request.params("clientName")) //pseudo code
  }
} 
```

然后在控制器中你可以写

```
def index = Action { implicit request => 
  val results = MyDAO.findAll
  Ok(results)
} 
```

我不确定是否有办法摆脱它，`implicit request`但现在这对我来说非常简洁。

# gwt - 多个 GWT-RPC 调用的最佳实践

> ID：15578048
> 
> 赞同：1
> 
> 时间：2013-03-22T19:05:29.373
> 
> 标签：gwt, gwt-rpc

我必须进行几次 GWT-RPC 调用。我想像这样异步启动它们。

```
service.s1(param1, callback1);
service.s2(param2, callback2);
service.s3(param3, callback3); 
```

我不确定如何“同步”三个回调。下一个动作，例如调用方法nextMethod()；应在三个回调完成后完成。是否有“最佳实践”如何做到这一点？

我想建立一个像这样的小服务类

```
public class ServiceSync
{ private boolean[] callReady;

  public ServiceSync(int n)
  { callReady = new boolean[n];
    for(int i=0; i<n;i++)
    {  callReady[i]=false;
    }
  }

  public boolean setReady(int i)
  { callReady[i]=true;
    for(boolean b : callReady)
    { if (!b) return false;    
    }
    return true;
  }
} 
```

在回调中我会说

```
if (serviceSync.setReady(myId))
{ nextMethod();} 
```

但我不确定，如果这是个好主意。特别是我不确定是否会出现问题，如果 2 个回调“同时”调用此服务类

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T23:05:17.953

看来这是可以用[Promises](http://en.wikipedia.org/wiki/Promise_%28programming%29)解决的典型案例。

遵循 DRY 的原则，我不会自己编写代码，而是使用[gwtquery Promises](https://code.google.com/p/gwtquery/wiki/Promises)解决方案，它是为 gwt 编写的，基于流行的 jQuery Deferred 实现。

在您的情况下，您的代码可能如下所示：

```
 // Create 3 promises to be used in RPC
    PromiseRPC<String> promise1 = new PromiseRPC<String>();
    PromiseRPC<String> promise2 = new PromiseRPC<String>();
    PromiseRPC<String> promise3 = new PromiseRPC<String>();

    // Fire the asynchronous requests
    greetingService.greetServer(textToServer1, promise1);
    greetingService.greetServer(textToServer2, promise2);
    greetingService.greetServer(textToServer3, promise3);

    GQuery
          // 'when' returns a new promise which monitors all of its subordinates
          .when(promise1, promise2, promise3)
          // 'done' will be executed only in the case all promises succeed
          .done(new Function() {
            public void f() {
              // each promise store its result in a fixed position of the argument list
              String textFromServer1 = arguments(0, 0);
              String textFromServer2 = arguments(1, 0);
              String textFromServer3 = arguments(2, 0);
            }
          });

    // If you want you could fire requests here instead than above 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T19:57:36.297

为您的回调声明一个带有状态的接收器，例如：

```
public class CallResultReceiver {

   boolean call1Done, call2Done, call3Done;

   public void onCall1Success() { 
      call1Done = true;
      if (call1Done && call2Done && call3Done) { doGreatThings(); }
   }

   public void onCall2Success() { 
      call2Done = true;
      if (call1Done && call2Done && call3Done) { doGreatThings(); }
   }

   public void onCall3Success() { 
      call3Done = true;
      if (call1Done && call2Done && call3Done) { doGreatThings(); }
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T07:28:26.850

他是一篇关于[GWT 中并行异步调用的最佳文章](http://www.summa-tech.com/blog/2010/11/29/parallel-asynchronous-calls-in-gwt/.)

通过编写一个简单的 ParentCallBack，您可以使您的事情变得简单高效。

```
public void someGwtClientSideMethod() {   
  SomeServiceAsync someService = GWT.create(SomeService.class);  
  ParallelCallback fooCallback = new ParallelCallback();  
  ParallelCallback barCallback = new ParallelCallback();  
  ParentCallback parent = new ParentCallback(fooCallback, barCallback) {   
    public void handleSuccess() {  
      doSomething(getCallbackData(0), getCallbackData(1));  
    }  
  };  
  someService.foo(fooCallback);  
  someService.bar(barCallback);  
} 
```

这是[父回调的代码](http://www.bennorthrop.com/code/gwt-parallel-async/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-26T13:29:29.487

这是我提出问题的方法：

首先，我们需要某种 SynchronizedCounter 来在我们的并行异步问题中使用：

```
public class SynchronizedCounter {

    private int c = 0;

    public synchronized void increment() {
        c++;
    }

    public synchronized void decrement() {
        c--;
    }

    public synchronized int value() {
        return c;
    }
} 
```

下一步是调用 RPC 方法，例如：

```
private void fetchData() {
    getFirst();
    getSecond();
    getThird();
    getFourth();
} 
```

每个 RPC 方法都必须在请求之前增加我们的计数器，并在调用成功后立即减少它。每个 RPC 方法都会在 RPC 调用之后调用 final 方法，它会检查请求的计数，例如：

```
private void dataFetched() {
    if (counter.value() <= 0)
        // proceed
} 
```

IMO 非常清晰和优雅的方法。希望能帮助到你。

# postgresql - PostgreSQL 范围类型中的 NULL 与 `infinity`

> ID：15578050
> 
> 赞同：7
> 
> 时间：2013-03-22T19:05:31.247
> 
> 标签：postgresql, null, range, postgresql-9.2, infinity

PostgreSQL 范围类型中的“无穷大”是什么意思？`infinity`将or指定`-infinity`为界限或之间有什么区别`NULL`吗？即是`infinity`指定范围界限是无限的显式形式，而`NULL`隐式指定无限界限范围？

请参阅以下示例：

```
SELECT tstzrange('-infinity','infinity') && tstzrange(NULL, NULL);
 ?column?
----------
 t

SELECT tstzrange('2013-01-01 00:00:00+01', '2013-02-01 00:00:00+01')
    && tstzrange(NULL, '2013-03-01 00:00:00+01');
 ?column?
----------
 t

SELECT tstzrange('2013-01-01 00:00:00+01', '2013-02-01 00:00:00+01')
    && tstzrange('-infinity', '2013-03-01 00:00:00+01');
 ?column?
----------
 t 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-22T20:20:38.083

**更新**：稍后见，更好的解释：

*   [当范围类型中的 NULL 边界在功能上等效时，为什么 PostgreSQL 认为它们与无限边界不同？](https://stackoverflow.com/questions/67610158/why-does-postgresql-consider-null-boundaries-in-range-types-to-be-distinct-from/67612325#67612325)

* * *

`NULL`[分别对重叠运算符**`&&`**](https://www.postgresql.org/docs/current/functions-range.html)做同样的事情`-infinity`或`infinity`。我在这里引用[手册](http://www.postgresql.org/docs/current/rangetypes.html#RANGETYPES-CONSTRUCT)：

> 对任一边界使用 NULL 会导致该边的范围无界。

但作为*价值*，`NULL`还是有区别的`'infinity'`！

```
SELECT tstzrange('-infinity','infinity') = tstzrange(NULL, NULL); 
```

返回`FALSE`（不是`NULL`，请注意！）。

更多在这个[**SQLfiddle**](http://www.sqlfiddle.com/#!17/9eecb/74859)中。

# iphone - 如何处理 iPhone 应用程序中的 NSError？

> ID：15578051
> 
> 赞同：0
> 
> 时间：2013-03-22T19:05:40.963
> 
> 标签：iphone, ios, objective-c, nserror, nsexception

ios开发中是否有处理NSError的好方法？我正在浏览一些在线参考资料，我发现它们中的大多数都是`[NSApp presentError]`用来呈现错误的？

这在 ios 中绝对不可能，因为在 ios 领域中没有任何称为 NSApp 的东西。

我想知道除了打印什么之外应该如何处理 NSErrors

错误确实在使用`[error localizedDescription]`

是否应该访问 NSError 类的错误代码属性并处理所有可能的

使用 else if/ladder 在特定情况下可能会出现的错误代码？

**如果能解释 NSError 和

异常？为什么我们首先有两个单独的东西**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T20:22:45.163

NSError 是一个返回码，您尝试在其中做某事，但您尝试的操作无效。例如，您试图打开一个文件，但它不存在。NSError 表示错误情况，在不同的情况下使用相同的调用，您可能不会收到错误（文件在那里）。一个 NSException 表示一些致命的坏事。您尝试写入 null，您尝试写入字符串或数组的末尾。NSExceptions 应该由您清理，程序员，NSErrors 可能只是偶然错误。
你用 NSError 做什么取决于上下文。有时您想通过警报通知用户，有时您想忽略它（例如在编写新资源之前测试不存在的资源）。可能至少，您想要 NSLog 您的 NSErrors（假设您使用宏从最终代码中删除 NSLogs）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T19:09:44.907

无论您对 NSErrors 做什么取决于您的特定应用程序，只需使用常识即可。

与 Java 等其他语言不同，Objective-C 中的异常是资源密集型的。所以，

*   使用异常来指示不可恢复的程序错误。捕捉到这种异常的程序应该很快就会退出。框架并非旨在让您从异常中恢复。

*   不要使用异常来指示用户错误、可恢复错误或一般流控制。这些情况应该用 NSError 来处理。

# ruby-on-rails - 如何在自定义生成器中销毁文件夹

> ID：15578053
> 
> 赞同：2
> 
> 时间：2013-03-22T19:05:42.580
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1, thor

通过使用 Thor 在 Rails 中创建自己的生成器，我遇到了一个有点愚蠢的问题。

事实证明，当您运行生成器并在您的代码库中创建文件时，它是自动的，假设

```
rails generate ab_tester test1
create  app/assets/javascripts/ab_test1
create  app/assets/javascripts/ab_test1/one_file.js 
```

假设 Thor 足够聪明，可以在我们调用时知道逆向方式`destroy`

```
rails destroy ab_tester test1
remove  app/assets/javascripts/ab_test1/one_file.js 
```

但正如您所见，为包含该文件而生成的文件夹并未被删除。我了解这是一种预期行为，因为您可能希望保留稍后创建的其他文件或其他文件。

问题是：我如何在打电话时要求/强制雷神删除文件夹`destroy`？

预先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-02T10:18:14.723

为什么不使用 Ruby 方式？

```
Dir.delete(directory) 
```

[http://www.ruby-doc.org/core-2.0.0/Dir.html#method-c-delete](http://www.ruby-doc.org/core-2.0.0/Dir.html#method-c-delete)

希望这可以帮助

# iphone - 全屏视频后iOS状态栏保持横向

> ID：15578058
> 
> 赞同：1
> 
> 时间：2013-03-22T19:06:12.940
> 
> 标签：iphone, orientation, landscape, statusbar, portrait

我有一个只有肖像的应用程序，但在一个视图中我显示了一个视频。那个视频是

全屏显示为模态视图控制器。

一旦用户开始播放视频，这个视图可以旋转到横向。我已经配置当用户点击“完成”按钮时，视图被关闭，但状态栏保持在横向模式。

我试图在 viewcontroller 的 viewWillAppear 上添加 setStatusBarOrientation

显示模态视图并且不起作用。

唯一有效的是，如果我使用：

```
[[UIDevice currentDevice] setOrientation:UIInterfaceOrientationLandscapeRight]; 
```

但我听说如果你使用它，Apple 可能会拒绝该应用程序。

要查看类似问题，请在[全屏播放视频后检查 iOS 状态栏方向上的图像](https://stackoverflow.com/questions/15426083/ios-status-bar-orientation-after-play-video-fullscreen)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T23:53:43.987

好的，我想通了。

我向视图控制器添加了一个按钮，该按钮与我的视频一起显示为模态视图，该按钮触发以下操作：

```
[[UIApplication sharedApplication] setStatusBarOrientation:UIDeviceOrientationPortrait animated:NO];
[[UIApplication sharedApplication] setStatusBarHidden:NO];
[self dismissModalViewControllerAnimated:YES]; 
```

当按钮被触发时，状态栏被强制为纵向，应用程序恢复正常状态。我在全屏时删除了“完成”按钮的操作。

希望这可以帮助某人

# javascript - 根据内容高度附加内容

> ID：15578063
> 
> 赞同：0
> 
> 时间：2013-03-22T19:06:23.673
> 
> 标签：javascript, jquery, if-statement, append, each

所以我知道我这样做是错误的，但我被困住了，所以我想你们可以帮助我。所以我的想法是我有两个容器。一种仅用于小于某个高度的内容，一种用于大于某个高度的内容。所以这里是一个代码的基本草图，它不能给你一个基本的想法：

```
$('#content').each(function(){
if($(this).height()>120){
    $('#container2').append('the content');
};
else{
    $('#container').append('the content');
};
}); 
```

这是一个 jsfiddle，它显示了结果应该是什么样的：http: [//jsfiddle.net/3TxR9/1/](http://jsfiddle.net/3TxR9/1/)

编辑 1： id 内容包含了大量不同的内容，这就是为什么我想要不同高度的不同容器。因此，“内容”将是 id 内容中的特定内容，这样每条内容都会被评估，因此它会进入正确的容器。我链接的 jsfiddle 不是正确的编码，它只是为了显示应用正确的 jquery 时会发生什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:14:11.203

我认为你只是让自己变得比你需要的更难，因为[jQuery 中的 .height()](http://api.jquery.com/height/)会给你计算出你想要的任何元素的高度。

然后，当您处理您的项目时，您可以在要排序的元素上使用 .height() ，如果大于某个高度，则将其附加到一个框，否则将其附加到另一个框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T19:27:29.983

```
$(document).ready(function(){
    $(".content").each(function(){
        if($(this).height() > 100)
        {
            $(this).appendTo("#container");
            $(this).show();
        } else {
            $(this).appendTo("#container2");
            $(this).show();
        }
    });
}); 
```

演示：http: [//jsfiddle.net/calder12/3TxR9/4/](http://jsfiddle.net/calder12/3TxR9/4/)

# textbox - Windows Phone 8 - 可滚动的文本框

> ID：15578064
> 
> 赞同：2
> 
> 时间：2013-03-22T19:06:25.180
> 
> 标签：textbox, windows-phone-8, scrollview, windows-phone

我有一个问题，用户可以输入文本，只要他想，但如果 TextBox 的可视部分已满，它不会自动滚动到新行。

```
 <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,12">
        <ListBox>
            <ListBoxItem HorizontalContentAlignment="Stretch">
                <toolkit:PhoneTextBox x:Name="PinNameTextBox" Hint="{Binding Path=LocalizedResources.Untitled, Source={StaticResource LocalizedStrings}}" Text="{Binding Name, Mode=TwoWay}" />
            </ListBoxItem>
            <ListBoxItem HorizontalContentAlignment="Stretch">
                <TextBox x:Name="PinContentTextBox" Text="{Binding Text, Mode=TwoWay}" AcceptsReturn="True" TextWrapping="Wrap" InputScope="Text" />
            </ListBoxItem>
        </ListBox>
    </Grid> 
```

我也尝试过 ScrollViewer，但它不起作用。

![在此处输入图像描述](../Images/7e778c19561febe26faa2548800dcb80.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T23:22:24.880

我认为这已经与 WP7 相同。据我所知，这是一个平台限制，如果超过 2048 像素，则会导致 UIElement（例如 TextBox）被剪裁。

[不过，您可以尝试使用与此处](http://blogs.msdn.com/b/priozersk/archive/2010/09/08/creating-scrollable-textblock-for-wp7.aspx)所做的类似的方法创建自己的 TextBox 控件 。希望有帮助。

# console - windows下FORTRAN控制台写入二进制格式

> ID：15578067
> 
> 赞同：0
> 
> 时间：2013-03-22T19:06:29.720
> 
> 标签：console, binary, fortran, fortran90, fortran77

我试图在 Windows 下的 FORTRAN 控制台上以二进制格式写入，但我做不到。我知道我可以使用 Open() 函数并使用 Form='Unformatted' 打开文件并以二进制格式写入。但我需要在控制台上写而不是外部文件。

我的项目是使用管道机制在 FORTRAN 和 C++ 程序之间进行通信。通信的一部分是发送大量的双精度数字。现在我正在发送实际数字。如果我可以将它们以二进制格式发送，它将加快处理速度。

有没有办法在 FORTRAN 的控制台上以二进制格式写入？我试图通过 char() 函数对数字进行类型转换，但它仅适用于整数而不是双倍！

任何帮助将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:23:18.787

如果是 F77，试试这样的

```
 program writer
      double precision x
      character(len=8) xalt
      equivalence(x,xalt)
      x = 10.0
      do i = 1, 10, 1
         x = -10.0 * x
         write(*,'(A)', advance='no') xalt
      end do
      stop
      end 
```

如果您想在没有等价的情况下将其用于 F90，则必须使用传递函数从双精度（或实 * 8 或实 * 2，具体取决于实现）转换为字符。

我真的不知道您的数据流有多大，但如果您正在写入控制台，操作系统可能会坚持在 X 字符后插入 CR/LF。这可能会完全弄乱您的输入流。有没有想过使用 MPI 或套接字或管道来执行此操作？

# wix - WiX 属性 RefProjectOutputGroups RefTargetDir

> ID：15578069
> 
> 赞同：12
> 
> 时间：2013-03-22T19:06:37.070
> 
> 标签：wix, msbuild-projectreference

在 WiX 项目 (*.wixproj) 中引用项目时，我经常看到代码片段

```
<ItemGroup>
  <ProjectReference Include="..\Foo.Bar\Foo.Bar.csproj">
    <Name>Foo.Bar</Name>
    <Project>{0bd367ce-5072-4161-8447-ff4deed97bd4}</Project>
    <Private>True</Private>
    <DoNotHarvest>True</DoNotHarvest>
    <RefProjectOutputGroups>Binaries;Content;Satellites</RefProjectOutputGroups>
    <RefTargetDir>INSTALLLOCATION</RefTargetDir>
  </ProjectReference>
</ItemGroup> 
```

任何人都可以向我解释属性`DoNotHarvest`,`RefProjectOutputGroups`和`RefTargetDir`含义是什么吗？或者指向一些文档？我找不到任何解释这些属性含义的东西（包括 WiX 文档）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-22T19:37:13.777

这些是自动参考项目收获的禁用功能。该功能被禁用，因为它被发现有很多错误。

*   当您更改`DoNotHarvest`为`false`（双重否定很有趣）时，该功能将重新打开（但其他事情会被破坏）。
*   `RefProjectOutputGroups`列出引用项目的项目输出以包含在生成的`ComponentGroup`.
*   `RefTargetDir`指定`Directory`用于所有生成的`Components`.

如上所述，它没有记录，因为该功能当前不起作用。

# java - 使用详细的类加载运行 Gradle？

> ID：15578072
> 
> 赞同：5
> 
> 时间：2013-03-22T19:06:59.683
> 
> 标签：java, classloader, gradle

我的构建脚本遇到错误（如下）。有没有办法以与调用 Java 相同类型的输出来运行 Gradle `-verbose:class`？

有问题的错误，如果有人有一些输入：

```
Caused by: org.gradle.api.artifacts.ResolveException: Could not resolve all dependencies for configuration ':Project:compile'.
    at org.gradle.api.internal.artifacts.ivyservice.ErrorHandlingArtifactDependencyResolver.wrapException(ErrorHandlingArtifactDependencyResolver.java:49)
    ... more
Caused by: java.lang.LinkageError: loader constraints violated when linking org/apache/ivy/core/module/descriptor/DependencyDescriptor class 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T19:13:52.417

您可以设置以下环境变量，我相信...

```
GRADLE_OPTS="$GRADLE_OPTS -verbose:class" 
```

然后调用`gradle`. 阅读此[链接](http://java.dzone.com/articles/first-look-building-java)。

> 下载并解压 Gradle 后，可以将环境变量 GRADLE_HOME 设置为解压后的 Gradle 安装目录，并将 PATH 设置为 $GRADLE_HOME/bin 或 %GRADLE_HOME%\bin。Gradle 安装页面告诉我们，Gradle 使用的 JVM 选项可以通过 GRADLE_OPTS 或 JAVA_OPTS 设置。获取环境变量设置后，可以通过在命令行运行 gradle -v 来确认路径中的 Grade 安装和配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-23T13:49:35.253

请添加到您的 build.gradle 任务：jvmArgs '-verbose:class'。例如要运行 gradle 测试，我使用：

```
test{
    jvmArgs '-verbose:class'
} 
```

# php - RecursiveDirectoryIterator - 在路径中找到第一个字符串实例时发出信号

> ID：15578073
> 
> 赞同：0
> 
> 时间：2013-03-22T19:07:00.300
> 
> 标签：php, directory-structure

我正在使用 RecursiveDirectoryIterator()。我有一种情况，我想向我的程序发出信号，应该在目录层次结构中指定字符串的第一个实例上创建一个文件*。*我希望 RecursiveDirectoryIterator() 适合这个，但如果有另一个更有意义的选择，我也愿意接受。
有关我的问题的详细信息，请参见下文...谢谢。

代码：

```
$in_dir = 'none';
$path = '.';
$dir  = new RecursiveDirectoryIterator($path, RecursiveDirectoryIterator::SKIP_DOTS);
$files = new RecursiveIteratorIterator($dir, RecursiveIteratorIterator::SELF_FIRST);

foreach($files as $object){
  //if this is a directory... find out which one it is.
  if($object->isDir()){
    if(strpos($object->getPathname(), 'dir1') == true){
      //i need a file (file1.txt) created here, upon the first instance found
      $in_dir = 'dir1';
    }else if(strpos($object->getPathname(), 'dir2') == true){
      //i need a file (file2.txt) created here, upon the first instance found
      $in_dir = 'dir2';
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T19:26:57.973

您只需要记录您第一次访问该目录的时间...

```
$in_dir = 'none';
$path = '.';
$dir  = new RecursiveDirectoryIterator($path, RecursiveDirectoryIterator::SKIP_DOTS);
$files = new RecursiveIteratorIterator($dir, RecursiveIteratorIterator::SELF_FIRST);
// not seen yet
$foundDir1 = false;
$foundDir2 = false;

foreach($files as $object){
    //if this is a directory... find out which one it is.
    if($object->isDir()){
        if(strpos($object->getPathname(), 'dir1') == true){
            //i need a file (file1.txt) created here, upon the first instance found
            if (!$foundDir1) {
                // first time we've seen it, create file...

                // mark as found
                $foundDir1 = true;
            }
        }else if(strpos($object->getPathname(), 'dir2') == true){
            //i need a file (file2.txt) created here, upon the first instance found
            if (!$foundDir2) {
                // first time we've seen it, create file...

                // mark as found
                $foundDir2 = true;
            }
        }
    }
} 
```

# ffmpeg - 如何通过 udp 流式传输 .ts 文件不变

> ID：15578075
> 
> 赞同：2
> 
> 时间：2013-03-22T19:07:02.400
> 
> 标签：ffmpeg, udp, vlc, mpeg, transport-stream

我的计算机中有一个 .ts 文件，我想按原样通过 UDP 发送，每个 udp 消息中的标准 7 188 字节 mpeg 数据包。VLC 和 ffmpeg 可以通过 UDP 发送他们创建的 mpeg，但我不希望文件以任何方式重新混合或转码。tsreader 可以在最昂贵的版本中做到这一点。有没有可以做到这一点的windows工具？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-21T11:58:25.837

我相信 vlc 和 ffmpeg 都有复制输入编解码器参数的选项（例如，ffmpeg -codec copy 不应该重新混合）

但如果您想要更直接的东西，请选择 tstools：[http](http://tstools.berlios.de/) ://tstools.berlios.de/（“tsplay：通过 UDP（使用计时信息）或 TC 播放（并可能循环）PS/TS 文件” )

祝你好运。

# php - Android 应用程序到 WAMP 服务器连接

> ID：15578078
> 
> 赞同：0
> 
> 时间：2013-03-22T19:07:12.727
> 
> 标签：php, javascript, jquery, html, wamp

我有一个正在提交数据的 html 表单。数据通过 jquery post 提供给 php 文件。php 将值更改为 wamp 服务器上的 mysql 数据库。我已经通过phonegap将应用程序放在了android上。当我将应用程序下载到设备（通过 Eclipse）并尝试提交表单时，什么也没有发生。但是，如果我在 android 浏览器上运行相同的代码，代码就可以工作。

如何使代码像在浏览器上一样在应用程序上运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T21:37:28.537

一些东西。

1：确保您的应用程序具有互联网权限

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

2：确保您的 webview 启用了 javascript

```
WebView m_webview = (WebView)findViewById(R.id.webMain);
WebSettings webSettings = m_webview.getSettings();
webSettings.setJavaScriptEnabled(true); 
```

出于安全原因，默认情况下禁用 javascript。当您使用 jquery 发布时，这似乎是最有可能的。

# nginx - Js Css 和图像的 Nginx 403 错误

> ID：15578085
> 
> 赞同：0
> 
> 时间：2013-03-22T19:07:41.303
> 
> 标签：nginx

我正在尝试在服务器上安装 magento。这是我的 Vhost 文件。

```
server {
    listen 80;
    ## SSL directives might go here
    server_name development.magento.in ; ## Domain is here twice so server_name_in_redirect will favour the www
    root /var/www/devcode/;

    client_max_body_size 2M;

    location / {
            index index.html index.php; ## Allow a static html file to be shown first
            try_files $uri $uri/ @handler; ## If missing pass the URI to Magento's front handler
            expires 365d; ## Assume all files are cachable
    }

    if ($request_uri = /index.php) {
            rewrite ^ http://$host? permanent;
    }

    location /app/                { deny all; }
    location /includes/           { deny all; }
    location /lib/                { deny all; }
    location /media/downloadable/ { deny all; }
    location /pkginfo/            { deny all; }
    location /report/config.xml   { deny all; }
    location /shell/              { deny all; }
    location /downloader/         { deny all; }
    location /cron.php            { deny all; }

    location ~ .php/ { ## Forward paths like /js/index.php/x.js to relevant handler
       rewrite ^(.*.php)/ $1 last;
   }

    location  /. { ## Disable .htaccess and other hidden files
            return 404;
    }

    location @handler { ## Magento uses a common front handler
        rewrite / /index.php;
    }

    # serve static files directly

    location ~* ^.+\.(jpg|jpeg|gif|css|png|js|ico|html|txt)$ {
        # root /var/www/devcode/skin/; # I tried to added to this also but never worked
        access_log        off;
        expires           30d;
    }

location ~ \.php$
{
    fastcgi_pass 127.0.0.1:9000;
    fastcgi_index index.php;
    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    include fastcgi_params;
    fastcgi_read_timeout 300;
}

} 
```

所以通过这个配置 Nginx 显示**403 用于 Css 和 js 和 Images**。有趣的是，如果我删除它显示**404**的提供静态文件的部分。我已经尝试过 Stackoverflow 上的所有帖子。这是我的媒体和皮肤目录权限的样子

```
drwxr-xr-x. 23 nginx  nginx   4096 Mar 22 14:32     media
drwxr-xr-x.  5 nginx  nginx   4096 Mar 13 03:45     skin 
```

任何帮助或提示都将受到高度尊重！

* * *

**编辑**

我的新配置文件是这样的：

```
server {
    listen 80;
    ## SSL directives might go here
    server_name development.magento.in ; ## Domain is here twice so server_name_in_redirect will favour the www
    root /var/www/devcode/;

    index   index.html index.php; ## Allow a static html file to be shown first

    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;

    include        /etc/nginx/fastcgi_params;

    access_log /var/log/nginx/development.access.log ;
    error_log  /var/log/nginx/development.error.log ;

    client_max_body_size 2M;

    location / {
            try_files $uri $uri/  /index.php?$args;   #@handler; ## If missing pass the URI to Magento's front handler
            expires 365d; ## Assume all files are cachable
    }

    if ($request_uri = /index.php) {
            rewrite ^ http://$host? permanent;
    }

    location ^~ /(app|includes|lib|media/downloadable|pkginfo|var)/ { internal; }
    location /var/export/ { internal; }

    location ~ .php/ { ## Forward paths like /js/index.php/x.js to relevant handler
       rewrite ^(.*.php)/ $1 last;
    }

    location  /. { ## Disable .htaccess and other hidden files
            return 404;
    }

    # serve static files directly
    location ~* ^.+\.(jpg|jpeg|gif|css|png|js|ico|html|txt)$ {
        access_log        off;
        expires           30d;
    }

    location ~ \.php$
    {
        fastcgi_pass 127.0.0.1:9000;

        fastcgi_index index.php;
        fastcgi_param MAGE_RUN_CODE default;
        fastcgi_param MAGE_RUN_TYPE store;
        fastcgi_read_timeout 300;
    }

 } 
```

现在我以前的问题是固定的。但现在我无法让我的网站运行。我检查了它说的 access.log`HTTP 200 OK`但 index.php 没有收到任何请求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T21:10:39.553

您可以简单地对静态文件使用[别名指令：](http://wiki.nginx.org/HttpCoreModule#alias)

```
location /skin {
    alias /var/www/devcode/skin;
    access_log        off;
    expires           30d;
} 
```

或更明确地

```
location /skin/ {
    alias /var/www/devcode/skin/;
    access_log        off;
    expires           30d;
} 
```

（请参阅末尾的正斜杠差异..）

好吧，您实际上也可以使用[根](http://wiki.nginx.org/HttpCoreModule#root)指令来做到这一点，但是最后一个正斜杠太多了。`alias`查看和之间`root` [的](http://forum.nginx.org/read.php?2,129656,130107#msg-130107)区别。我仍然建议使用`alias`，而不是`root`因为它有明显的理由提供静态服务并且仅在`location`级别上支持。

**不管我的回答如何**，我会说这个配置看起来像是来自 apache 重写逻辑，而不是一个真正优化的 nginx 风格。您可能希望将您的静态内容分开，如上所示，放在不同的子文件夹中。那么您可能还想知道为什么[If is Evil](http://wiki.nginx.org/IfIsEvil)。`@handler`您可以[尝试文件](http://wiki.nginx.org/NginxHttpCoreModule#try_files)，而不是重写：

```
location @handler { ## Magento uses a common front handler
    try_files       $uri $uri/ /index.php?$args;
} 
```

对于 s，我想不出一个更聪明的主意`deny all`。但是，我会将`public`文件夹中的 php 和静态内容分开并将其定义为 a `root`，首先将这些`deny`s 排除在外。请注意，如果其中一些建议与您的特定需求相冲突，它们可能听起来毫无意义。

# regex - TCL 中的正则表达式在最后一个匹配字符之前解析出字符串

> ID：15578088
> 
> 赞同：1
> 
> 时间：2013-03-22T19:07:56.550
> 
> 标签：regex, tcl

在 TCL 脚本中，我有一个带有字符串值的对象，例如：

```
ab_cde_12-3_xyz
def_5&6_hjk
zzz_1@234 
```

我需要在（但不包括）最后一个“_”之前提取子字符串。

我努力了 ：

```
regexp -all -inline {(.*)(?=_)} $my_string 
```

但它提供了我不需要的额外垃圾。

有没有更清洁的方法来做到这一点？

谢谢，格特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T20:02:49.067

好的，有3种方法可以做到这一点：

*   匹配所有内容，直到`_`没有其他内容`_`：

    ```
    regexp {^(.*)_[^_]*$} $my_string -> data 
    ```

*   用空字符串替换最后一部分：

    ```
    regsub {_[^_]*$} $my_string {} 
    ```

*   获取字符串的子字符串直到最后一个`_`

    ```
    string range $my_string 0 [string last _ $my_string]-1 
    ```

    这仅在字符串具有 时才有效`_`，否则我建议

    ```
    expr {[set pos [string last _ $my_string]] != -1
          ? [string range $my_string 0 ${pos}-1]
          : $my_string} 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T19:10:58.663

利用：

```
(.*)_[^_]*$ 
```

这是“直到 a`_`后跟零个或多个非`_`字符后跟字符串结尾的所有内容”。这确保它是*最后一个*下划线。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T23:18:50.260

您实际上不需要正则表达式：列表操作会很好：

```
set new [join [lrange [split $my_string _] 0 end-1] _] 
```

# linux - 550 views.py：权限被拒绝

> ID：15578091
> 
> 赞同：2
> 
> 时间：2013-03-22T19:08:17.730
> 
> 标签：linux, django, ftp

我对 Django 项目中的权限有疑问。我通过 SSH 创建项目，一切正常。但是当我尝试使用 FTP 编辑文件时，filezilla 给了我这个错误：

```
550 views.py: Permission denied 
```

我试过这个但不起作用：

```
chmod -R g+w testproject/
chgrp -R www-data testproject/ 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T20:26:53.477

如果您无法更改权限或编辑文件，那么可能是 SSH 用户没有正确的写入权限，或者我应该说 filezilla 没有。检查文件的所有者/组部分以查看谁拥有它。

您需要在服务器上的 FileZilla 服务器界面中定义 FTP 用户。

作为测试 Linux 的快速修复`sudo chmod -R 777 FILENAME`

另一件事是这个阿帕奇？它只是ssh吗？检查你的主机...

```
<Directory /*>
    AllowOverwrite on
</Directory> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T21:58:34.457

感谢您的回答。我试过`sudo chmod -R 777 FILENAME`了，它有效。但我发现了一些其他的东西也有效并且更安全。

```
chown ftpuser testproject/ -R 
```

希望它可以帮助其他有同样问题的人。

# jquery - Highcharts - 增加一个类名，以便饼图切片可以在 style.css 中具有独特的样式

> ID：15578092
> 
> 赞同：0
> 
> 时间：2013-03-22T19:08:23.740
> 
> 标签：jquery, highcharts

我正在创建一个 HighCharts 饼图，并希望对每个切片进行更精细的样式控制——我希望浅色切片具有深色 dataLabels，反之亦然。

所以，我希望能够使用我的 style.css 文件来设置切片的样式。我在 dataLabels 设置中插入了一个类名（切片），加上一个自定义函数来循环遍历我的所有切片并为它们提供唯一的类：

```
function colorSlices(chart) {
                var count = 1;
                $(".slice").each(function(){
                    $(this).addClass("slice-"+count);
                    count++;
                });
};

var chart;
    $(document).ready(function() {

        // Build the chart
        chart = new Highcharts.Chart({
            credits: { enabled: false },
            chart: {
                renderTo: 'container',
                exporting: { enabled: false },                
                events: {
                    redraw: function(event) {
                        colorSlices();
                    }
                },
                plotBackgroundColor: null,
                plotBorderWidth: null,
                plotShadow: false,
                shadow: true
                    },
            tooltip: {
                pointFormat: '',
                percentageDecimals: 1
            },
            legend: {
            useHTML: true,
            align: 'right',
            verticalAlign: 'middle',
            itemWidth: 260,
            borderColor: '#fff',
            width: 260,
            labelFormatter: function() {
                return '<div class="legend-item">' + this.name +'</div>';
                }
            },
            title: {
                text: ""
            },
            plotOptions: {
                pie: {
                    allowPointSelect: true,
                    size:'100%',
                    cursor: 'pointer',
                    showInLegend: true,
                    shadow: true,
                    dataLabels: {
                        enabled: true,
                        distance: -40,
                        useHTML: true,
                        style: {
                                width: '100px'
                                },
                        color: '#fff',
                        connectorColor: '#000000',
                        formatter: function() {
                            return '<span class="slice">' + Highcharts.numberFormat(this.percentage,1,".",",") +' %</span>';
                        }
                    }
                }
            },
            series: [{
                type: 'pie',
                 name: 'Income Investments',
                data: [
                    ['Other Industries',     19.3],
                    ['Media',   16.0],                                   
                    ['Materials',   13.6],
                    ['Software & Services', 10.2],
                    ['Retailing',    7.9],
                    ['Capital Goods',     6.5],
                    ['Healthcare Equipment & Services',     6.0],
                    ['Insurance',     5.7],
                    ['Technology Hardware & Equipment',     5.4],
                    ['Consumer Services',     4.8],
                    ['Telecommunication Services',     4.7]                    
                ]
            }],

        colors: [
                    '#132f55',
                    '#4d6d8a',
                    '#7f95aa',
                    '#b2bfcb',
                    '#d1dae2',
                    '#e5eaef',
                    '#7f7f7f',
                    '#9e9e9e',
                    '#c9c9c9',
                    '#bcbdc0',
                    '#eeefef'
                      ]
});

    }) 
```

我最终希望我的饼图中的每个切片都有增量类，例如： - slice-1 - slice-2 - slice-3

我有点让这个工作，但只有当图表调整大小时。我试图在加载事件中触发我的自定义函数，但没有任何反应。

我的小提琴：http: [//jsfiddle.net/6PbbR/262/](http://jsfiddle.net/6PbbR/262/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T06:17:00.170

将 colorSlices() 设置为加载函数对我来说效果很好。

[http://jsfiddle.net/6PbbR/274/](http://jsfiddle.net/6PbbR/274/)

```
events: {
    redraw: function(event) {
        colorSlices();
    },
    load: colorSlices
} 
```

您还可以在格式化程序中使用 this.point.x 来分配类。我相信这将完成同样的事情并减轻对事件的需求。

[http://jsfiddle.net/6PbbR/280/](http://jsfiddle.net/6PbbR/280/)

```
dataLabels: {
    formatter: function() {
        return '<span class="slice slice-'+(this.point.x+1)+'">' + 
        Highcharts.numberFormat(this.percentage,1,".",",") +' %</span>';
    }
} 
```

# linux - 为什么后缀为php的文件无法访问？

> ID：15578096
> 
> 赞同：0
> 
> 时间：2013-03-22T19:08:29.747
> 
> 标签：linux, http-status-code-403

在我的主机中，我创建了一个子文件夹（测试），然后将 test.php index.php 放入其中。当我访问 example.com/test example.com/test/test.php example.com/test/index.php 这一切都显示

```
403 Forbidden

Access to this resource on the server is denied!
Powered By LiteSpeed Web Server
LiteSpeed Technologies is not responsible for administration and contents of this web site! 
```

当我创建一个`.htaccess`文件并将其放入测试文件夹时。文件（.htaccess）为空。

```
example.com/test   example.com/test/test.php example.com/test/index.php, 
```

但是现在example.com/test这个url可以访问了，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:15:44.960

您是否有权访问上述文件？只是说，最好将 index.php 保留在项目的根目录中而不是子目录中。

# matlab - Matlab parfor循环索引

> ID：15578100
> 
> 赞同：9
> 
> 时间：2013-03-22T19:08:43.927
> 
> 标签：matlab, parfor

有人知道在 matlab 中使用 parfor 的这个简单代码中发生了什么吗？谢谢，

我将一个矩阵切成四个数组，并希望独立更新每个数组中的元素

这是一个简单的版本：

```
a = zeros(4,4);  
parfor i = 1:4  
    j = 2;      
    a(j,i) = 3;  
end 
```

错误：“a”的有效索引在 parfor 循环中受到限制；

然而，

这有效：

```
a = zeros(4,4);  
parfor i = 1:4  
    a(2,i) = 3;  
end 
```

另一个具有相同错误的更简单的非工作版本：

```
a = zeros(4,4);  
parfor i = 1:4  
    a(i,i) = 3;  
end 
```

在我的应用程序中，索引 j 是通过某种算法为每个数组独立生成的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-23T19:34:35.417

只是我的两分钱：正如@mmumbos 已经解释的那样，您试图实现的目标不可能通过这种方式实现，但某些解决方法仍然适用。

假设您需要实现以下内容（这是矩阵的线性变换的排列`A`）：

```
n=10;
A=rand(n,n);
B=zeros(n,n);
parfor i=1:n,
  j=(i<=5)*(2*(i-1)+1)+(i>5)*(2*(i-5));
  B(j,i) = my_function(A(i,:));
end 
```

请尝试以下操作：

```
parfor i=1:n,
  B_temp(i,:) = my_function(A(i,:));
end 
```

然后，你真的不需要构造 matrix `B`；您可以使用`B_temp`“索引表”来访问它，该索引表的构造如下：

```
J=zeros(n,1);
parfor i=1:n,
  J(i) = (i<=5)*(2*(i-1)+1)+(i>5)*(2*(i-5));
end 
```

然后`B(i)`通过`B_temp(J(i))`.

重温您的上一个（反）示例，让我们看看如何解决它：

```
n=4;
diag_A = zeros(n,1);
parfor i=1:n,
    diag_A(i)=3; % or any function of i
end 
```

然后，每当您需要访问 的第 ''i'' 个对角元素时`A`，您都可以访问`diag_A(i)`. 对于这种情况，按照以下几行创建一个函数很方便：

```
function a = access_matrix(A, diag_A, i, j)
  if (i!=j), 
    a = A(i,j);
  else
    a = diag_A(i);
  end
end 
```

在 MATLAB 改进`parfor`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T14:50:01.597

你想要达到的目标似乎是不可能的。

根据 matlab 文档：

> 当您使用其他变量以及循环变量来索引数组时，您不能在循环内设置这些变量。实际上，这些变量在整个 parfor 语句的执行过程中是恒定的。您不能将循环变量与自身组合以形成索引表达式。

[MATLAB 文档源](http://www.mathworks.fr/fr/help/distcomp/advanced-topics.html)

因此，除了循环变量之外，用于索引数组的所有变量都必须在整个循环中保持不变。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-21T20:25:34.520

由于尚未提及，这里有一个对诊断这些类型的问题非常有帮助的链接：[Parfor 中的变量分类](http://www.mathworks.com/help/distcomp/classification-of-variables-in-parfor-loops.html?refresh=true)。当 MATLAB 无法将变量分类为它在该页面上概述的严格定义时，就会出现这些问题。

这里发生的是它不知道如何在循环之前对“切片变量” A 进行切片。考虑自己编程并行实现。您想要做的是将 A 切成您知道其他处理器不会接触的偶数部分，然后将它们分配给不同的 CPU 以独立运行。MATLAB 会查看您的循环，但不知道如何执行此操作，因为它在运行程序之前不知道 j 是什么。这是 MATLAB 的限制。如果您使用像 A(i*j,:) 这样的复数系数，也会发生同样的事情。再一次，它不知道如何拆分它。

# java - 使用Gson解析不同字段的子类

> ID：15578106
> 
> 赞同：4
> 
> 时间：2013-03-22T19:09:09.240
> 
> 标签：java, android, json, gson

我正在解析具有类似于以下响应模板的数据：

```
{
  response: {
    data: {}
  }
  meta: {
    errors: []
    success: 1
  }
} 
```

对于每个特定响应，“数据”字段填充有动态字段，但所有其他键（元等）保持不变。例如：

A类

```
data: {
  foo: ""
} 
```

B类

```
data: {
  bar: 3
} 
```

如何为我的类建模并使用 Gson 来表示这些数据？目前我有：

```
public class BaseResponse {
  @SerializedName("meta") public Meta meta;

  public class Meta {
    @SerializedName("errors") public ArrayList<Error> errors;
    @SerializedName("success") public int success;
  }
}

public class ClassA extends BaseResponse {
  @SerializedName("foo") public String foo;
}

public class ClassB extends BaseResponse {
  @SerializedName("bar") public int bar;
} 
```

不幸的是， foo 和 bar 字段在解析时返回空值，使用例如：

```
Gson.fromJson(jsonString, ClassA.class); 
```

我相信这是由于“foo”和“bar”字段是内部引用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-23T23:47:03.127

据我了解这个问题，自定义处理对于提供所需的多态反序列化是必要的，其中使用哪种类型的决定取决于特定 JSON 元素名称的存在。（由于 JSON 不包含类型信息，切换到另一个序列化 API，如[Jackson](http://jackson.codehaus.org)，不会提供更简单的解决方案。）

以下演示了我可能会采用的方法。

```
package com.stackoverflow.q15578106;

import java.lang.reflect.Type;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import com.google.gson.Gson;
import com.google.gson.GsonBuilder;
import com.google.gson.JsonDeserializationContext;
import com.google.gson.JsonDeserializer;
import com.google.gson.JsonElement;
import com.google.gson.JsonObject;
import com.google.gson.JsonParseException;

public class Foo
{
  public static void main(String[] args)
  {
    /*
      {
        "response": {"data": {"foo": "FOO"}},
        "meta": {"errors": [], "success": 1}
      }
     */
    String input1 = "{\"response\": {\"data\": {\"foo\": \"FOO\"}},\"meta\": {\"errors\": [], \"success\": 1}}"; 

    /*
      {
        "response": {"data": {"bar": 42}},
        "meta": {"errors": [], "success": 1}
      }
     */
    String input2 = "{\"response\": {\"data\": {\"bar\": 42}},\"meta\": {\"errors\": [], \"success\": 1}}";

    processInput(input1);
    // {"response":{"data":{"foo":"FOO"}},"meta":{"errors":[],"success":1}}

    processInput(input2);
    // {"response":{"data":{"bar":42}},"meta":{"errors":[],"success":1}}
  }

  static void processInput(String jsonInput)
  {
    DataDeserializer dataDeserializer = new DataDeserializer();
    dataDeserializer.registerDataType("foo", A.class);
    dataDeserializer.registerDataType("bar", B.class);

    Gson gson = new GsonBuilder().registerTypeAdapter(Data.class, dataDeserializer).create();

    BaseResponse response = gson.fromJson(jsonInput, BaseResponse.class);
    System.out.println(new Gson().toJson(response)); 
  }
}

class DataDeserializer implements JsonDeserializer<Data>
{
  Map<String, Class<? extends Data>> dataTypeRegistry = new HashMap<String, Class<? extends Data>>();

  void registerDataType(String jsonElementName, Class<? extends Data> javaType)
  {
    dataTypeRegistry.put(jsonElementName, javaType);
  }

  @Override
  public Data deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context) throws JsonParseException
  {
    JsonObject jsonObject = json.getAsJsonObject();
    for (String elementName : dataTypeRegistry.keySet())
    {
      if (jsonObject.has(elementName))
      {
        Class<? extends Data> dataType = dataTypeRegistry.get(elementName);
        return context.deserialize(jsonObject, dataType);
      }
    }
    throw new RuntimeException("Oops");
  }
}

class BaseResponse
{
  Response response;
  Meta meta;
}

class Meta
{
  List<String> errors;
  int success;
}

class Response
{
  Data data;
}

class Data
{

}

class A extends Data
{
  String foo;
}

class B extends Data
{
  int bar;
} 
```

# email - 向域上的服务器发送电子邮件

> ID：15578108
> 
> 赞同：0
> 
> 时间：2013-03-22T19:09:18.903
> 
> 标签：email, tcp, windows-server-2008

我被要求处理从公司网络上的应用程序生成的电子邮件。这不是通过交换进行的，该应用程序本身已发送 SMTP。为了在接收服务器上捕获电子邮件，我打算编写一个 Windows 服务来监听端口 25。

问题是如何将数据发送到接收服务器。网络管理员认为发送 [name]@[server] 将在内部工作。是这样吗？

这很可能是问错了地方，因为我不需要代码方面的帮助，只需将电子邮件发送到正确的地方。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T21:47:19.580

如果生成电子邮件的应用程序具有“SmartHost”或“SMTP 网关”的设置，那么我建议在那里设置接收服务器的 IP 并避免 DNS 的潜在问题。

如果不是，那么是的，您应该可以说 user@hostname。如果没有为主机名设置 MX 记录，那么 RFC 说您应该回退并使用 A 记录，因此发件人应该在端口 25 上将邮件直接发送到主机名。

[如果您愿意，可以使用我们的SMTP 诊断工具](http://bit.ly/Yi2NqR)检查您的服务器是否接受端口 25 上的连接和邮件命令。

# android - bindservice vs startService 用于上传/下载过程

> ID：15578111
> 
> 赞同：0
> 
> 时间：2013-03-22T19:09:34.147
> 
> 标签：android, multithreading, service, upload, download

我有一个关于我应该使用哪种类型的服务来在我的应用程序中运行数据的上传和下载的问题。

具体来说，似乎绑定服务（通过调用 bindService() 获得）确实更适用，因为我的后台工作并没有无限期地运行，我的理解是这确实是使用 startService/START_STICKY 的目的。

也就是说，我正在运行长时间的上传和下载，并且我*不*希望在上传/下载过程中收集我的服务垃圾，无论应用程序的 UI 发生了什么（发送到后台等）。据我了解，如果我有一个绑定服务，一旦所有连接都解除绑定，它就会被垃圾收集。这是否意味着我的绑定服务可能会在它正在做的事情中途停止？

谁能在这里指出我正确的方向？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:40:37.923

通过调用使您`Service`在前台运行[`startForeground`](http://developer.android.com/reference/android/app/Service.html#startForeground%28int,%20android.app.Notification%29)将向系统发出信号，表明您的服务的终止和/或垃圾收集将对用户造成破坏。这将阻止系统清理您的服务，除非由于系统资源低或功率低而绝对必须这样做。

要`Service`在前台运行，您需要给它一个`Notification`. 可以这样做：

```
Notification.Builder builder = new Notification.Builder(getApplicationContext());
builder.setSmallIcon(R.drawable.notification_icon);
builder.setContentTitle("Your notification text");
builder.setProgress(100, 0, true); /* 0 out of 100 progress to start */
builder.setAutoCancel(false);
builder.setOngoing(true);
Notification notification = builder.getNotification();

/* NOTIFICATION_ID can just be a static int to identify your service's notification */
startForeground(NOTIFICATION_ID, notification); 
```

这是使用 startForeground 的一个非常基本的示例，但至少应该让您指向正确的方向。当您的操作完成后，您可以通过调用来向系统发出信号，表明您可以被收集[`stopForeground`](http://developer.android.com/reference/android/app/Service.html#stopForeground%28boolean%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-12T22:37:50.840

为此，首先让我们回顾一下什么是服务。根据 Android 文档，服务是应用程序组件，表示应用程序希望在不与用户交互的情况下执行更长时间运行的操作。当您使用 startService() 时，您将启动将在主线程上运行的服务，并且它未连接到启动它的 Activity，因此您无法与它通信。当您使用 bindService() 时，您将服务绑定到活动，并且在活动没有被杀死时它是活动的（设备调用或杀死的 onDestroy 方法以释放内存）。

我的建议是您使用 IntentService（搜索简短教程），因为在这种情况下，您可以向应用程序发送广播，它在不同的线程中运行，然后您可以在文件完成上传时收到通知。您可以使用的另一种方法是使用 JobScheduler（在 Android 21 上推出），以防您需要不断上传/下载文件（有点像 Evernote 在后台每 N 分钟同步一次）。

希望能帮助到你。

# oop - OO模式注入一个小条件

> ID：15578113
> 
> 赞同：1
> 
> 时间：2013-03-22T19:09:38.013
> 
> 标签：oop, design-patterns

这实际上是非常基本的。也许有人提供了一个好的:) 解决方案。

有一个接口，比如 IComponent。

```
public interface IComponent {
    string GetStatus();
} 
```

如果当前时间在上午 12:00 和上午 12:10 之间，则`IComponent`需要跳过一部分逻辑的几种实现。`GetStatus()`但是还有其他实现`IComponent`根本不关心任何时间间隔。

可以这么说：

```
public interface MyComponent : IComponent {
    public string GetStatus() {
        StringBuilder result = ...;
        ....
        if (/*current time between 12:00AM and 12:10AM */)
            result.Append("good enough");
        else {
            //calculate result
            result.Append(/*calculated result*/);
        }
        ...
        return result.ToString();
    }
} 
```

所以我基本上需要的是封装

```
if (/*current time between 12:00AM and 12:10AM */)
        return "good enough"; 
```

进入某个类，我们称它为`'SomeBehavior'`或 smth，它可以在整个**所需** `IComponent`的实现中重用。

如果有帮助，此条件的含义`if`是“跳过统计文件检查”，因此可以将其命名为例如 SkipStatFilesCheckBehavior。

虽然我也不确定命名，但这就是我在这里的原因（你可能会以某种方式命名它们比“行为”更合适）。实施它的最佳方法是什么？如何将“行为”更好地注入`IComponent`- 实现（例如通过构造函数或其他任何东西）？如果我将来需要一些其他“行为”，该解决方案是否可以扩展？也许将来某些“行为”将需要引用`IComponent`-implementation。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:37:55.090

I posted an answer using Inheritance, but you said in your comment that you don't want to use inheritance. Here is a composition example:

```
public class Status 
{
    virtual public string getStatus()
    {
        StringBuilder result = new StringBuilder();
        if (1 == 1) //This IF statement will compare the time
            result.Append("good enough");
        else
        {
            //calculate result
            result.Append("calculated result");
        }
        return result.ToString();
    }
}

public class Component1 : IComponent
{
    public string getStatus()
    {
        Status component = new Status();
        String Status = component.getStatus();
        //Do the rest of the getStatus specific to Component1
        return Status;
    }
}

public class Component2 : IComponent
{
    public string getStatus()
    {
        String Status = "";
        //Do the rest of the getStatus specific to Component2
        return Status;
    }
}
public interface IComponent
{
    public string getStatus();
} 
```

In the code above Component1 "has a" status, but component 2 does not. You could create sub classes from the Status class to extend the behaviour of getStatus().

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T23:27:32.233

也许是这样的：

```
interface Component {
    String status();
}
abstract class ComponentABC implements Component {
    ComponentABC() {
        this(false,false);
    }
    ComponentABC(boolean behaviour1,boolean behaviour2) {
        this.behaviour1=behaviour1;
        this.behaviour2=behaviour2;
    }
    public String status() {
        String s="component";
        if(behaviour1)
            s+=" with behaviour1";
        if(behaviour2)
            s+=" with behaviour2";
        return s;
    }
    boolean behaviour1,behaviour2;
}
class BasicComponent extends ComponentABC {}
class Behaviour1Component extends ComponentABC {
    Behaviour1Component() {
        super(true,false);
    }
}
class Behaviour2Component extends ComponentABC {
    Behaviour2Component() {
        super(false,true);
    }
}
class BehaviourBothComponent extends ComponentABC {
    BehaviourBothComponent() {
        super(true,true);
    }
}
public class So15578113 {
    public static void main(String[] args) {
        Component[] components=new Component[]{new BasicComponent(),new Behaviour1Component(),new Behaviour2Component(),new BehaviourBothComponent()};
        for(Component component:components)
            System.out.println(component.status());

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T22:28:17.807

我会使用代理模式。据我了解，您可以这样使用它：

```
// common interface
public class IComponent {
    // I split getStatus, because both concrete cases have
    // common pre and post processings
    public string GetStatus() {
        StringBuilder result = ...;
        preProcess(result);
        mainProcess(result);
        postProcess(result);
        return result.ToString();
    }
    private void preProcess(StringBuilder str);
    private void postProcess(StringBuilder str);
    // proxied method
    private void mainProcess(StringBuilder str);
}

// class implementing the basic behavior
public class MyComponent : IComponent {
    private void mainProcess(StringBuilder result) {
        result.Append(/*calculated result*/);
    }
}

// proxy class that calls the basic behavior under certain conditions only
public class SkipStatFilesCheckBehavior : IComponent {
    IComponent basicBehavior;

    public SkipStatFilesCheckBehavior(IComponent newBasicBehavior) {
        basicBehavior = newBasicBehavior;
    }

    private void mainProcess(StringBuilder result) {
        if (/*current time between 12:00AM and 12:10AM */)
            result.Append("good enough");
        else { 
            basicBehavior.mainProcess(result);
        }
    }
} 
```

# c - 不听时如何在套接字上发送消息？

> ID：15578116
> 
> 赞同：1
> 
> 时间：2013-03-22T19:09:58.350
> 
> 标签：c, linux, sockets

消息队列可以发送消息，即使对方不存在读取它，对方可以稍后慢慢来并读取累积的队列。

我如何在套接字中实现这一点？每次当没有人听（当然绑定）时我写一个套接字它都会失败[连接流套接字：连接被拒绝或连接流套接字：没有这样的文件或目录]

起初，我只看 AF_UNIX、SOCK_STREAM

谢谢内森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T21:33:51.257

做不到。如果没有人接受数据，就没有人接受数据。

看看[systemd](http://www.freedesktop.org/wiki/Software/systemd)（在 Linux 中）如何处理这个问题，也许它可以解决您的问题？

# gwt - 从 CellTable 中的 valueupdater 丢弃更新的值失败

> ID：15578119
> 
> 赞同：1
> 
> 时间：2013-03-22T19:10:03.690
> 
> 标签：gwt, gwt-2.2-celltable

我想在持久化之前检查更新的值。如果检查失败，我想放弃更新，但这不起作用。

```
EditTextCell cell = new EditTextCell();
Column<AnObject, String> column = new Column<AnObject, String>(cell) +
{ @Override public String getValue(AnObject object) 
  { logger.info("getVal:"+object.getId()+", "+object.getAttr());
    return object.getAttr();
  }
};

column.setFieldUpdater(new FieldUpdater<AnObject, String>()
{ @Override public void update(int index, AnObject object, String value)
  { if (checkValue(value)
    { object.setAttr(value);
      databaseUpdate(object);
    } else
    { taskDataProvider.refresh();  // to display the original value. Doesn t work
    }
  }
}); 
```

调用列的 getValue() 方法并返回旧值，但仍显示新编辑的值。怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T19:46:11.743

像这样在 else 语句中调用 clearViewData 方法

`cell.clearViewData(KEY_PROVIDER.getKey(object)); table.redraw();`

# django - 无法使用 Django 1.5、django-celery 3.0.11 和 mongodb 对任务进行排队

> ID：15578120
> 
> 赞同：1
> 
> 时间：2013-03-22T19:10:12.463
> 
> 标签：django, django-celery, celery-task, djcelery

每个人。当我从 django shell 运行以下代码时，我`Django==1.5`遇到`django-celery==3.0.11` 了问题 `error: [Errno 61] Connection refused`

```
from data_warehouse.tasks import add
add.delay(4,4) 
```

设置.py

```
INSTALLED_APPS += ('djcelery')
# Settings for Celery Task Scheduler
BROKER_URL = 'mongodb://'
import djcelery
djcelery.setup_loader() 
```

data_warehouse.tasks（从教程复制）

```
from celery.task import task
@task()
def add(x, y):
    return x + y 
```

当我运行 python manage.py celery worker -l info 我得到

```
 -------------- celery@Atthaphongs-MacBook-Air.local v3.0.16 (Chiastic Slide)
---- **** ----- 
--- * ***  * -- [Configuration]
-- * - **** --- . broker:      mongodb://localhost//
- ** ---------- . app:         default:0x10f215810 (djcelery.loaders.DjangoLoader)
- ** ---------- . concurrency: 4 (processes)
- ** ---------- . events:      OFF (enable -E to monitor this worker)
- ** ---------- 
- *** --- * --- [Queues]
-- ******* ---- . celery:      exchange:celery(direct) binding:celery
--- ***** ----- 
[Tasks]
  . data_warehouse.tasks.add
/Users/atthaphong/VirtualEnvs/report/lib/python2.7/site-packages/djcelery/loaders.py:132: UserWarning: Using settings.DEBUG leads to a memory leak, never use this setting in production environments!
  warnings.warn("Using settings.DEBUG leads to a memory leak, never "
[2013-03-23 01:38:22,999: WARNING/MainProcess] /Users/atthaphong/VirtualEnvs/report/lib/python2.7/site-packages/djcelery/loaders.py:132: UserWarning: Using settings.DEBUG leads to a memory leak, never use this setting in production environments!
  warnings.warn("Using settings.DEBUG leads to a memory leak, never "
[2013-03-23 01:38:23,000: WARNING/MainProcess] celery@Atthaphongs-MacBook-Air.local ready.
[2013-03-23 01:38:23,002: INFO/MainProcess] consumer: Connected to mongodb://localhost//.
/Users/atthaphong/VirtualEnvs/report/lib/python2.7/site-packages/pymongo/mongo_client.py:274: UserWarning: database name in URI is being ignored. If you wish to authenticate to admin, you must provide a username and password.
  "and password." % (db,))
[2013-03-23 01:38:23,005: WARNING/MainProcess] /Users/atthaphong/VirtualEnvs/report/lib/python2.7/site-packages/pymongo/mongo_client.py:274: UserWarning: database name in URI is being ignored. If you wish to authenticate to admin, you must provide a username and password.
  "and password." % (db,)) 
```

当我尝试使用带有此代码的 python shell 运行任务时

```
from celery import Celery
celery = Celery('tasks', broker='mongodb://')
celery.conf.CELERY_RESULT_BACKEND = "mongodb"
@celery.task
def add(x, y):
    return x + y 
```

我得到这个预期的错误。

```
[2013-03-23 02:04:30,218: ERROR/MainProcess] Received unregistered task of type     'tasks.add'.
The message has been ignored and discarded.
Did you remember to import the module containing this task?
Or maybe you are using relative imports? 
```

问题可能来自 Celery 实例没有调用正确的代理 url，但我还没有弄清楚。你对此有什么想法吗？

解决了！！只需添加

```
BROKER_TRANSPORT = 'mongodb' 
```

到 settings.py

# php - 在php中对数组进行排序

> ID：15578123
> 
> 赞同：-1
> 
> 时间：2013-03-22T19:10:34.433
> 
> 标签：php, mysql, arrays, sorting

我有一个这样创建的数组：

```
$i = 0;

$files = array();   

while ($file = mysql_fetch_array($query_files)) {
    $files[$i] = array();
    $files[$i] = $file;
    $i++;
} 
```

而且我需要能够根据每个 $file['name'] aka $files[$i]['name'] 对 $files 数组进行排序。

我该怎么做呢？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-22T19:12:40.907

添加`ORDER BY NAME`到您的查询。严重地。这是最快、最安全、最安全的方法。我不是在开玩笑。此外，您会告诉数据库做一些它擅长的事情，而 PHP 只能做这件事。最后，您可以选择索引数据库的名称列，而 PHP 不提供索引。

如果您绝对*必须*自己对其进行排序，那么您需要使用[`usort`](http://php.net/manual/en/function.usort.php).

```
// this example is almost a clone of something in the docs.
function cmp($a, $b)
{
    return strcmp($a["name"], $b["name"]);
}
usort($files, "cmp"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T19:13:31.020

看起来像一份工作[`usort`](http://www.php.net/manual/en/function.usort.php)

```
usort($array, function ($a, $b) {
   if ($a['name'] == $b['name']) {
       return 0;
   }
   return $a['name'] < $b['name'] ? -1 : 1;
}); 
```

# ruby-on-rails - 黄瓜不断删除所有数据

> ID：15578126
> 
> 赞同：0
> 
> 时间：2013-03-22T19:10:51.917
> 
> 标签：ruby-on-rails, cucumber

傻瓜。这就是我得到的 env.rb ：

```
Cucumber::Rails::World.use_transactional_fixtures = false

# begin
#   DatabaseCleaner.strategy = :transaction
# rescue NameError
#   raise "You need to add database_cleaner to your Gemfile (in the :test group) if you wish to use it."
# end 
```

在我的功能中，我有这个：

```
@javascript
@no-txn
Feature: AwesomeSauce 
```

那么，还有什么可能会调用此 DatabaseCleaner 来破坏我的一天呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T01:49:56.003

如果您正在使用 rake，则 db:test:purge 正在执行此操作。其他人已经在这里编写了答案的代码[How to keep data when run test in rails](https://stackoverflow.com/questions/1158407/how-to-keep-data-when-run-test-in-rails)节省了我的工作量:-)

```
Rake::TaskManager.class_eval do
  def delete_task(task_name)
    @tasks.delete(task_name.to_s)
  end
  Rake.application.delete_task("db:test:purge")
  Rake.application.delete_task("db:test:prepare")
end

namespace :db do
  namespace :test do
    task :purge do
    end
    task :prepare do
    end
  end
end 
```

那应该做的工作。

# ios - 如何将本地 .xib 与服务器 .xib 合并？

> ID：15578131
> 
> 赞同：0
> 
> 时间：2013-03-22T19:11:24.333
> 
> 标签：ios, objective-c, xcode4.5

我使用 Xcode 4.5 的颠覆。

所以当我想要更新 xib 文件时，我遇到了一些问题？

![在此处输入图像描述](../Images/920fb815414f34e9b7b7313aaf88ba54.png)

问题：

1.  **左侧面板中的C**（红色）是什么意思？

2.  有什么作用**？**意思是在中央面板？

3.  为什么我看不到一些不同的代码是调用问题？

4.  如何将我的本地 .xib 与服务器 .xib 结合起来？

5.  也许有人知道更好的 svn 客户端？

6.  或者有人知道描述如何在 Xcode 4.5 中使用颠覆的文章？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T21:20:28.473

对于前两个问题，我引用了[Apple 的文档](http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/Xcode_User_Guide/085-Save_and_Revert_Changes_to_Projects/manage_project_changes.html#//apple_ref/doc/uid/TP40010215-CH7-SW27)：

```
 Badge - SCM status

  M       Locally modified
  U       Updated in repository
  A       Locally added
  D       Locally deleted
  I       Ignored
  R       Replaced in the repository
  –       The contents of the folder have mixed status; display the contents to see individual status
  ?       Not under source control 
```

关于问题 3,4 和 6，您可能做的最好的事情就是听从 Basile Starynkevitch 的建议。

关于问题 5：XCode 只是调用了 svn 命令行工具。但是，XCode 附带的 svn 版本通常不是最新的。也许您想用更现代的替换它。您会找到其他版本，例如通过[Homebrew](https://github.com/mxcl/homebrew)或[MacPorts](http://www.macports.org/)。

# asp.net - 服务器端代码更改后如何清除本地存储

> ID：15578134
> 
> 赞同：2
> 
> 时间：2013-03-22T19:11:33.510
> 
> 标签：asp.net, local-storage

在某些情况下，我一直在使用 localStorage 来为应用程序的用户保留一些信息。我使用有助于识别用户的密钥。

简单的例子：

```
var key = localStorage.getItem("@Membership.GetUser().Username-SomeKey"); 
```

假设我想在客户端上保留这些信息，但我想在代码更改（即新版本）时将其删除。让我们假设代码更改可能会导致其中一些本地存储的值包含“坏”数据。

当有新版本时，清除 localStorage 的简单方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T19:18:55.013

我将开始在 localStorage 中跟踪程序集的内部版本号。然后，您可以在页面加载时检查 localStorage 版本是否与您的程序集版本匹配。如果没有，请调用`localStorage.clear()`并将新的内部版本号插入 localStorage。

对它的一种伪代码：

```
if (localStorage.getItem("AssemblyVersion") !== @GetAssemblyVersion) {
     localStorage.clear();
     localStorage.setItem("AssemblyVersion", @GetAssemblyVersion);
} 
```

还有[其他问题](https://stackoverflow.com/questions/909555/how-can-i-get-the-assembly-file-version)演示了如何获取程序集版本。您可以将其包装在[Razor 辅助函数](http://weblogs.asp.net/scottgu/archive/2011/05/12/asp-net-mvc-3-and-the-helper-syntax-within-razor.aspx)中或将其添加到您的模型中。从那里您需要做的就是确保您的程序集版本在每次构建时都发生变化。

# php - PHP：尝试使 pdf 文件可下载

> ID：15578135
> 
> 赞同：-1
> 
> 时间：2013-03-22T19:11:37.380
> 
> 标签：php

用户成功提交表单后，我正在尝试使 PDF 文件可下载。

我已经使用了[这个问题](https://stackoverflow.com/questions/364946/how-to-make-pdf-file-downloadable-in-html-link)的代码，但是 pdf 文件的内容被输出为 gebrish 字符，而不是弹出的下载对话框。

从函数中调用下载代码

```
function phpfmg_thankyou(){
    phpfmg_redirect_js();

    //include('get_file.php');
    $pdf_file = "{$_SERVER['DOCUMENT_ROOT']}/secured_assets/CRE_White_Paper_Release_01-15-2013.pdf";
    if( file_exists( $pdf_file ) ){
        header("Content-Type: application/octet-stream");
        header("Content-Disposition: attachment; filename=" . Urlencode('CRE_White_Paper_Release_01-15-2013.pdf'));   
        header("Content-Type: application/force-download");
        header("Content-Type: application/download");
        header("Content-Description: File Transfer");            
        header("Content-Length: " . Filesize($pdf_file));
        flush(); // this doesn't really matter.
        $fp = fopen($pdf_file, "r");
        while (!feof($fp)){
            echo fread($fp, 65536);
            flush(); // this is essential for large downloads
        } 
        fclose($fp);

    }

?>

<!-- [Your confirmation message goes here] -->
    <br>

    <div style="padding: 1em; background: #CDD7B6;">    
        <b>Your inquiry has been received. Thank you!</b>
        <p><a title="FREE White Paper Commercial Real Estate Expectations" href="secured_assets/CRE_White_Paper_Release_01-15-2013.pdf">Click Here</a> to get your FREE copy of White Paper Commercial Real Estate Expectations</p>
    </div>

<?php

} // end of function phpfmg_thankyou() 
```

![在此处输入图像描述](../Images/9ba1e23275aa8a00be8924a97154dc68.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:34:15.573

这只是一种预感，但请尝试删除 PHP 中的所有 HTML 代码：

```
<!-- [Your confirmation message goes here] -->
    <br>

    <div style="padding: 1em; background: #CDD7B6;">    
        <b>Your inquiry has been received. Thank you!</b>
        <p><a title="FREE White Paper Commercial Real Estate Expectations" href="secured_assets/CRE_White_Paper_Release_01-15-2013.pdf">Click Here</a> to get your FREE copy of White Paper Commercial Real Estate Expectations</p>
    </div> 
```

添加这样的内容（我认为）会让您的客户认为 HTML 是 PDF 文件的一部分。PDF 文件被压缩，任何非标准数据最终都会像你描述的那样把整个事情变成乱码。

浏览器会自动将您带回到下载文件之前的原始页面（如果文件设置为自动下载）

因此，如果您想要感谢，您可以设置一个 PHP 页面，上面写着“Thankyou”，然后将您的浏览器重定向到实际下载的 PHP 页面。下载完成后，仍会显示您的Thankyou。

我绝对不是 PHP 专业人士，所以如果我对此有误，请告诉我，我将删除答案。

在尝试下载文件之前，我建议尝试让 php 文件假装它是 pdf 文件。这样，可能出错的事情就会减少。让 php 输出 pdf 文件后，您只需将正确的标题添加到现有代码中即可自动下载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T20:39:46.853

谢谢大家的意见。我能够通过在提交后重定向到另一个页面并在该重定向页面中包含下载代码来解决这个问题。

# eclipse - 将滚动条添加到 Eclipse 窗口

> ID：15578141
> 
> 赞同：-1
> 
> 时间：2013-03-22T19:12:27.593
> 
> 标签：eclipse, eclipse-plugin

我有一个我非常喜欢[appwrench](http://appwrench.onpositive.com/)的 eclipse 插件。唯一的问题是他们没有在其中一个弹出窗口中构建滚动条。这意味着如果内容不适合我的屏幕，我就看不到它。我一直在我的宽屏显示器上切换到纵向模式以进行更改，但这是一个糟糕的解决方案。

我想知道是否有任何方法可以强制 eclipse 打开带有滚动条的窗口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T15:13:01.803

不，这对于 eclipse 内置功能是不可能的（也不使用其他 eclipse 插件）。

如果该弹出窗口包含您可以选择某些内容（例如文本输入字段或文本视图）的小部件，那么您可以通过选择一些内容并将鼠标拖动到您想要滚动的方向来强制它滚动（使用鼠标按钮仍然按下）。当您尝试在文本输入控件中选择一些文本时，您可能已经将其视为“不需要的行为”，其中文本比控件本身大得多。

# ruby-on-rails - 在任何来源中都找不到 multi_json-1.7.2

> ID：15578144
> 
> 赞同：0
> 
> 时间：2013-03-22T19:12:40.530
> 
> 标签：ruby-on-rails, heroku, bundler

推送到我的 heroku 暂存环境时出现此错误。

与此相关的其他相关问题是捆绑更新多 json 或捆绑更新或删除 Gemfile.lock 和捆绑安装（它们都是相同的）。这些解决方案都不适合我。

我的 gemfile 不调用 multi-json 我尝试指定 multi-json 的版本，但在部署到 heroku 时总是遇到同样的问题。我的开发环境运行良好。

我还将捆绑器更新到 1.3.6 并再次尝试了一切

```
-----> Using Ruby version: ruby-1.9.3
-----> Installing dependencies using Bundler version 1.3.2
   Running: bundle install --without development:test --path vendor/bundle --binstubs vendor/bundle/bin --deployment
   fatal: Not a git repository (or any of the parent directories): .git
   fatal: Not a git repository (or any of the parent directories): .git
   fatal: Not a git repository (or any of the parent directories): .git
   Some gems seem to be missing from your vendor/cache directory.
   Could not find multi_json-1.7.2 in any of the sources
 !
 !     Failed to install gems via Bundler.
 !
 !     Heroku push rejected, failed to compile Ruby/rails app 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T00:19:01.870

诀窍是因为存在供应商/缓存，它正在该文件夹中寻找 multi_json。我刚刚删除它并推送它，它正在工作。

这个问题有帮助

[供应商/捆绑包的目的是什么？Heroku 告诉我删除它](https://stackoverflow.com/questions/12573596/what-is-the-purpose-of-vendor-bundle-heroku-tells-me-to-remove-it)

# javascript - 使用给定的 x 坐标获取沿 SVG 路径的点的 y 坐标

> ID：15578146
> 
> 赞同：10
> 
> 时间：2013-03-22T19:12:41.493
> 
> 标签：javascript, svg, raphael

我正在使用 raphael.js 绘制一个简单的 SVG 折线图，如下所示：

![线形图](../Images/5f734e7fe45ec7bd717ff8867dd5aa73.png)

当用户悬停图表时，id 喜欢显示一个弹出框，指向光标**X位置处的线，以及该线对应****X位置的****Y**位置，如下所示：

 **![沿线带有弹出框的光标](../Images/a84025436960129d7d96095af8d7a56c.png)

我需要走路径并找到给定**X坐标的****Y**坐标。

 *** * *

## 回答 #1

> 赞同：13
> 
> 时间：2017-12-22T02:59:19.257

基于@Duopixel的D3解决方案，我使用DOM API在纯javascript中编写了以下函数供自己使用：

```
function findY(path, x) {
  var pathLength = path.getTotalLength()
  var start = 0
  var end = pathLength
  var target = (start + end) / 2

  // Ensure that x is within the range of the path
  x = Math.max(x, path.getPointAtLength(0).x)
  x = Math.min(x, path.getPointAtLength(pathLength).x)

  // Walk along the path using binary search 
  // to locate the point with the supplied x value
  while (target >= start && target <= pathLength) {
    var pos = path.getPointAtLength(target)

    // use a threshold instead of strict equality 
    // to handle javascript floating point precision
    if (Math.abs(pos.x - x) < 0.001) {
      return pos.y
    } else if (pos.x > x) {
      end = target
    } else {
      start = target
    }
    target = (start + end) / 2
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-12T10:10:15.720

如果您知道路径的所有点，则在路径`d`属性中搜索您要查找的特定 x 坐标并使用正则表达式检索 y 坐标可能会更高效：

```
const regex = new RegExp(`${x} ((\d*.\d*))`)
const match = regex.exec(d) 
```

如果您想找到不在您的路径 d 属性中的 y 和任意 x 坐标，您可以遍历路径的所有坐标并找到最接近您要查找的 x 坐标。不知道这是否会比通过路径和调用更快`getPointAtLength`。****

# asp.net - 我可以强制 OutputCache 缓存我的自定义响应标头吗？

> ID：15578147
> 
> 赞同：2
> 
> 时间：2013-03-22T19:12:45.243
> 
> 标签：asp.net, webforms, outputcache

我有一个使用输出缓存的 ASP.NET 网络表单，并且在呈现页面时设置了一些自定义响应标头（例如`X-MyCustomHeader`）。

在冷缓存命中时，我的自定义标头设置在响应中，但后续缓存的响应不包括它们。

有什么方法可以将我的自定义响应标头与响应正文一起缓存？

# .htaccess - htaccess 在特定目录中将 PNG 重写为 JPG

> ID：15578149
> 
> 赞同：1
> 
> 时间：2013-03-22T19:12:51.877
> 
> 标签：.htaccess, png, rewrite, jpeg

基本上，我将网站上的图像生成从 PNG 更改为 JPG，并转换了所有现有文件以节省空间。问题在于对旧 PNG 版本的请求。

这只影响了一些特定的目录，例如 /imgs/profiles/

我试图自己理清规则，但这让我发疯。

如果有人可以给我一个在 /imgs/profiles/ 中将 PNG 请求重写为 JPG 的示例，我可以对所有其余部分进行排序，以便在此处节省空间。

编辑 - 我的 htaccess 顶部的部分

```
FileETag None
Options +FollowSymLinks -MultiViews
RewriteEngine On

RewriteCond %{HTTP_HOST} !^www.site.net
RewriteRule (.*) http://www.site.net/$1 [R=301,L]

ErrorDocument 404 /404.php
ErrorDocument 300 /404.php

RewriteBase /imgs/profiles/
RewriteRule ^([^.]+)\.png$ /$1.jpg [R=301,L,NC]

RewriteRule ^file file.php [L,NC] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T19:19:06.440

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`$DOCUMENT_ROOT/imgs/profiles`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /imgs/profiles/

RewriteRule ^([^.]+)\.png$ /imgs/profiles/$1.jpg [R=301,L,NC] 
```

### 编辑：我在这里为您的 .htaccess 提供修复：

**确保这个 .htaccess 直接在你的`$DOCUMENT_ROOT`目录下：**

```
FileETag None
Options +FollowSymLinks -MultiViews
RewriteEngine On
RewriteBase /

ErrorDocument 404 /404.php
ErrorDocument 300 /404.php

RewriteCond %{HTTP_HOST} !^www\.site\.net$ [NC]
RewriteRule ^(.*)$ http://www.site.net/$1 [R=301,L]

RewriteRule ^(imgs/profiles/[^.]+)\.png$ /$1.jpg [R=301,L,NC]

RewriteRule ^file/?$ /file.php [L,NC] 
```

# objective-c - 更改 UIScrollView 中间按钮的大小

> ID：15578150
> 
> 赞同：1
> 
> 时间：2013-03-22T19:12:55.270
> 
> 标签：objective-c, image, button, uiscrollview, center

我有一个包含多个按钮的 uiscrollview。当用户将按钮滚动到滚动视图的中间时，我需要更改它的大小。我以编程方式创建并添加了按钮，并为每个按钮分配了一个标签号。我只是不确定如何确定哪个按钮在中间以便我可以更改它。有没有人做过这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:24:45.733

将以下代码放在您要检查按钮是否位于滚动视图中心的位置。

```
for (UIView *view in scrollView.subviews) {

    if ([view isKindOfClass:[UIButton class]]) {

        CGRect visibleRect = CGRectMake(scrollView.contentOffset.x, scrollView.contentOffset.y, scrollView.frame.size.height, scrollView.frame.size.width);
        CGRect centerRect = CGRectInset(visibleRect, 30, 30);
        BOOL isCentered = CGRectIntersectsRect(view.frame, centerRect);

        if (isCentered) {
            // the button is centered in the scroll view...
        }
    }

} 
```

isCentered 现在将告诉您按钮是否在滚动视图中居中。您必须将 30 值更改为适合您的滚动视图大小的任何值。

# jquery - jQuery UI 输入验证（onchange 事件）

> ID：15578151
> 
> 赞同：0
> 
> 时间：2013-03-22T19:12:58.947
> 
> 标签：jquery, asp.net-mvc, jquery-ui

我正在开发一个使用 jQuery UI 以及其他一些库的项目。我正在尝试进行输入验证（在 onChange 事件之后）并且它无法正常工作。我有几个 ASP.NET MVC 文本框，我尝试按类和其他一些方式访问它们，但它们不起作用。

```
<%=Html.TextBox("Name1", Model.Customer.FirstName, new { style = "width:200px", @class="alphaOnly", onchange = "InputValidation();"  })%> 
```

这段代码确实有效，但我必须多次重复最后 3 行（~20 行），这不好。关于问题可能是什么的任何想法？

```
function InputValidation() {
var className = $('.alphaOnly').attr('class');
var regexAlpha = new RegExp('[^[a-zA-Z]+$'); 
var value = $("#Name1").val();
value = value.replace(regexAlpha, '');           
$("#Name1").val(value); 
```

我尝试了几种方法来动态获取 ID 并使用“alphaOnly”类遍历所有控件，但仍然无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:35:10.067

您不必获取ID，您已经可以选择关闭课程。而且您不必循环，因为选择器将返回所有匹配的项目，您可以将函数应用于结果，例如：

```
function InputValidation(){
    var regexAlpha = new RegExp('[^[a-zA-Z]+$');
    $(".alphaOnly").each(function(){
        this.value = this.value.replace(regexAlpha, '');
    });
} 
```

# sql-server - 如何创建外键，因此当我们删除子项中的父值时，将更新为 null

> ID：15578152
> 
> 赞同：3
> 
> 时间：2013-03-22T19:13:01.467
> 
> 标签：sql-server, tsql

我是 T-SQL 新手，请帮忙：我有两个表

```
User
  Id
  Name

History
  Id
  Result
  UserId 
```

如何创建关系，因此一旦我从用户表中删除用户，历史表将针对列 UserId 更新为 NULL

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T19:20:10.390

你可以`on delete set null`这样使用

```
ALTER TABLE USERS 
ADD CONSTRAINT Users_ThemeID_FK 
FOREIGN KEY (ThemeID) REFERENCES Themes(ThemeID) 
ON DELETE SET NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T19:19:57.853

```
ALTER TABLE dbo.History ADD CONSTRAINT
    FK_History_User FOREIGN KEY
    (
    UserID
    ) REFERENCES dbo.[User]
    (
    ID
    ) ON UPDATE  NO ACTION 
     ON DELETE  SET NULL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T19:17:40.590

确保打开[Cascading deletes](https://stackoverflow.com/questions/278392/should-i-use-the-cascade-delete-rule)，然后设置 pK 关系，然后您只需使用常规 Delete 语法，如`Delete From Table Where PK =`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T19:20:10.070

您可以将 FK 关系上的操作更改为设置为 null：

```
-- Create FK relationship
IF EXISTS (SELECT * FROM sys.objects
WHERE name = N'FK_EmpEducation_Employees' AND [type] = 'F')
ALTER TABLE EmpEducation
DROP Constraint FK_EmpEducation_Employees
GO

ALTER TABLE EmpEducation
ADD CONSTRAINT [FK_EmpEducation_Employees]
FOREIGN KEY (empno)REFERENCES employees(empno)
ON DELETE SET NULL ON UPDATE SET NULL
GO 
```

见这里：[http ://www.mssqltips.com/sqlservertip/2365/sql-server-foreign-key-update-and-delete-rules/](http://www.mssqltips.com/sqlservertip/2365/sql-server-foreign-key-update-and-delete-rules/)

# php - 如何防止 APC 缓存碎片

> ID：15578157
> 
> 赞同：2
> 
> 时间：2013-03-22T19:13:24.330
> 
> 标签：php, wordpress, caching, apc

我在托管一个大型 Wordpress 站点的 Ubuntu 服务器上安装了 APC。每天大约有 50k 个帖子（不允许评论）和 30k 页面浏览量。APC 大大提高了网站的速度。但是，我无法克服碎片问题。20小时后，碎片率超过52%，而且还在上升。

关于 Stackoverflow 的一些建议没有帮助。

*   我安装了 W3 Total Cache 插件，但随后将其停用。在 W3TC 中，碎片化的速度增加得更快。
*   我尝试将共享内存大小增加到 1GB。
*   我将ttl设置为7200。
*   我关闭了统计。

我还应该尝试什么？命中率为100%。我真的应该担心碎片化吗？

![在此处输入图像描述](../Images/ffcdaa8d824383cae4d54970bbf2ea2c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T01:14:25.013

实际上，您的碎片看起来并没有那么糟糕。我见过更糟糕的。

我的建议是只将 APC 用于操作码缓存，让它只缓存 php 文件。使用 memcached 作为您的 WordPress 对象缓存并使用 batcache 对其进行补充。我曾经是 W3TC 的大力支持者，但它过于臃肿和错误，无法在企业或非常大规模的环境中使用。

[http://wordpress.org/extend/plugins/memcached/](http://wordpress.org/extend/plugins/memcached/)
[http://wordpress.org/extend/plugins/batcache/](http://wordpress.org/extend/plugins/batcache/)

# javascript - Bootmetro 框架，对齐问题

> ID：15578158
> 
> 赞同：0
> 
> 时间：2013-03-22T19:13:25.410
> 
> 标签：javascript, html, css, microsoft-metro

所以我一直在使用[bootmetro](http://aozora.github.com/bootmetro/)框架，但遇到了一个更严重的问题，bootmetro 带有一个[轮播](http://aozora.github.com/bootmetro/javascript.html#carousel)和一个[scrollspy navbar](http://aozora.github.com/bootmetro/javascript.html#scrollspy)。

我尝试将轮播放在页面顶部，但由于某种原因，标题会从一侧蔓延到另一侧，因为宽度在 CSS 中设置为自动，但图像不会。

无论如何，我决定不这样做并采用并行方法，如果您发现轮播在顶部与项目导航栏未正确对齐，我将[在此处](http://garrithgraham.azurewebsites.net/AboutMe.aspx)演示我想要实现的目标。

![在此处输入图像描述](../Images/c0e7783c4bc9138a9fbc30e3a6e1cfa6.png)

有谁知道我该如何解决这个问题，请记住我无法使用轮播的图像 css，因为它与网站上的其他所有内容相关联？如果我更改它们，那么主页中的图像就会发疯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T19:27:10.233

发生这种情况的原因是因为您正在使用表格进行布局。将表格用于布局目的并不是最佳实践。无论如何，为了保持一致，您应该改用 bootstrap 本机脚手架[http://twitter.github.com/bootstrap/scaffolding.html](http://twitter.github.com/bootstrap/scaffolding.html)。

尝试删除您的表格并使用以下标记：

```
<div class="row">
<div class="span4">
<!--Carousel goes gere -->
</div>
<div class="span4">
<!--Text and menu goes here -->
</div>
<div> 
```

# sql-server - 从视图内的存储过程中选择

> ID：15578159
> 
> 赞同：-1
> 
> 时间：2013-03-22T19:13:30.373
> 
> 标签：sql-server

有人可以告诉我为什么这行不通吗？

我有一个返回表的存储过程：像这样调用它可以正常工作：

```
EXECUTE dbo.sp_Get_Total_Parcels_Paid_Data 
```

但是，我需要在视图中使用它，并且不能让它工作。

```
Select * from dbo.sp_Get_Total_Parcels_Paid_Data() 
```

错误：

> 无效的对象名称'dbo.sp_Get_Total_Parcels_Paid_Data()

SP代码：

```
create PROCEDURE [dbo].[sp_Get_Total_Parcels_Paid_Data]
AS
BEGIN
-- SET NOCOUNT ON added to prevent extra result sets from
-- interfering with SELECT statements.
SET NOCOUNT ON;

declare @Sql1 nvarchar(max)
,@Sql2 nvarchar(max)
,@Sql3 nvarchar(max)

declare @TallyResults table
(EFOLDERID nvarchar(31) null    
,inv_bank_cd int null
,inv_cd int null
,inv_group_cd int null
,intLoanNumber int null
,other_text nvarchar(250) null
,tallyCount int
,eidMgrId nvarchar(31))

select @Sql1 = 'Select ' + tallydefinition from jobfunctions where jobfuncid = 44
select @Sql2 = 'Select ' + tallydefinition from jobfunctions where jobfuncid = 45
select @Sql3 = 'Select ' + tallydefinition from jobfunctions where jobfuncid = 206

insert into @TallyResults exec sp_executesql @Sql1
insert into @TallyResults exec sp_executesql @Sql2
insert into @TallyResults exec sp_executesql @Sql3

select * from @TallyResults

END 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T19:20:58.750

你不能`SELECT FROM <procedure>`，对不起。也许你可以试试[这个`OPENQUERY`把戏](https://dba.stackexchange.com/questions/12739/whats-the-easiest-way-to-create-a-temp-table-in-sql-server-that-can-hold-the-re)，但我不确定你能不能把它放在一个视图中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T19:20:16.270

我们不能在 Select 语句中执行存储过程。这是一个类似的线程

[SQL Server - 从存储过程中选择](https://stackoverflow.com/questions/1492411/sql-server-select-from-stored-procedure)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T19:30:54.817

如果我没有错[，这](http://www.sommarskog.se/share_data.html)就是你想要的

也许，这将指导您将结果集从一个 SP 获取到另一个 SP 的方法。

# jquery - 如何正确实现 jQuery datepicker 和 jQuery time picker

> ID：15578163
> 
> 赞同：3
> 
> 时间：2013-03-22T19:13:38.613
> 
> 标签：jquery, datepicker, timepicker

我正在尝试在我的应用程序上安装 datepicker UI 及其酷插件 Timepicker [http://trentrichardson.com/examples/timepicker/#basic_examples](http://trentrichardson.com/examples/timepicker/#basic_examples)

我在控制台中不断收到此错误

```
Uncaught TypeError: undefined is not a function jquery.ui.widget.js:71
$.widget jquery.ui.widget.js:71
(anonymous function) jquery.ui.slider.js:22
(anonymous function) jquery.ui.slider.js:672 
```

我正在尝试使用示例 #3，它是一个日期选择器加上一个滑块（时间格式）

```
$('#basic_example_3').datetimepicker({
    timeFormat: "hh:mm tt"
}); 
```

这是我的头html代码

```
 <link rel="stylesheet" href="css/jquery/jquery-ui.css">
  <script src="js/jquery.js"></script>
  <script src="js/jquery.ui.core.js"></script>
  <script src="js/jquery.ui.widget.js"></script>
  <script src="js/jquery.ui.slider.js"></script>
  <script src="js/jquery.ui.datepicker.js"></script>
  <script src="js/jquery-ui-timepicker-addon.js"></script> 
```

我的日历弹出窗口中根本看不到滑块。我看到一个带有时间的下拉菜单！有人可以帮我解决这个问题吗？我想如果我能解决这个错误，它就会解决问题。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T19:24:47.803

关于示例页面的来源，我建议尝试此设置：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.9.0.min.js"></script>
<script type="text/javascript" src="http://code.jquery.com/ui/1.10.0/jquery-ui.min.js"></script>
<script type="text/javascript" src="jquery-ui-timepicker-addon.js"></script>
<script type="text/javascript" src="jquery-ui-sliderAccess.js"></script> 
```

编辑：为您创建了一个小提琴：http: [//jsfiddle.net/sNa8d/](http://jsfiddle.net/sNa8d/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-04T12:50:11.787

如果您想使用`datepicker`+`timepicker`并且您只有一个输入来发布它们，您可以组合`datepicker`并`timepicker`在提交功能上，如下所示：

### jQuery

```
$("form").submit(function () {

     var matchStr = $('#matchStartDate').val() + ' ' +$('#matchStartTime').val();
     $('#MatchStartTime').val(matchStr);

     return true;
  }); 
```

### HTML

```
<input type="text" class="datepicker" id="matchStartDate"/>
<input type="text" class="timepicker" id="matchStartTime"> 
```

### 用于使用 MVC 发布

```
 @Html.HiddenFor(m => m.MatchStartTime) 
```

# sql - SQL SSRS 当前月份与月份值匹配

> ID：15578168
> 
> 赞同：0
> 
> 时间：2013-03-22T19:14:04.320
> 
> 标签：sql, reporting-services

我有一些数据；

客户名称 产品 月份 年份

在我的数据集中，我拥有的唯一过滤器是当前年份 = true

否则，我有上面的其余字段。当我运行我的报告时，它正在打印每个月的总数。我只希望它打印当月的总数。我在这里似乎有一些其他帖子并试图模仿/复制但没有运气

所以它正在打印客户贴纸 Jan Feb Mar 2013，当我真的只希望它打印当月，Mar

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:46:08.577

为什么不在数据集的查询中过滤掉当前月份的数据？就像是：

```
WHERE [year] = YEAR(CURRENT_TIMESTAMP) AND [month] = MONTH(CURRENT_TIMESTAMP) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T19:21:38.857

MonthName(Month(Fields!CurrentDate.Value),False) 试试这个

如果您让我知道您使用的确切字段，我可以帮助您表达

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T19:23:08.360

您只需要添加另一个过滤器即可获取当前月份：

当前月份的 SQL 语法：

```
select Dateadd(month, datediff(month, 0, getdate()), 0) 
```

或者

```
where thing = Dateadd(month, datediff(month, 0, getdate()), 0) 
```

# jquery - 隐藏 div 隐藏：溢出问题

> ID：15578174
> 
> 赞同：0
> 
> 时间：2013-03-22T19:14:13.563
> 
> 标签：jquery, html, user-interface

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:17:34.460

尝试

```
html,body{margin: 0; padding: 0;} 
```

代替

```
html,body{height:100%} 
```

# c++ - 如何尽早通过 C++ std::set 一个元素结束迭代？

> ID：15578178
> 
> 赞同：7
> 
> 时间：2013-03-22T19:14:26.323
> 
> 标签：c++, loops, iterator, set

**C++**

我有以下迭代循环：

```
for (it = container.begin(); it != container.end(); ++it) {
    //my code here
} 
```

我想尽早结束这个迭代 1 元素。我尝试了以下方法，但无法编译：

```
for (it = container.begin(); it != container.end() - 1; ++it) { //subtract 1
    //my code here
} 
```

如何才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-22T19:17:30.267

`std::prev(s.end())`你可以在你的集合之前迭代到一个`s`，注意容器为空的可能性：

```
#include <iterator> // for std::prev

auto first = s.begin();
auto last = s.empty() ? s.end() : std::prev(s.end()); // in case s is empty
for (auto it = first; it != last; ++it) { ... } 
```

**注意**：`std::prev`需要 C++11 支持。C++03 的替代方案是`--s.end()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T19:16:44.563

尝试`std::prev`：

```
for (it = container.begin(); it != std::prev(container.end()); ++it) { //subtract 1
    //my code here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T19:17:02.953

```
for (it = container.begin(); it != --result->container.end(); ++it) { //subtract 1
    //my code here
} 
```

`std::set::iterator``--`是双向的，这意味着您可以`++`在上面做。但是，它不满足随机访问迭代器的要求，因此您不能`-`使用`+`它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T19:18:44.757

`result->container.end() - 1`需要一个随机访问迭代器，但你只有一个双向迭代器。相反，您可能想要`--result->container.end()`.

此外，您可能不想每次都重新计算，尽管这没什么大不了的：

```
for (auto i(begin(result->container)), e(--end(result->container)); i!=e; ++i) { 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-21T08:42:24.660

找到最后一个迭代器的 c++98 解决方案可以是

```
set.find(*set.rbegin()) 
```

另一种选择，虽然它是无证的，也不被人们推荐

```
it!= --set.end() 
```

也有效，当 set 为空时它的行为应该是未定义的（开始 == 结束）

# objective-c - createFileAtPath & OCUnit & errno blues

> ID：15578179
> 
> 赞同：2
> 
> 时间：2013-03-22T19:14:26.303
> 
> 标签：objective-c, nsfilemanager

我四处寻找，[但](https://stackoverflow.com/questions/13897530/no-success-with-createfileatpath-no-such-process)[无济于事](https://stackoverflow.com/questions/1860070/more-detailed-error-from-createfileatpath)。

考虑：

```
- (void) write: (NSString *) xId data:(NSData *) data forClass: (Class) c {
    NSFileManager * fm = [NSFileManager defaultManager] ;

    NSString * instancePath = [self instancePath:xId forClass: c] ;

    errno = 0 ;
    BOOL success = [fm createFileAtPath: instancePath
                               contents: data
                             attributes: nil] ;
    if (!success) {
        ::NSLog(@"Couldn't write to path: %@", instancePath) ;
        ::NSLog(@"Error was code: %d - message: %s", errno, strerror(errno));
    } else {
        ::NSLog(@"COULD write to path: %@", instancePath) ;
        ::NSLog(@"Error was code: %d - message: %s", errno, strerror(errno));
    }
} 
```

然后打印：

```
2013-03-22 18:59:27.177 otest[18490:303] COULD write to path: /Users/verec/Library/Application Support/iPhone Simulator/6.1/Documents/cal/ModelRepo/ModelRepo#0.sexp
2013-03-22 18:59:27.177 otest[18490:303] Error was code: 3 - message: No such process
2013-03-22 18:59:27.178 otest[18490:303] Couldn't write to path: /Users/verec/Library/Application Support/iPhone Simulator/6.1/Documents/cal/ModelContainer/20130322.sexp
2013-03-22 18:59:27.178 otest[18490:303] Error was code: 3 - message: No such process 
```

1.  为什么 errno 不为 0，即使在第一种情况下“成功”为 YES（“可能”情况）
2.  任何人都可以发现在第一个（“可能”）情况下成功 = YES 但在第二个（“不能”）情况下成功 = NO 的实际路径中的差异吗？

这是在运行 OCUnit 测试时，Xcode 4.6.1 Simulator 运行 iOS 6.1

我只是感到困惑:-(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T19:37:23.557

*   *如果调用失败*，该`errno`变量通常仅由系统调用（和一些库函数）设置。*如果系统调用成功*，它不会被修改，并且可能包含来自先前错误的非零值。

***   `errno`系统调用失败后应立即打印或保存。在你的情况下，

    ```
    NSLog(@"Couldn't write to path: %@", instancePath); 
    ```

    实际上修改了errno。（“没有这样的过程”不太可能是正确的失败原因。）

    *   出于同样的原因，您不能假设在失败`errno`后包含正确的值。`createFileAtPath`它实际上在我的测试中做了，但没有记录该方法`errno`正确设置/保存。**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-06T19:15:47.083

我写这个答案是为了用代码块更详细地解决 verec 的错误代码。他实际上在对已接受答案的评论中提到了这一点。

他得到的错误`createFileAtPath`是`3 (ESRCH) - No Such Process`

可能出现这种情况的一个原因是它`createFileAtPath`不会创建中间目录，因此如果通往您要创建的路径的目录不存在，它将失败并显示此错误代码。

相反，您必须`createDirectoryAtPath:withIntermediateDirectories:attributes:error:`先创建目录，然后`createFileAtPath`在成功创建目录后使用。

```
NSString *fileParentFolderPath;
NSString *filePath;

//first create the directory, createFileAtPath can't create intermediate dirs
NSError *error;
if([[NSFileManager defaultManager] createDirectoryAtPath:fileParentFolderPath
        withIntermediateDirectories:YES attributes:nil error:&error]) {
    //then create the file
    if(![[NSFileManager defaultManager] createFileAtPath:filePath 
            contents:nil attributes:nil]) {
        NSLog(@"Faliure creating File error was code: %d - message: %s", errno, strerror(errno));
    };
} else {
    NSLog(@"Faliure creating dir w error: %@", error);
}; 
```**

# cakephp - 在 cakephp 1.2 中使用 ckeditor 时随机注销

> ID：15578185
> 
> 赞同：9
> 
> 时间：2013-03-22T19:14:53.370
> 
> 标签：cakephp, ckeditor, cakephp-1.2

我在生产中有一个旧的 cakephp-1.2 应用程序。该系统有一个屏幕，可以使用 ckeditor 3.2 编辑 html 内容。问题是，几乎每次我尝试编辑一些 html 内容时，我在提交表单时都会注销，发生这种情况时内容不会被保存。

有趣的是，我去编辑一些 html 内容并且在 ckeditor 中根本不做任何更改然后点击提交有时我被注销了，有时它按预期工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-24T08:45:12.710

在清理整个代码并确保没有任何不必要的空格或未使用的方法（例如调试或 php 关闭标记）之前，我遇到了同样的问题。你能检查所有你的`Model.php`并删除所有 php 关闭标签吗？希望它也能解决你的问题。它对我很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T06:57:55.760

我真的对CakePHP一无所知，但是您是否已经尝试在导致注销的帖子中填写这些值..

```
["CAKEPHP"]=>
string(26) "xxx"
["__utma"]=>
string(54) "xxx"
["__utmb"]=>
string(26) "xxx"
["__utmc"]=>
string(9) "xxx"
["__utmz"]=>
string(70) "xxx.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)" 
```

因为这是两个帖子之间的唯一区别。现在我想你会告诉我你不知道如何设置它们。但如果我是对的，这就是你正在处理的会话？

问题？：这两个帖子来自不同的页面？如果是这样，这两页有什么区别？您是否在两个页面上都启用了会话？

可能的解决方案：无论如何看看这个页面，什么描述了重定向问题的解决方案。我真的不认为它与CKEditor有任何关系。或者CKEditor是否返回上述发布的数据？这个网址也可以帮助你：[Stackoverflow Topic](https://stackoverflow.com/a/14404303/1364241)

# caching - 写组合：避免在写入之前读取哪个缓存行？

> ID：15578186
> 
> 赞同：3
> 
> 时间：2013-03-22T19:14:55.523
> 
> 标签：caching, memory, x86-64, intrinsics

关于非时间写入和写入组合技术，我有以下代码

```
void setbytes(char *p, int c)
{
__m128i i = _mm_set_epi8(c, c, c, c,
c, c, c, c,
c, c, c, c,
c, c, c, c);
_mm_stream_si128((__m128i *)&p[0], i);
_mm_stream_si128((__m128i *)&p[16], i);
_mm_stream_si128((__m128i *)&p[32], i);
_mm_stream_si128((__m128i *)&p[48], i);
} 
```

取自[这里](http://www.akkadia.org/drepper/cpumemory.pdf)

上面写着

> 总而言之，这个代码序列不仅避免了在写入之前读取缓存行，还避免了可能很快不需要的数据污染缓存。在某些情况下，这可以带来巨大的好处。

我的问题是：避免写入哪个缓存行？存储 i 变量内容的缓存行还是 p 指针指向的缓存行（之后会被修改）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T05:36:53.550

关于：“避免在写入之前读取缓存行”

该语句引用了用于处理未命中缓存的写入的“写入分配”策略。所有现代 x86 处理器都这样做。它是这样的：软件使用普通的 mov 指令写入内存。如果该地址已被缓存，则更新缓存并且根本没有 DRAM 访问。但是，如果数据不在高速缓存中，则处理器会从 DRAM 中读取该高速缓存行。然后将来自 mov 指令的数据合并到缓存中的数据中。处理器将尽可能长时间地推迟将该数据写回 DRAM。最终结果是违反直觉的：软件执行写入 (mov) 指令，并产生单个 DRAM 读取（突发）结果。如果这种模式重复，缓存最终会变满，需要驱逐来为读取腾出空间。在这种情况下，将有一个不相关的高速缓存行地址的 DRAM 写入突发，随后是软件正在写入的地址的读取。这解释了为什么非临时存储在填充大缓冲区时提供大约 2 倍的性能。与使用 mov 填充缓冲区相比，DRAM 访问次数只有一半。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T20:07:55.000

如果目标地址不在缓存中，则流式处理可以防止对缓存的污染，否则它只是根据需要使用写入该缓存行支持的地址的新值来更新缓存。

所以在你的例子中，如果你没有从缓存中读取`p`（或者你已经从缓存中刷新它`CLFLUSH`），流存储将阻止数据被写入到`p`被加载到缓存中的点的位置，以获取指向的地址`p`（即：否将为写入的地址创建缓存线）。

# groovy - neo4j 通过 groovy 连接

> ID：15578187
> 
> 赞同：1
> 
> 时间：2013-03-22T19:15:00.583
> 
> 标签：groovy, ssh, neo4j

尝试连接到我通过 ssh 连接到的服务器（Linux 服务器）上的 Neo4j 实例。我已经添加了我所有的 jar 文件并拥有此代码

```
GraphDatabaseService graphDb;
Node firstNode;
Node secondNode;
Relationship relationship;
graphDb = new GraphDatabaseFactory().newEmbeddedDatabase( DB_PATH ); 
```

但是，由于数据库的实例不在我运行的同一台机器上，我不知道用什么替换`DB_PATH`。
我的数据库 webadmin 在 10.7.19.73:7474/webadmin/ 运行，我正在进入`10.9.19.73`

我的 neo4j 文件夹的路径是有`/tmp/neo4j/` 什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T10:34:06.133

为了连接到远程 Neo4j 实例，您需要使用[https://github.com/neo4j/java-rest-binding](https://github.com/neo4j/java-rest-binding)。

使用 groovy 时，我强烈建议使用`@Grab`注解来管理依赖项并创建一个自包含的脚本，请参阅[http://groovy.codehaus.org/Grape](http://groovy.codehaus.org/Grape)

举个例子：

```
@Grab(group="org.neo4j", module="neo4j-rest-graphdb", version="1.9.M04")
import org.neo4j.rest.graphdb.RestGraphDatabase

def db = new RestGraphDatabase("http://localhost:7474/db/data")
def node = db.getNodeById(0)
println node
db.shutdown() 
```

# etl - Pentaho Spoon 中的值输入

> ID：15578188
> 
> 赞同：0
> 
> 时间：2013-03-22T19:15:00.877
> 
> 标签：etl, pentaho, kettle

我正在使用 Spoon 进行转换。我有一个带有此查询的输入表：

```
select id, idOrder, date from TBL1 where date='2013-03-20'; 
```

我想`idOrder`从输入中手动给出一个值。例如`idOrder = 405`

我看到“获取系统信息”，但它只有日期。

如何为“表格输入”提供变量输入？

也许我可以说：

```
select ?, idOrder, date from TBL1 where date='2013-03-20'; 
```

但是我怎样才能为`?`占位符提供一个值呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T14:11:48.967

看看[http://wiki.pentaho.com/display/EAI/Table+Input](http://wiki.pentaho.com/display/EAI/Table+Input)。您需要查看有关在查询/脚本中替换变量的信息。语法很容易使用，比如

```
select id, ${id_order_variable} as idOrder, date from TBL1 where date='2013-03-20' 
```

# javascript - d3 从图表中删除十进制值

> ID：15578189
> 
> 赞同：0
> 
> 时间：2013-03-22T19:15:04.000
> 
> 标签：javascript, d3.js

我的 d3 图表在某些缩放级别下放入 0 和 1 之间的中间值 0 和 1 实际上是我的数据集的一部分，因此我可以使用访问器控制它们在我的 yAxis 参数中的外观`tickFormat`。

[![](../Images/622548bd44b79cc167a23dea9a5d2477.png)](https://i.stack.imgur.com/20JgL.png)

我不希望 d3 显示它创建的中间十进制值。

由于 d3 是凭空创建它们，我不能简单地这样做`tickFormat(d3.format(", .0f")`，因为这只会从我的数据集中的元素中删除小数。

如果它们是十进制值，如何删除 d3 生成的假值？在更远的缩放级别，我确实希望看到中间值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T19:25:27.400

[来自https://github.com/mbostock/d3/wiki/SVG-Axes](https://github.com/mbostock/d3/wiki/SVG-Axes)的两件事可能会有所帮助：

```
# axis.ticks([arguments…]) 
```

获取或设置传递给底层刻度刻度函数的参数。指定的*参数*被传递给 scale.ticks 以计算刻度值。对于定量刻度，请指定所需的滴答计数，例如`axis.ticks(20)`.

**这暗示了要使用的刻度数（尽管它并不总是听你的），但可以在你放大时减少混乱。**

或者：

```
# axis.tickValues([values]) 
```

获取或设置显式刻度值。如果指定了数组*值*，则这些值用于生成刻度，而不是使用刻度的刻度生成器。如果*values*为 null，则清除任何先前设置的显式刻度值，恢复为刻度的刻度生成器。如果未指定值，则返回当前设置的刻度值（如果有）*。*例如，要生成特定值的刻度：

```
var xAxis = d3.svg.axis()
    .scale(x)
    .tickValues([1, 2, 3, 5, 8, 13, 21]); 
```

**这会显式设置刻度，因此您可以将它们设置为`[0, 1]`，尽管当用户缩小时您必须手动修复它们。也许您可以只计算缩放范围内的整数等。**

# c# - 以编程方式访问 WCF 性能计数器

> ID：15578190
> 
> 赞同：0
> 
> 时间：2013-03-22T19:15:04.110
> 
> 标签：c#, .net, wcf, performancecounter

因此，我看到了很多关于使用 PerfMon 等在启用 WCF 性能计数器后查看它们的帖子。

我正在研究如何每隔一段时间以编程方式访问端点、服务和操作性能计数器，并将其打印在我自己的自定义文件中。

所以首先，我需要将以下内容放在我的 Wcf 配置文件中以启用性能计数器

```
<configuration>
<system.serviceModel>
    <diagnostics performanceCounters="All" />
</system.serviceModel> 
```

因此，例如，如果我只想从端点性能计数器了解一般呼叫持续时间，我正在考虑获取呼叫持续时间性能计数器的所有实例并获得该持续时间值的平均值。

我正在考虑执行以下操作：使用：

```
PerformanceCounterCategory.GetCategories() 
```

并找到我正在寻找的类别。所以我会寻找 ServiceModelEndpoint 类别。然后我会用

```
GetCounters("Calls Duration") 
```

检索计数器的所有实例，以便我可以循环并获取平均呼叫持续时间值。

请记住，这是我第一次涉足性能计数器，我上面提到的是我想到的用于检索我正在寻找的值的伪代码。对于在这方面知识渊博的人来说，上面的算法是否是访问我需要的计数器的有效/好方法，你是否预见到任何复杂性会阻止我让伪代码工作？如果您对我可以实现我正在寻找的其他方式有任何建议，请随时告诉我：D

谢谢你的时间！

# javascript - 如何将 Perl 变量传递给 Javascript 函数？

> ID：15578194
> 
> 赞同：3
> 
> 时间：2013-03-22T19:15:33.367
> 
> 标签：javascript, perl

我有一个从 html 页面打印出来的 Perl 脚本。我想使用 javascript 来弹出警报消息。警报消息在 perl 变量中定义为字符串。我正在尝试将 perl 变量值作为参数传递给 javascript 函数，但它不起作用。请帮忙。

```
$perl_variable = "Welcome"; # alert msg

print <<START

<HTML>

some html code....

<p>Click the button to wait 3 seconds, then alert "Hello".</p>

<button onclick="myFunction('$perl_variable')">Try it</button>

<script>

function myFunction(var message){

setTimeout(function(){alert(message)},3000);

}

</script>

</HTML>

START 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T19:18:05.993

注意：这个答案的前半部分是指最初（编辑之前）出现在问题中的代码。

你需要：

1.  使用正确的变量名
2.  生成 JavaScript 字符串文字（通过引用数据）

这样的：

```
myFunction('$perl_variable') 
```

请注意，如果您的数据可能包含 JavaScript 字符串文字中不允许的字符（例如换行符）、字符串文字中具有特殊含义的字符（例如分隔它的引号）或具有特殊含义的字符在 HTML 中（例如分隔属性值的引号），那么您还需要执行适当的转义（分两步，首先用于 JS，然后用于 HTML）。

* * *

~~作为旁白，~~您在 JS 中的函数定义也是错误的：

```
function myFunction(var path){ 
```

`var`关键字不能在 FormalParameterList 中使用。那应该是：

```
function myFunction(path){ 
```

# java - 不能在不同的类中使用值

> ID：15578197
> 
> 赞同：0
> 
> 时间：2013-03-22T19:15:43.573
> 
> 标签：java, coordinate

我知道如何将价值从一个类别转移到另一个类别。只是在这里它不起作用。我不明白为什么。

请帮我找到一个错误。

当我试图获得价值时：

```
 c = new CartesianCoordinate(x, y);
 x = c.getX(); 
```

它始终为零。

```
public class Velocity
{
    // instance variables - replace the example below with your own
    private double x;
    private double y;
    /**
     * Constructor for objects of class Velocity
     */
    public Velocity(CartesianCoordinate c)
    {
        // initialise instance variables
        c = new CartesianCoordinate(x,y);
        x = c.getX();
        System.out.println(c.getX());
        System.out.println(c.getY());
        System.out.println(c.x);

     }

    public double getX()
    {
        return x;
    } 
```

这是我的笛卡尔坐标：

```
 public class CartesianCoordinate
    {
       // instance variables - replace the example below with your own
       public double x;
       public double y;

       /**
        * Constructor for objects of class CartesianCoordinate
        */
       public CartesianCoordinate(double x, double y)
       {
           // initialise instance variables
           this.x = x;
           this.y = y;
       }

    public void setX(double x)
    {
        // put your code here
        this.x = x;
    }

    public void setY(double y)
    {
        this.y = y;
    }

    public double getX()
    {
        return x;
    }

    public double getY()
    {
        return y;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T19:20:18.137

```
public Velocity(CartesianCoordinate c)
{
    // initialise instance variables
    c = new CartesianCoordinate(x,y);   // 1
    x = c.getX();                       // 2
    System.out.println(c.getX());       // 3
    System.out.println(c.getY());       // 4
    System.out.println(c.x);            // 5
 } 
```

在第 1 行，您隐藏了正在传递的参数。这意味着你正在用一个用and初始化`c`的全新的值“覆盖” ，此时它们都是 0 （因为你还没有初始化双精度数）。`CartesianCoordinate``x``y`

`x`如果您删除第 1 行，您至少会`CartesianCoordinate`通过它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T19:20:32.787

`c = new CartesianCoordinate(x,y);` 此构造函数调用为成员变量和类分配`x = 0`和。这是因为在类中并提供了默认值，因为您从未更改过它。所以你得到了`y = 0``x``y``CartesianCoordinate``Velocity``x``y``0``0``c.getX()``c.getY()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T19:22:00.937

只需删除

c = 新笛卡尔坐标（x，y）；

从速度构造函数

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T19:22:55.153

在以下行中：

```
c = new CartesianCoordinate(x,y); 
```

`Velocity`您正在使用实例私有字段`x`和的值创建一个新实例，`y`默认情况下它们设置为 0。

顺便说一句，将`CartesianCoordinate`实例作为构造函数参数传递，然后在构造函数本身内部重新初始化它是没有意义的。要么传递`x`和之`y`类的值`public Velocity(int x, int y)`，要么只分配坐标。

将来，您会想了解[`Point2D`](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/geom/Point2D.html)课程。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T19:27:09.053

x,y 变量尚未初始化，因此您总是收到 0

# c# - 创建实现两个通用接口的通用基类？

> ID：15578201
> 
> 赞同：1
> 
> 时间：2013-03-22T19:15:49.547
> 
> 标签：c#, architecture

有没有办法创建一个实现以下两个通用接口的基类？然后，这个基类将被“其他”类继承，这些类可以从两个接口中的任何一个调用方法。

```
public interface IGenericRepositoryOne<E> where E : Entity
{
    void Save(E entity);
    void Save(List<E> entityList);
    E Load(Guid entityId);
}

public interface IGenericRepositoryTwo<D, E> where E : Entity
{
    void Save(D dto);
    void Save(List<D> entityList);
    D Load(Guid entityId);
} 
```

现在我们有两个独立的存储库，分别实现每个接口：

```
public abstract class RepositoryOne<D, E> : IGenericRepositoryOne<D, E> where E : Entity {...}

public abstract class RepositoryTWO<E> : IGenericRepositoryTwo<E> where E : Entity {...} 
```

然后有些类需要继承`RepositoryOne`or `RepositoryTwo`。正是在这些课程中，我希望做一些分解，例如：

```
public class MessageDataTypeRepository : RepositoryTwo<MyEntityType>
{
    // here when I call the method Load() I want it for RepositoryOne implementation.
}

public class MessageDataTypeRepository : RepositoryOne<MyDTOType, MyEntityType>
{
    // here when I call the method Load() I want it for the RepositoryTwo implementation.
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T19:20:23.083

您可以实现这两个接口，并使用[显式接口实现](http://msdn.microsoft.com/en-us/library/aa288461%28v=vs.71%29.aspx)来实现一个或两个。如果需要，这允许您对每个接口有不同的实现。

如果这不是必需的，那么简单地实现两者应该很简单，因为就一种泛型类型而言，两个接口实际上是相同的：

```
public class Repository<D,E> : IGenericRepositoryOne<D>, IGenericRepositoryTwo<D,E> 
    where D : Entity
    where E : Entity
{
    void Save(D dto) {}
    void Save(List<D> entityList) {}
    D Load(Guid entityId)
    {
          // Implement...
    }
} 
```

* * *

编辑：

针对您编辑的问题和您的实际目标 -

这里的一种选择是不使用继承，而是使用组合。通过使用组合，您可以使您的“通用存储库”类公开一个单一的、有意义的接口，并在内部构建适当的存储库。然后它可以根据需要将这些方法映射到适当的存储库。这将使您的存储库有效地成为[适配器模式](http://en.wikipedia.org/wiki/Adapter_pattern)的实现，以使用通用接口包装任一存储库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T19:20:32.120

是的，这是可能的，它被称为[显式接口实现](http://msdn.microsoft.com/en-us/library/aa288461%28v=vs.71%29.aspx)

您可以使用一种方法从两个接口实现方法：

```
public void Save(D entity) { } 
```

或单独实施：

```
public void IGenericRepositoryOne.Save(D entity) { }

public void IGenericRepositoryTwo.Save(D entity) { } 
```

# matlab - 从 .mat 文件中提取数据

> ID：15578210
> 
> 赞同：0
> 
> 时间：2013-03-22T19:16:57.503
> 
> 标签：matlab, extract, mat-file, matlab-load

我有一个 .mat 文件，其中包含 4 个变量。每个变量 (A,B,C,D) 是一个读取 <59145x1 double> 的单元格。我知道每个变量中有 59145x1 个数组，但不知道如何访问它们，我只能在每个变量中看到这个单元格。

任何人都可以帮忙吗？

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:20:32.513

使用 load 函数将变量数据加载到 MATLAB 中。试试看`help load`详情。

现在您只需要使用该`cell2mat`函数来“访问”变量。例如：

```
>> a{1}=[1,2,3,4]

a = 

    [1x4 double]

>> cell2mat(a)

ans =

     1     2     3     4 
```

# xml - 如何从 XSL 转换中获得唯一值？

> ID：15578211
> 
> 赞同：2
> 
> 时间：2013-03-22T19:17:02.090
> 
> 标签：xml, xpath, xslt

我有以下 XML 文件：

```
<document xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="cars.xsd">
<manufacture id="1">
    <make>Audi</make>
    <classification>
        <list mid="1">
            <type>Sports</type>
        </list>     
        <list  mid="2">
            <type>Compact</type>
        </list>     
        <list  mid="3">
            <type>Compact</type>
        </list> 
    </classification>
</manufacture>
<manufacture id="2">
    <make>bmw</make>
    <classification>
        <list mid="1">
            <type>Sports</type>
        </list>     
        <list  mid="2">
            <type>Luxury</type>
        </list> 
        <list  mid="3">
            <type>Luxury</type>
        </list>                 
    </classification>
</manufacture>
</document> 
```

这是我当前的 XSL 代码：

```
<?xml version="1.0" encoding="ISO-8859-1"?>

<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

 <xsl:output doctype-public="-//WAPFORUM//DTD XHTML Mobile 1.0//EN" 
            doctype-system="http://www.wapforum.org/DTD/xhtml-mobile10.dtd"
 method="xml" version="1.0" 
            omit-xml-declaration="yes" 
            indent="yes" encoding="UTF-8" media-type="text/html"/>

<xsl:template match="/">
<xsl:element name="html">
<xsl:element name="head">           
    <xsl:element name="title">Automotives</xsl:element>
</xsl:element>

<xsl:element name="body">                    
<xsl:element name="ul">
<xsl:attribute name="class">pageitem</xsl:attribute>                    
    <xsl:for-each select="document/manufacture/classification/list">        
        <xsl:element name="li">
        <xsl:attribute name="class">menu</xsl:attribute>        
            <xsl:element name="p">
            <xsl:attribute name="class">name</xsl:attribute>
              <xsl:element name="a">                                
                    <xsl:value-of select="type"/>
                    <xsl:element name="br"/>    
                </xsl:element>      
            </xsl:element>
        </xsl:element>                    
    </xsl:for-each>
</xsl:element>      
</xsl:element>  
</xsl:element>
</xsl:template>
</xsl:stylesheet> 
```

如何在不重复类型的情况下获得以下输出？

```
Sports
Compact 
Luxury 
```

我是 XSLT 的新手，我尝试过使用 generate-id()，如下所示：[从重复的 XML 信息中选择一次，显示其余部分，并在字段上排序](https://stackoverflow.com/questions/4167486/select-once-from-duplicate-xml-info-display-rest-and-sort-on-a-field)

但它对我不起作用，因为我无法理解 generate-id() 代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T20:12:02.740

您提到了 generate-id，这意味着您可能已经在此处阅读了有关[Muenchian Grouping](http://www.jenitennison.com/xslt/grouping/muenchian.html)的信息，而这确实是您获得不同值所需要的。由于您对**类型**元素感兴趣，因此您开始定义一个键，以便通过它们的值轻松查找这些元素。

```
<xsl:key name="types" match="type" use="." /> 
```

现在，要获得不同的元素，您需要遍历所有**类型**元素，但您只输出不同的元素。为了告诉它们是不同的，您检查它们是否首先出现在给定值的键中。

这是表达式...

```
<xsl:apply-templates select="//type[generate-id() = generate-id(key('types', .)[1])]" /> 
```

但是要把它分解成它的主要部分......

`key('types', .)`- 返回当前值的所有**类型元素**

`key('types', .)[1]`- 返回键中的第一个元素

`generate-id(key('types', .)[1])`- 返回该元素的唯一标识符

`generate-id() = generate-id(key('types', .)[1])`- 检查当前元素的唯一标识符是否等于键中第一个元素的唯一标识符。

因此，如果它们匹配，则它是第一次出现，并且可以输出。

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="text" />
   <xsl:key name="types" match="type" use="." />

   <xsl:template match="/">
      <xsl:apply-templates select="//type[generate-id() = generate-id(key('types', .)[1])]" />
   </xsl:template>

    <xsl:template match="type">
      <xsl:value-of select="concat(., '&#10;')" />
   </xsl:template>
</xsl:stylesheet> 
```

当应用于您的 XML 时，将输出以下内容

```
Sports
Compact
Luxury 
```

# r - 在 quantmod 中更新历史价格

> ID：15578213
> 
> 赞同：3
> 
> 时间：2013-03-22T19:17:07.597
> 
> 标签：r, xts, quantmod

Quantmod 的 getSymbols() 获取截至昨天收盘的历史价格。我在早上进行分析，并想用当前报价更新系列（我只使用调整后的价格）。我似乎无法让它工作。当我使用此代码时：

```
getSymbols('AGNC')
q <- getQuote('AGNC')
d <- Sys.Date()
qq<- q$Last
x <- zoo(qq,d)
t <- rbind.zoo(Ad(AGNC), x)
print(tail(t)) 
```

打印出来没问题，但是当我尝试做进一步的事情时，比如：

```
dum <- dailyReturn(t) 
```

我收到以下错误：

`colnames<-`( , value = "daily.returns")中的错误`*tmp*`：尝试在小于二维的对象上设置 colnames

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T20:40:41.500

```
library(quantmod)
getSymbols('AGNC')
q <- getQuote('AGNC')
d <- Sys.Date()
qq<- q$Last
x <- xts(qq,d)
t <- rbind(Ad(AGNC), x)
print(tail(t))
dailyReturn(t) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T06:41:55.697

这是更新符号的另一种方法：

```
require(quantmod)
getSymbols('AGNC')

q <- getQuote('AGNC')
row.names(q)<- trunc(q[,"Trade Time"], units="days")
q <- q[,c("Open","High","Low","Last","Volume","Last")]
names(q) <- c("Open","High","Low","Close","Volume","Adjusted")
AGNC <- merge(AGNC,q,by="Date")
print(last(AGNC))
dailyReturn(AGNC) 
```

# sql - SQL：更新所有选定的行

> ID：15578223
> 
> 赞同：0
> 
> 时间：2013-03-22T19:17:53.793
> 
> 标签：sql, sql-server, select, sql-update

在下面的代码中。一次只会执行一个“选择”语句。我希望能够更新任何选定行的“状态”并返回数据。这基本上可以防止在后端处理期间获取相同的记录。

谢谢！

```
-- Insert statements for procedure here
if(@BatchSize > -1 and @Priority > -1)
begin
    Select TOP(@BatchSize) *,ID 
    From CompingQueue 
    Where PriorityLevel=@Priority 
       and Status=35 
    order by PriorityLevel asc;
end
if(@BatchSize = -1 and @Priority = -1)
begin
    Select * From CompingQueue 
    Where Status=35 
    order by PriorityLevel asc;
end

if(@BatchSize = -1 and @Priority > -1)
begin
   Select * From CompingQueue 
   WHEre PriorityLevel=@Priority 
     and Status=35     
   order by PriorityLevel asc;
end
if(@BatchSize > -1 and @Priority = -1)
begin
    Select TOP(@BatchSize) * 
    From CompingQueue 
    Where Status=35 
    order by PriorityLevel asc;
end
--update CompingQueue set Status = 2 where ID=
-- Set the Status Flag for each job 
```

结尾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:26:02.357

我会使用 DECLARE @tblResults TABLE (...)。将 SELECT 行插入到表变量中。从源表到 PK 上的表变量执行连接，将此连接用作 UPDATE 语句中的子句，然后将变量作为 query/proc/func 结果返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T19:29:51.797

一种选择是仅`UPDATE`表并用于[`OUTPUT`](http://msdn.microsoft.com/en-us/library/ms177564%28v=sql.110%29.aspx)将更新的行存储在表变量中。然后，您可以`SELECT`进一步处理表变量中的数据。

[文档](http://msdn.microsoft.com/en-us/library/ms177523.aspx)中有一个示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T19:41:28.723

像这样一次性完成它们怎么样：

```
Declare @NumRecs int
if @BatchSize > -1 Set @NumRecs = @BatchSize 
else Select @NumRecs = Count(*) From CompingQueue 
-- --------------------------
Declare @Ids table (id int primary key not null)
Insert @Ids(id)
Select top(@numRecs) id 
From CompingQueue 
Where Status=35 
   And PriorityLevel = Case 
      When @Priority > -1 Then @Priority 
      Else PriorityLevel End
Order by PriorityLevel asc;

 Select * From CompingQueue 
 Where Id In (Select id from @Ids);

 Update CompingQueue Set
    status = 2
 Where Id In (Select id from @Ids); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T19:36:16.213

你想要这个`OUTPUT`子句。

[http://msdn.microsoft.com/en-us/library/ms177564.aspx](http://msdn.microsoft.com/en-us/library/ms177564.aspx)

听起来你想要类似的东西

```
UPDATE c
SET somestuff = something
OUTPUT DELETED.*
FROM CompingQueue c
WHERE someotherstuff 
```

或者，如果您想要更新后数据，请使用`INSERTED.*`而不是`DELETED.*`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T21:05:57.880

SQL CTE 将为您的案例提供帮助。您正试图避免并发问题，因为多个进程可能会更新相同的记录。在您的查询中，您拥有最高批次，因此直接更新...输出可能不是最佳选择。**CTE + xlock,rowlock**会是更好的选择

```
 ;with Update_batch 
as 
(
  select top 10 * from compingqueue With (xlock, rowlock)
  order by PriorityLevel desc
)
update Update_batch
set ....=.... 
```

You can treat CTE as on-fly view, with **(xlock, rowlock)** , when rows are selected, an **(xlock, rowlock)** will be put on the row, which will make sure other processes could not even get the same rows.

# blackberry - 在 BlackBerry 上可视化实时 AMR 音频

> ID：15578231
> 
> 赞同：1
> 
> 时间：2013-03-22T19:18:36.600
> 
> 标签：blackberry, java-me, amr

我有代码可以很好地录制音频。我想在录制时添加一些音频的可视化，比如波形，或者只是一个普通的温度计风格的可视化，这样用户就知道正在录制一些东西。我还没有找到任何可以查询的侦听器或方法来获取录制音频的当前音量。我现在的想法是我可以解析 AMR 字节流并尝试直接将其可视化，但是该功能的复杂性令人望而却步，因此我希望有一个更直接的 API 可以使用。或者，如果您了解 Java-ME amr 解析代码，那也很有用 - 我承认我还没有在 AMR 方面做太多研究，因为我希望有一种更直接的方法来测量当前音频音量级别。

```
_player = javax.microedition.media.Manager.createPlayer(
        "capture://audio?encoding=amr");
_player.realize();
_rcontrol = (RecordControl)_player.getControl("RecordControl");
_rcontrol.setRecordStream(_audioBuf);
_rcontrol.setRecordSizeLimit(200 * 1024);
_rcontrol.startRecord();
_player.start(); 
```

# cocoa - 多人热座回合制棋盘游戏的通用 OOP 范例

> ID：15578233
> 
> 赞同：0
> 
> 时间：2013-03-22T19:18:39.953
> 
> 标签：cocoa, oop, object

所以我正在开发一个非常基本的回合制棋盘游戏，并且我正在尝试找出构建它的最佳方式。我已经重组了 3 次。这是一个适用于 mac 的可可项目。

游戏开始时每个玩家有 5000 美元，并且有能力购买 6 种不同的股票。每回合开始时玩家掷 3 个骰子，这决定了股票的价值如何变化以及从股息中赚到多少钱（如果有的话）。游戏在游戏开始前设置的计时器用完时结束。

我正在对其进行编程，并且我意识到我正在处理的方式可能对......好吧，任何事情都没有好处。:) 去菜鸟！

我试图坚持整个 mvc 范式，所以我的骰子角色生成器是我的模型，控制器与界面交互。我觉得我对 mvc 有很好的掌握。

我的应用程序委托调用与我的“stockwindowcontroller”类交互的主xib，该类有点控制其他一切。玩家窗口（我还没有这样做）会向玩家展示他的资产，并让他有机会买卖。如果我使用我现在拥有的东西，我必须将它放在 stockwindowcontroller 类下。

我在想也许每个回合都是它自己的对象，因为有时会有 50 个回合。所以一切都来自转弯对象。那将意味着重新做所有事情，我想确保我不会再叫错树了。我从来都不擅长概念化 OOP 思维，如果这非常明显，请原谅我。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T21:15:10.150

在做 mvc 时，我通常从命令行视图开始，然后添加东西直到事情稳定下来。然后添加gui的东西。始终保留命令行视图和控制器，因为它们对测试非常有用。

尝试从这样的事情开始：

编辑：重构代码，以便观察者在玩家资金发生变化或破产时得到通知。

```
import java.util.*;
class DiceRoller {
    DiceRoller(final int sides) {
        this(1,sides);
    }
    DiceRoller(final int dice,final int sides) {
        this.sides=sides;
        this.dice=dice;
    }
    int roll() {
        int sum=0;
        for(int i=0;i<dice;i++)
            sum+=random.nextInt(sides)+1;
        return sum;
    }
    final Random random=new Random();
    final int dice;
    final int sides;
}
class Stock {
    Stock(int price) {
        this.price=price;
    }
    int value;
    int dividend;
    final int id=ids++;
    final int price;
    static int ids;
    public String toString() {
        return ""+id+" "+value+" "+dividend;
    }
}
class Player {
    public void turn() {
        System.out.print("turn for player "+id);
        int die1=diceRoller.roll();
        System.out.print(", he rolls "+die1);
        money+=die1-5; // real simple for now
        System.out.println(", he has "+money);
    }
    public String toString() {
        String s=""+id+" $"+money;
        if(stocks.size()>0)
            s+=" stocks";
        for(Stock stock:stocks.keySet())
            s+=" "+stock+" "+stocks.get(stock);
        return s;
    }
    Map<Stock,Integer> stocks=new LinkedHashMap<Stock,Integer>();
    int money=10;
    final int id=ids++;
    DiceRoller diceRoller=new DiceRoller(6);
    static int ids;
}
class Model extends Observable {
    void init(int stocks,int players) {
        for(int i=0;i<stocks;i++)
            this.stocks.add(new Stock(random.nextInt(10)+1));
        for(int i=0;i<players;i++)
            this.players.add(new Player());
        setChanged();
    }
    void turn(Player player) {
        player.turn();
        setChanged();
        notifyObservers();
    }
    void busted(List<Player> busted) {
        if(busted.size()>0) {
            players.removeAll(busted);
            setChanged();
            notifyObservers();
        }
    }
    public String toString() {
        String s="";
        for(Stock stock:stocks)
            s+="stock "+stock+"\n";
        for(Player player:players)
            s+="player "+player+"\n";
        s=s.substring(0,s.length()-1); // removed last line feed
        return s;
    }
    Random random=new Random();
    final List<Stock> stocks=new ArrayList<Stock>();
    final List<Player> players=new ArrayList<Player>();
}
class CommandLineView implements Observer {
    @Override public void update(Observable observable,Object hint) {
        if(observable instanceof Model)
            display((Model)observable);
        else throw new RuntimeException("oops");
    }
    void display(Model model) {
        System.out.println("[update: "+model);
        System.out.println("end of update]");
    }
}
class Game {
    Game() {
        model=new Model();
        view=new CommandLineView();
        model.addObserver(view);
        model.init(4,3);
        model.notifyObservers();
    }
    void run() {
        for(round=0;model.players.size()>1;round++) {
            System.out.println("round "+round);
            for(Player player:model.players)
                model.turn(player);
            List<Player> busted=new ArrayList<Player>();
            for(Player player:model.players)
                if(player.money<=0) {
                    System.out.println("player "+player.id+" busted out.");
                    busted.add(player);
                }
            model.busted(busted);
            if(round>10) {
                System.out.println("breaking out");
                break;
            }
        }
        if(model.players.size()==1)
            System.out.println("the winner is "+model.players.get(0));
    }
    final Model model;
    Observer view;
    int player;
    int round;
}
public class So15578233 {
    void run() {
        game=new Game();
        game.run();
    }
    public static void main(String[] args) {
        new So15578233().run();
    }
    Game game;
} 
```

# android - 在 adb logcat 中过滤应用程序特定的日志。（日志标签、日志消息、pid、包名）

> ID：15578237
> 
> 赞同：5
> 
> 时间：2013-03-22T19:18:56.063
> 
> 标签：android, adb, logcat, pid, android-logcat

我正在使用以下命令使用 logcat：

```
C:\abs\adb logcat >> "Testdata".txt 
```

这是收集设备上发生的所有日志。

但是我只想获取“特定于应用程序”的日志，有人可以帮我吗？

我知道我们可以在 DDMS 中创建过滤器，但是这些过滤器值会在一段时间后删除，我想使用 adb 来获取它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T19:31:25.047

试试这个： adb logcat -s "YOURTAG" >> "Testdata".txt

# c# - 这个循环可以写得更简洁吗？

> ID：15578239
> 
> 赞同：4
> 
> 时间：2013-03-22T19:18:56.517
> 
> 标签：c#

我有两个[队列](http://msdn.microsoft.com/en-us/library/7977ey2c.aspx)，比如说 A 和 B，我在它们上执行以下算法：

```
while (queueA.Count > 0)
{
    var elemA = queueA.Peek();
    var elemB = queueB.Peek();
    if (AreSimilar(elemA, elemB))
    {
        Debug.Assert(elemA.SomeProperty == elemB.SomeProperty);
        queueA.Dequeue();
        queueB.Dequeue();
    }
    else
    {
        break;
    }    
} 
```

有人告诉我这可以写得更简洁；Peek() 和 Dequeue() 可以组合在一个操作中，因为 Dequeue() 返回与 Peek() 相同的元素，并且 if 语句可能与 while 语句融合，避免显式中断。我只是没有看到如何准确地保留相同的行为，即我不想删除一个元素，除非它满足“if”中的条件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T19:24:37.273

您可以尝试将分配移动到调用中的这段代码`AreSimilar`：

```
QueueElement elemA, elemB
while (queueA.Count > 0 && AreSimilar(elemA = queueA.Peek(), elemB = queueB.Peek())) {
    Debug.Assert(elemA.SomeProperty == elemB.SomeProperty);
    queueA.Dequeue();
    queueB.Dequeue();
} 
```

请注意，这不一定更具可读性。事实上，您的版本在可读性方面相当不错。我唯一会做的就是反转条件以减少嵌套，但我会保留其他所有内容：

```
while (queueA.Count > 0)
{
    var elemA = queueA.Peek();
    var elemB = queueB.Peek();
    if (!AreSimilar(elemA, elemB))
    {
        break;
    }
    Debug.Assert(elemA.SomeProperty == elemB.SomeProperty);
    queueA.Dequeue();
    queueB.Dequeue();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T19:25:40.130

A 和 B 相似的可能性有多大？如果概率很高，您总是可以使用假设的常见场景运行并弹出（或出列）它们假设它们会相似，然后只需担心如果它们不相似就将它们推回......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T19:27:04.443

您可以借助方法简化循环，但您可能会认为这是作弊：

```
static bool DequeuePairIf<T>(
    Func<T, T, bool> predicate,
    Queue<T> queueA,
    Queue<T> queueB)
{
    if (queueA.Count != 0 &&
        queueB.Count != 0 &&
        predicate(queueA.Peek(), queueB.Peek())
    ) {
        queueA.Dequeue();
        queueB.Dequeue();

        return true;
    }

    return false;
} 
```

然后你的循环变成：

```
while (DequeuePairIf(AreSimilar, queueA, queueB)) { } 
```

但我质疑这种重构是否有助于提高可读性，还是会损害它。一方面，它比原始代码大得多。另一方面，较小的代码并不总是更具可读性。

（我删除了断言以简化这里的逻辑。如果您仍然需要断言，那么您将不得不保存`Peek()`调用的结果，就像您在原始代码中所做的那样。）

# vb.net - 如何使用 vb.net 代码进行 mysql 备份

> ID：15578243
> 
> 赞同：0
> 
> 时间：2013-03-22T19:19:13.867
> 
> 标签：vb.net, mysql-workbench

我想使用 vb.net 从 mysql 工作台进行备份。我正在使用 MySql Workbench 5.2 CE。下面是我的代码。

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        '        
        Process.Start("C:\Program Files\MySQL\MySQL Server 5.5\bin\mysqldump.exe", " -u root -p mypass  dbname -r ""C:\dbname.sql""")
End Sub 
```

但是在运行我的项目后，它会发出“哔”的声音，但没有创建备份...请为我提供正确的解决方案。

# codeigniter - AngularJS 资源节省和后端的 ORM 映射

> ID：15578247
> 
> 赞同：0
> 
> 时间：2013-03-22T19:19:31.213
> 
> 标签：codeigniter, orm, angularjs

所以我有一个使用 CodeIgniter 的后端，它的本机 ActiveRecord 用于管理我的基本数据对象。ActiveRecord 类添加了一些字段来帮助它确定如何关联对象（即“_class_name”、“_table”、“_columns”）。当我将这些对象发送到前端时，这些字段都包括在内。我不想要这个，所以我创建了一个清理功能，在它们被发送到前端之前取消设置它们。

现在，当我在前端时，Angular 正在管理我所有的资源，我去 $resource 上调用 $save()，它将 json 对象发送到后端。然后在后端我把这个json变成一个对象：

```
$blob = unserialize(sprintf(
   'O:%d:"%s"%s',
    strlen('Blob'),
    'Blob',
    strstr(strstr(serialize($blob), '"'), ':'))); 
```

这会将 json 对象转换为扩展 ActiveRecord 的 Blob 类。现在的问题是，由于我在将对象发送到前端之前剥离了 ActiveRecord 辅助属性......当我去后端的 update() 时，由于缺少这些属性，它显然无法正确保存它.

所以我的问题是……有什么东西可以帮助这个过程吗？我的基本目标是将最小的 Blob 类发送到前端（没有 ActiveRecord 属性），然后在保存时以某种方式执行一些后端魔术，以将准系统 Blob 类重新关联回其 ActiveRecord 版本，以便它可以保存自己。我不介意研究新的 ORM 库......

谢谢！瑞安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:40:57.897

我不确定你是如何实现这一点的。所以这里有一个例子，你将如何实现这样的东西。

```
<div class="span2" ng-controller="NewStoryCtrl">
  <h4>New Story</h4>
  <form name="newStory">
      <label for="title">Title: </label>
      <input type="text" name ="title" ng-model="news.title" required>
      <label for="text">Text: </label>
      <textarea type="text" name="text" ng-model="news.text"required></textarea>
      <button ng-click="createNews()">Submit</button>
</form> 
```

控制器.js

```
function NewStoryCtrl($scope, $http) {
$scope.news = {title:$scope.title, text:$scope.text};
$scope.createNews = function(){
    $http.post('/ci/index.php/news/create/',$scope.news);
};} 
```

新闻.php

```
public function create() {
   $data = json_decode(file_get_contents('php://input'), TRUE);
   $this->news_model->set_news($data);
} 
```

新闻模型.php

```
public function set_news($data) {
    $this->load->helper('url');
    $slug = url_title($data['title'], 'dash', TRUE);

    $retval = array(
        'title' => $data['title'],
        'slug' => $slug,
        'time' => time(),
        'text' => $data['text']
    );

    return $this->db->insert('news', $retval);
} 
```

# scala - 依赖注入和服务启动/关闭

> ID：15578249
> 
> 赞同：2
> 
> 时间：2013-03-22T19:19:34.010
> 
> 标签：scala, dependency-injection

我的应用程序中的一些软件组件需要启动和关闭活动。

**问题 1：**在 Scala 中启动和停止此类“服务”的最佳实践是什么？

我在我的应用程序中使用依赖注入 (DI)，我目前的理解是 DI*声明*了软件组件之间的依赖关系，但应该没有[副作用](http://code.google.com/p/google-guice/wiki/ModulesShouldBeFastAndSideEffectFree)（即，DI 机制不应该自行启动/停止服务）。所以 DI 与服务激活正交。

但是，似乎存在重叠：假设我的应用程序包含 a `NotificationService`，而后者又使用 a `SchedulingService`。所以我将调度服务实现注入到我的通知服务实现中，并*手动*启动和停止这些服务。但是，DI 框架手头有所有信息，可以知道哪些服务需要实例化（因此启动/停止）以及哪些取决于哪些服务（以及因此需要启动/停止服务的顺序）。因此，它可以提供启动/停止它们的方法，为我节省了一些样板代码！

**问题2：**他们是否尝试过扩展DI（例如Guice）来记录注入的服务并提供启动/停止它们的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T14:26:01.253

在问题 1 中，依赖注入策略在 Java 中已经很成熟，而且这些通常可以直接转化为 Scala。然而，我认为 Scala 可以做得更好：它的主要构造函数非常适合基于构造函数的依赖注入，通常被认为是各种方法中最不混乱的（其他方法是 setter 注入、基于注解的注入等）。

在最近的一个项目中，我们最初使用 Spring，但改为采用*少即是多*的策略，完全放弃了 Spring。

*   我们以测试驱动的 DI 面向对象的方式使用 Scala，几乎没有 XML（剩下`web.xml`的当然是 webapp 所必需的）。
*   单个`Bootstrap`类使用必要的依赖注入以正确的顺序配置所有资源和服务。
*   `Bootstrap`当然是从`web.xml`.
*   一切都进行了单元测试，*除了*，`Bootstrap`而是通过集成测试进行测试。

给定一套组件，连接几个替代配置只需要编写不同的`Bootstraps`. 纯粹在 Scala 中执行此操作会在 IDE 中带来代码透明性和重构支持的巨大好处，而且工作量相对较小。

关于问题 2，我没有具体的答案。但我可以推荐一种*少即是多*的方法；如果只是不需要框架，那么这个问题可能就不那么重要了。

# ruby - Ruby round() 正在舍入一些数字而不是其他数字

> ID：15578256
> 
> 赞同：0
> 
> 时间：2013-03-22T19:20:03.733
> 
> 标签：ruby, floating-point

我试图保留两位小数。我有这样的数字：

```
9.96999.to_f.round(2) 
```

大多数情况下，它们会四舍五入到小数点后两位 ( `9.97`)，但偶尔我会得到一个如下所示的结果：

```
9.96999999999 
```

任何想法为什么？

**编辑**

我正在从一个刮掉的表中添加两个值。查看表格，唯一发生这种情况的情况是，单元格一`9.02`的值为 ，单元格二的值为`0.95`，或者单元格一`9.87`的值为 ，单元格二的值为`0.1`。这两次我显然应该得到`9.97`。相反，我得到的正是`9.969999999999999`. 所有初始值都以字符串开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T21:10:01.913

浮点值本质上是不精确的。许多精确的十进制分数没有精确的表示。即便如此，如果您根据计算结果而不是输入来执行回合，您的回合会更好。

很可能您根本不想要圆形，而只想控制演示，在这种情况下使用[`Kernel#sprintf`](http://www.ruby-doc.org/core-2.0/Kernel.html#method-i-sprintf)or [`String#%`](http://ruby-doc.org/core-2.0/String.html#method-i-25)。

```
pry(main)> f = (9.02 + 0.95)
=> 9.969999999999999
pry(main)> '%.2f' % f
=> "9.97"
pry(main)> 9.02.round(2) + 0.95.round(2)
=> 9.969999999999999
pry(main)> f.round(2)
=> 9.97 
```

看来您对浮点表示和算术有一些基本的误解。我建议你在遇到麻烦之前阅读它。从这里开始：[每个计算机科学家都应该知道的关于浮点运算的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T19:43:24.403

可能是系统而不是Ruby处理浮点的方式。作为一个例子，在 IRB 中试试这个

```
10 - 8.2 - 1.8 #=> don't expect zero here
10 - (8.2 - 1.8) #=> same as above with a different result 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-22T19:47:22.737

不要使用 .to_f.round() 使用这个：A.round(2) -> anInteger

将 A 舍入为最接近的整数。（就如此容易）

# java - 如何创建二维列表

> ID：15578257
> 
> 赞同：1
> 
> 时间：2013-03-22T19:20:09.963
> 
> 标签：java, list, multidimensional-array, arraylist

这是我的情况。我有 8`zone`秒。将它们视为建筑物中的房间。每个`zone`人都有我不知道的相机数量。例如，zone1 可能有 6 个凸轮，zone2 可能有 3 个凸轮等。现在我需要跟踪这些`camera`区域内的这些对象。我想添加二维列表，因为它们的第一个维度可以包含，`zone`而第二个维度可以包含`camera`. 我怎样才能做到这一点？

无论如何，如果您觉得有更好的方法，请告诉我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:23:14.430

使用 HashMap，其中键是区域，值是相机列表。

[http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T19:23:16.797

您可以创建一个s 的[HashMap](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)，`List`键为`Zone`。

`HashMap<Zone, List<Camera>>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T19:23:54.230

为什么不拥有一个包含多个摄像机的类区域作为成员？

```
public class Zone {

    private int numOfCameras;

    public Zone(int numOfCameras) {
        this.numOfCameras = numOfCameras;
    }  
} 
```

然后您可以轻松创建区域列表：

```
List<Zone> zonesList = new ArrayList<Zone>();
zoneList.add(new Zone(6);
zoneList.add(new Zone(8);
.
. 
```

ETC..

我更喜欢这个而不是多列表，因为您可以轻松地将更多属性添加到区域对象并从列表中访问它们。

您还可以为区域对象设置名称/id 属性，并在地图中按 id 映射区域；

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T19:29:10.733

好吧，一种方法是使用地图和列表：

```
HashMap<Zone, ArrayList<Camera>> building = new HashMap<>();

ArrayList<Camera> zone1cameras = new ArrayList<>();
zone1cameras.add(camera1);
zone1cameras.add(camera2);
...

building.put(zone, zone1cameras); 
```

但是如果你已经有了`Zone`对象，为什么不喜欢

```
public class Zone
{
    // Members
    private ArrayList<Camera> cameras = new ArrayList<>();

    // Methods 
    public void registerCamera(Camera c){ cameras.add(c); }
    public List<Camera> getCameras(){ return cameras; }
} 
```

然后您可以将`Zone`s 存储在另一个列表中，例如：

```
ArrayList<Zone> zones = new ArrayList<>();
zones.add(zone1); 
```

如果您想发疯，可以链接以下`registerCamera`方法：

```
public class Zone
{
    // Members
    private ArrayList<Camera> cameras = new ArrayList<>();

    // Methods 
    public Zone registerCamera(Camera c){ cameras.add(c); return this; }
    public List<Camera> getCameras(){ return cameras; }
} 
```

这将允许你做类似的事情

```
ArrayList<Zone> zones = new ArrayList<>();
zones.add(new Zone().registerCamera(cam1).registerCamera(cam2).registerCamera(cam3)); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-22T19:29:29.793

如果`Zone`and`Camera`本身就是类，那么您可以使用`HashMap`如下：

```
Map<Zone,ArrayList<Camera>> map = new HashMap<Zone,ArrayList<Camera>>();
ArrayList<Camera> list1 = new ArrayList<Camera>();
list1.add(camera1);list1.add(camera2);
map.put(zone1,list1);
ArrayList<Camera> list2 = new ArrayList<Camera>();
 list2.add(camera1);list2.add(camera2);list2.add(camera3);
map.put(zone2,list2);
....
... 
```

其中 camera1,camera2 ..so on 是`Camera`. 和 zone1, zone2 .. 等等是对象`Zone`
如果你想为 zone1 添加更多的相机，那么你可以按照以下方式进行：

```
ArrayList<Camera> list = map.get(zone1);
list.add(camera3);list.add(camera4);
map.put(zone1,list); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-22T19:48:51.283

如何创建一个 Zone 对象（如果一个 zone 里面有其他东西，特别有用）。然后在构造函数中传递它拥有的相机数量。

```
public class Zone {

    private int numOfCameras;
    private int zoneNumber;

    public Zone(_numOfCameras, _zoneNumber) {
        numOfCameras = _numOfCameras;
        zoneNumber = _zoneNumber;
    }

    //getters and setters
    ...
} 
```

如果您需要保留区域列表，您可以实例化一个区域数组并将其添加到数组中：

```
private Zone[] zones; 
```

要找出一个区域中有多少个摄像机，您可以执行以下操作（假设区域将按顺序编号 1-8）：

```
public int getNumberOfCamerasByZone(i){ //pass in the zone number you are wanting
    return zones[i].getNumberofCameras();
} 
```

# simulation - 将海龟放置在特定的色块上

> ID：15578260
> 
> 赞同：0
> 
> 时间：2013-03-22T19:20:14.313
> 
> 标签：simulation, netlogo

我正在尝试将信标类型的海龟（我制作的一种类型）放置在 Netlogo 中所有红色的补丁上，每个红色补丁放置一个信标。这是我当前的代码，但我不知道如何获取当前补丁的坐标，或者如果它是红色的，则将乌龟放在当前补丁上。我的代码如下。

```
ask patches [
 if pcolor = red [
    sprout 1
   [
     set breed beacons
     set size 3
     set color blue

   ] 
  ]
] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T14:02:11.057

好吧，除了小的文体问题，你的代码基本上是正确的，我不确定你在哪里找到它的错误。我会去：

```
ask patches with [ pcolor = red ] [
  sprout-beacons 1 [
    set size 3
    set color blue        
  ] 
] 
```

...但它和你做的事情一样，就是“如果乌龟是红色的，就把它放在当前的补丁上”，就像你说的那样。

而要“获取当前补丁的坐标”，您可以只向补丁询问其`pxcor`和`pycor`变量，例如：`ask one-of patches [ show (word pxcor ", " pycor) ]`.

# php - Apache 或 PHP 生成前置换行符

> ID：15578271
> 
> 赞同：5
> 
> 时间：2013-03-22T19:20:51.727
> 
> 标签：php, apache2, character, prepend

我正在尝试在 PHP Web 应用程序中生成 XML 文件：

```
<?php
... 
header('Content-Type: application/xml');
header('Content-Disposition: attachment; filename=test.xml');
echo "<?xml version=\"1.0\"?>\r\n" . 
... 
```

奇怪的是，当使用我的服务器（分别是 PHP 版本 5.3.8/Apache 2.2.17 和 PHP 版本 5.3.10-1/Apache 2.2.22）**时，在输出的开头插入了****一个换行符（十六进制`0a`**） ，导致无法使用的无效 XML。还有[一个关于这个的在线问题](https://askubuntu.com/questions/175870/apache-or-php-inserting-a-newline-at-start-of-every-html-and-xhr-response)，未解决。

因此，如果我尝试`echo "bug";`得到 4 个字节，而不是 3 个：`0a 62 75 67`

但是，当在本地使用 WAMP 服务器（PHP 5.4.3/Apache 2.4.2）时，我得到 3 个字节：`62 75 67`.

*   这是一个已知的错误/功能吗？
*   是配置问题吗？
*   Apache 还是 PHP 应该归咎于哪个？
*   我必须升级我的服务器吗？我宁愿不。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T19:33:13.763

可能是编码问题。如果您将[UTF8 与 BOM](http://en.wikipedia.org/wiki/Byte_order_mark)一起使用，则文件开头会有一个额外的字符。检查文件的编码，并将其转换为不带 BOM 的 UTF8 以避免出现此额外字符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T11:01:01.450

似乎`0a`问题是由我的主 PHP 文件包含的 PHP 文件中的尾随 Enter 字符引起的。当我从包含文件中删除它时，`0a`输出中的字符消失了。

我觉得这很奇怪的是我经历过的 PHP 版本之间对空格的不同处理，以及`0a`在测试社区的建议时我仍然得到了这一事实。

我没有更多时间对此进行研究，但我对遇到类似问题的人的建议是检查包含文件中的空格是否会影响等式。此外，请避免`<?php`按照下面 Dan 的建议结束标签。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-04-06T00:58:40.117

我刚碰到这个。我和团队花了一个小时追查。太奇妙了。我非常喜欢 PHP。

这就是我们造成它的原因：

```
<php
  $code = "blah";
?php>

<EOF> 
```

注意文件末尾的换行符

PHP，以其所有超凡的美感，将把这个换行符解释为你实际上试图发送给某人的东西。毕竟*是*HTML。因此，即使包含路径中的多个 PHP 文件以换行符结尾，最多也会在您的响应中添加一个换行符。

请特别注意您包含或需要的任何文件，如果它们以换行符结尾，那么您从当前文件中回显或打印的任何内容都将以换行符开头。

只是。惊人的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-02-11T14:15:38.297

就我而言，它是开头的换行符

[![在此处输入图像描述](../Images/ce9c0c05281c39349f021884db729b71.png)](https://i.stack.imgur.com/zowOS.png)

# jsp - JSP自定义标签空值

> ID：15578273
> 
> 赞同：0
> 
> 时间：2013-03-22T19:21:01.870
> 
> 标签：jsp, taglib

我自己的 jsp 标签有问题。我希望它允许空值，但如果我想为我的处理程序提供空值，则该值为 0 而不是空值。

我的处理程序：

```
public class BigDecimalStripper extends SimpleTagSupport {

private BigDecimal numberToStrip;

public void setNumberToStrip(BigDecimal numberToStrip) {
    this.numberToStrip = numberToStrip;
}

@Override
public void doTag() throws JspException, IOException {
    if (numberToStrip == null) {
        return;
    }
    JspWriter out = getJspContext().getOut();
    BigDecimal withoutTrailingZeros = numberToStrip.stripTrailingZeros();
    String formattedNumber = withoutTrailingZeros.toPlainString();
    out.println(formattedNumber);
}
} 
```

我的标签库：

```
<?xml version="1.0" encoding="UTF-8" ?>
<taglib>
<tlib-version>1.0</tlib-version>
<jsp-version>2.0</jsp-version>
<short-name>Fishie JSP Utils</short-name>
<tag>
    <name>BigDecimalStrip</name>
    <tag-class>ch.fishie.jsp.utils.BigDecimalStripper</tag-class>
    <body-content>scriptless</body-content>
    <attribute>
        <name>numberToStrip</name>
        <required>true</required>
        <rtexprvalue>true</rtexprvalue>
    </attribute>
</tag> 
```

我的 JSP 代码：

```
 <c:forEach items="${pagination.pageEntries}" var="aquarium">
                    <tr>
                        <td class="name"><c:out value="${aquarium.name}" /></td>
                        <td class="length"><fu:BigDecimalStrip numberToStrip="${aquarium.length}" /></td>
 ..... 
```

aquarium.length 为空，但是当它设置为 时`BigDecimalStripper`，它是 0。有人看到我犯的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:28:48.377

Tomcat 内置的 EL 解析器将对所有扩展 Number 的类执行此操作。您必须使用 Tomcat 6.0.16 或更高版本，试试这个...

`-Dorg.apache.el.parser.COERCE_TO_ZERO=false`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-18T11:37:45.847

接受的答案中的 COERCE_TO_ZERO 参数对我的设置（Tomcat 7.0.40，Liferay 6.1.2）没有任何改变，但是博客[如何将空值传递给自定义标签库](https://www.kayley.name/2011/09/27/how-to-pass-a-null-value-to-a-custom-tag-library/)技巧确实如此。

替换`BigDecimal`为`Object`标签属性设置器参数 ( `setNumberToStrip`) 并`BigDecimal`在存储在字段中之前转换为。如有必要，执行*instanceof*或*null检查。*

```
public void setNumberToStrip(Object numberToStrip) {
    if (value instanceof BigDecimal || value == null) {
        this.numberToStrip = (BigDecimal) numberToStrip;
    }
} 
```

# java - zipping file creates odd file archive structure

> ID：15578277
> 
> 赞同：2
> 
> 时间：2013-03-22T19:21:20.773
> 
> 标签：java, zip

Current file location: `C:\bearCave\bear.mp3`

I want to zip it such that it will appear as a zip file in `C:\bearCave` as `bear.zip`. In `bear.zip`, I just want to see `bear.mp3` with no intermediary folders.

In other words, file structure should be:

```
bear.zip
 - bear.mp3 
```

I managed to zip the file, which is generated in the correct location `C:\bearCave`. Interestingly, within that zip file, there is another folder `bearCave` which contains my file like so:

```
 bear.zip
    - C: 
     - bearCave
      - bear.mp3 
```

EDIT 1: A possible clue, `outfilename=C:\bearCave\bear.zip`

Here's my code:

```
 String[] filenames = new String[]{file.getPath()};
    int dirEnd = (file.getPath()).indexOf(file.getName());
    String fileDirectory=file.getPath().substring(0, dirEnd);
    Logger.debug("dirEnd="+dirEnd);
    Logger.debug("fileDir="+fileDirectory);
    String outFilename = fileDirectory + (file.getName()).substring(0, ((file.getName()).length())-4) + ".zip";
    Logger.debug("outFile=" + outFilename);
    ZipOutputStream out = new ZipOutputStream(new FileOutputStream(outFilename));

    for (int i=0; i<filenames.length; i++) {
        FileInputStream in = new FileInputStream(filenames[i]);

        // Add ZIP entry to output stream.
        out.putNextEntry(new ZipEntry(filenames[i]));

        // Transfer bytes from the file to the ZIP file
        int len;
        while ((len = in.read(buf)) > 0) {
            Logger.debug("len = " + len);
            out.write(buf, 0, len);
        }

        // Complete the entry
        out.closeEntry();
        in.close();
        Logger.debug("entry clsoed");
    }

    // Complete the ZIP file
    out.close();
    Logger.debug("zipping complete!");
} catch (IOException e) {
    Logger.error(e);
    Logger.debug(e);
} 
```

**Stacktrace**

```
fileName = bear.mp3
filePath = C:\bearCave\bear.mp3
fileDir=C:\bearCave\
outFile=C:\bearCave\bear.zip
len = 1024
len = 1024
len = 1024
len = 1024
len = 1024
len = 1024
len = 1024
len = 1024
len = 1024
len = 1024
len = 1024
len = 1024
len = 1024
len = 508
entry clsoed
zipping Complete! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:48:37.960

what's your `filenames[]` array populated with? I think the problem is this line:

```
// Add ZIP entry to output stream.
out.putNextEntry(new ZipEntry(filenames[i])); 
```

As I see it, `filenames[i]` is the whole path to your file and the `ZipEntry` will create this strange structure for you since it parses the given path into its "own" directory structure. Try creating the `ZipEntry` only with the designated filename (without the path component).

# android-maps - 在 Android API 8 中使用 MapActivity

> ID：15578279
> 
> 赞同：0
> 
> 时间：2013-03-22T19:21:34.527
> 
> 标签：android-maps

我对Android开发相当陌生。我试图了解如何在 Froyo 设备上实现地图。不幸的是，我使用的所有书籍都在他们的所有示例和相关的类/方法（例如，MapView）中引用了 MapActivity 的使用。所以这是我的问题：

1）据我了解，MapActivity（和相关的类）在 Honeycomb 之前不可用（即使有支持库）。这个对吗？

2）如果它们不可用，那么一般来说你如何解决这个问题？（例如，是否有可供您在 Froyo 设备上使用 MapViews 的替代支持库？

3) 鉴于我只有 Froyo 设备，我正在努力学习如何最好地学习 Map API？通常我的方法是使用模拟器首先在 Honeycomb+ 设备上学习 Map API，然后我会弄清楚如何“翻译”它，以便它在 Froyo 设备上工作。

不幸的是，无法将模拟器与 v2 Map API 一起使用（据我所知），而且我无法将手机升级到运行 Honeycomb+ 的 Android 设备。然后，您添加了 Google 最近从 v1 到 v2 Map API 的“转变”的复杂性（我的书甚至没有参考），现在您有了一个似乎非常困难的学习曲线。

鉴于我的情况（MAP API 的新手、没有 Honeycomb+ 设备、没有似乎涵盖该主题的书籍等），关于如何最好地学习 Map API 的任何一般性建议？顺便说一句，当我第一次阅读时，我倾向于更喜欢 Google 以外的资源，因为我发现 Google 文档是极简主义的，并且在你第一次尝试学习某些东西时只会有轻微的帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T14:59:17.340

您可以在 Froyo 中使用 Google Map V2。为了在 Froyo 中实现 Map V2，几乎没有什么变化。

首先通过本指南实施 Google Map V2：[Map V2](http://karnshah8890.blogspot.in/2013/02/google-maps-android-api-v2-introduction.html)

为了在 Froyo 中实施 Map V2 的更改步骤：

*   在 xml 中使用 SupportMapFragment 代替 MapFragment。

*   使用 mMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map)).getMap();

代替

mMap = ((MapFragment) getFragmentManager().findFragmentById(R.id.map)).getMap();

# ios - iOS 对 Google 云消息传递的支持

> ID：15578280
> 
> 赞同：28
> 
> 时间：2013-03-22T19:21:34.477
> 
> 标签：ios, push-notification, google-cloud-messaging

我在 google 的开发者控制台中看到 GCM 允许为 iOS 生成 API 密钥。我在网上搜索了有关如何在 iOS 应用程序中通过 GCM 实现推送通知的任何类型的文档，但我没有找到答案。

真的可以在 iOS 应用程序中使用 GCM 实现 Push Notifications jet 吗？文档，示例或学习如何做到这一点的东西？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2015-06-04T12:22:42.413

## 是的

我试过了，效果很好。按照这个[https://developers.google.com/cloud-messaging/ios/start](https://developers.google.com/cloud-messaging/ios/start)

这就是它的工作原理。

您在谷歌控制台创建应用程序条目。上传创建向导中认证的开发和生产。（您必须上传两者）并按照文档中的步骤操作。

### 逻辑工作如下

1.  我们像往常一样从 apns 请求设备令牌。
2.  然后我们使用提供的 api 将该令牌发送到 gcm 服务。
3.  然后 gcm 发回另一个令牌。
4.  我们将该令牌发送到应用服务器。
5.  应用服务器可以使用该令牌发送通知。

## 很酷的功能。

GCM for iOS 有一些很酷的功能

*   订阅基于特定主题的通知。忽略别人。

*   向应用内的其他设备发送通知。

如果您想尝试 google 示例应用程序。更新：现在是大写字母 G 的谷歌。只是

```
pod try Google 
```

在那里，您将在 ObjC、swift 甚至 mac 应用程序中获得一个可以发送通知的示例。

# 更新。

Google 正在从 GCM转向[Firebase 云消息传递。](https://firebase.google.com/docs/cloud-messaging/)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-10-15T14:40:56.893

Google 现在推出了适用于 iOS 的 Google Cloud Platform。有关更多信息，请参阅[他们的博客条目](http://googlecloudplatform.blogspot.ca/2013/10/speed-up-ios-development-with-google-cloud-platform.html)。Android 和 iOS 现在都支持 Google Cloud Messaging。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-05-29T19:37:24.597

谷歌已经更新了他们的[在线文档](https://developers.google.com/cloud-messaging/ios/start)。您仍然需要有效的 APNS 证书。之后，您的应用可以使用[iOS GCM API](https://developers.google.com/cloud-messaging/ios/client)向 GCM 注册。您的通知服务器无需修改即可工作。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-09-11T06:24:02.710

答案是肯定的，您可以使用 Google Cloud Messaging API 与 iOS 设备进行通信，但这是一个相当复杂的过程。您可以阅读[https://cloud.google.com/resources/articles/ios-push-notifications上的官方文档](https://cloud.google.com/resources/articles/ios-push-notifications)

问候

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-06-15T17:49:30.867

自 Google I/O 2015 起，Google 正式添加了对 GCM 的 iOS 支持。您可以在此处找到更多信息：[https ://developers.google.com/cloud-messaging/ios/start](https://developers.google.com/cloud-messaging/ios/start)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-03-22T21:38:02.917

虽然某些 Google API 可与 iOS 一起使用，但 GCM 仅适用于 Android。向 iOS 设备发送推送通知的唯一方法是通过 Apple 推送通知系统。谷歌将不得不支持这一点。

如果您想推送到多个平台，您可以随时使用 Urban Airship 之类的东西。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-05-29T20:22:13.700

**Google Cloud Messaging**的响应是**否定**的。但是，可以使用带有**Google App Engine**和**Google Cloud Endpoints的****Google Cloud Platform**向 iOS 设备发送推送通知。（[请参阅此文档](https://cloud.google.com/developers/articles/ios-push-notifications)） 但是您将不可避免地需要与 Apple 推送通知服务进行通信。这样做的任务肯定比直接使用 Apple 服务更复杂。

 ******* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-07-10T10:46:16.277

哇，这真的很糟糕。实际上，您需要在 iOS 上修改客户端才能使其正常工作！不幸的是，在我的公司，这不是一个选择，所以回到 Amazon SNS。

这里的想法是，通过 Google 的实现，您只需要与 GCM 通信，但为​​了向 iOS 发送消息，您的设备必须先与 GCM 同步才能传递令牌等，因此需要 iOS 客户端图书馆。

作为 Google App Engine 的用户，我对此感到非常兴奋，但这确实令人失望。******

# list - 列表的 Groovy 映射到映射列表

> ID：15578281
> 
> 赞同：5
> 
> 时间：2013-03-22T19:21:37.367
> 
> 标签：list, map, groovy

所以基本上我有这样的东西：

```
[a: ["c","d"], b: ["e","f"]] 
```

每个列表中的项目数量是任意的。如果只有一项，则列表不再是列表，而是字符串。

我想把它变成：

```
[ [a:"c", b:"e"], [a:"d",b:"f"] ] 
```

我真的不在乎解决方案是否使用 Groovy 方法。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-22T22:30:47.030

这是另一种方法，我认为它不那么晦涩，但仍然相当简洁：

```
def ml = [a: ["c","d"], b: ["e","f"]]

// Create an empty list that creates empty maps as needed
def lm = [].withDefault{ [:] }

ml.each{ k, values ->
    [values].flatten().eachWithIndex { value, index ->
        lm[index][k] = value
    }
}

assert lm == [[a:"c", b:"e"], [a:"d", b:"f"]] 
```

如果您不想或不能使用`withDefault`（因为您不希望列表自动增长），那么这也可以：

```
def ml = [a: ["c","d"], b: ["e","f"]]

def lm = []

ml.each{ k, values ->
    [values].flatten().eachWithIndex { value, index ->
        lm[index] = lm[index] ?: [:]
        lm[index][k] = value
    }
}

assert lm == [[a:"c", b:"e"], [a:"d", b:"f"]] 
```

* * *

**编辑**：添加代码来处理列表中不包含的字符串。

请注意，给定的技巧 ( `[values].flatten().eachWithIndex{...}`) 不一定非常有效。如果速度很重要，那么使用它会稍微快一些，但会牺牲可读性：

```
(values instanceof List ? values : [values]).eachWithIndex{...} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-02T21:33:51.730

单线，假设 x =`[a: ["c","d"], b: ["e","f"]]`或 x = `[a: "b", c: "d"]`：

```
[x*.key, x*.value].transpose()*.combinations().transpose()*.flatten()*.toSpreadMap() 
```

这是如何工作的：

首先，拆分键和值：

`[x*.key, x*.value]`=`[[a, b], [[c, d], [e, f]]]`

转置它们以配对键和值：

`[[a, b], [[c, d], [e, f]]].transpose()`=`[[a, [c, d]], [b, [e, f]]]`

用于`combinations`将键与其值配对（此处使用扩展运算符将其应用于每个列表元素）。请注意，组合将同时处理`[a:b]`或`[a:[b,c]]`正确处理：

`[[a, [c, d]], [b, [e, f]]]*.combinations()`=`[[[a, c], [a, d]], [[b, e], [b, f]]]`

转置列表，以便我们以 abab 而不是 aabb 结束（尽管有些嵌套）：

`[[[a, c], [a, d]], [[b, e], [b, f]]].transpose()`=`[[[a, c], [b, e]], [[a, d], [b, f]]]`

展平嵌套列表（再次使用 spread 来展平嵌套列表，但不是整个列表）：

`[[[a, c], [b, e]], [[a, d], [b, f]]]*.flatten()`=`[[a, c, b, e], [a, d, b, f]]`

展开`toSpreadMap`以将此列表转换为地图列表。

`[[a, c, b, e], [a, d, b, f]]*.toSpreadMap()`=`[*:[b:e, a:c], *:[b:f, a:d]]`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T21:43:43.440

定义一些函数：

```
// call a 2-element list a "pair"

// convert a map entry (where entry.value can be 
// a single string or a list of strings) into a list of pairs
def pairs(entry) {
  if (entry.value instanceof String)
    return [[entry.key, entry.value]]
  entry.value.collect { [entry.key, it]}
}

// convert list of pairs to a map
def toMap(pairs) {
  pairs.inject([:]){ m,i -> m[i[0]] = i[1]; m }
}

// kind of like transpose but doesn't stop with shortest list. 
// (would like to find a less ugly way of doing this)
def mytranspose(lists) {
  def retval = []
  def mx = lists.inject(0){x, i -> i.size() > x ? i.size() : x}
  for (int i = 0; i < mx; i++) {
    def row = []
    lists.each { lst ->
      if (lst.size() > i) row << lst[i]
    }
    retval << row
  }
  retval
} 
```

然后把它放在一起并测试它：

```
groovy:000> m = [a: ["c","d"], b: ["e","f"]]
groovy:000> mytranspose(m.entrySet().collect{pairs(it)}).collect{toMap(it)}
===> [{a=c, b=e}, {a=d, b=f}] 
```

作为字符串的映射条目可以工作，并且映射条目列表可以是不同的长度：

```
groovy:000> m['g'] = 'h'
===> h
groovy:000> m['x'] = ['s', 't', 'u', 'v']
===> [s, t, u, v]
groovy:000> m
===> {a=[c, d], b=[e, f], g=h, x=[s, t, u, v]}
groovy:000> mytranspose(m.entrySet().collect{pairs(it)}).collect{toMap(it)}
===> [{a=c, b=e, g=h, x=s}, {a=d, b=f, x=t}, {x=u}, {x=v}] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T19:54:24.807

这就是我最终要做的。如果有人有更好的解决方案，请告诉我，我会接受它作为答案。

```
 Map xyz = [a: ["c","d"], b: ["e","f"]]

  List result = []

    Closure updateMap = { list, index, key, value ->
        if ( !(list[index] instanceof Map) ) {
            list[index] = [:]
        }
        list[index]."$key" = value
    }

    xyz.each { k, v ->
        if (v instanceof ArrayList) {
            v.eachWithIndex { val, idx ->
                updateMap(result, idx, k, val)
            }
        }
        else {
            updateMap(result, 0, k, v)
        }
    } 
```

# apache - 重定向到 https://www。当没有子域而只有 https: 时

> ID：15578283
> 
> 赞同：1
> 
> 时间：2013-03-22T19:21:46.497
> 
> 标签：apache, .htaccess, redirect

当有人进入`http://`（非安全）时，有两种可能的情况。我想编写一个 .htaccess 文件以通过以下方式解决这两种情况：

1）他们不使用子域。

解决方案：重定向到`https://www.`+ 剩余 URL。

2）他们使用`http://www.`或`http://subdomain.`

解决方案：重定向到`https://subdomain`OR `https://www.`（无论使用哪个）+ 剩余 URL。

如何在我的 .htaccess 文件中解决这个问题？

这是我当前的文件：

```
 RewriteEngine on
 RewriteCond $1 !^(index\.php|images|css|js|font|uploads|robots\.txt)
 RewriteRule ^(.*)$ /index.php/$1 [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:32:52.693

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

# redirect to https://www. + remaining URL.
RewriteCond %{HTTPS} off
RewriteCond %{HTTP_HOST} ^domain\.com$ [NC]
RewriteRule ^ https://www.%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

# They use either http://www. or http://subdomain.
RewriteCond %{HTTPS} off
RewriteCond %{HTTP_HOST} ^[^.]+\.domain\.com$ [NC]
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L] 
```

# c# - 在 NUnit 中实现 TestSuite

> ID：15578288
> 
> 赞同：2
> 
> 时间：2013-03-22T19:22:02.883
> 
> 标签：c#, selenium, nunit

我不断得到：

```
The type or namespace name 'TestSuite' could not be found (are you missing a using directive or an assembly reference?) 
```

我使用 Visual Studio 2010，并通过 NuGet 安装了最新的 NUnit 和 selenium 参考。这是代码：

```
using NUnit.Framework;

namespace SeleniumTests
{
    public class ManifestTestSuite
    {
        [Suite] 
        public static TestSuite Suite
        {
            get
            {
                TestSuite suite = new TestSuite("MyTestSuite");
                suite.Add(new AddAll());
                suite.Add(new RemoveAll());
                return suite;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T19:52:16.500

`TestSuite`该类位于未与 nuget 包一起分发的类`nunit.core.dll`中，因为通常不需要它。

因此，您需要从[NUnit 网站](http://www.nunit.org/index.php?p=download)下载“完整”的 nunit 包，您可以`nunit.core.dll`在 zip 文件内的 lib 文件夹中找到该包。

但是，您不需要这样做，因为自 2.4.4 以来有一种新方法，如文档中所述[：](http://www.nunit.org/index.php?p=suite&r=2.6.2)您可以返回测试数组而不是实例`TestSuite`：

```
[Suite] 
public static IEnumerable Suite
{
    get
    {
        ArrayList suite = new ArrayList();
        suite.Add(new AddAll());
        suite.Add(new RemoveAll());
        return suite;
    }
} 
```

# algorithm - 以下循环的运行时间

> ID：15578289
> 
> 赞同：2
> 
> 时间：2013-03-22T19:22:06.583
> 
> 标签：algorithm, loops, for-loop, big-o, asymptotic-complexity

我正在尝试查找以下循环的运行时间：

```
int m=1;
for(i=1;i<=k;i++)
{
    for(j=1;j<=A[i];j++)
    {
        B[m]=i;
        m++;
     }
} 
```

这里，A 是一个包含整数的数组，这些整数的和为 n。例如，如果 A 的长度为 2，并且 A[1]=2 且 a[2]=4，则内循环将运行 6 次。

所以，在我的讲义中，它说这段代码的运行时间是 O(n+k)。但是假设例如k为5，数组A的长度为4，A[1]=3，A[2]=0，A[3]=0，A[4]=9，A[ 5]=0。所以，n=12。然后，对于 k=1，内循环将迭代 2 次，对于 k=2，外循环将迭代 1 次，对于 k=3，外循环将运行 1 次，对于 k=4，内循环将运行 9 次，对于 k=5，外部循环将运行 1 次，因此迭代总数为 14。这大于 k 和 n，运行时间既不是 O(n) 也不是 O(k)。我在这里做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T19:28:52.110

外循环将迭代**k**次，因为你正在做

`for(i=1;i<=k;i++)`

内循环的总迭代次数为

`sum (A[i])`对于`i = 1...k`，你知道的是`= n`。

这给出了`n + k`迭代。由于内部循环中的内容以恒定时间运行，因此复杂度为`O(n + k)`.

**编辑：**

当我们说一个非负函数`f(n)`是时，我们是什么意思`O(g(n))`？

**回答：**

查找适当的 Stackoverflow 问题

[“Big O”符号的简单英文解释是什么？](https://stackoverflow.com/questions/487258/plain-english-explanation-of-big-o)

**编辑2：**

实际上，上面链接中的答案非常冗长，所以为了完整起见，这里是数学定义。

设`f(n)`为非负函数。然后我们说`f(n) = O(g(n))`(read "f(n) is big-oh of g(n)") 如果存在正常数`c`并且`n0`这样

`f(n) <= c g(n)`

对于所有人`n >= n0`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-16T06:12:57.623

除非我遗漏了一些东西，否则原始功能可以简化为：

```
for(i=1;i<=k;i++) {
    for(j=1;j<=A[i];j++) {
     ... 
     }
} 
```

在最坏的情况下，sum(A[i]) = n

在我看来，这个函数的运行应该不会比 k*n 差，对于大 k，k=n 所以 O(n^2) 应该是答案。

我认为乘法是有序的，而不是加法。

假设循环 A 运行 3 次，循环 B 每次运行 A 运行 2 次。这等于 6 次运行，而不是 5 次。所以 3*2 而不是 3+2

**编辑：**

证明：

f(n) = k*n

让 g(n) = n^2

f(n) <= C xg(n)

对于 C = 1，N0 = max(A[i])

# antlr3 - 使用 Antlr-3.5-complete.jar 生成 OracleSQL 语法的大量模板错误

> ID：15578292
> 
> 赞同：2
> 
> 时间：2013-03-22T19:22:13.973
> 
> 标签：antlr3

相同的 oracle SQL 语法使用 Antlr-3.3-complete.jar 生成且没有错误，并使用 Netbeans/GCC 或 Visual Studio 成功编译。

使用 Antlr-3.5-complete.jar 生成语法会生成 23500 行警告消息，描述模板错误，包括数百个异常。

代码是使用以下命令行生成的：

```
java -d64 -Xmn2000M -Xmx8000M -jar antlr-3.5-complete.jar OracleSQL_v2.g 
```

antlr-3.5-complete.jar 于 2013 年 3 月 22 日从 antlr.org 网站下载。

该语法基于 Ivan.Brezina 发布的 antlr.org 站点中的 Oracle PL/SQL 语法。

生成的代码有 282 个未声明的标识符。许多`$tokenRef`变量在生成的解析器 synpred 子例程中未声明。此外，生成的词法分析器有 100 个案例

```
error C2065: '_empty' : undeclared identifier 
```

这是模板错误的子集：

```
warning(24):  template error: context [/outputFile /parser] 1:1 could not pass through undefined attribute filterMode

600+ duplicate errors:
warning(24):  template error: context [/outputFile /parser /genericParser /_sub45 /ruleAttributeScopeFuncMacro] 1:4 no such property or can't access: null.attributes

warning(24):  template error: context [/outputFile /parser /genericParser] 155:5 no such property or can't access: null.apifuncs

warning(24):  template error: context [/outputFile /parser /genericParser /rule /ruleInitializations /ruleInitializations] 4:1 no such property or can't access: null.attributes

warning(24):  template error: context [/outputFile /parser /genericParser /rule /ruleBlockSingleAlt /alt /element /matchSet /matchSet /_sub127 /createNodeFromToken] 1:4 no such property or can't access: null.node

20 duplicate errors:
warning(24):  template error: context [/outputFile /parser /genericParser /rule /ruleInitializations /ruleInitializations] 4:1 no such property or can't access: null.attributes

warning(24):  template error: context [/outputFile /parser /genericParser /rule /ruleBlockSingleAlt /alt /element /block /_sub86 /altSwitchCase /alt /element /blockSingleAlt /alt /rewriteCode /rewriteAlt /rewriteElementList /rewriteElement /rewriteTree /rewriteElement /rewriteImaginaryTokenRefRoot /createImaginaryNode] 1:4 no such property or can't access: null.node

warning(24):  template error: context [/outputFile /parser /genericParser /rule /ruleBlockSingleAlt /alt /element /block /_sub86 /altSwitchCase /alt /element /blockSingleAlt /alt /rewriteCode /rewriteAlt /rewriteElementList /rewriteElement /rewriteTree /rewriteElement /rewriteOptionalBlock /rewriteElementList /rewriteElement /rewriteTokenRef /createRewriteNodeFromElement] 1:4 no such property or can't access: null.node

warning(24):  template error: context [/outputFile /parser /genericParser /rule /ruleBlockSingleAlt /alt /element /block /_sub86 /altSwitchCase /alt /element /blockSingleAlt /alt /rewriteCode /rewriteAlt /rewriteElementList /rewriteElement /rewriteTree /rewriteElement /rewriteTree /rewriteElement /rewriteImaginaryTokenRefRoot /createImaginaryNode] 1:4 no such property or can't access: null.node

warning(24):  template error: context [/outputFile /parser /genericParser /rule /ruleBlockSingleAlt /alt /element /block /_sub86 /altSwitchCase /alt /element /blockSingleAlt /alt /rewriteCode /rewriteAlt /rewriteElementList /rewriteElement /rewriteTree /rewriteElement /rewriteTree /rewriteElement /rewriteTokenRef /createRewriteNodeFromElement] 1:4 no such property or can't access: null.node

warning(24):  template error: context [/outputFile /parser /genericParser /rule /ruleBlockSingleAlt /alt /element /block /_sub86 /altSwitchCase /alt /rewriteCode /rewriteAlt /rewriteElementList /rewriteElement /rewriteTree /rewriteElement /rewriteImaginaryTokenRefRoot /createImaginaryNode] 1:4 no such property or can't access: null.node

warning(24):  template error: context [/outputFile /parser /genericParser /rule /ruleInitializations /ruleInitializations] 4:1 no such property or can't access: null.attributes

warning(24):  template error: context [/outputFile /parser /genericParser /rule /ruleBlockSingleAlt /alt /rewriteCode /rewriteAlt /rewriteElementList /rewriteElement /rewriteTree /rewriteElement /rewriteImaginaryTokenRefRoot /createImaginaryNode] 1:4 no such property or can't access: null.node

warning(24):  template error: context [/outputFile /parser /genericParser /rule /ruleInitializations /ruleInitializations] 4:1 no such property or can't access: null.attributes

200+ duplicate exceptions:

Caused by: org.stringtemplate.v4.misc.STNoSuchPropertyException: no such property: java.lang.String.referencedRule
    at org.stringtemplate.v4.misc.ObjectModelAdaptor.throwNoSuchProperty(ObjectModelAdaptor.java:106)
    at org.stringtemplate.v4.misc.ObjectModelAdaptor.lookupMethod(ObjectModelAdaptor.java:99)
    at org.stringtemplate.v4.misc.ObjectModelAdaptor.getProperty(ObjectModelAdaptor.java:67)
    at org.stringtemplate.v4.Interpreter.getObjectProperty(Interpreter.java:1158)
    at org.stringtemplate.v4.Interpreter._exec(Interpreter.java:210)
    at org.stringtemplate.v4.Interpreter.exec(Interpreter.java:145)
    at org.stringtemplate.v4.Interpreter.writeObject(Interpreter.java:703)
    at org.stringtemplate.v4.Interpreter.writeIterator(Interpreter.java:733)
    at org.stringtemplate.v4.Interpreter.writeObject(Interpreter.java:708)
    at org.stringtemplate.v4.Interpreter.writeObjectWithOptions(Interpreter.java:665)
    at org.stringtemplate.v4.Interpreter._exec(Interpreter.java:292)
    at org.stringtemplate.v4.Interpreter.exec(Interpreter.java:145)
    at org.stringtemplate.v4.Interpreter.writeObject(Interpreter.java:703)
    at org.stringtemplate.v4.Interpreter.writeObjectNoOptions(Interpreter.java:635)
    at org.stringtemplate.v4.Interpreter._exec(Interpreter.java:285)
    at org.stringtemplate.v4.Interpreter.exec(Interpreter.java:145)
    at org.stringtemplate.v4.Interpreter.writeObject(Interpreter.java:703)
    at org.stringtemplate.v4.Interpreter.writeIterator(Interpreter.java:733)
    at org.stringtemplate.v4.Interpreter.writeObject(Interpreter.java:708)
    at org.stringtemplate.v4.Interpreter.writeObjectWithOptions(Interpreter.java:665)
    at org.stringtemplate.v4.Interpreter._exec(Interpreter.java:292)
    at org.stringtemplate.v4.Interpreter.exec(Interpreter.java:145)
    at org.stringtemplate.v4.Interpreter.writeObject(Interpreter.java:703)
    at org.stringtemplate.v4.Interpreter.writeObjectNoOptions(Interpreter.java:635)
    at org.stringtemplate.v4.Interpreter._exec(Interpreter.java:285)
    at org.stringtemplate.v4.Interpreter.exec(Interpreter.java:145)
    at org.stringtemplate.v4.Interpreter.writeObject(Interpreter.java:703)
    at org.stringtemplate.v4.Interpreter.writeObjectNoOptions(Interpreter.java:635)
    at org.stringtemplate.v4.Interpreter._exec(Interpreter.java:285)
    at org.stringtemplate.v4.Interpreter.exec(Interpreter.java:145)
    at org.stringtemplate.v4.ST.write(ST.java:415)
    at org.antlr.codegen.CodeGenerator.write(CodeGenerator.java:1296)
    at org.antlr.codegen.CTarget.genRecognizerFile(CTarget.java:54)
    at org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:459)
    at org.antlr.Tool.generateRecognizer(Tool.java:696)
    at org.antlr.Tool.process(Tool.java:509)
    at org.antlr.Tool.main(Tool.java:98)
Caused by: java.lang.NoSuchFieldException: referencedRule
    at java.lang.Class.getField(Class.java:1537)
    at org.stringtemplate.v4.misc.ObjectModelAdaptor.lookupMethod(ObjectModelAdaptor.java:88)
    ... 35 more

1800+ duplicate errors for [headerReturnScope, ruleAttributeScopeDecl, and ruleDeclarations]:
warning(24):  template error: context [/headerFile /_sub143 /ruleAttributeScopeDecl] 1:4 no such property or can't access: null.attributes 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T20:00:49.783

由于 3.5 之前的版本中存在错误，这些消息被无意中隐藏了。一些目标已更新以纠正问题，但您使用的目标似乎尚未更新（您未指定）。

另请注意，有关模板错误的消息是警告消息，而不是错误。您的输出仍应生成。

你能发布一个小例子来重现编译器错误吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-10T09:30:56.077

我遇到了关于“未声明的_empty”的同样问题。我发现的最简单的例子是：

```
foo: ( 'A'+ 'B' )+ 'A'+ ; 
```

（这个错误案例似乎与“循环 DFA”模式有关。但我不明白它的真正含义。）

ANTLR 3.5.1 生成解析器源，如：

```
static const ANTLR3_INT32 * const dfa2_transitions[] =
{
    dfa2_T1, dfa2_T0, _empty, _empty
}; 
```

这会导致针对未声明的“_empty”的编译错误。

在这部分之前，我发现：

```
/** Used when there is no transition table entry for a particular state */
#define dfa2_T_empty        NULL 
```

我猜“_empty”在生成的代码中应该是“dfa2_T_empty”。

我目前在我的语法文件中放置了快速解决方法。但我不确定这在运行时是否能正常工作。

```
@header {
   #define _empty NULL
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T06:45:09.853

我有同样的错误。语法取自[http://www.antlr3.org/grammar/list.html](http://www.antlr3.org/grammar/list.html)

重现错误所需的只是下载，提供 antlr-3.4-complete.jar（修改 Makefile）而不是附加的 antlr-3.3-complete.jar 并运行 Makefile。

处理语法过程中出现很多警告错误。生成的输出源文件，但无法编译，因为 ANTLR 3.4 和 3.5 生成如下行：

```
void ;
#undef RETURN_TYPE
#define RETURN_TYPE void 
```

打字

```
grep undef.*RETURN_TYPE OracleSQLParser.c | 荷兰语
```

显示使用模板 C.stg 正确填充了前 1135 个案例。从 1136 到生成源结束，所有事件都被 void 填充。

当我将输出从 C 目标切换到 java 时，没有看到任何错误。

# for-loop - 通过“for循环”枚举创建对象名称？

> ID：15578295
> 
> 赞同：-2
> 
> 时间：2013-03-22T19:22:32.957
> 
> 标签：for-loop, uiimage, enumerate

我想在“for 循环”中使用递增的整数来创建 5 个具有自定义名称的 UIImage（例如 UIImage *image1、*image2 等）。我以编程方式命名了我的图像 - “foto1.jpg”、“foto2.jpg”等，所以我也想在同一个“for循环”中使用整数来加载它们......但我不'不知道如何替换标题中的那个数字！就像，在 UIImage 的名称和调用图像的名称时。这是怎么做到的？？我试过这个： [NSString: @"foto%d.jpg", i] 没有成功。

任何帮助将不胜感激！我是新手:(谢谢你，塞巴斯蒂安

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-22T19:35:15.767

试试这个： [NSString stringWithFormat: @"foto%d.jpg", i]

# jquery - Meteor：第三方 jquery 库与 Meteor jquery 包不兼容，如何强制它停止加载 jquery.js？

> ID：15578297
> 
> 赞同：1
> 
> 时间：2013-03-22T19:22:34.410
> 
> 标签：jquery, meteor

我正在尝试`<img>`在引导模式视图内部显示。现在，我包含了一个 3rd 方 jquery 库，它自动操作`<img>`具有特定类名的所有标签。

html

{{afterBody}} 这会在正文的末尾加载 js 脚本。<#myModal> 模态对话框被隐藏。

```
if (Meteor.isClient) {

        if ( typeof Handlebars !== 'undefined') {
            Handlebars.registerHelper('afterBody', function(name, options) {
                $('body').append('<script src="zzz.js" type="text/javascript"></script>');

            });
        }
    Meteor.startup(function() {
        $('#myModal').on('shown', function() { 
            alert('shown event fired');
            $('.modal-body').append('<imgsrc="http://www.y.com/images/example.jpg" class="markIt">');

    });
} 
```

问题是 zzz.js 似乎不能很好地与流星提供的 jquery.js 包配合使用。我删除了 jquery 包，但它仍在某个地方使用 jquery.js。我的公用文件夹中没有任何内容。

`Uncaught TypeError: Object undefined [undefined undefined -1] has no method 'on'`

只有当我在任何地方包含 zzz.js 时才会发生这种情况。我尝试了头部，在身体之后加载它，但它似乎不想与 jquery meteor 包一起使用。如何将 jquery 的版本替换为与 zzz.js 一起使用的版本？我确定这是问题所在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T23:53:12.260

据我所知，添加 jQuery 插件所需要做的就是添加 jquery 智能包，然后将插件 (zzz.js) 放在客户端目录中（如果您希望它仅在客户端上运行）。您无需附加脚本标签即可使用它。

# c++ - “const T*”可以匹配指向自由函数的指针吗？

> ID：15578298
> 
> 赞同：18
> 
> 时间：2013-03-22T19:22:40.930
> 
> 标签：c++, c++11, constants, function-pointers

在一个[相关问题](https://stackoverflow.com/questions/10145693/what-is-meaning-of-a-pointer-to-a-constant-function)中，据说没有指向非成员 const 函数的指针。另外，C++11 8.3.5/6 说

> 函数声明器中 cv-qualifier-seq 的效果与在函数类型之上添加 cv-qualification 不同。在后一种情况下，将忽略 cv 限定符。[ 注意：具有 cv-qualifier-seq 的函数类型不是 cv-qualified 类型；**没有 cv 限定的函数类型**。——尾注]

如果我理解正确，这意味着不存在非成员 const 函数。（虽然这些函数不是 const 的，但它们不能按照 3.10/6 进行修改）。特别是，指向 const 函数的指针毫无意义。

但是，似乎某些编译器确实在类型推导上下文中创建了指向 const 函数的指针。例如，考虑以下代码：

```
#include <iostream>

void f() {}

template <typename T> void g(      T*) { std::cout << "non const" << std::endl; }
template <typename T> void g(const T*) { std::cout << "const    " << std::endl; }

int main() {
     g(f);
} 
```

当使用 GCC 和 Intel 编译时，代码输出“non const”，正如我从上面的引用中所期望的那样。但是，使用 Clang 和 Visual Studio 编译时，输出为“const”。

我的解释正确吗？

**更新：**

在评论之后，我试图澄清我**不是**在谈论 const 成员函数。我对非成员函数感兴趣（但同样的论点可能也适用于非静态成员函数）。我还更改了问题标题以使其更准确。

与上述解决方案一致`g(f)`，以下行对于 GCC 和 Intel 是非法的，但对于 Clang 和 Visual Studio 是不合法的

```
const auto* ptr = &f; 
```

**更新 2：**

我同意 Andy Prowl 的解释并选择了他的答案。但是，在那之后，我意识到这个问题是 CWG 的未决[问题](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#1584)。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-22T21:22:07.667

> 如果我理解正确，这意味着不存在非成员 const 函数。（虽然这些函数不是 const 的，但它们不能按照 3.10/6 进行修改）。特别是，指向 const 函数的指针毫无意义。

是的，没有函数这样的东西，并且由于您引用的段落相同，因此*忽略*`const`了创建函数的尝试。这很重要，因为无论如何创建函数类型的程序**不是**格式错误的（[就像 C++03 中的情况一样](https://stackoverflow.com/questions/1117873/pointer-to-const-vs-usual-pointer-for-functions)）；简单地说，它的尝试被忽略，而是考虑非函数类型。*`const`**`const`***

 ***这可能是 GCC 和 ICC 无法应用的原因，因为当非`const`重载被移除时，[程序无法编译](http://liveworkspace.org/code/N6QE5$43)：

```
#include <iostream>

void f() {}

template <typename T> void g( T const*) 
{ 
   std::cout << "const    " << std::endl; 
}

int main() {
     g(f); // ERROR with GCC and ICC, compiles with Clang
} 
```

关于你的解释：

> 当使用 GCC 和 Intel 编译时，代码输出“non const”，正如我从上面的引用中所期望的那样。但是，使用 Clang 和 Visual Studio 编译时，输出为“const”。我的解释正确吗？

我不相信。据我所知，**Clang 是对的。**

这个结论是基于两个函数模板都是可行的，因为`const`限定符在函数类型上被忽略，并且一个比另一个更专业。

实际上，根据 C++11 标准的第 8.3.5/7 段：

> [...] cv-qualifier-seq 在函数声明器中的效果与在函数类型之上添加 cv-qualification 不同。**在后一种情况下，cv 限定符被忽略**。[...]

这有效地使第二个函数模板可用于解决调用（显然是第一个）。但由于*这两个*函数模板都是可行的，关于重载决议的第 13.3.3.1 段开始发挥作用：

> 鉴于这些定义，**如果对于所有参数 i，ICSi(F1) 不是比 ICSi(F2) 更差的转换序列，则可行函数 F1 被定义为比另一个可行函数 F2 更好的函数，然后**
> 
> — 对于某些参数 j，ICSj(F1) 是比 ICSj(F2) 更好的转换序列，或者，如果不是，
> 
> — 上下文是通过用户定义的转换（见 8.5、13.3.1.5 和 13.3.1.6）和从 F1 的返回类型到目标类型（即被初始化的实体的类型）的标准转换序列进行的初始化是比从 F2 的返回类型到目标类型的标准转换序列更好的转换序列。[ ... ] 或者，如果不是这样，
> 
> — F1 是非模板函数，F2 是函数模板特化，或者，如果不是，
> 
> — **F1 和 F2 是函数模板特化，根据 14.5.6.2 中描述的偏序规则，F1 的函数模板比​​ F2 的模板更特化。**

由于第二个函数模板比​​第一个更专业，因此应通过重载决议选择第二个函数模板。因此，**Clang 是对的**。***

# joomla - Joomla 2.5将子菜单添加到组件清单

> ID：15578302
> 
> 赞同：1
> 
> 时间：2013-03-22T19:23:02.203
> 
> 标签：joomla, manifest, submenu

我试图将`<submenu>`这些语言文件和一些语言文件添加到 joomla 2.5 组件清单中，但即使在我添加它们之后，管理面板中也没有任何变化，就像从未加载过的新清单一样。

你能告诉我如何让组件使用新更新的清单文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T20:19:56.197

您是只是修改服务器上的清单还是重新安装组件？因为菜单仅在组件安装期间创建。

# php - MVC3 ASP 通过 hreff 从 ASP 到 PHP 发布信息

> ID：15578308
> 
> 赞同：0
> 
> 时间：2013-03-22T19:23:25.007
> 
> 标签：php, asp.net-mvc-3, hyperlink, session-variables

在该站点上，我的标题中有以下代码，如果用户已登录，则“跟踪”链接会将用户发送到以下链接。我怎样才能同时发送一些会话信息，如客户 ID？标头位于 MVC3 ASP 站点上，链接指向 PHP 站点，该站点通过 iframe 在内部显示。

```
<li class="al-contact">@if (Model.CurrentUser != null)
        {  if(Request.IsAuthenticated)
                                 {
                                    <a href="http://webpilot/content/TrackingSystem_order" target="_self">Tracking</a>
                                  }
                                  } else { 
                }
        </li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:32:49.170

添加`CustomerID`作为您的视图模型/基本视图模型的属性。从 Session 或您的操作方法中的任何其他位置获取它，然后简单地将其传递给视图。在那里使用它来构建外部网站的 url。

```
public class TrackingListViewModel
{
  public int CustomerID { set;get;}
  //Other relevant Viewmodel properties
} 
```

在您的 Action 方法中设置值。

```
public ActionResult List()
{
  var vm=new TrackingListViewModel();
  vm.CustmoerID=124; 
  // hardcoded for demo. you may read from session or somewhere and set it 
  return View(vm);
} 
```

并在视图中，将其作为查询字符串发送（假设站点的页面将读取查询字符串值并对其进行处理，您需要知道他们期望的查询字符串键。下面的示例假设他们将读取名为“ `customer`”的键

```
@model TrackingListViewModel

<li class="al-contact">
 @if (Model.CurrentUser != null)
 { if(Request.IsAuthenticated)
    {
      <a href="http://somewebsite/TrackingSystem_order?id=@Model.CustomerID"
                                                      target="_self">Tracking</a>
     }
 } 
</li> 
```

# iphone - iOS openURL 到另一个应用程序

> ID：15578310
> 
> 赞同：1
> 
> 时间：2013-03-22T19:23:32.070
> 
> 标签：iphone, ios, openurl

我可以**禁用应用到应用默认的 iOS 动画**吗？我认为这是不可能的，只是

寻求确认。提前致谢。

# jquery - Flexslider 标题显示在下方而不是图像顶部

> ID：15578312
> 
> 赞同：12
> 
> 时间：2013-03-22T19:23:42.143
> 
> 标签：jquery, css, slider, flexslider

我之前在 Stackoverflow 上看到过这个问题，但找不到准确的答案。我只希望字幕覆盖在我的图像上。相反，它们似乎只是落在下面。我假设这可能是一个定位问题，但找不到任何其他可以查明问题的资源。我想我会在这里问。提前感谢您的时间。下面是 CSS、HTML 和 JavaScript 和 jQuery。我已按照 Flexslider 的说明进行安装。

CSS

```
 .flex-container a:active,
.flexslider a:active,
.flex-container a:focus,
.flexslider a:focus  {outline: none;}
.slides,
.flex-control-nav,
.flex-direction-nav {margin: 0; padding: 0; list-style: none;} 

/* FlexSlider Necessary Styles
*********************************/ 
.flexslider {margin: 0; padding: 0;}
.flexslider .slides > li {display: none; -webkit-backface-visibility: hidden;} /* Hide the slides before the JS is loaded. Avoids image jumping */
.flexslider .slides img {width: 100%; display: block;}
.flex-pauseplay span {text-transform: capitalize;}

/* Clearfix for the .slides element */
.slides:after {content: "."; display: block; clear: both; visibility: hidden; line-height: 0; height: 0;} 
html[xmlns] .slides {display: block;} 
* html .slides {height: 1%;}

/* No JavaScript Fallback */
/* If you are not using another script, such as Modernizr, make sure you
 * include js that eliminates this class on page load */
.no-js .slides > li:first-child {display: block;}

/* FlexSlider Default Theme
*********************************/
.flexslider {margin: 0 0 60px; background: #fff; border: 4px solid #fff; position: relative; -webkit-border-radius: 4px; -moz-border-radius: 4px; -o-border-radius: 4px; border-radius: 4px; box-shadow: 0 1px 4px rgba(0,0,0,.2); -webkit-box-shadow: 0 1px 4px rgba(0,0,0,.2); -moz-box-shadow: 0 1px 4px rgba(0,0,0,.2); -o-box-shadow: 0 1px 4px rgba(0,0,0,.2); zoom: 1;}
.flex-viewport {max-height: 2000px; -webkit-transition: all 1s ease; -moz-transition: all 1s ease; transition: all 1s ease;}
.loading .flex-viewport {max-height: 300px;}
.flexslider .slides {zoom: 1;}

.carousel li {margin-right: 5px}

/* Direction Nav */
.flex-direction-nav {*height: 0;}
.flex-direction-nav a {width: 30px; height: 30px; margin: -20px 0 0; display: block; background: url(images/bg_direction_nav.png) no-repeat 0 0; position: absolute; top: 50%; z-index: 10; cursor: pointer; text-indent: -9999px; opacity: 0; -webkit-transition: all .3s ease;}
.flex-direction-nav .flex-next {background-position: 100% 0; right: -36px; }
.flex-direction-nav .flex-prev {left: -36px;}
.flexslider:hover .flex-next {opacity: 0.8; right: 5px;}
.flexslider:hover .flex-prev {opacity: 0.8; left: 5px;}
.flexslider:hover .flex-next:hover, .flexslider:hover .flex-prev:hover {opacity: 1;}
.flex-direction-nav .flex-disabled {opacity: .3!important; filter:alpha(opacity=30); cursor: default;}

/* Control Nav */
.flex-control-nav {width: 100%; position: absolute; bottom: -40px; text-align: center;}
.flex-control-nav li {margin: 0 6px; display: inline-block; zoom: 1; *display: inline;}
.flex-control-paging li a {width: 11px; height: 11px; display: block; background: #666; background: rgba(0,0,0,0.5); cursor: pointer; text-indent: -9999px; -webkit-border-radius: 20px; -moz-border-radius: 20px; -o-border-radius: 20px; border-radius: 20px; box-shadow: inset 0 0 3px rgba(0,0,0,0.3);}
.flex-control-paging li a:hover { background: #333; background: rgba(0,0,0,0.7); }
.flex-control-paging li a.flex-active { background: #000; background: rgba(0,0,0,0.9); cursor: default; }

.flex-control-thumbs {margin: 5px 0 0; position: static; overflow: hidden;}
.flex-control-thumbs li {width: 25%; float: left; margin: 0;}
.flex-control-thumbs img {width: 100%; display: block; opacity: .7; cursor: pointer;}
.flex-control-thumbs img:hover {opacity: 1;}
.flex-control-thumbs .flex-active {opacity: 1; cursor: default;}

@media screen and (max-width: 860px) {
  .flex-direction-nav .flex-prev {opacity: 1; left: 0;}
  .flex-direction-nav .flex-next {opacity: 1; right: 0;}
} 
```

jQuery 和 Javascript

```
 <link rel="stylesheet" href="css/flexslider.css" type="text/css">
        <script src="js/vendor/modernizr-2.6.2.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
<script src="jquery.flexslider.js"></script>

        <script type="text/javascript" charset="utf-8">
  $(window).load(function() {
    $('.flexslider').flexslider({
          animation: "slide",
          controlsContainer: ".flex-container"
    });
  }); 
```

HTML

```
 <div class="flex-container">
  <div class="flexslider">
    <ul class="slides">
      <li>
        <img src="img/Kemper_Mark.jpg" />
        <p class="flex-caption">Captions and cupcakes. Winning combination.</p>
      </li>
      <li>
        <img src="img/octoberfest.jpg" />
        <p class="flex-caption">This image is wrapped in a link!</p>
      </li>
      <li>
        <img src="img/plat_club.jpg".jpg" />
      </li>
    </ul>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-13T09:38:41.557

It seems that u haven't added flex-caption css

```
.flexslider .slides li {
    position:relative;
}

.flex-caption {
    position:absolute;
    left:0;
    right:0;
    bottom:0;
    background:#000; /* whatever you want */    
    z-index:1;
    padding:5px;
} 
```

try this maybe it will work... let me know if it works

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-30T23:32:46.970

上面dipak的回答效果很好。我的最终成为

```
.flex-caption {
    position: absolute;
    left: 50;
    right: 50;
    bottom: 0;
    background: rgba(0, 0, 0,0.6);
    z-index: 1;
    padding: 10px;
 } 
```

这使标题为黑色背景，不透明度为 0.6

我刚刚将它添加到 flexslider.css 的底部

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-27T19:55:29.690

Relocated the pager(nav controls) to the right with left:45%

```
.flex-control-nav {
  position:absolute;
  right:0;
  left: 45%;
  /* bottom:7.3%; */
  text-align:center;
} 
```

# php - 在 twitter API PHP 中解析主题标签

> ID：15578314
> 
> 赞同：3
> 
> 时间：2013-03-22T19:23:53.503
> 
> 标签：php, regex, twitter, hashtag

我想从我从 twitter 检索到的推文中解析主题标签。现在，我没有在 api 中找到任何可用的东西。所以，我正在使用 php 自己解析它。我已经尝试了几件事。

```
<?php
$subject = "This is a simple #hashtag";
$pattern = "#\S*\w";
preg_match_all($pattern, $subject, $matches, PREG_OFFSET_CAPTURE);
print_r($matches);
?> 
```

我也试过

```
$pattern = "/[#]"."[A-Za-z0-9-_]"."/g"; 
```

但随后它显示 /g 不被 php 识别。我已经尝试了很长时间，但我无法做到这一点。所以请帮忙。

PS：我对Regular Experssions知之甚少。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:42:34.287

您需要考虑主题标签可能出现的位置。有以下三种情况：

*   在推文的开头，
*   在空格之后，
*   在一个词的中间 - 这不能算作一个标签。

所以这将正确匹配它们：

```
'/(^|\s)\#\w+/' 
```

解释：

*   `^`可用于*OR*语句
*   `\s`用于捕捉空格、制表符和换行符

这是完整的代码：

```
<?php
$subject = "#hashtag This is a simple #hashtag hello world #hastag2 last string not-a-hash-tag#hashtag3 and yet not -#hashtag";
$pattern = "/(?:^|\s)(\#\w+)/";
preg_match_all($pattern, $subject, $matches, PREG_OFFSET_CAPTURE);
print_r($matches);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T19:33:24.453

这对我有用：

```
$subject = "This is a simple #hashtag hello world #hastag2 last string #hashtag3";
$pattern = "/(#\w+)/";
preg_match_all($pattern, $subject, $matches, PREG_OFFSET_CAPTURE);
print_r($matches); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-10T15:19:55.827

使用对象原型有一种更简单的方法，写了一篇文章详细说明了如何不仅使用 hastags，还使用推文中的用户名和 URL 来做到这一点。[我正在从事的一个项目](https://benmarshall.me/twitscreen/)需要它，我正在从 Twitter API 获取推文。

[https://benmarshall.me/parse-twitter-hashtags/](https://benmarshall.me/parse-twitter-hashtags/)

以下是相关代码：

```
// Auto-link URLs in a string
// Usage: mystring.parseURL()
String.prototype.parseURL = function() {
  return this.replace(/[A-Za-z]+:\/\/[A-Za-z0-9-_]+\.[A-Za-z0-9-_:%&~\?\/.=]+/g, function( url ) {
    return url.link( url );
  });
};

// Auto-link Twitter usernames in a string
// Usage: mystring.parseUsername()
String.prototype.parseUsername = function() {
  return this.replace(/[@]+[A-Za-z0-9-_]+/g, function( u ) {
    var username = u.replace("@","");

    return u.link( 'http://twitter.com/' + username );
  });
};

// Auto-link Twitter hashtags in a string
// Usage: mystring.parseHashtag()
String.prototype.parseHashtag = function() {
  return this.replace(/[#]+[A-Za-z0-9-_]+/g, function( t ) {
    var tag = t.replace("#","%23");

    return t.link( 'http://search.twitter.com/search?q=' + tag );
  });
}; 
```

# python - 无排序排序

> ID：15578319
> 
> 赞同：0
> 
> 时间：2013-03-22T19:24:25.083
> 
> 标签：python, sorting, loops

基本上，我想在不使用“排序”的情况下对数字进行排序。我打算做的是创建一个新列表并将每个 Min 数字放入其中，例如：

```
for item in List:
    if item < (Min):
        Min = item
        nList.append(Min)
        List.remove(Min) 
```

其中List是输入列表，Min=List[0] and nList =[]

如何使用双循环来保持运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:28:00.523

您正在做的事情（除了逻辑错误）仍在排序 - 它被称为[堆排序](http://en.wikipedia.org/wiki/Heap_sort)，这需要`O(n log n)`时间。

如果您不将列表保留为堆，则您找到的最小值将`O(n)`不是`O(log n)`，并且您的排序将渐近运行，与冒泡排序一样糟糕 - `O(n^2)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T19:43:23.780

您的第一个问题是它只运行一次列表，因为……您编写了一个`for`显式运行一次列表的循环，而没有其他循环。

如果您希望它重复遍历列表，请在其周围放置另一个循环。

例如，由于您每次通过循环都从原始列表中删除值，因此您可以继续进行，直到您将它们全部删除，方法是添加`while List:`为外部循环：

```
while List:
    for item in List:
        if item < (Min):
            Min = item
            nList.append(Min)
            List.remove(Min) 
```

这实际上不会按原样工作，但这是因为原始逻辑中的其他缺陷，而不是`while`循环中的任何新内容。

第一个明显的问题是：

1.  `List`当您迭代它时，您正在从中删除元素。这是非法的，从技术上讲，任何事情都可能发生，但实际上会发生的是您的迭代将跳过某些元素。

2.  您从 开始`Min`，`List[0]`尽管这通常不是最小值。这意味着至少您的第一遍会以错误的顺序添加元素。

3.  最终，您将达到一个点，其中`item >= Min`每个项目都留在`List`. 那会发生什么？你永远不会移动任何东西，只是永远循环不做任何事情。

# css - 子 div 扩展到父级的其余部分

> ID：15578323
> 
> 赞同：2
> 
> 时间：2013-03-22T19:24:36.557
> 
> 标签：css, html

我有一个包含两个 div 堆叠的 div。

```
.container {
    position: fixed;
    padding:4px;
    top: 1px;
    left: 1px;
    width:200px;
    height: 200px;
    border: 4px solid #999;
}
.box1 {
    position: relative;
    height: 50px;
    border: 4px solid #f00;
}
.box2 {
    border: 4px solid #00f;
    height: 100%;
    position: relative;
    overflow: auto;
}

<div class='container'>
    <div class='box1'></div>
    <div class='box2'>
        <div style='height:400px;width:10px;background-color:#000;'></div>
    </div>
</div> 
```

我不希望 DIV2 扩展超过父 div，无论 DIV1 占用多少空间（因为它通过某些选择扩展），我希望 DIV2 滚动。我认为 100% 的高度会做到这一点，但它会将其扩展为与父 div 相同的 VALUE，这是预期的行为。表格似乎可以做到这一点，但我不想使用表格。

这是一个示例（在示例中，蓝色 div 应该停在灰色 div 的底部）：

[http://jsfiddle.net/gateshosting/uJ7Ns/](http://jsfiddle.net/gateshosting/uJ7Ns/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T19:32:17.573

工作[jsfiddle](http://jsfiddle.net/uJ7Ns/3/)

设置框的高度等于可用高度减去边框的高度减去边距的高度

```
 box2 {
    border: 4px solid #00f;
    height: 134px;
    position: relative;
    top: 0;
    left: 0;
    overflow: auto;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T19:29:44.863

不幸的是，你不能用纯 CSS 做到这一点。

你可以使用 Javascript/jQuery：

```
$(function(){
    //this is triggered by resizing the window
    $(window).on("resize", function(){
        $(".box2").height($(".container").height() - $(".box1").height());
    }).trigger("resize"); //this initializes the height
}); 
```

你必须修改你的CSS：

```
body, html{
    padding:0;
    margin:0;
    height:100%
}

.container{
    height:100%;
    width:200px;
    background: silver;
}

.box1{
    background: pink;
    height:100px;
    position:relative;
}

.box2{
    background: lightBlue;
    overflow:auto;
} 
```

您不希望在容器元素（.container、.box1、.box2）上进行填充，因为这会使高度偏离您填充的量。如果你想在容器元素中有填充，你应该在你的内容中添加一个带有填充的 div，这样你的高度和宽度就不会被丢弃：

CSS：

```
.pad {
    padding: 5px;
} 
```

HTML

```
<div class='box2'>
    <div class="pad">
        asdf<br />
        asdf<br />
        asdf<br />
        asdf<br />
        asdf<br />
        asdf<br />
        asdf<br />
        asdf<br />
        asdf<br />
        asdf<br />
        asdf<br />
        asdf<br />
        asdf<br />
        asdf<br />
        asdf<br />
        asdf<br />
        asdf<br />
        asdf<br />
        asdf<br />
        asdf<br />
        asdf<br />
        asdf<br />
        asdf<br />
    </div>
</div> 
```

尝试在此处调整窗口大小：http: [//jsfiddle.net/THWMp/3/](http://jsfiddle.net/THWMp/3/)

# r - 使用多个分隔符和列号拆分文件

> ID：15578325
> 
> 赞同：0
> 
> 时间：2013-03-22T19:24:45.167
> 
> 标签：r

我得到了一个具有以下结构的统计输出文件：

```
> dput(x)
structure(list(V1 = c(0.236364, 0.032086, 0.062762, 0.095238, 
NaN, 0, 1, 2, 3, 4, 0.258706, 0.436735, 0.104167, 0.611336, 0.160279
), V2 = c(0.183333, 0.623333, 0.796667, 0.14, 0, NA, NA, NA, 
NA, NA, 0.67, 0.816667, 0.96, 0.823333, 0.956667), V3 = c(NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA)), .Names = c("V1", 
"V2", "V3"), class = "data.frame", row.names = c(NA, -15L)) 
```

读取数据的链接： [https ://docs.google.com/file/d/0BxSZDr4eTnb9aDhCOGRxVEV5aVE/edit?usp=sharing](https://docs.google.com/file/d/0BxSZDr4eTnb9aDhCOGRxVEV5aVE/edit?usp=sharing)

**数据属性：**

*   没有标题

*   该文件使用特定的分隔符选项
    numeric[space][tab][space]numeric[space][tab][space] # 用于 2 个数字列组件

*   行号可能明显不同，但对于组件 2 和 3 将始终相同

* * *

**我需要将其拆分为每个组件的 data.frames：**
1 个组件 - 第一个两列部分
2 个组件 - 1 个列部分
3 个组件 - 第二个两列部分

**我找不到将类似数据文件拆分为 3 个组件的通用方法。**

我找到了使用不同分隔符作为拆分对象的示例，但没有使用列号和分隔符选项的这种特殊情况。

请让我知道这个例子是否足够。我不确定分隔符选项与此特定问题的相关性如何。我认为不是。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:35:49.347

您可以先将 3 个字符分隔符转换为一个字符分隔符吗？

在命令行上，您可以尝试：

```
cat input.txt | sed 's/ \t /\t/g' > input2.txt 
```

这将用“\t”替换所有“\t”

或者你可以在你最喜欢的 txt 编辑器中打开它并查找/替换所有

一旦分隔符采用标准格式，进一步处理就会容易得多

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T05:29:24.803

`NA`如果组件 1 或组件 3 数据的第二列中没有值，则`rle`可以在此处使用。如果我正确理解您的问题并且相关条件成立，基本方法是查看您共享的数据中“V2”列中值的*运行。*将返回一个逻辑向量，然后我们可以使用它来确定在哪里拆分数据：`NA``dput``is.na(x$V2)``rle`

```
> RLE <- rle(is.na(x$V2))$lengths
> split(x, rep(seq(RLE), RLE))
$`1`
        V1       V2 V3
1 0.236364 0.183333 NA
2 0.032086 0.623333 NA
3 0.062762 0.796667 NA
4 0.095238 0.140000 NA
5      NaN 0.000000 NA

$`2`
   V1 V2 V3
6   0 NA NA
7   1 NA NA
8   2 NA NA
9   3 NA NA
10  4 NA NA

$`3`
         V1       V2 V3
11 0.258706 0.670000 NA
12 0.436735 0.816667 NA
13 0.104167 0.960000 NA
14 0.611336 0.823333 NA
15 0.160279 0.956667 NA 
```

# java - 活动生命周期的问题

> ID：15578326
> 
> 赞同：0
> 
> 时间：2013-03-22T19:24:45.477
> 
> 标签：java, android, android-activity, activity-lifecycle

我在开始新活动时遇到了一些问题。在我的应用程序中，我设置了监听意图（屏幕关闭）的广播接收器。当屏幕关闭时，我的应用程序应该开始新的活动（当然在某些条件下。我不是在制作垃圾邮件应用程序）。但有时并非如此。

我已经在清单中声明了该活动“singleTop”，所以我也覆盖了“onNewIntent”方法。（我认为告诉这一点很重要）但事情就是这样。

当手机进入睡眠状态并且满足某些条件时，屏幕上会出现 2 个图标（我的活动）。我使这些图标可点击，如果我点击我的第二​​个图标，我正在完成（finish（））当前活动，我正在开始新的 CALL LOG 活动（由 Android 拥有）。当我这样做时，它应该带回以前的活动（具有不同的布局 - 只有一个图标 - 以前与第二个一起显示），但只有当手机进入睡眠状态时才会再次出现。问题是它没有。根据我的 LOGCAT，所有条件都满足，但只有活动没有开始。我的活动生命周期在这里发生了什么？

屏幕关闭接收器代码：

```
@Override
        public void onReceive(Context context, Intent intent) {
            Log.d("APP", "MAINSERVICE, Screen OFF");

            MissedCallObserver mco = new MissedCallObserver(MainService.this);

        if(!CallListener.isCallActive) {
            Log.d("APP", "MAINSERVICE, INSIDE IF ( call is not active )");

            if(mco.checkMissedCalls() > 0 || mco.checkUnreadSms() > 0) {
                Log.d("APP", "MAINSERVICE, calls calculated. IF entered. Next is starting activity");

            startHandleActivity();
            }
        }
    } // outer if

    } // ScreenOffReceiver

private void startHandleActivity() {

        Intent startH_Activity = new Intent(MainService.this, HandleActivity.class);
        startH_Activity.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        startH_Activity.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(startH_Activity);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:52:50.893

```
PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
PowerManager.WakeLock wl = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, TAG);
wl.acquire(); 
```

这将允许在屏幕关闭意图触发后可靠地执行代码。

# javascript - touchmove 在画布上绘制两条线而不是一条线

> ID：15578329
> 
> 赞同：1
> 
> 时间：2013-03-22T19:24:47.837
> 
> 标签：javascript, cordova, jquery-mobile, canvas, html5-canvas

我正在使用 jQuery Mobile UI 框架制作一个 PhoneGap 应用程序。我需要一个用户可以在屏幕上绘制内容的页面。我[将此](http://jbkflex.wordpress.com/2011/11/28/html5-canvas-paint-app-for-iphone/)用作参考，它在 Ripple Emulator 中效果很好。但是，在我的实际设备 Nexus 4 上，每次 touchmove 不是一行，而是两行。我在做什么有问题吗？

**编辑：**我在 github 中发现了一个类似的问题。这似乎是Android浏览器的问题。两条线是由于重叠的画布元素。唯一的解决方案是画布尺寸小于 256 像素。这是链接： [https ://github.com/jquery/jquery-mobile/issues/5107](https://github.com/jquery/jquery-mobile/issues/5107)

这是我的代码

```
// start canvas code

var canvas = null; //canvas object
var context = null; //canvas's context object
var clearBtn = null; //clear button object
var buttonDown = false;

function captureDraw(){
    canvas = document.getElementById('canvas');
    clearBtn = document.getElementById('clearBtn');

    setCanvasDimension();
    initializeEvents();

    context = canvas.getContext('2d');
}

function setCanvasDimension() {
  //canvas.width = 300; 
  // canvas.width = window.innerWidth;
  // canvas.height = window.innerHeight; //setting the height of the canvas
}

function initializeEvents() {
  canvas.addEventListener('touchstart', startPaint, false);
  canvas.addEventListener('touchmove', continuePaint, false);
  canvas.addEventListener('touchend', stopPaint, false);

  clearBtn.addEventListener('touchend', clearCanvas,false);
}

function clearCanvas() {
  context.clearRect(0,0,canvas.width,canvas.height);
}

function startPaint(evt) {
  if(!buttonDown)
  {
    context.beginPath();
    context.moveTo(evt.touches[0].pageX, evt.touches[0].pageY);
    buttonDown = true;
  }
  evt.preventDefault();
}

function continuePaint(evt) {
  if(buttonDown)
  {
    context.lineTo(evt.touches[0].pageX,evt.touches[0].pageY);
    context.stroke();
  }
}

function stopPaint() {
  buttonDown = false;
}

// end canvas code 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T21:56:07.340

不是一个实际的答案，但我发现这是自 Android 4.1.1 以来的一个已知错误。有很多解决方案，比如覆盖`offset-x: visible`画布元素的父 div，但它对我不起作用。有关详细信息，请参阅[https://code.google.com/p/android/issues/detail?id=35474](https://code.google.com/p/android/issues/detail?id=35474)。

其他解决方案是将画布尺寸保持在 256 像素以下。这当然是一个奇怪的错误！

# python - 将有序元组列表保存为 CSV

> ID：15578331
> 
> 赞同：44
> 
> 时间：2013-03-22T19:24:55.620
> 
> 标签：python, csv, tuples

我有一个按值排序的元组列表。它们的形式`(name,count)`是 count 是每个唯一名称的出现次数。

我想将此列表转换为 CSV，其中每个名称都是列标题，每个值都是单行的列值。

有什么建议怎么做吗？谢谢。

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2013-03-22T19:35:24.573

你可以这样做：

```
import csv

# note: If you use 'b' for the mode, you will get a TypeError
# under Python3\. You can just use 'w' for Python 3

data=[('smith, bob',2),('carol',3),('ted',4),('alice',5)]

with open('ur file.csv','wb') as out:
    csv_out=csv.writer(out)
    csv_out.writerow(['name','num'])
    for row in data:
        csv_out.writerow(row)

    # You can also do csv_out.writerows(data) instead of the for loop 
```

输出文件将具有：

```
name,num
"smith, bob",2
carol,3
ted,4
alice,5 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T19:28:15.817

[Python，转置列表并写入 CSV 文件](https://stackoverflow.com/questions/10573915/python-csv-file-writing)

```
import csv   
lol = [(1,2,3),(4,5,6),(7,8,9)]
item_length = len(lol[0])

with open('test.csv', 'wb') as test_file:
  file_writer = csv.writer(test_file)
  for i in range(item_length):
    file_writer.writerow([x[i] for x in lol]) 
```

输出

```
1,4,7
2,5,8
3,6,9 
```

请注意，在 python 3 中尝试它可能会出现[TypeError: a bytes-like object is required, not 'str' in python 和 CSV](https://stackoverflow.com/questions/34283178/typeerror-a-bytes-like-object-is-required-not-str-in-python-and-csv)中提到的错误。

考虑`with open('ur file.csv','w') as out:`用于 python 3。

# hibernate - 服务层延迟关系初始化

> ID：15578333
> 
> 赞同：1
> 
> 时间：2013-03-22T19:25:15.723
> 
> 标签：hibernate, jpa, lazy-loading, spring-data-jpa

我有一个具有 OneToMany 关系延迟加载的 JPA 实体。
我使用 Sping Data JPA 来检索实体，在我的服务方法中，我需要检索初始化的列表，因为我需要在 JSP 中打印它。我所做的是：

```
@Override
@Transactional(readOnly=true, propagation=Propagation.REQUIRED)
public User retrieveUser(String username) {
    final User user = userRepository.findByUsername(username);
    user.getFriends().size(); //This line throws a LazyInitializationException
    return user;
} 
```

但是这个解决方案不起作用也不优雅，我该如何实现呢？

例外是：

```
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: it.nikeconsulting.chirp.domain.User.follows, no session or session was closed
at org.hibernate.collection.internal.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:489)
at org.hibernate.collection.internal.AbstractPersistentCollection.throwLazyInitializationExceptionIfNotConnected(AbstractPersistentCollection.java:447)
at org.hibernate.collection.internal.AbstractPersistentCollection.readSize(AbstractPersistentCollection.java:139)
at org.hibernate.collection.internal.PersistentBag.size(PersistentBag.java:242)
at it.nikeconsulting.chirp.domain.service.ChirpUserServiceImpl.retrieveUser(ChirpUserServiceImpl.java:26) 
```

我的 context.xml 是：

```
<bean class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean" id="entityManagerFactory">
    <property name="dataSource" ref="dataSource"/>
    <property name="packagesToScan" value="it.nikeconsulting.chirp.domain" />
    <property name="jpaProperties">
        <props>
            <prop key="hibernate.hbm2ddl.auto">update</prop>
        </props>
    </property>
    <property name="jpaVendorAdapter" ref="jpaVendorAdapter" />
</bean>

<bean class="org.springframework.orm.jpa.JpaTransactionManager" id="transactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory"/>
    <property name="nestedTransactionAllowed" value="true" />
    <property name="jpaDialect">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaDialect" />
    </property>
</bean>

<tx:annotation-driven transaction-manager="transactionManager"/>

<bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter" id="jpaVendorAdapter">
    <property name="showSql" value="true" />
    <property name="databasePlatform" value="org.hibernate.dialect.MySQL5Dialect"/>
 </bean> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:54:58.990

问题是我`context:component-scan`在*servlet*和*root*应用程序中都有一个，并且都初始化了我的**服务**，但是在一个*servlet*中，事务没有被初始化，所以当服务被注入控制器时，它使用没有事务管理的那个.

解决方案是更改*servlet*`context:component-scan`中的包，使其仅扫描控制器。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T20:02:58.840

最快的解决方法可能是让收藏变得急切。IE：

```
class User {
....
  @OneToMany( ..., fetch=FetchType.EAGER)
  private Collection<Friend> friends;
...
} 
```

否则，此错误的原因有很多：

*   该服务不是 Spring 托管 bean - 因此该方法上的 @Transactional 什么都不做。
*   如果是 Spring 托管 bean，事务管理器是否配置正确？
*   如果是，则该对象可能已分离。（意味着导航惰性关联不起作用。）当 find 方法不是事务性的时会发生这种情况。您需要先附加它。这是您可以通过...保存（即合并）来完成的事情。我不知道 Spring Data 是否有附加方法。*

# c# - 防止 XSS 或其他东西的正则表达式？

> ID：15578338
> 
> 赞同：4
> 
> 时间：2013-03-22T19:25:36.637
> 
> 标签：c#, asp.net, regex, security, xss

我正在尝试保护我的网站免受跨站点脚本 (XSS) 的影响，并且我正在考虑使用正则表达式来验证用户输入。

这是我的问题：我有一个危险的 HTML 标签列表......

```
<applet>
<body>
<embed>
<frame>
<script>
<frameset>
<html>
<iframe>
<img>
<style>
<layer>
<link>
<ilayer>
<meta>
<object> 
```

...我想将它们包含在正则表达式中 - 这可能吗？如果没有，我应该使用什么？你有什么想法如何实现这样的东西吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-05-06T14:35:58.253

```
 public static bool ValidateAntiXSS(string inputParameter)
    {
        if (string.IsNullOrEmpty(inputParameter))
            return true;

        // Following regex convers all the js events and html tags mentioned in followng links.
        //https://www.owasp.org/index.php/XSS_Filter_Evasion_Cheat_Sheet                 
        //https://msdn.microsoft.com/en-us/library/ff649310.aspx

        var pattren = new StringBuilder();

        //Checks any js events i.e. onKeyUp(), onBlur(), alerts and custom js functions etc.             
        pattren.Append(@"((alert|on\w+|function\s+\w+)\s*\(\s*(['+\d\w](,?\s*['+\d\w]*)*)*\s*\))");

        //Checks any html tags i.e. <script, <embed, <object etc.
        pattren.Append(@"|(<(script|iframe|embed|frame|frameset|object|img|applet|body|html|style|layer|link|ilayer|meta|bgsound))");

        return !Regex.IsMatch(System.Web.HttpUtility.UrlDecode(inputParameter), pattren.ToString(), RegexOptions.IgnoreCase | RegexOptions.Compiled);
    } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-22T19:27:56.590

请阅读[OWASP XSS（跨站点脚本）预防备忘单](https://www.owasp.org/index.php/XSS_%28Cross_Site_Scripting%29_Prevention_Cheat_Sheet)以获取广泛的信息。黑名单标签不是一种非常有效的方法，并且会留下空白。您应该过滤输入、在输出到浏览器之前进行清理、编码 HTML 实体以及我的链接中讨论的各种其他技术。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-22T19:32:17.720

您应该将字符串编码为 HTML。使用 dotNET 方法

```
HttpUtils.HtmlEncode(string text) 
```

有更多细节[http://msdn.microsoft.com/en-us/library/73z22y6h.aspx](http://msdn.microsoft.com/en-us/library/73z22y6h.aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-22T19:55:33.697

正如已经讨论过的，将黑名单作为清理措施是无效的。想想当有人提交精心制作的输入时，您的黑名单会发生什么：

`<SCRIPT>`
`<ScRiPt>`
`< S C R I P T >`
`<scr&#00ipt>`
`<scr<script>ipt>`（您是否递归应用了黑名单；-)）

这不是对可能的攻击的列举，而只是一些关于如何打败黑名单的例子。这些都将在浏览器中正确呈现。

# asp.net-mvc-3 - 用户不是直接成员的活动目录安全组的 mvc3 授权属性

> ID：15578340
> 
> 赞同：0
> 
> 时间：2013-03-22T19:25:44.397
> 
> 标签：asp.net-mvc-3, active-directory

我在活动目录中有一个“ABC_grade_Users”组。我尝试使用 >PrincipalSearchResult groups user.GetGroups() 获取该组，但该组未显示。当我运行 GetAuthorizationGroups 时，我列出了这个组，这意味着有 6 个组，我不是直接成员。

我想使用 [Authorize(Roles = "Domain\ABC_grade_Users") ] 属性为该 AD 组授权用户，但由于用户不是 'ABC-grade_users' 的直接成员，我得到用户不在角色中的错误结果。

我的问题是如何使用授权属性授权用户角色。当我从 GetGroups() 方法列出组时，这项工作正常。

//不起作用 - [Authorize(Roles = "Domain\ABC_grade_Users") ] public ActionResult EditRecord(int id, string elig, string IsTest) { }

网络配置

# eclipse-plugin - 将插件导入 Eclipse Juno

> ID：15578350
> 
> 赞同：0
> 
> 时间：2013-03-22T19:26:39.033
> 
> 标签：eclipse-plugin, eclipse-juno

我刚刚安装（即解压缩）Eclipse Juno。我正在阅读“创建 Hellow World SWT 应用程序”教程。

它说要导入 SWT 项目，您从主菜单通过***File*** > ***Import*** ... 打开 Import 向导，然后选择***Plug-in Development*** > ***Plug-ins and Fragments***。

然而，据我所见，“导入”对话框根本不包含任何指向插件的文件夹。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:46:14.077

好的，如此处所述[，](http://www.java-forums.org/eclipse/53817-having-problems-getting-started-eclipse.html)以下步骤将起作用：

*   帮助 -> 安装新软件
*   使用：--所有可用站点--
*   通用工具 -> Eclipse 插件开发环境
*   单击“下一步”，直到您被要求同意条款。同意，完成。

安装此插件并重新启动 Eclipse 后，您将能够继续学习本教程。

# jquery - 带有ajax调用和会话的nodejs休息服务

> ID：15578351
> 
> 赞同：1
> 
> 时间：2013-03-22T19:26:39.093
> 
> 标签：jquery, ajax, node.js, session

我建立了一个 nodejs 休息服务，我想设置一个身份验证系统。其余服务由来自的 ajax 调用访问

```
$.get("http://localhost:3000/user",{},function(data){console.log(data)}); 
```

登录或ajax调用或来自浏览器的直接调用，我无法坚持使用会话或cookie。

如果我登录成功，下一次调用

```
$.get("http://localhost:3000/user",{},function(data){console.log(data)}); 
```

服务器不知道我是谁。

node.js 文件

```
app.post('/login', function (req, res) {

    if ('undefined' === typeof req.body.password || 'undefined' === typeof req.body.user) {

        res.redirect(req.headers.referer + '?error=-2');
        return;

    }

    mysql = tools.mysql();

    var user = req.body.user,
        password = crypto.createHash('md5').update(req.body.password).digest("hex"),
        result = {
            result: 0
        },
        check,
        id,
        value;

    mysql.query('SELECT id, level, nome FROM chaves_proatlantico.utilizadores WHERE email = ? and password = ?;', [user, password])
        .on('result', function (rows) {

            check = crypto.createHash('md5').update(req.socket.remoteAddress + '' + Date.now()).digest("hex");
            id = crypto.createHash('md5').update(user + password).digest("hex");
            value = {
                id: id,
                check: check
            };
            req.session.user = rows.id;
            req.session.level = rows.level;
            req.session.name = rows.nome;
            req.session.id = id;
            req.session.check = check;

            result.result = 1;

            res.cookie('restid', JSON.stringify(value), { maxAge: 900000, httpOnly: false });

            mysql.query('UPDATE chaves_proatlantico.utilizadores SET code = ? WHERE email = ? and password = ?;', [check, user, password]).on('end', function () {
                tools.mysqlend();
            })
                .on('end', function () {
                    tools.mysqlend();
                    res.redirect(req.headers.referer + '?id=' + id + '&check=' + check);
                })
                .on('error', function (err) {
                    result = {result: -1, data: err.code};
                });

        })
        .on('end', function () {
            if (1 !== result.result) {
                tools.mysqlend();
                res.redirect(req.headers.referer + '?error=' + result.result);
            }
        })
        .on('error', function (err) {
            result = {result: -1, data: err.code};
        });

});
app.get('/user', tools.requiredLogin, function (req, res) {

      var result = {
                result: 1,
                data: {
                    name: req.session.name
                }
            };
        tools.json(req, res, result);
    }); 
```

# c++ - 从另一个函数控制 RenderWindow

> ID：15578353
> 
> 赞同：1
> 
> 时间：2013-03-22T19:26:48.880
> 
> 标签：c++, window, render, sfml

这听起来可能是一个非常简单的问题，但我有 SFML 1.6，我想从另一个函数控制我的 RenderWindow...我不太擅长 C++ 或 SFML...:)

```
////////////////////////////////////////////////////////////
// Headers
////////////////////////////////////////////////////////////
#include <SFML/Window.hpp>
#include <SFML/System.hpp>
#include <SFML/Graphics.hpp>
#include <iostream>

using namespace std;

int main()
{

    // Create the main window
    sf::RenderWindow App(sf::VideoMode(800, 600, 32), "Guessing Game");
    App.SetFramerateLimit(60); //Set FPS limit to 60 FPS
    //Variables
    bool atmainmenu = true;
    //End Variables

    // Start main loop
    while (App.IsOpened())
    {
        printmessage(atmainmenu);
        // Process events
        sf::Event Event;
        while (App.GetEvent(Event))
        {
            // Close window : exit
            if (Event.Type == sf::Event::Closed)
                App.Close();

            // Escape key : exit
            if ((Event.Type == sf::Event::KeyPressed) && (Event.Key.Code == sf::Key::Escape))
                App.Close();
            if ((Event.Type == sf::Event::KeyPressed) && (Event.Key.Code == sf::Key::M)){

            }
            if ((Event.Type == sf::Event::KeyPressed) && (Event.Key.Code == sf::Key::F)){

            }
        }
        // Display window on screen
        App.Display();

    }
    return EXIT_SUCCESS;
}

void printmessage(bool atmainmenu)
{
    if(atmainmenu){
        //$$$$$$$################# HERE <----
    }
} 
```

那是我的代码，但我想从 atmainmenu 控制“应用程序”。有什么我必须做的吗？谢谢

waco001

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:28:45.807

将您的渲染窗口作为参数传递给函数，如下所示：

```
void printmessage(bool thing, sf::RenderWindow& app)
{
    app.doSomething();
} 
```

不要忘记以窗口作为参考`&`

然后调用main中的函数

```
printmessage(atmainmenu,app); 
```

# tfs - Visual Studio - 不要在“分配给”字段中显示所有域用户

> ID：15578355
> 
> 赞同：7
> 
> 时间：2013-03-22T19:26:56.103
> 
> 标签：tfs, visual-studio-2012

如果我加载 TFS Web 访问并转到安全 > 用户，我只会看到我添加到团队中的 3 个人。但是，当我尝试在 Web Access 或 Visual Studio 中将任务分配给某人时，它会列出该域中的一堆用户（并非所有用户，看起来都像所有 IT 人员）。这是从哪里来的？如何更改它...而不通过命令行导出、编辑和导入文件？

**更新：**我在 MSDN 文档中找到了这一行：

> **Team Foundation \Team Foundation 有效用户**
> 
> 该组的成员可以访问 Team Foundation Server。该组自动包含已添加到 Team Foundation Server 中任何位置的所有用户和组。您不能修改该组的成员资格。

我真的不明白...这是我们自己团队的服务器，与主要开发团队分开安装。我不知道其他 30 或 40 个用户是如何进入这个组的。对此有任何帮助的主要奖励 <3。MikeR 的回答将允许我将管理员设置为从技术上解决问题的唯一受托人，但如果可能的话，我宁愿能够按预期使用这些组。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-26T15:01:57.157

问题是**[TEAM FOUNDATION]\Valid Users**包括**[TEAM FOUNDATION]\Team Foundation Administrators**其中包括**[BUILT IN]\Administrators**

在**TFS 服务器管理控制台**中，我选择了**Application Tier**并单击了**Group Membership**。然后我双击**[TEAM FOUNDATION]\Team Foundation Administrators**并删除了**[BUILT IN]\Administrators**。

现在我只看到我的团队，而不是所有在服务器上担任本地管理员的 SQL 管理员和工程师。所有这些都没有任何命令行或插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T16:02:48.537

在 WorkItemTypeDefinition 中定义了这个可能的分配列表。通常你会导出和导入这个。如果您安装了 TFS PowerTools ( [http://visualstudiogallery.msdn.microsoft.com/b1ef7eb2-e084-4cb8-9bc7-06c3bad9148f](http://visualstudiogallery.msdn.microsoft.com/b1ef7eb2-e084-4cb8-9bc7-06c3bad9148f) )，您可以直接在 Visual Studio 中使用 WITD。

为此，请打开“工具->流程编辑器->工作项类型->从服务器打开 WIT”。选择您要连接的 TeamProjectCollection，然后选择您遇到问题的 TeamProject 和 WorkItemType。

检查“分配给”字段的规则。默认可以是“ValidUser”规则，它包括 TFS 中每个允许的用户。删除该规则并添加一个新的“AllowedValues”规则，其值类似于“[project]\Project Administrators”，而不是只能将“Project Administrators”分配给此工作项。

如果已经定义了一个组而不是所有“ValidUser”，则从组集中删除用户设置在那里。

# node.js - 使用 Compound.js 更新控制器中的属性

> ID：15578362
> 
> 赞同：1
> 
> 时间：2013-03-22T19:27:42.000
> 
> 标签：node.js, compoundjs

我尝试使用 Compound.js 创建博客。我有两个表格，“类别”和“发布”，每个表格都有日期属性，但是当我生成表格时，我得到了一个表格，每个“新”视图中都有一个日期属性的输入......

我想在创建它时在我的控制器中自动更新日期属性。

我该怎么做？

我的谢玛：

```
var Category = describe('Category', function () {
    property('name', String);
    property('date', Date);
    set('restPath', pathTo.categories);
});

var Post = describe('Post', function () {
    property('title', String);
    property('content', String);
    property('published', Boolean);
    property('date', Date);
    set('restPath', pathTo.posts);
});

Category.hasMany(Post, {as: 'posts', foreignKey: 'categoryId'}); 
```

我的模型：

```
module.exports = function (compound, Category) {
  // define Category here
}; 
```

我的控制器：

```
action('new', function () {
    this.title = 'New category';
    this.category = new Category;
    render();
});

action(function create() {
    Category.create(req.body.Category, function (err, category) {
        respondTo(function (format) {
            format.json(function () {
                if (err) {
                    send({code: 500, error: category && category.errors || err});
                } else {
                    send({code: 200, data: category.toObject()});
                }
            });
            format.html(function () {
                if (err) {
                    flash('error', 'Category can not be created');
                    render('new', {
                        category: category,
                        title: 'New category'
                    });
                } else {
                    flash('info', 'Category created');
                    redirect(path_to.categories);
                }
            });
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-20T18:45:47.900

如果您希望在默认情况下设置日期，您可以在 Schema 中这样做，如下所示：

```
var Category = describe('Category', function () {
    property('name', String);
    property('date', Date, {default: new Date});
    set('restPath', pathTo.categories);
}); 
```

如果您不希望用户看到日期字段，您可以将其从视图标记中删除，因为数据对象已经预先填充。

# shell - 我该怎么做而不是grep'ing ps的输出？

> ID：15578364
> 
> 赞同：-1
> 
> 时间：2013-03-22T19:27:51.847
> 
> 标签：shell, grep, shortcut, idioms, ps

每个人都知道这有多烦人：

```
[mybox:~ #] ps aux | grep myservice
root      2273  0.0  0.0   4360   760 ?        Ss   18:06   0:00 /usr/sbin/myservice
root     18590  0.0  0.0   4100   788 pts/2    S+   21:21   0:00 grep myservice 
```

你得到你正在寻找的过程，加上 grep。所以，好的，你可以这样做：

```
[mybox:~ #] ps aux | grep myservice | grep -v grep
root      2273  0.0  0.0   4360   760 ?        Ss   18:06   0:00 /usr/sbin/myservice 
```

或者

```
[mybox:~ #] pgrep myservice
2273 
```

但前者是 3 个完整的命令，而后者只为您获取进程 ID。有更好的选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T19:43:49.210

如果你现在的进程全名

```
ps -F -C myservice 
```

但它不适用于`myserv`of`'myserv*'`

如果您只知道部分命令，则可以将命令减少到 2：

```
ps aux | grep [m]yserv 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T18:23:13.253

如何将管道命令存储到一个带有位置参数的小型 bash shell 中？如果这是目标，这将减少击键。

```
[mybox:~ #] cat mycmd
    #!/bin/bash
    ps aux | grep $1 | grep -v grep 
```

可以称为：

```
[mybox:~ #] mycmd myservice
  root      2273  0.0  0.0   4360   760 ?        Ss   18:06   0:00 /usr/sbin/myservice 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T19:32:37.433

`ps`+`pgrep`也许？

```
$ ps -fp $(pgrep myservice)
UID    PID  PPID  C STIME TTY  TIME      CMD
user   5422  5315  0 15:37 ?   00:00:04  /usr/bin/myservice 
```

# android - 如何在android中查看应用程序的源代码

> ID：15578366
> 
> 赞同：0
> 
> 时间：2013-03-22T19:27:53.103
> 
> 标签：android, eclipse

有什么方法可以从应用程序中查看应用程序的源代码。我通过使用 apk ectractor 从应用程序中提取 apk 文件来尝试这种方法，但是当我将 apk 文件转换为 zip 时我找不到任何 src 文件。只有具有所有 xml 文件的 res 文件。我需要包含所有 java 文件的 src 文件来查看应用程序是如何工作的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T00:16:26.420

您可以执行以下逆向工程过程

1.  使用[apktool](https://code.google.com/p/android-apktool/)将您的 apk 文件反编译为
2.  使用[dex2jar](https://code.google.com/p/dex2jar/)将 dex 转换为普通的 Java jar 文件。
3.  现在你可以做任何两个了。使用[JD-GUI](http://java.decompiler.free.fr/?q=jdgui)将 jar 解码为 java 源。或 b。[使用7zip](http://www.7-zip.org/)将 jar 提取到类文件，然后使用[cavaj](http://download.cnet.com/Cavaj-Java-Decompiler/3000-2213_4-10071619.html)解码为 java 文件

必须有其他工具，您可以通过搜索找到

有用的链接：[看到这个](http://kkinder.com/2011/11/27/so-you-want-to-reverse-engineer-an-android-app-apk/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T21:12:15.667

根据 apk/zip，它可以包含 java 类或 .dex 文件。如果它包含 .dex 文件，首先您需要从中提取类（在线搜索 dex 类提取器），然后当您获得实际的 java 类时，您还需要一个 java 反编译器才能获得这些类的源代码。

# java - 如何在 MVC 中使用线程？

> ID：15578368
> 
> 赞同：0
> 
> 时间：2013-03-22T19:27:57.737
> 
> 标签：java, multithreading, model-view-controller

我有一个 Java 小组项目。我们要模拟客户从邮局领取包裹。- 客户不定期来 - 包裹在很长一段时间后到达 - 店员等待客户；当有一个 - 他把包裹递给他们。

我已经创建了一个客户和一个包裹线程，可以根据需要添加客户和包裹。我还制作了一个职员线程，在客户到达之前一直处于休眠状态。

问题是线程如何适应 MVC？

我为每个线程创建了单独的 Runnable 类。我是否将视图传递给他们的构造函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T19:32:26.500

> 我为每个线程创建了单独的 Runnable 类。我是否将视图传递给他们的构造函数？

不，这样的“背景”任务不会直接提供视图。应用程序所有层共有的组件是模型。在后台工作的线程应在完成工作时更新相应的模型。视图观察模型以根据需要更新自身。

# html - iPhone 上的 HTML 邮件预览

> ID：15578370
> 
> 赞同：5
> 
> 时间：2013-03-22T19:28:00.783
> 
> 标签：html, ios, html-email

我正在从我的应用程序中发送一些电子邮件。电子邮件中包含 html，电子邮件中的第一项是公司徽标图像

该电子邮件在包括 iphone 在内的所有电子邮件客户端中都可以正常呈现，但问题在于 iphone 主题行下方的电子邮件“预览”。由于邮件正文有徽标，因此邮件预览会显示图像 url。如何避免在预览中显示图像 url 并在预览中包含更有意义的文本。我确实需要将徽标作为电子邮件正文中的第一件事。

有什么解决方法吗？

坦斯克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-21T19:19:14.560

在过去几天我自己测试了各种迭代之后，只需将我的两分钱添加到这个讨论中。这个问题的其他答案很好开始，但他们都错过了几个边缘情况（或有时不是那么边缘情况）。我不会声称我已经在每个客户端上都测试过，但我已经让它在所有大客户端上运行：Gmail、Yahoo、Outlook.com/Hotmail、Outlook for Windows 和 OS X（各种连接到 Exchange、POP 和 IMAP 的版本）、各种基于 Web 的 IMAP 客户端、iOS 邮件（都连接到交换服务器和常规 IMAP 服务器：是的，它在这些情况下呈现不同的预览）、Android 邮件、Android/iOS Gmail 客户端、邮箱、Thunderbird 和其他一些我现在想不起来的东西。

使用预标题 div。设置 div 内联样式，因为一些基于 Web 的电子邮件服务 (Gmail) 会`<style>`从电子邮件的 HTML 头部中去除标签。内联样式 ,`display: none;`适用于大多数客户端，但在 gmail Web 视图和 Yahoo Web 视图中失败，除非您将其定义为`display: none !important;`. 如果您在那里没有`!important`声明，则当在这些服务的基于 Web 的客户端中阅读它时，preheader div 将在电子邮件正文中可见。

现在，我们正在使用具有以下内联定义样式的 div 来隐藏我们的预头文件，以防止我们测试过的各种客户端和服务：`display: none !important; height:0px; overflow:hidden; color:#ffffff; font-size:2pt;`. 其中一些不适用于所有或大多数情况，但在所有情况下，它们很好地涵盖了各种基础。特别是，该`height`hack 只影响了几个客户端，并且完全破坏了 Gmail 基于 Web 的客户端（它目前将高度声明重写为 min-height，这是出乎意料的），但由于它尊重`display: none !important;`预标头最终还是隐藏在那里。正如 ste7enm 所提到的，颜色和字体大小的 hack 在某些客户端/服务转发消息时更有效地隐藏了预标头。

Side note: After testing, redesigning and retesting our templates several times, I've concluded that HTML email is the sworn enemy of all things good and pure.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T19:37:15.357

您是否尝试过`alt`在`img`标签内使用？例如 `<img src="mycompany.png" alt="company name" />`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T19:39:47.367

电子邮件通常会在电子邮件的顶部包含一段文本以解决该问题。

见 - [http://www.aweber.com/blog/email-marketing/do-you-use-snippets-for-more-opens.htm](http://www.aweber.com/blog/email-marketing/do-you-use-snippets-for-more-opens.htm)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-16T22:15:39.993

我知道这个问题有点老了，但它在搜索中出现了，我想我会添加另一个小提示：

如果你打算在顶部包含一个 DIV（preheader，per @John），请确保对其进行样式设置。

我发现当人们在 Outlook 中收到电子邮件时，虽然原始邮件中没有出现预标题，但如果他们转发或回复邮件，它会重新出现。

使用这个简单的解决方法来避免这个问题：

```
<div style="display:none; color:#fff; font-size:2pt;">This is the abstract text that will appear in your email client's message preview or notification window.<br />&nbsp;</div> 
```

当他们收到预标题时，它会被隐藏，文本仍用于 Outlook 的预览通知或 iOS 上的邮件中的文本预览，当他们转发或回复您的邮件时，它是如此的小而白，以至于您的听众不会看见。

另请注意，使用旧 BlackBerry 设备（如果 HTML 被禁用，则为 BlackBerry 4 和 BlackBerry 5）的用户可以看到这种类型的标题。

# html - 页脚位于屏幕中间

> ID：15578373
> 
> 赞同：2
> 
> 时间：2013-03-22T19:28:12.517
> 
> 标签：html, css, css-float

我正在尝试制作页脚始终位于末尾的布局。但是，HTML 正文应该有一个固定在左侧和右侧的 div，并用剩余的大小拆分另一个。

在那之前我没有问题......但是当右边的div有很多行HTML时，通常不会一直持续到最后，并且页脚位于屏幕中间。

当 #main 与 position: relative; 发生错误，但如果你接受它，扬声器将无法按我需要的方式工作。

我已经尝试了一切，但无法修复。

这里的例子：http: [//jsfiddle.net/WzE3g/](http://jsfiddle.net/WzE3g/)

```
#principal 
{
    width:100%; 
    float : left;   
    word-wrap: break-word;    
    /*display: block;*/
    position:relative;
    /*position:inherit;*/
    bottom:0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:30:59.940

使用**位置：固定；****而不是#rodape**元素中的绝对值。这样，它总是在最后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T22:21:44.800

我认为您在谈论粘性页脚...这是一个带有解释的[示例](http://www.martinbean.co.uk/bootstrap/sticky-footer/)

# ios - iOS Box SDK BoxFolder.children 始终为零

> ID：15578384
> 
> 赞同：0
> 
> 时间：2013-03-22T19:28:52.747
> 
> 标签：ios, box-api

我可以使用 [Box createFolderWithName:] 来获取 folder_id。但是当我尝试使用 folder_id 来获取它的孩子时，它不起作用。这是我的代码：

```
[Box createFolderWithName:@"My APP" parentFolderID:[Box rootFolderID] share:NO callbacks:^(id<BoxOperationCallbacks>on){

    on.userInfo (^(NSDictionary* result) {
        // do something with the return value (typically stored with key @"results") of the operation

        NSNumber *appFolderId = [result objectForKey:@"folder_id"];
        BoxFolder *appFolder = [Box folderWithID:appFolderId];
        [appFolder updateWithCallbacks:^(id<BoxOperationCallbacks>on){
            on.after(^(BoxCallbackResponse response) {
                if (response == BoxCallbackResponseSuccessful) {
                    NSLog(@"Folder updated. Children count is: %d", [appFolder.children count]);
                    // Send a notification, call a delegate, use KVO use locally or whatever to use the children.
                }
                else {
                    NSLog(@"Folder not updated.");
                }
            });

        }];

    });

}]; 
```

孩子总是零。我也尝试了 [Box rootFolder] 但结果相同。

有人可以帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:41:48.687

我认为以下示例可能会有所帮助。

```
if (appFolder.isFolder) {
        [appFolder updateWithCallbacks:^(id<BoxOperationCallbacks> on) {
            on.after(^(BoxCallbackResponse response) {
                if (response == BoxCallbackResponseSuccessful) {
                    NSLog(@"Folder updated. Children count is: %d", [appFolder.children count]);
                    // Send a notification, call a delegate, use KVO use locally or whatever to use the children.
                }
                else {
                    NSLog(@"Folder not updated.");
                }
            });
        }];
    }
    else {
        NSLog(@"NOT WORKING WITH A FOLDER!");
    } 
```

# c++ - 如何使用 STL 将数组转换为向量

> ID：15578391
> 
> 赞同：1
> 
> 时间：2013-03-22T19:29:13.897
> 
> 标签：c++, arrays, vector, stl

此代码是使用数组的线性搜索程序。出于好奇，我想知道如何使用 STL 向量代替数组重写这段代码，但仍然具有相同的输出。

```
#include <iostream>
#include <string>
using namespace std;

template <typename T>
int linearSearch(T list[], int key, int arraySize)
{
  for (int i = 0; i < arraySize; i++)
  {
    if (key == list[i])
      return i;
  }

  return -1;
}

int main()
{
  int intArray[] =
  {
    1, 2, 3, 4, 8, 15, 23, 31
  };
  cout << "linearSearch(intArray, 3, 8) is " << linearSearch(intArray, 3, 8) << endl;
  cout << "linearSearch(intArray, 10, 8) is " << linearSearch(intArray, 10, 8) << endl;

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:40:06.207

This could work (it is based on the STL implementation):

```
#include <iostream>
#include <string>
#include <vector>

using namespace std;

template <typename ForwardIter, typename Type>
int linearSearch(ForwardIter beg, ForwardIter end, Type key )
{
  int i = 0;
  for (;beg != end; ++beg)
  {
    if (key == *beg)
      return i;
    i++;
  }

  return -1;
}

int main()
{
  vector< int > vec = { 1, 2, 3, 4, 5, 6, 7 };
  cout << "linearSearch 1 is " << linearSearch(vec.begin(), vec.end(), 4) << endl;
  cout << "linearSearch 2 is " << linearSearch(vec.begin()+2, vec.end(), 1) << endl;

  return 0;
} 
```

**Note:** it can also work for, `std::list` and `std::deque`. I think it will produce correct results even in a normal array.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T19:34:22.453

您可以通过更改参数类型和 main.

```
#include <iostream>
#include <string>
#include <vector>
using namespace std;

template <typename T>
int linearSearch(vector<T> list, int key)
{
   for (size_t i = 0; i < list.size(); i++)
   {
      if (key == list[i])
        return i;
   }

   return -1;
}

int main()
{
  int intArray[] =
  {
    1, 2, 3, 4, 8, 15, 23, 31
   };
   vector<int> list(intArray, intArray+8);

   cout << "linearSearch(list, 3,) is " << linearSearch(list, 3) << endl;
   cout << "linearSearch(list, 10) is " << linearSearch(list, 10) << endl;

   return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T19:31:55.793

```
template <typename T>
int linearSearch(const vector<T> &list, const T &key)
{
    auto itr = std::find(list.begin(), list.end(), key);

    if (itr != list.end())
        return std::distance(list.begin(), itr);
    else
        return -1;
}

int main()
{
    int intArray[] = {1, 2, 3, 4, 8, 15, 23, 31};

    std::vector<int> vec(intArray, intArray + 8);

    int i = linearSearch(vec, 15);
} 
```

*注意：启用 C++11*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-02T01:53:40.787

请看以下使用 STL 线性搜索算法的示例。并在此处查看 std::find 的可能实现以及将其用于向量的示例：[https](https://en.cppreference.com/w/cpp/algorithm/find) ://en.cppreference.com/w/cpp/algorithm/find 它会为您的问题提供一个很好的答案。

```
#include <algorithm>
#include <iostream>
#include <vector>

int main() {

    std::vector<int> intsCollection {1, 2, 3, 4, 8, 15, 23, 31};

    std::vector<int>::iterator val1 = std::find(intsCollection.begin(), intsCollection.end(), 3);
    int pos1 = (val1 != intsCollection.end()) ? (val1 - intsCollection.begin()) : -1;

    std::vector<int>::iterator val2 = std::find(intsCollection.begin(), intsCollection.end(), 10);
    int pos2 = (val2 != intsCollection.end()) ? (val2 - intsCollection.begin()) : -1;

    std::cout << "linearSearch(intsCollection, 3, 8) is " << pos1 << std::endl;
    std::cout << "linearSearch(intsCollection, 10, 8) is " << pos2 << std::endl;

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T19:40:49.520

```
 template <typename T>
 int linearSearch(T list, int key) 
```

如上所述更改代码的前两行，以及替换`arraySize`为`list.size()`应该足以支持任何类型的容器`operator []`（包括向量），并且索引为连续`int`.

请注意，虽然您的模板尝试将数组的内容抽象为 typename `T`，但它隐含地假定它`int`的类型为`key`. 更通用的实现是：

```
template <typename T>
int linearSearch(T list, typename T::value_type key) 
```

此解决方案中的另一个问题是`list`. 我们可以通过将其转换为参考来克服这个问题，如下所示：

```
// includes ...
#include <type_traits>
using namespace std;

template <typename T>
int linearSearch(add_lvalue_reference<T> list, typename T::value_type key){
    for (size_t i = 0; i < list.size(); i++) {
        if (key == list[i])
            return i;
    }
    return -1;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-22T19:35:30.947

通过尽可能少的更改，您可以这样做：

```
#include <iostream>
#include <string>
#include <vector>
using namespace std;

// Using const std::vector<T> & to prevent making a copy of the container
template <typename T>
int linearSearch(const std::vector<T> &list, int key)
{
  for (size_t i = 0; i < list.size(); i++)
  {
    if (key == list[i])
      return i;
  }

  return -1;
}

int main()
{
  std::vector<int> arr = { 1 ,2, 3, 4, 8, 15, 23, 31 } ;

  cout << "linearSearch(intArray, 3) is " << linearSearch(arr, 3) << endl;
  cout << "linearSearch(intArray, 10) is " << linearSearch(arr, 10) << endl;

  return 0;
} 
```

我建议不要使用`using namespace std;`.

# mysql - 如何将 SELECT 语句保存为 shell 变量并插入它

> ID：15578392
> 
> 赞同：0
> 
> 时间：2013-03-22T19:29:18.933
> 
> 标签：mysql, shell, unix

我将如何执行以下操作：

```
$ VAR=`mysql -u root files -e 'select * from path'` # save SELECT as local var
$ mysql -u root files -e 'insert into path values `echo $VAR`' # INSERT var 
```

这里的第二个命令不起作用。正确的语法/方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:32:56.383

使用双引号允许变量插值。并且``echo $VAR``相当于平原`$VAR`。

```
mysql -u root files -e "insert into path values $VAR" 
```

不过，这不会修复 SQL 语法错误。你想做什么，备份`path`表？如果是这样，[mysqldump 命令](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html)就是[要使用的工具](http://www.thegeekstuff.com/2008/09/backup-and-restore-mysql-database-using-mysqldump/)。

# url - Yii 网址管理

> ID：15578398
> 
> 赞同：1
> 
> 时间：2013-03-22T19:29:46.550
> 
> 标签：url, yii

我有一个需要特定使用 url 的用例。我希望用户拥有自己的页面，并且 url 应该以这样一种方式让他们很容易记住他们的页面。

我正在考虑制作网址 DOMAIN.COM/USERNAME

我怎样才能做到这一点？我可能应该做一个网址管理器？我怎样才能使“正常”控制器仍然可以工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T20:16:46.940

好吧，您应该阅读以下内容：[http ://www.yiiframework.com/doc/guide/1.1/en/topics.url](http://www.yiiframework.com/doc/guide/1.1/en/topics.url)

Yii URL 管理非常方便，例如：

```
'urlManager'=>array(
  .....
  'rules'=>array(
    .....
    // AFTER other rules
    '<userName:.+>' => 'user/view', 
```

Yii 将使用第一个匹配规则，因此您必须在此之前为其他控制器定义规则。

在你的控制器中：

```
public function actionView($userName)
{
  // do what you want
} 
```

# jquery - Jquery 水平幻灯片 div 容器

> ID：15578402
> 
> 赞同：0
> 
> 时间：2013-03-22T19:29:53.500
> 
> 标签：jquery, animation, jquery-animate

我想用 jquery 水平滑动一个 div 容器。我尝试了一些js代码但没有成功。我该怎么做？是否可以将 div 容器（ajaxify-container）滑到主容器之外（例如最小宽度 = 768px 的外部容器）？如果主容器不是全宽，则将其滑动到页面浏览器的全宽内。

这是我的带有淡入淡出效果的代码：

```
$("#ajaxify_container").fadeOut(1500, function () {
                $(this).html(data).fadeIn(1500, function () {
                    $('#LoadingImage').hide();
                });
            }); 
```

谢谢

# angularjs - 非常基本的角度场景不起作用

> ID：15578405
> 
> 赞同：1
> 
> 时间：2013-03-22T19:30:06.083
> 
> 标签：angularjs

谁能告诉我为什么 Angular 这个非常基本的例子不起作用？

```
<div ng-app>
    <div ng-controller="DemoCtrl">
        Hi, {{firstName}} {{lastName}}!
    </div>
</div>

function DemoCtrl($scope)
{
    $scope.firstName = "Steve";
    $scope.lastName = "Smith";
} 
```

它给出了错误 "Argument 'DemoCtrl' is not a function, got undefined" 。. . JsFiddle 在这里：http: [//jsfiddle.net/SfU3z/](http://jsfiddle.net/SfU3z/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T23:10:40.910

这只是你的小提琴如何设置的问题。这是一个修改后的示例，可以使用相同的代码正常工作。jsfiddle.net/7TJfk/1

# java - 无法让 Tomcat 在我的 Struts 2 应用程序上启动服务器

> ID：15578406
> 
> 赞同：1
> 
> 时间：2013-03-22T19:30:06.173
> 
> 标签：java, tomcat, struts2

我正在尝试运行一个*非常*基本的 Struts 2 应用程序，但是每当我尝试运行服务器时，我的日志中都会出现以下错误：

```
Mar 22, 2013 12:09:44 PM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Program Files (x86)\Java\jre6\bin;.;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:/Program Files (x86)/Java/jre7/bin/client;C:/Program Files (x86)/Java/jre7/bin;C:/Program Files (x86)/Java/jre7/lib/i386;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\QuickTime\QTSystem\;C:\Users\DJ\Downloads\eclipse-jee-juno-SR2-win32\eclipse;
Mar 22, 2013 12:09:44 PM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:DDay' did not find a matching property.
Mar 22, 2013 12:09:44 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
Mar 22, 2013 12:09:44 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
Mar 22, 2013 12:09:45 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 939 ms
Mar 22, 2013 12:09:45 PM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Mar 22, 2013 12:09:45 PM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.37
Mar 22, 2013 12:09:45 PM org.apache.catalina.core.StandardContext filterStart
SEVERE: Exception starting filter struts2
  java.lang.ClassNotFoundException: org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter
  at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1713)
  at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1558)
  at org.apache.catalina.core.DefaultInstanceManager.loadClass(DefaultInstanceManager.java:527)
  at org.apache.catalina.core.DefaultInstanceManager.loadClassMaybePrivileged(DefaultInstanceManager.java:509)
  at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:137)
  at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:260)
  at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:107)
  at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4656)
  at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5309)
  at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
  at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
  at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
  at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
  at java.util.concurrent.FutureTask.run(Unknown Source)
  at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
  at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
  at java.lang.Thread.run(Unknown Source)
Mar 22, 2013 12:09:45 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Error filterStart
Mar 22, 2013 12:09:45 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Context [/DDay] startup failed due to previous errors
Mar 22, 2013 12:09:45 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-8080"]
Mar 22, 2013 12:09:45 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
Mar 22, 2013 12:09:45 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 601 ms 
```

我已经获得了 struts 2 应用程序所需的所有 .jars

commons-fileupload-1.2.2.jar

commons-io-2.0.1.jar

commons-logging-1.1.1.jar

commons-logging-api.1.1.jar

freemarker-2.3.19.jar

ognl-3.0.6.jar

struts2-core-2.3.12.jar

xwork-core-2.3.12.jar

javassist-3.11.0.GA.jar

这是我的 web.xml 文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:javaee="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd" id="WebApp_9" version="2.4">
<display-name>Struts2 Application</display-name>
<filter>
  <filter-name>struts2</filter-name>
  <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
</filter>
<filter-mapping>
  <filter-name>struts2</filter-name>
  <url-pattern>/*</url-pattern>
</filter-mapping>
</web-app> 
```

我在这里看到了几个关于相同错误的帖子，但似乎没有一个解决方案有效。如果不是罐子也不是`web.xml`文件，那会是什么？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:35:40.077

我不知道 Struts2 但是... ...看这个网站：[http](http://www.jarvana.com/jarvana/search?search_type=class&java_class=org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter) ://www.jarvana.com/jarvana/search?search_type=class&java_class=org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter 它似乎对于那个版本的 struts2，该类不在 struts2-core.jar 中

尝试使用其他版本的struts2。

# mysql - 内部查询很难写

> ID：15578408
> 
> 赞同：-1
> 
> 时间：2013-03-22T19:30:27.687
> 
> 标签：mysql, sql

我有两张桌子：

`customer`和`schema_id`

架构表有：`schema_id, period, amt, updated_date`

我需要加入客户和模式，但只检索加入的最新记录而不是其他记录。

```
customer table

cust_id  name schema_id
1        ABC  1 
```

模式表

```
schema_id  period amt updated_date
1          1      100  2010-4-1
1          2      150  2011-4-1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T19:34:50.767

如果您需要`max(updated_date)`for each `schema_id`，则可以使用子查询：

```
select c.cust_id, c.name, c.schema_id, s.period, s.amt, s.updated_date
from customer c
inner join
(
  select s1.schema_id, s1.period, s1.amt, s1.updated_date
  from `schemas` s1
  inner join 
  (
    select schema_id, max(updated_date) MaxDate
    from `schemas`
    group by schema_id
  ) s2
    on s1.schema_id = s2.schema_id
    and s1.updated_date = s2.maxdate
) s
  on c.schema_id = s.schema_id 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/aa2c3/5)

然后，子查询用于连接回您的表，以返回具有匹配日期和 schema_id 的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T19:44:05.480

如果我理解您的问题，您需要获取“模式”的最新注册。

我认为您需要使用 max() 函数。因此，请尝试以下查询：

```
select *
from customer c,
     schema s
where c.schema_id = s.schema_id
  and s.updated_date = ( select max(s2.updated_date)     
                         from schema s2
                         where s2.schema_id = s.schema_id
                       ) 
```

问候！

埃德米尔顿

# mysql - MySQL 正在以小数形式删除“00”

> ID：15578410
> 
> 赞同：1
> 
> 时间：2013-03-22T19:30:30.340
> 
> 标签：mysql

我有一个小数列的表，长度 = 9，小数 = 2。

如果我输入`21.59`（例如）的值，它可以**正常**工作。

如果我把`52.00`它只写`52`。我需要保留`52.00`。

> 高手提问：数据库可以这样存储值吗？而不是在 select 中使用 format/cast 来检索值...

如下所述，这是有道理的：

> “您不应该担心数据库级别的显示格式问题，而是......显示级别”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T19:35:05.603

使用[`FORMAT`](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_format)功能：

```
select format(mycolumn, 2) from mytable; 
```

这也具有将千位分隔符添加到数字中的效果，因此您将获得类似`123,456.70`. 如果这对您不起作用，则有一些解决方法。

鉴于 MySQL 没有世界上最好的格式化数字的工具，这样的显示问题通常在客户端代码中处理。

# css - 如何在 div 中添加 2 个重叠元素？

> ID：15578413
> 
> 赞同：3
> 
> 时间：2013-03-22T19:30:45.833
> 
> 标签：css, html, overlapping

```
<div id="parent" style="height:250px;width:250px;display:inline">
   <div id="child" style="height:100%;width:100%;z-index:10001"></div>
   <select style="height:100%;width:100%;z-index:10000"><option/></select>
</div> 
```

我的要求是在父 div 中包含 select 和子 div 元素，使子 div 位于 select 元素的顶部并完全覆盖它。稍后我想根据事件隐藏子 div 并使选择元素可见。子 div 和 select 元素都应该各自占据父 div 的整个大小。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T20:11:52.047

[http://jsfiddle.net/dyBjZ/2](http://jsfiddle.net/dyBjZ/2)

```
#parent {
    position: relative;
    overflow: auto;
}
.child {
    position: absolute;
    height:100%;
    width:100%;
}

<div id="parent">
    <div class="child">
        <select>
            <option>One</option>
            <option>Two</option>
        </select>
    </div>
    <div class="child" id="child">Click me</div>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T20:13:47.667

从上面的评论中得到输入，我能够解决我的问题。这就是我所做的。将其发布在这里以防其他人登陆此页面搜索。

```
<div id="parent" style="height:250px;width:250px">
    <div id="child" style="display:block;height:100%;width:100%"></div>
    <div id="selectParent" style="display:none;height:100%;width:100%">
      <select><option/></select>
    <div>
</div> 
```

基于 javascript 事件，我将子 div 的显示从块切换为无。并在 selectParent 中将显示从无切换为阻止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T20:21:02.827

第一个问题是给`#parent`div 一个大小，从而`display: inline`从它的样式中删除。

接下来，您可以将两个元素从`display: none`to`display: block`和 vv 切换，但要将其减少一半，您可以使用绝对定位，将元素从默认标记布局中取出，如[本例](http://jsfiddle.net/NGLN/LX6Gw/)所示。

HTML：

```
<div id="parent">
   <div id="child"></div>
   <select></select>
</div> 
```

CSS：

```
#parent {
    height: 250px;
    width: 250px;
    position: relative;
}
#child {
    position: absolute;
    background: #aaa;
    height: 100%;
    width: 100%;
}
select {
    height: 100%;
    width: 100%;
}
#child.hidden {
    display: none;
} 
```

# python - ClassName(object) 中的 super(ClassName, self) 有什么作用？（在 django 文档中使用）

> ID：15578416
> 
> 赞同：4
> 
> 时间：2013-03-22T19:30:56.867
> 
> 标签：python, django

以下代码实际上来自[关于基于类的视图中的表单的 Django 文档](https://docs.djangoproject.com/en/dev/topics/class-based-views/generic-editing/)：

```
import json

from django.http import HttpResponse
from django.views.generic.edit import CreateView

class AjaxableResponseMixin(object):
    """
    Mixin to add AJAX support to a form.
    Must be used with an object-based FormView (e.g. CreateView)
    """
    def render_to_json_response(self, context, **response_kwargs):
        data = json.dumps(context)
        response_kwargs['content_type'] = 'application/json'
        return HttpResponse(data, **response_kwargs)

    def form_invalid(self, form):
        if self.request.is_ajax():
            return self.render_to_json_response(form.errors, status=400)
        else:
            return super(AjaxableResponseMixin, self).form_invalid(form)

    def form_valid(self, form):
        if self.request.is_ajax():
            data = {
                'pk': form.instance.pk,
            }
            return self.render_to_json_response(data)
        else:
            return super(AjaxableResponseMixin, self).form_valid(form)

class AuthorCreate(AjaxableResponseMixin, CreateView):
    model = Author 
```

我不明白的代码是`super(AjaxableResponseMixin, self)`. 我知道`super(ChildClass, self)`是用来在子类的代码中调用父类的方法的。但是`AjaxableResponseMixin`没有父母！这是做什么的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T19:36:21.437

在`AuthorCreate`,`AjaxableResponseMixin`的超类将是`CreateView`：

```
>>> class a(object): pass
... 
>>> class b(object): pass
... 
>>> class c(a,b): pass
... 
>>> c.mro()
[<class '__main__.c'>, <class '__main__.a'>, <class '__main__.b'>, <type 'object'>] 
```

`mro()`是“方法解析顺序”，`super`指的顺序。

# asp.net - 如何进行自定义警报

> ID：15578419
> 
> 赞同：0
> 
> 时间：2013-03-22T19:31:05.273
> 
> 标签：asp.net, messagebox

我想知道是否可以`alert`使用`javascript`或者`ajaxcontroltoolkit`我只需要知道是否可以定制，如果可以，我也想知道如何？
到目前为止我学到的唯一方法是这样的：

```
ScriptManager.RegisterStartupScript(this, typeof(Page), "alert", "alert('MessageHere');", true); 
```

但这有点丑。而且我看到了of`popUp`并且很好（但仅在要求确认时才有用。我不知道如何只发送您知道的消息？ 例如：您单击按钮然后收到消息。`ConfirmButtonExtender``ajaxcontrolToolkit``buttons``CONFIRMATION``confirming``register!``You registered the new user Sucessfuly`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:38:43.403

There are quite a few plugins for this; if you are already using JQuery, you can use the [JQuery UI Dialog](http://jqueryui.com/dialog/). If you are using AJAX control toolkit, there is an extender to show/hide a DIV, called [the ModelPopupExtender](http://www.codeproject.com/Articles/34996/ASP-NET-AJAX-Control-Toolkit-ModalPopupExtender-Co). There are plenty of other components to find if you google "modal popup". [This article](http://www.designlabelblog.com/2009/03/20-ways-to-create-javascript-modal.html) has a bunch of other alternatives too.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T19:39:35.670

Here's something you can try:

In your asp.net code-behind...

In your page load event...

```
IF some condition is met THEN
   me.pnl_success.visible = true
   ELSE me.pnl_success.visible = false
END IF 
```

And then in your .aspx page, put an `<asp:panel>` in there with your success message in it.

# cookies - 为什么 httpclient 为每个请求刷新 jsession id？

> ID：15578429
> 
> 赞同：1
> 
> 时间：2013-03-22T19:32:06.860
> 
> 标签：cookies, httpcontext, apache-httpclient-4.x, jsessionid, cookiestore

我正在尝试点击 url（登录屏幕），获取 jsessionid（J2EEJSESSIONID）并将其添加到 cookie 存储中，然后进入上下文并使用凭据点击相同的 url。我期待登录成功屏幕。但是，我再次被登录屏幕弹跳。而且，我打印了两个命中的响应标头。我期待具有相同 J2EESESSIONID 的响应来维持会话。相反，两个会话 ID 都不同。请帮忙。

请找到以下代码：

```
 HttpEntity entity = null;
    DefaultHttpClient httpClient = new DefaultHttpClient();
    try{

        // Initialization
        HttpPost httpPost = new HttpPost("https://yyyyy.xxx.com/enl");
        HttpClientExample httpClientExample = new HttpClientExample();
        CookieStore cookieStore = new BasicCookieStore();
        HttpContext httpContext = new BasicHttpContext();
        httpContext.setAttribute(ClientContext.COOKIE_STORE, cookieStore);
        HttpGet httpGet = new HttpGet("https://yyyyy.xxx.com/enl");

        // Execute Get
        HttpResponse httpResponse = httpClient.execute(httpGet, httpContext);

        // Print the header for 1st url
        org.apache.http.Header[] headers = httpResponse.getAllHeaders();
        System.out.println("##### Header length::"+headers.length);
        for(int i=0;i<headers.length; i++)
        {
            System.out.println("Header Name::"+headers[i].getName());
            System.out.println("Header Val::"+headers[i].getValue());
        }  

        // update Cookie for the next hit
        org.apache.http.Header[] cookieHeaders = httpResponse.getHeaders("Set-Cookie");
        String html = EntityUtils.toString(httpResponse.getEntity());
        cookieStore = httpClientExample.updateCookieStore(cookieHeaders, cookieStore);
        httpClient.setCookieStore(cookieStore);
        httpContext.setAttribute(ClientContext.COOKIE_STORE, cookieStore);

        // Setting the redirects since i received 302 error
        httpClient.setRedirectStrategy(new DefaultRedirectStrategy() {                
            public boolean isRedirected(HttpRequest request, HttpResponse response, HttpContext context)  {
                boolean isRedirect=false;
                try {
                    isRedirect = super.isRedirected(request, response, context);
                } catch (ProtocolException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                if (!isRedirect) {
                    int responseCode = response.getStatusLine().getStatusCode();
                    if (responseCode == 301 || responseCode == 302) {
                        return true;
                    }
                }
                return false;
            }
        });

        // Added because i received Circular redirect error
        httpClient.getParams().setParameter(ClientPNames.ALLOW_CIRCULAR_REDIRECTS, true); 

        // Execute Post with credentials
         httpClient.getCredentialsProvider().setCredentials(
                 new AuthScope("http://yyyyy.xxx.com", 443),
                 new UsernamePasswordCredentials("usr", "pswd"));
         httpPost.setHeader("Cookie", "JSESSIONID="+ getSessionId(cookieHeaders));
         HttpResponse response = httpClient.execute(httpPost, httpContext);

       // Print the response
        entity = response.getEntity();
        InputStream content1 = (InputStream)entity.getContent();
        System.out.println("############### 2nd #####################"+response.getStatusLine().getStatusCode());
        BufferedReader in1   = 
            new BufferedReader (new InputStreamReader (content1));
        String line1;
        while ((line1 = in1.readLine()) != null) {
            System.out.println(line1);
        }

        // Print the header for 2nd url
        org.apache.http.Header[] headers1 = response.getAllHeaders();
        System.out.println("##### Header length 2 ::"+headers1.length);
        for(int i=0;i<headers1.length; i++)
        {
            System.out.println("Header Name 2 ::"+headers1[i].getName());
            System.out.println("Header Val 2 ::"+headers1[i].getValue());
        }  

    }
    catch(Exception e)
    {
        e.printStackTrace();
    }
    finally{

        try {
            EntityUtils.consume(entity);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        httpClient.getConnectionManager().shutdown();
    }
}

private static String getSessionId(org.apache.http.Header[] headers) {
    // TODO Auto-generated method stub

    for(int i=0;i<headers.length; i++)
    {
        String str = headers[i].getValue();
        String[] strArray = str.split("=");
        String[] cookieValueArray = strArray[1].split(";");
        System.out.println(strArray[0]+"|"+cookieValueArray[0]);
        if(strArray[0].startsWith("J2EEJSESSION"))
        {
            System.out.println("cookieValueArray[0]:"+cookieValueArray[0]);
            return cookieValueArray[0];
        }

    }
    return null;
}

protected CookieStore updateCookieStore(org.apache.http.Header[] headers, CookieStore cookieStore)
{
    for(int i=0;i<headers.length; i++)
    {
        String str = headers[i].getValue();
        String[] strArray = str.split("=");
        String[] cookieValueArray = strArray[1].split(";");
        System.out.println(strArray[0]+"|"+cookieValueArray[0]);
        BasicClientCookie cookie = new BasicClientCookie(strArray[0], "A"+cookieValueArray[0]);
        /*if(strArray[0].startsWith("J2EEJSESSION"))
        {
            cookie.setDomain("yyyyy.xxx.com");
        }
        else
        {
            cookie.setDomain(".xxx.com");
        }*/

        cookie.setDomain(".xxx.com");
        cookie.setPath("/");
        cookieStore.addCookie(cookie);
        if(strArray[0].startsWith("J2EEJSESSION"))
        {
            BasicClientCookie cookie1 = new BasicClientCookie("JSESSIONID", "A"+cookieValueArray[0]);
            cookie1.setDomain(".xxx.com");
            cookie1.setPath("/");
            cookieStore.addCookie(cookie1);
        }
    }
    return cookieStore;
} 
```

另一个观察：当我从下面的代码片段中删除“A”连接时，我没有在第二次点击中获得 J2EESESSIONID：

BasicClientCookie cookie = new BasicClientCookie(strArray[0], "A"+cookieValueArray[0]);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T20:53:59.373

在我发布此问题的同一天找到答案..想到分享..答案很简单..由于某些原因身份验证不成功，因此创建了新的 jsessionId。用“BasicNameValuePair”替换了“httpClient.getCredentialsProvider().setCredentials()”，它工作了:)

# ruby - 使用 ruby 三元运算符放置一个值并增加一个变量

> ID：15578437
> 
> 赞同：0
> 
> 时间：2013-03-22T19:32:29.607
> 
> 标签：ruby, ternary-operator

如果测试为真，我想输入 1，如果不是，我想输入 0。我还想增加一个每次测试成功时计数的计数器。我现在有这个：

```
puts test1 ? sum += 1 : 0
puts test2 ? sum += 1 : 0
puts test3 ? sum += 1 : 0
puts test4 ? sum += 1 : 0 
```

显然问题是，如果我每次都增加 sum，那么我不是打印 1，而是打印 sum 的值。

我尝试制作一个增加 sum 然后返回 1 的小方法，如下所示：

```
def inc_sum_ret_1(sum)
  sum += 1
  1
end 
```

并用它代替“sum += 1”。当然，这每次只会从 0 增加到 1。

有没有好的方法来做到这一点？从知识的角度来看，我比让我的代码特别整洁更好奇。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T19:39:10.483

好吧，我认为您要编写的代码是

```
puts test1 ? (sum += 1; 1) : 0
puts test2 ? (sum += 1; 1) : 0
puts test3 ? (sum += 1; 1) : 0
puts test4 ? (sum += 1; 1) : 0 
```

但当然，这不是一段很好的代码。`if`就代码清晰度和消除重复而言，只使用 会好得多。

# html - 将一行上的文本分隔到另一行？

> ID：15578439
> 
> 赞同：1
> 
> 时间：2013-03-22T19:32:33.140
> 
> 标签：html, css

我想做这样的文字：

![http://www.picz.ge/img/s4/1303/22/3/33efdad184ec.jpg](../Images/092f0c1bffe5dba3a3e0e392d044dd86.png)

看起来像这样：

```
texttext:      textttt
ttttttttttt:   ttt215555
textt:         trtrtrt 
```

但是当我尝试时，它看起来像这样：

```
texttext: textttt
ttttttttttt: ttt215555
textt: trtrtrt 
```

我目前正在使用的代码：

```
<div class="aligncenter" style="width: 700px; height: 1px; border-top: 1px dotted #999999; font-size: 0;">-</div>
Hours: Mon - Sun: 3:00 pm - 6:00 am Phone: 777777777777 Address: asd str. #14
<div class="aligncenter" style="width: 700px; height: 1px; border-top: 1px dotted #999999; font-size: 0;">-</div> 
```

我已经这样解决了（wordpress）：http: [//jsfiddle.net/SEcfh/](http://jsfiddle.net/SEcfh/)

```
<table border="0" align="left">
<tbody>
<tr>
<td style="width: 80px;">Phone:</td>
<td>+999 999 999 999</td>
</tr>
<tr>
<td style="width: 80px;">Phone:</td>
<td>+999 999 999 999</td>
</tr>
<tr>
<td style="width: 80px;">Phone:</td>
<td>+999 999 999 999</td>
</tr>
</tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:37:13.220

您可以使用`white-space: pre`或`white-space: pre-wrap`保留文本中的空格。`<table>`您还可以对表格数据使用带有 s 的布局，或`<dl> / <dt> / <dd>`使用固定宽度术语的定义列表设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T19:40:38.770

您可能不想使用`white-space: pre`，因为您必须手动在文本中添加适量的空格。

使用具有一定宽度的跨度，包裹在宽度为 2x 的 div 中，您可以轻松实现此目的。见这里：http: [//jsfiddle.net/qaTDN/](http://jsfiddle.net/qaTDN/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T20:19:00.663

这是表格数据，为什么不把它放在一个`<table>`?

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T06:08:32.000

要在一定宽度后换行或换词，您可以使用此 CSS 标记：

**word-wrap：断词；**

# mysql - 错误代码：1292。截断不正确的 DOUBLE 值：“和”

> ID：15578440
> 
> 赞同：0
> 
> 时间：2013-03-22T19:32:33.923
> 
> 标签：mysql, procedure

当我在 mysql 工作台中运行以下代码时，我得到上述错误请帮忙

```
#   IF p_Name is not null THEN
 #                   SET m_sql = m_sql +' Name=''' + p_Name + ''' and ';
#   END IF;

     If p_ReligionID is not null THEN
                    SET m_sql = m_sql + '" ReligionId= "' + 'CAST(p_ReligionID AS CHAR(30))' + 'and';
    END IF;

     If p_CasteID is not null THEN
                    SET m_sql = m_sql + '" CasteId= "' + 'CAST(p_CasteID AS CHAR(30))'  + 'and';

    END IF;

    If p_CountryID is not null THEN
                    SET m_sql=m_sql+    '"  Countryid= "' + 'CAST(p_CountryID AS CHAR(30))' + 'and';
    END IF;

    If p_MotherTongueID is not null THEN
                    SET m_sql=m_sql+'"  MotherTongueID= "' + 'CAST(p_MotherTongueID AS CHAR(30))' + 'and';
    END IF; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:44:59.490

假设 m_sql 在输入时有效并且至少有一个条件通过，则最终语句以“and”结尾。在我知道的任何方言中，这都不是有效的 SQL。然后你必须处理看似无关的引用。

我建议在后续条件的开头插入 AND

```
 If p_ReligionID is not null THEN
                SET m_sql = m_sql + ' and ReligionId = ' + 'CAST(p_ReligionID AS CHAR(30))';
END IF; 
```

（我是 SQL Server 的人，所以 MySql 的过程语言的细节超出了我的理解）

# php - 将数据从 php 传递到 javascript 的最有效方式 - 隐藏表单字段或 json_encode

> ID：15578447
> 
> 赞同：2
> 
> 时间：2013-03-22T19:33:12.457
> 
> 标签：php, javascript, jquery, parameter-passing

所以我的特殊问题如下 - 我有一个 PHP 页面，它遍历坐标列表并将它们显示在我的页面上。

除此之外，我还想在地图上显示它们。

我想出了两种方法，这两种方法都有效——我很好奇哪种方法最好，为什么？

我的理解是，通过将我的 javascript 放在下面，我的 javascript 在我的页面加载之前不会执行。正是由于这个原因，这两种方法都有效。

```
$(document).ready(function() 
{

}); 
```

第一个是隐藏的表单域。我可以通过我的经度和纬度并使用 jQuery 在我的 javascript 文件中获取它们。

第二种是简单地使用

```
<script type='text/javascript'>
    var myarray = <?php echo JSON_encode($array); ?>;

</script> 
```

在我的 PHP 脚本中，然后以类似的方式在我的 Javascript 文件中访问/循环它，我在我的 PHP 文件中循环它。

```
 for (var i=0, tot=myarray.length; i < tot; i++) 
{//plot points} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T20:25:58.407

我肯定会选择 JavaScript 数组。

原因：

(1) 表单字段用于发布到服务器，而您没有这样做。那么，为什么在不需要的时候将隐藏的输入元素添加到 DOM 中呢？

(2) 使用 JavaScript 数组中的值会更容易。遍历它们更容易，它们不必是字符串值。当您获取隐藏输入元素的值时，它是一个字符串。然后，如果它确实是其他类型，则必须将其解析为另一种类型。JavaScript 值甚至可以是嵌套对象。

我不会担心性能基准。不会有任何显着差异。易于编码更为重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T20:25:18.997

考虑以下情况：如果您使用选项 2（在服务器上循环通过它）并且您同时有 200 个请求，那么您将让每个请求在服务器中执行此循环。现在，当您对数组进行 JSON 编码并将其提供给客户端时，您在服务器中完成了它，并让不同的浏览器（客户端）处理其余的事情。现在，当您必须将相同数量 (200) 序列化为 json 时，情况会发生变化。所以这是速度和性能的问题：哪个更快？哪些性能更​​好`JSON_encode`或`for`循环并将所有内容写入服务器`echo()`？答案将根据对象的大小而变化。所以无论如何，继续测试哪个更快，一个简单[**的脚本基准**](https://stackoverflow.com/questions/8291366/how-to-benchmark-efficiency-of-php-script)就足够了。

# javascript - 触发除条件 jquery 之外的更改事件

> ID：15578450
> 
> 赞同：1
> 
> 时间：2013-03-22T19:33:23.703
> 
> 标签：javascript, jquery

```
$('#query_txt').change(function() {
  return window.location = $('#query_txt').data('url') + '/searches?query=' + $('#query_txt').val();
}); 
```

当对输入字段进行更改时触发此事件`#query_txt`

**但是，除非**用户单击此链接，否则我想执行此代码：

```
<a href="#" onclick="return false;" class="select2-search-choice-close" tabindex="-1"></a> 
```

我已经尝试使用咖啡脚本使用此版本，**但**无法正常工作：

```
unless $(".select2-search-choice-close").click()
  $('#query_txt').change ->
    window.location = $('#query_txt').data('url') + '/searches?query=' + $('#query_txt').val() 
```

**我该怎么做？谢谢！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:34:44.397

`true`单击它时制作一个条件标志。或者`change`在链接的点击处理程序中取消绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T19:35:59.467

试试这个

```
<a href="#"  class="select2-search-choice-close" tabindex="-1"></a>

var buttonClicked = false;
 $('#query_txt').change(function() {
     if(buttonClicked)
     window.location = $('#query_txt').data('url') + '/searches?query=' +  $('#query_txt').val();
  });
$(".select2-search-choice-close").click(function(){
  buttonClicked = true;
   return false;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T08:27:51.803

解决此问题的方法是[单击关闭按钮和使用 select2 单击建议文本时](https://stackoverflow.com/questions/15586879/when-click-on-close-button-and-when-click-on-suggestions-text-with-select2)。

Select2 在回调中返回一个对象，并且可以检查它是否在那里添加或删除。谢谢艾尔。

# java - 比较 hashMap 值

> ID：15578453
> 
> 赞同：3
> 
> 时间：2013-03-22T19:33:36.323
> 
> 标签：java, hashmap, compare

我正在练习一些面试问题，但不知道如何比较 hashMap 值。前提是你有一本带字符串的杂志。您必须从杂志中剪下适当数量的字符以形成赎金票据。我已经设法将字符和字符的出现次数都添加到 hashMap 但如何比较两个 hashMap 以确定我有足够的字母。任何指导将不胜感激。

杂志 = {g=2, =14, d=2, e=2, a=4, n=1, o=5, l=4, m=1, .=1, k=1, I=2, h=2, i=6, w=1, T=1, u=1, t=2, s=3, r=1, y=2} 赎金= {w=1, =3, o=1, l=4, k=1, I=1, y=1, i=2}

```
String mag = "this is what I said Im going to do. i really like you a lot";
        String ransom = "i will kill you";

        Map<Character,Integer> map = new HashMap<Character,Integer>();
        Map<Character,Integer> ransomMap = new HashMap<Character,Integer>();

        for(int i = 0; i < mag.length() -1; i++)
        {
            char c = mag.charAt(i);
            if(!map.containsKey(c))
            map.put(c, 1);
            else{
                int value = map.get(c);
                map.put(c,++value);
            }
        }

        System.out.println(map);

        for(int i = 0; i < ransom.length()-1; i++ )
        {
        char c = ransom.charAt(i);
        if(!ransomMap.containsKey(c))
            ransomMap.put(c,1);
        else
        {
            int value = (ransomMap.get(c));
            ransomMap.put(c,++value);
        }
        }
        System.out.println(ransomMap);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T19:41:24.560

检查你的赎金记录中的每封信，看看报纸上是否有足够的信息：

```
boolean enoughLetters(Map<Character, Integer> magMap, Map<Character,Integer> ransomMap) {
    for( Entry<Character, Integer> e : ransomMap.entrySet() ) {
        Character letter = e.getKey();
        Integer available = magMap.get(letter);
        if (available == null || e.getValue() > available) return false;
    }
    return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T20:03:30.193

安德鲁的回答有效。但我通过使用（测试驱动开发）TDD 解决了这个问题。以下是我提出的测试：

```
@Test
public void whenMagazineHasLessCharactersThanRansomThenYouCanCreateRansom() {
    assertFalse(canMakeRansom("abcdef", "abcdefg"));
}

@Test
public void whenMagazineHasSameCharactersOfRansomThenYouCanCreateRansom() {
    assertTrue(canMakeRansom("abcdefg", "abcdefg"));
}

@Test
public void whenMagazineHasSameCharactersOfRansomButInDifferentOrderThenYouCanCreateRansom() {
    assertTrue(canMakeRansom("abcdefg", "gfedcab"));
}

@Test
public void whenMagazineHasSameCharactersOfRansomButHasMoreThenYouCanCreateRansom() {
    assertTrue(canMakeRansom("aabbccdefg", "agfedcab"));
}

@Test
public void whenMagazineHasSameCharactersOfRansomButRansomHasMoreThenYouCantCreateRansom() {
    assertFalse(canMakeRansom("aabbccdefg", "aaaaagfedcab"));
} 
```

左边参数是杂志，右边是赎金。这太大了，无法作为评论发布，所以我正在使用答案。

```
private boolean canMakeRansom(String magazine, String ransom) {
    Map<Character, Integer> magList = createCharCountMap(magazine);
    Map<Character, Integer> ransomList = createCharCountMap(ransom);
    return magHasAtLeastTheseCharacters(magList, ransomList);   //Andrew's implementation
}

private Map<Character, Integer> createCharCountMap(String chars) {
    HashMap<Character, Integer> charCountMap = new HashMap<Character, Integer>();
    for (char c : chars.toCharArray()) {
        if (charCountMap.containsKey(c)) {
            charCountMap.put(c, charCountMap.get(c) + 1);
        } else {
            charCountMap.put(c, 1);
        }
    }
    return charCountMap;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T19:41:14.873

如果我正确理解了这个问题。您可能可以检查所有字符 [ az AZ 0-9 !@#$%^& *(* )(_+{:<}">? ]。

# c# - 在不同屏幕之间导航并传递对象

> ID：15578454
> 
> 赞同：-2
> 
> 时间：2013-03-22T19:33:36.383
> 
> 标签：c#, asp.net, asp.net-mvc

我是 MVC 的新手..

我有一个客户添加屏幕。我为它开发了控制器、模型和视图屏幕。这很简单。

现在我必须处理订单屏幕，以及处理订单详细信息的 2 个附加屏幕。

所以.. 首先用户填写订单屏幕，然后单击下一步按钮，然后转到订单详细信息 1 屏幕。填写更多信息。然后点击下一个按钮并转到 Order Detail2 屏幕并填写更多信息。完成后，客户单击保存按钮并保存整个订单。

我不知道如何 1\. 将订单对象从 Order 屏幕传递到 Order Detail1，然后将对象从这里传递到 Order Detail2 屏幕。

在 3 个屏幕之间，我将如何设置 Controller、Model 和 View 类？Order、OrderDetail1 和 OrderDetail2 会有每个控制器、模型和视图吗？

这三个如何相互连接，以便..最后..我会在 OrderDetail2 中点击保存并保存所有内容？

我只是在寻找高级提示，所以我可以开始搜索这些概念。现在，我什至很困惑我要搜索什么 MVC 术语......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:37:42.730

Why you don't use a jquery wizard and put all information on the same screen?

[http://thecodemine.org/#_demoForm=sweden](http://thecodemine.org/#_demoForm=sweden)

# actionscript-3 - 动作脚本数组合并

> ID：15578460
> 
> 赞同：0
> 
> 时间：2013-03-22T19:34:14.187
> 
> 标签：actionscript-3, merge, arrays

几个小时前我发布了我的问题，但我想我想出了如何以更易于理解的方式提出我的问题。

这是我的代码：

```
// 1\. Intro
var introPL1:Array = ["intro1","intro2","intro3","intro4"];
var introPL2:Array = ["intro5","intro6","intro7","intro8","intro9"];
var introPL3:Array = ["intro10","intro11"];
var introPL4:Array = ["intro12","intro13"];
var allIntro:Array = [introPL1,introPL2,introPL3,introPL4];
// 2\. Clothes
var clothesPL1:Array = ["clothes1","clothes2","clothes3","clothes4","clothes5"];
var clothesPL2:Array = ["clothes6","clothes7","clothes8"];
var clothesPL3:Array = ["clothes9","clothes10"];
var clothesPL4:Array = ["clothes11","clothes12","clothes13"];
var allClothes:Array = [clothesPL1,clothesPL2,clothesPL3,clothesPL4];
// 3\. Colored Numbers
var colNumPL1:Array = ["colNum1","colNum2","colNum3","colNum4","colNum5"];
var colNumPL2:Array = ["colNum6","colNum7","colNum8"];
var colNumPL3:Array = ["colNum9","colNum10"];
var colNumPL4:Array = ["colNum11","colNum12","colNum13"];
var allColNum:Array = [colNumPL1,colNumPL2,colNumPL3,colNumPL4];

var allStuff:Array;
allStuff = allIntro.concat(allClothes, allColNum);
trace(allStuff[4]); 
```

当我跟踪 allStuff[4] 时，它显示“clothes1,clothes2,clothes3,clothes4,clothes5”。问题是，我希望所有的东西都在 allStuff 数组中（没有子数组），当我跟踪 allStuff[4] 时，我希望它显示“intro5”（巨大的 allStuff 数组中的第五项） .

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T20:32:45.333

您要使用的功能是`concat`

[这是adobe](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Array.html#concat%28%29)的示例

```
var numbers:Array = new Array(1, 2, 3);
var letters:Array = new Array("a", "b", "c");
var numbersAndLetters:Array = numbers.concat(letters);
var lettersAndNumbers:Array = letters.concat(numbers);

trace(numbers);       // 1,2,3
trace(letters);       // a,b,c
trace(numbersAndLetters); // 1,2,3,a,b,c
trace(lettersAndNumbers); // a,b,c,1,2,3 
```

* * *

这很简单：

```
allStuff= allStuff.concat(introPL1,introPL2,introPL3,introPL4,clothesPL1,clothesPL2,clothesPL3,clothesPL4,colNumPL1,colNumPL2,colNumPL3,colNumPL4); 
```

你也可以做一个

```
allStuff = []
for each(var $string:String in $arr){
   allStuff.push($string)
} 
```

对于每个数组，或将其变成一个函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T06:46:38.407

好的，一旦你像这样声明了你的数组，你需要一个额外的操作来展平你的数组`allClothes`等等。这样做：

```
function flatten(a:Array):Array {
    // returns an array that contains all the elements 
    // of parameter as a single array
    var b:Array=[];
    for (var i:int=0;i<a.length;i++) {
        if (a[i] is Array) b=b.concat(flatten(a[i]));
        else b.push(a[i]);
    }
    return b;
} 
```

它的作用：该函数首先创建一个空数组，然后逐个成员检查参数成员，如果第 i 个成员是一个数组，则以该成员作为参数调用自身，并将结果添加到其临时数组中，否则它只是将下一个成员推`a`入临时数组。因此，要使您`allIntro`的数组成为平面数组，请`allIntro=flatten(allIntro)`在声明它之后调用。其他数组也一样。

# c# - 如何使用 ItextSharp/C# 设置表格的位置？

> ID：15578462
> 
> 赞同：1
> 
> 时间：2013-03-22T19:34:15.620
> 
> 标签：c#, pdf, position, itext

我正在编写一个 Windows 窗体代码来为我的客户提供报价。我希望它制作pdf文件。我确实知道如何定位文本。我确实知道如何制作表格，并用我的 datagridview 中的内容填充它。

但是我怎样才能将这个表格垂直放置在页面中间（不是水平对齐 - 我知道这一点），或者任何预定义的位置？下面是我的代码。结果是表格直接位于页面顶部，即使我在页面中间的某个位置通过 SetTextMatrix 放置了一些文本。我应该做一些大的，透明的行还是什么？

```
PdfPTable tabela = new PdfPTable(dataGridView1.Columns.Count);

    float[] szerokości = new float[] 
    {
      dataGridView1.Columns[0].Width,
      dataGridView1.Columns[1].Width,
      dataGridView1.Columns[2].Width,
      dataGridView1.Columns[3].Width,
      dataGridView1.Columns[4].Width,
      dataGridView1.Columns[5].Width,
      dataGridView1.Columns[6].Width
    };

    tabela.SetWidths(szerokości);
    tabela.HorizontalAlignment = 1; // 0 - lewo, 1 - środek , 2 - prawo
    tabela.SpacingBefore = 10.0F;

    PdfPCell komorka = null;

    foreach (DataGridViewColumn c in dataGridView1.Columns)
    {
      komorka = new PdfPCell(new Phrase(new Chunk(c.HeaderText, czcionkaNaglowek)));
      komorka.HorizontalAlignment = PdfPCell.ALIGN_CENTER;
      komorka.VerticalAlignment = PdfPCell.ALIGN_CENTER;
      tabela.AddCell(komorka);
    }

    if (dataGridView1.Rows.Count > 0)
    {
      for (int i = 0; i < dataGridView1.Rows.Count; i++)
      {
        for (int j = 0; j < dataGridView1.Columns.Count; j++)
        {
          komorka = new PdfPCell(new Phrase(dataGridView1.Rows[i].Cells[j].Value.ToString(), czcionkaTabela));
          komorka.HorizontalAlignment = PdfPCell.ALIGN_CENTER;
          komorka.VerticalAlignment = PdfPCell.ALIGN_CENTER;
          tabela.AddCell(komorka);
        }

      }

    }

    oferta.Add(tabela);
    oferta.Close();
  }
  catch (DocumentException dex)
  {
    MessageBox.Show(dex.ToString());
  }
  catch (Exception ex)
  {
    MessageBox.Show(ex.ToString());
  } 
```

# tfs - 如何使用 TFS api 2010、2012 删除特定附件？

> ID：15578466
> 
> 赞同：0
> 
> 时间：2013-03-22T19:34:31.993
> 
> 标签：tfs, tfs-sdk

如何使用 TFS api 2010、2012 删除附件集合中的附件。我只知道 wi.Attachments.Clear(); 删除所有附件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T07:10:59.110

这条路怎么样？我尝试并成功了。

```
//wi is a WorkItem  
wi.Open();  
for (int i = wi.Attachments.Count - 1; i >= 0; i--)  
{  
    if (wi.Attachments[i].Name == "Attach1.txt")  
    wi.Attachments.RemoveAt(i);  
}  
wi.Save();
wi.Close(); 
```

# java - 频率音调发生器播放错误的声音

> ID：15578468
> 
> 赞同：1
> 
> 时间：2013-03-22T19:34:36.263
> 
> 标签：java, android

我在生成具有特定频率的声音时遇到了一些麻烦。我已经设置了我的应用程序，因此您可以在搜索栏上来回滑动以选择特定频率，然后应用程序应使用该频率来生成音调。

我目前的音调很好，但它与您设置的频率完全不同。（而且我知道问题不在于将值从搜索栏传递到“音调生成过程”，所以它一定是我生成音调的方式。）

这段代码有什么问题？谢谢

```
private final int duration = 3; // seconds
 private final int sampleRate = 8000;
 private final int numSamples = duration * sampleRate;
 private final double sample[] = new double[numSamples];
 double dbFreq = 0; // I assign the frequency to this double
 private final byte generatedSnd[] = new byte[2 * numSamples];

 ...

    void genTone(double dbFreq){

        // fill out the array
        for (int i = 0; i < numSamples; ++i) {
            sample[i] = Math.sin(2 * Math.PI * i / (sampleRate/dbFreq));
        }

        // convert to 16 bit pcm sound array
        // assumes the sample buffer is normalised.
        int idx = 0;
        for (final double dVal : sample) {
            // scale to maximum amplitude
            final short val = (short) ((dVal * 32767));
            // in 16 bit wav PCM, first byte is the low order byte
            generatedSnd[idx++] = (byte) (val & 0x00ff);
            generatedSnd[idx++] = (byte) ((val & 0xff00) >>> 8);
        }
    }

    void playSound(){
        final AudioTrack audioTrack = new AudioTrack(AudioManager.STREAM_MUSIC,
                sampleRate, AudioFormat.CHANNEL_CONFIGURATION_MONO,
                AudioFormat.ENCODING_PCM_16BIT, numSamples,
                AudioTrack.MODE_STATIC);
        audioTrack.write(generatedSnd, 0, generatedSnd.length);
        audioTrack.play();
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T15:45:01.300

您的代码实际上是正确的**，但**请查看[Sampling theorem](https://en.wikipedia.org/wiki/Nyquist%E2%80%93Shannon_sampling_theorem)。

简而言之：您必须将采样率设置为高于 2*max_frequency。所以设置`sampleRate = 44000`，你应该听到更高的频率正确。

# java - 在不创建新副本的情况下获取数组的一部分

> ID：15578469
> 
> 赞同：8
> 
> 时间：2013-03-22T19:34:38.643
> 
> 标签：java, arrays

我正在尝试找到一种解决方案/解决方法，用于在不创建新副本的情况下对超大数组进行切片。这是我的问题。

假设我有一个大小为 1 亿或更多的 double/int 数组。我将许多表示不同事物的不同数组存储在一个非常大的数组中，以显着节省内存使用量。因此，我有一个大小为 1 亿的数组，而不是每个大小为 100 的 100 万个数组。我存储索引（开始和停止）以跟踪我的数据。

我想获得数千个大小为 100 的切片。如果我使用 Arrays.copyOfRange() 方法来获得切片，它就违背了将所有内容放在一个大数组中的目的，因为每个切片都是一个占用内存的新副本。

我有遗留代码（许多人多年来编写的超过 100 万行代码）可以处理自己的数据（较小的数组）。无法修改现有代码以使用大型数组中的索引（开始、结束）。

如果我能以某种方式返回原始数组，使得返回的数组是一个引用（或假装是），其中索引 0 是原始大数组中的某个任意索引，那就太好了。

在 C/C++ 中，我可以轻松地返回一个具有特定偏移量和长度的指针，调用代码可以使用该指针。

我在 Java 中有哪些选择？

编辑：我查看了以下类似的问题，但它不包含对我的问题的回复。 [如何在不复制数据的情况下在 Java 中获取数组的子数组？](https://stackoverflow.com/questions/3395547/how-to-get-a-sub-array-of-array-in-java-without-copying-data?rq=1)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T19:38:11.213

For an array of int values, you can wrap in an [`IntBuffer`](http://docs.oracle.com/javase/7/docs/api/java/nio/IntBuffer.html). You can also wrap a slice of an array.

```
int[] largeArray = . . .

// create a slice containing the elements 100 through 149 (50 elements):
IntBuffer slice = IntBuffer.wrap(largeArray, 100, 50); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-27T08:34:08.230

如何创建一个包含对原始数组和起始索引的引用的包装类，并使用此包装的实例来访问原始数组。

下面的代码在语法上可能不正确，但它应该给你的想法。

```
public class ArraySlice(){
  private int startIndex;
  private int[] originalArray;
  //getters-setters

  public ArraySlice(int[] originalArray, int startIndex){
    //Initialize
  }

  public int get(int index){
    return originalArray[startIndex+index]
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T19:37:59.773

Your best option is to store the indexes of the slices in a separate structure, such as an array storing those indexes.

This way, you do not instantiate **large** arrays being a partition of the whole data array.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-27T08:31:53.380

Can you create your own object that stores index, size and reference to the original array?

```
class CustomizedArray {
  int startIndex;
  int size;
  int[] originalArray;

  public CustomizedArray(int startIndex, int size, int[] originalArray) {
    this.startIndex = startIndex;
    this.size = size;
    this.originalArray = originalArray;
   }

   public int getIndex(int index) {
     int originalIndex = startIndex+index;
     if(index <0 || originalIndex >= startIndex+size) {
        throw new IndexOutOfBoundException();
     }
     return originalArray[originalIndex];

} 
```

Then you can store CustomizedArray in some bigger structure.

# .htaccess - .htaccess RewriterRule - 重定向到站点索引

> ID：15578474
> 
> 赞同：0
> 
> 时间：2013-03-22T19:35:02.870
> 
> 标签：.htaccess

我有以下重写：

```
RewriteEngine On
Options +Indexes

RewriteRule ^/#/why-us/44534/$ http://www.new-site.com/why-us/? [R=301,NE,NC,L]
RewriteRule ^/#/about-us/33945/$ http://www.new-site.com/about-us/? [R=301,NE,NC,L] 
```

我把它放在我网站根目录的 .htaccess 文件中。但是，当访问：www.old-site.com/#/why-us/44534 时，我只得到 old-site.com 的“索引 /”页面

不知道为什么旧站点的url结构以/#/开头，但这不是我可以控制的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:16:17.513

这是因为浏览器在哈希符号之后没有向 Web 服务器发送任何请求以获取 URL 部分，这就是为什么对于 URL 的原因：`www.old-site.com/#/why-us/44534`browser just sent `www.old-site.com/`to web server while trying to scroll down page to an undefined tag `why-us/44534`。

# symfony - 如何将 Symfony2 项目（某些文件）更新到远程

> ID：15578482
> 
> 赞同：0
> 
> 时间：2013-03-22T19:35:20.817
> 
> 标签：symfony, web-deployment

到目前为止，我一直在使用 Symfony1.4 进行开发，并且部署项目或将其更新到远程主机中没有问题。我刚刚使用了 sfFtpPlugin，一切都很完美：[http ://www.symfony-project.org/plugins/sfFtpPlugin](http://www.symfony-project.org/plugins/sfFtpPlugin)

但现在我从 Symfony2 (2.2.0) 开始，首先我有一个问题：当我做出改变时如何更新它？

第一次部署我知道有一些选项：通过 FTP 上传完整项目或使用 Maestro（例如在 ServerGrove.com 托管中提供）使用这些工具我可以上传所有内容，但在我需要更新的情况下...... 50 欧元？文件，我当然不能通过 FTP 手动完成。

感谢大家的帮助！

PS：附加信息：我有一些SVN知识，几天前开始学习GIT。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:40:41.710

这方面的文档很棒。Cookbook 提供了适用于 Git 和 SVN 的工作流程。

[http://symfony.com/doc/current/cookbook/workflow/index.html](http://symfony.com/doc/current/cookbook/workflow/index.html)

如果您没有可用的 shell，您可以在本地计算机上使用 composer 来更新您的项目，然后通过 FTP 传输整个项目。

这包括如何存储不同环境的设置：

[http://symfony.com/doc/current/cookbook/configuration/environments.html](http://symfony.com/doc/current/cookbook/configuration/environments.html)

我个人使用私人[Satis 存储](https://github.com/composer/satis)库来部署我的所有代码。

这样我就不必使用 FTP，只需 composer create-project/install/update。

# oracle - 如何修复解码错误？

> ID：15578492
> 
> 赞同：0
> 
> 时间：2013-03-22T19:35:53.907
> 
> 标签：oracle, plsql, oracle10g, oracle11g, oracle9i

我有以下语句需要正确，当 v_variable = 'KP' 时，会出错。任何人都可以帮忙！

```
select *
  FROM pat_register_org_det prod
 where prod.org_code in
       decode(v_variable, 'K', '3', 'KP', '3, 6', 'PAK', '6'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T19:46:19.340

```
select *
FROM pat_register_org_det prod
where (v_variable, prod.org_code) in 
  (('K', '3'), ('KP', '3'), ('KP', '6'), ('PAK', '6')); 
```

# c++ - constexpr 替换数学常量，如 M_PI

> ID：15578495
> 
> 赞同：4
> 
> 时间：2013-03-22T19:36:02.127
> 
> 标签：c++, c++11, constants, constexpr, cmath

是否有任何 C++11`constexpr`常量可以用来代替来自 的常量宏`<cmath>`，即类似`M_PI`和朋友的常量？`const`或者缺少在运行时提供这些常量的任何全局值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T22:21:22.893

C++ 标准库中没有定义预定义的 constexpr 或全局 const 常量。但是您可以自己定义它们，例如：

```
namespace MathConstants {
    const double E =            2.71828182845904523536;
    const double LOG2E =        1.44269504088896340736;
    const double LOG10E =       0.434294481903251827651;
    const double LN2 =          0.693147180559945309417;
    const double LN10 =         2.30258509299404568402;
    const double PI =           3.14159265358979323846;
    const double PI_2 =         1.57079632679489661923;
    const double PI_4 =         0.785398163397448309616;
    const double PI_1_PI =      0.318309886183790671538;
    const double PI_2_PI =      0.636619772367581343076;
    const double PI_2_SQRTPI =  1.12837916709551257390;
    const double SQRT2 =        1.41421356237309504880;
    const double SQRT1_2 =      0.707106781186547524401;
}; 
```

或者使用 boost math 常量模板，[这里](http://www.boost.org/doc/libs/1_55_0/libs/math/doc/html/math_toolkit/constants.html)有一些文档（没有使用过）。

# cordova - Phonegap + jquery mobile + windows phone：后退按钮问题

> ID：15578496
> 
> 赞同：2
> 
> 时间：2013-03-22T19:36:07.540
> 
> 标签：cordova, jquery-mobile, windows-phone, back-button

我正在为 Windows Phone 开发一个应用程序。除了（设备的）后退按钮外，该应用程序本身运行良好。后退按钮可以正确导航，直到它停止的某个点。此时它显示了 AJAX 加载程序。如果再次按下返回按钮，应用程序将关闭。

我的应用程序的结构如下（我使用的是多页面结构）：

应用程序加载 -> 用户必须选择语言 -> 带有其他页面按钮的主屏幕

在主屏幕上，用户可以进一步导航到应用程序。后退按钮正常工作，直到必须再次显示主屏幕。

以下是主屏幕外观的示例：

```
<div data-role="page" id="zero">
  <div data-role="content">
    <a href="#one" data-role="button" id="button-one" data-icon="plus">button-one</a>
    <a href="#two" data-role="button" id="button-two" data-icon="plus">button-two</a>
    <a href="#three" data-role="button" id="button-three" data-icon="plus">button-three</a>
    <a href="javascript:randomFunction();" data-role="button" id="button-four" data-icon="plus">button-four</a>
  </div>
</div> 
```

我使用了几个按钮来激活 javascript 功能。在这些功能结束时，我使用`$.mobile.changePage("#four");`导航到页面。

所有按钮都可以正常工作，但是当导航回主屏幕时，它会停止并显示 AJAX 加载程序。

也许一些有用的信息 - 我的设备就绪功能如下所示：

*如果 localstorage 包含语言的值，请设置语言并导航到主屏幕。

*如果本地存储不包含语言的值，请导航到用户可以选择语言的页面。

注意：在用户可以选择语言的页面上按下后退按钮时，应用程序关闭（正常），之后，用户被导航到主屏幕。如果在此处按下后退按钮，应用程序也会关闭。我觉得这有点奇怪，因为我认为它必须导航回语言选项页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-05T12:20:24.300

我不知道您使用的是什么 Windows Phone 版本，但我遇到了 WP 8.1 的一些后退按钮问题。科尔多瓦[后退按钮](http://cordova.apache.org/docs/en/4.0.0/cordova_events_events.md.html#backbutton)事件似乎不起作用。我为 Windows Phone 制作了一个自定义的后退按钮实现。

```
WinJS.Application.addEventListener("backclick", function (evt) {
    if (!jQuery.mobile.activePage.is("#mainPage")) {
        history.back();
        // Prevent the default behavior by returning true. evt.preventDefault doesn't cancel the external code.
        return true;
    }
    // Execute the default behavior.
    return false;
}; 
```

# sql - 将 varchar MM/DD/YYYY 数据转换或转换为日期时间 MM/DD/YYYY

> ID：15578501
> 
> 赞同：0
> 
> 时间：2013-03-22T19:36:19.320
> 
> 标签：sql, sql-server, datetime, varchar

我正在尝试将 varchar mm/dd/yyyy 数据转换/转换为日期时间 mm/dd/yyyy 格式，以便我可以使用 between 子句查询范围。

我之前看到过类似的问题，但日期中没有斜线，我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-22T19:38:33.270

要进行适当的范围查询，您可以以可预测的方式从错误的区域格式转换，然后使用开放式范围。现在，这并不能保护您免受某人进入`06/08/2013`并表示 8 月 6 日而不是 6 月 8 日，但如果您支持自由文本输入，那么您将不得不承担风险。

```
DECLARE @s DATETIME, @e DATETIME;

SELECT @s = CONVERT(DATETIME, '03/13/2013', 101),
       @e = CONVERT(DATETIME, '03/26/2013', 101);

SELECT <cols>
FROM dbo.table_name
  WHERE datetime_column >= @s
  AND datetime_column < DATEADD(DAY, 1, @e); 
```

理想情况下，您不允许用户输入诸如`m/d/y`. 如果您控制存储过程的输入格式，则可以发送明确的日期文字，例如`YYYYMMDD`. 或者更好的是，使用强类型参数。您可以从用户输入临时废话中获得的越多，您的头痛就越少。请阅读这些文章：

*   [BETWEEN 和魔鬼有什么共同点？](https://sqlblog.org/2011/10/19/what-do-between-and-the-devil-have-in-common)

*   [要改掉的坏习惯：错误处理日期/范围查询](https://sqlblog.org/2009/10/16/bad-habits-to-kick-mis-handling-date-range-queries)

# javascript - javascript中url标签中的图像位置

> ID：15578506
> 
> 赞同：0
> 
> 时间：2013-03-22T19:36:30.457
> 
> 标签：javascript, html, image

我有一个变量，可以在其中动态填充图像位置。

我需要使用该变量更改背景图像。我无法找到一种方法来做到这一点。

```
var myImg = '/images/example1.jpg';

document.body.style.background = "url(myImg) no-repeat"; 
```

这似乎不起作用。

是否存在语法问题或者应该以不同的方式完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:38:21.587

`myImg` is the literal word in side the string. Use concatenation to use the variable:

```
document.body.style.background = "url(" + myImg + ") no-repeat"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T19:46:59.863

我喜欢这种方式

> var bodyStyle = 文档.body.style;
> 
> bodyStyle.backgroundImage = 'url(' + yourImage + ')';
> 
> bodyStyle.backgroundRepeat = '不重复'

# php - 返回下拉选择框选项的while循环中的所有行

> ID：15578507
> 
> 赞同：1
> 
> 时间：2013-03-22T19:36:35.043
> 
> 标签：php, while-loop

我正在尝试将所有行作为选择框选项返回，但它只返回第一行

```
while($parent_cat = mysql_fetch_array( $result )) 

{
   return '<option value="'.$parent_cat['categoryid'].'">'.$parent_cat['title'].'</option>';
} 
```

我怎样才能返回所有行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T19:41:35.633

您可以通过将一些属性作为参数传递并根据需要构建动态下拉列表来扩展以下功能。

```
function showDropDown() {

   $html = '<select>';

   $i = 0;
   while (your loop condition) {
      $html .= '<option value="">Hello World</option>';
      $i++;
   }

   $html .= '</select>';

   //in case your loop fails return empty instead of drop down without options.
   return $i > 0 ? $html : '';

}

echo showDropDown(); 
```

**我使用上述功能的方式是：**

```
 function buildDropDown(array $array, $attributes = array()) {
      if (! empty($array)) {
         $html = '<select ';
         foreach($attributes as $attr => $val) {
             $html .= $attr . '="' . $val . '" ';
         }

         foreach($array as $key => $value) {
             $html .= '<option value="'.$key.'">'.$value.'</option>';
         }

         $html .= '</select>';

         return $html;
      }
      return '';
  }

  $testArr = array(1 => 'A', 2 => 'B', 3 => 'C'); 
  $attrs = array(
            'id' => 'hello', 
            'name' => 'hello', 
            'style' => 'background-color: blue'
           )
  echo buildDropDown($testArr, $attrs); 
```

**以上生成：**

```
 <select id="hello" name="hello" style="background-color:blue">
    <option value="1">A</option>
    <option value="2">B</option>
    <option value="3">C</option>
 </select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-25T03:49:59.353

我设法以这种方式解决了这个问题。

```
 function openDB()
        {
            global $conn, $username,$host,$password,$db;
            $host = "localhost";
            $username ="username";
            $password= "password";
            $db = "databasename";

            $conn = mysql_connect($host, $username,$password) or die(mysql_error());
                            mysql_select_db($db,$conn) or die(mysql_error());
        }  
function closeDB()
{
    global $conn;
    mysql_close($conn);
}
        openDB();
        $query3 = "select * from table_name";

        $result2 = mysql_query($query3,$conn)
                or die ("Error in query: $query.". mysql_error());

                // if a result
        if(mysql_num_rows($result) > 0)
        {
            //turn it into an object
            $row = mysql_fetch_object($result);
        if(mysql_num_rows($result2) > 0)
        {
            //turn it into an object
                    $row2 = mysql_fetch_object($result2);   
        ?>

                    <? 
                    //creates a options box for the list of items in the dropdownmenu
                    echo"<select>";
                    while($row2=mysql_fetch_array($result2))
                    {
                        echo "<option>".$row2['feild_title']."</option>";
                    }
                    echo"</select>";
        closeDB();
        ?> 
```

# javascript - 桌面图片拖放上传崩溃浏览器

> ID：15578508
> 
> 赞同：0
> 
> 时间：2013-03-22T19:36:35.207
> 
> 标签：javascript, jquery, ajax, google-chrome, asp.net-mvc-4

我得到了一个通过 ajaxForm 上传图片的表单。我已经实现了一个功能，因此用户可以从桌面拖放照片（HTML5 拖放）。如果照片“小”，每件事都可以正常工作 - 比如说 2mb。当我尝试上传大于 4mb 的照片时，问题就出现了。Chrome 浏览器崩溃。

AjaxForm

```
$(document).ready(function() {
    $("#uploadForm").ajaxForm({
        iframe: true,
        dataType:"json",
        beforeSubmit: function () {
            $("#post .button.save").prop("disabled",true).val("Uploading...");
        },
        success: function (result) {
            $("#FilePhotoString").val("");
            $("#post").css({
                "background": 'url(' + result + ') no-repeat center center',
                "display": "block",
                "height": $("body").height(),
                "background-size": "cover"
            });
            $("img").attr("src",result).load(function() { 
               $('input[name="ImageFilePath"]').attr('value', result);
               $("#post .button.save.now").prop("disabled",false).val("Publish now");
               $("#post .button.save.later").prop("disabled",false).val("Publish later");
            });
        }
    });
}); 
```

降低

```
document.body.addEventListener('dragover',function(event) { event.preventDefault(); },false);
document.querySelector('#content').addEventListener('drop', function(event) {
    event.preventDefault(); 
    var reader = new FileReader();
        reader.onload = function(evt) { 
                $("#FilePhotoString").val(evt.target.result);   
            $("#uploadForm").submit();  
        };
    reader.readAsDataURL(event.dataTransfer.files[0]);
}, false); 
```

成功返回的结果只是上传照片的路径。有什么想法我能做些什么以使浏览器不会崩溃？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:57:50.313

如何采用另一种方法，例如使用[FormData](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/FormData)并发送文件而不是字符串。

```
var data = new FormData(document.getElementById('#uploadForm'));
data.append('theNameYouWantToSend', event.dataTransfer.files[0]); 
```

然后发送一个ajax请求

```
$.ajax({
    url:'theurl',
    type:'post',
    data: data,
    contentType:false,
    processData:false,
    ...
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T19:45:39.997

我认为这不是 jquery/ajax/浏览器问题。例如，如果您使用的是 apache 服务器，请检查 php.ini 中的“upload_max_filesize = 2M”。

默认大小是 2mb，所以它很适合你的问题。如果您尝试上传超过 2mb 的内容，服务器会发送超时。

# javascript - JavaScript 对象声明有问题

> ID：15578509
> 
> 赞同：1
> 
> 时间：2013-03-22T19:36:43.323
> 
> 标签：javascript

这段代码：

```
var doc = {
  foldPrompt: function(folded) {
    return folded ? "Click to unfold" : "Click to fold"
  },
  createFoldButtons: function() {
    var prompt = foldPrompt(true); //The error is here
    $("#ComparisonTable td.secrow").each(function(index, td){
      $(td).prepend($('<img src="minus.gif" class="foldbtn" alt="'+prompt+'" title="'+prompt+'">'));
    });
  }
} 
```

给我一个错误：`Undefined variable: foldPrompt`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T19:38:00.730

`foldPrompt`不是变量；它是 的一个属性`doc`，您需要一个对象引用来访问该对象的属性。

如果有人调用`doc.createFoldButtons()`，则`this`上下文变量将指向与该`doc`变量相同的对象。所以，替换`foldPrompt(true)`为`this.foldPrompt(true)`.

# jedit - jedit 不需要的英语单词转换为希腊字母、数学和逻辑符号

> ID：15578511
> 
> 赞同：-1
> 
> 时间：2013-03-22T19:36:55.430
> 
> 标签：jedit

问题：一些英文单词被翻译成符号

1.  希腊字母作为英语单词被翻译成符号：
    *   example`lambda`转换为等效的小希腊字母。
2.  逻辑和数学单词被翻译成符号。
    *   示例：`and`, `or`, `in`, `exists`, `sum`, `div`, `top`, `int`, 如果无法识别符号，`pm`则转换为符号或小空方块。
3.  适用范围：Windows XP 32 位、Windows 7 64 位和 jEdit 4.5.2
4.  这个问题就像一个缩写扩展。当我输入 alpha 然后输入一个空格时，jedit 转换`alpha`为小希腊字母 alpha。
5.  我已经学会忍受这个，但想找到解决问题的方法。任何帮助，将不胜感激。我不知道这是自定义问题还是功能或错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:47:00.180

要关闭所有缩写，请进入实用程序 > 全局选项，然后进入缩写。取消选中“空格键扩展缩写”。

**编辑：**我没有意识到你想使用缩写，但不是那些特定的。

要删除 lambda、alpha 等的缩写，请进入同一个对话框，如果尚未选择“全局”，则选择它，然后从列表中选择每个并点击列表下方的减号按钮。不幸的是（至少在 jEdit 4.5 中）你必须选择每一个并单独删除它；您不能选择多个条目。

# java - AsyncTask 不执行下载

> ID：15578513
> 
> 赞同：1
> 
> 时间：2013-03-22T19:37:08.217
> 
> 标签：java, android, download, android-asynctask

就像我在前一个问题中写的那样，我写的 AsyncTask 的子类没有按预期下载文件。

```
public class Upit extends DialogFragment {

    public ProgressDialog dl;

    private class DownloadFile extends AsyncTask<String, Integer, String> {

        @Override
        protected String doInBackground(String... sUrl) {
            try {
                URL url = new URL(sUrl[0]);
                URLConnection urlc = url.openConnection();
                urlc.connect();
                int fileLength = urlc.getContentLength();
                InputStream is = new BufferedInputStream(url.openStream());
                OutputStream os = new FileOutputStream(
                        Environment.getDataDirectory().getAbsolutePath()
                                .concat("data/com.markosoft.maturko/databases/proba.mp3"));
                byte Data[] = new byte[1024];
                long total = 0;
                int count;
                while ((count = is.read(Data)) != -1) {
                    total += count;
                    publishProgress((int) total * 100 / fileLength);
                    os.write(Data, 0, count);
                }
                os.flush();
                os.close();
                is.close();
            } catch (Exception e) {
                Log.e("ERROR_TAG", e.getMessage());
                return "Podaci neuspešno preuzeti";
            }
            return "Podaci uspešno preuzeti";
        }

        @Override
        protected void onProgressUpdate(Integer... progress) {
            super.onProgressUpdate(progress);
            dl.setProgress(progress[0]);
        }

        @Override
        protected void onPostExecute(String result) {
            Toast.makeText(dl.getContext(), result, Toast.LENGTH_SHORT).show();
            dl.dismiss();
        }
    }

    @Override
    public Dialog onCreateDialog(Bundle savedInstanteState) {
        AlertDialog.Builder b = new AlertDialog.Builder(getActivity());
        b.setMessage(R.string.upit_poruka)
                .setPositiveButton(R.string.upit_da, new DialogInterface.OnClickListener() {

                    public void onClick(DialogInterface dialog, int which) {
                        if (Provera()) {
                            upd(getActivity());
                        }
                        Izadji();
                    }
                })
                .setNegativeButton(R.string.upit_ne, new DialogInterface.OnClickListener() {

                    public void onClick(DialogInterface dialog, int which) {
                        Izadji();
                    }
                });
        return b.create();
    }

    protected void Izadji() {
        this.dismiss();
    }

    protected boolean Provera() {
        return true;
    }

    public void upd(Context context) {
        dl = new ProgressDialog(context);
        dl.setMessage("Preuzimanje najnovijih podataka...");
        dl.setIndeterminate(false);
        dl.setMax(100);
        dl.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        dl.setCancelable(true);
        dl.show();
        DownloadFile dlf = new DownloadFile();
        dlf.execute("http://podcasts.aolcdn.com/massively/podcasts/03-19-13-massively-E241.mp3");
    }

    @Override
    public void onStop() {
        super.onStop();
    }
} 
```

问题很可能出在文件的路径中。顺便说一句，我已经请求许可`AndroidManifest.xml`

# xslt - 从 XSLT 过滤数据

> ID：15578519
> 
> 赞同：1
> 
> 时间：2013-03-22T19:37:15.883
> 
> 标签：xslt, if-statement

我有一个 XSL 文件，我在其中创建了一个像这样的字段：

```
<ServiceText>
<xsl:value-of select="concat(Yrs,'-',Mos,'-',Days,'-',Hrs)" />
</ServiceText> 
```

'Yrs,'-',Mos,'-',Days,'-',Hrs 的值，我从 Web 服务响应接收并直接将其分配给 XSL。我无法对这些字段的代码中的数据进行任何修改，因为 ocde 就是这样。所有数据操作都在 xslt 上。

我想对 xslt 进行数据过滤，如下所示：

```
if value of yrs =-1 then yrs=""
if value of mos =-1 then mos=""
if value of Days =-1 then Days=""
if value of Hrs =-1 then Hrs="" 
```

如何在 XSL 文件上执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:55:08.783

XSLT 2.0：

```
<xsl:template match="/root">
    <ServiceText>
        <xsl:value-of select="string-join((Yrs, Mos, Days, Hrs)[.!=-1],'-')" />
    </ServiceText>
</xsl:template> 
```

请参阅链接以获取[工作示例](http://xsltransform.net/bFukv88)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T22:03:04.630

**在 XSLT 1.0 中使用这样的东西**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="*/*[not(.= -1)]">
  <xsl:value-of select="concat(., substring('-', 2 - not(self::Hrs)))"/>
 </xsl:template>
 <xsl:template match="*/*[. = -1]"/>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时：**

```
<t>
 <Yrs>-1</Yrs>
 <Mos>7</Mos>
 <Days>15</Days>
 <Hrs>3</Hrs>
</t> 
```

**产生了想要的结果**：

```
7-15-3 
```

**请注意**：

似乎假设“-1”值形成一个连续的组（序列 Yrs、M​​os、Days 从右到左）。

**如果违反了这个假设，就无法理解缺少的部分**是`2013-10-8`什么——是几个月还是几天？

# lisp - PuTTY telnet 奇怪的输出

> ID：15578520
> 
> 赞同：1
> 
> 时间：2013-03-22T19:37:18.893
> 
> 标签：lisp, newline, telnet, putty

我正在`patrickconnelly.net`为我的大学四年级项目从端口 65000 提供一个 Lisp 系统。我从终端测试了远程访问（我运行 Slackware 14.0），一切都很好。我的一位小组成员使用 PuTTY 成功连接，但无法输入命令。以 RAW 模式连接允许与服务器进行正确交互，但输出显示异常。每一行似乎都比前一行多出好几倍。我一无所知，任何帮助将不胜感激。

顺便说一下，与 PuTTY 连接时的输出看起来像

```
you must choose:
                R: Steel Bank Common Lisp REPL
                                              C: tasty treat
                                                            B: compliment two
                                                                             etc 
```

什么时候应该

```
you must choose:
R: Steel Bank Common Lisp REPL
C: tasty treat
B: compliment two
A: compliment one 
```

# vdm++ - VDM++ 语言分号

> ID：15578521
> 
> 赞同：1
> 
> 时间：2013-03-22T19:37:20.313
> 
> 标签：vdm++

我正在阅读 VDM++ 语言手册。我的问题是在某些情况下他使用“;” 在语句的末尾和同一语句的某处，他没有使用“；”。

下面是例子

```
public Top : () ==> Elem
Top() ==
return (hd stack);

if test
then OpCall()
else return FunCall() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T10:01:47.267

分号是 VDM 中的分隔符，而不是 Java 和 C 中的终止符。因此，您需要分号，其中两个事物是按顺序排列的，例如两个定义或两个语句。但是如果“块”中只有一件事，则不需要分隔符。

因此，如果后面有另一个定义，您的第一个示例*可能*需要尾随分号，但如果“Top”是类/模块中的最后一个定义，则不需要。

您的第二个示例在 OpCall() 之后不需要分号，因为它是“then”子句中的单个语句。如果此 if/then/else 后跟另一个语句，则在 FunCall() 之后*可能*需要一个分号，否则不需要。

话虽如此，VDMJ 解析器是宽容的，将允许在某些地方使用虚假的分号，即使它们不是严格要求的。

# c# - ASP.net MVC 将一些数据从视图传递到控制器

> ID：15578524
> 
> 赞同：0
> 
> 时间：2013-03-22T19:37:24.740
> 
> 标签：c#, asp.net-mvc, view, controller

在视图中，我有 ListBox，因此用户可以选择一些数据。出于同样的原因，我也有 MultiSelectList。用户可以从 MultiSelectList 中选择某个日期，或者他不必（他可以将该字段留空）。这很好用。我决定添加 TextBox 以便用户可以根据需要输入数据。现在，当用户向 TextBox 输入数据并且没有从 MultiSelectList 中选择任何数据时，一切都很好。

但 ！如果用户从 MultiSelectList 中选择数据并将 TextBox 留空，我会收到此错误：

```
The ViewData item that has the key 'CompetitionId' is of type 'System.Int32' but must be       of type 'IEnumerable<SelectListItem> 
```

LisBox 显示了该错误。

我对另一个视图/控制器有同样的问题。我已经为用户启用了上​​传图片的选项，如果他不点击选择图片并上传图片，我在该视图中的另一个 ListBox 会遇到同样的错误。

请帮我解决这个问题。这是第一个控制器/视图的代码

控制器：

```
[Authorize]
    public ActionResult Create()
    {
        ViewBag.Competitions = new SelectList(_competitionRepository.GetAllCompetitionsAndNotActive().AsEnumerable(),
                                              "CompetitionId", "Name");
        ViewBag.Tags = new MultiSelectList(_tagRepository.GetAllTags().AsEnumerable(), "TagId", "Name");

        return View();
    }

    //
    // POST: /Advert/Create

    [HttpPost, Authorize]
    [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult Create(AdvertDTO advertDTO, int [] tags, int competitionId, string inputTags)
    {
        if (ModelState.IsValid)
        { 
```

看法：

```
@using (Html.BeginForm()) {
@Html.ValidationSummary(true)

<fieldset>
    <legend>Advert</legend>

    <div class="editor-label">
        Choose Competition
    </div>
    <div class="editor-field">
        @Html.DropDownList("CompetitionId", (SelectList)ViewBag.Competitions, new { @class = "chzn-select", data_placeholder = "Choose  Competitions...", style="width:350px;" } )           
        @Html.ValidationMessageFor(model => model.CompetitionId)
    </div>      
    ....     
    @Html.ListBox("Tags", (MultiSelectList)ViewBag.Tags, new { @class = "chzn-select", data_placeholder = "Choose  Tags...", style="width:350px;" })

       <br/>
       <label>OR</label>
       <input type="text" id="inputTags" name="inputTags" style="width: 325px" />

    <p>
        <input type="submit" value="Create"  />
    </p>
</fieldset> 
```

}

**编辑** 长话短说我希望用户能够提交空字段

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:53:03.787

我觉得这条线不好

```
 @Html.ValidationMessageFor(model => model.CompetitionId) 
```

你能评论一下吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T20:23:49.650

我认为您的操作实际上是发回选择列表中的所有值。如果您只想发回选定的项目，您可以尝试类似

```
Html.DropDownListFor(model => model.CompetitionId, (SelectList)ViewBag.Competitions, new { @class = "chzn-select", data_placeholder = "Choose  Competitions...", style="width:350px;" } ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T19:44:40.290

我已经解决了......我没有看到一些愚蠢的错误：/对不起所有的麻烦

# android - SurfaceView 上的 Android EditText

> ID：15578525
> 
> 赞同：0
> 
> 时间：2013-03-22T19:37:30.327
> 
> 标签：android, user-interface, android-edittext, surfaceview

我有一个从 SurfaceView 继承的自定义视图，并且我在同一个 RelativeLayout 中有 EditText（自定义视图和 EditText 都是布局 xml 中的兄弟姐妹）。当我使 EditText 可见时，以这种方式

```
setVisibility(View.VISIBLE); 
```

自定义视图接收 onDraw(Canvas c) 方法的连续调用。有人知道为什么吗？我从来没有明确地调用过 invalidate() 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:03:49.500

这里没有任何问题。这是正常行为。`onDraw()`被调用了很多次，因为 Android 会在感觉需要显示更改时重绘您的活动。有许多复杂的内部算法可以决定何时以及为何重绘活动。Android 会为我们处理它，我们不需要担心它。

一旦重绘了一个活动，它的所有子项也会被重绘。所有视图都会发生这种情况，而不是自定义视图。请放心，您的代码没有任何问题。

有兴趣了解更多关于内部的信息吗？查看View 类的[源代码！](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.2_r1/android/view/View.java?av=f)

# entity-framework - 我可以在 Entity Framework Code First 中指定全局映射规则吗？

> ID：15578528
> 
> 赞同：1
> 
> 时间：2013-03-22T19:37:37.687
> 
> 标签：entity-framework, asp.net-mvc-4

我正在使用 Entity Framework Code First 在 ASP.NET MVC 4 中构建一个应用程序，为简单起见，我从具有 Guid、DateCreated、LastEditDate 和其他的 BaseEntity 继承将存储在数据库中的所有模型像这样有用的属性。现在，我知道我可以告诉 EF 像这样映射这些继承的属性：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Entity<User>().Map(m =>
    {
        m.MapInheritedProperties();
    });

    modelBuilder.Entity<Product>().Map(m =>
    {
        m.MapInheritedProperties();
    });            
} 
```

不过，对每个项目都这样做似乎很愚蠢。有没有办法可以将此规则应用于所有实体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T20:31:29.577

这样的映射 - 称为*Table-Per-Concrete-Type* (TPC) 继承映射 - 只有在您真的想要利用多态性时才有意义，例如，如果您想要加载一个包含 10 个`BaseEntity`对象的列表并期望实际类型被物化因此列表包含 3 个`User`实体和 7 个`Product`实体。

这样的查询是否会在您的应用程序中具有任何业务相关性？看着你的`BaseEntity`我只能看到查询所有对象 - 例如 - 在特定日期创建的，无论对象具有哪种类型（如果它派生自`BaseEntity`），可能很有用。你需要那个吗？还要记住这样的查询有多复杂。SQL 必须查询数据库中几乎所有的表，然后合并结果。

只有当它具有真正的商业意义时，我才会使用继承映射（例如：`Person`它本身具有有意义的属性，如地址、电话、电子邮件等，并且`Employee`源自`Person`并添加了`Salary`和`HiredDate`​​属性等）。

在您的情况下，我将使用`BaseEntity`only 作为您的实体类的基本类型，并且根本不为此类指定任何映射。EF 仍然会映射继承的属性，但作为`User`and`Product`实体等的一部分，而不是作为自己的实体。我什至不会称它为“基础**实体**”，但......我不知道......也许`EntityBase`（意思是：所有实体的基础（类），但不是实体本身）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T21:15:55.220

已经正确地指出，在这种特定情况下没有必要进行全局映射，因为只要您不`BaseEntity`参与模型，EF 就会为每个单独的类型映射属性。

`EntityTypeConfiguration`但是您的问题标题更笼统，是的，如果您通过s配置映射，则可以指定全局映射规则。它可能看起来像这样：

```
// Base configuration.
public abstract class BaseMapping<T> : EntityTypeConfiguration<T>
  where T : BaseEntity
{
  protected BaseMapping()
  {
    this.Map(m => m.MapInheritedProperties()); // OK, not necessary, but
                                               // just an example
  }
}

// Specific configurations
public class UserMapping : BaseMapping<User>
{ }

public class ProductMapping : BaseMapping<Product>
{ }

public class TempModelsContext : DbContext
{
  // Add the configurations to the model builder.
  protected override void OnModelCreating(DbModelBuilder modelBuilder)
  {
    base.OnModelCreating(modelBuilder);
    modelBuilder.Configurations.Add(new UserMapping());
    modelBuilder.Configurations.Add(new ProductMapping());
  }

  // DbSets
  ...
} 
```

### 笔记：

从 Entity Framework 6 开始，其中一些映射也可以通过自定义代码优先约定来解决：[http ://romiller.com/2013/01/29/ef6-code-first-configuring-unmapped-base-types/](http://romiller.com/2013/01/29/ef6-code-first-configuring-unmapped-base-types/)

# jquery - iPad / Mobile Safari：div固定在一个方向

> ID：15578531
> 
> 赞同：0
> 
> 时间：2013-03-22T19:37:49.507
> 
> 标签：jquery, css, ipad, jquery-mobile, safari

**好吧，stackxicans，我怎样才能让一个 div 只在一个方向上固定，并在Safari/iPad**中随着滚动向另一个方向移动它？

是的，在桌面浏览器上，使用 javascript 非常容易。但是你有没有试过在 iPad 上这样做……[例如](http://www.seabreezecomputers.com/tips/fixed-div.htm)检查一下。它很丑。出现了许多问题（至少对我而言）：

*   “滚动”事件仅在滚动完成后触发，
*   有诸如 touchstart、touchmove、touchend 之类的事件——但如果您尝试使用这些事件来快速计算它是垂直移动还是水平移动，然后设置 css 属性，则 safari 在滚动完成之前不会呈现您的 css 更改。

我总是以不干净、迟钝或丑陋的效果告终。目标是使绿色标题仅水平移动，而蓝色行仅在白色内容区域的滚动上垂直移动。

![描写](../Images/4190ac9cba6df0b6bf296c8f72d8d1c8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:14:40.030

滚动事件在移动设备上有点狡猾，因为它实际上渲染了整个页面并只是在屏幕上移动它，它没有像我们预期的那样滚动，这就是我们努力在 CSS 中使用固定或粘性位置的原因。

而不是附加到滚动事件，我会找到一个替代方法并检查文档的位置。

[http://cubiq.org/iscroll](http://cubiq.org/iscroll)是一个很好的插件来帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T13:28:23.950

如果其他人遇到类似的问题，这是我的“解决方案”。禁用

```
-webkit-overflow-scrolling: touch; 
```

在你感兴趣的元素上，那么你可以使用 sth. 像

```
var element = $("#element");
element.bind('touchmove', function (e) {
    scrollTop = element.scrollTop();
    scrollLeft = element.scrollLeft();
    $(".yAxisHeader").css({ left: 0, top: -scrollTop });
    $(".xAxisHeader").css({ top: 0, left: -scrollLeft });
}); 
```

从桌面浏览器解决方案中知道。权衡：失去了良好的平滑滚动惯性效果。

# c# - 在 Visual Studio 中时 AllocConsole 不打印

> ID：15578540
> 
> 赞同：2
> 
> 时间：2013-03-22T19:38:16.953
> 
> 标签：c#, visual-studio-2010, console

我想在调试程序时创建一个控制台窗口并在上面打印一些信息。VS 2010 没有让我选择为我的程序设置不同的输出类型，具体取决于它是处于调试模式还是发布模式，所以我求助于手动创建控制台窗口，如下所示：

```
[DllImport("kernel32.dll")]
public static extern Int32 AllocConsole();

static void Main()
{
#if DEBUG
    AllocConsole();
#endif
.... 
```

这会弹出一个控制台窗口，但没有写入任何内容。我尝试了一堆其他的 pinvoke（AttachConsole 等），但什么也没做。然后我终于尝试在 Visual Studio 之外运行应用程序，并且控制台窗口工作。显然 Visual Studio 正在吃掉我所有的 Console.WriteLines！

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-05-17T18:57:31.617

遇到了同样的问题，这里有一些代码似乎可以在调用后为我恢复控制台输出`AllocConsole`：

```
 private static void OverrideRedirection()
    {
        var hOut = GetStdHandle(STD_OUTPUT_HANDLE);
        var hRealOut = CreateFile("CONOUT$", GENERIC_READ | GENERIC_WRITE, FileShare.Write, IntPtr.Zero, FileMode.OpenOrCreate, 0, IntPtr.Zero);
        if (hRealOut != hOut)
        {
            SetStdHandle(STD_OUTPUT_HANDLE, hRealOut);
            Console.SetOut(new StreamWriter(Console.OpenStandardOutput(), Console.OutputEncoding) { AutoFlush = true });
        }
    } 
```

P/Invokes 如下：

```
 [DllImport("kernel32.dll", SetLastError = true)]
    public static extern IntPtr GetStdHandle(int nStdHandle);

    [DllImport("kernel32.dll", SetLastError = true)]
    public static extern bool SetStdHandle(int nStdHandle, IntPtr hHandle);

    public const int STD_OUTPUT_HANDLE = -11;
    public const int STD_INPUT_HANDLE  = -10;
    public const int STD_ERROR_HANDLE  = -12;

    [DllImport("kernel32.dll", CharSet = CharSet.Auto, SetLastError = true)]
    public static extern IntPtr CreateFile([MarshalAs(UnmanagedType.LPTStr)] string         filename,
                                           [MarshalAs(UnmanagedType.U4)]     uint           access,
                                           [MarshalAs(UnmanagedType.U4)]     FileShare      share,
                                                                             IntPtr         securityAttributes,
                                           [MarshalAs(UnmanagedType.U4)]     FileMode       creationDisposition,
                                           [MarshalAs(UnmanagedType.U4)]     FileAttributes flagsAndAttributes,
                                                                             IntPtr         templateFile);

    public const uint GENERIC_WRITE = 0x40000000;
    public const uint GENERIC_READ  = 0x80000000; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-07T08:42:51.593

我遇到了同样的问题。事实证明，只有在托管进程中进行调试时，才能在 Visual Studio 中写入控制台。转到项目属性 -> 调试 -> 启用调试器并确保选中“启用 Visual Studio 托管进程”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-02T16:02:52.050

[正如我在这里](https://stackoverflow.com/a/26701233/2183396)已经说过的，您可以尝试以*管理员*身份运行 VS。这对我有用。

# ruby-on-rails-3 - 在 Rails 3 中，simple_form_for 方法如何知道是否在 action 属性中包含 params[:id]？

> ID：15578545
> 
> 赞同：0
> 
> 时间：2013-03-22T19:38:28.460
> 
> 标签：ruby-on-rails-3, forms, dry

我是 Rails 新手，我试图弄清楚如何使表单上的 [action] 属性动态化，以便我可以重用表单标记。

在 MVC.net 中，这很容易，因为您通常指定 :controller 和 :action。

然而在 Rails 中只有一个“ **simple_form_for(@my_model)** ”方法。

如果我浏览到**/my_models/new**操作属性是：

```
action = "/my_models" 
```

但是如果我去**/my_models/1/edit**动作属性是：

```
action = "my_models/1" 
```

如果我想创建一个新的操作来处理 my_model 的 POST 并且仍然重用相同的 _form.html.erb 怎么办……这是如何工作的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T20:09:52.407

我认为它实际上是在做这个 [https://github.com/rails/rails/blob/master/actionpack/lib/action_view/helpers/form_helper.rb#L230](https://github.com/rails/rails/blob/master/actionpack/lib/action_view/helpers/form_helper.rb#L230)

简而言之，它只是根据资源以及它是新资源还是现有资源来推断 url。

SimpleForm 的 FormBuilder 继承自 ActionView::Helpers::FormBuilder

您可以查看该代码[https://github.com/plataformatec/simple_form/blob/master/lib/simple_form/form_builder.rb](https://github.com/plataformatec/simple_form/blob/master/lib/simple_form/form_builder.rb)

我想我不明白最后一部分。假设您想使用自定义操作而不是推断的操作，您可以只制作表单元素的一部分并将该部分用于所有表单。

所以 _form.html.erb

```
<%= simple_form_for @my_object do |f| %>
  <%= render 'form_elements' %>
<% end %> 
```

_custom_form.html.erb

```
<%= simple_form_for @my_object, :url => custom_url do |f| %>
  <%= render 'form_elements' %>
<% end %> 
```

_form_elements.html.erb

```
form elements as usual 
```

# c# - Multithreading in C# with Win.Forms control

> ID：15578548
> 
> 赞同：1
> 
> 时间：2013-03-22T19:38:33.830
> 
> 标签：c#, multithreading, winforms

I'm beginner in C#. And i have problem with threads when i using win.forms. My application freezes. What the problem with this code? I'm using microsoft example from [msdn](http://msdn.microsoft.com/query/dev11.query?appId=Dev11IDEF1&l=EN-US&k=k%28EHInvalidOperation.WinForms.IllegalCrossThreadCall%29;k%28TargetFrameworkMoniker-.NETFramework,Version=v4.5%29;k%28DevLang-csharp%29&rd=true). Here's my code:

```
 delegate void SetTextCallback(object text);

    private void WriteString(object text)
    {
        // InvokeRequired required compares the thread ID of the 
        // calling thread to the thread ID of the creating thread. 
        // If these threads are different, it returns true. 
        if (this.textBox1.InvokeRequired)
        {
            SetTextCallback d = new SetTextCallback(WriteString);
            this.Invoke(d, new object[] { text });
        }
        else
        {
            for (int i = 0; i <= 1000; i++)
            {
                this.textBox1.Text = text.ToString();
            }
        }
    }

    private void button1_Click(object sender, EventArgs e)
    {

        Thread th_1 = new Thread(WriteString);
        Thread th_2 = new Thread(WriteString);
        Thread th_3 = new Thread(WriteString);
        Thread th_4 = new Thread(WriteString);

        th_1.Priority = ThreadPriority.Highest; // самый высокий
        th_2.Priority = ThreadPriority.BelowNormal; // выше среднего
        th_3.Priority = ThreadPriority.Normal; // средний
        th_4.Priority = ThreadPriority.Lowest; // низкий

        th_1.Start("1");
        th_2.Start("2");
        th_3.Start("3");
        th_4.Start("4");

        th_1.Join();
        th_2.Join();
        th_3.Join();
        th_4.Join();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T19:43:08.233

有一个死锁 - UI 线程正在等待线程完成，`Thread.Join()`而工作线程正在尝试使用阻塞向 UI 发送消息`Control.Invoke()`。用 BeginInvoke() 替换线程代码中的 Invoke 将使死锁消失

```
 if (this.textBox1.InvokeRequired)
    {
        SetTextCallback d = new SetTextCallback(WriteString);
        // BeginInvoke posts message to UI thread asyncronously
        this.BeginInvoke(d, new object[] { text }); 
    }
    else
    {
        this.textBox1.Text = text.ToString();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T19:45:02.093

由于加入呼叫而冻结。Thread.Join() 使当前线程在另一个线程完成后等待。

# ruby-on-rails - Heroku & Rails 很抱歉，出了点问题

> ID：15578551
> 
> 赞同：0
> 
> 时间：2013-03-22T19:38:44.530
> 
> 标签：ruby-on-rails, heroku

我创建了一个项目。它在本地主机上工作正常，但是当我尝试在 heroku 上部署它时，它返回我“我们很抱歉，但出了点问题”。这是教程中非常简单的项目，我不知道问题出在哪里。

这是我的日志：

```
2013-03-22T19:31:10+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
2013-03-22T19:31:10+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/engine.rb:479:in `call'
2013-03-22T19:31:10+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/rack/log_tailer.rb:17:in `call'
2013-03-22T19:31:10+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
2013-03-22T19:31:10+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
2013-03-22T19:31:10+00:00 app[web.1]: 
2013-03-22T19:31:10+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
2013-03-22T19:31:10+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
2013-03-22T19:31:10+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'
2013-03-22T19:31:10+00:00 app[web.1]: 
2013-03-22T19:31:10+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
2013-03-22T19:31:10+00:00 heroku[router]: at=info method=GET path=/ host=ancient-cliffs-5913.herokuapp.com fwd="46.72.70.205" dyno=web.1 queue=0 wait=0ms connect=2ms service=18ms status=500 bytes=643
2013-03-22T19:31:10+00:00 heroku[router]: at=info method=GET path=/favicon.ico host=ancient-cliffs-5913.herokuapp.com fwd="46.72.70.205" dyno=web.1 queue=0 wait=15ms connect=7ms service=23ms status=304 bytes=0
2013-03-22T19:31:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.12/lib/active_record/query_cache.rb:67:in `rescue in call'
2013-03-22T19:31:13+00:00 app[web.1]: ActiveRecord::ConnectionNotEstablished (ActiveRecord::ConnectionNotEstablished):
2013-03-22T19:31:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract/connection_specification.rb:171:in `retrieve_connection'
2013-03-22T19:31:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.12/lib/active_record/query_cache.rb:61:in `call'
2013-03-22T19:31:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
2013-03-22T19:31:13+00:00 app[web.1]: 
2013-03-22T19:31:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract/connection_specification.rb:145:in `connection'
2013-03-22T19:31:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `__run_callback'
2013-03-22T19:31:13+00:00 app[web.1]: Started GET "/" for 46.72.70.205 at 2013-03-22 19:31:13 +0000
2013-03-22T19:31:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
2013-03-22T19:31:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract/connection_pool.rb:410:in `retrieve_connection'
2013-03-22T19:31:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `_run__3995827767081244094__call__3680287303298643332__callbacks'
2013-03-22T19:31:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:81:in `run_callbacks'
2013-03-22T19:31:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
2013-03-22T19:31:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
2013-03-22T19:31:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
2013-03-22T19:31:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
2013-03-22T19:31:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
2013-03-22T19:31:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/rack/logger.rb:16:in `block in call'
2013-03-22T19:31:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.12/lib/active_support/tagged_logging.rb:22:in `tagged'
2013-03-22T19:31:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/rack/logger.rb:32:in `call_app'
2013-03-22T19:31:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/middleware/request_id.rb:22:in `call'
2013-03-22T19:31:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
2013-03-22T19:31:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.12/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
2013-03-22T19:31:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
2013-03-22T19:31:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/rack/logger.rb:16:in `call'
2013-03-22T19:31:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
2013-03-22T19:31:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
2013-03-22T19:31:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
2013-03-22T19:31:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
2013-03-22T19:31:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
2013-03-22T19:31:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
2013-03-22T19:31:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/application.rb:223:in `call'
2013-03-22T19:31:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/middleware/static.rb:62:in `call'
2013-03-22T19:31:13+00:00 app[web.1]: 
2013-03-22T19:31:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/engine.rb:479:in `call'
2013-03-22T19:31:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
2013-03-22T19:31:13+00:00 app[web.1]: 
2013-03-22T19:31:13+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
2013-03-22T19:31:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
2013-03-22T19:31:13+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'
2013-03-22T19:31:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/rack/log_tailer.rb:17:in `call'
2013-03-22T19:31:13+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
2013-03-22T19:31:14+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.12/lib/active_record/query_cache.rb:67:in `rescue in call'
2013-03-22T19:31:14+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.12/lib/active_record/query_cache.rb:61:in `call'
2013-03-22T19:31:14+00:00 app[web.1]: Started GET "/" for 46.72.70.205 at 2013-03-22 19:31:14 +0000
2013-03-22T19:31:14+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract/connection_specification.rb:145:in `connection'
2013-03-22T19:31:14+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
2013-03-22T19:31:14+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract/connection_pool.rb:410:in `retrieve_connection'
2013-03-22T19:31:14+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract/connection_specification.rb:171:in `retrieve_connection'
2013-03-22T19:31:14+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
2013-03-22T19:31:14+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
2013-03-22T19:31:14+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
2013-03-22T19:31:14+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/application.rb:223:in `call'
2013-03-22T19:31:14+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
2013-03-22T19:31:14+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
2013-03-22T19:31:14+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
2013-03-22T19:31:14+00:00 app[web.1]: 
2013-03-22T19:31:14+00:00 app[web.1]: ActiveRecord::ConnectionNotEstablished (ActiveRecord::ConnectionNotEstablished):
2013-03-22T19:31:14+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
2013-03-22T19:31:14+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'
2013-03-22T19:31:14+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/middleware/request_id.rb:22:in `call'
2013-03-22T19:31:14+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
2013-03-22T19:31:14+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.12/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
2013-03-22T19:31:14+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
2013-03-22T19:31:14+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `_run__3995827767081244094__call__3680287303298643332__callbacks'
2013-03-22T19:31:14+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
2013-03-22T19:31:14+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
2013-03-22T19:31:14+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
2013-03-22T19:31:14+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `__run_callback'
2013-03-22T19:31:14+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:81:in `run_callbacks'
2013-03-22T19:31:14+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
2013-03-22T19:31:14+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/middleware/static.rb:62:in `call'
2013-03-22T19:31:14+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
2013-03-22T19:31:14+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/rack/logger.rb:32:in `call_app'
2013-03-22T19:31:14+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
2013-03-22T19:31:14+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/rack/log_tailer.rb:17:in `call'
2013-03-22T19:31:14+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
2013-03-22T19:31:14+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/rack/logger.rb:16:in `block in call'
2013-03-22T19:31:14+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
2013-03-22T19:31:14+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/rack/logger.rb:16:in `call'
2013-03-22T19:31:14+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.12/lib/active_support/tagged_logging.rb:22:in `tagged'
2013-03-22T19:31:14+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
2013-03-22T19:31:14+00:00 app[web.1]: 
2013-03-22T19:31:14+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/engine.rb:479:in `call'
2013-03-22T19:31:14+00:00 app[web.1]: 
2013-03-22T19:31:14+00:00 heroku[router]: at=info method=GET path=/ host=ancient-cliffs-5913.herokuapp.com fwd="46.72.70.205" dyno=web.1 queue=0 wait=11ms connect=22ms service=20ms status=500 bytes=643
2013-03-22T19:31:13+00:00 heroku[router]: at=info method=GET path=/ host=ancient-cliffs-5913.herokuapp.com fwd="46.72.70.205" dyno=web.1 queue=0 wait=0ms connect=10ms service=5ms status=500 bytes=643 
```

这是我的宝石文件：

```
source 'https://rubygems.org'

gem 'rails', '3.2.12'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

group :development, :test do
  gem 'sqlite3-ruby', :require => 'sqlite3'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'debugger'
group :test do
  gem 'rspec-rails', '2.6.1'
  gem 'webrat', '0.7.1'
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T19:46:04.307

你没有

```
gem 'pg' 
```

在您的 Gemfile 中。您可以继续在本地使用 sqlite3 进行开发，但您需要在 Heroku 上使用 postgres、mysql、mongo。

# vim - Vim 插件：在插入模式下调用函数会将函数签名插入缓冲区而不是实际调用函数

> ID：15578554
> 
> 赞同：1
> 
> 时间：2013-03-22T19:38:56.777
> 
> 标签：vim

例如，使用 VimOrganizer：

`* one`

然后，当我按 Enter 键时，缓冲区中的内容如下：

`* oneorg#tbl#kbd_cr()`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T19:52:53.707

看起来您正在将表达式映射与标准映射混合。

`org#tbl#kbd_cr()`是将击键返回到表达式映射 ( `:help map-expr`) 的函数。`<SNR>17_AutoPairsReturn`是一个（脚本范围的）映射本身。为了能够连接两者，请使用函数的中间映射：

```
:inoremap <expr> <SID>org-mapping org#tbl#kbd_cr()
:imap <Enter> <SID>org-mapping<SNR>17_AutoPairsReturn 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T19:47:04.657

至少对于 .vimrc 来说，映射一个键有不同的模式，例如，imap 用于插入模式，nmap 用于普通模式。如果你用 imap 映射某些东西，它需要知道它处于插入模式并适当地生成命令，例如：

```
:inoremap <F2> <C-R>=expand('%:p:h')<CR> 
```

有关我的信息，请参阅[Vim 中的映射键。](http://vim.wikia.com/wiki/Mapping_keys_in_Vim_-_Tutorial_%28Part_1%29)

# java - Spring Data web pagination "page" parameter not working

> ID：15578555
> 
> 赞同：6
> 
> 时间：2013-03-22T19:39:01.810
> 
> 标签：java, spring, spring-mvc, pagination, spring-data

I'm trying to get Spring Data's web pagination working. It's described here:

[http://static.springsource.org/spring-data/data-jpa/docs/current/reference/html/repositories.html#web-pagination](http://static.springsource.org/spring-data/data-jpa/docs/current/reference/html/repositories.html#web-pagination)

Here's my Java (Spring Web MVC @Controller handler method):

```
@RequestMapping(value = "/list", method = RequestMethod.GET)
public String list(
    @PageableDefaults(value = 50, pageNumber = 0) Pageable pageable,
    Model model) {

    log.debug("Params: pageNumber={}, pageSize={}",
        pageable.getPageNumber(), pageable.getPageSize());

    ...
} 
```

And here's my Spring configuration:

```
<mvc:annotation-driven>
    <mvc:argument-resolvers>
        <bean class="org.springframework.data.web.PageableArgumentResolver" />
    </mvc:argument-resolvers>
</mvc:annotation-driven> 
```

(It appears that the configuration above is the way to do this now; the configuration approach described in the link is deprecated.)

When I actually try to control the pagination using the `page` and `page.size` parameters, the latter works just fine, but the former doesn't. For example, if I hit

```
http://localhost:8080/myapp/list?page=14&page.size=42 
```

the log output is

```
Params: pageNumber=0, pageSize=42 
```

So I know that the argument resolver is kicking in, but not sure why it's not resolving the page number. I've tried a bunch of other param names (e.g. page.number, pageNumber, page.num, etc.) and none of them work.

Is this working for anybody else?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T21:18:56.890

page 参数实际上有点不直观 -`page.page`而不是`page`，更改为`page.page`应该可以让事情正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-06T17:29:28.383

查看`PageableArgumentResolver`我发现`prefix`并且`separator`是​​可配置的，因此您可以将类配置为不具有它。

```
public class PageableArgumentResolver implements WebArgumentResolver {

    private static final Pageable DEFAULT_PAGE_REQUEST = new PageRequest(0, 10);
    private static final String DEFAULT_PREFIX = "page";
    private static final String DEFAULT_SEPARATOR = "."; 
```

在我的@Configuration 类中，我使用,`page`和作为默认值做了一些不同的事情。`size``sort``sortDir`

```
@Override
public void addArgumentResolvers(List<HandlerMethodArgumentResolver> argumentResolvers) {
    PageableArgumentResolver resolver =  new PageableArgumentResolver();
    resolver.setPrefix("");
    resolver.setSeparator("");
    argumentResolvers.add(new ServletWebArgumentResolverAdapter(resolver));
} 
```

现在这有效

> http://:8080/myapp/list?page=14&size=42

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-14T21:30:17.543

如果需要，您可以通过以下方式覆盖参数：

```
<mvc:annotation-driven>
    <mvc:argument-resolvers>
        <bean   class="org.springframework.data.web.PageableHandlerMethodArgumentResolver">
            <property name="oneIndexedParameters" value="true"></property>
            <property name="pageParameterName" value="page"></property>
            <property name="sizeParameterName" value="size"></property>
        </bean>
    </mvc:argument-resolvers>
</mvc:annotation-driven> 
```

# c# - Is this a correct implementation of the Strategy pattern with the FizzBuzz exercise?

> ID：15578557
> 
> 赞同：1
> 
> 时间：2013-03-22T19:39:19.927
> 
> 标签：c#, design-patterns, strategy-pattern

I've recently had a real world use for the Strategy pattern. I find myself with hammer/nail syndrome where this pattern is my hammer and everything else is a nail. For kicks, I decided to try implementing FizzBuzz via the strategy pattern. Now, I know this is complete over kill. I've seen various Enterprise implementations of it, but this is my own implementation.

To my surprise and delight, this exercise turned up an interesting question: is there a standard or another pattern that works in conjunction with strategies to help you select which one to use? In my FizzBuzzStrategySelector class below, I put this logic in the Format function.

Obviously this implementation is not practical...but it might be if these Format methods actually had some real world logic to break down.

My basic question here is this: am I using the Strategy pattern correctly here?

```
class Program
{
    static void Main(string[] args)
    {
        FizzBuzzStrategySelector fizzBuzzFormatter = new FizzBuzzStrategySelector();

        for (int i = 1; i < 100; i++)
        {
            fizzBuzzFormatter.Format(i);
        }

        Console.ReadLine();
    }
}

public interface IOutputFormatter
{
    string FormatOutput(int value);
}

public class FizzBuzzStrategySelector
{
    public IOutputFormatter formatStrategy;

    public FizzBuzzStrategySelector() : this(new GeneralFormatter()) { }

    public FizzBuzzStrategySelector(IOutputFormatter fizzBuzzFormatStrategy) 
    {
        this.formatStrategy = fizzBuzzFormatStrategy;
    }

    public void Format(int value)
    {
        //THIS SEEMS LIKE A CODE SMELL. NOT SURE HOW TO WORK 
        //AROUND IT.
        if(value % 15 == 0)
            this.formatStrategy = new FizzBuzzFormatter();
        else if(value % 3 == 0 )
            this.formatStrategy = new FizzFormatter();
        else if(value % 5 == 0)
            this.formatStrategy = new BuzzFormatter();
        else
            this.formatStrategy = new GeneralFormatter();

        Console.WriteLine(this.formatStrategy.FormatOutput(value));
    }
}

public class GeneralFormatter : IOutputFormatter
{
    public string FormatOutput(int value)
    {
        return value.ToString();
    }
}

public class FizzBuzzFormatter : IOutputFormatter
{
    public string FormatOutput(int value)
    {
        return "FizzBuzz";
    }
}

public class BuzzFormatter : IOutputFormatter
{
    public string FormatOutput(int value)
    {
        return "Buzz";
    }
}

public class FizzFormatter : IOutputFormatter
{
    public string FormatOutput(int value)
    {
        return "Fizz";;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T19:48:36.547

由于（如您所知）策略模式对于这个问题来说太过分了，很难说什么是“好”或“坏”的设计。但是，我的直觉是将策略选择逻辑移到策略本身中，如下所示：

```
class FizzBuzzFormatter : IOutputFormatter
{
    public bool Handles(int value) { return value.IsDivisibleBy(15); }

    public string Handle(int value) { return "FizzBuzz"; }
} 
```

就可组合性而言，这可能会好一些，但您仍然需要确保您有一个`IOutputFormatters` *按正确顺序排列*的列表。有了这么小的问题，你可以侥幸逃脱。对于更大的问题，您需要考虑并自己决定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T19:54:00.627

不同的输出格式化程序是策略模式的一部分。通常会有一个需要格式化程序的对象。然后你可以调用格式化程序。

```
class Foo
{
   public IOutputFormatter Formatter {get;set;}
}

var foo = new Foo();
foo.Formatter = new GeneralFormatter();
Console.WriteLine(foo.formatter.FormatValue("one");

foo.Formatter = new FizzBuzzFormatter();
Console.WriteLine(foo.formatter.FormatValue("one"); 
```

如何设置格式化程序，或者设置哪个格式化程序可能是另一个对象的责任。

# jquery - jQuery code embedded in a Drupal page has its css overridden

> ID：15578558
> 
> 赞同：1
> 
> 时间：2013-03-22T19:39:20.070
> 
> 标签：jquery, css, drupal

I developed a simple js / jQuery only web application that's entirely contained in its own div, meant to go on a Drupal page. The Drupal page only has html in it that loads the jQuery library, loads my javascript file, and sets up the div for the dynamic elements that my code creates to go.

```
<html>
<head>
<script ...load jquery from google cdn</script>
<script ...load my javascript</script>
</head>
<body>
<div id='my_div'></div>
</body>
</html> 
```

The code executes just fine, except for the lines which change the css. The Drupal theme sets all input divs to a strange color that I'm trying to change. I'm not allowed to change the Drupal theme overall. Calls such as

```
$("input").css("border", "3px solid red"); 
```

don't change anything (all of these calls are also within the .ready() function).

Is there anyone familiar with Drupal and jQuery that can tell me how to override certain Drupal CSS rules on just this page?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:49:47.527

我猜 Drupal`!important`用来推翻 jquery 应用的 css。如果使用类应用该 css，那么您可以使用 jquery`removeClass()`删除这些样式。您的示例代码缺少详细信息以查看是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T19:42:07.547

```
$("input").css("border", "3px solid red !important"); 
```

也许？

*更新*：显然这是不可能的。 [如何使用 .css() 应用 !important？](https://stackoverflow.com/questions/2655925/jquery-css-applying-important-styles)

# c - 将 GNU C 库移植到最小的爱好操作系统

> ID：15578559
> 
> 赞同：2
> 
> 时间：2013-03-22T19:39:20.603
> 
> 标签：c, assembly, operating-system, osdev, hobby-os

所以我有一个没有太多功能的最小操作系统。有一个引导加载程序，它以 32 位保护模式加载基本的 C 内核。如何移植到 C 库中，以便可以使用类似的东西`printf`？我正在寻找使用 GNU C 库。任何地方都有教程吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T20:05:52.480

好的，移植到 C 库中并不难，我在内核中使用 Newlib。这是一个开始的教程：[http](http://wiki.osdev.org/Porting_Newlib) ://wiki.osdev.org/Porting_Newlib 。

你基本上需要：

*   使用您的交叉编译器编译库（例如 Newlib）
*   为内核中的一系列系统函数（如 fork、fstat 等）提供存根实现
*   将库和内核链接在一起

如果你想使用 malloc 或 printf 之类的函数（在内部使用 malloc），你需要某种内存管理和最简单的 sbrk 工作实现。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-22T20:07:04.090

我强烈建议不要使用 glibc。这是一头野兽。

改用[newlib](http://sourceware.org/newlib/)。将其移植到新内核很容易。您只需要编写一些支持函数，如此[处](http://sourceware.org/newlib/libc.html#Syscalls)所述。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T12:21:13.953

另一个新人是[musl](http://www.musl-libc.org/)，它专门用于改善嵌入式空间的情况。

不过，这可能不是初学者的最佳选择，因为它仍在进行中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T19:47:16.933

最好找一个小的 libc，比​​如[uClibc](http://www.uclibc.org/)。GNU C 库非常*庞大*。正如评论所说，第一步是让 C 编译器运行。

你想做什么？构建一个完整的操作系统是一群人持续几年的工作......最好从已经工作的东西开始，然后破解你最感兴趣的部分。

# c# - IEnumerable 构造函数重载

> ID：15578567
> 
> 赞同：0
> 
> 时间：2013-03-22T19:40:05.533
> 
> 标签：c#, ienumerable, enumeration

我有一些基于`IEnumerable<T>`. 现在我想重载构造函数并用我得到的初始列表做一些自定义的东西。

```
//Constructor
public CustomList(IEnumerable<T> collection) : base(collection)
{
    //do some stuff with the collection e.g. iterate
    foreach(T obj in collection)
    {
        //do some stuff with obj
    }
} 
```

甚至有可能这样做吗？因为 IEnumerable 只能在 枚举一次`base(collection)`，但我猜循环会失败。

**编辑：** 因为不是每个人都完全清楚：我的基类是`IEnumerable<T>`并且`IEnumerable`只能在我的情况下枚举一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:47:25.153

假设您的基类是`List<T>`，则基构造函数将所有项目添加到当前对象。因此，您可以根据需要经常执行以下操作：

```
foreach (T obj in this) { } 
```

但我听说继承自 是一个坏主意`List<T>`，你应该实现`IList<T>`它，即使它只是`List<T>`. 我只是不记得为什么会这样。

# jquery - Fullscreen product view for eshop

> ID：15578569
> 
> 赞同：0
> 
> 时间：2013-03-22T19:40:06.517
> 
> 标签：jquery, fullscreen, image-gallery, zooming

**I am trying to find plugin or tutorial of product fullscreen view like on next sites:**

[http://www.armaniexchange.com/product/cotton+trench+coat.do?sortby=](http://www.armaniexchange.com/product/cotton+trench+coat.do?sortby=)

or

[http://store-us.hugoboss.com/boss/partner-water-resistant-hooded-coat/hbna50238757,en_US,pd.html&cgid=22000#!i%3D0%26color%3D001_Black](http://store-us.hugoboss.com/boss/partner-water-resistant-hooded-coat/hbna50238757,en_US,pd.html&cgid=22000#!i%3D0%26color%3D001_Black)

**Maybe someone will provide me with a link?) Because I honestly didn't find anything usefull.**

Small addition: What do I mean? On hugoboss website you can click "fullscreen view" below images or on armani site - "view larger". You will get to the fullscreen view. And I'm searching for something like this.

Thanks in advance.

BR, Nick K.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:07:58.157

如果我正确理解您的问题 - 您正在寻找类似以下内容：

[http://codecanyon.net/item/etalage/180719?ref=themespotters&ref=themespotters&clickthrough_id=119361192&redirect_back=true](http://codecanyon.net/item/etalage/180719?ref=themespotters&ref=themespotters&clickthrough_id=119361192&redirect_back=true)

**编辑：**

在这种情况下。在产品页面上，我可能会添加一个绝对定位的 div，其宽度和高度为 100%；

```
.product-overlay {
    display: none;
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    } 
```

然后您可以使用 jquery 打开和关闭它。

```
$(function() {
    $('#fullscreen').click(function() { //This is your "Full Screen" link
        $('.product-overlay').show();
    });

    $('.product-overlay #close').click(function() { // This is your close button
        $('.product-overlay').hide();
    });
}); 
```

# regex - Nginx server_name 正则表达式不能作为变量工作

> ID：15578574
> 
> 赞同：4
> 
> 时间：2013-03-22T19:40:27.503
> 
> 标签：regex, http, configuration, nginx

有没有人告诉我为什么我仍然有这样的错误？

```
Restarting nginx: [emerg]: unknown "domain_name" variable
configuration file /etc/nginx/nginx.conf test failed 
```

变量所在的代码部分如下所示：

```
server {
    # if you're running multiple servers, instead of "default" you should
    # put your main domain name here
    listen 80 default;

    # you could put a list of other domain names this application answers
    server_name ^~(?<domain_name>[^\.]*)\.(?<tld>[^\.]*)$;

    # root defined by domain
    root /home/deployer/apps/$domain_name/current/;

    # access && error && rewrite log
    access_log /var/log/nginx/access.log;
    error_log /var/log/nginx/error.log;
    rewrite_log on;

    # default location
    location / {

... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T21:45:42.433

删除“^”。从

```
server_name ^~(?<domain_name>[^\.]*)\.(?<tld>[^\.]*)$; 
```

到

```
server_name ~(?<domain_name>[^\.]*)\.(?<tld>[^\.]*)$; 
```

或者切换“^”和“~”。字母“~”必须是第一个。

```
server_name ~^(?<domain_name>[^\.]*)\.(?<tld>[^\.]*)$; 
```

# php - Strange webserver issue

> ID：15578576
> 
> 赞同：0
> 
> 时间：2013-03-22T19:40:29.710
> 
> 标签：php, linux, ubuntu, nginx, webserver

MY OS: Ubuntu 12.10 Web server environment is: Nginx + PHP-FPM

Installed based [on this tutorial](http://iain.it/linux/how-to-install-php-fpm-and-nginx-on-ubuntu-12-04)

Here is nginx conf file of website

```
server {
set $host_path "path_to_website";

server_name  website.local;

root $host_path;
set $yii_bootstrap "index.php";

charset utf-8;
index index.php index.html;

log_not_found off;

location / {
    index  index.html $yii_bootstrap;
    try_files $uri $uri/ /$yii_bootstrap?$args;
    }

    location ~ ^/(protected|framework|themes/\w+/views) {
    deny  all;
    }

    #avoid processing of calls to unexisting static files by yii
    location ~ \.(js|css|png|jpg|gif|swf|ico|pdf|mov|fla|zip|rar)$ {
    try_files $uri =404;
}

location ~ \.php$ {
    fastcgi_split_path_info  ^(.+\.php)(.*)$;
    #let yii catch the calls to unexising PHP files
    set $fsn /$yii_bootstrap;
    if (-f $document_root$fastcgi_script_name){
        set $fsn $fastcgi_script_name;
    }
    fastcgi_pass unix:/var/run/php5-fpm.sock;
    fastcgi_index index.php;
    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    include fastcgi_params;
}

location ~ /\.ht {
    deny  all;
} 
```

}

BTW, this configuration is [optimized for Yii framework](http://www.yiiframework.com/doc/guide/1.1/en/quickstart.apache-nginx-config)

The problem is, when I try to enter to the website, getting following error:

```
File not found. 
```

And when I open nginx `error.log` file, I see following content

```
 2013/03/22 23:36:45 [crit] 14388#0: *4 stat() "path_to_website" failed (13: Permission denied), client: 127.0.0.1, server: website.local, request: "GET / HTTP/1.1", host: "website.local"
2013/03/22 23:36:45 [crit] 14388#0: *4 stat() "path_to_website" failed (13: Permission denied), client: 127.0.0.1, server: website.local, request: "GET / HTTP/1.1", host: "website.local"
2013/03/22 23:36:45 [crit] 14388#0: *4 stat() "path_to_websiteindex.php" failed (13: Permission denied), client: 127.0.0.1, server: website.local, request: "GET / HTTP/1.1", host: "website.local"
2013/03/22 23:36:45 [error] 14388#0: *4 FastCGI sent in stderr: "Primary script unknown" while reading response header from upstream, client: 127.0.0.1, server: website.local, request: "GET / HTTP/1.1", upstream: "fastcgi://unix:/var/run/php5-fpm.sock:", host: "website.local" 
```

I'm 100% sure about path of website, and also added into hosts file `website.local`. Also `chown`-ed recursively whole parent directory recursively, where website located.

I can't figure out what can be problem. PLease help me to fix this problem. I can give remote acces to anyone who wants to help.

# NOTE

I just replaced the real path with this `path_to_website` for confidence. Thats all. THere is real path

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:55:53.413

```
 set $host_path "path_to_website"; 
```

你需要定义你的 path_to_website 是什么：

即：/var/www/

1.  打开终端

2.  项目清单

3.  cd 进入你的 www 目录的根目录
4.  输入'pwd'，无论结果如何
5.  将其输入 $host_path

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T03:03:13.183

nginx 日志文件永远不会说谎。如果它说这是一个“权限被拒绝”错误，那么它就是。你需要

*   确保该文件夹本身“path_to_website”对于用户 www-data 是可读的（根据您的屏幕截图，这是运行 nginx 的用户）。尝试此操作的一种方法是在终端中运行此命令：

    ```
     sudo -u www-data ls path_to_website 
    ```

并查看是否拒绝 www-data 的许可或只是

```
 ls -la path_to_website 
```

调查该路径的权限信息。

*   用户 www-data 可能无法访问“path_to_website”的父文件夹。例如，如果您的 path_to_website 是“/var/www/mysite/”，那么 www-data 可能无法读取“/var”或“/var/www”。

# powershell - Start-Job 将 XML 对象传递给 -ArgumentList 在 Powershell V2 和 V3 中的工作方式不同

> ID：15578577
> 
> 赞同：3
> 
> 时间：2013-03-22T19:40:37.123
> 
> 标签：powershell, scripting, powershell-3.0

我正在使用 Powershell v3 在 Windows Server 2012 上测试我的应用程序的部署脚本。该脚本在 Win Server 2008 R2 和带有 Powershell v2 的 Win 7 上运行良好。我现在遇到的问题是我无法访问通过 -ArgumentList 传递的 XML 变量的属性。

我已经能够在一个简单的脚本中使用 Powershell v3 在 Win 7 和 Win Server 2012 上重现该问题，该脚本没有我的主脚本所具有的任何 SharePoint、IIS 和杂项。

脚本（我想我是从现在找不到的类似问题中借用的）：

```
$xml = [xml] (Get-Content (Get-Item (".\input.xml")))
$foobar = $xml.Stuff.FooBars.Foobar 

$ScriptBlock = {        
    $foobar = $args[0]

    write-host "Inside the job..."
    write-host ("Foobar     : "+$foobar)
    write-host ("Foobar.Foo : "+$foobar.Foo)
}

write-host "Outside the job..."
write-host ("Foobar: "+$foobar)
write-host ("Foobar.Foo : "+$foobar.Foo)

Start-Job -ScriptBlock $ScriptBlock -ArgumentList $foobar | Out-Null        
While (Get-Job -State "Running") { Start-Sleep 2 }               

write-host ("Jobs Completed.")    
Get-Job | Receive-Job          
Remove-Job * 
```

输入 XML：

```
<?xml version="1.0"?>
<Stuff xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <FooBars>
    <FooBar>
      <Foo>ThisIsAFoo</Foo>
     <Bar>ThisIsABar</Bar>
    </FooBar>
  </FooBars> 
</Stuff> 
```

Powershell v2 的输出：

```
PS C:\Powershell3Issues> .\demo.ps1
Outside the job...
Foobar: System.Xml.XmlElement
Foobar.Foo : ThisIsAFoo
Jobs Completed.
Inside the job...
Foobar     : System.Collections.ArrayList System.Collections.ArrayList
Foobar.Foo : ThisIsAFoo 
```

Powershell v3 的输出：

```
PS C:\Powershell3Issues> .\demo.ps1
Outside the job...
Foobar: System.Xml.XmlElement
Foobar.Foo : ThisIsAFoo
Jobs Completed.
Inside the job...
Foobar     : System.Collections.ArrayList System.Collections.ArrayList
Foobar.Foo : 
```

请注意缺少的 Foobar.Foo 值。

我也尝试过 v3 中的 $using 语法，但它做同样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T20:48:30.153

Try this to specify the version of PowerShell to run the job under:

```
Start-Job -ScriptBlock $ScriptBlock -ArgumentList $foobar -PSVersion 2.0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T20:49:05.140

I'm using PS 3.0 and it does change data types. I modified your script to take a look:

```
$xml = [xml] (Get-Content .\input.xml)
$foobar = $xml.Stuff.FooBars.Foobar 
"Foobar Outside type = $($foobar.Gettype())"

$ScriptBlock = {        
    $foobar = $args[0]
    "Foobar Inside type = $($foobar.Gettype())"
}

Start-Job -ScriptBlock $ScriptBlock -ArgumentList $foobar | Out-Null
While (Get-Job -State "Running") { Start-Sleep 2 }     
Get-Job | Receive-Job 
```

The output I got was:

```
Foobar Outside type = System.Xml.XmlElement
Foobar Inside type = System.Collections.ArrayList System.Collections.ArrayList 
```

I'll keep looking and see what I find.

**Update:**

When I run the script in PS 2.0 using the command `powershell -version 2.0` I get an error saying:

```
Method invocation failed because [Deserialized.System.Xml.XmlElement] doesn't contain a method named 'Gettype'.
+ CategoryInfo          : InvalidOperation: (Gettype:String) [], RuntimeException
+ FullyQualifiedErrorId : MethodNotFound
+ PSComputerName        : localhost 
```

It changes from System.Xml.XmlElement to Deserialized.System.Xml.XmlElement, right? I'll keep looking and see what I find.

**Workaround:**

A workaround could be instead of passing an object just pass a string.

```
$xml_path = 'C:\input.xml'
$sb = {
    $xml = [xml](Get-Content $args[0])
    ...
}
Start-Job -ScriptBlock $sb -Args $xml_path 
```

I'm done searching. My head hurts when I go in depth on things.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-26T06:01:36.540

问题是您正在尝试序列化未序列化的 XMLElement 类型的对象。解决方法是克隆 XMLElement 并将其包装在新的 XMLDocument 中。

```
cls

$XMLDocument = [xml]@"
<?xml version="1.0"?>
<Stuff xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <FooBars>
    <FooBar>
      <Foo>ThisIsAFoo1</Foo>
      <Bar>ThisIsABar2</Bar>
    </FooBar>
    <FooBar>
      <Foo>ThisIsAFoo2</Foo>
      <Bar>ThisIsABar2</Bar>
    </FooBar>
  </FooBars> 
</Stuff>
"@

Select-Xml -Xml $XMLDocument -XPath 'Stuff/FooBars/FooBar' | foreach {  
  $SelectedNode = $_.Node
  #$SelectedNode is now of type System.Xml.XmlElement which does not serialise
  #but System.Xml.XmlDocument will serialise so wrap a clone of $SelectedNode in a new XMLDocument 
  #then pass that as the argument
  $SerializationWrapper = New-Object System.Xml.XmlDocument  
  $SerializationWrapper.AppendChild($SerializationWrapper.ImportNode($SelectedNode, $true)) | Out-Null
  Start-Job -ScriptBlock {
    param($xml)
    Write-Output "Start Job"    
    'The type of deserialise object $xml is: ' + $xml.getType()    
    $sw = New-Object system.io.stringwriter 
    $writer = New-Object system.xml.xmltextwriter($sw) 
    $writer.Formatting = [System.xml.formatting]::Indented 
    $xml.WriteContentTo($writer) 
    $sw.ToString()  
    Write-Output "Finish Job"    
    Write-Output ""    
  } -ArgumentList $SerializationWrapper
}

Get-Job | Wait-Job | Receive-Job 
```

正如您从以下输出中看到的那样，生成了 2 个作业，并传递了一个包装的 FooBar 元素进行格式化。

```
Id     Name            PSJobTypeName   State         HasMoreData     Location             Command                  
--     ----            -------------   -----         -----------     --------             -------                  
520    Job520          BackgroundJob   Running       True            localhost            ...                      
522    Job522          BackgroundJob   Running       True            localhost            ...                      
Start Job
The type of deserialise object $xml is: xml
<FooBar>
  <Foo>ThisIsAFoo1</Foo>
  <Bar>ThisIsABar2</Bar>
</FooBar>
Finish Job

Start Job
The type of deserialise object $xml is: xml
<FooBar>
  <Foo>ThisIsAFoo2</Foo>
  <Bar>ThisIsABar2</Bar>
</FooBar>
Finish Job 
```

# php - Mod重写与？在网址中

> ID：15578578
> 
> 赞同：0
> 
> 时间：2013-03-22T19:40:37.457
> 
> 标签：php, url, mod-rewrite

我有一个我正在开发的网站，只是重写了 mod，所以 url cuadmemo.com/posts.php?title=abctitle 写入 cuadmemo.com/abctitle.html

我遇到的问题是当您的标题带有 ? 在里面做记号。你点击链接

```
http://www.cuadmemo.com/Are You Doing All You Can to Protect Your Members From Wire Fraud?.html 
```

它显示为未找到？我知道那个？是导致问题的原因。我正在用 php 编写并具有这种格式的链接（从数据库中提取）

下面是我用来编写语句的 php 代码。

```
echo "<a name='description' href='http://www.cuadmemo.com/{$row_oneBack['title']}.html'>". $row_oneBack['title'] . '</a>'; 
```

我正在使用的重写代码是

```
RewriteRule (.*)\.html /posts.php?title=$1 
```

任何建议将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:46:38.340

这不是一个非常安全的网址。你应该做这样的事情；Are_You_Doing_All_You_Can_to_Protect_Your_Members_From_Wire_Fraud.html

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T19:52:02.533

因为你有一个问号，所以`?`apache 被欺骗认为你正在尝试拥有类似的东西，`$_GET['.html']`因此，你的 url 被剪切了。

看来您的 CMS/php 正在查看`$_GET['title']`. 如果你想有问号，你应该让它查看并解析`$_SERVER['REQUEST_URI']`

你可以这样：

```
# infile .htaccess
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L] 
```

然后像这样查找您的查询：

```
http://example.com/test/page?is=ok&has=get-params

// infile: index.php
// var_dump($_SERVER['REQUEST_URI']);
// you will get string '/test/page?is=ok&has=get-params' (length=41) 
```

# sql - 想要区分 Sql 中字母数字列数据的数字和 alpha 值

> ID：15578588
> 
> 赞同：-4
> 
> 时间：2013-03-22T19:41:06.437
> 
> 标签：sql, sql-server, sql-server-2008

我想要不同的值形式给定的例子

示例字符串：

```
Column1
---------
6A
6B
6C
7A
7B
7C 
```

输出

```
Column1   Column2
---------------------
6           A
6           B
6           C
7           A
7           B
7           C 
```

有什么办法请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T20:08:22.650

您可以`PATINDEX`为此使用：

```
--DROP TABLE dbo.MyTbl;

CREATE TABLE dbo.MyTbl(column1 VARCHAR(200));
INSERT INTO dbo.MyTbl(column1)
VALUES
 ('123ab'),
 ('xxx'),
 ('13'),
 (''),
 ('4f');

SELECT LEFT(Column1,PATINDEX('%[^0-9]%',Column1+'x')-1), 
       SUBSTRING(Column1,PATINDEX('%[^0-9]%',Column1+'x'),LEN(Column1))
FROM dbo.MyTbl; 
```

`+'x'`确保它可以处理数字后没有字符的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T19:57:33.923

如果你有一个最大数字长度，那么你可以直接这样做：

```
select (case when numlen > 0 then cast(left(col1, numlen) as int) else 0 end) as column1,
       substring(col1, numlen+1, 100) as column2
from (select col1,
             (case when isnumeric(left(col1, 10)) = 1 then 10
                   when isnumeric(left(col1, 9)) = 1 then 9
                   when isnumeric(left(col1, 8)) = 1 then 8
                   when isnumeric(left(col1, 7)) = 1 then 7
                   when isnumeric(left(col1, 6)) = 1 then 6
                   when isnumeric(left(col1, 5)) = 1 then 5
                   when isnumeric(left(col1, 4)) = 1 then 4
                   when isnumeric(left(col1, 3)) = 1 then 3
                   when isnumeric(left(col1, 2)) = 1 then 2
                   when isnumeric(left(col1, 1)) = 1 then 1
                   else 0
              end) as Numlen
      from t
    ) t 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T20:00:30.380

假设它以数字开头..

```
DECLARE @tab TABLE(Col VARCHAR(50))
INSERT INTO @tab 
VALUES('6A')
,('65BC'),('654CBA'),('7654ABCD')
,('76543BCDEF'),('765432CDEFGG')

SELECT *
FROM @tab

SELECT Col
,SUBSTRING(Col,1,(p0.num1-1)) AS Col1
,SUBSTRING(Col,p0.num1,LEN(Col)) AS Col2
FROM @tab
CROSS APPLY (
    SELECT 
    PATINDEX('%[^0-9]%',Col) AS num1)p0 
```

# javascript - 如何从javascript中的字符串中获取数字数组

> ID：15578589
> 
> 赞同：1
> 
> 时间：2013-03-22T19:41:12.727
> 
> 标签：javascript

如何从 javascript 字符串中获取数字数组？说我有以下内容：

```
var slop = "I bought 3 but 8 4.2 of them, mmmmhghrhghrghghrgh456"; 
```

你怎么能得到以下数组：

```
nums = [3, 8, 4.2, 456]; 
```

注意：如果可能的话，我不想使用 jQuery。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T19:43:21.900

你可以这样做 ：

```
var s = "I bought 3 but 8 4.2 of them, mmmmhghrhghrghghrgh456";
var nums = s.split(/[^\d\.]+/).map(parseFloat)
    .filter(function(v){ return v===v }); 
```

结果 ：`[3, 8, 4.2, 456]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T19:49:57.457

基本的正则表达式获取：

```
var string = 'I bought 3 but 8 4.2 of them, mmmmhghrhghrghghrgh456 hello.45';
var result = string.match(/((?:\d+\.?\d*)|(?:\.\d+))/g);
console.log(result); 
```

结果：

```
["3", "8", "4.2", "456", ".45"] 
```

**编辑**

更新为使用无前缀 0.xx 小数。如果这不是您想要的，这是旧的正则表达式，将其匹配为（忽略点）完整数字：

```
var result = string.match(/(\d+\.?\d*)/g); 
```

旧结果：

```
["3", "8", "4.2", "456", "45"] 
```

# ios - 在 UIVIewController 中显示 FormSheet ViewController

> ID：15578593
> 
> 赞同：0
> 
> 时间：2013-03-22T19:41:20.367
> 
> 标签：ios, objective-c, interface-builder, uistoryboard

我想通过使用 Storyboard 在 UIVIewController 中呈现具有 FormSheet 演示样式的 UIViewController。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:55:05.640

当然。Ctrl+Drag 从目标到 UIViewController ，然后 select `modal`，它将创建一个 segue。选择 segue 并在 Attributes Inspector 上将 Presentation 更改为`Form Sheet`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T20:09:51.067

*   添加视图控制器
*   使其成为表单
*   on the action seague 使其成为模态
*   将演示文稿样式更改为表单![在此处输入图像描述](../Images/68d0c3a64f68e8a258812cab1e632a2d.png)![在此处输入图像描述](../Images/e9c5c054dae0c917c41cf8ca23782fa9.png)

# ios - 找不到 UIKit/UIKit.h 文件 - XCode 4.6.1 - Objective-C

> ID：15578595
> 
> 赞同：3
> 
> 时间：2013-03-22T19:41:24.927
> 
> 标签：ios, objective-c, xcode

在我将 XCode 更新到 4.6.1 版本后，当我打开在最后一个 Xcode 版本中开发的项目时，它在我拥有的每个“.h”类上都会出现错误`import <UIKit/UIKit.h>`。我遇到的错误是“找不到 UIKit/UIKit.h 文件”。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T19:45:33.877

您当然需要`UIKit`在`Build phases`.

# html - 不能在一个文档中放置 2 个 form_open

> ID：15578598
> 
> 赞同：0
> 
> 时间：2013-03-22T19:41:36.553
> 
> 标签：html, forms, view, codeigniter-2

我正在一个 html 文档中尝试两个 form_open。提交第一个必须调用 saveInterview 动作，第二个必须调用 deleteInterview 动作。两种形式都有它们的form_close。但问题是提交第二个表单也会调用 saveInterview 操作而不是 deleteInterview 操作。视图代码如下

```
<div class="span8" align="right">
    <a href="#EditInterview" role="button" class="btn btn-primary btn-large" data-toggle="modal">Edit</a> <br><br><br></div>

<div id="EditInterview" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="width:950px;margin:0 0 0 -500px;">
    <div class="modal-header">
        <!-- <button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button><br> -->
        <h3 id="myModalLabel">Add new interview</h3>
    </div>
    <div class="modal-body">
        <div id="addinterviewForm">
            <p class="lead"><span class="label label-info">Anons title</span></p>
            <?php

            $interview_id = array(
                'interview_id' => $interview->getId());

            echo form_open_multipart('/InterviewController/saveInterview', '', $interview_id);

            $anonstitle_date = array(
                'name'        => 'anonstitle',
                'id'          => 'anonstitle',
                'maxlength'   => '1000',
                'value'       => $interview->getAnonstitle(),
                'rows'        => '5',
                'cols'        => '122'
            );?>
            <span class="label label-info"> <?php echo form_textarea($anonstitle_date);?> </span>

            <br><br><p class="lead"><span class="label label-info">Anons</span></p>
            <?php

            $anons_data = array(
                'name'        => 'anons',
                'id'          => 'anons_area',
                'value'       => $interview->getAnons()
            );?>
            <span class="label label-info"> <?php echo form_textarea($anons_data); ?> </span>

            <br><br><p class="lead"><span class="label label-info">Anons image</span></p>
            <span class="label label-info"> <?php echo form_upload('anonsphoto'); ?></span> <br /><br />

            <p class="lead"><span class="label label-inverse">Interview title</span></p>
            <?php

            $interviewtitle_date = array(
                'name'        => 'interviewtitle',
                'id'          => 'interviewtitle',
                'maxlength'   => '1000',
                'value'       => $interview->getInterviewtitle(),
                'rows'        => '5',
                'cols'       => '122'
            );?>
            <span class="label label-inverse"> <?php echo form_textarea($interviewtitle_date);?> </span>

            <p class="lead"><span class="label label-inverse">Interview</span></p>
            <?php
            $interview_data = array(
                'name'        => 'interview',
                'id'          => 'interview_area',
                'value'       => $interview->getInterview()
            );?>
            <span class="label label-inverse"> <?php echo form_textarea($interview_data); ?></span>

            <br><br><p class="lead"><span class="label label-inverse">Interview image</span></p>
            <span class="label label-inverse"><?php echo form_upload('interviewphoto'); ?> </span> <br /><br />
        </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" data-dismiss="modal" aria-hidden="true">Cancel</button>
        <button class="btn btn-primary" type="submit">Save</button>
    </div>
    <?php form_close();?>
</div>

<script type="text/javascript">
    CKEDITOR.replace( 'anons_area', { width: '900px', height: '200px' } );
    CKEDITOR.replace( 'interview_area', { width: '900px', height: '200px' } );
</script>

<div class="span2" align="left">
<?php
echo form_open('/InterviewController/deleteInterview/' . $interview->getId());?>
<button class="btn btn-primary btn-large" type="submit">Delete</button>
<?php form_close();?>
</div>

<div class="span9">
    <div align="center"><h3><?=$interview->getInterviewtitle()?></h3></div>
    <img src='<?=$interview->getInterviewphoto()?>' align = "left" hspace ="20" vspace="20">
    <p><?=$interview->getInterview()?></p>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:49:04.237

你应该能够做这样的事情：

```
<?php echo form_open($this->uri->uri_string(),$form1); 
              echo form_textarea($comment);
              echo form_submit('submit','submit');
              echo form_close();
?>
<?php echo form_open($this->uri->uri_string()); 
              echo form_dropdown('portion', $portion_options); 
              echo form_submit('book','book');
              echo form_close();
?> 
```

你的控制器看起来像这样：

```
if($this->input->post()){
  switch($this->input->post('form_id')){
  case 1:
    // do stuff
  break;
  case 2:
    // do stuff
  break;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:18:52.133

简要查看您的代码，您的 form_close() 函数调用似乎没有正确嵌套在 HTML 中。

尝试将您的 form_open() 语句放在第一个表单 ( `/InterviewController/saveInterview`) 中，就在开始 div 的下方`<div id="EditInterview" class="modal hide fade"...`。

希望这可以帮助...

# javascript - 撇号中的 JavaScript 函数参数

> ID：15578600
> 
> 赞同：0
> 
> 时间：2013-03-22T19:41:40.443
> 
> 标签：javascript, function, variables, onclick, arguments

好的，我有一个简短的问题。我整夜都在搜索和尝试在 ' （撇号）中显示函数参数的方法。这是我试图调用的代码。

```
function openEventAdd(month,day,year)
    {
        $.modal({
            title: 'Add Event',
            url: "event_add.php?m=" + month + "&d=" + day + "&y=" + year,
            width: 300
        });
    }; 
```

我正在尝试使用 url 标记中的 onclick 使用链接调用的某些参数来调用此函数。我无法弄清楚如何让参数显示在“URL”部分。

我研究了一堆，无法得出结论。提前致谢！

编辑：这是我调用该函数的锚。

```
<a onclick=\"openEventAdd($current_month,$current_day,$current_year)\">'.$i.'</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:33:38.673

我想你想在你的对象中用撇号显示 URL。好吧，也许你想要这个：

```
function openEventAdd(month,day,year)
{
var urlOb = "event_add.php?m=" + month + "&d=" + day + "&y=" + year;
urlOb="'"+urlOb+"'";

    $.modal({
        title: 'Add Event',
        url: urlOb,
        width: 300
    });
}; 
```

# java - 线程“AWT-EventQueue-0”中的 Java 异常 java.lang.NullPointerException

> ID：15578604
> 
> 赞同：6
> 
> 时间：2013-03-22T19:41:57.840
> 
> 标签：java, swing, nullpointerexception, jpanel, paintcomponent

好的，我在这里尝试做的是创建一个游戏，其中通过用鼠标单击对象，拉回鼠标（拉回鼠标的距离将决定对象的速度）和上来控制对象/球释放按钮对象将移动（它的移动角度也将由鼠标被拉回的角度决定）

现在，据我所知，“数学”至少应该可以工作，不幸的是，由于出现以下错误，我无法对其进行测试。

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at Snail.moveUp(Snail.java:35)
at Snail.chill(Snail.java:20)
at Level.mouseReleased(Level.java:120)
at java.awt.Component.processMouseEvent(Unknown Source)
at javax.swing.JComponent.processMouseEvent(Unknown Source)
at java.awt.Component.processEvent(Unknown Source)
at java.awt.Container.processEvent(Unknown Source)
at java.awt.Component.dispatchEventImpl(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Window.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
at java.awt.EventQueue.access$200(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue$4.run(Unknown Source)
at java.awt.EventQueue$4.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source) 
```

据我了解，这意味着我可能已经声明了具有空值的东西，但这让我感到困惑，因为我已经打印了所有变量并且所有变量都给出了值。

然后我假设也许我在声明值之前告诉对象移动，但我无法弄清楚为什么会发生这种情况。

我的代码如下。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.JPanel;
import javax.swing.Timer;
import javax.swing.event.MouseInputListener;

@SuppressWarnings("serial")
public class Level extends JPanel implements ActionListener, MouseInputListener{

Timer time;
private Image i;
private Graphics doubleG;
Snail s, s2;

boolean canJump;
int sx2;
int sy2;
int sx3;
int sy3;
double clickX;
double clickY;
double relX;
double relY;
double angle;
double speed;
double distance;

double scalex;
double scaley;
double velocityx = 1;
double velocityy = 1;

public Level(){

    s = new Snail();
    setFocusable(true);

    addMouseListener(this);
    addMouseMotionListener(this);
    //s2 = new Snail(250, 250);
    time = new Timer(17, this);
    time.start();   
}

@Override //double buffer
    public void update(Graphics g) {
        super.update(g);
            if(i == null){
                i = createImage(this.getSize().width, this.getSize().height);
                doubleG = i.getGraphics();
            }

            doubleG.setColor(getBackground());
            doubleG.fillRect(0, 0, this.getSize().width, this.getSize().height);

            doubleG.setColor(getForeground());
            paint(doubleG);

            g.drawImage(i, 0, 0, this);
    }

public void actionPerformed(ActionEvent e){
    s.update(this);
    //s2.update(this);
    repaint();

}

public void paintComponent (Graphics g) {   super.paintComponent(g); 
    s.paint(g);
    //s2.paint(g);

}

@Override
public void mouseClicked(MouseEvent arg0) {
    // TODO Auto-generated method stub

}

@Override
public void mouseEntered(MouseEvent arg0) {
    // TODO Auto-generated method stub

}

@Override
public void mouseExited(MouseEvent arg0) {
    // TODO Auto-generated method stub

}

@Override
public void mousePressed(MouseEvent ep) {
    clickX = ep.getX();
    clickY = ep.getY();
}

@Override
public void mouseReleased(MouseEvent er) {
    relX = er.getX();
    relY = er.getY();
    angle = Math.toRadians(Math.atan2(clickY - relY, clickX - relX));

    distance = Math.hypot(relX-clickX, relY-clickY);
    speed = distance/8;

    scalex = Math.cos(angle);
    scaley = Math.sin(angle);
    velocityx = speed * scalex;
    velocityy = speed * scaley;

    if (speed > 20){
        speed = 20;
    }

    if (canJump) {s.moveUp();

    }

}

@Override
public void mouseDragged(MouseEvent arg0) {
    // TODO Auto-generated method stub

}

@Override
public void mouseMoved(MouseEvent em) {
    sx2 = s.x - s.radius;
    sy2 = s.y + s.radius;
    sx3 = s.x + s.radius;
    sy3 = s.y - s.radius;

    if (em.getX() >= sx2 && em.getX() <= sx3 && em.getY() >= sy3 && em.getY() <= sy2){
        canJump = true;
    }else{
        canJump = false;
    }
    System.out.println("Click   X " + clickX + " Click   Y " + clickY);
    System.out.println("Release X " + relX + " Release Y " + relY);
    System.out.println("angle" + angle);
    System.out.println("distance" + distance);
    System.out.println("velx " + velocityx);
    System.out.println("vely " + velocityy);
    System.out.println(scalex);
    System.out.println(scaley);
    System.out.println(" ");

}

} 
```

这将是似乎发生错误的第二个类，我正在调用上面类中的实例变量。

```
import java.awt.Color;
import java.awt.Graphics;

public class Snail {

Level l;
private double gravity = 10;
private double energyloss = 0.6;
private double xFriction = .95;
private double dt = .2;
int x = 0;
int y = 0;
double dx = 0;
double dy = 0;
int radius = 30;

public void chill(){
    moveUp();
}

public Snail() {
    // TODO Auto-generated constructor stub
}

public Snail(int i, int j) {
    // TODO Auto-generated constructor stub
    x = i;
    y = j;
}

public void moveUp() {
        dx = dx + l.velocityx;
        dy = dy + l.velocityy;
} 

public void update(Level l){

    if (x + dx > l.getWidth() -radius){
        x = l.getWidth() -radius;
        dx = - dx;
    }else if( x + dx < 0 +radius){
        x = 0+radius;
        dx = -dx;
    }
    else{
        x += dx;
    }

    if(y == l.getHeight()-radius)
        dx *= xFriction;
    if (Math.abs(dx) < .9){
        dx = 0;
    }

    if (y > l.getHeight() -radius){
        y = l.getHeight() -radius;
        dy *= energyloss;
        dy = - dy;
    }else{
        //velocity formula
        dy = dy + gravity *dt;
        //position formula
        y += dy*dt + .5*gravity*dt*dt;
    }

}

public void paint(Graphics g){
    g.setColor(Color.RED);
    g.fillOval(x-radius, y-radius, radius*2, radius*2);
} 
```

}

最后是初始化关卡的类。

```
import javax.swing.JFrame;

public class Frame {

public static void main(String[] args){
    JFrame frame = new JFrame("Hard as Snails");
    frame.add(new Level());
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setSize(1280,720);
    frame.setVisible(true);

} 
```

}

任何人都可以帮我解决我在这里做错了什么，我在这个级别的编码方面也很新，所以请解释一下，就像在和一个白痴说话一样。非常感谢您的宝贵时间！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-22T19:46:15.043

您的`Level l`对象似乎是`null`. 由于您尚未对其进行初始化，并且您正尝试在`moveUp()`抛出 NullPointerException 的方法中使用它。

您应该按如下方式对其进行初始化。

```
 Level l = new Level(); 
```

1.  你应该赋值`double x = 1.0;`。我`double x = 1;`到处都能看到这可能会给你带来意想不到的结果。

# algorithm - 给定一个迭代 x 次的 for 循环，就算法成本而言，它是 (x+1) 吗？

> ID：15578607
> 
> 赞同：0
> 
> 时间：2013-03-22T19:42:08.180
> 
> 标签：algorithm

我正在学习 CLRS 书，学习 big-O 分析的第一个示例涉及一个从数组 A 的第二个元素到最后一个元素（第 26 页）的 for 循环，但它将时间成本归因于这条线为“n”。

我不明白为什么它不是n-1。如果我有一个大小为 5 (n=5) 的数组 A，并且我的 for 循环从 A[1] 到 A[4]，则总共有 4 次迭代，或 n-1。

它实际上是 n 的成本，因为它需要进行最后一次检查以确保它退出 for 循环或其他什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:48:16.333

这是因为他们试图展示 Big-O 分析的全部内容——它是关于“大”图的。通常的数学解释是这样的：给定足够大的 n 值，常数项的加法或减法对于算法复杂性的分析是无关紧要的。

简单来说，如果一个数组包含美国等国家公民的人口统计信息，则该数组的大小超过 300,000,000 个元素。在比较算法时，您会关心算法进行了 299,999,999 次计算还是 300,000,000 次计算？

您也可以将其视为四舍五入，为了简单和清晰起见，将不显着的小数字剪掉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T19:45:02.753

在进行 Big-O 表示法时，O(n) 和 O(n - 1) 本质上是相同的。当 n 达到无穷大时，O(n) 和 O(n - 1) 的速度大致相同。-1 可以忽略不计。Big O 分析通常会在参数接近无穷大时检查函数的复杂性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T19:47:24.267

不要将 big-O 视为迭代次数的精确计数。循环的运行时间与 n 成正比。在您的示例中，如果您将数组中的元素数量加倍，那么您的运行时也将大约加倍。如果有帮助，请始终考虑如果大幅增加 n 会发生什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T20:30:13.650

是的，处理`n-1`数组元素的 for 循环是 O(n-1)，但它也是 O(n)。考虑[正式定义](http://en.wikipedia.org/wiki/Big_O_notation#Formal_definition)：

> `f(x) = O(g(x))`当且仅当存在一个正实数`M`和一个实数`x0`使得`|f(x)| ≤ M·|g(x)|`所有`x > x_0`.

很明显，如果常量`M`and`x0`与 一起使用`g(x)=x-1`，那么 `M`and`x0`也将与`g(x)=x`.

在大 O 表示法`O(g(x))`中，**习惯上忽略多项式 g(x) 的低阶项，**因为随着`x`变大，前导项总是占主导地位。更具体地说，如果第一个低阶项是负号（与 一样`g(x)=x-1`），我们不需要找到`M`和的新值`x0`。如果该项为正号，则乘以`M`第二项的系数会得到一个`M`在删除第二项的情况下工作的值。这在[wikipedia](http://en.wikipedia.org/wiki/Big_O_notation#Properties)中有更详细的解释。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T22:45:40.447

复杂性分析用于推断*一般*计算的行为方式。一种方法是推理越来越大的输入值（趋于无穷大）。

假设您的实际计算是某个函数**f(n) = 3n + 10**

现在让有*另一个*函数，**g(n) = 5n + 15**

由于**n**趋于无穷大并且您将两个函数绘制在一起，它们之间的比率趋于一个常数。因此，比率趋于常数的函数被认为具有相似的复杂度，属于同一*复杂度类*。

**f(n)**属于**O(n)**的类，就像**g(n)**一样。编辑：澄清。这就是人们在非正式场合谈论复杂性时通常所说的意思。要更深入地了解所有不同类型的渐近线，请查看此答案末尾的链接。

现在，另一方面，如果**g(n) = 2^n**，那么它们之间的比率*不会*趋于恒定，因此它们不会属于同一复杂度类别。

作为自己的练习，想想**f(n) = log_2(n)**和**g(n) = log_3(n)**的比率如何工作。

最后一点：big-Oh 有更严格的定义。它被认为是一个*上限*。所以，如果你的函数是一个常数，比如**f(n) = 5**，**f**仍然是**O(n)**。您应该研究[整个渐近函数系列](http://en.wikipedia.org/wiki/Big_O_notation#Related_asymptotic_notations)以更深入地了解。

# mysql - mysqldump 用于旧版本的 mysql

> ID：15578609
> 
> 赞同：4
> 
> 时间：2013-03-22T19:42:19.963
> 
> 标签：mysql, mysqldump

如果我使用 mysqldump 工具备份旧版本的 MySql 数据库，是否有任何已知风险？例如，如果我在生产机器上使用 mysqldump 5.6 来备份 MySql 5.X 数据库。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-08-08T00:51:53.317

有一个兼容的选项。我从 [https://dev.mysql.com/doc/refman/5.5/en/mysqldump.html找到它](https://dev.mysql.com/doc/refman/5.5/en/mysqldump.html)

> --兼容=名称
> 
> 生成与其他数据库系统或旧 MySQL 服务器更兼容的输出。name 的值可以是 ansi、mysql323、mysql40、postgresql、oracle、mssql、db2、maxdb、no_key_options、no_table_options 或 no_field_options。要使用多个值，请用逗号分隔它们。这些值与设置服务器 SQL 模式的相应选项具有相同的含义。请参阅第 5.1.8 节，“服务器 SQL 模式”。
> 
> 此选项不保证与其他服务器的兼容性。它仅启用当前可用于使转储输出更兼容的那些 SQL 模式值。例如，--compatible=oracle 不会将数据类型映射到 Oracle 类型或使用 Oracle 注释语法。
> 
> 此选项需要 4.1.0 或更高版本的服务器。对于较旧的服务器，它什么也不做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T22:10:59.583

我从来没有遇到过这样的问题。所有更高版本都支持以前的版本。因此，您可以将 mysqldump 5.6 用于 5.X。

我觉得你应该看看mysqldump的选项，有些是5.5加入的，有些是5.6加入的；但主要的选项适用于所有版本。

[http://dev.mysql.com/doc/refman/5.5/en/mysqldump.html](http://dev.mysql.com/doc/refman/5.5/en/mysqldump.html) [http://dev.mysql.com/doc/refman/5.6/en/mysqldump.html](http://dev.mysql.com/doc/refman/5.6/en/mysqldump.html)

# regex - Perl 正则表达式解析 CSS

> ID：15578612
> 
> 赞同：0
> 
> 时间：2013-03-22T19:42:25.943
> 
> 标签：regex, perl

我有一个典型的 CSS 文件格式：

```
.success {
    color: #8FA442;
    border: 1px solid #C2D288;
}
.error {
    color: #b3696c;
    border: 1px solid #f7c7c9;
} 
```

我想匹配每个样式名称和 {} 中的内容。我得到了 {} 部分，并且能够轻松解析内容，但是，问题是样式名称可以是数组（例如`#contactform .input, .textarea`），我想捕获整个内容，实际上是前一个结束 } 中的所有内容。

我尝试过的是不同的变体

`m/\}(.+)(\{.+?\})/g`

但这会抓住整个文件。如果我做

`$doc =~ m/(\w+)\s+(\{.+?\})/g`

捕获每个样式 {} 很好，但只捕获名称的最后一个标记，因此对于`#contactform .input, .textarea`，它只会捕获`.textarea`.

该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T19:45:13.477

请改用[CSS::DOM](http://search.cpan.org/perldoc/CSS%3a%3aDOM)。简单的正则表达式模式不太可能证明与任务相同。

```
#!/usr/bin/env perl

use 5.012;
use strict;
use warnings;

use CSS::DOM;

my $css = my $sheet = CSS::DOM::parse(do {local $/; <DATA>});
my $rules = $css->cssRules;

for my $rule ( @$rules ) {
    say $rule->selectorText;
}

__DATA__
#contactform  .success {
    color: #8FA442;
    border: 1px solid #C2D288;
}
.error {
    color: #b3696c;
    border: 1px solid #f7c7c9;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T19:45:26.917

或者您可以使用刚刚称为[CSS](https://metacpan.org/module/CSS)的那个。

# android - 相机 setFocusAreas() 不工作 Android 4.0

> ID：15578614
> 
> 赞同：12
> 
> 时间：2013-03-22T19:42:31.913
> 
> 标签：android, camera, android-camera

我正在创建一个相机应用程序，它将使用点击对焦功能，就像许多标准相机应用程序一样。我首先获取触摸事件的 (x,y) 坐标，然后将此值传递给 UI。然后，我尝试设置焦点区域，如下所示：

```
Rect newRect = new Rect(left,top,right, bottom);
Camera.Parameters params = mCamera.mCameraInstance.getParameters();
Camera.Area focusArea = new Camera.Area(newRect, 1000);
List<Camera.Area> focusAreas = new ArrayList<Camera.Area>();
focusAreas.add(focusArea);
params.setFocusAreas(focusAreas); 
```

但是，它似乎没有任何效果。因此，我将一些值硬编码到矩形中（这样，我可以从触摸事件中排除错误的坐标）。 [根据文档](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#getFocusAreas%28%29)，它正在寻找空间中的坐标 (-1000, -1000)(左上) 到 (1000, 1000)(右下)。

所以我用这个替换了上面的矩形：

```
//should target a 100x100 square in the center of the screen
Rect newRect = new Rect(-50,-50,50, 50); 
```

而且，似乎没有任何效果。我知道我的相机支持设置焦点区域，因为首先，相机应用程序成功使用它，并且 params.getMaxNumFocusAreas() 返回 1。

如果有人过去成功使用过这个，请告诉我！！

## 编辑：

我发现这个[类似的问题](https://stackoverflow.com/questions/10649788/android-in-camera-how-to-set-focusable-area-in-api-14-or-greater?rq=1)似乎也表明这个 API 根本不适用于 Android 4.0 设备及更高版本（我在 4.1.1、Galaxy S3 上进行测试）。然而，这些设备上的相机应用程序仍然肯定具有点击对焦功能。我错过了什么？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-29T00:27:17.723

我今天遇到了这个问题：/

经过几个小时的努力，我找到了解决方案！

这很奇怪，但似乎在设置焦点区域之前将焦点模式设置为“宏”解决了问题；）

```
params.setFocusMode(Camera.Parameters.FOCUS_MODE_MACRO);
params.setFocusAreas(focusAreas);
mCamera.setParameters(params); 
```

我有搭载 Android 4.1.2 的 Galaxy S3

我希望这对你也有用:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-20T01:20:55.820

在仔细阅读 4.3 源代码并盯着相机 API 几个小时后，我发现[了这个功能](http://developer.android.com/reference/android/hardware/Camera.html#autoFocus%28android.hardware.Camera.AutoFocusCallback%29)：

```
public final void autoFocus (Camera.AutoFocusCallback cb) 
```

因此，您应该能够在代码中添加几行：

```
Rect newRect = new Rect(left,top,right, bottom);
Camera.Parameters params = mCamera.mCameraInstance.getParameters();
Camera.Area focusArea = new Camera.Area(newRect, 1000);
List<Camera.Area> focusAreas = new ArrayList<Camera.Area>();
focusAreas.add(focusArea);
params.setFocusAreas(focusAreas);

/**
 * ISO changes occurs passively after setting it in the cameraParams. Auto focus
 * parameters that have been set don't take affect until calling Camera.autoFocus()
 */
mCamera.autoFocus(new Camera.AutoFocusCallback()
{
    @Override
    public void onAutoFocus(boolean success, Camera camera)
    {
        Log.d(TAG, "onAutoFocus() " + success);
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T09:31:51.267

它对我也不起作用，但无论如何，在设置你的矩形时，请确保 `left < right`和`top < bottom`！您正在将您的矩形设置为 -100 的高度！而且，顺便说一句，您没有设置 50x50 的正方形，而是 100x-100。

# java - jQuery/Ajax 显示另存为对话框以下载从 servlet 发送的文件

> ID：15578617
> 
> 赞同：1
> 
> 时间：2013-03-22T19:42:41.887
> 
> 标签：java, ruby-on-rails

我已经在网站上阅读了很多关于这个问题的问题/回答者，但不确定他们中的任何一个都可以解决我的问题。以下是我的应用程序应该如何工作：

1.  该页面将显示之前已下载的服务器上可用文件的列表。
2.  该页面还将有一个按钮，单击该按钮将向 servlet 发送请求，该 servlet 将收集服务器上的数据并将其保存为预定义目录中的 zip 文件。然后，servlet 读取文件并将其作为二进制流发送回客户端，其中包含以下响应内容类型和标头信息： content-type = application/octet-stream header=content-Disposition, attachment; 文件名=...标头=内容类型，应用程序/x-下载
3.  要求是请求是异步的，因为 servlet 可能需要很长时间才能收集可能超过 100 MB 的大量数据。
4.  我必须在请求进行时禁用按钮并知道请求何时完成，以便我可以将刷新发送到列表以显示新文件。

我认为使用 iframe、Window.location.href 或使用 html 表单的解决方案不能满足我的要求。如果我的问题有任何解决方案，请告诉我。任何帮助是极大的赞赏。

-谭

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:36:32.233

正如您在问题标题中所写的那样，我建议您使用一些 javascript，无论是 JQuery 还是原型都可以完成这项工作。

由于我对最后一个了解更多，因此我将提供一些代码

这是我对您的情况了解的过程。

首先，您的服务器发送一个带有表单的页面。然后用户选择一个文件并单击发送按钮，页面不会重新加载并使用 Ajax 完成工作然后 JQuery 获取数据并通过 Ajax ( `request();`) 将其发送到您的服务器，然后服务器将结果发回，您可以显示它`displayFilesList();`

`your_form_id`是您的表单 ID

`submitForm`是提交表单时调用的函数的名称

`displayFilesList`将是您的服务器发回结果时调用的函数，此函数还希望您以 json 格式发回结果

```
$('#your_form_id').submit(submitForm);

function submitForm()
{
    var data = $('#your_form_id').serializeArray();
    //Code to remove the send button here
    //Code to insert a loading.gif
    request("/your/url", data, displayFilesList);
    return false;
}

function    displayFilesList(jsonResult)
{
    var data = jQuery.parseJSON(jsonResult);
    //Code to display the files list here
    //
}

function    request(url, paramPost, successCallback, errorCallback)
{
    if ((typeof successCallback == 'undefined') || (successCallback == null))
        successCallback = dispSuccess;
    if ((typeof errorCallback == 'undefined') || (errorCallback == null))
        errorCallback = dispError;

    var AjaxUrl = url;

    $.ajax({    
            type: "POST",
            url: AjaxUrl,
            data: paramPost
           }
          ).done( function(msg)
                  {
                       successCallback(msg);
                  }
          ).fail( function(jqXHR, textStatus, errorThrown)
                  {
                       errorCallback(jqXHR, textStatus, errorThrown);
                  }
          );
}

function    dispError(jqXHR, textStatus, errorThrown)
{
    alert(jqXHR.responseText);
}
function    dispSuccess(html)
{
    alert(html);
} 
```

# java - Primefaces：p:Wizard 在 p:outputpanel 中无法正常工作

> ID：15578618
> 
> 赞同：0
> 
> 时间：2013-03-22T19:42:48.417
> 
> 标签：java, jsf, jsf-2, primefaces

我的要求是根据用户选择的产品显示一个向导（使用下拉菜单）。所以我使用 ap:wizard 组件，其中包含 p:outpanel 中的几个步骤（自动更新为真）。最初呈现时，一切看起来都很好，即所有选项卡和导航按钮都正确显示。但是在单击下一步按钮时，导航按钮和标题选项卡正在消失。PFB 我为验证此错误而创建的示例代码和屏幕截图。

```
 <p:panel style="height: 100px;width:500px">
      <p:outputPanel autoUpdate="true">
         <p:wizard>
            <p:tab id="tab1" title="Tab 1">
                  Sample Tab 1
                  </p:tab>
            <p:tab id="tab2" title="Tab 2">
                  Sample Tab 2</p:tab>
            <p:tab id="tab3" title="Tab 3">
                  Sample Tab 3</p:tab>
         </p:wizard>
      </p:outputPanel>
      </p:panel> 
```

![在此处输入图像描述](../Images/bae0d42f66fd65011f717cb1cd662d71.png)

![在此处输入图像描述](../Images/48c942b0516c3d1e301c5a3fcdb21bb2.png)

* * *

手动更新不会刷新数据表中的数据。我有一个非常混乱的要求。我有一个表单，其中有一个数据表和两个命令按钮，即**删除**和**更新详细信息**。单击删除时，必须从数据表中删除所选记录（数据库正在更新，但 UI 没有更新）。单击“更新详细信息”时，必须在数据表下显示一个向导，其中包含有关所选记录的详细信息。用户应该能够从数据表中选择不同的记录，并且必须使用正确的数据更新向导。

现在我面临着多个问题，

1.  如果我将删除按钮设为 ajax，则数据表不会更新（不使用输出面板或更新完整表单）。
2.  如果我使用输出面板，那么 UI 在过滤或排序时会变得混乱（由于未恢复视图状态）。
3.  如果我为数据表和向导创建单独的表单，并尝试从“更新详细信息”按钮更新向导数据。然后向导数据也没有更新。
4.  如果我使用输出面板，那么向导用户界面会在单击下一步时变得混乱（由于未恢复视图状态）。

**PFB 场景的虚拟代码：**

```
<h:form id="form1">
  <p:outputpanel id="panel1">
       <p:datatable value="#{someBeanMethod}" var="someData">
       //Some data Table columns
       <f:facet name="footer">
                  <p:commandbutton id="button1" value="delete" 
                             actionListner="#{deletFuntion}" update="@(form1:panel1)"/>
                 <p:commandbutton id="button2" value="viewDetails" 
                             actionListner="#{fetchViewMethod}" update="@(form1:panel2)"/>
       </f:facet>
       </p:datatable>
   </p:outputpanel>

   <p:outputpanel id="panel2">
      <p:wizard id="wizard1" rendered = "#{someFlag}">
                //Some Functionality
       </p:wizard>
   </p:outputpanel>
</h:form> 
```

# cakephp - cakephp 条件结果数组被窃听的地方

> ID：15578623
> 
> 赞同：0
> 
> 时间：2013-03-22T19:43:12.140
> 
> 标签：cakephp, find, conditional-statements, where, cakephp-2.3

我被 cakePHP 的一个奇怪行为困住了。当我找到('all'); 如果我采用两个相互恢复的条件，我的数组将结果分组......

示例：第一个请求条件数组：

```
array(
    (int) 1 => '1',
    'found_by_user_id' => '99',
    'Defect.status_isopen' => (int) 1
) 
```

结果：

```
array(
    (int) 0 => array(
        'Defect' => array(
            'id' => '14701',
            'severity_id' => '3',
            'severity_title' => 'Medium',
            'found_by_user_id' => '99',
            'found_username' => 'TB',
            'assigned_to_user_id' => '7',
            'assigned_username' => 'JB',
            'version_id' => '140',
            'version_title' => '5.2',
            'project_id' => '35',
            'project_title' => 'A4L - 5',
            'found_in_build' => '',
            'fixed_in_build' => null,
            'title' => 'MyTitle',
            'content' => 'My content',
            'status_id' => '1',
            'status_title' => 'New',
            'status_isopen' => '1',
            'location_id' => '389',
            'location_title' => 'import and export',
            'nb_followers' => '0',
            'nb_media' => '1',
            'nb_linked_objects' => '1',
            'show_stopper' => '0',
            'fixed_date' => null,
            'modified' => '2013-01-18 12:09:02',
            'created' => '2013-01-18 12:09:02'
        ),
        'Media' => array(
            (int) 0 => array(
                'id' => '2195',
                'filename' => 'boxedWarning.docx',
                'dir_name' => 'legacy',
                'defect_id' => '14701',
                'content' => 'file test',
                'user_id' => '99',
                'created' => '2013-01-18 12:09:02'
            )
        ),
        'Follow' => array(),
        'PointedObject' => array()
    ), 
```

ETC

当我提出更多条件时：条件数组：

```
array(
    (int) 1 => '1',
    'Defect.status_id' => '1',
    'found_by_user_id' => '99',
    'Defect.status_isopen' => (int) 1
) 
```

结果bug... Cake group 两个参数status_title, status_open...

```
(int) 0 => array(
        'Defect' => array(
            'id' => '14701',
            'severity_id' => '3',
            'severity_title' => 'Medium',
            'found_by_user_id' => '99',
            'found_username' => 'TBt',
            'assigned_to_user_id' => '7',
            'assigned_username' => 'JB',
            'version_id' => '140',
            'version_title' => '5.2',
            'project_id' => '35',
            'project_title' => 'A4L - 5',
            'found_in_build' => '',
            'fixed_in_build' => null,
            'title' => 'MyTitle',
            'content' => 'My content',
            'status_id' => '1',
            'location_id' => '389',
            'location_title' => 'import and export',
            'nb_followers' => '0',
            'nb_media' => '1',
            'nb_linked_objects' => '1',
            'show_stopper' => '0',
            'fixed_date' => null,
            'modified' => '2013-01-18 12:09:02',
            'created' => '2013-01-18 12:09:02'
        ),
        'stati' => array(
            'status_title' => 'New',
            'status_isopen' => '1'
        ),
        'Media' => array(
            (int) 0 => array(
                'id' => '2195',
                'filename' => 'boxedWarning.docx',
                'dir_name' => 'legacy',
                'defect_id' => '14701',
                'content' => 'file test',
                'user_id' => '99',
                'created' => '2013-01-18 12:09:02'
            )
        ),
        'Follow' => array(),
        'PointedObject' => array()
    ), 
```

查看stati信息...它已经在子数组Stati中删除了Status_title和status_isopen...

注意：我使用可包含的行为。我的 find('all'); 指向一个视图表。地位是我的榜样之一。

提前致谢 ！！

编辑：这是我的分页查询：

```
$this->paginate = array(
    'limit' => $this->Auth->user('page_size'), 
    'recursive'=>-1,
    'contain' => array(
        'Media',
        'Follow'=> array(
            'conditions'=>array('Follow.user_id'=>$user_id), 
            'fields' => array('id','flag')
        ),
        'PointedObject' => array(
            'order'=>array('PointedObject.linked_category_id'),
            'LinkedCategory'
        )
    ),
    'conditions' => $conditions,
    'order' => $order
); 
```

EDIT2：MySQL 查询很好......

```
SELECT
    `Defect`.`id`, `Defect`.`severity_id`, `Defect`.`severity_title`, 
    `Defect`.`found_by_user_id`, `Defect`.`found_username`, `Defect`.`assigned_to_user_id`,
    `Defect`.`assigned_username`, `Defect`.`version_id`, `Defect`.`version_title`, 
    `Defect`.`project_id`, `Defect`.`project_title`, `Defect`.`found_in_build`, 
    `Defect`.`fixed_in_build`, `Defect`.`title`, `Defect`.`content`, 
    `Defect`.`status_id`, `Defect`.`status_title`, `Defect`.`status_isopen`, 
    `Defect`.`location_id`, `Defect`.`location_title`, `Defect`.`nb_followers`, 
    `Defect`.`nb_media`, `Defect`.`nb_linked_objects`, `Defect`.`show_stopper`, 
    `Defect`.`fixed_date`, `Defect`.`modified`, `Defect`.`created`
 FROM 
    `defects_dbo`.`defects_view` AS `Defect`
 WHERE
    `Defect`.`status_id` = 1
    AND `found_by_user_id` = 99
    AND `Defect`.`status_isopen` = 1

 ORDER BY `Defect`.`id` DESC 
 LIMIT 20 
```

# c# - ASP.NET 中的未知服务器标签 ScriptManager AJAX

> ID：15578624
> 
> 赞同：0
> 
> 时间：2013-03-22T19:43:21.660
> 
> 标签：c#, asp.net, ajax, scriptmanager

我试图在我的 ASP.NET 网站的 gridview 单元中实现一个“numericupdown”AJAX 控件。

我从工具箱的 AJAX 扩展部分拖放了一个“scriptManager”。

目前，当我运行我的网站（在本地托管）时，我收到以下错误：

```
Server Error in '/' Application.

Parser Error

Description: An error occurred during the parsing of a resource required to service this request. Please review the following specific parse error details and modify your source file appropriately. 

Parser Error Message: Unknown server tag 'ScriptManager1:numericupdownextender'.

Source Error: 

Line 85:         </asp:GridView>
Line 86: 
Line 87:         <ScriptManager1:numericupdownextender 
Line 88:         id="NumericUpDownExtender1" 
Line 89:         runat="server" 
```

我做了一些研究，这似乎是一个常见问题，但在我坚持如何解决它之前从未处理过 AJAX。这是我网站的服务器端代码：

```
<%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"
CodeBehind="Default.aspx.cs" Inherits="ViewCDs._Default" %>

 <asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent"> 
```

## 欢迎来到“CD 收藏”。从这里您可以浏览和搜索所有您喜爱的音乐！

```
 <asp:Label ID="Label1" runat="server" Text="Select Search Type:"></asp:Label>
    <asp:DropDownList ID="DropDownList1" runat="server">
        <asp:ListItem>CD Title</asp:ListItem>
        <asp:ListItem>Artist</asp:ListItem>
        <asp:ListItem>Music Genre</asp:ListItem>
    </asp:DropDownList>
    <asp:Label ID="Label2" runat="server" Text="Search Term:"></asp:Label>
    <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>

    <asp:Button ID="Button1" runat="server" Text="Search" onclick="btnSearch_Click" />

    <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConnectionString="<%$ ConnectionStrings:cdsCollectionsConnectionString3 %>" 
        SelectCommand="SELECT * FROM [cds]"></asp:SqlDataSource>

    <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>

    <asp:GridView ID="GridView1" runat="server" Width="918px" 
        AutoGenerateColumns="False" DataKeyNames="_id" AllowPaging="True" 
        PageSize="1">
        <RowStyle HorizontalAlign = "Center" />
        <Columns>
            <asp:BoundField DataField="_id" HeaderText="_id" InsertVisible="False" 
                ReadOnly="True" SortExpression="_id" Visible="false" />
                 <asp:TemplateField HeaderText = "Pic">

            <ItemTemplate>

            <asp:Image ID = "Image1" ImageUrl='<%# (string) FormatImageUrl( (string) Eval("pic")) %>' runat="server" />

            </ItemTemplate>
            <ItemStyle Width="185px" />

            </asp:TemplateField>
            <asp:BoundField DataField="cdTitle" HeaderText="CD Title" 
                SortExpression="cdTitle" />
            <asp:BoundField DataField="artist" HeaderText="Artist" 
                SortExpression="artist" />
            <asp:BoundField DataField="genre" HeaderText="Music Genre" SortExpression="genre" />
            <asp:BoundField DataField="pic" HeaderText="pic" SortExpression="pic" Visible="false" />

              <asp:TemplateField HeaderText = "Picc">
              <ItemTemplate>

            <asp:TextBox ID="txtQuan" Text = "1" Height="15" runat="server" />

              <asp:ImageButton 
                ID="ImageButton2" 
                runat="server" 
                ImageUrl="Images/arrowup.jpg" 
                AlternateText="Up"
                    Width="15" 
                    Height="15" />

                 <asp:ImageButton 
                ID="ImageButton1" 
                runat="server" 
                ImageUrl="Images/arrowdown.jpg" 
                AlternateText="Up"
                    Width="15" 
                    Height="15" />

            </ItemTemplate>
                </asp:TemplateField>

        </Columns>
    </asp:GridView>

    <ScriptManager1:numericupdownextender 
    id="NumericUpDownExtender1" 
    runat="server" 
    targetcontrolid="TxtQuan"
        width="120" 
        refvalues="" 
        servicedownmethod="" 
        serviceupmethod="" 
        targetbuttondownid=""
        targetbuttonupid="" 
        minimum="1" 
        maximum="10" />

</p>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T13:51:11.883

对于其他收到此错误消息的人。请确保从 ASP AJAX 站点下载 AJAX 工具包。然后将 ToolKitScriptManager 拖到您的页面上。

# python - 按顺序插入嵌套列表

> ID：15578628
> 
> 赞同：3
> 
> 时间：2013-03-22T19:43:24.877
> 
> 标签：python, nested-lists

假设我有一个这样的嵌套列表：

```
nested_list=[[123,'Aaron','CA'],[124,'Bob','WY'],[125,'John','TX']]
insert_me=[122,'George','AL'] 
```

该列表当前按每个子列表的中间值排序（按字母顺序），我想将值 insert_me 添加到嵌套列表中的正确位置。为了保持字母顺序，需要在其中包含“Bob”和“John”的列表之间添加它。我知道 bisect 通常会用于这样的任务，但不明白如何将 bisect 用于这样的嵌套列表。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T19:47:17.793

请参阅 Python 文档中的示例`bisect`：

> 与 sorted() 函数不同，bisect() 函数具有键或反转参数是没有意义的，因为这会导致设计效率低下（对 bisect 函数的连续调用不会“记住”所有先前的键查找） .
> 
> 相反，最好搜索预先计算的键列表以找到相关记录的索引：

```
>>> data = [('red', 5), ('blue', 1), ('yellow', 8), ('black', 0)]
>>> data.sort(key=lambda r: r[1])
>>> keys = [r[1] for r in data]         # precomputed list of keys
>>> data[bisect_left(keys, 0)]
('black', 0)
>>> data[bisect_left(keys, 1)]
('blue', 1)
>>> data[bisect_left(keys, 5)]
('red', 5)
>>> data[bisect_left(keys, 8)]
('yellow', 8) 
```

所以在你的情况下：

```
nested_list = [[123,'Aaron','CA'],[124,'Bob','WY'],[125,'John','TX']]
insert_me = [122,'George','AL']                                
keys = [r[1] for r in nested_list]
nested_list.insert(bisect.bisect_left(keys,insert_me[1]),insert_me)
[[123, 'Aaron', 'CA'],
 [124, 'Bob', 'WY'],
 [122, 'George', 'AL'],
 [125, 'John', 'TX']] 
```

为避免`keys`每次都重新构建，请在其中插入新值`keys`：

```
keys.insert(bisect_left(keys,insert_me[1]),insert_me[1]) 
```

* * *

更新：

在 insert/bisect、append/sorted 和 heapq 解决方案之间进行了一些性能比较：

```
# elements  heapq   insert/bisect  append/sorted
10,000      0.01s   0.08s           2.43s         
20,000      0.03s   0.28s          10.06s
30,000      0.04s   0.60s          22.81s 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T20:05:16.697

我会为您的问题使用[堆的专门化。](http://docs.python.org/2/library/heapq.html)[从此答案](https://stackoverflow.com/a/8875823/637284)中获取堆类，您的代码将是：

```
import heapq

class MyHeap(object):
    def __init__(self, initial=None, key=lambda x:x):
        self.key = key
        if initial:
            self._data = [(key(item), item) for item in initial]
            heapq.heapify(self._data)
        else:
            self._data = []

    def push(self, item):
        heapq.heappush(self._data, (self.key(item), item))

    def pop(self):
        return heapq.heappop(self._data)[1]

h = MyHeap([[123,'Aaron','CA'],[124,'Bob','WY'],[125,'John','TX']], key=lambda x:x[1])
h.push([122,'George','AL'])
for _ in xrange(4):
    print h.pop() 
```

您添加的每个列表都`push`将相对于第二个元素（我们使用`key=lambda x:x[1]`构造函数中的参数控制）按顺序排列。您可以通过调用来按顺序获取元素`pop`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T19:50:47.917

您可以使用按字母顺序排列列表`sorted()`。

```
nested_list=[[123,'Aaron','CA'],[124,'Bob','WY'],[125,'John','TX']]
insert_me=[122,'George','AL']

nested_list.append(insert_me)
nested_list=sorted(nested_list, key=lambda x:x[1]) 
```

[排序（）](http://docs.python.org/2/library/functions.html#sorted)

# fine-uploader - 如何使用 Fineuploader 显示进度条

> ID：15578629
> 
> 赞同：0
> 
> 时间：2013-03-22T19:43:27.213
> 
> 标签：fine-uploader

我很难弄清楚如何在使用fineuploader代码上传文件时显示进度条。

这是我的代码：

```
$("#attachmentUpload").fineUploader({
    element: $('#attachmentUpload')[0],
    request: {
        endpoint: '/controls/UploadFile.aspx'

    },
    autoUpload: true,
    multiple: false,
    text: {
        uploadButton: '<input type="button" class="btn btn-primary" value="Select File">',
        formatProgress: '({percent}% of {total_size})'
    },
    debug: true

}).on('submit', function (event, id, filename) {
    //when file is submitted code here
    alert('submitted');
}).on('complete', function (event, id, filename, responseJSON) {
    //when upload is finished code here
    alert('done');
}); 
```

当我执行文件上传时，我可以看到加载 gif 动画、文件名、文件大小和“正在处理...”一词。文件上传成功完成，但我只是无法弄清楚如何让进度条显示。我已经在 Chrome、IE 10 和 Firefox 中尝试过。它们都不显示进度条或 formatProgress 文本选项的内容。

更多信息：我正在使用 FineUploader 模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T18:12:59.423

我可以向您保证，对于所有支持 File API 的浏览器，Fine Uploader 中的进度条都可以正常工作。这当然包括 Chrome。如果您在非常快的连接上上传小文件，由于几乎是即时上传，进度条可能不可见。

在发送完最后一个字节后会出现“处理中...”状态消息，我们正在等待来自服务器的响应。[我已经解释了为什么在 Fine Uploader 的问题跟踪器的情况下](https://github.com/Widen/fine-uploader/issues/404#issuecomment-10124160)“处理中...”不能可靠地出现在 Firefox 中（并且进度条会一直持续到服务器返回响应）。请阅读[我的评论](https://github.com/Widen/fine-uploader/issues/404#issuecomment-10124160)以获取更多信息。

# c# - 如何从 set-cookie 标头解析名称-值对？

> ID：15578634
> 
> 赞同：4
> 
> 时间：2013-03-22T19:43:54.873
> 
> 标签：c#, .net, vb.net, string, parsing

我正在寻找一种干净的方法来从 httpwebrequest 对象中的 set-cookie 标头中解析出 2 个变量。

Set-Cookie 头中的字符串如下：

```
X-Mapping-dmogknml=6652DD088AB10EE6A65DD9C700872364;
path=/,ASP.NET_SessionId=f4jg1h55eoqbdk452blsozfl; path=/;
HttpOnly,id=111,status=rejected; expires=Thu, 21-Mar-2013 07:31:55 GMT; path=/,statusDes=
Validation Failed ; expires=Thu, 21-Mar-2013 07:31:55 GMT; path=/,X-Mapping
dmogknml=dmogknml=6652DD088AB10EE6A65DD9C700872; path=/ 
```

我基本上想将“status=rejected”中的“rejected”和“statusDes=Validation Failed”中的“validation failed”解析为2个字符串变量。我已经在脑海中制定了 2 个解决方案，但它们看起来有点笨拙：

1.  在“;”上循环和拆分，然后在“，”上拆分，然后在“=”上拆分。
2.  使用子字符串。

请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T19:46:29.193

您可以使用[`Split`](http://msdn.microsoft.com/en-gb/library/system.string.split.aspx)需要集合的重载`Char`。

```
 var values = theCookie.Split(new [] {';', ',', '='}, 
                              StringSplitOptions.RemoveEmptyEntries); 
```

然后，您可以一次遍历这`values`两个，寻找键来获取值，或者您可以先转换为字典（使用 LINQ `ToDictionary`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T19:47:31.030

尝试使用[正则表达式](http://msdn.microsoft.com/en-us/library/hs600312.aspx)。

这应该这样做（VB代码）：

```
Dim Pattern As String = "status=(?<Status>.*?);.*?statusDes=(?<StatusDes>.*?);"
Dim m As Match = Regex.Match(input:=MyData, pattern:=Pattern , options:=RegexOptions.IgnoreCase + RegexOptions.Singleline)
Dim Status as String
Dim StatusDes as String

    Status = m.Groups("Status").ToString
    StatusDes = m.Groups("StatusDes").ToString 
```

记得导入`Imports System.Text.RegularExpressions`

希望对您有所帮助！

# css - .ie9 CSS 选择器

> ID：15578647
> 
> 赞同：0
> 
> 时间：2013-03-22T19:44:53.857
> 
> 标签：css, internet-explorer-9

我在一个 css 文件的表单中遇到了一个 css 选择器`.ie9`：

```
.ie9 .fc-calendar .fc-row > div, .ie9 .fc-calendar .fc-head > div 
```

我猜这是一个特定于 IE9 的选择器，但我在任何地方都找不到关于它的参考。那么它是内置的还是只是为网站制作的一些自定义类？

如果它是内置的，是否有 IE10 的等价物？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T19:46:14.970

他们正在使用[Modernizr](http://modernizr.com/)。它将类添加到`html`标签中，以便您可以满足您的 CSS 以适应不同版本的 ie。此外，modernizr 会测试加载页面的浏览器上可用的 javascript 功能，并将这些功能添加为类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T19:46:18.150

不，那只是一个类选择器。

```
<div class="ie9">foo</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T21:12:45.467

您可以通过将其放置在您的区域中，根据使用的版本为 IE 指定不同的样式表：

```
<!--[if gte IE 9]>
<link rel="stylesheet" type="text/css" href="ie9-styles.css" />
<![endif]--> 
```

例如，上面的代码只会在浏览器是 IE9 或更高版本时调用样式表，因此“大于或等于”的“gte”。

它不需要 javascript 并且在技术上是有效的 HTML，因为它只是一个由 Internet Explorer 解释的注释块。

# performance - 使用 ListView 的 Windows 8 应用程序性能缓慢

> ID：15578648
> 
> 赞同：0
> 
> 时间：2013-03-22T19:44:54.990
> 
> 标签：performance, listview, windows-8, windows-store-apps, winjs

我正在构建一个 Windows 8 应用程序，我想我会在我妻子的平板电脑 - Asus Vivo Smart Tab 上测试它 - 我注意到它在切换屏幕时运行有点不稳定，应用程序的其他方面运行良好。经过多一点测试后，我注意到一个页面没有加载缓慢 - 它是唯一没有 WinJS.UI.ListView 控件的页面。所以我做了一些测试。我在我的应用程序的不同页面上注释掉了所有代码（除了必要的代码），一个带有 ListView。我什至删除了图形并将其归结为基本的样板代码，除了我将这些行留在了：

```
<div id="publisherListView"
            data-win-control="WinJS.UI.ListView"></div> 
```

该页面仍然在我妻子的平板电脑上缓慢加载。然后我把上面的代码注释掉了，Bada-Bing，运行流畅！！现在我知道华硕平板电脑并不是市场上最快的，但它可以通过页面转换流畅地运行许多其他应用程序，并且它们都有 ListViews。这里发生了什么？我有旧版本的 WinJS 吗？这是我正在使用的：

```
<link href="//Microsoft.WinJS.1.0/css/ui-light.css" rel="stylesheet" />
<script src="//Microsoft.WinJS.1.0/js/base.js"></script>
<script src="//Microsoft.WinJS.1.0/js/ui.js"></script> 
```

# java - 如何在面板中移动图标

> ID：15578661
> 
> 赞同：0
> 
> 时间：2013-03-22T19:45:38.477
> 
> 标签：java, multithreading

我正在尝试在`JPanel`单个线程中移动带有图像的 JLabel。

```
private void moveBaloon(JLabel Baloon){
    for (int i = 0; i < 10; i++) {
        try {
            Thread.sleep(500);
        } catch (InterruptedException ex) {
            Logger.getLogger(Bowandarrow.class.getName()).log(Level.SEVERE, null, ex);
        }
        Point point= Baloon.getLocation();
        Baloon.setLocation(point.x, point.y-4);

    }
} 
```

5 秒后，气球移动到另一个位置，但它在视觉上没有移动。我能做些什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:49:33.337

您正在使 EDT 进入睡眠状态，这意味着 GUI 在整个动画完成之前无法重新绘制自身。

相反，您应该使用 Swing Timer 每 500 毫秒触发一个事件以移动标签。阅读 Swing 教程中有关[如何使用计时器](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)的部分以获取更多信息。

此外，您可以搜索论坛以查找大量示例。“动画”“计时器”可能是很好的关键词。

# windows-phone-8 - 获取应用程序版本 Windows Phone 8

> ID：15578663
> 
> 赞同：8
> 
> 时间：2013-03-22T19:45:51.040
> 
> 标签：windows-phone-8

我正在关注 MSDN 上的示例代码（[http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.package.id.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.package.id.aspx)）以获取 C# 中的当前应用程序版本

```
 string buildVersion = Package.Current.Id.Version.Build.ToString(); 
```

但它给了我以下错误：

```
'Windows.ApplicationModel.Package.Current.Id' threw an exception of type 'System.NotImplementedException' 
```

有谁知道我如何获得应用程序版本号？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T06:46:29.737

该 API 不可用：如果您仔细查看 MSDN，您会发现这会引发 WP8 异常。您必须使用与 WP7.x 相同的技术。

即：

1.  在清单中查找版本号。
2.  查找程序集的版本。
3.  连接您自己的内部版本号。

请参阅[https://stackoverflow.com/a/5680679/694641，WP7](https://stackoverflow.com/a/5680679/694641) [- 从代码中获取编译/构建日期？](https://stackoverflow.com/q/4478606/694641).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-01T06:27:15.377

对于 Windows 电话 8 ..这工作..

```
String version= XDocument.Load("WMAppManifest.xml").Root.Element("App").Attribute("Version").Val‌​ue; 
```

# ios - IBM Worklight - 查看嵌入式 pdf 并垂直滚动

> ID：15578664
> 
> 赞同：0
> 
> 时间：2013-03-22T19:45:54.180
> 
> 标签：ios, html, ipad, ibm-mobilefirst

我正在使用 IBM worklight 来创建 iPad 应用程序。我需要在主应用程序窗口中显示一个 pdf 文档。我在公共文件夹内的主文件（proj.html）中使用了以下命令。

```
<body>
<embed src="http://www.ti.com/lit/ds/symlink/lm741.pdf" width="400" height="200" alt="pdf" >
</body>
</html> 
```

我在 Ipad 设备上试过，效果很好。但是，我尝试上下滚动pdf，但我不能。整个应用程序被拖下。有没有办法“修复”应用程序窗口，以便当我滚动 pdf 时只导航 pdf？

问候， S. Yassin

PS：我可以用两根手指进行多点触控，非常艰难地向下滚动pdf

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T09:12:49.973

多谢你们，

我设法解决了它。在“全部构建并部署”过程之后，在文件夹/ipad/package 下生成了“XCode”项目。

我使用 XCode 打开了项目，我修改了文件“Cordova.plist”。我发现一个名为“UiWebViewounce”的选项具有“启用”的值。我将值更改为“禁用”。

总而言之，要禁用 iPad 程序弹跳，请执行以下步骤

```
1- Using worklight to create XCode project using "Build all and deploy"
2- Open the generated project under ../ipad/package.
3- open the folder Resources/Cordova.plist.
4- Set the option UiWebViewounce to disabled. 
```

这就是最好的祝愿，

# javascript - 在小部件 api 中读取 Soundcloud 方法

> ID：15578665
> 
> 赞同：4
> 
> 时间：2013-03-22T19:45:55.703
> 
> 标签：javascript, widget, soundcloud

我热衷于访问控制 Soundcloud Widget 数据。

我只是不记得将 api_setVolume() 设置为零的语法，即静音。

这是我放在标签中的代码

```
<head>
<script type="text/javascript" src="scripts/soundcloud.player.api.js"></script>

<script type="text/javascript">
soundcloud.debug = true;
var api_setVolume = 0;
soundcloud.addEventListener('onPlayerReady', function(player, data) {
   player.api_play();
});
soundcloud.addEventListener('onMediaStart', function(player, data) {
    player.api_setVolume();
});
</script>
</head>` 
```

非常感谢您的建议，

炫目

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-16T17:41:34.193

`player.api_setVolume();`应该`player.api_setVolume(0);`

# c# - 将类泛型类型约束为元组

> ID：15578668
> 
> 赞同：7
> 
> 时间：2013-03-22T19:46:10.297
> 
> 标签：c#, .net, c#-4.0, generics

1.  我想创建一个具有一个通用 TKey 的类，其中 TKey 是可以创建的[System.Tuple类型之一。](http://msdn.microsoft.com/en-us/library/system.tuple%28v=vs.100%29.aspx)

    ```
    public class Class1<TKey> where TKey : System.Tuple
    { 
           /// Class Stuff Goes Here where TKey is one of the 8 tuple 
               types found in the link in (1)

    } 
    ```

我不太确定如何实现这一点。目标是防止自己为每个元组类实现一个类。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-22T20:00:34.987

你不能像其他人所说的那样，但你**几乎**可以做到。

所以所有的`Tuple<...>`类都有这样的签名：

```
public class Tuple<T1, ...> : 
    IStructuralEquatable, 
    IStructuralComparable, 
    IComparable, 
    ITuple 
```

所有这些接口保存`ITuple`都是公共的（`ITuple`是一个内部接口），所以你可以尝试制作这样的东西：

```
public interface ITupleKey<TKey>
    where TKey : IStructuralEquatable, IStructuralComparable, IComparable
{
} 
```

“但是等等！”，你说，“我怎么能确定没有其他东西正在实现这些接口？”

好吧，你不能。但就像我说的，这只是一种*几乎*的方式——幸运的是，`IStructuralEquatable`并且`IStructuralComparable`仅（在框架级别，自然地）用于以下类型：

```
System.Array
System.Tuple<T1>
System.Tuple<T1,T2>
System.Tuple<T1,T2,T3>
System.Tuple<T1,T2,T3,T4>
System.Tuple<T1,T2,T3,T4,T5>
System.Tuple<T1,T2,T3,T4,T5,T6>
System.Tuple<T1,T2,T3,T4,T5,T6,T7>
System.Tuple<T1,T2,T3,T4,T5,T6,T7,TRest> 
```

所以它非常接近。`TKey`将此与实际上是 的某种变体的运行时检查结合起来`Tuple`，您可能会拥有所需的东西。

编辑：

一些基本用法：

```
public class Class1<TKey> 
    where TKey : IStructuralEquatable, IStructuralComparable, IComparable
{ 
}

// will compile
var classTup1 = new Class1<Tuple<int>>();
var classTup2 = new Class1<Tuple<int,int>>();
var classTup3 = new Class1<Tuple<int,int,int>>();
var classTup4 = new Class1<Tuple<int,int,int,int>>();
var classTup5 = new Class1<Tuple<int,int,int,int,int>>();

// won't compile
var badclassTup1 = new Class1<int>();
var badclassTup2 = new Class1<string>();
var badclassTup3 = new Class1<object>(); 
```

而且，因为我显然已经疯了，让我们看看这里有什么可能：

```
public class Class1<TKey> 
    where TKey : IStructuralEquatable, IStructuralComparable, IComparable
{ 
    public Class1(TKey key)
    {
        Key = key;
        TupleRank = typeof(TKey).GetGenericArguments().Count();
        TupleSubtypes = typeof(TKey).GetGenericArguments();
        Console.WriteLine("Key type is a Tuple (I think) with {0} elements", TupleRank);
        TupleGetters = 
            Enumerable.Range(1, TupleRank)
                .Select(i => typeof(TKey).GetProperty(string.Concat("Item",i.ToString())))
                .Select(pi => pi.GetGetMethod())
                .Select(getter => Delegate.CreateDelegate(
                            typeof(Func<>).MakeGenericType(getter.ReturnType), 
                            this.Key, 
                            getter))
                .ToList();
    }

    public int TupleRank {get; private set;}
    public IEnumerable<Type> TupleSubtypes {get; private set;}
    public IList<Delegate> TupleGetters {get; private set;}
    public TKey Key {get; private set;}

    public object this[int rank]
    {
        get { return TupleGetters[rank].DynamicInvoke(null);}
    }
    public void DoSomethingUseful()
    {
        for(int i=0; i<TupleRank; i++)
        {
            Console.WriteLine("Key value for {0}:{1}", string.Concat("Item", i+1), this[i]);
        }
    }
} 
```

试验台：

```
var classTup1 = new Class1<Tuple<int>>(Tuple.Create(1));
var classTup2 = new Class1<Tuple<int,int>>(Tuple.Create(1,2));
var classTup3 = new Class1<Tuple<int,int,int>>(Tuple.Create(1,2,3));
var classTup4 = new Class1<Tuple<int,int,int,int>>(Tuple.Create(1,2,3,4));
var classTup5 = new Class1<Tuple<int,int,int,int,int>>(Tuple.Create(1,2,3,4,5));

classTup1.DoSomethingUseful();
classTup2.DoSomethingUseful();
classTup3.DoSomethingUseful();
classTup4.DoSomethingUseful();
classTup5.DoSomethingUseful(); 
```

输出：

```
Key type is a Tuple (I think) with 1 elements
Key type is a Tuple (I think) with 2 elements
Key type is a Tuple (I think) with 3 elements
Key type is a Tuple (I think) with 4 elements
Key type is a Tuple (I think) with 5 elements
Key value for Item1:1
Key value for Item1:1
Key value for Item2:2
Key value for Item1:1
Key value for Item2:2
Key value for Item3:3
Key value for Item1:1
Key value for Item2:2
Key value for Item3:3
Key value for Item4:4
Key value for Item1:1
Key value for Item2:2
Key value for Item3:3
Key value for Item4:4
Key value for Item5:5 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-09-17T16:32:51.610

我很惊讶没有人建议你基于`ITuple`接口约束你的类（或者在我的情况下是一个方法）。为了说明您的示例：

```
public class Class1<T> where T : ITuple 
```

您需要引用`System.Runtime.CompilerServices`程序集。

我的特殊用例是我想通过一组未知形状的元组进行迭代。我的解决方案是：

```
public static void ProcessTupleCollection<T>(this IEnumerable<T> collection) where T: ITuple
{
    var type = typeof(T);
    var fields = type.GetFields();
    foreach (var item in collection)
    {
        foreach (var field in fields)
        {
            field.GetValue(item);
        }
    }
} 
```

我知道这是一个旧的，但我希望这可以帮助那些可能偶然发现它的人:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-22T19:52:51.223

你不能这样做，有两个原因。

首先，您不能对泛型类型进行“或”约束。您可能必须对`Tuple<T1, T2>` *or* `Tuple<T1, T2, T3>`有一个约束。这是不可能的。

其次，您需要“通过”通用参数，如下所示：

```
public class Class1<TKey, T1, T2> where TKey : System.Tuple<T1, T2> 
```

因此，您的类需要可变数量的泛型类型参数，这也不支持。

除非有特定原因`TKey` *绝对必须是*元组类之一，否则不要限制它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-22T19:52:54.630

你不能。Tuple 的不同泛型变体没有合理的通用基类或接口。

泛型约束的目的是告诉编译器泛型类型应该有哪些成员。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-22T19:49:24.057

像这样：

```
public class Class1<TKey,P,Q> where TKey : System.Tuple<P,Q>
{ 
       /// Class Stuff Goes Here where TKey is one of the 8 tuple 
           types found in the link in (1)

} 
```

将 Tuple 的泛型参数添加到您的类中'

根据下面的评论，没有接口或反射就无法将其组合成一个类。如果有就不会有多个元组类

但是...您可以定义自己的由多个 Class1 继承的基本接口，然后将该接口用作约束。听起来不漂亮，但会工作

# sql - VB6/Access SQL SELECT NOT IN

> ID：15578682
> 
> 赞同：0
> 
> 时间：2013-03-22T19:46:27.430
> 
> 标签：sql, select, vb6

我已经缩小了我的代码范围，我面临的问题是在尝试调整一些代码以包含更多结果时。

数据表供参考：

```
**OG_InUse**
*C_ID*
E011
E011_A
F012_D

**Csrc**
*C_ID*
E011
F012
G001 
```

因此，在有“_*”的情况下有效但不返回结果的代码

```
sSql = "SELECT DISTINCT C_ID FROM Csrc WHERE C_ID NOT IN (SELECT DISTINCT C_ID FROM OG_InUse)" 
```

结果：F012 G001

当我尝试扩展上述查询以仅从 OG_InUse 中返回 C_ID 的前 4 个字符（以删除存在 _A 或 _D 等的情况）时，就会出现问题：

```
sSql = "SELECT DISTINCT C_ID FROM Csrc WHERE C_ID NOT IN (SELECT DISTINCT Left(C_ID, 4) AS C_OG_ID FROM OG_InUse)" 
```

我想导致以下结果（但访问只是继续尝试处理）：G001

有什么建议可能导致查询像这样跳闸吗？我的第一个想法是检查别名，但我不确定除了分解它之外如何开始测试它（我已经完成并且我的子查询返回正确的结果集）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T20:00:53.870

您应该始终尝试使用`EXISTS`而不是`IN`. 您需要的查询应该使用`LIKE`关键字。例如：

```
SELECT DISTINCT C_ID
FROM  CSrc
WHERE NOT EXISTS
(
    SELECT *
    FROM OG_InUse
    WHERE OG_InUse.C_ID LIKE (CSrc.C_ID + '*')
) 
```

**编辑**

1.  为此，您需要确保 OG_InUse 上的 C_ID 已编入索引。
2.  对于有序结果，您可以恢复原始`DISTINCT`关键字，它对您的结果进行排序（我已经修改了我的答案以显示这一点）

**进一步编辑**

`EXISTS`通常优先于子查询，`IN`因为`EXISTS`通常不需要对子查询进行完整评估以获得相同的结果，从而减少 CPU 和执行时间。在这种情况下，`SELECT *`只需要评估子查询以找到第一个匹配的 OG_InUse，即`SELECT *`不会完整地评估子查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T20:40:33.437

鉴于您有关表格大小的更多信息：

1.  访问将很快失去动力

2.  如果您可以将 OG_InUse.C_ID 的后缀分隔到一个单独的字段中，您的查询可以得到更好的优化（但我不知道这是否证明了努力......）

# c# - 访问列表框中的数据模板元素？

> ID：15578688
> 
> 赞同：0
> 
> 时间：2013-03-22T19:46:41.340
> 
> 标签：c#, xaml, windows-8

我有一个由列表框中的数据模板生成的图像控件。如何通过代码访问此图像？我尝试[了这个](http://msdn.microsoft.com/en-us/library/system.windows.frameworktemplate.findname.aspx)，但由于我正在开发 Metro 应用程序，因此无法设置 IsSynchronizedWithCurrentItem。

我拥有的xml是：

```
 <ListBox x:Name="options_stack" HorizontalAlignment="Left" Margin="198,569,0,33" Width="603" Background="#FF603C74" ScrollViewer.HorizontalScrollBarVisibility="Auto" ScrollViewer.VerticalScrollBarVisibility="Disabled" ScrollViewer.HorizontalScrollMode="Auto" >
        <ListBox.ItemsPanel>
            <ItemsPanelTemplate>
                <StackPanel Orientation="Horizontal" />
            </ItemsPanelTemplate>
        </ListBox.ItemsPanel>
        <ListBox.ItemTemplate>
            <DataTemplate>
                <Image x:Name="options_image" Source = "{Binding}" Stretch="Fill" Width="166" MaxHeight="156" MaxWidth="166" MinHeight="156" MinWidth="166" Tapped="apply_image_tapped" />
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:26:29.437

这取决于您通过访问图像要达到的目标。您可以将其属性绑定到视图模型并使用视图模型控制它。您还可以将 Image 放在 UserControl 中并在其中处理您想要的任何内容。您可以使用附加行为，也可以使用 VisualTreeHelper 扫描 ListBox 的可视化树（尽管这可能很慢）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T05:18:58.320

我想获取点击图像的路径，所以这就是我所做的：

```
 Image tappedImage = new Image();
    tappedImage = e.OriginalSource as Image;
    textbox.Text = tappedImage.DataContext.ToString(); 
```

# jquery - jquery .hover，然后 .click 动画麻烦

> ID：15578689
> 
> 赞同：0
> 
> 时间：2013-03-22T19:46:45.513
> 
> 标签：jquery, click, hover, if-statement

更新：我已经合并了我的代码并尝试添加 if/else 语句。我还没有弄清楚如何点击忽略 mouseenter/mouseleave 功能

```
$('#storybtn').on({
mouseenter:function(){
    $('#story')
        .stop()
        .animate({top:'405px'},'slow');
},
mouseleave:function(){
    $('#story')
        .stop()
        .animate({top:'435px'},'slow');
},
click:function(){
    var position = $('#story').css('top');
    if (position>'10px'){
    $('#story')
        .stop()
        .animate({top:'10px'},'slow');
        }
    else (position='10px'){
    $('#story')
        .stop()
        .animate({top:'435px'},'slow');
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:51:32.807

`.hover()`首先，较新版本的 jQuery 不推荐使用您的 for 语法。其次，您需要在激活新动画之前停止其他动画，否则它只会排队等待之前的动画完成。试试这个：

```
$('#storybtn').on({
    mouseenter:function(){
        $('#story')
            .stop()
            .animate({top:'405px'},'slow');
    },
    mouseleave:function(){
        $('#story')
            .stop()
            .animate({top:'435px'},'slow');
    },
    click:function(){
        $('#story')
            .stop()
            .animate({top:'10px'},'slow');
    }
}); 
```

这利用了[.on()](http://api.jquery.com/on/)`.click()`处理程序，它是`.hover()`简写形式。通过使用真实的东西，您可以整合您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T22:43:14.220

我为您创建了一个示例小提琴：

[示例小提琴](http://jsfiddle.net/a88qg/)

为了避免单击发生后的鼠标离开动画，我在#story 和 if/else 案例中添加了一个类单击以检查它或在鼠标离开后将其删除：

```
 $('#storybtn').on({
        mouseenter: function () {
            $('#story')
                .stop()
                .animate({top: '405px'}, 'slow');
        },
        mouseleave: function () {
            if (!$('#story').hasClass('clicked')) {
            $('#story')
                .stop()
                .animate({top: '435px'}, 'slow');
            } else {
                $('#story').removeClass('clicked')
            }
        },
        click: function () {
            var position = $('#story').css('top');
            if (position > '10px') {
                $('#story')
                    .addClass('clicked')
                    .stop()
                    .animate({top: '10px'}, 'slow');
            } else if (position === '10px') {
                $('#story')
                    .addClass('clicked')
                    .stop()
                    .animate({top: '435px'}, 'slow');
            }
        }
    }); 
```

# servicestack - 具有多个字段的 OrmLite UpdateOnly 示例

> ID：15578690
> 
> 赞同：4
> 
> 时间：2013-03-22T19:46:45.913
> 
> 标签：servicestack, ormlite-servicestack

是否可以使用 OrmLite 扩展方法**UpdateOnly**一次更新多个字段？

文档中给出的示例是：

```
db.UpdateOnly(new Person { FirstName = "JJ" }, p => p.FirstName); 
```

我可以提供一个包含多个字段的表达式吗？如果是这样，鉴于字段可能是不同的数据类型，最好使用什么运算符。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T20:24:09.513

以下问题中给出了一个示例： [ServiceStack Ormlite and RowVersion support](https://stackoverflow.com/questions/14761830/servicestack-ormlite-and-rowversion-support)

要使用的有效表达式是匿名类型；甚至一个具有隐式成员名称的问题，如以下问题所述：[C#: Anonymous types and property names](https://stackoverflow.com/questions/545270/c-anonymous-types-and-property-names)。

```
db.UpdateOnly(new Person { FirstName = "JJ", Age = 12 }, 
    (Person p) => new { p.FirstName, p.Age } ); 
```

请注意，在我的示例中，我声明了 lambda 参数的类型。这可能不是绝对必要的，但是没有它我会得到一个 Mono 编译器错误。

```
Error CS0016: Could not write to file `***', cause: Type '<>__AnonType1`2' was not completed. 
```

# python - 在做其他工作的同时通过 python 接收消息

> ID：15578694
> 
> 赞同：0
> 
> 时间：2013-03-22T19:47:07.317
> 
> 标签：python, ipc, interprocess

我有一个 python 脚本 A 和一个 python 脚本 B。

他们两个都是独立运行的。我想，一旦脚本 B 完成执行，它应该向脚本 A 发送一条消息，“B Done”。

一个简单的消息可以由套接字等发送。但是，脚本 A 正在做自己的一些工作。如何在不停止执行 A 的情况下让 A 监听 B？

任何帮助深表感谢！

编辑：

B 完全受 CPU 限制 - 计算。A 是 I/O 绑定和 CPU 绑定的混合体。用户以不规则的间隔干预输入（如设置的键盘记录器），其中 I/O 显然是击键，而 CPU 绑定任务是对输入的键执行一些计算。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T20:11:14.320

这个领域的问题有很多解决方案。

您可能想查看[ZMQ](http://www.zeromq.org/bindings%3apython)，它可以轻松地在应用程序之间创建消息传递模式。

消息通道将在自己的线程中运行，如果与[gevent](http://www.gevent.org/)一起使用，这可能是一个“绿色”线程以避免不必要的开销。

结合 gevent 和 zmq 的几个示例：[https](https://github.com/zeromq/pyzmq/tree/master/examples/gevent)
://github.com/zeromq/pyzmq/tree/master/examples/gevent 不同消息传递模式的绝佳指南：[ZMQ 指南](http://zguide.zeromq.org/py%3aall)

使用这些库在 A 和 B 之间创建一个通道，该通道不断轮询新工作并报告结果。

存在一些其他解决方案，您在 A 和 B 之间有一个代理，但直接在节点之间建立链接可能更适合您所描述的交互式应用程序。

# xaml - 类库中的图像源

> ID：15578696
> 
> 赞同：0
> 
> 时间：2013-03-22T19:47:14.163
> 
> 标签：xaml, windows-8, windows-runtime

我正在尝试为我的 WinRT 应用程序创建一个用户控件，为此我在我的解决方案中创建了一个类库。类库有一个名为“Images”的文件夹，其中有一个 icon.png。在 Generic.xaml 文件中，在控件模板中我有这个：

```
<Style TargetType="local:MyControl">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="local:MyControl">
                <Button Background="Transparent">
                    <StackPanel HorizontalAlignment="Center">
                        <Image Source="/Images/icon.png" Width="64" Height="64"/>
                    </StackPanel>
                </Button>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

当我在应用程序中使用此控件时，没有显示图像。我不知道问题是什么。我曾尝试使用 ms-appx 和 ../，但没有任何效果。图像构建选项设置为内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T20:21:40.637

您需要改用以下格式：

```
Source="ms-appx:///MyLibrary/Images/icon.png" /> 
```

将 MyLibrary 替换为您的 dll 的名称。

# playorm - PlayORM 可以利用顺序数据布局吗？

> ID：15578699
> 
> 赞同：0
> 
> 时间：2013-03-22T19:47:20.623
> 
> 标签：playorm

与 Cassandra 的分区相比，我想讨论 PlayORM 的虚拟分区是否始终是分区数据的最佳方式。

架构：

*   时间戳
*   设备ID
*   设备名称
*   设备所有者

对于 TimeStamp，有 500 K 行，对于特定的 Device ID，有 10 K 行

如果我想在 2 列上进行分区，请说时间戳和设备 ID。我有以下方法可以做到这一点：

1.  使用 PlayORM 在两列上进行“虚拟”分区，这样任何列的任何虚拟分区的数据都分布在所有节点上。
2.  使用 Cassandra 对其中一列的内置分区支持，并使用 PlayORM 的方法在其他列上创建“虚拟”分区。

如果“设备 ID”以“Cassandra”方式进行分区，则特定“设备 ID”的所有记录将存储在磁盘中的连续位置，并且可以像 playorm 那样继续使用“时间戳”的虚拟分区方法。我可能比 PlayORM 的方法更喜欢这种方法的原因是，使用 Cassandra 的分区方法，如果特定设备 ID 的所有记录位于磁盘上的物理连续位置，则可以快速获取它们，因为它们的数量较少（仅 10K）。这可能比 PlayORM 将所有分区的记录均匀分布在节点上的全部方法更好，因为这样数据将随机分布在磁盘上，导致许多磁盘寻道，显然这会减慢速度。所以即使在 PlayORM 的方法中，

以上似乎是一个有效的观点，还是我的理解有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:16:04.497

这可能是真的，但您还假设在一个 cassandra 节点上，由于可能发生所有压缩，因此不会有很多搜索。使用 SizeTiered 或 Leveled 压缩在 cassandra 中不断发生压缩。最好的办法可能是编写一个实际的测试用例来测试这两种情况。有时花几天时间来真正检验理论最终会带来巨大的回报。要真正测试这一点，如果读取设置为 QUOROM（即每次读取命中 2 个节点），您可能需要一个 6 节点集群。如果您有 3 个 RF=3 的节点，您可能会看到相同的性能。

无论如何，测试是无可替代的。在我们测试之前，我们发现很多“说”的东西都是错误的，因此最好运行代码并查看它对您的情况的影响。

院长

# maps - 链接到描述在地图图块生成中使用 UTF8 作为键的页面？

> ID：15578706
> 
> 赞同：0
> 
> 时间：2013-03-22T19:47:26.420
> 
> 标签：maps

我写了一篇关于如何加快地图图块渲染的博客文章 ( [http://blog.webfoot.com/2013/03/12/optimizing-map-tile-generation/](http://blog.webfoot.com/2013/03/12/optimizing-map-tile-generation/) ) 并意识到我应该归功于一个团队与我的“骷髅”想法类似的想法，但我现在找不到该想法的参考。

该组的想法是将图块上的像素表示为 UTF8 字符数组，然后在生成图块图像时，通过 UTF8 字符的键查找适当的属性，并从那里分配正确的颜色。（我记得页面右侧有一个斯堪的纳维亚半岛的文字“图像”，不同的国家用 $、% 等表示）

不幸的是，如果您在网络上搜索“map UTF8”，您会获得大量关于 UTF8 字符编码的链接，以及另一批 HTML 标头代码已泄漏到搜索目标中的链接。

我相信这是其中一个开源项目的一部分：Open Street Map 或 OSGeo 等。唉，我在他们的网站上四处寻找都找不到。

谁能给我一个链接到描述使用 UTF8 字符作为键来查找属性的页面？

*（我意识到这本身*不是一个编程问题，但地图上的程序员是知道答案的人。如果有更好的地方发布这个，我很乐意。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T09:19:57.213

您可能在谈论[UTFGrid](http://mapbox.com/developers/utfgrid/)规范。

总之，不错的博文。

# c++ - 矩阵的相关系数

> ID：15578708
> 
> 赞同：0
> 
> 时间：2013-03-22T19:47:32.537
> 
> 标签：c++, visual-c++

有人能帮我吗，因为我在这段代码上遇到错误，我不知道哪里出错了。我收到以下信息：错误 C2059：语法错误：'return'，错误 C2334：'{'之前的意外令牌；跳过明显的函数体，错误 C2039: 'rtn' : is not a member of 'corr_coefficient' 请参阅 'corr_coefficient' 的声明 谢谢。

```
using namespace std;

class corr_coefficient
{
    matrix x, y;
    double sum, C, corr[5];
    int j;  
public:
    double calc_mu(matrix x, int j=0);
    double calc_covariance(matrix x, matrix y, int j); 
    double calc_correlation();
    double StandardDeviation(matrix a, int j=0);
    double return(int i){return corr[i];
    };
    corr_coefficient(matrix x, matrix y);
    };

double corr_coefficient::calc_mu(matrix x, int j)
{
    sum=0;
    for(int i=0; i<C; i++)
    {
        sum = sum+x(i,j);
    }
    return sum/C;
}

double corr_coefficient::calc_covariance(matrix x, matrix y, int j)
{
    double mux=calc_mu(x,0); 
    double muy=calc_mu(y,j); 
    sum=0;
    for (int i=0; i<C; i++)
    {
        sum=sum+(x(i,0)-mux)*(y(i,j)-muy);
    }
    return sum/(C-1); 
}
double corr_coefficient::StandardDeviation(matrix a, int j)

{
    double mua=calc_mu(a,j); 

    sum=0;
    for (int i=0; i<C; i++)
    {
        sum=sum+((a(i,j))-mua)*((a(i,j))-mua);
    }
    return sqrt(sum/(C-1));
}
corr_coefficient::corr_coefficient(matrix x, matrix y)
{
    C=35;
    for (int j=0; j<5; j++)
    {
        corr[j]=calc_covariance(x, y, j)/(StandardDeviation(x, 0)*StandardDeviation(y, j));
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T19:49:45.787

```
double return(int i){return corr[i];
}; 
```

`return`是一个关键字。你不能有一个名为`return`. 只是称它为不同的东西。也许`operator[]`在这里重载一个合适的运算符？

```
double operator[](int i){ return corr[i]; } 
```

# c# - 我应该将应用程序范围的对象传递给需要它的对象，还是应该使用单例？

> ID：15578710
> 
> 赞同：3
> 
> 时间：2013-03-22T19:47:34.930
> 
> 标签：c#, ios, oop, xamarin.ios, singleton

在我的具体情况下，我通过嵌套视图控制器向下传递一个“facebook”对象（即 MonoTouch.FacebookConnect.Facebook 的一个实例），并且它正在向项目中添加相当多的代码。对象在 AppDelegate 中实例化后始终只有一个实例，并且在应用程序中的大多数视图控制器中都有使用。所有使用 facebook 对象的视图控制器在开始时都有这样的内容：

```
public class MyViewController : UIViewController
{
    Facebook facebook;

    public MyViewController (Facebook facebook)
    {
        this.facebook = facebook;
    }
    // ...
} 
```

...除了顶层视图控制器，对象被实例化。

还有一种情况是它“通过”嵌套视图控制器，只是为了将它传递给使用它的更深层嵌套的视图控制器。

我知道单例通常不受欢迎，并且违反了 OOP 原则。我希望代码易于维护。我是否采取了正确的方法，或者单身人士会在不影响代码质量的情况下做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T20:01:30.063

I would avoid the Singleton at all costs. Your approach encourages loose-coupling and allows you to increase your testability by mocking out the object (if you converted it from your concrete implementation). It generally adds more code but you should have better testability in your application. That allows you to use an IoC container and utilize Dependency Injection. There are many great articles and posts on the web and here on StackOverflow about such topics.

Perhaps your singleton might look like this:

```
public class MyViewController : UIViewController
{
    public MyViewController ()
    {
    }

    public void Foo()
    {
        FaceBookSingleton.Instance.DoSomeAction();
        FaceBookSingleton.Instance.Something = 4;
    }
} 
```

How do you do your testing around `Foo()`? How would you know, sooner, if you introduced a breaking change? How do you know what your dependency graph looks like? It's harder to test code like this. Don't count on people browsing your code base to try and figure out if they broke something. Help them out and yourself out by writing code that can be tested.

Now maybe look at something as such:

```
public interface ISocialMediaWidget
{
    ISocialMediaWidgetResponse DoSomeUnitOfWork();
}

public class ConcreteSocialMediaWidgetService
{
    protected readonly ISocialMediaWidget socialMediaWidget;

    public ConcreteSocialMediaWidgetService(ISocialMediaWidget widget)
    {
        this.socialMediaWidget = widget;
    }

    public ISocialMediaWidgetResponse Foo()
    {
        return socialMediaWidget.DoUnitOfWork();
    }
} 
```

Writing tests around the aforementioned is much easier. You can also mock out the response from each interface to create all kinds of tests.

```
public void SocialMediaWidgetTest()
{   //pseudo code
    var testService = new MockObject(ConcreteSocialMediaWidgetService(MockObject_of_ISocialMediaWidget));
    Assert.Equals(someImplementation_of_ISocialMediaWidgetResponse, testService.Foo());
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T19:57:15.453

首先，单例在很大程度上只是其他完全可接受的 OO 策略（如“工厂”和记忆化）的替代语法。

这是一个语法问题，以及每种语法在您的组织中的含义。如果您这样做，您的组织是否暗示可能会对产品进行一些工作`MyClass.Current`？

```
public class MyClass
{
  public static MyClass Current
  {
    get
    {
      if (SomeSortOfCache['MyClass.Current'] == null) {
        // do something to get populate it.
      }
      return SomeSortOfCache['MyClass.Current'];
    }
  }
} 
```

或者，您的组织是否更喜欢这样的东西：

```
public class MyClass
{
  public static MyClass GetCurrent()
  {
    if (SomeSortOfCache['MyClass.Current'] == null) {
      // do something to get populate it.
    }
    return SomeSortOfCache['MyClass.Current'];
  }
} 
```

Or, if you want to think of it as a factory, call the method `BuildMyClass()` or `CreateMyClass()`. Under the hood, the mechanisms are largely the same. It primarily a question of assumptions your organization makes about each syntax + naming convention.

Secondly, you've established that you only want or need to allow one instance of to exist. So, I'd suggest using a pattern that facilitates this gracefully, with the least amount of code.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T20:01:57.863

In this case, a singleton would seem to be a better solution as you would eliminate a lot of repetitive code, and increase flexibility for changes as you quickly build out your application.

A singleton could also act as an intermediary to the Facebook object, making it simpler for various parts of your application to use.

Any resource that is limited in nature is a good candidate for accessing through a singleton.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T19:59:42.800

I can prefer to use singleton approach as you need always only one instance.

# jquery - 如何有条件地对齐网页文本？

> ID：15578714
> 
> 赞同：0
> 
> 时间：2013-03-22T19:47:46.687
> 
> 标签：jquery, css, line, text-alignment

给定一个相当短的`H1`-styled 文本字符串，我想`text alignment`根据文本是否跨越单行来有条件地设置属性。

如果字符串只占一行，我想将属性设置为`center`.

否则（给定字符串，它不应该超过两行），我希望第一行左对齐；第二个，对。为了强制字符串在我想要的位置换行，除了一个空格外，我对所有空格都使用了不间断空格——这意味着我可以`.split(' ')`用来定位不同的子字符串。

我已经在这个项目中使用了 jQuery 1.9.1，所以这是除了 CSS 之外的可用解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:53:20.883

首先`h1 { text-align: center; }`在您的css中设置，然后您可以测试宽度`h1`是否大于某个值，然后根据该值编辑css：

```
$('h1').each(function(){
    var width = $(this).css('width').replace(/(?:[.](?=.*[.])|[^\d.])+/g, "");
    if (width > yourValue) {
        $('h1').css('text-align', 'left')
    }
}); 
```

我不知道如何制作第二行`text-align: right;`，对不起:(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T20:00:36.003

您可以尝试计算高度并运行 if 语句...

```
var oneLineOfText = $('h1').height(),
    theH1 = $('h1')
    numOfChars = 20; //find out how many chars fit on one line

if ( oneLineOfText <= theH1.height() )
   {
        theH1.css('text-align', 'center');
   }
else
   {
        var line1 = theH1.html().substring(0,numOfChars),
            line2 = theH1.html().substring(numOfChars);
        line1.css('text-align','left');
        line2.css('text-align', 'right');
   } 
```

未经测试，但我认为这应该让你接近......

# .htaccess - htaccess 重写规则 - 没有扩展名和斜杠

> ID：15578715
> 
> 赞同：1
> 
> 时间：2013-03-22T19:47:47.733
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我不熟悉 .htaccess 文件，如果我的问题有点荒谬，请原谅。

当我要求

```
localhost/mydomain/blog.php 
```

我想要一个这种形式的网址：

```
localhost/mydomain/blog/ 
```

我的网站目录如下所示：

![在此处输入图像描述](../Images/3a9183ec7b1530ac365a05de877a1834.png)

.htaccess 文件包括以下内容：

删除 .php 扩展名

```
<IfModule mod_rewrite.c>        
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.*)$ $1.php [NC,L]
</IfModule> 
```

有了这个链接

```
<a href="blog">Blog</a> 
```

网址是：

```
localhost/createforweb_1.1/blog 
```

但我想添加一个斜杠，所以如果我在 htaccess 中添加这些行：

```
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*)$ http://localhost/createforweb_1.1/$1/ [L,R=301] 
```

我收到此错误：

```
The requested URL /blog/.php was not found on this server. 
```

我敢肯定这很简单，但我在.htaccess 重写方面有一点经验！

### 最新的 .htaccess 文件（整个文件）

```
<IfModule mod_rewrite.c>
 Options +FollowSymlinks
# Options +SymLinksIfOwnerMatch
 RewriteEngine On
# RewriteBase /
</IfModule>

Options -MultiViews

## Adding a trailing slash
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !/$
RewriteRule . %{REQUEST_URI}/ [L,R=301]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.*?)/?$ /$1.php [L] 
```

## 替代解决方案

我刚刚为每个页面创建了一个文件夹，将文件移动到其中并将它们重命名为 index.php。新的目录树如下所示：

![在此处输入图像描述](../Images/ea9c6a07d15c36fdaca92b6ed4e43f3f.png)

现在我请求博客文件夹和 blog/index.php 正在加载。URL 变为 createforweb.gr/blog/

这是一个可以接受的解决方案，还是会在未来产生问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T21:04:12.783

将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

## Adding a trailing slash
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !/$
RewriteRule . %{REQUEST_URI}/ [L,R=301]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.*?)/?$ /$1.php [L] 
```

# xcode - XCode 使用 TAB 标记多行代码

> ID：15578716
> 
> 赞同：7
> 
> 时间：2013-03-22T19:47:51.627
> 
> 标签：xcode, keyboard-shortcuts, customization, key-bindings

![在此处输入图像描述](../Images/f6969605c0776e1f8ea7176a66d6bcfa.png)是否可以在 XCode 中选择多行代码，当我按下`TAB`按钮时，所有这些选定的行都缩进？

我知道`CMD+[`会缩进和`CMD+]`缩进。但我希望同样的原则发生在“TAB `and`SHIFT+TAB”上。

现在，当 TAB 用于结构键绑定时，它只是删除突出显示的行。我无法让我的键绑定正常工作。有谁知道我可能做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-26T17:14:18.093

我能够用 Shift-tab 替换右移 [ 用选项卡和左移 ]。只需双击当前键绑定并按 TAB 或 Shift TAB。但是我发现 Xcode 并不总是立即应用这些设置，因此重新启动它不会有什么坏处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T23:30:15.010

Look in your Xcode Preferences, under Key Bindings. You can search for the current bindings by typing "TAB" in the search field. You may need to delete some current bindings to get yours to be in effect.

# windows-phone-7 - jQuery mobile + phonegap(cordova-2.5.0) + Windows phone 7

> ID：15578717
> 
> 赞同：1
> 
> 时间：2013-03-22T19:47:52.837
> 
> 标签：windows-phone-7, cordova, jquery-mobile

如果我只是使用，我对 index.html 的历史记录有疑问

```
$.mobile.changePage("another.html",{transition:"slide"}); 
```

在像“another.html”这样的页面上，一切正常，我看到了我的 html，但是如果我点击后退按钮，它就不能正常工作（会有一个带有 css/style 的 index.html，但我不能使用按钮再次等）。

我试过了

```
window.location.href="another.html" 
```

这可以正常工作，但我想使用 jquery。

我只对 index.html 的历史有疑问。当我使用`$.mobile.changePage(...)`但不是来自 index.html 时，一切正常（历史 beetwen“another.html”和“another1.html”）。

看起来像cordova/jquery的问题。在安卓上一切正常。

# php - 设置“.$_SESSION['Username']”时遇到问题。

> ID：15578719
> 
> 赞同：0
> 
> 时间：2013-03-22T19:48:00.907
> 
> 标签：php, session

当我刚刚将用户名手册设置为 Admin 时，我的脚本有效，但现在我需要将用户名设置为“.$_SESSION['Username']。”，这给我的代码带来了一些麻烦。

我尝试以不同的方式设置它，现在我无法确定是否还有更多问题，或者它只是用户名不起作用。

我的代码是：

```
 <?php
 include "connect.php";
 include "head.php";
 ?>

<?php

$action = $_GET['action'];
if($action == "fight"){
$checkfight = @mysql_fetch_array(@mysql_query("SELECT * FROM fights WHERE User=".$_SESSION['Username']."")); //Check if fight exist
$monstername = $checkfight['monstername'];
$monsterlevel = $checkfight['monsterlevel'];
$monsterdice = $checkfight['monsterdice'];
$monsterhp = $checkfight['monsterhp'];
$monstermana = $checkfight['monstermana'];
$monsterarmor = $checkfight['monsterarmor'];
$monstermindmg = $checkfight['monstermindmg'];
$monstermaxdmg = $checkfight['monstermaxdmg'];

if($checkfight['User'] == 'Admin') {

$selectuser = @mysql_fetch_array(@mysql_query("SELECT * FROM members WHERE Username=".$_SESSION['Username']."")); //loading the user
$currently = $selectuser['Quest'];
$userhp = $selectuser['Life'];
$usermana = $selectuser['Mana'];
$usermindmg = $selectuser['mindmg'];
$usermaxdmg = $selectuser['maxdmg'];
$userdice = $selectuser['dice'];

$fightMonster = @mysql_fetch_array(@mysql_query("UPDATE fights SET Player1hp='$userhp', Player1mana='$usermana', Player1min='$usermindmg', Player1max='$usermaxdmg' WHERE User=".$_SESSION['Username']."")); 

} else {

$selectuser = @mysql_fetch_array(@mysql_query("SELECT * FROM members WHERE Username=".$_SESSION['Username'].""));
$currently = $selectuser['Quest'];
$userhp = $selectuser['Life'];
$usermana = $selectuser['Mana'];
$usermindmg = $selectuser['mindmg'];
$usermaxdmg = $selectuser['maxdmg'];
$userdice = $selectuser['dice'];

$MonsterID = $_GET['monster'];
$selectMonster = @mysql_fetch_array(@mysql_query("SELECT * FROM monsters WHERE monsterID='$MonsterID'")); 
$monstername = $selectMonster['monstername'];
$monsterlevel = $selectMonster['monsterlevel'];
$monsterdice = $selectMonster['monsterdice'];
$monsterhp = $selectMonster['monsterhp'];
$monstermana = $selectMonster['monstermana'];
$monsterarmor = $selectMonster['monsterarmor'];
$monstermindmg = $selectMonster['monstermindmg'];
$monstermaxdmg = $selectMonster['monstermaxdmg'];

$savefight = @mysql_fetch_array(@mysql_query("INSERT INTO fights SET User=".$_SESSION['Username'].", Player1hp='$userhp', Player1mana='$usermana', Player1min='$usermindmg', Player1max='$usermaxdmg', monstername='$monstername', monsterlevel='$monsterlevel', monsterdice='$monsterdice', monsterhp='$monsterhp', monstermana='$monstermana', monsterarmor='$monsterarmor', monstermindmg='$monstermindmg', monstermaxdmg='$monstermaxdmg'"));

}

?> 

<div id="fightcontent">

<div id="fight1">

Health: <?php echo $userhp; ?> <br>
Mana: <?php echo $selectuser['Mana'];?><br>
Damage: <?php echo $selectuser['mindmg']; echo "-"; echo $selectuser['maxdmg'];?>
<br>
<br>
Dice: <?php echo $userdice; ?>
<br>
Quick Slots (3)

  </div>
  <div id="fight2">

Health: <?php echo $monsterhp; ?>
<br>
<?php
if($monstermana == "1") {
echo "Mana: $monstermana";
} else {}
?>
<?php
if($monsterarmor == "0") {
} else { echo "Armor: $monsterarmor"; }
?>
Damage: <?php echo $monstermindmg; echo "-"; echo $monstermaxdmg;?>
<br>
<br>
Dice: <?php echo $monsterdice; ?>
<br>
Spells / Quickslots

  </div>
  <div id="dice">

<?php
if($_POST['submit']) {
$selectuser = @mysql_fetch_array(@mysql_query("SELECT * FROM members WHERE Username=".$_SESSION['Username'].""));
$userdice = $selectuser['dice'];
$usermindmg = $selectuser['mindmg'];
$usermaxdmg = $selectuser['maxdmg'];

$MonsterID = $_GET['monster'];
$selectMonster = @mysql_fetch_array(@mysql_query("SELECT * FROM monsters WHERE monsterID='$MonsterID'")); 
$monsterdice = $selectMonster['monsterdice'];

?>

<?php
if($userdice == 1){ 
$player1roll1 = rand(1,6); 
$player1roll2 = 0; 
$player1roll3 = 0; 
}elseif($userdice == 2){
$player1roll1 = rand(1,6);
$player1roll2 = rand(1,6);
$player1roll3 = 0; 
}elseif($userdice == 3){
$player1roll1 = rand(1,6); 
$player1roll2 = rand(1,6); 
$player1roll3 = rand(1,6); 
}
?>

<?php

if($monsterdice == 1){ 
$player2roll1 = rand(1,6); 
$player2roll2 = 0; 
$player2roll3 = 0; 
} elseif($monsterdice == 2){
$player2roll1 = rand(1,6);
$player2roll2 = rand(1,6);
$player2roll3 = 0; 
}elseif($monsterdice == 3){
$player2roll1 = rand(1,6); 
$player2roll2 = rand(1,6); 
$player2roll3 = rand(1,6); 
}
?>

<?php

$player1sum = $player1roll1 + $player1roll2 + $player1roll3;
$player2sum = $player2roll1 + $player2roll2 + $player2roll3;

if($player1sum > $player2sum) {
$playerdmg = rand($usermindmg,$usermaxdmg);
$monsterhpnew = $monsterhp - $playerdmg;
$fightMonster2 = @mysql_fetch_array(@mysql_query("UPDATE fights SET Player1hp='$userhp', Player1mana='$usermana', Player1min='$usermindmg', Player1max='$usermaxdmg', monsterdice='$monsterdice', monsterhp='$monsterhpnew', monstermana='$monstermana', monsterarmor='$monsterarmor' WHERE User=".$_SESSION['Username']."")); 

echo "You hit ";
echo $monstername ;
echo ", with" ;
echo $playerdmg ;
echo "damage. remaining health:";
echo $monsterhpnew;
echo "<br>";

if($monsterhpnew < 1){
$updatefight = @mysql_fetch_array(@mysql_query("UPDATE members SET Fight=0 WHERE Username='$user'")); 
$deletefight = @mysql_fetch_array(@mysql_query("DELETE FROM fights WHERE User='$user'")); 
header("Location: quest.php?action=victory&ID=$currently");
echo "You killed him..."; 
}

}elseif($player2sum > $player1sum) {
echo "Player 2 won";
echo $player1sum ;
echo $player2sum ;
}else{
echo "Draw";
}
echo '<img src="images/dice/'.$player1roll1.'.gif" />'; //echo the image for roll 1 of player 1
echo '<img src="images/dice/'.$player1roll2.'.gif" />'; //echo the image for roll 2 of player 1
echo '<img src="images/dice/'.$player1roll3.'.gif" />'; //echo the image for roll 2 of player 1
echo " VS. ";
echo '<img src="images/dice/'.$player2roll1.'.gif" />'; //echo the image for roll 1 of player 2
echo '<img src="images/dice/'.$player2roll2.'.gif" />'; //echo the image for roll 2 of player 2

}else{
?>

<?php } ?> 

<form method="post">
<input type="submit" name="submit" value="Roll dice" />
</form>

<?php } ?>

</div></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:51:50.757

在您可以使用 $_SESSION 变量之前，您必须调用`session_start();`

在任何会话代码之前调用它。虽然我可能会建议多阅读一些关于 OO PHP 和一些框架的内容。

[http://net.tutsplus.com/tutorials/php/object-oriented-php-for-beginners/](http://net.tutsplus.com/tutorials/php/object-oriented-php-for-beginners/)

这可能是您未来编程生涯的一个良好开端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T19:52:12.513

`session_start()` 如果您想访问 $_SESSION，我看不到在文件的开头调用它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T19:53:09.477

您可能还希望在 SQL 查询中尝试传递或收集的值周围加上引号：`Username='".$_SESSION."'"`还有上述所有注释。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T19:59:19.267

您需要[启动会话](http://php.net/manual/en/function.session-start.php)才能使用会话变量。只需放在`session_start()`脚本的第一行。

避免使用 mysql，它已被[弃用](http://www.php.net/manual/en/intro.mysql.php)。

你不需要连接`"string" . $var . "string"`，你可以使用`"string {$var} string"`，甚至更好的，[prepared statements](http://en.wikipedia.org/wiki/Prepared_statement)。使用 PDO 它就像

```
$query = $db->prepare("SELECT column FROM table WHERE row1 = ?, row2 = ?");
$query->execute(array($var1, $var2)); 
```

这避免了[sql 注入](http://en.wikipedia.org/wiki/SQL_injection)并使您的代码更干净。

# mysql - 如何获取mysql表的所有行父母

> ID：15578720
> 
> 赞同：0
> 
> 时间：2013-03-22T19:48:09.450
> 
> 标签：mysql, stored-procedures

我正在尝试创建一个存储过程，它返回给定 id 的父母的所有 Id。这是我到目前为止所得到的，出于所有意图和目的，该表由两列组成，id 和 ParentID。当前代码的结果是它似乎没有从表中获取 ParentID，它只是尝试将传入的 id 两次添加到临时表中，然后失败。我哪里做错了？

```
CREATE PROCEDURE `mydb`.`Test` (IN id int)
BEGIN
DECLARE parentId INT;
DECLARE n INT;

  DROP TEMPORARY TABLE IF EXISTS _1067_parents;

 CREATE TEMPORARY TABLE _1067_parents (
node_id INT NOT NULL PRIMARY KEY
  );
set n = 0;
set parentId := id;

get_parents_loop: LOOP
     set parentId := (select ParentID from mydb.myTable where TDOID = parentId);

    IF parentId is NULL THEN
      LEAVE get_parents_loop;
    END IF;

    INSERT INTO _1067_parents(node_id) Values (parentId);

END LOOP get_parents_loop;

 SELECT *
    FROM _1067_parents;

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:56:08.743

[SQL小提琴](http://sqlfiddle.com/#!2/aeed3/1)

**MySQL 5.5.30 架构设置**：

```
create table `MyTable`(`id` int primary key, `parentid` int)
//

insert `MyTable` (`id`, `parentid`) values
  (1, null), (2, 1), (3, 2)
//

CREATE PROCEDURE `Test` (IN cid int)
BEGIN
DECLARE parId INT;
DECLARE curId INT;

  DROP TEMPORARY TABLE IF EXISTS _1067_parents;

 CREATE TEMPORARY TABLE _1067_parents (
node_id INT NOT NULL PRIMARY KEY
  );

set curId := cid;
get_parents_loop: LOOP
    set parId := null;

    set parId = (select parentid from MyTable where id = curId);

    IF parId is NULL THEN
      LEAVE get_parents_loop;
    END IF;

    INSERT INTO _1067_parents(node_id) Values (parId);
    set curId := parId;

END LOOP get_parents_loop;

 SELECT *
    FROM _1067_parents;

end
//

show create procedure test; 
```

**查询 1**：

```
call test(3) 
```

**[结果](http://sqlfiddle.com/#!2/aeed3/1/0)**：

```
| NODE_ID |
-----------
|       1 |
|       2 | 
```

# angularjs - 在 ng-repeat 中获取未知密钥

> ID：15578722
> 
> 赞同：0
> 
> 时间：2013-03-22T19:48:18.877
> 
> 标签：angularjs, angularjs-ng-repeat

当我尝试对哈希数组执行 ng-repeat 时，似乎键变成了索引。那么我怎样才能得到这样一个对象的关键呢？

```
[
    {
    "3000:501:001": {
        "End Date": "05/05/2013",
        "Term": "Spring Semester 2013",
        "Title": "Cooperative Education",
        "Career": "Graduate",
        "Section": "001",
        "Days": "T.B.A.",
    },
    {
    "6200:660:801": {
        "End Date": "05/05/2013",
        "Term": "Spring Semester 2013",
        "Career": "Graduate",
        "Section": "801",
        "Days": "M",
    }
    }
] 
```

当我在课程中做 ng-repeat="(key, course)"

key 只是索引 0 和 1。

我需要得到“3000:501:001”和 key 所指的对象。我不知道键名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T19:59:47.327

您将需要另一个 ng-repeat 来迭代对象。

但如果可能的话，我强烈建议您使用不同的数据结构。您可以将冒号分隔的数字作为内部对象的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T14:58:30.663

为了达到您的期望，您不会将对象包装在数组中并将它们变成单个对象。你得到`0,1`等的原因是`key`在一个数组中是它的索引值

JS

```
$scope.items={
        "3000:501:001": {
            "End Date": "05/05/2013",
            "Term": "Spring Semester 2013",
            "Title": "Cooperative Education",
            "Career": "Graduate",
            "Section": "001",
            "Days": "T.B.A."
        }
    }; 
```

HTML

```
<li ng-repeat="(id,item) in items">{{id}}        
     <div ng-repeat="(key,value) in item">{{key}}: {{value}}</div>
</li> 
```

演示：[http ://plnkr.co/edit/vyNN7HCx1t6lHD73gTLC?p=preview](http://plnkr.co/edit/vyNN7HCx1t6lHD73gTLC?p=preview)

一般来说，使用数组`ng-repeat`和重组数据更方便。它也不需要额外的东西`ng-repeat`来访问嵌套对象

# mysql - 选择没有auto_increment或表数据的每隔一行mysql

> ID：15578727
> 
> 赞同：0
> 
> 时间：2013-03-22T19:48:53.273
> 
> 标签：mysql

如何在 MySQL 中选择偶数记录，而不使用任何列 id 或 auto_increment？

我现在有这个用于奇数行：

```
SET @inc = 0;
SELECT * FROM
(SELECT *,@inc:=1-@inc autoinc
FROM mytable) A
WHERE autoinc = 1 ORDER BY id; 
```

甚至：

```
SET @inc = 0;
SELECT * FROM
(SELECT *,@inc:=1-@inc autoinc
FROM mytable) A
WHERE autoinc = 1 ORDER BY id; 
```

这很好用。但是在大桌子上它太慢了。请建议我任何替代方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T20:02:52.320

也许你正在寻找这样的东西`MOD`

试试这个

```
 select * from Table1 where mod(id, 2) <> '1' 
```

[**在这里演示**](http://sqlfiddle.com/#!2/6e30f/2)

如果你想输出奇数行`1,3,5,...` 然后使用这个

```
 select * from Table1 where mod(id, 2) <> '0' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T20:04:15.497

假设您使用的 MySQL 版本足够新以支持子查询——如果没有，您还在 MySQL 3 上做什么？-- 下面是一个例子，它是如何使用一个包含无意义内容的临时表来完成的：

```
 mysql> create temporary table t (n text);
 Query OK, 0 rows affected (0.00 sec)

 mysql> insert into t (n) values ('a'), ('b'), ('c'), ('d'), ('e');
 Query OK, 5 rows affected (0.00 sec)
 Records: 5  Duplicates: 0  Warnings: 0

 mysql> select * from t;
 +------+
 | n    |
 +------+
 | a    | 
 | b    | 
 | c    | 
 | d    | 
 | e    | 
 +------+

 mysql> SET @i = 0; SELECT i, n FROM (SELECT @i := @i + 1 AS i, n FROM t) a WHERE MOD(a.i, 2) = 0;
 Query OK, 0 rows affected (0.00 sec)

 +------+------+
 | i    | n    |
 +------+------+
 |    2 | b    | 
 |    4 | d    | 
 +------+------+
 2 rows in set (0.00 sec)

 mysql> SET @i = 0; SELECT i, n FROM (SELECT @i := @i + 1 AS i, n FROM t) a WHERE MOD(a.i, 2) = 1;
 Query OK, 0 rows affected (0.00 sec)

 +------+------+
 | i    | n    |
 +------+------+
 |    1 | a    | 
 |    3 | c    | 
 |    5 | e    | 
 +------+------+
 2 rows in set (0.00 sec) 
```

看看它是如何工作的？您将会话变量 @i 设置为零，然后，在子查询中，对其执行相当于预增量的操作，以便为您提供一个索引列以及您的数据行。然后，在外部查询中，您将根据 @i mod 2 是 0（对于偶数行）还是 1（对于奇数行）来选择行。

出于说明的目的，我在外部查询中选择了“i”列，但您不需要为该技术工作做同样的事情 - 或者，当然，如果您在外部查询中选择 * ，您可以忽略结果中的“i”列值。（如果您的数据表中已经有一个列“i”，只需在子查询中使用不同的别名。）

该技术也可以很好地概括。对于 WHERE MOD(ai, N) = 0，您每第 N 行返回一次。

# function - 如何在 python 3.3 中使用 input() 设置我自己的全局变量？

> ID：15578729
> 
> 赞同：1
> 
> 时间：2013-03-22T19:49:01.540
> 
> 标签：function, web, python-3.x, global-variables

所以我一直想知道一些我确信有一个非常简单的答案，但我似乎无法理解它。在一个函数中，我如何设置一个全局变量来执行某个任务。例如，我试过：

```
def function():
    global x
    x = input("Name of variable: ")
    x = print("Working") 
```

我也试过：

* * *

```
def function(Name_Of_Variable):
    global Name_Of_Variable
    Name_Of_Variable = print("Working") 
```

* * *

基本上，我只需要能够在函数中设置一个全局变量。我试图开始工作的实际代码是这样的：

* * *

```
def htmlfrom(website_url):
    import urllib.request
    response = urllib.request.urlopen(website_url)
    variable_for_raw_data = (input("What will this data be saved as: "))
    global variable_for_raw_data
    variable_for_raw_data = response.read() 
```

* * *

这就是发生的事情：

```
>>> htmlfrom("http://www.google.com")
What will this data be saved as: g
>>> g
Traceback (most recent call last):
  File "<pyshell#1>", line 1, in <module>
    g
NameError: name 'g' is not defined 
```

* * *

要记住的事情：

*   蟒蛇 3.3
*   全局变量（非本地）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T20:21:52.433

正如评论中所讨论的：据我所知，不需要全局变量。（如果这真的是你认为你需要的，我很乐意被说服。）

一种更模块化的编程方式是`return`变量，因此允许您在函数之间传递数据。例如：

```
import urllib.request # `import` statements at the top! have a look at PEP 8

def htmlfrom(website_url):
    ''' reads HTML from a website 
        arg: `website_url` is the URL you wish to read '''
    response = urllib.request.urlopen(website_url)
    return response.read() 
```

* * *

然后假设您想为多个网站运行此功能。`dict`您可以将 HTML 存储在or`list`或其他数据结构中，而不是为每个网站创建变量。例如：

```
websites_to_read = ('http://example.com',
                    'http://example.org',)

mapping_of_sites_to_html = {} # create the `dict`

for website_url in websites_to_read:
    mapping_of_sites_to_html[website_url] = htmlfrom(website_url) 
```

# java - 切换到不同布局/活动时显示的交换动画。按钮栏

> ID：15578731
> 
> 赞同：0
> 
> 时间：2013-03-22T19:49:03.863
> 
> 标签：java, android, xml, android-activity, buttonbar

我让按钮栏在整个布局和活动中工作。当我按下一个不同的按钮并按下手机上的“返回”时，我得到一个“交换”动画，让我回到之前的所有活动/布局。按钮工作正常，我认为这与意图有关我的爪哇。在这种情况下，ViewFlipper 会是更好的选择吗？或者是否可以使用 Intent 删除它。谢谢

按钮栏.xml

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" 
android:shrinkColumns="*"  
android:stretchColumns="*" 
android:background="#6B1414">
<TableRow
    android:id="@+id/tableRow1"
    android:layout_height="fill_parent"
    android:layout_width="fill_parent">
    <Button
        android:id="@+id/btn1"
        android:text="@string/Str"
        android:textStyle="bold"
        android:layout_width="0dip"
        android:layout_height="wrap_content" 
        android:padding="18dip"
        android:layout_weight="1" 
        android:background="#424242"
        android:textColor="#ffffff"
        android:gravity="center"/>
    <Button
        android:id="@+id/btn2"
        android:text="@string/Agl"
        android:textStyle="bold"
        android:layout_width="0dip"
        android:layout_height="wrap_content" 
        android:padding="18dip"
        android:layout_weight="1" 
        android:background="#424242"
        android:textColor="#ffffff"
        android:gravity="center"/>
    <Button
        android:id="@+id/btn3"
        android:text="@string/Int"
        android:textStyle="bold" 
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:padding="18dip"
        android:layout_weight="1" 
        android:background="#424242"
        android:textColor="#ffffff"
        android:gravity="center"/>
    <Button
        android:id="@+id/btn4"
        android:text="@string/Misc"
        android:textStyle="bold" 
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1" 
        android:background="#424242"
        android:textColor="#ffffff"
        android:padding="18dip"/>
</TableRow> 
</TableLayout> 
```

MainActivity.java

```
 import android.app.Activity;
 import android.content.Intent;
 import android.os.Bundle;
 import android.view.View;
 import android.widget.Button;

 public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Button btn1 =(Button)findViewById(R.id.btn1);
    Button btn2 =(Button)findViewById(R.id.btn2);
    Button btn3 =(Button)findViewById(R.id.btn3);
    Button btn4 =(Button)findViewById(R.id.btn4);

    btn1.setOnClickListener(new Button.OnClickListener() {

        @Override
        public void onClick(View v) {
            Intent myIntent = new Intent();
            myIntent = new Intent(getApplicationContext(), MainActivity.class);
            myIntent.setAction(Intent.ACTION_VIEW);
            myIntent.setData(android.provider.MediaStore.Images.Media.INTERNAL_CONTENT_URI);
            setContentView(R.layout.activity_main);
            startActivityForResult(myIntent, 0);
        }
    });

    btn2.setOnClickListener(new Button.OnClickListener() {

        @Override
        public void onClick(View v) {
            Intent myIntent = new Intent();
            myIntent = new Intent(getApplicationContext(), MainAgil.class);
            myIntent.setAction(Intent.ACTION_VIEW);
            myIntent.setData(android.provider.MediaStore.Images.Media.INTERNAL_CONTENT_URI);
            setContentView(R.layout.agil_main);
            startActivityForResult(myIntent, 0);
        }
    });

    btn3.setOnClickListener(new Button.OnClickListener() {

        @Override
        public void onClick(View v) {
            Intent myIntent = new Intent();
            myIntent = new Intent(getApplicationContext(), MainInt.class);
            myIntent.setAction(Intent.ACTION_VIEW);
            myIntent.setData(android.provider.MediaStore.Images.Media.INTERNAL_CONTENT_URI);
            setContentView(R.layout.int_main);
            startActivityForResult(myIntent, 0);
        }
    });

    btn4.setOnClickListener(new Button.OnClickListener() {

        @Override
        public void onClick(View v) {
            Intent myIntent = new Intent();
            myIntent = new Intent(getApplicationContext(), MainMisc.class);
            myIntent.setAction(Intent.ACTION_VIEW);
            myIntent.setData(android.provider.MediaStore.Images.Media.INTERNAL_CONTENT_URI);
            setContentView(R.layout.misc_main);
            startActivityForResult(myIntent, 0);
        }
    });

}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:16:38.587

您正在开始新的活动，并且每个新活动，就像堆栈一样被推送。后退按钮只是做它的实际工作，返回最后一个活动。如果你真的想维护一个按钮栏，试试片段

[http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

# c# - 给定事件的计时器

> ID：15578747
> 
> 赞同：-2
> 
> 时间：2013-03-22T19:50:01.117
> 
> 标签：c#

我正在尝试制作关机计时器。意思是启动给定时间的计时器，然后将计算机设置为关闭。我已经搜索了互联网 + stackoverflow 的原因，但我找不到任何有用的东西可以用来计时我自己的关闭事件并在屏幕上显示它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:00:35.380

你试过什么？

如果您希望计时器在程序结束时保持活动状态，我建议使用任务计划器。您可以定义执行时间，将其设置为仅执行一次并在之后删除。（[http://www.thewindowsclub.com/schedule-shutdown-restarts-windows-7-task-schedular](http://www.thewindowsclub.com/schedule-shutdown-restarts-windows-7-task-schedular)）

否则，您可以在应用程序中创建一个计时器并将适当的事件绑定到它。

您需要两者的管理员权限。

* * *

要显示时间，您需要在表单上显示一些内容。例如一个标签。然后您可以执行以下操作：

```
 private void button1_Click(object sender, EventArgs e)
    {
        var x = new Timer();
        x.Tick += new EventHandler((obj, eventargs) => {
            var t = obj as Timer;
            var tag = (int)t.Tag;

            label1.Text = string.Format("{0:0.0}s until shutdown", tag/10d);
            t.Tag = tag - 1;

            if (tag == 0)
            {
                t.Enabled = false;
                MessageBox.Show("I shall initiate the shutdown here!", "Brace yourself!");
                Process.Start("shutdown", "/s /t 10"); // Do the actual shutdown here
            }

        });
        x.Interval = 100;
        x.Tag = 30;
        x.Enabled = true;
    } 
```

如果要中止倒计时，则要将局部变量提升为表单的私有字段。这样您就可以随时禁用计时器。

# ruby - 如何同时从 ruby 运行 ruby 脚本？

> ID：15578748
> 
> 赞同：2
> 
> 时间：2013-03-22T19:50:04.870
> 
> 标签：ruby, scripting, command, system

我有一个名为 main.rb 的程序，我想做以下事情：

```
system("ruby", "program1.rb")
sleep 60
system("ruby", "program2.rb")
sleep 60
system("ruby", "program3.rb")
sleep 60
system("ruby", "program4.rb")

puts "Programs are done running" 
```

有没有办法在没有 program2 等到 program1 完成的情况下执行上述操作？我在想它可能必须为每个程序打开一个新的 CLI？另外，我想仅在所有 4 个都完成后才输出“程序已完成运行”消息。有没有办法做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T21:00:08.857

似乎您希望每个程序同时运行，但希望在启动每个子程序之间等待 60 秒，然后等待所有程序完成。 [`Process::spawn`](http://www.ruby-doc.org/core-2.0/Process.html#method-c-spawn)本质上是`system`返回其 pid 的子进程的背景。这应该可以得到你想要的：

```
to_run = %w{program1.rb program2.rb program3.rb program4.rb}
pids = [ Process.spawn('ruby', to_run.first) ]
pids.concat to_run.drop(1).map{ |p| sleep(60); Process.spawn('ruby', p) }
Process.waitall
puts 'Everything done!' 
```

如果您在其他地方产生了其他子进程，[`waitall`](http://www.ruby-doc.org/core-2.0/Process.html#method-c-waitall)则将等待所有子进程。要仅等待您在此处生成的集合，请将`Process.waitall`上面替换为循环[`wait`](http://www.ruby-doc.org/core-2.0/Process.html#method-c-wait)

```
pids.delete(wait) until pids.empty? 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T19:57:41.220

您可以`Thread`为此使用类。特别是 .new 和 #join。（[http://www.ruby-doc.org/core-2.0/Thread.html](http://www.ruby-doc.org/core-2.0/Thread.html)）

例子：

### 跑步者.rb

```
threads = [1, 2, 3, 4].map do |time|
  Thread.new { system("ruby sleep.rb #{time}") }
end

threads.map(&:join)

puts "Everything done!" 
```

### 睡眠.rb

```
sleep ARGV[0].to_i 
```

### 输出

```
> time ruby runner.rb
Everything done!
ruby runner.rb  0.24s user 0.05s system 7% cpu 4.125 total 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T19:58:29.347

我想你想要`Process.spawn`。如果您想在生成终止状态后获得有关终止状态的信息，请使用`Process.wait`. [这是相关文档；可能值得一读，以确定您想要做什么。](http://www.ruby-doc.org/core-1.9.3/Process.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T20:36:46.160

如果你想让进程在 Ruby 中并行运行，你需要研究线程，或者比使用`system`.

你没有说你正在运行什么操作系统，但你为什么不使用 shell 脚本来做呢？它是内置的并且非常简单：

```
#!/bin/sh

ruby program1.rb &
sleep 60
ruby program2.rb &
sleep 60
ruby program3.rb &
sleep 60
ruby program4.rb & 
```

`&`在 Linux 和 Mac OS 上将命令置于后台，因此脚本将立即重新获得控制权并休眠 60 秒。

除非您正在等待所有程序都完成，否则说“程序已完成运行”是没有意义的，这需要更多的工作。

# ruby - 如何使用 Ruby 从本地 heroku 生产数据库中导出表到控制台中的 excel？

> ID：15578750
> 
> 赞同：11
> 
> 时间：2013-03-22T19:50:15.570
> 
> 标签：ruby, ruby-on-rails-3, excel, export-to-excel

我知道如何将 Rails 中的表格导出到格式化的 Excel 文件：[http ://railscasts.com/episodes/362-exporting-csv-and-excel](http://railscasts.com/episodes/362-exporting-csv-and-excel)

但是如何从控制台做到这一点。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2014-07-11T18:47:56.760

通过使用连接到您的 Heroku 数据库

```
heroku pg:psql 
```

然后运行 ​​sql 命令获取 csv 文件，例如

```
\copy (SELECT * FROM users) TO dump.csv CSV DELIMITER ',' 
```

使用 \q 退出。

执行命令后，dump.csv 将在您的本地环境中创建

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T20:04:01.983

这里有几个选择。

首先，您可以将一些 ruby​​ 代码封装到创建 Excel 电子表格的 rake 任务中，然后将其发送到 S3 以供您稍后获取。这将通过 CLI 运行：

```
heroku run rake export_data 
```

或者

您可以启动 Postgres 控制台`heroku pg:psql`并使用此处讨论的查询直接将数据导出到本地 CSV： [http ://ru05team.blogspot.co.uk/2011/03/export-postgresql-into-csv.html](http://ru05team.blogspot.co.uk/2011/03/export-postgresql-into-csv.html)

注意：`pg:psql`为您提供与生产数据库的完整交互式 PSQL 会话，就好像它是本地的一样。直接与生产数据库混淆时要小心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-08T01:13:56.037

这是我使用的（它基于@algometrix的回答），它将转义字符串中包含的引号：

1.  在heroku中打开postgres控制台`heroku pg:psql`

2.  这将确保字符串中包含的任何引号都被相应地转义

```
\copy (SELECT * FROM users) TO dump.csv WITH (FORMAT CSV, HEADER TRUE, FORCE_QUOTE *) 
```

# jquery - 使用 jQuery，如何获取一个表中 s 的宽度并将它们应用到另一个表的 s 中？

> ID：15578751
> 
> 赞同：1
> 
> 时间：2013-03-22T19:50:29.223
> 
> 标签：jquery, html-table

我有2张桌子。一个是作为另一个表的标题（请不要问为什么，这真的无关紧要，这也会过滤到我的其他答案）。我想获取 (div id="tableBody") 中每个单元格的宽度`<td></td>`并将`<tr>`它们应用于`<th></th>`不同 div 表中的相应单元格 (id="tableHeader")

所以我的 HTML 可能如下所示：

```
<html>
    <body>
       <div class="tableHeader">
           <table>
               <thead>
                   <tr>
                       <th>words</th>
                       <th>words</th>
                       <th>words</th>
                       <th>words</th>
                       <th>words</th>
                       <th>words</th>
                       <th>words</th>
                       <th>words</th>
                   </tr>
               </thead>
           </table>
       </div>
       <div class="tableBody">
           <table>
               <tbody>
                   <tr>
                       <td>words and stuff</td>
                       <td>words and stuff and things</td>
                       <td>words and stuff and some other stuff</td>
                       <td>less stuff</td>
                       <td>4</td>
                       <td>stuff and things</td>
                       <td>things and other things</td>
                       <td>stuff</td>
                   </tr>
                   <tr>
                       <!-- bunch of <td>s -->
                   </tr>
                   <tr>
                       <!-- bunch of <td>s -->
                   </tr>
                   <tr>
                       <!-- bunch of <td>s -->
                   </tr>
                   <!-- etc -->
               </tbody>
           </table>
       </div>
    </body>
</html> 
```

到目前为止，我已经用 jquery 尝试了许多我认为应该可行的不同方法。我只得到`<td>`top the top 中 s的宽度`<tr>`。最终，我假设一个数组并且可能必须涉及一个 for 循环。

首先，我试过这个：

```
$(document).ready(function() {
    var $tableBodyCell = $('.tableBody tr:eq(1) td');
    var $headerCell = $('.tableHeader thead tr th');
    var arr = [];
    var thead = [];
    $tableBodyCell.each(function() {
        var $this=$(this);
        var colWidth = $this.width();
        arr.push(colWidth);
        //alert(arr);
    });

    for(var i = 0; i < $headerCell.length; i++) {
        $headerCell.css('width', arr[i]);
    }
}); 
```

当我警告`arr[i]`时，在 for 循环中，它会返回每个警报的每个独立宽度，但是当我尝试将它应用于 CSS 时，它将循环的最后一个数字应用于所有`<th>s`

所以我尝试了这个：

```
$(document).ready(function() {
    var tableBodyCell = $('.tableBody tr:eq(1) td').toArray();
    var headerCell = $('.tableHeader thead tr th').toArray();

    for(var i = 0; i < headerCell.length; i++) {
        //alert($headerCell[i].id + " " + arr[i]);
        headerCell[i].css('width', tableBodyCell[i].css('width'));
        //$(this).css('width',arr[i]);
    }
}); 
```

那也没有用。对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T19:53:27.337

修改后的代码。（假设 tableBodyCell 和 headerCell 的长度相同）[jsfiddle](http://jsfiddle.net/seF8d/)

```
$(document).ready(function() {
    var $tableBodyCell = $('#tableBody tr:first td');
    var $headerCell = $('#tableHeader thead tr th');
    $tableBodyCell.each(function(index){
         $headerCell.eq(index).width($(this).width());
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T19:53:45.487

```
var theWidth = $("table").eq(0).find("tr > td:first").width();
$("table:gt(0)").find("tr > td:first").width(theWidth + "px"); 
```

[http://jsfiddle.net/GpLUX/](http://jsfiddle.net/GpLUX/)

# c# - 如何将 GitHub 存储库与包含多个项目的解决方案一起使用

> ID：15578752
> 
> 赞同：0
> 
> 时间：2013-03-22T19:50:35.140
> 
> 标签：c#, github

我有一个包含 15 个项目的视觉工作室解决方案。我是 GitHub 的新手，所以我想弄清楚我应该如何将此解决方案放入存储库中。在解决方案中，有一个核心项目是核心应用程序，那么每个附加项目都是一个“模块”。

我可以将它们全部上传，但项目文件加起来> 200MB。此外，大多数工作都是在每个项目上单独完成的。所以，这让我觉得我应该分别上传每一个。唯一的问题是每个模块一起工作，有些模块依赖于其他模块......所以这很难确保每个人都有最新的代码，对吧？

也许我在想这个，但有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T20:19:47.313

好吧，如果不同的项目相互依赖，并且您想确保拥有更新的代码，那么在我看来，将它们全部放在同一个地方会更容易。

我能想到的另一件事是将核心项目放在 nuget 包中，但如果代码一直在变化，那么这可能不是真正需要的解决方案。

# javascript - Highcharts：动态更改/添加轴属性

> ID：15578754
> 
> 赞同：3
> 
> 时间：2013-03-22T19:50:50.820
> 
> 标签：javascript, highcharts

我正在创建许多包含相同默认框架的 highcharts。为了更新图表的动态元素，我一直在创建新对象并在绘制图表的函数调用中引用它们。

这一直很好，直到我开始尝试使轴标签动态化（某些图表需要双轴）。我已经包含了一个 jsfiddle，它显示了我正在使用的动态结构和一个硬编码的相同图表的示例。有人能告诉我为什么这可能不起作用吗？

[https://jsfiddle.net/jeo3y1rx/](https://jsfiddle.net/jeo3y1rx/)

对象示例：

```
yAxis = {
    'dollars': function () { 
        var yAxis = { 
            title: { 
                text: "Burdened Dollars" 
            }
        }
        return yAxis;
    }
}; 
```

在 highcharts 对象中如何引用 this 的示例：

```
 var chart = new Highcharts.Chart({
    chart: {
        renderTo: 'container',
        type: 'column'
    },
    xAxis: {
        categories: ['FY Total']
    },
    yAxis: yAxis.dollars,
    series: [{
        name: 'YTD Plan',
        data: [1000]
    }, {
        type: 'column',
        name: 'YTD Actual',
        data: [900]
    }]
    }); 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T20:57:49.833

您不能在 highcharts 中以这种方式将函数用作属性。但是，您可以在图表加载后使用 highcharts API：

```
chart.yAxis[0].setTitle({
        text: "Burdened Dollars"
}); 
```

[http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/members/axis-settitle/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/members/axis-settitle/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T11:45:47.897

Highcharts 3.0 版本允许通过 update() 函数动态改变坐标轴

[http://api.highcharts.com/highcharts#Axis.update()](http://api.highcharts.com/highcharts#Axis.update())

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-01T04:57:24.883

这是工作小提琴：[DEMO](https://jsfiddle.net/Ln4vkhq1/)。

当您将“美元”声明为返回值的函数时，您必须像这样称呼它`yAxis: yAxis.dollars(),`

JS代码：

```
var yAxis = {
    'dollars': function () { 
        var yAxis = { 
            title: { 
                text: "Burdened Dollars" 
            }
        };
        return yAxis;
    }
};

$(function () {
    var chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            type: 'column'
        },
        xAxis: {
            categories: ['FY Total']
        },
        yAxis: yAxis.dollars(),//call it like this
        series: [{
            name: 'YTD Plan2',
            data: [1000]
        }, {
            type: 'column',
            name: 'YTD Actual',
            data: [900]
        }]
    });
}); 
```

# javascript - 在fineuploader jquery插件中取消文件上传

> ID：15578755
> 
> 赞同：2
> 
> 时间：2013-03-22T19:51:01.990
> 
> 标签：javascript, jquery, fine-uploader

我正在使用带有 jquery 包装器的fineuploader，并且想在某个事件发生时取消/销毁一个实例。基本上，上传器存在于 boostrap 模式中，当模式关闭时，我想停止任何上传，因为如果我不这样做，它似乎会破坏浏览器，然后再试一次。

我看到了 onCancel 回调，但我没有看到调用取消事件或基本上销毁 Fineuploader 的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T18:15:18.013

不要访问“私人”功能/属性。这些可能随时更改或消失。我[`cancelAll`在 3.3 中添加了一个 API 函数](https://github.com/Widen/fine-uploader/issues/428)。你可以用那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T20:25:04.937

这似乎可以解决问题

```
$('selector').data('fineuploader').uploader._handler.cancelAll(); 
```

# testing - 如何将 Selenium RC 用于 Selenium IDE 测试用例依赖项？

> ID：15578756
> 
> 赞同：1
> 
> 时间：2013-03-22T19:51:16.127
> 
> 标签：testing, selenium, automated-tests, selenium-rc, gui-testing

我有一个在 Selenium IDE 中制作的身份验证测试用例，必须在所有其他测试之前执行。我不想在测试套件中使用它们，因为如果我对身份验证测试用例进行一些更改，则有必要更改使用它的每个测试用例套件。

有没有办法在运行 Selenium RC Server 时指定此**测试用例依赖关系**或**测试用例执行顺序？**就像是：

`java -jar selenium-server-standalone-2.31.0.jar <path>\authentication_test_case.html <path>\application_feature1_test_case.html <path>\report.html`

或者然后

`java -jar selenium-server-standalone-2.31.0.jar <path>\authentication_test_case.html <path>\application_feature2_test_case.html <path>\report.html`

我的需要是在身份验证测试用例中所做的更改不会影响依赖它的其他测试用例/套件。欢迎任何想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T20:32:27.660

我刚刚意识到如何使用测试套件在 Selenium 中指定这个测试用例依赖项。只需要引用测试用例而不复制它的执行代码：

```
<td><tr><a href="<path>\authentication_test_case.html">Step 1 - Authentication</a></td></tr>
<td><tr><a href="<path>\application_feature1_test_case.html">Step 2 - Application Feature 1</a></td></tr> 
```

# c# - 使用数据库在 C# 中插入、删除和更新？

> ID：15578758
> 
> 赞同：-3
> 
> 时间：2013-03-22T19:51:22.847
> 
> 标签：c#

我为插入、更新编写的这个程序

使用来自 C# 数据库名称的数据集是信息，任何人都可以检查此代码，请帮助我应该在语法上写什么。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Data.SqlClient;

namespace Insert_update_delete
{
    public partial class Form1 : Form
    {
        SqlConnection cn = new SqlConnection(@"Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\Database1.mdf;Integrated Security=True;User Instance=True");
        SqlCommand cmd = new SqlCommand();
        SqlDataReader dr;

        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            cmd.Connection = cn;
            Loadlist();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            if (txtId.Text != "" & txtName.Text != "")
            {
                cn.Open();
                cmd.CommandText = "Insert into info (Id, Name) Values('"+txtId.Text+"' , '"+txtName.Text+"')";
                cmd.ExecuteNonQuery();(it is showing error here )
                cmd.Clone();
                MessageBox.Show("Record Inserted!");
                cn.Close();
                txtId.Text = "";
                txtName.Text = "";
                Loadlist();
            }
        }
        private void Loadlist()
        {
            listBox1.Items.Clear();
            listBox2.Items.Clear();
            cn.Open();
            cmd.CommandText = "Select * From info";
            dr = cmd.ExecuteReader();
            if (dr.HasRows)
            {
                while (dr.Read())
                {
                    listBox1.Items.Add(dr[0].ToString());
                    listBox2.Items.Add(dr[1].ToString());
                }
            }

            cn.Close();
        }

        private void listBox2_SelectedIndexChanged(object sender, EventArgs e)
        {
            ListBox l = sender as ListBox;
            if(l.SelectedIndex != -1)
            {
                listBox1.SelectedIndex = l.SelectedIndex;
                listBox2.SelectedIndex = l.SelectedIndex;
                txtId.Text = listBox1.SelectedItem.ToString();
                txtName.Text = listBox2.SelectedItem.ToString();
            }
        }

        private void button2_Click(object sender, EventArgs e)
        {
            if (txtId.Text != "" & txtName.Text != "")
            {
                cn.Open();
                cmd.CommandText = "Delete from info where id*'"+txtId.Text+"' and name*'"+txtName.Text+"'";
                cmd.ExecuteNonQuery();
                cn.Close();
                MessageBox.Show("Record Deleted");
                Loadlist();
                txtId.Text = "";
                txtName.Text = "";

            }
        }

        private void button3_Click(object sender, EventArgs e)
        {
            if (txtId.Text != "" & txtName.Text != "" & listBox1.SelectedIndex != -1)
            {
                cn.Open();
                cmd.CommandText = "Update info set id='"+txtId.Text+"', name='"+txtName.Text+"' where id='"+listBox1.SelectedItem.ToString()+"' and name= '"+listBox2.SelectedItem.ToString()+"'";
                cmd.ExecuteNonQuery();
                cn.Close();
                MessageBox.Show("Record Updated");
                Loadlist();
                txtId.Text = "";
                txtName.Text = "";

            }
        }
    }
} 
```

毫无疑问，这个工作正常，请检查。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T19:54:14.403

从插入语句中删除空格。你已经在它们之间放置了空格，`in to`所以`into`像这样改变你的命令文本。

```
 cmd.CommandText = "Insert into info (Id, Name) Values('"+txtId.Text+"' , '"+txtName.Text+"')"; 
```

还有一个是`*`你的删除语句中的内容。我认为当您忽略当前错误时，它也会给您带来问题

```
cmd.CommandText = "Delete from info where id*'"+txtId.Text+"' and name*'"+txtName.Text+"'"; 
```

所以应该

```
cmd.CommandText = "Delete from info where id=" + txtId.Text+"' and name='"+txtName.Text+"'"; 
```

现在你的更新命令：在这里你错过`,`了多列。你的更新命令应该是这样的

```
cmd.CommandText = "Update info set id='"+txtId.Text+"', name='"+txtName.Text+"' where id='"+listBox1.SelectedItem.ToString()+"' and name= '"+listBox2.SelectedItem.ToString()+"'"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T19:54:35.507

此 SQL 不是有效的 SQL：

```
"Delete from info where id'"+txtId.Text+"' and name'"+txtName.Text+"'";
"Insert in to info (Id, Name) Values('"+txtId.Text+"' , '"+txtName.Text+"')";
"Update info set id='"+txtId.Text+"'name='"+txtName.Text+"' where id='"+listBox1.SelectedItem.ToString()+"' and name= '"+listBox2.SelectedItem.ToString()+"'"; 
```

它应该：

1.  `=`在 DELETE 中进行比较时包含符号，而不是`*`.
2.  在 INSERT 中使用`into`而不是。`in to`
3.  UPDATE 中的字段之间有逗号。
4.  不应连接 SQL，而应使用参数化查询。

您拥有的唯一有效 SQL 是 SELECT。在将查询写入程序之前，您应该尝试在 SQL Server Management Studio 中运行查询。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T19:53:42.507

我猜你应该使用“INSERT INTO info”时使用的是“Insert in to info”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T19:55:00.477

看起来您的插入命令中有错字：

```
cmd.CommandText = "Insert in to info (Id, Name) Values('"+txtId.Text+"' , '"+txtName.Text+"')" 
```

应该是这样的：

```
cmd.CommandText = "Insert into info (Id, Name) Values('"+txtId.Text+"' , '"+txtName.Text+"')" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T20:00:01.723

最佳实践

不要使用选择 *。在这里，您只查找 2 列数据。因此，仅选择 2 个列。如果表有 20 列怎么办？那是 18 个额外的数据列，被无偿检索。此外，请参考列名而不是索引。如果将来有人更改该表的架构并在 0 和 1 列之间插入列，那么您的结果可能不是预期的。

```
Select col1, col2 from info 
```

你的代码：

```
cmd.CommandText = "Select * From info";
            dr = cmd.ExecuteReader();
            if (dr.HasRows)
            {
                while (dr.Read())
                {
                    listBox1.Items.Add(dr[0].ToString());
                    listBox2.Items.Add(dr[1].ToString());
                }
            } 
```

# android - 启动时未找到 FC 源

> ID：15578759
> 
> 赞同：1
> 
> 时间：2013-03-22T19:51:24.957
> 
> 标签：android, xml, debugging

我有一个正在开发的应用程序，到目前为止只编辑了 xml，当我尝试调试时我得到了这个：

![找不到来源](../Images/2f523e34a242769793aabc3297484a03.png)

调试：

```
Thread [<1> main] (Suspended (exception RuntimeException))  
ActivityThread.performLaunchActivity(ActivityThread$ActivityClientRecord, Intent) line: 2306    
ActivityThread.handleLaunchActivity(ActivityThread$ActivityClientRecord, Intent) line: 2356 
ActivityThread.access$600(ActivityThread, ActivityThread$ActivityClientRecord, Intent) line: 150    
ActivityThread$H.handleMessage(Message) line: 1244  
ActivityThread$H(Handler).dispatchMessage(Message) line: 99 
Looper.loop() line: 137 
ActivityThread.main(String[]) line: 5195    
Method.invokeNative(Object, Object[], Class, Class[], Class, int, boolean) line: not available [native method]  
Method.invoke(Object, Object...) line: 511  
ZygoteInit$MethodAndArgsCaller.run() line: 795  
ZygoteInit.main(String[]) line: 562 
NativeStart.main(String[]) line: not available [native method] 
```

xml:

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#111111"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".NowPlaying" >

<RelativeLayout
    android:id="@+id/rlcontrols"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true" >

    <Button
        android:id="@+id/bplay"
        android:layout_width="70dp"
        android:layout_height="70dp"
        android:layout_below="@+id/tvalbum"
        android:layout_centerHorizontal="true"
        android:background="@drawable/play"
        android:contentDescription="@+string/play" />

    <Button
        android:id="@+id/bprevious"
        android:layout_width="60dp"
        android:layout_height="60dp"
        android:layout_below="@id/tvalbum"
        android:layout_marginRight="10dp"
        android:layout_toLeftOf="@id/bplay"
        android:background="@drawable/previous"
        android:contentDescription="@+string/play" />

    <Button
        android:id="@+id/bnext"
        android:layout_width="60dp"
        android:layout_height="60dp"
        android:layout_below="@id/tvalbum"
        android:layout_marginLeft="10dp"
        android:layout_toRightOf="@id/bplay"
        android:background="@drawable/next"
        android:contentDescription="@+string/play" />

    <Button
        android:id="@+id/brepeat"
        android:layout_width="40dp"
        android:layout_height="40dp"
        android:layout_alignBottom="@id/bnext"
        android:layout_marginLeft="10dp"
        android:layout_toRightOf="@id/bnext"
        android:background="@drawable/repeat"
        android:contentDescription="@+string/play" />

    <Button
        android:id="@+id/bshuffle"
        android:layout_width="40dp"
        android:layout_height="40dp"
        android:layout_alignBottom="@id/bprevious"
        android:layout_marginRight="10dp"
        android:layout_toLeftOf="@id/bprevious"
        android:background="@drawable/shuffle"
        android:contentDescription="@+string/play" />

    <SeekBar
        android:id="@+id/songProgressBar"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/bplay"
        android:layout_marginTop="10dp"
        android:progressDrawable="@drawable/progress"
        android:thumb="@drawable/seeker" />

    <TextView
        android:id="@+id/tvtime"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/songProgressBar"
        android:gravity="right"
        android:text="@string/time"
        android:textSize="20sp" />
</RelativeLayout>

<TextView
    android:id="@+id/tvalbum"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_above="@id/rlcontrols"
    android:gravity="center"
    android:text="@string/album"
    android:textSize="20sp" />

<TextView
    android:id="@+id/tvartist"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_above="@id/tvalbum"
    android:gravity="center"
    android:text="@string/artist"
    android:textSize="20sp" />

<TextView
    android:id="@+id/tvtitle"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_above="@id/tvartist"
    android:gravity="center"
    android:text="@string/title"
    android:textSize="25sp" />

<ImageView
    android:id="@+id/ivalbumart"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_above="@id/tvtitle"
    android:contentDescription="@+string/albumart"
    android:src="@drawable/albumart" />

</RelativeLayout> 
```

如果需要，清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.timmo.tampmusicplayer"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.timmo.tampmusicplayer.NowPlaying"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

我不断收到此错误。我试过重新安装 sdk 和 adt/eclipse，什么都没有。我根本不明白是什么导致了这个问题。这是使用 android 工具创建的，我什至看不到我的第一个设计...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T20:36:09.247

“找不到源”不是错误。它是 eclipse 的一部分，与您的代码无关。看起来您单击了调试的第一行并被带到了这里。所有“Source not found”都表明 Eclipse 找不到 ActivityThread.java 的源。如果您的应用程序没有启动，那么真正的错误将出现在 Logcat 中。

# jquery - 操纵来自 get 的响应在条件语句中不起作用

> ID：15578764
> 
> 赞同：0
> 
> 时间：2013-03-22T19:51:47.163
> 
> 标签：jquery, if-statement, get

我有以下代码，但问题是当我尝试使用从 php 检索到的值（getstate）设置条件语句时，即使它不匹配，它也会通过 if 语句。例如，如果响应为 1，getstate 为 1，但它会执行 getstate 为 2 时的代码。有什么问题？

```
 var getstate =""; 
    $.get('getstate.php', {
                    email: emailaddress,
                    country: 'DE',
                    lang: lang,
                    source: '1304_Spring_dly'
                }, function (data) {

            getstate = data;

    if ( getstate = "2" ){

        $('#mch-overlay').fadeIn(300);

                } else if ( getstate = "1" ){
                    $('#mch-overlay').fadeIn(300);
                    });

              } else {
                    $('p.error').hide();
                      }

            }); /*end .GET */ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:59:06.537

条件要求`==`or `===`，使用只是`=`设置值，通常修剪值以确保没有空格是一个好主意：

```
$.get('getstate.php', {
           email  : emailaddress,
           country: 'DE',
           lang   : lang,
           source : '1304_Spring_dly'
    }, function (data) {
           var getstate = $.trim( data );
           if ( getstate == "2" ){
               $('#mch-overlay').fadeIn(300);
           } else if ( getstate == "1" ){
               $('#mch-overlay').fadeIn(300);
           } else {
               $('p.error').hide();
           }
}); 
```

还要注意你在条件句中做同样的事情，所以它可能被缩短为 if / else。

# asp.net-mvc - 为什么 ActionLink URLEncode 不编码？

> ID：15578765
> 
> 赞同：1
> 
> 时间：2013-03-22T19:51:50.513
> 
> 标签：asp.net-mvc, url, urlencode, actionlink

我希望我的 MVC 网址是这样的：

```
http://www.site.com/project/id/projectname 
```

例子：

```
http://www.site.com/project/5/new-website 
```

我的控制器是：

```
public ActionResult Details(int id, string projectname) 
```

我的任何操作链接是：

```
@Html.ActionLink("click here", "Details", "Project", new { id = project.ProjectID, projectname = project.ProjectName }) 
```

我的路线是：

```
routes.MapRoute(
    "Project",
    "project/{id}/{projectname}",
    new { controller = "Project", action = "Details", id = "", projectname = "" }
    ); 
```

当然，系统在那里有足够的信息，知道项目名称将是 URL 的一部分，所以它应该对链接进行 UrlEncode 并因此用连字符替换空格？但它没有，所以空格变成 %20

我不确定我在哪里定制这个？我是否覆盖 Html.ActionLink？在每次编辑时在数据库中存储一个“URL-ready”版本的名称——这似乎是一种浪费，当它应该在运行中自动完成时。而且我不想每次使用 Html.ActionLink 时都必须调用“FriendlyURL”函数——同样，它应该被自动处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T06:06:53.253

将空格字符更改`%20` ***为****URL 编码的结果*。当您对空格字符进行 URL 编码时，它不会转换为连字符。如果是这样，那么您认为连字符在 URL 编码时会转换为什么？

正如@RK911 指出的那样，您想要做的是创建一个[slug](https://www.google.com/search?q=url%20slug)。

有几种方法可以做到这一点：

1.) 限制您的`projectname`数据以禁止使用空格，并且只允许使用连字符（在数据输入期间可能使用对其进行验证）。

2.) 将 slug 单独存储在您的数据库中，例如`projectslug`.

3.）创建一个扩展方法，它将为您“即时”执行此操作。

[这是使用@RK911 引用的链接](https://stackoverflow.com/a/2921135/304832)的#3 示例：

```
public static class SlugExtensions
{
    public static string AsSlug(this string phrase) 
    { 
        string str = phrase.RemoveAccent().ToLower(); 
        // invalid chars           
        str = Regex.Replace(str, @"[^a-z0-9\s-]", ""); 
        // convert multiple spaces into one space   
        str = Regex.Replace(str, @"\s+", " ").Trim(); 
        // cut and trim 
        str = str.Substring(0, str.Length <= 45 ? str.Length : 45).Trim();   
        str = Regex.Replace(str, @"\s", "-"); // hyphens   
        return str; 
    } 

    private static string RemoveAccent(this string txt) 
    { 
        byte[] bytes = System.Text.Encoding.GetEncoding("Cyrillic").GetBytes(txt); 
        return System.Text.Encoding.ASCII.GetString(bytes); 
    }
}

@Html.ActionLink("click here", "Details", "Project",
    new { id = project.ProjectID,
    projectname = project.ProjectName.AsSlug() }) 
```

# javascript - 防止 iframe 重定向父页面

> ID：15578767
> 
> 赞同：5
> 
> 时间：2013-03-22T19:51:50.653
> 
> 标签：javascript, jquery, asp.net, html, redirect

情况是这样的：我在同一个域上，我的网站中有一个 iframe。目前，由于部署问题，我无法立即访问 iframe 代码。

当 iframe 加载时，其中的代码会检测到触发父页面重定向的内容。暂时，我想删除它。我知道我可以使用 onbeforeload，但是每次用户单击任何链接时都会显示警告。

有没有办法可以检测到重定向？它发生在主父页面完全加载之前。

我用谷歌搜索了很多，但仍然没有有效的解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-06T06:32:13.010

阅读[w3.org 规范](http://www.w3.org/TR/html5/browsers.html#valid-browsing-context-name-or-keyword)后。我找到了另一个解决方案。

您可以设置`sandbox=""`，以防止 iframe frome 重定向。话虽如此，它也不会重定向 iframe。您将基本上失去点击。

此处的示例：http: [//jsfiddle.net/ppkzS/1/](http://jsfiddle.net/ppkzS/1/)
没有沙箱的示例：http: [//jsfiddle.net/ppkzS/](http://jsfiddle.net/ppkzS/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-10T02:39:27.953

尝试这个：

```
<iframe align="left" src="http://stackoverflow.com/" sandbox=""></iframe>' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T20:36:14.620

使用*onbeforeunload*事件要求用户离开或留下这个页面。

```
<script>
    window.onbeforeunload = function(){
        return false; // This will stop the redirecting.
    }
</script> 
```

**我的答案基于 Stackoverflow 中的答案！！！**

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-03-22T21:05:34.427

这有点丑陋，但这里有一些可能有用的东西（我承认我对 iframe 的工作原理不太了解）。通过 javascript 获取要放入 iframe 的页面。使用 javascript 解析它，直到你得到重定向代码，然后去掉那个重定向代码。然后将结果放入 iframe 中。充其量是丑陋的，但似乎它可能会起作用。

# msbuild - MSbuild 减少冗余元数据字符串

> ID：15578769
> 
> 赞同：0
> 
> 时间：2013-03-22T19:52:00.617
> 
> 标签：msbuild

我编写了一个如下所示的 msbuild props 文件：

```
<Target Name="BeforeBuild"
        Inputs="@(XDTConfig -> '%(Filename).template%(Extension)');
                @(XDTConfig -> '%(Filename).$(Configuration)%(Extension)')"
        Outputs="@(XDTConfig)">
<PropertyGroup>
  <XDTSource>@(XDTConfig -> '%(Filename).template%(Extension)')</XDTSource>
  <XDTDest>@(XDTConfig -> '%(Filename)%(Extension)')</XDTDest>
  <XDTTrans>@(XDTConfig -> '%(Filename).$(Configuration)%(Extension)')</XDTTrans>
  <XDTDir>@(XDTConfig -> '%(RootDir)%(Directory)')</XDTDir>
</PropertyGroup>

<Message Importance="High"
         Text="Transforming from $(XDTSource) using $(XDTTrans) to $(XDTDest)..." />

<TransformXml Source="$(XDTDir)$(XDTSource)"
              Destination="@(XDTConfig)"
              Transform="$(XDTDir)$(XDTTrans)" />
</Target> 
```

我希望能够将该属性组放在目标范围之外以减少冗余，但如果我这样做，似乎没有一个属性可以正确扩展。为什么这些属性不能在项目范围而不是目标范围内扩展？

* * *

## 基于Lanorkin的解决方案

```
 <!-- File name and path properties -->
  <Target Name="InitMetadata">
    <ItemGroup>
      <XDTConfig Condition="'%(XDTConfig.Identity)' == '%(Identity)'">
        <Source>%(Filename).template%(Extension)</Source>
        <Dest>%(Filename)%(Extension)</Dest>
        <Trans>%(Filename).$(Configuration)%(Extension)</Trans>
        <Dir>%(RootDir)%(Directory)</Dir>
      </XDTConfig>
    </ItemGroup>
  </Target>

  <!-- Target to transform the config file if necessary -->
  <Target Name="BeforeBuild"
          DependsOnTargets="InitMetadata"
          Outputs="@(XDTConfig)"
          Inputs="'%(Source)';'%(Trans)'">

    <!-- Show what's going on -->
    <Message Importance="High"
             Text="Transforming from @(XDTConfig -> '%(Source) using %(Trans) to %(Dest)')..." />

    <!-- Do the actual transform (silent) -->
    <TransformXml Destination="@(XDTConfig)"
                  Source="%(Dir)%(Source)"
                  Transform="%(Dir)%(Trans)" />
  </Target> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:07:22.073

我不确定您要做什么..

但看起来你需要了解`Property`,`Item`和`Item Metadata`

*   `Property`由引用`$`并包含单个值
*   `Item`被引用`@`并且可以被称为**Array**，它可以包含多个值
*   `Item metadata`被引用`%`并且可以被认为是某种**字典**，每个字典都附带`Item`

因此，如果您尝试在 Project 范围内声明 PropertyGroup，您可能不会在其中包含数组 - 但看起来这就是您想要做的。

您可以尝试将项目元数据关联到您现有的项目，并且仅在任何目标中使用此元数据。

这是 msbuild 4 的工作示例（以前的版本有自己的魔力）：

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003" DefaultTargets="Build">
  <!-- Dummy initializations -->
  <ItemGroup>
    <XDTConfig Include="item1.ext1" />
    <XDTConfig Include="item1.ext2" />
    <XDTConfig Include="item2.ext2" />
    <XDTConfig Include="item2.ext3" />
    <XDTConfig Include="item3.ext3" />
  </ItemGroup>
  <PropertyGroup>
    <Configuration>Debug</Configuration>
  </PropertyGroup>

  <Target Name="InitMetadata">
    <!-- Assigning custom metadata to already existing items -->
    <ItemGroup>
      <XDTConfig Condition="'%(XDTConfig.Identity)' == '%(Identity)'">
        <XDTSource>%(Filename).template%(Extension)</XDTSource>
        <XDTDest>%(Filename)%(Extension)</XDTDest>
        <XDTTrans>%(Filename).$(Configuration)%(Extension)</XDTTrans>
        <XDTDir>%(RootDir)%(Directory)</XDTDir>
      </XDTConfig>
    </ItemGroup>
  </Target>

  <Target Name="Build" DependsOnTargets="InitMetadata">
    <!-- Here we use item metadata for batching Message target -->
    <Message Importance="High" Text="Transform: Source = %(XDTConfig.XDTDir)%(XDTConfig.XDTSource), Destination = @(XDTConfig), Transform = %(XDTConfig.XDTDir)%(XDTConfig.XDTTrans)" />
  </Target>
</Project> 
```

这是消息任务输出（`D:\temp\msbuild\`正在工作的目录）：

```
Transform: Source = D:\temp\msbuild\item1.template.ext1, Destination = item1.ext1, Transform = D:\temp\msbuild\item1.Debug.ext1
Transform: Source = D:\temp\msbuild\item1.template.ext2, Destination = item1.ext2, Transform = D:\temp\msbuild\item1.Debug.ext2
Transform: Source = D:\temp\msbuild\item2.template.ext2, Destination = item2.ext2, Transform = D:\temp\msbuild\item2.Debug.ext2
Transform: Source = D:\temp\msbuild\item2.template.ext3, Destination = item2.ext3, Transform = D:\temp\msbuild\item2.Debug.ext3
Transform: Source = D:\temp\msbuild\item3.template.ext3, Destination = item3.ext3, Transform = D:\temp\msbuild\item3.Debug.ext3 
```

# excel - Excel, Compile VBAProject - 改变模块的编译顺序

> ID：15578776
> 
> 赞同：4
> 
> 时间：2013-03-22T19:52:19.093
> 
> 标签：excel, module, excel-2007, vba

假设我们在 Excel 2007 中的 Visual Basic 编辑器中。我们创建一个模块，名为`modGlass`：

```
Sub VolatileGlass()
    Dim Glass As shiny_surface

End Sub 
```

然后我们创建第二个模块，命名为`modMetal`：

```
Sub durableMetal()
    Dim metal As metal_compound

End Sub 
```

![在此处输入图像描述](../Images/4c6cc1b5d09ccb698fde8fc2fa15cd95.png)

两个模块中的 Subs 都包含错误：`"User-defined type not defined."`

当我使用*Debug: Compile VBAProject*菜单项编译项目时，`modGlass`模块总是首先编译。如果我：

*   双击`modMetal`模块并编译（它？）或
*   重命名`modMetal`为`amodMetal`（这样金属模块现在在项目的模块树层次结构中排在第一位）

尽管如此，`modGlass`模块还是先编译。

问题：如果我在 VBE 中有一个包含多个模块的项目，有没有办法指定模块将按什么顺序编译？

我真的不需要这个功能，但我只是好奇是否有一些快速的方法可以做到这一点。我正在使用 Excel 2007。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T20:12:20.560

模块不是根据它们的名称编译的，而是根据它们创建的顺序编译的。所以如果你在前面加上“a”真的没关系`modMetal`

要对其进行测试，请创建两个模块。确保两个模块都有错误。当你编译它时，你会注意到首先创建的模块将首先被编译。现在删除第一个模块并重新创建它。这次当你编译它时，第二个（不是新创建的）首先被编译:)

不，不幸的是，没有直接的方法（AFAIK）来指定该序列。然而，肮脏的做法是基于我上面的建议。将所有数据复制到记事本，然后删除所有模块，然后从头开始重新创建它们（按照您要编译它们的顺序）

高温高压

# vb.net - VB.NET 对象类事件不起作用

> ID：15578779
> 
> 赞同：0
> 
> 时间：2013-03-22T19:52:30.447
> 
> 标签：vb.net, events, object, handler

我正在尝试编写一些代码，这些代码将在我的一个对象中引发一个事件，然后在我的一个窗口窗体中处理该事件。它看起来很简单，但我无法让代码工作；程序创建人员对象，设置人员姓名，甚至引发事件但不处理表单代码中的事件。我已经将包含“event”和“raiseevent”的类代码复制到主程序中，但它仍然不起作用。我不确定问题是什么，但任何帮助将不胜感激。

代码是使用 VS Express 2012 IDE 软件在 VB.NET 中编写的。

```
Public Class clsPerson
  Private m_name As String
  Public Event personviewed()

  Public Property name() As String
    Get
      name = m_name
    End Get
    Set(value As String)
      m_name = value
    End Set
  End Property

  Public Sub personviewedmethod()
    RaiseEvent personviewed()
  End Sub
End Class 
```

和

```
Public Class Form1
  Public WithEvents clsperson1 As clsPerson

  Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
    Dim clsperson1 As New clsPerson
    clsperson1.name = "PersonsName"
    clsperson1.personviewedmethod()
  End Sub

  Private Sub personviewed() Handles clsperson1.personviewed
    MessageBox.Show("***Event raised**")
  End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T20:18:44.273

当您重新声明您的对象时，它是不一样的，而是完全初始化它，处理程序将按预期工作。

```
Public Class Form1
Public WithEvents clsperson1 As New clsPerson

 Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
   'Dim clsperson1 As New clsPerson -do not re-declare the object
   clsperson1.name = "PersonsName"
   clsperson1.personviewedmethod()
 End Sub

 Private Sub personviewed() Handles clsperson1.personviewed
   MessageBox.Show("***Event raised**")
 End Sub
End Class 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T20:36:06.950

您似乎想通过不同的按钮一遍又一遍地使用该对象。如前所述，您正在重新声明此人，从而消除其处理程序。将来，如果您希望能够动态使用此类及其事件，则必须使用`AddHandler`将事件处理程序附加到新实例。

所以你得到这个：

```
Public Class Form1

    Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
       Dim clsperson1 As New clsPerson() 
       clsperson1.name = "PersonsName"
       AddHanlder clsperson1.personviewed, AddressOf personviewed
       clsperson1.personviewedmethod()
    End Sub

   Private Sub personviewed()
      MessageBox.Show("***Event raised**")
   End Sub
End Class 
```

每次单击该按钮时都以这种方式声明它，会创建一个新人员，并且其事件的处理独立于所有其他人员对象。

声明一个对象`with events`有点永久性。如果要在应用程序的整个生命周期中使用它并且您希望能够使用智能感知，您会这样做。

# asp.net-mvc-4 - 如何解码 HTML

> ID：15578781
> 
> 赞同：0
> 
> 时间：2013-03-22T19:52:35.963
> 
> 标签：asp.net-mvc-4, kendo-ui

`enter code here`如何查看粗体、斜体等文字？

我认为这是： `@(Html.Kendo().EditorFor(model => model.Content))`

在我的控制器中：

```
 Content = HttpUtility.HtmlDecode(opininonmodel.Content), 
```

在结果应该显示的索引视图中，我有这个：

```
@foreach (var item in Model)
{
@Html.DisplayFor(modelItem => item.Content)
} 
```

我尝试了`Server.HtmlDecode`，但仍然看到 html 标签不是他们所做的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T20:53:30.780

您可以使用`Html.Raw`不会像助手一样对输出进行 HTML 编码的`Html.DisplayFor`助手：

```
@foreach (var item in Model)
{
    @Html.Raw(item.Content)
} 
```

# c++ - 提升共享内存

> ID：15578783
> 
> 赞同：0
> 
> 时间：2013-03-22T19:52:47.010
> 
> 标签：c++, memory, boost, shared

我试图在boost的windows_shared_memory的帮助下在应用程序之间获得一个共享的char数组。

```
void testApp::initSharedMem()
{
  using namespace boost::interprocess;

  //Create a native windows shared memory object.
  windows_shared_memory shm (create_only, "MySharedMemory", read_write, 256);

  //Map the whole shared memory in this process
  mapped_region region(shm, read_write);

  //Write all the memory to 1
  std::memset(region.get_address(), 'a', 256 * sizeof(char));
  beatLines = static_cast<char*>(region.get_address());

  beatLines[10] = 'b';
} 
```

最后一行`beatLines[10] = 'b';`工作得很好，但是当我尝试在 initSharedMem() 方法之外分配 beatLines 数组的一个变量（但在同一个类中）时，我得到一个访问冲突写入异常。

# c++ - 模板类的静态对象数组

> ID：15578786
> 
> 赞同：1
> 
> 时间：2013-03-22T19:52:52.247
> 
> 标签：c++, templates, metaprogramming

我有一个模板类`template<typename T> class TplObject`。我需要一种静态结构的数组，其中索引为`typename T`. 我可以做这样的事情：

```
array.add<Type1>(); // New Object of type TplObject<Type1> was added
TplObject<Type1> obj = array.get<Type1>(); 
```

有没有这样的结构，mb in boost？如果没有，你能建议如何制作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:26:32.547

所以这是一个做这样的事情的例子。我采用类型列表来实例化模板，用它们实例化模板，将实例存储在元组中，并提供基于类型的查找`get`方法。

```
#include <type_traits>
#include <utility>
#include <tuple>

// Metaprogramming boilerplate:
template<typename... Ts> struct type_list {};
template<typename T, typename list, typename=void> struct index_in;
template<typename T, typename T0, typename... Ts>
struct index_in<T, type_list<T0, Ts...>, typename std::enable_if<std::is_same<T,T0>::value>::type>
{
  enum { value = 0 };
};
template<typename T, typename T0, typename... Ts>
struct index_in<T, type_list<T0, Ts...>, typename std::enable_if<!std::is_same<T,T0>::value>::type>
{
  enum { value = index_in<T, type_list<Ts...>>::value+1 };
};

// The tuple of instantiations of Factory:
template<template<typename>class Factory, typename... Ts>
struct PolytypeFactory {
  std::tuple< Factory<Ts>... > data;
  template<typename T>
  Factory<T>& get() {
    return std::get< index_in< T, type_list<Ts...> >::value >( data  );
  }
  template<typename T>
  Factory<T> const& get() const {
    return std::get< index_in< T, type_list<Ts...> >::value >( data  );
  }
};

// a test factory, that creates an instance of T from the constant 100.5:
template<typename T> struct maker100_5 { T operator()() const { return T(100.5); } };

// test code, where I create 100.5 as an int, double and char, then print them:
#include <iostream>
int main() {
   PolytypeFactory<maker100_5, int, double, char> factory;
   std::cout << factory.get<int>()() << "," << factory.get<double>()() << "," << factory.get<char>()() << "\n";
} 
```

`PolytypeFactory`如果需要，您可以通过使用`boost::optional`、存储指向的指针`Factory<Ts>`并允许某人`new`通过类似的方法传入版本`get()`，或者变得非常花哨并进行就地构造，来推迟构建内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T20:01:36.270

您可能正在寻找[`std::type_index`](http://en.cppreference.com/w/cpp/types/type_index). 结合`std::shared_ptr`，以下内容可能会帮助您入门：

```
class typemap
{
    std::map<std::type_index, std::shared_ptr<void>> map_;

public:
    template<typename T>
    void set(std::shared_ptr<T> obj)
    {
        map_[std::type_index(typeid(T))] = obj;
    }

    template<typename T, typename... Args>
    void emplace(Args&&... args)
    {
        this->set(std::make_shared<T>(std::forward<Args>(args)...));
    }

    template<typename T>
    std::shared_ptr<T> get()
    {
        return std::static_pointer_cast<T>(map_[std::type_index(typeid(T))]);
    }
}; 
```

此示例可以保存每种类型的一个对象，使用它执行以下操作：

```
typemap m;

// set
m.set( std::make_shared< int >( 42 ) );
m.set( std::make_shared< MyClass >() );
m.set( std::make_shared< std::vector<double> >() );

// or use emplace
m.emplace<int>( 42 );
m.emplace< MyClass >();
m.emplace< std::vector<double> >();

// access
int douglas = *m.get< int >();
m.get< MyClass >()->adams();
m.get< std::vector<double> >()->push_back( 3.141592 ); 
```

# javascript - 如何忽略复选框的点击？

> ID：15578792
> 
> 赞同：4
> 
> 时间：2013-03-22T19:53:08.310
> 
> 标签：javascript, jquery, html, checkbox

我需要将一个功能附加到一个复选框，以便单击它什么都不做。这怎么可能？我不想让它变灰，我只想阻止它被切换。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T19:56:31.900

如果您希望它是可切换的，只需附加一个事件侦听器，如下所示：

```
$('#checkboxId').on('click', function(e) {
    e.preventDefault();
    e.stopPropagation();
}); 
```

注意：这与返回的效果相同`false`：

```
$('#checkboxId').on('click', function(e) {
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T19:56:46.790

尝试这样的事情：

```
<input type="checkbox" onClick="this.checked=!this.checked" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T19:59:36.317

```
$('input[type=checkbox]').click(function(){return false;}); 
```

只在点击事件上返回 false，工作示例：http: [//jsfiddle.net/Sh8Zu/](http://jsfiddle.net/Sh8Zu/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T20:01:14.020

尝试这个，

```
 <input type="checkbox" onChange="return checkChange(this)" id="checkid"/>
function checkChange(obj)
  {

 obj.checked=false;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-22T19:55:15.607

我不确定这是否正是您想要的，但这会禁用使用 JQuery 的复选框。

```
$('#checkboxId').attr('disabled', true); 
```

对于非灰色[解决方案](http://jsfiddle.net/nKwRj/)：

```
$("input:checkbox").click(function() { return false; }); 
```

# hibernate - 休眠加入多个表和组条件

> ID：15578794
> 
> 赞同：1
> 
> 时间：2013-03-22T19:53:14.957
> 
> 标签：hibernate, hql, criteria

我有四个表，如下所示。我想通过加入所有这 4 个表来查询并检索电子邮件、注册日期、上次访问日期、访问次数、没有提供反馈的次数和上传的文件数。

```
Class User{
     int userId;
     String email;
     Date registeredDate;
     UserVisits userVisits; //one-to-one relation
     Set<UserFeedback> feedbacks; //one-to-many
     Set<UserUploads> uploads // one-to-many
}

Class UserVisits{
     int userId;
     Date lastVisited;
     int noOfVisits;
}

Class UserFeedback{
     int feedbackId;
     int userId;
     String feedback;
     Date feedbackDate
}

Class UserUploads{
      int fileId;
      User user;
      int fileName;
 } 
```

任何人都可以帮助我如何实现这一目标。

提前致谢。

斯里

**编辑** 我的 sql 看起来像

```
select this_.email as email, this_.created_date as created_date,
userlogins1_.last_login as last_login, userlogins1_.login_count as login_count, 
fb_count, upload_count from user_details this_ 
left outer join user_logins userlogins1_ on this_.user_id=userlogins1_.user_id 
left outer join (select count(feedback_id) as fb_count, user_id 
from user_feedback group by user_id) as uf on this_.user_id=uf.user_id
left outer join (select count(uploadid) as upload_count, user_id 
from user_uploads group by user_id) as m on this_.user_id=m.user_id
order by this_.email asc 
```

我将如何使用这样的多个子查询？

**更新。有解决方案，但有一个小问题**

```
Criteria criteria = sessionFactory.getCurrentSession().createCriteria(User.class, "user");
criteria.createAlias("user.userLogins","userLogins",Criteria.LEFT_JOIN);

DetachedCriteria fbCriteria = DetachedCriteria.forClass(UserFeedback.class, "feedback");
fbCriteria.add(Restrictions.eqProperty("feedback.userId", "user.userId"));
fbCriteria.setProjection(Projections.alias(Projections.count("feedback.userId"), "fbcount"));
fbCriteria.addOrder(Order.asc("fbcount"));
criteria.add(Subqueries.exists(fbCriteria)); 

DetachedCriteria mapCriteria = DetachedCriteria.forClass(FileUploads.class, "uploads");
mapCriteria.add(Restrictions.eqProperty("uploads.user.userId", "user.userId"));
mapCriteria.setProjection(Projections.count("uploads.user.userId"));
criteria.add(Subqueries.exists(mapCriteria)); 

List<User> users = criteria.list(); 
```

这将返回我正在寻找的内容。我希望带有“ `fbcount`”“ `0`”的行在按 asc 排序时首先出现。但它正在发生。带有“ `fbcount`”值“ `0`”的行总是放在最后。

请任何人都可以建议我如何实现这一目标。

# jquery - JQuery Mobile Slider 被视为滑动事件

> ID：15578795
> 
> 赞同：3
> 
> 时间：2013-03-22T19:53:20.380
> 
> 标签：jquery, slider, swipe, jquery-mobile

我正在使用滑块的 JQuery Mobile 中构建一个评估工具。我将所有内容都放在一个文件中，其中包含多个 div 来分隔每一页。我有一个允许左右滑动的脚本。因为脚本没有区分用户滑动和使用滑块的时间，所以当他们调整滑块时它会翻转到下一页。

我希望用户能够滑动到下一页，但不是在他们调整滑块时。有什么建议么？？这是滑动事件：

```
<script type="text/javascript">
        $('div.ui-page').live("swipeleft", function(){
            var nextpage = $(this).next('div[data-role="page"]');
            if (nextpage.length > 0) {
            $.mobile.changePage(nextpage, {transition: "slide"}, false, true);
            }
        });

        $('div.ui-page').live("swiperight", function(){
            var prevpage = $(this).prev('div[data-role="page"]');
            if (prevpage.length > 0) {
            $.mobile.changePage(prevpage, {transition: "slide",
            reverse: true}, true, true);
            }
        });
</script> 
```

这是滑块和页面：

```
<div data-role="page">
        <h2>I can react quickly</h2>
        <input type="range" name="strength" id="strength" data-highlight="true" min="0" max="10" value="0">
</div> 
```

我真的很感激任何帮助或建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T08:08:04.760

在处理滑动手势时，您可以使用[最接近（）](http://api.jquery.com/closest/)来检查事件目标元素是否不在滑块小部件内：

```
$("div.ui-page").live("swipeleft", function(e) {
    if (!$(e.target).closest(".ui-slider, .ui-slider-track").length) {
        var nextpage = $(this).next('div[data-role="page"]');
        if (nextpage.length > 0) {
            $.mobile.changePage(nextpage, {transition: "slide"}, false, true);
        }
    }
}); 
```

请注意，[live(](http://api.jquery.com/live/) ) 自 jQuery 1.7 起已被弃用，取而代之的是[on()](http://api.jquery.com/on/)，并在 jQuery 1.9 中被删除，因此最好这样写：

```
$(document).on("swipeleft", "div.ui-page", function(e) {
    if (!$(e.target).closest(".ui-slider, .ui-slider-track").length) {
        // ...
    }
}); 
```

# java - launch4j 是否适用于所有平台？

> ID：15578803
> 
> 赞同：0
> 
> 时间：2013-03-22T19:53:41.280
> 
> 标签：java, launch4j

我有一个包含几个部分的应用程序：

*   发射器
*   主要数据（bin文件夹）

主要数据将以一些可执行的 jar 文件和一些其他文件的形式出现。但是，我想让启动器有一些“本机”组件。（自定义图标、版本信息等）我将使用 launch4j，所以我可以用 java 编写启动器以实现可移植性，但仍然给它一个原生的样子。但是，我不知道launch4j 是否可以为macintosh 或linux 平台包装可执行jar 文件。

那么，作为 Windows 用户，我可以使用 launch4j 将我的应用程序包装为其他平台的原生格式吗？

如果没有，是否有另一个 jar 文件包装器可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-15T21:03:47.317

对于 Mac OSX，您可以使用 Oracle 的 appbundler：[http ://docs.oracle.com/javase/7/docs/technotes/guides/jweb/packagingAppsForMac.html](http://docs.oracle.com/javase/7/docs/technotes/guides/jweb/packagingAppsForMac.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-22T20:02:22.640

答：不能。我将把我的应用程序包装在一个图标中。

# javascript - 提交表单 onload 不起作用

> ID：15578804
> 
> 赞同：0
> 
> 时间：2013-03-22T19:53:41.983
> 
> 标签：javascript, html, iframe, form-submit

我需要页面在页面加载和发布结果时自动提交预定义的单词。

```
<form id="search_form" action="http://mysite.com/search-results/" target="my-iframe" method="post"> 

<div class="field"><input type="text" value="Atlanta" class="dimmed" placeholder="City" name="City[all_words]" /></div>

  <input class="row_right" onclick="document.getElementById('search_form').submit()"> 
```

我试过这个并没有用

```
<body onload="submitform()"> 
```

这个也没有用：

```
<script>document.getElementById('SearchForm').submit();</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T19:48:56.703

看起来您正在通过错误的 id 调用表单元素。

```
document.getElementById('search_form').submit(); 
```

[工作示例](http://jsfiddle.net/fzTD5/)

# javascript - 文本的悬停颜色更改

> ID：15578809
> 
> 赞同：0
> 
> 时间：2013-03-22T19:53:55.443
> 
> 标签：javascript, jquery, html, css, javascript-events

当我将鼠标悬停在立方体上时，我看到弹出...
当我将鼠标悬停在立方体下方的文本上时，我看到颜色的变化... 当我
将鼠标悬停在立方体上时，我如何看到文本的颜色变化？

在下面提供我的代码...

[http://jsfiddle.net/Lx7kx/2/embedded/result/](http://jsfiddle.net/Lx7kx/2/embedded/result/)

```
$('document').ready(function() {
            window.setTimeout(function() {
                $('.cubeCellGuest').each(function() {
                    var htmlText = $(this).attr('data-text');
                    $(this).append('<div class="cubeTextStyleGuest">' + htmlText + '</div>');

                    $(this).hover(

                    function() {
                        $(".cubeTextStyleGuest").append("<span class='divStockGuest'>Guest</span>");

                    },

                    function() {
                        $(this).find("span:last").remove();
                    });
                });
            }, 600);

        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:05:37.403

jQuery：

```
$('.cubeCellGuest').each(function() {
    var htmlText = $(this).attr('data-text');
    $(this).append('<div class="cubeTextStyleGuest">' + htmlText + '</div>');
    $(this).hover(function() {
       $(".cubeTextStyleGuest").addClass("hovered").append("<span class='divStockGuest'>Guest</span>");
    }, function() {
          $(this).find("span:last").remove();
          $(".cubeTextStyleGuest").removeClass("hovered");
    });
}); 
```

CSS：

```
.hovered{
  color: red; //any color that you want
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T20:06:01.437

目前，文本的悬停是通过 css :hover 设置样式的，因此仅在悬停文本时才会调用它。解决你的问题

```
 ...

                        $(this).hover(

                        function() {
                            $(".cubeTextStyleGuest").css('color', '#cc6600').append("<span class='divStockGuest'>Guest</span>");

                        },
  ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T20:26:07.257

你可以在纯 CSS 中做到这一点

```
.cube:hover + .cubeTextStyleGuest
{
   color:#cc6600;
} 
```

或者它也许

```
.cube:hover ~ .cubeTextStyleGuest
    {
       color:#cc6600;
    } 
```

这是一个小提琴 [http://jsfiddle.net/Y2MAp/2/](http://jsfiddle.net/Y2MAp/2/)

希望这可以帮助

# android - 在 Android 上以静音模式播放声音的问题

> ID：15578812
> 
> 赞同：3
> 
> 时间：2013-03-22T19:54:16.373
> 
> 标签：android, audio, alarm, ringtone, silent

我正在编写一个android应用程序来简单地播放警报，无论手机处于什么模式，即使它处于静音模式。

我找到了这个[问题](https://stackoverflow.com/questions/4071149/override-silent-mode-and-or-media-volume)并使用答案中的代码来覆盖当前的音量状态。我的代码如下所示：

```
Uri alert = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_ALARM);
    if (alert == null){
        // alert is null, using backup
        alert = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
        if (alert == null){
            // alert backup is null, using 2nd backup
            alert = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_RINGTONE);
    }
}
ringtone = RingtoneManager.getRingtone(getApplicationContext(), alert);

AudioManager audioManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
int volume = audioManager.getStreamVolume(AudioManager.STREAM_ALARM);
if(volume == 0){
    volume = audioManager.getStreamMaxVolume(AudioManager.STREAM_ALARM);
}
audioManager.setStreamVolume(AudioManager.STREAM_ALARM, volume,AudioManager.FLAG_REMOVE_SOUND_AND_VIBRATE);

if(ringtone != null){
    ringtone.play();
} 
```

通过调试，我的问题似乎从这一行开始：

```
int volume = audioManager.getStreamVolume(AudioManager.STREAM_ALARM); 
```

因为我的手机在静音模式下似乎返回 4，在最大音量时返回 7。我不知道这是不是，它应该返回什么。我只是假设如果手机处于静音模式，它将返回 0。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T17:13:01.170

自己回答了这个问题，花更多时间深入阅读文档。

```
Uri alert = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_ALARM);
    if (alert == null){
        // alert is null, using backup
        alert = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
        if (alert == null){
            // alert backup is null, using 2nd backup
            alert = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_RINGTONE);
    }
}
ringtone = RingtoneManager.getRingtone(getApplicationContext(), alert); 
```

设置铃声后，我必须设置铃声的流类型：

```
 ringtone.setStreamType(AudioManager.STREAM_ALARM); 
```

# mysql - 根据函数的结果设置变量的值 - MySQL

> ID：15578815
> 
> 赞同：0
> 
> 时间：2013-03-22T19:54:32.947
> 
> 标签：mysql, variables, concat

我有这个查询 -: `SET @var = ''; SELECT * FROM dict WHERE checkWord(word) = 'yes'`;

当 checkWord() 函数的结果不是“是”时，即“否”时，我希望将发送给函数的 word 的值连接到`@var`.

例如 - ： `If checkWord(word) = 'no', then @var = CONCAT(@var,',',word);`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:59:59.927

[`GROUP_CONCAT`](http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html#function_group-concat)应该做的伎俩：

```
SELECT group_concat(word) into @var FROM dict WHERE checkWord(word) = 'yes'; 
```

# javascript - 按下右/下箭头按钮时的未知错误

> ID：15578824
> 
> 赞同：0
> 
> 时间：2013-03-22T19:55:04.347
> 
> 标签：javascript, html, canvas

首先大家**好**:-]
我的项目有问题 - HTML5 Canvas 中的游戏。我不会告诉你你必须做什么，但我的动作有未知问题。

索引.html{

```
<!DOCTYPE HTML>
<html>
    <head>
        <title>StickySquares</title>
        <script src="scripts/main.js"></script>
        <style>
            #gameArea{
                background-image: url('images/bkg.jpg');
            }
        </style>
    </head>
    <body onload="init();">
        <div id="fastimages" hidden="hidden">
            <img id="bodyIMG" src="images/body.png" />
            <img id="wallIMG" src="images/wall.png" />
        </div>
        <canvas id="gameArea" width="640" height="480">
            ERROR... Update your browser!
        </canvas>
        <div id="debug"></div>
    </body>
</html> 
```

}

主.js{

```
var myCanvas, keyPressed = true;
var sprBody, sprWall;
var map = [];
var figures = [];
var debugtxt;
function unpressKey(){
    keyPressed = false;
}
function debugText(){
    debugtxt = document.getElementById("debug");
    var text = "";
    for(var y=0;y<15;y+=1){
        for(var x=0;x<20;x+=1){
            text += map[y][x].toString();
        }
        text += "<br />";
    }
    debugtxt.innerHTML = text;
}
function playerUpdate(button){
    // 37 - left, 38 - up, 39 - right, 40 - down
    if(!keyPressed){
        for(var y=0;y<15;y+=1){
            for(var x=0;x<20;x+=1){
                if(map[y][x]==2){
                    switch(button.keyCode){
                        case 37: // Left
                            if(map[y][x-1]==0){
                                map[y][x]=0;
                                map[y][x-1]=2;
                            }
                        break;
                        case 38: // Up
                            if(map[y-1][x]==0){
                                map[y][x]=0;
                                map[y-1][x]=2;
                            }
                        break;
                        case 39: // Right
                            if(map[y][x+1]==0){
                                map[y][x]=0;
                                map[y][x+1]=2;
                            }
                        break;
                        case 40: // Down
                            if(map[y+1][x]==0){
                                map[y][x]=0;
                                map[y+1][x]=2;
                            }
                        break;
                    }
                }
            }
        }
    }
    debugText();
}
function draw(){
    myCanvas.clearRect(0, 0, 640, 480);

    for(var y=0;y<15;y+=1){
        for(var x=0;x<20;x+=1){
            if(map[y][x]==1){
                myCanvas.drawImage(sprWall, x*32, y*32);
            }else{
                if(map[y][x]==2 || map[y][x]==3){
                    myCanvas.drawImage(sprBody, x*32, y*32);
                }
            }
        }
    }
}
function init(){
    myCanvas = document.getElementById("gameArea").getContext("2d");
    sprBody = document.getElementById("bodyIMG");
    sprWall = document.getElementById("wallIMG");
    for(var firstIndex=0;firstIndex<15;firstIndex+=1){
        map[firstIndex] = [];
        figures[firstIndex] = [];
        for(var secondIndex=0;secondIndex<20;secondIndex+=1){
            map[firstIndex][secondIndex] = 0;
            figures[firstIndex][secondIndex] = [];
        }
    }
    for(var x=0;x<20;x+=1){
        map[0][x] = 1;
        map[14][x] = 1;
    }
    for(var y=0;y<15;y+=1){
        map[y][0] = 1;
        map[y][19] = 1;
    }
    map[2][2] = 3;
    map[7][9] = 2;

    window.addEventListener("keyup", playerUpdate, false);
    window.addEventListener("keydown", unpressKey, false);

    setInterval(draw, 1000 / 60);
} 
```

}

当我在测试我的游戏时，当我按下右和向下箭头键时，方块不会随 +1 移动，它会移动到右墙或下墙......
我正在查看我的代码，但是我不明白为什么广场会犯这个错误......
有人能告诉我我做错了什么吗？:)

**编辑**：我在地图上使用 2d 数组：
1 = 墙，2 = 可以移动的方块，0 = 可用空间（你可以移动的地方），3 - 你不能移动的方块，但你可以在什么时候激活它你在附近。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T21:12:01.400

这是由于您处理按键的方式。现在它只能接受一个，它会覆盖之前的键，这就是为什么你目前只能朝一个方向前进。这就是我喜欢这样做的方式。

```
var keys=[];

document.body.addEventListener("keydown", function (e) {
    keys[e.keyCode] = true;
});
document.body.addEventListener("keyup", function (e) {
    keys[e.keyCode] = false;
});

function updatePlayer(){
    if (keys[38]) {
       //up
    }

    if (keys[40]) {
       //down
    }

    if (keys[39]) {
       //right
    }

    if (keys[37]) {
       //left
    }
} 
```

**[演示这一点的现场示例](http://jsfiddle.net/dMYvG/)**

这样做是每次按下一个键时，您将数组中的一个元素设置为与键代码相同的索引号为真。当您停止按下该键时，其设置为 false。然后你可以检查你通常处理玩家移动的地方。这使您可以按下几乎无限数量的键。

# php - 在 HTML 表中显示 MySQL 记录。什么失败了？

> ID：15578828
> 
> 赞同：0
> 
> 时间：2013-03-22T19:55:30.637
> 
> 标签：php, html, mysql

我在 HTML 表中显示 MySQL 记录时遇到问题

这是代码：

> ```
>  <html>
> <head>
> </head>
> <body>
> <?php
>                         $con = mysql_connect("localhost", "root", "");
>                         if (!con) {
>                         die ("Can not connect: " . mysql_error());
>                         }
> 
>                         mysql_select_db ("regform", $con);
> 
>                         $sql = "SELECT * FROM contacts";
>                         $myData = mysql_query($sql, $con);
>                       echo 'test';    
>                         echo "<table border = '1'>
> 
>                         <tr>
>                         <th>Name</th>
>                         <th>Lastname</th>
>                         <th>Phone</th>
>                         <th>Email</th>
>                         <th>Comment</th>
>                         </tr>";
> 
>                         while($record = mysql_fetch_array($myData)) {
>                         echo "<tr>";
>                         echo "<td>" . $record['Name'] . "</td>";
>                         echo "<td>" . $record['Lastname'] . "</td>";
>                         echo "<td>" . $record['Phone'] . "</td>";
>                         echo "<td>" . $record['Email'] . "</td>";
>                         echo "<td>" . $record['Comment'] . "</td>";
>                         echo "</tr>";
> 
>                         }
> 
>                         echo "</table>";
> 
>                         mysql_close ($con);
> 
>                         ?>
> </body>
> </html> 
> ```

**我在浏览器上得到这个：**

> 姓名 姓氏 电话 电子邮件 评论 "; while($record = mysql_fetch_array($myData)) { echo ""; echo "" . $record['Name'] . ""; echo "" . $record['Lastname'] . ""; echo "" . $record['Phone'] . ""; echo "" . $record['Email'] . ""; echo "" . $record['Comment'] . ""; echo " "; } 回声 ""; mysql_close ($con); ?>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T19:58:48.107

您`php`的网络引擎没有呈现您的内容。它需要具有 *.php 扩展名并位于处理它的服务器上。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-22T20:01:44.460

我想这与多线有关

```
 echo "<table border = '1'>

                    <tr>
                    <th>Name</th>
                    <th>Lastname</th>
                    <th>Phone</th>
                    <th>Email</th>
                    <th>Comment</th>
                    </tr>"; 
```

也许你试试这个：

```
echo <<<END
<table border = '1'>

                    <tr>
                    <th>Name</th>
                    <th>Lastname</th>
                    <th>Phone</th>
                    <th>Email</th>
                    <th>Comment</th>
                    </tr> 
```

结尾;

# php - 在 PHP 加载时回显到页面

> ID：15578830
> 
> 赞同：0
> 
> 时间：2013-03-22T19:55:35.683
> 
> 标签：php, echo

我正在用 php 组合一个搜索引擎，它会遍历一些目录并在运行时回显过滤后的结果。

我的问题是，在所有搜索完成之前不会执行回显，导致页面在脚本完成之前保持空白。

这是正常的吗？如果是这样，我怎样才能在调用 echo 时显示搜索结果？

我还将最终将结果中的图像写入屏幕。可以调用 JS document.write 函数而不是呼应所有内容，而是通过同时利用客户端和服务器端来加快速度吗？

**编辑：**这是迭代的代码。我有一个标记系统，但该部分目前已被注释掉......

```
function checkTags($dir, $search){
  global $tag;
  $filesInDir = array_map('strtolower', scandir($dir)); // lower case the files
  $filterOut = array('.','..');
  $filesInDir = array_diff($filesInDir, $filterOut); // get rid of the current '.' and parent '..' values
             //   print_r($filesInDir);

  foreach($filesInDir as $file) {
    if($file == $tag) {  // found a tag
      echo 'found tag: '.$file.'<br>';
   /*   $tagDir = dirname($tag);
      $tagContents = strtolower(file_get_contents($file).'<br>'.$tagDir); // adding full path to include parent dirs in tag searching

      foreach($search as $s){
        if(strpos($tagContents, $s) !== false){ // the tag has a search word
          //getFiles($tagDir);
        }
      }  */
    }
    elseif(is_dir($dir.'/'.$file) !== false) { //is a folder, so try in there
      //print_r($file);
      echo 'found dir: '.htmlspecialchars($file).'<br>';
      checkTags($dir.'\\'.$file, $search);
    }
  }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T19:57:00.347

您想将输出刷新到客户端，请使用 PHP 的[flush()](http://php.net/manual/en/function.flush.php)函数。

也就是说，如果您在页面加载时进行复杂的处理，那将是一种糟糕的用户体验。*它更复杂，但是如果你向用户提供一些东西*，即使它只是一个空但完整的模板，然后用 AJAX 异步拉入昂贵的数据，你会提供一个更好的产品，正如快乐事故所建议的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T21:05:15.127

我想从@dimo414 的参考中引用一些东西

> 一些服务器，特别是在 Win32 上，仍然会缓冲脚本的输出，直到它在将结果传输到浏览器之前终止。
> 
> Apache 的服务器模块（如 mod_gzip）可能会自己进行缓冲，这将导致 flush() 不会导致数据立即发送到客户端。
> 
> 甚至浏览器也可以在显示之前缓冲它的输入。例如，Netscape 会缓冲文本，直到它接收到行尾或标记的开头，并且在看到最外层表格的标记之前不会呈现表格。
> 
> 某些版本的 Microsoft Internet Explorer 仅在收到 256 字节的输出后才开始显示页面，因此您可能需要在刷新之前发送额外的空格以使这些浏览器显示页面。

这基本上意味着无法保证 flush() 会实际向客户端发送中间数据，或者客户端会显示它们。

如果要测试 flush() 是否有效，请禁用任何可能导致服务器缓冲的 apache 模块。即使这样，浏览器也可能会等到页面完成加载，或者已经加载了一定数量的字节，所以最可靠的测试方法是使用 netcat。

根据我的经验，客户端在脚本结束之前看到输出的唯一原因是因为我搞砸了，并且在某处放置了一个带有回显的无限循环。在这种情况下，浏览器将冻结，直到 apache 决定终止脚本。正如其他人所说， [AJAX](http://www.w3schools.com/ajax/default.asp)是实现这一目标的方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T20:01:17.627

绝对不是 document.write，但肯定会研究 JavaScript 和 Ajax 技术来实现您的目标。

查看[http://en.m.wikipedia.org/wiki/Ajax_(programming)](http://en.m.wikipedia.org/wiki/Ajax_(programming))了解 Ajax 的概述。

如果您是 JavaScript 的初学者，可能值得一看 jQuery 库。特别是 .ajax 方法。

[http://jquery.com/](http://jquery.com/)

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# sql - 为每个组动态创建新矩阵和表格并添加分页符

> ID：15578835
> 
> 赞同：1
> 
> 时间：2013-03-22T19:56:07.250
> 
> 标签：sql, sql-server, reporting-services, ssrs-2008

我有这个问题，在一个小组中定义了几个问题，其中一个问题有一个描述性的答案，其余的是数字。有3个这样的群体，未来可以发展壮大。我想生成一个报告，其中我在一页中显示组的结果，但应该为每个组动态生成。

输出将如下所示：

* * *

```
 |Group_Category|     |    {Matrix Style; }
 |Question      |Value|

 |Group_Category|                  |   {Table}
 |(+)Question   |Descriptive Answer| 
```

* * *

因此，必须针对不同页面上的每个组重复此操作。谁能帮帮我

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:50:29.907

让我们举一个简单的例子来描述这可能是如何完成的。

1.  让我们创建一个数据源，就本示例而言，这并不重要，因为示例中的所有数据都是自包含的。

2.  使用以下填充数据集：

    ```
    DECLARE @Table TABLE (personID int IDENTITY, person varchar(8), 
    orders int, level1 int, level2 int); 

    INSERT INTO @Table VALUES    ('Brett', 10, 1, 1), ('John', 20, 1, 1), 
    ('Peter', 15, 2, 1), ('Jessica', 25, 2, 1), ('Eddie', 7, 3, 1), 
    ('Jimi', 50, 3, 1), ('Robert', 5, 1, 2)

    SELECT *
    FROM @Table 
    ```

3.  从您的工具箱中创建一个“表格”对象，并仅在左下角的单元格中插入“人”值，它也应该填充一个标题。对其旁边的单元格上的“订单”值执行相同的操作。删除右侧的列。您现在应该有四个填充单元格，两个带有标题的值单元格。

4.  对于分组，让我们转到 Visual Studio 中“设计”视图的左下角，您应该会看到一个“行组”，其中当前只有“=详细信息”（或类似内容）。右键单击它并点击“添加父级”。选择“level1”上的组，然后单击“添加组标题”。您现在应该看到添加了另一行，但它是空白的，除了最左列的详细信息之外。在灰色块区域的左侧，您将看到一个 ( 将包含两行，表示它们是“分组”。

5.  您可以再次执行第 4 步，除非有两个更改。这次右键单击 level1 以添加父级。然后改为在“level2”上分组。

6.  如果要在第二级分组上分页，请选择“level2”（或该分组的通用等效名称）单击 F4。展开属性下的“PageBreak”。将“BreakLocation”更改为“开始”。您的报告现在将在您的最高级别分组之前分页。

您无需担心使用 SSRS 添加更多组。您只需要担心它们会在正确的列中得到区分以动态工作。如果我稍后在我的表中添加更多数据以显示级别 1 的 1、2 或 3 以外的分组，SSRS 会捕获它，我不必担心。

编辑如果您有不同类型的数据以及不同的数据集，请记住您可以使用 UNION 轻松解决此问题：

例如：

```
Select 'I am strings' as group1, 'Descriptive String' as Detail
from dataset1
UNION
Select 'I am numbers', cast(1 as varchar(64))
from dataset2 
```

当 SSRS 解释“group1”时，它只看到两个不同的值，因此可以对它们进行分组。它不关心将两种不同类型放在一起的底层 SQL。只要您将它们转换为引擎可以解释它，就没有关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:29:35.503

我可以通过使用 Rectangle 属性来解决上述问题。

基本上定义了

“ **Group_Category** ”在矩形旁边，然后在类别下方的矩形内放置一个**矩阵**和一个**表格。**这帮助我在页面上有一个父组，并在里面有其他组和计算。

I 字段和数据必须来自或填充来自同一数据集。

# javascript - 为什么 JavaScript 中的 parseFloat() 会产生一致但统一的结果？

> ID：15578841
> 
> 赞同：2
> 
> 时间：2013-03-22T19:56:59.687
> 
> 标签：javascript, floating-accuracy

在[回答](https://stackoverflow.com/a/15576809/16959)有关在 html 中添加增加浮点值的方法的问题时`input`，我遇到了我所知道的[IEEE 浮点数学的常见问题](http://www.petebecker.com/js/js200006.html)。这是我所看到的一个示例（带有[演示）：](http://jsfiddle.net/sperske/3dyTr/)

```
<input type="text" name="BoqTextBox" id="BoqTextBox" value="0.001" />
<input type="Button" id='AddButton' value="+" />
<script>
  $('#AddButton').on('click', function () {
    var input = $('#BoqTextBox');
    input.val(parseFloat(input.val(), 10) + 1);
  })
</script> 
```

单击`+`按钮，首先会导致输入像这样递增（使用此[转换器](http://www.h-schmidt.net/FloatConverter/IEEE754.html)进行 IEEE 二进制表示）：

```
 S|   Exp   |      Mantissa
0.001              //0 0111 0101 000 0011 0001 0010 0110 1111
1.001              //0 0111 1111 000 0000 0010 0000 1100 0101
2.001              //0 1000 0000 000 0000 0001 0000 0110 0010
3.001              //0 1000 0000 100 0000 0001 0000 0110 0010
4.0009999999999994 //0 1000 0001 000 0000 0000 1000 0011 0001
5.0009999999999994 //0 1000 0001 010 0000 0000 1000 0011 0001
6.0009999999999994 //0 1000 0001 100 0000 0000 1000 0011 0001
7.0009999999999994 //0 1000 0001 110 0000 0000 1000 0011 0001
8.001              //0 1000 0010 000 0000 0000 0100 0001 1001
9.001              //0 1000 0010 001 0000 0000 0100 0001 1001
10.001             //0 1000 0010 010 0000 0000 0100 0001 1001
... then predictably like this until ...
15.001             //0 1000 0010 111 0000 0000 0100 0001 1001
16.000999999999998 //0 1000 0011 000 0000 0000 0010 0000 1100
17.000999999999998 //0 1000 0011 000 1000 0000 0010 0000 1100
18.000999999999998 //0 1000 0011 001 0000 0000 0010 0000 1100
19.000999999999998 //0 1000 0011 001 1000 0000 0010 0000 1100
... then predictably like this until ...
31.000999999999998 //0 1000 0011 111 1000 0000 0010 00001100
32.001             //0 1000 0100 000 0000 0000 0001 00000110
33.001             //0 1000 0100 000 0100 0000 0001 00000110
... then predictably like that up to 256 (a power of 8 seemed fitting to test) ... 
```

我还不知道的是，为什么这种行为会以这些特定的值表现出来，我可以采取哪些合乎逻辑的步骤来减轻其影响？出于显示目的进行舍入，同时将实际计算值存储在其他地方？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T20:02:11.807

正如您所猜测的，您应该仅在四舍五入后打印输出。该行为是十进制和二进制基数之间差异的结果，因为有十进制数在浮点数的二进制格式中没有精确表示，因此在将其存储为二进制然后再次读取时会丢失一些准确性. 浮点数在 CPU 中以**1.XXXX...XXXX * 2^P**的形式表示，因此从这种形式您可以看到，并非所有十进制数都具有长度有限的这种表示形式`XXXXXX...XXX`。

# svn - svn 命令行（Windows，来自 TortoiseSVN）：“svn status”没有输出？

> ID：15578843
> 
> 赞同：2
> 
> 时间：2013-03-22T19:57:04.637
> 
> 标签：svn, tortoisesvn

开始使用 TortoiseSVN，一个问题困扰着我：我没有看到 ovelray 用于非版本化文件。我已经读到这可能会发生（仍然很糟糕），所以我进入了下一个级别：使用命令行。

`svn info`工作正常，但`svn status`（来自同一个目录）根本没有输出。

怎么了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-22T20:07:20.763

默认情况下`svn status`，如果没有对工作副本进行任何修改，则不会从命令行返回任何内容。

如果您想查看文件的状态（包括非版本），您可以在命令行中添加详细标志：`svn status -v`.

这将列出存储库以及每个文件的状态、修订号和最后提交更改的人。非版本化文件将标有“？”。

# jquery - jQuery DataTables - 我无法获得我想要的效果

> ID：15578845
> 
> 赞同：0
> 
> 时间：2013-03-22T19:57:15.373
> 
> 标签：jquery, asp.net-mvc, jquery-ui, jquery-plugins, themeroller

我不确定您需要多少信息来帮助我，所以如果我需要提供更多信息，请告诉我。

我正在使用带有 Themeroller 的 jQuery DataTables。我正在尝试完成这个外观：

![在此处输入图像描述](../Images/f953ca5a8d46c0f31f11917fc3ac6e23.png)

但是，无论我尝试什么，这都是我得到的：

![在此处输入图像描述](../Images/4f28a143b38e7dd4f0d24057b1622b82.png)

我用红色突出显示了我遇到问题的区域。基本上它是页眉和页脚。我知道图像有点难看，但好像页眉和页脚块只是部分被绘制。根据 Chrome，该区域为 1600 像素 x 12 像素。看起来它至少应该是 50px 或更多。

我包括以下 .css 文件：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title> - The Exchange Site</title>
        <link href="/favicon.ico" rel="shortcut icon" type="image/x-icon" />
        <meta name="viewport" content="width=device-width" />
        <link href="/Content/jquery.ui.theme.css" rel="stylesheet"/>
        <link href="/Content/site.css" rel="stylesheet"/>
        <link href="/Content/jquery.dataTables.css" rel="stylesheet"/>
        <link href="/Content/jquery.dataTables_themeroller.css" rel="stylesheet"/>
        <link href="/Content/PagedList.css" rel="stylesheet"/> 
```

我的 HTML 底部的 JavaScript 如下：

```
<script>
    $(document).ready(function () {
        oTable = $('#buyerNotification').dataTable({
            "bJQueryUI": true,
            "sPaginationType": "full_numbers",
            "bProcessing": true,
            "iDisplayLength": 25,
            "aaSorting": [[0, 'desc']]
        });
    }); 
```

当我在 Chrome 中检查页面时，没有生成任何错误。如果包含更多内容会有所帮助，我可以这样做，就像我的 HTML 一样，但它有很多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:01:54.400

见[这里](http://datatables.net/release-datatables/examples/basic_init/themes.html)。您是否指定了`"bJQueryUI": true`选项？

# php - 由于地址无效，PayPal DoDirectPayment (SOAP API) 交易失败

> ID：15578855
> 
> 赞同：0
> 
> 时间：2013-03-22T19:57:41.070
> 
> 标签：php, paypal, paypal-sandbox

我正在尝试将 PayPal 模块集成到我们基于 osCommerce 的站点中 - 一个使用 PayPal DoDirectPayment (SOAP) API 通过 PayPal 执行信用卡授权/付款的插件。到目前为止，我有：

*   安装模块并让它工作
*   在启用 PaymentsPro 的 PayPal 沙盒中设置商家帐户
*   使用信用卡在 Sandbox 中创建买家帐户
*   已验证我们网站上的帐单地址与存储在 PayPal Sandbox 中的买家帐户的信用卡地址相匹配

我能够一直进行结帐流程；但是，每次交易失败时都会出现以下错误消息。

> 无效数据 (10540)
> 由于地址无效，无法处理交易。

我已经使用步进调试（通过 XDEBUG）来验证结帐表单中指定的地址信息是否已传递到 cUrl 请求中。在发送前不久出现的 SOAP 请求下方查找：

*注意潜在的敏感信息已被更改；但是，我直接将 PayPal Sandbox 中的地址与我们网站上的地址进行了比较——它们是相同的，并且符合[此处](https://cms.paypal.com/cms_content/IT/it_IT/files/developer/PP_API_Reference.pdf)找到的 API 文档中列出的字段规范。第 42 页及以上*

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <soap:Header>
    <RequesterCredentials xmlns="urn:ebay:api:PayPalAPI">
      <Credentials xmlns="urn:ebay:apis:eBLBaseComponents">
        <Username>login_api1.company.com</Username>
        <Password>xxxxxxxxxxxxxxxx</Password>
        <Subject></Subject>
      </Credentials>
    </RequesterCredentials>
  </soap:Header>
  <soap:Body>
    <DoDirectPaymentReq xmlns="urn:ebay:api:PayPalAPI">
      <DoDirectPaymentRequest>
        <Version xmlns="urn:ebay:apis:eBLBaseComponents">2.0</Version>
        <DoDirectPaymentRequestDetails xmlns="urn:ebay:apis:eBLBaseComponents">
          <PaymentAction>Sale</PaymentAction>
          <PaymentDetails>
            <OrderTotal currencyID="USD">13.96</OrderTotal>
            <OrderDescription>Order placed on March 21, 2013, 2:01 pm by   (ID: xx339)</OrderDescription>
            <ItemTotal currencyID="USD">8.45</ItemTotal>
            <ShippingTotal currencyID="USD">4.51</ShippingTotal>
            <HandlingTotal currencyID="USD"></HandlingTotal>
            <TaxTotal currencyID="USD">1</TaxTotal>
            <Custom>Phone: xxx-xxx-xxxx -- Email: xxxxxxxxxx@gmail.com</Custom>
            <InvoiceID></InvoiceID>
            <NotifyURL></NotifyURL>
            <ButtonSource></ButtonSource>
            <ShipToAddress>
              <Name></Name>
              <Street1>1313 Park Forest</Street1>
              <Street2></Street2>
              <CityName>Batavia</CityName> 
              <StateOrProvince>OH</StateOrProvince>
              <PostalCode>45103</PostalCode>
              <Country>US</Country>
            </ShipToAddress>
            <PaymentDetailsItem>
                <Name>Custom Poker Deck</Name>
                <Amount currencyID="USD">5.67</Amount>
                <Number>-</Number>
                <Quantity>1</Quantity>
            </PaymentDetailsItem>
            <PaymentDetailsItem>
                <Name>BRAWL Deck</Name>
                <Amount currencyID="USD">3.78</Amount>
                <Number>-</Number>
                <Quantity>1</Quantity>
            </PaymentDetailsItem>
            <PaymentDetailsItem>
                <Name>Order Total Discrepancy</Name>
                <Amount currencyID="USD">-1.00</Amount>
                <Number>-</Number>
                <Quantity>1</Quantity>
            </PaymentDetailsItem>
          </PaymentDetails>
          <CreditCard>
            <CardOwner>
              <Payer>xxxxxxxxxx@gmail.com</Payer>
              <PayerName>
              <FirstName>John</FirstName>
              <LastName>Doe</LastName>
              </PayerName>
              <Address>
                <Street1>1313 Park Forest</Street1>
                <Street2></Street2>
                <CityName>Batavia</CityName> 
                <StateOrProvince>OH</StateOrProvince>
                <PostalCode>45103</PostalCode>
                <Country>US</Country>
              </Address>
            </CardOwner>
            <CreditCardType>Visa</CreditCardType>
            <CreditCardNumber>4711505238313977</CreditCardNumber>            
            <ExpMonth>03</ExpMonth>
            <ExpYear>2018</ExpYear>
            <CVV2>000</CVV2>            
          </CreditCard>
          <IPAddress>127.0.0.1</IPAddress>
          <MerchantSessionId>iou1mhmkuo1lnmd8e0vvpfbmp5</MerchantSessionId>
        </DoDirectPaymentRequestDetails>
      </DoDirectPaymentRequest>
    </DoDirectPaymentReq>
  </soap:Body>
</soap:Envelope> 
```

从目标 SandBox API 端点收到的响应`(https://api.sandbox.paypal.com/2.0`是：

```
<?xml version="1.0" encoding="UTF-8"?>
    <SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:cc="urn:ebay:apis:CoreComponentTypes" xmlns:wsu="http://schemas.xmlsoap.org/ws/2002/07/utility" xmlns:saml="urn:oasis:names:tc:SAML:1.0:assertion" xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:wsse="http://schemas.xmlsoap.org/ws/2002/12/secext" xmlns:ed="urn:ebay:apis:EnhancedDataTypes" xmlns:ebl="urn:ebay:apis:eBLBaseComponents" xmlns:ns="urn:ebay:api:PayPalAPI">
        <SOAP-ENV:Header>
            <Security xmlns="http://schemas.xmlsoap.org/ws/2002/12/secext" xsi:type="wsse:SecurityType"></Security>
            <RequesterCredentials xmlns="urn:ebay:api:PayPalAPI" xsi:type="ebl:CustomSecurityHeaderType">
            <Credentials xmlns="urn:ebay:apis:eBLBaseComponents" xsi:type="ebl:UserIdPasswordType">
                <Username xsi:type="xs:string"></Username>
                <Password xsi:type="xs:string"></Password>
                <Signature xsi:type="xs:string"></Signature>
                <Subject xsi:type="xs:string"></Subject>
            </Credentials>
            </RequesterCredentials>
        </SOAP-ENV:Header>
        <SOAP-ENV:Body id="_0">
        <DoDirectPaymentResponse xmlns="urn:ebay:api:PayPalAPI">
            <Timestamp xmlns="urn:ebay:apis:eBLBaseComponents">2013-03-22T20:24:12Z</Timestamp>
            <Ack xmlns="urn:ebay:apis:eBLBaseComponents">Failure</Ack>
            <CorrelationID xmlns="urn:ebay:apis:eBLBaseComponents">94b4190427bbe</CorrelationID>
            <Errors xmlns="urn:ebay:apis:eBLBaseComponents" xsi:type="ebl:ErrorType">
                <ShortMessage xsi:type="xs:string">Invalid Data</ShortMessage>
                <LongMessage xsi:type="xs:string">The transaction cannot be processed due to an invalid address.</LongMessage>
                <ErrorCode xsi:type="xs:token">10540</ErrorCode>
                <SeverityCode xmlns="urn:ebay:apis:eBLBaseComponents">Error</SeverityCode>
            </Errors>
            <Version xmlns="urn:ebay:apis:eBLBaseComponents">2.0</Version>
            <Build xmlns="urn:ebay:apis:eBLBaseComponents">5479129</Build>
            <Amount xsi:type="cc:BasicAmountType" currencyID="USD">13.96</Amount>
        </DoDirectPaymentResponse>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

这个问题（[无法使用 PayPal 模块处理交易](https://stackoverflow.com/questions/10656603/cannot-process-transaction-using-paypal-module)）表明 SandBox 存在等待可以解决的问题……但是我的帐户是在 19 日创建的，但我仍然收到相同的基于地址的神秘拒绝。

我还搜索了（[沙盒上的 paypal 直接付款错误](https://stackoverflow.com/questions/8747007/paypal-direct-payment-error-on-sandbox)）和（[Paypal 网站付款 Pro DoDirect 付款集成问题。由于商家配置无效，无法处理此交易](https://stackoverflow.com/questions/1293097/paypal-website-payment-pro-dodirect-payment-integration-issue-this-transaction-c)）但没有发现任何用处。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:35:37.153

该请求出错，因为您没有在发往地址字段中传递名称。您需要在此处插入一个名称，然后该请求应该适合您。我进行了一些测试，一旦插入名称，测试就可以正常进行。我也在使用 98.0 版本，应该是最新版本。您当前将其设置为 2.0。

```
<ShipToAddress>
<Name></Name>
<Street1>1313 Park Forest</Street1>
<Street2></Street2>
<CityName>Batavia</CityName> 
<StateOrProvince>OH</StateOrProvince>
<PostalCode>45103</PostalCode>
<Country>US</Country>
</ShipToAddress> 
```

# c# - 多线程设置 ServicePointManager.ServerCertificateValidationCallback 是否安全？

> ID：15578863
> 
> 赞同：5
> 
> 时间：2013-03-22T19:57:53.267
> 
> 标签：c#

为了忽略 ssl 证书错误，我`ServicePointManager.ServerCertificateValidationCallback`在制作`HttpWebRequest`. 我只希望对内部请求执行此操作，因此我将属性重置为其`finally`块中的默认值。但是因为是web应用，多线程修改属性会不会有问题？

这是我使用该属性的方式

```
public static String GetResource()
{
    try
    {        
        ServicePointManager.ServerCertificateValidationCallback += delegate { return true; };        
    }
    catch()
    {
    }
    finally
    {
        ServicePointManager.ServerCertificateValidationCallback -= delegate { return false; };
    }    
} 
```

1.  这段代码是线程安全的吗？msdn 上的文档说 ServicePointManager 类型的任何静态成员都是线程安全的，但我只是想确认一下。 [http://msdn.microsoft.com/en-us/library/zkfa48de%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/zkfa48de%28v=vs.80%29.aspx)
2.  finally 块中的代码，这是将其重置为默认值的正确方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-10-08T02:52:23.390

如果您需要覆盖默认证书验证，请考虑以下一项或多项：

1.  设置`ServerCertificateValidationCallback`一次且仅一次——在应用程序启动期间或可能在静态构造函数中。这消除了线程争用的风险。
2.  由于您使安全性更加宽松，因此将行为限制为使用条件编译调试构建：

    ```
    #if DEBUG
        ServicePointManager.ServerCertificateValidationCallback += Callback;
    #endif 
    ```

3.  最后，请记住您的委托是一个丰富的功能。您不必简单地返回`true`。您可以询问请求并决定如何处理它。

    ```
    ServicePointManager.ServerCertificateValidationCallback += Callback;

    static bool Callback(object sender, X509Certificate certificate, X509Chain chain, SslPolicyErrors sslPolicyErrors)
    {
        if (IsInternalRequest(sender))
        {
            return true;
        }
        else
        {
            return IsExternalRequestValid(sender, certificate, chain, sslPolicyErrors);
        }
    } 
    ```

# java - Java删除一定大小的文件

> ID：15578864
> 
> 赞同：1
> 
> 时间：2013-03-22T19:57:53.003
> 
> 标签：java, file, delete-file

我有一个 Java 工具，可以生成 100,000 多个文件，我随后在流程的“步骤 2”中使用这些文件。由于“第 2 步”的性质，我不想要任何大于 1MB 的文件。这是我用来删除这些文件的代码：

```
File[] files = root.listFiles();
for (File file : files) {
    if (file.isFile()) {
        if (file.length > 1048576) { //size of MB
            //delete the file
            file.delete();
        }
    }
} 
```

当文件数量相对较少时，这可以正常工作。但是，当 n > 100,000 时，由于内存限制，调用 listFiles() 会使我的系统崩溃。我知道您可以根据文件类型过滤结果，但是有没有办法根据文件大小来过滤结果？或者，是否有另一种方法可以轻松地根据文件大小进行大批量删除，而不会使我的系统崩溃？

FWIW，我正在运行 RedHat 6。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T20:10:07.500

我认为您应该查看[DirectoryStream](http://docs.oracle.com/javase/7/docs/api/java/nio/file/DirectoryStream.html)。正如您所期望的，它允许您以流方式迭代目录内容，因此您不会从大目录中耗尽内存：

```
try (DirectoryStream<Path> stream = Files.newDirectoryStream(dirPath)) {
   for (Path entry : stream) {
       File file = entry.toFile();
       if (file.isFile()) {
          if (file.length > 1048576) { //size of MB
             //delete the file
             file.delete();
          }
       }
   }
} 
```

您可能想查看`Files#listFiles(FileFilter)`. 至少在我的版本（Java 1.7，Mac OS）上，它是通过调用`Files#list()`然后复制所有匹配来实现的，这意味着它*比*`Files#list()`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T20:01:43.797

您最好的选择是使用[`listFiles()`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#listFiles%28java.io.FileFilter%29)接收 a的版本[`FileFilter`](http://docs.oracle.com/javase/7/docs/api/java/io/FileFilter.html)，注意在[accept()](http://docs.oracle.com/javase/7/docs/api/java/io/FileFilter.html#accept%28java.io.File%29)方法中您可以在返回 之前询问每个文件的大小`File[]`，并且只包含具有预期大小的文件。这样做的好处是只返回需要删除的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T20:02:21.377

您可以尝试在 File.listFiles 中使用 FileFilter，它只会返回您需要删除的文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T20:09:02.640

使用 Apache Commons [FileUtils](http://commons.apache.org/proper/commons-io/apidocs/org/apache/commons/io/FileUtils.html)。您可能会发现有用的方法是`FileUtils#iterateFiles(File directory,IOFileFilter fileFilter,IOFileFilter dirFilter)`( [javadoc](http://commons.apache.org/proper/commons-io/apidocs/org/apache/commons/io/FileUtils.html#iterateFiles%28java.io.File,%20org.apache.commons.io.filefilter.IOFileFilter,%20org.apache.commons.io.filefilter.IOFileFilter%29) )。您可以使用`IOFileFilter`（[javadoc](http://commons.apache.org/proper/commons-io/apidocs/org/apache/commons/io/filefilter/IOFileFilter.html)），它允许您指定在迭代时要接受的文件的大小。

难道这是`listFiles()`在幕后呼唤？绝对地。但是你不知道，直到你尝试:)

# regex - 替换具有元字符的java中的字符串

> ID：15578867
> 
> 赞同：0
> 
> 时间：2013-03-22T19:58:10.553
> 
> 标签：regex, string, replace, metacharacters

我有两个字符串，想用一个字符串替换另一个字符串。问题是字符串有元字符。

例如

```
String string1 = "I am foo";
String string2 = "I am bar and I am foo. I am both.";
string2 = string2.replaceAll(string1, ""); does the replacement. 
```

假设我有以下字符串。

```
String string1 = "I + am - foo [].";
String string2 = "I + am bar and I + am - foo []. I am both.";

Then the answer should be : "I + am bar and I am both." 
```

我们如何执行替换？我知道 `java.util.regex.Pattern.quote("xyz")`转义字符，但在这种情况下，有很多元字符。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:03:31.943

好像你已经有了答案：

```
String string1 = "I + am - foo [].";
String string2 = "I + am bar and I + am - foo []. I am both.";
System.out.println(string2.replaceAll(Pattern.quote(string1), "")); 
```

输出：

```
I + am bar and  I am both. 
```

# javascript - 在AngularJS中，继承和扩展有什么区别？

> ID：15578875
> 
> 赞同：-2
> 
> 时间：2013-03-22T19:58:43.687
> 
> 标签：javascript, angularjs

谁能解释AngularJS中的继承和扩展有什么区别？

非常感谢！

里奥

编辑：看这里：github.com/angular/angular.js/blob/master/src/Angular.js 并搜索'inherit'来找到它（目前第246行）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T23:34:10.510

Angular 中没有继承功能。

扩展只是将属性从一个对象复制到另一个对象。这是一个常见的 JavaScript juju。JQuery 也有一个扩展功能。

```
var x = { foo: 'hello' };
var y = { bar: 'world' };    
angular.extend(x, y);    
console.log(x); //{ foo: 'hello', bar: 'world' } 
```

我可以假设您在 Angular 中谈论的唯一继承是子作用域如何继承父作用域的属性。你说得对，这里有区别，因为它不是通过像扩展这样的东西来完成的……它是通过原型继承来完成的。父作用域实际上是子作用域的原型。这意味着当您尝试访问不存在的子范围上的属性时，它将下降到它的原型并检查该属性，如果它在那里不存在，它将下降到那个原型并检查那里的财产。

这意味着当您更新父级的属性时，它会更新它的所有子级...但是，如果您为子级更新，它不会更新父级...因为它直接在子级上设置属性，而不是它的原型（这是父级）。

如果不清楚，已经有大量关于此的博客条目/ StackOverflow 问题：

*   [我的朋友 Mark Rajcok 先生是一位善于提出和回答自己问题的大师。](https://stackoverflow.com/questions/14049480/what-are-the-nuances-of-scope-prototypal-prototypical-inheritance-in-angularjs)
*   [还有我自己的博客文章，它与动态原型对象产生这种效果更相关。](http://www.benlesh.com/2013/02/javascript-dynamic-prototyping.html)
*   [我真的很想把自己和Doug Crockford放在一起](http://javascript.crockford.com/prototypal.html)

# .net - 无法将字符串转换为 Guid

> ID：15578876
> 
> 赞同：0
> 
> 时间：2013-03-22T19:58:46.370
> 
> 标签：.net, entity-framework

我想在下拉列表中进行选择并存储它。

从下拉设置值时如何解决此错误`dropmarket`？

> 无法将类型“字符串”隐式转换为“System.Guid”

```
cellsite.Market.MarketID = dropmarket.SelectedValue; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T20:01:13.293

改成

```
cellsite.Market.MarketID = Guid.Parse(dropmarket.SelectedValue); 
```

A`string`不能隐式转换为 a `Guid`。您使用该[`Guid.Parse`](http://msdn.microsoft.com/en-us/library/system.guid.parse.aspx)方法将字符串转换为`Guid`.

# javascript - javascript 类型不为空

> ID：15578878
> 
> 赞同：0
> 
> 时间：2013-03-22T19:58:48.603
> 
> 标签：javascript

在 javascript 中，我有一个名为长度的变量。当我尝试测试`if (length)`javascript 时说它是真的，即使值为零。我应该使用什么语法而不是`if (length)`测试那里是否有变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:59:56.223

这就是javascript的工作原理。要测试变量是否为空，您只需使用此语法`if (length != null) ...`

# c++ - 你如何在c ++中将两个字符串写入文件

> ID：15578880
> 
> 赞同：0
> 
> 时间：2013-03-22T19:58:57.313
> 
> 标签：c++

```
{
    string vertexcharacter = "{";
    string a = "}";

ofstream myfile;
myfile.open("newfile.txt");
myfile << vertexcharacter, a;
myfile.close();

system("pause");
return 0; 
```

}

第一个字符串已写入，但第二个字符串未显示在文本文档中

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T19:59:30.153

您似乎正在寻找：

```
myfile << vertexcharacter << a; 
```

目前，您正在使用逗号运算符，因此您的行相当于：

```
(myfile << vertexcharacter), a; 
```

这插入`vertexcharacter`，`myfile`丢弃结果，然后评估`a`哪个什么都不做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T19:59:33.423

像这样：

```
myfile << vertexcharacter << a; 
```

你目前拥有的

```
myfile << vertexcharacter, a; 
```

涉及[逗号运算符](http://en.wikipedia.org/wiki/Comma_operator)，它计算第一个参数 ( `myfile << vertexcharacter`)，丢弃结果，然后计算第二个参数 ( `a`)。原因是逗号运算符的优先级最低。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T20:20:23.533

**简短的回答：** `myfile << vertexcharacter << a;`

逗号的作用与您期望的完全不同。把逗号想象成分号。如果有多条语句用逗号串在一起，则每条语句都会按顺序执行。但最后一条语句是其值被“返回”的语句。例如：

```
int x = 3;
cout << (x+=2, x+5); 
```

在这种情况下，`x+=2`执行 x=5，然后`x+5`“返回”，因此将值 10 插入 cout。另一方面，您的示例等效于

```
(myfile << vertexcharacter), a; 
```

基本上，`vertexcharacter`插入到`myfile`中，然后，如果你以某种方式捕获结果，`x = (myfile << vertexcharacter, a);`那么你会得到 x=a。你真正想要的是`myfile << vertexcharacter << a;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T20:22:24.327

一定是

```
myfile << vertexcharacter << a; 
```

# c# - 在进行 Wix 小升级后，RegistryValue 被清除

> ID：15578883
> 
> 赞同：4
> 
> 时间：2013-03-22T19:59:08.397
> 
> 标签：c#, installation, wix

我目前正在维护一个具有大量用户定义的注册表项的软件。我正在尝试制作一个 WIX 安装程序，以使这些注册表项保持最少的可维护性。我决定将注册表项中的每个值都设为它自己的组件，以允许我使用 WIX 的 NeverOverwrite='yes' 功能。我假设它的存在将允许进行较小的升级（例如 REINSTALL=ALL REINSTALLMODE=vomus）来创建值（如果存在），否则不要理会它。但是，在我的真实示例中，这似乎并没有发生（功能上没有条件）。文档告诉我我应该很好。以下是一些示例：

```
<Product Id="UNIQUE_KEY" Name="Spotbox Manager" Language="1033" Version="1.0.1.0"    Manufacturer="Company"  UpgradeCode="MY_UPGRADE_KEY">
<Package  Platform="x64" Id="*" InstallerVersion="200" Compressed="yes"    InstallScope="perMachine" InstallPrivileges="elevated" />
<Upgrade Id="MY_UPGRADE_KEY">
  <UpgradeVersion OnlyDetect='yes' Property='SELFFOUND'
    Minimum='1.0.1' IncludeMinimum='yes'
    Maximum='1.0.1' IncludeMaximum='yes' />
  <UpgradeVersion OnlyDetect='yes' Property='NEWERFOUND'
    Minimum='1.0.1' IncludeMinimum='no' />
</Upgrade> 
```

这是注册表项的实际片段

```
<Component Id="cmp171812fcc51a4b91ad386fa8c27c9b89" Directory="TARGETDIR" Guid="COMPONENT_GUID"  Win64='yes' NeverOverwrite='yes'>
  <RegistryKey Key="SOFTWARE\Company" Root="HKLM">
    <RegistryValue Name="Value" Value="1100797834" Type="integer" KeyPath='yes'/>
  </RegistryKey>
</Component>
<Component Id="cmp211639bff9694f029028a22cb0bb9687" Directory="TARGETDIR" Guid="NEW COMPONENT GUID"  Win64='yes' NeverOverwrite='yes'>
  <RegistryKey Key="SOFTWARE\Company" Root="HKLM">
    <RegistryValue Name="Country Code" Value="1" Type="integer" KeyPath='yes' />
  </RegistryKey>
</Component> ... 
```

请注意：两个值的密钥相同 当我尝试更改它时，这似乎仍然会吹走用户的价值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T21:50:26.417

首先，在同一个注册表项下拥有多个值并将它们用作单独的键路径是没有问题的。术语“keypath”与注册表术语无关，在注册表的情况下，它实际上必须标识一个值而不是键。

其次，您的评论提到在小升级期间不会发生产品卸载。这在产品级别上是正确的，但在组件级别上是不正确的。

您应该检查您是否未在产品的新旧版本之间更改行为不端组件的 GUID 或键路径 - 如果您这样做了，您显然违反了小升级（组件删除）的规则。但是，即使您的 GUID 稳定，请继续阅读，我会为您提供更通用的解释。

次要更新是重新安装。我正在想象以下事件顺序。

1.  (CostFinalize) Windows Installer 检查是否已经安装了与 keypath 相同的组件（不是由用户重写或删除），因此不必安装；根据`NeverOverwrite`启用）。
2.  (InstallExecute) Windows Installer 从旧的 MSI 卸载组件，因为该组件将被新的 MSI 替换（由次要更新规则保证）；根据`Permanent`旧包中的禁用。
3.  (InstallExecute) Windows Installer 会记住步骤 1 中的检查，并且不关心使用相同的密钥路径安装不同的组件。

你至少有这些修正选项，选择一个。

*   进行重大升级。这几乎总是更容易和更好的选择。
*   `Permanent`除了 之外启用`NeverOverwrite`，假设您可以在所有版本中这样做；基本上，你还没有发布任何确定的东西。大多数人保持这些属性同步，所以为什么不随波逐流并减少问题。
*   弄乱动作的顺序。例子：

    `<RemoveExistingProducts After="InstallValidate"/>`

最后一个选项会使您的升级变慢，但如果您真的想要小升级并利用`NeverOverwrite`没有`Permanent`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T17:29:00.197

我发现问题是用户错误我在注册表中有太多值，以至于我没有注意到另一个类似但没有组件元素的部分（旧配置）。在我删除它之后，一切都按预期工作。谢谢你们的帮助。

# javascript - 从字符串中删除所有非小写字符

> ID：15578884
> 
> 赞同：3
> 
> 时间：2013-03-22T19:59:13.297
> 
> 标签：javascript, string

我知道给定一个字符串 str

```
str.replace(/\s/g,''); 
```

将删除字符串中的所有空格。

如何从字符串中删除所有不是小写字母的字符？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-22T20:00:16.390

你可以：

```
str.replace( /[^a-z]/g, '' ); 
```

# c# - 在 c# 中返回对象列表（分页）

> ID：15578889
> 
> 赞同：0
> 
> 时间：2013-03-22T19:59:32.040
> 
> 标签：c#, list, paging, extjs4.1

我正在尝试以 json 格式为 extjs 分页工具栏返回数据列表以及记录总数。extjs 查找“count”以计算分页总数。这是我想要的格式。

```
{
  "count": 1,
  "listData": [
      {
          "LastName": "Beckham",
          "FirstName": "David"
      }
  ]
} 
```

这是我的方法

```
 public static List<myList> newRecords(int start, int limit)
    {
        List<myList> listData = new List<myList>();
        using (SqlConnection con = SqlTools.GetSqlConnection())
        {
            con.Open();
            SqlCommand cmd = con.CreateCommand();
            cmd.CommandText = "id1_GetData";
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.Parameters.Add("@limit", SqlDbType.Int).Value = limit;
            cmd.Parameters.Add("@start", SqlDbType.Int).Value = start;

            SqlDataReader reader = cmd.ExecuteReader();

            while (reader.Read())
            {
                myList list1 = new myList();

                list1.LastName = reader["LastName"].ToString().Trim();
                list1.FirstName = reader["FirstName"].ToString().Trim();
                listData.Add(list1);
            }
            con.Close();
            int count = countRecords(); //counts total number of records in db
            var pagingData = (new
            {
                count,
                listData
            });

            //return myList;
            return new List<myList>(pagingData);
        }
    } 
```

这样我什么都得不到……如果我返回 myList，我只会得到第一页。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T21:30:25.843

我认为你想要做的就是这样做：

```
return pagingData; 
```

然后您可以调用 JSON 序列化程序来创建 JSON 字符串。

# c# - 调试时，有没有办法判断一个对象是否是不同的实例？

> ID：15578895
> 
> 赞同：27
> 
> 时间：2013-03-22T19:59:51.867
> 
> 标签：c#, debugging, visual-studio-2012

调试时，我期望两个不同的类使用同一个对象实例。这两个对象的所有属性都相同，但它们是两个不同的实例。有没有办法在 VS 调试器中说明这一点？

为了确定，我能够在类中添加一个字段：

```
private string someId = Guid.NewGuid().ToString(); 
```

然后，在调试时，我至少可以查看两个实例中的每一个的那个字段。有没有更好的方法不需要创建这个虚拟 ID 字段？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-03-22T20:10:37.013

调试时，在 Locals 窗口中，右键单击实例并选择“Make Object ID”。

这将添加此实例的唯一编号，只要您在调试器中（在工具提示和监视窗口中）看到此实例，就会显示该编号。

![在此处输入图像描述](../Images/9d527bcff67c644d0760c71f6d571fa1.png)

![在此处输入图像描述](../Images/33d8968c6c8a6283aaed7e0855aff403.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-22T20:01:25.113

[Object.Equals 方法（对象，对象）](http://msdn.microsoft.com/en-us/library/w4hkze5k.aspx)

编辑：要检查引用相等性，请使用[ReferenceEquals](http://msdn.microsoft.com/en-us/library/system.object.referenceequals.aspx)

编辑 2：在调试时，转到调试菜单，窗口 --> 即时窗口（智能感知应该在这里工作）和`?Object.ReferenceEquals(obj1, obj2)`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-10T23:57:22.690

除了上面的答案，您还可以比较指针。如果您有两个对象`obj1`和，您可以使用：和`obj2`来检查（例如在监视窗口中）它们的地址。`&obj1``&obj2`

请注意，.NET 运行时可能会移动对象，因此对同一对象的两次地址检查以及其间的一些代码执行可能会导致不同的地址。

# python - 如何创建未链接到原始对象的python对象的副本？

> ID：15578903
> 
> 赞同：2
> 
> 时间：2013-03-22T20:00:24.680
> 
> 标签：python, object, dictionary

（使用 Python 2.7）

我正在尝试创建模板对象的副本以供稍后填写。为简单起见，我尝试这样做：

```
template={'thing1':'','thing2':'','thing3':''}
for number in some_list:
    pile[number]=template 
```

但后来当我这样做时：

```
pile[1]['thing1']='blahblah' 
```

它还导致：

```
print pile[2]['thing1']
'blahblah'
print template['thing1']
'blahblah' 
```

我想要的是为了

```
pile[1]['thing1']='blahblah' 
```

让 pile[2] 一个人呆着，这样

```
print pile[2]['thing1']
'' 
```

我知道问题是当我说

```
pile[number]=template 
```

这意味着 pile[1] 是模板，而 pile[2] 是模板。（我今天才完全意识到这一点，而我正在研究这个......我对自己重复了好几次，因为实现和它的含义慢慢地沉没了......这就是 python 的*工作原理*，嗯？我觉得我刚刚加入python 俱乐部。我是从 MATLAB 开始的，所以不要对我太粗鲁。）

所以我想可能有两种方法可以解决这个问题 - 一种涉及某种与原始对象无关的对象的复制，或者类似的东西，并且可能非常简单明了。也许还有另一种特定于dicts的方法，比如初始化键或其他东西。我对第一种答案最感兴趣，因为这将有助于完善我对 python*工作原理*的理解，但第二种答案也会很好。谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T20:03:28.743

制作字典的浅拷贝最简单的方法是使用 dict 的[`copy`](http://docs.python.org/2/library/stdtypes.html#dict.copy)方法：

```
In [1]: template = {'thing1': '', 'thing2': '', 'thing3': ''}

In [2]: apile = template.copy()

In [3]: apile['thing1'] = 1

In [4]: apile
Out[4]: {'thing1': 1, 'thing2': '', 'thing3': ''}

In [5]: template
Out[5]: {'thing1': '', 'thing2': '', 'thing3': ''} 
```

要制作列表的浅表副本，您可以对整个列表进行切片：

```
copied_list = original_list[:] 
```

如果你需要克隆其他东西，或者如果你需要一个字典的深层副本（或字典列表，或其他可变对象），你应该使用`copy`模块：[http ://docs.python.org/2 /图书馆/copy.html](http://docs.python.org/2/library/copy.html)

```
copy.copy(x) 
```

> 返回 x 的浅拷贝。

```
copy.deepcopy(x) 
```

> 返回 x 的深层副本。

浅拷贝和深拷贝之间的区别仅与复合对象（包含其他对象的对象，如列表或类实例）相关：

*   浅拷贝构造一个新的复合对象，然后（在可能的范围内）将对原始对象中的对象的引用插入其中。
*   深拷贝构造一个新的复合对象，然后递归地将在原始对象中找到的对象的副本插入其中。

关于您的第二种方式：当然，您可以从另一个字典创建一个字典，它将是一个副本：

```
In [23]: p = dict(template)

In [24]: p['thing1'] = 1

In [25]: template
Out[25]: {'thing1': '', 'thing2': '', 'thing3': ''}

In [26]: p
Out[26]: {'thing1': 1, 'thing2': '', 'thing3': ''} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T20:05:19.783

这是我最初的解决方案

```
import copy

template = {1:''}
d = {}

for n in xrange(10):
    d[n] = copy.deepcopy(template) 
```

但是我更喜欢Pavel。

# amazon-web-services - 当不同用户付款时，管理 AWS 账户的正确方法是什么？

> ID：15578906
> 
> 赞同：1
> 
> 时间：2013-03-22T20:00:32.287
> 
> 标签：amazon-web-services

这是场景：

*   我有一个用于开发个人项目的 AWS 账户。
*   作为一名自由开发者，我经常需要为在 AWS 上运行的客户开发一个应用程序（当然我需要完全访问它），但我的客户应该为它的使用付费（而不是我）。

实现这一目标的正确方法是什么？

我的客户应该是他们项目帐户的所有者，并为我创建一个具有完全访问权限的用户？或者是否可以从我的帐户管理应用程序，但为每个应用程序设置不同的计费信息？

希望你能帮忙。提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T20:10:42.677

那么您的客户可以在 IAM 的帮助下授予对其账户的访问权限。可以创建具有有限访问权限的 IAM 用户，并且当您签订合同时，他们可以撤销访问权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T09:22:04.080

这里也是一样。我的老板支付服务费用，但经理是我。他授予了访问权限，我拥有做事的完全自由。

# wpf - 为 DataGrid 的特定列设置 ItemTemplate

> ID：15578907
> 
> 赞同：3
> 
> 时间：2013-03-22T20:00:34.463
> 
> 标签：wpf, wpf-controls, wpfdatagrid

我有一个 WPF `DataGrid`，它必须是`List<Person> people`.

```
public class Person
{
    public string Name{get;set;}
    public string LastName{get;set;}
    public string Address{get;set;}
    public int Age{get;set;}
}

public void ShowPeople()
{
     myDataGrid.ItemsSource = people;
} 
```

它显示一切正常，但我想显示`Address`在`TextBox`.`DataGrid`

我将 XAML 代码更改为：

```
 <DataGrid x:Name="myDataGrid">
        <DataGridTemplateColumn Header="Address">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <TextBox Text="{Binding Path=Address}"/>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
    </DataGrid> 
```

这是行不通的。它给了我一个错误。

> 在使用 ItemsSource 之前，项目集合必须为空。

请帮忙。谢谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T20:09:25.633

`Columns`您在 XAML中缺少该属性：

```
<DataGrid x:Name="myDataGrid">
    <DataGrid.Columns> <-- This is missing in your code!
        <DataGridTemplateColumn Header="Address">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <TextBox Text="{Binding Path=Address}"/>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
    </DataGrid.Columns>
</DataGrid> 
```

# c# - 条件语句以及如何增加变量

> ID：15578911
> 
> 赞同：0
> 
> 时间：2013-03-22T20:00:40.943
> 
> 标签：c#, increment, conditional-statements

我有以下代码：

```
public static int Compute(string a, string b, bool ignoreCase)
{
    // Allocate distance matrix
    int[,] d = new int[a.Length + 1, b.Length + 1];

    // Get character comparer
    CharComparer isEqual = (ignoreCase) ?
        (CharComparer)CharCompareIgnoreCase : CharCompare;

    // Compute distance
    for (int i = 0; i <= a.Length; i++)
        d[i, 0] = i;
    for (int j = 0; j <= b.Length; j++)
        d[0, j] = j;
    for (int i = 1; i <= a.Length; i++)
    {
        for (int j = 1; j <= b.Length; j++)
        {
            if (isEqual(a[i - 1], b[j - 1]))
            {
                // No change required
                d[i, j] = d[i - 1, j - 1];
            }
            else
            {
                d[i, j] =
                  Math.Min(d[i - 1, j] + 1, // Deletion
                  insertions=  Math.Min(d[i, j - 1] + 1,    // Insertion
                   substitutions= d[i - 1, j - 1] + 1));       // Substitution
            }
        }
    } 
```

关键位在底部带有注释删除，插入和替换，我想知道如何在其上添加变量增量器，以便每次检测到删除错误时变量增加一。我试过了：

```
{           d[i, j] =
     deletion= Math.Min(d[i - 1, j] + 1, // Deletion
      insertions=  Math.Min(d[i, j - 1] + 1 + insertion ++,    // Insertion
       substitutions= d[i - 1, j - 1] + 1));       // Substitution
} 
```

但只是没有运气

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:12:16.170

正如 Eric 所说：将语句拆分为多个。

```
 else
    {
        substitutions = d[i - 1, j - 1] + 1;
        insertions =  Math.Min(d[i, j - 1] + 1, substitutions);
        deletion = Math.Min(d[i - 1, j] + 1, insertions);
        d[i, j] = deletion;

        if (/* whatever */)
            counter++;
    } 
```

我*很*确定它会做和以前一样的事情，但我不知道你想计算什么，因为所有行总是被执行。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-22T20:12:50.860

我同意@Eric 和@usr 的观点，但以防万一你一心只想在一个声明中这样做（我知道单行者的心态，我自己就是它的受害者！），你可以这样做（免责声明：我没有测试过）：

```
Math.Min(d[i, j - 1] + 1 + (++insertion - insertion) 
```

++ 增加插入值并返回新值。所以它会像 x - x = 0，因此不会影响更大的语句。

**编辑**

对不起大家。该解决方案仅适用于执行短路的三元运算符，而 OP 的问题使用函数调用，因此每次都会进行评估，从而杀死计数器的目的。

# java - 如何连接 Apache Derby 数据库中的三个表？

> ID：15578912
> 
> 赞同：1
> 
> 时间：2013-03-22T20:00:42.463
> 
> 标签：java, sql, derby

**问题：**

我需要使用什么语法来使用 Apache Derby 简单地连接三个表？

**我试过的：**

我正在将 Java 应用程序从 SQLite 转换为 Apache Derby。在 SQLite 中，以下 SQL 语法可以正常工作。

```
sql.append("SELECT MatterDataset.id,  ");
//Removed rest of selection items for readability and to focus the inquiry

sql.append(" FROM MatterDataset, DocumentClassification, PrivilegeLog  " ) ; //<--PROBLEM LINE
sql.append("  ON MatterDataset.matterid = DocumentClassification.matterid  " ) ;
sql.append("   AND MatterDataset.matterid = PrivilegeLog.matterid   " ) ;
sql.append("   AND MatterDataset.id = DocumentClassification.documentid   " ) ;
sql.append("   AND MatterDataset.id = PrivilegeLog.documentparentid    " ) ;
sql.append(" WHERE    " ) ;
sql.append("  Matterdataset.matterid = ? " ) ; //Prepared statement
sql.append("  AND Matterdataset.isdeleted = 0  " ) ; 
```

导致转换为 Apache Derby 出现问题的行是：

```
sql.append(" FROM MatterDataset, DocumentClassification, PrivilegeLog  " ) ; 
```

我已经尝试了几种变体，并且都使用 Java Derby（通过 ij 工具）引发了语法错误。

1) ',' 处的语法错误，但此语法仅适用于两个表

```
sql.append(" FROM MatterDataset JOIN DocumentClassification, PrivilegeLog  " ) ; 
```

2）直接如上和“，”处的语法错误

```
sql.append(" FROM MatterDataset, DocumentClassification, PrivilegeLog  " ) ; // 
```

3) "AND" 处的语法错误

```
sql.append(" FROM MatterDataset JOIN DocumentClassification AND PrivilegeLog  " ) ; // 
```

我不确定还可以尝试什么（在对一般 SQL 的类似问题进行网络搜索之后）。有没有办法在 Apache Derby 中简单地做到这一点？

**环境设置：**

Java 7
Apache 德比 10.9.1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T20:16:35.673

您可以简单地加入表格`,`

```
sql.append("SELECT MatterDataset.id  ");
//Removed rest of selection items for readability and to focus the inquiry

sql.append(" FROM MatterDataset, DocumentClassification, PrivilegeLog  " ) ; //<--NOT A PROBLEM LINE
sql.append(" WHERE    " ) ;
sql.append("   MatterDataset.id = DocumentClassification.matterid  " ) ;
sql.append("   AND MatterDataset.id = PrivilegeLog.matterid   " ) ;
sql.append("   AND DocumentClassification.id = PrivilegeLog.documentparentid    " ) ;
sql.append("   AND Matterdataset.id = ? " ) ; //Prepared statement
sql.append("   AND Matterdataset.isdeleted = 0  " ) ; 
```

Derby 数据库也可以[针对性能进行优化](http://db.apache.org/derby/docs/10.0/manuals/tuning/perf44.html#Joins+and+Performance)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T14:43:52.180

我认为您试图混合两种不同样式的连接语法。

使用 ON 语法指定连接条件与使用 WHERE 语法的风格不同。

当您使用 ON 语法时，您的 SELECT 语句应如下所示：

SELECT columns FROM T1 INNER JOIN T2 ON t1-t2 连接条件 JOIN T3 ON ...

但是当您使用逗号分隔的表列表时，您不使用 ON 子句，您只需将所有连接条件集中到 WHERE 子句中。

所以不要混合两种风格，只使用一种或另一种。

顺便说一句，您选择的旧样式非常适合 INNER 连接，但不能用于 OUTER 连接，因此通常需要指定 OUTER 连接导致程序员切换到 ON 子句样式。

但是您也可以将 ON 子句用于 INNER 连接，只是不要给出逗号分隔的表列表。

# ios - 子类化 UICollectionViewCell 导致永远不会被选中

> ID：15578915
> 
> 赞同：2
> 
> 时间：2013-03-22T20:00:50.510
> 
> 标签：ios, objective-c, uicollectionviewcell

我尝试子类化 UICollectionViewCell 并从 nib 文件加载：

```
- (id)initWithFrame:(CGRect)frame {
    self = [super initWithFrame:frame];
    if (self) {
        NSArray *arrayOfViews = [[NSBundle mainBundle] loadNibNamed:@"DatasetCell" owner:self options:nil];

        if ([arrayOfViews count] < 1) {
            return nil;
        }

        if (![[arrayOfViews objectAtIndex:0] isKindOfClass:[UICollectionViewCell class]]) {
            return nil;
        }

        self = [arrayOfViews objectAtIndex:0];

        UIView *view = [UIView new];
        view.frame = self.frame;
        view.backgroundColor = [UIColor orangeColor];
        self.selectedBackgroundView = view;
    }

    return self;
} 
```

我遇到了一个问题，即选择了一个单元格，但`cell.selected`没有设置。它总是`NO`导致取消选择单元格的问题。

如何处理使单元格进入选定状态？

编辑：

我最初将自定义 UICollectionViewCell 作为一个类加载：

```
[collectionView registerClass:[DatasetCell class] forCellWithReuseIdentifier:@"dataCell"]; 
```

切换到加载笔尖：

```
[collectionView registerNib:[UINib nibWithNibName:@"DatasetCell" bundle:nil] forCellWithReuseIdentifier:@"nibCell"]; 
```

两种方式我都有相同的选择/取消选择问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T19:00:34.733

主要错误是您定义了一个属性

```
@property (nonatomic) BOOL isSelected; 
```

在您的自定义 UICollectionViewCell 子类中（在“DatasetCell.h”中），这会干扰 UICollectionViewCell 的继承“选定”属性。

如果删除该属性定义，则选择和取消选择将按预期工作，至少对于通过 .从 nib 文件加载的单元格而言`registerNib:...`。

对于通过 加载的单元格`registerClass:...`，`initWithFrame`调用。您尝试从那里的 nib 文件加载单元格。这没有多大意义，而且似乎无法正常工作。您应该在 nib 文件中以编程方式创建单元格`initWithFrame`并使用`registerClass:`，或者在 nib 文件中创建单元格并使用`registerNib:`.

`initWithFrame`对于从 nib 文件加载的单元格不调用，`awakeFromNib`如果要对单元格进行修改，请使用。

希望有帮助！！

# mysql - Jdbc (mysql) unicode 行为

> ID：15578917
> 
> 赞同：3
> 
> 时间：2013-03-22T20:01:01.267
> 
> 标签：mysql, jdbc, utf-8, clojure

我有一个带有两个 UTF-8 表的 Mysql 数据库。我们称它们为源和目标。

使用 clojure.java.jdbc 我成功地从 Source 中检索了一个字段，该字段包含“ă”符号。在尝试将该字符串保存在目标中时，我找到了一个“？” 在'ă'符号应该在的地方。

这是实际保存记录的序列：

```
(jdbc/update-or-insert-values
 "destination"
 ["lexeme = ?" word]
 record) 
```

有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T21:01:52.980

如果您使用[Wiki](http://en.wikibooks.org/wiki/Clojure_Programming/Examples/JDBC_Examples#Connection_Examples)中的示例，那么明显缺少的一件事是设置连接编码。如果您没有发现这里是未经测试的编码示例：

```
(use 'clojure.java.jdbc)

(let [db-host "localhost"
      db-port 3306
      db-name "a_database"]

  (def db {:classname "com.mysql.jdbc.Driver" ; must be in classpath
           :subprotocol "mysql"
           :subname (str "//" db-host ":" db-port "/" db-name "?characterEncoding=UTF-8")
           ; Any additional keys are passed to the driver
           ; as driver-specific properties.
           :user "a_user"
           :password "secret"})) 
```

# python - scrapy 无法进行 Request() 回调

> ID：15578918
> 
> 赞同：3
> 
> 时间：2013-03-22T20:01:03.113
> 
> 标签：python, scrapy

我正在尝试使用 Scrapy 制作递归解析脚本，但`Request()`函数不调用回调函数`suppose_to_parse()`，也不调用回调值中提供的任何函数。我尝试了不同的变体，但它们都不起作用。去哪里挖？

```
from scrapy.http import Request
from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector

class joomler(BaseSpider):
    name = "scrapy"
    allowed_domains = ["scrapy.org"]
    start_urls = ["http://blog.scrapy.org/"]

    def parse(self, response):
        print "Working... "+response.url
        hxs = HtmlXPathSelector(response)
        for link in hxs.select('//a/@href').extract():
            if not link.startswith('http://') and not link.startswith('#'):
               url=""
               url=(self.start_urls[0]+link).replace('//','/')
               print url
               yield Request(url, callback=self.suppose_to_parse)

    def suppose_to_parse(self, response):
        print "asdasd"
        print response.url 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:56:17.460

我不是专家，但我尝试了您的代码，我认为问题不在请求上，如果您将一些 url 添加到列表中并遍历它们并产生带有回调的请求，生成的 url 似乎已损坏，它工作正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T22:28:35.303

将 yield 移到`if`语句之外：

```
for link in hxs.select('//a/@href').extract():
    url = link
    if not link.startswith('http://') and not link.startswith('#'):
        url = (self.start_urls[0] + link).replace('//','/')

    print url
    yield Request(url, callback=self.suppose_to_parse) 
```

# python - python while循环卡住了

> ID：15578930
> 
> 赞同：0
> 
> 时间：2013-03-22T20:01:41.643
> 
> 标签：python

我知道这是基本的，但我无法让它发挥作用。它似乎不理解大于 60 并不断在循环中循环。

Python 2.7.3

```
rackNo = 0
while (rackNo > 60) or (rackNo < 1) :
    rackNo = raw_input("Enter the Rack number you are using: ") 
    if (rackNo > 60) or (rackNo < 1) :
        print "Rack number must be between 1 and 60" 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-22T20:03:02.447

您正在将字符串 (from `raw_input`) 与整数进行比较。

最终，你想要这样的东西：

```
rackNo = int(raw_input("Enter the Rack number you are using: ")) 
```

在 python2.x 中，内置类型之间的比较 ( `>`, ) 取决于实现。`<`在 python3.x 中，这些比较被明确禁止。

[（python2.x 文档）](http://docs.python.org/2/reference/expressions.html#not-in)

> 运算符 <、>、==、>=、<= 和 != 比较两个对象的值。对象不必具有相同的类型。如果两者都是数字，则将它们转换为通用类型。否则，不同类型的对象总是比较不相等，并且顺序一致但任意。`__cmp__`您可以通过定义方法或丰富的比较方法来控制非内置类型对象的比较行为`__gt__`，如特殊方法名称部分所述。

[（python3.x 文档）](http://docs.python.org/3.3/reference/expressions.html#not-in)

> 运算符 <、>、==、>=、<= 和 != 比较两个对象的值。对象不必具有相同的类型。如果两者都是数字，则将它们转换为通用类型。否则，== 和 != 运算符总是认为不同类型的对象是不相等的，**而 <、>、>= 和 <= 运算符在比较不同类型的对象时引发 TypeError，而这些对象没有为给定对实现这些运算符的类型。**您可以通过定义丰富的比较方法来控制非内置类型对象的比较行为`__gt__()`，如基本自定义部分所述。

# json - JSON.Parse 和 JsonConvert.DeserializeObject 失败

> ID：15578934
> 
> 赞同：0
> 
> 时间：2013-03-22T20:01:45.220
> 
> 标签：json, json.net, deserialization

5 用于反序列化我通过 Restful url 获得的 JSON 对象。

这是我尝试反序列化的两种方法

```
 var retObject1 = JObject.Parse(_strResponse);
  var rootObject2 = JsonConvert.DeserializeObject<List<ProductObjLibrary>>(_strResponse); 
```

我的字符串响应如下

```
{"GetProductsResult":[{"BrandID":19081,"BrandName":"A1C NOW SELFCHECK SYSTEM","BrandNameHTML":"A1C NOW SELFCHECK SYSTEM","ClassName":"Diabetes","CleanProductURL":"a1c_now_selfcheck_system","GenericName":"blood glucose monitoring","ManufacturerName":"Bayer","ProductID":19081,"ProductName":"A1C NOW SELFCHECK SYSTEM","Rank":0},{"BrandID":19045,"BrandName":"ABILIFY","BrandNameHTML":"ABILIFY","ClassName":"Antipsychotic","CleanProductURL":"abilify","GenericName":"aripiprazole","ManufacturerName":"Bristol-Myers Squibb and Otsuka","ProductID":19045,"ProductName":"ABILIFY","Rank":0},{"BrandID":19995,"BrandName":"ABRAXANE","BrandNameHTML":"ABRAXANE","ClassName":"Oncology: Breast Cancer","CleanProductURL":"abraxane","GenericName":"paclitaxel","ManufacturerName":"Abraxis Oncology","ProductID":19995,"ProductName":"ABRAXANE","Rank":0},{"BrandID":18413,"BrandName":"ACCOLATE","BrandNameHTML":"ACCOLATE","ClassName":"Asthma\/COPD","CleanProductURL":"accolate","GenericName":"zafirlukast","ManufacturerName":"AstraZeneca Pharmaceuticals","ProductID":18413,"ProductName":"ACCOLATE","Rank":0},{"BrandID":19595,"BrandName":"ACCU-CHECK SPIRIT INSULIN PUMP","BrandNameHTML":"ACCU-CHECK SPIRIT INSULIN PUMP","ClassName":"Diabetes","CleanProductURL":"accu_check_spirit_insulin_pump","GenericName":"blood glucose monitoring","ManufacturerName":"Roche","ProductID":19595,"ProductName":"ACCU-CHECK SPIRIT INSULIN PUMP","Rank":0}]} 
```

在我使用第一种方法 retObject1 转换这个字符串之后，我得到下面的对象

```
{
  "GetProductsResult": [
    {
      "BrandID": 19081,
      "BrandName": "A1C NOW SELFCHECK SYSTEM",
      "BrandNameHTML": "A1C NOW SELFCHECK SYSTEM",
      "ClassName": "Diabetes",
      "CleanProductURL": "a1c_now_selfcheck_system",
      "GenericName": "blood glucose monitoring",
      "ManufacturerName": "Bayer",
      "ProductID": 19081,
      "ProductName": "A1C NOW SELFCHECK SYSTEM",
      "Rank": 0
    },
    {
      "BrandID": 19045,
      "BrandName": "ABILIFY",
      "BrandNameHTML": "ABILIFY",
      "ClassName": "Antipsychotic",
      "CleanProductURL": "abilify",
      "GenericName": "aripiprazole",
      "ManufacturerName": "Bristol-Myers Squibb and Otsuka",
      "ProductID": 19045,
      "ProductName": "ABILIFY",
      "Rank": 0
    },
    {
      "BrandID": 19995,
      "BrandName": "ABRAXANE",
      "BrandNameHTML": "ABRAXANE",
      "ClassName": "Oncology: Breast Cancer",
      "CleanProductURL": "abraxane",
      "GenericName": "paclitaxel",
      "ManufacturerName": "Abraxis Oncology",
      "ProductID": 19995,
      "ProductName": "ABRAXANE",
      "Rank": 0
    },
    {
      "BrandID": 18413,
      "BrandName": "ACCOLATE",
      "BrandNameHTML": "ACCOLATE",
      "ClassName": "Asthma/COPD",
      "CleanProductURL": "accolate",
      "GenericName": "zafirlukast",
      "ManufacturerName": "AstraZeneca Pharmaceuticals",
      "ProductID": 18413,
      "ProductName": "ACCOLATE",
      "Rank": 0
    }
  ]
} 
```

使用第二种方法我得到以下错误

```
Cannot deserialize the current JSON object (e.g. {"name":"value"}) into type 'System.Collections.Generic.List`1[]' because the type requires a JSON array (e.g. [1,2,3]) to deserialize correctly. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:14:17.040

感谢 Fredrik Rofors [http://codesurf.blogspot.com/2012/10/jsonconvertdeserializeobject-cannot.html](http://codesurf.blogspot.com/2012/10/jsonconvertdeserializeobject-cannot.html)

学过的知识：

```
If the json value is '[]' => declare the field as List<type>
If the json value is '{}' => declare the field IDictionary<type, type> 
```

在我的情况下，我是这样处理的。

```
 var rootObject = JsonConvert.DeserializeObject<IDictionary<string, List<ProductObjLibrary>>>(_strResponse);
                       if (rootObject != null)
                           _products = rootObject.FirstOrDefault().Value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-22T17:14:35.353

我最近遇到了同样的问题。只是一个建议 => 这样您就不必担心 [] 或 {} 中包含的 json 值。我将以下代码用于包含在 {} 中的 json 值，但请记住，我的目的是处理任何情况。

```
 Dictionary<string, object> values = JsonConvert.DeserializeObject<Dictionary<string, object>>(response_result); 
```

以上代码仅适用于第一级或深度，第二级代码将是

```
 Dictionary<string, object> values =  JsonConvert.DeserializeObject<Dictionary<string, Dictionary<string, object> >>(response_result); 
```

等等多级

```
Dictionary<string, Dictionary<string, Dictionary<string, Dictionary<string,**...**>> > > 
```

为多层次解决这个问题非常棘手，目前，我将深入研究这个问题。

# c++ - 转换指针类型的正确方法

> ID：15578935
> 
> 赞同：64
> 
> 时间：2013-03-22T20:01:46.093
> 
> 标签：c++, pointers, casting, reinterpret-cast, static-cast

考虑[以下代码（以及](http://blogs.msdn.com/b/oldnewthing/archive/2005/05/19/420038.aspx)[`VirtualAlloc()`返回 a`void*`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366887%28v=vs.85%29.aspx)的事实）：

```
BYTE* pbNext = reinterpret_cast<BYTE*>(
    VirtualAlloc(NULL, cbAlloc, MEM_COMMIT, PAGE_READWRITE)); 
```

为什么`reinterpret_cast`选择而不是`static_cast`？

我曾经认为这`reinterpret_cast`对于例如将指针转换为整数类型（如 eg `DWORD_PTR`）是可以的，但是从 a`void*`转换为 a `BYTE*`，不是`static_cast`吗？

在这种特殊情况下是否有任何（细微的？）差异，或者它们只是有效的指针转换？

C++ 标准是否对这种情况有偏好，建议一种方式而不是另一种方式？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-03-22T20:06:46.767

对于**指向基本类型的可转换指针，两种类型**转换具有相同的含义；所以你是对的，`static_cast`没关系。

在某些指针类型之间进行转换时，指针*中保存的特定内存地址可能需要更改*。

这就是两个演员不同的地方。 `static_cast`会做出适当的调整。 `reinterpret_cast`将不会。

`static_cast`出于这个原因，指针类型之间的通用规则是一个很好的通用规则，除非您**知道**这`reinterpret_cast`是需要的。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-03-22T20:18:46.120

你应该`static_cast`。**在撤消隐式转换的情况下****使用。`static_cast`**

但是，在这种特殊情况下，没有区别，因为您是从`void*`. 但一般来说，`reinterpret_cast`两个对象指针之间的 ing 定义为（§5.2.10/7）：

> 对象指针可以显式转换为不同类型的对象指针。当`v`“pointer to `T1`”类型的纯右值转换为“pointer to cv `T2`”类型时，**结果是`static_cast<cv T2*>(static_cast<cv void*>(v))`**如果`T1`和`T2`都是标准布局类型并且 的对齐要求`T2`不比 的更严格`T1`，或者任何一个类型都是`void`。将“pointer to”类型的纯右值转换为“pointer to `T1`”类型`T2`（其中`T1`和`T2`是对象类型，其中 的对齐要求`T2`不比 的 更严格`T1`）并返回其原始类型会产生原始指针值。未指定任何其他此类指针转换的结果。

强调我的。既然`T1`对你来说已经是`void*`，那么对`void*`in的强制转换`reinterpret_cast`什么也不做。这通常不是真的，这就是[Drew Dormann 所说的](https://stackoverflow.com/a/15579008/87234)：

```
#include <iostream>

template <typename T>
void print_pointer(const volatile T* ptr)
{
    // this is needed by oversight in the standard
    std::cout << static_cast<void*>(const_cast<T*>(ptr)) << std::endl;
}

struct base_a {};
struct base_b {};
struct derived : base_a, base_b {};

int main()
{
    derived d;

    base_b* b = &d; // implicit cast

    // undo implicit cast with static_cast
    derived* x = static_cast<derived*>(b);

    // reinterpret the value with reinterpret_cast
    derived* y = reinterpret_cast<derived*>(b);

    print_pointer(&d);
    print_pointer(x);
    print_pointer(y);
} 
```

输出：

> 00CBFD5B
> 00CBFD5B
> 00CBFD5C

（请注意，因为`y`实际上并不指向 a `derived`，所以使用它是未定义的行为。）

在这里，`reinterpret_cast`提出了一个不同的值，因为它通过`void*`. 这就是为什么你应该`static_cast`在可以和`reinterpret_cast`必须的时候使用。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-22T20:09:31.577

使用`static_cast`to cast a pointer to and from`void*`可以保证保留地址。

`reinterpret_cast`另一方面保证如果您将指针从一种类型转换为另一种类型，然后再转换回原始类型，则地址将被保留。

尽管在大多数实现中，使用其中任何一个都会看到相同的结果，但`static_cast`应该首选。

我`C++11`记得，使用`reinterpret_cast`for`void*`具有明确定义的行为。在此之前，这种行为是被禁止的。

```
It is not permitted to use reinterpret_cast to convert between pointers to object type and pointers to void. 
```

> 提议的决议（2010 年 8 月）：
> 
> 将 5.2.10 [expr.reinterpret.cast] 第 7 段更改如下：
> 
> 对象指针可以显式转换为不同类型的对象指针。当“指向 T1 的指针”类型的纯右值 v 转换为“指向 cv T2 的指针”类型时，如果 T1 和 T2 都是标准布局类型（3.9 [basic.types **]** ) 并且 T2 的对齐要求不比 T1 更严格，或者如果任一类型为 void。
> 
> 将“指向 T1 的指针”类型的纯右值转换为“指向 T2 的指针”类型（其中 T1 和 T2 是对象类型，并且 T2 的对齐要求不比 T1 的对齐要求更严格）并返回其原始类型会产生原始类型指针值。未指定任何其他此类指针转换的结果。

更多信息[在这里](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#1120)。

感谢[Jesse Good](https://stackoverflow.com/users/906773/jesse-good)提供的链接。

# android - Android：EditText.getText().toString 不返回任何内容

> ID：15578936
> 
> 赞同：1
> 
> 时间：2013-03-22T20:01:50.093
> 
> 标签：android, onclick, android-edittext

我想从方法中的 edittext 视图中获取值`onClick`，但是在检索`EditText`. 这是我的代码：

```
public class CreateEvent extends Activity{
    Button cbutton;
    EditText title;

    protected void onCreate(Bundle savedInstancesState){
        super.onCreate(savedInstacesState);
        setContentView(R.layout.create_event_layout);

        cbutton = (Button)this.findViewById(R.id.cbutton);
        title = (EditText)this.findViewById(R.id.title);

        cbutton.setOnClickListener(new Button.OnClickListener()
        {
            public void onClick(View v){
                Log.v("title", title.getText().toString());
        });
    }
} 
```

我也尝试将标题的启动移入`onClick`，仍然没有返回。不知道该怎么办。

这是布局文件：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width = "fill_parent"
android:layout_width = "fill_parent"
android:oriention = "vertical">
    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/title"
    />
    <EditText
        android:id="@+id/title"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textSize="20sp"
        android:hint="@string/title"
    />
</LinearLayout> 
```

我很确定我的布局文件没有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T20:30:43.747

//你的布局没有错

只是你忘了在那里声明 Button`(R.id.cbutton)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T13:10:51.687

您的布局文件中没有具有此 ID 的按钮

```
cbutton = (Button)this.findViewById(R.id.cbutton); 
```

在您的布局文件中，我没有看到 id cbutton 。也把这张支票

```
 String value = title.getText().toString();
if(edittext.length==0){ Log.d("null","the valueis null")}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T20:33:27.360

尝试这个 ：

```
public class MainActivity extends Activity {

Button cbutton;
EditText title;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    cbutton = (Button)this.findViewById(R.id.button1);
    title = (EditText)this.findViewById(R.id.editText1);

    cbutton.setOnClickListener(new Button.OnClickListener()
    {
        public void onClick (View v){
            Log.v("title", title.getText().toString()); 
        }
        }//missing i think 
            );

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-22T21:10:29.903

我会检查视图是否具有正确的 ID

```
if (v.getId() == title.getId())
{
   Log.v("title", title.getText().toString()); 
} 
```

并且该按钮未在 XML 文件中定义，还是在另一个 XML 文件中？

# asp.net - 使用 web.config 拒绝访问网页

> ID：15578941
> 
> 赞同：2
> 
> 时间：2013-03-22T20:02:17.177
> 
> 标签：asp.net, authentication, web-config, forms-authentication

我搜索了 Google 和 SO 帖子，但找不到任何解决我问题的结果。

我的 web.config 是：

```
<location path="~/reports/PayPeriodQtrReport.aspx, ~/reports/PayPeriodDetailReport.aspx">
  <system.web>
    <authorization>
      <allow roles="PayrollReports"/>
      <deny users="*"/>
    </authorization>
  </system.web>
</location>

<location path="~/reports/ManifestAnnualReport.aspx, ~/reports/ManifestDetailedReport.aspx">
  <system.web>
    <authorization>
      <allow roles="ManifestReports"/>
      <deny users="*"/>
    </authorization>
  </system.web>
</location> 
```

授权按要求工作（意味着具有“PayrollReports”角色的人无法在菜单项中看到 Manifest Reports，而具有“ManifestReports”角色的人无法在菜单项中看到 Payroll Reports）。

**问题：**
作为具有“PayrollReports”角色的用户，我可以输入我的网址 `http:\\mysite.com\reports\ManifestDetailedReport.aspx`并显示页面。应该显示的是未授权访问.aspx

同样，作为具有“ManifestReports”角色的用户，我可以输入我的网址`http:\\mysite.com\reports\PayPeriodQtrReport.aspx`并显示页面。应该显示的是未授权访问.aspx

**问题：** 使用 web.config，如何防止用户通过输入 url 来入侵页面？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T20:19:25.317

您需要将每个文件放在它自己的`location`条目中并删除`~/`：

```
<location path="reports/PayPeriodQtrReport.aspx">
  <system.web>
    <authorization>
      <allow roles="PayrollReports"/>
      <deny users="*"/>
    </authorization>
  </system.web>
</location> 
```

ETC...

这假设您使用的是 RoleProvider。您正在使用内置的 RoleProvider，或者您使用的是继承自`RoleProvider`web.config 并在 web.config 中正确指定的自定义 RoleProvider。

# python - Selenium Webdriver 测试 - Python

> ID：15578942
> 
> 赞同：0
> 
> 时间：2013-03-22T20:02:17.440
> 
> 标签：python, selenium

我想知道，如果在测试结束时他没有发出测试通过或失败的报告，那么使用 selenium 进行自动化有什么好处？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T20:11:39.817

Selenium 实际上不是一个测试框架，它是一个浏览器驱动程序。您无需在 Selenium 中编写测试，就像您在 OpenGL 中编写 GUI 应用程序一样。您通常在单元测试框架中编写测试，例如`unittest`，或类似`nose`或`lettuce`构建在它之上的东西。然后，您的测试使用 Selenium 与浏览器交互，因为它们使用数据库 API 访问 DB 或 HTTP 库与 Web 服务进行通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T20:11:16.690

如果使用

```
python test_file.py 
```

如果有错误，你最后会得到一份报告。

此外，您可以查看nosetests。将“-sv”参数传递给nose，它将显示详细的输出，哪些测试通过，哪些没有。将鼻子测试与 Xunit 相结合，您可以获得有效的 Xunit-xml 报告，这些报告可以在像 Jenkins 这样的 CI 服务器中使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T03:41:24.920

Its up to the discretion of the user what to do with the selenium webdriver automation and how to report the test results. Selenium webdriver will give you the power to control your web browser and to automate your web application tests.

Same as how you have to program in any other automation tool the conditions for checking your pass or fail criteria for any tests, in Selenium also it has to be programmed.It is totally up to the programmer how to report their results and the template to be followed. You will have to write your own code to format and store the test results.

# c# - DataGridView 列宽百分比

> ID：15578945
> 
> 赞同：7
> 
> 时间：2013-03-22T20:02:23.113
> 
> 标签：c#, .net, datagridview, cells, dynamic-columns

有没有办法让 DataGridView 中的每一列占总网格的百分比宽度？我目前正在使用固定宽度，但想给一列 15% 的宽度，另一列 25% 的宽度，依此类推，以便 100% 的表格被填充并使用网格调整大小。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-22T20:34:30.803

尝试使用[DataGridViewColumn.FillWeight](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcolumn.fillweight.aspx)属性。基本上，您为每一列分配一个权重，并根据这些权重重新调整列的大小。MSDN 的文章不是那么好。请参阅下面的文章以获得更好的解释 -

[在 .NET 2.0 中使用 DataGridView 控件呈现数据—自动调整列大小](http://www.informit.com/articles/article.aspx?p=446453&seqNum=10)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-08-22T21:32:56.867

尝试这个

```
 private void DgvGrd_SizeChanged(object sender, EventArgs e)
    {
        dgvGrd.Columns[0].Width = (int)(dgvGrd.Width * 0.2);
        dgvGrd.Columns[1].Width = (int)(dgvGrd.Width * 0.2);
        dgvGrd.Columns[2].Width = (int)(dgvGrd.Width * 0.4);
        dgvGrd.Columns[3].Width = (int)(dgvGrd.Width * 0.2);
        // also may be a good idea to set FILL for the last column
        // to accomodate the round up in conversions
        dgvGrd.Columns[3].AutoSizeMode = DataGridViewAutoSizeColumnMode.Fill; 
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T20:33:58.880

可以使用值转换器
这会减去一个参数，但您可以让它除以一个参数。

```
<local:WidthConverter x:Key="widthConverter"/>

<GridViewColumn Width="{Binding ElementName=lvCurDocFields, Path=ActualWidth, Converter={StaticResource widthConverter}, ConverterParameter=100}">

 [ValueConversion(typeof(double), typeof(double))]
    public class WidthConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
        {
            // value is the total width available
            double otherWidth;
            try
            {
                otherWidth = System.Convert.ToDouble(parameter);
            }
            catch
            {
                otherWidth = 100;
            }
            if (otherWidth < 0) otherWidth = 0;

            double width = (double)value - otherWidth;
            if (width < 0) width = 0;
            return width; // columnsCount;
        }

        public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
        {
            throw new NotImplementedException();
        }
    } 
```

# python - 记录对 django-rest-framework 的请求

> ID：15578946
> 
> 赞同：43
> 
> 时间：2013-03-22T20:02:30.313
> 
> 标签：python, django, django-rest-framework

出于调试目的，我想使用 Django 的日志记录机制来记录每个传入的请求，当它“到达”django-rest-framework 的门口时。

Djagno 通过以下方式（来自 settings.py 中的 LOGGING 部分）提供其请求的日志记录（仅“警告”日志级别及以上）：

```
'django.request': {
        'handlers': ['mail_admins'],
        'level': 'ERROR',
        'propagate': False,
 }, 
```

我希望实现这样的目标（注意：日志级别为 DEBUG）：

```
'rest_framework.request': {
        'handlers': ['logfile'],
        'level': 'DEBUG',
        'propagate': False,
 }, 
```

有没有办法在**不**将记录器嵌入到 DRF 的源代码中的情况下做到这一点？
我不知道的 DRF 中是否有某种“日志记录后端”选项？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2015-01-13T17:51:31.597

我制作了一个通用`RequestLogMiddleware`的，可以`View`使用`decorator_from_middleware`.

## request_log/middleware.py

```
import socket
import time

class RequestLogMiddleware(object):
    def process_request(self, request):
        request.start_time = time.time()

    def process_response(self, request, response):

        if response['content-type'] == 'application/json':
            if getattr(response, 'streaming', False):
                response_body = '<<<Streaming>>>'
            else:
                response_body = response.content
        else:
            response_body = '<<<Not JSON>>>'

        log_data = {
            'user': request.user.pk,

            'remote_address': request.META['REMOTE_ADDR'],
            'server_hostname': socket.gethostname(),

            'request_method': request.method,
            'request_path': request.get_full_path(),
            'request_body': request.body,

            'response_status': response.status_code,
            'response_body': response_body,

            'run_time': time.time() - request.start_time,
        }

        # save log_data in some way

        return response 
```

## request_log/mixins.py

```
from django.utils.decorators import decorator_from_middleware

from .middleware import RequestLogMiddleware

class RequestLogViewMixin(object):
    """
    Adds RequestLogMiddleware to any Django View by overriding as_view.
    """

    @classmethod
    def as_view(cls, *args, **kwargs):
        view = super(RequestLogViewMixin, cls).as_view(*args, **kwargs)
        view = decorator_from_middleware(RequestLogMiddleware)(view)
        return view 
```

## my_django_rest_api/views.py

```
from rest_framework import generics

from ...request_log.mixins import RequestLogViewMixin

class SomeListView(
    RequestLogViewMixin,
    generics.ListAPIView
):
    ... 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-22T20:19:42.060

重写[`APIView.initial()`](http://django-rest-framework.org/api-guide/views/#dispatch-methods)方法以自己添加日志记录。

> ## 调度方法
> 
> 以下方法由视图的 .dispatch() 方法直接调用。它们执行在调用处理程序方法之前或之后需要发生的任何操作，例如 .get()、.post()、put()、patch() 和 .delete()。
> 
> `.initial(self, request, *args, **kwargs)`
> 在调用处理程序方法之前执行需要发生的任何操作。此方法用于强制执行权限和限制，以及执行内容协商。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-06-26T10:26:00.657

制作了一个自定义中间件：

```
import logging
import time
logger = logging.getLogger(__name__)

class APILogMiddleware:
    def __init__(self, get_response):
        self.get_response = get_response

    def __call__(self, request):
        start_time = time.time()
        response = self.get_response(request)
        duration = time.time() - start_time
        response_ms = duration * 1000
        user = str(getattr(request, 'user', ''))
        method = str(getattr(request, 'method', '')).upper()
        status_code = str(getattr(response, 'status_code', ''))
        request_path = str(getattr(request, 'path', ''))
        if status_code == '200' and response_ms > 2000:
            logger.info({
                         "message": "*****SLOW RESPONSE****",
                         "path": request_path,
                         "response_time": str(response_ms) + " ms",
                         "method": method,
                         "user": user,
                         "status_code": status_code
                         })
        return response 
```

这会记录所有需要超过 2 秒才能返回响应的 API。只需在 settings.py 中添加 MIDDLEWARE = ["path.to.APILogMiddleware"] 的完整路径

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-07-27T01:57:10.197

这是我目前在日志中获取每个请求/响应的解决方案。我创建了一个与旧中间件（Django < 1.10）和记录每个请求/响应的新中间件兼容的中间件。这个解决方案是我迄今为止发现的最好的。

```
import logging
from django.utils.deprecation import MiddlewareMixin

_logger = logging.getLogger(__name__)

class LogRestMiddleware(MiddlewareMixin):
    """Middleware to log every request/response.
    Is not triggered when the request/response is managed using the cache
    """

    def _log_request(self, request):
        """Log the request"""
        user = str(getattr(request, 'user', ''))
        method = str(getattr(request, 'method', '')).upper()
        request_path = str(getattr(request, 'path', ''))
        query_params = str(["%s: %s" %(k,v) for k, v in request.GET.items()])
        query_params = query_params if query_params else ''

        _logger.debug("req: (%s) [%s] %s %s", user, method, request_path, query_params)

    def _log_response(self, request, response):
        """Log the response using values from the request"""
        user = str(getattr(request, 'user', ''))
        method = str(getattr(request, 'method', '')).upper()
        status_code = str(getattr(response, 'status_code', ''))
        status_text = str(getattr(response, 'status_text', ''))
        request_path = str(getattr(request, 'path', ''))
        size = str(len(response.content))

        _logger.debug("res: (%s) [%s] %s - %s (%s / %s)", user, method, request_path, status_code, status_text, size)

    def process_response(self, request, response):
        """Method call when the middleware is used in the `MIDDLEWARE_CLASSES` option in the settings. Django < 1.10"""
        self._log_request(request)
        self._log_response(request, response)
        return response

    def __call__(self, request):
        """Method call when the middleware is used in the `MIDDLEWARE` option in the settings (Django >= 1.10)"""
        self._log_request(request)
        response = self.get_response(request)
        self._log_response(request, response)
        return response 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-02-11T19:32:08.353

几年后，Rhumbix 推出了这个库，有人试过吗？

[https://github.com/Rhumbix/django-request-logging](https://github.com/Rhumbix/django-request-logging)

```
MIDDLEWARE = (
...,
'request_logging.middleware.LoggingMiddleware',
...,
) 
```

并在您的应用程序中配置日志记录：

```
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'handlers': {
        'console': {
            'class': 'logging.StreamHandler',
        },
    },
    'loggers': {
        'django.request': {
            'handlers': ['console'],
            'level': 'DEBUG',  # change debug level as appropiate
            'propagate': False,
        },
    },
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-06-19T09:59:19.183

在新的 Django 2+**中，最好将中间件用作这样的可调用对象**，只需在 settings.py 文件的中间件部分将它与您的项目连接起来（中间件也可以是一个函数，而不仅仅是一个类，因为它是一个旧的可调用对象**MiddlewareMixin**现在在Django的**弃用模块中）：**

文档中的更多信息：
[https ://docs.djangoproject.com/en/2.2/topics/http/middleware/#writing-your-own-middleware](https://docs.djangoproject.com/en/2.2/topics/http/middleware/#writing-your-own-middleware)

```
class UserActivityLogMiddleware:
    def __init__(self, get_response):
        self.get_response = get_response

    def __call__(self, request):
        print(request.method)    # In this string we catch request object.
        response = self.get_response(request)
        return response 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-09-18T13:21:33.273

这是来自@Glyn Jackson 的答案的代码：

在中间件/mixin.py

```
class RequestLogMiddleware(object):

    def initial(self, request, *args, **kwargs):
         super(RequestLogMiddleware, self).initial(request, *args, **kwargs)
         # store/log the request 
```

在视图中：

```
class ViewClass(RequestLogMiddleware, generics.RetrieveAPIView):
     ... 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-06-02T21:38:43.217

我发现最好和最灵活的方法是通过装饰器添加日志记录。我只是将装饰器添加到我想要记录请求的每个函数（post、get）中，而不是作为整体视图类的一部分。更好地控制记录的内容。这些装饰器获取传入的请求对象 (arg[1])，然后将请求对象的部分记录到文件中。

有关执行此操作的模板，请参阅[https://github.com/slogan621/tscharts/commit/39ed479b04b7077f128774d3a203a86d6f68f03e](https://github.com/slogan621/tscharts/commit/39ed479b04b7077f128774d3a203a86d6f68f03e)（提交显示了对 settings.py 的更改，以将日志记录线程化到我现有的文件日志记录方案中，以及作为装饰器和示例用法）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-03-16T13:09:40.223

一种选择是使用 django-requestlogs ( [https://github.com/Raekkeri/django-requestlogs](https://github.com/Raekkeri/django-requestlogs) (我是作者))。默认情况下，它收集请求和响应数据（以及其他基本信息）并且很容易连接到 Django 的日志系统。

# windows-phone-7 - WP7 应用程序在事件触发器中崩溃并出现未指定的错误

> ID：15578950
> 
> 赞同：1
> 
> 时间：2013-03-22T20:02:51.757
> 
> 标签：windows-phone-7, xaml, eventtrigger

我正在编写一个 wp7 应用程序，但 eventtrigger 有一个问题。我有一个带有这个 ItemTemplate 的列表框：

```
 <DataTemplate>
                <Grid Name="templatePanel"  Width="200" Height="200" Margin="10">
                    <Grid.Triggers>
                        <EventTrigger RoutedEvent="Grid.Tap" >
                            <EventTrigger.Actions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="templatePanel"
                                 Storyboard.TargetProperty="Opacity"
                                 From="0"
                                 To="1"
                                 Duration="0:0:5"/>
                                    </Storyboard>
                                </BeginStoryboard>
                            </EventTrigger.Actions>
                        </EventTrigger>
                    </Grid.Triggers>
                <!--SOME KIND OF CONTENT-->
                </Grid>
            </DataTemplate> 
```

当我运行我的应用程序时，它会因 StackTrace**出现未指定的错误而崩溃：**

```
 at MS.Internal.XcpImports.CheckHResult(UInt32 hr)
   at MS.Internal.XcpImports.UIElement_Measure(UIElement element, Size availableSize)
   at System.Windows.UIElement.Measure(Size availableSize)
   at Microsoft.Phone.Controls.WrapPanel.MeasureOverride(Size constraint)
   at System.Windows.FrameworkElement.MeasureOverride(IntPtr nativeTarget, Double inWidth, Double inHeight, Double& outWidth, Double& outHeight)
   at MS.Internal.XcpImports.MeasureNative(IntPtr element, Single inWidth, Single inHeight)
   at MS.Internal.XcpImports.UIElement_Measure(UIElement element, Size availableSize)
   at System.Windows.UIElement.Measure(Size availableSize)
   at System.Windows.Controls.ScrollContentPresenter.MeasureOverride(Size constraint)
   at System.Windows.FrameworkElement.MeasureOverride(IntPtr nativeTarget, Double inWidth, Double inHeight, Double& outWidth, Double& outHeight)
   at MS.Internal.XcpImports.MeasureNative(IntPtr element, Single inWidth, Single inHeight)
   at MS.Internal.XcpImports.UIElement_Measure(UIElement element, Size availableSize)
   at System.Windows.UIElement.Measure(Size availableSize)
   at System.Windows.Controls.ScrollViewer.MeasureOverride(Size constraint)
   at System.Windows.FrameworkElement.MeasureOverride(IntPtr nativeTarget, Double inWidth, Double inHeight, Double& outWidth, Double& outHeight)
   at MS.Internal.XcpImports.MeasureOverrideNative(IntPtr element, Single inWidth, Single inHeight, Single& outWidth, Single& outHeight)
   at MS.Internal.XcpImports.FrameworkElement_MeasureOverride(FrameworkElement element, Size availableSize)
   at System.Windows.FrameworkElement.MeasureOverride(Size availableSize)
   at System.Windows.FrameworkElement.MeasureOverride(IntPtr nativeTarget, Double inWidth, Double inHeight, Double& outWidth, Double& outHeight)
   at MS.Internal.XcpImports.MeasureOverrideNative(IntPtr element, Single inWidth, Single inHeight, Single& outWidth, Single& outHeight)
   at MS.Internal.XcpImports.FrameworkElement_MeasureOverride(FrameworkElement element, Size availableSize)
   at System.Windows.FrameworkElement.MeasureOverride(Size availableSize)
   at System.Windows.FrameworkElement.MeasureOverride(IntPtr nativeTarget, Double inWidth, Double inHeight, Double& outWidth, Double& outHeight)
   at MS.Internal.XcpImports.MeasureOverrideNative(IntPtr element, Single inWidth, Single inHeight, Single& outWidth, Single& outHeight)
   at MS.Internal.XcpImports.FrameworkElement_MeasureOverride(FrameworkElement element, Size availableSize)
   at System.Windows.FrameworkElement.MeasureOverride(Size availableSize)
   at Microsoft.Phone.Controls.PhoneApplicationFrame.MeasureOverride(Size availableSize)
   at System.Windows.FrameworkElement.MeasureOverride(IntPtr nativeTarget, Double inWidth, Double inHeight, Double& outWidth, Double& outHeight) 
```

**但是**如果我设置

```
<EventTrigger RoutedEvent="Grid.Loaded" > 
```

应用程序**不会**崩溃！

为什么会这样？预先感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:09:44.347

Silverlight 仅支持`Loaded`( `RoutedEvent`)。引用[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.eventtrigger.routedevent%28v=vs.95%29.aspx)：

> 在 XAML 中，您将其指定为字符串。在代码中，传递标识符（RoutedEvent 值）。Silverlight 中唯一支持的值是 Loaded/FrameworkElement.LoadedEvent。

# javascript - javascript：从复杂的 id 字符串中提取数组索引

> ID：15578956
> 
> 赞同：0
> 
> 时间：2013-03-22T20:03:08.850
> 
> 标签：javascript, html, regex

例如，id 是

```
id='_group[3].id.memberid' 
```

我尝试使用提取“3”

```
var thisIndex = j(this).attr('id').match('/[\d]+/g')[0]; 
```

不工作....

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T20:04:23.187

如果`id='_group[3].id.memberid'`是标准格式，你可以这样做

```
id.split(']')[0].split('[')[1] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T20:05:26.223

正则表达式应该略有不同：

```
.match(/\[(\d+)\]/)[1]; 
```

*   你不需要正则表达式的引号
*   你必须转义方括号

或`split`解决方案：

```
.split(/\]|\[/)[1]; 
```

测试：http: [//jsfiddle.net/dfsq/Q5bMP/](http://jsfiddle.net/dfsq/Q5bMP/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T20:10:48.390

只是为了提供一种替代方法，它不能准确回答问题，但可能首先解决问题。

如果您可以更改 HTML，我会执行以下操作：

HTML

```
<div id="_group[3].id.memberid" data-id="3"></div> 
```

JS：

```
var thisIndex = j(this).attr('data-id'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T20:04:27.200

正则表达式文字不应位于字符串中。`.match`删除通话中的撇号。

如果您打算将`[]`它们作为字符类，则没有必要；就`\d+`足够了。如果您打算让它们成为文字，则需要转义它们：

```
/\[\d+\]/ 
```

我怀疑这`g`也是可取的。

# php - Zend框架2中的身份验证+acl

> ID：15578964
> 
> 赞同：0
> 
> 时间：2013-03-22T20:03:38.107
> 
> 标签：php, zend-framework2, bootstrapping

您好，我设法在 ZF2 中实现了 acl 和身份验证，但现在我有两个主要问题。我无法在用户登录/未登录后重定向用户（在引导文件中），我的另一个任务是查询 mysql，因为我必须在他登录后检查用户权限。下面的代码都是模块。 php。你能帮助我吗？到现在我做了登录表单，它运行良好。（它现在没有 acl 工作）

```
namespace Application;

use Zend\Mvc\ModuleRouteListener;
use Zend\Mvc\MvcEvent;

use Zend\ModuleManager\Feature\AutoloaderProviderInterface;
use Zend\Authentication\Storage;
use Zend\Authentication\AuthenticationService;
use Zend\Authentication\Adapter\DbTable as DbTableAuthAdapter;
class Module
{
    protected $loginTable;
public function onBootstrap(MvcEvent $e)
{
    $e->getApplication()->getServiceManager()->get('translator');
    $eventManager        = $e->getApplication()->getEventManager();
    $moduleRouteListener = new ModuleRouteListener();
    $moduleRouteListener->attach($eventManager);

    $this -> initAcl($e);
    $e -> getApplication() -> getEventManager() -> attach('route', array($this, 'checkAcl'));

        $app = $e->getApplication();
        $locator = $app->getServiceManager();
        $authAdapter = $locator->get('AuthService');

        if($authAdapter->hasIdentity() === true){
        //is logged in
        }else{
                //user is not logged in...redirect to home
        }

}

public function getConfig()
{
    return include __DIR__ . '/config/module.config.php';
}

public function getAutoloaderConfig()
{
    return array(
        'Zend\Loader\StandardAutoloader' => array(
            'namespaces' => array(
                __NAMESPACE__ => __DIR__ . '/src/' . __NAMESPACE__,
            ),
        ),
    );
}

 public function getServiceConfig() {

    return array(
        'factories' => array(
            'AuthService' => function($sm) {

                $dbAdapter = $sm->get('Zend\Db\Adapter\Adapter');
                $dbTableAuthAdapter = new DbTableAuthAdapter($dbAdapter, 'user', 'username', 'password', 'MD5(?)');

                $authService = new AuthenticationService();
                $authService->setAdapter($dbTableAuthAdapter);

                return $authService;
            },
        ),
    );
}

public function initAcl(MvcEvent $e) {

    $acl = new \Zend\Permissions\Acl\Acl();
    $roles = include __DIR__ . '/config/module.acl.roles.php';
    $allResources = array();
    foreach ($roles as $role => $resources) {

        $role = new \Zend\Permissions\Acl\Role\GenericRole($role);
        $acl -> addRole($role);

        $allResources = array_merge($resources, $allResources);

        //adding resources
        foreach ($resources as $resource) {
            $acl -> addResource(new \Zend\Permissions\Acl\Resource\GenericResource($resource));
        }
        //adding restrictions
        foreach ($allResources as $resource) {
            $acl -> allow($role, $resource);
        }
    }
    //testing
    //var_dump($acl->isAllowed('admin','home'));
    //true

    //setting to view
    $e -> getViewModel() -> acl = $acl;

}

public function checkAcl(MvcEvent $e) {
    $route = $e -> getRouteMatch() -> getMatchedRouteName();

    $userRole = 'guest';

    if (!$e -> getViewModel() -> acl -> isAllowed($userRole, $route)) {
        $response = $e -> getResponse();
        //location to page or what ever
        $response -> getHeaders() -> addHeaderLine('Location', $e -> getRequest() -> getBaseUrl() . '/404');
        $response -> setStatusCode(303);

    }
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-07T06:09:32.763

我正在看类似的东西；我做了一些挖掘，发现了以下内容

在 onBootstrap 上附加的函数中获取以下内容

```
$routeMatch = $e->getRouteMatch( );
$controllerParamName = \Zend\Mvc\ModuleRouteListener::ORIGINAL_CONTROLLER;
$controller = $routeMatch->getParam( $controllerParamName );
$action = $routeMatch->getParam( 'action' );
$route = $routeMatch->getMatchedRouteName( ); 
```

检查用户是否已登录；如果不是，您将重定向到登录事件

重定向时，您可以在登录事件中传递这 3 个变量（控制器、操作、路由），这些变量默认为 null，如果已定义它们，则在成功登录后，您将重定向到控制器、操作、路由的组合

我仍在编写代码，一旦成功，我将发布希望这会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T21:03:21.027

这是我的代码的一些示例：

```
$controller = $e->getTarget();
$auth = new AuthenticationService();
$is_login = $auth->hasIdentity();

//check if action is login

$params = $e->getApplication()->getMvcEvent()->getRouteMatch()->getParams();

if ($params['action'] == 'login') {

if ($is_login) {
    return $controller->redirect()->toRoute('adminwithlang/adminindex');
}

if (!$is_login) {
return $controller->redirect()->toRoute('adminwithlang/adminauthlogin');
} 
```

示例要点： [https ://gist.github.com/anonymous/5227267](https://gist.github.com/anonymous/5227267)

# php - 如果它显示，为什么不从另一个 PHP 文件中采样位于同一目录中的 PHP 文件的会话变量？

> ID：15578965
> 
> 赞同：0
> 
> 时间：2013-03-22T20:03:40.247
> 
> 标签：php, session, drupal, session-variables

我有一个 Drupal 站点

`mydomain.com/`

在一个完整的 php 块中，我有以下内容：

```
<?php
session_start ();
echo json_encode($_SESSION['playlist']); 
?> 
```

此代码在会话变量示例中正确显示了我的数组：

```
[
    "{\"title\":\"emo\",\"artist\":\"a href=\",\"mp3\":\"\"}",
    "{\"title\":\"emo\",\"artist\":\"a href=\",\"mp3\":\"\"}",
    "{\"title\":\"Hablando Claro Pegando Fuerte\",\"artist\":\"\",\"mp3\":\"http://red.comppa.com/sites/default/files/audios/01%20radionovela%20hablando%20claro%20pegando%20fuerte.mp3\"}",
    "{\"title\":\"desobedicia\",\"artist\":\"a href=\",\"mp3\":\"\"}"
] 
```

但是，如果我有另一个`getsession.php`使用相同代码调用的文件：

```
<?php
session_start ();
echo json_encode($_SESSION['playlist']); 
?> 
```

然后我 dirigo 向`mydomain.com/getsession.php`我展示：

```
null 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:21:19.310

解决了：

```
<?php
//set the working directory 
chdir('/home/www/mydrupal/');
define('DRUPAL_ROOT', getcwd());

//Load Drupal
require_once './includes/bootstrap.inc';
drupal_bootstrap(DRUPAL_BOOTSTRAP_FULL);

echo json_encode($_SESSION['playlist']); 
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T20:15:09.913

检查包含文件的顺序。您可能正在尝试在设置之前回显会话的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T20:30:46.513

**session_start**

> 如果会话无法启动，则返回 FALSE。以前返回 TRUE。（[来源](http://php.net/manual/en/function.session-start.php)）

**也许，在 session_start 被调用之前，内容被发送到浏览器。结果会产生错误！**

更多信息[在](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)相关帖子中。

# r - 即使从第一个请求开始，我也达到了 twitteR 的速率限制

> ID：15578971
> 
> 赞同：2
> 
> 时间：2013-03-22T20:04:11.657
> 
> 标签：r, twitter, limit, blocking, rate

正如我在标题中所说，即使从第一个请求开始，我也总是（据说）达到速率限制。因此，我无法从 twitter 下载任何内容。

这是我在 R 中的示例代码：

```
tweets = searchTwitter('blabla', n=1, cainfo = "cacert.pem") 
```

我不断收到这条消息：

```
[1] "Too Many Requests"
[1] "Rate limited .... blocking for a minute ..." 
```

我可以尝试什么？

* * *

```
reqURL <- "http://api.twitter.com/oauth/request_token"
accessURL <- "http://api.twitter.com/oauth/access_token"
authURL <- "http://api.twitter.com/oauth/authorize"
consumerKey <- "KEY"
consumerSecret <- "KEY"
twitCred <- OAuthFactory$new(consumerKey=consumerKey,
                         consumerSecret=consumerSecret,
                         requestURL=reqURL,
                         accessURL=accessURL,
                         authURL=authURL)
twitCred$handshake(cainfo = system.file("CurlSSL", "cacert.pem", package = "RCurl"))
registerTwitterOAuth(twitCred)
tweets = searchTwitter('blabla', n=10, cainfo = "cacert.pem") 
```

代码如上。没有任何明显的原因，我设法下载了一些推文，但有时我仍然不断收到这条消息。

此外，我正在搜索一个字符串，但我无法找到它，尽管我 100% 确定它存在于 twitter 上。我收到一条消息，表明没有从服务器检索到响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T06:07:45.953

I got the same problem, too. But I think the reason is that the new Twitter API sets its "rate limits" to only allow 15 calls in 15 minutes.

Therefore, if you exceed the rate limitation, your account will be blocked for a while... But you'll be able to access the data after another 15 mins. (It works for me! You may try.)

For your reference: [http://www.tweetings.net/site/2012/10/rate-limits-and-the-new-twitter-api/](http://www.tweetings.net/site/2012/10/rate-limits-and-the-new-twitter-api/)

# ios - 未找到 Availability.h 文件 - Xcode 4.6.1 - Objective-C

> ID：15578978
> 
> 赞同：1
> 
> 时间：2013-03-22T20:04:50.627
> 
> 标签：ios, objective-c, xcode

在我将 XCode 更新到 4.6.1 版本后，当我打开在上一个 Xcode 版本中开发的项目时，当我运行应用程序时，它给了我一个错误，在`#import <Availability.h>`（我不知道该代码行在哪个类中）。我得到的错误是：“找不到'Availability.h'文件”。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T20:07:33.503

问题可能出在`Foundation.framework`，尝试在构建阶段删除框架并将其再次添加到您的项目中。一旦你再次添加它，只需清理并构建你的项目，它就会解决你的问题。

如果通过上述操作不能解决您的问题，那么恐怕您将不得不重新安装 xcode。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T20:12:50.173

在 Target->Build Phases-=>Link Binary with Libraries 删除 Foundation.Framework 并再次添加

# c - 无法从 Fortran 90 中返回的 C 浮点指针获取数据

> ID：15578979
> 
> 赞同：2
> 
> 时间：2013-03-22T20:05:04.147
> 
> 标签：c, pointers, fortran, fortran90, fortran-iso-c-binding

我正在从 Fortran 90 程序调用 C 函数（**我必须使用 Fortran 90**）。这个 C 函数接受几个参数并返回一个浮点指针。我似乎无法在 Fortran 代码中正确打印返回的数据。它只是显示一个非常大的数字（我假设它是指针的地址。）

我已经成功地将 REAL Fortran 变量作为参数传递，让 C 函数设置它们（如 Fortran 通过引用传递）并随后访问数据。但是，我必须将指针作为返回变量返回，因为这是旧函数使用的方法（我正在重新实现。）

Fortran 90 中有没有办法从 C 函数返回的非字符（实数、整数等）指针访问数据？（请注意：我**不能**使用 ISO C 绑定，因为这仅适用于 Fortran 2003 及更高版本。）我已经在下面说明了我正在尝试做的事情......

谢谢！

## Fortran 程序

```
program test_real
    real, dimension(10) :: realpt
    integer nbr
    integer i
    real :: a=1.0
    real :: b=2.0
    real :: c=3.0

    nbr = 9
    realpt = getpointer(a, b, c)

    do 10 i = 1, nbr
        print *,"return: ",realpt(i)
10  continue

stop
End 
```

## C 函数

```
float* getpointer(float *a, float *b, float *c) {
    float *rfl = (float *) calloc(9,sizeof(float));
    int i=0;

    for(i=0;i<3;i++) {
        rfl[i] = *a;
    }
    for(i=3;i<6;i++) {
        rfl[i] = *b;
    }
    for(i=6;i<9;i++) {
        rfl[i] = *c;
    }
    return(rfl);
}   // End of getpointer function 
```

## 输出

```
return:   3.1661344E+07
return:   3.1661344E+07
return:   3.1661344E+07
return:   3.1661344E+07
return:   3.1661344E+07
return:   3.1661344E+07
return:   3.1661344E+07
return:   3.1661344E+07
return:   3.1661344E+07 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T20:22:14.497

此声明“我不能使用 ISO C 绑定，因为它仅适用于 Fortran 2003 及更高版本。” 很奇怪；当前任何支持 F90 的编译器也支持 F2003 的大部分或全部。

正如 Eric Urban 指出的那样，在 fortran 中进行数组分配当然是最简单的（实际上您可以使用数组切片或广播来更轻松地进行填充）。但是假设您需要调用一些采用这种形式的 C 例程，只需使用[ISO_C_BINDING](https://stackoverflow.com/tags/fortran-iso-c-binding/info)模块来实现 C 和 fortran 之间的可移植接口：

```
program test_real
    use, intrinsic :: iso_c_binding
    real(kind=c_float), pointer :: realpt(:)
    type(c_ptr) :: ptr
    integer :: nbr
    integer :: i
    real :: a=1.0
    real :: b=2.0
    real :: c=3.0

    interface
       function getpointer(a, b, c) result(ptr) bind(C,name="getpointer")
           use, intrinsic :: iso_c_binding
           implicit none
           type(c_ptr) :: ptr
           real(kind=c_float) :: a, b, c
        end function getpointer
      end interface

    nbr = 9
    ptr = getpointer(a, b, c)
    call c_f_pointer(ptr, realpt, [nbr])

    print *,"return: ",realpt
end 
```

编译和运行给出

```
$ gcc -c fooc.c
$ gfortran -c foo.f90
$ gfortran -o foo foo.o fooc.o
$ ./foo
 return:    1.0000000       1.0000000       1.0000000       2.0000000       2.0000000       2.0000000       3.0000000       3.0000000       3.0000000 
```

如果您尝试以某种方式执行此操作来绕过 7 年以上的编译器限制，那么有很多脆弱的不可移植的方法可以做到这一点，但这真的不值得心痛。

**更新**：如果您不能接触（甚至重新编译）一些较旧的 fortran，那么您至少可以为 C 程序制作一个 F2003 包装器并拥有较旧的 fortran 链接：

foowrapper.f90：

```
module wrapper

contains

subroutine wrapgetpointer(outarr)
    use, intrinsic :: iso_c_binding
    implicit none

    real, intent(out), dimension(:) :: outarr
    real(kind=c_float), pointer :: realpt(:)
    type(c_ptr) :: ptr
    integer :: nbr = 9
    real(kind=c_float) :: a, b, c

    interface
       function getpointer(a, b, c) result(ptr) bind(C,name="getpointer")
           use, intrinsic :: iso_c_binding
           implicit none
           type(c_ptr) :: ptr
           real(kind=c_float) :: a, b, c
        end function getpointer
      end interface

    a = 1.
    b = 2.
    c = 3.
    ptr = getpointer(a, b, c)
    call c_f_pointer(ptr, realpt, [nbr])

    outarr(1:nbr) = realpt
end subroutine wrapgetpointer

end module wrapper 
```

foo.f90：

```
program test_real
    use wrapper

    real, dimension(9) :: array
    call wrapgetpointer(array)

    print *,"return: ",array
end 
```

编译和运行：

```
$ gfortran -c foowrapper.f90
$ gfortran -c foo.f90
$ gcc -c fooc.c
$ gfortran -o foo foo.o foowrapper.o fooc.o
$ ./foo
 return:    1.0000000       1.0000000       1.0000000       2.0000000       2.0000000       2.0000000       3.0000000       3.0000000       3.0000000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T20:28:46.903

在您的代码中设置隐式 none，您就会明白为什么没有得到您想要的结果。

Fortran 中的数组值函数通常通过传递一个“隐藏”参数来实现，该参数是函数应该写入其结果的内存地址。这与您的用例没有太多共同之处。

如果您坚持使用 Fortran 90，则无法做到这一点。您将需要使用某种扩展。

请注意，来自 F2003 的 C 互操作性是对 F90 的扩展...

（Cray 指针也是如此，但如果你必须使用扩展，我知道我会选择哪一个。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T19:33:59.300

我最终没有实施包装解决方案。对于无法使用 Fortran 2003 的情况，似乎对我有用的是 Cray 指针。我不确定这些在较新的编译器中的可行性，但对于我正在使用的 F90 编译器（英特尔 ifort 9.1），它工作得很好。

Cray 指针可以与返回的 C 指针一起使用。为了在 Fortran 中将 Cray 指针声明为浮点数组，例如：

```
real, dimension(10) :: realpt
pointer (ptemp,realpt) 
nbr = 9 
```

然后你可以像这样调用C函数：

```
 ptemp = getpointer(a, b, c)    
    do 10 i = 1, nbr        
        print *,"return: ",realpt(i)
10  continue 
```

这是一个解释如何使用 Cray 指针的资源：

[http://gcc.gnu.org/onlinedocs/gfortran/Cray-pointers.html](http://gcc.gnu.org/onlinedocs/gfortran/Cray-pointers.html)

# java - 如何将新行 (\n) 放入 toString？

> ID：15578981
> 
> 赞同：-5
> 
> 时间：2013-03-22T20:05:08.337
> 
> 标签：java

如何在 toString 中添加*\n ？*

```
public String toString() {
    return (friendName+houseNumber+road);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T20:08:22.127

采用

```
return (friendName+"\n"+houseNumber+"\n"+road); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T20:07:01.557

你没有正确连接，它必须是这样的：

```
return (friendName + "\n" + houseNumber + "\n" + road); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T20:10:43.240

我会使用 StringBuilder 并且还可以通过查询行分隔符来使您的代码平台不可知

```
public String toString() {
    StringBuilder sb = new StringBuilder();
    sb.append(friendName).append(System.getProperty("line.separator")); 
    sb.append(houseNumber).append(System.getProperty("line.separator")); 
    sb.append(road)); 
    return sb.toString();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T20:18:28.690

Addict 的回答是正确的，所以：

```
return (friendName+"\n"+houseNumber+"\n"+road); 
```

您可以提前尝试编写以下内容：

```
return (friendName+"\r\n"+houseNumber+"\r\n"+road); 
```

因为它依赖于操作系统：Windows：\r\n，Unix：\n，Mac：\r

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T20:08:21.783

改变这个：

```
return (friendName+"\n+houseNumber"\n"+road); 
```

对此：

```
return (friendName+"\n"+houseNumber+"\n"+road); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-22T20:23:01.610

也许你可以试试：

```
 @Override
    public String toString(){

        return ""+friendName + "\n\n" + houseNumber + "\n\n" + road+"";
    } 
```

# php - 从每个 user_id 不同的表中选择所有列

> ID：15578986
> 
> 赞同：1
> 
> 时间：2013-03-22T20:05:25.083
> 
> 标签：php, mysql, sql

我正在创建一个活动提要，显示我的用户活动，该活动仅限于最后 5 行。

```
SELECT * FROM activity ORDER BY date desc LIMIT 5 
```

问题是我不希望活动提要在任何时候都被同一个用户弄乱，所以我想检索 user_id 彼此不同的最后 5 个结果。

我怎么能这样做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T20:08:09.087

这应该有效：

`SELECT user_id, MAX(date) FROM activity GROUP BY user_id ORDER BY date DESC LIMIT 5`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T21:18:51.553

如果每个用户都没有多个`max(date)`，则可以使用：

```
SELECT *
FROM   activity
WHERE  (user_id, `date`) IN (
  SELECT * FROM (
    SELECT   user_id, max(`date`)
    FROM     activity
    GROUP BY user_id
    ORDER BY max(`date`) DESC
    LIMIT 5) s
  )
ORDER BY `date` DESC 
```

请[在此处](http://sqlfiddle.com/#!2/c220c/5)查看小提琴。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T20:09:13.413

我想使用这样的查询会很容易

```
SELECT DISTINCT activity.user_id,activity.* order by date DESC limit 5 
```

Mysql Distinct 参考：[http ://dev.mysql.com/doc/refman/5.1/en/distinct-optimization.html](http://dev.mysql.com/doc/refman/5.1/en/distinct-optimization.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T20:09:41.560

它可以帮助你。

```
SELECT * FROM activity GROUP BY user ORDER BY date DESC LIMIT 5 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T20:17:09.860

试试这个查询，SELECT DISTINCT * FROM activity ORDER BY date desc LIMIT 5

# telerik - Rad Gridview 设计未正确显示

> ID：15578991
> 
> 赞同：1
> 
> 时间：2013-03-22T20:05:45.210
> 
> 标签：telerik, telerik-grid

**我对RadGridView**有一个简单的问题

 **标题列与行中的列不匹配。贝娄我添加了 RadGridVew 的图像。 ![RadGridView 的图像](../Images/7678f63f90b5548f600ab305b76e73a6.png)

这是RadGridview的代码：

```
<telerik:RadGrid ID="RadGrid_othrexp" AllowSorting="true" runat="server"  OnUpdateCommand="RadGrid_othrexp_UpdateCommand"
            OnNeedDataSource="RadGrid_othrexp_NeedDataSource" AutoGenerateColumns="False">
            <ClientSettings>
                <Scrolling AllowScroll="True" UseStaticHeaders="True" ScrollHeight="375px" />
            </ClientSettings>
            <MasterTableView EnableColumnsViewState="false" DataKeyNames="ID" AutoGenerateColumns="false">
                <CommandItemSettings ExportToPdfText="Export to PDF" />
                <RowIndicatorColumn FilterControlAltText="Filter RowIndicator column" Visible="True">
                </RowIndicatorColumn>
                <ExpandCollapseColumn FilterControlAltText="Filter ExpandColumn column" Visible="True">
                </ExpandCollapseColumn>
                <Columns>
                    <telerik:GridEditCommandColumn ButtonType="ImageButton">
                    </telerik:GridEditCommandColumn>
                    <telerik:GridTemplateColumn FilterControlAltText="Filter TemplateColumn1 column"
                        HeaderText="Order Date" UniqueName="TemplateColumn1">
                        <ItemTemplate>
                            <%# Eval("DateOrdered")%>
                        </ItemTemplate>
                        <EditItemTemplate>
                            <asp:TextBox ID="txt_OtherDateOrder" runat="server" Text='<%# Eval("DateOrdered")%>'></asp:TextBox>
                            <asp:CalendarExtender ID="CalendarEx1" runat="server" TargetControlID="txt_OtherDateOrder">
                            </asp:CalendarExtender>
                        </EditItemTemplate>
                    </telerik:GridTemplateColumn>
                    <telerik:GridTemplateColumn FilterControlAltText="Filter TemplateColumn1 column"
                        HeaderText="Required Date" UniqueName="TemplateColumn2">
                        <ItemTemplate>
                            <%# Eval("DateRequired")%>
                        </ItemTemplate>
                        <EditItemTemplate>
                            <asp:TextBox ID="txt_OtherDateRequired" runat="server" Text='<%# Eval("DateRequired")%>'></asp:TextBox>
                            <asp:CalendarExtender ID="CalendarEx2" runat="server" TargetControlID="txt_OtherDateRequired">
                            </asp:CalendarExtender>
                        </EditItemTemplate>
                    </telerik:GridTemplateColumn>
                    <telerik:GridTemplateColumn FilterControlAltText="Filter TemplateColumn1 column"
                        HeaderText="Company" UniqueName="TemplateColumn3">
                        <ItemTemplate>
                            <%# Eval("CompanyName")%>
                        </ItemTemplate>
                        <EditItemTemplate>
                            <asp:SqlDataSource ID="SqlDataSource1" ConnectionString="<%$ ConnectionStrings:cnknoll %>"
                                SelectCommand="select * from  v_EW_Vendors" runat="server"></asp:SqlDataSource>
                            <telerik:RadComboBox ID="Combo_OtherCompany" SelectedValue='<%# Eval("company_recid")%>' runat="server" ProviderName="System.Data.SqlClient"
                                DataSourceID="SqlDataSource1" DataTextField="CompanyName" DataValueField="RecId">
                            </telerik:RadComboBox>
                        </EditItemTemplate>
                    </telerik:GridTemplateColumn>
                    <telerik:GridTemplateColumn FilterControlAltText="Filter TemplateColumn1 column"
                        HeaderText="Description" UniqueName="TemplateColumn4">
                        <ItemTemplate>
                            <%# Eval("LineDesc")%>
                        </ItemTemplate>
                        <EditItemTemplate>
                            <asp:TextBox ID="txt_OtherLineDesc" runat="server" Text='<%# Eval("LineDesc")%>'></asp:TextBox>
                            <asp:RequiredFieldValidator ID="rfv_OtherLineDesc" runat="server" CssClass="validation-error"
                                SetFocusOnError="true" ControlToValidate="txt_OtherLineDesc" ErrorMessage="Description Required"
                                ForeColor="Red" />
                        </EditItemTemplate>
                    </telerik:GridTemplateColumn>
                    <telerik:GridTemplateColumn FilterControlAltText="Filter TemplateColumn1 column"
                        HeaderText="Quantity" UniqueName="TemplateColumn5">
                        <ItemTemplate> 
                         <%# String.Format("{0:n0}", Eval("LineQty"))%>

                        </ItemTemplate>
                        <EditItemTemplate>
                            <asp:TextBox ID="txt_OtherLineQty" runat="server" Text='<%# String.Format("{0:n0}", Eval("LineQty"))%>'></asp:TextBox>
                           <%-- <asp:FilteredTextBoxExtender ID="fte_OtherLineQty" runat="server" Enabled="True"
                                TargetControlID="txt_OtherLineQty" ValidChars="0123456789" FilterType="Custom"
                                FilterMode="ValidChars">
                            </asp:FilteredTextBoxExtender>--%>
                            <asp:RequiredFieldValidator ID="rfv_OtherLineQty" runat="server" CssClass="validation-error"
                                SetFocusOnError="true" ControlToValidate="txt_OtherLineQty" ErrorMessage="Quantity Required"
                                ForeColor="Red" />
                        </EditItemTemplate>
                    </telerik:GridTemplateColumn>
                    <telerik:GridTemplateColumn FilterControlAltText="Filter TemplateColumn1 column"
                        HeaderText="Unit Price" UniqueName="TemplateColumn6">
                        <ItemTemplate> 
                        <%# String.Format("{0:C3}", Eval("UnitPrice"))%>

                        </ItemTemplate>
                        <EditItemTemplate>
                            <asp:TextBox ID="txt_OtherUnitPrice" runat="server" Text='<%# Eval("UnitPrice")%>'></asp:TextBox>
                           <%-- <asp:FilteredTextBoxExtender ID="fte_OtherUnitPrice" runat="server" Enabled="True"
                                TargetControlID="txt_OtherUnitPrice" ValidChars="0123456789" FilterType="Custom"
                                FilterMode="ValidChars">
                            </asp:FilteredTextBoxExtender>--%>
                            <asp:RequiredFieldValidator ID="rfv_OtherUnitPrice" runat="server" CssClass="validation-error"
                                SetFocusOnError="true" ControlToValidate="txt_OtherUnitPrice" ErrorMessage="Unit Price Required"
                                ForeColor="Red" />
                        </EditItemTemplate>
                    </telerik:GridTemplateColumn>
                    <telerik:GridTemplateColumn FilterControlAltText="Filter TemplateColumn1 column"
                        HeaderText="Total(USD)" UniqueName="TemplateColumn7">
                        <ItemTemplate>
                            <%# String.Format("{0:C3}", Eval("Total_Price"))%>
                        </ItemTemplate>
                    </telerik:GridTemplateColumn>
                    <telerik:GridTemplateColumn FilterControlAltText="Filter TemplateColumn1 column"
                        HeaderText="PO #" UniqueName="TemplateColumn8">
                        <ItemTemplate>
                            <%# String.Format("{0:C3}", Eval("PO_Number"))%>
                        </ItemTemplate>
                        <EditItemTemplate>
                            <asp:TextBox ID="txt_OtherPO_Number" runat="server" Text='<%# Eval("PO_Number")%>'></asp:TextBox>
                        </EditItemTemplate>
                    </telerik:GridTemplateColumn>
                </Columns>
                <EditFormSettings>
                    <EditColumn FilterControlAltText="Filter EditCommandColumn column">
                    </EditColumn>
                </EditFormSettings>
            </MasterTableView>
            <FilterMenu EnableImageSprites="False">
            </FilterMenu>
        </telerik:RadGrid> 
```

期待您的回复谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T07:34:24.503

只需将宽度添加到 100%，如下所示。希望它能解决你的问题**

# xpath - 如何使用属性作为列将 XML 数据导入 Hive

> ID：15578992
> 
> 赞同：1
> 
> 时间：2013-03-22T20:05:46.333
> 
> 标签：xpath, hive, hiveql

我对 HiveQL 很陌生，我有点卡住了：S

我有一个以 xml 格式存储的数据，我想从此 xml 文件中的 Hive 列表中提取字段 (字符串 Titles_2 ， sting Artists_2，字符串 Albums_2) 。

xml数据示例：

```
<?xml version="1.0" encoding="UTF-8"?><MC><SC><S uid="2" gen="" yr="2011" art="Samsung" cmp="&lt;unknown&gt;" fld="/mnt/sdcard/Samsung/Music" alb="Samsung" ttl="Over the horizon"/><S uid="37" gen="" yr="2010" art="Jason Derulo" cmp="&lt;unknown&gt;" fld="/mnt/sdcard/Music/Jason Derulo/Jason Derulo" alb="Jason Derulo" ttl="Whatcha Say"/><S uid="38" gen="" yr="2010" art="Jason Derulo" cmp="&lt;unknown&gt;" fld="/mnt/sdcard/Music/Jason Derulo/Jason Derulo" alb="Jason Derulo" ttl="In My Head"/><S uid="39" gen="" yr="2011" art="Alexandra Stan" cmp="&lt;unknown&gt;" fld="/mnt/sdcard/Music/Alexandra Stan/Mr_ Saxobeat - Single" alb="Mr. Saxobeat - Single" ttl="Mr. Saxobeat (Extended Version)"/><S uid="40" gen="" yr="2011" art="Bushido" cmp="&lt;unknown&gt;" fld="/mnt/sdcard/Music/Bushido/Jenseits von Gut und Böse (Premium Edition)" alb="Jenseits von Gut und Böse (Premium Edition)" ttl="Wie ein Löwe"/><S uid="41" gen="" yr="2011" art="Bushido" cmp="&lt;unknown&gt;" fld="/mnt/sdcard/Music/Bushido/Jenseits von Gut und Böse (Premium Edition)" alb="Jenseits von Gut und Böse (Premium Edition)" ttl="Verreckt"/><S uid="42" gen="" yr="2011" art="Lucenzo" cmp="&lt;unknown&gt;" fld="/mnt/sdcard/Music/Lucenzo/Danza Kuduro (feat_ Don Omar) [From _Fast &amp; Furious 5_] - Single" alb="Danza Kuduro (feat. Don Omar) [From &quot;Fast &amp; Furious 5&quot;] - Single" ttl="Danza Kuduro (feat. Don Omar) [From &quot;Fast &amp; Furious 5&quot;]"/><S uid="121" gen="" yr="701" art="Michael Jackson" cmp="&lt;unknown&gt;" fld="/mnt/sdcard/external_sd/Music/Michael Jackson/Bad [Bonus Tracks]" alb="Bad [Bonus Tracks]" ttl="Voice-Over Intro/Quincy Jones Interview #1 [*]"/></SC><PC/></MC> 
```

此数据存储在名为 xmlout_2(line) 的表中。

现在我运行了这些 xpath 命令来构建 HiveQL 表 Stores，但它只添加了每行的第一首歌曲。知道为什么会这样吗？

```
create view xmlout_2(line) as SELECT * from hivetesttable;

    CREATE VIEW Stores(Titles_2,  Artists_2, Albums_2) AS
    SELECT 
    xpath_string ( line, '/MC/SC/*/@ttl'),
    xpath_string (line, 'MC/SC/*/@art'),
    xpath_string (line, '/MC/SC/*/@alb')
    FROM  xmlout_2; 
```

如果我尝试使用 xpath 而不是 xpath_string 我得到一个字符串数组而不是字符串。

```
create view xmlout_2(line) as SELECT * from hivetesttable;

    CREATE VIEW Stores(Titles_2,  Artists_2, Albums_2) AS
    SELECT 
    xpath ( line, '/MC/SC/*/@ttl'),
    xpath (line, 'MC/SC/*/@art'),
    xpath (line, '/MC/SC/*/@alb')
    FROM  xmlout_2; 
```

我正在考虑在那之后爆炸列，但爆炸只能在单个列上使用。

# windows-phone-8 - 获取设备上的可用空间 - Windows phone 8

> ID：15578993
> 
> 赞同：1
> 
> 时间：2013-03-22T20:05:47.997
> 
> 标签：windows-phone-8

是否可以获得设备和外部存储上的可用空间？

我需要知道用户是否有足够的空间从服务器下载文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T09:12:40.167

这可能是您正在寻找的吗？

```
IsolatedStorageFile.GetUserStoreForApplication().AvailableFreeSpace; 
```

根据msdn[文档](http://msdn.microsoft.com/en-US/library/windowsphone/develop/system.io.isolatedstorage.isolatedstoragefile.availablefreespace%28v=vs.105%29.aspx)

> 获取一个值，该值表示可用于独立存储的可用空间量。

# sql - 用于创建分组数据收集列表的 ERD 草案

> ID：15578997
> 
> 赞同：0
> 
> 时间：2013-03-22T20:05:57.367
> 
> 标签：sql, sql-server, database-design, relational-database

[这是关于数据收集元素集的表格设计](https://stackoverflow.com/q/15512310/2188687)的后续问题，因为我仍在尝试提出设计。

我想做的是能够预先定义什么研究/协议对需要作为数据收集来显示，就像待办事项列表或清单一样，可以在患者就诊时进行跟踪。附件是迄今为止我在每个表中的可能示例，但我从未实现超类型/子类型关系，所以我不确定我是否走在正确的轨道上。它是否过度标准化？还是我什至应该费心使用超类型/子类型？

任何想法/反馈都会有所帮助。

**编辑**

@YoungBob 首先非常感谢您的意见。FormId(PK) 也是 DataCollectionId 的外键，因此我可以通过 DataCollection.DatacollectionId = Form.FormId 查询具有相同 ID 的表以获取两个级别属性，不是吗？

我不会提供动态创建这些表单的界面，这就是为什么我不想包含部分或问题类型，但我喜欢包含版本控制的想法。

正如您所提到的，我将使用测试数据加载它，以查看是否应该对任何表进行反规范化。

自从我发布问题以来，我已经按照您以这种方式建议的那样添加了 DataCollectionIntervals 的链接 - 它看起来好多了吗？

[http://imageshack.us/f/716/erd02.png/](http://imageshack.us/f/716/erd02.png/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:25:11.550

架构设计对我来说看起来不错，至少基于您在这篇文章和上一篇文章中提供的信息。最佳实践是从规范化设计开始，然后在您认为需要查询优化的地方取消规范化。我猜数据库不会很大或事务率不会很高，所以性能应该不是问题，所以我会坚持规范化设计。根据经验，如果您需要编写连接超过 4 个表的查询（至少在 sql server 中），非规范化可能是值得的，但我真的看不出这种模式设计会发生这种情况。

正如您在问题中所建议的那样，Form 和 Sample 表可以通过在 DataCollection 表中包含两者的属性来成为非规范化的候选者，但这将取决于 Form 和 Sample 有多少其他属性以及两者共有多少。

我会给出的一个提示是考虑给表单表一个短字符串的主键，假设你有相当标准的表单，我发现浏览表时生活更轻松（例如，有点像 HMRC 表单 P45、P60 等. 或机场代码 LHR、JFK 等），因为您不必继续加入其他表来记住特定 int ID 所指的形式。CHAR(3) 字段也比 INT 使用更少的存储空间。这可能适用于其他表，如 DataCollectionType。但这可能是个人喜好问题。

根据我们在上一篇文章中的讨论，我们讨论的 DataFrequency 表可能应该是指向 DataCollection 表的多 1 链接。也许 DataCollectionIntervals 可能是一个更好的名称。

设计中要考虑的另一件事是，一些经常访问的表是否会从垂直拆分中受益。我的意思是如果表有很宽的行，即很多属性或存储饥渴的属性，如 VARCHAR(MAX) 不经常访问的属性，可以拆分为一个单独的表，其中包含 1-1 链接，这可以显着提高涉及该表的查询性能. 但正如我所说，我并不认为性能是您计划的数据库大小的问题，并且假设您将使用 SQL Server 之类的东西。

最后一件事……表格的结构可能比目前所指示的模式要复杂一些，例如表格通常分为几个部分，所需的问题类型可能非常复杂，例如多项选择、文本、分支、条件。表单也可以存在于不同的版本中（使用活动标志来识别表单表中当前活动的版本）。我自己研究过使用 queXML 来设计一份 XML 问卷，但我认为这对于我需要的东西来说有点矫枉过正，所以我决定使用我自己的一个更简单的 XML 模式，它可以导入到数据库中。

# javascript - 为接受数组的 Knockout 创建自定义 CSS 类绑定

> ID：15578999
> 
> 赞同：0
> 
> 时间：2013-03-22T20:06:01.923
> 
> 标签：javascript, knockout.js

我正在尝试修改[此页面](https://github.com/SteveSanderson/knockout/wiki/Bindings---class)`class`上显示的绑定：

```
ko.bindingHandlers['class'] = {
    'update': function(element, valueAccessor) {
        if (element['__ko__previousClassValue__']) {
            ko.utils.toggleDomNodeCssClass(element, element['__ko__previousClassValue__'], false);
        }
        var value = ko.utils.unwrapObservable(valueAccessor());
        ko.utils.toggleDomNodeCssClass(element, value, true);
        element['__ko__previousClassValue__'] = value;
    }
}; 
```

所以，目前，我的是这样的：

```
ko.bindingHandlers.cssClass = {
    update: function (element, valueAccessor) {
        var cssClass = ko.utils.unwrapObservable(valueAccessor()),
            prevCssClass = element['__ko__previousClassValue__'];

        console.log("Previous:", prevCssClass);
        console.log("Current:", cssClass);

        if (Object.prototype.toString.call(prevCssClass) === '[object Array]') {
            ko.utils.arrayForEach(prevCssClass, function (classAccessor) {
                var value = ko.utils.unwrapObservable(classAccessor);
                ko.utils.toggleDomNodeCssClass(element, value, false);
            });
        } else if (prevCssClass) {
            ko.utils.toggleDomNodeCssClass(element, prevCssClass, false);
        }

        if (Object.prototype.toString.call(cssClass) === '[object Array]') {
            ko.utils.arrayForEach(cssClass, function (classAccessor) {
                var value = ko.utils.unwrapObservable(classAccessor);
                ko.utils.toggleDomNodeCssClass(element, value, true);
            });
        } else if (cssClass) {
            ko.utils.toggleDomNodeCssClass(element, cssClass, true);
        }

        element['__ko__previousClassValue__'] = cssClass;
    }
}; 
```

我[创建了一个](http://jsfiddle.net/kamranayub/3ahUA/)你可以玩的小提琴。我的问题是，第一次单击“更改”时，这就像一个魅力，但在那之后的任何时候，**对于****可观察数组**`prevCssClass`来说都是不正确的（单个效果很好）......它反映了实际上不应该是以前的值. 为什么？我不知道为什么会这样，对我来说一切都很好。**`multiple`**`cssClass`

错误的控制台输出是：

```
Previous: undefined
Current: ["blue","small"]

Previous: ["blue"]
Current: ["blue"]

Previous: ["blue","big"]
Current: ["blue","big"] 
```

正确的输出应该是：

```
Previous: undefined
Current: ["blue","small"]

Previous: ["blue","small"]
Current: ["blue"]

Previous: ["blue"]
Current: ["blue","big"] 
```

我正在 Chrome 中进行测试。

## 更新：

答案如下。如果你有兴趣，这个新绑定的要点在这里（全部清理）：

[https://gist.github.com/kamranayub/5224521](https://gist.github.com/kamranayub/5224521)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T20:19:06.857

这是我在某处捡到的一个 javascript 小技巧……也许是 jQuery 的源代码，我不记得了。

关键是创建数组的副本。使用`.concat()`基本上附加一个空数组会强制 Javascript 创建现有数组的副本。

```
if (Object.prototype.toString.call(prevCssClass) === '[object Array]') {
    prevCssClass = prevCssClass.concat(); 
```

这允许您存储当前数组的历史副本。对原始对象的任何修改都不会影响您的“克隆”数组。