# StackOverflow 问答 15745000-15745999

# php - simplexml 警告和错误

> ID：15745000
> 
> 赞同：-1
> 
> 时间：2013-04-01T14:07:42.073
> 
> 标签：php, simplexml

我在使用一些解析 xml 文件的 php 脚本时遇到问题。这些脚本已经运行了几个月没有错误，今天突然崩溃了。没有对代码或环境进行任何更改。我对php比较陌生，所以任何帮助将不胜感激。

这是我看到的错误：

```
Warning: simplexml_load_file() [function.simplexml-load-file]: c:/server/public_html/dev/temp.xml:1: parser error : Opening and ending tag mismatch: HR line 1 and body in C:\Server\public_html\dev\index.php on line 31

Warning: simplexml_load_file() [function.simplexml-load-file]: LED).</u></p><HR size="1" noshade="noshade"><h3>Apache Tomcat/6.0.32</h3></body> in C:\Server\public_html\dev\index.php on line 31

Warning: simplexml_load_file() [function.simplexml-load-file]: ^ in C:\Server\public_html\dev\index.php on line 31

Warning: simplexml_load_file() [function.simplexml-load-file]: c:/server/public_html/dev/temp.xml:1: parser error : Opening and ending tag mismatch: HR line 1 and html in C:\Server\public_html\dev\index.php on line 31

Warning: simplexml_load_file() [function.simplexml-load-file]: u></p><HR size="1" noshade="noshade"><h3>Apache Tomcat/6.0.32</h3></body></html> in C:\Server\public_html\dev\index.php on line 31

Warning: simplexml_load_file() [function.simplexml-load-file]: ^ in C:\Server\public_html\dev\index.php on line 31

Warning: simplexml_load_file() [function.simplexml-load-file]: c:/server/public_html/dev/temp.xml:1: parser error : Premature end of data in tag body line 1 in C:\Server\public_html\dev\index.php on line 31

Warning: simplexml_load_file() [function.simplexml-load-file]: u></p><HR size="1" noshade="noshade"><h3>Apache Tomcat/6.0.32</h3></body></html> in C:\Server\public_html\dev\index.php on line 31

Warning: simplexml_load_file() [function.simplexml-load-file]: ^ in C:\Server\public_html\dev\index.php on line 31

Warning: simplexml_load_file() [function.simplexml-load-file]: c:/server/public_html/dev/temp.xml:1: parser error : Premature end of data in tag html line 1 in C:\Server\public_html\dev\index.php on line 31

Warning: simplexml_load_file() [function.simplexml-load-file]: u></p><HR size="1" noshade="noshade"><h3>Apache Tomcat/6.0.32</h3></body></html> in C:\Server\public_html\dev\index.php on line 31

Warning: simplexml_load_file() [function.simplexml-load-file]: ^ in C:\Server\public_html\dev\index.php on line 31

Warning: Invalid argument supplied for foreach() in C:\Server\public_html\dev\index.php on line 35 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-18T21:10:57.513

请检查您的 post 变量语法（例如，某些 api 不像 html 标签等）。找出您的错误在哪里非常重要。使用至少 2 种调试方法。

例如在下面使用并检查您的发送数据：

```
file_put_contents("/your folder/page.txt", $post_data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T17:59:28.650

在我看来，您正在处理的“XML”实际上是一个错误页面，采用 HTML 格式，由您尝试从中获取 XML 的服务器返回。

尝试在浏览器中打开您传递到的 URL `simplexml_load_file()`，或转储结果`file_get_contents($your_url_here)`以查看错误消息的实际内容。

# android - 如何根据计算的角度在地图上显示方向（以度为单位）

> ID：15745002
> 
> 赞同：2
> 
> 时间：2013-04-01T14:08:10.050
> 
> 标签：android, google-maps, geometry, compass-geolocation

我已经计算出两个纬度和经度坐标之间的角度，如下所示。它以弧度返回角度为 3，以度为单位返回 193。我想根据这个角度在地图上显示箭头标记。如何根据这个角度显示移动的对象方向？

```
public static double getAngle(double lat1, double lon1, double lat2, double lon2)
    {
        //Formulas

    //θ =   atan2(  sin(Δlong).cos(lat2),cos(lat1).sin(lat2) − sin(lat1).cos(lat2).cos(Δlong) )
    // Δlong = long2 - long1
    Log.i("angle", "Inside getAngle");
    double latitude1 = Math.toRadians(lat1);
    double longitude1 = Math.toRadians(lon1);
    double latitude2 = Math.toRadians(lat2);
    double longitude2 = Math.toRadians(lon2);

    double dlong = Math.toRadians(longitude2-longitude1);

    double y = Math.sin(dlong) * Math.cos(latitude2);
    double x = Math.cos(latitude1)*Math.sin(latitude2) - Math.sin(latitude1)*Math.cos(latitude2)*Math.cos(dlong);
    double angle= Math.atan2(y, x);

    if (angle < 0)
        angle = Math.abs(angle);
    else
        angle = 2*Math.PI - angle;

    Log.i("angle", String.valueOf(angle)+" in radians");

    angle=Math.toDegrees(angle);
    Log.i("angle", String.valueOf(angle)+" in degrees");

    return angle;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T05:46:48.557

我在地图上以相同的角度获得了角度和旋转箭头图像。这与路线的方向相似。

```
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Matrix;

/* inside for loop of all Latitude Longitude values */
float angle=(float)finalBearing(previousLocationLatitude, previousLocationLongitude, currentLocationLatitude, currentLocationLongitude);

Bitmap sprite = BitmapFactory.decodeResource(this.getResources(),R.drawable.dir_green_image);

Matrix mat = new Matrix();
mat.preRotate(angle);///in degree
Bitmap mBitmap = Bitmap.createBitmap(sprite, 0, 0, sprite.getWidth(), sprite.getHeight(), mat, true);

mMap.addMarker(new MarkerOptions().position(new LatLng(currentLocationLatitude, currentLocationLongitude)).icon(BitmapDescriptorFactory.fromBitmap(mBitmap)).anchor((float)0.5, (float)0.5));
/* inside for loop of all Latitude Longitude values */

static public double initialBearing (double lat1, double long1, double lat2, double long2)
{
    return (_bearing(lat1, long1, lat2, long2) + 360.0) % 360;
}

static public double finalBearing(double lat1, double long1, double lat2, double long2)
{
    return (_bearing(lat2, long2, lat1, long1) + 180.0) % 360;
}

static private double _bearing(double lat1, double long1, double lat2, double long2)
{
    double degToRad = Math.PI / 180.0;
    double phi1 = lat1 * degToRad;
    double phi2 = lat2 * degToRad;
    double lam1 = long1 * degToRad;
    double lam2 = long2 * degToRad;

    return Math.atan2(Math.sin(lam2-lam1)*Math.cos(phi2),
        Math.cos(phi1)*Math.sin(phi2) - Math.sin(phi1)*Math.cos(phi2)*Math.cos(lam2-lam1)
    ) * 180/Math.PI;
} 
```

# loops - 带计数器的 xsl-fo 循环

> ID：15745006
> 
> 赞同：0
> 
> 时间：2013-04-01T14:08:22.053
> 
> 标签：loops, xsl-fo

我正在使用 xsl-fo 和 xml 来生成报告。我有一个查询，它从表中获取值以放置在 pdf 上。很容易。我正在根据父子关系进行查询。例如，pdf 显示两个部分：职位及其职责。起初，这是一对一的关系。现在它已经变成了一对多的关系。所以我需要一种在 pdf 上显示职位的方法，然后是职责 A，然后是职责 2，依此类推。责任部分有一个 Mod_Num (1,2,3...)。所以我想知道是否有任何方法可以在 xsl-fo 中循环以获取特定职位的所有责任。我正在考虑在查询中使用 where 子句来提取正确的信息

```
Where Mod_Num = 'xsl-counter' 
```

类似的东西

希望我的例子不是太粗略。任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-20T01:09:08.713

我不知道您是否可以仅使用 XSL-FO 来做到这一点。如果它也使用 FTL（如在 moqui 或 ofbiz 中），您可以这样做：

您可以使用 <#assign x = 0/> 来设置变量。

然后使用 <#list 责任作为 r>

在 <#list> 中，您可以执行 <#assign x = x+1/>。

就在 <#list> 内部，您可以使用 <#if>。所以像：

```
<#assign x = 0/>
<#list responsibilities as r>
    <#if x == 0>
        <fo:block>Responsibility 1: ${r.text}</fo:block>
    <#elseif x == 1>
        <fo:block>Responsibility 1: ${r.text}</fo:block>
    </#if>
    <#assign x = x+1/>
</#list> 
```

我知道这可能不是您正在做的事情，但是如果没有更多详细信息，很难知道。希望它会帮助你。

# c# - LINQ返回一组结果

> ID：15745007
> 
> 赞同：0
> 
> 时间：2013-04-01T14:08:25.770
> 
> 标签：c#, asp.net, .net, linq

我有一些设置用户属性的代码，如下所示：

```
us = new UserSession();
us.EmailAddr = emailAddr;
us.FullName = fullName;
us.UserROB = GetUserROB(uprUserName);
us.UserID = GetUserID(uprUserName);
us.UserActive = GetUserActive(uprUserName); 
```

where`GetUserROB`和所有看起来都像这样`GetUserID`：`GetUserActive`

```
private static string GetUserActive(string userName)
{
    using (Entities ctx = CommonSERT.GetContext())
    {
        var result = (from ur in ctx.datUserRoles
                       where ur.AccountName.Equals(userName, StringComparison.CurrentCultureIgnoreCase)
                       select new
                       {
                           Active = ur.active
                       }).FirstOrDefault();

        if (result != null)
           return result.Active;
        else
           return "N";
     }
  } 
```

它有效，但我认为这不是正确的方法。如何在一次 LINQ 调用中分配 userROB、ID 和 Active 属性？不必有 3 个单独的功能来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T14:12:15.217

您可以创建一个接受`UserSession`对象作为参数的方法，然后在其中设置所有三个属性。我`GetUserActive`在这里改变了你的一点：

```
private static void GetUserData(string userName, UserSession user)
    {
        using (Entities ctx = CommonSERT.GetContext())
        {
            var result = (from ur in ctx.datUserRoles
                          where ur.AccountName.Equals(userName, StringComparison.CurrentCultureIgnoreCase)
                          select new
                          {
                              Active = ur.active,
                              ID = ur.ID,
                              //...select all properties from the DB
                          }).FirstOrDefault();

            if (result != null)
                user.UserActive = result.Active;
                user.UserID = result.ID;
                //..set all properties of "user" object
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T14:16:30.163

如果我理解正确，我相信您可以执行以下操作：

```
private static void GetUserData(string userName, UserSession userSession)
{
    using (Entities ctx = CommonSERT.GetContext())
    {
        var result = (from ur in ctx.datUserRoles
                      where ur.AccountName.Equals(userName, StringComparison.CurrentCultureIgnoreCase)
                      select new
                      {
                          UserActive = ur.active,
                          UserROB = ur.ROB,
                          UserID = ur.ID
                      }).FirstOrDefault();

    }

    if (result != null) {
        userSession.UserActive = result.UserActive;
        userSession.UserROB  = result.UserROB;
        userSession.UserID = result.UserID;
    }

} 
```

您可以在其中`select new`放置任意数量的属性，这样您就可以在一次往返中从数据库中获取多个属性，并在以后进行处理。

在我给出的示例中，我将 UserSession 作为参数传递，无论如何，您已经拥有其他属性已经从其他方法填充。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T14:11:48.730

那么您可能会考虑规范化您的域模型并具有`User`type 属性`User`，然后您的方法将返回所有相关的用户数据。

# delphi - Delphi - 绘制 TDBGrid 后代的问题

> ID：15745008
> 
> 赞同：3
> 
> 时间：2013-04-01T14:08:26.253
> 
> 标签：delphi, delphi-xe

我编写了一个 TDBGrid 后代组件，它显示当前所选行的不同 blob 字段的内容，每个字段都在 TJvDBrichEdit 中。用于显示 blob 字段内容的DrawColumnCell[代码：](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.DBGrids.TCustomDBGrid.DrawColumnCell)

```
procedure TMyDBGrid.DrawColumnCell(const Rect: TRect; DataCol: Integer; Column: TColumn; State: TGridDrawState);
var iPos,iNr,iTop:Integer;
begin
 // RBA 01/04/2013 12:10
if not (csDesigning in ComponentState) then
 if FDisplayBlobAsRTF then //property to show the blob fields or not
  begin
  if (gdSelected in State) then
    begin
     if Column.Field.isblob then
      begin
        ipos := 0;
        iNr := 0;
        while (iPos <= Column.Field.DataSet.FieldCount-1)and(Column.Field.DataSet.Fields[ipos].FieldName <> Column.Field.FieldName ) do
         begin
          if Column.Field.DataSet.Fields[ipos].IsBlob then
           inc(iNr);
          inc(iPos);
         end;
        with TJvDBRichEdit(FRichEditList[inr]) do//FRichEditList - TObjectList which contains all the TJvDBRichEdit components, and release them on destroy
         begin
          Left := Rect.Left + Self.Left + 1;
          iTop :=  Rect.Top + Self.Top + 1;
          if iTop + Height > Self.Height then
           iTop := iTop - Height;
          Top := iTop;
          Width := Rect.BottomRight.X - Rect.left;

          Visible := true;
         end;
      end;
    end
  end;
  inherited;
end; 
```

覆盖的[LayoutChanged](http://docwiki.embarcadero.com/Libraries/XE3/en/API:Vcl.DBGrids.TGridDataLink.LayoutChanged)例程

```
procedure TMyDBGrid.LayoutChanged;
var iPos : Integer;
    dtDataset : TDataSet;
    jvDbRichEdit : TJvDBRichEdit;
begin
 if not (csDesigning in ComponentState) then
 if FDisplayBlobAsRTF then
  begin
    dtDataset := GetDataset;//get the dataset assigned to the grid
    if dtDataset <> nil then
    if dtDataset.State <> dsInactive then
     begin
      FRichEditList.Clear;
      for iPos := 0 to dtDataset.FieldCount-1 do
       if dtDataset.Fields[iPos].IsBlob then
        begin
         jvDbRichEdit := TJvDBRichEdit.Create(nil);
         jvDbRichEdit.Parent := Self;
         jvDbRichEdit.DataSource := Self.DataSource;
         jvDbRichEdit.DataField := dtDataset.Fields[iPos].FieldName;
         jvDbRichEdit.Visible := false;
         FRichEditList.Add(jvDbRichEdit);
        end;
     end;
  end;
end; 
```

当我在最后显示的网格行上滚动时出现问题：

[![在此处输入图像描述](https://i.stack.imgur.com/qMd8K.png)](https://i.stack.imgur.com/qMd8K.png)

如何重绘后面的网格？我试过重新粉刷孔网格，但它在闪烁。

LE：这不是为了修改richedtis中的内容，只是为了显示它们。

# java - org.apache.maven.plugin.MojoExecutionException：协议失败

> ID：15745010
> 
> 赞同：8
> 
> 时间：2013-04-01T14:08:37.240
> 
> 标签：java, maven, hadoop

当我使用 maven 从源代码编译 hadoop 时遇到一些问题。这是错误，任何人都可以帮助我吗？谢谢。

```
[ERROR] Failed to execute goal org.apache.hadoop:hadoop-maven-plugins:3.0.0-SNAPSHOT:protoc (compile-protoc) on project hadoop-c
 [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.hadoop:hadoop-maven-plugins:3.0.0-SNAP
plugin.MojoExecutionException: protoc failure
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:217)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: org.apache.maven.plugin.MojoExecutionException: org.apache.maven.plugin.MojoExecutionException: protoc failure
        at org.apache.hadoop.maven.plugin.protoc.ProtocMojo.execute(ProtocMojo.java:81)
        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
        ... 19 more
**Caused by: org.apache.maven.plugin.MojoExecutionException: protoc failure**
        at org.apache.hadoop.maven.plugin.protoc.ProtocMojo.execute(ProtocMojo.java:78)
        ... 21 more
[ERROR]
[ERROR] 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-06T20:17:44.390

[http://wiki.apache.org/hadoop/HowToContribute](http://wiki.apache.org/hadoop/HowToContribute)上的说明解释了构建 hadoop 的一些不太明显的方面 - 包括这一方面。**这里的主要问题是 hadoop 的 YARN 框架需要 Protocol Buffers，而您很可能没有安装它们。**

看起来问题可能是您没有正确解释错误，所以 -

**如何隔离构建错误**

任何失败的 mojo 都应该与一个类相关联。

在这种情况下，失败的魔力在这里：

[https://svn.apache.org/repos/asf/hadoop/common/trunk/hadoop-maven-plugins/src/main/java/org/apache/hadoop/maven/plugin/protoc/ProtocMojo.java](https://svn.apache.org/repos/asf/hadoop/common/trunk/hadoop-maven-plugins/src/main/java/org/apache/hadoop/maven/plugin/protoc/ProtocMojo.java)

查看代码，很明显这个 Mojo 需要“protoc”程序才能运行。

[http://code.google.com/p/protobuf/](http://code.google.com/p/protobuf/)

**解决方案**

要构建 hadoop，您需要协议缓冲区。这可以从源代码安装在 *NIX 机器上，通过运行以下命令从 googlecode 获取代码（取自[http://numbers.brighterplanet.com/2012/04/14/how-to-install-mosh-在-amazon-ec2/ 上](http://numbers.brighterplanet.com/2012/04/14/how-to-install-mosh-on-amazon-ec2/)）。

```
wget http://protobuf.googlecode.com/files/protobuf-2.4.1.tar.gz
tar xzf protobuf-2.4.1.tar.gz
cd protobuf-2.4.1
./configure
make
sudo make install
sudo ldconfig 
```

# google-app-engine - 谷歌应用引擎 1.7.6 内存缓存查看器 (Python)

> ID：15745011
> 
> 赞同：0
> 
> 时间：2013-04-01T14:08:38.247
> 
> 标签：google-app-engine, python-2.7, memcached, pickle

在将 Python Dev Appserver 更新到 Google App Engine 1.7.6（使用 Python 2.7）后，我在使用 memcache 查看器时遇到了一些问题。

我的内存缓存似乎没有更新或不可读。我尝试使用应用程序引擎内存缓存查看器查看内存缓存，但是当我输入内存缓存密钥时出现错误。

当我刷新缓存时，一切都照常进行，直到需要再次读取内存缓存...

命中率和内存缓存大小正常增加，所以缓存中有一些东西。此外，当我恢复到应用引擎 1.7.5 时，一切正常。也许其他人遇到过这个问题？

当我输入 memcache 键时，我得到以下信息：

```
Traceback (most recent call last):
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2-2.5.1\webapp2.py", line 1536, in __call__
    rv = self.handle_exception(request, response, e)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2-2.5.1\webapp2.py", line 1530, in __call__
    rv = self.router.dispatch(request, response)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2-2.5.1\webapp2.py", line 1278, in default_dispatcher
    return route.handler_adapter(request, response)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2-2.5.1\webapp2.py", line 1102, in __call__
    return handler.dispatch()
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\devappserver2\admin\admin_request_handler.py", line 80, in dispatch
    super(AdminRequestHandler, self).dispatch()
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2-2.5.1\webapp2.py", line 572, in dispatch
    return self.handle_exception(e, self.app.debug)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2-2.5.1\webapp2.py", line 570, in dispatch
    return method(*args, **kwargs)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\devappserver2\admin\memcache_viewer.py", line 145, in get
    values['value'], values['type'] = self._get_memcache_value_and_type(key)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\devappserver2\admin\memcache_viewer.py", line 74, in _get_memcache_value_and_type
    except (pickle.UnpicklingError, AttributeError, EOFError, ImportError,
NameError: global name 'pickle' is not defined 
```

我尝试在 main.py 中包含一个“导入泡菜”，但这是徒劳的。

我已经包含了一些我的代码示例，但希望这不是必需的，我希望它与应用程序引擎更新有关，而不是我的代码......

我的一些 main.py 文件：

```
#import pickle
from google.appengine.api import memcache
from google.appengine.ext import db 
```

以及我如何处理 memcache 的示例函数：

```
def mc_get(key):
    a = memcache.get(key)
    if a:
        val = a
    else:
        val = None
    return val

def mc_set(key, val):
    memcache.set(key, val) 
```

如果我想查询我的数据库中的用户，我使用：

```
def get_users(update=False):
    mc_key = 'USERS'
    entries = mc_get(mc_key)
    if update or entries is None:
        a = User.all()
        logging.error('DB---Q - Users')
        entries = list(a)
        memcache.set(mc_key, entries)
    return entries 
```

更新：我在 Google\google_appengine\google\appengine\tools\devappserver2\admin\memcache_viewer.py 的 memcache_viewer.py 文件中添加了“import pickle”（这是一个错误吗？？）

现在，当我输入 memcache 键时，我在 memcache 键输入字段下收到以下错误：错误获取用户：无法从缓存中检索值：没有名为 main 的模块

任何帮助将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T12:02:33.750

我从旧的数据存储 API 更改为 NDB（更改代码有点麻烦）。自动缓存似乎已经解决了这个问题，这可能表明问题出在我的代码上，但仍然不能解释为什么在使用应用引擎 1.7.5 而不是 1.7.6 时一切正常。

如果有人有其他选择，我会删除这个答案，只是想我会发布我的进展，以防其他人遇到同样的问题。

# android - Android getView：为什么不调用 getView？

> ID：15745014
> 
> 赞同：3
> 
> 时间：2013-04-01T14:08:53.233
> 
> 标签：android, android-adapter

我添加了两个按钮（添加和删除）来控制列表视图，当我删除一个项目时，该项目不会立即在列表视图中消失，只有当我在列表视图上滑动时，新项目才会消失。除非我触摸屏幕或在列表视图上滑动，否则在我删除项目后不会调用适配器中的 getView()。有人能告诉我为什么吗？

我的 xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/locationlist_layout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >"

    <RelativeLayout
        android:id="@+id/locationlisttitle_layout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center_vertical" 
        android:background="#ADD8E6">

        <ImageView
            android:id="@+id/iv_menu2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:padding="5dp"
            android:src="@drawable/img_menu" />

        <TextView
            android:id="@+id/txtv_locationmanagetitle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:text="Manage Location List"
            android:textSize="20sp" />

        <ImageView
            android:id="@+id/iv_addlocation"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_toRightOf="@+id/txtv_locationmanagetitle"
            android:src="@drawable/addlocation" />

        <ImageView
            android:id="@+id/iv_deletelocation"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_toRightOf="@+id/iv_addlocation"
            android:src="@drawable/deletelocation" />

    </RelativeLayout>

    <ListView
        android:id="@+id/lv_locations"
        android:layout_height="500dp"
        android:layout_width="fill_parent" />
</LinearLayout> 
```

我的按钮单击事件处理程序

```
ivbtn_deleteLocation.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            //remove selected items from the locationList
            Collections.sort(listStr);
            for (int i = listStr.size()-1; i >= 0; i--) {
                Log.i("zhijianw", "remove"+listStr.get(i));
                Log.i("zhijianw", "remove"+locationList.get(Integer.parseInt(listStr.get(i))).get("txtv_locationitem"));
                String remLocation = locationList.get(Integer.parseInt(listStr.get(i))).get("txtv_locationitem").toString();
                locationList.remove(Integer.parseInt(listStr.get(i)));
                removeLocation(remLocation);
            } 
            listStr = new ArrayList<String>();
            locationsAdapter.notifyDataSetChanged();
        }
}); 
```

我的适配器

```
 public MyAdapter(Context context, List<HashMap<String, Object>> list, int resource, String[] from, int[] to) {
            this.context = context;
            this.list = list;
            keyString = new String[from.length];
            idValue = new int[to.length];
            System.arraycopy(from, 0, keyString, 0, from.length);
            System.arraycopy(to, 0, idValue, 0, to.length);
            inflater = LayoutInflater.from(context);
            init();
            Log.i("zhijianw", "my adapter called"); 
    }

    public void init() {
            isSelected = new HashMap<Integer, Boolean>();
            for (int i = 0; i < list.size(); i++) {
                    isSelected.put(i, false);
            }
    }

    @Override
    public int getCount() {
        Log.i("zhijianw", "get count called");  
            return list.size(); 
    }

    @Override
    public Object getItem(int arg0) {
        Log.i("zhijianw", "get item called");
            return list.get(arg0);
    }

    @Override
    public long getItemId(int arg0) {
            return arg0;
    }

    @Override
    public View getView(int position, View view, ViewGroup arg2) {
        init();
        Log.i("zhijianw", "get view called");           
        ViewHolder holder = null;
        if (view == null) {
                holder = new ViewHolder();
                view = inflater.inflate(R.layout.location_item, null);
                holder.tv = (TextView) view.findViewById(R.id.txtv_locationitem);
                holder.cb = (CheckBox) view.findViewById(R.id.cb_locationitem);
                view.setTag(holder);
        } else {
                holder = (ViewHolder) view.getTag();
        }
        HashMap<String, Object> map = list.get(position);
        if (map != null) {
                itemString = (String) map.get(keyString[0]);
                holder.tv.setText(itemString);
        }
        holder.cb.setChecked(isSelected.get(position));
        return view;
    }

} 
```

设置列表视图适配器

```
lv_menu = (ListView) menu_view.findViewById(R.id.lv_menu);
lv_menu.setAdapter(new ArrayAdapter<String>(this, R.layout.menu_item,   R.id.txtv_menuItem, menuChoices)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:27:20.357

`locationsAdapter`似乎没有设置为使用的相同适配器，`lv_menu.setAdapter()`因此不会`locationsAdapter.notifyDataSetChanged()`失效`lv_menu`。`lv_menu.invalidate()`直接在你的`onClick()`函数中尝试。

每当删除项目时，我个人都会从头开始重新加载我的列表适配器，尤其是在`CheckBox`涉及项目时，以防止事情不同步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-10T09:03:49.957

请检查传递给充气器的参数（在 getView 方法中）是否引用了启动适配器时使用的相同参数。如果它们不相同，则不会在没有任何进一步通知的情况下调用 getView。佐哈尔

# database - DBInputFormat 多记录处理

> ID：15745018
> 
> 赞同：-1
> 
> 时间：2013-04-01T14:09:08.703
> 
> 标签：database, hadoop

当我们使用 Hadoop 连接到像 MYSQL 这样的 RDBMS 时，我们通常会从数据库中获取一条记录到一个用户定义的类中，该类扩展了 DBWritable 和 Writable。如果我们的 SQL 查询生成 N 条记录作为输出，那么将记录读入用户定义的类的操作会执行 N 次。有没有一种方法可以让更多的记录同时进入映射器，而不是每次只有 1 条记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:57:26.840

如果我理解正确，您认为 Hadoop 会导致 N`SELECT`语句在幕后。那不是真的。正如您在[`DBInputFormat`'s source](http://svn.apache.org/viewvc/hadoop/common/tags/release-1.0.4/src/mapred/org/apache/hadoop/mapred/lib/db/DBInputFormat.java?view=markup)中看到的那样，它根据 Hadoop 认为合适的内容创建行块。

显然，每个映射器都必须执行一个查询来获取一些数据以供其处理，并且它可能会重复执行此操作，但这仍然远不及表中的行数。

但是，如果性能下降，最好将数据转储到 HDFS / Hive 并从那里处理。

# android - 无法更改按钮按下时 TextView 的文本

> ID：15745021
> 
> 赞同：0
> 
> 时间：2013-04-01T14:09:22.580
> 
> 标签：android, textview, android-button

我想要的是每次用户从文本视图（q）中的一个文本开始时，文本视图（nm）显示用户所在的数字。简而言之，每次变量的值发生变化时，我都想将该值设置为 TexView (nm) 处的文本。但是，这里它显示一个错误。

# 按钮不起作用。怎么了？

## LOGCAT

```
04-01 19:54:55.901: E/AndroidRuntime(32078): FATAL EXCEPTION: main
04-01 19:54:55.901: E/AndroidRuntime(32078): java.lang.NullPointerException
04-01 19:54:55.901: E/AndroidRuntime(32078):    at com.dreamgoogle.gihf.Quotes$1.onClick(Quotes.java:43)
04-01 19:54:55.901: E/AndroidRuntime(32078):    at android.view.View.performClick(View.java:3524)
04-01 19:54:55.901: E/AndroidRuntime(32078):    at android.view.View$PerformClick.run(View.java:14194)
04-01 19:54:55.901: E/AndroidRuntime(32078):    at android.os.Handler.handleCallback(Handler.java:605)
04-01 19:54:55.901: E/AndroidRuntime(32078):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-01 19:54:55.901: E/AndroidRuntime(32078):    at android.os.Looper.loop(Looper.java:137)
04-01 19:54:55.901: E/AndroidRuntime(32078):    at android.app.ActivityThread.main(ActivityThread.java:4476)
04-01 19:54:55.901: E/AndroidRuntime(32078):    at java.lang.reflect.Method.invokeNative(Native Method)
04-01 19:54:55.901: E/AndroidRuntime(32078):    at java.lang.reflect.Method.invoke(Method.java:511)
04-01 19:54:55.901: E/AndroidRuntime(32078):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:816)
04-01 19:54:55.901: E/AndroidRuntime(32078):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:583)
04-01 19:54:55.901: E/AndroidRuntime(32078):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:16:39.337

“i”是一个整数。使用 String.valueOf(i)、StringBuilder 或替换 String.format("%d", i));

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T14:38:02.090

如果您的视图已正确初始化，则最有可能的是您的字符串数组为空。改变这个：

```
String[] str; 
```

有了这个

```
String[] str = new String[]{"Hahahaha", "Woohoo!", "It's-a-me, Mario!", "Mamma mia!"}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T14:42:40.813

问题是您已经声明了变量。但是您忘记初始化它们

```
ImageButton next;
ImageButton previous;
ImageButton copytext;
TextView q;
TextView nm; 
```

对于这些widegets，你必须整合它们

例如：`previous=(ImageButton)findViewById(R.id.name_in_your_layout_xml);`

或者如果它是动态的

`previous= new ImageButton(context);`

我想你忘了这样做。这就是为什么它显示 NPE

编辑：如果你使用任何函数来设置这个调用它`onCreare()` 在你的情况下你必须在点击事件之前调用它

使用您忘记提供的新代码进行编辑

```
nm = (TextView) findViewById(R.id.your_id_layout_xml); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T14:49:28.860

问题是`nm`永远不会绑定到视图中的组件。这就是这里 NPE 的原因：

```
nm.setText(String.valueOf(i)) ; 
```

将此添加到您的课程中：

```
private void varSet() {
        next = (ImageButton) findViewById(R.id.next);
        previous = (ImageButton) findViewById(R.id.previous);
        copytext = (ImageButton) findViewById(R.id.copy);
        q = (TextView) findViewById(R.id.quotes);
        nm = (TextView) findViewById(R.id.YOUR_ID); // BOUND nm HERE WITH YOUR ID
        str = new String[] {
                "In order to succeed, your desire for success should be greater than your fear of failure.",
                "A successful man is one who can lay a firm foundation with the bricks others have thrown at him.",
                "Success is not final, failure is not fatal: it is the courage to continue that counts.",
                "Try not to become a man of success. Rather become a man of value.",
                 };

    }; 
```

# php - wordpress 中的自定义文本字段

> ID：15745024
> 
> 赞同：0
> 
> 时间：2013-04-01T14:09:34.193
> 
> 标签：php, wordpress, textfield

我正在开发一个必须在左上角有一个带有“欢迎”标题（h1）和文本（p）的框的网站。如果有更好的方法，我不想为内容使用特定的博客文章。

我怎样才能做到这一点？截图如下图所示。哦，我不是香草冰迷；）

![在此处输入图像描述](https://i.stack.imgur.com/2oS30.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T14:17:41.357

看起来是添加小部件区域的好地方。很容易做到。参考这个：[http ://codex.wordpress.org/Widgetizing_Themes](http://codex.wordpress.org/Widgetizing_Themes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T14:15:03.720

我有类似的问题。我想出的解决方案相当简单——我只是在那里放了一个侧边栏支架的代码（复制了原始的并更改了它的 ID），使其在 WP 管理面板中作为另一个侧边栏可见。然后我添加了一个 HTML 小部件并将内容放在那里。

# c - 在不违反 C99 中严格的别名规则的情况下使用 void * 键入双关语

> ID：15745030
> 
> 赞同：22
> 
> 时间：2013-04-01T14:10:10.693
> 
> 标签：c, c99, void-pointers, strict-aliasing, type-punning

我最近遇到了严格的别名规则，但我无法理解如何在`void *`不违反规则的情况下执行类型双关语。

我知道这违反了规则：

```
int x = 0xDEADBEEF;

short *y = (short *)&x;
*y = 42;

int z = x; 
```

而且我知道我可以安全地使用 C99 中的联合进行类型双关：

```
union{
    int x;
    short y;
} data;

data.x = 0xDEADBEEF;
data.y = 42;

int z = data.x; 
```

但是如何`void *`在 C99 中安全地执行类型双关语？以下是否正确：

```
int x = 0xDEADBEEF;

void * helper = (void *)&x;

short *y = (short *)helper;
*y = 42;

int z = x; 
```

我怀疑代码仍然会破坏严格的别名规则，因为变量`x`地址处的内存可以被修改`x`和取消引用`y`。

如果 type-punning 未定义 via ，那么C99`void *`中的目的是什么？`void *`

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-01T14:14:05.090

`void *`与类型双关无关。其主要目的是：

1.  为了允许不关心调用者在其中存储的对象类型的通用分配和释放操作（例如`malloc`和`free`）。

2.  允许调用者通过函数传递指向任意类型的指针，该函数将通过回调将其传回（例如`qsort`and `pthread_create`）。在这种情况下，编译器无法强制进行类型检查；在编写调用者和回调时，*您有责任*确保回调访问具有正确类型的对象。

指向的指针`void`也用于一些`memcpy`实际操作对象的地方（如 ），作为对象的覆盖`unsigned char []`表示。这可以看作是类型双关语，但这不是别名违规，因为`char`允许类型对任何内容进行别名以访问其表示。在这种情况下，`unsigned char *`也可以使用，但`void *`具有指针自动转换为`void *`.

在您的示例中，由于原始类型是`int`而不是联合，因此没有合法的方式来键入双关并将其访问为`short`. 您可以将 的值复制`x`到联合中，在那里执行明确定义的类型双关语，然后将其复制回来。一个好的编译器应该完全省略副本。或者，您可以将写入分解为`char`写入，然后它将是合法的别名。

# vim - 使用 vim 作为编辑器，但使用 emacs 作为代码格式化程序

> ID：15745031
> 
> 赞同：4
> 
> 时间：2013-04-01T14:10:19.200
> 
> 标签：vim, emacs, erlang

正如我在 erlang 社区中看到的格式化代码的常用方法是 emacs erlang 模式的方式。

有什么方法可以调用 emacs 来格式化 vim 中的代码（行、选定文本和孔文件）？

如果有人向我指出一些描述这种缩进逻辑的 emacs 文档，我也将不胜感激？

编辑：实际上我知道如何从 vim 调用某些东西，但我不知道从 emacs 端调用什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T17:12:23.820

intellij erlang 插件正是这样做的：[ErlangEmacsFormatAction.java](https://github.com/ignatov/intellij-erlang/blob/master/src/org/intellij/erlang/actions/ErlangEmacsFormatAction.java)

```
/*
 * Copyright 2013 Sergey Ignatov
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 */

final GeneralCommandLine commandLine = new GeneralCommandLine();
commandLine.setExePath("emacs");
commandLine.addParameters("--batch", "--eval");

String s = "\n" +
    "(progn (find-file \"{0}\")\n" +
    "    (require ''erlang-start)\n" +
    "    (erlang-mode)\n" +
    "    (untabify (point-min) (point-max))\n" +
    "    (delete-trailing-whitespace)\n" +
    "    (erlang-indent-current-buffer)\n" +
    "    (write-region (point-min) (point-max) \"{1}\")\n" +
    "    (kill-emacs))";

  commandLine.addParameter(MessageFormat.format(s, virtualFile.getCanonicalPath(), tmpFile.getCanonicalPath())); 
```

它以文件作为参数之一调用 emacs 批处理子进程。在 vimscript 中实现类似的东西应该很容易，检查[Vim External Commands](http://learnvimscriptthehardway.stevelosh.com/chapters/52.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T17:57:03.120

我所知道的最能解决这个问题的是 vim 插件`vimerl`：[https ://github.com/jimenezrick/vimerl](https://github.com/jimenezrick/vimerl)

这就是我使用的，虽然它并不完美，但它工作得相当好。

如果它与 Emacs 缩进完全一致，那就太好了，但对于让它运行所需的工作，这是一个好的开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-02T05:47:39.213

您可能有兴趣研究[vim-erlang](https://github.com/vim-erlang)提供的功能。

# c - 包含彼此实例的多个结构

> ID：15745037
> 
> 赞同：4
> 
> 时间：2013-04-01T14:10:50.293
> 
> 标签：c, struct

对于分配，我需要声明多个结构，那里没有问题。这些声明如下：

```
typedef struct struct1{
  struct2* object;
}

typedef struct struct2{
  struct1* object;
}

// functions using both struct1 and struct2 parameters 
```

当然，这会给我一个错误，因为 struct2 没有在 struct1 之前声明。因此，我尝试通过放置

```
struct struct2; 
```

在顶部。但是，这需要我将 struct1 块中的对象称为

```
typedef struct struct1{
  struct struct2* obj;
} 
```

该结构的函数将用于使用 struct1* 和 struct2* 参数，并按此进行测试（包括构造函数）。使用上面例子中的结构标签会给我带来无数错误。有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T14:12:47.363

```
typedef struct s2 struct2;

typedef struct s1 {
  struct2* object;
} struct1;

struct s2 {
  struct1* object;
}; 
```

# iphone - ios：解析具有阿拉伯语单词的 JSON 返回 NULL

> ID：15745041
> 
> 赞同：1
> 
> 时间：2013-04-01T14:11:05.730
> 
> 标签：iphone, ios, ipad

我正在尝试从 Google 地址解析 JSON，如果 JSON 响应中没有阿拉伯语单词/地址，它可以正常工作。如果 JSON 响应中有阿拉伯语单词

```
NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding]; 
```

这将 null 作为响应字符串。从 Google 获取数据并发送到解析器的代码

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
    [responseData setLength:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    [responseData appendData:data];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
    self.responseData = nil;    
}

#pragma mark JSON and XML parsing NSXMLPARSER
- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    if([getMode isEqualToString:@"0"])//JSON
    {
        [connection release];

        NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];

        NSLog(@"responseString: %@", responseString);
} 
```

谷歌查询获取数据并将 responseString 显示为 NULL

[http://maps.google.com/maps/nav?q=from:King%20Khalid%20Tunnel,%20Mecca%2024248%20to:3748,%20%20Al%20Hindawiyyah,%20Mecca%2024232&sensor=true&key=AIzaSyB4A8OGSdi_rsBsYl3_OCap6zAA1wXSRJg](http://maps.google.com/maps/nav?q=from:King%20Khalid%20Tunnel,%20Mecca%2024248%20to:3748,%20%20Al%20Hindawiyyah,%20Mecca%2024232&sensor=true&key=AIzaSyB4A8OGSdi_rsBsYl3_OCap6zAA1wXSRJg)

我从 NSLog 复制了这个 NSMutibleData

<7b226e61 6d65223a 2266726f 6d3a4b69 6e67204b 68616c69 64205475 6e6e656c 2c204d65 63636120 32343234 3820746f 3a333732 312c2020 416c2048 696e6461 77697979 61682c20 4d656363 61203234 32333222 2c225374 61747573 223a7b22 636f6465 223a3230 302c2272 65717565 7374223a 22646972 65637469 6f6e7322 7d2c2250 6c616365 6d61726b 223a5b7b 22696422 3a22222c 22616464 72657373 223a224b 696e6720 4b68616c 69642054 756e6e65 6c2c204d 65636361 20536175 64692041 72616269 61222c22 41646472 65737344 65746169 6c73223a 7b22436f 756e7472 79223a7b 22436f75 6e747279 4e616d65 436f6465 223a2253 41222c22 436f756e 7472794e 616d6522 3a225361 75646920 41726162 6961222c 2241646d 696e6973 74726174 69766541 72656122 3a7b2241 646d696e 69737472 61746976 65417265 614e616d 65223a22 4d616b6b 61682050 726f7669 6e636522 2c224c6f 63616c69 7479223a 7b224c6f 63616c69 74794e61 6d65223a 224d65636361222c 2254686f 726f7567 68666172 65223a7b 2254686f 726f7567 68666172 654e616d 65223a22 4b696e67 204b6861 6c696420 54756e6e 656c227d 7d7d7d2c 22416363 75726163 79223a20 367d2c22 506f696e 74223a7b 22636f6f 7264696e 61746573 223a5b33 392e3839 33393935 2c32312e 34323737 31322c30 5d7d7d2c 7b226964 223a2222 2c226164 64726573 73223a22 38343436 2c20416c 2048696e 64617769 79796168 2c204d61 6b6b6168 20323432 3332a033 3732312c 20536175 64692041 72616269 61222c22 41646472 65737344 65746169 6c73223a 7b22436f 756e7472 79223a7b 22436f75 6e747279 4e616d65 436f6465 223a2253 41222c22 436f756e 7472794e 616d6522 3a225c75 30363237 5c753036 34345c75 30363333 5c753036 33395c75 30363438 5c753036 32465c75 30363441 5c753036 3239222c 224c6f63 616c6974 79223a7b 224c6f63 616c6974 794e616d 65223a22 5c753036 34355c75 30363433 5c753036 3239222c 22446570 656e6465 6e744c6f63616c69 7479223a 7b224465 70656e64 656e744c 6f63616c 6974794e 616d6522 3a225c75 30363237 5c753036 34345c75 30363437 5c753036 34365c75 30363246 5c753036 32375c75 30363438 5c753036 34415c75 30363239 222c2241 64647265 73734c69 6e65223a 5b223834 3436225d 2c22506f 7374616c 436f6465 223a7b22 506f7374 616c436f 64654e75 6d626572 223a2232 34323332 a0333732 31227d7d 7d7d2c22 41636375 72616379 223a2038 7d2c2250 6f696e74 223a7b22 636f6f72 64696e61 74657322 3a5b3339 2e373936 3433342c 32312e34 31363737 302c305d 7d7d5d2c 22446972 65637469 6f6e7322 3a7b2263 6f707972 69676874 7348746d 6c223a22 4d617020 64617461 20a93230 31332047 6f6f676c 65222c22 73756d6d 61727948 746d6c22 3a223134 2e355c75 30303236 6e627370 3b6b6d20 2861626f 75742031 37206d69 6e732922 2c224469 7374616e 6365223a 7b226d65 74657273 223a3134 3532372c 2268746d 6c223a22 31342e35 5c753030 32366e6273703b6b 6d227d2c 22447572 6174696f 6e223a7b 22736563 6f6e6473 223a3939 312c2268 746d6c22 3a223137 206d696e 73227d2c 22526f75 74657322 3a5b7b22 44697374 616e6365 223a7b22 6d657465 7273223a 31343532 372c2268 746d6c22 3a223134 2e355c75 30303236 6e627370 3b6b6d22 7d2c2244 75726174 696f6e22 3a7b2273 65636f6e 6473223a 3939312c 2268746d 6c223a22 3137206d 696e7322 7d2c2273 756d6d61 72794874 6d6c223a 2231342e 355c7530 3032366e 6273703b 6b6d2028 61626f75 74203137 206d696e 7329222c 22537465 7073223a 5b7b2264 65736372 69707469 6f6e4874 6d6c223a 22486561 64205c75 30303343 625c7530 30334573 6f757468 77657374 5c753030 33435c2f 625c7530 30334520 6f6e205c 75303033 43625c75 30303345 4b696e67 204b6861 6c696420 54756e6e 656c5c75 30303343 5c2f625c 75303033 4520746f 77617264 205c7530 30334362 5c753030 33454b69 6e67204b 68616c69 64204272 69646765 5c753030 33435c2f625c7530 30334522 2c224469 7374616e 6365223a 7b226d65 74657273 223a3133 32372c22 68746d6c 223a2231 2e335c75 30303236 6e627370 3b6b6d22 7d2c2244 75726174 696f6e22 3a7b2273 65636f6e 6473223a 36362c22 68746d6c 223a2231 206d696e 227d2c22 506f696e 74223a7b 22636f6f 7264696e 61746573 223a5b33 392e3839 33393935 2c32312e 34323737 31322c30 5d7d7d2c 7b226465 73637269 7074696f 6e48746d 6c223a22 54616b65 20746865 2072616d 70206f6e 746f205c 75303033 43625c75 30303345 4b696e67 20466168 64205264 5c753030 33435c2f 625c7530 3033455c 75303033 43646976 20636c61 73733d5c 225c225c 75303033 45436f6e 74696e75 6520746f 20666f6c 6c6f7720 5c753030 33437370 616e2064 69723d5c 2272746c 5c225c75 30303345 5c753036 33375c75 30363331 5c753036 34415c75 30363432 205c7530 3632375c 75303634 345c7530 3634355c 75303634 345c7530 36343320 5c753036 34315c75 30363437 5c753036 32465c7530303343 5c2f7370 616e5c75 30303345 5c753230 30455c75 30303343 5c2f6469 765c7530 30334522 2c224469 7374616e 6365223a 7b226d65 74657273 223a3631 33372c22 68746d6c 223a2236 2e315c75 30303236 6e627370 3b6b6d22 7d2c2244 75726174 696f6e22 3a7b2273 65636f6e 6473223a 3435362c 2268746d 6c223a22 38206d69 6e73227d 2c22506f 696e7422 3a7b2263 6f6f7264 696e6174 6573223a 5b33392e 38383430 35382c32 312e3432 30323738 2c305d7d 7d2c7b22 64657363 72697074 696f6e48 746d6c22 3a22436f 6e74696e 7565206f 6e746f20 5c753030 3343625c 75303033 45536563 6f6e6420 52696e67 20526f61 645c7530 3033435c 2f625c75 30303345 222c2244 69737461 6e636522 3a7b226d 65746572 73223a35 3039302c 2268746d 6c223a22 352e315c 75303032 366e6273 703b6b6d 227d2c22 44757261 74696f6e 223a7b22 7365636f 6e647322 3a323238 2c226874 6d6c223a 2234206d 696e7322 7d2c2250 6f696e74 223a7b22 636f6f72 64696e6174657322 3a5b3339 2e383334 3631332c 32312e34 32363638 372c305d 7d7d2c7b 22646573 63726970 74696f6e 48746d6c 223a2243 6f6e7469 6e756520 6f6e746f 205c7530 30334362 5c753030 3345416c 20416d69 72204e61 73617220 49626e20 4d617375 645c7530 3033435c 2f625c75 30303345 222c2244 69737461 6e636522 3a7b226d 65746572 73223a37 39312c22 68746d6c 223a2238 30305c75 30303236 6e627370 3b6d227d 2c224475 72617469 6f6e223a 7b227365 636f6e64 73223a37 392c2268 746d6c22 3a223120 6d696e22 7d2c2250 6f696e74 223a7b22 636f6f72 64696e61 74657322 3a5b3339 2e373938 3739362c 32312e34 30393237 312c305d 7d7d2c7b 22646573 63726970 74696f6e 48746d6c 223a2254 75726e20 72696768 74206f6e 746f205c 75303033 43625c75 30303345 416c2041 6e6a616c 5c753030 33435c2f 625c7530 30334522 2c224469 7374616e 6365223a 7b226d65 74657273 223a3238 312c2268 746d6c22 3a223238 305c7530 3032366e 6273703b6d227d2c 22447572 6174696f 6e223a7b 22736563 6f6e6473 223a3337 2c226874 6d6c223a 22333720 73656373 227d2c22 506f696e 74223a7b 22636f6f 7264696e 61746573 223a5b33 392e3739 31353736 2c32312e 34313030 32392c30 5d7d7d2c 7b226465 73637269 7074696f 6e48746d 6c223a22 5475726e 20726967 6874206f 6e746f20 5c753030 3343625c 75303033 454d6173 6a696420 416c2041 6d697220 41686d61 645c7530 3033435c 2f625c75 30303345 222c2244 69737461 6e636522 3a7b226d 65746572 73223a34 35362c22 68746d6c 223a2234 35305c75 30303236 6e627370 3b6d227d 2c224475 72617469 6f6e223a 7b227365 636f6e64 73223a35 362c2268 746d6c22 3a223536 20736563 73227d2c 22506f69 6e74223a 7b22636f 6f726469 6e617465 73223a5b 33392e37 39323236 362c3231 2e343132 3437352c 305d7d7d 2c7b2264 65736372 69707469 6f6e4874 6d6c223a 2254616b 65207468 6520326e 64207269 67687420 6f6e746f 205c7530 30334362 5c7530303345416c 20426173 69726168 5c753030 33435c2f 625c7530 30334522 2c224469 7374616e 6365223a 7b226d65 74657273 223a3231 322c2268 746d6c22 3a223231 305c7530 3032366e 6273703b 6d227d2c 22447572 6174696f 6e223a7b 22736563 6f6e6473 223a3333 2c226874 6d6c223a 22333320 73656373 227d2c22 506f696e 74223a7b 22636f6f 7264696e 61746573 223a5b33 392e3739 34393539 2c32312e 34313530 36352c30 5d7d7d2c 7b226465 73637269 7074696f 6e48746d 6c223a22 54616b65 20746865 20317374 206c6566 745c7530 30334364 69762063 6c617373 3d5c2267 6f6f676c 655f6e6f 74655c22 5c753030 33454465 7374696e 6174696f 6e207769 6c6c2062 65206f6e 20746865 206c6566 745c7530 3033435c 2f646976 5c753030 3345222c 22446973 74616e63 65223a7b 226d6574 65727322 3a323333 2c226874 6d6c223a 22323330 5c753030 32366e62 73703b6d 227d2c22 44757261 74696f6e 223a7b22 7365636f 6e647322 3a33362c 2268746d 6c223a2233362073 65637322 7d2c2250 6f696e74 223a7b22 636f6f72 64696e61 74657322 3a5b3339 2e373936 3739362c 32312e34 31343730 342c305d 7d7d5d2c 22456e64 223a7b22 636f6f72 64696e61 74657322 3a5b3339 2e373936 3536382c 32312e34 31363734 372c305d 7d7d5d7d 7d>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T16:18:04.513

响应数据不是有效的 UTF-8。例如，它包含编码为`A0`“Makkah 24232 3748”的不间断空格，因此它可能是某种 ISO-Latin 编码。

如果您在请求参数中添加“oe=utf-8”，那么您将获得有效的 UTF-8（`responseString`不是`nil`，我检查了它:-)。

然后 URL 如下所示：

```
http://maps.google.com/maps/nav?oe=utf-8&q=from:.... 
```

# sql - 在sql server中有效地将行转换为列

> ID：15745042
> 
> 赞同：448
> 
> 时间：2013-04-01T14:11:17.373
> 
> 标签：sql, sql-server, sql-server-2008, pivot

我正在寻找一种在SQL server 中将行转换为列的有效方法，听说PIVOT 不是很快，我需要处理很多记录。

这是我的例子：

```
 -------------------------------
   | Id | Value  | ColumnName    |
   -------------------------------
   | 1  | John   | FirstName     |
   | 2  | 2.4    | Amount        |
   | 3  | ZH1E4A | PostalCode    |
   | 4  | Fork   | LastName      |
   | 5  | 857685 | AccountNumber |
   ------------------------------- 
```

这是我的结果：

```
---------------------------------------------------------------------
| FirstName  |Amount|   PostalCode   |   LastName  |  AccountNumber |
---------------------------------------------------------------------
| John       | 2.4  |   ZH1E4A       |   Fork      |  857685        |
--------------------------------------------------------------------- 
```

如何构建结果？

* * *

## 回答 #1

> 赞同：655
> 
> 时间：2013-04-01T14:13:33.877

有多种方法可以将数据从多行转换为列。

## 使用`PIVOT`

在 SQL Server 中，您可以使用该`PIVOT`函数将数据从行转换为列：

```
select Firstname, Amount, PostalCode, LastName, AccountNumber
from
(
  select value, columnname
  from yourtable
) d
pivot
(
  max(value)
  for columnname in (Firstname, Amount, PostalCode, LastName, AccountNumber)
) piv; 
```

请参阅[演示](https://data.stackexchange.com/stackoverflow/query/497432)。

### 未知数量的枢轴`columnnames`

如果您想要转置的数量未知`columnnames`，则可以使用动态 SQL：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT ',' + QUOTENAME(ColumnName) 
                    from yourtable
                    group by ColumnName, id
                    order by id
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = N'SELECT ' + @cols + N' from 
             (
                select value, ColumnName
                from yourtable
            ) x
            pivot 
            (
                max(value)
                for ColumnName in (' + @cols + N')
            ) p '

exec sp_executesql @query; 
```

请参阅[演示](https://data.stackexchange.com/stackoverflow/query/497433)。

## 使用聚合函数

如果您不想使用该`PIVOT`函数，则可以使用带有`CASE`表达式的聚合函数：

```
select
  max(case when columnname = 'FirstName' then value end) Firstname,
  max(case when columnname = 'Amount' then value end) Amount,
  max(case when columnname = 'PostalCode' then value end) PostalCode,
  max(case when columnname = 'LastName' then value end) LastName,
  max(case when columnname = 'AccountNumber' then value end) AccountNumber
from yourtable 
```

请参阅[演示](https://data.stackexchange.com/stackoverflow/query/497434)。

## 使用多个连接

这也可以使用多个连接来完成，但是您需要一些列来关联您在示例数据中没有的每一行。但基本语法是：

```
select fn.value as FirstName,
  a.value as Amount,
  pc.value as PostalCode,
  ln.value as LastName,
  an.value as AccountNumber
from yourtable fn
left join yourtable a
  on fn.somecol = a.somecol
  and a.columnname = 'Amount'
left join yourtable pc
  on fn.somecol = pc.somecol
  and pc.columnname = 'PostalCode'
left join yourtable ln
  on fn.somecol = ln.somecol
  and ln.columnname = 'LastName'
left join yourtable an
  on fn.somecol = an.somecol
  and an.columnname = 'AccountNumber'
where fn.columnname = 'Firstname' 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-01-23T16:01:02.227

这是一种方法，而不仅仅是一个脚本，而是为您提供了更大的灵活性。

首先有3个对象：

1.  用户定义的 TABLE 类型 [ `ColumnActionList`] -> 将数据作为参数保存
2.  SP [ `proc_PivotPrepare`] -> 准备我们的数据
3.  SP [ `proc_PivotExecute`] -> 执行脚本

CREATE TYPE [dbo].[ColumnActionList] AS TABLE ([ID] [smallint] NOT NULL, [ColumnName] nvarchar NOT NULL, [Action] nchar NOT NULL); 去

```
 CREATE PROCEDURE [dbo].[proc_PivotPrepare] 
    (
    @DB_Name        nvarchar(128),
    @TableName      nvarchar(128)
    )
    AS
            SELECT @DB_Name = ISNULL(@DB_Name,db_name())
    DECLARE @SQL_Code nvarchar(max)

    DECLARE @MyTab TABLE (ID smallint identity(1,1), [Column_Name] nvarchar(128), [Type] nchar(1), [Set Action SQL] nvarchar(max));

    SELECT @SQL_Code        =   'SELECT [<| SQL_Code |>] = '' '' '
                                        + 'UNION ALL '
                                        + 'SELECT ''----------------------------------------------------------------------------------------------------'' '
                                        + 'UNION ALL '
                                        + 'SELECT ''-----| Declare user defined type [ID] / [ColumnName] / [PivotAction] '' '
                                        + 'UNION ALL '
                                        + 'SELECT ''----------------------------------------------------------------------------------------------------'' '
                                        + 'UNION ALL '
                                        + 'SELECT ''DECLARE @ColumnListWithActions ColumnActionList;'''
                                        + 'UNION ALL '
                                        + 'SELECT ''----------------------------------------------------------------------------------------------------'' '
                                        + 'UNION ALL '
                                        + 'SELECT ''-----| Set [PivotAction] (''''S'''' as default) to select dimentions and values '' '
                                        + 'UNION ALL '
                                        + 'SELECT ''-----|'''
                                        + 'UNION ALL '
                                        + 'SELECT ''-----| ''''S'''' = Stable column || ''''D'''' = Dimention column || ''''V'''' = Value column '' '
                                        + 'UNION ALL '
                                        + 'SELECT ''----------------------------------------------------------------------------------------------------'' '
                                        + 'UNION ALL '
                                        + 'SELECT ''INSERT INTO  @ColumnListWithActions VALUES ('' + CAST( ROW_NUMBER() OVER (ORDER BY [NAME]) as nvarchar(10)) + '', '' + '''''''' + [NAME] + ''''''''+ '', ''''S'''');'''
                                        + 'FROM [' + @DB_Name + '].sys.columns  '
                                        + 'WHERE object_id = object_id(''[' + @DB_Name + ']..[' + @TableName + ']'') '
                                        + 'UNION ALL '
                                        + 'SELECT ''----------------------------------------------------------------------------------------------------'' '
                                        + 'UNION ALL '
                                        + 'SELECT ''-----| Execute sp_PivotExecute with parameters: columns and dimentions and main table name'' '
                                        + 'UNION ALL '
                                        + 'SELECT ''----------------------------------------------------------------------------------------------------'' '
                                        + 'UNION ALL '
                                        + 'SELECT ''EXEC [dbo].[sp_PivotExecute] @ColumnListWithActions, ' + '''''' + @TableName + '''''' + ';'''
                                        + 'UNION ALL '
                                        + 'SELECT ''----------------------------------------------------------------------------------------------------'' '                            
EXECUTE SP_EXECUTESQL @SQL_Code;

GO

CREATE PROCEDURE [dbo].[sp_PivotExecute]
(
@ColumnListWithActions  ColumnActionList ReadOnly
,@TableName                     nvarchar(128)
)
AS

--#######################################################################################################################
--###| Step 1 - Select our user-defined-table-variable into temp table
--#######################################################################################################################

IF OBJECT_ID('tempdb.dbo.#ColumnListWithActions', 'U') IS NOT NULL DROP TABLE #ColumnListWithActions; 
SELECT * INTO #ColumnListWithActions FROM @ColumnListWithActions;

--#######################################################################################################################
--###| Step 2 - Preparing lists of column groups as strings:
--#######################################################################################################################

DECLARE @ColumnName                     nvarchar(128)
DECLARE @Destiny                        nchar(1)

DECLARE @ListOfColumns_Stable           nvarchar(max)
DECLARE @ListOfColumns_Dimension    nvarchar(max)
DECLARE @ListOfColumns_Variable     nvarchar(max)
--############################
--###| Cursor for List of Stable Columns
--############################

DECLARE ColumnListStringCreator_S CURSOR FOR
SELECT      [ColumnName]
FROM        #ColumnListWithActions
WHERE       [Action] = 'S'
OPEN ColumnListStringCreator_S;
FETCH NEXT FROM ColumnListStringCreator_S
INTO @ColumnName
  WHILE @@FETCH_STATUS = 0

   BEGIN
        SELECT @ListOfColumns_Stable = ISNULL(@ListOfColumns_Stable, '') + ' [' + @ColumnName + '] ,';
        FETCH NEXT FROM ColumnListStringCreator_S INTO @ColumnName
   END

CLOSE ColumnListStringCreator_S;
DEALLOCATE ColumnListStringCreator_S;

--############################
--###| Cursor for List of Dimension Columns
--############################

DECLARE ColumnListStringCreator_D CURSOR FOR
SELECT      [ColumnName]
FROM        #ColumnListWithActions
WHERE       [Action] = 'D'
OPEN ColumnListStringCreator_D;
FETCH NEXT FROM ColumnListStringCreator_D
INTO @ColumnName
  WHILE @@FETCH_STATUS = 0

   BEGIN
        SELECT @ListOfColumns_Dimension = ISNULL(@ListOfColumns_Dimension, '') + ' [' + @ColumnName + '] ,';
        FETCH NEXT FROM ColumnListStringCreator_D INTO @ColumnName
   END

CLOSE ColumnListStringCreator_D;
DEALLOCATE ColumnListStringCreator_D;

--############################
--###| Cursor for List of Variable Columns
--############################

DECLARE ColumnListStringCreator_V CURSOR FOR
SELECT      [ColumnName]
FROM        #ColumnListWithActions
WHERE       [Action] = 'V'
OPEN ColumnListStringCreator_V;
FETCH NEXT FROM ColumnListStringCreator_V
INTO @ColumnName
  WHILE @@FETCH_STATUS = 0

   BEGIN
        SELECT @ListOfColumns_Variable = ISNULL(@ListOfColumns_Variable, '') + ' [' + @ColumnName + '] ,';
        FETCH NEXT FROM ColumnListStringCreator_V INTO @ColumnName
   END

CLOSE ColumnListStringCreator_V;
DEALLOCATE ColumnListStringCreator_V;

SELECT @ListOfColumns_Variable      = LEFT(@ListOfColumns_Variable, LEN(@ListOfColumns_Variable) - 1);
SELECT @ListOfColumns_Dimension = LEFT(@ListOfColumns_Dimension, LEN(@ListOfColumns_Dimension) - 1);
SELECT @ListOfColumns_Stable            = LEFT(@ListOfColumns_Stable, LEN(@ListOfColumns_Stable) - 1);

--#######################################################################################################################
--###| Step 3 - Preparing table with all possible connections between Dimension columns excluding NULLs
--#######################################################################################################################
DECLARE @DIM_TAB TABLE ([DIM_ID] smallint, [ColumnName] nvarchar(128))
INSERT INTO @DIM_TAB 
SELECT [DIM_ID] = ROW_NUMBER() OVER(ORDER BY [ColumnName]), [ColumnName] FROM #ColumnListWithActions WHERE [Action] = 'D';

DECLARE @DIM_ID smallint;
SELECT      @DIM_ID = 1;

DECLARE @SQL_Dimentions nvarchar(max);

IF OBJECT_ID('tempdb.dbo.##ALL_Dimentions', 'U') IS NOT NULL DROP TABLE ##ALL_Dimentions; 

SELECT @SQL_Dimentions      = 'SELECT [xxx_ID_xxx] = ROW_NUMBER() OVER (ORDER BY ' + @ListOfColumns_Dimension + '), ' + @ListOfColumns_Dimension
                                            + ' INTO ##ALL_Dimentions '
                                            + ' FROM (SELECT DISTINCT' + @ListOfColumns_Dimension + ' FROM  ' + @TableName
                                            + ' WHERE ' + (SELECT [ColumnName] FROM @DIM_TAB WHERE [DIM_ID] = @DIM_ID) + ' IS NOT NULL ';
                                            SELECT @DIM_ID = @DIM_ID + 1;
            WHILE @DIM_ID <= (SELECT MAX([DIM_ID]) FROM @DIM_TAB)
            BEGIN
            SELECT @SQL_Dimentions = @SQL_Dimentions + 'AND ' + (SELECT [ColumnName] FROM @DIM_TAB WHERE [DIM_ID] = @DIM_ID) +  ' IS NOT NULL ';
            SELECT @DIM_ID = @DIM_ID + 1;
            END

SELECT @SQL_Dimentions   = @SQL_Dimentions + ' )x';

EXECUTE SP_EXECUTESQL  @SQL_Dimentions;

--#######################################################################################################################
--###| Step 4 - Preparing table with all possible connections between Stable columns excluding NULLs
--#######################################################################################################################
DECLARE @StabPos_TAB TABLE ([StabPos_ID] smallint, [ColumnName] nvarchar(128))
INSERT INTO @StabPos_TAB 
SELECT [StabPos_ID] = ROW_NUMBER() OVER(ORDER BY [ColumnName]), [ColumnName] FROM #ColumnListWithActions WHERE [Action] = 'S';

DECLARE @StabPos_ID smallint;
SELECT      @StabPos_ID = 1;

DECLARE @SQL_MainStableColumnTable nvarchar(max);

IF OBJECT_ID('tempdb.dbo.##ALL_StableColumns', 'U') IS NOT NULL DROP TABLE ##ALL_StableColumns; 

SELECT @SQL_MainStableColumnTable       = 'SELECT xxx_ID_xxx = ROW_NUMBER() OVER (ORDER BY ' + @ListOfColumns_Stable + '), ' + @ListOfColumns_Stable
                                            + ' INTO ##ALL_StableColumns '
                                            + ' FROM (SELECT DISTINCT' + @ListOfColumns_Stable + ' FROM  ' + @TableName
                                            + ' WHERE ' + (SELECT [ColumnName] FROM @StabPos_TAB WHERE [StabPos_ID] = @StabPos_ID) + ' IS NOT NULL ';
                                            SELECT @StabPos_ID = @StabPos_ID + 1;
            WHILE @StabPos_ID <= (SELECT MAX([StabPos_ID]) FROM @StabPos_TAB)
            BEGIN
            SELECT @SQL_MainStableColumnTable = @SQL_MainStableColumnTable + 'AND ' + (SELECT [ColumnName] FROM @StabPos_TAB WHERE [StabPos_ID] = @StabPos_ID) +  ' IS NOT NULL ';
            SELECT @StabPos_ID = @StabPos_ID + 1;
            END

SELECT @SQL_MainStableColumnTable    = @SQL_MainStableColumnTable + ' )x';

EXECUTE SP_EXECUTESQL  @SQL_MainStableColumnTable;

--#######################################################################################################################
--###| Step 5 - Preparing table with all options ID
--#######################################################################################################################

DECLARE @FULL_SQL_1 NVARCHAR(MAX)
SELECT @FULL_SQL_1 = ''

DECLARE @i smallint

IF OBJECT_ID('tempdb.dbo.##FinalTab', 'U') IS NOT NULL DROP TABLE ##FinalTab; 

SELECT @FULL_SQL_1 = 'SELECT t.*, dim.[xxx_ID_xxx] '
                                    + ' INTO ##FinalTab '
                                    +   'FROM ' + @TableName + ' t '
                                    +   'JOIN ##ALL_Dimentions dim '
                                    +   'ON t.' + (SELECT [ColumnName] FROM @DIM_TAB WHERE [DIM_ID] = 1) + ' = dim.' + (SELECT [ColumnName] FROM @DIM_TAB WHERE [DIM_ID] = 1);
                                SELECT @i = 2                               
                                WHILE @i <= (SELECT MAX([DIM_ID]) FROM @DIM_TAB)
                                    BEGIN
                                    SELECT @FULL_SQL_1 = @FULL_SQL_1 + ' AND t.' + (SELECT [ColumnName] FROM @DIM_TAB WHERE [DIM_ID] = @i) + ' = dim.' + (SELECT [ColumnName] FROM @DIM_TAB WHERE [DIM_ID] = @i)
                                    SELECT @i = @i +1
                                END
EXECUTE SP_EXECUTESQL @FULL_SQL_1

--#######################################################################################################################
--###| Step 6 - Selecting final data
--#######################################################################################################################
DECLARE @STAB_TAB TABLE ([STAB_ID] smallint, [ColumnName] nvarchar(128))
INSERT INTO @STAB_TAB 
SELECT [STAB_ID] = ROW_NUMBER() OVER(ORDER BY [ColumnName]), [ColumnName]
FROM #ColumnListWithActions WHERE [Action] = 'S';

DECLARE @VAR_TAB TABLE ([VAR_ID] smallint, [ColumnName] nvarchar(128))
INSERT INTO @VAR_TAB 
SELECT [VAR_ID] = ROW_NUMBER() OVER(ORDER BY [ColumnName]), [ColumnName]
FROM #ColumnListWithActions WHERE [Action] = 'V';

DECLARE @y smallint;
DECLARE @x smallint;
DECLARE @z smallint;

DECLARE @FinalCode nvarchar(max)

SELECT @FinalCode = ' SELECT ID1.*'
                                        SELECT @y = 1
                                        WHILE @y <= (SELECT MAX([xxx_ID_xxx]) FROM ##FinalTab)
                                            BEGIN
                                                SELECT @z = 1
                                                WHILE @z <= (SELECT MAX([VAR_ID]) FROM @VAR_TAB)
                                                    BEGIN
                                                        SELECT @FinalCode = @FinalCode +    ', [ID' + CAST((@y) as varchar(10)) + '.' + (SELECT [ColumnName] FROM @VAR_TAB WHERE [VAR_ID] = @z) + '] =  ID' + CAST((@y + 1) as varchar(10)) + '.' + (SELECT [ColumnName] FROM @VAR_TAB WHERE [VAR_ID] = @z)
                                                        SELECT @z = @z + 1
                                                    END
                                                    SELECT @y = @y + 1
                                                END
        SELECT @FinalCode = @FinalCode + 
                                        ' FROM ( SELECT * FROM ##ALL_StableColumns)ID1';
                                        SELECT @y = 1
                                        WHILE @y <= (SELECT MAX([xxx_ID_xxx]) FROM ##FinalTab)
                                        BEGIN
                                            SELECT @x = 1
                                            SELECT @FinalCode = @FinalCode 
                                                                                + ' LEFT JOIN (SELECT ' +  @ListOfColumns_Stable + ' , ' + @ListOfColumns_Variable 
                                                                                + ' FROM ##FinalTab WHERE [xxx_ID_xxx] = ' 
                                                                                + CAST(@y as varchar(10)) + ' )ID' + CAST((@y + 1) as varchar(10))  
                                                                                + ' ON 1 = 1' 
                                                                                WHILE @x <= (SELECT MAX([STAB_ID]) FROM @STAB_TAB)
                                                                                BEGIN
                                                                                    SELECT @FinalCode = @FinalCode + ' AND ID1.' + (SELECT [ColumnName] FROM @STAB_TAB WHERE [STAB_ID] = @x) + ' = ID' + CAST((@y+1) as varchar(10)) + '.' + (SELECT [ColumnName] FROM @STAB_TAB WHERE [STAB_ID] = @x)
                                                                                    SELECT @x = @x +1
                                                                                END
                                            SELECT @y = @y + 1
                                        END

SELECT * FROM ##ALL_Dimentions;
EXECUTE SP_EXECUTESQL @FinalCode; 
```

从执行第一个查询（通过传递源数据库和表名），您将获得第二个 SP 的预先创建的执行查询，您所要做的就是定义来自您的源的列：+ 稳定 + 值（将被使用基于此集中值）+ Dim（您要用来作为透视的列）

名称和数据类型将自动定义！

我不能将它推荐给任何生产环境，但它可以满足临时 BI 请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-07T15:30:22.127

请试试

```
CREATE TABLE pvt (Present int, [Absent] int);
GO
INSERT INTO pvt VALUES (10,40);
GO
--Unpivot the table.
SELECT Code, Value
FROM 
   (SELECT Present, Absent
   FROM pvt) p
UNPIVOT
   (Value FOR Code IN 
      (Present, [Absent])
)AS unpvt;
GO

DROP TABLE pvt 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-20T05:46:53.170

另一个非常有用的选择是起诉 CROSS APPLY

```
-- Original data
SELECT * FROM (VALUES ('1', 1, 2, 3),('2', 11, 22, 33)) AS Stage(id,col1,col2,col3)

-- row to columns using CROSS APPLY
SELECT Stage.id,v.idd, v.colc
FROM (VALUES ('1', 1, 2, 3),('2', 11, 22, 33)) AS Stage(id,col1,col2,col3)
CROSS APPLY (VALUES ('col1', col1),('col2', col2),('col3', col3)) AS v(idd,colc)
GO 
```

# git - 如何解决 git 说“在合并之前提交更改或存储它们”？

> ID：15745045
> 
> 赞同：946
> 
> 时间：2013-04-01T14:11:34.087
> 
> 标签：git, git-commit

我在本地机器上进行了一些更新，将它们推送到远程存储库，现在我试图将更改拉到服务器并收到消息；

```
error: Your local changes to the following files would be overwritten by merge:
wp-content/w3tc-config/master.php
Please, commit your changes or stash them before you can merge. 
```

于是我跑了，

```
git checkout -- wp-content/w3tc-config/master.php 
```

又试了一次，我得到了同样的信息。我假设这`w3tc`改变了服务器上配置文件中的某些内容。我不在乎本地副本或远程副本是否在服务器上（我想远程副本是最好的），我只想能够合并我的其余更改（插件更新）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1644
> 
> 时间：2013-04-01T14:34:59.827

您不能与本地修改合并。Git 可以保护您免于丢失潜在的重要更改。

你有三个选择：

*   ## 使用提交更改

    ```
    git commit -m "My message" 
    ```

*   ## 把它藏起来。

    存储充当堆栈，您可以在其中推送更改，并以相反的顺序弹出它们。

    要存储，请键入

    ```
    git stash 
    ```

    进行合并，然后拉出 stash：

    ```
    git stash pop 
    ```

*   ## 放弃本地更改

    使用`git reset --hard`
    或`git checkout -t -f remote/branch`

    ## 或者：放弃特定文件的本地更改

    使用`git checkout filename`

* * *

## 回答 #2

> 赞同：108
> 
> 时间：2015-06-04T06:58:58.023

```
git stash
git pull <remote name> <remote branch name> (or) switch branch
git stash apply --index 
```

第一个命令将您的更改临时存储在[stash](https://git-scm.com/book/en/v1/Git-Tools-Stashing)中，并将它们从工作目录中删除。

第二个命令切换分支。

第三个命令恢复您存储在存储中的更改（该`--index`选项可用于确保暂存文件仍处于暂存状态）。

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2016-07-24T11:55:52.177

您可以尝试以下方法之一：

### 变基

对于简单的更改，请尝试在拉动更改时在其之上重新设置基础，例如

```
git pull origin master -r 
```

因此，它会在获取后将您当前的分支应用到上游分支之上。

这相当于:`checkout master`和`fetch`git`rebase origin/master`命令。

> 这是一种潜在的危险操作模式。它改写了历史，当您已经发布了该历史时，这并不是一个好兆头。[`git-rebase(1)`](https://git-scm.com/docs/git-rebase)除非您仔细阅读，否则不要使用此选项。

* * *

### 查看

如果您不关心本地更改，则可以临时（强制）切换到其他分支，然后将其切换回来，例如

```
git checkout origin/master -f
git checkout master -f 
```

* * *

### 重启

如果您不关心本地更改，请尝试将其重置为 HEAD（原始状态），例如

```
git reset HEAD --hard 
```

如果上面没有帮助，它可能是你的 git 规范化文件 ( `.gitattributes`) 中的规则，所以最好提交它所说的内容。或者你的文件系统不支持权限，所以你必须`filemode`在你的 git 配置中禁用。

相关：[如何强制“git pull”覆盖本地文件？](https://stackoverflow.com/q/1125968/55075)

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2018-01-25T08:20:02.980

试试这个

```
git stash save "" 
```

并再次尝试拉

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2013-11-17T22:02:24.033

所以我遇到的情况如下：

> 错误：您对以下文件的本地更改将被合并覆盖：wp-content/w3tc-config/master.php 请在合并之前提交您的更改或存储它们。

除了，在那之前，是远程的：所以实际上是这样的：

> 远程：错误：您对以下文件的本地更改将被合并覆盖：some/file.ext 请在合并之前提交您的更改或存储它们。

发生的事情是（我认为，不是 100% 肯定的）git post receive 钩子开始运行并且由于远程服务器存储库中的移动变化而搞砸了，理论上不应该被触及。

所以我最终通过跟踪 post-receive 钩子并找到了这个，不得不去服务器上的远程存储库，并且发生了变化（这不在我的本地存储库中，实际上，说它匹配，没有更改，没有提交，最新等）所以在本地，没有更改，在服务器上，然后我做了一个`git checkout -- some/file.ext`，然后本地和远程存储库实际上匹配，我可以继续工作，部署。不完全确定这种情况是如何发生的，尽管数十名开发人员加上 IT 变更可能与此有关。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2018-09-24T05:54:44.737

## **警告：这将删除未跟踪的文件，因此这不是这个问题的好答案。**

就我而言，我不想保留文件，所以这对我有用：

**Git 2.11 及更新版本：**

```
git clean  -d  -fx . 
```

**旧版 Git：**

```
git clean  -d  -fx "" 
```

* * *

**参考：** [http ://www.kernel.org/pub/software/scm/git/docs/git-clean.html](http://www.kernel.org/pub/software/scm/git/docs/git-clean.html)

*   -x 表示忽略的文件以及 git 未知的文件也会被删除。

*   -d 表示除了未跟踪的文件之外还删除未跟踪的目录。

*   -f 是强制它运行所必需的。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2019-07-25T00:59:37.107

## 要在解决此问题时记录新创建的文件：

如果您有**新创建的文件**，您可以创建一个本地更改补丁，拉入远程合并并在远程合并完成后应用您的本地补丁，如下所示：

1.  分阶段进行本地更改。（不承诺）。需要暂存来创建新创建文件的补丁（因为它们仍未被跟踪）

`git add .`

2.  创建补丁以保持记录

`git diff --cached > mypatch.patch`

3.  放弃本地更改并删除新的本地文件

`git reset --hard`

4.  拉取更改

`git pull`

5.  应用你的补丁

`git apply mypatch.patch`

Git 将合并更改并为未合并的更改创建 .rej 文件。

正如 Anu 所建议的，如果您在应用补丁时遇到问题，请尝试：

`git apply --reject --whitespace=fix mypatch.patch` 这个答案[git: patch does not apply](https://stackoverflow.com/questions/4770177/git-patch-does-not-apply/)详细讨论这个问题

享受您在功能上的持续工作，并在完成后提交您的本地更改。

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2020-01-21T06:21:01.217

对我来说，这很有效：

`git reset --hard`

进而

`git pull origin <*current branch>`

之后

`git checkout <*branch>`

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2020-08-31T23:16:34.600

这解决了我的错误：

我在分支上：“A”

```
git stash 
```

移动到主分支：

```
git checkout master 
git pull* 
```

回到我的分支：“A”

```
git checkout A 
git stash pop* 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2018-08-01T04:26:01.323

## 在拉取之前要求提交

*   混帐藏匿
*   git pull origin << 分支名 >>

## 如果需要的话 ：

*   git 存储应用

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2019-04-04T14:59:31.453

对我来说，只有`git reset --hard`工作。

提交不是一种选择，因为没有什么可提交的。

藏匿不是一种选择，因为没有什么可以藏匿的。

看起来它可能来自排除的文件，`.git/info/exclude`并且已经`git update-index --assume-unchanged <file>`编辑了一些文件。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2021-12-06T13:58:49.200

采用 ：

git reset --hard

然后 ：

git pull 起源大师

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-08-06T10:42:02.620

使用丢弃本地更改`git reset --hard`

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-03-26T06:29:15.047

就我而言，我备份然后删除了 Git 抱怨的文件，提交了，然后我终于能够签出另一个分支。

然后我替换了文件，复制回内容并继续，好像什么也没发生一样。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-12-10T03:45:31.303

这可能是由 CRLF 问题引起的。

请参阅：[为什么我应该在 Git 中使用 core.autocrlf=true？](https://stackoverflow.com/questions/2825428/why-should-i-use-core-autocrlf-true-in-)

使用它来拉取和强制更新：

```
git pull origin master
git checkout origin/master -f 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-12-14T02:01:03.727

我尝试了第一个答案：`git stash`得分最高但仍然弹出错误消息，然后我发现这篇文章提交更改而不是 stash ['Reluctant Commit'](https://www.nickang.com/git-stash/)

错误信息终于消失了：

1：`git add .`

2：`git commit -m "this is an additional commit"`

3：`git checkout the-other-file-name`

然后它起作用了。希望这个答案有帮助。:)

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-08-22T13:10:02.803

如果您使用的是***Git Extensions***，您应该能够在`Working directory`如下所示的位置找到您的本地更改：

[![在此处输入图像描述](https://i.stack.imgur.com/VObHa.png)](https://i.stack.imgur.com/VObHa.png)

如果您没有看到任何更改，可能是因为您使用了错误的子模块。所以检查所有带有潜艇图标的项目，如下所示：

[![在此处输入图像描述](https://i.stack.imgur.com/NVNqD.png)](https://i.stack.imgur.com/NVNqD.png)

当您发现一些未提交的更改时：

选择带有 的行`Working directory`，导航到***Diff***选项卡，右键单击带有铅笔（或`+`或`-`）图标的行，选择***重置以首次提交***或提交或存储或任何您想要对其执行的操作。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-02-11T15:55:11.400

大概

```
git --rebase --autostash 
```

有助于

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-02-12T16:11:09.647

在使用 reset 之前，请考虑使用 revert 以便您可以随时返回。

[https://www.pixelstech.net/article/1549115148-git-reset-vs-git-revert](https://www.pixelstech.net/article/1549115148-git-reset-vs-git-revert)

根据要求

来源：[https ://www.pixelstech.net/article/1549115148-git-reset-vs-git-revert](https://www.pixelstech.net/article/1549115148-git-reset-vs-git-revert)

**git reset vs git revert**   sonic0002 2019-02-02 08:26:39 

在使用 git 等版本控制系统维护代码时，我们不可避免地需要回滚一些由于错误或临时代码还原而导致的错误提交。在这种情况下，新手开发人员会非常紧张，因为他们可能会迷失在不影响其他人的情况下应该如何回滚更改，但对于资深开发人员来说，这是他们的日常工作，他们可以向您展示不同的方式。在这篇文章中，我们将介绍开发人员经常使用的两个主要的。

*   git 重置
*   git 还原

它们有什么区别和对应的用例？我们将在下面详细讨论它们。git reset 假设我们有以下几个提交。 [![在此处输入图像描述](https://i.stack.imgur.com/Ogayn.png)](https://i.stack.imgur.com/Ogayn.png)

提交 A 和 B 是工作提交，但提交 C 和 D 是错误提交。现在我们要回滚到提交 B 并删除提交 C 和 D。目前 HEAD 指向提交 D 5lk4er，我们只需将 HEAD 指向提交 B a0fvf8 即可实现我们想要的。使用 git reset 命令很容易。

```
git reset --hard a0fvf8 
```

执行上述命令后，HEAD 将指向提交 B。 [![在此处输入图像描述](https://i.stack.imgur.com/E9cih.png)](https://i.stack.imgur.com/E9cih.png)

但是现在remote origin还是有HEAD point to commit D，如果我们直接用**git push**推送修改，是不会更新remote repo的，需要加**-f**选项强制推送修改。

```
git push -f 
```

这种方法的缺点是一旦重置完成，HEAD 之后的所有提交都将消失。万一有一天我们发现一些提交吃掉了好的提交并想要保留它们，那就太晚了。正因为如此，许多公司禁止使用这种方法来回滚更改。

**git revert git revert****的** 用途是创建一个新的提交，它可以恢复以前的提交。HEAD 将指向新的还原提交。对于上面的 git reset 示例，我们需要做的只是恢复提交 D，然后恢复提交 C。 

```
git revert 5lk4er
git revert 76sdeb 
```

现在它创建了两个新的提交 D' 和 C'，  [![在此处输入图像描述](https://i.stack.imgur.com/tz4Ej.png)](https://i.stack.imgur.com/tz4Ej.png)

在上面的例子中，我们只有两个提交要恢复，所以我们可以一个一个地恢复。但是如果有很多提交要恢复怎么办？我们确实可以恢复一个范围。

```
git revert OLDER_COMMIT^..NEWER_COMMIT 
```

这种方法没有**git reset**的缺点，它将 HEAD 指向新创建的还原提交，并且可以直接将更改推送到远程而不使用**-f**选项。现在让我们看一个更难的例子。假设我们有三个提交，但错误的提交是第二个提交。  [![在此处输入图像描述](https://i.stack.imgur.com/9fKPP.png)](https://i.stack.imgur.com/9fKPP.png)

**使用git reset**回滚提交 B不是一个好主意，因为我们需要保留提交 C，因为它是一个好的提交。现在我们可以恢复提交 C 和 B，然后使用*cherry-pick*再次提交 C。  [![在此处输入图像描述](https://i.stack.imgur.com/gsa2Z.png)](https://i.stack.imgur.com/gsa2Z.png)

从上面的解释中，我们可以发现 git reset 和**git revert**最大的区别在于git **reset**会通过在期望的提交后删除所有更改来将分支的状态重置为先前的状态，而 git revert 将重置为先前的状态通过创建新的还原提交来状态并保留原始提交。建议在企业环境中使用 git revert 而不是 git reset 。参考：https://kknews.cc/news/4najez2.html

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2021-10-09T21:00:44.643

% git status HEAD detached at 5c Changes not staged for commit：（使用“git add ...”更新将提交的内容）（使用“git restore ...”丢弃工作目录中的更改）

# regex - 需要 SED 或 AWK 脚本来做 strlen 优化

> ID：15745046
> 
> 赞同：3
> 
> 时间：2013-04-01T14:11:34.890
> 
> 标签：regex, sed, awk

我只需要一点帮助，因为我很少接触 sed 或 awk。我正在尝试替换

```
String1.append("Hello");   // regexp to find this is: \w*\.append\(".*"\) 
```

和

```
String1.append("Hello", 5);  // note it has to figure out the length of "Hello" 
```

我需要在数十万个文件中进行搜索和替换。并且“你好可以是任何东西......包括“\n\n\n”，它应该是 3 而不是 6。例如：

```
s.append("\n\n\n");  ---> s.append("\n\n\n", 3); 
```

在此先感谢您的帮助...我想我需要 awk 才能做到这一点，所以我现在正在阅读有关 awk 基础知识的教程...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T15:26:38.303

由于您想在某些包含代码的文件上运行它，因此这里有一个完整功能的示例：

```
$ cat file
foo() {
   String1.append("Hello");
   if (bar) {
      s.append("\n\n\n");
   }
   else {
      s.append("\n\\n\n\\\n");
   }
}
$
$ cat tst.awk
match($0,/[[:alnum:]_]+\.append\(".*"\)/) {
    split(substr($0,RSTART,RLENGTH), orig, /"/)

    head = substr($0,1,RSTART-1) orig[1]
    tail = orig[3] substr($0,RSTART+RLENGTH)

    tgt = orig[2]
    gsub(/[\\][\\]/,"X",tgt)
    gsub(/[\\]/,"",tgt)

    $0 = sprintf("%s\"%s\", %d%s", head, orig[2], length(tgt), tail)
}
{ print }
$
$ awk -f tst.awk file
foo() {
   String1.append("Hello", 5);
   if (bar) {
      s.append("\n\n\n", 3);
   }
   else {
      s.append("\n\\n\n\\\n", 6);
   }
} 
```

为了可移植性，我将原始发布问题中示例中的“\w”替换为 POSIX 等效的“[[:alnum:]_]”。"\w" 将与 GNU awk 和其他一些工具一起使用，但不是所有工具和所有 awk。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T17:02:56.420

由于这是 C++，您是否考虑过使用预处理器？此外，您可以考虑使用`sizeof`运算符，而不是自己计算每个字符串的长度。

```
#define append(x) appendSize(x, sizeof(x)) 
```

当然，这假设传递给的“x”`append`始终是字符串文字（但是，如果不是，则没有查找和替换脚本也将起作用）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-01T17:17:11.313

这可能更适合作为评论，但更难显示信息。在我看来，尝试通过修改源来优化字符串长度可能不是最好的解决方案。也许有一个很好的理由，但是把它留给编译器可能是一个更好的解决方案（而且更简单）。根据编译器和选项，甚至可能不使用 strlen() 调用。编译器可以计算出常量字符串的长度。例如，考虑一下：

```
int main(int argc, char** argv)
{
   string s = argv[1];
   cout << s << endl;
   s.append( " stuff" );
   cout << s << endl;
   return 0;
} 
```

当使用 -O ( `g++ -O file.c`) 编译时，汇编的相关位是：

```
400ad2:       ba 06 00 00 00          mov    $0x6,%edx
400ad7:       be 6c 0c 40 00          mov    $0x400c6c,%esi
400adc:       48 89 e7                mov    %rsp,%rdi
400adf:       e8 0c fe ff ff          callq  4008f0 <_ZNSs6appendEPKcm@plt> 
```

注意第一`mov`条指令。它的长度 6 已经计算出来了。

使用`-O2`Microsoft 编译器 (v16.00.40219.01) 会产生类似的结果：

```
0000005C: 6A 06              push        6
0000005E: 68 00 00 00 00     push        offset ??_C@_06PNGALGA@?5stuff?$AA@
00000063: 8D 4C 24 0C        lea         ecx,[esp+0Ch]
00000067: E8 00 00 00 00     call        ?append@?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@QAEAAV12@PBDI@Z 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-01T15:02:21.967

有人请改进这个解决方案：

```
x='String1.append("Hello");'
len=`echo $x | sed 's/\\//g' | sed 's/\w*\.append("\(.*\)");/\1/' | awk '{print length($0)}'`
echo $x | sed "s/\(\w*\.append(\".*\"\)\(.*\)/\1,$len\2/" 
```

这似乎解决了最初的问题，但多行。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-01T15:31:23.853

是的 perl！

```
x='String1.append("Hello");'
echo $x | perl -pe 's/(\w*\.append\(\")(.*)(\"\);)/my($len)=length($2); $_="$1$2, ${len}$3";/e' 
```

# radius - 半径碎片

> ID：15745047
> 
> 赞同：0
> 
> 时间：2013-04-01T14:11:36.457
> 
> 标签：radius, freeradius, radius-protocol

我想知道是否有任何开放的免费半径服务器支持半径分段，即半径服务器从客户端接受大于 4k 大小限制的数据包，并将在服务器端重新组装数据包。并且一旦整个数据包组装完成，是否会成功验证数据包？

任何指针都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T16:49:35.017

我不知道，也不知道你是否能做到这一点。由于没有好的标头结构，我不能保证数据包将是“完整的”。当我们有一个“大”数据包时，我们最终会拆分它并使用带有关联值的 VSA。例如，我们有一个 VSA(AssociationID)=00512121 的临时记录和另一个具有相同关联 ID 的临时记录。你可以用 CoA 消息做很多黑魔法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T12:39:23.013

不，但是目前有一个 RFC 草案为此，而不是发明自己的方案，您应该使用草案标准。完成后，我们将为 FreeRADIUS 添加对数据包分段的支持。

[https://datatracker.ietf.org/doc/html/draft-perez-radext-radius-fragmentation-06](https://datatracker.ietf.org/doc/html/draft-perez-radext-radius-fragmentation-06)

# mongodb - Mongo 错误：无法更新节点：127.0.0.1:27017

> ID：15745056
> 
> 赞同：0
> 
> 时间：2013-04-01T14:12:23.053
> 
> 标签：mongodb, morphia

我已经在 Mongodb 和 Morphia 上配置了项目。当我尝试从 Mongodb 获取批量数据时，我在控制台上收到以下错误消息；

```
SEVERE: can't update node: 127.0.0.1:27017
java.lang.NullPointerException
        at com.mongodb.OutMessage.reset(OutMessage.java:73)
        at com.mongodb.OutMessage.<init>(OutMessage.java:51)
        at com.mongodb.OutMessage.query(OutMessage.java:38)
        at com.mongodb.DBPort.findOne(DBPort.java:127)
        at com.mongodb.DBPort.runCommand(DBPort.java:138)
        at com.mongodb.ReplicaSetStatus$Node.update(ReplicaSetStatus.java:149)
        at com.mongodb.ReplicaSetStatus.updateAll(ReplicaSetStatus.java:314)
        at com.mongodb.ReplicaSetStatus.ensureMaster(ReplicaSetStatus.java:306)
        at com.mongodb.DBTCPConnector.checkMaster(DBTCPConnector.java:396)
        at com.mongodb.ReplicaSetStatus$Updater.run(ReplicaSetStatus.java:275)
Apr 1, 2013 7:27:40 PM org.apache.coyote.http11.Http11Protocol destroy 
```

并且此错误在后端连续运行，而不会影响我的应用程序流程。我如何才能停止此错误。您的帮助将是可观的，并提前致谢 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T03:52:07.497

您能否提供详细信息（操作系统、Java、驱动程序、Morphia 版本），如果可能的话，提供 java 项目转储？

无论如何，这里有一个类似问题的参考，但由于不可复制而被关闭：[https ://jira.mongodb.org/browse/JAVA-357](https://jira.mongodb.org/browse/JAVA-357)

问候， 莫西

# javascript - 如何测试使用 javascript 循环加载图像所需的时间

> ID：15745061
> 
> 赞同：0
> 
> 时间：2013-04-01T14:12:44.040
> 
> 标签：javascript, for-loop

我正在尝试执行一些测试，以查看不同的图像需要多长时间才能返回到我的浏览器。我正在使用 javascript for 循环。但是，循环似乎在加载第一张图像之前运行，并且返回没有给出准确的答案。下面是我的代码：

```
for (var radius=1; radius<10; radius++)
{
var startTime = new Date().getTime();
var img = new Image();

img.onload = function() {
    var loadtime = new Date().getTime() - startTime;
    console.log("image with radius: "+radius+" took " + loadtime + "ms to load");
};

url="http://test"+radius+"test2.com";
img.src = url; 
} 
```

结果，我得到：

```
image with radius: 10 took 175ms to load 
image with radius: 10 took 368ms to load 
image with radius: 10 took 463ms to load 
image with radius: 10 took 608ms to load 
image with radius: 10 took 751ms to load 
image with radius: 10 took 895ms to load 
image with radius: 10 took 1038ms to load 
image with radius: 10 took 1181ms to load 
image with radius: 10 took 1324ms to load 
```

我尝试了不同的方法来尝试仅在每个图像加载后才运行循环而没有任何成功。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:05:05.400

您需要将`radius`和`startTime`变量放在一个闭包中，否则您将始终引用相同的变量：

```
function getLoadhandler(starttime, logmsg) {
    return function() {
         // get the local variables
         console.log(logmsg+": "+(starttime-Date.now()));
    };
}

for (var radius=1; radius<10; radius++) {
    var img = new Image();
    img.onload = getLoadhandler(Date.now(), "Load time of image with radius "+radius);
    img.src = "http://test"+radius+"test2.com";
} 
```

# javascript - 从变量内的函数访问 javascript 变量

> ID：15745063
> 
> 赞同：0
> 
> 时间：2013-04-01T14:12:46.427
> 
> 标签：javascript, scope

您好，我有以下问题，我不太确定如何搜索：

```
function(){
    var sites;

    var controller = {
      list: function(){
        sites = "some value";
      }
    }
  } 
```

所以问题是如何从定义为的顶部访问站点变量

> 变种网站

编辑：

这是一个更完整的部分。我正在使用 marionette.js。我不想定义附加到模块（下面的代码）变量的变量，但将其保留为模块私有，希望这是有道理的。这是有效的代码：

```
Admin.module("Site", function(Module, App, Backbone, Marionette, $, _ ) {

  Module.sites = null;

  Module.Controller = {
    list: function (id) {
      Module.sites = App.request("site:entities");
    }
  };
}); 
```

我想而不是

> 模块.sites=null;

去做

> 变种网站；

这样的事情确实有所作为吗？因为在第一种情况下，我将从外部定义一个可访问的变量，而在第二种情况下，它将是一个私有变量。我对javascript有点新，所以请尽量让它简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:38:05.030

I have found some info on this: sadly what i am trying to do doesn't seem possible.

> [Can I access a private variable of a Marionette module in a second definition of that module?](https://stackoverflow.com/questions/14952491/can-i-access-a-private-variable-of-a-marionette-module-in-a-second-definition-of)

So i guess i have to do _variable to make developers know its private.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T14:16:16.653

如果您正在寻找全局访问，只需先在函数外部声明变量，然后对函数内部的变量进行更改，然后您就可以在需要时获取值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T16:34:21.967

免责声明：我没有使用 Marionette 的经验，但是，您所描述的听起来非常可行。

JavaScript 最强大的（在我看来）特性之一是闭包。这意味着从另一个函数中声明的任何函数都可以访问在外部函数中声明的变量。

例如：

```
var func;
function foo() {
    var answer = 42;
    func = function () {
        // I have access to variable answer from in here.
        return answer++;
    };
}

// By calling foo(), I will assign the function func that has access "answer"
foo();

// Now I can call the func() function and it has access to the "answer"
// variable even though it was in a scope that doesn't exist anymore.
// Outputs:
// 42
// 43
console.log(func());
console.log(func()); 
```

这意味着如果您按照您的描述从模块定义函数中声明 var 站点，您应该可以从任何内部匿名函数中访问它。***唯一***的例外是 Marionette 正在重写您的函数（通过使用[Function](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function)函数和 toString()），这似乎不太可能但可能。

您的原始示例应该如上所述，我怀疑与您的范围无关的代码还有其他问题。

# c++ - 为什么eclipse链接失败？

> ID：15745067
> 
> 赞同：0
> 
> 时间：2013-04-01T14:13:05.570
> 
> 标签：c++, mysql, eclipse

我尝试用 eclipse 链接 libmysql.lib 和 mysqlclient.lib 文件。要做到这一点，

在 GCC C++ 链接器中，

我选择库并选择包含 libmysql.lib 和 mysqlclient.lib 文件的 lib 目录。

但这不起作用。因为我仍然收到此错误

```
/home/mert/workspace1/Project484/Debug/../src/main.cpp:99: undefined reference to `mysql_init'
/home/mert/workspace1/Project484/Debug/../src/main.cpp:100: undefined reference to `mysql_real_connect' 
```

问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:32:27.377

前往项目 | 属性 | C/C++ 构建 | 设置 | 工具设置 | GCC C++ 链接器 | 库和添加`mysql`和`mysqlclient`那里。

顺便说一句，可以通过在控制台上运行来获取正确的链接器标志：

```
mysql_config --libs 
```

您可以尝试将此行添加到 Project | 属性 | C/C++ 构建 | 设置 | 工具设置 | GCC C++ 链接器 | 各种各样的。不过，我不确定它是否会起作用，因为我从未尝试过。

（编译标志也是如此：它们是通过运行获得的`mysql_config --cflags`。）

*编辑*

显然，试图在 linux 下链接 windows 库是问题所在。

# ruby-on-rails - rails will_paginate 在视图中呈现错误

> ID：15745069
> 
> 赞同：1
> 
> 时间：2013-04-01T14:13:10.603
> 
> 标签：ruby-on-rails, will-paginate

我无法使用 will_paginate 呈现我的项目。我收到这个错误

```
undefined method `total_pages' for #<Enumerator:0x007fe098856378> 
```

这是我在控制器上的分页

```
@com = @text.comments.sorted.paginate(:page => 1, :per_page => 30) 
```

和我的视图文件代码。

```
 <% will_paginate @com.each do |text| %>
<div class="comments"> <p class="time"><%= Time.now %></p> 
<p><%=  text.text %></p></div> 
```

控制器文件是

```
def show
    @text = Microblog.find(params[:id])
    @com = @text.comments.sorted.paginate(:page => 1, :per_page => 2)
    @rating = (@text.up - @text.down)
  end 
```

和模型文件

```
class Comment < ActiveRecord::Base
    attr_accessible :text, :microblog_id
    belongs_to :microblog
    scope :sorted, order("comments.created_at DESC")
end 
```

我在这里找不到问题所在:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T15:41:15.943

您正在将分页小部件 (< 1 2 3 >) 与可用元素列表混合。你想要的是：

```
<% will_paginate @com %>
<% @com.each do |text| %>
   <div class="comments"> <p class="time"><%= Time.now %></p> 
   <p><%=  text.text %></p></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T16:38:53.743

问题解决了！用来`:page => params[:page]`代替`:page => 1` 谢谢大家

# javascript - JS关闭表单提交窗口

> ID：15745070
> 
> 赞同：0
> 
> 时间：2013-04-01T14:13:11.770
> 
> 标签：javascript

在帖子底部更新：

我有一个页面，当按下按钮时，会弹出一个带有表单的新窗口。下面是我打开弹出窗口的地方。

```
<a><span class="add-on"><i class="icon-plus" style="color: green;" onclick="window.open('<?php echo $this->Html->Url(array('controller' => 'customers', 'action' => 'add?popup')); ?>', 'Add Customer', 'height=630, width=430')"></i></span></a> 
```

提交表单后，我需要关闭该窗口。我现在遇到的问题是在表单完全提交之前窗口正在关闭。

弹出窗口代码：

```
<fieldset style="padding-left: 15px;">
<legend>Add Customer</legend>

<?php echo $this->Form->create('Customer', array('inputDefaults' => array('div' => false, 'label' => false))); ?>
    <div class="control-group">
        <div class="input-prepend">
            <span class="add-on"><i class="icon-user"></i></span>
            <?php echo $this->Form->input('first_name', array('placeholder' => 'First Name')); ?>
        </div>
    </div>

    <div class="control-group">
        <div class="input-prepend">
            <span class="add-on"><i class="icon-user"></i></span>
            <?php echo $this->Form->input('last_name', array('placeholder' => 'Last Name')); ?>
        </div>
    </div>

    <div class="input-prepend">
        <span class="add-on"><i class="icon-globe"></i></span>
        <?php echo $this->Form->input('location', array('placeholder' => 'Location')); ?>
    </div>

    <div class="control-group">
        <div class="input-prepend">
            <span class="add-on"><i class="icon-phone"></i></span>
            <?php echo $this->Form->input('phone_number', array('class' => 'maskedPhone', 'placeholder' => 'Phone Number')); ?>
        </div>
    </div>

    <div class="control-group">
        <div class="input-prepend">
            <span class="add-on"><i class="icon-envelope"></i></span>
            <?php echo $this->Form->input('email', array('placeholder' => 'Email')); ?>
        </div>
    </div>

    <!-- Close Form -->
<?php echo $this->Form->end(array(
    'label' => 'Save Customer',
    'id' => 'saveCust',
    'class' => 'btn btn-primary',
    'div' => false
)); ?> 
```

```
<?php echo $this->Html->script('jquery.maskedinput.min', array('inline' => false));
  echo $this->Html->script('maskedinput', array('inline' => false));

$this->start('script'); ?>
    <script type="text/javascript">
        $(document).ready(function () {     
            inputs.maskedInputs();

            // Get queryString to close popup window
            var queryString = window.location.search.substring(1);
            if (queryString == "popup"){
                $('#CustomerAddForm').submit(function() {
                    window.close();                 
                });                 
            }
        });
    </script>
<?php $this->end(); ?> 
```

* * *

现在尝试使用 Ajax 调用没有运气：

```
$('#saveCust').click(function() {
                    alert("test");
                    $.ajax({
                        type: "POST",
                        url: "<?php echo $this->Html->Url(array('controller' => 'Customers', 'action' => 'add')); ?>",
                        data: $('#CustomerAddForm').serialize(),
                        success: function(data)
                        {
                            alert("Test");
                            window.close();
                        }
                    })
                });
                return false; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T14:15:04.597

你有一个竞争条件，window.close 总是会赢。当表单完成提交时，您需要关闭。

要么将其转换为使用 Ajax 调用，要么在表单提交的响应中调用 window.close()。

# c# - 如何为属性分配默认值

> ID：15745074
> 
> 赞同：1
> 
> 时间：2013-04-01T14:13:25.750
> 
> 标签：c#, c#-4.0, servicestack

CustomerService 是一个网络服务，它被成功调用，但我无法在 Any 方法中访问 SelectCommand。我想我在这里遗漏了一些东西，任何人都可以建议。

```
public class CustomerService : Service
{
  private readonly IDbConnection _dbConnection; // injected successfully
  public ServiceCommand SelectCommand {get;set;}

  public CustomerService(IDBConnection dbConnection)
  {        
         _dbConnection = dbConnection;            
  }

  public Customer Any(CustomerRequest request)
  {
       //_dbconnection is available           

       //but selectcommand is null here   

       //db operations     

  }
}

[Route("/customers")]
public class CustomerRequest
{
    public string name { get; set; }
}

public class ServiceCommand
{
    public string SQL { get; set; }        
    public CommandType CommandType { get; set; }

    public ServiceCommand()
    {
        CommandType = CommandType.Text;
    }
} 
```

我已经通过继承初始化了连接`AppHostBase`

```
 public override void Configure(Container container) {
        container.Register<IDbConnectionFactory>(
          c => new OrmLiteConnectionFactory(ConfigurationManager.ConnectionStrings["default"].ConnectionString,
                                            SqlServerDialect.Provider));

        container.Register<IDbConnection>(c => c.Resolve<IDbConnectionFactory>().OpenDbConnection()).ReusedWithin(ReuseScope.Request);
      } 
```

当我尝试通过显式设置 SelectCommand 来编写单元测试时，它可以工作。但是我无法通过不设置值来测试它是如何工作的，我假设它采用构造函数中设置的默认值。

```
 var service = new CustomerService(InMemoryTestDatabase.OpenDbConnection());
 service.SelectCommand = new ServiceCommand() { SQL = "SELECT * FROM customers" }; 
```

**编辑**

构造函数中的 IDbConnection 工作正常，但我的问题是 SelectCommand 是这里的公共属性。我的意图是，如果正常调用 web 服务，我会通过在构造函数中设置如下查询来访问实际数据库。

```
SelectCommand = new ServiceCommand() {Text = "sp_getcustomers"}; 
```

但是当我测试它时，我会将它设置为 sqllite 数据库并将我的查询更改为表“select * from customers”，因为 sqllite 不支持 sp。如前所述，单元测试工作正常，但服务无法初始化公共属性。

如果我像下面这样初始化一个与 _dbConnection 相同的私有只读属性，它可以正常工作，但我想显式地为服务注入命令。

```
private readonly IDbConnection _dbConnection;
private readonly ServiceCommand _selectCommand;
public CustomerService(IDBConnection dbConnection)
{
   __dbConnection = dbConnection;
   _selectCommand = new ServiceCommand(){Text = "sp_getCustomers"};
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T15:07:20.800

请务必包含有关您的问题的所有相关信息和上下文，因为如果没有关于您如何使用它的非手头知识，就无法推断出这一点。例如，您的国际奥委会是什么样的？

`IDbConnection`你在你的构造函数中要求一个：

```
public CustomerService(IDBConnection dbConnection)
{
     SelectCommand = new ServiceCommand();
} 
```

但很可能你只是注册一个`IDbConnectionFactory`，所以不存在任何注册的依赖`IDbConnection`。

如果您从[Service](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/Service.cs)类继承，您已经通过 base.Db 属性获得了注入[和](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/Service.cs#L74)`IDbConnectionFactory`访问权限：`IDbConnection`

```
private IDbConnection db;
public virtual IDbConnection Db
{
    get { return db ?? (db = TryResolve<IDbConnectionFactory>().Open()); }
} 
```

### 所有公共财产都由国际奥委会注入

**SelectCommand**属性为 null的原因是因为它是公共属性。您的所有服务公共属性都试图由您的注册依赖项解析，并且因为您没有任何类型的注册依赖项，`ServiceCommand`所以它被 null 覆盖。如果这是在你的构造函数中定义的，它会抛出一个运行时异常，因为它只是一个属性，它被初始化为 null。

如果您将其可见性更改`SelectCommand`为受保护的、私有的、内部的或静态的，则 IOC 不会尝试将其注入。

# c# - NHibernate - 向实体添加评论属性（使用加入存储）

> ID：15745077
> 
> 赞同：1
> 
> 时间：2013-04-01T14:13:39.687
> 
> 标签：c#, nhibernate, orm, fluent-nhibernate, nhibernate-mapping

我有一个系统，我需要能够在 Customer 和 Location 模型上添加 Comment 字段，但我无法触及现有表的架构。但是，我可以添加一个评论表。我已经简化了这个例子。我们希望能够将此评论添加到更多模型中，它们都使用 Guid 作为 Id。

该现有系统是具有自己的数据访问层的第 3 方系统。

我们才刚刚开始接触 NHibernate。据我所知，它看起来像一个加入地图。

例子：

```
public class Customer 
{
    public Guid Id { get; private set; }
    public string FirstName { get; private set; }
    public string LastName { get; private set; }
    public string Comment { get; set; }
}    

public class Location
{
    public Guid Id { get; private set; }
    public string Name { get; private set; }
    public string Address { get; private set; }
    public string Comment { get; set; }
} 
```

注意：我们确定我们希望评论是一对一的关系，而不是一对多的关系。

如何配置一个单独的表，只捕获 Id 和 Comment？我正在寻找要使用的正确术语。我正在寻找带有 XML 的示例（如果可能的话，还有 Fluent 配置）。我想将所有对象的评论保留在一张表中。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:33:48.747

如果您无法更改数据库架构，那么您的选择将非常有限。也许，你可以使用映射来做到这一点。看看这里：

[http://ayende.com/blog/3961/nhibernate-mapping-join](http://ayende.com/blog/3961/nhibernate-mapping-join)

尝试在所有实体的映射中使用相同的列名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T19:54:16.373

如果您可以添加注释表（以及现有表中的相应键列），则流畅的映射看起来像

```
public class CustomerMap : ClassMap<Customer>{
  public CustomerMap(){
        //...other columns mappings

        References(c=>c.Comment).Column("CommentId");
  }
} 
```

并为其他实体重复它。您也可以在那里设置所需的 fetch-mode(join) 和其他操作。我在`References`那里写过（这么多对一），但如果你需要一对一的映射，那差别不大

# android - 有没有办法将MySql数据库连接到eclipse？

> ID：15745078
> 
> 赞同：0
> 
> 时间：2013-04-01T14:13:40.213
> 
> 标签：android, mysql, eclipse, connection

有没有办法使用eclipse建立与mysql数据库的连接。另外，如果可以连接，是否会以这样的方式进行连接，即使应用程序也可以连接到 mysql 数据库

是的，这个问题有点愚蠢，但与其一直怀疑，我宁愿看起来有点愚蠢，问一些愚蠢的问题！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T14:18:00.113

您可以使用数据库工具将 MySql 数据库连接到 Eclipse。[在此处](http://www.vogella.com/articles/EclipseDataToolsPlatform/article.html)查看教程。

您不能将 Android 应用程序直接连接到 MySql 数据库。您需要提供一个与数据库连接并允许 Android 应用程序对其进行读/写操作的 Web 服务。

# ruby-on-rails - 获取创建记录的时间/日期

> ID：15745081
> 
> 赞同：1
> 
> 时间：2013-04-01T14:13:53.633
> 
> 标签：ruby-on-rails

在 Rails 中，是否有一个自动实例化的字段包含此信息，或者我是否必须在模型中创建一个单独的列来跟踪它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T14:16:18.497

如果您有名为`created_at`and的列`updated_at`，它们将自动更新。您可以在迁移中将`t.timestamps`其缩写为 ，现在默认显示（或上次创建模型时显示）。如果您谈论的是存储在数据库中的对象，那么除了表中的内容之外，没有关于它的信息。

附带说明一下，如果您在谈论 ActiveRecord 的实例，最好说“记录”而不是“对象”。后者指的是您实例化的任何对象，无论是您检索的记录还是简单的`Foo.new`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T14:15:46.050

Rails 自动存储每条记录的创建时间`created_at`，还存储记录的最后更新时间`updated_at`

# google-apps-script - Google 脚本中的时间驱动函数

> ID：15745084
> 
> 赞同：0
> 
> 时间：2013-04-01T14:14:05.247
> 
> 标签：google-apps-script

我正在尝试使用 Google 脚本每小时从网站下载数据。代码如下所示。当我手动运行函数 CSV_sgj 时，我可以在电子邮件中收到所需的信息。但是当我将功能设置为时间驱动（每小时）时，我得到的都是#VALUE！。

我发现了一个类似的问题并试图改变

```
var sheet = SpreadsheetApp.getActiveSheet(); 
```

至

```
var sheet = SpreadsheetApp.openById("0AtAYfCLk3-h7dDBnckdSZkNXbkZBLXBHV200SGtuZnc"); 
```

但它仍然不起作用。

非常感谢您的帮助！

完整代码如下。

```
function readRows() {
  var sheet = SpreadsheetApp.getActiveSheet();
  var rows = sheet.getDataRange();
  var numRows = rows.getNumRows();
  var values = rows.getValues();

  for (var i = 0; i <= numRows - 1; i++) {
    var row = values[i];
    Logger.log(row);
  }
};

/**
 * Adds a custom menu to the active spreadsheet, containing a single menu item
 * for invoking the readRows() function specified above.
 * The onOpen() function, when defined, is automatically invoked whenever the
 * spreadsheet is opened.
 * For more information on using the Spreadsheet API, see
 * https://developers.google.com/apps-script/service_spreadsheet
 */

function CSV_sgj() {
  readRows();
  var sheet = SpreadsheetApp.getActiveSheet();
  var range = sheet.getRange("A1:N32");
  var data = range.getValues();

  var csv = "";
  for (var i = 0; i < data.length; ++i) {
    csv += data[i].join(",") + "\r\n";
  }
  var csvFiles = [{fileName:"PSI5.csv", content:csv}]
  MailApp.sendEmail("xxxxxx@gmail.com", "CSV", "", {attachments: csvFiles}); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T05:49:52.300

当你使用

```
var sheet = SpreadsheetApp.openById("0AtAYfCLk3-h7dDBnckdSZkNXbkZBLXBHV200SGtuZnc"); 
```

返回的值是 a`spreadsheet object`而你想要的是 a `sheet object`... 所以你必须通过它的名称或索引号来获取工作表。我建议您相应地更改变量名称以保持清晰：

```
var ss= SpreadsheetApp.openById("0AtAYfCLk3-h7dDBnckdSZkNXbkZBLXBHV200SGtuZnc");
var sheet = ss.openByName('sheet1');// or any name you use (a string)
//or by its index
var sheet = ss.getSheets()[0] ;// 0 is the index of the first sheet in the spreadsheet (integer) 
```

# java - 如何在不使用映射文件的情况下从数据库生成实体类？

> ID：15745087
> 
> 赞同：1
> 
> 时间：2013-04-01T14:14:15.127
> 
> 标签：java, hibernate, annotations

我有数据库表和休眠配置文件。事情是我想从这些表中生成实体类（使用注释而不是映射文件）。我正在使用 Netbeans，并且有一个选项“从数据库创建 Hibernate 映射文件和 POJO”，但我不想处理映射文件，而不是我想使用注释。我怎样才能做到这一点？

# blackberry - 如何使用 TableLayoutManager 用项目填充屏幕

> ID：15745088
> 
> 赞同：1
> 
> 时间：2013-04-01T14:14:15.857
> 
> 标签：blackberry, blackberry-jde

我尝试在链接中实现第三个示例：http: [//devblog.blackberry.com/2009/10/how-to-use-table-view-layout/](http://devblog.blackberry.com/2009/10/how-to-use-table-view-layout/)

我做了一个简单的应用程序来尝试布局，但项目没有填满屏幕并停留在它的左侧。我想在示例链接中获得屏幕截图的确切视图。但是我的应用看起来像这样：

![在此处输入图像描述](https://i.stack.imgur.com/tjyOz.png)

当我指向屏幕截图时，我想要右侧的 innerTable 项目。

这是我的代码：

```
TableLayoutManager outerTable = new TableLayoutManager(new int[]{
        TableLayoutManager.USE_PREFERRED_SIZE,
        TableLayoutManager.SPLIT_REMAINING_WIDTH
       },USE_ALL_WIDTH);

TableLayoutManager innerTable = new TableLayoutManager(new int[]{
                TableLayoutManager.USE_PREFERRED_SIZE,
                TableLayoutManager.USE_PREFERRED_SIZE
               },TableLayoutManager.USE_ALL_WIDTH);
TableLayoutManager innerTable2 = new TableLayoutManager(new int[]{
                TableLayoutManager.USE_PREFERRED_SIZE,
                TableLayoutManager.USE_PREFERRED_SIZE
               },0);

innerTable.add(new LabelField("titleField"));
innerTable.add(new LabelField("title"));
innerTable.add(new LabelField("descriptionfield"));
innerTable.add(new LabelField("description"));
innerTable.add(new LabelField("rating field"));
innerTable.add(new LabelField("***"));
outerTable.add(new BitmapField(Bitmap.getBitmapResource("testimg.png"),Field.FOCUSABLE));
outerTable.add(innerTable);

innerTable2.add(new LabelField("titleField"));
innerTable2.add(new LabelField("title"));
innerTable2.add(new LabelField("descriptionfield"));
innerTable2.add(new LabelField("description"));
innerTable2.add(new LabelField("rating field"));
innerTable2.add(new LabelField("***"));
outerTable.add(new BitmapField(Bitmap.getBitmapResource("testimg.png"),Field.FOCUSABLE));
outerTable.add(innerTable2);
add(outerTable); 
```

你有什么主意吗 ？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:21:00.630

尝试使用每个字段对齐标志。例如：

```
innerTable2.add(new LabelField("titleField", DrawStyle.RIGHT | Field.USE_ALL_WIDTH)); 
```

# xslt - 在 XSLT 中填充零

> ID：15745090
> 
> 赞同：14
> 
> 时间：2013-04-01T14:14:23.630
> 
> 标签：xslt, padding

有没有在左边补零的功能？

我正在尝试做的要求是：

*   我们不知道即将到来的输入字符串长度。
*   如果小于 20，我们必须在左侧填充零。
*   如果输入字符串长度为 10，那么我们必须在左侧填充 10 个零。

## 例子

输入：

> 1234567899

输出：

> 00000000001234567899

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-01T14:27:59.040

format-number 函数可用于此：

```
<xsl:value-of select="format-number(1234567899, '00000000000000000000')" /> 
```

# javascript - TypeError: $(...).highcharts 不是函数

> ID：15745093
> 
> 赞同：12
> 
> 时间：2013-04-01T14:14:49.953
> 
> 标签：javascript, jquery, highcharts

我已经包含了 jQuery_1.8.2 js 文件，然后包含了这个代码，但是我得到了错误..

> TypeError: $(...).highcharts 不是函数 [中断此错误]
> 
> 数据：[3.9、4.2、5.7、8.5、11.9、15.2、17.0、16.6、14.2、10.3、6.6、4.8]

我刚刚创建了一个带有 id 容器的 div ..我哪里出错了..任何放置 js 文件的顺序都错了..？如何解决这个问题..？

```
 <script>
        buildHighCharts();
        function buildHighCharts(){
                $('#container').highcharts({
                    chart: {
                        type: 'line',
                        marginRight: 130,
                        marginBottom: 25
                    },
                    title: {
                        text: 'Monthly Average Temperature',
                        x: -20 //center
                    },
                    subtitle: {
                        text: 'Source: WorldClimate.com',
                        x: -20
                    },
                    xAxis: {
                        categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',
                            'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
                    },
                    yAxis: {
                        title: {
                            text: 'Temperature (°C)'
                        },
                        plotLines: [{
                            value: 0,
                            width: 1,
                            color: '#808080'
                        }]
                    },
                    tooltip: {
                        valueSuffix: '°C'
                    },
                    legend: {
                        layout: 'vertical',
                        align: 'right',
                        verticalAlign: 'top',
                        x: -10,
                        y: 100,
                        borderWidth: 0
                    },
                    series: [{
                        name: 'Tokyo',
                        data: [7.0, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6]
                    },  {
                        name: 'London',
                        data: [3.9, 4.2, 5.7, 8.5, 11.9, 15.2, 17.0, 16.6, 14.2, 10.3, 6.6, 4.8]
                    }]
                });
            }
            </script>

            <script type="text/javascript" src="js/highcharts1/highcharts-2.3.5.js"></script>
            <script type="text/javascript" src="js/highcharts1/modules/exporting-2.3.5.js"></script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T14:16:21.043

> 任何放置js文件的顺序错误..？

是的。您的 highcharts 设置代码需要位于加载 highcharts 库的脚本标记**之后。**

```
<script type="text/javascript" src="js/highcharts1/highcharts-2.3.5.js"></script>
<script type="text/javascript" src="js/highcharts1/modules/exporting-2.3.5.js"></script>
<script>
    function buildHighCharts(){ ... }
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T14:16:10.943

在将其添加到页面之前，您正在使用 highcharts。包括需要先来！

# javascript - Android Phonegap - 如何打开原生谷歌地图应用程序

> ID：15745096
> 
> 赞同：17
> 
> 时间：2013-04-01T14:14:54.303
> 
> 标签：javascript, android, google-maps, cordova, geolocation

我正在使用 Phonegap 开发一个 Android 应用程序，并且无法弄清楚如何打开本地 Google Maps 应用程序以显示方向。我通过插入 URL 打开地图没有任何问题，但打开应用程序让我很难过。到目前为止，我只能在iOS平台上找到Phonegap相关的开发建议。

我已将 Google 地图添加到白名单权限，在我的脚本标签中包含正确的 Cordova.js 文件和 Google 地图链接，在我的 AndroidManifest.xml 文件中具有正确的权限，在我的构建路径中包含 Cordova.jar 和 Google Map API ，res目录下有Phonegap xml文件夹，我的assets/www目录下有js文件，libs目录下有jar文件。

我要完成的工作：

2\. 谷歌地图打开显示从用户当前位置到点击链接位置的路线。

下面的示例在我的 Android 设备上的工作方式与在 iOS 上的工作方式完全相同，但显然没有打开 Google Maps 应用程序的操作。

```
<a> href="http://maps.google.com/maps?q=TD Washington DC"><img src="img/ico_pin.png" />White House</a></a> 
```

第二个示例通过包含结束位置添加到第一个示例，尽管我无法弄清楚如何插入当前位置。最重要的是，它仍然没有打开 Google Maps 应用程序。

```
<a href="javascript:openMaps('daddr=1600+Pennsylvania+Ave+NW+Washington+DC+20500+USA');"><img src="img/ico_pin.png" />White House</a>

function openMaps(querystring) {
    var maproot = '';
    maproot = 'http://maps.google.com/maps?saddr=Current+Location&';
    window.location = maproot + querystring;
} 
```

在下面的第三个示例中，我能够在我的应用程序中显示地图。它确实显示了正确的路线（从 A 点到 B 点的俯视图），但再次没有打开实际的 Google Maps 应用程序。

```
<a id="whDirections" href="#mm_directions" onclick="getDirections()">
                    <img src="img/ico_pin.png" />White House</a>

<div data-role="content">
    <div class="ui-bar-c ui-corner-all ui-shadow" style="padding: 1em;">
        <div id="mapdirections_canvas" style="height: 300px;"></div>
    </div>
</div>

function getDirections() {
    var directionsService = new google.maps.DirectionsService();
    var map;
    var directionsDisplay = new google.maps.DirectionsRenderer();
    var mapOptions = {
        zoom: 9,
        zoomControl: true,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("mapdirections_canvas"), mapOptions);
    directionsDisplay.setMap(map);

    var myLatLng = new google.maps.LatLng(gmmLat, gmmLong);
    if (document.getElementById("whDirections")) {
        var request = {
            origin: myLatLng,
        destination: new google.maps.LatLng(38.897096, -77.036545), 
            travelMode: google.maps.TravelMode.DRIVING
    };
    directionsService.route(request, function(result, status) {
        if (status == google.maps.DirectionsStatus.OK) {
            directionsDisplay.setDirections(result); 
        }
    });
} 
```

如果有人对此有链接或任何想法，我将非常感谢您的帮助。除了“Hello World”应用程序，这是我的第一个移动应用程序。请让我知道我是否遗漏了任何内容，或者我只是做错了。如果需要任何其他信息，请告诉我。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-04-01T15:23:03.583

使用地理：输入 uri。

```
<a href="geo:38.897096,-77.036545">open map</a> 
```

并且用户可以选择打开他们设备上安装的任何地图应用程序。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-02-26T05:48:03.107

这项工作对我...

```
var addressLongLat = yourLatitude+','+yourLongitude 
```

对于 Android 地图应用程序：

```
window.open("geo:"+addressLongLat); 
```

对于 iOS 地图应用程序：

```
window.open("http://maps.apple.com/?q="+addressLongLat, '_system'); 
```

对于应用浏览器中的谷歌地图：

```
window.open("http://maps.google.com/?q="+addressLongLat, '_system'); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-07-21T10:40:21.540

适用于所有版本的 phonegap/cordova 或网络浏览器。它将谷歌地图本地应用程序。

从当前位置导航到 q - window.open("google.navigation:q=23.3728831,85.3372199&mode=d" , '_system');

对于搜索 - window.open("geo:0,0?q=pizza" , '_system');

在这里阅读 - [https://developers.google.com/maps/documentation/android/intents](https://developers.google.com/maps/documentation/android/intents)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-09-01T08:42:19.307

[Launch Navigator Cordova/Phonegap 插件](https://github.com/dpa99c/phonegap-launch-navigator)可用于使用本机导航应用程序导航到目的地：-

1.  安卓：谷歌导航器
2.  iOS：苹果地图/谷歌地图
3.  Windows Phone：必应地图

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-12-18T20:20:47.273

如果您只是想通过使用地址而不是经纬度来打开本机地图应用程序，这里有一个适用于 Android 和 iOS 的简单解决方案：

```
function openNativeMapsApp(address) {

    console.log('Opening the native maps app...');

    var maps_schema;

    // Replace the following "if" line to your own way of identifying the system (android or ios)
    if ( app.device.android ) {
        maps_schema = encodeURI('geo://?q=' + address);
        window.open(maps_schema, "_system");
    } else {
        maps_schema = encodeURI('maps://?q=' + address);
        window.location.href = maps_schema;
    }
} 
```

确保您的 config.xml 文件中有这些行：

```
<allow-intent href="maps:*" />
<access origin="maps:*" launch-external="yes" /> 
```

下面的行是“Android 特定的”。如果不将它们放在`<platform name="android>`标签内，可能会导致与 iOS 冲突：

```
<platform name="android">
    <access origin="*" />
    <allow-navigation href="*" />
    ...
</platform> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-24T20:13:32.377

这就是我使用的：

```
function (lat, lon) {
    var latLon = lat + ',' + lon;

    if (device.platform.toUpperCase() === "ANDROID") {
        window.open("geo:" + latLon, "_system");
    } else if (device.platform.toUpperCase() === "IOS") {
        window.open("http://maps.apple.com/?sll=" + latLon + "&z=100&t=k", "_system");
    }
} 
```

注意：打开 Apple 地图时，`sll=...`and`t=k`表示我指定了准确的经度和纬度，`t=k`表示我希望 Apple 地图显示卫星图像。此外，我只为 iOS 和 Android 编写代码，因此如果您使用其他平台，请务必明确检查每个平台！我很确定 Android`geo:`总是按您的预期工作，但我可能是错的。请记住：在真实设备上测试所有内容！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-08T09:15:50.420

试试这个，

```
function openLocation() {
    window.open("https://www.google.com/maps/dir/'" + start_latitude + ',' + start_longitude + "'/'" + end_latitude + ',' + end_longitude + "'", '_system');
} 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2014-05-28T20:12:06.790

这适用于科尔多瓦 3.4

```
window.open("http://maps.google.com/?q=" + address, "_system"); 
```

使用这种方法，谷歌地图会显示一个标记，并且可以使用文本地址，而不仅仅是经纬度坐标

# php - 解析和匹配计算字符串

> ID：15745102
> 
> 赞同：1
> 
> 时间：2013-04-01T14:15:35.383
> 
> 标签：php, regex

如何解析和匹配计算字符串？

这是我的代码：

```
$pattern = '/(?:\d+(?:\.\d+)?\D)+\d+(?:\.\d+)/';
$input = [
    '1.0+2.5*5.4',
    '5*8-4'
];
foreach($input as $string){
    preg_match($pattern, $string, $match);
    print_r($match);
} 
```

我无法弄清楚我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T14:19:11.067

这是因为“”的贪婪`?`，尝试“ `+`”如：

```
$pattern = '/(?:\d+(?:\.\d+)?\D)+\d+(?:\.\d+)/';
$input = '34.27-15.44/8.44';
echo $input."\n";
preg_match($pattern, $input, $match);
print_r($match); 
```

至于您的编辑：

```
$pattern = '/(?:\d+(?:\.?\d+)?\D)+\d+/';
$input = [
    '1.0+2.5*5.4',
    '5*8-4',
    '5*8-4string',
    'string5*8-4',
    'string'
];
foreach($input as $string){
    preg_match($pattern, $string, $match);
    print_r($match);
} 
```

它给：

```
Array
(
    [0] => 1.0+2.5*5.4
)
Array
(
    [0] => 5*8-4
)
Array
(
    [0] => 5*8-4
)
Array
(
    [0] => 5*8-4
)
Array
(
) 
```

正如我怀疑你想要的那样。

[http://codepad.viper-7.com/4FoQnB](http://codepad.viper-7.com/4FoQnB)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T14:23:14.993

鉴于您的表达，结果是预期的。

注意如何`\D`只能匹配一次（或随机数）。`\D`已经匹配了`-`，所以没有其他东西可以匹配`/`。

您可能很想通过在表达式的大部分上放置一个量词来解决这个问题，但让我预测一下您将面临的问题，并建议您使用一个循环来替换*单个*操作数-操作数-操作数三元组时间，在无法替换时退出。这是因为没有单程正则表达式可以正确管理操作顺序（*例如*PEMDAS）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T14:25:57.190

试试这个。它适用于整数和浮点数：

```
 $pattern = '/(?:\d+(?:(\.|)\d*)?\D)*\d*(?:(\.|)\d+)/';
 $input =array(
   '1.0+2.5*5.4',
   '5*8-4',
   '5*8-4string'
 );
 foreach($input as $string){
    echo "input:".$string."\n";
    preg_match($pattern, $string, $match);
    print_r("output:".$match[0]."\n");
  } 
```

输出：

```
 input:1.0+2.5*5.4
 output:1.0+2.5*5.4
 input:5*8-4
 output:5*8-4
 input:5*8-4string
 output:5*8-4 
```

# c# - 将变量中的文本内容转换为pdf

> ID：15745112
> 
> 赞同：-9
> 
> 时间：2013-04-01T14:16:11.780
> 
> 标签：c#, asp.net

我有一个名为的字符串变量`teststring`，它包含一些内容，例如

```
 teststring="<span>hi this is a test content</span>" 
```

是否有任何 c# 代码可以将该内容复制到 pdf 文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T14:22:27.050

您可以使用[Itextsharp](http://itextpdf.com/)库从 HTML 页面生成 PDF 文件。

*iText ® 是一个允许您创建和操作 PDF 文档的库。它使希望通过动态 PDF 文档生成和/或操作来增强 Web 和其他应用程序的开发人员。开发人员可以使用 iText：将 PDF 提供给浏览器，从 XML 文件或数据库生成动态文档，使用 PDF 的许多交互功能，添加书签、页码、水印等。拆分、连接和操作 PDF 页面，自动填写PDF 表单，向 PDF 文件添加数字签名，iText 可用于 Java 和 C#。*

这是一个帮助您入门的简单教程，[Export-HTML-DIV-contents-to-PDF-using-iTextSharp](http://aspsnippets.com/Articles/Export-HTML-DIV-contents-to-PDF-using-iTextSharp-in-ASPNet.aspx)

# iphone - 核心情节图例标题

> ID：15745122
> 
> 赞同：0
> 
> 时间：2013-04-01T14:16:30.137
> 
> 标签：iphone, ios, xcode, core-plot

我正在尝试使用我的饼图上的核心情节为我的图例添加一个整体标题，但找不到任何似乎支持这一点的东西，有没有人设法通过核心情节库做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T01:49:38.420

使用注释。您可以将其添加到图例图层。在图例上使用填充沿边缘创建一些空间，为标签腾出空间。

# haskell - Haskell: [字符串] 到 IO ()

> ID：15745123
> 
> 赞同：2
> 
> 时间：2013-04-01T14:16:34.403
> 
> 标签：haskell, io

我是 Haskell 的新手，我正在尝试从输入中获取值列表，并从列表中的每一行打印一个项目。

```
func :: [String] -> IO () 
```

当列表大小仅为 1 时，我无法弄清楚如何打印列表中的项目。

```
func [] = return ()  
func [x] = return x 
```

尝试编译文件时收到此错误消息：

```
Couldn't match expected type `()' with actual type `String'
    In the first argument of `return', namely `x'
    In the expression: return x 
```

我完全迷路了，我尝试过搜索，但什么也没找到。谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-01T14:24:45.770

您可以`forM_`为此使用：

```
func :: [String] -> IO ()
func l = forM_ l putStrLn 
```

如果你想直接写自己的版本，你会遇到一些问题。

对于空列表，您只需创建一个 的值`IO ()`，您可以使用 return 来完成。

对于要输出该行的非空列表`putStrLn`，然后处理列表的其余部分。非空列表的形式`x:xs`是`x`列表的头部和`xs`尾部。您的第二个模式与单元素列表匹配。

```
func [] = return ()
func (x:xs) = putStrLn x >> func xs 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-01T14:25:50.627

```
func = mapM_ putStrLn 
```

`mapM_`像列表的每个元素一样应用一元函数`putStrLn`，并丢弃返回值。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-01T14:24:27.193

您实际上并没有尝试打印任何内容，而是使用 putStr 。尝试类似的东西

```
print [] = return ()
print (x:xs) = do
                 putStr x
                 print xs 
```

# mongodb - MongoDb 提高聚合框架性能

> ID：15745125
> 
> 赞同：0
> 
> 时间：2013-04-01T14:16:37.553
> 
> 标签：mongodb

我的收藏中有 70 亿条数据。我的数据模型是：

> {“_id”：ObjectId（“515921e3bbea58d25eb07b22”），“serverId”：0，“counterId”：0，“插入”：ISODate（“2013-03-21T00:26:30Z”），“counterValue”：0.03256159112788737，“最小”：-29.967438408872113，“最大”：20.032561591127887}。

我有 2 个索引 serverId,counterId ；我的查询是：

> {$match:{ '插入':{$gte: new Date("2013-03-21T00:00:00Z") , $lt: new Date("2013-03-22T10:00:00Z") } } , {$group : {_id:{serverId:'$serverId', counterId:'$counterId'} ,avgValue:{ $avg : '$counterValue'}}}

查找在特定日期之间插入的按 serverId,counterId 分组的平均 counterValues 。

但这需要 13 秒，我需要它必须需要 1 秒。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-12T18:47:23.157

You query on the inserted field, so the inserted field should have the index. The others are useless (for this query).

If you want to make a full index query which will help you to improve performance a lot, you should also put the fields in the index that you query on. In that case it can also use the index to get the values, instead of heaving to go to each individual document (on disk probably considering that amount of documents), which will slow down the query.

So you should include `$project` to the aggregation query. Index should be:

```
{inserted:1, serverId:1, counterId:1, counterValue:1} 
```

And query:

```
{
    $match:{ 'inserted':{$gte: new Date("2013-03-21T00:00:00Z") , $lt: new Date("2013-03-22T10:00:00Z") } } }, 
    $project: {'serverId':1, 'counterId':1, 'counterValue':1, '_id':0},
    {$group : {_id:{serverId:'$serverId', counterId:'$counterId'} ,avgValue:{ $avg : '$counterValue'}}
} 
```

also notice the _id:0\. By default the _id field is returned, which is not in the index so it will go to each individual document, what you don't want.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T14:20:55.453

为什么不在 Inserted 列上添加索引呢？它会有一些性能提升。插入当天的索引将帮助您快速获取数据，并在此处的文档中指定：http: [//docs.mongodb.org/manual/applications/aggregation/](http://docs.mongodb.org/manual/applications/aggregation/)。index 将用于购买 $match 放在开头。所以在插入的列上有一个索引

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T13:06:11.450

您的索引对于：

```
{$match:{ 'inserted':{$gte: new Date("2013-03-21T00:00:00Z") , $lt: new Date("2013-03-22T10:00:00Z") } } }, 
{$group : {_id:{serverId:'$serverId', counterId:'$counterId'} ,avgValue:{ $avg : '$counterValue'}}} 
```

由于`$group`函数在内存中并且不使用索引，但是，`$match`可以。如果您像@Devesh 所说的那样放置一个索引，那么`inserted`您应该在该领域获得更好的性能。

但是，如果这个结果集很大，比如说这 70 亿条记录中的 100 万条记录，您仍然可以从框架中看到糟糕的性能。这是因为，归根结底，没有简单的方法可以做到这一点。它很慢，因为你聚合了多少。

一个更好的选择可能是使用预先聚合的报告，而不是通过其他机制（如在客户端中保存）以您需要的形式提供您的数据，以创建高性能查询。

# mysql - MySQL 案例/如果/那么

> ID：15745128
> 
> 赞同：6
> 
> 时间：2013-04-01T14:16:47.920
> 
> 标签：mysql, sql, case

我正在尝试在 MySQL 中构建一个查询，其中我有一个数字库存水平，并且取决于该库存水平是什么，我希望它返回另一个值，该值将是一个颜色代码。

例如，如果库存水平<0，则为空，如果库存水平在0和1000之间，则为红色，如果库存水平在1000和5000之间，则为黄色，如果库存水平在5000和10000之间，则为绿色，如果库存水平> 10000，则绿色。

所以这是我的例子。我有一个包含 Beer 信息的 Beer 表和一个包含 Stock Values 的 BeerStock 表。

```
SELECT Beer.Beer, Beer.Brewery, Beer.Style, Beer.ABV, Beer.Hops, Beer.SRM,
Sum(BeerStock.Quantity)
FROM Beer, BeerStock
Where Beer.Beer = BeerStock.Beer 
```

那会给我这样的东西：

```
Beer1 Brewery1 Style1 5%, 3, 10, 1238 
```

而且我要

```
Beer1 Brewery1 Style1 5%, 3, 10, 1238 YELLOW 
```

我似乎根本无法弄清楚这一点，我应该使用 CASE 还是可以使用 IF/THEN 类型的东西？

我的 SQL 技能很生疏，通常我使用 Access 并弄乱自动生成的 SQL，而不是从头开始编写……我可以应付 MySQL 的基础知识，但不是这种东西！

任何建议/指针表示赞赏....

谢谢

安迪

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-01T14:20:29.850

我瘦你的意思是如果`stock > 1000`再另一种颜色`not green`。

```
SELECT  Beer.Beer, 
        Beer.Brewery, 
        Beer.Style, 
        Beer.ABV, 
        Beer.Hops, 
        Beer.SRM,
        Sum(BeerStock.Quantity) totalQuantity,
        CASE WHEN Sum(BeerStock.Quantity) < 0 THEN ''
            WHEN Sum(BeerStock.Quantity) BETWEEN 0 AND 999 THEN 'Red'
            WHEN Sum(BeerStock.Quantity) BETWEEN 1000 AND 4999 THEN 'Yellow'
            WHEN Sum(BeerStock.Quantity) BETWEEN 5000 AND 9999 THEN 'GREEN'
            WHEN Sum(BeerStock.Quantity) >= 10000 THEN 'Another Color' 
        END
FROM    Beer
        INNER JOIN BeerStock
            ON Beer.Beer = BeerStock.Beer
-- Where    ..other conditions.. 
```

但如果你真的是那个意思

```
SELECT  Beer.Beer, 
        Beer.Brewery, 
        Beer.Style, 
        Beer.ABV, 
        Beer.Hops, 
        Beer.SRM,
        Sum(BeerStock.Quantity) totalQuantity,
        CASE WHEN Sum(BeerStock.Quantity) < 0 THEN ''
            WHEN Sum(BeerStock.Quantity) BETWEEN 0 AND 999 THEN 'Red'
            WHEN Sum(BeerStock.Quantity) BETWEEN 1000 AND 4999 THEN 'Yellow'
            WHEN Sum(BeerStock.Quantity) >= 5000 THEN 'GREEN'
        END
FROM    Beer
        INNER JOIN BeerStock
            ON Beer.Beer = BeerStock.Beer
-- Where    ..other conditions.. 
```

* * *

还有一件事，您还需要使用`GROUP BY`子句，否则即使您有不同的记录，您也只会返回一条记录，

```
SELECT  Beer.Beer, 
        Beer.Brewery, 
        Beer.Style, 
        Beer.ABV, 
        Beer.Hops, 
        Beer.SRM,
        Sum(BeerStock.Quantity) totalQuantity,
        CASE WHEN Sum(BeerStock.Quantity) < 0 THEN ''
            WHEN Sum(BeerStock.Quantity) BETWEEN 0 AND 999 THEN 'Red'
            WHEN Sum(BeerStock.Quantity) BETWEEN 1000 AND 4999 THEN 'Yellow'
            WHEN Sum(BeerStock.Quantity) BETWEEN 5000 AND 9999 THEN 'GREEN'
            WHEN Sum(BeerStock.Quantity) >= 10000 THEN 'Another Color' 
        END
FROM    Beer
        INNER JOIN BeerStock
            ON Beer.Beer = BeerStock.Beer
-- Where    ..other conditions..
GROUP   BY Beer.Beer, 
        Beer.Brewery, 
        Beer.Style, 
        Beer.ABV, 
        Beer.Hops, 
        Beer.SRM 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T14:20:42.337

这样的事情应该使用以下`CASE`语句起作用：

```
SELECT Beer, Brewery, Style, ABV, SRM, SummedQty, 
    CASE 
       WHEN SummedQty >=0 AND SummedQty <= 1000 THEN ' RED'
       WHEN SummedQty >1000 AND SummedQty <= 5000 THEN ' YELLOW'
       WHEN SummedQty >5000 THEN ' GREEN'
       ELSE ''
    END yourcolor
FROM (
    SELECT Beer.Beer, Beer.Brewery, Beer.Style, Beer.ABV, Beer.Hops, Beer.SRM,
       Sum(BeerStock.Quantity) SummedQty
    FROM Beer
       INNER JOIN BeerStock  
          ON Beer.Beer = BeerStock.Beer
    ) t 
```

小心使用`BETWEEN`- 它可能不会返回您想要的结果。我更喜欢使用大于和小于。我还将您的 JOIN 语法转换为`INNER JOIN`.

# iphone - 属性类型与访问器 mkmapview 的类型不匹配

> ID：15745130
> 
> 赞同：2
> 
> 时间：2013-04-01T14:16:51.813
> 
> 标签：iphone, objective-c, properties, mkmapview, accessor

我更像是一个 java 人，我刚刚开始使用 Objective C 和 iPhone 编程。

我一直在尝试此代码（Xcode iPhone 编程）以使 iPhone 在地图类型（分段控制按钮）之间切换，但它不断抛出“属性类型'mymap'与访问器类型'setMymap'不匹配”：

```
#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>

@interface ViewController : UIViewController {
    MKMapView * mymap;
}
@property (nonatomic, readonly) MKMapView * mymap;
-(IBAction)setMymap:(id)sender;
-(IBAction)getLocation;
@end

@implementation ViewController
@synthesize mymap;
-(IBAction)getLocation {
    mymap.showsUserLocation = YES;
}
-(IBAction)setMymap:(id)sender {
    switch (((UISegmentedControl*)sender).selectedSegmentIndex) {
        case 0:
            mymap.mapType = MKMapTypeStandard;
            break;
        case 1:
            mymap.mapType = MKMapTypeSatellite;
            break;
        case 2:
            mymap.mapType = MKMapTypeHybrid;
            break;
    }
}
.... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T14:28:11.450

将您的 setMap: 方法重命名为 mapSelectorAction: 或类似的名称。Cocoa 中以 set 开头的任何方法，后跟属性名称，并采用一个参数，“需要”成为该属性的 setter 方法。

正确的名称在 Cocoa 中尤其重要，但在 Objective-C 中更是如此。查看 Apple 的[样式指南](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CodingGuidelines/CodingGuidelines.html)以获取更多信息。

# jquery - jQuery .data() 不适用于 $(this)

> ID：15745131
> 
> 赞同：6
> 
> 时间：2013-04-01T14:16:54.103
> 
> 标签：jquery, html

我想存储我的`input`字段的初始数据（以便稍后能够检查这些初始值）。因此，我在页面加载时使用以下代码片段：

```
$(document).ready(function () {
    $('input').data('initial-value', $(this).val() )
} 
```

问题是上面没有将`input`字段的初始值存储在数据属性`initial-value`中。未创建属性。

以下确实有效：

```
$('input').data('initial-value', 'whatever value' ) 
```

我不能在方法中使用 jQuery`$(this)`运算符吗？`.data()`如果是这样，我还能做什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-01T14:22:07.440

为此，您将需要一些迭代，并且`.each`还会`this`为您设置正确的参考：

```
$('input').each(function() {
    $.data(this, 'initial-value', this.value);
}); 
```

[**小提琴**](http://jsfiddle.net/y9PfK/)

我使用了`$.data`提供更好性能的静态方法，但您也可以使用`$(this).data('initial-value', this.value)`。

此外，`this.value`它会做得很好，并提供比它更好`$(this).val()`的性能 - 缺点是当您的`select`元素具有返回具有所选值的数组而仅返回第一个值的`multiple`属性时。`.val()``.value`

* * *

不过，您可以通过元素的`defaultValue`属性获取初始值。例如：

```
console.log( $('input')[0].defaultValue ); 
```

[**小提琴**](http://jsfiddle.net/y9PfK/1/)

请注意，此方法不适用于`select`元素。这将需要遍历 select 的`option`元素并检查它们的`defaultSelected`属性，但在这种情况下，使用前一种解决方案更容易。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-01T14:18:53.523

在这种情况下，`this`指的是全局对象，因为没有上下文。

此外，你不需要这个。只是`.attr("value")`会给你初始值;）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T14:25:00.523

这样的事情怎么样

```
$('input').each(function(){$(this).data('initial-value',$(this).val());}) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-01T14:29:12.220

对于初学者，您提供的代码将不起作用，因为`this`引用`document`而不是`input`元素。您需要将代码更新为：

```
jQuery(function ($) { //aliasing document.ready shortcut, good practice
    "use strict";
    $('input').data('initial-value', $('input').val());
}); 
```

当然，这也可能不会满足您的要求，因为它会将*每个输入元素设置为存储第**一个*输入元素的初始值（`.val()`返回第一个匹配元素的值）。

因此，要更新代码以适用于每个元素，您可以使用：

```
jQuery(function ($) {
    "use strict";
    $('input').each(function () {
        $(this).data('initial-value', $(this).val());
    });
}); 
```

但是接下来我们需要考虑为什么您首先要费心存储元素的初始值。如果有人用 更改了输入元素的值，`$(someElement).val('new value');`则可以通过将其值设置回其`[value]`属性来重置输入：

```
$(someElement).val($(someElement).attr('value')); 
```

另一方面，如果您使用 设置`input`元素的值，则说明`$(someElement).attr('value', 'new value');`您做错了，并且正在破坏`input`元素的状态。`reset`按钮依赖于`[value]`保留原始状态的属性，因此当 a`form`被重置时，输入可以返回到它们的原始状态。

您还提到：

> 问题是上面没有将`input`字段的初始值存储在数据属性`initial-value`中。未创建属性。

当您用于访问元素上的数据时，如果存在属性`.data()`，它将从属性中提取信息。这对于初始化元素上的数据非常有用。`[data-*]``[data-*]`

当您使用`.data(key, value)`将数据与元素关联时，它将值作为属性存储在元素上；***它不会更新属性的值***。没有一种方法可以序列化实例化的对象，例如`new Foo`可以将其反序列化为最初的方式。

如果您想验证对象的数据是否设置正确，您不能简单地使用 DOM 检查器，您需要实际检查该`.data()`特定元素的内容。

[有关和之间差异的更多信息`.attr()`，`.data()`请参阅我对这个相关问题的回答](https://stackoverflow.com/questions/7261619/jquery-data-vs-attr/7262427#7262427)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-10T10:46:20.063

这实际上并不是 100% 有效。您还需要做的是检查您的表单是否真的使用*输入*框或*单选框*。

**看看这个解决方案：**

```
$(':input').each(function() { 
    $(this).data('initialValue', getValueForElement($(this))); 
});

fuunction getValueForElement(oObj) {
    var sValue = oObj.val();
    if (oObj.is(":checkbox") || oObj.is(":radio")) {
        sValue = oObj.is(":checked") ? oObj.val() : ' ';
    }
    return sValue;
} 
```

# entity-framework - 如何防止在 Entity Framework 4.1 中保存关系？

> ID：15745134
> 
> 赞同：0
> 
> 时间：2013-04-01T14:17:12.283
> 
> 标签：entity-framework

我们正在使用 EF 4.1

我们有不应保存的虚拟对象（.CanBeSaved = false）

我可以防止使用此代码保存对象

```
IEnumerable<ObjectStateEntry> changes = this.ObjectStateManager.GetObjectStateEntries(EntityState.Modified | EntityState.Added | EntityState.Deleted);

    foreach (ObjectStateEntry stateEntryEntity in changes)
        if (!((MyPersistentEntityClass)stateEntryEntity.Entity).CanBeSaved)
           stateEntryEntity.ChangeState(EntityState.Unchanged); 
```

但现在它失败了，因为 EF 仍在尝试将新关系保存在添加的对象上。

我如何告诉 EF 不要保存新的关系？

** 更多信息 **

问题是有时我们想保存相关对象，而其他时候我们不想保存相关对象

假设我们有一个存储图像的产品对象，我们想保存这两个对象。但是，如果产品是 NullImage 类型的图像（我们的自定义对象，具有默认属性），我们不想保存 NullImage 对象（其中 .CanBeSaved 为 false）

我们不想只在这种情况下保存图像或关系谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:52:39.080

标记与`[NotMapped]`属性的关系：

```
public class Product {
    public int ProductId { get; set; }
    public string Name { get; set; }
    // ...

    [NotMapped]
    public Shelf Shelf { get; set; }
} 
```

# jquery - 使用jQuery获取具有多个类的href字符串

> ID：15745135
> 
> 赞同：0
> 
> 时间：2013-04-01T14:17:12.480
> 
> 标签：jquery

我有这个链接...

```
<a class="class sub1 class2" href="test.asp?Code=2D3824&ID=1"> 
```

我需要在 href 中获取 ID 值。我试过：

```
jQuery("a.class.sub1.class2[href$='2D3824']").text(); 
```

试图让一个字符串分手，但它回来是空的。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T14:19:44.297

如果字符串始终具有相同的格式：

```
jQuery("a.class.sub1.class2[href*='2D3824']").attr('href').split('=')[2]; 
```

[**小提琴**](http://jsfiddle.net/Jyh6G/)

要使用正则表达式根据查询字符串键获取值：

```
jQuery("a.class.sub1.class2[href*='2D3824']").attr('href').match(/\&ID\=(.*?)$/)[1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T14:19:46.933

您需要获取 href 的属性，而不是锚的文本，并且还需要使用 contains 选择器 *=。

jQuery("a.class.sub1.class2[href*='2D3824']").prop('href').split('=')[2];

# css - 在画廊图像缩略图上悬停时显示标题 CSS

> ID：15745136
> 
> 赞同：0
> 
> 时间：2013-04-01T14:17:13.933
> 
> 标签：css, hover, gallery, rollover, squarespace

我有一个图片库，并试图为每张图片简单地悬停一个 ID 号/标题。我不需要花哨的过渡或任何东西（这对我来说太难了），只是当我将鼠标悬停在它上面时出现的标题。我的网站使用 Squarespace，他们无能为力，因为它被视为高级编程。

他们有一个自定义的 CSS 代码部分，您只需将代码粘贴到其中。不要以为你在 head 部分放了任何东西，只是把 css 放到了网站的这一部分。这是有人用来在翻转时淡化图像的代码。（他们说主要元素是第一行）。

```
.sqs-gallery-design-grid-slide:hover {
 -webkit-transition: all 300ms cubic-bezier(0.420, 0.000, 0.580, 1.000); 
-moz-transition: all 300ms cubic-bezier(0.420, 0.000, 0.580, 1.000); 
-ms-transition: all 300ms cubic-bezier(0.420, 0.000, 0.580, 1.000); 
 -o-transition: all 300ms cubic-bezier(0.420, 0.000, 0.580, 1.000); 
    transition: all 300ms cubic-bezier(0.420, 0.000, 0.580, 1.000);  
     opacity: 0;

     } 
```

我正在寻找的只是将其更改为在悬停时显示图像标题而不是淡化图像。当您上传每张图片时，您可以命名它，有没有办法通过 CSS 告诉它获取此信息以显示在悬停时？

我对 CSS 编码**一无所知**，但已经尝试了将近两周的时间来学习足够的知识来自己做这件事，但我迷路了。任何帮助都将非常感激！谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T16:12:22.003

我只看到一个 CSS 解决方案。这甚至只有在您能够`a`像这样将您的标题放入元素中时才有效：

```
<a title="Picture 1 TEST" rel="lightbox" href="http://photogs.squarespace.com/simple/gallery-1/2706700"> 
```

然后，您可以使用 css 从`title`链接上的属性中获取内容。它适用于大多数浏览器，除了 IE7-。不幸的是`:after`，似乎不支持`img`元素。

```
.thumbnail-wrapper a {
  position: relative;
}
.thumbnail-wrapper a:hover:after {
  content: attr(title);
  color: #000;
  padding-left: 5px;
  position: absolute;
  display: block;
  width: 100%;
  height: auto;
  opacity:0.5;
  min-height: 30px;
  background: #FFF;
  bottom: 0px;
  left: 0px;
} 
```

这看起来像这样：

![在此处输入图像描述](https://i.stack.imgur.com/mBtIj.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T14:24:07.717

我不熟悉 Squarespace，但是您为图像提供的任何类型的标题/名称都保存在某种数据库中，您需要以某种方式检索该名称才能显示它，无论是否有 css 的帮助。此外，您想要的通常是通过将任何所需的图像标题放入标签的`alt`或`title`属性中来实现`img`，即：`<img src="example.jpg" alt="Here is hover title" title="Here is hover title" />`不同的浏览器将使用 on 或其他。

# spring - Spring对象线程安全吗？

> ID：15745140
> 
> 赞同：56
> 
> 时间：2013-04-01T14:17:26.597
> 
> 标签：spring

Spring对象线程安全吗？如果没有，如何使它们线程安全？

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2013-04-01T16:33:39.630

这是两个不相关的问题：

## Spring Beans 线程安全吗？

不。

Spring 有不同的 bean[作用域](https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html#beans-factory-scopes)（例如 Prototype、Singleton 等），但所有这些作用域都是在创建 bean*时强制执行的。*例如，每次“注入”该 bean 时都会创建一个“原型”作用域 bean，而“单例”作用域 bean 将被创建一次并在应用程序上下文中共享。还有其他范围，但它们只是定义了*何时*创建新实例的时间跨度（例如“范围”）。

以上与线程安全几乎没有关系，因为如果多个线程可以访问一个bean（无论范围如何），它只取决于该bean的*设计*是否是“线程安全的” .

我说“很少，如果有的话”的原因是因为它可能取决于您要解决的问题。例如，如果您担心 2 个或更多 HTTP 请求是否可能对同一个 bean 产生问题，则有一个[“请求”范围](https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html#beans-factory-scopes)将为每个 HTTP 请求创建一个新的 bean 实例，因此您可以“考虑”一个在多个 HTTP 请求的上下文中，特定的 bean 是“安全的”。*但是Spring*仍然不是真正的线程安全，因为如果多个线程在*同一个*HTTP 请求中使用这个 bean，它会回到 bean 设计（*你*的 bean 支持类的设计）。

## 如何制作/设计线程安全的“对象”？

有几种方法，可能太长，无法在此处列出，但这里有一些示例：

*   将您的 bean 设计为**不可变**的：例如，没有设置器，仅使用构造函数参数来创建 bean。还有其他方式，比如[Builder pattern](http://en.wikipedia.org/wiki/Builder_pattern)等。

*   设计你的 bean**无状态**：例如，做某事的 bean*可以*只是一个函数（或多个）。在大多数情况下，这个 bean 可以并且*应该*是无状态的，这意味着它没有任何状态，它只*使用*您每次提供的函数参数（在每次调用时）

*   设计你的 bean**[持久化](http://en.wikipedia.org/wiki/Persistent_data_structure)**：这是“不可变”的一个特例，但有一些非常好的属性。通常用于函数式编程，其中 Spring（至少目前）不如在命令式世界中有用，但我已将它们与 Scala/Spring 项目一起使用。

*   用锁设计你的 bean [最后的手段]：除非你正在使用*较低*级别的库，否则我建议不要这样做。原因是我们（人类）在锁方面的想法不好。就像我们被抚养和培养的方式一样。一切都是并行发生的，我们不需要“暂停下雨，让我拿把伞”。然而，当你在谈论“同时做多件事”时，计算机都是关于锁的，因此我们中的一些人（特殊的人）正在做他们的公平份额并基于这些锁实现库。大多数其他人可以只*使用*这些库而不必担心并发性。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2018-11-27T10:19:42.880

Spring 不保证线程安全。但它提供了有关此事的指导方针。如果您的 bean 有状态，请不要使用单例 bean 范围。

我创建了一个演示来展示带有 Singleton 和 Prototype 范围的 spring bean 的可变性

我专注于有状态的 bean，然后使用 Singleton 和 Prototype 范围来展示 bean 如何改变它们的状态。

Job 类由 JobPrototype 和 JobSingleton bean 扩展，它们基于活动的配置文件集加载。Tp 设置配置文件，将属性 spring.profiles.active 设置为 proto（对于原型范围）或单例（对于单例范围）

活动作业 bean`Autowired`位于 Runner 和 Runner1 bean 中，它们具有定期改变`Autowired`bean状态的调度方法

```
public class Job {

    protected int count = 0;

    void counter() {
        this.count++;
    }

    public int getCount() {
        return count;
    }
}

@Component
@Profile("proto")
@Scope("prototype")
public class JobPrototype extends Job {
}

@Component
@Profile("singleton")
public class JobSingleton extends Job {

}

@Component
public class Runner {

    private Logger Log = LoggerFactory.getLogger(this.getClass().getName());
    @Autowired
    private Job job;

    @Scheduled(fixedDelay = 1500)
    void count() {
        this.job.counter();
        Log.info("### Runner: count: " + this.job.getCount());
    }
}

@Component
public class Runner1 {

    private Logger Log = LoggerFactory.getLogger(this.getClass().getName());
    @Autowired
    private Job job;

    @Scheduled(fixedDelay = 1000)
    void count() {
        this.job.counter();
        Log.info("### RunnerOne: count: " + this.job.getCount());
    }

} 
```

结果是

1.  单 例单[例范围](https://i.stack.imgur.com/6pRkc.png)

2.  原型 [原型范围](https://i.stack.imgur.com/onODN.png)

此演示的完整代码[beans_mutability](https://github.com/elifraha/beans_mutability/tree/master)

# ruby-on-rails - Rails - 设计 - 无法取消帐户 - 找不到 id=users 的用户

> ID：15745142
> 
> 赞同：0
> 
> 时间：2013-04-01T14:17:31.707
> 
> 标签：ruby-on-rails, authentication, devise

我正在使用设计进行身份验证。尝试删除用户时出现了我的问题。我收到以下 ActiveRecord::RecordNotFound 错误找不到 id=users 的用户

错误发生在：

```
before_filter :authenticate_user!, :except => [:show]

def show
@user = User.find(params[:id])
end 
```

传递的参数是：

```
{"controller"=>"users", "action"=>"show", "id"=>"users"} 
```

我一直想知道这个错误是否与我为设计定制创建的类 RegistrationsController < Devise::RegistrationsController 有关，但我不确定。

我的直觉告诉我，这确实是一个路由问题。这是我的路线文件：

```
Music::Application.routes.draw do

# resources :users

devise_scope :user do

  get "/edit/account/:id" , to: "devise/registrations#edit" , :as => "edit_account"

  get "/login" , to: "devise/sessions#new" , :as => "login"
  get "/logout" , to: "devise/sessions#destroy" , :as => "logout"
end

devise_for :users, :controllers => { :omniauth_callbacks => "users/omniauth_callbacks", :registrations => "registrations" }

resources :contact_us_emails

get('/about-us', { :controller => "WelcomePages", :action => 'about', :as => 'about_us'})
get('/contact_us', { :controller => "WelcomePages", :action => 'contact_us', :as => 'contact_us'})

get('/search_collaborators', { :controller => "SongRooms", :action => 'search_collaborators', :as => 'search_collaborators'})

resources :searches do 
  collection do
    get '/song_rooms/:query', :controller => "searches", :action => 'song_rooms', :as => 'search_song_rooms'
    get '/users/:query', :controller => "searches", :action => 'users', :as => 'search_users'
    get '/final_songs/:query', :controller => "searches", :action => 'final_songs', :as => 'search_final_songs'
    get '/search_and_invite_facebok_friends/:user_id', :controller => "searches", :action => "search_and_invite_facebok_friends", :as => 'invite_fb_friends'
    end
  end

match 'download/:id' =>  'versions#download', :as => :download
match '/musicians' => 'searches#musicians', :via => :get, :as => 'musicians'
match '/producers' => 'searches#producers', :via => :get, :as => 'producers'

match '/accept/:id' => 'requests#accept', :via => :get, :as => 'accept'
match '/deny/:id' => 'requests#deny', :via => :get, :as => 'deny'

match '/users/:id' => 'devise/registrations#destroy', :via => :delete, :as => 'cancel_registration'

resources :versions do 
  resources :messages
  member do
    post :vote
    get :mark_as_final
    get :unmark_as_final
  end
end

post('/collaborators', {:controller => "Collaborators", :action => 'create', :as => 'create_collaborator'})

delete('song_rooms/:id/collaborators/:id', { :controller => "Collaborators", :action => 'destroy', :as => 'delete_collaborator'})

resources :song_rooms do 
  member do
    get 'choose_final_song'
  end
  resources :collaborators
end

resources :user_song_uploads
# resources :users

post('/user/:id/vote', { :controller => "Users", :action => 'vote', :as => 'user_vote'})

match '/:id', :to => "users#show", :as => :user, :via => :get

authenticated :user do
  root :to => "welcome_pages#home" , :as => "user_home"
end
root :to => "welcome_pages#index" , :as => "home"

end 
```

最后我的取消链接到操作是这样的：

```
<%= link_to "Cancel my account", registration_path(resource), :data => { :confirm => "Are you sure?" }, :method => :delete %> 
```

我还尝试为 resource_name、@user、@user.id、current_user、current_user.id 切换资源。

谢谢你的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:22:54.710

您已经设置了一条路线`devise/registrations#destroy`并调用了它`cancel_registration`

```
match '/users/:id' => 'devise/registrations#destroy', :via => :delete, :as => 'cancel_registration' 
```

尝试将您的链接更改为：

```
<%= link_to "Cancel my account", cancel_registration_path(resource), :data => { :confirm => "Are you sure?" }, :method => :delete %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T14:58:01.940

想出了一个解决方法：

```
devise_scope :user do
  get "/edit/account/:id" , to: "devise/registrations#edit" , :as => "edit_account"
  delete "/delete_user/:id", to: "devise/registrations#destroy", :as => "delete_account"
  get "/login" , to: "devise/sessions#new" , :as => "login"
  get "/logout" , to: "devise/sessions#destroy" , :as => "logout"
end 
```

将此路由到行动：在 RegistrationsController < Devise::RegistrationsController

```
def destroy
  @user = User.find(params[:id])
  @user.destroy
  respond_to do |format|
    format.html { redirect_to home_path, notice: "We're sorry to see you go. Send us some feedback before you go!"}
  end
end 
```

最后：link_to 操作：

```
<%= button_to "Cancel my account", delete_account_path(@user.id), :data => { :confirm => "Are you sure?" }, :method => :delete %> 
```

我不知道为什么这会这么麻烦。但是将我的路由操作放在 devise_scope 内似乎是解决方案。

# c# - 使用外部序列化对象文件和 lucene DB 发布 C# 项目时出现问题

> ID：15745143
> 
> 赞同：0
> 
> 时间：2013-04-01T14:17:32.247
> 
> 标签：c#, visual-studio-2012, lucene.net, publish

我终于进入了我的项目的 alpha 阶段，我准备好发布了。

我从 VS2012 express 执行发布例程，它会生成包含文件的文件夹以及安装程序。在该过程完成之前，我收到一个错误，它找不到 user.dat 文件，该文件是我序列化一些对象的二进制文件。

我的意图是让这个文件和 lucene DB 文件都位于网络驱动器上，并且只有工作目录或指向该文件的文件路径扩展名。我不希望安装包中包含这些文件中的任何一个。

我如何将它们分开？

在编写代码时，我在项目的主目录中都有，我只是要将文件路径切换到实际位置。

任何想法都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T12:26:52.780

听起来 user.dat 文件包含在您的解决方案/项目中并配置为部署。

# php - 将表单选择传递到 jquery/colorbox 的语法

> ID：15745145
> 
> 赞同：0
> 
> 时间：2013-04-01T14:17:40.073
> 
> 标签：php, jquery, colorbox

我有一个调用 php 文件的 HTML 表单，这反过来根据用户在表单中提交的内容返回 mysql SELECT 查询的输出。这一切正常，在这个论坛的帮助下解决了一些小问题。

现在我想做的是将 php 的结果显示在 jquery/colorbox 弹出窗口中。但是，jquery 似乎只是加载了 my action="verify.php" 的 php 文件，它实际上并没有传递选定的变量。我知道这一点，因为我将 SELECT 语句设置为常量查询并且它显示正确。将 php 设置为使用 POSTed 变量时，结果为空白。

我以前从未使用过 jquery/colorbox，所以我认为我在这里做错了什么。有人可以在我发疯之前告诉我如何解决这个问题吗？

jQuery/彩盒

```
 $(document).ready(function(){

            $(".inline").colorbox({inline:true, width:"50%"});
                $("input#formsubmit").colorbox({href: function(){
    var url = $(this).parents('form').attr('action');
    return url;
}, innerWidth:920, innerHeight:"86%", iframe:true});                
            }); 
```

表格的代码...

```
<form name="form" action="verify.php" method="post">

<select name="product">

<?php 
mysql_connect("localhost", "root", "root") or die(mysql_error());
mysql_select_db("verify") or die(mysql_error());

$sql = mysql_query("SELECT DISTINCT ProductName FROM products");
while ($row = mysql_fetch_array($sql)){
echo "<option value=\"". $row['ProductName'] ."\">". $row['ProductName'] . "</option>";
}
?>
</select>

<select name="customer">

<option value="End User">End User</option>
<option value="Partner">Partner</option>

</select>

<input type="submit" name="Update" id="formsubmit" value="Verify">

</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:31:25.420

您需要将用户选择的变量附加到您的 url。现在你正在这样做

```
 var url = $(this).parents('form').attr('action'); 
```

这可能导致 url 被设置为 action 属性的值。您需要将用户选择的变量附加到它的末尾。所以像

```
var url = $(this).parents('form').attr('action')+"&yourvarvalue="+getUserSelectedVariable(this); 
```

# operating-system - QTP 缺少系统变量？

> ID：15745149
> 
> 赞同：1
> 
> 时间：2013-04-01T14:17:41.567
> 
> 标签：operating-system, environment-variables, qtp

任何人都遇到过这个问题 - 我在我的主计算机上打开 QTP，它告诉我资源丢失了。这很奇怪，因为所有 QTP 文件都存储在中央文件服务器上。如果我纠正它，它工作正常。但是，我在构建测试后运行测试的辅助机器上打开 QTP，并且得到相同的缺失资源。在不同的机器上打开测试并重置资源的路径会导致资源丢失。

我猜我错过了一个系统变量，但我不确定是什么。我尝试查看两个机器系统变量，但没有任何明显的迹象表明它指向 QTP 文件。

注意 - 当我有一台新的主机时，这才开始发生。不幸的是，直到他们已经擦拭了我的旧机器之后，我才注意到这一点。同样，我希望我需要系统环境变量中的一些东西，但我不确定是什么。

有任何想法吗？关于阅读内容的建议可能会有所帮助？指导我寻找答案的好通灵者的名字？:-)

谢谢，

杰米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:42:54.310

我不确定您的意思是什么，*如果我更正它，它可以正常工作*，但我有时会看到网络映射过时的问题，在这种情况下，只需访问远程驱动器 ( `cd /d x:`) 或重新执行`net use`修复问题。

# php - 如何通过外键从两个不同的表中获取所有字段

> ID：15745159
> 
> 赞同：0
> 
> 时间：2013-04-01T14:18:22.233
> 
> 标签：php, mysql, join

作为此功能的一部分，我有一个查询：

```
function user_data($MemberID){ //pass in memberid to get info about user
        $data = array();//data to be returned
        $MemberID =(int)$MemberID;//creating int from this input

        $func_num_args = func_num_args(); //count number of arguments from user data on init.php
        $func_get_args = func_get_args();

        if ($func_num_args >1) { //if more then 1, unset the first element of array 
            unset($func_get_args[0]);

            $fields = '`' . implode('`,`', $func_get_args) . '`';   //taking array and converting to string
            $data = mysql_fetch_assoc(mysql_query("SELECT $fields FROM `member`,`oddjob` WHERE `MemberID` = $MemberID"));

                return $data; 
```

我在用户个人资料页面中调用此函数（user_data），以便显示有关他们的一些信息。但是现在我还需要能够显示来自另一个名为`oddjob`.

`MemberID`是表中的主键`member`。 `MemberID`是`oddjob`表中的外键。 `OddJobID`是`oddjob`表中的主键。

我需要编辑上面的查询以根据 MemberID 从两个表中提取所有字段。我试过了：

```
$data = mysql_fetch_assoc(mysql_query("SELECT $fields FROM `member` INNER JOIN `oddjob` ON `member.MemberID` = `oddjob.MemberID` WHERE `MemberID` = $MemberID")); 
```

但是当我登录用户个人资料页面时，不断收到以下错误；

警告：mysql_fetch_assoc() 期望参数 1 是资源，给定的布尔值

这里的任何帮助都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T14:26:09.560

肯定有人会告诉你不要使用 mysql 函数，而是使用 mysqli 或 pdo。您的查询可能看起来像这样

```
select *
from   member m,
       oddjob o
where  m.MemberID = o.MemberID
and    m.MemberID = $MemberID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T14:32:19.760

PDO 是前进的道路，选择 PDO_MYSQL - [http://www.php.net/manual/en/ref.pdo-mysql.php](http://www.php.net/manual/en/ref.pdo-mysql.php)

# html - IE9：如何强制两个页面显示相同，为什么？第一个是 Quirks 模式，另一个是 IE7 Compatible

> ID：15745160
> 
> 赞同：0
> 
> 时间：2013-04-01T14:18:25.833
> 
> 标签：html, doctype

无论我尝试做什么，页面看起来都会显着不同，具体取决于它们来自我的本地机器还是开发服务器。按 F12 时，我终于注意到页面顶部有不同的说明：

1）我的本地机器显示的页面具有以下值：

**浏览器模式：** IE9兼容视图

**文档模式：**怪癖

HTML 以这行代码开头

```
<html xmlns="http://www.w3.org/1999/xhtml"> 
```

2）而开发服务器显示的页面具有以下值：

**浏览器模式：** IE9兼容视图

**文档模式：** IE7标准

HTML 以这行代码开头

```
<!-- DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd" -->

 <html xmlns="http://www.w3.org/1999/xhtml"> 
```

它看起来像是使这些页面以不同方式显示的指令的第一行。

我是否也需要将该行添加到来自本地计算机的页面中？为什么以及如何做到这一点？

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T14:25:25.790

如果没有 doctype，您将处于 quirks 模式，并且无论您做什么，页面看起来都与严格模式下的不同。

新网页应始终具有 doctype 并始终使用 strict。新创建的页面很少需要怪癖或您正在使用的过渡文档类型。

在第一行添加过渡文档类型，或者最好是严格版本：

`<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">`

更好的是，使用新类型：`<!DOCTYPE html>`它将使所有浏览器保持在严格模式，包括 IE 回到 IE6（甚至 IE4？不记得了）。

# listview - 如何触发jQueryMobile listview 搜索？

> ID：15745166
> 
> 赞同：0
> 
> 时间：2013-04-01T14:18:57.900
> 
> 标签：listview, search, jquery-mobile, filter

我正在开发一个列表视图，其内容应该通过两种不同的方式更新：搜索栏和选择选项过滤器。

到目前为止，我设法根据这些条件之一刷新了列表视图。问题是将这两个选项结合起来。

这是一个例子：

[搜索：无字符串] [选择：无选项]

*   苹果
*   香蕉
*   豆子
*   胡萝卜
*   土豆

让我们假设用户首先使用搜索框。Listview 内容根据搜索字符串进行更新。

[搜索：“B”] [选择：无选项]

*   香蕉
*   豆子

然后，用户使用选择框。列表视图将根据所选选项重建，并包含一组较小的项目。

[搜索：“B”] [选择：蔬菜]

*   豆子
*   土豆

在这一点上，我想强制进行研究，以便使用搜索字符串过滤这组较新的项目。我本来希望得到这个结果：

[搜索：“B”] [选择：蔬菜]

*   豆子

我在 jqueryMobile API 中搜索了一种强制搜索更新过程的方法，但没有成功。你知道我应该用来触发搜索的功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:03:08.393

看一下这个。希望这个解决方案对你有用。

[http://jsfiddle.net/dxS8f/](http://jsfiddle.net/dxS8f/)

```
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
<script>

$(document).bind('pageinit', function() {

    var listJSON = [
        { item : 'Apple',       category : 'Fruites'},
        { item : 'Banana',      category : 'Fruites'},
        { item : 'Beans',       category : 'Vegetables'},
        { item : 'Carrot',      category : 'Vegetables'},
        { item : 'Potatoes',    category : 'Vegetables'},
        { item : 'Spinach',     category : 'Vegetables'},
        { item : 'Strawberry',  category : 'Fruites'}
    ];

    $.each(listJSON, function(i, field){
        $('#mylist').append('<li>'+field.item+'</li>').listview('refresh');
    });

    var yourFilterFunction = function( text, searchValue, item ){
        var flag = false,
            sCat = null;
            categoryVal =  $("#optCategory").val().toLowerCase();

        $.each(listJSON, function(i, field) {
            if(field.item === text) {
                sCat = field.category;
            }
        });

        flag = (text.toString().toLowerCase().indexOf(searchValue) > -1) && ((sCat.toLowerCase() === categoryVal || categoryVal === ''));
        return !flag;
    };

    $("#mylist").listview('option', 'filterCallback', yourFilterFunction);

    $("#optCategory").bind('change', function() {
        var inputTxt = $("input.ui-input-text").val();
        $(".ui-input-text").trigger("keyup");
        $.each(listJSON, function(i, field) {
            yourFilterFunction(field.item, inputTxt, $("#mylist").children().eq(i));
        });
    });

});

</script>
</head>
<body>
    <div data-role="page" id="HelloPage">   
        <header data-role="header" class="header">
            <a href="#" data-rel="back">Back</a>
            <h5>jQuery Mobile</h5>
        </header>
        <div data-role="content">
            <select id="optCategory" data-mini="true">
                <option value="" >Select One</option>
                <option value="Fruites">Fruites</option>
                <option value="Vegetables">Vegetables</option>
            </select>
            <br/>
           <ul id="mylist" data-role="listview" data-inset="true" data-filter="true">
           </ul>
        </div>
        <footer data-role="footer" data-position="fixed"><h5>&copy; All rights reserved</h5></footer>
    </div>
</body>
</html> 
```

# three.js - 三.JS 是否可以在shapeGeometry上渲染纹理？

> ID：15745168
> 
> 赞同：3
> 
> 时间：2013-04-01T14:19:09.833
> 
> 标签：three.js

是否可以在 shapeGeometry 上渲染纹理？我尝试了几种方法，但这是我所能得到的。似乎正在加载纹理。如果我将它应用于球体，它会起作用，但它只在屏幕上显示为灰色和白色条纹。谢谢，大卫

```
<script>

        var container, stats;

        var camera, scene, renderer;

        var text, plane;

        var targetRotation = 0;
        var targetRotationOnMouseDown = 0;

        var mouseX = 0;
        var mouseXOnMouseDown = 0;

        var windowHalfX = window.innerWidth / 2;
        var windowHalfY = window.innerHeight / 2;

        init();
        animate();

        function init() {

            container = document.createElement( 'div' );
            document.body.appendChild( container );

            camera = new THREE.PerspectiveCamera( 50, window.innerWidth / window.innerHeight, 1, 1000 );
            camera.position.set( 0, 150, 500 );

            scene = new THREE.Scene();

            parent = new THREE.Object3D();
            parent.position.y = 50;
            scene.add( parent );

                            var earthTexture = new THREE.Texture();
            var loader = new THREE.ImageLoader();
            loader.addEventListener( 'load', function ( event ) {

                earthTexture.image = event.content;
                earthTexture.needsUpdate = true;

            } );

            loader.load( 'textures/land_ocean_ice_cloud_2048.jpg' );

                            var triangleShape = new THREE.Shape();
            triangleShape.moveTo(  80, 20 );
            triangleShape.lineTo(  40, 80 );
            triangleShape.lineTo( 120, 80 );
            triangleShape.lineTo(  80, 20 ); // close path
                            var geometry = new THREE.ShapeGeometry( triangleShape );
                            var material = new THREE.MeshBasicMaterial( { map: earthTexture, overdraw: true } );
                            var mesh = new THREE.Mesh( geometry, material );
                            parent.add( mesh );

            function addShape( shape, color, lncolor, x, y, z, rx, ry, rz, s ) {

                // flat shape

                var geometry = new THREE.ShapeGeometry( shape );
                                    var material = new THREE.MeshBasicMaterial( { map: color, overdraw: true } );
                                  //var material = new THREE.MeshBasicMaterial( { color: color, overdraw: true} );

                var mesh = new THREE.Mesh( geometry, material );
                mesh.position.set( x, y, z );
                mesh.rotation.set( rx, ry, rz );
                mesh.scale.set( s, s, s );
                parent.add( mesh );

                // line

                var geometry = shape.createPointsGeometry();
                var material = new THREE.LineBasicMaterial( { linewidth: 2, color: lncolor, transparent: true } );

                var line = new THREE.Line( geometry, material );
                line.position.set( x, y, z );
                line.rotation.set( rx, ry, rz );
                line.scale.set( s, s, s );
                parent.add( line );

            }

            // California

            var californiaPts = [];

            californiaPts.push( new THREE.Vector2 ( 610, 320 ) );
            californiaPts.push( new THREE.Vector2 ( 450, 300 ) );
            californiaPts.push( new THREE.Vector2 ( 392, 392 ) );
            californiaPts.push( new THREE.Vector2 ( 266, 438 ) );
            californiaPts.push( new THREE.Vector2 ( 190, 570 ) );
            californiaPts.push( new THREE.Vector2 ( 190, 600 ) );
            californiaPts.push( new THREE.Vector2 ( 160, 620 ) );
            californiaPts.push( new THREE.Vector2 ( 160, 650 ) );
            californiaPts.push( new THREE.Vector2 ( 180, 640 ) );
            californiaPts.push( new THREE.Vector2 ( 165, 680 ) );
            californiaPts.push( new THREE.Vector2 ( 150, 670 ) );
            californiaPts.push( new THREE.Vector2 (  90, 737 ) );
            californiaPts.push( new THREE.Vector2 (  80, 795 ) );
            californiaPts.push( new THREE.Vector2 (  50, 835 ) );
            californiaPts.push( new THREE.Vector2 (  64, 870 ) );
            californiaPts.push( new THREE.Vector2 (  60, 945 ) );
            californiaPts.push( new THREE.Vector2 ( 300, 945 ) );
            californiaPts.push( new THREE.Vector2 ( 300, 743 ) );
            californiaPts.push( new THREE.Vector2 ( 600, 473 ) );
            californiaPts.push( new THREE.Vector2 ( 626, 425 ) );
            californiaPts.push( new THREE.Vector2 ( 600, 370 ) );
            californiaPts.push( new THREE.Vector2 ( 610, 320 ) );

            var californiaShape = new THREE.Shape( californiaPts );

            // addShape( shape, color, x, y, z, rx, ry,rz, s );

            addShape( californiaShape,earthTexture, 0x000000, -300, -100, 0, 0, 0, 0, 0.25 );

            //

            renderer = new THREE.CanvasRenderer( { antialias: true } );
            renderer.setSize( window.innerWidth, window.innerHeight );
            //renderer.sortObjects = false;
            //renderer.sortElements = false;
            container.appendChild( renderer.domElement );

            stats = new Stats();
            stats.domElement.style.position = 'absolute';
            stats.domElement.style.top = '0px';
            container.appendChild( stats.domElement );

            document.addEventListener( 'mousedown', onDocumentMouseDown, false );
            document.addEventListener( 'touchstart', onDocumentTouchStart, false );
            document.addEventListener( 'touchmove', onDocumentTouchMove, false );

            //

            window.addEventListener( 'resize', onWindowResize, false );

        }

        function onWindowResize() {

            windowHalfX = window.innerWidth / 2;
            windowHalfY = window.innerHeight / 2;

            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();

            renderer.setSize( window.innerWidth, window.innerHeight );

        }
        function loadImage( path ) {

            var image = document.createElement( 'img' );
            var texture = new THREE.Texture( image, THREE.UVMapping )

            image.onload = function () { texture.needsUpdate = true; };
            image.src = path;

            return texture;

        }

        //

        function onDocumentMouseDown( event ) {

            event.preventDefault();

            document.addEventListener( 'mousemove', onDocumentMouseMove, false );
            document.addEventListener( 'mouseup', onDocumentMouseUp, false );
            document.addEventListener( 'mouseout', onDocumentMouseOut, false );

            mouseXOnMouseDown = event.clientX - windowHalfX;
            targetRotationOnMouseDown = targetRotation;

        }

        function onDocumentMouseMove( event ) {

            mouseX = event.clientX - windowHalfX;

            targetRotation = targetRotationOnMouseDown + ( mouseX - mouseXOnMouseDown ) * 0.02;

        }

        function onDocumentMouseUp( event ) {

            document.removeEventListener( 'mousemove', onDocumentMouseMove, false );
            document.removeEventListener( 'mouseup', onDocumentMouseUp, false );
            document.removeEventListener( 'mouseout', onDocumentMouseOut, false );

        }

        function onDocumentMouseOut( event ) {

            document.removeEventListener( 'mousemove', onDocumentMouseMove, false );
            document.removeEventListener( 'mouseup', onDocumentMouseUp, false );
            document.removeEventListener( 'mouseout', onDocumentMouseOut, false );

        }

        function onDocumentTouchStart( event ) {

            if ( event.touches.length == 1 ) {

                event.preventDefault();

                mouseXOnMouseDown = event.touches[ 0 ].pageX - windowHalfX;
                targetRotationOnMouseDown = targetRotation;

            }

        }

        function onDocumentTouchMove( event ) {

            if ( event.touches.length == 1 ) {

                event.preventDefault();

                mouseX = event.touches[ 0 ].pageX - windowHalfX;
                targetRotation = targetRotationOnMouseDown + ( mouseX - mouseXOnMouseDown ) * 0.05;

            }

        }

        //

        function animate() {

            requestAnimationFrame( animate );

            render();
            stats.update();

        }

        function render() {

            parent.rotation.y += ( targetRotation - parent.rotation.y ) * 0.05;
            renderer.render( scene, camera );

        }

    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T15:32:09.847

看看这个问题[Texture mapping on extrude geometry ThreeJS](https://stackoverflow.com/questions/14622087/texture-mapping-on-extrude-geometry-threejs)

更具体地说，这个区域

```
mesh = THREE.SceneUtils.createMultiMaterialObject(geometry, [material, new     THREE.MeshBasicMaterial({
    color: 0x000000,
    wireframe: true,
    transparent: true
})]); 
```

# arrays - CERN 从 TNtuple 中提取数组

> ID：15745171
> 
> 赞同：0
> 
> 时间：2013-04-01T14:19:31.147
> 
> 标签：arrays, root-framework

我正在使用 CERN 的 ROOT 框架，并且在存储和检索简单数组时遇到了一些麻烦。似乎我最好的选择是使用 TNTuple 类，但我找不到一种方法可以轻松地以逐个数字的方式访问存储在 TNTuple 中的数据。真的，我想做的是完全按照我通常使用浮点数组的方式使用 TNTuple，或者轻松地将 TNTuple 转换为浮点数组。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-22T17:51:34.903

相反，我建议使用数组类 -TArrayF - 非常简单。

[TArrayF](http://root.cern.ch/root/html/TArrayF.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-17T13:31:09.217

`TNtuple`通过 暴露各个列`GetArgs()`，例如

```
// make dummy ntuple with some data
TNtuple nt("nt", "", "a:b:c");
nt.Fill(0, 0, 0);
nt.Fill(1, 1, 1);

// show the data we have
nt.Scan();
************************************************
*    Row   *         a *         b *         c *
************************************************
*        0 *         0 *         0 *         0 *
*        1 *         1 *         1 *         1 *
************************************************
(Long64_t)2

for (int row = 0; row < nt.GetEntries(); ++row) {
    nt.GetEntry(row);

    // run through a, b, c
    for (int column = 0; nt.GetNvar(); ++column) {
      nt.GetArgs()[column];
    }
} 
```

# android - XML 布局有一个 ListView - 但仍然得到 ListView id not found 异常

> ID：15745175
> 
> 赞同：0
> 
> 时间：2013-04-01T14:19:44.937
> 
> 标签：android

我在stackoverflow中看到很多关于同一主题的问题，但我`could not understand the deep problem`是个例外。

下面是我的 XML 布局。我有一个列表视图。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" android:background="#FFFFFF">

    <ListView
        android:id="@+id/list"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="#656565"
        android:paddingLeft="@dimen/list_padding"
        android:paddingRight="@dimen/list_padding" 
        android:dividerHeight="20.0sp"
        android:divider="#656565"/>

</LinearLayout> 
```

下面是我的片段类。

```
public class FragmentClass extends SherlockListFragment implements AsyncListner{

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {     
           return inflater.inflate(R.layout.documents, container, false);
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState){

    }

      @Override
      public void onLoadComplete(List<DocumentResponse> data) {           
          DocumentsAdapter adapter = new DocumentsAdapter(getSherlockActivity(),
                    R.id.list, data);
          setListAdapter(adapter);
      }

} 
```

一旦 onLoadComplete 调用完成，我正在尝试创建我的 ListView。但我得到这个错误。"**你的内容必须有一个 id 属性为 android.R.id.list 的 ListView** "

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T14:21:36.387

更改`android:id="@+id/list"`为`android:id="@android:id/list"`

有了这个，你正在使用请求的`android.R.id.list`id。

不要忘记更新代码

```
DocumentsAdapter adapter = new DocumentsAdapter(getSherlockActivity(), android.R.id.list, data); 
```

# java - 在 ArrayList 中存储双精度

> ID：15745179
> 
> 赞同：0
> 
> 时间：2013-04-01T14:19:51.913
> 
> 标签：java, arraylist

我有一个 Integer 类型的 ArrayList，是否可以在其中存储一个值（例如：1.25）而不必将其转换为 int 从而丢失小数点后的位？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T14:21:19.137

不，您不能在`ArrayList<Integer>`不损失精度的情况下存储双打。但是，您可以将它们存储在`ArrayList<Double>`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-01T14:21:50.063

改为使用`ArrayList<Number>`。通过这种方式，您将能够存储`Double`和`Integer`实例，因为这两个类都派生自`Number`类。

# javascript - 在 jquery ui 模式对话框中嵌入 swf

> ID：15745180
> 
> 赞同：0
> 
> 时间：2013-04-01T14:19:53.017
> 
> 标签：javascript, jquery

我将 swf 嵌入到 jquery ui 模态对话框中，当我打开 swf 播放的对话框时，当我关闭对话框并重新打开对话框而不刷新页面时，swf 没有从第一个加载。当我关闭并打开对话框时，我希望从第一次重新打开 swf

这是对话的代码：

```
$( "#quiz" ).dialog({
    open: function(event, ui) { $(".ui-dialog-titlebar-close").hide(); },
    autoOpen: false,
    resizable: false,
    draggable: false,
    modal: true,
    width: 750,
    height:350
});

$( "#quiz-link" ).click(function( event ) {
    $( "#quiz" ).dialog( "open" );
       event.preventDefault();
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:48:57.427

每次打开/关闭对话框时，请尝试重建对话框的 HTML。我认为您目前只是在显示和隐藏它，因此它永远不会重置。

试试这样的东西：

```
$( "#quiz-link" ).click(function( event ) {

     // create a clone of your dialog
     var quiz_clone = $( "#quiz" ).clone().appendTo(body);

     quiz_clone.dialog({
        open: function(event, ui) { $(".ui-dialog-titlebar-close").hide(); },
        autoOpen: false,
        resizable: false,
        draggable: false,
        modal: true,
        width: 750,
        height:350
    });

    // destroy the clone when it's closed
    quiz_clone.on('close', function() {
        quiz_clone.dialog( "destroy" ).remove();
    });

    // show the clone
    quiz_clone.dialog( "open" );
    event.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T08:09:48.300

$("#quiz").dialog({

```
open: function(event, ui) { $(".ui-dialog-titlebar-close").hide(); },
autoOpen: false,
resizable: false,
draggable: false,
modal: true,
width: 750,
height:350,

close: function(){
    $("#quiz").html(document.getElementById('quiz').innerHTML) ;

    } 
```

});

```
 // Link to open the dialog
    $( "#quiz-link" ).click(function( event ) {
        $( "#quiz" ).dialog( "open" );
        event.preventDefault();

    }); 
```

# php - PHP SimpleXML replaceChild() 错误：“调用未定义的方法 [...]”

> ID：15745181
> 
> 赞同：1
> 
> 时间：2013-04-01T14:20:01.890
> 
> 标签：php, xml, simplexml

我在 Linux Apache 服务器上运行 PHP5

我试图在我的网站中使用 XML 作为一个简单的数据库。

我需要将整数（节点的内容）加一，然后保存文件。

错误消息是：**调用未定义的方法 SimpleXMLElement::replaceChild()**

这是我的代码：

```
<?php
$x = $_GET['x'];
$y = $_GET['y'];
$z = $_GET['z'];        
$dom = simplexml_load_file("questions.xml");
if ($dom->question['id'] == $x) {
    $poll = $dom->question->poll;
    if ($z == 0) {
        $yes = $poll->yes;
        $upper = $yes + 1;
        $yes->replaceChild($yes, $upper);
    } elseif ($z == 1) {
        $no = $poll->no;
        $lower = $no + 1;
        $no->replaceChild($no, $lower);
    }
}
?> 
```

问题.xml

```
<?xml version="1.0" encoding="utf-8" ?>
<questions>
    <question id="does-god-exist">
    <poll>
        <yes>0</yes>
        <no>0</no>
    </poll>
    </question>
</questions> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T14:27:40.437

`replaceChild`是`DOMNode`类的方法，而不是`simpleXML`. `SimpleXML`没有提供任何替换或删除子项的方法，因此您需要使用[dom_import_simplexml](http://de.php.net/manual/en/function.dom-import-simplexml.php)，然后您才能`replaceChild`在转换后的 DOM 对象中使用该函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T14:33:58.100

你有这个：

```
$yes = $poll->yes;
$upper = $yes + 1;
$yes->replaceChild($yes, $upper); 
```

... [SimpleXMLElement](http://www.php.net/manual/en/class.simplexmlelement.php)`$yes`对象在哪里，并且此类没有任何方法。我猜你想要这样的东西：`replaceChild()`

```
$poll->yes++; 
```

# actionscript-3 - 如何使用连接调用函数的变量（AS3）

> ID：15745185
> 
> 赞同：0
> 
> 时间：2013-04-01T14:20:18.510
> 
> 标签：actionscript-3, flash, function, concatenation

我需要按照以下示例使用连接访问此函数中的变量：

```
public function movePlates():void
{
    var plate1:Plate;
    var plate2:Plate;
    var cont:uint = 0;

    for (var i:uint = 0; i < LAYER_PLATES.numChildren; i++)
    {
        var tempPlate:Plate = LAYER_PLATES.getChildAt(i) as Plate;

        if (tempPlate.selected)
        {
            cont ++;

            this["plate" + cont] = LAYER_PLATES.getChildAt(i) as Plate;
        }
    }
} 
```

编辑：

```
public function testFunction():void
{
    var test1:Sprite = new Sprite();
    var test2:Sprite = new Sprite();
    var tempNumber:Number;
    this.addChild(test1);
    test1.x = 100;
    this.addChild(test2);
    test2.x = 200;

    for (var i:uint = 1; i <= 2; i++)
    {
        tempNumber += this["test" + i].x;
    }

    trace("tempNumber: " + tempNumber);
} 
```

如果我像这样运行代码，则 this["test" + i] 行返回该类的变量。我需要局部变量，函数的变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T15:12:55.453

您的第一步访问循环`plate0`将导致未找到错误，如果`plate0`未明确定义为类成员变量或类未定义为动态。`plate3, plate4, plate5...`如果`LAYER_PLATES.numChildren`超过 3 个，也会发生同样的事情。

编辑：

感谢@Smolniy，他纠正了我的答案`plate0`永远不会被访问，因为`cont`在第一次访问之前会增加。所以正如他提到的问题应该在`plate3`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T08:21:19.550

您不会使用 [] 表示法获得局部变量。您的案例有很多解决方案。您可以使用字典或 getChildAt() 函数：

```
function testFunction():void
{
    var dict = new Dictionary(true);
    var test1:Sprite = new Sprite();
    var test2:Sprite = new Sprite();
    var tempNumber:Number = 0;

    addChild(test1);
    dict[test1] = test1.x = 100;

    addChild(test2);
    dict[test2] = test2.x = 200;

    for (var s:* in dict)
    {
        tempNumber += s.x;
        //or tempNumber += dict[s];
    }

    trace("tempNumber: " + tempNumber);
}; 
```

# javascript - 如何增加 div id 值？

> ID：15745193
> 
> 赞同：9
> 
> 时间：2013-04-01T14:20:46.187
> 
> 标签：javascript, jquery, html

我有一项任务将菜单设置为选中状态。为此，我使用动态 ID。所以我想根据选择增加它

我的代码是

```
<div class="menuHeader ui-corner-top" id="menu"+ i>
    <span><a href="#" onclick="Home()">Home</a></span>
</div>
<div class="menuHeader ui-corner-top" id="menu"+ i>
    <span><a href="#" onclick="NewTransaction()">New Transaction</a></span>
</div>
<div class="menuHeader ui-corner-top" id="menu"+ i>
    <span><a href="#" onclick="Portfolio()">Portfolio</a></span>
</div> 
```

javascript是

```
$(document).ready(function () {
             alert(document.URL);
             var list = $("#menu");
             for (var i = 1; i <= list.length; i++) {
                 list[i].innerHTML = i;
             }
             var str = document.URL.toLowerCase().indexOf("portfolio/index");
             alert(str);
             if (str >= 0) {
                 $('#menu').addClass("menuHeaderActive");
             }
         }); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-01T14:26:47.270

```
var i=0;
$('.menuHeader').each(function(){
    i++;
    var newID='menu'+i;
    $(this).attr('id',newID);
    $(this).val(i);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T14:31:23.530

这是使用 Jquery 的方法

```
val elementList = $(".menu");
for (var i = 1; i <= list.length; i++) {
    elementList[i].attr("id", "menu" + i);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T14:24:37.683

只需使用类名而不是 id，您就可以重用刚刚添加的代码，但是以这种方式。

```
 var list = $(".menu"); 
```

一个建议，不要用javascript突出显示项目菜单，在服务器端做，你可以直接在LI的HTML中添加“激活”类。

# c# - 由任务计划程序启动时隐藏 C# 控制台应用程序窗口

> ID：15745195
> 
> 赞同：3
> 
> 时间：2013-04-01T14:20:48.423
> 
> 标签：c#, windows-7, scheduled-tasks, console-application

我已经搜索了谷歌并阅读了一些资源，但我无法找到一个好的答案。有谁知道如何防止控制台应用程序窗口在任务计划程序启动时打开？

参考。 [https://www.google.com/search?q=task+scheduler+hide+console+window&aq=f&oq=task+scheduler+hide+console+window&aqs=chrome.0.57j0l2j62.7404&sourceid=chrome&ie=UTF-8](https://www.google.com/search?q=task+scheduler+hide+console+window&aq=f&oq=task+scheduler+hide+console+window&aqs=chrome.0.57j0l2j62.7404&sourceid=chrome&ie=UTF-8)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-01T14:30:19.400

更改`output type to Windows application`将解决您的问题

转到：项目 - >项目属性

![在此处输入图像描述](https://i.stack.imgur.com/pgud9.png)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-11-21T13:09:46.403

![选中隐藏复选框](https://i.stack.imgur.com/lsued.jpg)选中隐藏复选框，并选中“无论用户是否登录都运行”复选框，可执行文件将在后台运行。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-01T14:25:33.953

作为一个简单的部分解决方案，您可以从任务调度程序最小化您的应用程序。

```
start /min <full path to your app>.exe 
```

它会出现在任务栏中，但除非用户在任务栏中单击它，否则它的主窗口将不可见。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-01T14:24:38.983

如果您有权访问代码/解决方案，则在**ProjectProperties 上将 Output Type 设置为 Windows Application**。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-03-03T12:17:01.510

将“*仅当用户登录时运行*”设置为**可见**。无论“隐藏”复选框的设置如何，将“*无论用户是否登录都运行*”设置为始终**隐藏。**

请参阅[http://technet.microsoft.com/en-us/library/cc722152.aspx](http://technet.microsoft.com/en-us/library/cc722152.aspx)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-05-27T10:34:26.443

如果您想要快速修复，您可以简单地选中任务计划程序的“常规”选项卡中的“隐藏”复选框。

# objective-c - 在 enumerateObjectsUsingBlock: 期间使用 removeObject: 是否安全？

> ID：15745198
> 
> 赞同：4
> 
> 时间：2013-04-01T14:21:07.020
> 
> 标签：objective-c, nsarray, foundation

这段代码运行没有崩溃，我在文档中看不到任何内容，但它真的安全吗？

```
[mutableArray enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    // do some stuff to obj before removing it
    [mutableArray removeObject:obj];
}]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T14:29:00.470

我认为**不应该这样做**。

与枚举一样，对象被视为 const。

我尝试了相同的代码，我收到以下错误：

```
Collection <__NSArrayM: 0x10053b8d0> was mutated while being enumerated. 
```

编码：

```
NSMutableArray *mutableArray=[NSMutableArray new];
[mutableArray addObject:@"A"];
[mutableArray addObject:@"Ab"];
[mutableArray addObject:@"Ac"];
[mutableArray addObject:@"Ad"];

[mutableArray enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    // do some stuff to obj before removing it
    [mutableArray removeObject:obj];
    NSLog(@"--->%@",mutableArray);
}]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-01T14:30:36.230

这是你永远不应该做的事情。相反，将所有元素索引收集到一个`NSMutableIndexSet`对象中，然后使用`removeObjectsAtIndexes:`来一​​次删除所有对象。

# c# - 更新 ASP.NET C# 项目中的修改代码

> ID：15745205
> 
> 赞同：3
> 
> 时间：2013-04-01T14:21:40.733
> 
> 标签：c#, asp.net

我想在某些文件中使用修改后的代码更新应用程序，那么更新 .dll 文件扩展名和必要的文件就足够了，还是我需要替换整个项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T14:35:49.563

You probably never need to replace the whole project. After you recompile, look at what DLLs were modified. You shouldn't need to replace *every* DLL in your bin, but you may need to replace each DLL that represents a project in your solution, depending on the dependencies of your solution.

So you will need to move over the DLLs that changed, as well as any other files that were modified (obviously excluding .cs, etc).

Though ideally, you will just use the "Publish" feature in Visual Studio, which automatically will copy over any (and only) necessary modified files. Doing it manually leaves too much room for error. Also (ideally) you will have a test server to publish with Debug settings so you can test, and then you publish with Release settings to your live server.

[How to: Deploy a Web Project Using One-Click Publish in Visual Studio](http://msdn.microsoft.com/en-us/library/dd465337.aspx)

# javascript - 我的 JavaScript 可用作内联代码，但不能用作包含文件。任何想法为什么以及如何解决它？

> ID：15745214
> 
> 赞同：0
> 
> 时间：2013-04-01T14:22:20.160
> 
> 标签：javascript, html

我有这个表格：

```
<form id="searchForm" class="search_field" method="get" action="">
...
...
</form> 
```

然后这个javascript：

```
 var form = document.getElementById("searchForm");
    form.doSearch1.onclick = searchPage;
    form.doSearch2.onclick = searchPage;
    form.showFeatureChoices.onclick = function( )
        {
            var cbs = form.featType;
            for ( var c = 0; c < cbs.length; ++c )
            {
                cbs[c].checked = false;
            }
            document.getElementById("featuresDiv").style.display = "block";
        }

function searchPage()
{
    var form = document.getElementById("searchForm");
    var searchText = form.searchBox.value.replace(/-/g,"");
    form.searchBox.value = searchText;

    if (searchText != "") 
    {
        // collect features to search for:
        var features = [ ];
        var featTypes = form.featType;
        for ( var f = 0; f < featTypes.length; ++f )
        {
            if ( featTypes[f].checked ) features.push( featTypes[f].value );
        }
        featureList = "'" + features.join("','") + "'";

        searchMsg("Searching for '" + searchText + "' ...");
        // startStatusUpdate(1000);
        // findTask.execute(findParams, showResults);
        var accord = dijit.byId("accordianContainer");
        var resultsPane = dijit.byId("resultsPane");
        accord.selectChild(resultsPane,true);

        doSearch( searchText, featureList );
    }
    else
    {
      searchMsg("No search criteria entered, enter search text");
    }   
} 
```

如果我将此代码嵌入到与 . 相同的文件中`<form...`，则它可以正常工作。

但是，如果我在另一个文件中有这个 js 并用作包含文件：

```
<script type="text/javascript" src="Views/JS/main.js"></script> 
```

我收到以下错误：“需要对象”，它指向这些行：

```
form.doSearch1.onclick = searchPage;
form.doSearch2.onclick = searchPage; 
```

任何想法如何解决这一问题？

更多信息，上面显示的 js 代码位于名为 main.js 的文件中，该文件位于名为 JS 的文件夹中，而 Js 位于名为 Views 的文件夹中。这

非常感谢提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:32:26.877

当您在同一页面中包含 JavaScript 代码时，它与`form`元素的关系在哪里？（之前还是之后？）当您引用外部 JavaScript 文件时怎么样？

我*猜*在前一种情况下，代码在文件的末尾，而在后一种情况下，`script`参考标签在开头？

如果这是真的，那么正在发生的事情是在 DOM 准备好之前执行此代码：

```
var form = document.getElementById("searchForm");
form.doSearch1.onclick = searchPage;
form.doSearch2.onclick = searchPage; 
```

如果`form`标签还没有被渲染到 DOM，那么第一行将找不到任何东西，随后的行将因此失败。一种方法是将`script`参考标签放在最后，但这对我来说似乎是一种黑客行为。有时有充分的理由将它们保留在页眉中，其中最重要的是在许多情况下对代码进行更清晰的管理。 [在 DOM 准备好之前，还有其他方法可以推迟执行 JavaScript 代码。](https://stackoverflow.com/questions/799981/document-ready-equivalent-without-jquery)

# php - 工具栏上带有自动完成功能的 kendoui Grid？

> ID：15745217
> 
> 赞同：1
> 
> 时间：2013-04-01T14:22:30.457
> 
> 标签：php, kendo-ui, kendo-grid

**更新：** 我尝试并花了很多时间解决问题，最后问题解决了。但最初非常感谢 OnaBai 和帮助我走到这一步的同事。

现在我被困在这里。

我输入用户名，它显示在下拉列表中，按 TAB 或 ENTER 后，它在网格中显示结果。结果仅在来自页面“1”的情况下显示在网格中，但如果来自页面“2”或任何其他页面，则不显示结果。

以下是它的工作原理： ![在此处输入图像描述](https://i.stack.imgur.com/VxqE4.jpg)

但是，当我搜索不在第 1 页上的其他用户时，它不会显示在网格中显示其他用户。相反，我得到空网格。 ![在此处输入图像描述](https://i.stack.imgur.com/T3gHM.jpg)

**FireBug 截图：** ![在此处输入图像描述](https://i.stack.imgur.com/Qtu9L.jpg) ![在此处输入图像描述](https://i.stack.imgur.com/i4OBu.jpg)

这是我对代码进行更多更改后的更新代码：

```
 <?php
/*foreach($users_list_data->result() as $row){
    echo $row->Username."<br />";
}*/
?>

<div id="grid"></div>
    <div id="details" />
    <div class="second_column_content_container">
    </div>

<script>

function create_user() {

    var entryform = $("#insert_user_info");
    $.ajax({
        type : 'POST',
        url : '<?php echo base_url(); ?>/index.php/user_management/manage_users/createUser',
        data : entryform.serialize(),
        success : function(response) {
            $(".second_column").html(response);
        }
    });
}

function create_user_form() {

    $.ajax({
        type : 'POST',
        url : '<?php echo base_url(); ?>/index.php/user_management/manage_users/load_user_form',

        success : function(response) {
            $(".second_column").html(response);
        }
    });
}

function onChange(arg) {

        var selected = "";
        var grid = this;

        grid.select().each(function() {
            var dataItem = grid.dataItem($(this));
            selected = dataItem.Username;
        });

  $.ajax({
        type: "POST",
        url: "<?php echo base_url()?>index.php/user_management/manage_users/get_user_groups/"+selected,

        beforeSend: function(){

            $("#pre_image").attr("src","http://localhost/zorkif_new/images/pre.gif");

        },

        success: function(output_string) {

            $('.data_column_a').html(output_string);

        }
    });
 }

    var wnd, detailsTemplate;
    $(document).ready(function(){
        var serverBaseUrl = "<?php echo base_url(); ?>";
        $("#grid").kendoGrid({
            dataSource:{
                serverPaging: true,
                transport: {
                    read: serverBaseUrl + "index.php/user_management/manage_users/list_view/",
                    update: {
                        url: serverBaseUrl + "index.php/user_management/manage_users/userUpdate/",
                        type: "POST"
                    }
//                    destroy: {
//                        url: serverBaseUrl + "index.php/user_management/manage_users/userDelete/",
//                        dataType: "jsonp"
//                    }
                    //update: "<?php echo base_url() ?>index.php/user_management/manage_users/list_view/"
                },
                error: function(e) {
                    alert(e.responseText);
                },
                schema:{
                    data: "data",
                    total: "total",
                    model: {
                        id: "UserID",
                        fields: {
                            FirstName: { editable: true },
                            LastName: { validation: { required: true} },
                            MiddleNames:{validation:{required:true}}
                        }
                    }
                },
                pageSize:5

            },
            toolbar: kendo.template($("#toolbarTemplate").html()),
            scrollable: true,

            selectable: "row",
            sortable: true,
            filterable: true,
            pageable: {
                input: true,
                numeric: false
            },
            columns: [
                {
                    field: "UserID",
                    hidden:true
                },
                {
                    field: "Username",
                    title:"Username"
                },
                { field: "FirstName",
                    title:"First Name"
                },
                {field:"MiddleNames"},
                {field:"LastName"},
                {field:"City"},
                {field:"Email"},
                //{field:"Actions"},
                //{command: { text: "Delete", click: showDetails }, title: " ", width: "140px"},
                {command: { text: "Details", click: redirectToPage }, title: " ", width: "140px" },
                { command: { text: "Edit", click: redirectToEditPage }, title: "&nbsp;", width: "140px" }
            ],
            change: onChange,
            editable: "popup"
        });
        $("#users").kendoAutoComplete({
            minLength: 3,
            dataTextField: "Username",
            dataSource: {
                serverFiltering: true,
                transport: {
                    read: {
                        type: "GET",
                        dataType: "json",
                        contentType:'application/json; charset=utf-8',
                        url: serverBaseUrl + "index.php/user_management/manage_users/search_user/",
                        data: function (arg){
                            //alert(arg);
                            //alert({Username:autocompleteUsers.data("kendoAutoComplete").value});
                               return {Username : $("#users").data("kendoAutoComplete").value()};
                            //return $("#users").data("kendoAutoComplete").value();
                            }
                    }
                }
            },
            change: onChangeAutoComplete
        });

        function onChangeAutoComplete(){
            var value = this.value();
            var grid = $('#grid');
            if (value) {
                grid.data("kendoGrid").dataSource.filter({ field: "Username", operator: "Contains", value: value });
            } else {
                grid.data("kendoGrid").dataSource.filter({});
            }
        }
        /*$("#users").kendoAutoComplete({
            minLength: 3,
            dataTextField: "Title",
            //JSON property name to use
            dataSource: {
                pageSize: 10,
                //Limits result set
                transport: {
                    read: {
                        url: "/echo/json/",
                        //using jsfiddle echo service to simulate JSON endpoint
                        dataType: "json",
                        type: "POST",
                        data: {
                            // /echo/json/ echoes the JSON which you pass as an argument
                            json: JSON.stringify([
                                {
                                    "Title": "Doctor Who: The Trial of a Time Lord"},
                                {
                                    "Title": "Doctor Who: The Key to Time"},
                                {
                                    "Title": "Doctor Who: The Time Meddler"},
                                {
                                    "Title": "Doctor Who: The End of Time"}
                            ])
                        }
                    }
                }
            }
        });*/

        /*change: function () {
                var value = this.value();
                if (value) {
                    grid.data("kendoGrid").dataSource.filter({ field: "UserID", operator: "eq", value: value });
                } else {
                    grid.data("kendoGrid").dataSource.filter({});
                }
            }
        });*/
        /*$("#users").blur(function() {
            var data = $(this).data("kendoAutoComplete").dataSource._data,
                    nbData = data.length,
                    found = false;

            for(var iData = 0; iData < nbData; iData++) {
                if(this.value === data[iData].Title)
                    found = true;
            }
            console.log(found);
        });*/

        wnd = $("#details").kendoWindow({
                    title: "Customer Details",
                    modal: true,
                    visible: false,
                    resizable: false,
                    width: 300
                }).data("kendoWindow");
        detailsTemplate = kendo.template($("#template").html());

    });

    function redirectToPage(e){
        e.preventDefault();
        var row = $(e.target).closest("tr");
        var item = $("#grid").data("kendoGrid").dataItem(row);
        $.ajax({
            type: "POST",
            url: "<?php echo base_url().'index.php/user_management/manage_users/ViewProfile/'?>"+JSON.parse(item.UserID),
            success: function(output_string){
                $('.second_column_content_container').html(output_string);
                //$('.second_column_content_container').innerHTML("hello");
                //alert(output_string);
            },
            error: function(data){
                alert("error");
            }
        });
    }
    function redirectToEditPage(e){
        e.preventDefault();
        var row = $(e.target).closest("tr");
        var item = $("#grid").data("kendoGrid").dataItem(row);
        $.ajax({
            type: "POST",
            url: "<?php echo base_url().'index.php/user_management/manage_users/edit_user/'?>"+JSON.parse(item.UserID),
            success: function(output_string){
                $('.second_column_content_container').html(output_string);
                //$('.second_column_content_container').innerHTML("hello");
                //alert(output_string);
            },
            error: function(data){
                alert("error");
            }
        });
    }
        //show details on a popup
       function showDetailsPopup(e) {
        e.preventDefault();
        var dataItem = this.dataItem($(e.currentTarget).closest("tr"));
        wnd.content(detailsTemplate(dataItem));
        wnd.center().open();
    }

    //This will redirect to Next Page
    function showDetails(e) {
        e.preventDefault();
        var row = $(e.target).closest("tr");
        var item = $("#grid").data("kendoGrid").dataItem(row);
        $.ajax({
            type: "POST",
            url: "<?php echo base_url().'index.php/user_management/manage_users/list_view/'?>"+JSON.parse(item.UserID),
            success: function(data){
                alert("done");
                //$('.second_column_content_container').html(output_string);
                //$('.second_column_content_container').innerHTML("hello");
                //alert(output_string);
            },
            error: function(data){
                alert("error");
            }
        });

        //var grid = $("#grid").data("kendoGrid");

        //alert(JSON.parse(item.UserID));
        //window.location.href="http://www.google.com/";

    }
</script>
        <script type="text/x-kendo-template" id="template">
                <div id="details-container">
                    <h2>#= FirstName #</h2>
                    <h2>City: #= City # </h2>
                </div>
        </script>
<script type="text/x-kendo-template" id="toolbarTemplate">
    <div class="toolbar">
        <label class="category-label" for="users">Search Users: </label>
        <input type="text" id="users" style="width: 250px;" />
    </div>
</script>

<div class="data_column_a">
    <img src=""  id="pre_image" >
</div> 
```

现在如何解决这个非常困难的问题O_o？？

* * *

更新：此用户名位于网格的第 2 页上，如屏幕截图所示。 ![在此处输入图像描述](https://i.stack.imgur.com/mm4pC.jpg)

但是在搜索期间，当我搜索第 1 页以外的用户名时，它会发送第 1 页的标题。

![在此处输入图像描述](https://i.stack.imgur.com/a8Ecq.jpg)

把我的头撞到墙上，如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T14:59:05.470

该问题似乎与您`autocomplete`未`Username`在`read`. 尝试定义`transport.read`为：

```
transport     : {
    read    : {
        url : "search_user.php",
        data: function (arg) {
            return {Username : autocompleteUsers.data("kendoAutoComplete").value()};
        }
    },
    dataType: "json",
    type    : "POST"
}, 
```

**编辑**：用于应用选定的值`autocomplete`作为网格的过滤条件。你应该做：

```
var autocompleteUsers = $("#users").kendoAutoComplete({
    dataTextField: "Username",
    dataSource   : {
        severFiltering: true,
        transport     : {
            read    : {
                url : "search_user.php",
                data: function (arg) {
                    return {Username: autocompleteUsers.data("kendoAutoComplete").value()};
                }
            },
            dataType: "json",
            type    : "POST"
        }
    },
    change       : function () {
        var username = autocompleteUsers.data("kendoAutoComplete").value();
        var filter = {
            logic  : "and",
            filters: [
                {
                    ignoreCase: true,
                    field     : "Username",
                    value     : username,
                    operator  : "startswith"
                }
            ]
        };
        $("#grid").data("kendoGrid").dataSource.filter(filter);
    }
}); 
```

# jquery - 强制 jquery ui 可拖动以重新计算位置

> ID：15745218
> 
> 赞同：0
> 
> 时间：2013-04-01T14:22:31.457
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable

我正在构建一个高度动态的页面，并且需要一种强制可拖动元素重新计算其位置的方法。

有什么方法可以调用拖动元素时调用的相同函数（我假设它是 mousemove 事件）？我需要从另一个元素滚动的另一个函数中调用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:10:04.977

`Draggable`有一些公共方法可以做你想做的事。查看[API 文档](http://api.jqueryui.com/draggable/)以获取更多信息，但我认为具体方法是`drag( event, ui )`. 你可以像这样使用它：

```
$( ".selector" ).draggable({
  drag: function( event, ui ) {
    // Current CSS position of the helper as { top, left } object.
    var position = ui.position;

    // Current offset position of the helper as { top, left } object.
    var offset = ui.offset;
  }
}); 
```

# cakephp - CakePHP i18n 没有多个 po 文件

> ID：15745220
> 
> 赞同：1
> 
> 时间：2013-04-01T14:22:37.157
> 
> 标签：cakephp, internationalization, gettext

对于我的 CakePHP 2.3 应用程序，我创建了 pot 文件并使用 Poedit 创建了 po 文件。但我有近 100 个字符串和 12 种语言。因此，在每次更改/添加时，我都不想重新创建 pot 文件并使用 Poedit 添加 po 文件。

所以我需要另一个适合 CakePHP 的解决方案。
- 是否可以在没有 po 文件的情况下使用 i18n，只使用 csv 文件？（似乎[Zend Translate](http://framework.zend.com/manual/1.12/en/zend.translate.html)有类似的解决方案）
- 是否可以对所有翻译使用一个 po 文件，或者对于这么多的字符串，性能是否会太差？
- 我不喜欢将翻译写入数据库。对于小型项目，gettext 的更好选择是什么？

相关：[一个或多个 po 文件中的 CakePHP 翻译和性能](https://stackoverflow.com/questions/13499525/cakephp-translations-in-one-or-multiple-po-files-and-performance)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T17:39:57.813

默认情况下，CakePHP 仅支持 .po 或 .mo 文件进行本地化，因此如果您想使用 CSV 代替，您必须实现自己的机制。

将每个区域设置在一个单独的文件中是（IMO）最佳实践；您将能够为每种语言配备单独的翻译/翻译局。我认为将所有语言放在一个文件中没有任何优势。将所有语言放在一个文件中可能只会使事情变得更加困难，因为每种语言都需要为每个字符串拥有自己唯一的“标识符”。此外，每种语言都有单独的文件可以更容易地比较不同的语言，例如检查是否缺少“msgids”

但是，您不必在每次更改*时*重新生成 .pot 文件。如果您跟踪所做的更改，您始终可以将新的“msgids”添加到现有的 .po 文件中。

正如@Admad 所建议的那样，您的项目中不应*同时*包含 .po*和*.mo （二进制）文件。如果两者都存在，CakePHP 将更喜欢 .mo 文件。

就个人而言，我更喜欢使用 .po 文件，因为它们可以少一步创建（将 .po 转换为二进制格式），并且因为它们是二进制的，所以（可能）更快地被 CakePHP 解析，但这是我的偏好，它可能你的情况不同。

# android - 嵌套的可包裹对象未读取

> ID：15745223
> 
> 赞同：27
> 
> 时间：2013-04-01T14:22:54.750
> 
> 标签：android, parcelable

我正在尝试打包一个包含一些字符串/int变量和一个对象变量的对象。字符串和 int 的工作，但不是嵌套对象。我知道我也必须将它打包，但我显然做错了什么=。在我的嵌套类中，该`writeToParcel`方法被调用（我通过`Log.d()`调用检查），但`createFromParcel()`没有。我最终得到一个`null`对象。这是我的简化代码：

```
public class MyClass implements Parcelable {

    public MyClass() {
    }

    private Integer id;
    private String name;    
    private MyOtherClass otherClass = new MyOtherClass();

    public Integer getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public OtherClass getOtherClass() {
        return otherClass;
    }

    public void setOtherClass(OtherClass otherClass) {
        this.otherClass = otherClass;
    }

    public static final Parcelable.Creator<MyClass> CREATOR
            = new Parcelable.Creator<MyClass>() {
        public MyClass createFromParcel(Parcel in) {
            return new MyClass(in);
        }

        public MyClass[] newArray(int size) {
            return new MyClass[size];
        }
    };

    @Override
    public int describeContents() {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public void writeToParcel(Parcel dest, int flags) {
        dest.writeString(name);
        dest.writeInt(id);
        dest.writeParcelable(otherClass, flags);
    }

    private MyClass(Parcel in) {
        name = in.readString();
        id = in.readInt();
        otherClass = (OtherClass) in.readParcelable(OtherClass.class.getClassLoader());
    }
}

class MyOtherClass implements Parcelable {

    public OtherClass() {
    }

    private String resourcePreviewURL;

    public String getResourcePreviewURL() {
        return resourcePreviewURL;
    }

    public void setResourcePreviewURL(String resourcePreviewURL) {
        this.resourcePreviewURL = resourcePreviewURL;
    }

    public int describeContents() {
        return 0;
    }

    public void writeToParcel(Parcel out, int flags) {
        Log.d("parcel", "write to parcel"); // this gets called
        out.writeString(resourcePreviewURL);
    }

    public static final Parcelable.Creator<MyOtherClass> CREATOR
            = new Parcelable.Creator<MyOtherClass>() {
        public MyOtherClass createFromParcel(Parcel in) {
            Log.d("parcel", "create from parcel"); // this doesn't get called
            return new MyOtherClass(in);
        }

        public ResourcePreviews[] newArray(int size) {
            return new ResourcePreviews[size];
        }
    };

    private OtherClass(Parcel in) {
            Log.d("parcel", "read from parcel"); // this doesn't get called
        resourcePreviewURL = in.readString();
    }

} 
```

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-04-02T12:58:10.920

我通过更改从包裹中写入/读取的顺序解决了这个问题。我在他们的方法中打了`dest.writeParcelable(otherClass, flags);`第`otherClass = (OtherClass) in.readParcelable(OtherClass.class.getClassLoader());`一个电话，它开始起作用了。这是一个问题吗？

```
@Override
public void writeToParcel(Parcel dest, int flags) {
    dest.writeParcelable(otherClass, flags);
    dest.writeString(name);
    dest.writeInt(id);
}

private MyClass(Parcel in) {
    otherClass = (OtherClass) in.readParcelable(OtherClass.class.getClassLoader());
    name = in.readString();
    id = in.readInt();
} 
```

# sql - 跨列全文搜索

> ID：15745227
> 
> 赞同：1
> 
> 时间：2013-04-01T14:23:14.193
> 
> 标签：sql, sql-server, full-text-search

抱歉帖子标题不好，但我无法更好地总结这一点。

最好举个例子。假设我有一个包含两个文本列的简单表格（我将其他列排除在外）。

```
Id    Text_1  Text_2
1     a       a b
2     c       a b 
```

现在，如果我想搜索“a”而不是“b”，在我当前的实现中，我将返回记录 1。我明白为什么会这样，这是因为搜索条件是“Text_1”列的匹配项，而对于记录 2，它不是任何列的匹配项。

但是，对于最终用户来说，这可能并不直观，因为他们可能意味着在大多数情况下也要排除记录 1。

所以我的问题是，如果我想告诉 SQL Server“跨所有列”进行匹配（这意味着如果在任何列上找到“NOT”部分，则记录不应该匹配），这可能吗？

编辑：这就是我的查询对于这个例子的样子：

```
SELECT Id, TextHits.RANK Rank, Text_1, Text_2 FROM simple_table
JOIN CONTAINSTABLE(simple_table, (Text_1, Text_2), '"a" and not "b"') TextHits
ON TextHits.[KEY] = simple_table.Id
ORDER BY Rank DESC 
```

实际的查询有点复杂（更多的列，更多的连接等），但这是一般的想法:)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:32:35.157

该逻辑将针对每条记录进行评估，因此如果您希望从一行中的一条记录中排除命中以导致对该行的排除，您应该使用 a`NOT EXISTS`并将全文查询分解为单独的包含和排除部分......

```
SELECT  Id, 
        TextHits.RANK Rank, 
        Text_1, 
        Text_2 
FROM    simple_table
JOIN    CONTAINSTABLE(simple_table, (Text_1, Text_2), '"a"') TextHits
        ON  TextHits.[KEY] = simple_table.Id
WHERE   NOT EXISTS (SELECT  1
                    FROM    CONTAINSTABLE(simple_table, (Text_1, Text_2), '"b"') exclHits
                    WHERE   TextHits.[KEY] = exclHits.[KEY])
ORDER BY Rank DESC 
```

# javascript - 在非系统驱动器上运行 NodeJS

> ID：15745229
> 
> 赞同：3
> 
> 时间：2013-04-01T14:23:17.273
> 
> 标签：javascript, node.js, npm, qunit

**设置：**

我在 Windows 8 x64 机器上的系统 (C) 驱动器上安装了 NodeJS。我通过以下方式全局安装了 QUnit `npm`：

```
npm install qunit -g 
```

**问题：**

如果我尝试引用 QUnit：

`var q = require('qunit');`

从 C 驱动器上的任何目录运行 NodeJS 时，一切都按预期工作。但是，当我从位于辅助 E 驱动器上的项目目录中运行它时，Node 找不到我的全局安装包：

```
Error: Cannot find module 'qunit'
    at Function.Module._resolveFilename (module.js:338:15)
    at Function.Module._load (module.js:280:25)
    at Module.require (module.js:362:17)
    at require (module.js:378:17)
    at repl:1:9
    at REPLServer.self.eval (repl.js:109:21)
    at rli.on.self.bufferedCmd (repl.js:258:20)
    at REPLServer.self.eval (repl.js:116:5)
    at Interface.<anonymous> (repl.js:248:12)
    at Interface.EventEmitter.emit (events.js:96:17) 
```

在从辅助驱动器运行 NodeJS 时，我是否还缺少其他一些配置才能使用全局安装的包？这只是不受支持吗？我不想在本地安装它们并将它们签入源代码管理，但如果全局包不能从辅助驱动器工作，它是一个备份选项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T14:56:12.100

[https://npmjs.org/doc/folders.html](https://npmjs.org/doc/folders.html)

> *   本地安装（默认）：将东西放在当前包根目录的 ./node_modules 中。
> *   全局安装（使用 -g）：将内容放在 /usr/local 或安装节点的任何位置。
> *   **如果您要 require() 它，请在本地安装它**。
> *   如果要在命令行上运行它，请全局安装它。
> *   如果两者都需要，则将其安装在两个位置，或使用 npm 链接。

为此，您可能需要考虑创建[`package.json`](https://npmjs.org/doc/json.html)文件。其中应该包括给定项目的所有依赖项。然后你应该能够运行`npm install`为你的项目安装所有给定的依赖项。

[这里](https://stackoverflow.com/questions/4871932/using-npm-to-install-or-update-required-packages-just-like-bundler-for-rubygems)有一个关于创建 package.json 文件的相关答案。

# java - Spring postForObject 返回 400 错误请求

> ID：15745231
> 
> 赞同：0
> 
> 时间：2013-04-01T14:23:29.087
> 
> 标签：java, spring, resttemplate

所以，我在我的 Java 应用程序中有这个方法：

```
public String addAppointment(String service_id, String location_id, String start_date, String client_name, String client_phone, String client_email, String note, String session_token)
{
    Map<String, String> args = new HashMap<String, String>();

    args.put("service_id", service_id);
    args.put("location_id", location_id);
    args.put("start_date", start_date);
    args.put("client_name", client_name);
    args.put("client_phone", client_phone);
    args.put("client_email", client_email);
    args.put("note", note);

    System.out.println(API_URL + "company/[censored]/appointment/?session_token="+ session_token);

    String result = restTemplate.postForObject(API_URL + "company/[censored]/appointment/?session_token="+ session_token, args, String.class);

    return result;
} 
```

我收到了警告：

```
WARNING: POST request for "http://www.setster.com/api/v2/company/[censored]/appointment/?session_token=[censored]" resulted in 400 (Bad Request); invoking error handler
WARNING: StandardWrapperValve[setster]: PWC1406: Servlet.service() for servlet setster threw exception 
```

当我更改该行时：

```
String result = restTemplate.postForObject(API_URL + "company/[censored]/appointment/?session_token="+ session_token, args, String.class); 
```

为了：

```
String result = restTemplate.getForObject(API_URL + "company/[censored]/appointment/?session_token="+ session_token, String.class, args); 
```

我从服务器收到一条带有正确响应的成功消息。但是，POST URL 很好，可以在 PHP 中使用 CURL 正常工作。

所以我的问题是。我做错了什么？还有其他选项可以使用**postForObject**创建帖子吗？

# windows-phone-7 - IBM 437 Windows 电话 7.1

> ID：15745239
> 
> 赞同：0
> 
> 时间：2013-04-01T14:24:17.053
> 
> 标签：windows-phone-7

我在我的应用程序 Windows phone 7.1 中使用了 ionic.zip.dll Silverlight，但是当我尝试使用 ZipFile.Read(stream); 任何人都知道我该如何解决这个问题？先感谢您

# jquery - jquery滑动侧边栏从左到右

> ID：15745240
> 
> 赞同：5
> 
> 时间：2013-04-01T14:24:20.127
> 
> 标签：jquery, html, sidebar, slidetoggle

我正在尝试创建一个滑动侧栏，其效果类似于

1.  www.wookmark.com
2.  [http://www.dynamicdrive.com/dynamicindex1/slideinmenu.htm](http://www.dynamicdrive.com/dynamicindex1/slideinmenu.htm)。

这就是我写代码的程度。但这很生涩。

1.  任何人都可以通过动画/缓动/切换等提出更好的解决方案吗
2.  我希望代码独立于左参数，即 $("#slide").css("left", "-150px"); 它应该能够以各种 div 宽度滑入/滑出

有任何想法吗 ？

**CSS**

```
#slide{
border:1.5px solid black;
position:absolute;
top:0;
left:0;
width:150px;
height:100%;
background-color:#F2F2F2;
layer-background-color:#F2F2F2;
} 
```

**HTML**

```
<div id="slide" style="left: -150px; top: 0px; width: 160px;">
    <p>Something here</p>
</div> 
```

**jQuery**

```
<script>
    jQuery(document).ready(function() {
        $('#slide').mouseover(function() {
            $("#slide").css("left", "0px");
        });

        $('#slide').mouseout(function() {
            $("#slide").css("left", "-150px");
        });

    });
 </script> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-01T14:33:12.253

你需要[animate()](http://api.jquery.com/animate/)方法 -

```
var width = $('#slide').width() - 10;
$('#slide').hover(function () {
     $(this).stop().animate({left:"0px"},500);     
   },function () {          
     $(this).stop().animate({left: - width  },500);     
}); 
```

这里我之前加`.stop()`过。这将清除由于快速移动鼠标而建立的动画队列。

**[演示](http://jsfiddle.net/Ztv5K/1/)**

# c - 在没有makefile的情况下使用make命令？

> ID：15745241
> 
> 赞同：11
> 
> 时间：2013-04-01T14:24:22.867
> 
> 标签：c, compiler-construction, makefile

我正在为分配编译一些 C 代码并运行“make codeFile”，其中“codeFile”是我的 C 程序的名称，即使我没有 makefile，也创建了一个可执行文件，它运行并工作正确。

有谁知道为什么这有效？为什么即使我没有makefile，make 也会编译一些东西？我能找到的唯一参考是： [http ://daly.axiom-developer.org/TimothyDaly_files/class5/node5.html](http://daly.axiom-developer.org/TimothyDaly_files/class5/node5.html)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-01T14:27:23.037

Make 有一个带有隐式规则的内部数据库。您可以使用`make -p`来列出它们。还会`make -d`告诉您正在应用哪些规则，这样可以帮助您发现在这种情况下使用了哪些隐式规则。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-01T14:26:40.337

Make 有几个预定义的[*隐式规则*](http://www.gnu.org/software/make/manual/make.html#Implicit-Rules)。特别是，在您的情况下，它在尝试确定要为目标做什么时使用两个这样的规则`codeFile`：

```
%: %.o    # Link object file
    $(CC) $(LDFLAGS) n.o $(LOADLIBES) $(LDLIBS)

%.o: %.c  # Compile C source code
    $(CC) $(CPPFLAGS) $(CFLAGS) -c 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-06-01T19:23:28.867

> **在没有makefile的情况下使用make命令？**

`make`具有默认的隐含规则，除非您覆盖它们。

根据[制作手册页](http://linux.die.net/man/1/make)：

```
make -p -f/dev/null 
```

将列出所有隐式规则（和相关的环境变量），而不尝试实际重新制作文件。

为了演示用法，我`make`在 Cygwin 中运行，它给了我一个`exe`文件。请注意`.c`传递给 make 的名称：

```
$ ls
hello.c
$ make hello
cc     hello.c   -o hello
$ ls
hello.c  hello.exe 
```

我也在 Ubuntu Linux 上运行了这个，结果和上面几乎一样，但是`.exe`扩展不存在，而是我有一个普通的`hello`可执行文件：

```
$ ls
hello.c  hello 
```

**逐步推导**

我认为 make 隐式规则的相关部分如下：

```
CC = cc 
```

`cc`别名为`CC`

```
LINK.c = $(CC) $(CFLAGS) $(CPPFLAGS) $(LDFLAGS) $(TARGET_ARCH) 
```

创建了一种`LINK`格式，其中标志为空，`TARGET_ARCH`变量也为空（[以允许用户为各种目标架构设置值](https://stackoverflow.com/questions/18476490/what-is-purpose-of-target-arch-variable-in-makefiles)。）然后我们有：

```
%: %.c
#  recipe to execute (built-in):
        $(LINK.c) $^ $(LOADLIBES) $(LDLIBS) -o $@ 
```

`^`变量是先决条件，`hello.c`。其他变量为空。这些后面是`-o`标志和目标名称。空变量解释命令 make run 中的额外空格：

```
cc     hello.c   -o hello 
```

并且`%: %.c`将给定的目标与以 结尾的相同目标名称的文件名相匹配`.c`，这导致配方执行。

# c# - 警告：找不到引用的组件“Microsoft.Office.Core”

> ID：15745249
> 
> 赞同：17
> 
> 时间：2013-04-01T14:24:41.907
> 
> 标签：c#, visual-studio-2010, visual-studio, ms-office

在构建我的一个项目时，我收到以下警告：

```
Warning 3   Cannot find wrapper assembly for type library "Microsoft.Office.Core".
Warning 4   The referenced component 'Microsoft.Office.Core' could not be found. 
```

奇怪的是，构建失败且没有错误。上面的警告似乎是问题所在。这在我从 Windows Update 安装了一些 Office 2007 更新后开始发生。在此之前，它一切都很好。

有没有人遇到过同样的问题？关于如何在不修改项目的情况下解决此问题的任何想法？

![在这些更新之后，我的项目停止了构建](https://i.stack.imgur.com/VkZ0g.png)

![这是 Microsoft.Office.Core 的参考属性](https://i.stack.imgur.com/Y2Qhw.png)

![参考文献列表](https://i.stack.imgur.com/wPAT8.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-04-09T02:19:50.403

很可能您的参考资料之一已更新到新版本，因此无法找到当前版本。

点击“project****Properties\reference”，把找不到的去掉就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T14:18:07.790

它似乎是一个 COM 引用？我猜想更新导致参考被认为是过时的。

如果是这样，我会考虑手动构建互操作并将它们签入，然后添加对互操作的引用。缺点是将问题从编译时转移到运行时。

# sed - 如何用特定值“XYX”替换csv文件的第二列

> ID：15745250
> 
> 赞同：1
> 
> 时间：2013-04-01T14:24:42.143
> 
> 标签：sed, awk

`xyz`要使用以下命令替换 csv 文件的最后一个字段：

```
awk -F, '{$NF="xyz";}1' OFS=, file 
```

如何用 value 覆盖文件的第二列`xyz`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T14:33:41.553

`awk`变量中`NF`是当前行的字段数。您可以参考每个字段，例如`$1`, `$2`...第一个字段是`$NF`哪里，第二个字段是哪里，直到当前行的最后一个字段*（即如果**是 5 那么**是**）。*`$1``$2``$NF`*`NF``$NF``$5`*

```
$ cat file
1,2,3,4,5

$ awk '$2="XYX"' FS=, OFS=, file
1,XYX,3,4,5 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T14:26:05.753

您在寻找：

```
awk '{$2="XYX"}1' file 
```

?

如果你想`FS`用逗号：

```
 awk -F, '{$2="XYX"}1' OFS=, file 
```

# python - 使用 Python 2.7.3 在输出中包含文本文件匹配的周围行

> ID：15745253
> 
> 赞同：1
> 
> 时间：2013-04-01T14:24:51.030
> 
> 标签：python, regex, text-files, output

我一直在开发一个有助于日志分析的程序。它使用正则表达式查找错误或失败消息并将它们打印到新的 .txt 文件中。但是，如果程序包括围绕匹配内容的顶部和底部 4 行，将会更加有益。我不知道该怎么做！这是现有程序的一部分：

```
def error_finder(filepath):
source = open(filepath, "r").readlines()
error_logs = set()
my_data = []
for line in source:
    line = line.strip()
    if re.search(exp, line):
        error_logs.add(line) 
```

我假设需要在最后一行添加一些内容，但我已经为此工作了一段时间，要么没有完全应用自己，要么就是想不通。

对此的任何建议或帮助表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:43:03.330

为什么是蟒蛇？

```
grep -C4 '^your_regex$' logfile > outfile.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T14:51:56.760

一些评论：

*   我不确定为什么`error_logs`是集合而不是列表。
*   using`readlines()`将读取内存中的整个文件，这对于大文件来说效率低下。您应该能够一次遍历文件一行。
*   `exp`（您使用的 for `re.search`）没有在任何地方定义，但我假设它在您的代码中的其他地方。

无论如何，这里有完整的代码，可以在不读取内存中的整个文件的情况下做你想做的事情。它还将保留输入行的顺序。

```
import re
from collections import deque

exp = '\d'
# matches numbers, change to what you need

def error_finder(filepath, context_lines = 4):
  source = open(filepath, 'r')
  error_logs = []

  buffer = deque(maxlen=context_lines)
  lines_after = 0

  for line in source:
    line = line.strip()
    if re.search(exp, line):
      # add previous lines first
      for prev_line in buffer:
        error_logs.append(prev_line)
      # clear the buffer
      buffer.clear()
      # add current line
      error_logs.append(line)
      # schedule lines that follow to be added too
      lines_after = context_lines
    elif lines_after > 0:
      # a line that matched the regex came not so long ago
      lines_after -= 1
      error_logs.append(line)
    else:
      buffer.append(line)

  # maybe do something with error_logs? I'll just return it
  return error_logs 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T15:00:17.403

我建议使用索引循环而不是每个循环，试试这个：

```
error_logs = list()
for i in range(len(source)):
    line = source[i].strip()
    if re.search(exp, line):
        error_logs.append((line,i-4,i+4)) 
```

在这种情况下，您的错误日志将包含 ('line of error', line index - 4, line index + 4)，因此您可以稍后从“source”中获取这些行

# php - 我有一个可用于将表单导出到 excel 文件的代码？

> ID：15745254
> 
> 赞同：0
> 
> 时间：2013-04-01T14:24:54.043
> 
> 标签：php, html, forms, export-to-excel

我有一个可用于将表单导出到 excel 文件的代码？现在一切正常，并将excel文件下载到下载文件夹中，但问题是`i want to store excel file into the localhost Excelfiles folder?`

**导出到excel.php**

```
<?php
header('Content-Type: application/force-download');
header('Content-disposition: attachment; filename=customers.xls');
// Fix for crappy IE bug in download.
header("Pragma: ");
header("Cache-Control: ");
echo $_REQUEST['datatodisplay'];
?> 
```

**测试.php**

```
<form action="exporttoexcel.php" method="post" 
onsubmit='$("#datatodisplay").val( $("<div>")
.append( $("#ReportTable").eq(0).clone() ).html() )'>

<table  id="ReportTable"  width="781" border="2">
<tr><td><input type="text" name="test" id="test"></td>
<td><input type="text" name="test2" id="test2"></td>
</table></form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:06:14.017

您不能指定文件下载到用户计算机上的位置。

# javascript - 设置值后Textarea消失

> ID：15745255
> 
> 赞同：0
> 
> 时间：2013-04-01T14:24:59.017
> 
> 标签：javascript, jquery, textarea, settimeout

这是我正在尝试做的事情：

通过单击“输入姓名”键入首字母（例如 MS、AK、LT）。这保存了一个字符串，然后我将其转换为一个数组 (nameArray) 以获取每组首字母。在随机重新排序这些之后，我想将一些首字母放入 textareas 中，但这就是问题所在。

出了什么问题：

缩写显示片刻，然后在函数执行后消失。（另外，我正在尝试让一个 div（带有文本“随机化...”）以其他方式隐藏，显示自身 4 秒（4000 毫秒），同时重新排序首字母以表明这一点。这就是 setTimeout是为了……但这也不起作用。div 与文本一起消失）。为什么这些仅与功能的执行相协调？

这是JS代码：

```
var nameArray;

window.onload = pageLoad;

function pageLoad() {
    $("#randomizingNotification").hide();
    $("#prev_arrow").click(prevUser);
    $("#next_arrow").click(nextUser);
    $("#enter_names").click(orderNames);    
}

function orderNames() {
    nameArray = getNames();
    randomizeNames();
    displayNames();
}

function getNames() {
    var initialsString = prompt("Please enter initials, separated by a comma (e.g LK,AS,NM)");
    nameArray = initialsString.split(",");
    return nameArray;
}

function randomizeNames() {
    $("#randomizingNotification").show();
    var timer = setTimeout(function(){randomize(nameArray);},4000);
    $("#randomizingNotification").hide();
    clearTimeout(timer);
}

function randomize(array) {
    for (var i = 0; i < array.length; i++ ) {
        var randNum = Math.floor(array.length*Math.random()) //random number between 0 and length of array (rounded down
        var temp = array[i];
        array[i] = array[randNum];
        array[randNum] = temp;
    }
}

function displayNames() {
    var curr, up, prev, current, upcoming, previous;
    curr = 0;
    up = 1;
    prev = null

    current = nameArray[curr];
    upcoming = nameArray[up];

    $("#upcoming_pick").val(upcoming);
    $("#current_pick").val(current);
} 
```

以下是相关的 HTML 代码：

```
<body>
<div id="header">
    <div id="randomizeNotContDiv">
        <div id="randomizingNotification">randomizing...</div>
    </div>

    <div id="page_title"><h1>Welcome to Classtech Shift Scheduler!</h1></div>

    <div id="helper_functions_div">
        <div id="enter_names_div">
            <a href="" id="enter_names">Enter Names</a>
        </div>
   </div> 
```

```
<div id="main_content">
    <div id="name_tracker">

        <div><a href="" alt="prev" id="prev_arrow"><img src="Images/prev_arrow.png"/></a></div>

        <textarea name="upcoming_pick" cols="10" rows="1" class="picker_names" id="upcoming_pick"></textarea>
        <textarea name="current_pick" cols="10" rows="1" class="picker_names" id="current_pick"></textarea>
        <textarea name="previous_pick" cols="10" rows="1" class="picker_names" id="previous_pick"></textarea>

        <div><a href="" alt="next" id="next_arrow"><img src="Images/next_arrow.png"/></a></div>

    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:50:06.023

你至少有几个问题，但主要问题是你的 setTimeout 的结构。setTimeout 类似于 AJAX 调用，因为它是非阻塞的。您传递给它的函数内部的任何内容都只会在计时器完成时执行，而在它之后的代码将*立即*执行。

我已经重新组织了您的随机化消息的隐藏和 displayNames 函数以进入 setTimeout 函数并且一切正常。

这是一个小提琴：http: [//jsfiddle.net/nate/LB6dz/](http://jsfiddle.net/nate/LB6dz/)

这是代码：

```
var nameArray;

window.onload = pageLoad;

function pageLoad() {
    $("#randomizingNotification").hide();
    $("#enter_names").click(orderNames);    
}

function orderNames(event) {
    // Prevent the link's default action
    event.preventDefault();

    nameArray = getNames();
    randomizeNames();
}

function getNames() {
    var initialsString = prompt("Please enter initials, separated by a comma (e.g LK,AS,NM)");
    nameArray = initialsString.split(",");
    return nameArray;
}

function randomizeNames() {
    $("#randomizingNotification").show();
    var timer = setTimeout(function (){
        randomize(nameArray);
        // These items need to be inside the timeout, so they only run once it's done
        $("#randomizingNotification").hide();
        displayNames();
    }, 4000);
    // No need to clearTimeouts after they're done... they only run once
    // clearTimeout(timer);
}

function randomize(array) {
    for (var i = 0; i < array.length; i++ ) {
        var randNum = Math.floor(array.length*Math.random()) //random number between 0 and length of array (rounded down
        var temp = array[i];
        array[i] = array[randNum];
        array[randNum] = temp;
    }
}

function displayNames() {
    var curr, up, prev, current, upcoming, previous;
    curr = 0;
    up = 1;
    prev = null

    current = nameArray[curr];
    upcoming = nameArray[up];

    $("#upcoming_pick").val(upcoming);
    $("#current_pick").val(current);
} 
```

# ruby - 在 Jekyll 源代码中使用 reduce 生成配置哈希？

> ID：15745258
> 
> 赞同：1
> 
> 时间：2013-04-01T14:25:04.733
> 
> 标签：ruby

我一直在浏览 Jekyll 源代码，偶然发现了这种方法：

```
 # Public: Generate a Jekyll configuration Hash by merging the default
  # options with anything in _config.yml, and adding the given options on top.
  #
  # override - A Hash of config directives that override any options in both
  #            the defaults and the config file. See Jekyll::DEFAULTS for a
  #            list of option names and their defaults.
  #
  # Returns the final configuration Hash.
  def self.configuration(override)
    # Convert any symbol keys to strings and remove the old key/values
    override = override.reduce({}) { |hsh,(k,v)| hsh.merge(k.to_s => v) }

    # _config.yml may override default source location, but until
    # then, we need to know where to look for _config.yml
    source = override['source'] || Jekyll::DEFAULTS['source']

    # Get configuration from <source>/_config.yml or <source>/<config_file>
    config_file = override.delete('config')
    config_file = File.join(source, "_config.yml") if config_file.to_s.empty?

    begin
      config = YAML.safe_load_file(config_file)
      raise "Configuration file: (INVALID) #{config_file}" if !config.is_a?(Hash)
      $stdout.puts "Configuration file: #{config_file}"
    rescue SystemCallError
      # Errno:ENOENT = file not found
      $stderr.puts "Configuration file: none"
      config = {}
    rescue => err
      $stderr.puts "           " +
                   "WARNING: Error reading configuration. " +
                   "Using defaults (and options)."
      $stderr.puts "#{err}"
      config = {}
    end

    # Merge DEFAULTS < _config.yml < override
    Jekyll::DEFAULTS.deep_merge(config).deep_merge(override)
  end
end 
```

尽管有评论，但我无法弄清楚它的作用。`reduce({})`特别困扰我 - 它有什么作用？

此外，之前调用的方法`configuration`是：

```
options = normalize_options(options.__hash__) 
```

做什么`__hash__`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T15:41:22.153

让我们看看有问题的代码：

```
override.reduce({}) { |hsh,(k,v)| hsh.merge(k.to_s => v) } 
```

现在让我们看一下[文档`Enumerable#reduce`](http://ruby-doc.org/core-2.0/Enumerable.html#method-i-reduce)：

> 通过应用二元运算组合枚举的所有元素，该二元运算由命名方法或运算符的块或符号指定。
> 
> 如果您指定一个块，那么对于枚举中的每个元素，该块都会传递一个累加器值（备忘录）和元素。如果你指定了一个符号，那么集合中的每个元素都将被传递给 memo 的命名方法。无论哪种情况，结果都会成为 memo 的新值。在迭代结束时，memo 的最终值就是方法的返回值。

因此，覆盖将是您典型的 Ruby 选项哈希，例如：

```
{
  debug: 'true',
  awesomeness: 'maximum'
} 
```

那么当你`reduce`在覆盖上使用它时会发生什么？

它将使用二进制函数组合枚举的所有元素（覆盖哈希的键 => 值对）`merge`。Merge 接受一个哈希并将其合并到接收器中。那么这里发生了什么？

1.  `hsh`开始，`{}`第一个键/值对被合并：`{}.merge(:debug.to_s => "true")`.
2.  `hsh`现在是`{"debug" => "true"}`。
3.  下一个键/值对被合并到：`{"debug" => "true"}.merge(:awesomeness.to_s => "maximum")`.
4.  `hsh`就是现在`{"debug" => "true", "awesomeness" => "maximum"}`
5.  没有更多的元素，所以`hsh`返回这个值。

这与代码注释相匹配，该注释说“将任何符号键转换为字符串并删除旧键/值”，尽管从技术上讲旧值不会被删除。相反，构造一个新的散列，并通过用新值替换变量来丢弃具有旧值的旧散列，最终由垃圾收集器收集 - 以及由 reduce 中的合并创建的中间对象。顺便说一句，这意味着这`merge!`将比`merge`在这种情况下更有效，因为它不会创建那些中间对象。

* * *

`__foo__`是一个 ruby​​ 习惯用法，用于您要确保不会重新定义的准私有和/或“核心”方法，例如，`__send__`因为`Socket`想要使用`send`. 在 Ruby 中，`hash`是对象的哈希值（使用哈希函数计算，当对象用作哈希键时使用），因此`__hash__`可能指向`options`将其数据存储为哈希的对象的实例变量。[这是一个来自 gem 的类，它就是这样做的](http://ruby-doc.org/gems/docs/n/nested_config-0.3.0/NestedConfig.html)。不过，您必须查看文档以了解任何类型的对象`options`。（您必须查看代码才能*确定*。;）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T15:41:56.707

[`reduce`](http://www.ruby-doc.org/core-2.0/Enumerable.html#method-i-reduce)通常用于构建数组或哈希，其方式类似于使用[`map`](http://www.ruby-doc.org/core-2.0/Enumerable.html#method-i-map)or `collect`，通过迭代地将每个元素添加到该容器，通常在对元素进行一些操作之后。

我改用[`each_with_object`](http://www.ruby-doc.org/core-2.0/Enumerable.html#method-i-each_with_object)它，因为这种操作更直观：

```
[:foo, :bar].each_with_object({}) do |e, h|
  h[e.to_s] = e
end 
```

请注意，`each_with_object`不需要从块中返回“记住”值`reduce`或`inject`想要。`reduce`并且`inject`对于其他类型的求和魔法`each_with_object`非常有用，所以也将它们留在你的工具箱中。

# android - 无法在mac中重命名目录eclipse

> ID：15745262
> 
> 赞同：1
> 
> 时间：2013-04-01T14:25:14.313
> 
> 标签：android, eclipse, macos, android-sdk-tools

我在 eclipse 中下载 sdk 时遇到了麻烦。我正在使用 mac 。当我尝试安装或更新 sdks 时，出现 */Users/psyfk/android-sdks/extras/android/support 到 /Users/psyfk/android-sdks/temp/ExtraPackage.old01 的错误。*即使我授予了 android-sdks 文件的权限，我也收到了这个错误。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T03:37:48.840

**快速思考：**

您的请求是否通过代理服务器？我在 Windows 7 中遇到了类似的问题。我在家里（代理网络外部）尝试过，它就像一个魅力。如果您在代理下，请尝试签入未通过的家庭网络

您还可以在 adp 中设置代理，看看它是否有效。

# c++ - c++中的0和-0有区别吗

> ID：15745263
> 
> 赞同：0
> 
> 时间：2013-04-01T14:25:20.733
> 
> 标签：c++, algorithm

我想创建一个循环链表，我需要在其中找到最大值和最小值，所以我需要一些检查点来停止，我想在第一个元素中使用 -0 来做到这一点（它只是一个检查点而不是其他任何东西）。我不想使用任何其他值，因为用户可以将新数据输入到列表中，如果用户输入 -0，我将简单地将其替换为 0，因为从数学方面来看，它们之间没有区别（我不会永远使用 -小数字:) )。我使用整数值。

问题现在没有利润。我试了一下，结果是一样的：

```
#include <iostream>

using namespace std;

int main() {
    if(0 != -0){
        cout << "they are different!";
    }else{
        cout << "they are same";
    }

    return 0;
} 
```

谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T14:31:11.200

与数学一样`0`，`-0`它们的值相同。您无法以任何方式区分它们，因此您可以在描述时使用此条件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T14:42:59.830

几乎通用的二进制补码系统中的整数值*不能*为负零 - 它们没有表示形式。负零根本不存在。

IEEE 浮点数可能会出现负零，但不会经常出现。将负数乘以 0.0 即可。

我建议找到另一个哨兵值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T14:36:11.383

This would require you store ints as doubles, mind. But you could do something like this.

[signbit](http://en.cppreference.com/w/cpp/numeric/math/signbit) probably does the trick. If not, try taking the reciprocal. 1/+0.0 = +inf, 1/-0.0 = -inf. As a last ditch effort, do something like:

```
double d=-0.0;
bool is_neg = (*(uint64_t*)&d)&0x8000000000000000; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T14:49:05.433

使用 NaN 作为检查点：

```
#include <iostream>
#include <limits>
struct cll {
  double value;
  cll * next;
};
int main() {
  int N = 5;
  double input[] = {1,2,3,4,5};
  cll * first = new cll;
  first->value = std::numeric_limits<double>::quiet_NaN();
  cll * next = first;
  for (int i = 0; i < N; ++i) {
    cll * last = new cll;
    next->next = last;
    last->value = input[i];
    last->next = first;
    next = last;
  }
  next = next->next;
  next = next->next;
  while (next->value == next->value)  {
    next = next->next;
  }
  next = next->next;
  while (next->value == next->value) {
    std::cout << next->value << '\n';
    next = next->next;
  }
  return 0;
} 
```

# mercurial - hg diff 通过指定一个版本并自动使用该特定版本的父版本

> ID：15745270
> 
> 赞同：2
> 
> 时间：2013-04-01T14:25:45.980
> 
> 标签：mercurial

这这可能吗？目前，我首先做一个`hg parents`找到父母，然后`hg diff`使用两个修订版。`hg diff`但是，如果可以选择进行一次修订并自动找到父母，那就更容易了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T00:03:42.020

您正在寻找 diff 上的“更改”开关：

```
 -c --change REV          change made by revision 
```

你像这样使用它（对于修订版 298）：

```
hg diff --change 298 
```

如果在合并变更集（有两个父项）上使用它，则只比较第一个父项。在这种情况下，您可以使用`p2` [revset](http://www.selenic.com/hg/help/revsets)来获取第二个父级：

```
hg diff -r 298:p2(298) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-02-15T12:23:30.523

```
hg diff -r 'tip~1' 
```

因为

> "x~n" x 的第 n 个祖先；“x~0”是x；“x~3”是“x^^^”。对于 n < 0，x 的第 n 个明确后代。

# oop - Whole-part 和 Part-whole 对象关系是什么？

> ID：15745277
> 
> 赞同：11
> 
> 时间：2013-04-01T14:26:04.427
> 
> 标签：oop, design-patterns, uml

我正在阅读 Head First Design Patterns 书，第 382 页上说：

> 当您拥有具有整体-部分关系的对象集合时，使用复合模式。并且您希望能够统一处理这些对象。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-01T14:29:39.133

嗯，这很简单——集合中的任何对象都是**整个组合的****一部分**，而组合作为一个**整体**是**部件**的集合。

 ******* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T14:43:14.520

基本上，该术语表示基于较小对象的较大对象的构造。在复合模式的上下文中，大对象和小对象都是同一类的实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-19T05:28:19.960

部分整体也与复合模式有关。复合模式提供了一种将对象组与单个对象相同的机制（这通常称为部分-整体层次结构）。******

# c# - 传递给 LEFT 或 SUBSTRING 函数的长度参数无效

> ID：15745280
> 
> 赞同：1
> 
> 时间：2013-04-01T14:26:21.600
> 
> 标签：c#, tsql

我从下面得到这个错误消息“传递给 LEFT 或 SUBSTRING 函数的长度参数无效”。任何人都可以给我一个提示，这是什么原因造成的，我该如何解决？

```
string cmdText = @"Declare  @SqlString nvarchar(2500)
, @AreaDelimiter char(1)
, @AreaFilter nvarchar(max);
Select @AreaDelimiter = ','    
If (@AreaName Not Like '*')
Begin
    Set @AreaName = @AreaName + @AreaDelimiter
    Set @AreaFilter = ''

    While LEN(@AreaName) > 0
    Begin
        If (Len(@AreaFilter) > 0)
        Begin
            Set @AreaFilter = @AreaFilter + ' Or Area Like ''' + 
               LTRIM(SubString(@AreaName, 1, 
                   CharIndex(@AreaDelimiter, @AreaName) - 1)) + '%'''
        End
        Else
        Begin
            Set @AreaFilter = 'Area Like ''' + 
               LTRIM(SubString(@AreaName, 1, 
                   CharIndex(@AreaDelimiter, @AreaName) - 1)) + '%'''
        End

        Select @AreaName = SUBSTRING(@AreaName, CharIndex(@AreaDelimiter,
             @AreaName) + 1, Len(@AreaName))
    End
End" 
```

> 上面的代码继续使用 else 语句和其他有效的操作:)

这是我的 C# 代码：

```
string area = "AREA1,AREA2,AREA3";

using (SqlConnection conn = new SqlConnection(domain.getDecryptedSqlConnectionString(domain.name + passPhrase)))
  {
    using (SqlCommand cmd = new SqlCommand(cmdText, conn))
    {

      System.Globalization.CultureInfo cInfo = new System.Globalization.CultureInfo("pt-BR");
      DateTime dt = DateTime.Parse(startDate, cInfo);
      DateTime da = DateTime.Parse(endDate, cInfo);
      cmd.Parameters.Add("Interval", SqlDbType.Int).Value = interval;
      cmd.Parameters.Add("IntervalUnit", SqlDbType.VarChar).Value = intervalUnit;
      cmd.Parameters.Add("StartDate", SqlDbType.DateTime).Value =  dt.ToShortDateString();
      cmd.Parameters.Add("EndDate", SqlDbType.DateTime).Value = da.ToShortDateString();
      cmd.Parameters.Add("tbName", SqlDbType.VarChar).Value = domain.alarmTableName;
      cmd.Parameters.Add("AreaName", SqlDbType.VarChar).Value = area; 
      using (SqlDataAdapter adapter = new SqlDataAdapter(cmd))
      {
        using (DataTable tb = new DataTable())
        {
          try
          {
            conn.Open();
            adapter.Fill(tb);
            return tb;
          }
          catch (Exception ex)
          {
            return tb;
          }
          finally
          {
            conn.Close();
          }
        }
      }
    }
  } 
```

解决了，我只是改变

```
cmd.Parameters.Add("AreaName", SqlDbType.VarChar).Value = area; 
```

为了

```
cmd.Parameters.Add("AreaName", SqlDbType.VarChar, -1).Value = area; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:24:08.823

我可以重现错误

```
DECLARE @AreaName VARCHAR(20);
DECLARE @AreaDelimiter CHAR(1);
DECLARE @AreaFilter VARCHAR(100);

SET @AreaName='AREA1,AREA2,AREA3,area4,area5';
SET @AreaDelimiter=','; 
```

请注意，@AreaName 的声明对于数据来说不够长 - 请检查您的声明。

此外，如果 @AreaName 的字符串来自用户输入，那么您的代码很容易受到 SQL 注入攻击。

编辑：

您所有的 SQL 参数名称都需要以 开头`@`，例如`@AreaName`，并且您必须匹配`SqlDbType`C# 代码和 SQL 代码之间的名称。

你不应该使用

```
cmd.Parameters.Add("StartDate", SqlDbType.DateTime).Value =  dt.ToShortDateString(); 
```

相反，它应该是

```
cmd.Parameters.Add("StartDate", SqlDbType.DateTime).Value =  dt; 
```

因为`dt`已经是 DateTime。

# ssis - 从 JOB 执行 SSIS 包时出错

> ID：15745281
> 
> 赞同：3
> 
> 时间：2013-04-01T14:26:29.983
> 
> 标签：ssis

信息

> 以用户身份执行：UKDBT91DB05V\SYSTEM。Microsoft (R) SQL Server Execute Package Utility Version 10.50.2500.0 for 64-bit 版权所有 (C) Microsoft Corporation 2010。保留所有权利。开始：14:58:34 错误：2013-04-01 14:58:34.45 代码：0xC0016016
> 来源：描述：无法解密受保护的 XML 节点“DTS:Property”，错误为 0x8009000B“密钥在指定状态下无效。”。您可能无权访问此信息。当存在加密错误时会发生此错误。验证正确的密钥是否可用。End Error 错误：2013-04-01 14:58:34.76 代码：0xC001000E 来源：ReceiveDGDinformation 描述：未找到连接“stock”。当未找到特定连接元素时，Connections 集合会引发此错误。结束错误错误：2013-04-01 14:58:34.80 代码：0xC0202009 来源：ReceiveDGDinformation 连接管理器“Stock”描述：SSIS 错误代码 DTS_E_OLEDBERROR。发生 OLE DB 错误。错误代码：0x80040E4D。OLE DB 记录可用。来源：“Microsoft SQL Server Native Client 10.0” Hresult：0x80040E4D 描述：“用户 'DOTCOM\UKDBT91DB05V$' 登录失败。”。结束错误错误：2013-04-01 14:58:34.80 代码：0xC020801C 来源：填充暂存表填充 DGD 暂存表 [34] 描述：SSIS 错误代码 DTS_E_CANNOTACQUIRECONNECTIONFROMCONNECTIONMANAGER。对连接管理器“Stock”的 AcquireConnection 方法调用失败，错误代码为 0xC0202009。在此之前可能会发布错误消息，其中包含有关 AcquireConnection 方法调用失败原因的更多信息。结束错误错误：2013-04-01 14:58:34.80 代码：0xC0047017 来源：填充暂存表 SSIS.Pipeline 描述：组件“填充 DGD 暂存表” (34) 验证失败并返回错误代码 0xC020801C。结束错误错误：2013-04-01 14:58:34.80 代码：0xC004700C 来源：填充暂存表 SSIS.Pipeline 描述：一个或多个组件验证失败。结束错误错误：2013-04-01 14:58:34.80 代码：0xC0024107 来源：填充暂存表描述：任务验证期间出现错误。结束错误 DTExec：包执行返回 DTSER_FAILURE (1)。开始时间：14:58:34 结束时间：14:58:34 经过时间：0.624 秒。包执行失败。步骤失败。80 代码：0xC0024107 来源：填充暂存表描述：任务验证期间出现错误。结束错误 DTExec：包执行返回 DTSER_FAILURE (1)。开始时间：14:58:34 结束时间：14:58:34 经过时间：0.624 秒。包执行失败。步骤失败。80 代码：0xC0024107 来源：填充暂存表描述：任务验证期间出现错误。结束错误 DTExec：包执行返回 DTSER_FAILURE (1)。开始时间：14:58:34 结束时间：14:58:34 经过时间：0.624 秒。包执行失败。步骤失败。

错误消息的有意义的位

*   无法解密受保护的 XML 节点“DTS:Property”，错误为 0x8009000B“密钥在指定状态下无效。”。您可能无权访问此信息。出现密码错误时会发生此错误
*   用户“DOTCOM\UKDBT91DB05V$”登录失败

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T16:48:58.940

这可能是您的 ProtectionLevel 设置以及您如何配置作业的问题。

如果 ProtectionLevel 处于默认的“EncryptSensitiveWithUserKey”设置，则开发环境正在使用取决于进行开发的用户的密钥对连接字符串数据库密码等内容进行加密。将其部署到生产服务器并安排 SQL Server 代理作业后，它很可能会在不同的用户帐户下运行，然后将无法解密数据库密码。你会得到这个错误。

一种可能性是确保开发用户和作业执行用户是同一个用户帐户，但这不是一个好主意。通常您希望您的生产用户帐户与您的开发用户帐户分开。

相反，您应该将 ProtectionLevel 设置为“DontSaveSensitive”。然后密码根本不会与 SSIS 包一起保存。您为连接字符串创建了一个配置文件，但密码也不会保存到配置文件中。如果您希望它包含密码，则必须手动编辑配置文件。但最好的方法是在安排执行 SSIS 包的作业时配置密码。这样可以将密码保存在一个安全的地方，并且它不会随 SSIS 包到处飘荡。

一些有用的链接[在这里](http://social.msdn.microsoft.com/Forums/en-US/sqlintegrationservices/thread/9607471f-ef30-4829-a61a-e5e11c209a56)和[这里](http://support.microsoft.com/default.aspx?scid=kb;en-us;904800)。

祝你好运！

# c++ - 在 Linux 中清理无限循环应用程序的正确方法是什么？

> ID：15745282
> 
> 赞同：4
> 
> 时间：2013-04-01T14:26:30.483
> 
> 标签：c++, c, linux, windows, cross-platform

我主要来自 Windows 环境，所以在过渡到在 Linux 中编写一些东西时我有点迷茫。

假设我有一个简单的 C/C++ 应用程序，如下所示：

```
int main(int argc, char** argv)
{
    int h = open("something");

    while (true)
    {
        // do work
        usleep(10000);
    }

    close(h);
} 
```

在 Windows 中，我会使用类似的东西`GetAsyncKeyState()`（或某种其他类型的键盘检查功能）来查找转义键，并在按下它时跳出我的循环。这样我`close(h)`就会被叫到，我会做所有我需要做的清理工作。

我在 Linux 中终止我的应用程序的方式一直是使用`CTRL`+ `C`，从我的阅读来看，这意味着它发送`SIGINT`，并且是一种导致应用程序退出的“友好”方式。但是，根据我的经验，这只是导致它在收到该信号时丢弃所有内容并关闭它（这意味着我的循环后清理永远不会运行。）

有些人建议我使用`signal()`来监听`SIGINT`，但其他人不同意这种方法。（另外，它往往会在 Windows 和 Linux 之间的工作方式之间产生更多差异，我希望尽可能地在两个平台上运行。）

这样的事情是否有“最佳实践”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T14:32:14.157

使用`SIGINT`处理程序实际上是在 POSIX 世界中处理这些事情的正常方式，类似于[`SetConsoleCtrlHandler`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686016%28v=vs.85%29.aspx)在 Windows 中使用。

在`SIGINT`信号处理程序中，您设置一个标志，循环检查该标志是否应该退出。

但是，它不是严格需要的，除非您在清理中有特殊需要（例如向其他应用程序或类似应用程序发送再见消息）。操作系统将确保所有文件都正确关闭，所有内存分配都被释放，等等。就像在 Windows 中一样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T14:33:45.293

SIGINT 的默认操作是以正常方式终止程序。`close`当程序以这种方式退出时，所有打开的文件都会自动关闭，因此没有显式运行也没关系。

当然可以设置一个信号处理程序来关闭程序，但对于这样的事情，它会是矫枉过正。通常，如果您按 ctrl-c 退出程序，您会期待一个非常快速的终止。

如果您打开了多个已写入的文件，并且它们都需要处于相对于彼此一致的状态，您可能需要处理信号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T14:40:23.900

通常当你做 getch(); 您的程序的输入被阻止，直到一个键被击中。这在 unix 世界中称为“规范”处理（canons=rules）。你可以把它关掉。因此，当您执行 getch(); 并且没有按下任何键，它将立即返回 -1 或任何类型的错误代码。

对我来说已经 15 年了，所以我不确定具体细节，但是，如果你用谷歌搜索 ioctl、termio、canonical、noncanonical，你会马上得到答案。

但希望有人会好心地为您发布几行代码！对不起，我只有一分钟的时间来回答。

# c# - 绑定到数据列表中隐藏字段的值不是特定于项目

> ID：15745283
> 
> 赞同：0
> 
> 时间：2013-04-01T14:26:35.770
> 
> 标签：c#, asp.net, datalist, hiddenfield

我是 asp.net(C#) 的初学者，我正在开发一个社交网络应用程序。我一直停留在状态更新和评论部分。我希望在加载页面时所有线程（状态'）都应该在数据列表内的隐藏字段中具有它们的 ID，因为我已经为状态创建了一个 ItemTemplate 并将 Thread_ID 分配给隐藏字段。但问题是隐藏字段对于不同的项目没有不同的值。我不知道我在哪里做错了。请帮我。

这是数据列表的代码：

```
<asp:DataList ID="DataListStatus" runat="server" RepeatColumns="1"
            onitemdatabound="DataListStatus_ItemDataBound"
            onitemcommand="DataListStatus_ItemCommand">
        <ItemTemplate>
            <table width="550px">
                <tr><asp:HiddenField ID="HFieldThreadID" Value='<%#Eval("Thread_ID") %>' runat="server" />
                    <td style="vertical-align:top; width:50px;" align="left" rowspan="3"><a href='UserProfile.aspx?loginid=<%#Eval("RegID")%>' ><img alt="Propic" src="../Images/ProPic.jpg" width="50px" height="50px" /></a></td>
                    <td style="vertical-align:top; width:250px;" align="left"><a href='UserProfile.aspx?loginid=<%#Eval("RegID")%>' ><%#Eval("RegID")%></a></td>
                    <td style="vertical-align:top; width:250px;" align="right"><%#Eval("St_Time") %></td>
                </tr>
    </table>
  </ItemTemplate>
</asp:DataList> 
```

这是背后的代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        da.SelectCommand = new SqlCommand("SELECT * FROM Status where RegID='" + Session["user"].ToString() + "'", con);
        con.Open();
        da.Fill(ds, "status");
        con.Close();
        DataListStatus.DataSource = ds.Tables["status"];
        DataListStatus.DataBind();
    }

} 
```

在这里，我使用内部数据列表中隐藏字段的值进行注释：

```
protected void DataListStatus_ItemDataBound(object sender, DataListItemEventArgs e)
{
    da.SelectCommand = new SqlCommand("SELECT * FROM Comment WHERE Thread_ID='" +      ((HiddenField)e.Item.FindControl("HFieldThreadID")).Value + "'", con);
    con.Open();
    da.Fill(ds, "cmts");
    con.Close();
    ((DataList)e.Item.FindControl("DataListCmt")).DataSource = ds.Tables["cmts"];
    ((DataList)e.Item.FindControl("DataListCmt")).DataBind();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:12:37.820

不要使用隐藏字段。因为页面加载时这个隐藏字段被清除了，所以请使用标签控件并在标签控件中设置visible="false"。

并且必须在页面加载事件中调用 !IsPostBack 内部的 DataList 绑定方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T16:21:02.173

我注意到的一件事`ItemDataBound`是您要确保`e.Item is`类型`Item`或 `AlternatingItem`在搜索和绑定项目内的控件之前。

**注意**：请使用参数化查询以避免 SQL 注入。

```
protected void DataListStatus_ItemDataBound(object sender, DataListItemEventArgs e)
{
   if (e.Item.ItemType == ListItemType.Item || 
      e.Item.ItemType == ListItemType.AlternatingItem)
   {
    da.SelectCommand = new SqlCommand("SELECT * FROM Comment WHERE Thread_ID='" +      ((HiddenField)e.Item.FindControl("HFieldThreadID")).Value + "'", con);
    con.Open();
    da.Fill(ds, "cmts");
    con.Close();
    var dataList = (DataList)e.Item.FindControl("DataListCmt");
    dataList.DataSource = ds.Tables["cmts"];
    dataList.DataBind();
   }
} 
```

# iphone - 命令 /usr/bin/lipo 失败，退出代码为 1

> ID：15745286
> 
> 赞同：0
> 
> 时间：2013-04-01T14:26:46.940
> 
> 标签：iphone, ios, hudson

我第一次在我的 iOS 项目中使用 Hudson 持续集成，在构建项目时出现以下错误。

```
"/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/opt/local/bin:/opt/local/sbin:/opt/local/bin:/opt/local/sbin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin"
lipo -create /Users/test/.hudson/jobs/eDetails/workspace/build/eDetail.build/Debug-iphonesimulator/SSSDetail.build/Objects-normal/i386/SSSDetail /Users/test/.hudson/jobs/eDetails/workspace/build/SSSDetail.build/Debug-iphonesimulator/SSSDetail.build/Objects-normal/i386/SSSDetail -output /Users/test/.hudson/jobs/eDetails/workspace/build/Debug-iphonesimulator/SSSDetail.app/eDetail

/usr/bin/lipo: /Users/test/.hudson/jobs/eDetails/workspace/build/SSSDetail.build/Debug-iphonesimulator/SSSDetail.build/Objects-normal/i386/SSSDetail and /Users/test/.hudson/jobs/eDetails/workspace/build/SSSDetail.build/Debug-iphonesimulator/SSSDetail.build/Objects-normal/i386/SSSDetail have the same architectures (i386) and can't be in the same fat output file 
```

命令 /usr/bin/lipo 失败，退出代码为 1

有人有什么想法，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:24:04.023

对我来说它有效

在目标-> 构建设置-> 有效架构中

将值从“armv7 armv7s”更改为“armv7s”

我有 iOS 部署目标 4.3。

在 XCode 版本 4.6 (4H127) 中转换为 Objective-C ARC 时遇到

# php - CakePHP 的时区助手

> ID：15745289
> 
> 赞同：3
> 
> 时间：2013-04-01T14:27:00.317
> 
> 标签：php, cakephp

我已经使用 Stack Overflow 上的各种示例为我的 CakePHP 应用程序构建了一个简单的时区助手，它将用户区域保存在他们的用户记录中。例如欧洲/伦敦。

查看助手： http: [//pastebin.com/VGivwqHJ](http://pastebin.com/VGivwqHJ)

当用户登录应用程序时，我会保存他们登录的日期/时间，以便出于安全原因向用户显示日志列表。例如 $this->User->saveField('lastlogin', date('Ymd H:i:s'));

但是，该日期当前将拉取服务器日期/时间。如何利用用户的时区来修改它？

我试过：

`$date = new DateTime(null, new DateTimeZone($user['User']['timezone']));`

然后：`$this->User->saveField('lastlogin', $date->date);`但我只是得到空......

但是，如果我调试 $date 我会得到例如：

```
object(DateTime) {
    date => '2013-04-01 15:22:32'
    timezone_type => (int) 3
    timezone => 'Europe/London'
} 
```

**1.）我做错了什么？如何从对象中提取日期时间？**

**2.) 这是处理这个问题的好方法吗？因为这意味着我必须`date()`用这个片段替换所有调用来获得用户的时间。**

**3.）网站上的日期不会不匹配，例如，如果欧洲用户在美国用户之后发布了一些内容，但由于使用了他们的当地时间，它会显示为不同，可能看起来好像在美国之前对方。**

**我应该改为保存服务器时间，然后使用上面的代码段以不同的方式向用户显示它，所以所有时间都是相同的时区，但随后相对于用户显示？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T14:47:56.983

我不确定您是否可以`DateTime`使用`saveField()`. 您可能必须将其转换为 CakePHP 认为通用的格式的字符串：

```
$this->User->saveField('lastlogin', $date->format('Y-m-d H:i:s')) 
```

您的原始代码可能会触发此通知：

```
Notice: Undefined property: DateTime::$date 
```

[...因为DateTime](http://www.php.net/manual/en/class.datetime.php)类中没有`date`公共属性。

关于您的其他问题，正如您已经指出的那样，您显然无法比较属于不同时区的当地时间，就像您无法将公里与英里进行比较一样。如果您存储当地时间，则还需要存储时区并每次都进行转换。因此，将日期标准化并始终使用相同的时区（UTC 或服务器的时区）存储它们并在显示信息时执行转换会更简单。这也更有意义，因为帖子作者的当地时间与其他人无关。

# html - 如何使单个按钮仅出现在 1 个 jquery 函数上

> ID：15745291
> 
> 赞同：0
> 
> 时间：2013-04-01T14:27:07.127
> 
> 标签：html, ajax, jquery

我有一个名为添加到配置文件的按钮，我只需要知道如何制作它，因此它只在最后一个 jQuery div 上，在最后一个之后。

像第 1 题，然后下一个，第 2 题返回和下一个，第 3 题，返回和添加按钮。因此，如果您能真正快速地帮助我，我将不胜感激。

这是我的代码：

```
<script>
$(document).ready(function () {
var oldOption;
var counter = 1;
var maxThings = 4;
var minThings = 1;
$("#2").hide();
$("#3").hide();
$("#4").hide();
$('#back').hide();

$("#forward").click(function () {
    $("#1").hide();
    $("#2").hide();
    $("#3").hide();
    $("#4").hide();
    if (!(counter >= maxThings)) {
        counter++;
    }
    $("#" + counter).show();
    $('#back').show();
    if (counter === maxThings) {
        $('#forward').hide();
    }
});

$("#back").click(function () {
    $("#1").hide();
    $("#2").hide();
    $("#3").hide();
    $("#4").hide();
    if (!(counter <= 1)) {
        counter--;
    }

    $("#" + counter).show();
    $('#forward').show();
    if (counter === minThings) {
        $('#back').hide();
    }

});
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T14:36:34.690

```
...
    if (counter === maxThings) {
        $('#forward').hide();
        $("#AddToProfile").show();
    } else {
        $("#AddToProfile").hide();
    }
... 
```

而且我真的不喜欢你在编码 :) 每次添加新 div 时都必须更改代码。我会做这样的事情： - 每个 div 都会有类问题 - 每个 div 的 START 可见性属性都将在 html 中定义（除第一个 div 之外的每个 div 的样式都类似于可见性：隐藏）

```
<script>
$(document).ready(function () {
var oldOption;
var counter = 1;
var maxThings = 4;
var minThings = 1;
$('#back').hide();

$("#forward").click(function () {
$("div.question").hide();

    if (!(counter >= maxThings)) {
        counter++;
    }
    $("#" + counter).show();
    $('#back').show();
    if (counter === maxThings) {
        $('#forward').hide();
    }
});

$("#back").click(function () {
    $("div.question").hide();
    if (!(counter <= 1)) {
        counter--;
    }

    $("#" + counter).show();
    $('#forward').show();
    if (counter === minThings) {
        $('#back').hide();
    }

});
});
</script> 
```

# iphone - 如何更改 iPhone 应用程序图标的位置？

> ID：15745293
> 
> 赞同：1
> 
> 时间：2013-04-01T14:27:14.157
> 
> 标签：iphone, xcode

好吧，我是菜鸟。它一定很简单，但我卡在这里。

我右键单击并选择“选择文件”。

![在此处输入图像描述](https://i.stack.imgur.com/1FoBB.png)

选择文件后，出现对话框：

![在此处输入图像描述](https://i.stack.imgur.com/Ts1uo.png)

**我想让我的图标不在根目录**中。但我无法弄清楚如何做到这一点。我尝试了不同的方法，甚至从头开始创建项目......

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T15:00:45.227

当您将图像资源带入 Xcode 时，它​​们在运行时都将位于应用程序包的根目录中。

看来您已经一次向项目中添加了一个名为“icon@2x.png”的文件。在 Xcode 中转到项目的摘要页面，单击**Build Phases**，然后展开标题为**Copy Bundle Resources**的部分。在那里，您将找到对将在运行时复制到您的包中的资源的引用。

更多关于捆绑结构的信息：

[https://developer.apple.com/library/mac/#documentation/CoreFoundation/Conceptual/CFBundles/BundleTypes/BundleTypes.html](https://developer.apple.com/library/mac/#documentation/CoreFoundation/Conceptual/CFBundles/BundleTypes/BundleTypes.html)

无论如何，我过去这样做的方式是：

1.  从 Xcode 和 Finder 的文件夹结构中删除现有的图像副本。
2.  在 Finder 中添加一个新文件夹，将其命名为“/AppIcons”（或其他名称）。
3.  将所有应用程序图标复制到 Finder 中的该文件夹。
4.  将“/AppIcon”文件夹拖到您的 XCode 项目中。我通常将图像放在 Xcode 项目的“/Images”子目录中。同样，您可以将它放在任何您想要的地方。
5.  在项目摘要面板上的 Xcode 中，通过拖放或右键单击将您的应用程序图标从文件夹“/AppIcons”添加为单独的文件。

或者在过去当我遇到这个问题时，有时 Xcode 会将应用程序图标复制到根项目目录。如果发生这种情况，我确保我在磁盘（在 Finder 中）和我的 Xcode 项目中有“/AppIcons”文件夹结构。我将应用程序图标添加到项目中，然后将它们移动到 Finder 中的 /AppIcons，然后重新重新引用它们。

然后，您的**Copy Bundle Resources**应该具有正确的文件引用。请注意，我的应用程序图标位于“/Images/AppIcons”中

![在此处输入图像描述](https://i.stack.imgur.com/ldILp.png)

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T14:33:55.150

我会将图像文件添加到您的项目中，名称为 icon@2x.png。为此，请右键单击要在 xcode 中添加文件的位置，然后单击添加文件/s。然后搜索您的图像并使用弹出的对话框添加它们。- 有一个复选框，您可以将它们复制到项目目标文件夹，这会将它们复制到您的项目文件夹中，或者不选中它（不建议），这将引用它在硬盘上的当前位置。在执行此操作之前，请确保该文件不存在于项目中！

编辑：

抱歉，我忘了提，然后将文件从 xcode 中拖放到图像位置框上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-25T23:31:56.207

在 XCode 4（我使用的是 4.6.2）中，如果您刚刚移动了目标的 info.plist 文件，但没有更正摘要面板顶部的位置，您将收到这条令人困惑的消息。修复此问题，图标将重新出现，假设它们已添加到项目中，或者如果没有，您现在应该能够在 xcode 坚持制作额外副本的情况下将它们拖入。

当您开始一个项目并整理 xcode 为您提供的默认文件位置时，往往会发生这种情况。我喜欢我的项目结构与文件系统结构 99% 相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-27T00:09:02.650

这是一个简单的修复。如果您想要作为应用程序图标的图像位于项目的根目录之外，则当您获得该对话框时，只需单击“是”，然后在根目录中新创建的文件上单击删除，然后单击“移至垃圾箱”。

引用仍然存在并且工作顺利，因为该文件在运行时仍将位于根目录中

# jquery - 我如何在我的网站上实际使用 history.js

> ID：15745296
> 
> 赞同：24
> 
> 时间：2013-04-01T14:27:29.483
> 
> 标签：jquery, ajax, browser-history, history.js

我已经阅读了 stackoverflow 上关于 history.js 的所有帖子，包括[this](https://stackoverflow.com/questions/7369043/cant-understand-history-js-need-it-simplified)、[this](https://stackoverflow.com/questions/4015613/good-tutorial-for-using-html5-history-api-pushstate)和[this](https://stackoverflow.com/questions/7777626/implementation-of-history-js)并查看了[源代码](https://github.com/browserstate/History.js)，但作为 javascript/jquery 的新手，我无法弄清楚如何实际实现 html 5 历史支持和回退以支持 ie8/9 等 html4 浏览器。我可以从尽可能多地呈现一致的 URL 中体会到 UX 的好处，这如何解决深度链接并允许我想要实现的书签，但是当我尝试在我的网站上实际使用它时我有点迷失了。

将 history.js 脚本添加到我的页面后

据我所知，要修改的代码是：

```
 function(window,undefined){

    // Prepare
    var History = window.History; // Note: We are using a capital H instead of a lower h
    if ( !History.enabled ) {
         // History.js is disabled for this browser.
         // This is because we can optionally choose to support HTML4 browsers or not.
        return false;
    }

    // Bind to StateChange Event
    History.Adapter.bind(window,'statechange',function(){ // Note: We are using statechange instead of popstate
        var State = History.getState(); // Note: We are using History.getState() instead of event.state
        History.log(State.data, State.title, State.url);
    });

    // Change our States
    History.pushState({state:1}, "State 1", "?state=1"); // logs {state:1}, "State 1", "?state=1"
    History.pushState({state:2}, "State 2", "?state=2"); // logs {state:2}, "State 2", "?state=2"
    History.replaceState({state:3}, "State 3", "?state=3"); // logs {state:3}, "State 3", "?state=3"
    History.pushState(null, null, "?state=4"); // logs {}, '', "?state=4"
    History.back(); // logs {state:3}, "State 3", "?state=3"
    History.back(); // logs {state:1}, "State 1", "?state=1"
    History.back(); // logs {}, "Home Page", "?"
    History.go(2); // logs {state:3}, "State 3", "?state=3"

})(window); 
```

所有新代码都在`//Change our states`哪里，因为这段代码只是给出了历史控件的例子？

或者我应该编写自己的代码来代替整个代码块（考虑到我对编码的新手，我现在使用 jquery 来帮助我）。

我正在阅读[这篇](http://css-tricks.com/rethinking-dynamic-page-replacing-content/)关于动态内容加载并尝试在我的网站上实现的文章（我可以让这段代码正常工作，但我知道它在 ie8/9 中无法正常运行），但在试图弄清楚如何结合 history.js

另外，其次，我想弄清楚history.js如何与modernizr一起玩？

它是modernizr.history 的替代品（它在哪里进行测试，如果不支持.js 则回退到典型的页面加载）还是会像这样运行：

```
if (Modernizr.history) {
   //Code goes here that works if it's HTML 5 Browser with .history support? I know some HTML5 browsers deal with .history oddly (read buggy) so what happens in those cases?
} else {
   //code from above goes here? with function(window, undefined){...etc...  ?
} 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-01T14:46:54.227

仅向您的站点添加历史记录支持不会对您有任何帮助，除非您实际上具有使用它的功能。

就现代化而言，它只会告诉您当前浏览器是否支持历史记录以及您是否采取行动 x 否则行动 y

**好的，这就是历史的运作方式：**

考虑`history.js`有点像宏记录器。客户点击某些东西，然后您推送一些与虚构或真实 url 相关联的变量：

例如，客户点击搜索，您调用：

```
function search(params) {
  // record your current UI position
  // data (to save), title (to set on page), url (to set on page)
  History.pushState({ params: params }, "Search", "?search");

   // now run whatever should happen because client triggered search()
} 
```

现在，当客户端单击返回按钮时，您可以获取先前保存的状态以对其进行处理。由于客户点击了他的后退按钮，它将触发`statechange`。由于您订阅了该事件，因此您可以确定之前保存的状态并调用函数来相应地更改 UI。

```
// Bind to StateChange Event
History.Adapter.bind(window, 'statechange', function() {
  var State = History.getState();

  // returns { data: { params: params }, title: "Search": url: "?search" }
  console.log(State); 

  // or you could recall search() because that's where this state was saved
  if (State.url == "?search") {
    search(data.params);
  }
}); 
```

这几乎概括了它。客户端触发一个函数，您分配一个`state/url`，当客户端单击返回时，您会查看之前的状态并运行函数，具体取决于您是否要恢复 UI 或其他。

这很快就会变得复杂而棘手的代码，我看不出还有什么要解释的，所以除非你刚刚得到了 AHA！现在知道该怎么做，我现在就忘记这些东西了。

除了状态之外，这里绝对没有任何自动发生的`saving/restoring`事情，应用程序中的所有其他内容都需要手动编码，以考虑到状态发生变化时会发生什么。

深度链接也与这些事情无关。您的应用程序必须具有初始化自身并基于通过 url 直接调用它来唯一地显示特定 UI 元素的能力。当用户已经在使用您的应用程序时，历史记录仅用于状态管理，因此您可以控制当他们点击`back/forward`按钮时会发生什么。

就搜索引擎而言，通过 JS 发生的任何事情都会给您带来零收益，因为他们不关心 js，只会索引您页面的原始文本。因此，如果您想要与搜索引擎兼容的深度链接，您需要根据请求的 URL 将 UI 呈现为特定状态的服务器端代码。

# mysql - 当有'/'时，MYSQL会自动将字符串转换为日期

> ID：15745298
> 
> 赞同：1
> 
> 时间：2013-04-01T14:27:38.407
> 
> 标签：mysql

我正在尝试`products`从另一个表 ( ) 更新表 ( `table 1`)。但是，型号中有许多符号，包括“/”。数据导出工作得很好，除了有'/'的情况。而是将其转换为日期。
例如以下情况

```
11/08/1944 should be 11/08/44
11/07/1944 should be 11/07/44 
```

以下是我所拥有的：

```
$query = mysql_query("SELECT `COL 1` AS id, `COL 7` AS model FROM `table 1` ORDER BY id ASC", $c2) or die(mysql_error());
while($r = mysql_fetch_array($query)):
    $id = $r['id'];
    $model = $r['model'];
    mysql_query("UPDATE products SET model = '".mysql_real_escape_string($model)."' WHERE id = $id", $c1);
    echo "MODEL: $model AND ID: $id <br />";
endwhile; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:33:40.570

试试那些：

*   `$model`如果正确则回显。

    *   如果它们弄乱了，请查看您的列名。

# javascript - Javascript 自动刷新页面

> ID：15745304
> 
> 赞同：0
> 
> 时间：2013-04-01T14:27:47.403
> 
> 标签：javascript

我有一个 HTML 页面。每次我向页面添加新内容时，用户都需要刷新页面才能看到新内容。

我想要做的是自动为他们刷新页面，不管浏览器如何。

我尝试输入以下内容，但屏幕闪烁了很多次，以至于证明它没有用：

```
 <script type="text/javascript">

       location.reload();

    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:31:43.717

您在那里显示的 JavaScript 确实会重新加载页面。每次页面加载时，只要它到达那个 JavaScript。您看到的闪烁可能是它处于无限循环重新加载的事实。您需要做的是向服务器执行 AJAX 请求以查找是否有新内容，如果有*则*重新加载页面。或者，或者，使用 AJAX 实际更新页面上的新内容。

# php - 在本地显示动态网站的数据库

> ID：15745306
> 
> 赞同：0
> 
> 时间：2013-04-01T14:27:57.633
> 
> 标签：php, html, mysql, phpmyadmin

作为实习的一部分，我尝试改变公司的动态网站。为此，我安装了 Wamp 并在本地转移，该公司的网站与 filezilla 我在 hebergeur 网站中导出了三个数据库。我在 phpMyadmin 中导入了这些数据库。

当我尝试在本地工作时，我会显示我无法解释的错误（请参见下图）。

[链接] [https://docs.google.com/file/d/0B6PyFANH4lYqNC1USm9oOEhEMGs/edit?usp=sharing](https://docs.google.com/file/d/0B6PyFANH4lYqNC1USm9oOEhEMGs/edit?usp=sharing)

在 (1) 中通常是一个下拉列表，显示城市的邮政编码。在本地它向我显示：（！）注意：未定义的索引：Dep in D:\wamp\www\site_choix_funeraire\points-vente.php 在第 282 行调用堆栈#TimeMemoryFuction

例如，当我点击地图时，邮政编码 76（参见第一张照片中的抹布 (2)）它会显示下一张照片

[链接] [https://docs.google.com/file/d/0B6PyFANH4lYqZWFZQTItdmhRS0E/edit?usp=sharing](https://docs.google.com/file/d/0B6PyFANH4lYqZWFZQTItdmhRS0E/edit?usp=sharing)

我认为该站点不会从数据库中读取。当我在 phpMyAdmin 中导入数据库（.Sql）时，需要在站点中添加另一个设置以告诉他指向数据库还是系统地完成？

您如何看待问题和显示？先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:42:33.080

您必须在本地计算机上拥有相同的用户名和密码组合才能让 php 脚本访问数据库，`localhost`当您的网站在 WAMP 上运行时，主机也必须是

显示 (1) 中的错误，因为您的数组中未声明 dept

# html-agility-pack - HtmlAgilityPack 添加新元素并将所有内联 css 属性复制到新元素

> ID：15745308
> 
> 赞同：0
> 
> 时间：2013-04-01T14:28:02.957
> 
> 标签：html-agility-pack

有没有办法将内联 css 属性从一个节点复制到我将添加到 HtmlAgilityPack 中的新节点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-29T11:45:08.803

据我所知，您不能只将一个 HtmlAttributeCollection 分配给另一个，但您可以像这样一个一个地复制它们：

```
 foreach (HtmlAttribute attr in oldNode.Attributes)
       newNode.Attributes.Add(attr); 
```

# php - PHP“如果”条件问题

> ID：15745319
> 
> 赞同：1
> 
> 时间：2013-04-01T14:29:08.877
> 
> 标签：php, sql

我正在尝试设置一个 if 条件，如果 $flag < 1 将呈现一个道歉.php。但是似乎即使 $flag>1 也会触发条件。有人知道问题吗？

这是我的 php 代码。

```
$flag = query("SELECT flag FROM friend WHERE id = ? AND username = ? ",$_SESSION["id"],$username[0]["username"]);

if($flag[0]["flag"] < 1 ||$flag = false); 
{
 apologize("Sorry! He/she is not your friend.");
} 
```

这是我的函数 query() 的代码

```
function query(/* $sql [, ... ] */)
{
    // SQL statement
    $sql = func_get_arg(0);

    // parameters, if any
    $parameters = array_slice(func_get_args(), 1);

    // try to connect to database
    static $handle;
    if (!isset($handle))
    {
        try
        {
            // connect to database
            $handle = new PDO("mysql:dbname=" . DATABASE . ";host=" . SERVER, USERNAME, PASSWORD);

            // ensure that PDO::prepare returns false when passed invalid SQL
            $handle->setAttribute(PDO::ATTR_EMULATE_PREPARES, false); 
        }
        catch (Exception $e)
        {
            // trigger (big, orange) error
            trigger_error($e->getMessage(), E_USER_ERROR);
            exit;
        }
    }

    // prepare SQL statement
    $statement = $handle->prepare($sql);
    if ($statement === false)
    {
        // trigger (big, orange) error
        trigger_error($handle->errorInfo()[2], E_USER_ERROR);
        exit;
    }

    // execute SQL statement
    $results = $statement->execute($parameters);

    // return result set's rows, if any
    if ($results !== false)
    {
        return $statement->fetchAll(PDO::FETCH_ASSOC);
    }
    else
    {
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T14:32:09.530

你的问题有两个

首先`;`，您的 if 语句末尾有一个。

其次，您正在设置`$flag = false`而不是比较它`$flag == false`。您可能想使用`==`相等运算符进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T14:32:30.393

`$flag = false`应该是`$flag == false`, `!$flag`or `$flag === false`, 理想情况下应该是在您尝试将其作为数组访问之前：

```
if( !$flag || $flag[0]['flag'] < 1) 
```

你还有一个额外的`;`- 这实际上是我之前固执地拒绝换行的确切原因`{`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T14:33:30.223

您不能使用`=`as 运算符，因为`true`如果可以将变量设置为，它就会返回`false`。使用`==`.

# javascript - 固定 div 下的页脚

> ID：15745322
> 
> 赞同：0
> 
> 时间：2013-04-01T14:29:17.520
> 
> 标签：javascript, html, css

我目前很难让我的网站页脚正常工作。我认为这是因为我固定定位的标题和容器 div，但我需要将它们固定以在滚动时保持在顶部。当容器 div 为空时，我不确定如何考虑到页脚出现在底部。

HTML:-

```
 <body>
        <div id="wrapper">
        <div id="header">
            <div id="headerContent">
            </div>
        </div>
        <script>
            $(document).ready(function() {
                  $('#container').css('marginTop', $('#header').outerHeight(true) + $('#navbar').outerHeight(true) );
            });
        </script>  
                <div id="navbar">
                    <div id ="navbarContent">  

                </div>
        </div>
        <div id="container">
        </div>
        <div id="footer">
        <div id="footerContent">
        </div>
        </div>   
 </div>
    </body>
</html> 
```

CSS：-

```
#container{
    width:960px;
    margin:auto;
    overflow:hidden;
}

#wrapper{
    min-height:100%;
    position:relative;
}

#navbar{
    width:100%;
    height:40px;
    margin:auto;
    background-color:#4e8885;
    position:fixed;
    top:120px;
    padding:0px;
}

#header{
    width:100%;
    height:120px;
    margin:auto;
    background-color:#8bbcba;
    position:fixed;
    top:0px;
}

#footer{
    width:100%;
    min-height:20px;
    margin:auto;
    background-color:#8bbcba;
    position:absolute;
    bottom:0;
    left:0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:50:36.120

在您使用固定高度的示例中，无需动态计算边距。您应该能够设置页边距`container`以分别与页眉和页脚的总数相`margin-top`匹配`margin-bottom`。看到这个jsFiddle：http: [//jsfiddle.net/9Jdrr/](http://jsfiddle.net/9Jdrr/)

如果需要动态计算，应该可以根据这个安排来做。

# ios - 最佳实践：处理来自表格视图单元格内按钮的操作？

> ID：15745324
> 
> 赞同：8
> 
> 时间：2013-04-01T14:29:26.413
> 
> 标签：ios, uitableview, uikit, uicollectionview

我有一个“联系人列表”表格视图，其中包含一个包含电子邮件按钮的“联系人”单元格，当点击该按钮时，应该向电子邮件编辑器显示该联系人的电子邮件地址。

将 UIButton 与该单元格的“联系人”实例相关联的最佳方法是什么？

我已经为我想到的两种方法创建了答案——但我并不真正觉得令人满意。你更喜欢哪个，或者更好，建议更好的！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-01T14:30:30.870

### 方法二：

使单元格处理操作并调用自定义委托方法。

```
// YMContactCell.h
@protocol YMContactCellDelegate
- (void)contactCellEmailWasTapped:(YMContactCell*)cell;
@end

@interface YMContactCell
@property (weak, nonatomic) id<YMContactCellDelegate> delegate;
@end

// YMContactCell.m
- (IBAction)emailContact:(id)sender {
    [self.delegate contactCellEmailWasTapped:self];
}

// ContactListViewController.m
- (void)contactCellEmailWasTapped:(YMContactCell*)cell;
    NSIndexPath *indexPath = [self.tableView indexPathForCell:cell];
    YMContact *contact = [[self fetchedResultsController] objectAtIndexPath:indexPath];
    // present composer with `contact` ...
} 
```

在视图中处理事件不违反 MVC 原则吗？

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-01T17:24:50.473

我最常看到它完成的方式是将标签分配给等于 indexPath.row 的按钮。

```
- (CustomCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    CustomCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell" forIndexPath:indexPath];
    cell.theLabel.text = self.theData[indexPath.row];
    cell.button.tag = indexPath.row;
    [cell.button addTarget:self action:@selector(doSomething:) forControlEvents:UIControlEventTouchUpInside];
    return cell;
}

-(void)doSomething:(UIButton *) sender {
    NSLog(@"%@",self.theData[sender.tag]);
    //sender.tag will be equal to indexPath.row
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-03-24T14:54:04.467

**另一种解决方案：**

对我来说，这样的东西完美无缺，看起来非常优雅：

```
- (void)buttonClicked:(id)sender
      CGPoint buttonPosition = [sender convertPoint:CGPointZero
                                       toView:self.tableView];
      NSIndexPath *clickedIP = [self.tableView indexPathForRowAtPoint:buttonPosition];

      // When necessary 
      // UITableViewCell *clickedCell = [self.tableView cellForRowAtIndexPath:clickedIP];
} 
```

**2017 年 12 月 1 日更新**

一段时间后，实现了很多 UITableViews，我需要承认最好的解决方案是使用委托模式，这里的其他人已经建议了。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-05-16T18:43:37.627

看了这些回答，我想说说我的看法：

## 逐个按钮位置的单元格

```
- (void)buttonClicked:(id)sender
  CGPoint buttonPosition = [sender convertPoint:CGPointZero
                                   toView:self.tableView];
  NSIndexPath *clickedIP = [self.tableView indexPathForRowAtPoint:buttonPosition];

  // When necessary 
  // UITableViewCell *clickedCell = [self.tableView cellForRowAtIndexPath:clickedIP];
} 
```

上面的解决方案当然是**最快速实施**的，但从**设计/架构的角度来看，它并不是最好的**。此外，您获得`indexPath`但需要计算任何其他信息。这是一个很酷的方法，但会说不是最好的。

## 在按钮超级视图上逐个循环

```
// ContactListViewController.m

- (IBAction)emailContact:(id)sender {
    YMContact *contact = [self contactFromContactButton:sender];
    // present composer with `contact`...
}

- (YMContact *)contactFromContactButton:(UIView *)contactButton {
    UIView *aSuperview = [contactButton superview];
    while (![aSuperview isKindOfClass:[UITableViewCell class]]) {
        aSuperview = [aSuperview superview];
    }
    YMContactCell *cell = (id) aSuperview;
    NSIndexPath *indexPath = [self.tableView indexPathForCell:cell];
    return [[self fetchedResultsController] objectAtIndexPath:indexPath];
} 
```

以这种方式获取单元比以前更昂贵，而且也不优雅。

## 按按钮标记的单元格

```
- (CustomCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    CustomCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell" forIndexPath:indexPath];
    cell.theLabel.text = self.theData[indexPath.row];
    cell.button.tag = indexPath.row;
    [cell.button addTarget:self action:@selector(doSomething:) forControlEvents:UIControlEventTouchUpInside];
    return cell;
}

-(void)doSomething:(UIButton *) sender {
    NSLog(@"%@",self.theData[sender.tag]);
    //sender.tag will be equal to indexPath.row
} 
```

绝对没有。使用标签似乎是一个很酷的解决方案，但是**控件的标签可以用于很多事情**，比如下一个响应者等。我不喜欢，这**不是正确的方法**。

## 单元格按设计模式

```
// YMContactCell.h
@protocol YMContactCellDelegate
- (void)contactCellEmailWasTapped:(YMContactCell*)cell;
@end

@interface YMContactCell
@property (weak, nonatomic) id<YMContactCellDelegate> delegate;
@end

// YMContactCell.m
- (IBAction)emailContact:(id)sender {
    [self.delegate contactCellEmailWasTapped:self];
}

// ContactListViewController.m
- (void)contactCellEmailWasTapped:(YMContactCell*)cell;
    NSIndexPath *indexPath = [self.tableView indexPathForCell:cell];
    YMContact *contact = [[self fetchedResultsController] objectAtIndexPath:indexPath];
    // present composer with `contact` ...
} 
```

**这就是解决方案**。使用`delegation`或使用`blocks`确实是一件好事，因为**您可以传递您想要的所有参数并使架构具有可扩展性**。事实上，在`delegate`方法中（但也可以使用`blocks`），您可能希望直接发送信息，而无需稍后计算它们，就像以前的解决方案一样。

享受 ;）

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-11-22T12:11:04.270

## 快速关闭方法

我想我找到了一种有点快的新方法。告诉我你对此的看法。

### 你的手机：

```
class ButtonCell: UITableViewCell {
    var buttonAction: ( () -> Void)?

    func buttonPressed() {
       self.buttonAction?()
   }
} 
```

### 你的 UITableViewDataSource：

```
 override func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell {
        let cell = tableView.dequeueReusableCell(withIdentifier: "CallCell", for: indexPath)
         //Handled inside 
         cell.buttonAction = {
            //Button pressed 
         }
         //Handle in method
         cell.buttonAction = self.handleInnerCellButtonPress() 
 } 
```

您还可以在此调用中传递数据。像细胞或储存在细胞内的东西。

问候，
亚历克斯

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-01T14:29:26.413

### 方法一：

通过从按钮遍历单元格的视图层次结构来确定单元格，然后确定索引路径。

```
// ContactListViewController.m

- (IBAction)emailContact:(id)sender {
    YMContact *contact = [self contactFromContactButton:sender];
    // present composer with `contact`...
}

- (YMContact *)contactFromContactButton:(UIView *)contactButton {
    UIView *aSuperview = [contactButton superview];
    while (![aSuperview isKindOfClass:[UITableViewCell class]]) {
        aSuperview = [aSuperview superview];
    }
    YMContactCell *cell = (id) aSuperview;
    NSIndexPath *indexPath = [self.tableView indexPathForCell:cell];
    return [[self fetchedResultsController] objectAtIndexPath:indexPath];
} 
```

对我来说感觉很笨拙。有点“嗯”……</p>

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-02-06T03:45:10.520

我会提供另一种方法，只是不分配活动目标，事件将遍历响应者链：

```
[self.actionButton addTarget:nil action:@selector(onActionButtonClick:) forControlEvents:UIControlEventTouchUpInside]; 
```

然后，在您的视图控制器中：

```
- (void)onActorButtonClick:(id)sender {
  if ([sender isKindOfClass:UIButton.class]) {
    UITableViewCell *cell = [self findAncestorTableCell:(UIView *)sender]; //See other answer to fetch the cell instance.
    NSIndexPath *indexPath = [self.listTable indexPathForCell:cell];
    ...
  }
} 
```

但是，这会引发一些编译器警告，添加以下内容以忽略它们：

```
#pragma clang diagnostic push
#pragma clang diagnostic ignored "-Wundeclared-selector"
...
#pragma clang diagnostic pop 
```

# javascript - 如何将toggleClass应用于元素？画廊

> ID：15745326
> 
> 赞同：2
> 
> 时间：2013-04-01T14:29:28.303
> 
> 标签：javascript, jquery, galleria

我尝试基于“Galleria theme Classic”构建我的自定义主题，但我正在努力在我的按钮上触发类，我想，我错过了一些东西，

```
 this.addElement('play').appendChild('container','play');
   var g = this;
   this.$('play').text('Play').bind('mouseup', function() {
            g.playToggle();
            g.toggleClass("highlight"); // - This line don't work
}); 
```

我收到错误@TypeError：g.toggleClass 不是函数@

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T15:12:38.853

供参考，[`element.classList.toggle("classname")`](https://developer.mozilla.org/en-US/docs/DOM/element.classList)是另一种选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T14:31:49.987

看起来您在错误的元素上调用了 toggleClass，或者该元素不是 jQuery 包装的（从发布的代码中不太清楚）。试试这个：

```
$(g).toggleClass('highlight'); 
```

或这个：

```
g.$('play').toggleClass('highlight'); 
```

# java - 了解java中的死锁

> ID：15745329
> 
> 赞同：0
> 
> 时间：2013-04-01T14:29:31.927
> 
> 标签：java, multithreading, deadlock

下面给出了一个我发现的关于死锁的例子，它有效。我的问题是如何`currentThread()`工作？而且 A 和 B 也不是专门创建为线程的，即：

```
Deadlock d=new Deadlock();
Thread A=new Thread(d) 
```

代码如何仍然有效？

```
class A {
    synchronized void foo(B b) {
        String name = Thread.currentThread().getName();
        System.out.println(name + " entered A.foo");
        try {
            Thread.sleep(1000);
        } catch (Exception e) {System.out.println("A Interrupted");
        }
        System.out.println(name + " trying to call B.last()");
        b.last();
    }

    synchronized void last() {
        System.out.println("Inside A.last");
    }
}

class B {
    synchronized void bar(A a) {
        String name = Thread.currentThread().getName();
        System.out.println(name + " entered B.bar");
        try {
            Thread.sleep(1000);
        } catch (Exception e) {System.out.println("B Interrupted");
        }
        System.out.println(name + " trying to call A.last()");
        a.last();
    }
    synchronized void last() {
        System.out.println("Inside A.last");
    }
}

public class Deadlock implements Runnable {
    A a = new A();
    B b = new B();

    Deadlock() {
        Thread.currentThread().setName("MainThread");
        Thread t = new Thread(this, "RacingThread");
        t.start();
        a.foo(b); // get lock on a in this thread.
        System.out.println("Back in main thread");
    }

    public void run() {
        b.bar(a); // get lock on b in other thread.
        System.out.println("Back in other thread");
    }

    public static void main(String args[]) {
        new Deadlock();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T14:58:14.893

我认为这是一个相当令人困惑的死锁示例——它增加了问题的其他噪音。

一个非常简单的例子可以通过使用`Lock`像这样的对象来实现：

```
public class App {

    private static final Lock LOCKA = new ReentrantLock();
    private static final Lock LOCKB = new ReentrantLock();

    private static final class Locker1 implements Runnable {

        @Override
        public void run() {
            while (true) {
                try {
                    LOCKA.lockInterruptibly();
                    Thread.sleep(100);
                    LOCKB.lockInterruptibly();
                    System.out.println("Locker 1 Got locks");
                } catch (InterruptedException ex) {
                    return;
                }
                LOCKB.unlock();
                LOCKA.unlock();
            }
        }
    }

    private static final class Locker2 implements Runnable {

        @Override
        public void run() {
            while (true) {
                try {
                    LOCKB.lockInterruptibly();
                    Thread.sleep(100);
                    LOCKA.lockInterruptibly();
                    System.out.println("Locker 2 Got locks");
                } catch (InterruptedException ex) {
                    return;
                } finally {
                    LOCKA.unlock();
                    LOCKB.unlock();
                }
            }
        }
    }

    public static void main(String[] args) throws IOException {
        final ExecutorService executorService = Executors.newFixedThreadPool(2);
        executorService.submit(new Locker1());
        executorService.submit(new Locker2());

    }
} 
```

应用程序在执行程序中启动两个线程，然后我们让这些线程调用两个可运行对象。

`Lock`这些可运行对象尝试以相反的顺序获取两个对象上的锁。

所以`Locker1`锁`LOCKA`然后等待几毫秒。`Locker2`锁定`LOCKB`并等待几毫秒，他们尝试获取另一个锁。

情况是`Locker1`等待`LOCKB`并永远`Locker2`等待，`LOCKA`因为另一个线程永远不会释放它。

您可以在这些线程的线程转储中相当清楚地看到这一点：

```
"pool-1-thread-1" - Thread t@8
   java.lang.Thread.State: WAITING
    at sun.misc.Unsafe.park(Native Method)
    - waiting to lock <7725204d> (a java.util.concurrent.locks.ReentrantLock$NonfairSync) owned by "pool-1-thread-2" t@9
    at java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:834)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireInterruptibly(AbstractQueuedSynchronizer.java:894)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1221)
    at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:340)
    at com.boris.testbench.App$Locker1.run(App.java:32)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    at java.lang.Thread.run(Thread.java:722)

   Locked ownable synchronizers:
    - locked <7567e1fa> (a java.util.concurrent.locks.ReentrantLock$NonfairSync)

    - locked <5ad52411> (a java.util.concurrent.ThreadPoolExecutor$Worker)

"pool-1-thread-2" - Thread t@9
   java.lang.Thread.State: WAITING
    at sun.misc.Unsafe.park(Native Method)
    - waiting to lock <7567e1fa> (a java.util.concurrent.locks.ReentrantLock$NonfairSync) owned by "pool-1-thread-1" t@8
    at java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:834)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireInterruptibly(AbstractQueuedSynchronizer.java:894)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1221)
    at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:340)
    at com.boris.testbench.App$Locker2.run(App.java:51)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    at java.lang.Thread.run(Thread.java:722)

   Locked ownable synchronizers:
    - locked <7725204d> (a java.util.concurrent.locks.ReentrantLock$NonfairSync)

    - locked <6856c528> (a java.util.concurrent.ThreadPoolExecutor$Worker) 
```

我们可以看到，`pool-1-thread-1`想要一个锁在拥有的锁上，`pool-1-thread-2`并且`pool-1-thread-2`想要一个锁在拥有的锁上`pool-1-thread-1`。

这种情况将永远持续下去，因此陷入僵局。

您的代码实现了相同的结果，但不是使用手动产生的两个线程，而是使用应用程序主线程（由 JVM 产生）和一个手动产生的线程。

它还使用`synchronized`两个`Object`s 而不是两个`Lock`对象中的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T14:59:32.750

`Thread#currentThread()`= 当前正在运行的线程。一切都在一个线程中运行。当你启动一个 java 应用程序时，你只有一个线程，我们可以称之为主线程。因此，对方法的调用`main`只不过是正在运行的线程的开始。

我评论了你可能有疑问的地方。

```
// Deadlock is a Runnable. So, it can be wrapped inside a Thread Object to be started.
public class Deadlock implements Runnable {
    A a = new A();
    B b = new B();

    Deadlock() {
        // currentThread now is the one that instanciated this Deadlock object.
        Thread.currentThread().setName("MainThread");
        // here the Deadlock is wrapped inside a thread object. Notice the `this` qualifier.
        Thread t = new Thread(this, "RacingThread");
        // here the thread wrapping deadlock is started.
        t.start();

        a.foo(b); // get lock on a in this thread.
        System.out.println("Back in main thread");
    }

    public void run() {
        b.bar(a); // get lock on b in other thread.
        System.out.println("Back in other thread");
    }

    // here is the start of the Main Thread! :D 
    public static void main(String args[]) {
        // the program is started inside the Deadlock Class constructor.
        new Deadlock();
    }
} 
```

你现在能明白了吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T14:37:34.243

Some good answers here (+1 to @Ralf and @bmorris591) but I thought I'd explain your code a bit more.

There are 2 threads here. The "main" thread which runs `main(...)` and the `"RacingThread"` started from within the `Deadlock` constructor. Btw, it is very bad form to start a thread in a object constructor. It would be better to do something like:

```
 Deadlock deadlock = new Deadlock();
  new Thread(deadlock, "RacingThread").start(); 
```

Also, inside the `Deadlock` constructor it calls `Thread.currentThread().setName("MainThread");`. This is trying to set the name of the current running thread which is (confusingly) the "main" thread since it did the `new Deadlock()`. Unfortunately the `setName(...)` call is a noop if the thread is already running so it doesn't do anything.

Next, inside the `Deadlock` constructor, the `"RacingThread"` is constructed with `this` as the `Runnable` and `start()` is called which forks the thread and has it call the `Deadlock.run()` method. This takes some time so most likely the `a.foo(b);` line is reached *before* the `run()` method is called.

Your `a` and `b` objects are *not* threads as has been pointed out already. They are just objects that are being used to demonstrate the locking. The deadlock happens because the main thread is calling `a.foo(b);` and then the `"RacingThread"` calls the `b.bar(a);` inside of the `run();` method. `a.foo(...)` is `synchronized` on `a` and then tries to call `b.last()` which is `synchronized` on `b`. `b.bar(...)` is `synchronized` on `b` and then tries to call `a.last()` which is `synchronized` on `a`. That is a classic deadlock.

Hope this helps a bit.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T14:52:27.023

我认为您假设 synchronized 关键字是全局锁。它不是。它只是锁定（序列化）访问它所应用的方法。鉴于您的示例没有从 2 个单独的线程在同一个类上调用相同的方法，因此它没有理由不起作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T15:00:13.693

当 2 个线程以不同的顺序占用两个资源时，就会发生死锁：

*   T1 取 r1
*   T2 取 r2
*   T1 尝试取 r2 <=== 阻塞，等待资源 r2
*   T2 尝试取 r1 <=== 阻塞，等待资源 r1
*   系统死机

这个程序：

```
public class DeadLock implements Runnable {

   String name;
   Object r1;
   Object r2;

   DeadLock( String name, Object r1, Object r2 ) {
      this.name = name;
      this.r1   = r1;
      this.r2   = r2;
   }

   @Override public void run() {
      if( name.equals( "T1" )) {
         System.out.println( name + " try to take r1" );
         synchronized( r1 ) {
            System.out.println( name + " has taken r1" );
            try{ Thread.sleep( 1000L ); }catch( InterruptedException x ){}
            System.out.println( name + " try to take r2" );
            synchronized( r2 ) {
               System.out.println( name + " has taken r2" );
            }
         }
      }
      else {
         System.out.println( name + " try to take r2" );
         synchronized( r2 ) {
            System.out.println( name + " has taken r2" );
            try{ Thread.sleep( 1000L ); }catch( InterruptedException x ){}
            System.out.println( name + " try to take r1" );
            synchronized( r1 ) {
               System.out.println( name + " has taken r1" );
            }
         }
      }
   }

   public static void main( String[] args ) {
      Object r1 = new Object();
      Object r2 = new Object();
      new Thread( new DeadLock( "T1", r1, r2 )).start();
      new Thread( new DeadLock( "T2", r1, r2 )).start();
   }
} 
```

输出：

```
T1 try to take r1
T2 try to take r2
T1 has taken r1
T2 has taken r2
T2 try to take r1
T1 try to take r2 
```

# internet-explorer - AngularJs 指令的模板未在 IE9 中更新

> ID：15745333
> 
> 赞同：3
> 
> 时间：2013-04-01T14:29:48.710
> 
> 标签：internet-explorer, angularjs, angularjs-directive, angularjs-scope

我正在创建一个 AngularJS 的指令。在 Internet Explorer (IE9) 中，它不能按预期工作。它确实用模板替换了原始 html，但不更新模板的插值字符串。

它可以在 Chrome、Firefox 和 Safari 中正常工作

这是代码

```
angular.module('app', []);
angular.module('app').directive('mydirective', function () {
    return {
        replace: true,
        scope: {
            height: '@',
            width: '@'
        },
        template: '<div style="width:{{width}}px;height:{{height}}px;' +
            'border: 1px solid;background:red"></div>'
    };
}); 
```

这是调用指令的html

```
<div id="ng-app" ng-app="app">
    <div mydirective width="100" height="100"></div>
</div> 
```

这是小提琴 [http://jsfiddle.net/saP7T/](http://jsfiddle.net/saP7T/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T16:21:41.660

您可能需要使用[ng-style](http://docs.angularjs.org/api/ng.directive%3angStyle)。这意味着必须设置一个包含您的样式的 javascript 对象。有关更多信息，请参阅该页面上的评论。所以，像这样：

```
angular.module('app').directive('mydirective', function () {
    return {
        replace: true,
        scope: {
            height: '@',
            width: '@'
        },
        template: '<div ng-style="getMyStyle()"></div>',
        link: function(scope, element, attrs) {
            scope.getMyStyle = function () {
                return {
                    width: scope.width + 'px',
                    height: scope.height + 'px',
                    border: '1px solid',
                    background: 'red'
                };
            }
        }
    };
}); 
```

[更新的小提琴](http://jsfiddle.net/saP7T/1/)

# bash - 如何检查传递给 shell 脚本的参数是否不是整数？

> ID：15745334
> 
> 赞同：3
> 
> 时间：2013-04-01T14:29:53.443
> 
> 标签：bash, shell, unix, scripting, arguments

我知道如何使用以下方法检查参数是否为整数：

```
if [[ $2 = *[[:digit:]]* ]]; then
    # $2 is a number
else
    # $2 is not a number
fi 
```

但是，我需要检查参数是否*不是*整数。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T14:38:24.857

`$2 = *[[:digit:]]*`只检查是否`$2` *包含*数字。

```
# is an integer
[[ $2 =~ ^[[:digit:]]+$ ]]
# is not an integer
[[ ! $2 =~ ^[[:digit:]]+$ ]] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-25T10:01:33.103

## 符合 POSIX 的方法

一种健壮且可移植（POSIX 兼容；在 中测试`dash`）的方法是检查 shell 是否可以将变量解析为整数，如下面的脚本所示。

```
#!/bin/sh

# test-int.sh
# A script that tests whether its first argument is an integer

if [ "$1" -eq 0 -o "$1" -ne 0 ] >/dev/null 2>&1; then
    printf "integer: %s\n" "$1"
else
    printf "not an integer\n"
fi 
```

## 测试

```
$ dash test-int.sh foo
not an integer
$ dash test-int.sh 098234
integer: 098234
$ dash test-int.sh 77239asdfasf
not an integer
$ dash test-int.sh -77239
integer: -77239 
```

请注意，这种方法也接受开箱即用的负整数，但您可以轻松地将其修改为仅接受正整数。

在我的脚本中，成功解析的整数被打印为*string*，但是，或者，您可能希望将其打印为*integer*，使用`%d`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T14:37:08.117

你知道很容易。你可以这样做 ：

```
 if echo $Myvar | egrep -q '^[0-9]+$'; then
      # $Myvar is a number
   else
      # $Myvar is not a number
   fi 
```

这是我主要用于数字检查的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T14:38:37.077

你测试只检查输入是否是数字；例如 $2 is "43" 那么这将打印： 43 is not a number 修复您的解决方案以检查实际数字可以使用正则表达式完成：

```
if [[ $2 =~ ^-?[[:digit:]]+$ ]]; then
    echo "$2 is a number"
fi 
```

然后检查输入是否不是数字只是否定测试的问题：

```
if [[ ! $2 =~ ^-?[[:digit:]]+$ ]]; then
    echo "$2 is not a number"
fi 
```

# javascript - 摩卡：未定义不是一个函数

> ID：15745337
> 
> 赞同：0
> 
> 时间：2013-04-01T14:30:06.813
> 
> 标签：javascript, node.js, unit-testing, requirejs, mocha.js

我在 Mocha 中运行一个测试套件，我发现我经常得到“致命错误：未定义不是函数”，没有堆栈跟踪。问题通常在我的代码依赖关系中很深，而不是在测试用例本身。这非常难以调试。

有没有办法打开堆栈跟踪，或详细错误或什么？还是我可能有异常或不正确的设置？

设置是使用 require.js 的 JavaScript，在 Node.js 中运行测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T15:04:53.237

`undefined`如果遇到循环依赖，Requirejs 会返回一个或多个模块，所以这可能是你的问题。尝试这个：

```
npm install -g madge
madge --circular /path/to/your/javascript 
```

这会告诉你它是否发现了任何循环依赖。我认为它只检查`define()`语句，但这足以帮助我找到类似的问题。以下是有关 madge 的更多信息：[https ://github.com/pahen/node-madge](https://github.com/pahen/node-madge)

# git - 我该如何解决这个 git 混乱？两次提交前服务器上的文件

> ID：15745340
> 
> 赞同：2
> 
> 时间：2013-04-01T14:30:11.940
> 
> 标签：git

每当我在服务器上执行 git pull 时，我都会收到消息；

```
Your branch is ahead of origin/master by 2 commits. 
```

两者应该是同步的。我不知道我是怎么来到这里的。我想要在服务器上的 origin/master 中的所有内容。我不在乎我是否丢失了最后几次提交的更改，这并不重要。如何使这些恢复同步，以便我可以再次像往常一样推拉？

编辑：我运行`git checkout origin/master`并将服务器上的代码恢复到以前的状态，但现在我处于分离的 HEAD 状态。我该如何摆脱它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T14:39:57.193

此消息意味着您服务器上的主分支具有不在远程的提交。如果有人在服务器上提交并且您不希望任何人从这个特定的结帐中提交 - 这将导致这种情况。

## 看看这两个提交是什么

..不在遥控器中：

```
git log origin/master..HEAD # just the commit messages
git diff origin/master..HEAD # the diff 
```

## 删除这两个提交

如果您不想保留这两个提交；将您的主分支更改为与远程的主分支完全匹配：

```
git checkout master # make sure you are on your master branch
git reset origin/master --hard # force local history to exactly match the remote. 
```

## 保留这两个提交

如果您*确实*想保留提交 - 只需将它们推送到远程，您的主分支就会同步：

```
git push origin master 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T14:42:10.080

AD7six 的答案将丢弃您的本地更改。您还应该能够简单地将您在本地拥有的内容发送到服务器：

```
git checkout master # Get back on a real branch from the detached HEAD
git push origin master 
```

此外，`gitk --all`对于了解您拥有的存储库状态以及您的本地存储库如何认为它与其远程相关是非常有用的。

# android - 如果没有 Google Play 服务，此应用将无法运行，而您的手机中缺少这些服务

> ID：15745341
> 
> 赞同：0
> 
> 时间：2013-04-01T14:30:12.190
> 
> 标签：android, google-maps, google-maps-android-api-2, android-2.2-froyo

也许这个问题已经被问了数百万次，但没有任何帮助。

### java活动

```
package com.williamroma.example;

import com.google.android.gms.common.GooglePlayServicesUtil;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.SupportMapFragment;

import android.os.Bundle;
import android.support.v4.app.FragmentActivity;

public class MainActivity extends FragmentActivity {
    @Override
    protected void onCreate(Bundle arg0) {
        // TODO Auto-generated method stub
        super.onCreate(arg0);
        setContentView(R.layout.main);
        GooglePlayServicesUtil
                .isGooglePlayServicesAvailable(getApplicationContext());
        GoogleMap map = ((SupportMapFragment)  getSupportFragmentManager().findFragmentById(R.id.map))
                   .getMap();
    }
} 
```

### java mainfest

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.williamroma.example"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="8" />

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />

    <permission
        android:name="com.williamroma.example.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />

    <uses-permission android:name="com.williamroma.example.permission.MAPS_RECEIVE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="AIzaSyCyk2MVC5Fyl7HIB3iHlPgyRqvOF-VXYJw" />
    </application>

</manifest> 
```

### 项目

![在此处输入图像描述](https://i.stack.imgur.com/BTRkX.jpg)

### 模拟器 2.2

![在此处输入图像描述](https://i.stack.imgur.com/UXLTL.jpg)

请问哪里错了？我已经从 sdk 安装了 google play 服务并导入它，然后从 project->property->android->add 添加它。

我成功获得了 google-map android v2 的密钥

请帮忙

# c# - 参数对于通过 blob 从数据库访问图像无效

> ID：15745349
> 
> 赞同：0
> 
> 时间：2013-04-01T14:30:42.353
> 
> 标签：c#, .net

我正在 c# 桌面应用程序中创建项目。我想添加一些功能，比如当我从数据网格视图中选择行时，数据库中的图像会显示在图片框中。但有一些错误，如：

> *“参数无效”*

我的代码是..

```
private void dataGridView1_SelectionChanged(object sender, EventArgs e)
        {
            foreach (DataGridViewRow row in dataGridView1.SelectedRows)
            {
                // display content
                string value1 = row.Cells[0].Value.ToString();
                string value2 = row.Cells[1].Value.ToString();
                label2.Text = value1;
                label4.Text = value2;

            //Display Image
            SqlConnection cn = new SqlConnection();
            string str = "Data Source=.\\SQLEXPRESS;AttachDbFilename=D:\\PROJECT\\NEW\\CASTING CALCULATING SYSTEM\\CASTING CALCULATING SYSTEM\\DB_CASTING.MDF;Integrated Security=True;Connect Timeout=30;User Instance=True;";
            cn.ConnectionString = str;
            SqlCommand cmd = new SqlCommand ();
            cmd.Connection = cn;
            string strsql = "select image from EmpMaster WHERE Fname = '" +value2+ "'";
            cmd.CommandText = strsql ;
            cn.Open();
            SqlDataReader dr;

            try
            {

              dr = cmd.ExecuteReader();
              if (dr.Read())
              {
                 byte[] picarr = (byte[])dr["image"];
                 MemoryStream ms = new MemoryStream(picarr);
                 ms.Seek(0, SeekOrigin.Begin);
                 pictureBox1.Image = Image.FromStream(ms);
              }
            }
            catch (Exception ex)
            {
               MessageBox.Show(ex.Message);
            }
            finally
            {
              cn.Close();
            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:49:25.870

这很可能是内存上限问题，请参阅[此线程](https://stackoverflow.com/questions/6333681/c-sharp-parameter-is-not-valid-creating-new-bitmap)以获取示例。

所以这基本上是问题出在图像方面，而不是你的 SQL。这可能与纯内存的原因不同，图片构造函数可能失败的原因有很多。

此外，DJ KRAZE 是对的，您需要对 SQL 查询做一些工作。作为最低使用参数（显着降低 SQL 注入攻击的风险）并将 SqlConnection 和 SqlDataReader 放入 using 块中，以确保它们被正确处理。

# java - 组件提供服务

> ID：15745350
> 
> 赞同：0
> 
> 时间：2013-04-01T14:30:43.700
> 
> 标签：java, service, osgi, bundle, apache-felix

我对 OSGI 中的组件和服务一词的理解存在疑问。我正在使用 apache felix 框架。我已在此链接[http://wiki.osgi.org/wiki/Declarative_Services#Providing_Services](http://wiki.osgi.org/wiki/Declarative_Services#Providing_Services)中阅读了组件提供服务的内容。但是当组件提供服务而不是接口提供的服务时，我没有明白这一点？在我看来，接口是由组件实现的服务。

另一个疑问是，如果另一个捆绑包想要使用另一个捆绑包的服务而不是它是如何完成的？它使用接口（服务）或组件（实现类）。

请清除我的疑虑，以便我可以更好地了解服务和组件这两个术语以及与 scr 表示法的关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:43:13.503

您是对的，有时事物的名称有些不清楚，Felix 和 Equinox 之间的命名也存在一些细微差别。

在声明式服务中：

OSGi 中的*服务*是注册到服务注册表的对象。它可以是一个组件，也可以是您喜欢的任何对象。

*组件*是对象的具体实例，由声明式服务容器管理。您需要提供一个实现类，容器可以使用它来实例化该类。

有时这就是您所需要的：如果它的所有引用都存在，则该对象将被实例化，并在适用时调用激活/停用方法。

如果您还想将其注册为 OSGi 服务以便其他组件可以使用它，您需要：

1.  实现您要提供的服务的接口
2.  表示你想用那个接口将它注册为服务

如果你真的想要你*可以*将实现类注册为提供的服务，但使用接口是更好的分离。

要在组件中使用另一个服务，您需要引用它。在 OSGi wiki 上，您提到该部分似乎丢失了。这个[博客](http://www.noway.es/OSGI-Declarative-Services-Components-Tutorial)很好地解释了它。

问候，弗兰克

# spring - HTTPSession 和 Spring 会话范围 bean 的行为

> ID：15745355
> 
> 赞同：1
> 
> 时间：2013-04-01T14:31:02.067
> 
> 标签：spring, session, scope, session-timeout

我有一个关于 HTTPSession 和 Spring bean 的问题，我完全不明白。在 web.xml 中，我将会话超时设置为 1 分钟：

```
<session-config>
    <session-timeout>1</session-timeout>
</session-config> 
```

在我提出的每个 Ajax 请求中，我都会检查会话是否有效：

```
if(request.getSession(false) == null)
            System.out.println("Session Invalid"); 
```

但它看起来在一分钟过去后仍然有效（它不为空）。

然后发生了一些让我感到困惑的事情。我有几个带有这个注释的bean：

```
@Scope(value = "session", proxyMode = ScopedProxyMode.TARGET_CLASS) 
```

第一分钟，它们工作正常，总是注入相同的 bean 实例，我可以存储一些信息并在以后恢复它，但是如果我等待一分钟然后我发送另一个请求，那么注入 bean 的不同实例我的信息丢失了。

我相信发生的事情是，由于会话应该已经过期，注入的 bean 是不同的，但是为什么*request.getSession(false)*不为 null 而*request.getSession(false).isValid()*为**true**？

# sql - T-SQL 日期比较

> ID：15745356
> 
> 赞同：-2
> 
> 时间：2013-04-01T14:31:04.760
> 
> 标签：sql, sql-server, datetime

是以下查询的结果集：

```
SELECT * FROM Table
WHERE Date >= '20130101' 
```

等于以下查询的结果集：

```
SELECT * FROM Table
WHERE Date = '20130101'

UNION ALL

SELECT * FROM Table
WHERE Date > '20130101' 
```

? `Date`是`DATETIME`场

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T14:32:53.160

结果是YES，但性能NO。

可能存在性能问题。第一个只扫描表一次，而第二个扫描两次，因为`UNION`. （*一个`SELECT`语句比两个组合选择语句快*）

所以我宁愿选择第一个。

# c++ - 在 C++11 中返回 const 值类型对移动语义的影响

> ID：15745359
> 
> 赞同：3
> 
> 时间：2013-04-01T14:31:15.543
> 
> 标签：c++, c++11, constants, move-semantics

我不清楚返回`const`值对 C++11 中移动语义的影响。

这两个返回数据成员的函数之间有什么区别吗？`const`在 C++11 中仍然是多余的吗？

```
int GetValueA() { return mValueA; }
const int GetValueB() { return mValueB; } 
```

这些功能呢？

```
int GetValuesAB() { return mValueA + mValueB; }
const int GetValuesCD() { return mValueC + mValueD; } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T14:46:49.343

调用按值返回的函数的表达式是纯右值。但是，没有`const`非类非数组类型的纯右值（§5/6）：

> 如果prvalue最初具有类型“cv `T`”，其中`T`是无cv限定的非类、非数组类型，则在`T`进一步分析之前将表达式的类型调整为。

这意味着您对函数的两个定义之间没有区别。它返回 a`const int`还是只返回 an`int`无关紧要，因为表达式 never `const`。

但是，当您返回类类型时会有所不同。考虑以下示例：

```
struct foo
{
  void bar() { std::cout << "Hello" << std::endl; }
};

foo get_foo(); 
```

现在，如果我们调用`get_foo()`，我们会得到一个临时`foo`对象。这个prvalue不是`const`，我们可以在它上面调用非`const`成员函数，所以我们可以很高兴地这样做`get_foo().bar()`。`get_foo`但是，我们可以像这样更改声明：

```
const foo get_foo(); 
```

现在，表达式`get_foo()`是一个`const`纯右值（这是允许的，因为它是一个类类型），我们不能再调用`bar`它返回的临时对象。

尽管如此，谈论非类类型的移动语义是没有意义的，因为 an`int`永远不会被移动。如果你返回一个`const`类类型，它也不能被移动，因为它是`const`. 展示：

```
foo get_foo();
foo f(get_foo()); // Will call the move constructor

const foo get_foo();
foo f(get_foo()); // Will call the copy constructor 
```

这是因为`const`纯右值不会绑定到非`const`右值引用，移动构造函数将其作为参数。

# php - 从 USB 串行设备读取数据

> ID：15745361
> 
> 赞同：5
> 
> 时间：2013-04-01T14:31:24.750
> 
> 标签：php, ubuntu, terminal, serial-port, usb

我正在尝试从 Ubuntu 中的 USB 串行 RFID 设备读取数据。

该设备是：[https ://www.sparkfun.com/products/8852](https://www.sparkfun.com/products/8852)

该设备在 Ubuntu 下被识别为：

```
/dev/ttyUSB0 
```

如果我在将 RFID 标签触碰阅读器时使用“screen”或“minicom”等程序，屏幕上会显示一个唯一编号。

我希望能够通过终端获取这些数据。然后，如果有必要，我有这个数据处理。

我的问题是，我怎样才能获得我在这些程序中看到的数据？我想编写一个 bash 或 PHP 脚本来获取数据。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-12-05T13:39:47.287

如果您打算使用 PHP (*nix/Windows)，那么您正在寻找 PHP `dio`(Direct I/O) 扩展： http: [//php.net/manual/en/book.dio.php](http://php.net/manual/en/book.dio.php)

来自 PHP 手册：

> PHP 支持 Posix 标准（第 6 节）中描述的直接 io 函数，用于在比 C 语言流 I/O 函数（fopen()、fread()、..）更低的级别执行 I/O 函数。只有在需要直接控制设备时才应考虑使用 DIO 功能。在所有其他情况下，标准文件系统功能绰绰有余。

# iis - 仅在服务器上的规范重定向

> ID：15745366
> 
> 赞同：2
> 
> 时间：2013-04-01T14:31:37.870
> 
> 标签：iis, redirect, url-rewriting, web-config

我可以重定向 www.domain.com 上的所有 domain.com-s，它在服务器上的工作就像一个魅力：

```
<rewrite>
    <rules>
        <rule name="Canonical Host Name" stopProcessing="true">
            <match url="(.*)" />
            <conditions>
                <add input="{HTTP_HOST}" negate="true" pattern="^www\.domain\.com$" />
            </conditions>
            <action type="Redirect" url="http://www.domain.com/{R:1}" redirectType="Permanent" />
        </rule>
    </rules>
</rewrite> 
```

但是它有一个副作用——当我在测试环境中时它也可以工作，比如在本地主机上，它总是在生产服务器上重定向。

如何添加一些仅适用于服务器的条件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T14:49:35.597

这可以使用请求主机成为`domain.com`子域的第二个条件来实现：

```
<rewrite>
    <rules>
        <rule name="Canonical Host Name" stopProcessing="true">
            <match url="(.*)" />
            <conditions>
                <add input="{HTTP_HOST}" pattern="domain\.com$" />
                <add input="{HTTP_HOST}" negate="true" pattern="^www\.domain\.com$" />
            </conditions>
            <action type="Redirect" url="http://www.domain.com/{R:1}" />
        </rule>
    </rules>
</rewrite> 
```

（请注意，您的情况中缺少 a `\`，这`redirectType="Permanent"`是可选的）

# java - 重复使用的访客应该是静态的吗？

> ID：15745367
> 
> 赞同：1
> 
> 时间：2013-04-01T14:31:42.193
> 
> 标签：java, design-patterns, gwt, visitor-pattern

我正在写一个画布绘画应用程序。

对于某些操作，我有一个访问者，每次鼠标选择绘图时都会使用该访问者。目前，我总是再次重新创建访问者，例如：

```
Visitor visitor = isStateSelected ? new SelectionVisitor() : DrawVisitor(); 
```

我应该考虑让这些访问者保持静态，还是至少为他们引入一个私有字段？或者有人会争辩说目前的方式更干净，对象创建不是很大的开销吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T14:39:50.447

我建议使用状态模式来触发适当的访问者。缓存在应用程序层中确实是个坏主意。领域模型类不应该引用它们，它们应该只存在于配置层。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T14:35:44.177

如果此对象创建是您的应用程序的瓶颈，我认为下一步将是私有缓存。如果它没有减慢您的速度，我认为您可以继续处理下一个问题。

我喜欢尝试保持代码干净。如果您不想让访问者缓存混淆您的代码，您可以通过将其包装在一个`private getVisitor()`管理缓存变量的自己的方法中来保持代码分离。

# javascript - json 对象的特定索引

> ID：15745372
> 
> 赞同：1
> 
> 时间：2013-04-01T14:32:05.860
> 
> 标签：javascript, jquery, json

到目前为止，我如何制作一个 json 对象的 3 个选定元素的数组：从 mysql、php 返回的 Json 对象到数组的数组中，测试为 true 作为数组

```
var json = $.parseJSON(data);
$(json).each(function(i,val)
{
 $.each(val,function(k,v)
{
 console.log(k+" : "+ v); 
```

控制台显示

0 : 2013-03-28 20:18:05

1 : 穆尔克剧院

2：喜剧

3：-37.001732

4：174.789467

5：-36.998543

6：174.787339

7 : 47

8 : 1

9 : 9

10 : 0.00

11 : 1.00

0 : 2013-03-28 20:18:05

1 : 市中心剧院

2：戏剧等

假设 php 将这些数字作为键，当我尝试使用 alert (data.'3'[4]) 引用它们时；或警报（data.3[4]）；我收到意外的数字/意外的字符串错误。我只想将每次迭代的第 3 项和第 4 项存储在一个变量中，我该如何引用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:34:19.823

`data.'3'[4]`并且`data.3[4]`都是无效的 JavaScript 语法。正确的语法仍然是`data[3][4]`（或者更准确地说是`data["3"][4]`。即使键是数字，您也可以使用括号表示法来访问对象成员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T14:37:57.870

您正在处理多维数组结构：

```
data[x][y] 
```

将`x`和替换`y`为所需的索引。

# javascript - 这段代码是如何工作的，这是什么类型的对象声明？

> ID：15745380
> 
> 赞同：1
> 
> 时间：2013-04-01T14:32:23.250
> 
> 标签：javascript, class

我正在研究别人的 Javascript 来学习一些新概念，但有些东西我不明白。由于搜索符号相当困难，什么是

```
var s = {}; 
```

意思是？那是一个什么样的物体？之后，该人为对象声明了自定义属性，但我不知道他们从哪里获取这些属性。

```
s.JQ = null;
s.myUnsafeWindow = null; 
```

我查找了所有关于 Javascript 中自定义类的文档，但找不到任何有助于理解这一点的内容。

如果无法从我提供的内容中获得答案，请告诉我，我将发布完整的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T14:34:22.480

> 是什么`var s = {};`意思？

那是“分配对象的新实例（不给它任何额外的属性）”的[对象文字语法。](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals?redirectlocale=en-US&redirectslug=Core_JavaScript_1.5_Guide/Values,_Variables,_and_Literals#Object_literals)

> 我不知道他们从哪里得到这些属性

这两个语句正在*创建*它们。这些属性在评估之前不存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T14:50:18.120

其他人都解释了该声明的含义以及属性的含义。

我想我会通过更深入一点来补充这一点。

```
var s = {}; 
```

是相同的：

```
var s = new Object; 
```

javascript 对象上的`dot`符号以独特的方式运行。它将首先检查对象是否已经具有具有该名称的属性（javascript 对象中的属性必须具有唯一名称），如果存在，它将访问该属性。

所以如果我们这样做：

```
var s = {
    JQ : 'Jquery!'
}; 
```

然后这样做：

```
s.JQ == 'Jquery!'; //returns true
s.JQ = null;
s.JQ == 'Jquery!'; //returns false 
```

如果对象没有该属性，但它会将该属性创建为对象的新属性。

因此，如果我们这样声明对象：

```
var s = {}; 
```

然后使用这两个属性

```
s.JQ = null;
s.myUnsafeWindow = null; 
```

然后我们只看一下`s`我们会看到的对象：

```
s = {
    JQ : null,
    myUnsafeWindow : null
} 
```

`s`现在有 2 个我们可以访问或修改的属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T14:34:37.473

`var s = {}`声明`s`为空对象。然后，您可以随意附加属性。然后可以将这些属性访问为`s.property`

# javascript - Jquery .eq 加上包含

> ID：15745384
> 
> 赞同：0
> 
> 时间：2013-04-01T14:32:40.097
> 
> 标签：javascript, jquery

当试图从所有 [tr] 中获取包含一些信息的第二个 [td] 时，我一直卡在逻辑上。这是一些例子。

```
<table class="todos">
 <tbody>
   <tr>
      <td>info1</td>
      <td>info2</td>
      <td>info3</td>
    </tr>
  </tbody>
</table> 
```

这是为我找到它的Javascript...

```
$(".todos tbody tr").css('display','none');
$(".todos tbody tr").each(function(){
    if($(this).find("td:eq(0):contains("+procurar+")"))
        $(this).css('display','table-row');
    if($(this).find("td:eq(1):contains("+procurar+")"))
        $(this).css('display','table-row');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:37:51.027

您正在隐藏 parent `tr`，因此在 ' 上设置另一个显示属性`td`不会显示它们，但如果这不是预期的功能，我会这样做：

```
$(".todos tbody tr").hide().find('td:lt(2)').filter(function() {
    return $(this).text().indexOf(procurar) != -1;
}).closest('tr').css('display','table-row'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T14:49:14.877

您似乎在第一个`if`条件下有语法错误，并且附近有一些错误代码`:contains`

这个可能对你有用

```
 var procurar = 'info2';
        $(".todos tr").css('display', 'none');
        $(".todos tbody tr").each(function () {
           if($(this).find('td:lt(2):contains("' + procurar + '")').length){
              $(this).css('display', 'table-row');
           }
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T14:55:06.137

由于我看不到您的所有代码（例如：我不知道`procurar`等于什么），因此我设置了一个小示例，其中包含一些有效的硬编码值：

JavaScript

```
$(".todos tbody tr").each(function() {
    var $targetTDs = $(this).find("td:contains('info1')");

    if ($targetTDs.length > 1) {
        var $theSecondInstanceOfATDContainingInfo1 = $targetTDs[1];
    }
}); 
```

HTML

```
<table class="todos">
    <tbody>
        <tr>
            <td>info1</td>
            <td>info1</td>   // $theSecondInstanceOfATDContainingInfo1 is this one
            <td>info2</td>
        </tr>
        <tr>
            <td>info1</td>
            <td>info2</td>
            <td>info1</td>   // $theSecondInstanceOfATDContainingInfo1 is this one
        </tr>
        <tr>
            <td>info2</td>
            <td>info1</td>
            <td>info1</td>   // $theSecondInstanceOfATDContainingInfo1 is this one
        </tr>
    </tbody>
</table> 
```

对于包含两个值为 的 TD 的每一行`info1`，`$theSecondInstanceOfATDContainingInfo1`将捕获第二个 TD。

从您的原始代码中，我无法判断您是否真的需要匹配的 TD，或者您是否只需要知道它存在，但您可以调整此代码以处理任何一种情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T15:15:55.387

**如果**你想得到至少有 2 个 [td]s 包含一些信息的 [tr]s，你应该在 :lt 之前使用 :contains。

HTML

```
<table class="todos">
    <tbody>
        <tr>
            <td>info1</td>
            <td>info2</td>
            <td>info3</td>
        </tr>
        <tr>
            <td>info1</td>
            <td>other</td>
            <td>info3</td>
        </tr>
        <tr>
            <td>info1</td>
            <td>other</td>
            <td>some other</td>
        </tr>
    </tbody>
</table> 
```

JS：

```
var procurar = 'info';
$(".todos tr").css('display', 'none');
$(".todos tbody tr").each(function () {
    if ($(this).find('td:contains("' + procurar + '"):lt(2)').length > 1) {
        $(this).css('display', 'table-row');
    }
}); 
```

结果：

```
info1   info2   info3
info1   other   info3 
```

[http://jsfiddle.net/4Sj7t](http://jsfiddle.net/4Sj7t)

**否则**，如果您想获得其第二个 [td] 包含一些信息的 [tr]s，您应该在 :contains 之前使用 :lt，如您的示例所示。

HTML

```
<table class="todos">
<tbody>
    <tr>
        <td>info1</td>
        <td>info2</td>
        <td>other</td>
    </tr>
    <tr>
        <td>info1</td>
        <td>other</td>
        <td>info2</td>
    </tr>
</tbody> 
```

JS：

```
var procurar = 'info';
$(".todos tr").css('display', 'none');
$(".todos tbody tr").each(function () {
    if ($(this).find('td:lt(2):contains("' + procurar + '")').length > 1) {
        $(this).css('display', 'table-row');
    }
}); 
```

结果：

```
info1   info2   other 
```

[http://jsfiddle.net/4Sj7t/1/](http://jsfiddle.net/4Sj7t/1/)

# php - memory_get_peak_usage() 与“实际使用情况”

> ID：15745385
> 
> 赞同：98
> 
> 时间：2013-04-01T14:32:43.860
> 
> 标签：php, memory, memory-management

如果`real_usage`参数设置为`true`PHP DOCS 表示它将获得从系统分配的实际内存大小。如果是`false`，它将获得由报告的内存`emalloc()`

这两个选项中的哪一个返回最大值。相对于 php.ini 中的内存限制值分配的内存？

我想知道脚本达到这个限制有多接近。

* * *

## 回答 #1

> 赞同：147
> 
> 时间：2013-04-26T14:53:07.520

好的，让我们使用一个简单的脚本来测试它：

```
ini_set('memory_limit', '1M');
$x = '';
while(true) {
  echo "not real: ".(memory_get_peak_usage(false)/1024/1024)." MiB\n";
  echo "real: ".(memory_get_peak_usage(true)/1024/1024)." MiB\n\n";
  $x .= str_repeat(' ', 1024*25); //store 25kb more to string
} 
```

输出：

```
not real: 0.73469543457031 MiB
real: 0.75 MiB

not real: 0.75910949707031 MiB
real: 1 MiB

...

not real: 0.95442199707031 MiB
real: 1 MiB

not real: 0.97883605957031 MiB
real: 1 MiB

PHP Fatal error:  Allowed memory size of 1048576 bytes exhausted (tried to allocate 793601 bytes) in /home/niko/test.php on line 7 
```

似乎真正的使用是从系统分配的内存 - 这似乎分配在比脚本当前需要的更大的存储桶中。（我猜是出于性能原因）。这也是 php 进程使用的内存。

使用`$real_usage = false`量是您在脚本中实际使用的内存使用量，而不是 Zend 内存管理器分配的实际内存量。

阅读[此问题](https://stackoverflow.com/a/2290965/781662)以获取更多信息。

简而言之：要了解您离内存限制有多近，请使用`$real_usage = true`

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-04-26T20:51:46.113

**介绍**

您应该使用`memory_get_usage(false)`，因为您想要的是使用的内存而不是分配的内存。

**有什么不同**

您`Google Mail`可能已经`25MB`为您分配了存储空间，但这并不意味着您目前使用的是这些存储空间。

这正是 PHP 文档所说的

> 将此设置为 TRUE 以获取从系统分配的内存的实际大小。如果未设置或 FALSE，则仅报告 emalloc() 使用的内存。

两个参数都将返回相对于内存限制分配的内存，但主要区别在于：

`memory_get_usage(false)`给出`emalloc()`while`memory_get_usage(true)`返回里程碑使用的内存，可以在此处演示[Memory Mile Store](http://eval.in/17689)

**我想知道脚本达到这个限制有多接近。**

这需要一些数学运算，并且可能仅适用于循环或特定用例。我为什么这么说？

*想象*

```
ini_set('memory_limit', '1M');
$data = str_repeat(' ', 1024 * 1024); 
```

`The above script would fail before you even get the chance to start start checking memory`.

据我所知，我可以检查用于 PHP 变量或特定部分的内存的唯一方法是：

```
$start_memory = memory_get_usage();
$foo = "Some variable";
echo memory_get_usage() - $start_memory; 
```

[请参阅说明](https://stackoverflow.com/a/2192689/1226894)，但如果您处于循环或递归函数中，则可以使用最大内存使用量来安全地估计何时达到内存峰值。

**例子**

```
ini_set('memory_limit', '1M');

$memoryAvailable = filter_var(ini_get("memory_limit"), FILTER_SANITIZE_NUMBER_INT);
$memoryAvailable = $memoryAvailable * 1024 * 1024;

$peakPoint = 90; // 90%

$memoryStart = memory_get_peak_usage(false);
$memoryDiff = 0;

// Some stats
$stat = array(
        "HIGHEST_MEMORY" => 0,
        "HIGHEST_DIFF" => 0,
        "PERCENTAGE_BREAK" => 0,
        "AVERAGE" => array(),
        "LOOPS" => 0
);

$data = "";
$i = 0;
while ( true ) {
    $i ++;

    // Get used memory
    $memoryUsed = memory_get_peak_usage(false);

    // Get Difference
    $memoryDiff = $memoryUsed - $memoryStart;

    // Start memory Usage again
    $memoryStart = memory_get_peak_usage(false);

    // Gather some stats
    $stat['HIGHEST_MEMORY'] = $memoryUsed > $stat['HIGHEST_MEMORY'] ? $memoryUsed : $stat['HIGHEST_MEMORY'];
    $stat['HIGHEST_DIFF'] = $memoryDiff > $stat['HIGHEST_DIFF'] ? $memoryDiff : $stat['HIGHEST_DIFF'];
    $stat['AVERAGE'][] = $memoryDiff;
    $stat['LOOPS'] ++;
    $percentage = (($memoryUsed + $stat['HIGHEST_DIFF']) / $memoryAvailable) * 100;

    // var_dump($percentage, $memoryDiff);

    // Stop your script
    if ($percentage > $peakPoint) {

        print(sprintf("Stoped at: %0.2f", $percentage) . "%\n");
        $stat['AVERAGE'] = array_sum($stat['AVERAGE']) / count($stat['AVERAGE']);
        $stat = array_map(function ($v) {
            return sprintf("%0.2f", $v / (1024 * 1024));
        }, $stat);
        $stat['LOOPS'] = $i;
        $stat['PERCENTAGE_BREAK'] = sprintf("%0.2f", $percentage) . "%";
        echo json_encode($stat, 128);
        break;
    }

    $data .= str_repeat(' ', 1024 * 25); // 1kb every time
} 
```

[输出](http://codepad.viper-7.com/xen5w3)

```
Stoped at: 95.86%
{
    "HIGHEST_MEMORY": "0.71",
    "HIGHEST_DIFF": "0.24",
    "PERCENTAGE_BREAK": "95.86%",
    "AVERAGE": "0.04",
    "LOOPS": 11
} 
```

[现场演示](http://codepad.viper-7.com/xen5w3)

**这可能仍然失败**

它可能会失败，因为在`if ($percentage > $peakPoint) {` 此之后仍然添加做额外的任务也消耗内存

```
 print(sprintf("Stoped at: %0.2f", $percentage) . "%\n");
        $stat['AVERAGE'] = array_sum($stat['AVERAGE']) / count($stat['AVERAGE']);
        $stat = array_map(function ($v) {
            return sprintf("%0.2f", $v / (1024 * 1024));
        }, $stat);
        $stat['LOOPS'] = $i;
        $stat['PERCENTAGE_BREAK'] = sprintf("%0.2f", $percentage) . "%";
        echo json_encode($stat, 128);
        break; 
```

`If the memory to process this request is greater than the memory available the script would fail.`

**结论**

这不是一个完美的解决方案，但每隔一段时间检查内存，如果它超过峰值（例如 90%），`exit`立即离开花哨的东西

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-26T13:57:06.330

`real_usage`false 报告您的脚本*使用*的用法。这将是两者中更准确的。

`real_usage`true 报告*分配*给脚本的内存。这将是两者中较高的。

如果我试图比较，我可能会使用`true`，因为您的脚本分配的内存永远不会超过内存限制，并且只要它（加上所有其他脚本）不超过该使用量就会继续运行。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-11-01T13:02:46.357

根据 PHP [memory_get_usage](http://php.net/manual/en/function.memory-get-usage.php)

> real_usage
> 
> 将此设置为 TRUE 以获取从系统分配的总内存，包括未使用的页面。如果未设置或为 FALSE，则仅报告已用内存。

因此，要获取脚本使用的内存，您应该使用 memory_get_usage()，因为默认的 real_usage 为 false。

如果您想获取系统分配的内存但不关心实际使用了多少，请使用 memory_get_usage(true);

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-15T11:01:44.957

```
<!-- Print CPU memory and load -->
<?php
$output = shell_exec('free');
$data = substr($output,111,19);
echo $data;
echo file_get_contents('/proc/loadavg');
$load = sys_getloadavg();
$res = implode("",$load);
echo $res;
?> 
```

# c++ - C++：简单递归搜索函数的运行时错误

> ID：15745388
> 
> 赞同：0
> 
> 时间：2013-04-01T14:33:02.270
> 
> 标签：c++, arrays, recursion

所以我在这里有一个程序，它应该做一个非常简单的工作，通过一个 100 个整数的数组来搜索一个特定的键。这个程序中的`linearSearch`函数应该是递归的，所以我必须从它内部调用函数。该程序编译得很好，但由于某种原因`0`，无论您输入什么搜索键，都只返回数组中的第一个元素。我没有看到什么？谢谢。

```
#include <iostream>
using namespace std;

int linearSearch(const int[], int, int);

int main()
{
    const int arraySize = 100; //size of array  
    int a[arraySize]; //create array a
    int searchKey; //value to locate in array a

    for(int i = 0; i < arraySize; i++)
            a[i] = 2 * i; //create data

    cout << "Enter integer search key: ";
    cin >> searchKey;

    //attempt to locate search key in array a
    int element = linearSearch(a, searchKey, arraySize);

    //display results
    if(element != -1)
               cout << "Found value in element: " << element << endl;
    else
               cout << "Value not found" << endl;

    system("pause");   
}

//linearSearch Function ****Returns 0 as index all the time *************
int linearSearch(const int array[], int key, int sizeOfArray)
{
    static int index = 0;

    //if Out of range, return -1 (Value not found)
    if(index >= sizeOfArray){return -1;}

    //if array value = key, array index is returned
    if(array[index] == key){return index;}

    //if array value is not equal to key, add to index and call func again                
    if(array[index] != key)
    {
                    index++;
                    linearSearch(array, key, sizeOfArray);                
    }   
} 
```

我通过声明`index`as来采取正确的方法`static`，对吗？

〜非常感谢，你们很快而且帮助很大。=)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T14:36:29.540

你的错误是

```
if(array[index] != key)
{
    index++;
    linearSearch(array, key, sizeOfArray);                
} 
```

应该

```
if(array[index] != key)
{
    index++;
    return linearSearch(array, key, sizeOfArray);                
} 
```

当键不相等时，您不会返回任何值。

加上静态索引很糟糕，正如已经说过的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T14:35:23.733

> 我通过声明`index`as来采取正确的方法`static`，对吗？

不，`index`应该是递归函数的参数。

由于`static`状态的原因，该函数很难测试并且不是线程安全的。此外，它会无意中在调用之间保持状态，这意味着如果您要再次调用它，它将无法正常工作（因为`index`仍然具有旧值）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T14:38:41.467

当递归地执行这种类型的搜索时，您必须传播您当前在数组中的索引。

你这样做的方式，有一个全局变量，由于 static 关键字，`index`它*在每次调用你的函数时都是相同的。*

索引应该是一个参数，每次递归调用函数时，都将 index+1 作为参数传递。

此外，您必须返回递归调用的值，否则它什么也不做，也不存储/处理返回的值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-01T14:45:03.893

您也可以在不使用静态局部变量的情况下将搜索功能更改为以下内容`index`。

```
int linearSearch(const int array[], int index, int key, int sizeOfArray)
{
   //if Out of range, return -1 (Value not found)
   if(index >= sizeOfArray){return -1;}

   //if array value = key, array index is returned
   if(array[index] == key){return index;}

   //if array value is not equal to key, add to index and call func again                
    return linearSearch(array, index + 1, key, sizeOfArray);                
 } 
```

唯一的变化是您将起始索引传递给搜索函数。

# jquery - JMapping - category_icon_options

> ID：15745389
> 
> 赞同：1
> 
> 时间：2013-04-01T14:33:10.520
> 
> 标签：jquery, google-maps-api-3

我使用 JMAPPING jquery 插件已经有一段时间了，Google API（我认为）发生了一些变化，因为类别图标选项似乎不再起作用。这在大约 2 周前停止工作，我从未更改过我的 ASP 代码。即使是 JMAPPING 网站上的[示例 #5](http://vigetlabs.github.com/jmapping/examples/category_options.html)也无法正确显示图标的颜色。

标记都显示在地图上，但它们都是红色的。红色标记是记录集中与 JAVASCRIPT 的 category_icon_options 部分中的特定类别匹配的最后一个标记。

其他人有这个问题吗？

这是我的代码示例：

```
<div id="map"></div>
<div id="map-side-bar">
<div class="map-location" data-jmapping="{id: 154157499, point: {lng: -82.70809000, lat: 28.03966000}, category: 'Green'}">
<a href="#" class="map-link">Green 12:00:39 0MPH</a>
<div class="info-box">
  Unit:69@3/31/2013 9:15:33 AM<br>
  Elapsed Time: 12:00:39<br>
  Speed: 0MPH<br />
</div>
</div>

<div class="map-location" data-jmapping="{id: 154158127, point: {lng: -82.74336000, lat: 28.14920000}, category: 'Red'}">
<a href="#" class="map-link">Red 12:12:03 7MPH</a>
<div class="info-box">
    Unit:69@3/31/2013 9:26:57 AM<br>
    Elapsed Time: 12:12:03<br>
    Speed: 7MPH<br />
</div>
</div>

<script type="text/javascript">
    $(document).ready(function () {
        $('#map').jMapping({
            map_config: {
                navigationControlOptions: {
                    style: google.maps.NavigationControlStyle.DEFAULT
                },
                mapTypeId: google.maps.MapTypeId.ROADMAP,
                zoom: 12
            },
            category_icon_options: {
                'Green': { color: '#008000' },
                'Yellow': { color: '#FFFF00' },
                'Red': { color: '#FF0000' }
            }
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T15:35:05.647

供应商将在未来修复 JS，现在没有修复。我决定转向完整的 Google MAP API v3，而不是我们的 3rd 方 JS 工具。谢谢吉姆

# compiler-construction - Xamarin.iOS“尝试 JIT 编译方法”简单类

> ID：15745392
> 
> 赞同：1
> 
> 时间：2013-04-01T14:33:20.460
> 
> 标签：compiler-construction, xamarin.ios, jit

我有一个 Xamarin.iOS 应用程序。我正在引用一个 iOS 库项目。在库项目中，我有一个非常简单的类。

```
using System;

namespace Noodle.iOS
{
    public class TestClass
    {
        string property;

        public TestClass (string property)
        {
            this.property = property;
        }

        public string Property
        {
            get
            {
                return property;
            }
        }

    }
} 
```

尝试在 AppDelegate 中实例化此类时，出现以下错误。

```
System.ExecutionEngineException: Attempting to JIT compile method 'Noodle.iOS.TestClass:.ctor (string)' while running with --aot-only. See http://docs.xamarin.com/ios/about/limitations for more information 
```

我正在使用此代码来实例化 AppDelegate 中的类。

```
var testClass = new Noodle.iOS.TestClass("test"); 
```

我参考了错误消息中提到的“限制”，但没有找到与我的设置相关的任何内容。我没有使用泛型/虚拟。我也在链接一切。

任何想法为什么我会收到此错误？为什么 MonoTouch（或 mtouch.exe）不会 AOT 编译我引用的 iOS 库项目？

另一方面，有没有办法在 iOS 模拟器中禁用 JIT 以使其更像设备？

**更新**

看来，它与我其他项目中的其他方法/类有关。似乎有一种用法会导致整个库崩溃。如果我不使用这个特定的静态类，我可以正确使用整个库。

```
Noodle.Engine.Singleton<Noodle.TinyIoCContainer>.Instance = new Noodle.TinyIoCContainer();
// var current = Noodle.EngineContext.Current; 
```

上面的代码有效。容器被创建。但是，如果我取消注释第二行，第一行不会给我这些 --aot-only 错误。

有任何想法吗？“Current”属性应该只返回我在第一行创建的单例实例。

这是 github 上的 EngineContext.cs 文件，可帮助确定原因。

[https://github.com/theonlylawislove/Noodle/blob/master/Source/Noodle/EngineContext.cs](https://github.com/theonlylawislove/Noodle/blob/master/Source/Noodle/EngineContext.cs)

# javascript - phantomjs 可以与 node.js 一起使用吗？

> ID：15745394
> 
> 赞同：28
> 
> 时间：2013-04-01T14:33:24.927
> 
> 标签：javascript, jquery, node.js, coffeescript, phantomjs

我想在我的 node.js 脚本中使用 phantomjs。有一个[phantomjs-node](https://github.com/sgentle/phantomjs-node)库.. 但不幸的是作者使用这个奇怪的咖啡脚本代码来解释他在做什么：

```
phantom = require 'phantom'

phantom.create (ph) ->
  ph.createPage (page) ->
    page.open "http://www.google.com", (status) ->
      console.log "opened google? ", status
      page.evaluate (-> document.title), (result) ->
        console.log 'Page title is ' + result
        ph.exit() 
```

现在如果我直接使用 phantomjs 和 javascript，它看起来像[这样](https://github.com/ariya/phantomjs/wiki/Quick-Start)：

```
var page = require('webpage').create();
page.open(url, function (status) {
    var title = page.evaluate(function () {
        return document.title;
    });
    console.log('Page title is ' + title);
}); 
```

所以基本上我正在尝试用普通的javascript编写相当于上面第一段代码的代码（通过阅读咖啡脚本[文档](http://coffeescript.org/#literals)..这就是我所做的：

```
// file name: phantomTest.js

var phantom = require('phantom');

phantom.create(function(ph) {
    ph.createPage(function(page) {
        page.open('http://www.google.com', function(status) {
            console.log('opened google?', status);
            var title = page.evaluate(function() {
                return document.title;
            });
            console.log('page title is ' + title);              
        });
    });
    ph.exit();
}); 
```

不幸的是，它不起作用！如果我跑

```
node phantomTest.js 
```

在外壳上，什么都没有发生..没有任何回报，过程也没有停止..有什么想法吗？

**更新：**

我刚刚在 phantomjs[常见问题](http://phantomjs.org/faq.html)解答中读到了这个：

> 问：为什么 PhantomJS 不写成 Node.js 模块？
> 
> A：简短的回答：“没有人可以侍奉两个主人。”
> 
> 更长的解释如下。
> 
> 到目前为止，这样做在技术上非常具有挑战性。
> 
> 每个 Node.js 模块本质上都是 Node.js 核心的“从属”，即“主控”。在当前状态下，PhantomJS（及其包含的 WebKit）需要对所有内容（以同步方式）进行完全控制：事件循环、网络堆栈和 JavaScript 执行。
> 
> 如果意图只是直接从 Node.js 中运行的脚本中使用 PhantomJS，则可以通过启动 PhantomJS 进程并与之交互来实现这种“松散绑定”。

嗯..这可能与它有关吗？但是那样整个图书馆就没有意义了！

**更新2：**

我在[网上](http://net.tutsplus.com/tutorials/javascript-ajax/web-scraping-with-node-js/)找到了这个做同样事情的代码：

```
var phantom = require('phantom');
phantom.create(function(ph) {
  return ph.createPage(function(page) {
    return page.open("http://www.google.com", function(status) {
      console.log("opened google? ", status);
      return page.evaluate((function() {
        return document.title;
      }), function(result) {
        console.log('Page title is ' + result);
        return ph.exit();
      });
    });
  });
}); 
```

不幸的是，这也不起作用..同样的结果！

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-04-01T15:20:13.253

phantomjs-node 不是官方支持的 phantomjs 的 npm 包。相反，它通过创建一个使用 websockets 作为节点和 phantom 之间的 IPC 通道的 web 服务器，在 node 和 phantom 之间实现了一个“非常聪明的桥梁”。[我不是在编造这个](https://github.com/sgentle/phantomjs-node#no-really-how-does-it-work)：

> 因此，我们通过启动 ExpressJS 的实例、在子进程中打开 Phantom 并将其指向将 socket.io 消息转换为 alert() 调用的特殊网页来与 PhantomJS 进行通信。那些 alert() 调用由 Phantom 接听，然后就可以了！

因此，如果 phantomjs-node 工作、不工作、静默失败或严重失败，我不会感到惊讶。除了 phantomjs-node 的作者之外，我也不希望任何人能够对 phantomjs-node 进行故障排除。

您最初问题的答案是 phantomjs 常见问题解答中的答案：不。Phantom 和节点具有不可调和的差异。两者都希望完全控制基本的低级功能，如事件循环、网络堆栈和 JS 执行，因此它们不能在同一个进程中协作。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-05-26T14:34:49.813

你也可以试试[phridge](https://github.com/peerigon/phridge)。你的例子应该是这样写的：

```
var phantom;

// spawn a new PhantomJS process
phridge.spawn()
    .then(function (ph) {
        phantom = ph;
        return phantom.openPage("http://www.google.com");
    })
    .then(function (page) {
        return page.run(function () {
            // this function runs inside PhantomJS with this bound to a webpage instance
            return this.title;
        });
    })
    .then(function (title) {
        console.log('Page title is ' + title);
        // terminates the process cleanly
        phantom.dispose();
    }); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-02-19T02:24:05.390

我现在是`phantom-node`包的新维护者。它不再使用咖啡脚本了。你可以做类似的事情

```
var phantom = require('phantom');

phantom.create().then(function(ph) {
  ph.createPage().then(function(page) {
    page.open('https://stackoverflow.com/').then(function(status) {
      console.log(status);
      page.property('content').then(function(content) {
        console.log(content);
        page.close();
        ph.exit();
      });
    });
  });
}); 
```

新版本更快、更有弹性。它也不再使用 websockets。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-26T16:24:47.560

将您的代码更改为此，它将起作用：

```
 var phantom = require('phantom');
 phantom.create(function(ph) {
   ph.createPage(function(page) {
     page.open("http://www.google.com", function(status) {
       console.log("opened google? ", status);
       page.evaluate((function() {
         return document.title;
       }), function(result) {
         console.log('Page title is ' + result);
         ph.exit();
       });
     });
   });
 }); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-08T20:21:24.890

你可以像我一样抛弃 PhantomJS，因为这些包装器不能很好地工作实在是太痛苦了，而使用也很受欢迎的[Zombie.js 。](http://zombie.labnotes.org/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-11-23T18:12:31.530

似乎这是工作..

```
var phantom = require('phantom');

phantom.create().then(function(ph) {
  ph.createPage().then(function(page) {
    page.open('https://stackoverflow.com/').then(function(status) {
      console.log(status);
      page.property('content').then(function(content) {
        console.log(content);
        page.close();
        ph.exit();
      });
    });
  });
}); 
```

但我正在尝试使用一些外部脚本文件生成一个 html 页面。它无法注入脚本文件。我试过如下。回调没有从线路返回`page.injectJs('./jQuery.min.js',function() {`

```
var phantom = require('phantom');

    phantom.create().then(function(ph) {
      ph.createPage().then(function(page) {
        page.injectJs('./jQuery.min.js', function() {
          page.property('content').then(function(content) {
            console.log(content);
            page.close();
            ph.exit();
          });
        });
      });
    }); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-01T18:15:47.490

我遇到了和你一样的问题，显然，nodejs 和较新版本存在一个[已知问题。](https://github.com/sgentle/phantomjs-node/issues/77)`phantomjs-node`根据问题中的评论，它似乎在节点 0.9.3 附近停止工作。所以在解决这个问题之前，你要么必须降级 nodejs，要么尝试不同的模块，比如[node-phantom](https://github.com/alexscheelmeyer/node-phantom)，或者只使用`exec/spawn`.

# php - PHP中的MySQL查询不会打印结果

> ID：15745395
> 
> 赞同：1
> 
> 时间：2013-04-01T14:33:26.787
> 
> 标签：php, html, mysql

这是我用于查询的 php 脚本：

```
 $query="SELECT f.EVENT, 
    f.LOCATION, 
    f.DOE, 
    f.CATEGORY, 
    f.LOGLOC, 
    f.LOGDOE, 
    f.LOGCAT, 
    ((( f.NUMOFTIMESLOC * ( Log(f.LOGLOC) ) ) + 
                                             ( f.NUMOFTIMESDOE * ( Log(f.LOGDOE) ) ) + ( 
                                           f.NUMOFTIMESCAT * (Log(f.LOGCAT))))) AS FINALRANK 
                                FROM   (SELECT E.EVENT, 
                                               ED.LOCATION, 
                                               ED.DOE, 
                                               ED.CATEGORY, 
                                               ( ( ED.NUMOFDATASET / ED.NUMOFTIMESLOC ) * 100 ) AS LOGLOC, 
                                               ( ( ED.NUMOFDATASET / ED.NUMOFTIMESDOE ) * 100 ) AS LOGDOE, 
                                               ( ( ED.NUMOFDATASET / ED.NUMOFTIMESCAT ) * 100 ) AS LOGCAT, 
                                               ED.NUMOFTIMESLOC, 
                                               ED.NUMOFTIMESDOE, 
                                               ED.NUMOFTIMESCAT 
                                        FROM   EVENT E, 
                                               EVENTDETAIL ED 

                                        WHERE  E.EVENTID = ED.EVENTID 
                                               AND ED.LOCATION = 'Liverpool' 
                                               AND ED.CATEGORY = 'Concerts') f ORDER BY FINALRANK";
                                $result=mysql_query($query);
                                $num=mysql_numrows($result);
                                mysql_close();
                                $i=0;
                                if(!$num){
                                    echo ("No Results");
                                }
                                else{
                                    while ($i < $num) {
                                        $eventid=mysql_result($result,$i,"eventid");
                                        echo $eventid;
                                        echo"<br>";
                                        $i++;
                                    }
                                } 
```

当此查询在命令控制器中运行时，它工作正常并为查询打印 2 个结果，但与 PHP 一起使用时，它只返回“无结果”。请帮忙！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T14:39:47.943

*   你的问题是你`mysql_close();` 在输出结果之前关闭了连接

删除该 ligne`mysql_close();`并使其出现在您的最后一个结果中。

*   并确保将其更改`mysql_numrows`为`mysql_num_rows`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T14:34:53.677

我认为这是因为`mysql_numrows()`. 这应该是`mysql_num_rows()`。在这里改变它。

```
$num=mysql_num_rows($result); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T14:35:41.767

```
$num=mysql_numrows($result); 
```

那是错误的函数名称，它是

```
$num=mysql_num_rows($result); 
```

[mysql_num_rows](http://php.net/mysql_num_rows)

这样你`$num`就不会是假的，你也不会看到“没有结果”的消息；目前由于那个错误，它被设置为假，因此你的 if 总是触发

# ruby-on-rails - `new` 关键字在这个 Ruby 方法定义中是如何工作的？

> ID：15745397
> 
> 赞同：10
> 
> 时间：2013-04-01T14:33:31.110
> 
> 标签：ruby-on-rails, ruby, refactoring

Railscasts 发布了一篇关于重构的精彩片段。一种方法是将复杂的控制器逻辑移动到服务对象中，而不是将其下推到模型中。在[一个服务对象](https://github.com/railscasts/398-service-objects/blob/master/auth-services/app/services/password_reset.rb)中，使用了以下代码：

```
class PasswordReset
  attr_reader :user

  def self.from_email(email)
    new User.find_by_email(email)
  end

  def self.from_token(token)
    new User.find_by_password_reset_token!(token)
  end
  ...
end 
```

`new`两个方法体中的关键字是什么？`new User.find_by_`. 那和 有什么不同`User.find_by_`？

这是调用代码：

```
 def create # controller
    password_reset = PasswordReset.from_email(params[:email])
    if password_reset.user
      password_reset.send_email
      redirect_to root_url, notice: "Email sent with password reset instructions."
    else
      redirect_to new_password_reset_url, alert: "Email address does not match a user account."
    end
  end 
```

另外，为什么`attr_reader :user`需要？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-01T14:40:33.277

类名隐含在 self 方法中。代码可以这样写：

```
 def self.from_email(email)
    PasswordReset.new User.find_by_email(email)
 end 
```

要回答您问题的后半部分，请`attr_reader`定义一个实例变量和一个读取器方法（如果您来自 java 或 c#，则称为 getter 方法）。把它们放在一起，你可以写成：

```
class PasswordReset

  def user
    @user
  end

  def self.from_email(email)
    PasswordReset.new User.find_by_email(email)
  end

  def self.from_token(token)
    PasswordReset.new User.find_by_password_reset_token!(token)
  end
  ...
end 
```

这是假设 PasswordReset#initialize 将 User 作为参数，并相应地设置 @user

# python - 在某些条件下使 python 2 Tkinter 滑块静态

> ID：15745398
> 
> 赞同：0
> 
> 时间：2013-04-01T14:33:36.620
> 
> 标签：python, slider, tkinter

我想知道是否有办法在某些条件下使滑块保持静止，即程序处于试用许可证下。

我想到的一个解决方案是放置图像而不是滑块，但我更喜欢静态滑块。

有没有办法我可以做到这一点？

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T14:42:53.580

您可以`state=DISABLED`在构造函数中使用该选项，几乎所有 Tkinter 小部件都允许使用该选项。

# java - 设置 MockServletContext 的真实路径

> ID：15745400
> 
> 赞同：5
> 
> 时间：2013-04-01T14:33:40.617
> 
> 标签：java, spring, servlets, junit

我正在尝试存根`MockServletConfig`和`MockServletContext`. 在我的 servlet`init()`方法中，servlet 像这样获取 realPath：

```
String realPath = servletContext.getRealPath(fileSeperator+"WEB-INF"); 
```

对于我的测试用例，realPath 为空。我正在尝试这样设置：

```
MockServletContext context = new MockServletContext();
        context.setContextPath("D:/Projects/ProjectName/webapps");
        MockServletConfig config = new MockServletConfig(context); 
```

这里 WEB-INF 文件夹在`webapps`文件夹中。
我怎么了`MockServletContext`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-22T14:11:04.290

从 Spring 3.x 开始`getRealPath`，基于`resourceBasePath`而不是`contextPath`，所以只需使用适当的构造函数正确设置它`MockServletContext`

```
new MockServletContext("D:/Projects/ProjectName/webapps", null) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-12T16:45:20.307

您必须`file:/`在路径之前添加。例如：

```
ServletContext context = new MockServletContext("file:/D:/Projects/ProjectName/webapps"); 
```

# php - 从本地服务器连接到数据库

> ID：15745402
> 
> 赞同：0
> 
> 时间：2013-04-01T14:33:43.680
> 
> 标签：php, mysql

我经营一个大型 PHP 网站，其中一些页面连接到 MySQL 数据库，效果很好。我现在已经创建了一个本地测试服务器，并将我的 PHP 页面和我的数据库下载到 wamp 服务器，这些页面不需要数据库连接就可以正常工作。但是，在使用数据库的页面上，`mysql_connect()`请求会引发错误：

> 警告：mysql_connect()：连接尝试失败，因为连接方在一段时间后没有正确响应，或者连接失败，因为连接的主机没有响应。

我可以通过将 PHP 页面上的 MySQL 请求更改为：

```
$server="localhost";
$user="root";
$password=""; 
```

离开`$database="xxxx";`（原名）

这个解决方案意味着我必须使用 MySQL 请求更改每个页面，然后在开发完成后将它们改回来。

有没有办法让原始 MySQL 连接请求工作，同时将原始安全数据保留在 PHP 页面上？例如，通过更改 wamp 服务器的 config.inc.php 文件？

我在 config.inc.php 文件中尝试了多种组合，但似乎都不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T14:44:32.667

正如我在评论中所说，如果您在每个文件中都硬编码了 mysql 连接凭据，那么您只有两种选择：

1.  替换每个文件中的凭据（进行大量搜索和替换）
2.  将相同的凭据放在本地服务器中。如果代码尝试连接到远程主机，您可以将该主机放在指向本地主机的主机文件中。这样您就可以模拟远程环境。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T14:46:23.623

一个好的解决方案是将这些信息保存在一个文件中，该文件包含在需要 mysql 连接的所有其他页面中。

数据库.php

```
$server="localhost";
$user="root";
$password="";
$database = "nameofyourdb"

// Might event do the mysql_connect here 
```

index.php 或任何其他页面

```
include_once('database.php');
// your code
// containing mysql_query() and so on 
```

然后，当您从本地转到生产时，您只需要更改一个文件中的信息。

甚至可以使用这样的技巧来避免更改：

```
if ($_SERVER['SERVER_ADDR'] == '127.0.0.1') {
    // local
    $server="localhost";
    $user="root";
    $password="";
    $database = "nameofyourdb";
}
else {
    // production
    $server="localhost";
    $user="...";
    $password="...";
    $database = "...";
} 
```

小心使用已弃用的 mysql API。例如，您应该转移到 PDO。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T15:00:15.823

正如之前的答案所述，您应该简单地将连接参数移动到非人类可读的文件中（即，如果可能，在您的网络服务器根目录之外）。通过这种方式，您可以安全地存储它们，而不会有外部访问的风险。

然后，将您的文件包含在需要它的每个页面中。例子：

配置.inc.php：

```
<?php
$db['host'] = '127.0.0.1';
$db['user'] = 'user';
$db['pw'] = 'passwd';
$db['name'] = 'dbname'; 
```

你甚至可以在这个文件中获得创意：

```
<?php
// Production settings
$db['host'] = '127.0.0.1';
$db['user'] = 'user';
$db['pw'] = 'passwd';
$db['name'] = 'dbname';

// Test/Sandbox settings
/* 
$db['host'] = '127.0.0.1';
$db['user'] = 'user';
$db['pw'] = 'passwd';
$db['name'] = 'dbname2';
*/ 
```

然后只需在每次切换环境时切换评论。

然后，只需将此文件包含到您需要连接到数据库的页面中：

索引.php：

```
<html><head><tltle>My page</title>
...HTML Code here...
<?php include_once("/path/to/config.inc.php"); // Again, store this file outside the web directory, if possible ?>
<?php mysqli_connect($db['host'],$db['user'],$db['pw'],$db['name']); ?> 
```

# python - 通过 Python 使用 SSH

> ID：15745405
> 
> 赞同：0
> 
> 时间：2013-04-01T14:33:47.943
> 
> 标签：python, ubuntu, ssh, openssh

如何在 python 脚本上运行这个 SSH？

```
ssh gateway@192.168.0.189 'DISPLAY=:0 notify-send "Title" "Description"' 
```

我的 python 脚本将要求一个 raw_input() 用于`Title`，另一个用于`Description`. 然后 python 将运行 SSH 插入`Title`并由`Description`用户键入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T15:11:48.837

```
import subprocess
subprocess.check_call(
    '''ssh gateway@192.168.0.189 'DISPLAY=:0 notify-send "{0}" "{1}"' '''.format(title, description),
    shell=True) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T15:18:26.063

如果您想要更多的控制，您还应该查看 paramiko 库：[https](https://github.com/paramiko/paramiko) ://github.com/paramiko/paramiko这是一个用于 python 的 SSH2 库。

# ajax - 如何使用ajax将来自多页表单的当前输入值存储在cookie中

> ID：15745412
> 
> 赞同：0
> 
> 时间：2013-04-01T14:34:08.743
> 
> 标签：ajax, jquery

我有一个多页表单，我将使用它来捕获数据并将其保存到数据库中。我希望能够完成的是，如果用户决定他们无法完成填写表单，他们可以关闭浏览器，当他们返回站点时，表单将重新填充上一次会话中的值。我知道我将不得不使用 cookie 来完成此操作。如何使用 jquery ajax 做到这一点？我正在使用 joomla3 rsform 组件，不幸的是它们不提供此功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:52:26.717

假设您有 jquery 插件知识。您可以使用 jquery cookie 插件。[http://archive.plugins.jquery.com/project/Cookie](http://archive.plugins.jquery.com/project/Cookie)

并且最好使用`jquery serialize()`

# javascript - 如何在父级底部的图像周围环绕文本

> ID：15745413
> 
> 赞同：2
> 
> 时间：2013-04-01T14:34:11.730
> 
> 标签：javascript, html, css, layout, overflow

当元素位于父元素的底部时，如何使段落文本环绕图像或任何其他元素？

标记：

```
<div class='post'>
   <p class='post-content'>
      Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque imperdiet
      condimentum pulvinar. Pellentesque mattis fringilla dui, sit amet adipiscing augue
      elementum eget. Fusce ut dapibus neque. Quisque mattis lectus ac justo euismod
      luctus. Donec auctor volutpat rhoncus. Duis lacinia sodales sem ut placerat. Donec
      sodales, urna vitae dapibus mattis, turpis velit bibendum enim, in auctor elit neque
      in augue.

      <img src="" style="width:5em; height:5em; float:right;"/>
   </p>
</div> 
```

请假设文本和图像在父 div 中。我想如果你可以将一个元素浮动到右侧和底部会很容易。

我希望它看起来像什么：

```
Lorem ipsum dolor sit amet, consecteturadipiscing elit. Quisque imperdiet
condimentum pulvinar. Pellentesquemattis fringilla dui, sitametadipiscing augue
elementum eget. Fusce ut dapibus neque.Quisque mattis lectus ac justo euismod
luctus. Donec auctor volutpat rhoncus. ______________________________________
Duis lacinia sodales sem ut placerat.  |                                     |
Donec sodales, urna vitae dapibus      |                                     |
mattis, turpis velit bibendum enim,    |                                     |
in auctor elit nequein augue.          |                the image            |
text text asjdjaskd asjkdh aks asdj    |                                     |
sahdahd jas asjksj haskdhsjad sjj      |                                     |
alsja asdajdkj j sjjakks asj h h gs    |                                     |
sss the text is wrapped here text t    |_____________________________________| 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-01T14:37:02.367

Use CSS:

```
align 
```

In the img tag, see this example [image-text-wrap-css-html](http://helpdeskgeek.com/how-to/image-text-wrap-css-html/)

# python - 不同级别的 Python XML 解析

> ID：15745418
> 
> 赞同：3
> 
> 时间：2013-04-01T14:34:30.950
> 
> 标签：python, xml

我正在尝试使用 Python 在不同级别上解析具有相同名称标签的 XML。我通过文档和其他 StackOverflow 答案进行了很多搜索，但找不到合适的解决方案。

XML 如下所示：

```
<configuration>
   <applications>
      <application>
         <name>name1</name>
         <protocol>protocol1</protocol>
         <port>port1</port>
      </application>
      <application>
          .
      </application>
   <application-set>
      <name>appset_name1</name>
      <application>
         <name>appname1</name>
      </application>
   </application-set>
   <application-set>
      .
   </application-set>
   </applications>
</configuration> 
```

我需要从第 3 级的应用程序标记中获取名称、协议和端口，并从第 3 级的应用程序集标记中获取名称和其他应用程序名称（可以在一个简单的列表中）

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T14:58:39.623

使用[ElementTree API](http://docs.python.org/2/library/xml.etree.elementtree.html)，您只需查找`.//application`XPath 即可找到`<application>`任何级别的元素：

```
for application in tree.findall('.//application'):
    name = application.find('name').text
    protocol = application.find('protocol')
    if protocol is not None:
        protocol = protocol.text
    port = application.find('port')
    if port is not None:
        port = port.text 
```

通过指定适用的父级，XPath 表达式也可以找到更具体级别的标记：

```
'.//applications/application'     # any <application> tag below <applications>
'.//application-set/application'  # any <application> tag below <applications>
'./*/*/application'                 # <application> tags with two elements in between 
```

# html - 将结果集从 jsp 转移到 html 页面

> ID：15745426
> 
> 赞同：-1
> 
> 时间：2013-04-01T14:35:04.917
> 
> 标签：html, jsp

我创建了 html 页面，在该页面上提供了登录信息，我使用 .jsp 文件在 mysql 上搜索它，并获得了结果集。从该结果集中，我想通过 jsp 将登录 ID 发送到另一个页面（并且该 html 页面将被加载并具有该登录 ID。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:37:58.750

在这里你可以做

```
<%
    while (rs.next()) {
%>

  //Create you html here

    <div>
         <%=rs.getString(1)%>  
   </div>

  //Html ends here

<%
    }
%> 
```

并参考 this [如何在我的 jsp 中使 Java ResultSet 可用？](https://stackoverflow.com/questions/384189/how-do-i-make-a-java-resultset-available-in-my-jsp)正确的 MVC 结构。

# javascript - 如何检查一个对象是否是跨 V8 上下文的正则表达式？

> ID：15745427
> 
> 赞同：5
> 
> 时间：2013-04-01T14:35:06.520
> 
> 标签：javascript, regex, node.js, v8

我最近[发现](https://github.com/visionmedia/express/issues/1557)，当您在一个 V8 上下文中使用文字正则表达式语法时，`instanceof RegExp`即使您`RegExp`在上下文之间共享全局对象，也会返回 false。

```
var Contextify = require('contextify');
var ctx = Contextify({ RegExp:RegExp, app: anExpressApp });

// When you create a new route, Express checks if the argument is an
// `instanceof RegExp`, and assumes it is a string if not.

ctx.run("
    app.get(new RegExp('...'), function() { ... }); // works because we share the `RegExp` global between contexts
    app.get(/.../, function() { ... }); // does not work
"); 
```

您如何可靠地检查对象是否是`RegExp`跨上下文的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T00:58:10.083

看起来[这个建议](https://stackoverflow.com/questions/15745427/how-do-you-check-if-an-object-is-a-regular-expression-across-v8-contexts#comment22374244_15745427)给了我们最可靠的路线。

```
if (Object.prototype.toString.call(regExp) == '[object RegExp]') ... 
```

这依赖于 的[指定行为`toString`](http://www.ecma-international.org/ecma-262/5.1/#sec-15.2.4.2)，即返回对象的 JavaScript 内部[*[[Class]]*](http://www.ecma-international.org/ecma-262/5.1/#sec-8.6.2)属性（加号`"[object "`和`"]"`）。

由于这是简单的字符串比较，它可以跨上下文工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-13T13:49:02.530

我认为这将确认您有 RegEx 或伪装成 RegEx 的东西。

```
function regExLike(o) {
   return typeof o==='object' && 
          typeof o.global==='boolean' && 
          typeof o.test==='function' ;
} 
```

# html - IE 9 中的 iframe 内容中断

> ID：15745428
> 
> 赞同：0
> 
> 时间：2013-04-01T14:35:06.767
> 
> 标签：html, css, iframe

我正在使用 iframe 来包含内容列表。附件是我在 IE9 中看到的图像。图像和名称之间的间距关闭并且重叠。我尝试了多种方法来解决这个问题。有什么想法或建议吗？

![在此处输入图像描述](https://i.stack.imgur.com/j3nI3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:40:26.820

看起来像一个简单的 CSS 问题。但是在不知道 iframe 中应用了哪些样式的情况下不能多说。

我想这 3 列需要包装在一个宽度设置为正确大小的 div 中，或者 iframe 需要较小。至于文字不能不知道更多细节

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T14:34:11.627

使用滚动 div 可以轻松解决此问题，而不是使用 iframe！我不知道为什么我没有早点想到这个！

# android - android中的简单MVC；将对象传递给活动

> ID：15745430
> 
> 赞同：0
> 
> 时间：2013-04-01T14:35:16.310
> 
> 标签：android, model-view-controller

我最近才开始从事 android 开发工作，我正试图掌握一个我相信的相对简单的概念。先介绍一下这个问题的背景。

我最近使用 MVC 设计模式创建了一个 Java 程序（尽管视图和控制器是链接的）。在这个项目中，我创建了一个自己的类作为模型，并且在我的 main() 函数中，我简单地创建了这个模型类的一个实例，然后我将它传递给我的所有其他类。这允许每个类（因此，每个视图）具有相同的模型对象，因此，由不同的控制器对该模型类进行的所有更新。

我想知道这将如何在 Android 的活动中发挥作用？每个活动是否可以引用相同的单个模型类对象？例如，假设我有一个 android 应用程序，它的主页上有一些东西。在主页上，有一个按钮可以让您转到“设置”页面，该页面会启动一个允许用户更改某些设置的新活动。我希望能够将模型对象传递给“设置”活动，让用户对“设置”活动进行任何可能的更改，相应地更新模型，这样当我返回主页时，我的模型对象包含这些更改。

这可能吗？我只是把事情复杂化了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T14:42:42.313

这取决于模型结构。如果模型太复杂，我会把它变成一个由 Application 类创建的静态单例，并从我想要的任何地方获取引用。

[http://www.devahead.com/blog/2011/06/extending-the-android-application-class-and-dealing-with-singleton/](http://www.devahead.com/blog/2011/06/extending-the-android-application-class-and-dealing-with-singleton/)

或者您可以使模型 Parcelable 并通过意图传递它。这会有点复杂。

要将数据传递给 Activity，您可以在 Intent extras 中使用 Parcelable 或 Serializable。要获取修改后的结果，可以使用 startActivityForResult 和 onActivityResult。

[http://shri.blog.kraya.co.uk/2010/04/26/android-parcel-data-to-pass-between-activities-using-parcelable-classes/](http://shri.blog.kraya.co.uk/2010/04/26/android-parcel-data-to-pass-between-activities-using-parcelable-classes/)

[如何从 TabHost Activity 返回结果（startActivityForResult）？](https://stackoverflow.com/questions/2497205/how-to-return-a-result-startactivityforresult-from-a-tabhost-activity)

[http://developer.android.com/reference/android/os/Parcelable.html](http://developer.android.com/reference/android/os/Parcelable.html)

[http://developer.android.com/reference/android/content/Intent.html](http://developer.android.com/reference/android/content/Intent.html)

# ruby-on-rails - ActiveRecord：更新补丁中的外键

> ID：15745431
> 
> 赞同：0
> 
> 时间：2013-04-01T14:35:19.907
> 
> 标签：ruby-on-rails, activerecord

表：

```
apps:
ID (PK)
name
status_id (FK to status table)

status:
ID(PK)
name

class App < ActiveRecord::Base
    belongs_to :status
end

class Status < ActiveRecord::Base
  has_many :apps
end 
```

我有几个状态。

```
Name       PK
Unreviewed (1)
Reviewed   (2)
Beta       (3) 
```

我想将状态为“Beta”的所有应用程序的状态更改为“未审核”状态。主键是存储在 Apps 表中的内容。但是，我不想只键入 PK，因为它在所有数据库中可能并不完全相同。我想关闭更新的状态名称。

我似乎无法弄清楚如何在 Apps 表上发布 update_all。

试过这个，但它不起作用 App.update_all(:status => 'Tested', :status => 'Beta')

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:52:41.567

试试`App.update_all("appstatus = 'Tested'", "appstatus = 'Beta'")`。第一部分`update_all`是您要设置的内容，第二部分是条件。我不认为使用哈希火箭`update_all`来设置你拥有的值和条件。

**根据更新的问题文本：**

```
App.includes(:status).where("statuses.name = ?", 'Beta').update_all(["apps.status_id = ?", Status.find_by_name('Tested')]) 
```

你也可以做一些事情：

```
testing_status = Status.find_by_name('Testing')
App.update_all(['status_id = ?', testing_status.id], 'status_id = 3') 
```

根据您要执行的操作，我真的建议将状态设置为 App 模型上的字符串。它会让你的生活更轻松。

```
class App < ActiveRecord::Base

  STATUSES = {:testing => 'Testing', :unreviewed => 'Unreviewed', :reviewed => 'Reviewed', :beta => 'Beta']

  # then you can create scopes to help you
  STATUSES.each do |status_type, status_value|
    scope status_type, lambda { where(:status => status_value) }
  end
end 
```

然后，当您要进行批量更新时：

```
App.beta.update_all("status = ?", App::STATUSES[:testing]) 
```

# batch-file - 用于替换文本的批处理文件，或者如果它不存在则写入它

> ID：15745432
> 
> 赞同：1
> 
> 时间：2013-04-01T14:35:21.767
> 
> 标签：batch-file, ini

早上好，

我在试图弄清楚如何处理我正在从事的项目时遇到问题......

基本上发生的事情是我需要进入一个文本文件，查找某个文本字符串（IE ColumnSeparator = Y）并将其更改为ColumnSeparator = N。
如果“ColumnSeparator=Y/N”不存在，我需要写大约 4-5 行文本来将文本部分添加到文件中。追加就好了。

现在，这是棘手的部分。我正在编辑的这个文件是一个在大约 850 台机器上使用的程序文件的配置，每个文件都有点不同，并且取决于 Window XP 和 Windows 7，它们位于 2 个不同的地方。
在 Windows 7 中，它位于：`C:\AS400\s10138fd.ws`但在 Windows XP 中，它位于：`C:\Program Files\IBM\Client Access\Emulator\Private\AS400.ws`

有任何想法吗？？

谢谢！！

这是我需要编辑的 *.ws 文件信息：

```
[Profile]
ID=WS
Description=
Version=9
[Translation]
IBMDefaultView=Y
DefaultView=
IBMDefaultDBCS=Y
DefaultDBCS=
[Communication]
AutoConnect=Y
Link=telnet5250
Session=5250
ForceConfigPanel=N
[Telnet5250]
HostName=S10138fd
Security=Y
HostPortNumber=992
SSLClientAuthentication=Y
CertSelection=AUTOSELECT
AutoReconnect=Y
[5250]
HostCodePage=037-U
PrinterType=IBM3812
[Keyboard]
CuaKeyboard=2
Language=United-States
IBMDefaultKeyboard=N
DefaultKeyboard=C:\AS400\AS400.KMP
[LastExitView]
A=4 1335 -14 896 609 3 13 29 400 0 IBM3270� 37 
```

我需要补充：

```
[Window]
ViewFlags=CE00
RuleLinePos=0 0
ColumnSeparator=N 
```

这是新脚本：

```
if exist "c:\as400\s10138fd.ws" (cd \as400)

copy s10138fd.ws temp.ws
echo [Window]>s10138fd.ws
echo ViewFlags=CE00>>s10138fd.ws
echo RuleLinePos=0 0>>s10138fd.ws
echo ColumnSeparator=N>>s10138fd.ws
type temp.ws >>s10138fd.ws
del temp.ws

) ELSE (cd\program files\ibm\client access\emulator\private)

copy as400.ws temp.ws
echo [Window]>as400.ws
echo ViewFlags=CE00>>as400.ws
echo RuleLinePos=0 0>>as400.ws
echo ColumnSeparator=N>>as400.ws
type temp.ws >>as400.ws
del temp.ws
)
pause 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T18:01:31.110

如果我理解正确，您不需要知道 ColumnSeparator 的原始值，只需将其重置为 N。

使用以下代码保存没有 ColumnSeparator 数据的配置文件副本，其中 configfile 是配置文件：

```
type configfile | find /v "ColumnSeparator" > configfile.tmp 
```

然后使用简单的回显和重定向将 ColumnSeparator 值附加到文件末尾。

```
echo ColumnSeparator=N >> configfile.tmp 
```

然后，您可以删除旧的配置文件，并重命名新创建的（configfile.tmp）以替换旧的...

* * *

这是更新的脚本：

```
type configfile | find /v "[Window]" | find /v "ViewFlags" | find /v "RuleLinePos" | find /v "ColumnSeparator">configfile.tmp

echo [Window]>>configfile.tmp
echo ViewFlags=CE00>>configfile.tmp
echo RuleLinePos=0 0>>configfile.tmp
echo ColumnSeparator=N>>configfile.tmp 
```

这应该可以工作，尽管它需要在一个可以找到所需配置文件的脚本中。该`find /v`命令过滤掉包含所需字符串的行。

* * *

再次更新......（再次）

```
@echo off
setlocal EnableDelayedExpansion
systeminfo | find "OS Name">temp.tmp
for %%a in ('findstr "7" temp.tmp') do set ver=7
if "%ver%" == "7" (
    set file=s10138fd.ws
    set path=C:\AS400\
    )
for %%a in ('findstr "XP" temp.tmp') do set ver=xp
if "%ver%" == "xp" (
    set file=AS400.ws
    set path=C:\Program Files\IBM\Client Access\Emulator\Private\
    )
del temp.tmp
goto find

:find
if not exist "%path%%file%" (
    echo config file does not exist!
    goto end
    )
echo config file exists!
echo proceeding to fix...
goto dumper

:dumper
cd "%path%"
type %file% | find /v "[Window]" | find /v "ViewFlags" | find /v "RuleLinePos" | find /v "ColumnSeparator">configfile.tmp
echo [Window]>>configfile.tmp
echo ViewFlags=CE00>>configfile.tmp
echo RuleLinePos=00>>configfile.tmp
echo ColumnSeparator=N>>configfile.tmp
ren %file% %file%.bk
ren configfile.tmp %file%
echo fixed!
goto end

:end
exit 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T05:38:58.563

所以实际上你只想用批处理脚本有条件地更新一个简单的 INI 文件。

我猜你需要这是一个单文件解决方案，否则（在你的批处理脚本中）你可能会使用类似的东西：

*   [MS 2003 reskit](http://download.microsoft.com/download/8/e/c/8ec3a7d8-05b4-440a-a71e-ca3ee25fe057/rktools.exe)中的 iniman.exe （.NET 控制台，在 PE 上不起作用*）*
*   [inifile](http://www.horstmuc.de/wbat32.htm#inifile) （或任何其他可用的命令行 ini 工具）
*   [NirCmd](http://nircmd.nirsoft.net/)
*   [其他脚本解决方案](http://blogs.technet.com/b/deploymentguys/archive/2010/07/15/reading-and-modifying-ini-files-with-scripts.aspx)

为了完全按照您当前指定的方式进行操作，我为您创建了以下*混合*（批处理/JScript）
（使用一个文件，并且没有临时文件）：

```
@if (0)==(1) REM BatchScript: 
:INIT
 @ECHO OFF & CLS
:MAIN
 cscript //NoLogo //E:JScript "%~f0"
 GOTO ENDBAT
:ENDBAT
 ECHO        Press any key to exit...&PAUSE>NUL
 GOTO :EOF
@end // JScript:

 var TRG = ['C:\\Program Files\\IBM\\Client Access\\Emulator\\Private\\AS400.ws',
            'C:\\AS400\\s10138fd.ws'
           ],
     rxp = /ColumnSeparator=[YN]/i,
     rep = 'ColumnSeparator=N',
     add = ['[Window]',
            'ViewFlags=CE00',
            'RuleLinePos=0 0',
            'ColumnSeparator=N',
            ''  //empty line
           ].join('\r\n'),

     WSO = WScript.stdout,
     FSO = WScript.CreateObject("Scripting.FileSystemObject"),
                                 ForReading=1, ForWriting=2,
       L = TRG.length, ret = '', flg = 1, HND;

 while(L--){
    if( FSO.FileExists(TRG[L]) ){ TRG = TRG[L]; L = ''; break; }
 } 

 if(L === ''){
    WSO.write('FOUND: '+TRG+'\r\nWorking...\r\n');
    HND=FSO.OpenTextFile(TRG, ForReading);
    while(!HND.AtEndOfStream){
       L=HND.ReadLine();
       if( rxp.test(L) ){ L = L.replace(rxp,rep); flg = 0; }
       ret+= L+'\r\n';
    }  HND.Close();

    if(flg){ ret= ret.replace(/(\r\n)*$/,'\r\n')+add; }

    HND=FSO.OpenTextFile(TRG, ForWriting);
    HND.Write(ret);  HND.Close();

    WSO.write('\r\nDONE!!!\r\n');
 } else {
    WSO.write('ERROR: no file found\r\n');
 } 
```

**笔记：**

*   不要忘记脚本末尾的空行（可以肯定）并将其命名为' `yourExtCommand.bat`'。
*   这个脚本在 W98、W2k、XP/2003、Vista 和 Windows 7（还没有 8，但无论如何都在使用它......）上经过了彻底的测试（包括 JSLint），它就像一个魅力！
*   此脚本使用 ini 文件本身的位置作为您的“操作系统检测”，因为您指定：
    ' *Windows 7 它位于：C:\AS400\s10138fd.ws 在 Windows XP 中，它位于：C:\Program Files\IBM\Client Access\Emulator\Private\AS400.ws* '
    ，因此它将更新它找到的第一个文件（这应该是系统上唯一的文件）*从 win7 开始（'巧妙地'避免对受保护的不必要的访问%programfiles% 目录和触发 UAC）*。
*   将 'ColumnSeparator=N' 更改为 'ColumnSeparator=N' 也不是问题，对吧？
    脚本这样做是为了简单起见，因为您指定：'*如果“ColumnSeparator=Y/N”不存在，我需要编写约 4-5 行文本以将文本部分添加到文件中*', '*附加它们到文件的末尾*' 和 '*查找某个文本字符串 (IE ColumnSeparator=Y) 并将其更改为 ColumnSeparator=N* '
*   REM/删除整`...Press any key to...`行以使其在无人值守的情况下运行。
*   更新了脚本以巧妙地处理尾随空白行，通过`add`变量对其进行控制。
*   如果您想在添加的部分之前有一个空行，请将行更改  `add = ['[Window]',`
    为  `add = ['', '[Window]',`（例如）

* * *

最后我想指出（部分是为了我自己），[显然](http://www.experts-exchange.com/Programming/Languages/Scripting/Shell/Batch/Q_26696202.html)可以使用`inf`文件来更新/修改ini文件，方法是：

*   `RUNDLL32.EXE SETUPAPI.DLL,InstallHinfSection DefaultInstall 128 c:\temp\test.inf`    （据说“更好”？）

或者

*   `RUNDLL32 SETUPX.DLL,LaunchHinfSection DefaultInstall 132 test.inf`

（都从批处理脚本中调用）。

inf 文件也可以从批处理脚本/JScript/VBScript 中回显或写入。

这些 inf 文件可能如下所示：

```
[version]
signature="$CHICAGO$"

[DefaultInstall]
UpdateInis=IniVal

[IniVal]
"C:\temp\whatever.ini",YourSection,"Something=OldValue","Something=NewValue",0 
```

或者：

```
[Version]
Signature="$CHICAGO$"

[DefaultInstall]
UpdateINIs=Sys.Ini

[Sys.Ini]
System.ini,ReplaceMeWithAppropriateSection,,”MinPs=32” 
```

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T19:20:01.267

这是我能够开始工作的新脚本！！！

```
c:
cd \as400
SETLOCAL EnableDelayedExpansion
for /f "tokens=*" %%x in ('dir /b/s/a-d *.ws') do ( 
copy %%x temp.txt
del %%x
Echo [Window]>%%x
Echo ViewFlags=CE00>>%%x
Echo RuleLinePos=0 0 >>%%x
Echo ColumnSeparator=N>>%%x
type temp.txt>>%%x
del temp.txt
)
else (
c:
cd \users
SETLOCAL EnableDelayedExpansion
for /f "tokens=*" %%x in ('dir /b/s/a-d *.ws') do ( 
copy %%x temp.txt
del %%x
Echo [Window]>%%x
Echo ViewFlags=CE00>>%%x
Echo RuleLinePos=0 0 >>%%x
Echo ColumnSeparator=N>>%%x
type temp.txt>>%%x
)
else (
c:
cd \"Documents and Settings"
SETLOCAL EnableDelayedExpansion
for /f "tokens=*" %%x in ('dir /b/s/a-d *.ws') do ( 
copy %%x temp.txt
del %%x
Echo [Window]>%%x
Echo ViewFlags=CE00>>%%x
Echo RuleLinePos=0 0 >>%%x
Echo ColumnSeparator=N>>%%x
type temp.txt>>%%x
del temp.txt
) 
```

# javascript - 在更改语言时更改 div 的所有元素（html）？

> ID：15745435
> 
> 赞同：1
> 
> 时间：2013-04-01T14:35:36.263
> 
> 标签：javascript, jquery

我的页面上有一个下拉菜单，其中包含语言选择器选项。在选择语言时，我希望我的标签和按钮 html 根据语言进行更改？ **我的代码**

```
var arr = [];
    //  gets all the ids starting with comp_
    $('div[id^="comp_"]').each(function(){
        arr.push(this.id);
        labels = $(this).find('label');
        buttons = $(this).find('button');

        //get all labels inside the current div
        $(labels,buttons).each(function(){
            $(this).html("");
        });

    });
    console.log(arr);
}, 
```

**问题 ** 它只更改标签元素引用而不是按钮引用。我可以在多个元素引用上运行该功能吗？

**如果我这样做，它可以工作，但我不想为不同的引用再次重复相同的代码**

```
 var arr = [];
    //  gets all the ids starting with comp_
    $('div[id^="comp_"]').each(function(){
        arr.push(this.id);
        labels = $(this).find('label');
        buttons = $(this).find('button');

        //get all labels inside the current div
        $(labels).each(function(){
            $(this).html("");
        });

        $(buttons).each(function(){
            $(this).html("");
        });

    });
    console.log(arr);
}, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T14:37:05.260

是的：

```
 labels.add(buttons).each(function(){
        $(this).html("");
    }); 
```

要不就：

```
 labels.add(buttons).html(''); 
```

缩短一个字符：

```
 labels.add(buttons).empty(); 
```

jQuery 方法用于将`.add()`元素添加到现有的 jQuery 集合中。这些示例用于`.add()`组合“标签”和“按钮”jQuery 对象中的元素。`.each()`后两个表示如果您对每个元素做一些不变的事情，则不需要。大多数 jQuery 函数本质上对集合的每个元素进行操作。

完全不同的简化方式：

```
 var labelsAndButtons = $(this).find('label, button');
    labelsAndButtons.empty(); 
```

选择器`,`字符串中的 就像“或”。该示例查找标签名称为“label”**或**“button”的所有元素。

# spring.net - Spring Framework .Net 2.0 有发布日期吗？

> ID：15745443
> 
> 赞同：6
> 
> 时间：2013-04-01T14:35:58.380
> 
> 标签：spring.net

我已经在 Spring.Net 论坛上发布了这个问题，但是我在那里看到的活动很少。看来 2.0 的发布已经停在 M2 上了。有人知道2.0 GA版本是否会发布吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-16T19:43:59.900

结束这个问题，因为我确实通过 VMware Support Request 13313469304 收到了来自 VMWare 的回复：

“得到了工程部门的反馈。该项目仍在进行中——工程部门的目标是在 2013 年第四季度发布 Spring .Net 2.0。”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-04T16:43:24.313

我不认为这仍然是真的。我认为当 VMWare/EMC 将 SpringFramework 项目移至 Pivotal 时 - [http://blogs.vmware.com/vmware/2012/12/the-pivotal-initiative.html](http://blogs.vmware.com/vmware/2012/12/the-pivotal-initiative.html) - 他们决定只专注于 Java 并抛弃 SpringFrameWork.net项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-28T08:35:07.127

Spring Framework .NET 2.0 已发布，可在 NuGet 上使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-01T13:48:37.867

Spring framework.net 2.0 终于发布了。

[https://github.com/spring-projects/spring-net/releases/tag/spring-net-2.0.0-GA](https://github.com/spring-projects/spring-net/releases/tag/spring-net-2.0.0-GA)

# f# - F# 查询与 C# LINQ

> ID：15745449
> 
> 赞同：5
> 
> 时间：2013-04-01T14:36:25.313
> 
> 标签：f#

与 C# 相比，这个问题更多地与 F# 的冗长和不太清晰有关。一个相对较小的问题，但随着我编写的数据库查询越多，这个问题就变得非常烦人。

在 C# 中，我可以使用 LINQ 和实体框架执行以下操作：

```
 var q = (from row in db.LAYERS
          where row.LIST1.Field1 == PARAM
          select new MyClass( row.field1, row.field2, row.field3, row.field4)).ToList() 
```

重点在这里，我只是在查询本身内构建一个新的类列表。而在 F# 中这似乎不起作用，为了获得相同的结果，我正在做这样的事情：

```
 query { for row in db.LAYERS do 
        where (row.LIST1.Field1 = PARAM)
        select row.field1, row.field2, row.field3, row.field4 } 
        |> Seq.map (fun row -> new MyClass(row.field1, row.field2, row.field3, row.field4) 
```

F# 要求我对查询序列进行映射以获取我想要的列表。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T16:04:37.057

尽管您没有提供无法编译的代码，但我猜您只需要将对象创建表达式放在括号中：

```
query { for row in db.LAYERS do 
        where (row.LIST1.Field1 = PARAM)
        select (new MyClass(row.field1, row.field2, row.field3, row.field4)) } 
```

# dll - Sharing dll in visual studio project templates

> ID：15745455
> 
> 赞同：2
> 
> 时间：2013-04-01T14:36:55.947
> 
> 标签：dll, visual-studio-2012, project-template

I am working on multi project templates having one web application, 5 class library projects exported from VS2012.

We have custom framework dll(xxx.dll) thats need to referred in all the 6 project templates.

I would like to have a common folder where i can put xxxx.dll and refer in all the projects, same way we get nuget references by package id.

I went through the link [Packages in Visual Studio Templates](http://docs.nuget.org/docs/reference/packages-in-visual-studio-templates). It has details how to get nuget references in vs templates.

Any suggestion would help.

# python - python library for identifying article topic

> ID：15745457
> 
> 赞同：2
> 
> 时间：2013-04-01T14:37:03.207
> 
> 标签：python, statistics, nlp, identifier, corpus

I have a large collection of articles, 80.000 and I want to extract those that are about one topic. Is there a python library or script in which i can input a manually chosen sample of articles about say Topic A then it would extract from the archive those articles about topic A by comparing the word used and their frequencies.

I have read about the Dunning method, but is there a ready script that I can use preferably python.

Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T15:07:33.033

查看 Natural Language Toolkit ( [http://nltk.org](http://nltk.org) )，这是一个出色的 Python 库，用于处理和提取自然语言语料库（如您的文章集）的含义。此外，根据您还想做什么，我推荐 scikit-learn 库 ( [http://scikit-learn.org/](http://scikit-learn.org/) ) 用于提取文本的其他机器学习任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:28:45.590

让我正式提出我的建议，即使只是为了后代。

0.) 据我所知，没有任何东西可以满足您开箱即用的所有要求，而且您可以免费获得。要付费，请搜索“谷歌企业搜索”。

[1.) 使用弹性搜索](http://www.elasticsearch.org)使用 JSON 索引您的文档。设置起来非常容易。弹性搜索有很多补救搜索功能，它们不会直接解决您的问题，但可以让您在尝试构建自己的搜索引擎时进行简单的关键字搜索。

2.) 要按主题搜索，您必须编写学习程序。一个非常简单的，实际上是解决您的问题的一个很好的起点，就[在这里](http://scikit-learn.org/dev/auto_examples/text/document_classification_20newsgroups.html#sphx-glr-auto-examples-text-document-classification-20newsgroups-py)。该示例将为您提供一个起点。

# axapta - 如何在 ax 2009 中控制临时表上的重复行？

> ID：15745462
> 
> 赞同：2
> 
> 时间：2013-04-01T14:37:27.420
> 
> 标签：axapta, dynamics-ax-2009, x++

我在一段时间选择查询中将记录插入临时表。我需要控制如果我之前添加了记录，可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T07:00:17.817

只要你有一个唯一的索引，[你就可以发现问题](http://msdax.wordpress.com/2009/04/04/how-to-catch-system-exception-of-duplicate-records-found-and-show-own-message/)：

```
SysInfoLogLevel prevLevel = infolog.infologLevel()
try 
{
    infolog.setInfoLogLevel(SysInfoLogLevel::None);
    whatever.insert();
    infolog.setInfoLogLevel(prevLevel); 
}
catch (Exception::DuplicateKeyException)
{
    infolog.setInfoLogLevel(prevLevel); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T15:28:18.030

只需在调用插入过程之前检查记录。

```
//Build query above
while (qr.next())
{
    SourceTable = qr.get(tablenum(SourceTable));

    select DestTable
        where DestTable.Field1 == SourceTable.Field1; //Replace with criteria that determines if records are the same

    if (!DestTable)
    {
        DestTable.Field1 = SourceTable.Field1;
        DestTable.Field2 = SourceTable.Field2;
        DestTable.Field3 = SourceTable.Field3;
        DestTable.Insert();
    }

}

//Once processing is finished
if (element.prompt())
{
    while select DestTable            
    {
        element.send(DestTable);
    }
}
else
{
    return false;
} 
```

基本上，尝试选择与插入内容匹配的记录。如果没有返回记录，则插入它。否则它只会进入下一条记录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T12:35:12.520

在相同类型的第二个缓冲区上使用 setTmpData 方法

例子：

```
SomeTable someTable;
TmpTable  tmpTable;
TmpTable  tmpTableCheck;

// Use tmpTable as primary data set, and tmpTableCheck to check for duplicates
while select someTable
{
     tmpTable.initFromSomeTable(someTable);

     // Check if key is already used.
     tmpTableCheck.setTmpData(tmpTable);
     select firstOnly tmpTableCheck
         where tmpTableCheck.Key == tmpTable.Key;

     // Only insert record in tmpTable if the key has not been used before.
     if (! tmpTableCheck)
     {
          tmpTable.insert();
     }
 } 
```

# vba - VBA：对 DOMDocument 的 HTML 响应

> ID：15745463
> 
> 赞同：2
> 
> 时间：2013-04-01T14:37:30.697
> 
> 标签：vba, dom, xpath

我正在尝试自动解析网站（例如[http://www.delhaizedirect.be/nl/Search/Duvel](http://www.delhaizedirect.be/nl/Search/Duvel)并获取 VBA 列表中第一项的价格。因此，我得到了 HTML，效果很好 但是当我将 HTML 解析为 DOMDocument 并应用 XPath 查询时，我没有得到任何结果。

这是我正在使用的代码：

```
Public Function zoekDelhaizePrijs(Artikel As String)

Dim URL As String
URL = "http://www.delhaizedirect.be/nl/Search/" + Artikel

Dim website As Object
Set website = CreateObject("MSXML2.ServerXMLHTTP.6.0")

Call website.Open("GET", URL, False)
Call website.Send("")

Dim XPathQuery As String
XPathQuery = "/html/body/div[1]/div[3]/div[1]/div[1]/div[3]/ul/div[1]/div/div[2]/p[1]"

Dim dom As DOMDocument60
Set dom = New DOMDocument60
dom.async = False

dom.validateOnParse = False

'Debug.Print website.responseText

dom.LoadXML website.responseText
dom.setProperty "SelectionLanguage", "XPath"

Dim node As IXMLDOMNodeList
Set node = dom.SelectNodes(XPathQuery)

Dim title As IXMLDOMNode

For Each title In node
    Debug.Print title.Text
Next

End Function 
```

有谁有想法吗？

在此先感谢，汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T01:57:54.153

尽管页面顶部的 DOCTYPE 将其声明为“XHTML 1.0 Transitional”，但为“Duvel”查询返回的页面甚至不是格式良好的 XML。因此，它无法解析为 DOMDocument60 对象，因此不返回任何节点。即使您已设置`validateOnParse=False`，这也不会消除文档是格式良好的 XML 的要求。

您可以将来自网站的响应加载到字符串中，然后手动将其更正为格式正确的 XML，然后再将其加载到 DOMDocument60。这可能需要一些时间，因为您需要解决问题、运行您的函数，然后检查 的属性`dom.parseError`以找到下一个问题。

XHTML 文档的问题包括：

*   `&`未被`&amp;`实体替换的字符 - 例如`value="/nl/Search/Duvel?NB_REPLY=20&brand=Delhaize&page=1"`，而不是`value="/nl/Search/Duvel?NB_REPLY=20&amp;brand=Delhaize&amp;page=1"`
*   没有值的属性 - 例如`<option selected value="/nl/Search/Duvel?NB_REPLY=20&page=1">`，而不是`<option selected="selected" value="/nl/Search/Duvel?NB_REPLY=20&page=1">`
*   标签未关闭 - 例如`<div><p></p><p></p><p><span><span></span></span></div>`（缺少`</p>`）

还有一些特定的 MSXML2 问题。在 DOMDocument60 中默认禁止 DTD，因此`dom.setProperty "ProhibitDTD", False`在尝试加载 XML 之前需要。

您的 XPath 查询也可能与 MSXML2 的默认命名空间问题发生冲突 - 请参见[此处](http://support.microsoft.com/kb/313372)（该链接指的是 MXSML 4.0，但问题仍然存在于 MSXML 6.0 中）。由于页面具有默认命名空间`xmlns="http://www.w3.org/1999/xhtml"`，您需要：

*   声明与该命名空间对应的命名空间前缀`dom.setProperty "SelectionNamespaces", "xmlns:r='http://www.w3.org/1999/xhtml'"`和
*   在 XPath 查询中使用它`XPathQuery = "/r:html/r:body/r:div[1]/r:div[3]/r:div[1]/r:div[1]/r:div[3]/r:ul/r:div[1]/r:div/r:div[2]/r:p[1]"`

或者，您可以尝试将来自网站的响应加载到 HTMLDocument 中，并使用诸如`getElementsByClassName`定位所需数据之类的方法。在这种情况下，不需要文档是格式良好的 XML

这些是我需要进行的替换，以使 Duvel 页面正常工作。该站点上的其他页面可能需要一组不同的替换。我不会声称这类似于最佳实践，但它适用于这一特定页面。标准实体（加号`&nbsp;`）被临时重命名以允许`&`替换文档中的不正确字符。`&nbsp;`替换为等效的数字：

```
Dim webResponse As String
webResponse = website.responseText
webResponse = Replace(webResponse, "&nbsp;", "^nbsp;")
webResponse = Replace(webResponse, "&amp;", "^amp;")
webResponse = Replace(webResponse, "&lt;", "^lt;")
webResponse = Replace(webResponse, "&gt;", "^gt;")
webResponse = Replace(webResponse, "&quot;", "^quot;")
webResponse = Replace(webResponse, "&apos;", "^apos;")

webResponse = Replace(webResponse, "&", "&amp;")

webResponse = Replace(webResponse, "^nbsp;", "&#160;")
webResponse = Replace(webResponse, "^amp;", "&amp;")
webResponse = Replace(webResponse, "^lt;", "&lt;")
webResponse = Replace(webResponse, "^gt;", "&gt;")
webResponse = Replace(webResponse, "^quot;", "&quot;")
webResponse = Replace(webResponse, "^apos;", "&apos;")

webResponse = Replace(webResponse, "<option selected ", "<option selected=" & Chr$(34) & "selected" & Chr$(34) & " ")
webResponse = Replace(webResponse, " style=>", " style=" & Chr$(34) & Chr$(34) & ">")
webResponse = Replace(webResponse, "]]&gt;", "]]>")
webResponse = Replace(webResponse, "<span>prijs</span></span>", "<span>prijs</span></span></p>") 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-01T15:34:16.247

这对我有用：

```
//div[@class="displayProdList"][1]//p[@class="prodListPrice"] 
```

# c# - How does ASP.NET WebSecurity Authentication manages SQL Server connections?

> ID：15745466
> 
> 赞同：1
> 
> 时间：2013-04-01T14:37:34.730
> 
> 标签：c#, asp.net, asp.net-mvc, connection, security

I already have a EF Context in my ASP.NET MVC project. If I use WebSecurity I have these questions in my mind about its connection management to SQL Server .

*   Does it use same connection with my EF model for that request? (I think not)
*   Does it create another connection for every request? If so I will have two connections, one for EF the other for WebSecurity.
*   If it use only one connection (since it can be placed into the Application_Start()), what if there are many users surfing the web at the same time? Will it lock other user requests and create a slowness?
*   Does it make a check from database when it sees [Authorize] attribute on every request? (That makes like all pages where users need to be logged in.)

I would really appreciate about its internal mechanisms.

Note: **Please ignore connection pooling** unless WebMatrix/WebSecurity has an internal connection pooling.

Thanks.

# jquery - 循环遍历具有特定类的 div 中的所有输入

> ID：15745467
> 
> 赞同：1
> 
> 时间：2013-04-01T14:37:39.277
> 
> 标签：jquery

```
<script language="javascript" type="text/javascript" src="jquery-1.6.js"></script>

<script>

    $('.disabledForm').each(function(i, div) {
    alert('in here');
    $(div).find('input').each(function(j, element){
        $(element).attr('disabled','disabled');
    });
    });
</script>

<div id="divDisabled" class="disabledForm">
            <label>Disabled Input 1&nbsp;<input type="text" id="disabledInput1" name="disabledInput1" /></label>
            <br />
            <label>Disabled Input 2&nbsp;<input type="text" id="disabledInput2" name="disabledInput2" /></label>
        </div> 
```

永远不会看到“在这里”消息，并且我的输入永远不会被禁用，所以我认为我做错了什么。有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T14:39:04.313

您必须将代码包装在一个`$(function(){ ... })`块中，以便让它看到整个 DOM。

```
<script>
$(function(){ 

    //your js code here

});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T16:16:17.677

```
$(document).ready(function()
{
    $('.disabledForm').each(function(i, div) {
        alert('in here');
        $(div).find('input').each(function(j, element)
        {
            $(element).attr('disabled','disabled');
        });
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T14:44:38.527

您应该将您的函数包装在 $(document).ready(function() { 'Your method in here' } 周围。

# c - Code for checking prime number giving segmentation fault

> ID：15745475
> 
> 赞同：0
> 
> 时间：2013-04-01T14:38:24.483
> 
> 标签：c

I have written the following code to check if a number is prime. I know that there are other, maybe better ways of doing i, but I just want to know what is wrong with this method. It is correctly identifying whether the number is prime or not, but in case i is prime, it is giving a segmentation error.

The code:

```
#include<stdio.h>
void prime(int);
int main()
{
    int a;
    printf("Enter number\n");
    scanf("%d",&a);
    prime(a);
    return 0;
}

void prime(int a)
{
    static int k=2;
    if((a%k==0)&&(a!=k))
        printf("Not a prime\n");
    else
    {
        k++;                   
        if(a==k)
            printf("Prime\n");     
        prime(a);
    }
} 
```

Note: On trying to revise the code, I found that it makes no difference if you use a==k or k==a-1 in the else condition.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T14:40:47.307

首先，你的递归永远不会停止。

其次，`static`国家是一个非常糟糕的主意。它使代码难以测试并且不是线程安全的。更糟糕的是，如果你`prime()`第二次调用，它仍然会保持第一次调用的状态。

最后，这里完全不需要递归，可以简单地将其转换为迭代。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-01T14:39:23.973

无限递归 -> 堆栈溢出。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-01T14:40:49.057

在主要情况下，您的代码永远不会退出。你需要：

```
if (a==k)
    printf("Prime\n");     
else
    prime(a); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T14:44:57.767

```
 if(a==k)
        printf("Prime\n"); /* Q: What happens after you find it to be prime? */
    prime(a);              /* A: You test it for primeness again..? */ 
```

我想你的意思是：

```
 if(a==k)
        printf("Prime\n");
    else
        prime(a); 
```

# jquery - nesting an literal tag with an html vs nesting the literal in an

> ID：15745485
> 
> 赞同：0
> 
> 时间：2013-04-01T14:38:46.270
> 
> 标签：jquery, asp.net, html

I have an existing code base and in some parts of the code the developer chose to surround the asp.net literal tag by an asp.net panel tag. But in other parts of the code the developer chose to surround the asp.net literal tag with the html div tag. In both cases, the literal tag is a place holder for the errors message displays. I am not sure why one would be chosen over the other.

Below are the examples:

```
<div class="shadowContent">
                                    <div class="errorLabel" id="divErrorMsg" style="display:none">
                                    <asp:Literal runat="server" ID="litError12" Text="Enter required fields." />
                                </div> 
```

VS

```
 <asp:panel runat="server" class="errorLabel" ID="pnlError1" Visible="false">
                            <asp:Literal runat="server" ID="literal1" />
                         </asp:panel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:43:53.570

如果我必须修改服务器端的 div，我会使用 asp.net 面板，否则我会选择一个好的 ol div

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T14:45:03.170

呈现的 HTML 有区别吗？最终 a`Panel`只是将 a 呈现`div`给客户端。如果不需要`div`在服务器端上下文中引用它，那么使用纯文本`div`可能会带来更好的性能，因此开发人员可能更喜欢它。

但是，如果需要引用`div`服务器端代码（可能使其可见或不可见），则 a`Panel`将允许这样做。就像服务器端`div`控件一样：

```
<div runat="server" ID="pnlError1"> 
```

这些选项之间几乎没有区别，只是更容易维护并且在代码中更有意义的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T14:45:50.857

如果您使用 a`Panel`并将其`Visible`属性设置为`false`，则根本不会`<div>`呈现任何元素。相反，如果您使用 a`<div>`和 set `style="display:none"`，则会有一个隐藏`<div>`元素，您可以通过客户端 JavaScript 使其可见。

# android - ListView 显示错误

> ID：15745486
> 
> 赞同：1
> 
> 时间：2013-04-01T14:38:47.353
> 
> 标签：android, listview

我的应用程序使用一个按钮，单击该按钮会转到显示列表视图的新活动。所有这些似乎都运行良好。但是列表视图显示在与按钮相同的活动之上。它不单独显示。所以我看到了后台的主要活动和重叠的列表视图！这个问题能解决吗？我的代码如下： Button CLick 事件：

```
view.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent i = new Intent(Assignments.this, ViewEntry.class);
            startActivity(i);
        }
    }); 
```

和列表视图代码：

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    //setContentView(R.layout.database_view);
    //ListView lv = (ListView)findViewById(R.id.listView1);
    dbControl = new DatabaseControl(ViewEntry.this);
    dbControl.open();
    ArrayList<String> data = dbControl.getData();
    if (data.equals(null)) {
        Toast.makeText(ViewEntry.this, "Database Empty!", Toast.LENGTH_LONG)
                .show();
    } else {
        final Dialog notice = new Dialog(this);
        final TextView msgbox = new TextView(this);
        //ArrayAdapter<String> arrayAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,data);
        setListAdapter(new ArrayAdapter<String>(ViewEntry.this,
                android.R.layout.simple_list_item_1, data));
        final ListView listView = getListView();
        //lv.setAdapter(arrayAdapter);
        //lv.setTextFilterEnabled(true);
    }
} 
```

我的xml代码如下。但我不认为这有什么不同，因为我没有使用过`setContentView`. 使用`setContentView(R.layout.database_view);`返回调试错误。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:layout_gravity="center_horizontal"
android:background="#000000"
android:fadingEdge="vertical"
android:orientation="vertical" >

<ListView
    android:id="@+id/listView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true">
</ListView>

<TextView 
    android:id="@+id/textViewDatabase"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text=""/> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T14:42:18.797

将第二个活动布局的背景颜色更改为不透明。当您启动第二个 Activity 时，第一个 Activity 会暂停并进入后台，但仍然存在，就像显示对话框时一样。

**编辑：**

Activity 默认不透明，请检查您是否在 styles.xml 中正确定义了 appTheme，并确保您没有在样式中的任何地方使用 android:theme="@android:style/Theme.Translucent" 或 "#00XXXXXX" 颜色或清单文件。

如果样式一切正常，那么我不知道为什么您的 ListActivity 仍然是透明的，但是您可以通过将以下布局设置为 contentView 来更改它：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/ad_catalog_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#888888" <!-- example non-transparent color -->
    android:orientation="vertical" >

    <ListView
        android:id="@android:id/list" <!-- has to be @android:id/list for ListActivity -->
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
    </ListView>

</LinearLayout> 
```

或通过设置 ListView 背景颜色：

```
getListView().setBackgroundColor(Color.rgb(xxx, xxx, xxx)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:13:27.910

而不是使用透明背景颜色尝试使用非透明颜色

试试下面的代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_gravity="center_horizontal"
android:background="#b3b3b3"
android:fadingEdge="vertical"
android:orientation="vertical" > 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-01T15:13:55.410

使用 Intent 转到另一个活动并在新活动中创建一个列表视图本身。使用按钮触发意图。

# ruby-on-rails - 在 after_save 回调中使用 `self` 对象时出错

> ID：15745490
> 
> 赞同：1
> 
> 时间：2013-04-01T14:39:10.420
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, conditional-statements

我有两张桌子：**People**和**Car**：

*   `Person has_many cars`
*   `Car belongs_to person`.

`license_plate`我想在汽车更换时向该人发送电子邮件。

我已成功制作邮件代码，但在回调中设置`if`条件时遇到问题。`after_save`

```
#Inside Person models
after_save :send_mail_notification, if: (self.cars.first.order('updated_at DESC').changed?)

def send_mail_notification(person)
    ...
end 
```

我收到了这个错误

```
NoMethodError: undefined method `cars' for #<Class:0x4852ba8> 
```

所以，我想`self`在回调中不可用？有什么解决办法吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T14:45:54.177

```
after_save :send_mail_notification, if: Proc.new { |model| model.cars.order('updated_at DESC').first.changed? } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T14:46:42.900

将其移入方法中？

```
after_save :send_mail_notification

def send_mail_notification(person)
    if (person.cars.first.order('updated_at DESC').changed?
      ..
    end
end 
```

# javascript - 在android上的样式选择上触发默认事件

> ID：15745491
> 
> 赞同：1
> 
> 时间：2013-04-01T14:39:11.610
> 
> 标签：javascript, android, google-chrome, mobile

我在选择框上有一个自定义包装器。当我单击它时，我想显示来自 android 的本机选择。我尝试在隐藏的选择上触发“焦点”、“单击”和“鼠标输入”，但这些选项都不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T19:36:56.670

好的，所以我在经过大量修改后创建了一个小提琴并且它起作用了（结果只是 webkit）。如果有人提出更好的解决方案，将不胜感激。

HTML

```
<button id="clickme" value="click me!">Click me!</button>
<select id="select">
    <option>Default</option>
    <option value="1">1</option>
    <option value="2">2</option>
</select> 
```

jQuery

```
var clickme = jQuery("#clickme"),
    select = jQuery("#select");
clickme.on("mousedown", function (e) {
    proxyMouseEvent(e, select[0]);
});
clickme.on("click", function (e) {
    proxyMouseEvent(e, select[0]);
});
function proxyMouseEvent(event, element) {
    var evt = document.createEvent("MouseEvents");
    evt.initMouseEvent(event.type, event.bubbles, event.cancelable, window,
        0, 0, 0, 0, 0, false, false, false, false, 0, null);
    element.dispatchEvent(evt);
} 
```

[jsFiddle](http://jsfiddle.net/dwSvU/8/)

基本上，我从按钮中捕获事件，复制它并将其发送到选择。当 select 检测到自身的 mousedown 事件时，它会触发其默认行为（在桌面操作系统中显示下拉列表，而在移动设备中显示覆盖列表）

# html - css中的字符串连接

> ID：15745492
> 
> 赞同：35
> 
> 时间：2013-04-01T14:39:13.503
> 
> 标签：html, css

我想在 css 中实现以下目标。我如何以适用于 IE8+ 的方式进行操作

```
url('../img/icons/' + attr('type') + '_10.png') 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-01T14:41:37.277

我不认为你可以。在该`content`属性中，您只需用空格分隔即可“连接”，但在其他地方我认为没有这样的功能。这是一种耻辱。

`style`每当使用属性时，您最好在属性中指定此样式`type`。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2017-05-13T00:28:56.843

CSS 在不使用任何运算符（例如 +、& 等）的情况下执行**连接。**将字符串放在引号中，将字符串、attr、var 等组合成一行。

例子：

*   `url('not/very' '/useful/concatenation'); // not/very/useful/concatentation`
*   `url('../img/icons/' attr('type') '_10.png'); //../img/icons/${type}_10.png`
*   `url(attr('href') '#hash'); // https://${href}/#hash`
*   `url(var(--hello) ' world'); // Hello World`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-01T14:43:15.110

不，你不能在纯 CSS 中做到这一点，因为 CSS 语言没有控制结构或任何类似的东西，它可以让你动态地生成 CSS 代码。

相反，您可以使用 javascript 解决方案或基于 PHP 编码的 CSS 变量的解决方案。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-01T14:47:46.680

您不能按照建议的方式进行动态字符串插值，但如果`[type]`属性的可能值数量有限，则可以为每个值创建样式：

```
.your .selector[type="foo"] {
    background-image: url('../img/icons/foo_10.png');
}
.your .selector[type="bar"] {
    background-image: url('../img/icons/bar_10.png');
}
.your .selector[type="baz"] {
    background-image: url('../img/icons/baz_10.png');
} 
```

如果您的类型数量不合理，那么您可能需要提出比我在此处列出的更好的解决方案。

# cocoa - 适用于 Mac App Store 的 Package Automator Action

> ID：15745493
> 
> 赞同：2
> 
> 时间：2013-04-01T14:39:14.330
> 
> 标签：cocoa, automator, mac-app-store

我想在 Mac App Store 上出售我的 Cocoa Automator Action。

我看到其他一些开发人员出售一个常规应用程序，然后将操作安装到 Automator 中。我需要做什么才能离开我的沙盒并安装操作？

请参阅此操作安装应用程序：[https ://itunes.apple.com/us/app/file-folder-automator-action/id479445983?mt=12](https://itunes.apple.com/us/app/file-folder-automator-action/id479445983?mt=12)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T19:14:55.537

无需安装——Automator 会发现应用程序中嵌入的操作。只需将它们放在 MyApp.app/Contents/Library/Automator/ 中，剩下的就交给系统了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T21:26:37.737

通常，动作存储在应用程序内部，并且在安装应用程序时，动作会自动安装到“正确的位置”。

我读到有时您必须更改应用程序的名称，然后再将其更改回以安装其操作。

这是一个关于一般安装操作的链接：http: [//automator.us/developer-03.html](http://automator.us/developer-03.html)

我猜如果用户只是下载您的应用程序，则可能不会安装这些操作。最好使用 PackageMaker.app 制作安装程序来安装您的应用程序，然后，我想在安装应用程序时，应用程序内部的操作会发生“正确的事情”。

# java - 字符串数组计算

> ID：15745494
> 
> 赞同：0
> 
> 时间：2013-04-01T14:39:19.800
> 
> 标签：java, jakarta-ee, arrays

我有一个字符串数组

```
String[] resultYears = {"2013/07", "2013/08", "2013/09", "2013/10", "2013/11", "2013/12", "2014/01"}; 
```

当我通过我的jsp中的响应得到这个时，

```
<% String[] resultYears = (String[]) request.getAttribute("resultYears");%> 
```

我得到了他们各自价值的剩余部分。我怎样才能得到与上面的字符串值相同的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T14:57:36.143

在您的 JAVA 类中尝试这种方式

```
String[] resultYears = {"'2013/07'", "'2013/08'", "'2013/09'", "'2013/10'", "'2013/11'", "'2013/12'", "'2014/01'"};
request.setAttribute("resultYears", resultYears); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T14:51:07.713

尝试使用像这样的单引号的字符串

```
"'2013/08'" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T14:59:44.047

如何用所需的 YYYY/MM 实例化一个 Date 对象并对其执行 .getTime() ，然后通过字符串值的请求传递它。在远端，将其翻译回漂亮的、人类可读的格式。

# javascript - 加载 KML 文件时如何隐藏 geoxml3 标记？

> ID：15745495
> 
> 赞同：2
> 
> 时间：2013-04-01T14:39:22.277
> 
> 标签：javascript, geoxml3, geoxml

我有一个 geoXML3 解析器将（多个）KML 文件读取到 Google 地图上，并且出现了红色箭头/标记。有什么办法可以压制他们吗？

```
var myOptions = {
        center: new google.maps.LatLng(39.397, -100.644),
        zoom: 4,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    var geoXml = new geoXML3.parser({
        map: map,
        singleInfoWindow: false,
        afterParse: useTheData
    });

geoXml.parse('data/file1.kml');
geoXml.parse('data/file2.kml');
geoXml.parse('data/file3.kml'); 
```

![在此处输入图像描述](https://i.stack.imgur.com/0DpsI.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:26:27.013

有几种方法可以抑制标记。

1.  最简单的方法是从 KML 中的地标中删除任何`<Point>`几何图形。
2.  您可以编写后处理函数以在创建后隐藏它们
3.  您可以创建不创建标记的自定义 createMarker 函数

[隐藏标记示例](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?type=m&filename=us_states.xml)

# python - 在 python 中交互地执行 shell 代码

> ID：15745498
> 
> 赞同：0
> 
> 时间：2013-04-01T14:39:41.817
> 
> 标签：python, console

我从 python 调用 pdflatex 使用

```
executeCode = 'pdflatex -shell-escape "' + packageName + '.tex"'
result = os.system(executeCode) 
```

然而，LaTeX 文档可能有错误，在这种情况下 pdflatex 要求键盘输入。对于 python，这与无限循环相同。在 PyScripter 中，我什至无法停止 python。我必须杀死pdflatex。

现在我需要两件事 1\. 我想查看 pdflatex 的输出 2\. 我需要在控制台上与 pdflatex 交互

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:53:34.673

如果您使用`--interaction nonstopmode`选项 pdflatex 不会停止并要求输入。

使用该`subprocess`模块为您提供了有关如何处理该过程的更多选项。

```
subprocess.call(['pdflatex', '--interaction', 'nonstopmode', '-shell-escape', packageName + '.tex']) 
```

您可以使用`stdout`and`stderr`选项将这些输出重定向到管道或文件。

如果要捕获程序的输出，请`subprocess.check_output()`改用。

# jquery - CSS中的链接间距问题

> ID：15745499
> 
> 赞同：0
> 
> 时间：2013-04-01T14:39:45.613
> 
> 标签：jquery, button, hover

基本上这是一个菜单，在悬停时，一个单独的图像将出现在链接的两侧。我已经做到了这一点，但是我似乎无法摆脱链接上的白色间距。悬停时链接上方不应有空白。似乎无法弄清楚我错过了什么！？

```
<li><a href="#" class="button">Button 1</a></li>
<li><a href="#" class="button">Button 2</a></li>
<li><a href="#" class="button">Button 3</a></li>    

$(document).ready(function(){
    $(".button").hover(function() {
        $(this).before('<div class="buttonimgleft"></div>');
        $(this).after('<div class="buttonimgright"></div>');
                }, function() {
        $(".buttonimgleft, .buttonimgright").remove();
    });
});

body { 
    margin: 0;
}

li { 
    list-style: none;
    display: inline-block;
    margin-right: 15px;
}
.buttonimgright { 
    display: inline-block;
    background: #CC0000 url('insert-right-image.png');
    width: 15px;
    height: 20px;
}

.buttonimgleft { 
    display: inline-block; 
    background: #CC0000 url('insert-left-image.png');
    width: 15px;
    height: 20px;
} 

a { 
    height: 20px;
    color: #000;
    background: #CC0000;
    font-size: 16px;
} 
```

这是小提琴：http: [//jsfiddle.net/vEXG3/1/](http://jsfiddle.net/vEXG3/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T14:44:42.277

添加`vertical-align:top;`到您的链接和图像 div。

**[jsFiddle 示例](http://jsfiddle.net/j08691/vEXG3/4/)**

```
.buttonimgright {
    display: inline-block;
    background: #CC0000 url('insert-right-image.png');
    width: 15px;
    height: 20px;
    vertical-align:top;
}
.buttonimgleft {
    display: inline-block;
    background: #CC0000 url('insert-left-image.png');
    width: 15px;
    height: 20px;
    vertical-align:top;
}
a {
    height: 20px;
    color: #000;
    background: #CC0000;
    font-size: 16px;
    vertical-align:top;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T14:43:53.147

将样式`vertical-align: middle;`（`bottom`也可以）添加到`.buttonimgright`和`buttonimgleft`。

此外，您应该将样式添加`display: inline-block;`到`a`标签，因为您不能在`inline`元素上设置高度。

[http://jsfiddle.net/mblase75/vEXG3/5/](http://jsfiddle.net/mblase75/vEXG3/5/)

# iphone - iPhone 视网膜像素的物理尺寸是否与 iPad 视网膜像素相同？

> ID：15745501
> 
> 赞同：2
> 
> 时间：2013-04-01T14:39:49.647
> 
> 标签：iphone, ipad, screen, dimensions

我正在设计一个为视网膜显示器创建图形的应用程序。我想为用户提供的好处之一是 iPad 应用程序设计的图形在 iPhone 上看起来完全一样。

然而，通过观察结果，在我看来，iPhone 视网膜显示屏的物理像素比 iPad 的小约 20%。因此，iPhone 和 iPad 视网膜显示屏上并排显示的 57x57 像素空间看起来具有不同的形状 - iPad 会更大。

**我感兴趣的是视网膜显示像素的物理尺寸是否真的存在差异，或者它是否是我的代码中的错误。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T14:45:34.530

**iPhone 5 上** 的 Retina 显示屏：1136x640 像素分辨率，326 ppi

**Ipad（视网膜）：** 2048x1536 分辨率，每英寸 264 像素 (ppi)

如您所见，iPhone 上的密度比 Ipad 高。从这里我会说你是对的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T14:45:44.317

它们是不相同的。这些设备使用具有不同像素/英寸的不同显示器。

iPhone 视网膜：326 PPI iPad 视网膜：264 PPI

[http://en.wikipedia.org/wiki/List_of_displays_by_pixel_density#Apple](http://en.wikipedia.org/wiki/List_of_displays_by_pixel_density#Apple)

# html - 带有 html5 socket.io 和 node.js 服务器的游戏的最佳框架？

> ID：15745503
> 
> 赞同：0
> 
> 时间：2013-04-01T14:39:52.457
> 
> 标签：html, node.js, frameworks, socket.io

我想开发一个有房间的游戏。我想为此使用一个框架。

我一直在寻找好的框架，但没有找到我需要的。有人可以提出一些建议吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T14:44:47.537

首先，看一下[HTML 引擎](http://www.html5gamedevelopment.com/html5-engines/category/Open-source)。一些框架是[craftyjs](http://craftyjs.com/)和[melonJS](http://www.melonjs.org/)。

# asp.net - 在期望传递可选参数的工作流中调用方法？

> ID：15745504
> 
> 赞同：0
> 
> 时间：2013-04-01T14:39:55.107
> 
> 标签：asp.net, workflow-foundation

我在业务层中有方法，其中包含一些可选参数。当我尝试从 WorkFlow 4.0 调用该方法时，它也希望我传递可选参数。有没有办法可以避免将可选参数传递给方法。

我的方法是 SendEmail(string emailTo, string domain, string smtpAdress = "POP"); 当我在代码中的任何位置调用此方法时.. 我只是调用 SendEmail("xx.com","PFE") 之类的方法，它工作正常

但是在工作流中..它给出了一个编译错误，说“'BLEmail'没有一个名为'SendEmail'的公共实例方法与提供给InvokeMethod'InvokeMethod'的参数类型、泛型类型参数和泛型类型约束相匹配。”

当我传递可选参数时，它工作正常......但它失去了可选参数的整个概念。

请帮忙..

感谢并感谢您的反馈。

山姆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T22:54:59.337

InvokeMethodActivity 不处理可选参数。您必须提供所有参数，无论它们是否可选。

# ruby - 获取 XML 文件中元素的所有属性

> ID：15745506
> 
> 赞同：0
> 
> 时间：2013-04-01T14:40:06.413
> 
> 标签：ruby, nokogiri

我正在尝试解析文件并获取文件中每个`<row>`标签的所有属性。该文件通常如下所示：

```
<?xml version="1.0" standalone="yes"?>
<report>
  <table>
    <columns>
      <column name="month"/>
      <column name="campaign"/>
      <!-- many columns -->
    </columns>
    <rows>
  <row month="December 2009" campaign="Campaign #1" 
       adgroup="Python" preview="Not available" 
       headline="We Write Apps in Python" 
       and="many more attributes here" />
  <row month="December 2009" campaign="Campaign #1" 
       adgroup="Ruby" preview="Not available" 
       headline="We Write Apps in Ruby" 
       and="many more attributes here" />
  <!-- many such rows -->
</rows></table></report> 
```

这是完整的文件： http: [//pastie.org/7268456#2](http://pastie.org/7268456#2)。

我已经查看了可以在各种帮助板上找到的每个教程和答案，但它们都假设相同的东西——我正在搜索一两个特定标签，而这些标签只需要一两个值。实际上，每个`<row>`标签都有 18 个属性，并且我有一个 mysql 表，其中 18 个属性中的每一个都有一个列。我需要将信息放入一个对象/散列/数组中，我可以使用它通过 ActiveRecord/Ruby 插入到表中。

我开始使用 Hpricot；您可以在此问题的编辑历史记录中看到代码（不相关）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T20:42:36.207

```
require 'nokogiri'
doc = Nokogiri.XML(my_xml_string)
doc.css('row').each do |row|
  # row is a Nokogiri::XML::Element
  row.attributes.each do |name,attr|
     # name is a string
     # attr is a Nokogiri::XML::Attr
    p name => attr.value
  end
end
#=> {"month"=>"December 2009"}
#=> {"campaign"=>"Campaign #1"}
#=> {"adgroup"=>"Python"}
#=> {"preview"=>"Not available"}
#=> {"headline"=>"We Write Apps in Python"}
#=> etc. 
```

或者，如果您只想要一个将属性名称映射到字符串值的哈希数组：

```
rows = doc.css('row').map{ |row| Hash[ row.attributes.map{|n,a| [n,a.value]} ] }
#=> [
#=>  {"month"=>"December 2009", "campaign"=>"Campaign #1", adgroup="Python", … },
#=>  {"month"=>"December 2009", "campaign"=>"Campaign #1", adgroup="Ruby", … },
#=>  …
#=> ] 
```

该[`Nokogiri.XML`](http://nokogiri.org/Nokogiri.html#method-c-XML)方法是解析 XML 字符串并获得[`Nokogiri::Document`](http://nokogiri.org/Nokogiri/XML/Document.html)返回值的最简单方法。

该[`css`](http://nokogiri.org/Nokogiri/XML/Node.html#method-i-css)方法是查找具有给定名称的所有元素的最简单方法（忽略它们的包含层次结构和任何 XML 名称空间）。它返回 a [`Nokogiri::XML::NodeSet`](http://nokogiri.org/Nokogiri/XML/NodeSet.html)，它与数组非常相似。

每个方法[`Nokogiri::XML::Element`](http://nokogiri.org/Nokogiri/XML/Element.html)都有一个[`attributes`](http://nokogiri.org/Nokogiri/XML/Node.html#method-i-attributes)方法，该方法返回一个哈希值，将属性名称映射到[`Nokogiri::XML::Attr`](http://nokogiri.org/Nokogiri/XML/Attr.html)包含有关属性的所有信息（名称、值、命名空间、父元素等）的对象。

# c++ - 通过引用传递结构的 C++/C 编程实践

> ID：15745508
> 
> 赞同：-1
> 
> 时间：2013-04-01T14:40:20.273
> 
> 标签：c++, structure

我一直在编写一个具有相当大结构的程序，它通过引用几个函数来传递。但是，还有一些其他功能需要访问大型结构中的小块信息。没有编辑，只是阅读。

我正在考虑创建第二个结构，它只复制所需的特定信息并通过引用传递，而不是通过引用传递整个结构。

我想知道的是两件事：

1.  由于我通过引用传递大型结构，因此确实没有性能影响。正确的？
2.  即使 1) 是正确的，传递不应编辑的结构是否是不好的做法（即使它不会被编辑，但我仍然在这里谈论原理）。

进一步来说：

我有一个配置结构，它通过调用函数并通过引用传递结构来设置程序配置。有一些信息（进程名称、命令行参数）我只想用于提供信息的目的。我在问传递一个不是为了我想要使用它的目的的结构是否是不好的做法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T14:42:26.113

1.  正确的。

2.  通过`const`引用传递它；您将获得通过引用传递的性能收益，而无需进行编辑。

顺便说一句，如果该功能只需要一小部分“大结构”，则可能表明这些字段“自行”存储一些信息 - 即不需要解释“大结构”的其余部分他们正确。在这种情况下，您可以考虑将它们移动到一个单独的`struct`，它本身就是第一个“大结构”的成员。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T14:42:39.410

> 1）由于我通过引用传递大型结构，因此确实没有性能影响。正确的？

正确的。

> 2）即使1）是正确的，传递一个不应该编辑的结构是不是不礼貌（即使它不会被编辑，但我仍然在这里谈论原则）。

您可以让您的函数接受对的引用，`const`以确保该函数不会改变相应参数的状态。

> 我在问传递一个不是为了我想要使用它的目的的结构是否是不好的做法。

我不确定你的意思。你写它的方式，这绝对是一个不好的做法：你不应该使用某些东西来做它不应该做的事情。这意味着扭曲对象的语义。但是，您的其余问题似乎并不意味着这一点。

相反，您似乎关心传递对函数的引用，因为这可能允许函数改变参数的状态；但是如果该函数引用了`const`，它将无法更改其参数的状态。在这种情况下，不，这不是一个坏习惯。

如果您指的是函数只需要与结构的*某些*数据成员或成员函数一起使用，那么这也不一定是一个糟糕的设计。要求每个函数访问数据结构的*每个*成员是愚蠢的。

当然，这是我在不了解函数语义和特定数据结构的任何具体内容的情况下能写出的最好的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T14:44:35.383

更进一步，您可以将此类配置对象保存在共享指针中并将其传递到您想要的任何地方，因此您不必担心结构的所有权。通过这种方式，您可以确保所有程序组件共享单个原始配置对象

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T14:53:32.290

就像其他人说的那样，使用 const。

如果您正在使用 C++，请使用访问器函数访问这些小信息。然后不需要更改结构状态的函数将不必触及任何成员字段，只有成员函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T15:19:08.767

正如其他人所提到的，`const&`如果您不修改数据。

但是，您关于“我应该将数据复制到较小的数据”的观点`struct`大多被掩盖了。答案是“也许”。

不这样做的一个很好的理由是这是浪费时间——实际上，复制东西需要时间。

这样做的一个很好的理由是它会降低子过程的有效状态。不访问全局变量（因此也不访问全局状态）且未传递任何指针的子过程具有非常有限的状态。具有有限状态的过程更容易测试，通常更容易理解，并且通常更容易调试。

通常，您希望使用该函数解决问题所需的绝对最少数据量来调用每个函数。如果您避免将“指向所有内容的指针”（并且引用是指针）传递给每个函数，则可以维护此规则，并且通常可以使代码更易于维护。

另一方面，将数据从大的整体状态中剥离出来并进入小`struct`的本地状态可能包含错误和错误。

完全避免这个问题的一种方法是避免参数都混合在一起的大的单体状态对象，如果有一些参数捆绑在一起来回答一些问题，它们应该在自己的子`struct`中开始。现在调用子过程很容易——你传入`struct`已经绑定了参数的子程序。

# android - /usr/include/machine/types.h:37:10：致命错误：找不到“arm/types.h”文件

> ID：15745514
> 
> 赞同：1
> 
> 时间：2013-04-01T14:40:41.307
> 
> 标签：android, iphone, macos, arm

我花了半天时间来消除错误。我真的很无聊和流泪。

该项目正在通过 Stella SDK 将 iPhone App 转换为 Android apk。IDE 是 xCode 4.6。

```
CompileC build-arm-google-android/GLSprite-android.build/Debug/GLSprite.build/Objects-normal/x86_64/main.o main.m normal x86_64 objective-c com.yeecco.compilers.android.clang.1.0
    cd /Users/anna/samples/GLSprite
    setenv LANG en_US.US-ASCII
    /opt/StellaSDK/bin/android-clang -x objective-c -arch x86_64 -fmessage-length=0 -std=c99 -Wno-trigraphs -fpascal-strings -O0 -Wno-missing-field-initializers -Wno-missing-prototypes -Wreturn-type -Wno-implicit-atomic-properties -Wno-receiver-is-weak -Wformat -Wno-missing-braces -Wparentheses -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wno-empty-body -Wno-uninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-conversion -Wno-constant-conversion -Wno-int-conversion -Wno-enum-conversion -Wno-shorten-64-to-32 -Wpointer-sign -Wno-newline-eof -Wno-selector -Wno-strict-selector-match -Wno-undeclared-selector -Wno-deprecated-implementations -fasm-blocks -fstrict-aliasing -Wprotocol -Wdeprecated-declarations -mmacosx-version-min=10.8 -g -Wno-sign-conversion -I/Users/anna/samples/GLSprite/build-arm-google-android/Debug/include -I/opt/StellaSDK/arm-google-android/usr/include -I/opt/StellaSDK/arm-google-android/System/Library/Frameworks/cocos2d.framework/Headers -I/opt/StellaSDK/arm-google-android/System/Library/Frameworks/StellaMedia.framework/Headers -I/opt/StellaSDK/arm-google-android/System/Library/Frameworks/StellaStore.framework/Headers -I/Users/anna/samples/GLSprite/build-arm-google-android/GLSprite-android.build/Debug/GLSprite.build/DerivedSources/x86_64 -I/Users/anna/samples/GLSprite/build-arm-google-android/GLSprite-android.build/Debug/GLSprite.build/DerivedSources -F/Users/anna/samples/GLSprite/build-arm-google-android/Debug -F/opt/StellaSDK/arm-google-android/System/Library/Frameworks -stella_target arm-google-android -D__STELLA_NANDROID -D__STELLA_VERSION_MAX_ALLOWED -MMD -MT dependencies -MF /Users/anna/samples/GLSprite/build-arm-google-android/GLSprite-android.build/Debug/GLSprite.build/Objects-normal/x86_64/main.d -c /Users/anna/samples/GLSprite/main.m -o /Users/anna/samples/GLSprite/build-arm-google-android/GLSprite-android.build/Debug/GLSprite.build/Objects-normal/x86_64/main.o

warning: unknown warning option '-Wreceiver-is-weak' [-Wunknown-warning-option]
warning: unknown warning option '-Wint-conversion' [-Wunknown-warning-option]
warning: unknown warning option '-Wenum-conversion' [-Wunknown-warning-option]
In file included from /Users/anna/samples/GLSprite/main.m:49:
In file included from /opt/StellaSDK/arm-google-android/System/Library/Frameworks/UIKit.framework/Headers/UIKit.h:17:
In file included from /opt/StellaSDK/arm-google-android/System/Library/Frameworks/StellaKit.framework/Headers/StellaKit.h:7:
In file included from /opt/StellaSDK/arm-google-android/System/Library/Frameworks/StellaKit.framework/Headers/SVAcceleration.h:5:
In file included from /opt/StellaSDK/arm-google-android/System/Library/Frameworks/Foundation.framework/Headers/Foundation.h:11:
In file included from /usr/include/sys/types.h:78:
/usr/include/machine/types.h:37:10: fatal error: 'arm/types.h' file not found
#include "arm/types.h"
         ^
3 warnings and 1 error generated.
Command /opt/StellaSDK/bin/android-clang failed with exit code 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:05:01.370

显示错误消息是因为编译器正在 arm 文件夹中查找 types.h。如果您可以提供该文件，编译器将不会显示此错误并继续。检查 StellaSDK 的文档，他们应该有关于如何交叉编译的“指南”

# excel - VSTO 2010 Intranet 部署 (.Net 4.0)

> ID：15745521
> 
> 赞同：0
> 
> 时间：2013-04-01T14:41:06.620
> 
> 标签：excel, vsto, intranet

我是 vsto 的新手。

我有一个在本地 Intranet 上发布的 excel 模板。问题是某些计算机可以运行模板，而其他计算机不能。（所有用户都有相同的角色）

是否有任何我必须创建或编辑的本地策略，以让来自本地网络中任何计算机的所有用户运行此模板。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T01:29:55.867

1>似乎用户直接尝试从网络位置运行文件。我建议您最好创建安装程序，使用单击一次会很容易。

2>尝试从受信任的发布者处签署您的 .vsto。

3>尝试使用 [http://msdn.microsoft.com/en-us/library/9w6bd8f1(VS.80).aspx](http://msdn.microsoft.com/en-us/library/9w6bd8f1(VS.80).aspx) [http://msdn.microsoft.com/en-us/设置共享位置的安全性库/k64zb6we(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/k64zb6we(v=vs.80).aspx)

# shell - Jenkins：如何在 Windows 从站中执行 shell 脚本

> ID：15745524
> 
> 赞同：4
> 
> 时间：2013-04-01T14:41:20.637
> 
> 标签：shell, jenkins

我有一个安装了 bash 的 Windows 从站。我正在尝试在其上运行一个 shell 脚本作为预构建步骤。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T15:46:43.233

您需要使用脚本作为参数运行 bash：

```
bash yourscript <arguments to your script here> 
```

根据您的环境，您可能还需要提供 bash 的完整路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-19T10:07:20.223

如果您在 Windows 上的 bash 是 Cygwin 安装的一部分，则[cygpath 插件](https://wiki.jenkins-ci.org/display/JENKINS/Cygpath+Plugin)将允许您使用 'Execute Shell' 并在其顶部执行 #!/bin/bash ，就像您为 unix slave 所做的那样。

# wordpress - Wordpress：自动从推文和 YouTube 视频创建博客文章？

> ID：15745525
> 
> 赞同：0
> 
> 时间：2013-04-01T14:41:32.027
> 
> 标签：wordpress, post, twitter, youtube

我正在建立一个 Wordpress 网站，但我正在努力寻找一个好的插件来实现一些目标......

基本上，我想让网站成为我的许多社交网络的中心枢纽，而无需我在多个地方不断更新内容。所以我想做以下事情：

每次我发布一条新推文时，我都希望它在我的网站上的推文类别中创建一个新的博客文章。帖子应该有一个默认的特色图像，并且我还应该能够设置推文的显示位置（即在标题和帖子内容中）以及推文之后是否显示其他任何内容（例如关注按钮）。

其次，每次我将新视频上传到 YouTube 时，我希望它自动在我的网站上的视频类别（最好是视频帖子类型）中创建一个新的博客文章。同样，除了视频之外，我还应该控制帖子中的内容...例如描述、标签等。我还希望将帖子的特色图像设置为 YouTube 创建的三个静止图像之一视频。

以上是否可以实现，我将如何解决？

提前谢谢了，

H T

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:49:31.057

对于你问题的第一部分，我正在做类似的事情。我正在使用 Twitter 工具插件；与社会一起。

高温高压

# projection - 在没有 API 的情况下使用 Yandex 地图

> ID：15745526
> 
> 赞同：0
> 
> 时间：2013-04-01T14:41:32.610
> 
> 标签：projection, epsg, yandex, yandex-api

我想使用 yandex 地图图块编写地图服务器。我需要 ：

*世界的边界框（以米为单位） *缩放级别为 0 的图块大小（以米为单位） *yandex 地图使用的 EPSG 代码

有谁知道这些参数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T11:53:49.963

没有 api 就不能使用 Yandex Map。在所有其他情况下，yandex 磁贴看起来像谷歌磁贴。除了他们使用其他一些投影 - 墨卡托 wgs84

# android - 更新或插入表格，将行号保持为一

> ID：15745531
> 
> 赞同：0
> 
> 时间：2013-04-01T14:41:39.760
> 
> 标签：android, sqlite

我想看看我的表中是否有东西更新它，如果没有插入一行。所以基本上我的桌子上总是有一排。

```
 public void createOrupdate(long id,String x, String y, String angle){
            String[] columns= new String[]{KEY_ROWID, KEY_X, KEY_Y, KEY_ANGLE};
            Cursor c= ourDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);
            ContentValues editCon = new ContentValues();

            if (c!=null){
                editCon.put(KEY_X, x);
                editCon.put(KEY_Y, y);
                editCon.put(KEY_ANGLE, angle);
                ourDatabase.update(DATABASE_TABLE, editCon, KEY_ROWID + "=?", new String[]{String.valueOf(id)});
            }
            else{
                editCon.put(KEY_X, x);
                editCon.put(KEY_Y, y);
                editCon.put(KEY_ANGLE, angle);
                ourDatabase.insert(DATABASE_TABLE, null, editCon);
            }

        }

        public String getData() {
            // TODO Auto-generated method stub
            String[] columns= new String[]{KEY_ROWID, KEY_X, KEY_Y, KEY_ANGLE};
            Cursor c= ourDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);
            String result= "";
            int iRow= c.getColumnIndex(KEY_ROWID);
            int iX= c.getColumnIndex(KEY_X);
            int iY= c.getColumnIndex(KEY_Y);
            int iAngle= c.getColumnIndex(KEY_ANGLE);
            int i= 0;

            for( c.moveToFirst(); !c.isAfterLast(); c.moveToNext()){
                result= result+ c.getString(iRow)+ " "+ c.getString(iX)+ " " +c.getString(iY)+ " "+ c.getString(iAngle)+"\n";

            }
            return result;
        } 
```

但是当我`entry.createOrupdate(1, Double.toString(db1), Double.toString(db2), Double.toString(db3));`在我的代码中使用时，我的表中没有任何内容，也没有异常，也没有。当我单独使用更新或插入时，它可以工作..有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:49:41.357

检查`c!=null`是不够的。即使查询结果为空，游标也不能为空。`c.getCount()`这意味着您需要通过使用并检查是否返回`0`或来获取行数`1`。

PS：这`for( c.moveToFirst(); !c.isAfterLast(); c.moveToNext()){`是一个非常丑陋的循环使用。您应该将其更改为类似`while(c.moveToNext())`.

`moveToNext()`将与`moveToFirst()`新创建的游标对象相同。

# github - 我应该在 github 存储库中包含 configure 和 makefile 吗？

> ID：15745534
> 
> 赞同：11
> 
> 时间：2013-04-01T14:41:48.887
> 
> 标签：github, autoconf, automake, software-distribution

我们最近从 subversion 转到 git，然后转到 Github，用于几个开源项目。Github 很好，因为它提供了很多功能。我特别喜欢的一件事是将标签下载为文件的`zip`能力`.tar.gz`。

不幸的是，Github 最近停止了下载。由于能够下载标签，这应该不是问题。然而，过去我们没有将`Makefile`,`configure`脚本或任何其他 autoconf 生成的文件放入 repo，因为当人们合并时它们会产生很多冲突。

处理这个问题的正确方法是什么？

*   我应该将 autoconf 和 automake 生成的文件放在 repo 中，以便人们可以直接下载标签吗？
*   还是应该有一个`bootstrap.sh`文件并告诉人们运行它？
*   还是我应该做一个`make dist`并将其放入回购中？

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2016-12-28T10:41:55.680

# `make dist`通过 GitHub Releases发布输出

您的第一个选项——将 Autoconf 和 A​​utomake 生成的文件放入存储库——不是一个好主意。[将生成的文件存储在源代码管理中](https://stackoverflow.com/questions/893913/should-i-store-generated-code-in-source-control)几乎没有什么好处。在这种情况下，它会通过大量不必要的和潜在的冲突提交污染您的历史记录，特别是如果不是所有贡献者都使用相同版本的 Autotools。您的第三个选项——检查输出`make dist`——是一个坏主意，原因与第一个选项完全相同。

您的第二个选项——添加一个调用 Autoconf 和 A​​utomake 来生成脚本的“引导”`configure`脚本——也是一个坏主意。这违背了 Autotools 的全部目的，即使您的源代码可跨系统移植——包括那些 Autotools 不可用的系统！（考虑如果有人想在他们没有 root 访问权限且未安装 GNU 构建系统的机器上构建和安装您的软件会发生什么。引导脚本不会帮助他们，因为他们会首先需要在本地安装 Autotools 及其所有依赖项。）

使用 Autotools 发布代码的正确方法是生成一个 tarball `make dist`（或者更好的是`make distcheck`，因为这也将运行测试并进行其他完整性检查），然后将此 tarball 发布*到源存储库以外的其他地方*。

您从 2013 年 4 月开始的原始问题指出 GitHub 已停止下载页面。然而，在 2013 年 7 月，[GitHub 添加了“发布”功能](https://github.com/blog/1547-release-your-software)，不仅可以预先打包您的源标签，还允许您将任意文件附加到每个发布。因此**，在 GitHub 上，发布页面是您应该发布`make dist`tarball**的地方（最好还有它们的分离 GnuPG 签名）。

## 基本步骤

1.  当您准备好发布时，标记它并将标记推送到 GitHub： `$ git tag 1.0 # Also use -s if desired $ git push --tags`
2.  使用您的 Makefile 生成一个 tarball： `$ make dist # Alternatively, 'make distcheck'`
3.  访问您项目的 GitHub 页面并点击“发布”链接： [![显示发布链接位置的 GitHub 项目的屏幕截图](https://i.stack.imgur.com/96kK2.png)](https://i.stack.imgur.com/96kK2.png)
4.  您将被带到您的项目的发布页面。第一次访问时，您将看到的只是标签列表和从源代码树自动生成的 tarball： [![GitHub 发布页面](https://i.stack.imgur.com/UwCpK.png)](https://i.stack.imgur.com/UwCpK.png) 按“Draft a new release”按钮。
5.  然后，您将看到一个表单，您应该在其中填写与发布关联的 Git 标记以及可选的标题和描述。在此下方还有一个文件选择器，标记为“通过将二进制文件拖放到此处或选择它们来附加二进制文件”。使用它来上传您在步骤 2 中创建的 tarball（也可能是它的分离 GnuPG 签名）。 [![起草 GitHub 版本](https://i.stack.imgur.com/bzsi5.png)](https://i.stack.imgur.com/bzsi5.png) 完成后，按“发布版本”按钮。
6.  您项目的 Releases 页面现在将显示该版本，包括附加文件的显着下载链接： [![完成 GitHub 发布页面](https://i.stack.imgur.com/Z4ZmL.png)](https://i.stack.imgur.com/Z4ZmL.png)

如果您不想使用 GitHub Releases，那么[正如之前的回答中所指出的](https://stackoverflow.com/a/15753987/906070)，您应该将 tarball 上传到其他地方，例如您自己的网站或 FTP 站点。从您的项目中添加指向此存储库的链接，`README.md`以便用户可以找到它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-01T14:48:32.007

第二个更好：您希望您的存储库的任何用户尽快启动并运行，重新生成他/她需要的内容以构建您的程序。

由于 Git 在很大程度上是*文本*的版本控制（[与 Nexus 等工件存储库](https://stackoverflow.com/a/13490800/6309)相反），因此提供一种生成最终二进制文件的方法是可行的方法。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-02T00:11:04.810

当您剪切一个版本时，将结果上传`make distcheck`到您项目的下载页面：它是一个构建 tarball 并验证它是否安装、卸载、通过测试和其他健全性检查的 makefile 目标。Github 走错路不是借口：在你的 repo 中创建这样的树：

```
/
/source
/source/configure.ac
/source/Makefile.am
/source/...
/releases
/releases/foo-0.1.tar.gz
/releases/... 
```

对于开发人员，您不应该在源代码管理中生成文件。许多现代自动工具项目通过调用`autoreconf -i`.

# html - Twitter Bootstrap：表格溢出一行

> ID：15745539
> 
> 赞同：1
> 
> 时间：2013-04-01T14:42:07.720
> 
> 标签：html, css, twitter-bootstrap

以下是我的代码。我正在容器中创建一个 12 行跨度。我在这一行中有一个表格，其内容正在动态变化。但是，我发现我的内容垂直溢出了行

```
<div class="container-fluid">       
    <div class="row-fluid">
        <div class="span12">
            <pre>
            <table border="1" align="right" cellspacing="3" cellpadding="10">
            <tr>
            <td id="three"><div id="name"></div></td>
            <td id="one"><div id="something"></div></td>
        <td id="two"></div></td>            
        </tr>
        </table>
        </pre>
        </div>
     </div>
</div> 
```

正在发生的事情的屏幕截图：

![在此处输入图像描述](https://i.stack.imgur.com/h2dG7.jpg)

有没有办法改变行流体的高度？

# java - 无法以 HTML 格式发送电子邮件。

> ID：15745541
> 
> 赞同：0
> 
> 时间：2013-04-01T14:42:13.703
> 
> 标签：java, jakarta-mail

我正在尝试以 HTML 格式发送电子邮件。它适用于文本/纯文本。但是当我将内容类型设置为 text/html 时，邮件没有被传输（没有抛出异常，但我也没有收到电子邮件）。以下是我的代码。

```
public void postMail() throws Exception {
            boolean debug = false;

            Properties props = new Properties();
            props.put("mail.smtp.host", smtpServer);
            props.put("mail.smtp.port", smtpServerPort);
            props.put("mail.smtp.auth", "false");
            props.put("mail.smtp.socketFactory.class","javax.net.ssl.SSLSocketFactory");
            props.put("mail.smtp.socketFactory.fallback","false");
            lgr.debug(lgr.isDebugEnabled()?"SMTP Server --->" + smtpServer : null);
            Session session = Session.getInstance(props, null);
            session.setDebug(debug);

            Message msg = new MimeMessage(session);

            InternetAddress addressFrom = new InternetAddress(from);
            msg.setFrom(addressFrom);
            // Here is some logic to add TO and CC and BCC
            msg.setSubject(subject);
            //    writer.println("Subject : " + subject);
            lgr.debug(lgr.isDebugEnabled()?"Subject : " + subject : null);
            msg.setContent(message, "text/html");
            Transport.send(msg);
            lgr.info(lgr.isInfoEnabled() ?"Mail sent": null);
} 
```

在这方面的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:25:46.653

[摆脱套接字工厂的东西](http://www.oracle.com/technetwork/java/javamail/faq/index.html#commonmistakes)，你不需要它。

当您将 debug 设置为 true 时，您是否在调试输出中看到任何错误？或者您的邮件服务器是否毫无怨言地接受了邮件？如果没有错误，那么问题很可能是收件人的邮件服务器认为您的邮件是垃圾邮件，尽管您的简单测试邮件似乎不太可能。

您是否尝试过发送给不同的收件人，尤其是使用不同邮件服务器的不同收件人？找出问题出在收件人的邮件服务器还是您用于发送的邮件服务器会很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T14:51:00.500

我曾经遇到过类似的问题。我发现问题在于包含单引号的 html 内容。

作为测试，尝试使用 text/html 格式发送（简单单词）/（根本不带引号的简单 html）作为消息。如果可行，您可能可以修改您的 html 消息以仅包含双引号。

希望有帮助！

# java - 我刚刚安装了 android SDK 更新，现在我的项目充满了错误

> ID：15745542
> 
> 赞同：0
> 
> 时间：2013-04-01T14:42:16.970
> 
> 标签：java, android, eclipse

我最近刚刚在 android sdk 中安装下载并安装了一些更新以访问某些功能，现在当我重新启动 eclipse 时，所有项目都有错误！包开始时有一个小错误，它建议的唯一解决方案是重新配置构建路径，这是大屠杀的图片。有谁知道我该如何解决这个问题？

![在此处输入图像描述](https://i.stack.imgur.com/FBAzq.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T14:49:50.530

如果`java.util`是有问题的导入，则说明您的 JRE 配置不正确，或者构建或 IDE 处于某种损坏状态。由于您已经使用了*Clean*命令，因此我将解决一个更复杂的问题。

检查您的项目配置并确保您仍然没有引用旧的 Java 实现。如果通过安装更新​​意味着您下载了一个新版本，安装它然后删除了您迄今为止一直在使用的版本，那么 IDE 可能找不到您的项目当前配置的 JRE 系统库。

尝试右键单击您的项目 >*构建路径*>*配置构建路径*，然后检查您当前的 JRE 系统库是否*未绑定*。如果是这样，您必须使用*Add Library* > *JRE System Library在**Libraries*选项卡上再次配置它。

# standards - 电话号码有标准吗？

> ID：15745545
> 
> 赞同：24
> 
> 时间：2013-04-01T14:42:26.467
> 
> 标签：standards, phone-number

**在你说这已经被问到之前**，要知道我已经回顾了这些：

*   [是否有在数据库中存储标准化电话号码的标准？](https://stackoverflow.com/questions/41925/is-there-a-standard-for-storing-normalized-phone-numbers-in-a-database)- 这是从 2008 年开始的，并表示当时没有这样的标准。**我希望在过去的 13 年中有所改变。**
*   [如何使用正则表达式验证电话号码](https://stackoverflow.com/questions/123559/a-comprehensive-regex-for-phone-number-validation?lq=1)- 我已经有了解析；这很容易：如果不是数字，请跳过它。**这个问题不是关于解析器，而是我保存/显示它的格式。**我不担心解析有多难，而是担心它是否是标准格式。

* * *

假设我正在开发一个必须处理电话号码的程序，并且我想确保它们以标准格式保存和显示，以便其他程序和人类也可以预测和一致地理解它们。

例如，我已经看到以下都是同一个美国电话号码的有效表示：

*   `1234567`
*   `123-4567`
*   `123 4567`
*   `5551234567`
*   `(555) 1234567`
*   `555-1234567`
*   `555 123 4567`
*   `555-123-4567`
*   `(555)-123-4567`
*   `(555) 123-4567`
*   `(5) 123 4567`
*   `1-555-123-4567`
*   `(1) 555-123-4567`
*   `+1 555-123-4567`
*   `+1 555 123-4567`
*   `+1 (555) 123-4567`
*   恶心……</li>

然后不同的国家以不同的方式表示数字：

*   `55 1234 567 8901`
*   `55 12 3456 7890`
*   `55 123 456 7890`
*   `55 1234 567890`
*   `555 123 456`
*   `(55) 123 4567`
*   `5.555.123-45-67`
*   恶心……</li>

如您所见，用户查看有效电话号码的方式几乎是无限的（[英国电话号码](http://en.wikipedia.org/wiki/Telephone_numbers_in_the_United_Kingdom)的 Wikipedia 页面有 26 个打印机页面）。我希望我的数据库和屏幕上的所有数字都采用普遍可识别的格式。据我所知，ISO 和 ANSI 没有定义的格式。**电话号码有标准符号吗？**

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2014-01-08T16:59:31.690

没有 ISO 标准，但有 ITU 标准。您需要 E.123 和 E.164。

总之，任何电话号码都由 +CC MMMMMM... 表示，其中 CC 是国家代码，是一到三位数字，而 MMMMMM... 是区号（如果适用）和用户号码。总位数不得超过 15。+ 表示“您当地的国际拨号前缀”。

我将使用我自己的固定电话号码举几个例子。

因此，例如，如果您在德国，号码 +44 2087712924 将拨打为 00442087712924，在美国您将拨打 011442087712924。44 表示它是英国号码，而 2087712924 是本地号码。

在实践中，一长串 MMMMM... 通常被分解成更小的部分，以便于阅读。你如何做到这一点因国家而异。我给出的例子通常写成 +44 20 8771 2924。

除了上面明确的 E.123 表示，您可以在世界上任何允许国际拨号的地方使用它，每个国家也有自己的本地数字表示方法，有些有几种。示例号码有时会写为 020 8771 2924 或 (020) 8771 2924。严格来说，前导 0 不是区号的一部分（即 20），而是向交易所发出的信号，意思是“这里有一个可以走出当地”。偶尔会省略区号，而将号码写成 8771 2924。所有这些本地表示都是模棱两可的，因为它们可能代表多个国家/地区的有效号码，甚至是同一国家/地区多个地区的有效号码。这意味着您应该始终存储带有国家代码的数字，最好将其存储在 E 中。123 符号。特别是您应该注意电话号码不是数字。像 05 这样的数字与 5 相同。电话号码 05 是*与*5 不同，存储系统将从数字中去除前导零。将电话号码作为 CHAR 或 VARCHAR 存储在数据库中。

最后，一些奇怪的东西。示例号码将被一些愚蠢的人写为 0208 771 2924。这是可拨号的，但如果您去掉前导 0208 假设它是一个区号，那么其余部分作为本地号码无效。一些电话系统损坏的国家[怒视北美]的系统非常糟糕，在某些地方，您*必须*拨打所有 10 个数字才能拨打本地电话，有些地方您*不能*，有些地方您必须拨打 1NNN NNN NNNN，有些地方您必须拨打不能包括前导的，依此类推。在所有这些情况下，*存储*+CC MMMMM... 的数字是正确的。这取决于实际拨打电话（或他们的拨号软件）的人来弄清楚如何将其转换为他们特定位置的可拨号数字序列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-15T11:49:38.140

有很多当地的国家标准。在我的一个项目中，我遇到了同样的问题。解决为：

1.  在数据库中存储为数字的所有内容：123456789
2.  根据所选网页语言，此数字在页面加载时预先格式化。

例子：

*   法国、卢森堡格式的电话号码，例如 12.34.56.78.90 或 12 34 56 78 90
*   德国：123 45 67 或 123-45-67
*   英国：020 1234 1234 或 1234 01234 12345
*   意大利、荷兰：12 1234567 或 020-1234567
*   独联体国家：123 123-45-67

# ios - 重复 iOS kCGBlendModeSoftLight 混合

> ID：15745548
> 
> 赞同：3
> 
> 时间：2013-04-01T14:42:32.717
> 
> 标签：ios, core-graphics, shader, blending, color-blending

我正在尝试使用着色器复制 CoreGraphics kCBBlendModeSoftLight 混合。（我已经实现了一些其他的 CG 混合模式）

问题是，虽然 Photoshop 的柔光混合有很多（不同的）描述，但我对 CoreGraphics 的版本很感兴趣。

有谁知道 CG 中用于确定混合结果的确切公式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T07:28:32.160

对于 CG，它没有明确记录，但[Core Image 的 CISoftLightBlendMode 过滤器的文档](http://developer.apple.com/library/mac/documentation/GraphicsImaging/Reference/CoreImageFilterReference/Reference/reference.html#//apple_ref/doc/filter/ci/CISoftLightBlendMode)说：

> PDF 规范中描述了用于创建此过滤器的公式，该规范可从 Adob​​e 开发人员中心在线获取。

[这是您可以从中获取 PDF 参考的页面。](http://www.adobe.com/devnet/pdf/pdf_reference_archive.html)给出的公式是（在伪代码中，由我从 PDF 中的数学语法转录，同时希望我没有弄乱它的任何部分）：

```
D(float x) =
    x ≤ 0.25
    ? ((16.0 × x - 12.0) × x + 4.0) × x
    : sqrt(x)

softlight(__color backdrop, __color source) =
    source ≤ 0.5
    ? backdrop - (1.0 - 2.0 × source) × backdrop × (1.0 - backdrop)
    : backdrop + (2.0 × source - 1.0) × (D(backdrop) - backdrop) 
```

（对于 GLSL，您将使用`vec4`而不是 CIKL 的`__color`。）

该部分的介绍指出，其定义使用特定符号的混合模式是“可分离的”，这意味着该公式将分别应用于组件。柔光混合模式是这些混合模式之一，因此您不需要计算亮度值或类似的东西。

# arrays - OCaml：动态数组？

> ID：15745557
> 
> 赞同：2
> 
> 时间：2013-04-01T14:42:51.050
> 
> 标签：arrays, resize, ocaml, immutability, resizable

我一直在试图弄清楚如何在 OCaml 中**调整**已经初始化的数组的大小。但是，似乎虽然您可以编写一个函数来创建一个全新的数组，其中复制旧数组的元素（和额外的插槽），但该函数的输出不能分配给现有数组。如何做到这一点？如果不是没有，是否有一种简单的方法可以使用引用来实现这一点？

这是一个小例子：

```
让 rec function_that_adds_to_array 存储 args ... =
   (* 假设该函数有一组 if-else 结构来控制它的作用，我们进一步说其中一种情况导致：*)
   let new_array = Array.make (Array.length storage) ("Null", ("Null", -2)) in
   Array.blit 集合 0 new_array 0 索引；(* 索引由函数的递归控制 *)
   Array.set new_array index (obj_name, obj_expr);
   new_array) (* 在尾部插入宏 *)
...
;;

###主要方法###
让 storage = Array.make 10 ((x : string), (a, b)) in
...
虽然真的做
...
storage = function_that_adds_to_array 存储参数....；
...

```

function_that_adds_to_array(...) 末尾的 print 语句确认返回了一个新数组，其中包含初始数组的旧元素，但是，在 main 方法中，存储保持不变。这是因为 OCaml 元素的不变性吗？我认为数组是可变的。我环顾四周，有人提到编写 hack 让 OCaml 像 Perl 一样工作，但是，使用个人的 resize hack 函数被证明是徒劳的。有什么办法可以让存储成为一个新的阵列？它需要是一个可更新的元组集合（即 (string, (x, y)) ）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T14:49:35.850

在 OCaml 中，您不能分配给变量，句点。数组没有特别的限制。但是，您可以拥有一个绑定到引用的变量，该引用可以保存相同类型的不同值。这种结构在命令式语言中通常称为“变量”。要在变量中包含不同大小的数组，`x`您可以编写如下代码：

```
# let x = ref [| 0 |];;
val x : int array ref = {contents = [|0|]}
# Array.length x;;
Error: This expression has type int array ref
   but an expression was expected of type 'a array
# Array.length !x;;
- : int = 1
# x := [| 2; 3 |];;
- : unit = ()
# Array.length !x;;
- : int = 2 
```

`!`运算符取消引用一个引用，并且运算`:=`符分配一个新值。

如果您是 OCaml 的新手，我将包含我的标准建议，即您应该在决定重新创建您已经知道的命令式语言的模式之前调查不可变数据的使用。如果您不是 OCaml 的新手，我为我的无礼道歉！

# android - USB 主机的文档令人困惑

> ID：15745561
> 
> 赞同：0
> 
> 时间：2013-04-01T14:43:00.737
> 
> 标签：android, android-intent, usb

我正在使用 USB 的 Android 主机模式。在[主机模式 api](https://developer.android.com/guide/topics/connectivity/usb/host.html)的文档中，清单要求建议使用：

```
android.hardware.usb.action.USB_DEVICE_ATTACHED 
```

[正如UsbManager 文档](https://developer.android.com/reference/android/hardware/usb/UsbManager.html#ACTION_USB_DEVICE_ATTACHED)建议使用的那样，这让我有些困惑：

```
android.hardware.usb.action.ACTION_USB_DEVICE_ATTACHED 
```

有人可以解释两者之间的区别吗？

此外，连接设备时，UsbManager (2nd) 版本不会通知我的应用程序，但主机 (1st) 版本会通知我的应用程序。

我也无法使用任一版本获得分离的意图：

```
android.hardware.usb.action.USB_DEVICE_DETACHED
android.hardware.usb.action.ACTION_USB_DEVICE_DETACHED 
```

请指教。

**编辑**

这是我的清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="cs.android.terminal"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="12" android:targetSdkVersion="15" />

    <uses-feature android:name="android.hardware.usb.accessory" />
    <uses-feature android:name="android.hardware.usb.host" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme"
         >

        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />                
                <category android:name="android.intent.category.LAUNCHER" />
                <action android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED" />                    
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>

            <meta-data android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED" android:resource="@xml/device_filter" />

        </activity>

        <receiver             
            android:name="cs.android.terminal.TerminalReceiver"
            android:exported="false"
            >
           <intent-filter>
                  <action android:name="android.hardware.usb.action.USB_DEVICE_DETACHED" />
                  <category android:name="android.intent.category.DEFAULT" />                
            </intent-filter>
        </receiver>

    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:47:58.297

`USB_DEVICE_ATTACHED`将在您的清单文件中用于检测设备何时连接到 USB。`ACTION_USB_DEVICE_ATTACHED`将在您的 java 代码中使用，以指示执行了一个动作以及该动作是什么。尽管目前存在一个错误/错误，`ACTION_USB_DEVICE_ATTACHED`即 Android 无法在 java 代码中检测到 BroadcastReceiver，但目前只能在您的清单中检测到。所有这一切，`USB_DEVICE_ATTACHED`在你的清单中使用。

**编辑：**试试这个：

```
 <meta-data android:name="android.hardware.usb.action.USB_DEVICE_DETACHED" android:resource="@xml/device_filter" /> 
```

# python - 验证号码长度和位数

> ID：15745565
> 
> 赞同：0
> 
> 时间：2013-04-01T14:43:08.973
> 
> 标签：python, validation, python-3.x

```
a=input('hello enter something ')

def checkingInput():
    if 0 <= int(a) <= 9:
        return a
    else:
        print('Invalid input!')

checkingInput() 
```

我需要验证它检查输入以查看输入的数字是否是正确的长度，应该是 10 并且只包含数字 0 到 9。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T14:46:13.167

`isDigit()`检查它是否为整数。`len()`检查要比较的长度。

```
if a.isdigit():
     print("It's a digit!")
else:
     print("It's not a digit!")

if len(a) == 10:
    print("It's exactly 10 digits long") // digits might also mean "characters"!
else:
    print("It's not exactly 10 digits long") // digits might also mean "characters"! 
```

`isDigit()`有点不安全。它忽略；

*   十六进制
*   小数点
*   负数

如果您想确定可能需要使用正则表达式并查看匹配是否为全数。像这样的东西；

```
/\A\d{10}\Z/ 
```

这也将立即检查您的长度。如果您只想检查数字，请使用；

```
/\A\d+\Z/ 
```

# c# - 如何跟踪循环中完成了多少异步任务？

> ID：15745567
> 
> 赞同：5
> 
> 时间：2013-04-01T14:43:13.190
> 
> 标签：c#, multithreading, c#-4.0, task-parallel-library, task

我有一些代码循环遍历记录列表，为每个记录启动一个导出任务，并在每次任务完成时将进度计数器增加 1，以便用户知道该过程有多远。

但是根据我的循环时间，我经常看到输出在一个较低的数字之前显示一个较高的数字。

例如，我希望看到这样的输出：

```
出口 A
出口 B
导出 C
出口 D
出口电子
完成 1 / 5
完成 2 / 5
完成 3 / 5
完成 4 / 5
完成 5 / 5

```

但相反，我得到这样的输出

```
出口 A
出口 B
导出 C
出口 D
出口电子
完成 1 / 5
完成 2 / 5
完成 5 / 5
完成 4 / 5
完成 3 / 5

```

我不希望输出是准确的，因为当我更新/使用它时我没有锁定该值（有时它输出相同的数字两次，或者跳过一个数字），但是我不希望它*倒退*。

我的测试数据集是72个值，相关代码如下：

```
var tasks = new List<Task>();
int counter = 0;

StatusMessage = string.Format("Exporting 0 / {0}", count);

foreach (var value in myValues)
{
    var valueParam = value;

    // Create async task, start it, and store the task in a list
    // so we can wait for all tasks to finish at the end
    tasks.Add(
        Task.Factory.StartNew(() =>
        {
            Debug.WriteLine("Exporting " + valueParam );

            System.Threading.Thread.Sleep(500);
            counter++;
            StatusMessage = string.Format("Exporting {0} / {1}", counter, count);

            Debug.WriteLine("Finished " + counter.ToString());
        })
    );
}

// Begin async task to wait for all tasks to finish and update output
Task.Factory.StartNew(() =>
{
    Task.WaitAll(tasks.ToArray());
    StatusMessage = "Finished";
}); 
```

输出可以在调试语句和`StatusMessage`输出中向后出现。

计算一个循环中有多少异步任务已完成以便不会发生此问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T15:04:31.390

您会得到混合输出，因为计数器的递增顺序与 `Debug.WriteLine(...)`方法执行的顺序不同。

要获得一致的进度报告，您可以在任务中引入报告锁

```
tasks.Add(
    Task.Factory.StartNew(() =>
    {
        Debug.WriteLine("Exporting " + valueParam );

        System.Threading.Thread.Sleep(500);
        lock(progressReportLock)
        {
           counter++;
           StatusMessage = string.Format("Exporting {0} / {1}", counter, count);
           Debug.WriteLine("Finished " + counter.ToString());
        }
    })
); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-01T15:02:32.157

在此示例中，`counter`变量表示多个线程之间的共享状态。在共享状态上使用`++`运算符是不安全的，并且会给你错误的结果。它基本上归结为以下说明

1.  将计数器推入堆栈
2.  将 1 推入堆栈
3.  在堆栈上添加值
4.  存入柜台

由于多个线程正在执行此语句，因此一个线程可能会在完成上述序列的过程中中断另一个线程。这将导致不正确的值以`counter`.

而不是`++`使用以下语句

```
Interlocked.Increment(ref counter); 
```

此操作专门设计用于更新可能在多个线程之间共享的状态。联锁将自动发生，不会受到我概述的竞争条件的影响

即使在我建议的修复之后，值的实际无序显示也会遇到类似的问题。增量和显示操作不是原子的，因此一个线程可以在增量和显示之间中断另一个线程。如果您希望操作不会被其他线程中断，那么您将需要使用锁。

```
object lockTarget = new object();
int counter = 0; 

...

lock (lockTarget) {
  counter++;
  StatusMessage = string.Format("Exporting {0} / {1}", counter, count);
  Debug.WriteLine("Finished " + counter.ToString());
} 
```

请注意，由于`counter`now 的增量发生在锁内部，因此不再需要使用`Interlocked.Increment`

# .net - .net的内存rabbitmq替代品有什么好处

> ID：15745576
> 
> 赞同：1
> 
> 时间：2013-04-01T14:43:35.367
> 
> 标签：.net, embed, amqp

我需要有一堆节点在rabbitmq庄园中相互交谈，消息/路由/交换。我希望将服务作为应用程序的一部分嵌入。我对此有什么选择。

我发现： http: [//www.codeproject.com/articles/193611/dotnetmq-a-complete-message-queue-system-for-net](http://www.codeproject.com/articles/193611/dotnetmq-a-complete-message-queue-system-for-net) 但想知道是否还有其他

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T14:47:57.023

ZeroMQ - [http://www.zeromq.org/](http://www.zeromq.org/) - 可能很合适。从表面上看，它要简单得多，绝不是传统的完整 MQ 解决方案，但它可以组织成非常整齐的块，以实现模块化设计。

# git - git与不同大小写的目录名称冲突

> ID：15745578
> 
> 赞同：4
> 
> 时间：2013-04-01T14:43:44.227
> 
> 标签：git, case-sensitive, msysgit

我正在使用 msysgit 1.8.1，并且遇到了目录大小写问题。我将 core.ignorecase 设置为 true。但我有一个案例，git 似乎将文件夹放在两个不同的外壳下。因此，当我执行 git add -A 时，它会获取对路径下特定文件的更改

工具\TALRGB\TalRgb.vcxproj

但路径

工具\TALRGB\TalRgb.vcxproj

始终显示为未跟踪的更改。这似乎不会导致任何问题，但如果我将其推广给其他开发人员，这将是一个问题。我怎样才能让 git 不这样做？

这个问题与[git add 不会暂存某些文件有关](https://stackoverflow.com/questions/15687142/git-add-will-not-stage-certain-files)

# workflow-foundation - 来自工作流内部的有关状态机工作流的信息

> ID：15745584
> 
> 赞同：0
> 
> 时间：2013-04-01T14:44:27.543
> 
> 标签：workflow-foundation, .net-4.5, state-machine-workflow

是否有任何 API 或库可以从代码内部以编程方式确定有关 Windows 工作流状态机活动的信息？

具体来说，是否可以检测

1.) 机器当前处于什么状态

2.) 当前安排了哪些转换

3.) 执行了什么转换并导致进入当前状态？

我只是在 Workflow Foundation 中使用状态机（在 4.5 之前从未使用过它们）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T10:41:29.650

您可以使用[StateMachine Instance](http://msdn.microsoft.com/en-us/library/system.workflow.activities.statemachineworkflowinstance.aspx)属性，例如 CurrentState、States、StateHistory 和 PossibleStateTransitions。

其他有用的链接[在这里](http://flylib.com/books/en/1.504.1.66/1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T15:27:49.387

您可以实现状态机跟踪器。这是参考： [http ://code.msdn.microsoft.com/windowsdesktop/Windows-Workflow-fee72008](http://code.msdn.microsoft.com/windowsdesktop/Windows-Workflow-fee72008)

# java - 通过 GET 方法传递到 Java 中的 RESTful Web 服务时，字符串在“#”上被拆分

> ID：15745585
> 
> 赞同：0
> 
> 时间：2013-04-01T14:44:27.870
> 
> 标签：java, web-services, rest, get, jersey

我有一个 RESTful Java Web 服务，它接受一个带有“#”的长字符串。

当我在调用时尝试将字符串发送到方法时，字符串在“#”上被拆分，我可以单独检索 [0] 值。

在发送消息之前是完整的，但是在使用这个之后..

```
req.open("GET","https://localhost:8443/registername/resources/registerName/"+"My#Name", true);
req.send(); 
```

是问题所在。

这些是 Web 服务中的前几行...

```
@GET
@Path("/{message}")
public String validateName(@PathParam("message") String message) throws Exception{
    System.out.println(message);
...} 
```

而且，它单独显示“我的”。

谁能帮我解释为什么会这样？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T14:50:18.817

在 URL 中，# 符号表示“命名锚”，即本地 javascript，它不会发送到远程服务器，所以当你有 URL 时：

```
https://localhost:8443/registername/resources/registerName/My#Name 
```

名称未发送到服务器。您需要使用不同的拆分字符。

有关更多信息，请参阅[链接中包含井号“#”](https://stackoverflow.com/questions/2800187/what-is-it-when-a-link-has-a-pound-sign-in-it)或[http://www.hypergurl.com/anchors.html](http://www.hypergurl.com/anchors.html)时的含义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T15:43:59.983

HTTP post 或 get 不会在 # 之后读取任何内容，在执行 POST 或 GET 之前执行 URLEncode。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T14:51:59.200

我认为 # 之后的部分不会随 GET 请求一起发送。

# java - Tomcat 7 - 无法使 CATALINA_OPTS 堆大小正常工作

> ID：15745590
> 
> 赞同：2
> 
> 时间：2013-04-01T14:44:41.197
> 
> 标签：java, tomcat, heap-memory, tomcat7, catalina

我在 catalina.sh 中设置 CATALINA_OPTS 但奇怪的是这个值似乎被忽略了。我在一台有 768M RAM 的机器上。以下是重现的步骤

我在启动 Tomcat 之前通过运行检查内存`free -m`。我得到以下

```
 total       used       free     shared    buffers     cached
    768         43        724          0          0         16 
```

我在 catalina.sh 的第一行设置了 CATALINA_OPTS，如下所示：

```
export CATALINA_OPTS="-Xms64M -Xmx256M" 
```

然后我使用`./startup.sh`

我检查 Tomcat 是否通过执行`ps aux | grep tomcat`. 我得到以下结果，这似乎表明该设置已被读取

> 根 1164 26.0 6.2 1232968 49116 pts/0 Sl 10:30 0:01 /usr/bin/java -Djava.util.logging.config.file=/usr/share/apache-tomcat-7.0.39/conf/logging.属性 -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager **-Xms64M -Xmx256M** -Djava.endorsed.dirs=/usr/share/apache-tomcat-7.0.39/endorsed -classpath /usr/share/apache -tomcat-7.0.39/bin/bootstrap.jar:/usr/share/apache-tomcat-7.0.39/bin/tomcat-juli.jar -Dcatalina.base=/usr/share/apache-tomcat-7.0.39 -Dcatalina.home=/usr/share/apache-tomcat-7.0.39 -Djava.io.tmpdir=/usr/share/apache-tomcat-7.0.39/temp org.apache.catalina.startup.Bootstrap start

我又跑了`free -m`，但我得到了

```
 total       used       free     shared    buffers     cached
       768        558        209          0          0         20 
```

这表明使用了 512MB。我不确定我做错了什么。我也尝试设置 JAVA_OPTS 但这也不起作用。

我在带有 JDK7 和 Apache Tomcat 7 的 CentOS 6 上。

**编辑 1**：如果我将 -Xmx 值分别设置为 128 和 64，结果如下

```
 total       used       free     shared    buffers     cached
       768        432        335          0          0         39 
```

和

```
 total       used       free     shared    buffers     cached
       768        366        401          0          0         32 
```

看起来 -Xms 设置根本没有效果，并且正在使用超过 -Xmx 设置值的大约 250MB。

这个比较难解释。这是一个普通的 Tomcat 7 安装，没有安装 webapps（除了默认的）。他们肯定不会占用 250 MB，是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:17:12.257

请注意，堆并不是 java 获取的唯一内存块。另外，如果tomcat的启动进程使用了​​超过64M，JVM会很乐意分配更多的内存直到-Xmx值。但这还不是全部——各种堆栈的堆栈占用内存，以及要加载的类。PermGen 内存也位于堆内存之上。

查看[这篇文章](http://javaguru.fi/blog/-/blogs/why-is-my-java-process-taking-more-memory-than-i-gave-it-)，了解更多关于您正在处理的各种内存的讨论。鉴于今天的内存价格，升级服务器以获得更多内存可能比担心在此级别上优化应用程序的内存消耗更便宜。

# actionscript-3 - 扫雷——游戏结束

> ID：15745593
> 
> 赞同：1
> 
> 时间：2013-04-01T14:44:43.823
> 
> 标签：actionscript-3

当您获胜时，我的扫雷游戏不会停止。我需要有关停止游戏并显示“You Win”的代码的帮助。

一切都很好，“你输了” - 也很有效。

```
package {

// importing classes
import flash.display.Sprite;
import flash.events.MouseEvent;
import flash.events.TimerEvent;
import flash.utils.Timer;
// end of importing classes 
public class Main extends Sprite {
    // class level variables
    private const FIELD_W:uint=9;
    private const FIELD_H:uint=9;
    private const MINES:uint=5;
    private const fill_tile=1;
    private const empty_tile=2;
    private const mine=3;
    private const flag=4;
    private var emptyTile:tile_movieclip;
    private const qty=FIELD_W*FIELD_H;
    private var mineField:Array=new Array  ;
    private var game_container:Sprite=new Sprite  ;
    private var tile:tile_movieclip;
    private var timer:Timer=new Timer(1000);
    private var toolbar:toolbar_mc;
    private var gameOver:Boolean=false;
    private var firstClick:Boolean=true;
    // end of class level variables
    public function Main() {
        // mine field creation
        for (var i:uint=0; i<FIELD_H; i++) {
            mineField[i]=new Array  ;
            for (var j:uint=0; j<FIELD_W; j++) {
                mineField[i].push(0);
            }
        }
        // end of mine field creation
        // tile creation
        addChild(game_container);
        for (i=0; i<FIELD_H; i++) {
            for (j=0; j<FIELD_W; j++) {
                tile=new tile_movieclip  ;
                game_container.addChild(tile);
                tile.gotoAndStop(fill_tile);
                tile.nrow=i;
                tile.ncol=j;
                tile.buttonMode=true;
                tile.x=5+(tile.width+0.5)*j;
                tile.y=5+(tile.height+0.5)*i;
                tile.addEventListener(MouseEvent.CLICK,onTileClicked);
            }
        }
        // end of tile creation
        // time management and game over
        toolbar=new toolbar_mc  ;
        addChild(toolbar);
        toolbar.y=stage.stageHeight-toolbar.height;
        timer.start();
        timer.addEventListener(TimerEvent.TIMER,onTick);
        // end of time management and game over
    }
    private function onTick(e:TimerEvent):void {
        toolbar.message_text.text="Elapsed time: "+e.target.currentCount+"s";
    }
    private function onTileClicked(e:MouseEvent):void {
        if (! gameOver) {
            var clicked_tile:tile_movieclip=e.currentTarget as tile_movieclip;
            var clickedRow:uint=clicked_tile.nrow;
            var clickedCol:uint=clicked_tile.ncol;
            if (firstClick) {
                firstClick=false;
                // placing mines
                var placedMines:uint=0;
                var randomRow,randomCol:uint;
                while (placedMines<MINES) {
                    randomRow=Math.floor(Math.random()*FIELD_H);
                    randomCol=Math.floor(Math.random()*FIELD_W);
                    if (mineField[randomRow][randomCol]==0) {
                        if (randomRow!=clickedRow||randomCol!=clickedCol) {
                            mineField[randomRow][randomCol]=9;
                            placedMines++;
                        }
                    }
                }
                // end of placing mines
                // placing digits
                for (var i:uint=0; i<FIELD_H; i++) {
                    for (var j:uint=0; j<FIELD_W; j++) {
                        if (mineField[i][j]==9) {
                            for (var ii:int=-1; ii<=1; ii++) {
                                for (var jj:int=-1; jj<=1; jj++) {
                                    if (ii!=0||jj!=0) {
                                        if (tileValue(i+ii,j+jj)!=9&&tileValue(i+ii,j+jj)!=-1) {
                                            mineField[i+ii][j+jj]++;
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
                var debugString:String;
                trace("My complete and formatted mine field: ");
                for (i=0; i<FIELD_H; i++) {
                    debugString="";
                    for (j=0; j<FIELD_W; j++) {
                        debugString+=mineField[i][j]+" ";
                    }
                    trace(debugString);
                }
                // end of placing digits
            }
            var clickedValue:uint=mineField[clickedRow][clickedCol];
            if (e.shiftKey) {
                clicked_tile.gotoAndStop(5-clicked_tile.currentFrame);
            } else {
                if (clicked_tile.currentFrame==fill_tile) {
                    clicked_tile.removeEventListener(MouseEvent.CLICK,onTileClicked);
                    clicked_tile.buttonMode=false;
                    // emptyTile tile
                    if (clickedValue==0) {
                        floodFill(clickedRow,clickedCol);
                    }
                    // end of emptyTile tile
                    // numbered tile
                    if (clickedValue>0&&clickedValue<9) {
                        clicked_tile.gotoAndStop(empty_tile);
                        clicked_tile.tile_text.text=clickedValue.toString();
                    }
                    // end of numbered tile
                    // mine
                    if (clickedValue==9) {
                        clicked_tile.gotoAndStop(mine);
                        timer.removeEventListener(TimerEvent.TIMER,onTick);
                        toolbar.message_text.text="You LOSE!!!";
                        gameOver=true;
                    }

                    // end of mine
                }
            }
        }
    }
    private function tileValue(row,col:uint):int {
        if (mineField[row]==undefined||mineField[row][col]==undefined) {
            return -1;
        } else {
            return mineField[row][col];
        }
    }
    private function floodFill(row,col:uint):void {
        emptyTile=game_container.getChildAt(row*FIELD_W+col) as tile_movieclip;
        if (emptyTile.currentFrame==fill_tile) {
            emptyTile.removeEventListener(MouseEvent.CLICK,onTileClicked);
            emptyTile.buttonMode=false;
            emptyTile.gotoAndStop(empty_tile);
            if (mineField[row][col]>0) {
                emptyTile.tile_text.text=mineField[row][col].toString();
            } else {
                emptyTile.tile_text.text="";
            }

            if (mineField[row][col]==0) {
                for (var ii:int=-1; ii<=1; ii++) {
                    for (var jj:int=-1; jj<=1; jj++) {
                        if (ii!=0||jj!=0) {
                            if (tileValue(row+ii,col+jj)!=9) {
                                if (tileValue(row+ii,col+jj)!=-1) {
                                    floodFill(row+ii,col+jj);
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:35:19.683

您可以尝试制作一个新标志（类似于“minesLeft=1”），然后当 Mines 计数为 0 时，将其设置为“minesLeft=0”。这将让您显示游戏结束消息，并可能显示“重新启动”或“退出”选项。

我会说它值得一试。干杯。

# asp.net-mvc - asp.net mvc 剃刀文本框

> ID：15745595
> 
> 赞同：0
> 
> 时间：2013-04-01T14:44:45.347
> 
> 标签：asp.net-mvc, razor

如何检查在 ASP.NET MVC @Html.TextBox 中输入的值并将其与数据库中的值进行比较？我想做一个简单的登录，想看看在文本框中输入的值是否与数据库中的相同

```
<tr><td>Username</td><td>:</td><td>@Html.TextBox("username", new { @value = ViewBag.username })</td></tr> 
```

我尝试过创建一个viewbag，然后将它带到控制器，但它似乎没有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T15:01:29.650

为这个特定的 UI 创建一个视图模型（一个简单的类）

```
public class LoginViewModel
{
  [Required]
  public string UserName { set;get;}

  [Required]
  [DataType(DataType.Password)]
  public string Password { set;get;}
} 
```

现在在您的**GET**操作中，创建此类的一个对象并发送到您的视图。

```
public ActionResult Login()
{
  var vm=new LoginViewMode();
  return View(vm);
} 
```

现在在我们的 LoginViewModel 强类型登录视图（Login.cshtml）中，我们将使用 TextBoxFor html 帮助器方法来呈现我们的`UserName`和`Password`字段的文本框。

```
@model LoginViewModel
@using(Html.Beginform())
{
  UserName 
  @Html.TextBoxFor(x=>x.UserName);

  Password
  @Html.TextBoxFor(x=>x.Password)
  <input type="submit" />
} 
```

这将呈现一个将 action 属性值设置为 的表单`/YourCotnroller/Login`。现在我们需要一个**HttpPost**操作方法来处理表单发布

```
[HttpPost]
public ActionResult Login(LoginViewModel model)
{
  if(ModelState.IsValid)
  {
    string uName=model.UserName;
    string pass=model.Password.

    //Now you can use the above variables to check it against your dbrecords.  
    // If the username & password matches, you can redirect the user to 
    //  another page using RedirecToAction method
    //  return RedirecToAction("UserDashboard")

  }
  return View(model);
}
public ActionResult UserDashboard()
{
  //make sure you check whether user is logged in or not
  // to deny direct access without login
  return View();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T15:08:33.577

试试这样：

在 Model 类中定义模型属性：

```
public class Login{

        [Required]
        [Remote("IsUserNameAvaliable", "Home")]
        public string username{get;set;}

        [Required]
        public string password{get;set;}
} 
```

放置的`Remote`属性将`IsUserNameAvaliable`在控制器名称中找到方法/操作`Home`。

MVC 中用于此目的的远程属性服务器。

```
public JsonResult IsUserNameAvaliable(string username)
        {
            //Check if there are any matching records for the username name provided
            if (_dbEntity.Users.Any(c => c.UserName == username))
            {
                //If there are any matching records found

                return Json(true, JsonRequestBehavior.AllowGet);
            }
            else
            {
                string userID = String.Format(CultureInfo.InvariantCulture,
                                "{0} is not available.", username);

                return Json(userID, JsonRequestBehavior.AllowGet);
            }

        } 
```

现在在您的视图中强烈键入文本框

```
@model Application.Models.Login

@Html.TextBoxFor(m=>m.username)
@Html.ValidationMessageFor(m=>m.username) 
```

不要忘记包含 jquery 验证脚本。

```
 @Scripts.Render("~/bundles/jquery")
 @Scripts.Render("~/bundles/jqueryval") 
```

# c# - 如何修改依赖属性的 setter 值？

> ID：15745603
> 
> 赞同：1
> 
> 时间：2013-04-01T14:45:09.653
> 
> 标签：c#, wpf, dependency-properties

我有一个简单的依赖属性。我有一个带有按钮的用户控件。我希望调用者将一个名为 MyName 的属性设置为“Hello”。我希望依赖属性代码将字符串“World”附加到末尾。这是我尝试这样做的代码：

```
#region MyNAME DEPENDENCY PROPERTY
private string _myName;
public string MyName
{
    get { return this._myName; } //a breakpoint here never trips
    set
    {
        this._myName = value;
        this.OnPropertyChanged("MyName");
    }
}

public string MyName2 { get { return this._myName; } } //a breakpoint here will trip

public static readonly DependencyProperty MyNameProperty = DependencyProperty.Register("MyName", typeof(string), typeof(MyTabControl), new PropertyMetadata("", OnMyNamePropertyChanged));

private static void OnMyNamePropertyChanged(DependencyObject dependencyObject, DependencyPropertyChangedEventArgs e)
{
    MyTabControl myUserControl = dependencyObject as MyTabControl;
    myUserControl.OnMyNamePropertyChanged(e);
    myUserControl.OnPropertyChanged("MyName");
}
private void OnMyNamePropertyChanged(DependencyPropertyChangedEventArgs e)
{
    this.MyName = (string)e.NewValue + " World";
}
#endregion //end MyNAME 
```

我的按钮 XAML 代码如下所示：

```
<Button Content="{Binding Path=MyName, Mode=OneWay}" /> 
```

当我加载具有此控件的页面时，如下所示：

```
<local:MyTabControl MyName="Hello" /> 
```

我得到一个显示“Hello”的按钮，而不是显示“Hello World”的按钮。奇怪的是，如果我将按钮 XAML 代码更改为使用 MyName2，如下所示：

```
<Button Content="{Binding Path=MyName2, Mode=OneWay}" /> 
```

有用。getter 代码是相同的（我在上面包含了它）。我猜得到 _myName 的代码比我预期的更早被调用。我也没想到的是 MyName getter 似乎永远不会被调用。当我在那里设置断点时，它不会跳闸。但是，当我将按钮绑定路径更改为使用 MyName2 时，放置在该 getter 上的断点将会跳闸。

我在这里做错了什么？如何使用 MyName 属性并让我的按钮显示“Hello World”（当然不使用第二个 getter）

编辑：添加新代码。

我接受了您的两个建议，并将我的 C# 代码更改为：

```
public string MyName
{
    get { return (string)GetValue(MyNameCustomProperty); }
    set { SetValue(MyNameCustomProperty, value + " World"); }
}
public static DependencyProperty MyNameCustomProperty = DependencyProperty.Register("MyName", typeof(string), typeof(MyTabControl)); 
```

（我仍然是依赖属性的新手）我仍然遇到与以前的代码相同的问题。我可以用这段代码做点什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T15:51:35.643

看来我需要强制价值。我是这样做的：

```
public string MyName
{
    get { return (string)GetValue(MyNameCustomProperty); }
    set { SetValue(MyNameCustomProperty, value); }
}
public static DependencyProperty MyNameCustomProperty = DependencyProperty.Register("MyName", typeof(string), typeof(MyTabControl), new PropertyMetadata("", MyPropertyChanged, CoerceCurrentReading));

private static void MyPropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
{
    //contains coerced value
}

private static object CoerceCurrentReading(DependencyObject d, object value)
{
    MyTabControl tab = (MyTabControl)d;
    return (string)value + " World";
} 
```

这看起来像是将 XAML 代码输入的值从“Hello”更改为“Hello World”的最简洁方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T14:50:42.977

这里的部分问题是您没有使用真正的依赖属性。为了使用依赖属性，您需要使用实际的依赖属性存储而不是字段。这个后备存储是绑定之类的项目获取它们的值的地方。将您的代码更改为以下内容并删除支持字段

```
public string MyName
{
    get { return (string)this.GetValue(MyNameProperty); }
    set { this.SetValue(MyNameProperty, value); }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T17:00:54.913

您想在通知发生之前更改设置的值。最简单的解决方案是将支持字段的值设置为您想要的值，然后通知：

```
public string MyName
{
    get { return this._myName; } //a breakpoint here never trips
    set
    {
        this._myName = (string)value + "World!";
        this.OnPropertyChanged("MyName");
    }
} 
```

您遇到的问题是您设置了支持字段。然后通知，通知 UI 进行更新，并触发 OnNotifyPropertyChanged。OnNotifyPropertyChanged 在属性更改后调用，您尝试更改支持字段。

# database - SQL“本质上是事务性的”吗？

> ID：15745604
> 
> 赞同：0
> 
> 时间：2013-04-01T14:45:19.517
> 
> 标签：database, transactions

[我刚刚在Wikipedia](http://en.wikipedia.org/wiki/Database_transaction)中读到，SQL 本质上是事务性的。我认为这意味着默认情况下，对 SQL DBMS 所做的每条语句都被视为事务。这个对吗？

我能想到的一个可能使这个问题相关的例子是，如果您考虑这样的更新语句：

```
UPDATE Employee SET salary=salary * 1.1 WHERE type='clerk'; 
```

如果这正在处理并且有一些故障导致 DBMS 在重新启动时关闭，在事务意义上，更新的记录不会回滚吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:08:44.563

至少在 SQL Server 中，如果你运行一个事务，用

```
BEGIN TRAN 
```

并且您不提交或回滚事务，它会询问您（如果您尝试退出窗口）是否要提交事务。如果某些事情导致一切崩溃，并且我们有一个打开的事务（意思是，没有什么可以关闭它），它*不会*被认为是已提交的。

`COMMIT TRAN`您的问题说明了许多开发人员仅在没有错误的情况下才使用 a 的另一个原因，因此默认情况下每个事务都会回滚。

免责声明：我***只***指 SQL Server - 我不能说这对其他 SQL 数据库也适用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T15:15:20.957

The answer is no. SQL is a language, what you describe is ACID behaviour. Though many database systems behave that way, it is still perfectly possible to create one that uses SQL as language and allows statements to be partially executed.

# objective-c - 在 XCode 的自定义/用户代码片段中添加时间和日期

> ID：15745605
> 
> 赞同：8
> 
> 时间：2013-04-01T14:45:27.907
> 
> 标签：objective-c, xcode, macos, code-snippets, xcode4.6

如何在我的自定义代码片段中添加日期时间？

我需要经常使用将我的代码添加到其他代码上，而对于其他代码，我需要添加我的姓名和日期时间。

我使用快捷方式 _ase 创建了一个代码片段，但我在网上找不到任何帮助，我该如何添加时间。

![在此处输入图像描述](https://i.stack.imgur.com/kN13w.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T06:59:19.457

您不能使用本机 Xcode 片段语法自动添加日期或时间。

`<#VisibleTokenName#>`除了使用语法进行标记替换之外，片段没有任何其他内容。

`___DATE___`文件模板的生成方式不同，除了可以在 UI 中收集自定义标记外，还可以用标记替换一小部分预定义标记（如）。

您可以编写一个 bash 脚本（或其他任何东西）来使用正确的日期为您更新片段文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T07:16:46.210

看起来你不能使用 XCode 片段来做到这一点，但我可以建议使用苹果脚本的快速解决方法：

```
set str to "// Created by Anoop Vaidya on " & (do shell script "date '+%d/%m/%Y'")
tell application "Xcode"
    activate
    set the clipboard to (str as text)
    tell application "System Events"
        keystroke "v" using command down
    end tell
end tell 
```

您可以使用苹果脚本设置日期：

```
 set str to ("// Created by Anoop Vaidya on " & day of (current date) & "/" & ((month of (current date)) as integer) as string) & "/" & year of (current date) 
```

但它不像使用shell脚本那么方便。
现在您只需将该脚本绑定到某个快捷方式（例如使用 FastScripts）并使用它。

您可以向脚本添加一些附加功能，例如从剪贴板保存以前的值然后恢复它，或者可能只是使用一些 XCode 脚本属性直接插入文本而不使用剪贴板。

# java - 在等待 java 完成时暂停批处理文件

> ID：15745608
> 
> 赞同：3
> 
> 时间：2013-04-01T14:45:36.547
> 
> 标签：java, batch-file, cmd

我需要从一个批处理脚本运行两个 java 程序。我需要等待第一个 java 程序在第二个开始之前完成运行。有没有办法做到这一点？我在 Windows 机器上，无法编辑 java 程序，所以我使用批处理脚本来启动它们。

所以它会是这样的

```
cd %PARSEDIR%
set CLASSPATH=.\lib\jpcap-0.01.16.jar
set CLASSPATH=%CLASSPATH%;.\lib\jpcap.jar
START /WAIT java -Xms768m -Xmx768m -classpath %CLASSPATH% parser.test.firstStage %2
timeout 5
START /WAIT java -Xms768m -Xmx768m -classpath %CLASSPATH% parser.test.lastStage %2 
```

我需要在批处理脚本继续之前完成第一个程序。我该如何做到这一点？

谢谢！

编辑：添加了代码当前的样子

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T14:48:20.543

使用`start /WAIT`命令（[http://ss64.com/nt/start.html](http://ss64.com/nt/start.html)）

# node.js - 我在将数组从我的 node.js 应用程序传递到我的 javascript 客户端时遇到问题

> ID：15745612
> 
> 赞同：0
> 
> 时间：2013-04-01T14:45:53.407
> 
> 标签：node.js

我在我的网站上有实时聊天，现在只是投票。我想与时俱进，并将其替换为 node.js 版本。我一直在取得良好的进展，但现在被困在似乎只是语法问题的事情上。

所以我要做的是当用户第一次访问我的网站时，我想向他们展示 mysql 数据库中的最新聊天记录。所以它将是

时间用户他们的消息

我正在从我的 app.js 文件中发送有关用户连接的数据

```
io.sockets.on('connection', function (socket) {
//Make connection to mysql 
connection.query('select values from my_table limit 5', function(err, rows, fields) {
user_info = new Array();
for (i = 0; i < rows.length; i++) {
  user_info[i] = new Array();
  user_info[i]['time'] = rows[i].time;
  user_info[i]['user'] = rows[i].user;
  user_info[i]['their_message'] = rows[i].their_message;
}
io.sockets.emit('some_event_tag', user_info);
}); 
```

所以这是可行的，除了当我尝试在与“some_event_tag”关联的函数下访问这些数据时，我的语法似乎是关闭的，因为我没有得到信息。所以在客户端，我试图访问数据

```
some_event_tag: function(data) {
  var msg = '';
  for (i = 0; i < data.length; i++) {
    msg = $('<div class="msg"></div>')
      .append('<span class="name">' + data[i]['user'] + '</span>: ')
      .append('<span class="text">' + data[i]['their_message'] + '</span>');
      $('#messages')
        .append(msg);
    msg = '';
  }
}, 
```

但无论出于何种原因，我都变得“未定义”。在服务器端，如果我改变

```
io.sockets.emit('some_event_tag', user_info); 
```

类似于

```
io.sockets.emit('some_event_tag', user_info[0]['user']); 
```

我可以在客户端访问这个值（只需说“数据”）。当然，在这种情况下，我只传递一个值。不是我想要的。在客户端，我还可以正确地看到正在传递五个数组元素。换句话说，data.length 正确设置为 5。但是，我实际上无法弄清楚在客户端访问数据的语法。这不只是典型的 javascript 数组吗？在这一点上我有点难过，这次谷歌没有帮助我。你们可以提供的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T16:04:16.600

JavaScript 有一个相当强的假设，即s 使用和`Array`之间的数字键。虽然它们仍然可以有其他键，但大多数处理s 的函数都会忽略它们——包括Socket.IO 使用的那些。`0``length-1``Array`[`JSON.stringify()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)

因此，如果您需要设置其他键并且不希望它们被跳过，您将需要使用普通键`Object`：

```
var user_info = new Array();
for (var i = 0; i < rows.length; i++) {
  user_info[i] = new Object();
  // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T15:08:48.933

我怀疑制作[SSCCE](http://sscce.org/)会突出您的问题，其中包括：

```
// The time is the user and the user is the time? ;)
user_info[i]['time'] = rows[i].user;
user_info[i]['user'] = rows[i].time; 
```

如果`rows[i].time`是类似*日期的*东西，那么`user_info[i]['user']`很可能是类似*日期的*东西。关于 io.sockets.emit 是否可以*发出*类似日期的东西的问题出现了：

```
io.sockets.emit('some_event_tag', user_info[0]['user']); 
```

io.sockets.emit 似乎没有文档。这并不完全有帮助，是吗？哦，好吧。我很自信。让我们更新，对吧？

# android - Restlet android 客户端/jersey java 服务器

> ID：15745616
> 
> 赞同：2
> 
> 时间：2013-04-01T14:46:06.653
> 
> 标签：android, web-services, rest, jersey, restlet

我在 Java EE 应用程序中使用 Jersey 创建了一个 Rest Web 服务。而且我还能够在 Java 应用程序中创建客户端。我工作得很好。

我现在正在尝试使用我的 Web 服务，但这次使用的是 Android。

我了解 Jersey 库不是面向 android 的（这是真的吗？请确认此信息）并且我读到 Restlet 是构建 Android 客户端的替代方案。

这怎么可能？你有任何我可以为此目的阅读的教程或文档吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:52:51.117

> “我知道泽西库不是面向 android 的（这是真的吗？请确认此信息）”

这很明显。如果您在球衣网站上进行搜索，则不会显示任何内容。

此外，在 Android 上很难找到有关 Restlet 的教程。我认为你必须适应 Java 版本。就个人而言，我使用一个普通的 http 客户端来做 REST 的事情。（我想很多人也这样做。）

关于 Restlet，您可能会发现这些很有用：

[http://weblogs.asp.net/uruit/archive/2011/09/13/accessing-odata-from-android-using-restlet.aspx](http://weblogs.asp.net/uruit/archive/2011/09/13/accessing-odata-from-android-using-restlet.aspx)

[http://restlet.org/learn/guide/2.1/editions/android/](http://restlet.org/learn/guide/2.1/editions/android/)

[http://blog.restlet.com/2009/05/06/restlet-available-on-android-phones/](http://blog.restlet.com/2009/05/06/restlet-available-on-android-phones/)

如果您改变主意并想在没有框架的情况下这样做，这些问题将非常有帮助。

[RESTful API 服务](https://stackoverflow.com/questions/3197335/restful-api-service)

[需要实现 Virgil Dobjanschi REST 实现模式的示例 Android REST 客户端项目](https://stackoverflow.com/questions/4948152/need-sample-android-rest-client-project-which-implements-virgil-dobjanschi-rest?lq=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T16:53:57.230

我以前见过有人在 Android 上使用 Jersey 时遇到问题。您必须与许多异常作斗争才能使其正常工作。[github 上](https://github.com/giorgio-zamparelli/jersey-android)有一个库，它试图为 jersey 提供 android 支持，但我自己没有使用过。

[Restlet 可在 Android 手机上使用](http://blog.restlet.com/2009/05/06/restlet-available-on-android-phones/)，您可以更轻松地集成它并使其工作。但是，我个人发现使用 Android 上的 HTTP 客户端库和外部库来执行序列化/反序列化（如[gson](https://sites.google.com/site/gson/gson-on-android)）是编写 REST 客户端的最简单途径。

# xcode - 从 webview 组件获取 URL

> ID：15745619
> 
> 赞同：0
> 
> 时间：2013-04-01T14:46:21.770
> 
> 标签：xcode, webview, components

我正在使用 WebView 组件，有时我会重新加载此组件。但有时，在重新加载之前，我想获取 WebView 仍然指向的 URL。有没有可能得到这些信息？？

先感谢您。亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:22:52.177

```
UIWebView *myWebView = // ... well, we'll just say it exists.
NSLog(@"last loaded or currently loading URL: %@", myWebView.request.URL); 
```

这`request`是一个`NSURLRequest`用于请求页面的对象，因此您几乎可以从中获取任何可能需要的东西。

# java - 用Java设计一个客户端/服务器消息系统

> ID：15745620
> 
> 赞同：-2
> 
> 时间：2013-04-01T14:46:22.343
> 
> 标签：java, json, architecture, client-server

我正在尝试设计一个系统来协调不同客户端和中央服务器之间的消息。有许多不同的消息类型，每种消息类型中都有不同的信息。就像消息头、时间、消息类型和实际消息一样。我需要随意在客户端和服务器之间传递它们。因此，如果服务器决定客户端 B3 需要一条消息，而客户端 B1 需要一条消息，它应该能够将其发送给它们。我正在考虑某种 RESTful JSON 消息传递系统，但后来我不知道如何在没有客户端隐式请求的情况下从服务器向客户端发送消息。有谁知道构建这个系统的最佳方法，或者可以指出我正确的方向？如果您需要更多信息，我将很乐意提供。

![客户端/服务器架构](https://i.stack.imgur.com/4VG0E.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T14:51:53.013

这听起来很像队列——我们必须做一些非常接近你现在正在做的事情。最后，我们使用了 google 协议缓冲区和 JMS 消息作为二进制文件。我认为 JMS 是从这里开始的地方。已经有很多这样的解决方案——你需要适应它们。ActiveMQ 可能是“最近的”

# php - Paypal 沙盒测试 - 更改 URL 端点？

> ID：15745626
> 
> 赞同：7
> 
> 时间：2013-04-01T14:46:55.317
> 
> 标签：php, forms, paypal, sandbox

最近 Paypal Sandbox 似乎发生了很多变化，我一直在进行测试。之前，我们只指向[https://www.sandbox.paypal.com/cgi-bin/webscr](https://www.sandbox.paypal.com/cgi-bin/webscr)进行沙盒测试，如下面的代码所示：

```
<form action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post" style="padding: 0; margin: 0;">
<input type="hidden" name="cmd" value="_xclick" />
<input type="hidden" name="business" value="your bussiness id" />
<input type="hidden" name="quantity" value="1" />
<input type="hidden" name="item_name" value="your item" />
<input type="hidden" name="item_number" value="1" />
<input type="hidden" name="amount" value="item price" />
<input type="hidden" name="shipping" value="0" />
<input type="hidden" name="no_note" value="1" />
<input type="hidden" name="notify_url" value="Your notify url">
<input type="hidden" name="currency_code" value="GBP" />
<input type="hidden" name="rm" value="2" >
<input type="hidden" name="return" value="your return url">
<input type="image" border="0" name="paypal" src="images/btn_paypal_nl.gif" onClick=""/>
</form> 
```

但现在，Sandbox 一直要求我“请登录以使用 PayPal Sandbox 功能”。我认为这意味着鉴于最新的 Paypal Sandbox 更改，我使用了错误的端点。

我现在的问题是：

*   这仍然有效吗？
*   如果是，“ [https://www.sandbox.paypal.com/cgi-bin/webscr](https://www.sandbox.paypal.com/cgi-bin/webscr) ”被替换为什么？

到目前为止，我假设我上面提到的 URL 是我需要做的唯一更改。但是，我找不到有关将表单提交到的新 URL 的新文档。并且 Paypal 没有关于此的更新文档。

请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T15:31:44.340

是的，链接“ [https://www.sandbox.paypal.com/cgi-bin/webscr](https://www.sandbox.paypal.com/cgi-bin/webscr) ”仍然有效。但是，现在您必须使用您的 paypal 帐户凭据登录到您的 paypal.developer 帐户。如果你没有这个，那么只需在这里创建一个[https://developer.paypal.com/webapps/developer/applications/accounts](https://developer.paypal.com/webapps/developer/applications/accounts)。您的旧沙箱登录凭据将无法在此处使用。但是通过您的贝宝帐户登录后，您可以将旧沙盒的个人和企业帐户导入此处。

通过使用[https://developer.paypal.com/webapps/developer/applications/accounts记录在新选项卡中创建会话](https://developer.paypal.com/webapps/developer/applications/accounts)

如果仍然看到只有 sandbox.com 名称的沙盒空白页面，那么只需清除您的 cookie 并缓存再试一次。

希望这对你有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-15T12:52:16.573

请更改您的 cmd 值`_xclick/`->`_xclick`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T14:50:10.123

使用 paypal 沙盒功能时，您必须先登录[https://developer.paypal.com/](https://developer.paypal.com/)的开发者专区，在此建立会话。我通常在不同的选项卡中打开它。

* * *

*编辑*

如果您在开发人员区域最近更新之前拥有开发人员帐户，您可能需要进入并设置一个新的沙盒帐户。我无法访问已设置的沙盒帐户，但 API 调用仍然有效。

检查[https://developer.paypal.com/webapps/developer/applications/accounts](https://developer.paypal.com/webapps/developer/applications/accounts)。如果您看到您的旧帐户在其中列出了一个禁用的复选框，或者根本没有看到它列出，请创建一个新帐户。

# javascript - UIWebView 找不到 .css 和 .js 文件

> ID：15745627
> 
> 赞同：0
> 
> 时间：2013-04-01T14:46:56.867
> 
> 标签：javascript, iphone, css, xcode, uiwebview

我在我的项目中添加了一个`.html`、两个`.js`和一个`.css`文件，并且我在 UIWebView 中使用了以下代码来访问 .html 文件

```
[web1 loadRequest:[NSURLRequest requestWithURL:
                           [NSURL fileURLWithPath:[[NSBundle mainBundle]

pathForResource:@"index" ofType:@"html"] isDirectory:NO]]]; 
```

其中 web1 是我的 UIWebView 并且是合成的。现在，当我打开那个页面时，它没有任何 CSS，只有按顺序排列的线条和链接，没有任何装饰。

而且，当我单击任何链接时，它不会显示我的预期结果，因为 .js 无法正常工作（或者我应该说，xcode 没有找到它们，尽管我已将它们添加到普通文件以及构架）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:31:46.650

请检查以下事项：

*   您是否将文件正确添加到您的项目资源中？
*   它们是否包含在您的目标构建阶段中？

如果您确定这一点，但它仍然无法正常工作，我建议您尝试以下方法（过去对我有用）

```
UIWebView *webView = [[UIWebView alloc] init];
NSURL *url = [[NSBundle mainBundle] URLForResource:@"index" withExtension:@"html"];
NSString *htmlString = [NSString stringWithContentsOfURL:url encoding:NSUTF8StringEncoding error:nil];
[webView loadHTMLString:htmlString baseURL:[NSURL URLWithString:[[NSBundle mainBundle] resourcePath]]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T09:15:06.567

检查这个答案，我认为他们可能会为您指明正确的方向：

[UIWebView 不加载外部 Javascript 文件](https://stackoverflow.com/questions/3606272/uiwebview-doesnt-load-external-javascript-file)

[iPhone UIWebView 本地资源使用 Javascript 并处理 onorientationChange](https://stackoverflow.com/questions/843820/iphone-uiwebview-local-resources-using-javascript-and-handling-onorientationchan/851333#851333)

# jquery - 检测 Internet Explorer 并将自定义属性应用到 iFrame

> ID：15745628
> 
> 赞同：0
> 
> 时间：2013-04-01T14:47:05.287
> 
> 标签：jquery, modernizr

我有一个 iFrame，它是通过我的页面上的一些 javascript 生成的，在 jQuery 1.9 之前，我使用一个简单的检查来查看是否正在使用 Internet Explorer，并添加了一些使 iframe 在 ie7 和 ie8 中正确呈现所需的属性。当然这些属性不再有效，除非绝对必要，否则我不希望在我的 HTML 中包含无效代码，因此它们仅适用于 ie8 及以下版本。

```
var ieOldAttr = " ";
if ($.browser.msie && parseInt($.browser.version, 10) <= 8) {
    ieOldAttr = "allowTransparency=\"true\" marginheight=\"0\" marginwidth=\"0\" frameborder=\"0\" ";
} 

//Generate iFrame here
pageOutput += "<iframe id=\"feedbackiFrame\" src=\"URLHERE\"" + ieOldAttr + "style=\"border: none; overflow: hidden; height: 540px; width: 415px; position:absolute; left: 5px; top: 5px;\"><\/iframe>";

$(document).ready(function () {
    $(pageOutput).appendTo(document.body);
}); 
```

在 jQuery 1.9 中，他们弃用`.browser`了，而是建议使用modernizer，但我不认为modernizr 能够完成我需要它在这里做的事情。有没有一种我在modernizr中不知道的方法能够检测到这一点并正确呈现iFrame，或者我需要做一些纯javascript来检测浏览器然后将其应用于iFrame。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:42:53.020

我最终使用了这个不错的小功能。纯JS。

```
var Browser = {
  Version: function() {
    var version = 0;
    if (navigator.appVersion.indexOf("MSIE") != -1)
      version = parseFloat(navigator.appVersion.split("MSIE")[1]);
    return version;
  }
} 
```

# sql - 使用聚合函数选择第一条记录

> ID：15745633
> 
> 赞同：1
> 
> 时间：2013-04-01T14:47:47.563
> 
> 标签：sql, sql-server, report, aggregates

我有一个温度计，每天早上只要我的机器打开，它就会开始记录数据。

我想选择最低、最高和平均温度，以及机器每天打开和关闭时的温度。

我的表结构如下：

时间记录、日期记录、温度

我按记录的日期分组以获取当天的聚合，但我似乎找不到在记录的第一个和最后一个时间戳处选择温度的好方法。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:50:19.853

你想使用这样的windows函数：

```
select t.DateLogged, min(t.Temperature), max(t.Temperature), avg(t.Temperature),
       max(case when t.seqnum_asc = 1 then t.Temperature end) as FirstTemperature,
       max(case when t.seqnum_desc = 1 then t.Temperature end) as LastTemperature,
from (select t.*,
             row_number() over (partition by dateLogged order by timeLogged) as seqnum_asc,
             row_number() over (partition by dateLogged order by timeLogged desc) as seqnum_desc
      from t
     ) t
group by t.DateLogged
order by DateLogged 
```

这样做是添加两个新变量。`seqnum_asc`从第一个读数 ( )开始，从 1 开始枚举一天中的值。另一个枚举有 1 个`for the last reading (`seqnum_desc`)。

为了获得这些值，使用了条件求和。

`min()`如果你喜欢，你实际上可以使用和`max()`作为窗口函数做几乎相同的事情，而不是`row_number()`：

```
select t.DateLogged, min(t.Temperature), max(t.Temperature), avg(t.Temperature),
       max(case when timeLogged = mintime then t.Temperature end) as FirstTemperature,
       max(case when timeLogged = maxtime then t.Temperature end) as LastTemperature,
from (select t.*,
             min(timeLogged) over (partition by dateLogged) as minTime,
             max(timeLogged) over (partition by dateLogged) as maxTime
       from t
      ) t
group by t.DateLogged
order by DateLogged 
```

# xml - 使用样式表的带有标签的 XML 转换

> ID：15745634
> 
> 赞同：2
> 
> 时间：2013-04-01T14:47:51.520
> 
> 标签：xml, xslt, label, transformation

我有来自 pubmed 的 XML 的这一部分：

```
<Abstract>

<AbstractText Label="BACKGROUND" NlmCategory="BACKGROUND"> one </AbstractText> 

<AbstractText Label="METHODS" NlmCategory="METHODS"> two </AbstractText>  

<AbstractText Label="RESULTS" NlmCategory="RESULTS"> three </AbstractText> 

<AbstractText Label="CONCLUSIONS" NlmCategory="CONCLUSIONS"> four</AbstractText>  

</Abstract> 
```

根据文章的不同，有不同的数字标签（范围 0-4）。转换结果应为：

**一二三四**

我使用了这个 XSL：

```
<COL>
<DATA>
<xsl:value-of select="abstract" />
</DATA>
</COL> 
```

不幸的是，这只适用于没有标签并且摘要直接在 "abstract" 下提供的情况。我必须如何修改 XSL 的这段摘录以使其传输“抽象”下提到的所有内容？

干杯 vier.gewinnt

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T15:40:39.263

这是一个可能对您有用的解决方案：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="/Abstract">
        <COL>
            <DATA>
                <xsl:apply-templates select="node() | @*" />
            </DATA>
        </COL>
    </xsl:template>

    <xsl:template match="AbstractText">
        <xsl:value-of select="@Label"/><xsl:text>,</xsl:text>
    </xsl:template>

</xsl:stylesheet> 
```

将此应用于您的输入会产生：

```
<?xml version="1.0" encoding="UTF-8"?>
<COL>
    <DATA>BACKGROUND,METHODS,RESULTS,CONCLUSIONS,</DATA>
</COL> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T03:04:23.530

**这个简短而*正确的*转换**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
  <COL>
    <DATA>
      <xsl:apply-templates/>
    </DATA>
  </COL>
 </xsl:template>

 <xsl:template match="*/*">
  <xsl:if test="not(position()=1)">, </xsl:if>
  <xsl:apply-templates select="@Label"/>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<Abstract>
    <AbstractText Label="BACKGROUND" NlmCategory="BACKGROUND">one</AbstractText>
    <AbstractText Label="METHODS" NlmCategory="METHODS">two</AbstractText>
    <AbstractText Label="RESULTS" NlmCategory="RESULTS">three</AbstractText>
    <AbstractText Label="CONCLUSIONS" NlmCategory="CONCLUSIONS">four</AbstractText>
</Abstract> 
```

**产生想要的正确结果：**

```
<COL>
   <DATA>BACKGROUND, METHODS, RESULTS, CONCLUSIONS</DATA>
</COL> 
```

# google-maps - 没有图钉/图标的地图

> ID：15745639
> 
> 赞同：4
> 
> 时间：2013-04-01T14:47:58.423
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

我正在尝试确定 Google Maps API 是否适合我使用。
我有一个我想在地图（意大利地图）上显示的地点列表，我
想要：

1.  地图除了地雷之外没有显示任何其他标签，并且

2.  我的地点在地图上显示为标签，没有任何图标/图钉

我看到（例如[，在谷歌地图应用程序中更改标记图标](https://stackoverflow.com/questions/3924382/changing-markers-icons-in-google-maps-application/3924458#3924458)）您可以更改图钉图标，但我不想有任何图标。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-02-23T06:03:30.613

1.  为地图设置样式以删除所有其他标签 - 我喜欢使用此[向导](https://mapstyle.withgoogle.com/)。请注意，左下方的“更多选项”链接提供了更多自定义选项。
2.  要创建只有标签而不是图钉的标记，您需要一个透明的 PNG 来用于标记图标。我用的是 20x20 的。调整图标锚以将标签移动到正确的位置，我发现 7,7 是合理的。有关自定义图标的更多信息，请参阅[文档。](https://developers.google.com/maps/documentation/javascript/examples/icon-complex)

    ```
     var marker = new google.maps.Marker({
          position: markerPosition,
          map: map,
          icon: {
              origin: new google.maps.Point(0, 0),
              anchor: new google.maps.Point(7, 7),
              url: transparentIconURL
          },
          label: '1'
        }); 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T15:25:46.997

您可以使用带有 Google Maps API v3的[样式地图（或](https://developers.google.com/maps/documentation/javascript/styling)[带有您自己的图块的完全自定义地图](https://developers.google.com/maps/documentation/javascript/maptypes#CustomMapTypes)）

如果您只想为您的地点添加文本标签，请查看[InfoBox](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/docs/reference.html)库（[此示例](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/examples/infobox-label.html)）。

# sql - 更新 SQL Server 数据库架构

> ID：15745644
> 
> 赞同：0
> 
> 时间：2013-04-01T14:48:29.410
> 
> 标签：sql, sql-server

有一个旧的 SQL Server 数据库需要升级到数据库架构的改进版本。大多数新列已添加到现有表中。有必要将原始数据保留在旧数据库中。除了手动按表压缩和更新表之外，还有什么简单的方法可以升级模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T14:51:43.810

我过去使用过[Adept SQL](http://www.adeptsql.com/)并取得了很大的成功。它将为您比较数据库，甚至生成一个脚本来将一个数据库带到另一个数据库。它不是免费产品，但您可以试用它（我相信它具有大多数功能。）如果这是一次性操作，那么它正是您所需要的。

为了全面披露，我们非常喜欢该产品，以至于最终购买了它。

# php - 登录时获取会话 ID

> ID：15745649
> 
> 赞同：0
> 
> 时间：2013-04-01T14:48:49.573
> 
> 标签：php

我有带有会话登录系统的脚本。用户登录后，我存储用户 ID、名称和级别。

```
 if (!isset($_SESSION)) session_start();
 $_SESSION['user_id'] = $result['user_id'];
 $_SESSION['user_name'] = $result['user_name'];
 $_SESSION['user_level'] = $result['user_level'];    
 // Redirect
 header("Location: dashboard.php"); exit; 
```

现在，我需要在同一台服务器上安装第二个脚本

脚本

脚本

如果用户登录 SCRIPTA 并将 URL 更改为 SCRIPTB，我将无法登录或 B 安装。

解决此问题的一种方法是为每个会话添加一个唯一 ID。

但是如何在页面之间转发和检查ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:42:43.203

你可能不会尝试

```
 if (!isset($_SESSION)) 
 {
     session_start();
     $_SESSION['user_id'] = $result['user_id'];
     $_SESSION['user_name'] = $result['user_name'];
     $_SESSION['user_level'] = $result['user_level']; 
 } 
```

*   用上面的内容创建一个新的 php 文件。
*   将此文件包含在需要会话数据的每个页面中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T20:32:44.623

解决了 Sable Foste 的建议。

我为用户添加了一个具有唯一 ID 的列，并在加载页面时检查这一列。

查询数据库：

```
// Verify hash
$result = mysql_query("SELECT user_hash FROM users WHERE user_id =".$_SESSION['user_id']);
$row = mysql_fetch_array($result, MYSQL_BOTH);
$user_hash = $row['user_hash']; 
```

比较哈希：

```
if ($_SESSION['user_hash'] != $user_hash) {
    header("Location: index.php?error=1"); exit;
} 
```

# postgresql - 在 Postgres 函数循环中使用 RAISE NOTICE 访问 sql 聚合方法结果

> ID：15745655
> 
> 赞同：0
> 
> 时间：2013-04-01T14:48:59.550
> 
> 标签：postgresql

在 Postgres 函数中，我试图循环使用各种聚合函数（例如 count() 和 length()）的 select 语句。像这样：

```
 DECLARE stats RECORD;
    FOR stats IN SELECT length(something), count(something_else) from widgets LOOP
    END LOOP; 
```

在该循环中，我想在结果上调用 RAISE NOTICE。

通常（如果我不使用聚合函数）我会执行以下操作：

```
 FOR stats IN SELECT something, something_else from widgets LOOP
       RAISE NOTICE '% %', something, something_else;
    END LOOP; 
```

所以，基本上，这只是让我失望的汇总部分。如何在聚合函数的结果上调用 RAISE NOTICE？

我知道我可以将整个统计记录传递到 RAISE NOTICE 并获得括号内的结果，但我认为必须有一种方法来隔离每个汇总结果。

我尝试了 COUNT() AS 和 LENGTH() AS，但我仍然不确定我是否可以将这些“as”变量传递给 RAISE NOTICE。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T14:57:31.610

给结果一个标识符：

```
FOR stats IN 
    SELECT length(something) something, count(something_else) something_else 
    from widgets
    group by 1
loop
    RAISE NOTICE '% %', stats.something, stats.something_else;
END LOOP; 
```

但请注意，您需要使用`group by`to，`count`因为`length`它不是聚合函数；

# powershell - TeamCity 未使用 powershell 显示服务消息

> ID：15745657
> 
> 赞同：2
> 
> 时间：2013-04-01T14:49:00.080
> 
> 标签：powershell, teamcity, psake

我正在使用 powershell/psake 运行项目配置，并且正在使用 TeamCity powershell 模块（[https://github.com/JamesKovacs/psake-contrib/wiki/teamcity.psm1](https://github.com/JamesKovacs/psake-contrib/wiki/teamcity.psm1)）但 TeamCity 仅将配置显示为“正在运行"

![在此处输入图像描述](https://i.stack.imgur.com/07PJB.png)

但是，构建日志清楚地显示了所有服务消息：

```
[15:41:34]WARNING: Some imported command names include unapproved verbs which might make 
[15:41:34]them less discoverable.  Use the Verbose parameter for more detail or type 
[15:41:34]Get-Verb to see the list of approved verbs.
[15:41:34]##teamcity[progessMessage 'Running task Clean']
[15:41:34]Executing Clean
[15:41:34]running the build
[15:41:34]##teamcity[progessMessage 'Running task Build']
[15:41:34]Executing Build 
```

我错了这些应该显示在项目状态中，而不仅仅是“运行”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T08:06:12.903

这是生成的消息中的错字。我刚刚创建了带有修复的拉取请求。[https://github.com/JamesKovacs/psake-contrib/pull/1](https://github.com/JamesKovacs/psake-contrib/pull/1)

# asp.net - asp .net 验证在 IE 10 中不起作用

> ID：15745658
> 
> 赞同：3
> 
> 时间：2013-04-01T14:49:03.337
> 
> 标签：asp.net, internet-explorer, internet-explorer-10

有没有人遇到过这个问题？我需要对我测试过的表单进行字段验证，并且知道在 IE 7-9、Firefox 和 Chrome 中有效，但在 IE 10 中，它允许表单在不进行任何验证的情况下提交。该网站位于 .Net 3.5 中。我在网上做了一些研究，但我找不到任何关于此的信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T20:31:48.123

很可能是 support.microsoft.com/kb/2608565。

这意味着您的旧浏览器功能设置错误地将 ie10 识别为不支持 javascript 的浏览器（这当然不是真的）。更新的浏览器功能文件纠正了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T15:11:17.050

所以我想出了一个解决方法。我已经尝试过修补程序，但没有解决它，但我在 Page.IsValid 中添加了提交，现在它工作正常。我认为这并不重要，因为验证通常只是客户端，但它似乎可以解决问题。

编辑：我最初使用了不正确的修补程序，因为 support.microsoft.com/kb/2608565 将解决此问题。另外如前所述，我应该始终在我的提交中包含 Page.IsValid，以防 javascript 被关闭。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-01T08:17:30.080

希望这能有所帮助。

```
protected void Page_Init(object sender, EventArgs e)
    {
        Page.ClientTarget = "uplevel";
    } 
```

# jquery - Selectivizr.js 在 respond.js 中不起作用

> ID：15745660
> 
> 赞同：1
> 
> 时间：2013-04-01T14:49:05.230
> 
> 标签：jquery, css, internet-explorer-8, selectivizr, respond.js

我正在使用[Respond.js](https://github.com/scottjehl/Respond)以便可以在**IE8**中创建响应式页面。它工作正常。

但是，我也在使用[Selectivizr.js](http://selectivizr.com/)，这样我就可以在**IE8**`:nth-child`中使用 CSS3选择器，这也可以正常工作。

 **问题是，如果`nth-child`选择器位于*响应点*中，则选择器将无法工作。

例如，这**不起作用**：

```
@media screen and (min-width:980px){

    .center_crni_linkovi a:nth-child(4n){
        margin:10px 0px 10px 10px;
    }

    .center_crni_linkovi a:nth-child(4n+1){
       margin:10px 10px 10px 0;
    }

} 
```

但是，如果我将*样式*放在*响应点*之外，它就**可以**正常工作。但是我不能为这个特定的*响应点使用**特定的样式*。

 *如何使它工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-12T13:06:15.903

聚会有点晚了，但是如果其他人偶然发现了这个问题。与 response.js 结合使用时，当前稳定版本的 selectivizr 是一个已知问题。使用此处找到的最新版本的 selectivizr：[https ://github.com/keithclark/selectivizr/blob/master/selectivizr.js](https://github.com/keithclark/selectivizr/blob/master/selectivizr.js)

确保您在 respond.js 之前加载 selectivizr，这应该可以解决问题。

更新：

另请参阅：[selectivizr2：带维护的 Selectivizr](https://github.com/corysimmons/selectivizr2)（更新更多）***

# java - Java中的Python itertools循环函数

> ID：15745664
> 
> 赞同：1
> 
> 时间：2013-04-01T14:49:15.297
> 
> 标签：java, loops

Python 具有允许无限循环项目列表的 itertools 库。

```
cycle('ABCD') --> A B C D A B C D ... 
```

java - 除了数组，如何在java中实现相同的功能？例如：

```
int[] a = { 1, 2, 3, 4};
cycle(a) = 1, 2, 3, 4, 1, 2, 3, 4 .... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T14:54:04.100

如果使用番石榴是一个选项，它已经具有：

```
 Iterables.cycle 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T14:53:29.333

这个怎么样：

```
public void cycle( int[] a ) {
    while ( true ) {
        for ( int val : a ) {
            ...
        }
    }
} 
```

并通过回调使其有用：

```
public interface Callback<T> {
    public void execute( T value );
}

public <T> void cycle( T[] a, Callback<T> callback ) {
    while ( true ) {
        for ( T val : a ) {
            callback.execute( val );
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T15:05:14.670

有趣的是，您也可以制作这样的迭代器。

```
public static void main(String[] args) {
 Integer[] A = new Integer[]{1,2,3};
 CyclicArrayIterator<Integer> iter = new CyclicArrayIterator<>(A);
  for(int i = 0; i < 10; i++){
    System.out.println(iter.next());
  }
} 
```

Guava 的方法似乎最干净，但如果您不想包含任何依赖项。这是您可以使用的 CyclicIterator 类。

```
/**
 * An iterator to loop over an array infinitely.
 */
 public class CyclicArrayIterator<T> implements Iterator<T> {

   private final T[] A;
   private int next_index = 0;

   public CyclicArrayIterator(T[] array){
     this.A = array;
   }

   @Override
   public boolean hasNext() {
     return A[next_index] != null;
   }

   @Override
   public T next() {
     T t = A[next_index % A.length];
     next_index = (next_index + 1) % A.length;
     return t;
   }

   @Override
   public void remove() {
     throw new ConcurrentModificationException();
   }

 } 
```

希望能帮助到你。

# android - 拆分和替换

> ID：15745673
> 
> 赞同：-1
> 
> 时间：2013-04-01T14:49:47.213
> 
> 标签：android, if-statement, split

代码工作正常，当有空格时，它会进行 contant 拆分，并将用户输入的任何单词替换为 V2 中的单词问题是，当我使用 IF 语句检查用户输入的单词时，它不起作用有什么问题如果？

```
package com.example.split;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        final EditText te1 = (EditText)findViewById(R.id.t1); 
        final EditText te2 = (EditText)findViewById(R.id.t2); 

        final Button b = (Button)findViewById(R.id.b1); 
     b.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                //imva.setImageResource(R.id.b1);

      String t=te1.getText().toString(); 
      String[] t1= t.split(" ");

      if (t1[0] == "hello")
      {
       String v1= t1[0];
       String v2 = " true ";  
       String a =  v1.replaceAll(v1, v2);
       te2.setText(a);  
      }      
      }
        });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T14:55:26.240

改变

```
if (t1[0] == "hello"){...} 
```

至

```
if (t1[0].equals("hello")){...} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T14:56:55.107

1)

```
if (t1[0] == "hello") 
```

永远不要像那样比较字符串和对象。这样你就可以只比较对象引用，而不是内容

[Java String.equals 与 ==](https://stackoverflow.com/questions/767372/java-string-equals-versus)

2)

```
v1.replaceAll(v1, v2); 
```

将第一个参数作为正则表达式。我怀疑这就是你想要的。我打赌你想要

```
v1.replace(v1, v2); 
```

[http://developer.android.com/reference/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29](http://developer.android.com/reference/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29)

# unit-testing - Rspec 预期 1 错误：电子邮件，得到 2

> ID：15745674
> 
> 赞同：0
> 
> 时间：2013-04-01T14:49:49.593
> 
> 标签：unit-testing, rspec, factory-bot, rspec-rails

我的代码中有一个工厂：

```
FactoryGirl.define do
  factory :user do
    name 'Nitish'
    email 'nitishxyz@gmail.com'
    password "password"
    password_confirmation "password"
  end
end 
```

使用 rspec 编写的验证测试为：

```
it "is invalid without a unique email" do
user = FactoryGirl.build(:user, email: "nitishxyz@gmail.com", name: 'Buddha')
    expect(user).to have(1).errors_on(:email)   
end 
```

数据库中不存在名称为“Buddha”的其他记录。

测试失败并出现错误：

```
 Failure/Error: expect(user).to have(1).errors_on(:email)
       expected 1 errors on :email, got 2 
```

为什么会这样？如何检查电子邮件中的另一个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:58:39.643

您可以输出`user.errors.inspect`以查看其他故障是什么。

# c++ - 传递初始值设定项列表时，可变参数模板参数推导失败

> ID：15745677
> 
> 赞同：4
> 
> 时间：2013-04-01T14:49:57.907
> 
> 标签：c++, gcc, c++11, variadic-templates, initializer-list

`Bar`持有s 中的`std::vector`s中的一个。 隐式转换为to ，这在这个人为的示例中没有什么意义，但在我的应用程序中却很有意义。我实现了一个方便的函数来一次添加多个条目，但是使用两个以上的参数调用它无法使用 GCC 4.8.0 进行编译。请参阅下面的错误消息。`std::pair``std::array``FooValueAdaptor``FooValueAdaptor``int``bool``FooValue``Bar::addEntries`

```
#include <array>
#include <utility>
#include <vector>

enum class FooValue {
    A,
    B,
    C
};

class FooValueAdaptor {
public:
    FooValueAdaptor(bool value)
        : m_value(static_cast<FooValue>(value)) {
    }

    FooValueAdaptor(int value)
        : m_value(static_cast<FooValue>(static_cast<bool>(value))) {
    }

    FooValueAdaptor(FooValue value)
        : m_value(value) {
    }

    operator FooValue() {
        return m_value;
    }

    operator bool() {
        return m_value == FooValue::C;
    }

private:
    FooValue m_value;
};

template<std::size_t nFirst, std::size_t nSecond>
class Bar {
public:
    typedef std::array<FooValueAdaptor, nFirst> First;
    typedef std::array<FooValueAdaptor, nSecond> Second;
    typedef std::pair<First, Second> Entry;

    Bar()
        : m_table() {
    }

    void addEntry(First first, Second second) {
        m_table.push_back(std::make_pair(first, second));
    }

    template <typename... Args>
    void addEntries() {
    }

    template <typename... Args>
    void addEntries(First first, Second second, Args... args) {
        addEntry(first, second);
        addEntries(args...);
    }

private:
    std::vector<Entry> m_table;
};

int main(int argc, char **argv) {
    Bar<2, 1> b;

    b.addEntry({ 0, 0 }, { 0 });
    b.addEntries(
        { 0, 1 }, { 0 },
        { 1, 0 }, { 0 },
        { 1, 1 }, { 1 }
    );

    return 0;
} 
```

编译器错误消息：

```
test.cpp: In function ‘int main(int, char**)’:
test.cpp:74:2: error: no matching function for call to ‘Bar<2ul, 1ul>::addEntries(<brace-enclosed initializer list>, <brace-enclosed initializer list>, <brace-enclosed initializer list>, <brace-enclosed initializer list>, <brace-enclosed initializer list>, <brace-enclosed initializer list>)’
  );
  ^
test.cpp:74:2: note: candidates are:
test.cpp:53:7: note: template<class ... Args> void Bar<nFirst, nSecond>::addEntries() [with Args = {Args ...}; long unsigned int nFirst = 2ul; long unsigned int nSecond = 1ul]
  void addEntries() {
       ^
test.cpp:53:7: note:   template argument deduction/substitution failed:
test.cpp:74:2: note:   candidate expects 0 arguments, 6 provided
  );
  ^
test.cpp:57:7: note: void Bar<nFirst, nSecond>::addEntries(Bar<nFirst, nSecond>::First, Bar<nFirst, nSecond>::Second, Args ...) [with Args = {}; long unsigned int nFirst = 2ul; long unsigned int nSecond = 1ul; Bar<nFirst, nSecond>::First = std::array<FooValueAdaptor, 2ul>; Bar<nFirst, nSecond>::Second = std::array<FooValueAdaptor, 1ul>]
  void addEntries(First first, Second second, Args... args) {
       ^
test.cpp:57:7: note:   candidate expects 2 arguments, 6 provided 
```

我如何帮助编译器进行推理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T15:39:54.363

您需要明确告诉编译器您需要什么：

```
void addEntries(std::initializer_list<std::pair<First, Second>> il) {
   for( const auto& e : il ) {
      addEntry(e.first,e.second);
   }
} 
```

并这样称呼它：

```
b.addEntry({{ 0, 0 }}, {{ 0 }});
b.addEntries({
    {{{ 0, 1 }}, {{ 0 }}},
    {{{ 1, 0 }}, {{ 0 }}},
    {{{ 1, 1 }}, {{ 1 }}}
}); 
```

注意大量的花括号，但我认为上面实际上是唯一正确的语法。GCC 4.8 和 Clang 3.2 都接受更少的括号，但是 Clang 给出了很多警告，上面修复了这个问题。有些人已经[在进行“修复”](http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2013/n3526.html)，但这需要一些时间。

# javascript - Ajax/Javascript 动态创建按钮的问题

> ID：15745679
> 
> 赞同：0
> 
> 时间：2013-04-01T14:50:08.823
> 
> 标签：javascript, ajax, twitter-bootstrap

这是一个 javascript 函数，我必须在 onload 期间根据文本文件中的内容动态创建按钮。尽管可以读取文件，但似乎根本无法创建按钮，并且我使用警报消息来检查 var 按钮是否正确。

```
function createButtons(){
    $(document).ready(function() {
        alert("1");
      $.ajax({
        url : 'http://localhost:8080/SSAD/type.txt',
        dataType : "text",
        success : function (filecontent) {
          var lines=filecontent.split('\n');
          $.each(lines, function() {
            if (this!='') {
              var button='<button type="button" class="btn btn-block btn-inverse active" data-toggle="button tooltip" title="Click this to enable/disable viewing of'+this+'" onclick="toggleVisibility('+"'"+this+"'"+')">'+this+'</button>';
              $("#crisisButtons").append(button);
            }
          });
        }
      });
    });
} 
```

HTML：

```
<div class="crisisButtons"></div>

<script type="text/javascript">window.onload = createButtons();</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T14:53:17.303

您不是在分配事件处理程序，而是在调用它。立即调用函数 createButtons，并将返回的任何内容分配给 window.onload。

```
window.onload = createButtons(); 
```

需要是

```
window.onload = createButtons; 
```

你真正应该使用的是[addEventListener](https://developer.mozilla.org/en-US/docs/DOM/EventTarget.addEventListener)

您遇到的另一个问题是您正在使用 DOMReady 和 onload。两个不同的事件做不同的事情！选一个，不要两个都用。

更改您的代码，使其只是

```
$(function() {
    alert("1");
  $.ajax({
    url : 'http://localhost:8080/SSAD/type.txt',
    dataType : "text",
    success : function (filecontent) {
      var lines=filecontent.split('\n');
      $.each(lines, function() {
        if (this!='') {
          var button='<button type="button" class="btn btn-block btn-inverse active" data-toggle="button tooltip" title="Click this to enable/disable viewing of'+this+'" onclick="toggleVisibility('+"'"+this+"'"+')">'+this+'</button>';
          $("#crisisButtons").append(button);
        }
      });
    }
  });
}); 
```

并在 Ajax 调用上使用错误处理程序以确保它没有被触发。

* * *

**编辑**

为什么什么都没有出现

```
$("#crisisButtons").append(button);  <-- ID selector
<div class="crisisButtons"></div>    <-- class name 
```

所以将 id 选择器更改为一个类，你会得到

```
$(function() {
    alert("1");
  $.ajax({
    url : 'http://localhost:8080/SSAD/type.txt',
    dataType : "text",
    success : function (filecontent) {
      var lines=filecontent.split('\n');
      $.each(lines, function() {
        if (this!='') {
          var button='<button type="button" class="btn btn-block btn-inverse active" data-toggle="button tooltip" title="Click this to enable/disable viewing of'+this+'" onclick="toggleVisibility('+"'"+this+"'"+')">'+this+'</button>';
          $(".crisisButtons").append(button);
        }
      });
    }
  });
}); 
```

# db2 - 使用 DB2 GeneratedBy Identity 的 FNH 映射

> ID：15745682
> 
> 赞同：0
> 
> 时间：2013-04-01T14:50:13.707
> 
> 标签：db2, identity, fluent-nhibernate-mapping

我正在尝试使用标识键字段映射表。当我尝试保存时，我收到错误**SQL0803 Duplicate key value specified**

INSERT INTO libpjk/Audit（AuditId、AuditDate、UserId、Keys、ValBefore、ValAfter、FieldId）值（默认值、?、?、?、?、?、?）

我在想 AuditId 不应该出现在字段列表中，默认值也不应该在那里。我只是不知道该怎么做。

用于创建表的 SQL：

```
CREATE TABLE libpjk.Audit (
AuditId integer not null GENERATED ALWAYS AS IDENTITY 
   (START WITH 1, INCREMENT BY 1),
AuditDate timestamp not null,
UserId char(10)    not null,
FieldId integer    not null,
Keys varchar(50)   not null,
ValBefore varchar(50),
ValAfter  varchar(50),
CONSTRAINT libpjk.pk_Audit PRIMARY KEY(FieldId)) 
```

下面是 AuditId 在我的 Audit 类中的定义方式：

```
<Required()> Public Overridable Property AuditId As Integer 
```

这是我的映射：

```
MyBase.New()
Table("libpjk/Audit")
LazyLoad()
Id(Function(x) x.AuditId).Column("AuditId").GeneratedBy.Identity()
References(Function(x) x.AuditField).Column("FieldId")
Map(Function(x) x.Timestamp).Column("AuditDate").Not.Nullable()
Map(Function(x) x.UserId).Column("UserId").Not.Nullable()
Map(Function(x) x.Keys).Column("Keys").Not.Nullable()
Map(Function(x) x.Value_Before).Column("ValBefore")
Map(Function(x) x.Value_After).Column("ValAfter") 
```

谢谢你的帮助

# android - Android 应用程序停止

> ID：15745690
> 
> 赞同：0
> 
> 时间：2013-04-01T14:50:35.670
> 
> 标签：android, database, sqlite

我试图连接我使用 SQLite 创建的数据库。我没有任何错误，但是每当我尝试在模拟器上运行应用程序时，应用程序一启动就会自动停止工作。这里的代码只有一个连接数据库并从中提取数据并显示它的活动

显现 ：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.sampledb"
    android:versionCode="1"
    android:versionName="1.0" >
  <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />
 <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.sampledb.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
  </manifest> 
```

继承人的布局文件有一个文本视图和一个广播组，其中文本是从数据库中提取的：

XML：在下面的 XML 文件中，我创建了一个文本视图，我想在其中放置问题和单选按钮及其文本，我想在其中放置选择。继承人的代码。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainScreen" >

    <TextView
        android:id="@+id/question"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="sample" />

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="match_parent">

    <RadioGroup
        android:id="@+id/rg1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <RadioButton
            android:id="@+id/radio0"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:checked="true"
             />

        <RadioButton
            android:id="@+id/radio1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
             />

        <RadioButton
            android:id="@+id/radio2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
             />

          <RadioButton
            android:id="@+id/radio3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
             />
    </RadioGroup>

    </LinearLayout>

     <TextView
        android:id="@+id/explanation"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Explanation" />
    </LinearLayout> 
```

在数据库中，我有几个列有问题和几个选择，我试图将其用作单选按钮的文本。活动代码：

```
package com.example.sampledb;

import java.util.Locale;
import com.example.sampledb.R;
import android.os.Bundle;
import android.app.Activity;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.view.Menu;
import android.widget.RadioButton;
import android.widget.RadioGroup;
import android.widget.TextView;
 public class MainActivity extends Activity {
    TextView Question;
    RadioGroup G1;
    RadioButton B1, B2, B3, B4;
     @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Question= (TextView)findViewById(R.id.question);
        G1=(RadioGroup)findViewById(R.id.rg1);
        B1=(RadioButton)findViewById(R.id.radio0);
        B2=(RadioButton)findViewById(R.id.radio1);
        B3=(RadioButton)findViewById(R.id.radio2);
        B4=(RadioButton)findViewById(R.id.radio3);
            SQLiteDatabase db;
            db = openOrCreateDatabase("vocablearner.db",
                SQLiteDatabase.CREATE_IF_NECESSARY, null);
        db.setVersion(1);
        db.setLocale(Locale.getDefault());

        Cursor cur = db.query("MainTable", null, null, null, null, null,null);
         if (cur != null ) {
                if  (cur.moveToFirst()) {
                      do {
    String Quest = cur.getString(cur.getColumnIndex("_id"));
    String ans1 = cur.getString(cur.getColumnIndex("C1"));
    String ans2 = cur.getString(cur.getColumnIndex("C2"));
    String ans3 = cur.getString(cur.getColumnIndex("C3"));
    String ans4 = cur.getString(cur.getColumnIndex("C4"));
    //String crt = cur.getString(cur.getColumnIndex("Ccrt"));
    Question.setText(Quest);
    B1.setText(ans1);
    B2.setText(ans2);
    B3.setText(ans3);
    B4.setText(ans4);

                      }while (cur.moveToNext()); }  }   }
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    } }     ` 
```

在这里，我使用了一种方法 openorcreatedatabase 来定义我保存在资产文件夹中的数据库，并使用光标来提取数据。

在数据库文件中，_id 作为主键（问题），列 c1 c2 c3 c4 是对此的答案。

我应该进行哪些更改才能运行此代码？我也应该上传数据库内容吗？还有其他方法可以在android中使用数据库吗？

在这里，我使用了一种方法 openorcreatedatabase 来定义我保存在资产文件夹中的数据库，并使用光标来提取数据。

在数据库文件中，_id 作为主键（问题），列 c1 c2 c3 c4 是对此的答案。

我应该进行哪些更改才能运行此代码？我也应该上传数据库内容吗？还有其他方法可以在android中使用数据库吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-01T14:59:41.777

检查您是否需要在清单中添加任何权限。就像写入您的外部存储器一样。

# javascript - 网站中的媒体播放器是用什么语言编写的

> ID：15745693
> 
> 赞同：0
> 
> 时间：2013-04-01T14:50:50.183
> 
> 标签：javascript, html, css, flash

因此视频在网站中被大量使用，您可以使用此 html 代码将视频放入您的网站

```
<video width="320" height="240" controls>
<source src="movie.mp4" type="video/mp4">
<source src="movie.ogg" type="video/ogg">
Your browser does not support the video tag.
</video> 
```

但是将出现的媒体播放器与 youtube.com 中的媒体播放器不同（例如） 我的问题是如何为我的网站编写媒体播放器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T14:53:34.563

本机控件因浏览器而异。YouTube 不使用本机控件，它使用一组自定义控件来告诉视频执行播放、暂停、设置音量等操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T14:56:21.190

Youtube 等网站使用 Flash。内置于浏览器（非 Flash）中的可能是 C 或 C++。也许是 Safari 中的一些 Objective C。

# mysql - 由于减去一天而导致的mysql日期错误

> ID：15745694
> 
> 赞同：1
> 
> 时间：2013-04-01T14:50:54.663
> 
> 标签：mysql

我尝试执行以下查询以从给定日期中减去一天：

`DATE(FROM_UNIXTIME(UNIX_TIMESTAMP('2013-04-01') - 86400))`

它返回我 2013-03-30，但它应该返回 2013-03-31。

如果我尝试减去 2013-04-02 的一天，我会正确返回 2013-04-01。这是mysql中的日期错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T14:54:45.110

这不是错误-您发现的是夏令时中缺少的一小时：unixtime 和您的计算不知道的事情，因为您计算的是秒而不是天。

这正是 DBMS 具有特殊 DATETIME 数据类型的原因 - 以处理时区、闰年、闰秒、夏令时和日历中的所有特性。

让数据库为您完成工作 - 这是获得所需内容的更简单和更好的方法：

```
SELECT DATE('2013-04-01') - INTERVAL 1 DAY 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T14:56:35.417

您的代码假设所有日子都有 24 小时。昨天，3 月 31 日，在大多数欧洲国家有 23 个小时。要减去一天，您需要这样的东西：

```
SELECT NOW() - INTERVAL 1 DAY 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T14:57:30.093

为什么不使用内置[`DATE_SUB()`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-sub)功能？

```
SELECT DATE_SUB('2013-04-01', INTERVAL 1 DAY) 
```

编辑：不，这**不是**MySQL 中的日期错误。

# prolog - 如何替换 Prolog 列表中的变量？

> ID：15745701
> 
> 赞同：0
> 
> 时间：2013-04-01T14:51:17.407
> 
> 标签：prolog

Prolog怎么写谓词呢，它需要3个列表，`L1`是一个包含常量和变量的列表，`L2`包含常量，`L3`是一个some列表。如果用第二个列表的相应元素替换的第一个列表的变量等于第三个列表，则谓词应该返回 true。

就像 if`L1_i`是一个变量，它需要用 替换`L2_i`，然后如果它需要等于`L3_i`。

如何才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:46:32.363

`=/2`实际上，统一（即）就是这样做的。

```
?- [X, a, Y, b, Z] = [1, A, 2, B, 3].
X = 1,
Y = 2,
Z = 3,
A = a,
B = b. 
```

哦，但是你需要三个列表：

```
?- [X,a,Y,b,Z] = [1,A,2,B,3], [1,A,2,B,3] = [1,a,2,b,3].
X = 1,
Y = 2,
Z = 3,
A = a,
B = b. 
```

抱歉，让我们让它看起来更像你的作业：

```
?- L1 = [X,a,Y,b,Z], L2 = [1,A,2,B,3], L3 = [1,a,2,b,3], L1 = L2, L2 = L3.
L1 = [1, a, 2, b, 3],
X = 1,
Y = 2,
Z = 3,
L2 = [1, a, 2, b, 3],
A = a,
B = b,
L3 = [1, a, 2, b, 3]. 
```

:)

# windows - 使用 VB.NET 检查 Windows 注册表中是否存在键

> ID：15745702
> 
> 赞同：6
> 
> 时间：2013-04-01T14:51:20.370
> 
> 标签：windows, vb.net, registry, key-value, registrykey

在 VB.NET 中，我可以像这样在 Windows 注册表中创建一个键：

```
My.Computer.Registry.CurrentUser.CreateSubKey("TestKey") 
```

我可以检查一个**值**是否存在于这样的键中：

```
If My.Computer.Registry.GetValue("HKEY_LOCAL_MACHINE\MyKey", _
        "TestValue", Nothing) Is Nothing Then
    MsgBox("Value does not exist.")
Else
    MsgBox("Value exist.")
End If 
```

但是如何检查注册表中是否存在具有特定名称的**键？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T14:56:18.207

一种方法是使用`Registry.OpenSubKey`方法

```
If Microsoft.Win32.Registry.LocalMachine.OpenSubKey("TestKey") Is Nothing Then
  ' Key doesn't exist
Else
  ' Key existed
End If 
```

但是，我建议您不要走这条路。`OpenSubKey`返回的方法`Nothing`意味着密钥在过去的某个时间点不存在。当该方法返回另一个程序中的另一个操作时，可能已经创建了密钥。

我不会检查密钥是否存在并在事后创建它，而是直接转到`CreateSubKey`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-26T18:59:09.690

我使用此代码。它简单、容易，并且适用于`HKEY_CURRENT_USER\Software\YourAppSettings`.

代码：

```
string[]  kyes=Registry.CurrentUser.OpenSubKey(@"Software\YourAppSettings").GetValueNames();
if (!kyes.Contains("keytoknowIfExist"))
      {

      } 
```

# jquery - .click 功能后整个消失

> ID：15745710
> 
> 赞同：1
> 
> 时间：2013-04-01T14:51:52.270
> 
> 标签：jquery

谁能告诉我我的代码做错了什么？

请理解我只是一个学习jquery的初学者。我正在尝试使用`<table>`可以添加和删除项目的检查列表，当您单击复选框时，会出现一个复选标记，然后是“完成！” 载于另一个`<td>`。再次单击复选框后，复选标记就会消失。你可以在这里看到我的小提琴：http: [//jsfiddle.net/linyingsinc/w6XxP/1/](http://jsfiddle.net/linyingsinc/w6XxP/1/)

我最初设置`.checked`为隐藏，以便`.toggleClass`在单击时可以删除该类，从而显示复选标记。它最初工作得很好，但是当我添加这个 jquery 时：

```
$(this).toggle(function() {  
var itemDone = '<td class="complete">done!</td>';  
$(this).parent('tr').append(itemDone);  
}); 
```

...整个`<tr>`容器`<td class="checkbox">`在一秒钟后完全消失。我只想能够切换复选标记和“完成！” 点开和关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T14:56:30.543

该版本的`toggle()`函数在最新版本的 jQuery 中被删除，因此`toggle()`您现在使用的函数会切换可见性，只是隐藏或显示所有内容。

您必须创建自己的切换功能：

```
$(document).on('click','.checkbox',function() {
    $(this).find('span').toggleClass('checked');
    if ($(this).parent('tr').find('.complete').length) {
        $(this).parent('tr').find('.complete').remove();
    }else{
        var itemDone = '<td class="complete">done!</td>';
        $(this).parent('tr').append(itemDone);
    }
}); 
```

[**小提琴**](http://jsfiddle.net/linyingsinc/w6XxP/1/)

# php - PHP和2个多维数组比较基于两个键值

> ID：15745714
> 
> 赞同：5
> 
> 时间：2013-04-01T14:52:03.677
> 
> 标签：php, arrays, multidimensional-array

我有两个这样的多维数组：

```
$original = Array (
[0] => Array
    (
        [time] => 1364690340
        [memberid] => 90
        [type] => single
    )

[1] => Array
    (
        [time] => 1364690341
        [memberid] => 92
        [type] => fixed
    )

[2] => Array
    (
        [time] => 1364690342
        [memberid] => 96
        [type] => single
    )
) 
```

第二个像这样

```
$new = Array (
[0] => Array
    (
        [time] => 1364825750
        [memberid] => 90
        [type] => single
    )

[1] => Array
    (
        [time] => 1364825751
        [memberid] => 92
        [type] => single
    )

[2] => Array
    (
        [time] => 1364825752
        [memberid] => 96
        [type] => single
    )

[3] => Array
    (
        [time] => 1364825753
        [memberid] => 111
        [type] => single
    )
) 
```

我的问题是：我想根据 memberid 和 type 键在 $original 数组中搜索匹配项，如果 memberid 和 type 不一样 -> 我想从 $original 数组中删除该数组。因此，在这种情况下，我想将 [0] 数组和 [2] 数组保留在 $new 数组中，我具有与原始数组相同的 memberid 和相同类型，但我想删除 [1] 数组，因为 memberid 是相同的，但是类型不同。所以我最终的 $original 数组将如下所示：

```
$original = Array (
[0] => Array
    (
        [time] => 1364690340
        [memberid] => 90
        [type] => single
    )

[1] => Array
    (
        [time] => 1364690342
        [memberid] => 96
        [type] => single
    )
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T15:05:58.403

给你，刚刚测试它，它按预期工作。

```
// Presuming your two arrays are still called $new & $original
$original = array(); // your data
$new = array(); // your data

$newArray = array();
foreach($original AS $key => $val){
    $newArray[$val['memberid'] . '-' . $val['type']] = $val;
}

$original = array();
foreach($new AS $key => $val){
    if(isset($newArray[$val['memberid'] . '-' . $val['type']])){
        $original[] = $newArray[$val['memberid'] . '-' . $val['type']];
    }
}

print_r($original); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-01T15:01:36.750

在不对您的数据做任何假设的情况下，这是一个低效的解决方案，如果*m*和*n*是数组的长度，则为 O( *m* * *n )：*

 **```
$new_original = array();
foreach ($original as $elem) {
  // let's see if $new has something with the same type and memberid
  foreach ($new as $candidate) {
    if ($candidate['type'] == $elem['type'] &&
        $candidate['memberid'] == $elem['memberid']) {
      // it does! let's keep $elem
      $new_original[] = $elem;
    }
  }
}

// reassign it to $original if desired
$original = $new_original; 
```

但是，进行更有效的查找会更酷。例如，如果我们可以假设在 中至多有一个具有给定 memberid 的元素`$new`：

```
// turn $new into a map
$new_as_map = array();
foreach ($new as $candidate) {
  $new_as_map[$candidate['memberid']] = $candidate;
}

$new_original = array();
foreach ($original as $elem) {
  if (isset($new_as_map[$elem['memberid']])) {
    $candidate = $new_as_map[$elem['memberid']];
    if ($candidate['type'] == $elem['type']) {
      $new_original[] = $elem;
    }
  }
}

// reassign it to $original if desired
$original = $new_original; 
```**

# javascript - 通过 cors xmlHttpRequest- Object 访问响应 cookie

> ID：15745716
> 
> 赞同：1
> 
> 时间：2013-04-01T14:52:21.780
> 
> 标签：javascript, cookies, xmlhttprequest, http-post, cors

我的客户端 JavaScript 应用程序正在向我的服务器发送一个简单的 POST CORS 请求。到目前为止一切正常，服务器以“OK”和 cookie 响应。

我可以在萤火虫中看到 cookie。

我想访问 xhr.onload 中的 cookie ..但我在 xhr 对象中看不到 cookie 或 cookie 属性..

如何访问 cookie？

谢谢大家的回答！！

# c# - ASP.NET MVC4 DataAnnotations Validation on Models 行为非常奇怪 - 验证所有字段，即使我只指定一个要验证的字段

> ID：15745719
> 
> 赞同：1
> 
> 时间：2013-04-01T14:52:28.547
> 
> 标签：c#, asp.net-mvc, validation, data-annotations

为了保持简单，我有一个模型，它只有一个必需属性（仅在名称上）。我的视图只有一个`@Html.ValidationMessageFor`与名称相关联的视图。当我在未填写任何内容时单击视图上的保存时，所有字段都按要求返回。如果我填写名称字段，其余字段将按要求返回。我真的需要一些帮助来弄清楚为什么会这样：

```
public class KeyActive
{
    [Key]
    public int Pk { get; set; }

    [Required(ErrorMessage="Name of filler is required.")]
    [Display(Name="Name:")]
    public string Name { get; set; }

    [Display(Name = "Capsule 00 Pack Stat:")]
    public int PackStat00 { get; set; }

    [Display(Name = "Capsule 0 Pack Stat:")]
    public int PackStat0 { get; set; }

    [Display(Name = "Capsule 1 Pack Stat:")]
    public int PackStat1 { get; set; }

    [Display(Name = "Capsule 3 Pack Stat:")]
    public int PackStat3 { get; set; }

    public string CreatedBy { get; set; }
    public DateTime CreatedDate { get; set; }
    public string ModifiedBy { get; set; }
    public DateTime ModifiedDate { get; set; }
} 
```

这是我的观点：

```
<div data-role="fieldcontain">
    @Html.LabelFor(model => model.Name)
    @Html.EditorFor(model => model.Name)
    @Html.ValidationMessageFor(model => model.Name)
</div>

<div data-role="fieldcontain">
    @Html.LabelFor(model => model.PackStat00)
    @Html.EditorFor(model => model.PackStat00)
</div>

<div data-role="fieldcontain">
    @Html.LabelFor(model => model.PackStat0)
    @Html.EditorFor(model => model.PackStat0)
</div>

<div data-role="fieldcontain">
    @Html.LabelFor(model => model.PackStat1)
    @Html.EditorFor(model => model.PackStat1)
</div>

<div data-role="fieldcontain">
    @Html.LabelFor(model => model.PackStat3)
    @Html.EditorFor(model => model.PackStat3)
</div> 
```

最后，当我填写表格并单击保存时，我得到了以下信息：

![在此处输入图像描述](https://i.stack.imgur.com/FS2LH.jpg)

它的行为就像每个字段都是必需的 - 当我填写名称并将其他所有内容留空时，它不会让我提交它，因为它似乎认为其他字段也是必需的。我真的需要一些帮助，以确定是否有另一个我没有看到执行验证的地方，或者我在这里做错了什么！谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T14:55:02.877

可能是因为您的 ViewModel 使用的是 int 而不是可为空的值：

```
public Nullable<int> PackStat00 
```

或者

```
public int? PackStat00 
```

现在，没有办法在视图模型中为这些字段存储空值。

# ruby - 检查项目是否包含在数组或哈希中

> ID：15745720
> 
> 赞同：-6
> 
> 时间：2013-04-01T14:52:32.470
> 
> 标签：ruby

在 Ruby 中可以做到这样的事情吗

```
if @subscription.state = ['trail', 'active']
   #Do something 
end 
```

应该是不言自明的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T14:54:22.827

也许：

```
['trail', 'active'].include?(@subscription.state) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-01T14:54:51.413

你可以使用`include?`ruby的方法`Array`

```
if ['trail', 'active'].include?(@subscription.state)
  #do something
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T14:55:01.387

尝试[Array#include](http://rdoc.info/stdlib/core/1.9.3/Array#include%3F-instance_method)来检查这一点。

```
if ['trail', 'active'].include? @subscription.state
    #Do something 
end 
```

我强烈建议阅读[镐书](http://pragprog.com/book/ruby/programming-ruby)，因为这是一个基本的 Ruby 问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T16:13:47.863

你也可以使用：[`Enum#any?`](http://www.rubydoc.info/stdlib/core/Enumerable#any%3F-instance_method)

```
@subscription = false
#=> false
[true,false].any? {|x| x == @subscription }
#=> true
@subscription = true
#=> true
[true,false].any? {|x| x == @subscription }
#=> true
@subscription = 15
#=> 15
[true,false].any? {|x| x == @subscription }
#=> false
if [true,false].any? {|x| x == @subscription } then
 p "hi"
else
 p "hello"
end
#"hello"
#=> "hello" 
```

# database - 黑莓空间数据库

> ID：15745721
> 
> 赞同：1
> 
> 时间：2013-04-01T14:52:33.593
> 
> 标签：database, mobile, blackberry, geolocation, spatial

我正在尝试使用我自己的地理空间数据库创建一个 BlackBerry 应用程序。该应用程序不应使用在线服务，因此数据库应位于应用程序内部。我只有一些多边形并询问数据库我是否在多边形内部或附近。有没有什么好的数据库支持黑莓的空间数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T13:55:33.310

[Sqlite](http://docs.blackberry.com/en/developers/deliverables/8682/SQLite_overview_701956_11.jsp)在 BlackBerry 上运行，并且有空间扩展，称为[SpatiaLite](http://www.gaia-gis.it/gaia-sins/)。我不知道将 SpatiaLite 移植到 BlackBerry 会有多难，但是，我自己没有 BlackBerry 开发经验。

还有[libspatialindex](http://libspatialindex.github.io/)允许您将空间索引添加到任何平面文件或现有的嵌入式数据库格式，例如[leveldb](http://code.google.com/p/leveldb/)或[cdb](http://cr.yp.to/cdb.html)。

# c# - 降噪库？

> ID：15745725
> 
> 赞同：3
> 
> 时间：2013-04-01T14:52:43.143
> 
> 标签：c#, audio, noise-reduction

我目前正在做一个从麦克风捕获音频流的项目。我捕获的溪流充满了背景噪音。我想知道是否有提供消除噪音的库。

如果没有，我应该寻找什么样的算法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T15:24:54.957

我还没有找到一个很好的音频降噪库。然而[，SoX](http://sox.sourceforge.net/)是一个非常好的开源命令行声音处理实用程序。查看他们的[文档页面](http://sox.sourceforge.net/sox.html)，特别是**noiseprof**和**noisered**。

我建议将其集成到您的应用程序中的方法是获取 SoX 可执行文件并将其作为应用程序中的[嵌入式资源](http://support.microsoft.com/kb/319292)。然后，当您需要执行降噪时，将资源提取到临时目录并调用[Process.Start()](http://msdn.microsoft.com/en-us/library/e8zac0ca%28v=vs.90%29.aspx)以执行 SoX。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T15:18:13.403

这取决于你有什么样的噪音。一些噪声可以通过简单的频率滤波来去除，在这种情况下，您需要的是均衡器。[在这里](http://code.google.com/p/practicesharp/downloads/detail?name=NAudioEqualizer.zip&can=2&q=)为你找到了一个

商业图书馆也有，这里有一个叫[Audiolab](http://www.mitov.com/products/audiolab)

# javascript - 如何告诉 Sonar 使用我的 LCOV 文件进行代码覆盖

> ID：15745726
> 
> 赞同：10
> 
> 时间：2013-04-01T14:52:45.217
> 
> 标签：javascript, jenkins, sonarqube, jscoverage

我们有一个包含一堆 javascript 文件的 Jenkins 作业。我们通过 grunt 构建我们的项目，并在构建结束时运行 JSCover 来运行我们的单元测试并收集代码覆盖率。这一切都有效。我们得到了一个不错的 LCOV 文件。

我们现在想将 LCOV 文件上传到 Sonar，但我不知道该怎么做。我们正在从 Jenkins 构建我们的项目，作为一个自由风格的项目。

我尝试使用声纳的各种项目属性，但没有爱：

```
# project metadata (required)
sonar.projectKey=my.project
sonar.projectName=My Project
sonar.projectVersion=1.0
# path to source directories (required)
sonar.sources=src

# The value of the property must be the key of the language.
sonar.language=java (I tried js and javascript, but no love. Plugin is not installed.  Actually, I don't care about the language, since I am already generating the LCOV file during the build.  I just need Sonar to use this LCOV file.)

# Advanced parameters
sonar.javascript.jstestdriver.reportsfolder=target/surefire-reports
sonar.javascript.jstestdriver.coveragefile=target/test-coverage/jscover.lcov
sonar.dynamicAnalysis=reuseReports 
```

我怀疑问题出在“高级参数”下，但我不知道如何告诉声纳，“请使用我的 LCOV 文件进行代码覆盖”。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-02T09:02:58.380

您可以查看[此示例项目](https://github.com/SonarSource/sq-com_example_standard-sqscanner-travis)，其中在文件中指定了 LCOV 报告的路径`sonar-project.properties`。

请注意，在 Javascript 插件的最新版本中，某些属性名称已更改。

# php - HTTP Put 与 Post

> ID：15745730
> 
> 赞同：0
> 
> 时间：2013-04-01T14:53:03.610
> 
> 标签：php, http, post, httprequest, put

HTTP PUT 和 POST 请求之间是否存在实际差异，或者它只是语义上的东西？

我目前正在尝试为我的 PHP Web 应用程序创建一个 API，到目前为止，我正在使用 GET 来获取数据，并使用 POST 来创建和更新我的 API 中可用的任何内容。

本质上，POST 的行为是否与 PUT 不同？还是他们实际上做了不同的事情（而不仅仅是*意味着*不同的事情）？

# process - Contiki 编译错误，“错误：地址 0x820003 在第 1740 行超出范围...”

> ID：15745732
> 
> 赞同：1
> 
> 时间：2013-04-01T14:53:07.220
> 
> 标签：process, compiler-errors, contiki

我开始使用带有 atmel atmega128rfa1 的 contiki 操作系统。我可以编译我的示例，但是 hex 文件很糟糕。错误是：错误：ipso.hex 第 1740 行的地址 0x820003 超出范围（我没有使用 IPSO，只是我保留了这个名称）。

当我在linux系统中编译时，代码是程序大小为27804字节，数据为4809字节。

当我在windows中编译时，程序是28292，数据是4791。

我只使用一个进程和一个 etimer，我想打开和关闭 1 个 LED。makefile 包含：`

```
TARGET=avr-atmega128rfa1
CONTIKI = ../..
include $(CONTIKI)/Makefile.include

all: 
make -f Makefile.ipso TARGET=avr-atmega128rfa1 ipso.elf 
avr-objcopy -O ihex -R .eeprom ipso.elf ipso.hex 
avr-size -C --mcu=atmega128rfa1 ipso.elf ` 
```

我无法对控制器进行编程。问题是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-06T13:48:12.993

.elf 文件中的特殊部分从 0x810000 以上开始，在生成用于编程特定存储器的 hex 文件时必须删除，例如

```
$ avr-objdump -h webserver6.avr-atmega128rfa1

webserver6.avr-atmega128rfa1:     file format elf32-avr

Sections:
Idx Name          Size      VMA       LMA       File off  Algn
  0 .data         00001bda  00800200  0000e938  0000ea2c  2**0
              CONTENTS, ALLOC, LOAD, DATA
  1 .text         0000e938  00000000  00000000  000000f4  2**1
              CONTENTS, ALLOC, LOAD, READONLY, CODE
  2 .bss          000031a6  00801dda  00801dda  00010606  2**0
              ALLOC
  3 .eeprom       00000029  00810000  00810000  00010606  2**0
              CONTENTS, ALLOC, LOAD, DATA
  4 .fuse         00000003  00820000  00820000  0001062f  2**0
              CONTENTS, ALLOC, LOAD, DATA
  5 .signature    00000003  00840000  00840000  00010632  2**0
              CONTENTS, ALLOC, LOAD, READONLY, DATA 
```

所以，

```
avr-objcopy -O ihex -R .eeprom -R .fuse -R signature ipso.elf ipso.hex 
```

或者，只复制所需的部分：

```
avr-objcopy -O ihex -j .text -j .data ipso.elf ipso.hex 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-03T21:15:49.263

```
avr-objcopy --change-section-lma .eeprom=0 
```

这对我有用

# javascript - 在 pageshow 上加载功能并在使用 jQuery Mobile 离开页面时停止

> ID：15745734
> 
> 赞同：2
> 
> 时间：2013-04-01T14:53:17.963
> 
> 标签：javascript, jquery, html, jquery-mobile, setinterval

我在运行检查表中新消息的功能时遇到问题。当我打开 message_page 时，我希望这个“setInterval”函数开始运行，但在离开页面后停止运行（我有一个包含多个页面的 html 文件）。有没有办法做到这一点？因为我的脚本即使在离开页面后也会继续运行。

```
$(document).on('pageshow', '#message_page', function(){
    $('#chat_box').scrollTop($('#chat_box').height());

    setInterval( function() {checkNewMessages(c_key,m_fid);},1000);
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T15:14:26.653

这是一个工作示例：http: [//jsfiddle.net/Gajotres/QUCUt/](http://jsfiddle.net/Gajotres/QUCUt/)

```
$(document).on('pagebeforeshow', '#index', function(){       
    timerHandler.timer1 = setInterval(function () {
        $('#test-input').val(parseInt($('#test-input').val()) + 1);
    }, 1000);
});

$(document).on('pagebeforehide', '#index', function(){       
    clearInterval(timerHandler.timer1);
});

var timerHandler = {
    timer1 : null
} 
```

让我解释。如果您将计时器创建为对象变量，则可以随时访问它。在这种情况下， **pagebeforeshow**事件将启动计时器，而**pagebeforehide**将暂停它。您可以在我的示例上对其进行测试，让它运行一点，然后转到第二页，稍等片刻然后返回。您将看到计时器已暂停。

# java - BlazeDS 忽略 POJO 反序列化的公共访问器

> ID：15745736
> 
> 赞同：0
> 
> 时间：2013-04-01T14:53:23.900
> 
> 标签：java, actionscript, remoting, blazeds

我有一个像这样的 POJO 类：

```
public class EsigObjectWithDisplayName {

    private String objectCode;
    private String objectDisplayName;

    public EsigObjectWithDisplayName(Locale loc, String objectCode, String objectLocaleCode) {
        this.objectCode = objectCode;
        this.objectDisplayName = Res.s(loc, objectLocaleCode);
    }
    public EsigObjectWithDisplayName(){}

    public String getObjectCode() {
        return objectCode;
    }

    public String getObjectDisplayName() {
        return objectDisplayName;
    }
} 
```

和这样的 AS 类：

```
package ...
{
[Bindable]
[RemoteClass(alias="...EsigObjectWithDisplayName")]
public class EsigObjectWithDisplayName
{
    public var objectCode:String;
    public var objectDisplayName:String;

    public function toString():String {
       return objectDisplayName;
    }
}
} 
```

填充它的唯一方法是当我修改 POJO 字段对公共的访问权限时。
我的印象是定义公共 POJO 访问器是 BlazeDS 反序列化所需的全部。这里缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:01:31.617

您需要一个 getter 和一个 setter，请参阅[此链接](http://livedocs.adobe.com/blazeds/1/blazeds_devguide/help.html?content=serialize_data_3.html)：

> 对于 BlazeDS 不隐式处理的 Java 对象，在具有 get/set 方法和公共变量的公共 bean 属性中找到的值将作为对象上的属性发送到客户端。

# javascript - Backbone.localstorage 没有保存任何东西，没有错误

> ID：15745739
> 
> 赞同：0
> 
> 时间：2013-04-01T14:53:33.433
> 
> 标签：javascript, backbone.js, requirejs, local-storage, marionette

我正在尝试在我的应用程序中实现backbone.localstorage（[https://github.com/jeromegn/Backbone.localStorage](https://github.com/jeromegn/Backbone.localStorage)），但由于某种原因它包含它但实际上并未将任何内容保存到localStorage，但它也没有抛出任何错误任何一个。

这是我的模型代码（我正在使用 RequireJS）：

```
 define([
 'backbone',
'common',
'localstorage'
],
function(Backbone, Common) {

//Define the App Namespace before anything else
var APP = Common.app_namespace || {};

APP.Models.ExampleModel = Backbone.Model.extend({

  localStorage: new Backbone.LocalStorage("ExampleModel"),

  //Set up default values 
  defaults: {
    "user_name" : "awesome name",
    "field 2" : "awesome field"
   }

});

 }
); 
```

这就是我所说的（使用 Marionette 的区域）：

```
 var exModel = new APP.Models.ExampleModel({
          "user_name" : "name!",
          "field2" : "field!"
        });

main_app_layout.header.show(new APP.Views.ExampleView({model: exModel})); 
```

就要求而言，页面正在加载，但我不认为它在做任何事情。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T15:18:43.940

我认为您需要调用该`exModel.save()`方法以将其保存到 localStorage。

# php - GA 事件跟踪不起作用

> ID：15745743
> 
> 赞同：0
> 
> 时间：2013-04-01T14:53:54.967
> 
> 标签：php, html, google-analytics, analytics, event-tracking

任何人都可以看到这里用于跟踪此按钮的代码有问题吗？从上一篇文章中修复了它，但新代码仍然没有：

```
<form id="constant-contact-signup2" action="http://www.truckingoffice.com/trucking-software-blog" method="post">
<div class="kws_input_fields">
<div class='cc_email_address kws_input_container'>
<label for='cc_email_address' class=''> Sign up for our Trucking Office Newsletter <span class="req" title="The  Sign up for our Trucking Office Newsletter  field is required">*</span></label>
<input type='text' value='' size="30"  placeholder='john.appleseed@apple.com' name='fields[email_address][value]' class='t  required' id='cc_email_address' />
<input type="hidden" name="fields[email_address][label]" value=" Sign up for our Trucking Office Newsletter " />
<input type="hidden" name="fields[email_address][req]" value="1" /></div>

<input type="submit" style='position:absolute; width:0;height:0;visibility:hidden!important;' name='constant-contact-signup-submit' onclick=”_gaq.push(['_trackEvent', 'Button', 'Click']);” /> 
```

SafeSubscribe 的隐私

整个星期都在研究这个，但仍然一无所获。任何所有帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:25:57.743

`_trackEvent`并`_trackPageview`通过向 Google 服务器发出跟踪像素请求来工作——您可能会遇到时间问题，即由于请求呈现新页面而取消图像请求。一个常见的解决方案是在跟踪调用之后稍微延迟表单提交。

使用 jQuery，类似于：

```
jQuery(function($){
  $('#constant-contact-signup2 input[type=submit]').click(function(e){
    e.preventDefault();
    _gaq.push(['_trackEvent', 'Button', 'Click']);
    setTimeout(function(){$('#constant-contact-signup2').submit()}, 150);
  });
}) 
```

# javascript - 页面回发，即使验证函数返回 true

> ID：15745746
> 
> 赞同：2
> 
> 时间：2013-04-01T14:54:07.913
> 
> 标签：javascript, jquery, asp.net

我正在使用 ASP.NET 4.0、JS 和 Jquery 进行一些验证。在我的验证运行并返回 false 后，我的 js 抛出此错误。它还允许回发。

JS摘录抛出错误：

```
 var eventArgs = new Sys.WebForms.EndRequestEventArgs(error, data ? data.dataItems : {}, executor);
        Sys.Observer.raiseEvent(this, "endRequest", eventArgs);
        if (error && !eventArgs.get_errorHandled()) {
            throw error;
        } 
```

我的完整错误信息：

```
SCRIPT5022: Sys.WebForms.PageRequestManagerServerErrorException: Index was outside the bounds of the array. 
ScriptResource.axd, line 938 character 13 
```

我的 JS：

```
 if (regex) {
                result = patt.test($(this).val());
            } if (!result) {
                //return false;
                $(this).focus();
                alert("Please enter the " + failed_type + " in the following format: " + format);
                return false;
            } 
```

按钮：

```
<asp:Button ID="Update" runat="server" 
        Text="Update" CssClass="button" 
        TabIndex="4" OnClientClick="return update_Click(event);" OnClick="Update_Click" /> 
```

调用堆栈：

```
PageRequestManager$_endPostback,ScriptResource.axd line 938
PageRequestManager$_parseDelta,ScriptResource.axd line 1653
PageRequestManager$_onFormSubmitCompleted,ScriptResource.axd line 1414
Anonymous Function, ScriptResource.axd, line627
Anonymous function, ScriptResource.axd, line 4337
raise, ScriptResource.axd, line 7247 
WebRequest$completed, ScriptResource.axd, line 7251
WebRequest$completed, ScriptResource.axd, line 7251 
```

# math - bitxor，求解方程，布尔逻辑

> ID：15745755
> 
> 赞同：0
> 
> 时间：2013-04-01T14:54:34.250
> 
> 标签：math, logic, bit-manipulation, equation

我有等式：

```
C = A^b + (2*A)^b + (4*A)^b. 
```

其中 C 和 A 已知，但 b 未知。如何找到b？所有数字都是 8 位字节。有没有比蛮力更快的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:42:20.790

+ 符号是否表示字节加法和 * 乘法，*溢出位被丢弃*？如果是这样，我认为答案是

```
b = C ^ (A + 2 * A + 4* A) 
```

如何得出这个结论：

```
C = A^b + (2*A)^b + (4*A)^b 
```

因此

```
C^b = A^b^b + (2*A)^b^b + (4*A)^b^b = A + 2*A + 4*A 
```

然后

```
C^C^b = b = C^(A + 2*A + 4*A) 
```

编辑只是为了确保：这个答案**不正确**。真丢人。我将不得不考虑更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T21:49:01.207

*我采用相同的假设：`+`并且`*`忽略了溢出的加法和乘法。*

## 查找表

这可能是最快的解决方案：预先计算结果，并将它们存储在查找表中。它需要 2^(个 16)字节的内存，即 64 kB。

## 猜测、检查、改进方法

以类似 C 系列的伪代码呈现：

```
byte Solve(byte a, byte c){
    byte guess = lastGuess = result = lastResult = 0;

    do {
        guess = lastGuess ^ lastResult ^ c;            //see explanation below
        result = a^guess + (2*a)^guess + (4*a)^guess; 
        lastGuess = guess;
        lastResult = result;
    } while (result != c);

    return guess;
} 
```

这个算法的想法是，它猜测是什么`b`，然后将其代入公式以获得暂定结果，并与`c`. 猜测中导致结果不同的任何位都会`c`被更改。这对应于最后一个猜测、最后一个结果和`c`（如果这个陈述有点跳跃，我鼓励你画一个真值表，而不是只信我的话！）。

## 解释

它之所以有效，是因为更改一个位只能影响该位的结果，以及更重要的位，但不会影响较低的位（因为当您用笔和纸进行加法时，进位可以传播到左侧）。因此，在最坏的情况下，算法需要 2 次猜测才能使最低有效位正确，第 2 个 lsb 的另一个猜测，第 3 个的另一个猜测，等等。给定 和 的任意组合，最多**9 个猜测**。`a``c`

这是我的测试程序的示例跟踪：

```
a: 00001100
c: 01100111

Guess:  01100111
Result: 01000001
Guess:  01000001
Result: 00010111
Guess:  00110001
Result: 01100111

b: 00110001 
```

# php - 删除php mysql中的引号

> ID：15745757
> 
> 赞同：0
> 
> 时间：2013-04-01T14:54:45.293
> 
> 标签：php, mysql, phpmyadmin

如何避免旁边的错误`</object>"`？

我需要在我的数据库中删除一堆单一的 cotes，我的问题是**“**旁边`</object>`...

```
$wpdb->query("DELETE FROM $wpdb->posts SET post_content = REPLACE post_content,"</object>"' ,'</object>'"); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T14:57:06.850

好吧，您似乎缺少`REPLACE`字符串函数周围的括号，但是如果您将引号转义，则可以将引号放在引号内`\`

```
REPLACE(post_content, \"'</object>'\", \"</object>\") 
```

# angularjs - 在 Angular 中，如何在一个 $digest 循环中更改两个数组？

> ID：15745759
> 
> 赞同：0
> 
> 时间：2013-04-01T14:54:50.890
> 
> 标签：angularjs

在对 angularjs 中的数据绑定的回答[中](https://stackoverflow.com/questions/9682092/databinding-in-angularjs?lq=1)，@misko-hevery 提到

> '假设您有两个数组，无论出于何种原因需要保持同步，......'。

我有一个类似的问题。假设我有两个数组：`knives`和`forks`. 我想更改它们并仅触发一个事件并仅更新一次 UI。示例代码在这里（[http://jsbin.com/eflag/3/edit](http://jsbin.com/efolag/3/edit)）。

我在这里复制了javascript代码：

```
var app = angular.module('app',[]);

function Main($scope){
  console.log("initialize controller Main");
  $scope.value="a";
  $scope.$watch("newItem",function(newValue){
    $scope.knives=["a","b","c", newValue];
    $scope.forks=["d","e","f", newValue];
  });
} 
```

我的问题是对刀叉的更改会触发多少个脏检查循环？如果不止一次，是否可以让它只触发一次？

# c++ - LNK 2022：迁移到 VS2010 后布局信息不一致

> ID：15745762
> 
> 赞同：3
> 
> 时间：2013-04-01T14:55:01.130
> 
> 标签：c++, visual-studio-2010, c++-cli, lnk2022

我有一个 VS2010 解决方案，其中包含（除其他外）以下项目：

*   Native.DLL（静态链接到第三方库 ITK 的本地 C++ 项目，其中包括 STL）

伪代码（非常简化）：

```
using namespace std;

bool Native::CalcSomething(double* result, string& errorMsg); 
```

*   Wrapper.DLL（动态链接到 Native.DLL 并在调用 Native.DLL 时使用 std:string 的 C++/CLI 项目）

伪代码（非常简化）

```
bool Wrapper::WrappedCalcSomething([System::Runtime::InteropServices::OutAttribute] double[] result,[System::Runtime::InteropServices::OutAttribute] System::String^ errorMsg)
{
   Native* ntv = new Native();

   std:string error;
   pin_ptr<double> resultPtr = &result[0];

   bool success = ntv->CalcSomething(resultPtr, error);

   errorMsg = gcnew System::String(error.c_str());

   return success;
} 
```

这在 VS2008 (x64) 中完美编译和链接，但是在迁移到 VS2010 后（由于各种原因），链接器给出以下错误：

```
2>  Generating Code...
2>MSVCMRTD.lib(locale0_implib.obj) : error LNK2022: metadata operation failed (8013118D) : Inconsistent layout information in duplicated types (std.logic_error): (0x02000049).
2>MSVCMRTD.lib(locale0_implib.obj) : error LNK2022: metadata operation failed (8013118D) : Inconsistent layout information in duplicated types (std.domain_error): (0x0200004a).
2>MSVCMRTD.lib(locale0_implib.obj) : error LNK2022: metadata operation failed (8013118D) : Inconsistent layout information in duplicated types (std.invalid_argument): (0x0200004b).
2>MSVCMRTD.lib(locale0_implib.obj) : error LNK2022: metadata operation failed (8013118D) : Inconsistent layout information in duplicated types (std.length_error): (0x0200004c).
2>MSVCMRTD.lib(locale0_implib.obj) : error LNK2022: metadata operation failed (8013118D) : Inconsistent layout information in duplicated types (std.out_of_range): (0x0200004d).
2>MSVCMRTD.lib(locale0_implib.obj) : error LNK2022: metadata operation failed (8013118D) : Inconsistent layout information in duplicated types (std.runtime_error): (0x0200004e).
2>MSVCMRTD.lib(locale0_implib.obj) : error LNK2022: metadata operation failed (8013118D) : Inconsistent layout information in duplicated types (std.overflow_error): (0x02000050).
2>MSVCMRTD.lib(locale0_implib.obj) : error LNK2022: metadata operation failed (8013118D) : Inconsistent layout information in duplicated types (std.underflow_error): (0x02000051).
2>MSVCMRTD.lib(locale0_implib.obj) : error LNK2022: metadata operation failed (8013118D) : Inconsistent layout information in duplicated types (std.range_error): (0x02000052).
2>MSVCMRTD.lib(locale0_implib.obj) : error LNK2022: metadata operation failed (8013118D) : Inconsistent layout information in duplicated types (std._Locinfo): (0x02000054).
2>MSVCMRTD.lib(locale0_implib.obj) : error LNK2022: metadata operation failed (8013118D) : Inconsistent layout information in duplicated types (_Locimp): (0x02000059).
2>MSVCMRTD.lib(locale0_implib.obj) : error LNK2022: metadata operation failed (8013118D) : Inconsistent layout information in duplicated types (failure): (0x02000068).
2>MSVCMRTD.lib(locale0_implib.obj) : error LNK2022: metadata operation failed (8013118D) : Inconsistent layout information in duplicated types (std._String_val<char,std::allocator<char> >): (0x02000097).
2>MSVCMRTD.lib(locale0_implib.obj) : error LNK2022: metadata operation failed (8013118D) : Inconsistent layout information in duplicated types (std._String_val<wchar_t,std::allocator<wchar_t> >): (0x02000099).
2>MSVCMRTD.lib(locale0_implib.obj) : error LNK2022: metadata operation failed (8013118D) : Inconsistent layout information in duplicated types (lconv): (0x020000ce).
2>LINK : fatal error LNK1255: link failed because of metadata errors 
```

我已经阅读了几乎所有我能找到的关于这个问题的帖子并尝试过：

*   清理和重建
*   [移动标题](https://stackoverflow.com/questions/3909470/lnk2022-error-when-using-clr)- 没有对 windows.h 的引用，我尝试移动 #include 行但没有效果
*   [仅在 Wrapper.DLL 中需要它的文件上使用 /clr 标志](https://stackoverflow.com/questions/11990095/lnk2022-metadata-operation-inconsistent-layout-information-in-duplicated-types)（这恰好是项目中的所有文件）。问题是 Native.DLL 中需要被 Wrapper.DLL 调用的公共方法在其签名中包含一个 std:string 参数。这使得很难将 STL 引用与 /clr 编译的范围分开
*   我正在**使用 /MDd**编译所有内容（包括 ITK、第 3 方库） （并尝试过 /MD）——更改此设置似乎不会影响事情
*   我没有看到**/Zp 或 pragma pack**在任何地方使用

我能想到的唯一“解决方案”是将 Native.DLL 中的方法更改为不使用 std:string 作为参数（例如使用 char* 代替）。然而，避免在任何 C++/CLI 包装器中使用 STL 似乎不是一个解决方案。*一定*有更好的办法！

注意：我知道有关如何“调试”这些问题的文章（[链接](http://blogs.msdn.com/b/vcblog/archive/2007/05/17/diagnosing-hidden-odr-violations-in-visual-c-and-fixing-lnk2022.aspx)），但除非我弄错了，否则我想我知道问题的根源是 std:string。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T15:58:59.690

我想到了。

我对其中一个 CMake 文件进行了语法更改，我认为该文件在功能上与之前发生的相同（本质上我使用的是 CMake 便利变量）。但是，这当然会产生意想不到的后果，并且生成的项目文件也不相同。

具体来说，Wrapper.DLL 项目现在正在链接到它根本不需要链接到的第 3 方 ITK 库（只有 Native.DLL 需要这些库）。

在改回 CMake 并正确生成项目后，可怕的 LNK2022 消失了。我只能怪我自己浪费了这么多时间……

# android-intent - 空指针异常 - 无法启动接收器？

> ID：15745764
> 
> 赞同：1
> 
> 时间：2013-04-01T14:55:01.237
> 
> 标签：android-intent, nullpointerexception, broadcastreceiver, locationmanager, smsmanager

我刚刚开始了我的第一个主要项目——一个简单的防盗应用程序，当我的手机被发短信时，如果它包含某个字符串，它会向原始地址发送一条短信，告诉它的位置电话。但是，我目前只尝试让手机接收短信，检查它是否包含字符串，获取位置，然后在手机上烘烤该位置。我的问题是，因为我对 android 编程/Java（只有 15 岁）非常陌生，所以我无法将我的位置从 MainActivity 传递到我的广播接收器。我收到空指针异常 - 这是我的应用程序设法获取 gps 位置的时候。还有一点要注意，我使用“Cerberus Anti-theft”作为我的主要防盗，这会导致任何错误吗？

这是我的 MainActivity - 我的 LocationListener 所在的位置，如您所见，我已经在 onLocationChanged 上注释掉了 Toast.makeText()，如果我取消注释它，我会得到正确的坐标。这意味着它必须与我的意图有关 - 在我**看来**这非常好。

```
package com.SMS;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;

public class MainActivity extends Activity {

    private LocationManager lm;
    private LocationListener locationListener;

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        lm = (LocationManager)
            getSystemService(Context.LOCATION_SERVICE);

        locationListener = new MyLocationListener();

        lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0,       locationListener);  
    }

    public class MyLocationListener implements LocationListener
    {
        @Override
        public void onLocationChanged(Location loc) 
                {
                if (loc != null) 
                {
                    int Longitude = (int) (loc.getLongitude() * 1E6);
                    int Latitude = (int) (loc.getLatitude() * 1E6);
                    // Toast.makeText(getBaseContext(), "Location Changed : Lat: " + Latitude + " Longitude : " + Longitude, Toast.LENGTH_LONG).show();
                    Intent intent = new Intent(MainActivity.this, SMSReceiver.class);                      intent.setAction("android.provider.Telephony.SMS_RECEIVED");
                intent.putExtra("Longitude", Longitude);
                intent.putExtra("Latitude", Latitude);
                sendBroadcast(intent);
                }
        }

        @Override
        public void onProviderDisabled(String provider) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub

        }

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras)          
                {
        // TODO Auto-generated method stub

        }
    }
} 
```

这是我的 SmsReceiver 类，这是检索短信以检查包含字符串的地方。我已经尝试了我在这类事情上看到的一切（我的历史充满了这些东西），但是无论我做什么，纬度和经度仍然返回 300 - 我设置的默认值。我确信这与我的意图设置和接收意图有关，只是不知道这是什么问题。因此，请通读并就您发现的任何错误给我反馈。

```
package com.SMS;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsMessage;
import android.widget.Toast;

public class SMSReceiver extends BroadcastReceiver
{

    @Override
    public void onReceive(Context context, Intent intent) 
    {

        //--get the sms message passed in--
        Bundle bundle = intent.getExtras();
        SmsMessage[] msgs = null;
        String str = "";
        if (bundle != null) 
        {
            //--- retrieve the sms message received
            Object[] pdus = (Object[]) bundle.get("pdus");
            msgs = new SmsMessage[pdus.length];
            for (int i=0; i<msgs.length; i++)
                        {
                msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);

                str += "SMS from " + msgs[i].getOriginatingAddress();
                str += " : ";
                str += msgs[i ].getMessageBody().toString(); 
                str += "\n";
                if(str.contains("alfa"))
                { 

                      int Longitude = bundle.getInt("Longitude", 300);
                      int Latitude = bundle.getInt("Latitude", 300);
                      //--display the new sms message
                      Toast.makeText(context, "Location Changed : Latitude : " + Latitude + " Longitude : " + Longitude, Toast.LENGTH_LONG).show();
                }
            }
        }
    }
} 
```

这是我的清单，我很确定这是问题的一部分，如果您发现任何错误或不合适的地方，或者可以简化，请告诉我！

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.SMS"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.SMS.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <receiver android:name=".SMSReceiver" >
            <intent-filter>
                <action android:name="android.provider.Telephony.SMS_RECEIVED" />
            </intent-filter>
        </receiver>
    </application>

    <uses-permission android:name="android.permission.SEND_SMS" />
    <uses-permission android:name="android.permission.RECEIVE_SMS" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_COURSE_LOCATION" />
    <uses-permission android:name="android.permission.INTERNET" />

</manifest> 
```

最后，当找到 gps 时，LogCat 会出错。

```
04-01 15:38:41.323: W/dalvikvm(16245): threadid=1: thread exiting with uncaught     exception (group=0x412b7930)
04-01 15:38:41.333: E/AndroidRuntime(16245): FATAL EXCEPTION: main
04-01 15:38:41.333: E/AndroidRuntime(16245): java.lang.RuntimeException: Unable to   start receiver com.SMS.SMSReceiver: java.lang.NullPointerException
04-01 15:38:41.333: E/AndroidRuntime(16245):    at   android.app.ActivityThread.handleReceiver(ActivityThread.java:2383)
04-01 15:38:41.333: E/AndroidRuntime(16245):    at    android.app.ActivityThread.access$1500(ActivityThread.java:141)
04-01 15:38:41.333: E/AndroidRuntime(16245):    at   android.app.ActivityThread$H.handleMessage(ActivityThread.java:1310)
04-01 15:38:41.333: E/AndroidRuntime(16245):    at   android.os.Handler.dispatchMessage(Handler.java:99)
04-01 15:38:41.333: E/AndroidRuntime(16245):    at   android.os.Looper.loop(Looper.java:137)
04-01 15:38:41.333: E/AndroidRuntime(16245):    at   android.app.ActivityThread.main(ActivityThread.java:5041)
04-01 15:38:41.333: E/AndroidRuntime(16245):    at  java.lang.reflect.Method.invokeNative(Native Method)
04-01 15:38:41.333: E/AndroidRuntime(16245):    at java.lang.reflect.Method.invoke(Method.java:511)
04-01 15:38:41.333: E/AndroidRuntime(16245):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-01 15:38:41.333: E/AndroidRuntime(16245):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-01 15:38:41.333: E/AndroidRuntime(16245):    at dalvik.system.NativeStart.main(Native Method)
04-01 15:38:41.333: E/AndroidRuntime(16245): Caused by: java.lang.NullPointerException
04-01 15:38:41.333: E/AndroidRuntime(16245):    at com.SMS.SMSReceiver.onReceive(SMSReceiver.java:24)
04-01 15:38:41.333: E/AndroidRuntime(16245):    at    android.app.ActivityThread.handleReceiver(ActivityThread.java:2376)
04-01 15:38:41.333: E/AndroidRuntime(16245):    ... 10 more 
```

请，请，请帮助我，我已经在互联网上搜索了 5 天，但仍然没有运气。我似乎无法让它工作。因此，如果您可以就问题所在以及如何更改问题给我反馈，或者对此有任何疑问，请回复，因为我已经花了几个小时在网上搜索。此外，如果您看到任何“糟糕的编码”，请不要犹豫，告诉我正确的。如果您能解决问题，非常感谢您！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-01T19:11:44.363

Object[] pdus = (Object[]) bundle.get("pdus");

您在意图包中的何处插入了 pdus？

创建意图时

```
 intent.putExtra("Longitude", Longitude);
            intent.putExtra("Latitude", Latitude); 
```

您似乎只是输入了这些值。你是如何在这里提取 pdus 的？

我认为当您尝试访问 pdus.length 时遇到异常，因为该对象为空。您可以尝试通过打印来验证这一点吗？

# plsql - F_checksal 不是过程或编译plsql时未定义

> ID：15745767
> 
> 赞同：0
> 
> 时间：2013-04-01T14:55:06.633
> 
> 标签：plsql

当我尝试编译此 plsql 时，我不断收到此错误消息：

```
'F_checksal is not a procedure or is undefined' 
```

这是代码：

```
declare
  e_high_increase EXCEPTION;
  old_sal NUMBER;
  function f_checkSal(i_sal number,i_old_sal IN OUT NUMBER) return VARCHAR2 is
  begin
  if((i_sal/old_sal)*100>300) then
  raise e_high_increase;
  else  
  return 'yes';
  end if;
  exception when e_high_increase then
  insert into t_logerror(error_tx) values ('this is user exception');
  dbms_output.put_line('this is user exception');
  return 'No';
  end;
begin
select sal into old_sal FROM emp where empno=153;
f_checksal(30000,old_sal);
update emp set sal=30000 where empno=153;  
end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T03:43:40.527

只是您对函数的调用需要更改。

您可以通过调用过程（例如`DBMS_OUTPUT.put_line( f_checksal(30000,old_sal));`）来使用结果，或者将其分配给局部变量，例如`RESULT := f_checksal(30000,old_sal);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T15:18:26.353

你的语法很差。您需要先创建函数，然后在 pl/sql 块中引用它：

步骤1 ：

```
CREATE OR REPLACE FUNCTION f_checksal (i_sal NUMBER, i_old_sal IN OUT NUMBER)
   RETURN VARCHAR2
IS
   old_sal           NUMBER;
   e_high_increase   EXCEPTION;
BEGIN
   IF ((i_sal / old_sal) * 100 > 300)
   THEN
      RAISE e_high_increase;
   ELSE
      RETURN 'yes';
   END IF;
EXCEPTION
   WHEN e_high_increase
   THEN
      INSERT INTO t_logerror
                  (error_tx
                  )
           VALUES ('this is user exception'
                  );

      DBMS_OUTPUT.put_line ('this is user exception');
      RETURN 'No';
END;
/ 
```

第2步：

```
DECLARE
   old_sal   NUMBER;
   RESULT    VARCHAR2 (100);
BEGIN
   SELECT sal
     INTO old_sal
     FROM emp
    WHERE empno = 153;

   RESULT := f_checksal (30000, old_sal);

   UPDATE emp
      SET sal = 30000
    WHERE empno = 153;
END; 
```

请注意，您的函数有一个您没有在调用代码中分配的返回值。

# apache - apache2 - mod_rewrite 问题

> ID：15745769
> 
> 赞同：0
> 
> 时间：2013-04-01T14:55:20.803
> 
> 标签：apache, url-rewriting, apache2

我正在尝试重写一个 URL，以便它这样做：

这：`domain/404?hello`到`domain/e.php?n=404&u=hello`404 是静态的，但字符串`u`可以变化。

这是我尝试过的，但它不起作用。

`RewriteRule ^404?([a-zA-Z0-9]+)$ e.php?n=404&u=$1`

非常感谢您的帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:07:21.947

```
RewriteCond %{QUERY_STRING} ([a-z0-9-_]+)
RewriteRule ^404(.*) /e.php?n=404&u=%1 
```

# java - Java sockets 文件发送

> ID：15745772
> 
> 赞同：0
> 
> 时间：2013-04-01T14:55:36.430
> 
> 标签：java, sockets, stream

我正在使用 java 套接字编写客户端/服务器。有我的代码：

服务器：

```
public void sendFile(File file) {
    BufferedOutputStreambufferedOutputStream = new BufferedOutputStream(socket.getOutputStream());
    int count;
    FileInputStream in;
    try {
        in = new FileInputStream(file);
        byte[] mybytearray = new byte[(int) file.length()];
        while ((count = in.read(mybytearray)) > 0) {
            bufferedOutputStream.write(mybytearray, 0, count);
        }
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

}

客户：

```
public void downloadFile() {
    BufferedInputStream bufferedInputStream = new BufferedInputStream(socket.getInputStream());
    byte[] aByte = new byte[8192];
    int count;
    FileOutputStream in;
    try {
        in = new FileOutputStream("C://fis.txt");
        while ((count = bufferedInputStream.read(aByte)) > 0) {
        System.out.println(count); // <- nothing happens
            in.write(aByte, 0, count);
        }
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

}

为什么第二个函数中的 bufferedInputStream 是空的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T14:58:09.770

`BufferedOutputStream`在缓冲区满之前不会写入数据。您需要冲洗 `OutputStream`：

```
bufferedOutputStream.flush(); 
```

# c++ - 模板化友元函数查找

> ID：15745776
> 
> 赞同：4
> 
> 时间：2013-04-01T14:55:49.017
> 
> 标签：c++, templates, c++11, clang, friend

以下简单代码编译良好

```
class A {
  int x[3];
public:
  A() { x[0]=1; x[1]=2; x[2]=3; }
  friend int const&at(A const&a, unsigned i) noexcept
  {
    return a.x[i];
  }
  friend int foo(A const&a, unsigned i) noexcept
  {
    int tmp = at(a,i);
    return tmp*tmp;
  }
}; 
```

但如果朋友是模板

```
class A {
  int x[3];
public:
  A() { x[0]=1; x[1]=2; x[2]=3; }

  template<unsigned I>
  friend int const&at(A const&a) noexcept
  {
    static_assert(I<3,"array boundary exceeded");
    return a.x[I];
  }

  template<unsigned I>
  friend int foo(A const&a) noexcept
  {
    int tmp = at<I>(a);   // <- error: use of undeclared identifier 'at'
    return tmp*tmp;
  }
}; 
```

查找规则发生变化，clang 抱怨说错误，但 gcc 和 icpc 没有。谁是对的（C++11）？以及如何为clang修复代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T15:04:19.240

解决方法是将声明和定义分开：

```
class A {
  int x[3];
public:
  A() { x[0]=1; x[1]=2; x[2]=3; }

  template<unsigned I>
  friend int const&at(A const&a) noexcept;

  template<unsigned I>
  friend int foo(A const&a) noexcept;
};

template<unsigned I>
int const&at(A const&a) noexcept
{
  static_assert(I<3,"array boundary exceeded");
  return a.x[I];
}

template<unsigned I>
int foo(A const&a) noexcept
{
  int tmp = at<I>(a);
  return tmp*tmp;
} 
```

# iphone - 具有特殊字符的 TBXML 解析器获取 EXC_BAD_ACCESS

> ID：15745777
> 
> 赞同：1
> 
> 时间：2013-04-01T14:55:51.973
> 
> 标签：iphone, ios, objective-c

我正在使用 TBXML 解析器版本。1.4、当我通过TBXML解析器解析这种后续响应时，得到EXC_BAD_ACCESS...

```
<trainingOrganization xsi:type="xsd:string">~!@#$%^&*()_+?> <,./;'{}|<":;'></trainingOrganization> 
```

卡在这个问题上。

正如我观察到的，TBXML 无法解析 <> 数据...

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:40:02.327

使用 CDATA 的最佳方法之一，CDATA 中的任何内容都视为 xml 文档，因此如果您有特殊字符，例如 ';:,.''<>'，那么解析器将忽略它。所以我总是更喜欢使用 CDATA 并建议你应该使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:15:49.447

我认为这与 TBXML 解析器无关。

像这样的字符`<>\"'`必须被屏蔽（通过 a `\`），所以它可能只是您的 xml 文件的编码或其解析的设置。

否则解析器认为它是：

```
<trainingOrganization xsi:type="xsd:string">
~!@#$%^&*()_+?
> *<-- closing the previous element* 
<,./;'{}|
  <":;'>
</trainingOrganization> 
```

如果您找不到任何设置或编码来自动执行此操作，请尝试`\`在解析之前将字符替换为前面的字符。

另一种可能性是正确使用 xml 并且不允许`<>`在元素之间设置结构，这是我认为的最简单的方法。

# sql - sql - 如何在一个查询中包含多个 select/from 语句

> ID：15745785
> 
> 赞同：0
> 
> 时间：2013-04-01T14:56:15.920
> 
> 标签：sql

我正在尝试提取每列从特定表集中选择的报告。但是，其中一列需要从完全不同的表集中提取，并且仍然包含在同一个报告中。当然，这不起作用：

```
select u.first_name, ticket_work.time_spent
FROM tickets LEFT OUTER JOIN ticket_work ON ticket_work.ticket_id = tickets.id JOIN users u
(select count(tickets.id) FROM tickets JOIN users u)

where tickets.assigned_to = u.id 
```

...

因此，只需`(select count(tickets.id) FROM tickets JOIN users u)`从不同的表格集中选择零件，但仍会包含在报告中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:09:19.040

不了解您的表结构，但您可以使用子查询来满足此类要求

```
select u.first_name, ticket_work.time_spent,(select count(tickets.id) FROM tickets where ticket.id=ticket_work.ticket_id) as myCount
FROM tickets LEFT OUTER JOIN ticket_work ON ticket_work.ticket_id = tickets.id JOIN users u
where tickets.assigned_to = u.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T15:01:16.510

我对你的问题有点困惑。您是否要返回用户、该用户的票数以及总体花费的时间？如果是这样，这样的事情应该可以工作：

```
select u.id, u.first_name, 
    SUM(tw.time_spent) summed_time_spent, 
    COUNT(DISTINCT t.id) count_tickets
FROM users u
    LEFT JOIN tickets t
        ON u.id = t.assigned_to
    LEFT JOIN ticket_work tw
        ON tw.ticket_id = t.id 
GROUP BY u.id, u.first_name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T15:07:38.870

您的问题不清楚，但一般来说，听起来您正在尝试加入`derived table`（即查询）。在这种情况下，请执行以下操作：

```
SELECT...
FROM...
table_A A LEFT JOIN 
   (SELECT keyfield, valuefield FROM table_b WHERE ...) B 
   ON A.keyfield = B.keyfield 
```

那有意义吗？要创建一个派生表，您在括号内放置一个查询，给它一个别名（在本例中为“B”），然后将它连接到您的其他表，就好像它是一个常规表一样。

# css - CSS 唯一的技术来制作动态 div 高度，可扩展以在它之外进行竞争

> ID：15745806
> 
> 赞同：0
> 
> 时间：2013-04-01T14:58:02.453
> 
> 标签：css, height

我正在为自制珠宝建立一个网站。我希望它很好并且居中（对于所有那些分辨率低的人），所以所有的标题、导航和内容都在一个 div 中，我定位在中心。在左侧（在 div 内，一切都在 div 内）我有我的垂直导航侧边栏 div。在右边我有标题和内容。到目前为止，一切都很好。现在解决问题：

我希望我的侧边栏从页面顶部一直到底部都有一个右边框（如果可能的话，边距为 1em）。诀窍是我右侧的内容从文本到图片和表格各不相同，并且在每个页面上都有很大不同 - 当内容大于屏幕时，屏幕滚动，在这种情况下，我希望我的侧边栏边框向下滚动它 - 我无法做到这一点。

我想我已经做了相当多的阅读——我最接近的解决方案是将边框的位置设置为静态，但这显然在站点居中时不起作用。所以对于这个问题 - 是否有任何 CSS 唯一方法可以使侧边栏 div 的高度动态或其他东西并将其定义为随着内容向右扩展？这样边界将始终到达底部。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T15:00:46.000

将导航包装在另一个 div 中。为这个新的 div 设置一个 100% 的高度，并为其分配一个右边框 CSS 属性。您也可以设置填充。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T17:00:11.337

如何为内容部分 Div 提供左边框，而不是 Nav 菜单。这样边框可以根据内容区域的高度改变高度

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T15:42:34.427

```
 body,html{
      height:100%;
    }

    #wrapperdiv{
      height:100%
    }

   #navigation{
      min-height:100%
    } 
```

# python - 在 Gtk 中获取按钮的标签值

> ID：15745810
> 
> 赞同：0
> 
> 时间：2013-04-01T14:58:09.063
> 
> 标签：python, user-interface, gtk

正在学习 Gtk。我想构建一个计算器，我想在文本框中显示按下的数字。我已经完成了它，通过为单击的不同按钮调用不同的函数，并在文本框中附加按下按钮的值的值。使用 python 2.7.3

有没有办法获得按下按钮的标签值，以便我可以使用单个函数而不是从 0 到 9 的 10 个函数？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T15:43:06.270

按钮回调包括小部件本身，您也可以传递数据。见[这里。](http://www.pygtk.org/pygtk2tutorial/ch-ButtonWidget.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T19:12:31.287

您应该将按钮表示的值与按钮​​实例本身相关联，而不是读取`GtkButton`非常容易出错的标签，例如：

```
button = Gtk.Button(label='1')
button._value = 1
# add button to the container
button.connect('clicked', on_button_clicked)

button = Gtk.Button(label='2')
button._value = 2
# add button to the container
button.connect('clicked', on_button_clicked) 
```

然后从信号处理程序内的按钮实例中读取值，例如：

```
def on_button_clicked(button):
    print 'you pressed the button of value: %d' % (button._value) 
```

`GtkWidget`Python 中的实例是 Python 对象，因此其行为类似于任何其他 Python 对象。

# c# - 正则表达式验证逗号分隔的字符串

> ID：15745811
> 
> 赞同：1
> 
> 时间：2013-04-01T14:58:09.097
> 
> 标签：c#, regex

我有以下格式的字符串：名称，艺术家，详细信息，流派，长度

逗号之间可以输入任何字符。到目前为止我已经做到了，但它似乎不起作用：

```
if(!Regex.IsMatch(songDetails,@"^([\w]+,)+[\w]+$"))
{
 throw new Exception("Enter data into all cells");
} 
```

songDetails 是我要验证的用户输入的字符串输入。

我哪里错了？

编辑：我应该更具体地说明这个字符串的来源。我正在从 dataGridView 读取值。如果用户将该行留空但输入长度值，则保存数据，但不应允许

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-01T15:00:31.453

检查拆分结果的长度可能比使用正则表达式更简单。

```
var songDetailsArray = songDetails.Split(",");

if(songDetailsArray.Length != 5)
{
     throw new Exception("Enter data into all cells");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T15:05:53.510

尝试删除括号：

```
if(!Regex.IsMatch(songDetails,@"^(\w+,)+\w+$"))
{
  throw new Exception("Enter data into all cells");
} 
```

\w 已经是一个字符类。如果也允许空格，请尝试以下操作：

```
if(!Regex.IsMatch(songDetails,@"^((\w|\s)+,)+(\w|\s)+$"))
{
  throw new Exception("Enter data into all cells");
} 
```

# c# - 异常后 ResolveUrl 不返回站点根目录

> ID：15745813
> 
> 赞同：2
> 
> 时间：2013-04-01T14:58:10.200
> 
> 标签：c#, asp.net-mvc, iis

出现异常后，ResolveUrl 方法不再返回网站根目录，加载路径不正确的图像。

例如：IIS 的网站根目录是 www.mysite.com/portal 。ResolveUrl 方法返回 www.mysite.com

*   门户子目录是 IIS 上的一个应用程序。www.mysite.com 也是 IIS 上的一个应用程序。
*   该应用程序在 IIS 上正确配置（它不是虚拟路径）并且它有一个独立的应用程序池。
*   异常是随机的，它们与 ResolveURL 方法无关。

任何线索可能是什么？似乎 ResolveUrl 在出现异常后“丢失”了应用程序路径，这根本没有意义。

为了解决这个问题，我必须要么回收应用程序池，要么将 web.config 文件重命名为其他名称，然后返回其正式名称。

我正在使用 C# 和 asp.net 4.0。

# java - 使用泛型约束的 Java 工厂模式

> ID：15745814
> 
> 赞同：2
> 
> 时间：2013-04-01T14:58:10.880
> 
> 标签：java, factory-pattern, generic-constraints

我有

```
public class  MyFactory()
{
   public static <T> T getItem(Element element, Class<T> clazz)
   {
         T item = null;
         if (clazz == IFoo.class)
         {
              item =  (T) new Foo();
         }
         else if (clazz == IBar.class)
         {
              item =  (T) new Bar();
         }
         ...

        assert item instanceof IParsable;
        (IParsable(foo)).parse(element)

       return item;
   }

} 
```

然后我这样称呼它

```
IFoo parsedFoo = MyFactory.getItem(someElement, IFoo.class); 
```

这里具体类实现`IParsable`。我是否能够删除运行时断言检查并进行编译时检查以查看是否“IParsable”并调用解析？

另外我想知道是否有办法在`getItem()`方法的编译时强制执行 IFoo<-->Foo 实现关系并删除类型转换`(T)`？

`IFoo`编辑：我想我会给出一个大纲`Foo`

```
public interface IFoo
{
    String getFooName();
    int getFooId();
    ....
}

class Foo implements IFoo, IParsable
{
      ...
} 
```

编辑2：

我只是想到了这样的重构，现在唯一不是编译时检查的是接口和实现之间的关系。

```
 public static <U extends IParsable, T> T getItem(Element element, Class<T> clazz)
   {
         U item = null;
         if (clazz == IFoo.class)
         {
              item =  (U) new Foo();
         }
         else if (clazz == IBar.class)
         {
              item =  (U) new Bar();
         }
         ...

       item.parse(element)

       return (T) item;
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T15:10:26.280

也许是这样的：

```
public static <T> T getItem(Element element, Class<T> clazz) {
    IParsable item = null;
    if (clazz == IFoo.class) {
        item = new Foo();
    } else if (clazz == IBar.class) {
        item = new Bar();
    }
    item.parse();
    return (T) item;
} 
```

`Foo`这是`IParsable`在编译时检查的事实。另一个演员 (to `(T)`) 仍然是运行时练习 - 但在您的示例中也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T15:08:50.730

这里的具体类实现了 IParsable 。我是否能够删除运行时断言检查并进行编译时检查以查看是否“IParsable”并调用解析？

```
From what I know - no, it's not possible. You will be passing object to this method at runtime, the compiler has no idea what objects will be passed. So compile time is not an option here. 
```

另外我想知道是否有办法在 getItem() 方法中强制 IFoo<-->Foo 在编译时实现关系并删除类型转换 (T) ？

```
Again, only at runtime with isAssignableFrom 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T15:13:51.137

您应该像这样在类设置时注册所有映射（这很丑陋，因为您不能使用相同的类型参数检查多个边界）：

```
private static Map<Class<?>, Class<?>> MAPPINGS = ...;

static {
  registerMapping(IFoo.class, Foo.class, Foo.class);
  // ...
}

private static <IT, TT extends IT, TP extends IParseable> void registerMapping(Class<IT> ifaceClazz, Class<TT> implClazz, TP parseableClazz) {
  MAPPINGS.put(ifaceClazz, implClazz);
} 
```

然后在`getItem()`您的 if 块中变成一个简单的地图查找。请注意，这不会摆脱`(T)`演员阵容，但您对此无能为力。

# jax-ws - 连接超时

> ID：15745816
> 
> 赞同：0
> 
> 时间：2013-04-01T14:58:22.043
> 
> 标签：jax-ws, connection-timeout

我正在尝试为 JAXWS Web 服务设置一个场景，在该场景中我希望该服务超时（即连接超时），以便我可以在初始调用期间设置正确的连接开关。

谁能告诉我在 Java EE 环境中设置此类测试的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-10T11:36:43.533

我通过设置一个代理来做到这一点，该代理可用于删除从所述机器[到此链接](https://stackoverflow.com/questions/10197405/iptables-remove-specific-rules)的路径。

# javascript - Javascript：闭包内部使用的外部变量

> ID：15745817
> 
> 赞同：0
> 
> 时间：2013-04-01T14:58:24.160
> 
> 标签：javascript, closures

我有一个简单的 jquery 弹出插件。用法如下所示：

```
$("#popupContainer").popup({
    onOpen: function () { },
    onClose: function () { }
});
$("#popupContainer").popup("open", "/Home/PopupContent");
$("#popupContainer").popup("close"); 
```

这很好用。

但是，我想为我拥有的不同 url 传递不同的 onOpen 回调。所以我想在插件上做一个包装器，像这样：

```
var popupPlugin = {};
(function () {
    var onOpen = null;
    var onClose = null;

    $("#popupContainer").popup({
        onOpen: function () {
            if (onOpen) {
                onOpen();
            }
            onOpen = null;
        },
        onClose: function () {
            if (onClose) {
                onClose();
            }
            onClose = null;
        }
    });

    popupPlugin.open = function (url, callback) {
        onOpen = callback;
        $("#popupContainer").popup("open", url);
    }
    popupPlugin.close = function (callback) {
        onClose = callback;
        $("#popupContainer").popup("close");
    }
}());

// usage
popupPlugin.open("/Home/PopupContent", function () {
    // specific callback
}); 
```

这按预期工作（我现在有不同的回调），但我担心我会以某种方式造成内存泄漏。

`popupPlugin`包装器的实现好吗？

# performance - 为什么除法比乘法更昂贵？

> ID：15745819
> 
> 赞同：48
> 
> 时间：2013-04-01T14:58:30.380
> 
> 标签：performance, division, cpu-architecture, multiplication

我并没有真正尝试优化任何东西，但我记得我一直从程序员那里听到这个，我认为这是一个事实。毕竟他们应该知道这些东西。

但我想知道为什么除法实际上比乘法慢？除法不只是一种美化的减法，而乘法是一种美化的加法吗？所以从数学上讲，我不明白为什么走一种方式或另一种方式在计算上会有非常不同的成本。

任何人都可以澄清这个原因/原因，所以我知道，而不是我从其他程序员那里听到的我之前问过的是：“因为”。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-06-28T18:26:59.600

CPU 的[ALU](http://en.wikipedia.org/wiki/Arithmetic_logic_unit)（算术逻辑单元）执行算法，尽管它们是在硬件中实现的。经典的乘法算法包括[华莱士树](http://en.wikipedia.org/wiki/Wallace_tree)和[达达树](http://en.wikipedia.org/wiki/Dadda_tree)。更多信息可[在此处](http://en.wikipedia.org/wiki/Multiplication_ALU)获得。更新的处理器中提供了更复杂的技术。通常，处理器努力并行化位对操作，以最小化所需的时钟周期。乘法算法可以非常有效地并行化（尽管需要更多晶体管）。

[除法算法](http://en.wikipedia.org/wiki/Division_algorithm)不能高效地并行化。最有效的除法算法非常复杂（[Pentium FDIV 错误](http://en.wikipedia.org/wiki/Pentium_FDIV_bug)展示了复杂程度）。通常，它们每比特需要更多的时钟周期。如果您想了解更多技术细节，[这里](https://web.archive.org/web/20080320040614/http://www.intel.com/support/processors/pentium/sb/CS-013008.htm)有来自英特尔的一个很好的解释。英特尔实际上为他们的除法算法申请了[专利。](https://www.google.com/patents/US5784307?pg=PA7&dq=5784307&hl=en&sa=X&ei=59bNUZm7JczBtAaR4oDgAQ&ved=0CDQQ6AEwAA)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-11-16T23:09:43.137

> 但我想知道为什么除法实际上比乘法慢？除法不只是一种美化的减法，而乘法是一种美化的加法吗？

最大的区别在于，在长乘法中，您只需在移位和屏蔽后将一堆数字相加。在长除法中，您必须在每次减法后测试溢出。

* * *

让我们考虑两个 n 位二进制数的长乘法。

*   班次（没时间）
*   掩码（恒定时间）
*   添加（看起来时间与 n² 成正比）

但是，如果我们仔细观察，我们可以通过使用两个技巧来优化加法（还有进一步的优化，但这些是最重要的）。

1.  我们可以按组而不是按顺序添加数字。
2.  直到最后一步，我们可以将三个数字相加产生两个，而不是相加两个产生一个。虽然将两个数字相加产生一个所需的时间与 n 成正比，但将三个数字相加产生两个可以在恒定时间内完成，因为我们可以消除进位链。

所以现在我们的算法看起来像

*   班次（没时间）
*   掩码（恒定时间）
*   将三个一组的数字相加以产生两个，直到只剩下两个（时间与 log(n) 成正比）
*   执行最后的加法（时间与 n 成正比）

换句话说，我们可以为两个 n 位数构建一个乘法器，时间与 n 大致成正比（空间与 n² 大致成正比）。只要 CPU 设计者愿意献身，逻辑乘法几乎可以和加法一样快。

* * *

在长除法中，我们需要知道每个减法是否溢出，然后才能决定下一个使用什么输入。所以我们不能应用与长乘法相同的并行技巧。

有一些除法方法比基本的长除法更快，但它们仍然比乘法慢。

# php - MySQL Query left join 重复记录

> ID：15745822
> 
> 赞同：0
> 
> 时间：2013-04-01T14:58:42.140
> 
> 标签：php, mysql, left-join

使用左连接我有这个结果。

这里的屏幕
[http://f.cl.ly/items/373Y141r1K131d0n3f1q/Schermata%202013-04-01%20alle%2016.51.18.png](http://f.cl.ly/items/373Y141r1K131d0n3f1q/Schermata%202013-04-01%20alle%2016.51.18.png)

我只想显示一次记录，不重复，但是左连接我的所有记录都是不同的。
一旦我的所有记录都显示出来，我需要做什么？

查询。

```
 SELECT * FROM login_users
 LEFT JOIN login_users_seguaci
 ON login_users.user_id = login_users_seguaci.following
 WHERE name LIKE ""
 AND user_id != '1'
 ORDER BY data DESC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:02:39.983

```
SELECT  x.*, y.*
FROM    login_users x
        LEFT JOIN
        (
            SELECT  a.*
            FROM    login_users_seguaci a
                    INNER JOIN
                    (
                        SELECT  following, MAX(DATA) max_data
                        FROM    login_users_seguaci
                        GROUP   BY following
                    ) b ON  a.following = b.following AND
                            a.DATA = b.max_date
        ) y ON x.user_id = y.following
//  WHERE   ... your condition here ...
ORDER   BY t.data DESC 
```

# php - 获取在 MySql 中创建的最后一个 PrimaryKey

> ID：15745823
> 
> 赞同：1
> 
> 时间：2013-04-01T14:58:55.140
> 
> 标签：php, mysql, primary-key

我在mysql中有一个表，带有primaryKey，Auto Increment和Not Null，当我使用PHP创建一个条目时，主键os自动生成，我如何使用PHP获取它？我想这样做`$SQL = "SELECT MAX($id) FROM ".$my_table;` ，但问题是，如果两个用户几乎同时发出请求，最后一条记录可能会改变。另一种解决方案是使用`START TRANSACTION`，但不知道如何在 PHP 中准确使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T15:02:29.533

您正在寻找的是[mysqli_insert_id](http://php.net/manual/en/mysqli.insert-id.php)：

```
mysqli_query($link,"INSERT INTO blah VALUES('superblah');");
$newid = mysqli_insert_id($link); 
```

只需`mysqli_insert_id`在运行查询后请求返回新 ID。小菜一碟。

# ios - UITextField如何禁用粘贴？

> ID：15745824
> 
> 赞同：11
> 
> 时间：2013-04-01T14:58:56.203
> 
> 标签：ios, objective-c, uitextfield

UITextField如何禁用粘贴？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-04-01T15:20:59.967

覆盖`canPerformAction:withSender:`方法以返回`NO`您不想允许的操作：

```
- (BOOL)canPerformAction:(SEL)action withSender:(id)sender
    {
        if (action == @selector(paste:))
            return NO;
        if (action == @selector(select:))   
            return NO;   
        if (action == @selector(selectAll:))   
            return NO;  
        return [super canPerformAction:action withSender:sender];
    } 
```

在上面的代码中，您只需要为**粘贴编写**

**其他方式**

```
-(BOOL)canPerformAction:(SEL)action withSender:(id)sender {
    UIMenuController *menuController = [UIMenuController sharedMenuController];
    if (menuController) {
        [UIMenuController sharedMenuController].menuVisible = NO;
    }
    return NO;
} 
```

还要检查[这个链接](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIResponder_Class/Reference/Reference.html)

**已编辑**

在 iOS 7 中，您可以执行以下操作：

```
- (BOOL)canPerformAction:(SEL)action withSender:(id)sender {
    [[NSOperationQueue mainQueue] addOperationWithBlock:^{
        [[UIMenuController sharedMenuController] setMenuVisible:NO animated:NO];
    }];
    return [super canPerformAction:action withSender:sender];
} 
```

**对于 Swift 用户**

```
override public func canPerformAction(_ action: Selector, withSender sender: Any?) -> Bool {
    if action == #selector(copy(_:)) || action == #selector(paste(_:)) {
        return false
    }

    return true
} 
```

* * *

**如果您想在 TEXTFIELD 上打开日期选择器或选择器视图，请单击下面的代码工作。**

在您的课程中添加以下两种方法。

```
//Hide Menu View
override func canPerformAction(_ action: Selector, withSender sender: Any?) -> Bool {

    if YOURTEXTFIELD.isFirstResponder {
        DispatchQueue.main.async(execute: {
            (sender as? UIMenuController)?.setMenuVisible(false, animated: false)
        })
        return false
    }

    return super.canPerformAction(action, withSender: sender)
} 
```

**//必须实现**

```
func textFieldShouldBeginEditing(_ textField: UITextField) -> Bool {
            return false
} 
```

# java - 如何指定基本目录然后我们像 ant -f somedir/dir/build.xml 一样运行 ant

> ID：15745829
> 
> 赞同：14
> 
> 时间：2013-04-01T14:59:16.830
> 
> 标签：java, ant

如何指定基本目录然后我们运行 ant 像`ant -f somedir/dir/build.xml.` Ant 设置 basedir 相对于 build.xml，如果我指定

```
<project basedir="." ..> 
```

我想让 basedir 指向执行 Ant 的地方。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-01T16:08:14.407

使用 -D 覆盖 basedir 属性：

```
ant -Dbasedir=`pwd` -f path/to/build.xml 
```

的使用`pwd`仅适用于 Linux，但如果您在另一个平台上，您始终可以将当前目录的绝对路径放在那里。

我认为没有办法在 build.xml 中执行此操作，除非使用`ant`任务重新执行 ant。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-30T08:28:20.930

您可以尝试使用**subant**任务：

假设您有两个不同的文件夹

1.  您正在执行**ant**命令的当前文件夹**X:/your/launching/folder**

***   目标 bulid.xml 所在的文件夹：**Y:/any/folder/with/build.xml**** 

 **您可以执行以下操作：

在**X:/your/launching/folder**中使用以下内容创建**build.xml ：**

 **```
<target name="mytarget">
    <subant target="debug">
        <fileset dir="Y:/any/folder/with" includes="build.xml"/>
    </subant>
</target> 
```

然后您可以从**X:/your/launching/folder文件夹执行****ant mytarget**以开始构建您的**Y:/any/folder/with/build.xml**

 ******更新：**

您可以像这样覆盖 subant 构建的**basedir属性：**

```
 <subant target="debug">
        <property name="basedir" value="./any/dir/with/project"/>
        <fileset dir="Y:/any/folder/with" includes="build.xml"/>
    </subant> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-11T11:39:38.640

另一种解决方案（如果在某些情况下更有意义）可能是**通过**扩展中的**任务****覆盖`basedir``var`**，如下所述： [https ://stackoverflow.com/a/25786329/1915920](https://stackoverflow.com/a/25786329/1915920)`antcontrib`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-22T07:37:41.920

我发现，使用以下解决方案是最简单的。

```
pushd somedir/dir && ant && popd 
```

虽然这似乎很容易 - 它有效。********

# windows - 为什么我在 Windows 上运行 Perl one liner 时出现 Can't find string terminator "'" 错误

> ID：15745830
> 
> 赞同：1
> 
> 时间：2013-04-01T14:59:17.063
> 
> 标签：windows, perl

我想从 perl one 班轮打印昨天的日期，当我在命令提示符下运行它时，我收到以下错误。

```
perl -e 'use POSIX qw(strftime); 
         $now_string = strftime "%Y%m%d", localtime(time()-86400); 
         print $now_string'; 
```

错误：

```
Can't find string terminator "'" anywhere before EOF at -e line 1. 
```

我的perl版本v5.14.2

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-01T15:01:16.023

不幸的是，在 Windows 命令行中，您必须使用双引号：

```
perl -e "..." 
```

如果您正在运行的命令需要在内部引用，请使用`''`or `qq{}`。

```
perl -e "print qq{Hello Windows\n}" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T20:35:36.000

两个问题：

1.  单引号 ( `'`) 对 Windows 命令 shell 没有意义。使用双引号 ( `"`) 引用参数。

    如果您想要双引号字符串文字（例如`"\n"`）在参数中需要双引号，您可以使用`qq{...}`( `qq{\n}`)。

2.  您的代码并不总是返回昨天的日期。因为有些日子有超过 86400 秒，你可以得到前天的日期。因为有些日子少于 86400 秒，你可以得到今天的日期。你要：

    ```
    perl -MDateTime -E"say
       DateTime->now(time_zone=>'local')->set_time_zone('floating')
       ->subtract(days=>1)->strftime('%Y%m%d')" 
    ```

    但是，您必须将它们全部放在一行上，因为 Windows 命令 shell 不支持在其参数中使用换行符。

# javascript - 如何在视频播放时刷新文本 innerHTML 本身以显示？

> ID：15745832
> 
> 赞同：2
> 
> 时间：2013-04-01T14:59:21.073
> 
> 标签：javascript, html, html5-video

在 Firefox 上使用时，我的字幕会在播放时与视频匹配。它在那里，但它没有在视频下方显示字幕文本，但是如果我单击视频进度条或拖动它，就会显示文本，这很奇怪。我希望字幕文本在视频播放时自行显示。任何人都可以帮助我吗？

这里有一个代码，

```
<html>
    <head>
        <title>HTML5 included Javascript....</title>
        <meta name="description" content="Test" charset="utf-8"></meta>
        <script type="text/javascript">

                var subtitleArray = new Array(); //stored all values from XML caption file

                function loadXMLDoc(dname)
                {
                    if (window.XMLHttpRequest)
                    {
                    xhttp=new XMLHttpRequest();
                    }
                    else
                    {
                    xhttp=new ActiveXObject("Microsoft.XMLHTTP");
                    }
                    xhttp.open("GET",dname,false);
                    xhttp.send();

                    return xhttp.responseXML;
                }

                function getCaption()
                {
                    alert("get caption");

                    var tempArray = new Array();
                    var c = document.getElementById('container');

                    captionsDoc = loadXMLDoc("captions.xml");
                    x=captionsDoc.getElementsByTagName('text');

                    for(var i=0;i<x.length;i++)
                    {
                        var tempArray = new Array();
                        tempArray[0] = x[i].getAttribute('start'); // get start time
                        tempArray[1] = x[i].getAttribute('dur'); // get duration time
                        tempArray[2] = x[i].childNodes[0].nodeValue; // get text

                        subtitleArray[i] = tempArray; //put all 3 values in array

                    }

                    //c.innerHTML = subtitleArray[0][2];

                }

                function load(){

                    alert("run video");

                    getCaption();

                        document.getElementById('caption').addEventListener('play', function (){

                            var t = document.getElementById('timer').innerHTML;

                            video = document.getElementById('caption');

                            //t.innerHTML = video.currentTime;

                            var text = "", cap = "";

                            for( var i = 0; i < subtitleArray.length;i++)
                            {
                                //alert("looping");
                                //var currentTime = video.currentTime();
                                var cueStart = parseFloat(subtitleArray[i][0]);
                                var cueEnd = cueStart + parseFloat(subtitleArray[i][1]);

                                cap = subtitleArray[i][2];

                                if (video.currentTime >= cueStart && video.currentTime <= cueEnd) {
                                   text = cap;   
                                }
                                var t = document.getElementById('timer').innerHTML = text;
                                //t.innerHTML = text;
                            }

                        }, false);  

                }

            window.onload = load;
        </script>
    </head>

    <body>

        <div>
            <video id="caption" width="320" height="240" controls>
                <source src="caption.mp4" type="video/mp4">
                <source src="caption.ogg" type="video/ogg" />
                <source src="caption.webm" type="video/webm" />
            </video> 
        </div>
        <div id= "container">
        </div>
        <div id = "timer">  
        </div>

    </body>
</html> 
```

函数 getCaptions() 作用是从 xml 中解析时间和文本并存储到字幕数组中。函数 load() 调用它来运行并将时间与视频时间匹配以显示字幕文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-08T03:59:37.977

只要你执行一个javascript函数，屏幕上的html就永远不会刷新。而且您似乎在 load() 函数中运行了一个无限循环。因此问题。

# node.js - 找不到模块“C:\server.js”

> ID：15745834
> 
> 赞同：2
> 
> 时间：2013-04-01T14:59:26.197
> 
> 标签：node.js, client, socket.io, npm

我收到以下错误。我搜索并尝试了一些东西，但我无法解决问题。

```
C:\>node server.js

module.js:340
throw err;
      ^
Error: Cannot find module 'C:\server.js'
at Function.Module._resolveFilename (module.js:338:15)
at Function.Module._load (module.js:280:25)
at Function.Module.runMain (module.js:497:10)
at startup (node.js:119:16)
at node.js:901:3 
```

我的 server.js

```
var http = require('http');
http.createServer(function (req, res) {
res.writeHead(200, {'Content-Type': 'text/plain'});
res.end('Hello World\n');
}).listen(1337, '127.0.0.1');
console.log('Server running at http://127.0.0.1:1337/'); 
```

如何使用 node 运行 server.js。我已经安装了 node.js 并且还从命令提示符 npm install socket.io 键入。一切似乎都很好。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T15:02:16.487

您可能没有将`server.js`文件保存在`C:`. 用于`cd <dir>`进入正确的目录，然后再次尝试该节点命令。

# c++ - 在 OnNotify 中返回 TRUE 或设置 *pResult = TRUE 有什么区别

> ID：15745836
> 
> 赞同：4
> 
> 时间：2013-04-01T14:59:40.357
> 
> 标签：c++, mfc, win32com

给定一个通知处理程序

```
BOOL CMyWindow::OnNotify(WPARAM wParam, LPARAM lParam, LRESULT* pResult)
{
   ....... 
```

如果我处理特定通知。我应该返回 TRUE 还是设置 *pResult = TRUE？

这是困扰我多年的事情。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T15:03:13.650

它们是完全不同的东西：

*   返回值，`BOOL`表示您是否处理了消息。如果您处理它，则为非零，否则为零。这决定了是否`DefWindowProc`被调用。
*   并`pResult`用于将与此特定通知相关的信息发送回调用者。确切地说，该信息是什么取决于正在处理的通知，正如通过`NMHDR`传递的结构所指定的那样`lParam`。

# command-line - BAT 文件中的 FOR LOOP 错误（WINDOWS）

> ID：15745840
> 
> 赞同：0
> 
> 时间：2013-04-01T14:59:45.847
> 
> 标签：command-line, batch-file, cmd, command-line-arguments

这是一个 bat 文件中的 for 循环，该循环采用数字 1 到 100，并对每个整数使用 mod 运算符。我在循环结束后难以计算平均值？有人可以帮我解决这个问题吗？我试过这些说法：

```
echo VAR / 100

echo !VAR! / 100

SET /A TOTAL=%VAR% / 100 
```

没有工作。

以下是我拥有的当前代码：

```
for /L %%i in (1, 1, 100) do (

 SET /A VAR=%%i %% 5 

 SET /A TOTAL=%VAR% / 100

 echo !VAR! 

 echo !TOTAL!

 echo. >> results.txt 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T15:13:52.673

尝试

```
SET /A TOTAL=!VAR! / 100 
```

！变量！返回 的运行时间值`var`。%var% 返回 PARSE-TIME 值（即在执行语句之前）

（当然，前提是您已经执行了

```
SETLOCAL ENABLEDELAYEDEXPANSION 
```

操作说明）

# msbuild - 打包时 TransformXml 任务失败

> ID：15745841
> 
> 赞同：2
> 
> 时间：2013-04-01T14:59:57.193
> 
> 标签：msbuild, wix, wix3.7

嗨，当我尝试在 MSBuild 中打包东西并构建解决方案时。

```
<Target Name="BeforeBuild">
    <MSBuild Projects="%(ProjectReference.FullPath)" Targets="Package" Properties="Configuration=$(Configuration);Platform=AnyCPU" Condition="'%(ProjectReference.WebProject)'=='True'" />
    <ItemGroup>
      <LinkerBindInputPaths Include="%(ProjectReference.RootDir)%(ProjectReference.Directory)obj\$(Configuration)\Package\PackageTmp\" />
    </ItemGroup>
</Target> 
```

收到“TransformXml”任务失败错误。不确定如何修复它。

```
 Error 3   The "TransformXml" task failed unexpectedly.
    System.UriFormatException: Invalid URI: The URI is empty.
       at System.Uri.CreateThis(String uri, Boolean dontEscape, UriKind uriKind)
       at System.Uri..ctor(String uriString)
       at Microsoft.Web.Publishing.Tasks.TransformXml.Execute()
       at Microsoft.Build.BackEnd.TaskExecutionHost.Microsoft.Build.BackEnd.ITaskExecutionHost.Execute()
       at Microsoft.Build.BackEnd.TaskBuilder.<ExecuteInstantiatedTask>d__20.MoveNext() C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\Web\Microsoft.Web.Publishing.targets    1496    6   SCBUDirectMSI 
```

# android - Android - Activity 的局部变量与实例变量的性能

> ID：15745843
> 
> 赞同：2
> 
> 时间：2013-04-01T15:00:09.213
> 
> 标签：android, performance, memory-leaks, instance-variables, local-variables

为了让这个问题保持简单，考虑一个场景，我正在创建一个 Android Activity，它只是从外部源读取数据并在 TextView 中使用该数据。我在以下两种情况下看到了巨大的性能差异：

1.  读取外部数据并填充 Activity 的实例变量以在整个 Activity 中使用。执行时间为 2220.479170 毫秒，DalvikVM 释放内存 12 次。
2.  每次需要在类方法中使用外部数据时，将其读入局部变量。结果为 1150.434916 毫秒，DalvikVM 释放内存 6 次。

如您所见，使用实例变量的执行时间比使用局部变量多 1070 毫秒，并且内存泄漏量增加了一倍。我从使用局部变量切换到实例变量的原因是因为我在不同的方法中使用相同的数据，因此使用实例变量比使用多个局部变量更有意义。

我的问题是为什么使用局部变量而不是实例变量时性能更高效，为什么内存需要释放两倍的次数？

一段代码：

```
public class DataActivity extends Activity {

    //Raw value table entries
    //Table 61
    private int nbr_chns_set1;
    private int nbr_blks_set1;
    private int nbr_blk_ints_set1;
    private int max_int_time_set1;
    //Table 62
    private int blk_end_read_flag;
    private int blk_end_pulse_flag;   
    //Table 63
    private int last_block_element;
    private int nbr_valid_int;
    private int nbr_valid_blocks;
    private int interval_order;
    //Table 64
    ArrayList<String> table64Entries;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_lp_data);

        initializeVariables();
        classMethods();     
    }

    public void initializeVariables() {

        //Populate class variables from values in Table 61
        TableReader tableReader = new TableReader(this, R.raw.table61);
        ArrayList<String> table61Entries = tableReader.readTable();
        nbr_chns_set1 = table61Entries.get(98);
        nbr_blks_set1 = table61Entries.get(90);
        nbr_blk_ints_set1 = table61Entries.get(94);
        max_int_time_set1 = table61Entries.get(102);
        blk_end_read_flag = table61Entries.get(22);
        blk_end_pulse_flag = table61Entries.get(26);

        //Populate class variables from values in Table 63
        tableReader = new TableReader(this, R.raw.table63);
        ArrayList<String> table63Entries = tableReader.readTable();
        last_block_element = table63Entries.get(38);
        nbr_valid_int = table63Entries.get(5));
        nbr_valid_blocks = table63Entries.get(34);
        interval_order = table63Entries.get(22);

        //Populate class variables from values in Table 64
        tableReader = new TableReader(this, R.raw.table64);
        table64Entries = tableReader.readTable();

    }

    public void classMethods() {
        ...
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T15:29:57.703

局部原始变量在堆栈上。它的范围是本地的。如果您在方法中有变量，并且当该方法起作用时，堆栈指针将被重置。

实例变量存储在堆上。Android 做垃圾收集我的标记和扫描。当类本身可用于垃圾回收时，实例变量可用于垃圾回收。

[http://www.youtube.com/watch?v=_CruQY55HOk](http://www.youtube.com/watch?v=_CruQY55HOk)。谈话是关于内存管理的。

[http://developer.android.com/training/articles/perf-tips.html](http://developer.android.com/training/articles/perf-tips.html)。

# jquery - jQuery防止默认，表单提交两次

> ID：15745849
> 
> 赞同：0
> 
> 时间：2013-04-01T15:00:24.320
> 
> 标签：jquery, forms

我想防止表单在更改选择框后提交两次。我尝试使用 e.preventDefault()，但没有区别。

```
 $(document).ready(function() {
            $(document).on("change","#select1", function(e){
                e.preventDefault();
                $("#form1").submit();
            });

        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T15:03:37.687

该表单不会使用该代码提交两次，但它也不会阻止表单提交，它只是阻止选择上的更改事件，因为这是您绑定的元素和事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T16:14:38.723

您需要`preventDefault`在表单的提交事件上：

```
$('form').live('submit', function (e) {
  e.preventDefault();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T16:11:57.203

类似的东西？

```
$(document).ready(function() 
{
    var changed = 0;
    $(document).on("change","#select1", function(e)
    {
        changed++;
        if( changed > 1)
            return false;

        $("#form1").submit();
    });

}); 
```

# ibm-mobilefirst - 停止执行工作灯程序

> ID：15745850
> 
> 赞同：0
> 
> 时间：2013-04-01T15:00:27.060
> 
> 标签：ibm-mobilefirst

我们可以停止执行工作灯程序（适配器）吗？我有一个表单。在提交单击时我通过工作灯适配器调用 web 服务。和一个取消按钮。我如何在取消按钮单击时停止执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:37:26.033

您所要求的目前在 Worklight 中是不可能的。

# java - 自动增量 ID 打破序列

> ID：15745853
> 
> 赞同：1
> 
> 时间：2013-04-01T15:00:36.663
> 
> 标签：java, mysql

我的程序有一个自动递增的 ID，其格式为`ITM001, ITM002...`. 但是在`ITM009, ITM0010`序列被破坏并回到`ITM001`. 因此，我将获得`ITM0010`下一个项目 ID 而不是`ITM0011`. 请帮助我了解我应该如何编写查询以继续序列。

```
ITM001
**ITM0010**
ITM002
ITM003
ITM004
ITM005
ITM006
ITM007
ITM008
ITM009
```

```
 Connection conn = DBConnection.conn();
      String sql = "select itemId from ItemMain";
       ResultSet res = DBHandller.getData(sql, conn);
        if (res.last()) {
              String lastid = res.getString("itemId");
               return lastid;
        }
        return null;   
/////////////////////////////////////////////////////////////////////////////

              String itemID = ItemController.getItemID();

              String[] split = itemID.split("ITM",0);
              int num = Integer.parseInt(split[1]);
              itemID = "ITM00"+ (num+1);
              txtitemID.setText(itemID); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T15:13:49.210

问题是您`split`在 0 上使用，并且在您递增之后，您的字符串中有几个 0，例如：

```
 String[] split = itemID.split("ITM",0);
    int num = Integer.parseInt(split[1]);
    String second = "ITM00" + (num + 1);
    System.out.println(second);
    System.out.println(Arrays.toString(second.split("0"))); 
```

这将输出：

```
[ITM, , 1] 
```

由于最后的 0 也会被拆分。

就像是：

```
String itemID = "ITM009";
int num = Integer.parseInt(itemID.substring(itemID.indexOf("0")));
String second = "ITM0" + String.format("%02d", num + 1);
System.out.println(second); 
```

可能会给你你想要的东西，但你需要弄清楚你希望你的密钥有多少位数并相应地进行调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T15:28:39.100

您正在对 VARCHAR 字段进行隐式排序。

```
SELECT a.a FROM (
    SELECT 'a001' [a]
    UNION ALL
    SELECT 'a009' [a]
    UNION ALL
    SELECT 'a0010' [a]
) a ORDER BY a

a001
a0010
a009 
```

您获取的最后一个 id 将始终是 009，因此您创建的下一个 id 将始终是 0010。

如果您在前面用 1 个“0”而不是两个填充“10”，则隐式升序排序将是正确的。“001 ... 009, 010”

# javascript - 为什么我的 Angular.js $location.path(url) 循环回根？

> ID：15745856
> 
> 赞同：2
> 
> 时间：2013-04-01T15:00:46.450
> 
> 标签：javascript, angularjs, events, url-routing

使用 Angular.js，我正在尝试创建一个按钮，单击该按钮会将成员推送到新的 url（没有页面重新加载），并`$routeProvider`设置一些`$routeParams`供控制器在对数据进行 JSON 调用时使用。

我`$routeProvider`的设置如下：

```
app.config(function ($routeProvider) {
    $routeProvider.when('/list/:base/:keyword', { templateUrl: 'list', controller: 'listCtrl' })
}); 
```

这将加载`listCtrl`, 使用“列表”模板。在`listCtrl`我调用这样的数据：

```
app.controller('listCtrl', function ($scope, $routeParams, $location, $http) {
    console.log('listCtrl called');
    $http.get('urlForData&kw=' + $routeParams.keyword).success(function (data) {
        $scope.results = data;
    });
}); 
```

如果我手动点击 url，这很好用 /#/list/baseName/keyword 把所有的权利都`$routeParams`放到`listCtrl`了 JSON 调用中。

我想让用户点击该路线，在我的`homeCtrl`我有一种更改路线的方法，如下所示：

```
app.controller('homeCtrl', function ($scope, $routeParams, $location) {
    var model = {
        criteria: 'yakiniku',
        base: 'yokota-ab-japan'
    };
    $scope.model = model;

    $scope.changeRoute = function () {
        $location.path('/list/' + model.base + '/' + model.criteria);
    };
}); 
```

我没有将 url 放入`changeRoute()`方法中，因为我想根据成员输入到几个输入中的值定向到 url，因此我将模型属性连接到服务`.path(url)`上的方法中`$location`。

然后我把`ng-click="changeRoute()" attribute`一个 HTML `<button/>`。但是，当我单击按钮时，我可以看到 url 在一瞬间发生了变化，然后直接切换回根 url。我没有`.otherwise()`设置路由，为什么会立即跳回根目录？

另外，我没有引用第三方库，只有 angular。

**更新** 当我设置使用 Html5 模式时可能需要注意`$locationProvider`，它更改了 url 就好了......但由于我在 ASP.NET MVC 站点上托管应用程序，我需要它来使用哈希，而不是 HTML5 模式.

虽然路由更改在 HTML5 模式下工作，但没有哈希标记的 url 上的页面刷新会中断，因为它会干扰 ASP.NET MVC 路由，并且我正在尝试允许深度链接到我的 Angular 应用程序。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-01T15:00:53.403

我有一个类似的问题并得到了解决方案。我希望这可以帮助别人。我在控制器中有一个函数，它使用 location 方法更改路径。它是这样的：

```
$scope.goHome = function(){
    $location.path('/home');
} 
```

当我从带有 href="#" 的锚标记调用该函数时，它失败了。

诀窍是删除 href 属性。据我了解，角度会将您移动到新路径，但随后您的浏览器会执行 href 属性中的 # 值，您会发现自己回到了同一页面。

因此，如果您删除 href="#" 它会起作用。如果您是链接手形光标的粉丝，请使用 CSS 来获取它。

```
.myLink{
    cursor:pointer;
} 
```

干杯，多鲁克

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T15:34:08.647

您应该检查是否启用了 HTML5 路由。这是文档的链接：http: [//docs.angularjs.org/guide/dev_guide.services](http://docs.angularjs.org/guide/dev_guide.services) .$location

这是您的情况的工作 plunker 示例：[http ://plnkr.co/edit/snCoGhFnLqgLSIGrJCe7?p=preview](http://plnkr.co/edit/snCoGhFnLqgLSIGrJCe7?p=preview)

# types - 在 LLVM 中定义新类型

> ID：15745857
> 
> 赞同：3
> 
> 时间：2013-04-01T15:00:51.003
> 
> 标签：types, llvm, llvm-ir

在一个非常简单的 LLVM IR 程序中，我可以做到

```
%MyStruct = type { i32 }
%MyInt = type i32

declare void @main(%MyStruct, %MyInt) 
```

但是，我无法弄清楚如何使用 LLVM C++ API生成相同的`%MyStruct = type { i32 }`or语句。`%MyInt = type i32`在过去的几天里，我一直在搜索文档，我发现唯一接近我想要的就是手动定义一个新类型，如下所述：http: [//llvm.org/docs/ExtendingLLVM.html #添加新类型](http://llvm.org/docs/ExtendingLLVM.html#adding-a-new-type)

但是，我想要一种使用 LLVM C++ API 定义和使用新类型的方法，就像我可以使用函数等一样。

我能想到的唯一另一种方法是单独记录我的自定义类型和它们的 LLVM 原始基类型，并且在声明函数时，使用原始基类型；但如果 LLVM 本身内置了一种更快的方法，我不想开始这样做（正如我通过查看一些 LLVM IR 示例并生成上面的代码发现的那样）。

**编辑：**我做了更多的环顾四周，我发现一个函数的引用似乎正是我需要`addTypeName`在[http://llvm.org/docs/ProgrammersManual.html](http://llvm.org/docs/ProgrammersManual.html)和[http:// llvm.org/doxygen/Module_8h-source.html](http://llvm.org/doxygen/Module_8h-source.html)，但是这似乎是全部，因为我`addTypeName`在实际文档中看不到任何参考，并且我无法使用它编译程序，`addTypeName`因为它声称该方法不存在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T19:56:33.320

对您来说最简单的方法是使用 cpp 后端 (llc -march=cpp) - 给定 IR，它将生成重现 IR 所需的 C++ API 调用序列。

# wcf - 哪种传输安全或消息安全？

> ID：15745864
> 
> 赞同：1
> 
> 时间：2013-04-01T15:01:18.450
> 
> 标签：wcf, openssl, certificate, nettcpbinding

我有一个使用 net.TCP 绑定的 WCF 服务，该服务可以在 LAN 内或通过 Internet 使用。

我已经阅读了 net.TCP 默认使用传输级安全性，但是这种安全性是点对点的，我认为如果我在 LAN 之外使用我的客户端，通过互联网和通信使用很多点，也许其中一些点不在没有安全性的情况下传输消息。它是否正确？

那么如果我也需要消息安全呢？我可以使用 ssl 证书 x509 来加密每条消息，并且只能由具有私钥的服务解密？

是否有一些文档解释了如何将证书与 net.TCP 绑定一起使用？我可以使用 open ssl 创建我的证书并将其与 WCF 一起使用吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T18:58:47.017

首先，这两种方法都是安全的，可以满足 90% 的情况。传输安全保护您的通信渠道，但不会加密您的实际消息。消息安全加密您的实际消息，因此消息通过的服务器无法看到消息内容，并且需要私钥来解密您的消息。所以有人可能会说消息安全更安全，至少它更适合互联网通信。关于 WCF 安全性的一些好的链接：WCF [中的消息安全](http://msdn.microsoft.com/en-us/library/ms733137.aspx)以及[模式和实践改进 Web 服务安全指南](http://wcfsecurityguide.codeplex.com/wikipage?title=Ch%2007%20-%20Message%20and%20Transport%20Security%20in%20WCF)

`netTcpBinding`默认情况下使用传输安全性，但这并不意味着您不能使用消息安全性。传输安全性比消息安全性（每条消息都被加密）具有更少的计算开销，因此它具有更好的性能。通过 Internet使用的一个警告`netTcpBinding`是，它可能无法保证始终工作（尽管过去我已经通过 Internet 进行`successfully`设置`netTcpBinding`），因为它使用一些端口进行消息传输，这些端口并不总是保证由网络路由器和防火墙（通过 Internet，您的消息将通过许多路由器和防火墙。）对于 Internet 通信，请考虑 HTTP 绑定之一，例如`basicHttpBinding`也`wsHttpBinding`支持消息安全的 或。

您可以像在其他绑定中一样使用消息安全性：

```
<netTcpBinding>
    <binding name="securedBinding">
      <security mode="Message">
      </security>
    </binding>
</netTcpBinding> 
```

然后将`bindingConfiguration`端点上的 设置为`securedBinding`.

在托管您的服务的机器（服务器）上：

```
<behavoirs>
  <serviceBehavior>
    <behavior name="securityBehaviour">
      <serviceCredentials>
        <serviceCertificate
           findValue="serviceCert"
           storeLocation="LocalMachine"
           storeName="My"
           x509FindType="FindBySubjectName" />
      </serviceCredentials>
    </behavoir>
  </serviceBehavior>
</behavoirs>
<services>
  <service name="Service1"  behaviorConfiguration="securityBehaviour">
        <endpoint address="" binding="netTcpBinding" contract="IService1" bindingConfiguration="securedBinding">
        </endpoint>
  </service>
</services> 
```

如果您有有限的客户并且您知道他们是谁，您可以使用自签名证书。但是，如果您希望在许多未知客户端使用您的服务时获得最佳安全性，您最好从已知 CA 购买一个。然后，您需要在服务器机器上安装服务器证书。 [这](http://robbincremers.me/2011/12/29/wcf-message-security-and-client-certificate-authentication-with-self-signed-certificates/)是一篇关于如何使用证书保护您的服务的文章，该博客还有一些您可能想阅读的其他有用的 WCF 安全文章。

# javascript - Flexslider 无限循环

> ID：15745865
> 
> 赞同：7
> 
> 时间：2013-04-01T15:01:19.217
> 
> 标签：javascript, web, flexslider

需要修复主页滑块，使其不会在最后飞回所有幻灯片。需要无缝循环。但我不知道我做错了什么。示例：http: [//3dollar.vigorbranding.com/](http://3dollar.vigorbranding.com/)

```
<script type="text/javascript">
    jQuery(window).load(function() {
        jQuery('#carousel').flexslider({
            animation: "slide",
            controlNav: false,
            animationLoop: false,
            slideshow: true,
            itemWidth: 187,
            itemMargin: 0,
            asNavFor: '#slider'
        });

        jQuery('#slider').flexslider({
            animation: "slide",
            controlNav: false,
            animationLoop: true,

            <?php if (ot_get_option('autoslide') == 'yes') { ?>

            slideshow: true,                //Boolean: Animate slider automatically
            slideshowSpeed: <?php echo ot_get_option('delay') ?>, 

            <?php } else { ?>
            slideshow: false,  
            <?php }  ?>

            sync: "#carousel",
            start: function(slider) {
                jQuery('body').removeClass('loading');
            }
        });

    });
</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T15:04:48.783

设置`animationLoop`为`true`而不是`false`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-31T14:00:40.460

我刚刚也有同样的辩论。animationLoop: true 对我来说还不够......我在这里阅读了关于这个问题的主题：

[https://github.com/woothemes/FlexSlider/issues/287](https://github.com/woothemes/FlexSlider/issues/287)

并根据此线程中的建议，我最终转换为 bxSlider：

[http://bxslider.com/examples/carousel-dynamic-number-slides](http://bxslider.com/examples/carousel-dynamic-number-slides)

这不仅完美地完成了无限循环，而且它的大小模型看起来更直观；我已经能够更轻松地将它与我的网格对齐。如果你想到：

```
[   item    ][mgn][   item    ][mgn][   item    ][mgn][   item    ][mgn] 
```

（其中 mgn = 保证金）

然后在 flexslider 中，如果我调整项目宽度和边距以使滑块完全对齐：

```
[       page width            ]
[   item    ][mgn][   item    ][mgn][   item    ][mgn][   item    ][mgn] 
```

然后，一旦我滚动到 RH 边缘，仍然有一个“幽灵幻灯片”潜伏在 RH 边缘，即尾随边距：

```
 [       page width            ]
[   item    ][mgn][   item    ][mgn][   item    ][mgn][   item    ][mgn]
                                                         ghost slide ^ 
```

bxSlider 完美地说明了这一点。

# html - 自动刷新 HTML 页面

> ID：15745870
> 
> 赞同：0
> 
> 时间：2013-04-01T15:01:38.073
> 
> 标签：html

我需要自动刷新和 HTML 页面。

如果我将以下内容放在我的 HEAD 标签中，它似乎可以解决问题：

```
 <head>
     <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
     <meta http-equiv="Pragma" content="no-cache">
     <meta http-equiv="Expires" content="0">
   </head> 
```

我想知道其他人是否有过不起作用的经验。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-02T07:49:21.510

```
Try this tag. 

     <head>
     <meta http-equiv="refresh" content="900">
    </head> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T15:06:48.847

存在一些已知问题，这不适用于某些版本的 IE。有一种技巧，您可以在 HTML 文档的末尾放置一个包含适当元标记的第二个 head 部分。

# javascript - 有什么作用！$(function () { }(window.jQuery); 是什么意思？

> ID：15745871
> 
> 赞同：0
> 
> 时间：2013-04-01T15:01:46.583
> 
> 标签：javascript, jquery, twitter-bootstrap

阅读引导代码，我发现了这个：`! $(function () { }(window.jQuery);`.
这是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T15:03:34.633

```
!function($) { }(jQuery) 
```

是相同的

```
(function($) { })(jQuery) 
```

或者

```
(function($) { }(jQuery)) 
```

这只是一种更短的方法，可以让您立即调用一个函数表达式。not 运算符 ( `!`) 使它成为函数表达式而不是声明，就像括号一样，但它短了一个字符。

# ios - 弹出窗口中的视图缺少一些（但不是全部）子视图

> ID：15745875
> 
> 赞同：0
> 
> 时间：2013-04-01T15:02:16.533
> 
> 标签：ios, objective-c, ipad

我正在尝试在弹出框内显示视图。我做过很多次的事情。但是，由于某种原因，这次弹出窗口出现了，但缺少一些（但不是全部）子视图。

更具体地说，这个视图包含一个标签、一个文本字段、一个按钮，并且顶部还有一个导航栏。显示时，它显示一个标签，但不显示文本字段或按钮。我试过有没有XIB，结果是一样的。

这是弹出框的声明..（单击按钮时触发）

```
if (popover)
{
    [popover dismissPopoverAnimated:NO];
    popover = nil;
}

// create the settings view controller and display it in a popover
LoginViewController *loginViewController = [[LoginViewController alloc] init];
UINavigationController *nav = [[UINavigationController alloc] initWithRootViewController:loginViewController];

// Initialize the popover, set the parent view as the delegate and allocate the popover's origin on the screen
popover = [[UIPopoverController alloc] initWithContentViewController:nav];
popover.delegate = self;
[popover presentPopoverFromRect:button.frame inView:button.superview permittedArrowDirections:UIPopoverArrowDirectionDown animated:YES]; 
```

并在视图中加载了我的 loginViewController

```
self.navigationItem.title = NSLocalizedString(@"POPOVER_TITLE_INFORMATION", nil);

// setup navigation buttons
UIBarButtonItem *cancelButton = [[UIBarButtonItem alloc] initWithTitle:NSLocalizedString(@"BUTTON_TITLE_CANCEL", nil) style:UIBarButtonItemStyleBordered target:self action:@selector(cancel)];
UIBarButtonItem *searchButton = [[UIBarButtonItem alloc] initWithTitle:NSLocalizedString(@"BUTTON_TITLE_SEARCH", nil) style:UIBarButtonItemStyleDone target:self action:@selector(search)];
self.navigationItem.rightBarButtonItem = searchButton;
self.navigationItem.leftBarButtonItem = cancelButton;

[_loginTextLabel setText:NSLocalizedString(@"DESCRIPTION_TEXT", nil)];
[_loginTextLabel setNumberOfLines:0];
_loginTextLabel.frame = CGRectMake(20, 30, 728, 40);
[self.view addSubview:_loginTextLabel];

_loginTextField.frame = CGRectMake(20, 80, 264, 30);
[self.view addSubview:_loginTextField];

[_loginSubmitButton setTitle:NSLocalizedString(@"BUTTON_TITLE_SUBMIT", nil) forState:UIControlStateNormal];
[_loginSubmitButton addTarget:self action:@selector(submitBtnClk:) forControlEvents:UIControlEventTouchUpInside];
[_loginSubmitButton setFrame:CGRectMake(20, 130, 208, 44)];
[self.view addSubview:_loginSubmitButton]; 
```

没什么太复杂的，但是标签是唯一实际显示在屏幕上的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:44:41.157

我找到了解决方案。

似乎 Popovers AutoResize 他们的组件，并且按钮和文本字段的宽度不够大。本质上，弹出窗口比覆盖整个窗口的普通视图小，所以当我猜弹出窗口正在调整视图时，它一直在将 textField 和按钮的宽度缩小到 0。

所以基本上，我不得不增加这些子视图的宽度来补偿。

# jquery - 检查 .getJSON 是否返回任何数据

> ID：15745876
> 
> 赞同：4
> 
> 时间：2013-04-01T15:02:19.597
> 
> 标签：jquery, ajax, jquery-ui, knockout.js

我正在尝试使用 KnockOutJS 和 jQuery - 有什么方法可以检查下面的**allData**，看看它是否返回了任何东西？

如果没有，我想在屏幕上隐藏一个 div：

```
$(document).ready(function () {

$("#thankyou").hide(); // hide thank you box

$("#searchBtn").click(function () {

    $.getJSON("/api/searchapi/", function (allData) {
        sampleProductCategories = allData;  // I want to check if this has returned anything?
        if(!allData) { alert("nothing");}
        cart.RoomCategories(sampleProductCategories);
    });
 });
}); 
```

Firebug 将空 JSON 显示为：

![在此处输入图像描述](https://i.stack.imgur.com/mp3MU.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T15:21:50.980

由于您的*“空数据”*是一个空数组，因此只需测试它的长度。

```
if (allData.length) {
    // we have data
}
else {
    // we don't have data
} 
```

# matlab - 使用 sobel 滤波器查找正边缘和负边缘

> ID：15745878
> 
> 赞同：0
> 
> 时间：2013-04-01T15:02:23.353
> 
> 标签：matlab, filter

我有一个二进制条形码图像，我想应用我创建的 sobel 过滤器，以便我可以检测条形码行的正/负垂直边缘，然后我可以使用它来确定每个条形码行的开始/结束。实现我自己的 sobel 过滤器的想法是，我可以保留极性（用于每个条码行的开始/结束），然后在标记条码中每个条的开始和结束的正/负值上绘制不同的颜色线。

我的问题是，当我在输出图像中应用过滤器时，我没有从原始条形码中获取每一行。任何人都可以在我的代码中看到问题吗？

```
Image =imread('barcode.jpg')
I = im2double(Image);
G  = rgb2gray(I);
avgI=mean(mean(G))
Threshold = avgI;
T=(G<Threshold);

figure()
New = T.*G
imshow(New);
G = [1 0 -1
     2 0 -2 
     1 0 -1];

Output = I;
for n = 1:1000
Output = conv2(New,G); % 2D Convolution Function
end

subplot(1,2,1), imshow (New);
subplot(1,2,2), imshow (Output); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:22:16.280

直接在阈值图像上使用卷积操作。还要确保将其转换为，`double`因为它将是 class `logical`。最后，我不知道您为什么要执行 1000 次卷积，但总的来说，我认为您付出了很大的努力并且相对接近解决方案。

代码：

```
Image =imread('barcode.jpg');
I = im2double(Image);
G  = rgb2gray(I);
avgI=mean(mean(G));
Threshold = avgI;
T=(G<Threshold);

figure
G = [1 0 -1
     2 0 -2 
     1 0 -1];

Output = conv2(double(T),G); % 2D Convolution Function

subplot(1,2,1), imshow (T,[]);
subplot(1,2,2), imshow (Output,[]); 
```

输出：

![在此处输入图像描述](https://i.stack.imgur.com/CJmzG.jpg)

# php - 在 codeigniter URL 结构中用破折号替换下划线

> ID：15745887
> 
> 赞同：0
> 
> 时间：2013-04-01T15:03:05.017
> 
> 标签：php, codeigniter

我有一个使用 codeigniter 开发的网站。我的 URL 结构有大约 4 个段和 500 多个页面。目前我的 URL 有下划线 (_) 但我需要将其替换为破折号 (-)

当前结构

```
mywebsite.com/app/standalone_apps/high_runner_beta/download 
```

所需的 URL 结构

```
mywebsite.com/app/standalone-apps/high-runner-beta/download 
```

我无法使用 CI 中的路由功能，因为需要重定向的链接太多。

我确实尝试了 [Codeigniter Routes 正则表达式中的解决方案 - 在控制器/方法名称中使用破折号，](https://stackoverflow.com/questions/2428134/codeigniter-routes-regex-using-dashes-in-controller-method-names) 但它不起作用。

有人可以建议一种方法，我可以用我的网址上的破折号替换下划线。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-24T00:14:45.403

这对我有用-> 使用此代码创建一个 php 文件：MY_Route.php 并上传到“应用程序/核心”目录：

```
<?php class MY_Router extends CI_Router { 
function set_class($class) 
{
    $this->class = str_replace('-', '_', $class);
}

function set_method($method) 
{
    $this->method = str_replace('-', '_', $method);
}

function set_directory($dir) {
    $this->directory = $dir.'/';
}

function _validate_request($segments)
{
    if (count($segments) == 0)
    {
        return $segments;
    }

    // Does the requested controller exist in the root folder?
    if (file_exists(APPPATH.'controllers/'.str_replace('-', '_', $segments[0]).'.php'))
    {
        return $segments;
    }

    // Is the controller in a sub-folder?
    if (is_dir(APPPATH.'controllers/'.$segments[0]))
    {
        // Set the directory and remove it from the segment array
        $this->set_directory($segments[0]);
        $segments = array_slice($segments, 1);

        while(count($segments) > 0 && is_dir(APPPATH.'controllers/'.$this->directory.$segments[0]))
        {
            // Set the directory and remove it from the segment array
            $this->set_directory($this->directory . $segments[0]);
            $segments = array_slice($segments, 1);
        }

        if (count($segments) > 0)
        {
            // Does the requested controller exist in the sub-folder?
            if ( ! file_exists(APPPATH.'controllers/'.$this->fetch_directory().str_replace('-', '_', $segments[0]).'.php'))
            {
                if ( ! empty($this->routes['404_override']))
                {
                    $x = explode('/', $this->routes['404_override']);

                    $this->set_directory('');
                    $this->set_class($x[0]);
                    $this->set_method(isset($x[1]) ? $x[1] : 'index');

                    return $x;
                }
                else
                {
                    show_404($this->fetch_directory().$segments[0]);
                }
            }
        }
        else
        {
            // Is the method being specified in the route?
            if (strpos($this->default_controller, '/') !== FALSE)
            {
                $x = explode('/', $this->default_controller);

                $this->set_class($x[0]);
                $this->set_method($x[1]);
            }
            else
            {
                $this->set_class($this->default_controller);
                $this->set_method('index');
            }

            // Does the default controller exist in the sub-folder?
            if ( ! file_exists(APPPATH.'controllers/'.$this->fetch_directory().$this->default_controller.'.php'))
            {
                $this->directory = '';
                return array();
            }

        }

        return $segments;
    }

    // If we've gotten this far it means that the URI does not correlate to a valid
    // controller class.  We will now see if there is an override
    if ( ! empty($this->routes['404_override']))
    {
        $x = explode('/', $this->routes['404_override']);

        $this->set_class($x[0]);
        $this->set_method(isset($x[1]) ? $x[1] : 'index');

        return $x;
    }

    // Nothing else to do at this point but show a 404
    show_404($segments[0]);
} } 
```

# c++ - 为什么对原始类型的操作是未排序的，而不是不确定排序的？

> ID：15745889
> 
> 赞同：4
> 
> 时间：2013-04-01T15:03:12.790
> 
> 标签：c++, c++11, undefined-behavior, sequence-points

If `i`is an `int`, 像这样的表达式`++i + ++i`是未定义的行为，因为有 2 个未排序的修改`i`. 但是， if`i`是一些`int`类似的类，`++i + ++i`而是具有不确定的顺序修改，因此是定义的行为（在这种情况下具有确定性的结果）。有没有一种情况，对原语的操作最好是无序列的而不是不确定的序列？如果是这样，为什么这种情况不适用于用户创建的类型？如果不是，为什么原始操作根本没有排序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T15:10:25.910

一般来说，有尽可能多的“未排序”。

不可能让两个函数在 C++ 中交错运行。因此，不可能运行两个`operator++`实现交错。

因此，对于实现的类类型`operator++`，这是不确定的。

# jquery - Ruby on rails：应用程序在用户到达页面末尾时呈现部分开头而不是

> ID：15745892
> 
> 赞同：0
> 
> 时间：2013-04-01T15:03:22.707
> 
> 标签：jquery, ruby-on-rails, ruby, ruby-on-rails-3

下面是我的代码

```
$(window).scroll(function()
    {
        if($(window).scrollTop() == $(document).height() - $(window).height())
        {
            $.ajax({
            success: function(html)
            {
                if(html)
                {
                    $("div.new_load").html("<%= escape_javascript (render :partial => 'new_load') %>");
                }else
                {
                    $('new_load').html('<center>No more posts to show.</center>');
                }
            }
            });
        }
    }); 
```

现在发生的情况是，当页面与其他部分一起加载时，`new_load`部分也会加载。但根据我的 js，它应该在到达底部时呈现。话虽这么说，如何根据我的 js 使我的应用程序呈现部分内容？

***或者简而言之，我希望代码`new_load partial`仅在用户向下滚动时执行。有没有办法做到这一点 ？***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T15:12:53.967

当页面从服务器提供时将呈现部分内容，并在您的 Javascript 需要时将其添加到 .new_load 中。如果您想完全控制事件的时间线，则必须使用 Ajax 获取内容。

# windows-phone-7 - ApplicationBarIconButton 中的文本宽度

> ID：15745895
> 
> 赞同：0
> 
> 时间：2013-04-01T15:03:34.500
> 
> 标签：windows-phone-7

我使用下一个：

```
<shell:ApplicationBarIconButton IconUri="icon.png" Click="Near_Click"
                                        Text="Some_long_word" /> 
```

并且文本被修剪。我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T15:11:44.143

你无法修复它。applicationBarIconButton 中的文本大小不能过长。

# javascript - Console.log 在 Chrome 中不起作用

> ID：15745899
> 
> 赞同：16
> 
> 时间：2013-04-01T15:03:54.277
> 
> 标签：javascript, google-chrome

我正在尝试从我的 javascript 代码中记录一些数据以检查它是否正确，但它似乎不起作用。即使我在控制台中输入：

```
console.log("hello"); 
```

控制台只返回未定义（这是正确的），但它也没有记录“你好”。如果重要的话，我会使用 adblock 和 hoverzoom 作为我的扩展。另外，我在使用macbook pro。关于为什么这不起作用的任何想法？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-01T15:06:30.753

很可能，您的代码中有一些 JavaScript`console.log`出于兼容性原因而被覆盖（这也会影响应用程序选项卡的控制台）。您可以通过按下`F12` *此选项卡*并检查它`console.log`仍然可以正常工作来验证这一点。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-08-29T11:53:01.153

确保在自定义级别下拉菜单中选中“信息”。 [![在此处输入图像描述](https://i.stack.imgur.com/1fmJj.png)](https://i.stack.imgur.com/1fmJj.png)

# sybase - 如何检查定义的连接错误类？

> ID：15745900
> 
> 赞同：0
> 
> 时间：2013-04-01T15:03:54.803
> 
> 标签：sybase, sybase-rs

如何检查 Sybase Replication Server 的连接 (DSI) 定义的错误类别？

我使用`alter connection`更改与 DSI 关联的错误类，但我想要一个列出其信息的命令，以确认错误类已正确关联。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:37:38.063

您可以通过调用`rs_getconn`RSSD 数据库来查看它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-20T21:50:20.257

我在 15.7.1 repserver 的 RSSD 数据库中看不到任何 rs_getconn 存储过程。

我确实看到了一个 ral_connection_details proc，它似乎可以完成这项工作（与 sqsh 连接的示例输出）：

```
> ral_connection_details “MY_ASE_SERVER”、“MyDB”；-mvert
dsname：MY_ASE_SERVER
数据库名称：MyDB
错误类：rs_sqlserver_error_class
函数字符串类：rs_sqlserver_function_class
用户名：mylogin
密码：NULL——注意，密码*不*为空，无论如何
出价：123

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-04T18:06:33.077

不确定 rs_getconn 和 ral_connection_details 来自哪里（第 3 方应用程序？自定义 proc？Sybase 多年来提供的一系列不可靠的 SRS 管理工具之一？），但最简单的（并且保证可以在任何 RSSD 中返回） eons - 除非有人丢弃它）是**rs_helpdb**存储过程。

**rs_helpdb**生成一个结果集，显示 dsname、dbname、did、prs、错误和函数类；对于 RS 15.7+，您还将获得 connid（与多路径 rep/alternate 连接相关联）和 repserver 错误类。

# matlab - 如何切割树状图并在地图上表示

> ID：15745901
> 
> 赞同：2
> 
> 时间：2013-04-01T15:03:59.380
> 
> 标签：matlab

我想知道 MATLAB 或任何其他软件中是否有任何工具/命令有助于在一定高度切割树状图（其中点代表状态）并在如下图所示的地理地图中表示它。

![在此处输入图像描述](https://i.stack.imgur.com/hVOyA.png) ![在此处输入图像描述](https://i.stack.imgur.com/iySgY.png)

你能否让我知道是否有更好的方法来做到这一点

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T16:26:14.403

您可以使用 File Exchange 提交绘制极性树状图（如您的示例） -[绘制极性树状图](http://www.mathworks.com/matlabcentral/fileexchange/21983-draw-a-polar-dendrogram)。

要将阈值应用于节点之间的距离并获取集群数据，您可以使用[CLUSTER](http://www.mathworks.com/help/stats/cluster.html)或[CLUSTERDATA](http://www.mathworks.com/help/stats/clusterdata.html)函数。

然后，您可以使用Mapping Toolbox 中的[USAMAP](http://www.mathworks.com/help/map/ref/usamap.html)功能来绘制状态并根据您的集群应用颜色。[请参阅文档](http://www.mathworks.com/help/map/ref/usamap.html#f15-776823)中的示例 3 。

# android - 不同 Android 版本的 Widgetsize

> ID：15745902
> 
> 赞同：2
> 
> 时间：2013-04-01T15:04:00.090
> 
> 标签：android, resize, manifest, android-appwidget

我开发了一个可用于不同尺寸的 appwidget。由于可以在 Android 4.2 上调整应用程序的大小，因此我不想在这些设备上过度填充小部件列表。但对于使用较旧 Android 版本的客户，我想提供一些不同尺寸的小部件。是否有条件xml标签或类似的可能性来检查清单中的Android版本，然后在旧版本的情况下添加更多尺寸？

提前感谢您的任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T15:56:11.653

是的。`receiver`您为每个小部件创建的清单中的标签具有一个`android:enabled`属性，它可以从资源文件中获取该布尔值。

因此，您可以将小部件的接收器编写为（重要的一行是`android:enabled`）：

```
<receiver
    android:name=".YourAppWidgetProvider"
    android:enabled="@bool/your_appwidget_enabled"
    android:label="@string/your_appwidget_label" >
    <intent-filter>
        <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
    </intent-filter>

    <meta-data
        android:name="android.appwidget.provider"
        android:resource="@xml/your_appwidget_info" />
</receiver> 
```

`bools.xml`然后在您的文件夹中创建一个`res/values`：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <bool name="your_appwidget_enabled">false</bool>
</resources> 
```

另一个`bools.xml`在您的`res/values-v11`文件夹中：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <bool name="your_appwidget_enabled">true</bool>
</resources> 
```

这意味着 YourAppWidgetProvider（以及 中描述的小部件`your_appwidget_info`）只会出现在 v11+ 设备上。您可以使用相同的方法根据您想要的任何 Android 版本禁用/启用任意数量的小部件。

# ssl - 带有 makecert.exe 创建证书的 ssl_upgrade_failure

> ID：15745904
> 
> 赞同：0
> 
> 时间：2013-04-01T15:04:20.987
> 
> 标签：ssl, erlang, rabbitmq

我正在尝试配置 SSL 以连接到我的 RabbitMQ 代理。我认为我的问题与 Erlang 的 SSL 实现有关。我能够使用直接使用 OpenSSL 创建的证书/密钥对来使用它；但是，当我将使用 makecert.exe 制作的证书（并使用内部测试 CA 签名，也使用 makecert.exe 创建）转换为 PEM 格式并尝试使用该格式时，客户端无法连接并且服务器会记录 ssl_upgrade_failure。似乎我的证书有些东西是 Erlang 的 SSL 实现不喜欢的。

我正在使用 Erlang R16B 和与 Windows 7 SDK 捆绑的 makecert.exe。

这是我的证书：

```
-----BEGIN CERTIFICATE-----
MIIDTzCCAjugAwIBAgIQYuux7Ob2BL5PUnDLgT/igTAJBgUrDgMCHQUAMCgxJjAk
BgNVBAMTHUVsbGtheSBTdGFnaW5nIFJvb3QgQXV0aG9yaXR5MB4XDTEyMDgxNTE1
MTMzN1oXDTM5MTIzMTIzNTk1OVowMzExMC8GA1UEAx4oACoALgBsAGsAYwBsAG8A
dQBkAHMAdABhAGcAaQBuAGcALgBjAG8AbTCCASIwDQYJKoZIhvcNAQEBBQADggEP
ADCCAQoCggEBANhryzuSNbDOUVqD7Oby/z+JNjICGemlpP0qmcAZ8JbE7ci/l5eu
BYwIyKy/LvjYYV6Z8ZlMKIbzmEgKxGCmSZjTcg08QXxG7CXpJfls/1ycv8Le7Tz0
ep2mzBnFhkOCNDQz2zAOiI/K6gwB0D2tv3O+j3ytnME8w+To5epzZSnfGHRIutQ4
jC7rVz8T1oLixYynQ39tG6L5ALmu5u1DZTRYmzaIbF16c6dy1m8OCqAvQ3LnykZq
rukjjaLDlJT6ZbUUXaZeGS2avf8ZM0f+HlrdDR+IFC/CxipxzHa6kStc+1dZVgqj
jT7ql9nEQ/8DaXmF4C749ELbtWOlSB/ElwUCAwEAAaNyMHAwEwYDVR0lBAwwCgYI
KwYBBQUHAwEwWQYDVR0BBFIwUIAQx8ryGLLGJ2Qr6NrWGYDWT6EqMCgxJjAkBgNV
BAMTHUVsbGtheSBTdGFnaW5nIFJvb3QgQXV0aG9yaXR5ghAu7ZXj5fLAu0CXveR3
xHi0MAkGBSsOAwIdBQADggEBACiAPScOR/DViwY4ZDVSxeGFqezh6ubWt4aqrYlt
h6ODWF1T0uUjf/VKksPtXlAxAz1F7IHmf80VAGPY18ZmH9JvnVz67PdGcKi6RMHY
vpBT79vbv0/+9TXxdIl2+qafuVb5ckmSlq1pIslnlZszt32pwrSYDvLihfRLStvV
MzKtUGRsug/eUeuCQBAalAHmuNh77bC6Bnp2ZMg/7HEb0bqXQS1mOupiN3Ylpe/y
r3pT7+xLzyzX4NY7GyYVO2VPnz2kvNbrTsTPWO7y1NQc3tDbRIwQeCqpYditByVN
cS/zgODqcpH1NipIfL/JTMFvA5O0jlgpSQDbRxiQELjJ9ms=
-----END CERTIFICATE----- 
```

这是来自 RabbitMQ 的日志的相关部分：

```
=INFO REPORT==== 28-Mar-2013::20:46:52 ===
accepting AMQP connection <0.301.0> (192.168.51.234:50804 -> 192.168.51.153:5671)

=ERROR REPORT==== 28-Mar-2013::20:46:52 ===
** State machine <0.302.0> terminating 
** Last message in was {tcp,#Port<0.15153>,
                            <<22,3,0,0,53,1,0,0,49,3,0,81,84,228,150,220,41,
                              203,120,104,165,175,147,215,108,167,136,54,238,
                              178,50,70,122,181,212,166,114,251,121,27,202,52,
                              143,0,0,10,0,5,0,10,0,19,0,4,0,255,1,0>>}
** When State == hello
**      Data  == {state,server,
                     {#Ref<0.0.0.1972>,<0.301.0>},
                     gen_tcp,tcp,tcp_closed,tcp_error,"localhost",5671,
                     #Port<0.15153>,
                     {ssl_options,[],verify_none,
                         {#Fun<ssl.1.131723950>,[]},
                         false,false,undefined,1,
                         <<"C:/Users/ScottB/AppData/Roaming/RabbitMQ/lkcloudstaging_cer.pem">>,
                         undefined,
                         <<"C:/Users/ScottB/AppData/Roaming/RabbitMQ/server/key.pem">>,
                         undefined,undefined,undefined,<<>>,undefined,
                         undefined,
                         [<<0,107>>,
                          <<0,106>>,
                          <<0,61>>,
                          <<0,103>>,
                          <<0,64>>,
                          <<0,60>>,
                          <<0,57>>,
                          <<0,56>>,
                          <<0,53>>,
                          <<0,22>>,
                          <<0,19>>,
                          <<0,10>>,
                          <<0,51>>,
                          <<0,50>>,
                          <<0,47>>,
                          <<0,5>>,
                          <<0,4>>,
                          <<0,21>>,
                          <<0,9>>],
                         #Fun<ssl.0.131723950>,true,268435456,false,undefined,
                         undefined,false,undefined,undefined},
                     {socket_options,binary,0,0,0,false},
                     {connection_states,
                         {connection_state,
                             {security_parameters,
                                 <<0,0>>,
                                 0,0,0,0,0,0,0,0,0,0,0,undefined,undefined,
                                 undefined,undefined},
                             undefined,undefined,undefined,0,undefined,
                             undefined,undefined},
                         {connection_state,
                             {security_parameters,undefined,0,undefined,
                                 undefined,undefined,undefined,undefined,
                                 undefined,undefined,undefined,undefined,
                                 undefined,undefined,undefined,
                                 <<81,84,228,124,31,218,166,3,48,108,125,182,
                                   121,180,129,153,59,55,16,200,98,117,189,183,
                                   170,169,208,189,111,61,67,162>>,
                                 undefined},
                             undefined,undefined,undefined,undefined,
                             undefined,undefined,undefined},
                         {connection_state,
                             {security_parameters,
                                 <<0,0>>,
                                 0,0,0,0,0,0,0,0,0,0,0,undefined,undefined,
                                 undefined,undefined},
                             undefined,undefined,undefined,0,undefined,
                             undefined,undefined},
                         {connection_state,
                             {security_parameters,undefined,0,undefined,
                                 undefined,undefined,undefined,undefined,
                                 undefined,undefined,undefined,undefined,
                                 undefined,undefined,undefined,
                                 <<81,84,228,124,31,218,166,3,48,108,125,182,
                                   121,180,129,153,59,55,16,200,98,117,189,183,
                                   170,169,208,189,111,61,67,162>>,
                                 undefined},
                             undefined,undefined,undefined,undefined,
                             undefined,undefined,undefined}},
                     [],<<>>,<<>>,
                     {[],[]},
                     [],311374,
                     {session,undefined,undefined,
                         <<48,130,3,79,48,130,2,59,160,3,2,1,2,2,16,98,235,177,
                           236,230,246,4,190,79,82,112,203,129,63,226,129,48,9,
                           6,5,43,14,3,2,29,5,0,48,40,49,38,48,36,6,3,85,4,3,
                           19,29,69,108,108,107,97,121,32,83,116,97,103,105,
                           110,103,32,82,111,111,116,32,65,117,116,104,111,114,
                           105,116,121,48,30,23,13,49,50,48,56,49,53,49,53,49,
                           51,51,55,90,23,13,51,57,49,50,51,49,50,51,53,57,53,
                           57,90,48,51,49,49,48,47,6,3,85,4,3,30,40,0,42,0,46,
                           0,108,0,107,0,99,0,108,0,111,0,117,0,100,0,115,0,
                           116,0,97,0,103,0,105,0,110,0,103,0,46,0,99,0,111,0,
                           109,48,130,1,34,48,13,6,9,42,134,72,134,247,13,1,1,
                           1,5,0,3,130,1,15,0,48,130,1,10,2,130,1,1,0,216,107,
                           203,59,146,53,176,206,81,90,131,236,230,242,255,63,
                           137,54,50,2,25,233,165,164,253,42,153,192,25,240,
                           150,196,237,200,191,151,151,174,5,140,8,200,172,191,
                           46,248,216,97,94,153,241,153,76,40,134,243,152,72,
                           10,196,96,166,73,152,211,114,13,60,65,124,70,236,37,
                           233,37,249,108,255,92,156,191,194,222,237,60,244,
                           122,157,166,204,25,197,134,67,130,52,52,51,219,48,
                           14,136,143,202,234,12,1,208,61,173,191,115,190,143,
                           124,173,156,193,60,195,228,232,229,234,115,101,41,
                           223,24,116,72,186,212,56,140,46,235,87,63,19,214,
                           130,226,197,140,167,67,127,109,27,162,249,0,185,174,
                           230,237,67,101,52,88,155,54,136,108,93,122,115,167,
                           114,214,111,14,10,160,47,67,114,231,202,70,106,174,
                           233,35,141,162,195,148,148,250,101,181,20,93,166,94,
                           25,45,154,189,255,25,51,71,254,30,90,221,13,31,136,
                           20,47,194,198,42,113,204,118,186,145,43,92,251,87,
                           89,86,10,163,141,62,234,151,217,196,67,255,3,105,
                           121,133,224,46,248,244,66,219,181,99,165,72,31,196,
                           151,5,2,3,1,0,1,163,114,48,112,48,19,6,3,85,29,37,4,
                           12,48,10,6,8,43,6,1,5,5,7,3,1,48,89,6,3,85,29,1,4,
                           82,48,80,128,16,199,202,242,24,178,198,39,100,43,
                           232,218,214,25,128,214,79,161,42,48,40,49,38,48,36,
                           6,3,85,4,3,19,29,69,108,108,107,97,121,32,83,116,97,
                           103,105,110,103,32,82,111,111,116,32,65,117,116,104,
                           111,114,105,116,121,130,16,46,237,149,227,229,242,
                           192,187,64,151,189,228,119,196,120,180,48,9,6,5,43,
                           14,3,2,29,5,0,3,130,1,1,0,40,128,61,39,14,71,240,
                           213,139,6,56,100,53,82,197,225,133,169,236,225,234,
                           230,214,183,134,170,173,137,109,135,163,131,88,93,
                           83,210,229,35,127,245,74,146,195,237,94,80,49,3,61,
                           69,236,129,230,127,205,21,0,99,216,215,198,102,31,
                           210,111,157,92,250,236,247,70,112,168,186,68,193,
                           216,190,144,83,239,219,219,191,79,254,245,53,241,
                           116,137,118,250,166,159,185,86,249,114,73,146,150,
                           173,105,34,201,103,149,155,51,183,125,169,194,180,
                           152,14,242,226,133,244,75,74,219,213,51,50,173,80,
                           100,108,186,15,222,81,235,130,64,16,26,148,1,230,
                           184,216,123,237,176,186,6,122,118,100,200,63,236,
                           113,27,209,186,151,65,45,102,58,234,98,55,118,37,
                           165,239,242,175,122,83,239,236,75,207,44,215,224,
                           214,59,27,38,21,59,101,79,159,61,164,188,214,235,78,
                           196,207,88,238,242,212,212,28,222,208,219,68,140,16,
                           120,42,169,97,216,173,7,37,77,113,47,243,128,224,
                           234,114,145,245,54,42,72,124,191,201,76,193,111,3,
                           147,180,142,88,41,73,0,219,71,24,144,16,184,201,246,
                           107>>,
                         undefined,undefined,undefined,new,63531722812},
                     323665,ssl_session_cache,undefined,undefined,false,
                     undefined,undefined,undefined,
                     {'RSAPrivateKey','two-prime',
                         25091000490399564416382733665912293706281236323287507449391018333858706088067104372951637210440828548699801793107621328582247328739957168356535343760898421117596223923057958675108280840952652110424468556362893842108742460936250265912296002218912760264533284800177616747391132407486580757942725318853670784742540298023139943942002078742079335138046822007139070167779479715409389988021492873379536675527198388004784204705449619014967663111341423672277165259908002197645143645833929707716094821495848245665580802072300300901995696081299311434728567907957618159230597695337971845318310069905698028328520007565703331606819,
                         65537,
                         12532291835951284642352753464759952731760837234028003552929880741268762456120795803045590924921343389430997938501684187097537025786559622030041471881063352256944852432936802405831735737793065202597533511207149656340503466992496089298764016305810310122514496309703131156584850210212028846765905833153120519214366483351036620512028360903366902227866159233021509892771286294064778569099266243884082209785268720465970929381008430443130075496396131177443808450873061131440124680376808011317874020764946935204300278562787258089499308485762628408971801392792765876969493808892573747399158232707154902628249712310347508330481,
                         164613524625768478096728511491146234379950805547018160443402940694931123301226530314268605486708880647658162742710176890755691202467149416112553065729831746391569481381229328262217225008710581122456985360175690217141752754366597025760074826970126144030433840076718674219450293036228318089528491377991378917023,
                         152423687831490839453627602007609954938806264385151113997291723876694061058672531571680491904693205860873313947735180318401018227463103944680073963443527347105243646402511993135691316201430837009543216841366727950952917475175355759283610454988240555587842851002909990207473661609226206434152468235025307200253,
                         103984547751379971996375538203182369609466154978729646218112491292391375460388439026510307132524542623745369476562226118076733144497574174552444945117251391868174999766567175194585209852993108440859312097378784492720927449807326399887717438420071901928924585277569562140638458907286206884483421800776127924467,
                         39507777060187907438527428403852332339678380351718296130002815409515266417499584872791499702229633458331247753638059539934359165508273901891762155988452310073344428665326017782260225343145179490686339388197454990354108505894437772295812911773276810317388444847741459078907412450309375905167279214922484907925,
                         140777917719684893441642072243040594921813463059778562021367548768326948139714681618402000290527139618053328133891840461484222782830228667641262369743730585486629970714763524415800836168519782394433537656246543908266747427470739521793087643652694808980372432733634387874662999415574210646072641560865328049441,
                         asn1_NOVALUE},
                     {'DHParameter',
                         179769313486231590770839156793787453197860296048756011706444423684197180216158519368947833795864925541502180565485980503646440548199239100050792877003355816639229553136239076508735759914822574862575007425302077447712589550957937778424442426617334727629299387668709205606050270810842907692932019128194467627007,
                         2,asn1_NOVALUE},
                     undefined,undefined,315471,#Ref<0.0.0.1974>,undefined,
                     <<>>,true,
                     {false,first},
                     {<0.301.0>,#Ref<0.0.0.1971>},
                     #Ref<0.0.0.1980>,
                     {[],[]},
                     false,true,false,undefined}
** Reason for termination = 
** {{badmatch,
        {error,
            {asn1,
                {'Type not compatible with table constraint',
                    {{component,'Type'},
                     {value,{5,<<>>}},
                     {unique_name_and_value,id,{1,3,14,3,2,29}}}}}}},
    [{public_key,pkix_decode_cert,2,[{file,"public_key.erl"},{line,218}]},
     {ssl_cipher,filter,2,[{file,"ssl_cipher.erl"},{line,484}]},
     {ssl_handshake,select_session,8,[{file,"ssl_handshake.erl"},{line,654}]},
     {ssl_handshake,hello,4,[{file,"ssl_handshake.erl"},{line,178}]},
     {ssl_connection,hello,2,[{file,"ssl_connection.erl"},{line,413}]},
     {ssl_connection,next_state,4,[{file,"ssl_connection.erl"},{line,2001}]},
     {gen_fsm,handle_msg,7,[{file,"gen_fsm.erl"},{line,494}]},
     {proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,239}]}]}

=ERROR REPORT==== 28-Mar-2013::20:46:52 ===
error on AMQP connection <0.301.0>: {ssl_upgrade_failure,
                                     {{{badmatch,
                                        {error,
                                         {asn1,
                                          {'Type not compatible with table constraint',
                                           {{component,'Type'},
                                            {value,{5,<<>>}},
                                            {unique_name_and_value,id,
                                             {1,3,14,3,2,29}}}}}}},
                                       [{public_key,pkix_decode_cert,2,
                                         [{file,"public_key.erl"},{line,218}]},
                                        {ssl_cipher,filter,2,
                                         [{file,"ssl_cipher.erl"},{line,484}]},
                                        {ssl_handshake,select_session,8,
                                         [{file,"ssl_handshake.erl"},
                                          {line,654}]},
                                        {ssl_handshake,hello,4,
                                         [{file,"ssl_handshake.erl"},
                                          {line,178}]},
                                        {ssl_connection,hello,2,
                                         [{file,"ssl_connection.erl"},
                                          {line,413}]},
                                        {ssl_connection,next_state,4,
                                         [{file,"ssl_connection.erl"},
                                          {line,2001}]},
                                        {gen_fsm,handle_msg,7,
                                         [{file,"gen_fsm.erl"},{line,494}]},
                                        {proc_lib,init_p_do_apply,3,
                                         [{file,"proc_lib.erl"},{line,239}]}]},
                                      {gen_fsm,sync_send_all_state_event,
                                       [<0.302.0>,{start,5000},infinity]}}} 
```

请注意，创建此证书/密钥对仅用于测试目的，但我担心我们的生产证书/密钥对会以类似的方式失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T18:58:16.277

我把这个问题带到了 erlang-questions 邮件列表并收到了以下不幸的答案：

> 你好！
> 
> 这是因为某些软件不使用 PKCS 标准 oid，而是使用替代 ISO-oid。在即将发布的 public_key 和 ssl 版本中，这是通过处理这些替代 oid 来解决的，请参阅提交：006f45a738a6612958381b2fcbf48586c008d911
> 
> 问候 Ingela Erlang/OTP 团队 - Ericsson AB

[回复的固定链接](http://permalink.gmane.org/gmane.comp.lang.erlang.general/67792)

# list - 在 Haskell 中扩展列表

> ID：15745913
> 
> 赞同：3
> 
> 时间：2013-04-01T15:05:13.853
> 
> 标签：list, haskell, list-comprehension

无论如何，我可以在 Haskell 中扩展列表列表吗？

我正在尝试编写一个生成 [1,2,2,3,3,3,4,4,4,4.....] 的函数，它基本上是 1 个、2 个、3 个等。

我的尝试：

> ```
> nnss :: [Integer]
> nnss = [nPrint x x | x <- [1,2..]] 
> ```

我尝试的问题是`nPrint x x`返回一个整数列表，例如，nPrint 2 2 将返回 [2, 2]。无论如何我可以将列表从 [1,2,3...] “扩展”到 [1,2,2,3,3,3...] 吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-01T15:08:22.520

我们正在寻找的函数签名是`[[a]] -> [a]`，如果我们检查[hoogle](http://www.haskell.org/hoogle/?hoogle=%5B%5Ba%5D%5D-%3E%5Ba%5D)，我们会发现这`concat`就是我们正在寻找的。

但是在这种情况下，列表推导是不必要的，因为我们只是在迭代每个项目，所以我们真的想做一个`map`. 所以既然结合`map`and`concat`很常见，我们可以写

```
concatMap (\x -> nPrint x x) [1..] 
```

如果你是 haskell 的新手，你可以忽略这个，但由于 list monad 是用定义的，`concatMap`我们也可以写

```
[1..] >>= \x -> nPrint x x 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T16:42:13.310

您也可以在不使用映射和列表连接的情况下编写它（只需在恒定时间内添加）：

```
nnss :: [Integer]
nnss = genRepeated 1 1

genRepeated :: Integer -> Integer -> [Integer]
genRepeated x 0 = genRepeated (x+1) (x+1)
genRepeated x y = x : genRepeated x (y-1) 
```

比

```
take 22 nnss == [1,2,2,3,3,3,4,4,4,4,5,5,5,5,5,6,6,6,6,6,6,7] 
```

* * *

其他快速的可能性是：

```
nnss :: [Integer]
nnss = flatten [take x $ repeat x | x <- [1..]]

flatten :: [[a]] -> [a]
flatten [] = []
flatten ([]:xs) = flatten xs
flatten ((x:xs):ys) = x : flatten (xs:ys) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T19:14:27.030

只需添加`concat`：

```
nnss :: [Integer]
nnss = concat [nPrint x x | x <- [1,2..]] 
```

# jquery - 使用jquery从表单中选择多维数组

> ID：15745927
> 
> 赞同：0
> 
> 时间：2013-04-01T15:06:13.153
> 
> 标签：jquery, html, arrays, forms, jquery-selectors

我尝试使用 JQuery 选择多维表单项。但是当我试图提醒它的价值时，我只会得到一个`undefined`.

这是我的表格：

```
 <select name='item[1][name]'>
       <option value='1'>Name 1</option>
       <option value='2'>Name 2</option>
       <option value='3'>Name 3</option>
       <option value='4'>Name 4</option>
    </select>

    <input type='text' name='item[1][id]' class='text' /> 
```

当我单击提交按钮时，我尝试选择所有表单元素。

我成功地选择了文本输入字段：

```
var item1i = $('input[name="item[1][id]"]');
var personi = $(item1i).val(); 
```

但是当我尝试`select`像这样选择标签时：

```
var item1n = $('input[name="item[1][name]"]');
var personn = $(item1n).val(); 
```

当我警告时`personi`，会显示正确的值。但是当我发出警报时，`personn`我得到了`undefined`.

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T15:09:41.373

采用`$('select[name="item[1][name]"]');`

或者，`$(':input[name="item[1][name]"]');`

`input`只会选择带有`input`标签的元素，因此对于您的选择，您必须使用`select`标签。

或者，jquery 提供了`:input`返回任何表单元素（输入文本、选择、复选框、文本区域等）的特殊选择器，因此您也可以使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T15:12:08.933

```
var item1n = $('input[name="item[1][name]"]'); 
```

你在这里选错了。试试这个

```
var item1n = $('select[name="item[1][name]"]'); 
```

# php - Zend\Db\ResultSet\ResultSet 对象在哪里存储检索到的数据？

> ID：15745929
> 
> 赞同：3
> 
> 时间：2013-04-01T15:06:19.607
> 
> 标签：php, zend-framework2, resultset, zend-db, tablegateway

[在 Zend Framework 应用程序中，它与ZF2 入门教程](http://framework.zend.com/manual/2.1/en/user-guide/overview.html)中的专辑应用程序非常相似，我使用 ResultSet 对象将数据从模型通过控制器传输到视图（有关详细信息，请参见下面的代码）。

这很好用，但我不知道`ResultSet`对象保存数据的位置。我可以循环它，例如，`foreach`逐行获取数据（或逐个模型对象更好的模型对象）。但是当我在我的 IDE 中调试它或简单地使用它时`var_dump(...)`，它似乎是空的。

对象如何/在哪里`Zend\Db\ResultSet\ResultSet`保存从数据库中检索的数据？

代码的相关部分：

模块设置：

```
class Module implements ConfigProviderInterface, ServiceProviderInterface, AutoloaderProviderInterface {
...
    public function getServiceConfig() {
        try {
            return array (
                'factories' =>array(
                    ...
                    'SportTable' => function ($serviceManager) {
                        $tableGateway = $serviceManager->get('SportTableGateway');
                        $table = new SportTable($tableGateway);
                        return $table;
                    },
                    'SportTableGateway' => function ($serviceManager) {
                        $dbAdapter = $serviceManager->get('Zend\Db\Adapter\Adapter');
                        $resultSetPrototype = new ResultSet();
                        $resultSetPrototype->setArrayObjectPrototype(new Sport());
                        return new TableGateway('sports', $dbAdapter, null, $resultSetPrototype);
                    },
                    ...
                )
            );
        }
        ...
} 
```

型号（表）：

```
class CourseTable {
        ...
    public function findAllByCityNameAndSportTitle($cityName, $sportTitle) {
        $select = new Select();
        $where = new Where();
        ...
        $resultSet = $this->tableGateway->selectWith($select);
        return $resultSet;
    }
    ...
} 
```

模型（映射器）：

```
class Course implements ArraySerializableInterface {

    public $id;
    ...

    public function exchangeArray(array $data) {
        $this->id               = (isset($data['id'])) ? $data['id'] : null;
        ...
    }
    ...
} 
```

控制器：

```
class CatalogController extends AbstractActionController {
    ...
    public function listCoursesAction() {
        $cityName = $this->params()->fromRoute('city', null);
        $sportTitle = $this->params()->fromRoute('sport', null);
        return new ViewModel(array(
            'city' => $cityName,
            'sport' => $sportTitle,
            'courses' => $this->getCourseTable()->findAllByCityNameAndSportTitle($cityName, $sportTitle)
        ));
    }
    ...
} 
```

看法：

```
<?php foreach ($courses as $course) : ?>
<div>
    <div>id: <?php echo $this->escapeHtml($course->id); ?></div>
    ...
</div>
<?php endforeach; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:38:55.900

`Zend\Db\ResultSet\ResultSet`或者更确切地说`Zend\Db\ResultSet\AbstractResultSet`是持有你问题的答案。该对象有 10-12 个方法，其中大多数提供迭代功能。要回答您的问题，`Zend\Db\ResultSet\ResultSet`将从 Db 检索到的信息保存在其`dataSource`参数 (Zend\Db\ResultSet\ResultSet::$dataSource) 中。

结果被迭代和加载`foreach`但看不到的悖论`var_dump()`可以解释为返回的结果实际上保存在缓冲中。

如果您想访问结果集，我建议您使用`Zend\Db\ResultSet\ResultSet::toArray()`( `$resultSet->toArray()`)。这将返回一个数组数组，其中每个数组都是 DB 表中的一行。

希望这会有所帮助，反馈将不胜感激:)，

斯托扬。

# sql-server - 如何从导出的数据创建更新？

> ID：15745930
> 
> 赞同：0
> 
> 时间：2013-04-01T15:06:20.463
> 
> 标签：sql-server

我想从一个数据库..table 中获取数据到一个 UPDATE 脚本中，该脚本可以与另一个数据库..table 一起使用。我需要对 DB2 运行一个 UPDATE 脚本，而不是从 DB1 导出到 DB2。

如果上述不可行，有没有办法从 DB1..table1 生成 UPDATE 语法：

```
col1 = value1,
col2 = value2,
col3 = value3,
... 
```

- - 编辑 - -

查看答案，假设 DB1 在 DB2 可用的同时可用。不是这种情况。每个数据库都不知道对方。两个服务器/数据库将不能同时可用/可访问。

是否可以将表数据编写成平面文件？不确定进入 UPDATE 语句会有多容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T15:30:44.580

如上所述，使用链接服务器和更新语句确实是您最简单的解决方案，但我明白有时这是不可能的。以下是动态构建更新语句的示例。我假设“SourceData”表中没有 SQL 注入的机会。如果存在这种可能性，那么您将需要使用相同的技术来构建使用 sp_executesql 和参数的语句。

```
SELECT 'UPDATE UpdateTable ' +
    '  SET FieldToUpdate1 = ''' + SourceData.DataToUpdate1 + '''' +
    '     , FieldToUpdate2 = ' + CAST(SourceData.DataToUpdate2 AS varchar) +
    ' WHERE UpdateTable.PrimaryKeyField1 = ' + CAST(SourceData.PrimaryKey1 AS varchar) +
    '   AND UpdateTable.PrimaryKeyField2 = ''' + SourceData.PrimaryKey2 + ''''
FROM SourceData 
```

这里还有一个链接，指向我写的关于[从查询生成多个 SQL 语句](http://sqlstudies.com/2012/12/17/generating-multiple-sql-statements-from-a-query/)的博客。它比您尝试创建的语句类型更简单，但它应该给您一个想法。另外这里是我写的一篇关于[在 SQL 中使用单引号](http://www.sqlservercentral.com/articles/T-SQL/95670/)的文章。除此之外，你可以去谷歌搜索“SQL Server Dynamic SQL”，你会得到数百个关于这个主题的博客、文章、论坛条目等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T15:10:02.767

您的问题需要进一步澄清才能完全理解您要完成的工作，但假设数据库位于同一台服务器上，那么您应该能够使用`UPDATE`and执行以下操作`JOIN`：

```
UPDATE a
SET col1 = value1, col2 = value2
FROM database1.schema.table a
    JOIN database2.schema.table b
        ON a.primaryKey = b.primaryKey 
```

或者，如果它们在不同的服务器上，您可以设置一个链接服务器，它应该可以类似地工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T15:10:14.670

我想你还是想`INSERT`从一个表进入另一个数据库的另一个表。您可以使用`INSERT INTO..SELECT`

```
INSERT INTO DB2.dbo.TableName(Col1, Col2, Col3) -- specify columns
SELECT Col1, Col2, Col3
FROM   DB1.dbo.TableName 
```

假设`dbo`是使用的架构。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T15:10:45.357

两个数据库都在同一个 SQL-Server 上吗？在这种情况下，请使用完全限定的表名。IE：

```
Update Database1.Schema.Table
SET ...
FROM
Database2.Schema.Table 
```

如果它们不在同一台服务器上，则可以使用`linked servers`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T15:12:37.803

我不确定 SQL 服务器语法，但您可以执行类似的操作来生成更新语句。

```
SELECT 'UPDATE mytable SET col1=' || col1 || ' WHERE pk=' primaryKey ||';' FROM mytable; 
```

显然，您需要根据值类型对引号等进行转义。

我认为这是因为您不能从 SELECT 执行正常的 UPDATE？

# servicestack - 在 ServiceStack 中设置非只读属性

> ID：15745931
> 
> 赞同：1
> 
> 时间：2013-04-01T15:06:28.170
> 
> 标签：servicestack

我试图在服务构造函数中设置一个公共属性，它在 Any() 方法中给出了空引用异常。如果我将其更改为只读字段，它工作正常。但是我想通过实例化服务来设置这个属性，任何人都可以提供如何实现这一点的见解。

```
public class CustomerService : Service
{
   private readonly IDbConnection _dbConnection;
  public ServiceCommand SelectCommand {get;set;}
  public CustomerService(IDBConnection dbConnection)
  {
         SelectCommand = new ServiceCommand();
         _dbConnection = dbConnection;            
  }

  public Customer Any()
  {
          //selectcommand is null here
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:49:14.210

我在[前面的问题中已经部分回答了这个问题](https://stackoverflow.com/a/15745940/85785)。

### 所有公共财产都由国际奥委会注入

SelectCommand 属性为 null 的原因是它是一个**公共属性**。您的所有服务公共属性都试图由您的注册依赖项解析，并且因为您没有任何类型的注册依赖项，`ServiceCommand`所以它被 null 覆盖。如果这是在你的构造函数中定义的，它会抛出一个运行时异常，因为它只是一个属性，它被**设置为 null**。

如果您将 SelectCommand 的可见性更改**为非公开的**，例如受保护的、私有的、内部的或静态的，则 IOC 不会尝试将其注入。

# javascript - 动态使用模板标签

> ID：15745933
> 
> 赞同：0
> 
> 时间：2013-04-01T15:06:42.090
> 
> 标签：javascript, django

是否可以使用 javascript 动态使用模板标签？

基本上，我想根据用户点击的内容将变量放入模板标签中。

我有 javascript 来检测他们点击的内容......但是因为 Django 在服务器上呈现模板标签，我不确定如何正确执行此操作或是否可能。

代码示例：

`{% avatar user %}`where`user`是一个变量，取决于用户点击的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:11:40.003

正如您所说，模板在服务器上呈现，而 javascript 代码在客户端上执行。所以简而言之，这是不可能的。

但是，您可以将一个页面拆分为多个模板，并在客户端使用 AJAX 构建完整的页面。然后，当用户单击您的按钮时，您可以使用所需的任何参数进行 AJAX 调用，并从服务器获取新呈现的模板以替换网页的现有部分。

# visual-studio - 如何使 Visual Studio 2012 中的 Intellisense 不直接替换光标处的文本？

> ID：15745934
> 
> 赞同：1
> 
> 时间：2013-04-01T15:06:42.717
> 
> 标签：visual-studio, visual-studio-2012, intellisense

在编程时，我经常意识到我需要在已经输入的代码之前添加一些东西。例如，我输入变量的名称：

```
input[0] 
```

然后我意识到我的数组是字符串类型，我需要转换它。所以，我移动到单词的开头（使用 Ctrl-左箭头）并开始输入

```
Convert.To|input[0] 
```

用管道显示我的光标的位置。我从 Intellisense 获得了一些建议，包括我正在寻找的 ToInt32() 方法。但只要我用 Tab 或 Space 确认这个建议，我就会得到以下信息：

```
Convert.ToInt32(|)[0] 
```

所以，从光标位置到词尾的文本被替换为建议，这绝对不是我想要的。

这个问题不是 VS 2012 特有的，可能是由于我安装了一些扩展，但我试图追查它的起源并没有产生任何结果。我安装了以下扩展：ReSharper、PowerCommands、Productivity Power Tools。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T15:34:43.170

如果您在标识符之前输入不相关的表达式，请在开始输入新表达式之前添加一个空格。这将防止完成替换现有标识符。

例如，如果`|`标记插入符号，则以下方案将避免您面临的问题。

```
Convert.To| input 
```

此代码完成功能旨在防止插入不正确的标识符。如果 Visual Studio 的行为与我所知道的其他一些 IDE 一样，则在原始示例中使用代码完成功能将导致插入`ToInt32input`，这将永远无效。

如果您对有关此功能的其他想法感兴趣，我在我的博客文章[代码完成过滤，选择中将其描述为](http://blog.280z28.org/archives/2011/12/105/)*扩展*（Visual Studio 的默认值）和*不扩展*（NetBeans、Eclipse 等的默认值）模式[和替换算法](http://blog.280z28.org/archives/2011/12/105/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-04T14:04:34.930

两年后的答案。但它可能对某些人仍然有用。

在 VS2015（也可能在 VS2012 中工作）对我有帮助的是将空格字符添加到 Intellisense 设置中的“成员列表提交字符”列表中。

在此之后，光标后的字符不会被自动完成删除。

# javascript - ADT - 可折叠队列

> ID：15745936
> 
> 赞同：0
> 
> 时间：2013-04-01T15:06:57.643
> 
> 标签：javascript

为 Ajax 请求实现队列管理器。我决定采用这种方法而不是使用 Promise，因为我可以通过检查私有变量队列来访问排队的状态。此外，所需的代码要小一些。

这是一个非常特殊的情况，其中所有 ajax 请求都是并行触发的，但我想保证它们响应的顺序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:08:35.860

我想我现在得到了你想要的。看看这个：

```
function AsyncQueue() {
    var results = {},
        queue = [];
    this.add = [].push.bind(queue); // add one token
    this.complete = function(token) {
        results[token] = arguments;
        while (queue[0] in results) {
             var t = queue.shift();
             this.resolve.apply(null, results[t]);
             delete results[t];
        }
    };
}
AsyncQueue.prototype.resolve = function() {
    console.log.apply(console, ["no resolver for"].concat([].slice.call(arguments)));
}; 
```

用法：

```
var manager = new AsyncQueue();
manager.resolve = function(token, res) {
    // do whatever you need to do here
    console.log(res);
};
manager.add(1, 2);
manager.complete(2, "second"); // logs nothing yet
manager.complete(1, "first"); // logs "first", then "second" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T15:32:35.873

**用例：**

发送 ajax 调用时，请执行以下操作：

```
add(token) 
```

在回调中接收 ajax 时，请执行以下操作：

```
complete(token, text); 
```

* * *

**管理队列**

```
// queue snapshot
// [0] token1 - waiting - null
// [1] token2 - blocked - text
// token contains info/meta about the response_text
// item 1 is blocked waiting on item 0 to complete

var Queue = (function (){
        var queue = [],
            publik = {},
            len = 0;
        publik.add = function(token) {
            var temp = {};
                temp.token = token;
                temp.waiting = true;
                temp.text = null;
            len = queue.push(temp);
        };
        publik.complete = function(token, text) {
            var kindex,
                length;

            // should never come here
            // complete is always called after add
            if(len === 0) {
                return;
            }

            // simplest case, nothing is blocked
            if(len === 1) {
                return true;
            }

            // queued items waiting
            if(len > 1) {
                return true;
            }

            for(kindex = 0, length = queue.length; kindex < length; kindex++) {
                if(queue[kindex].waiting === true) {
                    // resolve the ones waiting.
                }
            }

            // queue the text

            // resolve previous

            // 
        };
        return pulbik;
    }()); 
```

# entity-framework - EntityFramework 使用导航属性填充计算属性

> ID：15745937
> 
> 赞同：0
> 
> 时间：2013-04-01T15:07:01.270
> 
> 标签：entity-framework, ef-code-first, asp.net-web-api

基本上我想要做的是返回一个只读字符串（用户名），它取决于导航属性 User 并且只是将名字和姓氏连接在一起。

理想情况下，我只需为 OwnerUserId 分配一个值，然后在可能的情况下使用导航属性检索数据？我想保持模型类尽可能干净。

有任何想法吗？

**POCO 模型**

```
namespace Model
{
public class TicketReply
    {

    public int TicketReplyId { get; set; }
    public string Title { get; set; }
    /* ....more.... */

    /* User ID FK */
    public int OwnerUserId { get; set; }
    /* User Navigation property */
    [ForeignKey("OwnerUserId")]
    [IgnoreDataMember]
    public User User { get; set; }

    /* Here is where I am stuck.... */
    public string UserName
    {
        get { return User.FirstName + " " + User.LastName; }
        set { }
    }

    }
} 
```

* ***DB 初始化程序**** - 只是为了提供一些上下文

```
private List<TicketReply> AddReplies(DbContext context)
{
        var replies = new List<TicketReply>
        {
            new TicketReply { TicketReplyId = 1, TicketId = 1, CreatedAt = DateTime.Now, OwnerUserId = 1, Text = "My initial query"},
            new TicketReply { TicketReplyId = 2, TicketId = 1, CreatedAt = DateTime.Now, OwnerUserId = 2, Text = "Test reply."},
            new TicketReply { TicketReplyId = 3, TicketId = 2, CreatedAt = DateTime.Now, OwnerUserId = 1, Text = "Test query"} 
        };
        replies.ForEach(status => context.TicketReplies.Add(status));
        context.SaveChanges();
        return replies;
} 
```

谢谢亚瑟

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:26:22.837

大致（并从记忆中输入）
使其成为 的一部分`User`，例如..

```
public class User
{
    [NotMapped] // or from code  "modelBuilder.Entity<User>().Ignore(x => x.UserName);"
    public string UserName
    // your user name implementation
} 
```

> 您不能只分配 OwnerUserId 并期望它起作用 - 加载 Ticket 时将加载用户。此外，您不要在 fk-entity 中使用“OwnerUserId”来搜索用户。

您可以使用它来“设置”用户“它指向” - 它在您第一次执行“SaveChanges”时被保存。

例如..

```
var user = new User {First = ... Second=...};
db.Tickets.Add(new Ticket{ User = user, ...});
// or...
db.Tickets.Add(new Ticket{ OwnerUserId = ownerid, ...}); // to point to exisitng one you know exists         
db.SaveChanges();
...sometime later on...
var ticket = new Ticket { OwnerUserId = ownerid };
// ticket.User is null - won't work
var ticket = // tickets query // db.Tickets.Where(x => x.TicketId == ticketid).FirstOrDefault();
var username = ticket.User.UserName; // now it works, you have your User loaded 
```

或者明确...

```
var user = db.Users.Where(x => x.UserId == ownerid).FirstOrDefault();
var username = user.UserName; 
```

# payment-gateway - 获取 Dwolla 的反射器/测试帐户 (Dwolla API) 的 oAuth 令牌？

> ID：15745944
> 
> 赞同：0
> 
> 时间：2013-04-01T15:07:32.690
> 
> 标签：payment-gateway, payment, dwolla

您可以获得 Dwolla 的“Reflector”/测试帐户的 oAuth 令牌吗？

从文档中不清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:32:18.747

不——Reflector 的帐户的唯一目的是反映发送给它的任何资金。为该帐户提供 OAuth 令牌将危及其暂时持有的资金的安全性。

# java - 数组无缘无故被覆盖

> ID：15745947
> 
> 赞同：1
> 
> 时间：2013-04-01T15:07:41.920
> 
> 标签：java, android

# 问题

* * *

我编写了一个循环，在其中我用 Sum 对象填充了一个数组。一切正常，但是一旦循环进入下一次迭代，它就会覆盖数组的第一个索引。

# 我试过什么

* * *

我试图看看我的问题是否存在于另一段代码中（例如我的 Sum 类）。但是找不到任何会干扰循环的东西。
我试图找到具有相同名称的其他变量（即使在其他方法中，因为我很绝望），看看我是否可能在其他地方更改了我的迭代器。我找不到与此相关的任何内容。
我尝试在互联网上四处寻找，以便找到与意外覆盖数组有关的东西，但也找不到任何东西。

# 代码

* * *

```
public Task(Object[] parameters)
{
    this.number_of_sums = Integer.parseInt((String)parameters[0]);
    this.variables_per_sum = Integer.parseInt((String)parameters[1]);
    this.sum_parameters = new Object[this.variables_per_sum];
    this.sums = new Sum[this.number_of_sums];
    int z = 0;

    for(int i = 0; i < this.number_of_sums; i++)
    {
        int x = 0;
        for(int j = (2 + z); j < ((this.variables_per_sum + 2) + z); j++)
        {
            this.sum_parameters[x] = parameters[j];
            x++;
        }

        this.sums[i] = new Sum(this.sum_parameters);

        System.out.println("Index 0: "+sums[0]); //1st iteration: 1 + 1 //2nd iteration: 2 - 1
        System.out.println("Index 1: "+sums[1]); //1st iteration: null //2nd iteration: 2 - 1

        z += this.variables_per_sum;
    }
} 
```

# 期望

* * *

我期待 1 + 1 和 2 - 1 的输出。但是，当我完成时，我得到以下结果：2 - 1 和 2 - 1。

如果有人发现我做错了什么，或者想在我身边看到更多信息或代码，请说出来。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T15:24:13.840

我将假设`Sum`该类不存储其总和，而是在需要时从构造它的数组中计算它。

看起来所有`Sum`对象都将共享同一个数组——每次构造一个`Sum`. 此外，每次循环时`j`都会覆盖该数组的内容。

所以当一切都完成后，所有的总和都是一样的。

你应该能够通过给每个`Sum`不同的来解决这个问题`sum_parameters`：

```
public Task(Object[] parameters)
{
    this.number_of_sums = Integer.parseInt((String)parameters[0]);
    this.variables_per_sum = Integer.parseInt((String)parameters[1]);
    this.sums = new Sum[this.number_of_sums];
    int z = 0;

    for(int i = 0; i < this.number_of_sums; i++)
    {
        Object[] sum_parameters = new Object[this.variables_per_sum];
        int x = 0;
        for(int j = (2 + z); j < ((this.variables_per_sum + 2) + z); j++)
        {
            sum_parameters[x] = parameters[j];
            x++;
        }

        this.sums[i] = new Sum(sum_parameters);

        System.out.println("Index 0: "+sums[0]); //1st iteration: 1 + 1 //2nd iteration: 2 - 1
        System.out.println("Index 1: "+sums[1]); //1st iteration: null //2nd iteration: 2 - 1

        z += this.variables_per_sum;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T15:20:03.893

您的每个`Sum`对象都`this.sum_parameters`作为参数构造：

```
this.sums[i] = new Sum(this.sum_parameters); 
```

当`sum_parameters`在外部循环的每次迭代中被修改时，它会在围绕*对它的引用*构造的对象中发生内部变化。

`sum_parameters`您应该在每个`Sum`对象中制作一份内部副本。

# sharepoint - 向 Sharepoint 组织浏览器 Web 部件添加字段

> ID：15745948
> 
> 赞同：0
> 
> 时间：2013-04-01T15:07:44.367
> 
> 标签：sharepoint, web-parts, organizational-chart

Sharepoint 2010 中提供了一个 Web 部件，可让您查看与 AD 管理器字段相关的用户的组织结构图。OOB 它显示他们的姓名、职位和“关于我”字段的内容。我被要求显示更多的用户资料字段，特别是电话号码。有什么办法可以实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-07T21:15:03.880

我不确定这是否可能。您可以使用可以显示电话号码的第三方替代方案。例如[Plumsail 组织结构图](http://plumsail.com/sharepoint-orgchart/)或[1OrgChart](http://www.sharepointreviews.com/sharepoint-reviews-articles/sharepoint-webparts/799-content-and-code-1orgchart)

# python - 如何将字符串中的所有数字映射到 Python 中的列表？

> ID：15745949
> 
> 赞同：1
> 
> 时间：2013-04-01T15:07:44.323
> 
> 标签：python, string

说我有一个字符串

```
"There are LJFK$(#@$34)(,0,ksdjf apples in the (4,5)" 
```

我希望能够将数字动态提取到列表中：`[34, 0, 4, 5]`.
有没有一种简单的方法可以在 Python 中做到这一点？

换句话说，
有没有办法提取由任何分隔符分隔的连续数字簇？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T15:09:25.483

当然，使用[正则表达式](http://docs.python.org/3/library/re.html#re.findall)：

```
>>> s = "There are LJFK$(#@$34)(,0,ksdjf apples in the (4,5)"
>>> import re
>>> list(map(int, re.findall(r'[0-9]+', s)))
[34, 0, 4, 5] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T15:22:53.543

您也可以在没有正则表达式的情况下执行此操作，尽管它需要更多的工作：

```
>>> s = "There are LJFK$(#@$34)(,0,ksdjf apples in the (4,5)"
>>> #replace nondigit characters with a space
... s = "".join(x if x.isdigit() else " " for x in s)
>>> print s
                   34   0                      4 5
>>> #get the separate digit strings
... digitStrings = s.split()
>>> print digitStrings
['34', '0', '4', '5']
>>> #convert strings to numbers
... numbers = map(int, digitStrings)
>>> print numbers
[34, 0, 4, 5] 
```

# android - Andengine - 使用 TexturePacker Spritesheet 时内存使用量增加

> ID：15745953
> 
> 赞同：1
> 
> 时间：2013-04-01T15:08:17.070
> 
> 标签：android, andengine, game-engine, texturepacker

我正在使用andengine为Android平台开发游戏。我曾经定期检查应用程序的内存使用情况。

这是使用精灵表之前的内存使用情况 ![在此处输入图像描述](https://i.stack.imgur.com/MSxnZ.png)

后来我知道了 SpriteSheet 和 Andengine 的 TexturePackerExtension

我试图在我的应用程序中使用它。我创建了一个精灵表，其中包含整个游戏所需的所有图像。

当我加载它时，我的堆比前一个增加了。

![在此处输入图像描述](https://i.stack.imgur.com/yWTTs.png)

我假设使用 SpriteSheet 后堆会减少。
什么地方出了错？
我应该怎么做才能使用 SPriteSheet 和 TexturePackers 来管理内存。

使用的软件：

1.  [CodeANdWeb.com](http://www.codeandweb.com/texturepacker/)的 TexturePacker
2.  AndEngine GLES2
3.  和engine-TexturePacker 扩展。

* * *

**[编辑] [已解决]**

总堆似乎不是一个更大的问题。我终于设法控制了总堆内存。

我简单地为实际游戏资源创建了 2 个 spritesheets，1 个用于菜单资源。我只加载当前需要的精灵表。在加载另一个 spritesheet 之前，我曾经卸载以前的 spritesheet 等等..

我希望这是一个正确的方法。

创建 2 个 spritesheets 后，我的堆内存永远不会超过 18 mb：D

![在此处输入图像描述](https://i.stack.imgur.com/x8eRT.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:15:39.180

您的总堆容量（可能）暂时较大，因为 spritesheet 是一大块数据，在发送到 OpenGL 纹理之前必须在很短的时间内将其解码到堆内存中。您分配的堆几乎相同！所以这里没有泄漏或任何东西！

OpenGL 纹理不计入您的 Java 堆。

# javascript - 如何在 HTML5 中同步播放视频？

> ID：15745962
> 
> 赞同：1
> 
> 时间：2013-04-01T15:08:53.690
> 
> 标签：javascript, html

我有 5-8 个视频，每个视频最多 1-2 分钟。

所有视频都将相同，持续时间相同。唯一的区别是对它们中的每一个应用不同的过滤器。

如何确保所有视频同时运行，这样用户就看不到差异？

在我展示之前应该让所有视频都被缓冲吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:16:28.380

取决于它必须有多准确以及用户应该能够做什么，我认为它要么简单，要么非常困难：) [Html5rocks](http://www.html5rocks.com/en/tutorials/video/basics/)在视频标签上有一些不错的材料。下面的代码片段在两个不同的视频标签中使用相同的源视频，并在它们都准备好播放时播放它们：

```
<html>
<body>
<video controls id="vid1" preload="metadata"> <!-- https://bugzilla.mozilla.org/show_bug.cgi?id=676422 -->
    <source src="http://html5demos.com/assets/dizzy.mp4" type="video/mp4" />
    <source src="http://html5demos.com/assets/dizzy.webm" type="video/webm" />
    <source src="http://html5demos.com/assets/dizzy.ogv" type="video/ogg" />
  </video>
<video controls id="vid2"  preload="metadata"> <!-- https://bugzilla.mozilla.org/show_bug.cgi?id=676422 -->
    <source src="http://html5demos.com/assets/dizzy.mp4" type="video/mp4" />
    <source src="http://html5demos.com/assets/dizzy.webm" type="video/webm" />
    <source src="http://html5demos.com/assets/dizzy.ogv" type='video/ogg' />
  </video>

<script>

var vid1 = document.getElementById("vid1");
var vid2 = document.getElementById("vid2");
var count = 0;
var playthem = function(e) {
    count++;
    if(count > 1) {
    alert('playing');
        vid1.play();
        vid2.play();        
    }
}

vid1.addEventListener('canplay', playthem, false);
vid2.addEventListener('canplay', playthem, false);
</script>
</body>
</html> 
```

这在我的机器上运行良好，但我不确定在旧硬件上会如何。如果您需要完美同步视频，另一种方法是使用 video+svg。下面的代码使用单个视频标签和 svg 过滤器来“复制”该视频标签。这种方法的好处是确保您只加载一个视频，并且通过 javascript 控制它会更简单（因为只有一个视频源）。

```
<div style="filter:url(#f2)">
<video style="filter:url(#f1)" controls id="vid1" preload="metadata"> <!-- https://bugzilla.mozilla.org/show_bug.cgi?id=676422 -->
    <source src="http://html5demos.com/assets/dizzy.mp4" type="video/mp4" />
    <source src="http://html5demos.com/assets/dizzy.webm" type="video/webm" />
    <source src="http://html5demos.com/assets/dizzy.ogv" type="video/ogg" />
</video>
</div>
<svg id='image' version="1.1" xmlns="http://www.w3.org/2000/svg"> 
  <defs>
    <filter id="f1" height="200%" width="140%" transform="translate(90,0)">
    <feOffset dx="0" dy="360" result="B"/>
    <feMerge>
    <feMergeNode in="B"/>
    <feMergeNode in="SourceGraphic"/>
    </feMerge>
    </filter>
    <filter id="f2">
    <feOffset dx="480" dy="0" result="B"/>
    <feMerge>
    <feMergeNode in="B"/>
    <feMergeNode in="SourceGraphic"/>
    </feMerge>
    </filter>
  </defs>

</svg> 
```

# java - 在多个 JVM 上维护单个实例

> ID：15745966
> 
> 赞同：0
> 
> 时间：2013-04-01T15:09:18.237
> 
> 标签：java, synchronization, jvm, cluster-computing, distributed

我正在创建一个分布式服务，并且正在考虑在任何给定时间将一组耗时的操作限制为跨所有 JVM 的单个执行线程。（我将不得不处理最多 3 个 JVM）。

我最初的调查指向 java.util.concurrent.Executors 和 java.util.concurrent.Semaphore。使用单例模式和 Executors 或 Semaphore 并不能保证我可以跨多个 JVM 执行单个线程。

我正在寻找可以用来完成任务的 java 核心 API（或至少是 Pattern）。

PS：我可以在我现有的项目中访问 ActiveMQ，我打算使用它来实现跨多个 JVM 机器的单线程执行，只有在我没有其他选择的情况下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T16:55:29.590

使用核心 java API 没有简单的解决方案。如果 3 个 JVM 可以访问共享文件系统，您可以使用它来跟踪 JVM 之间的状态。

所以基本上你会在开始昂贵的操作时创建一个锁定文件并在结束时将其删除。然后让每个 JVM 在开始操作之前检查这个锁文件是否存在。但是，这种方法存在一些问题，例如如果 JVM 在昂贵的操作中死机并且文件没有被删除，该怎么办。

[ZooKeeper](http://zookeeper.apache.org)是解决此类问题和任何其他跨进程同步问题的好方法。看看这是否适合您。我认为这是一种比 JMS 队列更自然的解决问题的方法。

# php - 从 .post 检索数据

> ID：15745968
> 
> 赞同：2
> 
> 时间：2013-04-01T15:09:24.240
> 
> 标签：php, javascript, jquery, codeigniter, .post

我正在使用 codeigniter，我在使用 jQuery**`$.post`**函数处理数据时遇到了问题。**`subjectid`**我想发送一个值，例如**ajax_get_subject_credit**函数并检索同一个数据库表中的另一个字段。结果显示在另一个文本字段中。这是我的代码。

**看法：**

```
$.post('<?php echo site_url('academic/ajax_get_subject_credit'); ?>', {'subjectid':subjectid}, function(data){

        $('#chours' + id).val(data); }); 
```

这从下拉列表中获取一个值，我想从下拉列表中自动填充一个文本字段。`#chours`是文本字段 ID。

**控制器：**

```
function ajax_get_subject_credit($result)
{
    $this->db->select('subjectid, subjectcredit');
    $query = $this->db->get('ref_subject');
    $result = $query->result_array();
    $query->free_result();
    $subjectid = array();
    foreach($result as $row)
    {
        $result = $result + array($row['subjectid'] => $row['subjectcredit']);
    }
    return $result;
} 
```

**在控制器中修改**

我还尝试在控制器中使用此语句直接调用该字段但仍然没有成功：

```
function ajax_get_subject_credit($subjectid)
{
    $this->db->select('subjectid, subjectcredit');
    $this->db->where('subjectid',$subjectid);
    $query = $this->db->get('ref_subject');
    $credithour = $query->row()->subjectcredit;
    $query->free_result();
    echo $credithour;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T16:41:52.920

我将在这里提供一个通用示例

在视图文件中

```
$.post('<?php echo site_url("test/test"); ?>', {'id':1}, function(response){

   if(response.success)
   {
     alert(response.message);
   } else
   {
     alert('Something went wrong!!');
   }
}, 'json'); 
```

在控制器 Test.php

```
function test()
{
  $id = $this->input->post('id');

  //do additional stuff

  $result = 'i am coming right out of controller!! ';

  echo json_encode(array('success' => true, 'message' => $result));
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T15:11:29.793

不要使用**return**将值返回给 AJAX。采用`echo`

改变这个，

```
return $result; 
```

到

```
echo $result; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T15:31:08.963

如果您希望您的方法返回 javascript 可用于填充下拉列表的数组，您可能不想返回字符串。

尝试这样的事情：

```
function ajax_get_subject_credit()
{
    $query = $this->db->select('subjectid, subjectcredit')->get('ref_subject');

    $result = $query->result();

    $out = array();
    foreach($result as $row) {
        $out[$row->subjectid] = $row->subject_credit;
    }

    header('Content-Type: application/json');
    echo json_encode($out);

} 
```

这将向您的视图返回一个 JSON 数组，您的 javascript 方法可以使用它来使用值和标签填充下拉列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T07:41:51.943

这是我的结果：

**在视图中：**

```
function subjectid_change(id, subjectid){
    //Set value
    setValue(id, subjectid);

    $.post('<?php echo site_url('academic/ajax_get_subject_credit'); ?>', {'subjectid':subjectid}, function(response){

        if(response.success)
        {
          $('#chours' + id).val(response.value);
        } else
        {
          alert('Something went wrong!!');
        }
    }, 'json'); } 
```

**我的控制器：**

```
function ajax_get_subject_credit()
{
    //Get Post Value
    $subjectid = $this->input->post('subjectid');
    //Select subjectid,subjectcredit FROM
    $this->db->select('subjectid, subjectcredit');
    //Where subjectid = 'subjectid'
    $this->db->where('subjectid',$subjectid);
    //Database name
    $query = $this->db->get('ref_subject');

    $credithour = $query->row()->subjectcredit;
    $query->free_result();
    $result = $credithour;

    echo json_encode(array('success' => true, 'value' => $result));
} 
```

感谢所有帮助过我的人。

# ruby-on-rails - Spree 现有身份验证集成安装

> ID：15745969
> 
> 赞同：0
> 
> 时间：2013-04-01T15:09:25.053
> 
> 标签：ruby-on-rails, e-commerce, spree

我目前正在探索将 Spree Commerce 引擎集成到现有的 rails 应用程序中。标准安装没有问题，但尝试使用现有设计用户模型失败并出现此错误。也许这种方法是错误的。我有一个带有 bootstrap/devise/cancun 等的应用程序。我想使用现有的应用程序和用户模型将 spree 挂载为 /store。一切都保持不变，但 /store 都是 Spree

```
Would you like to install the default gateways? (Recommended) (yes/no) [yes] yes
Would you like to install the default authentication system? (yes/no) [yes] no
What is the name of the class representing users within your application? [User] User
Would you like to run the migrations? (yes/no) [yes] yes
Would you like to load the seed data? (yes/no) [yes] yes
Would you like to load the sample data? (yes/no) [yes] yes
 gemfile  spree
 gemfile  spree_gateway
     run  bundle install from "."
Gemfile syntax error:
...platforms => [:mri_19, :rbx]gem 'spree', '1.3.2'
...   

The Gem file is giving an error for this insert by the install routine
gem "binding_of_caller", ">= 0.7.1", :group => :development, :platforms => [:mri_19, :rbx]gem 'spree', '1.3.2'                            ^ 
```

任何有关方法或此错误的想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:43:33.120

我刚刚注意到 spree install 在同一行插入了 spree 的 gem。更正了这一点并运行了捆绑程序。

遇到了 cancan 的依赖错误。Spree 想要 1.6.8，所以我恢复到那个版本。

再次运行安装并正确安装。

# symfony - Symfony 2：如何在 Symfony2 的一列中制作名字和姓氏？

> ID：15745975
> 
> 赞同：-3
> 
> 时间：2013-04-01T15:09:48.440
> 
> 标签：symfony

现在我们有了名字和姓氏字段，如何在 Symfony2 的一列中制作名字和姓氏？

例如：

```
label = fullname
input box = firstname input box + lastname input box
error message =  fullname error message, this is based on firstname and lastname 
```

喜欢数据时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:17:05.917

阅读有关表单主题的文档： [http://symfony.com/doc/2.0/cookbook/form/form_customization.html](http://symfony.com/doc/2.0/cookbook/form/form_customization.html)

# html - 带锯齿的 CFF 字体

> ID：15745985
> 
> 赞同：3
> 
> 时间：2013-04-01T15:10:40.240
> 
> 标签：html, css, font-face, truetype

我在我的页面上使用了 CFF 字体，但它在浏览器中显示为锯齿状。

在这里你可以看到我是如何使用它的：[JSfiddle](http://jsfiddle.net/aKGam/)

**HTML**

```
<p>Hello everyb@dy!</p> 
```

**CSS**

```
body{
    font-size: 10px;
}

@font-face {
    font-family: Planer_ExtraLight;
    src: url('http://www.digitalpersone.com.br/projetos/fonts/planer_extralight.svg#Planer_ExtraLight') format('svg'),
        url('http://www.digitalpersone.com.br/projetos/fonts/Planer_ExtraLight.otf'),
        url('http://www.digitalpersone.com.br/projetos/fonts/Planer_ExtraLight.eot');   
}

p{
    font-family: Planer_ExtraLight;
    font-size: 4em;
} 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T15:17:54.760

这应该工作：http: [//jsfiddle.net/Allendar/aKGam/1/](http://jsfiddle.net/Allendar/aKGam/1/)

```
p {
    font-family: Planer_ExtraLight;
    font-size: 4em;
    font-smooth: subpixel-antialiased;
    -webkit-font-smoothing: subpixel-antialiased;
} 
```

***结果***

![在此处输入图像描述](https://i.stack.imgur.com/X9f9t.png)

**更新**

检查[MDN](https://developer.mozilla.org/en-US/docs/CSS/font-smooth)。它似乎不适用于大多数浏览器。您可能会尝试查看`-webkit-font-smoothing`其他浏览器中的类似功能以添加到您的样式中。

我在 Safari 中看到的质量提升是巨大的！

**更新 2**

我发现这可能适用于 Firefox；

```
browser.display.auto_quality_min_font_size = 0; // default = 20 
```

.. 低意味着更好的质量和更慢的渲染，反之亦然。

**更新 3**

这也很有趣（[https://developer.mozilla.org/en-US/docs/CSS/text-rendering](https://developer.mozilla.org/en-US/docs/CSS/text-rendering)）；

```
text-rendering: geometricPrecision; 
```

# visual-studio-2010 - 在 Nuget 启用系统还原后，我在 System.Web.WebPages 上得到 FileNotFoundException

> ID：15745990
> 
> 赞同：0
> 
> 时间：2013-04-01T15:10:48.490
> 
> 标签：visual-studio-2010, nuget

我有一个使用 TFS 管理的 Web 应用程序。我已将应用程序发布到 QA 和 PROD 服务器，没有任何问题。

但是，我最近在尝试从 TFS 将项目加载到新机器上时遇到了问题，因为它缺少所有 NuGet 包。我在 2010 年上网并阅读了有关包还原功能的信息。我在项目中启用了该功能并签入了项目并解决了我的问题。

但是，现在，每当我发布到我的 QA 和 PROD 服务器时，网站都会加载，我可以点击简单的“索引”类型页面，但是每当我尝试加载编辑类型页面（上面有表单的页面）时，我都会收到错误消息：

```
System.IO.FileNotFoundException: Could no load file or assembly 'System.Web.WebPages, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' ... 
```

我的 Web.config 文件中似乎没有任何变化。

发生了什么？我需要做什么才能让我的网站恢复正常运行？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T21:03:42.883

感谢 Phil Haack，我找到[了这篇文章](http://haacked.com/archive/2011/05/25/bin-deploying-asp-net-mvc-3.aspx)，它解决了我的问题。基本上必须选中该框才能部署 MVC 程序集。

# jquery - .well 等高 div 无法正确清除

> ID：15745991
> 
> 赞同：0
> 
> 时间：2013-04-01T15:10:49.397
> 
> 标签：jquery, twitter-bootstrap, responsive-design

Bootstrap 的新手 - 所以请原谅我的无知。我对特定布局的响应能力有疑问。

这是全屏小提琴[http://jsfiddle.net/subdes/M48jH/5/embedded/result/](http://jsfiddle.net/subdes/M48jH/5/embedded/result/)

```
<div class="row-fluid">

     <div class="span9 black well">

        <div class="span4 grey  no-margin">
           <h1>A</h1>
            Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac    cursus commodo, tortor mauris c
           <p><a href="#" class="btn btn-primary btn-large">Learn more &raquo;</a></p>
        </div>

        <div class="span4 grey  no-margin">
           <h1>B</h1>
           Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac   curs    us commodo, tortor mauris   eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris         Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris   eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris
           <p><a href="#" class="btn btn-primary btn-large">Learn more &raquo;</a></p>
        </div>

        <div class="span4 grey  no-margin">
           <h1>C</h1>
           Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris
           <p><a href="#" class="btn btn-primary btn-large">Learn more &raquo;</a></p>
        </div>

        <div class="row-fluid">
           <div class="span12  green no-margin">
              <h1>D</h1>
           </div>
        </div>

    </div>

    <div class="span3 competition well black ">
      <h1>E</h1>
      <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
      <p><a class="btn" href="#">View details</a></p>
    </div>

</div> 
```

我已经在左侧 (span9) 和右侧 (span3) 跨度上实现了 jquery “well” 等高 div 修复。但是，当最小化时；虽然 span3 在 span9 下浮动 - span9 内的 div 的内容溢出 span9 并进入 span3 - 而不是被包含

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T23:38:58.880

我已经用`.span4`类将你的三个 div 包装在 div 中`.row-fluid`，现在工作正常。请参阅[有关脚手架（流体嵌套）的官方 Twitter Bootstrap 文档](http://twitter.github.com/bootstrap/scaffolding.html#global)。

这是代码：

```
<div class="container">

<!-- **************   CAROUSEL   ****************** -->
      <div class="row-fluid">
        <div class="span9 black well">
            <div class="row-fluid">
                <div class="span4 grey  no-margin  ">
                    <h1>A</h1>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris c
                    <p><a href="#" class="btn btn-primary btn-large">Learn more &raquo;</a></p>
                </div>
                <div class="span4 grey  no-margin  ">
                    <h1>B</h1>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris   eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris         Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris   eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris
                    <p><a href="#" class="btn btn-primary btn-large">Learn more &raquo;</a></p>
                </div>
                <div class="span4 grey  no-margin   ">
                    <h1>C</h1>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris
                    <p><a href="#" class="btn btn-primary btn-large">Learn more &raquo;</a></p>
                </div>
            </div>
            <div class="row-fluid">
                <div class="span12  green no-margin  "><h1>D</h1></div>
            </div>
        </div>

        <div class="span3 competition well black ">
          <h1>E</h1>
          <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
          <p><a class="btn" href="#">View details &raquo;</a></p>
       </div>

      </div>

    </div> 
```

我已将您的 jQuery 代码放在 jsfiddle 内的正确位置。另外，用`.load()`函数替换`.ready()`函数。现在检查它[ht​​tp://jsfiddle.net/M48jH/9/embedded/result/](http://jsfiddle.net/M48jH/9/embedded/result/)

注意：如果您只是调整浏览器窗口的大小，您将再次看到问题。如果在调整大小后刷新，问题就消失了。我可以用`.resize()`函数来解决这个问题。但无论如何，当您调整窗口大小时，您将拥有`.span3`与 div 高度相同的`.span9`div。

# zend-framework - 在 ZEND 中引用原始 sql 以避免 sql 注入

> ID：15745994
> 
> 赞同：0
> 
> 时间：2013-04-01T15:11:06.487
> 
> 标签：zend-framework, sql-injection

长话短说，我有一个管理部分，用户可以在其中从多个下拉列表中进行选择，列出必须查询的表和字段才能获取一些值。因此，ZEND 中的查询是通过连接字符串来执行的

```
$query = "SELECT $fieldName1, $fieldName2 from $tableName where $fieldName1 = $value"; 
```

如何使用 ZEND 方法逃避上述情况以避免 sql 注入？我尝试将它们全部添加为？并调用 quoteinto 但似乎这不适用于某些变量（如表名或字段名）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T09:18:31.300

采埃孚`quoteIdentifier()`专门为此目的：

```
$query = "SELECT ".$db->quoteIdentifier($fieldName1).","... 
```

在您的情况下，您可能（也）想要检查有效列名的白名单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T08:44:57.590

使用 quoteInto() 或 Zend_db_Select::where() 作为值，对于表名和列名，我会简单地去除所有非字母字符，然后将它们包装在**`**引号中，然后再在 SQL 中使用它们。

例子：

```
// Strip non alpha and quote
$fieldName1 = '`' .  preg_replace('/[^A-Za-z]/', '', $fieldName1) . '`';
$tableName = '`' . preg_replace('/[^A-Za-z]/', '', $tableName) . '`';
// ....

// Build the SQL using Zend Db Select
$db->select()->from($tableName, array($fieldName1, $fieldName2))
                ->where($fieldName1 . ' = ?', $value); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T09:32:38.877

在 SafeMysql 中，你可以让它变得简单，如

```
$sql  = "SELECT ?n, ?n from ?n where ?n = ?s";
$data = $db->getAll($sql,$fieldName1,$fieldName2, $tableName, $fieldName1, $value); 
```

尽管我知道您不会将 ZF 更改为 SafeMysql。

然而，有一件基本的事情应该手动完成：
我怀疑你想让用户浏览用户表或财务表或其他任何东西。因此，您必须根据允许的表数组验证传递的表名。

像

```
$allowed = ('test1','test2');
if (!in_array($tableName, $allowed)) {
    throw new _403();
} 
```

# python - 在测试仪中获取错误消息...5/8 正确

> ID：15745995
> 
> 赞同：0
> 
> 时间：2013-04-01T15:11:08.037
> 
> 标签：python, testing, filter, triggers, counter

我正在运行一个过滤故事并返回过滤故事数的函数。代码在下面 - 测试中的错误在下面。这些错误似乎只是错误地计算了过滤器故事的数量 - 简单的错误，但在尝试解决它时遇到了问题。过滤的故事数不匹配。请帮忙。

我的代码：

```
def filterStories(stories, triggerlist):

   newstories = []
   for story in stories:
       for trigger in triggerlist:
           if trigger.evaluate(story) == True:
               newstories.append(story)

       stories = newstories
   return stories

class WordTrigger(Trigger):
    def __init__(self,word):
        self.word = word.lower()

    def changeChars(self,text):
        final = ""
        for c in text:
            if c in string.punctuation:
                final += " "
            else:
                final += c
        return final

    def isWordIn(self,text):
        comp = self.changeChars(text)
        list = comp.lower().split(" ")
        return self.word in list

# TODO: TitleTrigger
class TitleTrigger(WordTrigger):
    def evaluate(self,story):
        return self.isWordIn(story.getTitle())

# TODO: SubjectTrigger
class SubjectTrigger(WordTrigger):
    def evaluate(self,story):
        return self.isWordIn(story.getSubject())

# TODO: SummaryTrigger
class SummaryTrigger(WordTrigger):
    def evaluate(self,story):
        return self.isWordIn(story.getSummary())

class PhraseTrigger(Trigger):
    def __init__(self,phrase):
        self.phrase = phrase

    def evaluate(self,story):
        return self.phrase in story.getTitle() or self.phrase in story.getSubject() or self.phrase in story.getSummary() 
```

-----------------来自测试的错误消息----------------------------- --------------------

```
Test: filterStories 3
Your output:
Trigger 1: TrueTrigger() - always returns True
Trigger 2: TrueTrigger() - always returns True
Story with title: "MIT and Russia Partner with Skolkovo Tech" and subject: "New school located near Moscow"
In filteredStories?  True
Story with title: "Russian dignitaries Visit USA" and subject: "Obama meets with Russian President Vladimir Putin"
In filteredStories?  True
Story with title: "Russia Overrun With Friendly Tigers" and subject: "Putin poses for photo op with cuddly felines"
In filteredStories?  True
Story with title: "Mitt Romney Defeated" and subject: "Obama edges win over Republican challenger Mitt Romney"
In filteredStories?  True
Number of filtered stories:  8
Story titles in the list of filtered stories your code generated:
['MIT and Russia Partner with Skolkovo Tech', 'MIT and Russia Partner with Skolkovo Tech', 'Mitt Romney Defeated', 'Mitt Romney Defeated', 'Russia Overrun With Friendly Tigers', 'Russia Overrun With Friendly Tigers', 'Russian dignitaries Visit USA', 'Russian dignitaries Visit USA']
Correct output:
Trigger 1: TrueTrigger() - always returns True
Trigger 2: TrueTrigger() - always returns True
Story with title: "MIT and Russia Partner with Skolkovo Tech" and subject: "New school located near Moscow"
In filteredStories?  True
Story with title: "Russian dignitaries Visit USA" and subject: "Obama meets with Russian President Vladimir Putin"
In filteredStories?  True
Story with title: "Russia Overrun With Friendly Tigers" and subject: "Putin poses for photo op with cuddly felines"
In filteredStories?  True
Story with title: "Mitt Romney Defeated" and subject: "Obama edges win over Republican challenger Mitt Romney"
In filteredStories?  True
Number of filtered stories:  4
Story titles in the list of filtered stories your code generated:
['MIT and Russia Partner with Skolkovo Tech', 'Mitt Romney Defeated', 'Russia Overrun With Friendly Tigers', 'Russian dignitaries Visit USA']
Test: filterStories 4
Your output:
Trigger 1: TitleTrigger("Russia")
Trigger 2: SubjectTrigger("Putin")
Trigger 3: TitleTrigger("MIT")
Story with title: "MIT and Russia Partner with Skolkovo Tech" and subject: "New school located near Moscow"
In filteredStories?  True
Story with title: "Russian dignitaries Visit USA" and subject: "Obama meets with Russian President Vladimir Putin"
In filteredStories?  True
Story with title: "Russia Overrun With Friendly Tigers" and subject: "Putin poses for photo op with cuddly felines"
In filteredStories?  True
Story with title: "Mitt Romney Defeated" and subject: "Obama edges win over Republican challenger Mitt Romney"
In filteredStories?  False
Number of filtered stories:  5
Story titles in the list of filtered stories your code generated:
['MIT and Russia Partner with Skolkovo Tech', 'MIT and Russia Partner with Skolkovo Tech', 'Russia Overrun With Friendly Tigers', 'Russia Overrun With Friendly Tigers', 'Russian dignitaries Visit USA']
Correct output:
Trigger 1: TitleTrigger("Russia")
Trigger 2: SubjectTrigger("Putin")
Trigger 3: TitleTrigger("MIT")
Story with title: "MIT and Russia Partner with Skolkovo Tech" and subject: "New school located near Moscow"
In filteredStories?  True
Story with title: "Russian dignitaries Visit USA" and subject: "Obama meets with Russian President Vladimir Putin"
In filteredStories?  True
Story with title: "Russia Overrun With Friendly Tigers" and subject: "Putin poses for photo op with cuddly felines"
In filteredStories?  True
Story with title: "Mitt Romney Defeated" and subject: "Obama edges win over Republican challenger Mitt Romney"
In filteredStories?  False
Number of filtered stories:  3
Story titles in the list of filtered stories your code generated:
['MIT and Russia Partner with Skolkovo Tech', 'Russia Overrun With Friendly Tigers', 'Russian dignitaries Visit USA'] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:43:07.493

只需在您的函数`filterstories`中添加以下测试，然后再将您的故事插入`filterlist`：

```
 for trigger in triggerlist:
       if trigger.evaluate(story) == True:
           if story not in newstories:
               newstories.append(story)

   stories = newstories 
```

应该管用。

实际上，您正在复制导致测试失败的条目。

# gdt - xv6-rev7 (JOS) GDT

> ID：15745996
> 
> 赞同：0
> 
> 时间：2013-04-01T15:11:10.953
> 
> 标签：gdt

我很难理解 JOS (xv6-rev7) 中的 GDT（全局描述符表）

例如

```
.word (((lim) >> 12) & 0xffff), ((base) & 0xffff); 
```

为什么要右移 12？为什么和 0xffff？
这些数字是什么意思？
公式是什么意思？

谁能给我一些资源或教程或提示？

在这里，这是我的问题的两部分代码片段。

## 第一部分

```
0654 #define SEG_NULLASM \
0655 .word 0, 0; \
0656 .byte 0, 0, 0, 0
0657
0658 // The 0xC0 means the limit is in 4096−byte units
0659 // and (for executable segments) 32−bit mode.
0660 #define SEG_ASM(type,base,lim) \
0661 .word (((lim) >> 12) & 0xffff), ((base) & 0xffff); \
0662 .byte (((base) >> 16) & 0xff), (0x90 | (type)), \
0663 (0xC0 | (((lim) >> 28) & 0xf)), (((base) >> 24) & 0xff)
0664
0665 #define STA_X 0x8 // Executable segment
0666 #define STA_E 0x4 // Expand down (non−executable segments)
0667 #define STA_C 0x4 // Conforming code segment (executable only)
0668 #define STA_W 0x2 // Writeable (non−executable segments)
0669 #define STA_R 0x2 // Readable (executable segments)
0670 #define STA_A 0x1 // Accessed 
```

## 第二部分

```
8480 # Bootstrap GDT
8481 .p2align 2 # force 4 byte alignment
8482 gdt:
8483 SEG_NULLASM # null seg
8484 SEG_ASM(STA_X|STA_R, 0x0, 0xffffffff) # code seg
8485 SEG_ASM(STA_W, 0x0, 0xffffffff) # data seg
8486
8487 gdtdesc:
8488 .word (gdtdesc − gdt − 1) # sizeof(gdt) − 1
8489 .long gdt # address gdt 
```

* * *

完整部分： http: [//pdos.csail.mit.edu/6.828/2012/xv6/xv6-rev7.pdf](http://pdos.csail.mit.edu/6.828/2012/xv6/xv6-rev7.pdf)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-14T15:50:35.203

好吧，这根本不是一个真正的公式。限制向右移动 12 位，相当于除以 2^12，什么是`4096`，这是 GDT 条目基数的粒度，当设置 G 位时（在您的代码中，G 位以您在宏中使用的常量编码） . 每当要使用 correnspondig 选择器访问地址时，仅将高 20 位与 limit 进行比较，如果它们更大，则抛出 #GP。另请注意，标准页面的大小为 4KB，因此任何大于限制小于 4 KB 的数字都由页面对应的选择器限制处理。着陆部分用于抑制关于数字溢出的编译器警告，因为操作数`0xFFFF`是单个字（16 位）的最大值。

同样适用于其他班次和 AND，在其他表达式中，数字可以移动更多以获得其他部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-21T13:45:23.477

![GDT 描述符](https://upload.wikimedia.org/wikipedia/commons/thumb/0/0a/SegmentDescriptor.svg/1160px-SegmentDescriptor.svg.png)

GDT 描述符的结构见上。

`((lim) >> 12) & 0xffff)`对应于段限制（位 0-15）。右移表示最小单位为 2^12 字节（GDT 入口基数的粒度）；`&& 0xffff`意味着我们需要 的低 16 位`lim) >> 12`，它适合 GDT 描述符的 16 位的最低部分。

“公式”的其余部分是相同的。

[这](http://www.osdever.net/bkerndev/Docs/gdt.htm)是学习 GTD 描述符的好材料。

# android - VirtualBox 上的 Android x86 与 Google 的 Intel x86 映像？

> ID：15745997
> 
> 赞同：3
> 
> 时间：2013-04-01T15:11:12.430
> 
> 标签：android, android-emulator

VirtualBox 上的 Android x86 是否比 Google 在自己的模拟器上运行的 Intel x86 映像更快？

它明显更快吗？与 Google 提供的模拟器相比，使用 VirtualBox 有什么优势吗？

编辑：我忘了提到我将使用这些进行 Android 开发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T17:16:43.453

我第二次看了一下[AndroVM](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDYQFjAA&url=http://androvm.org/&ei=TL9ZUamZMfbi4APcdA&usg=AFQjCNGCBm7saJNVzPGLZTIgwGF3tGLkaQ&sig2=SJPDQXwwgeEoa8tHTIisYQ&bvm=bv.44442042,d.dmg)（我发现它比 Android x86 更容易使用）

这是一个小比较。当我遇到更多信息时，我会尽量保持更新。

相似之处：

*   您可以通过 ADB 连接到两者（至少是 AndroVM，我不确定 Android x86）
*   Google Apps（Play 商店等）可以安装在任一设备上

VirtualBox 优势：

*   速度
*   AndroVM 有更多的键盘快捷键（主页、菜单按钮 [我认为是 F10] 等）
*   可以保存多个 VirtualBox 快照以返回给定状态

VirtualBox 的缺点：

*   不能与 Eclipse 一起使用，以便轻松开发

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T16:27:25.420

后来的谷歌模拟器使用英特尔硬件加速图像要好得多。

至于 VBox，你应该看看[AndroVM 博客](http://androvm.org/blog/)。它相当快。

# vba - 如果表格底部超过幻灯片底部，则 Powerpoint 和 VBA 新幻灯片

> ID：15745998
> 
> 赞同：0
> 
> 时间：2013-04-01T15:11:15.050
> 
> 标签：vba, powerpoint

所以过去几天我一直在努力解决这个问题，我有这个 powerpoint 2007 演示文稿，我使用 VBA 从访问文件中的一个按钮中填充了信息。

在第一张幻灯片中（而且只是现在）我有一个表格可以接收部分信息，但是如果表格超出幻灯片的底部，我不能让表格内容中断到另一张幻灯片，它就会消失的范围。

我有创建新幻灯片的方法，而且效果很好。但我似乎找不到一个可以让我开始的例子。

我想我应该检查一下表格底部是否超过幻灯片底部，如果它确实创建了一张新幻灯片，剪切重叠单元格并将它们粘贴到新幻灯片中？

提前致谢。

代码示例：

```
 ' Open PowerPoint
    Dim pptobj As PowerPoint.Application
    Dim Presentation As PowerPoint.Presentation
    Dim oSl as Slide

    Set pptobj = New PowerPoint.Application

    Set pptobj = CreateObject("Powerpoint.Application")
    pptobj.Activate
    Set Presentation = pptobj.Presentations.Open("C:\Users\some.pptx")
    pptobj.Visible = True
    pptobj.WindowState = ppWindowMaximized

    If ((Len(Forms!Some!Name> 0) Then
        pptobj.ActivePresentation.Slides(1).Shapes("TableNome").Table.Cell(1, 1).Shape.TextFrame.TextRange.Text = (CStr(Forms!Some!Name))
    End If

      Set oSl = pptobj.ActivePresentation.Slides(1)

    With oSl
        .Shapes("TableCategory").Table.Cell(1, 1).Shape.TextFrame.TextRange.Text = (CStr(Forms!CVLong!TxtCategory))
        .Shapes("TableEmail").Table.Cell(1, 2).Shape.TextFrame.TextRange.Text = (CStr(Forms!Some!TxtEmail))
        .Shapes("TableData").Table.Cell(1, 2).Shape.TextFrame.TextRange.Text = (CStr(Forms!Some!TxtTlf))
        .Shapes("TableData").Table.Cell(2, 2).Shape.TextFrame.TextRange.Text = (CStr(Forms!Some!TxtCell))
    End With

    Dim oSh as Shape
    Dim overhang        

    Set oSh = pptobj.ActivePresentation.Slides(1).Shapes.AddTable(1, 3, 50, 100, 493)

        'One
    If ((Len(Forms!Some!One)) > 0) Then
        pptobj.ActivePresentation.Slides(1).Shapes("TableInfo").Table.Cell(1, 3).Shape.TextFrame.TextRange.Text = (CStr(Forms!Some!One)) & vbNewLine & vbNewLine
        pptobj.ActivePresentation.Slides(1).Shapes("TableInfo").Table.Cell(1, 1).Shape.TextFrame.TextRange.Text = "One"
    End If

'Two

    If (Len(Forms!Some!Two> 0) Then
        pptobj.ActivePresentation.Slides(1).Shapes("TableInfo").Table.Cell(5, 3).Shape.TextFrame.TextRange.Text = (CStr(Forms!Some!Two)) & vbNewLine
        pptobj.ActivePresentation.Slides(1).Shapes("TableInfo").Table.Cell(5, 1).Shape.TextFrame.TextRange.Text = "Two"
     End If

'Three
    If (Len(Forms!Some!Three) > 0) Then
                pptobj.ActivePresentation.Slides(1).Shapes("TableInfo").Table.Cell(4, 3).Shape.TextFrame.TextRange.Text = (CStr(Forms!Some!Three)) & vbNewLine & vbNewLine
                pptobj.ActivePresentation.Slides(1).Shapes("TableInfo").Table.Cell(4, 1).Shape.TextFrame.TextRange.Text = "Three"
    End If

'Add Slide
    Dim Sld As Slide
    Dim x As Integer
    x = 1

     Set Sld = pptobj.ActivePresentation.Slides.Add(Index:=pptobj.ActivePresentation.Slides.Count + 1, Layout:=ppLayoutBlank)

    For Each Sld In pptobj.ActivePresentation.Slides

        If x >= 2 Then
            pptobj.ActivePresentation.Slides(1).Shapes("Text Placeholder 15").Copy
            pptobj.ActivePresentation.Slides(x).Shapes.Paste
            pptobj.ActivePresentation.Slides(x).Shapes("Text Placeholder 15").ZOrder msoSendToBack
            pptobj.ActivePresentation.Slides(x).Shapes("Text Placeholder 15").Height = 810
            pptobj.ActivePresentation.Slides(x).Shapes("Text Placeholder 15").Top = 19
        End If
    x = x + 1
    Next

End If

  'Put table top border
Dim n As Integer
Dim r As Integer
n = 3
r = 1

While r <= n
        If Len(pptobj.ActivePresentation.Slides(1).Shapes("TableInfo").Table.Cell(r, 3).Shape.TextFrame.TextRange.Text) > 0 Then
            pptobj.ActivePresentation.Slides(1).Shapes("TableInfo").Table.Cell(r, 3).Borders(ppBorderTop).Visible = msoTrue
            pptobj.ActivePresentation.Slides(1).Shapes("TableInfo").Table.Cell(r, 3).Borders(ppBorderTop).ForeColor.RGB = RGB(220, 105, 0)
        Else
            pptobj.ActivePresentation.Slides(1).Shapes("TableInfo").Table.Rows(r).Delete
            n = n - 1
            r = r - 1
        End If
        r = r + 1
Wend

'Add Photo
    pptobj.ActivePresentation.Slides(1).Shapes.AddPicture(FileName:="\\someplace\" & [Id] & ".jpg", linktofile:=mostrue, savewithdocument:=msoTrue, Left:=52, Top:=115).Select

    With pptobj.ActivePresentation.Slides(1).Shapes("Picture 7")
        .LockAspectRatio = msoTrue
        .Width = 85
        .Left = 38
        .Top = 80
    End With

'add footer
    Dim page As Integer
    page = 1
    Dim s As Slide

     For Each s In pptobj.ActivePresentation.Slides
         On Error Resume Next
         Set oSh = s.HeadersFooters.Footer
             If Err.Number <> 0 Then
                 Call s.Master.Shapes.AddPlaceholder(ppPlaceholderFooter, 219, 805, 342, 19)
             End If
        On Error GoTo 0
            s.HeadersFooters.Footer.Visible = msoTrue
            s.HeadersFooters.Footer.Text = (CStr(Forms!Some!Name)) & " - Page " & page & " of " & pptobj.ActivePresentation.Slides.Count
            page = page + 1
    Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:14:35.710

下面的代码片段可能会给你一些启发。现在它只是确定表太大并给你一条消息。如果没有有关数据类型以及如何获取数据的更多信息，就很难回答问题的第二部分。您很可能会创建一个表，一次添加一行并检查表的大小；当表格变得太大（或距底部一定距离内）时，您创建一张新幻灯片并继续该过程。这可能比创建一个太大的表，然后试图找出在哪里切割它要好。

这是代码：

```
Sub createTable()
Dim oSl As Slide
Dim oSh As Shape
Dim overhang

Set oSl = ActivePresentation.Slides(1)
Set oSh = oSl.Shapes.AddTable(28, 3)

overhang = ActivePresentation.PageSetup.SlideHeight - (oSh.Height + oSh.Top)

If overhang > 0 Then
  MsgBox "the table fits"
Else
  MsgBox "the table is too big!"
End If

End Sub 
```