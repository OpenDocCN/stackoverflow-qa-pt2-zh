# StackOverflow 问答 15497000-15497999

# c++ - C++ 模板选择

> ID：15497004
> 
> 赞同：12
> 
> 时间：2013-03-19T10:31:30.710
> 
> 标签：c++, templates, c++11

给定以下代码：

```
#include <memory>
#include <iostream>

using namespace std;

template<typename T>
void test(T & value) {
  cout << "most generic" << endl;
}

template<typename T>
void test(shared_ptr<T> & value) {
  cout << "shared_ptr" << endl;
}

class A {};

int main(int argc, char ** argv) {
  A a;
  shared_ptr<A> p(new A());
  test(a);
  test(p);
  return 0;
} 
```

为什么打电话

```
test(p) 
```

用 T = A 实例化第二种形式的测试，而不是抱怨它无法区分两个签名？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-19T10:32:39.543

因为即使它们都是重载解析的可行选择，第二个函数模板比​​第一个*更专业。*

根据 C++11 标准的第 13.3.3/1 段：

> [...] 鉴于这些定义，如果对于所有参数 i，ICSi(F1) 不是比 ICSi(F2) 更差的转换序列，则可行函数 F1 被定义为比另一个可行函数 F2**更好**的函数，然后
> 
> — 对于某些参数 j，ICSj(F1) 是比 ICSj(F2) 更好的转换序列，或者，如果不是，
> 
> — 上下文是通过用户定义的转换（见 8.5、13.3.1.5 和 13.3.1.6）和从 F1 的返回类型到目标类型（即被初始化的实体的类型）的标准转换序列进行的初始化是比从 F2 的返回类型到目标类型的标准转换序列更好的转换序列。[...] 或者，如果不是这样，
> 
> — F1 是非模板函数，F2 是函数模板特化，或者，如果不是，
> 
> — F1 和 F2 是函数模板特化，根据 14.5.6.2 中描述的偏序规则**，F1 的函数模板比​​ F2 的模板更特化。**

§ 14.5.6.2 然后说明如何确定一个函数模板比​​另一个函数模板更专业。特别是，根据 14.5.6.2/2：

> 部分排序通过依次转换每个模板（参见下一段）并使用函数类型执行模板参数推导来选择两个函数模板中的哪一个比另一个更专业。推演过程确定模板中的一个是否比另一个更专业。如果是这样，更专业的模板是部分排序过程选择的模板。

标准中的正式定义可能很难解读，但它们的复杂性通常意味着**明确地使语言表现得像我们**在*大多数*情况下自然期望的那样。

我们对您提供的重载的直观期望是，`std::shared_ptr<T>`当参数是类型时，应该选择接受 a 的重载`std::shared_ptr<int>`，因为它似乎`std::shared_ptr<>`专门处理对象，因此它看起来是一个更好（*更专业*）的候选者。比不受约束的过载。

将这种直观的期望转化为一组明确的规则的正式程序可能听起来很复杂，但在我们的情况下遵循它并不是特别困难，我们想确定这种过载是否：

```
template<typename T>
void f(std::shared_ptr<T>); 
```

比这更专业：

```
template<typename U>
void f(U); 
```

尽管在这种情况下，我们很容易根据我们的直觉来判断哪个更专业，但编译器必须依赖于*算法*，并且该算法必须在所有情况下都有效。

在这种情况下，机制将如下所示：

1.  取第*一个*重载，将其模板参数替换`T`为类型参数（*任何*类型参数），例如`int`，并实例化相应的签名 - 函数参数将具有 type `std::shared_ptr<int>`;
2.  是否总是可以通过提供该类型的对象（在这种情况下）作为其输入来调用*第二个*`shared_ptr<int>`重载，并从中推断出类型`U`？
3.  嗯，答案是**肯定**的。`U`将被推断为`std::shared_ptr<int>`;
4.  现在反过来：采用*第二个*重载，将其模板参数替换`U`为任何类型参数，例如`bool`，并实例化相应的签名 - 函数参数将具有 type `bool`;
5.  是否总是可以通过提供该类型的对象 ( ) 作为其参数来调用第一个重载*并*`bool`从中推断出类型`T`？
6.  当然，这里的答案是**否定**的。没有办法推断`T`出`std::shared_ptr<T>`匹配`bool`；
7.  结论：**第一个重载比第二个更专业**。

Of course, things get slightly more complicated when there is more than one template parameter and more than one function parameter, but the mechanism is pretty much the same.

# soa - NServiceBus，什么时候使用了太多消息？

> ID：15497008
> 
> 赞同：0
> 
> 时间：2013-03-19T10:31:48.573
> 
> 标签：soa, nservicebus

在考虑 NServiceBus 中的服务时，您会在什么时候开始质疑服务处理的消息数量过多，并开始将这些消息分解为新服务？

考虑以下内容：我有一个销售服务，目前可以分解为几个不同的业务组件，它们是销售订单验证、销售订单处理、采购订单验证和采购订单处理。

目前该服务中使用了大约 20 个消息处理程序和 2 个 saga。我担心的是，在来自我的网站的大量流量期间，这可能会导致消息的初始峰值跃升至数百条。考虑到消息需要按照从队列中取出的顺序进行处理，这可能会导致队列中最后一个消息的延迟（取决于每条消息的处理方式）。

当将服务中的关注点分成更小的业务组件时，我发现这让事情变得更容易一些。当然，这是一种逻辑上的分离，但它似乎提供了一层清晰和理解。对我来说，这样做似乎比创建新服务更容易，因为最终我拥有的服务越多，我需要做的维护就越多。

有没有人对此有类似的担忧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:52:11.753

我想你实际上已经回答了你自己的问题:)

一旦消息量达到延迟成为问题的程度，您就可以考虑实例化您的端点。您不一定需要减少处理程序的数量。您可以简单地多次安装该服务，并通过映射将特定的消息类型发送到相关端点。

所以它变成了一个简单的实例安装和一些配置更改的问题。因此，您可以在发送时拆分消息，以便来自特定源的消息最终到达特定端点（可能是优先级）*或*消息类型。

我碰巧在以前的项目中做了同样的事情（虽然没有使用 NServiecBus），我们需要尽快处理来自 UI 的文档转换消息。我们只需使用自己的队列集再次安装转换服务，并更改 UI 配置以将转换消息发送到新端点。后台转换消息仍会发送到前一个端点。所以这里来源决定了分离。

# html - 如何删除 Tumblr 的默认网站图标

> ID：15497010
> 
> 赞同：0
> 
> 时间：2013-03-19T10:31:50.807
> 
> 标签：html, tumblr, favicon

在我的自定义主题中，我刚刚删除了这一行：

```
<link rel="icon" href="{Favicon}"/> 
```

但是 tumblr 的默认网站图标不断出现。我认为这是因为它存储在`image/favicon.ico`路径中，但我无法删除它。有没有其他方法可以彻底去除？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T13:25:37.197

由于您已从自定义主题中删除了该`<link rel="icon" href="whatever"/>`行，因此已加载默认图标。

我不了解 Tumblr，但解决方案不是删除在您的自定义主题中添加网站图标的行。请尝试以下操作。

放置这行代码而不是您从自定义主题中删除的行：

```
<link rel="icon" href=""/> 
```

您必须能够通过简单地在`href`属性中提供指向它的路径来显示您的自定义图标（如果有的话）。例如，如果您`myFavicon.ico`在根文件夹中调用了一个网站图标，那么您的`href`属性将为`href="myFavicon.ico"`.

希望这会有所帮助，并且可以*正常工作*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:34:03.437

我注意到使用 Favicons 有时会因为某些奇怪的原因需要时间来更新，您可以随时制作自己的并将其上传到根目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T12:38:39.307

你不能只删除 tumblr 上的图标，你必须用另一个替换它。

# python - A*算法生成的噪声路径

> ID：15497016
> 
> 赞同：3
> 
> 时间：2013-03-19T10:32:07.827
> 
> 标签：python, algorithm, path, noise

我正在开发一个机器人项目的前端（一种使用一些传感器和地图进行自我定位的“自动”汽车——从 SVG 文件生成）。

为了使机器人可控，我们必须在其当前位置和目标之间生成路径。我为此使用了最简单的算法：A*。

这样做我得到了一些奇怪的结果：汽车倾向于以 45° 的倍数行驶，还有一个特别烦人的问题：一些生成的路径非常嘈杂！

在这种情况下，请查看橙色矩形附近的嘈杂路径：

![生成路径的可视化](../Images/7d8b8ca918e6490ee93331f51762c915.png)

有没有办法避免那些奇怪/嘈杂的结果？最终，我们希望建立一条航向角变化最少的路径。（汽车可以在不移动的情况下转动，因此我们不需要任何路径“平滑”）。

这是我的 A* 实现：

```
def search(self, begin, goal):
    if goal.x not in range(self.width) or goal.y not in range(self.height):
        print "Goal is out of bound"
        return []
    elif not self.grid[begin.y][begin.x].reachable:
        print "Beginning is unreachable"
        return []
    elif not self.grid[goal.y][goal.x].reachable:
        print "Goal is unreachable"
        return []
    else:

        self.cl = set()
        self.ol = set()

        curCell = begin
        self.ol.add(curCell)

        while len(self.ol) > 0:

            # We choose the cell in the open list having the minimum score as our current cell
            curCell = min(self.ol, key = lambda x : x.f)

            # We add the current cell to the closed list
            self.ol.remove(curCell)
            self.cl.add(curCell)

            # We check the cell's (reachable) neighbours :
            neighbours = self.neighbours(curCell)

            for cell in neighbours:
                # If the goal is a neighbour cell :
                if cell == goal:
                    cell.parent = curCell
                    self.path = cell.path()
                    self.display()
                    self.clear()
                    return self.path
                elif cell not in self.cl:
                    # We process the cells that are not in the closed list
                    # (processing <-> calculating the "F" score)
                    cell.process(curCell, goal)

                    self.ol.add(cell) 
```

**编辑1：**根据大众需求，这是分数计算功能（过程）：

```
def process(self, parent, goal):
    self.parent = parent
    self.g = parent.distance(self)
    self.h = self.manhattanDistance(goal)
    self.f = self.g + self.h 
```

**编辑**这是邻居方法（根据user1884905的回答更新）：

```
def neighbours(self, cell, radius = 1, unreachables = False, diagonal = True):
    neighbours = set()
    for i in xrange(-radius, radius + 1):
        for j in xrange(-radius, radius + 1):
            x = cell.x + j
            y = cell.y + i
            if 0 <= y < self.height and 0 <= x < self.width and ( self.grid[y][x].reachable or unreachables ) and (diagonal or (x == cell.x or y == cell.y)) :
                neighbours.add(self.grid[y][x])

    return neighbours 
```

（这看起来很复杂，但它只给出了一个单元格的 8 个邻居——包括对角邻居；它也可以采用不同于 1 的半径，因为它用于其他特征）

和距离计算（取决于对角线邻居的使用与否：）

```
def manhattanDistance(self, cell):
    return abs(self.x - cell.x) + abs(self.y - cell.y)

def diagonalDistance(self, cell):

    xDist = abs(self.x - cell.x)
    yDist = abs(self.y - cell.y)

    if xDist > yDist:
        return 1.4 * yDist + (xDist - yDist)
    else:
        return 1.4 * xDist + (yDist - xDist) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T11:14:35.847

似乎实现不正确，因为它正在移动到*尚未检查的单元格中，该单元格距离目标最近（如乌鸦飞过）*，而它应该*尝试*它并在找到障碍物时撤消路径以找到最优的。在 Wikipedia 上查看这个[漂亮的动画来了解这个想法。](https://en.wikipedia.org/wiki/File%3aAstar_progress_animation.gif)

这里的问题与您如何计算有关`cell.f`，也许您在进行微积分时没有添加当前单元格的分数，一般而言，A* 应该采取[此处标记为红色](http://i.imgur.com/7dxdFsb.png)的步骤并生成类似的次优路径。

由于空间被划分为离散的单元格，当连续世界中的最佳路径（总是像乌鸦飞过一样）正好在两个离散移动之间时，它会尽可能地用那条奇怪的路径来近似它。

我在这里看到两种方法：

1.  修复算法（[这里是伪代码](https://en.wikipedia.org/wiki/A%2a_search_algorithm#Pseudocode)）为每个评估的单元格保持正确的距离值（在粘贴的单元格中没有关于如何`cell.f`计算的信息）。
2.  使用**Djikstra**，只需对当前算法进行一些更改即可轻松实现。实际上，A* 只是它的优化版本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T15:11:01.043

在无法看到您如何实现您的`neighbour`和`distance`功能的情况下，我仍然可以很好地猜测出了什么问题：

**如果允许对角线遍历，则不应使用曼哈顿距离。**

目标函数中的曼哈顿距离应该是到目标的最短距离的度量。（事实并非如此，如果您可以沿对角线行驶穿过积木。）

解决此问题的最简单方法是将曼哈顿距离保持为目标函数，并将邻居的定义更改为仅包括四个左右上下相邻的单元格。

**编辑**

您的代码仍然存在问题。以下伪代码取自[维基百科](http://en.wikipedia.org/wiki/A%2a_search_algorithm)。我已经标记了您必须检查的重要行。您必须确保 i）如果您找到更好的解决方案，您正在更新开放集中的节点，并且 ii）您始终考虑先前行进的距离。

```
function A*(start,goal)
     closedset := the empty set    // The set of nodes already evaluated.
     openset := {start}    // The set of tentative nodes to be evaluated, initially containing the start node
     came_from := the empty map    // The map of navigated nodes.

     g_score[start] := 0    // Cost from start along best known path.
     // Estimated total cost from start to goal through y.
     f_score[start] := g_score[start] + heuristic_cost_estimate(start, goal)

     while openset is not empty
         current := the node in openset having the lowest f_score[] value
         if current = goal
             return reconstruct_path(came_from, goal)

         remove current from openset
         add current to closedset
         for each neighbor in neighbor_nodes(current)
             // -------------------------------------------------------------------
             // This is the way the tentative_g_score should be calculated.
             // Do you include the current g_score in your calculation parent.distance(self) ?
             tentative_g_score := g_score[current] + dist_between(current,neighbor)
             // ------------------------------------------------------------------- 
             if neighbor in closedset
                 if tentative_g_score >= g_score[neighbor]
                     continue

             // -------------------------------------------------------------------
             // You never make this comparrison
             if neighbor not in openset or tentative_g_score < g_score[neighbor]
             // -------------------------------------------------------------------
                 came_from[neighbor] := current
                 g_score[neighbor] := tentative_g_score
                 f_score[neighbor] := g_score[neighbor] + heuristic_cost_estimate(neighbor, goal)
                 if neighbor not in openset
                     add neighbor to openset

     return failure

 function reconstruct_path(came_from, current_node)
     if current_node in came_from
         p := reconstruct_path(came_from, came_from[current_node])
         return (p + current_node)
     else
         return current_node 
```

# html5-canvas - 如何在html5中悬停对象时放置锚点

> ID：15497018
> 
> 赞同：0
> 
> 时间：2013-03-19T10:32:09.530
> 
> 标签：html5-canvas

我有一个对象，现在我想显示锚点，以便在悬停时增加或减少对象的宽度。

我怎样才能从 HTML5 画布中实现这一点？

![流程图示例](../Images/e2578bbe05b49d0a1cbf5c126676f934.png)

如何使用画布库连接对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:08:11.887

**画布绘图库将为您提供用户重新缩放的快捷方式。**

这是 FabricJS 画布绘图库自动显示锚点的示例。用户可以使用锚点调整大小和旋转。

![在此处输入图像描述](../Images/ab07bd34d0892a7583e4aee42bb721e3.png)

您可以在此处下载 FabricJS 画布库：[https ://github.com/kangax/fabric.js](https://github.com/kangax/fabric.js)

下载库后，您需要转到“dist”文件夹并将“all.min.js”文件复制到您的脚本文件夹。请务必在您的 html 文件中引用“all.min.js”作为脚本。

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/g33Vp/](http://jsfiddle.net/m1erickson/g33Vp/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
<script type="text/javascript" src="/scripts/all.min.js"></script>

<style>
    body{ background-color: ivory; padding:30px; }
    canvas{border: 1px solid red; }
</style>

<script>
    $(function(){

        // tell FabricJS to manage your canvas drawing
        var canvas = new fabric.Canvas('canvas');

        // draw a Fabric rectangle on the canvas
        // the rectangele comes with drag/scale/rotate built in!
        var rect = new fabric.Rect({
          left: 150,
          top: 150,
          width: 75,
          height: 50,
          fill: 'green',
          angle: 20,
          padding: 10
        });
        canvas.add(rect);

    }); // end $(function(){});
</script>

</head>

<body>
    <br/><p>Click on the green rectangle to activate anchor points</p>
    <br/><p>Then drag the anchor points to resize / rotate</p><br/>
    <canvas id="canvas" width="300" height="300"></canvas> 
</body>
</html> 
```

# c# - 读取文件名并找到特定的字符串

> ID：15497020
> 
> 赞同：2
> 
> 时间：2013-03-19T10:32:12.233
> 
> 标签：c#

我有像这样的文件名

```
ChrysanthemumThumbnail82b09296a7c34373833050d362745a30.jpg 
```

我怎样才能找到这个字符串**ChrysanthemumThumbnail**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T10:33:15.223

您可以使用[`Path.GetFileNameWithoutExtension`](http://msdn.microsoft.com/en-us/library/system.io.path.getfilenamewithoutextension.aspx)方法读取没有扩展名的文件名，然后您可以使用`string.Contains`它来检查它是否包含您的字符串。

```
string fileName = Path.GetFileNameWithoutExtension("ChrysanthemumThumbnail82b09296a7c34373833050d362745a30.jpg");
if(fileName.Contains("ChrysanthemumThumbnail"))
{
  //name found
} 
```

如果您想查看文件名是否以您的字符串开头，那么您可以使用[string.StartsWith](http://msdn.microsoft.com/en-us/library/system.string.startswith.aspx)

```
if(fileName.StartsWith("ChrysanthemumThumbnail"))
{
 //file name starts with ChrysanthemumThumbnail
} 
```

*（如果您在字符串中已经有 FileName，那么您不需要`Path.GetFileNameWithoutExtension`它仅在您尝试从路径中提取文件名时有用）*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T10:35:02.347

你想要类似的东西：

```
string filename = "ChrysanthemumThumbnail82b09296a7c34373833050d362745a30.jpg"
bool result = filename.Contains("ChrysanthemumThumbnail"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T10:36:14.950

如果**ChrysanthemumThumbnail**总是在文件名的开头，那么只需使用 'StartWith' ，这将比包含检查整个字符串更好

```
"ChrysanthemumThumbnail82b09296a7c34373833050d362745a30.jpg".StartsWith("ChrysanthemumThumbnail") 
```

并且如果它可以在任何位置，而不是按照上面 Habib 的建议使用包含

```
"ChrysanthemumThumbnail82b09296a7c34373833050d362745a30.jpg".Contains ("ChrysanthemumThumbnail") 
```

# regex - 正则表达式搜索和分组替换

> ID：15497021
> 
> 赞同：0
> 
> 时间：2013-03-19T10:32:13.630
> 
> 标签：regex, vim, notepad++

我有一个包含数百行的文件，如下所示。我的正则表达式技能不足以完成工作。我正在尝试在 Notepad++ 中使用正则表达式进行搜索和替换，在 vim 中也尝试过（但失败了）。

这是我的正则表达式

> `public string (^[A-Z]*[\S]) { get; set }`

所以我想让第一行看起来像这样

> `Foretag public string Foretag { get; set; }`

以及它后面的所有行都与我的搜索词匹配，即 Type="string"

```
Foretag Type="string"
DagboksDatum Type="DateTime"  
Byggdag Type="int"  
PaborjadeArbeten Type="string"  
FardigaArbeten Type="string" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T10:50:43.583

在 Vim 中：

```
:%s/\(\w*\).*string.*/\1 public string \1 { get; set } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T10:42:28.870

你会在 Npp 中这样做：

找什么：

```
^(\w+) Type="(\w+)" 
```

用。。。来代替：

```
\1 public \2 \1 { get; set; } 
```

# android - settouch拦截器内部无法调用android中的函数？

> ID：15497022
> 
> 赞同：0
> 
> 时间：2013-03-19T10:32:14.957
> 
> 标签：android

在我的应用程序中，我使用了一个弹出窗口。为了在用户触摸外部时关闭弹出窗口，我使用下面的**ORDER LIST PW CODING**编码，弹出窗口关闭功能工作正常但无法调用

```
Submenu_listtask = new Submenu_list();
Submenu_listtask.execute(); 
```

里面的这个功能`setTouchInterceptor`不起作用。任何人都可以知道请帮助我。

**订单清单 PW 编码**

```
order_list_pw.setTouchInterceptor(new OnTouchListener() {
                public boolean onTouch(View v, MotionEvent event) {
                    if (event.getAction() == MotionEvent.ACTION_OUTSIDE) {
                        //Unable to call this function
                        Submenu_listtask = new Submenu_list();
                        Submenu_listtask.execute();

                        order_list_pw.dismiss();

                        Log.v("Name", "Name");

                        return true;
                    }

                    return false;
                }
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:35:44.960

`true`结束时返回，`onTouch()`因为返回`false`仅使您能够捕获`ACTION_DOWN`事件

# git - 合并时出错

> ID：15497023
> 
> 赞同：-1
> 
> 时间：2013-03-19T10:32:15.643
> 
> 标签：git, git-gui

谁能帮我解决这个 git 合并错误...我有点迷失在这里。我已经尝试解决这个合并问题两天了，并且阅读了很多合并，但我似乎仍然无法弄清楚。我上周刚跳进这个 git，所以我对 git 很陌生。

这是来自 git GUI 的错误文件 ![在此处输入图像描述](../Images/ed12fda53ed5ed2fb8ea0af1f1b21b58.png)

我的错误的解决方案（这是针对 Git GUI）：

我终于得到了我的错误的答案。感谢@Michiel Kauw-A-Tjoe。这就是我所做的......我做

> `Commit -> Revert changes`

到里面的所有文件`Unstaged Changes`然后我做

> `Remote -> fetch from -> origin`

然后我做

> `Merge -> local Merge`

我这样做的原因是因为我想在自己提交之前获取最新文件，并且因为我使用的是 aptana，所以总是有`.metadata`文件，这会导致冲突，为了避免这种冲突，我首先获取最新/更新文件然后我稍后添加我的更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:45:10.050

看起来您正在尝试签入 Eclipse 元数据文件和 python 二进制文件。您可能应该将它们排除在版本控制之外。一种方法是列出您不想跟踪的文件名和扩展名，并将它们添加到文本文件中。我会推荐至少这些条目：

```
*.pyc
.project
.pydevproject
.settings
.metadata 
```

您可以将文件放在存储库中的某个位置，然后运行以下命令：

```
git config --global core.excludesfile <filename>.txt 
```

这将从命令行解决问题。如果您从 Eclipse 提交，您还需要在`Preferences -> Team -> Ignored Resources`. `Add Pattern...`在那里，您可以通过单击按钮一次输入相同的行。

# python - 当我在 Canvas 上放置一个对象时如何扩展它？

> ID：15497025
> 
> 赞同：1
> 
> 时间：2013-03-19T10:32:19.607
> 
> 标签：python, user-interface, tkinter

我正在创建多个对象`Tkinter.Canvas`。这里的问题是一些对象正在离开画布。即使使用滚动条，如何扩展画布以显示所有对象？这是我正在使用的示例代码：

```
from Tkinter import *
root = Tk()
f=Frame(root)
f.grid()
w=Canvas(f)
line1=w.create_line(50,50,150,150, width=5)
line2=w.create_line(100,100,100,350, width=3)
line3=w.create_line(150,150,150,450, width=3)
w.grid(row=0, column=0)
u=Frame(f)
u.grid(row=0, column=1)
root.mainloop() 
```

在这里`line2`和`line3`不在画布上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:42:42.067

`Canvas`只需在创建对象时指定所需的大小：

```
w=Canvas(f, width=200, height=500) 
```

`config()`或者，您可以在通过其方法创建许多小部件后重新配置它们：

```
w.config(width=200, height=500) 
```

这是我找到的一些[文档](http://infohost.nmt.edu/tcc/help/pubs/tkinter/)所说的：

> 在我们查看这些小部件之前，让我们先看看它们的一些常见属性（例如大小、颜色和字体）是如何指定的。
> 
> • 每个小部件都有一组影响其外观和行为的选项——字体、颜色、大小、文本标签等属性。
> 
> • 您可以在使用关键字参数（例如`text='PANIC!'`or ）调用小部件的构造函数时指定选项`height=20`。
> 
> • 创建小部件后，您可以稍后使用小部件的`.config()`方法更改任何选项。`.cget()`您可以使用小部件的方法检索任何选项的当前设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T19:21:47.033

您必须创建两个`Scrollbar`s 并将它们设置为画布的`xscrollcommand`和`yscrollcommand`选项。然后，当您配置`scrollregion`最大宽度和高度时，如果需要，scollbars 将增长。

如果你`Canvas`用这个非常基本的实现替换你的代码，你会看到结果：

```
from Tkinter import *

class ScrollableCanvas(Canvas):
    def __init__(self, master, *args, **options):
        self.frame = Frame(master)
        Canvas.__init__(self, self.frame, *args, **options)
        self.xscrollbar = Scrollbar(self.frame, command=self.xview, orient=HORIZONTAL)
        self.yscrollbar = Scrollbar(self.frame, command=self.yview)
        self.config(xscrollcommand=self.xscrollbar.set, yscrollcommand=self.yscrollbar.set)
    def create_line(self, *args, **options):
        Canvas.create_line(self, args, **options)
        self._resize(*args)
    def _resize(self, *args):
        maxwidth = max(args[0], args[2], int(self['width']))
        maxheight = max(args[1], args[3], int(self['height']))
        self.config(scrollregion=(0, 0, maxwidth, maxheight))
    def grid(self, *args, **options):
        self.frame.grid(*args, **options)
        Canvas.grid(self, row=0, column=0)
        self.xscrollbar.grid(row=1, column=0, sticky=E+W)
        self.yscrollbar.grid(row=0, column=1, sticky=N+S) 
```

# objective-c - 大图像的快速动画

> ID：15497026
> 
> 赞同：0
> 
> 时间：2013-03-19T10:32:20.903
> 
> 标签：objective-c, xcode, animation, cocos2d-iphone, uiimage

我的任务是为 iPad2 制作简单的动画，如下所示：http: [//www.subaru.jp/legacy/b4/index2.html](http://www.subaru.jp/legacy/b4/index2.html)

用户可以简单地左右滑动，对象通过它的垂直轴视觉旋转。我认为最简单的方法是使用 cocos2d 中的 UIImage 或 CCSprite，使用图像设置数组并根据触摸更改图像。图像尺寸计划为 1024x768（全屏），每秒至少 15-20 张图像，以获得更流畅的动画效果。问题是：是否有可能以这种方式真正顺利地做到这一点？对于这样的事情，iPad2 的真正限制是什么。如果它超出了界限，我怎么能以其他方式实现这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:28:55.793

好的，让我们运行数学：

每秒 15 次 1024x768 图像。如果您使用 4096x4096 纹理图集，您可以将它们全部放入一个纹理图集。这涵盖了 1 秒。

这意味着您需要每秒加载另一个纹理图集。内存中最多可以有 2-3 个这样的纹理图集（保守地每个使用 64 MB 内存）。

真正做到这一点的唯一方法是使用 .PVR.CCZ 纹理图集来增加加载时间并减少内存使用。您仍然需要经常（在几秒钟内）加载/卸载纹理图集。因此，您应该测试加载 4k .PVR.CCZ 纹理的速度以及这是否会影响速度。

如果这太慢了（我怀疑会这样），您将不得不使用 1024x1024 .pvr.ccz 纹理（单帧）并使用 CCTextureCache 异步方法提前缓存其中的 4 个或更多（并取消缓存您的纹理'当前正在替换），以便在后台加载新纹理并且不会影响动画速度。

由于这是关于旋转的，因此您必须确保缓存中至少有一个更好的两个帧到任一方向。由于旋转可以以不同的速度发生，因此用户可能仍然会遇到延迟。

您应该尽可能地进一步降低纹理的颜色位深度，直到它过多地影响图像质量。

如果你应用书中的每一个技巧，我相信它是可行的。但它不会像“播放动画”那样简单并完成它。如果那是你想知道的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T10:54:14.737

我以前做过类似的事情，但是使用带有 UIWebView 控件的 JS 库，库名称是[UIZE](http://www.uize.com/)，请查看此[示例](http://www.uize.com/examples/3d-rotation-viewer.html)。我用它处理了大约 100 张大小为 1024 × 655 的图像，它非常流畅。

从大小下载库，整理文件夹如下：

*   旋转3d
    *   例子
        *   3d-旋转-viewer.html
*   图片
    *   图像文件
*   js
    *   库文件。

在您的 Objective-C 类中，使用以下代码在 UIWebView 中加载 html 页面：

```
NSString *path = [[NSBundle mainBundle]
                  pathForResource:@"3d-rotation-viewer"
                  ofType:@"html"
                  inDirectory:@"rotation3d/example" ];

NSURL *urls = [NSURL fileURLWithPath:path];

NSString *theAbsoluteURLString = [urls absoluteString];

NSString *queryStrings = @"?param1=something";//Parameters to pass to your html page

NSString *absoluteURLwithQueryString = [theAbsoluteURLString stringByAppendingString: queryStrings];  

NSURL *finalURL = [NSURL URLWithString: absoluteURLwithQueryString];

NSURLRequest *request = [NSURLRequest requestWithURL:finalURL cachePolicy:NSURLRequestReloadIgnoringCacheData timeoutInterval:(NSTimeInterval)10.0 ];

[webViews loadRequest:request]; 
```

# python - 如何使用 SQLAlchemy + postgreSQL 减少连接数？

> ID：15497027
> 
> 赞同：11
> 
> 时间：2013-03-19T10:32:22.150
> 
> 标签：python, postgresql, heroku, sqlalchemy, flask

我正在使用他们的**Postgres**插件和 Dev 计划在**heroku**上进行开发，该计划的连接限制为. 我是新手，这可能是微不足道的，但我发现很难抽象数据库连接而不导致.**`20``python``OperationalError: (OperationalError) FATAL: too many connections for role`**

 **目前我有`databeam.py`：

```
import os
from flask import Flask
from flask.ext.sqlalchemy import SQLAlchemy
from settings import databaseSettings

class Db(object):
    def __init__(self):
        self.app = Flask(__name__)
        self.app.config.from_object(__name__)
        self.app.config['SQLALCHEMY_DATABASE_URI'] = os.environ.get('DATABASE_URL', databaseSettings())
        self.db = SQLAlchemy(self.app)

db = Db() 
```

当我为页面创建控制器时，我会这样做：

```
import databeam

db = databeam.db
locations = databeam.locations

templateVars = db.db.session.query(locations).filter(locations.parent == 0).order_by(locations.order.asc()).all() 
```

这确实产生了我想要的东西，但缓慢且有时会导致上面提到的错误。由于我来自`php`背景，我对如何处理数据库连接有一定的心态（即像上面的例子），但我担心它不适合`python`.

在一个地方抽象数据库连接然后在所有导入中使用相同的连接的正确方法是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-19T18:17:02.807

在 SQL Alchemy 中，您应该能够创建连接池。这个池是每个 Dyno 的池大小。在 Dev 和 Basic 计划中，因为您最多可以有 20 个，如果您运行 1 个 dyno，您可以将其设置为 20，如果您运行 2 个，则设置为 10，等等。要配置您的池，您可以设置引擎：

```
engine = create_engine('postgresql://me@localhost/mydb',
                   pool_size=20, max_overflow=0) 
```

这会为您的数据库引擎设置一个池，然后您会自动从中提取。您还可以手动配置池，更多详细信息可以在 SQL Alchemy 的池指南中找到 - [http://docs.sqlalchemy.org/en/latest/core/pooling.html](http://docs.sqlalchemy.org/en/latest/core/pooling.html)**

# c++ - 索引字符数组 - 指针问题

> ID：15497029
> 
> 赞同：0
> 
> 时间：2013-03-19T10:32:25.457
> 
> 标签：c++, arrays, pointers, indexing, char

```
#include <iostream>
#include <cstring>
using namespace std;

void getInput(char *password, int length)
{
    cout << "Enter password: ";
    cin >> *password;
}
int countCharacters(char* password)
{
    int index = 0;
    while (password[index] != "\0")
    {
        index++;
    }
    return index;
}
int main()
{
    char password[];
    getInput(password,7);
    cout << password;
    return 0;
} 
```

你好！我在这里尝试了两件我无法在 atm 做的事情。我正在尝试在 main 中创建一个长度未指定的 char 数组，并且我正在尝试在函数 countCharacters 中计算 char 数组中的单词数。但是密码[索引] 不起作用。

编辑：我正在做作业，所以我只能使用 cstrings。EDIT2：我也不允许使用“strlen”功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:34:41.490

一开始更换

```
char password[]; 
```

经过

```
char password[1000]; // Replace 1000 by any maximum limit you want 
```

然后替换：

```
cin >> *password; 
```

经过

```
cin >> password; 
```

也代替`"\0"`你应该放`'\0'`

PS C++ 中没有未指定长度的 char 数组，您应该使用 std::string 代替（[http://www.cplusplus.com/reference/string/string/](http://www.cplusplus.com/reference/string/string/)）：

```
#include <string>

int main() {
    std::string password;
    cin >> password;
    cout << password;
    return 0;
} 
```

# reporting-services - ssrs 2008 R2 没有子报表的主报表部署

> ID：15497040
> 
> 赞同：0
> 
> 时间：2013-03-19T10:33:13.943
> 
> 标签：reporting-services

我准备了一份报告。我为主报告使用了 15 个子报告。当我部署我的报告时，所有子报告也部署在报告管理器中。我只想在报表管理器中查看主报表，而不是所有报表。快照如下。有什么办法给我建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:54:18.917

您需要转到子报表的属性并将它们隐藏在平铺视图中。您实际上无法完全隐藏它们，但这将对大多数用户隐藏它们。

# django - 在 Apache 虚拟主机上部署 Django：404

> ID：15497047
> 
> 赞同：0
> 
> 时间：2013-03-19T10:33:48.153
> 
> 标签：django, apache

我知道有很多文章都在讨论这个问题，但是通过 Apache 虚拟主机部署 Django 站点时，我不断收到 404 错误。这是我的 .conf 文件：

```
Listen 8001
<VirtualHost *:8001>
  ServerName www.myhostname.com/basic
  ServerAdmin caisj@example.com

  ProxyRequests Off
  <Proxy *>
    Order deny,allow
    Allow from all
  </Proxy>

  DocumentRoot /home/browser/BASIC/basic

  Alias /static /home/browser/BASIC/basic/static
  Alias /media /home/browser/BASIC/_py/lib/python2.6/site-packages/Django-1.4-py2.6.egg/django/contrib/admin/media

  WSGIScriptAlias /basic /home/browser/BASIC/basic/basic.wsgi
  ErrorLog /home/browser/BASIC/basic/log/basic.error.log

  LogLevel info
  CustomLog /home/browser/BASIC/basic/log/basic.access.log combined
</VirtualHost> 
```

我尝试了“ServerName”和其他参数的不同组合，但是在访问 www.myhostname.com/basic 时，我不断收到 404 错误。Apache 重启成功，日志文件没有任何线索。

或者任何人都可以帮助告诉哪里可以找到错误？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:25:10.610

您已将其设置为侦听端口 8001 并植根于`/basic`，因此您需要访问`www.myhostname.com:8001/basic`。

请注意，您不应设置`DocumentRoot`为 Django 文件的位置。没有必要为 Django 应用程序提供服务，这可能会带来安全风险 - 配置错误可能意味着您的代码文件（包括任何数据库密码）可能会被提供。

# cmd - CMD 日期更改日志

> ID：15497051
> 
> 赞同：0
> 
> 时间：2013-03-19T10:33:56.400
> 
> 标签：cmd

我正在制作一个程序，它有一个更改日志。程序更改日志必须说明版本，然后显示它是多少天前的。所以应该说：

```
[2013/03/19, 2 days ago] 
```

我使用了这段代码：

```
set versionreleasedate1=2013/03/17
set /a verionday=%versionreleasedate1%-%date%

echo Version: 1.0 BETA [2013/03/19, %verionday% days ago] 
```

但我知道它正在划分的日期，因为 cmd 认为 \ 符号是 devide 购买我想要一个小分隔符作为日期。

所以它会像这样工作

```
set /a var1=2013/03/17-%date% (todays date) 
```

并回显多少天前。任何帮助都会非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:35:41.283

This works for my machine, and hopefully for yours:

```
@echo off &setlocal
set "versionreleasedate1=2013/03/17"
set "versionreleasetime1=00:00:00,00"

call :GetInternational
call :GetSecs "%versionreleasedate1%" "%versionreleasetime1%" startsec
call :GetSecs "%date%" "%time%" stopsec
set /a versionday=(%stopsec%-%startsec%)/86400
echo Version: 1.0 BETA [%versionreleasedate1%, %versionday% days ago]
goto :eof

:GetInternational
:: Sets a bundle of variables by reading the registry settings
for /f "tokens=1,2*" %%a in (' reg query "HKCU\Control Panel\International"^|find "REG_SZ" ') do set "%%a=%%c"
goto :eof

:GetSecs "dateIn" "timeIn" secondsOut
::  Output:  Seconds elapsed since 1th Jan. 1970 00:00:00
::  http://www.dostips.com/forum/viewtopic.php?p=6450#p6450
setlocal
set "dateIn=%~1"
for /f "tokens=2" %%i in ("%dateIn%") do set "dateIn=%%i"
for /f "tokens=1-3 delims=%sDate%" %%a in ("%dateIn%") do (
  if %iDate%==0 set /a mm=100%%a%%100,dd=100%%b%%100,yy=10000%%c%%10000
  if %iDate%==1 set /a dd=100%%a%%100,mm=100%%b%%100,yy=10000%%c%%10000
  if %iDate%==2 set /a yy=10000%%a%%10000,mm=100%%b%%100,dd=100%%c%%100
)
for /f "tokens=1-3 delims=%sTime%%sDecimal% " %%a in ("%~2") do (
  set "hh=%%a"
  set "nn=%%b"
  set "ss=%%c"
)
if 1%hh% lss 20 set hh=0%hh%
if "%nn:~2,1%" equ "p" if "%hh%" neq "12" (set "hh=1%hh%" &set /a hh-=88)
if "%nn:~2,1%" equ "a" if "%hh%" equ "12" set "hh=00"
if "%nn:~2,1%" geq "a" set "nn=%nn:~0,2%"
set /a hh=100%hh%%%100,nn=100%nn%%%100,ss=100%ss%%%100
set /a z=14-mm,z/=12,y=yy+4800-z,m=mm+12*z-3,j=153*m+2,j=j/5+dd+y*365+y/4-y/100+y/400-2472633,j=j*86400+hh*3600+nn*60+ss
endlocal &set "%~3=%j%"
goto :eof

endlocal 
```

%versionreleasedate1% & %versionreleasetime1% **must** be in the same format like %date% & %time% on your machine!

# javascript - JS和mongo中的var溢出

> ID：15497055
> 
> 赞同：0
> 
> 时间：2013-03-19T10:34:04.330
> 
> 标签：javascript, mongodb, var

我正在使用 javascript 和 mongo。我必须存储和处理非常大的整数，例如`pow(10,30)`可能更多。我担心溢出，如果我使用 var 会在 mongo 或 javascript 中发生这种情况吗？我知道 JS 函数`toPrecision()`最多可以工作 20 位，但是如果我有更多会发生什么？那么mongo呢，存储的数字什么时候溢出呢？

# django - 如何让 django 在启动时编译 .mo 文件？

> ID：15497060
> 
> 赞同：0
> 
> 时间：2013-03-19T10:34:14.640
> 
> 标签：django, deployment, gettext, po, mo

我想要实现的是当 django 项目启动时，让它以跨平台的方式自动运行编译消息。这样，mo 文件就不需要检查到源代码管理中，并且当在分支中添加翻译然后合并回冲突时，不会发生冲突。

我遇到了这个问题，因为从我收集的信息来看，compilemessages 取决于 settings.py，所以如果你尝试从 settings.py 运行它，它会检测到循环引用然后不运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T07:54:44.653

正如在[另一个问题](https://stackoverflow.com/questions/10349484/svn-post-update-hook)中提到的那样， Subversion*更新挂钩*取决于客户端，所以我只建议一个 shell 脚本：

```
svn update
python manage.py compilemessages 
```

当你想部署时，你运行这个脚本。

# c# - 列表未在自定义控件中更新

> ID：15497062
> 
> 赞同：0
> 
> 时间：2013-03-19T10:34:20.850
> 
> 标签：c#, wpf, custom-controls

我有一个从网格继承的自定义控件。在该控件中，我有一个 ColumnHeaders 列表（从 Label 继承的控件）。但该列表不起作用。ColumnHeaders 是在 xaml 中定义的。

**代码**：

```
public List<ColumnHeader> ColumnHeaders { get { return (List<ColumnHeader>)GetValue(ColumnHeadersProperty); } set { SetValue(ColumnHeadersProperty, value); } }

public static readonly DependencyProperty ColumnHeadersProperty = DependencyProperty.Register("ColumnHeaders", typeof(List<ColumnHeader>), typeof(DataGrid),
            new FrameworkPropertyMetadata(new List<ColumnHeader>(), FrameworkPropertyMetadataOptions.AffectsRender | FrameworkPropertyMetadataOptions.AffectsParentMeasure, OnColumnHeadersChanged));

<lib:DataGrid Columns="9" Rows="16" x:Name="mVersions" RowHeader="True" ColumnHeader="True" ColumnEnter="ColumnEnter" Background="Transparent">
    <lib:DataGrid.ColumnHeaders>
        <lib:ColumnHeader Content="Bedieningsb." />
        <lib:ColumnHeader Content="LCD" />
        <lib:ColumnHeader Content="Herhaalb." />
        <lib:ColumnHeader Content="Relais" />
        <lib:ColumnHeader Content="Printer" />
        <lib:ColumnHeader Content="Voedingscontr." />
        <lib:ColumnHeader Content="Redundantie" />
        <lib:ColumnHeader Content="WebModule" />
        <lib:ColumnHeader Content="Net" />
    </lib:DataGrid.ColumnHeaders>
</lib:DataGrid> 
```

永远不会调用函数 OnColumnHeadersChanged。为什么？？但是其他属性正在更新网格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:40:53.847

您可以尝试使用此代码

```
public static readonly DependencyProperty ColumnHeadersProperty = DependencyProperty.Register("ColumnHeaders", typeof(List<ColumnHeader>), typeof(DataGrid),
  new PropertyMetadata(OnColumnHeadersChanged)); 
```

# jakarta-ee - 验证错误：值无效 Java Server Faces...selectOneMenu

> ID：15497065
> 
> 赞同：1
> 
> 时间：2013-03-19T10:34:35.483
> 
> 标签：jakarta-ee

早上好，

我的“selectOneMenu：我尝试从数据库中获取用户列表……第一次，selectOnemenu 中的用户登录列表很好……但是当我选择登录时，我有这个错误：“formulaire_listeUtilisateurs：用户名：验证错误：值无效”

我的 selectOneMenu 代码：

```
<h:selectOneMenu id="username"
                    value="#{utilisateursManager.utilisateurSelectionne}" converter="#{utilisateurConverter}" validator="utilisateurValidator">
                    <f:selectItem itemLabel="#{msg['index.selectionne']}" />
                    <f:selectItems value="#{utilisateursManager.donneUtilisateurs}"
                        var="utilisateur" itemLabel="#{utilisateur.login}" itemValue="#{utilisateur}" />
                </h:selectOneMenu> 
```

我的 bean 托管代码：

```
@ManagedBean(name="utilisateursManager")
@SessionScoped

public class UserManagedbean implements Serializable {

private static final long serialVersionUID = 1L;
/**
 * Injection de nos EJB (Session Bean Stateless)
 */
@EJB
private UtilisateurDao dao;

// List<Information> pays;
private List<Utilisateur> listeUtilisateurs;
private Utilisateur utilisateurSelectionne;

public List<Utilisateur> getListeUtilisateurs() {

    return listeUtilisateurs;
}
public void setlisteUtilisateurs(List<Utilisateur> liste) {
    this.listeUtilisateurs = liste;
}

public Utilisateur getUtilisateurSelectionne() {
    return utilisateurSelectionne;
}
public void setUtilisateurSelectionne(Utilisateur utilisateur) {
    this.utilisateurSelectionne = utilisateur;
}

//remplissage de la liste derroulante
public List<Utilisateur> getDonneUtilisateurs(){

System.out.println("Fonction getDonneUtilisateurs");        
    listeUtilisateurs = dao.trouver();
//      this.utilisateurSelectionne = (Utilisateur) listeUtilisateurs.get(1);
    return listeUtilisateurs;
}

//remplissage de la liste derroulante
public String verifierMotDePasse(){

    return "acceuil.xhtml";
}

} 
```

我的转换器代码：

```
@ManagedBean
@SessionScoped
public class UtilisateurConverter implements Converter, Serializable {

private static final long serialVersionUID = 1L;    

@Override
public Object getAsObject(FacesContext context, UIComponent component,
        String value) {

    UserManagedbean bean = (UserManagedbean) HttpSession)context.getExternalContext().getSession(true)).getAttribute("utilisateursManager");
    List<Utilisateur> userList = bean.getDonneUtilisateurs();
    for(int i=0; i<userList.size(); i++) {
        Utilisateur user = userList.get(i);
        if(user.getLogin().equals(value)) {
System.out.println("DANSCONVERTEROBJECT trouve user:" + user.getLogin());
            return user;
        }
    }
    return null;

}

@Override
public String getAsString(FacesContext context, UIComponent component,
        Object value) {

System.out.println("DANSCONVERTERSTRING");
    if (value==null){
System.out.println("DANSCONVERTERSTRING value=null, return null:");
        return null;
    } else {
    Utilisateur user = (Utilisateur) value;
    return user.getLogin() != null ? user.getLogin() : null;
    }
} 
```

}

我从 4 天开始就尝试解决这个问题......对不起，感谢您的帮助！祝你有美好的一天

塞巴斯蒂安

# actionscript-3 - 从 Lib 中获取错误并且没有源代码

> ID：15497066
> 
> 赞同：0
> 
> 时间：2013-03-19T10:34:37.870
> 
> 标签：actionscript-3, apache-flex, flex3

我从不属于我的 Lib 中使用的组件的 AddChild 函数出现错误。我没有源代码。尽管引发错误使我的主线程停止，但这不是致命错误，我的应用程序将设法继续忽略此错误。

任何人都有提示让我发现这个错误。顺便说一下，它来自 papervision_phunky.swc，更具体的功能是：org.papervision3d.materials::MovieMaterial/updateBitmap()

谢谢，戴夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T10:39:36.553

我想你可以：

*   将对 lib 的调用包装在 try/catch 块中：这将要求您在调用 lib 代码的任何地方都执行此操作，这不是您想要做的

*   定义一个全局错误处理程序，如此处[所述](http://www.adobe.com/devnet/flex/articles/global-exception-handling.html)。请注意，这只适用于从 Flash Player 10.1 和 AIR 2.0 开始。

# google-app-engine - Google App Engine Cron 时间表和长度

> ID：15497074
> 
> 赞同：2
> 
> 时间：2013-03-19T10:35:01.273
> 
> 标签：google-app-engine, cron, cron-task

cron 计划的最小值和最大值是多少？cron 可以运行多长时间？24小时？下面的代码与时间表一起工作是 1 分钟。

```
 cron:
    - description: test
      url: /test
      schedule: every 1 minutes 
```

但我想让它 30 秒

所以我写了

```
 cron:
    - description: test
      url: /test
      schedule: every 30 seconds 
```

但是当我更新应用程序时它只会返回错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T10:39:33.107

Cron 不支持小于一分钟的粒度。至于 GAE 中的 cron 会运行多长时间，[文档说](https://developers.google.com/appengine/docs/java/config/cron)：

> 由 cron 调用的 HTTP 请求最多可以运行 10 分钟，但受到与其他 HTTP 请求相同的限制。

这向我表明 cron 请求与任务队列请求相同。对前端实例的请求有 10 分钟完成执行，而对后端实例的请求[有 24 小时的截止日期。](https://developers.google.com/appengine/docs/java/backends/overview#Billing_Quotas_and_Limits)

**编辑：** 如果您*真的*需要 30 秒的 cron 粒度，可以通过利用TaskQueue 中的 Task[`countdown`属性来解决一些问题。](https://developers.google.com/appengine/docs/python/taskqueue/tasks#countdown_arg)步骤如下：

1.  有一个一分钟的 cron 执行与您预期的 /test servlet 不同的 servlet。
2.  让这个 servlet 创建两个指向预期 /test servlet 的任务。每个任务的属性都有 30 和 60 个值`countdown`。
3.  将两个任务推送到 TaskQueue。

或者，您可以在 servlet 启动后的 30 秒和 60 秒处预先计算预期的 ETA，并将其放入[`eta`属性](https://developers.google.com/appengine/docs/python/taskqueue/tasks#eta_arg)中以获得更好的粒度。

最后需要注意的是`eta`，并`countdown`不能保证任务会在规定的时间执行。如果您的队列已饱和，或者您的实例超载，则可能会出现一些延迟。

# c# - 指定 WPF 图表的最小和最大轴

> ID：15497076
> 
> 赞同：8
> 
> 时间：2013-03-19T10:35:09.557
> 
> 标签：c#, .net, wpf, customization, wpftoolkit

这是一个看似简单的问题，但我找不到简单的答案。我想为图表上现有的 Y 轴指定最小值和最大值。

这是图表：

```
<Window x:Class="TempDataAnalyzer.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525" 
    xmlns:chartingToolkit="clr-namespace:System.Windows.Controls.DataVisualization.Charting;assembly=System.Windows.Controls.DataVisualization.Toolkit" 
    Loaded="Window_Loaded">
<Grid>
     <chartingToolkit:Chart  Name="lineChart" Title="Temperature" VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
        <chartingToolkit:LineSeries  DependentValuePath="Value" IndependentValuePath="Key" ItemsSource="{Binding}" IsSelectionEnabled="True"/>
     </chartingToolkit:Chart>
</Grid> 
```

现在，我在 Y 轴上添加 0 到 71 之间的值：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        List<KeyValuePair<int, int>> entries = new List<KeyValuePair<int, int>>();
        entries.Add(new KeyValuePair<int, int>(0, 0));
        entries.Add(new KeyValuePair<int, int>(1, 23));
        entries.Add(new KeyValuePair<int, int>(2, 45));
        entries.Add(new KeyValuePair<int, int>(3, 46));
        entries.Add(new KeyValuePair<int, int>(4, 71));

        lineChart.DataContext = entries;
    }

} 
```

但是，无论我添加什么值，我都希望图表 Y 轴显示 0 到 100 之间的范围。这是为了使其与同一页面上的不同图表保持一致。

![在此处输入图像描述](../Images/2c296bee042629ce7179f40204c2c430.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T10:44:09.473

在您的声明中添加此`XAML`代码：`Chart`

```
<chartingToolkit:Chart.Axes>
    <chartingToolkit:LinearAxis Orientation="Y" Minimum="0" Maximum="100"/>
</chartingToolkit:Chart.Axes> 
```

# gxt - 使用 gxt 出现编译错误

> ID：15497080
> 
> 赞同：0
> 
> 时间：2013-03-19T10:35:36.730
> 
> 标签：gxt

编译代码时出现以下错误。我想使用自动完成组合框。我也创建了模型。

```
[INFO]  extends java.lang.Object
[INFO]  implements : com.extjs.gxt.ui.client.data.ModelData, java.io.Serializable
[INFO] /*   fields   */
[INFO] protected [unresolved] boolean allowNestedValues
[INFO] protected [unresolved] Unresolved type com.extjs.gxt.ui.client.data.RpcMap map
[INFO] /*   methods   */
[INFO] public void <init>() 
[INFO] [unresolved] public void <init>(Map<java.lang.String,java.lang.Object>) 
[INFO] public X get(java.lang.String) 
[INFO] public X get(java.lang.String, X) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:32:51.803

你有没有忘记在你的 module.gwt.xml 中添加 gxt 库

```
<inherits name="com.extjs.gxt.ui.GXT" />
<inherits name="com.extjs.gxt.themes.Themes" />
<inherits name="com.extjs.gxt.charts.Chart" /> 
```

# opencv - 我可以将 beagleboard 的 dsp 核心用于哪些应用程序？我可以将 DSP 加速用于背景减法算法吗？

> ID：15497081
> 
> 赞同：5
> 
> 时间：2013-03-19T10:35:46.010
> 
> 标签：opencv, signal-processing, beagleboard, background-subtraction

我可以将 beagleboard 的 dsp 核心用于哪些应用程序？我可以在 OpenCV 中使用 DSP 加速进行背景减法算法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T08:13:27.477

您可以使用 DSP 进行各种计算。它是针对 DSP 应用优化的通用 CPU。所以是的，即使是浮点的东西也可以工作，尽管性能不会很好。

如果您对大型数据数组进行整数计算，DSP 真的很出色。在这里，DSP 可以很容易地计算得如此之快，以至于将数据从内存传输到内存的时间成为了瓶颈。

为了给你一个数字，什么是可能的：我有一个运行后处理来自相机的数据的算法（做拜耳去交错）。我有 8 位输入图像和 24 位输出图像。我在运行在 ~ 350Mhz 的 beagleboard DSP 上归档的性能是每秒 1.44 亿像素。这相当于每秒大约半 GB 的已处理数据。

让 DSP 启动并运行并编译一个 hello world 程序并不简单。您必须集成一个 DSP 内核驱动程序（我使用 DSPLINK）。您必须学习如何使用（巨大的）DSP/ARM 互操作库，如何将工具链用于简单的 hello world。至少计划两周。

一旦成功，真正的工作就从学习如何为 DSP 编写快速代码、如何管理内部存储器、DMA、中断和所有此类内容开始。

最后，这是非常值得的，因为您解锁了一个令人难以置信的快速 DSP，如果分配正确的工作，它可以轻松超越 Cortex-A8。最重要的是，您可以访问图像协处理器，从而进一步减轻计算负担。然后有一个完整的 ARM9 CPU 与 DSP 紧密耦合，它也处于空闲状态并等待使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T12:42:32.113

是的，你可以，但如果它不是[这个 OpenCV 端口项目](http://code.google.com/p/opencv-dsp-acceleration/)的一部分，你将不得不自己实现算法。

BeagleBoard 的 DSP 应该足够强大，可以处理不太大的图像（320x240，也许是 640x480），但是如果您想要最佳吞吐量，则必须在实现中处理定点算法等。

**编辑：为什么定点**

TI C6xxx DSP 有两种类型：较小的数字 (C64xx) 没有硬件浮点单元，而较大的数字 (C67xx) 有一个。这与英特尔等台式机 CPU 不同。

BeagleBoard-xm 嵌入了没有浮点单元的 C64xx。因此，每当您调用对浮点数进行运算的数学函数时，设备都会模拟浮点计算，这很慢。相反，当您在定点算术中实现这些操作时，将获得最大吞吐量，因为您在整数类型上调用本机操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T12:17:24.893

像 beagle board 这样的异构平台中的编程模型通常是将应用程序的计算部分从 GPP (ARM) 卸载到 DSP。您将需要用于 c64x 的 dsp 内核驱动程序和编译器。有关详细信息，请查看 DSP BIOS 编程指南： http: [//omapedia.org/wiki/DSPBridge_Project](http://omappedia.org/wiki/DSPBridge_Project)

如果您还没有考虑过，我建议您尝试使用 cortex A8 上的 NEON 来测试您的图像处理算法，看看您会获得什么样的性能提升。在不需要 DSP 驱动程序/编译器的情况下，这很容易用 C 语言编程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-17T22:01:08.010

不适用于ARM设备，但是对于搜索“DSP”和“OpenCV”后登陆这里的人来说，对于基于x86的服务器的高性能，一个不错的选择是TI c66x CPU系列，它具有32位定点和浮点指令. OpenCV 已被移植到 c66x 加速器卡并且运行没有问题：

[http://processors.wiki.ti.com/index.php/C66x_opencv](http://processors.wiki.ti.com/index.php/C66x_opencv)

# android - Android AutoCompleteTextView 建议出现半屏

> ID：15497082
> 
> 赞同：0
> 
> 时间：2013-03-19T10:35:47.900
> 
> 标签：android, layout

我在`AutoCompleteTextView`屏幕的一侧有一个。这是 XML。

```
<AutoCompleteTextVie
        android:id="@+id/location"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:hint="Location"/> 
```

这是我正在使用的适配器。

```
locationsAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, this.locations); 
```

不幸的是，建议出现在屏幕的一半，例如“厨房餐桌”显示为“厨房”。

此外，当我将按钮进一步向左移动以使其停留在屏幕上时，下拉菜单的宽度被截断为按钮的宽度，这比许多文本选项要小。

有什么建议么？

我正在使用 HTC Sensation XL，不知道这是否与设备相关。

相关问题：[AutoCompleteTextView 下拉菜单出现在编辑字段上方而不是下方](https://stackoverflow.com/questions/7800537/autocompletetextview-drop-down-appears-above-the-edit-field-instead-of-beneath?rq=1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:48:47.973

对不起，伙计们......我应该只是查找文档！

```
android:dropDownWidth="200dp"
android:dropDownHorizontalOffset="-30dp" 
```

可能有更好的方法来做到这一点......如果你有最喜欢的，请告诉我。

# .net - 为什么 CAS 2.0 框架不起作用？

> ID：15497096
> 
> 赞同：0
> 
> 时间：2013-03-19T10:36:23.460
> 
> 标签：.net, .net-2.0, code-access-security

我正在使用框架 2.0 中的 CAS（我知道它已经过时了）。

我有以下代码，我正在努力崩溃。我在 2.0 框架中编译了项目：

```
 using System;
 using System.Security;
 using System.Security.Permissions;

 namespace Authenticode
 {
    class Program
    {
         public static void DoSthmUnmanaged()
         {
             SecurityPermission perm = new SecurityPermission(SecurityPermissionFlag.UnmanagedCode);
             perm.Demand();
         }

         public static void Main(string[] args)
         {
              Program.DoSthmUnmanaged();

              Console.Write("Press any key to continue . . . ");
              Console.ReadKey(true);
         }
     }
  } 
```

我将`exe`文件复制到网络驱动器，然后打开“mscorcfg.msc”并从网络驱动器评估程序集 - 代码组`Machine\All_Code\LocalIntranet_Zone`是预期的。当我从网络执行它时，一切正常，但我不明白！

它应该抛出异常，因为来自 LocalIntranet 的代码没有运行非托管代码的权限。为什么它有效？

![在此处输入图像描述](../Images/4d06b84aebe1ec2f19b50675c49e95a4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:44:54.020

如果您的机器安装了 3.5 SP 1，请记住它是在 2.0 之上构建的，并且正是该 Service Pack 将 exe 从网络共享运行切换为以完全信任运行。

来自[.NET Framework 版本 3.5 SP 1 中的新增功能](http://msdn.microsoft.com/en-us/library/cc713697%28VS.90%29.aspx)：

> 通过完全信任运行，从网络共享打开的托管应用程序具有与本机应用程序相同的行为。

# microsoft-metro - Windows 8 Metro 应用的手风琴控制

> ID：15497106
> 
> 赞同：1
> 
> 时间：2013-03-19T10:36:52.300
> 
> 标签：microsoft-metro, custom-controls

如何在 XAML 中为 Windows Metro 应用程序创建 Accordion 控件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-19T06:05:21.963

创建手风琴的技术之一是使用 [`ZeroProximity.Accordion`](https://www.nuget.org/packages/ZeroProximity.Accordion/). [它是Silverlight Toolkit](https://silverlight.codeplex.com/) `<Accordion>`控件的一个端口。

您可以通过以下方式将此包添加到您的项目中

*   包管理器控制台：`PM> Install-Package ZeroProximity.Accordion`

*   NuGet 包管理器 UI

*   NuGet 网站：[https ://www.nuget.org/packages/ZeroProximity.Accordion/](https://www.nuget.org/packages/ZeroProximity.Accordion/)

* * *

只需在 XAML 文件的顶部添加一个引用：

```
xmlns:controls="using:ZeroProximity.Controls" 
```

然后你可以通过使用来使用控件`<controls:...`

`<controls:Accordion>...</controls:Accordion>`等
`<controls:AccordionItem>...</controls:AccordionItem>`。

* * *

这是一个简单的示例，可以帮助您入门：

```
<controls:Accordion HorizontalAlignment="Stretch" SelectionMode="ZeroOrOne">                       
    <controls:AccordionItem Header="IPL Teams" FontSize="35">
        <controls:AccordionItem.Content>
            <StackPanel>
                <TextBlock Text="India"></TextBlock>
                <TextBlock Text="Australia"></TextBlock>
                <TextBlock Text="Bangladesh"></TextBlock>
                <TextBlock Text="Pakistan"></TextBlock>
            </StackPanel>
        </controls:AccordionItem.Content>
    </controls:AccordionItem>
    <controls:AccordionItem Header="IPL Teams" FontSize="35">
        <controls:AccordionItem.Content>
            <StackPanel>
                <TextBlock Text="India" ></TextBlock>
                <TextBlock Text="Australia"></TextBlock>
                <TextBlock Text="Bangladesh"></TextBlock>
                <TextBlock Text="Pakistan"></TextBlock>
            </StackPanel>
        </controls:AccordionItem.Content>
    </controls:AccordionItem>
</controls:Accordion> 
```

*截至编辑时（2016 年 12 月 1 日），没有关于此软件包的官方文档或网站。

# java - Java相当于PHP str_word_count？

> ID：15497121
> 
> 赞同：0
> 
> 时间：2013-03-19T10:37:17.867
> 
> 标签：java, php, word-count

**注意**：我不是在这里寻找 Java 中的字数统计算法。我在问在哪里可以找到`str_word_count`PHP 源代码。

我希望将 PHP 函数重新创建（*逐字逐行*）[`str_word_count`](http://php.net/manual/en/function.str-word-count.php)作为 Java 方法：

```
public class PhpWordCounter {
    public int strWordCount(String str) {
        // The exact algorithm used in PHP's str_word_count here...
        // The str_word_count method takes an optional parameter
        // "format", which, if 0, returns the number of words.
        // This is the portion of the routine that I will actually
        // be mimicking.
    }
} 
```

我刚刚下载了 PHP 5.3.23 的源代码（tarball）并解压。我寻找`str_word_count`并没有找到任何东西，所以我什至不确定要寻找什么，更不用说要搜索什么文件了。有人有什么想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T10:49:09.370

那么你应该看起来更好:) 它应该在最新的稳定分支[http://www.php.net/manual/en/function.str-word-count.php中可用](http://www.php.net/manual/en/function.str-word-count.php)

```
find . -type f -exec grep -l 'str_word_count' {} \;

./ext/standard/php_string.h
./ext/standard/tests/strings/str_word_count1.phpt
./ext/standard/tests/strings/str_word_count.phpt
./ext/standard/basic_functions.c
./ext/standard/string.c 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:46:26.280

我不知道是否有现成的函数...但是：将字符串按空格拆分为数组获取数组的长度

字符串 vals[] = myString.split("\s+"); int wordCount = vals.length;

# share - Alfresco webscripts：随机 http 400

> ID：15497122
> 
> 赞同：0
> 
> 时间：2013-03-19T10:37:19.660
> 
> 标签：share, alfresco, spring-surf

最近好像遇到很多随机的http 400（坏请求）

它们都是通过代理从 Share 中的 ajax 调用引发的：“ *host* /share/proxy/alfresco/”它们大部分时间都在加载或刷新新页面时发生。它们可以在 Alfresco 现有的 ajax 请求中发生，也可以通过我们的自定义发生。

有什么理由可以突然解释为什么我们可以看到这一点？

以下是失败请求的示例：

```
Request URL:http://foobar.com/share/proxy/alfresco/slingshot/profile/avatar/me%40company.com
Request Method:GET
Status Code:400 Bad Request
Request Headersview parsed
GET /share/proxy/alfresco/slingshot/profile/avatar/me%40company.com HTTP/1.1
Host: test04.componize.com
Connection: keep-alive
Cache-Control: no-cache
Pragma: no-cache
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.172 Safari/537.22
Accept: */*
Referer: http://foobar.com/share/page/site/somesite/somepage?nodeRef=workspace://SpacesStore/85c4f863-343a-4668-b2cc-6338734c6108
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8,fr;q=0.6,ja;q=0.4
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
Cookie: JSESSIONID=7A8588F21E2E1A8D27A67DEFACA688A7; alfLogin=1363695391; alfUsername2="cGF0cmljay5sdXNzYW5AY29tcG9uaXplLmNvbQ=="; SS_MID=92c6f733-7a8a-4fbd-876d-a8d4e85ed663h49mh6mw; __utma=129970003.1515757632.1341479871.1359127257.1360571858.15; __utmz=129970003.1341479871.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)
Response Headersview parsed
HTTP/1.1 400 Bad Request
Date: Tue, 19 Mar 2013 12:29:06 GMT
Server: Apache-Coyote/1.1
Content-Length: 0
Connection: close
Content-Type: application/x-msdos-program 
```

**编辑：添加截图**

**头像不显示：**

![在此处输入图像描述](../Images/0dd59f35e7d05685e4a4a4426e78eb14.png)

**徽标不显示：**

![在此处输入图像描述](../Images/2f7aa2e9308557e8abc540d48158f4dd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:42:27.173

一种可能的原因是您的硬件资源使用情况。

几年前我面临的一个问题是服务器设置。我有一个四核 opeteron 服务器，有 4 GB 的 RAM 和 Alfresco + Share + MySQL（+ 一些 linux 守护进程，如 apache 之类的东西）。它经常会失败，我不得不重新启动服务器，通常我有很多错误 400 和 500。

当我将 MySQL 移到另一台物理机器上时，情况好多了。也许您的问题类似，您可以升级硬件来解决问题。

如果你有一个备用服务器来转储 sql 并在 Alfresco 服务器上关闭它并在备用服务器上启动它，也许你可以测试你是否收到更少的失败请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T10:49:00.010

从共享连接到 alfresco 的默认 url 是

`http://localhost:8080/alfresco/`那是你的“ `host/share/proxy/alfresco/`”

确保您的主机和端口对于露天和共享都是正确的。

如果要更改默认连接，可以在`share-config-custom.xml`

```
<config evaluator="string-compare" condition="Remote">
      <remote>
         <endpoint>
            <id>alfresco-noauth</id>
            <name>Alfresco - unauthenticated access</name>
            <description>Access to Alfresco Repository WebScripts that do not require authentication</description>
            <connector-id>alfresco</connector-id>
            <endpoint-url>http://host_name:80/alfresco/s</endpoint-url>
            <identity>none</identity>
         </endpoint>

         <endpoint>
            <id>alfresco</id>
            <name>Alfresco - user access</name>
            <description>Access to Alfresco Repository WebScripts that require user authentication</description>
            <connector-id>alfresco</connector-id>
            <endpoint-url>http://host_name:80/alfresco/s</endpoint-url>
            <identity>user</identity>
         </endpoint>

         <endpoint>
            <id>alfresco-feed</id>
            <name>Alfresco Feed</name>
            <description>Alfresco Feed - supports basic HTTP authentication via the EndPointProxyServlet</description>
            <connector-id>http</connector-id>
            <endpoint-url>http://host_name:80/alfresco/s</endpoint-url>
            <basic-auth>true</basic-auth>
            <identity>user</identity>
         </endpoint>
      </remote>
   </config> 
```

在我们的示例中，alfresco 使用端口 80 在 host_name 中运行。希望这会对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T20:25:01.680

最后这是一些服务器端问题，与 Alfresco 无关。

# magento - Magento：为什么我不能从管理网格更新所有产品？

> ID：15497123
> 
> 赞同：1
> 
> 时间：2013-03-19T10:37:21.797
> 
> 标签：magento

我进入管理产品，全选然后更新属性。Magento 流失并成功更新了“999”产品。这是一个奇数！我选择了 3073 个产品，为什么只更新了 999 个？

我现在在几个项目中注意到了这一点，对于可以从管理网格更新的内容，“集合大小”似乎有限制。在我自己的代码中，我还注意到返回集合大小的问题，尽管在这个项目中它不是 999 - 其他一些任意数字。

他们都没有丢失 SKU，所以我不认为第 100 件产品会以某种方式中断收藏选择。

有没有其他人经历过这种情况，而且，我做错了什么？

# java - 声明一个没有数组列表的数组

> ID：15497124
> 
> 赞同：0
> 
> 时间：2013-03-19T10:37:24.047
> 
> 标签：java, android

在android中声明数组时出现语法错误。我的代码看起来像

```
public interface Constants extends BaseColumns {
  String s[] = new String[5];  
  s[0]="ABC";  
  s[1]="DEF";  
  s[2]="GHI";  
  s[3]="JKL";  
  s[4]="MNO";
} 
```

我不想使用数组列表

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T10:40:23.650

尝试

字符串 s[] = 新字符串[]{"ABC","DEF","GHI"};

我认为它会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:42:52.007

```
String[] array = {"ABC", "DEF", "IJK", "LMN"  }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T10:52:40.853

在您之前的同[一个问题](https://stackoverflow.com/questions/15495891/array-assignment-syntax-errorandroid)中。

这是您的完整代码：

```
public interface Constants extends BaseColumns {    

  String[] s = new String[5];  
  s[0]="ABC";  
  s[1]="DEF";  
  s[2]="GHI";  
  s[3]="JKL";  
  s[4]="MNO";

} 
```

这段代码的错误是你不能在声明中写表达式。

您必须扭曲静态块：

```
public interface Constants extends BaseColumns {    

  static{
    String[] s = new String[5];  
    s[0]="ABC";  
    s[1]="DEF";  
    s[2]="GHI";  
    s[3]="JKL";  
    s[4]="MNO";
  }
} 
```

静态块有助于初始化静态数据成员，就像构造函数有助于初始化实例成员一样

[在http://www.javatutorialhub.com/java-static-variable-methods.html#MxcOXP70VJUv22Jg.99](http://www.javatutorialhub.com/java-static-variable-methods.html#MxcOXP70VJUv22Jg.99)阅读更多内容

# debian - 虚拟盒子。net 使用无效命令

> ID：15497125
> 
> 赞同：-2
> 
> 时间：2013-03-19T10:37:27.337
> 
> 标签：debian, virtualbox

Debian Squeeze 作为客人。我尝试设置共享文件夹。从手册中：在命令提示符下键入 net use x:\vboxsvr\MySharedFiles。但我得到错误：net use: invalid command。我安装了网络，但它不知道“使用”命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T10:45:51.887

`net use x: \vboxsvr\MySharedFiles`是用于想要访问共享的 Windows 来宾的命令，对于 linux 来宾，您应该按照[此处](https://help.ubuntu.com/community/VirtualBox/SharedFolders)的说明进行操作。

# pdf - 如何更改pdf文件的分辨率

> ID：15497127
> 
> 赞同：1
> 
> 时间：2013-03-19T10:37:29.287
> 
> 标签：pdf, mpdf

我使用 mpdf 从我的应用程序中输出 pdf 文件。按照手册，我正在创建转换为 pdf 的 HTML 代码。我注意到pdf文件的宽度约为800px。有没有可能改变它？我想在文档中包含 1200 像素宽度的图像。

# android - Spinner OnItemSelected 不适用于自定义行布局

> ID：15497131
> 
> 赞同：2
> 
> 时间：2013-03-19T10:37:45.787
> 
> 标签：android, android-layout, android-spinner

我正在尝试为微调器使用自定义行布局，如下所示：

```
String[] countryArr={"USA","Canada","Other"};
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,R.layout.row, R.id.text, countryArr);
spinnerCountry.setAdapter(adapter); 
```

* * *

**行.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#fff"
    android:orientation="horizontal"
    android:paddingBottom="10dp"
    android:paddingLeft="20dp"
    android:paddingTop="10dp" >

    <TextView
        android:id="@+id/text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="@color/BLACK"
        android:textSize="26dp" />

    <RadioButton
        android:id="@+id/radio"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true" />

</RelativeLayout> 
```

* * *

**和java代码：**

```
spinnerCountry.setOnItemSelectedListener(new MyOnItemSelectedListener());

public class MyOnItemSelectedListener implements OnItemSelectedListener {

    public void onItemSelected(AdapterView<?> parent, View view, int pos,
            long id) {
        selected = parent.getItemAtPosition(pos).toString().trim();
        Log.i("MyOnItemSelectedListener","selected ="+selected);

        }
    @SuppressWarnings("rawtypes")
    public void onNothingSelected(AdapterView parent) {
        etCountry.setText("");
    Log.i("MyOnItemSelectedListener","nothing selected");
    }
} 
```

当我启动应用程序时，我在日志中得到这个：`"selected =Other"`因为它是默认的。

但是当我单击微调器时，我得到如下所示的屏幕并且`onItemSelected`不起作用，因此始终显示警报框，允许选择所有 3 个值但不执行任何操作。

**主要的.xml**

```
<com.Mypackage.MySpinner
                    android:id="@+id/SpinnerCountry1"
                    android:layout_width="45dp"
                    android:layout_height="59dp"
                    android:layout_marginLeft="160dp"
                    android:background="@drawable/selector_slim_spinner"
                    android:clickable="true"
                    android:entries="@array/blankarray" /> 
```

* * *

```
public class MySpinner extends Spinner {

    private Context _context;

    public MySpinner(Context context, AttributeSet attrs) {
        super(context, attrs);
        _context = context;
    }

    public MySpinner(Context context) {
        super(context);
        _context = context;
    }

    public MySpinner(Context context, AttributeSet attrs, int defStyle) {
        super(context);
        _context = context;
    }

    @Override
    public View getChildAt(int index) {
        View v = new View(_context);
        return v;
    }

} 
```

**请注意，**如果我不对微调器使用自定义行布局，则`OnItemSelected`可以正常工作。

任何帮助表示赞赏。

![截屏](../Images/0382d83bd153a7dff43b25c3f5761661.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T10:53:43.113

将您的 row.xml 更改为

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#fff"
    android:orientation="horizontal"
    android:paddingBottom="10dp"
    android:paddingLeft="20dp"
    android:paddingTop="10dp" >

<TextView
    android:id="@+id/text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textColor="@color/BLACK"
    android:textSize="26dp"
    android:clickable="false"
    android:focusable="false"
    android:focusableInTouchMode="false" />

<RadioButton
    android:id="@+id/radio"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true" 
    android:clickable="false"
    android:focusable="false"
    android:focusableInTouchMode="false"/>

</RelativeLayout> 
```

并尝试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:43:14.767

您是否尝试使用自定义 ArrayAdapter 在 RadioButton 上设置侦听器？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-05T04:19:29.147

我想，这可能已经完成了工作

在 onCreate 上初始化微调器后。

```
yourspinner.setOnItemSelectedListener(this); 
```

# java - 当我尝试在当前和设置时间之后执行事件时，Timer 类出错

> ID：15497132
> 
> 赞同：0
> 
> 时间：2013-03-19T10:37:47.710
> 
> 标签：java, android, timer, alarm

我只想扫描我的时间何时等于当前时间，并使用计时器，但是当单击复选框并且我的时间等于当前时间时......它会出现致命错误。还有其他解决方案吗？

```
 privae int currentHourOfDay,currentMinutes;
        private int mHourOfDay, mMinutes;
        .....

        chk1 = (CheckBox) findViewById(R.id.checkBox1);
        chk1.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            if (chk1.isChecked()) {

                h = tv.getText().toString(); //get text from hours input
                m = tv2.getText().toString(); //get text from miutes input
                mHourOfDay = Integer.parseInt(h);
                mMinutes = Integer.parseInt(m);

                System.out.println(mHourOfDay);
                System.out.println(mMinutes);

                final Timer timer = new Timer();

                timer.schedule( new TimerTask() {
                    public void run() { 

                Calendar cal = Calendar.getInstance();
                currentHourOfDay = cal.get(Calendar.HOUR_OF_DAY);
                currentMinutes = cal.get(Calendar.MINUTE);

                System.out.println(currentHourOfDay);
                System.out.println(currentMinutes);

                Integer x = mHourOfDay;
                Integer y = currentHourOfDay;
                Integer x1 = mMinutes;
                Integer y1 = currentMinutes;

                if (x.equals(y) && x1.equals(y1)) {

                    Toast toast = Toast.makeText(getApplicationContext(),
                            "Now it equels!!", Toast.LENGTH_SHORT);
                    toast.show();
                    timer.cancel();

                } 
            }}, 0, 1000);

            } else {
                System.out.println("alarm is off");
            }
        }
    }); 
```

当我的时间等于当前时间时，我必须使用其他一些方法来解决我的任务做一些事件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:41:14.147

在 UI 线程上更新 ui。在 ui 线程上显示 toast 消息。

只需在下面显示 toast 的位置添加以下内容。

```
 runOnUiThread(new Runnable() //update ui here
         {
          public void run() 
          {
         Toast.makeText(getApplicationContext(),
                        "Now it equels!!", Toast.LENGTH_SHORT).show();
          }
         }); 
```

定时器任务示例

```
_t.scheduleAtFixedRate( new TimerTask() {
    @Override
    public void run() {
         //do something
        runOnUiThread(new Runnable() //update ui here
         {
          public void run() 
          {
         //display toast here.
          }
         });
    }
}, 1000, 1000 ); 
```

# c# - 在c#中使用重定向（“>>”）时如何使用String [] args？

> ID：15497135
> 
> 赞同：3
> 
> 时间：2013-03-19T10:37:48.210
> 
> 标签：c#, debugging, redirect, command-line-arguments

我有一个程序 test.exe，它接收参数并在我作为输入提供的特定 .txt 路径中写入一些日志。我想添加这个命令：

```
text.exe /r >> textFile.txt 
```

含义：构建项目并将日志写入 textFile.txt（不存在）我不确定它是如何工作的？是`args[2] = ">>"`和`args[3] = textFile.txt`？我怎样才能使用它的名字？？使困惑！

编辑：当我调试并查看本地人时，我只看到`/r`但`>> textFile.txt`根本没有出现。如何从命令行获取它作为参数？

编辑2：

理解它应该自动重新定向，但是当我这样做时它只是失败并将我发送到一行：`Console.CursorLeft = 0;`这意味着当我没有控制台时我正在尝试用光标做一些事情......只是。文本文件

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T10:39:39.360

不，命令外壳*只会*传递`/r`到`test.exe`，它会自动将输出重定向到附加到`textFile.txt`。您的应用程序看不到这一点 - 至少不是简单的。

如果您只是让您的程序写入标准输出（例如使用`Console.WriteLine`），那么输出将在`textFile.txt`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T10:40:27.830

命令提示符使用“>>”作为特殊命令，告诉它将输出重定向到以下文件。

你不需要在你的程序中处理这个；只需进行正常`Console.WriteLine()`呼叫，输出将被重定向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T10:56:33.297

When you run your application in command prompt and the pass parameters like:

```
c:\>test.exe /r >> textFile.txt 
```

the command prompt understands that it need to pass only the parameter /r to our program the file name after >> is for his usage. e.g try running following command in your command prompt

```
c:\>ipconfig 
```

and

```
c:\>ipconfig >> text.txt
c:\>notepad.exe text.txt 
```

you will find for first time output is shown on screen and the second time it was written in file name you gave by command prompt itself.

# ruby-on-rails - 使用 Rails ActiveRecord 进行结构化

> ID：15497136
> 
> 赞同：1
> 
> 时间：2013-03-19T10:37:48.647
> 
> 标签：ruby-on-rails, ruby, activerecord

我实际上是 Ruby 和 Rails 框架的初学者，这就是为什么我决定在做一些违反框架约定的事情之前寻求帮助的原因。

我有相当扎实的`OO`编程背景，而且我对初学者->中级 SQL 查询非常熟悉。但是，我一直无法`ActiveRecord`理解 Rails 提供的类。我的直觉是完全放弃 ActiveRecord 类，并手动编写我自己的 SQL 查询并将它们包装在模型中。然而，我知道 ActiveRecords 是 Rails 框架中相当重要的一部分，避免它们只会让我在未来感到痛苦。

以下是我的`MySQL`模式（我稍后会写`Rails Migration`）。我会尽量让这个问题保持简洁，但我可能需要介绍一些背景知识来解释我为什么要像我一样对模式进行建模。我并没有过分依赖它，所以如果人们对结构有更好的想法，那就太好了。

```
-- Users table is a minimalized version of what it probably will be, but contains all pertinent information
CREATE TABLE IF NOT EXISTS users (
    id          INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
    name        VARCHAR(20) UNIQUE NOT NULL
) Engine=InnoDB;

CREATE TABLE IF NOT EXISTS hashtags (
    id          INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
    tag         VARCHAR(30) UNIQUE NOT NULL
) Engine=InnoDB;

CREATE TABLE IF NOT EXISTS content_mentions (
    content_id  INT UNSIGNED NOT NULL,
    user_id     INT UNSIGNED NOT NULL, 
    INDEX(content_id),
    FOREIGN KEY(user_id) REFERENCES users(id) ON DELETE CASCADE
) Engine=InnoDB;

CREATE TABLE IF NOT EXISTS content_hashtags (
    content_id  INT UNSIGNED NOT NULL,
    hashtag_id  INT UNSIGNED NOT NULL,
    INDEX(content_id),
    FOREIGN KEY(hashtag_id) REFERENCES hashtags(id) ON DELETE CASCADE
) Engine=InnoDB;

CREATE TABLE IF NOT EXISTS content_comments (
    id          INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
    user_id     INT UNSIGNED NOT NULL,
    content_id  INT UNSIGNED NOT NULL,
    text_body   VARCHAR(1000) NOT NULL,
    date_created TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY(user_id) REFERENCES users(id) ON DELETE CASCADE,
    INDEX(content_id)
) Engine=InnoDB;

CREATE TABLE IF NOT EXISTS polls (
    id          INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
    user_id     INT UNSIGNED NOT NULL,
    question    VARCHAR(100) NOT NULL,
    text_body   VARCHAR(1000) NOT NULL,
    date_created TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY(user_id) REFERENCES users(id) ON DELETE CASCADE
) Engine=InnoDB;

CREATE TABLE IF NOT EXISTS poll_options (
    id          INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
    poll_id     INT UNSIGNED NOT NULL,
    content     VARCHAR(150) NOT NULL,
    active      VARCHAR(1) NOT NULL DEFAULT 'Y',
    FOREIGN KEY(poll_id) REFERENCES polls(id) ON DELETE CASCADE
) Engine=InnoDB;

CREATE TABLE IF NOT EXISTS poll_answers (
    poll_option_id  INT UNSIGNED NOT NULL,
    user_id     INT UNSIGNED NOT NULL,
    FOREIGN KEY(poll_option_id) REFERENCES poll_options(id) ON DELETE CASCADE,
    FOREIGN KEY(user_id) REFERENCES users(id) ON DELETE CASCADE,
    PRIMARY KEY(poll_option_id,user_id)
) Engine=InnoDB; 
```

正如架构所示，这是一个非常基本的网络投票应用程序。每个投票都有多个选项，每个选项可以有不同用户的多个答案。现在，奇怪的部分可能是`content_*`桌子。我可以解释这一点的最好方法可能是将其描述为一个`abstract`表格。我以前从来没有真正做过这样的事情，通常关系是在两个或多个显式表之间，我会根​​据需要添加外键。然而，在这种情况下，我最终可能会得到多种不同类型的`content`，所有这些都需要标签/提及/评论。我事先不知道它`content_id`指的是哪个表（代码将适当地处理它接收到的数据），所以我`indexed`现在只是列。`content_*``type`列在某个阶段，因为存在不止一个`content`表，如果两个表都使用自动递增的主键，则可能会有重复`content_id`的条目，但我认为这有点超出了问题的范围。

关于 ActiveRecord 类的结构。第一部分是处理提及/主题标签的解析。我写了一个抽象`Content`类来处理表格的“抽象”方面。它是这样的（为简洁起见，一些解析已被删除）。

```
class Content < ActiveRecord::Base
    self.abstract_class = true;

    # relationships
    belongs_to :user

    has_many :content_mentions;
    has_many :content_hashtags;
    has_many :mentions, { :through => :content_mentions, :source => :user, :as => :content };
    has_many :hashtags, { :through => :content_hashtags, :as => :content };

    # available columns (in the abstract side of things)
    attr_accessible :text_body, :date_created;

    # database hooks
    around_save :around_save_hook

    # parsing
    ENTITY_PATTERN = /removed_for_brevity/iox;

    def render_html()
        # parsing of the text_body field for hashtags and mentions and replacing them with HTML
        # goes in here, but unrelated to the data so removed.
    end

protected

    # Is this the best way to do this?
    def around_save_hook()
        # save the main record first (so we have a content_id to pass to the join tables)
        yield

        # parse the content and build associations, raise a rollback if anything fails
        text_body.scan(ENTITY_PATTERN) do |boundary,token,value|
            m = $~;

            if m[:token] == '@'
                # mention
                unless mentions.where(:name => m[:value]).first
                    mention = User::where(:name => m[:value]).first;
                    next unless mention;

                    raise ActiveRecord::Rollback unless content_mentions.create({ :content_id => id, :user_id => mention.id });
                end
            else
                # hashtag
                unless hashtags.where(:tag => m[:value]).first
                    hashtag = Hashtag.where(:tag => m[:value]).first;

                    unless hashtag
                        hashtag = Hashtag.new({ :tag => m[:value] });
                        raise ActiveRecord::Rollback unless hashtag.save();
                    end

                    raise ActiveRecord::Rollback unless content_hashtags.create({ :content_id => id, :hashtag_id => hashtag.id });
                end
            end
        end
    end 
end 
```

我在这里遇到的主要问题是`around_save_hook`，这是解析和保存关联的最佳位置吗？我将如何做到这一点，以便如果`text_body`更新并且从原始标签中删除了一些主题标签/提及，这些更改将反映在`content_*`关联中，而不仅仅是添加新的主题标签/提及而不检查删除？

其余`ActiveRecord`类定义如下：

```
class Poll < Content
    has_many :poll_options;
    has_many :poll_answers, { :through => :poll_options }

    attr_accessible :user_id, :question;
    validates :text_body, :presence => true, :length => { :maximum => 1000 };
end

class PollOption < ActiveRecord::Base
    belongs_to :poll;
    has_many :poll_answers;

    attr_accessible :content, :active, :poll_id;
end

class PollAnswer < ActiveRecord::Base
    belongs_to :poll_option;
    belongs_to :user;

    attr_accessible :user_id, :poll_option_id;
end

class User < ActiveRecord::Base
    attr_accessible :name;

    validates :name, :presence => true, :length => { :maximum => 20 };
end

class Hashtag < ActiveRecord::Base
    attr_accessible :tag;

        validates :tag, :presence => true, :length => { :maximum => 30 };
end

# Join table for content->users
class ContentMention < ActiveRecord::Base
    belongs_to :user;
    belongs_to :content, { :polymorphic => true };

    attr_accessible :content_id, :user_id;
end

# Join table for content->hashtags
class ContentHashtag < ActiveRecord::Base
    belongs_to :hashtag;
    belongs_to :content, { :polymorphic => true };

    attr_accessible :content_id, :hashtag_id;
end 
```

所以我想我的问题如下：

1.  模式本身是否正确（即它是否非常低效且设计不佳以与 Rails 一起使用？（如果是这样，关于如何纠正它的建议会很棒）
2.  是`Around Save`解析和更新关联的正确位置吗？
3.  我的 ActiveRecords 是否根据当前架构结构正确设置？（特别是我不确定我`polymorphic`是否正确使用了该属性）
4.  我如何向`Poll`实例添加选项/答案，而不重新保存投票的整个内容（从而触发对内容的另一个冗余解析），同时仍然保留一种`OOP`方法？（即选项/答案是通过`Poll`模型中的公共 API 创建的）

如果有人真的很熟悉`Rails`，`Ruby`并且`ActiveRecord`可以让我快速了解他们将如何实现这一点，那就太好了。正如我所说，我以前从未使用过`ActiveRecord`该类，所以我什至不确定这个简单的代码`save()`已经在一次调用中触发了多少原始 SQL 查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T19:10:10.313

这是一个由两部分组成的 railscast，涵盖了实施民意调查/调查应用程序的各个方面。它涵盖了您与模型相关的大部分疑问。

[http://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1)

[http://railscasts.com/episodes/197-nested-model-form-part-2](http://railscasts.com/episodes/197-nested-model-form-part-2)

我会在分配期间通过覆盖 setter 来创建依赖对象`text_body`。

例如：

```
def text_body=(val)
  write_attribute(:text_body, val).tap do |v|
    append_new_tags_and_mentions
  end
end

def append_new_tags_and_mentions
  tag_list, mention_list = extract_tags_and_mentions
  new_mentions = mention_list - mentions.where(name => mention_list).pluck(:name)    
  mentions.concat(*new_mentions) if new_mentions.present?   
  new_tags = tag_list - hashtags.where(tag => tag_list).pluck(:tag)
  hashtags.concat(*new_tags) if new_tags.present?
end

def extract_tags_and_mentions
  tag_list = []
  mention_list = []
  text_body.scan(ENTITY_PATTERN) do |boundary, token, value|
    if token == "@"
      mention_list << value
    else
      tag_list << value
    end
  end
  [tag_list, mention_list]
end 
```

添加一个验证器来检查依赖关系。

在使用 Java/C++/SQL 工作很长时间后，我希望在开始使用 Rails 编程之前知道的一般准则。

*   不要手动编码表生成 SQL

*   使用 db:create rake 任务来创建表

*   Rails 不支持外键。您可以通过验证器强制执行它。

*   不要使用分号来终止行。ruby 的乐趣之一是你没有终止行。

*   不要对 DSL API 参数使用显式哈希。

    使用这个成语

    ```
    belongs_to :content, :polymorphic => true 
    ```

    代替：

    ```
    belongs_to :content, { :polymorphic => true }; 
    ```

*   使用模块而不是继承来重用代码。

*   使用`each`代替`for`

*   学习`map`，`reduce`（即`inject`）数组上的函数。

# ruby-on-rails - 具有相同关联模型的多个 has_many - activeadmin 表单

> ID：15497141
> 
> 赞同：0
> 
> 时间：2013-03-19T10:37:53.953
> 
> 标签：ruby-on-rails, activeadmin

我有一个模型叫游戏。它有两个关联：与 :categorytoptens 和 :categorygames：

```
has_many :categorytoptens
has_many :categories, :through => :categorytoptens, :dependent => :destroy

has_many :categorygames
has_many :categories, :through => :categorygames, :dependent => :destroy 
```

要编辑类别，我将其添加到我的 activeadmin games.rb 文件中：

```
 f.input :categories, :as => :check_boxes, :collection => Category.all, :member_label => :navititle_de 
```

它显示类别模型中所有类别的复选框列表，并将选择保存在类别游戏中。所以，一切正常。

但是：当我在游戏模型中更改 :categorytoptens 和 :categorygames 的顺序时，类别保存在 categorytoptens 中：

```
has_many :categorygames
has_many :categories, :through => :categorygames, :dependent => :destroy

has_many :categorytoptens
has_many :categories, :through => :categorytoptens, :dependent => :destroy 
```

我的问题：

a.) 是否“允许”多个 has_many 具有相同的模型关联？模型关联是否相互“覆盖”？b.) 有没有办法指定要在 activeadmin 中编辑的模型？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:49:28.747

好吧，您不应该定义两个具有相同名称的 has_many 关联！永远不要尝试重命名您的关联

```
has_many :categorygames
has_many :games_categories, :through => :categorygames, :dependent => :destroy

has_many :categorytoptens
has_many :top_ten_categories, :through => :categorytoptens, :dependent => :destroy 
```

A）您可以定义两个具有相同名称但后继的关联，并覆盖前一个。为每个关联尝试一些好听的名称（uniq）

B) 需要更多信息，您想在活动管理员中管理资源吗？

尝试

```
ActiveAdmin.register YourResourceName do
end 
```

您也可以为您的资源设置自定义名称，请点击此链接[http://activeadmin.info/docs/2-resource-customization.html#rename_the_resource](http://activeadmin.info/docs/2-resource-customization.html#rename_the_resource)

# struts2 - Action Message and action Error is not forwarding to the different action in struts2.3.12

> ID：15497158
> 
> 赞同：1
> 
> 时间：2013-03-19T10:38:43.527
> 
> 标签：struts2

我正在使用最新的 struts 2.3.12 版本。

我的**struts.xml**

```
<action name="*ContractorDetail" class="waid.config.contractor.ContractorDetailAction" method="{1}">
            <result name="ContractorDetailScreen" type="tiles">ShowContractorDetailScreen</result>

            <result type="chain" name="success">
               <param name="actionName">ContractorSummary</param>
               <param name="namespace">/app</param>
            </result>
            <result name="input" type="redirectAction">
                <param name="actionName">ContractorSummary</param>
                <param name="namespace">/app</param>
            </result>
            <result name="error" type="redirectAction">
                <param name="actionName">ContractorSummary</param>
                <param name="namespace">/app</param>
            </result>
            <result name="deleteDependency" type="chain">
                <param name="actionName">ContractorSummary</param>
                <param name="namespace">/app</param>
            </result>
        </action>
        <action name="*ContractorSubmit" class="waid.config.contractor.ContractorSubmitAction" method="{1}">

            <result type="chain" name="success">
               <param name="actionName">modifyContractorDetail</param>
               <param name="namespace">/app</param>
            </result>
            <result name="error" type="tiles">ShowContractorDetailScreen</result>
            <result name="input" type="tiles">ShowContractorDetailScreen</result>
        </action> 
```

在我的提交操作中，我设置了 actionMessage 和操作 errorMessage，它们将转发到 detailsAction。在以前版本的 struts(2.1) 中，动作消息显示在 jsp 中。但是在升级到 struts 2.3.12 版本之后，动作消息和动作错误都没有出现在 jsp 中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-26T15:02:30.187

尝试在 struts.xml 中添加这些行以恢复原始行为

```
<constant name="struts.xwork.chaining.copyErrors" value="true"/>
<constant name="struts.xwork.chaining.copyFieldErrors" value="true"/>
<constant name="struts.xwork.chaining.copyMessages" value="true"/> 
```

我从这里获取了解决方案：http: [//struts.apache.org/release/2.3.x/docs/chaining-interceptor.html](http://struts.apache.org/release/2.3.x/docs/chaining-interceptor.html)

# oracle - 如何构建 db 表以存储 0;20;40;60;80 或 0;50;100;150;200;250;... 等范围

> ID：15497159
> 
> 赞同：1
> 
> 时间：2013-03-19T10:38:44.467
> 
> 标签：oracle, database-design, relational-database, database-schema

我想将以下范围存储在一个表中，template01 中的项目数是 6，第二个是 4。我们如何构造表来存储这些信息。将这些值显示为逗号分隔或为每个范围值设置一列将是我的最后一个选择。您能否帮助了解如何构建表格以存储以下信息。

```
Template01      0      10       20         30      40       50
Template02      0      50      100        150
Template03      0     100      200        300     400      500      600 
```

基本上，我想将这些范围存储为模板，然后用它来说明如果行李重量在 0 到 10 之间，每公斤的价格为 5 美元，如果是 10 到 20 美元，则每公斤的价格为 4.8 美元等

这就是模板的使用方式，

```
Domain: XYZ
Template01      0      10       20         30      40       50
Increment01%   125%    120%      115%       110%    105%    100%

Domain: ABC, am using or picking the same template 'Template01' but Increment% 
will be different for different domain, hence

Template01      0      10       20         30      40       50
Increment02%   150%    140%      130%       120%    110%    100% 
```

想法是，我想存储重量休息的模板，然后我想与不同的 Increment% 相关联。因此，当用户选择一个重量中断模板时，可以显示所有适用于该模板或为该模板配置的增量百分比值，供用户选择。

```
Template01      0      10       20         30      40       50
Increment01%   125%    120%      115%       110%    105%    100%  [Choice 1]
Increment02%   150%    140%      130%       120%    110%    100%  [Choice 2] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T10:53:13.200

标准方法是：

```
Template_Name  Weight_From  Weight_To  Price
-------------  -----------  ---------  -----
Template01     0            10         5
Template01     10           20         4.8
...
Template01     40           50         ...
Template01     50           (null)     ...
Template02     0            50         ...
...
Template03     500          600        ...
Template03     600          (null)     ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T17:46:16.043

对于规范化模式，您需要有用于模板、增量、模板权重和增量因子的表。

```
 create table luggage_weight_template (
   luggage_weight_template_id number primary key,
   template_name varchar2(100) unique);

 create table luggage_increment (
   luggage_increment_id number primary key,
   increment_name varchar2(100), 
   luggage_weight_template_id  references luggage_weight_template(luggage_weight_template_id)); 

 create table template_weight (
   template_weight_id number primary key,
   luggage_weight_template_id references luggage_weight_template(luggage_weight_template_id),
   weight_from  number not null);

 create table increment_factor (
   increment_factor number primary key,
   increment_id references luggage_increment(luggage_increment_id),
   template_weight_id references template_weight(template_weight_id)); 
```

# php - wkhtmltopdf 通过转换相同的文件随机失败

> ID：15497160
> 
> 赞同：0
> 
> 时间：2013-03-19T10:38:54.140
> 
> 标签：php, pdf, wkhtmltopdf

我正在使用 wkhtmltopdf（通过 PHP 包装器）将一些 html 文件转换为 pdf。总而言之，它运行良好，但在 20% 的情况下，它只是在没有任何信息的情况下崩溃。因此，在不更改输入文件的情况下，它有时可以正常工作，有时却不能。

这是我通过失败得到的输出：

```
Could not create PDF:
Could not run command '/www/htdocs/example/projekte/example/test/wkhtmltopdf-amd64' --ignore-load-errors "http://www.example.de/projekte/example/test/ebene/example/lieferschein-geschirr-material/lieferschein-geschirr-material.php?PHPSESSID=250cd07e432cd69eba2aa51054577d63&testmodus=1" /tmp/tmp_WkHtmlToPdf_CkYxRt:
Loading pages (1/5) [> ] 0% [======> ] 10% [============> ] 21% [===============> ] 25% [============================================================] 100% Resolving links (2/5) [============================================================] Page 1 of 1 Counting pages (3/5) [============================================================] Page 1 of 1 Printing pages (5/5) [> ] Preparing [=======> ] Page 1 of 8 [===============> ] Page 2 of 8 [======================> ] Page 3 of 8 [==============================> ] Page 4 of 8 [=====================================> ] Page 5 of 8 [=============================================> ] Page 6 of 8 [====================================================> ] Page 7 of 8 [============================================================] Page 8 of 8 Done 
```

我对此没有任何解释。有谁可能知道这个问题并可以提供帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T13:58:49.277

如我所见，您输入了错误的 o/p 文件。使用它 `/tmp/tmp_WkHtmlToPdf_CkYxRt.pdf`而不是 `/tmp/tmp_WkHtmlToPdf_CkYxRt`ie 你在调用类函数时遇到了一些问题。

# qt - QWebView 通过代理加载 https 页面失败

> ID：15497162
> 
> 赞同：1
> 
> 时间：2013-03-19T10:39:01.913
> 
> 标签：qt, ssl, https

我在通过代理加载 https 页面时遇到问题。问题。
这是用于设置代理的代码：

```
proxy = QNetworkProxy()
proxy.setType(QNetworkProxy.HttpProxy)
proxy.setHostName('127.0.0.1')
proxy.setPort(10001)
QNetworkProxy.setApplicationProxy(proxy) 
```

我确定这不是代理问题。Http页面可以加载成功。
Qt 配置了 SSL 支持。HTTPS 页面可以在没有代理设置的情况下加载。

如何通过代理加载 https 页面？

更新：我想知道是不是证书问题，因为代理是建立在 GAE 上的，并且使用假证书访问 https 页面。但是 Qt 没有输出任何错误日志。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:07:44.670

解决了。
是证书的问题。将证书导入系统范围的证书颁发机构数据库后，可以加载该页面。

# c# - Telerik BusyIndi cator 不显示

> ID：15497169
> 
> 赞同：1
> 
> 时间：2013-03-19T10:39:23.177
> 
> 标签：c#, .net, wpf, wcf, silverlight

我正在使用 WCF 服务

我有这个问题：

当我在异步函数调用开始时从服务器为我的 GridView 检索数据时，我设置了`IsBusy = "True"`. 调用该方法后，我设置`IsBusy = "False"`. 在方法调用期间`RadBusyIndicator`不显示。我无法理解问题所在。

我已经上传了一个有这个问题的简单项目。你能检查一下吗？[下载](http://www.mediafire.com/?pdd99yyju2b4rjp)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T03:19:54.833

如果您的窗口 xaml 不在繁忙指示器内，则它可能不会显示。使用该控件，您需要将繁忙指示器设置为 true 时希望被屏蔽的内容放入指示器标记​​内。如果您的 UserControl 的主要显示项是 Grid，则将网格包装在忙指示符标记中。

```
<UserControl>
  <telerik:RadBusyIndicator IsBusy={Binding Busy}>
      <Grid>
         content...
      </Grid>
   </telerik:RadBusyIndicator>
</UserControl> 
```

这应该会给你你正在寻找的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T11:28:46.173

我在 BackgroundWorker 中移动了加载，你可以试试这个：

```
private void LoadData()
{
    //Activate BudyIndicator
    App.Instance.SetBusy();

    BackgroundWorker worker = new BackgroundWorker();
    worker.DoWork += (o, ea) =>
    {
        ObservableCollection<CustomerModel> LoadedCustomers = null;

        //Create Client
        proxy.ServicesClient client = new proxy.ServicesClient();
        ObservableCollection<Customer> customers = client.GetCustomers();

        LoadedCustomers = new ObservableCollection<CustomerModel>();
        foreach (var item in customers)
        {
            LoadedCustomers.Add(new CustomerModel()
            {
                CustomerId = item.CustomerId,
                Title = item.Title,
                FirstName = item.FirstName,
                MiddleName = item.MiddleName,
                LastName = item.LastName,
                CompanyName = item.CompanyName,
                SalesPerson = item.SalesPerson,
                EmailAddress = item.EmailAddress,
                Phone = item.Phone
            });
        }
        client.Close();

        //Define return value
        ea.Result = LoadedCustomers;
    };
    worker.RunWorkerCompleted += (o, ea) =>
    {
        //Get returned value
        ObservableCollection<CustomerModel> model = ea.Result as ObservableCollection<CustomerModel>;
        if (model != null)
        {
            Customers = model;
        }

        //Desactivate BusyIndicator
        App.Instance.UnSetBusy();
    };
    worker.RunWorkerAsync();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T15:46:30.427

如果您在控制器上使用 IsBusy 属性的绑定，我假设您是这样，那么您必须实现 INotifyPropertyChanged 接口，以便在更改绑定属性的值时通知 UI 该更改并自行更新。您的视图模型应该有一个带有 setter 的属性，如下所示：

```
 public bool Busy
    {
        get{return _Busy;}
        set
        {
           if(value != _Busy)
             _Busy = value;
           OnPropertyChanged("Busy");
        }

    } 
```

这将通知 UI 更改；如果您已经这样做了，那么我将需要查看更多相关代码以提供更多帮助。

在我再次查看您的上一篇文章之后，如果您将 IsBusy 属性设置为字符串值，这是您的问题，因为该属性采用布尔值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T16:32:49.617

好的，我看到了你的问题。代理上的 Close 方法等待异步调用的结果。只需移动您的 client.Close(); 在 GetCustomersCompleted 方法中，这将起作用。（用您的样品测试）

```
private proxy.ServicesClient client = null;
private void LoadData()
{
    App.Instance.SetBusy();

    client = new proxy.ServicesClient();
    client.GetCustomersCompleted += (s, e) =>
    {
        if (e.Error != null)
        {
            throw new Exception();
        }
        else
        {
            Customers = new ObservableCollection<CustomerModel>();

            foreach (var item in e.Result)
            {
                Customers.Add(new CustomerModel()
                    {
                        CustomerId = item.CustomerId,
                        Title = item.Title,
                        FirstName = item.FirstName,
                        MiddleName = item.MiddleName,
                        LastName = item.LastName,
                        CompanyName = item.CompanyName,
                        SalesPerson = item.SalesPerson,
                        EmailAddress = item.EmailAddress,
                        Phone = item.Phone
                    });
            }

            OnPropertyChanged("Customers");
        }
        client.Close();//Close after the return
        App.Instance.UnSetBusy();
    };
    client.GetCustomersAsync();
    //client.Close();
}
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T20:12:01.927

我假设根据您的代码，您希望只将繁忙指示器放在主窗口的内容控件上。我的建议是为主窗口创建一个视图模型并将其用作页面的数据上下文。如上所述，我还将在视图模型上设置一个属性，并设置到该属性的绑定。在视图模型中，您可以对数据存储进行异步调用，并在返回时填充集合属性（推荐 ObservableCollection）并将您的 ListBox 的 IitemsSource 属性绑定到该属性。我希望这有帮助

# socialengine - Flashmessanger 消息未显示在 SocialEngine 详细信息页面中

> ID：15497176
> 
> 赞同：1
> 
> 时间：2013-03-19T10:39:42.320
> 
> 标签：socialengine

我正在使用社交引擎 4.2.0 并面临 flashmessanger 的问题。我正在使用此代码

```
$message =  $this->_helper->flash-messenger->getMessages(); 
```

如果我在控制器中回显该值，它可以工作但不在视图中，我正在使用此代码将其正确分配给我的视图

```
$this->view->success = $message[0]; 
```

有趣的是，如果我将 die 放在前半部分的视图中，它会呼应我的信息，但如果呈现整页，它就不会这样做。我猜我的文件的一些代码正在重置它。

# knockout.js - 使用 Knockout 时有没有更好的方法来编写这个 Jade？

> ID：15497177
> 
> 赞同：1
> 
> 时间：2013-03-19T10:39:43.373
> 
> 标签：knockout.js, pug

我喜欢 Jade 的简洁语法，但是在做一些基本的 Knockout 绑定时，它变得很难看：

```
section
  h2.page-title(data-bind='text: title')
  div(data-bind='foreach: customers')
    .well
      address
        | ID: // there is a space at the end of this line
        span(data-bind='text: id')
        div(data-bind='text: name')
        div(data-bind='text: address.street')
        span(data-bind='text: address.city')
        | , // there is a space at the end of this line
        span(data-bind='text: address.state')
        |   // there is a space at the end of this line
        span(data-bind='text: address.zip') 
```

有几件事很尴尬。首先，所有`div`和`span`标签都挂起`data-bind`的需要似乎迫使许多多行表示呈现为单行的内容。这是 Jade 的一个常见问题，与 Knockout 结合使用会变得更糟。

此外，当我必须像这样拆分行时，我经常遇到三种情况：行尾的空格需要间隔内联元素（由代码中的注释标记）。除非我在代码中添加这样的注释，否则它们在编辑器中看起来与没有空格的行没有什么不同。很容易意外删除它们，或者根本无法判断您是否记得将它们放在应该放置的位置。

这是HTML：

```
<section>
  <h2 data-bind="text: title" class="page-title"></h2>
  <div data-bind="foreach: customers">
    <div class="well">
      <address>
        ID: <span data-bind="text: id"></span>
        <div data-bind="text: name"></div>
        <div data-bind="text: address.street"></div>
        <span data-bind="text: address.city"></span>, <span data-bind="text: address.state"></span>
        <span data-bind="text: address.zip"></span>
      </address>
    </div>
  </div>
</section> 
```

虽然打字更烦人，但它作为 HTML 更具可读性。我已经接近放弃 Jade（至少在 Knockout-heavy 的情况下），但我希望拥有更好 Jade-fu 的人可以提高这个看似常见的用例的可读性。而且我希望可以通过纯 Jade 更改来改进它，因为修改我的数据以包含预先格式化的 id 或城市/州/zip 字符串等不是一种选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-25T12:41:50.590

它仍然远非优雅，但使用   比只留下尾随空格更透明，并且摆脱了对荒谬评论的需要：

```
section
  h2.page-title(data-bind='text: title')
  div(data-bind='foreach: customers')
    .well
      address
        | ID: &nbsp;
        span(data-bind='text: id')
        div(data-bind='text: name')
        div(data-bind='text: address.street')
        span(data-bind='text: address.city')
        | , &nbsp;
        span(data-bind='text: address.state')
        | &nbsp;
        span(data-bind='text: address.zip') 
```

# c# - 在 Sharepoint 2010 中以编程方式在 Web 部件页中显示左侧导航栏

> ID：15497178
> 
> 赞同：0
> 
> 时间：2013-03-19T10:39:45.217
> 
> 标签：c#, sharepoint-2010

我创建了一个名为“XXXX”的团队站点，在该站点下，我以编程方式创建了一个名为“YYYYY”的 Web 部件页面。当我以编程方式创建 Web 部件页面时，它显示了一个左侧导航栏，与父站点“XXXX”中的导航栏相同。有没有办法在我以编程方式创建的 Web 部件页面中显示左侧导航栏？如果是，请尽快回复我。

# c# - 如何在 C#（不是 Web）中使用查询？

> ID：15497179
> 
> 赞同：0
> 
> 时间：2013-03-19T10:39:45.870
> 
> 标签：c#, ms-access

我在 microsoft office access 中创建了一个数据库。在`form1.cs`我添加了一个`DataGridView`来自创建的数据库的源。在`tableDataSet.xsd/tabelAdapter`我创建了一个带有 3 个参数的新查询，用于在数据库中插入数据`( Name, Password, Age)`。我如何将这个查询与来自 3 个不同的 3 个参数一起使用`textbox`？

PS：我只使用 Windows 窗体应用程序，没有 asp.net 等。

代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace lucian
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            // TODO: This line of code loads data into the 'jucatoriDataSet.jucator' table. You can move, or remove it, as needed.
            this.jucatorTableAdapter.Fill(this.jucatoriDataSet.jucator);

        }

        private void dataGridView1_CellContentClick(object sender, DataGridViewCellEventArgs e)
        {

        }

        private void adaugareToolStripButton_Click(object sender, EventArgs e)
        {
            try
            {
                this.jucatorTableAdapter.Fill(this.jucatoriDataSet.jucator);
            }
            catch (System.Exception ex)
            {
                System.Windows.Forms.MessageBox.Show(ex.Message);
            }

        }

        private void button1_Click(object sender, EventArgs e)
        {

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:43:17.967

看看那篇文章[http://msdn.microsoft.com/en-us/magazine/cc163709.aspx](http://msdn.microsoft.com/en-us/magazine/cc163709.aspx) 基本上你需要了解 ADO.NET :)

# ios - XCode：用于 xcode 命令行构建的 Documents and Library 文件夹

> ID：15497182
> 
> 赞同：5
> 
> 时间：2013-03-19T10:40:05.147
> 
> 标签：ios, xcode, continuous-integration, ios-simulator, xcodebuild

可以轻松地构建一个项目，在模拟器中从命令行运行它，如下所示：

**1、** `xcodebuild -project Someproject.xcodeproj -arch i386 -sdk iphonesimulator`

**2、** `/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/Applications/iPhone\ Simulator.app/Contents/MacOS/iPhone\ Simulator -SimulateApplication PATHTOAPPFILE/Someproject.app/Someproject`

但是这种方式应用程序没有 Documents 和 Library 文件夹，如果它是由 Xcode 构建并放入`/Users/SOMEUSER/Library/Application Support/iPhone Simulator/6.0/Applications/APPID/Someproject.app`

尔格`[NSBundle mainbundle]`将无法按预期工作。

**问题：如何告诉 xcodebuild 应用程序应该在哪里寻找它的环境文件夹？**

（默认情况下，我相信它会搜索`/Users/USER/Library/Application Support/iPhone Simulator/IOSVERSION`但会出现问题，因为那里已经有一个库文件夹用于其他东西）

我不介意在模拟器中运行应用程序之前是否必须手动创建文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T13:57:27.537

您可以尝试[`xctool`](https://github.com/facebook/xctool)改用。它可以在模拟器中运行应用程序，必要时重新安装它，所有这些爵士乐。如果你不想使用它，源代码是可用的，所以你可以看看他们是如何做到的。

# highcharts - Highcharts 3.0 beta 中的单分类柱形图

> ID：15497183
> 
> 赞同：1
> 
> 时间：2013-03-19T10:40:09.437
> 
> 标签：highcharts

我正在使用一个 xAxis 类别和 4 个离散数据系列（每个系列都包含一个数据项）。不幸的是，当我尝试使用 Highcharts 3.0 beta 构建一个简单的 ColumnChart 时，图表永远不会显示：

```
chartB = new Highcharts.Chart({
            chart: {
                renderTo: 'containerB',
                type: 'column'
            },
            title: {
                text: 'Monthly Average Rainfall'
            },
            subtitle: {
                text: 'Source: WorldClimate.com'
            },
            xAxis: {
                categories: [
                    'Jan' //Just one category
                ]
            },
            yAxis: {
                min: 0,
                title: {
                    text: 'Rainfall (mm)'
                }
            },
            legend: {
                enabled: false
            },
            tooltip: {
                formatter: function() {
                    return ''+
                        this.x +': '+ this.y +' mm';
                }
            },
            plotOptions: {
                column: {
                    pointPadding: 0.2,
                    borderWidth: 0
                }
            },
                series: [{
                name: 'Tokyo',
                data: [49.9] //One data point for each series element.

            }, {
                name: 'New York',
                data: [83.6]

            }, {
                name: 'London',
                data: [48.9]

            }, {
                name: 'Berlin',
                data: [42.4]

            }]
        }); 
```

请参阅[http://jsfiddle.net/7CJhf/5/](http://jsfiddle.net/7CJhf/5/)。

一种解决方法是向每个系列项目附加一个空类别 ('') 和一个零值，但这会将列集移到左侧。是否有任何适当的解决方法可以使用单个数据点创建带有 Highcharts 3.0 beta 的柱形图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T10:58:26.850

我在[issue 1535](https://github.com/highslide-software/highcharts.com/issues/1535#issuecomment-13940507)之前遇到过这个问题，堆叠列的长度为 1。这在最新的 master 分支[highchart.src.js](https://raw.github.com/highslide-software/highcharts.com/master/js/highcharts.src.js)和[highcharts-more.src.js 中得到了修复](https://raw.github.com/highslide-software/highcharts.com/master/js/highcharts-more.src.js)。尝试在此处更新对原始 github 引用的脚本引用，它应该可以正常工作。

# visual-studio-2012 - 在 wix 中创建文件夹

> ID：15497184
> 
> 赞同：6
> 
> 时间：2013-03-19T10:40:12.187
> 
> 标签：visual-studio-2012, installation, wix, directory

我想在 C 驱动器中创建一个文件夹，然后在 wix 安装程序中的该文件夹内创建一些子文件夹。但这些文件夹与安装的文件夹无关。. 我的程序想安装在 AServiceSetup 文件夹中......但我想在 C 驱动器内创建一个“PTLogFile”文件夹，然后想在该文件夹内创建一些子文件夹。请任何人帮助我更正我的代码。以下是我的代码

```
 <Directory Id="TARGETDIR" Name="SourceDir">

  <Directory Id="PTLogFile" Name="PTLogFile">
    <Directory Id="Backups" Name="Backups"/>
    <Directory Id="CommandLog" Name="CommandLog"/>
    <Directory Id="EventLog" Name="EventLog"/>
    <Directory Id="Responds" Name="Responds"/>
  </Directory>
        <Directory Id="ProgramFilesFolder">
            <Directory Id="INSTALLFOLDER" Name="AServiceSetup">
      </Directory>
        </Directory>

    </Directory>
</Fragment> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-19T11:42:53.117

谢谢您的回复。我从上面的回复中得到了答案 目录结构如下

```
 <Directory Id="TARGETDIR" Name="SourceDir">
  <Directory Id="LogFile" Name="LogFile">
    <Directory Id="Logs" Name="Logs">
      <Directory Id="Log1" Name="Log1"/>
      <Directory Id="Log2" Name="Log2"/>
      <Directory Id="Log3" Name="Log3"/>
      <Directory Id="Log4" Name="Log4"/>
    </Directory>
  </Directory>
  <Directory Id="ProgramFilesFolder">
    <Directory Id="INSTALLFOLDER" Name="AServiceSetup">
    </Directory>
  </Directory>
</Directory> 
```

组件如下

```
 <Component Id="CreateLogFolders" Guid="....."  Directory="LogFile" >
    <CreateFolder Directory="LogFile" />
    <CreateFolder Directory="Logs"/>
    <CreateFolder Directory="Log1"/>
   <CreateFolder Directory="Log2"/>
   <CreateFolder Directory="Log3"/>
   <CreateFolder Directory="Log4"/>
 </Component> 
```

并且该组件在产品功能中的引用如下

```
 <ComponentRef Id="CreateLogFolders"/> 
```

最后在产品内部添加一个属性如下

```
 <Property Id="LogFile" Value="C:" /> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T11:03:21.207

虽然您已经定义了目录结构，但安装程序只会创建组件所需的目录。

一个简单的选项是添加如下组件：

```
<Component Id="CreateLogFolders" Directory="PTLogFile">
    <CreateFolder Directory="PTLogFile" />
    <CreateFolder Directory="Backups" />
    <CreateFolder Directory="CommandLog" />
    <CreateFolder Directory="EventLog" />
    <CreateFolder Directory="Responds" />
</Component> 
```

并在您的一项功能中引用此组件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T12:17:59.450

您宁愿将每个元素放置在其自己的组件中`<CreateFolder>`，这会导致[CreateFolder table的记录。](http://msdn.microsoft.com/library/aa368053.aspx)否则，我不确定这是否符合[组件规则](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370561.aspx)......

保留目录结构如下：

```
<Directory Id="TARGETDIR" Name="SourceDir">
  <Directory Id="PTLogFile" Name="PTLogFile" />
  <Directory Id="ProgramFilesFolder">
     <Directory Id="INSTALLFOLDER" Name="AServiceSetup">
  </Directory>
</Directory> 
```

并以与此类似的方式编写组件：

```
<DirectoryRef Id="PTLogFile">
  <Directory Id="Backups">
    <Component Id="..." Guid="...">
      <CreateFolder />
    </Component>
  </Directory>
  <Directory Id="CommandLog">
    <Component Id="..." Guid="...">
      <CreateFolder />
    </Component>
  </Directory>
  <Directory Id="EventLog">
    <Component Id="..." Guid="...">
      <CreateFolder />
    </Component>
  </Directory>
  <Directory Id="Responds">
    <Component Id="..." Guid="...">
      <CreateFolder />
    </Component>
  </Directory>
</DirectoryRef> 
```

# c++ - 在一行中初始化 stl valarray

> ID：15497186
> 
> 赞同：2
> 
> 时间：2013-03-19T10:40:16.030
> 
> 标签：c++, arrays, stl, valarray

你好我想建立一个帮助类来初始化一个 stl valarray。我想做的是执行以下操作：

```
std::valarray<float> vec(3);
vlist_of<float>(vec)(2)(3)(5); 
```

所以我可以在运行时只使用一个行命令语句来初始化向量。为了执行以下操作，我尝试了以下结构：

```
template <typename T>
struct vlist_of {
    std::valarray<T>& data;
    int i;
    vlist_of(std::valarray<T>& _data):data(_data),i(0) {
        (*this)(data);
    }
    vlist_of& operator()(std::valarray<T>& data){return *this;}
    vlist_of& operator()(const T& t) {
       data [i]=t;
        i++;
        return *this;
    }
}; 
```

如果我执行以下操作，则此结构有效：

```
vlist_of<float> tmp(vec);tmp(2)(3)(4); 
```

我要问的可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T10:46:25.977

是的。做`vlist_of`一个工厂函数：

```
template <typename T>
vlist_builder<T> vlist_of(std::valarray<T>& data)
{
    return vlist_builder<T>(data);
} 
```

现在它可以工作 [http://liveworkspace.org/code/48aszl$0](http://liveworkspace.org/code/48aszl%240)。

我个人更喜欢统一初始化：

```
/*const*/ std::valarray<float> prefer { 2, 3, 5 }; 
```

查看完整示例：

```
#include <valarray>
#include <vector>
#include <iostream>

template <typename T>
struct vlist_builder
{
    std::valarray<T>& data;
    int i;
    vlist_builder(std::valarray<T>& _data):data(_data),i(0) { }
    vlist_builder& operator()(const T& t)
    {
        data[i++]=t;
        return *this;
    }
};

template <typename T>
vlist_builder<T> vlist_of(std::valarray<T>& data)
{
    return vlist_builder<T>(data);
}

int main()
{
    std::valarray<float> vec(3);
    vlist_of<float>(vec)(2)(3)(5);

    for(auto f : vec)
        std::cout << f << "\n";

    // prefer uniform initialization:
    const std::valarray<float> prefer { 2, 3, 5 };
} 
```

# android - 除非我离开应用程序并回来，否则 ListActivity 不会启动

> ID：15497192
> 
> 赞同：1
> 
> 时间：2013-03-19T10:40:29.740
> 
> 标签：android, listview, android-activity, listactivity

拥有可在 Android 2.3.6 设备和所有 4.x 虚拟设备上正常运行的 Android 应用程序。但是，我收到一位用户的报告，称在运行 4.0.4 - 4.1.1 的多台设备上，除非您转到另一个应用程序并再次返回，否则一个活动不会显示。我已经尝试了我能想到的一切，但没有任何区别，而且由于我无法在虚拟设备上重现该错误，因此我无法自己调试（或测试）它。这是一个视频剪辑，显示了该用户发生的事情：[Youtube](https://www.youtube.com/watch?v=yfwHMNjXctk)

未显示的活动的调用是这样的：

```
Intent stationList = new Intent(LoggedIn.this, StationList.class);
  stationList.putExtra("stationlist", stationlist);
startActivityForResult(stationList, 1); 
```

站名单活动内容：

```
public class StationList extends ListActivity {

private ListView list ;  
  private ArrayAdapter<String> listAdapter ;

  @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
      if(keyCode==KeyEvent.KEYCODE_BACK)

          {
          Intent returnIntent = new Intent();

       setResult(RESULT_CANCELED,returnIntent);     
       finish();    

          }
        return true;
    }

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.list);

    // Find the ListView resource.   
    list = (ListView) findViewById( android.R.id.list );  

    // Create and populate a List of stations.  
     String stationlist = getIntent().getExtras().getString("stationlist");

    final String[] stationListArray = stationlist.split("\n");

    ArrayList<String> stationList = new ArrayList<String>();  
    stationList.addAll( Arrays.asList(stationListArray) );  

    // Create ArrayAdapter using the station list.  
    listAdapter = new ArrayAdapter<String>(StationList.this, R.layout.simplerow, stationList);  

    // Set the ArrayAdapter as the ListView's adapter.  
    list.setAdapter( listAdapter ); 

    list.setOnItemClickListener(new OnItemClickListener() {
           @Override
           public void onItemClick(AdapterView<?> list, View view, 
             int position, long id) { 
           // Get the cursor, positioned to the corresponding row in the result set
               String channel = "echo -n 'notempty' > ~/.config/pianobar/stationcreate && echo '" + position + "' >> ~/.config/pianobar/ctl";
               Toast.makeText(getApplicationContext(),
                         "Starting station " + stationListArray[position] +", please wait", Toast.LENGTH_LONG).show();    

               Intent returnIntent = new Intent();
               returnIntent.putExtra("channel",channel);
               setResult(RESULT_OK,returnIntent);     
               finish();            

           }
          });

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_station_list, menu);
    return true;
}
} 
```

列表.xml：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 xmlns:tools="http://schemas.android.com/tools"
 android:layout_width="match_parent"
 android:layout_height="match_parent"
 android:orientation="horizontal"
 tools:context=".StationList" >
 <ListView android:layout_width="fill_parent"   
   android:layout_height="fill_parent"   
   android:id="@android:id/list">  
 </ListView>  
<TextView
      android:id="@android:id/empty"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_gravity="center"
      android:text="Loading station data..." />
</LinearLayout> 
```

简单行.xml：

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"  
android:id="@+id/rowTextView"   
android:layout_width="fill_parent"   
android:layout_height="wrap_content"  
android:padding="10dp"  
android:textSize="16sp" >  
</TextView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:29:34.183

终于弄明白了，其实是长时间运行的异步任务造成的。只要 doInBackground 正在运行，它就不会启动 ListActivity - 当您切换到另一个应用程序时，doInBackground 将停止并启动 ListActivity。通过将 asynctask 中处理的内容移动到线程/处理程序来对其进行排序。

# c# - 关于 ComboBox SelectedIndex？

> ID：15497196
> 
> 赞同：0
> 
> 时间：2013-03-19T10:40:45.510
> 
> 标签：c#, icsharpcode

我有一个组合框，它的列表来自在 class 上声明的单独字符串。

```
sample:
as
asd
asdf
asdfg
asdfg 
```

每次我运行它时，它总是选择组合框列表的最后一部分而不是第一部分。它正在选择`asdfg`而不是。我的`as`问题是如何使列表从第一个被选择，即从`as`作为组合框的选定索引开始？（或按字母顺序排列时始终处于升序模式）？提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:53:35.057

`SelectedIndex`将元素添加到 ComboBox 后，您可以手动将 设置为 0。

因此你得到：

```
comboBox.Items.Add("as");
comboBox.Items.Add("asd");
comboBox.Items.Add("asdf");
comboBox.Items.Add("asdfg");
comboBox.SelectedIndex = 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T11:40:47.150

您可以通过[sort](http://msdn.microsoft.com/en-us/library/system.collections.arraylist.sort.aspx)和[reverse](http://msdn.microsoft.com/en-in/library/system.collections.arraylist.reverse.aspx)尝试：

```
 private void Form1_Load(object sender, System.EventArgs e)
 {
   ArrayList list = ArrayList.Adapter(comboBox1.Items);
   list.Sort();
   // if you want to reverse
   list.Reverse();
   comboBox1.SelectedItem=0;
 } 
```

# validation - Sonata Admin type_collection 和级联验证

> ID：15497197
> 
> 赞同：6
> 
> 时间：2013-03-19T10:40:50.090
> 
> 标签：validation, symfony, collections, sonata-admin

我在使用以下结构在奏鸣曲管理员中实现一对多关系时遇到问题。

```
->add('adhesions', 'sonata_type_collection', array('by_reference' => false,'required' => false), array(
    'edit' => 'inline',
    'inline' => 'table',
    'sortable'  => 'position',)) 
```

使用此选项：'edit' => 'inline'，我丢失了 AdhesionAdmin 中定义的默认验证，如'required' => true。

那么，是否有一个设置可以指定某处？我试图在 sonata_type_collection 的设置中添加 'cascade_validation' => true 但它没有改变。

另一个问题：我可以使用带有 sonata_type_collection 的弹出编辑表单吗？('编辑' => '标准')

非常感谢任何指示和帮助。谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-12T14:57:14.797

您必须启用 cascade_validation。你可以这样做：

```
 class UserAdmin extends SonataUserAdmin  
  {    
     protected $formOptions = array(
        'cascade_validation' => true        
     );

     /* Rest of your admin class code */

  } 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-10-29T13:19:30.413

只需`Valid`在您的实体属性上使用约束：

```
/**
 * @var Object[]
 *
 * @ORM\OneToMany(targetEntity="AppBundle\Entity\Object", mappedBy="myEntity")
 * @Assert\Valid
 */
private $objects; 
```

[http://symfony.com/doc/current/reference/forms/types/collection.html#cascade-validation](http://symfony.com/doc/current/reference/forms/types/collection.html#cascade-validation)

# c# - 列表框 Selected.value 抛出空异常

> ID：15497199
> 
> 赞同：3
> 
> 时间：2013-03-19T10:40:54.817
> 
> 标签：c#, asp.net, listbox

**填充列表框如下：**

```
if (ds != null)
{
    ListPreviousRecords.Items.Clear();

    ListPreviousRecords.DataSource = ds;
    ListPreviousRecords.DataTextField = "Date";
    ListPreviousRecords.DataValueField = "ID";
    ListPreviousRecords.DataBind();
} 
```

**获取选定的值：**

```
protected void ListPreviousRecords_OnSelectedIndexChanged(object sender, EventArgs e)
{
    if(ListPreviousRecords.SelectedItem.Value != "")
    {
        int mySelectedValue = int.Parse(ListPreviousRecords.SelectedItem.Value);// throwing null exception
        loadPreviousDetails(mySelectedValue);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T10:43:08.667

您可以添加此代码以确保输入非空值

```
if(!string.IsNullOrEmpty(ListPreviousRecords.SelectedItem.Value ))
{
...
} 
```

并确保`AutoPostBack="true"`在您的控制下设置

链接：http: [//msdn.microsoft.com/fr-fr/library/system.string.isnullorempty.aspx](http://msdn.microsoft.com/fr-fr/library/system.string.isnullorempty.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T10:44:18.080

改变：

```
 if(ListPreviousRecords.SelectedItem.Value != "") 
```

到：

```
 if (!string.IsNullOrEmpty(ListPreviousRecords.SelectedItem)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T10:43:29.733

使用`ListPreviousRecords.SelectedValue`.

```
if (!string.IsNullOrWhiteSpace(ListPreviousRecords.SelectedValue)) {
    // ...
} 
```

# c# - 如何使用 EnterpriseLibrary.Logging 登录 UTF-8

> ID：15497200
> 
> 赞同：11
> 
> 时间：2013-03-19T10:40:54.957
> 
> 标签：c#, logging, encoding, enterprise-library-5

我对有关 EnterpriseLibrary.Logging 的搜索感到困惑。我有一个像这样设置的侦听器和格式化程序：

```
<add name="NormalLogListener"
     type="Microsoft.Practices.EnterpriseLibrary.Logging.TraceListeners.RollingFlatFileTraceListener, Microsoft.Practices.EnterpriseLibrary.Logging"
     listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.RollingFlatFileTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging"
     fileName="logs/MVC22.log" 
     footer="" 
     formatter="ShortLogFormatter" 
     header="" 
     rollInterval="Day" 
     timeStampPattern="yyyy-MM-dd" 
     maxArchivedFiles="14" /> 
```

...

```
<add type="Microsoft.Practices.EnterpriseLibrary.Logging.Formatters.TextFormatter, Microsoft.Practices.EnterpriseLibrary.Logging" 
     template="{timestamp(local)} - {severity} - {category} - {message}"
     name="ShortLogFormatter" /> 
```

我在多个项目中使用它，它工作正常。

除了一件事，我希望 EnterpriseLibrary 使用 UTF-8 编码创建我的日志文件（我默认获取 ANSI 文件），但不幸的是我不知道如何做到这一点。

我希望能够登录到我的文件的字符串中有特殊字符（例如变音符号）；当我将文件转换为 UTF-8 并让它进一步使用时，我看到日志记录工作正常，但我真的希望以这种方式创建它。

这可以在 xml 配置或其他地方完成吗？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T12:55:30.180

开箱即用，我不相信 EnterpriseLibrary.Logging 应用程序块支持输出到 utf-8。它似乎只输出到默认的 ANSI。话虽如此，您始终可以编写自己的 TraceListener 输出到 utf-8。

未经测试的代码。我写得又快又脏。观看硬编码的文件路径：

```
using System;
using System.Text;
using System.Diagnostics;
using Microsoft.Practices.EnterpriseLibrary.Logging;
using Microsoft.Practices.EnterpriseLibrary.Logging.Configuration;
using Microsoft.Practices.EnterpriseLibrary.Logging.TraceListeners;
using Microsoft.Practices.EnterpriseLibrary.Common.Configuration;

namespace YourNamespace
{
    [ConfigurationElementType(typeof(CustomTraceListenerData))]
    class UTF8Logging:CustomTraceListener
    {
        public override void TraceData(TraceEventCache eventCache, string source, TraceEventType eventType, int id, object data)
        {
            if (data is LogEntry && this.Formatter != null)
            {
                this.WriteLine(this.Formatter.Format(data as LogEntry));
            }
            else
            {
                this.WriteLine(data.ToString());
            }
        }

        public override void Write(string message)
        {
            this.WriteLine(message);
        }

        public override void WriteLine(string message)
        {
            string fileName = @"C:\Your.log";
            using (StreamWriter sw = new StreamWriter(File.Exists(fileName) ? System.IO.File.Open(fileName, FileMode.Append) : System.IO.File.Create(fileName), Encoding.UTF8))
            {
                Byte[] logMessage = new UTF8Encoding(true).GetBytes(message);
                sw.Write(logMessage,0,logMessage.Length);
            }
        }
    }
} 
```

# wordpress - 如何将小部件添加到 wordpress 中的 header.php？

> ID：15497201
> 
> 赞同：8
> 
> 时间：2013-03-19T10:40:55.740
> 
> 标签：wordpress

我安装了一个名为 的插件`Translator Box`，我使用它的短代码并将其放入我的 wordpress 主题 header.php 中。

```
 [translation_box languages="english,russian,german,spanish,french,chinese" width="100%" height="200px" bgcolor="white" txtcolor="#000000"] 
```

但它不起作用！

它还在小部件部分的已启用小部件处生成一个小部件。有没有办法在 header.php 中使用一些可以调用小部件的代码？谢谢你。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-19T15:28:33.953

您可以在 header.php 中定义一个部分来显示小部件。在你的functions.php中做这样的事情：

```
function my_widgets_init() {

register_sidebar( array(
    'name' => __( 'Main Sidebar', 'your-theme' ),
    'id' => 'sidebar-1',
    'before_widget' => '<div id="%1$s" class="widget %2$s">',
    'after_widget' => "</div>",
    'before_title' => '<h3>',
    'after_title' => '</h3>',
) );

register_sidebar( array(
    'name' => __( 'Header Area', 'your-theme' ),
    'id' => 'sidebar-2',
    'description' => __( 'An optional widget area for your site header', 'your-theme' ),
    'before_widget' => '<div id="%1$s" class="headwidget %2$s">',
    'after_widget' => "</div>",
    'before_title' => '<h3>',
    'after_title' => '</h3>',
) );
}
add_action( 'widgets_init', 'my_widgets_init' ); 
```

例如，第一部分是侧边栏中的小部件区域，第二部分是标题中的小部件区域。

现在包含在你的 header.php 文件中：

```
<?php if ( !function_exists('dynamic_sidebar') || !dynamic_sidebar('sidebar-2') ) : ?>
<?php endif; ?> 
```

你的小部件应该在哪里。

在您的管理界面中，您现在应该有 2 个区域（“主侧边栏”和“标题区域”）可以填充小部件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T10:43:33.263

使用[do_shortcode](http://codex.wordpress.org/Function_Reference/do_shortcode)

```
<?php echo do_shortcode( $content ) ?> 
```

# linux - 初始化内核模块变量

> ID：15497202
> 
> 赞同：2
> 
> 时间：2013-03-19T10:41:08.320
> 
> 标签：linux, linux-kernel, wifi, linux-device-driver

我是内核和驱动程序编程的新手，所以我希望我的问题不是太简单。

我正在使用 madwifi 驱动程序，以添加我自己的一些功能。在我的代码中，我添加了一些需要在实际代码开始之前初始化的变量和结构。
在工作时，我遇到了以下问题：将负责初始化此变量/结构的函数放在哪里最好？据我所知，在将模块加载到内核时会执行一个特殊的宏 *module_init*，但是，我在 madwifi 驱动程序代码中找不到它。我发现的是另一个著名的宏，*exit_module*。所以我的问题是：

1.  是否建议添加一个 init_module 并在那里进行所有初始化？
2.  是否建议使用 exit_module 来释放分配的内存？

谢谢您的帮助！

奥马尔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T11:56:21.253

每个模块（驱动程序）定义了两个函数，一个在模块加载到内核时调用，另一个在模块被删除时调用。 `module_init()`并且`module_exit()`是两个特殊的内核**宏**来为这些角色声明两个函数。

我想你的驱动程序有初始化功能。`init()`函数通常用于初始化或注册您的驱动程序。

还要检查`probe()`功能。如果您的驱动程序可以支持多个设备，则一旦注册了驱动程序，内核`probe()`就会为每个设备调用一次。这个探测函数启动每个设备的初始化：初始化硬件，分配资源，以及将设备注册到内核作为块设备或网络设备或其他任何设备。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T12:11:17.137

正如我在评论中所说，初始化代码可以在`init_module`函数中。

关于你的问题：

1.  模块初始化函数 ( `init_module`) 是驱动级初始化的正确位置。建议使用它，除非您的需求对于 C 静态变量初始化来说是微不足道的。
2.  清理函数 ( `cleanup_module`) 必须确保驱动程序已释放它分配的任何资源。这是释放初始化期间分配的任何内容的正确位置。

# html - 如何使用 Jekyll 在索引页面上显示帖子摘要？

> ID：15497207
> 
> 赞同：21
> 
> 时间：2013-03-19T10:41:23.770
> 
> 标签：html, markdown, jekyll

我正在使用[Jekyll](http://jekyllrb.com/)按照这个优秀的[教程](http://www.andrewmunsell.com/tutorials/jekyll-by-example/)创建博客。我想在索引页面上添加一个帖子摘要。我尝试使用：

> post.content | 截断字数：50 | strip_html

它可以工作，但它会显示整个帖子，直到达到 50 个字数。这也包括标题。我只想总结一下帖子的实际内容。我该如何组织我的帖子来做到这一点？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-06-28T17:02:26.187

## 2015 年 11 月 16 日更新

现在 Jekyll 支持摘录分隔符，在模板中你可以这样做：

```
{% if post.excerpt %}
    {{ post.excerpt }}
{% endif %} 
```

在全局配置`_config.yml`中，您可以设置：

```
excerpt_separator: <!--more--> 
```

和`<!--more-->`html 注释标签同样使用。

## 旧答案

你可以试试这个：

```
{% if post.content contains '<!--more-->' %}
  {{ post.content | split:'<!--more-->' | first }}
{% else %}
  {{ post.content }}
{% endif %} 
```

并在摘要后的文章中添加`<!--more-->`标签，就像 Wordpress 一样。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T10:58:41.700

使用[YAML 前端](https://github.com/mojombo/jekyll/wiki/YAML-Front-Matter)并为每个帖子定义一个单独的标题，如下所示：

```
---
title: Efficient smuflet based kwoxel trees
---

Post content goes here. 
```

然后你可以随意使用或不使用`post.title`。

或者，如果您想为每篇文章编写一个单独的摘要（不仅仅是前 n 个字符），只需在前面的内容中为该摘要添加一个字段。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-12-05T07:30:42.243

来自 Jekyll 文档：

> 每个帖子都会自动获取第一个文本块，从内容的开头到第一次出现的 excerpt_separator，并将其设置为 post.excerpt。
> 
> ...
> 
> 因为 Jekyll 抓取了第一段，所以您不需要将摘录包含在 p 标签中，这已经为您完成了。

有关更多信息和示例，请参阅[http://jekyllrb.com/docs/posts/#post-excerpts 。](http://jekyllrb.com/docs/posts/#post-excerpts)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-12-11T20:01:36.527

`{{ post.excerpt }}`在您的文件中使用`index.md`以获取这篇文章的摘录。

# c - C 编程语言 K&R 练习 1-9

> ID：15497208
> 
> 赞同：4
> 
> 时间：2013-03-19T10:41:31.117
> 
> 标签：c

我是这里的新手，一般来说对编程逻辑相对较新。为了提高我的技能，我开始阅读这本精美的文学作品。我真的觉得我很好地掌握了这些概念，但这个练习似乎让我措手不及。我可以制作程序，但我看到的一些示例似乎介绍了本书尚未涵盖的一些概念，例如[此处](http://users.powernet.co.uk/eton/kandr2/krx109.html)的示例。`inspace`似乎提供的功能不仅仅是程序员创建的变量。

```
#include <stdio.h>

int main(void)
{
    int c;
    int inspace;

    inspace = 0;
    while((c = getchar()) != EOF)
    {
        if(c == ' ')
        {
            if(inspace == 0)
            {
                inspace = 1;
                putchar(c);
            }
        }

        /* We haven't met 'else' yet, so we have to be a little clumsy */
        if(c != ' ')
        {
            inspace = 0;
            putchar(c);
        }
    }    
    return 0;
} 
```

在下一个示例中，`pc`似乎在计算空间方面做了一些事情，但我不确定是什么。

我设法创建了一个完成此任务的程序，但它仅使用我创建的变量 c，因此我了解它的目的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T10:55:39.920

此代码的目的是复制文本，如果有多个空格，则`' '`连续打印一个空格。

变量`inspace`用于跟踪上次打印的 char 是 scape 还是 non-space。
如果`inspace`为零表示打印的字符不是空格。
if is one 表示最后`inspace`一次打印空间。

因此，如果`inspace`下一次 scape 为零，则可以在读取 scape 时打印，如果`inspace`是 1，则找到下一个连续的 scape，因此不打印空间。

查看`C`当前读取的字符。（*阅读评论*）

```
 if(c == ' ')  // currently space read
    {
      if(inspace == 0) // last time non-space printed, So space can be print
      {
        inspace = 1;   // printing space so switch inspace 1
        putchar(c);   // print space
      }
    } 
```

下一个`if`

```
if(c != ' ') // A char not space read, its to to print unconditionally  
{
  inspace = 0;  // remember that non-scape print
  putchar(c);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-23T03:29:51.010

花了我一段时间，但这是我认为的答案。

```
#include <stdio.h>

main()
{
    int c, blank;
    blank = 0;

    while ((c=getchar()) != EOF){
        if (c == ' '){
            if (blank == 0){
                printf("%c", c);
                blank = 1;
            }

        }
        if (c != ' '){
            if (blank == 1){
                blank = 0;
            }
            printf("%c", c);
        }

    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T10:54:27.263

`inspace`本质上是一个变量，用于指示您是否处于“刚刚看到的空间”状态。看到一个空格就进入这个状态，看到一个非空格就退出这个状态。仅当您不在该`inspace`州时才打印输入，因此您不会打印多个相邻空格。

*我设法创建了一个完成此任务的程序，但它仅使用我创建的变量 c，因此我了解它的目的。* 在你的程序中，如果输入是“hello world”，那是它的确切输出吗？您发布的程序将输出“hello world”（将单词之间的多个空格压缩为一个）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-07T06:22:23.397

我也遇到了同样的问题，但最终得到了一个有效的程序。

```
 #include<stdio.h>

/* copy input to its output, replacing each
   string of one or more blanks by a single blank */

int main()
{
    int c, nspace=0;
    while((c=getchar()) != EOF){
        if(c==' ') ++nspace;
        else{
            if(nspace >= 1){
                printf(" ");
                putchar(c);
                nspace=0;
            }
            else
                putchar(c);
        }
    } 

} 
```

# .net - Dropbox 喜欢托盘图标的行为

> ID：15497211
> 
> 赞同：0
> 
> 时间：2013-03-19T10:41:50.653
> 
> 标签：.net, winforms

当您（右或左）单击托盘图标时，它会在 Dropbox 中显示 ContextMenu。当您双击托盘时，它会执行一个方法（打开文件夹）而不显示 contextMenu。有可能在.Net中做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T10:48:34.883

是的。查看`NotifyIcon`类并实现`MouseClick`and`DoubleClick`事件。要在代码中打开上下文菜单条，请参阅：[http ://social.msdn.microsoft.com/Forums/en-US/winforms/thread/8de03b21-e144-4614-96cd-d382c2a2fbe9/](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/8de03b21-e144-4614-96cd-d382c2a2fbe9/)

# xml - 使用 HADOOP mapreduce pgm 计算 XML 中的每个 Text 值

> ID：15497213
> 
> 赞同：2
> 
> 时间：2013-03-19T10:41:55.377
> 
> 标签：xml, hadoop, mapreduce

我是 Hadoop 新手。我需要使用 java 中的 mapreduce 程序解析一个小的 xml 文件。我正在使用 hadoop 1.0.4 说我的 xml 文件是

```
<configuration>
<property>
 <name>adv</name>
 <value>a</value>
 <dup>school</dup>
</property>
<property>
 <name>aghy</name>
 <value>a</value>
 <dup>bk</dup>
</property>
</configuration> 
```

我需要这样的输出 adv 1 a 2 aghy 1 school 1 bk 1

我如何编辑代码[https://github.com/studhadoop/xmlparsing-hadoop/blob/master/XmlParser11.java](https://github.com/studhadoop/xmlparsing-hadoop/blob/master/XmlParser11.java)。任何工作的想法。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:13:09.183

你需要几件事：

*   一种处理XML文件的输入格式，建议你看看[Mahout的](http://mahout.apache.org/) [XMLInputFormat](https://github.com/apache/mahout/blob/ad84344e4055b1e6adff5779339a33fa29e1265d/examples/src/main/java/org/apache/mahout/classifier/bayes/XmlInputFormat.java)
*   传递给映射器（SAX 或 DOM）的 XML 字符串解析器，可能定义一些要绑定的 JAXB 对象

还有一些有用的链接：

*   [解析大于 hdfs 块大小的 XmlInputFormat 元素](https://stackoverflow.com/questions/12639745/parsing-xmlinputformat-element-larger-than-hdfs-block-size)

# javascript - 使用 node.js 和 CoffeeScript 访问全局变量

> ID：15497215
> 
> 赞同：0
> 
> 时间：2013-03-19T10:41:59.687
> 
> 标签：javascript, node.js, coffeescript, global-variables

我正在尝试为使用 Node.js 和 CoffeeScript 编写的应用程序声明全局变量。所以我在一个通用文件中声明它，该文件在编译后连接到两个应用程序。在那个文件中，我有例如：

```
root = exports ? this
root.myVariable = 300 
```

所以我的第一个应用程序是一个 HTML 应用程序。当我尝试访问此变量时，例如通过

```
console.log myVariable 
```

没有问题。但是我的另一个应用程序是由节点命令启动的服务器应用程序，我无法访问该应用程序中的该变量。我试过：

```
console.log root.myVariable
console.log myVariable 
```

在第一行中，我打印了“未定义”（因此看起来 root 已定义），在第二行中，我收到了 ReferenceError - myVariable 未定义。

那么如何访问这个变量呢？

这是我得到的 Javascript 输出代码，我想它可能会有所帮助：

```
(function() {
  var root, _ref;

  root = (_ref = typeof module !== "undefined" && module !== null ? module.exports : void 0) != null ? _ref : this;

  root.myVariable = 300;

}).call(this);

(function() {

  console.log(root.myVariable);

  console.log(myVariable);

}).call(this); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:29:24.930

你已经很接近了，但你需要稍微改变一下

```
# config.coffee
module.exports =
  foo: "bar"
  hello: "world"
  db:
    user: alice
    pass: password1

# lib/a.coffee
config = require "../config"

# lib/b.coffee
config = require "../config"

# lib/db.coffee
dbconfig = require("../config").db 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T11:39:03.073

客户端和服务器`JavaScript`（或`CoffeeScript`）的工作方式不同。因此，编写一个适用于两个应用程序的模块真的很困难。

有很多库可以解决这个问题，比如[RequireJS](http://requirejs.org/)和[Browserify](http://browserify.org/)。

但是对于您的问题，我有两个更简单的建议。

* * *

第一个是用来`JSON`存储你的全局常量。在服务器端，您可以简单地`require`归档`JSON`：

```
root = require './config.json' 
```

在客户端，您可以手动解析它或将其作为`pjson`.

* * *

我的第二个建议是编写与您的两个应用程序兼容的非常简单的模块。它看起来像这样：

```
root = 
  myVariable: 300
  myOtherVariable: 400

modulte.exports = root if module?.parent? 
```

此代码应与`node.js` `require`函数和浏览器`<script>`标记兼容。

# 更新：

我只是重读了您的问题并意识到，您几乎按照我的建议做了。但是您的代码对我来说看起来不错。您可以尝试使用`module.export`而不是它的 alias `exports`，它可能会有所帮助：

```
root = modulte?.exports ? this
root.myVariable = 300 
```

但是，正如我所说，您的代码对我来说也很好。

# c++ - 两个.lib包含不同的同名函数：如何选择合适的？

> ID：15497220
> 
> 赞同：3
> 
> 时间：2013-03-19T10:42:13.797
> 
> 标签：c++, c, static-libraries

我有两个静态库 lib1.lib、lib2.lib（不是它们的代码），它们具有相同的函数原型，但具有不同的实现。

我尝试将两者都包含在内，它似乎总是使用包含的第一个库中的实现。

如果我将它们都包含在我的项目中，有没有办法从特定库中选择实现？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T10:56:53.007

我认为应该可以编写链接到每个静态库的瘦包装 DLL。请注意，这仅在静态库时才有效，`lib1.lib`并且`lib2.lib`这样的包装会导致性能下降。

# c - execve 的返回状态

> ID：15497224
> 
> 赞同：6
> 
> 时间：2013-03-19T10:42:24.333
> 
> 标签：c, process, exec

我想将退出状态 0 从 execve 进程发送到启动它的进程。因为在 Success execve 永远不会返回，所以在那之后我无法做任何事情。但我想如果 execve 运行成功。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T10:50:21.217

您可以使用以下命令验证 exec 是否*成功*`FD_CLOEXEC`：

*   创建一个管道。

*   叉子。

*   在孩子中，关闭管道的读取端并在管道`FD_CLOEXEC`的写入端设置标志。然后继续`exec`。如果`exec`成功，管道将自动关闭`FD_CLOEXEC`。如果`exec`失败，将一个字节写入管道并退出。

*   在父级中，关闭管道的写入端并从读取端读取。如果你读到了 0 个字节（EOF），就说明`exec`成功了。如果您在管道中读取一个字节，则意味着`exec`失败。

发生故障时通过管道写入的数据可用于传输错误信息，例如`errno`after的值`exec`。

为简洁起见省略了错误检查的代码如下所示：

```
int pipe_fds[2];
pipe(pipe_fds);
if (!fork()) {
  close(pipe_fds[0]);
  fcntl(pipe_fds[1], F_SETFD, F_CLOEXEC);
  execve(...);
  write(pipe_fds[1], "", 1);
  _exit(1);
}
else {
  int n;
  char out;
  close(pipe_fds[1]);
  n = read(pipe_fds[0], &out, 1);
  if (n == 0)
    printf("exec successful\n");
  else
    printf("exec failed\n");
  close(pipe_fds[0]);
} 
```

请注意，如果其他线程可能并行执行自己的进程，则此技术可能不安全。问题是在创建管道和设置 close-on-exec 标志之间存在延迟。如果在该关键窗口期间不相关的线程分叉和执行，则子线程将继承`pipe_fds[1]`并且不会关闭它，从而导致父线程挂起。这可以使用特定于 Linux 的[`pipe2`](https://linux.die.net/man/2/pipe2)调用来修复，该调用允许使用 close-on-exec 标志集原子地创建管道。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T10:50:07.747

等待您`fork()`完成启动的进程，您可以使用`wait()`：

```
/* parent */
int status;
while (wait(&status) != uproc.pid) {
    printf("waiting for child to exit");
    } 
```

并基于这个[问题](https://stackoverflow.com/questions/13532391/how-to-get-error-of-execvp-in-the-fork)

子进程的退出状态由`wait`函数在`status`变量中提供。

您可以使用`WEXITSTATUS`宏获得退出状态，但前提是程序正常退出（即`exit`从其`main`函数调用或返回）：

```
if (WIFEXITED(status))
    printf("Child exit status: %d\n", WEXITSTATUS(status));
else
    printf("Child exited abnormally\n"); 
```

# asp.net-mvc - Is it good practice to pass TempData and/or ViewData to services?

> ID：15497225
> 
> 赞同：2
> 
> 时间：2013-03-19T10:42:27.023
> 
> 标签：asp.net-mvc, oop, viewdata, tempdata

In trying to reduce the size of my MVC controllers, I am refactoring a lot of logic out into services (though this same issue would apply if it was being factored into models). I'm often finding that I was directly setting `ViewData` and/or `TempData` with information I wanted to be displayed to the user, like:

```
var repoUser = new UserRepository();
var foundUser = repoUser.GetUser(userId);
if (foundUser == null) {
    ViewData["ErrorMessage"] = "Could not find user with ID {0}.".FormatWith(userId);
    return View("UsersRegister");
} 
```

Of course, as soon as you move into a service class, you lose direct access to `ViewData`, `TempData`, and methods like `View()` or `RedirectToAction()`, so I'm trying to figure out the best practice for dealing with it. Two solutions come to mind:

1.  Create a class containing various pieces of information about what the controller should do, to be passed back from the services, like:

    ```
    public class ResponseInfo {
        public string Name { get; set; }
        public bool DoRedirect { get; set; }
        public object RedirectRouteValues { get; set; }
        public string InfoMessage { get; set; }
        public string ErrorMessage { get; set; }
    } 
    ```

2.  Try and allow the service methods to have direct access to things like `ViewData` and `TempData`, eg.:

    ```
    public ActionResult ToggleUserAttended(int eventId, int userId, HttpRequestBase request, TempDataDictionary tempData, ViewDataDictionary viewData, Func<string, object, ActionResult> redirectAction) {
        //...
        var repoUser = new UserRepository();
        var foundUser = repoUser.GetUser(userId);
        if (foundUser == null) {
            tempData["ErrorMessage"] = "Could not find user with ID {0}.".FormatWith(userId);
            return redirectAction("UsersRegister", new { id = eventId, returnUrl = request.QueryString["returnUrl"] });
        }
        //...
    } 
    ```

    ... and then in the controller:

    ```
    return _svcEvent.ToggleUserAttended(123, 234, Request, TempData, ViewData, (name, routeVals) => RedirectToAction(name, routeVals)); 
    ```

For number 1, the controller would have more logic to do in looking at the `ResponseInfo` object and determining whether to redirect, display a view, plugging the error or info message into `TempData` or `ViewData`, etc. Number 2 would pretty much allow a one-liner controller, but you're making the service very aware of controller-specific stuff. However, the service is always going to be closely tied in with the controller anyway so is this a problem? Would 1 or 2 be best practice, or something else I haven't listed?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:53:51.910

Maybe I misunderstood something, but I find it strange that you want to provide information related to presentation concerns to the services. IMO, it is a very bad idea to do that as services are business logic and should not depend on presentation layer.

I don't really like neither of approaches you suggested as it seems to me that they blur the line between presentation and services.

As an example, a service should throw if it can't find the user, and the controller should then handle this error with appropriate UI mechanism: an error message, HTTP error or whatever fits your app. Similarly, how can the service know where to redirect? It is aware of GUI? How do you plan to use it in other contexts (API, non-web GUI, whatever)?

What I usually do is create a command/dto based on form/parameters and provide that to service. Then any service client can use the same command. If I need to show data, I ask services/repos for whatever I need, and map that to presentation form (if needed) and put that into ViewData/TempData/Model/Whatever.

Here are some examples (treat it as pseudo-code):

```
[HttpPost]
public ActionResult ChangeUserInfo(UserInfoModel model)
{
  var cmd = new ChangeUserInfoCommand(CurrentUserId, model.FirstName, model.LastName);
  try {
      userSvc.UpdateUser(cmd); 
      return RedirectToAction(...);
  }
  catch(XxxxException e) { // e.g. something wrong (business logic)
      TempData["Error"] = "an error occurred: " + e.FriendlyError();
      return RedirectToAction(...); // error action
  }
  catch(SecurityException e) {
      throw new HttpException(404, "NotFound");
  }
}

public ActionResult ShowUsers()
{
  var userInfo = svc.GetUsers().Select(u => { Id = u.id, FullName = u.First + " " + u.Last);
  // or var userInfo = svc.GetUsers().Select(u => Mapper.To<UserDTO>(u));
  return View(userInfo);

  // or without model
  // ViewData["users"] = userInfo;
  // return View();
} 
```

Please note that this is an illustration - I usually do it quite differently, but I have a lot of other infrastructure in place (e.g. I don't explicitly handle exceptions like this, my services sometimes have only one method `Execute(IEnumerable<Command> cmds)`, I have nice support for anonymous classes as view models, etc)

# delphi - 数据集 Delphi 7 的属性访问冲突

> ID：15497230
> 
> 赞同：-1
> 
> 时间：2013-03-19T10:42:49.597
> 
> 标签：delphi, dataset, access-violation

经过大量研究，我决定在这里发布我的问题。

在排除大量代码后，我收到了漂亮的消息“访问冲突......”。在调试模式下，我看到这一行**“dsPRINCIPAL.DataSet.FieldByName('ID_NATURE').AsInteger”** 和我的数据集的所有属性都显示了这个 **“Violation d'accès pour 4034D1E0 accédant à FFFFFFFF”。**

我的 dsPRINCIPAL 和数据集处于活动状态并处于编辑模式，并且有 1 条记录（非空）。

你能帮我理解为什么我在这条线上有访问冲突吗？

这是代码：

`if dsCTC_PRINCIPAL.DataSet.FieldByName('ID_NATURE_CTC').AsInteger:=Variable.Get(VCA‌​_PREFERENCES +'.ID_NATURE_CTC_MGE_SUIVI',scGlobal).asInteger; dsCTC_PRINCIPAL.DataSet.FieldByName('ID_OBJET_CTC').AsInteger:=Variable.Get(VCA_‌​PREFERENCES +'.ID_OBJET_HL_MGE',scGlobal).asInteger; dsCTC_PRINCIPAL.DataSet.FieldByName('QTEPASSE').AsInteger:=0;`

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T10:53:37.717

我怀疑`dsPRINCIPAL.DataSet`甚至`dsPRINCIPAL.DataSet.FieldByName('ID_NATURE')`返回`nil`，所以调用`AsInteger`虚方法引发了访问冲突。

尝试这个：

```
var NatureField: TField;

if dsPRINCIPAL.DataSet=nil then
  raise Exception.Create('dsPRINCIPAL.DataSet not assigned');
NatureField := dsPRINCIPAL.DataSet.FieldByName('ID_NATURE');
if NatureField=nil then
  raise Exception.Create('ID_NATURE field missing');
...
NatureValue := NatureField.AsInteger; 
```

顺便说一句，出于性能原因，由于`FieldByName()`可能很慢，当您在循环中检索一些数据时，使用`NatureField: TField`本地评估器是一个好习惯。

# sql - 比较两个不同列上的sql行

> ID：15497231
> 
> 赞同：0
> 
> 时间：2013-03-19T10:42:50.887
> 
> 标签：sql

```
id address retailer
1   A        11
2   A         11
3   A         11
4   A         12
5   A         13
6   B         12
7   B         12
8   B         13 
```

我的输出应该是

```
id address retailer
1   A        11
4   A         12
5   A         13
6   B         12
8   B         13 
```

即我的查询应该返回具有**相同地址但不同零售商的ID。**

如何得到这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T10:46:23.963

假设您要加入没有重复的列，这是迄今为止最常见的情况：

*   An `inner join`of `A`and`B`给出 的结果`A intersect B`，即维恩图交集的内部部分。

*   的`outer join`和给出 的结果`A`，即维恩图联合的外部部分。`B``A union B`

* * *

## 例子：

假设您有两个表，每个表只有一列，数据如下：

```
A    B
-    -
1    3
2    4
3    5
4    6 
```

请注意，(1,2) 对 是唯一的`A`，(3,4) 是常见的，而 (5,6) 对 是唯一的`B`。

**`Inner join`**：

使用`inner join`任一等效查询给出两个表的交集，即它们共有的两行。

```
select * 
from a 
INNER JOIN b on a.a = b.b;

select a.*,b.*  
from a,b 
where a.a = b.b;

a | b
--+--
3 | 3
4 | 4 
```

**`Left outer join`**：

A`left outer join`将给出 A 中的所有行，以及 B 中的任何常见行。

```
select * 
from a 
LEFT OUTER JOIN b on a.a = b.b;
select a.*,b.*  
from a,b 
where a.a = b.b(+);

a |  b  
--+-----
1 | null
2 | null
3 |    3
4 |    4 
```

**`Full outer join`**：

A`full outer join`将为您提供 and 的`A`并集`B`，即 A 中的所有行和 B 中的所有行。如果 A 中的某些内容在 B 中没有对应的数据，则 B 部分为空，反之亦然。

```
select * 
from a 
FULL OUTER JOIN b on a.a = b.b;

 a   |  b  
-----+-----
   1 | null
   2 | null
   3 |    3
   4 |    4
null |    6
null |    5 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T10:49:11.247

尝试使用`group by`如下子句：

```
select min(id), address, retailer
from tab
group by address, retailer 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T10:50:03.213

```
select min(id) as id,address, retailer 
from table1 
group by address, retailer
order by id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T10:53:33.290

您需要的查询是：

```
SELECT min(id), address, retailer
FROM table1 AS t1
group by address, retailer
order by address 
```

这是[来源](http://www.sqlfiddle.com/#!3/34c4e/5/0)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T10:53:42.223

使用这个：它正在工作：

```
 SELECT * FROM `sampletable` GROUP BY address, retailer 
```

# c# - 用于 RibbonTab 的 WPF IsSelected 绑定在 ctrl+tab 上停止工作

> ID：15497235
> 
> 赞同：0
> 
> 时间：2013-03-19T10:43:09.820
> 
> 标签：c#, wpf, ribbon

这是[RibbonTab IsSelected not working](https://stackoverflow.com/questions/15218745/ribbontab-isselected-not-working)的最小化错误再现。

这是演示应用程序的主窗口：

![在此处输入图像描述](../Images/928b74aac916a9b74fba8c9e8af83a97.png)

当我们单击应用程序菜单（蓝色箭头）时，会弹出一个菜单。

![在此处输入图像描述](../Images/4aef73740a5353559492e0c8424eb53f.png)

如果我们单击主视图，则会将一个选项卡项添加到选项卡面板中。

![在此处输入图像描述](../Images/4dc372a5d1b239b690f831fd6d52c0d5.png)

“主视图”既是选项卡的标题，也是选项卡项的内容，没什么奇怪的。

如果我们也点击额外的视图，我们得到这个：

![在此处输入图像描述](../Images/8acc11716776bed644819ff4ef0745ad.png)

我们可以看到一个选项卡变得可见，并且功能区中显示了额外的东西。如果我们在两个 tabpanel 选项卡之间切换，额外的 RibbonTab 只有在选择“extra view”时才可见。

现在，如果我们选择“额外视图”选项卡，使额外的 RibbonTab 可见，然后单击文本框，使光标在其中闪烁，然后按几次 ctrl+TAB 以按 Tab 顺序导航元素，我们很快就有了再次选择标题“额外视图”的选项卡。额外的 RibbonTab 看起来会与我们预期的不同。

![在此处输入图像描述](../Images/3b00a1ce9383bcc36df728821aca28c8.png)

唯一剩下的是选项卡文本“额外选项卡”，文本框不再存在。为什么不？

如果我们单击选项卡面板中的选项卡（显示“主视图”和“额外视图”，“额外选项卡”仅在选择“额外视图”时可见。这是预期的行为。但是，文本框和功能区选项卡分隔符不再存在，这是出乎意料的。

RibbonTab 的可见性绑定到 TabPanel 中选定的 TabItem 的类型，如果选项卡项的类型为 ExtraView，则使用返回 Visibility.Visible 的转换器，但如果类型为其他类型（如 MainView）则不返回。

RibbonTab 的 IsSelected 属性也绑定到选定的 tabitem，如果 tab item 是 ExtraView 类型，则使用返回 true 的转换器。

这就是如上所述，菜单选项卡将超过“额外标签”的程序的最小示例，因此当TabPanels内容的类型正确时，它将被选中。我这样说是为了强调 IsSelected 是必需的（除了可见性）。

任何帮助是极大的赞赏。

MainWindow.xaml：

```
<RibbonWindow x:Class="TestProblematicRibbons.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:test="clr-namespace:TestProblematicRibbons"
    xmlns:Converters="clr-namespace:TestProblematicRibbons.Converters"
    Height="300" Width="350">
  <RibbonWindow.DataContext>
    <test:MainWindowViewModel/>
  </RibbonWindow.DataContext>
  <RibbonWindow.Resources>
    <Converters:ExtraRibbonTabBooleanConverter x:Key="ExtraRibbonTabBoolean" />
    <Converters:ExtraRibbonTabVisibilityConverter x:Key="ExtraRibbonTabVisibility" />
  </RibbonWindow.Resources>
  <DockPanel>
    <Ribbon DockPanel.Dock="Top">
      <Ribbon.ApplicationMenu>
        <RibbonApplicationMenu>
          <RibbonApplicationMenuItem Header="main view"
            Command="{Binding CreateMainViewCommand}"/>
          <RibbonApplicationMenuItem Header="extra view"
            Command="{Binding CreateExtraViewCommand}"/>
        </RibbonApplicationMenu>
      </Ribbon.ApplicationMenu>

      <RibbonTab Header="extra tab"
          IsSelected="{Binding SelectedTab, Mode=OneWay, Converter={StaticResource ExtraRibbonTabBoolean}}"
          Visibility="{Binding SelectedTab, Mode=OneWay, Converter={StaticResource ExtraRibbonTabVisibility}}">
        <RibbonGroup>
          <RibbonTextBox />
        </RibbonGroup>
      </RibbonTab>
    </Ribbon>
    <TabControl
      ItemsSource="{Binding Tabs}" SelectedItem="{Binding SelectedTab}" />
  </DockPanel>
</RibbonWindow> 
```

MainWindowModel.cs：

```
using System.Collections.ObjectModel;
using System.Windows.Controls;
using System.Windows.Input;
using ReactiveUI;

namespace TestProblematicRibbons
{
  public class MainWindowViewModel: ReactiveObject
  {
    private ObservableCollection<TabItem> _tabs
      = new ObservableCollection<TabItem>();

    public ObservableCollection<TabItem> Tabs
    {
      get { return _tabs; }
    }

    private TabItem _SelectedTab;
    public TabItem SelectedTab
    {
      get { return _SelectedTab; }
      set { this.RaiseAndSetIfChanged(x => x.SelectedTab, value); }
    }

    public ICommand CreateMainViewCommand
    { get { return new ActionCommand(CreateMainView); } }

    public ICommand CreateExtraViewCommand
    { get { return new ActionCommand(CreateExtraView); } }

    private void CreateMainView()
    {
      var view = new MainView();
      AddTab(view, "main view");
    }

    private void CreateExtraView()
    {
      var view = new ExtraView();
      AddTab(view, "extra view");
    }

    private void AddTab(UserControl view, string header)
    {
      var tab = new TabItem();
      tab.Header = header;
      tab.Content = view;
      _tabs.Add(tab);

      SelectedTab = tab;
    }
  }
} 
```

ExtraRibbonTabBooleanConverter：

```
using System;
using System.Globalization;
using System.Windows.Controls;
using System.Windows.Data;

namespace TestProblematicRibbons.Converters
{
  public class ExtraRibbonTabBooleanConverter: IValueConverter
  {
    public object Convert
      (object value, Type targetType, object parameter, CultureInfo culture)
    {
      var item = value as TabItem;

      return item != null && item.Content is ExtraView;
    }

    public object ConvertBack
      (object value, Type targetType, object parameter, CultureInfo culture)
    {
      throw new NotImplementedException();
    }
  }
} 
```

ExtraRibbonTabVisibilityConverter：

```
using System;
using System.Globalization;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;

namespace TestProblematicRibbons.Converters
{
  public class ExtraRibbonTabVisibilityConverter: IValueConverter
  {
    public object Convert
      (object value, Type targetType, object parameter, CultureInfo culture)
    {
      var item = value as TabItem;

      return item != null && item.Content is ExtraView
        ? Visibility.Visible
        : Visibility.Collapsed;
    }

    public object ConvertBack
      (object value, Type targetType, object parameter, CultureInfo culture)
    {
      throw new NotImplementedException();
    }
  }
} 
```

MainView 和 ExtraView 只是两个带有标签的 UserControl:s，分别显示“主视图”和“额外视图”，因此在这里粘贴它们的代码没什么意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T07:31:58.067

在某些情况下，我通过手动实现绑定解决了我的问题。似乎不能完全依赖组合的绑定。他们显然可以互相打扰！

# android - 将两个视频一起显示，然后在单个屏幕上作为合并视频输出

> ID：15497242
> 
> 赞同：11
> 
> 时间：2013-03-19T10:43:37.867
> 
> 标签：android, ffmpeg, javacv, xuggler, android-videoview

这个问题可能听起来有点复杂或模棱两可，但我会尽量说清楚。我做了很多谷歌搜索并花了很多时间，但没有找到任何与 Windows 相关的东西。

我想在一个屏幕上播放两个视频。一个作为背景全屏显示，一个在其顶部的小窗口或右上角的小宽度/高度。然后我想要一个输出，其中包含在一个屏幕上同时播放的两个视频。

所以基本上一个视频会覆盖另一个视频，然后我希望将其作为输出流式传输，以便用户稍后可以播放该流式传输。

我不是要你编写整个代码，只是告诉我要做什么或如何去做，或者我必须使用哪个工具或第三方 SDK 来实现它。

**更新**：尝试了很多解决方案。

1\. `Xuggler`- 不支持`Android`。

2.`JavaCV`或者`JJMPEG`- 找不到任何建议如何做的教程？

现在寻找FFMPEG-搜索了很长时间，但找不到任何建议编码方式的教程。我找到了如何修复它的命令行方法。所以任何人都可以建议或指出FFMPEG的教程或告诉任何其他方式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:51:44.630

我将从[JavaCV](http://code.google.com/p/javacv/source/browse/#git/src/main/java/com/googlecode/javacv%253Fstate%253Dclosed)开始。它非常好且灵活。它应该允许您抓取帧，合成它们并将它们写回文件。使用 FFmpegFrameGrabber 和 Recorder 类。合成可以手动完成。

其余的答案取决于几件事：

*   你想从文件/内存/url中读取吗？
*   你想保存到文件/mem/url吗？
*   你需要实时处理吗？
*   您需要的不仅仅是简单的画中画吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T11:23:30.457

您可以使用 OpenGL 来解决问题。但是请注意，您将需要渲染步骤，一个在 FBO 中渲染第一个视频，然后第二个渲染第二个视频，使用 FBO 作为 TEXTURE0，第二个作为 EXTERNAL_TEXTURE。

混合，所有你想要的东西都将由 OpengL 完成。

你可以在这里查看源代码：[在Android中使用SurfaceTexture](https://stackoverflow.com/questions/6414003/using-surfacetexture-in-android/14999648#14999648)和一些重要信息在这里：[SurfaceTexture（外部图像）和普通纹理的Android OpenGL组合](https://stackoverflow.com/questions/13376254/android-opengl-combination-of-surfacetexture-external-image-and-ordinary-textu/15660225#15660225)

我唯一不确定的是当两个媒体播放器实例并行运行时会发生什么。我想这应该不是问题。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-19T12:17:46.587

ffmpeg 是一个非常活跃的项目，一直有很多变化和发布。

您应该查看 Xuggler 项目，它为您想要做的事情提供了一个 Java API，并且它们与 ffmpeg 紧密集成。

[http://www.xuggle.com/xuggler/](http://www.xuggle.com/xuggler/)

如果您选择走 Runtime.exec() 路径，这个 Red5 线程应该很有用：

[http://www.nabble.com/java-call-ffmpeg-ts15886850.html](http://www.nabble.com/java-call-ffmpeg-ts15886850.html)

# google-maps - 谷歌地图 Restful Webservice - 位置错误

> ID：15497243
> 
> 赞同：1
> 
> 时间：2013-03-19T10:43:41.027
> 
> 标签：google-maps, google-maps-api-3, netbeans-7

我正在测试有关 Restful [Webservices 入门的 Netbeans 教程 Restful Webservices](http://netbeans.org/kb/docs/websvc/rest.html)

一切似乎都正常，但问题是无论我给出什么地址，地图总是显示相同的位置。（赤道上的非洲附近。认为它是默认位置）。如教程中所述，我从 Google 获得了一个 api 密钥。

试图读取萤火虫的响应。没有错误，但响应并不容易理解。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-15T13:01:09.850

我不知道你是否找到了解决方案，但我遇到了同样的问题，看了一圈后，得出的结论是问题出在地理编码查询的返回值上（查找' GoogleMapService.java 中的 codeStr'）。

本教程使用谷歌地理编码 API 的 v2，这个问题与谷歌地图在 2013 年 3 月 8 日对 v2 的贬值有关。我敢打赌你从地理编码 API 收到 610 代码而不是预期的响应，所以标记绘制在 0 lat，0 long。

[您可以在此处](https://stackoverflow.com/questions/15288244/google-geocoding-v2-api-stopped-working-suddenly "堆栈溢出问题")找到有关 GoogleMaps API 更改的更多信息，也可以在[Geocoding API](https://developers.google.com/maps/documentation/geocoding/v2/)的站点上找到。希望本教程的创建者将对其进行更新以使其再次进入工作状态，因为它是一个很好的信息来源。

再说一次，可能是受 v2 折旧影响的 RESTful api 的 Netbeans 实现。

# jquery - jQuery css('padding') - Firefox 的问题

> ID：15497246
> 
> 赞同：19
> 
> 时间：2013-03-19T10:43:56.640
> 
> 标签：jquery, css, firefox, padding

当您尝试获取[元素](http://api.jquery.com/css/)的`padding`.

我使用 时没有问题`.css('padding-left')`，但最好写一行而不是 4 行，特别是在像这样的简单功能上。

这是一个显示我的问题的示例，请比较 Chrome/Firefox 行为：

```
$('#log').append(
    'padding : '+        $('#sample').css('padding')+'\n'+
    'padding-top : '+    $('#sample').css('padding-top')+'\n'+
    'padding-bottom : '+ $('#sample').css('padding-bottom')+'\n'+
    'padding-left : '+   $('#sample').css('padding-left')+'\n'+
    'padding-right : '+  $('#sample').css('padding-right')+'\n'
);
```

```
#sample {
    border: 1px solid black;
    padding: 8px;
    margin: 10px;
}
#log {
    padding: 8px;
    margin: 10px;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<div id="sample">Lorem ipsum</div>
<textarea id="log" rows="10" cols="50"></textarea>
```

我错过了什么吗？`padding`或者是否有一种解决方法可以在不调用 4 个函数的情况下检索元素？

谢谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-19T10:50:26.113

请参阅[错误 #13421](http://bugs.jquery.com/ticket/13421)（尽管这实际上不是错误）。

[css()](http://api.jquery.com/css/)的文档说：

> 不支持速记 CSS 属性（例如`margin`, `background`, ）。`border`例如，如果要检索渲染的边距，请使用:`$(elem).css('marginTop')`和`$(elem).css('marginRight')`，依此类推。

`padding`是这样一个属性，所以你确实必须使用`paddingLeft`,`paddingRight`等。

# ruby-on-rails - Rails has_many 通过任何？/ 空的？

> ID：15497256
> 
> 赞同：1
> 
> 时间：2013-03-19T10:44:31.337
> 
> 标签：ruby-on-rails, ruby

我在 rails 3 app 上发现了一个不寻常的情况。

考虑以下模型：

```
class Genre < ActiveRecord::Base
  has_many :banner_genres, :dependent => :destroy
  has_many :banners, :through => :banner_genres
  ...

class BannerGenre < ActiveRecord::Base
  attr_accessible :banner_id, :banner, :genre_id, :genre, :position

  belongs_to :genre
  belongs_to :banner
  ...

class Banner < ActiveRecord::Base
  has_many :banner_genres, :dependent => :destroy
  has_many :genres, :through => :banner_genres
  ... 
```

现在，如果我有一个带有横幅的流派，我会在 rails 控制台中看到以下几行：

```
1.9.3p362 :005 > g = Genre.find 62
  Genre Load (0.8ms)  SELECT "genres".* FROM "genres" WHERE "genres"."id" = $1 LIMIT 1  [["id", 62]]
 => #<Genre id: 62, ...

1.9.3p362 :006 > g.banner_genres.any?
   (0.5ms)  SELECT COUNT(*) FROM "banner_genres" WHERE "banner_genres"."genre_id" = 62
 => true 

1.9.3p362 :007 > g.banners
  Banner Load (1.0ms)  SELECT "banners".* FROM "banners" INNER JOIN "banner_genres" ON "banners"."id" = "banner_genres"."banner_id" WHERE "banner_genres"."genre_id" = 62 ORDER BY position
 => [#<Banner id: 446, ...

1.9.3p362 :008 > g.banners.any?
 => false 
```

为什么要`.any?`退货`false`？我通过在同一个项目上的关联与另一个 has_many 联系，它返回`true`。

**编辑：**

在这里传递代码时我有一个错字。它是 has_many 上的 banner_genres。不是流派横幅。

反向关联也按预期工作：

```
1.9.3p362 :004 > b = Banner.find 446
  Banner Load (1.1ms)  SELECT "banners".* FROM "banners" WHERE "banners"."id" = $1 ORDER BY position LIMIT 1  [["id", 446]]
 => #<Banner id: 446...

1.9.3p362 :005 > b.genres.any?
 (0.8ms)  SELECT COUNT(*) FROM "genres" INNER JOIN "banner_genres" ON "genres"."id" = "banner_genres"."genre_id" WHERE "banner_genres"."banner_id" = 446
 => true 
```

**编辑 2**

更奇怪的控制台输出：

```
1.9.3p362 :007 > g.banners.class
 => Array 
1.9.3p362 :008 > g.banners.any?
 => false 
1.9.3p362 :004 > g.banners.any? {|b| b}
 => true 
1.9.3p362 :006 > g.banners.count
 (0.9ms)  SELECT COUNT(*) FROM "banners" INNER JOIN "banner_genres" ON "banners"."id" = "banner_genres"."banner_id" WHERE "banner_genres"."genre_id" = 62
 => 1 
1.9.3p362 :009 > g.banners.to_a.any?
 => true 
```

**编辑 3**

```
g.banner_genres
  BannerGenre Load (0.7ms)  SELECT "banner_genres".* FROM "banner_genres" WHERE "banner_genres"."genre_id" = 62
 => [#<BannerGenre id: 4, genre_id: 62, banner_id: 446, position: 1, created_at: "2013-03-15 16:41:10", updated_at: "2013-03-15 16:41:10">] 
```

**编辑 4**由 Aleks 提出

*您能否显示在 g.banners.any 上显示的查询？和 g.banners。* 这是完全相同的查询，甚至更奇怪。我也没有覆盖任何？任何地方的方法。

```
1.9.3p362 :037 > g.banners(true)
  Banner Load (1.0ms)  SELECT "banners".* FROM "banners" INNER JOIN "banner_genres" ON "banners"."id" = "banner_genres"."banner_id" WHERE "banner_genres"."genre_id" = 62 ORDER BY position
 => [#<Banner id: 446, ...
1.9.3p362 :038 > g.banners(true).any?
  Banner Load (1.2ms)  SELECT "banners".* FROM "banners" INNER JOIN "banner_genres" ON "banners"."id" = "banner_genres"."banner_id" WHERE "banner_genres"."genre_id" = 62 ORDER BY position
 => false 

1.9.3p362 :039 > g.banners.method(:any?)
 => #<Method: Array(Enumerable)#any?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:14:13.270

这里真正的问题不是关联是好是坏，而是为什么它显示`false`为包含元素的数组。很明显它正在返回值，但问题是它为什么返回`false`

解释可能就在这里：[无法获得 Ruby 的#any？使用 nil 对象列表返回 false](https://stackoverflow.com/questions/8478389/unable-to-get-rubys-any-to-return-false-with-list-of-nil-objects)

看看它`any?`是如何实现的，以及它与你的问题的关系，它可能会给你一个提示。

请参阅此链接：[http ://apidock.com/ruby/Enumerable/any%3F](http://apidock.com/ruby/Enumerable/any%3F)

**编辑：**

你在说什么：首先你有一个数组`objects`。哪个会`any?`回来`false`

但如果你这样做，`.to_a`你会做这样的事情：

```
Time.new.to_a   #=> [39, 54, 8, 9, 4, 2013, 3, 99, true, "CET"] 
```

这就是它会返回的原因`true`，因为您将拥有不为空的对象。

**编辑 2**

请注意：如果`any?`数组`false`中的所有对象都是`nil`或`false`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T11:58:23.657

`any?`应该返回`true`....我对这个问题非常好奇，所以我决定模拟它。

```
g = Genre.find 1
Genre Load (30.1ms)  SELECT "genres".* FROM "genres" WHERE "genres"."id" = $1 LIMIT 1  [["id", 1]]
=> #<Genre id: 1, name: "a", created_at: "2013-03-19 11:44:32", updated_at: "2013-03-19 11:44:32"> 

g.banner_genres.any?
(0.3ms)  SELECT COUNT(*) FROM "banner_genres" WHERE "banner_genres"."genre_id" = 1
=> true 

g.banners
Banner Load (0.5ms)  SELECT "banners".* FROM "banners" INNER JOIN "banner_genres" ON "banners"."id" = "banner_genres"."banner_id" WHERE "banner_genres"."genre_id" = 1
=> [#<Banner id: 1, name: "1", created_at: "2013-03-19 11:43:00", updated_at: "2013-03-19 11:43:00">, #<Banner id: 2, name: "2", created_at: "2013-03-19 11:43:59", updated_at: "2013-03-19 11:43:59">] 

g.banners.any?
=> true 
```

还，

```
g.banners.class
=> Array 
g.banners.any?
=> true 
g.banners.to_a.any?
=> true 
```

您的代码中还有其他内容...

# javascript - 如何在不使用 EF 的情况下将上下文元数据添加到我的实体？

> ID：15497258
> 
> 赞同：2
> 
> 时间：2013-03-19T10:44:34.307
> 
> 标签：javascript, asp.net-mvc, sharepoint, breeze

我必须实现一个架构，不幸的是，我们使用 SharePoint 2013 作为我们的主要数据库。（不是我的选择，以防你没有选择）。我在服务器上有一个 Asp.Net MVC 外观应用程序，处理来自 SP 和其他几个数据源的数据组合，然后是一个 JavaScript SPA 作为客户端。另一个问题是客户端需要能够离线工作，所以我需要使用 IndexedDB 来存储数据以供离线访问。

这似乎是微风.js 的完美用例。我的基本架构是在 MVC 外观中定义一个强类型模型，它将包装我从 SP 获得的无类型数据（以 object [“property”] 形式 - 使用 SP 客户端对象模型）。Breeze 将处理此模型和客户端之间的同步，我将根据需要使用导出/导入功能在 IndexedDB 中缓存数据。

到现在为止还挺好。但是……微风站点上的 SOA 示例仍在开发中（对我来说，这基本上是一种 SOA 架构，每个 SP 列表都是一个要组合的服务）。我能找到的最接近的东西是[NoDB](http://www.breezejs.com/samples/nodb)示例，但它在客户端上硬编码元数据。我想在 MVC 模型中建立关系和验证，然后将它们传递给客户端，因此验证可以在两个地方运行相同的声明。

这可能吗？如果是这样 - 如何？如果没有，是否有人有解决方法或更好的主意？我已经习惯于在两个不同的地方定义模型（外观和隐含的 SP 列表的结构）。我非常希望避免在客户端中第三次实施它。我愿意让微风.js 直接与 SP REST 端点对话，但我从[https://stackoverflow.com/a/15364503/1014822](https://stackoverflow.com/a/15364503/1014822)的理解是该实现存在缺陷并且没有公开所需的元数据。

**解决方案**：根据以下接受的答案，我得出以下解决方案：

1) 从 SP ListData.svc 端点生成服务引用 - 从而创建 edmx 和代理类。

`BuildJsonMetadata`2）在我的存储库中扩展 ContextProvider 并像这样覆盖：

```
protected override string BuildJsonMetadata()
{
    XDocument xDoc = XDocument.Load(HttpContext.Current.Server.MapPath("PATH_TO_EDMX"));
    String xString = xDoc.ToString();
    xString = xString.Replace("DATA_SERVICE_NAMESPACE", "APP_NAMESPACE");
    xDoc = XDocument.Parse(xString);
    var jsonText = CsdlToJson(xDoc);
    return jsonText;
} 
```

3）稍微修改一下breeze.js，编辑第12383行：

```
var schema = metadata.schema || metadata["edmx:Edmx"]["edmx:DataServices"].schema; 
```

（我大概也可以通过为我的 xDoc 选择后代而不是根节点来在 ContextProvider 中解决这个问题）

4) - 可以选择使用@Christoff 非常有用的[T4TS.tt](https://github.com/cskeppstedt/t4ts)模板脚本从服务代理类生成一个 d.ts，这样我就可以对微风加载的数据进行类型安全。

到目前为止，这个设置很好 - 我可以使用元数据执行基本的 CRUD，由 SP 作为数据源支持。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T17:21:36.083

从**v 1.2.7**开始，我们已经记录了 Breeze 的元数据模式，并且从您的 web 服务返回的遵循此模式的 json 对象现在将被 Breeze 接受。

--- 之前的帖子在下面

我们将在接下来的一周左右记录如何公开任意服务器端元数据，随后不久将提供一些如何使用任意 Web 服务的示例。还涉及一些小的代码更改。

目前，在这些文档完成之前，最好的解决方法是在客户端上创建元数据并使用 jsonResultsAdapter 将服务调用的结果塑造成“实体”。您在客户端创建的元数据将与您最终在服务器上创建并发送到客户端的元数据完全相同。

希望这可以帮助。

# javascript - Javascript中的重写方法

> ID：15497259
> 
> 赞同：13
> 
> 时间：2013-03-19T10:44:37.320
> 
> 标签：javascript, prototype, overriding

我想知道有原型和没有原型的重写方法有什么区别。考虑：

**示例 1：**

```
function Animal() {
    this.sleep = function () {
        alert("animal sleeping");
    };

    this.eat = function () {
        alert("animal eating");
    };
}

function Dog() {
    this.eat = function () {
        alert("Dog eating");
    };
}

Dog.prototype = new Animal;

var dog = new Dog;

dog.eat(); 
```

**示例 2：**

```
function Animal() { }

function Dog() { }

Animal.prototype.sleep = function () {
    alert("animal sleeping");
};

Animal.prototype.eat = function () {
    alert("animal eating");
};

Dog.prototype = new Animal;

Dog.prototype.eat = function () {
    alert("Dog eating");
};

var dog = new Dog;

dog.eat(); 
```

我觉得这两个示例都产生了相同的效果，即`Dog`该类覆盖了该类的 eat 方法`Animal`。或者发生了什么不同的事情？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-19T10:49:10.187

在第一个方法中，每个`Animal`实例都将获得自己的`sleep`和`eat`方法的实现。

而在第二个模型中，所有实例都将共享`sleep`和`eat`方法的同一个实例。

第二个模型更好，因为我们可以共享方法。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-19T11:03:36.837

正如 Arun 在第一个示例中提到的，您正在为每个新实例创建`sleep`和函数。`eat`在第二个示例中，只有一个`sleep`和`eat`函数在所有实例之间共享。

在这种情况下，第二种方法更好，但最好知道何时使用第一种方法以及何时使用第二种方法。先说一点理论：

**注意：** JavaScript 中有四种变量 - `private`、`public`和.`shared``static`

私有变量在定义它们的函数之外是不可访问的。例如：

```
function f() {
    var x; // this is a private variable
} 
```

公共变量是在`this`函数内部的对象上定义的。例如：

```
function f() {
    this.x; // this is a public variable
} 
```

共享变量`prototype`在函数上共享。例如：

```
function f() {}

f.prototype.x; // this is a shared variable 
```

静态变量是函数本身的属性。例如：

```
function f() {}

f.x; // this is a static variable 
```

通常最好将构造函数的方法声明为共享方法，因为构造函数的所有实例共享它们。但是，如果您的方法需要访问私有变量，则必须将其声明为公共方法本身。

**注意：**这是我自己的命名法。没有多少 JavaScript 程序员坚持它。其他人似乎遵循道格拉斯·克罗克福德的命名法：http: [//javascript.crockford.com/private.html](http://javascript.crockford.com/private.html)

要了解有关 JavaScript 中原型继承的更多信息，请阅读以下答案：[https ://stackoverflow.com/a/8096017/783743](https://stackoverflow.com/a/8096017/783743)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T11:05:17.627

在您的第一个示例中，每个新`Dog`实例都有自己的`eat`方法，而在第二个示例中，只有一个`eat`方法 on `Dog.prototype`，它将在所有未来的实例之间共享，`Dog`例如 Arun 提到的。

这是这两者之间唯一的*“棘手”*区别。但是最好在 上定义方法`prototype`以避免高内存消耗和泄漏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T11:18:47.987

第一个示例中的方法是在对象实例中定义的。

您正在将`Dog`原型设置为一个新`Animal`实例，因此`Dog`将从. 然后你在构造**函数**中定义（NOT **OVERRIDING**）方法作为实例方法，这将**隐藏**实例中的继承方法。`sleep``eat``Animal`****`eat``Dog`**`eat``Dog`******

 ******考虑以下示例：

```
function LittleDog() { }
LittleDog.prototype = Object.create(Dog.prototype);
(new LittleDog()).eat(); 
```

`animal eating`上面的代码将在第一个示例中使用您的代码发出警报。

`Dog eating`并会在第二个代码中发出警报。******

# jquery - 骨干+ rails jquery不调用错误回调

> ID：15497260
> 
> 赞同：0
> 
> 时间：2013-03-19T10:44:40.347
> 
> 标签：jquery, ruby-on-rails, backbone.js, coffeescript

我在主干模型中创建了一个方法来进行授权。它正确选择了用户，问题是出错时会调用成功授权的回调...我似乎无法解决此问题...

```
class Notes.Models.User extends Backbone.Model
  url: '/api/account'
  authorize: ->
    jQuery.ajax(
      type: 'POST'
      url: '/api/sessions.json'
      data:
        email: @get('email')
        password:  @get('password')
    ).success( (response) ->
      alert('success!')
      console.log(response)
    ).error( (response) ->
      alert('error')
    ) 
```

和导轨部分

```
def create
    @user = User.authenticate params[:email], params[:password]
    if @user
      create_user_session @user
      respond_with @user, location:'/'
    else
      respond_to do |format|
        format.json { render json: { error: 'invalid email or password' } }
      end
    end
  end 
```

你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:07:25.057

jQuery ajax 成功和错误回调基于 HTTP 状态代码。否则它怎么知道请求是否成功。

所以你应该像这样返回一个错误的http状态码：

```
format.json { render json: { error: 'invalid email or password' }, status: 401 } 
```

# android - 打开 Instagram 用户资料

> ID：15497261
> 
> 赞同：31
> 
> 时间：2013-03-19T10:44:44.080
> 
> 标签：android, android-intent, instagram

我设法从我的应用程序中打开`Twitter`和`Facebook`用户个人资料。但我找不到任何对`Instagram`.

**有没有办法打开 `Instagram`以便在 twitter 或 facebook 中显示用户个人资料？**

例如，为了`Intent`启动 twitter 应用程序，我这样做：

```
public Intent getOpenTwitterIntent(Context context) {

    try {
        return new Intent(Intent.ACTION_VIEW,
                Uri.parse("twitter://user?screen_name="
                        .concat(twitterUsername)));

    } catch (Exception e) {
        return new Intent(
                Intent.ACTION_VIEW,
                Uri.parse("https://twitter.com/#!/".concat(twitterUsername)));
    }

} 
```

我怎样才能达到类似的效果`Instagram`？提前致谢。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2014-10-04T05:56:01.480

这是一种`Intent`将 Instagram 应用程序打开到用户个人资料页面的方法：

```
/**
 * Intent to open the official Instagram app to the user's profile. If the Instagram app is not
 * installed then the Web Browser will be used.</p>
 * 
 * Example usage:</p> {@code newInstagramProfileIntent(context.getPackageManager(), 
 *     "http://instagram.com/jaredrummler");}</p>
 * 
 * @param pm
 *            The {@link PackageManager}. You can find this class through
 *            {@link Context#getPackageManager()}.
 * @param url
 *            The URL to the user's Instagram profile.
 * @return The intent to open the Instagram app to the user's profile.
 */
public static Intent newInstagramProfileIntent(PackageManager pm, String url) {
    final Intent intent = new Intent(Intent.ACTION_VIEW);
    try {
        if (pm.getPackageInfo("com.instagram.android", 0) != null) {
            if (url.endsWith("/")) {
                url = url.substring(0, url.length() - 1);
            }
            final String username = url.substring(url.lastIndexOf("/") + 1);
            // http://stackoverflow.com/questions/21505941/intent-to-open-instagram-user-profile-on-android
            intent.setData(Uri.parse("http://instagram.com/_u/" + username));
            intent.setPackage("com.instagram.android");
            return intent;
        }
    } catch (NameNotFoundException ignored) {
    }
    intent.setData(Uri.parse(url));
    return intent;
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-11-15T10:31:10.027

到目前为止，我找不到直接显示用户个人资料的方法..但是有一种方法..

[从 GitHub 的 Instagram Manifest 中](https://github.com/danthemellowman/instagram-decompiled/blob/master/AndroidManifest.xml)找到此解决方案

```
 Intent iIntent = getPackageManager().getLaunchIntentForPackage("com.instagram.android");

iIntent.setComponent(new ComponentName( "com.instagram.android", "com.instagram.android.activity.UrlHandlerActivity"));
iIntent.setData( Uri.parse( "http://instagram.com/p/gjfLqSBQTJ/") );

startActivity(iIntent); 
```

这将打开用户在应用程序中发布的特定图片。从页面应用程序用户可以打开带有链接的个人资料。

如果你想打开最近的帖子什么的，你可以使用[Instagram API](http://instagram.com/developer/endpoints/)

这不是我们想要的，但现在更好的选择......我猜:)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-06-24T06:44:24.937

经过简短的搜索并尝试了我们都知道的“WON'T WORK”后，我得到了这个工作

```
 Uri uri = Uri.parse("http://instagram.com/mzcoco2you");
 Intent intent = new Intent(Intent.ACTION_VIEW, uri);
 startActivity(intent); 
```

这应该会启动您的默认浏览器，然后……就可以了。答案是“instagram.com”+“/UserName”。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-06-04T13:33:26.147

直接打开 Instagram 应用到用户个人资料：

```
String scheme = "http://instagram.com/_u/USER";
String path = "https://instagram.com/USER";
String nomPackageInfo ="com.instagram.android";
    try {
        activite.getPackageManager().getPackageInfo(nomPackageInfo, 0);
        intentAiguilleur = new Intent(Intent.ACTION_VIEW, Uri.parse(scheme));
        } catch (Exception e) {
            intentAiguilleur = new Intent(Intent.ACTION_VIEW, Uri.parse(path));
        }
        activite.startActivity(intentAiguilleur); 

// Use this link to open directly a picture
  String scheme = "http://instagram.com/_p/PICTURE"; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-01-06T05:20:19.487

```
try {
    Intent intent = new Intent(Intent.ACTION_VIEW);
    intent.setData(Uri.parse("http://instagram.com/_u/" + "username"));
    intent.setPackage("com.instagram.android");
    startActivity(intent);
    } 
  catch (android.content.ActivityNotFoundException anfe) 
     {
       startActivity(new Intent(Intent.ACTION_VIEW,
       Uri.parse("https://www.instagram.com/" + username)));
     } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-29T18:39:13.153

不幸的是，目前您无法打开 Instagram 应用程序以直接转到用户个人资料。但是，您可以在 Instagram 应用中打开某张照片。

我提供的以下代码将在 Instagram 应用程序中打开某张照片。如果没有安装 Instagram 应用程序，它将在浏览器中打开用户个人资料。

```
public void openInstagram (View view) {
    Intent intent = null;
    String pictureId = "p/0vtNxgqHx9";
    String pageName = "d4v3_r34d";
    try {intent = getPackageManager().getLaunchIntentForPackage("com.instagram.android");
        intent.setComponent(new ComponentName("com.instagram.android", "com.instagram.android.activity.UrlHandlerActivity"));
        intent.setData(Uri.parse("http://instagram.com/" + pictureId));
    } catch (Exception e) {
        intent = new Intent(Intent.ACTION_VIEW, Uri.parse("http://instagram.com/" + pageName));
    }
    this.startActivity(intent); 
```

我很容易为您自己的目的编辑此代码。将“String pictureId”设置为您要显示的图片的 ID，并将“String pageName”设置为您 Instagram 帐户的用户名。

用户名部分很明显，但如果您需要帮助来获取图片 ID，请查看此[图片](http://i.stack.imgur.com/dNNQ5.jpg)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-20T17:58:15.870

检查下面的代码：

```
Intent instaintent = getPackageManager().getLaunchIntentForPackage("com.instagram.android");
instaintent.setData(Uri.parse("https://www.instagram.com/insta_save_new/"));    
startActivity(instaintent); 
```

# python - django 测试中的修补（模拟）表单形式

> ID：15497264
> 
> 赞同：2
> 
> 时间：2013-03-19T10:44:49.150
> 
> 标签：python, django, testing, mocking, python-mock

我试图用 mock.patch 模拟表单并且不能。我有这个代码

表格.py

```
class CreatePostForm(object):
    pass 
```

视图.py：

```
from forms import CreatePostForm

def doit():
    print CreatePostForm() 
```

我想单独测试这个视图。我试图用 mock.patch 修补表单，我写了这样的东西：

测试.py：

```
from mock import patch

import views

with patch('forms.CreatePostForm') as Form:
    views.doit() 
```

我试图用谷歌搜索解决方案，但一无所获

**已回答：**感谢@dstanek 提供好的答案和好的代码示例

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T15:27:58.987

当您使用补丁时，您指定要模拟的对象的目标。这通常是导入的地方，而不是定义的地方。

这是因为当您的测试运行时，`views`模块已经被导入。如果您像我在下面的示例中那样导入类，那么`views`模块将包含对`forms.CreatePostForm`. 所以改变`forms.CreatePostForm`不会改变这个参考。`forms.CreatePostForm`如果您按照视图中指定的方式导入模块，情况会有所不同。

我在下面包含了一个非常简单的示例。

表格.py

```
class CreatePostForm(object):
    pass 
```

视图.py：

```
from forms import CreatePostForm

def doit():
    print CreatePostForm() 
```

测试.py：

```
from mock import patch

import views

with patch('views.CreatePostForm') as Form:
    views.doit() 
```

# postgresql - PostgreSQL 字段名称

> ID：15497273
> 
> 赞同：1
> 
> 时间：2013-03-19T10:45:14.083
> 
> 标签：postgresql

我现在工作的项目是在 Zend 框架中将数据库从 mysql 升级到 postgreSQL。我已经通过“ESF 数据库迁移工具包”将数据库迁移到 PostgreSQL。像“Emp_FirstName”、“Emp_LastName”等字段名称如何在 PostgreSQL 中存储为“emp_firstname”和“emp_lastname”。这导致代码中的错误。但是，当我将 PostgreSQL 中的文件更新为 Emp_FirstName 时，它​​显示错误

```
********** Error **********

ERROR: column "Emp_FirstName" does not exist
SQL state: 42703
Character: 8 
```

是否可以像在 MYSQL 中一样给出文件名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:03:03.550

迁移工具不是“双引号”标识符，因此它们的大小写被 PostgreSQL 扁平化为小写。您的代码必须引用标识符，以便它们保留大小写。PostgreSQL 区分大小写，并且将不带引号的标识符扁平化，而[MySQL 在 Windows 和 Mac 上不区分大小写，在 *nix 上区分大小写](http://dev.mysql.com/doc/refman/5.6/en/identifier-case-sensitivity.html)。

有关PostgreSQL 行为的详细信息，请参阅[PostgreSQL 手册中有关标识符和关键字的部分。](http://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS)无论如何，您可能应该阅读它，以便您了解字符串引用的工作原理。

您需要选择以下选项之一：

*   将代码更改为不引用标识符；
*   在创建模式时将迁移工具更改为引用标识符；
*   手动迁移架构而不是使用迁移工具；
*   修复手动工具生成的SQL中标识符的引用；或者
*   小写所有标识符，因此对 Pg 无关紧要

当您添加 Oracle 支持并发现 Oracle将所有标识符*大写*时，最后一个选项对您没有帮助，因此我建议选择前四个选项之一。我没有找到让迁移工具在 30 秒的 Google 快速搜索中引用标识符的方法，但没有花太多时间在上面。我会首先在迁移工具中寻找控制引用模式的选项。

PostgreSQL 没有配置选项来始终将标识符视为引号或使用不区分大小写的标识符比较。

这远不是您将遇到的唯一不兼容问题，因此请准备好更改查询和应用程序代码。在某些情况下，如果您计划继续支持 MySQL，您甚至可能需要一个查询 MySQL 和另一个查询 PostgreSQL。

如果您没有在 MySQL 中使用`sql_mode = ANSI`和使用`STRICT`模式，那么与使用这些选项相比，移植时会遇到更多麻烦，因为这两个选项都使 MySQL 更接近 SQL 标准行为。

# php - PHP确定客户端URL类型

> ID：15497275
> 
> 赞同：0
> 
> 时间：2013-03-19T10:45:20.323
> 
> 标签：php, curl

我目前正在编写一个 PHP 脚本，它接收用户输入的 URL，该 URL 指向用户服务器上的文件。我目前基本上使用 cURL 库和`$url = $_POST['url']`变量 url 来做这件事。然而，在我的研究中，我发现我必须使用 cURL 时可能出现问题的 url 类型：

*   URL 是 SSL 或 TSL：目前我正在匹配`$url`with`https://`来捕捉这个。
*   URL 受用户名/密码保护：我可以通过匹配一个`:`后跟一个`@`

但是，我的问题是，如果提交的 url 只是读取，是否有可能使用 PHP 来确定 URL 是否受 SSL 和/或密码保护`www.something.com`？在这种情况下，我需要提醒用户需要更多信息，并且他们需要提供 .pem 文件和/或用户名 + 密码。
我正在考虑捕获一个 cURL 抛出的错误，但我不太确定是哪个。

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:02:41.003

如果 URL 是 SSL，则在 curl 网站上下载[认证包](http://curl.haxx.se/ca/cacert.pem)( [http://curl.haxx.se/ca/cacert.pem](http://curl.haxx.se/ca/cacert.pem) ) 文件并将其保存在您的服务器上，然后将其包含在您的 PHP curl 脚本中，

```
curl_setopt($ch, CURLOPT_SSLCERT, 'cacert.pem'); 
```

用户不必提供`.pem`文件。`cert.pem`将处理 SSL。

# android - Twitter4J - 身份验证 URL 意外加载到 Internet 应用程序中

> ID：15497281
> 
> 赞同：1
> 
> 时间：2013-03-19T10:45:33.957
> 
> 标签：android, webview, twitter4j

好的，我正在使用 Twitter4J，几个月前，这段确切的代码正在我的 Dialog 样式的活动中加载身份验证屏幕。

有人可以解释为什么这段代码现在正在将 url 加载到 Chrome/Internet 等外部应用程序中。WebView 已正确放置在视图中，但未显示 URL……这很奇怪。

```
mReqToken = mTwitter.getOAuthRequestToken(CALLBACK_URL);

            runOnUiThread(new Runnable() {

                @Override
                public void run() {

                    Log.i(TAG, "Starting Webview to login to twitter");
                    WebView twitterSite = new WebView(TwitterShareManager.this);
                    twitterSite.loadUrl(mReqToken.getAuthenticationURL());

                    LinearLayout ll = new LinearLayout(TwitterShareManager.this); 
                    ll.setLayoutParams(new LinearLayout.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT, 
                            ViewGroup.LayoutParams.WRAP_CONTENT));
                    ll.setGravity(Gravity.CENTER_HORIZONTAL | Gravity.CENTER_VERTICAL); //added after suggestion
                    ll.addView(twitterSite);
                    setContentView(ll);                 

                }
            }); 
```

# c++ - Long Atomic Int 的实现

> ID：15497287
> 
> 赞同：0
> 
> 时间：2013-03-19T10:46:15.123
> 
> 标签：c++, multithreading, counter, atomic

我想使用一个通常计数为 2^40 的原子计数器（多线程计算），所以我不能直接使用 32 位 int 原子计数器。我还没有 c++11（我将迁移到它，但还没有，因为这对我来说是有成本的），我必须在 32 位和 64 位平台上编译。我目前使用 QT，所以我可以使用 QAtomicInt。

这是我的想法：

```
(initialization...)
QAtomicInt counterLo = 0;
QAtomicInt counterHi = 0;

void increment()
{
    int before = counterLo.fetchAndAddOrdered(1);
    if(before==INT_MAX)
    {
        counterHi.fetchAndAddOrdered(1); //Increment high word
        counterLo.fetchAndAddOrdered(INT_MAX);    //Increments low word to -1
        counterLo.fetchAndAddOrdered(1);   //Increments low word to 0
    }         
}

uint64_t value()
{
    //Wait until the low word is non-negative
    int lo = counterLow;
    while(lo<0)
        lo = counterLow;

    return (uint64_t)counterHi * ((uint64_t)INT_MAX+1) + (uint64_t)lo;
} 
```

这个对吗？我已经尝试使用互斥锁来制作计数器，但性能下降了大约 10%。这被称为每秒大约 100 万次，在 8 个线程之间共享（蒙特卡罗模拟的样本计数器）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:17:50.053

这不是整体原子的，请参见以下示例：

*   `hi=0,lo=INT_MAX`
*   T1调用`value()`，获取`lo=INT_MAX`，被中断
*   T2 调用将`increment()`hi 增加到 1
*   T1恢复读取`counterHi`，得到1，返回值2^32 + INT_MAX

这可能不是您想要的。难道你不能只分割你的样本空间，让每个线程计算 n/8 个项目而不争夺锁吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T11:25:47.610

当然，这不是原子的。原子操作的序列可以被中断。我建议使用保护（互斥锁或临界区）。

# android - 无法使用groundOverlay在android中的google map api v2上显示图像

> ID：15497292
> 
> 赞同：1
> 
> 时间：2013-03-19T10:46:25.597
> 
> 标签：android, api, google-maps, android-maps-v2

我在android中使用过map api v2。我可以使用 groundoverlay 在地图上加载图像，但图像显示非常小。我需要将图像完全加载到地图视图上，例如覆盖整个地图区域。有人可以帮我解决这个问题吗？[这是](http://www.trimble.com/positioning-services/interactive-map/interactive-map.aspx)我想在地图上加载的图像，谢谢你……

```
public class GroundOverlayDemoActivity extends FragmentActivity implements OnSeekBarChangeListener {

    private static final int TRANSPARENCY_MAX = 100;
    private static final LatLng NEWARK = new LatLng(40.714086, -74.228697);
    //private static final LatLng NEWARK = new LatLng(18.5236, 73.8478);

    private GoogleMap mMap;
    private GroundOverlay mGroundOverlay;
    private SeekBar mTransparencyBar;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.ground_overlay_demo);

        mTransparencyBar = (SeekBar) findViewById(R.id.transparencySeekBar);
        mTransparencyBar.setMax(TRANSPARENCY_MAX);
        mTransparencyBar.setProgress(0);

        setUpMapIfNeeded();
    }

    @Override
    protected void onResume() {
        super.onResume();
        setUpMapIfNeeded();
    }

    private void setUpMapIfNeeded() {
        if (mMap == null) {
            mMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map))
                .getMap();
            if (mMap != null) {
                setUpMap();
            }
        }
    }

    private void setUpMap() {
        mMap.moveCamera(CameraUpdateFactory.newLatLngZoom(NEWARK, 8));

        mGroundOverlay = mMap.addGroundOverlay(new GroundOverlayOptions().image(BitmapDescriptorFactory.fromResource(R.drawable.omnistar_hp)).anchor(0, 1).position(NEWARK, 8600000f, 6500000f));
    //.position(NEWARK, 9999999.0f));//, 10000000f));

        mTransparencyBar.setOnSeekBarChangeListener(this);
    }

    @Override
    public void onStopTrackingTouch(SeekBar seekBar) {}

    @Override
    public void onStartTrackingTouch(SeekBar seekBar) {}

    @Override
    public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
        if (mGroundOverlay != null) {
            mGroundOverlay.setTransparency((float) progress / (float) TRANSPARENCY_MAX);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T05:41:38.027

```
 import android.support.v4.app.FragmentActivity;
        import android.support.v4.app.FragmentManager;
        import android.util.Log;
        import android.util.TypedValue;
        import android.view.Menu;
        import android.view.MenuItem;

        public class MapDisplayActivity extends FragmentActivity implements         OnMapClickListener, OnMapLongClickListener  {
        private GoogleMap myMap;

        private static  LatLng SearchPlace;
        double Latitude;
        double Longitiude;
        List<Address> addresses;

        //Address location;
        BitmapDescriptor image;
    /// private static final LatLng NEWARK = new LatLng(18.5236, 73.8478);

            private GroundOverlay mGroundOverlay;

            //this is for omnistarg dont touch this 
            LatLng southwest= new LatLng(-85.513398,-178.242187);

            LatLng northeast= new LatLng(85.513398,178.242187);

         float zoomValue = 7.0f;
        private String SpinerValue;
        private Bitmap bitmap;
            @Override
            `enter code here`protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mapactivity);
        //VMRuntime.getRuntime().setMinimumHeapSize(4 * 1024 * 1024);
        Log.v("Utils", "Max mem in MB : " +    (Runtime.getRuntime().maxMemory()/(1024*1024)));
        Runtime.getRuntime().maxMemory();
        Debug.getNativeHeapSize();

        initActionBar();

        //textInfo=(TextView)findViewById(R.id.locinfo);

           FragmentManager myFragmentManager = getSupportFragmentManager();
           SupportMapFragment mySupportMapFragment 
            = (SupportMapFragment)myFragmentManager.findFragmentById(R.id.map);
           myMap = mySupportMapFragment.getMap();

          // myMap.setMyLocationEnabled(true);

          // myMap.setMapType(GoogleMap.MAP_TYPE_HYBRID);
           myMap.setMapType(GoogleMap.MAP_TYPE_NORMAL);
          // myMap.setMapType(GoogleMap.MAP_TYPE_SATELLITE);
           //myMap.setMapType(GoogleMap.MAP_TYPE_TERRAIN);

           myMap.setOnMapClickListener(this);
           myMap.setOnMapLongClickListener(this);
           myMap.getUiSettings().setZoomControlsEnabled(true);
           myMap.getUiSettings().setMyLocationButtonEnabled(true);

           Intent intent=getIntent();
           Latitude=intent.getDoubleExtra("Latitude", 0.000);
           Longitiude=intent.getDoubleExtra("Longititude", 0.000);
           SpinerValue=(String)intent.getStringExtra("SPINNERVALUE");

           SearchPlace = new LatLng(Latitude, Longitiude);

           myMap.moveCamera(CameraUpdateFactory.newLatLng(SearchPlace));
           myMap.addMarker(new   MarkerOptions().position(SearchPlace));//.title(PlaceName));
           drawImageOverMap();

//         BitmapFactory.Options opts=new BitmapFactory.Options();
//         opts.inDither=false;                     //Disable Dithering mode
//         opts.inPurgeable=true;        
//         opts.inSampleSize=8;
//        Bitmap largeIcon = BitmapFactory.decodeResource(getResources(), R.drawable.omnistar_g);

    }

    public void drawImageOverMap(){

           myMap.animateCamera(CameraUpdateFactory.zoomTo(zoomValue));

                //image =BitmapDescriptorFactory.fromResource(R.drawable.omnistar_g);
           if(SpinerValue.equalsIgnoreCase("TEC")){
               //centerpoint_vrs
               bitmap =   (Bitmap)BitmapFactory.decodeResource(this.getResources(), R.drawable.omnistar_two);

                BitmapFactory.Options o2 = new BitmapFactory.Options();
                 o2.inSampleSize=4;
                 image=BitmapDescriptorFactory.fromBitmap(bitmap);
                    LatLngBounds bounds =new LatLngBounds( southwest,  northeast);

                    mGroundOverlay  = myMap.addGroundOverlay(new GroundOverlayOptions()
                        .image(image)
                        //.transparency(0.4f)

                        //.anchor(0, 1)
                        .positionFromBounds(bounds));

           }
           else if(SpinerValue.equalsIgnoreCase("OmniSTARG2")){
               bitmap = (Bitmap)BitmapFactory.decodeResource(this.getResources(), R.drawable.omnistar_g_img);

                BitmapFactory.Options o2 = new BitmapFactory.Options();
                 o2.inSampleSize=4;
                 image=BitmapDescriptorFactory.fromBitmap(bitmap);
                    LatLngBounds bounds =new LatLngBounds( southwest,  northeast);

                    mGroundOverlay  = myMap.addGroundOverlay(new GroundOverlayOptions()
                        .image(image)
                        .transparency(0.4f)

                        //.anchor(0, 1)
                        .positionFromBounds(bounds));
           }
           else if(SpinerValue.equalsIgnoreCase("OmniStarHP")){
               bitmap = (Bitmap)BitmapFactory.decodeResource(this.getResources(), R.drawable.omnistar_hp_two);

                BitmapFactory.Options o2 = new BitmapFactory.Options();
                 o2.inSampleSize=4;
                 image=BitmapDescriptorFactory.fromBitmap(bitmap);
                    LatLngBounds bounds =new LatLngBounds( southwest,  northeast);

                    mGroundOverlay  = myMap.addGroundOverlay(new GroundOverlayOptions()
                        .image(image)
                        .transparency(0.4f)

                        //.anchor(0, 1)
                        .positionFromBounds(bounds));
           }
           /////////////////////////////////////////////
           else if(SpinerValue.equalsIgnoreCase("OmniStarVBS")){
               bitmap = (Bitmap)BitmapFactory.decodeResource(this.getResources(), R.drawable.omnistar_vbs_two);

                BitmapFactory.Options o2 = new BitmapFactory.Options();
                 o2.inSampleSize=4;
                 image=BitmapDescriptorFactory.fromBitmap(bitmap);
                    LatLngBounds bounds =new LatLngBounds( southwest,  northeast);

                    mGroundOverlay  = myMap.addGroundOverlay(new GroundOverlayOptions()
                        .image(image)
                        .transparency(0.4f)

                        //.anchor(0, 1)
                        .positionFromBounds(bounds));

           }
           else if(SpinerValue.equalsIgnoreCase("OmniSTARXP")){
               bitmap = (Bitmap)BitmapFactory.decodeResource(this.getResources(), R.drawable.omnistar_xp_two);

                BitmapFactory.Options o2 = new BitmapFactory.Options();
                 o2.inSampleSize=4;
                 image=BitmapDescriptorFactory.fromBitmap(bitmap);
                    LatLngBounds bounds =new LatLngBounds( southwest,  northeast);

                    mGroundOverlay  = myMap.addGroundOverlay(new GroundOverlayOptions()
                        .image(image)
                        .transparency(0.4f)

                        //.anchor(0, 1)
                        .positionFromBounds(bounds));
           }
           else if(SpinerValue.equalsIgnoreCase("RTXStandardviaCellular")){
              //rtxcell 
               bitmap = (Bitmap)BitmapFactory.decodeResource(this.getResources(), R.drawable.rtx_cell_two);

                BitmapFactory.Options o2 = new BitmapFactory.Options();
                 o2.inSampleSize=4;
                 image=BitmapDescriptorFactory.fromBitmap(bitmap);
                    LatLngBounds bounds =new LatLngBounds( southwest,  northeast);

                    mGroundOverlay  = myMap.addGroundOverlay(new GroundOverlayOptions()
                        .image(image)
                        .transparency(0.3f)

                        //.anchor(0, 1)
                        .positionFromBounds(bounds));
           }
           else if(SpinerValue.equalsIgnoreCase("RTXFastviaSatellite")){
               //rtxfast.png
               bitmap = (Bitmap)BitmapFactory.decodeResource(this.getResources(), R.drawable.rtx_fast_two);

                BitmapFactory.Options o2 = new BitmapFactory.Options();
                 o2.inSampleSize=4;
                 image=BitmapDescriptorFactory.fromBitmap(bitmap);
                    LatLngBounds bounds =new LatLngBounds( southwest,  northeast);

                    mGroundOverlay  = myMap.addGroundOverlay(new GroundOverlayOptions()
                        .image(image)
                        .transparency(0.3f)

                        //.anchor(0, 1)
                        .positionFromBounds(bounds));
           }
           else if(SpinerValue.equalsIgnoreCase("RTXStandardviaSatellite")){
               //rtxsat.png
               bitmap = (Bitmap)BitmapFactory.decodeResource(this.getResources(), R.drawable.rtx_sat_two);

                BitmapFactory.Options o2 = new BitmapFactory.Options();
                 o2.inSampleSize=4;
                 image=BitmapDescriptorFactory.fromBitmap(bitmap);
                    LatLngBounds bounds =new LatLngBounds( southwest,  northeast);

                    mGroundOverlay  = myMap.addGroundOverlay(new GroundOverlayOptions()
                        .image(image)
                        .transparency(0.3f)

                        //.anchor(0, 1)
                        .positionFromBounds(bounds));
           }
           else if(SpinerValue.equalsIgnoreCase("VRSNow")){
               //vrsnowtec.png
               bitmap = (Bitmap)BitmapFactory.decodeResource(this.getResources(), R.drawable.vrsnow_tec_two);

                BitmapFactory.Options o2 = new BitmapFactory.Options();
                 o2.inSampleSize=4;
                 image=BitmapDescriptorFactory.fromBitmap(bitmap);
                    LatLngBounds bounds =new LatLngBounds( southwest,  northeast);

                    mGroundOverlay  = myMap.addGroundOverlay(new GroundOverlayOptions()
                        .image(image)
                        .transparency(0.3f)

                        //.anchor(0, 1)
                        .positionFromBounds(bounds));
           }
                        // InputStream is =getClass().getResourceAsStream(omnistar_g);
                        //bitmap = readAssetsBitmap("omnistar_g.png");
                         //bitmap =  BitmapFactory.decodeResource(this.getResources(), R.drawable.trimble_screen_logo);
                         //bitmap=bitmap(is);

                         //image =BitmapDescriptorFactory.fromResource(R.drawable.omnistar_g);

                                 bitmap.recycle();
                                 bitmap = null;
                                 System.gc();
                                 Runtime.getRuntime().gc(); 

    } 
```

# iis - 由于当前总内存导致 IIS 服务器错误

> ID：15497296
> 
> 赞同：34
> 
> 时间：2013-03-19T10:46:30.633
> 
> 标签：iis, memory

**最终如何解决这个错误？**

* * *

“/****StatWCF_OData”应用程序中的服务器错误。

```
Memory gates checking failed because the free memory (373817344 bytes) is less than 5% of total memory.  As a result, the service will not be available for incoming requests.  To resolve this, either reduce the load on the machine or adjust the value of minFreeMemoryPercentageToActivateService on the serviceHostingEnvironment config element.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.InsufficientMemoryException: Memory gates checking failed because the free memory (373817344 bytes) is less than 5% of total memory.  As a result, the service will not be available for incoming requests.  To resolve this, either reduce the load on the machine or adjust the value of minFreeMemoryPercentageToActivateService on the serviceHostingEnvironment config element. 
```

源错误：

```
An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below. 
```

堆栈跟踪：

```
[InsufficientMemoryException: Memory gates checking failed because the free memory (373817344 bytes) is less than 5% of total memory.  As a result, the service will not be available for incoming requests.  To resolve this, either reduce the load on the machine or adjust the value of minFreeMemoryPercentageToActivateService on the serviceHostingEnvironment config element.]
   System.ServiceModel.Activation.ServiceMemoryGates.Check(Int32 minFreeMemoryPercentage, Boolean throwOnLowMemory, UInt64& availableMemoryBytes) +121924
   System.ServiceModel.HostingManager.CheckMemoryCloseIdleServices(EventTraceActivity eventTraceActivity) +86
   System.ServiceModel.HostingManager.EnsureServiceAvailable(String normalizedVirtualPath, EventTraceActivity eventTraceActivity) +883

[ServiceActivationException: The service '/****StatWCF_OData/OData.svc' cannot be activated due to an exception during compilation.  The exception message is: Memory gates checking failed because the free memory (373817344 bytes) is less than 5% of total memory.  As a result, the service will not be available for incoming requests.  To resolve this, either reduce the load on the machine or adjust the value of minFreeMemoryPercentageToActivateService on the serviceHostingEnvironment config element..]
   System.Runtime.AsyncResult.End(IAsyncResult result) +650220
   System.ServiceModel.Activation.HostedHttpRequestAsyncResult.End(IAsyncResult result) +210733
   System.Web.CallHandlerExecutionStep.OnAsyncHandlerCompletion(IAsyncResult ar) +282 
```

版本信息：Microsoft .NET Framework 版本：4.0.30319；ASP.NET 版本：4.0.30319.17929

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2013-07-03T13:51:47.940

解决方案写在您的帖子中。

> 要解决此问题，请减少机器上的负载或调整 serviceHostingEnvironment 配置元素上的 minFreeMemoryPercentageToActivateService 的值。

最简单的方法只需将其添加到您的 web.config

```
<system.serviceModel> 
    <serviceHostingEnvironment minFreeMemoryPercentageToActivateService="0" />
</system.serviceModel> 
```

阅读更多关于`serviceHostingEnvironment` [这里](http://msdn.microsoft.com/en-us/library/ms731336(v=vs.110).aspx)。

无论如何，@Mr Grok 如何正确指出这表明您的机器没有足够的物理内存，您应该弄清楚为什么会发生这种情况。这可能是一个严重的问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-02-03T22:16:54.287

我有这个问题。结果是 SQL 服务器使用了我可用的 32 GB 中的超过 29 GB。

如果您有 SQL Server，请检查您的 SQL Server。MS SQL Sever 旨在占用您允许的尽可能多的可用空间。您可以在 SQL Server 的属性选项卡中的最大服务器内存框中对此进行限制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-17T10:10:09.133

我在 web.config 中将 serviceHostingEnvironment 属性添加到 0。

```
<system.serviceModel> 
    <serviceHostingEnvironment minFreeMemoryPercentageToActivateService="0" />
</system.serviceModel> 
```

这是我发现的最简单的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-08T11:50:47.333

那么我有同样的问题，我正在寻找解决方案。大多数博客都建议使用相同的解决方案在 web.config 中添加“serviceHostingEnvironment”属性，这是一项有风险的工作，因为添加属性会影响整个 IIS 及其托管解决方案，并最终会重新启动 IIS。

由于错误消息与“内存存储问题”有关，我们被要求减少服务器上的负载，所以我所做的只是通过服务管理器重新启动 SQL Server (MSSQLSERVER) 服务，一切恢复正常，我摆脱了内存问题。

Window + R > services.msc > 在突出显示的服务下方重新启动

[![在此处输入图像描述](../Images/838acc345b42d1cdea2c58bcb48b2124.png)](https://i.stack.imgur.com/SGEk3.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-22T03:25:53.180

将此添加到您的 machine.config`system.serviceModel`部分下，这将为所有站点设置它：

```
<serviceHostingEnvironment minFreeMemoryPercentageToActivateService="0" /> 
```

您需要管理员权限才能编辑此文件。

有关如何查找 machine.config 的信息，请参阅[此答案。](https://stackoverflow.com/a/2325492)

在添加此设置之前，您可以检查是否有任何进程使用了​​过多的内存。但是对我来说，默认设置弊大于利，因为有很多“备用”内存正在使用，系统可以在需要时弹出，所以系统并没有真正的内存不足。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-08T20:03:31.687

我尝试在 web.config 文件中设置 minFreeMemoryPercentageToActivateService="0" ，但这在我的情况下仍然没有解决。我正在使用 VMWare，它的执行速度非常慢，因为我有太多快照！我删除了旧的，清理了一些磁盘空间并重新启动了服务器，这样做解决了所有错误。

我是 VMWare 和 SharePoint 的新手，我想我可以在这里分享我的经验！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-30T16:50:08.617

web.config 对我有用，但 SQL Server 内存也是一个需要解决的问题。

我能够解决 sql server 内存问题，而无需重新启动 MSSQL server 进程，只需将服务器属性 memory Maximum server memory 降低到较低的值。默认为有效无限制。

无需重新启动 MS SQL 服务，进程就会自动开始将内存占用减少到配置的值。
[![服务器属性的屏幕截图](../Images/3f17f394c7d81c3db668cfe015ac0d82.png)](https://i.stack.imgur.com/xEQBf.png)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2019-04-09T14:42:35.663

您需要使用 IISReset 命令行实用程序重新启动 IIS 从“开始”菜单中，单击“运行”。

在打开框中，键入 cmd，然后单击确定。

在命令提示符下，键入：iisreset /noforce

IIS 尝试在重新启动之前停止所有服务。IISReset 命令行实用程序最多等待一分钟以停止所有服务。

# c# - Fody-PropertyChanged 提高从属财产变化

> ID：15497298
> 
> 赞同：0
> 
> 时间：2013-03-19T10:46:33.640
> 
> 标签：c#, mvvm, fody, fody-propertychanged

我有`ProjectModel`一`ProjectViewModel`堂课；我的模型处理项目的直接操作，而视图模型提供“视图友好”的属性和命令

但是，在我的 ViewModel 中，我公开了用于视图绑定的只读项目合同

```
private ProjectModel Model { get; set; } 

public IProject Project
{
    get
    {
        return Model.Project;
    }
} 
```

所以在这里，属性`Model`不会改变，但是属性`Model.Project`会改变，所以`Model`当它改变时会引发它的 PropertyChanged 事件

现在，我知道[Fody-PropertyChanged](https://github.com/Fody/PropertyChanged)能够检测一个属性是否依赖于另一个属性（在同一个类中），并在其他属性发生变化时引发更改事件。

[我想知道Fody-PropertyChanged](https://github.com/Fody/PropertyChanged)是否可以`PropertyChanged("Project")`在对象引发`Model`其更改的通知程序时引发。

当然，我可以手动完成；但我更愿意坚持使用[Fody](https://github.com/Fody/Fody)。这是一个坏主意吗？或者，这是一个糟糕的 MVVM 实践吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T00:00:53.367

No Fody-PropertyChanged 目前不支持以您描述的方式检测包装的属性。

# android - 带有滑动菜单的操作栏 Sherlok？

> ID：15497303
> 
> 赞同：1
> 
> 时间：2013-03-19T10:46:45.143
> 
> 标签：android, eclipse, actionbarsherlock, slidingmenu

当左上栏单击它时，我想通过操作栏 sherlok 显示幻灯片菜单，它显示了幻灯片菜单。我做了所有事情，但我不能让事件从左上角显示幻灯片菜单我做了以下但它不起作用

```
@Override
public boolean onOptionsItemSelected(com.actionbarsherlock.view.MenuItem item) {
    // TODO Auto-generated method stub
    switch (item.getItemId()) 
       {        
          case android.R.id.home:            
            SlidingMenu menu = new SlidingMenu(this);
            menu.setMode(SlidingMenu.LEFT);
    menu.setTouchModeAbove(SlidingMenu.TOUCHMODE_FULLSCREEN);
    menu.setFadeDegree(0.35f);
    menu.attachToActivity(this, SlidingMenu.SLIDING_CONTENT);
    menu.setBehindOffset(100);
    menu.setMenu(R.layout.activity_menu);
              break;

       }
    return super.onOptionsItemSelected(item);
} 
```

请帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T10:56:27.547

*   在里面创建 SlidingMenu`onCreate()`而不是在`onOptionsItemSelected()`.
*   在 onOptionsItemSelected 中，您可以像这样切换滑动菜单： `getSlidingMenu().toggle();`

完整示例：

```
private SlidingMenu menu;

@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        menu = new SlidingMenu(this);
        // more initialization code
    }

@Override
public boolean onOptionsItemSelected(com.actionbarsherlock.view.MenuItem item) {
    switch (item.getItemId()) 
       {        
          case android.R.id.home:            
           menu.toggle();
           return true;
       }
    return super.onOptionsItemSelected(item);
} 
```

# c# - 访问另一个 CS 文件中的 XAML 对象

> ID：15497304
> 
> 赞同：0
> 
> 时间：2013-03-19T10:46:46.967
> 
> 标签：c#, xaml, user-interface, blend

我需要从另一个 CS 文件更改矩形的填充。xaml.cs 中的静态方法不允许访问 Rectangle 对象。

```
public void changeStatusIndicator()
    {
    this.StatusIndicator.Fill = new SlidColorBrush(Color.FromRgb(100,0,0));
} 
```

我需要从另一个 CS 文件中调用这个函数。

[编辑] 我想将矩形的填充属性更改为另一个 CS 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:48:55.643

您可以将您的课程参考发送到其他文件，但不建议这样做。最好的解决方案是使用 MVVM（模型-视图-视图模型）模式。

# python - 删除包含少于 (N) 个像素的点

> ID：15497308
> 
> 赞同：9
> 
> 时间：2013-03-19T10:46:53.950
> 
> 标签：python, image-processing, numpy, filter, scipy

我尝试了几乎所有的过滤器`PIL`，但都失败了。scipy 的 numpy 中是否有任何功能可以消除噪音？就像 Matlab() 中的 Bwareaopen() 一样？

例如：

![在此处输入图像描述](../Images/a0e59134e40e4458cd81cc84279fa706.png)

PS：如果有办法把字母填成黑色，我将不胜感激

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-19T10:51:52.863

Numpy/Scipy 可以像 Matlab 一样进行形态学运算。

请参阅[scipy.ndimage.morphology](https://docs.scipy.org/doc/scipy/reference/generated/scipy.ndimage.binary_opening.html)，其中包含[`binary_opening()`](https://docs.scipy.org/doc/scipy/reference/generated/scipy.ndimage.binary_opening.html#scipy.ndimage.binary_opening)等价于 Matlab 的`bwareaopen()`.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-01-29T09:48:01.660

Numpy/Scipy 解决方案：`scipy.ndimage.morphology.binary_opening`. 更强大的解决方案：使用 scikits-image。

```
from skimage import morphology
cleaned = morphology.remove_small_objects(YOUR_IMAGE, min_size=64, connectivity=2) 
```

见[http://scikit-image.org/docs/0.9.x/api/skimage.morphology.html#remove-small-objects](http://scikit-image.org/docs/0.9.x/api/skimage.morphology.html#remove-small-objects)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-03-19T11:42:35.527

我认为这不是您想要的，但这有效（使用 Opencv（使用 Numpy））：

```
import cv2

# load image
fname = 'Myimage.jpg'
im = cv2.imread(fname,cv2.COLOR_RGB2GRAY)
# blur image
im = cv2.blur(im,(4,4))
# apply a threshold
im = cv2.threshold(im, 175 , 250, cv2.THRESH_BINARY)
im = im[1]
# show image
cv2.imshow('',im)
cv2.waitKey(0) 
```

输出（窗口中的图像）：
![输出图像](../Images/7ca69df4e360f7270fd7d940190f6062.png)

您可以使用保存图像`cv2.imwrite`

# android - Android：Edittext 以显示关联电子邮件的名称，例如 GMAIL

> ID：15497310
> 
> 赞同：3
> 
> 时间：2013-03-19T10:47:00.277
> 
> 标签：android, autocomplete, android-edittext

你好。我在 android 中开发了一个邮件应用程序，如果键入收件人地址，我想自定义`EditText`Gmail 撰写屏幕到地址框。它只显示收件人姓名，如下图

![在此处输入图像描述](../Images/841c81e3f20bdbbda622ea7507843782.png)

例如，名称已保存为必须显示在上图中的电子邮件地址，如果不存在，则仅`EditText`在 android 中显示电子邮件地址。

我不知道如何做到这一点，任何人都可以帮助我，谢谢。

# c++ - 怎么可能知道是什么导致了异常

> ID：15497311
> 
> 赞同：0
> 
> 时间：2013-03-19T10:47:02.597
> 
> 标签：c++, windows, visual-studio-2010, exception

在我正在实现的代码中，我有

```
__except(EXCEPTION_EXECUTE_HANDLER)
    {
        return false;
    } 
```

并且异常发生时有执行路径 调试时怎么知道为什么会发生异常？使用`GetExceptionInformation`？ - 它可以打印异常或给我异常的数据吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T10:54:56.903

在 Visual Studio 中，您可以转到`Debug > Exceptions`（在菜单中）。每种异常类型都有一个复选框，可让您在抛出异常时中断执行。

# .net - 从列表<>中提取列表<>

> ID：15497313
> 
> 赞同：1
> 
> 时间：2013-03-19T10:47:04.087
> 
> 标签：.net, list

我有这个问题：

```
List<string> a = {"aa","aaa","aaaa"}
List<string> b = {"bb","bbb","bbbb"} 
```

我做了`a.AddRange(b)`，并且在我需要从列表 a 中提取列表 b 之后，让它就像开始一样，具有相同的元素。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T10:51:17.860

您总是可以遍历列表 b，并从列表 a 中删除每个项目：

```
b.ForEach(item => a.Remove(item)); 
```

# android - 异常未找到 ID 0 的照片文件

> ID：15497314
> 
> 赞同：1
> 
> 时间：2013-03-19T10:47:05.893
> 
> 标签：android, android-contacts

我的应用程序中有一个代码可以获取联系人的 URI，然后通过尝试打开照片的输入流来验证联系人是否有照片，获取照片的 URI 并对其进行解码。

很少，我得到一个奇怪的异常，即 URI 不存在。我得到一个不存在的照片文件的 URI。

获取照片 URI：

```
// Get Uri to the contact
Uri contact = ContentUris.withAppendedId(ContactsContract.Contacts.CONTENT_URI,
        c.getInt(c.getColumnIndex(PhoneLookup._ID)));

// Get input stream of the photo
InputStream is = Contacts.openContactPhotoInputStream(context.getContentResolver(), contact);
// If no input stream (then there is no photo of contact), return 'null' instead of photo Uri
if (is == null) {
    Log.d(TAG, "No photo");
    return;
}

// Get display photo Uri of the contact
Uri photoUri = Uri.withAppendedPath(contact, ContactsContract.Contacts.Photo.DISPLAY_PHOTO); 
```

此时，当一个联系人没有照片时，`is`获取`null`并返回。但很少，`photoUri`得到`content://com.android.contacts/contacts/303/display_photo`。

现在对其进行解码（在其他功能中）：

```
InputStream isPhoto = context.getContentResolver().openInputStream(photoUri); 
```

从这一行抛出的异常是：

```
java.io.FileNotFoundException: No photo file found for ID 0
    at android.database.DatabaseUtils.readExceptionWithFileNotFoundExceptionFromParcel(DatabaseUtils.java:146)
    at android.content.ContentProviderProxy.openTypedAssetFile(ContentProviderNative.java:617)
    at android.content.ContentResolver.openTypedAssetFileDescriptor(ContentResolver.java:717)
    at android.content.ContentResolver.openAssetFileDescriptor(ContentResolver.java:614)
    at android.content.ContentResolver.openInputStream(ContentResolver.java:449)
    at com.app.android.utils.ImageUtils.decodeBitmapFromPhotoUri(ImageUtils.java:39)
    ... 
```

内容解析器怎么可能给我一张不存在的照片的URI（联系人存在并且肯定没有照片）而不是返回`null`？

更新：我看到它只发生在不是由设备拍摄的照片上（比如从谷歌帐户收到的照片或从互联网下载的照片）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-23T09:02:08.717

改变获取照片输入流的方式后，一切正常。

代替：

```
InputStream isPhoto = context.getContentResolver().openInputStream(photoUri); 
```

我用了：

```
InputStream photoInputStream =
    Contacts.openContactPhotoInputStream(context.getContentResolver(), contactUri); 
```

注意：现在 Uri 是联系人而不是他的照片。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-06T09:37:11.853

在遵循[ContactsContract.Contacts.Photo](http://developer.android.com/reference/android/provider/ContactsContract.Contacts.Photo.html)中的示例时，我遇到了与您尝试使用时相同的异常`openDisplayPhoto`：

```
 public InputStream openDisplayPhoto(long contactId) {
    Uri contactUri = ContentUris.withAppendedId(ContactsContract.Contacts.CONTENT_URI,
            contactId);
    Uri displayPhotoUri = Uri.withAppendedPath(contactUri, ContactsContract.Contacts.Photo
            .DISPLAY_PHOTO);
    try {
        AssetFileDescriptor fd =
                getContentResolver().openAssetFileDescriptor(displayPhotoUri, "r");
        return fd.createInputStream();
    } catch (IOException e) {
        e.printStackTrace();
        return null;
    }
} 
```

使用时效果很好`openPhoto`（实际上是缩略图）：

```
 public InputStream openPhoto(long contactId) {
    Uri contactUri = ContentUris.withAppendedId(ContactsContract.Contacts.CONTENT_URI,
            contactId);
    Uri photoUri = Uri.withAppendedPath(contactUri, ContactsContract.Contacts.Photo
            .CONTENT_DIRECTORY);
    Cursor cursor = getContentResolver().query(photoUri,
            new String[]{ContactsContract.Contacts.Photo.PHOTO}, null, null, null);
    if (cursor == null) {
        return null;
    }
    try {
        if (cursor.moveToFirst()) {
            byte[] data = cursor.getBlob(0);
            if (data != null) {
                return new ByteArrayInputStream(data);
            }
        }
    } finally {
        cursor.close();
    }
    return null;
} 
```

实际上，例如，当联系人图片来自 Google+ 时，它只能作为缩略图使用，而不能作为正常的全尺寸图片使用。

# haskell - 理解 Hindley-Milner 类型推断中的多型

> ID：15497315
> 
> 赞同：20
> 
> 时间：2013-03-19T10:47:10.867
> 
> 标签：haskell, type-inference, type-systems, lambda-calculus, hindley-milner

我正在阅读有关[Hindley–Milner 类型推断](http://en.wikipedia.org/wiki/Hindley-Milner "Hindley–Milner - 维基百科，免费的百科全书")的 Wikipedia 文章，试图从中理解。到目前为止，这是我所理解的：

1.  类型分为单型或多型。
2.  Monotypes 进一步分为类型常量（如`int`or `string`）或类型变量（如`α`and `β`）。
3.  类型常量可以是具体类型（如`int`and `string`）或类型构造函数（如`Map`and `Set`）。
4.  类型变量（如`α`和`β`）充当具体类型（如`int`和`string`）的占位符。

现在我在理解多型时有点困难，但是在学习了一点 Haskell 之后，这就是我所做的：

1.  类型本身也有类型。类型的正式类型称为种类（即有不同种类的类型）。
2.  具体类型（如`int`和`string`）和类型变量（如`α`和`β`）是 kind `*`。
3.  类型构造函数（如`Map`和`Set`）是类型的 lambda 抽象（例如`Set`is of kind`* -> *`和`Map`is of kind `* -> * -> *`）。

我不明白的是限定词是什么意思。例如`∀α.σ`代表什么？我似乎无法对它做出正面或反面，我阅读以下段落的次数越多，我就越困惑：

> 相反，具有多型***∀α.α -> α***的函数可以将同一类型的任何值映射到自身，并且[恒等函数](http://en.wikipedia.org/wiki/Identity_function "身份功能 - 维基百科，免费的百科全书")是该类型的值。另一个例子***∀α.(Set α) -> int***是将所有有限集映射到整数的函数类型。成员计数是此类型的值。请注意，限定符只能出现在顶层，例如类型***∀α.α -> ∀α.α***被类型的语法排除，并且单型包含在多型中，因此类型具有一般形式***∀α₁ 。. . ∀αₙ.τ***。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-19T12:00:36.780

首先，种类和多态类型是不同的东西。您可以拥有一个所有类型都属于同一种类 (*) 的 HM 类型系统，您也可以拥有一个没有多态性但具有复杂种类的系统。

如果一个术语`M`是 type `∀a.t`，这意味着对于`s`我们可以替换`s`的任何类型`a`in `t`（通常写成`t[a:=s]`并且我们将拥有它`M`的 type `t[a:=s]`。这有点类似于逻辑，我们可以用任何术语替换一个普遍量化的变量，但在这里我们处理的是类型。

这正是 Haskell 中发生的事情，只是在 Haskell 中你看不到量词。出现在类型签名中的所有类型变量都是隐式量化的，就像您`forall`在类型前面一样。例如，`map`将有类型

```
map :: forall a . forall b . (a -> b) -> [a] -> [b] 
```

等等。如果没有这种隐含的全称量化，类型变量将必须具有一些固定的含义并且`a`不会是多态的。`b``map`

HM 算法区分*类型*（没有量词，单型）和*类型模式*（普遍量化的类型，多型）。重要的是在某些地方它使用类型模式（例如 in `let`），但在其他地方只允许使用类型。这使得整个事情可以决定。

我还建议您阅读有关[System F](http://en.wikipedia.org/wiki/System_F)的文章。它是一个更复杂的系统，它允许`forall`类型的任何地方（因此那里的所有东西都被称为*type*），但类型推断/检查是不可判定的。它可以帮助您了解如何`forall`工作。[系统 F 在 Girard、Lafont 和 Taylor、 Proofs and Types](http://www.paultaylor.eu/stable/Proofs%2BTypes.html)中有深入描述。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T12:03:27.300

`l = \x -> t`在 Haskell 中考虑。它是一个 lambda，它代表一个术语`t`fith a variable `x`，稍后将被替换（例如`l 1`，无论它意味着什么）。类似地，`∀α.σ`表示具有类型变量的类型`α`，即`f : ∀α.σ`如果函数由类型参数化`α`。从某种意义上说，`σ`取决于`α`，所以`f`返回一个类型的值，稍后将在`σ(α)`其中`α`替换`σ(α)`，我们将得到一些具体的类型。

在 Haskell 中，您可以省略`∀`和定义函数，就像`id : a -> a`. 允许省略量词的原因基本上是因为它们只允许顶级（没有`RankNTypes`扩展名）。你可以试试这段代码：

```
id2 : a -> a -- I named it id2 since id is already defined in Prelude
id2 x = x 
```

如果您向 ghci 询问`id`( `:t id`) 的类型，它将返回`a -> a`。更准确地说（更理论上的类型），`id`有 type `∀a. a -> a`。现在，如果您添加到代码中：

```
val = id2 3 
```

, 3 有类型`Int`，所以类型`Int`将被代入`σ`，我们将得到具体类型`Int -> Int`。

# excel - msoLine 类型的形状对象 - 访问点坐标的方法？

> ID：15497317
> 
> 赞同：0
> 
> 时间：2013-03-19T10:47:29.650
> 
> 标签：excel, excel-2010, vba

是否有访问`msoLine`形状对象起点和终点坐标的方法？我正在处理 Excel 2010 中的旧文件（我认为来自 Excel 2003）。

给定一个`msoFreeform`对象，我可以使用以下方法依次访问各种坐标：

```
 With myDocument.Shapes(i)
     If .Type = msoFreeform Then
       nodeCount = .Nodes.Count
       For k = 1 To nodeCount
         pointsArray = .Nodes.Item(k).Points
         X1 = pointsArray(1, 1)
         Y1 = pointsArray(1, 2)
       Next k
     End If
  End With 
```

`msoLine`但是对于没有返回任何内容的对象，此方法会失败`.Nodes.Item(k).Points`，即使`.Nodes.Count`返回`2`起点和终点也是如此。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T11:11:36.930

这有效：

```
'The "flips" helps to work out which pair of corners of an imaginary rectangle surrounding the line represents the correct diagonal. 
```

子 testLineCoords()

```
Dim bHflip As Boolean
Dim bVflip As Boolean
Dim nBegin As Long
Dim nEnd As Long
Dim oShape As Shape
Dim aC(1 To 4, 1 To 2) As Double

Set oShape = ShTmp.Shapes("MyLine")
With oShape
    aC(1, 1) = .Left:           aC(1, 2) = .Top
    aC(2, 1) = .Left + .Width:  aC(2, 2) = .Top
    aC(3, 1) = .Left:           aC(3, 2) = .Top + .Height
    aC(4, 1) = .Left + .Width:  aC(4, 2) = .Top + .Height

    bHflip = .HorizontalFlip
    bVflip = .VerticalFlip
End With

If bHflip = bVflip Then
    If bVflip = False Then
        ' down to right
        nBegin = 1: nEnd = 4
    Else
        ' up to left
        nBegin = 4: nEnd = 1
    End If
ElseIf bHflip = False Then
    ' up to right
    nBegin = 3: nEnd = 2
Else
    ' down to left
    nBegin = 2: nEnd = 3
End If

Debug.Print "---------------------------------"
Debug.Print "Begin X:Y"
Debug.Print aC(nBegin, 1); aC(nBegin, 2)
Debug.Print "End X:Y"
Debug.Print aC(nEnd, 1); aC(nEnd, 2) 
```

结束子

不幸的是，我不能相信它： [原始解决方案](http://www.excelbanter.com/showthread.php?t=381936)

问候， 埃米尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T11:16:26.447

如果要获取 X/Y 起点和终点，`msoLine`请执行以下操作：

```
Dim myMsoLine As Shape
Set myMsoLine = ActiveSheet.Shapes(3)
Dim X1, X2, Y1, Y2
'points of msoLine

With myMsoLine
    X1 = .Left
    Y1 = .Top
    X2 = .Width + .Left
    Y2 = .Height + .Top
End With

Debug.Print X1, Y1, X2, Y2 
```

`msoLine`通常，在这种情况下，形状中没有节点。（针对 Excel 2010 测试）

# sql - SQL - 将两列组合成一个逗号分隔的列表

> ID：15497321
> 
> 赞同：2
> 
> 时间：2013-03-19T10:47:38.037
> 
> 标签：sql, sql-server-2008

我面临的问题可能很容易解决，但由于问题的特殊性，我似乎无法在网上找到答案。

在我的数据库中，我有 3 个表格来表示如何计划教育课程。假设有一门课程叫`Working with Excel`. 这意味着该表`Courses`有一行。

第二个表表示同一课程的周期。如果课程是在 2013 年 1 月 1 日和 2013 年 2 月 1 日提供的，那么在基础表`Cycles`中，您会发现 2 行，每个日期一行。

我目前已经有一个 SQL 脚本，它为我提供了两列：课程名称，以及一个包含所有`Cycle`日期的逗号分隔列表。

**请注意我使用的是 dd/MM/yyyy 符号**

这是它当前的设置方式（一小段摘录，这是解释所需输出的 ​​SELECT 语句）：

```
SELECT course.name,
       stuff((SELECT distinct ',' + CONVERT(varchar(10), cycleDate, 103)    --code 101 = mm/dd/yyyy, code 103 = dd/mm/yyyy
                            FROM cycles t2
                            where t2.courseID= course.ID and t2.cycleDate > GETDATE()
                            FOR XML PATH('')),1,1,'') as 'datums' 
```

它给我的输出：

```
NAME                  DATUMS
---------------------------------------------------
Working with Excel    01/01/2013,01/02/2013
Some other course     12/3/2013, 1/4/2013, 1/6/2013 
```

问题是我需要从我还没有提到的第三个表中添加信息。该表`ExtraDays`包含一个周期的额外天数，以防跨越一天以上。

例如，如果使用 Excel 课程需要 3 天（1 月 1+2+3 和 2 月 1+2+3），每个课程周期将有 2`ExtraDays`行包含“额外天数”。

这些表看起来像这样：

```
Table COURSES
ID   NAME
---------------------------------------------------
1    Working with Excel 

Table CYCLES
ID   DATE          COURSEID
---------------------------------------------------
1    1/1/2013      1
2    1/2/2013      1

Table EXTRADAYS
ID   EXTRADATE     CYCLEID
---------------------------------------------------
1    2/1/2013      1
2    3/1/2013      1
3    2/2/2013      2
4    3/2/2013      2 
```

我需要将这些添加`ExtraDates`到输出中以逗号分隔的日期列表中。最好是排序的，但这不是必需的。

我被这件事难住了好久。我有一些 SQL 经验，但显然不足以解决这个问题:)

我希望得到以下输出：

```
NAME                  DATUMS
--------------------------------------------------------------------------------------
Working with Excel    01/01/2013,02/01/2013,03/01,2013,01/02/2013,02/02/2013,03/02/2013 
```

我很清楚可以改进数据库结构以简化这一点，但不幸的是这是一个遗留应用程序，我无法更改结构。

谁能指出我以正确的方式组合这两列。

我希望我对你的问题描述得足够清楚。否则，请问:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T10:58:15.300

```
SELECT course.name,
       stuff((SELECT distinct ',' + CONVERT(varchar(10), cycleDate, 103)    --code 101 = mm/dd/yyyy, code 103 = dd/mm/yyyy
              FROM (select id, date, courseid from cycles 
                    union 
                    select id, extradate, courseid from extradays) t2
              where t2.courseID= course.ID and t2.cycleDate > GETDATE()
              FOR XML PATH('')),1,1,'') as 'datums' 
```

# jquery - 使用图像上传控件并在 mvc 3.0 中显示图像控件而不保存？

> ID：15497322
> 
> 赞同：1
> 
> 时间：2013-03-19T10:47:38.607
> 
> 标签：jquery, asp.net-mvc

HTML 代码

```
<div id="container" title="Choose File">
<div id="doit">
 <img id="blah" src="#" alt="your image" />
  <div id="preview_ie">
  hijjjj
   </div>
</div>
<input id="hid" type="file" size=1 onchange="readURL(this);" >
</div> 
```

JQuery 和添加 jquery

```
function readURL(input) {

        if (input.files && input.files[0]) {
            var reader = new window.FileReader();

            reader.onload = function (e) {

                $('#blah')
                        .attr('src', e.target.result)
                        .width(150)
                        .height(200);
            };

            reader.readAsDataURL(input.files[0]);

        }

        console.log(input.value);
        var newPreview = document.getElementById('preview_ie');
    document.getElementById('preview_ie').filter.item("DXImageTransform.Microsoft.AlphaImageLoader").src = input.value;
        document.getElementById('preview_ie').filter.item("DXImageTransform.Microsoft.AlphaImageLoader").sizingMethod="scale";
        document.getElementById('preview_ie').style.width = "160px";
        document.getElementById('preview_ie').style.height = "120px";
     }
</script> 
```

使用上述代码所有浏览器显示图像但不显示 IE9.file 上传控件隐藏此控件单击打开浏览器图像并上传但在 IE9 中不显示

# spring-mvc - Spring-mvc + MockMvc + junit 结果是 200 但应该是 404

> ID：15497324
> 
> 赞同：1
> 
> 时间：2013-03-19T10:47:47.933
> 
> 标签：spring-mvc, junit, http-status-code-404, spring-test, http-status-code-200

我使用 spring-test 框架版本 3.2.1.RELEASE，特别是 MockMvc 对象来测试我的控制器。

然而，问题是当 MockMvc 对象在不存在的 html 页面上执行时，它返回状态 200，但我的浏览器显示 404 状态 - 这是正确的，因为该页面不存在。如何检查 404 状态？（因为这是我期望的状态）

```
@Test
public void testInvalidUrl() throws Exception {
    mockMvc.perform(get("/invalidJSPFileName.html"))
            .andExpect(status().isNotFound())
            .andExpect(forwardedUrl("/WEB-INF/jsp/invalidJSPFileName.jsp"));
} 
```

测试用例控制器：

```
@Controller
@RequestMapping("/")
public class IndexController {
    @RequestMapping("*.html")
    public void showIndex(){

    }
} 
```

解析器：

```
<bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="viewClass" value="org.springframework.web.servlet.view.JstlView" />
    <property name="prefix" value="/WEB-INF/jsp/" />
    <property name="suffix" value=".jsp" />
</bean> 
```

目录：

```
WEB-INF
    jsp
        index.jsp 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-26T08:12:59.140

您的控制器接受后缀为 .html 的任何内容

@RequestMapping("*.html")

因此，应该找到您的请求。

# c# - 在表单之间传递 AVLTree

> ID：15497327
> 
> 赞同：0
> 
> 时间：2013-03-19T10:48:19.940
> 
> 标签：c#, forms, avl-tree

还有另一个问题与我的非常相似，但是在阅读后我仍然无法让它工作。

我有两个表单，MainForm 和 SecondForm 以及其他一些类，我需要我的 AVLtree 的一个实例，并且能够通过我的其他表单访问它。

这是我到目前为止所做的

主窗体

```
 public partial class MainForm : Form
    {
        AddArtist secondForm = new AddArtist();
        public static AVLTree<Artist> treeAVL { get; set; }

        public MainForm()
        {
            InitializeComponent();
        }

        private void butAdd_Click(object sender, EventArgs e)
        {
            secondForm.Show();

        }

        private void MainForm_Load(object sender, EventArgs e)
        {

        }
    }
} 
```

第二种形式

public partial class AddArtist : Form { String Name1 = "No Name"; 整数成员 = 0；公共 AVLTreetreeAVL = 新 AVLTree();

```
 public AddArtist()
    {
        InitializeComponent();
        treeAVL = MainForm.treeAVL;
    }

    private void MainForm_Load(object sender, EventArgs e)
    {

    }
    private void butAdd_Click(object sender, EventArgs e)
    {
         Name1 = tBName.Text;
        Members = (Convert.ToInt32(tBMem.Text));  

        Artist newArtist = new Artist(Name1,Members);
        try
        {
            treeAVL.InsertItem(newArtist);
        }
        catch (Exception )
        {
            MessageBox.Show("No Data Entered", "Error",MessageBoxButtons.OK, MessageBoxIcon.Error);
        }

        tBName.Text = "";
        tBMem.Text = " ";

    }
} 
```

}

任何帮助将不胜感激，指出我哪里出错或如何解决它。

它现在可以编译，但是它给出了未设置对象实例的对象引用错误。我希望我开始编码这是正确的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:55:12.523

AVLTree 类的访问修饰符是什么？检查它是私有的还是内部的，因为您的代码需要它是公开的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T10:55:15.707

设置`public`在您的`parametrized type`

```
public class Artist
{
..

} 
```

# r - 用ggplot对图例进行奇怪的重新排序

> ID：15497328
> 
> 赞同：1
> 
> 时间：2013-03-19T10:48:21.857
> 
> 标签：r, ggplot2, legend

我有一个data.frame（汇总表）：

```
head(hejALLA)
   variable   År  N     Sum     Mean       sd    Variance  Median Min     Max
1 N_kvinnor 1944 28 2419650 86416.07 223776.7 50076008602 54003.0 413 1209825
2 N_kvinnor 1945 28 2595794 92706.93 240100.4 57648222451 58040.0 459 1297897
3 N_kvinnor 1946 29 2752518 94914.41 250209.5 62604783658 55624.0 470 1376259
4 N_kvinnor 1947 30 2865208 95506.93 255979.9 65525698129 50186.5 468 1432604
5 N_kvinnor 1948 30 2993572 99785.73 267368.3 71485801980 52581.0 461 1496786
6 N_kvinnor 1949 35 3108982 88828.06 257942.9 66534536980 48729.0 456 1554491

dput(hejALLA)
structure(list(variable = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L
), .Label = c("N_kvinnor", "N_män"), class = "factor"), År = c(1944L, 
1945L, 1946L, 1947L, 1948L, 1949L, 1950L, 1951L, 1952L, 1953L, 
1954L, 1944L, 1945L, 1946L, 1947L, 1948L, 1949L, 1950L, 1951L, 
1952L, 1953L, 1954L), N = c(28, 28, 29, 30, 30, 35, 37, 37, 37, 
37, 33, 28, 28, 29, 30, 30, 35, 37, 37, 37, 37, 33), Sum = c(2419650, 
2595794, 2752518, 2865208, 2993572, 3108982, 3223124, 3341098, 
3461784, 3547744, 3375942, 2275460, 2415543, 2558005, 2653682, 
2760069, 2851398, 2947550, 3040133, 3144944, 3190284, 2960046
), Mean = c(86416.0714285714, 92706.9285714286, 94914.4137931034, 
95506.9333333333, 99785.7333333333, 88828.0571428571, 87111.4594594595, 
90299.9459459459, 93561.7297297297, 95884.972972973, 102301.272727273, 
81266.4285714286, 86269.3928571429, 88207.0689655172, 88456.0666666667, 
92002.3, 81468.5142857143, 79663.5135135135, 82165.7567567568, 
84998.4864864865, 86223.8918918919, 89698.3636363636), sd = c(223776.693607701, 
240100.442420795, 250209.479552851, 255979.878367345, 267368.289032438, 
257942.894804022, 260324.366472718, 269857.390823679, 279547.104579955, 
286473.142701748, 287193.206911879, 210220.469220861, 223156.992413054, 
232223.774918247, 236806.100206249, 246289.093343316, 236350.737393712, 
237813.20060053, 245315.995040117, 253783.749535529, 257471.044723456, 
251390.219349299), Variance = c(50076008601.9947, 57648222450.6614, 
62604783658.1084, 65525698128.9609, 71485801980.1333, 66534536979.879, 
67768775779.4219, 72823011382.1637, 78146583679.036, 82066861489.4159, 
82479938096.3295, 44192645679.4392, 49799043262.84, 53927881637.2808, 
56077129094.892, 60658317499.8724, 55861671066.5513, 56555118379.8679, 
60179937422.5225, 64406191528.3123, 66291338870.988, 63197042384.4886
), Median = c(54003, 58040, 55624, 50186.5, 52581, 48729, 43842, 
44712, 46106, 47298, 54758, 50976, 54560, 56087, 49240.5, 51312.5, 
42191, 39722, 40397, 41574, 42091, 48537), Min = c(413, 459, 
470, 468, 461, 456, 455, 445, 435, 416, 1850, 360, 409, 418, 
401, 386, 369, 364, 357, 346, 332, 4572), Max = c(1209825, 1297897, 
1376259, 1432604, 1496786, 1554491, 1611562, 1670549, 1730892, 
1773872, 1687971, 1139425, 1209436, 1280617, 1328515, 1381879, 
1427689, 1475842, 1522245, 1574886, 1597663, 1480023)), .Names = c("variable", 
"År", "N", "Sum", "Mean", "sd", "Variance", "Median", "Min", 
"Max"), row.names = c(NA, -22L), class = "data.frame") 
```

然后我正在制作一个带有函数的图表`multiplot`

```
multiplot <- function(..., plotlist=NULL, file, cols=1, layout=NULL) {
  require(grid)

  # Make a list from the ... arguments and plotlist
  plots <- c(list(...), plotlist)

  numPlots = length(plots)

  # If layout is NULL, then use 'cols' to determine layout
  if (is.null(layout)) {
    # Make the panel
    # ncol: Number of columns of plots
    # nrow: Number of rows needed, calculated from # of cols
    layout <- matrix(seq(1, cols * ceiling(numPlots/cols)),
                     ncol = cols, nrow = ceiling(numPlots/cols))
  }

  if (numPlots==1) {
    print(plots[[1]])

  } else {
    # Set up the page
    grid.newpage()
    pushViewport(viewport(layout = grid.layout(nrow(layout), ncol(layout))))

    # Make each plot, in the correct location
    for (i in 1:numPlots) {
      # Get the i,j matrix positions of the regions that contain this subplot
      matchidx <- as.data.frame(which(layout == i, arr.ind = TRUE))

      print(plots[[i]], vp = viewport(layout.pos.row = matchidx$row,
                                      layout.pos.col = matchidx$col))
    }
  }
} 
```

我有两个要与上述函数结合的图：

```
plotONE=ggplot(subset(hejALLA,variable=="N_män"), aes(x = År)) + 

  geom_line(aes(y = Mean, color = "Medelvärde delägare män",linetype = "Medelvärde delägare män"), 
            size = 1.7, alpha = 1) + 

  geom_ribbon(aes(ymax = Max, 
                  ymin = Min, fill = "Delägare Män Max/Min"), color="blue",linetype = 3, 
              alpha = 0.2) + 

  geom_ribbon(aes(ymax = Mean+sd, ymin = Mean-sd, fill = "Mean +- sd"), 
              colour = "black", linetype = 2, alpha = 0.5)+

  #geom_line(aes(y = Sum, 
  #color = "Sum Delägare Män"), size = 0.9, linetype = 1, alpha = 1) + 

  geom_line(aes(y = N, 
                color = "Antal Kassor",linetype="Antal Kassor"), size = 0.9, alpha = 1)+

  scale_y_continuous(breaks = seq(-200000, 1700000, by = 50000), limits = c(-200000, 1700000), 
                     labels = seq(-200000, 1700000, by = 50000))+ 
  scale_x_continuous(breaks=seq(1944,1954,1))+
  labs(title = "Manliga Delägare",x="Year\n",y="Value\n") +

  scale_color_manual("Variabler", breaks = c("Antal Kassor","Medelvärde delägare män"),  
                     values = c("Antal Kassor" = "black", "Medelvärde delägare män" = "#6E6E6E")) + 
  scale_fill_manual(" Ribbons", breaks = c("Delägare Män Max/Min", "Mean +- sd"), 
                    values = c(`Delägare Män Max/Min` = "blue", `Mean +- sd` = "red")) + 
  scale_linetype_manual("Variabler",values=c("Antal Kassor"=2,"Medelvärde delägare män"=1))+
  theme(legend.direction = "horizontal", legend.position = "bottom", legend.key = element_blank(), 
        legend.background = element_rect(fill = "white", colour = "gray30")) + 
  guides(fill = guide_legend(keywidth = 2, keyheight = 1), linetype=guide_legend(keywidth = 3, keyheight = 1),
         colour=guide_legend(keywidth = 6, keyheight = 1)) +
  coord_cartesian(ylim = c(-200000, 1700000),xlim=c(1944,1954))+
  theme(axis.text.x  = element_text(hjust=0.5, size=9,colour="black",face="bold"),
        axis.text.y  = element_text(size=9,colour="black",face="bold"),
        #panel.grid.minor = element_blank(),
        #panel.background = element_blank(), #färgen på backgrunden. Vill ej ha nån (vit) så tar bort.
        axis.ticks = element_blank(), ##Ska det gå en linje från siffrorna på axlarna?
        plot.title = element_text(size = rel(1.2)),
        axis.title.y = element_text(size = rel(1.1)),
        axis.title.x=element_text(size = rel(1.1))) 
```

# #

```
plotTWO=ggplot(subset(hejALLA,variable=="N_kvinnor"), aes(x = År)) + 

  geom_line(aes(y = Mean, color = "Medelvärde delägare kvinnor",linetype = "Medelvärde delägare kvinnor"), 
            size = 1.7, alpha = 1) + 

  geom_ribbon(aes(ymax = Max, 
                  ymin = Min, fill = "Delägare Kvinnor Max/Min"), color="blue",linetype = 3, 
              alpha = 0.2) + 

  geom_ribbon(aes(ymax = Mean+sd, ymin = Mean-sd, fill = "Mean +- sd"), 
              colour = "black", linetype = 2, alpha = 0.5)+

  #geom_line(aes(y = Sum, 
  #color = "Sum Delägare Män"), size = 0.9, linetype = 1, alpha = 1) + 

  geom_line(aes(y = N, 
                color = "Antal Kassor",linetype="Antal Kassor"), size = 0.9, alpha = 1)+

  scale_y_continuous(breaks = seq(-200000, 2100000, by = 50000), limits = c(-200000, 2100000), 
                     labels = seq(-200000, 2100000, by = 50000))+ 
  scale_x_continuous(breaks=seq(1944,1954,1))+
  labs(title = "Kvinnliga Delägare",x="Year\n",y="Value\n") +

  scale_color_manual("Variabler", breaks = c("Antal Kassor","Medelvärde delägare kvinnor"),  
                     values = c("Antal Kassor" = "black", "Medelvärde delägare kvinnor" = "#6E6E6E")) + 
  scale_fill_manual("Ribbons", breaks = c("Delägare Kvinnor Max/Min", "Mean +- sd"), 
                    values = c("Delägare Kvinnor Max/Min" = "blue", `Mean +- sd` = "red")) + 
  scale_linetype_manual("Variabler",values=c("Antal Kassor"=2,"Medelvärde delägare kvinnor"=1))+
  theme(legend.direction = "horizontal", legend.position = "bottom", legend.key = element_blank(), 
        legend.background = element_rect(fill = "white", colour = "gray30")) + 
  guides(linetype=guide_legend(keywidth = 3, keyheight = 1),fill = guide_legend(keywidth = 2, keyheight = 1),
         colour=guide_legend(keywidth = 6, keyheight = 1)) +
  coord_cartesian(ylim = c(-200000, 2100000),xlim=c(1944,1954))+
  theme(axis.text.x  = element_text(hjust=0.5, size=9,colour="black",face="bold"),
        axis.text.y  = element_text(size=9,colour="black",face="bold"),
        #panel.grid.minor = element_blank(),
        #panel.background = element_blank(), #färgen på backgrunden. Vill ej ha nån (vit) så tar bort.
        axis.ticks = element_blank(), ##Ska det gå en linje från siffrorna på axlarna?
        plot.title = element_text(size = rel(1.2)),
        axis.title.y = element_text(size = rel(1.1)),
        axis.title.x=element_text(size = rel(1.1))) 
```

然后我打电话给：

```
multiplot(plotONE,plotTWO, cols=2) 
```

是`result`：

![在此处输入图像描述](../Images/833ef203e7aa2fd2c92acea4b3562435.png)

我不明白为什么`legend`两张图片底部的位置改变了，即为什么`Variabler`和`Ribbons`改变两张图片中的位置......

有任何想法吗？

最好的祝福！

`EDIT` 如果我尝试使用`guides`with `order`inside，结果如下：

```
plotTWO=ggplot(subset(hejALLA,variable=="N_kvinnor"), aes(x = År)) + 

  geom_line(aes(y = Mean, color = "Medelvärde delägare kvinnor",linetype = "Medelvärde delägare kvinnor"), 
            size = 1.7, alpha = 1) + 

  geom_ribbon(aes(ymax = Max, 
                  ymin = Min, fill = "Delägare Kvinnor Max/Min"), color="blue",linetype = 3, 
              alpha = 0.2) + 

  geom_ribbon(aes(ymax = Mean+sd, ymin = Mean-sd, fill = "Mean +- sd"), 
              colour = "black", linetype = 2, alpha = 0.5)+

  #geom_line(aes(y = Sum, 
  #color = "Sum Delägare Män"), size = 0.9, linetype = 1, alpha = 1) + 

  geom_line(aes(y = N, 
                color = "Antal Kassor",linetype="Antal Kassor"), size = 0.9, alpha = 1)+

  scale_y_continuous(breaks = seq(-200000, 2100000, by = 50000), limits = c(-200000, 2100000), 
                     labels = seq(-200000, 2100000, by = 50000))+ 
  scale_x_continuous(breaks=seq(1944,1954,1))+
  labs(title = "Kvinnliga Delägare",x="Year\n",y="Value\n") +

  scale_color_manual("Variabler", breaks = c("Antal Kassor","Medelvärde delägare kvinnor"),  
                     values = c("Antal Kassor" = "black", "Medelvärde delägare kvinnor" = "#6E6E6E")) + 
  scale_fill_manual("Ribbons", breaks = c("Delägare Kvinnor Max/Min", "Mean +- sd"), 
                    values = c("Delägare Kvinnor Max/Min" = "blue", `Mean +- sd` = "red")) + 
  scale_linetype_manual("Variabler",values=c("Antal Kassor"=2,"Medelvärde delägare kvinnor"=1))+
  theme(legend.direction = "horizontal", legend.position = "bottom", legend.key = element_blank(), 
        legend.background = element_rect(fill = "white", colour = "gray30")) + 
  guides(fill = guide_legend(keywidth = 2, keyheight = 1,order=2), linetype=guide_legend(keywidth = 3, keyheight = 1,order=1),
         colour=guide_legend(keywidth = 6, keyheight = 1)) +
  coord_cartesian(ylim = c(-200000, 2100000),xlim=c(1944,1954))+
  theme(axis.text.x  = element_text(hjust=0.5, size=9,colour="black",face="bold"),
        axis.text.y  = element_text(size=9,colour="black",face="bold"),
        #panel.grid.minor = element_blank(),
        #panel.background = element_blank(), #färgen på backgrunden. Vill ej ha nån (vit) så tar bort.
        axis.ticks = element_blank(), ##Ska det gå en linje från siffrorna på axlarna?
        plot.title = element_text(size = rel(1.2)),
        axis.title.y = element_text(size = rel(1.1)),
        axis.title.x=element_text(size = rel(1.1))) 
```

![在此处输入图像描述](../Images/a6b37bdd608221c683213369172fcc9e.png)

所以我得到了3个传说......

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:00:20.423

要更改多个图例的顺序，您应该在函数`order=`内添加参数`guides()`，`guide_legend()`其中数字对应于顺序，例如 1 或 2。

如果有合并在一起的图例/比例，则`order=`应该为两个图例设置相同的值。

在这种特殊情况下`colour=`，`linetype=`图例合并在一起，因此两者应该具有相同的`order=1`.

由于有两个图，因此两者都添加相同的顺序以具有相同的图例外观。

```
+guides(fill = guide_legend(keywidth = 2, keyheight = 1,order=2),
        linetype=guide_legend(keywidth = 3, keyheight = 1,order=1),
         colour=guide_legend(keywidth = 6, keyheight = 1,order=1)) 
```

# .htaccess - 在 URL 中重写规则和转义（编码）正斜杠

> ID：15497333
> 
> 赞同：2
> 
> 时间：2013-03-19T10:48:35.617
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我开发了这个 RewriteRule，它一直运行良好，直到我发现一个问题。

这是这里的规则：

```
 RewriteCond %{REQUEST_URI} ^/([^/]+)/([^/]+)/([^/]+)/(.*)$
 RewriteCond %{DOCUMENT_ROOT}/%1/%2/%4.php -f
 RewriteRule ^ /%1/%2/%4.php?id=%3 [QSA,L] 
```

URL 格式如下： /home/service/ *ID* /scriptname 注意*ID*是动态的，RewriteRule 在检查文件是否存在时不会考虑它。

但是在这种情况下，我发现，我使用的其中一个 ID 包含一个“%2F”——解码时它被转换为正斜杠 (/)——并且由于某种原因，重写规则在中断时是因为它认为还有另一个目录。

我的问题是，为什么 %2F 在 RewriteRule 中被解码，我该如何设计解决方案？- 最好不是快速破解或更改 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:39:41.510

我认为您需要在重写规则中添加**B**标志，如下所示：

```
RewriteRule ^ /%1/%2/%4.php?id=%3 [QSA,L,B] 
```

检查此[链接](http://httpd.apache.org/docs/2.2/rewrite/flags.html#flag_b)以获取更多信息。

# java - Hibernate @MappedClass 多态性

> ID：15497334
> 
> 赞同：0
> 
> 时间：2013-03-19T10:48:39.290
> 
> 标签：java, hibernate, orm, mapping

假设我有这门课

```
@MappedSuperclass
public abstract class A{...} 
```

还有这堂课

```
@Entity
@Table
public class B extends {...} 
```

我能处理这种多态性吗？

```
A aParent = serviceLayer.getSubClass(Long id) 
```

或像这样：

```
List<A> listOfItems = serviceLayer.getSubClassAsList(); 
```

这两种说法都有效吗？假设`getSubClass(Long id)` 并分别`getSubClassAsList`返回 a`B`和 a `List<B>`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:33:00.487

问题不是很清楚，但是您将无法对超类进行查询，因为hibernate 不知道要针对哪个表发出请求。这可以被视为`@Table`注释在您的子类`B`上，而不是在您的超类上`A`

换句话说：您将能够将结果实体 B 分配给变量 A（java 继承的东西），但您将无法在 HQL 中编写类似的内容：`from A ...`因为 hibernate 不知道要查询哪个表（ORM不代表`Object Reading Mind`（开发人员的）；））。

# xml - XML - 使用 XSLT 2 组合不同的标签

> ID：15497337
> 
> 赞同：0
> 
> 时间：2013-03-19T10:48:52.633
> 
> 标签：xml, xslt-2.0, xslt-grouping

我已经在这里询问过关于同一个文件的类似问题（[XML - 使用 XSLT 将标签组合到子项](https://stackoverflow.com/questions/15244416/xml-combine-tags-to-children-with-xslt)）。不幸的是，我的 XML 已经增长，所以我再次需要您的帮助。

```
<?xml version="1.0"?>                                                                                                                                 
<ROWSET>                                                                                                                                              
 <ROW>                                                                                                                                                
  <KUNDENNR>63564</KUNDENNR>                                                                                                                          
  <JAHR>2012</JAHR>                                                                                                                                   
  <MONAT>2</MONAT>                                                                                                                                    
  <NAME>John Doe</NAME>                                                                                                                       
  <NETTO>504,66</NETTO>                                                                                                                               
  <DB_BASIS>21,56</DB_BASIS>                                                                                                                          
  <EKECHT>482,56</EKECHT>                                                                                                                             
  <NAME1>Some Name</NAME1>                                                                                                                       
  <NAME2>BA 31 (BÜRO GGR 1)</NAME2>                                                                                                                   
  <LAND>AT</LAND>                                                                                                                                     
  <PLZ>1082</PLZ>                                                                                                                                     
  <ORT>Wien</ORT>                                                                                                                                     
  <ADM>Henry Ford</ADM>                                                                                                                          
  <KUNDENKLASSE>A</KUNDENKLASSE>                                                                                                                      
  <UEBERKUNDE>Some Value</UEBERKUNDE>                                                                                                             
  <HANDLING>22,577179011</HANDLING>                                                                                                                   
  <SOLLFRACHT>22,68</SOLLFRACHT>              
  <DG_BASIS_P>-10,763888888888888888888888888888888889</DG_BASIS_P>                                                                                   
 </ROW> 
 <ROW>                                                                                                                                                
  <KUNDENNR>63564</KUNDENNR>                                                                                                                          
  <JAHR>2011</JAHR>                                                                                                                                   
  <MONAT>1</MONAT>                                                                                                                                    
  <NAME>John Doe</NAME>                                                                                                                       
  <NETTO>502,66</NETTO>                                                                                                                               
  <DB_BASIS>21,56</DB_BASIS>                                                                                                                          
  <EKECHT>482,56</EKECHT>                                                                                                                             
  <NAME1>Some Name</NAME1>                                                                                                                       
  <NAME2>BA 31 (BÜRO GGR 1)</NAME2>                                                                                                                   
  <LAND>AT</LAND>                                                                                                                                     
  <PLZ>1082</PLZ>                                                                                                                                     
  <ORT>Wien</ORT>                                                                                                                                     
  <ADM>Henry Ford</ADM>                                                                                                                          
  <KUNDENKLASSE>A</KUNDENKLASSE>                                                                                                                      
  <UEBERKUNDE>Some value</UEBERKUNDE>                                                                                                             
  <HANDLING>22,577179011</HANDLING>                                                                                                                   
  <SOLLFRACHT>22,68</SOLLFRACHT>              
  <DG_BASIS_P>-10,538888888888888888889</DG_BASIS_P>
  <HGID>342</HGID>
  <HGNAME>Some product name</HGNAME>                                                                       
 </ROW> 
 <ROW>                                                                                                                                                
  <KUNDENNR>63564</KUNDENNR>                                                                                                                          
  <JAHR>2011</JAHR>                                                                                                                                   
  <MONAT>1</MONAT>                                                                                                                                    
  <NAME>John Doe</NAME>                                                                                                                       
  <NETTO>217,66</NETTO>                                                                                                                               
  <DB_BASIS>21,56</DB_BASIS>                                                                                                                          
  <EKECHT>482,56</EKECHT>                                                                                                                             
  <NAME1>Some Name</NAME1>                                                                                                                       
  <NAME2>BA 31 (BÜRO GGR 1)</NAME2>                                                                                                                   
  <LAND>AT</LAND>                                                                                                                                     
  <PLZ>1082</PLZ>                                                                                                                                     
  <ORT>Wien</ORT>                                                                                                                                     
  <ADM>Henry Ford</ADM>                                                                                                                          
  <KUNDENKLASSE>A</KUNDENKLASSE>                                                                                                                      
  <UEBERKUNDE>Some value</UEBERKUNDE>                                                                                                             
  <HANDLING>22,577179011</HANDLING>                                                                                                                   
  <SOLLFRACHT>22,68</SOLLFRACHT>              
  <DG_BASIS_P>-10,538888888888888888889</DG_BASIS_P>
  <HGID>342</HGID>
  <HGNAME>Some product name</HGNAME>                                                                       
 </ROW> 
</ROWSET> 
```

已添加字段 HGID 和 HGNAME，最终 XML 输出应如下所示：

```
<?xml version="1.0"?>                                                                                                                                 
<ROWSET>                                                                                                                                              
 <KUNDE>
  <KUNDENNR>63564</KUNDENNR>                                                                                                                          
  <NAME>John Doe</NAME>      
  <NAME1>Some Name</NAME1>                                                                                                                       
  <NAME2>BA 31 (B RO GGR 1)</NAME2>                                                                                                                   
  <LAND>AT</LAND>                                                                                                                                     
  <PLZ>1082</PLZ>                                                                                                                                     
  <ORT>Wien</ORT>                                                                                                                                     
  <ADM>Henry Ford</ADM>                                                                                                                          
  <KUNDENKLASSE>A</KUNDENKLASSE>    
  <UEBERKUNDE>Some Value</UEBERKUNDE>                                                                                                              
    <ROW>                                                                                                                                                
        <JAHR>2012</JAHR>                                                                                                                                   
        <MONAT>2</MONAT>                                                                                                                                                                                                                                                                   
        <DB_BASIS>21,56</DB_BASIS>                                                                                                                          
        <EKECHT>482,56</EKECHT>                                                                                                                             
        <HANDLING>22,577179011</HANDLING>                                                                                                                   
        <SOLLFRACHT>22,68</SOLLFRACHT>                                                                                                                      
        <DG_BASIS_P>4,27218325209051638727063765703642056038</DG_BASIS_P>
        <WGROUPITEM>
            <HGID>125</HGID>
            <HGNAME>Another product name</HGNAME>
            <NETTO>504,66</NETTO>
        </WGROUPITEM>                                                                                   
    </ROW>
    <ROW>
        <JAHR>2012</JAHR>                                                                                                                                   
        <MONAT>1</MONAT>                                                                                                                                    
        <NETTO>502,66</NETTO>                                                                                                                              
        <DB_BASIS>21,56</DB_BASIS>                                                                                                                        
        <EKECHT>482,56</EKECHT>                                                                                                                           
        <HANDLING>22,577179011</HANDLING>                                                                                                                    
        <SOLLFRACHT>22,68</SOLLFRACHT>                                                                                                                      
        <DG_BASIS_P>-10,538888888888888888889</DG_BASIS_P> 
        <WGROUPITEM>
            <HGID>359</HGID>
            <HGNAME>Some other product name</HGNAME> 
            <NETTO>502,66</NETTO>                                                                                    
        </WGROUPITEM>
        <WGROUPITEM>
            <HGID>342</HGID>
            <HGNAME>Some product name</HGNAME> 
            <NETTO>217,66</NETTO>
        </WGROUPITEM>
    </ROW>  
 </KUNDE> 
 </ROWSET> 
```

所以基本上我需要按 MONAT 和 JAHR（月和年）对这些 HGNAME、HGID 和 NETTO 字段进行分组。我已经尝试从前面提到的帖子中修改那个 XSL 文件，但我没有运气。我遇到的问题是我无法通过 MONAT 和 JAHR 正确分组，我总是得到所有记录或没有记录:-(。

编辑：另外，我想找到类似的 UEBERKUNDE 条目并将它们分组为父项，所以它看起来像

```
<ROWSET>
<UEBERKUNDE>
    <NAME>Some value</NAME>
    <KUNDE>
        <KUNDENNR>63564</KUNDENNR>
        .......
   </KUNDE>
</UEBERKUNDE> 
```

如果有人可以帮助我，那就太棒了。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:00:44.690

我终于找到了如何做到这一点，并想分享我的解决方案......这是最终的 xslt。请注意，某些名称已更改。我还将 NETTO、DB_BASIS 等字段移到了新的 WGROUPITEM 子组中。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
version="2.0">
<xsl:output method="xml" indent="yes" />
<xsl:key name="rowsByMonth" match="ROW" use="concat(MONAT, '+', JAHR, '+', KUNDENNR)"></xsl:key>

<xsl:template match="ROWSET">

    <ROWSET>
        <xsl:for-each-group select="ROW" group-by="UKID">
            <UEBERKUNDE>
                <NAME><xsl:value-of select="UEBERKUNDE" /></NAME>
                <xsl:copy-of select="UKID" />
                <xsl:for-each-group select="current-group()" group-by="KUNDENNR">
                    <KUNDE>
                        <xsl:variable name="currentKdnr" select="KUNDENNR"/>
                        <xsl:copy-of select="KUNDENNR" />
                        <xsl:copy-of select="KNAME1" />
                        <xsl:copy-of select="KNAME2" />
                        <xsl:copy-of select="KNAME3" />
                        <xsl:copy-of select="LAND" />
                        <xsl:copy-of select="PLZ" />
                        <xsl:copy-of select="ORT" />
                        <xsl:copy-of select="ADM" />
                        <xsl:copy-of select="KUNDENKLASSE" />

                        <xsl:for-each select="current-group()[count(. | key('rowsByMonth', concat(MONAT,'+',JAHR,'+',KUNDENNR))[1]) = 1]">
                            <ROW>
                                <xsl:copy-of select="JAHR" />
                                <xsl:copy-of select="MONAT" />
                                <xsl:copy-of select="HANDLING" />
                                <xsl:copy-of select="SOLLFRACHT" />
                                <xsl:for-each select="key('rowsByMonth', concat(MONAT,'+',JAHR,'+',KUNDENNR))">
                                    <WGROUPITEM>
                                        <xsl:copy-of select="HGNAME" />
                                        <xsl:copy-of select="HGID" />
                                        <xsl:copy-of select="DG_BASIS" />
                                        <xsl:copy-of select="EKECHT" />
                                        <xsl:copy-of select="DB_BASIS" />
                                        <xsl:copy-of select="NETTO" />
                                    </WGROUPITEM>
                                </xsl:for-each>
                            </ROW>
                        </xsl:for-each>
                    </KUNDE>
                </xsl:for-each-group>
            </UEBERKUNDE>
        </xsl:for-each-group>
    </ROWSET>
</xsl:template></xsl:stylesheet> 
```

不管怎么说，还是要谢谢你。

# mips - Mips 到二进制和起始地址

> ID：15497341
> 
> 赞同：0
> 
> 时间：2013-03-19T10:49:00.650
> 
> 标签：mips

我有这个说法

```
addiu $v0, $zero, 0 
```

那就是我输入

操作码是 001001

rs 是 00000 rt 是 00002

函数是 0000 0000 0000 0000

所以所有这些都是`0010 0100 0000 0010 0000 0000 0000 0000`

所以在十六进制中

0x24020000

问题是，它说：它被加载到地址 0x00080000 的内存中。

我如何解释加载的内存地址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:58:28.550

`0x24020000`是一条指令，它与 PC 无关，在您的情况下，`0x00080000`. 内存地址映射通常在链接阶段完成。

# django - 无法导入设置“live.settings”（是否在 sys.path 上？）：没有名为 billiard.exceptions 的模块

> ID：15497343
> 
> 赞同：2
> 
> 时间：2013-03-19T10:49:04.667
> 
> 标签：django

我正在尝试在 Ubuntu（EC2 实例）上将我的 django 项目设置为生产环境，但出现以下错误。我的路径是 100% 正确的，并且我已经查找了具有相同类型问题的其他 stackoverflow 问题，但似乎没有任何帮助。我想我可能有不同的问题。

任何人都可以发现任何错误或知道我的问题导致此错误吗？

**运行 Django 1.5

Ubuntu 12.04.2 LTS**

错误：

**文件“/usr/local/lib/python2.7/dist-packages/django/conf/_ *init* _.py”，第 132 行，在 _ *init* _ raise ImportError("Could not import settings '%s' (是在 sys.path 上？): %s" % (self.SETTINGS_MODULE, e)) [client 37.191.99.202] ImportError: Could not import settings 'live.settings' (它在 sys.path 上吗？): 没有名为 billiard 的模块.例外**

**wsgi**

```
import os, sys
sys.path.append('/srv/projects/liveSMS')
sys.path.append('/srv/projects/liveSMS.live')
os.environ.setdefault("DJANGO_SETTINGS_MODULE", "live.settings")

import django.core.handlers.wsgi

application = django.core.handlers.wsgi.WSGIHandler() 
```

站点（domain.com 不是真正的域）

```
<VirtualHost *:80>
   ServerName  domain.com
   ServerAlias domain.com

   DocumentRoot /srv/projects/liveSMS/public

   WSGIScriptAlias / /srv/projects/liveSMS/apache/django.wsgi
   <Directory /srv/projects/liveSMS/>
      Order allow,deny
      Allow from all
   </Directory>

    Alias /robots.txt /srv/projects/liveSMS/public/robots.txt
    Alias /static /srv/projects/liveSMS/static

     ErrorLog /srv/projects/liveSMS/logs/error.log
</VirtualHost> 
```

完全错误

```
[Tue Mar 19 10:31:40 2013] [error] [client 37.191.99.202]     raise ImportError("Could not import settings '%s' (Is it on sys.path?): %s" % (self.SETTINGS_MODULE, e))
[Tue Mar 19 10:31:40 2013] [error] [client 37.191.99.202] ImportError: Could not import settings 'live/settings' (Is it on sys.path?): Import by filename is not supported.
[Tue Mar 19 10:39:14 2013] [error] [client 37.191.99.202] mod_wsgi (pid=1488): Exception occurred processing WSGI script '/srv/projects/liveSMS/apache/django.wsgi'.
[Tue Mar 19 10:39:14 2013] [error] [client 37.191.99.202] Traceback (most recent call last):
[Tue Mar 19 10:39:14 2013] [error] [client 37.191.99.202]   File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/wsgi.py", line 236, in __call__
[Tue Mar 19 10:39:14 2013] [error] [client 37.191.99.202]     self.load_middleware()
[Tue Mar 19 10:39:14 2013] [error] [client 37.191.99.202]   File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py", line 45, in load_middleware
[Tue Mar 19 10:39:14 2013] [error] [client 37.191.99.202]     for middleware_path in settings.MIDDLEWARE_CLASSES:
[Tue Mar 19 10:39:14 2013] [error] [client 37.191.99.202]   File "/usr/local/lib/python2.7/dist-packages/django/conf/__init__.py", line 52, in __getattr__
[Tue Mar 19 10:39:14 2013] [error] [client 37.191.99.202]     self._setup(name)
[Tue Mar 19 10:39:14 2013] [error] [client 37.191.99.202]   File "/usr/local/lib/python2.7/dist-packages/django/conf/__init__.py", line 47, in _setup
[Tue Mar 19 10:39:14 2013] [error] [client 37.191.99.202]     self._wrapped = Settings(settings_module)
[Tue Mar 19 10:39:14 2013] [error] [client 37.191.99.202]   File "/usr/local/lib/python2.7/dist-packages/django/conf/__init__.py", line 132, in __init__
[Tue Mar 19 10:39:14 2013] [error] [client 37.191.99.202]     raise ImportError("Could not import settings '%s' (Is it on sys.path?): %s" % (self.SETTINGS_MODULE, e))
[Tue Mar 19 10:39:14 2013] [error] [client 37.191.99.202] ImportError: Could not import settings 'live.settings' (Is it on sys.path?): No module named billiard.exceptions
[Tue Mar 19 11:14:53 2013] [error] [client 37.191.99.202] mod_wsgi (pid=1656): Exception occurred processing WSGI script '/srv/projects/liveSMS/apache/django.wsgi'.
[Tue Mar 19 11:14:53 2013] [error] [client 37.191.99.202] Traceback (most recent call last):
[Tue Mar 19 11:14:53 2013] [error] [client 37.191.99.202]   File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/wsgi.py", line 236, in __call__
[Tue Mar 19 11:14:53 2013] [error] [client 37.191.99.202]     self.load_middleware()
[Tue Mar 19 11:14:53 2013] [error] [client 37.191.99.202]   File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py", line 45, in load_middleware
[Tue Mar 19 11:14:53 2013] [error] [client 37.191.99.202]     for middleware_path in settings.MIDDLEWARE_CLASSES:
[Tue Mar 19 11:14:53 2013] [error] [client 37.191.99.202]   File "/usr/local/lib/python2.7/dist-packages/django/conf/__init__.py", line 52, in __getattr__
[Tue Mar 19 11:14:53 2013] [error] [client 37.191.99.202]     self._setup(name)
[Tue Mar 19 11:14:53 2013] [error] [client 37.191.99.202]   File "/usr/local/lib/python2.7/dist-packages/django/conf/__init__.py", line 47, in _setup
[Tue Mar 19 11:14:53 2013] [error] [client 37.191.99.202]     self._wrapped = Settings(settings_module)
[Tue Mar 19 11:14:53 2013] [error] [client 37.191.99.202]   File "/usr/local/lib/python2.7/dist-packages/django/conf/__init__.py", line 132, in __init__
[Tue Mar 19 11:14:53 2013] [error] [client 37.191.99.202]     raise ImportError("Could not import settings '%s' (Is it on sys.path?): %s" % (self.SETTINGS_MODULE, e))
[Tue Mar 19 11:14:53 2013] [error] [client 37.191.99.202] ImportError: Could not import settings 'live.settings' (Is it on sys.path?): No module named billiard.exceptions 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:51:11.593

可能在您的配置中，路径 /srv/projects/liveSMS 和 /srv/projects/liveSMS.live 必须位于 PYTHONPATH 变量中。

例如，您可以将其永久添加到启动 Apache 网络服务器的用户的 .bashrc 文件中：

PYTHONPATH='/srv/projects/liveSMS/:/srv/projects/liveSMS.live/'。

我不确定建议的解决方案是最好的。但它可以工作。

# php - 教义多对一映射问题

> ID：15497348
> 
> 赞同：10
> 
> 时间：2013-03-19T10:49:14.330
> 
> 标签：php, symfony, doctrine

尝试创建外键映射（即，将类别映射到产品）时，我在“创建产品”页面中收到以下错误：

> 在传递给选择字段的“CJ\BusinessBundle\Entity\Category”类型的对象上找不到“__toString()”方法。要改为读取自定义 getter，请将选项“property”设置为所需的属性路径。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-19T10:50:59.967

您需要向`__toString()`Category 实体添加一个方法。例如：

```
public function __toString()
{
    return $this->name;
} 
```

PHP 魔术方法`__toString()`用于呈现对象的文本表示。在这种情况下，在相关实体的表单中选择类别时将使用类别名称。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-19T10:52:54.897

错误消息告诉您需要做什么。在您的 Category 实体中，您需要添加一个 __toString() 方法，以便当您添加产品时，它知道在表单上的选择框中为每个项目命名。

```
public function __toString()
{
    return $this->name;
} 
```

在上面替换“名称”为您的类别的可读标识符的任何字段。

# php - 从两个表构建一个数组（从一个表中获取另一个表中的产品的图像）

> ID：15497352
> 
> 赞同：0
> 
> 时间：2013-03-19T10:49:28.543
> 
> 标签：php, mysql

好的，我知道这应该很容易，但我正在绕圈子。我有两个表，每个运行查询的两个函数，第一个函数获取产品，第二个函数获取产品的图像

我想得到一个数组，它是产品，它的图像......

这是我的代码...

```
/**
 * Gets the requested product from the DB
 * 
 * @param string $productUrl
 * @param string $productID
 */
private function _db_get_product($productUrl = null, $productID = null) {

    if (empty($productUrl) && empty($productID))
        return;

    $db = $this->getConnection();
    $q = "SELECT " . $this->_leaf_sql_fields() . 
            " FROM content_products_items pr WHERE pr.productStatus >= "
            . menuMachine::getMinimumStatus() . " ";

    if (!empty($productUrl))
        $q .= " AND productUrl = '" . $productUrl . "'";

    if (!empty($productID))
        $q .= " AND productID = '" . $productID . "'";

    if ($res = $db->recordsetSingle($q))
        $this->_product = $res;

    return $res;
}

/**
 * Get the images for the product
 * @return array
 */
private function _db_get_product_images($productID) {

    $db = $this->getConnection();

    $q = "SELECT * FROM content_products_images WHERE productID = '" . $productID . "'";

    $this->_productImages = $db->recordset($q);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:17:47.727

您是否只是在寻找将两者结合在同一个函数中的查询？

```
//Basic query, improve it according to your needs

SELECT 
*
FROM
content_products_items  as p,
content_products_images as i
WHERE
p.productID = $productId AND
i.productID = p.productID; 
```

或者是一种调用这两个函数并将结果组合到一个数组中的方法？

```
$myProduct = array(
    'productData'   => $this->_db_get_product($productUrl, $productID),
    'productImages' => $this->_db_get_product_images($productID),
); 
```

两者都应该引导您进入工作方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T11:21:46.937

我第一次尝试在 StackOverflow 上回答某人，所以请多多包涵……但我认为以下是您正在寻找的内容？

```
$product = array('product' => _db_get_product($URL, $ID), 'images' => _db_get_product_images($ID)); 
```

或者，如果您想要一次完成所有操作并且不需要这两种单独的方法，您可以重写您的 _db_get_product 方法，如下所示：

```
private function _db_get_product($productUrl = null, $productID = null) {

    if (empty($productUrl) && empty($productID))
        return;

    $output = array();
    $db = $this->getConnection();
    $q = "SELECT " . $this->_leaf_sql_fields() . 
        " FROM content_products_items pr WHERE pr.productStatus >= "
        . menuMachine::getMinimumStatus() . " ";

    if (!empty($productUrl))
        $q .= " AND productUrl = '" . $productUrl . "'";

    if (!empty($productID))
        $q .= " AND productID = '" . $productID . "'";

    if ($res = $db->recordsetSingle($q))
        array_push($output, $res);

    $q2 = "SELECT * FROM content_products_images WHERE productID = '" . $productID . "'";
    array_push($output, $db->recordset($q2));

    return $output;
} 
```

# java - 不会触发 actionListener

> ID：15497354
> 
> 赞同：0
> 
> 时间：2013-03-19T10:49:32.027
> 
> 标签：java, jsf, richfaces

我是 JSF 主题的新手并开发了一个简单的 Web 对话框：我目前的问题是：我的 selectOneMenu 组件不会触发 actionListener 并且不会重新渲染其他组件。这是我的 JSF 页面：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<%@page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<%@ taglib uri="http://java.sun.com/jsf/core" prefix="f"%>
<%@ taglib uri="http://java.sun.com/jsf/html" prefix="h"%>
<%@ taglib uri="http://richfaces.org/rich" prefix="rich"%>
<%@ taglib uri="http://richfaces.org/a4j" prefix="a4j"%>

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta http-equiv="cache-control" content="no-cache, must-revalidate">
<link href='styles/kn.css' rel="styleSheet" type="text/css" />
</head>

<style>
.top {
    vertical-align: top;
}
</style>

<body>

    <f:view>

        <f:loadBundle basename="messages" var="msg" />

        <h:form id="navigation">
            <%@include file="include/kn_header.jsp"%>
        </h:form>
        <h:form >
            <rich:panel styleClass="mainPanel" header="#{msg.log_title}"
                id="logviewer">

                <h:selectOneMenu value="#{logviewer.machine} " onchange="submit()" immediate="true">
                    <f:selectItems value="#{logviewer.machineList}" />
                    <a4j:support event="onchange"
                        actionListener="#{logviewer.processValueChanged}"
                        ajaxSingle="true" immediate="true" reRender="progressPanel" />
                </h:selectOneMenu>

                <rich:spacer height="10px" />
                <a4j:outputPanel id="progressPanel"
                    rendered="#{logviewer.isMachine}">
                    <rich:progressBar value="#{logviewer.currentValue}" interval="1000"
                        label="#{logviewer.currentValue} %" enabled="#{logviewer.enabled}"
                        minValue="-1" maxValue="100" reRenderAfterComplete="progressPanel">
                        <f:facet name="initial">
                            <br />
                            <a4j:commandButton action="#{logviewer.startProcess}"
                                value="Start Download" reRender="progressPanel"
                                rendered="#{logviewer.buttonRendered}"
                                style="margin: 9px 0px 5px;" />

                        </f:facet>
                        <f:facet name="complete">
                            <br />
                            <rich:spacer height="10px" />
                            <a4j:commandButton id="doDownload"
                                action="#{logviewer.doDownload}" value="button"
                                alt="#{msg.download}" title="#{msg.download}"
                                image="#{icon.download}">

                                <rich:toolTip value="#{msg.download}"
                                    style="background-color:#{richSkin.generalBackgroundColor}; border-color:#{richSkin.headerBackgroundColor}">
                                </rich:toolTip>

                            </a4j:commandButton>
                            <div class="TextArea">
                                <rich:panel styleClass="mainPanel">
                                    <h:inputTextarea id="logView" value="#{logviewer.log}"
                                        rows="35" style="font-size:10pt; width:100%" readonly="true" />
                                </rich:panel>
                            </div>
                        </f:facet>
                    </rich:progressBar>
                </a4j:outputPanel>

            </rich:panel>
        </h:form>

    </f:view>
</body>
</html> 
```

hier 是我的 Bean：

```
package com.kn.documentserver.jsf;

import java.util.ArrayList;
import java.util.List;

import javax.faces.event.ValueChangeEvent;
import javax.faces.model.SelectItem;

import com.kn.commons.util.BeanLocator;
import com.kn.dcs.distribution.DownloadFile;
import com.kn.documentserver.entity.Machine;
import com.kn.documentserver.interfaces.IMachine;

public class LogviewerBean extends AbstractBean {

    // private final static Logger LOG =
    // Logger.getLogger(AdministrationBean.class);

    private List<SelectItem> machineList;

    private Machine machine;
    private int maxlength;
    private String logfile= null;
    private DownloadFile logFile;
    private boolean buttonRendered = true;
    private boolean enabled = false;
    IMachine s = BeanLocator.lookup(IMachine.class,
            "java:global/KN_DocumentServerFrontendJBoss/MachineBean");

    public LogviewerBean() {
        super();
        machineList = new ArrayList<SelectItem>(); 
        initMachineList(readMachineList());
    }

    private List<Machine> readMachineList() {

        return s.findAll();
    }

    private void initMachineList(List<Machine> machines) {
        for (Machine m : machines) {
            if (m.getMachineName().contains("KN")
                    && !m.getMachineName().equals("ASKNGHST")
                    && !m.getMachineName().equals("ASKNITRA")) {
                SelectItem item= new SelectItem(m.getMachineName(),m.getMachineName());
            machineList.add(item);
            }
        }
    }

    public List<SelectItem> getMachineList() {
        return machineList;
    }
    public void changeEvent() {
        System.out.println("Works");
    }

    public void setMachineList(List<SelectItem> machineList) {
        this.machineList = machineList;
    }

    public Machine getMachine() {
        return machine;
    }

    public String getLog() {
        return logfile;
    }

//  public GenericConverter getMachineConverter() {
//      
//      return new GenericConverter(machineList.values());
//  }

    public void setMachine(Machine machine) {

        this.machine = machine;
    }

    public String processValueChanged(ValueChangeEvent vce) {
        String temp = (String) vce.getNewValue();
        this.machine=s.findByName(temp);
        return null;

    }

    public void doshowLog() {
        setMachine(this.machine);

    }

    public int getMaxlength() {
        return maxlength;
    }

    public void setMaxlength(int maxlength) {
        this.maxlength = maxlength;
    }

    public boolean getIsMachine() {
        return (this.machine == null) ? false : true;
    }

    public String getLogfile() {
        return logfile;
    }

    public String startProcess() {
        setEnabled(true);
        setButtonRendered(false);
        logFile = new DownloadFile(machine);
        System.out.println(getTotalValue());
        logFile.start();
        return null;
    }

    public void setLogfile() {
        byte[] bytes = logFile.getLogfileAsbyte();
        if (bytes != null) {
            this.logfile = new String(bytes);
        }

    }

    public boolean getIsLogfileDownloaded() {
        return (this.logfile == null) ? false : true;
    }

    public long getTotalValue() {
        return logFile.getFilelength();
    }

    public Long getCurrentValue() {
        if (isEnabled()) {
            Long current = new Long(logFile.getCurrfilelength());
            current = (current * 100) / getTotalValue();
            if (current >= 100) {
                setButtonRendered(true);
                setLogfile();
                return Long.valueOf(101);
            } else {
                return current;
            }

        } else {
            return Long.valueOf(-1);
        }

    }

    public boolean isEnabled() {
        return enabled;
    }

    public void setEnabled(boolean enabled) {
        this.enabled = enabled;
    }

    public boolean isButtonRendered() {
        return buttonRendered;
    }

    public void setButtonRendered(boolean buttonRendered) {
        this.buttonRendered = buttonRendered;
    }

} 
```

你能帮我调查一下，到底出了什么问题。

亲切的问候亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:59:06.417

如果您使用 JSF 1.2 或更高版本，请将 prependId="false" 添加到您的第二个表单（包含您的 selectOneMenu）。否则（使用 1.2 之前的 JSF），您为表单设置一个 id 并将其添加到您的 reRender (reRender="formId:progressPanel")

# asp.net-mvc-4 - 使用 WebApi 和结构图依赖注入

> ID：15497355
> 
> 赞同：2
> 
> 时间：2013-03-19T10:49:37.373
> 
> 标签：asp.net-mvc-4, asp.net-web-api, structuremap

尽管有很多关于堆栈溢出的问题与我的这个问题相似，但没有人解决我的问题

我正在使用一个 MVC4 互联网应用程序，其中我有几个 MVC 控制器并且我正在使用依赖注入`Structure map`。虽然依赖注入适用于 MVC 控制器，但是当我在同一个 MVC 互联网应用程序中添加 WebApi 控制器并在 WebApi 控制器的构造函数中使用与我在 MVC 控制器中使用的相同的参数时，但依赖注入不适用于 WebApi 控制器，虽然如果我不为 WebApi 控制器（无参数构造函数）使用依赖注入，那么它工作正常，但对于 WebApi 依赖注入（参数化构造函数）它会抛出错误`No parameter less constructor is found`。

结论没有为 Internet（MVC 应用程序）中的 WebApi 控制器注入依赖关系。

建议使用的文章很少`DependencyResolver.SetResolver()`。我使用但没有解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T09:10:05.700

WebApi 控制器不工作的原因如下：

**由于 MVC 控制器使用不同的 DependenyResolver 实例，它是 System.Web.MVC .dll 和 System.Web.MVC 命名空间的一部分**

**[http://msdn.microsoft.com/en-us/library/system.web.mvc.idependencyresolver(v=vs.98).aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.idependencyresolver(v=vs.98).aspx)**

**Api Controllers 使用 System.Web.Http 的一部分的 DependencyResolver 实例。**

**[http://msdn.microsoft.com/en-us/library/system.web.http.dependencies.idependencyresolver(v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/system.web.http.dependencies.idependencyresolver(v=vs.108).aspx)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T10:55:48.413

MVC 和 WebAPI 控制器有不同的方式来设置它们的依赖解析器。这就是我为 Unity 设置依赖解析器的方式：

```
public void ConfigureForMvc4()
{
    DependencyResolver.SetResolver(
        new UnityMvc4.UnityDependencyResolver(Container));
}

public void ConfigureForWebApi()
{
    GlobalConfiguration.Configuration.DependencyResolver =
        new UnityWebApi.UnityDependencyResolver(Container);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-11T04:08:07.770

您需要为 WebApi 添加依赖注入文件

安装 NuGet StructureMap.WebApi2 并在 App_Start/WebApiConfig.cs 文件中，调用 StructuremapWebApi.Start();

参考：[https ://www.exceptionnotfound.net/setting-up-dependency-injection-in-web-api-with-structuremap/](https://www.exceptionnotfound.net/setting-up-dependency-injection-in-web-api-with-structuremap/)

# php - 通过序列化和php将数据保存到表中

> ID：15497358
> 
> 赞同：1
> 
> 时间：2013-03-19T10:49:41.920
> 
> 标签：php, ajax

我使用序列化通过 ajax 将数据从页面获取到另一个页面，如下所示：-

```
var txtCoursesNamewith = $('#with').serialize(); 
```

并像这样在php页面上获取它：-

```
$txtCoursesNamewith = ($_POST['txtCoursesNamewith']);
$unserializedData = array();
parse_str($txtCoursesNamewith,$unserializedData); 
```

当打印这个数组时，它是这样的：-

```
[txtCoursesNamewith] => Array
        (
            [0] => qq
            [1] => ff
        ) 
```

我需要通过 foreach 将此数组插入到我的表中，我尝试这样：-

```
foreach ($unserializedData as $value => $key ) 
```

但它像这样“数组”存储在数据库中，我如何将（qq，ff）存储在表上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:52:12.773

你可以使用`implode()`函数。

```
$txtCoursesName = implode(",", $txtCoursesNamewith); 
```

然后`$txtCoursesName` 作为字符串插入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:52:22.667

用这个

```
foreach ($unserializedData as $key => $val ) {
     //your query   insert into table_name(column_name) values ($val)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T11:08:42.083

dbrow 中的 'Array' 表示您正在插入未序列化的数组。

而不是：INSERT INTO 表（列）VALUES（{$value}）

做：插入表（列）值（{serialize（$value）}）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T10:53:47.697

在循环中迭代查询或构造一个数组并执行单个插入查询

```
 foreach ($_POST['txtCoursesNamewith'] as $key => $val ) {
   //your query   insert into table_name(column_name) values ($val)
 } 
```

# android - 获取 Google 广告系列跟踪

> ID：15497361
> 
> 赞同：2
> 
> 时间：2013-03-19T10:49:49.420
> 
> 标签：android, google-analytics

Google Analytics 使用 utm_source、utm_campaign 和 utm_medium 存储我在 URL 中传递的信息。现在我想知道当用户打开应用程序时如何获取这些信息？我在我的日志中看到了这个：'

```
03-18 20:19:48.633: I/GAV2(32317): Thread[GAThread,5,main]: Campaign found: utm_source=source value tracking tara&utm_medium=medium value tracking tara&utm_campaign=campaign value tracking tara androidlitetrackingtara 
```

我的应用程序清单中有这个：

```
<service android:name="com.google.analytics.tracking.android.CampaignTrackingService" />

        <receiver
            android:name="com.google.analytics.tracking.android.CampaignTrackingReceiver"
            android:exported="true" >
            <intent-filter>
                <action android:name="com.android.vending.INSTALL_REFERRER" />
            </intent-filter>
        </receiver> 
```

我试图从意图中获取它，但数据不存在。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-26T17:21:36.803

确保您使用的是 v3 SDK。这是说明页面：

[https://developers.google.com/analytics/devguides/collection/android/v3/campaigns](https://developers.google.com/analytics/devguides/collection/android/v3/campaigns)

如果 INTENT_REFERRER 不起作用，请尝试页面后面给出的 Map 示例。

此外，请确保您在下载应用程序和显示在 GA 中的数据之间有足够的时间。GA 最多可能需要 24 小时才能显示数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-24T07:51:18.967

创建自己的广播接收器。存储数据并稍后将其传递给谷歌分析

```
public class InstallReceiver extends BroadcastReceiver {

@Override
public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub
    Log.d("InstallReceiver", "onReceive");

    try {
        // get referrer value

        Bundle extras = intent.getExtras();
        if (extras != null) {

            GoogleAnalytics.getInstance(context).getLogger().setLogLevel(LogLevel.VERBOSE);
            String referrerValue = extras.getString("referrer");
// Handle data. Save it

            Log.d("InstallReceiver", "referrerValue=" + referrerValue);
            String afterDecode = URLDecoder.decode(referrerValue, "UTF-8");
            String[] temp = afterDecode.split("&");
            String agencyId = temp[0].replace("utm_source=", "");

            Utils.saveAgencyId(context.getApplicationContext(), agencyId);

// transfer intent to google receiver.

            new CampaignTrackingReceiver().onReceive(context, intent);
        }

    } catch (Exception e) {
        // TODO: handle exception
        e.printStackTrace();
    }
} 
```

# ios - 不断从 UIButton 发送消息

> ID：15497363
> 
> 赞同：0
> 
> 时间：2013-03-19T10:49:55.267
> 
> 标签：ios, objective-c, xcode, cocoa-touch, uibutton

我目前正在制作游戏，但在创建 D-Pad 时遇到了麻烦。当我点击一个按钮时，它只会运行一次，我不知道我可以调用哪个事件来让它不断运行代码，直到玩家停止触摸按钮。当我尝试使用 while 循环时，它只会使自身超载并阻止您触摸其他按钮。这是我通常用来移动播放器和实际加载按钮等的代码：

```
 - (void) playerMoveLeft
{    
    NSArray *images = [NSArray arrayWithObjects:img9,img10,img11,img12,img13,img14,img15,img16, nil];

    [imageView setAnimationImages:images];

        NSLog(@"Called left");
        CGRect myFrame = imageView.frame;
        myFrame.origin.x = imageView.frame.origin.x - 5;
        imageView.frame = myFrame;
        [imageView startAnimating];
    [NSTimer scheduledTimerWithTimeInterval:0.6
                                     target:self
                                   selector:@selector(nothingMovingLeft)
                                   userInfo:nil
                                    repeats:NO];
    [myTimer invalidate];
    myTimer = nil;
}

{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    img1 = [UIImage imageNamed:@"walking-e0000.png"];
    img2 = [UIImage imageNamed:@"walking-e0001.png"];
    img3 = [UIImage imageNamed:@"walking-e0002.png"];
    img4 = [UIImage imageNamed:@"walking-e0003.png"];
    img5 = [UIImage imageNamed:@"walking-e0004.png"];
    img6 = [UIImage imageNamed:@"walking-e0005.png"];
    img7 = [UIImage imageNamed:@"walking-e0006.png"];
    img8 = [UIImage imageNamed:@"walking-e0007.png"];
    img9 = [UIImage imageNamed:@"walking-w0000.png"];
    img10 = [UIImage imageNamed:@"walking-w0001.png"];
    img11 = [UIImage imageNamed:@"walking-w0002.png"];
    img12 = [UIImage imageNamed:@"walking-w0003.png"];
    img13 = [UIImage imageNamed:@"walking-w0004.png"];
    img14 = [UIImage imageNamed:@"walking-w0005.png"];
    img15 = [UIImage imageNamed:@"walking-w0006.png"];
    img16 = [UIImage imageNamed:@"walking-w0007.png"];

    imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0.0,180.0,80.0,80.0)];

    NSArray *images = [NSArray arrayWithObjects:img7, nil];

    [imageView setAnimationImages:images];

    [imageView setAnimationRepeatCount:100];

    [imageView setAnimationDuration:0.5];

    [imageView startAnimating];

    [myView addSubview:imageView];

    moveRight = [UIButton buttonWithType:UIButtonTypeRoundedRect];

    [moveRight addTarget:self action:@selector(playerMoveRight) forControlEvents:UIControlEventTouchUpInside];

    [moveRight setTitle:@"->" forState:UIControlStateNormal];

    moveRight.frame = CGRectMake(200, 280, 60, 60);

    [myView addSubview:moveRight];

    //longPress = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(whichWayToMove:)];

    //longPress.minimumPressDuration = 0.0;

    //[myView addGestureRecognizer:longPress];

    moveLeft = [UIButton buttonWithType:UIButtonTypeRoundedRect];

    [moveLeft addTarget:self action:@selector(playerMoveLeft) forControlEvents:UIControlEventTouchUpInside];

    [moveLeft setTitle:@"<-" forState:UIControlStateNormal];

    moveLeft.frame = CGRectMake(30, 280, 60, 60);

    [myView addSubview:moveLeft];

    NSLog(@"Finished setup");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T11:05:30.997

阅读这篇文章，它既有计时器解决方案，也有一个带有触摸解决方案的按钮

[在按住的情况下使 UIButton 连续触发的方法？](https://stackoverflow.com/questions/903114/way-to-make-a-uibutton-continuously-fire-during-a-press-and-hold-situation)

您可以根据自己的目的进行设置

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T10:54:08.790

当您在您`playerMoveLeft`的 . 其次，您将重复设置为`NO`，以重复使用`YES`

```
[NSTimer scheduledTimerWithTimeInterval:0.6
                                     target:self
                                   selector:@selector(playerMoveLeft)
                                   userInfo:nil
                                    repeats:YES]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T10:54:33.630

使用`NSTimer`特定的多次调用`TIME INTERVAL`

```
[NSTimer scheduledTimerWithTimeInterval:2.0 // You can set TimeInterval as u need.
    target:self
    selector:@selector(targetMethod)
    userInfo:nil
    repeats:YES]; 
```

**2.0时间间隔**调用targetMethod方法

 **```
-(void)targetMethod
{
   // write code for your method
} 
```

您也可以`NSTimer`使用它的方法停止`invalidate`

```
[MyTimer invalidate]; 
```

有关`NSTimer`阅读[如何使用 NSTimer？](https://stackoverflow.com/questions/1449035/how-do-i-use-nstimer)**

# javascript - 冻结 JSP 页面

> ID：15497364
> 
> 赞同：4
> 
> 时间：2013-03-19T10:49:57.800
> 
> 标签：javascript, html, jsp, jakarta-ee

我有一个jsp页面，提交后大约需要5分钟才能进入下一页进程，如果有几个项目要提交，则返回。

在此期间，状态栏会显示加载状态，直到它可以移动到提交的页面。

同时，用户可以自由点击他喜欢的任何按钮。

我想在此期间冻结 jsp 页面，以便用户在此时间间隔内无法单击任何按钮。

我怎样才能达到同样的效果。

```
A small snippet:
<html>
<script type="text/javascript">
function submit page()
{
document.forms["submitForm"].submit();
}
</script>
<body>
<form name="submitForm" action"newPage.jsp" method="post">
<input type="button" onclick="page()"/>
</form> 
```

显示所有jsp的iframe i如图所示：

```
<iframe id="Content" name="Content" style="width:100%; height:100%; border:0; background: #green;" scrolling="yes" src="Start.jsp"></iframe>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T11:01:28.817

你可以在 jQuery 中使用 .blockUI() 插件

这是一个很好的插件

```
function submit page()
{
            $.blockUI({

                    css: {
                        top: 0,
                        left: 0,
                        width: '100%'
                    }
                });
document.forms["submitForm"].submit();
}

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"></script>
<script src="http://malsup.github.com/jquery.blockUI.js"></script> 
```

详情见[这里](http://www.malsup.com/jquery/block/)

# java - Lotus 从数据库中获取字段

> ID：15497368
> 
> 赞同：0
> 
> 时间：2013-03-19T10:50:03.290
> 
> 标签：java, lotus-domino

我是莲花新手。我需要使用 Java 从 Lotus 数据库中获取一些信息。我有数据库：

```
Session session = NotesFactory.createSession(host, user, pwd);
Database database = session.getDatabase(server, database); 
```

我有这个信息：

```
 field - fldContractorCode;
 form - form="formAgreement"; 
```

例如字段是“abcde”；那么我如何从该数据库中获取信息呢？我需要使用座位配方吗？或者我需要使用什么方法？感谢您的帮助。

**UPD**

现在我正在使用这种方式：

```
DocumentCollection collection = DATABASE.search("form=\"formAgreement\"");
Document doc = collection.getFirstDocument();
while(doc != null) {
   doc.getItemValueString("fldContractorCode");
   doc = collection.getNextDocument();
} 
```

它对我来说很好，但我认为这种方式不是很舒服，因为要找到一些文档，例如 field="abcd" 我需要每次都遍历集合......所以我要求某种方式来按字段值查找文档。而且我不明白数据库中的 VIEW 是什么以及从哪里获得这个 VIEW 名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T13:29:40.533

在您现有的代码中，您只需更改一行：

```
DocumentCollection collection = DATABASE.search("form=\"formAgreement\ & "fldContractorCode=\"abcd\""); 
```

但是，如果数据库包含许多文档，这将很慢。为了获得最佳性能，您应该考虑使用 Domino Designer 向数据库添加新视图并使用`getDocumentByKey()`其他答案中建议的方法。如果这不是一个选项，Simon 建议使用该`FTSearch()`方法比该`Search()`方法更快，但前提是数据库存在全文索引。搜索字符串的语法也略有不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T11:23:12.097

有多种方法可以获取文档。

1\. 从视图中搜索文档，其中视图的第一列包含 fldContractorCode 的排序值。

例如：

```
String key = "abide";
View view = db.getView("viewName");
Document doc = view.getDocumentByKey(key, true); 
```

2.您可以使用数据库FTSearch方法进行全文搜索以查找文档。您将需要数据库来创建全文索引。

3\. 如果您知道文档的 UNID 或注释 ID，您可以使用 getDocumentByUNID() 或 getDocumentByID()。

您的问题非常广泛，因此我建议您阅读信息中心，因为它详细介绍了每种方法的示例代码。

[http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.designer.domino.main.doc/H_NOTESDATABASE_CLASS_JAVA.html](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.designer.domino.main.doc/H_NOTESDATABASE_CLASS_JAVA.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T11:36:03.737

您必须深入到要从中检索字段的文档（而不是表单）。

Lotus Notes 有一种非常容易理解的分层方式来到达您想要的位置。您将需要按以下顺序实例化对象：

```
Session
Database
View
Document 
```

假设您有一个名为 $(sysAgreements) 的视图，其中列出了所有表单“formAgreement”。它的选择公式是这样的：

```
SELECT Form="formAgreement" 
```

要获取您想要的文档或文档，您将执行以下操作：

```
Session session = NotesFactory.createSession(host, user, pwd);
Database database = session.getDatabase(server, database);
View view = database.getView("$(sysAgreements)");
Document doc = view.getDocumentByKey(VIEW_KEY);
String fieldContent = doc.getItemValueString("fldContractorCode"); 
```

有多种方法可以从 Notes 数据库中检索信息。这是其中之一。请记住，Notes 使用 getDocumentByKey 搜索视图时使用的键是第一个排序的列。

如果要获取多个文档，可以使用：

```
DocumentCollection docCol = view.getAllDocumentsByKey(VIEW_KEY); 
```

然后迭代它。

避免使用 ftsearch，因为它很慢而且对 Notes 来说有点痛苦。更喜欢在视图中查找。

另一个强大的帮助来源是 Notes 帮助。从安装了 Notes Development Client 的计算机上获取帮助数据库。但请注意您选择的帮助名称，Notes 中有 3 个帮助：客户端、开发和管理。发展是你想要的。

# javascript - 获取适用于 Deck.js 的按钮（上一个、下一个、暂停）

> ID：15497371
> 
> 赞同：1
> 
> 时间：2013-03-19T10:50:08.890
> 
> 标签：javascript, button, timer, slideshow, deck.js

我正在尝试使用[Deck.js](http://imakewebthings.com/deck.js)，但有一个大问题让我觉得非常非常愚蠢。

我想要导航按钮。我想要一个允许用户向前移动的按钮和一个向后移动的按钮。

此外，如果要求不高，可以使用暂停按钮使幻灯片在计时器上移动（幻灯片每 10 秒移动一次）。

我浏览了[文档](http://imakewebthings.com/deck.js/docs/)，这些文档清楚地显示了使按钮起作用的功能，但是我无法显示按钮，我已经尝试了所有方法，但根本无法获得任何按钮。

请帮助我，如何使用deck.js启用按钮（我已经阅读了很多次文档，此时我认为我太愚蠢了，无法理解它，因为我根本无法使用任何按钮。 )

请帮忙！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:58:58.360

包括deck.navigation JavaScript，通常紧跟在核心JS之后：

```
<script src="path/to/deck.navigation.js"></script> 
```

在核心 CSS 之后再次包含deck.navigation CSS：

```
<link rel="stylesheet" href="path/to/deck.navigation.css"> 
```

`body`并在末尾包含左右按钮本身的这个片段：

```
<a href="#" class="deck-prev-link" title="Previous">&#8592;</a>
<a href="#" class="deck-next-link" title="Next">&#8594;</a> 
```

包含在 deck.js 中的其他扩展遵循相同的模式，包括 JS 文件、CSS 文件和一些 HTML 片段。并非所有扩展都具有所有这些组件。

# java - 使用 HTTPS 混淆的 Java HTTP 发布 - javax.net.ssl.SSLException：证书中的主机名不匹配

> ID：15497372
> 
> 赞同：4
> 
> 时间：2013-03-19T10:50:13.883
> 
> 标签：java, web-services, security, ssl, ssl-certificate

我正在使用 Apache HttpClient 在某个 url 上发送 https POST。

```
HttpClient httpClient = new DefaultHttpClient();
HttpPost httpPost = new HttpPost(url);
HttpResponse response = httpClient.execute(httpPost); 
```

我得到：

```
javax.net.ssl.SSLException: hostname in certificate didn't match: <*.*.*.*> != <*.url 
```

现在经过搜索，我在stackoverflow上找到了解决方案：

```
HostnameVerifier hostnameVerifier = org.apache.http.conn.ssl.SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER;
SchemeRegistry registry = new SchemeRegistry();
SSLSocketFactory socketFactory = SSLSocketFactory.getSocketFactory();
socketFactory.setHostnameVerifier((X509HostnameVerifier) hostnameVerifier);
registry.register(new Scheme("https", socketFactory, 443));
SingleClientConnManager mgr = new SingleClientConnManager(client.getParams(), registry);
HttpClient httpClient = new DefaultHttpClient(mgr, client.getParams());
HttpsURLConnection.setDefaultHostnameVerifier(hostnameVerifier); 
```

POST 已成功完成。

但我不明白这里发生了什么！**我的连接仍然安全吗？这是正确的解决方案吗？如果没有，最好的解决方案是什么？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T11:55:43.970

如果您没有验证主机名，那么您根本就没有检查您是否正在与您打算与之交谈的实体交谈：它可能是一个 MITM。[例如，这与使用 Curl 禁用 VERIFYHOST](https://stackoverflow.com/a/13742121/372643)的问题相同。您可能也[对 Security.SE 上的这个问题](https://security.stackexchange.com/q/22965/2435)感兴趣。

关于您最初的问题，证书中的主机名（或 IP 地址）需要与您打算联系的主机名匹配，即 URL 中的主机名。如果您使用的是 IP 地址，则该 IP 地址需要位于证书的主题备用名称中。（请参阅[此问题](https://stackoverflow.com/q/11708717/372643)。）通常，使用名称而不是 IP 地址更容易，即使在 LAN 上也是如此。

**编辑：**考虑到您使用的是 Apache Http Client 4.0.2，4.0.3 的[发行说明](http://archive.apache.org/dist/httpcomponents/httpclient/RELEASE_NOTES-4.0.x.txt)说：

> 这是一个紧急版本，修复了 SSL 连接管理代码中的关键回归。HttpClient 4.0.2 版本包括对多宿主主机的改进支持，不幸的是，它有一个错误导致默认 SSL 主机名验证逻辑失败。尝试与 HttpClient 4.0.2 建立 SSL 连接可能会导致 javax.net.ssl.SSLException: "hostname in certificate didn't match ..." 错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T10:54:02.180

重要 - 如果您允许所有主机（即禁用主机名验证），那么它肯定不安全。你不应该在生产中这样做。

我认为您可能正在使用自签名证书，这可能是此异常的根本原因。如果是，请创建一个主机为 localhost（或您的 IP）的证书，然后尝试。在生产中，只需启用主机名验证，您的代码就会运行良好。

# php - 如何比较 2 个数组并推送新值

> ID：15497375
> 
> 赞同：2
> 
> 时间：2013-03-19T10:50:20.030
> 
> 标签：php, arrays

如何比较 2 个数组并推送新值。

可能是标题写错了，但我不知道该写什么，我希望它是好的。

这是我的第一个数组。它包含欧洲邮政编码以及邮政编码中有多少成员

Array1 称为 $Memcooltransactions

```
 Array ( 
[0] => Array ( [zipcode] => 1067 [city] => Copenhagen K [numberofuniqmembers] => 11 ) 
[1] => Array ( [zipcode] => 0100 [city] => Tórshavn [numberofuniqmembers] => 1 )
) 
```

这是我的第二个数组。它还包含欧洲邮政编码以及邮政编码中有多少家餐馆

Array2 称为 $Rescooltransactions

```
Array ( 
[0] => Array ( [zipcode] => 1067 [city] => Copenhagen K [numberofuniqplaces] => 1) 
[1] => Array ( [zipcode] => 1074 [city] => København V [numberofuniqplaces] => 1 )
) 
```

这是我将这些数组比较在一起的代码。

```
foreach ($Memcooltransactions as $key) 
{
    $uniqmember = $key['numberofuniqmembers'];

  foreach ($Rescooltransactions as $key2) 
  {
    $uniqres = $key2['numberofuniqspisesteder'];

    if($key['zipcode'] === $key2['zipcode'])
    {

        $samlet = $uniqmember/$uniqres;
        $sizeofuniqmem += $uniqmember;
        $sizeofuniqres += $uniqres;

        $array1[] = array(
        'zipcode' => $key['zipcode'],
        'city' => $key['city'],
        'numberofuniqmembers' => $uniqmember,
        'numberofuniqspisesteder' => $uniqres, 
        );  

    }
  }
} 
```

我的输出。

```
Array (     [0] => Array ( [zipcode] => 1067 [city] => Copenhagen K [numberofuniqmembers] => 11 [numberofuniqplaces] => 1 ) 
```

当我试图将无法比较的值抓取到新数组中时，它会使网站崩溃。这就是我从上面的 foreach 中删除它的原因。但是如何在不使网站崩溃的情况下获得所需的输出？

期望的输出

```
 Array ( 
[0] => Array ( [zipcode] => 1067 [city] => Copenhagen K [numberofuniqmembers] => 11 [numberofuniqplaces] => 1 ) 
[1] => Array ( [zipcode] => 0100 [city] => Tórshavn [numberofuniqmembers] => 1 [numberofuniqplaces] => 0 )
[2] => Array ( [zipcode] => 1074 [city] => København V [numberofuniqmembers] => 0 [numberofuniqplaces] => 1 )
) 
```

希望你能帮忙:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:05:06.610

您必须执行两个循环，第一个循环使用第一个数组中的数据初始化结果数组，第二个循环添加第二个数组中但不在第一个数组中的数据。

就像是：

```
$result = array();
// first loop, initialize $result
foreach ($Mem as $key) {
    $result[] = array(
        'zipcode' => $key['zipcode'],
        'city' => $key['city'],
        'numberofuniqmembers' => $key['numberofuniqmembers'],
        'numberofuniqplaces' => 0, 
    );  
}
$create = 1;
// second loop, complete $result
foreach ($Res as $key) {
    $uniqres = $key['numberofuniqplaces'];
    $i = 0;
    foreach ($result as $key2) {
        $uniqmember = $key2['numberofuniqmembers'];
        if($key['zipcode'] === $key2['zipcode']) {
            $result[$i] = array(
                'zipcode' => $key['zipcode'],
                'city' => $key['city'],
                'numberofuniqmembers' => $uniqmember,
                'numberofuniqplaces' => $uniqres, 
            );
            $create = 1;
            break; // <--- modified
        } elseif ($create) {
            $create = 0;
            $result[] = array(
                'zipcode' => $key['zipcode'],
                'city' => $key['city'],
                'numberofuniqmembers' => 0,
                'numberofuniqplaces' => $uniqres, 
            );  
        }
    }
    $i++;
}
print_r($result); 
```

**输出：**

```
Array
(
    [0] => Array
        (
            [zipcode] => 1067
            [city] => Copenhagen K
            [numberofuniqmembers] => 11
            [numberofuniqplaces] => 1
        )

    [1] => Array
        (
            [zipcode] => 0100
            [city] => Tórshavn
            [numberofuniqmembers] => 1
            [numberofuniqplaces] => 0
        )

    [2] => Array
        (
            [zipcode] => 1074
            [city] => København V
            [numberofuniqmembers] => 0
            [numberofuniqplaces] => 1
        )

) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:53:09.250

试试这个。它将两个数组合并到`$newArray`并且不包含重复项。

```
$newArray = Array();
foreach($arr1 as $k=>$val)
{
    if(array_key_exists($k, $arr2))
    {
        $newArray[$k] = array_merge($val, $arr2[$k]);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T14:15:23.783

晚了几分钟，但无论如何我都会发布这个，因为它是可扩展的。我做了一些假设：

*   城市是独一无二的
*   城市可以有多个邮政编码
*   两个数组中的键`integer`相加
*   否则价值`$arr2`优先

-

```
function mergeLocations($arr1, $arr2){
  $tmp = array(); $keys = array(); $ret = array();
  foreach($arr1 as $loc) 
    foreach($loc as $key => $val)
      if(isset($loc['city'])){
        if(!isset($tmp[$loc['city']]))
          $tmp[$loc['city']] = array();
        $tmp[$loc['city']][$key] = $val;
        $keys[] = $key;
      }
  foreach($arr2 as $loc) 
    foreach($loc as $key => $val)
        if(isset($loc['city'])){
          if(!isset($tmp[$loc['city']]))
            $tmp[$loc['city']] = array();
          $keys[] = $key; 
        }
  $keys = array_unique($keys);
  foreach($arr2 as $loc)
    foreach($loc as $key => $val)
      if(isset($loc['city']))
        if(!isset($tmp[$loc['city']][$key]) || !is_int($tmp[$loc['city']][$key]))
          $tmp[$loc['city']][$key] = $val;
        else 
          $tmp[$loc['city']][$key] += $val;
  foreach($tmp as $key => $loc){
    foreach($keys as $k)
      if(!isset($loc[$k]))
        $loc[$k] = 0;
    $ret[] = $loc;
  }
  return $ret; 
} 
```

[工作示例](http://codepad.org/tp7MCH5p)

# wcf - 根据其数据类型“clientcontracttype”，该值无效

> ID：15497378
> 
> 赞同：28
> 
> 时间：2013-03-19T10:50:23.663
> 
> 标签：wcf, endpoint, contract

我收到一条错误消息：

> 合同属性无效。根据其数据类型“clientcontracttype”，该值无效

以下是此 WCF 应用程序的 web.config 中的端点配置。我正在使用 .NET Framework 4.5 和 Visual Studio 2012。我已经验证合同`OnlineReporting.Core.Contracts.IReportingInternalWcfPortal`已经存在。

```
<endpoint address="http://localhost:63817/ReportingInternalWcfPortal.svc" 
          binding="basicHttpBinding" 
          bindingConfiguration="BasicHttpBinding" 
          contract="OnlineReporting.Core.Contracts.IReportingInternalWcfPortal" 
          name="ReportingInternalPortal" /> 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-01-07T21:17:23.120

我看到这个问题已经很老了，我不知道您现在是否找到了解决方案，但以防万一，这就是我发现的解决方案：

1) 在解决方案资源管理器中，在服务引用文件夹下，右键单击有问题的服务引用名称，然后选择“配置服务引用”。

2) 将出现服务参考设置窗口。取消选中标有“在引用的程序集中重用类型”的框，然后单击“确定”按钮。

3) 重建项目。

重建后，警告应该消失。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-09-30T19:50:06.950

我发现这个问题在 Web 服务项目上寻找相同的错误。

就我而言，当我忘记在界面上添加`[ServiceContract]`属性时发生此错误。`IServiceBase`

一旦我在错误中添加它就消失了。

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.ServiceModel.Web;
using System.Text;

namespace MyService
{
    [ServiceContract]
    public interface IServiceBase
    {
        [OperationContract]
        IEnumerable<ListItem> GetListItems();

        [OperationContract]
        void SaveListItems(IEnumerable<ListItem> listItems);
    } 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-08-29T09:09:24.267

当您缺少 [in the project with the .config] 对包含接口/服务合同的实际项目/库的引用时，也会发生同样的错误......

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-02-02T02:09:24.140

就我而言，我通过无意中删除了对服务合同至关重要的接口来更改服务合同。

几周后，我发现了一个损坏的客户，其服务参考已过时。由于删除接口是错误的，我将其放回原处。

另一种可能的解决方案是重建服务引用以匹配新的服务合同（在我的情况下，由于引用的接口已被删除，因此会破坏项目构建）。

感谢 OrangeKing89 为我指明了正确的方向。我知道服务合同有可能被改变。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-13T05:53:22.277

就我而言，我遇到了命名冲突。

当您添加服务引用时，Visual Studio 会生成一个客户端类作为实现合同的代理，该代理的默认名称是附加“Client”的服务名称，因此如果您的服务是“MyService”，则客户端类将是“我的服务客户端”。

我的问题是我的项目名称是“MyServiceClient”！这导致了这个冲突。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-08-18T19:05:45.500

我意识到这是一个旧线程，但在我的情况下，问题是有人曾经向项目添加了服务引用，然后决定采取另一条路线，但该条目仍保留在 web.config 中，所以只需删除 web.config 中的那个条目为我解决了这个问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-07-26T19:41:40.953

我知道这个问题很古老，但是我在 C# 和 Visual Studio 2017 中遇到了同样的问题。一切正常，编译正常，但事实并非如此。我从 .Net 4.6.2 降级到 4.6，因为 SQLite v108 不支持 108，然后我收到了这个错误和其他错误。我花了一些时间来寻找解决方案。我没有在任何地方看到我的解决方案，所以我想我把它放在那里以备不时之需。

我删除了我的服务引用，签入了我对 TFS 的所有更改，然后重新添加了服务引用。然后我构建了解决方案，一切都很好。

我检查了 app.config 和其他文件，一切似乎都很好，只是没有构建。显然，VS2017 在某处引入了 .Net 版本信息，但并不明显。

希望我的解决方案可以帮助某人。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-03-27T17:22:00.873

如果这两个服务都包含在同一个解决方案中，您只需执行两个操作，前提是这两个服务都在工作。

*   添加对包含您需要的网络服务器的项目的引用。从“项目”选项卡中执行此操作。
*   像这样配置您的主要服务 web.config：

    ```
    <services>
      <service name="MyCurrentProject.Service" behaviorConfiguration="ConfigRest">
        <endpoint address="" behaviorConfiguration="web" binding="webHttpBinding" bindingConfiguration="restServicehttp" name="RestEndpoint" bindingName="webHttpBinding" contract="MyCurrentProject.Service"/>
      </service>
      <service name="AnotherPoject.Service" behaviorConfiguration="ConfigRest">
        <endpoint address="" behaviorConfiguration="web" binding="webHttpBinding" bindingConfiguration="restServicehttp" name="RestEndpoint" bindingName="webHttpBinding" contract="AnotherPoject.Service"/>
      </service> 
    ```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-04-05T20:57:34.797

在我的情况下，代码是正确的，接口具有正确的 [ServiceContract] 标签，并且 .config 端点具有正确的接口命名空间，但是需要重新编译具有接口的项目，以便具有.config 文件将在其 bin 文件夹中获取第一个项目的最新 .dll。所以重新编译代码是让visual studio满意的答案。

# jquery - jQuery Ui sortable 无法在克隆的 ul 中拖动 li 元素

> ID：15497383
> 
> 赞同：1
> 
> 时间：2013-03-19T10:50:37.430
> 
> 标签：jquery, clone, jquery-ui-sortable

我对 jQuery 可排序列表有疑问。我有两个 ul 列表。这两个列表是可排序的（完整的 ul 集）， li 孩子也是可排序的。因此，您可以对完整列表位置进行排序，并且可以对 li 位置进行排序并将 li 元素从一个列表拖动到另一个列表。

使用每个列表旁边的按钮，我可以克隆一个完整的 ul 列表。因此我使用 clone(true,true) 函数。我使用真正的参数，因为我在按钮上获得了事件，并且我希望将它们应用于克隆。我还希望将可排序功能应用于克隆。

问题：

+++++++++++++++++++++++++++++++++++++++++

**当我只`clone()`用来克隆元素时：**

您不能将 li 元素从 ul>-clone 拖动到另一个列表，并且不能使用 clone-button 克隆一个克隆的元素两次（按钮操作丢失）。

**当我使用`clone(true)`或`clone(true,true)`克隆元素时：**

您可以将 li-elements 从 ul-clone 拖动到另一个列表，但您不能将 li-element 从其他列表拖动到 ul-clone。

你可以在这里试试：

[http://jsfiddle.net/uKEJL/133/](http://jsfiddle.net/uKEJL/133/)

任何想法？

-谢谢托比-

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:46:22.283

您的问题与绑定有关。事件回调绑定到当前小部件对象。相比

[https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.mouse.js#L31-L41](https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.mouse.js#L31-L41)

如果克隆列表，jQuery 会正确触发事件，但回调绑定到原始列表。

您必须在每个克隆上初始化 sortable。

# delphi - 为什么 OraNet.dcu 没有对应的 .pas 文件？

> ID：15497385
> 
> 赞同：1
> 
> 时间：2013-03-19T10:50:47.570
> 
> 标签：delphi, delphi-5, devart, odac

我有一个相关的帖子 - [DBAccess.pas 中的断言失败，](https://stackoverflow.com/questions/15496878/assertion-failure-in-dbaccess-pas)但认为这值得单独询问。

我们获得了 DevArt ODAC 的完整源代码版本的许可，但在执行升级时遇到了巨大的困难。在对此进行调查的过程中，我注意到没有 OraNet.dcu 的 .pas 文件。

这使得我们很难确定造成我们困难的原因是什么，因为我们无法完全调试代码。

另外 - 这个单位是什么？根据它的名称和代码中的指令，可以合理地假设它是 .NET 所需的单元——这不是我们感兴趣的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T15:38:43.707

在 OraNet.dcu 模块中实现了 Direct DB 连接模式，我们不分发该模块的源代码，这个限制在我们的[网站上](http://www.devart.com/odac/ordering.html)有说明（页面底部的参考）。如果你不使用 Direct 模式，而是通过 Oracle 客户端（OCI 模式）工作，你可以在你的项目设置中指定 DEFINE NONET，这种情况下 Direct 模式将不可用，并且该模块将不可用用过的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T09:32:40.223

客户端使用（甚至是 Oracle Instant Client）确实允许使用比我们的 Direct 模式更多的功能，但 Direct 模式在某些情况下的性能甚至超过了 OCI。此外，Direct 模式由于无需提供和部署额外的库，无需设置额外的注册表参数和环境变量，显着简化了应用程序部署并减小了应用程序在磁盘上的大小。Direct 模式还允许将应用程序部署到没有本地 Oracle 客户端的系统，例如 iOS。选择使用 DB 的方式（直接或 OCI）取决于开发人员和每个特定应用程序解决的任务。如上所述，如果不使用 Direct 模式，可以通过设置 DEFINE NONET 来禁用附加模块插入

# javascript - 隐藏兄弟姐妹

> ID：15497386
> 
> 赞同：0
> 
> 时间：2013-03-19T10:50:51.403
> 
> 标签：javascript, jquery, siblings

```
$('#navigation li.parent').mouseover(function () {
    $('#news-ticker').hide();
    $('ul.child', this).slideDown();
});
$('#navigation .child').mouseleave(function () {
    setTimeout(function(){
        $(this).hide();
        $('#news-ticker').slideDown();
    },2000);
}); 
```

...几乎可以工作，只有一个问题，我如何隐藏 subnav 兄弟姐妹？如果我这样做`$('ul.child', this).slideDown().siblings().hide();`，它会隐藏整个父母。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:55:55.203

只需在显示要打开的元素之前隐藏所有元素。

```
$('ul.child', this).hide();
$('ul.child', this).slideDown(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:57:47.577

尝试：

```
$('#navigation li.parent').mouseover(function () {
  $('#news-ticker').hide();
  $(this).parent().find("ul.child").not($('ul.child', this)).hide();
  $('ul.child', this).slideDown();
});
$('#navigation .child').mouseleave(function (e) {
  setTimeout(function(){
      $(this).hide();
      $('#news-ticker').slideDown();
  },2000);
  e.stopPropagation();
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-19T10:58:26.697

在 slideDown 方法中，我认为您可以给它两个参数，如下所示：

```
slideDown(500,function(){$(this).fadeOut(500,function(){$(this).hide();});}); 
```

第一个是间隔，第二个是回调函数。完成后调用的函数。但是使用您的代码，我建议使用以下`hover`方法：

```
$('#navigation li.parent').hover(function(){
    //on mouse enter
    $('#news-ticker').hide();
    $('.child', this).slideDown(500);
},function(){
    //on mouse leave
    $('#new-ticker').slideDown(500,function(){$('.child',this).hide();});
}); 
```

很难说出没有 html 的情况下我会做什么。对不起。

# javascript - 如果与多个元素绑定，则 KnockoutJS

> ID：15497394
> 
> 赞同：0
> 
> 时间：2013-03-19T10:51:02.730
> 
> 标签：javascript, mvvm, knockout.js

我认为这将是一件简单的事情，但我基本上有一个可观察的对象数组，其中包含如下数据：

```
{
   BasicType: "some-type",
   ExtendedType: "some-extended-type",
   DisplayType: "some-display-type"
} 
```

数据字段始终在模型中，如果没有数据可以显示，它们将是空字符串。

现在这个模型在整个系统中使用，是一个简单的 POJO，视图模型只包含其中的许多，当视图中需要它们时。因此，我不想将任何特定于视图的问题放在“this”对象上，但是可以将它们放在由许多这些较小模型组成的视图模型中。

无论如何，在视图中添加了所有字段，但如果有更适用的类型可用，则每个字段都有一个 if 来禁用它。所以一个例子是这样的：

```
<div data-bind="text: BasicType, if: (BasicType && !ExtendedType && !DisplayType)"/>
<div data-bind="text: ExtendedType, if: (!BasicType && ExtendedType && !DisplayType)"/>
<div data-bind="text: DisplayType, if: (!BasicType && !ExtendedType && DisplayType)"/> 
```

但是由于某种原因，它并没有像我预期的那样做，我尝试更改`!xType`for`xType == ''`但是也没有这样的运气，并且还使用括号强制评估但没有。那么我是否遗漏了一些东西，或者如果不处理多个元素，knockoutjs 可以吗？

如果有一种简单的方法，我很乐意将这些转换为计算的 observables，但是由于这些模型用于跨页面并作为与 web 服务的合同（它们就像数据层）我不想更改它们，并且我不知道如何将计算值添加到对象中，除非当我得到它们时，我循环每个对象，然后将计算的 observables 添加到每个对象中，然后使用它。

无论如何，情况就是这样，任何建议都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:26:00.880

如果模型属性不是可观察的，您的代码将起作用。如果模型属性是可观察的，则需要在比较之前执行可观察以访问这些值。

```
<div data-bind="foreach: types">
    <div data-bind="text: BasicType, if: (BasicType() && !ExtendedType() && !DisplayType())"></div>
    <div data-bind="text: ExtendedType, if: (!BasicType() && ExtendedType() && !DisplayType())"></div>
    <div data-bind="text: DisplayType, if: (!BasicType() && !ExtendedType() && DisplayType())"></div>
</div> 
```

这是一个例子：http: [//jsfiddle.net/5WMVb/1/](http://jsfiddle.net/5WMVb/1/)

# java - 需要通过网页类工具在 Junit/TestNG 中运行完整的测试套件

> ID：15497399
> 
> 赞同：0
> 
> 时间：2013-03-19T10:51:21.763
> 
> 标签：java, automated-tests, selenium-webdriver, web-testing

我几乎没有使用 selenium 用 testNG 和 Junit 编写的测试用例来测试网页。但是为了执行它们，我每次想运行时都需要转到命令行或使用 eclipse 运行它们。我想要一个集中的网页，我可以从中选择我想运行的测试，然后单击某个按钮说运行。并且可以在同一页面上看到输出结果。我怎么能做到这一点？

谢谢- Girish。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T18:39:00.220

当我们希望业务用户触发测试时，我们在项目中使用 Jenkins 来进行这种简化。但是，最初可能需要为您要运行的每组测试进行一些设置。

# android - 在 android 设备上显示 logcat

> ID：15497400
> 
> 赞同：2
> 
> 时间：2013-03-19T10:51:26.927
> 
> 标签：android, logcat

有没有办法在我们的 Android 设备中显示 logcat（例如在 eclipse 中）覆盖？如果可能的话，谁能给我一个关于如何做到这一点的提示？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:41:13.843

试试谷歌市场的应用程序 alogrec 你可以记录你的所有日志并保存在 sdcard 上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:54:26.467

试试这个应用程序[aLogCat](https://play.google.com/store/apps/details?id=org.jtb.alogcat&feature=search_result#?t=W251bGwsMSwxLDEsIm9yZy5qdGIuYWxvZ2NhdCJd)最好的一个！

# java - 多核处理器上当前运行的线程是什么？

> ID：15497405
> 
> 赞同：0
> 
> 时间：2013-03-19T10:51:49.980
> 
> 标签：java, multithreading

我读到这`sleep()`会使当前运行的线程进入睡眠状态。这对多核处理器也有效吗？我不确定，但它认为多核处理器会有多个“当前正在运行的线程”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T10:56:22.673

> 我读到 Sleep() 使当前正在运行的线程进入睡眠状态。这对多核处理器也有效吗？

是的。`sleep(...)`将把它的执行线程作为参数传递的睡眠时间。

> 但它认为多核处理器将有多个“当前运行的线程”。

真的。多核处理器将在同一时刻运行多个线程。

> 多核处理器上当前运行的线程是什么？

看到这个：[多核/多处理器系统上的 Thread.currentThread() 的语义？](https://stackoverflow.com/questions/12216853/semantics-of-thread-currentthread-on-multicore-multi-processor-systems)

`Thread.CurrentThread()`将在某个线程上执行。无论它在哪个处理器上运行，都将返回相同的线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:53:18.127

sleep 只会使调用它的线程进入睡眠状态。

是的，在多核处理器上也是如此，因为多线程不一定需要多核电脑。单核处理器也可以处理多个进程，不是吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T10:58:01.430

操作系统为内核或更多内核提供“方向”。因此，例如 Windows 可以为多个内核提供方向。Windows 可以运行多个进程。时间片给每个进程一定的时间来执行其任务。也就是说，一个进程被给予一定的时间来在核心上执行它的计算。由于 Windows（在此示例中）是抢占式的（Linux 也是如此），它将决定将哪个进程放在核心上以及放置多长时间。现在一个进程可以有多个线程。每个线程就像 CPU 上的一个“进程”。同样，抢先操作系统决定何时运行哪个线程。在四 (4) 核上，您只能同时运行 4 个进程/线程。在单个内核上，您也可以运行 4 个进程，但一次只能运行一个。

**示例**：

当您在四核上有 4 个进程，每 2 个线程时。Windows 可以决定在每个内核上放置一个进程。Windows 将决定每个内核将在分配给该内核的进程的 2 个线程之间切换。现在，当您将这两个线程之一置于睡眠状态时，Windows 不必在您将线程置于睡眠状态期间在线程之间切换，并且可以将所有时间都花在执行一个线程上。同时，线程的切换继续为加载在其他内核上的其他 3 个进程。

当然，它比我上面总结的要复杂得多。

# android - 如何在android录音机中录制进度的同时播放录音文件

> ID：15497406
> 
> 赞同：0
> 
> 时间：2013-03-19T10:51:51.290
> 
> 标签：android

我想在录制进度的同时播放录音机文件。

**或** 录音时播放声音的任何其他方式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-10T16:23:01.940

您收到回声是因为您在录制时正在通过主扬声器播放音频。尝试通过耳机收听音频，同时通过内置麦克风进行录音。还要让我知道您为完成主要任务所做的更改。

# android - SetBackgroundDrawable 在内存中加载图像吗？

> ID：15497409
> 
> 赞同：0
> 
> 时间：2013-03-19T10:52:03.360
> 
> 标签：android, background-drawable

我正在制作一个Android应用程序，我在报告“内存不足异常”时遇到了一些问题，在网上多次搜索后，我发现 android:background 正在将背景图像加载到内存中。

所以我将删除我的 XML 文件中的所有“android:background”声明，并将其替换为：

```
 background = new BitmapDrawable(getResources(),ImageFactoring.decodeSampledBitmapFromResource(getResources(), R.drawable.catalogue_button_poeles_bois, mMaxButton_Cheminees.getLayoutParams().width, mMaxButton_Cheminees.getLayoutParams().height));
    mMaxButton_Cheminees.setBackgroundDrawable(background); 
```

在此之前，我想知道“setBackgroundDrawable”是否正在将图片加载到内存中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:54:00.810

当然，确实如此。您在显示器上看到的所有内容都存储在内存中。设置背景后，它会立即加载。从 xml 膨胀或显式设置时。不要使用大于所需的图像作为资源。并尽可能避免使用大型总部图像。

# c# - 使用 Aspose.Pdf 库制作 1 层 pdf

> ID：15497410
> 
> 赞同：2
> 
> 时间：2013-03-19T10:52:04.347
> 
> 标签：c#, pdf-generation, aspose

我将 Aspose.Pdf 用于 .NET。

我想做的是：

使用 1 层制作 pdf（最好的解决方案是，如果在生成 pdf 之前所有使用的文本和免费图像将作为图片然后生成 pdf）我需要它来禁止更改我的 pdf 简单安全 pdf 文件中的内容是不够的，因为即使在线 pdf 到 doc 转换器可以更改内容。

那么现在有没有办法做到这一点？或者有什么方法可以在将内容放到pdf站点之前从内容中制作图像？

我能够生成 pdf，但具有多个图层（在我的场景中为 2 个）。

我已经为 .net 4.0 客户端使用了 dll 版本 5.0.0。

提前致谢：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T06:33:32.323

使用 Aspose.Pdf，您可以对 PDF 文档设置多个权限来控制它们的使用。使用 Aspose.Pdf 指定以下安全选项，您生成的 Pdf 文档将表现为无法编辑的只读文档：

```
//Instantiate Pdf instance by calling its empty constructor
Aspose.Pdf.Generator.Pdf pdf1 = new Aspose.Pdf.Generator.Pdf();

//Assign a security instance to Pdf object            
pdf1.Security = new Aspose.Pdf.Generator.Security();

//Restrict annotation modification
pdf1.Security.IsAnnotationsModifyingAllowed = false;

//Restrict contents modification
pdf1.Security.IsContentsModifyingAllowed = false;

//Restrict copying the data
pdf1.Security.IsCopyingAllowed = false;

//Allow to print the document
pdf1.Security.IsPrintingAllowed = true;

//Restrict form filling
pdf1.Security.IsFormFillingAllowed = false;

//Add a section in the Pdf
Aspose.Pdf.Generator.Section sec1 = pdf1.Sections.Add();

//Create a text paragraph and set top margin
Aspose.Pdf.Generator.Text text1 = new Aspose.Pdf.Generator.Text(sec1,"this is text content");
text1.Margin.Top = 30;

//Add image
Aspose.Pdf.Generator.Image img = new Aspose.Pdf.Generator.Image();
img.ImageInfo.File = "asposelogo.png";
img.ImageInfo.ImageFileType = Aspose.Pdf.Generator.ImageFileType.Png;

//Add the text paragraph and image to the section
sec1.Paragraphs.Add(text1);
sec1.Paragraphs.Add(img);

//Save the Pdf                            
pdf1.Save("test.pdf"); 
```

至于将 PDF 的全部内容创建为嵌入图像，Aspose.Pdf 不直接支持它。但是，您可以使用某种方式或其他一些组件来生成包含您的内容的图像，然后可以使用该图像使用 Aspose.Pdf 创建 Pdf 文件，如下所示：

*   使用您的内容生成 PDF（您之前创建的多层 PDF）
*   [如 Aspose.Pdf 文档的“使用图像](http://www.aspose.com/docs/display/pdfnet/Working+with+Images)”部分所述，将 PDF 导出为图像。
*   使用导出的图像创建 PDF，如“[使用图像（生成器）](http://www.aspose.com/docs/display/pdfnet/Working+with+Images+%28Generator%29) ”中所述并分发您的文档。

我叫 Iqbal，是 Aspose 的开发人员布道师。

# jquery - 过滤器：灰度（0）动画与jQuery

> ID：15497415
> 
> 赞同：2
> 
> 时间：2013-03-19T10:52:17.467
> 
> 标签：jquery, css, jquery-waypoints

我正在使用 jQuery 插件[Waypoints](http://imakewebthings.com/jquery-waypoints/)在用户滚动一组图像时为其设置动画。我想要达到的效果是，当用户滚动上述图像时，以下 css 会附加到对象 -`opacity:1`和`filter:grayscale(0)`,`-webkit-filter:grayscale(0)`和`-moz-filter:grayscale(0)`

单独使用`opacity:1`时效果很好，并且成功实现了不透明效果。但是，我似乎无法获得`filter:grayscale(0)`和工作。这就是我正在使用的。我确定这是一个微不足道的解决方案，但我似乎无法找到我正在寻找的东西。`-webkit-filter:grayscale(0)``-moz-filter:grayscale(0)`

```
/* Waypoints
-------------------------------------------------- */
/* set-defaults
------------------------- */
    $.fn.waypoint.defaults = {
    context: window,
    continuous: true,
    enabled: true,
    horizontal: false,
    offset: 0,
    triggerOnce: true
    }

/* #about-section-two
------------------------- */
    $('#about-section-two').waypoint(function() {
    $('.avatar' ).delay(0).animate({opacity: 1, filter: "grayscale(0)", -webkit-filter: "grayscale(0)", -moz-filter: "grayscale(0)"});
}, { offset: '50%' }); 
```

任何帮助，将不胜感激。

伊恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:10:26.120

看起来这只是 jQuery`.animate`不支持所有 CSS 属性的情况。任何可能感兴趣的人都可以参考[支持的属性列表](http://www.w3schools.com/jquery/eff_animate.asp)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-23T20:19:09.413

jQuery 中还没有用于过滤灰度的动画。您可以等到它出现或使用此脚本（只有 javascript，没有 JQuery）：

```
function grayscale(div,millisec,bool){
    if (bool){ /* We want to become grayscale */
        var i = 0;
        timertogray = setInterval(function addgray(){   
            if (i < 101){
                document.getElementById(div).style.filter = "grayscale(" + i + "%)"; 
                i = i + 10;
            }else{
                 clearinterval(timertogray); /* once the grayscale is 100%, we stop timer */
            }
        }, millisec);
    }else{ /* We want to give color back */
        var i = 100;
        timerfromgray = setInterval(function addgray(){ 
            if (i > 0){
                document.getElementById(div).style.filter = "grayscale(" + i + "%)"; 
                i = i - 10;
            }else{
                clearinterval(timerfromgray); /* once the grayscale is 0%, we stop timer */
            }
        }, millisec);
    }
} 
```

并调用它：

```
灰度（'内容'，100，真）；/* 激活灰度 */

灰度（'内容'，100，假）；/* 还给颜色 */

```

# coldfusion - 使用 Coldfusion 会话 ID 进行 SSO 身份验证

> ID：15497422
> 
> 赞同：2
> 
> 时间：2013-03-19T10:52:28.397
> 
> 标签：coldfusion, single-sign-on, coldfusion-9, sessionid

我正在集成第 3 方应用程序。它将通过 iframe 嵌入到我的网站中。实例化 iframe 时，用户名和唯一 id(sessionid) 会以这种格式发送到第三方应用程序：

> `http://www.thirdpartyapp.com?username=9999999&uuid=appname_11111_d3d379ab97c23930-154C9639-1CC4-6169-286F5EB34A37B3C3`

一旦站点上的用户尝试使用 iframe 中的任何功能，第 3 方应用程序就会将其发送回`sessionid`服务器，以验证会话是否已登录。

如果用户已登录，则应用程序将会话变量设置为`Session.Auth.Authenticated`true。

我可以通过使用来实现这`CFID`一点`CFTOKEN`：

> `http://www.mysite.com/checkauth/index.cfm?CFID=2223344&CFTOKEN=40487e5933d11e75-F94396AF-1CC4-6169-28200888416FFC`

第三方应用程序以以下格式发送请求：

> `http://www.mysite.com/checkauth/index.cfm?uuid=appname_11111_d3d379ab97c23930-154C9639-1CC4-6169-286F5EB34A37B3C3`

基本上与我的网站发出请求的格式相同。有什么方法可以使用 来检查经过身份验证的会话`session.sessionid`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T21:11:49.720

> “有没有办法使用 Session.sessionid 检查经过身份验证的会话？”

似乎有可能。ColdFusion`sessionid`由三部分组成：

```
 appName_CFIDE_CFTOKEN 
```

在您的情况下，第三方应用程序发送的请求的 url 参数的格式与以下内容相同`session.sessionId`：

```
 appname_11111_d3d379ab97c23930-154C9639-1CC4-6169-286F5EB34A37B3C3 
```

现在，如果您在“设置”部分下的 CF Admin 中启用“为 cftoken 使用 UUID”，您将获得如下所示的会话 ID：

```
 PLANTOMATIC_11201_1f8a073a0ba85bf5-2F7356F3-BE59-A0B4-F3E493BD794062C6 
```

因此，您需要做的是在 CF Admin 中应用设置“将 UUID 用于 cftoken”。然后您可以向第三方发送请求，如下所示：

```
 http://www.thirdpartyapp.com?username=9999999&uuid=#session.sessionid# 
```

它将返回参数“uuid”。之后，您可以检查是否相等并采取必要的步骤。

# php - 相同的网络用户使用相同的会话

> ID：15497426
> 
> 赞同：5
> 
> 时间：2013-03-19T10:52:34.207
> 
> 标签：php, codeigniter, session

使用 Codeigniter 会话库时有一个我无法理解的问题。**相同的网络用户使用相同的会话**（我们与一家大公司合作，他们对我说：当任何人登录系统时，每个人都登录）！这可能吗？如何，以及我能做些什么来修复这个错误？

我正在使用 Codeigniter 核心会话库，它使用数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:18:56.917

[http://ellislab.com/codeigniter/user-guide/libraries/sessions.html](http://ellislab.com/codeigniter/user-guide/libraries/sessions.html)

> 加载页面时，会话类将检查用户的会话 cookie 中是否存在有效的会话数据。如果会话数据不存在（或已过期），则会创建一个新会话并将其保存在 cookie 中。如果会话确实存在，则其信息将被更新并且 cookie 将被更新。每次更新都会重新生成 session_id。

我不知道你在哪里读到相同的网络用户使用相同的会话，但在 CodeIgniter-documentation 中，我发现会话存储在 cookie 中，网络用户不会遇到你描述的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T14:14:46.963

与会话错误相比，更可能出现应用程序逻辑错误。如果您尝试在本地开发服务器上使用 2 个或更多不同的用户帐户（来自不同的浏览器），也许您可​​以重现它。

# c# - 多窗口问题 - C# WPF

> ID：15497427
> 
> 赞同：2
> 
> 时间：2013-03-19T10:52:35.223
> 
> 标签：c#, wpf, windows

我无法在 WPF 中使用多个窗口并使用按钮在它们之间切换。理论上，我的应用程序应该有 2 个按钮，一个前进一个后退，分别将窗口更改为上一个和下一个窗口。

不幸的是，我得到了一个 Stackoverflow 错误，通过我的研究，我觉得这与我创建新窗口有关，这些新窗口在创建前一个窗口时再次创建窗口，从而产生了一个可怕的循环。但是我不知道我可以将窗口创建代码放在哪里来阻止这个问题，或者是否有其他方法可以解决这个问题。

这是我的窗口的代码：

第一个窗口

```
public partial class Presenation_1 : Window
{
    Presentation_2 p2 = new Presentation_2();
    MainWindow M = new MainWindow();

    public Presenation_1()
    {
        InitializeComponent();
    }

    private void btnForward_Click(object sender, RoutedEventArgs e)
    {
        this.Close();
        p2.Show();
    }

    private void btnBack_Click(object sender, RoutedEventArgs e)
    {
        this.Close();
        M.Show();
    }
} 
```

第二个窗口

```
public partial class Presentation_2 : Window
{
    Presentation_3 p3 = new Presentation_3();
    Presenation_1 p1 = new Presenation_1();
    public Presentation_2()
    {
        InitializeComponent();
    }

    private void btnForward_Click(object sender, RoutedEventArgs e)
    {
        this.Close();
        p3.Show();
    }

    private void btnBack_Click(object sender, RoutedEventArgs e)
    {
        this.Close();
        p1.Show();
    }
} 
```

第三个窗口

```
public partial class Presentation_3 : Window
{
    Presentation_4 p4 = new Presentation_4();
    Presentation_2 p2 = new Presentation_2();

    public Presentation_3()
    {
        InitializeComponent();
    }

    private void btnForward_Click(object sender, RoutedEventArgs e)
    {
        this.Close();
        p4.Show();
    }

    private void btnBack_Click(object sender, RoutedEventArgs e)
    {
        this.Close();
        p2.Show();
    }
} 
```

第四窗口

```
public partial class Presentation_4 : Window
{
    Presentation_3 p3 = new Presentation_3();
    MainWindow M = new MainWindow();

    public Presentation_4()
    {
        InitializeComponent();
    }

    private void btnForward_Click(object sender, RoutedEventArgs e)
    {
        this.Close();
        M.Show();
    }

    private void btnBack_Click(object sender, RoutedEventArgs e)
    {
        this.Close();
        p3.Show();
    }
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T11:10:32.580

在单击按钮之前不要创建 Windows，您可以在事件处理程序中创建它们：

```
private void btnForward_Click(object sender, RoutedEventArgs e)
{
    var p2 = new Presentation_2();
    this.Close();
    p2.Show();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T11:10:46.953

当您创建一个窗口时，您会创建另外两个窗口

```
new Presentation_X() 
```

这个新窗口会自动显示，并且会自动打开另外 2 个窗口。

您可以在主窗口中创建一次此窗口（自动隐藏此窗口），在构造函数中传递引用而不关闭这些窗口。快速示例（未测试）：

```
public partial class Presenation_X : Window
{
    private Window preview;
    private Window next;

    public Presenation_X(Window w1, Window w2)
    {
        this.preview = w1;
        this.next = w2;

        InitializeComponent();
    }

    private void btnForward_Click(object sender, RoutedEventArgs e)
    {
        this.next.Show();
        this.Hide();
    }

    private void btnBack_Click(object sender, RoutedEventArgs e)
    {
        this.preview.Show();
        this.Hide();
    }
} 
```

# opengl - 从 OpenGL 到 DirectX 的投影矩阵

> ID：15497429
> 
> 赞同：1
> 
> 时间：2013-03-19T10:52:40.283
> 
> 标签：opengl, directx, coordinate-systems, coordinate-transformation

我有一个使用 openGL 的应用程序，我必须将它移植到 DirectX。总结一下我的问题：如何将基于右手坐标系的旋转矩阵移植到左手坐标系？

这是我在[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/bb204853%28v=vs.85%29.aspx "MSDN")上找到的：

*   翻转三角形顶点的顺序，使系统从前面顺时针遍历它们。换句话说，如果顶点是 v0、v1、v2，则将它们作为 v0、v2、v1 传递给 Direct3D。

*   使用视图矩阵在 z 方向将世界空间缩放 -1。为此，翻转用于视图矩阵的 D3DMATRIX 结构的 _31、_32、_33 和 _34 成员的符号。

这很好用，除了我不能轻易翻转我的顶点，因为我从 CATIA 获得了一个不是原始的 3D 模型，所以我不能使用它。

（我知道行主要和列主要的区别，没关系）

你知道如何将我的旋转矩阵从 openGL 移植到 DirectX 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:49:59.367

关于基础坐标系的**手性和给定的****旋转**变换，右手坐标系中的正旋转由右手法则确定，反之亦然。**因此，如果您通过翻转**旋转角度前面的符号来获得两个具有不同惯用手的坐标系，则您已经调整了旋转矩阵。你已经移植了你的旋转矩阵:)

# objective-c - 按键顺序遍历字典

> ID：15497434
> 
> 赞同：0
> 
> 时间：2013-03-19T10:52:49.523
> 
> 标签：objective-c, nsdictionary, nsmutabledictionary

我正在使用以下语法来打印字典：

```
for(id key in myDict)
    NSLog(@"key=%@ value=%@", key, [myDict objectForKey:key]); 
```

但我注意到，oeder 不符合索引。比如说。如果我的字典是

```
myDict = { 1:a, 2:b, 3:c....26:z} 
```

上面的代码不会以 1,2,3,4 的顺序打印值，而是以随机顺序打印。

*如何使用枚举代码按顺序遍历该字典*，就像上面指定的那样。我使用的关键是一个字符串，例如“ajay”“abhi：等

编辑：将密钥复制到另一个数组中是不可避免的吗？这是唯一的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T10:58:34.073

```
How do I get to traverse that dictionary in order using enumeration code, like the one specified above. The key in my usage is a string such as "ajay" " abhi: etc 
```

根据您在 NSDictionary 中的 setObject，您不会按该顺序检索。

如果您想以除添加顺序之外的任何排序顺序获得结果。

然后您可以将所有键作为数组 [dict allKeys] 获取，然后对该数组进行排序，然后从字典中检索对象。

```
NSMutableDictionary *dict=[NSMutableDictionary new];
[dict setObject:@"anoop" forKey:@"aKey"];
[dict setObject:@"john" forKey:@"jKey"];
[dict setObject:@"baban" forKey:@"bKey"];
[dict setObject:@"chandan" forKey:@"cKey"];

NSArray *keys=[dict allKeys];
NSArray *sortedKeys=[keys sortedArrayUsingSelector:@selector(compare:)];
for (NSString *key in sortedKeys) {
    NSLog(@"Key: %@, Value : %@",key,dict[key]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T10:55:33.137

如果您需要按特定顺序排列项目，则应使用`NSArray`. 不保证字典键的顺序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T10:55:42.927

你可以像这样得到钥匙......

```
NSArray *keys = [myDict allKeys]; 
```

然后对键进行排序并迭代排序后的键数组以按顺序获取值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T10:55:45.497

在数组中检索您的字典键

排序这个键数组

使用此数组检索您的字典值

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-19T10:56:22.103

根据定义，字典没有排序。您甚至不能假设现有订单保持不变。

您可以`allKeys`从字典中获取数组，对其进行排序，然后通过遍历排序后的数组来访问键的值。

# character-encoding - 如何对 .vdproj 注册表字符串中的特殊字符进行编码？

> ID：15497435
> 
> 赞同：1
> 
> 时间：2013-03-19T10:52:53.660
> 
> 标签：character-encoding, windows-installer, special-characters, vdproj

我们有一个 .vdproj 文件，它生成一个 .msi 文件。安装后，注册表中会添加各种语言的字符串。但是特殊字符出来都错了。

我无法打开 .vdproj，因为它需要 VS 2005。但在文本中它看起来像这样，请注意`value`：

```
"Values"
{
    "{ADCFDA98-8FDD-45E4-90BC-E3D20B029870}:_58F50CEB3EC74D5E9E6301A39929D9FE"
    {
    "Name" = "8:Description"
    "Condition" = "8:"
    "Transitive" = "11:FALSE"
    "ValueTypes" = "3:1"
    "Value" = "8:Låter dig söka efter information."
} 
```

构建后，生成的 .msi 文件（在 InstallShield 中查看）如下所示：

![在此处输入图像描述](../Images/6c30ed0365719c56463867d0e54d3a1d.png)

瑞典字母被歪曲了，它们在安装后在注册表中看起来是一样的：

![在此处输入图像描述](../Images/adcb8b42665381dd504c80a5b0db9f1c.png)

我该如何解决这个问题？是否有可以直接在 vdproj 值中设置的设置或可以使用的编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:09:31.143

我现在通过改写而不使用特殊字符解决了这个问题。但问题仍然存在，因为我无法用所有语言重新表述。

我查看的替代方案包括安装 Visual Studio 2005，以便能够打开和编辑 vbproj 文件，或者将其全部转换为 WiX。

# javascript - 正则表达式：从 URL 中提取 GET 变量

> ID：15497438
> 
> 赞同：1
> 
> 时间：2013-03-19T10:52:55.180
> 
> 标签：javascript, regex, firefox-addon-sdk

正则表达式大师，听从我的号召！

这可能非常简单，但我已经把自己画在了一个心理角落。

取一个常规 URL，在 . 之后拆分`?`，这给出了一个字符串，就像`variable=val&interesting=something&notinteresting=somethingelse`我想提取`interesting`.

我感兴趣的变量的名称可以是另一个变量的子字符串。所以比赛应该是

*   字符串开头或“&”字符
*   其次是“有趣=”
*   后跟我要捕获的字符串
*   后跟另一个“&”或字符串结尾

我尝试了一些类似的东西， `[\^&]interesting=(.*)[&$]` 但我什么也没得到......

**更新** 这将在每个获取请求的 Firefox 插件中运行，这意味着 jQuery 不可用，如果可能的话，我想避免由编写函数引起的额外字符串操作。

对我来说，这感觉就像一个通用的“用正则表达式提取字符串的一部分”，但也许我错了（RegEx 显然不是我的强项）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:02:01.273

简单的解决方案

```
var arr = "variable=val&interesting=something&notinteresting=somethingelse".split("&");
for(i in arr) {
var splits = arr[i].split("=");
if(splits[0]=="interesting") alert(splits[1]);
} 
```

也是单行匹配

```
"variable=val&interesting=something&notinteresting=somethingelse".match(/(?:[&]|^)interesting=((?:[^&]|$)+)/)[1] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T11:18:30.410

```
function getValue(query)
{
var obj=location.search.slice(1),
    array=obj.split('&'),
    len=array.length;
    for(var k=0;k<len;k++)
    {
        var elm=array[k].split('=');
        if(elm[0]==query)return elm[1];
    }

} 
```

此函数直接提取查询 URL，如果存在则返回相应的值。

```
//usage
var get=getValue('interesting');
console.log(get);//something 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T18:24:39.340

如果您使用 Firefox 的附加 SDK，您可以使用 url 模块：

[https://addons.mozilla.org/en-US/developers/docs/sdk/latest/modules/sdk/url.html](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/modules/sdk/url.html)

这比使用正则表达式要好得多。

# javascript - google map api v3：当形状被拖动或调整大小时更新矩形边界

> ID：15497447
> 
> 赞同：1
> 
> 时间：2013-03-19T10:53:16.517
> 
> 标签：javascript, google-maps

我正在尝试使用绘图工具在 google map api v3 上绘制一个矩形。我希望用户能够：

1.  形状完成后获取矩形边界。
2.  拖动或重新获取矩形时更新边界。

（1）工作正常，但我需要一些帮助（2）。这是我用于 (1) 的代码：

```
 //----------on rectangle complete event
      google.maps.event.addDomListener(drawingManager, 'rectanglecomplete', function(rectangle) {
         //get the rectangle bounds
         document.getElementById("savedata").value =rectangle.getBounds();     
    //hide draw tool
    drawingManager.setOptions({
        drawingControl: false
            });
    //disable draw tool 
    drawingManager.setDrawingMode(null);
      }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:50:49.253

为 bounds_changed 的​​矩形添加一个事件侦听器，在其中捕获新坐标。代码：

```
google.maps.event.addListener(rectangle, "bounds_changed", function() {
   document.getElementById("savedata").value =rectangle.getBounds();
}); 
```

这是[一个使用 DrawingManager 的示例](http://www.geocodezip.com/blitz-gmap-editor/test5.html)，它允许您绘制矩形、更改它们并捕获更改的值。唯一缺少的是[更改事件（矩形上的 bounds_changed）](https://developers.google.com/maps/documentation/javascript/overlays#user_editable_shapes_events)。

# mysql - mysql将一行数据复制到多行

> ID：15497450
> 
> 赞同：0
> 
> 时间：2013-03-19T10:53:18.910
> 
> 标签：mysql, sql

我有一张桌子，例如：

```
PK FK Value1  value2 value3
1   1    3      2      5
2   2    5      3      6
4   1    9      null   5 
```

我想要一个查询将所有行复制到结果表中，除了那些具有空值的行。

导致：

```
PK(above table) value(PK) 
1                  3    
1                  2    
1                  5
2                  5
2                  3
2                  6
4                  9 
4                  5 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T11:00:13.210

一种方法是将其作为三个插入来完成，如果您需要操作的原子性，则由事务控制：

```
begin
insert into newtable (pk, value) select pk, value1 from oldtable
    where value1 is not null
insert into newtable (pk, value) select pk, value2 from oldtable
    where value2 is not null
insert into newtable (pk, value) select pk, value3 from oldtable
    where value3 is not null
commit 
```

这当然是假设您在新表上的主键跨越*两*列（我怀疑这是因为您的第二列也有`pk`）。如果它只是 on `pk`，则任何解决方案都不会起作用，因为您将违反主键约束。

你也可以作为一个工会来做：

```
insert into newtable (pk, value)
    select pk, value1 from oldtable where value1 is not null
    union select pk, value2 from oldtable where value2 is not null
    union select pk, value3 from oldtable where value3 is not null 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T11:04:12.713

你可以写下面的查询来实现这一点

```
INSERT INTO TABLE2 (SELECT ID,VALUE1 FROM table1);
INSERT INTO TABLE2 (SELECT ID,VALUE2 FROM table1);
INSERT INTO TABLE2 (SELECT ID,VALUE3 from table1); 
```

如果您需要单一查询，那么您可以使用

```
INSERT INTO TABLE2 (SELECT ID,COLUMN1 FROM table1 UNION SELECT ID,COLUMN2 FROM table1 UNION SELECT ID,COLUMN3 from table1) 
```

# c# - 将excel文件加载到其中后如何通过文本框过滤datagridview

> ID：15497460
> 
> 赞同：1
> 
> 时间：2013-03-19T10:53:46.473
> 
> 标签：c#, excel, datagridview, filter

我刚开始使用 C#。我正在创建一个为客户提供报价的程序。我得到了第一个带有报价的表单和一个带有加载到 datagridview 中的 excel 文件的子表单。当我双击该行时，它被复制到第一行的 datagridview 中。它工作正常。但是我想添加一个带有 TextChanged 事件的 TextBox，因此当用户将一些文本放在那里时，datagridview（在第二种形式中，带有 excel 数据的那个）应该只显示包含此文本的行。如果不可能一次搜索所有的 calumns 也没关系。但我不能让它工作。我找到了一些解决方案并复制了它，但我不起作用。所以这里是代码：

```
private void button1_Click(object sender, EventArgs e)
{
  try
  {
    System.Data.OleDb.OleDbConnection PolaczenieBazyDanych = new System.Data.OleDb.OleDbConnection("provider=Microsoft.ACE.OLEDB.12.0;Data Source='C:\\Users\\user\\Desktop\\My Dropbox\\Cenniki\\Cennik.xlsx';Extended Properties=Excel 8.0;");
    System.Data.DataSet DtSet = new System.Data.DataSet();
    System.Data.OleDb.OleDbDataAdapter Adapter = new System.Data.OleDb.OleDbDataAdapter("select * from [Tabelle1$]", PolaczenieBazyDanych);
    //Adapter.TableMappings.Add("Tabela", "TabelaTestowa");
    Adapter.Fill(DtSet);     
    dataGridView1.DataSource = DtSet.Tables[0];
    PolaczenieBazyDanych.Close();

  }
  catch (Exception ex)
  {
    MessageBox.Show(ex.ToString());
  }
}

private void textBox1_TextChanged(object sender, EventArgs e)
{
  DataView dv = ((DataTable)dataGridView1.DataSource).DefaultView;
  dv.RowFilter = "FromColumn like '%" + textBox1.Text + "%'";
  dataGridView1.DataSource = dv;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T07:48:48.897

这确实有效：

```
 BindingSource bs = new BindingSource();
  bs.DataSource = dataGridView1.DataSource;
  bs.Filter = sColumnaDoPrzeszukania + " like '%" + textBox1.Text + "%'";
  dataGridView1.DataSource = bs; 
```

# ruby-on-rails - Rails 3 和 Communityengine 照片上传

> ID：15497464
> 
> 赞同：0
> 
> 时间：2013-03-19T10:53:53.493
> 
> 标签：ruby-on-rails, amazon-s3, imagemagick, paperclip, communityengine

我现在使用 Communityengine 启动并运行了我的 rails 应用程序，但不知何故我无法使图像上传工作。

在标准安装中，当我尝试上传图像时，总是会出现此错误：

```
Photo /tmp/stream20130319-18602-13k89ab.gif is not recognized by the 'identify' command. 
```

Imagemagick 已正确安装，并且 identify-command 有效。/tmp/ 文件夹的权限也是正确的。所以我对这个问题一无所知=（。

为了解决这个问题，我尝试使用 Amazon S3 进行存储，因为我不介意图像来自哪里（请参阅[此处](https://github.com/bborn/communityengine)）。我将正确填写的 s3.yml 复制到应用程序 /config/ 文件夹中。我在我的 Gemfile 中使用 gem“aws-sdk”，如下所示：[Paperclip](https://github.com/thoughtbot/paperclip/blob/master/lib/paperclip/storage/s3.rb)；我像这样更新了application_config.rb：

```
:photo => {
    :missing_thumb => '/assets/icon_missing_thumb.gif',
    :missing_medium => "/assets/icon_missing_medium.gif",
    :paperclip_options => {
      :storage => 's3',
      :styles => {
        :thumb => {
          :geometry => '100x66#',
          :processors => [:cropper]
        },
        :medium => {
          :geometry => '300x200#',
          :processors => [:cropper]
        },
        :large => {
          :geometry => '600x400#',
          :processors => [:cropper]
        },   
        :original => "1024>"       
      }
    },
    :validation_options => {
      :max_size => 3,
      :content_type => ['image/jpg', 'image/jpeg', 'image/pjpeg', 'image/gif', 'image/png', 'image/x-png']          
    }
  },

  :feature => {
    :use_thumbs => true,
    :paperclip_options => {
      :storage => 's3',
      :styles => {
        :thumb => "100x66#",
        :medium => '300x200#',
        :large => "600x400#",
        :original => '1024>'             
      }
    },
    :validation_options => {
      :max_size => 3,
      :content_type => ['image/jpg', 'image/jpeg', 'image/pjpeg', 'image/gif', 'image/png', 'image/x-png']          
    }
  },

  :clipping => {
    :paperclip_options => {
      :storage => 's3',
      :styles => {
        :thumb => "100x66#",
        :medium => "300x200#",
        :large => "600x400#",
        :original => '1024>'     
      }
    },
    :validation_options => {
      :max_size => 3,
      :content_type => ['image/jpg', 'image/jpeg', 'image/pjpeg', 'image/gif', 'image/png', 'image/x-png']              
    }
  }, 
```

当我尝试编辑用户配置文件或上传图像时，我收到此错误：未初始化的常量 AWS::S3::Base Full Trace here：

```
 paperclip (2.4.5) lib/paperclip/storage/s3.rb:101:in `block in extended'
paperclip (2.4.5) lib/paperclip/storage/s3.rb:79:in `instance_eval'
paperclip (2.4.5) lib/paperclip/storage/s3.rb:79:in `extended'
paperclip (2.4.5) lib/paperclip/attachment.rb:392:in `extend'
paperclip (2.4.5) lib/paperclip/attachment.rb:392:in `initialize_storage'
paperclip (2.4.5) lib/paperclip/attachment.rb:73:in `initialize'
paperclip (2.4.5) lib/paperclip.rb:448:in `new'
paperclip (2.4.5) lib/paperclip.rb:448:in `attachment_for'
paperclip (2.4.5) lib/paperclip.rb:337:in `block in has_attached_file'
activerecord (3.2.11) lib/active_record/attribute_assignment.rb:85:in `block in assign_attributes'
activerecord (3.2.11) lib/active_record/attribute_assignment.rb:78:in `each'
activerecord (3.2.11) lib/active_record/attribute_assignment.rb:78:in `assign_attributes'
activerecord (3.2.11) lib/active_record/base.rb:497:in `initialize'
/home/martin/.bundler/ruby/1.9.1/communityengine-281d49916dbc/app/controllers/photos_controller.rb:104:in `new'
/home/martin/.bundler/ruby/1.9.1/communityengine-281d49916dbc/app/controllers/photos_controller.rb:104:in `create'
actionpack (3.2.11) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
actionpack (3.2.11) lib/abstract_controller/base.rb:167:in `process_action'
actionpack (3.2.11) lib/action_controller/metal/rendering.rb:10:in `process_action'
actionpack (3.2.11) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
activesupport (3.2.11) lib/active_support/callbacks.rb:460:in `block (2 levels) in _run__141873283__process_action__116704501__callbacks'
activesupport (3.2.11) lib/active_support/callbacks.rb:215:in `block in _conditional_callback_around_1705'
activesupport (3.2.11) lib/active_support/callbacks.rb:326:in `around'
activesupport (3.2.11) lib/active_support/callbacks.rb:310:in `_callback_around_1685'
activesupport (3.2.11) lib/active_support/callbacks.rb:214:in `_conditional_callback_around_1705'
activesupport (3.2.11) lib/active_support/callbacks.rb:459:in `block in _run__141873283__process_action__116704501__callbacks'
activesupport (3.2.11) lib/active_support/callbacks.rb:215:in `block in _conditional_callback_around_1704'
/home/martin/.bundler/ruby/1.9.1/communityengine-281d49916dbc/lib/community_engine/localized_application.rb:25:in `set_locale'
activesupport (3.2.11) lib/active_support/callbacks.rb:214:in `_conditional_callback_around_1704'
activesupport (3.2.11) lib/active_support/callbacks.rb:414:in `_run__141873283__process_action__116704501__callbacks'
activesupport (3.2.11) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.11) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
activesupport (3.2.11) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.11) lib/abstract_controller/callbacks.rb:17:in `process_action'
actionpack (3.2.11) lib/action_controller/metal/rescue.rb:29:in `process_action'
actionpack (3.2.11) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
activesupport (3.2.11) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.11) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.11) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.11) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
actionpack (3.2.11) lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
activerecord (3.2.11) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (3.2.11) lib/abstract_controller/base.rb:121:in `process'
actionpack (3.2.11) lib/abstract_controller/rendering.rb:45:in `process'
actionpack (3.2.11) lib/action_controller/metal.rb:203:in `dispatch'
actionpack (3.2.11) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
actionpack (3.2.11) lib/action_controller/metal.rb:246:in `block in action'
actionpack (3.2.11) lib/action_dispatch/routing/route_set.rb:73:in `call'
actionpack (3.2.11) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
actionpack (3.2.11) lib/action_dispatch/routing/route_set.rb:36:in `call'
journey (1.0.4) lib/journey/router.rb:68:in `block in call'
journey (1.0.4) lib/journey/router.rb:56:in `each'
journey (1.0.4) lib/journey/router.rb:56:in `call'
actionpack (3.2.11) lib/action_dispatch/routing/route_set.rb:601:in `call'
rakismet (1.3.0) lib/rakismet/middleware.rb:10:in `call'
omniauth (1.1.2) lib/omniauth/strategy.rb:177:in `call!'
omniauth (1.1.2) lib/omniauth/strategy.rb:157:in `call'
omniauth (1.1.2) lib/omniauth/builder.rb:48:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.5) lib/rack/etag.rb:23:in `call'
rack (1.4.5) lib/rack/conditionalget.rb:35:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/flash.rb:242:in `call'
rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/cookies.rb:341:in `call'
activerecord (3.2.11) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.11) lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.11) lib/active_support/callbacks.rb:405:in `_run__284061703__call__288038654__callbacks'
activesupport (3.2.11) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.11) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.11) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.11) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.11) lib/rails/rack/logger.rb:32:in `call_app'
railties (3.2.11) lib/rails/rack/logger.rb:16:in `block in call'
activesupport (3.2.11) lib/active_support/tagged_logging.rb:22:in `tagged'
railties (3.2.11) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.5) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.11) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.5) lib/rack/lock.rb:15:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/static.rb:62:in `call'
railties (3.2.11) lib/rails/engine.rb:479:in `call'
railties (3.2.11) lib/rails/application.rb:223:in `call'
rack (1.4.5) lib/rack/content_length.rb:14:in `call'
railties (3.2.11) lib/rails/rack/log_tailer.rb:17:in `call'
rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
/usr/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
/usr/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
/usr/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

有人能帮我一下吗？我真的坚持这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:17:01.657

Paperclip 2.4.5 仍然使用 aws-s3 gem。

将您的 Gemfile 行更改为：

```
gem "aws-s3", :require => "aws/s3" 
```

或者使用 master 分支而不是稳定版本（这当然有一些风险）：

```
gem 'paperclip', :git => "git://github.com/thoughtbot/paperclip.git"
gem "aws-sdk" 
```

**更新：** Paperclip 2.5.0，于 2012 年 1 月 13 日发布，现在使用 aws-sdk

**对于您的第二个问题，我正在更新此答案**

主要问题是您需要将以下代码移动到它自己的初始化文件中：

```
if Rails.env == "production" 
   S3_CREDENTIALS = { :access_key_id => ENV['S3_KEY'], :secret_access_key => ENV['S3_SECRET'], :bucket => "ourbucket"} 
 else 
   S3_CREDENTIALS = Rails.root.join("config/s3.yml")
end 
```

然后，您应该将以下行添加到具有 *has_attached_file 的模型中：photo* 要添加的行是。

```
:s3_credentials => S3_CREDENTIALS, 
```

这就是你之前所缺少的。

此外，当您声明您的存储桶名称时，请确保这是我们的标准。如果您使用其他位置之一，则必须适当地更新路径。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:02:22.480

我现在解决了这个问题！CommunityEngine 的 Jquery-Bootstrap 分支使用回形针 2.4.5，这个问题在较新的版本中得到解决。

我在 Github 上 fork Communityengine 并将回形针依赖更新到 2.7.4。只需将其替换为`community_engine.gemspec`：

```
s.add_dependency(%q<paperclip>, ["~> 2.4.3"]) 
```

有了这个：

```
s.add_dependency(%q<paperclip>, ["~> 2.7.4"]) 
```

另一个问题是较新的版本在 S3 凭据中需要“bucket”而不是“bucket_name”（我以这种方式搞砸了）。

# php - PHP标头在服务器上不起作用但在本地服务器上起作用？

> ID：15497468
> 
> 赞同：0
> 
> 时间：2013-03-19T10:54:03.163
> 
> 标签：php

```
header("Content-type: application/octet-stream"); 
header("Content-Disposition: attachment; filename=filename.xls");
header("Pragma: no-cache");
header("Expires: 0"); 
```

在我的本地系统上，上面的代码可以正常工作，但在服务器上它不能工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-17T05:44:17.780

在下面最后一行之前写 ob_clean() ，我有同样的问题得到了解决

```
header('Content-Type: application/vnd.ms-excel');
header('Content-Disposition: attachment;filename="temlik.xls"');
header('Cache-Control: max-age=0');

$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel5');
ob_clean();
$objWriter->save('php://output'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:58:03.100

我还不知道它是否会帮助你，但如果你不想，你可以`octet-stream`直接在 VirtualHost 配置中为某些扩展概括输出。

为此，使用`AddType application/octet-stream .xlsx .xls`

并且将下载*Excel*文件的所有 url 。

# http-status-code-404 - django 教程：自定义 404 和 500 视图

> ID：15497471
> 
> 赞同：6
> 
> 时间：2013-03-19T10:54:09.337
> 
> 标签：http-status-code-404, handler

Windows 7
Python 2.7.3
Django 1.5
python manage.py runserver

我正在关注“ [https://docs.djangoproject.com/en/1.5/intro/tutorial03/](https://docs.djangoproject.com/en/1.5/intro/tutorial03/) ”中提供的教程

在事情变得奇怪之前，我已经达到了“写一个 404（找不到页面）视图”的程度。

我试图弄清楚如何制作自定义 404 视图。但是，我不确定：

A. 自定义 404.html 文件的确切位置。它应该在我的项目目录树中还是在我的 Django 目录树中。我的项目目录树看起来像这样，

```
1> mysite  
2>     - mysite  
3>     - polls  
4>         - templates  
5>             - polls  
6>     - templates  
7>         - admin 
```

目前404.html是@6>

B. 必须在哪里进行哪些修改？我知道需要在“根”url conf 中设置 handler404 和 handler500。我有一个 url.py 位于 @ 2> 和 3> （见上面的树）。假设 2> 是正确的地方，我假设语法如下，

```
handler404 = 'templates.404'
handler500 = 'templates.500' 
```

还有什么需要设置的，在哪里？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T17:15:11.187

我可以看到你有一个小错误，但不要担心。

看，试试这个：

```
handler404 = 'mysite.views.error404' 
```

然后在 mysite（第二个 mysite）中创建一个 views.py 如果你没有。在那个views.py中放：

```
from django.shortcuts import render

def error404(request):
    return render(request,'404.html') 
```

就这样！在模板中，创建该文件并做一些好事！

请记住，仅适用于生产，`(DEBUG=False)`否则 django 使用回溯。505也是一样的，你也许可以试着把`handler404 = 'polls.views.see404'`views.py放进去，但是你知道，口味不同嘿嘿嘿。

现在，尝试其他方法，例如：在 urls.py 中添加评论

`#handler404 = 'mysite.views.error404'`

并在views.py中删除def。

在您的模板文件的索引中创建一个简单的 404.html。在生产环境中运行服务器并产生 404 错误，发生了什么？

# android - Android如何发送彩信

> ID：15497472
> 
> 赞同：-1
> 
> 时间：2013-03-19T10:54:13.133
> 
> 标签：android, mms

是否有提供使用 Android 发送彩信的简单代码可供下载。我找到了很多示例，但没有找到完整的代码。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:12:44.250

请找到以下链接以下载源代码

[http://www.ziddu.com/download/14286605/SendMMS3.zip.html](http://www.ziddu.com/download/14286605/SendMMS3.zip.html)

您将从以下链接获得说明

[http://androidbridge.blogspot.in/2011/03/how-to-send-mms-programmatically-in.html](http://androidbridge.blogspot.in/2011/03/how-to-send-mms-programmatically-in.html)

您可以查看以下链接，例如如何发送彩信

[http://matrix-examplecode.blogspot.in/2011/08/send-mms-example.html](http://matrix-examplecode.blogspot.in/2011/08/send-mms-example.html)

# android - 如何从广播接收器调用 TextToSpeech

> ID：15497474
> 
> 赞同：1
> 
> 时间：2013-03-19T10:54:15.610
> 
> 标签：android, broadcastreceiver, text-to-speech, android-broadcast

我的应用程序正在调用广播接收器来读取传入的文本消息并大声说出来。我的广播接收器被正确调用，它正确地读取了文本消息，但是当涉及到`speak()`方法时，它就崩溃了。这是我的代码：

这是广播接收器：

```
public class DrivingModeSpeaker extends BroadcastReceiver  {

            @Override
    public void onReceive(Context context, Intent intent) 
    {
        // TODO Auto-generated method stub
        int n;
        Bundle bundle=intent.getExtras();
        Object messages[]=(Object[])bundle.get("pdus");
        SmsMessage smsMessage[]=new SmsMessage[messages.length];
        for(n=0;n<messages.length;n++)
        {
            smsMessage[n]=SmsMessage.createFromPdu((byte[])messages[n]);

        }
        //show first message
        String sms1=smsMessage[0].getMessageBody();
        String from=smsMessage[0].getOriginatingAddress();
        Toast toast=Toast.makeText(context,"In DrivingModeSpeaker BR",1);
        toast.show();
        DrivingMode.speakSMS(sms1);

    }

} 
```

这是DrivingMode.java，其中包含以下`speak()`方法：

```
public class DrivingMode extends Activity {
    private static TextToSpeech myTts;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //setContentView(R.layout.message_m);
        myTts = new TextToSpeech(this,ttsInitListener);

    }

private TextToSpeech.OnInitListener ttsInitListener=new TextToSpeech.OnInitListener() {

        @Override
        public void onInit(int version) {
            // myTts.speak(""+o, 0 ,null);

        }
    };
    public static void speakSMS(String sms)
    {
        myTts.speak(sms,0,null);

    }

} 
```

我已经在一个单独的项目中尝试了这段代码，它可以工作。但在我的主要项目中，它没有 - 可能是因为两个广播接收器发生冲突还是什么？我不知道，我是Android新手，请帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T11:05:55.910

目前，您正在尝试通过创建一个 Activity 实例来调用 Activity 方法，`NullPointerException`如果 Activity 未运行，则该实例将通过该实例。所以不要调用 Activity 的方法 start Activity`BroadcastReceiver`并使用 as 发送短信数据`Intent.putExtra`：

例如 ：

```
public void onReceive(Context context, Intent intent) 
    {
       // Your code here....
        Toast toast=Toast.makeText(context,"In DrivingModeSpeaker BR",1);
        toast.show();
        // start Activity here
        Intent intent  = new Intent(context,
                    DrivingMode.class);
            intent.putExtra("sms", sms);  //<<< put sms text
            context.startActivity(intent);   

    } 
```

并在`DrivingMode`onCreate 方法中获取短信数据并调用`speakSMS`方法为：

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //setContentView(R.layout.message_m);
        Bundle extras = getIntent().getExtras();
        myTts = new TextToSpeech(this,ttsInitListener);
        DrivingMode.speakSMS(extras.getString("sms"));

    } 
```

还使用[TextToSpeech.setOnUtteranceCompletedListener](http://developer.android.com/reference/android/speech/tts/TextToSpeech.OnUtteranceCompletedListener.html)在 Speak 结束时完成 Activity

# android - 如何使用 facebook 登录从 Android 应用程序中的后端服务器访问数据？

> ID：15497477
> 
> 赞同：7
> 
> 时间：2013-03-19T10:54:18.917
> 
> 标签：android, facebook, facebook-graph-api

我正在开发一个应用程序，在该应用程序中，我必须使用 facebook 登录来访问后端服务器的数据。我对此进行了搜索并得到了：

1.  首先，用户将输入 facebook 的用户名和密码，然后请求转到服务器。
2.  如果用户通过身份验证，则获取用户的访问令牌。
3.  在服务器上发送此访问令牌。
4.  服务器将验证此访问令牌。

我已成功将我的应用程序与 facebook 连接，即现在用户可以从我的应用程序登录到 facebook。但是我现在不知道如何获取用户的访问令牌以及如何在服务器上验证此访问令牌。

你能为我提供一些示例代码吗？请帮助我，我被困了很长时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-29T17:31:40.187

我不确定这是否是最佳做法，但这就是我的做法。

当您通过任何 SDK 在客户端设备上登录 Android 用户时，您将获得一个用户访问令牌。可以通过以下方式访问令牌

```
AccessToken token = AccessToken.getCurrentAccessToken();
if (token != null) {
  Toast.makeText(getActivity(), token, Toast.LENGTH_LONG).show();
} 
```

然后，您可以将此令牌作为 POST 变量传递给后端：

```
'access_token': '32b409xceBV78d2932b409xceBV78d29' 
```

使用后端 SDK，您可以再次获取用户信息。这是python中的一个例子

```
facebook_graph = facebook.GraphAPI(access_token) 
```

如果电子邮件和 fbid 与存储在数据库中的用户信息匹配，则您授予访问权限：

```
user = get_user(email=facebook_graph['email'], fbid=facebook_graph['fbid'])
login(request, user) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T11:44:36.243

要访问 facebook 用户的数据，您必须获得权限，以下链接可能对您有用。只需检查一下... [https://developers.facebook.com/docs/howtos/androidsdk/3.0/fetch-user-data/](https://developers.facebook.com/docs/howtos/androidsdk/3.0/fetch-user-data/)

# login - 如何在登录屏幕中保存用户名和密码 打开 erp

> ID：15497478
> 
> 赞同：1
> 
> 时间：2013-03-19T10:54:19.527
> 
> 标签：login, passwords, save, browser-cache, openerp

我用的是谷歌浏览器，当我登录打开erp时没有保存密码的选项，用户名是restore但我想保持密码自动填写字段，有人知道怎么做吗？我用了mozila，有保存的选项，但是没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T10:53:02.040

如果您点击用户界面中的“更多”选项，您将有一个“重置用户密码”选项，点击它，您将看到一个更改密码的界面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T12:42:34.777

注意：密码可以保存 - 只是在输入相应的用户名时不会自动重复使用。我没有解决该问题的方法，但我可以排除通常用于执行此操作的两种方法：-

*   _自动完成禁用
*   两个密码字段

openerp.com 网站上使用了相同的技术（它是相同的软件）。帐户是免费的，并且非常感谢您提供解决方案（它使测试变得痛苦）。

如果您实际上无法保存密码（请检查您的密码管理器），请检查：-

**Firefox -> Preferences -> Security -> Passwords**
勾选**“Remember Passwords”**并检查**Exceptions中的条目**

# android - 从 RAW 资源加载 JPEG

> ID：15497481
> 
> 赞同：2
> 
> 时间：2013-03-19T10:54:26.783
> 
> 标签：android, jpeg, android-image

我的应用程序中需要 6 张大图像。而且我不需要PNG提供的质量和alpha通道。有没有办法在程序首次启动时将 JPEG 文件嵌入原始资源并展开到 SD 卡中？它会在我的 APK 中节省 3-4 MB。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T11:00:32.213

这很容易。将您的文件放在 res/raw 文件中并使用：

```
InputStream is = getResources().openRawResource(R.raw.image);
BitmapFactory.decodeStream(is); 
```

您可以简单地打开流并对数据做任何您想做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T11:03:01.650

没有什么能阻止您将 JPEG 图像放入资源文件夹中，或者`assets`如果您不需要这些东西，则放入文件夹中`R.drawable.MY_IMAGE`。

但是，这些图像仍会包含在您的 APK 中，即使您将它们复制到 SD 卡，也无法从您的应用程序包中删除它们。

唯一的方法是在您的应用程序首次启动时从 Web 服务器单独下载图像。

如果您的应用程序需要大文件，Google Play 商店也提供了一些便利，但这似乎有点矫枉过正

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T11:12:56.990

我想我不明白您的问题：您似乎想在第一次运行时删除图像文件......

无论如何，我建议将文件放在*资产*文件夹而不是资源中。您可以将资产作为文件系统访问并将它们复制到任何（允许的）位置。

看看这里： [/res 和 /assets 目录之间的区别](https://stackoverflow.com/questions/5583608/android-difference-between-res-and-assets-directory)

在这里（查看资产）：http: [//developer.android.com/tools/projects/index.html](http://developer.android.com/tools/projects/index.html)

**编辑：**

我的回答建议使用资产而不是资源，但是**您不能在运行时修改您的 apk**，请看这里：

[我们如何在android运行时从资产文件夹中删除文件？](https://stackoverflow.com/questions/4398523/how-we-can-remove-a-file-from-the-assets-folder-at-runtime-in-android)

# triggers - 实施 Cassandra 触发器时出错

> ID：15497484
> 
> 赞同：0
> 
> 时间：2013-03-19T10:54:31.537
> 
> 标签：triggers, cassandra

试图在 Cassandra 中实现触发器。

一直在尝试使用可用的 Cassandra 帮助：[https ://github.com/hmsonline/cassandra-triggers](https://github.com/hmsonline/cassandra-triggers)

但是，当我尝试设置触发器的值并检查日志时，以下是我收到的错误。

```
DEBUG [Thrift:2] 2013-03-19 15:07:27,753 CassandraServerTriggerAspect.java (line 69) Mutation for [triggers] with consistencyLevel [ONE]
DEBUG [Thrift:2] 2013-03-19 15:08:08,873 ConfigurationStore.java (line 66) Refreshing trigger configuration.
DEBUG [Thrift:2] 2013-03-19 15:08:08,876 ConfigurationStore.java (line 92) Triggers.isCommitLogEnabled? [true]
DEBUG [Thrift:2] 2013-03-19 15:08:08,876 CassandraServerTriggerAspect.java (line 69) Mutation for [world] with consistencyLevel [ONE]
DEBUG [Thrift:2] 2013-03-19 15:08:08,882 LogEntryStore.java (line 84) Host ID: CTSINGMRGTO
DEBUG [Thrift:2] 2013-03-19 15:08:08,882 CassandraStore.java (line 59) Did not create [triggers:CommitLog_CTSINGMRGTO] (probably already there)
 INFO [Thrift:2] 2013-03-19 15:08:08,884 CassandraStore.java (line 93) Did not create [triggers:CommitLog_CTSINGMRGTO] (probably already there)
 WARN [Thrift:2] 2013-03-19 15:08:08,884 CommitLog.java (line 38) Instantiated commit log [CommitLog_CTSINGMRGTO]
DEBUG [Thrift:2] 2013-03-19 15:08:08,886 TriggerTask.java (line 32) Spawning [20] threads for commit log processing.
DEBUG [Thrift:2] 2013-03-19 15:08:08,890 CommitLog.java (line 41) Started Trigger Task thread.
ERROR [Thrift:2] 2013-03-19 15:08:08,892 CassandraServerTriggerAspect.java (line 61) Could not write to cassandra! Method: org.apache.cassandra.thrift.CassandraServer.doInsert()
java.lang.ClassCastException: java.util.UUID cannot be cast to java.lang.Integer
        at com.hmsonline.cassandra.triggers.dao.CommitLog.writePending(CommitLog.java:63)
        at com.hmsonline.cassandra.triggers.CassandraServerTriggerAspect.writePending(CassandraServerTriggerAspect.java:72)
        at com.hmsonline.cassandra.triggers.CassandraServerTriggerAspect.ajc$inlineAccessMethod$com_hmsonline_cassandra_triggers_CassandraServerTriggerAspect$com_hmsonline_cassandra_triggers_CassandraServerTriggerAspect$writePending(CassandraServerTriggerAspect.java:1)
        at com.hmsonline.cassandra.triggers.CassandraServerTriggerAspect.writeToCommitLog(CassandraServerTriggerAspect.java:34)
        at org.apache.cassandra.thrift.CassandraServer.doInsert(CassandraServer.java:854)
        at org.apache.cassandra.thrift.CassandraServer.internal_insert(CassandraServer.java:624)
        at org.apache.cassandra.thrift.CassandraServer.insert(CassandraServer.java:645)
        at org.apache.cassandra.thrift.Cassandra$Processor$insert.getResult(Cassandra.java:3526)
        at org.apache.cassandra.thrift.Cassandra$Processor$insert.getResult(Cassandra.java:3514)
        at org.apache.thrift.ProcessFunction.process(ProcessFunction.java:32)
        at org.apache.thrift.TBaseProcessor.process(TBaseProcessor.java:34)
        at org.apache.cassandra.thrift.CustomTThreadPoolServer$WorkerProcess.run(CustomTThreadPoolServer.java:199)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722)
 WARN [Thread-23] 2013-03-19 15:08:08,895 TriggerTask.java (line 62) Could not execute triggers [null]
ERROR [Thrift:2] 2013-03-19 15:08:08,896 CustomTThreadPoolServer.java (line 217) Error occurred during processing of message. 
```

为了进一步诊断，*cassandra-cli*中显示的错误是：

```
 org.apache.thrift.transport.TTransportException
        at org.apache.thrift.transport.TIOStreamTransport.read(TIOStreamTransport.java:132)
        at org.apache.thrift.transport.TTransport.readAll(TTransport.java:84)
        at org.apache.thrift.transport.TFramedTransport.readFrame(TFramedTransport.java:129)
        at org.apache.thrift.transport.TFramedTransport.read(TFramedTransport.java:101)
        at org.apache.thrift.transport.TTransport.readAll(TTransport.java:84)
        at org.apache.thrift.protocol.TBinaryProtocol.readAll(TBinaryProtocol.java:378)
        at org.apache.thrift.protocol.TBinaryProtocol.readI32(TBinaryProtocol.java:297)
        at org.apache.thrift.protocol.TBinaryProtocol.readMessageBegin(TBinaryProtocol.java:204)
        at org.apache.thrift.TServiceClient.receiveBase(TServiceClient.java:69)
        at org.apache.cassandra.thrift.Cassandra$Client.recv_insert(Cassandra.java:839)
        at org.apache.cassandra.thrift.Cassandra$Client.insert(Cassandra.java:823)
        at org.apache.cassandra.cli.CliClient.executeSet(CliClient.java:975)
        at org.apache.cassandra.cli.CliClient.executeCLIStatement(CliClient.java:218)
        at org.apache.cassandra.cli.CliMain.processStatementInteractive(CliMain.java:210)
        at org.apache.cassandra.cli.CliMain.main(CliMain.java:337)
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:37:35.657

在你给出的日志信息中，明确提到了

```
java.lang.ClassCastException: java.util.UUID cannot be cast to java.lang.Integer 
```

为了获得更好的响应，您必须共享脚本和插入代码

# jsp - 将值从 JSP 页面传递到 Servlet 页面

> ID：15497488
> 
> 赞同：-4
> 
> 时间：2013-03-19T10:54:44.547
> 
> 标签：jsp, servlets

这是我的 JSP 页面，我在这里接受一些值，我想将这些值发送到 Servlet，然后存储在 DB 中。任何人都可以帮忙，这种方法是否正确......以及应该在servlet中添加什么来检索那里的值......

```
<html>
    <head>
        <link rel="stylesheet" href="MainCSS.css" type="text/css">
        <title></title>
    </head>
    <body background-color:blue>
        <form action="HelloServlet_new.java" method="POST">
            <div style="width:600px; margin:0 auto;">
                <span style="color:#ffffff;"><span style="font-size: 18px;"><span style="font-family: 'times new roman', times, serif;"><strong><span style="background-color: rgb(0, 0, 255);"><a href="http://My/index_new"></a> cISBN | cAttendance | cFleet |&nbsp;cHome |</span></strong></span></span></span></div>
            <div>
                <span style="font-size: 18px;"><span style="font-family: 'times new roman', times, serif;"><strong>&nbsp;</strong></span></span></div>
            <div style="width:600px; margin:0 auto;">
                Enter Your Message Here: <input type="text" name="message" value="" /><br>
                Enter the Receiver Number: <input type="text" name="receiver" value="" />
                Enter Your Name: <input type="text" name="name" value="" /><br><br>
                Enter Your Number: <input type="text" name="sender" value="" /><br><br>
                Enter Your Mail_id: <input type="text" name="mailid" value="" />
                <input type="submit" name="submit" value="Send" /><br>

            </div>

           <% request.setAttribute("message",request.getParameter("message"));%>
           <% request.setAttribute("receiver",request.getParameter("receiver"));%>
           <% request.setAttribute("name",request.getParameter("name"));%>
            <%request.setAttribute("sender",request.getParameter("sender"));%>
           <% request.setAttribute("mailid",request.getParameter("mailid"));%>

            <h2>Thank You for using Our Service !!!!!!! </h2>
            <jsp:include page="HelloServlet_new" flush="true" />
    </body>
</form>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T13:03:51.200

首先在 web.xml 中映射您的 servlet。在表单的操作字段中，记下与`<url-pattern>`web.xml 中提供的 servlet 匹配的 URL。例如，如果是`/urlPattern`，那么您应该写下：

```
<form action="urlPattern" method="POST"> 
```

之后，在您调用的 servlet 中`doPost()`，您可以通过以下方式检索您的 JSP 页面值：

```
String message = request.getParameter("message");
String receiver = request.getParameter("receiver"); 
```

这就是您在 servlet 中获取值的方式，然后您可以写下数据库事务代码以将值也存储在数据库中。

# css - 在固定容器中排列可变大小 DIV 的最佳方式

> ID：15497489
> 
> 赞同：0
> 
> 时间：2013-03-19T10:54:44.623
> 
> 标签：css, html

我有 9 个大小可变的 div。每个 div 的高度和宽度必须是 200 的倍数（它们可以是方形或矩形）。

用户可以选择任何 div 组合，以便将它们放入 800x800 的盒子中。以下是第一 2 行的一些可能的 DIV 排列（仅作为示例）。

你能否请租赁建议实现它的最佳方法。我尝试将 all 设置为向左浮动，但这留下了一些空白空间。

![可能的安排](../Images/5eb2df92ecf6484bcfd233a8ad3907f3.png)

谢谢，

# java - 编译错误：找不到符号

> ID：15497497
> 
> 赞同：0
> 
> 时间：2013-03-19T10:55:13.123
> 
> 标签：java, arraylist

我试图找出为什么我在 NetBeans 7.2.1 IDE 中创建的程序无法在 Notepad++ 中编译和运行。这只是让我着迷的事情，我想知道为什么会这样。

该程序具有主类 SalaryDemo 和另一个类 Salary，其中包含该程序的 setter 和 getter。除了计算错误外，它运行良好。我很好奇这将如何在 Notepad++ 中运行，并且在设置 Notepad++ 之后，我发现它无法运行。我试图掏出做dos，它做了同样的事情，所以我不认为它是记事本++。

该程序将 ArrayList 用于销售代表和销售代表的年总销售额。由于某种原因，VM 找不到 ArrayList 或 Salary 变量的符号。这是我的理解。我真的很感激这方面的帮助。这是我的第一次，所以放轻松。

这是错误消息，如果您需要任何其他支持文档或代码，我会立即发布。

```
 NPP_EXEC: "Compile and Run"
CD: Matches Current Directory
Current directory: Matches CD: 
javac SalaryDemo.java
Process started >>>
SalaryDemo.java:37: error: cannot find symbol
        ArrayList<Salary> salaryArray = new ArrayList<>(); 
                  ^
  symbol:   class Salary
  location: class SalaryDemo
SalaryDemo.java:37: error: unexpected type
     ArrayList<Salary> salaryArray = new ArrayList<>()
                                                ^
required: class
  found:    <E>ArrayList<E>
  where E is a type-variable:
    E extends Object declared in class ArrayList
SalaryDemo.java:52: error: cannot find symbol
            Salary employee = new Salary(); 
            ^
  symbol:   class Salary
  location: class SalaryDemo
SalaryDemo.java:52: error: cannot find symbol
            Salary employee = new Salary(); 
                                  ^
  symbol:   class Salary
  location: class SalaryDemo
SalaryDemo.java:103: error: cannot find symbol
       Salary calcSalary = new Salary();
       ^
  symbol:   class Salary
  location: class SalaryDemo
SalaryDemo.java:103: error: cannot find symbol
       Salary calcSalary = new Salary();
                               ^
  symbol:   class Salary
  location: class SalaryDemo
6 errors 
```

这是相关代码

```
SalaryDemo (main class)

package salarydemofinal;

// Imports the DecimalFormat class and all java.util classes 
import java.text.DecimalFormat;

SalaryDemo (main class)

// Public class SalaryDemo matches the filename and is accessable 
// by methods outside the SalaryDemo class.
public class SalaryDemo 
{
    public static void main(String[] args)
    {
        // Initialize Scanner.     
        Scanner input = new Scanner(System.in);

        // Initialize DecimalFormat to format percentages. 
        DecimalFormat df = new DecimalFormat("####%"); // Initialize

        // Initialize the Array list and use the Salary class to store and 
        // manipulate elements of the array. 
        ArrayList<Salary> salaryArray = new ArrayList<Salary>(); 
        String newEmployee = "";
        double newSales = 0; 
        double counter; 
        double setSalesDifference; 
        double setTCompDifference;
        double nqDifference;

Salary class

package salarydemofinal;

public class Salary  {

    // Initialize local Salary class variables
    private String name; // Holds employee name
    private double base = 4000; // Holds fixed monthly salary
    private double sales; // Holds annual sales figure data-
    private double calc; // Holds data calculate commission
    private double com = .25;       //Holds commission percentage multiplier
    private double totalComp;   // Holds sum of commission and annual salary data
    private double annualSalary; // Holds data derived from 12 months of base rate
    private double salesTarget = 120000; 
    private double threshold = salesTarget * .80; 
    private double commission; // sets the commission. 
    private double annualCompensation;
    private double acceleratedSales;
    private double notQualified; 
```

这就是我在 Notepad++ 中运行编译器的方式……我确实意识到这不合常理，但是我觉得这应该可行。程序没有那么复杂。

cd "$(CURRENT_DIRECTORY)" javac $(FILE_NAME) java $(NAME_PART)

在我看来，这与您使用 DOS 并尝试编译和运行程序时使用的方法相同。此时，我真正知道的是，包包含一个程序（项目）所需的所有类。package 语句需要在主类（SalaryDemo）和子类 Salary 中匹配。

我试图将它放在 C:\\salarydemofinal 目录中，就像 NetBeans IDE 一样，但没有成功。我知道我可能缺少一些基本的东西。正如我所提到的，这在我看来应该可行。

我考虑了一下，将 Notepad++ 排除在外，转而使用 DOS 尝试编译它，因为我发现另一篇 stackoverflow 文章建议需要一次编译所有 java 文件，例如 javac *.java。我不知道这是否是积极的一步。错误数量减少到 4 个，但这次没有找到 Scanner。这是输出：

SalaryDemo.java:31: 错误: 找不到符号 Scanner input = new Scanner(System.in); ^ 符号：类扫描器位置：类 SalaryDemo SalaryDemo.java:31：错误：找不到符号扫描器输入 = 新扫描器（System.in）；^ 符号：类扫描仪位置：类 SalaryDemo SalaryDemo.java:38：错误：找不到符号 ArrayList SalaryArray = new ArrayList(); ^ 符号：类 ArrayList 位置：类 SalaryDemo SalaryDemo.java:38：错误：找不到符号 ArrayList SalaryArray = new ArrayList(); ^ 符号：类 ArrayList 位置：类 SalaryDemo 4 错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:49:16.623

您需要将该`Salary`类与该类放在同一个包中，`SalaryDemo`或者您需要`SalaryDemo`它`import`。如果它们已经在同一个包中，这意味着你没有编译`Salary`，你需要发布你是如何运行编译器的。

它实际上并没有报告问题发现`ArrayList`，只是`Salary`。当您收到此错误时：

```
SalaryDemo.java:37: error: unexpected type
     ArrayList<Salary> salaryArray = new ArrayList<>()
                                                ^
required: class
  found:    <E>ArrayList<E>
  where E is a type-variable:
    E extends Object declared in class ArrayList 
```

它告诉你的是参数化类型`ArrayList<Salary>`不存在。但它不存在，因为`Salary`不存在。这只是先前错误的结果。

# jquery - 使用 jQuery 幻灯片，如何使用 mouseenter/hover 显示标题？

> ID：15497498
> 
> 赞同：0
> 
> 时间：2013-03-19T10:55:14.627
> 
> 标签：jquery, html, slideshow, caption

我对 jQuery 很陌生，现在，我正在做一个学校项目，我正在制作一个小型网站。我不认为我们被允许使用任何插件，因为这个项目是为了表明我们可以在基本层面上独立地理解和使用 jQuery。

无论如何，我设法（在[Snook 的“最简单的 jQuery 幻灯片”教程](http://snook.ca/archives/javascript/simplest-jquery-slideshow)的帮助下）创建了一个简单的幻灯片。

现在我想为这个幻灯片添加一些功能。我想以某种方式使用字幕，例如在悬停或鼠标输入时显示字幕。我尝试搜索和测试各种东西，但我想我还没有足够的经验来找到解决方案。“使代码适应另一个上下文”，比如找到对我有用的东西，*我*仍然觉得有点困难。

那么，如果我想在悬停图像时显示某种标题，那么最好的解决方案是什么？我思想开放，只要代码不太复杂。

这是HTML：

一些文字。

```
<div id="gallery">
    <img src="img/gallery0.jpg" />
    <img src="img/gallery1.jpg" />
    <img src="img/gallery2.jpg" />
    <img src="img/gallery3.jpg" />
    <img src="img/gallery4.jpg" />
</div> 
```

和 jQuery：

```
$('#gallery img:gt(0)').hide(); //Hiding all but the first img

setInterval(function() { 
    $('#gallery :first-child').fadeOut().next('img').fadeIn().end().appendTo('#gallery'); 
//Fade out first image, fade in the next and add the first image to the end of #gallery
}, 4000); 
```

要查看此幻灯片的工作原理，这是我的[JSFiddle](http://jsfiddle.net/8tkEM/)。

我一定是活在某种梦里，想着这样可行；

```
$('#caption').hide();
$('#gallery').mouseenter(function(){
    $('#caption').show();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:58:36.073

```
$('#caption').show(); you missed '$'

$('#gallery').mouseenter(function(){
    $('#caption').show();
}); 
```

# sql-server - 在 SQL Server 的事务日志中完成回滚后，如何查找更新事务的更改 delta 值

> ID：15497502
> 
> 赞同：4
> 
> 时间：2013-03-19T10:55:19.420
> 
> 标签：sql-server, dbcc

我正在尝试了解 mssql 交易日志的内部结构。我进行以下交易

```
Begin TRANSACTION
update xyz1 set a=6
Rollback TRANSACTION 
```

'a' 列的初始值为 5 。所以发现事务的结果如下图使用

```
SELECT 
    Operation, [RowLog Contents 0], [RowLog Contents 1, AllocUnitName, [Page ID],
    [Slot ID], [Offset in Row],[Transaction ID]
FROM 
    sys.fn_dblog(NULL,NULL)

operation         rowcontent0  row content 1     AllocUnitName  Page ID        Slot ID  Offset     
LOP_BEGIN_XACT  NULL    NULL        NULL        NULL              NULL  
LOP_MODIFY_ROW  0x01    0x06        dbo.xyz1        0001:0000022e   0   4  
LOP_MODIFY_ROW  0x  0x01        dbo.xyz1        0001:0000022e   0   4  
LOP_ABORT_XACT  NULL    NULL        NULL        NULL              NULL 
```

正如我们从上面的值看到的那样，数据从 1 更改为 6，并且由于发生回滚，它再次更改为 1。

然后要获取内存信息，我使用以下命令，其中 558(22e) 是页面 id，可以在上表中找到

```
dbcc traceon(3604)
dbcc page(lumrecon,1,558,3) 
```

转到 slot 0 和 rowoffset 4 以查看更改的数据

```
00000000:   10000800 01000000 010000†††††††††††††........... 
```

我们从内存转储中观察到，我们只找到回滚事务的值，即 a =1。

但我的问题是我们如何在发生的交易中找到原始值，即 6。这是微软不故意将信息写入日志的行为还是有什么办法？请建议。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:55:48.320

日志行中的“0x06”

```
LOP_MODIFY_ROW  0x01    0x06        dbo.xyz1 
```

是写入列的新值。由于事务被回滚，关于“6”的信息现在只在日志中，不在页面缓冲区（内存）中。在内存中，总是有行的最新值（包括未完成的事务），可能受到逻辑锁的保护，有时还受到闩锁的保护。

# java - Eclipse 中的特定注释块

> ID：15497504
> 
> 赞同：2
> 
> 时间：2013-03-19T10:55:21.303
> 
> 标签：java, eclipse

我经常看到这样的评论块：

```
// ===========================================================
// Methods
// =========================================================== 
```

有什么方法可以快速将它们添加到 Eclipse 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T10:58:30.843

您可以尝试创建一个代码模板： -> `Window`-> `Preferences`-> `Java`-> `Editor`-> `Templates`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T10:58:31.647

您可以在 Eclipse 中添加自己的注释模板。我认为您可以在以下情况下执行此操作：`Main Menu -> Window -> Preferences -> Java -> Code Style -> Code Templates -> Configure generated code and comments`.

看看这些说明[here](http://www.java-tips.org/other-api-tips/eclipse/how-to-add-your-own-comment-template-in-eclipse.html)和这个[答案](https://stackoverflow.com/a/2604456/395659)我认为这正是你所需要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T10:58:48.107

Ctrl-/ 切换“//”注释，Ctrl-Shift-/ 切换“/* */”注释。无论如何，至少对于 Java 而言——其他工具可能有不同的快捷方式。

Ctrl-\ 将删除任一评论块，但不会添加评论。

# html - CSS - 使内容对齐

> ID：15497505
> 
> 赞同：0
> 
> 时间：2013-03-19T10:55:22.400
> 
> 标签：html, css

我有 3 个 td 标签，其中包含一些文本和文本后的按钮。即使 td 包含不同数量的文本，我也希望按钮对齐。

我不想在段落部分设置固定高度，因为这会限制可以输入的文本数量。有没有办法做到这一点？

这是它的屏幕截图：

[http://s23.postimage.org/cnp1f70vv/Untitled_1.jpg](http://s23.postimage.org/cnp1f70vv/Untitled_1.jpg)

这是 HTML 代码（道歉）：

```
<td width="300" valign="top" height="114">
    <div class="imageTextOverlay_1">BOOK A VISIT</div>
    <a href="/visit-us.aspx">
    <img width="300" height="136" alt="Visit Beaufort Court" src="/media/1281571/visit_us.jpg">
    </a>
<h3>Visit Beaufort Court</h3>
<p>If you would like to find out more about wind energy, solar power, borehole cooling or biomass then come and visit us at Beaufort Court. We welcome schools, colleges, universities, professional bodies and community groups.</p>
<a class="imageButtonOverlay" href="/visit-us.aspx">Book Now >></a>
</td> 
```

这是按钮的CSS：

```
.imageButtonOverlay {
    background-color: #78A22F;
    border-radius: 5px 5px 5px 5px;
    color: #FFFFFF;
    float: right;
    font-family: Arial,Helvetica,sans-serif;
    font-size: 12px;
    font-weight: bold;
    margin: 5px 0 20px;
    padding: 5px 7px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:00:15.140

由于您已经在使用表格，因此您可以简单地将按钮分隔到新行上：

```
<table>
    <tbody>
        <tr>
            <td><!-- First paragraph --></td>
            <td><!-- Second paragraph --></td>
            <td><!-- Third paragraph --></td>
        </tr>
        <tr>
            <td><!-- First button --></td>
            <td><!-- Second button --></td>
            <td><!-- Third button --></td>
        </tr>
    </tbody>
</table> 
```

[JSFiddle 示例](http://jsfiddle.net/QLePR/1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T11:00:18.760

您可以通过 CSS 设置按钮的位置`position:absolute`，如下所示：

```
td {
  position:relative;
  padding-bottom:40px;
}
td .imageButtonOverlay {
  position:absolute;
  bottom:10px;
  right:10px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T11:01:30.273

添加`position:relative`到`td`和`position:absolute`到`a class`

```
td{
    background:yellow;
    position:relative
}
.imageButtonOverlay{
    position:absolute;
    bottom:0
} 
```

**[演示](http://jsfiddle.net/Xc3RK/2/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T11:02:27.380

```
<table border="0">
  <tbody>
    <tr>
      <td>Paragraph 1</td>
      <td>Paragraph 2</td>
      <td>Paragraph 3</td>
    </tr>
    <tr>
      <td style="text-align:right"><input type="button" value="Button 1" /></td>
      <td style="text-align:right"><input type="button" value="Button 2" /></td>
      <td style="text-align:right"><input type="button" value="Button 3" /></td>
    </tr>
  </tbody>
</table> 
```

# java - 在 Java 程序中杀死 PetalsESB 服务器

> ID：15497506
> 
> 赞同：-1
> 
> 时间：2013-03-19T10:55:27.830
> 
> 标签：java, ubuntu, groovy, kill, pid

我的问题：我在 Java / Groovy 中运行一个程序。在这个程序中，我启动了一个 PETALS ESB 服务器，它也在 Java 上运行。我只想杀死服务器，然后在同一个 java 程序中再次启动他。在 Windows 中，我会在新窗口中运行服务器并终止新窗口，但在 ubuntu 中，每个终端共享相同的 PID。pkill java 杀死服务器+程序。有没有办法在运行另一个 java 程序的同时杀死一个 java 程序？我是 groovy 和 ant 的新手，所以也许有一种方法可以模拟“ctrl+c”来杀死服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:58:27.707

为什么不调用“petals-esb stop”命令行呢？

# .net - 如何使用中等质量的ffmpeg将vob转换为wmv？

> ID：15497514
> 
> 赞同：2
> 
> 时间：2013-03-19T10:55:45.703
> 
> 标签：.net, video, ffmpeg, wmv, vob

如果用作参数：

```
string.Format("-i {0} -vcodec wmv2 -acodec wmav2 -sameq {1}", inputFileName, outPutFileName) 
```

输出文件很大。如果使用：

```
string.Format("-i {0} -vcodec wmv2 -acodec wmav2 {1}", inputFileName, outPutFileName) 
```

输出文件质量非常低。如何使用 ffmpeg 获得中等质量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:02:30.307

解决了。编码质量由“-qmax X”参数控制，其中“X”是1到10之间的数字。1表示质量相同，10表示质量差。

# c# - 在 C# 中声明两个具有不同类型但名称相似的属性

> ID：15497516
> 
> 赞同：-7
> 
> 时间：2013-03-19T10:55:46.627
> 
> 标签：c#, properties

我可以在 C# 中声明两个具有不同类型但名称相似的属性吗？像这样的东西：

```
public class Types
{
    public string Element
        {
            get { return ""; }
        }
    public int Element
        {
            get { return 0; }
        }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T10:57:42.420

*同名*？是的。*同名*？_ 不。

唯一可以在同一个类中声明两个具有相同名称的成员的情况是使用构造函数和方法——并且对于每个重载，它们必须具有不同的签名。

从 C# 4 规范，第 10.3 节：

> 常量、字段、属性、事件或类型的名称必须不同于在同一类中声明的所有其他成员的名称。

如果允许这样*做*，那将非常混乱并导致明显模棱两可的代码：

```
Types types = new Types();
object x = types.Element; // What would this do? 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T10:59:51.453

您需要运行您编写的代码并收到错误，但您可能需要类似于下面的内容

```
 public class Types<T>
    {
        public T Element
        {
            get { return default(T); }
        }

    } 
```

# c# - 如何在gridview中动态添加html控件“锚标签”？

> ID：15497518
> 
> 赞同：2
> 
> 时间：2013-03-19T10:55:50.033
> 
> 标签：c#, asp.net, html, gridview, anchor

我已使用以下代码将 ASP 按钮添加到 GridView：

```
using System;
using System.Data;
using System.Configuration;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;
using System.ComponentModel;
using System.Collections;
/// <summary>
/// Summary description for DynamicTemplate
/// </summary>
public class DynamicTemplate : System.Web.UI.ITemplate 
```

{

```
System.Web.UI.WebControls.ListItemType templateType;
System.Collections.Hashtable htControls = new System.Collections.Hashtable();
System.Collections.Hashtable htBindPropertiesNames = new System.Collections.Hashtable();
System.Collections.Hashtable htBindExpression = new System.Collections.Hashtable();

public DynamicTemplate(System.Web.UI.WebControls.ListItemType type)
{
    templateType = type;
}

public void AddControl(WebControl wbControl, String BindPropertyName, String BindExpression)
{
    htControls.Add(htControls.Count, wbControl);
    htBindPropertiesNames.Add(htBindPropertiesNames.Count, BindPropertyName);
    htBindExpression.Add(htBindExpression.Count, BindExpression);

}

public void InstantiateIn(System.Web.UI.Control container)
{
    PlaceHolder ph = new PlaceHolder();

    for (int i = 0; i < htControls.Count; i++)
    {

        //clone control 
        Control cntrl = CloneControl((Control)htControls[i]);

        switch (templateType)
        {
            case ListItemType.Header:
                break;
            case ListItemType.Item:
                ph.Controls.Add(cntrl);
                break;
            case ListItemType.AlternatingItem:
                ph.Controls.Add(cntrl);
                ph.DataBinding += new EventHandler(Item_DataBinding);
                break;
            case ListItemType.Footer:
                break;
        }
    }
    ph.DataBinding += new EventHandler(Item_DataBinding);

    container.Controls.Add(ph);

}
public void Item_DataBinding(object sender, System.EventArgs e)
{
    PlaceHolder ph = (PlaceHolder)sender;
    GridViewRow ri = (GridViewRow)ph.NamingContainer;
    for (int i = 0; i < htControls.Count; i++)
    {
        if (htBindPropertiesNames[i].ToString().Length > 0)
        {
            Control tmpCtrl = (Control)htControls[i];
            String item1Value = ""; //(String)DataBinder.Eval(ri.DataItem, htBindExpression[i].ToString());
            if (tmpCtrl.ID == "btnEdit")
            {
                item1Value = "Edit"; //(String)DataBinder.Eval(ri.DataItem, htBindExpression[i].ToString());
            }
            else if (tmpCtrl.ID == "btnDelete")
            {
                item1Value = "Delete"; //(String)DataBinder.Eval(ri.DataItem, htBindExpression[i].ToString());

            }
            else
            {
                Guid value = new Guid(DataBinder.Eval(ri.DataItem, htBindExpression[i].ToString()).ToString());
                String valueString = value.ToString();
                item1Value = valueString;
            }
            Control ctrl = ph.FindControl(tmpCtrl.ID);
            Type t = ctrl.GetType();
            System.Reflection.PropertyInfo pi = t.GetProperty(htBindPropertiesNames[i].ToString());

            pi.SetValue(ctrl, item1Value.ToString(), null);
        }

    }

}

private Control CloneControl(System.Web.UI.Control src_ctl)
{
    Type t = src_ctl.GetType();
    Object obj = Activator.CreateInstance(t);
    Control dst_ctl = (Control)obj;
    PropertyDescriptorCollection src_pdc = TypeDescriptor.GetProperties(src_ctl);
    PropertyDescriptorCollection dst_pdc = TypeDescriptor.GetProperties(dst_ctl);

    for (int i = 0; i < src_pdc.Count; i++)
    {

        if (src_pdc[i].Attributes.Contains(DesignerSerializationVisibilityAttribute.Content))
        {

            object collection_val = src_pdc[i].GetValue(src_ctl);
            if ((collection_val is IList) == true)
            {
                foreach (object child in (IList)collection_val)
                {
                    Control new_child = CloneControl(child as Control);
                    object dst_collection_val = dst_pdc[i].GetValue(dst_ctl);
                    ((IList)dst_collection_val).Add(new_child);
                }
            }
        }
        else
        {
            dst_pdc[src_pdc[i].Name].SetValue(dst_ctl, src_pdc[i].GetValue(src_ctl));
        }
    }

    return dst_ctl;

} 
```

}

代码文件是::

gridview的绑定方法：

```
 TemplateField t = new TemplateField();
        DynamicTemplate mt = new DynamicTemplate(ListItemType.Item);

        Button btnEdit = new Button();
        btnEdit.ID = "btnEdit";
        btnEdit.Visible = true;
        btnEdit.CommandArgument = PrimaryKey;
        btnEdit.OnClientClick = "return confirm_Edit();";
        btnEdit.Text = " Submit";
        btnEdit.CssClass = "EditButton";
        btnEdit.Style.Add("margin-right", "5px");
        mt.AddControl(btnEdit, "Text", "Edit");

        Button btnDelete = new Button();
        btnDelete.ID = "btnDelete";
        btnDelete.OnClientClick = "return confirm_delete();";
        btnDelete.Visible = true;
        btnDelete.Text = " Submit";
        btnDelete.CssClass = "DeleteButton";
        mt.AddControl(btnDelete, "Text", "Delete");

        t.ItemTemplate = mt;
        t.HeaderText = "Activity";
        GridView1.Columns.Add(t);
        GridView1.DataSource = dtOutPutResult;
        GridView1.DataBind(); 
```

现在我面临以下问题：如何在 ASP Button 的位置添加 HTML 锚标记到网格视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:09:14.190

```
HyperLink lnkDelete = new HyperLink();
lnkDelete.Text = "Link text";
lnkDelete.NavigateUrl = "deletepage.aspx"; 
```

你有没有尝试过这样的事情？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T11:37:54.617

我已添加如下：

```
 TemplateField t = new TemplateField();
        DynamicTemplate mt = new DynamicTemplate(ListItemType.Item);

        HtmlImage img = new HtmlImage();
        img.ID = "btnEdit";
        img.Src = "~/images/image.gif";
        img.Alt = "An image";
        img.Attributes.Add("class", "cssimage");
        mt.AddControl(img, "Text", "Edit");
        t.ItemTemplate = mt;
        t.HeaderText = "Activity";
        GridView1.Columns.Add(t);
        GridView1.DataSource = dtOutPutResult;
        GridView1.DataBind(); 
```

感谢您的回答

# c++ - 使用 C++ 读取二进制文件时出错

> ID：15497519
> 
> 赞同：0
> 
> 时间：2013-03-19T10:55:52.347
> 
> 标签：c++, binary, int

我尝试在一个包含标头`char`和`int`&`double`之后的二进制文件中读取：

```
// open file
int pos = 0,n;
char str1,str2;

//string str;
ifstream fid(pfad.c_str(),std::ios::binary);
if (fid.good() != 1) {
    printf(" ++ Error: The elegant bunch file %s doesn't exist.\n",pfad.c_str());
    return 1;
}

// cut the header
while (pos<5) {
    if (fid.eof()) {
        printf(" ++ Error: elegant bunch file is strange\n");
        return 1;
    }

    fid >> str1;

    switch (pos) {
        case 0: str2 = '&'; break;
        case 1: str2 = 'd'; break;
        case 2: str2 = 'a'; break;
        case 3: str2 = 't'; break;
        case 4: str2 = 'a'; break;
    }

    if (str1 == str2){
        pos ++;
    } else {
        pos = 0;
    }
}

   // Read out the data
   fid.seekg(19,ios_base::cur);

std::cout << fid.tellg() << std::endl;
fid >> n;
std::cout << fid.tellg() << std::cout;

printf("\n\n%i\n\n",n);
printf("\nOK\n");
return 0; 
```

我的阅读字符`fid >> str1`效果很好。如果我尝试使用 a 来执行此操作，`int`它会以某种方式产生奇怪的行为。然后输出得到

```
813

-10x6c4f0484

0 
```

其中第一个数字是文件中的位置，第二个应该是相同的，但它看起来像一个指向我的指针。任何人都可以尝试澄清我的困惑吗？

已经提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:31:22.857

`std::operator>>(std::istream&, int&)`尝试从字符流中*解析*整数，它不读取二进制数据。您需要使用该[`std::istream::read(char*, std::streamsize)`](http://en.cppreference.com/w/cpp/io/basic_istream/read)功能。

# ruby-on-rails-3 - 未知操作 - 找不到控制器的操作

> ID：15497532
> 
> 赞同：1
> 
> 时间：2013-03-19T10:56:31.173
> 
> 标签：ruby-on-rails-3

我已经阅读了一些类似的问题/答案，但找不到我的错误的任何答案。

我有一个用于输入工作小时数的表格和一个用于编辑小时记录的表格。根据 Rails 指南，添加和编辑都共享部分内容。我的添加（新）表单工作正常。提交编辑表单时，我收到错误/错误：

```
Unknown Action
The action '11' could not be found for HoursController 
```

我在这个屏幕上没有其他输出。

这些屏幕显示的 url 是：

```
http://localhost:3000/hours/11/edit 
```

提交后：

```
http://localhost:3000/hours/11 
```

我的编辑表单的表单标签是：

```
<%= form_for(:hour, :url => {:action => 'update', :id => @hour.id}) do |f| %> 
```

这应该转到“小时”控制器，转到“更新”操作。也许我的控制器有其他问题，但添加/新表单工作正常......令人困惑......

我的控制器：

```
class HoursController < ApplicationController

  before_filter :confirm_logged_in

  def index
  end

  def list
    if !params[:job_id].nil?
      @hours = Hour.where(["job_id = ?",params[:job_id]]).date_sorted
    else
      @hours = Hour.date_sorted
    end
  end

  def show
    @hour = Hour.find(params[:id])
  end

  def new
    @hour = Hour.new
  end

  def create
    @hour = Hour.new(params[:hours])
    if @hour.save
      job = Job.find(params[:hours][:job_id])
      flash[:notice] = "You have just entered hours for #{job.name}"
      redirect_to(:action => "list", :job_id => params[:hours][:job_id])
    else
      flash[:notice] = "There were one or more problems with your form. Please try again!"
      render('new')
    end
  end

  def edit
    @hour = Hour.find(params[:id])
  end

  def update
    @hour=Hour.find(params[:id])
    if @hour.update_attributes(params[:hour])
      flash[:notice] = "You have just updated an Hours entry"
      redirect_to(:action => "list", :job_id => params[:hours][:job_id])
    else
      render("edit")
    end
  end

  def delete
     @hour = Hour.find(id)
  end

  def destroy
    Hour.find(params[:id]).destroy
    flash[:notice] = "Hours Deleted Successfully!"
    redirect_to(:action => 'list')
  end

  def search
    if params[:job][:id]
      @job = Job.find(params[:job][:id])
      redirect_to(:action => "list", :job_id => @job.id)
    end
  end

end 
```

小时部分的我的路线文件

```
resources :hours do
    collection do
      get :list
      get :delete
    end
end 
```

这给了我：

```
list_hours GET    /hours/list(.:format)                  hours#list
     delete_hours GET    /hours/delete(.:format)                hours#delete
            hours GET    /hours(.:format)                       hours#index
                  POST   /hours(.:format)                       hours#create
         new_hour GET    /hours/new(.:format)                   hours#new
        edit_hour GET    /hours/:id/edit(.:format)              hours#edit
             hour GET    /hours/:id(.:format)                   hours#show
                  PUT    /hours/:id(.:format)                   hours#update
                  DELETE /hours/:id(.:format)                   hours#destroy 
```

任何关于如何解决这个问题的想法都将不胜感激。--jc

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:09:49.527

像这样试试

```
 <% form_for @hours do |f| %> 
```

要不然

```
<% form_for :hours, :url => 
     url_for(:action => "update", :id => @hours) do |f| %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-02T22:03:08.007

我的情况略有不同，因为我有一条自定义路线，但它可能会帮助其他人（或未来的我）。

我一直收到这个错误，直到我将它添加`method: :post`到表单参数中。

路线：

```
resources :hours do
  member do
    post :fix
  end
end 
```

html.erb

```
form_for @hour, url: fix_hour_path(@hour), method: :post do
  ...
end 
```

# css - 从移动和固定位置的左侧菜单滑动

> ID：15497537
> 
> 赞同：0
> 
> 时间：2013-03-19T10:56:48.157
> 
> 标签：css, mobile

我无法在普通浏览器上复制这个问题，但它发生在移动设备上。

我使用左侧菜单中的 facebook 样式幻灯片，然后将主屏幕推到右侧，我还将 a 应用`position:fixed`到主屏幕，因此我可以滚动左侧的菜单，而无需移动现在推到的主屏幕。

问题是当我这样做时，右侧的所有内容都会被压扁，例如，在主屏幕上使用`width:100%`的主页图像会缩小以适应屏幕右侧的微小空间。文本也都试图适应狭小的空间。这仅在主页变得固定时发生。

似乎`width:auto`是导致问题的原因。

这是jquery...

```
$(document).ready(function() {
$('.btn-navbar ').toggle( 
function() {
    $('#pop-out-left').animate({ left:0 }, 100);
    $('.container').animate({ left:'87%' }, 100);
     $('.container').addClass("fixed-position");
    $('#footer').animate({ left:'87%' }, 100);
    $('#footer').addClass("display-none");
    $('#language_strip').addClass("fixed-position");

}, 
function() {
    $('#pop-out-left').animate({ left: '-87%' }, 100);
    $('.container').animate({ left: 0 }, 100);
     $('.container').removeClass("fixed-position");
    $('#footer').animate({ left: 0 }, 100);
    $('#footer').removeClass("display-none");
    $('#language_strip').removeClass("fixed-position"); 
    $(document).scrollTop(0);
}
); 
```

CSS...

```
.fixed-position {
position:fixed !important;
}

#pop-out-left { 
overflow:hidden;
position:absolute; 
width: 80%; 
border: 1px dotted gray; 
background: #fff; 
color: white; 
top:0px; 
left: -82%; 
height:auto;
min-height:600px;
padding-bottom: 00%; 
```

}

```
.container {
width: auto;
 } 
```

# c# - 如何将指数格式化为从导出到excel的数字？

> ID：15497542
> 
> 赞同：0
> 
> 时间：2013-03-19T10:57:18.887
> 
> 标签：c#, asp.net

我正在将数据表导出到 Excel，其中一列在数据表中有电话号码，但在 Excel 中导出后，电话号码列显示为指数。

我需要数字，如何解决这个问题？

```
 string fileName = "File" + DateTime.Now.ToString("MMddyyyy_HHmmss") + ".xls";
        Response.AddHeader("content-disposition", "attachment;filename=" + fileName);
        //Response.AddHeader("content-disposition", "attachment;filename=File.xls");
        Response.ContentType = "application/vnd.ms-excel";

        StringWriter stringWriter = new StringWriter();
        HtmlTextWriter htmlWrite = new HtmlTextWriter(stringWriter);
        DataGrid dataExportExcel = new DataGrid();
        dataExportExcel.ItemDataBound += new DataGridItemEventHandler(dataExportExcel_ItemDataBound);
        dataExportExcel.DataSource = dt;
        dataExportExcel.DataBind();
        dataExportExcel.RenderControl(htmlWrite);
        System.Text.StringBuilder sbResponseString = new System.Text.StringBuilder();
        sbResponseString.Append("<html xmlns:v=\"urn:schemas-microsoft-com:vml\" xmlns:o=\"urn:schemas-microsoft-com:office:office\" xmlns:x=\"urn:schemas-microsoft-com:office:xlExcel8\" xmlns=\"http://www.w3.org/TR/REC-html40\"> <head></head> <body>");
        sbResponseString.Append(stringWriter + "</body></html>");
        Response.Write(sbResponseString.ToString());
        Response.End(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T12:24:23.650

将以下**样式**添加到您的 HTML 标记中，它将帮助您..

```
<style> table { mso-number-format:'0'; } </style> 
```

**像这样 ：**

```
sbResponseString.Append("<html xmlns:v=\"urn:schemas-microsoft-com:vml\" xmlns:o=\"urn:schemas-microsoft-com:office:office\" xmlns:x=\"urn:schemas-microsoft-com:office:xlExcel8\" xmlns=\"http://www.w3.org/TR/REC-html40\"> <head><style> td { mso-number-format:'0'; } </style></head> <body>"); 
```

**完整代码：**

```
 protected void btnExcel_Click(object sender, EventArgs e)
    {
        DataTable dt = new DataTable();
        dt.Clear();
        dt.Columns.Add("Phone");
        dt.Columns.Add("Name");
        DataRow Sample = dt.NewRow();
        Sample["Phone"] = 125316245612456124;
        Sample["Name"] = "Pandian";
        dt.Rows.Add(Sample);
        GetExcel(dt);            
    }
    public void GetExcel(DataTable dt)
    {
        string fileName = "File" + DateTime.Now.ToString("MMddyyyy_HHmmss") + ".xls";
        Response.AddHeader("content-disposition", "attachment;filename=" + fileName);
        Response.ContentType = "application/vnd.ms-excel";
        StringWriter stringWriter = new StringWriter();
        HtmlTextWriter htmlWrite = new HtmlTextWriter(stringWriter);
        DataGrid dataExportExcel = new DataGrid();
        dataExportExcel.DataSource = dt;
        dataExportExcel.DataBind();
        dataExportExcel.RenderControl(htmlWrite);
        System.Text.StringBuilder sbResponseString = new System.Text.StringBuilder();
        sbResponseString.Append("<html xmlns:v=\"urn:schemas-microsoft-com:vml\" xmlns:o=\"urn:schemas-microsoft-com:office:office\" xmlns:x=\"urn:schemas-microsoft-com:office:xlExcel8\" xmlns=\"http://www.w3.org/TR/REC-html40\"> <head><style> table { mso-number-format:'0'; } </style></head> <body>");
        sbResponseString.Append(stringWriter + "</body></html>");
        Response.Write(sbResponseString.ToString());
        Response.End();
    } 
```

**Excel输出：**

![Excel 输出](../Images/d1513bb45e7aa1f717ca4c6f2feed324.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T11:00:32.040

您可以使用`NumberValue and NumberFormat properties`

这是一个示例，设置您的范围

```
yourSheet.Range[".."].NumberValue = 1234.5678;
yourSheet.Range[".."].NumberFormat = "0.00"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-11T09:57:23.480

使用这个 td { mso-number-format:"@"; }

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T11:25:35.203

您可以在电话号码前加上一个单引号，然后再将其写入电子表格的单元格。

像“'1234567890”而不是“1234567890”

谢谢

# ios - iOS 5 中的 UIViewAnimationOptionTransitionCrossDissolve

> ID：15497545
> 
> 赞同：0
> 
> 时间：2013-03-19T10:57:24.253
> 
> 标签：ios, cocoa-touch, core-animation

谁能给我一个例子，显示使用`UIViewAnimationOptionTransitionCrossDissolve`两个图像的交叉溶解效果。

我搜索了很多，但我找不到任何好的例子。

我可以举一些例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:01:54.583

以下代码是测试，创建两个 UIImageView 并将它们重叠还创建一个图像名称数组，然后对将在图像之间切换的下一个 (tag = 1) 和上一个 (tag = 0) 按钮使用以下操作：

```
- (void) switchImagesHandler:(int *)sender {
    UIButton *btn = (UIButton *)sender;
    switch (btn.tag) {
    case 0:
        if (currentImg != 0) {
            currentImg--;
            [UIView animateWithDuration:0.3f animations:^{
                [firstImage setAlpha:0];
            }];

            [UIView animateWithDuration:0.3f animations:^{
                [firstImage setAlpha:1];
                [firstImage setImage:[UIImage imageNamed:[imagesArray objectAtIndex:currentImg]]];
            }completion:^(BOOL finished) {
                [secondImage setImage:[UIImage imageNamed:[imagesArray objectAtIndex:currentImg]]];
            }];
        }
        break;
    case 1:
        if (currentImg != [imagesArray count]) {
            currentImg++;
            [UIView animateWithDuration:0.3f animations:^{
                [firstImage setAlpha:0];
            }];
            [UIView animateWithDuration:0.3f animations:^{
                [firstImage setAlpha:1];
                [firstImage setImage:[UIImage imageNameds:[imagesArray objectAtIndex:currentImg]]];
            } completion:^(BOOL finished) {
                [secondImage setImage:[UIImage imageNameds:[imagesArray objectAtIndex:currentImg]]];
            }];
        }
        break;
    default:
        break;
    }
} 
```

# r - 将月份添加到 R 中 data.table 的 IDate 列

> ID：15497547
> 
> 赞同：4
> 
> 时间：2013-03-19T10:57:46.633
> 
> 标签：r, datetime, data.table

我一直在使用 data.table 来处理我使用 data.frames 的几乎所有内容，因为它在大型内存数据（数百万行）上要快得多。但是，我不太确定如何在不使用 apply 的情况下将天或月添加到 IDate 列（这非常慢）。

一个最小的例子：

```
dates = c("2003-01-01", "2003-02-01", "2003-03-01", "2003-06-01", "2003-12-01", 
          "2003-04-01", "2003-05-01", "2003-07-01", "2003-09-01", "2003-08-01")
dt = data.table(idate1=as.IDate(dates)) 
```

现在，假设我想创建一个日期提前 6 个月的列。通常，对于单个 IDate，我会这样做：

```
seq(dt$idate1[1],by="6 months",length=2)[2] 
```

但这不起作用，因为 from= 的长度必须为 1：

```
dt[,idate2:=seq(idate1,by="6 months",length=2)[2]] 
```

有没有一种有效的方法来在 dt 中创建列 idate2？

非常感谢，RR

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T11:09:36.593

一种方法是使用`mondate`包并将月份添加到其中，然后将其转换回`iDate`类对象。

```
require(mondate)
dt = data.table(idate1=as.IDate(dates))
dt[, idate2 := as.IDate(mondate(as.Date(idate1)) + 6)]

#         idate1     idate2
#  1: 2003-01-01 2003-07-01
#  2: 2003-02-01 2003-08-02
#  3: 2003-03-01 2003-09-01
#  4: 2003-06-01 2003-12-02
#  5: 2003-12-01 2004-06-01
#  6: 2003-04-01 2003-10-02
#  7: 2003-05-01 2003-11-01
#  8: 2003-07-01 2004-01-01
#  9: 2003-09-01 2004-03-02
# 10: 2003-08-01 2004-02-01 
```

虽然，我想可能还有其他更好的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T12:08:53.187

你可以使用`lubridate`，

```
 library(lubridate)
 dt[, idate2 := as.IDate(idate1 %m+% months(6))]
        idate1     idate2
 1: 2003-01-01 2003-07-01
 2: 2003-02-01 2003-08-01
 3: 2003-03-01 2003-09-01
 4: 2003-06-01 2003-12-01
 5: 2003-12-01 2004-06-01
 6: 2003-04-01 2003-10-01
 7: 2003-05-01 2003-11-01
 8: 2003-07-01 2004-01-01
 9: 2003-09-01 2004-03-01
10: 2003-08-01 2004-02-01 
```

# css - 将输入占位符颜色更改为更暗

> ID：15497550
> 
> 赞同：24
> 
> 时间：2013-03-19T10:57:52.070
> 
> 标签：css, input, textarea, placeholder

按照这篇文章（[样式文本输入占位符](https://stackoverflow.com/questions/14617200/style-text-input-placeholder)），我可以将文本输入占位符的颜色更改为红色。但它始终是浅红色，而不是完全红色。

有没有办法让它完全变成红色？

**更新**

Chrome 上的颜色是红色（这是正确的），Firefox 上的颜色不是红色，它是浅红色或模糊的，我猜到了。

![http://i279.photobucket.com/albums/kk132/svincoll4/2013-03-19_181239_zps84166305.png](../Images/0de9f99cfc4894bda767010ef6b14600.png)

* * *

编辑（来自 OP 答案）：

请查看此示例（[http://jsfiddle.net/LQkQG/），Chrome](http://jsfiddle.net/LQkQG/)上的颜色为红色，而`light-red`Firefox 上的颜色为红色。我希望 Firefox 上的颜色与 Chrome 相同。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-03-23T11:53:43.123

我发现您需要覆盖不透明度。

```
::-webkit-input-placeholder { /* WebKit browsers */
    color:    red;
     opacity: 1 !important;
} 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-03-19T11:00:23.657

是的，通过 HEX（十六进制）设置它的值，您可以更好地控制要使用的颜色。鲜红色（尽可能红色）的颜色是`#FF0000`

然而，Firefox 是一个叛逆者，需要被告知使用什么不透明度。

作为参考，请查看[此图表](http://html-color-codes.com/)

```
::-webkit-input-placeholder {
    color: #FF0000;
    opacity: 1 !important; /* for older chrome versions. may no longer apply. */
}

:-moz-placeholder { /* Firefox 18- */
    color: #FF0000;
    opacity: 1 !important;
}

::-moz-placeholder {  /* Firefox 19+ */
    color: #FF0000;
    opacity: 1 !important;
}

:-ms-input-placeholder {  
   color: #FF0000;
} 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-03-19T10:59:48.310

输入颜色的十六进制值。

也许使用像[http://www.colorpicker.com/](http://www.colorpicker.com/)这样的工具？

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-03-19T11:03:44.923

访问：[http ://www.w3schools.com/html/html_colors.asp](http://www.w3schools.com/html/html_colors.asp)

```
<html>
<head>
<style type="text/css">

    input, textarea { color: #000; }
    .placeholder { color: #aaa; }
</style>
</head>
<body>
<form action="" method="post">

            <input type="text" name="user" placeholder="enter a text" />
            <input type="submit" value="submit" onclick="test()" />
</form> 
```

代替颜色代码，您可以编写您想要的任何颜色

# java - 作为 maven 构建的一部分将字符串转换为 unicode

> ID：15497552
> 
> 赞同：1
> 
> 时间：2013-03-19T10:57:57.223
> 
> 标签：java, maven, unicode, build

我有一些本地化资源文件（例如messages_es.properties），它们需要采用unicode 格式才能在浏览器中正确显示。为了避免存储资源文件的 unicode 和非 unicode* 版本，我想将转换为 unicode 任务合并到 maven 构建中。有没有简单的方法/工具可以做到这一点？

# 例子

`label.button.loadMoreImages=CARGAR MÁS IMÁGENES`->`label.button.loadMoreImages=CARGAR M&#193;S IM&#193;GENES`

*当文本更改并需要重新翻译时更容易使用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:37:32.403

有两个简单的 ant 任务可以将本机转换为 ascii 并返回，可以安排为像这样的目标

```
 <target name="native2ascii">
    <delete dir="${classes.dir}/resources" includes="*.properties" />
    <native2ascii encoding="cp1252" src="${source.dir}/resources" dest="${classes.dir}/resources" includes="*.properties" />
  </target>

  <target name="ascii2native">
    <native2ascii  encoding="cp1252" src="${classes.dir}/resources" dest="${resources.dir}"  includes="*.properties" reverse="true"/>
  </target> 
```

这将很容易适应您的环境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T11:41:36.480

你的要求非常具体，我怀疑你会找到一个工具来做你想做的事。考虑[编写自己的 Maven 插件](http://maven.apache.org/guides/plugin/guide-java-plugin-development.html)。

首先，您必须获取属性文件并解码数据。属性文件通常存储在 ISO 8859-1 中，但可以[通过](http://docs.oracle.com/javase/7/docs/api/java/util/Properties.html#load%28java.io.Reader%29)提供`InputStreamReader`.

接下来，您要枚举和 XML 转义非 ASCII 值。如果您不想自己动手，[Apache Commons Lang提供了一种执行此操作的类型。](http://commons.apache.org/proper/commons-lang/)

# java - 为什么我无法隐藏我的单选 AlertDialog？

> ID：15497554
> 
> 赞同：1
> 
> 时间：2013-03-19T10:57:59.133
> 
> 标签：java, android, android-alertdialog

我正在尝试显示一个对话框，允许用户使用这段代码选择一个值：

```
 AlertDialog.Builder builder = new AlertDialog.Builder(this.objActivity);
           builder.setTitle("Alert Dialog with ListView");
           builder.setIcon(R.drawable.ic_launcher);
           builder.setSingleChoiceItems(lstNames.toArray(new CharSequence[lstNames.size()]), 1, new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int intItem) {

                   PreferenceCategory targetCategory = (PreferenceCategory) StopFinder.this.objActivity.findPreference("monitored_stops");
                   final Preference account = new Preference(StopFinder.this.objActivity);
                   account.setKey(lstIds.get(intItem));
                   account.setTitle(lstStops.get(intItem));
                   account.setSummary(lstNumbers.get(intItem));
                   targetCategory.addPreference(account);
                   dialog.dismiss();

               }
           });
           final AlertDialog alert = builder.create();
           alert.show(); 
```

当用户选择一个项目时，我想关闭对话框但我无法这样做？

我读过我需要关闭它，`alert`但是`alert`在我的方法之后初始化了它，`onClick`所以我不知道我将如何关闭它。很抱歉，我已经像其他人一样第 100 万次问了同样的问题，但我无法理解这种情况。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T11:03:24.870

使用[`setItems()`](https://developer.android.com/reference/android/app/AlertDialog.Builder.html#setItems%28java.lang.CharSequence%5B%5D,%20android.content.DialogInterface.OnClickListener%29), 而不是`setSingleChoiceItems()`.

它会在单击项目时关闭对话框，并调用您的回调函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T11:02:33.930

我认为您可以将警报声明为类的私有变量，然后您可以在调用单击之前为其分配值并`alert.dismiss()`在 onClick 事件中使用关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T11:04:33.283

尝试在您的 onCreate() 之前声明您的警报；像这样

```
AlertDialog alert;
@Override
protected void onCreate(Bundle savedInstanceState) { 
```

然后使用`alert.dismiss();`代替`dialog.dismiss();`

另外，更换`final AlertDialog alert = builder.create();`

经过`alert = builder.create();`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T11:08:15.390

试试这个

```
builder.create().show(); 
```

代替

```
final AlertDialog alert = builder.create();
alert.show(); 
```

# c# - 前缀/无前缀字符串的正则表达式

> ID：15497568
> 
> 赞同：0
> 
> 时间：2013-03-19T10:58:30.473
> 
> 标签：c#, regex

我试图通过检测一个总是这样的标签来对我的 XML 字符串执行转换：

```
<attr name="firstName" />
<attr name="Name" />
<attr name="lastName" /> 
```

我希望抓住它并用后缀自行替换它，所以我会得到这个：

```
<attr name="firstName" /><attr name="beep" />
<attr name="Name" /><attr name="beep" /> 
```

但如果是最后一个，我希望什么都不做。

```
<attr name="lastName" /> 
```

我正在尝试这种检测模式。

```
Regex.Replace(before, "(<attr name=\"[first]*name\" />)", "[0]<attr name=\"beep\" />"); 
```

但这将匹配*first*的所有排列。我怎样才能表达*最多一个确切的字符串 "first"*？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:17:39.217

我建议使用负前瞻：

```
Regex.Replace(before, "(<attr name=\"(?!last)[^\"]*Name\" />)", "$0<attr name=\"beep\" />"); 
```

要检测字符串“first”的零个或一个，您可以简单地将lookbehind更改为可选的正常组，并将“last”替换为“first”。

```
Regex.Replace(before, "(<attr name=\"(?:first)?Name\" />)", "$0<attr name=\"beep\" />"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T11:02:02.430

```
Regex.Replace(before, "(<attr name=\"[first]?name\" />)", "$0<attr name=\"beep\" />"); 
```

`*`用 a替换`?`将搜索一次或零次出现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T11:49:27.763

我想你想要的是：

```
Regex.Replace(before, "(<attr name=\"(?:first)?name\" />)", "$0<attr name=\"beep\" />"); 
```

`[first]`在正则表达式中表示“任何字符`f`, `i`, `r`, `s`or `t`”。

`(?:first)`表示“字符串`first`，视为（非捕获）组”。`?`然后说前面的匹配应该发生零次或一次。

# javascript - locomotive.js 监听 http 和 https

> ID：15497570
> 
> 赞同：1
> 
> 时间：2013-03-19T10:58:31.167
> 
> 标签：javascript, node.js, locomotivejs

我有一个 locomotive.js MVC 项目，它在 http 上监听。我想在 https 上收听，并将所有 http 重定向到 https。

我找不到node.js的createServer，我找到的唯一代码是：/lib/node_modules/locomotive/lib/locomotive/cli/server.js

```
console.log('booting app at %s in %s environment', dir, env);

locomotive.boot(dir, env, function(err, server) {
  if (err) {
     throw err;
  }

  server.listen(port, address, function() {
     var addr = this.address();
     console.log('listening on %s:%d', addr.address, addr.port, addr);
  });
}); 
```

变成 ：

```
console.log('booting app at %s in %s environment', dir, env);
var crypto = require('crypto'),
       fs = require("fs");
var privateKey = fs.readFileSync('/privatekey.pem').toString();
var certificate = fs.readFileSync('/certificate.pem').toString();
var https = require('https');
var credentials = crypto.createCredentials({key: privateKey, cert: certificate}); 
```

我现在有点卡住了，有什么帮助吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:16:05.743

这没有经过很好的测试，但它似乎有效：

```
 // start.js
  var locomotive  = require('locomotive');
  var app         = new locomotive.Locomotive();
  var http        = require('http');
  var https       = require('https');
  var fs          = require('fs');

  app.boot(__dirname, 'development', function(err, server) {
    var options = {
      key : fs.readFileSync('server.key'),
      cert: fs.readFileSync('server.crt')
    };
    https.createServer(options, server).listen(port, address);
  }); 
```

它有几个问题（硬编码的目录名称和环境，并且不包括 HTTP 重定向部分），但这些都是次要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T11:15:37.523

如果有人看到这个问题，我会在这里发布我的答案：

```
var fs = require("fs");

var options = {
  key: fs.readFileSync('/privatekey.pem'),
  cert: fs.readFileSync('/certificate.pem')
};

var server = https.createServer(options, this);
return server.listen.apply(server, arguments); 
```

# wpf - XP中的应用程序打印功能崩溃

> ID：15497574
> 
> 赞同：1
> 
> 时间：2013-03-19T10:58:38.447
> 
> 标签：wpf, printing

我为家族企业制作了一个 WPF 应用程序，该应用程序之前运行良好。上个月他们格式化了 PC，这次安装了 XP。虽然该应用程序仍然可以工作，但一旦执行发票或任何其他打印操作，它就会崩溃。

以下是代码。让我知道此问题的任何解决方法，否则我需要重新安装 Windows 7。

```
private void printButton_Click(object sender, RoutedEventArgs e)
{
    string path = Directory.GetCurrentDirectory();
    PrintInvoice pi = new PrintInvoice();
    pi.DataContext = this.DataContext;
    PrintDialog printDlg = new System.Windows.Controls.PrintDialog();
    if (printDlg.ShowDialog() == true)
    {
        pi.Measure(new Size(printDlg.PrintableAreaWidth,
        printDlg.PrintableAreaHeight));
        pi.Arrange(new Rect(new Size(printDlg.PrintableAreaWidth, printDlg.PrintableAreaHeight)));
        pi.Margin = new Thickness(40);
        pi.UpdateLayout();

        //now print the visual to printer to fit on the one page.
        printDlg.PrintVisual(pi, "First Fit to Page WPF Print");
    }
    Directory.SetCurrentDirectory(path);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T12:24:40.407

当我们的一些客户降级到 Windows XP 时，我们也遇到了类似的问题。在我们的例子中，来自系统事件日志的异常消息是

> 框架版本：v4.0.30319
> 
> 说明：应用程序通过 System.Environment.FailFast(string message) 请求进程终止。
> 
> 消息：不可恢复的系统错误

解决方案是在目标机器上安装[Microsoft XML Paper Specification Essentials Pack 。](http://www.microsoft.com/en-us/download/details.aspx?id=11816)

# java - 初始化密码时出错

> ID：15497578
> 
> 赞同：0
> 
> 时间：2013-03-19T10:58:46.017
> 
> 标签：java, bouncycastle

我有加密字符串的功能：

```
BASE64Decoder decoder = new BASE64Decoder();
BASE64Encoder encoder = new BASE64Encoder();

public String encryptValueWithBlowfish(String data, String secretKey) {

    Security.addProvider(new org.bouncycastle.jce.provider.BouncyCastleProvider());
    try {
        SecretKeySpec key = new SecretKeySpec(decoder.decodeBuffer(secretKey), "Blowfish");
        Cipher cipher = Cipher.getInstance("Blowfish/CBC/NoPadding", "BC");
        String iv = "\0\0\0\0\0\0\0\0";
        IvParameterSpec ivs = new IvParameterSpec(iv.getBytes());
        cipher.init(Cipher.ENCRYPT_MODE, key, ivs);
        MessageDigest sha = MessageDigest.getInstance("SHA-1");
        return encoder.encode(sha.digest(cipher.doFinal(decoder.decodeBuffer(data))));
    } catch (Exception e) {
        lg.info("Failed to encryptValueWithBlowfish: " + e.getMessage());
        return "";
    }
} 
```

线`cipher.init(Cipher.ENCRYPT_MODE, key, ivs);`升异常 `"Unsupported keysize or algorithm parameters"`。这段代码在另一台 Linux 机器上可以很好地分叉。两种情况下传递的参数是相同的。我不擅长加密货币。可能有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:03:44.033

> 可能有什么问题？

好吧，您在这里使用默认字符编码：`iv.getBytes()`- 这绝不是一个好的开始。也许两台不同的机器有不同的默认编码。

如果你想创建一个全零和特定大小的字节数组，为什么不直接使用：

```
IvParameterSpec ivs = new IvParameterSpec(new byte[8]); 
```

如果你想要一个 16 字节的 IV，或者使用 16。

目前尚不清楚`decoder`这里是什么 - 但您会一次又一次地使用它，如果使用的是默认字符编码，它可能会因机器而异。

# javascript - javascript TypeError: window.document.getElementById(...) 为空

> ID：15497580
> 
> 赞同：0
> 
> 时间：2013-03-19T10:58:49.323
> 
> 标签：javascript

我使用以下代码从页面获取链接，但是当我尝试将其写入数组时，我收到错误消息。我用 Firebug-Console 对其进行了测试。

```
function getElements() {
var mylinks = new Array();

    for (var i=1;i<50;i++){
    var linkID = "websiteLink" + i;
    var element = window.document.getElementById(linkID).innerHTML;
    mylinks[i-1] = element;
     }
    //alert(mylinks[0]);

}

getElements(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:02:07.857

尝试

```
function getElements() {
var mylinks = new Array();

    for (var i=1;i<50;i++){
    var linkID = "websiteLink" + i;
    var element = document.getElementById(linkID);
    if(element !== null)mylinks.push(element.innerHTML);
     }
    //alert(mylinks[0]);

}

getElements(); 
```

您正在尝试访问 Dom 节点的 innerHTML 属性的 value 属性

我建议在这里使用 jquery 来获得更多的故障安全/跨浏览器结果。将“websiteLink”作为一个类添加到您想要获取的所有链接中。

```
var mylinks = [];
$('.websiteLink').each(function(idx,item){
mylinks.push($(item).html());
});
alert(mylinks); 
```

# java - 将图像参数从 GWT/GXT 传递到 Jasper 报告的问题

> ID：15497583
> 
> 赞同：3
> 
> 时间：2013-03-19T10:58:51.227
> 
> 标签：java, image, gwt, jasper-reports, gxt

我正在尝试将一个简单的 .gif 图像从我的 GXT 应用程序提供给 jasper，以便它生成一个 Excel 报告。

我遇到的问题是，在尝试了多种选择之后，我总是在服务器端得到“java.lang.NullPointerException”。

我的 Jasper 报告中有以下代码：

```
 <parameter name="logo" class="java.lang.String"/>
...
        <image>
             <reportElement uuid="2f9765a4-f1dc-4af4-9ddf-fae1c7a3d152" x="110" y="0" width="206" height="40"/>
             <imageExpression><![CDATA[$P{logo}]]></imageExpression>
        </image> 
```

和Java代码：

```
 FileResolver fileResolver = new FileResolver() {

                 @Override
                 public File resolveFile(String fileName) {
                    URI uri;
                    try {
                      uri = new URI(this.getClass().getResource(fileName).getPath());
                      return new File(uri.getPath());
                    } catch (URISyntaxException e) {
                      // TODO Auto-generated catch block
                      e.printStackTrace();
                      return null;
                    }
                }
            };

            parameters.put("logo",  fileResolver.resolveFile("logo.GIF")); 
```

我已经尝试了几种解决方案，但都遇到了问题。

logo.gif 放置在已编译的 GWT 应用程序的 .war 文件夹中，其内容被归档为 .war 并部署在 Tomcat 7.0 服务器上。

希望有更多经验的人能帮助我，让我知道我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:03:36.693

该`FileResolver`对象应该像这样传递给 Jasper：

```
parameters.put("REPORT_FILE_RESOLVER", fileResolver); 
```

你不应该给`fileResolver.resolveFile()`自己打电话。方法的调用`FileResolver`将由 JasperReports 自己完成。[这个问题](https://stackoverflow.com/questions/2746561/how-to-show-an-image-on-jasper-report)看起来很像你的问题（也许你已经看过了），它通过传递`FileResolver`作为参数来工作。

`FileResolver` [您可以在此处](http://jasperreports.sourceforge.net/sample.reference/tableofcontents/index.html#fileresolver)找到更多信息。此页面提到`FileResolver`自 JasperReports 5.0.1 起已弃用。如果您正在使用（或计划使用）5.0.1+，您应该尝试使用[`JasperResportsContext`](http://jasperreports.sourceforge.net/api/net/sf/jasperreports/engine/JasperReportsContext.html). 有关您的使用示例，`JasperReportsContext`请参阅[此问题](https://stackoverflow.com/questions/15004325/file-resolver-in-jasper-reports-5-0-1)。

# javascript - ImageJ：.show() 不显示图像

> ID：15497585
> 
> 赞同：0
> 
> 时间：2013-03-19T10:58:57.670
> 
> 标签：javascript, imagej

我对 javascript 很陌生，我想在斐济处理一些图像。我使用宏语言已经有一段时间了，但我正在尝试熟悉正式的 ImageJ/Fiji API。我正在尝试运行以下简单的代码，它运行没有错误，但最终没有显示任何图像。怎么了？

```
importClass(Packages.ij.plugin.filter.GaussianBlur);

var image = IJ.openImage("/home/.../KNIIC_BC_Cam2_AirBubble2_Image1038.bmp");
IJ.run(image, "8-bit", "");

var dpl = image.getProcessor().duplicate();
var gs = new GaussianBlur();
gs.blur(dpl,20);
new ImagePlus(gs).show(); 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:37:38.560

问题在于您如何处理`ImagePlus`: 在最后一行中，您尝试创建一个`new ImagePlus`，但它不可能包含您加载的图像的任何信息。

`GaussianBlur`处理`ImageProcessor`您将通过该`ImagePlus#getProcessor()`方法获得的。如果您查看[API 文档](http://rsb.info.nih.gov/ij/developer/api/ij/plugin/filter/GaussianBlur.html)，您还会看到它`blur(ImageProcessor,double)`已被弃用，取而代之的是其他方法之一：您可能希望在`blurGaussian(ImageProcessor, double, double, double)`此处使用。

此代码将起作用：

```
importClass(Packages.ij.plugin.filter.GaussianBlur);

var imp = IJ.openImage("http://imagej.nih.gov/ij/images/clown.jpg");
IJ.run(imp, "8-bit", "");

var ip = imp.getProcessor();
var gs = new GaussianBlur();
gs.blurGaussian(ip,20,20,0.01);
imp.show(); 
```

但是它使用了干扰类的低级方式`GaussianBlur`。为了让您的生活更轻松，您还可以通过*Plugins > Macros > Record...*在 GUI 中记录 javascript 命令，然后选择*Record: Javascript* ，然后通过*Process > Filters > Gaussian Blur...*执行高斯模糊。这将使您的代码更短：

```
var imp = IJ.openImage("http://imagej.nih.gov/ij/images/clown.jpg");
IJ.run(imp, "8-bit", "");
IJ.run(imp, "Gaussian Blur...", "sigma=20");

imp.show(); 
```

有关 ImageJ 中 Javascript 脚本的一般帮助，请参阅[这](http://fiji.sc/Javascript_Scripting) [两个](http://fiji.sc/Scripting_toolbox)指向 Fiji wiki 的链接。

**编辑**：从[ImageJ 1.47n5](http://fiji.sc/cgi-bin/gitweb.cgi?p=imagej.git;a=commitdiff;h=bb0ffe96940de0c8ca39928acbad636dcd4daf29#patch9)开始，`ImageProcessor`有一个新方法`blurGaussian(double sigma)`，将上述（低级）代码缩短为：

```
var imp = IJ.openImage("http://imagej.nih.gov/ij/images/clown.jpg");
IJ.run(imp, "8-bit", "");
imp.getProcessor().blurGaussian(20);
imp.show(); 
```

# html - 我如何用最佳实践 div 来表示这一点？

> ID：15497586
> 
> 赞同：1
> 
> 时间：2013-03-19T10:59:00.143
> 
> 标签：html, css

我在我们的前端有这张表，我一直在阅读 DIV 是更好的编码方式，你将如何在 DIV 中表示相同的结构？

```
<table>
        <tr>
            <td colspan="6" class="title"><strong>Choose Dates</strong></td>
            <td colspan="2" class="title"><strong>Search by Name</strong></td>
            <td class="title"><strong>Status</strong></td>
        </tr>
        <tr>

            <td><input type="text" id="dateFrom" /></td>
            <td><strong>To</strong></td>
            <td></td>
            <td><input type="text" id="dateTo" /></td>

            <td><input type="checkbox"id="pendResCheckID" />Pending</td>
            <td><input type="checkbox"id="ConfResCheckID" />Confirmed</td>
            <td><input type="checkbox"id="CancResCheckID" />Canceled</td>

        </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T11:19:52.677

您不一定需要任何`<div>`s，只需更好地利用现有的表单元素即可；

```
<form>
    <fieldset>
        <legend>Choose Dates</legend>
        <input> To <input>
    </fieldset>
    <fieldset>
        <legend>Status</legend>
        <label><input type="checkbox"> Pending</label>
        <label><input type="checkbox"> Confirmed</label>
        <label><input type="checkbox"> Canceled</label>
    </fieldset>
</form> 
```

现在，真正的工作在于编写 css 以使其看起来像你想要的那样。我会从移除边框开始，`<fieldset>`然后将它们彼此相邻浮动。

```
fieldset {
    float: left;
    border: none;
} 
```

查看[http://jsfiddle.net/ZqQRh/1/](http://jsfiddle.net/ZqQRh/1/)

（我省略了一些基本的细节和属性，因为问题主要是关于结构的）

# javascript - 从一个网站获取数据并在另一个网站上显示

> ID：15497590
> 
> 赞同：0
> 
> 时间：2013-03-19T10:59:20.077
> 
> 标签：javascript, asp.net, html, flash, iframe

我们的客户有两个网站，它们共享一个公共部分，他希望我们从一个网站动态挑选数据并在另一个网站上显示它，不包括页眉和页脚。我尝试使用`iframe`但页面包含 Flash 并且它没有在子网站中显示 Flash 内容。使用`iframe`我能够显示整个网站（Flash 没有加载），但我不想要页眉和页脚。

任何帮助，将不胜感激。

注意：我们没有从其中挑选数据的父网站的数据库或代码访问权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:27:09.927

不太了解您的注释..
考虑到您可以向两个站点添加一些代码并且您只想显示站点的一部分 -

假设您有 siteA 和 siteB，这是一个简单的解决方案：
siteA 可以打开一个 iframe，该 iframe 使用 siteB 的 js 中的 ?sendSiteA=true 之类的 url 参数托管 siteB
，在解析此参数时，您将拥有一个函数，该函数将抓取您的部分想要显示，将其附加到正文并隐藏其他所有内容。这不是共享数据的最佳方式，但它会起作用。

PS您可以在另一个url参数中传递iframe的尺寸并调整siteB中rht部分的尺寸

# asp.net - ASP.Net 4.0 中的单选按钮选择

> ID：15497596
> 
> 赞同：-1
> 
> 时间：2013-03-19T10:59:26.780
> 
> 标签：asp.net

在我的 asp.net 应用程序（指向框架 4.0）中，当我选择一个单选按钮时，选择边框仅针对单选按钮而不是单选按钮的文本。请让我知道解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:05:27.087

如果您正在使用

```
border: 1px solid #ff0000; 
```

尝试使用

```
outline: 1px solid #ff0000; 
```

或者你可以参考这个链接
[在单选按钮周围放置css边框](https://stackoverflow.com/questions/10849626/putting-css-borders-around-radio-buttons)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T11:02:43.460

确保在部署中使用 4.0 版本

检查`section Framework Version`你的 IIS

# php - 从邻接模型中对非嵌套数据数组进行排序

> ID：15497597
> 
> 赞同：0
> 
> 时间：2013-03-19T10:59:31.880
> 
> 标签：php, arrays, sorting, adjacency-list, adjacency-list-model

我从使用邻接模型构建主题层次结构的数据库表中获取了一组数据。每条记录包含以下字段：

*   'id' - 一个唯一的 AI id。
*   'name' - 显示名称。
*   'parent_id' - 父主题的 id（对于根主题可以为空）

如您所料，该数组来自未嵌套并按 id 排序的数据库。'id' 字段是随机的和随意的，不能依靠它来产生有用的订单。我正在寻找一种使用 parent_id 对数组进行排序的方法，以便它具有正确的邻接顺序，但最终结果不会嵌套到子数组中。该列表如下所示：

*   **根主题A**
*   主题1
*   主题2
*   *ATopic2 的子 1*
*   *ATopic2 的 Child2*
*   主题3
*   **根主题B**
*   BTopic1
*   BTopic2
*   等等

任何帮助或指向示例的指针（即使是不同的语言）将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:09:32.360

例如，您可以添加一个字段，`sort`在其中存储类别中相同 ID 的顺序。

另一种解决方案是（在 SQL 中）通过`ORDER BY parent_id, id`或将两者结合`ORDER BY sort`使用 JOIN 对它们进行排序（未测试）：

```
SELECT object.id, object.sort, parent.id, parent.sort
FROM objects AS object
LEFT JOIN objects AS parent ON object.parent=parent.id
ORDER BY parent.sort, object.sort; 
```

假设这`objects`是你的表名，同一个表`object`作为主对象，`parent`作为它的父对象（你需要它来获取`sort`父对象）。

# json - 将 scala 列表转换为 Json 对象

> ID：15497598
> 
> 赞同：5
> 
> 时间：2013-03-19T10:59:39.827
> 
> 标签：json, list, scala

我想将字符串的 Scala 列表 List[String] 转换为 Json 对象。

对于我列表中的每个字符串，我想将它添加到我的 Json 对象中。

所以它看起来像这样：

```
{
 "names":[
  {
    "Bob",
    "Andrea",
    "Mike",
    "Lisa"
  }
 ]
} 
```

如何从我的字符串列表中创建一个看起来像这样的 json 对象？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-19T11:10:37.857

要直接回答您的问题，这是一种非常简单和hacky的方法：

```
val start = """"{"names":[{"""
val end = """}]}"""
val json = mylist.mkString(start, ",", end) 
```

但是，您几乎可以肯定想做的是从众多 JSON 库中选择一个：[play-json和](http://mandubian.com/2012/09/08/unveiling-play-2-dot-1-json-api-part1-jspath-reads-combinators/)[lift-](https://github.com/lift/lift/tree/master/framework/lift-base/lift-json/) json都得到了一些好评。在最坏的情况下，您可以只为 Java 获取一个简单的 JSON 库并使用它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T11:45:17.293

由于我熟悉 lift-json，我将向您展示如何使用该库来完成它。

```
import net.liftweb.json.JsonDSL._
import net.liftweb.json.JsonAST._
import net.liftweb.json.Printer._
import net.liftweb.json.JObject

val json: JObject = "names" -> List("Bob", "Andrea", "Mike", "Lisa")

println(json)
println(pretty(render(json))) 
```

该`names -> List(...)`表达式由 JsonDSL 隐式转换，因为我指定我希望它产生 a `JObject`，所以现在`json`是您想要的 json 数据的内存模型。

`pretty`来自`Printer`对象，`render`来自`JsonAST`对象。结合起来，它们创建了`String`您的数据的表示形式，看起来像

```
{
  "names":["Bob","Andrea","Mike","Lisa"]
} 
```

请务必查看[lift 文档](http://scala-tools.org/mvnsites/liftweb-2.4/)，您可能会在其中找到有关 lift 的 json 支持的任何其他问题的答案。

# jquery - 更改背景颜色

> ID：15497599
> 
> 赞同：1
> 
> 时间：2013-03-19T10:59:42.453
> 
> 标签：jquery, html

我有一个名为 main 的 div：

```
 <div id="main"> 
```

我还有一个带颜色的 div：

```
 <div id="colors"> 
```

在 div 颜色中，我有一个颜色列表：示例

红色的

蓝色的

黄色的

如果我单击 1 种颜色，我想更改 div 主的颜色。

我已经有了：

```
$("#main").hover(function() 
{ 
    $(this).stop().animate({ backgroundColor: "#a7bf51"}, 800); 
}
    ,function() {
    $(this).stop().animate({ backgroundColor: "#8D8D86" }, 800); 
}); 
```

这会改变我想要的颜色。

但我希望 div 中的颜色具有这种效果。

所以如果我点击黄色，颜色一定不是#a7bf51，但如果我点击黄色，它必须是黄色，如果我点击红色，它必须是红色。

我也试过

```
 <a  href="#top" class="testClick" onclick="
                document.getElementById('#bord').style.backgroundColor='#350000';
            ">Rood </a> 
```

将背景图像变为#350000

但是我想要一个包含很多颜色的大列表 20+ 所以如果我可以制作一个功能会更好，并且通过该功能我还可以使用动画效果很好。

那么有人可以帮助我以正确的方式改变背景颜色的效果吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:04:34.960

```
var color = '';
$('div').click(function() {
    var clr = $(this).css('backgroundColor');
    var color= hexc(clr);

$(this).animate({ backgroundColor: color }, 'fast');

}) 
```

希望它有效..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T11:05:22.257

试试这个

**HTML**

```
<div id="colors"> 
  <span id="#a7bf51">red</span>
  <span id="#8D8D86">green</span>
  ........
</div> 
```

**jQuery**

```
$('#colors span').click(function(){
     var color=$(this).attr('id');
     $('#main').stop().animate({ backgroundColor: color }, 800);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T11:05:04.267

试试这个：

```
$('#colors p').click(function(){

    color = $(this).innerHTML;

    $('#bord').stop().animate({
        backgroundColor: color
    }, 800);

} 
```

这是假设您的“颜色”div 充满了包含颜色的 p 元素

它还假定您的文本颜色是有效的 HTML 颜色名称。

[http://www.w3.org/TR/2003/CR-css3-color-20030514/#svg-color](http://www.w3.org/TR/2003/CR-css3-color-20030514/#svg-color)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T11:06:30.570

**HTML**

```
<div id="main">
    Some content
</div>

<div id="colors">
   <p>Red</p>
   <p>Blue</p>
   <p>Yellow</p>
</div> 
```

**jQuery**

```
 $(document).ready(function() {
        $('#colors p').on('click',function(){
            var color = $(this).text();
            $('#main').stop().animate({ backgroundColor: color }, 800);
        });
    }); 
```

# mongodb - Chef Solo 错误：找不到食谱

> ID：15497610
> 
> 赞同：7
> 
> 时间：2013-03-19T11:00:16.920
> 
> 标签：mongodb, amazon-ec2, chef-infra, chef-solo

我正在尝试在 Amazon EC2 Linux AMI 上使用 Chef Solo 运行 MongoDB 配方。我已经安装了 Omnibus，在 .rb 文件中设置了说明书路径，在 .json 文件中设置了运行列表。我已经将 mongodb recipe zip 的内容从 github 复制到了 cookbook 文件夹，然后运行了 chef-solo 命令。结果如下：

*致命：Chef::Exceptions::CookbookNotFound：Cookbook apt 未找到。如果您从另一本食谱加载 apt，请确保在元数据中配置依赖项*

我对Linux也很陌生，我在这里做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-11-11T06:24:19.023

如果您正在使用`chef-solo`，请确保您`solo.rb`指向正确的食谱位置。我已将其设置为：

```
cookbook_path "/root/chef-repo/cookbooks" 
```

代替：

```
cookbook_path "/home/ubuntu/chef-repo/cookbooks" 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-19T11:06:04.140

该错误非常具有描述性。您的运行列表中可能有一本食谱，该食谱`depends apt`在其`metadata.rb`文件中。

幸运的是，这很容易解决 - 只需将`apt`食谱 ( [https://github.com/opscode-cookbooks/apt](https://github.com/opscode-cookbooks/apt) ) 包含在您的`cookbooks`文件夹中，然后在您的运行列表（或角色，当您达到该级别时）中调用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-03T15:02:05.423

*Karishma*[的回答](https://stackoverflow.com/a/19900104/438670)是正确的，尽管我想对其进行扩展并通过跳过绝对路径使其更具动态性。这是我的实现：

```
root = File.absolute_path(File.dirname(__FILE__))
file_cache_path root
cookbook_path root + '/cookbooks' 
```

它将路径设置为您放置`solo.rb`文件的任何位置。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-05T10:46:03.190

这发生在我身上是因为我忘了先跑`librarian-chef install`！

# c# - 如何根据 app.config 文件中的值获取密钥？

> ID：15497628
> 
> 赞同：-2
> 
> 时间：2013-03-19T11:00:42.987
> 
> 标签：c#, asp.net

我有一个这样的 app.config 文件：-

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <appSettings>
    <add key="botLogs" value="d:\TFS Projects-BotLogs/"/>
    <add key="botfolder" value="C:\BOTSCONFIG"/>
  </appSettings>
  <connectionStrings>
    <add connectionString="Server=1.1.1.1;Database=BGAppCrawling;UID=sa;Password=something;" name="VGDB"/>
    <add connectionString="Server=1.1.1.1;Database=BGMappingStaging;UID=sa;Password=something;" name="VGDBMapping"/>
  </connectionStrings>
</configuration> 
```

现在我可以根据 appSettings 部分中的键获取值，如下所示：-

```
string filePath = ConfigurationSettings.AppSettings["botLogs"].ToString(); 
```

但是，如果我想根据 appSetting 部分的值获取密钥，该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:06:23.617

```
 foreach (string key in Configuration.AppSettings.Settings.AllKeys)
        {
            string value = appSettings.Settings[key].Value;

            if (value.Equals(myValue))
            {
                 Console.WriteLine("Found Key: " + key);
                 break;
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T11:12:08.260

我会说你应该用值替换你的键，用键替换值，

```
<add  key="d:\TFS Projects-BotLogs/" value="botLogs"/>
<add  key="C:\BOTSCONFIG" value="botfolder"/> 
```

谢谢拉克什

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T11:04:27.683

```
foreach(string key in System.Configuration.ConfigurationSettings.AppSettings)
{   
 var key = key.ToString();   
 var value = ConfigurationSettings.AppSettings[key.ToString()];
 //Do something here
} 
```

或者

```
var settings = System.Web.Configuration.ConfigurationSettings.AppSettings;

var value = from string k in settings.Keys
            where k.StartsWith("MyValue")
            select settings[k]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T11:04:43.197

您可以尝试以下`GetEnumerator method`基于代码：

```
NameValueCollection values = ConfigurationManager.AppSettings;
Iterate(values);    
public void Iterate(NameValueCollection myCollection)
{
    IEnumerator myEnumerator = myCollection.GetEnumerator();
    Console.WriteLine("KEY VALUE");
    foreach (String item in myCollection.AllKeys)
    Console.WriteLine(" {0,-10} {1}", item, myCollection[item]);
    Console.WriteLine();
} 
```

# python - 具有动态网格布局的 Kivy 模板

> ID：15497629
> 
> 赞同：3
> 
> 时间：2013-03-19T11:00:43.487
> 
> 标签：python, layout, widget, kivy

我正在尝试为布局创建一个模板，如下所示：

```
|----------|
|          | 
| IMAGE    |   <--- Just an image (square)
|          |
|----------| 
|[btn][btn]|   <--- GridLayout cols=2 of buttons 
|[btn][btn]| 
|[btn][btn]| 
|[btn][btn]| 
|[btn][btn]| 
|[btn][btn]|
|----------| 
```

第一部分很简单（但我可能错了，因为我是 kivy 的新手）

```
#:kivy 1.6
[SideBar@BoxLayout]:
    orientation: 'vertical'
    Image:
        source: ctx.image
        size_hint: (1, None)
        height: root.width
    GridLayout:
        cols: 2
        # What do I do here to make it easy to load a list of buttons? 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T15:34:42.703

```
#!/usr/bin/env python2
from kivy.app import App
from kivy.lang import Builder
from kivy.uix.floatlayout import FloatLayout
from kivy.uix.button import Button

Builder.load_string('''
#:kivy 1.6
[SideBar@BoxLayout]:
    content: content
    orientation: 'vertical'
    size_hint: ctx.size_hint if hasattr(ctx, 'size_hint') else (1, 1)
    Image:
        source: ctx.image
        size_hint: (1, None)
        height: root.width
    GridLayout:
        cols: 2
        # just add a id that can be accessed later on
        id: content

<Root>:
    Button:
        center_x: root.center_x
        text: 'press to add_widgets'
        size_hint: .2, .2
        on_press:
            # what comes after `:` is basically normal python code
            sb.content.clear_widgets()
            # however using a callback that you can control in python
            # gives you more control
            root.load_content(sb.content)
    SideBar:
        id: sb
        size_hint: .2, 1
        image: 'data/images/image-loading.gif'
''')

class Root(FloatLayout):

    def load_content(self, content):
        for but in range(20):
            content.add_widget(Button(
                                text=str(but)))

class MyApp(App):
    def build(self):
        return Root()

if __name__ == '__main__':
    MyApp().run() 
```

我希望内联注释使示例足够清晰。在这种情况下，我们只是将内容的 ref 传递给将小部件添加到内容的函数。

在某些情况下，您可能希望访问 Widget 作为您自己类的属性。在这种情况下，您可以使用以下[方法](http://kivy.org/docs/guide2/lang.html#accessing-widgets-defined-inside-kv-lang-in-your-python-code)。

上面的方法基本上是添加了一个与id同名的[ObjectProperty ，将id所引用的widget的引用传递给它。](http://kivy.org/docs/api-kivy.properties.html?highlight=objectproperty#kivy.properties.ObjectProperty)因此，您现在拥有一个与 python 类中的 id 同名的属性，以便于访问。使用上述方法，您的代码将如下所示。

```
#!/usr/bin/env python2
from kivy.app import App
from kivy.lang import Builder
from kivy.uix.floatlayout import FloatLayout
from kivy.uix.button import Button
from kivy.properties import ObjectProperty

Builder.load_string('''
#:kivy 1.6
[SideBar@BoxLayout]:
    content: content
    orientation: 'vertical'
    size_hint: ctx.size_hint if hasattr(ctx, 'size_hint') else (1, 1)
    Image:
        source: ctx.image
        size_hint: (1, None)
        height: root.width
    GridLayout:
        cols: 2
        # just add a id that can be accessed later on
        id: content

<Root>:
    content: sb.content
    Button:
        center_x: root.center_x
        text: 'press to add_widgets'
        size_hint: .2, .2
        on_press:
            sb.content.clear_widgets()
            root.load_content()
    SideBar:
        id: sb
        size_hint: .2, 1
        image: 'data/images/image-loading.gif'
''')

class Root(FloatLayout):

    content = ObjectProperty(None)
    '''This is initialised to None and in kv code at line 28
    above (the one with `content: sb.content`) a ref to the
    actual content is passed'''

    def load_content(self):
        content = self.content
        for but in range(20):
            content.add_widget(Button(
                                text=str(but)))

class MyApp(App):
    def build(self):
        return Root()

if __name__ == '__main__':
        MyApp().run() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-07T12:03:24.690

试试python-micro-template( [https://github.com/diyism/python-micro-template](https://github.com/diyism/python-micro-template) )，可以加载远程动态模板文件：

```
<:for i in range(30):#{#:>
Button:
    text: '<:=i:><:for j in range(6):#{#:><:=j:><:#}#:>'
    size: 480, 40
    size_hint: None, None
<:#}#:> 
```

# javascript - 在更新面板（JavaScript）中回发后，jQuery 排序表不起作用

> ID：15497630
> 
> 赞同：2
> 
> 时间：2013-03-19T11:00:50.123
> 
> 标签：javascript, jquery, updatepanel, jquery-ui-sortable, tablesorter

我对 jQuery 的可排序功能有疑问。当我的页面使用更新面板进行回发时，动态表的排序不再起作用。按下图像按钮时会触发回发。当按下图像按钮时，会出现一个新行，其中包含一个子表。

我尝试了这 3 个 JavaScript 代码，但它们似乎都是第一次工作。我打开子表后它们不起作用。

你们可能知道解决这个问题的 JavaScript 解决方案吗？

我的第一次尝试：

```
$(function(){
        $('table[id*="tbl_main"]').tablesorter();
    }); 
```

我的第二次尝试：

```
$(document).ready(function(){
        $('table[id*="tbl_main"]').tablesorter();
    }); 
```

我的第三次尝试：

```
function pageLoad() {
        $(function () {
            $("#pager").unbind();
            $('table[id*="tbl_main"]')
            .tablesorter()
            .tablesorterPager({ container: $("#pager") });
        }
    )} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-19T11:14:47.213

每次更新后，所有脚本都被删除，您必须再次绑定它们，例如：

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server">

     <ContentTemplate>
          <script type="text/javascript">
               Sys.Application.add_load(BindFunctions);
          </script>
... 
```

然后在你的 javascript 文件中：

```
function BindFunctions() {
$('table[id*="tbl_main"]').tablesorter();
}; 
```

# class - 将图像克隆到一个具有类名的 div 中

> ID：15497631
> 
> 赞同：0
> 
> 时间：2013-03-19T11:00:51.087
> 
> 标签：class, clone

我在这里有一个 jsfiddle - [http://jsfiddle.net/drRG9/](http://jsfiddle.net/drRG9/)

并在这里进行现场演示 - [http://www.ttmt.org.uk/forum/clone/](http://www.ttmt.org.uk/forum/clone/)

这是两个具有相同类名“article”的div（黄色）。

每个黄色 div 包含一个类名为“images”（红色边框）的 div。

第一个黄色 div 包含我想克隆到它的图像 div 的图像列表

所以图像应该被克隆到第一个红色边框的 div 而不是底部的。

那么如何将图像克隆到具有类名的一个 div 中。

我希望这是有道理的。

```
 <!DOCTYPE html>
    <html>
      <meta charset="UTF-8">
      <title>Title of the document</title>
      <meta name="description" content="">
      <meta name="keywords" content="">
      <meta name="robots" content="">

      <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>

      <style type="text/css">
        *{
          margin:0;
          padding:0;
        }
        html,body{
          height:100%;
          background:#ddd;
        }
        #wrapper{
          min-height:100%;
          max-width:800px;
          margin:0 auto;
          background:#fff;
          margin-top:-20px;
          padding-top:40px;
        }
        .article{
          background:yellow;
          margin:20px;
        }
        ul{
          list-style:none;
          margin:10px;
        }
        ul li{
          display:inline-block;
        }
        .images{
          min-height:20px;
          border: 1px solid red;
        }
      </style>

      </head>

    <body>

      <div id="wrapper">
        <div class="article">

          <div class="text">
            <p>
              Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. 
            </p>
            <ul>
              <li><img src="images/red01.jpg" /></li>
              <li><img src="images/red02.jpg" /></li>
              <li><img src="images/red03.jpg" /></li>
              <li><img src="images/red04.jpg" /></li>
            </ul>
          </div><!-- .text -->
          <div class="images">

          </div><!-- .images -->

        </div><!-- .article -->

        <div class="article">

          <div class="text">
            <p>
              Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. 
            </p>
          </div><!-- .text -->
          <div class="images">

          </div><!-- .images -->

        </div><!-- .article -->

      </div>  

      <script>

        $(function(){

          $('.text ul').clone().appendTo('.article .images', this);

        })

      </script>  

    </body>

    </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T11:04:22.480

试试这个：

```
$('.text ul').clone().appendTo('.article:first .images', this); 
```

这只会克隆到第一个`.article`.

作为您的评论，您可以试试这个：

```
var closest = $('.text ul').closest('.article');
$('.text ul').clone().appendTo(closest.find('.images')); 
```

您可以查看[`.closest()`](http://api.jquery.com/closest/)更多信息。

* * *

**更新**

由于您有多个`<ul>`，您需要将此代码包装在[`.each()`](http://api.jquery.com/each/).

试试这个代码：

```
$('.text ul').each(function(){
  var closest = $(this).closest('.article');
  $(this).clone().appendTo(closest.find('.images'));
}); 
```

# java-me - 与矩形的精灵碰撞

> ID：15497632
> 
> 赞同：0
> 
> 时间：2013-03-19T11:00:51.547
> 
> 标签：java-me, sprite

我正在用 j2me 开发游戏。我有一个精灵和一个四处移动的矩形。如何检查精灵和矩形之间的碰撞..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:36:34.743

LCDUI[`Sprite`](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/game/Sprite.html)类有`collidesWith`方法。您应该使用其中之一。这个其他答案有一个很好的示例：[J2ME 2D - 碰撞检测](https://stackoverflow.com/questions/9742490/j2me-2d-collisions-detecting)

# iphone - 在 iPhone 中编译和执行 C 程序

> ID：15497633
> 
> 赞同：-1
> 
> 时间：2013-03-19T11:00:53.783
> 
> 标签：iphone, ios, c, compilation

我有一个 C 程序，它使用 ASL 库来获取 iPhone 上的应用程序日志。现在，我已经在 Mac 上编译了它，它运行良好，在 mac 上获取应用程序的日志。当我将编译后的文件 scp 到 iPhone 并尝试执行它时，它说'可执行文件中的错误 cpu 类型'。所以，我在 iPhone 上安装了 GNU C 编译器并编译了它。现在，当我编译它时，它显示如下错误：

```
cP-iphone:~ root# gcc test.c
test.c:1:19: error: stdio.h: No such file or directory
test.c:2:17: error: asl.h: No such file or directory
test.c: In function 'main':
test.c:5: warning: incompatible implicit declaration of built-in function 'printf'
test.c:16: error: 'aslmsg' undeclared (first use in this function)
test.c:16: error: (Each undeclared identifier is reported only once
test.c:16: error: for each function it appears in.)
test.c:16: error: expected ';' before 'q'
test.c:21: error: 'q' undeclared (first use in this function)
test.c:21: error: 'ASL_TYPE_QUERY' undeclared (first use in this function)
test.c:22: error: 'ASL_KEY_SENDER' undeclared (first use in this function)
test.c:22: error: 'ASL_QUERY_OP_EQUAL' undeclared (first use in this function)
test.c:23: error: 'aslresponse' undeclared (first use in this function)
test.c:23: error: expected ';' before 'r'
test.c:24: error: 'NULL' undeclared (first use in this function)
test.c:24: error: 'm' undeclared (first use in this function)
test.c:24: error: 'r' undeclared (first use in this function)
test.c:27: warning: assignment makes pointer from integer without a cast
test.c:30: warning: assignment makes pointer from integer without a cast 
```

请建议我需要做什么才能在 iPhone 上编译和运行 ac 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T11:07:38.300

在模拟器上，在 mac 上，你可以运行 i386 代码。但是您不能在真实设备上使用，因为它是不同的处理器。

您必须将代码编译为从 XCode 面向 iOS SDK的**静态库。**的命令行选项`xcodebuild`是`-target iphoneos -arch armv7`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-04T23:46:00.010

在命令行上，这将为iOS编译一个*未签名的通用可执行文件：*

（因此它只会在已越狱的真实设备上执行，或者以某种方式从已签名的应用程序启动（可能使用 IAS 中不允许的调用）。）

```
clang -isysroot "$(xcode-select -p)/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk" \
  -arch armv7 \
  -arch armv7s \
  -arch arm64 \
  -mios-version-min=5.0 \
  foo.c -o foo 
```

给定`foo.c`：

```
#include <stdio.h>
int main(void){printf("Hello, world!\n");return(0);} 
```

接下来，将其 scp 到您的 JB 设备 ( `scp foo mobile@name_of_iphone.local:.`)：

```
MBF:~ mobile$ ./foo
Hello, world!
MBF:~ mobile$ rm foo
MBF:~ mobile$ ^D # logout 
```

但是你可能想把它变成一个简单的包装脚本，或者使用 xcodebuild 基础设施：

### ~/bin/clang_ios

```
#!/bin/sh
set -e
exec clang -isysroot "$(xcode-select -p)/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk" \
  -arch armv7 \
  -arch armv7s \
  -arch arm64 \
  -mios-version-min=5.0 \
  "$@" 
```

### 信用

其他答案和[http://clang-developers.42468.n3.nabble.com/targeting-iOS-tp4028940p4028942.html](http://clang-developers.42468.n3.nabble.com/targeting-iOS-tp4028940p4028942.html)

# php - Html - PHP - 机器人

> ID：15497634
> 
> 赞同：0
> 
> 时间：2013-03-19T11:00:54.190
> 
> 标签：php, opencart, robots.txt, google-index

我只是在寻找一些建议/反馈，我正在考虑在一个在谷歌中排名很好的 HTML 网站（商店）后面设置和 opencart。

默认情况下，web 服务器上会出现 index.html 站点而不是 index.php 页面（我已经测试过了）。

我希望我可以在域上以维护模式构建站点，然后在完成后（大约 2 周）删除 html 站点，离开（实时）opencart 站点。

只是担心这可能会影响排名。

在 robots.txt 文件中放置：

```
User-agent: *
User-agent: Googlebot

Disallow: /index.php 
```

我还将放入 index.php 页面（opencart）标题：

```
<meta name="robots" content="nofollow">
<meta name="googlebot" content="noindex, noarchive"> 
```

我不希望 Google 缓存“正在维护的网站”opencart index.php 页面。刷新它可能需要一个月左右的时间。

显然，一旦上线并删除了 html 站点文件，我将删除/更改 Disallow robot.txt 和元标记等命令。

我想知道是否有人尝试过，或者它是否会起作用？影响谷歌排名等？

这只是一个坏主意吗？对于任何反馈，我们都表示感谢。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:22:56.377

我假设您正在为您的网站使用 LAMP（Linux、Apache、MySQL、PHP）

1) Apache 可以选择设置默认页面，将其设置为 index.php 而不是 index.html

2）您可以在文件中使用重写规则（在[此处](http://www.htaccessbasics.com/how-to-edit-htaccess/)`.htaccess`阅读更多内容。如果您的托管服务提供商未授予 .htaccess 权限，则有一种解决方法！您可以在顶部包含此代码段：
`index.php`

```
<?php
if($_SERVER['REQUEST_URI'] == '/index.php'){
    header("HTTP/1.1 301 Moved Permanently");
    header("Location: /");
    die();
}
?> 
```

所以即使用户打开`http://www.domain.com/index.php`，
他也会被重定向到`http://www.domain.com/`

（例如：我的网站[http://theypi.net/index.php](http://theypi.net/index.php)转到[http://theypi.net/](http://theypi.net/)）

我还为[http://www.theypi.net](http://www.theypi.net)设置了类似的重定向以重定向到[http://theypi.net](http://theypi.net)
在两个选项之一之间进行选择（有或没有 www）也有助于提高排名）

对你的问题

> 我想知道是否有人尝试过，或者它是否会起作用？影响谷歌排名等？

1.  较短的 URL：这是用于 SEO 改进的 URL 卫生的一部分
2.  如果主页仅通过域名（没有 index.php）打开，那么您在搜索结果中的 CTR（点击率）影响会更高。

我建议不要使用机器人阻止机制，除非上述步骤对您不可行。

希望对您有所帮助，谢谢！

**编辑**：
如果您甚至没有权限将主页设置为 index.php。您可以执行以下操作之一：
1\. 创建`index.html`并放置 php 代码。如果 WebServer 理解 php，则将重定向逻辑如上。
2\. else, put JavaScript redirect（不推荐的方式）
`<script language=”JavaScript”&gt; self.location=”index.php”; </script>`

# ios - 更改 iPhone SDK 的 UITableView 中交替行的颜色

> ID：15497640
> 
> 赞同：13
> 
> 时间：2013-03-19T11:01:05.467
> 
> 标签：ios, objective-c, uitableview

在我的应用程序中，我想在 iPad 中显示多列 tableView。

所以，我使用了一个可可控件：[MultiColumn TableView](http://www.cocoacontrols.com/controls/multicolumntableviewforios)

它对我来说很好，但我想以交替颜色显示行。

为此，我无法找到更改代码的位置。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-03-19T11:09:49.977

```
- (void)tableView: (UITableView*)tableView willDisplayCell: (UITableViewCell*)cell forRowAtIndexPath: (NSIndexPath*)indexPath
{

        if(indexPath.row % 2 == 0)
              cell.backgroundColor = [UIColor redColor];
        else
              cell.backgroundColor = [UIColor whiteColor];
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-19T11:05:16.033

使用 indexPath 中的 `cellForRowAtIndexPath`来获得所需的结果。

```
 if( [indexPath row] % 2){
          cell.backgroundColor=[UIColor whiteColor];
    } 
    else{
          cell.backgroundColor=[UIColor purpleColor];
    } 
```

您将在实现的类中拥有此委托方法`UITableViewDelegate`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-19T11:05:43.557

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    .......

    if (indexPath.row % 2 == 0) {
       cell.backgroundColor = [UIColor lightGrayColor];
    }
    else
    {
        cell.backgroundColor = [UIColor darkGrayColor];
    }
    .......

    return cell;
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-19T11:20:40.913

首先，您需要获取每行的模数。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    .......

    if (indexPath.row % 2 == 0) {
       cell.backgroundColor = [UIColor lightGrayColor];
    }
    else
    {
        cell.backgroundColor = [UIColor darkGrayColor];
    }
    ....

    return cell;
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-10-13T10:53:42.800

任何试图快速做到这一点的人都是我的代码。小巧玲珑。

这个技巧甚至适用于我不使用 cellForRowAtIndexPath 方法的静态单元格。

抱歉回答太少了。希望您了解数据源和代表。

```
 override func tableView(tableView: UITableView, willDisplayCell cell: UITableViewCell, forRowAtIndexPath indexPath: NSIndexPath) {

    if (indexPath.row % 2) != 0{
        cell.backgroundColor = UIColor .blackColor()
    }else{
        cell.backgroundColor = UIColor .lightGrayColor()

    }

 } 
```

它会给你这样的结果......

[![使用 Swift 为 ios 中的每个备用单元格着色](../Images/b829ab8914bcef460bebf8296f090666.png)](https://i.stack.imgur.com/4PZIU.png)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-19T11:05:13.800

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithFrame:CGRectZero reuseIdentifier:CellIdentifier] autorelease];
}
    if(indexPath.row%2==0)
        cell.contentView. backgroundColor=[UIColor redColor];
    else
        cell.contentView.backgroundColor=[UIColor greenColor];

return cell;

} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-19T11:03:41.403

在您的代码中搜索 cellForRowAtIndexPath。该方法负责在您的表格视图中创建单元格。更多信息：[UITableViewCell 在自定义单元格中具有备用背景颜色](https://stackoverflow.com/questions/11169281/uitableviewcell-with-alternate-background-color-in-customized-cells)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-03-19T11:04:40.257

在您的 cellForRow 方法中，您应该检查 indexPath.row 是否可被 2 整除分配第一种颜色，否则分配第二种颜色并返回结果单元格

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-02-11T07:28:21.313

```
func colorForIndex(index: Int) -> UIColor 
{
    let itemCount = stnRepos.count - 1
    let color = (CGFloat(index) / CGFloat(itemCount)) * 0.6
    return UIColor(red: 0.80, green: color, blue: 0.0, alpha: 1.0)
}

func tableView(tableView: UITableView, willDisplayCell cell: UITableViewCell,
    forRowAtIndexPath indexPath: NSIndexPath) 
{        
    if (indexPath.row % 2 == 0)
    {
        cell.backgroundColor = colorForIndex(indexPath.row)
    } else {
        cell.backgroundColor = UIColor.whiteColor()()
    }
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-10-26T19:45:29.263

对于**Swift 3** + 并且不透明度降低：

```
func tableView(_ tableView: UITableView, willDisplay cell: UITableViewCell, forRowAt indexPath: IndexPath) {

        if(indexPath.row % 2 == 0) {
            cell.backgroundColor = UIColor.red.withAlphaComponent(0.05)
        } else {
            cell.backgroundColor = UIColor.white
        }
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-11-27T23:04:33.797

在这样一个简单的例子中，我会选择三元运算符。我只是讨厌看到 cell.backgroundColor 重复。

```
func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell {

.
.
.
    cell.backgroundColor = indexPath.row % 2 == 0 ? UIColor.red.withAlphaComponent(0.05) : .white
.
.
.
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-03-19T11:03:24.510

您可以运行一个循环，它将索引 path.row 增加 2，然后在该循​​环的主体中您可以分配颜色。，

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-05-13T07:33:15.890

**这是 Swift 4.x 及更高版本的工作代码**

```
func tableView(_ tableView: UITableView, willDisplay cell: UITableViewCell, forRowAt indexPath: IndexPath) {
    if(indexPath.row % 2 == 0) {
        cell.backgroundColor = UIColor.white
    } else {
        cell.backgroundColor =  UIColor.lightGray
    }
} 
```

# javascript - 如何从 div 中删除链接并通过 jQuery 将其添加到另一个 div？

> ID：15497651
> 
> 赞同：0
> 
> 时间：2013-03-19T11:01:45.257
> 
> 标签：javascript, jquery, html

我需要删除`<a>`from`list-container`到`selected container`on `click`。如何用 jQuery 做到这一点。

```
<div class="list-container">
    <a class="list-item" data-type="community" href="javascript:{}">Community Tower 2<span class="icon icon-add"></span></a>
    <a class="list-item" data-type="community" href="javascript:{}">Community Tower 3<span class="icon icon-add"></span></a>
</div>

<div class="selected-container">
    <a class="list-item" href="javascript:{}">U-Bora Tower (Property) <span class="icon icon-remove"></span></a>
    <a class="list-item" href="javascript:{}">Business Bay (Community) <span class="icon icon-remove"></span></a>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T11:05:36.787

尝试这个：

```
var target = $('.selected-container');
$('.list-container > a').click(function() {
    target.append($(this));
}); 
```

**演示**

[先试后买](http://jsfiddle.net/9cPQ5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T11:06:14.777

在 Click 函数中，编写此代码。

```
$(".selected-container").append($(".list-container").html()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T11:06:51.093

```
$(".list-container a").click(function() {   
 $(this).prependTo('.selected-container');
}); 
```

我的[小提琴演示](http://jsfiddle.net/blackhawx/b6FXM/)

# java - 比 BufferedReader.readLine() 更好的方法？

> ID：15497652
> 
> 赞同：1
> 
> 时间：2013-03-19T11:01:48.120
> 
> 标签：java, bufferedreader

使用`ServerSocket`和`BufferedReader.readLine()`输入仅在客户端终止线路后才读取，无论如何都要读取输入，并在线路终止之前发送输出？

```
ServerSocket SRVSOCK = new ServerSocket(35553);
while(true){
    Socket SOCK = SRVSOCK.accept();
    InputStreamReader IR = new InputStreamReader(SOCK.getInputStream());
    BufferedReader BR = new BufferedReader(IR);

    String MESSAGE = BR.readLine();

    PrintStream PS = new PrintStream(SOCK.getOutputStream());
    System.out.println(MESSAGE);
    PS.print("Returned Successfully");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:05:23.143

您可以使用`bufferedReader.read()`which 一次返回一个字符的值

```
StringBuffer response = "";    

while ((c = bufferedReader.read()) != -1) 
{
        //Since c is an integer, cast it to a char. If it isn't -1, it will be in the correct range of char.
        response.append( (char)c ) ;  
} 
```

如果您使用此方法，则由您决定何时可以开始解析结果并发送回复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T11:18:32.393

看看**[这个](https://stackoverflow.com/questions/15405968/removing-all-empty-elements-from-an-character-array/15406675#15406675)**答案。

您可以将输入读入大小由您控制的缓冲区。

（如果链接到自己的答案被认为是不好的，请道歉。感觉就像重用它。毕竟我们是开发人员。）

# regex - 如何使用差异排除多个线型？

> ID：15497658
> 
> 赞同：2
> 
> 时间：2013-03-19T11:02:01.700
> 
> 标签：regex, unix, diff

我想对两个 xml 文件进行比较，但忽略 2-3 行模式。

例如：假设我想在比较下面的 xml 格式时忽略可用性和价格。

这是我到目前为止所拥有的：

```
diff -I '^<PRICE>*' 1.xml 2.xml

<CATALOG>

    <PLANT>  
    <COMMON>Bloodroot</COMMON>  
    <BOTANICAL>Sanguinaria canadensis</BOTANICAL>  
    <ZONE>4</ZONE>  
    <LIGHT>Mostly Shady</LIGHT>  
    <PRICE>$2.44</PRICE>  
    <AVAILABILITY>031599</AVAILABILITY>  
    </PLANT>  
</CATALOG> 
```

使用上面的差异，它跳过了价格，但我如何为这个正则表达式添加可用性？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-05-01T15:23:57.250

您是否再次尝试使用 -I？

这对我有用：

```
diff -I 'PRICE' -I 'AVAILABILITY' 1.xml 2.xml 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T11:08:16.363

运行文件`grep -v`以删除不需要的行，然后将`diff`它们删除，如下所示：

```
diff <(grep -vE "^(<PRICE>|<AVAILABILITY>)" 1.xml) <(grep -vE "^(<PRICE>|<AVAILABILITY>)" 2.xml) 
```

`<(...)`语法称为[Process Substitution](http://tldp.org/LDP/abs/html/process-sub.html)。如果您的 shell 不支持它，您将不得不使用临时文件，如下所示：

```
$ grep -vE "^(<PRICE>|<AVAILABILITY>)" 1.xml > 1.new.xml
$ grep -vE "^(<PRICE>|<AVAILABILITY>)" 2.xml > 2.new.xml
$ diff 1.new.xml 2.new.xml 
```

我不认为`diff -I`可以与多种模式一起使用。

# java - 如何按需生成属性的类实例？

> ID：15497662
> 
> 赞同：2
> 
> 时间：2013-03-19T11:02:17.067
> 
> 标签：java, dozer

我正在正确评估推土机框架。我想知道是否可以处理以下用例：

课程：

```
public ClassA {

   private Set<ItemA> aItems;
}

public ClassB {

   private ClassC cInstance;
}

public ClassC {

   private List<ItemB> bItems;
} 
```

推土机映射：

```
<mapping>
   <class-a>ClassA</class-a>
   <class-b>ClassB</class-b>
   <field>
      <a>aItems</a>
      <b>cInstance.bItems</b>
   </field>
 </mapping> 
```

从我到目前为止的测试来看，这似乎不起作用。我特别想知道我应该如何告诉推土机它应该按需生成 ClassB**和ClassC 的实例？**特别是我是否需要为 ClassB 提供特定的推土机映射，它仅作为“中间”类存在于我的目标模型中？

PS：如果有帮助，我的目标模型由 JAXB 类组成

PPS：我还尝试修改 cInstance 的 setter 方法，如果它为 null，它应该生成一个新的 ClassC 实例 - 不幸的是，没有任何运气。此外，我不想以这种方式修改 setter 方法（但是，也许我可以将其外包给将用于映射的 Factory 类）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:02:15.497

我没有推土机的经验，但从手册来看，以下应该可以工作：创建一个[自定义 bean 工厂](http://dozer.sourceforge.net/documentation/custombeanfactories.html)来`ClassB`实现[推土机`BeanFactory`接口](http://dozer.sourceforge.net/apidocs/org/dozer/BeanFactory.html)：

```
public class FactoryB implements BeanFactory {
  public Object createBean(Object source, Class sourceClass,
                           String targetBeanId) {
    assert(sourceClass.equals(ClassA.class));
    assert(ClassB.class.getName().equals(targetBeanId));
    ClassA a = (ClassA)source;
    ClassB b = new ClassB();
    if (a.aItems != null && !a.aItems.isEmpty())
      b.cInstance = new ClassC();
    return b;
  }
} 
```

如果您的字段确实是私有的，并且您没有它们的公共访问器，您可能必须规避访问限制，但对于 JAXB 生成的类，情况不应该如此。

现在您应该能够使用这样的[深度映射](http://dozer.sourceforge.net/documentation/deepmapping.html)来映射事物：

```
<mapping>
   <class-a>ClassA</class-a>
   <class-b bean-factory="FactoryB">ClassB</class-b>
   <field>
      <a>aItems</a>
      <b>cInstance.bItems</b>
   </field>
 </mapping> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:10:35.693

所以看起来最终的解决方案相当简单，因为我的目标类是 JAXB 类，我可以简单地使用 JAXB 类的默认工厂 (org.dozer.factory.JAXBBeanFactory)。引爆点可能是应该直接访问深度映射目标字段（'is-accessible="true"'）。但是，我还创建了从 ClassA.aitems 到 ClassC.cItems 的进一步直接映射（但我不能 100% 确定这是否将用于所描述的 ClassA 到 ClassB 映射）。无论如何，最后我找到了一个相当简单和直观的解决方案，更少/没有额外的工厂编码。

# apache-poi - Apache POI - 如何部分写入 XLS

> ID：15497671
> 
> 赞同：0
> 
> 时间：2013-03-19T11:02:58.113
> 
> 标签：apache-poi, xls

我使用 Apache POI，并且我有很多数据要部分写入 *.xls 文件。现在我使用：

```
FileOutputStream fileOutputStream = null;
File tmpFile = new File("blabla.xls");
Workbook workbook = null;

try {
    for(int i = 1; i <= pageNumber; i++) {            
        workbook = xlsGenerator.generateWorkbook(someData, i);
        fileOutputStream = new FileOutputStream(tmpFile);
        workbook.write(fileOutputStream);
     }
} 
```

但它不起作用。它总是替换旧数据而不是将新数据附加到工作簿。那么，有没有办法分部分写呢？

# android - 如何在 apk 文件中查找机器人测试的主要活动

> ID：15497672
> 
> 赞同：3
> 
> 时间：2013-03-19T11:02:58.230
> 
> 标签：android, testing, automated-tests, dropbox, robotium

我有很多 apk 文件，我想用 robotsium 为它们编写简单的测试。当我试图为他们找到主要活动时，我遇到了一些问题，例如在 Dropbox 应用程序中。在 AndroidManifest.xml 我发现这个：

`</activity> <provider android:name=".provider.ZipperedMediaProvider" android:exported="false" android:authorities="com.dropbox.android.ZipperedMediaProvider"></provider> <provider android:name=".provider.CameraUploadsProvider" android:exported="false" android:authorities="com.dropbox.android.CameraUploadsProvider"></provider> <activity android:theme="@android:01030055" android:name=".activity.DropboxBrowser"> <intent-filter > <action android:name="android.intent.action.MAIN"></action> <category android:name="android.intent.category.LAUNCHER"></category> </intent-filter> <intent-filter android:label="Dropbox File Browser"> <action android:name="com.dropbox.BROWSE"></action> <action android:name="android.intent.action.VIEW"></action> <action android:name="android.intent.action.EDIT"></action> <category android:name="android.intent.category.DEFAULT"></category> <data android:mimeType="vnd.android.cursor.dir/vnd.dropbox.entry"></data> <data android:mimeType="vnd.android.cursor.item/vnd.dropbox.entry"></data> </intent-filter> </activity>`

如何理解主要活动是如何被调用的？我正在使用 ApkAnalyser，我尝试了不同的类名和其他字符串，但机器人测试无法启动应用程序并写道我的项目中没有测试：/（apk 在我的 PC 中重新签名）我想了解，如何从 th apk 文件中识别 MainActivity？谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-11-03T17:29:52.163

我知道这是旧的，但我碰巧遇到了它。

问题是：“我想了解，如何从 apk 文件中识别 MainActivity？” 因为你的盒子上应该有 SDK 和 Build 文件。请执行下列操作：

打开命令窗口/终端

`cd <SDK PATH>/build-tools/<BUILD TOOLS #>/`

MAC/Linux

`./aapt dump badging <path to the APK file>`

视窗

`aapt.exe dump badging <path to the APK file>`

命令参考：badging 打印在 APK 中声明的应用的标签和图标。

Android 资产打包工具 (aapt) 获取您的应用程序资源文件，例如 AndroidManifest.xml 文件和活动的 XML 文件，并编译它们。

[http://developer.android.com/tools/building/index.html](http://developer.android.com/tools/building/index.html)

输出将是这样的：

```
./aapt dump badging  ~/Documents/Projects/Eclipse/AndroidAutomation/Application/Project-debug-0.9.0.65.apk 
package: name='com.company.mobile.debug' versionCode='1' versionName='0.9.0.65-QADrop' platformBuildVersionName=''
sdkVersion:'15'
targetSdkVersion:'19'
uses-permission: name='android.permission.INTERNET'
uses-permission: name='android.permission.ACCESS_NETWORK_STATE'
application-label:'Company-QADrop'
application-icon-160:'res/drawable-hdpi-v4/ic_launcher.png'
application-icon-240:'res/drawable-hdpi-v4/ic_launcher.png'
application-icon-320:'res/drawable-xhdpi-v4/ic_launcher.png'
application-icon-480:'res/drawable-xxhdpi-v4/ic_launcher.png'
application: label='Company-QADrop' icon='res/drawable-hdpi-v4/ic_launcher.png'
application-debuggable
launchable-activity: name='com.company.mobile.default'  label='' icon=''
feature-group: label=''
  uses-feature: name='android.hardware.screen.portrait'
  uses-implied-feature: name='android.hardware.screen.portrait' reason='one or more activities have specified a portrait orientation'
  uses-feature: name='android.hardware.touchscreen'
  uses-implied-feature: name='android.hardware.touchscreen' reason='default feature for all apps'
main
other-activities
supports-screens: 'small' 'normal' 'large' 'xlarge'
supports-any-density: 'true'
locales: '--_--'
densities: '160' '240' '320' '480' 
```

您要查找的是：“launchable-activity”

完毕！

我希望这可以帮助别人。

Ĵ

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T16:21:09.373

在一个 android 应用程序中总是有一个主要的活动，但不仅可以启动这个活动。在一个应用程序中可能有多个活动，您可以分别启动它们。主活动必须有 android:name="android.intent.category.LAUNCHER"。在您的示例中，唯一的主要活动是： .activity.DropboxBrowser 此处的更多信息（尤其是启动模式）：http: [//developer.android.com/guide/topics/manifest/activity-element.html](http://developer.android.com/guide/topics/manifest/activity-element.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T12:07:20.287

此链接为我们提供了完美的方法

[http://code.google.com/p/robotium/wiki/RobotiumForAPKFiles](http://code.google.com/p/robotium/wiki/RobotiumForAPKFiles)

在此，当您使用 re-sign.jar 文件重新签署 apk 时，它会告诉您 apk 文件的名称和活动。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-02T09:09:56.843

反编译apk文件。找到`AndroidManifest.xml`文件...打开文件并找到以包含意图过滤器的活动开头的第一行...此活动通常包含主要活动名称...在此代码中，主要活动名称是 MainActivity

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.lenovo.speech2sms">
<uses-permission android:name="android.permission.RECORD_AUDIO"/>
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.SEND_SMS"/>

<application
    android:allowBackup="true"
    android:icon="@mipmap/app_icon_256"
    android:label="@string/app_name"
    android:roundIcon="@mipmap/ic_launcher_round"
    android:supportsRtl="true"
    android:theme="@style/AppTheme">
    <activity
        android:name=".MainActivity"
        android:screenOrientation="portrait">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".Main2Activity"
        android:screenOrientation="portrait" />
    <activity
        android:name=".Main3Activity"
        android:screenOrientation="portrait"/>
    <activity
        android:name=".Main4Activity"
        android:screenOrientation="portrait">
    </activity>
</application> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T16:10:32.093

主要活动在您上面的 XMl 中定义，它将链接到主要的意图过滤器。

在上述代码的情况下，它将包含在以下内容中：

它告诉我活动是“.activity.DropboxBrowser”。

这 ”。” 在开头意味着您需要附加应用程序之前的任何包名称，因此它将类似于“xxx.xxx.activity.DropboxBrowser”，其中 xxx.xxx 是在 android 清单顶部定义的包名称（或者您可以用pacakagemanager查）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-12T11:09:35.570

为了节省时间（如果你想测试超过 100 个 apk），你必须自动化这个识别步骤。

为此，您可以解析 Manifestfile 并仅选择处理由 android.intent.action.MAIN 动作和类别 android.intent.category.LAUNCHER 组成的意图的 Activity。

解析灵感：com.android.ide.common.xml.AndroidManifestParser

# android - 应用程序启动时间过长

> ID：15497677
> 
> 赞同：5
> 
> 时间：2013-03-19T11:03:19.463
> 
> 标签：android, performance, startup

我有一个 android 应用程序，在单击它的图标后需要 >=5 秒才能显示出来。

单击该图标后，我会在状态栏中看到带有应用程序名称的黑屏。5 秒以上后，主屏幕出现。

我在 SO 上引用[了这篇文章](https://stackoverflow.com/questions/4706251/how-to-improve-the-startup-time-of-an-android-app)，我从堆栈跟踪中得到了以下结果

```
16:13:14.915: I/ActivityManager(59): Starting activity: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=packageName/.SelectType }
16:13:14.954: I/SurfaceFlinger(59): 
16:13:14.954: I/SurfaceFlinger(59): SurfaceFlinger::createSurface() : layer->mIdentity=176, LayerName= Starting packageName
16:13:14.954: I/SurfaceFlinger(59): SurfaceFlinger::createSurface() : layer->clientIndex=2, surfaceHandle->mToken=0x2
16:13:16.026: D/AnrParser(184): Waiting kernel log . . .
16:13:16.614: D/dalvikvm(6890): GC_FOR_MALLOC freed 12274 objects / 785016 bytes in 135ms
16:13:17.784: D/dalvikvm(133): GC_EXTERNAL_ALLOC freed 415 objects / 21624 bytes in 1285ms
16:13:17.914: D/dalvikvm(6890): GC_FOR_MALLOC freed 5762 objects / 339024 bytes in 90ms
16:13:18.174: D/AnrParser(184): Waiting kernel log . . .
16:13:18.344: E/keystore(6966): chdir: /data/misc/keystore: Permission denied
16:13:19.693: D/dalvikvm(6890): GC_FOR_MALLOC freed 5994 objects / 372624 bytes in 93ms
16:13:20.173: D/AnrParser(184): Waiting kernel log . . .
16:13:22.173: D/AnrParser(184): Waiting kernel log . . .
16:13:22.743: I/SurfaceFlinger(59): 
16:13:22.743: I/SurfaceFlinger(59): SurfaceFlinger::createSurface() : layer->mIdentity=177, LayerName= packageName/packageName.SelectType
16:13:22.743: I/SurfaceFlinger(59): SurfaceFlinger::createSurface() : layer->clientIndex=0, surfaceHandle->mToken=0x0
16:13:22.983: D/dalvikvm(6890): GC_FOR_MALLOC freed 21467 objects / 1097728 bytes in 119ms
16:13:23.403: E/keystore(6973): chdir: /data/misc/keystore: Permission denied
16:13:24.173: D/AnrParser(184): Waiting kernel log . . .
16:13:24.923: W/ActivityManager(59): Launch timeout has expired, giving up wake lock!
16:13:25.264: W/ActivityManager(59): Activity idle timeout for HistoryRecord{47f56388 packageName/.SelectType}
16:13:25.403: I/ActivityManager(59): Displayed activity packageName/.SelectType: 10206 ms (total 10206 ms) 
```

正如您在上面的日志中看到的，第一条语句是`16:13:14.915: I/ActivityManager(59): Starting activity`，最后一条语句是`16:13:25.403: I/ActivityManager(59): Displayed activity`。

所以有一个大约的差距。10 到 11 秒。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T11:07:04.117

您可能在活动的 onCreate() 或 onResume() 上执行了一些繁重的操作……尝试调试它以查看您是否直接在这些方法中执行数据库或 I/O 操作。您还可以激活[StrictMode](https://developer.android.com/reference/android/os/StrictMode.html)以更好地了解导致应用程序变慢的原因。

# html - 应用了 CSS3 渐变的 HTML 中的梯形

> ID：15497680
> 
> 赞同：8
> 
> 时间：2013-03-19T11:03:24.373
> 
> 标签：html, css, transform, masking

我想在 HTML5 中制作梯形。我知道可以使用边界半径和高度 0 来完成：

```
#trapezoid {
    border-bottom: 100px solid red;
    border-left: 50px solid transparent;
    border-right: 50px solid COLOR HERE;
    height: 0;
    width: 100px;
} 
```

但是，我想应用 CSS3 渐变，而上述方法只允许纯色。

以下样式将制作一个平行四边形。但是有没有办法只倾斜一侧而不是两侧？

```
-webkit-transform: skew(20deg); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T14:02:49.360

诀窍是创建一个[有角度的内容遮罩](http://cssglobe.com/angled-content-mask-with-css/)，然后用所需的样式填充遮罩区域，在本例中为背景渐变。内容将被剪裁成蒙版的形状。

掩码只是一个带有`overflow:hidden`. 如果对容器应用 CSS3 变换（例如，旋转或倾斜操作），则遮罩将具有旋转或倾斜的形状，并且内容将被剪裁为该形状。一对嵌套的蒙版，外侧的蒙版倾斜，内侧的蒙版反斜，生成具有 2 个斜边的梯形蒙版。仅倾斜内部遮罩会产生一个带有 1 个斜边的梯形。

```
 Both masks skewed           Inner mask skewed
          _________________           _________________
         /                 \          |                \
        /  clipped content  \         | clipped content \
       /_____________________\        |__________________\ 
```

JSFiddle 演示：

*   [两个口罩都歪了](http://jsfiddle.net/Matt_Coughlin/8BJUW/1/)
*   [内面罩歪斜](http://jsfiddle.net/Matt_Coughlin/QFUKU/4/)

**HTML**

```
<div class="main">
    <div class="outer-mask">
        <div class="inner-mask">
            <div class="content">Styled content goes here</div>
        </div>
    </div>
</div> 
```

**CSS**

```
.main {
    position: relative;
}
.outer-mask {
    position: absolute;
    left: 95px;
    top: 45px;
    width: 390px;
    height: 110px;
    overflow: hidden;
    -webkit-transform: skew(20deg, 0deg);
        -ms-transform: skew(20deg, 0deg);
         -o-transform: skew(20deg, 0deg);
            transform: skew(20deg, 0deg);
}
.inner-mask {
    position: absolute;
    left: -45px;
    top: 0px;
    width: 390px;
    height: 110px;
    overflow: hidden;
    -webkit-transform: skew(-40deg, 0deg);
        -ms-transform: skew(-40deg, 0deg);
         -o-transform: skew(-40deg, 0deg);
            transform: skew(-40deg, 0deg);
} 
```

# javascript - jQuery 自动完成应用于所有具有相似名称的字段

> ID：15497684
> 
> 赞同：1
> 
> 时间：2013-03-19T11:03:36.643
> 
> 标签：javascript, jquery

我有一个多行的表格。每行都有一个名称为开头的产品列`product`。所以名字是`product1`, `product2`,`product3`等等

我有一个自动完成脚本如下：

```
<script type="text/javascript">
    $(function(){
        $("#product1").autocomplete({ //product is input cell to reference. autocomplete is a jquery function that is being called.
            source: "get_sku_codes",
            messages: {
            noResults: '',
            results: function() {}
            }       
        });
    });
</script> 
```

这在输入上效果很好，但由于脚本显然引用了不同的输入`product1`而不起作用。`product2`

`product`当填充任何以开头的单元格时，如何修改要触发的脚本？

**更新动态内容**

```
<script type="text/javascript">
var counter = 1;
jQuery("table.authors-list").on('change','input[name^="qty"]',function(event){
    event.preventDefault();
    counter++;
    var newRow = jQuery('<tr>'+
      ' <td><a class="deleteRow"> <img src="<?php echo base_url() ?>application/assets/images/no.jpg" /></a></td>' +
      ' <td><input type="text" id="product' +  counter + '" name="product' +  counter + '" class="ui-input-text ui-body-c ui-corner-all ui-shadow-inset" /></td>'+
      ' </tr>');
    jQuery('table.authors-list').append(newRow);
});
</script> 
```

**迪佩什更新**

```
<script type="text/javascript">
var counter = 1;
jQuery("table.authors-list").on('change','input[name^="qty"]',function(event){
    event.preventDefault();
    counter++;
    var newRow = jQuery('<tr>'+
      ' <td><a class="deleteRow"> <img src="<?php echo base_url() ?>application/assets/images/no.jpg" /></a></td>' +
      ' <td><input type="text" id="product_' +  counter + '" name="product_' +  counter + '" class="ui-input-text ui-body-c ui-corner-all ui-shadow-inset" /></td>' +
      ' </tr>');
    jQuery('table.authors-list').append(newRow);

$('#product'+counter).autocomplete(
{
    source: "get_sku_codes",
    messages: {
        noResults: '',
        results: function() {}
    }       
});

});

jQuery("table.authors-list").on('click','.deleteRow',function(event){
 if ($(this).parents('table').find('tr').length >  2) {  //get number of rows(TR's) in table 
    $(this).closest('tr').remove();
 }else{
  alert ('Form must have at least one row') // alert if only one row left in table
 }

});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T11:07:25.107

使用属性以选择器开头`[name^="value"]`

> **描述：**选择具有指定属性的元素，其值恰好以给定字符串开头。

```
$('input[name^="product"]').autocomplete({ 
```

### **[`Official Document`](http://api.jquery.com/attribute-starts-with-selector/)**

**对于动态加载**

你可以使用`.on`它。

```
$('input[name^="product"]').on('focus',function(){
   // code for $(this).autoComplete();
}); 
```

根据更新的代码，您可以添加以下代码，以便新添加的 DOM 附加了自动完成代码。

```
$('#product'+counter).autocomplete(
{
    source: "get_sku_codes",
    messages: {
        noResults: '',
        results: function() {}
    }       
}); 
```

`append`在语句后添加上面的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T11:08:45.660

尝试对所有这些元素应用相同的类

```
$(".className").autocomplete({ 
```

或者

```
$("input[name^='product']").autocomplete({ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T11:12:04.780

什么是身份证`#product1`？`div`? `a`标签？

比如说，如果它是 a `div`，则遍历所有元素：

```
$('[.(container wrapper) > div]').each(function () {}); 
```

`.(container wrapper)`div 或 p 的类名在哪里`'products'`.. 自然地，您会删除`[]`..only 以进行演示并使整个事情变得有意义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T11:07:57.293

尝试多重选择器

```
$("input[id^='product']").autocomplete({  //if you have ID
    .....

$("input[name^='product']").autocomplete({  //if you have name
    ..... 
```

**更新**

创建一个函数

```
 function callAutocomplete(obj)
 {
      $('#'+obj).autocomplete{
                //your autocompletecode 
              }; 
 } 
```

在此行之后调用此函数

```
.....
jQuery('table.authors-list').append(newRow);
callAutocomplete("product" +  counter); 
```

和这里

```
$(function(){
      callAutocomplete("product1"); //remove other code that u mentioned above 
}); 
```

那应该可以解决问题...

# javascript - 如何不通过争论并仍然使功能正常工作？

> ID：15497686
> 
> 赞同：4
> 
> 时间：2013-03-19T11:03:39.343
> 
> 标签：javascript

```
function drawLine(ctx, sX, sY, eX, eY, sRGB, fRGB, lWidth, capStyle)
{
    ctx.beginPath();
    ctx.moveTo(sX, sY);
    ctx.lineTo(eX, eY);
    ctx.lineWidth = lWidth||5;
    ctx.strokeStyle = 'rgb(49, 129, 48)';
    ctx.lineCap = 'round';
    ctx.stroke();
    ctx.closePath();
} 
```

然后我想这样调用函数：

```
drawLine(ctx, 50, 50, 100, 100, someStrokeStyle, someFillStyle, someCapStyle); 
```

如您所见，我已跳过`lWidth`参数。我希望该函数仍然有效，即使`lWidth`没有作为参数传递。我将如何做到这一点？Atm，它可能认为`someCapStyle`是`lwidth`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T11:09:32.767

当您有大量参数要传递给您的函数时，请使用对象：

```
function foo({param1: val1, parma2: val2}) {} 
```

在这种情况下，您将不会依赖于参数的数量和它们被表示的顺序。

所以你可以重写你的函数：

```
 function drawLine(drawObj)
{
    ctx.beginPath();
    ctx.moveTo(drawObj.sX, drawObj.sY);
    ctx.lineTo(drawObj.eX, drawObj.eY);
    ctx.lineWidth = drawObj.lWidth||5;
    ctx.strokeStyle = drawObj.sRGB;
    ctx.lineCap = drawObj.capStyle;
    ctx.stroke();
    ctx.closePath();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T11:07:26.177

当您不传递任何参数时，`undefined`将传递值，因此只需在函数中检查参数是否已传递：

```
if(typeof argument == "undefined") 
{ 
   argument = "default value";
} 
```

所以不通过`lWidth`，只是`undefined`作为它的价值通过

PS 最好的方法是使用单个参数`args`，它将是包含所有当前参数作为属性的对象。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T11:26:21.067

您想要的是对`drawLine`函数进行部分评估，将常量值分配给`lWidth`. [有一个名为Jeene](http://blog.higher-order.net/2008/09/14/jeene/ "Jeene：JavaScript 的自动部分求值器|  高阶")的 JavaScript 库可以做到这一点。这是你将如何使用它：

```
function drawLine(ctx, sX, sY, eX, eY, sRGB, fRGB, lWidth, capStyle) {
    ctx.beginPath();
    ctx.moveTo(sX, sY);
    ctx.lineTo(eX, eY);
    ctx.lineWidth = lWidth || 5;
    ctx.strokeStyle = "rgb(49, 129, 48)";
    ctx.lineCap = "round";
    ctx.stroke();
    ctx.closePath();
}

Function.prototype.specialize = net.higherorder.jeene.Jeene.make();

var drawLine2 = drawLine.specialize({
    lWidth: null // or whatever value you want
}); 
```

然后你使用`drawLine2`如下：

```
drawLine2(ctx, 50, 50, 100, 100, someStrokeStyle, someFillStyle, someCapStyle); 
```

这称为专业化，是一种非常有用的模式。阅读更多关于它[的信息：无限邻域：Futamura 博士的三个投影](http://blog.sigfpe.com/2009/05/three-projections-of-doctor-futamura.html "无限邻域：二村博士的三个投影")

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T11:07:04.203

您可以将可选参数放在参数列表的末尾。这样，如果您将其省略，其他参数将不会受到影响。

另一种选择是传递具有您要定义的属性的单个对象，例如

```
function drawLine(options) {
    options.ctx.beginPath();
    options.ctx.moveTo(options.sX, options.sY);
    options.ctx.lineTo(options.eX, options.eY);
    // etc.
 } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-19T11:09:32.927

您不能在 Javascript 中使用“函数重载”，但这里有一种方法可以实现您想要的：

[如何在javascript中重载函数？](https://stackoverflow.com/questions/10855908/how-to-overload-functions-in-javascript)

# python - 从 defs 元素更改不同使用元素的属性

> ID：15497687
> 
> 赞同：0
> 
> 时间：2013-03-19T11:03:40.540
> 
> 标签：python, svg

我有一个带有 2 个圆圈的 SVG。事实上，他们只使用一个名为 s1 的“def”。如何仅从一个圆圈（使用）更改属性。例如，当由特定的“使用”元素使用时，我想为元素 s1 设置一个不同的类。

```
<svg viewBox = "0 0 1000 1000" version = "1.1">
    <defs>
    <!-- A circle of radius 200 -->
    <circle id = "s1" cx = "200" cy = "200" r = "200" fill = "yellow" stroke = "black" stroke-width = "3"/>
</defs>
<use x = "100" y = "100" xlink:href = " #s1 "/>
<use x = "100" y = "650" xlink:href = " #s1 "/> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-08T14:06:00.620

您无法更改元素的特定属性 (cx,cy,r)，但您可以使用 更改此 [列表](https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute?redirectlocale=en-US&redirectslug=SVG/Attribute#ConditionalProccessing)中的所有属性`<set ... >`。例如“不透明度”。以下是如何为您的圈子更改它（提示：如果您使用 Opera 或 chrome 打开此 svg，请将光标放在第三个圈子上）：

```
<?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">

<svg viewBox="0 0 1000 1000" version="1.1" height="1000px" width="1000px" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >

<g>
    <rect y="0" width="1000" fill="blue" x="0" height="1000" />

    <defs>
        <circle id = "s1" cx = "200" cy = "200" r = "200" fill = "yellow" stroke = "black" stroke-width = "3"/>
    </defs>

    <use id = "one" x = "100" y = "100" xlink:href = "#s1"/>
    <use id = "two" x = "100" y = "500" xlink:href = "#s1"/>
    <use id = "three" x = "500" y = "100" xlink:href = "#s1">
        <set attributeName="opacity" from="1" to="0.7"  begin="mouseover" end="mouseout"/>
    </use>

    <set xlink:href="#two" attributeName="opacity" from="1" to="0.2"  begin="three.mouseover" end="three.mouseout"/>
    <set xlink:href="#one" attributeName="opacity" from="1" to="0.4"/>

</g>
</svg> 
```

我希望这有帮助。

# php - 用于解析小部件 {widget.option1.option2.optionN} 的正则表达式

> ID：15497688
> 
> 赞同：1
> 
> 时间：2013-03-19T11:03:41.203
> 
> 标签：php, regex

我有这样的字符串

```
{widget-123-abc.option1.option2.optionN} 
```

我的正则表达式：`/widget-([0-9]{3})-([a-z|A-Z]{3})(.*)}/g`

结果我的正则表达式：

```
$a = array(
  [0] => widget-123-abc.option1.option2.optionN},
  [1] => 123,
  [2] => abc,
  [3] => .option1.option2.optionN
) 
```

结果我想要的是：

```
$b = array(
  [0] => widget-123-abc.option1.option2.optionN},
  [1] => 123,
  [2] => abc,
  [3] => option1,
  [4] => option2,
  [..(N)] => option..(N),
) 
```

有什么办法没有`explode('.', $a[3]);`

我可以使用任何正则表达式模式吗？谢谢之前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:09:19.497

是的，你应该使用而不是内爆

```
explode('.', $a[3]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T11:11:37.243

我想，你可以使用这样的东西：

取而代之的是贪婪点：`(.+)`

你应该使用：`([.a-zA-Z0-9])+`

# inversion-of-control - 在 Unity 中检测循环依赖的原因

> ID：15497690
> 
> 赞同：10
> 
> 时间：2013-03-19T11:03:41.920
> 
> 标签：inversion-of-control, castle-windsor, unity-container, circular-dependency

是否可以将 Unity 配置为检测循环引用或拦截类型解析器以显示一些调试信息？

## 例子

这是几个相互依赖的接口和类

```
public interface IThing1 { }

public class Thing1 : IThing1
{
    private IThing2 _thing2;

    public Thing1(IThing2 thing2)
    {
        _thing2 = thing2;
    }

}

public interface IThing2 { }

public class Thing2 : IThing2
{
    private IThing1 _thing1;

    public Thing2(IThing1 thing1)
    {
        _thing1 = thing1;
    }
} 
```

### 温莎城堡

如果在 Castle Windsor 中配置了这两种类型，它将抛出异常并提供一些调试信息以查找循环引用：

```
Castle.MicroKernel.CircularDependencyException: Dependency cycle has been detected when trying to resolve component 'CircularIoC.Thing1'.
The resolution tree that resulted in the cycle is the following:
Component 'CircularIoC.Thing1' resolved as dependency of
    component 'CircularIoC.Thing2' resolved as dependency of
    component 'CircularIoC.Thing1' which is the root component being resolved. 
```

### 统一

如果 Unity 配置为像这样解析这些类型

```
 private static void ResolveWithUnity()
    {
        var container = new UnityContainer();

        container.RegisterType<IThing1, Thing1>();
        container.RegisterType<IThing2, Thing2>();

        var thing = container.Resolve<IThing1>();

        container.Dispose();
    } 
```

对 container.Resolve<> 的调用将导致 StackOverflowException。

这是[记录在案的行为](http://msdn.microsoft.com/en-gb/library/ff649679.aspx)，但如果有一些更有用的信息会很好。是否有任何定制可以提供有关循环引用的更多信息？

或者，有什么方法可以连接到类型解析器进程以发出一些调试信息？我正在考虑装饰主要类型解析器以输出正在解析的类型的名称。这将提供一些反馈和指向导致循环引用的依赖项的指针。

虽然我知道更改为不同的 IoC 可以解决问题，但不幸的是，这不是一个选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-21T12:58:53.687

遗憾的是，Unity 不支持这个（非常重要的）功能。如果您愿意投入其中，您可以使用一些肘部油脂来实现智能装饰器。

您需要的是覆盖所有注册方法并为依赖项（[依赖图](http://en.wikipedia.org/wiki/Dependency_graph)）构建和更新数据结构。然后编写一个执行[DFS](http://en.wikipedia.org/wiki/Depth-first_search)以检测循环依赖的方法，您可以将它用作注册过程的终结器，如果循环依赖是可能的，它将检测预解析，或者在每次解析时使用它来处理请求的特定类型。

如您所见，这是很多工作......

另一种选择，只是用装饰器包装解决方法并捕获*StackOverflowException*，对其进行分析以确保它是由解析过程产生的，并构建适当的循环依赖异常。

# django - Django：基于类的视图可以一次接受两种形式吗？

> ID：15497693
> 
> 赞同：24
> 
> 时间：2013-03-19T11:03:54.940
> 
> 标签：django, django-class-based-views, django-1.5

如果我有两种形式：

```
class ContactForm(forms.Form):
    name = forms.CharField()
    message = forms.CharField(widget=forms.Textarea)

class SocialForm(forms.Form):
    name = forms.CharField()
    message = forms.CharField(widget=forms.Textarea) 
```

并想使用基于类的视图，并将两个表单都发送到模板，这可能吗？

```
class TestView(FormView):
    template_name = 'contact.html'
    form_class = ContactForm 
```

似乎 FormView 一次只能接受一种形式。在基于函数的视图中，虽然我可以轻松地将两个表单发送到我的模板并在 request.POST 中检索两者的内容。

```
variables = {'contact_form':contact_form, 'social_form':social_form }
return render(request, 'discussion.html', variables) 
```

这是使用基于类的视图（通用视图）的限制吗？

非常感谢

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2014-06-03T09:21:14.667

这是一个可扩展的解决方案。我的出发点是这个要点，

[https://gist.github.com/michelts/1029336](https://gist.github.com/michelts/1029336)

我已经增强了该解决方案，以便可以显示多个表单，但可以提交全部或个人

[https://gist.github.com/jamesbrobb/748c47f46b9bd224b07f](https://gist.github.com/jamesbrobb/748c47f46b9bd224b07f)

这是一个示例用法

```
class SignupLoginView(MultiFormsView):
    template_name = 'public/my_login_signup_template.html'
    form_classes = {'login': LoginForm,
                    'signup': SignupForm}
    success_url = 'my/success/url'

    def get_login_initial(self):
        return {'email':'dave@dave.com'}

    def get_signup_initial(self):
        return {'email':'dave@dave.com'}

    def get_context_data(self, **kwargs):
        context = super(SignupLoginView, self).get_context_data(**kwargs)
        context.update({"some_context_value": 'blah blah blah',
                        "some_other_context_value": 'blah'})
        return context

    def login_form_valid(self, form):
        return form.login(self.request, redirect_url=self.get_success_url())

    def signup_form_valid(self, form):
        user = form.save(self.request)
        return form.signup(self.request, user, self.get_success_url()) 
```

模板看起来像这样

```
<form class="login" method="POST" action="{% url 'my_view' %}">
    {% csrf_token %}
    {{ forms.login.as_p }}

    <button name='action' value='login' type="submit">Sign in</button>
</form>

<form class="signup" method="POST" action="{% url 'my_view' %}">
    {% csrf_token %}
    {{ forms.signup.as_p }}

    <button name='action' value='signup' type="submit">Sign up</button>
</form> 
```

模板上需要注意的重要一点是提交按钮。他们必须将他们的“name”属性设置为“action”，并且他们的“value”属性必须与“form_classes”字典中的表单名称相匹配。这用于确定已提交的单个表单。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-03-19T12:15:25.137

默认情况下，基于类的视图只支持每个视图一个表单。但是还有其他方法可以完成您所需要的。但同样，这不能同时处理两种形式。这也适用于大多数基于类的视图以及常规表单。

**视图.py**

```
class MyClassView(UpdateView):

    template_name = 'page.html'
    form_class = myform1
    second_form_class = myform2
    success_url = '/'

    def get_context_data(self, **kwargs):
        context = super(MyClassView, self).get_context_data(**kwargs)
        if 'form' not in context:
            context['form'] = self.form_class(request=self.request)
        if 'form2' not in context:
            context['form2'] = self.second_form_class(request=self.request)
        return context

    def get_object(self):
        return get_object_or_404(Model, pk=self.request.session['value_here'])

    def form_invalid(self, **kwargs):
        return self.render_to_response(self.get_context_data(**kwargs))

    def post(self, request, *args, **kwargs):
        self.object = self.get_object()
        if 'form' in request.POST:
            form_class = self.get_form_class()
            form_name = 'form'
        else:
            form_class = self.second_form_class
            form_name = 'form2'

        form = self.get_form(form_class)

        if form.is_valid():
            return self.form_valid(form)
        else:
            return self.form_invalid(**{form_name: form}) 
```

**模板**

```
<form method="post">
    {% csrf_token %}
    .........
    <input type="submit" name="form" value="Submit" />
</form>

<form method="post">
    {% csrf_token %}
    .........
    <input type="submit" name="form2" value="Submit" />
</form> 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-05-08T05:38:02.457

一个基于类的视图有可能一次接受两种形式。

**视图.py**

```
class TestView(FormView):
    template_name = 'contact.html'
    def get(self, request, *args, **kwargs):
        contact_form = ContactForm()
        contact_form.prefix = 'contact_form'
        social_form = SocialForm()
        social_form.prefix = 'social_form'
        # Use RequestContext instead of render_to_response from 3.0
        return self.render_to_response(self.get_context_data({'contact_form': contact_form, 'social_form': social_form}))

    def post(self, request, *args, **kwargs):
        contact_form = ContactForm(self.request.POST, prefix='contact_form')
        social_form = SocialForm(self.request.POST, prefix='social_form ')

        if contact_form.is_valid() and social_form.is_valid():
            ### do something
            return HttpResponseRedirect(>>> redirect url <<<)
        else:
            return self.form_invalid(contact_form,social_form , **kwargs)

    def form_invalid(self, contact_form, social_form, **kwargs):
        contact_form.prefix='contact_form'
        social_form.prefix='social_form'

        return self.render_to_response(self.get_context_data({'contact_form': contact_form, 'social_form': social_form})) 
```

**表格.py**

```
from django import forms
from models import Social, Contact
from crispy_forms.helper import FormHelper
from crispy_forms.layout import Submit, Button, Layout, Field, Div
from crispy_forms.bootstrap import (FormActions)

class ContactForm(forms.ModelForm):
    class Meta:
        model = Contact
    helper = FormHelper()
    helper.form_tag = False

class SocialForm(forms.Form):
    class Meta:
        model = Social
    helper = FormHelper()
    helper.form_tag = False 
```

**HTML**

取一个外部表单类并将操作设置为 TestView Url

```
{% load crispy_forms_tags %}
<form action="/testview/" method="post">
  <!----- render your forms here -->
  {% crispy contact_form %}
  {% crispy social_form%}
  <input type='submit' value="Save" />
</form> 
```

祝你好运

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-27T01:06:57.160

我使用了以下基于以下通用视图`TemplateView`：

```
def merge_dicts(x, y):
    """
    Given two dicts, merge them into a new dict as a shallow copy.
    """
    z = x.copy()
    z.update(y)
    return z

class MultipleFormView(TemplateView):
    """
    View mixin that handles multiple forms / formsets.
    After the successful data is inserted ``self.process_forms`` is called.
    """
    form_classes = {}

    def get_context_data(self, **kwargs):
        context = super(MultipleFormView, self).get_context_data(**kwargs)
        forms_initialized = {name: form(prefix=name)
                             for name, form in self.form_classes.items()}

        return merge_dicts(context, forms_initialized)

    def post(self, request):
        forms_initialized = {
            name: form(prefix=name, data=request.POST)
            for name, form in self.form_classes.items()}

        valid = all([form_class.is_valid()
                     for form_class in forms_initialized.values()])
        if valid:
            return self.process_forms(forms_initialized)
        else:
            context = merge_dicts(self.get_context_data(), forms_initialized)
            return self.render_to_response(context)

    def process_forms(self, form_instances):
        raise NotImplemented 
```

这样做的好处是它是可重用的，并且所有的验证都是在表单本身上完成的。

然后按如下方式使用：

```
class AddSource(MultipleFormView):
    """
    Custom view for processing source form and seed formset
    """
    template_name = 'add_source.html'
    form_classes = {
        'source_form': forms.SourceForm,
        'seed_formset': forms.SeedFormset,
    }

    def process_forms(self, form_instances):
        pass # saving forms etc 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-19T11:25:39.450

这不是基于类的视图的限制。Generic FormView 只是不适合接受两种形式（嗯，它是通用的）。您可以将其子类化或编写自己的基于类的视图以接受两种形式。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-01-30T15:20:16.780

使用[django-superform](https://github.com/gregmuellegger/django-superform)

这是一种非常巧妙的方式，可以将组合表单作为单个对象传递给外部调用者，例如基于 Django 类的视图。

```
from django_superform import FormField, SuperForm

class MyClassForm(SuperForm):
    form1 = FormField(FormClass1)
    form2 = FormField(FormClass2) 
```

在视图中，您可以使用`form_class = MyClassForm`

在 form`__init__()`方法中，您可以使用以下方式访问表单：`self.forms['form1']`

还有一个`SuperModelForm`和`ModelFormField`用于模型形式。

在模板中，您可以使用以下方式访问表单字段：`{{ form.form1.field }}`。我建议使用别名`{% with form1=form.form1 %}`来避免重新读取/重建表单。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-08-26T03:21:48.660

类似于@james 答案（我有一个类似的起点），但它不需要通过 POST 数据接收表单名称。相反，它使用自动生成的前缀来确定哪些表单接收到 POST 数据、分配数据、验证这些表单，最后将它们发送到适当的 form_valid 方法。如果只有 1 个绑定表单，它会发送该单个表单，否则它会发送一个`{"name": bound_form_instance}`字典。

它与`forms.Form`可以分配前缀的其他“表单行为”类兼容（例如 django 表单集），但尚未制作 ModelForm 变体，但您可以在此视图中使用模型表单（请参阅下面的编辑）。它可以处理不同标签中的表单、一个标签中的多个表单或两者的组合。

代码托管在 github ( [https://github.com/AlexECX/django_MultiFormView](https://github.com/AlexECX/django_MultiFormView) ) 上。有一些使用指南和一个涵盖一些用例的小演示。目标是让类感觉尽可能接近 FormView。

这是一个带有简单用例的示例：

**视图.py**

```
 class MultipleFormsDemoView(MultiFormView):
        template_name = "app_name/demo.html"

        initials = {
            "contactform": {"message": "some initial data"}
        }

        form_classes = [
            ContactForm,
            ("better_name", SubscriptionForm),
        ]

        # The order is important! and you need to provide an
        # url for every form_class.
        success_urls = [
            reverse_lazy("app_name:contact_view"),
            reverse_lazy("app_name:subcribe_view"),
        ]
        # Or, if it is the same url:
        #success_url = reverse_lazy("app_name:some_view")

        def get_contactform_initial(self, form_name):
            initial = super().get_initial(form_name)
            # Some logic here? I just wanted to show it could be done,
            # initial data is assigned automatically from self.initials anyway
            return initial

        def contactform_form_valid(self, form):
            title = form.cleaned_data.get('title')
            print(title)
            return super().form_valid(form) 

        def better_name_form_valid(self, form):
            email = form.cleaned_data.get('email')
            print(email)
            if "Somebody once told me the world" is "gonna roll me":
                return super().form_valid(form)
            else:
                return HttpResponse("Somebody once told me the world is gonna roll me") 
```

**模板.html**

```
{% extends "base.html" %}

{% block content %}

<form method="post">
    {% csrf_token %}
    {{ forms.better_name }}
    <input type="submit" value="Subscribe">
</form>

<form method="post">
    {% csrf_token %}
    {{ forms.contactform }}
    <input type="submit" value="Send">
</form>

{% endblock content %} 
```

**编辑 - 关于 ModelForms**

Welp，在查看了 ModelFormView 之后，我意识到创建 MultiModelFormView 并不容易，我可能还需要重写 SingleObjectMixin。同时，只要在模型实例中添加“instance”关键字参数，就可以使用 ModelForm。

```
def get_bookform_form_kwargs(self, form_name):
    kwargs = super().get_form_kwargs(form_name)
    kwargs['instance'] = Book.objects.get(title="I'm Batman")
    return kwargs 
```

# r - 用于 ggplot2 的不带科学记数法的 R 标记中的 cut 函数

> ID：15497694
> 
> 赞同：36
> 
> 时间：2013-03-19T11:03:54.903
> 
> 标签：r, ggplot2, grouping

我使用 cut 和 classIntervals 对 R 中的数据进行分组，稍后我将使用 ggplot2 进行绘图。因此，使用 n=3 进行分位数切割的基本操作如下所示：

```
library(classInt)

a<-c(1,10,100,1000,100000,1000000)
b<-cut(a, 
breaks=data.frame(
  classIntervals(
    a,n=3,method="quantile")[2])[,1],
include.lowest=T) 
```

在哪里`b`：

```
[1] [1,70]          [1,70]          (70,3.4e+04]    (70,3.4e+04]    (3.4e+04,1e+06] (3.4e+04,1e+06]
Levels: [1,70] (70,3.4e+04] (3.4e+04,1e+06] 
```

所以这个输出的第一行是一个带有我的分组数据的向量，我可以在 ggplot2 中使用它。但是我不想让这个向量用科学记数法表示，我希望标签是`[1,70] (70,34000] (3400,1000000]`

我怎样才能做到这一点？如果您有其他方法而不是 cut 和 classInt 来获得相同的结果，我们将不胜感激。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-03-19T11:12:43.520

`dig.lab`在函数中使用参数`cut`：

```
a<-c(1,10,100,1000,100000,1000000)
b<-cut(a, 
breaks=data.frame(
  classIntervals(
    a,n=3,method="quantile")[2])[,1],
include.lowest=T,dig.lab=10) ##Number of digits used
b
[1] [1,70]          [1,70]          (70,34000]      (70,34000]     
[5] (34000,1000000] (34000,1000000]
Levels: [1,70] (70,34000] (34000,1000000] 
```

# shell - 在 shell 脚本中查找和替换

> ID：15497697
> 
> 赞同：0
> 
> 时间：2013-03-19T11:04:06.613
> 
> 标签：shell, unix, sed

我正在尝试用新 IP 替换 IP，但我无法这样做

```
Network_settings="1.1.1.1:8.9.0.0:9.9.9.9: IP ADDRESS: SUBNET MASK: GATEWAY"
val=`echo  "$Network_settings"| cut -d ":" -f1`;
sed -ri 's/(\b[0-9]{1,3}\.){3}[0-9]{1,3}/  'echo "$val"'/g' Network_settings.txt 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:53:51.127

```
val=$( echo "$Network_settings" | awk -F: 'BEGIN{OFS=":"}{$1="2.2.2.2"; print $0}') 
```

这会将新 ip 设置为`2.2.2.2`

这使用 awk。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:03:21.883

shell 不会在这一行中执行 echo 命令：

```
sed -ri 's/(\b[0-9]{1,3}\.){3}[0-9]{1,3}/  'echo "$val"'/g' Network_settings.txt 
```

`sed`一种方法是在脚本中使用双引号：

```
sed -ri "s/(\b[0-9]{1,3}\.){3}[0-9]{1,3}/$val/g" Network_settings.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T12:15:16.560

这是一个使用示例`sed`：

```
sed -r 's/\b([0-9]{1,3}\.){3}[0-9]{1,3}\b/'$val'/' 
```

# asp.net - LinkBut ton OnClick 在本地 IIS 上工作，但不在远程服务器上

> ID：15497700
> 
> 赞同：2
> 
> 时间：2013-03-19T11:04:21.577
> 
> 标签：asp.net, .net, iis-7, webforms

在我拥有的页面上`DropDownList`，`LinkButton`使用以下代码：

```
<asp:LinkButton ID="linkButton1" OnClick="FormSubmit" Text="CLICK ME" runat="server" /> 
```

后面的代码：

```
protected void FormSubmit(object sender, EventArgs e)
{
    Response.Redirect("/location.aspx?dropDownValue=" + this.dropDownList.SelectedValue);
} 
```

其目的是让用户从下拉列表中选择一个值，然后将其转发到带有与该值相关的查询字符串的新页面。

在我的本地 IIS 上，这可以找到并使用适当的查询字符串重定向到*localhost/location.aspx*，但是，在远程服务器上，所发生的只是页面刷新。

我们最近发生了服务器中断，并且服务器上的某些设置（例如防火墙）发生了更改，这可能导致了这个问题，但我无法确定这是否是以前存在的问题。

所以问题是：**什么会导致我的本地 IIS 和远程 IIS 之间的这种行为差异？**

* * *

更多细节：

两者都是运行 .NETv2 的 IIS 7

我试过[https://stackoverflow.com/a/13498195/1185053](https://stackoverflow.com/a/13498195/1185053)和[https://stackoverflow.com/a/1953651/1185053](https://stackoverflow.com/a/1953651/1185053)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:17:19.370

检查`ViewState`. 我最近观察到同样的事情。我的代码中有一个`GridView`可以工作的链接，但是在与母版页合并后，我无法执行`LinkButton`服务器代码。它失去了约束力。

还有另一种情况。我的 Visual Studio 有时表现得很奇怪。在设计视图中双击后，它会创建另一个事件，就像`linkbutton1_click`后面的代码一样。

因此，在激活“ViewState”/双击链接按钮后，一旦我能够正确绑定事件背后的代码。

希望能帮助到你。

# windows - 在 Windows 中设置虚假版本信息

> ID：15497725
> 
> 赞同：0
> 
> 时间：2013-03-19T11:05:18.813
> 
> 标签：windows

我想以编程方式在我的 Windows 中设置虚假版本信息。例如，Windows 7 应该被各种软件检测为 Windows 8。如果我有管理员权限，有可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T11:20:40.063

答案取决于软件为实现其环境所做的检查。

[gettype [link]](http://support.microsoft.com/kb/190899)变量在旧版本的 Windows 中使用，%OSTYPE% envvar 在 Windows 7 中可用 。

该软件也可能与[WMI [链接]](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394596(v=vs.85).aspx)对话。

[但是，如果软件正在查看 .dll 并检查函数 [link]](http://msdn.microsoft.com/en-us/library/ms724451%28VS.85%29.aspx)的返回值，那么这一切都可能毫无意义。

# java - 在多个端口转发之上运行 jdbc

> ID：15497732
> 
> 赞同：0
> 
> 时间：2013-03-19T11:05:34.033
> 
> 标签：java, jdbc, exec, tunnel, plink

当我想访问数据库时，我需要通过一个体系结构来建立我的连接。所以，当我必须使用像 MySQL Workbench 这样的 GUI 工具时，我必须打开三个 Putty 会话。我正在尝试使用 Java 做同样的事情。所以我使用 Runtime exec 来运行 plink。这工作正常，我能够建立连接并向其发送一些 unix 命令并检索输出。我想在它上面运行 jdbc。是否可以。由于腻子会话在后台运行，端口转发规则是否适用于我将运行的 jdbc？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:07:18.333

是的，如果您正确设置隧道，它将运行。

# spring-mvc - 在spring MVC中处理带有一系列项目的表单帖子

> ID：15497738
> 
> 赞同：4
> 
> 时间：2013-03-19T11:05:52.473
> 
> 标签：spring-mvc, deserialization, forms

我正在尝试将一些数据从客户端发送到服务器，并将其处理为文件下载。我正在使用一个简单的 HTML 表单，因为我想初始化文件下载（而不是 AJAX）。其中一个表单字段是一个项目数组。（另外两个是名称和描述字符串）。在提交表单之前，我将此字段序列化为字符串 (JSON.stringify)。

在服务器端，我尝试了一百万种技术（@ModelAttribute 与 @RequestBody，不同的杰克逊映射 bean 配置）将其转换为单一类型或三种单独的类型（字符串 + 字符串 + 列表/数组）。

我发现的示例仅适用于 AJAX ... 谁能提供一个工作示例或一个描述？

=======

更新：我已经通过 JSON.stringify-ing 集合并将其传递到其中一个输入中实现了一种解决方法，并且在服务器端我有：

```
@RequestMapping(method = RequestMethod.POST, value = "exportSectionsToExcel")
  public HttpEntity<byte[]> createExcelWorkBook(@ModelAttribute ExportSectionsListForm exportSectionsListForm) {
Section[] sectionObjects = gson.fromJson(exportSectionsListForm.getSections(), Section[].class);
... 
```

使用仅包含字符串的 ExportSectionsListForm 对象：

```
public class ExportSectionsListForm {
private String name;
private String url;
private String rssUrl;
private String sections;
...
(omitting ctor, getters and setters) 
```

另外，我发现了这个有希望的链接：http: [//viralpatel.net/blogs/spring-mvc-multi-row-submit-java-list/](http://viralpatel.net/blogs/spring-mvc-multi-row-submit-java-list/) 但没有尝试过 - 似乎我需要动态生成输入元素使它起作用，但它实际上可能是正确的解决方案。有人试过吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T12:34:01.373

@ModelAttribute 标记将尝试基于表单发布构建对象。由于您将表单值序列化为 JSON，因此这不起作用。@RequestBody 只是为您提供一个表示请求正文的字符串。因此，您可以获得表示传入 JSON 的字符串，然后使用 FlexJSON 的 Jackson（或您使用的任何 JSON 库）对 JSON 进行解组。不过，我不确定这是最好的方法。

我会质疑为什么您首先需要将表单序列化为 JSON。Spring 可以很好地处理带有 Lists/Maps 的表单。只需使用@ModelAttribute 提交表单，在控制器上创建您的“数组”和列表，或者您期望的任何内容。因此，如果我正确解释了您的示例，我的 ModelAttribute 将如下所示：

```
public class ExportSectionsFormBean {
  private String name;
  private String url;
  private String rssUrl;
  private List<String> sections;
  /* getters/setters */
} 
```

然后我的 Controller 方法将如下所示：

```
@RequestMapping(method = RequestMethod.POST, value = "exportSectionsToExcel")
public HttpEntity<byte[]> createExcelWorkBook(@ModelAttribute ExportSectionsFormBean exportSectionsFormBean ) {
  /* Do whatever with your  */
} 
```

在表单方面，使用 Spring JSTL 标记，只需使您的“部分”字段看起来像：

```
<form:input path="sections[0]" />
<form:input path="sections[1]" /> 
```

或者，如果您更愿意使用 HTML，那么

```
<input type="text" name="sections[0]" id="sections0" />
<input type="text" name="sections[1]" id="sections1" /> 
```

这是由上述 JSTL 标记生成的。只要将“sections”的值作为“ *section[#]=value* ”放在 HTTP 请求中，就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-14T00:29:45.477

我一直在研究同样的问题。如果我有几个输入名称相同，例如：

```
<input name="somename"/>
<input name="somename"/>
<input name="somename"/> 
```

我有一个映射到我的方法的表单，如下所示：

```
@ModelAttribute("ReturnsAndExchangesForm") ReturnsAndExchangesForm    returnsAndExchangesForm 
```

在那种形式中，我有一个名为： String[] somename 的属性的 getter 和 setter，spring 很好地将这些值传递到该数组中！

# sql - 选择列表中只能指定一个表达式。在sql查询中

> ID：15497741
> 
> 赞同：2
> 
> 时间：2013-03-19T11:05:57.193
> 
> 标签：sql, sql-server

这个查询对我来说很好。

```
SELECT (SUM(AveragePrice)/COUNT(1)) AS AveragePrice, SUM(ItemsSold) AS ItemSold ,(SUM(AveragePrice * ItemsSold)) AS TotalSale FROM dbo.tbl_ProductSales
WHERE ProductID IN ( SELECT ProductID FROM tbl_ProductPostions WHERE tbl_ProductPostions.SearchID=3 AND SaleDate='2012-02-02 00:00:00.000')
GROUP BY SaleDate 
```

和这样的结果
AveragePrice | 商品已售出 | 总销售额

10 | 2 | 2000

但是当我像这样嵌入这个查询时

```
SELECT * ,(SELECT (SUM(AveragePrice)/COUNT(1)) AS AveragePrice, SUM(ItemsSold) AS ItemSold ,(SUM(AveragePrice * ItemsSold)) AS TotalSale FROM dbo.tbl_ProductSales
WHERE ProductID IN ( SELECT ProductID FROM tbl_ProductPostions WHERE tbl_ProductPostions.SearchID=tbl_SearchParameters.SearchID AND SaleDate='2012-02-02 00:00:00.000')
GROUP BY SaleDate )
FROM tbl_SearchParameters 
```

我遇到了这样的错误。当不使用 EXISTS 引入子查询时，选择列表中只能指定一个表达式。

我知道我正在越界，但有没有其他方法可以做到这一点。我知道可以创建该功能来执行此任务。但是必须分别创建三个函数来计算这些聚合平均价格、已售商品、总销售额？虽然我确信一个查询可以为我计算三个聚合？任何人都可以建议我正确的解决方案吗？我只想分别为这些聚合分别创建三个函数。问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:03:03.193

您可以使用[APPLY()](http://msdn.microsoft.com/en-us/library/ms175156%28v=sql.105%29.aspx)运算符

```
SELECT *
FROM tbl_SearchParameters p
  CROSS APPLY (
               SELECT SUM(AveragePrice/COUNT(1)) AS AveragePrice, 
                      SUM(ItemsSold) AS ItemSold,               
                      SUM(AveragePrice * ItemsSold) AS TotalSale 
               FROM dbo.tbl_ProductSales
               WHERE ProductID IN (SELECT ProductID 
                                   FROM tbl_ProductPostions 
                                   WHERE tbl_ProductPostions.SearchID = p.SearchID           
                                     AND SaleDate='2012-02-02 00:00:00.000')
               GROUP BY SaleDate
               ) o 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T11:09:37.277

尝试删除第二个 SELECT，例如：

```
SELECT * ,(SUM(AveragePrice)/COUNT(1)) AS AveragePrice, 
           SUM(ItemsSold) AS ItemSold ,
          (SUM(AveragePrice * ItemsSold)) AS TotalSale 
FROM dbo.tbl_ProductSales
WHERE ProductID IN (SELECT ProductID 
                    FROM tbl_ProductPostions 
                    WHERE tbl_ProductPostions.SearchID=tbl_SearchParameters.SearchID 
                    AND SaleDate='2012-02-02 00:00:00.000')
GROUP BY SaleDate )
FROM tbl_SearchParameters 
```

# vba - 如何编写从excel表的单元格中获取输入的sql查询

> ID：15497742
> 
> 赞同：0
> 
> 时间：2013-03-19T11:05:57.520
> 
> 标签：vba, excel

我想编写一个 sql 查询，它从 excel 表的单元格中获取输入。

例如，如果数据库中有 3 列，如 EmpID、EmpName、Salary、Address，我想连接 sql server 数据库并使用 excel 表中的按钮更新数据库。

我写了这样的代码

```
Dim rst As ADODB.Recordset
Dim Cnxn As ADODB.Connection
Dim strCnxn As String
Dim strSQL As String

' Open connection
Set Cnxn = New ADODB.Connection
strCnxn = "Provider=SQLOLEDB;" & _
          "Data Source=ABC\SQLEXPRESS;" & _
          "Initial Catalog=Trail;" & _
          "Integrated Security=SSPI;" & _
          "Application Name=MyExcelFile"

Cnxn.Open strCnxn
Set rst = New ADODB.Recordset
Dim Ename As Variant
Ename = Worksheets("DBSheet").Cells(2, 2).Value
Dim Eno As Variant
Eno = Int(Worksheets("DBSheet").Cells(2, 1).Value)
strSQL = "UPDATE Employee SET EmpName='Micro' WHERE EmpID=1"
rst.Open strSQL, Cnxn, adOpenDynamic, adLockOptimistic, adCmdText
Cnxn.Close
Set rst = Nothing
Set Cnxn = Nothing 
```

在上面的代码中，我写了一个像 SET EmpName='Micro' WHERE EmpID=1 这样的更新查询，在这里我手动提到了 EmpName 和 EmpID，而不是我想用 Excel 表的单元格值填充更新查询，比如

```
strSQL = "UPDATE Employee SET EmpName=Worksheets("AB').Cells(2,2).Value WHERE EmpID=Worksheets("AB').Cells(2,1).Value" 
```

但这不起作用，因为 EmpName 和 EmpID 值以“”（双引号）的格式出现在查询中，但 sqlquery 不接受该格式的任何内容，以便执行它应该以 ''(单引号）。

因此，如果有人知道如何将 excel 工作表的单元格值填充到 sql 查询中，请建议我如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T11:20:24.530

使用此代码

```
strSQl="UPDATE Employee SET EmpName='" & sheets("AB").Cells(2,2).Value & "' WHERE EmpID='" & sheets("AB").Cells(2,1).Value & "'" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:16:07.360

使用参数：

1）创建一个命令对象并初始化它。

```
Dim cmd as adodb.command

set cmd = new adodb.command 
```

2）改变你的SQL：

```
strSQL = "UPDATE Employee SET EmpName= ? WHERE EmpID = ? " 
```

3) 使用命令对象中的 .createParameter 函数从命令对象创建参数。

```
dim parId as adodb.parameter
dim parEmp as adodb.parameter

set parId = new adodb.parameter
set parEmp = new adodb.parameter

set parId = cmd.createParameter(...)
set parEmp = cmd.createParameter(...) 
```

4) 将参数添加到命令对象中的参数集合中。

```
cmd.parameters.append(parId)
cmd.parameters.append(parEmp) 
```

注意：添加参数的顺序与它们在 SQL 语句中的顺序相同。

5）打开你的记录集

```
rst.open cmd 
```

6）循环和东西

7）关闭并取消初始化所有内容。

# html - 填充 ASP 文本框

> ID：15497744
> 
> 赞同：0
> 
> 时间：2013-03-19T11:06:02.427
> 
> 标签：html, asp.net, css, padding

我目前对此有疑问。[我的网页（ http://openset.azurewebsites.net/](http://openset.azurewebsites.net/).I) ）右侧有很多多余的填充。我希望页面适合屏幕。在做了一些调查工作之后，我找到了导致它的对象，并且`<asp:TextBox/>`用户在其中输入了他们的电子邮件地址。搜索 CSS 后，我找不到任何类型`padding`的 TextBox 多余属性，并且不知道如何更正它。

**有关的代码是**：

```
<div class="pull">
    <asp:TextBox ID="AddEmailName" runat="server" Text="Enter your e-mail here"
                 onfocus="if(this.value == 'Enter your e-mail here') this.value = '';"
                 onblur="if(this.value == 'Enter your e-mail here' || this.value == '') this.value = 'Enter your e-mail here';"
                 style="text-align:center" Width="300px" Font-Size="Large"></asp:TextBox>
    <asp:Button ID="AddEmailButton" runat="server" width="100px"
                backcolor="#c7b099" forecolor="#000" Text="Notify Me"
                OnClick="AddEmailButton_Click" CausesValidation="true" />
</div> 
```

**CSS**：

```
.pull {
    position: relative;
    left: 525px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T11:09:56.593

问题是`left: 525px`移动了 div，但宽度保持在 100%。您应该使用`padding-left: 525px`or`margin-left: 525px`代替。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-19T11:13:50.487

试试这个..

```
 .pull {
     position: relative;
     Padding-left: 525px;
    } 
```

你需要添加`padding-left`或`Margin-left`正如某人所说..

# facelets - 可以将变量参数传递给自定义 EL 函数吗？

> ID：15497748
> 
> 赞同：1
> 
> 时间：2013-03-19T11:06:08.137
> 
> 标签：facelets, el, jsf-1.2, variadic-functions

我希望在 JSF-1.2 中支持带有参数的自定义函数调用，并遇到了这个文档[http://docs.oracle.com/javaee/5/tutorial/doc/bnahq.html#bnaio](http://docs.oracle.com/javaee/5/tutorial/doc/bnahq.html#bnaio)。

但是是否可以对该函数使用可变参数？

我尝试使用数组，`Tag Library`但看起来 JSF 在这种情况下无法识别该函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T11:31:19.430

不，EL 方法表达式不支持可变参数。当前的[EL 2.2版本](http://jcp.org/aboutJava/communityprocess/mrel/jsr245/index.html)中没有，未来的[EL 3.0版本](http://java.net/projects/el-spec)中也没有。

您需要寻找替代方法。由于具体的功能要求不清楚，我不能推荐任何一个。

* * *

**更新**：功能要求是：

> *我必须在我的页面所涉及的 JavaScript 中使用来自消息包的参数化消息。尝试删除在消息包中具有参数化文件名的文件时出现错误或警报消息。*

好吧，没有聪明的解决方法可以解决这个问题。您有 2 个选项：

1.  创建一组采用不同数量参数的 EL 函数。

    ```
    #{my:format1(...)}
    #{my:format2(...)}
    #{my:format3(...)}
    ... 
    ```

2.  扩展`<h:outputFormat>`以将结果存储在请求范围的变量中，而不是打印它。

    ```
    <my:outputFormat ... var="foo">
        <f:param ... />
        <f:param ... />
        <f:param ... />
        ...
    </my:outputFormat>

    ...
    #{foo} 
    ```

用于 JSF2的[OmniFaces JSF 实用程序库具有](http://omnifaces.org)[`<o:outputFormat>`组件](http://showcase.omnifaces.org/components/outputFormat)风格的解决方案和多个[`of:formatX()`功能](http://showcase.omnifaces.org/functions/Strings)。它在 JSF 1.x 上不可用，但它是开源的，应该提供一些见解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T11:59:03.227

您可以将列表或数组传递给自定义函数。

警告：此代码未经测试，可能会让您感到肮脏 - 这是一个完整的 hack。

我们需要两个注册为托管 bean 的人工制品。

1）颠覆`Map`型：

```
/** Important: must be none-scoped */
public class ArrayBuilder extends AbstractMap<Object, Object> {

  private List<Object> list = new ArrayList<Object>();

  @Override public Object get(Object entry) {
    if(entry instanceof MakeArray) {
      return list.toArray();
    } else {
      list.add(entry);
      return this;
    }
  }

  @Override public Set<Entry<Object, Object>> entrySet() {
    return Collections.emptySet();
  }
} 
```

触发数组创建的毒丸：

```
/** should be application scoped bean */
public final class MakeArray {
} 
```

EL 表达式：

```
#{fn:foo(arrayBuilder['one']['two']['three'][makeArray])} 
```

代码的目的是将`Object`包含三个字符串的数组传递给函数`foo`。

*我不知道这是否真的有效。*

# sql - 重命名以 '?column?' 开头的列

> ID：15497754
> 
> 赞同：0
> 
> 时间：2013-03-19T11:06:18.737
> 
> 标签：sql, database, postgresql

我想重命名 Postgresql 数据库中的列。我的列名是：

```
id varchar
?column?    text
name varchar 
```

我尝试使用以下命令：

```
alter table <table_name> rename column '?column?' to age; 
```

但我收到错误。请帮助我重命名列而不删除或重新创建表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T11:20:33.003

对标识符使用双引号：

```
alter table <table_name> rename column "?column?" to age; 
```

# javascript - 获取模型后渲染木偶区域

> ID：15497763
> 
> 赞同：5
> 
> 时间：2013-03-19T11:06:53.403
> 
> 标签：javascript, backbone.js, marionette

我想使用 Derick Bailey 在此[线程的“](https://stackoverflow.com/questions/10643474/binding-a-backbone-model-to-a-marionette-itemview-blocking-fetch)**通用问题解决方案**”中描述的方法在获取模型后渲染视图。我将在这里报告他的解决方案：

```
 MyView = Backbone.View.extend({
  initialize: function(){
    this.model.on("sync", this.render, this);
  },

  render: function(){ ... }
});

myModel = new MyModel({id: someId});
new MyView({
  model: myModel
});

myModel.fetch(); 
```

我的情况略有不同：我的视图位于区域布局内。如果我调用 Marionette.Region.show() 它可以工作，但视图会呈现两次。调用 Marionette.Region.attachView() 视图渲染的函数被调用一次，但内容不会显示在页面中。

任何的想法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-19T19:23:59.693

您可以等到模型同步后再渲染视图

```
 var myView = new MyView({
  model: myModel
});

myModel.on("sync", function(){
  myRegion.show(myView);
});

myModel.fetch(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-19T14:01:11.767

我想出了一个稍微不同的方法。我需要我的观点来在 initalize 上加载他们自己的模型，所以 Derick 的方法对我来说并不真正有效。有几个原因我不想在这里解释。但我来了是这样的：

我创建了一个名为加载指示器和微调器的默认模板，我将其附加到视图的模板。我有一个名为 updateView 的方法，一旦模型同步并用真实模板替换加载模板并随后调用 render() 就会触发该方法。

也许有人也会发现它很有用。

```
var myView = new MyView({
     template: loader,
     initialize : function(){
        this.model = new MyModel();
        this.model.on("sync", this.updateView, this);
        this.model.fetch();
     },
     updateView : function(){
        this.template = myTemplate;
        this.render();
     }
}); 
```

# python - Python PyGOobject treeview：使用 Tab 键在单元格之间移动后确认编辑

> ID：15497766
> 
> 赞同：1
> 
> 时间：2013-03-19T11:07:04.507
> 
> 标签：python, gtk3, pygobject, gtktreeview

在搜索了很长时间后，我找到了一个解决方案（非常简单），可以使用 Tab 键在树视图网格的单元格之间移动，并在编辑模式下维护单元格。

现在我遇到了一个问题：只有在按下 Enter 键后才会确认单元格编辑。如果我按 Tab 键，则会触发一个 editor_canceled 事件。

如何解决？如何在 Tab 键按下时也允许数据确认？

这是我的树视图按键事件的事件处理程序：

```
def key_tree_Tab(self, treeview, event,namewidget):
    path, col = treeview.get_cursor() 
    ## only visible columns!! 
    columns = [c for c in treeview.get_columns() if c.get_visible()] 
    colnum = columns.index(col)     

    if event.keyval==65289:

        if colnum + 1 < len(columns): 
            next_column = columns[colnum + 1]               
            treeview.set_cursor(path,next_column,start_editing=True)                                    

        else: 
            tmodel = treeview.get_model() 
            titer = tmodel.iter_next(tmodel.get_iter(path)) 
            if titer is None: 
                titer = tmodel.get_iter_first() 
            path = tmodel.get_path(titer) 
            next_column = columns[0] 
            treeview.set_cursor(path,next_column,start_editing=True)

    return True 
```

谢谢大家！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:16:44.713

大佬找到了解决办法：从gobject超时调用set_cursor方法！！！

我将它从 pygtk 移植到 pygobject，并在之前的方法帖子中对其进行了调整。

因此，对于所有需要它的人，代码：

```
def key_tree_Tab(self, treeview, event,namewidget):
    keyname = Gdk.keyval_name(event.keyval)

    path, col = treeview.get_cursor() 
    ## only visible columns!! 
    columns = [c for c in treeview.get_columns() if c.get_visible()] 
    colnum = columns.index(col)     

    if keyname=="Tab" or keyname=="Esc":

        if colnum + 1 < len(columns): 
            next_column = columns[colnum + 1]               

        else: 
            tmodel = treeview.get_model() 
            titer = tmodel.iter_next(tmodel.get_iter(path)) 
            if titer is None: 
                titer = tmodel.get_iter_first() 
            path = tmodel.get_path(titer) 
            next_column = columns[0] 

        if keyname == 'Tab':
            #Thank you Jordan!!!!!! Great hack!
            GLib.timeout_add(50,
                            treeview.set_cursor,
                            path, next_column, True)
        elif keyname == 'Escape':
            pass 
```

非常感谢 Jordan Callicoat 提供了这些美丽的 hack！

问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-31T00:27:15.140

我知道这个线程是很久以前的。我用当前版本的 Python3 和 Gtk3 尝试了你的代码，但不起作用。它仅适用于新行。现有行不会跳到下一个单元格。如果我添加“return True”，那么每个单元格都可以使用现有单元格进行 Tab，但没有一个单元格得到更新。

# sql-server - 在日期之间展开日期，检查和调整参数

> ID：15497767
> 
> 赞同：1
> 
> 时间：2013-03-19T11:07:06.227
> 
> 标签：sql-server

我使用了[Get a list of dates between two dates 中的一个函数](https://stackoverflow.com/questions/1378593/get-a-list-of-dates-between-two-dates-using-a-function)，这个函数工作得很好。

但是，我需要对已通过的结束日期进行额外检查。有时这个日期会是空的，因为如果记录仍然是最新的，它就不会被输入。如果是，我想用当前日期替换它，以便日期从开始日期返回到当前日期。

我要输入的代码是这样的，但是无论我尝试放在哪里，都会出现语法错误。

```
 IF @endddate IS NULL
     SET @enddate = getdate() 
```

这是目前的代码

```
 CREATE FUNCTION [dbo].[ExplodeDates](@startdate datetime, @enddate datetime) 
 returns table as 
 return ( 
 with  
 N0 as (SELECT 1 as n UNION ALL SELECT 1) 
,N1 as (SELECT 1 as n FROM N0 t1, N0 t2) 
,N2 as (SELECT 1 as n FROM N1 t1, N1 t2) 
,N3 as (SELECT 1 as n FROM N2 t1, N2 t2) 
,N4 as (SELECT 1 as n FROM N3 t1, N3 t2) 
,N5 as (SELECT 1 as n FROM N4 t1, N4 t2) 
,N6 as (SELECT 1 as n FROM N5 t1, N5 t2) 
,nums as (SELECT ROW_NUMBER() OVER (ORDER BY (SELECT 1)) as num FROM N6) 
SELECT DATEADD(day,num-1,@startdate) as thedate 
FROM nums 
WHERE num <= DATEDIFF(day,@startdate,@enddate) + 1 
 ); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T11:20:37.350

您需要再添加 1`CTE`来过滤该`@enddate`值。

试试这个 ： -

```
CREATE FUNCTION dbo.ExplodeDates(@startdate datetime, @enddate datetime)
returns table as
return (
with 
 N0 as (SELECT 1 as n UNION ALL SELECT 1)
,N1 as (SELECT 1 as n FROM N0 t1, N0 t2)
,N2 as (SELECT 1 as n FROM N1 t1, N1 t2)
,N3 as (SELECT 1 as n FROM N2 t1, N2 t2)
,N4 as (SELECT 1 as n FROM N3 t1, N3 t2)
,N5 as (SELECT 1 as n FROM N4 t1, N4 t2)
,N6 as (SELECT 1 as n FROM N5 t1, N5 t2)
,nums as (SELECT ROW_NUMBER() OVER (ORDER BY (SELECT 1)) as num FROM N6)
,checkDate as (select case when
                          @enddate is null then getdate() 
                          else @enddate
                      end as  dt)
SELECT DATEADD(day,num-1,@startdate) as thedate
FROM nums
WHERE num <= DATEDIFF(day,@startdate,(Select dt from checkDate)) + 1
); 
```

# python - OpenERP登录问题

> ID：15497769
> 
> 赞同：1
> 
> 时间：2013-03-19T11:07:14.423
> 
> 标签：python, linux, openerp

本地在ubuntu中设置了一个openerp，当我尝试登录时，出现这样的错误

```
 Your version of OpenERP is unsupported. Support & maintenance services are available here: OpenERP Entreprise.

OpenERP Server Error

Client Traceback (most recent call last):
  File "/home/openerp/server/openerp/addons/web/common/http.py", line 180, in dispatch
    response["result"] = method(controller, self, **self.params)
  File "/home/openerp/server/openerp/addons/web/controllers/main.py", line 498, in authenticate
    req.session.authenticate(db, login, password, env)
  File "/home/openerp/server/openerp/addons/web/common/session.py", line 73, in authenticate
    uid = self.proxy('common').authenticate(db, login, password, env)
  File "/home/openerp/server/openerp/addons/web/common/openerplib/main.py", line 117, in proxy
    result = self.connector.send(self.service_name, method, *args)
  File "/home/openerp/server/openerp/addons/web/common/http.py", line 608, in send
    raise xmlrpclib.Fault(openerp.tools.exception_to_unicode(e), formatted_info)

Server Traceback (most recent call last):
  File "/home/openerp/server/openerp/addons/web/common/http.py", line 593, in send
    return openerp.netsvc.dispatch_rpc(service_name, method, args)
  File "/home/openerp/server/openerp/netsvc.py", line 360, in dispatch_rpc
    result = ExportService.getService(service_name).dispatch(method, params)
  File "/home/openerp/server/openerp/service/web_services.py", line 397, in dispatch
return fn(*params) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:42:30.890

当我检查 openerp-server.log 时出现错误

```
2013-03-19 11:28:09,249 1486 ERROR zeon1 openerp.sql_db: Programming error:  column ir_module_module.maintainer does not exist
LINE 1: ...dule."menus_by_module",ir_module_module."website",ir_module_... 
```

在这里，我使用版本小于 6 的 openerp 客户端创建了数据库，但我的 openerp 服务器是 6.1，所以我得到了那个错误。这里我使用 openerp 服务器 6.1 创建了新的数据库，现在它按预期工作。

# lsf - LSF 作业路由算法

> ID：15497774
> 
> 赞同：0
> 
> 时间：2013-03-19T11:07:30.217
> 
> 标签：lsf

我有一个要求，我需要限制用户重复使用他们正在使用的前 3 台 exec 机器，以减少我们工具的许可证使用。

因此，假设用户在任何时候都在使用 3 台机器 - mac1、mac2、mac3。现在，如果他要开展一项新工作，预计他将重新使用已经在使用的三台机器中的一台。

*到目前为止，我希望我的要求很明确。如果您有任何疑问，请提示我*

**现在，我的目标是设计一种算法来决定哪台机器是最好的机器。我需要以下输入来设计算法：-**

**1\. mac1,2,3 中，可以使用哪些参数来决定哪台机器最适合执行作业。**

*其他要求也很少，但我想在将它们发布到这里之前尝试并失败。上面发布的是我遇到的最大瓶颈*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-27T09:14:58.277

LSF 通常用于同时支持交互式用户和批处理用户的系统。一方面，用户经常担心负载共享会使他们的工作站超负荷并减慢他们的交互任务。另一方面，一些用户希望将一些机器专用于关键的批处理作业，以便他们有保证的资源。即使您的所有工作负载都是批处理作业，您仍然希望减少资源争用和操作系统开销，以最大限度地利用资源。许多参数可用于控制您的资源分配并避免不必要的争用。

在此处阅读更多信息： [https ://www.ibm.com/support/knowledgecenter/SSWRJV_10.1.0/lsf_admin/interactive_batch_jobs_tuning.html](https://www.ibm.com/support/knowledgecenter/SSWRJV_10.1.0/lsf_admin/interactive_batch_jobs_tuning.html)

# php - 如何将用户在网站上的活动发布到他/她的 Facebook 帐户墙？

> ID：15497777
> 
> 赞同：1
> 
> 时间：2013-03-19T11:07:36.393
> 
> 标签：php, facebook

我是第一次从事这样的任务，所以有点不知道这些事情。基本上我有一个用 PHP 开发的网站。现在，当用户访问我的网站时，我想提供将用户在网站上执行的活动作为帖子发布到他/她的墙上的功能。为此，我提到了一个网站`http://www.meritnation.com`。我想要一些类似的 facebook 功能，就像这个网站所拥有的一样。我也对如何实现这一点进行了研发。在研发期间了解了 Facebook 平台 ( `https://developers.facebook.com/docs/guides/web/`)。我经历了它，但不知道如何实际实现这一目标。谁能通过简单的语言解释如何实现这一点来帮助我？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:20:23.450

下面的链接，在 Facebook 的开发者网站上，有很好的例子来说明如何发布到用户的墙上。我发现它们很有帮助。

[https://developers.facebook.com/docs/reference/php/facebook-api/](https://developers.facebook.com/docs/reference/php/facebook-api/)

# c# - 不使用内置会员功能时使用 FormsAuthentication.SignOut 是否有意义

> ID：15497780
> 
> 赞同：2
> 
> 时间：2013-03-19T11:07:38.527
> 
> 标签：c#, asp.net, login

在我的 Web 应用程序中，我使用完全自定义的功能进行登录。所以，Web.Security 没有任何内容。
我用 Session 和 ViewState 变量控制一切。要从应用程序中注销，我使用`Session.Abandon()`命令。

我想知道我是否也应该调用FormsAuthentication.SignOut()？我看了一下这个方法的官方文档，但不太明白。我从中得到什么好处？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T11:12:17.903

如果您仍在使用表单身份验证（即使您没有使用内置的 ASP.NET 成员资格提供程序），那么是的，您应该调用`SignOut`它，因为它将摆脱身份验证 cookie。

但是，如果您甚至根本不使用表单身份验证，那么就不会有身份验证 cookie，因此调用它是没有意义的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T11:16:58.933

不得不承认官方文档有很多话要说`SignOut`。备注部分包含很多有趣的信息。

> 如果 CookiesSupported 为 false，SignOut 方法会从 cookie 或 URL 中删除表单身份验证票信息。您可以结合使用 SignOut 方法和 RedirectToLoginPage 方法来注销一个用户并允许其他用户登录。如果您以无 cookie 模式独占运行，或者如果您同时支持经过身份验证的用户和匿名用户，则应显式控制重定向如果由于删除匿名标识符而需要执行特殊的业务逻辑，请转到登录页面。当调用 SignOut 方法时，通过调用 Redirect 方法并将 endResponse 参数设置为 false，重定向到应用程序的登录页面。在当前页面完成执行之前不会发生重定向，因此可以运行其他代码。
> 
> 调用 SignOut 方法只会删除表单身份验证 cookie。Web 服务器不存储有效和过期的身份验证票证以供以后比较。如果恶意用户获得有效的表单身份验证 cookie，这会使您的站点容易受到重放攻击。为了提高使用表单身份验证 cookie 时的安全性，您应该执行以下操作：
> 
> *   通过将 SlidingExpiration 属性设置为 false，对表单身份验证 cookie 使用绝对过期。这限制了可以重播被劫持的 cookie 的窗口。
> *   仅通过安全套接字层 (SSL) 发出和接受身份验证 cookie，方法是将 RequireSSL 属性设置为 true 并在 SSL 下运行整个网站。将 RequireSSL 属性设置为 true 可确保 ASP.NET 永远不会通过非 SSL 连接向浏览器发送身份验证 cookie；但是，客户端可能不遵守 cookie 上的安全设置。这意味着客户端可能会通过非 SSL 连接发送表单身份验证 cookie，从而使其容易受到劫持。您可以通过在 SSL 下运行整个网站来阻止客户端以明文形式发送表单身份验证 cookie。
> *   使用服务器上的持久存储来记录用户何时退出网站，然后使用 PostAuthenticateRequest 事件等应用程序事件来确定当前用户是否通过表单身份验证进行了身份验证。如果用户通过表单身份验证进行身份验证，并且持久存储中的信息表明用户已注销，则立即清除身份验证 cookie 并将浏览器重定向回登录页面。成功登录后，更新存储以反映用户已登录。当您使用此方法时，您的应用程序必须跟踪用户的登录状态，并且必须强制空闲用户注销。

你可以[在这里看到](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.signout.aspx)

所以，总而言之，是的，你应该打电话`SignOut`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T11:11:52.303

你不需要使用

```
FormsAuthentication.SignOut(); 
```

如果您不使用表单身份验证。
这是一个很好的链接
[FormsAuthentication.SignOut() 不会注销用户](https://stackoverflow.com/questions/412300/formsauthentication-signout-does-not-log-the-user-out)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-19T11:11:26.600

您可以使用`Membership provider`以减少开发时间来满足管理安全的需要`(Identity)`。

您还必须`tool regsql`为您的用户安装您的数据库，您还`RoleManager functionality`需要管理`Roles`用户`(Principal)`

一些链接：

[http://msdn.microsoft.com/fr-fr/library/ms229862(v=vs.80).aspx](http://msdn.microsoft.com/fr-fr/library/ms229862(v=vs.80).aspx)

# java - 音频识别

> ID：15497784
> 
> 赞同：1
> 
> 时间：2013-03-19T11:07:42.793
> 
> 标签：java, audio, javasound, audio-analysis

我正在开发一个程序，该程序应记录可识别的音频，以便以后可以轻松地将其与其他音频文件进行比较。音频文件将包含类似语音的内容，所以我想知道什么会更容易做：

*   实现语音识别算法并保存/比较输出，
*   或实施/创建一种算法，使用例如快速傅里叶变换创建类似音频指纹的东西并进行比较？

有人在这方面有经验吗？我想知道第二种解决方案是否会在相对较短的时间内实现。也许有一个不太难编码的解决方案，我只是没有找到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-29T05:09:53.203

看看声学指纹，大部分代码都可以在 github 上找到！它应该可以帮助您解决问题，更具体地说是[https://github.com/lalinsky/chromaprint/tree/master/tools](https://github.com/lalinsky/chromaprint/tree/master/tools)

有关更多信息，请查看此线程，该主题已被广泛介绍，[开源音频模式识别（指纹）](https://stackoverflow.com/questions/6269167/open-source-audio-pattern-recognition-finger-printing)和[创建自定义语音命令（GNU/Linux）](https://stackoverflow.com/questions/15304768/creating-custom-voice-commands-gnu-linux)

# java - 在 Java 中从边和顶点绘制地图

> ID：15497786
> 
> 赞同：1
> 
> 时间：2013-03-19T11:07:45.850
> 
> 标签：java, graphics, maps, zooming

给定大量的顶点和边。给定顶点 x 和 y 坐标，每条边都有两个顶点。

对于缩放，简单的解决方案是只绘制在给定 x 和 y 坐标中具有顶点的所有边，屏幕被放大，而不是在地图上绘制每条边。但是我将如何绘制刚刚穿过我放大区域的边缘？

我能想出的唯一解决方案是线性地穿过每条边缘，并通过找到边缘每一端的 x 和 y 坐标来计算边缘是否会进入我放大的区域。有没有人对此有一个偷偷摸摸的解决方案？

此外，关于平移，最好的解决方案不是在用户看到的区域周围加载 8 个大小相同的框吗？

编辑：我忘了说，不同的边缘都有信息，所以根据每个缩放级别，会绘制不同类型的边缘，这就是为什么我更喜欢自己缩放。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:14:52.740

所以你想用 Java 来做，但你没有告诉你要使用什么图形库。当绘图变得像您的示例中那样变得更加复杂和密集时，您应该使用更复杂的东西，例如[OpenGL](https://en.wikipedia.org/wiki/OpenGL)，而不是考虑自己计算缩放。要将它与 Java 一起使用，有一个包装库：[JOGL](https://en.wikipedia.org/wiki/Java_OpenGL)。

OpenGL 提供了绘制顶点和形状的工具，您可以使用相机来组织视图和缩放。

所以首先我建议熟悉图形编程（使用哪种编程语言或使用哪个库并不重要）。

我发现这些教程很有帮助：

*   [基本 JOGL 教程](https://sites.google.com/site/justinscsstuff/jogl-tutorials)
*   [Netbeans 中的 JOGL](http://netbeans.dzone.com/nb-getting-started-jogl)

### 更新

*   OpenGL 非常适合绘制 2D（正如您将在教程中学习的那样）。
*   特别是*如果*您要绘制的内容根据缩放级别更改，则图形库很有用，因为至少每次内容更改时都会渲染整个场景。您可以在渲染之前简单地检查缩放级别并根据它进行绘制。

# zip - 自动压缩文件 - 使用 .bat 文件

> ID：15497792
> 
> 赞同：1
> 
> 时间：2013-03-19T11:08:01.823
> 
> 标签：zip, 7zip

我正在使用 Oracle EXPDB 导出数据库。我将获得大约 50GB 的 dmp 文件。生成 dmp 文件后，我将手动压缩该文件。但我需要从批处理（.bat）文件中自动执行此操作。我试过用这段代码，

```
 7z a -t 7z -r "D:\backup.zip" "D:\MyStuff\*.*" 
```

另外，安装了 7Zip 相关的东西。但它仍然无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:27:33.410

我得到了正确答案。

下载 7za.exe 并放入 C:/Windows/System32。

//导出数据库

```
expdp username/password@sid DUMPFILE=Test.dmp TABLES=movement 
```

//压缩dmp文件

```
7za a -tzip "I:\Test.zip" "I:\Test.dmp" 
```

//压缩后删除原始文件

```
del "I:\Test.dmp" 
```

# conditional - 车把 IF 值包含 x.*

> ID：15497794
> 
> 赞同：1
> 
> 时间：2013-03-19T11:08:08.047
> 
> 标签：conditional, wildcard, mustache

我在解析为模板时遇到了一些 JSON 问题。本质上，我正在通过一个简单的 Web 界面构建查询，以 JSON 格式提取数据，并使用 Mustache 控制数据/模板。

但是，我无法通过 URL 查询 JSON 中嵌套对象的值......所以我认为我需要使用 Handlebars 诉诸条件语句。

是否可以使用通配符在车把块助手中运行`like`或样式比较？`indexof`

IE

```
{{#if folderPath == "content/published/.*"}}
 Render content
Else, do nothing 
```

感谢任何帮助，谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2019-01-09T02:49:25.893

我知道我来晚了，但我偶然发现了这个，它应该有答案。我为此写了一个帮手。

```
Handlebars.registerHelper('contains', function(needle, haystack, options) {
   needle = Handlebars.escapeExpression(needle);
   haystack = Handlebars.escapeExpression(haystack);
   return (haystack.indexOf(needle) > -1) ? options.fn(this) : options.inverse(this);
}); 
```

模板应如下所示（[表达式](http://handlebarsjs.com/guide/expressions.html)、[块助手](http://handlebarsjs.com/guide/block-helpers.html)）

```
{{#contains "content/published" folderPath}}
    something
{{/contains}} 
```

如果找到“内容/已发布”，这只会返回“某物”。**不需要通配符。**

这可以用作一种使用“else”的开关盒。这部分在文档中对我来说并不清楚。应该对某人有用。

```
{{#contains "content/published" folderPath}}
    Something
{{else contains "content/something" folderPath}}
    Something else
{{else}}
    Something else v2
{{/contains}} 
```

* * *

对于那些使用[express-handlebars](https://github.com/ericf/express-handlebars)的人，您的实现将如下所示（在[RegisterHelpers.js](https://stackoverflow.com/questions/41423727/handlebars-registerhelper-serverside-with-expressjs)中）：

```
var register = function(Handlebars) {
    var helpers = {
        if_op: (a, op, b, options) =>{
            switch (op) {
                case '!=': return (a != b) ? options.fn(this) : options.inverse(this);
                case '!==': return (a !== b) ? options.fn(this) : options.inverse(this);
                case '>=': return (a >= b) ? options.fn(this) : options.inverse(this);
                case '<=': return (a <= b) ? options.fn(this) : options.inverse(this);
                case '==': return (a == b) ? options.fn(this) : options.inverse(this);
                case '===': return (a === b) ? options.fn(this) : options.inverse(this);
                case '>': return (a > b) ? options.fn(this) : options.inverse(this);
                case '<': return (a < b) ? options.fn(this) : options.inverse(this);
                default: return options.fn(this);
            }
        },

        contains: (Needle, Haystack, options) => {
            Needle = Handlebars.escapeExpression(Haystack);
            Haystack = Handlebars.escapeExpression(Haystack);
            return (Haystack.indexOf(Needle) > -1) ? options.fn(this) : options.inverse(this);
        }
    }

    if (Handlebars && typeof Handlebars.registerHelper === "function") {
        for (var prop in helpers) {
            Handlebars.registerHelper(prop, helpers[prop]);
        }
    } else {
        return helpers;
    }
}

module.exports.register = register;
module.exports.helpers = register(null); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-26T19:11:05.747

您确实可以这样做，但您需要创建一个自定义[Handlebars 助手](http://handlebarsjs.com/expressions.html)。

您的模板最终会看起来像

```
{{#like folderPath '==' 'content/published/.*'}}
  something
{{/like}} 
```

`#like`您的自定义助手的名称在哪里。

# c#-4.0 - 实体框架查询字段的条件

> ID：15497796
> 
> 赞同：1
> 
> 时间：2013-03-19T11:08:09.467
> 
> 标签：c#-4.0, ef-code-first, entity-framework-4.1

```
 var employeePayDetails = (from p in Catalog.Providers
                           where p.Key == providerKey
                           from a in p.Appointments
                           from e in a.Employee.Services
                           from l in a.Allocations
                           from ip in l.InvoicePayments
                           where (a.Employee != null && a.Created >= begin && a.Created <= end)                        where (e.Service.Id==l.Service.Id)
                           select new 
                           {
                           ServiceName = l.Service,
                           CustomersServiced = l.Pet.Name + " " + a.Owner.LastName,
                           AppointmentDate = a.Created,
                           EmployeeName = a.Employee.Name,
                           PaymentOptionType = e.PaymentOption,
                           RateValue = e.Rate,
                           WorkedHours=l.End-l.Start,
                           PayAmount= ?

                          }).ToList(); 
```

在上面的实体框架查询中，我需要根据下面提到的 switch 语句计算**PayAmount 。**

```
switch (PaymentOption)
        {
           case 1:
                PayAmount= WorkedHours * RateValue  ;
                break;
            case 2:
                PayAmount = RateValue  ;
                break;
            case 3:
               PayAmount = LatestTotal  ;
                break;
        } 
```

那么如何将实体框架查询的 switch 语句值作为**PayAmount**呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T11:16:08.100

标准`if`应该起作用：

```
PayAmount= (e.PaymentOption == 1 ? (l.End-l.Start) * e.Rate : (e.PaymentOption == 2 ? e.Rate : LatestTotal )) 
```

# windows-phone-7 - 如何在 Windows Phone 7 中清除画布的指定子项？

> ID：15497799
> 
> 赞同：-2
> 
> 时间：2013-03-19T11:08:16.397
> 
> 标签：windows-phone-7, canvas

请帮助我，如何在 windows phone 7 中清除画布的指定子项

谢谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:27:29.700

您可以使用 ：

```
canvas.Children.Remove(uiElement); 
```

其中 uiElement 是您要删除的孩子。

或者

```
canvas.Children.RemoveAt(1); 
```

其中 1 是该元素在子集合中的索引

# regex - 正则表达式/用字典中的预定义值替换文本文件中的相同字符串

> ID：15497803
> 
> 赞同：0
> 
> 时间：2013-03-19T11:08:34.430
> 
> 标签：regex, text, replace

我有一个巨大的文本文件，其内容类似于：

```
<!-- $var = aaa -->
<!-- $var = aaa -->
<!-- $var = aaa -->
<!-- $var = aaa -->
<!-- $var = aaa -->
.
<!-- $var = bbb -->
<!-- $var = bbb -->
<!-- $var = bbb -->
<!-- $var = bbb -->
<!-- $var = bbb --> 
```

我想实现这样的`$var`替换：

```
<!-- $address = aaa -->
<!-- $city    = aaa -->
<!-- $zip     = aaa -->
<!-- $phone   = aaa -->
<!-- $geo     = aaa -->
.
.
<!-- $address = bbb -->
<!-- $city    = bbb -->
<!-- $zip     = bbb -->
<!-- $phone   = bbb -->
<!-- $geo     = bbb --> 
```

顺序始终相同。我已经研究了大约 3 个小时，但我无法通过这个大脑障碍。我的想法是用正则表达式来实现这一点，但似乎我需要一个脚本来解决这个问题。

你能给我一个提示，往哪个方向走吗？这对正则表达式有可能吗？我是初学者，所以请温柔:)

亲切的问候奥利弗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:19:31.110

您需要一次处理一行，根据它是哪一行应用不同的正则表达式，如（我不知道您需要哪种语言，所以将其视为伪代码，如果需要可以对其进行优化）

```
var replacements = new[]{"address","city","zip","phone","geo"};
var replacement = replacements[row % 5];
var r = new Regex("(^<!-- \$)var(.*$)";
var newline = r.Replace(oldline, "$1"+replacement+"$2"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T11:25:11.683

这应该这样做。我已经使用 Progammer 的记事本对此进行了测试。如果您使用不同的东西，那么您可能需要对其进行调整。

```
Find:
(<!-- \$var = (\w+) -->\r\n){5}

Replace:
<!-- $address = \2 -->\r\n<!-- $city    = \2 -->\r\n<!-- $zip     = \2 -->\r\n<!-- $phone   = \2 -->\r\n<!-- $geo     = \2 -->\r\n 
```

理解这一点的关键是`\2`. 这引用了正则表达式找到的第二组。组是被困在括号中的东西`()`。

`\0`将匹配整个字符串。
`\1`将匹配第一组备份。`(<!-- \$var = (\w+) -->\r\n)`
`\2`将匹配第二组备份。`(\w+)` 这是你的 aaa 或 bbb

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T11:37:17.370

您*可以*编写一个正则表达式来一次性完成此操作，但使用类似的东西会更容易`sed`，它将单独针对行。

```
#!/bin/sh
sed '
  s/\$var/\$address/  # replace $var with $address
  N                   # next line
  s/\$var/\$city   /  # replace $var with $city
  N                   # next line
  s/\$var/\$zip    /  # replace $var with $zip
  N                   # next line
  s/\$var/\$phone  /  # replace $var with $phone
  N                   # next line
  s/\$var/\$geo    /  # replace $var with $geo
' $1 
```

然后，您可以针对您的文件运行此脚本。

# wordpress - 自定义wordpress插件中的jquery冲突

> ID：15497808
> 
> 赞同：0
> 
> 时间：2013-03-19T11:08:46.483
> 
> 标签：wordpress, plugins

在初始化时在我的自定义 WordPress 插件中使用 jquery 时出现以下错误`Type Error: $.effects.effect is undefined`。另一个问题：现场活动被忽略，我得到`jQuery(...).live is not a function`. 我一直在尝试在我的插件中加载最新的 Jquery，但即使这样，问题仍然存在

```
public function init()
    {
        wp_deregister_script('jquery');
        wp_register_script('jquery', ("http://code.jquery.com/jquery-1.9.1.js"), false, '');
        wp_enqueue_script('jquery-ui-js', 'http://code.jquery.com/ui/1.10.1/jquery-ui.js');
        wp_enqueue_script('jquery');
        wp_enqueue_script( 'konfigurator_ajax', plugin_dir_url( __FILE__ ) . 'config.js', array( 'jquery' ) );
        wp_localize_script( 'konfigurator_ajax', 'Konfigurator', array(
                'ajaxurl' => admin_url( 'admin-ajax.php') ,
                'nonce' => wp_create_nonce( 'konfigurator_ajax-nonce' )
        ) ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:37:42.447

我没有看到你的`config.js`，但我认为它使用了 jQuery UI 效果。您需要将注册和入队分开以进行正确的`wp_enqueue_script`工作。此外，您的代码是非 WP 标准的，我建议您使用此代码（正确安装 WordPress 3.5+）：

```
public function init() {
   wp_register_script('konfigurator_ajax', plugin_dir_url(__FILE__) . 'config.js', array( 'jquery', 'jquery-ui-core', 'jquery-effects-core' ));
   wp_localize_script( 'konfigurator_ajax', 'Konfigurator', array(
       'ajaxurl' => admin_url( 'admin-ajax.php') ,
       'nonce' => wp_create_nonce( 'konfigurator_ajax-nonce' )
   ));
}
add_action('admin_init', 'init'); //or if OOP add_action('admin_init', array(&$this, 'init'));

public function print_scripts() {
    wp_enqueue_script('jquery-ui-core');
    wp_enqueue_script('jquery-effects-core');
    wp_enqueue_script('konfigurator_ajax');
}
add_action('admin_print_scripts', 'print_scripts'); //or if OOP add_action('admin_print_scripts', array(&$this, 'print_scripts')); 
```

# c# - MSTest - Windows 商店测试项目中的 DeploymentItem 属性不可用

> ID：15497809
> 
> 赞同：1
> 
> 时间：2013-03-19T11:08:47.380
> 
> 标签：c#, mstest, windows-store-apps, deploymentitem

正如标题所说 - 我找不到将文件包含在 Windows 商店测试项目中的方法。（标准的 .NET 测试项目可以正常工作）

右键单击解决方案并执行：添加新项目 -> C# -> Windows Store -> 单元测试库（Windows 商店应用程序）

你会得到这个样板文件，我在其中添加了 DeploymentItem 属性：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.VisualStudio.TestPlatform.UnitTestFramework;

namespace UnitTestLibrary1
{
    [TestClass]
    public class UnitTest1
    {
        [TestMethod]
        // this does not compile; DeploymentItem attribute not found
        [DeploymentItem("wibble.txt")]
        public void TestMethod1()
        {
        }
    }
} 
```

那么我错过了什么？是否根本不可能在 Windows 存储单元测试中包含数据，还是我需要不同的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:30:57.870

我部署数据文件的方式是使用构建后副本。我的项目中有一个名为“TestData”的目录下的数据，该目录在构建后被复制到输出中。

在我的测试项目属性的“构建事件”选项卡中设置了以下几行：

```
if not exist "$(TargetDir)AppX" mkdir "$(TargetDir)AppX"
if not exist "$(TargetDir)AppX\TestData" mkdir "$(TargetDir)AppX\TestData"
copy /Y "$(TargetDir)TestData\*.*" "$(TargetDir)AppX\TestData\" 
```

几点注意事项：

*   我的单元测试是指目录下的数据文件`TestData`，而不是`AppX\TestData`。
*   上面的构建后操作只会将您的项目中设置的文件复制为 1) 内容文件和 2) 复制到输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T11:56:30.800

[DeploymentItem](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.deploymentitemattribute%28v=vs.100%29.aspx)包含在`Microsoft.VisualStudio.TestTools.UnitTesting`您没有引用的命名空间中。

您必须添加对`Microsoft.VisualStudio.QualityTools.UnitTestFramework.dll`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-24T22:34:29.493

使用 @chue-x 构建事件，然后 [TestInitialize] 类似：

```
 var site = "TestData";
        var appx = Package.Current.InstalledLocation;
        var reposTestFolder = await appx.GetFolderAsync(site);
        var testFiles = await reposTestFolder.GetFilesAsync();

        var localfolder = ApplicationData.Current.LocalFolder;
        var reposFolder = await localfolder.CreateFolderAsync(site, CreationCollisionOption.OpenIfExists);
        foreach (var file in testFiles)
        {
            await file.CopyAsync(reposFolder);
        } 
```

现在 TestData 可用于被测应用程序。

# java - 使用嵌套 if 语句在 while 循环中循环出现问题

> ID：15497811
> 
> 赞同：0
> 
> 时间：2013-03-19T11:08:50.237
> 
> 标签：java, eclipse

我的程序输出有问题。我开发了“GetInput”类作为构造函数，在询问各种输入问题时可以重用它。提出的每个问题都需要等于或大于最小值/小于传递给类/构造函数的最大值。我遇到的问题是，当 while 循环运行时，它要求输入四次，然后才最终返回正确的值。

我添加了我在它们显示时计算出来的标志。第一次添加输入后的第一个显示。然后是第二次，然后是第四次。第四次它还显示我希望它在一次迭代中达到的标志“结束”。**为什么在最终正确返回值之前循环了四次？**

提前非常感谢。这只是我学习 Java 的第二天，这让我发疯了。

```
import java.util.Scanner; //Import the scanner class

public class main {
public static void main(String[] args) {

    //Set variables to hold the entry cost for each category
    int costAccChild = 2;
    int costUnaccChild = 5;
    int costAdult = 10;
    int costSenior = 8;

    int test = GetInput(0, 1, "Enter a group? (Yes=1/No=0)");
    System.out.println(test);
    System.out.println("the end");

}

 static int GetInput(int min, int max, String request){     
    boolean inputValid = false; //Sets default value to variable for while loop
    int userInput = 0; //Sets default variable for input return

    while (inputValid == false) { //Loops until receives correct input
        System.out.println(request); //Prints question asking for input
        Scanner inputFromUser = new Scanner(System.in); //Ask user for input
        System.out.print("First time"); //FLAG DISPLAYS AFTER FIRST SCANNER

        if (inputFromUser.hasNextInt() == true){ //Check if input has an integer

            System.out.print("Second Time"); //FLAG SHOWS AFTER SECOND SCANNER

            if (inputFromUser.nextInt() >= min && inputFromUser.nextInt() <= max ){ //Check if input is valid
                userInput = inputFromUser.nextInt();
                inputValid= true;

                System.out.print("Fourth time"); //FLAG WORKS FORTH TIME

            }else{ //Input is not correct integer, give error message
                System.out.println("Input is not valid");           
                }   

        }else{ //Input is not an integer at all, give error message
            System.out.println("Input is not valid");
        }
    }
    return userInput; //Returns valid input
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T11:14:05.990

从手册页[http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#hasNextLong()](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#hasNextLong())：

> hasNext 和 next 方法都可能阻塞等待进一步的输入

它没有循环 4 次，但每当你说`inputFromUser.hasNextInt()`或`inputFromUser.nextInt()`扫描仪实际上阻止等待你输入一个值。

所以这显然是一个你必须修复的错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T11:24:32.380

您应该将输入存储在某个变量中，然后在 if 条件下比较它们。

这不会阻止输入以进行进一步输入。

尝试这个：

```
public static void main(String[] args) {

    //Set variables to hold the entry cost for each category
    int costAccChild = 2;
    int costUnaccChild = 5;
    int costAdult = 10;
    int costSenior = 8;

    int test = GetInput(0, 1, "Enter a group? (Yes=1/No=0)");
    System.out.println("Return Result: " + test);
    System.out.println("The end");

}

static int GetInput(int min, int max, String request) {
        boolean inputValid = false; //Sets default value to variable for while loop
        int userInputMin = 0, userInputMax=0; //Sets default variable for input return

        while (inputValid == false) { //Loops until receives correct input
            System.out.println(request); //Prints question asking for input
            Scanner inputFromUser = new Scanner(System.in); //Ask user for input
            System.out.print("First time: "); //FLAG DISPLAYS AFTER FIRST SCANNER

            if (inputFromUser.hasNextInt() == true) { //Check if input has an integer
                userInputMin = inputFromUser.nextInt();
                System.out.print("Second Time: "); //FLAG SHOWS AFTER SECOND SCANNER
                if (inputFromUser.hasNextInt() == true) { //Check if input has an integer
                    userInputMax = inputFromUser.nextInt();
                    if (userInputMin >= min && userInputMax <= max) { //Check if input is valid

                        inputValid = true;

                        System.out.println("Third time"); //FLAG WORKS Third Time

                    } else { //Input is not correct integer, give error message
                        System.out.println("Input is not valid");
                    }
                }    
            } else { //Input is not an integer at all, give error message
                System.out.println("Input is not valid");
            }
        }
        return userInputMin; //Returns valid input
    } 
```

# php - 无法让 PHP 路由器发送正确的标头

> ID：15497812
> 
> 赞同：2
> 
> 时间：2013-03-19T11:08:56.020
> 
> 标签：php, regex, class

我有以下课程

```
class Route{

private $urls = array();

public function add($url, $function){
    $this->urls[str_replace('/', '\/', $url)] = $function;
}

public function dispatch(){
    ksort($this->urls);
    foreach ($this->urls as $url => $function) {
        if (preg_match('/^' . $url . '$/', $_SERVER['REQUEST_URI'], $match)){
            call_user_func($function, $match);
            break;
        } else{
            header("HTTP/1.0 404 Not Found");
        }
    }
}
} 
```

当使用这样的类时

```
$route = new Route();

$route->add('/', function(){
echo 'test';
});

$route->add('/([a-zA-Z]+)', function($match){
    echo 'test <pre>';
    print_r($match);
});

$route->add('/([a-zA-Z]+)/([a-zA-Z]+)', function($match){
    echo 'test <pre>';
    print_r($match);
});

$route->dispatch(); 
```

访问根目录时一切正常，但是当我访问带有“/testing/test”或“/testing”链接的页面时，会出现 404 消息，但用户功能执行正常。

当我删除以下部分时

```
else{ header("HTTP/1.0 404 Not Found"); } 
```

该函数正常执行，但如果找不到页面，我将无法发送标题。还有其他解决方法吗？

主要问题似乎是 break 语句。当密钥与请求 uri 匹配时，循环继续。

有谁知道出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T14:23:50.010

仅当循环完成但未找到匹配项时，您才需要发送 404。`header`在循环之后移动调用并返回而不是中断。

```
foreach ($this->urls as $url => $function) {
    if (preg_match('/^' . $url . '$/', $_SERVER['REQUEST_URI'], $match)){
        call_user_func($function, $match);
        return;
    }
}
header("HTTP/1.0 404 Not Found"); 
```

或者，如果在任何一种情况下都需要发生其他一些逻辑，您可以`$found`在循环内设置一个变量。

```
$found = false;
foreach (...) {
    if (...) {
        call_user_func(...);
        $found = true;
    }
}
if (!$found) {
    header(...)
} 
```

# ios - 我必须通过 iOS 应用程序为 .sav 扩展文件执行“打开方式”选项

> ID：15497813
> 
> 赞同：0
> 
> 时间：2013-03-19T11:08:57.343
> 
> 标签：ios, spss

在 iOS 设备上，邮件应用程序为附件提供“打开方式...”选项。列出的应用程序已在操作系统中注册了它们的 CFBundleDocumentTypes。通过这个，我必须在我的应用程序上打开 SPSS 文件（.sav 扩展名）。我将如何实现这一目标？

```
<key>CFBundleDocumentTypes</key>
<array>
    <dict>
        <key>CFBundleTypeExtensions</key>
        <array>
            <string>.SAV</string>
        </array>
        <key>CFBundleTypeIconFiles</key>
        <array/>
        <key>CFBundleTypeName</key>
        <string>SPSS</string>
        <key>CFBundleTypeRole</key>
        <string>Viewer</string>
        <key>LSHandlerRank</key>
        <string>Alternate</string>
        <key>LSItemContentTypes</key>
        <array/> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T05:18:31.883

```
<key>CFBundleDocumentTypes</key>
<array>
    <dict>
        <key>CFBundleTypeName</key>
        <string>SPSS</string>
        <key>CFBundleTypeRole</key>
        <string>Viewer</string>
        <key>LSHandlerRank</key>
        <string>Alternate</string>
        <key>LSItemContentTypes</key>
        <array>
            <string>public.item</string>
        </array> 
```

通过使用 public.item 我找到了我的解决方案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T06:49:33.943

您应用的 -Info.plist 是添加[该 key](https://developer.apple.com/library/mac/documentation/General/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html#//apple_ref/doc/uid/TP40009249-101685-TPXREF107)的地方。[您可以在 Apple 的Information Property List Key Reference](https://developer.apple.com/library/mac/documentation/General/Reference/InfoPlistKeyReference/Introduction/Introduction.html#//apple_ref/doc/uid/TP40009248-SW1)中了解该 plist 的工作原理

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-22T06:59:53.383

```
You are missing some closing XML tags:

    <key>CFBundleDocumentTypes</key>
    <array>
        <dict>
            <key>CFBundleTypeIconFiles</key>
            <array/>
            <key>CFBundleTypeName</key>
            <string>a</string>
            <key>LSItemContentTypes</key>
            <array>
                <string>b</string>
            </array>
        **</dict>
    </array>** 
```

# java - Hibernate 从 JTA 急切转向延迟加载和每个线程的会话

> ID：15497815
> 
> 赞同：1
> 
> 时间：2013-03-19T11:09:03.030
> 
> 标签：java, hibernate, lazy-loading, jta, thread-local

我在休眠配置中使用：

```
<property name="hibernate.current_session_context_class">thread</property> 
```

和 ：

```
private static final ThreadLocal<Session> threadLocal = new ThreadLocal<Session>(); 
```

在示例之后执行：

[http://hibernateannotation.blogspot.com/2012/03/hibernate-singleton-sessionfactory.html](http://hibernateannotation.blogspot.com/2012/03/hibernate-singleton-sessionfactory.html)

我正在尝试从 JTA 转移到基于线程的会话。

我的问题是，在每个示例中，在懒惰地查询项目之后，他们正在提交事务并关闭会话：

[http://www.laliluna.de/download/first-hibernate-2-example-tutorial-en.pdf](http://www.laliluna.de/download/first-hibernate-2-example-tutorial-en.pdf)

所以我想从`JTA`转到`Thread`，是因为我需要打开我的会话，直到我`thread`关闭。因为当它们`session`在延迟加载对象后关闭时，我尝试获取对象属性，我得到`lazyloading error`.

**有没有办法做到这一点，以便会话由线程管理**，我知道类似的东西在`Spring`，但我只是在我的 webapp 中进行简单的休眠。

# iphone - 在 MKMapView 中定位地址

> ID：15497816
> 
> 赞同：1
> 
> 时间：2013-03-19T11:09:05.210
> 
> 标签：iphone, ios, objective-c, mkmapview, geocoding

我试图在 MKMapView 中加载一个地址，为此我使用了以下代码

```
CLLocationCoordinate2D location = [self getLocationFromAddressString:@"321 Iowa St, Fallbrook, CA 92028, United States US"];
MKCoordinateRegion region;
MKCoordinateSpan span;

span.latitudeDelta = 0.05;
span.longitudeDelta = 0.05;

region.span = span;
region.center = location;

[mapView setRegion:region animated:YES];
[mapView regionThatFits:region]; 
```

下面是获取给定地址位置的代码

```
-(CLLocationCoordinate2D) getLocationFromAddressString:(NSString*) addressStr 
{
NSString *urlStr = [NSString stringWithFormat:@"http://maps.google.com/maps/geo?q=%@&output=csv", 
                    [addressStr stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
NSError *error = nil;
NSString *locationStr = [NSString stringWithContentsOfURL:[NSURL URLWithString:urlStr] encoding:NSUTF8StringEncoding error:&error];
NSArray *items = [locationStr componentsSeparatedByString:@","];

double lat = 0.0;
double lon = 0.0;

if([items count] >= 4 && [[items objectAtIndex:0] isEqualToString:@"200"]) {
    lat = [[items objectAtIndex:2] doubleValue];
    lon = [[items objectAtIndex:3] doubleValue];
}
else {
    NSLog(@"Address, %@ not found: Error %@",addressStr, [items objectAtIndex:0]);
}
CLLocationCoordinate2D location;
location.latitude = lat;
location.longitude = lon;

return location;
} 
```

但它回来了，

`Address, 321 Iowa St, Fallbrook, CA 92028, United States US not found: Error 610`

为什么我得到这个错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T11:16:42.873

试试这个 ：：

```
- (CLLocationCoordinate2D) geoCodeUsingAddress:(NSString *)address
{
   double latitude = 0.0;
   double longitude = 0.0;

   NSString *esc_addr =  [address stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
   NSString *req = [NSString stringWithFormat:@"http://maps.google.com/maps/api/geocode/json?sensor=false&address=%@", esc_addr];

   NSDictionary *googleResponse = [[NSString stringWithContentsOfURL: [NSURL URLWithString: req] encoding: NSUTF8StringEncoding error: NULL] JSONValue];

   NSDictionary    *resultsDict = [googleResponse valueForKey:  @"results"];   // get the results dictionary
   NSDictionary   *geometryDict = [resultsDict valueForKey: @"geometry"];   // geometry dictionary within the  results dictionary
   NSDictionary   *locationDict = [geometryDict valueForKey: @"location"];   // location dictionary within the geometry dictionary

   NSArray *latArray = [locationDict valueForKey: @"lat"];
   NSString *latString = [latArray lastObject];     // (one element) array entries provided by the json parser

   NSArray *lngArray = [locationDict valueForKey: @"lng"];
   NSString *lngString = [lngArray lastObject];     // (one element) array entries provided by the json parser

   CLLocationCoordinate2D location;
   location.latitude = [latString doubleValue];// latitude;
   location.longitude = [lngString doubleValue]; //longitude;

   return location;
} 
```

我之前发现了同样的问题。

可能存在有关 Google API 服务的问题。

希望这对你来说是 htlp。

谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T11:15:31.730

根据[文档](https://developers.google.com/maps/documentation/javascript/v2/reference?hl=fr#GGeoStatusCode)

> G_GEO_BAD_KEY = 610 给定的密钥无效或与给定它的域不匹配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T11:16:40.027

从我从谷歌的[地理编码 api 文档中可以看出](https://developers.google.com/maps/documentation/geocoding/)

是您以错误的方式调用他们的api。对他们的 api 的调用应该如下所示：

```
http://maps.googleapis.com/maps/api/geocode/json?address=321%20Iowa%20St,%20Fallbrook,%20CA%2092028,%20United%20States%20US 
```

# sql - 选择最佳日期

> ID：15497825
> 
> 赞同：2
> 
> 时间：2013-03-19T11:09:28.217
> 
> 标签：sql, db2

我有以下查询：

```
SELECT distinct person, address, from_date, to_date 
  FROM db
 WHERE '2000-01-01' BETWEEN from_date AND to_date 
```

这很好，但是它在 2000 年 1 月 1 日带回了一些拥有多个地址的人。我只想选择 to_date 最大的地址。

即如果查询返回：

```
person-------------address--------from_date--------to_date
1------------------34-------------1999-06-12-------2000-04-04 
1------------------27-------------1999-06-12-------2000-12-12 
```

我只想选择第二行。

做以下就足够了吗？

```
SELECT distinct person, address,from_date, MAX(to_date) 
  FROM db
WHERE '2000-01-01' BETWEEN from_date AND to_date 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T11:37:22.723

查询可能类似于（虽然这可以进一步简化）：

```
SELECT db.person, address, from_date,db.to_date
  FROM db, (SELECT person, max(to_date) to_date
            FROM db
           GROUP BY person) db_max
WHERE '2000-01-01' BETWEEN db.from_date AND db.to_date
  AND db.to_date = db_max.to_date
  AND db.person = db_max.person; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T11:36:17.623

```
SELECT person, address,from_date, to_date
  FROM db db_outer
 WHERE '2000-01-01' BETWEEN from_date AND to_date
   AND EXISTS (SELECT 1
                 FROM db db_inner
                WHERE db_outer.person = db_inner.person
             GROUP BY db_inner.person
               HAVING MAX(db_inner.to_date) = db_outer.to_date) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T11:38:28.603

你需要一个子查询：[http](http://allenbrowne.com/subquery-01.html) ://allenbrowne.com/subquery-01.html是最好的解释，子查询可以有一个顺序，因为你有一个“顶部”

# xcode - 地图相机位置急剧变化，没有动画

> ID：15497827
> 
> 赞同：10
> 
> 时间：2013-03-19T11:09:31.497
> 
> 标签：xcode, animation, ios6, google-maps-sdk-ios

我使用适用于 iOS 的谷歌地图 SDK。我的地图上有标记，并且想要设置适当的缩放比例，以便标记是分开的，并且标记应该同时在屏幕上可见。我能够做到。我已经使用逻辑完成，如果所有标记都可见然后放大。但问题是地图相机正在急剧变化。我尝试了很多动画这个缩放，但我没能做到。我尝试了 animateToCameraPosition、animateToZoom 和 UIView 动画方法。

```
- (BOOL)allCoordinatesVisibleWithLatitudes:(NSArray *)arrayOfLatitudes Longitudes:(NSArray *)arrayOfLongitudes
    {
    CLLocationCoordinate2D coordinate;
    for(int i=0;i<arrayOfLatitudes.count;i++)
    {
        coordinate = CLLocationCoordinate2DMake([[arrayOfLatitudes objectAtIndex:i] floatValue], [[arrayOfLongitudes objectAtIndex:i] floatValue]);
        if(![self.mapView.projection containsCoordinate:coordinate])
        {
            return NO;
        }
    }
    return YES;
}

- (void)setZoomToHaveProperView
{
    NSMutableArray * arrayOfLatitudes = [[NSMutableArray alloc] init];
    NSMutableArray * arrayOfLongitudes = [[NSMutableArray alloc] init];
    RS_SingleMatch * singleMatch = [[RS_SingleMatch alloc] init];
    float zoom = 0.0;

    // You may ignore this first for loop. it just takes coordinate of all markers in     arrays.

    for(int i=0;i<=self.userMatches.arrayOfMatches.count;i++)
    {
        if(i==self.userMatches.arrayOfMatches.count)
        {
            RS_Trip * userTrip = [[RS_Trip alloc] init];
            [arrayOfLatitudes addObject:[NSNumber numberWithFloat:userTrip.fromLat]];
            [arrayOfLongitudes addObject:[NSNumber numberWithFloat:userTrip.fromLon]];
            if(self.segmentedControl.selectedSegmentIndex == 1)
            {
                [arrayOfLatitudes addObject:[NSNumber numberWithFloat:userTrip.toLat]];
                [arrayOfLongitudes addObject:[NSNumber numberWithFloat:userTrip.toLon]];
            }
        }
        else
        {
            singleMatch = [self.userMatches.arrayOfMatches objectAtIndex:i];
            [arrayOfLatitudes addObject:[NSNumber numberWithFloat:singleMatch.fromLat]];
            [arrayOfLongitudes addObject:[NSNumber numberWithFloat:singleMatch.fromLong]];
            if(self.segmentedControl.selectedSegmentIndex == 1)
            {
                [arrayOfLatitudes addObject:[NSNumber numberWithFloat:singleMatch.toLat]];
                [arrayOfLongitudes addObject:[NSNumber numberWithFloat:singleMatch.toLong]];
            }
        }
}
    zoom = self.mapView.camera.zoom;

    // if all coordinates are visible then zoom in
    if([self allCoordinatesVisibleWithLatitudes:arrayOfLatitudes Longitudes:arrayOfLongitudes])
    {
        while ([self allCoordinatesVisibleWithLatitudes:arrayOfLatitudes Longitudes:arrayOfLongitudes])
        {
            zoom += 0.5;
            [self.mapView setCamera:[GMSCameraPosition cameraWithTarget:self.mapView.camera.target zoom:zoom]];
            [self.mapView animateToCameraPosition:[GMSCameraPosition cameraWithTarget:self.mapView.camera.targetAsCoordinate zoom:zoom]];
        }
    }
} 
```

我还尝试在 if 条件的 while 循环中颠倒设置 mapview 相机和动画相机的顺序。我花了3天时间才这样做。现在寻求您的帮助。先感谢您。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-19T12:19:42.037

我认为这个问题是调用`setCamera`将在没有动画的情况下捕捉到新的缩放级别 - 所以下面的调用`animateToCameraPosition`实际上不会动画任何东西，因为相机已经在那个位置。

但是，如果您删除了对的调用，`setCamera`那么您可能会陷入无限循环，因为`animateToCameraPosition`对循环标记仍然是可见的。

您需要做的是计算您需要的最终缩放级别，然后进行一次调用以`animateToCameraPosition`将相机移动到那里。

我在这里发布了一些代码来计算相机的中心和缩放级别以适应范围：

[如何使用适用于 iOS 的 google maps sdk 设置区域？](https://stackoverflow.com/questions/15040409/how-to-setregion-with-google-maps-sdk-for-ios)

因此，您可以使用类似的东西来计算适合您的标记到屏幕上的相机位置。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-02-10T22:47:48.400

更简单的答案：

代替

```
[self.mapView setCamera:[GMSCameraPosition cameraWithTarget:self.mapView.camera.target zoom:zoom]];
[self.mapView animateToCameraPosition:[GMSCameraPosition cameraWithTarget:self.mapView.camera.targetAsCoordinate zoom:zoom]]; 
```

做这个：

```
[self.mapView animateToCameraPosition:[GMSCameraPosition cameraWithTarget:[GMSCameraPosition cameraWithTarget:self.mapView.camera.target zoom:zoom]]]; 
```

为我工作！

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-03-10T06:09:27.047

```
GMSCameraPosition *newCameraPosition = [GMSCameraPosition cameraWithTarget:cordinate zoom:position.zoom];
dispatch_async(dispatch_get_main_queue(), ^{
        [self.mapView animateToCameraPosition:newCameraPosition];
 }); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-02-18T22:14:51.657

此代码将 mapview 的相机平滑/动画重新定位到所选标记。

```
- (BOOL)mapView:(GMSMapView *)mapView didTapMarker:(GMSMarker *)marker {

     [mapView animateWithCameraUpdate:[GMSCameraUpdate setTarget:marker.position]];
     mapView.selectedMarker = marker;
     return YES;
} 
```

# java - Android 中来自 Django 的 JSON 响应

> ID：15497833
> 
> 赞同：4
> 
> 时间：2013-03-19T11:09:39.970
> 
> 标签：java, android, django, json

我正在尝试从基于 Django 的 Web 后端获取 Android 中的 JSON 响应。我得到的回应是

```
03-19 16:32:32.120: I/System.out(7442): This si the response march API <!doctype html>  <!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en"> <![endif]-->  <!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->  <!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->  <head>    <meta charset="utf-8">    <title>ECOM</title>            <meta http-equiv="X-UA-Compatible" content="IE=Edge;chrome=1" >    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">            <meta name="description" content="">    <meta name="author" content="">        <meta name="apple-mobile-web-app-capable" content="yes" />        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />            <meta property="og:image" content="http://www.domain.com/images/logo.png"/>    <meta property="og:title" content="-- description here --"/>    <meta property="og:url" content="http://www.domain.com"/>            <link rel="shortcut icon" href="/static/assets/img/favicon.ico" />    <link rel="apple-touch-icon" href="/static/assets/img/apple-touch-icon.png">    <link rel="apple-touch-icon" sizes="72x72" href="/static/assets/img/apple-touch-icon-72x72.png">    <link rel="apple-touch-icon" sizes="114x114" href="/static/assets/img/apple-touch-icon-114x114.png">             <link rel="stylesheet" href="/static/assets/css/styles.css" />                    <script src="/static/assets/js/libs/modernizr.custom.60077.js"></script>          <link rel="stylesheet" href="/static/assets/css/popup.css" />             <script src="/static/assets/js/jquery-1.7.2.min.js"></script>           <script src="/static/assets/authentication/js/popup.js"></script>    </head><body><div id="backgroundPopup"></div>      <div class="header" style="text-align:center; padding-top:10px;">       <img src="/static/assets/img/Ecomlogo.png"/>  </div>   <div class="container-fluid" roll="main" id="main">    <div class="span6"><a href="/track_me/scan_open/1/" class="forgotpass pull-right">Track Shipment</a>      <div class="login">        <div class="title">          Login                  </div>                <div class="content-login">          <form action="." method="POST">          <div style='display:none'><input type='hidden' name='csrfmiddlewaretoken' value='xpfLvzIES8w6qzpi7kCFp0crWx9aZHGD' /></div>              <input type= "text" name ="username" placeholder="Username" class="user-name"/>            <input type= "Password" name="password" placeholder="Password"/>            <input type="submit" class="button-login"/>            <a href="#" class="forgotpass pull-right" id="forgotpass">Forgot Your Password?</a>          </form>        </div>      </div>    </div>    <div class="span6">      <div class="login">        <div class="title">          Ecom Express News                  </div>        <div class="content-login">                  </div>      </div>    </div>  </div>       <!-- modal -->  <div class="modal hide modal-add-revlet" id="add-revlet">    <div class="modal-header">      <a class="close" data-dismiss="modal">×</a>      <h3>Record</h3>    </div>    <div class="modal-body">          </div>  </div><!--modal end-->   <div id="popupContact">             <a id="popupContactClose">x</a>    </div>        <!-- uncomment pre-deloy -->  <!--<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>-->  <script>window.jQuery || document.write('<script src="assets/js/libs/jquery-1.7.1.min.js"><\/script>')</script>  <!-- bootstrap -->  <script src="/static/assets/js/bootstrap-transition.js"></script>  <script src="/static/assets/js/bootstrap-alert.js"></script>  <script src="/static/assets/js/bootstrap-modal.js"></script>  <script src="/static/assets/js/bootstrap-dropdown.js"></script>  <script src="/static/assets/js/bootstrap-scrollspy.js"></script>  <script src="/static/assets/js/bootstrap-tab.js"></script>  <script src="/static/assets/js/bootstrap-tooltip.js"></script>  <script src="/static/assets/js/bootstrap-popover.js"></script>  <script src="/static/assets/js/bootstrap-button. 
```

安卓请求

```
private String GetPickUpDetails(String pick_up_id2) {

        StringBuilder response  = new StringBuilder();
        String stringUrl=Constants.PICKUP_DETAILS+pick_up_id2+"/";
        URL url;
        try {
            url = new URL(stringUrl);

            HttpURLConnection httpconn = (HttpURLConnection)url.openConnection();
            if (httpconn.getResponseCode() == HttpURLConnection.HTTP_OK)
            {
                BufferedReader input = new BufferedReader(new InputStreamReader(httpconn.getInputStream()),8192);
                String strLine = null;
                while ((strLine = input.readLine()) != null)
                {
                    response.append(strLine);
                }
                input.close();
            }
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        System.out.println("This si the response march API "+response.toString()+" for url"+stringUrl);
        return response.toString();

    } 
```

Django 查看代码

```
def pickup_details(request,id):
        awb_dict={}
    if request.POST:
        print "this is post request",id 
        shipment_records=[]
        shippments=Shipment.objects.filter(pickup_id=id)

        for obj in shippments:
            awb=obj.airwaybill_number
            order_number=obj.order_number
            pincode=obj.pincode
            dest_sc=obj.service_centre
            type=obj.product_type
            if(type == "ccd"):
                col_val=obj.collectable_value
            else:
                col_val=""    
            status=obj.status
            city=obj.destination_city
            act_wt=obj.actual_weight
            dest_SC="hi"
            dest_SC=obj.service_centre
            #dest_SC=String(dest_SC).replace('-',' ')   
            record={"awb":awb,"ordernumber":order_number,"pincode":pincode,"weight":act_wt,"status":status,"city":city,"type":type,"col_value":col_val,"dest_SC":city}
            shipment_records.append(record)

        awb_dict["count"]=len(shipment_records)
        awb_dict["shipments"]=shipment_records
    #else:
         #pass

        return HttpResponse(simplejson.dumps(awb_dict) ) 
```

我不太确定，为什么我没有得到预期的 JSON 响应。手动点击网址后，我得到了预期的 JSON 响应

**编辑 1** 我也尝试过这种方法

```
try{
            URL url = new URL(stringUrl);
            HttpURLConnection httpconn = (HttpURLConnection)url.openConnection();
            if (httpconn.getResponseCode() == HttpURLConnection.HTTP_OK)
            {
                BufferedReader input = new BufferedReader(new InputStreamReader(httpconn.getInputStream()),8192);
                String strLine = null;
                while ((strLine = input.readLine()) != null)
                {
                    response.append(strLine);
                }
                input.close();
            }
        }catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return response.toString();
} 
```

**编辑 2** 我得到的错误是**HTTP 403 请求** ，同时尝试发送请求，因为值没有到达 API 调用

**编辑 3** 我得到的 HTTP 响应为 200。`HttpEntity entity = response.getEntity();`代码的值是`org.apache.http.conn.BasicMangedEntity@4055505d0`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T20:03:48.203

响应将我重定向到我使用过的自定义登录页面`@csrf_exempt`。代码需要进一步的登录详细信息来处理信息。我在调用中添加了登录参数，并获得了所需的响应

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-24T12:21:35.147

**TL;博士**
`httpconn.setRequestProperty("Accept", "application/json");`

* * *

[HttpURLConnection](https://docs.oracle.com/javase/7/docs/api/java/net/HttpURLConnection.html)的默认“Accept” HttpHeader 值为`text/html, image/gif, image/jpeg, *; q=.2, /; q=.2`

何时`text/html`使用 django 返回用 HTML 包装的 JSON。如果需要纯 JSON，Accept HttpHeader 值应设置为`'application/json'`

# string - Lua string.len、string.lower 或任何其他字符串函数不起作用

> ID：15497836
> 
> 赞同：2
> 
> 时间：2013-03-19T11:09:44.157
> 
> 标签：string, lua

我在从 C++ 调用的库中使用 Lua (5.2.1)。

例如，在 C++ 中，我调用函数 OnHear 并传递听到的文本。

然而，在我的 Lua 文件中，我检查了一些奇怪的东西：

```
function OnHear(_Text)
    txt = _Text;
    txt = string.lower(txt); -- comment this line to make the code below run
-- other code
end 
```

这没用; 当注释低的行时，“其他代码”运行良好，但如果正在执行，则不会。

```
function OnHear(_Text)
    txt = string.lower(_Text);
-- other code 
end 
```

同样的问题...

我还发现，当我调用例如 string.len(txt) 或类似的东西时，会发生同样的问题（之后的代码没有被执行）......

我不知道什么可能导致我的问题，谷歌搜索/搜索 Stackkoverflow 并没有帮助我，遗憾的是......

感谢您提前回复！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T11:13:14.953

您是否从 C++ 打开了 Lua 标准库？

> ```
> void luaL_openlibs (lua_State *L); 
> ```
> 
> 将所有标准 Lua 库打开到给定状态。

来自[http://www.lua.org/manual/5.2/manual.html#luaL_openlibs](http://www.lua.org/manual/5.2/manual.html#luaL_openlibs)。

**编辑**

二进制文件默认打开库，`lua`但有时，当嵌入解释器时，库可能是多余的。

# c++ - 如何打印 unsigned long long 所有可能的唯一位掩码？

> ID：15497840
> 
> 赞同：1
> 
> 时间：2013-03-19T11:09:52.130
> 
> 标签：c++, string, hex, string-formatting, stringstream

有一个如何以它的面具`unsigned long long`形式打印它到？`hex``std::string`

我试图迭代二进制（值，如，，`0001`）掩码：`0010``0100`

```
std::stringstream str;
std::string result;
for (unsigned long long mask = 1; mask != 0; mask <<= 1) {
    str << mask;
    str >> result;
    std::cout << result << std::endl;
    str.flush();
} 
```

但我只看到值`==` `1`（请参阅[此处的实时示例](http://ideone.com/eOh9DY)）。

所以我想知道如何打印所有可能的唯一位掩码`unsigned long long`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:14:40.127

你需要使用`str.clear()`，而不是`str.flush()`。看到[这个](https://stackoverflow.com/questions/1070497/c-convert-hex-string-to-signed-integer)十六进制部分

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T11:23:09.900

> *有一个如何以它的面具`unsigned long long`形式打印它到？`hex``std::string`*

您需要用于[`std::hex`](http://www.cplusplus.com/reference/ios/hex/)以十六进制为基数打印数字，并注意要重用`stringstream`对象，您实际上需要通过 using`str()`方法清除其内容，并通过调用清除错误状态标志[`clear()`](http://www.cplusplus.com/reference/ios/ios/clear/)：

```
#include <iostream>
#include <sstream>

int main()
{
    std::stringstream str;
    std::string result;
    for (unsigned long long mask = 1; mask != 0; mask <<= 1)
    {
        // retrieve the string:
        str << std::hex << mask;
        str >> result;
        std::cout << result << std::endl;

        // clear the stringstream:
        str.clear();
        str.str(std::string());
    }
} 
```

请参阅[如何重用 ostringstream？](https://stackoverflow.com/q/624260/1168156):)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T11:14:12.470

unsigned long long 的每个值都是唯一的。所以迭代它并看看这个问题 [Is there a printf converter to print in binary format？](https://stackoverflow.com/questions/111928/is-there-a-printf-converter-to-print-in-binary-format)

**[编辑]** 啊，我看到您只想要设置一位的值。好的，不要迭代，通过它。

# assembly - 使用 int 13h 从硬盘驱动器读取一个写入一个扇区

> ID：15497842
> 
> 赞同：8
> 
> 时间：2013-03-19T11:10:01.687
> 
> 标签：assembly, x86, bootloader, bios, bochs

我有一个简单的程序。它必须从硬盘驱动器（不是 mbr）读取第一个扇区，并将其写入 0 扇区（mbr）。但它不起作用。我认为它与错误的 DAP 有关。谢谢。

```
 [bits   16]
    [org    0x7c00]

;clear screen
start:
    mov     ax, 0x3
    int     0x10

;reset the hard drive
    xor     ah, ah
    mov     dl, 0x80
    int     0x13
    jnz     error

;read the second sector
    mov     si, DAP
    mov     ah, 0x42
    int     0x13

    mov     si, data
    call    print_string
    jmp     $

DAP:
    db      0x10    ;size of DAP
    db      0x0     ;zero
    db      0x1     ;number of sectors to read
    db      0x0     ;zero
;point to memory
    dw      0x0     ;offset
    dw      0x0     ;segment
    dq      0x1     ;disk address

DAP2:
    db      0x10
    db      0x0
    db      0x1
    db      0x0
    dw      0x0
    dw      0x0
    dd      0x0
    dd      0x0            

print_string:
    mov     ax, 0xb800
    mov     es, ax
    xor     di, di
    mov     cx, 8
    rep     movsw
    ret
data: db 'H',2,'e',2,'l',2,'l',2
error:db 'E',2,'r',2,'r',2
    times   510 - ($ - $$) db 0
    dw      0xaa55 
```

UPD：新代码

```
 [bits   16]
    [org    0x7c00]

;clear screen
start:
;    mov     ah, 0
;    push    ax
;    pop     ds
    mov     ax, 0x3
    int     0x10

;reset the hard drive
    xor     ah, ah
    mov     dl, 0x80
    int     0x13
    jc      error

;read the second sector
    mov     si, DAP
    mov     ah, 0x42
    int     0x13

    mov     si, data
    call    print_string
    jmp     $

DAP:
    db      0x10    ;size of DAP
    db      0x0     ;zero
    db      0x1     ;number of sectors to read
    db      0x0     ;zero
;point to memory
    dw      0x0     ;offset
    dw      0x8c00  ;segment
    dq      0x1     ;disk address

DAP2:
    db      0x10
    db      0x0
    db      0x1
    db      0x0
    dw      0x0
    dw      0x8c00
    dq      0x2            

print_string:
    mov     ax, 0xb800
    mov     es, ax
    xor     di, di
    mov     si, 0x8c00
    mov     cx, 8
    rep     movsw
    ret

data: db 'H',2,'e',2,'l',2,'l',2
error:db 'E',2,'r',2,'r',2
endp:
    times   510 - ($ - $$) db 0
    dw      0xaa55 
```

PS我正在使用Bochs。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-07-23T10:03:50.553

有点恋尸癖；希望您的组装技能在此期间有所提高。但以防万一...

引用@Alexey Frunze 的话，“你需要注意你在做什么”。除了其他答案中详述的错误外，以下是我的一些观察：

### 你的模拟器太客气了

*   您的代码似乎是引导加载程序。您假设 BIOS 将在 加载您的代码`0x0000:0x7C00`，但您不能确定它实际上没有在`0x07C0:0000`或任何其他等效地址加载它。阅读[细分](http://wiki.osdev.org/Segmentation)。

*   您未能初始化任何段寄存器。您可能会侥幸逃脱，因为您的模拟器很友善，并且正确初始化`cs`,`ds`和`es`to `0x0000`。

您可以像这样解决这两个问题：

```
[bits 16]
[org 0x7C00]

    jmp 0x0000:start_16 ; ensure cs == 0x0000

start_16:
    ; initialise essential segment registers
    xor ax, ax
    mov ds, ax
    mov es, ax 
```

### 根本的误解

*   如果发生错误，您会直接跳转到字符串，而不是可执行代码。上帝只知道如果发生这种情况计算机会做什么。

*   您检查驱动器复位的返回值 (CF)，而不是读取本身。如果读取失败，您应该重置驱动器并再次尝试读取。如果驱动器打嗝，请在循环中尝试几次（例如 3 次）。如果驱动器重置失败，则可能是更严重的问题，您应该保释。

### 更安全的方法

我建议使用`int 0x13, ah = 0x02`. 您正在使用可能并非所有系统都支持的扩展 BIOS 功能（仿真器支持可能很不稳定，更不用说在某些现代硬件上发现的惰性 BIOS 实现了）。你处于真实模式 - 你不需要做任何花哨的事情。最好进入保护模式，以编写 PM 驱动程序来处理磁盘 I/O 的长期目标。

只要您处于实模式，这里有一个独立的函数，它可以使用简单的 BIOS 函数从磁盘读取一个或多个扇区。如果您事先不知道需要哪个扇区，则必须添加额外的检查以处理[多轨读取](http://www.ctyme.com/intr/rb-0607.htm)。

```
; read_sectors_16
;
; Reads sectors from disk into memory using BIOS services
;
; input:    dl      = drive
;           ch      = cylinder[7:0]
;           cl[7:6] = cylinder[9:8]
;           dh      = head
;           cl[5:0] = sector (1-63)
;           es:bx  -> destination
;           al      = number of sectors
;
; output:   cf (0 = success, 1 = failure)

read_sectors_16:
    pusha
    mov si, 0x02    ; maximum attempts - 1
.top:
    mov ah, 0x02    ; read sectors into memory (int 0x13, ah = 0x02)
    int 0x13
    jnc .end        ; exit if read succeeded
    dec si          ; decrement remaining attempts
    jc  .end        ; exit if maximum attempts exceeded
    xor ah, ah      ; reset disk system (int 0x13, ah = 0x00)
    int 0x13
    jnc .top        ; retry if reset succeeded, otherwise exit
.end:
    popa
    retn 
```

您的打印功能采用彩色监视器（通过写入 0xB8000 的视频内存）。同样，您处于实模式。把事情简单化。使用 BIOS 服务：

```
; print_string_16
;
; Prints a string using BIOS services
;
; input:    ds:si -> string

print_string_16:
    pusha
    mov  ah, 0x0E    ; teletype output (int 0x10, ah = 0x0E)
    mov  bx, 0x0007  ; bh = page number (0), bl = foreground colour (light grey)
.print_char:
    lodsb            ; al = [ds:si]++
    test al, al
    jz   .end        ; exit if null-terminator found
    int  0x10        ; print character
    jmp  .print_char ; repeat for next character
.end:
    popa
    retn 
```

### 示例用法

```
load_sector_2:
    mov  al, 0x01           ; load 1 sector
    mov  bx, 0x7E00         ; destination (might as well load it right after your bootloader)
    mov  cx, 0x0002         ; cylinder 0, sector 2
    mov  dl, [BootDrv]      ; boot drive
    xor  dh, dh             ; head 0
    call read_sectors_16
    jnc  .success           ; if carry flag is set, either the disk system wouldn't reset, or we exceeded our maximum attempts and the disk is probably shagged
    mov  si, read_failure_str
    call print_string_16
    jmp halt                ; jump to a hang routine to prevent further execution
.success:
    ; do whatever (maybe jmp 0x7E00?)

read_failure_str db 'Boot disk read failure!', 13, 10, 0

halt:
    cli
    hlt
    jmp halt 
```

### 最后但并非最不重要的...

您的引导加载程序没有设置堆栈。我提供的代码使用堆栈来防止寄存器垃圾。在引导加载程序 (< 0x7C00) 之前几乎有[30KiB](http://wiki.osdev.org/Memory_Map_(x86))可用，因此您可以在引导加载程序开始附近的某个地方简单地执行此操作：

```
xor ax, ax
cli         ; disable interrupts to update ss:sp atomically (AFAICT, only required for <= 286)
mov ss, ax
mov sp, 0x7C00
sti 
```

呸！很多东西要消化。请注意，我已尝试保持独立功能的灵活性，以便您可以在其他 16 位实模式程序中重复使用它们。我建议您尝试编写更多模块化代码，并坚持这种方法，直到您更有经验为止。

例如，如果您对使用扩展读取函数一无所知，也许您应该在堆栈上编写一个接受 DAP 或指向其中的指针的函数。当然，首先将数据推送到那里会浪费代码空间，但是一旦到达那里，您就可以简单地调整必要的字段以进行后续读取，而不是让大量 DAP 占用内存。堆栈空间可以稍后回收。

不要灰心，组装需要时间，而且非常注重细节......在工作中抨击这些东西并不容易，所以我的代码中可能有错误！:)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-19T11:37:52.907

首先，您需要检查`cf`而不是`zf`查看 BIOS 调用是否成功。更正您的`jnz error`.

其次，您似乎依赖于`ds`等于0。不能保证为0。将其设置为0。

同上`flags.df`，它不保证为 0。将其设置为 0。查看 和 上的`rep`文档。`movs*``cld`

第三，您要求 BIOS 读取扇区并将其写入内存中的物理地址 0。这样做会覆盖中断向量表（从那里开始并占用 1KB）并损坏系统，需要重新启动。选择更好的地址。最好是在内存中的引导扇区结束之后。但是您还需要确保堆栈不存在，因此您还需要将堆栈设置到已知位置。

你需要注意你在做什么。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-05T07:45:07.870

最小的 NASM BIOS 示例，它加载带有代码的扇区并跳转到它，没有错误检查和 DAP：

```
use16
org 0x7C00

    ; For greater portability you should
    ; do further initializations here like setup the stack and segments. 

    ; Load stage 2 to memory.
    mov ah, 0x02
    mov al, 1
    ; This may not be necessary as many BIOS setup is as an initial state.
    mov dl, 0x80
    mov ch, 0
    mov dh, 0
    mov cl, 2
    mov bx, stage2
    int 0x13

    jmp stage2

    ; Magic bytes.    
    times ((0x200 - 2) - ($ - $$)) db 0x00
    dw 0xAA55

stage2:

    ; Print 'a'.
    mov ax, 0x0E61
    int 0x10

    cli
    hlt

    ; Pad image to multiple of 512 bytes.
    times ((0x400) - ($ - $$)) db 0x00 
```

编译并运行：

```
nasm -f bin -o main.img main.asm
qemu-system-i386 main.img 
```

预期结果：`a`打印到屏幕上，然后程序停止。

在 Ubuntu 14.04 上测试。

[Saner GAS 示例在我的 GitHub 上](https://github.com/cirosantilli/x86-bare-metal-examples/blob/5c2e547b524e6d0f4217780e2036ec525d6b205c/bios_disk_load.S)使用链接器脚本和更正确的初始化（段寄存器、堆栈）。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-11-22T08:16:33.853

```
load:
; Load sectors routine : bootdrv-drive , snum-sectors to load
;ES:BX where to load ex:  mov ax,0000h mov es,ax  mov bx, 7c00h
        push bx
        push ds
        mov verify,0h
.reset:
        cmp verify,5h
        je Err1
        add verify,1h
        mov ax, 0               ; Reset Disk
        mov dl, [BootDrv]       ; Drive to reset
        int 13h                 ;
        jc .reset               ; Failed -> Try again

        pop ds
        pop bx
        mov verify,0h
.read:
        cmp verify,5h
        je Err1
        add verify,1h
        mov ah, 2               ; Interrupt 13h,2 => Read disk sectors
        mov al, snum            ; how many sectors to read
        mov cx, fsect           ; cl-first sector to be r/w ch-track containing sector
        mov dh, head               ; head=0
        mov dl, [BootDrv]       ; Drive=boot drive
        int 13h                 ; Read! ES:BX = data from disk
        jc .read                ; failed -> Try again
        retn 
```

# android - 如何使用 gradle 对库进行依赖注入？

> ID：15497843
> 
> 赞同：2
> 
> 时间：2013-03-19T11:10:21.987
> 
> 标签：android, gradle

我们正在开发一个依赖于一些 Java 库的 Android 项目。出于测试目的，我们希望能够使用包含不同 jar 的存根变体。如何用 gradle 做到这一点？

我一直在尝试一些有味道的东西，但现在只建造了“味道”，而不是正常的建造......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:40:50.700

使用像 Google Guice 这样的轻量级 DI 容器可能比尝试使用构建系统执行此操作更好。

[https://code.google.com/p/google-guice/](https://code.google.com/p/google-guice/)

您可以定义一个测试模块和一个生产模块，将项目分别绑定到测试和生产类。

如果你真的想用 gradle 来做，我想不出一个很好的方法来做到这一点。一种方法是定义一个新配置（称为 testAndroid），并从中排除所有生产 jar，并用测试 jar 替换它们。然后你仍然可以使用java插件来构建它。您可以定义一个新的归档文件，该归档文件将在运行 uploadArchives 时发布测试 jar。这是一个突出的例子：

```
configurations{
    testAndroid extendsFrom compile
    testAndroid.exclude(group: 'my.company.production') 
}

dependencies{
    compile group: 'my.company.production', name: 'prod-jar', version: '1.0'
    testAndroid group: 'my.company.test', name: 'test-jar', version: '1.0'
}

task testJar(type: Jar){
    //build the jar
}

artifacts{
     archives testJar
} 
```

# json - JQuery Cross Domain JSON 总是导致 XHR 200 错误

> ID：15497845
> 
> 赞同：0
> 
> 时间：2013-03-19T11:10:27.623
> 
> 标签：json, jquery, cross-domain, jsonp

我想使用 JQuery JSON 跨域查询在我的页面上显示一些数据。我一直收到 XHR 200 错误，如果我使用浏览器请求（直接 URL）查询数据，我可以将数据收集为有效的 JSON。

以下是我正在使用的代码：

```
 $.ajax({
        url: 'www.mytestdomain.com/?some=paramters',
        contentType: 'application/x-www-form-urlencoded; charset=utf-8',
        type: 'POST',
        dataType: 'jsonp',
        data: {},
        success: function (data) {
           //some display logic is here, 
           //which is working fine 
           //if in same domain using json and not as jsonp

            });
        },
        error: function (xhr, status, thrownError) {
            throwServiceError(xhr, status, thrownError);
        }
    }); 
```

* * *

```
 //function to show specific jq error
function throwServiceError(xhr, status, thrownError) {
$("#error-wrapper").empty();
switch (xhr.status) {
    case 404:
        $("#error-wrapper").append('File not found');
        break;
    case 500:
        $("#error-wrapper").append('Server error');
        break;
    case 200:
        $("#error-wrapper").append(xhr.status + ":- " + thrownError);
        break;
    case 0:
        $("#error-wrapper").append('Request aborted');
        break;
    default:
        $("#error-wrapper").append('Unknown error ' + xhr.status);
        break;
}
} 
```

注意：我尝试使用回调函数和 callback=? 在请求 URL 中，但结果保持不变，请提出可行的解决方案。

# android - Android SectionList 和 Holder

> ID：15497847
> 
> 赞同：1
> 
> 时间：2013-03-19T11:10:29.317
> 
> 标签：android, listview, android-arrayadapter

我有带部分的列表，但是这个 ListView 很慢。

我需要任何支架，但我不知道我怎么做。

当我有一种视图时，它很简单，但在这里我遇到了问题。

我创建了持有人，但是当 ListView 显示时，我看到：

“标题”、“标题”、“标题”、“项目”、“项目”

“标题”、“标题”、“标题”、“项目”

“标题”、“标题”、“标题”、“项目”、“项目”、“项目”

这是我的代码：

```
public class EntryAdapter extends ArrayAdapter<Item> {

private ArrayList<Item> items;
private LayoutInflater vi;
Context context;
private String nazwa;

public EntryAdapter(Context context,ArrayList<Item> items, String nazwa) {
    super(context,0, items);
    this.items = items;
    this.context = context;
    this.nazwa = nazwa;
    vi = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
} 
```

而我的观点：

```
 @Override
public View getView(int position, View convertView, ViewGroup parent) {

    final Item i = items.get(position);
    if (i != null) {
        if(i.isSection()){
            SectionItem si = (SectionItem)i;
            convertView = vi.inflate(R.layout.list_item_section, null);

            convertView.setOnClickListener(null);
            convertView.setOnLongClickListener(null);
            convertView.setLongClickable(false);

            final TextView sectionView = (TextView) convertView.findViewById(R.id.list_item_section_text);
        }else{
                Obiekt ei = (Obiekt)i;
                convertView = vi.inflate(R.layout.row_list, null);
                final TextView title = (TextView)convertView.findViewById(R.id.row_tytul);
                final TextView odleglosc = (TextView)convertView.findViewById(R.id.row_odleglosc);
                final ImageView obrazek = (ImageView)convertView.findViewById(R.id.row_ikona_mala);
                final LinearLayout pole = (LinearLayout)convertView.findViewById(R.id.LinearLayout1);

        }
    }
    return convertView;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T11:43:28.300

> 我有带部分的列表，但是这个 ListView 很慢。

您总是在 getView() 方法中扩充新视图。膨胀视图通常需要很长时间。

您想通过检查“convertView”是否为空来重用以前的视图。这将提高性能。注意，您还必须实施`getItemViewType()`，`getViewTypeCount()`因为您有两个不同的视图：

```
public class MyAdapter extends ArrayAdapter<Item> {

    private List<Item> items;
    private int TYPE_SECTION = 0;
    private int TYPE_OBIEKT = 1;
    private static LayoutInflater vi;

    public MyAdapter(Context context, List<Item> _items) {
        super(context, 0);
        vi = (LayoutInflater) context.getSystemService(Service.LAYOUT_INFLATER_SERVICE);
        items = _items;
    }

    @Override
    public int getCount() {
        return items.size();
    }

    /**
     * @see android.widget.BaseAdapter#getViewTypeCount()
     * Determines how many different views you have
     */
    @Override
    public int getViewTypeCount() {
        return 2; // We have two different kinds of views
    }

    /**
     * @see android.widget.BaseAdapter#getItemViewType(int)
     */
    @Override
    public int getItemViewType(int position) {
        Item item = items.get(position);
        if (item.isSection())
            return TYPE_SECTION;

        return TYPE_OBIEKT;
    }

    /**
     * @see android.widget.ArrayAdapter#getView(int, android.view.View, android.view.ViewGroup)
     */
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        // Get the item
        final Item item = items.get(position);

        if (getItemViewType(position) == TYPE_SECTION) {

            // Return a SectionView object
            return getSectionView(position, convertView, parent, (SectionItem) item);
        }

        // Return an Obiekt object
        return getObiektView(position, convertView, parent, (Obiekt) item);
    }

    /**
     * SectionView specific
     * 
     * @param position
     * @param convertView
     * @param parent
     * @param item
     * @return
     */
    public View getSectionView(int position, View convertView, ViewGroup parent, SectionItem item) {

        SectionHolder holder;
        if(convertView == null){

            holder = new SectionHolder();

            // Inflate a new View
            convertView = vi.inflate(R.layout.list_item_section, null);
            holder.sectionView = (TextView) convertView.findViewById(R.id.list_item_section_text);

            // Set the ObiektHolder as the tag, to retrieve it for re-using
            convertView.setTag(holder);

        } else {
            holder = (SectionHolder) convertView.getTag();
        }

        // Holder is never null here
        holder.sectionView.setText(item.getSectionTitle());

        return convertView;

    }

    public View getObiektView(int position, View convertView, ViewGroup parent, Obiekt item) {

        ObiektHolder holder;
        if(convertView == null){

            holder = new ObiektHolder();

            // Inflate a new View
            convertView = vi.inflate(R.layout.row_list, null);
            holder.title = (TextView)convertView.findViewById(R.id.row_tytul);
            holder.odleglosc = (TextView)convertView.findViewById(R.id.row_odleglosc);
            holder.obrazek = (ImageView)convertView.findViewById(R.id.row_ikona_mala);
            holder.pole = (LinearLayout)convertView.findViewById(R.id.LinearLayout1);

            // Set the ObiektHolder as the tag, to retrieve it for re-using
            convertView.setTag(holder);

        } else {
            holder = (ObiektHolder) convertView.getTag();
        }

        // Holder is never null here
        holder.title.setText(item.getObiektTitle());

        return convertView;
    }

    private static class SectionHolder {
        TextView    sectionView;
    }

    private static class ObiektHolder {
        TextView        title;
        TextView        odleglosc;
        ImageView       obrazek;
        LinearLayout    pole;
    }
} 
```

注意：已经过测试并且现在可以工作了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T11:18:36.583

[http://www.youtube.com/watch?v=wDBM6wVEO70](http://www.youtube.com/watch?v=wDBM6wVEO70)。与视图持有者讨论列表视图的性能。

[http://developer.android.com/training/improving-layouts/smooth-scrolling.html](http://developer.android.com/training/improving-layouts/smooth-scrolling.html)。查看标题下的链接中的文档 将**视图对象保存在视图支架中**

直接来自文档：

您的代码可能会在 ListView 滚动期间频繁调用 findViewById()，这会降低性能。即使适配器返回一个膨胀的视图进行回收，您仍然需要查找元素并更新它们。重复使用 findViewById() 的一种方法是使用“视图持有者”设计模式。

观察者的例子。

```
 @Override
  public View getView(int position, View convertView, ViewGroup parent) {
  // TODO Auto-generated method stub
   ViewHolder holder;

        if (convertView == null) {
                  convertView = mInflater.inflate(R.layout.list, null);
                  convertView.setLayoutParams(new AbsListView.LayoutParams(LayoutParams.FILL_PARENT,
                          LayoutParams.WRAP_CONTENT));
                  // Creates a ViewHolder and store references to the two children views
                  // we want to bind data to.
                  holder = new ViewHolder();
                  holder.t1=(TextView) convertView.findViewById(R.id.textView1);
                  holder.t2 = (TextView) convertView.findViewById(R.id.textView2);
                  holder.t3 = (TextView) convertView.findViewById(R.id.textView3);

                  convertView.setTag(holder);
              } else {
                  // Get the ViewHolder back to get fast access to the TextView

                  holder = (ViewHolder) convertView.getTag();
              }
              holder.t1.setText("set text")
              holder.t2.setText("set text2");
              holder.t3.setText("set text3");
              return convertView;
  }
}

class ViewHolder
{
  TextView t1,t2,t3;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T11:25:35.863

首先，您必须检查是否`convertView`已经充气。如果它已经充气，您可以回收它，而不必再次充气。这就是您获得性能的地方。

**例子：**

```
public View getView(int position, View convertView, ViewGroup parent) {

    View itemView = null;

    // not inflated
    if (convertView == null) {
        LayoutInflater inflater = (LayoutInflater) parent.getContext()
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        itemView = inflater.inflate(R.layout.list_item_section, null);
    } 
    // already inflated
    else {
        itemView = convertView;
    }

    // get your textview's etc.

    return itemView;
} 
```

# php - GROUPBY 和 ORDERBY 每组只产生 1 个结果？

> ID：15497849
> 
> 赞同：2
> 
> 时间：2013-03-19T11:10:31.600
> 
> 标签：php, mysql, group-by

我正在尝试将我的结果分组并排序，但似乎我每组只得到一个结果，这是为什么呢？我怎样才能得到整个组和那些订购的？

```
$group = "TODO_PRIO";
$get_groups = mysql_query("SELECT * FROM TODOS WHERE TODO_USER LIKE '%,$currentuser,%' 
GROUP BY $group");

while($arrayz = mysql_fetch_array($get_groups)){
echo $arrayz['TODO_PRIO']."</br>";
} 
```

上面的代码输出以下内容，并且只显示每组中的一个。

```
1
2
3
4
5 
```

更多解释：我想将所有结果放入集群中，以便我可以选择将它们放入匹配日期或优先级或参考的集群中，然后我想获得这些集群并按其他方式组织它们。例如，我想按优先级进行集群，然后按日期或参考对每个集群进行排序。

首先，我试图通过从数组中获取所有内容并聚类子数组来做到这一点，这很有效，但是随后每个子数组的排序不起作用，这似乎是一个更好更简单的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:09:37.437

这就是 GROUP BY 所做的。它将多行分组为一行。 [在这里阅读](http://www.w3schools.com/sql/sql_groupby.asp)。你需要订购它

```
SELECT * FROM TODOS WHERE TODO_USER LIKE '%,$currentuser,%' ORDER BY $group ASC 
```

然后你得到类似的东西

```
1
1
1
2
2
3
4
4
[...] 
```

或者你可以在PHP中顺利分组

```
$tmp = array();
while($arrayz = mysql_fetch_array($get_groups)){
    $tmp[$arrayz['TODO_PRIO']][] = $arrayz; //extra [] pushes it in a new subarray
} 
```

这将产生一个易于使用的数组：

```
array(
    1 => array(ToDo1,ToDo4,ToDo2),
    2 => array(ToDo5,ToDo3,ToDo6),
    [...]
) 
```

[foreach](http://php.net/manual/en/control-structures.foreach.php)的示例用法：

```
//itterate over the various ToDo-prioritys
foreach($tmp as $ToDo_Prio => $ToDo_List)
{
    echo "Priority $ToDo_Prio:<br/><ul>";
    //itterate over the various ToDo-elements
    foreach($ToDo_List as $ToDo_Item)
    {
        echo "<li>".$ToDo_Item[<desired column>]."</li>"; //replace <desired column> with your Coumnname you want to display.
    }
    echo "</ul>";
} 
```

请记住，$ToDo_Item 是一个数组，其中包含表中的一行。所以你需要指定一个Columnname。

# awk - 使用 UPS 查找机器的简单 awk 脚本

> ID：15497856
> 
> 赞同：0
> 
> 时间：2013-03-19T11:10:42.680
> 
> 标签：awk

我有一个文件，列出了我们小型网络上所有机器的名称和位置，以及它们是否具有不间断电源 (UPS)。该文件具有格式

```
alpha % in office 1 %
beta  % in office 2 %UPS
gamma % in office 1 % 
delta % in reception %UPS 
```

`awk -F '%' '/UPS/ {print $1, $2}' $HOME/network_file`我可以使用$HOME 是环境变量的命令行轻松地在 awk 单行程序中找到机器名称和位置 。

但是，我想编写一个 awk 脚本来添加一些附加功能。我试过以下

```
#!/usr/bin/awk -f
BEGIN {
FS="%";
OFS=" ";
print "The following computers in the department have UPS \n";
print "Computer\tLocation";
}

{
if (~/UPS/) {print $1,$2;} $HOME/network_file
} 
```

这不起作用，我收到几条错误消息，包括 BEGIN: command not found line 37: print: command not found line 38: print: command not found line 39: syntax error near unexpected token `}'

期望的输出

```
The following computers in the department have UPS
Computer Location
beta in office 2
delta in reception 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T11:17:06.430

脚本应该以

```
#!/usr/bin/awk -f 
```

（那是一个[shebang](https://en.wikipedia.org/wiki/Shebang_%28Unix%29)。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T11:15:02.080

我想你想要

```
#!/usr/bin/awk -f
# script follows
BEGIN .... 
```

在一个*可执行*文件中。文件中的第一行 ( `#!...`) 指示 Unix 使用指定的可执行文件 ( `/usr/bin/awk`) 来运行文件的其余部分（您的`awk`脚本）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T11:54:07.490

摆脱 shebang，只需编写一个在您想要的文件上调用 awk 的 SHELL 脚本：

```
/usr/bin/awk -F'%' '
BEGIN {
   print "The following computers in the department have UPS \n"
   print "Computer\tLocation"
}
/UPS/ {print $1,$2}
' "$HOME/network_file" 
```

如果您在 Solaris 上，请注意 /usr/bin/awk 是旧的、损坏的 awk，您绝对不能使用 - 请改用 /usr/xpg4/bin/awk 或 nawk。

另请注意，我删除了所有空语句（虚假的尾随分号）。

# android - 在AOSP中，ServiceManager在哪里实现

> ID：15497860
> 
> 赞同：7
> 
> 时间：2013-03-19T11:10:55.153
> 
> 标签：android, android-source, android-binder

在`IServiceManager.cpp`文件中，我看到了`BnServiceManager::onTransact`函数定义。

在该函数内部，有一个对“ `addService`”、“ `listServices`”等的调用。

我找不到这些函数的实现（在 IServiceManager 下声明）。

有人可以告诉我，在哪里可以找到 BnServiceManager 的实现。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-20T00:37:08.533

它位于frameworks/base/cmds/servicemanager 下的[service_manager.c中。](https://android.googlesource.com/platform/frameworks/base/+/android-4.2.2_r1/cmds/servicemanager/service_manager.c)

你可能想知道他们是如何找到 servicemanager 的，它是 binder 的一个特性，在 systemserver 启动 servicemanager 后（在 service_manager.c 中调用 main），servicemanager 将自己注册为 binder 的 context_manager `ioctl(bs->fd, BINDER_SET_CONTEXT_MGR, 0);`。然后你总是可以从 binder 获得该服务。

所以当其他服务想使用服务管理器列出、查找或添加服务时，它会`defaultServiceManager`调用`IServiceManager.cpp`. 该方法将查找句柄 0 以获取 BpServiceManager。使用`BpServiceManager->addService`时不会调用`BnServiceManager`，这与CameraService等其他服务略有不同。binder 会直接解析交易代码并`do_add_service`调用`service_manager.c`. 您可能会注意到 BpServiceManager 使用的事务代码与 svcmgr_handler 中的事务代码完全相同。

```
//transaction code used by svcmgr_handler
enum {
    SVC_MGR_GET_SERVICE = 1,
    SVC_MGR_CHECK_SERVICE,
    SVC_MGR_ADD_SERVICE,
    SVC_MGR_LIST_SERVICES,
};

//transaction code used by BpServiceManager.
enum {
        GET_SERVICE_TRANSACTION = IBinder::FIRST_CALL_TRANSACTION, //0x00000001
        CHECK_SERVICE_TRANSACTION,
        ADD_SERVICE_TRANSACTION,
        LIST_SERVICES_TRANSACTION,
    }; 
```

只有servicemanager是这样工作的，其他的BpService会调用他们的BnService，比如CameraService扩展了BnCameraService，所以它是CameraService的实际服务端。BpCameraService 会启动一个 binder 事务，binder 事务最终会被 BnCameraService 处理，也就是 CameraService。

你可以搜索整个AOSP，没有BnServiceManager的实现，所以它是不可能被调用的。

# cassandra - 启用 CQL 二进制协议会引发 YAMLException：无法找到属性 - 在 ubuntu 中安装 DataStax 3.0

> ID：15497863
> 
> 赞同：5
> 
> 时间：2013-03-19T11:11:02.663
> 
> 标签：cassandra, datastax-enterprise

我正在尝试从 C# 客户端连接到安装在虚拟机内运行的 Ubuntu 桌面中的 DataStax 3.0 企业版（由[CassandraSharp](https://github.com/pchalamet/cassandra-sharp/wiki/Having-troubles)提供）。

根据那里的文档，（*“默认情况下，Cassandra 不启用 CQL 二进制协议（从 1.2-rc2 开始）。您必须在 cassandra.yaml 中启用此功能才能使用 cassandra-sharp”*），我介绍了此条目“ start_native_transport: true" 到 cassandra.yaml 中，当我从 Ubuntu 终端启动服务时，出现以下错误：

> INFO 02:57:53,734 从文件加载设置：/etc/dse/cassandra/cassandra.yaml 错误 02:57:55,834 致命配置错误错误无法为标签构造 java 对象：yaml.org,2002:org.apache .cassandra.config.Config；异常=无法为 JavaBean=org.apache.cassandra.config.Config@7f636e4e 创建属性=start_native_transport；无法在类上找到属性“start_native_transport”：org.apache.cassandra.config.Config

知道如何在 DataStax Cassandra 中启用二进制协议吗？还是我做错了什么？它是配置文件中特定的位置吗？我是 linux 新手！此处询问的完整 yaml 文件：

```
# Cassandra storage config YAML 

# The name of the cluster. This is mainly used to prevent machines in
# one logical cluster from joining another.
cluster_name: 'Test Cluster'

initial_token:

hinted_handoff_enabled: true

max_hint_window_in_ms: 3600000 # one hour

hinted_handoff_throttle_delay_in_ms: 1

# authentication backend, implementing IAuthenticator; used to identify users
authenticator: org.apache.cassandra.auth.AllowAllAuthenticator
#authenticator: com.datastax.bdp.cassandra.auth.PasswordAuthenticator
#authenticator: com.datastax.bdp.cassandra.auth.KerberosAuthenticator

# authorization backend, implementing IAuthorizer; used to limit access/provide permissions
authorizer: org.apache.cassandra.auth.AllowAllAuthorizer
#authorizer: com.datastax.bdp.cassandra.auth.CassandraAuthorizer

permissions_validity_in_ms: 2000

# Replication strategy to use for the auth keyspace.
auth_replication_strategy: org.apache.cassandra.locator.SimpleStrategy

# Replication options to use for the auth keyspace.
auth_replication_options:
    replication_factor: 1

# The partitioner is responsible for distributing rows (by key) across
# nodes in the cluster.  Any IPartitioner may be used, including your
# own as long as it is on the classpath.  Out of the box, Cassandra
# provides org.apache.cassandra.dht.RandomPartitioner
# org.apache.cassandra.dht.ByteOrderedPartitioner,
# org.apache.cassandra.dht.OrderPreservingPartitioner (deprecated),
# and org.apache.cassandra.dht.CollatingOrderPreservingPartitioner
# (deprecated).
# 
# - RandomPartitioner distributes rows across the cluster evenly by md5.
#   When in doubt, this is the best option.
# - ByteOrderedPartitioner orders rows lexically by key bytes.  BOP allows
#   scanning rows in key order, but the ordering can generate hot spots
#   for sequential insertion workloads.
# - OrderPreservingPartitioner is an obsolete form of BOP, that stores
# - keys in a less-efficient format and only works with keys that are
#   UTF8-encoded Strings.
# - CollatingOPP colates according to EN,US rules rather than lexical byte
#   ordering.  Use this as an example if you need custom collation.
#
# See http://wiki.apache.org/cassandra/Operations for more on
# partitioners and token selection.
partitioner: org.apache.cassandra.dht.RandomPartitioner

# directories where Cassandra should store data on disk.
data_file_directories:
    - /var/lib/cassandra/data

# commit log
commitlog_directory: /var/lib/cassandra/commitlog

# Maximum size of the key cache in memory.
#
# Each key cache hit saves 1 seek and each row cache hit saves 2 seeks at the
# minimum, sometimes more. The key cache is fairly tiny for the amount of
# time it saves, so it's worthwhile to use it at large numbers.
# The row cache saves even more time, but must store the whole values of
# its rows, so it is extremely space-intensive. It's best to only use the
# row cache if you have hot rows or static rows.
#
# NOTE: if you reduce the size, you may not get you hottest keys loaded on startup.
#
# Default value is empty to make it "auto" (min(5% of Heap (in MB), 100MB)). Set to 0 to disable key cache.
key_cache_size_in_mb:

# Duration in seconds after which Cassandra should
# safe the keys cache. Caches are saved to saved_caches_directory as
# specified in this configuration file.
#
# Saved caches greatly improve cold-start speeds, and is relatively cheap in
# terms of I/O for the key cache. Row cache saving is much more expensive and
# has limited use.
#
# Default is 14400 or 4 hours.
key_cache_save_period: 14400

# Number of keys from the key cache to save
# Disabled by default, meaning all keys are going to be saved
# key_cache_keys_to_save: 100

# Maximum size of the row cache in memory.
# NOTE: if you reduce the size, you may not get you hottest keys loaded on startup.
#
# Default value is 0, to disable row caching.
row_cache_size_in_mb: 0

# Duration in seconds after which Cassandra should
# safe the row cache. Caches are saved to saved_caches_directory as specified
# in this configuration file.
#
# Saved caches greatly improve cold-start speeds, and is relatively cheap in
# terms of I/O for the key cache. Row cache saving is much more expensive and
# has limited use.
#
# Default is 0 to disable saving the row cache.
row_cache_save_period: 0

# Number of keys from the row cache to save
# Disabled by default, meaning all keys are going to be saved
# row_cache_keys_to_save: 100

# The provider for the row cache to use.
#
# Supported values are: ConcurrentLinkedHashCacheProvider, SerializingCacheProvider
#
# SerializingCacheProvider serialises the contents of the row and stores
# it in native memory, i.e., off the JVM Heap. Serialized rows take
# significantly less memory than "live" rows in the JVM, so you can cache
# more rows in a given memory footprint.  And storing the cache off-heap
# means you can use smaller heap sizes, reducing the impact of GC pauses.
#
# It is also valid to specify the fully-qualified class name to a class
# that implements org.apache.cassandra.cache.IRowCacheProvider.
#
# Defaults to SerializingCacheProvider
row_cache_provider: SerializingCacheProvider

# saved caches
saved_caches_directory: /var/lib/cassandra/saved_caches

# commitlog_sync may be either "periodic" or "batch." 
# When in batch mode, Cassandra won't ack writes until the commit log
# has been fsynced to disk.  It will wait up to
# commitlog_sync_batch_window_in_ms milliseconds for other writes, before
# performing the sync.
#
# commitlog_sync: batch
# commitlog_sync_batch_window_in_ms: 50
#
# the other option is "periodic" where writes may be acked immediately
# and the CommitLog is simply synced every commitlog_sync_period_in_ms
# milliseconds.
commitlog_sync: periodic
commitlog_sync_period_in_ms: 10000

# The size of the individual commitlog file segments.  A commitlog
# segment may be archived, deleted, or recycled once all the data
# in it (potentally from each columnfamily in the system) has been 
# flushed to sstables.  
#
# The default size is 32, which is almost always fine, but if you are
# archiving commitlog segments (see commitlog_archiving.properties),
# then you probably want a finer granularity of archiving; 8 or 16 MB
# is reasonable.
commitlog_segment_size_in_mb: 32

# any class that implements the SeedProvider interface and has a
# constructor that takes a Map<String, String> of parameters will do.
seed_provider:
    # Addresses of hosts that are deemed contact points. 
    # Cassandra nodes use this list of hosts to find each other and learn
    # the topology of the ring.  You must change this if you are running
    # multiple nodes!
    - class_name: org.apache.cassandra.locator.SimpleSeedProvider
      parameters:
          # seeds is actually a comma-delimited list of addresses.
          # Ex: "<ip1>,<ip2>,<ip3>"
          - seeds: "127.0.0.1"

# emergency pressure valve: each time heap usage after a full (CMS)
# garbage collection is above this fraction of the max, Cassandra will
# flush the largest memtables.  
#
# Set to 1.0 to disable.  Setting this lower than
# CMSInitiatingOccupancyFraction is not likely to be useful.
#
# RELYING ON THIS AS YOUR PRIMARY TUNING MECHANISM WILL WORK POORLY:
# it is most effective under light to moderate load, or read-heavy
# workloads; under truly massive write load, it will often be too
# little, too late.
flush_largest_memtables_at: 0.75

# emergency pressure valve #2: the first time heap usage after a full
# (CMS) garbage collection is above this fraction of the max,
# Cassandra will reduce cache maximum _capacity_ to the given fraction
# of the current _size_.  Should usually be set substantially above
# flush_largest_memtables_at, since that will have less long-term
# impact on the system.  
# 
# Set to 1.0 to disable.  Setting this lower than
# CMSInitiatingOccupancyFraction is not likely to be useful.
reduce_cache_sizes_at: 0.85
reduce_cache_capacity_to: 0.6

# For workloads with more data than can fit in memory, Cassandra's
# bottleneck will be reads that need to fetch data from
# disk. "concurrent_reads" should be set to (16 * number_of_drives) in
# order to allow the operations to enqueue low enough in the stack
# that the OS and drives can reorder them.
#
# On the other hand, since writes are almost never IO bound, the ideal
# number of "concurrent_writes" is dependent on the number of cores in
# your system; (8 * number_of_cores) is a good rule of thumb.
concurrent_reads: 32
concurrent_writes: 32

# Total memory to use for memtables.  Cassandra will flush the largest
# memtable when this much memory is used.
# If omitted, Cassandra will set it to 1/3 of the heap.
# memtable_total_space_in_mb: 2048

# Total space to use for commitlogs.  Since commitlog segments are
# mmapped, and hence use up address space, the default size is 32
# on 32-bit JVMs, and 1024 on 64-bit JVMs.
#
# If space gets above this value (it will round up to the next nearest
# segment multiple), Cassandra will flush every dirty CF in the oldest
# segment and remove it.  So a small total commitlog space will tend
# to cause more flush activity on less-active columnfamilies.
# commitlog_total_space_in_mb: 4096

# This sets the amount of memtable flush writer threads.  These will
# be blocked by disk io, and each one will hold a memtable in memory
# while blocked. If you have a large heap and many data directories,
# you can increase this value for better flush performance.
# By default this will be set to the amount of data directories defined.
#memtable_flush_writers: 1

# the number of full memtables to allow pending flush, that is,
# waiting for a writer thread.  At a minimum, this should be set to
# the maximum number of secondary indexes created on a single CF.
memtable_flush_queue_size: 4

# Whether to, when doing sequential writing, fsync() at intervals in
# order to force the operating system to flush the dirty
# buffers. Enable this to avoid sudden dirty buffer flushing from
# impacting read latencies. Almost always a good idea on SSD:s; not
# necessarily on platters.
trickle_fsync: false
trickle_fsync_interval_in_kb: 10240

# TCP port, for commands and data
storage_port: 7000

# SSL port, for encrypted communication.  Unused unless enabled in
# encryption_options
ssl_storage_port: 7001

# Address to bind to and tell other Cassandra nodes to connect to. You
# _must_ change this if you want multiple nodes to be able to
# communicate!
# 
# Leaving it blank leaves it up to InetAddress.getLocalHost(). This
# will always do the Right Thing *if* the node is properly configured
# (hostname, name resolution, etc), and the Right Thing is to use the
# address associated with the hostname (it might not be).
#
# Setting this to 0.0.0.0 is always wrong.
#listen_address: localhost -- commented by nachi 19Mar2013
listen_address: 192.168.42.236

# Address to broadcast to other Cassandra nodes
# Leaving this blank will set it to the same value as listen_address
# broadcast_address: 1.2.3.4

# The address to bind the Thrift RPC service to -- clients connect
# here. Unlike ListenAddress above, you *can* specify 0.0.0.0 here if
# you want Thrift to listen on all interfaces.
# 
# Leaving this blank has the same effect it does for ListenAddress,
# (i.e. it will be based on the configured hostname of the node).
#rpc_address: 0.0.0.0 -- commented by nachi on 19Mar2013
rpc_address: 192.168.42.236
# port for Thrift to listen for clients on
rpc_port: 9160

# enable or disable keepalive on rpc connections
rpc_keepalive: true

# Cassandra provides three options for the RPC Server:
#
# sync  -> One connection per thread in the rpc pool (see below).
#          For a very large number of clients, memory will be your limiting
#          factor; on a 64 bit JVM, 128KB is the minimum stack size per thread.
#          Connection pooling is very, very strongly recommended.
#
# async -> Nonblocking server implementation with one thread to serve 
#          rpc connections.  This is not recommended for high throughput use
#          cases. Async has been tested to be about 50% slower than sync
#          or hsha and is deprecated: it will be removed in the next major release.
#
# hsha  -> Stands for "half synchronous, half asynchronous." The rpc thread pool 
#          (see below) is used to manage requests, but the threads are multiplexed
#          across the different clients.
#
# The default is sync because on Windows hsha is about 30% slower.  On Linux,
# sync/hsha performance is about the same, with hsha of course using less memory.
rpc_server_type: sync

# Uncomment rpc_min|max|thread to set request pool size.
# You would primarily set max for the sync server to safeguard against
# misbehaved clients; if you do hit the max, Cassandra will block until one
# disconnects before accepting more.  The defaults for sync are min of 16 and max
# unlimited.
# 
# For the Hsha server, the min and max both default to quadruple the number of
# CPU cores.
#
# This configuration is ignored by the async server.
#
# rpc_min_threads: 16
# rpc_max_threads: 2048

# uncomment to set socket buffer sizes on rpc connections
# rpc_send_buff_size_in_bytes:
# rpc_recv_buff_size_in_bytes:

# Frame size for thrift (maximum field length).
# 0 disables TFramedTransport in favor of TSocket. This option
# is deprecated; we strongly recommend using Framed mode.
thrift_framed_transport_size_in_mb: 15
start_native_transport: true
# added by nac to enable binary protocol that suppofrts async stuff

# The max length of a thrift message, including all fields and
# internal thrift overhead.
thrift_max_message_length_in_mb: 16

# Set to true to have Cassandra create a hard link to each sstable
# flushed or streamed locally in a backups/ subdirectory of the
# Keyspace data.  Removing these links is the operator's
# responsibility.
incremental_backups: false

# Whether or not to take a snapshot before each compaction.  Be
# careful using this option, since Cassandra won't clean up the
# snapshots for you.  Mostly useful if you're paranoid when there
# is a data format change.
snapshot_before_compaction: false

# Whether or not a snapshot is taken of the data before keyspace truncation
# or dropping of column families. The STRONGLY advised default of true 
# should be used to provide data safety. If you set this flag to false, you will
# lose data on truncation or drop.
auto_snapshot: true

# Add column indexes to a row after its contents reach this size.
# Increase if your column values are large, or if you have a very large
# number of columns.  The competing causes are, Cassandra has to
# deserialize this much of the row to read a single column, so you want
# it to be small - at least if you do many partial-row reads - but all
# the index data is read for each access, so you don't want to generate
# that wastefully either.
column_index_size_in_kb: 64

# Size limit for rows being compacted in memory.  Larger rows will spill
# over to disk and use a slower two-pass compaction process.  A message
# will be logged specifying the row key.
in_memory_compaction_limit_in_mb: 64

# Number of simultaneous compactions to allow, NOT including
# validation "compactions" for anti-entropy repair.  Simultaneous
# compactions can help preserve read performance in a mixed read/write
# workload, by mitigating the tendency of small sstables to accumulate
# during a single long running compactions. The default is usually
# fine and if you experience problems with compaction running too
# slowly or too fast, you should look at
# compaction_throughput_mb_per_sec first.
#
# This setting has no effect on LeveledCompactionStrategy.
#
# concurrent_compactors defaults to the number of cores.
# Uncomment to make compaction mono-threaded, the pre-0.8 default.
#concurrent_compactors: 1

# Multi-threaded compaction. When enabled, each compaction will use
# up to one thread per core, plus one thread per sstable being merged.
# This is usually only useful for SSD-based hardware: otherwise, 
# your concern is usually to get compaction to do LESS i/o (see:
# compaction_throughput_mb_per_sec), not more.
multithreaded_compaction: false

# Throttles compaction to the given total throughput across the entire
# system. The faster you insert data, the faster you need to compact in
# order to keep the sstable count down, but in general, setting this to
# 16 to 32 times the rate you are inserting data is more than sufficient.
# Setting this to 0 disables throttling. Note that this account for all types
# of compaction, including validation compaction.
compaction_throughput_mb_per_sec: 16

# Track cached row keys during compaction, and re-cache their new
# positions in the compacted sstable.  Disable if you use really large
# key caches.
compaction_preheat_key_cache: true

# Throttles all outbound streaming file transfers on this node to the
# given total throughput in Mbps. This is necessary because Cassandra does
# mostly sequential IO when streaming data during bootstrap or repair, which
# can lead to saturating the network connection and degrading rpc performance.
# When unset, the default is 400 Mbps or 50 MB/s.
# stream_throughput_outbound_megabits_per_sec: 400

# Time to wait for a reply from other nodes before failing the command 
rpc_timeout_in_ms: 10000

# Enable socket timeout for streaming operation.
# When a timeout occurs during streaming, streaming is retried from the start
# of the current file. This *can* involve re-streaming an important amount of
# data, so you should avoid setting the value too low.
# Default value is 0, which never timeout streams.
# streaming_socket_timeout_in_ms: 0

# phi value that must be reached for a host to be marked down.
# most users should never need to adjust this.
# phi_convict_threshold: 8

# endpoint_snitch -- Set this to a class that implements
# IEndpointSnitch.  The snitch has two functions:
# - it teaches Cassandra enough about your network topology to route
#   requests efficiently
# - it allows Cassandra to spread replicas around your cluster to avoid
#   correlated failures. It does this by grouping machines into
#   "datacenters" and "racks."  Cassandra will do its best not to have
#   more than one replica on the same "rack" (which may not actually
#   be a physical location)
#
# IF YOU CHANGE THE SNITCH AFTER DATA IS INSERTED INTO THE CLUSTER,
# YOU MUST RUN A FULL REPAIR, SINCE THE SNITCH AFFECTS WHERE REPLICAS
# ARE PLACED.
#
# Out of the box, Cassandra provides
#  - SimpleSnitch:
#    Treats Strategy order as proximity. This improves cache locality
#    when disabling read repair, which can further improve throughput.
#    Only appropriate for single-datacenter deployments.
#  - PropertyFileSnitch:
#    Proximity is determined by rack and data center, which are
#    explicitly configured in cassandra-topology.properties.
#  - GossipingPropertyFileSnitch
#    The rack and datacenter for the local node are defined in
#    cassandra-rackdc.properties and propagated to other nodes via gossip.  If
#    cassandra-topology.properties exists, it is used as a fallback, allowing
#    migration from the PropertyFileSnitch.
#  - RackInferringSnitch:
#    Proximity is determined by rack and data center, which are
#    assumed to correspond to the 3rd and 2nd octet of each node's
#    IP address, respectively.  Unless this happens to match your
#    deployment conventions (as it did Facebook's), this is best used
#    as an example of writing a custom Snitch class.
#  - Ec2Snitch:
#    Appropriate for EC2 deployments in a single Region.  Loads Region
#    and Availability Zone information from the EC2 API. The Region is
#    treated as the Datacenter, and the Availability Zone as the rack.
#    Only private IPs are used, so this will not work across multiple
#    Regions.
#  - Ec2MultiRegionSnitch:
#    Uses public IPs as broadcast_address to allow cross-region
#    connectivity.  (Thus, you should set seed addresses to the public
#    IP as well.) You will need to open the storage_port or
#    ssl_storage_port on the public IP firewall.  (For intra-Region
#    traffic, Cassandra will switch to the private IP after
#    establishing a connection.)
# DataStax Enterprise provides
#  - com.datastax.bdp.snitch.DseDelegateSnitch:
#    Proximity is determined by the settings in dse.yaml:delegated_snitch to
#    allow DSE to add location aware functionality. This is required for DSE.
#
# You can use a custom Snitch by setting this to the full class name
# of the snitch, which will be assumed to be on your classpath.
endpoint_snitch: com.datastax.bdp.snitch.DseDelegateSnitch

# controls how often to perform the more expensive part of host score
# calculation
dynamic_snitch_update_interval_in_ms: 100 
# controls how often to reset all host scores, allowing a bad host to
# possibly recover
dynamic_snitch_reset_interval_in_ms: 600000
# if set greater than zero and read_repair_chance is < 1.0, this will allow
# 'pinning' of replicas to hosts in order to increase cache capacity.
# The badness threshold will control how much worse the pinned host has to be
# before the dynamic snitch will prefer other replicas over it.  This is
# expressed as a double which represents a percentage.  Thus, a value of
# 0.2 means Cassandra would continue to prefer the static snitch values
# until the pinned host was 20% worse than the fastest.
dynamic_snitch_badness_threshold: 0.1

# request_scheduler -- Set this to a class that implements
# RequestScheduler, which will schedule incoming client requests
# according to the specific policy. This is useful for multi-tenancy
# with a single Cassandra cluster.
# NOTE: This is specifically for requests from the client and does
# not affect inter node communication.
# org.apache.cassandra.scheduler.NoScheduler - No scheduling takes place
# org.apache.cassandra.scheduler.RoundRobinScheduler - Round robin of
# client requests to a node with a separate queue for each
# request_scheduler_id. The scheduler is further customized by
# request_scheduler_options as described below.
request_scheduler: org.apache.cassandra.scheduler.NoScheduler

# Scheduler Options vary based on the type of scheduler
# NoScheduler - Has no options
# RoundRobin
#  - throttle_limit -- The throttle_limit is the number of in-flight
#                      requests per client.  Requests beyond 
#                      that limit are queued up until
#                      running requests can complete.
#                      The value of 80 here is twice the number of
#                      concurrent_reads + concurrent_writes.
#  - default_weight -- default_weight is optional and allows for
#                      overriding the default which is 1.
#  - weights -- Weights are optional and will default to 1 or the
#               overridden default_weight. The weight translates into how
#               many requests are handled during each turn of the
#               RoundRobin, based on the scheduler id.
#
# request_scheduler_options:
#    throttle_limit: 80
#    default_weight: 5
#    weights:
#      Keyspace1: 1
#      Keyspace2: 5

# request_scheduler_id -- An identifer based on which to perform
# the request scheduling. Currently the only valid option is keyspace.
# request_scheduler_id: keyspace

# index_interval controls the sampling of entries from the primrary
# row index in terms of space versus time.  The larger the interval,
# the smaller and less effective the sampling will be.  In technicial
# terms, the interval coresponds to the number of index entries that
# are skipped between taking each sample.  All the sampled entries
# must fit in memory.  Generally, a value between 128 and 512 here
# coupled with a large key cache size on CFs results in the best trade
# offs.  This value is not often changed, however if you have many
# very small rows (many to an OS page), then increasing this will
# often lower memory usage without a impact on performance.
index_interval: 128

# Enable or disable inter-node encryption
# Default settings are TLS v1, RSA 1024-bit keys (it is imperative that
# users generate their own keys) TLS_RSA_WITH_AES_128_CBC_SHA as the cipher
# suite for authentication, key exchange and encryption of the actual data transfers.
# NOTE: No custom encryption options are enabled at the moment
# The available internode options are : all, none, dc, rack
#
# If set to dc cassandra will encrypt the traffic between the DCs
# If set to rack cassandra will encrypt the traffic between the racks
#
# The passwords used in these options must match the passwords used when generating
# the keystore and truststore.  For instructions on generating these files, see:
# http://download.oracle.com/javase/6/docs/technotes/guides/security/jsse/JSSERefGuide.html#CreateKeystore
#
encryption_options:
    internode_encryption: none
    keystore: resources/dse/conf/.keystore
    keystore_password: tomcat
    truststore: resources/dse/conf/.truststore
    truststore_password: tomcat
    # More advanced defaults below:
    # protocol: TLS
    # algorithm: SunX509
    # store_type: JKS
    # cipher_suites: [TLS_RSA_WITH_AES_128_CBC_SHA,TLS_RSA_WITH_AES_256_CBC_SHA]
    # require_client_auth: false  [1]: https://github.com/pchalamet/cassandra-sharp/wiki/Having-troubles 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-26T00:31:55.417

Lyuben 是正确的，您在 Cassandra 1.1.9.3 上设置了 Cassandra 1.2+ 属性。

[http://www.datastax.com/doc-source/pdf/dse30.pdf](http://www.datastax.com/doc-source/pdf/dse30.pdf) - 请参阅“组件”部分。

您尝试设置“start_native_transport”的属性仅在 Cassandra 1.2+ 中可用。如果有帮助，最新的 Datastax 社区版包括 Cassandra 1.2.3。

我怎么知道？我猜您还尝试使用新的 Datastax CQL3 驱动程序（[https://github.com/datastax/java-driver/tree/master/driver-core](https://github.com/datastax/java-driver/tree/master/driver-core)），请参阅先决条件，Cassandra 1.2。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-23T15:25:18.160

我认为您正在运行的 Cassandra 版本与您想要实现的配置不匹配。该选项已在 cassandra 1.2.x 中删除（您可以在[cassandra 1.1.x](http://www.datastax.com/docs/1.1/configuration/node_configuration#cassandra-yaml)但[不是 1.2.x](http://www.datastax.com/docs/1.2/configuration/node_configuration#cassandra-yaml)`hinted_handoff_throttle_delay_in_ms`的 datastax 文档中找到该选项。

如果您正在运行较早版本的 cassandra，默认情况下会启用 CQL（但您根据问题评论知道这一点），但是您的配置中的某些设置是较旧版本的 cassandra。

此外，另一个潜在的问题是你错过了`native_transport_port`虽然我在 Datastax 社区 3.0 上测试[了这个](https://gist.github.com/lyubent/5228059)配置，特别是 cassandra v1.2.2 服务器运行愉快：

```
 INFO 15:15:17,242 Cassandra version: 1.2.2
 INFO 15:15:17,243 Thrift API version: 19.35.0
 INFO 15:15:17,243 CQL supported versions: 2.0.0,3.0.1 (default: 3.0.1)
 INFO 15:15:17,264 Loading persisted ring state
 INFO 15:15:17,266 Starting up server gossip
 ...
 INFO 15:15:17,661 Node /127.0.0.1 state jump to normal
 INFO 15:15:17,665 Startup completed! Now serving reads.
 INFO 15:15:17,709 Starting listening for CQL clients on /0.0.0.0:9042...
 INFO 15:15:17,721 Binding thrift service to /0.0.0.0:9160
 INFO 15:15:17,739 Using TFramedTransport with a max frame size of 15728640 bytes.
 INFO 15:15:17,745 Using synchronous/threadpool thrift server on 0.0.0.0 : 9160
 INFO 15:15:17,746 Listening for thrift clients... 
```

# jquery - 在 div 中导入的下拉菜单（使用 jquery .load）不起作用，为什么？

> ID：15497864
> 
> 赞同：0
> 
> 时间：2013-03-19T11:11:03.813
> 
> 标签：jquery, select, drop-down-menu, load

我正在使用`.load()`jquery 函数在`div`. 在导入的文档中有一个带有`<select>`标签的表单。出现菜单栏，但如果我单击它，则不会出现下拉菜单。

如果我使用（容器外）的`<select>`OUT `div`，下拉菜单启动良好。

我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:18:35.187

当您动态加载内容时，单击功能不起作用，因为下拉菜单在 DOM 就绪时首先不存在。

尝试改变你的

```
.click(function() {} 
```

至

```
.on('click', function() {} 
```

应该管用。

# http - 有没有办法分配特定的 Heroku dyno 来处理对特定 URL 的请求？

> ID：15497866
> 
> 赞同：3
> 
> 时间：2013-03-19T11:11:05.313
> 
> 标签：http, heroku, concurrency

在我的应用程序中，我有一个 URL，我在该 URL 上接收来自 3rd 方服务器的 POST HTTP 请求。我希望只有 1 个测功机来处理它以简化同步。

有没有办法在 Heroku 中将单个测功机分配给特定的 URL？

我的设置：Heroku（竹栈），10 dynos，Ruby on Rails 3.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T03:43:39.280

您不应该以需要某种类型的请求总是命中同一个测功机的方式来构建您的应用程序。与其在临时存储（即文件系统或一个 dyn0 的内存）中构建状态，不如将其存储在一个安全的地方，所有运行您的应用程序的 dyno 都可以访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T12:21:50.287

当您发布到您的应用程序时，将从您的网络测功机中随机选择一个测功机。您无法选择将选择哪个正在运行的测功机。为什么要选择特定的测功机？如果你这样做，感觉你可能难以扩展和处理失败？

# iphone - 准备 segue 不兼容的指针

> ID：15497870
> 
> 赞同：0
> 
> 时间：2013-03-19T11:11:26.403
> 
> 标签：iphone, ios6, nsmutablearray, uistoryboardsegue

我正在使用带有 TableView 和 plist 文件的情节提要，使用以下来源：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

    if ([@"detailList" isEqual:segue.identifier]) {

        NSIndexPath *index = [self.tableView indexPathForCell:sender];
        DetailViewController *detail = [_saved objectAtIndex:index.row];
        [[segue destinationViewController] setSaved:detail];
    }
} 
```

并且工作，如果我点击一张桌子，segue会向我显示正确的内容，但在一行：

```
[[segue destinationViewController] setSaved:detail]; 
```

**我有警报说：**

> 不兼容的指针类型将“DetailViewController *__strong”发送到“NSMutableArray *”类型的参数

我必须做些什么来修复和删除此警报？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:51:00.863

您正在将可变对象（从`NSMutableArray`）发送到不可变对象（`NSDictionary`）

```
@property (nonatomic, strong) NSDictionary *saved; 
```

这里`NSDictionary`是不可变的，你正在从`NSMutableArray`（它的可变）发送对象。

所以只需制作可变字典

```
@property (nonatomic, strong) NSMutableDictionary *saved; 
```

# vb.net - 读取和写入文本文件

> ID：15497875
> 
> 赞同：0
> 
> 时间：2013-03-19T11:11:47.270
> 
> 标签：vb.net

我需要将两个玩家的分数存储在一个文本文件中。然后我需要模拟掷骰子，对掷骰子的结果进行计算，并在文本文件中修改玩家的分数。到目前为止，要创建文本文件，我有下面的代码。任何有关如何在掷骰子后更新分数的帮助将不胜感激。

```
Public Class Form1

    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        Dim filepath As String = "H:\SomeFileName.txt"
        If Not System.IO.File.Exists(filepath) Then
            System.IO.File.Create(filepath).Dispose()
        End If

        Dim ObjFso
        Dim StrFileName
        Dim ObjFile
        StrFileName = "H:\SomeFileName.txt"
        ObjFso = CreateObject("Scripting.FileSystemObject")
        'Creating a file for writing data
        ObjFile = ObjFso.CreateTextFile(StrFileName)
        'Writing a string into the file
        ObjFile.WriteLine("Player 1")
        ObjFile.WriteLine("Player 2.")
        'Closing the file
        ObjFile.Close()

    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:19:25.983

这是写入文件的 VBA 方式，在 VB.NET 中使用[StreamWriter](http://msdn.microsoft.com/en-us/library/system.io.streamwriter.aspx)对象（您已将此问题标记为 VB.NET，对吗？）

```
 Dim filepath As String = "H:\SomeFileName.txt"
    Using sw = new StreamWriter(filepath , false)
       sw.WriteLine("Player 1")
       sw.WriteLine("Player 2.")
    End Using 
```

StreamWriter 如果文件不存在则创建文件，并根据最后一个`Append`标志覆盖或附加到文件内的内容

# mysql - Mysql：从具有多个值的查询结果中设置用户变量

> ID：15497877
> 
> 赞同：1
> 
> 时间：2013-03-19T11:11:59.303
> 
> 标签：mysql, sql, variables

继以下已回答 [MySQL 的问题之后：从查询结果中设置用户变量](https://stackoverflow.com/questions/3888735/mysql-set-user-variable-from-result-of-query)

我需要将逗号分隔值的数组存储到从查询返回的变量中。例如

```
SET @qids := (select distinct GROUP_CONCAT(question.id, '')
from questions 
where chapter_id in(100,101,102);

select * 
from answers 
where question_id in (@qids); 
```

这行得通，但他的问题是`@qids`变量只有一个`question_id`值，而不是许多`question_id`格式，如`60,61,62`

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:15:57.070

不需要那个变量，你可以这样做，通过[`JOIN`](http://en.wikipedia.org/wiki/Join_%28SQL%29)ing 两个表`questions`直接`answers`像这样：

```
SELECT *
from questions AS Q
INNER JOIN answers AS a ON q.question_id = a.question_id
where q.chapter_id in(100, 101, 102); 
```

[**SQL 小提琴演示**](http://www.sqlfiddle.com/#!2/51d76f/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T10:00:13.157

终于用下面的方式让它工作了

select * from answers where find_in_set (question_id,@qids);

# joomla2.5 - Joomla 2.5 JText::_() 不解析组件名称

> ID：15497881
> 
> 赞同：1
> 
> 时间：2013-03-19T11:12:05.507
> 
> 标签：joomla2.5

我正在编写一个自定义自定义组件，我正在尝试获取组件列表这是我的模型函数

```
function getComponents()
{
    // Initialise variable
    $db     = JFactory::getDbo();   
    $query  = $db->getQuery(true);

    // Get components with permissions      
    $query->select('name AS value, title AS text, level AS level, rules AS rules')
        ->from('#__assets')
        ->where('level > 0')
        ->where('rules !='.$db->Quote('{}'))
        ->order('value');

    $options = $db->setQuery($query)->loadObjectList();

    $levels=array();
    if (count($options)) {
        foreach ($options as &$option) {
            // Translate component name
            $option->rules = array_keys(get_object_vars( json_decode($option->rules) ));
            $option->text = JText::_($option->text);
            $levels[$option->level][] = $option;
        }

        // Sort by component name
        $lang = JFactory::getLanguage();
        JArrayHelper::sortObjects($options, 'text', 1, true, $lang->getLocale());
    }

    return $levels;
} 
```

我的问题是`JText::_($option->text);`只翻译我的组件名称，而其他组件保持不变。我的方法有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:17:17.250

`JText`将仅在当前组件的语言文件中查找翻译。

有关解决方法，请查看[Loading_extra_language_files](http://docs.joomla.org/Loading_extra_language_files)的文档，您可以使用类似

```
$lang = JFactory::getLanguage();
$extension = 'com_helloworld';
$base_dir = JPATH_SITE;
$language_tag = 'en-GB';
$reload = true;
$lang->load($extension, $base_dir, $language_tag, $reload); 
```

您需要为要翻译的所有组件加载语言文件。然后`JText`应该正确翻译

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:50:31.267

我对 joomla 代码做了一些研究，正是`com_installer`为了了解 joomla 如何做我想要的。 `Marko D`是对的，但答案是“不完整的”，所以如果你想翻译所有组件的名称，这里有完整的片段:)

```
$extension = 'com_helloworld';
$lang = JFactory::getLanguage();
$source = JPATH_ADMINISTRATOR . '/components/' . $extension;
$lang->load("$extension.sys", JPATH_ADMINISTRATOR, null, false, false)
  ||    $lang->load("$extension.sys", $source, null, false, false)
  ||    $lang->load("$extension.sys", JPATH_ADMINISTRATOR, $lang->getDefault(), false, false)
  ||    $lang->load("$extension.sys", $source, $lang->getDefault(), false, false);

$componentName = JText::_($option->text); 
```

我希望它有帮助，干杯。

# php - PHP在foreach中获取类var

> ID：15497882
> 
> 赞同：0
> 
> 时间：2013-03-19T11:12:06.823
> 
> 标签：php, class, foreach

我正在尝试从类中的公共函数中检索值到`foreach`.

`$class->function()`正在传递一个数组，我想扫描每个值。

```
 foreach($class->function() as $key => $index) {
     $class->function()[$key]; 
```

奇怪的是，这段代码`localhost`运行正常，但在我的服务器上在线给出了这个错误：

> 解析错误：语法错误，意外 '['，期待 ',' 或 ';'

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T11:13:32.360

将函数的结果分配给某个变量：

```
$result = $class->function();
foreach($result as $key => $index) {
    echo $result[$key];
} 
```

但是`$result[$key]`等于`$index`FYI；

这种直接来自函数调用的访问值从`PHP 5.4`.

# android - Android：带有附加子视图的捏缩放 ImageView

> ID：15497884
> 
> 赞同：0
> 
> 时间：2013-03-19T11:12:09.713
> 
> 标签：android, drag-and-drop, android-webview, marker, pinchzoom

我正在开发一个 Android 平板电脑应用程序，我有一个可以缩放的蓝图。从侧面菜单中，我可以将小符号拖到可缩放的图像中，以后可以单击和修改。把它想象成地图上的标记。

对于缩放部分，到目前为止我使用的是 WebView。这是我处理此功能的代码：

```
public void handlePinchZooming() {
    WebView webView = (WebView) findViewById(R.id.blueprintWebView);
    webView.setInitialScale(50);
    webView.getSettings().setBuiltInZoomControls(true);
    WebSettings settings = webView.getSettings();
    settings.setUseWideViewPort(true);
    settings.setLoadWithOverviewMode(true);
    webView.loadUrl("file:///android_asset/blueprint_example.jpg");
} 
```

为了将标记拖到图像中并将它们添加为子项，我使用以下代码：

```
private void handleDragDrop() {
    findViewById(R.id.markerButton01).setOnTouchListener(new DragDropTouchListener());
    findViewById(R.id.markerButton02).setOnTouchListener(new DragDropTouchListener());
    findViewById(R.id.markerButton03).setOnTouchListener(new DragDropTouchListener());
    findViewById(R.id.blueprintWebView).setOnDragListener(new DragDropDragListener());
}

private final class DragDropTouchListener implements View.OnTouchListener {
    public boolean onTouch(View view, MotionEvent motionEvent) {
        view.setAlpha(100);
        if (motionEvent.getAction() == MotionEvent.ACTION_DOWN) {
            view.getLayoutParams().width = 50;
            view.getLayoutParams().height = 50;
            ClipData data = ClipData.newPlainText("", "");
            View.DragShadowBuilder shadowBuilder = new View.DragShadowBuilder(view);
            view.startDrag(data, shadowBuilder, view, 0);
            view.setVisibility(View.INVISIBLE);
            return true;
        } else {
            return false;
        }
    }
}

class DragDropDragListener implements View.OnDragListener {
    Drawable enterShape = getResources().getDrawable(R.drawable.blueprint_example);
    Drawable normalShape = getResources().getDrawable(R.drawable.blueprint_example);

    @Override
    public boolean onDrag(View v, DragEvent event) {
        int action = event.getAction();
        switch (event.getAction()) {
            case DragEvent.ACTION_DRAG_STARTED:
                // Do nothing
                break;
            case DragEvent.ACTION_DRAG_ENTERED:
                v.setBackgroundDrawable(enterShape);
                break;
            case DragEvent.ACTION_DRAG_EXITED:
                v.setBackgroundDrawable(normalShape);
                break;
            case DragEvent.ACTION_DROP:
                // Dropped, reassign View to ViewGroup
                View view = (View) event.getLocalState();
                ViewGroup owner = (ViewGroup) view.getParent();
                owner.removeView(view);
                WebView container = (WebView) v;
                container.addView(view);
                view.setX(event.getX()-25);
                view.setY(event.getY()-25);
                view.setVisibility(View.VISIBLE);
                setMarkerOnClickListener(view);
                break;
            case DragEvent.ACTION_DRAG_ENDED:
                v.setBackgroundDrawable(normalShape);
            default:
                break;
        }
        return true;
    }
} 
```

现在，当我四处滑动蓝图图像时，标记会随之移动，但一旦我放大或缩小，标记之间的绝对距离始终保持相同，这使得它们远离蓝图上所需的位置。

我不确定您是否需要这个，但这是我的布局的 XML 文件的一部分：

```
<LinearLayout
        android:orientation="horizontal"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" android:gravity="center|right">

    <WebView
            android:layout_width="800dp"
            android:layout_height="600dp"
            android:id="@+id/blueprintWebView"
            android:layout_gravity="center" android:layout_margin="100dp"/>
    <LinearLayout
            android:orientation="vertical"
            android:layout_width="150dp"
            android:layout_height="fill_parent" android:layout_gravity="right" android:layout_marginRight="80dp"
            android:gravity="center_vertical|right" android:baselineAligned="false">
        <RelativeLayout
                android:layout_width="fill_parent"
                android:layout_height="150dp">
            <ImageView
                    android:layout_width="fill_parent"
                    android:layout_height="150dp"
                    android:id="@+id/imageButton01" android:src="@drawable/icon_printer"
                    android:adjustViewBounds="false"
                    android:longClickable="false"
                    android:cropToPadding="false" android:scaleType="fitCenter" android:layout_marginTop="20dp"
                    android:layout_marginBottom="20dp"/>
            <ImageView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:id="@+id/markerButton01" android:src="@drawable/icon_marker_pink"
                    android:scaleType="fitCenter" android:cropToPadding="false" android:visibility="visible"
                    android:focusableInTouchMode="false" android:alpha="0" android:adjustViewBounds="false"/>
        </RelativeLayout>
        <RelativeLayout
                android:layout_width="fill_parent"
                android:layout_height="150dp">
            <ImageView
                    android:layout_width="fill_parent"
                    android:layout_height="150dp"
                    android:id="@+id/imageButton02" android:src="@drawable/icon_printer"
                    android:scaleType="fitCenter" android:layout_marginTop="20dp" android:layout_marginBottom="20dp"/>
            <ImageView
                    android:layout_width="wrap_content" android:layout_height="wrap_content"
                    android:id="@+id/markerButton02" android:src="@drawable/icon_marker_pink"
                    android:scaleType="fitCenter" android:cropToPadding="false" android:visibility="visible"
                    android:focusableInTouchMode="false" android:alpha="0" android:adjustViewBounds="false"
                    android:baselineAlignBottom="false"/>
        </RelativeLayout>
        <RelativeLayout
                android:layout_width="fill_parent"
                android:layout_height="150dp">
            <ImageView
                    android:layout_width="fill_parent"
                    android:layout_height="150dp"
                    android:id="@+id/imageButton03" android:src="@drawable/icon_printer" android:cropToPadding="false"
                    android:scaleType="fitCenter" android:layout_marginBottom="20dp" android:layout_marginTop="20dp"/>
            <ImageView android:layout_width="wrap_content" android:layout_height="wrap_content"
                         android:id="@+id/markerButton03" android:src="@drawable/icon_marker_pink"
                         android:scaleType="fitCenter" android:cropToPadding="false" android:visibility="visible"
                         android:focusableInTouchMode="false" android:alpha="0" android:adjustViewBounds="false"
                         android:baselineAlignBottom="false" android:focusable="false"/>
        </RelativeLayout>
    </LinearLayout>
</LinearLayout> 
```

感谢您为解决这个小问题提供的所有帮助。:)

问候，

*指关节*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T22:45:59.967

您可能需要自己重新计算捏合位置。我不知道 webview 是否允许您获取有关其缩放状态等的信息。也许您会想要切换到此方法，让您完全控制缩放过程： [Android Image View Pinch Zoom](https://stackoverflow.com/questions/10630373/android-image-view-pinch-zooming)

另一种方法可能是使用 javascript 在 webview 中显示标记。但这仅适用于您从事 Web 开发的情况。

# asp.net-mvc-3 - 在mvc 3中使用unity框架实例化依赖注入的实现类

> ID：15497886
> 
> 赞同：1
> 
> 时间：2013-03-19T11:12:27.403
> 
> 标签：asp.net-mvc-3, dependency-injection, inversion-of-control, unity-container, ioc-container

我有一个登录控制器，它接受用户实例，并在登录方法中正确调用验证用户，但如果我以类似方式包含构造函数，则问题出现在 UserManager

```
 public LoginController(IUser user)
    {
        this.user = user;
    }
    [httpPost]
    public ActionResult Login(UserLogin model)
    {
        if (ModelState.IsValid)
        {
           // var userMgr = new UserManager();

            if (user.ValidateUser(model.UserName, model.Password))
            {

                  return RedirectToAction("Index", "Home");

            }
            else
            {
                ModelState.AddModelError("", "The user name or password provided is        incorrect.");
            }
            // return View("UserLogin");
        } 
```

以下是问题出现的地方

```
 public class UserManager : IUser 
 {

     IUser _user;

    public UserManager(IUser user)
   {
      _user=user;
   }

   public void displayUser()
   {
      //.......
     //.....    

   }

  public void somefunction()
 {
    _user.displayUser();
 } 
```

}

我使用 UserManager() 构造函数的原因是因为我想使用 _user.displayUser()

我在 global.aspx 中进行了如下配置

```
 protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        RegisterGlobalFilters(GlobalFilters.Filters);
        RegisterRoutes(RouteTable.Routes);
        var container = Container.InitContainer();

        DependencyResolver.SetResolver(new UnityDependencyResolver(container));
     } 
```

和 Container.InitContainer() 调用以下类

```
 public static class Container
       {
         public static IUnityContainer InitContainer()
         {

            var container = new UnityContainer();
          // Register the relevant types for the         

          // container here through classes or configuration    

          //container.RegisterType<IUser, UserManager>(new                         ContainerControlledLifetimeManager());

        container.RegisterType<IUser, UserManager>(new ContainerControlledLifetimeManager());

        return container;

    } 
```

我有 UnityDepdendency 解析器类，如下所示

```
 public class UnityDependencyResolver : IDependencyResolver
   {
        private IUnityContainer _container;

      #region Ctor

      public UnityDependencyResolver(IUnityContainer container)
      {

          _container = container;

      }

    #endregion

    public object GetService(Type serviceType)
    {
        try
        {

            return _container.Resolve(serviceType);

        }

        catch (Exception ex)
        {

            return null;

        }
    }

    public IEnumerable<object> GetServices(Type serviceType)
    {
        try
        {

            return _container.ResolveAll(serviceType);

        }

        catch (Exception ex)
        {

            return new List<object>();

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:57:49.903

我们可以用`this.displayUser();`

`UserManager userobj=new UserManager()` 不需要

# android - 如何在带有硬编码凭据的 Android 项目中使用 Google Drive SDK

> ID：15497888
> 
> 赞同：2
> 
> 时间：2013-03-19T11:12:31.007
> 
> 标签：android, google-drive-api

如何将凭据硬编码到我的 Google 云端硬盘服务，以便应用程序的用户始终可以在没有身份验证的情况下访问我的文件？

我找到了使用 Java SKD 的解决方案，但这些库不适用于 Android：[https ://developers.google.com/drive/service-accounts#use_service_accounts_as_application-owned_accounts](https://developers.google.com/drive/service-accounts#use_service_accounts_as_application-owned_accounts)

有没有成功尝试类似任务的例子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T17:47:06.120

好的，我找到了解决问题的方法。

当然，我的应用程序是 Android 应用程序，我不想让用户登录/使用任何凭据连接到我的云端硬盘，最后我可以使用默认的云端硬盘网络应用程序操作文件。

1.  需要采取措施：创建*服务帐户*，如[本](https://developers.google.com/drive/service-accounts#google_apis_console_project_service_accounts) 例所示。
2.  下载私钥*API 访问站点*并将其放在例如。在资产文件夹中。
3.  下载并导入这些库：
    *   google-api-client-1.13.2-beta.jar
    *   google-api-client-android-1.13.2-beta.jar
    *   google-api-services-drive-v2-rev60-1.13.2-beta.jar
    *   google-http-client-1.13.1-beta.jar
    *   google-http-client-android-1.13.1-beta.jar
    *   google-http-client-gson-1.13.1-beta.jar
    *   google-http-client-jackson2-1.13.1-beta.jar
    *   google-oauth-client-1.13.1-beta.jar
    *   gson-2.1.jar
    *   番石榴-jdk5-13.0.jar
    *   杰克逊核心2.0.5.jar
    *   jsr305-1.3.9.jar
4.  实现 Drive 服务获取器：

    ```
    public Drive getDriveService() throws GeneralSecurityException, IOException, URISyntaxException {
        HttpTransport httpTransport = new NetHttpTransport();
        JacksonFactory jsonFactory = new JacksonFactory();
        GoogleCredential credential = new GoogleCredential.Builder()
            .setTransport(httpTransport)
            .setJsonFactory(jsonFactory)
            .setServiceAccountId(G_SERVICE_EMAIL)
            .setServiceAccountScopes(DriveScopes.DRIVE)
            .setServiceAccountPrivateKeyFromP12File(PKC_12_FILE)
            .build();
        Drive service = new Drive.Builder(httpTransport, jsonFactory, null)
            .setHttpRequestInitializer(credential)
            .build();
        return service;
    } 
    ```

    其中**G_SERVICE_EMAIL是来自***API 访问站点*的电子邮件地址，而**PKC_12_FILE**是先前下载的私钥。

5.  允许您的服务从您的云端硬盘访问文件夹：在[云端硬盘应用](https://drive.google.com)中文件夹的共享选项中，允许用户使用电子邮件：**G_SERVICE_EMAIL**读/写访问权限。

    ## PKC 文件集成

    ```
    private File getTempPkc12File() throws IOException {
        InputStream pkc12Stream = getAssets().open("this-is-your-unique-hash-privatekey.p12");
        File tempPkc12File = File.createTempFile("temp_pkc12_file", "p12");
        OutputStream tempFileStream = new FileOutputStream(tempPkc12File);

        int read = 0;
        byte[] bytes = new byte[1024];
        while ((read = pkc12Stream.read(bytes)) != -1) {
            tempFileStream.write(bytes, 0, read);
        }
        return tempPkc12File;
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T00:48:38.333

你可能不想这样做。如果您有访问令牌，则始终可以将其作为 URL 参数添加`access_token=MY_ACCESS_TOKEN`到请求 URL。

# ruby - Ruby：为什么不能直接使用#each 作为函数参数的一部分？

> ID：15497889
> 
> 赞同：-1
> 
> 时间：2013-03-19T11:12:36.700
> 
> 标签：ruby, methods, syntax

我只是在学习 Ruby，有一件事我不明白。Ruby 显然是为了简单性和原型设计速度而创建的。

那么，为什么如果我们想 - 比如说 - 打印数组的元素，我们不能做类似的事情：

```
puts array.each 
```

相反，我们必须这样做：

```
array.each{|element| puts "#{element}"} 
```

它似乎不必要地更加复杂。有什么见解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:13:40.990

你可以做

```
puts array 
```

试试看。这有多简单？:)

# c# - 如何将列（年）动态添加到水晶报表中？

> ID：15497892
> 
> 赞同：0
> 
> 时间：2013-03-19T11:12:46.933
> 
> 标签：c#, c#-4.0, crystal-reports

我正在使用 c#.net 4.0 创建水晶报表文档，无法动态将列添加到报表中。

现场视图如下： ![报告字段视图](../Images/3d3b6c2f9102af1f485ae8a816100974.png)

在此先感谢，最好的，

# python - 在 Python 2.7 中读取文件，忽略行，并分配内存（重写 fortran 代码）

> ID：15497896
> 
> 赞同：0
> 
> 时间：2013-03-19T11:12:58.987
> 
> 标签：python, fortran, output, fortran90

我对编程非常陌生，正在将 fortran90 代码转换为 python 2.7。到目前为止，我在这方面做得相当好，但遇到了一个困难的地方。我需要用 Python 编写这个子例程，但我不理解 fortran 表示法，也找不到任何关于 Read(1,*) 行的 Python 等效项的信息。

任何帮助都将不胜感激。

```
SUBROUTINE ReadBCoutput(filenameBC,count,timeArray,MbolArray,uArray,gArray,rArray,iArray,zArray)

! read Bruzual & Charlot (2003) stellar population synthesis models into arrays

CHARACTER*500,INTENT(IN):: filenameBC
INTEGER,INTENT(OUT):: count
REAL,DIMENSION(:),ALLOCATABLE,INTENT(OUT):: timeArray,MbolArray,uArray,gArray,rArray,iArray,zArray

REAL:: logTime,Mbol,g,uMg,gMr,gMi,gMz
REAL,DIMENSION(:),ALLOCATABLE:: timeArrayLocal,MbolArrayLocal,uArrayLocal,gArrayLocal,rArrayLocal,iArrayLocal,zArrayLocal

! open file and read off unnecessary 29 lines of comments
OPEN(1,FILE=TRIM(filenameBC),RECL=2000)
READ(1,*)
READ(1,*)
READ(1,*)
READ(1,*)
READ(1,*)
READ(1,*)
READ(1,*)
READ(1,*)
READ(1,*)
READ(1,*)
READ(1,*)
READ(1,*)
READ(1,*)
READ(1,*)
READ(1,*)
READ(1,*)
READ(1,*)
READ(1,*)
READ(1,*)
READ(1,*)
READ(1,*)
READ(1,*)
READ(1,*)
READ(1,*)
READ(1,*)
READ(1,*)
READ(1,*)
READ(1,*)
READ(1,*)

! now read arrays
count=0
ALLOCATE(timeArray(count))
ALLOCATE(MbolArray(count))
ALLOCATE(uArray(count))
ALLOCATE(gArray(count))
ALLOCATE(rArray(count))
ALLOCATE(iArray(count))
ALLOCATE(zArray(count))
IOEnd=0
DO WHILE(IOEnd>-1)
 READ(1,*,IOSTAT=IOEnd) logTime,Mbol,g,uMg,gMr,gMi,gMz
!print*,'filename is',filenameBC
   IF (IOEnd>-1) THEN ! not at end of file yet
     ! add new element to list
    count=count+1
    ALLOCATE(timeArrayLocal(count-1))
    ALLOCATE(MbolArrayLocal(count-1))
    ALLOCATE(uArrayLocal(count-1))
    ALLOCATE(gArrayLocal(count-1))
    ALLOCATE(rArrayLocal(count-1))
    ALLOCATE(iArrayLocal(count-1))
    ALLOCATE(zArrayLocal(count-1))
    DO countInside=1,count-1
       timeArrayLocal(countInside)=timeArray(countInside)
       MbolArrayLocal(countInside)=MbolArray(countInside)
       uArrayLocal(countInside)=uArray(countInside)
       gArrayLocal(countInside)=gArray(countInside)
       rArrayLocal(countInside)=rArray(countInside)
       iArrayLocal(countInside)=iArray(countInside)
       zArrayLocal(countInside)=zArray(countInside)
    END DO
    DEALLOCATE(timeArray)
    DEALLOCATE(MbolArray)
    DEALLOCATE(uArray)
    DEALLOCATE(gArray)
    DEALLOCATE(rArray)
    DEALLOCATE(iArray)
    DEALLOCATE(zArray)
    ALLOCATE(timeArray(count))
    ALLOCATE(MbolArray(count))
    ALLOCATE(uArray(count))
    ALLOCATE(gArray(count))
    ALLOCATE(rArray(count))
    ALLOCATE(iArray(count))
    ALLOCATE(zArray(count))
    DO countInside=1,count-1
       timeArray(countInside)=timeArrayLocal(countInside)
       MbolArray(countInside)=MbolArrayLocal(countInside)
       uArray(countInside)=uArrayLocal(countInside)
       gArray(countInside)=gArrayLocal(countInside)
       rArray(countInside)=rArrayLocal(countInside)
       iArray(countInside)=iArrayLocal(countInside)
       zArray(countInside)=zArrayLocal(countInside)
    END DO
    timeArray(count)=10**logTime
    MbolArray(count)=Mbol
    gArray(count)=g
    uArray(count)=uMg+g
    rArray(count)=g-gMr
    iArray(count)=g-gMi
    zArray(count)=g-gMz
    DEALLOCATE(uArrayLocal)
    DEALLOCATE(gArrayLocal)
    DEALLOCATE(rArrayLocal)
    DEALLOCATE(iArrayLocal)
    DEALLOCATE(zArrayLocal)
    DEALLOCATE(MbolArrayLocal)
    DEALLOCATE(timeArrayLocal)
 END IF
END DO
CLOSE(1)

END SUBROUTINE ReadBCoutput 
```

我不希望任何人为我转换整个事情 - 我只想清楚这实际上在做什么以及在 Python 中做什么/不需要做什么。我有能力自己搜索，但我有点被这里要找的东西所震撼。

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T13:13:20.607

在 fortran 中，`open(1,FILE=TRIM(filenameBC),RECL=2000)`打开具有 name 的文件`filenameBC`。该`TRIM`部分是不必要的，因为 fortran 运行时库会为您执行此操作（它与 python 等效的是`filenameBC.rstrip()`）。这里的`RECL=2000`部分也有点可疑。我不认为它在这里做任何事情——实际上，我认为使用它是未定义的行为，因为你的文件应该被连接以进行`"sequential"`访问。根据[fortran77 标准](http://www.fortran.com/F77_std/rjcnf0001-sh-12.html#sh-12.8.1)第 12.10.1 节，

> 记录 = rl
> 
> rl 是一个整数表达式，其值必须为正数。它指定为直接访问而连接的文件中每条记录的长度。如果正在连接文件以进行格式化输入/输出，则长度是字符数。如果正在连接文件以进行未格式化的输入/输出，则长度以处理器相关单位测量。对于现有文件，rl 的值必须包含在文件的允许记录长度集中（12.2.2）。对于新文件，处理器创建具有一组允许记录长度的文件，其中包括指定的值。**当连接文件以进行直接访问时，必须给出此说明符；否则，必须省略。**

这可能在标准的更新版本中发生了变化——如果是这样，我相信它指定了*最大*行长度。

Fortran 文件句柄只是整数。所以，虽然在 python 中你会说：

```
filehandle = open('file')
line = filehandle.readline()  #or better, `next(filehandle)` :) 
```

在 fortran 中，这与以下内容大致相同：

```
integer filehandle
filehandle = 1       ! pick an integer any positive one 
                     ! will do that we haven't used already,
                     ! but it's best to avoid 0,5,6 as those 
                     ! usually mean `stderr`,`stdin` and `stdout`.
open(filehandle,file='file')
read(filehandle,*) line 
```

基本上让你从文件中`*`读取一行。

* * *

请注意，这个 fortran 代码有一点问题，而且效率极低。例如`IF (IOEnd>-1) THEN`，在不是文件结尾的任何条件下检查都会成功（例如，奇怪的错误将被屏蔽，类似于`except`python 中的一个bare）。在 python 中，您可以将这些信息打包到一个列表中并动态增长列表——python 将处理您需要执行的所有重新分配。最后，您可以选择将列表转换为 numpy `ndarray`。

在伪 python 代码中，这大致翻译为：

```
data_list = []
with open(filenameBC.rstrip()) as fin:
    for _ in range(29): #throw away first 29 lines (I think I counted right ...)
        next(fin)

    for line in fin:
        data_list.append([float(x) for x in line.strip()])

timeArray,MbolArray,uArray,gArray,rArray,iArray,zArray = zip(*data_list) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:37:12.243

`READ(1,*)`正在读取....从您的文件中读取的内容，而不是存储它，即只是将其扔掉。所有这些`READ(1,*)`语句只是一种滚动文件的方式，直到您获得实际需要的数据。（顺便说一句，这不是最紧凑的编码方式。编写这个 FORTRAN 代码的人可能在许多方面都非常聪明，但不是一个非常好的程序员。或者他们可能很着急。）一个 python 等价物只是是

```
>>> infile.readline() 
```

请注意，FORTRAN 可以*以*整数、浮点数等形式读取数据，但是 python 只会将所有内容都读取为文本，然后您必须将其转换为所需的任何数字形式。

但是，如果您想查看[NumPy](http://docs.scipy.org/doc/numpy/reference/routines.io.html)，它有几个可以将数据读取为数字的例程：`loadtxt`和`genfromtxt`. 也许还有其他几个，但这些是我发现最有帮助的。

# php - 在 foreach 循环中查找最早的日期

> ID：15497905
> 
> 赞同：1
> 
> 时间：2013-03-19T11:13:30.237
> 
> 标签：php, arrays, datetime

我有一个 for each 循环，它遍历一组行，每行都有一个安装日期，但我只想从所有循环的行中获取最早的安装日期，这可以是循环中的任何随机行。我该怎么做？我应该只创建一个日期数组然后对其进行排序，还是应该在每次循环时检查它？最好有一个代码示例。日期的格式很简单：2012-09-04

```
 foreach($lines as $line){

                $install_date = $line->installation_date_c;
                $water_cost = $line->water_cost_c;
                $energy_cost = $line->energy_cost_c;
                $oweeks = 52;
                $oyears = $line->operating_years_c;
                $default_curr = $line->currency_id;

         } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T11:19:28.380

有很多方法可以做到这一点，也许大致是这样的？

```
$lowestDate = strtotime($lines[0]);
foreach($lines as $line){
    if(strtotime($line) < $lowestDate){
        $lowestDate = strtotime($line);
    }
}
echo "lowest date = " . date( 'y-m-d', $lowestDate); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T11:18:26.267

试试这个 ：

```
$lines  = your array;
$sort = array();
foreach($lines as $key=>$line){
    $install_date[$key] = $line->installation_date_c;
 }

array_multisort($install_date, SORT_DESC, $lines);

echo "<pre>";
print_r(current($lines)); 
```

# sap - 如何强制查询中的特定行

> ID：15497906
> 
> 赞同：1
> 
> 时间：2013-03-19T11:13:31.193
> 
> 标签：sap, business-objects

我正在 BusinessObjects 中创建一个 Web Intelligence 报告，我试图找到每个月提出的项目的计数并按优先级显示它们。我希望得到以下输出：

```
+----+-----+-----+-----+
|    | Jan | Feb | Mar |
+----+-----+-----+-----+
| P1 |   1 |   2 |   1 |
| P2 |  34 |  56 |  34 |
| P3 |  56 |  34 |  87 |
| P4 |  67 |  67 |  34 |
+----+-----+-----+-----+ 
```

我创建了一个查询，该查询返回我要报告的数据的 Id、Month 和 Priority 列。在报告中，我创建了一个网格，其中将月份作为列标题，将优先级作为行标题，并将“=Count([Id])”的论坛作为值单元格。

这给了我一个看起来与上面完全相同的网格......但是，当我今年到目前为止运行它时，没有任何项目设置了 P1 标志，因此该行根本不显示！

如果没有项目，如何强制该行显示在网格中但全为零？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:48:19.070

您必须创建一个仅具有优先级的单独查询，按优先级合并查询并将列 [Query1].[Priority] 替换为合并的维度 [Priority]。

# jquery - 带加减按钮的单展开手风琴

> ID：15497910
> 
> 赞同：0
> 
> 时间：2013-03-19T11:13:46.467
> 
> 标签：jquery

如果我单击第一个选项卡，它将展开，如果我单击另一个选项卡，则第一个选项卡将折叠，但图标不会变为减号。这是我的小提琴链接

```
{http://jsfiddle.net/kirandas82/4jaSL/16/} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:16:42.380

你为什么不使用[jquery 手风琴](http://jqueryui.com/accordion/)而不是重新发明轮子..易于使用..和自定义

# c - 结合 Docbook 和 Doxygen 文档类型。

> ID：15497914
> 
> 赞同：4
> 
> 时间：2013-03-19T11:13:59.890
> 
> 标签：c, documentation, doxygen, docbook

我正在为我们的软件库编写新文档，我想知道如何将我认为应该用 DocBook 编写的通用文档与基于 Doxygen 的 API 参考结合起来。

Doxygen 部分已经存在，所以我更愿意保留它，但使用 DocBook 只是一个想法，我愿意接受任何想法。用 Doxygen 编写整个文档是可能的，但在我看来这不是最好的方法。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-10T11:14:49.770

我建议您重新考虑采用全氧方式。尽管使用 Doxygen 编写详尽的文档一开始可能看起来很麻烦，但从长远来看，保持两个文档的一致性将是更多的工作。除了通过结合两者的输出产品来增加工作量之外。

Doxygen 可以将 Markdown 文件作为页面包含到您的文档中（参见手册的[这一部分](http://www.doxygen.nl/manual/markdown.html#md_page_header)），并可以将详细的文档外部化，以免过多地破坏源文件（参见手册的[其他部分](http://www.doxygen.nl/manual/docblocks.html#structuralcommands)）。

我还应该补充一点，我以前没有使用过 Docbook 的第一手经验，所以这可能会让我对 Doxygen 有一点偏见。

# x11 - 在 X11 中获取事件

> ID：15497915
> 
> 赞同：0
> 
> 时间：2013-03-19T06:09:12.887
> 
> 标签：x11

我正在使用佳能 SDK 从相机获取事件。在 SDK 中，我们注册了一个回调函数，当特定事件发生时调用该函数。我已经构建了一个与 SDK 通信的 Java 包装器。

但是当事件被触发时，我的窗口并没有直接得到事件。事实上，在 Windows 上，这就是我获取事件并将其发送给自己的方式：

```
private static final User32 lib = User32.INSTANCE;
boolean hasMessage = lib.PeekMessage( msg, null, 0, 0, 1 ); // peek and remove
if( hasMessage ){
lib.TranslateMessage( msg ); 
lib.DispatchMessage( msg ); //message gets dispatched and hence the callback function is     called
} 
```

基本上，如果窗口已接收到事件，则可以窥视，然后继续。在 Mac 上，可以使用`Cocoa`NSApplication 并`WindowServer`发送事件（如果有）来完成。

我正在寻找类似的替代方案，使用`X11`. 任何示例代码/链接就足够了。

PS：这是对此的后续问题[。](https://stackoverflow.com/questions/15216740/get-events-from-os)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T06:22:02.130

我想你正在寻找`XPeekEvent`. Xlib 有很好的文档记录，XNextEvent(3) 的手册页说：

```
The XPeekEvent function returns the first event from the event queue,
but it does not remove the event from the queue.  If the queue is
empty, XPeekEvent flushes the output buffer and blocks until an event
is received.  It then copies the event into the client-supplied XEvent
structure without removing it from the event queue. 
```

[可以在 wikibooks 上](http://en.wikibooks.org/wiki/X_Window_Programming/XLib)找到（例如）显示基本 Xwindow 和用于处理事件的主事件循环的示例代码。

# unit-testing - Qunit Javascript 单元测试

> ID：15497919
> 
> 赞同：0
> 
> 时间：2013-03-19T11:14:08.287
> 
> 标签：unit-testing, reference, lazy-loading, sample, qunit

我正在寻找有关如何使用 Qunit 框架编写单元测试用例以进行不引人注目的 javascript 客户端验证的参考：

```
 jQuery.validator.addMethod('requiredifnotempty',
   function(value, element, parameters) {
   var otherPropertyId = '#' + parameters['otherproperty'];

// get the actual value of the other control
var otherControl = $(otherPropertyId);
var controlType = otherControl.prop('type');
var otherValue = otherControl.val();

if (controlType === 'checkbox') {
    otherValue = otherControl.prop("checked").toString();
}

if (otherValue.trim().length > 0) {
    return $.validator.methods.required.call(this, value, element, parameters);
}

return true;
}

 );
jQuery.validator.unobtrusive.adapters.add(
'requiredifnotempty',
 ['otherproperty'],
 function (options) {
    options.rules['requiredifnotempty'] = {
    otherproperty: options.params['otherproperty']
  };
   options.messages['requiredifnotempty'] = options.message;        
 }); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-10-11T05:36:16.247

以下是一些参考资料：

*   [QUnit 自检](https://github.com/jquery/qunit/blob/master/test/test.js)
*   [forms.js](https://code.google.com/p/js-forms/source/browse/trunk/tests/forms.js?r=145)
*   [ExampleTest.html](https://github.com/coreysnyder04/Unit-Testing-with-QUnit/blob/master/tests/ExampleTest.html)
*   [骨干示例](https://github.com/sixohsix/backbone-example/tree/master/tests)

# java - 获取配置文件时出现 Google Analytics API 证书异常

> ID：15497922
> 
> 赞同：2
> 
> 时间：2013-03-19T11:14:14.203
> 
> 标签：java, oauth, google-api, oauth-2.0, google-analytics-api

我正在尝试创建一个仪表板，包括显示来自 Google Analytics 的一些分析报告。经过搜索，我发现了以下SO主题：[Java中的Google Analytics授权](https://stackoverflow.com/questions/9084840/google-analytics-authorization-in-java)

在其中一个答案中，我找到了以下服务帐户示例：

```
private static final HttpTransport HTTP_TRANSPORT = new NetHttpTransport();
private static final JsonFactory JSON_FACTORY = new JacksonFactory();

public static Result index() {
   GoogleCredential credential = null;
   try {
        credential = new GoogleCredential.Builder().setTransport(HTTP_TRANSPORT)
              .setJsonFactory(JSON_FACTORY)
              .setServiceAccountId("2363XXXXXXX@developer.gserviceaccount.com")
              .setServiceAccountScopes(AnalyticsScopes.ANALYTICS_READONLY)
              .setServiceAccountPrivateKeyFromP12File(new File("/your/path/to/privatekey/privatekey.p12"))                          
              .build();
     } catch (GeneralSecurityException e) {
         e.printStackTrace();
     } catch (IOException e) {
         e.printStackTrace();  
     }

     // Set up and return Google Analytics API client.
     Analytics analytics = new Analytics.Builder(HTTP_TRANSPORT, JSON_FACTORY, credential).setApplicationName(
          "Google-Analytics-Hello-Analytics-API-Sample").build();

     String profileId = "";
     try {
         profileId = getFirstProfileId(analytics);
     } catch (IOException e) {
        e.printStackTrace(); 
     }

     GaData gaData = null;
     try {
        gaData = executeDataQuery(analytics, profileId);
     } catch (IOException e) {
        e.printStackTrace();
     }
     printGaData(gaData);

     return ok(index.render("Your new application is ready."));
}

private static String getFirstProfileId(Analytics analytics) throws IOException {
    String profileId = null;

    // Query accounts collection.
    Accounts accounts = analytics.management().accounts().list().execute();

    if (accounts.getItems().isEmpty()) {
        System.err.println("No accounts found");
    } else {
        String firstAccountId = accounts.getItems().get(0).getId();

        // Query webproperties collection.
        Webproperties webproperties =
                analytics.management().webproperties().list(firstAccountId).execute();

        if (webproperties.getItems().isEmpty()) {
            System.err.println("No Webproperties found");
        } else {
            String firstWebpropertyId = webproperties.getItems().get(0).getId();

            // Query profiles collection.
            Profiles profiles =
                    analytics.management().profiles().list(firstAccountId, firstWebpropertyId).execute();

            if (profiles.getItems().isEmpty()) {
                System.err.println("No profiles found");
            } else {
                profileId = profiles.getItems().get(0).getId();
            }
        }
    }
    return profileId;
}

/**
 * Returns the top 25 organic search keywords and traffic source by visits. The Core Reporting API
 * is used to retrieve this data.
 *
 * @param analytics the analytics service object used to access the API.
 * @param profileId the profile ID from which to retrieve data.
 * @return the response from the API.
 * @throws IOException tf an API error occured.
 */
private static GaData executeDataQuery(Analytics analytics, String profileId) throws IOException {
    return analytics.data().ga().get("ga:" + profileId, // Table Id. ga: + profile id.
            "2012-01-01", // Start date.
            "2012-01-14", // End date.
            "ga:visits") // Metrics.
            .setDimensions("ga:source,ga:keyword")
            .setSort("-ga:visits,ga:source")
            .setFilters("ga:medium==organic")
            .setMaxResults(25)
            .execute();
}

/**
 * Prints the output from the Core Reporting API. The profile name is printed along with each
 * column name and all the data in the rows.
 *
 * @param results data returned from the Core Reporting API.
 */
private static void printGaData(GaData results) {
    System.out.println("printing results for profile: " + results.getProfileInfo().getProfileName());

    if (results.getRows() == null || results.getRows().isEmpty()) {
        System.out.println("No results Found.");
    } else {

        // Print column headers.
        for (GaData.ColumnHeaders header : results.getColumnHeaders()) {
            System.out.printf("%30s", header.getName());
        }
        System.out.println();

        // Print actual data.
        for (List<String> row : results.getRows()) {
            for (String column : row) {
                System.out.printf("%30s", column);
            }
            System.out.println();
        }

        System.out.println();
    }
} 
```

不幸的是，我似乎无法让它工作。我最终遇到以下异常：

```
Caused by: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
at sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:385)
at sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:292)
at sun.security.validator.Validator.validate(Validator.java:260)
at sun.security.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:326)
at sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:231)
at sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:126)
at sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1320)
... 175 more
Caused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
at sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:196)
at java.security.cert.CertPathBuilder.build(CertPathBuilder.java:268)
at sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:380)
... 181 more 
```

异常发生在以下行之一：

```
analytics.management().accounts().list().execute(); 
```

我很确定，我使用了正确的配置并为生成的私钥设置了正确的路径..

使用 OAuth 操场 ( [https://developers.google.com/oauthplayground/](https://developers.google.com/oauthplayground/) ) 时，看起来很简单：

*   授权申请
*   交换“刷新”和“访问”令牌的授权码

但是找到的文档到处都是，而且不是很清楚（无论如何对我来说）..

任何想法如何解决这一问题？任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:06:39.783

请参阅有关此类问题的[先前答案。](https://stackoverflow.com/questions/2290570/pkix-path-building-failed-while-making-ssl-connection)这看起来是 SSL/信任库问题，与 OAuth 无关。

# bash - 如何在工作区中运行带有参数的 MATLAB 自定义脚本

> ID：15497925
> 
> 赞同：2
> 
> 时间：2013-03-19T11:14:20.633
> 
> 标签：bash, matlab, shell

我有一个 MATLAB 函数，它使用工作区中先前加载的变量执行一些操作。例如：

```
do_something(A, B, C, ...); 
```

我`n`在 MATLAB 中使用不同的`A, B, C ...`. 输出保存为`ASCII`用于 C++ 程序的进一步处理。

我想计时整个过程。所以我想从 shell 脚本运行 MATLAB 函数，然后是 C++ 程序。例如：

```
matlab -nojvm -nodesktop -nosplash -r "run matlabTest"; ./c++Test; 
```

但我意识到 MATLAB 函数需要一些以前没有加载的变量。所以，我的问题是如何使用工作区中的参数运行 MATLAB 函数？. 工作区保存在同一目录中。

我正在使用 MATLAB 7.9.0 (R2009b) 在 Linux 上工作。

我注意到（在阅读/查看这个问题时）我可以使用该`system`函数在 MATLAB 中运行 linux 命令。我已经成功地做到了这一点，但我不会怀疑如何做其他方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T11:38:46.687

您可以在引号中包含多个 MATLAB 命令，以 . 分隔`;`。你可以试试

```
matlab -nojvm -nodesktop -nosplash -r "mydata = 1; run matlabTest"; ./c++Test; 
```

例如。如果您需要许多变量并且这变得冗长或不方便，也许您可​​以将工作区变量保存到 .mat 文件（例如`mydata.mat`）中，然后将它们加载：

```
matlab -nojvm -nodesktop -nosplash -r "load mydata; run matlabTest"; ./c++Test; 
```

PS你不需要`run`，直接打电话`matlabTest`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-26T21:59:15.377

为了在 Ubuntu 上使用 nohup 在后台运行 matlab 脚本（带参数），以下命令适用于我：

```
nohup matlab -nodisplay -nosplash -nojvm -nodesktop -r "demCF datasetName 1 10 1000 0" 2>&1 > demCF_datasetName_100.out & 
```

# google-maps - Google Map API Javascript v3-如何突出显示多边形/矩形区域内的特定街道/街道段？

> ID：15497926
> 
> 赞同：1
> 
> 时间：2013-03-19T11:14:22.887
> 
> 标签：google-maps, google-maps-api-3

我正在研究 Google Map API v3，有很多有用的功能/示例。但我仍在寻找一种方法来突出显示所有街道，并且只在多边形/矩形内突出显示不同颜色的街道。

这是我在地图上画的：

[![在此处输入图像描述](../Images/68b29946cf500705d088f2eaf2e38b17.png)](https://i.stack.imgur.com/PSdcC.png)

这就是我想展示的

[![在此处输入图像描述](../Images/aa62bb9abca8faf5ee82f5dbd3c9a358.png)](https://i.stack.imgur.com/E3X9K.png)

我尝试了很多，但找不到解决方案。

到目前为止，我能想到的唯一方法（也是最糟糕的方法）是存储所有街道数据，找到矩形/多边形内街道的所有点，并绘制连接它们的折线，但这意味着我们需要存储海量数据。

我也想过方向服务，但它似乎不适用于所有情况（例如，非常大的矩形）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T06:08:58.787

您可以这样做的一种方法是创建两组不同的地图：一组具有“正常”样式，另一组具有“反向样式”。当有人在“法线”贴图上绘制一个矩形时，然后从反向贴图中剪下相应的部分并将其粘贴到法线贴图上。

不，这并不容易。这不是一个容易的问题。

如果您的样式正确，您可能可以为此使用 Open Street Map 磁贴。见 [http://wiki.openstreetmap.org/wiki/Creating_your_own_tiles](http://wiki.openstreetmap.org/wiki/Creating_your_own_tiles)

# hadoop - java.lang.RuntimeException：不是主机：端口对：

> ID：15497928
> 
> 赞同：0
> 
> 时间：2013-03-19T11:14:25.217
> 
> 标签：hadoop, mapreduce

我写了一个 Map-reduce 程序。在尝试运行它时，它显示如下运行时异常

```
java.lang.RuntimeException: Not a host:port pair: 
at org.apache.hadoop.net.NetUtils.createSocketAddr(NetUtils.java:136)
at org.apache.hadoop.net.NetUtils.createSocketAddr(NetUtils.java:123)
at org.apache.hadoop.mapred.JobTracker.getAddress(JobTracker.java:1807)
at org.apache.hadoop.mapred.JobClient.init(JobClient.java:423)
at org.apache.hadoop.mapred.JobClient.<init>(JobClient.java:410)
at org.apache.hadoop.mapreduce.Job.<init>(Job.java:50)
at org.apache.hadoop.mapreduce.Job.<init>(Job.java:54)
at com.homedepot.mm.rd.transactionmatching.hadoop.utils.TMHelper.driverConfig(TMHelper.java:83)
at com.homedepot.mm.rd.transactionmatching.hadoop.driver.TMDuplicateRemoverDriver.run(TMDuplicateRemoverDriver.java:73)
at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
at com.homedepot.mm.rd.transactionmatching.hadoop.driver.TMDuplicateRemoverDriver.main(TMDuplicateRemoverDriver.java:111) 
```

我找不到原因。谁能帮帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:26:54.747

请检查您在客户端和服务器上是否有相同版本的 Hadoop。

此外，您的集群机器在 hadoop conf 目录中的 master 和 slaves 文件中得到了很好的指定。

# c# - 期望不提交表单，但是除了提交按钮之外的链接按钮或其他按钮执行提交表单

> ID：15497929
> 
> 赞同：0
> 
> 时间：2013-03-19T11:14:27.760
> 
> 标签：c#, asp.net

期望不提交表单，但是除了提交按钮之外的链接按钮或其他按钮执行提交表单

无论我使用onclientclick，使用onclick事件对window.open使用javascript时都没有响应

```
 <asp:LinkButton ID="StartApplicationLink" Text="Start your application" runat="server"  
                            TabIndex="7" OnClientClick="window.open('http://www.hello.com/register.aspx','_top','Asia - Registration');" class="button btn-red"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:17:27.567

如果您不想提交表单，则必须在`OnClientClick`

像这样的东西

```
OnClientClick = "window.open('http://www.hello.com/register.aspx',
                             '_top',
                             'Spring Asia - Registration'); return false;" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T11:43:27.087

你必须`return false`对 OnClientClick 事件如下：

```
<asp:LinkButton ID="StartApplicationLink" Text="Start your application" runat="server"  
                            TabIndex="7" OnClientClick="window.open('http://www.hello.com/register.aspx','_top','Asia - Registration');return false;" class="button btn-red"/> 
```

return false 将阻止表单提交。

# .net - 程序崩溃，但 Debug Diag 说这是第一次机会异常，对吗？

> ID：15497932
> 
> 赞同：3
> 
> 时间：2013-03-19T11:14:34.103
> 
> 标签：.net, debugging, first-chance-exception, debugdiag

可能这是正常情况，但我很困惑。

我正在从 Visual Studio 运行我的 C# 调试应用程序。DebugDiag 设置为自动附加到进程。

我有一条规则可以从此应用程序收集故障转储，并且该规则定义未配置的第一次机会异常的操作应为“无”。

但是当应用程序崩溃时，当我查看转储文件时，它说存在第一次机会异常。

从[这个 SO question](https://stackoverflow.com/questions/564681/what-is-a-first-chance-exception)的答案中，我了解到“异常首先被抛出给调试器，然后被抛出到实际程序，如果它没有被处理，它会再次被抛出给调试器”

那么为什么 DebugDiag 会为第一次机会异常收集转储文件呢？

编辑为了清楚起见，我不想在这里修复损坏的代码。我试图理解为什么 DebugDiag 告诉我第一次机会异常导致我的代码崩溃。当然，根据定义，只有第二次机会异常会导致代码崩溃，即代码未处理的异常？

“崩溃”意味着进程终止并且 DebugDiag 生成崩溃转储文件。我在“Start without Debugging”上运行代码的调试版本

# php - PHP File not found, but it is there

> ID：15497935
> 
> 赞同：0
> 
> 时间：2013-03-19T11:14:36.823
> 
> 标签：php

When I'm running my site it keeps telling me

```
Warning: require_once(../../functions.inc.php): failed to open stream: No such file or directory in F:\xampp\htdocs\FinalYear\inc\functions\LoginOrRegister.inc.php on line 5 
```

But the file is exactly 2 folders above the file I'm requiring. When I'm doing the following:

```
set_include_path(dirname(__FILE__)."/../../");
require_once('functions.inc.php'); 
```

It works (I don't get an error message for a non-existing file **BUT** In the functions.inc.php there is a new object created of the database.php.

```
$db = new database(); 
```

I can call this on every other site, just not on my LoginOrRegister.php. It always tells me, that this object doesn't exist, even, when I create it myself in the file. Any help?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T11:20:01.343

It looks to me like you are including a file from an included file. If that is the case, the relative path has to be relative to the script that is running, and not the script that is included inside the first script.

It is much easier to use absolute paths (use `dirname(__FILE__)` before the relative path).

```
require_once(dirname(__FILE__)."/../../functions.inc.php"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T11:22:08.967

You are probably including a file out of a file that is itself included by another file. PHP will include relativ to the file that has been called originally.

So consider this stucture:

```
|- htdocs
    |- index.php
    |- inc
        |- test.php (A)
        |- inc
            |- test.php (B) 
```

If you now call /index.php and the index.php file will include inc/test.php this will include file A.

If inside the test.php (A) we also call include inc/test.php it will include test.php (A) again because the path is relative to index.php. If instead you call /inc/test.php from the webbrowser while there is an include on inc/test.php in there it will include test.php (B) into the called test.php (A)

This is because PHP handles an include like the sourcecode of the included file would replace the include line, so basically you move the sourcecode to another location.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T11:36:04.167

I always do this to avoid that kind of issues:

```
$root = $_SERVER['DOCUMENT_ROOT']; //your website's root folder, where the index.php is
include("$root/path"); 
```

# c++ - 通过 TCP 将 JPEG 从 iPhone 发送到 PC

> ID：15497939
> 
> 赞同：0
> 
> 时间：2013-03-19T11:14:53.657
> 
> 标签：c++, iphone, tcp

当从客户端发送的 JPEG 图像数据由于图像不完整而与服务器上读取的大小不匹配时，如何防止崩溃？

1.  客户端：发送 4 个字节的图像长度信息--------> 服务器：读取 4 个字节。
2.  客户端：发送 x 字节的图像数据 ----------------> 服务器：读取 x 字节。

我使用 sampleBuffer (AVFoundation) 在 iPhone 上创建 JPEG 图像，在发送图像数据之前发送每个图像的长度。图像以一定时间间隔连续发送。我使用 Microsoft Vsual Studio 2005(C++) 接收数据并使用 OpenCV 显示图像。

iPhone（客户端）：

```
// AVCaptureSession delegate
- (void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection 
{ 

    NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];
    CVImageBufferRef imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer);
    CVPixelBufferLockBaseAddress(imageBuffer,0); 

    uint8_t *baseAddress = (uint8_t *)CVPixelBufferGetBaseAddress(imageBuffer); 
    size_t bytesPerRow = CVPixelBufferGetBytesPerRow(imageBuffer); 
    size_t width = CVPixelBufferGetWidth(imageBuffer); 
    size_t height = CVPixelBufferGetHeight(imageBuffer);  

    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB(); 
    CGContextRef newContext = CGBitmapContextCreate(baseAddress, width, height, 8, bytesPerRow, colorSpace, kCGBitmapByteOrder32Little | kCGImageAlphaPremultipliedFirst);
    CGImageRef newImage = CGBitmapContextCreateImage(newContext); 

    CGContextRelease(newContext); 
    CGColorSpaceRelease(colorSpace);

    [self.customLayer performSelectorOnMainThread:@selector(setContents:) withObject: (id) newImage waitUntilDone:YES];

    UIImage *image= [UIImage imageWithCGImage:newImage scale:1.0 orientation:UIImageOrientationRight];
    NSData *data = UIImageJPEGRepresentation(image, 0.5);

    // Send image length bytes
    uint32_t length = (uint32_t)htonl([data length]);
    [_outputStream write:(uint8_t *)&length maxLength:4];

    // Send image data bytes
    [_outputStream write:(const uint8_t *)[data bytes] maxLength:[data length]];

    CGImageRelease(newImage);
    CVPixelBufferUnlockBaseAddress(imageBuffer,0);
    [pool drain];
} 
```

PC - VS2005 C++（服务器）：

```
cvNamedWindow("image", CV_WINDOW_AUTOSIZE);

std::vector<char> buf;

for(int i=0; i < 1000; i++) {

    typedef unsigned __int32 uint32_t;
    uint32_t len;
    int lengthbytes = 0;
    int databytes = 0; 

    // Receive image length bytes
    lengthbytes = recv(clientSocket, (char *)&len, sizeof(len), 0); 

    len = ntohl(len);

    buf.clear();
    buf.resize(len);

    // Receive image data bytes ()
    databytes = recv(clientSocket, &buf[0], buf.size(), 0);

    // Display image
    Mat matrixJpeg = imdecode(Mat(buf), 1);
    IplImage object = matrixJpeg;
    IplImage* fIplImageHeader = &object;
    cvShowImage("image", fIplImageHeader);
    cvWaitKey(50);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T06:33:20.387

这是我的问题的解决方案：

```
cvNamedWindow("image", CV_WINDOW_AUTOSIZE);

std::vector<char> buf;

for(int i=0; i < 1000; i++) {

    typedef unsigned __int32 uint32_t;
    uint32_t len;
    int lengthbytes = 0;
    int databytes = 0; 

    // Receive image length bytes
    lengthbytes = recv(clientSocket, (char *)&len, sizeof(len), 0);

    len = ntohl(len);

    buf.clear();
    buf.resize(len);

    // Receive image data bytes      
    databytes = recv(clientSocket, &buf[0], buf.size(), 0);

    if ( buf[0] == (char)0xff && buf[1] == (char)0xd8 && buf[buf.size() - 2] == (char)0xff && buf[buf.size() -1] == (char)0xd9) {

        // Display image if it's a complete JPEG file with SOF = FF D8 and EOF = FF D9
        Mat matrixJpeg = imdecode(Mat(buf), 1);
        IplImage object = matrixJpeg;
        IplImage* fIplImageHeader = &object;
        cvShowImage("image", fIplImageHeader);
        cvWaitKey(50);

    }else{

        // Clear buffer and move to the SOF of the next image data
        buf.clear();
        buf.resize(2);

        while(recv(clientSocket, &buf[0], 1, 0) == 1){     
            if(buf[0] == (char)0xff) { 
                databytes1 = recv(clientSocket, &buf[1], 1, 0);
                if(buf[1] == (char)0xd9 ) { 
                    buf.clear();
                }
            }
        }
    }
} 
```

# asp.net - asp.net中的webservice xml请求

> ID：15497941
> 
> 赞同：2
> 
> 时间：2013-03-19T11:14:58.053
> 
> 标签：asp.net, wcf, web-services

我需要实现一个 web 服务作为请求获取以下 xml

```
<EVG_CardValid>
  <Token>
    <UserName>xxxx</UserName>
    <password>yyyy</password>
    <CardID>71656</CardID>
  </Token>
  <MaxTitle>5</MaxTitle>
  <IncludeDates>
    <startDate>2012-11-25T13:06:33.11</startDate>
    <EndDate>2012-11-25T15:06:33.11</EndDate>
  </IncludeDates>
</EVG_CardValid> 
```

webservice需要响应一个xml

```
 <info>
    <cardName>
    xxx
    </cardName>
    <cardValidDate>1/1/2013</cardValidDate>
    ...
    </info> 
```

我是 webservices 新手（只使用本地 wcf 和 jason）

我的问题是我的网络服务应该是什么样子，我必须在我的函数中作为参数执行什么（提到的 xml 有哪些变量）我如何发送 xml 作为响应（发送回构建为 xml 的字符串？）

从数据库检查用户名和密码时，我需要做一些特别的事情吗？

在这种情况下使用 wcf 或 webservice 哪个更好？

抱歉无知，任何帮助将不胜感激

非常感谢巴罗兹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:28:57.143

我之前也有同样的需求，我在我的博客上发过，查过一次。。

它可能会帮助您入门。

[http://www.iamraghuveer.com/2012/01/aspnet-web-service-receiving-xml-as.html](http://www.iamraghuveer.com/2012/01/aspnet-web-service-receiving-xml-as.html)

那篇文章中也有一些垃圾，但这是可行的方法。

# scala - 在Scala中定义为字符串数组时如何打印args？

> ID：15497943
> 
> 赞同：2
> 
> 时间：2013-03-19T11:15:00.660
> 
> 标签：scala, printing, read-eval-print-loop, args

这可能只是我不了解如何使用 REPL，但我希望能够调用 MyObject.myMethod("Hi") 并打印 Hi 或 This is my message Hi

以下是一些失败的尝试：

```
object MyObject {
    def myMethod(args: Array[String]) {
      println("This is my message "+args)
    }
  }

object MyObject {
    def myMethod(args: Array[String]) {
      println(args.map(_.mkString(" "))
    }
  } 
```

错误：服务器超时 - 可能是您的程序中的无限循环。请耐心等待。正在为您创建新的解释器实例，这可能需要几秒钟。

```
object MyObject {
    def myMethod(args: Array[String]) {
      println("Hello, " + args(0) + "!")
    }
  } 
```

## 错误：服务器超时 - 可能是您的程序中的无限循环。

我不确定这是否只是与解释器一起使用的一个糟糕的例子，或者我是否误解了 Scala 中的数组字符串，或者两者兼而有之。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:20:07.423

您的第二个示例缺少右括号

```
println(args.map(_.mkString(" ")) 
```

我认为这会造成很大的混乱（也许您正在定义递归调用，因为您没有意识到您仍在定义方法和对象。

确保您在 REPL 提示符下

```
scala> 
```

在定义对象之前并确保在调用它之前定义是完整的。我认为您的`println()`上述实际情况也不正确，但更正括号会让您上路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T20:39:36.427

你在 Korefn 的位置。似乎知道如何调用该方法使我绊倒。

```
 object ScalaMain {
  case class Person(name: String, age: Int)

  val persons = List(
    Person("Boris", 40),
    Person("Betty", 32),
    Person("Bambi", 17))

  val (minors, majors) = persons.partition(_.age <= 18) 

  def main(args: Array[String]) = {
    println (minors.mkString(", "))
    println (majors.mkString(", "))
  }
} 
```

通过使用调用

```
ScalaMain.main(null) 
```

这导致：

```
Person(Bambi,17)
Person(Boris,40), Person(Betty,32) 
```

参考： http: [//michid.wordpress.com/2010/08/24/so-scala-is-too-complex/](http://michid.wordpress.com/2010/08/24/so-scala-is-too-complex/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T12:20:45.793

您最初错误地调用了该方法。尝试将该方法称为

```
MyObject.myMethod(Array("Hello")) 
```

注意与

```
MyObject.myMethod("Hello") 
```

第二次使用`arg.deep`或`mkString(" ")`在方法中显示字符串。

**编辑**

Scala`Array`的方式与 java 不同`Array`。

# ravendb - RavenDB 在放置包含 admin 的文档 ID 时返回 401 Unauthorized

> ID：15497945
> 
> 赞同：1
> 
> 时间：2013-03-19T11:15:02.767
> 
> 标签：ravendb, ravendb-http

如果我的文档 ID 以`admin`然后尝试 PUT 开头，则失败并显示 HTTP 401 Unauthorized

```
PUT http://localhost:8080/databases/mydb/docs/admin 
```

`admin`+ 其他任何事情也会失败

前缀`admin`例如`foo-admin`作品

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T09:49:35.377

这已在 RavenDB 的下一个版本中修复，感谢您的错误报告。

# asp.net-mvc-4 - Azure 移动服务或 ASP.NET MVC 4 Web API

> ID：15497946
> 
> 赞同：0
> 
> 时间：2013-03-19T11:15:05.327
> 
> 标签：asp.net-mvc-4, azure, asp.net-web-api, azure-mobile-services

我构建了一个带有标准数据库查询任务和用户身份验证的 ASP.NET MVC 4 应用程序。现在我想将它上传到 Windows Azure 并构建 Windows 8 和 Windows Phone 客户端应用程序。对这些任务使用 Azure 移动服务或 ASP.NET MVC Web API 是否更好？我已经使用 Simple Membership Provider 来确保用户安全，所以我不确定如何将它与移动服务一起使用。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T06:01:53.090

我认为在直接与 ZUMO 打交道时，除了 Live Connect/FB/Google/etc 之外，您不能使用任何其他东西。

我想您可以创建自己的 Web api 或其他使用简单成员身份验证用户凭据的基于 Web 的登录。服务器随后将向实时连接服务（对于任何经过验证的用户）发出登录请求，并将 authenticationToken 与用户对象一起返回给您的应用程序。

# r - 在 R 中通过引用调用（使用函数修改对象）

> ID：15497947
> 
> 赞同：5
> 
> 时间：2013-03-19T11:15:06.803
> 
> 标签：r, function

我刚刚在 R 中弄湿了我的脚，并惊讶地发现一个函数不会修改一个对象，至少看起来这是默认值。例如，我编写了一个函数，只是为了在表格的一个标签上粘贴一个星号；它在函数内部工作，但表本身没有改变。（我主要来自Ruby）

那么，在 R 中使用函数更改对象的正常、公认的方法是什么？如何在表格标题中添加星号？

*   替换整个对象：`myTable = title.asterisk(myTable)`

*   使用变通方法通过引用调用（例如，在[TszKin](http://www.r-bloggers.com/call-by-reference-in-r/) Julian?

*   使用函数以外的结构？对象方法？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-19T12:09:37.987

您遇到问题的原因是您将对象传递到函数的本地命名空间中。这是关于 R 的伟大/可怕的事情之一：它允许隐式变量声明，然后随着命名空间变得更深而实现取代。

这会影响您，因为函数会在当前命名空间中创建一个新命名空间。我假设对象“myTable”最初是在全局命名空间中创建的，但是当它被传递到函数“title.asterisk”时，一个新的函数本地命名空间现在具有一个具有相同属性的对象。这像这样工作：

```
title.asterisk <- function(myTable){ do some stuff to 'myTable' } 
```

在这种情况下，函数“title.asterisk”不会对全局对象“myTable”进行任何更改。相反，会创建一个同名的本地对象，因此本地对象会取代全局对象。如果我们`title.asterisk(myTable)`以这种方式调用函数，函数只会对局部变量进行更改。

有两种直接修改全局对象的方法（以及许多间接方法）。

**选项 1**：正如您提到的，第一个是让函数返回对象并覆盖全局对象，如下所示：

```
title.asterisk <- function(myTable){
    do some stuff to 'myTable'
    return(myTable)
}
myTable <- title.asterisk(myTable) 
```

这没关系，但是您仍然使您的代码有点难以理解，因为实际上有两个不同的“myTable”对象，一个是全局对象，一个是函数本地对象。许多编码人员通过添加句点“。”来澄清这一点。在可变参数前面，如下所示：

```
title.asterisk <- function(.myTable){
    do some stuff to '.myTable'
    return(.myTable)
}
myTable <- title.asterisk(myTable) 
```

好的，现在我们有一个视觉提示，这两个变量是不同的。这很好，因为当我们稍后尝试调试代码时，我们不想依赖诸如命名空间取代之类的不可见的东西。它只会让事情变得比他们必须要做的更难。

**选项 2**：您可以只从函数中修改对象。当您想要对对象进行破坏性编辑并且不希望内存膨胀时，这是更好的选择。如果您正在进行破坏性编辑，则无需保存原始副本。此外，如果您的对象足够大，您不想在不需要时复制它。要对全局命名空间对象进行编辑，只需不要将其传递给函数或从函数中声明它。

```
title.asterisk <- function(){ do some stuff to 'myTable' } 
```

现在我们从函数中直接编辑对象“myTable”。我们没有传递对象的事实使我们的函数寻找更高级别的命名空间来尝试解析变量名。瞧，它发现了一个更高的“myTable”对象！函数中的代码对对象进行更改。

**需要考虑的注意事项**：我讨厌调试。我的意思是我真的很讨厌调试。这在 R 中对我来说意味着一些事情：

*   我将几乎所有内容都包装在一个函数中。当我编写代码时，一旦我得到一个工作，我将它包装在一个函数中并将它放在一边。我大量使用'.' 为我所有的函数参数添加前缀，并且对它所在的命名空间的任何本机内容不使用前缀。
*   我尽量不要从函数内部修改全局对象。我不喜欢这会导致什么。如果需要修改一个对象，我会在声明它的函数中对其进行修改。这通常意味着我有多层函数调用函数，但这使我的工作既模块化又易于理解。
*   我注释了我的所有代码，解释了每一行或每一块的用途。这似乎有点无关，但我发现这三件事对我来说是一起的。一旦你开始在函数中包装编码，你会发现自己想要重用更多的旧代码。这就是好的评论进来的地方。对我来说，这是一个必要的部分。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-19T11:29:05.203

正如您所指出的，这两种范式正在替换整个对象，或者编写“替换”函数，例如

```
`updt<-` <- function(x, ..., value) {
    ## x is the object to be manipulated, value the object to be assigned
    x$lbl <- paste0(x$lbl, value)
    x
} 
```

和

```
> d <- data.frame(x=1:5, lbl=letters[1:5])
> d
  x lbl
1 1   a
2 2   b
3 3   c
> updt(d) <- "*"
> d
  x lbl
1 1  a*
2 2  b*
3 3  c* 
```

例如，这是`$<-`--就地更新访问的元素的行为`$`。[这](https://stackoverflow.com/questions/11563154/what-are-replacement-functions-in-r)是一个相关的问题。可以将替换函数视为语法糖

```
updt1 <- function(x, ..., value) {
    x$lbl <- paste0(x$lbl, value)
    x
}
d <- updt1(d, value="*") 
```

但在我看来，“句法糖”这个标签并不能真正体现所涉及的中心范式。它支持方便的就地更新，这与 R 通常维护的更改时复制错觉不同，它实际上是更新对象的“R”方式（而不是使用`?ReferenceClasses`，例如，它具有更多其他语言的感觉，但会让期望更改时复制语义的 R 用户感到惊讶）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-02T09:21:50.733

对于将来寻找一种简单方法（不知道是否更合适）来解决此问题的任何人：

在函数内部创建对象以临时保存要更改的对象的修改版本。用于`deparse(substitute())`获取已传递给函数参数的变量的名称，然后用于`assign()`覆盖您的对象。您将需要使用`envir = parent.frame()`inside`assign()`让您的对象在函数外部的环境中定义。

```
(MyTable <- 1:10) 
```

> [1] 1 2 3 4 5 6 7 8 9 10

```
title.asterisk <- function(table) {
  tmp.table <- paste0(table, "*")
  name      <- deparse(substitute(table))
  assign(name, tmp.table, envir = parent.frame())
}

(title.asterisk(MyTable)) 
```

> [1] “1*” “2*” “3*” “4*” “5*” “6*” “7*” “8*” “9*” “10*”

在定义对象时使用括号比定义然后打印更有效（对我来说，更好看）。

# vb.net - VB.Net从字符串类型转换

> ID：15497948
> 
> 赞同：1
> 
> 时间：2013-03-19T11:15:08.230
> 
> 标签：vb.net, types, type-conversion

这是我第一次尝试在 vb.net 中编写 oop 程序。该程序的基本思想是使用一个excel表作为数据源，然后更新一个mysql数据库。为了实践 OOP 的原则，我创建了一个名为 motorbike 和 FinanceExample 的类型。

我正在使用以下连接字符串，它仅将数据作为文本，因为读取模型 1198 似乎存在问题。

```
Dim xcelConnString As String = 
    "Provider=Microsoft.Jet.OLEDB.4.0;" _
    & "Data Source=R:\newBikeUpdates\motorcyclesLatest.xls;" _
    & "Extended Properties=""Excel 8.0; IMEX=1""" 
```

所以我正在读取这些值，然后将它们分配给 motorbike 和 financeExample 对象的属性。

有了 vbscript 的基础后，我很快就清楚地知道，数据输入并不像我最初想象的那么容易。因此，我编写了一个函数，该函数将在为属性赋值时返回正确的类型：

```
motorcycle.category = checkValue(xcelDA("Category")) ' String expected
motorcycle.weight = checkValue(xcelDA("Weight")) 'String passed and Integer should be returned. 
```

所以这里是函数：

```
Function checkValue(ByVal v As Object)
    Dim ret
    If Not IsDBNull(v) Then
        If Double.TryParse(v, ret) Then
            Debug.WriteLine("v is Double")
            Return ret
        ElseIf Integer.TryParse(v, ret) Then
            Debug.WriteLine("v is an Integer")
            Return ret
        ElseIf v.GetType Is GetType(String) Then
            Debug.WriteLine("v is a string")
            Return CStr(v)
        Else ' Presumption of string type
            Debug.WriteLine("v is Other")
            Return v
        End If
    Else
        Debug.WriteLine("v is DBNull")
        ret = ""
        Return ret
    End If
End Function 
```

并且 string 元素适用于 Category 并返回一个字符串。但是当它开始分配权重值时，我得到一个“417”字符串传入，但 double.tryparse(v,ret) 或 integer.tryparse(v,ret) 元素似乎都不起作用。当使用 debug as v.getType() 时，VS2010 将 v 报告为 string/system.string。我什至尝试过调试传递 integer.tryParse("417",ret) 并且这有效，但由于某种原因它不使用 v 参数。

我也尝试过 integer.tryParse(v.toString,ret) 但这也不起作用。

所以任何人都可以为我指出正确的方向，请告诉我如何克服这个问题，因为 CInt 似乎不起作用（VBscript 接地，抱歉！）

提前谢谢了！格雷厄姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:10:26.717

好的，可以公平地说，我在 vbscript 中的传统在这个问题中得到了体现。

在运行和调试代码并在我认为传入“417”时检查 v 的值时，我注意到实际传入的值是“417”，并带有额外的空间。

当然，在 vbscript 中，我很确定会自动进行修剪。因此，在调用函数时修剪字符串实际上会按预期返回双精度值。

别笑，我意识到我是个木板！

如果你看了谢谢，格雷厄姆

# python - 从没有'__getitem__'属性的类对象中获取参数？

> ID：15497949
> 
> 赞同：0
> 
> 时间：2013-03-19T11:15:11.563
> 
> 标签：python, class, proj

我`pyproj.Geod`用来计算地理距离，我想用物体定义的地球直径进行另一个计算。

当没有`__getitem__`属性并且对象不可索引时，有没有办法从中提取值？

调用对象：

```
import pyproj
g = pyproj.Geod(ellps='WGS84') # Use WGS84 ellipsoid 
```

尝试通过参数名称调用它：

```
print g['a'] # the diameter parameter
TypeError: 'Geod' object has no attribute '__getitem__' 
```

测试索引：

```
print g[0] 
TypeError: 'Geod' object does not support indexing 
```

**更新：**调用`print dir(g)`：

```
print dir(g)
['__class__', '__delattr__', '__dict__', '__doc__', '__format__', '__getattribute__', '__hash__', '__init__', '__module__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__', '_fwd', '_inv', '_npts', 'a', 'b', 'es', 'f', 'fwd', 'initstring', 'inv', 'npts', 'sphere'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:19:04.710

您在寻找[`getattr`](http://docs.python.org/2/library/functions.html#getattr)内置功能吗？

# c++ - 成员变量继承

> ID：15497953
> 
> 赞同：1
> 
> 时间：2013-03-19T11:15:23.837
> 
> 标签：c++

我有这段代码，注意有两行被注释掉了

```
#include <iostream>

class foo {
public:
    foo();
    int i;
};

class bar: foo {
public:
    bar();
    //int i;
};

foo::foo()
{
    i = 2;
}

bar::bar()
{
    i = 4;
}

int main()
{
    bar *b = new(bar);
    //std::cout << "bi = " << b->i << std::endl; /*line 28*/
    foo *f = (foo*) b;
    std::cout << "fi = " << f->i << std::endl;
} 
```

注释掉这两行，代码编译，输出为

```
fi = 4 
```

两行未注释，代码编译，输出为

```
bi = 4

fi = 2 
```

只有在类栏中的 i 声明被注释掉，编译失败

```
var.cc: In function ‘int main()’:

var.cc:6:7: error: ‘int foo::i’ is inaccessible

var.cc:28:30: error: within this context 
```

我理解前两种情况，但我不理解这个编译错误。为什么是

变量“i”可以从 bar 构造函数中访问，但不能从 bar 指针访问？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T11:17:47.090

在私有继承中，基类的所有成员都成为`private`派生类的成员。请注意，对于类，默认继承是`private`您未指定任何继承。

由于`i`作为 的`private`成员`bar`，它可以在成员函数内部访问，`bar::bar()`但不能从成员函数外部访问。

**好读：**

[什么是访问说明符？我应该以私有、受保护还是公共继承？](https://stackoverflow.com/questions/5447498/what-are-access-specifiers-should-i-inherit-with-private-protected-or-public)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T11:20:42.203

原因是您使用的是**私有继承**。

对于所有`class`es，`private`是默认的访问修饰符。这意味着`private`除非另有说明，否则成员和基础都是。

但是，对于 a `struct`，默认值为`public`. `class`事实上，这是 a和 a之间的唯一区别`struct`。

因此，在编写 时`class bar: foo`，这等价于`class bar: private foo`。

要解决此问题，您需要执行`class bar: public foo`或`struct bar: foo`，这两者在您的示例中是等效的（因为您没有使用默认访问修饰符的成员）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T11:21:48.763

您应该直接指定字段的名称范围，如果它们在不同的类中具有相同的名称：

```
struct s1
{
  int i;
};

struct s2 : public s1
{
  int i;
};

int main()
{
  s2 v;

  v.s1::i = 1;
  v.s2::i = 2;

  std::cout << v.s1::i << v.s2::i << std::endl;

  return 0;
} 
```

输出将是 12

# ruby-on-rails - 每当 gem 使用跑步者出现问题时

> ID：15497959
> 
> 赞同：0
> 
> 时间：2013-03-19T11:15:56.820
> 
> 标签：ruby-on-rails, crontab, whenever, runner

控制器：

```
 class CronjobsController < ApplicationController
      def just_check
        meeting_id = 1
        UserMailer.upcoming_meeting_email_twelve_hours_before(meeting_id).deliver
      end
    end 
```

模型：

```
 class Cronjob < ActiveRecord::Base
      def self.just_check
        meeting_id = "meeting.id"
        UserMailer.upcoming_meeting_email_twelve_hours_before(meeting_id).deliver
      end
    end 
```

日程安排.rb

```
 every 2.minute do
      runner "Cronjob.just_check", :environment => "development"
    end 
```

但问题是每**2 分钟**后，跑步者无法调用模型方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:32:52.970

Have you updated the **crontab** with the jobs in **schedule.rb** file.

Update the crontab with the following command

```
whenever --update-crontab --set environment=development 
```

If you updated properly, then can u please past the jobs of crontab.

You can get the crontab jobs by **crontab -l**. And also check the log file for any error messages.

# linux - 在Linux中查找最小文件的名称？

> ID：15497965
> 
> 赞同：3
> 
> 时间：2013-03-19T11:16:11.507
> 
> 标签：linux, filesize

假设您必须在目录中找到第 4 个最小（非隐藏）文件的名称

执行此操作的正确命令是什么？假设我是一个只知道`ls -l`, `head`, `tail`, `line`, 和`awk '{print}'`语句的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T11:20:53.540

From `man ls`：`-S`按大小降序对输出进行排序，`-r`反转输出的顺序

所以我的解决方案看起来像

```
ls -rS | sed -n '4p' 
```

或者，或者，

```
ls -rS | awk 'NR==4' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T12:40:48.950

解析`ls`是[不安全](http://mywiki.wooledge.org/ParsingLs)的，因为处理文件名中的空格和换行符等奇怪字符既困难又容易出错。

我建议使用以下更强大的方法，因为它使用以空值结尾的行尾。

```
count=0
while IFS= read -r -d '' line; do
    ((++count == 4)) && echo "${line#* }" && break
done < <(find . -type f -maxdepth 1 -printf '%s %p\0' | sort -zn) 
```

# c# - .replace 替换错误的值

> ID：15497966
> 
> 赞同：2
> 
> 时间：2013-03-19T11:16:11.550
> 
> 标签：c#

我正在研究一种创建名为 SQL 的字符串构建器并使用 SQL.Replace 将部分内容替换为值的方法。

在调试期间，这些值是它们应该的值。直到我到达 .WriteToDatabase(SQL.ToString()); 部分然后这些值似乎被我分配给它们的数字所取代。

因此，例如，我有字符串班次 = 早班，直到我到达 .WriteToDatabase。我尝试在字符串生成器和 Sql 中替换 positining，但没有任何乐趣。代码

```
 public static void InsertPumaLadleControlProcessMonitoring(string ladleNo, string shift1, string LadleTemp, string Source, string Destination1, string Destination2, string Destination3, string Destination4, string pourTime, string RodsTibor, string Rodsr, string chunksMg, string DegasCycleTime, string Denisty, string OOT)
    {
        try
        {
            string operatorID = clsPublic.loggedInUserId;
            StringBuilder SQL = new StringBuilder(System.Configuration.ConfigurationManager.AppSettings.Get("InsertPumaLadleControlProcessMonitoring"));
            SQL = SQL.Replace("param1", ladleNo);
            SQL = SQL.Replace("param2", LadleTemp);
            SQL = SQL.Replace("param3", Source);
            SQL = SQL.Replace("param4", Destination1); 
            SQL = SQL.Replace("param5", Destination2);
            SQL = SQL.Replace("param6", Destination3);
            SQL = SQL.Replace("param7", Destination4);
            SQL = SQL.Replace("param8", pourTime);
            SQL = SQL.Replace("param9", Rods);
            SQL = SQL.Replace("param10", Rodsr);
            SQL = SQL.Replace("param11", chunksMg);
            SQL = SQL.Replace("param12", DegasCycleTime);
            SQL = SQL.Replace("param13", Denisty);
            SQL = SQL.Replace("param14", OOT);
            SQL = SQL.Replace("param15", shift1);

            clsPublic.sqlDB.WriteToDatabase(SQL.ToString());
        }
        catch (Exception e)
        {
            //clsPublic.appLog.Error("Cannot add Record");
            //throw new Exception("Cannot add record");
            MessageBox.Show("Cannot Add Record" + e);
        }
    } 
```

所以 Shift 1 是 = Moring Shift 但是当它到达 .WriteToDatabase(SQL.ToString()); 时它似乎变成了 15 任何人有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T11:18:29.737

您应该使用参数，而不是用查询中的值替换它们的名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T11:19:27.457

`SQL.Replace("param1", ladleNo);`将替换所有出现的`"param1"`，甚至是`"param10"`等中的出现`"param11"`。

话虽如此：您确实应该使用参数。

# python - Pylab 不会“绘制”高度为 0 的条形图

> ID：15497968
> 
> 赞同：1
> 
> 时间：2013-03-19T11:16:14.013
> 
> 标签：python, matplotlib

我正在尝试使用以下代码绘制条形图：

```
import pylab as p
first = ["2013-02-05", "2013-02-12", "2013-02-19", "2013-02-26", "2013-03-05", "2013-03-12"]

second = [0, 0, 0, 25, 35, 0]

fig = p.figure()
ax = fig.add_subplot(1,1,1)
N = len(second)
ind = range(N)
ax.bar(ind, second, facecolor='#777777', align='center', ecolor='black')
ax.set_xticklabels(first)
fig.autofmt_xdate() 
```

结果在这里（抱歉，还不能发布图片）： http: [//oi48.tinypic.com/vzxah3.jpg](http://oi48.tinypic.com/vzxah3.jpg)

如您所见，省略了值为 0 的条形。我只想要那里的空闲空间。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:30:54.310

如何将 0 更改为 0.0001 by `numpy.clip()`？

```
import pylab as p
first = ["", "2013-02-05", "2013-02-12", "2013-02-19", "2013-02-26", "2013-03-05", "2013-03-12"]

second = [0.0, 0.0, 0, 25, 35, 0]

fig = p.figure()
ax = fig.add_subplot(1,1,1)
N = len(second)
ind = range(1, N+1)
ax.bar(ind, np.clip(second, 0.001, np.inf), facecolor='#777777', align='center', ecolor='black', )
ax.set_xticklabels(first)
fig.autofmt_xdate() 
```

![在此处输入图像描述](../Images/b81fa6b0b3ceaf55652a82977bfb65b9.png)

# iphone - 导航栏消失

> ID：15497969
> 
> 赞同：-1
> 
> 时间：2013-03-19T11:16:14.197
> 
> 标签：iphone

我在根视图控制器的导航栏上有一个右栏按钮。这是代码

```
- (void)viewWillAppear:(BOOL)animated
{

    [self.navigationItem setTitle:@"Contacts"];

UIBarButtonItem *addbtn = [[UIBarButtonItem alloc]initWithTitle:@"Add Contact"      style:UIBarButtonItemStyleBordered target:self action:@selector(btnClick:)];
    self.navigationItem.rightBarButtonItem = addbtn;

    [tblview reloadData];
} 
```

当我单击该按钮时，我确实成功导航到下一个视图，但是当我返回根视图控制器时，导航栏消失了。请帮助我，因为我是 iphone 应用程序开发的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:46:23.500

可能是您将导航栏隐藏在 nextView 中

所以只需在 nextView 中删除这一行

```
[self.navigationController setNavigationBarHidden:YES]; 
```

# mysql - 使用 UNION 时 ORDER BY 和 LIMIT 不起作用

> ID：15497970
> 
> 赞同：0
> 
> 时间：2013-03-19T11:16:15.027
> 
> 标签：mysql, sql, database, union

这是我的查询：

```
mysql_query("SELECT userid FROM messages WHERE userid<>'$myid' AND friendid='$myid' AND status=1 UNION SELECT friendid FROM messages WHERE userid='$myid' AND friendid<>'$myid' AND status=1"); 
```

我想添加分页，所以我需要限制我发消息的朋友数量。但是每当我添加 LIMIT 时，它都会显示错误。另外我想先显示最新消息`ORDER BY time DESC`，但这也不起作用。帮助 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T11:21:40.370

将该查询包含在子查询和`ORDER BY ... LIMIT...`外部查询中：

```
SELECT *
FROM
(
    SELECT userid 
    FROM messages 
    WHERE userid   <> '$myid' 
      AND friendid = '$myid' 
      AND status = 1 
    UNION 
    SELECT friendid 
    FROM messages
    WHERE userid = '$myid' 
      AND friendid <> '$myid' 
      AND status = 1
) AS sub
ORDER BY ...
LIMIT ...; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T11:19:50.043

试试吧

```
SELECT DISTINCT userid FROM... 
```

# c# - 为 .net 3.5 编译时，AMO-Assembly 需要很长时间来初始化

> ID：15497971
> 
> 赞同：1
> 
> 时间：2013-03-19T11:16:19.070
> 
> 标签：c#, .net, ssas

我正在用 C# 开发一个小型应用程序，以使用 Analysis Services 管理对象模型 (AMO) 来管理 Analysis Services 多维数据集分区。因此，我的应用程序使用`Microsoft.AnalysisServices.dll`SQL Server 2008 R2 或 2012 部署的程序集。当我将 .net 4.0 或 4.5 设置为目标框架时，一切正常。但是，目标系统只有 3.5 可用（我们必须忍受这个），当我将它设置为目标框架时，指令

`Server OLAPServer = new Server();`

大约需要 10 秒。在此期间，我的应用程序窗口冻结。之后，我可以成功`.connect()`到我的本地 SSAS 实例。

我使用 SQL Server 2008 R2 或 2012 的 dll 都没关系，两者都会出现问题。当我更改为目标框架 4.0 或 4.5 时，初始化在不到一秒的时间内完成。如果这很重要，我使用的是 Visual Studio 2012。

这段时间发生了什么？在仍然使用 .net 3.5 的同时可以缩短它吗？

我可以将初始化移动到一个单独的线程以避免窗口冻结。但我更喜欢初始化不需要很长时间的解决方案。

谢谢你的帮助！

# java - 这是使用 ThreadPoolExecutor 的正确方法吗？

> ID：15497973
> 
> 赞同：2
> 
> 时间：2013-03-19T11:16:23.357
> 
> 标签：java, multithreading, concurrency, executor

我试图让线程池执行器工作，只是想知道我是否在以下代码的某个地方出错了：

```
public class testPool implements Runnable {

    static Executor pooledExecutor = null;
    private Threat thread = null;

    private testPool(int minThreadPoolSize,
                     int initThreadPoolSize,
                     int maxThreadPoolSize,
                     int threadKeepAliveTime,
                     int queueCapacity) throws Exception {

        pooledExecutor = new ThreadPoolExecutor(initThreadPoolSize,
                                    maxThreadPoolSize,
                                    (long) (1000 * threadKeepAliveTime),
                                    TimeUnit.MILLISECONDS,
                                    new LinkedBlockingQueue<Runnable>(queueCapacity));

        this.thread = new Thread(this);
        this.thread.setName("testThread");

        try {
              this.thread.setDaemon(true);
        } catch (Exception e) {
           // DO Something
        }
    }

    public void run() {
         while(true){
            try {
                // code to get a testobject
                pooledExecutor.execute(testObject);
             } catch (Exception e) {
                 //Do something
             } finally {
              //if shutdown parameter is true
              break
            }
          }
      }

 } 
```

基本上，我不确定这个实现是否真的会创建线程？还是我需要使用线程工厂？在我使用 pooledexecuter 之前，它有一个 createThreads() 方法，但我看不到这样的东西。

还有任何理由为什么有人想要设置最小线程池大小

任何帮助/建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:36:46.147

除非另有说明，否则使用在同一线程组中创建所有线程`ThreadPoolExecutor`的默认值。`ThreadFactory`

如果正在运行的线程少于`corePoolSize`线程，则会创建一个新线程来处理每个传入请求，即使其他工作线程处于空闲状态也是如此。Keep-alive 不适用于核心线程。**一旦创建了核心线程，执行器只会在队列已满时**创建额外的线程（最多`maxPoolSize`） 。

 **如果在有 maxPoolSize 个线程**且**队列已满时提交了新任务，则该任务将被*拒绝*。“拒绝”的行为由`RejectedExecutionHandler`. 默认情况下，拒绝处理程序是`AbortPolicy`（在拒绝时抛出运行时 RejectedExecutionException）。您应该分析使用这样的策略是否正确，或者设置另一种策略，例如`CallerRunsPolicy`（即在已调用的线程中运行任务`submit`，而不是排队）。**

# php - 使用 PHP 读取 UPS XML

> ID：15497975
> 
> 赞同：2
> 
> 时间：2013-03-19T11:16:26.680
> 
> 标签：php, xml, api, simplexml, ups

我一直在寻找正确的方法来读取 UPS API 返回给我的 XML。我终于找到了如何从要发送的包裹中请求费率，现在我得到了带有响应的 XML。

我对 XML 不是很熟悉，但我可以通过简单的示例理解它是如何工作的。

XML 响应是：

```
<?xml version="1.0" encoding="UTF-8"?>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
<soapenv:Body>
    <rate:RateResponse xmlns:rate="http://www.ups.com/XMLSchema/XOLTWS/Rate/v1.1">      
        <common:Response xmlns:common="http://www.ups.com/XMLSchema/XOLTWS/Common/v1.0">
            <common:ResponseStatus>
                <common:Code>1</common:Code>
                <common:Description>Success</common:Description>
            </common:ResponseStatus>
            <common:Alert>
                <common:Code>110971</common:Code>
                <common:Description>Your invoice may vary from the displayed reference rates</common:Description>
            </common:Alert>
            <common:TransactionReference/>
        </common:Response>
        <rate:RatedShipment>
            <rate:Service>
                <rate:Code>11</rate:Code>
                <rate:Description/>
            </rate:Service>
            <rate:RatedShipmentAlert>
                <rate:Code>110971</rate:Code>
                <rate:Description>Your invoice may vary from the displayed reference rates</rate:Description>
            </rate:RatedShipmentAlert>
            <rate:BillingWeight>
                <rate:UnitOfMeasurement>
                    <rate:Code>KGS</rate:Code>
                    <rate:Description>Kilograms</rate:Description>
                </rate:UnitOfMeasurement>
                <rate:Weight>3.0</rate:Weight>
            </rate:BillingWeight>
            <rate:TransportationCharges>
                <rate:CurrencyCode>EUR</rate:CurrencyCode>
                <rate:MonetaryValue>21.85</rate:MonetaryValue>
            </rate:TransportationCharges>
            <rate:ServiceOptionsCharges>
                <rate:CurrencyCode>EUR</rate:CurrencyCode>
                <rate:MonetaryValue>1.40</rate:MonetaryValue>
            </rate:ServiceOptionsCharges>
            <rate:TotalCharges>
                <rate:CurrencyCode>EUR</rate:CurrencyCode>
                <rate:MonetaryValue>23.25</rate:MonetaryValue>
            </rate:TotalCharges>
            <rate:RatedPackage>
                <rate:Weight>1.0</rate:Weight>
            </rate:RatedPackage>
            <rate:RatedPackage>
                <rate:Weight>2.0</rate:Weight>
            </rate:RatedPackage>
        </rate:RatedShipment>
</rate:RateResponse>    
</soapenv:Body>
</soapenv:Envelope> 
```

我尝试了一个示例来获取值，`simplexml_load_file();`并且可以从标签中获取值（一个非常简单的示例）。但是当我用那个尝试它时，我什么也得不到，因为它说一个非对象类型的错误。

如果有人知道如何阅读该 XML 并教我如何去做，我将不胜感激。

感谢您花时间阅读本文！

PS：当我尝试一个简单的例子时，我尝试了这个并且工作：

```
$school = simplexml_load_file('XOLTResult.xml'); //where is the xml
echo $school->students->student[0]; //finding the first student nam 
```

这工作正常，但是当我试图获得例如 Response->RatedShipment[0]->Service->Code; */*获取第一个*/*，出现错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T11:38:04.920

你为什么不试试 SoapClient 接口？

```
$client = new SoapClient('http://host/api/soap/?wsdl');

// If somestuff requires api authentification,
// then get a session token
$session = $client->login('apiUser', 'apiKey'); 
```

[http://php.net/manual/en/class.soapclient.php](http://php.net/manual/en/class.soapclient.php)

# user-interface - 有谁知道如何刷新我的Q？

> ID：15497982
> 
> 赞同：-3
> 
> 时间：2013-03-19T11:16:50.533
> 
> 标签：user-interface, python-2.7, tkinter

我创建了一个数学游戏，当我加载第一个问题时它很好，如果我得到正确的答案，分数会增加 100，但是当它加载下一个问题时，它会直接将它加载到旧问题的顶部并且分数没有更长的增加。

我的计数器也无法结束游戏。

任何人都可以帮忙吗？

```
 def do_question(self):
            ##    def create_widgets(self):
                    #counter here if over 5 then die
                    counter = 0
                    counter += 1
                    #counter + 1
                    if counter > 5:
                        import ITRIED

                SQL = 'SELECT * FROM tblQuestion'
                cursor = Databaseconnector.SELECT(SQL)
                rows = cursor.fetchall()
                random_row = random.choice(rows)

                print random_row.QuestionID, random_row.Question, random_row.Hint, random_row.A1, random_row.A2, random_row.A3, random_row.A4, random_row.CorrectAnswer

                self.a1button = Tkinter.Button(self, background="blue",foreground="white", text = (random_row.A1), command = self.QUESTION1)
                self.a1button.grid(row = 9, column = 1, sticky = 'W') 
```

问题检查器：

```
 def QUESTION1(self):
                score = int(self.label7['text'])
                if self.a1button['text'] == self.label6['text']:
                    tkMessageBox.showinfo("CORRECT", "WELL DONE")
                    score = +100
                    self.do_question()
                else:
                    tkMessageBox.showinfo("INCORRECT", "YOU GOT IT WRONG :/")
                    label7 = +100
                    self.do_question()
                self.label7.config(text=str(score)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:30:15.340

您的计数器永远不会超过 5，因为每次调用 do_question 时都会将其重置为零。另外，按照您的编码方式，计数器是一个局部变量。您需要做的第一件事是使 counter 成为实例变量（即：self.counter），这样它就不再是单个函数的本地变量。

score 变量也是如此——它是函数的局部变量，而不是实例变量。

至于为什么它“直接将它加载到旧的之上”，那是因为你告诉它这样做。在 do_question 中，您使用网格将按钮放置在第 9 行第 1 列。您永远不会删除第 9 行第 1 列可能已经存在的内容。在提出新问题之前，您应该在上一个问题上调用`grid_remove`或`grid_forget`可见的。

# sqlite - 如何在 Sqlite 中向现有表添加唯一约束？

> ID：15497985
> 
> 赞同：12
> 
> 时间：2013-03-19T11:17:00.500
> 
> 标签：sqlite

我在 Sqlite 中有一个现有的表。如何为其添加唯一约束？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-19T11:28:36.580

**您不能在 SQLite 中向现有表添加约束**，（在 SQL 中有一个选项可以这样做）。您需要使用必要的约束重新创建表。

在 sqlite 中，alter table 命令只有几个选项可用。请检查图像：

![更改表](../Images/a2dd56db5d3dd2fa8b31a6b0e36491d7.png)

还要检查[Sqlite 组织](http://www.sqlite.org/lang_altertable.html)参考。

* * *

### 编辑

但是，您可以为表添加唯一索引以达到相同的效果。因此，您可以使用以下查询来实现：

```
CREATE UNIQUE INDEX your_unique_index ON your_table(column_name); 
```

> 在大多数情况下，UNIQUE 和 PRIMARY KEY 约束是通过在数据库中创建唯一索引来实现的。

参考：[SQLite 约束](https://www.sqlite.org/lang_createtable.html#constraints)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-02-09T20:52:45.883

您可以通过创建唯一索引来添加约束：

```
CREATE UNIQUE INDEX ux_friend_name ON friend(name); 
```

其中`ux_friend_name`是唯一索引名称，`friend(name)`- 将受此约束影响的表及其列。

[你可以在这里](https://www.sqlite.org/lang_createtable.html#constraints)阅读更多。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-19T11:21:07.120

我假设您使用的是 FireFox 的 SQLiteManager，请重新创建表，通常当您已经创建表时它不允许更改约束。

**注意**- 它也可以使用代码来完成，这是另一种方式。

编辑见下图

![在此处输入图像描述](../Images/81d05b21f278bd0e23bb2210ae4a4817.png)

# c# - 为什么 IoC 会影响控制器的创建以及如何解决这个问题？

> ID：15497990
> 
> 赞同：1
> 
> 时间：2013-03-19T11:17:20.190
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

我的 ASP .NET MVC 应用程序中有一个奇怪的问题。我有一些控制器和一些控制器`IHelper`，它是`Helper`这个控制器的实现。当我像下面这样使用这个助手时：

```
public ActionResult SomeAction()
{
    var hepler = new Helper();
    helper.DoStuff();
    ...
} 
```

一切都好。但是当我尝试将此帮助器作为控制器的属性注入时：

```
public IHelper Helper { private get; set; }
...    
public ActionResult SomeAction()
    {            
        Helper.DoStuff();
        ...
    } 
```

在我的 IoC 配置类中，我有：

```
ObjectFactory.Initialize(x =>
          {
              // Helpers
              x.For<IHelper>().Use<Helper>();              
              ...
              x.FillAllPropertiesOfType<IHelper>().Use<Helper>();
              ...
          } 
```

问题是我在 IoC 配置类中使用 IoC 模式初始化了许多不同的助手、管理器、存储库和其他东西，并成功地注入到我的每个控制器中。但是当我尝试注入这个时`Helper`，我得到：

```
InvalidOperationException: An error occurred when trying to create a controller of type 'MyController'. Make sure that the controller has a parameterless public constructor. 
```

我知道问题出在 IoC 中，`Helper`因为我用 google 搜索[了这个](http://www.ryanonrails.com/2012/05/30/mvc3-make-sure-that-the-controller-has-a-parameterless-public-constructor/)，`Helper`从 IoC 配置类中删除，像使用它一样`var hepler = new Helper();`，一切正常。但我不明白问题出在哪里？以前有人见过这样的问题吗？我什至无法理解如何**确保控制器具有无参数的公共构造函数**，并且当一切都适用于另一个助手等时**，控制器属性之一的 IoC 初始化**可以相关联。

**编辑**
**_** 我正在使用 StructureMap IoC 框架和 ASP .NET MVC 4.0。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T11:30:53.937

对于初学者，您实际上并没有在这里使用依赖注入：

```
public IHelper Helper { private get; set; }
...    
public ActionResult SomeAction()
{
    var hepler = new Helper();
    helper.DoStuff();
    ...
} 
```

你已经创建了一个 type 的属性`IHelper`，也许你的 IoC 框架甚至试图用一个实现来填充那个属性，但是在你的 action 方法中你仍然只是直接实例化一个实例`Helper`而不使用注入的属性，所以你仍然有对`Helper`而不是的硬依赖`IHelper`。

更重要的是，您遇到的错误很可能取决于您使用的 IoC 框架和您使用的 ASP.NET MVC 版本。IoC*看起来*可能是 StructureMap，是这样吗？对于 MVC，它是哪个版本？

不同版本的 ASP.NET MVC 在其控制器构造函数中处理依赖关系解析的方式不同。例如，在 MVC 4 应用程序中，您可以创建 an 的实现`IDependencyResolver`并将其用于控制​​器。像这样的东西：

```
public class DomainDependencyResolver : IDependencyResolver
{
    private readonly IoCContainer Container;

    public DomainDependencyResolver(IoCContainer container)
    {
        Container = container;
    }

    public object GetService(Type serviceType)
    {
        if (serviceType.IsAbstract || serviceType.IsInterface)
            return Container.TryGetInstance(serviceType);
        else
            return Container.GetInstance(serviceType);
    }

    public IEnumerable<object> GetServices(Type serviceType)
    {
        return Container.GetAllInstances()
                        .Where(s => s.GetType() == serviceType);
    }
} 
```

这使用了一个通用`IoCContainer`实例（类似于 Common Service Locator），但如果您只想直接使用您的 IoC 实现，那可能没问题。主要是实现`GetService`，`GetServices`以便您的 IoC 容器返回任何请求类型的实现。然后，您将设置 ASP.NET MVC 以在应用程序启动（in ）中为其控制器使用此依赖关系解析器实现`Global.asax.cs`：

```
DependencyResolver.SetResolver(new DomainDependencyResolver(IoCContainerFactory.Current)); 
```

您唯一需要更改的是对 IoC 容器的引用。我正在使用我自己的通用版本，它是类型并且在一个`IoCContainer`名为. 您将使用您正在使用的任何框架，因此您只需要更改依赖解析器实现的构造函数以匹配您要传递的任何内容。`Current``IoCContainerFactory`

# jquery - 使用加拿大格式格式化 jQuery UI 日期选择器

> ID：15497998
> 
> 赞同：0
> 
> 时间：2013-03-19T11:17:39.717
> 
> 标签：jquery, jquery-ui

我似乎无法正确格式化我的日期。在加拿大，我们的日期为 dd/MM/yyyy

当我渲染我的文本框以保存日期时，它会像这样发出：

```
<input type="date" value="18/03/2013 12:00:00 AM" /> 
```

我知道如果我将日期选择器添加到此文本框，然后添加格式，则文本框的内容将被删除。所以我保存文本框的值，应用日期选择器，应用格式，然后设置日期：

```
var datepicker_default_val = $(this).val();
$(this).datepicker();
$(this).datepicker("option", "dateFormat", 'dd-mm-yy');
$(this).datepicker("setDate", datepicker_default_val); 
```

但是，当我设置日期时，文本框值注册为 24-10-2018。

有人知道我怎样才能让我的加拿大约会和日期选择器玩得很好吗？

谢谢，

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:06:01.727

你应该改变这一行：

```
var datepicker_default_val = $(this).val(); 
```

对此

```
var datepicker_default_val = new Date($(this).val()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T11:28:44.857

我找到了一个站点（[http://forums.devx.com/showthread.php?170104-Getting-date-in-dd-mm-yyyy-format-in-javascript](http://forums.devx.com/showthread.php?170104-Getting-date-in-dd-mm-yyyy-format-in-javascript)），解决方案是使用像这样的变量对其进行编码;

```
 var curr_date = date.getDate();
 var curr_month = date.getMonth();
 curr_month = curr_month + 1;
 var curr_year = date.getFullYear();

 // Now i can get my required date in my desired format. For Example,
 date= curr_date + '/'+ curr_month + '/'+ curr_year; 
```

我在编码日期时也这样做。希望能帮助到你 ：）