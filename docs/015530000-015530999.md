# StackOverflow 问答 15530000-15530999

# ruby-on-rails - 使用 ActiveRecord 上传图片需要多少个 Rails 模型？

> ID：15530005
> 
> 赞同：0
> 
> 时间：2013-03-20T17:00:35.963
> 
> 标签：ruby-on-rails, file-upload, carrierwave, rails-activerecord

我很难理解rails的mvc。

我的目标是一个带有上传选项的简单网站，由carrierwave 实现。我想要这个用于我的婚礼，这样客人就可以给我他们的照片而无需登录或其他任何事情，而且由于我有自己的 rails 服务器正在运行，我可以稍后通过 ftp 获取它们。

我能找到的所有示例都适用于两个模型：图库和图片。

但我永远不会有多个画廊，但最多有多个上传。

所以，我的问题是高度理论化的：

*我需要 ActiveRecord 的两个模型来处理图片，还是一个模型足以将图片作为“照片”类的实例来处理？*

**非常感谢您**为我指出好的代码方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:08:16.063

您应该只需要一个模型：`Picture`由于您只有一个画廊，因此您不需要将其设为模型。那只是`Pictures`数据库中所有内容的视图。然后您的控制器将执行三个操作：

*   `index`- 列出`Pictures`数据库中的所有内容。
*   `new`- 显示一个屏幕以上传新的`Picture`
*   `create`- 处理新的实际上传`Picture`

# java - 使用 Java 对象模仿 Matlab 结构

> ID：15530011
> 
> 赞同：3
> 
> 时间：2013-03-20T17:00:48.947
> 
> 标签：java, matlab, interop

这是我的问题（大图）。我有一个使用大型和复杂（我的意思是包含多层嵌套结构）Matlab 结构的项目。这是可以预见的缓慢（尤其是在尝试加载/保存时）。我试图通过将其中一些结构转换为 Java 对象来改进运行时。问题是这些 Matlab 结构中的数据在很多地方都可以访问，因此任何需要重写访问语法的东西都是禁止的。因此，我需要 Java 对象尽可能地模仿 Matlab 结构的行为，特别是在访问存储在其中的值时（这些值只设置在一个地方，因此 java 中缺少运算符重载来设置不是考虑因素）。

我遇到的问题（小图）在于从这些结构的数组中访问数据。例如，

```
person(1)
  .age = 20
  .name
    .first = 'John'
    .last = 'Smith

person(2)
  .age = 25
  .name
    .first = 'Jane'
    .last = 'Doe' 
```

Matlab 将允许您执行以下操作，

```
>>age = [person(1:2).age]
age = 
    20    25 
```

试图用Java完成同样的事情，

```
>>jperson = javaArray('myMatlab.Person', 2);
>>jperson(1) = Person(20, Name('John', 'Smith'));
>>jperson(2) = Person(25, Name('Jane', 'Doe'));
>>age = [jperson(1:2).age]
??? No appropriate method or public field age for class myMatlab.Person[] 
```

**有什么方法可以让 Java 对象模仿这种行为？** 我的第一个想法是简单地扩展[Person[] 类](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html#jls-10.8)，但这[似乎是不可能的，因为它是最终的。](https://stackoverflow.com/questions/8546500/why-isnt-there-a-java-lang-array-class-if-a-java-array-is-an-object-shouldnt)我的第二种方法是创建一个包含 Person 的 ArrayList 的包装类，但是我不相信这会起作用，因为调用

```
wrappedPerson(1:2) 
```

将被解释为对 WrappedPerson 类的构造函数调用或尝试访问不存在的 WrappedPerson 数组的元素（因为 java 不会让我覆盖 "()" 运算符）。任何见解将不胜感激。

我用于我的 java 类的代码是

```
public class Person {
  int _age;
  ArrayList<Name> _names;

  public Person(int age, Name name) {
    _age = age;
    _names.add(name);
  }

  public int age() {return _age;}
  public void age(int age) {_age = age;}
  public Name[] name() {return _names.toArray(new Name[0]);}
  public void name(Name name) { _names.add(name);}
}

public class Name {
  String _first;
  String _last;

  public Name(String first, String last) {
    _first = first;
    _last = last;
  }

  public int first() {return _first;}
  public void first(String firstName) {_first = firstName;}
  public int last() {return _last;}
  public void last(String lastName) {_last = lastName;}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T20:16:50.613

TL;DR：这是可能的，有一些花哨的 OOP M 代码技巧。可以使用在Java 包装类之上定义`()`的Matlab 包装类来改变其行为。但是由于固有的 Matlab 到 Java 的开销，它最终可能不会比普通的 Matlab 代码快，只是更加复杂和繁琐。除非您也将逻辑移到 Java 中，否则这种方法可能不会为您加快速度。`.``subsref`

我提前为我的啰嗦而道歉。

在您全力以赴之前，您可以对从您的 Matlab 代码调用的 Java 结构的性能进行基准测试。虽然 Java 字段访问和方法调用本身比 Matlab 快得多，但从 M 代码调用它们会产生大量开销，因此除非您将大量逻辑也推送到 Java 中，否则您很可能最终会速度净损失。每次您将 M 代码跨到 Java 层时，您都需要付费。看看这个答案的基准测试：[是 MATLAB OOP 慢还是我做错了什么？](https://stackoverflow.com/questions/1693429/is-matlab-oop-slow-or-am-i-doing-something-wrong/1745686#1745686)了解规模。（完全公开：这是我的答案之一。）它不包括 Java 字段访问，但由于自动装箱开销，它可能在方法调用的顺序上。如果您像示例中那样使用 getter 和 setter 方法而不是公共字段（即“良好”的 Java 风格）编写 Java 类，那么每次访问都会产生 Java 方法调用的成本，并且与纯 Matlab 结构相比，它会很*糟糕。*

综上所述，如果您想让该`x = [foo(1:2).bar]`语法在作为 Java 数组的 M 代码中工作`foo`，那基本上是可能的。和都在调用 Java 之前在 Matlab 中进行评估`()`。`.`您可以做的是在 Matlab OOP 中定义您自己的自定义 JavaArrayWrapper 类，对应于您的 Java 数组包装器类，并将您的（可能包装的）Java 数组包装在其中。让它覆盖`subsref`and`subsasgn`来处理`()`and `.`。对于`()`，对数组进行正常的子集化，将其返回包装在 JavaArrayWrapper 中。对于这种`.`情况：

*   如果包装的对象是标量，则照常调用 Java 方法。
*   如果包装的对象是一个数组，则对其进行循环，对每个元素调用 Java 方法，并收集结果。如果结果是 Java 对象，则将它们包装在 JavaArrayWrapper 中返回。

但。由于跨越 Matlab/Java 障碍的开销，这会很慢，可能比纯 Matlab 代码慢一个数量级。

为了使其快速工作，您可以提供一个相应的自定义 Java 类，该类包装 Java 数组并使用 Java 反射 API 提取每个选定数组成员对象的属性并将它们收集到一个数组中。关键是，当您在 Matlab 中执行“链式”引用时，像`x = foo(1:3).a.b.c`and`foo`是一个对象，它不会在它评估的地方进行逐步评估`foo(1:3)`，然后调用`.a`结果，依此类推。它实际上解析整个`(1:3).a.b.c`引用，将其转换为结构化参数，并将整个内容传递给负责解释整个链的`subsref`方法。`foo`隐式调用看起来像这样。

```
x = subsref(foo, [ struct('type','()','subs',{{[1 2 3]}}), ...
                   struct('type','.', 'subs','a'), ...
                   struct('type','.', 'subs','b'), ... 
                   struct('type','.', 'subs','c') ] ) 
```

因此，假设您可以预先访问整个引用“链”，如果`foo`是定义的 M 代码包装器类`subsasgn`，您可以将该整个引用转换为 Java 参数，并将其在单个方法调用中传递给您的 Java 包装器然后使用 Java Reflection 动态遍历包装数组，选择引用元素并执行链式引用，所有这些都在 Java 层内。例如，它会`getNestedFields()`像这样调用Java 类。

```
public class DynamicFieldAccessArrayWrapper {
    private ArrayList _wrappedArray;

    public Object getNestedFields(int[] selectedIndexes, String[] fieldPath) {
        // Pseudo-code:
        ArrayList result = new ArrayList();
        if (selectedIndexes == null) {
            selectedIndexes = 1:_wrappedArray.length();
        }
        for (ix in selectedIndexes) {
            Object obj = _wrappedArray.get(ix-1);
            Object val = obj;
            for (fieldName in fieldPath) {
                java.lang.reflect.Field field = val.getClass().getField(fieldName);
                val = field.getValue(val);
            }
            result.add(val);
        }
        return result.toArray(); // Return as array so Matlab can auto-unbox it; will need more type detection to get array type right
    }
} 
```

然后你的 M 代码包装类将检查结果并决定它是否是原始的，应该作为 Matlab 数组或逗号分隔的列表返回（即多个 argouts，用 收集`[...]`），或者应该包装在另一个 JavaArrayWrapper M 代码对象。

M 代码包装类看起来像这样。

```
classdef MyMJavaArrayWrapper < handle
    % Inherit from handle because Java objects are reference-y
    properties
        jWrappedArray  % holds a DynamicFieldAccessArrayWrapper
    end
    methods
        function varargout = subsref(obj, s)
            if isequal(s(1).type, '()')
                indices = s(1).subs;
                s(1) = [];
            else
                indices = [];
            end
            % TODO: check for unsupported indexing types in remaining s
            fieldNameChain = parseFieldNamesFromArgs(s);
            out = getNestedFields( jWrappedArray, indices, fieldNameChain );
            varargout = unpackResultsAndConvertIfNeeded(out);
        end
    end
end 
```

编组和解组 subsasgn 调用的值所涉及的开销可能会超过 Java 位的任何速度增益。

您可以通过用`subsasgn`在 C 中执行结构编组和解组的 MEX 实现替换您的 M 代码实现、使用 JNI 构建 Java 对象、调用 getNestedFields 并将结果转换为 Matlab 结构来消除这种开销。这远远超出了我可以举的例子。

如果这对你来说有点可怕，我完全同意。您在这里遇到了语言的边缘，并且尝试从用户空间扩展语言（尤其是提供新的句法行为）真的很难。我不会认真地在生产代码中做这样的事情；只是想勾勒出你正在寻找的问题所在的区域。

您是否正在处理这些深度嵌套结构的同构数组？也许可以将它们转换为“平面组织”结构，而不是具有标量字段的结构数组，而是具有数组字段的标量结构。然后，您可以在纯 M 代码中对它们进行矢量化操作。这将使事情变得更快，尤其是使用`save`and`load`时，每个 mxarray 的开销都会增加。

# wix - 有没有办法从 CMD 卸载 Wix 包

> ID：15530012
> 
> 赞同：3
> 
> 时间：2013-03-20T17:00:49.783
> 
> 标签：wix

我有一个安装一个 MSI 的 Wix Bundle。现在我想自动卸载 Bundle。

我试过 msiexec /x ，它只卸载了 MSI 和 wmic ，它找不到 Bundle 。

有没有办法自动卸载 Wix 包？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-20T17:21:02.790

使用开关运行原始的 bundle.exe `-uninstall`。您还可以指定`-quiet`或`-passive`获取更少的 UI。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T17:20:38.523

由于捆绑包是标准 exe，您需要使用卸载命令行参数实际运行它：

```
C:\BundleName.exe -uninstall 
```

# bash - 浏览脚本文件并将结果附加到日志文件

> ID：15530013
> 
> 赞同：0
> 
> 时间：2013-03-20T17:00:50.200
> 
> 标签：bash

我正在尝试编写一个脚本，该脚本通过 5 个脚本文件并使用 t1-5 的内容作为输入来执行它们，并将输出附加到日志文件中，但它似乎不起作用。我正在尝试增加一个变量 i 代表 t 变量的数量。我这样做对吗？这个输出重定向是否确保所有结果都附加到同一个文件中？

```
t1=`cat t1`
t2=`cat t2`
t3=`cat t3`
t4=`cat t4`
t5=`cat t5`

cd ..
cd tmp

i=1

for g in `ls`
do
    sh "$g" "t$i" > 0572log 
    i=$((i + 1)
done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:17:07.683

首先，`i=$((i + 1)`应该是`i=$((i + 1))`。

其次，`> 0572log`应该是`>> 0572log`为了追加而不是覆盖。

第三，如果您希望多次运行脚本，最好将其放在`0572log`其他地方（例如`../0572log`），而不是放在您的`tmp`目录中。否则，下次运行脚本时，它会尝试执行`0572log`.

`$g`如果您有没有空格的简单文件名，`t$i`则不需要引号。

# javascript - jquery在文本框中只输入数字

> ID：15530018
> 
> 赞同：-4
> 
> 时间：2013-03-20T17:01:03.707
> 
> 标签：javascript, jquery

需要限制使用 jquery 在文本框中输入字母和特殊字符。只需输入数字。如何在 jquery 中为 jsf 中的文本框使用 keypress() 功能？

代码 ：

```
 <table>
         <tr>
          <h:inputlabel value="Actual"></h:inputlabel>
           <td>
              <h:inputtext id="Actual" styleClass="input-tex" value="#bean.customer"></h:inputtext>
            <td>
         </tr>
       <table> 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:15:23.247

你可以在 onkeypress 函数中试试这个

```
function validateDigits(){
    var str = "54665";
var re = /^\d+$/;
alert(str.match(re)!=null);
} 
```

如果验证成功，则返回 true，否则返回 false

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:04:39.157

我确信有一种更优雅的方式，但我使用：

```
 $('#parentobject').on('keypress', '#inputid', function (e) {
        if (isNaN(e.currentTarget.value) == true) {
            var textlen = $(this).val().length;

            $(this).val($(this).val().substring(0, (textlen - 1)));

            return false;
        }
    }); 
```

# c# - 在 C# 中锁定信号量时是否可以显示等待消息？

> ID：15530021
> 
> 赞同：2
> 
> 时间：2013-03-20T17:01:06.023
> 
> 标签：c#

我目前正在制作一个程序来模拟视觉 C# 中的一组 ATM。如果已经从其他位置访问过它，它应该阻止某人访问他们的帐户。是否可以在信号量等待时显示该帐户已被访问的消息？

这是使用信号量的代码部分：

```
private void button1_Click(object sender, EventArgs e)
        {
            count++;
            if (count == 1)
            {
                account = findAccount();
                if (findAccount() != 5)
                {
                    textBox1.Text = "Please Enter Your Pin";

                }
                else
                {
                    textBox1.Text = "Please Enter Your Account Number";
                    count = 0;
                }
                textBox2.Clear();
            }
            if (count == 2)
            {
                if (findPin(account) == true)
                {
                    semaphore.WaitOne();
                    textBox1.Text = "1: Take Out Cash \r\n2: Balance \r\n3: Exit";
                }
                else
                {
                    semaphore.Release();
                    textBox1.Text = "Please Enter Your Account Number";
                    count = 0;
                }
                textBox2.Clear();
            }
            if (count == 3)
            {
                atm();
            }
            if (count == 4)
            {
                withdraw();
            }
            if (count == 5)
            {
                int value = Convert.ToInt32(textBox2.Text);
                customWithdrawl(value);
            }

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:07:52.477

考虑对[WaitOne](http://msdn.microsoft.com/en-us/library/cc189907.aspx)进行两次调用。第一次调用的超时时间为零并返回一个布尔值，它会告诉您是否获得了信号量，或者其他人是否仍然拥有它。从那里可能会发生两件事：

1）如果其他人拥有它，弹出一条消息说“其他人拥有信号量”并再次调用[WaitOne](http://msdn.microsoft.com/en-us/library/58195swd.aspx)，但没有超时（就像你现在正在做的那样）。对 WaitOne 的第二次调用返回后，关闭一秒钟前弹出的窗口。

2) 如果您对 0 超时的 waitOne 调用返回 true，那么您在第一次尝试时就获得了信号量。无需弹出窗口。

例子：

```
if( semaphore.WaitOne(0) ) //This returns immediately
{
    //We own the semaphore now.
    DoWhateverYouNeedToDo();
}
else
{   
    //Looks like someone else already owns the semaphore.
    PopUpNotification();
    semaphore.WaitOne(); //This one will block until the semaphore is available
    DoWhateverYouNeedToDo();
    CloseNotification();
}

semaphore.Release(); 
```

请注意，这里还隐藏着一些其他问题。

1.  您可能希望使用 try/finally 块来释放信号量，以确保它在所有异常路径中都被释放。
2.  从 GUI 线程调用 semaphore.WaitOne() 也可能是个坏主意，因为应用程序在等待时将变得无响应。事实上，`PopUpNotification()`如果在执行第二次等待时挂起 GUI 线程，您可能看不到结果。考虑在第二个线程上进行长时间等待，并在拥有信号量后在 GUI 线程上引发事件

考虑以下设计来解决问题 2：

```
private void button1_Click(object sender, EventArgs e)
{
    if(AcquireSemaphoreAndGenerateCallback())
    {
        //Semaphore was acquired right away.  Go ahead and do whatever we need to do
        DoWhateverYouNeedToDo();
        semaphore.Release()
    }
    else
    {
        //Semaphore was not acquired right away.  Callback will occur in a bit
        //Because we're not blocking the GUI thread, this text will appear right away
        textBox1.Text = "Waiting on the Semaphore!";

        //Notice that the method returns right here, so the GUI will be able to redraw itself
    }
}

//This method will either acquire the semaphore right away and return true, or
//have a worker thread wait on the semaphore and return false.  In the 2nd case,
//"CallbackMethod" will run on the GUI thread once the semaphore has been acquired
private void AcquireSemaphoreAndGenerateCallback()
{
    if( semaphore.WaitOne(0) ) //This returns immediately
    {
        return true; //We have the semaphore and didn't have to wait!
    }
    else
    {
        ThreadPool.QueueUserWorkItem(new WaitCallback(Waiter));
        return false; //Indicate that we didn't acquire right away
    }
}

//Wait on the semaphore and invoke "CallbackMethod" once we own it.  This method
//is meant to run on a background thread.
private void Waiter(object unused)
{
    //This is running on a separate thread
    Semaphore.WaitOne(); //Could take a while

    //Because we're running on a separate thread, we need to use "BeginInvoke" so
    //that the method we're calling runs on the GUI thread
    this.BeginInvoke(new Action(CallbackMethod));
}

private void CallbackMethod()
{
    textBox1.Text = string.Empty; //Get rid of the "Waiting For Semaphore" text.  Can't do this if we're not running on the GUI thread
    DoWhateverYouNeedToDo();
    semaphore.Release();
} 
```

现在，这种解决方案也可能充满危险。跟踪程序的执行有点困难，因为它从一个方法跳到另一个方法。如果您有异常，则可能很难从中恢复并确保您的所有程序状态都是正确的。您还必须通过所有这些方法调用来跟踪帐号和密码等内容。为了做到这一点，Waiter 和 CallbackMethod 可能应该采用一些参数来跟踪传递到每个步骤的状态。也没有办法中止等待（超时）。它可能会起作用，但不应将其放入任何生产代码中，因为它太难以维护或扩展。

如果你真的想把它做对，你应该考虑将 ATM 逻辑封装在一个对象中，该对象将引发 GUI 可以订阅的事件。你可以有一个`ATM.LogInAsync(Account,Pin)`可以调用的方法。此方法将立即返回，但一段时间后，ATM 类上的一个事件（如“LogInComplete”）将触发。此事件将有一个自定义 EventArgs 对象，该对象将包含用于跟踪发生了哪些登录的数据（主要是帐号）。这称为[基于事件的异步模式](http://msdn.microsoft.com/en-us/library/ms228969.aspx)

或者，如果您使用的是 C# 5.0，则可以在方法中使用新的[Async/Await](http://msdn.microsoft.com/en-us/library/vstudio/hh156513.aspx)语法`AcquireSemaphoreAndGenerateCallback()`。这可能是最简单的方法，因为编译器将为您处理大部分复杂性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T17:04:40.187

是的，您可以在 Wait 方法之前显示您的消息/表单/消息框。然后当它收到解除封锁的信号时，你隐藏你的信息。

# java - 在 IDE 中手动构建和使用 Ant / Maven 有什么区别？

> ID：15530024
> 
> 赞同：3
> 
> 时间：2013-03-20T17:01:09.707
> 
> 标签：java, deployment, build

嗨，大多数时候我将使用 IDE 选项 Build/Clean 构建 Java 应用程序，然后将 JAR/WAR/EAR 文件导出到桌面，之后将使用服务器管理 url/console 在服务器中部署。但在某些组织中，会在 linux/windows 中使用 ant/maven 脚本构建应用程序。使用IDE和外部脚本有什么区别吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:08:17.297

像 ANT 这样的外部脚本可以为您自动执行任务。当您所做的只是构建一个 .JAR 时，这似乎无关紧要，但是当您开始做更多事情时，它会非常有帮助。

自动构建可以为您做到这一点：

*   运行您的单元测试并创建一个您可以查看的报告。
*   编译您的项目（“构建”）
*   将 .JAR 移动到不同的目录。
*   通过 FTP 上传到您的服务器。

这意味着您当前所做的一切都可以通过双击 Ant 脚本来完成。Eclipse 甚至支持 Ant，因此您可以在 IDE 中编辑和运行脚本。

* * *

只是关于自动化哲学的编辑。假设您当前的过程需要大约 15 分钟来构建一个 .JAR 并将其上传到您的服务器：

*   一次，15分钟。
*   两次，30分钟。
*   四次，60分钟。

你明白了。但是等等，你说，写一个 ANT 脚本……这更难 - 可能需要 8 个小时来了解 ANT 并编写一个有效的脚本。

这是绝对正确的，但让自动化变得伟大的是，现在只需 0 分钟即可完成您的步骤。所以，这个过程看起来像：

*   编写 ANT 脚本：480 分钟（8 小时）
*   运行 ANT 脚本：0 分钟

那么你怎么知道你是否需要自动化呢？只需想想您需要执行多少次手动过程。如果您只运行一次，那么比较将是 15 分钟与 480 分钟，您不应该编写脚本。但是，如果您认为您将执行该过程 40 次，那么比较是 600 分钟与 480 分钟，您最好编写一个脚本。

（以上也排除了自动化方面的其他积极因素。例如，手动操作时很容易出错[创建 .JAR 时出错] - 但计算机一旦设置正确就永远不会出错。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T17:37:24.200

如果您只需要在 IDE 中将整个项目存档为 WAR 或 EAR ，那么通过 IDE 或彻底的 ANT 构建它并没有真正的区别。

但是，在某些情况下，它需要的不仅仅是存档。例如，您可能想要创建一个 EAR，但不想在其中包含某些 jar。或者，您可能希望在创建 EAR 之前删除所有属性文件。ANT 为您提供了这种灵活性。您可以定义自己的 build.xml 并通过 ANT 运行它。它将创建 build.xml 中定义的 EAR。

由于它是一个自动化过程，因此它花费的时间也更少。因此，如果您需要高频率地创建 WAR 或 EAR，您可能应该使用脚本。他们将为您节省大量时间。

所以基本上自动化和定制是使用 ANTscripts 的两个主要优点

# php - Joomla 管理端 URL 从 & 更改为 URL 字符串

> ID：15530025
> 
> 赞同：0
> 
> 时间：2013-03-20T17:01:17.687
> 
> 标签：php, joomla, joomla1.5, joomla-extensions, checkin

我已经更改了我的 joomla 网站的服务器，但我现在在管理员面板中遇到了一些问题，页面的 URL 已从更改`&`为`&nbsp;`

当我尝试编辑任何文章时，它在名称 mins checkin 附近提供锁定选项，我不明白那是什么，并且 url 会像这样

```
http://60pluslife.org/administrator/index.php?option=com_content&amp;view=article&amp;layout=edit&amp;id=2 
```

实际上 url 就是这样

```
http://60pluslife.org/administrator/index.php?option=com_content&view=article&layout=edit&id=2 
```

请给我建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:31:35.943

显示“签入”的锁定图标表示该文章当前由工具提示中所述的用户编辑。这样做是为了防止多个用户同时编辑同一篇文章。这通常是在您尝试编辑文章，然后使用浏览器的返回键或关闭窗口退出表单时引起的。您应该始终使用保存或取消按钮之一。单击锁定图标将重新签入这篇文章并允许其他人再次编辑。

至于关于＆符号的问题（`&amp;`不像`&nbsp;`问题）：Joomla 本身不应该生成这种 URL。也许您可以提供有关 Joomla 版本的更多信息（从您发布的 URL 中，它不是您标记的 Joomla 1.5）、哪种类型的服务器（apache、IIS？）以及您使用的浏览器（所有浏览器都会发生这种情况）。您还安装了任何非核心扩展吗？

# c# - List 上的动态 Linq 查询 使用谓词生成器

> ID：15530026
> 
> 赞同：0
> 
> 时间：2013-03-20T17:01:22.333
> 
> 标签：c#, linq, predicatebuilder

我正在使用 C# 2010 .NET 4.0，并且我有一个`List<T>`名为的集合`returns`，我需要在其上构建动态 LINQ 查询。

我正在使用[此处](http://www.albahari.com/nutshell/predicatebuilder.aspx)引用的谓词生成器。

如果我有 1 个过滤条件，这可以正常工作，但如果我有 2 个或更多，那么，当`query.compile()`被调用时，我会收到此错误：

> 从范围“”引用了“Check21Tools.IncomingReturn”类型的变量“tmp”，但未定义

代码：

```
 Expression<Func<Check21Tools.IncomingReturn, bool>> query = null;

  bool hasFilterItems = false;
  if (filterArray != null)
  {
    foreach (string s in filterArray)
    {
      if (s == string.Empty)
      { break; }
      else
      {
        hasFilterItems = true;
        Int64 id = Int64.Parse(s);
        query = query.Or(tmp => tmp.ID == id);
      }

    }
  }
  if (hasFilterItems)
  {
    returns = returns.Where(query.Compile()).CreateFromEnumerable
                  <Check21Tools.IncomingReturns, Check21Tools.IncomingReturn>();
  } 
```

代码：

```
 public static Expression<Func<T, bool>> Or<T>(
     this Expression<Func<T, bool>> expr1, Expression<Func<T, bool>> expr2)
 {
     if (expr1 == null) return expr2;

     return Expression.Lambda<Func<T, bool>>
         (Expression.OrElse(expr1.Body, expr2.Body), expr1.Parameters);

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:38:52.000

[OP 已经] 偶然发现了适用于`List<T>`对象的谓词构建器的更新版本：

```
public static Expression<Func<T, bool>> Or<T>(this Expression<Func<T, bool>> expr1, Expression<Func<T, bool>> expr2)
  {
     if (expr1 == null) return expr2;
     var invokedExpr = Expression.Invoke(expr2, expr1.Parameters.Cast<Expression>());
     return Expression.Lambda<Func<T, bool>>
              (Expression.OrElse(expr1.Body, invokedExpr), expr1.Parameters);
  } 
```

# javascript - 如何将选项传递给 AngularStrap 时间选择器？

> ID：15530028
> 
> 赞同：0
> 
> 时间：2013-03-20T17:01:27.303
> 
> 标签：javascript, angularjs

我是 AngularJs 的新手，经过一番认真的努力，我终于让 AngularStrap [DatePicker](http://mgcrea.github.com/angular-strap/#/datepicker)和[TimePicker](http://mgcrea.github.com/angular-strap/#/timepicker)工作了。

现在我想将一些选项传递给 TimePicker，例如使用 24 小时格式 ( `showMeridian = false`)。虽然 DatePicker 可以配置 HTML5 数据属性（例如`data-date-format="dd.mm.yyyy" data-date-weekstart="1"`），但这似乎不适用于 TimePicker。

如何将选项传递给 TimePicker？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T07:14:13.167

可以使用数据属性设置两个插件的配置选项。

```
<div class="bootstrap-timepicker"/>
    <input id="timepicker" data-template="modal" data-minute-step="1" data-modal-backdrop="true" type="text"/>
</div> 
```

# python - 如果引号之间没有出现多个空格，请用一个空格替换它们？

> ID：15530029
> 
> 赞同：1
> 
> 时间：2013-03-20T17:01:28.940
> 
> 标签：python, regex

我有一个用例，我想用一个空格替换多个空格，除非它们出现在引号内。例如

原来的

```
this is the first    a   b   c
this is the second    "a      b      c" 
```

后

```
this is the first a b c
this is the second "a      b      c" 
```

我相信正则表达式应该能够做到这一点，但我对它们没有太多经验。这是我已经拥有的一些代码

```
import re

str = 'this is the second    "a      b      c"'
# Replace all multiple spaces with single space
print re.sub('\s\s+', '\s', str)

# Doesn't work, but something like this
print re.sub('[\"]^.*\s\s+.*[\"]^, '\s', str) 
```

我理解为什么我上面的第二个不起作用，所以我想要一些替代方法。如果可能的话，您能否解释一下您的正则表达式解决方案的各个部分。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:51:50.133

假设没有`"`在`"substring"`

```
import re
str = 'a    b    c  "d   e   f"'  
str = re.sub(r'("[^"]*")|[ \t]+', lambda m: m.group(1) if m.group(1) else ' ', str)

print(str)
#'a b c "d   e   f"' 
```

正则表达式`("[^"]*")|[ \t]+`将匹配带引号的子字符串或一个或多个单个空格或制表符。因为正则表达式首先匹配引用的子字符串，所以其中的空格将无法被替代 subpattern 匹配`[ \t]+`，因此将被忽略。

与引用的子字符串匹配的模式包含在其中，`()`因此回调可以检查它是否匹配。如果是，`m.group(1)`将是真实的，并且它的值只是简单地返回。如果不是，则匹配的是空格，因此返回一个空格作为替换值。

没有拉姆达

```
def repl(match):
    quoted = match.group(1)
    return quoted if quoted else ' '

str = re.sub(r'("[^"]*")|[ \t]+', repl, str) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T18:55:24.343

如果您想要一个每次都能可靠工作的解决方案，无论输入或其他警告（例如不允许嵌入引号），那么您想要编写一个不使用 RegExp 或拆分引号的简单解析器。

```
def parse(s):
    last = ''
    result = ''
    toggle = 0
    for c in s:
        if c == '"' and last != '\\':
            toggle ^= 1
        if c == ' ' and toggle == 0 and last == ' ':
            continue
        result += c
        last = c
    return result

test = r'"  <  >"test   1   2   3 "a \"<   >\"  b  c"'
print test
print parse(test) 
```

# ruby-on-rails - Rails - 如何在 options_from_collection_for_select 中显示整数？

> ID：15530033
> 
> 赞同：0
> 
> 时间：2013-03-20T17:01:37.110
> 
> 标签：ruby-on-rails

我希望在表单上显示一个可选择的 1-42 列表。我在控制器的新我中有一个数组分配来创建列表：

```
@cabinet_position_list = (1..42).to_a 
```

该数字将分配给 device.position 但我不知道如何在框中显示数字。这是我在表格上提出的最好的：

```
<%= f.select :position, options_from_collection_for_select(@cabinet_position_list, "position", "?????") %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:15:51.870

在这种情况下，您不需要 options_from_collection_for_select。只是：

```
f.select :position, @cabinet_position_list 
```

或者

```
f.select :position, (1..42).to_a 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:02:42.213

`options_for_select(@cabinet_position_list)`应该管用 ！

# spring - [Ljava.lang.Object 的类型转换问题

> ID：15530034
> 
> 赞同：0
> 
> 时间：2013-03-20T17:01:37.690
> 
> 标签：spring, hibernate, jakarta-ee, spring-mvc

```
 public List<Client> findClientByAssociateUser(String userId) {
        logger.info("Enter find list of clients by this user");
        org.hibernate.Query query = sessionFactory.getCurrentSession()
                .createQuery("SELECT c.id, c.clientName, c.billingAddress,c.contactNumber"
                + " from Client c, User ud"
                + " WHERE ud.id = c.userId and ud.id = :id")
                .setString("id", userId);
        List<Client> result = (List<Client>) query.list();
        logger.info("Exit find list of clients");
        return result;
    }

public ModelAndView userDetails(@PathVariable String id, HttpServletRequest request) {
    ModelAndView mvc = new ModelAndView();        
    List<Client> clientList = userRepository.findClientByAssociateUser(id.toString());
       mvc.addObject("clientList", clientList);
       for (Client client : clientList) {
        System.out.println("Client Name{" + client.getClientName());
    }
    mvc.setViewName(MANAGEUSER_PREFIX + "details");
    return mvc;
} 
```

我正进入（状态：

```
Ljava.lang.Object; cannot be cast to Client 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:04:44.757

查询中的返回类型将是`List<Object[] >.`

因为你的查询说

```
SELECT c.id, c.clientName, c.billingAddress,c.c...... 
```

改变

```
List<Client> result = (List<Client>) query.list(); 
```

然后按照那个处理

到

```
List<Object[]> result = (List<Object[]>) query.list(); 
```

或将查询更改为

```
 SELECT c from Client c...... 
```

# php - CSS 不是从 localhost 呈现的——而只是在 Chrome 和 IE 中

> ID：15530036
> 
> 赞同：0
> 
> 时间：2013-03-20T17:01:39.847
> 
> 标签：php, html, css, apache, localhost

我已经验证了我所有的 HTML 和 CSS，并且没有错误，但不幸的是，我的*localhost*只能在 Firefox 中正确呈现——在 Chrome 和 IE9 中，它们只显示没有任何 CSS 的内容。

我查看了开发人员工具控制台，发现以下错误消息：

**IE**

```
SEC7113: CSS was ignored due to mime type mismatch 
```

**铬合金**

```
Resource interpreted as Stylesheet but transferred with MIME type text/plain: 
```

然而，Firefox 并没有提出任何这些抱怨。

什么可能导致此错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T17:03:07.740

无论您使用什么服务器，都不会向`Content-Type`浏览器发送有效的标头。如果没有此标头，浏览器会将不匹配视为安全风险并阻止文件的下载。在这种情况下，结果是无样式的内容。

Firefox 没有这样的块，因此可以正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T17:03:01.747

啊哈！`.htaccess`就在我发布这个问题之后，我发现了问题：我在树的更高处有一个错误的文件。它影响了所有 JS 和 CSS 文件的处理。

有时它有助于逻辑地写出东西！:)

# php - 如何在 PHP 中写入错误日志文件

> ID：15530039
> 
> 赞同：84
> 
> 时间：2013-03-20T17:01:48.240
> 
> 标签：php, reference

我想在执行 PHP 代码时将消息写入错误日志文件。

我正在尝试使用 PHP`error_log()`函数[Docs](http://php.net/function.error_log)。

但这对我来说不能正常工作。

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2013-03-20T17:13:54.327

如果您不想更改 php.ini 文件中的任何内容，根据[PHP 文档](http://php.net/manual/en/function.error-log.php)，您可以这样做。

```
error_log("Error message\n", 3, "/mypath/php.log"); 
```

第一个参数是要发送到日志的字符串。第二个参数`3`表示期望文件目标。第三个参数是日志文件路径。

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2014-02-21T14:05:25.780

你可以简单地使用：

```
error_log("your message"); 
```

默认情况下，消息将发送到 php 系统记录器。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2015-10-09T09:58:08.167

我们都知道 PHP 将错误保存在 php_errors.log 文件中。

但是，该文件包含大量数据。

如果我们想记录我们的应用程序数据，我们需要将其保存到自定义位置。

我们可以在 error_log 函数中使用两个参数来实现这一点。

[http://php.net/manual/en/function.error-log.php](http://php.net/manual/en/function.error-log.php)

我们可以使用：

```
error_log(print_r($v, TRUE), 3, '/var/tmp/errors.log'); 
```

在哪里，

`print_r($v, TRUE) :`将 $v (array/string/object) 记录到日志文件中。 `3`：将日志消息放入第三个参数中指定的自定义日志文件。

`'/var/tmp/errors.log'`：自定义日志文件（此路径适用于Linux，我们可以根据操作系统指定其他路径）。

或者，您可以使用`file_put_contents()`

```
file_put_contents('/var/tmp/e.log', print_r($v, true), FILE_APPEND); 
```

在哪里：

`'/var/tmp/errors.log':`自定义日志文件（此路径适用于 Linux，我们可以根据操作系统指定其他路径）。 `print_r($v, TRUE) :`将 $v (array/string/object) 记录到日志文件中。FILE_APPEND：常量参数，如果文件存在，是否追加到文件，如果文件不存在，则创建新文件。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-20T17:40:31.523

您可以使用正常的文件操作来创建错误日志。只需参考这个并输入这个链接： [PHP文件处理](http://www.w3schools.com/PHP/php_file.asp)

# deployment - Lightswitch 桌面应用程序无法在 XP SP3 中运行

> ID：15530043
> 
> 赞同：0
> 
> 时间：2013-03-20T17:01:52.580
> 
> 标签：deployment, windows-xp-sp3, lightswitch-2012

我在 Lightswitch 2012 中开发了一个应用程序，现在需要将其部署到运行 XP SP3 的台式机上。

我已经看过之前的两篇文章[Can't run Lightswitch 2012 Programm under Windows XP](https://stackoverflow.com/questions/12140643/cant-run-lightswitch-2012-programm-under-windows-xp) and [Lightswitch Desktop Application Wont Install in XP SP3](https://stackoverflow.com/questions/12838006/lightswitch-desktop-application-wont-install-in-xp-sp3)

这两篇文章都提到了执行 [ `editbin vslshost.exe /SUBSYSTEM:WINDOWS,5.01 /OSVERSION:5.1`] 来修改 vslshost.exe 文件，尽管只有第一篇文章说它有效。

就我而言，我已尝试上述方法来更新 vslshost.exe 文件，但是当我发布我的 LS2012 项目时，它会恢复为默认的 vslshost.exe 文件。如果我手动将文件与我修改的副本交换，当我运行部署的应用程序时，我会收到以下错误：

```
System.Deployment.Application.InvalidDeploymentException (HashValidation)
    - File, vslshost.exe, has a different computed hash than specified in manifest.
    - Source: System.Deployment 
```

所以，问题是

1.  难道我做错了什么？
2.  是否有我需要更新的 vslshost.exe 的主副本？

（顺便说一句，我还运行了 VS2012（来自 VS2012 Update 1 CTP 4 的 KB270250））

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:17:39.413

由于这是公司内部的应用程序，我刚刚说服我们的 IT 人员升级机器，因为尝试不同可能的解决方案的悲伤实在是太多了。

但是如果你必须部署到 XP

要了解更多信息，这里有两个非常详尽的帖子，直接来自 Lightswitch 团队的输入：

[在 XP 上安装和运行 LS2012 桌面应用程序的进展了吗？](http://social.msdn.microsoft.com/Forums/en-US/lightswitch/thread/e00e343a-552d-4a6f-8204-0e0f02fde09a/)

[Windows XP 32 位部署](http://social.msdn.microsoft.com/Forums/en-US/lightswitch/thread/19e5dd5e-4d47-48c1-bc6f-b978f31d2471)

享受....（？？？）

# oracle - 带参数的 Oracle 函数苦苦挣扎（参考未初始化的集合）

> ID：15530054
> 
> 赞同：0
> 
> 时间：2013-03-20T17:02:22.557
> 
> 标签：oracle, function, procedure

我在这里找不到什么问题，最后我决定在这里寻求帮助。

这就是我调用的方式：

```
 DECLARE
   RESSULT VARCHAR2(1000 CHAR);
   V_TEST1 CARS_TABLE:=CARS_TABLE();
   idx pls_integer :=0;
   BEGIN 
   V_TEST1.EXTEND(2);
    IDX := V_TEST1.COUNT; -- here there is NO problem

  RESSULT:=MYFUNCTION(1, V_TEST1);
  END; 
```

这就是我要调用的..

```
CREATE OR REPLACE
  FUNCTION MYFUNCTION(
  CAR_ID IN INTEGER,
  MYOUTTABLE OUT CARS_TABLE)
RETURN VARCHAR2
 IS
RESSULT VARCHAR2(1000 CHAR);
idx pls_integer :=0;
BEGIN
IDX := MYOUTTABLE.COUNT; - HERE IS PROBLEM.. but why - I pass initialized collection
RETURN 'return param';
END MYFUNCTION;

 CREATE OR REPLACE TYPE carElement
IS
OBJECT
 (
  kind VARCHAR2(60),
    created DATE );
CREATE OR REPLACE TYPE CARS_TABLE 
```

作为 carElement 的表格；

1.  00000 - “对未初始化集合的引用” *原因：在集合未初始化的情况下，引用了嵌套表或可变数组的元素或成员函数（需要初始化集合的地方）。*操作：使用适当的构造函数或整个对象赋值来初始化集合。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:11:46.550

“IDX := MYOUTTABLE.COUNT; - 这里有问题.. 但为什么 - 我通过了初始化集合”

您在函数调用的输入上将集合重置为 NULL，因为您已将参数定义为`OUT`在调用函数时自动将参数设为空（[文档链接](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/subprograms.htm#BCFHBGBI)）。

```
 MYOUTTABLE OUT CARS_TABLE 
```

如果要保留输入，则需要将其传递为，`IN`或者如果要保留输入并在函数中操作对象，则使用`IN OUT`.

例如，如果我使用，第一次调用它会显示它的 null `out`：

```
SQL> declare
  2    v_test1 cars_table:=cars_table();
  3
  4    function myfunction(
  5      car_id in integer,
  6      myouttable  &mode cars_table)
  7    return varchar2
  8    is
  9      ressult varchar2(1000 char);
 10      idx pls_integer :=0;
 11    begin
 12      if (myouttable is null)
 13      then
 14        dbms_output.put_line('ARRAY IS NULL');
 15      else
 16        idx := myouttable.count;
 17      end if;
 18      return 'return param';
 19    end myfunction;
 20  begin
 21
 22    v_test1.extend(2);
 23    dbms_output.put_line(myfunction(1, v_test1));
 24
 25  end;
 26  /
Enter value for mode: OUT
old   6:     myouttable  &mode cars_table)
new   6:     myouttable  OUT cars_table)
ARRAY IS NULL
return param

PL/SQL procedure successfully completed.

SQL> /
Enter value for mode: IN OUT
old   6:     myouttable  &mode cars_table)
new   6:     myouttable  IN OUT cars_table)
return param

PL/SQL procedure successfully completed. 
```

# html - 突出显示我的表格的行，其中复选框被剔除检查

> ID：15530059
> 
> 赞同：0
> 
> 时间：2013-03-20T17:02:44.210
> 
> 标签：html, knockout.js

我有一个 html 表，第一列上有一个复选框。我想突出显示用**knockout**检查复选框的行。

```
<table class="defaultGrid">
<thead>
    <tr>
        <th>Check</th>
        <th>ID</th>
        <th>Name</th>
    </tr>
</thead>
<tbody data-bind="foreach: model.Things">
    <tr>
        <td><input type="checkbox" data-bind="click: $root.selectThing " /></td>
        <td data-bind="text: ID"></td>
        <td data-bind="text: Name"></td>
    </tr>
</tbody>
</table> 
```

这是关于 jsFiddle 的示例：http: [//jsfiddle.net/jJ4H6/1/](http://jsfiddle.net/jJ4H6/1/)

我不知道该怎么做。我不想在我的模型上添加额外的属性，例如“isSelected”。

任何的想法？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T18:12:38.477

我肯定会在您的“事物”中添加一个可观察到的淘汰赛，以确定您的 tr 元素是否具有黄色背景。

但是，如果您**真的**不想在视图模型中添加类似的内容，则必须在*selectThing*函数中添加一些逻辑来为您处理此问题，例如

```
self.selectThing = function(item, event) {
        $(event.target).parent().parent().addClass('selected');
   }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T18:16:35.980

看看这个 Jfiddle [http://jsfiddle.net/jJ4H6/27/](http://jsfiddle.net/jJ4H6/27/)

```
 $(function() {
Thing = function(id, name, selected) {
    var self = this;
    self.ID = id, 
    self.Name = name
    self.isChecked = ko.observable(false);
};

function viewModel() {
    var self = this;
    self.model = {};
    self.model.CurrentDisplayThing = ko.observable();
    self.model.Things = ko.observableArray(
        [
            new Thing(1, "Thing 1"),
            new Thing(2, "Thing 2"),
            new Thing(3, "Thing 3")
        ]);
    self.selectThing = function(item) {

    };
}
ko.applyBindings(new viewModel()); 
```

});

# python - Scrapy 案例：项目的增量更新

> ID：15530071
> 
> 赞同：3
> 
> 时间：2013-03-20T17:03:32.100
> 
> 标签：python, screen-scraping, scrapy

请帮我解决以下情况：

想象一个典型的分类类别页面。包含项目列表的页面。当您点击您登陆内部页面的项目时。现在我的爬虫抓取所有这些 URL，进一步抓取这些 url 以获取项目的详细信息，检查初始种子 URL 是否为任何下一页。如果有，它会转到下一页并执行相同的操作。我将这些项目存储在 sql 数据库中。

假设 3 天后，种子 URL 中有新项目，我只想废弃新项目。可能的解决方案是：

1.  在抓取每个项目时，我会检查数据库以查看 URL 是否已被抓取。如果有，我只是要求 Scrapy 停止进一步爬行。问题：我不想每次都查询数据库。我的数据库将非常大，最终会使爬网变得超级慢。

2.  我尝试存储最后抓取的 URL 并在开始时将其传递，当它找到这个 last_scraped_url 时，它只会停止爬虫。不可能，因为抓取 URL 的异步特性不会按照从种子 URL 接收到的顺序进行抓取。（我尝试了所有方法让它有条不紊地进行——但这根本不可能）

任何人都可以提出任何其他想法吗？在过去的三天里，我一直在为此苦苦挣扎。

感谢您的回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-14T13:05:25.770

在尝试给你一个想法之前......

我必须说我会先尝试您的数据库选项。数据库就是为此而建立的，即使您的数据库变得非常大，这也不应该使爬行速度显着变慢。我学到的一个教训是：“首先做愚蠢的实现。然后，你尝试优化。” 大多数情况下，当您首先优化时，您只是优化了错误的部分。

但是，如果你真的想要另一个想法...... Scrapy 的默认设置是不会对同一个 url 进行两次抓取。因此，在开始抓取之前，您可以将已经抓取的 url（3 天前）放入 Scrapy 用来知道哪些 url 已经被访问过的列表中。（我不知道该怎么做。）或者，更简单的是，在您的项目解析器中，您只需检查 url 是否已被抓取并返回 None 或相应地抓取新项目。

# android - 如何在不丢失用户数据的情况下从免费升级到商业

> ID：15530072
> 
> 赞同：2
> 
> 时间：2013-03-20T17:03:34.687
> 
> 标签：android

我正在开发一个以两个版本分发的应用程序：免费有广告和付费无广告。由于广告的存在，这些应用程序完全相同。

通常认为用户会获得免费版本，然后 - 如果他们愿意 - 升级到商业版本。

当我将应用程序上传到 google play 时，我必须创建一个全新的应用程序，并使用新的唯一 ID。换句话说，同一个应用程序的这两个版本实际上是两个完全不同的项目，而且，正如我所见，没有办法避免这种情况。

这是有道理的，只要我必须监控哪个应用程序为我提供了哪些收入。

但是 - 现在问题来了 - 当用户决定从免费版升级到商业版时，我希望他保留所有本地数据。显然，这不会发生，只要两个应用程序具有不同的名称。

这个问题有简单的解决方案吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T18:18:51.293

## 当用户从免费版本升级到付费版本时，如何在免费和付费应用程序之间共享数据

这是一个非常常见的问题，充满了各种各样的问题，包括以下问题：

*   当用户安装*并运行*付费应用程序时，所有用户数据都应从免费应用程序中复制。
*   如果用户在完成升级到付费后尝试使用免费应用程序，他应该会被自动重定向到付费应用程序。
*   当用户删除付费应用程序时，应该允许免费应用程序像以前一样继续工作。

最简单的解决方案是维护所有必须在数据库中共享的数据，而不是用户首选项。然后，当付费应用程序第一次运行时，可以将数据库文件从免费应用程序复制到付费应用程序。

我发现这对我来说比内容提供程序更有效，因为所有特殊用例条件都与在任何时候仅安装一个或另一个或两个应用程序有关。

为了使该系统正常工作，必须具备几个关键工具：

*   应用程序必须能够检测彼此是否在运行时安装。
*   应用程序必须知道其对应方将其数据库文件保存在何处。
*   必须将几个标志保存在数据库文件中以指示发生了什么。

**如何确定是否安装了其他应用程序**：

```
final String packageName = "com.company.other-app-name";
android.content.pm.PackageManager pm = getPackageManager();
PackageInfo info = pm.getPackageInfo(packageName, 0); 
```

如果抛出`info==null`or `NameNotFoundException`，则未安装该应用程序。

**如何复制数据库文件**：

您的数据库文件存储如下：

```
paidDb = "/data/data/<paid-app-package-name>/databases/<db-name>.db"
freeDb = "/data/data/<free-app-package-name>/databases/<db-name>.db" 
```

您的复制功能应该打开这些文件上的对象`FileInputStream`并`FileOutputStream`通过任意数量的标准方法复制它们，例如：

```
while ((length = fis.read(buffer))>0) {
    fos.write(buffer, 0, length);
} 
```

这应该提供您需要的所有工具，以允许付费应用程序确定是否安装了免费应用程序，如果已安装，请复制数据库并从那里继续。免费应用程序应检查是否安装了付费应用程序。如果是这样，请退出并发出友好警告或重定向到付费应用程序，如下所示：

```
android.content.pm.PackageManager pm = getPackageManager();
final Intent intent = pm.getLaunchIntentForPackage(packageName);
startActivity( intent );
finish(); 
```

**可选删除免费应用程序**：

在付费应用检测到免费应用并复制数据库后，您可以选择要求用户删除免费应用，如下所示：

```
Uri uri = Uri.parse("package:<free-app-package-name>");
Intent intent = new Intent(Intent.ACTION_DELETE, uri);
startActivityForResult(intent, REQUEST_CODE_UNINSTALL_FREE_APP); 
```

注意：您不能保证用户会按要求实际卸载免费应用程序。使用该值`REQUEST_CODE_UNINSTALL_FREE_APP`，以便当您从`onActivityResult()`付费应用程序的卸载程序返回时，您可以检查用户是否完成了删除。然后，如果卸载没有发生，您可以提供通常的“您确定吗？” 或“再试一次？” 对话甚至对他采取严厉措施（*不推荐*）并强迫他完成卸载，然后再允许他继续使用新的付费应用程序。

**进一步考虑**：

*   您的所有共享代码都应该在一个[Android LIbrary 项目](http://developer.android.com/tools/projects/index.html "Android 库项目")中，并且每个应用程序都应该是使用共享库的轻量级包装器项目。所有三个项目都将位于一个 Eclipse 工作区中。
*   考虑为付费应用项目使用[Android 许可证验证库 (LVL)](http://developer.android.com/google/play/licensing/overview.html)（对于库项目或免费应用，您不需要 LVL）。
*   还可以考虑放弃所有这些想法，只制作一个应用程序，并使用[应用内计费](http://developer.android.com/google/play/billing/billing_overview.html)从免费升级到付费。这远远超出了这个问题的范围。

# clearcase - 如何在clearcase中取消签出签入目录

> ID：15530073
> 
> 赞同：2
> 
> 时间：2013-03-20T17:03:38.470
> 
> 标签：clearcase, cleartool

我已经签出一个目录，修改了一些文件并签入了目录有没有办法恢复签入的目录并从原始目录开始

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:51:40.923

Never delete a version, this is way too dangerous (in that it removes all metadata, and hyperlinks attached to it).

Do a **subtractive merge**, in order to cancel the contributions recorded in your last directory version.

See in IBM the articles "[To remove contributions of some versions](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.hlp.doc/cc_main/to_remove_contrib.htm)".
You can see an example of a `cleartool merge -delete` in "[Undo remove file in ClearCase](https://stackoverflow.com/q/4634265/6309)"

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-20T17:33:30.520

您可以尝试删除该版本。在版本树中，右键单击当前版本的气泡并选择“删除”。版本树会自动刷新而失败，因为它试图显示的版本已经不存在了。更新后，您应该会看到旧版本。

如果您编辑了多个文件，则必须为每个文件执行此操作。我还没有找到通过命令行执行此操作的方法，但是我又没有彻底查看；）

# sql-server - 而不是自动更新日期时间列的触发后触发

> ID：15530075
> 
> 赞同：1
> 
> 时间：2013-03-20T17:03:48.530
> 
> 标签：sql-server, triggers, datatrigger

假设我有一个表，其中有一个日期时间字段（命名它`updated_at`）作为“时间戳”列执行（因为在 SQL Server 中时间戳数据类型不作为日期时间存在）。

我考虑过使用触发器来更新字段，但我不知道哪种会更好：

*   使用`instead of update`触发器，并在触发器内部进行更新，但将`updated_at`值设置为`getdate()`. 这更难编码，但可能会执行得更好，因为它将执行单个更新操作。
*   使用`after update`触发器，对修改的行进行第二次更新，将日期时间值设置为`getdate()`。这可能更容易编码，但意味着在表上进行两次更新。

就性能而言，哪种方法最好？

# java - 使用 Intent 将整数从 IF 语句中使用的一个 .java 类传递到另一个 .java 类

> ID：15530076
> 
> 赞同：-1
> 
> 时间：2013-03-20T17:03:49.053
> 
> 标签：java, android, android-intent, if-statement, android-activity

我是 Android 新手，我正在尝试使用 Intent 将整数值从一个 .java 类传递给另一个。该整数在第一个 .java 文件中声明，并在 IF 语句中使用以产生分数；

```
public class Diabetes_Question_1 extends Activity {

public int Total = 0;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.diabetes_question_1);

    Button btnBack = (Button) findViewById(R.id.btnBack1);
    btnBack.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            startActivity(new Intent(Diabetes_Question_1.this, Diabetes_Question_2.class));

        }
    });

    final RadioButton rb1 = (RadioButton) findViewById(R.id.btnDQ1Radio1);
    final RadioButton rb2 = (RadioButton) findViewById(R.id.btnDQ1Radio2);
    final RadioButton rb3 = (RadioButton) findViewById(R.id.btnDQ1Radio3);
    Button btnNext = (Button) findViewById(R.id.btnNext1);
    btnNext.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            if(rb1.isChecked()==true) {
                Total = 1;
            } else if (rb2.isChecked()==true) {
                Total = 2;
            } else if (rb3.isChecked()==true) {
                Total = 3;
            } else {
                Total = 4;
            }

            Toast.makeText(Diabetes_Question_1.this, String.valueOf(Total), Toast.LENGTH_SHORT).show();

            Intent i = new Intent(Diabetes_Question_1.this, Diabetes_Question_3.class);
            i.putExtra("totalScore", Total);
            startActivity(i);
        }
    });
}
} 
```

一旦产生了这个分数，我想将它传递给另一个 .java 类，以便可以根据下一个 IF 语句添加分数；

```
public class Diabetes_Question_3 extends Activity {

Bundle extras = getIntent().getExtras();
int Total3 = extras.getInt("totalScore");

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.diabetes_question_3);

    Button btnBack = (Button) findViewById(R.id.btnBack2);
    btnBack.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            startActivity(new Intent(Diabetes_Question_3.this, Diabetes_Question_1.class));

        }
    });

    final RadioButton rb1 = (RadioButton) findViewById(R.id.btnDQ3Radio1);
    final RadioButton rb2 = (RadioButton) findViewById(R.id.btnDQ3Radio2);
    final RadioButton rb3 = (RadioButton) findViewById(R.id.btnDQ3Radio3);
    Button btnNext = (Button) findViewById(R.id.btnNext3);
    btnNext.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            startActivity(new Intent(Diabetes_Question_3.this, Diabetes_Question_4.class));

            if(rb1.isChecked()==true) {
                Total3 = + 1;
            } else if (rb2.isChecked()==true) {
                Total3 = + 1;
            } else if (rb3.isChecked()==true) {
                Total3 = + 1;
            } else {
                Total3 = + 1;
            }

            Toast.makeText(Diabetes_Question_3.this, String.valueOf(Total3), Toast.LENGTH_SHORT).show();

        }
    });
}
} 
```

我知道 IF 语句有效，因为我有一个祝酒词来证明这一点。然而，转移到下一个 .java 类是问题所在，我正在努力改进代码。

我给出以下错误信息；

致命异常：主要 java.lang.RuntimeException：无法实例化活动 ComponentInfo {PACKAGE NAME} java.lang.NullPointerExcpetion

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:06:05.260

放这个。

```
Bundle extras = getIntent().getExtras();
int Total3 = extras.getInt("totalScore"); 
```

在 Diabetes_Question_3 活动的 onCreate 方法中。

**您应该遵循 Java 的命名约定。**

```
int total3 = 0; //Instance variable.

Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.diabetes_question_3);

    .........
    Bundle extras = getIntent().getExtras();
    total3 = extras.getInt("totalScore"); 
```

# hibernate - QueryDSL Hibernate：按交集排序

> ID：15530077
> 
> 赞同：1
> 
> 时间：2013-03-20T17:04:03.857
> 
> 标签：hibernate, querydsl

我有一个 0-n 喜欢的实体编码器。我的查询包括，给定一个名为 A 的编码员，查找所有至少有一个共同爱好的编码员，按与 A 的共同爱好的降序排列。这是到目前为止的样子：

```
query.from(coder, other)
     .where(
          coder.firstName.toLowerCase().eq(firstName)
          .and(coder.lastName.toLowerCase().eq(lastName))
          .and(other.ne(coder))
          .and(other.likings.any().in(coder.likings))
     )
     .orderBy(coder.likings.???); 
```

有没有办法通过 QueryDSL 来实现指定定制订单？我没有在`ListPath`. 如果是这样，我可以使用 Guava 来计算交集。

提前致谢，

罗尔夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T18:14:16.803

你可以试试

```
 .orderBy(coder.likings.size().desc()); 
```

如果这不起作用，请尝试使用额外的连接和分组方式进行显式聚合。

# android - 如何在android中保存结果？

> ID：15530081
> 
> 赞同：0
> 
> 时间：2013-03-20T17:04:15.973
> 
> 标签：android

我是android编程的菜鸟。我有一个小问题。当我单击 ImageView 时，我使该 ImageView 不可见并将 Button 设置为可见。我的问题是你如何保存这个？例如，我单击 ImageView，Button 出现，而​​ ImageView 消失。然后我退出应用程序并重新进入相​​同的活动，我希望该按钮保留在那里。我该怎么做呢？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:10:09.373

使用`SharedPreferences`. 这是一个关于如何使用它们的好教程。[例子](http://www.mybringback.com/tutorial-series/12260/android-sharedpreferences-example/)

但基本上你可以通过将此代码添加到你的`Activity`

```
private boolean isVisible;
@Override
public void onCreate(Bundle myBundle){
          super.onCreate(myBundle);
 isVisible = getPreferences(MODE_PRIVATE).getBoolean("visible", true);
  .... your code
  if (isVisible){
    // show ImageView
 } else {
        //don't
 }
}
}
public void onPause(){
       if(isFinishing()){
         getPreferences(MODE_PRIVATE)
        .edit().
        putBoolean("visible", isVisible).commit();
 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:06:32.040

使用共享首选项来保存状态，即在您的情况下说一个布尔值来指示当您退出应用程序时 imageview 是否可见。
当您启动应用程序时，使用此值并相应地执行操作。

对于共享首选项的使用，
[如何在 Android 中使用 SharedPreferences 来存储、获取和编辑值](https://stackoverflow.com/questions/3624280/how-to-use-sharedpreferences-in-android-to-store-fetch-and-edit-values)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T17:06:51.977

当您离开应用程序`onPause()`或单击事件时，您可以将状态存储在共享首选项中，并且可以`onCreate()`从该首选项中获取返回方法的结果

将数据存储在共享首选项中（在 OnPause() 或单击事件中）：

```
SharedPreferences prefs = getSharedPreferences("yourPrefName", MODE_PRIVATE);            
SharedPreferences.Editor editor = prefs.edit();
// save values
editor.putBoolean("isButtonVisible", true);
editor.commit(); 
```

从 sharedPrefs 获取数据（在 onCreate() 中）：

```
 SharedPreferences prefs = getSharedPreferences("yourPrefName", MODE_PRIVATE);
 boolean btnstatus = prefs.getBoolean(Constants.IS_LOGIN, false);
 if (btnstatus) {
       //put the code to show button and hide imageview
 } 
```

# jquery - 页脚的锚点不适用于 Webkit 浏览器中 Wordpress 中的 jQuery

> ID：15530083
> 
> 赞同：0
> 
> 时间：2013-03-20T17:04:16.720
> 
> 标签：jquery, wordpress, wordpress-theming

我正在从头开始在 Wordpress 中构建自定义主题。现在，我只完成了基础，例如创建必要的 .php 文件，如 index.php、footer.php 等。在我的导航菜单中，我有一个联系人锚点，它应该用动画在页脚中导航你。因此，它不适用于 Chrome 和 Safari，但适用于 Firefox。（ IE 尚未测试）。**这是我在header.php 中元**标记后的jQuery 和 js 文件引用：

```
<!-- Scripts -->
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="<?php bloginfo('template_url'); ?>/js/scrolling.js"></script>
<!-- End of Scripts -->

<!-- CSS links -->

<?php wp_enqueue_script("jquery"); ?>
<?php wp_head(); ?>

</head> 
```

这是我的 js 文件，非常简单：

```
$(document).ready(function()
{

  var v = $('div.nav-bar li a:last').addClass('scrollToBottom');
    v.click(function()
    {
    $('html,body').animate( {scrollTop: $(document).height() }, 1600);
      console.log('hello');
      return false;
    });

}); 
```

我的导航栏是在functions.php 中使用类“nav-bar”动态创建的。因此，我添加了 console.log 只是为了确保 JS 正常工作，并且确实如此，当您单击联系人时会触发 click 函数但没有任何反应。抱歉，我无法上传任何图片。此外，它在静态时工作正常，但我不想要静态导航，它在 Firefox**中**工作......任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:24:35.527

你不应该`<?php wp_enqueue_script("jquery"); ?>`在你的`header.php`文件中使用。[`wp_enqueue_script()`](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)应该添加到您的`functions.php`文件中并相应地使用`add_action('wp_enqueue_scripts', 'function_name')`.

那么你也不需要添加`<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>`。

WordPress 在[无冲突](http://codex.wordpress.org/Function_Reference/wp_enqueue_script#jQuery_noConflict_Wrappers)模式下加载 jQuery。所以你的 jQuery 应该是这样的：

```
jQuery(document).ready(function($)
{
 // your code here
}); 
```

# javascript - 在选择下拉更改隐藏/显示复选框取决于选项值

> ID：15530086
> 
> 赞同：0
> 
> 时间：2013-03-20T17:04:32.803
> 
> 标签：javascript, jquery

所以我有一系列按钮，用于关闭/打开一周中每一天的所有复选框，目前看起来真的很乱，所以我想把所有按钮变成一个下拉选择字段，在更改例如，星期一的选项将运行星期一 jquery 以隐藏所有星期一复选框。

这是html

```
<input type='submit' name='submit_performances' value='update all'>
    <input type='button' id='select-all-toggle' name='select-all-toggle' value='Hide/Show all Performances'>
    <input type='button' id='select-all-toggle-monday' name='select-all-toggle-monday' value='Hide/Show all Monday Performances'>
    <input type='button' id='select-all-toggle-tuesday' name='select-all-toggle-tuesday' value='Hide/Show all Tuesday Performances'>
    <input type='button' id='select-all-toggle-wednesday' name='select-all-toggle-wednesday' value='Hide/Show all Wednesday Performances'>
    <input type='button' id='select-all-toggle-thursday' name='select-all-toggle-thursday' value='Hide/Show all Thursday Performances'>
    <input type='button' id='select-all-toggle-friday' name='select-all-toggle-friday' value='Hide/Show all Friday Performances'>
    <input type='button' id='select-all-toggle-saturday' name='select-all-toggle-saturday' value='Hide/Show all Saturday Performances'>
    <input type='button' id='select-all-toggle-sunday' name='select-all-toggle-sunday' value='Hide/Show all Sunday Performances'>
    </form> 
```

这是jQuery

```
<script>
$(document).ready(function() {
    $('#select-all-toggle').toggle(
        function() {
            $('.select-all-identifier').prop('checked', true);
        },
        function() {
            $('.select-all-identifier').prop('checked', false);
        }
    );
});

$(document).ready(function() {
    $('#select-all-toggle-monday').toggle(
        function() {
            $('.monday').prop('checked', true);
        },
        function() {
            $('.monday').prop('checked', false);
        }
    );
});

$(document).ready(function() {
    $('#select-all-toggle-tuesday').toggle(
        function() {
            $('.tuesday').prop('checked', true);
        },
        function() {
            $('.tuesday').prop('checked', false);
        }
    );
});

$(document).ready(function() {
    $('#select-all-toggle-wednesday').toggle(
        function() {
            $('.wednesday').prop('checked', true);
        },
        function() {
            $('.wednesday').prop('checked', false);
        }
    );
});

$(document).ready(function() {
    $('#select-all-toggle-thursday').toggle(
        function() {
            $('.thursday').prop('checked', true);
        },
        function() {
            $('.thursday').prop('checked', false);
        }
    );
});

$(document).ready(function() {
    $('#select-all-toggle-friday').toggle(
        function() {
            $('.friday').prop('checked', true);
        },
        function() {
            $('.friday').prop('checked', false);
        }
    );
});

$(document).ready(function() {
    $('#select-all-toggle-saturday').toggle(
        function() {
            $('.saturday').prop('checked', true);
        },
        function() {
            $('.saturday').prop('checked', false);
        }
    );
});

$(document).ready(function() {
    $('#select-all-toggle-sunday').toggle(
        function() {
            $('.sunday').prop('checked', true);
        },
        function() {
            $('.sunday').prop('checked', false);
        }
    );
});
</script> 
```

任何帮助将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:13:46.407

检查文档ftw！jquery 文档有一个事件可以处理这个问题，这是页面：

[http://api.jquery.com/change/](http://api.jquery.com/change/)

如果您向下滚动一点，您会看到有一个交互式示例显示它如何与选择框一起工作，如果我没记错的话，这正是您所追求的。

此外，还有一些基于您的示例代码的通用 javascript 提示：

1.  正如上面评论中提到的那样，您只需要准备一个文档，您就可以将所有代码放入该单个函数中。

2.  不要重复自己！您可以通过解析选择器字符串将所有这些单独的方法转换为一种方法。如果你在每个按钮上放置两个类而不是一个 ID，你可以有效地削减这里的大部分代码。第一节课是`select-all-toggle`星期几，第二节课是星期几。然后，您可以使用选择器在任何元素上运行切换和更改事件`.select-all-toggle`，并使用 jquery`$(el).attr('class')`拉出第二个类并取回当天的值。

我绝对可以在这里为您写一个更清晰的答案，但我认为这不利于学习。阅读这里的建议并尝试修改你的代码——我敢打赌你可以在我不给你答案的情况下完成这项工作:)

# jquery - 获取 jquery 选择器数组的第 n 个对象

> ID：15530089
> 
> 赞同：0
> 
> 时间：2013-03-20T17:04:35.180
> 
> 标签：jquery

例如，我想获取此选择器数组中第二个对象的滚动位置

```
alert($("#sites > div").eq(2).scrollTop()); 
```

我知道这很简单，但我似乎无法做到正确..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:06:31.323

JavaScript 中的数组是从零开始的。所以第二个对象在 position `1`。因此，您将不得不使用`eq(1)`而不是`eq(2)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:23:42.557

除了 Vivin 指出的小错误（这里不太相关），我只是误解了函数 scrollTop。我一直在寻找的是：

```
alert($("#sites > div").eq(1).position().top); 
```

愚蠢的我，但是昨天我遇到这个问题时已经很晚了，所以这就是我的借口。

# jquery - 成功回调后如何添加

> ID：15530091
> 
> 赞同：1
> 
> 时间：2013-03-20T17:04:36.940
> 
> 标签：jquery

基本上我需要清除这个表单，clearform:true 没有影响，如果我清空 submitHandler 中的文本框，则不会发送值。

```
$("#bottomContent").on('click', "#Button6", function(){
$("#Form6").validate({
    errorContainer: "#Msg6",
    errorLabelContainer: "#Msg6 ul",
    errorElement: "li",
    resetForm: true,
    submitHandler: function(form) {
        $('#prcs6').fadeIn('fast').delay(2000).fadeOut('fast');
        $('#StartDate, #EndDate').delay(2000);
        form.submit();
        return false;

    },
    rules: {
        StartDate: {
            required: {
                depends: function(element) {
                    return !$('#AllDates').is(':checked');
                }
            }
        },
        EndDate: {
            required: {
                depends: function(element) {
                    return $('#StartDate').val()!="";
                }
            }
        }
    },
    messages: {
        StartDate: {
            required: "Please enter a starting date"
        },
        EndDate: {
            required: "Please enter an ending date"
        }
    }
});
}); 
```

我也无法获得提供的成功方法来做任何事情。提交后是否有一种简单的方法来清空输入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:41:33.477

事实证明这发生在 Chrome 中，在提交之前清除表单字段仍然在 FF 中保留值。这是我的工作

```
submitHandler: function(form) {
    $('#prcs6').fadeIn('fast').delay(2000).fadeOut('fast');
    form.submit();
    setTimeout(function(){ // Delay for Chrome
            $('#StartDate, #EndDate').val(''); // blank the input
    }, 500);
    return false;
}, 
```

# rtc - 在 RTC 命令行界面中限定存储库工作区的流目标

> ID：15530093
> 
> 赞同：3
> 
> 时间：2013-03-20T17:04:38.887
> 
> 标签：rtc

我有一个具有默认流目标的存储库工作区。我想编辑流目标并使其仅适用于少数组件。这可以通过 RTC Eclipse 客户端实现。如何从 RTC 命令行界面实现相同的功能。请参考 RTC 3.0.1.3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:58:45.587

我不确定该 API 是否适用于 3.x，或者仅适用于 4.x，但这个[命令](https://jazz.net/help-dev/clm/index.jsp?topic=%2Fcom.ibm.team.scm.doc%2Ftopics%2Fset_flowtarget.html)[序列`lscm`](https://jazz.net/help-dev/clm/index.jsp?topic=%2Fcom.ibm.team.scm.doc%2Ftopics%2Fset_flowtarget.html)似乎产生了一个作用域流目标：

```
# Set a component as the flow target
$ lscm workspace flowtarget TestWorkspace1 TestStream1 -C TestComp2  -r lo
Successfully updated the flow target.

# View workspace flow target that was scoped to specific components
$ lscm workspace flowtarget TestWorkspace1 TestStream1 -r <repo>
(1352) "TestStream1" (scoped) (current)
The following components flow from/to this flow target:
  (1351) "TestComp2" 
```

[您可以看到Rational Team Concert 4.0.1 M4 Milestone](https://jazz.net/downloads/rational-team-concert/releases/4.0.1?p=releaseNotes)中引入的该命令，因此它可能在 RTC3.x 中不可用。

# prolog - Prolog中列表倒置的声明式解释

> ID：15530097
> 
> 赞同：1
> 
> 时间：2013-03-20T17:04:40.940
> 
> 标签：prolog, declarative

我在加入声明式推理时遇到了一些问题......所以我在这里问你我的推理是否正确，或者是否有问题，或者我是否遗漏了什么......

我有以下问题：**编写一个反转列表元素的 Prolog 程序**

例如，如果我调用类似：

myreverse([a,b,c,d,e],X)。我必须获得 X=[e,d,c,b,a]

我有以下解决方案：

```
naiverev([],[]).  
naiverev([H|T],R):- naiverev(T,RevT),
                    append(RevT,[H],R). 
```

这是我的解释：

我有一个事实是空列表的逆是一个空列表。

如果第一个列表不为空，则事实不正确且不匹配，因此继续下一条规则。

规则说：证明列表 R 是列表 [H|T] 的逆的程序

我可以通过以下方式从右到左阅读逻辑含义：

**如果 naivrev(T, RevT) AND append(RevT, [H], R) 为 TRUE ---> naivrev([H|T],R) 为 TRUE**

所以（在规则的主体中）我**假设**“函数” **naivrev(T,RevT)**如果 RevT 是 T 的倒数则响应 TRUE，否则响应 FALSE。

同时我**假设* **append(RevT,[H],R)**如果 R 为 [H|RevT] 则响应 TRUE，否则响应 FALSE。

然后，如果规则体的两个部分都为 TRUE，则程序可以推断 HEAD 为 TRUE（在这种情况下，R 是 [H|T] 的倒数）

这个推理好还是我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:55:28.653

与前两次一样，您再次将 Prolog 的计算引擎与纯声明式阅读混合在一起。每当您在程序上说“规则不匹配所以继续前进”或类似的话时，您是在调用 Prolog 的算法来解释正在发生的事情，而不是逻辑。但是你正在变得更好，因为你的其他东西比以前更接近了。

规则一：空列表的反面就是空列表。（和你一样。）

规则2：[H|T]的逆是T的逆，称为RevT，附加到列表[H]。

当然，使这项工作有效的原因是 Prolog 将尝试规则 1，当它不匹配时，它将尝试规则 2，并递归地建立结果（您可能意识到，以一种非常低效的方式）。*但是这种检查规则并在它们之间进行选择以及如何执行该过程*的“使其开始”是Prolog添加到声明性或逻辑语句中的内容。

您对逻辑含义的解读是正确的：如果 naiverev(T, RevT) 为真且 append(RevT, [H], R) 为真，则 naiverev([H|T], R) 为真。这就像@false 在您之前的问题中解释的那样，所以我会说您肯定开始明白了。你关于身体真实导致头部真实的言论是正确的。

干得好，看起来你得到了它。:)

# c# - 如何转换任务 到一个任务 ?

> ID：15530099
> 
> 赞同：26
> 
> 时间：2013-03-20T17:04:46.630
> 
> 标签：c#, task, async-await

由于 C# 的 Task 是一个类，因此您显然不能将 a 强制`Task<TDerived>`转换为`Task<TBase>`.

但是，您可以这样做：

```
public async Task<TBase> Run() {
    return await MethodThatReturnsDerivedTask();
} 
```

有没有我可以调用的静态任务方法来获取一个`Task<TDerived>`基本上只是指向底层任务并转换结果的实例？我想要类似的东西：

```
public Task<TBase> Run() {
    return Task.FromDerived(MethodThatReturnsDerivedTask());
} 
```

这样的方法存在吗？仅出于此目的使用异步方法是否有任何开销？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-20T17:07:44.720

> 这样的方法存在吗？

不。

> 仅出于此目的使用异步方法是否有任何开销？

是的。但这是最简单的解决方案。

请注意，更通用的方法是扩展方法，`Task`例如`Then`. Stephen Toub[在一篇博](http://blogs.msdn.com/b/pfxteam/archive/2012/08/15/implementing-then-with-await.aspx)文中对此进行了探讨，我最近[将其合并到 AsyncEx](http://nitoasyncex.codeplex.com/wikipage?title=TaskExtensions&referringTitle=Documentation)中。

使用`Then`，您的代码将如下所示：

```
public Task<TBase> Run()
{
  return MethodThatReturnsDerivedTask().Then(x => (TBase)x);
} 
```

另一种开销略少的方法是创建自己的`TaskCompletionSource<TBase>`并使用派生结果完成它（`TryCompleteFromCompletedTask`在我的 AsyncEx 库中使用）：

```
public Task<TBase> Run()
{
  var tcs = new TaskCompletionSource<TBase>();
  MethodThatReturnsDerivedTask().ContinueWith(
      t => tcs.TryCompleteFromCompletedTask(t),
      TaskContinuationOptions.ExecuteSynchronously);
  return tcs.Task;
} 
```

或（如果您不想依赖 AsyncEx）：

```
public Task<TBase> Run()
{
  var tcs = new TaskCompletionSource<TBase>();
  MethodThatReturnsDerivedTask().ContinueWith(t =>
  {
    if (t.IsFaulted)
      tcs.TrySetException(t.Exception.InnerExceptions);
    else if (t.IsCanceled)
      tcs.TrySetCanceled();
    else
      tcs.TrySetResult(t.Result);
  }, TaskContinuationOptions.ExecuteSynchronously);
  return tcs.Task;
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-03-20T17:14:33.797

> 这样的方法存在吗？仅出于此目的使用异步方法是否有任何开销？

对此没有内置方法，这确实会导致开销。

“最轻量”的替代方案是使用 a`TaskCompletionSource<T>`为此创建一个新任务。这可以通过像这样的扩展方法来完成：

```
static Task<TBase> FromDerived<TBase, TDerived>(this Task<TDerived> task) where TDerived : TBase
{
     var tcs = new TaskCompletionSource<TBase>();

     task.ContinueWith(t => tcs.SetResult(t.Result), TaskContinuationOptions.OnlyOnRanToCompletion);
     task.ContinueWith(t => tcs.SetException(t.Exception.InnerExceptions), TaskContinuationOptions.OnlyOnFaulted);
     task.ContinueWith(t => tcs.SetCanceled(), TaskContinuationOptions.OnlyOnCanceled);

     return tcs.Task;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-04T12:19:04.000

你可以试试这个： `task.ContinueWith<TDerived>( t => (TDerived)t.Result);`

# google-app-engine - 具有多字段解析的 Google 云端点 RequestMessage

> ID：15530101
> 
> 赞同：2
> 
> 时间：2013-03-20T17:04:51.157
> 
> 标签：google-app-engine, python-2.7, google-cloud-endpoints

云端点 ResponseMessage 对我来说似乎很简单。如果我有一个响应消息类

```
class FoodieResponseMessage(messages.Message):
  name = messages.StringField(1)
  fav_food = messages.StringField(2)
  city = messages.StringField(3) 
```

调用它很简单

```
FoodieResponseMessage(name="A", fav_food="B", city="C") 
```

但是一个`RequestMessage`有多个字段的呢？我从服务端点方法得到的只是一个`request`对象。我怎么知道哪个领域去哪里？

```
class FoodieRequestMessage(messages.Message):
  name = messages.StringField(1)
  id = messages.StringField(2)
  sitting_table = messages.StringField(3)

 @endpoints.method(FoodieRequestMessage, FoodieResponseMessage)
 def process(self, request):
   name = request.name
   id = request.id
   table = request.sitting_table 
```

请求如何匹配该字段，以便我最终不会得到用户`sitting_table`的`request.name`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T17:40:52.247

您的方法需要是 API 类的成员：

```
from protorpc import remote

class FoodieAPI(remote.Service):

  @endpoints.method(FoodieRequestMessage, FoodieResponseMessage)
  def process(self, request):
    # Handle request 
```

由于`process`是`remote.Service`子类的成员，因此由创建的实际处理程序

```
application = endpoints.api_server([FoodieApi]) 
```

知道如何将 JSON 转换为您指定的本机消息请求类 ( `FoodieRequestMessage`)，并且还希望您返回您指定的响应类的实例 ( `FoodieResponseMessage`)，因为它也可以将其转换回 JSON。

例如：

```
>>> import json
>>> from protorpc import protojson
>>>
>>> payload = json.dumps({
>>>     'name': 'Dan', 
>>>     'fav_food': 'Mac and Cheese', 
>>>     'city': 'San Francisco'
>>> })
>>> message = protojson.decode_message(FoodieResponseMessage, payload)
>>> message
<FoodieResponseMessage
 name: u'Dan'
 fav_food: u'Mac and Cheese'
 city: u'San Francisco'> 
```

所以当你的请求有效载荷是

```
{"city": "San Francisco", "fav_food": "Mac and Cheese", "name": "Dan"} 
```

您方法中的`request`对象将具有

```
>>> message.name
u'Dan'
>>> message.fav_food
u'Mac and Cheese'
>>> message.city
u'San Francisco' 
```

# mysql - 在查询中显示多个表

> ID：15530102
> 
> 赞同：-4
> 
> 时间：2013-03-20T17:04:52.687
> 
> 标签：mysql, sql

我目前正在将来自 twitter 的推文存储在数据库中，并将用户字段存储在单独的表中。然后我有一个外键，它将用户 ID 链接到推文。我想知道如何显示两个表中的所有信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:07:22.697

使用内连接。

```
select *
from tweets inner join users on tweets.user_id = users.user_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:08:26.670

您没有提供任何架构信息，所以我做出了假设。

```
select tweet, date, username from tweets
join user on user.id=tweets.userid; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T17:07:14.883

```
Select t.message, u.name, u.email
  From Tweets t, UsersInfo u
 Where t.userid = u.id 
```

# parsing - 关于这个 Shift/Reduce 错误，Irony 告诉我什么？

> ID：15530104
> 
> 赞同：1
> 
> 时间：2013-03-20T17:05:06.237
> 
> 标签：parsing, powershell, shift-reduce-conflict, irony

我正在使用此处描述的语法为 PowerShell 语言编写解析器：http: [//www.microsoft.com/en-us/download/details.aspx?id=9706](http://www.microsoft.com/en-us/download/details.aspx?id=9706)。

我使用了 Irony，Irony Grammar Explorer 报告了一些 shift/reduce 和 reduce/reduce 错误。这把我难住了，因为我不确定它在告诉我什么。

```
状态 S79（不足）
  输入上的 Shift-reduce 冲突： [ , + dash ++ dashdash
  移位项目：
    cast_expression -> type_literal ·unary_expression
    unary_expression -> ·primary_expression
    primary_expression -> ·value
    值 -> ·圆括号表达式
    括号表达式 -> ·（管道）
    值 -> ·sub_expression
    sub_expression -> ·$( statement_list_opt )
    值 -> ·array_expression
    array_expression -> ·@( statement_list_opt )
    值 -> ·script_block_expression
    script_block_expression -> ·{ script_block }
    值 -> ·hash_literal_expression
    hash_literal_expression -> ·@{ hash_literal_body_opt }
    值 -> ·文字
    文字 -> ·integer_literal
    integer_literal -> ·decimal_integer_literal
    integer_literal -> ·hexadecimal_integer_literal
    文字 -> ·real_literal
    文字 -> ·string_literal
    string_literal -> ·expandable_string_literal
    string_literal -> ·verbatim_string_literal
    值 -> ·type_literal
    type_literal -> ·[ type_spec ]
    值 -> ·变量
    primary_expression -> ·member_access
    member_access -> ·primary_expression Unnamed6 member_name
    primary_expression -> ·element_access
    element_access -> ·primary_expression [表达式]
    primary_expression -> ·post_increment_expression
    post_increment_expression -> ·primary_expression ++
    primary_expression -> ·post_decrement_expression
    post_decrement_expression -> ·primary_expression 破折号
    unary_expression -> ·expression_with_unary_operator
    expression_with_unary_operator -> ·, unary_expression
    expression_with_unary_operator -> ·-not unary_expression
    expression_with_unary_operator -> ·！一元表达式
    expression_with_unary_operator -> ·-bnot unary_expression
    expression_with_unary_operator -> ·+ unary_expression
    expression_with_unary_operator -> ·dash unary_expression
    expression_with_unary_operator -> ·pre_increment_expression
    pre_increment_expression -> ·++ unary_expression
    expression_with_unary_operator -> ·pre_decrement_expression
    pre_decrement_expression -> ·dashdash unary_expression
    expression_with_unary_operator -> ·cast_expression
    cast_expression -> ·type_literal 一元表达式
    expression_with_unary_operator -> ·-拆分一元表达式
    expression_with_unary_operator -> ·-join unary_expression
  减少项目：
    值-> type_literal · [assignment_operator 。:: [ ++ dashdash , .. format_operator * / % + dash as ccontains ceq cge cgt cle clike clt cmatch cne cnotcontains cnotlike cnotmatch contains creplace csplit eq ge gt icontains ieq ige igt ile ilike ilt imatch ine inotcontains inotlike inotmatch ireplace is not isplit join le like lt match ne notcontains notlike notmatch replace split -band -bor -bxor -and -or -xor 2>&1 1>&2 file_redirection_operator | ; new_line_character EOF } ) = ]]
  转换：unary_expression->S187, primary_expression->S158, value->S60, parenthesized_expression->S61, (->S62, sub_expression->S63, $(->S64, array_expression->S65, @(->S66, script_block_expression ->S67, {->S68, hash_literal_expression->S69, @{->S70, literal->S71, integer_literal->S72, decimal_integer_literal->S73, hexadecimal_integer_literal->S74, real_literal->S75, string_literal->S76, expandable_string_literal->S77, verbatim_string_literal->S78, type_literal->S79, [->S80, variable->S81, member_access->S82, element_access->S83, post_increment_expression->S84, post_decrement_expression->S85, expression_with_unary_operator->S97, ,->S98, -not->S99, !->S100, -bnot->S101, +->S102, 破折号->S103, pre_increment_expression->S104, ++->S105,pre_decrement_expression->S106，dashdash->S107，cast_expression->S108，-split->S109，-join->S110

```

如果你想看看自己，代码在这里：[https ://github.com/Pash-Project/Pash/tree/method-invocation/Source/Pash.System.Management](https://github.com/Pash-Project/Pash/tree/method-invocation/Source/Pash.System.Management)

**编辑**：我认为这让人困惑的输入是：

```
[int] +7 
```

这是添加还是铸造？

# javascript - 动态添加选择框

> ID：15530110
> 
> 赞同：0
> 
> 时间：2013-03-20T17:05:18.527
> 
> 标签：javascript, jsp

我正在使用 JSP 创建一个应用程序。在其中一个页面中，用户需要输入一些症状。现在我想给一个按钮。当用户单击此按钮时，将创建一个新的选择框。

我搜索了很多，只能找到如何动态添加选项来选择，但我想要新的选择框

有人请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:22:44.150

这是一个示例代码：

```
<html>
  <head>
    <script type="text/javascript">
        function addSelectBox ()
        {
            var parentDiv = document.getElementById ("main");
            var selectElement = document.createElement ("select");
            for (var i=0;i < 5;i++)
            {
                var option = new Option ("Text " + i, "Value" + i);
                selectElement.options[selectElement.options.length] = option;
            }
            parentDiv.appendChild (selectElement);
        }
    </script>
  </head>
  <body>
    <div id="main">
        <input type="button" onclick="addSelectBox ()" name="clickme" value="Add Select Box" />
    </div>
  </body>
</html> 
```

**编辑：**

对于 JSP（如果您在 ArrayList 中有选项）：

```
 <html>
      <head>
<%
      int totalElements = 5;
      ArrayList r = new ArrayList (totalElements);
      for (int i=1;i <= totalElements;i++)
      {
         r.add (String.valueOf (i));
      }
%>
        <script type="text/javascript">
            function addSelectBox ()
            {
                var parentDiv = document.getElementById ("main");
                var selectElement = document.createElement ("select");
                var option;
<%
                for (int i=0;i <= r.size();i++)
                {
%>
                    option = new Option ('<%=r.get (i)%>', '<%=r.get (i)%>');
                    selectElement.options[selectElement.options.length] = option;
<%
                }
%>
                parentDiv.appendChild (selectElement);
            }
        </script>
      </head>
      <body>
        <div id="main">
            <input type="button" onclick="addSelectBox ()" name="clickme" value="Add Select Box" />
        </div>
      </body>
    </html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:13:53.980

```
$(".your-button").click(function() {
    var selectBoxHtml = ["<select>"];
    var sourceItems = [4,5,6];
    for (var sourceIndex = 0; sourceIndex < sourceItems.length; sourceIndex++) {
        selectBoxHtml.push('<option value="' + sourceIndex + '">' + sourceItems[sourceIndex] + '</option');
    }
    $(this).after(selectBoxHtml.join("") + "</select>");
}); 
```

一旦 sourceItems 是动态的，请务必转义它。

# php - iframe 中的 Fancybox 幻灯片，如 facebook 相册中一样

> ID：15530111
> 
> 赞同：0
> 
> 时间：2013-03-20T17:05:20.357
> 
> 标签：php, jquery, facebook, fancybox, slideshow

我有success.php页面，我在其中获取已登录用户的相册。每个相册都是可点击的，并且用户在albumphoto.php上被重定向。此页面从 GET 请求中获取 albumId 并显示该相册的所有照片。单击任何专辑时，我将打开一个 Jquery Fancybox iframe。目前，它与 iframe 中的所有照片相呼应。下面是代码。

页面：Success.php

```
 <a class="fancybox fancybox.iframe" href="albumphoto.php?album_id=<?php echo $album['id']?>" style="text-decoration: none"><?php echo $album['name'];?> 
```

页 : 相册照片.php

```
 $album_id = $_GET['album_id'];

 $photos = $facebook->api("/{$album_id}/photos"); // just get that one album
foreach($photos['data'] as $photo)
{
    echo "<img src='{$photo['source']}'  />";   
} 
```

我想在 iframe 中为所有照片制作幻灯片。建议我如何做到这一点？我没有得到任何帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:48:58.260

您可以在页面的 document.ready 函数脚本标签下添加以下代码。

```
$.fancybox([
            <?php
            foreach($photos['data'] as $photo)
            {
                echo "'{$photo['source']}',\n";
            }
            ?>
        ], {
            'padding'           : 0,
            'transitionIn'      : 'elastic',
            'transitionOut'     : 'elastic',
            'type'              : 'image',
            'scrolling'         :  'auto',
            'width'             : 'auto',
            'height'            : 'auto',
            'autoResize'            : true,
            'nextClick'         :  true,
            'closeBtn'          :  false,
            'changeFade'        : 0
        }); 
```

很高兴解决这个问题:)

# php - 我正在尝试编写一个 twitter 程序来获取我的时间线

> ID：15530112
> 
> 赞同：0
> 
> 时间：2013-03-20T17:05:22.273
> 
> 标签：php, twitter, twitter-oauth

我正在尝试编写一个 twitter 程序来获取我的时间线。我正在使用 Abraham Williams 身份验证码

> 出现的错误 注意：未定义的属性：第 12 行 G:\xampp\htdocs\fake.php 中的 stdClass::$screen_name 连接为 @ 注意：试图获取 G:\xampp\htdocs\fake 中非对象的属性。第 20 行的 php 推文：

代码

```
<?php
// Read in our saved access token/secret
$accessToken =file_get_contents("twitteroauth/access_token.txt");

$accessTokenSecret = file_get_contents("twitteroauth/access_token_secret.txt");

// Create our twitter API object
require_once("twitteroauth/twitteroauth.php");
$oauth = new TwitterOAuth('mykey', 'secret key', $accessToken, $accessTokenSecret);
// Send an API request to verify credentials
$credentials = $oauth->get("account/verify_credentials");
echo "Connected as @" . $credentials->screen_name;
// Post our new "hello world" status

$home_timeline = $oauth->get('statuses/home_timeline',array('count' => 40));

// how do i get the information out of home_timeline

foreach ($home_timeline as $status) {
  echo "Tweet: $status->text<br />\n";
}
?> 
```

# jquery - 在选择 jquery 中包含选项

> ID：15530113
> 
> 赞同：1
> 
> 时间：2013-03-20T17:05:24.137
> 
> 标签：jquery, ajax

大家好，我想在 ajax 调用后清空选择并重新填充

这是我的代码：

```
(document).ready(function(){
    $("#nation").change(function() {
        var nation_id = $(this).val();
        change_city_by_nation(nation_id);
    });

    function change_city_by_nation(nation_id){
            var site_url_city ="<?php echo(site_url('/backend/city/get_city_by_nation_id')); ?>";
            $.ajax({   
                url: site_url_city, 
                async: false,
                type: "POST", 
                data: "nation_id="+nation_id, 
                dataType: "html", 

                success: function(data) {
                    $('#city').html(data);
                    $('#city').prepend("<option value='0' selected='selected'>All city</option>");

                }
             });
        }
});

 <select name="nation" id="nation" style="width:180px;" >
     <option value="2">Nation2</option>
     <option value="3">Nation3</option>
</select>
<select name="city" id="city" style="width:180px;" >
     <option value="0">All city</option>
</select> 
```

它在 FF 和 Chrome 中运行良好，而不是在 Internet Explorer 中，因为我认为 html 存在问题。我尝试过：

```
$('#city').empty().append(data); 
```

但是问题没有解决

如果我提醒数据，这是我的输出：

```
<select name="citylist">
<option value="39">Adelaide</option>
<option value="43">Alice Springs</option>
<option value="44">Brisbane</option>
<option value="45">Cairns</option>
<option value="36">Canberra</option>
<option value="31">Darwin</option>
<option value="37">Gold Coast</option>
<option value="32">Margaret River - Regione dei Vini</option>
<option value="40">Melbourne</option>
<option value="41">Palm Cove</option>
<option value="35">Perth</option>
<option value="42">Port Douglas</option>
<option value="33">Sydney</option>
<option value="34">Tasmania</option>
<option value="38">Townsville</option>
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:13:19.493

这不起作用的原因是因为您将 a 插入`<select>` *到*a`<select>`中。从您的响应中删除该元素，您的代码将正常工作。

# python - 如何定义两个位置参数的互斥组？

> ID：15530117
> 
> 赞同：15
> 
> 时间：2013-03-20T17:05:41.403
> 
> 标签：python, python-2.7, argparse

我想用`argparse`以下两种方式制作一些代码：

```
./tester.py all
./tester.py name someprocess 
```

即要么`all`被指定或`name`带有一些额外的字符串。

我试图实现如下：

```
import argparse
parser = argparse.ArgumentParser()
group = parser.add_mutually_exclusive_group()
group.add_argument('all', action='store_true', \
        help = "Stops all processes")
group.add_argument('name', \
        help = "Stops the named process")

print parser.parse_args() 
```

这给了我一个错误

```
ValueError: mutually exclusive arguments must be optional 
```

知道怎么做吗？在这种情况下，我也想避免使用子解析器。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-03-24T06:06:24.383

这个问题已经有一年了，但是由于所有答案都暗示了不同的语法，所以我会给出更接近 OP 的内容。

首先，OP代码的问题：

位置`store_true`没有意义（即使它是允许的）。它不需要任何参数，所以它总是`True`. 给予“全部”将产生`error: unrecognized arguments: all`。

另一个参数采用一个值并将其分配给`name`属性。它不接受`process`附加值。

关于`mutually_exclusive_group`. 该错误消息甚至在`parse_args`. 为了使这样一个组有意义，所有的选择都必须是可选的。这意味着要么有一个`--`标志，要么是一个`nargs`等于`?`或的位置`*`。并且在小组中拥有多个这样的位置是没有意义的。

使用`--all`and的最简单替代方法`--name`是这样的：

```
p=argparse.ArgumentParser()
p.add_argument('mode', choices=['all','name'])
p.add_argument('process',nargs='?')

def foo(args):
    if args.mode == 'all' and args.process:
        pass # can ignore the  process value or raise a error
    if args.mode == 'name' and args.process is None:
        p.error('name mode requires a process')

args = p.parse_args()
foo(args) # now test the namespace for correct `process` argument. 
```

接受的命名空间如下所示：

```
Namespace(mode='name', process='process1')
Namespace(mode='all', process=None) 
```

`choices`模仿子解析器参数的行为。之后做自己的测试`parse_args`通常比做`argparse`一些特别的事情更简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-22T10:32:09.223

```
import argparse
parser = argparse.ArgumentParser()
group = parser.add_mutually_exclusive_group(required=True)
group.add_argument('-a','--all', action='store_true', \
        help = "Stops all processes")
group.add_argument('-n','--name', \
        help = "Stops the named process")

print parser.parse_args() 
```

./tester.py -h

```
usage: zx.py [-h] (-a | -n NAME)

optional arguments:
  -h, --help            show this help message and exit
  -a, --all             Stops all processes
  -n NAME, --name NAME  Stops the named process 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-24T05:15:39.997

我同意这看起来完全像一个子解析器问题，并且如果您不想通过使用`--all`and使其成为可选参数`--name`，我的一个建议就是完全忽略`all`and`name`并使用以下语义：

1.  如果`tester.py`在没有任何参数的情况下调用，则停止所有进程。
2.  如果`tester.py`使用一些参数调用，则仅停止那些进程。

可以使用以下方法完成：

```
import argparse, sys
parser = argparse.ArgumentParser()
parser.add_argument('processes', nargs='*')
parsed = parser.parse(sys.argv[1:])
print parsed 
```

其行为如下：

```
$ python tester.py
命名空间（进程=[]）
$ python tester.py proc1
命名空间（进程=['proc1']）

```

或者，如果您坚持使用自己的语法，则可以创建自定义类。实际上，您没有“互斥组”的情况，因为我假设如果`all`指定了，您将忽略其余参数（即使`name`是其他参数之一），以及何时`name`指定，之后的任何其他内容将被视为进程的名称。

```
import argparse
import sys
class AllOrName(argparse.Action):
    def __call__(self, parser, namespace, values, option_string=None):
        if len(values)==0:
            raise argparse.ArgumentError(self, 'too few arguments')
        if values[0]=='all':
            setattr(namespace, 'all', True)
        elif values[0]=='name':
            if len(values)==1:
                raise argparse.ArgumentError(self, 'please specify at least one process name')
            setattr(namespace, 'name', values[1:])
        else:
            raise argparse.ArgumentError(self, 'only "all" or "name" should be specified')

parser = argparse.ArgumentParser()
parser.add_argument('processes', nargs='*', action=AllOrName)
parsed = parser.parse_args(sys.argv[1:])
print parsed 
```

具有以下行为：

```
$ python argparse_test.py 名称
用法：argparse_test.py [-h] [进程[进程...]]
argparse_test.py：错误：参数进程：请指定至少一个进程名称

$ python argparse_test.py 名称 proc1
命名空间（名称=['proc1']，进程=无）

$ python argparse_test.py 全部
命名空间（全部=真，进程=无）

$ python argparse_test.py 主机
用法：argparse_test.py [-h] [进程[进程...]]
argparse_test.py：错误：参数过程：只应指定“全部”或“名称”

$蟒蛇argparse_test.py
用法：argparse_test.py [-h] [进程[进程...]]
argparse_test.py：错误：参数过程：参数太少

```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-24T04:15:36.740

> “或带有一些附加字符串的名称。”

位置参数不能带额外的字符串

我认为最适合您的解决方案是（命名为 test.py）：

```
import argparse
p = argparse.ArgumentParser()
meg = p.add_mutually_exclusive_group()
meg.add_argument('-a', '--all', action='store_true', default=None)
meg.add_argument('-n', '--name', nargs='+')
print p.parse_args([])
print p.parse_args(['-a'])
print p.parse_args('--name process'.split())
print p.parse_args('--name process1 process2'.split())
print p.parse_args('--all --name process1'.split()) 
```

$蟒蛇测试.py

```
Namespace(all=None, name=None)
Namespace(all=True, name=None)
Namespace(all=None, name=['process'])
Namespace(all=None, name=['process1', 'process2'])
usage: t2.py [-h] [-a | -n NAME [NAME ...]]
t2.py: error: argument -n/--name: not allowed with argument -a/--all 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-04-04T12:25:16.343

这可能是您正在寻找的：

```
group.add_argument('--all', dest=is_all, action='store_true')
group.add_argument('--name', dest=names, nargs='+') 
```

传递 --name 然后将需要列表一个值并将它们存储为列表。

# java - 如何实例化 int 类型的 Stacks 数组？

> ID：15530118
> 
> 赞同：0
> 
> 时间：2013-03-20T17:05:42.263
> 
> 标签：java, arrays, stack, wildcard, towers-of-hanoi

我正在尝试创建一个堆栈数组，其中数组中的每个堆栈都是`int`.

如果我像这样创建数组：   `Stack<Integer>[] numbers = new Stack<Integer>[3];` ，则会出现编译错误“ `Cannot create a generic array of Stack<Integer>`”。所以，我试图用通配符类型而不是创建堆栈数组`Integer`，然后它就*没有*这个错误。

但是，如果我然后尝试像这样将一个`int`堆栈（通配符“ `?`”类型）推入其中一个：   `this.numbers[stackIndex].push(i);` ，则会出现编译错误“ `The method push(capture#1-of ?) in the type Stack<capture#1-of ?> is not applicable for the arguments (int)`”。

那么，我怎样才能正确地实例化一个 Stacks 类型的数组`int`呢？截至目前，我无法在这些堆栈上执行推送/弹出操作......

* * *

我的推理是尝试对河内塔游戏进行编程。我希望三个杆中的每一个都是 a`Stack`类型`int`，每个环都表示为`int`，并且三个杆一起包含为三个 Stacks 的数组。

* * *

这是一些示例代码：

```
import java.util.Stack;

public class StackTest {

    Stack<?>[] numbers;

    public StackTest(int stackLength) {
        this.numbers = new Stack<?>[stackLength];
    }

    public void fillStack(int stackIndex, int numRings) {
        for (int i = numRings; i >= 0; i--) {

            // this statement has a compile error!
            this.numbers[stackIndex].push(i);
        }
    }

    public static void main(String[] args) {
        int numberOfRods = 3;
        StackTest obj = new StackTest(numberOfRods);

        int rodNumber = 0, numberOfRings = 4;
        obj.fillStack(rodNumber, numberOfRings);
    }
} // end of StackTest 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:06:39.420

它必须是原始的`Stack[]`，或者您可以使用`List<Stack<YourClass>> lstStack = new ArrayList<Stack<YourClass>>()`.

在这种情况下，我宁愿使用

```
List<Stack<Integer>> lstStack = new ArrayList<Stack<Integer>>(stackLength); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T17:11:47.190

一种解决方案可能是：

```
public class StackInteger extends Stack<Integer> {
} 
```

接着：

```
StackInteger[] numbers = new StackInteger[3]; 
```

甚至：

```
Stack<Integer>[] numbers = new StackInteger[3]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T17:12:07.427

我的猜测是你应该推一个`Integer`而不是一个`int`：

```
this.numbers[stackIndex].push(Integer.valueOf(i)); 
```

# c - 函数中声明的结构指针

> ID：15530119
> 
> 赞同：2
> 
> 时间：2013-03-20T17:05:44.460
> 
> 标签：c, function, pointers, structure

这是对我不起作用的代码部分。我声明了一个指向结构的指针，并尝试在函数上使用它，尽管 c 表示它不能将主要人物转换为人物。

```
void display (char *s2,FILE *f1,int max);
void insert (FILE  *f1, struct person *p1);
void deletestring (FILE *f1,FILE *f2,char *s2,char *s1,char *file1,char *file2,int max);
void edit (FILE *f1,FILE *f2,char *s2,char *s1,char *file1,char *file2,struct person *p1,int max);
int main ()
{
    char s1[MAX],s2[MAX];
    FILE *f2,*f1;
    struct person
    {
           char id[MIN];
           char emer[MIN];
           char mbiemer[MIN];
           };
    struct person p1;
    struct person *pp1;
    pp1 = &p1;
    char *file1 = "f1.txt";
    char *file2 = "f2.txt";

    int zgjedhja=1;
    printf("Programi funksionon sipas shpjegimit \n :");
    printf("Shtypni 1 per te shtuar nje person \n Shtypni 2 per te ndryshuar informacionin e nje personi \n Shtypni 3 per te shfaqur te dhenat \n Shtypni 4 per te fshire nje person \n Shtypni -1 per te dale nga programi \n ");

    while (zgjedhja != -1 )
    {
          printf("Jepni zgjedhjen tuaj \n ");
          scanf(" %d " , & zgjedhja );
          switch (zgjedhja)
          {
                 case 1:      
                 f1=fopen(file1,"a");
                 insert (f1,pp1); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T17:07:45.937

该类型`struct person`具有`main`范围，因此在`insert`. 事实上，未指定成员的结构类型称为*不完整类型*。要消除此错误，请在函数之外声明结构。

```
struct person
{
    /* ... */
};

/* Function declarations. */

int main (void)
{
    /* ... */
} 
```

# mysql - 链接两个 MySQL 表

> ID：15530123
> 
> 赞同：0
> 
> 时间：2013-03-20T17:06:01.713
> 
> 标签：mysql

即使这已经在这里被问了十亿次，但没有一个对我有用。所以：我有两张桌子：

banhammer_bans： ![banhammer_bans](../Images/9d0b4196b8c3b97b5769931caaa060da.png)

和banhammer_players： ![banhammer_players](../Images/a02a433aae0e3cb8f7b6b64dba836a64.png)

我应该进行什么样的查询才能从与“player_id”和“creator_id”值对应的“players”表中获取名称值？我试过 JOINS 和 UNIONS 但没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:11:16.313

```
Select p.name, p.id as player_id, b.creator_id as creator_id
from banhammer_bans as b
inner join banhammer_players as p on p.id = b.player_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T17:08:56.073

你可以使用这样的东西：

```
select 
     * 
from 
     banhammer_bans, banhammer_players
where
     banhammer_players.player_id = banhammer_bans.id 
```

这也是一种Join，但它有一些效率问题。

# php - PayPal 自适应付款退款问题

> ID：15530133
> 
> 赞同：4
> 
> 时间：2013-03-20T17:06:19.847
> 
> 标签：php, codeigniter, paypal, paypal-adaptive-payments

我正在尝试将自适应支付链式支付完全退还给发件人，但我被卡住了。我正在使用 CodeIgniter 和[Andrew Angell 的出色库](http://www.binpress.com/app/paypal-adaptive-payments-pro-payflow-codeigniter-library/140)进行自适应支付。

我要退款的详细信息如下：（您可以在下面查看原始 xml 请求和响应）

```
Array
(
    [Errors] => Array
        (
        )

    [Ack] => Success
    [Build] => 5472483
    [CorrelationID] => 4d31bf900a109
    [Timestamp] => 2013-03-20T09:45:02.585-07:00
    [ActionType] => PAY_PRIMARY
    [CancelURL] => http://my-cancel-url.com
    [CurrencyCode] => TRY
    [FeesPayer] => PRIMARYRECEIVER
    [FundingTypes] => Array
        (
        )

    [IPNNotificationURL] => 
    [Memo] => 
    [PayKey] => my-paykey
    [PaymentInfo] => Array
        (
            [PendingRefund] => false
            [RefundAmount] => 0.00
            [SenderTransactionID] => 
            [SenderTransactionStatus] => COMPLETED
            [TransactionID] => my-transaction-id
            [TransactionStatus] => COMPLETED
        )

    [PreapprovalKey] => 
    [ReturnURL] => http://success-url-area.com
    [ReverseAllParallelPaymentsOnError] => false
    [SenderEmail] => sender@email.com
    [Status] => INCOMPLETE
    [TrackingID] => 
    [Receiver] => Array
        (
            [Amount] => 5.00
            [Email] => receiver@email.com
            [InvoiceID] => 
            [PaymentType] => SERVICE
            [Primary] => true
        )

    [XMLRequest] => <?xml version="1.0" encoding="utf-8"?><PaymentDetailsRequest xmlns="http://svcs.paypal.com/types/ap"><requestEnvelope xmlns=""><detailLevel>ReturnAll</detailLevel><errorLanguage>en_US</errorLanguage></requestEnvelope><payKey xmlns="">my-paykey</payKey></PaymentDetailsRequest>
    [XMLResponse] => <?xml version='1.0' encoding='UTF-8'?><ns2:PaymentDetailsResponse xmlns:ns2="http://svcs.paypal.com/types/ap"><responseEnvelope><timestamp>2013-03-20T09:45:02.585-07:00</timestamp><ack>Success</ack><correlationId>4d31bf900a109</correlationId><build>5472483</build></responseEnvelope><cancelUrl>http://my-cancel-url.com</cancelUrl><currencyCode>TRY</currencyCode><paymentInfoList><paymentInfo><transactionId>my-transaction-id</transactionId><transactionStatus>COMPLETED</transactionStatus><receiver><amount>5.00</amount><email>receiver@email.com</email><primary>true</primary><paymentType>SERVICE</paymentType><accountId>7VYWTSCQKWPAL</accountId></receiver><refundedAmount>0.00</refundedAmount><pendingRefund>false</pendingRefund><senderTransactionId>7P642947V2872150G</senderTransactionId><senderTransactionStatus>COMPLETED</senderTransactionStatus></paymentInfo><paymentInfo><receiver><amount>4.60</amount><email>soulsmasher@gmail.com</email><primary>false</primary><paymentType>SERVICE</paymentType><accountId>7UZSWUVKCU4UW</accountId></receiver><refundedAmount>0.00</refundedAmount><pendingRefund>false</pendingRefund></paymentInfo></paymentInfoList><returnUrl>http://success-url-area.com</returnUrl><senderEmail>sender@email.com</senderEmail><status>INCOMPLETE</status><payKey>my-paykey</payKey><actionType>PAY_PRIMARY</actionType><feesPayer>PRIMARYRECEIVER</feesPayer><reverseAllParallelPaymentsOnError>false</reverseAllParallelPaymentsOnError><sender><email>sender@email.com</email><accountId>Y2BSLXZ8DQYY2</accountId><useCredentials>false</useCredentials></sender></ns2:PaymentDetailsResponse>
) 
```

当我尝试执行退款时，提供支付密钥、交易 ID（我从上面的请求中获得）和发件人电子邮件（将获得退款）出现此错误（您可以在下面看到原始请求和响应）：

```
Array
(
    [Errors] => Array
        (
            [0] => Array
                (
                    [Receiver] => 
                    [Category] => Application
                    [Domain] => PLATFORM
                    [ErrorID] => 589061
                    [ExceptionID] => 
                    [Message] => The receiver sender@email.com is invalid for this refund
                    [Parameter] => sender@email.com
                    [Severity] => Error
                    [Subdomain] => Application
                )

        )

    [Ack] => Failure
    [Build] => 5472483
    [CorrelationID] => 2a1630b772ee0
    [Timestamp] => 2013-03-20T09:52:10.986-07:00
    [EncryptedTransactionID] => 
    [RefundFeeAmount] => 
    [RefundGrossAmount] => 
    [RefundHasBecomeFull] => 
    [RefundNetAmount] => 
    [RefundStatus] => 
    [RefundTransactionStatus] => 
    [TotalOfAllRefunds] => 
    [Receiver] => Array
        (
            [Amount] => 
            [Email] => 
            [InvoiceID] => 
            [PaymentType] => 
            [Primary] => 
        )

    [RawRequest] => <?xml version="1.0" encoding="utf-8"?><RefundRequest xmlns="http://svcs.paypal.com/types/ap"><requestEnvelope xmlns=""><detailLevel>ReturnAll</detailLevel><errorLanguage>en_US</errorLanguage></requestEnvelope><currencyCode>TRY</currencyCode><payKey xmlns="">my-paykey</payKey><receiverList xmlns=""><receiver xmlns=""><amount xmlns="">1.00</amount><email xmlns="">sender@email.com</email><paymentType xmlns="">SERVICE</paymentType></receiver></receiverList><transactionId xmlns="">1VL98806A27476639</transactionId></RefundRequest>
    [RawResponse] => <?xml version='1.0' encoding='UTF-8'?><ns3:FaultMessage xmlns:ns3="http://svcs.paypal.com/types/common" xmlns:ns2="http://svcs.paypal.com/types/ap"><responseEnvelope><timestamp>2013-03-20T09:52:10.986-07:00</timestamp><ack>Failure</ack><correlationId>2a1630b772ee0</correlationId><build>5472483</build></responseEnvelope><error><errorId>589061</errorId><domain>PLATFORM</domain><subdomain>Application</subdomain><severity>Error</severity><category>Application</category><message>The receiver sender@email.com is invalid for this refund</message><parameter>sender@email.com</parameter></error></ns3:FaultMessage>
)
1 
```

此外，当我不提供交易 ID 并将其余部分留给 PayPal 时，问题会发生变化（原始 XML 请求位于数组下方）：

```
Array
(
    [Errors] => Array
        (
            [0] => Array
                (
                    [Receiver] => 
                    [Category] => Application
                    [Domain] => PLATFORM
                    [ErrorID] => 589036
                    [ExceptionID] => 
                    [Message] => The currency code is missing or doesn't match the code in the payment request
                    [Parameter] => 
                    [Severity] => Error
                    [Subdomain] => Application
                )

        )

    [Ack] => Failure
    [Build] => 5472483
    [CorrelationID] => e3fc5e41040f3
    [Timestamp] => 2013-03-20T10:02:29.233-07:00
    [EncryptedTransactionID] => 
    [RefundFeeAmount] => 
    [RefundGrossAmount] => 
    [RefundHasBecomeFull] => 
    [RefundNetAmount] => 
    [RefundStatus] => 
    [RefundTransactionStatus] => 
    [TotalOfAllRefunds] => 
    [Receiver] => Array
        (
            [Amount] => 
            [Email] => 
            [InvoiceID] => 
            [PaymentType] => 
            [Primary] => 
        )

    [RawRequest] => <?xml version="1.0" encoding="utf-8"?><RefundRequest xmlns="http://svcs.paypal.com/types/ap"><requestEnvelope xmlns=""><detailLevel>ReturnAll</detailLevel><errorLanguage>en_US</errorLanguage></requestEnvelope><currencyCode>TRY</currencyCode><payKey xmlns="">AP-52A99028X8685964M</payKey><receiverList xmlns=""><receiver xmlns=""><amount xmlns="">1.00</amount><email xmlns="">sender@email.com</email><paymentType xmlns="">SERVICE</paymentType></receiver></receiverList></RefundRequest>
    [RawResponse] => <?xml version='1.0' encoding='UTF-8'?><ns3:FaultMessage xmlns:ns3="http://svcs.paypal.com/types/common" xmlns:ns2="http://svcs.paypal.com/types/ap"><responseEnvelope><timestamp>2013-03-20T10:02:29.233-07:00</timestamp><ack>Failure</ack><correlationId>e3fc5e41040f3</correlationId><build>5472483</build></responseEnvelope><error><errorId>589036</errorId><domain>PLATFORM</domain><subdomain>Application</subdomain><severity>Error</severity><category>Application</category><message>The currency code is missing or doesn't match the code in the payment request</message></error></ns3:FaultMessage>
)
1 
```

如您所见，我已经提供了 CurrencyCode，发件人的电子邮件地址也是从请求本身中获取的，以防止输入错误。即使我硬编码它也不会改变这种情况。

你能帮我吗，我错过了什么？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-23T05:51:00.850

[在此处查看](https://cms.paypal.com/mx/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_nvp_currency_codes)**贝宝** 所说的文档

```
Turkish Lira     TRY

NOTE:This currency is supported as a payment currency and a currency balance for in-country PayPal accounts only. 
```

# xml - 架构中的复杂类型

> ID：15530137
> 
> 赞同：0
> 
> 时间：2013-03-20T17:06:30.090
> 
> 标签：xml, xsd

在我的 xml 中，我有一个价格标签，我想限制小数位数和货币种类，我有这个：

```
 `<unit_price currency="$"> 4.00 </unit_price>` 
```

在 xsd 中，我收到此错误：

**E [Xerces] cos-applicable-facets：类型#AnonType_Price 不允许使用 Facet 'fractionDigits'。**

这是我的代码，请问我该如何解决？谢谢。

```
<xsd:complexType name="basePrice">
    <xsd:simpleContent>
        <xsd:extension base="xsd:double">
            <xsd:attribute name="currency" fixed="$"/>
        </xsd:extension>
    </xsd:simpleContent>
</xsd:complexType>

<xsd:complexType name="Price">
    <xsd:simpleContent>
        <xsd:restriction base="basePrice">
            *<xsd:fractionDigits value="2"/>*   
        </xsd:restriction >
    </xsd:simpleContent>
</xsd:complexType> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T21:44:22.307

您不能限制双精度数中的小数位数，只能限制小数位数。这是因为只有当数字以十进制表示时，计数数字才是有意义的操作。

# c# - n*n 矩阵的行列式

> ID：15530143
> 
> 赞同：1
> 
> 时间：2013-03-20T17:06:45.180
> 
> 标签：c#, matrix, linear-algebra, determinants

我正在尝试实现此处找到的代码和算法：

[矩阵的行列式](https://stackoverflow.com/questions/3013419/deteminant-of-matrix) 和这里： [如何计算矩阵行列式？n*n 或 5*5](https://stackoverflow.com/questions/5051528/how-to-calculate-matrix-determinant-nn-or-just-55)

但我坚持下去。

**我的第一个问题**是这个算法实际上使用了什么规则（因为在数学中显然有几个规则可以用来计算行列式） - 所以我想首先检查算法是否正确应用。

**我的第二个问题**是我做错了什么（我的意思是实现）或算法本身有什么问题，因为它看起来对于 3x3 和 4x4 它工作正常，但对于 5x5 它给出了 NaN。使用几个在线矩阵行列式计算器检查结果，除了 5x5 之外，它们都很好。

这是我的代码：

```
using System;

public class Matrix
{
    private int row_matrix; //number of rows for matrix
    private int column_matrix; //number of colums for matrix
    private double[,] matrix; //holds values of matrix itself

    //create r*c matrix and fill it with data passed to this constructor
    public Matrix(double[,] double_array)
    {
        matrix = double_array;
        row_matrix = matrix.GetLength(0);
        column_matrix = matrix.GetLength(1);
        Console.WriteLine("Contructor which sets matrix size {0}*{1} and fill it with initial data executed.", row_matrix, column_matrix);
    }

    //returns total number of rows
    public int countRows()
    {
        return row_matrix;
    }

    //returns total number of columns
    public int countColumns()
    {
        return column_matrix;
    }

    //returns value of an element for a given row and column of matrix
    public double readElement(int row, int column)
    {
        return matrix[row, column];
    }

    //sets value of an element for a given row and column of matrix
    public void setElement(double value, int row, int column)
    {
        matrix[row, column] = value;
    }

    public double deterMatrix()
    {
        double det = 0;
        double value = 0;
        int i, j, k;

        i = row_matrix;
        j = column_matrix;
        int n = i;

        if (i != j)
        {
            Console.WriteLine("determinant can be calculated only for sqaure matrix!");
            return det;
        }

        for (i = 0; i < n - 1; i++)
        {
            for (j = i + 1; j < n; j++)
            {
                det = (this.readElement(j, i) / this.readElement(i, i));

                //Console.WriteLine("readElement(j, i): " + this.readElement(j, i));
                //Console.WriteLine("readElement(i, i): " + this.readElement(i, i));
                //Console.WriteLine("det is" + det);
                for (k = i; k < n; k++)
                {
                    value = this.readElement(j, k) - det * this.readElement(i, k);

                    //Console.WriteLine("Set value is:" + value);
                    this.setElement(value, j, k);
                }
            }
        }
        det = 1;
        for (i = 0; i < n; i++)
            det = det * this.readElement(i, i);

        return det;
    }
}

internal class Program
{
    private static void Main(string[] args)
    {
        Matrix mat03 = new Matrix(new[,]
        {
            {1.0, 2.0, -1.0},
            {-2.0, -5.0, -1.0},
            {1.0, -1.0, -2.0},
        });

        Matrix mat04 = new Matrix(new[,]
        {
            {1.0, 2.0, 1.0, 3.0},
            {-2.0, -5.0, -2.0, 1.0},
            {1.0, -1.0, -3.0, 2.0},
            {4.0, -1.0, -3.0, 1.0},
        });

        Matrix mat05 = new Matrix(new[,]
        {
            {1.0, 2.0, 1.0, 2.0, 3.0},
            {2.0, 1.0, 2.0, 2.0, 1.0},
            {3.0, 1.0, 3.0, 1.0, 2.0},
            {1.0, 2.0, 4.0, 3.0, 2.0},
            {2.0, 2.0, 1.0, 2.0, 1.0},
        });

        double determinant = mat03.deterMatrix();
        Console.WriteLine("determinant is: {0}", determinant);

        determinant = mat04.deterMatrix();
        Console.WriteLine("determinant is: {0}", determinant);

        determinant = mat05.deterMatrix();
        Console.WriteLine("determinant is: {0}", determinant);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:36:37.737

为什么要重新发明轮子？**用于获得确定的AND**以反转矩阵的一种众所周知的方法是进行`LU`分解。事实上，MSDN 杂志最近在 http://msdn.microsoft.com/en-us/magazine/jj863137.aspx 上发表了一篇关于如何做到这一点`C#`的[文章](http://msdn.microsoft.com/en-us/magazine/jj863137.aspx)。

示例代码是

> **矩阵行列式**
> 
> 有了矩阵分解方法，很容易编写一个计算矩阵行列式的方法：

```
static double MatrixDeterminant(double[][] matrix)
{
  int[] perm;
  int toggle;
  double[][] lum = MatrixDecompose(matrix, out perm, out toggle);
  if (lum == null)
    throw new Exception("Unable to compute MatrixDeterminant");
  double result = toggle;
  for (int i = 0; i < lum.Length; ++i)
    result *= lum[i][i];
  return result;
} 
```

行列式是根据分解矩阵上对角线的乘积和符号检查来评估的。阅读文章了解更多详情。

请注意，他们使用锯齿状数组作为矩阵，但您可以将自己的矩阵存储替换`lum[i][j]`为`lum[i,j]`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T12:28:46.747

@ja72 非常感谢您的指示。计算任何 n*n 行列式的最终解决方案如下所示：

```
using System;

internal class MatrixDecompositionProgram
{
    private static void Main(string[] args)
    {
        float[,] m = MatrixCreate(4, 4);
        m[0, 0] = 3.0f; m[0, 1] = 7.0f; m[0, 2] = 2.0f; m[0, 3] = 5.0f;
        m[1, 0] = 1.0f; m[1, 1] = 8.0f; m[1, 2] = 4.0f; m[1, 3] = 2.0f;
        m[2, 0] = 2.0f; m[2, 1] = 1.0f; m[2, 2] = 9.0f; m[2, 3] = 3.0f;
        m[3, 0] = 5.0f; m[3, 1] = 4.0f; m[3, 2] = 7.0f; m[3, 3] = 1.0f;

        int[] perm;
        int toggle;

        float[,] luMatrix = MatrixDecompose(m, out perm, out toggle);

        float[,] lower = ExtractLower(luMatrix);
        float[,] upper = ExtractUpper(luMatrix);

        float det = MatrixDeterminant(m);

        Console.WriteLine("Determinant of m computed via decomposition = " + det.ToString("F1"));
    }

    // --------------------------------------------------------------------------------------------------------------
    private static float[,] MatrixCreate(int rows, int cols)
    {
        // allocates/creates a matrix initialized to all 0.0\. assume rows and cols > 0
        // do error checking here
        float[,] result = new float[rows, cols];
        return result;
    }

    // --------------------------------------------------------------------------------------------------------------
    private static float[,] MatrixDecompose(float[,] matrix, out int[] perm, out int toggle)
    {
        // Doolittle LUP decomposition with partial pivoting.
        // rerturns: result is L (with 1s on diagonal) and U; perm holds row permutations; toggle is +1 or -1 (even or odd)
        int rows = matrix.GetLength(0);
        int cols = matrix.GetLength(1);

        //Check if matrix is square
        if (rows != cols)
            throw new Exception("Attempt to MatrixDecompose a non-square mattrix");

        float[,] result = MatrixDuplicate(matrix); // make a copy of the input matrix

        perm = new int[rows]; // set up row permutation result
        for (int i = 0; i < rows; ++i) { perm[i] = i; } // i are rows counter

        toggle = 1; // toggle tracks row swaps. +1 -> even, -1 -> odd. used by MatrixDeterminant

        for (int j = 0; j < rows - 1; ++j) // each column, j is counter for coulmns
        {
            float colMax = Math.Abs(result[j, j]); // find largest value in col j
            int pRow = j;
            for (int i = j + 1; i < rows; ++i)
            {
                if (result[i, j] > colMax)
                {
                    colMax = result[i, j];
                    pRow = i;
                }
            }

            if (pRow != j) // if largest value not on pivot, swap rows
            {
                float[] rowPtr = new float[result.GetLength(1)];

                //in order to preserve value of j new variable k for counter is declared
                //rowPtr[] is a 1D array that contains all the elements on a single row of the matrix
                //there has to be a loop over the columns to transfer the values
                //from the 2D array to the 1D rowPtr array.
                //----tranfer 2D array to 1D array BEGIN

                for (int k = 0; k < result.GetLength(1); k++)
                {
                    rowPtr[k] = result[pRow, k];
                }

                for (int k = 0; k < result.GetLength(1); k++)
                {
                    result[pRow, k] = result[j, k];
                }

                for (int k = 0; k < result.GetLength(1); k++)
                {
                    result[j, k] = rowPtr[k];
                }

                //----tranfer 2D array to 1D array END

                int tmp = perm[pRow]; // and swap perm info
                perm[pRow] = perm[j];
                perm[j] = tmp;

                toggle = -toggle; // adjust the row-swap toggle
            }

            if (Math.Abs(result[j, j]) < 1.0E-20) // if diagonal after swap is zero . . .
                return null; // consider a throw

            for (int i = j + 1; i < rows; ++i)
            {
                result[i, j] /= result[j, j];
                for (int k = j + 1; k < rows; ++k)
                {
                    result[i, k] -= result[i, j] * result[j, k];
                }
            }
        } // main j column loop

        return result;
    } // MatrixDecompose

    // --------------------------------------------------------------------------------------------------------------
    private static float MatrixDeterminant(float[,] matrix)
    {
        int[] perm;
        int toggle;
        float[,] lum = MatrixDecompose(matrix, out perm, out toggle);
        if (lum == null)
            throw new Exception("Unable to compute MatrixDeterminant");
        float result = toggle;
        for (int i = 0; i < lum.GetLength(0); ++i)
            result *= lum[i, i];

        return result;
    }

    // --------------------------------------------------------------------------------------------------------------
    private static float[,] MatrixDuplicate(float[,] matrix)
    {
        // allocates/creates a duplicate of a matrix. assumes matrix is not null.
        float[,] result = MatrixCreate(matrix.GetLength(0), matrix.GetLength(1));
        for (int i = 0; i < matrix.GetLength(0); ++i) // copy the values
            for (int j = 0; j < matrix.GetLength(1); ++j)
                result[i, j] = matrix[i, j];
        return result;
    }

    // --------------------------------------------------------------------------------------------------------------
    private static float[,] ExtractLower(float[,] matrix)
    {
        // lower part of a Doolittle decomposition (1.0s on diagonal, 0.0s in upper)
        int rows = matrix.GetLength(0); int cols = matrix.GetLength(1);
        float[,] result = MatrixCreate(rows, cols);
        for (int i = 0; i < rows; ++i)
        {
            for (int j = 0; j < cols; ++j)
            {
                if (i == j)
                    result[i, j] = 1.0f;
                else if (i > j)
                    result[i, j] = matrix[i, j];
            }
        }
        return result;
    }

    // --------------------------------------------------------------------------------------------------------------
    private static float[,] ExtractUpper(float[,] matrix)
    {
        // upper part of a Doolittle decomposition (0.0s in the strictly lower part)
        int rows = matrix.GetLength(0); int cols = matrix.GetLength(1);
        float[,] result = MatrixCreate(rows, cols);
        for (int i = 0; i < rows; ++i)
        {
            for (int j = 0; j < cols; ++j)
            {
                if (i <= j)
                    result[i, j] = matrix[i, j];
            }
        }
        return result;
    }
} 
```

# c++ - 我如何将轻松输出功能从 c++ 转换为 python？

> ID：15530149
> 
> 赞同：0
> 
> 时间：2013-03-20T17:07:00.607
> 
> 标签：c++, python

一段时间以来，我一直在尝试将函数从 C++ 转换为 Python，但我无法很好地理解该函数，无法自行翻译它。

```
//C++
float Cubic::easeInOut(float t,float b , float c, float d) {
    if ((t/=d/2) < 1) return c/2*t*t*t + b;
    return c/2*((t-=2)*t*t + 2) + b;    
}

//Python
def rotate(t, b, c, d):
    t = t/(d/2)
    if (t < 1):
        return c/2*t*t*t + b
    t = t-2
    return c/2*((t)*t*t + 2) + b 
```

编辑：这是我到目前为止得到的，但它没有返回从 0.0 上升到 1.0 的列表。以前有没有人在python中做过这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:15:17.787

提示：首先，简化 C++

```
struct Cubic { 
    float easeInOut(float t,float b , float c, float d) {
        t = t / (d/2);
        if (t < 1) 
            return c/2*t*t*t + b;
        t = t - 2;
        return c/2*(t*t*t + 2) + b;   
    } 
} 
```

现在，如果你不知道如何将它翻译*成*python，那么你需要学习更多的 python。我能够把它翻译成python，我什至不*知道*python。

实际上，既然你已经发布了你的 python，并且你声称它是错误的，我突然想到 python 中的所有数字（可能，我在这里猜）都是双倍的，这意味着每次你除以它时会略有不同比 C++ 会。快速浏览一下 Python 文档会说“ ”，所以如果你想让它像 C++ 一样`The / (division) and // (floor division) operators yield the quotient of their arguments.`工作，显然你应该使用它。`//`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-30T21:24:04.603

您的代码是正确的翻译，但它不打算返回一个列表。此缓动函数返回给定时间 (t) 的*单个*缓动时间值。它旨在以从 0 到 d 变化的 at 值多次调用，并以平滑（非线性）的方式返回从 b 到 b+c 变化的结果。

您希望返回值从 0 变为 1，因此您应该使用 b=0.0 和 c=1.0 调用它。您应该将 d 值设置为要缓和的持续时间。

要获得从 0 到 1 的缓和值列表，对于从 0 到 10 的 t，您可以执行以下操作：

```
[rotate(t,0.0,1.0,10.0) for t in range(11)] 
```

结果：

```
[0.0, 0.004000000000000001, 0.03200000000000001, 0.108, 0.25600000000000006, 0.5, 0.744, 0.8919999999999999, 0.968, 0.996, 1.0] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T17:32:32.257

如果您将所有数字常量（例如 2）替换为它们的浮点常量等效项（例如 2.0），它会有所帮助吗？

```
def rotate(t, b, c, d):
    t = t/(d/2.0)
    if t < 1.0:
        return c/2.0*t*t*t + b
    t = t-2.0
    return c/2.0*((t)*t*t + 2.0) + b 
```

# python - 文字游戏python的随机字符

> ID：15530151
> 
> 赞同：0
> 
> 时间：2013-03-20T17:07:06.643
> 
> 标签：python, random, chars

```
def dealHand(n):
    """
    Returns a random hand containing n lowercase letters.
    At least n/3 the letters in the hand should be VOWELS.

    Hands are represented as dictionaries. The keys are
    letters and the values are the number of times the
    particular letter is repeated in that hand.

    n: int >= 0
    returns: dictionary (string -> int)
    """

    hand={}
    numVowels = n / 3

    for i in range(numVowels):
        x = VOWELS[random.randrange(0, len(VOWELS))]
        hand[x] = hand.get(x, 0) + 1

    for i in range(numVowels, n):
        x = CONSONANTS[random.randrange(0,len(CONSONANTS))]
        hand[x] = hand.get(x, 0) + 1

    return hand 
```

这个函数是我必须做的一个文字游戏的一部分，它被包含在一些帮助函数中以帮助开始，我的问题是它返回的字母不是很随机，有很多重复的字母，比如： `a a c c b e e g j j m m m o o r t v y x`，我是只是想知道是否有可能获得一组更随机的字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:11:51.317

“它返回的字母不是很随机，有很多重复的字母” - 认真吗？

如果您想获得 n 个字母而不重复，请使用以下内容：

```
from random import shuffle
alphabet = ['a', .., 'z']
shuffle(alphabet)
print(alphabet[:n]) 
```

如果 n > len(alphabet)，无论如何你都会得到重复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T17:32:48.960

这是您的算法的更紧凑的表示：

```
from __future__ import division
from collections import Counter
import random
import string

VOWELS = "aeiou"
CONSONANTS = "".join(set(string.lowercase) - set(VOWELS))

def dealHand(n):
    numVowels = n // 3
    lettersets = [VOWELS] * numVowels + [CONSONANTS] * (n - numVowels)
    return Counter(c
        for letterset in lettersets
        for c in random.choice(letterset)
    ) 
```

似乎足够随机。

* * *

后来：“如果我想让字母出现不超过两次，我怎么能做到呢？”

好吧，你可以这样做，但我不建议这样做：

```
def dealHand2(n):
    while True:
        candidate = dealHand(n)
        if all(v <= 2 for v in candidate.values()):
            return candidate 
```

这是一个无限循环，直到找到一组满足您条件的字母。运行时间：不确定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T18:16:56.363

在这个版本中，从统计上讲，元音的数量应该是辅音的三倍，但不能保证确切的数量。

```
import collections
import random

VOWELS = 'aeiou'
CONSONANTS = 'bcdfghjklmnpqrstvwxyz'

def dealHand(n):
 letters = 3 * VOWELS + CONSONANTS 
 collections.Counter(random.sample(letters, n)) 
```

# java - 从 JDBC 迁移到 JPA

> ID：15530152
> 
> 赞同：-1
> 
> 时间：2013-03-20T17:07:14.237
> 
> 标签：java, jpa, jdbc, frameworks, persistence

我的问题是如何将我的 JDBC 项目迁移到 JPA。我的项目完全是使用 JDBC 构建的，并且已经创建了许多方法。欢迎使用 EclipseLink、Hibernate 任何 JPA 框架。但是为了执行这种迁移，我们需要知道是否有任何工具可以帮助将 JDBC 项目转换为 JPA，并且我们不必再次编写逻辑代码。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T18:04:26.740

我同意这可能很难的评论。难度取决于您的项目的编码方式，例如业务逻辑与 DAO 层的分离程度等参数。这是以前做过的，当然是可能的。值不值这个钱，就看你自己了。

但是，为了帮助回答您的问题，是的，有一些工具可以帮助您解决这个问题。Hibernate 带有[逆向工程](http://docs.jboss.org/tools/4.0.0.Final/en/hibernatetools/html_single/index.html#reverseengineering)功能，这意味着您可以`Entity`从数据库模式创建对象。

这将为`Entities`您创建，然后由您来替换 DAO 层。

# jquery - jQuery remove() 不会删除

> ID：15530156
> 
> 赞同：2
> 
> 时间：2013-03-20T17:07:16.697
> 
> 标签：jquery, forms

我有一个表单，我想允许用户添加任意​​数量的字段，然后将他们给我的信息插入到数据库中。如果有任何未使用的行，他们可以通过单击删除文本来删除它们，这样我的数据库中就没有一堆空行。

我已经完成了使用 jQuery 添加行并将数据插入数据库，但我正在努力删除不需要的行。当 jQuery 运行 remove() 函数时，它只是给 tr 显示 none 使用户无法看到行但它们仍然存在并将空行插入我的数据库中。有没有办法完全摆脱表格中的整行，从而无法输入空白数据？

这是我的代码：

**html:**

```
<table width="960px" border="0" id="entries">
<tr>
  <td><b></b></td>
  <td><b>Department</b></td>
  <td><b>Class</b></td>
  <td><b>Lot #</b></td>
  <td><b>Short Description</b></td>
</tr>

<tr>
  <td><b>1</b></td>
  <td class="firstEntry"><input type="text" name="fields[]"></td>
  <td><input type="text" name="class[]"></td>
  <td><input type="text" name="lot[]" size="5"></td>
  <td><input type="text" name="description[]" size="86"></td>
  <td></td>
</tr> 
```

```
<div id="container">
<p id="add_field"><a href="#"><span>Add Entries.....</span></a></p> 
```

**jQuery：**

```
<script type="text/javascript">
var count = 0;
$(function(){
    var count = 1;
    $('p#add_field').click(function(){

        count +=1;

    $('table#entries').append(
        '<tr><td><strong>' + count + '</strong></td>' + 
        '<td><input id="department_' + count + '" name="fields[]' + '" type="text" /></td>' +
        '<td><input id="class_' + count + '" name="class[]' + '" type="text" /></td>' +
        '<td><input id="lot_' + count + '" name="lot[]' + '" type="text" size="5"/></td>' +
        '<td><input id="description_' + count + '" name="description[]' + '" type="text" size="86"/></td>' +
        '<td><span class="delete">Remove</span></td></tr>' );

     $(".delete").click(function () {
      $(this).closest('tr').remove("slow");
    });

    });

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:14:32.883

它可以在没有“慢”的情况下工作：

```
 $(".delete").click(function () {
        $(this).closest('tr').remove();
    }); 
```

[http://jsfiddle.net/kn3eB/](http://jsfiddle.net/kn3eB/)

[.remove()](http://api.jquery.com/remove/)的参数是一个选择器。您可能会想到[.hide()](http://api.jquery.com/hide/)需要持续时间的速度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T17:15:46.597

[`.remove()`](http://api.jquery.com/remove/)不以动画效果为参数，仅以选择器为参数。也许您对它与[`.fadeOut()`](http://api.jquery.com/fadeOut/)不透明度和显示属性的更改感到困惑？

试试这个**[jsFiddle 例子](http://jsfiddle.net/j08691/7MjKR/1/)**

```
$(this).closest('tr').fadeOut(function () {
    $(this).remove()
}); 
```

# javascript - jQuery 图像切换器

> ID：15530158
> 
> 赞同：1
> 
> 时间：2013-03-20T17:07:18.097
> 
> 标签：javascript, jquery

**问题**

我迷失了阅读无数的 js 代码提示等，我发现很难知道从哪里开始。帮助！

所以基本上我在 CSS 中有一个主要的全屏背景图像，`#main` `div`并且我有每个带有小缩略图的列表项，当它们被单击时，它们会切换以在`#main` `div`.

**HTML**

```
<div id="main">
    <ul id="thumbs">
        <li>
            <a href="#">
                <img src="http://www.lorempixel.com/50/50" />
            </a>
        </li>
        <li>
            <a href="#">
                <img src="http://www.lorempixel.com/50/50" />
            </a>
        </li>
        <li>
            <a href="#">
                <img src="http://www.lorempixel.com/50/50" />
            </a>
        </li>
        <li>
            <a href="#">
                <img src="http://www.lorempixel.com/50/50" />
            </a>
        </li>
    </ul>
</div> 
```

**CSS**

```
#main {
    background-image: url(http://www.lorempixel.com/500/50);
    width: 500px;
    height: 200px;
}
li {
    list-style: none;
    float: left;
    padding: 10px;
} 
```

**小提琴**

[http://jsfiddle.net/NjX4n/](http://jsfiddle.net/NjX4n/)

谢谢您的帮助。

* * *

**更新的解决方案**

我最终使用该`data`属性解决了这个问题，并为 jQuery 提供了每个`img`a`class`进行`.thumb`交互。

**HTML**

```
<div id="main">
    <ul id="thumbs">
        <li>
            <a href="#">
                <img class="thumb" src="http://www.lorempixel.com/50/50"
                 data-header-img="http://www.lorempixel.com/500/200" />
            </a>
        </li>
        <li>
            <a href="#">
                <img class="thumb" src="http://www.lorempixel.com/50/50"
                 data-header-img="http://www.lorempixel.com/500/200" />
            </a>
        </li>
        <li>
            <a href="#">
                <img class="thumb" src="http://www.lorempixel.com/50/50"
                 data-header-img="http://www.lorempixel.com/500/200" />
            </a>
        </li>
        <li>
            <a href="#">
                <img class="thumb" src="http://www.lorempixel.com/50/50"
                 data-header-img="http://www.lorempixel.com/500/200" />
            </a>
        </li>
    </ul>
</div> 
```

**JS**

```
$('.thumb').click(function() {
    $('#main').css('background-image', "url("+$(this).attr('data-header-img')+")");
}); 
```

**演示**

[http://jsfiddle.net/NjX4n/1/](http://jsfiddle.net/NjX4n/1/)

感谢大家的意见和建议。Y。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:41:15.487

像这样的函数可以解决问题：

```
$('.bgType').click(function (event) {  //class of candidate image  
    var BgUrl = $(this).attr('src'); //identify which image was clicked and get its source
    $('#main').css('background-image', 'url(' + BgUrl + ')'); //set the extracted url as the BG
}); 
```

[这](http://jsfiddle.net/4cgCE/3/)是一个工作示例。

我为此使用了 jquery，所以不要忘记在你的代码中包含 jquery。

**更新：**

我已经为背景的候选图像分配了一个类。这将防止单击时将任何其他图像设置为背景。 [在此处找到更新的示例](http://jsfiddle.net/4cgCE/4/)

HTML：

```
<li><a href="#"><img class="bgType" src="img1/goes/here.png" /></a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:34:55.397

包括每个标签的 id

```
<div id="main">
<ul id="thumbs">
<li><a href="#" id="img1"><img src="img1/goes/here.png" /></a></li>
<li><a href="#" id="img2"><img src="img2/goes/here.png" /></a></li>
<li><a href="#" id="img3"><img src="img3/goes/here.png" /></a></li>
<li><a href="#" id="img4"><img src="img4/goes/here.png" /></a></li>
</ul>
</div> 
```

现在您可以使用 click() 函数来更改背景图像

```
 <script>
        $(document).ready(function() {
            $('#img1').click(function() {
    //change background image
           $('#main').css('background-image', 'url(img1/goes/here.png)');

            });

//do this for next two links also
        });
    </script> 
```

# gdb - Gdb 宏：64 位变量

> ID：15530163
> 
> 赞同：0
> 
> 时间：2013-03-20T17:07:29.530
> 
> 标签：gdb

我正在使用 gdb 宏进行调试。我正在调试的系统是 64 位英特尔处理器。正在调试的变量正在存储一个 64 位的值。

在宏中存储变量值时，值存储为 32 位。例如，以下仅从 int64temp 打印 32 位。

```
set $val = $int64temp

printf "value %d   \n",$val, 
```

需要进行什么更改才能将变量设为 64 位以便 printf 给我 64 位值？注意：我确实通过运行设置弧 -

```
set architecture i386:x86-64 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:23:01.977

> printf "值 %d \n",$val

这会将 $val 打印为一个`int`（即使在 64 位模式下也是 32 位）。尝试

```
printf "value %ld\n", $val 
```

# php - 使用 PHP SOAP 服务器获取可变数量的参数

> ID：15530167
> 
> 赞同：1
> 
> 时间：2013-03-20T17:07:39.203
> 
> 标签：php, xml, soap, soapserver

我正在开发一个简单的 PHP SOAP 服务器，它接收如下请求：

```
<SOAP-ENV:Body>
     <myFunction>
         <arg1>arg1_value</arg1>
         <arg2>
             <id>3027</id>
             <id>1043</id>
             <id>827</id>
         </arg2>
     </myFunction>
 </SOAP-ENV:Body> 
```

第一个参数 (arg1) 是必需的，第二个参数 (arg2) 是可选的，由零个、一个或多个元素 'id' 组成，如图所示。

我可以通过这种方式访问​​ arg1 值：

```
public function myFunction($args){
    $value = $args->arg1;
} 
```

在 PHP 中获取元素 arg2 中所有不同的“id”参数的最佳方法是什么？

编辑：

在我的 WSDL 文件中，我有这样的内容：

```
 <xsd:element name="myFunction">
        <xsd:complexType>
            <xsd:sequence>
                    <xsd:element name="arg1" minOccurs="1" maxOccurs="1" type="xsd:string"></xsd:element>
                    <xsd:element name="arg2" type="tns:multiple_ids" minOccurs="0" maxOccurs="1" />
            </xsd:sequence>
        </xsd:complexType>
    </xsd:element>

    <xsd:complexType name="multiple_ids">
        <xsd:sequence>
            <xsd:element name="id" type="xsd:string" minOccurs="0" maxOccurs="unbounded" />
        </xsd:sequence>
    </xsd:complexType> 
```

# opengl - 使用opencv确定外部相机到带有世界空间对象的opengl

> ID：15530168
> 
> 赞同：6
> 
> 时间：2013-03-20T17:07:39.347
> 
> 标签：opengl, opencv, camera-calibration, extrinsic-parameters

我正在使用opencv和openframeworks（即opengl）从图像（以及后来的几个用于三角测量的图像）计算相机（世界变换和投影矩阵）。

就opencv而言，“平面图”变成了世界中心为0,0,0的对象（即棋盘）。世界/地面位置是已知的，因此我需要获取投影信息（失真系数、fov 等）和相机的外部坐标。

![二维输入坐标](../Images/7a7d957a58ce2bc51af526265abcb9ca.png)

我已将这些平面图点的视图位置映射到规范化视图空间中的 2D 图像（[0,0] 是左上角。[1,1] 是右下角）。

对象（平面图/世界点）在 xz 平面上，-y 向上，所以我转换为 xy 平面（这里不确定 z-up 是负数还是正数......）因为它需要是平面的

```
ofMatrix4x4 gWorldToCalibration(
    1, 0, 0, 0,
    0, 0, 1, 0,
    0, 1, 0, 0,
    0, 0, 0, 1
    ); 
```

我将 1,1 作为 ImageSize 传递给 calibrateCamera。标志`CV_CALIB_FIX_ASPECT_RATIO|V_CALIB_FIX_K4|CV_CALIB_FIX_K5` `calibrateCamera`运行成功，给我一个低错误（通常在 左右`0.003`）。

使用`calibrationMatrixValues`我得到一个合理的 FOV，通常在 50 度左右，所以我很确定内在属性是正确的。

现在来计算相机的外部世界空间变换......我不相信我需要使用`solvePnP`，因为我只有一个对象（尽管我之前尝试过所有这些并得到相同的结果）

```
//  rot and trans output...
cv::Mat& RotationVector = ObjectRotations[0];
cv::Mat& TranslationVector = ObjectTranslations[0];

//  convert rotation to matrix
cv::Mat expandedRotationVector;
cv::Rodrigues(RotationVector, expandedRotationVector);

//  merge translation and rotation into a model-view matrix
cv::Mat Rt = cv::Mat::zeros(4, 4, CV_64FC1);
for (int y = 0; y < 3; y++)
   for (int x = 0; x < 3; x++) 
        Rt.at<double>(y, x) = expandedRotationVector.at<double>(y, x);
Rt.at<double>(0, 3) = TranslationVector.at<double>(0, 0);
Rt.at<double>(1, 3) = TranslationVector.at<double>(1, 0);
Rt.at<double>(2, 3) = TranslationVector.at<double>(2, 0);
Rt.at<double>(3, 3) = 1.0; 
```

现在我有一个旋转和变换矩阵，但它是主要的列（我相信如果我不转置，对象会完全倾斜，并且上面的代码对我来说看起来主要是列）

```
//  convert to openframeworks matrix AND transpose at the same time
ofMatrix4x4 ModelView;
for ( int r=0;  r<4;    r++ )
    for ( int c=0;  c<4;    c++ )
        ModelView(r,c) = Rt.at<double>( c, r ); 
```

使用之前的矩阵的逆将我的飞机交换回我的坐标空间（y 向上）。

```
//  swap y & z planes so y is up
ofMatrix4x4 gCalibrationToWorld = gWorldToCalibration.getInverse();
ModelView *= gCalibrationToWorld; 
```

不确定我是否需要这样做...当我将飞机放入校准时，我并没有否定它们...

```
//  invert y and z planes for -/+ differences between opencv and opengl
ofMatrix4x4 InvertHandednessMatrix(
    1,  0,  0, 0,
    0,  -1, 0, 0,
    0,  0,  -1, 0,
    0,  0,  0,  1
    );
ModelView *= InvertHandednessMatrix; 
```

最后，模型视图是相对于相机的对象，我想将其反转为相对于相机的对象（0,0,0）

```
ModelView = ModelView.getInverse(); 
```

![输出 3D 视图](../Images/45cb103a49ee701e8f2d2db34c477796.png)

这导致相机在错误的位置，并且旋转错误。距离*不算太远*，相机在 Y 平面的右侧，平移也不是很偏，而且我认为这是正确的方向……只是还不正确。油漆绘制的蓝色圆圈是我期望相机所在的位置。

我已经阅读了大量的 SO 答案，文档十几次，但没有找到任何正确的东西，我很确定我已经涵盖了空间转换所需的所有内容，但也许我错过了一些明显的东西? 还是以错误的顺序做某事？

**更新 1 - 世界空间平面...** 我已将世界空间平面更改为 XY(Z up) 以匹配 openCV 的输入。（gWorldToCalibration 现在是一个单位矩阵）。旋转仍然是错误的，投影输出是一样的，但我认为现在翻译是正确的（它肯定在标记的正确一侧） ![XY 平面上的 3D 视图](../Images/4b0d2c5f8a7f5911ca9a64e06520870b.png)

**Update2 - 真实图像尺寸** 我正在使用进入相机校准的图像尺寸；看到我使用的是标准化的 1,1，但 imageSize 参数是整数，我认为这可能很重要......我猜它是（红色框是投影视图空间点与 z 相交的位置=0 平面）没有任何失真校正，结果如下（唯一改变的是图像大小从 1,1 到 640,480。我也将标准化的输入视图空间坐标乘以 640,480） ![在此处输入图像描述](../Images/99af19aba5158d9a9870c4a4cded9641.png) 我将尝试添加失真更正，看看它是否*完美*排列......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T23:19:09.383

首先要检查的是在给定估计的内在和外在相机矩阵的情况下，验证标记是否正确地重新投影在图像上。然后您可以在全局框架中找到相机位置并查看它是否与标记位置一致。（使用 OpenCV 中的坐标系。）一个是这样，没有太多可能出错的地方。由于您希望点位于 xz 平面上，因此您只需要一次坐标变换。如我所见，您使用 gWorldToCalibration 矩阵进行操作。然后将转换应用于标记和相机位置，并验证标记是否在正确的位置。然后相机位置也将正确（除非坐标系的手性出现问题，但可以轻松纠正）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:36:59.493

至少现在我将我的 Edit 2（ImageSize 必须大于 1,1）视为修复，因为它产生的结果非常非常像我的预期。

我现在可能会把事情颠倒过来，但这会产生相当好的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-04T12:19:45.463

我认为你不应该**取**gWorldToCalibration 的*倒数*

```
ofMatrix4x4 gCalibrationToWorld = gWorldToCalibration.getInverse(); 
```

在这里，我发布了代码，它或多或少地在做你想要[的 OpenCV- to OpenGL COS](https://stackoverflow.com/a/20373984/2631225)。它在 C 中，但在 C++ 中应该类似。

# php - .HTML 文件中的 PHP

> ID：15530174
> 
> 赞同：0
> 
> 时间：2013-03-20T17:07:53.113
> 
> 标签：php, html

在动态页面替换内容的教程中，示例演示文件具有应该在 .html 文件内运行的 php 脚本

```
<body>

    <?php include('../header.php'); ?> 
```

这是如何运作的？

这是演示的链接： http: [//css-tricks.com/rethinking-dynamic-page-replacing-content/](http://css-tricks.com/rethinking-dynamic-page-replacing-content/)

我正在执行此操作的网站具有如下文件结构：

```
index.php
includes/header.html
includes/footer.html 
```

等等

所以我试图改变我的结构看起来更像示例 index.html 包含/header.php

但它似乎不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:10:10.777

为了让 PHP 在 HTML 文件中运行，必须在 apache 配置中将 HTML 作为 mime 类型添加为 php.ini。

最重要的是，您在 Web 上看到的大多数页面都使用 mod-rewrite 将页面重写为 .html 而不是查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:15:29.833

我认为您正在尝试使用 PHP 作为模板引擎来组装您的网页。如果是这种情况，您需要将以下内容添加到`index.php`：

```
 <?php include('includes/header.html'); ?> 
```

同样适用于页脚和其他内容区域。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T17:16:27.930

您粘贴在 index.php 中的代码是什么？如果是这样，我认为问题只是您的 header.php 文件路径错误。`include('../header.php')`在 index.php 所在的上一级文件夹中查找 header.php。我想你想要`include('includes/header.php')`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T17:19:32.553

您必须更改/实施 Apache 文件处理选项，这可以通过两种方式完成：

# 第一种方式

*   第 1 步：通过在浏览器的地址字段中输入 www.yourdomain.com/cpanel 登录到您的 CPanel。输入您的登录信息。
*   第 2 步：单击 Apache Handlers 图标或链接选项。
*   第 3 步：在 PHP 程序的小字段中输入要添加的文件扩展名，如 .html 和 application/x-httpd-php 在较大的字段中。然后单击添加按钮。如果要删除一个，请从下拉菜单中选择它，然后单击“删除”按钮。您可能想让它运行的其他程序如下：

> application/x-httpd-cgi - 用于 CGI
> 
> application/x-httpd-asp - 用于 ASP（活动服务器页面）
> 
> application/x-httpd-asp-cgi - 用于 CGI 脚本中的 ASP
> 
> application/x-tar - 用于 .tgz 压缩文件
> 
> application/zip - 用于 .zip 压缩文件

# 第二种方式

.htaccess 方法

在下面的新行上粘贴。

```
AddHandler application/x-httpd-php .html

AddHandler application/x-httpd-php .htm 
```

保存文件，然后将其上传回您的站点根目录。就是这样。以 .html 或 .htm 结尾的文件现在将由 PHP 处理，因此您可以将 PHP 代码放入其中。

# c# - 多线程服务器响应多个客户端会话

> ID：15530176
> 
> 赞同：0
> 
> 时间：2013-03-20T17:07:59.310
> 
> 标签：c#, multithreading, tcpclient

让我稍微解释一下情况。我已经编写了一个 C# 多线程服务器，多个客户端可以连接到该服务器。服务器拥有来自所有客户端的字典。现在每个客户端都会生成一个名为 ipPhone 的对象的新实例。为了让我的服务器发送到连接的客户端，我使用 networkstream.write()。发送到连接的客户端。但是，客户端可以打开多个会话。这些会话保存在 ipPhone 对象的字典中。从这些会话中，我保存了 IP 和端口。

现在我想做这样的事情。

```
foreach (KeyValuePair<string, IpPhoneSession> sessionPair in dicIpPhoneSessions)
{
    phoneSession = sessionPair.Value;
    tcpClient = new TcpClient();
    tcpClient.Connect(sessionPair.ipNumber, sessionPair.portReceiving);
    if (tcpClient.Connected)
    {
        clientStream = tcpClient.GetStream();
        clientStream.Write(buffer, 0, buffer.Length);
        clientStream.Flush();
    }
} 
```

但是这不起作用，因为它似乎没有发送到正确的端口。你们中的任何人对我如何创建正确的 tcpClient 和 NetWorkStream 实例以将数据发送到我的客户端的所有会话有任何想法吗？

# c# - 在 C# .NET 4.5 中使用 SAML 2.0

> ID：15530184
> 
> 赞同：36
> 
> 时间：2013-03-20T17:08:16.380
> 
> 标签：c#, .net, saml, saml-2.0

我正在尝试使用纯 .NET（没有外部类、控件、助手）来创建 SAML 消息。我在互联网上找到了一些代码；这就是我所拥有的：

```
private static SamlAssertion createSamlAssertion()
{
    // Here we create some SAML assertion with ID and Issuer name. 
    SamlAssertion assertion = new SamlAssertion();
    assertion.AssertionId = "AssertionID";
    assertion.Issuer = "ISSUER";
    // Create some SAML subject. 
   SamlSubject samlSubject = new SamlSubject();
    samlSubject.Name = "My Subject";

    // 
    // Create one SAML attribute with few values. 
    SamlAttribute attr = new SamlAttribute();
    attr.Namespace = "http://daenet.eu/saml";
    attr.AttributeValues.Add("Some Value 1");
    //attr.AttributeValues.Add("Some Value 2");

    attr.Name = "My ATTR Value";

    // 
    // Now create the SAML statement containing one attribute and one subject. 
    SamlAttributeStatement samlAttributeStatement = new SamlAttributeStatement();
    samlAttributeStatement.Attributes.Add(attr);
    samlAttributeStatement.SamlSubject = samlSubject;

    // Append the statement to the SAML assertion. 
    assertion.Statements.Add(samlAttributeStatement);

    //return assertion
    return assertion;

} 
```

这是我用来获取 XML 的代码：

```
var sb = new StringBuilder();
var settings = new XmlWriterSettings
{
    OmitXmlDeclaration = true,
    Encoding = Encoding.UTF8
};
using (var stringWriter = new StringWriter(sb))
using (var xmlWriter = XmlWriter.Create(stringWriter, settings))
using (var dictionaryWriter = XmlDictionaryWriter.CreateDictionaryWriter(xmlWriter))
{
    var samlAssertSerializer = new SamlSerializer();
    var secTokenSerializer = new WSSecurityTokenSerializer();
    assertion.WriteXml(
        dictionaryWriter,
        samlAssertSerializer,
        secTokenSerializer
    );
} 
```

这似乎会奏效。但是，生成的消息是 SAML 版本 1.0 - 我需要使用 2.0。

我知道我可以做一些草率的工作并在这里和那里替换一些值，这个系统可以正常工作。消息中的差异很小，版本是最重要的。我很难找到有关 .NET 的 SAML 2.0 的信息。我知道 SAML 2.0 最近已在 .NET 中实现。我正在使用 Framework 4.5，所以我应该可以访问它。SamlAssertion 的 MSDN 页面说“majorVersion”是一个常量，始终设置为“1”。

我猜我可以使用另一个命名空间，但我还没有找到它。我的要求只是获取 XML SAML 消息。我不需要用 X509 签名，我不需要令牌。只是 SAML XML 消息。

同样，这是一个试图找出如何在本机 .NET 中执行此操作的问题。我找到了几个 SAML 助手和大量关于如何手动构建消息的代码——我正在尝试找到正确的解决方案（如果存在）。

编辑：我发现我可以使用 Saml2Assertion。但是，我现在无法找到将 SAML 消息写入 xml 的方法。

EDIT2：我找到了如何将 Saml2Assersion 对象写入 xml。遗憾的是，它没有保留 SAML 语法，它以纯 XML 编写，没有`<saml>`标签。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-21T18:46:02.177

.NET 4.5 内置了 WIF（Windows Identity Foundation）。这现在支持 SAML 2.0。要使用 SAML 2.0，只需使用 .NET 4.5。类名是 Saml2XXXX（其中 XXXX 是令牌、断言、序列化程序等）这是 SAML 2.0 断言的链接：http: [//msdn.microsoft.com/en-us/library/microsoft.identitymodel.tokens.saml2。 saml2assertion.aspx](http://msdn.microsoft.com/en-us/library/microsoft.identitymodel.tokens.saml2.saml2assertion.aspx)

这将创建一个 SAML 2.0 断言对象。要获取 XML，这是我使用的代码：

```
using System.Xml;
using System.IdentityModel.Tokens;

namespace YOUR.SPACE
{
    public class Saml2Serializer : Saml2SecurityTokenHandler
    {
        public Saml2Serializer()
        {
            Configuration = new SecurityTokenHandlerConfiguration()
                {

                };
        }

        public void WriteSaml2Assertion(XmlWriter writer, Saml2Assertion data)
        {
            base.WriteAssertion(writer, data);
        }
    }
} 
```

这会将您的断言对象序列化为 XML。这是我遇到问题的地方。将创建的 XML 不包含 saml 命名空间（例如`<saml:Assertion>`）。我无法为此找到解决方案，因此`Replace("<", "<saml:")`必须使用 a 。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T18:15:35.727

那是因为 Saml2Assertion 指的是令牌而不是协议。

WIF 中使用的 SAML 令牌是 1.0 令牌。

.NET 中没有 SAML 2 协议支持。

SAML 2有一个 WIF [CTP](http://connect.microsoft.com/site1168/Downloads/DownloadDetails.aspx?DownloadID=36088)，但它已经很久没有升级了。

# javascript - 处理原始 JavaScript 被返回到 .ajax 错误函数，尽管 200 OK

> ID：15530188
> 
> 赞同：0
> 
> 时间：2013-03-20T17:08:26.770
> 
> 标签：javascript, jquery, post

我正在对我无法控制的产品进行以下 jQuery.ajax() 调用：

```
$.ajax({
    type: "POST",
    url: "/WfWsR",
    data: { method: 'getInfo',
        nodeID: nodeID
    },
    dataType: "text",
    success: function(data, response, replyxhr){
        return data;
    },
    error: function(replyxhr, response){
        console.log(response);
        console.log(replyxhr);
        return response;
    }
}); 
```

POST 以 200 OK 成功，但没有进入成功函数，而是以错误结束，响应变量设置为“错误”，replyxhr 变量设置为 Object { readyState=0, status=0, statusText="错误”}。

通过 Postman 手动尝试 POST 会产生结果：

```
new Array(
  new Array(
    new Array(
      "15", "1", ""
    )
  ), 
  new Array(
    new Array(
      "1", "3757", "3757", "user", "2013-01-22 15:09:04.354"
    )
  ), 
  new Array(
  ), 
  new Array(
    "3762", "ABCD", "test Purge Documents", "50", "purge Documents", "Administrator", "2013-01-22 15:07:57.065"
  ), "13d886ddf90"
) 
```

那是很多 JavaScript；从技术上讲，我只需要这些数组中的一个。我认为它在 jQuery 中不起作用的原因是因为这种返回可能是无效的，特别是考虑到 dataType：“text”。但我也不能使用 dataType: "script" ；使用隐式 GET 而不是 POST，并且相关 URL 不支持 GET。

我还有其他选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T19:52:07.883

最终编写了我自己的 xhr 调用（没有错误处理）来允许这样做。一个可怕的问题的可怕解决方案。（eval() 两次失败）。

```
var xhReq = new XMLHttpRequest();
var params = "method=getInfo&nodeID=" + nodeID;

xhReq.open("POST", "/WfWsR", true);
xhReq.setRequestHeader("Content-type", "application/x-www-form-urlencoded");

xhReq.onreadystatechange = onPostSubmit;
xhReq.send(params);
var response = eval(xhReq.response);
var stepIDx = response[0][0][0];

return stepIDx;

function onPostSubmit() {
    if (xhReq.readyState==4 || xhReq.readyState=="complete") { 
        if (xhReq.status != 200) {
            alert('BadStatus');
            return;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T01:42:08.033

根据响应，我猜测您是在告诉 Ajax 期待`text`，但它正在得到其他东西。`content-type`看来服务器正在为您提供 Javascript，因此如果内容类型为`text/javascript`.

我从来没有处理过这个问题，但如果这是你的问题，文档确实说在 jQuery 1.5 和更高版本中有一个解决方案：

> 多个空格分隔的值：从 jQuery 1.5 开始，jQuery 可以将 dataType 从它在 Content-Type 标头中接收到的内容转换为您需要的内容。例如，如果您希望将文本响应视为 XML，请使用“text xml”作为 dataType。您还可以发出 JSONP 请求，将其作为文本接收，并由 jQuery 解释为 XML：“jsonp text xml”。类似地，诸如“jsonp xml”之类的速记字符串将首先尝试从 jsonp 转换为 xml，如果失败，则从 jsonp 转换为文本，然后从文本转换为 xml。

通过[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)（有关数据类型，请参阅文档）

这意味着您可以使用这个：`dataType: "script text"`将 Javascript 响应解释为文本。当然，您也可以只使用`dataType: "script"`将其解释为脚本。

# safari - 从网站禁用 Safari 工具提示

> ID：15530191
> 
> 赞同：5
> 
> 时间：2013-03-20T17:08:37.010
> 
> 标签：safari, webkit, tooltip

是否可以从网站级别禁用 safari 为网站提供的工具提示？

我一直在四处寻找，我发现有很多方法可以为您的本地机器禁用它，但是如果我有自己正在创建的自定义工具提示（我正在 Sencha extjs 项目中创建一个格式化的表格）我可以告诉 Safari 的 webkit 不显示它的工具提示？

如果无法通过网站进行操作，是否有办法控制 Safari 工具提示中显示的文本？

目标是在将鼠标悬停在表中的字段上时显示带有记录详细信息的工具提示。

我已经有一个字段，其中包含我用于 Sencha 项目工具提示的详细信息。如果我可以告诉 Safari（或任何其他将它自己的工具提示强制到网站上的浏览器）使用该信息，它也可以工作。

# java - 如何从 TreeMap 格式化 Java 中的字符串列表以以这种方式打印？

> ID：15530199
> 
> 赞同：2
> 
> 时间：2013-03-20T17:09:00.353
> 
> 标签：java, string, format, treemap, spacing

我正在 TreeMap 中制作一个字符串列表，以跟踪一群学生的成绩。现在我的程序正在打印这样的字符串列表：

```
Jimmy: C+
Tim: A
Samantha: B-
Mike: A- 
```

当我希望它像这样打印出来时：

```
Jimmy:    C+
Tim:      A
Samantha: B-
Mike:     A- 
```

我怎样才能让名字和等级像这样隔开？这是我打印出所有内容的代码部分：

```
//Print all students with their grades
case "P": System.out.println();
          for(Map.Entry<String, String> entry : grades.entrySet())
          {
             System.out.println(entry.getKey() + ":  " + entry.getValue());
          }
          System.out.println();
          break; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T17:11:09.970

最简单的解决方案可能是在打印语句中使用制表符而不是空格。

```
System.out.println(entry.getKey() + ":\t" + entry.getValue()); 
```

另一种方法是使用 String[`format`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29)方法在学生姓名的右侧填充空格。以下代码将在 10 个字符宽的列中打印学生的姓名。如果您在打印报告之前知道名称的最大长度（您应该能够轻松找到），这将更加可靠。

```
String name = "Tim:";
String student = String.format("%1$-10s", name);
System.out.println(student + "A"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:12:20.443

您可以查看使用 System.out.format 的选项和不同的格式选项，例如右对齐等。只需谷歌这个。这是您查看的一个[链接](http://www.homeandlearn.co.uk/java/java_formatted_strings.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T17:15:22.563

你想左填充字符串。看看这个答案：[How can I pad a String in Java?](https://stackoverflow.com/questions/388461/how-can-i-pad-a-string-in-java)

您可能还需要一个函数来计算您尝试输出的所有名称的最大长度。就像是。

```
private int maxLength(Collection<String> names) {
        int max = 0;
        for (String s : names) {
            if (s.length() > max) {
                max = s.length();
            }
        }
        return max;
    } 
```

然后，像这样使用它： maxLength(grades.keySet());

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T17:22:00.930

将此输入到`System.out.println()`循环中：

```
String.format("%-10s %s", entry.getKey()+":", entry.getValue()); 
```

# signalr - SignalR 客户端的 Java 端口的当前状态是什么？

> ID：15530201
> 
> 赞同：2
> 
> 时间：2013-03-20T17:09:01.227
> 
> 标签：signalr, signalr-hub, signalr.client

据我了解，有创建 Java SignalR 客户端的计划，有什么想法会在什么时候完成？我目前正在使用 JavaScript 客户端从 Web 客户端连接到集线器，但我还需要将其扩展到 Android 客户端。

我看到[Erik Z](https://stackoverflow.com/users/162003/erik-z)写了一个库[https://github.com/erizet/SignalA](https://github.com/erizet/SignalA)看起来不错，但不幸的是它不支持集线器。是否值得扩展它或正式发布在路上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-10T12:23:43.830

我现在已经在[SignalA](http://github.com/erizet/SignalA "信号A")中实现了集线器！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T18:31:51.497

目前没有受支持的 SignalR Java 客户端的固定发布日期。我建议您继续搜索第三方 Java 客户端或构建您自己的客户端。

# r - 在表达式中添加竖线以绘制

> ID：15530202
> 
> 赞同：6
> 
> 时间：2013-03-20T17:09:08.267
> 
> 标签：r, expression

我想在图中添加一个表达式，其中出现一个条件项，例如 E(Y|X)。使用例如：

```
plot(x=c(.5),ylim=c(0,1),xlim=c(0,2))
text(x=1,y=.5,labels=expression(E(X|Y)),pos=1) 
```

不这样做，但它产生 E(|(X,Y))。显然我不知道如何正确地将竖线放入表达式中 - 有人可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-20T17:26:47.297

```
plot(x=c(.5),ylim=c(0,1),xlim=c(0,2))
expr = expression("E" * (X ~ "|" ~ Y))
text(x=1,y=.5,labels=expr,pos=1,cex=4) 
```

**编辑**

@joran 提出了一个不同的版本（这个版本的空格更少）

```
 expr1 = expression(E(X*"|"*Y))
 text(x=1,y=.8,labels=expr2,pos=1,cex=4) 
```

![在此处输入图像描述](../Images/cc5ac80b7ca3292dcade2ca9019a76e9.png)

# vim - 使用变量注释字符串在 vim 中插入结束折叠标记

> ID：15530205
> 
> 赞同：1
> 
> 时间：2013-03-20T17:09:20.640
> 
> 标签：vim, folding

我定义了两个用于在 Vim 中快速插入折叠标记的宏：

```
nnoremap <leader>mb A {{{<Esc>0
nnoremap <leader>me o# }}}<Esc>0zc 
```

但很快发现它们对不用`#`作注释字符串的所有内容都相当不满意。

所以我想出了这个动态地做它，但它不起作用：

```
nnoremap <leader>mb A {{{<Esc>0
nnoremap <leader>me :call s:InsertFoldEnding()

…

function! s:InsertFoldEnding()
  l:line=call line('.')
  l:str=&commentstring + '}}}'
  call append(l:line, l:str)
endfunction 
```

错误信息：

```
E81: Using <SID> not in a script context 
```

有什么问题？有没有更好的方法来插入这些折叠？

### 澄清：

我希望折叠最终看起来像这样：

```
" Caption {{{
Content
" }}} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T17:51:12.397

# javascript - Dojo 找一个节点下的一个节点

> ID：15530206
> 
> 赞同：0
> 
> 时间：2013-03-20T17:09:22.470
> 
> 标签：javascript, dojo

如果我们在 node1 下有 node2 那么 node1 有子 node2 和许多其他子

dojo从node1找到node2的方式，是

```
var node2 = dojo.query(node1).query(node2); 
```

正确的？

实际上我正在寻找“脚本”元素和“输入”，不知道从 Dojo 获取它的最佳方法。对不起，我是 Dojo 的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:17:07.850

您真正想要提供的是`dojo/query`根节点的第二个可选参数。

```
var listOfMatchingNodes = dojo.query(/* css selectors */,node1); 
```

如[参考指南](http://dojotoolkit.org/reference-guide/1.8/dojo/query.html)中所述，第二个参数会将查询限制为给定节点的子节点的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T17:21:08.947

如果您有对父节点的引用，@BuffaloBuffalo 发布的内容是一种可能的方法。如果您没有对父节点的引用，则以下内容可能对您有用。

```
<div class="parent">
    <div>Find ME!!!</div>
</div>

require(["dojo/query", "dojo/NodeList-dom"], function(query) {
    query(".parent > div").forEach(function(node) {
        // do something with the node
    });
}); 
```

无论@BuffaloBuffalo 发布的链接都应该可以帮助您找到适合您情况的答案。

# java - PasswordAuthentication 无法解析为类型错误

> ID：15530207
> 
> 赞同：0
> 
> 时间：2013-03-20T17:09:26.377
> 
> 标签：java, authentication

我正在创建一个扩展 java.net.Authenticator 的类来验证我的 FTP 代理。使用 PasswordAuthentication 时出现错误...

```
import java.net.Authenticator;
import java.net.PasswordAuthentication;
class ProxyAuthenticator extends Authenticator {
    private String user, password;
    public ProxyAuthenticator(String user, String password) {
        this.user = user;
        this.password = password;
    }
    //error here
    public PasswordAuthentication getPasswordAuthentication() {
        return new PasswordAuthentication(user, password.toCharArray());
    }
} 
```

我知道人们以前使用过这些确切的代码行，没有任何错误。知道有什么问题吗？

编辑：导入 java.net.PasswordAuthentication 后，我收到一条错误消息

java.net.Authenticator.getPasswordAuthentication

“覆盖 java.net.Authenticator.getPasswordAuthentication”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:10:57.677

你错过了`PasswordAuthentication`课程的导入！！

您要么使用完全引用的路径，`a.b.c.s.y.PasswordAuthentication`而不是 just ，`PasswordAuthenticator`要么像使用类一样使用导入来包含`Authenticator`该类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-11T05:10:28.797

```
import java.net.PasswordAuthentication; 
```

> 导入 passworkAuthentication 类。它会起作用的。

# .net - EntitySQL 中的 SelectMany 等效项

> ID：15530209
> 
> 赞同：1
> 
> 时间：2013-03-20T17:09:28.793
> 
> 标签：.net, entity-framework-4.3, entity-sql

我正在与一个 E-SQL 查询作斗争，其中我的一个字段在列表中。我的问题是如何让这个变平。我的查询如下：

```
select value d from
(select (
     select value tagEntry from x.application.applicantIssues as tagEntry where
     tagEntry.issueid=x.issueid and tagEntry.issueEntryId>x.minId
) as allTags
from (select issueId,application,count(1) as count,min(tag.issueentryid) as minId
from ApplicantIssues as tag 
where !tag.rectified
group by tag.issueid,tag.application having count(1)>1
) as x) as d 
```

问题是输出中的每条记录都是申请人问题的列表，而不是每条记录只是申请人问题。

我尝试使用 flatten on d 使用类似的东西

```
select flatten(d) from 
```

但它给出了错误：

```
The FLATTEN argument must be a collection of collections. Near simple identifier, line 1, column 16. 
```

我本可以使用 SelectMany 实现这一点，我认为 FLATTEN 方法适用于它，但似乎我没有正确使用它。

任何帮助将不胜感激。

在任何情况下，如果是关于查询的目的，就是选择组中的所有记录，跳过第一个项目。

我正在使用 EntityFramework 4.3

# django - Django FileSystemStorage get_available_name 返回名称和计数

> ID：15530211
> 
> 赞同：0
> 
> 时间：2013-03-20T17:09:40.433
> 
> 标签：django, django-file-upload

我希望有人能指出我正确的方向。

默认的 Django FileSystemStorage 函数 get_available_name 仅返回名称，然后将其存储在相应 FileField 的数据库中。

原始的 get_available 名称如下所示：

```
def get_available_name(self, name):

    dir_name, file_name = os.path.split(name)
    file_root, file_ext = os.path.splitext(file_name)
    count = itertools.count(1)
    while self.exists(name):
        name = os.path.join(dir_name, "%s_%s%s" % (file_root, count.next(), file_ext))

    return name 
```

我怎么可能也返回计数。我试图返回一个像 (name, count) 这样的元组，并尝试修复在 get_available_name 之后执行的相应保存方法，但在抓取计数方面没有成功。背景是一个文件类，我保存在这样的视图中：

```
class DataFile(models.Model):
    title=models.CharField(max_length=255, unique=False, blank=False)
    file=models.FileField(max_length=255, blank=False, storage=fs, upload_to=get_path) 
```

风景：

```
def save_uploaded_datafile(request):
   ### get request.FILES and save it
   f=DataFile()
   f.file=request.FILES['DataFile']
   f.title=f.file.name
   f.save() 
```

我怎么可能从 get_available_name 返回计数以保存到视图中以进行进一步处理？任何帮助都将不胜感激。谢谢！

PS：发布的代码不会运行，它更像是伪代码，但我希望你明白。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:44:43.603

您可以只检查 f.save() 返回的文件名：

```
file_name = f.save()
count = None
if file_name not f.title:
    file_root, file_ext = os.path.splitext(file_name)
    my_root, my_ext = os.path.splittext(f.title)
    # Add one to the length of my_root to capture the '_'
    root_length = len(my_root)+1
    count = int(file_root[root_length:]) 
```

这比找到一种传回计数的方法要贵一些，但它应该可以解决问题。

# sql-server - SQL Server：如果@variable 为空，则设置@variable = x

> ID：15530212
> 
> 赞同：13
> 
> 时间：2013-03-20T17:09:42.067
> 
> 标签：sql-server, stored-procedures, if-statement

我正在使用 SQL Server。我想要它，所以如果@variable 为空，它被设置为某个值。

```
set nocount on

IF object_id('tempdb..##tmp') IS NOT NULL 
BEGIN
     DROP TABLE ##tmp
END
CREATE TABLE ##tmp (week varchar (25), users int, stamps int)

  declare @inter varchar(100)
  declare @qt_users int
  declare @qt_stamps int
  declare @comando varchar(5000)
  declare @start date = null
  declare @end date = null
  declare @week datetime = DATEADD(DAY, 6, @start)

  --if @start is null, set it to a value:

  if (null!=@start)
  begin
    set @start = '20130101'
  end
  if (null!=@end)
  begin
    set @end = GETDATE()
  end

  while @start < @end
  begin
    select @qt_users = COUNT(distinct id_user) 
      from stamps 
      where dt_synchronization between @start and @week

    select @qt_stamps = COUNT(id_stamp) 
    from stamps 
    where dt_synchronization between @start and @week

    set @inter =  convert(varchar(10),@start,105) + ' até ' + 
    convert(varchar(10),@week,105)

    set @comando = 'insert into ##tmp(week, users, stamps) values (''' + 
      @inter + ''','''+ 
      cast(@qt_users as varchar) + 
      ''',''' + cast(@qt_stamps as varchar) + ''')'
    exec (@comando)
    set @start = @week + 1
    set @week = dateadd(day, 6, @start)

  end

select week, users, stamps from ##tmp 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-20T17:13:09.347

改用 IS NULL 进行检查，例如：

```
IF (@start IS NULL)
   SET @start = '20130101' 
```

或者，在一行中：

```
SET @start = ISNULL(@start, '20130101') 
```

**更新：** 另外，你设置@week 太早了：

```
declare @week datetime = DATEADD(DAY, 6, @start) -- @start is NULL 
```

改成：

```
declare @week datetime
-- IF checks here to set @start/@end if null...
SET @week = DATEADD(DAY, 6, @start) 
```

附带说明一下，还值得将循环重构为基于集合的方法以提高性能。计数/数字表类型方法是研究的一种选择。

# sql-server - 在 SQL 插入时递增序列号

> ID：15530222
> 
> 赞同：1
> 
> 时间：2013-03-20T17:10:11.483
> 
> 标签：sql-server, sql-server-2005, insert, sequence

有没有使用 SQL Server 2005 插入多行并增加特定字段的简单方法？

请注意，我**不是**在寻找涉及`identity`列的解决方案 - 请参阅问题底部以获取解释

（以下架构和数据已[在此 SQLFiddle 中](http://sqlfiddle.com/#!3/0a5a4/3/0)复制。）

例如，考虑下表和数据......

```
CREATE TABLE #TEMPTABLE (
   [PKID] INT IDENTITY, [FKID] INT, [MYTEXT] VARCHAR(10), [SEQUENCE] INT
)
INSERT INTO #TEMPTABLE ([FKID], [MYTEXT], [SEQUENCE]) VALUES (1, 'one', 1)
INSERT INTO #TEMPTABLE ([FKID], [MYTEXT], [SEQUENCE]) VALUES (1, 'two', 2)

-- Table data
PKID  FKID  MYTEXT  SEQUENCE
1     1     one     1
2     1     two     2 
```

以及要插入的以下数据...

```
DECLARE @FKID INT
SET @FKID = 1
DECLARE @NEWDATA XML
SET @NEWDATA = '<data><text>three</text><text>four</text></data>' 
```

**以下内容是否可以写成该`SEQUENCE`字段出现的方式`1,2,3,4`而不是`1,2,3,3`当前的方式？**

```
INSERT INTO #TEMPTABLE ([FKID], [MYTEXT], [SEQUENCE])
SELECT @FKID, 
       X.value('.','VARCHAR(10)'),
       (SELECT ISNULL(MAX([SEQUENCE]),0)+1 FROM #TEMPTABLE WHERE [FKID]=@FKID)
FROM @NEWDATA.nodes('/data/text') AS X(X)

-- Actual result...
PKID  FKID  MYTEXT  SEQUENCE
1     1     one     1
2     1     two     2
3     1     three   3
4     1     four    3  <-- Issue

-- Required result...
PKID  FKID  MYTEXT  SEQUENCE
1     1     one     1
2     1     two     2
3     1     three   3
4     1     four    4 
```

* * *

更新：

回应@marc_s 的评论...

> 身份将是 2005 年的最佳解决方案......迄今为止最好的解决方案 - 为什么您明确排除它并坚持自己滚动？（有导致重复等的所有风险......）

有问题的表将包含多组`SEQUENCE`值，每个“组”都基于`FKID`值......因此该表可以保存这些数据......

```
PKID  FKID  MYTEXT  SEQUENCE
1     1     one     1
2     1     two     2
3     1     three   3
4     1     four    4
5     2     ett     1
6     2     tva     2
7     2     tre     3 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T18:05:36.317

我无法在 2005 年进行测试，但您应该可以使用 CTE 来对事物进行编号；

```
DECLARE @FKID INT
SET @FKID = 1
DECLARE @NEWDATA XML
SET @NEWDATA = '<data><text>three</text><text>four</text><text>five</text></data>'

;WITH cte AS (SELECT @FKID FKID, X.value('.','VARCHAR(10)') a, 
                  ROW_NUMBER() OVER (ORDER BY X) r
             FROM @NEWDATA.nodes('/data/text') AS X(X))
INSERT INTO TEMPTABLE ([FKID], [MYTEXT], [SEQUENCE])
SELECT fkid, a,
  (SELECT ISNULL(MAX([SEQUENCE]),0)+r FROM TEMPTABLE WHERE [FKID]=cte.fkid)
FROM cte;

SELECT * FROM TEMPTABLE; 
```

结果是：

```
1    1    one     1
2    1    two     2
3    1    three   3
4    1    four    4
5    1    five    5 
```

* * *

**更新**

如果查询将只插入一个 FKID，则以下简化版本也可以工作（突出显示对当前查询的必要更改）：

```
INSERT INTO #TEMPTABLE ([FKID], [MYTEXT], [SEQUENCE])
SELECT @FKID, 
       X.value('.','VARCHAR(10)'),
       (SELECT ISNULL(MAX([SEQUENCE]),0)~~+1~~ FROM #TEMPTABLE WHERE [FKID]=@FKID)
       ** + ROW_NUMBER() OVER (ORDER BY (SELECT 1))**
FROM @NEWDATA.nodes('/data/text') AS X(X) 
```

`(SELECT 1)`在`ROW_NUMBER`'子句中的目的`ORDER BY`是避免指定任何特定的顺序。`X.value('.','VARCHAR(10)'`如有必要，可以将其更改为其他内容（例如更改为）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T17:15:10.143

怎么样

```
 INSERT INTO #TEMPTABLE ([FKID], [MYTEXT], [SEQUENCE])
    SELECT @FKID, 
               X.value('.','VARCHAR(10)'),
              (SELECT ISNULL(Count(*),0)+1 FROM #TEMPTABLE)
    FROM @NEWDATA.nodes('/data/text') AS X(X) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T17:30:58.553

试试这个：

```
with data as (
  select * from ( values
    (1,1,'one'),
    (2,1,'two'),
    (3,1,'three'),
    (5,1,'five'),
    (6,1,'six')
  ) data(PKID, FKID, MYTEXT)
) 
select lhs.*, sequence = count(*)
from data lhs
left join data rhs on rhs.FKID = lhs.FKID 
  and rhs.PKID <= lhs.PKID
group by 
  lhs.PKID,
  lhs.FKID,
  lhs.MYTEXT 
```

产生这个：

```
PKID        FKID        MYTEXT sequence
----------- ----------- ------ -----------
1           1           one    1
2           1           two    2
3           1           three  3
5           1           five   4
6           1           six    5 
```

# javascript - 如何阻止使用 preventDefault() （或类似的东西）阻止链接工作？

> ID：15530225
> 
> 赞同：1
> 
> 时间：2013-03-20T17:10:16.607
> 
> 标签：javascript, preventdefault

```
<script>
function test() {
var name=prompt ("Some question / text")
if (name.toLowerCase()=="TextToBlock") {
alert ("text");
name.preventDefault();
}
else {
}
}
</script>

<body>
< a id="link"  onclick="test()" href="http://www.example.com">Text</a>
</body> 
```

我希望这样，如果有人在提示框中输入“TextToBlock”，它将阻止用户转到链接位置。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:33:28.947

您只需`event`要从点击处理程序中获取对象。（参见小提琴[http://jsfiddle.net/amyamy86/pJvZd/](http://jsfiddle.net/amyamy86/pJvZd/)）

```
function test(event) {
    event = event || window.event;
    var name = prompt("Some question / text")
    if (name.toLowerCase() === "texttoblock") {
        alert("text");
        event.preventDefault();    // block link from working
    } else {
    }
};

<body>
    <a id="link"  onclick="test()" href="http://www.example.com">Text</a>
</body> 
```

阅读有关 Javascript 事件对象的更多信息：http: [//javascript.info/tutorial/obtaining-event-object](http://javascript.info/tutorial/obtaining-event-object)

此外，`===`用于严格比较。而且由于您转换了名称`.toLowerCase()`，您应该将其与`texttoblock`小写*进行*比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:30:51.427

只需一行即可：

```
<script>
  function test() {
    return "texttoblock" === prompt("Some question / text").toLowerCase() ? (window.event.preventDefault(), alert("text"), !1) : !0
  };
</script>

<body>
  <a id="link" onclick="test()" href="http://www.example.com">Text</a>
</body> 
```

演示：[JSFiddle](http://jsfiddle.net/Y4PMN/)

* * *

PS：如果您想在用户键入“TextToBlock”（**区分大小写**）时阻止加载链接，请在测试功能中将“texttoblock”更改为“TextToBlock”并删除`.toLowerCase()`.

# python - 有效解析纯文本

> ID：15530227
> 
> 赞同：-1
> 
> 时间：2013-03-20T17:10:33.350
> 
> 标签：python, parsing, memory, plaintext

请告诉我如何有效地解析名称并将它们从文本中存储到内存中，如下所示：

```
SMITH          1.006  1.006      1
JOHNSON        0.810  1.816      2
WILLIAMS       0.699  2.515      3
JONES          0.621  3.136      4
BROWN          0.621  3.757      5
DAVIS          0.480  4.237      6
MILLER         0.424  4.660      7
... 
```

此文本文件包含超过 80K 行。我只需要随机选择的名称；您可以在这里找到文件源[dist.all.last](https://stackoverflow.com/a/14609646/352555)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:13:34.213

这些行是空格分隔的，只需循环文件，然后使用`.split()`：

```
with open('dist.all.last') as inputfile:
    names = [line.split()[0] for line in inputfile if line.strip()] 
```

如果您需要从中随机选择*一个*名称，您可以使用：

```
import random
with open('dist.all.last') as inputfile:
    name = None
    for i, line in enumerate(inputfile):
        r = random.randint(0, i)
        if not r and line.strip():
            name = line.split()[0] 
```

它可以在内存中一次保留多行的情况下进行选择。

# javascript - 将文本框值和复选框值附加到字符串

> ID：15530229
> 
> 赞同：0
> 
> 时间：2013-03-20T17:10:38.953
> 
> 标签：javascript, jquery

我无法弄清楚如何将文本字段中的值（不包括空文本框和相应的复选框）以及所有选中和未选中的值按顺序附加到字符串中：name|T|F_name|F|F

我有这段代码，我一直在想办法把它变成一个字符串。在提交时，我会将此字符串发送到我的控制器。

```
<input type="text" value="jim">
<input type="checkbox" checked="checked">
<input type="checkbox">
<input id="button_1" type="button" value="delete" ><br>
<input type="text" >
<input type="checkbox">
<input type="checkbox">
<input id="button_2" type="button" value="delete"><br>
<input type="text" value="deb">
<input type="checkbox" checked="checked">
<input type="checkbox" checked="checked">
<input id="button_3" type="button" value="delete"><br>
<input type="submit">

$(':input[type="text"]').each(function() {
    if($(this).val() != "") { 
        nameString = $(this).val();

});

$(':checked').each(function() {

}); 
```

**更新**

[jsfiddle](http://jsfiddle.net/s7JZF/6/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T18:54:20.263

我建议：

```
var results = [], delimiter = '|', n, c;
$('input[type="text"]').each(function(){
    var that = $(this);
    n = this.value;
    if (n !== ''){
        c = that.nextUntil('input[type="button"]').map(function(){
            return this.checked == true;
        }).get().join(delimiter);
        results.push(n,c);
    }
});

console.log(results.join(delimiter)); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/s7JZF/)。

以上确实在某种程度上依赖于 HTML 的结构（特别是`radio`按钮之前的元素。

如果您需要`true`/`false`是`T`/ `F`，那么请改用：

```
var results = [], delimiter = '|', n, c;
$('input[type="text"]').each(function(){
    var that = $(this);
    n = this.value;
    if (n !== ''){
        c = that.nextUntil('input[type="button"]').map(function(){
            return (this.checked == true).toString().toUpperCase().slice(0,1);
        }).get().join(delimiter);
        results.push(n,c);
    }
});

console.log(results.join(delimiter)); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/s7JZF/1/)。

参考：

*   [`Array.join()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/join).
*   [`Array.push()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push).
*   [`each()`](http://api.jquery.com/each/).
*   [`get()`](http://api.jquery.com/get/).
*   [`map()`](http://api.jquery.com/map/).
*   [`nextUntil()`](http://api.jquery.com/nextUntil/).
*   [`Object.toString()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/toString).
*   [`String.toUpperCase()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/toUpperCase)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T17:17:59.467

你快到了，但如果我正确理解你的代码，你必须做一些小的改变......

```
namestring = "";
$(':input[type="text"]').each(function() {
     if($(this).val() != "") { 
         namestring += $(this).val();
         $(this).find("input[type='checkbox']").each(function() {
             if($(this).is(":checked"))
                 checked = T;
             else
                 checked = F;
             namestring += checked;
         }
         namestring += "_";
     }
}
//<Send namestring places> 
```

此代码应该可以满足您的需求，但我尚未对其进行测试。

编辑：http: [//jsfiddle.net/PuQ4r/](http://jsfiddle.net/PuQ4r/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T14:14:54.470

我使用了 2 个 for 循环，因为我相信您希望它每行都有结果。检查[http://jsfiddle.net/s7JZF/7/](http://jsfiddle.net/s7JZF/7/)

**注意：**如果文本框为空，我添加了排除行的条件。

```
var results = [],
    delimiter = '|';

$('table tr').each(function () {
    var line = [];
    $(this).find('input').each(function () {
        if (this.type == 'text') {
            //exclue blank textbox
            if (this.value == '') return false;

            line.push(this.value);
        } else if (this.type == 'checkbox') {
            line.push(this.checked?'T':'F');
        }
    });

    if (line.length) {
        results.push(line.join(delimiter));
    }
});

alert(results.join('_')); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T17:31:44.547

如果您为每个输入设置相同的名称，则值将作为字符串数组发送。

所以你的服务器端控制器（你没有说是哪种技术）应该马上选择它们。

默认情况下不会发送没有选中值的复选框。

你可以“预览”这个做一个 GET 而不是 POST 表单，所以如果你有：

```
<input name="form1" value="yes" type="text" />
<input name="form1" type="checkbox" value="sure" checked />
<input name="form1" type="checkbox" value="noway" /> 
```

GET 表格将为您提供：

```
someAction?form1=yes&form1=sure 
```

这又将是您服务器上的字符串数组。

我知道这不是一个直接的答案，而是正确使用 HTML 输入元素可能对您的情况有所帮助。

# ember.js - 使用 Ember 下载异步脚本

> ID：15530232
> 
> 赞同：0
> 
> 时间：2013-03-20T17:10:47.390
> 
> 标签：ember.js

我知道 ember 不是 AMD 的粉丝。ember 是否提供替代的异步脚本下载机制？我已经有一个脚本可以做到这一点。但是，如何配置 Ember 以推迟执行，直到所有文件都下载完毕？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:10:47.390

我在这里创建它只是为了存档目的。这是 Ember 论坛上的原始帖子和 pwagenet 回复的链接。

> 然后，您可以调用`MyApp.deferReadiness()`，当所有内容都加载后，调用 `MyApp.advanceReadiness()`. 将来，此类问题非常适合 StackOverflow。

[http://discuss.emberjs.com/t/async-script-downloading/542/4](http://discuss.emberjs.com/t/async-script-downloading/542/4)

# jquery - jQuery replaceWith / 切换

> ID：15530240
> 
> 赞同：1
> 
> 时间：2013-03-20T17:11:11.507
> 
> 标签：jquery, jquery-ui

我有一些数据视觉效果的 3 x 3 网格。每当用户将鼠标悬停在网格中的磁贴上时，我希望内容更改以呈现带有一些文本的纯色背景色，然后当用户将鼠标悬停在磁贴上时，我希望它恢复到仪表。我尝试了几种不同的方法来做到这一点，包括 .effect 但通常在隐藏/显示内容等时遇到问题。我使用下面的 replaceWith 函数获得了所需的替换效果，但是即使我尝试使用第二个函数另一个替换我无法让它恢复到我的仪表。有什么建议可以修改我的函数或尝试不同的 JQuery 函数吗？

```
 $('#fooChartButton').hover(function () {
        $('#fooChartButton').fadeOut('slow', function () {
            $('#fooChartButton').replaceWith('<a href="#" id="fooReplaceChartButton"><div class="large-3 large-offset-1 columns replaceGaugeArea"><div>foo<br />Chart</div></div></a>');
            $('#fooReplaceChartButton').show().fadeIn('fast');
        });
}); 
```

行 HTML：

```
<div class="row">
    <a href="#" id="foo1ChartButton">
        <div class="large-3 large-offset-1 columns modalGaugeArea">
            <span class=foo1Title">foo1</span>
            <div id="foo1Gauge" class="gaugeContainer"></div>
            <span class="foo1Dialogue">foo1</span>
        </div>
    </a>
    <a href="#" id="foo2ChartButton">
        <div class="large-3 large-offset-1 columns modalGaugeArea">
            <span class="foo2Title">foo2</span>
            <div id="foo2tGauge" class="gaugeContainer"></div>
            <span class="foo2Dialogue">foo2</span>
        </div>
    </a>
    <a href="#" id="foo3ChartButton">
        <div class="large-3 large-offset-1 columns modalGaugeArea">
            <span class="foo3Title">foo3</span>
            <div id="foo3Gauge" class="gaugeContainer"></div>
            <span class="foo3Dialogue">foo3 Activity</span>
        </div>
    </a>
</div> 
```

每个图块 CSS：

```
.modalGaugeArea {
    color: #000000;
    font-weight: bold;
    text-align: center;
    background-color: #ffffff;
    opacity: 1;
    -webkit-box-shadow: 0px 3px 5px #808080;
    box-shadow: 0px 3px 5px #808080;
    margin-top:5px;
    margin-bottom: 5px;
} 
```

# iphone - 在应用程序完全加载之前处理应用程序启动时的通知

> ID：15530243
> 
> 赞同：1
> 
> 时间：2013-03-20T17:11:33.587
> 
> 标签：iphone, ios, ipad, push-notification, apple-push-notifications

我的应用程序启动时的加载顺序遇到了一些问题。

当应用程序处于非活动状态时，我的设备正在接收远程通知。我在 didFinishLaunchingWithOptions 中处理这个问题。我从 launchOptions 获得通知，然后生成 NotificationCenter 通知，该通知在我的视图控制器中处理。

在视图控制器中，处理通知的方法意味着对 ui 进行一些更改，包括修改一些组件的布局和调用加载到 UIWebView 中的 javascript。

最后一部分永远不会发生，因为需要修改多个项目，包括将页面加载到 UIWebView 中发生在我的 viewDidLoad 中，它在处理通知的方法之后被调用。

有什么方法可以停止处理通知的方法的执行，直到加载 UIWebView 或直到 viewDidLoad 完成执行？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:18:05.697

实现`UIWebViewDelegate`并将 UIWebView 委托设置为 self。

```
- (void)webViewDidFinishLoad:(UIWebView *)webView
{
 //handle notification here

} 
```

**`webViewDidFinishLoad`**：

在 Web 视图完成加载框架后发送。

```
- (void)webViewDidFinishLoad:(UIWebView *)webView 
```

# c - R中15个数字的排列

> ID：15530253
> 
> 赞同：0
> 
> 时间：2013-03-20T17:11:52.177
> 
> 标签：c, r

我需要计算 R 中从 1 到 15 的 15 个数字的排列。

```
library(combinat)
#With 1 to 3
permn(3)
#With 1 to 10
options(max.print=factorial(10))
permn(10) 
```

考虑到 permn(10) 上面的代码的排列量，只需要 5 分钟，就可以满足我的需要（但我对速度并不感兴趣）。

但是，我需要使用 15 个数字（1 到 15）来执行此操作。不幸的是，当我尝试时 R 返回错误：

```
permn(15)
  Error in vector("list", gamma(n + 1)) : 
  vector size specified is too large 
```

**编辑** *这可以分阶段完成吗？* 我正在使用它来重新排序数据集，然后进行一些计算，所以我可以分阶段进行，例如执行前 300,000 个排列，应用计算，然后执行接下来的 300,000 个排列等。换句话说，计算 x 个排列然后在循环中根据第一个排列重新排序数据集列，进行一些计算，然后对第二个排列执行相同的操作等。

你知道解决这个问题的任何方法吗？是否值得使用一些 C 代码来代替？我找到了几个例子（例如[1](http://www.geeksforgeeks.org/write-a-c-program-to-print-all-permutations-of-a-given-string/)和[2](https://stackoverflow.com/questions/9148543/program-to-print-permutations-of-given-elements)），但我不知道 C 是如何工作的。我无法让它与 R 一起使用（可能是因为我不明白 C 代码在做什么）。

我已经安装了 Rccp、Rtools 并尝试了简单的 cppFunction 示例，它们工作正常，但是我没有得到任何字符串排列的结果（当我尝试在上面的链接中包含代码时，我得到了 sourceCpp 中的错误错误（代码= code, env = env, rebuild = rebuild, showOutput = showOutput, :). 正是因为我不懂 C 代码，所以向您展示我运行的代码可能毫无意义（很可能是错误的）。

有人会告诉我如何从 R 中运行上述（或者如果可能的话更好）C 代码，或者你有什么办法在 R 中解决它吗？

非常感谢

注意：我重新发布了这个，因为我更改了排列的数量并从字符串移动到数字。我还添加了一些关于我需要做什么的细节。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T17:13:54.007

真正的问题是`15!=1,307,674,368,000`。这只是太多列表需要迭代，更不用说存储在内存中了。

如果我们为了论证而假设 的每次迭代`permn(15)`将花费与 的一次迭代相同的时间`permn(10)`，而后者总共需要 5 分钟，那么您将看到 3.4 年的计算时间。

这称为[组合爆炸](http://en.wikipedia.org/wiki/Combinatorial_explosion)。

# jsp - 修改pentaho主页按钮

> ID：15530254
> 
> 赞同：2
> 
> 时间：2013-03-20T17:11:59.770
> 
> 标签：jsp, pentaho, saiku

我开始使用 pentaho。在 PUC 上，我想更改“新报告”和“新分析”按钮，并将它们分别替换为“saiku 报告”和“saiku 分析”

对于 saiku 分析，我发现了如何去做，我进去了

> \biserver-ce-4.8.0-stable\biserver-ce\tomcat\webapps\pentaho\mantle\launch\launch.jsp

并替换：

```
onClick="launch('launch_new_analysis', window.top.openAnalysis)" 
```

和：

```
onClick="launch('saikuButton',function() {warning('Error opening Saiku
Ananlysis.')})" 
```

它工作正常，但我不知道如何对 saiku 报告做同样的事情

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T10:15:22.663

我找到了解决方案

首先我需要修改

```
\biserver-ce\pentaho-solutions\system\saiku-adhoc\plugin.xml 
```

并添加这个

```
<overlay id="launch" resourcebundle="../content/saiku-adhoc/web/saiku-adhoc.properties">
            <button id="saikuAHButton" image="../content/saiku-adhoc/web/images/src/adhoc_32.png"
                        command="openURL('Saiku Reporting','Saiku Reporting','content/saiku-adhoc/web/index.html?biplugin=true')"
                        label="saiku ad hoc label button" />
        </overlay> 
```

就在之前`</overlays>` 然后我必须去

> \biserver-ce\tomcat\webapps\pentaho\mantle\launch\launch.jsp

并将“onclick new WAQR ...”修改为：

```
<td align="center" class="smallButton"><button class="pentaho-button" id="button0" onclick="launch('saikuAHButton', function() {warning('error opening saiku ad-hoc reporting .')})">New saiku Ad-hoc report</button></td> 
```

我可以对按钮顶部的图像做同样的事情（因为图像也是可点击的）：

```
<td align="center" width="226" valign="bottom" class="largeGraphicButton"><img src="images/clr.gif" width="226" height="10"><br><a href="#" onClick="launch('saikuAHButton', function() {warning('error opening saiku ad-hoc reporting .')})"><img src="images/new_report.png" border="0"></a></td>
        <td valign="bottom" width="3" class="largeGraphicSpacer"><img src="images/clr.gif" width="3" height="11"></td>
        <td align="center" width="226" valign="bottom" class="largeGraphicButton"><img src="images/clr.gif" width="226" height="10"><br><a href="#" onClick="launch('saikuButton',function() {warning('Error opening Saiku Ananlysis.')})"><img src="images/new_analysis.png" border="0"></a></td> 
```

现在，当我单击它时，我可以直接访问 saiku 报告和分析，我只需删除菜单上 WAQR 和分析器的快捷方式（这很容易），我很好

# ios - UIActivityIndi catorView 没有动画（场景 - 有 2 个 UIViews 和 2 个 UIActivityIndi catorObjects）

> ID：15530256
> 
> 赞同：0
> 
> 时间：2013-03-20T17:12:07.317
> 
> 标签：ios, uiactivityindicatorview, iphone-5, iphone-4

我有一个用于启动画面的视图控制器，我已经处理了

> A) 两个方向 -> 有两个 UIView，即 viewPortrait、viewLandscape
> 
> B) 两种屏幕尺寸 -> 3.5", 4"

我在 viewPortrait 上添加了 UIActivityIndi​​catorView 对象 spinner1 并在界面构建器中勾选了“动画”框。然后我在 viewLandscape 上添加了 UIActivityIndi​​catorView 对象 spinner2 并勾选了“动画”框。

这里的问题是，当我加载应用程序时，微调器没有动画。但是，当我旋转时，我可以看到微调器动画。我做错了什么？请看下面的代码。

界面：

```
#import <UIKit/UIKit.h>
#import "homeViewController.h"

@interface splashViewController : UIViewController

@property (nonatomic,retain) IBOutlet UIView *viewPortrait;
@property (nonatomic,retain) IBOutlet UIView *viewLandscape;
@property (nonatomic,retain) IBOutlet UIActivityIndicatorView *spinner1;
@property (nonatomic,retain) IBOutlet UIActivityIndicatorView *spinner2;
@property (nonatomic,retain) IBOutlet UIImageView *splash;

- (void) loadHomeView;
- (void) detectOrientation:(NSNotification *) obj;

@end 
```

实现文件：

```
#import "splashViewController.h"

@implementation splashViewController
@synthesize splash,spinner1,spinner2,viewLandscape,viewPortrait;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {}
    return self;
}

- (void)viewDidLoad {
    [super viewDidLoad];
    [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
    [[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(detectOrientation:) name:@"UIDeviceOrientationDidChangeNotification" object:nil];
}

- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
}

-(BOOL) shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation {
    return YES;
}

- (void) detectOrientation: (NSNotification *) obj {
    CGSize result=[[UIScreen mainScreen] bounds].size;
    UIDeviceOrientation dev = [[obj object]orientation];
    if(dev == UIInterfaceOrientationPortrait || dev == UIInterfaceOrientationPortraitUpsideDown) {
        self.view = self.viewPortrait;
        self.splash.contentMode = UIViewContentModeScaleAspectFit;
        if(result.height==568) [self.spinner1 setCenter:CGPointMake(157.0,360.0)];
    }
    else {
        self.view = self.viewLandscape;
        if(result.height==568) {
            [self.spinner2 setCenter:CGPointMake(284.0,270.0)];
            self.splash.image = [UIImage imageNamed:@"Default-568.png"];
        }
    }
//    [NSTimer scheduledTimerWithTimeInterval:5.0f target:self selector:@selector(loadHomeView) userInfo:nil repeats:NO];
}

- (void) loadHomeView {
    [self.spinner1 stopAnimating];
    [self.spinner2 stopAnimating];
    [self.spinner1 release];
    [self.spinner2 release];
    homeViewController *hv = [[[homeViewController alloc]initWithNibName:@"homeViewController" bundle:nil] autorelease];
    [self presentViewController:hv animated:NO completion:nil];
}

@end 
```

# android - 使用什么模拟器来测试 sw720dp-land 布局

> ID：15530264
> 
> 赞同：1
> 
> 时间：2013-03-20T17:12:23.463
> 
> 标签：android, commonsware

我正在运行一些示例代码来测试片段：

[https://github.com/commonsguy/cw-omnibus/tree/master/LargeScreen/EU4You](https://github.com/commonsguy/cw-omnibus/tree/master/LargeScreen/EU4You)

我正在尝试使用 android 模拟器测试结果，但我选择的模拟器似乎都不起作用（它们不使用 sw720dp-land 布局）。我确实按 Ctrl F11/F12 将屏幕旋转为横向。

有人可以告诉我在 Android 虚拟设备管理器中创建新 AVD 时要使用哪些设置。具体来说，什么“设备”和“目标”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T18:12:39.193

从技术上讲，您需要一个最短轴为 720dp 的模拟器。

因此，例如，基于`10.1" WXGA (Tablet)`库存设备定义的模拟器可以工作，因为这是一个`-mdpi`具有 1280x800`px`分辨率的模拟器图像。`1dp`==`1px`在`-mdpi`密度上，所以这将有资格获得`-sw720dp`资源。

就目标而言，`-sw720dp`在 API 级别 13 (Android 3.2) 中引入，因此您需要它或更高版本。

# java - 在 JDBC 中使用 CachedRowSet 时出现“启用自动提交时无法提交”异常

> ID：15530266
> 
> 赞同：4
> 
> 时间：2013-03-20T17:12:31.507
> 
> 标签：java, postgresql, jdbc

我正在尝试实现一个简单的 GUI 应用程序来处理数据库记录。它将包含记录视图和编辑它们的可能性。这是我的代码的样子：

```
class MainPanel extends JPanel {

    private CachedRowSet crs;
    private List<JTextField> fields = new LinkedList<>();

    MainPanel() {
        try {
            //Fill result set with data
            crs = new CachedRowSetImpl();
            crs.setUrl("jdbc:postgresql:testdb");
            crs.setUsername("username");
            crs.setPassword("password");
            crs.setCommand("SELECT * FROM products");
            crs.execute();

            //Create text fields with labels
            ResultSetMetaData meta = crs.getMetaData();
            for (int a = 1; a <= meta.getColumnCount(); a++) {
                JTextField field = new JTextField(10);
                add(new JLabel(meta.getColumnLabel(a)));
                fields.add(field);
                add(field);
            }

            //Fill fields on startup
            crs.next();
            updateFields();

            //Buttons
            JButton nextButton = new JButton("Next");
            nextButton.addActionListener(...);
            add(nextButton);

            JButton prevButton = new JButton("Previous");
            prevButton.addActionListener(...);
            add(prevButton);

            JButton saveButton = new JButton("Save changes");
            saveButton.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent event) {
                    try {
                        for (int a=0; a<fields.size(); a++) {
                            crs.updateString(a+1, fields.get(a).getText());
                        }
                        crs.acceptChanges();
                    } catch (SQLException ex) {
                        ex.printStackTrace();
                    }
                }
            });
            add(saveButton);
        }
        catch (SQLException ex) {
            ex.printStackTrace();
        }
    }

    private void updateFields() throws SQLException {
        for (int a = 0; a < fields.size(); a++) {
            fields.get(a).setText(crs.getString(a + 1).trim());
        }
    }
} 
```

走下一个和上一个工作正常。但是在尝试保存记录时出现异常。堆栈跟踪如下：

```
org.postgresql.util.PSQLException: Cannot commit when autoCommit is enabled.
    at org.postgresql.jdbc2.AbstractJdbc2Connection.commit(AbstractJdbc2Connection.java:705)
    at com.sun.rowset.internal.CachedRowSetWriter.commit(CachedRowSetWriter.java:1396)
    at com.sun.rowset.CachedRowSetImpl.acceptChanges(CachedRowSetImpl.java:893)
    at test.MainPanel$3.actionPerformed(MainPanel.java:85)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    ... 
```

如何防止此异常？什么是自动提交？我知道 Connection 类可以选择将其设置为 false，但我不想使用 Connection 类。我想使用 CachedResultSet 完成所有事情。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:31:17.453

只需添加

`crs.getConnection ().setAutoCommit (false);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-03T18:31:28.107

将以下内容添加到[URL](http://en.wikipedia.org/wiki/Uniform_Resource_Locator)的末尾：

```
"?relaxAutoCommit=true" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-07T14:30:37.987

我在使用 CachedRowset 时遇到了类似的问题。我正在使用[MySQL](http://en.wikipedia.org/wiki/MySQL)数据库。同时尝试许多解决方案。我终于想出了两个对我有用的解决方法。我想在这里提到它们：

1.  使用 Connection 对象并将它们传递给`execute(con)`and`acceptChanges(con)`方法。也设置`setAutoCommit(false)`。例子：

    ```
    Connection conn = DriverManager.getConnection(databaseUrl, username, password);
    conn.setAutoCommit(false);
    CachedRowSet rowSet=new CachedRowSetImpl();
    rowSet.setCommand("SELECT * FROM tableName");
    int [] keys = {1};  // Set column 1 as the key column in the RowSet
    rowSet.setKeyColumns(keys);
    rowSet.execute(conn);  // Execute on connection
    rowSet.moveToInsertRow();
    rowSet.updateInt(1, 89);  // Use column number
    rowSet.updateString(2, "Programming");
    rowSet.updateInt(3, 77);
    rowSet.insertRow();
    // Need to move away from insert row before apply changes
    rowSet.moveToCurrentRow();
    // Reconnect to data source to apply change in the RowSet.
    rowSet.acceptChanges(conn);  // On non-autocommit Connection 
    ```

注意：在这种情况下，您不需要设置 CachedRowset 的属性，例如 `setURL()`,`setUser()`和`setPassword()`. 因为 CachedRowset 对象使用 Connection 对象连接到手动创建的数据库 `autocommit=false`

2.  添加`?relaxAutoCommit=true`到[bobby-paulose](https://stackoverflow.com/users/1766484/bobby-paulose)提到的[URL](http://en.wikipedia.org/wiki/Uniform_Resource_Locator)

    ```
    Example:
    String url = "jdbc:mysql://localhost:3306/DatabaseName?relaxAutoCommit=true"; 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-18T01:03:20.280

我遇到了同样的问题——CachedRowSetImpl.acceptChanges() 未能关闭自动提交，当它提交更改时会抛出异常，因为它们已经单独提交。

这可能是因为 PostgreSQL 对自动提交有点挑剔。PostgreSQL 不允许通过 SQL 语句关闭自动提交（尽管它在早期是这样做的）。相反，任何必须作为一个组提交的 SQL 语句都必须夹在 SQL 语句 BEGIN 和 COMMIT 之间。PostgreSQL 的 JDBC 驱动程序确实支持 Connection.setAutoCommit(false)，但我敢打赌这只会提示驱动程序在幕后创建一个 BEGIN-COMMIT 三明治。我的猜测是 CachedRowSetImpl.acceptChanges() 试图使用 SQL 语句来关闭自动提交而不是使用 setAutoCommit(false) ，这就是它失败的原因。

我发现解决此问题的唯一方法是创建一个临时连接，关闭自动提交，并将连接传递给acceptChanges 的一个参数版本。所以代替这个：

```
crs.acceptChanges() 
```

你会有这样的事情：

```
try (Connection con 
        = DriverManager.getConnection(url, username, password)) {
    con.setAutoCommit(false);
    crs.acceptChanges(con);
} 
```

这确实需要使用您试图避免的 Connection 类，但可能没有其他选择（除了不使用 JDBC）。您不能使用 CachedRowSetImpl.getConnection() 因为它只检索在外部创建然后传入的连接。您不能通过 url 指定您希望自动提交关闭，因为 PostgreSQL 不允许这样做。如果可以更新 CachedRowSetImpl.acceptChanges() 以便它成功地自行关闭自动提交，那就太好了。但是，这似乎不太可能，因为我的编译器警告说 CachedRowSetImpl 可能会在未来的版本中被删除。

# java - 在 unix 重定向之前在 log4j 中捕获 stderr 和 stdout

> ID：15530272
> 
> 赞同：6
> 
> 时间：2013-03-20T17:12:52.543
> 
> 标签：java, log4j, stdout, stderr

我在我的应用程序中使用 log4j 来记录具有不同日志级别的某些包。

但是，此日志文件中似乎没有捕获 stderr 和 stdout，而是在应用程序启动时将它们打印在文件中

```
java AppName >> out.log 
```

是否可以在 log4j 中捕获 stdout 和 stderr （例如 stdout 作为 info 和 stderr 作为 WARN/ERROR ）以及在 out.log 文件中？

log4j 的设置如下：

```
<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/">
    <appender name="FileAppender" class="org.apache.log4j.DailyRollingFileAppender">
        <param name="File" value="${MDCapture.logfile.dir}/${APP_NAME}.log"/>
        <param name="BufferedIO" value="false"/>
        <param name="DatePattern" value="'.'yyyy-MMM-dd"/>
        <layout class="org.apache.log4j.TTCCLayout">
            <param name="DateFormat" value="ISO8601"/>
        </layout>
    </appender>

    <appender name="AsyncAppenders" class="org.apache.log4j.AsyncAppender">
        <appender-ref ref="FileAppender"/>
    </appender>

<!-- LOGGER PACKAGES -->

<root>
    <priority value="info"/>
    <appender-ref ref="AsyncAppenders"/>
</root>
</log4j:configuration> 
```

**更新：**

堆栈溢出错误的堆栈跟踪：

```
WARN root buffer size limit:65log4j:WARN root buffer size limit:65Exception in thread "Thread-12"
2013-03-22 09:14:24,451 [Thread-12] ERROR root - java.lang.StackOverflowError
2013-03-22 09:14:24,452 [Thread-12] ERROR root -        at java.io.BufferedWriter.write(BufferedWriter.java:202)
2013-03-22 09:14:24,452 [Thread-12] ERROR root -        at java.io.Writer.write(Writer.java:140)
2013-03-22 09:14:24,452 [Thread-12] ERROR root -        at java.io.PrintStream.write(PrintStream.java:475)
2013-03-22 09:14:24,452 [Thread-12] ERROR root -        at java.io.PrintStream.print(PrintStream.java:619)
2013-03-22 09:14:24,452 [Thread-12] ERROR root -        at java.io.PrintStream.println(PrintStream.java:756)
2013-03-22 09:14:24,452 [Thread-12] ERROR root -        at org.apache.log4j.helpers.LogLog.warn(LogLog.java:171)
2013-03-22 09:14:24,452 [Thread-12] ERROR root -        at org.apache.log4j.AsyncAppender.append(AsyncAppender.java:175)
2013-03-22 09:14:24,452 [Thread-12] ERROR root -        at org.apache.log4j.AppenderSkeleton.doAppend(AppenderSkeleton.java:251)
2013-03-22 09:14:24,452 [Thread-12] ERROR root -        at org.apache.log4j.helpers.AppenderAttachableImpl.appendLoopOnAppenders(AppenderAttachableImpl.java:66)

2013-03-22 09:14:24,452 [Thread-12] ERROR root -        at org.apache.log4j.Category.callAppenders(Category.java:206)
2013-03-22 09:14:24,452 [Thread-12] ERROR root -        at org.apache.log4j.Category.forcedLog(Category.java:391)
2013-03-22 09:14:24,452 [Thread-12] ERROR root -        at org.apache.log4j.Category.log(Category.java:838)
2013-03-22 09:14:24,453 [Thread-12] ERROR root -        at com.company.something.AClass.LoggingOutputStream.flush(LoggingOutputStream.java:198)
2013-03-22 09:14:24,453 [Thread-12] ERROR root -        at java.io.PrintStream.write(PrintStream.java:432)
2013-03-22 09:14:24,453 [Thread-12] ERROR root -        at sun.nio.cs.StreamEncoder.writeBytes(StreamEncoder.java:202)
2013-03-22 09:14:24,453 [Thread-12] ERROR root -        at sun.nio.cs.StreamEncoder.implFlushBuffer(StreamEncoder.java:272)
2013-03-22 09:14:24,453 [Thread-12] ERROR root -        at sun.nio.cs.StreamEncoder.flushBuffer(StreamEncoder.java:85)
2013-03-22 09:14:24,453 [Thread-12] ERROR root -        at java.io.OutputStreamWriter.flushBuffer(OutputStreamWriter.java:168)
2013-03-22 09:14:24,453 [Thread-12] ERROR root -        at java.io.PrintStream.write(PrintStream.java:477)
2013-03-22 09:14:24,453 [Thread-12] ERROR root -        at java.io.PrintStream.print(PrintStream.java:619)
2013-03-22 09:14:24,453 [Thread-12] ERROR root -        at java.io.PrintStream.println(PrintStream.java:756)
2013-03-22 09:14:24,453 [Thread-12] ERROR root -        at org.apache.log4j.helpers.LogLog.warn(LogLog.java:171)
2013-03-22 09:14:24,453 [Thread-12] ERROR root -        at org.apache.log4j.AsyncAppender.append(AsyncAppender.java:175)
2013-03-22 09:14:24,453 [Thread-12] ERROR root -        at org.apache.log4j.AppenderSkeleton.doAppend(AppenderSkeleton.java:251)
2013-03-22 09:14:24,453 [Thread-12] ERROR root -        at org.apache.log4j.helpers.AppenderAttachableImpl.appendLoopOnAppenders(AppenderAttachableImpl.java: 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-08-24T21:09:38.343

对于 log4j 2.x：

```
System.setErr(IoBuilder.forLogger(LogManager.getRootLogger()).setLevel(Level.ERROR).buildPrintStream());
System.setOut(IoBuilder.forLogger(LogManager.getRootLogger()).setLevel(Level.INFO).buildPrintStream()); 
```

依赖信息：

*   组：org.apache.logging.log4j
*   工件：log4j-iostreams

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T17:27:11.970

要将 stdout 和 stderr 重定向到 log4j，请尝试以下操作：

```
System.setErr( new PrintStream( new LoggingOutputStream( Logger.getRootLogger(  ), Level.ERROR ), true);

System.setOut( new PrintStream( new LoggingOutputStream( Logger.getRootLogger(  ), Level.INFO ), true); 
```

因为`LoggingOutputStream`你可以从[这个例子开始](http://svn.apache.org/repos/asf/logging/log4j/trunk/contribs/JimMoore/LoggingOutputStream.java)

要让 log4j 将您想要的内容打印到控制台（如果需要，可以将其捕获回文件/节点），将[ConsoleAppender](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/ConsoleAppender.html)启用到适当的级别

# regex - 正则表达式在字符串中有一个字母

> ID：15530274
> 
> 赞同：0
> 
> 时间：2013-03-20T17:13:05.413
> 
> 标签：regex, vb.net

我一直在寻找可以验证电话号码的正则表达式，但不知何故我找不到通用解决方案。

所以我只想检查字符串是否有任何字母 az

如果它没有通过它，例如

000 -> 通过

000(1) -> 通过

000a -> 失败

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:18:31.790

`(?mx)^(?=.*?([0-9]))((?![a-zA-Z]).)*$`

这将检查您的行中是否有任何数字，而没有任何字母字符。[请参阅此处](http://rubular.com/r/r03X1Ab0IN)的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:23:18.057

它用于电话号码验证

```
RegExp(/^[0-9 +()-]{3,30}$/i) 
```

仅用于字符串

```
RegExp(/^[a-zA-Z]{1,2}$/i) 
```

# android - 某些 Web 服务页面不是从 android 应用程序调用的

> ID：15530279
> 
> 赞同：1
> 
> 时间：2013-03-20T17:13:17.180
> 
> 标签：android, web-services

我正在从 android 调用 php web 服务，它将 json 数据发送到 android 应用程序。某些 Web 服务页面调用成功，但某些页面未调用。

即使我尝试从移动浏览器访问，但我也无法访问该页面。

谁能帮我解决什么问题？？？

# php - 如何在codeigniter中获取已加载库的实例

> ID：15530280
> 
> 赞同：-1
> 
> 时间：2013-03-20T17:13:18.233
> 
> 标签：php, codeigniter

我正在尝试在 codeigniter 中获取已加载库的实例，但遇到了困难。我的控制器中有：

```
$arguments=array('login'=>'***','pass'=>'***');  ;                   
$this->load->library('mailer', $arguments); 
```

我的构造函数第一行如下所示：

```
public function __construct($arr) 
```

这似乎有效。

当我添加时：控制器中的下一行：

```
$phpmail = new Mailer; 
```

我得到以下信息：

```
Severity: Warning

Message: Missing argument 1 for Mailer::__construct(), 
```

如何在我的控制器中获取此库的新实例？

提前致谢，

账单

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:15:40.750

CI 库加载器将库的实例直接添加到当前控制器对象。加载`mailer`库后，您可以以`$this->mailer`.

# c++ - 基于范围的for循环可以在一个范围内工作吗

> ID：15530284
> 
> 赞同：9
> 
> 时间：2013-03-20T17:13:25.437
> 
> 标签：c++, c++11, foreach

如果我有范围（一对 2 个迭代器），有没有办法为使用范围而不是原始数组或容器编写“for each”循环。

像这样的东西：

```
auto rng = std::equal_range(v.begin(),v.end(),1984);
for(const auto& elem: rng) {
    // ...
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-20T17:21:20.290

根据[为什么从 C++11 中删除了对范围访问？](https://stackoverflow.com/questions/6167598/why-was-pair-range-access-removed-from-c11?rq=1)您可以使用适配器，例如`as_range`at 接受的答案[`boost::make_iterator_range`](http://www.boost.org/doc/libs/1_63_0/libs/range/doc/html/range/reference/utilities/iterator_range.html)，或编写您自己的：

```
template<typename It> struct range {
   It begin_, end_;
   It begin() const { return begin_; }
   It end() const { return end_; }
};
template<typename It> range<It> as_range(const std::pair<It, It> &p) {
   return {p.first, p.second};
}

auto rng = std::equal_range(v.begin(),v.end(),1984);
for(const auto& elem: as_range(rng))
    ... 
```

这通常不适用的原因是，根据[Alastair Meredith 的论文](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2009/n2977.pdf)，算法，

*   `mismatch`并`partition_copy`返回一对来自不同范围的迭代器；
*   `minmax`返回一对可能根本不是迭代器的对象，如果它们是，则不能保证它们形成一个范围；
*   `minmax_element`可以返回一个范围，但它也可以返回一个反向范围（例如，在反向排序的范围`minmax_element`上将返回`{prev(last), first}`;
*   `equal_range`保证返回一个范围。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T17:18:41.307

我不认为它会像返回一对迭代器一样开箱即用地工作`equal_range`，而根据[文档](http://en.cppreference.com/w/cpp/language/range-for)的 for 循环范围是：

```
The begin_expr and end_expr are defined to be either:
If (__range) is an array, then (__range) and (__range + __bound), where __bound is the array bound
If (__range) is a class and has either a begin or end member (or both), then begin_expr is __range.begin() and end_expr is __range.end();
Otherwise, begin(__range) and end(__range), which are found based on argument-dependent lookup rules with std as an associated namespace. 
```

我想说你可以定义`begin`和`end`函数来接受这对迭代器并分别返回第一个和第二个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T17:24:29.863

```
#include <vector>
#include <algorithm>
#include <iostream>

template <typename I>
struct range_adapter {
    std::pair<I, I> p;

    range_adapter(const std::pair<I, I> &p) : p(p) {}

    I begin() const { return p.first; }
    I end() const { return p.second; }
};

template <typename I>
range_adapter<I> in_range(const std::pair<I, I> &p)
{
    return range_adapter<I>(p);
}

int main()
{
    std::vector<int> data { 1, 2, 2, 3, 3, 3, 4 };

    auto r = std::equal_range(data.begin(), data.end(), 2);

    for (const auto &elem : in_range(r))
    {
        std::cout << elem << std::endl;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T17:22:23.637

`std::equal_range`返回的只是一个 std::pair 。该标准不涵盖任何迭代此类事物的方法。

您可能想阅读的是 Alexandrescu 的[“Iterators must go”](http://www.slideshare.net/rawwell/iteratorsmustgo)演示文稿。[这是视频](http://blip.tv/boostcon/boostcon-2009-keynote-2452140)。关于使用 Ranges 迭代容器的更优雅方式的优秀读物。

范围在他的[Loki](http://loki-lib.sourceforge.net/)库中实现。

# python - 垃圾收集一个引用其实例的类？

> ID：15530290
> 
> 赞同：1
> 
> 时间：2013-03-20T17:13:36.107
> 
> 标签：python, garbage-collection

考虑这个代码片段：

```
import gc
from weakref import ref

def leak_class(create_ref):
    class Foo(object):
        # make cycle non-garbage collectable
        def __del__(self):
            pass

    if create_ref:
        # create a strong reference cycle
        Foo.bar = Foo()
    return ref(Foo)

# without reference cycle
r = leak_class(False)
gc.collect()
print r() # prints None

# with reference cycle
r = leak_class(True)
gc.collect()
print r() # prints <class '__main__.Foo'> 
```

它创建了一个无法收集的引用循环，因为引用的实例有一个`__del__` 方法。循环在这里创建：

```
# create a strong reference cycle
Foo.bar = Foo() 
```

这只是一个概念证明，可以通过一些外部代码、描述符或任何东西添加引用。如果您不清楚，请记住每个对象都包含对其类的引用：

```
 +-------------+             +--------------------+
  |             |  Foo.bar    |                    |
  | Foo (class) +------------>| foo (Foo instance) |
  |             |             |                    |
  +-------------+             +----------+---------+
        ^                                |
        |         foo.__class__          |
        +--------------------------------+ 
```

如果我可以保证`Foo.bar`只能从 访问`Foo`，那么循环就没有必要了，因为理论上该实例只能持有对其类的弱引用。

你能想出一种实用的方法来使这项工作不泄漏吗？

* * *

正如一些人问为什么外部代码会修改一个类但不能控制它的生命周期，考虑这个例子，类似于我正在努力的现实生活中的例子：

```
class Descriptor(object):
    def __get__(self, obj, kls=None):
        if obj is None:
            try:
                obj = kls._my_instance
            except AttributeError:
                obj = kls()
                kls._my_instance = obj
        return obj.something()

# usage example #
class Example(object):
    foo = Descriptor()

    def something(self):
        return 100

print Example.foo 
```

仅在此代码中`Descriptor`（[非数据描述符](http://docs.python.org/2/reference/datamodel.html#invoking-descriptors)）是我正在实现的 API 的一部分。`Example`class 是如何使用描述符的示例。

为什么描述符会在类本身中存储对实例的引用？基本上用于缓存目的。`Descriptor`需要与实现者签订此合同：它将在任何类中使用，假设

1.  该类有一个没有参数的构造函数，它给出了一个“匿名实例”（我的定义）
2.  该类具有一些特定于行为的方法（`something`此处）。
3.  类的实例可以在未定义的时间内保持活动状态。

它不假设任何关于：

1.  构建一个对象需要多长时间
2.  该类是否实现了**del**或其他魔术方法
3.  预计班级会持续多久

此外，API 旨在避免类实现者的任何额外负载。我本可以将缓存对象的责任转移给实现者，但我想要一个标准的行为。

这个问题实际上有一个简单的解决方案：使默认行为缓存实例（就像在这段代码中所做的那样），但如果实现者必须实现`__del__`.

*当然，如果我们假设必须*在调用之间保留类状态，这不会那么简单。

* * *

作为一个起点，我正在编写一个“弱对象”，它的实现`object`只保留了对其类的弱引用：

```
from weakref import proxy

def make_proxy(strong_kls):
    kls = proxy(strong_kls)
    class WeakObject(object):
        def __getattribute__(self, name):
            try:
                attr = kls.__dict__[name]
            except KeyError:
                raise AttributeError(name)

            try:
                return attr.__get__(self, kls)
            except AttributeError:
                return attr
        def __setattr__(self, name, value):
            # TODO: implement...
            pass
    return WeakObject

Foo.bar = make_proxy(Foo)() 
```

它似乎适用于有限数量的用例，但我必须重新实现整套`object`方法，而且我不知道如何处理覆盖的类`__new__`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T20:58:02.573

对于您的示例，为什么不将`_my_instance`dict 存储在描述符类上，而不是存储在包含描述符的类中？您可以在该dict中使用weakref或WeakValueDictionary，这样当对象消失时，该dict将失去其引用，并且描述符将在下一次访问时创建一个新的。

编辑：我认为您对在实例存在时收集类的可能性存在误解。Python 中的方法存储在类上，而不是实例上（除非有特殊技巧）。如果您有一个`obj`class对象`Class`，并且允许`Class`在仍然存在的情况下进行垃圾回收`obj`，那么在该对象上调用方法`obj.meth()`将失败，因为该方法将与该类一起消失。这就是为什么你唯一的选择是削弱你的 class->obj 引用；即使您可以使对象弱引用它们的类，它所要做的就是在弱点“生效”时破坏类（即，如果在实例仍然存在时收集类）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T20:41:29.650

`__del__`您面临的问题只是一般 ref-cycle-with-问题的一个特例。

我认为在您的情况下创建循环的方式没有任何异常，也就是说，您应该采用避免一般问题的标准方法。

我认为实现和使用 a`weak object`很难做到正确，你仍然需要记住在你定义的所有地方都使用它`__del__`。这听起来不是最好的方法。

相反，您应该尝试以下方法：

1.  考虑不在`__del__`课堂上定义（推荐）
2.  在定义的类中`__del__`，避免引用循环（通常，可能很难/不可能确保在代码中的任何地方都没有创建循环。在您的情况下，似乎您希望循环存在）
3.  明确地打破循环，使用`del`（如果在你的代码中有适当的点来做到这一点）
4.  扫描`gc.garbage`列表，并明确打破引用循环（使用`del`）

# autohotkey - Autohotkey 设置“..println” 读取一些东西

> ID：15530291
> 
> 赞同：1
> 
> 时间：2013-03-20T17:13:38.963
> 
> 标签：autohotkey

我正在尝试使用自动热键创建快捷方式，其中键入“println”会产生“System.out.println();” 但是输入“.println”会产生“.println();”。这样做的目的是帮助我在为我的 java 课程编写代码时经常输入的内容。我希望使用常规键盘点不是此快捷方式的小键盘点，但我不关心输出中使用了哪个点。

我尝试了以下方法：

```
;for Java println
::println::
SendInput System.out.println();{Left}{Left}
return

;block change if '.println'
::.println::
SendInput {NumpadDot}println();{Left}{Left}
return 
```

但是，这只适用于第一个快捷方式，而不适用于第二个快捷方式。你能帮我让这个脚本工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T18:06:40.230

`::.println::`事先声明`::println::`，你的想法就会奏效。

```
::. println::  ; you might wan't to add this in case you add a space after a ,
SendInput {NumpadDot}println();{Left}{Left}
return

::.println::
SendInput {NumpadDot}println();{Left}{Left}
return

::println::
SendInput System.out.println();{Left}{Left}
return 
```

# android - 可以从工作线程调用 NoticationManager.notify() 吗？

> ID：15530293
> 
> 赞同：49
> 
> 时间：2013-03-20T17:13:50.057
> 
> 标签：android, multithreading, notifications, android-notifications

我的问题更多的是关于什么是好的做法，而不是什么是可能的：

*   **`NoticationManager.notify()`从工作线程调用是一件好事吗？**
*   **系统是否在 UI 线程中执行它？**

我总是尽量记住，关于 UI 的东西应该在 UI 线程中执行，其余的在工作线程中执行，正如 Android 文档关于[Processes And Threads](http://developer.android.com/guide/components/processes-and-threads.html)所建议的那样：

> 此外，Andoid UI 工具包不是线程安全的。因此，您不能从工作线程操作您的 UI — 您必须从 UI 线程对您的用户界面进行所有操作。因此，Android 的单线程模型只有两条规则：
> 
> *   不要阻塞 UI 线程
> *   不要从 UI 线程外部访问 Android UI 工具包

然而，我对 Android 文档本身给出的一个例子感到惊讶（[关于在 Notifications 中显示进度](http://developer.android.com/guide/topics/ui/notifiers/notifications.html#Progress)），其中正在进行的通知进度是直接从工作线程更新的：

```
mNotifyManager =
        (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
mBuilder = new NotificationCompat.Builder(this);
mBuilder.setContentTitle("Picture Download")
    .setContentText("Download in progress")
    .setSmallIcon(R.drawable.ic_notification);
// Start a lengthy operation in a background thread
new Thread(
    new Runnable() {
        @Override
        public void run() {
            int incr;
            // Do the "lengthy" operation 20 times
            for (incr = 0; incr <= 100; incr+=5) {
                    // Sets the progress indicator to a max value, the
                    // current completion percentage, and "determinate"
                    // state
                    mBuilder.setProgress(100, incr, false);
                    // Displays the progress bar for the first time.
                    mNotifyManager.notify(0, mBuilder.build());
                        // Sleeps the thread, simulating an operation
                        // that takes time
                        try {
                            // Sleep for 5 seconds
                            Thread.sleep(5*1000);
                        } catch (InterruptedException e) {
                            Log.d(TAG, "sleep failure");
                        }
            }
            // When the loop is finished, updates the notification
            mBuilder.setContentText("Download complete")
            // Removes the progress bar
                    .setProgress(0,0,false);
            mNotifyManager.notify(ID, mBuilder.build());
        }
    }
// Starts the thread by calling the run() method in its Runnable
).start(); 
```

这就是为什么我想知道是否真的有必要在主线程上运行它，或者系统是否会处理它。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2013-04-04T06:09:29.067

`Notification`从工作线程更新 a 是可以接受的，因为`Notification`它不存在于应用程序的进程中，因此您不会直接更新其 UI。Notification 在系统进程中维护，并且`Notification`通过`RemoteViews`( [doc](http://developer.android.com/reference/android/widget/RemoteViews.html) ) 更新 UI，这允许操作由您自己的进程以外的进程维护的视图层次结构。如果您查看`Notification.Builder` [此处](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/app/Notification.java#L1420)的源代码，您会发现它最终构建了一个`RemoteViews`.

如果您查看`RemoteViews` [此处](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/widget/RemoteViews.java)的源代码，您会发现当您操作视图时，它实际上只是创建一个`Action`（[源](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/widget/RemoteViews.java#L193)）对象并将其添加到要处理的队列中。An`Action`是`Parcelable`最终通过 IPC 发送到拥有`Notification`的视图的进程，在那里它可以解包值并按照指示更新视图......在它自己的 UI 线程上。

我希望澄清为什么可以`Notification`从应用程序中的工作线程更新 a 。

# java - 在一个对象上设置背景颜色，更改另一个对象

> ID：15530300
> 
> 赞同：0
> 
> 时间：2013-03-20T17:13:54.967
> 
> 标签：java, android, android-resources, android-drawable

我有一个以可绘制为背景的 TextView。使用 StateListDrawable 对象，我尝试以编程方式设置背景颜色，但遇到了意想不到的行为：我在一个对象中设置了颜色，而在另一个对象中它发生了变化。这应该是不可能的。

相关代码：

```
 GradientDrawable notPressed = (GradientDrawable) getResources().getDrawable(R.drawable.rectangle);
    GradientDrawable isPressed = (GradientDrawable) getResources().getDrawable(R.drawable.rectangle);
    isPressed.setColor(util.getColour(api, this));

    StateListDrawable bg = new StateListDrawable();
    // bg.addState(new int[] { android.R.attr.state_pressed }, isPressed);
    bg.addState(StateSet.WILD_CARD, notPressed);

    textView.setBackgroundDrawable(bg); 
```

可绘制对象：

```
<shape  xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
<stroke android:width="1dp" android:color="@color/divider" />
<solid android:color="@color/background_button" />
</shape> 
```

`util.getColour`根据 api 的值返回颜色资源。

奇怪的是在上面的代码中`isPressed`设置了drawable的颜色，但是之后这个drawable就没有使用了。相反，只有`notPressed`可绘制对象被添加到 textView 的背景中。

但是textView的背景颜色变成了`isPressed`drawable的颜色！这应该是不可能的，因为它们应该是两个不同的对象，即使它们是从同一个可绘制资源创建的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:21:10.213

我认为，当您获得资源时，您会得到相同的参考。所以`notPressed`和`isPressed`是同一个对象。我相信某处有克隆操作...

编辑：

是的，你必须`mutate()`在修改它之前调用drawable。请参阅[向 Drawable 添加颜色过滤器会更改使用相同 Drawable 的所有 Button](https://stackoverflow.com/questions/10889415/adding-a-color-filter-to-a-drawable-changes-all-buttons-using-the-same-drawable)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:25:39.050

Android 对可绘制资源使用相同的对象，除非您指定需要它的新副本。

您可以使用此代码来解决此问题：

```
Drawable isPressed  = notPressed.getConstantState().newDrawable(); 
```

# php - 使用 PHPExcel 将 XLS 文件中的单个工作表转换为 CSV - 内存耗尽

> ID：15530302
> 
> 赞同：4
> 
> 时间：2013-03-20T17:13:56.883
> 
> 标签：php, memory, optimization, phpexcel

我有一个 Excel 文件 (97-2003)，我需要能够通过 PHP 导入该文件，并将文件中的一张表转换为 CSV。这些是由用户上传的，因此没有手动操作的选项。它需要与PHP一起使用。

我目前正在使用 PHPExcel，它工作正常，直到我们得到一个超过 33,000 行的文件......这给出了一个致命的 PHP 错误：`Fatal error: Allowed memory size of 1073741824 bytes exhausted (tried to allocate 97 bytes) in [pathtophpexcel]\PHPExcel\Worksheet.php on line 11231`

有什么方法可以进一步优化它，还是 PHPExcel 在处理大表时不适合使用？我使用的代码相当简单，所以不确定是否可以进一步优化它，但手指交叉！这是我正在使用的代码：

```
$reader = PHPExcel_IOFactory::createReader('Excel5');
$reader->setReadDataOnly(true);
$reader->setLoadSheetsOnly('Details');

$excel = $reader->load($filename);

$writer = PHPExcel_IOFactory::createWriter($excel, 'CSV');
$writer->save($filename_fixed); 
```

如果 PHPExcel 不适合这项工作，我最好使用什么？

**编辑 - 这是马克建议后的工作代码**

```
$cacheMethod = PHPExcel_CachedObjectStorageFactory::cache_to_phpTemp;
$cacheSettings = array( 'memoryCacheSize' => '2GB');
PHPExcel_Settings::setCacheStorageMethod($cacheMethod, $cacheSettings);

$reader = PHPExcel_IOFactory::createReader('Excel5');
$reader->setReadDataOnly(true);
$reader->setLoadSheetsOnly('Details');

$excel = $reader->load($filename);

$writer = PHPExcel_IOFactory::createWriter($excel, 'CSV');
$writer->save($filename_fixed); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T13:34:09.633

PHPExcel 1.7.3 引入`cell caching`了一种机制，以减少在 PHP 内存限制内维护大型工作簿的内存使用量。单元缓存通过序列化单元数据以减小其大小，或允许单元数据保存在 PHP 内存之外，仅在“内存中”维护单元索引，从而降低内存使用量。但以性能为代价。

默认情况下，单元缓存会将所有单元存储在内存中以获得最佳速度；但其他缓存选项包括：

*   压缩在记忆中
*   在内存中序列化
*   在内存中序列化的 igbinary
*   磁盘上的红色
*   装甲运兵车
*   内存缓存
*   wincache
*   phptemp
*   sqlite 或 sqlite3 数据库

它们之间的速度和内存使用情况会有所不同，并且还会根据操作平台和其他设置而有所不同，因此您需要确定在您自己的情况下使用哪个是最佳选择；但作为一般准则，内存使用效率越高，性能就越慢。SQLite 选项是最近添加的，并且提供了最佳的内存使用率，因为即使“单元格索引”也没有在内存中维护，我目前正在测试一些更改以查看是否可以提高 sqlite 执行速度。

开发人员文档的第 4.2.1 节介绍了用法

# matlab - 岭系数大于最小二乘

> ID：15530305
> 
> 赞同：0
> 
> 时间：2013-03-20T17:14:08.187
> 
> 标签：matlab, regression

我一直在使用 Matlab 来计算使用最小二乘法和岭的模型的系数。我很确定我所有的编码都是正确的。

但是对于一个数据集（波士顿住房），岭系数大于最小二乘系数。这真的可能吗？这是什么意思？还是我犯了编码错误？......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T05:08:49.543

看来这根本不是问题……

1）在典型的最小二乘问题中，您必须选择最小化的 beta 向量

||yX*beta||^2

2) 另一个相关问题（称为 Lasso 问题）是找到最小化的 beta 向量

||yX*beta||^2 + lambda*||beta||

3）最后，在岭回归中，您的问题是找到最小化的 beta 向量

||yX*beta||^2 + lambda*||beta||^2

请注意，在上面的问题 (2) 中，很明显您正在特别惩罚 β_i 的大小。

另一方面，在上面的问题 (3) 中，您正在惩罚 betas_i 大小的差异。我的意思是，如果你有向量 beta、小 beta_i 和大 beta_i ，你的成本仍然会很大。想象一下问题 (1) 中的向量 beta=[0.1;0.0001]。虽然“按比例”减少问题（2）中的两个 beta_is 似乎是一个很好的解决方案，但问题（3）中不会发生同样的情况，最好是稍微增加 beta_2=0.0001 的大小以减少更多beta_1=0.1 的大小。

因此，如果您的问题 (3) 的 matlab 解决方案呈现 beta_i 的大小更相似，那么您似乎做得很好。

我希望我能帮上忙，但我以前从未运行过这种回归，而且我这里也没有 matlab。

# php - 你能在“”中回显money_format（）吗？

> ID：15530306
> 
> 赞同：3
> 
> 时间：2013-03-20T17:14:09.890
> 
> 标签：php

我正在尝试回应以下内容

```
echo "The price is money_format('$%i', $price)" 
```

但这实际上呼应了

```
money_format('$%i', 9.99) 
```

是否可以在“”中回显money_format（'$%i'，$var_name）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T17:15:21.143

您需要连接运算符

```
echo "The price is " . money_format('$%i', $price); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T17:15:58.850

你不能。`money_format`但是您可以使用[字符串连接运算符`.`](http://www.php.net/language.operators.string)连接字符串文字和返回的字符串：

```
echo "The price is " . money_format('$%i', $price); 
```

或者将值作为单独的参数传递给`echo`：

```
echo "The price is ", money_format('$%i', $price); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T17:16:24.117

不，您不能在字符串中回显函数

你能做的只有两件事：

```
echo " $var and an array field: {$arr["fieldA"]"; 
```

函数调用始终必须使用 . 像这样的运算符：

```
echo " the return value of the function is: ".someFunction(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-24T07:30:27.297

你也可以这样做：

```
echo money_format("The price is %i", $number); 
```

会有相同的结果

# asp.net-mvc-4 - jquery对话框后如何提交表单

> ID：15530307
> 
> 赞同：1
> 
> 时间：2013-03-20T17:14:11.217
> 
> 标签：asp.net-mvc-4, validation, jquery-dialog

我有一个 mvc4 Web 应用程序一个带有表单的页面

```
@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)

<fieldset>
    <legend>News</legend>
    <div class="editor-label">
        @Html.LabelFor(model => model.title)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.title)
        @Html.ValidationMessageFor(model => model.title)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.summery)
    </div>
    <div class="editor-field">
        @Html.TextAreaFor(model => model.summery)
        @Html.ValidationMessageFor(model => model.summery)
    </div>

    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset>
} 
```

我想在表单有效后调用一个显示确认对话框的函数（jquery）

```
$("#dialog-message").dialog({
        modal: true,
        resizable: false,
        draggable: false,
        title: title, closeOnEscape: false,
        buttons: {
            "OK submit": function () {

            },
            "Cancel Submit": function () {

            }
        }
    }); 
```

这样做最好的方法是什么？我希望验证表单，如果有效则下一步显示确认消息，如果按下“确定提交”以提交表单，则下一步。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:25:46.080

尝试这个：

```
$(formSelector).submit(function(){
   var frm = $(this);
  if (frm.validate()) {
  $("#dialog-message").dialog({
        buttons: {
        "OK submit": function () {
              //not sure - here can be a mistake
              frm.unbind('submit');
             frm.sumbit();

        },
        "Cancel Submit": function () {

        }
    }
 });
 }
 return false;

}); 
```

如果你不想显示自定义对话框，你可以使用这个：

```
 $(formSelector).submit(function(){
  var frm = $(this);
  if (frm.validate()) {
          return confirm("Want to submit?");
     }
  return false;
 }); 
```

# sql - 自加入带来太多记录

> ID：15530308
> 
> 赞同：1
> 
> 时间：2013-03-20T17:14:12.530
> 
> 标签：sql, sql-server-2005, inner-join, self-join

我有这个查询来表达一组业务规则。为了获得我需要的信息，我尝试加入表本身，但这会带回比表中实际更多的记录。以下是我尝试过的查询。我究竟做错了什么？

```
SELECT DISTINCT a.rep_id, a.rep_name, count(*) AS 'Single Practitioner'
FROM [SE_Violation_Detection] a inner join [SE_Violation_Detection] b 
ON a.rep_id = b.rep_id and a.hcp_cid = b.hcp_cid
group by a.rep_id, a.rep_name
having count(*) >= 2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T17:25:01.167

您可以使用 having 子句来完成此操作：

```
select a, b, count(*) c
from etc
group by a, b
having count(*) >= some number 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T19:52:10.420

我想出了一种更简单的方法来获取其中一个查询所需的信息。上面那个还是错的。

```
--Rep violation for different HCP more than 5 times 
select distinct rep_id,rep_name,count(distinct hcp_cid) 
AS 'Multiple Practitioners' 
from dbo.SE_Violation_Detection
group by rep_id,rep_name 
having count(distinct hcp_cid)>4 
order by count(distinct hcp_cid) 
```

# c# - 显示警报时获取警报内容

> ID：15530309
> 
> 赞同：1
> 
> 时间：2013-03-20T17:14:18.500
> 
> 标签：c#, javascript, html, vb.net, winforms

我有一个带有这个脚本的 HTML 页面：

```
<Script>
function Run()
{
alert("The Content Here");
return true;
}
</script>
<button onclick="Run();">I Want It Now</button> 
```

假设我用**firefox**或**Chrome**打开了这个页面。假设我点击了“我现在想要”按钮，页面向我显示了警报：

```
The Content Here 
```

如何将警报内容插入到我的 VB.NET 项目中的字符串中？我知道我可以使用警报窗口句柄来获取标签句柄，然后提取（抓取）警报的文本，但我认为这不是最好的方法。是否有另一种方法可以将页面中的信息（不是来自**webbrowser 控件**或使用 **webClient.DownloadString** ）传递（或获取）到我的 VB.NET（或 C#）项目中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-01T12:14:10.627

顺便说一句，如果您改变主意并想使用网络浏览器控件，那么在没有网络浏览器控件的情况下使用 js 会很容易，您可以这样做:)

```
WebBrowser1.Document.GetElementById("NAME").InvokeMember("click"); 
```

# javascript - 以更整洁的方式使图像的某些部分可点击

> ID：15530310
> 
> 赞同：-1
> 
> 时间：2013-03-20T17:14:22.747
> 
> 标签：javascript, jquery, html, css, clickable

我尝试过使用坐标方法以及从 Photoshop 方法插入的图像。是否有另一种方法可以使部分图像以更整洁的方式可点击？

```
<script>
new el_teacher = ["candice","john"];
$(".teacher1").mouseenter(function(){
$(#textbox").show(el_teacher[0]);
});
$(".teacher2").mouseenter(function(){
$(#textbox").show(el_teacher[1]);
});
$("*").mouseleave(function(){
$(#textbox").hide();
});
</script>

<img src="ok.jpg" usemap="#image1">
<map name="image1">
<area shape="poly"    coords="123,41,131,51,130,13,105,13,123,41,131,51,130,13,105,13,123,41,131,51,130,13,105,13,123,41,131,51,130,13,105,13,123,41,131,51,130,13,105,13,123,41,131,51,130,13,105,13" class="teacher1">
 <area shape="poly"      coords="13,41,141,455,677,13,213,313,133,99,555,99,333,222,211,105,13,123,41,131,51,130,13,105,13,123,41,131,51,130,13,105,13" class="teacher2"> 
```

```
 <!-- Sorry i do not have my codes with me right now but this is roughly the senario.  -->
 <!-- @jycr753 i want the user to change the position of the click and the image also. -->
 <!-- I am looking for jquery or javascript that can eliminate or shorten the coordinates so  that the user can edit the information themselves easily --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T20:49:51.847

您可以制作`background-image`div 的图像，然后在其中包含绝对定位的链接（或其他任何内容），这可以是您的交互区域。[像这样](http://jsfiddle.net/adamco/FeZ8W/)

示例 html：

```
<div id="myImage">
    <a id="myImage_zone1" href="http://google.com"></a>
    <a id="myImage_zone2" href="http://aol.com"></a>
    <a id="myImage_zone3" href="http://yahoo.com"></a>
</div> 
```

示例CSS：

```
#myImage {
    background-image: url(http://farm9.staticflickr.com/8370/8366240991_45a728b522_z.jpg);
    width: 640px;
    height: 457px;
    position:relative;
}
#myImage a {
    border:1px solid #fff;
    width:50px;
    height:50px;
    display:block;
    position:absolute;
    background-color:rgba(255,255,255,0.1);
}
#myImage a:hover {
    background-color:rgba(255,255,255,0.3);
}
#myImage_zone1{
    top:350px;
    left:350px;
}
#myImage_zone2{
    top:150px;
    left:200px;
}
#myImage_zone3{
    top:280px;
    left:100px;
} 
```

# jquery - Jquery DialogBox 定位问题（卡在左上角）

> ID：15530318
> 
> 赞同：0
> 
> 时间：2013-03-20T17:14:36.820
> 
> 标签：jquery, jquery-ui, modal-dialog, jquery-ui-dialog, jquery-1.9

我一直有一个对话框的定位问题。

我正在使用经典的 ASP 或 VBScript 以及 jquery-ui-1.10.2 和 jquery-1.9.1.js

我的对话框工作得很好，除了定位。无论我更改什么，它似乎都卡在页面的左上角。我添加了一个位置，设置 center = true，尝试修改样式和其他一些小调整，但似乎没有任何效果。我在这里不知所措，想知道是否有其他人遇到过类似的问题，谢谢。

当我下载 JQuery UI 时，我确保检查了所有内容。

HTML：

```
<table cellpadding="0" cellspacing="0">
<td id="Comments" height="39" colspan="1">
</td>
</table>

<div id="dialog-message" title="Important information">
    <p style="text-align:center;"> Message regarding this content </p>
    <br/>
    <div style="margin-left: 23px;">
    <p>Subject: <input type="text" id="subject" />
    <br/> <br/>
    Body: <input type="text" id="question" />
    </div>
</div> 
```

查询：

```
 $(document).ready(function() {
        $("#dialog-message").hide()
    } 
    );
$("#Comments").click(function() {
    $("#dialog-message").dialog({
        modal: true,
        width: 400,
        height: 500,
        }
       }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:15:47.397

清理代码解决了问题：

```
$(document).ready(function() {
    $("#dialog-message").hide();
    $("#Comments").click(function() {
            $("#dialog-message").dialog({
                modal: true,
                width: 400,
                height: 500
            });
    });
}); 
```

这是一个[**工作的jsfiddle**](http://jsfiddle.net/martyk/5LfL5/9/)

# windows - 免费签署 .EXE 可执行文件 (CAcert)

> ID：15530320
> 
> 赞同：1
> 
> 时间：2013-03-20T17:14:40.983
> 
> 标签：windows, executable

我正在开发一些免费软件应用程序。大多数情况下，它们是用 Java 编写的，以使它们可以在多个系统上运行。同时我有几千个用户，所以很有趣。

为了使 Java 应用程序更容易在 Windows 下运行，我还使用 launch4j 创建可执行包装器，并使用 inno setup 创建安装程序应用程序。

现在我遇到了问题，因为 Windows 8。在以前的 Windows 版本中，操作系统只是通过尝试启动这样的可执行文件来显示一条消息，该可执行文件说 exe 文件来自“未知”供应商。在 Windows 8 中，它们变得更加困难。有类似“Windows 保护您免受这个危险应用程序！”之类的内容。

所以我对签署我的应用程序非常感兴趣。但我不愿意为此支付任何费用，因为我免费提供我的软件。使用 Google，我发现了允许人们创建免费证书的“CAcert”项目。但我还没有找到有关以下问题的详细信息：

*   我可以创建证书来签署可执行文件吗？
*   我可以使用我的公司名称创建证书吗？

有谁熟悉 CAcert 吗？或者还有其他人可以解决我的问题吗？

多谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:21:23.510

好吧，您可以使用 CAcert 证书来签署您的代码，但这对您没有帮助。那是因为操作系统没有安装 CAcert 根证书。

如果您想阻止您的用户看到这些消息，您需要获得商业证书。

# c++ - std::vector(InputIterator first, InputIterator last) 是线性时间复杂度吗？

> ID：15530321
> 
> 赞同：3
> 
> 时间：2013-03-20T17:14:45.067
> 
> 标签：c++, boost, constructor, time-complexity, stdvector

我想使用 C++`std::vector`输入迭代器构造函数来构建一个连续整数数组，如下所示：

```
std::vector<unsigned> indexes(boost::counting_iterator<unsigned>(0U),
                              boost::counting_iterator<unsigned>(10000U)); 
```

但是，我想知道它的时间复杂度是否与迭代器之间的距离成正比，或者由于重复调整大小以增加向量，它是否可能具有额外的对数分量？换句话说，构造函数是否查看两个迭代器之间的距离？由于构造函数参数不是随机访问迭代器，我不确定距离可以计算吗？

如果它会反复调整大小，是否有比这更好的解决方案来避免这种情况：

```
std::vector<unsigned> indexes;

indexes.reserve(10000U);

for (unsigned idx = 0; idx < 10000U; ++idx) {
  indexes.push_back(idx);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T17:26:51.943

> 时间复杂度是`std::vector(InputIterator first, InputIterator last)`线性的吗？

**简而言之，是的。**

该标准`vector(InputIterator, InputIterator)`在 §23.3.6.2 中保证以下内容：

> 复杂性：仅对 T 的复制构造函数进行 N 次调用（其中 N 是 first 和 last 之间的距离）**，如果迭代器 first 和 last 是前向、双向或随机访问类别，则不进行重新分配**。如果它们只是输入迭代器，它会对 T 的复制构造函数和 order log(N) 重新分配进行 order N 调用。

基本上，对于前向、双向或随机访问迭代器，您不应该期望从使用`reserve()`第二个示例中看到任何性能提升；构造函数会自动为您执行此操作。

对于普通的输入迭代器，`reserve()`会加快速度，但不会超过一个常数因子。`log(n)`重新分配仍将在总`O(n)`时间内完成，因此构造向量的总时间也将是`O(n)`.

# sql-server - 如何将两行合并为一并允许空值

> ID：15530322
> 
> 赞同：3
> 
> 时间：2013-03-20T17:14:46.770
> 
> 标签：sql-server

我在这里看到了类似的示例和解决方案，它们让我走到了这一步（谢谢），但无法弄清楚最后一步。理想情况下，该解决方案对于组合数十万行是有效的。

基本上我有一个价格数据表，每个项目有 1 行或 2 行，每个项目具有不同类型的价格数据 - 价格类型 1 和价格类型 2。我想最终得到一个表格/视图，将 2 个价格组合到一行但保留每个的相对位置，并允许价格 2 数据为空值。

所以如果我有这些数据：

```
CREATE TABLE Table1 ([Name] varchar(2), [type] char(1), [price] decimal(10,2));

INSERT INTO Table1 ([Name], [type], [price])
VALUES
    ('a', '1', '1.20'),
    ('a', '2', '1.25'),
    ('a1','1', '2.99'),
    ('b', '1', '2.20'),
    ('b', '2', '2.25'),
    ('b1','2', '3.99'),
    ('c', '1', '3.20'),
    ('c', '2', '3.25'),
    ('d', '1', '4.20'),
    ('d', '2', '4.25'); 
```

我可以运行这个 SQL：

```
select name, [1] price_1, [2] price_2
from
(
  select name,
         price,
         row_number() over (partition by name
                            order by type asc) rn
    from table1
) o
pivot (min(price) for rn in ([1], [2])) p 
```

我得到以下输出，这不太适合我想要的。

```
NAME PRICE_1  PRICE_2
a    1.2      1.25
a1   2.99     (null)
b    2.2      2.25
b1   3.99     (null)
c    3.2      3.25
d    4.2      4.25 
```

我需要的是 a1 和 b1 行在 price_1 列中具有空值，在 price_2 列中具有价格。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T17:18:06.780

完全加入可以做到这一点......

```
Insert newTable(name, PriceA, PriceB)
Select coalesce(a.Name, b.Name) Name,
    a.Price, b.price
From oldTable a Full Join oldTable b
   On b.name = a.Name
       and a.Type = [PricetTypeA]
       and b.Type = [PricetTypeB] 
```

或者，如果 pricetype 是字符串 = 'A' 或 'B'，

```
Insert newTable(name, PriceA, PriceB)
Select coalesce(a.Name, b.Name) Name,
    a.Price, b.price
From oldTable a Full Join oldTable b
   On b.name = a.Name
       and a.Type = 'A'
       and b.Type = 'B' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T18:01:09.030

查尔斯给了我使用完全连接的想法，在玩了之后我得到了这个工作。

```
Select coalesce(a.Name, b.name) as name, a.Price as price1, b.price as price2
From      (select name, price from table1 where type='1') a
full Join (select name, price from table1 where type='2') b
On b.name = a.Name 
```

这可以很好地用作视图。

很高兴有任何其他建议和意见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T18:52:25.633

我真的不明白你为什么要使用`ROW_NUMBER`. 您可以只使用该`type`列：

```
select name, [1] price_1, [2] price_2
from
(
  select name,
         price,
         ~~row_number() over (partition by name~~
                            ~~order by type asc)~~ **type** rn
    from table1
) o
pivot (min(price) for rn in ([1], [2])) p 
```

[SQL Fiddle 演示](http://sqlfiddle.com/#!3/a19f8/13)

# c - 如何在C语言的头文件中定义常量变量

> ID：15530335
> 
> 赞同：3
> 
> 时间：2013-03-20T17:15:27.783
> 
> 标签：c

我在头文件中定义了几个结构，一些结构的所有成员都具有常量值，而其他一些结构的部分成员具有常量值

对于那些具有常量成员的结构，是否可以在头文件中定义一个常量变量？

就像在头文件 tcp_option.h

```
struct tcp_opt_nop
{
    _uint_t kind;  /* it has a constant value 0x01*/
} 
```

所以我想定义一个常量变量，比如

```
struct tcp_opt_nop opt_nop={ 0x01}; 
```

然后这个变量可以被其他源文件使用

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T17:57:09.650

你应该`extern`变量。

`.h`文件：

```
#ifndef HDR_H
#define HDR_H

typedef struct 
{
    int  kind;  /* it has a constant value 0x01*/
} tcp_opt_nop;

extern const tcp_opt_nop  opt_nop;

#endif 
```

`.c`文件：

```
#include "hdr.h"

const tcp_opt_nop opt_nop = {0x01}; 
```

主文件：

```
#include "hdr.h"

int main()
{
    printf("%i\n", opt_nop.kind);
    // ...
} 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-03-20T17:35:54.557

是的，你可以定义。请参阅以下代码。

```
#include<stdio.h>
typedef struct temp
{
    int a;
} temp;
const temp test={5};
int main()
{
    printf("%d",test.a);
    return 0;
} 
```

# c# - 如何将作为 lambda 表达式的属性添加到使用 TypeBuilder 创建的类

> ID：15530339
> 
> 赞同：0
> 
> 时间：2013-03-20T17:15:33.090
> 
> 标签：c#, lambda, typebuilder

我正在尝试在运行时使用 TypeBuilder 定义和创建一个类。我正在处理正常的属性等，但是如果我想像这样向我的类添加一个 lambda 表达式怎么办

```
Id(x => x.ID); 
```

我用这个作为我的例子：[TypeBuilder.DefineConstructor 方法](http://msdn.microsoft.com/en-us/library/dda9whaz%28v=vs.95%29.aspx)

**更新：**

我觉得这真的是一种表达方式。这是所说的代码。您可能会将其识别为流畅的映射代码。

```
public class AddressMap : ClassMap<Address>
{
    public AddressMap()
    {
        Id(x => x.ID);
        Map(x => x.NAME);
    }
} 
```

# relational-database - 关系平面文件数据库

> ID：15530342
> 
> 赞同：0
> 
> 时间：2013-03-20T17:15:43.927
> 
> 标签：relational-database, flat-file

对于小型应用程序，需要使用具有关系能力的平面文件数据库（2 或 3 个表）。

关于此架构的几个问题：

1.  这样的数据库存在吗？
2.  大型数据集的性能是否受到影响？（例如，10k-20k 条目）

我想使用平面文件数据库的原因是可以复制和粘贴整个内容（根目录），而不必担心导出数据库、在另一个系统中安装和配置数据库等。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T17:18:59.607

尝试[SQLite](http://www.sqlite.org)。

它易于使用、便携、无需配置且性能出色（10k / 20k 不算什么）

# wildcard - 自动热键通配符读取循环

> ID：15530345
> 
> 赞同：1
> 
> 时间：2013-03-20T17:15:48.197
> 
> 标签：wildcard, autohotkey

我想要一个脚本来命令多台计算机来分解高度可分布的工作负载。为了分配工作量，我将一半的任务标签放在一个文件中，将一半的任务标签放在另一个文件中，然后我使用 google 驱动器分配给计算机（这就是我需要不同文件名的原因）。所以 C:\googledrive\task1.txt 和 C:\googledrive\task2.txt

自动热键命令如下所示：

```
loop, read, c:\googledrive\task*.txt 
```

但它似乎没有读取 task1.txt，而是尝试将“task*.txt”读取为文字文件名，失败并结束循环。

想法？谢谢。

好的，尝试确保一切都以管理员权限运行（它们是）并确保文件存在（它们确实存在）并且文件路径中没有拼写错误（那里一切正常）。仍然不会真正读取文件。

有一点我没有在原始帖子中包含文件名的一部分实际上是一个变量，所以循环命令实际上是这样的：

```
 loop, read, c:\googledrive\%task%*.txt 
```

我只是认为那一点无关紧要。

如果我为每台计算机保存不同的脚本，我可以继续用实际位替换通配符，它​​可以工作。

所以...我只是用文件中的计算机名称命名每个文件，并将命令更改为：

```
loop, read, c:\googledrive\%task%%A_ComputerName%.txt 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T20:38:05.510

I do it this way....

```
Loop, C:\Temp\Source\*.txt ; Lists the next file as A_LoopFileName
{
    Loop, read, C:\Temp\Source\%A_LoopFileName% ; process current file
    {
        IfInString, A_LoopReadLine, abc
        {
        .......
        }
    }
} 
```

# ios - UITableView 原型单元上的自定义附件视图未触发

> ID：15530346
> 
> 赞同：5
> 
> 时间：2013-03-20T17:15:48.470
> 
> 标签：ios, uitableview, xcode-storyboard

我在情节提要的原型单元格上有一个自定义附件视图（一个 UIButton）。当我单击该按钮时，不会调用点击的附件按钮的委托方法。如果我使用标准的披露按钮，它就可以正常调用。我假设我错过了某个地方的连接。有谁知道在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-27T08:41:32.833

附件委托方法的苹果文档说

> 代理通常通过显示与所选行相关的新视图来响应对公开按钮（附件视图）的点击。为 indexPath 处的行设置辅助视图时，不会调用此方法。

因此自定义附件视图不调用它。这是一种标准行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T17:38:23.373

**猜想 1：** 您实际上并没有“自定义附件视图”，而是`UIButton`将其放置在附件所在的位置。这不会触发委托附件轻按按钮，因为它不是真正的附件。

**猜想 2：** 您确实有一个真正的附件视图，但它永远不会收到“点击”事件，因为您有一个`UIButton`正在吃用户交互但没有触发动作的事件。在这种情况下，尝试添加一个简单的`UIView`代替。

除此之外，我需要更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T18:06:16.923

我最终使用自定义表格单元格的协议解决了这个问题。

CustomAccessoryTableCellDelegate.h

```
@protocol CustomAccessoryTableCellDelegate <NSObject>

     @required
     - (void) accessoryButtonTappedForCell: (UITableViewCell *) cell;

@end 
```

CustomAccessoryViewTableCell.h

```
 @interface CustomAccessoryViewTableCell : UITableViewCell

      /** The custom accessory delegate. */
      @property (nonatomic, weak) id<CustomAccessoryTableCellDelegate> delegate;

 @end 
```

CustomAccessoryViewTableCell.m

```
- (IBAction) buttonAction:(id)sender{

    if ([self.delegate respondsToSelector:@selector(accessoryButtonTappedForCell:)]) {
        [self.delegate accessoryButtonTappedForCell:self];
    }

} 
```

表视图控制器内部

```
- (UITableViewCell *)tableView:(UITableView *)tableView 
         cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    CustomAccessoryViewTableCell *cell = [tableView
                         dequeueReusableCellWithIdentifier:@"MyCustomCell"];

    cell.label.text = @"Some Name";
    cell.delegate = self;

    return cell;
 }

#pragma mark - Custom Accessory View Delegate

- (void) accessoryButtonTappedForCell:(UITableViewCell *)cell{
    [self tableView:self.writerTable 
        accessoryButtonTappedForRowWithIndexPath: [self.writerTable
                                                      indexPathForCell:cell]];
} 
```

# tsql - 如何编写 T-SQL 查询来计算每月最后一天逾期 31 天或更大的金额总和？

> ID：15530351
> 
> 赞同：1
> 
> 时间：2013-03-20T17:16:04.303
> 
> 标签：tsql, conditional-statements

我正在尝试计算该月最后一天逾期 31 天或更长的金额。到目前为止，我已经做到了这一点，但我不确定如何在本月的最后一天应用第二个条件。感谢您的提示

```
SELECT SUM(balance_amount) AS total_amount FROM MyTable
WHERE DATEDIFF(dd,date_due,date_paid) >= 31 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:28:09.207

很明显，在任何一个月的最后一天，逾期 31 天的金额是指月底前 31 天的交易金额，除非它们已经支付。

```
Select Sum(t.Amount) - Sum(p.Amount)
From invoices t join payments p
    On p.AccountNum = t.AccountNum
Where t.InvoiceDate < DateAdd(month, 1 + datediff(month, 0, getdate()), 0)-32 
```

最后一行的表达式， `DateAdd(month, 1+datediff(month, 0, getdate()), 0)` 是我看不到的下个月的第一天
（无法访问您的架构），您如何判断，仅从帐户余额中，有多少余额将逾期 31 天本月末。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:28:32.333

尝试这样的事情

```
Select Dateadd(d,-DATEPART(d,DateAdd(m,1,getdate())),DateAdd(m,1,getdate())) as [Last Day of Month] 
```

您可以通过在今天的日期加上 1 个月然后减去该特定月份的天数来计算当前月份的最后一天。尝试一些极端情况，例如 2 月 28 日等

# ios - 测试外部附件框架应用程序

> ID：15530352
> 
> 赞同：3
> 
> 时间：2013-03-20T17:16:10.197
> 
> 标签：ios, ios-simulator, external-accessory

有没有办法在没有 iAP 硬件的情况下编写示例代码（或运行 EADemo 应用程序）？例如： - 让模拟器模拟硬件 - 使用便宜的设备，我知道它的协议字符串

我只需要编写一个检测附件并获取一些信息的应用程序。EADemo 应用程序很好，但我没有任何真实或仿真硬件。

有什么提示吗？

谢谢

PS 我现在不是 MFi 计划的一部分

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:16:37.207

无法使用模拟器或除 MFi 设备以外的任何其他设备进行测试。要使用扩展坞连接器或蓝牙（蓝牙经典）与外部设备通信，您需要 MFi。您可以尝试从 Bluegiga 等现有供应商处获取 MFi 设备。

# d3.js - 如何为以下 d3 图表构造数据数组，以便填充真实数据

> ID：15530353
> 
> 赞同：1
> 
> 时间：2013-03-20T17:16:13.337
> 
> 标签：d3.js, nvd3.js

[http://nvd3.org/ghpages/scatter.html](http://nvd3.org/ghpages/scatter.html)

我想建立一个与上面的例子非常相似的图表。我仍处于起步阶段，尝试输入我自己的数据时遇到了一点困难，无论是作为 CSV 还是在代码中内联。

我很确定下面的代码负责生成虚假数据以填充图表，但是，我似乎找不到输入真实数据的正确方法。我已经阅读了 d3 站点上文档的“数据”参考部分，并尝试实现代码，但无法让它工作。我认为问题在于结构。问题是，我如何找出我需要如何构造数据数组并将其用作数据的输入？

这是我正在构建图表版本的现场示例。 [http://goo.gl/XHela](http://goo.gl/XHela)

这是生成随机数据的代码：

```
function randomData(groups, points) { //# groups,# points per group
  var data = [],
      shapes = ['circle', 'cross', 'triangle-up', 'triangle-down', 'diamond', 'square'],
      random = d3.random.normal();

  for (i = 0; i < groups; i++) {
    data.push({
      key: 'Group ' + i,
      values: []
    });

    for (j = 0; j < points; j++) {
      data[i].values.push({
        x: random(), 
        y: random(), 
        size: Math.random(), 
        shape: shapes[j % 6]
      });
    }
  }

  return data;
} 
```

在您回复之前，我尝试使用以下代码将函数 randomData 的结果输出到页面（刚刚修改过的相同）。

```
 function see(groups, points) { //# groups,# points per group
  var data = [],
      shapes = ['circle', 'cross', 'triangle-up', 'triangle-down', 'diamond', 'square'],
      random = d3.random.normal();

  for (i = 0; i < groups; i++) {
    data.push({
      key: 'Group ' + i,
      values: []
    });

    for (j = 0; j < points; j++) {
      data[i].values.push({
        x: random(), 
        y: random(), 
        size: Math.random(), 
        shape: shapes[j % 6]
      });
    }
  }

data.toString();
var x=document.getElementById("demo");
x.innerHTML=data;
} 
```

但是在页面上的输出是 [object Object],[object Object],[object Object],[object Object]

我想接下来的问题是如何将我自己的数据用于此图表而不是生成的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:49:24.890

`data`您可以通过在 Chrome 中使用 Chrome 开发人员工具的控制台逐步执行代码来查看其结构。在您上面链接的页面（第一个链接）`Ctrl + Shift + C`中，在 Windows 或`Command + Shift + c`OSX 中按下将打开此窗口。单击 Sources 并`scatter.js`从左侧的文件列表中找到该文件。在以下行设置断点：`return data`。刷新页面。代码执行将在该行暂停。现在转到控制台并输入`data`. `data`用于图表的 将被输出。您可以浏览该结构并了解它是如何创建的。

最后你应该看到这样的东西：

![控制台的屏幕截图。](../Images/abe7a0e0784b022a92dac359565fabf5.png)

# c++ - C++ - 不是类或命名空间错误

> ID：15530354
> 
> 赞同：0
> 
> 时间：2013-03-20T17:16:15.760
> 
> 标签：c++

我对 C++ 相当陌生，当我尝试调用 create_event_file() 函数时，我收到以下错误“fw”不是主文件中的类或命名空间。

这是我的代码。

```
#ifndef FILE_WRITER_H
#define FILE_WRITER_H
#include <string>
using namespace std;

class File_Writer{

private:
int test;

public:
File_Writer() { }

void create_event_file(void);
void write(const string file_name, string data);
};

#endif // FILE_WRITER_H 
```

.cpp 文件

```
#include "file_writer.h"
#include <iostream>
#include <fstream>
using namespace std;

File_Writer::File_Writer(void){
cout << "Object of File_Writer is created" << endl;
}

void File_Writer::create_event_file(void){

ofstream outputFile;

outputFile.open("event.txt");

string data;
cout << "Enter event title : " << endl;
getline(cin,data);
outputFile << textToSave;

cout << "Enter event date : " << endl;
getline(cin,data);
outputFile << textToSave;

cout << "Enter event start time : " << endl;
getline(cin,data);
outputFile << textToSave;

outputFile.close();
}

void File_Writer::write(const string file_name, string data){

ofstream outputFile;

outputFile.open("all.txt");

outputFile << data;

outputFile.close();
} 
```

和主文件

```
#include <iostream>
#include "file_writer.h"
using namespace std;

int main(){

string input;
File_Writer fw;

cout << "Welcome to the event creation program!\n" << endl;
cout << "---------------------------" << endl;
cout << "| event - To create event file   |" << endl;
cout << "| entrants - To create entrants file |" << endl;
cout << "| coursess - To create courses file |" << endl;
cout << "---------------------------\n" << endl;

getline(cin,input);

if(input == "event")
    fw::create_event_file();

} 
```

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T17:17:24.230

替换这个，这意味着它`fw`是一个类或命名空间的名称：

```
 fw::create_event_file();
// ^^ This is a "scope opearator" 
```

有了这个，这意味着这`fw`是一个变量：

```
 fw.create_event_file();
// ^ This is a "member access opearator" 
```

# jquery - jQuery 选择器帮助 - 如何查找 ID 以特定字符开头和结尾的元素

> ID：15530361
> 
> 赞同：11
> 
> 时间：2013-03-20T17:16:52.400
> 
> 标签：jquery, jquery-selectors

我有一个动态创建的页面。它可以有许多不同的带有 ID 的单选按钮，如下所示：

```
<input type="radio" id="cc-radio-opt-0" />
<input type="radio" id="cc-radio-opt-1" />
<input type="radio" id="gc-radio-opt-0" />
<input type="radio" id="gc-radio-opt-1" /> 
```

为了编写更改函数，我正在做这样的事情：

```
$('[id^=cc-radio-opt-]').live("change", function() {
    var idx = $(this).attr('id').split('-').pop(); 
}); 
```

这很好用。但是现在，在那个 change 函数中，我需要隐藏一堆其他相关的字段。它们是这样命名的：

```
<input type="text" id="cc-number-0" />
<input type="text" id="cc-month-0" />
<input type="text" id="gc-number-0" />
<input type="text" id="gc-month-0" />
<input type="text" id="cc-number-1" />
<input type="text" id="cc-month-1" />
<input type="text" id="gc-number-1" />
<input type="text" id="gc-month-1" /> 
```

我需要能够获取 ID 以“cc”开头并以与单击的单选按钮相同的数字结尾的所有字段（由`idx`变量确定。我知道我可以获取所有以“cc”开头的字段通过做这个：

```
$('[id^=cc-]'); 
```

但是我怎么能也表明他们需要以什么结束`idx`呢？换句话说，如果`cc-radio-opt-1`点击收音机，我怎么才能得到只有`cc-number-1`和`cc-month-1`？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-20T17:19:26.360

好吧，你几乎就在那里...... `$('[id^=cc-][id$=1]')`

演示：http: [//jsfiddle.net/pavloschris/nr3ad/](http://jsfiddle.net/pavloschris/nr3ad/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T17:18:54.217

使用“结束于”选择器过滤您的选择器。

[http://api.jquery.com/attribute-ends-with-selector/](http://api.jquery.com/attribute-ends-with-selector/)

```
$('[id^="cc-"]').filter('[id$="idx"'); 
```

并确保包括引号。

# ant - 让 IntelliJ 显示 Ant 构建的所有错误

> ID：15530364
> 
> 赞同：2
> 
> 时间：2013-03-20T17:16:58.943
> 
> 标签：ant, ide, intellij-idea, stack-trace

如何显示 Ant 构建中的所有错误？我想看看其他 21 个错误。

![截屏](../Images/a01d7f38f7b09de470a1afa511cd0854.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T17:34:41.443

我建议尝试`Toggle tree/text mode`- 在消息窗口的左侧

![在此处输入图像描述](../Images/ab7ecc62d55837397b4235c7a0dddc7d.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T18:30:32.033

堆栈跟踪仅描述了一个错误，而该`... 21 more`字符串指示了 21 个其他方法，它们是原始调用层次结构。

IDE 通常会抑制基本调用者信息，因为它不会特定于错误，例如框架/工具内部调用。

要查看整个堆栈跟踪，请调整您的 IDE 设置，或`ant`在命令行上运行，将打印整个堆栈跟踪。

# jquery - 是否可以在 jQuery 中控制鼠标的其他按钮

> ID：15530366
> 
> 赞同：3
> 
> 时间：2013-03-20T17:17:05.227
> 
> 标签：jquery, mouseevent

我知道 jQuery 可以处理鼠标点击事件（左/右/中）

但我的一位客户有 5 个按钮。

他真的希望我也能捕捉到这些事件。我检查了 jQuery 手册[http://api.jquery.com/category/events/mouse-events/](http://api.jquery.com/category/events/mouse-events/) 但无法找到如何实现这一点。

是否可以？

PS 通过鼠标上的附加按钮，我的意思是这样的：

1.  [鼠标 1](http://upload.wikimedia.org/wikipedia/commons/thumb/5/5d/Mouse_buttons.svg/282px-Mouse_buttons.svg.png)
2.  [鼠标 2](http://www.promo-wholesale.com/Upfiles/Prod_l/Mini-Wireless-Optical-5-button-Mouse_20090804594.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:30:56.563

你不能。

一些浏览器会将鼠标侧面的按钮映射到浏览器的“后退”和“前进”操作。您不能准确地捕获这些操作，也不能将这些按钮映射到不同的操作。如果您的站点使用[HTML5 历史 API](http://diveintohtml5.info/history.html)，您可以创建多个历史条目并在用户导航到不同状态时执行某些操作，但您不能引入除此之外的新行为。

如果浏览器不处理这些按钮，它们将被完全忽略，并且您的网站对此无能为力。

# mysql - MySql Union 仅从 BOTH 返回值

> ID：15530369
> 
> 赞同：0
> 
> 时间：2013-03-20T17:17:08.190
> 
> 标签：mysql, union

```
Results 1
   Zac
   Dave
   Ned

Results 2
   Eric
   Mark
   Zac 
```

这是选择查询的输出。

```
select names from table where id=1 UNION select names from tables where id=2; 
```

我想从两个结果中包含的这些结果中选择所有。Union 返回所有名称（Zac 只返回一次）。如何让查询只返回 Zac？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:24:14.603

这应该这样做：

```
SELECT name FROM table1
INNER JOIN table2
USING (name) 
```

**结果**

```
| 姓名 |
--------
| 扎克 |
```

[查看演示](http://sqlfiddle.com/#!2/815f3/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:37:18.820

只需`INNER JOIN`在两个表之间使用。

```
SELECT a.name
FROM table1 AS a
JOIN table2 AS b ON a.name = b.name 
```

# java - Java使用setText有一个int值

> ID：15530370
> 
> 赞同：0
> 
> 时间：2013-03-20T17:17:09.917
> 
> 标签：java, jtextfield

我正在尝试使用 jTextField 和 setText 方法设置一个 int 值。但当然 setText 想要一个字符串。我该如何解决这个问题？我给你一段代码：

```
 private void setAllTextFields(FilmSystem e){
    getFilmNameTF().setText(e.getFilmName());
    lectureTF.setText(e.getLecture());
    ageTF.setText(e.getAge());
    priceTF.setText(e.getTicketCost());
    seatsTF.setText(e.getNoOfSeats()); 
```

seatTF 是一个 jTextField，getNoOfSeats 是另一个类中的一个方法，它返回一个 int 值。

再次感谢您回答这个问题。现在我将如何获取 int 的值来做某事？

```
 public void buyTicket() {
    String newFilmName = filmNameTF.getText();
    String newLecture = lectureTF.getText();
    String newAge = ageTF.getText();
    String newPrice = priceTF.getText(); 
    int newSeats = seatsTF. 
```

正如您所看到的代码，我可以使用 getText 轻松获取 String 值。然后我可以将它们打印出来或与它们一起打印。我怎么能用座位 int 做到这一点？再次感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T17:18:49.580

`String#valueOf`将您的转换`int`为`String`.

`String.valueOf(e.getAge());`将返回参数的`string`表示`int`。

```
seatsTF.setText(String.valueOf(e.Age()));
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T17:19:17.733

利用

```
seatsTF.setText(""+e.getNoOfSeats()); 
```

或者

```
seatsTF.setText(String.valueOf(e.getNoOfSeats())); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T17:25:37.387

假设年龄字段是 int 类型，您可以尝试以下操作：

```
 ageTF.setText( Integer.toString(e.getAge()) ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T17:40:59.027

`int`将其设置`String`为没什么大不了的。显示值是个问题。要注意如何在文本字段中正确显示值，您可以使用 a[`DecimalFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/DecimalFormat.html)来格式化数值。但可能是数字是`locale`特定的那么你需要[`NumberFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/NumberFormat.html)实例

```
NumberFormat nf = NumberFormat.getInstance(locale);
nf.setMaximumIntegerDigits(12);
nf.setMaximumFractionDigits(0);
nf.setMinimumFractionDigits(0);
String s = nf.format(e.getNoOfSeats());
seatsTF.setText(s); 
```

您可能还需要阅读有关[如何](http://docs.oracle.com/javase/tutorial/i18n/format/decimalFormat.html)使用`DecimalFormat`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T17:21:14.270

正常的方法是

```
seatsTF.setText(Integer.toString(e.getNoOfSeats())); 
```

或者

```
seatsTF.setText(String.valueOf(e.getNoOfSeats())); 
```

但是，这可以通过这样的连接来实现：

```
seatsTF.setText("" + e.getNoOfSeats()); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-27T05:36:50.157

To convert Integer Value to String you should

```
MedicineTM medicine=tblmedicine.getSelectionModel().getSelectedItem();

    txtmedicine.setText(medicine.getMID());
    txtDescription.setText(medicine.getDescription());
    txtQty.setText(String.valueOf(medicine.getQty()));  // this is what i did
    cmbApproval.setValue(medicine.getApproval()); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-03-20T17:22:00.257

我认为您应该将代码编写为

座位TF.setText(e.getNoOfSeats().toString());

# c# - X509 证书格式

> ID：15530371
> 
> 赞同：2
> 
> 时间：2013-03-20T17:17:21.233
> 
> 标签：c#, x509certificate

当我做`X509Certificate2 x509 = new X509Certificate2(certificateFile);`证书需要采用什么格式？

我有一个私钥：

```
-----BEGIN RSA PRIVATE KEY-----
......
-----END RSA PRIVATE KEY----- 
```

和证书：

```
Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number:
           ..............
        Signature Algorithm: sha1WithRSAEncryption
        Issuer: C=IL, ST=SS, L=...., O=....., OU=....., CN=...../emailAddress=.....
        Validity
            Not Before: Mar 19 14:45:09 2013 GMT
            Not After : Mar 19 14:45:09 2014 GMT
        Subject: C=IL, ST=SS, L=...., O=....., OU=....., CN=...../emailAddress=.....
        Subject Public Key Info:
            Public Key Algorithm: rsaEncryption
                Public-Key: (2048 bit)
                Modulus:
                    ...................
                Exponent: 65537 (0x10001)
        X509v3 extensions:
            X509v3 Subject Key Identifier: 
                .........
            X509v3 Authority Key Identifier: 
                keyid:..........

            X509v3 Basic Constraints: 
                CA:TRUE
    Signature Algorithm: sha1WithRSAEncryption
        ..... 
```

然而，我无法使用上面的 C# 代码加载。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-12-30T15:51:50.547

`-----BEGIN RSA PRIVATE KEY-----`是 PKCS#1 格式（未加密）的 RSA 私钥的标头。此格式用于私钥 PEM 文件。

.NET Framework 没有提供任何现成的方法来直接以这种格式导出私钥，因此您必须自己实现它。

[本文档](https://gist.github.com/stormwild/7887264)可以帮助您 - 有一个解码 RSA 私钥的示例。编码只是相反的操作。

# javascript - 使用命名立即调用函数表达式 (IIFE) 而不是注释

> ID：15530374
> 
> 赞同：11
> 
> 时间：2013-03-20T17:17:33.867
> 
> 标签：javascript, comments, maintainability, iife

在 JS 代码中使用 Named IIFE 来描述和分组相关代码的优缺点是什么？

我一直在使用这种“模式”来为我的更多*程序*代码提供结构，这些代码只在一个地方执行。

* * *

## 例子

```
(function hideStuffOnInstantiaton(){
    $('oneThing').hide().removeClass();
    $('#somethign_else').slideUp();
    $('.foo').fadeOut();
}()); 
```

**我发现这比两者都可取：**

```
// hide Stuff on Instantiaton
$('oneThing').hide().removeClass();
$('#somethign_else').slideUp();
$('.foo').fadeOut(); 
```

*因为随着时间的推移，注释可能会从代码中分离出来，并且注释适用于哪一行并不是很明显*

**并：**

```
function hideStuffOnInstantiaton(){
    $('oneThing').hide().removeClass();
    $('#somethign_else').slideUp();
    $('.foo').fadeOut();
};

hideStuffOnInstantiaton(); 
```

*因为如果它只在一个地方执行，为什么要把函数和它的执行分开呢？*

* * *

使用此模式时是否有任何性能、可维护性、可测试性或跨浏览器注意事项？我不相信我见过很多人*在野外*使用它，但我觉得它*可能*非常有用

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T18:14:30.950

我一直认为标签很酷：

```
hideStuffOnInstantiaton: {
  $('oneThing').hide().removeClass();
  $('#somethign_else').slideUp();
  $('.foo').fadeOut();
} 
```

实际上，这样做通常很愚蠢。相反，分组功能通常属于其自己的功能。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-21T15:57:05.423

> 如果它只在一个地方执行，为什么要把它和它的执行分开呢？

在这种情况下，根本没有理由使用函数（及其开销）——只需内联代码。并且不要在函数名称中隐藏注释，我认为这是一种不好的做法。如果有人将注释与代码分开，那是他的错，不是你的——实际上他也可以在你的 IENFE 中打包完全不相关的东西。

虽然如果您要重用函数（递归）或需要它围绕某些东西构建闭包，这种模式可能很有用，并且命名函数使堆栈跟踪更易于调试，但[IE 中存在各种错误](http://kangax.github.com/nfe/#jscript-bugs)。因此，如果您真的不需要它，请避免使用它 - 而您也不需要。

如果你想表达你的注释适用于代码块，你可以明确地使用*块*语句并将你的注释放在它的前面：

```
{ // hide Stuff on Instantiaton
    $('oneThing').hide().removeClass();
    $('#somethign_else').slideUp();
    $('.foo').fadeOut();
} 
```

……尽管这可能会使您的读者感到困惑，就像多余的 IEFE 一样。

# wpf - WPF Binding.StringFormat：C 与“{}{0:C}”

> ID：15530375
> 
> 赞同：1
> 
> 时间：2013-03-20T17:17:33.967
> 
> 标签：wpf, data-binding, string-formatting

我正在尝试全球化一个简单的 WPF 应用程序。在关于 SO 的几个问题和/或答案中，我在绑定上看到以下两个设置之一：

```
StringFormat=C 
StringFormat='{}{0:C}' 
```

这些有什么区别？在某些条件下，您会使用其中一种吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:28:06.247

我的理解是没有区别，一个只是速记，另一个是明确的。我能想到的唯一有利条件是当您想要对格式进行更多控制时。例如：

`StringFormat=Total: {0:C}`

除此之外，我想说保持简单；XAML 已经很冗长，欢迎使用速记语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T17:34:58.777

也许阅读字符串格式？

[http://msdn.microsoft.com/en-us/library/dd465121.aspx](http://msdn.microsoft.com/en-us/library/dd465121.aspx)

您可以在填写值的格式字符串中使用 {0:C}：

```
decimal value = 123.456; 
Console.WriteLine("Your account balance is {0:C2}.", value); 
```

同时，您将 C 用作普通格式：

```
Console.WriteLine(("Your account balance is " + decimal.Parse("24.3200").ToString("C")); 
```

就输出而言，它们在功能上是等效的。这只是根据您使用数据的上下文来格式化数据的另一种方式。

[http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx#CFormatString](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx#CFormatString)

# c++ - 猜我的号码！C++

> ID：15530376
> 
> 赞同：-3
> 
> 时间：2013-03-20T17:17:34.637
> 
> 标签：c++, search, numbers

我有一个作业要编写一个猜测我的数字的程序，但我必须在没有数字输入的情况下完成它。只有是/否的问题。到目前为止，这是我的代码，但它无法正常工作。例如，它无法猜出 24,50 和 75 的数字。它可以在输入数字的情况下正常工作和运行，但是如果没有它就无法弄清楚如何做到这一点，所以请给我一些提示:)

```
 #include <iostream>

    using namespace std;

    int main()
    {

    cout << "Think of a number 1-100!!\n";

        bool l=false;
        int min=0;
        int max=100;
        int ind;
        int h;
        char answer;
        int tries=0;
        do
        {
            ind=(min+max)/2;
            cout << "Is your number bigger than " << ind << "? (y/n): "; cin >> answer;
            if(answer=='y')
            {
                h=ind+(ind/2);
            }
            else
            {
                h=ind-(ind/2);
            }
            tries++;
            if(ind>h)
            {
                max=ind-1;
                //cout << "ind: " << ind << endl;
                //cout << "h: " << h << endl;
            }
            else if(ind<h)
            {
                min=ind+1;
                //cout << "ind: " << ind << endl;
                //cout << "h: " << h << endl;
            }
            else if(ind=h)
            {
                l=true;
                //cout << "ind: " << ind << endl;
                //cout << "h: " << h << endl;
                cout << h << " is your number!\nWow I guessed it in " << tries << " tries!\nPat me!";
            }
        }while(!l && min<=max);

        return 0;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T17:22:47.090

如果第一次迭代`ind`是 50，那么你就是 50。然后你问这个数字是否大于 50，答案是否定的。在这种情况下，您计算哪个`h`是`ind-(ind/2)`25，然后将其与 49 进行比较`ind`并设置`max`为 49，然后继续循环。`max`但这是不正确的，因为在这种情况下，您通过设置为 49 来丢弃正确的答案 50 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T17:22:39.973

我在 if 语句 (=) 中看到了一个赋值。应该是一个等于标记 (==)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T17:24:07.930

现在我已经阅读了您的代码，这*几乎*是有道理的。但是你的用法`h`是......错误的。这是一个摘要。想一想这个代码在第一回合当用户号码是 50 时，`ind`是 50。

```
cin >> answer;

if(answer=='y')
    h=ind+(ind/2);
else
    h=ind-(ind/2);

if(ind=h)
    cout << h << " is your number!\nWow I guessed it in " << tries << " tries!\nPat me!"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T20:08:32.640

编写问题猜测代码很容易，但另一方面，如果你的数字从 0 开始是 50，他会问你 50 次会很无聊，所以让它更有趣的一方面是为跳跃但记录最大和最小值很重要，您也可以在跳跃方差上添加机器学习以使其智能

# android - 如何为我的通用应用程序集成谷歌分析？

> ID：15530377
> 
> 赞同：0
> 
> 时间：2013-03-20T17:17:35.477
> 
> 标签：android, ios, google-analytics, universal

我有 2 个通用应用程序，一个用于 iOS，一个用于 Android。

如果该应用程序不是通用的，我将创建 2 个属性，以及 2 个不同的跟踪代码。但是在那里，该应用程序是通用的。

那么我需要有 4 个不同的跟踪代码吗？

适用于： - iOS iPhone - iOS iPad - Android - Android 平板电脑

你有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:33:18.573

[尝试对phonegap](https://www.google.com/search?q=phonegap+google+analytics)使用 Google Analytics 插件。

# timestamp - 无法使用 WinSCP 访问远程文件的时间戳

> ID：15530380
> 
> 赞同：0
> 
> 时间：2013-03-20T17:17:49.683
> 
> 标签：timestamp, last-modified, winscp, winscp-net

我正在使用 WinSCP .NET 程序集以编程方式连接到远程服务器并获取特定文件的时间戳（或上次更新日期）。我没有成功找到方法调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:21:59.050

要获取单个文件的时间戳，请使用由返回的类实例的`LastWriteTime`属性：[`RemoteFileInfo`](https://winscp.net/eng/docs/library_remotefileinfo)[`Session.GetFileInfo`](https://winscp.net/eng/docs/library_session_getfileinfo)

```
Console.WriteLine(session.GetFileInfo("/etc/passwd").LastWriteTime) 
```

要获取目录中所有文件的时间戳，请迭代由`RemoteFileInfo`返回的实例的集合[`Session.ListDirectory`](https://winscp.net/eng/docs/library_session_listdirectory)：

```
foreach (RemoteFileInfo fileInfo in session.ListDirectory("/etc").Files)
{
    Console.WriteLine(fileInfo.LastWriteTime);
} 
```

# highcharts - HighCharts 柱形图：堆栈上的数据标签重叠

> ID：15530382
> 
> 赞同：2
> 
> 时间：2013-03-20T17:17:52.977
> 
> 标签：highcharts, overlap, labels

我在 HighCharts 中有一个柱形图，并且遇到数据标签相互碰撞的问题。该图具有静态宽度，我可能有 4 个系列，每个系列内最多有 4 个数据点（4 个彼此相邻的堆栈）。我确实有正面和负面的价值观。我看到如果系列具有相似的值，那么每一列的高度相同，这会导致数据标签相互碰撞。

有什么办法可以解决这个问题？我似乎找不到有帮助的库选项。

![示例 HighChart 柱形图 - 数据标签重叠](../Images/20208f0e0d2dce93c0f96c129691344e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T21:58:52.540

添加了对我有用的 groupPadding 选项：

```
plotOptions: 
{ 
    column: 
    { 
        dataLabels: 
        { 
            enabled: true, 
            formatter: function() { return this.y + '%' }
        } 
    }, 
    series: 
    {
        groupPadding: 0.125
    } 
}, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T18:40:01.487

您是否尝试过增加条形的宽度？如何调整标签的字体大小？鉴于您有一个静态大小的图表和最多 4 个具有 4 个数据点的系列，这 2 个 API 的组合应该有助于解决这个问题......

[http://api.highcharts.com/highcharts#plotOptions.column.pointWidth](http://api.highcharts.com/highcharts#plotOptions.column.pointWidth)

[http://api.highcharts.com/highcharts#plotOptions.series.dataLabels.style](http://api.highcharts.com/highcharts#plotOptions.series.dataLabels.style)

# ios - 使用 Spring Security 管理 iOS 主屏幕 Web 应用会话以防止重新验证

> ID：15530388
> 
> 赞同：0
> 
> 时间：2013-03-20T17:18:04.933
> 
> 标签：ios, spring-security, sencha-touch, mobile-website

我最近遇到了一个问题，每次从 iOS 的主屏幕启动 Web 应用程序或将其置于前台时，我都会重新进行身份验证（我最初是从 Safari 将其添加到主屏幕）。当我直接在 Safari 中时，不会发生这种情况。

我的研究表明，这可以在 php 中通过创建/重新启动会话然后添加会话 cookie 来克服，如下所示：

```
// Start or resume session
session_start(); 

// Extend cookie life time by an amount of your liking
$cookieLifetime = 365 * 24 * 60 * 60; // A year in seconds
setcookie(session_name(),session_id(),time()+$cookieLifetime); 
```

而不是以编程方式执行此操作，我想知道是否有办法通过 XML 配置执行此操作。否则，我怎么能用 Spring Security 完成类似的事情呢？

这是我的security-ctx.xml：

```
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:sec="http://www.springframework.org/schema/security"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
          http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
          http://www.springframework.org/schema/security
          http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <bean id="http403EntryPoint" class="org.springframework.security.web.authentication.Http403ForbiddenEntryPoint">
    </bean>

    <sec:http auto-config="false" entry-point-ref="http403EntryPoint">
        <sec:custom-filter position="PRE_AUTH_FILTER" ref="siteminderFilter" />
    </sec:http>

    <bean id="siteminderFilter" class=
            "org.springframework.security.web.authentication.preauth.RequestHeaderAuthenticationFilter">
        <property name="principalRequestHeader" value="x-paas-uid"/>
        <property name="authenticationManager" ref="authenticationManager"/>
    </bean>

    <bean id="preauthAuthProvider"
          class="org.springframework.security.web.authentication.preauth.PreAuthenticatedAuthenticationProvider">
        <property name="preAuthenticatedUserDetailsService">
            <bean id="userDetailsServiceWrapper"
                  class="org.springframework.security.core.userdetails.UserDetailsByNameServiceWrapper">
                <property name="userDetailsService" ref="ldapUserDetailsService"/>
            </bean>
        </property>
    </bean>

    <sec:authentication-manager alias="authenticationManager">
        <sec:authentication-provider ref="preauthAuthProvider"/>
    </sec:authentication-manager>

    <!-- Example using LDAP, but will ultimately use database service -->
    <sec:ldap-server id="ldapServer" port="636" root="o=home"
                          url="ldaps://ldap.home.com"/>

    <sec:ldap-user-service id="ldapUserDetailsService" server-ref="ldapServer"
                           group-search-base="ou=groups,o=home"
                           role-prefix="ROLE_" group-role-attribute="cn"
                           user-search-base="ou=people,o=home" user-search-filter="uid={0}"/>
</beans> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:46:00.463

据我所知，Spring Security 不管理会话超时值。所以没有办法在开箱即用的安全xml中做到这一点。如果您想在系统范围内定义此值（适用于所有会话），请查看您的 servlet 容器/应用程序服务器文档。在 Tomcat 的情况下，您可以将以下代码段添加到`web.xml`描述符中：

```
<web-app ....>

    .....
    <session-config>
        <!-- value is in minutes -->
        <!-- 60x24x365 -->
        <session-timeout>525600</session-timeout>
    </session-config>
    ....
</web-app> 
```

# c# - C# WPF 选择由鼠标或键盘更改

> ID：15530391
> 
> 赞同：1
> 
> 时间：2013-03-20T17:18:06.517
> 
> 标签：c#, wpf, combobox, keyboard, selectionchanged

我在我的 Projekt 中插入了一个 WPF 组合框。目前我在组合框中有一个 keydown 事件。现在我有一个问题，我也会用鼠标选择一个项目。如果我使用 selectionchanged 事件，它也会在通过键盘更改时执行。如果我使用 mousekeydown 事件，如果我不知道如何获取点击的项目，它也会起作用。请参阅示例：

```
 private void CMB_Adresse_KeyUp(object sender, KeyEventArgs e)
        {
            try
            {
                if (e.Key == System.Windows.Input.Key.Down || e.Key == System.Windows.Input.Key.Up)
                {
                    Properties.Settings.Default.CMB_Adresse_Temp = ((string)CMB_Adresse.SelectedItem);
                }
                else
                { 
```

# python - Python Tkinter 网格几何粘性设置无效（？）

> ID：15530392
> 
> 赞同：5
> 
> 时间：2013-03-20T17:18:09.000
> 
> 标签：python, python-2.7, tkinter

我正在使用`grid`几何图形在 Python/Tkinter 中设计简单的输入对话框，并得到一些意想不到的行为。当我开始使用这段代码时：

```
winAddNew = tk.Toplevel()
winAddNew.title('Add New Customer')
lblName = tk.Label(winAddNew,
                   anchor=tk.W,font=fntNormal,
                   text='Enter the complete name of the customer:')
entName = tk.Entry(winAddNew,
                   justify=tk.LEFT, font=fntNormal, width=20,
                   textvariable=ctrlNewCustomerName)
lblID = tk.Label(winAddNew,
                 anchor=tk.W,font=fntNormal,
                 text='Enter a unique three-character ID:')
entID = tk.Entry(winAddNew,
                 justify=tk.LEFT, font=fntNormal, width=8,
                 textvariable=ctrlNewCustomerID)
lblName.grid(row=0,column=0,columnspan=2,sticky=tk.W,padx=10,pady=(10,0))
entName.grid(row=1,column=0,columnspan=2,sticky=tk.W,padx=10,pady=(5,0))
lblID.grid(row=2,column=0,sticky=tk.W,padx=(10,0),pady=10)
entID.grid(row=2,column=1,sticky=tk.W,padx=(0,10),pady=10) 
```

...这就是渲染窗口在我的机器上的外观（Windows 7，Python 2.7.3）。请注意，绿线实际上并不存在，我只是用它们来布置我认为应该是行和列的位置。

![在此处输入图像描述](../Images/aaa76a99c17fa9b7bd80c880f8d7923f.png)

到现在为止还挺好。现在我想将 设置为`width`，以提供更多可见的空间来输入客户姓名。因为我将其设置为，并且因为每个小部件都设置为选项，所以我希望增加的宽度除了扩大条目小部件本身并相应地扩大窗口之外没有任何影响。所有其他小部件相对于彼此的位置应该保持不变——对吧？`entName``60``columnspan``2``tk.W``sticky``entName`

没有。加宽`entName`也会导致`entID`被推离`lblID`：

![在此处输入图像描述](../Images/adb1376512def3565d0e35ec1bcae999.png)

那么我错过了什么？为什么不`entID`留在原来的地方？除了将第 2 行阻挡在自己的框架中之外，还有什么方法可以让它保持原位吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T17:42:13.393

当您使条目小部件变大时，Tkinter 必须为第 0 列或第 1 列分配额外的空间。它根据每列的“权重”来执行此操作。

因为您没有明确设置权重，所以所有列的默认权重为零。但是，在您的情况下，必须有所增长。如果没有列有重量，Tkinter 选择第一列。这解释了为什么 entID 会被推倒——第一列被做得更宽以容纳小部件条目小部件。

如果您将第 1 列的权重设为 1，则任何额外的空间都将分配给该列，使第 0 列的宽度刚好足以容纳约束该列的任何内容（即：任何不跨越列的小部件）。您可以使用`grid_columnconfigure`命令执行此操作。

例如：

```
winAddNew.grid_columnconfigure(1, weight=1) 
```

请注意，权重可以是任何正整数；它代表一个比率。因此，例如，如果将第 0 列设置为 1，将第 1 列设置为 2，则第 1 列将获得两倍于第 0 列的额外空间。

Tkinter 在记录这种行为方面做得很差。最终文档在 Tcl/Tk 手册页中。具体来说，请参阅网格手册页中的[网格算法](http://tcl.tk/man/tcl8.5/TkCmd/grid.htm#M32)。

# arrays - VB.Net - Excel 应用程序获取显示范围的值

> ID：15530393
> 
> 赞同：1
> 
> 时间：2013-03-20T17:18:10.293
> 
> 标签：arrays, vb.net, visual-studio, excel, range

我正在尝试使用 Vb.Net 获取 Excel 范围并复制到对象数组中。

这不是问题。我使用以下代码：

```
Dim vValues(,) As Object = ExcelApp.Range(vRange).Value 
```

并且工作正常；但我有以下情况：

![Excel](../Images/29e6e8174a8d14da02b71f8d7c6d1527.png)

在“C”栏中；该值具有特定格式，并且在内部具有另一个值。

我的问题是：

有人知道如何让用户看到的信息准确无误吗？

我试图在不使用`For ... Each`或某种循环的情况下获取信息。

我也试图避免使用“文本到列”功能。

两者似乎都是正确的解决方案，但会影响大量数据的性能。

仅供参考：我也可以通过 ODBC 连接获取信息；但我正在使用 Range 搜索解决方案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T17:52:36.717

用户看到的正是`Text`属性。但是你不能有一个数组，你必须单独查询每个单元格。

由于您在 Excel 中应用了“时间”格式，因此您`Double`在数组中获得了一个值而不是一个值。`DateTime`如果您有来自“日期”类别的格式，Excel 将改为发送一个正确的`Variant/Date`，而不是`Double`代表它的 a 。

另一种选择是在 .NET 端[构建`DateTime`对象](http://msdn.microsoft.com/en-us/library/system.datetime.fromoadate.aspx)，前提是您知道它们应该在哪些列中。

# java - Cmake 按特定顺序构建

> ID：15530394
> 
> 赞同：4
> 
> 时间：2013-03-20T17:18:13.990
> 
> 标签：java, java-native-interface, cmake

我正在尝试使用 CMake 创建一个 JNI jar。为此，必须按适当的顺序执行以下操作：

1.  编译 .class 文件
2.  生成 .h 标头
3.  构建原生库
4.  罐子里的一切

在哪里

1.  完成`add_jar()`（我更喜欢在custom_command）
2.  完成了`add_custom_command(TARGET ...)`
3.  完成了`add_library()`
4.  已完成`add_custom_command(TARGET ...)`（因为 add_jar 不支持 -C 选项）

如何确保遵循正确的顺序？我有时在第一次运行时会出错。

`add_custom_command`有`POST`/ `PRE`build 选项，但`add_jar`并`add_library`没有。`add_custom_command`没有参数的那个`TARGET`有`DEPENDS`选项，我应该用那个吗？

有没有办法告诉`add_library`等待 2\. custom 命令运行？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T01:27:38.357

我猜这个错误是你调用`add_library`的源文件在 CMake 的第一次运行期间还不存在？

如果是这样，您可以使用该命令设置[`GENERATED`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#prop_sf%3aGENERATED)这些源文件的属性。[`set_source_files_properties`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3aset_source_files_properties)这让 CMake 知道这些文件在配置时（CMake 运行时）不存在是可以的，但它们将在构建时存在。

要确保该`add_jar`命令之前执行`add_library`，请`add_jar`使用[`add_dependencies`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3aadd_dependencies). 为确保`add_custom_command`命令在 之前执行`add_library`，请让自定义命令使用[`TARGET ... PRE_BUILD`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3aadd_custom_command)选项。

例如，如果您的 lib 源列表保存在名为 的变量中`${Srcs}`，您可以执行以下操作：

```
# Allow 'Srcs' to not exist at configure-time
set_source_files_properties(${Srcs} PROPERTIES GENERATED TRUE)
add_library(MyLib ${Srcs})

# compile .class files
add_jar(MyJarTarget ...)

# generate .h headers
add_custom_command(TARGET MyLib PRE_BUILD COMMAND ...)

# Force 'add_jar' to be built before 'MyLib'
add_dependencies(MyLib MyJarTarget) 
```

# c# - System.Web.Mvc 命名空间下的 SelectList 类公开了哪些公共属性？

> ID：15530396
> 
> 赞同：-1
> 
> 时间：2013-03-20T17:18:21.340
> 
> 标签：c#, asp.net-mvc

SelectList 类的参数化构造函数之一如下所示：-

```
public SelectList(IEnumerable items, string dataValueField, string dataTextField, object selectedValue); 
```

我的问题是我想为 dataValueField 和 dataTextField 分配一些值，但不是在实例化类时而是在稍后阶段可能会在进行一些检查然后动态决定要传递的值。

我面临的问题是只有一种方法可以传递 dataValueField 和 dataTextField 的值，那就是通过参数化构造函数。

有没有办法可以使用类的某些属性来分配 dataValueField 和 dataTextField 的值。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:40:06.770

`dataValueField`和是的`dataTextField`私有成员`MultiSelectList`，它是 的基类`SelectList`，因此您可以使用反射设置这些字段。例如：

```
 var selectList = new SelectList(new Dictionary<int, int> { { 1, 2 }, { 3, 4} });

  var privateFields = selectList.GetType().BaseType.GetFields(BindingFlags.Instance | BindingFlags.NonPublic);

  privateFields.Single(i => i.Name.Contains("DataTextField"))
               .SetValue(selectList, "value");

  privateFields.Single(i => i.Name.Contains("DataValueField"))
               .SetValue(selectList, "key"); 
```

# php - jqgrid 在单元格上单击

> ID：15530398
> 
> 赞同：0
> 
> 时间：2013-03-20T17:18:26.347
> 
> 标签：php, jquery, jqgrid

如何通过选择主 jqgrid 上的单元格来显示另一个 jqgrid？我使用本地数据在网格中显示值

任何链接或教程都会有很大帮助

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T20:48:09.867

这是 jqgrid 演示的链接 [http://www.trirand.com/blog/jqgrid/jqgrid.html](http://www.trirand.com/blog/jqgrid/jqgrid.html)

在导航菜单中展开高级并单击主详细信息，您可以看到一个工作演示

# python - 在字符串中查找字符/单词的周围句子

> ID：15530399
> 
> 赞同：7
> 
> 时间：2013-03-20T17:18:26.393
> 
> 标签：python, regex, nltk

我正在尝试使用 python 从包含给定子字符串的字符串中获取句子。

我可以访问字符串（学术摘要）和带有开始和结束索引的亮点列表。例如：

```
{
  abstract: "...long abstract here..."
  highlights: [
    {
      concept: 'a word',
      start: 1,
      end: 10
    }
    {
      concept: 'cancer',
      start: 123,
      end: 135
    }
  ]
} 
```

我在每个亮点上循环，在摘要中找到它的开始索引（结束并不重要，因为我只需要在一个句子中获取一个位置），然后以某种方式需要识别出现索引的句子。

我可以使用 将摘要标记为句子`nltk.tonenize.sent_tokenize`，但这样做会使索引位置变得无用。

我应该如何解决这个问题？我想正则表达式是一种选择，但 nltk 标记器似乎是一种很好的方法，如果不使用它会很遗憾。或者通过查找自上一个句号以来的字符数以某种方式重置开始索引/感叹号/问号？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T19:01:35.120

您是对的，NLTK 标记器确实是您在这种情况下应该使用的，因为它足够强大，可以处理几乎所有句子的定界，包括用“引号”结束句子。您可以执行以下操作（`paragraph`来自随机生成器）：

**从...开始，**

```
from nltk.tokenize import sent_tokenize

paragraph = "How does chickens harden over the acceptance? Chickens comprises coffee. Chickens crushes a popular vet next to the eater. Will chickens sweep beneath a project? Coffee funds chickens. Chickens abides against an ineffective drill."
highlights = ["vet","funds"]
sentencesWithHighlights = [] 
```

**最直观的方式：**

```
for sentence in sent_tokenize(paragraph):
    for highlight in highlights:
        if highlight in sentence:
            sentencesWithHighlights.append(sentence)
            break 
```

但是使用这种方法，我们实际上得到了一个有效的 3x 嵌套`for`循环。这是因为我们首先检查 each `sentence`，然后是 each `highlight`，然后是`sentence`for 中的每个子序列`highlight`。

**我们可以得到更好的性能，因为我们知道每个亮点的起始索引：**

```
highlightIndices = [100,169]
subtractFromIndex = 0
for sentence in sent_tokenize(paragraph):
    for index in highlightIndices:
        if 0 < index - subtractFromIndex < len(sentence):
            sentencesWithHighlights.append(sentence)
            break
    subtractFromIndex += len(sentence) 
```

**无论哪种情况，我们都会得到：**

```
sentencesWithHighlights = ['Chickens crushes a popular vet next to the eater.', 'Coffee funds chickens.'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T17:42:37.413

我假设您的所有句子都以以下三个字符之一结尾：`!?.`

怎么样循环高亮列表，创建一个正则表达式组：

```
(?:list|of|your highlights) 
```

然后将您的整个摘要与此正则表达式匹配：

```
/(?:[\.!\?]|^)\s*([^\.!\?]*(?:list|of|your highlights)[^\.!\?]*?)(?=\s*[\.!\?])/ig 
```

[这样，您将在每个匹配的第一个子组 ( RegExr](http://regexr.com?3474v) )中获得包含至少一个亮点的句子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T17:59:30.023

另一种选择（虽然很难说它对于可变定义的文本有多可靠）是将文本拆分成一个句子列表并针对它们进行测试：

```
re.split('(?<=\?|!|\.)\s{0,2}(?=[A-Z]|$)', text) 
```

# ruby-on-rails - 配置warden rails

> ID：15530402
> 
> 赞同：0
> 
> 时间：2013-03-20T17:18:34.423
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我启动了我的 Rails 应用程序并突然收到以下错误

```
/.rvm/gems/ruby-1.9.3-p194/gems/devise-2.1.2/lib/devise.rb:406:in `configure_warden!': undefined method `failure_app=' for nil:NilClass (NoMethodError) 
```

devise.rb 第 406 行有：

```
warden_config.failure_app   = Devise::Delegator.new 
```

我无法弄清楚问题所在，我该如何解决？

# javascript - 地理位置观察位置距离计算器

> ID：15530404
> 
> 赞同：1
> 
> 时间：2013-03-20T17:18:37.423
> 
> 标签：javascript, html, geolocation, distance

我正在使用地理位置来获取用户的当前位置并使用 watchPosition 方法对其进行监控。但是，有没有办法计算用户起始位置和当前位置之间的距离？下面是我的代码：

```
var x = document.getElementById("info");

function getLocation() {
    if(navigator.geolocation) {
        navigator.geolocation.watchPosition(showPosition, showError, {
            enableHighAccuracy: true,
            maximumAge: 60000,
            timeout: 27000
        })
    } else {
        x.innerHTML = "Geolocation is not supported by this browser.";
    }
}
var flightPathCoordinates = [];

function showPosition(position) {
    x.innerHTML = "Latitude: " + position.coords.latitude + "<br>Longitude: " + position.coords.longitude + "<br>Accuracy: " + position.coords.accuracy + "<br>Altitude: " + position.coords.altitude + "<br>Altitude Accuracy: " + position.coords.altitudeAccuracy + "<br>Heading: " + position.coords.heading + "<br>Speed: " + position.coords.speed + "<br>Speed (mph): " + position.coords.speed * 2.2369 + "<br>Speed (km): " + position.coords.speed * 3.6 + "<br>Timestamp: " + new Date(position.timestamp).toLocaleString() + "<br>Distance Travelled (km): " + calculateDistance(position.coords.latitude, position.coords.longitude, position.coords.latitude, position.coords.longitude);
    // Distance Calculator

    function calculateDistance(lat1, lon1, lat2, lon2) {
        if(typeof (Number.prototype.toRad) === "undefined") {
            Number.prototype.toRad = function () {
                return this * Math.PI / 180;
            }
        }
        var R = 6371; // km
        var dLat = (lat2 - lat1).toRad();
        var dLon = (lon2 - lon1).toRad();
        var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.cos(lat1.toRad()) * Math.cos(lat2.toRad()) * Math.sin(dLon / 2) * Math.sin(dLon / 2);
        var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
        var d = R * c;
        return d;
    }
    Number.prototype.toRad = function () {
        return this * Math.PI / 180;
    }
    lat = position.coords.latitude;
    lon = position.coords.longitude;
    latlon = new google.maps.LatLng(lat, lon)
    mapholder = document.getElementById('mapholder')
    var myOptions = {
        center: latlon,
        zoom: 16,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        mapTypeControl: true,
        navigationControlOptions: {
            style: google.maps.NavigationControlStyle.SMALL
        }
    }
    var map = new google.maps.Map(document.getElementById("mapholder"), myOptions); 
```

任何帮助将不胜感激，因为我对此很陌生。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:32:20.553

你可以使用Haversine公式

```
rad = function(x) {return x*Math.PI/180;}

distHaversine = function(p1, p2) { // Points are Geolocation.coords objects
  var R = 6371; // earth's mean radius in km
  var dLat  = rad(p2.latitude - p1.latitude);
  var dLong = rad(p2.longitude - p1.longitude);

  var a = Math.sin(dLat/2) * Math.sin(dLat/2) +
          Math.cos(rad(p1.lat())) * Math.cos(rad(p2.lat())) * Math.sin(dLong/2) * Math.sin(dLong/2);
  var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
  var d = R * c;

  return d.toFixed(3);
} 
```

两个提示

1.  `typeof`不是函数。像这样使用它：`typeof something`
2.  不要将 polyfills 放在监听器中。每次侦听器触发时，您都在重复 polyfill 操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T17:34:51.663

这已改编自 Google Maps API，并重新设计为独立于库。

### 示例 - 计算从纽约市中心到费城市中心的距离。

*   [千里迢迢：http://jsfiddle.net/DXNzu/](http://jsfiddle.net/DXNzu/)
*   [小提琴公里：http://jsfiddle.net/DXNzu/1/](http://jsfiddle.net/DXNzu/1/)

## JS

```
function distanceFrom(points) {
    var lat1 = points.lat1;
    var radianLat1 = lat1 * (Math.PI / 180);
    var lng1 = points.lng1;
    var radianLng1 = lng1 * (Math.PI / 180);
    var lat2 = points.lat2;
    var radianLat2 = lat2 * (Math.PI / 180);
    var lng2 = points.lng2;
    var radianLng2 = lng2 * (Math.PI / 180);
    var earth_radius = 3959; // or 6371 for kilometers
    var diffLat = (radianLat1 - radianLat2);
    var diffLng = (radianLng1 - radianLng2);
    var sinLat = Math.sin(diffLat / 2);
    var sinLng = Math.sin(diffLng / 2);
    var a = Math.pow(sinLat, 2.0) + Math.cos(radianLat1) * Math.cos(radianLat2) * Math.pow(sinLng, 2.0);
    var distance = earth_radius * 2 * Math.asin(Math.min(1, Math.sqrt(a)));
    return distance.toFixed(3);
}

var distance = distanceFrom({
    // NYC
    'lat1': 40.713955826286046,
    'lng1': -74.00665283203125,
    // Philly
    'lat2': 39.952335,
    'lng2': -75.163789
}); 
```

结果是 `80.524`英里或`129.583`公里。

# java - 如何实例化/使用转换接口 Commons Math？

> ID：15530408
> 
> 赞同：1
> 
> 时间：2013-03-20T17:18:45.573
> 
> 标签：java, transformation, affinetransform, apache-commons-math

是否可以使用[`Transform`](http://commons.apache.org/proper/commons-math/javadocs/api-3.1.1/org/apache/commons/math3/geometry/partitioning/Transform.html)Apache Commons Math 的接口来实际转换数值向量？如果“是”那么如何？Apdoc中没有任何线索。如果“否”，那么这个接口的目的是什么？

**更新**

上面的界面是超链接的。我是说`org.apache.commons.math3.geometry.partitioning.Transform<S extends Space,T extends Space>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T03:09:49.803

假设您正在讨论 org.apache.commons.math3.transform 包中的 RealTransformer 接口，您需要直接使用该包中的具体实现之一或创建您自己的一个。看一下，例如 FastFourierTransformer 的示例实现。欢迎您在公共用户邮件列表上寻求帮助。

# c# - 使 WCF 服务接受来自 jQuery.AJAX() 的 JSON 数据

> ID：15530412
> 
> 赞同：4
> 
> 时间：2013-03-20T17:18:49.497
> 
> 标签：c#, jquery, json, wcf, endpoint

我一直在寻找几个小时并尝试不同的事情来让它发挥作用。我已经尝试了很多关于 stackoverflow 的文章，要么我太愚蠢而无法正常工作，要么我有一些独特而奇怪的配置让我无法体验快乐。

我创建了本教程概述的 WCF 服务：

[http://www.codeproject.com/Articles/97204/Implementing-a-Basic-Hello-World-WCF-Service](http://www.codeproject.com/Articles/97204/Implementing-a-Basic-Hello-World-WCF-Service)

它是超级基本的并且有一种方法，我想要它做的就是允许我使用 json 使用 jQuery.AJAX() 来使用它。

我将它托管在 IIS 中并且可以正常工作。我可以毫无问题地访问 WSDL。

我尝试使用以下代码来使用它：

```
$.ajax({
    dataType: 'json',
    type: 'POST',
    contentType: "application/json",
    url: "//localhost:546/HelloWorldService.svc/GetMessage",
    data: {
        name: "Joe"
    }
    }).done(function(msg){
        console.log(msg);
        $("#result").append(msg);
}); 
```

我总是出错。根据我的尝试，我得到 500 个错误、402 个错误、有关不正确内容的错误……所有错误。

我已尝试实施以下文章中的解决方案。它们的范围从让我更改 web.config 端点（我知道我必须更改它们，但到目前为止我在添加 JSON 端点方面没有尝试过）到添加诸如

```
[WebInvoke(Method = "POST", UriTemplate = "json/PostSalesOrderData", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Bare)] 
```

到界面。

以下是我看过的一些文章，并试图融入我的解决方案以使其正常工作，但没有取得多大成功。

[Phonegap Android 上的 Javascript JSON 和 WCF 网络服务](https://stackoverflow.com/questions/14147259/javascript-json-and-wcf-webservice-on-phongap-android)

[HTTP/1.1 415 无法处理消息，因为内容类型为 'application/json; charset=utf-8' 不是预期的类型 'text/xml; 字符集=utf-8'](https://stackoverflow.com/questions/13617561/http-1-1-415-cannot-process-the-message-because-the-content-type-application-js)

[具有 JSON、JSONP 和 SOAP 端点的 WCF 服务](https://stackoverflow.com/questions/4688545/wcf-services-with-json-jsonp-and-soap-end-points)

[两个端点（soap，json）和一个服务方法](https://stackoverflow.com/questions/7359759/two-endpoint-soap-json-and-one-service-method)

[WCF REST服务不接受.Net 4中的JSON](https://stackoverflow.com/questions/5006195/wcf-rest-service-not-accepting-json-in-net-4)

我还阅读了本教程并尝试使用他所说的来使我的解决方案发挥作用。依然没有！

[http://www.primordialcode.com/blog/post/passing-json-serialized-objects-wcf-service-jquery](http://www.primordialcode.com/blog/post/passing-json-serialized-objects-wcf-service-jquery)

这就是我的界面的样子

```
[ServiceContract]
public interface IHelloWorldService
{
    [OperationContract]
    [WebInvoke(UriTemplate = "GetMessage", Method = "POST",
        BodyStyle = WebMessageBodyStyle.WrappedRequest,
        RequestFormat = WebMessageFormat.Json,
        ResponseFormat = WebMessageFormat.Json)]
    String GetMessage(String name);
} 
```

谁能帮我体验快乐？

提前感谢您甚至查看我的问题。如果您需要更多信息或者我没有提供足够的信息，请告诉我，以便我可以帮助您！

我一定错过了一些愚蠢的东西......我知道这并不难。

编辑：

工作网络配置

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <compilation debug="false" targetFramework="4.0" />
  </system.web>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
  <system.serviceModel>
    <behaviors>
      <endpointBehaviors>
        <behavior name="WebHTTPEndpointBehavior">
          <webHttp />
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior name="MyServiceTypeBehaviors">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <bindings>
      <webHttpBinding>
        <binding name="MyWebServiceBinding" maxBufferSize="2147483647" maxReceivedMessageSize="2147483647"/>
      </webHttpBinding>
    </bindings>
    <services>
      <service name="MyWCFServices.HelloWorldService"
       behaviorConfiguration="MyServiceTypeBehaviors">
        <endpoint address="" binding="webHttpBinding" bindingConfiguration="MyWebServiceBinding" behaviorConfiguration="WebHTTPEndpointBehavior"
          contract="MyWCFServices.IHelloWorldService"/>
        <endpoint contract="IMetadataExchange"
          binding="mexHttpBinding" address="mex"/>
      </service>
    </services>
  </system.serviceModel>
</configuration> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T17:31:33.960

更改此行

```
data: {
    name: "Joe"
} 
```

到

```
data: JSON.stringify({name: 'Joe'}); 
```

编辑：

这样做是为了您的服务。在配置中添加 WebHttp 绑定。

```
 <behaviors>
  <endpointBehaviors>
    <behavior>
      <webHttp />
    </behavior>
  </endpointBehaviors>
</behaviors> 
```

希望你知道在哪里添加这个。如果不让我知道，我会尝试提供一些输入。

**编辑：**

跟进我的评论，

```
<behavior name="myBehaviorName">
      <webHttp />
</behavior>

<service name="MyWCFServices.HelloWorldService"
         behaviorConfiguration="MyServiceTypeBehaviors">
    <endpoint address="" binding="webHttpBinding"
         contract="MyWCFServices.IHelloWorldService" behaviorConfiguration="myBehaviorName"/>
    <endpoint contract="IMetadataExchange"
       binding="mexHttpBinding" address="mex"/>
  </service> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T18:24:01.993

我迟到了，但您仍有一些问题需要解决才能使其正常工作。您需要更改端点的绑定以支持 HTTP 操作。

```
<bindings>
    <webHttpBinding>
        <binding name="MyWebServiceBinding" maxBufferSize="2147483647" maxReceivedMessageSize="2147483647"/>
    </webHttpBinding>
</bindings>
<behaviors>
    <endpointBehaviors>
        <behavior name="WebHTTPEndpointBehavior">
          <webHttp helpEnabled="true"/>
        </behavior>
    </endpointBehaviors>
</behaviors>
<services>
  <service name="MyWCFServices.HelloWorldService"
         behaviorConfiguration="MyServiceTypeBehaviors">
    <endpoint address="" binding="webHttpBinding" bindingConfiguration="MyWebServiceBinding" behaviorConfiguration="WebHTTPEndpointBehavior"
         contract="MyWCFServices.IHelloWorldService"/>
    <endpoint contract="IMetadataExchange"
       binding="mexHttpBinding" address="mex"/>
  </service>
</services> 
```

`maxBufferSize`和`maxReceivedMessageSize`是可选的。

编辑：哎呀，忘了添加你`behaviorConfiguration`的。

# php - 将 ORDER BY 语法附加到 php MySQL 查询

> ID：15530417
> 
> 赞同：0
> 
> 时间：2013-03-20T17:19:04.510
> 
> 标签：php, mysql

我正在尝试将 ORDER BY 语法添加到我在 PHP 中执行的 MySQL 连接查询中。我正在使用已经定义的会话变量来动态选择标准。

工作正常：

```
$query_icons = sprintf("SELECT i.id, i.name, e.EmpNo FROM gbl_icons i LEFT JOIN gbl_empicons e ON e.IconId = i.id AND e.EmpNo = %s", GetSQLValueString($ParamEmpNo_WADAgbl_qemplisting, "text")); 
```

当我尝试附加 ORDER BY 时，它会引发 500 内部服务器错误：

```
$query_icons = sprintf("SELECT i.id, i.name, e.EmpNo FROM gbl_icons i LEFT JOIN gbl_empicons e ON e.IconId = i.id AND e.EmpNo = %s", GetSQLValueString($ParamEmpNo_WADAgbl_qemplisting, "text")ORDER BY i.id ASC); 
```

如何正确转义动态会话值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:20:13.990

做这个：

```
$query_icons = sprintf("SELECT i.id, i.name, e.EmpNo FROM gbl_icons i LEFT JOIN gbl_empicons e ON e.IconId = i.id AND e.EmpNo = %s", GetSQLValueString($ParamEmpNo_WADAgbl_qemplisting, "text")."ORDER BY i.id ASC"); 
```

您忘记将 ORDER BY i.id ASC 包含在 " 中，因此您遇到了严重的语法错误

正如评论中提到的，这也可以：

```
$query_icons = sprintf("SELECT i.id, i.name, e.EmpNo FROM gbl_icons i LEFT JOIN gbl_empicons e ON e.IconId = i.id AND e.EmpNo = %s ORDER BY i.id ASC", GetSQLValueString($ParamEmpNo_WADAgbl_qemplisting, "text")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T17:23:12.037

将 ORDER BY 放在字符串中，在“%s”之后。

另外，直接将SQL查询伪造成字符串是非常不安全的，尝试使用PDO或其他数据访问层创建安全的参数化请求。

```
$query_icons = sprintf("SELECT i.id, i.name, e.EmpNo FROM gbl_icons i LEFT JOIN gbl_empicons e ON e.IconId = i.id AND e.EmpNo = %s ORDER BY i.id ASC", GetSQLValueString($ParamEmpNo_WADAgbl_qemplisting, "text")); 
```

# ruby - 什么是“-400”，“-500”，在 ruby 中 Time.now 中的日期之后，日期与 postgres 日期字段兼容？

> ID：15530420
> 
> 赞同：0
> 
> 时间：2013-03-20T17:19:06.550
> 
> 标签：ruby, postgresql, pg

Ruby 和 postgres 问题：我想将 Ruby 脚本中的日期插入 postgres 数据库。数据库日期格式为：`2013-03-13 17:08:51.207184-04`在 postgres 中。顺便说一句，Postgres 数据库中日期字段中的“51.207184-04”是什么？

我想将 ruby​​ 中的数据写入 postgres 中的日期列。我假设我需要使用 Time.now 但我不知道那是什么？日期时间结束时的 -400 或 -500 是怎么回事？

postgres 数据库字段是：`timestamp without time zone NOT NULL`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:22:27.063

-400 或 -500 指的是您的脚本正在运行的时区，作为与 UTC 的偏移量。

参考表 8.11 [http://www.postgresql.org/docs/current/static/datatype-datetime.html](http://www.postgresql.org/docs/current/static/datatype-datetime.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T17:22:31.950

在这两种情况下，最后一位都是时区，以相对于 UTC 的小时数表示。

我相信显示的 PG 时间戳是 2013-03-13 17h 08m 51.207184s，比 UTC 晚 4 小时（但我不是 100% 熟悉 postgres 的字段格式）；在 Ruby`-0400`中结束的`Time.now`意思是一样的，并且`-0500`意味着落后 5 小时。

# c# - rdlc REPORTPARAMETER INT ，报告不出现

> ID：15530424
> 
> 赞同：0
> 
> 时间：2013-03-20T17:19:21.010
> 
> 标签：c#, rdlc

我写了这个程序：

```
 alter proc rel_geralAC (@emite int, @mes char, @ano varchar(4) )as
   select Total_Mun = COUNT(xMunIni),xMunIni ,
   UF = MAX(UFIni) ,Valor_Total = SUM(CAST(vTPrest AS MONEY) ) 
   from CTRC where EMITENTE= @emite   and
   MONTH(emissaodata)=@mes and status = 'A' 
   and YEAR (EMISSAODATA)= CONVERT (int,@ano) 
   group by xMunIni order by UF,xMunIni 
```

这个过程返回一个不为空的表，我用它来创建一个数据集来填充 C# 中的 rdlc 报告数据集返回信息 ![在此处输入图像描述](../Images/9ec78f1ee1fe24e997f6342a82bed901.png)

我已经在报表数据中声明了参数

![在此处输入图像描述](../Images/e62ba3104aa9ccc0e35a04c3573b3b9c.png)

这是reportviewer的代码：

```
 ReportParameter[] p = new ReportParameter[3];
     p[0] = new ReportParameter("emite",EEmit.ToString());
     p[1] = new ReportParameter("mes", emes.ToString());
     p[2] = new ReportParameter("ano", eano.ToString());
     reportViewer1.LocalReport.SetParameters(p);
     this.rel_geralACTableAdapter.Fill(this.ifdcontroladoria3DataSet.rel_geralAC,EEmit,emes,eano);
     this.reportViewer1.RefreshReport(); 
```

为什么报告没有显示任何内容？谢谢。

* * *

我删除了数据集并重新构建，创建了文本等3个参数，如果我选择整数，查询不起作用，报告参数只接受字符串，但参数可能是

文本、布尔值、日期/时间、整数、浮点数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-02T20:09:20.770

//你少了一行：

```
reportViewer1.LocalReport.SetParameters(new ReportParameter[] { p }); 
```

//由于您将参数添加到参数数组中，您可以将参数数组放在 //set parameters 类中。

//我通常会

```
ReportParameter rp = new ReportParameter("ParameterName", "yourtextvalue.text", false);

//repeat again (rp2, rp3, rp4 etc...) 
```

//然后调用最后一条语句

```
reportViewer1.LocalReport.SetParameters(new ReportParameter[] { rp, rp2, rp3, rp4 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T09:28:27.057

您必须为定义所有参数添加“false”，例如：

```
p[0] = new ReportParameter("emite",EEmit.ToString(),false); 
```

# java - 有没有办法将“req.getParameter”放在“for循环”中，以便根据用户在另一个servlet中提供的x量保存在数据库中？

> ID：15530425
> 
> 赞同：0
> 
> 时间：2013-03-20T17:19:22.497
> 
> 标签：java, variables, servlets, request, webpage

我正在开发一个系统，教师可以在其中编辑他/她之前创建的考试，但问题是保存问题和答案取决于考试有多少问题。

当我从“编辑 servlet”请求变量到“保存 servlet”时，我找不到一种方法可以为每个问题和答案创建字符串变量，以便将它们保存到 mySQL 数据库中。

```
public void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException {

    String numpreguntas = req.getParameter("x");
    int Nump = Integer.parseInt(numpreguntas);
    String numrespuestas = req.getParameter("y");
    int Numr = Integer.parseInt(numrespuestas);
    String nombre = req.getParameter("strNombre");

    for(int i=1; i<Nump; i++) {
        String resp = req.getParameter("answeri-j");
    }

    actualizarBD(nombre, Nump, Numr, resp);
    devolverPaginaHTML(res, nombre);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:30:35.200

ServletRequest getParameterMap 将为您提供请求中传递的所有参数和值。然后，您可以使用它来迭代而不是查找单个参数。

# database - Window Phone-Window桌面通讯

> ID：15530432
> 
> 赞同：0
> 
> 时间：2013-03-20T17:19:37.067
> 
> 标签：database, wcf, azure, architecture, windows-phone

我想做一个客户端-服务器系统。客户端将是一个 Windows Phone 应用程序，它将其位置发送到服务器 - WPF 应用程序。我想要完成的最佳设计是什么？考虑以下：

*   桌面上的 WCF 主机服务器（与 Windows Phone 应用程序通信）
*   Azure 总线服务（不确定服务器的放置位置）
*   数据库（客户端将写入位置，服务器将读取位置）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T18:40:29.807

除非我无法理解系统的复杂性，否则为什么不简单地将手机中的位置信息发送到 Azure 队列，然后用您的客户端应用程序将其读回？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T02:51:05.160

如果您需要将信息保存在某处，最好让手机应用程序将位置信息发送到存储在数据库中的中心位置。Web（或云）服务器上的数据库可能是一个不错的首选考虑。
然后桌面/WPF 应用程序可以连接到数据库并从数据库中读取。

除非您只有非常小的用户群，他们都将在同一个网络上，否则与在 PC/桌面上运行的应用程序进行通信将是非常不切实际的。

最终，“最佳”解决方案将取决于您的技能、资源、经验、时间和其他要求。

# forms - 将搜索表单提交到另一个页面到其 iframe

> ID：15530434
> 
> 赞同：0
> 
> 时间：2013-03-20T17:19:38.600
> 
> 标签：forms, iframe, form-submit

当向**页面 A**提交搜索表单以将搜索表单转发到**页面 B**到其 iframe 并在 iframe 中加载带有搜索结果的**页面 B时，是否有可能？**

实际上，如果我在**页面 A**上搜索，它会加载带有结果的 iframe 页面，但我需要在 iframe 中加载带有结果的**页面 B。**

这是测试页面 A [http://mysite.com/lidl/page1.html](http://mysite.com/lidl/page1.html)和页面 B [http://mysite.com/lidl/page2.html](http://mysite.com/lidl/page2.html)

第 1 页搜索表单：

```
<form id="SearchForm" action="http://mysite.com/search-results-jobs/" target="" method="post">
    <input type="hidden" name="action" value="search" />
    <input type="hidden" name="listing_type[equal]" value="Job" />
    <label>
        <strong>What?</strong> 
        <em><input type="text" value="job title, keywords or company name" onblur="if(this.value=='') this.value='job title, keywords or company name'" onFocus="if(this.value =='job title, keywords or company name' ) this.value=''" name="keywords [all_words]" /></em>
    </label>
    <label>
        <strong class="color">Where?</strong>
        <b><input type="text" value="city, state or zip code"  onblur="if(this.value=='') this.value='city, state or zip code'" onFocus="if(this.value =='city, state or zip code' ) this.value=''" name="City[all_words]" /></b>
    </label>
    <a href="#" class="SearchForm-link" onclick="document.getElementById('SearchForm').submit()"/>Search</a>
</form> 
```

第2页

```
<form id="SearchForm" action="http://mysite.com/search-results-jobs/" target="my-iframe" method="post">
    <input type="hidden" name="action" value="search" />
    <input type="hidden" name="listing_type[equal]" value="Job" />
    <label>
        <strong>What?</strong>
        <em><input type="text" value="job title, keywords or company name" onblur="if(this.value=='') this.value='job title, keywords or company name'" onFocus="if(this.value =='job title, keywords or company name' ) this.value=''" name="keywords[all_words]" /></em></label>
    <label>
        <strong class="color">Where?</strong>
        <b><input type="text" value="city, state or zip code" onblur="if(this.value=='') this.value='city, state or zip code'" onFocus="if(this.value =='city, state or zip code' ) this.value=''" name="City[all_words]" /></b>
    </label>
    <a href="#" class="SearchForm-link" onclick="one(); two(); three(); four();">Search</a>
    <input type="submit" id="btn-search" class="button" value="Cauta"/>
</form>
<iframe id="my-iframe" name="my-iframe" align="right" src="http://mysite.com" frameborder="0" height="100%" scrolling="no" width="100%"></iframe> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T20:24:51.400

搜索引擎使用的常用技术是在 url 中传递查询。这是 Monster 的示例（在加利福尼亚州圣地亚哥搜索 JavaScript）：

```
http://jobsearch.monster.com/search/?q=JavaScript&where=San-Diego__2C-CA 
```

谷歌也这样工作，等等。

您可以将其应用于您自己的页面，以便轻松地将查询从 A 传递到 B。

另一个好处是人们可以通过电子邮件发送查询结果。

# node.js - Node.js - 压缩/解压缩文件夹

> ID：15530435
> 
> 赞同：31
> 
> 时间：2013-03-20T17:19:43.077
> 
> 标签：node.js, zlib

我正在深入研究 node.js 的 Zlib。我能够使用提供的示例（[http://nodejs.org/api/zlib.html#zlib_examples](http://nodejs.org/api/zlib.html#zlib_examples)）压缩和解压缩文件，但我找不到更多关于对文件夹执行相同操作的信息？

一种可能性（但我认为是修修补补）是使用`node-zip`模块并一一添加文件夹的所有文件。但是解压缩时会遇到问题（在这种情况下我会丢失文件夹）。

知道如何使用 Node.js 压缩（然后解压缩）整个文件夹（尊重子焊料层次结构）吗？

谢谢。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-20T18:55:03.603

在@generalhenry 的帮助下，我终于得到了它（请参阅对问题的评论）和

正如评论中提到的，我们需要分两步压缩文件夹：

1.  将文件夹转换为`.tar`文件

2.  压缩`.tar`文件

为了执行第一步，我需要两个 node.js 模块：

```
npm install tar
npm install fstream 
```

第一个允许我们创建`.tar`文件。您可以在此处访问源代码[https://github.com/isaacs/node-tar](https://github.com/isaacs/node-tar)

第二个节点模块将帮助我们读取文件夹并写入文件。关于基本的`fs`node.js 模块，我不知道是否可以读取目录（我不是在谈论使用 获取数组中的所有文件`fs.readdir`，而是处理文件夹中的所有文件及其组织）。

然后，当我将文件夹转换为文件时，`.tar`我可以使用`Gzip()`.`Zlib`

这是最终代码：

```
var fstream = require('fstream'),
    tar = require('tar'),
    zlib = require('zlib');

fstream.Reader({ 'path': 'path/to/my/dir/', 'type': 'Directory' }) /* Read the source directory */
.pipe(tar.Pack()) /* Convert the directory to a .tar file */
.pipe(zlib.Gzip()) /* Compress the .tar file */
.pipe(fstream.Writer({ 'path': 'compressed_folder.tar.gz' })); /* Give the output file name */ 
```

这帮助我使用 node.js 压缩整个文件夹

还有2件事：

*   如您所见，`tar`模块上缺少文档。我希望这将很快得到改进，因为提供的两个示例讨论了如何从`.tar`文件中提取内容。

*   我使用该`fstream`模块来帮助我处理源目录。可以使用绕过`fs`吗？我不知道（如果您有想法，请发表评论）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2020-03-30T19:09:06.887

提供更新的答案，因为[包 tar](https://www.npmjs.com/package/tar)自 2013 年以来已更新。

为了达到同样的效果，代码更简单直接：

```
const tar = require("tar"); // version ^6.0.1
const fs = require("fs");

tar.c(
  {
    gzip: true // this will perform the compression too
  },
  ["path/to/my/dir/"]
).pipe(fs.createWriteStream('path/to/my/dir.tgz')); 
```

无需显式使用`zlib`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-01T00:39:33.047

您可以使用[tar-stream](https://github.com/mafintosh/tar-stream)模块创建 tar 存档。它比 node-tar 更灵活、更简单：

*   您可以将文件添加到存档（不仅仅是目录，这是 node-tar 的限制）
*   它适用于普通节点文件系统流（node-tar 奇怪地需要使用 fstream 模块）
*   它的文档非常完整（node-tar 没有很好的文档记录）
*   您可以创建存档而无需访问文件系统

创建 tar 存档，然后使用 zlib 对其进行压缩，然后将其写入您想要的任何位置（网络、文件系统等）。

# algorithm - 我可以在 Prolog 的 catch 调用中共享变量吗？

> ID：15530436
> 
> 赞同：1
> 
> 时间：2013-03-20T17:19:43.843
> 
> 标签：algorithm, prolog

我正在 Prolog 中开发一个任务调度程序。首先让我向您展示我的代码的简化版本。它是这样的：

```
handle_activable(As) :-
    reset_flags,
    findall(A,catch(activable(A),Exception,flag(marked_activable,A)),As),
    activate_all(As). 
```

有两个版本，`activable/1`但最相关的一个是（再次简化）：

```
activable(T) :-
    task(T),        /* T is a task */
    inactive(T),    /* The task is currently inactive */
    (\+checked(T) ->
        mark_checked(T),
        !,
        /* 
           Here would go the set of conditions 
           and  statements to determine if task T 
           is activable or not. They may internally 
           call activable/1.
        */
        asserta(flag(marked_activable,T))
    ;   
        /* 
           This task was already checked and the 
           result is stored in flag(marked_activable,T) 
           fact. 
        */
        throw(exception(already_checked,T))
    ). 
```

问题是，在“条件检查集”中，`activable/1`可能会被间接调用。这就是为什么我需要使用`checked/1`, 以避免不必要的循环。我猜我使用的方式没问题`findall/3`，但由于`As`总是实例化为空列表`[]`，我开始认为它有问题。

我想问你的第一件事是 catch(...) 调用。这是正确的吗？我的意思是，如果在`activable/1`调用过程中，程序因为已经检查了任务而引发异常，`A`仍然会被实例化（以便我可以在 中使用它`flag(marked_activable,A)`）？如果没有，您知道任何解决方法吗？

我想问你的第二件事是关于我的算法的正确性。我已经为此工作了很长时间，并且尽我所能来编写高效、健壮和可靠的代码。真正困难的是在一组条件检查中，其中任务的关系发挥了重要作用并产生了复杂的约束。你觉得“寻找可激活任务”的方式好不好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:49:52.040

使用内置`catch/3`谓词，传递信息的正确方法是通过`Catcher`术语。

```
catch(:Goal, +Catcher, :Recover) 
```

根据 SWI-Prolog 文档，是与 的参数相结合`Goal`的最里面的目标，由 生成的所有选择点**都被剪切**，系统回溯到起点，同时保留抛出的异常项。因此，具有如下规则：`Catcher``throw/1``Goal` **`catch/3`**

 **```
generate(info1).
generate(info2).
generate(info3).
generate(info4).
rule(D) :-
    generate(D),
    ...
    throw(error_info(D)). 
```

抓住这条规则的结果是这样的：

```
?- catch(rule(D), Exception, write(Exception)).
error_info(info1).
Exception = error_info(info1).

?- catch(rule(_), error_info(E), write(E)).
info1.
E = info1. 
```**

# objective-c - WebSocket 连接未使用 SocketRocket 关闭

> ID：15530437
> 
> 赞同：14
> 
> 时间：2013-03-20T17:19:44.723
> 
> 标签：objective-c, connection, websocket, socketrocket

我使用 Objective-C 的 SocketRocket 库连接到 websocket：

```
-(void)open {

if( self.webSocket ) {
    [self.webSocket close];
    self.webSocket.delegate = nil;
}

self.webSocket = [[SRWebSocket alloc] initWithURLRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"ws://192.168.0.254:5864"] cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:20]];
self.webSocket.delegate = self;
[self.webSocket open];
} 
```

打开连接完全正常。建立连接后调用委托。

```
-(void)webSocketDidOpen:(SRWebSocket *)webSocket {

NSLog(@"WebSocket is open");

} 
```

但是当我想关闭连接时，什么也没有发生。

```
-(void)close {

if( !self.webSocket )
    return;

[self.webSocket close];
self.webSocket.delegate = nil;

} 
```

不调用成功关闭连接的委托。谁能告诉我为什么会这样？

感谢您阅读我的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T14:18:57.577

我发现从未调用过委托，因为 websocket 从未真正关闭过。SRWebSocket 中 websocket 的关闭发生在 pumpWriting 方法中，**如下**所示：

```
if (_closeWhenFinishedWriting && 
    _outputBuffer.length - _outputBufferOffset == 0 && 
    (_inputStream.streamStatus != NSStreamStatusNotOpen &&
     _inputStream.streamStatus != NSStreamStatusClosed) &&
    !_sentClose) {
    _sentClose = YES;

    [_outputStream close];
    [_inputStream close];

    if (!_failed) {
        dispatch_async(_callbackQueue, ^{
            if ([self.delegate respondsToSelector:@selector(webSocket:didCloseWithCode:reason:wasClean:)]) {
                [self.delegate webSocket:self didCloseWithCode:_closeCode reason:_closeReason wasClean:YES];
            }
        });
    }

    _selfRetain = nil;

    NSLog(@" Is really closed and released ");
}
else {

    NSLog(@" Is NOT closed and released ");
} 
```

所有流和保留 websocket 的对象都在此处关闭或删除。只要它们仍然打开，套接字就不会适当地关闭。但是关闭在我的程序中从未发生过，因为当我试图关闭 websocket 时，**_closeWhenFinishedWriting**总是 NO。

此布尔值仅在**断开连接**方法中设置一次。

```
- (void)_disconnect;
{

assert(dispatch_get_current_queue() == _workQueue);
SRFastLog(@"Trying to disconnect");
_closeWhenFinishedWriting = YES;
[self _pumpWriting];

} 
```

但是在SRWebSocket中调用**closeWithCode**方法时，**disconnect**只在一种情况下调用，即websocket处于连接状态。

```
BOOL wasConnecting = self.readyState == SR_CONNECTING;

SRFastLog(@"Closing with code %d reason %@", code, reason);
dispatch_async(_workQueue, ^{

    if (wasConnecting) {
        [self _disconnect];
        return;
    } 
```

这意味着，如果套接字处于另一种状态，则 websocket 永远不会真正关闭。一种解决方法是始终调用**断开连接**方法。至少它对我有用，一切似乎都很好。

如果有人知道为什么 SRWebSocket 是这样实现的，请对此答案发表评论并帮助我。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-19T07:48:31.933

我认为这是一个错误。
调用 close 时，服务器会回显“关闭”消息。
它由 SRWebSocket 接收，但是 _selfRetain 永远不会设置为 nil，并且套接字保持打开状态（流未关闭）并且我们有内存泄漏。
我也在测试聊天应用程序中检查并观察了这一点。
我做了以下更改：

```
-(BOOL)_innerPumpScanner {    
    BOOL didWork = NO;

    if (self.readyState >= SR_CLOSING) {
        [self _disconnect];  // <--- Added call to disconnect which releases _selfRetain
        return didWork;
    } 
```

现在套接字关闭，实例被释放，内存泄漏消失了。
我唯一不确定的是，以这种方式关闭时是否应该调用委托。将对此进行调查。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-17T14:31:02.737

> 一旦一个端点发送和接收了一个关闭控制帧，该端点应该关闭第 7.1.1 节中定义*的 WebSocket 连接。*（[RFC 6455 7.1.2](https://www.rfc-editor.org/rfc/rfc6455#section-7.1.2)）

SRWebSocket 实例不在此处，因为这将在客户端收到关闭控制帧作为响应*之前*`_disconnect`关闭与服务器的 TCP 连接。实际上，这里的 ing 会在客户端甚至可以将自己的 Close 帧发送到服务器之前拆除 TCP 套接字，因为最终调用之前可以。服务器可能会足够优雅地响应，但它是不合格的，当事情以这种方式设置时，您将无法发送情境唯一的关闭代码。*`_disconnect``_disconnect``_pumpWriting``closeWithCode:`*

 *这在`handleCloseWithData:`

```
if (self.readyState == SR_OPEN) {
    [self closeWithCode:1000 reason:nil];
}
dispatch_async(_workQueue, ^{
    [self _disconnect];
}); 
```

此块处理由客户端和服务器发起的关闭请求。如果服务器发送第一个 Close 帧，该方法将按照您布置的顺序运行，最终以`_pumpWriting`via结束`closeWithCode:`，客户端将使用自己的 Close 帧进行响应。然后它继续拆除与 that 的联系`_disconnect`。

当客户端首先发送帧时，`closeWithCode:`运行一次而不关闭 TCP 连接，因为`_closeWhenFinishedWriting`仍然为 false。这允许服务器有时间用自己的 Close 帧进行响应，这通常会导致`closeWithCode:`再次运行，但该方法顶部的以下块：

```
if (self.readyState == SR_CLOSING || self.readyState == SR_CLOSED) {
    return;
} 
```

因为 readyState 在 的第一次迭代中发生了变化`closeWithCode:`，这一次它根本不会运行。

emp 的错误修复对于使这项工作按预期工作是必要的，但是：否则来自服务器的 Close 框架不会做任何事情。连接仍然会结束，但是很脏，因为服务器（已经发送和接收了它的帧）将在它的一端断开套接字，并且客户端将响应一个`NSStreamEventEndEncountered:`，这通常是为突然丢失的连接性。更好的方法是确定为什么框架永远不会超出`_innerPumpScanner`to `handleCloseWIthData:`。另一个要记住的问题是，默认情况下，`close`只调用`closeWithCode:`不符合 RFC 的代码 -1。这会在我的服务器上引发错误，直到我将其更改为发送一个接受的值。

**所有这一切**：您的委托方法不起作用，因为您在调用后立即取消设置委托`close`。里面的一切都在`close`一个异步块内；`didCloseWithCode:`无论您在这里做什么，在您调用时都不会有委托人可以调用。*

# excel - 根据单元格值向用户窗体添加复选框

> ID：15530443
> 
> 赞同：5
> 
> 时间：2013-03-20T17:19:58.763
> 
> 标签：excel, checkbox, vba

我对 VBA 很陌生，只有 3 天......但我发现它非常有用且易于使用，但现在我面临一个问题。我需要使用不同的复选框制作一个用户窗体，但我需要根据工作表的一列中使用的信息自动添加它们。我相信我可以使用 For .. Each .. Next 但我真的不知道如何填写复选框。这是我现在唯一的解决方案，但我无法制作不同的复选框，只有一个。

```
For Each rCell In Range("B1:B" & LastRow)
    If rCell.Value <> "" Then
        UserForm1.Controls.Add ("Forms.CheckBox.1")
    End If
Next 
```

我需要做的另一件事是在添加复选框后填充复选框的属性，以便之后我可以使用这些值。

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-12-22T19:04:28.380

我确定您之前已经得到了答案，但是由于这出现在我的谷歌搜索中，我想我会发布另一个答案。将以下代码放在您的用户窗体中：

```
Option Explicit

Private Sub UserForm_Initialize()

Dim curColumn   As Long
Dim LastRow     As Long
Dim i           As Long
Dim chkBox      As MSForms.CheckBox

curColumn = 1 'Set your column index here
LastRow = Worksheets("Sheet1").Cells(Rows.Count, curColumn).End(xlUp).Row

For i = 1 To LastRow
    Set chkBox = Me.Controls.Add("Forms.CheckBox.1", "CheckBox_" & i)
    chkBox.Caption = Worksheets("Sheet1").Cells(i, curColumn).Value
    chkBox.Left = 5
    chkBox.Top = 5 + ((i - 1) * 20)
Next i

End Sub 
```

您将需要修改代码以满足您的特定需求，但这将帮助您入门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:46:51.587

我认为，先看一下这个先前的答案，因为它解释了您需要的原则。

[将控件添加到框架](https://stackoverflow.com/questions/563972/adding-controls-to-a-frame-in-an-excel-userform-with-vba)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-06T02:25:35.720

```
UserForm1.Controls("Checkbox" & i).Value 
```

# ios - 在 Ad SDK (iOS) 上需要帮助

> ID：15530444
> 
> 赞同：2
> 
> 时间：2013-03-20T17:20:05.067
> 
> 标签：ios, xcode, testing, sdk, iad

我下载了一个带有 iAD 示例的项目。现在我有几个问题。

需要ia iAD SDK吗？我在哪里可以下载它？

```
Use of undeclared identifier 'ADBannerContentSizeIdentifierPortrait' 
```

或者

```
Use of undeclared identifier 'ADBannerContentSizeIdentifierPortrait'
Property 'requiredContentSizeIdentifiers' not found on object of type 'ADBannerView *' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:25:36.040

在您的项目中添加 iAd.framework。这将删除与 iAd 相关的所有链接器错误。

笔记：

**« ADBannerContentSizeIdentifierPortrait** 在**iOS6中已弃用**

[« 请参阅此线程](https://stackoverflow.com/questions/12557566/ios-6-iad-property-and-methods-deprecated)中的建议答案 ![在此处输入图像描述](../Images/4cc0b09b88739d100fd3af9f23ab962b.png)

# java - 类型安全的类数组可能吗？

> ID：15530445
> 
> 赞同：0
> 
> 时间：2013-03-20T17:20:07.880
> 
> 标签：java, arrays, generics

是否可以使以下代码类型安全？

```
Class<? extends Entity>[] test = (Class<? extends Entity>[]) new Class<?>[1]; 
```

编辑：我需要它来输入以下函数：

```
public <T extends Entity> T createEntity(final Class<T> clazz, final int id) 
```

我不能使用 ArrayList，因为它的垃圾性能很差。我只是想摆脱 IDE 警告，而不是抑制它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T17:29:30.280

您只能选择两个数组和泛型以及类型安全。但是如果你使用 eg`ArrayList`而不是数组，你会没事的。

# sql-server - 在 SQL Server 的 LOG() 函数中强制转换不起作用

> ID：15530446
> 
> 赞同：1
> 
> 时间：2013-03-20T17:20:07.897
> 
> 标签：sql-server, function, casting

该`LOG()`函数在以下查询中不起作用。我尝试将方程转换为浮点数。尽管如此，它仍然抛出错误：

> *发生了无效的浮点运算*

有人可以帮我吗？

```
SELECT 
    t1.[ID], 
    SUM(1 / LOG(t1.[AttrCount] / t2.clustersize AS Float)) AS 'uu'
FROM 
    [Testing].[dbo].[entropytemp5] t1, [Testing].[dbo].[entropyclustersize] t2 
GROUP BY 
    t1.ID 
```

`Attrcount`和的值`Clustersize`是：

```
AttrCount | Clustersize  
------------------------
    1            1  
    1            2  
    1            1  
    1            1   
    2            1  
    2            1  
    3            3 
```

请让我知道，如果你有任何问题。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T19:27:38.483

这`Invalid floating point operation`是由于调用 LOG() 的值为零或更小而引起的。

您可能从下面指示的行中得到错误：

```
AttrCount | Clustersize  
------------------------
    1            1  
    1            2    <-- this one
    1            1  
    1            1   
    2            1  
    2            1  
    3            3 
```

当我尝试时，`LOG(1/2)`我得到了`Invalid floating point operation`因为 SQL Server 将 1/2 视为 INT 并返回零，并且`LOG(0)`==> 无效的浮点运算。

如果你这样做，你仍然会得到错误：

```
1 / LOG(CAST(t1.[AttrCount] / t2.clustersize AS FLOAT)) 
```

这是因为 SQL Server 将计算 1/2，得到零，*然后*将其转换为浮点数。

相反，分别转换*两个*操作数。我试过这个并且它有效：

```
1 / LOG(CAST(t1.[AttrCount] AS FLOAT) / CAST(t2.clustersize AS FLOAT)) 
```

因此，您的整个查询将如下所示：

```
SELECT 
    t1.[ID], 
    SUM(1 / LOG(CAST(t1.[AttrCount] AS FLOAT) / CAST(t2.clustersize AS Float)) AS 'uu'
FROM 
    [Testing].[dbo].[entropytemp5] t1, [Testing].[dbo].[entropyclustersize] t2 
GROUP BY 
    t1.ID 
```

...现在回到原来的帖子关于除以零的部分:)

如前所述，您也可以在查询的这一部分中除以零：

```
1 / LOG(t1.[AttrCount] / t2.clustersize) 
```

这可以通过两种方式发生：

1.  如果`t2.ClusterSize`为零
2.  如果`t1.AttrCount / t2.ClusterSize`= 1（因为`LOG(1)`= 0）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T18:25:19.983

首先，无论您现在看到的实际值如何，我都会进行“除以零”捕获。

其次，我会使用 ROW_NUMBER 技巧来确定它是导致问题的特定行还是整个查询。

这是一个通用示例，我输入“除以零”“捕捉”。我展示了 ROW_NUMBER 把戏。

如果第一次运行查询失败，请将值更改为 = 2。

```
Use Northwind
GO

Select derived1.*
From
    (
        select 
        [OrderID] , [ProductID] ,
        [MyRowId] = ROW_NUMBER() OVER(ORDER BY [OrderID] , [ProductID] )
        ,
        [Division1] = 
            case
                when LOG(Quantity) = 0 then 0.00
                when OrderID = 0 then 0.00
                else (UnitPrice / LOG(Quantity) / convert(float, OrderID) ) 
            end

        from 
        [dbo].[Order Details]
    )  as derived1

Where 
    derived1.[MyRowId] = 1 /* << Increment this by 1 until you find the problem row */ 
```

编辑

您需要显示所有值。

这将更快地暴露除零问题。

```
SELECT 
    t1.[ID], 

t1.[AttrCount] , 
LOG(t1.[AttrCount] ,
t2.clustersize AS Float , 

    SUM(1 / LOG(t1.[AttrCount] / t2.clustersize AS Float)) AS 'uu'
FROM 
    [Testing].[dbo].[entropytemp5] t1, [Testing].[dbo].[entropyclustersize] t2 
GROUP BY 
    t1.ID 
```

# jquery-ui - 如何使 jqgrid 顶部工具栏自定义按钮像标准按钮一样大

> ID：15530450
> 
> 赞同：1
> 
> 时间：2013-03-20T17:20:21.103
> 
> 标签：jquery-ui, jqgrid, toolbar

基于问题[jqGrid 的样式 - 如何使分页按钮更大？](https://stackoverflow.com/questions/8171286/jqgrid-how-can-i-make-the-paging-buttons-bigger) 用于使 jqgrid 顶级工具栏按钮更大：

```
.ui-jqgrid .ui-jqgrid-toppager {  height:35px !important; }
.ui-jqgrid .ui-pg-button  { height:30px !important; width:30px !important;}
.ui-jqgrid .ui-jqgrid-toppager .ui-icon { position:relative; margin: 0px 10px;}

.ui-jqgrid .ui-jqgrid-toppager .ui-pg-div span.ui-icon {
    margin: 0 10px !important;
}

/* some settings to place Button in jqGrid */
.ui-jqgrid .ui-pg-table .my-nav-checkbox
{
    margin: 0px;
    padding: 0px;
    float: left;
    height: 18px;
}
.ui-jqgrid .ui-pg-table .my-nav-checkbox > input
{
    padding: 1px;
}

.ui-jqgrid .ui-pg-table .my-nav-checkbox > label
{
    margin: 0px;
    border-width: 0px;
}

.ui-jqgrid .ui-pg-table .my-nav-checkbox:hover > label
{
    margin: 0px;
    border-width: 1px;
}

/* fixing CSS of jQuery UI Buttons */
.ui-jqgrid .ui-pg-table .my-nav-checkbox > .ui-button > span.ui-button-text
{
    margin: 0px;
    padding: 1px 2px 1px 16px;
}
.ui-button-icon-only
{
    width: 16px;
}
.ui-jqgrid .ui-pg-table .my-nav-checkbox > .ui-button > span.ui-button-icon-primary
{
    margin: -8px 0px 0px -8px;
} 
```

jqgrid 工具栏还包含基于 Oleg 答案的自定义可检查按钮，定义如下：

```
 var autoedit = false;
 $("#grid_toppager_left table.navtable tbody tr").append(
        '<td class="ui-pg-button ui-corner-all">' +
            '<div class="ui-pg-div my-nav-checkbox">' +
            '<input tabindex="-1" type="checkbox" id="AutoEdit" ' + (autoedit ? 'checked ' : '')+'/>' +
            '<label title="Press to toggle"' +
            ' for="AutoEdit">Press to toggle</label></div></td>'
    );
    $("#AutoEdit").button({
        text: false,
        icons: {primary: "ui-icon-star"}
    }).click(function () {                      
      autoedit = !autoedit;

    }); 
```

工具栏中的此自定义按钮（星形图标）出现在错误的位置：太正确并与下一个按钮一起：

![从错误的位置开始](../Images/d38c2617836bd42a8b184c4bc171b0fc.png)

宽度也小于标准按钮，顶部对齐太大：

![按钮位置](../Images/1103b74a3c63fddfbb3427029aad64be.png)

如何制作像标准按钮一样的自定义按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T18:20:38.390

如果您需要使用更大的标准工具栏图标，我建议您在导航工具栏中使用[Font Awesome 图标](http://fortawesome.github.com/Font-Awesome/)，而不是标准的 jQuery UI 图标。我在[答案](https://stackoverflow.com/a/13865495/315935)中描述。

例如，如果我在旧演示中仅设置以下 CSS

```
.ui-jqgrid .ui-jqgrid-toppager { height:30px !important;}
.ui-jqgrid .ui-jqgrid-toppager .ui-pg-div>span { margin: 0 5px; font-size: 20px; } 
```

我可以在顶部工具栏中使用 20px 的图标。[该演示](http://www.ok-soft-gmbh.com/jqGrid/FortAwesome/FontAwesome2.htm)将显示以下结果

![在此处输入图像描述](../Images/6886e816675bb9ab4f5acf22f79be425.png)

[因为来自Font Awesome](http://fortawesome.github.com/Font-Awesome/)的所有图标都是作为矢量字体实现的，所以对于任何字体大小（图标大小）都可以获得完美的结果。需要将所有其他自定义解决方案（如可检查按钮）发布到 Font Awesome，但经过一些投资后，您可以获得非常好的最终结果。

# jquery - Jquery，不确定为什么动画高度不能按预期工作

> ID：15530451
> 
> 赞同：2
> 
> 时间：2013-03-20T17:20:24.300
> 
> 标签：jquery

我正在尝试使以下代码正常工作。

当用户滚动到点 x 时，菜单包装的高度会降低。他们可以通过单击 .extender 来恢复高度。单击此链接后，链接消失（因此没有切换功能）。

我看到切换往往是类似用例中的解决方案，理想情况下，我想知道如何解决这个问题，以及为什么我的代码不起作用。

```
$(document).scroll(function(){
    var height = $('div#zone-menu-wrapper').height();
    if (some_logic){
        $('div#zone-branding-wrapper').animate({height: 10}, 1500);
    }
});

$('.extender').click(function(){
    $('div#zone-branding-wrapper').animate({height: 380}, 1500);
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:27:15.367

如果动画已经在进行中，则返回。

```
 var inProgress = false;
$(document).scroll(function(){
    if(inProgress )return;
    var height = $('div#zone-menu-wrapper').height();
    if (some_logic){
      inProgress = true;
        $('div#zone-branding-wrapper').animate({height: 10}, 1500, function(){
                  inProgress = false;
        });
    }
});

$('.extender').click(function(){
    $('div#zone-branding-wrapper').animate({height: 380}, 1500);
    return false;
}); 
```

# maven - 如何阻止 Maven 程序集插件部署它创建的工件

> ID：15530453
> 
> 赞同：3
> 
> 时间：2013-03-20T17:21:01.133
> 
> 标签：maven, maven-3

我正在使用 maven 程序集插件使用以下配置将两个 jar 组合在一起：

```
<execution>
    <id>Package jar with dependencies</id>
    <phase>compile</phase>
    <goals>
        <goal>single</goal>
    </goals>
    <configuration>
        <descriptorRefs>
            <descriptorRef>jar-with-dependencies</descriptorRef>
        </descriptorRefs>
        <finalName>${project.artifactId}-${project.version}</finalName>
        <appendAssemblyId>false</appendAssemblyId>
    </configuration>
</execution> 
```

我不希望部署使用程序集插件创建的 JAR，如何阻止它被部署？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-20T17:41:15.640

您应该为程序集插件指定以下配置选项：

```
<configuration>
  ...
  <attach>false</attach>
  ...
</configuration> 
```

# c++ - 什么是“你好，世界！” “std::ref”的例子？

> ID：15530460
> 
> 赞同：77
> 
> 时间：2013-03-20T17:21:18.370
> 
> 标签：c++, c++11, std, ref

有人可以举一个简单的例子来演示它的功能`std::ref`吗？我的意思是一个例子，其中一些其他构造（如元组或数据类型模板）**仅在**没有它们就无法解释的情况下使用`std::ref`。

我发现了两个关于`std::ref` [这里](https://stackoverflow.com/questions/9582312/how-to-use-stdref)和[这里](https://stackoverflow.com/questions/11833070/when-is-the-use-of-stdref-necessary)的问题。但是在第一个中，它涉及编译器中的一个错误，而在第二个中，使用的示例`std::ref`不包含`std::ref`，它们涉及元组和数据类型模板，这使得对这些示例的理解变得复杂。

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2013-03-20T17:27:11.690

您应该考虑使用[`std::ref`](http://en.cppreference.com/w/cpp/utility/functional/ref)when 函数：

*   按值获取**模板参数**
*   复制/移动**模板参数**，例如[`std::bind`](http://en.cppreference.com/w/cpp/utility/functional/bind)或 的构造函数[`std::thread`](http://en.cppreference.com/w/cpp/thread/thread/thread)。

`std::ref`创建一个行为类似于引用的可复制值类型。

这个例子演示了使用`std::ref`.

```
#include <iostream>
#include <functional>
#include <thread>

void increment( int &x )
{
  ++x;
}

int main()
{
  int i = 0;

  // Here, we bind increment to a COPY of i...
  std::bind( increment, i ) ();
  //                        ^^ (...and invoke the resulting function object)

  // i is still 0, because the copy was incremented.
  std::cout << i << std::endl;

  // Now, we bind increment to std::ref(i)
  std::bind( increment, std::ref(i) ) ();
  // i has now been incremented.
  std::cout << i << std::endl;

  // The same applies for std::thread
  std::thread( increment, std::ref(i) ).join();
  std::cout << i << std::endl;
} 
```

输出：

```
0
1
2 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-20T17:29:25.557

```
void PrintNumber(int i) {...}

int n = 4;
std::function<void()> print1 = std::bind(&PrintNumber, n);
std::function<void()> print2 = std::bind(&PrintNumber, std::ref(n));

n = 5;

print1(); //prints 4
print2(); //prints 5 
```

`std::ref`主要用于在使用时封装引用`std::bind`（当然其他用途也是可以的）。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-03-10T17:27:22.977

您可能需要 std::ref 的另一个地方是将对象传递给您希望每个线程对单个对象而不是对象的副本进行操作的线程时。

```
int main(){
BoundedBuffer buffer(200);

std::thread c1(consumer, 0, std::ref(buffer));
std::thread c2(consumer, 1, std::ref(buffer));
std::thread c3(consumer, 2, std::ref(buffer));
std::thread p1(producer, 0, std::ref(buffer));
std::thread p2(producer, 1, std::ref(buffer));

c1.join();
c2.join();
c3.join();
p1.join();
p2.join();

return 0; } 
```

您希望在不同线程中运行的各种函数共享一个缓冲区对象。这个例子是从这个优秀的教程（[C++11 并发教程 - 第 3 部分：高级锁定和条件变量（Baptiste Wicht）](http://baptiste-wicht.com/posts/2012/04/c11-concurrency-tutorial-advanced-locking-and-condition-variables.html) ）中偷来的（希望我正确地做了归属）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-22T15:44:33.000

// 生产者消费者问题

```
#include <iostream>
#include <thread>
#include <mutex>
#include <deque>
#include <condition_variable>
using namespace std;

class Buffer {

    std::mutex m;
    std::condition_variable cv;
    std::deque<int> queue;
    const unsigned long size = 1000;

    public:
    void addNum(int num) {
        std::unique_lock<std::mutex> lock(m);
        cv.wait(lock, [this]() { return queue.size() <= size; });
        queue.push_back(num);
        cout << "Pushed " << num << endl;
        lock.unlock();
        cv.notify_all();
    }
    int removeNum() {
        std::unique_lock<std::mutex> lock(m);
        cv.wait(lock, [this]() { return queue.size()>0; });
        int num = queue.back();
        queue.pop_back();
        cout << "Poped " << num << endl;
        lock.unlock();
        cv.notify_all();
        return num;
    }

};

void producer(int val, Buffer& buf) {
    for(int i=0; i<val; ++i){
        buf.addNum(i);
    }
}

void consumer(int val, Buffer& buf){
    for(int i=0; i<val; ++i){
        buf.removeNum();
    }
}

int main() {
    Buffer b;
    std::thread t1(producer, 1000, std::ref(b));
    std::thread t2(consumer, 1000, std::ref(b));

    t1.join();
    t2.join();
    return 0;
} 
```

`Buffer`只是在 main 中使用 std::ref 的另一种用法，同时在生产者和消费者中传递对象作为引用。如果`std::ref`不使用，则此代码将无法编译。

# sql-server-2008 - TSQL 将总和转换为金钱

> ID：15530466
> 
> 赞同：15
> 
> 时间：2013-03-20T17:21:31.653
> 
> 标签：sql-server-2008, sum, currency

使用 SQL Server 2008，我试图让其中一些列返回为 $xxx,xxx.xx

这是我正在使用的查询（这个查询然后一些更新只是为了计算数字并`##tempshow`在最后选择）

```
SELECT 
    CASE GROUPING(s.StoreID) WHEN 1 THEN '' ELSE s.StoreID END [StoreID],
    CASE GROUPING(p.VendorID) WHEN 1 THEN '' ELSE p.VendorID END [VendorID],
    SUM(d.Quantity) AS [UnitSold],
    CAST(SUM(d.amount * d.quantity) AS DECIMAL(18,2)) AS Amount, 
    CAST(SUM(d.Discount) AS DECIMAL(18,2)) AS Discount,
    CAST(SUM((d.Amount * d.Quantity - d.Discount)) AS DECIMAL(18,2)) AS ExtSold,
    CAST(SUM(d.Cost * d.Quantity) AS DECIMAL(18,2)) AS Cost,
    CAST(0 AS DECIMAL(18,2)) AS Profit,
    CAST(0 AS DECIMAL(18,2)) AS OnHand,
    CAST(0 AS DECIMAL(18,2)) AS OnHandRetail,
    CAST(0 AS DECIMAL(18,2)) AS OnHandCost,
    CAST(0 AS DECIMAL(18,2)) AS ReceivedCost,
    CAST(0 AS DECIMAL(18,2)) AS ReceivedRetail,
    CAST(0 AS DECIMAL(18,2)) AS ReceivedQty,
    CAST(0 AS DECIMAL(18,2)) AS Margin,
    CAST(0 AS DECIMAL(12,2)) AS TurnOver,
    CAST(0 AS INTEGER) AS OnOrder 
INTO
    ##tempshow
FROM 
    RPTrs s,
    RPTrsd d,
    RPIv i,
    RPProducts p
WHERE 
    s.ReceiptNO = d.ReceiptNO and 
    s.StoreID = d.StoreID and 
    i.UPC = d.UPC and 
    i.StoreID = d.StoreID and 
    p.ProductID = i.IVProduct and 
    s.StoreID = '01' and
    s.TRSDate > GETDATE()-20 and 
    p.Service = 0 
GROUP BY 
    GROUPING SETS((s.StoreID,p.VendorID),()) 
```

哪个返回： ![在此处输入图像描述](../Images/0656723ceb269118b22a4eb42c54c9c8.png)

我试过了

`CAST(SUM(d.amount * d.quantity) AS MONEY) AS Amount,`

和

`SUM(CAST((d.amount * d.quantity) AS MONEY)) AS Amount,`

预期输出（加上与此列相同的其他列`Amount`）：

```
 |StoreID | VendorID | UnitSold | Amount
---------------------------------------------
1 | 01     | 0000     | 0        | $0.00
2 | 01     | am       | 62       | $6,275.00
3 | 01     | AO       | 58       | $18,964.00
4 | 01     | payless  | 6        | $1,383.36
5 |        |          | 126      | $26,622.36 
```

我需要`Amount, Discount, ExtSold, Cost, Profit, OnHandRetail, OnHandCost, ReceivedCost, ReceivedRetail`采用货币格式

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-20T17:47:05.720

这是应该在表示层上完成的事情，但是如果您需要在 sql 中执行此操作，您可以使用：

```
'$'+convert(varchar(50), CAST(amount as money), -1) amount 
```

这是一个例子：

```
;with cte (amount)
as
(
    select 123254578.00 union all
    select 99966.00 union all
    select 0.00 union all
    select 6275.00 union all 
    select 18964.00 union all 
    select 1383.36 union all
    select 26622.36
)
select '$'+convert(varchar(50), CAST(amount as money), -1) amount
from cte 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/d41d8/11314)。这将返回：

```
|          AMOUNT |
-------------------
| $123,254,578.00 |
|      $99,966.00 |
|           $0.00 |
|       $6,275.00 |
|      $18,964.00 |
|       $1,383.36 |
|      $26,622.36 | 
```

注意：这在 SQL Server 2012 中会容易得多，因为您可以使用[`FORMAT()`](http://msdn.microsoft.com/en-us/library/hh213505.aspx)

```
;with cte (amount)
as
(
    select 123254578.00 union all
    select 99966.00 union all
    select 0.00 union all
    select 6275.00 union all 
    select 18964.00 union all 
    select 1383.36 union all
    select 26622.36
)
select '$'+FORMAT(amount,'#,0.0000') amount
from cte 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!6/d41d8/3214)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-07-22T16:32:37.423

添加到 bluefeet 的答案，SQL 2012 中可用的 FORMAT 函数可以这样完成：

```
SELECT FORMAT(12345.6789, 'C', 'en-us') 
```

C 表示货币，最后一个参数是文化。如果您希望您的应用程序是多语言的，那么文化很重要，因为它会处理美元（或欧元）符号和千位分隔符之类的东西。例如：

```
SELECT 
FORMAT(12345.6789, 'C', 'en-us') as "USA", 
FORMAT(12345.6789, 'C', 'fr-ca') as "French Canada", 
FORMAT(12345.6789, 'C', 'fr-fr') as "French France",
FORMAT(12345.6789, 'C', 'hi-in') as "Hindi India" 
```

会给出这个结果：

```
USA            French Canada        French France     Hindi India
-----------    -------------        --------------    --------------
$12,345.68     12 345,68 $          12 345,68 €       ₹ 12,345.68 
```

# iphone - 从相机流中获取 RGB 数据

> ID：15530467
> 
> 赞同：1
> 
> 时间：2013-03-20T17:21:35.923
> 
> 标签：iphone, ios, objective-c, avfoundation

我`AVFoundation`在我的应用程序中使用框架

这是标准代码：

```
AVCaptureSession *session = [[AVCaptureSession alloc] init];
session.sessionPreset = AVCaptureSessionPresetHigh;

AVCaptureVideoPreviewLayer *captureVideoPreviewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:session];

captureVideoPreviewLayer.frame = self.preview.bounds;
[self.preview.layer addSublayer:captureVideoPreviewLayer];

AVCaptureDevice *device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];

AVCaptureDeviceInput *input = [AVCaptureDeviceInput deviceInputWithDevice:device error:nil];

[session addInput:input];

[session startRunning]; 
```

如何获取流 rgb 数据流或类似的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-07T08:10:22.730

从捕获会话或播放器会话中获取视频/音频数据缓冲区，

*   创建 AVCaptureVideoDataOutput / AVCaptureAudioDataOutput 对象。
*   确认您的一个到 AVCaptureVideoDataOutputSampleBufferDelegate。
*   将 AVCaptureVideoDataOutput 添加到 Capture/Player 会话。
*   实现协议方法。当在 AVCaptureVideoDataOutputSampleBufferDelegate 的 captureOutput... 方法中捕获/播放媒体时，您将收到包含视频/音频帧的 CMSampleBufferRef 对象。

CMSampleBufferRef 对象包含媒体帧数据、时间戳信息和媒体格式描述。您还可以在 AVCaptureVideoDataOutput.videoSettings 属性中指定所需的帧压缩格式（或未压缩的帧格式）。我猜你会收到 YUY2 或 JPEG 帧。所以你可以使用 CGImageRef 来转换为 RGB。

# ios - 在 iOS 中动态添加相互覆盖的按钮

> ID：15530471
> 
> 赞同：0
> 
> 时间：2013-03-20T17:21:52.800
> 
> 标签：ios, objective-c

我正在开发一个 iOS 应用程序（我的第一个应用程序 - 我已经做了很长时间的 .NET 开发人员）。

我正在设置一个动态添加的按钮 - 一切都很好，除了我试图创建的按钮相互覆盖。

关于如何动态添加按钮并更改其位置的任何想法？（在 ASP.NET 中，我会添加一个占位符和控件......但在 iOS 中，这不是一个选项）

代码：

```
UIButton btn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[btn addTarget: self action:@selector(loadQuestion:) forControlEvents:UIControlEventTouchUpInside;
[btn setTitle:@"My Button" forState:UIControlStateNormal];
btn.frame = CGRectMake(350.0,750.0,160.0,40.0);
[self.view addSubView:btn]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:28:18.240

不要对所有按钮使用相同**的 X 坐标**。请参阅下面的代码

```
-(void)addSixButtons{

  float xCord = 5.0;

   for(int itemIndex = 1; itemIndex < 7; itemIndex++){

     UIButton myButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
     [myButton addTarget: self action:@selector(loadQuestion:) forControlEvents:UIControlEventTouchUpInside;
     [myButton setTitle:@"My Button" forState:UIControlStateNormal];
     myButton.frame = CGRectMake(xCord,750.0,160.0,40.0);
     myButton.tag = itemIndex;
     [self.view addSubView:myButton];

     xCord += 165.0;
   }
}

-(void)loadQuestion:(id)sender{

   UIButton *btnClicked = (UIButton *)sender;

  switch(btnClicked.tag){

       case1:
        //clicked first button
        break;

      case2:
       //clicked second button
       break;

     default:
      break;
  }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:33:23.030

在这里，您的代码的问题是您为按钮指定了相同的框架`CGRectMake(350.0,750.0,160.0,40.0)`

如果要水平对齐，则需要更改按钮的 x 位置，如果要垂直对齐，则可以更改 y 位置。

在 iPhone 中，位置由 frame 指定`CGRectMake(x,y,width,height)`。因此，根据要求指定不同的 x 和 y 值，如果您使用循环，也可以增加该值。

# intuit-partner-platform - 如何从 QuickBooks for Window 通过 ItemType 过滤器下载项目

> ID：15530475
> 
> 赞同：0
> 
> 时间：2013-03-20T17:22:08.480
> 
> 标签：intuit-partner-platform

我想使用 Item type filter 从 Windows 的 Intuit 数据服务 (IDS) 下载项目。就像我如何查询（发布数据）以使用同步管理器和 IDS 从 QBDesktop 仅下载/检索库存和服务项目。

参考链接：[https ://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0500_QuickBooks_Windows/0600_Object_Reference/Item](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0500_QuickBooks_Windows/0600_Object_Reference/Item)

[https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0500_QuickBooks_Windows/0200_Key_Concepts/0200_Custom_Fields/Data_Services_Custom_Fields#Retrieving_and_Filtering_Objects_With_Custom_Fields](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0500_QuickBooks_Windows/0200_Key_Concepts/0200_Custom_Fields/Data_Services_Custom_Fields#Retrieving_and_Filtering_Objects_With_Custom_Fields)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:57:11.163

如果我理解您的要求，那么没有查询过滤器只会获取 type=service 或 type-in​​ventory 的项目，您需要全部查询并过滤您身边的数据。

API 的 v3 版本提供了简单查询语言，您可以在其中提供您所询问的查询，但 v3 目前仅针对外部合作伙伴处于早期测试阶段。

震动

# php - urlencode 和 urldecode 是否足以应对 URL 攻击

> ID：15530477
> 
> 赞同：0
> 
> 时间：2013-03-20T17:22:11.660
> 
> 标签：php, security, code-injection

当我创建 URL 时，首先`urlencode`是它们，当我从 URL 获取 $_GET 值时，首先我创建`urldecode($_GET['param'])`然后使用 URL 参数。

这是否足够或者我应该为 URL 注入黑客做更多的事情。

注意：我在get表单中输入的参数可以包含`'`字符。所以我不想`'`在任何情况下删除字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T18:25:39.343

据我所知，这不用于防止攻击。编码和解码只能确保服务器清楚地解释您的请求。就像，当您没有在地址栏中输入正确的 URL 地址时，您的浏览器会对您键入的任何内容进行编码并将其发送给谷歌。这样，谷歌服务器就知道哪些部分是数据，哪些部分不是。所以，如果攻击是可能的，我认为如果你以错误的方式使用客户端数据，它会得到你。

但这只是一种意见。尝试使用类似的东西：

```
$url = filter_var($_GET['param'], FILTER_SANITIZE_URL); 
```

这将确保返回的内容是正确的 url 或我认为的 NULL。不过只是我的看法。上面的代码假设您要确保解析的数据是一个 URL。

不过要小心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T18:48:55.980

不，对您的输入进行双 URL 解码（实际上是这样`urldecode($_GET['param'])`做的，因为其中的值`$_GET`已经被 URL 解码）并*不能*防止任何类型的注入攻击。毕竟，以下标识适用于所有字符串：

```
$string === urldecode( urlencode( $string ) ) 
```

因此，如果攻击者想要将*任何*字符串作为输入提供给您，他们需要做的就是解决您的额外问题`urldecode()`，只需对输入字符串进行 URL 编码。

* * *

在您想要包含在 URL 中的字符串上使用`urlencode()`（一次！）当然，无论如何都是正确的做法，因为它确保生成的 URL 格式正确并且其中的参数正确在填充`$_GET`数组时由 PHP 解码。*但是，URL 对任何内容进行两次*编码通常没有意义。

# asp.net-mvc-3 - 如何根据时区确定用户在网络上的文化？

> ID：15530479
> 
> 赞同：0
> 
> 时间：2013-03-20T17:22:13.807
> 
> 标签：asp.net-mvc-3, timezone, cultureinfo, datetime-format

新手来了 实际上，有史以来的第一个问题。

我一直在使用 NodaTime（在 ASP.Net MVC 3 C# 上）来绕过不同的时区，并且对结果非常满意。但是......我想知道是否有办法根据时区获取用户的文化信息 - 即：显示日期/时间。

提前感谢您的帮助！

**更新**

让我更清楚地说明这一点...

我可以使用 jsTimeZoneDetect 和 NodaTime 确定用户时区。它运行良好。现在，我需要找出用户区域设置信息（日期/时间格式等），以便能够正确显示这些信息。即：基于美国的用户将看到日期为 2013 年 3 月 21 日。

我试图从 Request.UserLanguages 获取语言环境但无济于事。IE 正确返回我的语言环境（en-GB），但 Firefox 和 Chrome 总是返回 en-US。我还更改了 web.config 并添加了以下元素：

```
<globalization culture="auto" uiCulture="auto" enableClientBasedCulture="true" /> 
```

这就是我一直在处理的代码：

```
var userLanguages = Request.UserLanguages;

CultureInfo ci;

if (userLanguages.Length > 0)
{
    try
    {
        ci = new CultureInfo(userLanguages[0]);
    }
    catch (CultureNotFoundException)
    {
        ci = CultureInfo.InvariantCulture;
    }
}
else
{
    ci = CultureInfo.InvariantCulture;
}

string cultureName = ci.Name /* Always returns en-US */ 
```

还有一点，要求用户选择他们的语言环境信息对我来说不是一个选项。即：网站上的 DropdownList 等。

有什么进一步的帮助吗？提前致谢。

**更新 2**

根据@JonSkeet 的建议，我更改了问题标题和标签以更好地适应我的问题。

**更新 3**

刚发现一件事。返回语言（区域设置）的方式取决于浏览器，如下所示：

*   Internet Explorer 返回在操作系统设置或浏览器设置上设置的语言。
*   Firefox、Chrome、Safari 和 Opera 返回浏览器设置中设置的语言。

考虑到这一点，我什至无法考虑使用这些信息，因为无法保证每个用户都会更改他们的浏览器设置。我可以依赖的唯一信息是来自操作系统设置的信息。

我不知道现在该做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:30:52.710

要回答所提出的问题，无论要求的澄清是什么......

在 1.0 中，我们没有任何可用的地理信息。在 1.1 中，我们公开了`zoneinfo.tab`将位置与包括国家/地区在内的每个时区（或至少大部分时区）相关联的信息。它没有提供完整的文化信息（例如，它不区分法语加拿大语和英语加拿大语，或瑞士使用的各种语言），但它给了你*一些*想法。您可以通过 访问信息[`TzdbDateTimeZoneSource.GeoLocations`](http://noda-time.googlecode.com/hg/docs/api/html/P_NodaTime_TimeZones_TzdbDateTimeZoneSource_GeoLocations.htm)。（仅适用于 TZDB。）

当然，1.1 还没有发布——但我们希望在接下来的几周内发布，几乎可以肯定没有任何大的 API 更改。

不过，我仍然建议通过 HTTP 请求正常检测文化。

# c# - 将 XML 嵌入 Excel 工作表

> ID：15530480
> 
> 赞同：1
> 
> 时间：2013-03-20T17:22:16.623
> 
> 标签：c#, xml, excel, ms-office, openxml

我确实有一个 XML 文件，其中包含几个计算值以及一个项目列表，例如：

```
<?xml version="1.0" encoding="utf-8"?>
<XmlContent>
  <Elements>
    <CreationDate>...</CreationDate>
    <Filename>....</Filename>
  </Elements>
  <PersonItems>
    <PersonItem>
      <FirstName>...</FirstName>
      <LastName>...</LastName>
      <Speed>...</Speed>
    </PersonItem>
    <PersonItem>
      <FirstName>...</FirstName>
      <LastName>...</LastName>
      <Speed>...</Speed>
    </PersonItem>
    [...]
  </PersonItems>
</XmlContent> 
```

现在应该使用 Excel 2007 OpenXmlFormat 在 Excel 工作表中显示这些值。计算值应映射到工作表中的特定单元格，同时`PersonItems`应绑定到同一工作表中的表。

有没有办法将 XML 文件嵌入到工作表包中，并将值绑定到适当的字段，方法是使用 c# Package API 作为`CustomXmlPart`?

[我在Channel9](http://channel9.msdn.com/blogs/rory/matthew-scott-application-development-using-the-open-xml-file-formats)上找到了一个示例，其中 Matthew Scott 使用[Word Content Control Toolkit](http://dbe.codeplex.com/)制作了与 Word 2007 类似的内容。但是，这仅适用于 Word。

Excel有类似的东西吗？

或者有没有更好的方法来解决这个任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T13:58:29.093

好吧，在研究和玩弄 XML 映射之后，我得出的结论是，没有“简单”的方法来实现我渴望做的事情。

在 Excel 应用程序中导入 XML 内容时，Excel 会创建一个 XML 映射定义并将其存储在包中。XML 内容本身将使用映射定义进行拆分，并合并到 Excel 文件的内容中。这意味着，XML 文件本身在导入后立即消失并且无法再使用。

但是，如您在上面的链接中所见，Word 2007+ 可能会出现这种情况。

也许这些信息对像我这样有类似任务的任何人都有帮助。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2016-08-19T18:52:54.923

最简单的方法是解析 xml 文件（SAX，DOM），获取相应的属性和值，然后将它们写入 excel 文件。

# java - 如何在两个线程之间来回切换

> ID：15530484
> 
> 赞同：1
> 
> 时间：2013-03-20T17:22:33.970
> 
> 标签：java, multithreading, synchronisation

我在两个不同的类中有两种方法，像这样

```
public class ClassX implements Runnable {

    public  void methodAandB() {
        for(int i=0;i<10;i++) {
            System.out.println("This is A and B ");
        }
    }
    @Override
    public void run() {
        methodAandB();
    }
} 
```

* * *

```
public class ClassY implements Runnable {

    public void methodAorB() {
        for(int i=0;i<10;i++) {
            System.out.println("This is A or B");
        }
    }

    @Override
    public void run() {
        methodAorB(a);
    }
} 
```

线程*t1*正在调用`methodAandB()`.

线程*t2*正在调用`methodAorB()`.

* * *

每次迭代方法中的循环后，我可以在这两个线程之间切换吗？

我想得到这样的输出：

> 这是A和B
> 
> 这是A或B
> 
> 这是A和B
> 
> 这是A或B
> 
> 这是A和B
> 
> 这是A或B
> 
> 这是A和B
> 
> 这是A或B

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-13T12:26:32.053

您可以简单地通过使用共享变量来实现这一点。我已经实施并验证了这个问题。代码如下

**X 级**

```
public class ClassX implements Runnable {
public  void methodAandB() {
    for(int i=0;i<10;i++) {
        while(GlobalClass.isClassXdone)
        {}
        System.out.println("This is A and B ");
        GlobalClass.isClassXdone = true;
        GlobalClass.isClassYdone = false;
}}
@Override
public void run() {
    methodAandB(); } } 
```

**Y 类**

```
public class ClassY implements Runnable {
public  void methodAorB() {
    for(int i=0;i<10;i++) {
         while(GlobalClass.isClassYdone)
         {}
        System.out.println("This is A or B ");
        GlobalClass.isClassYdone = true;
        GlobalClass.isClassXdone = false;}}
@Override
public void run() {
    methodAorB();}} 
```

**共享变量的定义**

```
public class GlobalClass {

public  static boolean isClassXdone = false ;
public  static boolean isClassYdone = false ;
} 
```

您可以使用 t1.start 和 t2.start 启动线程以获得所需的输出

```
 Thread t1 = new Thread(new ClassX());
    Thread t2 = new Thread(new ClassY());
    t1.start();
    t2.start(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-26T15:24:47.707

**线程之间触发器的最佳示例：**

给定两个 int 数组（偶数和奇数），2 个线程按自然顺序打印它们的数字。

```
package com.rough;

public class ThreadsBehaviour {

    static Object lock = new Object();

    public static void main(String[] args) throws InterruptedException {

        int a[] = {1,3,5,7,9};
        int b[] = {2,4,6,8,10};

        Thread odd = new Thread(new Looper(a, lock));
        Thread even = new Thread(new Looper(b, lock));

        odd.start();
        even.start();
    }

}

class Looper implements Runnable
{

    int a[];
    Object lock;

    public Looper(int a[], Object lock)
    {
        this.a = a;
        this.lock = lock;
    }
    @Override
    public void run() {

        for(int i = 0; i < a.length; i++)
        {
            synchronized(lock)
            {

                System.out.print(a[i]);
                try 
                {
                    lock.notify();
                    if(i == (a.length - 1))
                    {
                        break;
                    }
                    lock.wait();
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        }

    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T17:58:16.100

这可能超出了解决问题的需要，但是，由于它似乎是对并发编程练习的介绍，它应该与您将遇到的内容相一致。

您可能应该拥有两个线程都知道的共享对象，以便它们可以通过它进行同步。像这样：

```
public class MyMutex {
    private int whoGoes;
    private int howMany;

    public MyMutex(int first, int max) {
        whoGoes = first;
        howMany = max;
    }

    public synchronized int getWhoGoes() { return whoGoes; }

    public synchronized void switchTurns() {
        whoGoes = (whoGoes + 1) % howMany;
        notifyAll();
    }

    public synchronized void waitForMyTurn(int id) throws
            InterruptedException {
        while (whoGoes != id) { wait(); }
    }
} 
```

* * *

现在，您的类应该收到它们各自的标识符和这个共享对象。

```
public class ClassX implements Runnable {
    private final int MY_ID;
    private final MyMutex MUTEX;

    public ClassX(int id, MyMutex mutex) {
        MY_ID = id;
        MUTEX = mutex;
    }

    public void methodAandB() {
        for(int i = 0; i < 10; i++) {
            try {
                MUTEX.waitForMyTurn(MY_ID);
                System.out.println("This is A and B ");
                MUTEX.switchTurns();
            } catch (InterruptedException ex) {
                // Handle it...
            }
        }
    }
    @Override
    public void run() { methodAandB(); }
} 
```

`ClassY`应该做同样的事情。等待它的轮到，做它的动作，然后将轮到另一个让步。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-23T15:48:31.040

我知道现在回答这个问题有点晚了。但就在昨天，我才遇到这个问题。所以我想永远不会太晚.. ;)

正如@afsantos 提到的，解决方案是在两个线程之间拥有一个共享对象并在共享对象上实现互斥。共享对象可以由两个线程交替锁定。两种可能的实现方式如下。这实际上更像是@afsantos 解决方案的扩展。特此承认他的工作。

**解决方案 1**：将要共享的对象的蓝图如下。

```
public class MutEx {
    public int whoGoes, howMany;

    public MutEx(int whoGoes, int howMany) {
        this.whoGoes = whoGoes;
        this.howMany = howMany;
    }

    public synchronized void switchTurns(){
        this.whoGoes = (this.whoGoes + 1) % 2;
        notifyAll();
    }

    public synchronized void waitForTurn(int id) throws InterruptedException{
        while(this.whoGoes != id)
            wait();
    }
} 
```

然后，您可以按如下方式实现 ClassX。

```
public class ClassX implements Runnable {
    private final int MY_ID;
    private final MutEx MUT_EX;

    public ThreadOne(int MY_ID, MutEx MUT_EX) {
        this.MY_ID = MY_ID;
        this.MUT_EX = MUT_EX;
    }

    @Override
    public void run(){
        this.doTheWork();
    }

    public void doTheWork(){
        for(int i = 0; i < 10; i++){
            try {
                MUT_EX.waitForMyTurn(MY_ID);
                System.out.println("This is A and B");
                MUT_EX.switchTurns();
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }
} 
```

ClassY 也将是相同的，无论您需要有什么不同。然后，在调用中（即在 main 方法中），

```
public static void main(String[] args) {
    MutEx mutEx = new MutEx(0, 2);
    Thread t1 = new Thread(new ClassX(0, mutEx);
    Thread t2 = new Thread(new ClassY(1, mutEx));
    t1.start();
    t2.start();
} 
```

瞧！您有两个线程，根据需要在每个线程之间交替。

**解决方案 2**：或者，您可以按如下方式实现 ClassX 和 ClassY。

```
public class ClassX extends Thread{ 
```

在这里，您将子类化`java.lang.Thread`以实现您的要求。要调用它，请按如下方式更改 main 方法。

```
public static void main(String[] args) {
    MutEx mutEx = new MutEx(0, 2);
    ClassX t1 = new ClassX(0, mutEx);
    ClassY t2 = new ClassY(1, mutEx);
    t1.start();
    t2.start();
} 
```

运行这个，你会得到同样的结果。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-03-20T17:33:33.890

如果您不需要使用 Thread，请尝试以下代码：

```
for (int i = 0; i < 20; i++) {
    if (i % 2 == 0) {
        methodAandB();
    } else {
        methodAorB();
    }
} 
```

# c# - 如何使用 GDAL 读取 Terrasar-X 数据

> ID：15530485
> 
> 赞同：1
> 
> 时间：2013-03-20T17:22:38.443
> 
> 标签：c#, gdal, sar

题主问题。最近使用GDAL读取Terrasar—X数据，虚实部分之类的软件NEST让我很困惑。任何帮助和建议将不胜感激。以下是我的实现方法：

```
 string dataPath = @"E:\SARDATA\SampleData\TerraSar-X\SO_000009564_0002_1\SO_000009564_0002_1\TSX1_SAR__SSC______HS_S_SRA_20090223T204240_20090223T204241\TSX1_SAR__SSC______HS_S_SRA_20090223T204240_20090223T204241.xml";
        Gdal.AllRegister();
        Dataset dataset = Gdal.OpenShared(dataPath, Access.GA_ReadOnly);
        Band band = dataset.GetRasterBand(1);
        int xSize = band.XSize;
        int ySize = band.YSize;
        short[] realArray = new short[xSize * ySize];
        short[] imgArray = new short[xSize * ySize];
        if (band.DataType == DataType.GDT_CInt16)
        {
            short[] tmpArray = new short[2 * xSize * ySize];
            band.ReadRaster(0, 0, xSize, ySize, tmpArray, xSize, ySize, 0, 0);
            for (int i = 0; i < tmpArray.Length;i++ )
            {
                realArray[i] = tmpArray[i / 2];
                imgArray[i] = tmpArray[i / 2 + 1];
            }
            tmpArray = null;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-08T17:18:11.697

我想我有办法解决你的问题。我还尝试阅读复杂的 TerraSAR-X 并遇到了您的答案。

复杂文件格式将 CInt16 的两个 Int16 和 CInt32 的两个 Int32 合并。要正确读取复杂数据，您应该将 Integer 分成两个短裤。正确的阅读应该是这样的：

```
 string dataPath = @"E:\SARDATA\SampleData\TerraSar-X\SO_000009564_0002_1\SO_000009564_0002_1\TSX1_SAR__SSC______HS_S_SRA_20090223T204240_20090223T204241\TSX1_SAR__SSC______HS_S_SRA_20090223T204240_20090223T204241.xml";
    Gdal.AllRegister();
    Dataset dataset = Gdal.OpenShared(dataPath, Access.GA_ReadOnly);
    Band band = dataset.GetRasterBand(1);
    int xSize = band.XSize;
    int ySize = band.YSize;
    short[] realArray = new short[xSize * ySize];
    short[] imgArray = new short[xSize * ySize];
    if (band.DataType == DataType.GDT_CInt16)
    {
        short[] tmpArray = new short[xSize * ySize];
        band.ReadRaster(0, 0, xSize, ySize, tmpArray, xSize, ySize, 0, 0);
        for (int i = 0; i < tmpArray.Length;i++ )
        {
            int value = tmpArray[i];
            realArray[i] = (short)(value>>16);
            imgArray[i] =  (short)(value & 0xffff);
        }
        tmpArray = null;
    } 
```

# php - CodeIgniter Route rsegment() 重复结束值

> ID：15530486
> 
> 赞同：1
> 
> 时间：2013-03-20T17:22:38.417
> 
> 标签：php, regex, codeigniter, routing

使用 CodeIgniter 路由我有这个规则

```
$route['^(?!login|profile|signup|notification|member).*/(:num)/(:any)/(:any)'] = "home/$2/$0/$1/$3"; 
```

我的网址是这样的`http://example.com/memberfolder/7/view_document/WjbZpAPHM6`

所以基本上代码应该路由到`view_document()`home 类中的方法，并且`rsegment(5)`是 value`WjbZpAPHM6`

但是，当代码转到 home 类时，`rsegment(5)`值是`view_document`.

正如您在我的路由规则中看到的那样，我应该只有 5 个 rsegments，所以当我打印所有 rsegments 时，我得到了这个：

> 主页 view_document memberfolder 7 view_document WjbZpAPHM6

如您所见， my`rsegment(5)`是重复的或`rsegment(2)`. 即使我应该只有 5 个 rsegments，我的文档文件值`WjbZpAPHM6`也存储在`rsegment(6)`.

关于如何更正`rsegment(5)`为文档名称的值的任何建议，而不是`view_document`

另外，我`.htaccess`的也是这样：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /example/index.php/$1 [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T18:20:05.700

`(:any)`将匹配除*CI 3.0*`/`中的任何字符或将匹配*CI <= 2.1.3*中的任何字符*`/`*

 **因此，为了使其兼容两个版本，我们只需手动输入字符匹配，而不使用 CI 的简写语法，而是使用`[^/]+`. `:any`请注意，我们不放在括号中，因为我们不想创建反向引用。

此外，您不会`^`像 CI 那样自动将其放入。此外，您的反向引用错误。你不使用`$0`，你开始`$1`工作。我将它们更改为正确的数字。

* * *

你的路线应该是这样的：

```
$route['((?!login|profile|signup|notification|member)|member[^/]+)/(:num)/(:any)/(:any)'] = "home/$3/$1/$2/$4"; 
```

因此，对于以下 URL 示例：

`memberfolder/7/view_document/WjbZpAPHM6`

反向引用将是：

```
$1 = memberfolder
$2 = 7
$3 = view_document
$4 = WjbZpAPHM6 
```

现在构建您的请求：

`home/$3/$1/$2/$4`变成`home/view_document/memberfolder/7/WjbZpAPHM6`

制作以下 rsegments：

```
rsegment(1) = home
rsegment(2) = view_document
rsegment(3) = memberfolder
rsegment(4) = 7
rsegment(5) = WjbZpAPHM6 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:43:19.030

我对 CodeIgniter 了解不多，但我认为，你应该替换

```
$route['^(?!login|profile|signup|notification|member).*/(:num)/(:any)/(:any)'] = "home/$2/$0/$1/$3"; 
```

有了这个

```
$route['^(?!login|profile|signup|notification|member).*/(:num)/(:any)/(:any)'] = 'home/$2/$0/$1/$3'; 
```**

# python - RESTful API 和谷歌分析

> ID：15530487
> 
> 赞同：13
> 
> 时间：2013-03-20T17:22:38.813
> 
> 标签：python, rest, google-analytics, flask

我正在使用 Python ( [Flask ) 运行](http://flask.pocoo.org/)*RESTful API*。

我希望能够跟踪：

*   提出了哪些请求
*   这些请求是什么时候发生的
*   发送响应需要多长时间

我想为此使用*Google Analytics*，因为它有很好的仪表板和扩展功能。

### 我的问题

如何在 REST API 中实现 Google Analytics？
或者有人知道可以实现的另一个工具/库吗？

这是我目前发现的：

*   使用 MongoDB的[跟踪应用程序](https://github.com/elasticsales/flask-tracking)
*   [Google 数据 API](https://code.google.com/p/gdata-python-client/) - 但这是用于读取 GA 数据，而不是跟踪 API ？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-21T00:45:09.443

实际上有两种方法可以将服务器端数据发送到 Google Analytics。标准方法是 GIF 图片请求 API，它与 ga.js 在客户端使用的 API 相同。Google 已经开始开发一种新的 REST API，称为 Measurement Protocol，但这只是开发者预览版。

**服务器端 GA**

尝试将服务器端数据发送到 GA 时需要解决一些问题。

就像@mehaase 上面指出的那样，gif API 从请求中获取 IP 地址，因此您的所有服务器端请求都将显示为来自您服务器位置的用户。测量协议[也不允许您更改请求的 ip](https://groups.google.com/forum/?fromgroups=#!searchin/google-analytics-measurement-protocol/location/google-analytics-measurement-protocol/8TAp7_I1uTk/AabMj0G0OBsJ)。我将在这个答案中假设公开可用的 gif API。

另一个问题是 gif 端点需要客户端 cookie。您可以在每个请求上伪造此 cookie，但这会导致每个事件看起来像一个新访问者。只要您将服务器端 API 和网站保存在单独的 Google Analytics（分析）配置文件中，就可以了。

另请注意，一旦您发送活动，Google 最多可能需要一个小时来显示您的活动。这会使调试有点痛苦，所以请耐心等待。

[以下是 GA cookie 中每个变量的含义](http://www.tutkiun.com/2011/04/a-google-analytics-cookie-explained.html)的细分，以及将服务器端数据发送到 GA 的一个[很好的 node.js 示例。](https://github.com/jgallen23/node-ga/blob/master/lib/ga.js#L26)

**其他事件跟踪选项**

尽管 GA 非常适合跟踪网站指标，但它并不是为跟踪服务器端事件而构建的。一类称为事件跟踪的分析是用于静态 API 使用跟踪的完美应用程序。

API 通常如下所示：

```
analytics.track('API Response', {
    method  : 'POST',
    endpoint: '/comments'
    duration: 124
    status  : 500
}); 
```

并让您查看有关每个事件和事件属性的频率和分布的报告 您可以回答以下问题：今天发生了多少 /comments API 调用？200有多少？有多少响应高于 200 毫秒？等等

以下是一些可以帮助您执行此操作的事件跟踪工具：

1.  [混合面板](http://mixpanel.com)
2.  [KissMetrics](http://kissmetrics.com)
3.  [敏锐.IO](http://keen.io)

我是[Segment.io](https://segment.io)的联合创始人，该公司为客户端、服务器端和移动分析提供简单的 API。我们允许您从 python、php、ruby、node、java、.net、javascript 和 iOS 发送数据，我们会将其转发到 Google Analytics、Mixpanel、KissMetrics、Keen.IO 或我们任何其他支持的服务，无需你必须学习他们的 API。

最后，这是我们[分析学院](https://segment.io/academy/how-to-use-event-tracking)的一篇文章，解释了为什么事件跟踪很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-12T19:38:49.390

我知道这是很老的帖子。我在 Python 中遇到了谷歌分析支持

[https://developers.google.com/api-client-library/python/apis/analytics/v3](https://developers.google.com/api-client-library/python/apis/analytics/v3)

认为这也是记录的正确地方（y）

# node.js - 有没有办法使用 Node/Express 2.x 检查发送的标头？

> ID：15530491
> 
> 赞同：2
> 
> 时间：2013-03-20T17:22:46.557
> 
> 标签：node.js, header, stream, express

有没有办法检查使用 node/express 2.x 发送了哪些特定的标头？

我的文件下载在大多数情况下都能完美运行，但在某些特定情况下，我在 Chrome 中遇到错误（节点中没有错误）：

```
Duplicate headers received from server
The response from the server contained duplicate headers. This problem is generally the result of a misconfigured website or proxy. Only the website or proxy administrator can fix this issue.
Error 349 (net::ERR_RESPONSE_HEADERS_MULTIPLE_CONTENT_DISPOSITION): Multiple distinct Content-Disposition headers received. This is disallowed to protect against HTTP response splitting attacks. 
```

出于测试目的，我想查看是否已发送特定标头，有没有办法使用 node.js 执行此操作？

* * *

...而且因为有人会问我用于设置标头的代码，所以我将流作为下载管道，并且只在一个位置设置标头。

```
res.setHeader('Content-disposition', 'attachment; filename=' + filename)
res.setHeader('Content-Length', stats.size)
res.setHeader('Content-type', 'application/pdf')

stream.pipe(res) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-25T13:53:07.507

HTTP 响应是一个`WritableStream`. 当流关闭时，会发出[完成](http://nodejs.org/api/stream.html#stream_event_finish)事件。因此，听它就可以了：

```
res.on('finish', function() {
    console.log(res._headers);
}); 
```

灵活得多。可以放在中间件或资源处理程序中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T20:52:06.893

正如@generalhenry 在我的问题评论中所说：

```
stream.pipe(res).on('end', function () {
  console.log(res._headers); 
}); 
```

上面的行对我有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-12T21:31:53.780

```
res.set("Content-disposition", "attachment; filename=\""+file.name+"\"") 
```

这对我有用。

# c# - 在 Xamarin 中绑定 iOS 委托时出错

> ID：15530494
> 
> 赞同：0
> 
> 时间：2013-03-20T17:22:54.830
> 
> 标签：c#, ios, objective-c, binding, xamarin

我正在尝试将 TapForTap iOS SDK 移植到我的 Monotouch C# 应用程序。

使用文档和绑定生成器，我创建了以下绑定 ApiDefintion：

```
namespace TapForTap {

[BaseType (typeof (NSObject))]
interface TapForTap {
    [...]
    [Static]
    [Export ("initializeWithAPIKey:")]
    void InitializeWithAPIKey (string key);
}

[BaseType (typeof (NSObject))]
[Model]
interface TapForTapAdViewDelegate {
    [Abstract]
    [Export ("rootViewController")]
    UIViewController RootViewController ();

    [...]
}

[BaseType (typeof (UIView))]
interface TapForTapAdView {
    [Static]
    [Export ("initWithFrame:delegate:")]
    NSObject Init (RectangleF frame, TapForTapAdViewDelegate d);

    [Export ("loadAds")]
    void LoadAds ();

    [Export ("stopLoadingAds")]
    void StopLoadingAds ();

            [...]
}
} 
```

在我的项目中，我创建了一个实现 TapForTapAdViewDelegate 的类 TapForTapDelegate。

```
public partial class TapForTapAdDelegate : TapForTapAdViewDelegate {
    public override UIViewController RootViewController () {
        return Application.mainViewController;
    }

    [...]
} 
```

问题是我真的不确定我是否正确实现了 initWithFrame:delegate: 函数。

每当我尝试使用以下代码时，我都会得到`NSInvalidArgumentException Reason: +[TapForTapAdView initWithFrame:delegate:]: unrecognized selector sent to class 0x36dac4`

```
bannerAd = (TapForTapAdView) TapForTapAdView.Init (new System.Drawing.RectangleF(0, y, 320, 50), new TapForTapAdDelegate()); 
```

我究竟做错了什么？我已经尝试了几个小时，但没有找到任何解决方案。我习惯了 Java，而不是 C# 和 Objective-C ;)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T23:17:32.777

问题是 init* 方法被绑定为 C# 构造函数。

试试这个：

```
[BaseType (typeof (UIView))]
interface TapForTapAdView {
    [Export ("initWithFrame:delegate:")]
    IntPtr Constructor (RectangleF frame, TapForTapAdViewDelegate d);

    ...
} 
```

[这](http://docs.xamarin.com/guides/ios/advanced_topics/binding_objective-c_libraries)是有关如何在 Xamarin.iOS 中绑定 Objective-C 库的更多文档。特别是参见第[3.3 节绑定构造函数](http://docs.xamarin.com/guides/ios/advanced_topics/binding_objective-c_libraries#3.3.binding-constructors)。

# ios - 如何在 viewForHeaderInSection 的 tableview 中动态更改标题标题？

> ID：15530498
> 
> 赞同：-1
> 
> 时间：2013-03-20T17:23:06.683
> 
> 标签：ios, objective-c, uitableview

我需要在 tableview 标题中设置标题名称。我在代码中使用它

```
- (UIView *) tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section  function
{
   IView *headerView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, tableView.bounds.size.width, 30)];
    UILabel *lbl_header = [[UILabel alloc]initWithFrame:CGRectMake(12, 0, tableView.bounds.size.width, 30)];
    lbl_header.tag=1000001;
    lbl_header.backgroundColor = [UIColor clearColor];
    lbl_header.textColor = [UIColor colorWithRed:204.0/255 green:204.0/255 blue:204.0/255 alpha:1.0];
    lbl_header.font = [UIFont fontWithName:@"Helvetica-Regular" size:20];

    ////  get the title name from subclass view controller 

    HOAViewController *obj_hoaview_controll = [[HOAViewController alloc]init];
    [obj_hoaview_controll fun_get_login_email_id];

    lbl_header.text = str_email_id1;//[udf_value objectForKey:@"StrEmailGet"];

    if (section == 0)
    {
         [headerView setBackgroundColor:[UIColor colorWithRed:102.0/255 green:102.0/255 blue:102.0/255 alpha:1.0]];
        //lbl_header.text = [udf_value objectForKey:@"StrEmailGet"];
    }
    else
    {
         [headerView setBackgroundColor:[UIColor clearColor]];
    }
    [headerView addSubview:lbl_header];
    return headerView;
} 
```

谢谢您的回复....

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T17:27:20.843

使用来自 UITableViewDataSource 协议的[titleForHeaderInSection](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40006941-CH3-SW13)。确保这`numberOfSectionsInTableView`也得到了很好的实施。

**样本：**

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
   if (section == 0)
    return @"Title1";
   else if (section == 1)
    return @"Title2";
} 
```

# batch-file - 批量德语符号

> ID：15530504
> 
> 赞同：2
> 
> 时间：2013-03-20T17:23:27.713
> 
> 标签：batch-file, symbols

我需要能够将德语符号输出到控制台上，它必须从 txt 文件中读取。目前，每当我尝试使用批处理文件为 exmpale 输出 ä 时，它都会返回带有 ~ 的 o。我需要做什么？

提前致谢

编辑：我已经尝试使用 chcp 1252 并且它似乎没有改变任何东西，它仍然返回与上面提到的相同的字符

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:29:43.047

您可能需要更改代码页。我刚刚用 just 写了一个小批处理文件，`echo ä`遇到了你提到的同样的问题。添加`chcp 1252`并回显了正确的字符。

```
chcp 1252
echo ä 
```

从这里得到这个想法： [http ://www.robvanderwoude.com/type.php#Unicode](http://www.robvanderwoude.com/type.php#Unicode)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T22:04:33.647

一种方法是在代码页 1252 处于活动状态时定义突变/变音符号并切换回 850。

```
@echo off
chcp 1252 > nul
set ae=ä
set oe=ö
set ue=ü
set sz=ß
chcp 850 > nul
echo %ae% %oe% %ue% %sz% 
```

或者您使用支持代码页 850（如 notepad++）的编辑器编辑批处理文件。然后你可以直接插入突变。

# c++ - QueryPerformanceCounter 运行时错误

> ID：15530507
> 
> 赞同：0
> 
> 时间：2013-03-20T17:23:35.217
> 
> 标签：c++, performancecounter

嘿，我正在使用 QueryPerformanceCounter 来计算函数需要多长时间（以毫秒为单位），但我收到了这个运行时错误：

```
Run-Time Check Failure #2 - Stack around variable 'time1' is corrupted. 
```

我已经搜索并尝试了一切，但我无法弄清楚这个错误。有谁能够帮我？这是它发生的代码：7

```
void print()
{
    unsigned long int time1 = 0;
    unsigned long int time2 = 0;
    QueryPerformanceCounter((LARGE_INTEGER*)&time1);
    //Loop through the elements in the array.
    for(int index = 0; index < num_elements; index++)
    {
        //Print out the array index and the arrays elements.
        cout <<"Index: " << index << "\tElement: " << m_array[index]<<endl;
    }
    //Prints out the number of elements and the size of the array.
    cout<< "\nNumber of elements: " << num_elements;
    cout<< "\nSize of the array: " << size << "\n";

    QueryPerformanceCounter((LARGE_INTEGER*)&time2);
    cout << "\nTime Taken : " << time1 - time2 <<endl;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:25:33.527

问题就在这里`QueryPerformanceCounter((LARGE_INTEGER*)&time1);`

`unsigned long int`将其地址传递给 时不要使用`QueryPerformanceCounter`。

`unsigned long int`只保证至少 32 位。

使用 64 位变量

```
#include <cstdint>    // + include this
int64_t 
```

或者

```
long long int 
```

# git - 如何推送到 github 上的拉取请求？

> ID：15530510
> 
> 赞同：49
> 
> 时间：2013-03-20T17:23:39.013
> 
> 标签：git, github, pull-request

我已将此添加到我的`.git/config`文件中：

```
fetch = +refs/pull/*/head:refs/remotes/origin/pr/* 
```

这允许我下拉拉取请求差异，但是当我检查它时，它实际上创建了一个具有相同名称的分支。有什么方法可以让我推送`pr/2`并让它真正进入拉取请求，而不是去一个名为的新分支`pr/2`？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-04-18T16:10:19.800

拉取请求只是合并某个分支的请求。这意味着在拉取请求打开后对分支所做的提交将包含在最终的合并中。

如果您有权访问拉取请求要求合并的分支，则可以提交到该分支，拉取请求将随着更改而更新。

例子：

pull/3 请求合并`hotfix`到`master`

```
git fetch
git checkout hotfix
git pull origin hotfix 
```

*做出改变*

```
git add .
git commit -m "changes!"
git push origin hotfix 
```

现在您的提交将显示在拉取请求中。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2017-04-27T17:26:09.067

这是 GitHub 对拉取请求的“通过命令行合并”说明（我很正派，另一个人是 ospr）：

第 1 步：从您的项目存储库中，签出一个新分支并测试更改。

```
git checkout -b ospr-image-rendering master
git pull https://github.com/ospr/FDWaveformView.git image-rendering 
```

第 2 步：在 GitHub 上合并更改和更新。

```
git checkout master
git merge --no-ff ospr-image-rendering
git push origin master 
```

* * *

这是将您的更改发送回上游（？）到 PR 发起者的附加步骤。

```
git push https://github.com/ospr/FDWaveformView.git ospr-image-rendering:image-rendering 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-05-13T20:12:22.997

好问题。但如果你可以的话，我会感到惊讶：

```
$ cat .git/refs/pull/upstream/839 
f8a9f492098e154b4a8258a941af47c9ca017ada 
```

即使您可以以某种方式将引用更改为您喜欢的内容，github 也有您无法轻易更改的其他元数据。所以更好地推送到分支 pull 是从创建的。

```
$ git push git@github.com:owner/repo.git HEAD:target-branch 
```

请参阅 github 命令行包装器以更轻松地从命令行进行 github 交互： [https ://hub.github.com/](https://hub.github.com/)

总结：如果你推送到 PR 所基于的分支/分支，你可以推送到现有的拉取请求。这通常取决于 repo 设置。

git push git@github.com:username/repo-name.git localbranchname:remotebranchname

```
or if you have the fork added as a `remote` in your local repo, then: 
```

git push 远程名称本地分支名称：远程分支名称

 `* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-08T05:34:01.550

如果您尝试将更改合并到您签出的 PR，GitHub 桌面客户端将创建另一个拉取请求 (PR)，其中包括原始 PR 和您的更改。

我在我的主分支上做了这个，但大概你可以创建另一个分支，然后为拉取请求创建一个拉取请求。尽管这些花哨的 Git GUI 对我来说都是神奇的。`

# list - 如何在 Haskell 列表的第 n 个元素中设置值？

> ID：15530511
> 
> 赞同：14
> 
> 时间：2013-03-20T17:23:39.023
> 
> 标签：list, haskell

我知道这`xs !! n`给了我列表中的第 n 个元素，但我不知道如何编辑该列表中的第 n 个元素。您能告诉我如何编辑列表中的第 n 个元素或至少给出提示吗？

例如，我怎样才能使第二个元素`'a'`在`'e'`这个：`['s','t','a','c','k']`？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-20T18:30:11.190

## 更改第 n 个元素

许多语言中的常见操作是分配给数组中的索引位置。在 python 中，你可能：

```
>>> a = [1,2,3,4,5]
>>> a[3] = 9
>>> a
[1, 2, 3, 9, 5] 
```

[镜头](http://hackage.haskell.org/package/lens)包为操作员提供 了此功能`(.~)`。尽管与 python 不同，原始列表没有发生突变，而是返回了一个新列表。

```
> let a = [1,2,3,4,5]
> a & element 3 .~ 9
[1,2,3,9,5]
> a
[1,2,3,4,5] 
```

`element 3 .~ 9`只是一个函数，而`(&)`操作符是 [镜头](http://hackage.haskell.org/package/lens)包的一部分，只是反向函数应用程序。这里是更常见的功能应用。

```
> (element 3 .~ 9) [1,2,3,4,5]
[1,2,3,9,5] 
```

对于 s 的任意嵌套，赋值再次工作得很好`Traversable`。

```
> [[1,2,3],[4,5,6]] & element 0 . element 1 .~ 9
[[1,9,3],[4,5,6]] 
```

或者

```
> set (element 3) 9 [1,2,3,4,5,6,7] 
```

或者，如果您想影响多个元素，您可以使用：

```
> over (elements (>3)) (const 99) [1,2,3,4,5,6,7]
> [1,2,3,4,99,99,99] 
```

## 使用列表以外的类型

然而，这不仅限于列表，它适用于作为[Traversable](http://hackage.haskell.org/package/lens-4.1.2/docs/Control-Lens-Traversal.html#t%3aTraversable)类型类实例的任何数据类型。

例如，相同的技术适用于标准 [容器](http://hackage.haskell.org/package/containers)包的[树。](http://hackage.haskell.org/package/containers-0.5.5.1/docs/Data-Tree.html)

```
 > import Data.Tree
 > :{
 let
  tree = Node 1 [
       Node 2 [Node 4[], Node 5 []]
     , Node 3 [Node 6 [], Node 7 []]
     ]
 :}
> putStrLn . drawTree . fmap show $ tree
1
|
+- 2
|  |
|  +- 4
|  |
|  `- 5
|
`- 3
   |
   +- 6
   |
   `- 7
> putStrLn . drawTree . fmap show $ tree & element 1 .~ 99
1
|
+- 99
|  |
|  +- 4
|  |
|  `- 5
|
`- 3
   |
   +- 6
   |
   `- 7
> putStrLn . drawTree . fmap show $ tree & element 3 .~ 99
1
|
+- 2
|  |
|  +- 4
|  |
|  `- 99
|
`- 3
   |
   +- 6
   |
   `- 7
> putStrLn . drawTree . fmap show $ over (elements (>3)) (const 99) tree
1
|
+- 2
|  |
|  +- 4
|  |
|  `- 5
|
`- 99
   |
   +- 99
   |
   `- 99 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-20T17:36:14.167

因为 Haskell 是一种函数式语言，你不能“编辑”列表中的元素，因为一切都是不可变的。相反，您可以使用以下内容创建一个新列表：

```
take n xs ++ [newElement] ++ drop (n + 1) xs 
```

但是，在 Haskell 中不建议这样做。有关更多信息，您可以查看这篇文章：[Haskell replace element in list](https://stackoverflow.com/questions/10133361/haskell-replace-element-in-list)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-03-20T17:34:19.530

您不能编辑列表的第 n 个元素，值是不可变的。您必须创建一个新列表。但由于不可变性，它可以与原始列表共享更改元素之后的部分。

因此，如果您想对列表的第 n 个元素应用转换（并且前后部分相同），则需要三个部分

*   有问题的元素之前的列表的前面，比如说`front`
*   有问题的元素，说`element`
*   在有问题的元素之后的列表后面，比如说`back`.

然后你会组装零件

```
front ++ transform element : back 
```

所以仍然需要以一种很好的方式抓住有趣的部分。

```
splitAt :: Int -> [a] -> ([a],[a]) 
```

这样做，`splitAt idx list`返回列表的第一部分，在索引之前`idx`作为对的第一个组成部分，其余部分作为第二个组成部分，所以

```
changeNthElement :: Int -> (a -> a) -> [a] -> [a]
changeNthElement idx transform list
    | idx < 0   = list
    | otherwise = case spliAt idx list of
                    (front, element:back) -> front ++ transform element : back
                    _ -> list    -- if the list doesn't have an element at index idx 
```

（注：我已经从0开始计数元素，如果要从1开始计数，需要调整和使用`idx-1`。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-02-24T16:49:45.937

我很惊讶以下方法尚未提及，因此我将添加它以供进一步参考：

```
replace index elem = map (\(index', elem') -> if index' == index then elem else elem') . zip [0..]

> replace 2 'e' "stack"
"steck" 
```

它处理超出范围索引的情况。

```
> replace (-1) 'z' "abc"
"abc"
> replace 0 'z' "abc"
"zbc"
> replace 2 'z' "abc"
"abz"
> replace 3 'z' "abc"
"abc" 
```

它并不比 splitAt 方法（ O(2N) ）慢。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-25T18:39:25.857

也有可能编写**一个简单的递归解决方案**。

基本思想是，为了替换列表中的元素#5，您只需替换该列表*尾部*的元素#4。

使用@DanielFisher 的答案中的符号，这给出了以下代码：

```
changeNthElement :: Int -> (a -> a) -> [a] -> [a]
changeNthElement n fn   []    =  []   -- nothing to change
changeNthElement n fn (x:xs)
    |  (n < 0)    =  x:xs             -- no change for a negative index
    |  (n == 0)   =  (fn x) : xs                          -- easy case
    |  otherwise  =  x : (changeNthElement (n-1) fn xs)   -- recursion 
```

如果新值不依赖于旧值，则可以特化上述函数：

```
setNthElement :: Int -> a  -> [a] -> [a]
setNthElement n v xs = changeNthElement n (const v) xs 
```

**测试：**

```
$ ghci
 GHCi, version 8.8.4: https://www.haskell.org/ghc/  :? for help
 ...
 λ> 
 λ> :load q15530511.hs
 [1 of 1] Compiling Main             ( q15530511.hs, interpreted )
 Ok, one module loaded.
 λ> 
 λ> xs = replicate 10 7
 λ> 
 λ> xs
 [7,7,7,7,7,7,7,7,7,7]
 λ> 
 λ> changeNthElement  3 (+2) xs
 [7,7,7,9,7,7,7,7,7,7]
 λ> 
 λ> setNthElement 2 42 xs
 [7,7,42,7,7,7,7,7,7,7]
 λ> 
```

# c++ - 模板和不透明指针是否在继承上不兼容？

> ID：15530512
> 
> 赞同：0
> 
> 时间：2013-03-20T17:23:44.350
> 
> 标签：c++, templates, opaque-pointers

几乎所有问题都在问题中，但是有什么方法可以通过使用带有模板类的不透明 ptr 来获得封装？（我的直觉是“不”，因为编译器必须在编译时了解所有内容）

像这样的东西，MyClass 应该通过静态库公开，而 MyClassImp 是隐藏的。

```
//MyClass.h
template <typename T> MyClassImp;

template <typename T> MyClass
{
 public:
     MyClass();
     void Foo();
 private:
     MyClassImp<T>* impl;
}
//MyClassImp.h
template <typename T> MyClassImp
{
 public:
     MyClassImp() {}
     void Foo() {/*proprietary/complex stuff I want to hide*/}
}
//MyClass.cpp
template <typename T>
MyClass::MyClass()
{
     impl = new MyClassImp();
}
template <typename T>
void MyClass::Foo() { impl->Foo(); } 
```

这不起作用，因为隐藏在 .cpp 文件中的 MyClass::Foo 如果不包含 MyClassImp 的定义就无法公开，因此您会收到函数丢失错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:28:42.210

他们没有理由不兼容。编译器需要知道的是有一个指针，`*`类型旁边的那个小点就说明了这一点。您的代码片段虽然有很多错误。尝试编译这个：

```
template <typename T> class MyClassImp;

template <typename T> class MyClass
{
 private:
     MyClassImp<T>* impl;
};

int main()
{
    MyClass<int> a;
    return 0;
} 
```

注意`class`定义模板时的关键字和`;`定义后的关键字。如果你尝试过，你就会知道。你可以编译上面的代码：

```
g++ -std=c++98 -pedantic -Wall -Wextra a.cpp 
```

你得到的唯一警告`a`是未使用。

# php - 如何使用php关闭评论中的标签

> ID：15530514
> 
> 赞同：0
> 
> 时间：2013-03-20T17:23:54.070
> 
> 标签：php

在我的应用程序中，人们正在发布评论，有时用户没有关闭标签，因此它破坏了我的所有布局。

我允许用户发布 html 评论。

例如，他们以这种方式发布：

```
<center><b>Hello 
```

所以我想要的是关闭它的标签并以这种方式制作：

```
<center><b>Hello</b></center> 
```

我在谷歌上搜索但没有找到好的解决方案，所以我在这里。

我试过这个方法，但它不起作用。

```
$yourText = $row['content'];

$doc = new DOMDocument();
$doc->loadHTML("$yourText");
$yourText = $doc->saveHTML(); 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:26:16.680

您可能正在寻找[HTML Tidy](http://php.net/manual/en/book.tidy.php)。

```
<?php
ob_start();
?>
<html>a html document</html>
<?php
$html = ob_get_clean();

// Specify configuration
$config = array(
           'indent'         => true,
           'output-xhtml'   => true,
           'wrap'           => 200);

// Tidy
$tidy = new tidy;
$tidy->parseString($html, $config, 'utf8');
$tidy->cleanRepair();

// Output
echo $tidy;
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T17:31:58.997

您可以使用此功能关闭内容中所有打开的 HTML 标记：

```
function closeHtmlTags($html) {

    preg_match_all('#<(?!meta|img|br|hr|input\b)\b([a-z]+)(?: .*)?(?<![/|/ ])>#iU', $html, $result);
    $openedtags = $result[1];
    preg_match_all('#</([a-z]+)>#iU', $html, $result);
    $closedtags = $result[1];
    $len_opened = count($openedtags);

    if (count($closedtags) == $len_opened) {
        return $html;
    }
    $openedtags = array_reverse($openedtags);

    for ($i=0; $i < $len_opened; $i++) {
        if (!in_array($openedtags[$i], $closedtags)) {
            $html .= '</'.$openedtags[$i].'>';
        } else {
            unset($closedtags[array_search($openedtags[$i], $closedtags)]);
        }
    }

    return $html;
} 
```

只需致电：

```
$content = closeHtmlTags($content); 
```

这将返回所有 HTML 标记关闭的内容。

您也可以使用 PHP 扩展`php_tidy`

```
$tidy = new Tidy();
$content = $tidy->repairString($str, array(
    'output-xml' => true,
    'input-xml' => true
)); 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T17:28:38.217

您可以搜索打开标签的数量，然后搜索结束标签的数量并确保该数字匹配 - 如果它不提交并让用户知道。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T17:29:41.787

最简单和最干燥的方法是这样的：

```
$yourText = $row['content'];

$doc = new DOMDocument();
$doc->loadHTML("$yourText");
$otherText = $doc->saveHTML();

if(!empty($otherText)){
    //the usertext was good html
}else{
    $yourText = strip_tags($yourText);
} 
```

但你最终可能会接受一些严重的 XXS 注射！！！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T17:26:07.637

不允许用户发布 HTML！他们可以修改您的网站，添加 Javascript，做任何他们想做的事情。

确保删除 HTML 格式[`strip_tags()`](http://php.net/manual/en/function.strip-tags.php)

# jquery - JQuery 每个元素滑动单个项目

> ID：15530524
> 
> 赞同：0
> 
> 时间：2013-03-20T17:24:28.870
> 
> 标签：jquery, slidetoggle

我正在编写一个 jQuery 代码，它在悬停时在子 div 中滑动。因为我在该类下有几个子元素，所以在悬停任何父元素时存在一个问题，即使对于尚未悬停的元素，所有子元素也会显示。当父元素悬停时，我想滑动包含文本的 div。我的示例代码在这里，小提琴在[这里](http://jsfiddle.net/ndfWm/)

CSS在这里

```
.artistAndVideo {
    background-color: black;
    display: none;
    color: white;
    bottom: 0px;
    position: absolute;
    margin-bottom: 6px;
    width: 211px;
    text-align: center;
    height: 40px;
    opacity:0.4;
    filter:alpha(opacity=40); /* For IE8 and earlier */
} 
```

HTML

```
 <div id="mycarousel" class="jcarousel-skin-ie7">
                <ul>
    <li><div style="overflow:hidden;"><img src="image.png" width="211" height="170"/><div class="artistAndVideo"><span style="opacity:1;">some stuff here<span></div></div>';
        <div style="overflow:hidden;"><img src="image.png" width="211" height="170" /><div class="artistAndVideo"><span style="opacity:1;">some stuff here<span></div></div>';
      </li><li>  <div style="overflow:hidden;"><img src="image.png" width="211" height="170" /><div class="artistAndVideo"><span style="opacity:1;">some stuff here<span></div></div>';
   </li>  </ul>
            </div> 
```

Javascript

```
$("#mycarousel").hover(function(){                  
                    $('.artistAndVideo').slideToggle();
                }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:31:23.890

尝试这个：

```
 $("#mycarousel li").hover(function () {
    $(this).find('.artistAndVideo').stop(true,true).animate({ top : -45});
    },function () {
     $(this).find('.artistAndVideo').stop(true,true).animate({ top : -5});
 }); 
```

Html : a 中的所有元素都`ul`必须在 an`li`

```
<div id="mycarousel" class="jcarousel-skin-ie7">
<ul>
    <li>
        <div style="overflow:hidden;height:170px;margin-bottom:10px">
            <img src="image.png" width="211" height="170" />
            <div class="artistAndVideo"><span style="opacity:1;">some stuff here</span>
            </div>
        </div>
    </li>
    <li>
        <div style="overflow:hidden;;height:170px;margin-bottom:10px">
            <img src="image.png" width="211" height="170" />
            <div class="artistAndVideo"><span style="opacity:1;">some stuff here</span>
            </div>
        </div>
    </li>
    <li>
        <div style="overflow:hidden;;height:170px;margin-bottom:10px">
            <img src="image.png" width="211" height="170" />
            <div class="artistAndVideo"><span style="opacity:1;">some stuff here</span>
            </div>
        </div>
    </li>
</ul>
</div> 
```

CSS：

```
.artistAndVideo {
  background-color: black;
  display: block;
  color: white;
  bottom: 0px;
  position: relative;
  top: -5px;
  margin-bottom: 6px;
  width: 211px;
  text-align: center;
  height: 40px;
  opacity:0.4;
  filter:alpha(opacity=40);
  /* For IE8 and earlier */
} 
```

**[演示](http://jsfiddle.net/ndfWm/2/)**

# c# - 查询 Visio 应用程序对象的 CurrentEdition 属性

> ID：15530530
> 
> 赞同：1
> 
> 时间：2013-03-20T17:24:37.267
> 
> 标签：c#, .net, .net-assembly, visio

visio 应用程序对象可以通过 Microsoft.Office.Interop.Visio 程序集在 c# 程序中进行控制。visio 应用程序对象 2010 的文档显示属性**CurrentEdition**：

[http://office.microsoft.com/en-us/visio-help/HV080350129.aspx](http://office.microsoft.com/en-us/visio-help/HV080350129.aspx)

但是，在我的小型 c# 应用程序中，该属性不存在 - 尽管已创建对 Microsoft.Office.Interop.Visio 的引用。现在我的问题是如何使外部应用程序可以访问此属性？如果互操作程序集受到限制，您是否知道另一个程序集来完成这项工作？谢谢！

```
using System;

namespace VisioTest
{
    class Program
    {
        static void Main(string[] args)
        {
            Microsoft.Office.Interop.Visio.Application visioApp;

            visioApp = new Microsoft.Office.Interop.Visio.Application();

            if (visioApp.Application.CurrentEdition == Microsoft.Office.Interop.Visio.VisEdition.visEditionStandard)
            {
                // standard edition etc.
            }
        }
    }
} 
```

# ms-access - 使用 Microsoft Access 中的子查询按 ABS 排序

> ID：15530535
> 
> 赞同：2
> 
> 时间：2013-03-20T17:24:49.137
> 
> 标签：ms-access, subquery

我正在尝试在 Microsoft Access 中执行以下查询

```
SELECT Weights.Group, Abs(Wt-(Select avg(Wt) from Weights w2 where Weights.Group = w2.Group)) AS Rank
FROM Weights
WHERE (((Weights.[Selected])=1))
ORDER BY Abs(Wt-(Select avg(Wt) from Weights w2 where Weights.Group = w2.Group)); 
```

对照下表

```
ID  Wt  Selected    Group
1   911 1   1
2   912 1   1
3   913 0   1
4   914 1   1
5   880 1   2
6   890 1   2
7   885 1   2
8   886 1   2 
```

当我执行查询时，我得到一个无效的语法错误。如果我尝试仅引用 Order By Clause 中的第 2 列，它看起来好像是按文字 2 而不是第 2 列排序。有人对这个问题有任何经验吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T17:32:32.860

我想你必须把它包装起来：

```
SELECT * FROM (
    SELECT 
       Weights.Group, 
       Abs([Wt]-
         (Select avg(Wt) from Weights w2 where Weights.Group = w2.Group)) AS Rank
    FROM Weights
    WHERE Weights.Selected=1)
ORDER BY Rank 
```

# ajax - 当我使用 jsonp 作为远程 xml 文件中的数据类型时出现语法错误

> ID：15530536
> 
> 赞同：0
> 
> 时间：2013-03-20T17:24:51.933
> 
> 标签：ajax, jsonp

SyntaxError：语法错误

我能找到从远程服务器获取 xml 数据的任何方法吗？

```
$.ajax({
        type: "GET",
        url: "http://www.xyz.com/GetAllSubjects.xml",
        dataType: "jsonp",
        success: function(data) {

}

}); 
```

# java - 输入字段中的撇号截断值

> ID：15530541
> 
> 赞同：2
> 
> 时间：2013-03-20T17:24:58.367
> 
> 标签：java, javascript, jquery, html

我在通过 ajax 调用重新加载的页面上有一个输入框（内容是刷新）。问题是当输入框中有一个单引号时，剩余的值被截断，我该如何解决这个问题？

```
myVal = <-- its coming dynamically from db and when it contains values like "It's me", next time page reloads It just show "It" in input box
$('#myInput').val(myVal);
//after setting value and doing some other things, this content is reloaded 
```

这是java（服务器端代码）

```
<input id="myInput"  value="<c:if test='${deamer!=null}">${deamer.name}, ${deamer.code}</c:if>' /> 
```

当来自服务器端的值包含 ['] 时，代码将失败....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T18:57:33.520

您遇到转义字符串的问题。请务必注意这一点，因为对字符串转义的不当处理可能会导致潜在的 XSS 和注入攻击。

由于您没有提供任何代码，也没有指定您在服务器端使用什么语言在脚本中插入数据库值，因此您无法获得更多帮助。我建议不要插入这样的原始数据，并使用某种形式的中介，例如 JSON 形式的服务器响应，它可以很容易地被 javascript 使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T18:55:24.723

我无法重现该问题：

```
$(document).ready(function() {
   myVal = "It's me"
   $('#myInput').val(myVal);
}); 
```

输入文本是我。

[演示](http://jsfiddle.net/pMAj4/)

# php - 如何获取没有 html 标签的帖子内容？

> ID：15530543
> 
> 赞同：-1
> 
> 时间：2013-03-20T17:25:01.823
> 
> 标签：php, html, json, wordpress

我正在使用[JSON API](http://wordpress.org/extend/plugins/json-api/)，并且想要解析没有 html 标签的帖子内容（明文）。

我尝试使用`htmlspecialchars(json_encode($posts))`但`strip_tags($posts);`无法从 JSON 中删除 html 标签。

不确定我是否正确放置它，因为我是 php 新手。

```
public function get_category_posts() {
global $json_api;
$category = $json_api->introspector->get_current_category();
if (!$category) {
  $json_api->error("Not found.");
}
$posts = $json_api->introspector->get_posts(array(
  'cat' => $category->id
));
$result = strip_tags($posts);
return $this->posts_object_result($result, $category);
} 
```

**JSON**：

```
"posts": [
{
  "id": 3454,
  "type": "post",
  "status": "publish",
  "title": "XYZ JOINS",
  "content": "<p>This is the content that should not have html tags.<\/p>\n",
  "date": "2012-05-16 22:06:55"
}
] 
```

我想`<p></p>`从上面的 json 中删除 html 标签。内容中有许多 div 和其他 html 标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:44:32.280

我认为您只需要一个简单的正则表达式即可从内容中去除 html 样式标签。也许这会奏效

```
str.replace(/<\/?[^>]+>/gi, '') 
```

# mysql - MySQL使用ID插入外键多个表

> ID：15530547
> 
> 赞同：2
> 
> 时间：2013-03-20T17:25:11.050
> 
> 标签：mysql, insert, foreign-keys

我有两张表，一张有简单的“客户”数据，另一张有客户的“状态”。我在两个表中都有一个 ID 的外键。

表 A：
Id (int) PK AI
ClientId (bigint) UN PK
LastContact (datetime)

表 B：
Id (int) PK 表 A 的外键 Id
其他列....

当我插入/更新到我的“客户”表时，我依赖的是 ClientId，而不是表 ID，就像这样。

```
INSERT INTO client (ClientId, ClientType, LastContact) Values (Client_Id, Client_Type, Last_Contact) ON DUPLICATE KEY 
UPDATE ClientType=Client_Type, LastContact=Last_Contact; 
```

我如何知道我已插入或更新的 ID，然后才能插入/更新我的第二个表。我认为用外键链接会使这更容易，但我似乎找不到办法。另外，有人告诉我使用 ClientId 作为我的 Id 不是一个好主意，因为它是一个很大的数字，并且会随着表的增长而减慢速度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:31:41.287

mysql手册中有一个片段涵盖了您的确切情况。

> 如果表包含 AUTO_INCREMENT 列并且 INSERT ... UPDATE 插入一行，则 LAST_INSERT_ID() 函数将返回 AUTO_INCREMENT 值。如果该语句改为更新一行，则 LAST_INSERT_ID() 没有意义。但是，您可以使用 LAST_INSERT_ID(expr) 解决此问题。假设 id 是 AUTO_INCREMENT 列。要使 LAST_INSERT_ID() 对更新有意义，请按如下方式插入行：
> 
> INSERT INTO table (a,b,c) VALUES (1,2,3) ON DUPLICATE KEY UPDATE id=LAST_INSERT_ID(id), c=3;

因此，在您的情况下，您只需将查询修改为：

```
INSERT INTO client (ClientId, ClientType, LastContact) Values 
(Client_Id, Client_Type, Last_Contact) ON DUPLICATE KEY 
UPDATE ClientType=Client_Type, LastContact=Last_Contact, 
ClientId = LAST_INSERT_ID(ClientId); 
```

然后，您可以获取使用 LAST_INSERT_ID() 或您正在使用的客户端库中的任何函数添加/更新的行的 ID。

# c# - 显示数组数据 Excel Dna

> ID：15530549
> 
> 赞同：0
> 
> 时间：2013-03-20T17:25:25.540
> 
> 标签：c#, .net-4.0, excel-dna

我在使用带有 C# 的 Excel-Dna 显示数据时遇到问题。我有一个接收数据并处理它以制作表格的函数，所以我编写了一个测试函数只是为了显示数据，我无法得到一个值。错误是#VALUE。

```
public class Functions : IExcelAddIn
{
    public static String Username { get; set; }
    public static String Password { get; set; }
    public static Random rnd = new Random();

    public void AutoOpen()
    {
        ExcelAsyncUtil.Initialize();
    }

    public void AutoClose()
    {
        ExcelAsyncUtil.Uninitialize();
    }

    [ExcelFunction(Description="My first Excel-DNA function")]
    public static string MyFirstFunction(string name)
    {
        return "Hello, " + name + ".";
    }

    public static string ShowCurrentUser()
    {
        return (String.IsNullOrWhiteSpace(Username)) ? "Noone is logged in." : Username;
    }
    public static string LogIn(string user, string password)
    {
        const string connectionString = "server=localhost;userid={0};password={1};";
        MySqlConnection connection = new MySqlConnection(String.Format(connectionString, user, password));
        string output = "";
        try
        {
            connection.Open();
            Username = user;
            Password = password;
            output = "Successfully logged in!";
        }
        catch (Exception e)
        {
            output = "Errors: " + e.ToString();
        }
        finally
        {
            connection.Close();
        }

        return output;
    }
    public static object QMRTable(int SynNum, int YoA, int qtr, int TabNum)
    {
        object[,] response = new object[16, 3];

        for (int r = 0; r < response.GetLength(0); r++)
            for (int c = 0; c < response.GetLength(1); c++)
                response[r, c] = String.Format("Synd: {0}, YoA: {1}, Qtr: {2}, ({3},{4})", SynNum, YoA, qtr, r, c);

        return XlCall.Excel(XlCall.xlUDF, "Resize", response);
        //return response;
    }
    public static object QMRItem(int SynNum, int YoA, string qtr, string item)
    {
        return (rnd.NextDouble() * (100.0 - 0.0) + 0.0) + " GBP (M)";
    }
} 
```

似乎我不明白的是如何设置我的插件以正确调用这些方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:58:37.183

因此，答案是包括 AsyncFunctions.dll 以及 ExcelAsyncUtil.Initialize()。您需要将 .dna 文件更改为如下所示：

```
<DnaLibrary Name="MyExcel Add-In" RuntimeVersion="v4.0">
    <ExternalLibrary Path="MyExcelLibrary.dll" />
    <ExternalLibrary Path="AsyncFunctions.dll" />
</DnaLibrary> 
```

To compile the library for external use, you will have to go into his Distribution folder and find the Async folder [Excel-Dna\Distribution\Samples\Async\AsyncFunctions] and open this solution and build the library. You may need to get the Reactive Extensions Library. You can get it via NuGet with the command, Install-Pakcage Rx-Main.

# ios - 应用程序代码签名验证失败 ('13) - 尝试了一切

> ID：15530550
> 
> 赞同：0
> 
> 时间：2013-03-20T17:25:31.493
> 
> 标签：ios, xcode, verification, codesign

这是一个经常被讨论的话题，但由于软件不断更新，一些答案已经过时。

我正在尝试将应用程序提交到应用程序商店，但效果不佳。

我已阅读支持团队提供的指南并执行了以下操作：

*   在 Xcode 中使用了“清理所有目标”
*   删除了任何构建文件夹
*   撤销并重新创建所有证书
*   新证书已选择“应用商店”选项
*   将应用重新提交到配置文件
*   确保所有代码签名身份都是正确的
*   捆绑种子 ID 与代码签名身份匹配
*   归档方案构建配置以发布选项为目标
*   Bundle ID 不包含任何未知字符并且是唯一的
*   产品名称不包含任何未知字符或空格

我正在运行最新版本的 Xcode 和 OSX

[https://developer.apple.com/legacy/library/technotes/tn2250/_index.html#//apple_ref/doc/uid/DTS40009933-CH1-TNTAG32](https://developer.apple.com/legacy/library/technotes/tn2250/_index.html#//apple_ref/doc/uid/DTS40009933-CH1-TNTAG32)

# c# - 在 HttpModule 中正确使用 ConcurrentQueue？

> ID：15530560
> 
> 赞同：4
> 
> 时间：2013-03-20T17:25:48.817
> 
> 标签：c#, asp.net, multithreading, concurrency, httpmodule

我正在尝试为使用异步编程处理图像的 HttpModule 添加速度提升。

虽然看起来我确实获得了性能改进，但我想检查一下我是否正确使用了提供的工具。

我特别担心我处理队列不正确。

我正在采取的方法。

1.  初始化并发队列
2.  将 ProcessImage 方法添加到 AddOnBeginRequestAsync 中 BeginEventHandler 上的队列中
3.  在 AddOnBeginRequestAsync 的 EndEventHandler 上处理队列

有很多代码，所以我提前道歉，但异步编程很难：

**字段**

```
/// <summary>
/// The thread safe fifo queue.
/// </summary>
private static ConcurrentQueue<Action> imageOperations;

/// <summary>
/// A value indicating whether the application has started.
/// </summary>
private static bool hasAppStarted = false; 
```

**http模块初始化**

```
/// <summary>
/// Initializes a module and prepares it to handle requests.
/// </summary>
/// <param name="context">
/// An <see cref="T:System.Web.HttpApplication"/> that provides 
/// access to the methods, properties, and events common to all 
/// application objects within an ASP.NET application
/// </param>
public void Init(HttpApplication context)
{
    if (!hasAppStarted)
    {
        lock (SyncRoot)
        {
            if (!hasAppStarted)
            {
                imageOperations = new ConcurrentQueue<Action>();
                DiskCache.CreateCacheDirectories();
                hasAppStarted = true;
            }
        }
    }

    context.AddOnBeginRequestAsync(OnBeginAsync, OnEndAsync);
    context.PreSendRequestHeaders += this.ContextPreSendRequestHeaders;

} 
```

**事件处理程序**

```
/// <summary>
/// The <see cref="T:System.Web.BeginEventHandler"/>  that starts 
/// asynchronous processing 
/// of the <see cref="T:System.Web.HttpApplication.BeginRequest"/>.
/// </summary>
/// <param name="sender">The source of the event.</param>
/// <param name="e">
/// An <see cref="T:System.EventArgs">EventArgs</see> that contains 
/// the event data.
/// </param>
/// <param name="cb">
/// The delegate to call when the asynchronous method call is complete. 
/// If cb is null, the delegate is not called.
/// </param>
/// <param name="extraData">
/// Any additional data needed to process the request.
/// </param>
/// <returns></returns>
IAsyncResult OnBeginAsync(
object sender, EventArgs e, AsyncCallback cb, object extraData)
{
    HttpContext context = ((HttpApplication)sender).Context;
    EnqueueDelegate enqueueDelegate = new EnqueueDelegate(Enqueue);

    return enqueueDelegate.BeginInvoke(context, cb, extraData);

}

/// <summary>
/// The method that handles asynchronous events such as application events.
/// </summary>
/// <param name="result">
/// The <see cref="T:System.IAsyncResult"/> that is the result of the 
/// <see cref="T:System.Web.BeginEventHandler"/> operation.
/// </param>
public void OnEndAsync(IAsyncResult result)
{
    // An action to consume the ConcurrentQueue.
    Action action = () =>
    {
        Action op;

        while (imageOperations.TryDequeue(out op))
        {
            op();
        }
    };

    // Start 4 concurrent consuming actions.
    Parallel.Invoke(action, action, action, action);
} 
```

**委托和处理**

```
/// <summary>
/// The delegate void representing the Enqueue method.
/// </summary>
/// <param name="context">
/// the <see cref="T:System.Web.HttpContext">HttpContext</see> object that 
/// provides references to the intrinsic server objects 
/// </param>
private delegate void EnqueueDelegate(HttpContext context);

/// <summary>
/// Adds the method to the queue.
/// </summary>
/// <param name="context">
/// the <see cref="T:System.Web.HttpContext">HttpContext</see> object that 
/// provides references to the intrinsic server objects 
/// </param>
private void Enqueue(HttpContext context)
{
    imageOperations.Enqueue(() => ProcessImage(context));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:48:42.317

看起来您的`ProcessImage`方法适用于`HttpContext`，每次调用您的 HttpModule 将是一个实例。您的 HttpModule 会根据`OnBeginAsync`需要在每个 Web 请求中调用，并且您的委托已经为您提供了执行异步操作的逻辑。这意味着，您不需要 4 个并发线程，因为`context`无论如何您只有一个实例可以处理。我们不需要，`ConcurrentQueue`因为所有的工作都`context`应该在请求-响应的生命周期内完成。

总而言之，您不需要，`ConcurrentQueue`因为：

1.  通过 HttpModule 的请求已经是并发的（来自 Web 主机架构）。
2.  每个请求都在单个`context`实例上工作。
3.  您需要在从返回之前`ProcessImage`完成工作。`context``OnEndAsync`

相反，您只想在方法中开始您的后台工作`ProcessImage`，`OnBeginAsync`然后确保在您的`OnEndAsync`方法中完成该工作。此外，由于所有更改都是直接在`context`实例上进行的（我假设，因为`ProcessImage`没有返回类型，所以它正在更新`context`），您不需要做任何进一步的工作来从您的加工。

您可以放弃`ConcurrentQueue`并简单地使用：

```
IAsyncResult OnBeginAsync(object sender, EventArgs e, 
                          AsyncCallback cb, object extraData)
{
    HttpContext context = ((HttpApplication)sender).Context;
    EnqueueDelegate enqueueDelegate = new EnqueueDelegate(ProcessImage);

    return enqueueDelegate.BeginInvoke(context, cb, extraData);
}

public void OnEndAsync(IAsyncResult result)
{
    // Ensure our ProcessImage has completed in the background.
    while (!result.IsComplete)
    {
        System.Threading.Thread.Sleep(1); 
    }
} 
```

您可以删除`ConcurrentQueue<Action> imageOperations`and`Enqueue`并且您也可以重命名`EnqueueDelegate`为 be`ProcessImageDelegate`因为它现在可以直接使用该方法。

**注意：**可能是您当时还`context`没有准备好。如果是这种情况，您将不得不在. 但是，话虽如此，确实有可能通过一些并发来改进。`ProcessImage``OnBeginAsync``ProcessImage``OnEndAsync``ProcessImage`

我要提出的另一个挑剔点是，`hasAppStarted`可以将其重命名`hasModuleInitialized`为不那么模棱两可。

# asp.net-mvc-4 - 处理 ODP.net 中的撇号发送到 Oracle

> ID：15530562
> 
> 赞同：0
> 
> 时间：2013-03-20T17:25:54.213
> 
> 标签：asp.net-mvc-4, oracle11g, odp.net

我将向存储过程发送一些信息，该存储过程将信息放入数据库。
存储过程动态构建查询，因此我必须小心发送给它的内容。我过去常常在我的前端（我正在使用 asp.net MVC）或我的 Web 服务上从所需参数中提取任何恶意字符。这行得通，但是如果我需要输入像 O'brian 这样的名字呢？还是不能？我需要能够将其输入到 oracle 中。我可以在动态构建这些特定参数时将 q[] 包裹起来，但我认为这不会奏效。odp .net 是否有任何特殊的方法调用可以神奇地处理这种特殊情况？
还是我必须自己专门编写代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T21:38:56.723

ODP.net 在您的 .net 代码和 Oracle 之间提供了一个接口。如果您在将控制权传递给 proc 之后构建动态 sql，那么 odp.net 可以为您做的事情不多。

危险是字符串，在这种情况下是 varchar。它实际上只是一个字符串或类似的东西，有人可以将一些额外的 sql 注入到您的代码中。只要绑定变量始终是单个字符串（即一组未转义的单引号），恶意用户就无能为力了。

所以我认为有一些规则可以让你认为这是安全的：

**1) 仅在绝对必要时使用 varchar/clob 参数。**

**2) Varchar/clob 绑定值应始终在生成的 sql 中用单引号括起来：**

好的：

```
'where myval=''' || p_my_val || '''' 
```

坏的：

```
'where myval=' || p_my_val 
```

**3）用字符串中的两个单引号替换任何单引号**

```
'where myval=''' || replace(p_my_val, '''', '''''') || '''' 
```

我认为那时你会降低你的风险。以下是 Oracle 方面的完整工作示例。我还在 sql 中包含了一个绑定变量“l_fname”并用“using”填充，以防您有其他变量始终在查询中（而不是有条件地附加）并且总是以相同的顺序。

```
--create the ref cursor (simulates cmd.Parameters.Add)
var c refcursor;
--vvvvvvvvv simulates your stored proc vvvvvvvvvvvv
declare 
  l_lname varchar2(200) :='O''brian';
  l_fname varchar2(200) :='Bob';
  l_sql varchar2(2000);
begin
  l_sql := 'select * from dual where dummy!=:l_fname ' || 'and dummy!=''' || replace(l_lname, '''','''''') || '''';
  dbms_output.put_line(l_sql);
  open :c for l_sql using replace(l_fname, '''', '''''');
end;
--^^^^^^^^^ ends yoru stored proc ^^^^^^^^^^^^^^^^^
/
--debugging within oracle only:
print c; 
```

**还要考虑是否需要动态 sql。您在最终的 sql 字符串之外执行的几乎所有逻辑都可以在其中完成**，即：

```
if( p_my_var is not null ) then
  p_sql = p_sql || ' and myval = ''' || replace(p_my_val, '''', '''''') || '''' 
```

可能

```
and p_my_val is null or myval=p_my_val 
```

我强烈推荐 SQL Server 中的上述内容。我还建议在 Oracle 中执行此操作，但它不会像在 sql server 中那样短路，因为执行计划中未考虑绑定值，导致它在某些情况下不是最优的（至少在 10g 中） . 在这种情况下，请改用以下内容：

```
and myval=decode(p_my_val, null, col1, p_my_val); 
```

# python - Python多处理使用队列写入同一个文件

> ID：15530563
> 
> 赞同：7
> 
> 时间：2013-03-20T17:25:57.790
> 
> 标签：python, file-io, queue, multiprocessing

我知道 Stack Exchange 上有很多关于将结果从多处理写入单个文件的帖子，并且我只阅读了这些帖子就开发了我的代码。我想要实现的是并行运行“RevMapCoord”函数，并使用 multiprocess.queue 将其结果写入一个文件中。但是我在排队工作时遇到了问题。我的代码：

```
def RevMapCoord(list):
    "Read a file, Find String and Do something"

def feed(queue, parlist):
    for par in parlist:
        print ('Echo from Feeder: %s' % (par))
        queue.put(par)
    print ('**Feeder finished queing**')

def calc(queueIn, queueOut):
     print ('Worker function started')
     while True:
         try:
             par = queueIn.get(block = False)
             res = RevMapCoord(final_res)
             queueOut.put((par,res))
         except:
             break

def write(queue, fname):
    fhandle = open(fname, "w")
    while True:
         try:
            par, res = queue.get(block = False)
            print >>fhandle, par, res
         except:
            break
    fhandle.close()

feedProc = Process(target = feed , args = (workerQueue, final_res))
calcProc = [Process(target = calc , args = (workerQueue, writerQueue)) for i in range(nproc)]
writProc = Process(target = write, args = (writerQueue, sco_inp_extend_geno))

feedProc.start()
print ('Feeder is joining')
feedProc.join ()
for p in calcProc:
    p.start()
for p in calcProc:
    p.join()
writProc.start()
writProc.join () 
```

当我运行此代码时，脚本停留在“feedProc.start()”步骤。屏幕的最后几行输出显示了“feedProc.start()”末尾的打印语句：

```
Echo from Feeder: >AK779,AT61680,50948-50968,50959,6,0.406808,Ashley,Dayne
Echo from Feeder: >AK832,AT30210,1091-1111,1102,7,0.178616,John,Caine
**Feeder finished queing** 
```

但在执行下一行“feedProc.join()”之前挂起。代码没有错误并继续运行但什么都不做（挂起）。请告诉我我犯了什么错误。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-20T18:26:04.693

我认为你应该把你的例子精简到基础。例如：

```
from multiprocessing import Process, Queue

def f(q):
    q.put('Hello')
    q.put('Bye')
    q.put(None)

if __name__ == '__main__':
    q = Queue()
    p = Process(target=f, args=(q,))
    p.start()
    with open('file.txt', 'w') as fp:
        while True:
            item = q.get()
            print(item)
            if item is None:
                break
            fp.write(item)
    p.join() 
```

这里我有两个进程（主进程，ap）。p 将字符串放入队列中，由主进程检索。当主进程找到 None （我用来指示：“我完成了”的哨兵）时，它会中断循环。

将此扩展到许多进程（或线程）是微不足道的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T22:09:44.120

通过在 Python3 中使用“map_async”函数，我实现了从多处理到单个文件的写入结果。这是我写的函数：

```
def PPResults(module,alist):##Parallel processing
    npool = Pool(int(nproc))    
    res = npool.map_async(module, alist)
    results = (res.get())###results returned in form of a list 
    return results 
```

所以，我在“a_list”中为这个函数提供了一个参数列表，“module”是一个执行处理并返回结果的函数。上述函数继续以列表的形式收集结果，并在处理完'a_list'中的所有参数后返回。结果可能不是正确的顺序，但由于顺序对我来说并不重要，所以效果很好。可以迭代“结果”列表并将单个结果写入文件中，例如：

```
fh_out = open('./TestResults', 'w')
for i in results:##Write Results from list to file
    fh_out.write(i) 
```

为了保持结果的顺序，我们可能需要使用类似于我在问题（上）中提到的“队列”。虽然我能够修复代码，但我相信这里不需要提及。

谢谢

AK

# heroku - Heroku 对 Octopress 的帧支持

> ID：15530565
> 
> 赞同：1
> 
> 时间：2013-03-20T17:26:04.387
> 
> 标签：heroku, octopress

当我将我的博客文章提交到[dzone](http://www.dzone.com/links/index.html)时，它​​们不会出现，因为 dzone 将文章放在一个框架中。我的网站上没有框架破坏代码，在与 dzone 支持人员交谈后，很明显这是 Heroku 上的设置。做一些更多的研究我发现[了这个类似的问题](https://stackoverflow.com/questions/11434095/facebook-page-tab-doesnt-show-my-content)。

我需要做同样的事情似乎是合乎逻辑的，但是，我没有我知道的 app.rb 文件，因为 Octopress 会生成一堆上传到 Heroku 的 HTML。我只是使用免费的 Heroku 帐户。我有办法调整保护设置吗？

我意识到这可能不是这个网站的问题。可能是服务器[故障](https://serverfault.com/)？我只是不知道问题出在哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:31:21.250

我相信这是你应该在 Javascript 中做的事情。也许这会对您有所帮助：[http ://en.wikipedia.org/wiki/Framekiller](http://en.wikipedia.org/wiki/Framekiller)

# php - 如何配置 php/apache2 以显示异常但不显示堆栈跟踪？

> ID：15530566
> 
> 赞同：0
> 
> 时间：2013-03-20T17:26:05.337
> 
> 标签：php, exception, configuration, apache2

显示异常但不显示完整堆栈跟踪需要什么错误报告组合？

IE：

```
throw new Exception("This is an exception"); 
```

显示“这是一个例外”，但不显示后面的完整跟踪？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:31:54.440

用于`set_exception_handler`创建您自己的仅显示错误消息的异常处理程序

例如：

```
set_exception_handler(
    function($e) {
        echo $e->getMessage();
        //exit(); dont have to be called
    }
); 
```

# php - 从其他网站提供图片时出错

> ID：15530569
> 
> 赞同：0
> 
> 时间：2013-03-20T17:26:09.980
> 
> 标签：php

基本上我想做的是在我的网站上有一个部分，您可以在其中提供用户的用户名，例如：NOTCH

然后它会转到 minecraft 主机并找到用户的皮肤。“皮肤窃取者”，如果你喜欢的话。

但是我遇到了一个错误，不知道如何解决它..

```
<?php
if ($_GET['user'])
{
$user = $_GET['user'];

if(trim($user) == '')
{
    die('No username entered!');
}

$user = preg_replace('/\s+/', '', $user);

header('Content-Type: image/png');
$picture = '<img src="http://s3.amazonaws.com/MinecraftSkins/$user.png">';
$getpicture = file_get_contents("$picture");
echo $picture
}
?> 
```

HTML 只是读取名为“mcskin.php”的 php 页面的基本形式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:28:56.330

如果使用 file_get_contens 你只需要 url：

```
$picture = "http://s3.amazonaws.com/MinecraftSkins/$user.png"; 
```

也改变

```
$getpicture = file_get_contents("$picture"); 
```

到

```
$getpicture = file_get_contents($picture); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:28:24.223

您没有使用正确的引号：

```
$picture = "<img src='http://s3.amazonaws.com/MinecraftSkins/$user.png'>"; 
```

在这一行中不需要引号：

```
$getpicture = file_get_contents($picture); 
```

此外，您正在申请没有任何意义`file_get_contents()`的`img`标签。将 URL 传递给它：

```
$pictureUrl = "http://s3.amazonaws.com/MinecraftSkins/$user.png";
$getpicture = file_get_contents($pictureUrl); 
```

# node.js - 在 node.js 中多个同时访问文件写入会导致文件写入错误

> ID：15530570
> 
> 赞同：0
> 
> 时间：2013-03-20T17:26:11.890
> 
> 标签：node.js, file-io

我正在使用以下代码写入一个公共文件。

```
fs.appendFile('log.txt', str, function (err) {
    console.log("error writing file");
  }); 
```

它被多个函数调用同时调用。它正确完成了文件写入操作，但仍然抛出错误“错误写入文件”。

什么是编写/执行此代码的干净方式。我希望每个调用都等待 I/O 操作，直到已经编写函数完成工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T19:55:38.257

实际上你错过了一个 if - 你应该检查是否设置了 err 。

```
fs.appendFile('log.txt', str, function (err) {
    if (err) console.log("error writing file");
  }); 
```

否则，它只会输出您的消息，因为每次追加后都会调用回调。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T18:06:19.183

这是日志记录模块的基本示例。

```
var fs = require('fs');

var logStream = fs.createWriteStream('log.txt', {flags:'a'});

function log (str) {
  logStream.write(str);
}

module.exports = log; 
```

# c# - 设置大小以填充空间

> ID：15530572
> 
> 赞同：0
> 
> 时间：2013-03-20T17:26:13.530
> 
> 标签：c#, .net, wpf, xaml, user-interface

```
foreach (TableContainer table in listOpenUnjoinedTables)
            {
                var item = new Label();

                item.MouseEnter += item_MouseEnter;
                item.MouseLeave += item_MouseLeave;

                if (table.IsVirtual == false)
                {
                    item.Content = "[" + table.TableDescription + "]";
                }
                else
                {
                    item.Content = "[" + table.View.Name + "]";
                }

                item.Tag = table;
                cmb.Items.Add(item);

                if (item.ActualWidth > largestWidth)
                {
                    largestWidth = item.ActualWidth;
                }
            }

            if (largestWidth != 0)
            {
                foreach (Label label in cmb.Items)
                {
                    label.Width = largestWidth;
                }
            }
        } 
```

我有一个 ComboBox 并正在向它添加标签，而不是 ComboBoxItems。我希望标签填充下拉列表中的整个空间。我正在尝试在上面编写代码，但是标签的宽度始终返回为 0，因此我的代码不起作用。

我怎样才能做到这一点？我希望 ComboBox 的项目（标签）填充整个下拉列表的宽度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T21:59:34.630

我敢肯定，在现实世界的应用程序中，将 Label 控件作为 ComboBox 项根本没有任何意义。

无论如何，分配给 ComboBox 的[ItemContainerStyle](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemcontainerstyle.aspx)属性的下面显示的最小样式将负责项目的正确水平拉伸。

```
<ComboBox Name="cmb">
    <ComboBox.ItemContainerStyle>
        <Style TargetType="ComboBoxItem">
            <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
        </Style>
    </ComboBox.ItemContainerStyle>
</ComboBox> 
```

# python - Python argparse：如何在 subparser 中插入换行符帮助文本？

> ID：15530575
> 
> 赞同：11
> 
> 时间：2013-03-20T17:26:21.963
> 
> 标签：python, python-2.7, argparse

这个问题与[之前提出的问题](https://stackoverflow.com/questions/3853722/python-argparse-how-to-insert-newline-the-help-text)有关，但可能无关。问题是：在使用子解析器时，如何在下面给定（工作）示例中的帮助文本中使用换行符？

```
import argparse

parser = argparse.ArgumentParser(formatter_class=argparse.RawTextHelpFormatter)

subparsers = parser.add_subparsers()

parser_start = subparsers.add_parser('stop')
parser_start.add_argument("file", help = "firstline\nnext line\nlast line")

print parser.parse_args() 
```

我的输出如下：

```
tester.py  stop -h
usage: tester.py stop [-h] file

positional arguments:
  file        firstline next line last line

optional arguments:
  -h, --help  show this help message and exit 
```

帮助的预期输出`file`应该是：

```
first line
next line
last line 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-20T18:21:42.063

该`subparsers.add_parser()`方法采用与 相同的`ArgumentParser`构造函数参数`argparse.ArgumentParser()`。因此，要使用`RawTextHelpFormatter`子解析器，您需要`formatter_class`在添加子解析器时显式设置。

```
>>> import argparse
>>> parser = argparse.ArgumentParser(formatter_class=argparse.RawTextHelpFormatter)
>>> subparsers = parser.add_subparsers() 
```

更改此行以设置`formatter_class`子解析器：

```
>>> parser_start = subparsers.add_parser('stop', formatter_class=argparse.RawTextHelpFormatter) 
```

现在，您的帮助文本将包含换行符：

```
>>> parser_start.add_argument("file", help="firstline\nnext line\nlast line")
_StoreAction(option_strings=[], dest='file', nargs=None, const=None, default=None, type=None, choices=None, help='firstline\nnext line\nlast line', metavar=None)

>>> print parser.parse_args(['stop', '--help'])
usage:  stop [-h] file

positional arguments:
  file        firstline
              next line
              last line

optional arguments:
  -h, --help  show this help message and exit 
```

# php - 如何确保 sql 表未锁定/停止并发 crons

> ID：15530576
> 
> 赞同：0
> 
> 时间：2013-03-20T17:26:28.497
> 
> 标签：php, mysql, cron, cron-task

我每隔几分钟就会运行一个 cron 作业，它会遍历“待办事项”列表中的前 50 个项目，在每个项目上运行一个脚本并将其标记为在数据库中运行。

这一直很好，直到将项目标记为完整的表被某些东西锁定并且项目没有被标记。然后 cron 再次运行并检查了相同的 50 个项目。

如此反复，直到 mysql 中的进程列表非常庞大，并且每隔几分钟只会增加 50 倍。

我怎么能阻止这种情况发生？我的想法是：

*   在脚本中添加代码以查看 cron 是否仍在运行，然后再次运行
*   在运行新的 SELECT 查询以获取接下来的 50 项之前检查 mysql 表中的锁定表

他们似乎都有起伏，我不确定如何正确实施。任何人有任何建议/更好的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:41:44.990

您可以采取几种方法。

1.  修改您的表以跟踪状态。例如，待办事项、已开始、已完成。并且只处理“ToDo”。并且在您可以将其标记为已开始之前不要开始任务。如果 cron 作业失败，您将需要创建一种重新启动任务的方法。

2.  如果您无法将其标记为完成，请使用事务并回滚任务的内容。

3.  同步 cron 作业的执行以一次只允许执行一次。为此，您可以锁定文件。在开始时检查文件，如果无法获得锁定则退出。

4.  让 cron 作业在休眠状态下永远运行，而不是定期执行。

# python - 将函数调用的返回值映射到对象属性

> ID：15530578
> 
> 赞同：0
> 
> 时间：2013-03-20T17:26:34.390
> 
> 标签：python

我遇到了一个类对象，该对象具有许多需要用各个函数调用的返回值填充的属性。不幸的是，属性名称不会一对一地映射到被调用函数的参数。有没有一种pythonic方法可以在不重复进行手动映射的情况下实现这一点？

```
obj = MyClass()
obj.a_min = func(a1xyz, 'min')
obj.a_max = func(a2zzz, 'max')
obj.a_avg = ...
obj.b_min = ...
obj.b_max = ...
...
obj.n_min = ...
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T20:49:29.617

我不确定这是否是最 Pythonic 的方法，但只要您要调用的函数具有相同的签名，这是一种可行的替代方法：

```
class A(object) :
    def __init__(self) :
        d = {"arg1" : (1, "arg1_v"),
             "arg2" : (2, "arg2_v")}
        for key, value in d.items() :
            setattr(self, key, f(*value))

a = A()
print a.arg1
print a.arg2 
```

如果您想根据属性名称调用不同的函数，您甚至可以使用函数名称：

```
def f_arg1(x) :
    return x
def f_arg2(x, y) :
    return (x, y)

class A(object) :
    def __init__(self) :
        d = {"arg1" : ((1,), f_arg1),
             "arg2" : ((2,3), f_arg2)}
        for key, value in d.items() :
            a, f = value
            setattr(self, key, f(*a))

a = A()
print a.arg1
print a.arg2 
```

# matlab - 编程非凸优化（二次最大化）半定编程

> ID：15530580
> 
> 赞同：0
> 
> 时间：2013-03-20T17:26:36.493
> 
> 标签：matlab, math, mathematical-optimization, maximize, quadratic

只是想知道是否有人可以帮助我解决这样的问题：（使用 matlab 和 CVX）

```
cvx_begin sdp

variables x0 x1 x2 x3 y1 y2 y3 y4 y5

x0==1/sqrt(3)

1/3+x1^2+x2^2+x3^2+y1^2+y2^2+y3^2+y4^2+y5^2<=1

x1==-x3 
y1==y5
y2==-y4 

x0*X0+x1*X1+x2*X2+x3*X3+y1*Y1+y2*Y2+y3*Y3+y4*Y4+y5*Y5>=0

maximize(x1^2+x2^2+x3^2)

cvx_end 
```

X0, X1,.....X3,Y1,....Y5,Z1........Z7（大写字母）是矩阵（球形张量） 一个约束是带有小写变量的乘积必须是半正定的，它还必须满足变量语句之后的所有其他等式/不等式。

**好吧，这个程序不起作用，因为二次最大化不是 CVX 所要求的凸，有人知道可以用另一种资源重新制定或解决这种优化的方法**

好吧，任何输入都是确认，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T08:42:38.017

看起来您正在尝试最大化与仿射空间和丑陋的半空间相交的球的二次方。

最大化球上的二次方程被称为“信任域子问题”。令人惊讶的是，它承认了一个有效的解决方案。我从未使用过它，但[Marielba](http://ta.twi.tudelft.nl/wagm/users/rojas/lstrs.html) Rojas 等人的 LSTRS。显然实现了一个TRS求解器。

不过，您需要处理不等式约束。我建议找到最小的可行拉格朗日乘数，它会导致您的 TRS 的最佳解决方案实际上位于所需的半平面中。二进制搜索是一种技术含量很低的方法。

# jquery - 检查是否选中了单选按钮 jquery

> ID：15530582
> 
> 赞同：36
> 
> 时间：2013-03-20T17:26:39.750
> 
> 标签：jquery

我有这个 HTML：

```
<input type="radio" name="test" id="test" value="1"><br>
<input type="radio" name="test" id="test" value="2"><br>
<input type="radio" name="test" id="test" value="3"><br>

<input type="button" onclick="CreateJobDo"> 
```

当页面加载时，它们都不会被检查。我想使用 jQuery 来检查按下按钮时是否选中了其中一​​个单选按钮。

我有这个：

```
function CreateJobDo(){
    if ($("input[@name=test]:checked").val() == 'undefined') {

        // go on with script

    } else {

        // NOTHING IS CHECKED
    }
} 
```

但这不起作用。如何让它工作？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-03-20T17:29:17.127

首先，只有一个`id="test"`

其次，试试这个：

```
if ($('[name="test"]').is(':checked')) 
```

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2013-03-20T17:31:26.110

试试这个

```
if($('input:radio:checked').length > 0){
// go on with script
 }else{
    // NOTHING IS CHECKED
 } 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-03-20T17:29:46.013

像这样的东西：

```
 $("input[name=test]").is(":checked"); 
```

使用 jQuery is() 函数应该可以工作。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-03-20T17:30:07.793

```
if($("input:radio[name=test]").is(":checked")){
  //Code to append goes here
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-20T17:29:17.250

```
 $('#submit_button').click(function() {
    if (!$("input[@name='name']:checked").val()) {
       alert('Nothing is checked!');
        return false;
    }
    else {
      alert('One of the radio buttons is checked!');
    }
  }); 
```

# grails - 域类的 Grails 绕过 beforeUpdate 方法

> ID：15530586
> 
> 赞同：0
> 
> 时间：2013-03-20T17:26:57.210
> 
> 标签：grails, grails-2.0, grails-domain-class

我只是好奇是否有办法绕过`beforeUpdate()`某个域类的类似方法。

我需要它来恢复用户的原始密码。`beforeUpdate`继续我不想调用两次的密码哈希算法。

我能想出的唯一解决方案是使用直接连接到数据库，因此绕过`Hibernate`. 这我不太喜欢数据库供应商锁定等原因。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:49:04.377

你为什么不在域上放置一个 ishashed 属性......

设置新密码时将其设置为 false

在 beforeUpdate 你测试 ishashed

如果为 false，则对密码进行哈希处理并将 ishashed 设置为 true

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T18:09:30.563

您可以使用 HQL：

```
User.executeUpdate("update User u set u.password = :password where u.id = :userId",
    [password: oldHashedPassword, userId: userId]) 
```

这仍然使用 Hibernate 及其来自数据源供应商的抽象。

# asp.net-mvc-4 - 具有附加属性的 ScriptBundle

> ID：15530589
> 
> 赞同：4
> 
> 时间：2013-03-20T17:27:01.970
> 
> 标签：asp.net-mvc-4, web-optimization, scriptbundle

```
public class BundleConfig
{
    // For more information on Bundling, visit http://go.microsoft.com/fwlink/?LinkId=254725
    public static void RegisterBundles(BundleCollection bundles)
    {
        bundles.Add(new ScriptBundle("~/bundles/require").Include(
                        "~/Scripts/require.js"));
       .... 
```

并在 _Layout.cshtml

```
@Scripts.Render("~/bundles/require") 
```

它呈现为（带`EnableOptimizations = false`）：

```
<script src="/Scripts/require.js"></script> 
```

但我想添加一个属性

```
<script src="/Scripts/require.js" data-main="/Scripts/main"></script> 
```

我怎么能那样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-11T07:13:35.797

我通过配置没有 data-main 属性的 requirejs 解决了类似的问题。所以，起初我有以下代码：

```
<script src="app/rconfig.js"></script>
<script src="plugin/requirejs/require.js" data-main="app/main.js"></script> 
```

接下来，让我们摆脱 data-main 属性：

```
<script src="app/rconfig.js"></script>
<script src="plugin/requirejs/require.js"></script>
<script>
    require.config({
        baseUrl: "app"
    });
    require(['app/main.js']);
</script> 
```

接下来，我将最后一个“脚本”内容放入文件中：

```
<script src="app/rconfig.js"></script>
<script src="plugin/requirejs/require.js"></script>
<script src="app/rdatamain.js"></script> 
```

完成后，我将这三个文件放入包中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T23:56:03.320

如果你不喜欢 RenderFormat，你也可以在 ScriptsHelper 上全局更改 DefaultTagFormat，但是这个属性现在会出现在你调用 Scripts.Render 的任何地方

# excel - 多列中的excel查找

> ID：15530596
> 
> 赞同：1
> 
> 时间：2013-03-20T17:27:26.153
> 
> 标签：excel

我希望有人可以帮助我完成我认为很简单的任务。

我有一个包含许多列的工作表（Sheet1）。前两个分别只是一个数字和一个名称。在这两列之后，每行都有不同的列（例如，第一行有 10 列，第二行有 4 列等）。

我有另一个包含 2 列的工作表（Sheet2）。第一列有一个我想在 Sheet1 中查找的值。问题是该值可以在前两列之后的 Sheet2 列中的任何位置。（例如，查找值 123，值在第 13 列第 6 行或查找值 456 在第 5 列第 14 行）然后我想要值将 Sheet1 上的第 1 列第 6 行放入 Sheet2 上的第 2 列。

我曾尝试使用 Vlookup、Hlookup 和 Lookup，但似乎无法弄清楚如何让它工作。

任何帮助将非常感激

谢谢加雷斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T18:19:10.613

...我知道您没有要求 VBA 解决方案，但我只是想写一个来看看我会怎么做...

我让它“又快又脏”，没有任何错误检查等，但它会给你你正在寻找的东西：

```
 Public Function FindInRange(Val As Variant, LookIn As Range, ColIndexNumber As Integer) As Range

  ' INPUTS:
     ' Val             = The Value you're looking for in your Range of cells
     ' Range           = The range of cells you're searching through
     ' ColIndexNumber  = The index of the column you want a value returned from within the row from which the value is found

  ' NOTE:
  ' This will only pull the first value matching your "Val" argument

  Dim FoundCell As Range

  Set FoundCell = LookIn.Find(what:=Val, LookAt:=xlWhole)

  If FoundCell Is Nothing Then
     Set FindInRange = Nothing
  Else
     Set FindInRange = Intersect(LookIn.Columns(ColIndexNumber), FoundCell.EntireRow)
  End If

  End Function 
```

* * *

如果将其粘贴到 VBA 模块中，则可以从电子表格中调用它，就像此时的任何其他函数一样。

希望这可以帮助 ：）

# printing - 从网页打印的 Groovy 示例

> ID：15530598
> 
> 赞同：-4
> 
> 时间：2013-03-20T17:27:32.913
> 
> 标签：printing, web, groovy

我需要创建一个网页，其中一个图标将是打印机图标，它应该打印到连接到运行浏览器的设备的打印机。我还没有看到任何执行此操作的 groovy/grails 代码示例。任何人都可以帮忙吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:52:09.637

You will have to use javascript to perform this task.

```
<A HREF="javascript:window.print()">
 <IMG SRC="printer.gif">
</A> 
```

# javascript - Eclipse Javascript——如何订购多个文件？

> ID：15530601
> 
> 赞同：1
> 
> 时间：2013-03-20T17:27:40.283
> 
> 标签：javascript, eclipse

我正在使用“*用于 JavaScript Web 开发人员的 Eclipse IDE。* ”

我将我的 Javascript 代码拆分为几个脚本文件。我在一个文件中声明了一个对象或类构造函数，代码助手知道所有其他文件中的对象或类。但它不知道对象的内容。编辑器似乎不知道加载单个文件的顺序。

有没有办法告诉编辑器解释器加载文件的顺序？

这是一个简单的例子。我将我的 javascript 代码拆分为 2 个“模块”。我`ob`在 module1.js 中定义了对象

```
// module1.js
var ob = { a: 'aaa' }; 
```

在 module2.js 中，代码助手知道对象的`ob`存在，但不知道对象的内容（`ob.a`）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T21:30:56.197

“文件的顺序”无关紧要。代码助手毕竟知道`ob`。问题是只有原型似乎有完整的项目范围的支持。所以如果你有

```
function MyObj() {}

MyObj.prototype = {
  aFunction: function() {
  ... 
```

在另一个文件中

```
var obj = new MyObj(); 
```

然后，当您键入时`obj.`，`aFunction`建议。

如果您只编写 JavaScript 和 HTML / CSS，那么我建议您使用另一个 IDE。Netbeans 支持您想要的，有些人似乎对 Aptana 很满意，仅举两例。

如果您真的想要或必须使用 Eclipse，那么您可以寻找一个插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T21:52:53.530

这是 vjet js IDE 处理这个[http://wiki.eclipse.org/VJET/JS_code_assist_and_validation_for_two_or_more_js_files的方式](http://wiki.eclipse.org/VJET/JS_code_assist_and_validation_for_two_or_more_js_files)

# extjs - 无法将小数分隔符 Ext.ux.grid.FiltersFeature 更改为逗号

> ID：15530604
> 
> 赞同：2
> 
> 时间：2013-03-20T17:27:46.340
> 
> 标签：extjs, datagrid, extjs4

我正在使用 ExtJS 4.1 并尝试将[数字网格过滤](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.ux.grid.filter.NumericFilter)器中的小数分隔符更改为逗号。

这是我的网格过滤器配置：

```
features: [{
    ftype: 'filters',
    encode: true,
    filters: [{
        type: 'numeric',
        dataIndex: 'frequency',
        decimalSeparator: ','
    }]
}] 
```

![在此处输入图像描述](../Images/2f6c478e9b83cbe922acc5f9c008cfbb.png)

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T18:53:54.980

我会覆盖[Ext.ux.grid.menu.RangeMenu](http://docs.sencha.com/ext-js/4-1/extjs-build/examples/ux/grid/menu/RangeMenu.js)并将 decimalSeparator 属性添加到默认菜单项配置：

```
Ext.override(Ext.ux.grid.menu.RangeMenu, {
    menuItemCfgs : {
        emptyText: 'Enter Number...',
        selectOnFocus: false,
        width: 155,
        decimalSeparator:','
    }
}); 
```

# c++ - 单击时清除编辑框文本

> ID：15530606
> 
> 赞同：0
> 
> 时间：2013-03-20T17:27:54.457
> 
> 标签：c++, winapi

我有一个带有按钮和编辑框的表单。我想在鼠标点击时清理编辑框，我应该在 LRESULT CALLBACK 过程中使用哪个事件？

```
#define IDC_MAIN_EDIT 102 
HWND hEdit; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:39:43.037

首先，您需要处理`WM_SETFOCUS`消息。您需要做的下一件事是清除问题所述的文本。在这种情况下，您可以`WM_SETTEXT`使用 a`\0`或空指针发送，请参见[此处](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms632644%28v=vs.85%29.aspx)

# javascript - 鼠标悬停时“淡入/淡出”菜单栏的最佳方法

> ID：15530608
> 
> 赞同：0
> 
> 时间：2013-03-20T17:28:00.023
> 
> 标签：javascript, html, css

首先，我为一个冗长的帖子道歉。我正在尝试使用 CSS、HTML 和 JavaScript，所以请不要推荐使用 std。图书馆。

1）我发现人们在 CSS、HTML 和 JavaScript 中使用不同的方法来实现导航栏上的“淡入/淡出效果”，使用 CSS 和 JavaScript 的一些方法是：

a) 使用属性“left”来获取屏幕外的子菜单。默认左侧：-500px；鼠标悬停在左侧：-10px

b) 使用属性“可见性”。默认可见性：“隐藏”和 onmouseover-可见性：可见

c）使用属性“显示”。默认 display:none 和 onmouseover- display:block

我的问题是哪一个是最好的方法，为什么？

2）我在这个jsfiddle中使用了方法a）：http: [//jsfiddle.net/A7TND/](http://jsfiddle.net/A7TND/)。

**CSS**

```
.teal-box{
left:-10px;
} 
```

**HTML**

```
<div class="level1" onmouseover="showSubs(&quot;+&quot;)"> 
```

**Javascript**

```
switch (vwFlg){    
case "+" :
elmt.style.left = "-10px";
...
} 
```

在示例中，我不确定当我在主要项目（收藏夹）和子项目（jsfiddle，google）之间移动时该函数是否被一遍又一遍地调用，我的问题是：a）它是否在主要项目（收藏夹）和子项目（谷歌和 jsfiddle）之间的鼠标移动？b）这（一遍又一遍地调用javascript函数）如何影响页面的响应能力？

3.我为拥有多个图像所做的方法（请参阅 jsfiddle 链接）

* * *

, 是否有多个 div - top 具有不同的值，这是最好的方法吗？这意味着，我必须为每个图像编写一个 div，是否有一种巧妙的方法可以使用绝对和相对的“位置”属性来实现这一点，而无需创建与图像一样多的 div？

4.  我想要一张桌子![带有行选择器的表格](../Images/d7216b50c2bd92118febfb784c361829.png)，如何获得“按钮弹出页面”的外观？我试图调试一个商业网络应用程序，似乎他们似乎重复了一个背景图像，我试过了，但这没有用。

**CSS**

```
.sel-row {
border-style:solid;
border-width:1px;
background-image:url("\lb_sel.gif");
background-repeat:repeat-x-y;
background-color:#CDD2D7 ;
border-color:#8B96A2 ;
height:20px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:39:43.327

我的方法是让隐藏元素成为悬停元素的子元素，然后使用绝对定位+显示来隐藏/显示

```
<li>
  Button Copy
  <span>HIDE SHOW ME</span>
</li>

li {
  position:relative;
}
li:hover span {
  display:block;
}
li span {
  position:absolute;
  top:25px;
  left:0;
  display:none;
} 
```

您是否也在为不透明度设置动画？

使用 javascript 为元素添加类，CSS3 动画，但了解不使用 CSS3 的浏览器。另外，不要再使用显示了。

```
<li>
      Button Copy
      <span>HIDE SHOW ME</span>
    </li>

    li {
      position:relative;
    }
    li.show span {
      opacity:0;
    }
    li span {
      position:absolute;
      top:25px;
      left:0;
      opacity:1;
      -webkit-transition: all .8s ease-in;
      -moz-transition: all .8s ease-in;
      -o-transition: all .8s ease-in;
      -ms-transition: all .8s ease-in;
      transition: all .8s ease-in;
    } 
```

对于不支持 css3 的浏览器，我使用 Modernizr + jQuery 作为后备。你必须把它变成一个切换。

```
if (!Modernizr.csstransitions) { // if browser doesn't support css3.transitions
  $('li span').animate({ "opacity": '1' }, 800);
} else { // if browser does support css3.transitions
  $('li').addClass('show');
} 
```

# javascript - 如何使用字符串获取连接值以从变量中获取值

> ID：15530610
> 
> 赞同：1
> 
> 时间：2013-03-20T17:28:04.960
> 
> 标签：javascript, dynamic-forms

请检查下面的脚本。

动态表格，所以脚本也是动态的，我要计算表格数据什么时候发生变化。在此期间我遇到了一些问题。

我从变量**Final_price1、Final_price2 .....、Final_price7、Final_price8 中**获取值，然后计算它们的总和。

在此计算期间，我将以下内容连接`concat("Final_price",i);`起来以获得上述值。这正确连接，但上述变量值没有出现。我不知道为什么价值观没有到达那里。所以检查脚本并更新我。

```
function assign_body()
  {  
var a_7= document.getElementById("option[280]").value;
     var spl_7  = a_7.split("_");
     //alert(spl);
            var cr_7    = spl_7[1];
            var operator3_7 = cr_7.split("[");
            var symbol7 = operator3_7[0];
            var dtt_7 =  operator3_7[1];
            var myarr_7         = dtt_7.split("$");
            var symbol_st_7 = myarr_7[1];
            //alert(symbol_st);
            //alert(symbol_s);
            //var symbol_a      = symbol_s.split("(");
            //var symbol        = symbol_a[1];
            //alert(symbol); 
            var split_value_7 = myarr_7[1];
            //alert(split_value);
            var final_value_7   =symbol_st_7.split(".");
            var Final_price7    =final_value_7[0];

     var a_8= document.getElementById("option[281]").value;
     var spl_8  = a_8.split("_");
     //alert(spl);
            var cr_8    = spl_8[1];
            var operator3_8 = cr_8.split("[");
            var symbol8 = operator3_8[0];
            var dtt_8 =  operator3_8[1];
            var myarr_8         = dtt_8.split("$");
            var symbol_st_8 = myarr_8[1];
            //alert(symbol_st);
            //alert(symbol_s);
            //var symbol_a      = symbol_s.split("(");
            //var symbol        = symbol_a[1];
            //alert(symbol); 
            var split_value_8 = myarr_8[1];
            //alert(split_value);
            var final_value_8   =symbol_st_8.split(".");
            var Final_price8    =final_value_8[0];

    var j=8;

    var total_amount=0;
    for(var i=1; i<=j; i++)
    {

         final_prices=concat("Final_price",i);
        alert(final_prices);
         symbol_prices=concat("symbol",i);
        alert(symbol_prices);
            if(isNumber(final_prices)){
                alert("number");
                /*if(symbol_prices =='+') {
                        alert("plus");
                     var total_amount+=parseInt(original_prices)+parseInt(final_prices);
                     calculated_price_element.innerHTML=total_amount;
                     alert(total_amount);
                } else if(symbol_prices =='-') {
                        alert("minus");
                     var total_amount+=parseInt(original_prices)-parseInt(final_prices);
                     calculated_price_element.innerHTML=total_amount;
                      alert(total_amount);
                }*/
         //alert('test');

            }

        }

 } 
```

# javascript - Initialize function error while using Twitter Bootstrap + Codeigniter + jquery pluguin

> ID：15530619
> 
> 赞同：0
> 
> 时间：2013-03-20T17:28:23.567
> 
> 标签：javascript, codeigniter, twitter-bootstrap, codeigniter-2

I am using Codeigniter + TwitterBootstrap +jquery

Whenever i add any javascript plugin be it Uploadify(flash version), ratty, Tagit, tagsManager

The initialize function always throw this kind of error:

```
Uncaught TypeError: Object [object Object] has no method 'tagsManager' 
(anonymous function) 
c 
p.fireWith 
b.extend.ready 
H 
```

Kindly advise as to what i am doing wrong!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:15:04.857

this means the browser couldn't find method `tagsManager` and that means your script has not been loaded properly... make sure you load all your required js like jquery or tagsmanager scripts in head.... before it is called...

# c# - 从反射生成的程序集中调用 lambda

> ID：15530622
> 
> 赞同：1
> 
> 时间：2013-03-20T17:28:28.547
> 
> 标签：c#, reflection.emit

我正在使用 Reflection.Emit 创建一个程序集，我希望它调用一个特殊的回调。

这是代码的简化版本：

```
public void Call(ILGenerator il, Delegate action)
{
    il.Emit(OpCodes.Call, action.Method);
}

public static void DoStuff()
{
    Console.WriteLine("Action invoked!");
}

Call(CurrentMethod.ILGenerator, DoStuff); 
```

此代码按预期工作。

但是，我想传递一个 lambda 表达式，如下所示：

```
Call(CurrentMethod.ILGenerator, () => Console.WriteLine("test")); 
```

这次抛出以下异常：

> System.MethodAccessException：尝试通过方法“.Run()”访问方法“Compiler.Test.ImportedFunctions.b__0()”失败。

有没有办法解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:37:48.593

`Delegate`它太笼统了。试试`Action`。

**但请注意！**

如果委托的目标属性不为空，则这是不可能的。

您可以通过将目标值临时存储在静态字段中来解决此问题。

可能的解决方案（发出的修饰符）：

```
class Foo { static object target; }

public void Call(ILGenerator il, Action action)
{
    Foo.target = action.Target;
    il.Emit(OpCodes.Ldsfld, typeof(Foo).GetField("target");
    il.Emit(OpCodes.Callvirt, action.Method);
} 
```

如果您在没有递归调用的单线程环境中运行，这将起作用。

对于递归环境，您需要对 使用动态绑定`Foo.target`，这在 C# 中不可用。

幸运的是[，我已经](http://www.codeproject.com/Articles/153896/Dynamic-Binding-in-C)为 C# 编写了这样的工具。

# javascript - 如何将具有匹配组的字符加粗？

> ID：15530625
> 
> 赞同：0
> 
> 时间：2013-03-20T17:28:35.080
> 
> 标签：javascript, sharepoint, web-parts

我有一个带有字母字符的选项卡标题：abcdefghijkl ..Z 我如何在代码中初始化它：我已经声明了一个数组：

```
char[] alpha = "ABCDEFGHIJKLMNOPQRSTUVWXYZ".ToCharArray(); 
```

然后对于每个字母 carac，我通过以下方式调用以下函数：

```
foreach (char carac in alpha)
        {
            writer.Write(generateTabheader(carac));
        } 
```

功能是：

```
private string generateTabheader(char currentChar)
        {
            string tabHeaderHTML="<li id=\"tabHeader_" + currentChar.ToString() + "\" style=\"float:left;color:blue; margin-right:10px;margin-left:10px\">" + currentChar.ToString() + "</li>";
            return tabHeaderHTML;
        } 
```

因此它会显示一个包含所有 aphabet 字母的标签页眉，当用户选择一个字符时，他将返回以该字符开头的所有组。我成功地使用 caml 查询取回了所有组，并将结果存储在此列表中：result = list.GetItems(query)。如何在我的结果列表中将具有匹配组的选项卡标题的字符（通过匹配我的意思是以该字符开头的组标题）以粗体显示，而将其他字符以斜体显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:43:30.823

使用点击处理程序来检测事件。为所有 li 分配一个类名，例如 class="example"

```
 $('.example').on('click', function(event){
       $('.example').each(function() {
          $(this).removeClass('.thisClassmakesitalic');
       }
       $(this).addClass('thisClassmakesitalic');
    }); 
```

现在添加一个 CSS 样式以使元素或其父元素或任何斜体。

# autohotkey - 首次使用后 AutoHotKey 脚本失败

> ID：15530629
> 
> 赞同：1
> 
> 时间：2013-03-20T17:28:42.130
> 
> 标签：autohotkey

我正在将帮助文件作为 Word 2007 文档处理。我需要在浏览时更新屏幕截图，所以当我按下组合键时，我试图让 AHK 从右键下拉菜单中选择“更改图片”选项。我得到了代码，它运行良好……我第一次使用它。之后，我只看到右键菜单闪烁并消失。我怀疑从`Send {Down 4}`on 开始的脚本没有执行，因为我几乎看不到突出显示的“剪切”选项，但所选图像没有从文档中剪切，表明`Send {Enter}`也没有执行。

我找不到其他似乎遇到此问题的人。如果我手动重新加载我的脚本，它会再次正常工作，但只有一次。然后它又回到了闪烁下拉菜单，没有别的了。任何帮助将不胜感激。我试图将这个过程减少到尽可能少的点击次数，但它已经到了我浪费更多时间试图解决我的宏观问题的地步，而不是我只是用缓慢而尴尬的方式去做。

我现在的脚本：

```
^!z::
    Send +{F10}
    Send {Down 4}
    Send {Enter}
    return 
```

为了澄清起见：

当我删除以下所有内容`Send +{F10}`然后使用热键时，我会显示右键菜单并且没有闪烁，但同样，仅在我第一次使用它时。之后，菜单返回到屏幕上闪烁一次。为了比较，实际按下 Shift 和 {F10} 会显示右键菜单，并且它不会在抬起时消失。

如果我将所有三个发送命令移到一行以获取`Send +{F10} {Down 4} {Enter}`脚本从右键单击菜单中执行“剪切”选项，然后将光标向下移动 4 行，然后发送`{Enter}`击键。与之前的实例不同，这组操作在第一次使用脚本后起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:42:07.140

在我的 Word 副本中，如果选择了图像，则控制键会弹出一个辅助“布局选项”菜单。虽然我不确定为什么它第一次对你有用，但后来却没有，但当我在最后测试它时，如果我改变两件事，它就会起作用：

1.  使用`mouseclick, right`代替`Send +{F10}`
2.  将快捷键修饰符从 shift-ctrl 更改为 Win，即设置为`#z`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:53:50.053

您可以尝试发送键盘快捷键而不是向下命令

```
SetBatchLines, 1
SetKeyDelay , 100   ; in miliseconds, keep increasing until your pc can hadle it

!x::    ; your hotkey in my case alt + x which is similar to ctrl + x for cutting text
    Send +{F10}
    Send {t}    ; use the cut keyboard shortcut, for word should be 't'. if for some weird reason isn't change it
    Send {Enter}
return 
```

# c# - ORMLite 下的 SQLite 不允许在事务完成后执行任何操作

> ID：15530631
> 
> 赞同：5
> 
> 时间：2013-03-20T17:28:49.337
> 
> 标签：c#, sqlite, servicestack, ormlite-servicestack

通过 ServiceStack 的 OrmLite 在 SQLite 中创建并提交事务后，我无法继续发出任何查询。

例如，以下测试失败：

```
 [Test, Explicit]
        public void Can_query_after_transaction_is_committed()
        {
            var connection = new OrmLiteConnectionFactory(":memory:", false, SqliteDialect.Provider, true);
            using (var db = connection.OpenDbConnection())
            {
                db.DropAndCreateTable<SimpleObject>();
                var trans = db.OpenTransaction();
                db.Insert(new SimpleObject{test="test"});
                trans.Commit();
                Assert.DoesNotThrow(()=> db.Select<SimpleObject>()); //throws
            }
        }

class SimpleObject{public string test { get; set; }} 
```

我得到的例外是：“事务与命令的连接无关”围绕OrmLite 的[那一行](https://github.com/ServiceStack/ServiceStack.OrmLite/blob/master/src/ServiceStack.OrmLite/OrmLiteConnection.cs#L81)失败。但是，我根本不应该参与交易。

当我使用 SQL Server 作为提供程序时，代码如下

```
new OrmLiteConnectionFactory(
                    @"Data Source=.\SQLEXPRESS;Initial Catalog=TestEmpty;Persist Security Info=True;User ID=db;Password=db;",
                     false, SqlServerDialect.Provider, true);*/ 
```

这个测试工作正常。

我是否错误地结束了交易？它是 ServiceStack.OrmLite 中的错误吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T10:05:06.060

原来在我当前使用的版本中已经[报告](https://github.com/ServiceStack/ServiceStack.OrmLite/issues/170)并[修复了类似的问题。](https://github.com/ServiceStack/ServiceStack.OrmLite/commit/0f1b423918fa00206fffb8e02d93a27e1f1c3ef1)在将我的测试与[通过的](https://github.com/ServiceStack/ServiceStack.OrmLite/blob/master/tests/ServiceStack.OrmLite.Tests/OrmLiteTransactionTests.cs)测试进行比较后，我发现我没有 Dispose() 我的交易。

最后的答案是：**交易必须被处置**。如果不是，则使用 SQLite 时代码将失败。

以下测试通过：

```
 public void Can_query_after_transaction_is_committed()
        {
            var connection = new OrmLiteConnectionFactory(":memory:", true, SqliteDialect.Provider, true);
            using (var db = connection.OpenDbConnection())
            {
                db.DropAndCreateTable<SimpleObject>();
                using (var trans = db.OpenTransaction()) 
                {
                   db.Insert(new SimpleObject {test = "test"});
                   trans.Commit();
                }
                Assert.DoesNotThrow(()=> db.Select<SimpleObject>());
            }
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-04T16:07:28.540

我的问题是相似的，我的搜索导致了这里。尝试编写单元测试来测试我的服务时，我得到了相同的“事务与命令的连接无关”异常。我的情况不同的是，我使用的唯一事务（在我正在测试的服务中）正确处理了它的连接，所以我认为这不适用。

（我使用的是 ServiceStack v3.9.71。）

我的测试代码（失败）如下所示：

```
[Test]
public void Test_Service_Delete() {
    var DatabaseFactory = new OrmLiteConnectionFactory(":memory:", false, SqliteDialect.Provider, true);

    using (var db = DatabaseFactory.OpenDbConnection()) {
        var parentId = db.InsertParam(new ParentObject { name = "Bob" }, true);
        db.Insert(new ChildObject { ParentId = parentId, name = "Sam" });

        var service = Container.Resolve<TestService>();
        var response = service.Delete(new DeleteRequestObject(parentId));

        Assert.That(db.Select<ParentObject>(parentId), Has.Count.EqualTo(0));
        Assert.That(db.Select<ChildObject>("ParentId = {0}", parentId), Has.Count.EqualTo(0));
    }
} 
```

我的 TestService.Delete 方法中有一个事务（因为它删除了对象和任何关联的子对象），但它被包装在 using 块中，如下所示：

```
using (var db = DatabaseFactory.OpenDbConnection()) {
    using (var transaction = db.BeginTransaction(IsolationLevel.ReadCommitted)) {
        // do stuff here
    }
} 
```

尽管如此，在调用 service.Delete 后的第一行仍引发了“事务与命令的连接不相关”异常。

我第一次尝试解决它（没有奏效）是这样的：

```
[Test]
public void Test_Service_Delete() {
    var DatabaseFactory = new OrmLiteConnectionFactory(":memory:", false, SqliteDialect.Provider, true);

    int parentId;
    using (var db = DatabaseFactory.OpenDbConnection()) {
        parentId = db.InsertParam(new ParentObject { name = "Bob" }, true);
        db.Insert(new ChildObject { ParentId = parentId, name = "Sam" });
    }

    var service = Container.Resolve<TestService>();
    var response = service.Delete(new DeleteRequestObject(parentId));

    using (var db = DatabaseFactory.OpenDbConnection()) {    
        Assert.That(db.Select<ParentObject>(parentId), Has.Count.EqualTo(0));
        Assert.That(db.Select<ChildObject>("ParentId = {0}", parentId), Has.Count.EqualTo(0));
    }
} 
```

最终起作用的是在事务中的服务调用之后包装数据库调用。

```
[Test]
public void Test_Service_Delete() {
    var DatabaseFactory = new OrmLiteConnectionFactory(":memory:", false, SqliteDialect.Provider, true);

    int parentId;
    using (var db = DatabaseFactory.OpenDbConnection()) {
        parentId = db.InsertParam(new ParentObject { name = "Bob" }, true);
        db.Insert(new ChildObject { ParentId = parentId, name = "Sam" });
    }

    var service = Container.Resolve<TestService>();
    var response = service.Delete(new DeleteRequestObject(parentId));

    using (var db = DatabaseFactory.OpenDbConnection()) {
        using (var transaction = db.OpenTransaction()) {
            Assert.That(db.Select<ParentObject>(parentId), Has.Count.EqualTo(0));
            Assert.That(db.Select<ChildObject>("ParentId = {0}", parentId), Has.Count.EqualTo(0));
        }
    }
} 
```

我仍然不清楚为什么这种解决方法有效，但我想我会为遇到此问题的其他人记录它。

# python - 为什么 sys.getdefaultencoding() 与 sys.stdout.encoding 不同，这如何破坏 Unicode 字符串？

> ID：15530635
> 
> 赞同：8
> 
> 时间：2013-03-20T17:29:10.397
> 
> 标签：python, stdout, utf, sys

我花了几个小时来寻找 Unicode 字符串的问题，这些字符串被分解为 Python (2.7) 对我隐藏的东西，但我仍然不明白。首先，我尝试`u".."`在我的代码中始终如一地使用字符串，但这导致了臭名昭著的`UnicodeEncodeError`. 我尝试使用`.encode('utf8')`，但这也无济于事。最后，事实证明我不应该使用任何一个，这一切都会自动进行。然而，我（在这里我需要感谢一位帮助我的朋友）在我的头撞到墙上时确实注意到了一些奇怪的事情。`sys.getdefaultencoding()`返回*ascii*，同时`sys.stdout.encoding`返回*UTF-8*。`sys`1.在下面的代码中可以正常工作，无需对和 2\. 提出任何修改`UnicodeEncodeError`。如果我更改默认系统编码 `reload(sys).setdefaultencoding("utf8")`，然后 2\. 工作正常。我的问题是为什么这两个编码变量首先是不同的，我如何设法在这段简单的代码中使用错误的编码？请不要将我发送到[Unicode HOWTO](http://docs.python.org/2/howto/unicode.html)，我显然在数十个关于`UnicodeEncodeError`.

```
#  -*- coding: utf-8 -*-
import sys

class Token:
    def __init__(self, string, final=False):
        self.value = string
        self.final = final

    def __str__(self):
        return self.value

    def __repr__(self):
        return self.value

print(sys.getdefaultencoding())
print(sys.stdout.encoding)

# 1.
myString = "I need 20 000€."
tok = Token(myString)
print(tok)

reload(sys).setdefaultencoding("utf8")

# 2.
myString = u"I need 20 000€."
tok = Token(myString)
print(tok) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-11-16T00:37:46.430

> 我的问题是为什么这两个编码变量首先是不同的

它们服务于不同的目的。

`sys.stdout.encoding`应该是您的终端用来解释文本的编码，否则您可能会在输出中得到 mojibake。在一个环境中可能是 utf-8，在另一个环境中可能是 cp437，等等。

`sys.getdefaultencoding()`在 Python 2 上用于隐式转换（当未显式设置编码时），即 Python 2 可以将仅 ascii 的字节串和 Unicode 字符串混合在一起，例如，`xml.etree.ElementTree`将 ascii 范围内的文本存储为字节串或[`json.dumps()`返回仅 ascii 的字节串而不是 Unicode在 Python 2 中](https://stackoverflow.com/a/32539609/4279)——可能是由于性能的原因——字节在表示 ascii 字符方面比 Unicode 便宜。Python 3 中禁止隐式转换。

`sys.getdefaultencoding()`始终`'ascii'`在 Python 2 中的所有系统上，除非您不应该这样做覆盖它，否则它可能会隐藏错误，并且由于使用可能错误的数据编码的隐式转换，您的数据可能很容易损坏。

顺便说一句，还有另一种常见的编码`sys.getfilesystemencoding()`可能与两者不同。`sys.getfilesystemencoding()`应该是用于对 OS 数据（文件名、命令行参数、环境变量）进行编码的编码。

使用声明的源代码编码`# -*- coding: utf-8 -*-`可能与所有已经提到的编码不同。

自然，如果您从文件、网络中读取数据；它可能使用与上述不同的字符编码，例如，如果在记事本中创建的文件使用 Windows ANSI 编码保存，例如`cp1252`在另一个系统上，所有标准编码都可能与它不同。

关键是：由于与 Python 无关的原因可能有***多种***编码，为了避免头痛，使用 Unicode 表示文本：在输入时尽快将编码文本转换为 Unicode，并将其编码为字节（可能使用不同的编码）尽可能晚地输出——这就是所谓的[Unicode 三明治](http://nedbatchelder.com/text/unipain/unipain.html)的概念。

> 我如何设法在这段简单的代码中使用错误的编码？

1.  您的第一个代码示例不好。您在 Python 2 上的字节字符串中使用了不应该使用的非 ascii 文字字符。仅将字节串的文字用于二进制数据（或必要时称为本机字符串）。`I need 20 000Γé¼.`如果您在任何不使用 utf-8 兼容编码的环境（如 Windows 控制台）中使用 Python 2 运行该代码，则该代码可能会产生诸如（注意字符噪音）之类的 mojibake

2.  第二个代码示例可以假设`reload(sys)`不是它的一部分。如果您不想在所有字符串文字前加上`u''`; 你可以使用`from __future__ import unicode_literals`

您的实际问题是`UnicodeEncodeError`错误，`reload(sys)`不是正确的解决方案！
正确的解决方案是[在 POSIX ( `LANG`, `LC_CTYPE`)](https://stackoverflow.com/a/33060935/4279)上正确配置您的语言环境，或者[如果输出重定向到管道/文件或安装](https://stackoverflow.com/a/32176732/4279)[以将 Unicode 打印到 Windows 控制台，则](https://stackoverflow.com/a/32176732/4279)[设置`PYTHONIOENCODING``win-unicode-console`](https://stackoverflow.com/a/32176732/4279)envvar 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-14T06:29:34.990

我注意到一些标准代码（邮递员库）的相同行为。感谢您的分析，它帮助我节省了一些时间。:-) 问题是完全一样的。我的系统使用`sys.getdefaultencoding()`和 gets `ascii`，这不适合处理 1000 个 UTF-8 编码名称的列表。

一方面，stdin/stdout 甚至文件系统编码（utf-8）和另一方面（ascii）的“defaultencoding”之间存在不匹配。此线程：[如何在 Python < 3 中将 UTF-8 编码文本打印到控制台？](https://stackoverflow.com/questions/11741574/how-to-set-the-default-encoding-to-utf-8-in-python)似乎表明它是众所周知的并且[正在更改 Python 的默认编码？](https://stackoverflow.com/questions/2276200/changing-default-encoding-of-python)包含一些迹象表明更同质的（如“`utf-8`无处不在”）会破坏其他东西，如散列实现。

因此，更改默认编码也不简单。（有关执行此操作的各种方法，请参见[http://blog.ianbicking.org/illusive-setdefaultencoding.html](http://blog.ianbicking.org/illusive-setdefaultencoding.html)。）它已从文件中的`sys`实例中删除`site.py`。

# batch-file - 不必在 Batch 中有准确的输入

> ID：15530640
> 
> 赞同：0
> 
> 时间：2013-03-20T17:29:28.197
> 
> 标签：batch-file

所以基本上，有什么办法可以使批处理文件不需要确切的答案来执行操作。例如：

```
if %c%=images goto :images 
```

上面的意思是我必须输入确切的单词，，`images`如果我添加更多单词，它不会进入`:images`标签。我将如何仅使用您输入的句子中的一个词将其转到标签。
例如，如果它问我：

```
Where would you like to go? 
```

我说：

```
The image section please. 
```

然后它带我到图像部分，而无需说`image`。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:34:48.053

你可以使用`find`.

```
echo %c% | find /i "image" >NUL && goto images 
```

这也将提供不区分大小写的匹配。此外，如果您需要更好地调整匹配，您可以类似地使用`findstr`基于正则表达式的匹配。

`|`如果您对上述及`&&`以上如何发挥他们的魔力感到好奇，请参阅[命令重定向](http://ss64.com/nt/syntax-redirection.html)以获取更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T17:38:08.230

这里有一个类似的问题： [Batch file: Find if substring is in string (not in a file)](https://stackoverflow.com/questions/7005951/batch-file-find-if-substring-is-in-string-not-in-a-file)

接受的答案可能适用于您的情况：

```
if /i "%c:image=%" neq "%c%" goto images 
```

此技术使用字符串替换将单词替换为`image`空（从您正在搜索的字符串中删除单词），然后将其与原始字符串进行比较。如果它们不同，则找到子字符串。

# linux - behat错误的ant构建脚本

> ID：15530644
> 
> 赞同：0
> 
> 时间：2013-03-20T17:29:36.010
> 
> 标签：linux, bash, ant, jenkins, behat

我正在尝试为 behat 测试设置一个 ant 构建脚本，以便我可以从 jenkins 运行它们。当我使用 bin/behat 或 ./bin/behat 从命令行运行 behat 时，输出按预期工作。但是当我使用以下 ant 脚本时

```
<project name="behat" basedir=".">
  <exec dir="bin" executable="./behat">
  </exec>
</project> 
```

我收到此错误：

```
Buildfile: <mydir>/build.xml
 [exec]
 [exec]
 [exec]
 [exec]   [RuntimeException]
 [exec]   Context class not found.
 [exec]   Maybe you have provided wrong or no `bootstrap` path in your behat.yml:
 [exec]   http://docs.behat.org/guides/7.config.html#paths
 [exec]
 [exec]
 [exec]
 [exec] behat [--init] [-f|--format="..."] [--out="..."] [--lang="..."] [--[no-]ansi] [--[no-]time] [--[no-]paths] [--[no-]snippets] [--[no-]snippets-paths] [--[no-]multiline] [--[no-]expand] [--story-syntax] [-d|--definitions="..."] [--name="..."] [--tags="..."] [--cache="..."] [--strict] [--dry-run] [--rerun="..."] [--append-snippets] [--append-to="..."] [features]
 [exec]
 [exec]
 [exec] Result: 1

BUILD SUCCESSFUL
Total time: 0 seconds 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:51:34.087

您不应该从 bin 目录运行 behat。它不会找到您的 behat.yml 文件。

您应该像这样运行它：

```
./bin/behat 
```

或传递配置文件的路径：

```
cd bin
./bin/behat --config ../behat.yml 
```

后面的我没试过。您的 ant 脚本可能类似于：

```
<project name="behat" basedir=".">
  <exec dir="${basedir}" executable="./bin/behat" />
</project> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T05:22:16.483

我将 ant 排除在外，直接使用 jenkins 运行 behat 命令：

```
cd <mydir>
bin/behat 
```

我需要检查的一件事是詹金斯返回的构建失败，但这可能是由于行为测试失败。

# json - 如何在 Haxe 中迭代动态对象

> ID：15530645
> 
> 赞同：27
> 
> 时间：2013-03-20T17:29:41.367
> 
> 标签：json, dynamic, loops, haxe

我从 JSON ( `haxe.Json.parse()`) 解析了对象，我需要对其进行迭代。我已经尝试将此对象转换为`Array<Dynamic>`：

```
var data:String='{"data":{"0":0,"1":1},"method":"test"}';
var res:{method:String,data:Array<Dynamic>} = haxe.Json.parse(data);
for (n in res.data)
    trace('aa') 
```

没有`Can't iterate dynamic`例外，只是不工作（迭代）。我完全不明白为什么在 Haxe 中迭代过程如此困难。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-21T08:54:49.410

为了发布完整的答案，以防其他人想知道

在您的第一个示例中，您告诉编译器“res”包含两个属性 - 一个称为“method”（它是一个字符串）和一个称为“data”（它是 Array）。现在您使用的 JSON 实际上没有`Array<Dynamic>`，它只有一个动态对象。一个数组看起来像：`"data":[0,1]`.

因此，假设您打算将 JSON`data`作为 Dynamic 对象，以下是使用 Reflect 循环遍历它的方式（正如您在评论中提到的那样）：

```
var data:String='{"data":{"0":0,"1":1},"method":"test"}';
var res = haxe.Json.parse(data);
for (n in Reflect.fields(res.data))
    trace(Reflect.field(res.data, n)); 
```

请注意，这里我们不必指定“res”的类型，因为我们使用的是反射，只需将其保留为动态就可以了。

现在，如果您的 JSON 实际上包含一个数组，那么代码可能如下所示：

```
var data:String='{"data":[0,1],"method":"test"}';
var res:{method:String,data:Array<Int>} = haxe.Json.parse(data);
for (n in res.data)
    trace(n); 
```

在这里，您使用显式类型来告诉编译器 res.data 是一个数组（这一次它实际上是），并且它可以正常循环它。

您在编译时没有收到错误的原因是因为编译器认为那里真的会有一个数组，正如您所说的那样。在运行时，它是否抛出异常可能取决于目标......但你可能还是想远离那个:)

**两种代码风格的演示：http: [//try.haxe.org/#772A2](http://try.haxe.org/#772A2)**

# regex - sed替换html

> ID：15530647
> 
> 赞同：0
> 
> 时间：2013-03-20T17:29:42.330
> 
> 标签：regex, vim, sed

难以使用 html 文件进行 sed 搜索和替换。

我有多个部分如下所示：

```
<TABLE class="cattable">   
  <TBODY>
    <TR>
      <TH colspan="2">Header</TH></TR>
    <TR>
      <TD>Random Amount of Data</TD>
      <TD>3</TD></TR>
    <TR>
      <TD>Moar Data</TD>
      <TD>3</TD></TR>
    <TR>
      <TD>Yup, More</TD>
      <TD>4</TD></TR></TBODY></TABLE> 
```

我需要：

替换为 xxxxFOOxxxx：

```
<TABLE class="cattable">
  <TBODY>
    <TR>
     <TH colspan="2"> 
```

拿着吧：

```
Header 
```

将其替换为 yyyyFOOyyyy：

```
</TH></TR> 
```

拿着吧：

```
<TR>
   <TD>Random Amount of Data</TD>
   <TD>3</TD></TR>
<TR>
   <TD>Moar Data</TD>
   <TD>3</TD></TR>
<TR>
   <TD>Yup, More</TD>
   <TD>4</TD></TR> 
```

用 zzzzFOOzzzz 替换它：

```
</TBODY></TABLE> 
```

这是我在 vim 中尝试过的，但不能正确限制贪婪的 .* ：

```
s:\(<TABLE class="cattable">\_s\s*<TBODY>\_s\s*<TR>\_s\s*<TH colspan="2">\)\(.*\)\(<\/TH><\/TR>\)\(\_.*[^<]*\)\(<\/TABLE>\):xxxxFOOxxxx\2yyyyFOOyyyy\4zzzzFOOzzz<br>:g 
```

蒂亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:39:49.937

替换`*`为`\{-}`以获得非贪婪匹配（与`*?`PCRE/Perl 正则表达式相同）。对于更复杂的情况，您将不得不使用带有负前瞻/后视的东西：就像`\(\(<\/TH><\/TR>\)\@!.\)*`代替`.*`，这里`.\{-}`可能就足够了。

注意：不适用于`sed`.

注意 2：`vim`不使用 BRE 或 ERE（基本/扩展正则表达式）`sed`，`vim` `:s`不调用任何外部程序（包括`sed`），您的尝试也不适合`sed`. 因此，如果您不是要在从标签中`sed`删除时询问如何执行此操作。`sed`

# jquery - 复制选择的选项并插入另一个选择 jQuery

> ID：15530649
> 
> 赞同：0
> 
> 时间：2013-03-20T17:29:43.697
> 
> 标签：jquery, ajax

大家好，我有一个网站，如果我改变一个选择，就会启动一个 ajax 调用，它会返回一个选择。想要复制它的选项并插入到我现有的选择中。这是我的代码：

```
$(document).ready(function(){
    $("#nation").change(function() {
        var nation_id = $(this).val();
        change_city_by_nation(nation_id);
    });

    function change_city_by_nation(nation_id){
            var site_url_city ="<?php echo(site_url('/backend/city/get_city_by_nation_id')); ?>";
            $.ajax({   
                url: site_url_city, 
                async: false,
                type: "POST", 
                data: "nation_id="+nation_id, 
                dataType: "html", 

                success: function(data) {
                    $('#city').html(data);
                    $('#city').prepend("<option value='0' selected='selected'>All city</option>");

                }
             });
        }
});

 <select name="nation" id="nation" style="width:180px;" >
     <option value="2">Nation2</option>
     <option value="3">Nation3</option>
</select>
<select name="city" id="city" style="width:180px;" >
     <option value="0">All city</option>
</select> 
```

数据警报是：

```
<select name="citylist">
<option value="39">Adelaide</option>
<option value="43">Alice Springs</option>
<option value="44">Brisbane</option>
<option value="45">Cairns</option>
<option value="36">Canberra</option>
<option value="31">Darwin</option>
<option value="37">Gold Coast</option>
<option value="32">Margaret River - Regione dei Vini</option>
<option value="40">Melbourne</option>
<option value="41">Palm Cove</option>
<option value="35">Perth</option>
<option value="42">Port Douglas</option>
<option value="33">Sydney</option>
<option value="34">Tasmania</option>
<option value="38">Townsville</option>
</select> 
```

如何将从数据返回我的选项复制到成功函数中选择城市？因为我以我的方式将一个选择放入另一个选择中。我无法更改 ajax 的结果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:55:20.693

我认为您想过滤您的数据响应，因此本[文档](http://api.jquery.com/filter/) 首先过滤您的数据，然后附加您的选项：

```
success: function(data) {
                    $('#city').html($(data).filter('option'));
                    $('#city').prepend("<option value='0' selected='selected'>All city</option>");

                } 
```

# python - Python：列表列表中的唯一性

> ID：15530651
> 
> 赞同：-3
> 
> 时间：2013-03-20T17:29:51.730
> 
> 标签：python, list

给定一个列表列表：

```
L = [[1,2,3], [3,4,5], [1,2,3]] 
```

如何获取每个列表都是唯一的列表：

```
L = [[1,2,3], [3,4,5]] 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T17:33:50.770

如果您不关心子列表的顺序：

```
In [11]: list(map(list, set(map(tuple, L))))
Out[11]: [[3, 4, 5], [1, 2, 3]] 
```

更好的是，您可能应该只使用元组集作为数据结构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T17:34:26.400

有点胡闹，但这个怎么样？

```
[list(el) for el in set(tuple(el) for el in L)] 
```

它之所以有效，是因为列表不能相互比较，但元组可以。如果您尝试直接从列表列表中创建一个集合，则错误消息会泄露它：

```
unhashable type: 'list' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T17:37:48.147

```
L = [[1,2,3], [3,4,5], [1,2,3]]
newlist = []
for item in L:
    if item not in newlist:
        newlist.append(item) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T18:55:32.683

您可以转换为一组元组，然后再转换回一个列表。

```
L = [[1,2,3], [3,4,5], [1,2,3]]
setL = set(tuple(i) for i in L) 
newL = list(list(i) for i in setL)
print newL 
```

[[3, 4, 5], [1, 2, 3]]

# c# - 如何创建在用户设置的特定日期和时间弹出的 WPF C# 应用程序？

> ID：15530652
> 
> 赞同：1
> 
> 时间：2013-03-20T17:29:52.370
> 
> 标签：c#, wpf, xaml, mvvm, timer

我需要它有点像这里的应用程序：[http ://www.youtube.com/watch?v=Cw6Ml6gZqU8](http://www.youtube.com/watch?v=Cw6Ml6gZqU8)

这是一个提醒。用户输入注释，然后设置表单将弹出的日期和时间。它是一个 Windows 窗体应用程序。但是，我需要一个 WPF 应用程序的帮助，用户设置特定的日期和时间（比如 2013 年 3 月 15 日晚上 10:00）来运行事件。一旦用户设置了日期和时间，然后他们命名计时器并保存它。到目前为止，我已经添加了 TimePicker 所需的 .dll 等（在 WPF 中不可用，但在 Windows 窗体的扩展类中）。

我真的需要一个开始，到目前为止我所发现的只是利用 Dispatch Timer 类，但它只设置时间。没有找到好的资源。我也会接受文章建议！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:54:18.567

看看[Quartz](http://nuget.org/packages/Quartz/)库。它提供了以您描述的方式安排任务的功能。

任务调度[可能没有](http://ayende.com/blog/155489/rotten-scheduling-dont-roll-your-own)你想象的那么简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:54:22.233

您可以创建一个线程或后台工作人员，使用“DateTime.now()”每分钟检查一次日期时间，然后显示一个弹出对话框。

无论如何，您都需要一个正在运行的进程，但您可以将其设置为后台进程，直到出现提醒...

# javascript - 将图像存储在缓存中

> ID：15530654
> 
> 赞同：1
> 
> 时间：2013-03-20T17:30:00.723
> 
> 标签：javascript, jquery, performance

我想将图像存储在缓存中以加快我的网站速度。那么，如何在 Javascript 或 jQuery 中将图像存储在缓存中以优化网站的速度？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T17:48:09.290

您可以通过在初始加载时使用 HTML 隐藏的 img 标签来强制将这些图像预先“加载”到缓存中。稍后对相同图像的 HTTP 请求应从缓存中返回。

默认情况下，大多数浏览器都会为您进行缓存，前提是您没有在这些图像资源的 HTTP 响应标头中提供其他说明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T17:56:38.170

尝试这个

```
$('#gallery img').each(function(i){
    if(this.complete){
        doSomething();
    } else {
        $(this).load(function(){
            doSomethingElse();
        });
    }
}); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-20T17:45:06.647

谷歌会帮助你！

看看[http://developer.android.com/guide/topics/data/data-storage.html#filesInternal](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)

# jquery - jQuery : 包含 Selector if else 语句

> ID：15530655
> 
> 赞同：1
> 
> 时间：2013-03-20T17:30:01.643
> 
> 标签：jquery, selector, contains, if-statement

我有一个结果页面，向用户展示他们在网络表单上的得分情况。我正在尝试根据他们的回答显示不同的消息。

我已经设置了一个基本警报来显示用户选择的内容。

```
var q1 = $('#webform-component-fieldset-1--question-1').text();
alert(q1);

if ($('#webform-component-fieldset-1--question-1:contains("A. Yes")')) {
    $('.results-wrapper').hide();
    $('.results').append('<div class="popup">User Selected A. Yes, for the first answer.</div>');
}
else if ($('#webform-component-fieldset-1--question-1:contains("B. No")')) {
    $('.results-wrapper').hide();
    $('.results').append('<div class="popup">User Selected B. No, for the first answer.</div>');
}
else if ($('#webform-component-fieldset-1--question-1:contains("C. I do not know")')) {
   $('.results-wrapper').hide();
   $('.results').append('<div class="popup">User Selected C. I do not know, for the first answer.</div>');  
}
else {
   alert('something went wrong');
} 
```

[http://jsfiddle.net/Hr6Lj/10/](http://jsfiddle.net/Hr6Lj/10/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:39:02.967

我就是这样做的（使用 jQuery 的功能[`data()`](http://api.jquery.com/data/)）（[演示](http://jsfiddle.net/sperske/Hr6Lj/12/)）

```
<div class="results">
    <div class="results-wrapper">
        <div class="form-item webform-component webform-component-display" id="webform-component-fieldset-1--question-1"
        data-answer="C">C. I do not know</div>
    </div>
</div>

<script>
  var updateAnswer = function (question) {
    var answer = question.data('answer');
    if (answer === 'A') {
      $('.results-wrapper').hide();
      $('.results').append('<div class="popup">User Selected A. Yes, for the first answer.</div>');
    } else if (answer === 'B') {
      $('.results-wrapper').hide();
      $('.results').append('<div class="popup">User Selected B. No, for the first answer.</div>');
    } else if (answer === 'C') {
      $('.results-wrapper').hide();
      $('.results').append('<div class="popup">User Selected C. I do not know, for the first answer.</div>');
    } else {
      alert('something went wrong');
    }
  }
  updateAnswer($('#webform-component-fieldset-1--question-1'));
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:32:02.457

以下将始终为真，因为对象始终为真。

```
if ($('#webform-component-fieldset-1--question-1:contains("A. Yes")')) 
```

您想要知道是否选择了任何元素。

```
if ($('#webform-component-fieldset-1--question-1:contains("A. Yes")').length) 
```

# javascript - 在while循环周围添加一个div

> ID：15530661
> 
> 赞同：0
> 
> 时间：2013-03-20T17:30:12.207
> 
> 标签：javascript, jquery, list

我有这个脚本。

```
var $bigList = $('.list-products'), group;
while((group = $bigList.find('li:gt(3):lt(4)').remove()).length) {
    $('<ul class="list-products"/>').append(group).appendTo('.box-products');
} 
```

但我想要一个 div 围绕每个 .

```
$('<div class="container"><ul class="list-products"/>').append(group).appendTo('.box-products'); 
```

但这行不通。我错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:43:51.960

看起来您正在创建一个 div，但实际上并未将`<ul>`标签添加为孩子，请尝试以下操作：

```
 $('<div class="container"></div>').append($('<ul class="list-products"/>').append(group)).appendTo('.box-products'); 
```

或者如果这仍然不能解决您的问题，您可能需要拆分语句。

```
 var $div = $("<div></div>");
 $div.append($('<ul class="list-products"/>').append(group)).appendTo('.box-products'); 
```

我没有时间制作小提琴，但如果这些解决方案都不起作用，我可以。

# arrays - powershell条件不处理数组中的所有值

> ID：15530665
> 
> 赞同：1
> 
> 时间：2013-03-20T17:30:18.883
> 
> 标签：arrays, powershell, scripting

我是 powershell 的新手，但很想好好利用它。我正在编写一个应该执行以下操作的脚本：

*   检查特定位置（映射驱动器）中是否存在特定文件夹
*   如果文件夹存在，则返回列表
*   如果该文件夹不存在，则创建它。

理想情况下，我想在 check-if exists-remove-item (subdir) 方面对其进行改进；检查-如果不存在-创建

这是为了促进特定软件的归档过程的自动化。我现在拥有的东西有点工作，但我不知道如何让它完全符合我的要求。

这是代码：

```
$X = @("Server1", "Server2", "Server3")
$ChkFile = "f:\archive\$server\AABackup"
$myFolder = "f:\archive\$server"
$DirExists = Test-Path $ChkFile
Foreach ($server in $x){
  IF ($DirExists -eq $True) {
     Remove-Item $ChkFile -recurse
     import-Module "AppAssurePowerShellModule"
     start-archive -protectedserver $server -startdate "18/03/2013 5:30 PM" -path "f:\archive\$server"
    }
Elseif ($DirExists -ne $True) {
     New-Item -path $myFolder -itemType "directory"
     import-Module "AppAssurePowerShellModule"
     start-archive -protectedserver $server -startdate "18/03/2013 5:30 PM" -path "f:\archive\$server"
    }
} 
```

是的，我知道这很粗糙……虽然这是我的第一次尝试，所以我绝对可以从这里更有经验的脚本编写者那里受益。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T18:16:35.780

您正在设置`$ChkFile`,`$myFolder`并且`$DirExists` *在*循环之前，这意味着 `$server`它还没有值，并且 - 因为变量是立即评估的 - 这些变量将包含垃圾。

您需要在`foreach`循环内移动这三个语句。

你也不需要比较`-eq $true`；这会更简单：

```
if ($dirExists) {
    # ...
}
else {
    # ...
} 
```

哦，你只需要导入一次模块——在脚本的顶部做。

另外，就风格而言：PowerShell 关键字通常应为小写：`foreach`, `if`, `elseif`; 调用 cmdlet 时保持一致（您混合使用`lower-case`and`Upper-Case`和`lower-Case`。请注意，这些并没有真正的区别，但是使用一致的样式可以让其他人更容易阅读代码。我将这些规则建立在我在 TechNet、PoshCode 和这里​​看到的，顺便说一下——它们绝对是主观的。

而且，就个人而言，我使用`$lowerCase`局部变量和`$UpperCase`参数（因为它使自动生成的帮助文本看起来更好）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T18:10:07.933

试一试。

```
$specificPath = Z:\MYDir\MySubDir

if(!(Test-Path $SpecificPath))
{
    Mkdir $SpecificPath  
}
Else
{
    Get-ChildItem $specificPath
} 
```

说明：这将检查`$SpecificPath`使用 Test-Path 中包含的路径是否存在，这将返回一个布尔值。由于我`(!())`在 IF 语句中使用了语法，它会尝试将该语句评估为 false，如果路径不存在，它将运行第一个代码块。 `MkDir`是 的别名`New-ItemProperty`，如果您只传递一个路径，`Mkdir`它将创建一个目录，类似于 windows MkDir 命令。如果包含在 IF 语句中的语句未计算为假，则 ELSE 块将运行，并对变量执行`get-childitem`a `$specificpath`。

# c# - WPF将未知数量的字符串传递给用户控件

> ID：15530668
> 
> 赞同：0
> 
> 时间：2013-03-20T17:30:34.700
> 
> 标签：c#, wpf, xaml, user-controls

好的，所以我有一个具有图像 url 属性的用户控件。

```
public static readonly DependencyProperty ImageUrlProperty = DependencyProperty.Register("ImageUrl", typeof(string), typeof(CoreGameTile));
public string ImageUrl
        {
            get { return (string)GetValue(ImageUrlProperty); }
            set { SetValue(ImageUrlProperty, value); }
        }
```

现在我将如何在不知道确切数字的情况下传递多个图像 url。

所以有时我会有 5 个图片网址，有时我可能有 2 个左右。在不知道确切数量的情况下传递多个图像网址的方法是什么。

我也希望能够使用 XAML 像这样添加它

```
<Controls:CoreGameTile Width="200" Height="100" Margin="2" Title="Bink" ImageUrl="http://www.splashdamage.com/screens_brink/031.jpg"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:33:32.577

也许你可以传递一个`List`of `ImageUrl`'s 并且你可以使用一个`foreach`循环来设置`ImageUrl`列表中的每一个？

```
public string ImageUrl
{
    get { return (List<string>)GetValue(ImageUrlProperty); }
    set
    {
        foreach (ImageUrl url in value)
        {
            SetValue(ImageUrlProperty, url);
        }
    }
} 
```

# java - 试图让 Spring SecurityConfig 与 Spring MVC 和 JavaConfig 一起工作

> ID：15530670
> 
> 赞同：4
> 
> 时间：2013-03-20T17:30:37.463
> 
> 标签：java, spring, spring-mvc, spring-security

我正在尝试让 Spring SecuirtyConfig 与 Spring MVC 和 JavaConfig 一起使用，但出现以下错误：

> java.lang.IllegalStateException：未找到 WebApplicationContext：未注册 ContextLoaderListener？org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:251)

这是我的 SampleSimpleWebSecurityConfig：

```
@Configuration
@EnableWebSecurity
public class SampleSimpleWebSecurityConfig extends SimpleWebSecurityConfig {

    private static final Logger logger = LoggerFactory.getLogger(SampleSimpleWebSecurityConfig.class);

    protected void authorizeUrls(ExpressionUrlAuthorizationRegistry interceptUrls) {

        logger.warn("* * Loadinging Role(s) * *");
        interceptUrls
                .antMatchers("/*").permitAll()
                .antMatchers("/ask-union").hasRole("ROLE_VERIFIED_MEMBER");
    }

    protected void configure(
            SecurityFilterChainSecurityBuilder springSecurityFilterChain) throws Exception {
        springSecurityFilterChain
                .formLogin()
                .permitAll();
    }

    protected void registerAuthentication(AuthenticationRegistry registry) throws Exception {
        registry
                .inMemoryAuthentication()
                .withUser("xxxx@aol.com.dev").password("testing").roles("ROLE_VERIFIED_MEMBER").and();

    }
} 
```

这是我的 web.xml：

```
 <servlet>
    <servlet-name>Spring MVC Dispatcher Servlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextClass</param-name>
        <param-value>org.springframework.web.context.support.AnnotationConfigWebApplicationContext</param-value>
    </init-param>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>org.xxxx.inquiryconfig</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>Spring MVC Dispatcher Servlet</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

<filter>
    <filter-name>securityFilter</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    <init-param>
        <param-name>org.xxxx.inquiryconfig.SampleSimpleWebSecurityConfig</param-name>
        <param-value>springSecurityFilterChain</param-value>
    </init-param>
</filter>

<filter-mapping>
    <filter-name>securityFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

我的旧 Spring Secuiryt XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
                        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
                        http://www.springframework.org/schema/security
                        http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <global-method-security pre-post-annotations="enabled" />

    <http use-expressions="true">
        <intercept-url access="hasRole('ROLE_VERIFIED_MEMBER')" pattern="/ask**" />
        <intercept-url pattern='/*' access='permitAll' />
        <form-login default-target-url="/visit" />

        <logout logout-success-url="/" />
    </http>

    <authentication-manager>
        <authentication-provider>
            <user-service>
                <user name="XXXX@aol.com.dev" password="testing" authorities="ROLE_VERIFIED_MEMBER" />
            </user-service>

        </authentication-provider>
    </authentication-manager>
</beans:beans> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T17:49:16.210

您的错误指出：

> java.lang.IllegalStateException：未找到 WebApplicationContext：未注册 ContextLoaderListener？org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:251)

`ContextLoaderListener`因此，只需在您的 web.xml 中，在过滤器和 servlet 之前注册一个。

```
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener> 
```

对于`applicationContext`，在您的 web.xml 中添加一个上下文参数

```
<context-param>
    <param-name>contextClass</param-name>
    <param-value>com.yourcompany.yourclass</param-value>
</context-param> 
```

`com.yourcompany.yourclass`您的应用程序上下文配置类在哪里。

一个典型的 Spring MVC 应用程序有 2 个上下文，应用程序上下文和 servlet 上下文，其中应用程序是根或父级，而 servlet 上下文是它的子级。ContextLoaderListener 侦听应用程序上下文，默认情况下会在其中找到它，`/WEB-INF/applicationContext.xml`这就是 Spring 在那里寻找它但找不到它的原因。我假设您使用的是 java`@Configuration`类，所以将其指向该类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T21:18:41.257

Sotirios 基本上是正确的。正如他所提到的，父母和孩子有两种不同的配置。我在下面发布的配置的变体可以在[samples/social/src/main/webapp/WEB-INF/web.xml](https://github.com/SpringSource/spring-security-javaconfig/blob/master/samples/social/src/main/webapp/WEB-INF/web.xml)中找到（即演示 Spring Security Java Config with Spring Social）。

Spring Security 通常在父上下文中配置。要在 web.xml 中使用 Java 配置，您可以执行以下操作：

```
<!-- Java-based Spring container definition -->
<context-param>
    <param-name>contextClass</param-name>
    <param-value>org.springframework.web.context.support.AnnotationConfigWebApplicationContext</param-value>
</context-param>

<!-- Location of Java @Configuration classes that configure the components that makeup this application -->
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>org.xxxx.inquiryconfig.SampleSimpleWebSecurityConfig</param-value>
</context-param>

<listener>
    <listener-class>
      org.springframework.web.context.ContextLoaderListener
    </listener-class>
</listener>

<!-- use the springSecurityFilterChain -->
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    <!-- NOTE This does not specify its own configuration it is
         loaded by the ContextLoaderListener instead -->

    <!-- NOTE by default the filter name is used to
         look up the Spring Security Filter Chain if you like you
         can use any filter name you want, but you must specify
         the bean name instead in this instance. Since we use the
         springSecurityFilterChain as the filter name this is not
         necessary
    <init-param>
        <param-name>targetBeanName</param-name>
        <param-value>springSecurityFilterChain</param-value>
    </init-param> -->
</filter>
<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

重要的是 Spring MVC 配置和父上下文不重叠，否则您将创建重复的对象（即一个在父级中，一个在子级中）。具体来说，您需要确保 DispatcherServlet 的 contextConfigLocation 不会加载与 ContextLoaderListener 的 contextConfigLocation 相同的类。

**更新：**

您还需要确保以正确的顺序指定 URL。现在的问题是 /* 与 /ask-union 匹配的 URL 相同。请记住，每种模式都是按顺序尝试的。这意味着您应该如下所示更新您的配置，以便达到 ask-union。您还想删除“ROLE_”部分，因为 hasRole 会自动将 ROLE_ 前缀放入其中。

```
 interceptUrls
            .antMatchers("/ask-union").hasRole("VERIFIED_MEMBER")
            .antMatchers("/*").permitAll(); 
```

# php - Javascript/PHP 获取数组的内容

> ID：15530671
> 
> 赞同：0
> 
> 时间：2013-03-20T17:30:42.663
> 
> 标签：php, javascript, arrays

我在 PHP 中有一组数据，显示在网页上的 25 个表格单元格中。我还有一个 javascript 函数，用于确定用户何时滚动到页面底部。我的问题是，从 PHP 数组中获取另外 25 个左右的元素并再显示 25 个的步骤是什么？

我知道 Javascript 是一种客户端语言，而 PHP 是一种服务器端语言，但我不确定这对我有何影响......谢谢

最好的...SL

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:50:29.207

没有看到代码很难，但我会尝试一下：

一旦用户滚动到底部，使用 jQuery 来点击 PHP。解析从 PHP 返回的数据并刷新您的表。

# php - 表单验证选择

> ID：15530672
> 
> 赞同：0
> 
> 时间：2013-03-20T17:30:46.077
> 
> 标签：php, jquery, jquery-validate

我用这个选择

```
<div class="formRight">              
   <?php
      $query = mysql_query("SELECT * FROM adm ORDER by name");
      if(mysql_error())
      {
         print(mysql_error());
      }
      echo'<select id="name" name="name" data-placeholder="Select" class="select" style="width:350px;" tabindex="2">';
      echo'<option selected>[Select]</option>';
      {
         while($row = mysql_fetch_array($query))
         echo'<option value="'.$row['name_id'].'">'.$row['name_a'].'</option>';
      }
      echo'</select>';
   ?>
</div> 
```

我已经成功安装了一个 JQUERY Validate Plugin，除了 Select 之外一切正常。有机会申请吗？

我用`class="validate[required]`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T00:02:42.387

你只需要改变两件事：

1) 将 a 添加`"required"` `class`到`<select>`元素中。

2）你必须`value=""`在第一个`<option>`项目。

**演示：http: [//jsfiddle.net/VaDrD/](http://jsfiddle.net/VaDrD/)**

**PHP**：

```
 echo'<select id="name" name="name" data-placeholder="Select" class="select required" style="width:350px;" tabindex="2">';
  echo'<option value="" selected="selected">[Select]</option>';
  {
     while($row = mysql_fetch_array($query))
     echo'<option value="'.$row['name_id'].'">'.$row['name_a'].'</option>';
  }
  echo'</select>'; 
```

**呈现的 HTML**：

```
<select id="name" name="name" data-placeholder="Select" class="select required" style="width:350px;" tabindex="2">
    <option value="" selected="selected">[Select]</option>
    <option value="xxx">option 1</option>
    <option value="xxx">option 2</option>
    <option value="xxx">option 3</option>
</select> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-20T17:34:59.970

不是很明白你想要什么。你在找这个吗？

```
 <select required id="name" name="name" data-placeholder="Select"
 class="select" style="width:350px;" tabindex="2"> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-20T19:22:20.437

我找到了一个可能的解决方案：

```
$(document).ready(function(){
$("#submit").click(function(){
var year = $(#year option:selected).val();
if(year == "")
{
$("#msg").html("Please select a year");
return false;
}
});
}); 
```

# php - 只打印一次 IF 语句

> ID：15530677
> 
> 赞同：0
> 
> 时间：2013-03-20T17:30:58.763
> 
> 标签：php, javascript, html

下面是我的电子商务网站（原型）中使用的一个 php 文件，用于编写客户选择的项目并将他们的选择存储在平面文件数据库中。尽管为每个选定的项目都打印了逻辑，但逻辑工作正常，`echo "Order Submitted!;`例如如果选择了 4 个项目，则此行打印 4 次，我只需要打印一次。知道如何实现吗？

```
<body>

    <table>

        <?php   
        if (!($data = file('items.txt'))) {
            echo 'ERROR: Failed to open file! </body></html>';
            exit;
        } else {
            echo "<h1>Transaction Completed!</h1>"; 
        }
        date_default_timezone_set('Europe/London');
        $now = date(' d/m/y H:i:s ');
        $visitor = $_POST['visitor']; 

        foreach ($_POST as $varname => $varvalue) {
            foreach ($data as $thedata) {
                list($partno, $name, $description, $price, $image) = explode('|', $thedata);
                if ($partno == $varname) {
                    $myFile = "purchases.txt";
                    $fh = fopen($myFile, 'a') or die("ERROR: Failed to open purchases file!\n");
                    $content = $now . "|" . $visitor . "|" . $partno . "|" . $name . "|" . $price . "\n";

                    if (!(fwrite($fh, $content))) {
                        echo "<p>ERROR: Cannot write to file($myFile)\n</p>";
                        exit;
                    } else {
                        echo "<p>Order Submitted!</p>";
                        fclose($fh);
                    }
                }
            }
        }
        ?>

    </table>

    <input type="button" onClick="parent.location='home.php'" value="Return Home">
    <input type="button" onClick="parent.location='items.php'" value="New Purchase"> 
```

如果选择了 2 个项目，则输出为：

**交易完成 订单提交！提交订单！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:36:25.680

跟踪是否有错误并将 else 移到循环之外。

```
$error=false;
    foreach ($_POST as $varname => $varvalue) {
        foreach ($data as $thedata) {
            list($partno, $name, $description, $price, $image) = explode('|', $thedata);
            if ($partno == $varname) {
                $myFile = "purchases.txt";
                $fh = fopen($myFile, 'a') or die("ERROR: Failed to open purchases file!\n");
                $content = $now . "|" . $visitor . "|" . $partno . "|" . $name . "|" . $price . "\n";

                if (!(fwrite($fh, $content))) {
                    echo "<p>ERROR: Cannot write to file($myFile)\n</p>";
                    $error=true;
                    exit;
                } 
            }
        }
    }
if(!$error) {
  echo "<p>Order Submitted!</p>";
  fclose($fh);
} 
```

虽然，按照您编写的方式，您甚至不需要围绕“已提交订单”的条件，因为如果出现错误，它将永远不会执行。（由于出口。）

如果它没有改变，你也可以将 $myfile 移出循环。

第二个版本：

```
 $myFile = "purchases.txt";
    foreach ($_POST as $varname => $varvalue) {
        foreach ($data as $thedata) {
            list($partno, $name, $description, $price, $image) = explode('|', $thedata);
            if ($partno == $varname) {
                $fh = fopen($myFile, 'a') or die("ERROR: Failed to open purchases file!\n");
                $content = $now . "|" . $visitor . "|" . $partno . "|" . $name . "|" . $price . "\n";

                if (!(fwrite($fh, $content))) {
                    echo "<p>ERROR: Cannot write to file($myFile)\n</p>";
                    exit;
                } 
            }
        }
    }
  echo "<p>Order Submitted!</p>";
  fclose($fh); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:36:43.590

在 foreach 循环之前：

```
$printed=false; 
```

然后代替

```
else {
    echo "<p>Order Submitted!</p>";
    fclose($fh);
} 
```

利用

```
else {
    if(!$printed)
    {
        echo "<p>Order Submitted!</p>";
        $printed=true;
    }
    fclose($fh);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T17:36:49.710

您应该`echo`从`else`分支中删除并将其放在第一个右`foreach`括号之后

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T17:38:13.200

您可以使用计数器并查看是否提交了更多

喜欢：

```
$count=0;
foreach ($_POST as $varname => $varvalue) {
            foreach ($data as $thedata) {
                list($partno, $name, $description, $price, $image) = explode('|', $thedata);
                if ($partno == $varname) {
                    $myFile = "purchases.txt";
                    $fh = fopen($myFile, 'a') or die("ERROR: Failed to open purchases file!\n");
                    $content = $now . "|" . $visitor . "|" . $partno . "|" . $name . "|" . $price . "\n";

                    if (!(fwrite($fh, $content))) {
                        echo "<p>ERROR: Cannot write to file($myFile)\n</p>";
                        exit;
                    } else {
                        $count++;
                        fclose($fh);
                    }
                }
            }
         }
    if ($count>0)
        echo "<p>Order Submitted! $count Times</p>"; 
```

# c++ - 无法将变量声明为类型，因为以下虚函数是抽象的

> ID：15530678
> 
> 赞同：1
> 
> 时间：2013-03-20T17:31:05.313
> 
> 标签：c++, class, inheritance, interface, virtual

我有以下代码

类.h

```
#ifndef CLASSES_H
#define CLASSES_H

#include <iostream>
using namespace std;

template< class T1, class T2>
class class1
{
      public:
             virtual void method1(int) const =0;
             virtual void method2(class1&) const =0;
};

template< class T1>
class class2:public class1<T1,int>
{
      public:
             void method1(int) const;
             void method2(class2&) const;
};

template< class T1>
void class2<T1>::method1(int i) const
{
     cout<<"class2::method1 - before Call %i"<<endl;
     cout<<"class2::method1 - after Call"<<endl;
}

template< class T1>
void class2<T1>::method2(class2& c2) const
{
     cout<<"class2::method2 - before Call"<<endl;
     cout<<"class2::method2 - after Call"<<endl;
}

#endif 
```

主文件

```
#include <cstdlib>

#include <iostream>
using namespace std;

#include "Classes.h" 

int main(int argc, char *argv[])
{
    class2<int> c2;

    c2.method1(0);
    c2.method2(c2);

    system("PAUSE");
    return EXIT_SUCCESS;
} 
```

基本上，C1 是一个接口类，因此它的方法是纯虚拟的。遇到的问题是 Medhod2 传递和类本身的实例（接口是 class1，实现此类接口的类是 class2）。

因此 Method2 有签名

```
void method2(class1&) const; 
```

在 class1 和

```
void method2(class2&) const; 
```

在类2。

这就是我在编译时收到以下错误的原因。

```
main.cpp: In function `int main(int, char**)':
main.cpp:12: error: cannot declare variable `c2' to be of type `class2<int>'
main.cpp:12: error:   because the following virtual functions are abstract:
Classes.h:14: error:  void class1<T1, T2>::method2(class1<T1, T2>&) const [with
T1 = int, T2 = int]
make: *** [main.o] Error 1 
```

我该如何解决这个问题？

有人可以告诉我吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:34:25.547

您的问题是虚拟签名需要匹配（返回类型可以是协变的，否则签名应该相同）。将class2 更改`void method2(class2&) const;`为`void method2(class1&) const;`.

或者，隐藏虚拟方法并提供替换：

```
class class2
{
    // must be implemented since pure virtual, but now private
    void method2(class1&) const; 
public:
    void method1(int) const;
    void method2(class2&) const;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T18:08:38.560

您有一个**设计问题**：`class1::method2(class1&) const`必须适用于与账单匹配的*任何*参数，即对 type 的每个引用`class1`。如果`class2`只能实现`method2()`类型的参数`class2`，它不仅在语法上而且在逻辑上都是不完整的：它无法处理预期用途

```
class2 A;
class1*B = method_returning_pter_to_class1_object();
A.method2(*B);                         // intended usage of virtual function 
```

（如果您不打算使用这种类型的用法，那么您的设计`class1`就有缺陷。）

当然，`dynamic_cast`如果参数实际上是 type ，您可以使用 a 来调用特殊行为`class2&`，即

```
void class2::method(class1&x) const
{
  class2*x2 = dynamic_cast<class2*>(&x);
  if(x2)
    apply_method_taking_class2(*x2);
  else
    apply_method_for_other_than_class2_object(x);
} 
```

但这可能会导致一些运行时损失。

# visual-c++ - 将二进制数写入 bmp 图像

> ID：15530679
> 
> 赞同：0
> 
> 时间：2013-03-20T17:31:08.133
> 
> 标签：visual-c++

在将 char 转换为数字和二进制数后，我读取了 bmp 图像并存储在字符串向量中：

```
typedef unsigned char BYTE;
std::streampos fileSize;
std::vector<BYTE> readFile(const char* filename)
{
    // open the file:

    std::ifstream file(filename, std::ios::binary);

    // get its size:
    file.seekg(0, std::ios::end);
    fileSize = file.tellg();
    file.seekg(0, std::ios::beg);

    // read the data:
    std::vector<BYTE> fileData(fileSize);
    file.read((char*) &fileData[0], fileSize);
    return fileData;
} 
```

现在这很好，但是我想在将每个二进制数转换为 char 并将其存储在新文件中之后重写 bmp 文件。

```
ofstream saveFile(path);
int i=0; string str="";
while(i<binary.size())  //the binary_size is a string that contain all binary number of bmp
    {
    str=BinartToInt(binary[i]);//BinartToInt is a function that convert 8bit binary to number
    saveFile <<str;
    i++;
    }

saveFile.close(); 
```

如何将矢量二进制字符串转换为 BMP？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:39:16.170

确保您的输出流也标记为二进制，否则行尾和其他文本处理将对您的二进制流生效。

```
ofstream saveFile(path, std::ios::binary); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:52:28.763

You cannot use formatted output functions to write data to binary format files. Use `saveFile.write()`.

# jquery - jquery live 不工作，代码很简单

> ID：15530680
> 
> 赞同：-4
> 
> 时间：2013-03-20T17:31:08.480
> 
> 标签：jquery, html

你好，我刚刚编写了一个简单的代码，因为我正在学习 jquery，这是代码

```
$(document).ready(function(){
  $('input[type="file"]').live({
    change : function(){
      alert('ok');
    }
  });
}); 
```

但它不想工作有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:36:14.593

jQuery`live()` [文档](http://api.jquery.com/live/)指出：

> 从 jQuery 1.7 开始，不推荐使用 .live() 方法。使用 .on() 附加事件处理程序。旧版本 jQuery 的用户应该使用 .delegate() 而不是 .live()。

使用`on()`（[文档](http://api.jquery.com/on/)）绑定你的事件（如果元素不是动态添加的）：

```
$('input[type="file"]').on('change',function (){
   //Stuff
}); 
```

*注意：这与`$('input[type="file"]').change()`*

如果你曾经`live()`将函数绑定到**动态添加的 DOM 元素**，你应该`on()`像这样使用：

```
$(document).on('change', 'input[type="file"]', function (){
   //Stuff
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T17:33:20.833

不推荐使用 live 试试这个：

[**演示**](http://jsfiddle.net/urT4G/)

```
$(document).ready(function(){
     $(document).on('change','input[type="file"]',function(){
         alert('ok');
     });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T17:33:36.103

`.live()`自 jQuery 1.9 起已被删除
尝试`$('input[type="file"]').change(function() { ... })`改用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T17:33:48.990

您可以使用 .on().live() 已弃用。

```
$(document).ready(function(){
 $(document).on('change','input[type="file"]',function(){
     alert('ok');
 });
}); 
```

# java - 在 Java SE 中创建自定义形状的时间线

> ID：15530689
> 
> 赞同：0
> 
> 时间：2013-03-20T17:31:37.527
> 
> 标签：java, graphics

我将在 J2SE 中创建一个自定义形状的时间线图（以显示并保存为图像）；
这是任何框架吗？或者我应该从 Graphics2D 开始？
我应该从哪里开始？

谢谢

# struts2 - struts2 TreeMap：带有空格的键没有出现在动作中

> ID：15530690
> 
> 赞同：2
> 
> 时间：2013-03-20T17:31:38.680
> 
> 标签：struts2, treemap, xwork

**JSP 代码：**

```
 <s:iterator value="#currentRequisitionGroup.plFldWrap.allPFields" var="pMap" status="hStatus">
    <s:iterator value="#pMap.value.paramMdlList" var="paramModel" status="fStat">
    <li>
     <label>
        <s:property value="#paramModel.parameterName" />

     </label> 
    <s:set var="cEdit" value="%{#paramModel.isEditable}"> </s:set>  

    <s:if test="%{#cEdit == true}">
        <s:textfield id="paramId_%{#paramModel.parameterId}" name="rqPGPrmMdl.rqGrp[%     {#cGStat.index}].plFldWrap.allPFields['%{(#pMap.key)}'].paramMdlList[%{#fStat.index}].prmValue"/>
    </s:if>
    <s:else>
         <s:textfield id="paramId_%{#paramModel.parameterId}" name="rqPGPrmMdl.rqGrp[%  {#cGStat.index}].plFldWrap.allPFields['%{(#pMap.key)}'].paramMdlList[%{#fStat.index}].prmValue" readonly="true"/>
    </s:else>    

</li> 
<s:hidden id="prmId_%{#paramModel.parameterId}" name="rqPGPrmMdl.rqGrp[%{#cGStat.index}].plFldWrap.allPFields['%{(#pMap.key)}'].paramMdlList[%{#fStat.index}].parameterId"></s:hidden> 
<s:hidden id="paramName_%{#paramModel.parameterId}" name="rqPGPrmMdl.rqGrp[%{#cGStat.index}].plFldWrap.allPFields['%{(#pMap.key)}'].paramMdlList[%{#fStat.index}].parameterName"></s:hidden>
<s:hidden id="pGId_%{#paramModel.parameterId}"  name="rqPGPrmMdl.rqGrp[%{#cGStat.index}].plFldWrap.allPFields['%{(#pMap.key)}'].paramMdlList[%{#fStat.index}].parameterGroupId"></s:hidden> 
<s:hidden id="seqNo_%{#paramModel.parameterId}" name="rqPGPrmMdl.rqGrp[%{#cGStat.index}].plFldWrap.allPFields['%{(#pMap.key)}'].paramMdlList[%{#fStat.index}].sequenceNumber"></s:hidden>

</s:iterator>
    </s:iterator> 
```

问题是一些值没有出现在行动中。到目前为止的调查表明，如果相应的 html*输入*在 allPFields 的键中有空格，则该值不会出现在操作中。 `<input id="prmId_30" type="hidden" value="30" name="rqPGPrmMdl.rqGrp[1].plFldWrap.allPFields['Emp System'].paramMdlList[0].parameterId">`

但是，如果相应的 html 输入*在 allPFields 的键*中没有空格，则该值将出现在操作中。 `<input id="prmId_46" type="hidden" value="30" name="rqPGPrmMdl.rqGrp[1].plFldWrap.allPFields['Emp'].paramMdlList[0].parameterId">`

**以下是日志的内容：** `xwork2.interceptor.ParametersInterceptor - Parameter [rqPGPrmMdl.rqGrp[1].plFldWrap.allPFields['Emp System'].paramMdlList[0].parameterId] **didn't match acceptedPattern pattern!**`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T23:21:45.857

发生这种情况是因为参数名称中不接受空格。您可以更改, 但作为文档状态的`acceptParamNames`参数`ParametersInterceptor`

> acceptParamNames - 以逗号分隔的正则表达式列表，用于描述可接受参数名称的白名单。**不要更改默认值，除非您知道自己在做什么涉及安全问题**

所以我建议你去掉参数名称中的空格。

# c# - 在添加新项目之前检查 ListBox

> ID：15530693
> 
> 赞同：0
> 
> 时间：2013-03-20T17:31:46.373
> 
> 标签：c#, asp.net, listbox

在添加新项目之前，我正在尝试检查列表框中是否不存在该项目。

```
 if (TeamNameTextBox.Text != "")
        {
            if (TeamNameListBox.Items.FindByValue(TeamNameListBox.Text) == null)
            {
                TeamNameListBox.Items.Add(TeamNameTextBox.Text);
                TeamNameTextBox.Text = "";

                int teamCountUpdate = TeamNameListBox.Items.Count;
                if (teamCountUpdate == 1)
                {
                    TeamCount.Text = teamCountUpdate.ToString() + " Team";
                }
                else
                {
                    TeamCount.Text = teamCountUpdate.ToString() + " Teams";
                }
            }
            else
            {
                AddTeamSeasonError.Text = "This team has already been added";
            }
        }
        else
        {
            AddTeamSeasonError.Text = "Please select a team";
        } 
```

我有它来检查文本框是否为空白，但我需要检查用户尝试添加的项目是否不在列表框中。

我试过这条线：

```
if (TeamNameListBox.Items.FindByValue(TeamNameListBox.Text) == null) 
```

但这不起作用，关于如何进行检查的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T19:44:24.477

```
if (!string.IsNullOrEmpty(TeamNameTextBox.Text))
{
    if (!TeamNameListBox.Items.Contains(TeamNameTextBox.Text))
    {
        TeamNameListBox.Items.Add(TeamNameTextBox.Text);
    }
    else
    {
        // item already exists in listbox
    }
}
else
{
    // textbox is empty
} 
```

# java - 如何使 *.rtf 文件在 JContentPane 上以 UTF-8 编码显示？

> ID：15530702
> 
> 赞同：0
> 
> 时间：2013-03-20T17:32:18.200
> 
> 标签：java, swing, character-encoding, rtf, arabic

我正在努力在 JEditorPane 中显示阿拉伯语 rtf。它显示错误的字符可能是因为它是错误的编码，我不知道如何修复它。

我能得到一些帮助吗？这是代码的相关部分。

```
 textPane.setEditorKit(new AdvancedRTFEditorKit());
                textPane.setBackground( Color.white );
                try {
                    BufferedReader fi = new BufferedReader(
                               new InputStreamReader(
                                          new FileInputStream("C:/test - Copy.rtf"), "UTF-8"));

                    rtf.read( fi, textPane.getDocument(), 0 );

                    System.out.println(textPane.getDocument());
                    System.out.println(rtf.toString());

                    } 
                catch( FileNotFoundException e )
                {
                System.out.println( "File not found" );
                }
                catch( IOException e )
                {
                System.out.println( "I/O error" );
                }
                catch( BadLocationException e )
                { 
```

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:57:02.753

```
new InputStreamReader(new FileInputStream("C:/test - Copy.rtf"), "UTF-8") 
```

您假设您的 .rtf 文件被编码为 UTF-8。如果您的结果看起来不对，那么该文件可能不是 UTF-8。如果是阿拉伯语，那么实际的字符集可能是 ISO-8859-6 或 Windows-1256。如果您在文本编辑器中打开该文件，它应该能够告诉您字符编码是什么。一旦你知道你可以使用：

```
new InputStreamReader(new FileInputStream("C:/test - Copy.rtf"), "Actual Charset Name") 
```

# git - 使用 git 或 svn 命令访问 git 服务器

> ID：15530704
> 
> 赞同：0
> 
> 时间：2013-03-20T17:32:20.427
> 
> 标签：git, svn, git-svn, subgit

这是我的问题。我用 gitolite 管理一个 git 服务器。我想使用 git 或 svn 命令访问此服务器，客户端甚至不需要知道那是 git 还是 svn 服务器。

从 svn 访问服务器时，我使用用户身份验证（使用文件 authz、passwd 和 svnserve，然后运行 ​​nig svnserve），从 git 访问时，我使用带有公钥的用户身份验证（就像 gitolite 管理这个）。服务器在 RHEL6 下工作。

有任何想法吗？我已经阅读了很多关于使用 git-svn 的信息，但是 - 根据我所阅读的内容 - 客户端应该使用一些 git-svn 命令，而我不想要这个。我读过这个帖子[Pushing an existing git repository to SVN](https://stackoverflow.com/questions/661018/pushing-an-existing-git-repository-to-svn)，但我仍然不知道如何推入/拉出服务器，以及进行其他操作。

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-28T04:01:45.427

有一个通过 svn 协议为 git 存储库提供服务的项目：[https ://github.com/bozaro/git-as-svn](https://github.com/bozaro/git-as-svn)

# sql - 使用 3 光标打包成 1

> ID：15530705
> 
> 赞同：0
> 
> 时间：2013-03-20T17:32:22.767
> 
> 标签：sql, plsql, oracle10g, plsqldeveloper

我有 3 个功能：-

```
select function1(param1) from dual;
select function2(param2) from dual;
select function3(param3) from dual; 
```

我想在 1 个包装中使用其中的 3 个。

```
Create or replace package body PACKAGE_ABC

as procedure proc_abc(param1 varchar,param2 varchar,param3 varchar)

as 

cursor cur1
is 
select meaning from
table1
where meaning=(select function1(param1) from dual)

cursor cur2
is 
select meaning from
table2
where meaning=(select function2(param2) from dual)

cursor cur3
is 
select meaning from
table3
where meaning=(select function3(param3) from dual)

Begin
for cursor_var in cur1
loop
fnd_output.put_line(cursor_var.meaning )
end loop;
for cursor_var2 in cur2
loop
fnd_output.put_line(cursor_var2.meaning )
end loop;

for cursor_var3 in cur3
loop
fnd_output.put_line(cursor_var3.meaning )
end loop;

end proc_abc;
end package_abc; 
```

无论如何，我可以在一个 for 循环中使用 3 个 funcns ...... 3 个游标选择语句使用同一个表，但正在获取差异值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:37:38.510

如果我理解这个问题，听起来你只是希望你的查询是

```
SELECT meaning
  FROM table1
 WHERE meaning IN (function1(param1), function2(param2), function3(param3)) 
```

当然，这有几个问题

*   在您发布的代码`param1`中`param2`， 和`param3`都未声明。所以如果你试图编译它，你会得到语法错误。
*   如果您只选择该`meaning`列并且您正在对该列进行过滤`meaning`，则没有理由`table1`在您的查询中引用。您只需要从中选择函数调用的结果`dual`。

# android - 是否可以为所有活动使用一个 GestureDetector？

> ID：15530708
> 
> 赞同：0
> 
> 时间：2013-03-20T17:32:40.773
> 
> 标签：android, android-gesture

有没有更好的方法来为所有活动实现 GestureDetetor 而不必单独定义 GestureDetector？

在我的场景中，我有 10 个活动，我希望它们都对手势具有相同的行为。例如，向右滑动将结束当前活动并将用户带回主要活动。

我的选择似乎是

1.  在我的 10 个活动中定义 GestureDetector
    或
2.  扩展 Activity 并在那里添加一个 GestureDetector ，然后从我的自定义活动中扩展。

有没有更好的方法来实现这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:46:52.340

一种简单的方法是将 GestureDetector 设置在所有活动都从其扩展的基类中。这是一种典型的方法，但每次都会创建一个新实例。

另一种方法是使用`Application.registerActivityLifecycleCallbacks`. [您可以在Application 类文档](http://developer.android.com/reference/android/app/Application.html#registerActivityLifecycleCallbacks%28android.app.Application.ActivityLifecycleCallbacks%29)中找到更多信息。这是 api 14+。

不要忘记阅读文档：

> public void registerActivityLifecycleCallbacks (Application.ActivityLifecycleCallbacks 回调)
> 
> 在 Context 的基础应用中添加一个新的 ComponentCallbacks，它会在调用活动和其他组件的 ComponentCallbacks 方法的同时被调用。请注意，您必须确保在将来适当的时候使用 unregisterComponentCallbacks(ComponentCallbacks)；**这不会为您删除。**

完成此操作后，只需检查[ActivityLifecycleCallbacks](http://developer.android.com/reference/android/app/Application.ActivityLifecycleCallbacks.html)以获取更多信息。您已经获得了所有典型的 onCreate、start、resume 等回调，并将相应的活动作为参数。

# windows-phone - NFC 订阅 Windows phone 8 SDK

> ID：15530709
> 
> 赞同：0
> 
> 时间：2013-03-20T17:32:43.550
> 
> 标签：windows-phone, nfc

我有来自 Sony 的 SmartTag，标签的内容是：

```
Contents of the NDEF message:
Message size: 41 bytes
Type name: NFC RTD Specification
Record type: U [URI]
semc://liveware/A1/2/NT2/5/smarttags

Raw NDEF message (hex):
D1 01 25 55 00 73 65 6D 63 3A 2F 2F 6C 69 76 65 77 61 72 65 2F 41 31 2F 32 2F 4E 54 32 2F 35 2F 73 6D 61 72 74 74 61 67 73 
```

如何从 windows phone sdk 订阅此消息？

我尝试了以下方法：

```
proximityDevice.SubscribeForMessage("NDEF:URI.semc://liveware/A1/2/NT2/5/smarttags", AddressOf messageReceived)

'and

proximityDevice.SubscribeForMessage("NDEF:URI.semc", AddressOf messageReceived) 
```

我无法从标签接收数据。

我的问题是，我如何订阅这些数据：semc://liveware/A1/2/NT2/5/smarttags

非常感谢您的帮助。

# wcf - 如何以编程方式创建端点并在我的服务中使用它，而不是从 web.config 获取它？

> ID：15530710
> 
> 赞同：0
> 
> 时间：2013-03-20T17:32:44.280
> 
> 标签：wcf, azure, binding, endpoint

基本上我想创建这个绑定来监听 azure 服务总线队列：

```
<services>
  <service name="myServiceName">
    <endpoint address="sb://****.servicebus.windows.net"
              listenUri="sb://****.servicebus.windows.net"
              binding="netMessagingBinding"
              bindingConfiguration="netMessagingBinding"
              behaviorConfiguration="myConfiguration"
              name="myServiceEndpoint"
              contract="****" />
  </service> 
```

我还需要知道如何在我的服务中使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:54:13.387

查看您的服务主机文件 (.SVC)，它可以包含对生成服务文件的工厂类的引用。更多信息在这里：http: [//msdn.microsoft.com/en-us/library/aa967286.aspx](http://msdn.microsoft.com/en-us/library/aa967286.aspx)

通过提供您自己的工厂，您可以通过 CreateServiceHost 方法覆盖服务类的生成。这将使您能够更好地控制服务类的创建方式。您可以注入自己的 URL，l 等。

高温高压

# jquery - .each() 中的函数只被调用一次

> ID：15530714
> 
> 赞同：3
> 
> 时间：2013-03-20T17:32:57.963
> 
> 标签：jquery, function, loops, each

我有这个代码：

```
function paramsFormValidate()
{
    isFormValid = true;
    var counter = 0;
    $('.par-item input[type="number"]').each(function() {
        isFormValid = isFormValid && validateParameter( $(this) );
        counter++;
    });
    console.log(counter);
    return isFormValid;
} 
```

这是我必须构建的自定义验证。问题是，`validateParameter()`应该为每个输入元素调用该函数，但只调用一次。

我已经包含了一个`counter`用于调试目的的变量（甚至记录`$(this)`在`each`循环中），但循环似乎很好。仍然`validateParameter()`只会为循环的第一个元素调用。

该`validateParameter()`函数不涉及 ajax 调用，它只是一堆赋值和 if/else 语句。事实上，我什至尝试删除整个函数体并改用它：

```
function validateParameter()
{
    console.log('meh');
    return false;
} 
```

但当然它只会记录一个“meh”。

什么可能导致这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:43:52.417

[**逻辑 AND(&&)**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Logical_Operators)`isFormValid`如果可以转换为假则返回否则返回`validateParameter($(this))`。

第一次循环`isFormValid`是`true`, 因此`validateParameter($(this))`被执行并返回结果。在这种情况下`false`，分配给`isFormValid`.

循环执行的任何连续时间`isFormValid`都是`false`，因此它被立即使用并且`validateParameter($(this))`不会再次执行。

* * *

从链接的文档中引用：

> **运算符**
> 逻辑与 (&&)
> 
> **使用**
> expr1 && expr2
> 
> **说明**
> 如果 expr1 可以转换为 false，则返回；否则，返回 expr2。因此，当与布尔值一起使用时，如果两个操作数都为真，则 && 返回真；否则，返回 false。

**编辑**

> ..`validateParameter()`应该为每个输入元素调用该函数

在这种情况下，您需要类似的东西：

```
function paramsFormValidate() {
    isFormValid = true;

    $('.par-item input[type="number"]').each(function () {
        // Validate each element...
        if(!validateParameter($(this)){
           // validation has failed on an element, indicate the form is invalid
           isFormValid = false;
        }

        // optionally, continue or exit if isformIsValid === false
    });

    return isFormValid;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:35:10.133

因为您正在将 isFormValid 值重置为 false ( "return false;" in `validateParameter`)

`isFormValid && validateParameter( $(this) );` `validateParameter`只有当 isFormValid 为真时才会执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T17:38:47.430

您的 validateParameter 函数返回 false。

```
isFormValid = isFormValid && validateParameter( $(this) ); 
```

第一次通过后，isFormValid 变为 false（第一次为 true & validateParameter => 导致 false 并将其存储在 isFormValid 中）

在第二遍

```
isFormValid = isFormValid && validateParameter( $(this) ); 
```

不会调用 validateParameter，因为 isFormValid 已经为 false，并且评估不会评估 validateParameter。

那就是问题所在。从 validateParameter 返回 true，您将看到它以您期望的方式工作。

干杯! 苏杰

# templates - 将模型属性绑定到视图的模板引擎？

> ID：15530719
> 
> 赞同：0
> 
> 时间：2013-03-20T17:33:13.290
> 
> 标签：templates, backbone.js, model-binding

通过 Backbone 视图渲染模板时，您通常会得到一些看起来像这样的代码：

```
ShirtView = {
  template: JST["/templates/shirt_template"],
  el: ".shirt-element"

  render: function() {
    var html = this.template({color: this.model.color, size: this.model.size});
    this.$el.html(html);
  }
} 
```

这一切都很好，您的模板将呈现您想要的属性。但如果`this.model.color`发生变化，则不会反映在视图中。然后，您可以使用诸如 modelbinder 之类的东西将视图中的元素显式绑定到您的模型，但这意味着向您的视图引入额外的代码。

我想知道是否有任何模板引擎，例如 Mustache 或 Handlebars，可以在模型更改时自动更新属于属性对象中的字段的元素，而无需我在视图中指定它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T18:42:38.870

正如评论所建议的那样，您可以使用几个库...但我想建议您不需要这样做。我在一个由 Backbone 提供支持的站点上工作，该站点有数千行（见鬼，可能是数万或数十万行）代码，而我们使用的只是我们自己的自定义基类。

本质上，您需要做的就是：

```
var TemplatedView = Backbone.View.extend({
    render: function() {
        this.renderTemplate();
    }.
    renderTemplate: function() {
        this.$el.html(this.template(this.model.toJSON()));
    }
}); 
```

然后您可以将任何新视图设为模板视图，只需：

```
var ShirtView = TemplatedView.extend({
    template: JST["/templates/shirt_template"],
    el: ".shirt-element"
}); 
```

或者，如果您有一些自定义渲染逻辑，您只需要调用`renderTemplate`：

```
var AdvancedShirtView = TemplatedView.extend({
    template: JST["/templates/shirt_template"],
    el: ".shirt-element",

    render: function() {
        this.model.fold();
        this.renderTemplate();
        this.model.press();
    }
}); 
```

现在我们还有一些增强功能（例如，如果有人在我们的一个视图上指定了“rawTemplate”属性，我们`renderTemplate`会将其编译为适当的模板），但这就是为这样的事情滚动您自己的解决方案的美妙之处：你得到你想要的。

或者您可以使用图书馆 :-) 但就个人而言，对于您的网站既简单又不可或缺的东西，我不明白您为什么要这样做。

# sql - 将一个表中的值与查询结果进行比较？

> ID：15530721
> 
> 赞同：0
> 
> 时间：2013-03-20T17:33:17.840
> 
> 标签：sql, sql-server-2008

首先，我将解释正在捕获的内容。用户具有与其帐户相关联的会员级别（青铜、黄金、钻石等）。需要运行一项夜间作业来计算一年前从今天开始的订单。如果给定用户的订单总额超过或低于一定数量，他们的级别就会升级或降级。存储级别信息的表不会有太大变化，但最小和最大数量阈值可能会随着时间的推移而变化。这是表格的样子：

```
CREATE TABLE [dbo].[MemberAdvantageLevels] (
[Id] int NOT NULL IDENTITY(1,1) ,
[Name] varchar(255) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL ,
[MinAmount] int NOT NULL ,
[MaxAmount] int NOT NULL ,
CONSTRAINT [PK__MemberAd__3214EC070D9DF1C7] PRIMARY KEY ([Id])
)
ON [PRIMARY]
GO 
```

我写了一个查询，将按用户对今年迄今为止的订单进行分组。查询包括他们当前的成员级别。

```
SELECT
Sum(dbo.tbh_Orders.SubTotal) AS OrderTotals,
Count(dbo.UserProfile.UserId) AS UserOrders,
dbo.UserProfile.UserId,
dbo.UserProfile.UserName,
dbo.UserProfile.Email,
dbo.MemberAdvantageLevels.Name,
dbo.MemberAdvantageLevels.MinAmount,
dbo.MemberAdvantageLevels.MaxAmount,
dbo.UserMemberAdvantageLevels.LevelAchievmentDate,
dbo.UserMemberAdvantageLevels.LevelAchiementAmount,
dbo.UserMemberAdvantageLevels.IsCurrent as IsCurrentLevel,
dbo.MemberAdvantageLevels.Id as MemberLevelId,

FROM
dbo.tbh_Orders
INNER JOIN dbo.tbh_OrderStatuses ON dbo.tbh_Orders.StatusID = dbo.tbh_OrderStatuses.OrderStatusID
INNER JOIN dbo.UserProfile ON dbo.tbh_Orders.CustomerID = dbo.UserProfile.UserId
INNER JOIN dbo.UserMemberAdvantageLevels ON dbo.UserProfile.UserId = dbo.UserMemberAdvantageLevels.UserId
INNER JOIN dbo.MemberAdvantageLevels ON dbo.UserMemberAdvantageLevels.MemberAdvantageLevelId = dbo.MemberAdvantageLevels.Id
WHERE
dbo.tbh_OrderStatuses.OrderStatusID = 4 AND
(dbo.tbh_Orders.AddedDate BETWEEN dateadd(year,-1,getdate()) AND GETDATE()) and IsCurrent = 1
GROUP BY
dbo.UserProfile.UserId,
dbo.UserProfile.UserName,
dbo.UserProfile.Email,
dbo.MemberAdvantageLevels.Name,
dbo.MemberAdvantageLevels.MinAmount,
dbo.MemberAdvantageLevels.MaxAmount,
dbo.UserMemberAdvantageLevels.LevelAchievmentDate,
dbo.UserMemberAdvantageLevels.LevelAchiementAmount,
dbo.UserMemberAdvantageLevels.IsCurrent,
dbo.MemberAdvantageLevels.Id 
```

因此，我需要检查 OrdersTotal，如果它超过当前级别阈值，我需要找到适合他们当前订单总额的级别，并使用他们的新级别创建新记录。

例如，假设 jon@doe.com 目前处于铜牌。青铜的 MinAmount 为 0，MaxAmount 为 999。目前他的年度订单为 $2500。我需要找到 2500 美元适合的水平并升级他的帐户。我还需要检查他们`LevelAchievmentDate`，如果它在当前年份之外，如果没有活动，我们可能需要将用户降级。

我在想我可以创建一个临时表来保存所有级别的结果，然后以某种方式在上面的查询中创建一个 CASE 语句来确定新级别。我不知道这是否可能。或者，迭代我的订单结果并执行其他查询会更好吗？如果我使用迭代模式，我知道我可以使用该`When`语句来迭代行。

**更新**

我更新了我的查询一点，到目前为止想出了这个，但我可能需要更多信息，而不仅仅是来自子查询的 ID

```
Select * into #memLevels from MemberAdvantageLevels

SELECT
Sum(dbo.tbh_Orders.SubTotal) AS OrderTotals,
Count(dbo.AZProfile.UserId) AS UserOrders,
dbo.AZProfile.UserId,
dbo.AZProfile.UserName,
dbo.AZProfile.Email,
dbo.MemberAdvantageLevels.Name,
dbo.MemberAdvantageLevels.MinAmount,
dbo.MemberAdvantageLevels.MaxAmount,
dbo.UserMemberAdvantageLevels.LevelAchievmentDate,
dbo.UserMemberAdvantageLevels.LevelAchiementAmount,
dbo.UserMemberAdvantageLevels.IsCurrent as IsCurrentLevel,
dbo.MemberAdvantageLevels.Id as MemberLevelId,

(Select Id from #memLevels where Sum(dbo.tbh_Orders.SubTotal) >= #memLevels.MinAmount and Sum(dbo.tbh_Orders.SubTotal) <= #memLevels.MaxAmount) as NewLevelId

FROM
dbo.tbh_Orders
INNER JOIN dbo.tbh_OrderStatuses ON dbo.tbh_Orders.StatusID = dbo.tbh_OrderStatuses.OrderStatusID
INNER JOIN dbo.AZProfile ON dbo.tbh_Orders.CustomerID = dbo.AZProfile.UserId
INNER JOIN dbo.UserMemberAdvantageLevels ON dbo.AZProfile.UserId = dbo.UserMemberAdvantageLevels.UserId
INNER JOIN dbo.MemberAdvantageLevels ON dbo.UserMemberAdvantageLevels.MemberAdvantageLevelId = dbo.MemberAdvantageLevels.Id
WHERE
dbo.tbh_OrderStatuses.OrderStatusID = 4 AND
(dbo.tbh_Orders.AddedDate BETWEEN dateadd(year,-1,getdate()) AND GETDATE()) and IsCurrent = 1
GROUP BY
dbo.AZProfile.UserId,
dbo.AZProfile.UserName,
dbo.AzProfile.Email,
dbo.MemberAdvantageLevels.Name,
dbo.MemberAdvantageLevels.MinAmount,
dbo.MemberAdvantageLevels.MaxAmount,
dbo.UserMemberAdvantageLevels.LevelAchievmentDate,
dbo.UserMemberAdvantageLevels.LevelAchiementAmount,
dbo.UserMemberAdvantageLevels.IsCurrent,
dbo.MemberAdvantageLevels.Id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T18:45:35.037

一种方法：

```
with cte as
(SELECT Sum(o.SubTotal) AS OrderTotals,
        Count(p.UserId) AS UserOrders,
        p.UserId,
        p.UserName,
        p.Email,
        l.Name,
        l.MinAmount,
        l.MaxAmount,
        ul.LevelAchievmentDate,
        ul.LevelAchiementAmount,
        ul.IsCurrent as IsCurrentLevel,
        l.Id as MemberLevelId
 FROM dbo.tbh_Orders o
 INNER JOIN dbo.UserProfile p ON o.CustomerID = p.UserId
 INNER JOIN dbo.UserMemberAdvantageLevels ul ON p.UserId = ul.UserId
 INNER JOIN dbo.MemberAdvantageLevels l ON ul.MemberAdvantageLevelId = l.Id
 WHERE o.StatusID = 4 AND
       o.AddedDate BETWEEN dateadd(year,-1,getdate()) AND GETDATE() and
       IsCurrent = 1
 GROUP BY
       p.UserId, p.UserName, p.Email, l.Name, l.MinAmount, l.MaxAmount,
       ul.LevelAchievmentDate, ul.LevelAchiementAmount, ul.IsCurrent, l.Id)
select cte.*, ml.*
from cte
join #memLevels ml 
  on cte.OrderTotals >= ml.MinAmount and cte.OrderTotals <= ml.MaxAmount 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T19:02:24.273

这**尚未经过语法检查或测试**，但应该处理您描述的插入和更新。插入可以使用包含按计算的订单组的派生/虚拟表作为单个语句完成。请注意，插入和更新语句都在同一个事务中完成，以确保同一用户的两条记录不能以 IsCurrent = 1 结尾

```
INSERT UserMemberAdvantageLevels (UserId, MemberAdvantageLevelId, IsCurrent,
       LevelAchiementAmount, LevelAchievmentDate)
SELECT t.UserId, mal.Id, 1, t.OrderTotals, GETDATE()
FROM
    (SELECT ulp.UserId, SUM(ord.SubTotal) OrderTotals, COUNT(ulp.UserId) UserOrders
     FROM UserLevelProfile ulp
     INNER JOIN tbh_Orders ord ON (ord.CustomerId = ulp.UserId)
     WHERE ord.StatusID = 4
           AND ord.AddedDate BETWEEN DATEADD(year,-1,GETDATE()) AND GETDATE()
     GROUP BY ulp.UserId) AS t
INNER JOIN MemberAdvantageLevels mal
ON (t.OrderTotals BETWEEN mal.MinAmount AND mal.MaxAmount)
  -- Left join needed on next line in case user doesn't currently have a level
LEFT JOIN UserMemberAdvantageLevels umal ON (umal.UserId = t.UserId)
WHERE umal.MemberAdvantageLevelId IS NULL  -- First time user has been awarded a level
      OR (mal.Id <> umal.MemberAdvantageLevelId -- Level has changed 
           AND (t.OrderTotals > umal.LevelAchiementAmount -- Acheivement has increased (promotion)
                OR t.UserOrders = 0))                -- No. of orders placed is zero (de-motion)

/* Reset IsCurrent flag where new record has been added */
UPDATE UserMemberAdvantageLevels
SET umal1.IsCurrent=0
FROM UserMemberAdvantageLevels umal1
INNER JOIN UserMemberAdvantageLevels umal2 On (umal2.UserId = umal1.UserId)
WHERE umal1.IsCurrent = 1
AND umal2.IsCurrent = 2
AND umal1.LevelAchievmentDate < umal2.LevelAchievmentDate) 
```

# java - spring mvc中的任意返回类型

> ID：15530735
> 
> 赞同：1
> 
> 时间：2013-03-20T17:33:40.290
> 
> 标签：java, spring, spring-mvc, return-type

ExceptionHandler 可以返回 ModelAndView、Model、Map 等。是否可以返回我自己类型的对象并注册一些可以将我的类型转换为 Spring 理解的类型之一的转换器？例如：

```
@ExceptionHandler
public MyType handle(Exception e) {
  ...
}

@SomeTransformer
public Map convert(MyType myObject) {
   ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:37:09.873

ExceptionHandler 方法遵循与 Controller 方法相同的约定。 [这是](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-ann-requestmapping)Spring 3.1 中 Spring MVC 控制器方法支持的所有返回类型的列表。Bullet #7 将是您最感兴趣的。

相关部分：

> 16.3.3.2 支持的方法返回类型

以下是支持的返回类型：

*   一个 ModelAndView 对象，模型隐含地丰富了命令对象和 @ModelAttribute 注释的引用数据访问器方法的结果。

*   一个模型对象，视图名称通过 RequestToViewNameTranslator 隐式确定，模型隐式地丰富了命令对象和 @ModelAttribute 注释的引用数据访问器方法的结果。

*   用于公开模型的 Map 对象，视图名称通过 RequestToViewNameTranslator 隐式确定，模型隐式地丰富了命令对象和 @ModelAttribute 注释的引用数据访问器方法的结果。

*   一个 View 对象，模型通过命令对象和 @ModelAttribute 注释的引用数据访问器方法隐式确定。处理程序方法还可以通过声明模型参数以编程方式丰富模型（见上文）。

*   一个字符串值，被解释为逻辑视图名称，模型通过命令对象和 @ModelAttribute 注释的引用数据访问器方法隐式确定。处理程序方法还可以通过声明模型参数以编程方式丰富模型（见上文）。

*   如果方法本身处理响应（通过直接编写响应内容，为此目的声明 ServletResponse / HttpServletResponse 类型的参数）或视图名称应该通过 RequestToViewNameTranslator 隐式确定（不在处理程序方法签名）。

*   如果该方法使用 @ResponseBody 注释，则返回类型将写入响应 HTTP 正文。返回值将使用 HttpMessageConverters 转换为声明的方法参数类型。请参阅第 16.3.3.5 节，“使用 @ResponseBody 注释映射响应正文”。

*   一个 HttpEntity 或 ResponseEntity 对象，用于提供对 Servlet 响应 HTTP 标头和内容的访问。实体主体将使用 HttpMessageConverters 转换为响应流。请参阅第 16.3.3.6 节，“使用 HttpEntity”。

任何其他返回类型都被认为是要暴露给视图的单个模型属性，使用通过 @ModelAttribute 在方法级别指定的属性名称（或基于返回类型类名称的默认属性名称）。该模型隐含地丰富了命令对象和 @ModelAttribute 注释的引用数据访问器方法的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T20:57:22.917

当然，您也可以使用`aspectj`事后建议来做您想做的事。

```
private pointcut transformer() : execution(@SomeTransformer * *(..));

after() returning (Object o): transformer() {
      System.out.println("I'd like to transform this object " + o);
} 
```

但是..我不知道你为什么要那样做..？

免责声明：这是未经测试的。

# ios - IOS - 内部分发的独立开发人员 - 代码登录

> ID：15530739
> 
> 赞同：2
> 
> 时间：2013-03-20T17:34:01.310
> 
> 标签：ios, xcode, code-signing, provisioning-profile, in-house-distribution

我有一家小公司，我们应该为内部分发提供一个 ios 应用程序 OTA。客户已将我们的苹果帐户作为成员添加到他们的团队中。我们已经终止了开发过程。因此，他们向我们提供了他们的公司分销证书和配置文件。

问题是他们的移动配置文件没有与我们的 CSR 签署，因此，组织者说我们有代码签名问题。

我们认为，对于内部分发，我们的开发人员必须在客户端的计算机上部署用于归档（生成 ipa）的应用程序。我的问题：有没有办法与开发人员 CSR 对公司证书进行代码签名？否则我们将无法发布！

# javascript - HTML 列表打开状态的选择器

> ID：15530744
> 
> 赞同：0
> 
> 时间：2013-03-20T17:34:20.197
> 
> 标签：javascript, jquery, slidetoggle

是否有可能找出列表中的哪个容器已经打开而哪些仍然关闭？

目前，我在具有特定 的 div 上使用`slideDown()`,`slideDown()`和, 但我想打开没有这些类的所有其他 div`addClass``class="section_hdl_aktiv"`

**这是一段 JS ：**

```
if (state == "") {
    jQuery('#app-control-list ul li ul').slideDown();
    state = "open";
    jQuery('#app-control-list ul li').addClass("section_hdl_aktiv");
    console.log(state); 
} else if (state == "open") {   
    jQuery('#app-control-list ul li ul').slideUp(); 
    jQuery('#app-control-list ul li').removeClass("section_hdl_aktiv");
    state = "closed";   
    console.log(state);             
} else if (state == "closed") {
    jQuery('#app-control-list ul li ul').slideDown();
    jQuery('#app-control-list ul li').addClass("section_hdl_aktiv");
    state = "open";
    console.log(state);
} 
```

有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:54:40.370

是的。使用 jQuery，您可以编写如下语句...

```
if($('#app-control-list').is(':visible')) { ... } 
```

或者

```
if($('#app-control-list').css('display') == 'none')) { ... } 
```

查看您发布的代码，我无法确切知道您要做什么，但是如果您可以发布您的 html，那将有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:54:56.747

你有没有尝试过

```
$("#app-control-list ul li").not("section_hdl_aktiv").each(function() {
    $(this).slideDown()
} 
```

这应该找到所有没有 section_hdl_aktiv 类的元素并将它们向下滑动。

# jquery - 更新 Ajax 提交的表单

> ID：15530749
> 
> 赞同：1
> 
> 时间：2013-03-20T17:34:31.800
> 
> 标签：jquery, ajax, forms, symfony

我有一个相当复杂的表单，它是用,生成`Symfony2`和渲染的。该表单用于修改电子商务订单，因此没有最终提交的概念。通过 Ajax 提交表单时，如何将旧表单与新表单同步？我曾考虑使用它返回整个表单以完全覆盖旧表单或返回 JSON 数据，然后可用于检测和更新更改。`Twig``JQuery`

我的直觉是，返回 JSON 数据以检测和更新新更改是最好的方法。但是对于一个大表格，有很多事情需要检查。标签、错误、帮助、值。从本质上讲，我可以看到`form update logic`变得越来越大并非常快速地产生维护问题。

我希望了解通过 AJAX 更新较大表单的最佳实践是什么。也许我错过了一种标准化的技术。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:45:00.180

要更新大型表单，我将返回一个非常具体的 JSON 对象，它允许您执行 for-each 循环以自动检查。我将在下面放一个示例。

```
data:
    firstField:
        name: "name"
        error: "none"
        help: "This is a help string"
        value: "$49.99"
        quantity: "2"
        subForm1: 
            value1: "something"
            value2: "somethingElse"
    //etc... 
```

返回此对象后，您可以执行类似以下伪代码的操作

```
for field in data
    find element with name field.name
        if element.error is not field.error, element.error = field.error
        if element.quantity is not field.quantity, element.quantity = field.quantity
        //ifs for each intended field of the form
        element.find newElement with name subform1
            if newElement.value1 is not field.subform1.value1 update it
        //etc... 
```

这将允许您创建一种相当简单的方法来检测表单的更改，并且只更新需要更新的字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:45:54.553

不确定这是否是最好的方法，但对于像我这样的新手，使用 Spring MVC，我基本上只是返回一个“视图”，其中包含保存 AJAX 提交后的 HTML 内容。

我没有方便显示的代码，但从概念上讲，这就是它的样子。我猜 JSON 将是一个较小的有效载荷返回给浏览器，但对于像我这样的傻瓜来说，发回 HTML 更容易。

```
<form action="/form/save" method="post">
  First name: <input type="text" name="firstname"><br>
  Last name: <input type="text" name="lastname">
</form>

<form action="/form/save" method="post">
<!-- Start: This is the HTML that the "view" returns after the form is submitted via AJAX -->
  First name: <input type="text" name="firstname" value="Mark"><br>
  Last name: <input type="text" name="lastname" value="McGuire">
<!-- End: -->
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T17:57:29.353

如果我理解正确，“将旧表单与新表单同步”在没有最终提交的概念中基本上持续存在于控制器中。对于返回的每个 json 块，我都有一个控制器操作，但我使用最终提交概念。但是，您可以通过将持久调用放在这些控制器中来使用此技术。

像js这样的东西：

```
$('#field').on(function(){
           $.ajax({
                url: // url to your controller 
                     // captures relevant information via
                     // javascript and passes it via querystring
                     // or possibly post
                ,dataType: 'jsonp'
                ,success: function(entities, status, ob) {
                    // javascript response
                    // for display purposes
                }});
}); 
```

使用标准的 symfony 控制器，并处理请求字符串或发布参数以更新您的数据库。

# javascript - jquery找不到文本

> ID：15530751
> 
> 赞同：0
> 
> 时间：2013-03-20T17:34:35.103
> 
> 标签：javascript, jquery

**更新：**

所以我添加了一个显示长度的函数，但用户当前必须单击某些东西才能触发它：

```
function check() {
    alert($("#currentTechnicalPositions").html().length);
} 
```

这有效......所以我认为它必须在 $(document).ready 部分之外：

```
$(document).ready(function () {
    $('.topnav').mobileMenu({
        combine: false,
        switchWidth: 600,
        indentString: '&nbsp;&nbsp;&nbsp;',
        prependTo: 'nav#topnav'
    });

    $('#currentTechnicalPositions').rssfeed('http://xyz.com', {
        limit: 100,
        content: false,
        header: false,
        media: false,
        linktarget: '_blank'
    });
}); 
```

我可以附加一个 onComplete 事件吗？如果 rssfeed 没有返回任何内容，我想向用户显示一条消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:35:42.843

`.length`只返回匹配元素的数量。我想你想用类似的东西来检查它`.html()`or `.children().length`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T17:38:01.150

要检查 div 中是否有任何内容，无论是无格式文本还是 html 元素，您都可以这样做

```
$("currentTechnicalPositions").html().length 
```

这将返回 div 中的字符数，包括 html 标签。

# haskell - 按值交换 Haskell 中的两个元素

> ID：15530752
> 
> 赞同：0
> 
> 时间：2013-03-20T17:34:36.747
> 
> 标签：haskell, swap

我是 Haskell 的新手。当我只知道值时，我需要一个函数来交换列表中的两个元素。

例如：

```
swap 5 6 [1,5,7,6,4,3,2] -> [1,6,7,5,4,3,2] 
```

`5`并且`6`这些值不是索引，并且值的索引可以是任何值。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T17:41:28.560

如果您将此任务视为使用交换的值重建列表，这可能会有所帮助。类型签名将是这样的。您正在输入两个要交换的数字和一个列表。

```
swap :: Int -> Int -> [Int] -> [Int] 
```

你现在有几个案例。如果列表为空，那很容易。这是你的基本情况。

```
swap _ _ [] = [] 
```

如果列表不为空，那么您有两个选择。列表的头部要么是您感兴趣的数字，要么不是。如果匹配，则交换值，否则只需重建列表。

```
swap n m (x:xs)
  | n == x = m : (swap n m xs)
  | m == x = n : (swap n m xs)
  | otherwise = x : (swap n m xs) 
```

遇到这种情况后，您可以看到您正在对每个元素进行操作。现在您可以将其转换为`map`解决方案（这更加惯用！）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-20T17:40:44.603

```
swap a b = map (\x -> if x == a then b else if x == b then a else x) 
```

编辑：啊，恐怕我只注意到在我发布答案后，上面的评论以完全相同的方式回答了这个问题。道歉。

# android - 充气后动态命名textview

> ID：15530755
> 
> 赞同：0
> 
> 时间：2013-03-20T17:34:43.833
> 
> 标签：android, android-layout, scrollview, layout-inflater

我在滚动视图中多次膨胀 4 个线性布局。每个布局的标题中都有一个标题。代码片段如下所示。

```
for(int j=0;j<qType.length;j++)
    {           
        LinearLayout.LayoutParams siz = new LinearLayout.LayoutParams(width, height);;
        if(qType[j]==0)
        {               
            view1 = getLayoutInflater().inflate(R.layout.layout1, main_layout,false);
            siz = new LinearLayout.LayoutParams(width, height/3);                                       
        }
        else if(qType[j]==1)
        {                
            view1 = getLayoutInflater().inflate(R.layout.layout3, main_layout,false);
            siz = new LinearLayout.LayoutParams(width, height/3);
        }
        else if(qType[j]==2)
        {           
            view1 = getLayoutInflater().inflate(R.layout.layout4, main_layout,false);
            siz = new LinearLayout.LayoutParams(width, height/3);
        }
        else if(qType[j]==3)
        {           
            view1 = getLayoutInflater().inflate(R.layout.layout5, main_layout,false);
            siz = new LinearLayout.LayoutParams(width, height/2);
        }       

        siz.topMargin = 25;
        main_layout.addView(view1, siz);            
    }
    scroll_layout.addView(main_layout);
    scroll_layout.setBackgroundResource(R.drawable.options_background);     
    setContentView(scroll_layout); 
```

现在每个布局中都有文本视图，我想更改它的文本。如果我通过 findviewbyid 访问它们并提供 settext，则只有第一个实例正在更改，我想在所有情况下更改 textview。

```
 for(int k=0;k<NumberQuestions.length;k++)
    {
        TextView number_title = (TextView)main_layout.findViewById(R.id.number_title);
        TextView mcq_title = (TextView)main_layout.findViewById(R.id.mcq_title);
        TextView comment_title = (TextView)main_layout.findViewById(R.id.comment_title);
        TextView cam_title = (TextView)main_layout.findViewById(R.id.cam_title);
        if(qType[k]==0)
        {               
            number_title.setTypeface(myriadpro_bold);
            number_title.setText(NumberQuestions[k]);

        }
        if(qType[k]==1)
        {
            comment_title.setTypeface(myriadpro_bold);
            comment_title.setText(NumberQuestions[k]);              
        }
        else if(qType[k]==2)
        {
            mcq_title.setTypeface(myriadpro_bold);
            mcq_title.setText(NumberQuestions[k]);              
        }
        else if(qType[k]==3)
        {
            cam_title.setTypeface(myriadpro_bold);
            cam_title.setText(NumberQuestions[k]);              
        } 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:43:47.403

免责声明：我觉得您是在尝试使用 Android 框架，而不是使用它。我的建议有点大修，但我确实觉得这是做事的正确方法。

我建议使用 ListView，因为您多次重复相同的格式。列表视图通常具有对象对象的容器，以及负责将对象映射到列表视图中的特定行的适配器。当您更改底层容器中的数据时，您将调用`notifyDataSetChanged()`适配器的回调以通知它您更改了底层数据并提醒它更新您的列表视图。

来自 android 开发者网站的 2 个很棒的资源/教程： ListView： http: [//developer.android.com/guide/topics/ui/layout/listview.html](http://developer.android.com/guide/topics/ui/layout/listview.html) 适配器：http: [//developer.android.com/guide/topics/ ui/declaring-layout.html#AdapterViews](http://developer.android.com/guide/topics/ui/declaring-layout.html#AdapterViews)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:44:39.433

可能所有布局中的 TextView`android: id`都是相同的，因此解释了 findViewById 方法的行为总是返回第一次出现

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T18:13:21.030

如果我是对的 main_layout 是您的 xml 文件中的名称视图。所以您应该像这样使用

```
 view1 = getLayoutInflater().inflate(R.layout.layout1, main_layout,false);
 TextView tv = (TextView)main_layout.findViewById(R.id.tv1); 
```

其中 tv 是 layout1.xml 中的 texview

# html - 表单偶尔在 GET 而不是 POST 上提交

> ID：15530767
> 
> 赞同：1
> 
> 时间：2013-03-20T17:35:13.333
> 
> 标签：html

我有一个具有 POST 硬编码方法的表单。99.8% 的表单正确发布并且访问日志显示用户使用 POST 方法请求了该页面。是否有任何可能导致其他 0.2% 单击提交并将页面请求作为 GET 进行？

一位用户报告它连续多次发生，访问日志证实了这一点。

它发生在几乎所有浏览器和多个操作系统上，面向遍布全国各地的众多用户。

任何人都知道可能导致此类行为的恶意软件或病毒。缓存？在哪里看的任何指示？

@Diodeus

```
<form id="someid" method="post" action="http://samepage?somevar=0" enctype="multipart/form-data" onkeypress="return check_enter(event);" accept-charset="utf-8" autocomplete="off">
  ... form elements ...
</form> 
```

-

```
function check_enter(e) {
    var target = e.target ? e.target : e.srcElement;
    var keyCode = e.keyCode ? e.keyCode : e.which;
    if (keyCode==13 && target.nodeName.toLowerCase()!='a' &&
            (!target.type || !(target.type=='submit' || target.type=='textarea'))) {
        return false;
    } else {
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-13T14:37:48.737

我看到 OP 已经离开了这份工作。但听起来确实是有人在 URL 查询字符串中传递变量生成的。当安全团队猛烈抨击我们的 Redmine 服务器并生成一堆试图制造问题的获取时，我们就会发生这种情况。

# httpwebrequest - 尝试获取 WebResponse 的回调异常

> ID：15530768
> 
> 赞同：0
> 
> 时间：2013-03-20T17:35:15.440
> 
> 标签：httpwebrequest, silverlight-5.0, httpwebresponse

我正在使用 HttpWebRequest 传输文件。工作流程如下所示：

```
webRequest.BeginGetRequestStream(new AsyncCallback(WriteToStreamCallback), webRequest); 
```

在 WriteStreamToCallback 中：

```
HttpWebRequest webRequest = (HttpWebRequest)asynchronousResult.AsyncState;  
Stream requestStream = webRequest.EndGetRequestStream(asynchronousResult); 
```

将字节写入 requestStream，然后调用：

```
webRequest.BeginGetResponse(new AsyncCallback(ReadHttpResponseCallback), webRequest); 
```

ReadHttpResponseCallback 发生异常：

```
HttpWebRequest webRequest = (HttpWebRequest)asynchronousResult.AsyncState;  
// The next line throws a WebException
HttpWebResponse webResponse = (HttpWebResponse)webRequest.EndGetResponse(asynchronousResult); 
```

例外是：

> System.Windows.dll 中出现“System.Net.WebException”类型的第一次机会异常
> 远程服务器返回错误：NotFound。

应用程序可以从中恢复吗？可能是什么原因？它是间歇性的；这是时间问题吗？
感谢您的任何见解...

**更新**：

```
private void ReadHttpResponseCallback(IAsyncResult asynchronousResult)
{
    try
    {
        HttpWebRequest webRequest = (HttpWebRequest) asynchronousResult.AsyncState;
        // The next line throws the exception
        HttpWebResponse webResponse = (HttpWebResponse) webRequest.EndGetResponse(asynchronousResult);

        /* SNIP */
    }
    catch (WebException webEx)
    {
        System.Diagnostics.Debug.WriteLine(string.Format("      {0} {1}", "ReadHttpResponseCallback - WebException", webEx.Message));
    }
    catch (Exception xx)
    {
        System.Diagnostics.Debug.WriteLine(string.Format("{0}  {1}", "ReadHttpResponseCallback", xx.Message));
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T18:42:02.310

可能在这里找到了解决方案：http: [//fearthecowboy.com/2011/09/02/fixing-webrequests-desire-to-throw-exceptions-instead-of-returning-status/](http://fearthecowboy.com/2011/09/02/fixing-webrequests-desire-to-throw-exceptions-instead-of-returning-status/)

# excel - 计数如果匹配多个字段：第一个字段由首字母组成，第二个字段如果已填写日期

> ID：15530769
> 
> 赞同：0
> 
> 时间：2013-03-20T17:35:32.187
> 
> 标签：excel, excel-formula, excel-2010

我正在尝试创建一个简单的跟踪器。在 B 列和 C 列中，任务被标记为作者，然后作者填写完成日期。

上面是一个仪表板，用于计算项目以便于查看。我计算总数，但无法为完整列编写公式。我试过countifs，但无法让公式起作用。

想法？

![SO15530769 示例](../Images/14a979ebdfff5a1660649ba3f151f4eb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:50:19.040

使用 DSUM 可能会让您朝着正确的方向前进。

[http://office.microsoft.com/en-gb/excel-help/dsum-HP005209069.aspx](http://office.microsoft.com/en-gb/excel-help/dsum-HP005209069.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:53:57.813

根据我在您的图像中看到的，您应该为仪表板制作一个数据透视表。

如果您绝对必须（???）在没有数据透视表的情况下相处，请执行以下操作：

*   在 B 列中启动仪表板，以便 A 列仅包含列标题“任务”和数据（不允许空白行！）
*   将任务数计算为`=COUNTA(A:A)-1`（标题为-1）
*   将所有其他列计算为`=COUNTA(OFFSET(B5;0;0;$E$2;1))`（在此示例中，您计算​​列 B，标题在 B4 中，因此第一个数据在 B5 中，上面公式中的任务数在 $E$2 中）

Offset 函数基本上会返回一个相对于参考开始的范围，并且可以选择大小。所以我们从第一个数据单元开始，让它宽 1 列，深 #oftasks 行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T04:51:32.277

使用 COUNTIFS，假设 VH 在 中`A8`，Tasks/Author/Completed 在 Row12 中，并且您拥有或可能拥有高达 Row1000 的数据：

`=COUNTIFS(B$12:B$1000,A8,C$12:C$1000,">1")`

根据需要复制下来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T05:12:17.303

根据附件尝试以下公式

![在此处输入图像描述](../Images/61290a6f55728a12d1c32647e34f41e2.png)

**输出**

![在此处输入图像描述](../Images/d8cac451dd82f9bdc21d8c0a01b883ec.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-18T16:08:39.307

您可以使用*SUMPRODUCT*查找每位作者完成的数量。

```
=SUMPRODUCT(--($B$8:$B$16=A3),--($C$8:$C$16>1)) 
```

在这种情况下，“--”告诉*SUMPRODUCT*单独处理数组中的每个单元格（我使用 User2063626 的示例），因此它从开头开始检查 B8=VH 并将答案记录为布尔值（1 表示 TRUE或 0 表示 FALSE），在这种情况下它确实等于 VH，因此它使用 1。然后它检查 C8 > 1（如果有日期）并存储 1。然后将两个值相乘1*1=1 为您提供第一行的值。然后它继续检查 B9（得到 1，因为它等于 VH）和 C9（得到 0，因为没有日期），将行结果 1*0=0 相乘并将其添加到前一个结果. 它对数组中的每一行重复并返回作者为 VH 并且有一个完成日期 (2) 的行数。

# c# - 当模型中的列表更改时，ViewModel 中的 ObservableCollection 不会更新

> ID：15530770
> 
> 赞同：3
> 
> 时间：2013-03-20T17:35:32.690
> 
> 标签：c#, wpf, mvvm, mvvm-light, observablecollection

假设我有一个模型类`Data`，我想为它创建`DataViewModel`和创建`DataView`。数据类如下所示：

```
public class Data
{
    public Data()
    {
        RandomData = new List<String>();
    }

    public List<String> RandomData {get; set;}
} 
```

我想创建`DataViewModel`封装`RandomData`属性。我需要`RandomData`在某些地方绑定到该属性，`ListView`并在底层模型`RandomData`更改时对其进行更新。

如果我这样做：

```
public class DataViewModel
{
    private Data _data;

    public DataViewModel(Data data)
    {
        _data = data;
        RandomData = new ObservableCollection<String>(_data.RandomData);
    }

    public ObservableCollection<String> RandomData {get; set;}
} 
```

然后我没有收到任何更新。（我知道这只是复制列表，我只是用它来表达观点）。如果我在该属性上使用 INotifyPropertyChanged，`RandomData`那么我只会收到分配给它的新列表的通知。我如何检查内容的更改？这样做的首选方法是什么？

感谢您的任何建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T08:53:58.223

对于这个特定示例，我很想将您的模型更改为使用 ObservableCollection

```
public class Data
{
    public Data()
    {
        RandomData = new ObservableCollection<String>();
    }

    public ObservableCollection<String> RandomData {get; set;}
} 
```

然后在您的视图模型中将其公开为[ReadOnlyObservableCollection](http://msdn.microsoft.com/en-us/library/ms668620.aspx)。请注意，ReadOnlyObservableCollection 是原始 ObservableCollection 的包装器。数据不会被复制，来自原始集合的更改通知由 ReadOnlyObservableCollection 反映。

```
public class DataViewModel
{
    public DataViewModel(Data data)
    {
        RandomData = new ReadOnlyObservableCollection<String>(data.RandomData);
    }

    public ReadOnlyObservableCollection<String> RandomData {get; private set;}
} 
```

这是假设您当然希望视图模型 RandomData 是只读的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T17:42:41.153

我相信要注意您想要使用 INotifyCollectionChanged 的​​现有集合中的更改。

[http://msdn.microsoft.com/en-us/library/system.collections.specialized.inotifycollectionchanged.aspx](http://msdn.microsoft.com/en-us/library/system.collections.specialized.inotifycollectionchanged.aspx)

实现这个接口可能是一个很好的使用方法。但是，我相信 MSDN 中的 MVVM 模型文章[http://msdn.microsoft.com/en-us/magazine/dd419663.aspx](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)中，Josh Smith 甚至不使用此接口就可以做到这一点。我知道在他给出的示例中，他将客户添加到具有类似于以下逻辑的集合中：

```
void OnCollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
        {
            if (e.NewItems != null && e.NewItems.Count != 0)
                foreach (CustomerViewModel custVM in e.NewItems)
                    custVM.PropertyChanged += this.OnCustomerViewModelPropertyChanged;

            if (e.OldItems != null && e.OldItems.Count != 0)
                foreach (CustomerViewModel custVM in e.OldItems)
                    custVM.PropertyChanged -= this.OnCustomerViewModelPropertyChanged;
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T14:17:16.770

选项 1（稍微远离 MVVM 但有效）。将此添加到您的 View 代码隐藏的 OnNagivatedTo 中，它将随时刷新数据：

```
protected override void OnNavigatedTo(NavigationEventArgs e) {
this.DataContext = new YourViewModel();
} 
```

选项 2：

```
 raise RaisePropertyChanged(YourItem); 
```

# asp.net-mvc - 在asp.net mvc中将动作方法参数传递给ActionFilterAttribute

> ID：15530779
> 
> 赞同：32
> 
> 时间：2013-03-20T17:36:00.443
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2

我知道我可以使用 filterContext 来获得它。但是，如果操作方法参数的名称不同，这不是很灵活。这应该有效：

```
[HttpGet]
[NewAuthoriseAttribute(SomeId = id)]
public ActionResult Index(int id)
{
    ...

public class NewActionFilterAttribute : ActionFilterAttribute
{   
    public int SomeId { get; set; }
    ... 
```

但它没有（它甚至没有编译）。有任何想法吗？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-03-20T18:18:30.500

基于@Pankaj 的回答和@csetzkorn 的评论：

您将参数的名称作为字符串传递，然后检查 filterContext

```
public class NewAuthoriseAttribute : ActionFilterAttribute
{
    public string IdParamName { get; set; }

    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        if (filterContext.ActionParameters.ContainsKey(IdParamName))
        {
            var id = filterContext.ActionParameters[IdParamName] as Int32?;
        }
    }
}

[NewAuthorizeAttribute(IdParamName = "fooId")]
public ActionResult Index(int fooId)
{ ... } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T17:54:38.660

**编辑**

我假设您正在寻找参数名称的别名。这使您可以灵活地拥有参数名称的多个别名。

![在此处输入图像描述](../Images/c7e6411c7c89f6b9421660412637afea.png)

**ActionParameterAlias.ParameterAlias 重载**

![在此处输入图像描述](../Images/96abb2bed2c96a754e07fa30d6416c95.png)

如果是这样，您可以给出如下所示的别名。

```
[ParameterAlias("Original_Parameter_Name", 
                 "New_Parameter_Name")]
[ParameterAlias("Original_Parameter_Name", 
                 "New_Parameter_Name1")]
[ParameterAlias("Original_Parameter_Name", 
                 "New_Parameter_Name2")]
[ParameterAlias("Original_Parameter_Name", 
                 "New_Parameter_Name3")] 
```

public ActionResult ActionMethod(Model ParameterValue) { return View(ParameterValue); }

* * *

## **原帖**

试试这个。

**属性**

```
public class NewAuthoriseAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        if (filterContext.ActionParameters.ContainsKey("id"))
        {
            var id = filterContext.ActionParameters["id"] as Int32?;
        }
    }
} 
```

**动作方法**

确保将参数类型设置为可为空以避免运行时崩溃。

```
[NewAuthoriseAttribute]
public ActionResult Index(Int32? id)
{
} 
```

# c++ - 未解析的外部符号 GLFW

> ID：15530780
> 
> 赞同：-2
> 
> 时间：2013-03-20T17:36:07.403
> 
> 标签：c++, opengl, linker, glfw

使用以下代码：

```
#include <GL/glfw.h>

int main() {
        glfwInit();
        glfwSleep( 1.0 );
        glfwTerminate();
} 
```

我收到这个错误

```
1>------ Build started: Project: tutorialtry6, Configuration: Debug Win32 ------
1>main.obj : error LNK2019: unresolved external symbol _glfwTerminate referenced in function _main
1>main.obj : error LNK2019: unresolved external symbol _glfwSleep referenced in function _main
1>main.obj : error LNK2019: unresolved external symbol _glfwInit referenced in function _main
1>c:\users\indrajit kurmi\documents\visual studio 2010\Projects\tutorialtry6\Debug\tutorialtry6.exe : fatal error LNK1120: 3 unresolved externals
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

我在链接器附加依赖项中添加了 opengl32.lib。我该如何解决这个问题？

如果您知道一些教程链接，其中他们逐步展示了如何将 OpenGL 与 GLFW 一起使用，请发布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:58:27.003

您是否意识到您应该首先**构建**该`GLFW`库，然后**链接**（因为它不是仅标头库）您的应用程序针对它？如果没有，那么这就是你现在应该做的。如果您需要更多帮助，请返回您尝试的**一些结果**，并清楚说明问题所在。

**注意**：只要您了解如何安装 3rd 方库并将其合并到您的项目中的一般过程，就不需要关于如何执行这些简单操作的完整教程。

# javascript - 在 jQuery 中，如果需要，我如何将事件传递给父锚点？

> ID：15530791
> 
> 赞同：0
> 
> 时间：2013-03-20T17:36:45.327
> 
> 标签：javascript, jquery, clojurescript

我在使用 jQuery 的 clojurescript 中，但我认为 cljs 和 js 的答案应该是相同的。

我有一个辅助函数，它创建一个锚元素，然后在其中放置一个图标元素。我的锚对按钮类型有一个独特的类。

当我做类似的事情时

> $('.my-btn-type').click(function(e) {console.log(e.target)});

*   如果单击图标则打印（即使处理程序在父级上）
*   如果仅单击锚点，则打印

我经常遇到一个问题，即由锚点包裹的图标是事件目标，而不是附加了处理程序的锚点。我在我的处理程序函数中需要的锚元素中使用数据属性。这迫使我手动检查 event.target 是图标还是锚点，然后手动冒泡事件或继续前进。

这似乎很骇人听闻，而且很痛苦。必须有一种简单的方法来附加处理程序，在 jQuery、js 或 clojurescript 中，它只会调用处理程序绑定到的元素。我该怎么做呢？

编辑：

使用“this”是我需要的，但在 clojurescript 中需要 this-as 宏。该线程有一个示例[在此处输入链接描述](https://stackoverflow.com/questions/15531261/accessing-this-in-clojurescript)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:50:24.303

如果我理解正确，您似乎正在为锚点和图标连接点击事件。

或者锚点和图标具有相同的类名。

例如：

```
<a href="#" class="my-btn-type" >
    <img src="../img/icon.png" class="my-btn-type" />
</a> 
```

# ios - 链接到应用商店中的应用管理订阅

> ID：15530794
> 
> 赞同：54
> 
> 时间：2013-03-20T17:36:50.727
> 
> 标签：ios, app-store, in-app-purchase, newsstand-kit, openurl

目前，通过应用内购买，取消自动续订订阅的唯一方法是对设备执行以下操作：

设置 > 商店 > 查看我的帐户 > 管理我的订阅

是否可以通过编程方式直接链接到应用商店中的“管理我的订阅”页面？我知道我可以通过类似的方式打开应用商店

```
NSURL *url = [NSURL URLWithString:@"itms-apps://itunes.apple.com"];
[[UIApplication sharedApplication] openURL:url]; 
```

我见过其他应用程序这样做，但我似乎无法弄清楚如何。

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2018-07-01T22:37:33.717

新的官方方式（根据[WWDC 2018 Session 705](https://developer.apple.com/videos/play/wwdc2018/705/)）是以下网址： `https://apps.apple.com/account/subscriptions`

文档链接：[https ://developer.apple.com/documentation/storekit/in-app_purchase/subscriptions_and_offers/handling_subscriptions_billing](https://developer.apple.com/documentation/storekit/in-app_purchase/subscriptions_and_offers/handling_subscriptions_billing)

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-04-15T05:58:07.637

遵循此[iTunes Connect 指南](https://developer.apple.com/library/content/documentation/NetworkingInternet/Conceptual/StoreKitGuide/Chapters/Subscriptions.html#//apple_ref/doc/uid/TP40008267-CH7-DontLinkElementID_1ml)，此 URL 有效：

```
https://buy.itunes.apple.com/WebObjects/MZFinance.woa/wa/manageSubscriptions 
```

> 您可以直接链接到 App Store 中的“管理订阅”页面，而无需编写自己的“管理订阅”页面。为此，请链接到此 URL： [https ://buy.itunes.apple.com/WebObjects/MZFinance.woa/wa/manageSubscriptions](https://buy.itunes.apple.com/WebObjects/MZFinance.woa/wa/manageSubscriptions)

但是，这将在重定向到 App Store 应用程序之前重定向到 Safari。因此，用户将在他们的设备中看到应用程序切换两次。更改`https`为`itms`或`itms-apps`似乎不起作用。

顺便说一句，这仅适用于设备。它在模拟器上不起作用。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2018-10-20T09:50:56.613

IOS上的2018年是上述答案的组合。此 URL 将以正确的视图打开 App Store 应用程序： `itms-apps://apps.apple.com/account/subscriptions`

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2018-11-13T07:24:45.900

截至 2018 年 11 月，这是最好的方法。

```
if let url = URL(string: "itms-apps://apps.apple.com/account/subscriptions") {
    if UIApplication.shared.canOpenURL(url) {
        UIApplication.shared.open(url, options: [:])
    }
} 
```

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2014-04-09T21:55:13.073

由于我在尝试使用链接时收到 Safari 错误，因此上述答案可能略微过时（包括 Apple 的文档 grrr）：

```
// old way
https://buy.itunes.apple.com/WebObjects/MZFinance.woa/wa/manageSubscriptions 
```

使用 XCode 5.1 和 iOS 7.x，我可以使用以下`openURL:`调用正确链接到相关应用程序的“管理订阅”部分：

```
// new way
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"itms-apps://buy.itunes.apple.com/WebObjects/MZFinance.woa/wa/manageSubscriptions"]] 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2013-08-08T20:44:21.423

使用此链接跳过 safari 并直接进入应用商店中的屏幕：

```
itmss://buy.itunes.apple.com/WebObjects/MZFinance.woa/wa/manageSubscriptions 
```

玩得开心

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-02-25T14:51:14.260

我的应用最近因在我的应用中提供外部订阅管理选项而被拒绝。我从 Apple 开发团队收到的消息是：“我们仍然发现，当您为您的应用提交应用内购买产品时，应用内购买功能不存在于您的二进制文件中。具体而言，“管理订阅”选项链接应用程序到 iTunes Store。”

我提供了一个视图，以便用户可以“恢复/订阅”到年度自动续订订阅（当然，我添加了底层逻辑来检测用户何时订阅/未订阅，以及一个“管理我的订阅”按钮允许用户通过 iTunes 管理他的订阅（这是我从包括这篇文章在内的各种来源中得到的）。

我认为应该避免这种情况，以便让 IAP 产品被接受。也许您在提交应用程序进行审核时遇到了同样的问题。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2021-01-19T17:28:34.163

Apple 在其支持页面中使用的新 URL 似乎是`https://finance-app.itunes.apple.com/account/subscriptions`. 这将在任何 iOS 设备上打开 iTunes Store 应用程序。

# google-chrome - 网络浏览器缓冲实时 webm 流并引入延迟的解决方法（如何播放实时 webm 流）

> ID：15530802
> 
> 赞同：1
> 
> 时间：2013-03-20T17:37:10.707
> 
> 标签：google-chrome, ffmpeg, html5-video, webm, ffserver

我有来自 ffserver 的 webm 流（16 个流），设法让所有 16 个流在浏览器中一次加载，但是无论我只播放一个还是 16 个，由于缓冲或握手加上某种补偿，以尝试通过浏览器本身同步时间戳，这导致了我的问题：

是否可以通过 HTML5 的视频标签强制浏览器播放 webm 流（我只关心 Chrome，但它也在 Firefox 中发生）从实际的最新帧播放（客户端和服务器通过 LAN 共享一个公共 NTP 服务器，因此它们可以保证同步，如果这是一个因素）而不是保持几秒钟的缓冲区并从该缓冲区的开始播放？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-08T13:11:44.350

您是否尝试过更改 ffserver 配置文件设置。我还有一系列管道图像，并且可能将以下参数添加到您的配置文件中可能会减少延迟。

预卷 0

开始发送键

# iphone - 在我的 iPhone 应用中播放播客音频文件

> ID：15530803
> 
> 赞同：0
> 
> 时间：2013-03-20T17:37:11.293
> 
> 标签：iphone, mpmovieplayercontroller, podcast

我正在创建一个 iPhone 应用程序，用户可以在其中浏览和下载 iTunes 播客。

我正在尝试了解如何播放音频播客。这是我尝试过的：

```
-(IBAction)play
{
    NSURL *urli=[NSURL URLWithString:@"https://itunes.apple.com/sa/podcast/mwq-alqary-bdalrhmn-bn-jmal/id539157991?mt=2#"];
    p = [[MPMoviePlayerController alloc] initWithContentURL:urli];

    [p play];
} 
```

但我听不到任何声音。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T23:07:04.020

好的，我对此进行了一些研究，因为我以前从未处理过播客或 MPMedia 播放器，但这里有一个指向苹果示例代码的链接，它允许您选择一个媒体文件并在您的设备上播放它。这可能不是一个 url 下载，但它会让您了解它是如何完成的。那里有两种折旧方法，一种与模态视图相关，另一种是重用标识符，如果您研究，您可以在堆栈溢出答案中找到新的方法。无论如何，我希望这对你有所帮助。链接在这里：

[http://developer.apple.com/library/ios/#samplecode/AddMusic/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008845](http://developer.apple.com/library/ios/#samplecode/AddMusic/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008845)

# ruby - Ruby raise 方法和隐式强制

> ID：15530805
> 
> 赞同：1
> 
> 时间：2013-03-20T17:37:23.537
> 
> 标签：ruby

考虑以下两种引发异常的方法 -

```
class ExampleError < StandardError; end

raise ExampleError.new

raise ExampleError 
```

在第一种方式中，为`ExampleError`方法提供了一个实例`raise`。该`raise`方法可以接受一个`Exception`参数，一切都很清楚。

在第二种方式`Class`中，为该方法提供了一个实例，但这仍然有效。

`raise`由于可以接受的事实`String`，是否有参数从`Class`到的隐式转换`String`？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T17:41:32.507

不，它不会转换为`String`. 事实上，你的假设是错误的。`raise`不想要某个异常类的实例。它宁愿拥有异常类本身。请参阅[Kernel#raise](http://www.ruby-doc.org/core-2.0/Kernel.html#method-i-raise)的文档：

> ... 使用单个 String 参数，引发 RuntimeError 并将字符串作为消息。否则，第一个参数应该是异常类的名称（或在发送异常消息时返回异常对象的对象）。...

因此，您可以将任何内容传递给`raise`，只要它是字符串或具有`exception`方法。您的两个变体都通过这里：

```
class ExampleError < StandardError; end

ExampleError.exception # => #<ExampleError: ExampleError>
ExampleError.new.exception # => #<ExampleError: ExampleError> 
```

# php - MASS WHERE/IN 语句，如何处理空/返回的数据以及匹配？

> ID：15530806
> 
> 赞同：0
> 
> 时间：2013-03-20T17:37:23.637
> 
> 标签：php, mysql, match, where, empty-list

我有一个问题希望你能帮助我。。

我正在使用 WHERE/IN 执行大型 SELECT 语句，并为要使用的所有“搜索词”传入一个 $array。

快速示例..（尽管最后 $array 更大）

```
$harNumArray = (0100001943,0100001944,0100002392,0100007414,0100012110,0100015761,0100015835);
$harNumArray2 = implode(',', $harNumArray);
$results  = mysqli_query($mysqli, "SELECT har_id, guar_num FROM placements WHERE har_id IN ($harNumArray2)");

//**outputting the matches values/data from the search (select)**

while ($row = mysqli_fetch_assoc($results)) {
    //echo "HAR_ID: ". $row["har_id"]. "\tGUAR_NUM: " . $row["guar_num"] . "\r\n<BR>";
    echo $row["har_id"]. "\t" . $row["guar_num"] . "\r\n<BR>";
    fwrite($fh, $row["har_id"] . "\t" . $row["guar_num"] . "\r\n");
} 
```

这工作得很好/很好（*感谢 msturdy 的提示）......'当'有一个匹配..如果没有匹配..没有返回。

但是.. 例如，如果在数据库中未找到 $harNumArray（索引 0）中的第一个值... $row = mysqli_fetch_assoc($results 循环中没有返回任何内容...

仅找到数字.. 以及从数据库中提取的匹配/相关数据..

我希望它仍然是这样的：

*   0100001943^- //在数据库中丢失/热门找到的数字（条目），但仍在首位使用原始搜索词）
*   0100001944^0123467894
*   0100002392^0011122234
*   0100007414^0002130567
*   0100012110^0000045432
*   0100015761^0001000045
*   0100015835^0998775233

或者这样是可以接受的（但上面的布局会更好）：

*   -^- //在数据库中丢失/热找到的数字（条目）
*   0100001944^0123467894
*   0100002392^0011122234
*   0100007414^0002130567
*   0100012110^0000045432
*   0100015761^0001000045
*   0100015835^0998775233

如果在 WHERE/IN SELECT 中找不到 $harNumArray 数组中的第一个数字.. 它不会返回任何内容（这是有道理的）..

但是..我“需要”考虑不匹配的问题..并插入一个空白（或其他东西）..以保持最终“列表”（文本文件）的间距/顺序

我该怎么做呢？

谢谢！

**编辑：：**

这是代码的当前状态：（仍然不返回匹配项）

@卡尔

```
//stack overflow approach:
    //format array data
    $harNumArray2 = "'" . implode("','", $harNumArray) . "'";    //single quotes
    //$harNumArray2 = implode(',', $harNumArray);  //no quotes
    //$harNumArray2 = '"' . implode('","', $harNumArray) . '"';  //double quotes
    //print_r("ARRAY CHECK: " . $harNumArray2);

    $results = mysqli_query($mysqli, "SELECT har_id, guar_num FROM placements WHERE har_id IN ($harNumArray2) ORDER BY har_id ASC") or die(mysql_error());
    //$results = mysqli_query($mysqli, "SELECT har_id, guar_num FROM placements WHERE har_id IN (" . $harNumArray2 . ") ORDER BY har_id ASC") or die(mysql_error());

    echo("<BR>");
    print_r("SELECT har_id, guar_num FROM placements WHERE har_id IN ($harNumArray2)");
    echo("<BR>");

    $rows = array();
    while($row = mysqli_fetch_assoc($results)) {
        $rows[$row['har_id']] = $row;
    }
    foreach ($harNumArray as $id){
        if (isset($rows[$id])){
            //... do something with $rows[$id]
            print_r($rows[$id] . "<BR>");

        }else{
            //... no match for $id
            print_r("....no match....");
            echo("<BR>");
        }
    } 
```

仍然没有返回匹配...无论单引号，没有引号或双引号..

难倒？

谢谢

**更新二：**

@卡尔-

好的，我运行了您提供的代码..

这是我的输出：

数组（[har_id] => 000100007537 [guar_num] => 0000676798）数组（[har_id] => 000100007538 [guar_num] => 0000676798）数组（[har_id] => 000100007539 [guar_num] => 0000676）（数组） => 000100007768 [guar_num] => 0000675266）数组（[har_id] => 000100007769 [guar_num] => 0000675266）

DB 中的 HAR_ID = varchar(12)

DB 中的 GUAR_NUM = varchar(12)

如果我在#results 查询中保留引号.. 我得到数据返回.. （但无论如何.. 没有找到匹配项）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:48:55.593

执行您的查询：

```
$harNumArray = array(
    '0100001943',
    '0100001944',
    '0100002392',
    '0100007414',
    '0100012110',
);
$harNumArray2 = "'".implode("','", $harNumArray)."'";
$results = mysqli_query($mysqli, "SELECT har_id, guar_num FROM placements WHERE har_id IN ($harNumArray2)"); 
```

然后构建结果图：

```
$rows = array();
while ($row = mysqli_fetch_assoc($results)) {
    $rows[$row['har_id']] = $row;
} 
```

然后您可以遍历您的 ID 检查匹配项：

```
foreach ($harNumArray as $id){

    if (isset($rows[$id])){
        ... do something with $rows[$id]
    }else{
        ... no match for $id
    }
} 
```

**更新 1：**

听起来您的查询没有返回任何内容。运行此代码：

```
$results = mysqli_query($mysqli, "SELECT har_id, guar_num FROM placements LIMIT 5");
while ($row = mysqli_fetch_assoc($results)) print_r($row); 
```

然后用输出更新你的问题。听起来您的数据库并不完全包含您的想法。

# eclipse - 更新项目配置从 src/main/resources 中排除所有文件

> ID：15530812
> 
> 赞同：4
> 
> 时间：2013-03-20T17:37:35.743
> 
> 标签：eclipse, maven-2, m2eclipse

我正在使用 STS 版本 2.8.1，其中包括 m2e 插件版本 1.1。

我的问题是有时我会在“问题”选项卡中看到以下错误：

> pom.xml 的项目配置不是最新的

解决方法是从 m2e 中选择更新项目配置菜单项，然后错误消失。

但是，我随后注意到 Eclipse 中的 Java 构建路径已从 src/main/resources 目录中排除了所有文件，我每次都必须手动删除此过滤器。

这是我的 pom.xml 还是 m2e 插件的问题？

我的有效 pom 包含以下内容：

```
<sourceDirectory>myProject\src\main\java
</sourceDirectory>
<scriptSourceDirectory>myProject\src\main\scripts
</scriptSourceDirectory>
<testSourceDirectory>myProject\src\test\java
</testSourceDirectory>
<outputDirectory>myProject\target\classes
</outputDirectory>
<testOutputDirectory>myProject\target\test-classes
</testOutputDirectory>
<resources>
    <resource>
        <directory>myProject\src\main\resources
        </directory>
    </resource>
</resources>
<testResources>
    <testResource>
        <directory>myProject\src\test\resources
        </directory>
    </testResource>
</testResources> 
```

# c# - C# 从特定组获取值

> ID：15530813
> 
> 赞同：1
> 
> 时间：2013-03-20T17:37:36.960
> 
> 标签：c#, list

如何获取从索引 1 开始的列表中的所有值以及之后的所有值？

```
list.Split(' ')[1:] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T17:38:26.013

使用 Linq：

```
var l = list.Split(' ').Skip(1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T17:38:44.677

使用 LINQ[`Skip`](http://msdn.microsoft.com/en-us/library/bb358985.aspx)扩展方法：

```
list.Split(' ').Skip(1) 
```

如果要将结果作为列表，则还需要使用扩展方法`ToList`。

```
list.Split(' ').Skip(1).ToList() 
```

值得注意的是，还有一个[`Take`](http://msdn.microsoft.com/en-us/library/bb503062.aspx)扩展方法可以获取`n`序列中的下一个项目。通常这样使用

```
list.Split(' ').Skip(n*pageSize).Take(pageSize) 
```

# csv - 批处理循环，csv 解析和正确输出到文件的问题

> ID：15530816
> 
> 赞同：3
> 
> 时间：2013-03-20T17:37:47.193
> 
> 标签：csv, for-loop, batch-file

让我描述一下我的问题。我有一个从 excel 导出的包含大量数据的 csv 文件。该文件在第一行有标题，在第二行有列标题。我只需要从该文件中提取两列（第 2 列和第 3 列），将它们放入 1 列并将输出发送到另一个文件。

例子：

```
Title
colA , colB , colC , colD ,...
abc  , def  , ghi  , jkl  ,...
abc  , def  , ghi  , jkl  ,...
abc  , def  , ghi  , jkl  ,...
abc  , def  , ghi  , jkl  ,... 
```

问题是，当 csv 解析器遇到包含带有 - ( ) @ 字符的字符串的行时，它会失败。（循环将它们视为我认为的分隔符，因此每次都会给我一个超出范围的错误）。

这是我已经拥有的。

```
@Echo off & setlocal EnableExtensions
setLocal EnableDelayedExpansion

REM creating and clearing files
copy /y NUL C:\list1.csv >NUL
copy /y NUL C:\list1_tmp.csv >NUL
copy /y NUL C:\exportedColumns.csv >NUL
copy /y NUL C:\Result.txt >NUL

set Result=C:\Result.txt
set Source=C:\sourcelist.csv
set list1=C:\list1.csv
set list1_tmp=C:\list1_tmp.csv
set expCol=C:\exportedColumns.csv

REM skip 1st two lines from source file and put to output file list1
for /f "skip=2 delims=*" %%a in (%Source%) do (echo %%a >>%list1%)

REM shorten each line to 500 chars and put it to new file
for /f "tokens=* delims=" %%a in ("%list1%") do (
set s=%%a
set s=%s:~0,500% 
echo.%s% >> "%list1_tmp%"
)
REM ^^^^^^^^^^^ this is not working. It puts only 1 space to the output file

rem Parsing the csv file
rem Process the file:
call :ProcessFile < %list1_tmp%
exit /B

:ProcessFile
set /P line=
:nextLine
    set line=:EOF
    set /P line=
    if "!line!" == ":EOF" goto :EOF
    set i=0
    for %%e in (%line%) do (
        set /A i+=1
        for %%i in (!i!) do (
        if %%i==1 echo %%~e >> %expCol%
        if %%i==2 echo %%~e >> %expCol%
    )
    if %%i==3 goto nextLine
    REM I don't want it to process all the columns
    )
goto nextLine 
```

我想请您看看这个并帮助我将 2 列合二为一并将输出放入 1 个文件。

我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:59:47.547

这个怎么样？

```
for /f "skip=2 tokens=2,3 delims=, " %i in (input.csv) do echo %i%j >> output.csv 
```

**编辑：**

要将 / 替换为换行符，您可以尝试以下操作：

```
@echo off

for /f "skip=2 tokens=2,3 delims=, " %%i in (test.csv) do call :replace %%i%%%j
goto :eof

:replace
set string=%*
For /f "tokens=1,* delims=/" %%a in ('echo %string%') Do (
echo.%%a
If not "%%b"=="" call :replace %%b) 
```

对于以下输入：

```
title
colA , colB , colC , colD ,...
abc  , def  , g\hi  , jkl  ,... 
```

以上将输出：

```
defg
hi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T18:06:58.690

您提到的问题之一是在该行`for %%e in (%line%) do ...`中，当`%line%`包含一个特殊字符时，例如`(`，这自然会弄乱解释器。

您可以通过使用字符串替换来避免这种情况，以便在每列周围加上引号。例如（我跳过了你的一些代码，只关注有问题的部分）：

```
:ProcessFile
set /P line=
:nextLine
    for %%e in ("%line:,=" "%") do (
        echo %%~e
    )
goto nextLine 
```

注意这部分： `"%line:,=" "%"`。即用 替换所有逗号`" "`，并`"`在行首和行尾添加。

因此，如果我们正在处理的特定行如下所示：

```
abc, def (foo), ghi 
```

将`for`扩展为：

```
for %%e in ("abc" "def (foo)" "ghi") do ... 
```

一切都很好地包含在引号中，因此`(`不会干扰。当然，如果您在特定列中有引号，那会干扰...

下一行，在我使用的地方`%%e`，我制作它`%%~e`是为了去掉引号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T18:59:03.207

碰巧我今天早上一直在尝试将 CSV 文件作为 ADODB 记录集进行访问。我的代码可能对你有用。实际上，脚本循环遍历`.csv`当前目录中的每个文件，显示`column = value`每一行。

JScript 应该很容易修改以根据需要组合列。由于这是一个批处理/JScript 混合，您可以选择是否要创建一个`Scripting.FileSystemObject`对象或只是重定向该`cscript`行的输出以生成您的新`.csv`文件。

这是`csv.bat`. *耸耸肩*这不是最终的答案，而是建议的替代路径。

```
@if (@a==@b) @end /*

:: batch portion

@echo off
setlocal

:: force 32-bit environment for ODBC drivers
if exist "%windir%\syswow64\cmd.exe" (set "cmd=%windir%\syswow64\cmd.exe") else set "cmd=cmd.exe"

for /r %%I in (*.csv) do (
    echo Processing %%~nxI:
    echo;
    %cmd% /c cscript /nologo /e:jscript "%~f0" "%%~dpI" "%%~nxI"
    echo;
)

goto :EOF

:: JScript portion */
var conn = new ActiveXObject("ADODB.Connection");
var rs = new ActiveXObject("ADODB.Recordset");

var dsn = "Driver={Microsoft Text Driver (*.txt; *.csv)};"
    + "Dbq=" + WSH.Arguments(0) + ";"
    + "Extensions=asc,csv,tab,txt;";

try { conn.Open(dsn); }
catch(e) {

    // If the Microsoft Text Driver didn't work,
    // try the MS Jet 4.0 provider instead.

    var dsn = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source="
    + WSH.Arguments(0)
    + ";Extended Properties=\"text;HDR=Yes;FMT=Delimited\";";

    try { conn.Open(dsn); }
    catch(e) {

        // If that didn't work either, then give up.

        WSH.Echo("Unable to create ADODB connection.");
        WSH.Quit(1);
    }
}

rs.Open("SELECT * from " + WSH.Arguments(1), conn, 2, 4);

while (!rs.EOF) {
    for (var i=0; i<rs.Fields.Count; i++) {
        WSH.Echo(rs.Fields(i).Name + ' = ' + rs.Fields(i));
    }
    rs.MoveNext;
}

rs.Close();
conn.Close(); 
```

# delphi - 将 Indy TidHttpServer 与其中一张网卡绑定

> ID：15530817
> 
> 赞同：2
> 
> 时间：2013-03-20T17:37:47.463
> 
> 标签：delphi, http, indy

我使用 Indy 10 TidHttpServer 在 delphi xe2 上实现了一个 web 服务，在局域网中运行良好。

我发现的问题在于一台带有 2 个网卡的计算机，一个是正常工作的普通 NIC，另一个是虚拟 NIC，它将流量路由到连接到电话公司的 x.25 线路以进行信用卡处理。

如果服务器重新启动（我他们喜欢经常这样做），Windows 会首先安装虚拟 NIC，然后我的服务器会以某种方式绑定到它。我根本不明白它是如何工作的。

我在 indy 的文档中读到它应该绑定到所有 ip，并且应该监听两个网络。然而，这并没有发生。我基本上使用默认配置，除了分配给 8888 的端口。

有没有办法从 indy http 服务器中排除这个网卡？

如果可能的话，我正在寻找一个例子。

本地网络在 192.* 范围内，虚拟网卡在 187.* 范围内。今天要让它工作，我需要禁用虚拟网卡，加载我的服务器，然后再次启用虚拟网卡。工作正常。但如果重新启动，我需要再做一遍。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T18:41:09.207

您可以通过在激活服务器之前手动添加和配置*绑定*来将服务器绑定到特定卡。一个基本的例子是这样的：

```
uses IdSocketHandle;

{$R *.dfm}

procedure TForm1.Button1Click(Sender: TObject);
var
  SHandle: TIdSocketHandle;
begin
  TIdTCPServer1.Bindings.Clear; //make sure there's no other bindings
  SHandle := IdTCPServer1.Bindings.Add;
  SHandle.IP := '192.168.0.15';
  SHandle.Port := 3748;
  IdTCPServer1.Active := True;
end; 
```

如您所见，该示例是使用`TIdTCPServer`. 它适用于任何`TIdCustomTCPServer`后代，包括`TIdHTTPServer`.

# business-catalyst - 仅显示业务催化剂中的子菜单

> ID：15530822
> 
> 赞同：0
> 
> 时间：2013-03-20T17:37:54.077
> 
> 标签：business-catalyst

我有一个我正在使用的主菜单。我的服务页面有子页面，当您滚动菜单时显示为下拉菜单。当我在服务页面上时，除了下拉菜单外，我还想显示子菜单，并且只显示页面左侧的子菜单。我不想创建两个菜单，因为这似乎是多余的。有什么建议么？谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T20:49:06.043

这就是我所做的：我确保根项目上有 id。然后使用 jquery，我能够提取出现在根项之后的 ul。我将它弹出到一个 div 中，然后从那里设置样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-24T11:19:45.433

这是一种相对简洁的方法，可以让侧导航菜单反映主菜单中所需的子菜单项，无需 javascript（从而避免菜单在页面加载时闪烁）。

这是我们的示例菜单结构：

```
home
|-- Shop
|   |-- Shipping
|   |-- Terms
|   `-- FAQ
|
|-- Account
|   |-- Sign Up
|   `-- My Details
|
`-- About
    |-- Contact Us
    |-- Our History
    `-- Where We Are 
```

共有三个模板：“Shop”、“Account”和“About”。

在“Shop”模板中，我们的侧边导航 HTML 如下所示（注意`show-group-`类）：

```
<nav class="sidenav-a show-group-shop">
    {module_menu, version="2", menuId="750134", moduleTemplateGroup="Default"}
</nav> 
```

在 BC 中创建菜单时，我们仅将类应用于父节点。在“Shop”上，我们应用 class `group-shop`，对于“Account”，我们应用 class `group-account`，而对于“About” `group-about`，。

同样，我们更改`show-group-`每个模板中 nav 元素上的类。

为清楚起见，我们的菜单标签将生成以下 HTML：

```
<div id="myMenu1">
    <ul id="myMenu1List">
        <li class="group-shop selected"><a href="">Shop</a>
            <ul>
                <li><a href="">Shipping</a></li>
                <li><a href="">Terms</a></li>
                <li><a href="">FAQ</a></li>
            </ul>
        </li>
        <li class="group-account"><a href="/account">Account</a>
            <ul>
                <li><a href="/sign-up">Sign Up</a></li>
                <li><a href="/my-details">My Details</a></li>
            </ul>
        </li>
        <li class="group-about"><a href="/about">About</a>
            <ul>
                <li><a href="/contact-us">Contact Us</a></li>
                <li><a href="/our-history">Our History</a></li>
                <li><a href="/where">Where We Are</a></li>
            </ul>
        </li>
    </ul>
</div> 
```

（忽略 id，它们是由 BC 生成的，我还没有看到删除它们的方法。）

这是仅显示所需子菜单的[较少内容：](http://lesscss.org)

```
nav {
  &.sidenav-a {
    & > ul > li { /* Target only first-level list items */
      display: none;
    }
  }

  .show-menu-group(@groupname) {
    &.show-group-@{groupname} {
      ul > li.group-@{groupname} {
        display: block;
      }
    }
  }

  .show-menu-group(shop);
  .show-menu-group(account);
  .show-menu-group(about);
} 
```

或者，作为 CSS：

```
nav.sidenav-a > ul > li {
  display: none;
}
nav.show-group-shop ul > li.group-shop {
  display: block;
}
nav.show-group-account ul > li.group-account {
  display: block;
}
nav.show-group-about ul > li.group-about {
  display: block;
} 
```

您可以看到每个子菜单的 CSS 增长速度有多快。

可以在[http://atlexstockyards.worldsecuresystems.com/saleyards-abattoirs-and-feedlots](http://atlexstockyards.worldsecuresystems.com/saleyards-abattoirs-and-feedlots)看到上述代码的实现。

（如果您在 Chrome 开发工具中启用了[“启用 CSS 源映射”，](https://developers.google.com/chrome-developer-tools/docs/css-preprocessors)则可以从应用的样式追溯到源 Less ）

# jquery - Struts 表单使用 ajax 序列化并发布到 servlet

> ID：15530826
> 
> 赞同：1
> 
> 时间：2013-03-20T17:38:05.203
> 
> 标签：jquery, ajax, servlets, struts

我有一个由struts 表单bean 支持的jsp 页面。我需要通过ajax 将表单数据发送到servlet。我在通过 ajax 发送表单时使用 form.serialize。但是当表单数据进入 servlet 时，我无法对任何表单字段执行 request.getParameter。

以下是代码片段：

# JSP 中的 JavaScript

```
function getValue()
{
    var frm = $('form[name="myForm"]');

    alert(frm.serialize())   ;  //shows all values as a nice query string as          action=Register&flow=false&fname=john&  .........

     $.post("myServlet", {data: frm.serialize()},function(response){
        alert(response);
    });

} 
```

# JSP 中的表单

```
<html:form name="myForm"  method="post" action="/myAction.to" type="com.xyz.myForm">
.
.
.
<div class="buttonCenter">
<a href="javascript:getValue()"> 
Continue 
</a> 
</div>
.
.
.
</html:form> 
```

# 这是 Servlet 方法

```
 public void doPost(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException {

         logger.info(req.getParameter("fname"));  //Shows null

    //some other code
    } 
```

有什么我在这里想念的吗？我真的坚持这一点，任何反馈都将受到高度赞赏。

# javascript - 将 JSON 编码的提要值的图像 src 协议 http: 替换为 https:

> ID：15530830
> 
> 赞同：1
> 
> 时间：2013-03-20T17:38:06.320
> 
> 标签：javascript, jquery, image, rss, feed

我有一个关于 https 协议的站点，它通过 ajax JSONP 使用 google load feed API 的 wordpress rss feed，然后通过返回的 json 对象迭代以注入内容

问题是内容节点具有我想要包含的 html，例如海报插入的图像：

```
 "Title":"post title",
  "Content":"<p><img src='http://theothersite.com'/> this is an example post</p>" 
```

当我使用 each() 遍历 json 时，会附加内容 html，并向浏览器抛出不安全的内容警告，因为图像 src 是 http 协议

```
 $.each(json.responseData.feed.entries, function(arrayID, News) {
 for(var i = 0; i < News.categories.length; i++)
 {
  html = '<li class="post news"><h3><a target="_blank" href="'+News.link+'">'+News.title+'</a></h3>';
  // HERES WHERE ATTENTION NEEDED
  html +='<div class="excerpt">'+News.content+'</div></li><hr>';

 $("#newsList ul").append(html); 
```

我不知道如何解析节点内容的 src 值，并将任何 src 替换为具有 https 作为协议的新 src，同时保留所有其他字符串数据

我已经尝试过匹配，它可以很好地将 src 放入变量中，但是它没有占用字符串的其余部分，所以当我替换它时没有保留内容

```
 var iMatches = News.content.match(/src=\"(.+?)\"/igm);  //alert(iMatches);
  if (iMatches) { 
    News.content.replace(/src=\"http:(.+?)\"/igm, /src=\"https:(.+?)\"/igm);} 
```

我也尝试替换为 replace('http:', 'https:') 但这也不起作用

一如既往，任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T18:32:11.880

该`String.replace`方法不会更改原始字符串，而是返回一个新字符串。考虑到这一点，您需要使用：

```
News.content = News.content.replace(...); 
```

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)

# ember.js - emberjs 无法使用 emberjs-1.0.0-rc.1 和 ember-data revision-11 保存或创建新记录

> ID：15530831
> 
> 赞同：0
> 
> 时间：2013-03-20T17:38:07.227
> 
> 标签：ember.js, ember-data

我正在尝试使用 emberjs 创建一个简单的博客应用程序。为帖子创建标题和正文的功能可以正常工作，如**[jsfiddle 所示](http://jsfiddle.net/CD9ck/)**。

现在我想添加下一个功能，即评论，当您单击单个帖子时应显示该功能。在主页上，点击发布，然后点击个人的标题，应该会显示一个评论框以添加评论。

**单击保存按钮时出现以下错误**

**在使用 ember-data 和其余适配器的本地开发环境中**，出现错误：

```
uncaught TypeError: Cannot call method 'commit' of undefined 
```

**在使用具有相同代码的夹具适配器**的 JSfiddle 中，错误变为

```
TypeError: this.transaction is undefined this.transaction.commit(); 
```

帖子/show.handlebars

```
 <script type="text/x-handlebars" data-template-name="posts/show">
      <h1>Post</h1>
      <p>Your content here.</p>
       <h3> {{title}} </h3>
       <h3> {{body}} </h3>
     </br>
    <p> {{#linkTo 'posts.index'}} back {{/linkTo}}</p>
    <p> {{#linkTo 'posts.edit' content}} Edit the post  {{/linkTo}}</p> 
    <br/>
     <p> Add Comments</p>
      {{render 'comment/new' comments}}
   </script> 
```

评论/new.handlebars

```
 <form {{action save on='submit'}}>
   {{view Ember.TextArea valueBinding='body' placeholder='body'}}
   <button type="submit"> Add comment </button>
 </form>

  EmBlog.CommentNewController = Em.ObjectController.extend({
     needs: ['posts'],
     addComment: function(){
       post = this.get('controllers.postsShow').get('model');
       comment = post.get('comments')
       this.transaction = comment.get('store').transaction.createRecord({body: body});
     },

     save: function(){
       this.transaction.commit();
     }  
   });

 EmBlog.Comment = DS.Model.extend({
   body: DS.attr('string'),
   post_id: DS.attr('integer')'
   post:  DS.belongsTo('EmBlog.Post')
 }); 
```

关于如何解决这个问题的任何建议，每次我创建评论时都会包含 post_id。

```
 **Update** 
```

这是**[最新的要点](http://jsfiddle.net/CD9ck/4/)**，当我保存评论但评论没有出现在页面上时，它不会显示任何错误。似乎他们被默默地忽略了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:43:37.890

`DS.Store#transaction`是一个函数，而不是一个属性。它返回一个`DS.Transaction`... 但是，您正在`createRecord`立即调用它，因此您实际上将该调用的结果（一条记录）存储在您的事务属性中。此外，`createRecord`on a`DS.Transaction`需要一个类型作为第一个参数。

因为这是一个 ObjectController，所以我们必须在类定义中定义我们的内部属性，否则它们会传递给内容。

```
EmBlog.CommentNewController = Em.ObjectController.extend({
    transaction: null, 
```

然后在您的实际代码中：

```
var transaction = post.get('store').transaction();
if (transaction) {
    this.set('transaction', transaction);
    transaction.createRecord(EmBlog.Comment, {body: body});
} else { console.log('store.transaction() returned null'); } 
```

然后稍后：

```
this.get('transaction').commit(); 
```

请注意，评论不会自动限定为`Post`，因此请确保设置您的关系。

# javascript - 在其他 css 属性中删除单个 css 属性

> ID：15530834
> 
> 赞同：1
> 
> 时间：2013-03-20T17:38:08.757
> 
> 标签：javascript, jquery, css

如何在 jQuery 中的元素的许多其他 css 属性中删除单个 css 属性？

我目前正在做这样的事情来完全删除高度属性

```
$('style').css({'height' : ''}); 
```

上面的代码不起作用？有没有其他方法可以完全删除 height 属性？而不是将其设置为 0 或其他东西！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T17:40:34.893

你可能想错了。要在 CSS 中取消设置特定的高度声明，请使用“height: auto;” - 所以我认为你只是想做`.css({'height': 'auto'});`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T17:41:35.093

'height':' ' 如果您已经使用 JS 设置了高度，则将起作用。如果您还没有使用过 JS，则需要使用样式默认选项（如自动或继承）来增强 css 的能力。

“高度”：“自动”

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-20T17:42:28.173

这是应该如何指定的

```
$('style').css('height' , ''); 
```

两个参数，而不是单个对象。试试看。

# php - 我想在产品的 url 中传递一个唯一变量，即数据库中的产品代码或产品 ID

> ID：15530836
> 
> 赞同：-5
> 
> 时间：2013-03-20T17:38:20.033
> 
> 标签：php

我想在产品的 url 中传递一个唯一变量，即数据库中的产品代码或产品 ID，并且每个产品将在 php 中动态拥有自己的链接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:56:20.427

您可以使用获取变量

像：

```
sitename.com/index.php?id=1234 
```

在 index.php 中类似：

```
<?php
    $DBuser = "XXX";
    $DBpassword = "XXX";
    $DBhost = "localhost"; 
    $DBname = "XXX";

    $mysqli = new mysqli($DBhost, $DBuser, $DBpassword, $DBname);
    if ($mysqli->connect_errno) {
        printf("Connect failed: %s\n", $mysqli->connect_error);
        exit();
    }

    if ($result=$mysqli->multi_query("SELECT * FROM productos WHERE id='".$_GET['id']."' LIMIT 1")) {
        $data = mysqli_fetch_assoc($result)
        print_r($data);
    } else
        echo "Error, id not found";

?> 
```

# c++ - C++ OO设计：模板参数的继承

> ID：15530839
> 
> 赞同：14
> 
> 时间：2013-03-20T17:38:28.173
> 
> 标签：c++, oop, templates, inheritance

我有一个继承链，Base 是基类。我希望能够编写一个继承 Base 和可能的另一个 Base 派生类的类模板。我可以使用虚拟继承，但我找到了另一种解决方案。我想知道它是否是常见的/可观的/合法的类设计：

编写一个类模板，其中模板参数是它派生的类，即它必须是 Base 或 Base 派生类。在构造函数中，我可以使用静态断言来真正确保用户没有使用任何非法类作为模板参数。

如果它有效，我将永远不会有虚拟继承问题......问题是，它可以这样做。我在其他项目中从未见过它，所以我想在使用它之前先确定一下。

**编辑**：为了确保我不会混淆你，这里有一些代码：

```
class Base
{
};

class Derived : public Base
{
};

template <Class TheBase>
class MyDerived : public TheBase
{
}; 
```

现在我可以使用`Base`或任何`Base`派生类，例如`Derived`，作为`TheBase`参数。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-01-29T07:31:27.953

这是一个有效的设计模式。它是 mixin 继承，而不是 CRTP。Mixin 继承提供了一种通过程序员手动线性化继承层次结构来安全地模拟多重继承的方法。模板化的类是 mixins。如果你想用多个 mixin 扩展一个类，你必须决定组合的顺序，比如`Big<Friendly<Dog> >`. [这篇Dobb 博士的文章](http://www.drdobbs.com/cpp/mixin-based-programming-in-c/184404445)中描述了 C++ 中的 Mixin 编程。Mixin 可用于实现 GoF 装饰器模式的静态版本，如此处[所述](http://www.reenigne.org/blog/mixins-in-cpp/)。Mixin 在 C++ 中扮演的角色与 Scala 和 SmallTalk 中的特征（不是 C++ 特征）类似。

在[CRTP](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern#General_form)中，它是作为模板的基类：

```
template <class Param>
class Base { ... };

class Derived : public Base<Derived> { ... }; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-20T17:44:32.350

稍后编辑：一年后，我在这里修改自己的答案。我最初错误地指出，OP 发布的模式是 CRTP。这是不正确的。它确实是一个 mixin，请阅读页面下方 Daniel Mahler 的答案以获得正确的解释。

原文：用这样的设计是可以的。[WTL](http://wtl.sourceforge.net/)以它为例。它用于实现[静态多态性](http://en.wikipedia.org/wiki/Template_metaprogramming#Static_polymorphism)，被称为[Curiously recurring template pattern](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-20T17:47:58.313

这很好，正如 Zadirion 指出的那样。它起作用（简化）的原因是 C++ 中的模板与 C# 中的泛型不同，是编译时的。说“这是一个 typedef”是我的疏忽，我会为此受到很多批评，但让我们保持简单，说它是。

考虑：

```
class base {
protected:
    base() { };
    virtual ~base() { };
};

template<class T>
class super : public T {
}; 
```

然后：

```
super<base> s; 
```

绝对没问题。这实际上是一个相当漂亮的结构。因为是编译时，你可以*选择你的基类*，这在某些设计习惯中可能是非常有利的。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-20T17:47:35.053

这是一个很好的座右铭：**对类型使用模板，但对行为使用继承。**

坚持下去。当然，您可能会使用很多捷径/技巧来完成工作，但从长远来看，这些糟糕的设计选择会让人头疼。如果您想使用此类，请务必研究其优点和缺点。

现在，回到您的问题，您所问的可以做到：请参阅[CRTP](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)和[Static polymorphism](http://en.wikipedia.org/wiki/Template_metaprogramming#Static_polymorphism)。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-03-20T17:46:22.847

听起来您在谈论[Curiously Recurring Template Pattern](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)，它是有效的 C++。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-01-30T23:46:02.323

您要做的是从两个可能具有共同基类的类继承，对吗？在这种情况下，您应该处理虚拟继承问题（即，您必须将您感兴趣的两个类的基类继承声明为*虚拟）。*由于一些运行时支持（更多 2 个 vpointer），这只会导致很小（可能微不足道）的开销。

您的代码不是 CRTP（在 CRTP 中，基类是接收派生类的模板），并且似乎没有以任何方式解决您试图摆脱的双重继承问题。

据我所知，您可以接受虚拟继承并使用*虚拟*关键字以最小的开销产生，或者您可以重构您的代码。

我不完全理解您要做什么，但是如果您尝试从具有公共基类的两个不同类继承（虚拟继承就是这样）并且由于某种原因您不想使用*virtual*关键字，那么您可以按以下方式使用 CRTP：

```
#include <iostream>
using namespace std;

template<class Derived>
class Base
{
public:
    void basefunc() { cout << "base here"<< endl; }
    virtual void polyfunc() { cout << "base poly here"<< endl; }
};

class Derived : public Base<Derived>
{
public:
    void derivedfunc() { cout << "derived here"<< endl; }
    virtual void polyfunc() { cout << "derived poly here"<< endl; }
};

class OtherDerived : public Base<OtherDerived>
{
public:
    void otherderivedfunc() { cout << "otherderived here"<< endl; }
    virtual void polyfunc() { cout << "otherderived poly here"<< endl; }
};

class InheritingFromBoth : public Derived, public OtherDerived
{
public:
    void inheritingfunc() { cout << "inheritingfromboth here" << endl; }
    virtual void polyfunc() { cout << "inheritingfromboth poly here"<< endl; }  
};

int main() {

    Derived obj;
    OtherDerived obj2;

    InheritingFromBoth *obj3 = new InheritingFromBoth();
    Derived *der = dynamic_cast<Derived*>(obj3);
    der->polyfunc();
    OtherDerived *der2 = dynamic_cast<OtherDerived*>(obj3);
    der2->polyfunc();

    Base<Derived>* bptr = dynamic_cast<Base<Derived>*>(obj3);
    bptr->polyfunc();
    Base<OtherDerived>* bptr2 = dynamic_cast<Base<OtherDerived>*>(obj3);
    bptr2->polyfunc();

    return 0;
} 
```

通过创建基类的两个不同实例，您将避免继承歧义。

如果您打算同时从基类和基派生类继承，一个更简单、或许更清洁、更好的解决方案如下：

*   从类 Base**和**从 Base 派生类继承让我认为您希望能够同时访问 Base 方法和 Base 派生方法..

如果您在类设计中注意潜在*的名称隐藏* [问题](http://www.programmerinterview.com/index.php/c-cplusplus/c-name-hiding/)，并且只是使用多态性来“定制”您真正想要不同的函数的行为（并且可以进行强制转换控制），那么`Base -> Derived -> YourClass`最终可以解决一个干净的层次结构你的问题。

在您的特定情况下，您的方法有效，正如其他人在许多应用程序中使用的那样，但我认为不能有效地解决您的双重继承问题。最终，只有特定的设计案例才能导致*邪恶程度较低的*解决方案。

# javascript - 在 Chrome 中显示本机日期选择器的方法

> ID：15530850
> 
> 赞同：44
> 
> 时间：2013-03-20T17:38:57.417
> 
> 标签：javascript, html

`<input type="date">`当浏览器不支持该字段时，我使用优雅地回退到 jQuery 的字段。最近，Chrome 开始提供原生日期选择器，这很棒。但我发现许多用户错过了调出日历的小箭头，因此错过了一个简单的日历选择日期这一事实。

![Chrome 原生日期选择器](../Images/bf3b2967f0cb23913ecdc0576a51146a.png)

为了使这更直观，如果我可以在用户将焦点移至输入或单击另一个元素（如小日历图标）时调出本机日期选择器 UI，那就太好了。

有没有一种方法可以在 Chrome 中使用来触发 datepicker UI？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2017-08-02T13:05:32.307

这是一种在用户单击字段本身时触发日期选择器的方法，因为计算机文盲用户不知道应该单击哪里：

```
input[type="date"] {
    position: relative;
}

/* create a new arrow, because we are going to mess up the native one
see "List of symbols" below if you want another, you could also try to add a font-awesome icon.. */
input[type="date"]:after {
    content: "\25BC"; 
    color: #555;
    padding: 0 5px;
}

/* change color of symbol on hover */
input[type="date"]:hover:after {
    color: #bf1400;
}

/* make the native arrow invisible and stretch it over the whole field so you can click anywhere in the input field to trigger the native datepicker*/
input[type="date"]::-webkit-calendar-picker-indicator {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: auto;
    height: auto;
    color: transparent;
    background: transparent;
}

/* adjust increase/decrease button */
input[type="date"]::-webkit-inner-spin-button {
    z-index: 1;
}

 /* adjust clear button */
 input[type="date"]::-webkit-clear-button {
     z-index: 1;
 }
```

```
<input type="date">
```

链接：

*   [符号列表](https://www.w3schools.com/charsets/ref_utf_geometric.asp)
*   [带有 font-awesome 图标的 codepen 示例](https://codepen.io/andyftp/pen/EQoKxq)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-03-20T18:33:59.003

我不认为您可以触发本机日历控件显示，但您可以将其突出显示多一点：

```
input[type="date"]:hover::-webkit-calendar-picker-indicator {
  color: red;
}
input[type="date"]:hover:after {
  content: " Date Picker ";
  color: #555;
  padding-right: 5px;
}
input[type="date"]::-webkit-inner-spin-button {
  /* display: none; <- Crashes Chrome on hover */
  -webkit-appearance: none;
  margin: 0;
}
```

```
<input type="date" />
```

您可以按原样*阻止*它显示，例如，从文档中显示：

> 您可以通过以下代码禁用本机日历选择器：

```
<style>
::-webkit-calendar-picker-indicator {
    display: none;
}
</style>
<input type=date id=dateInput>
<script>
dateInput.addEventListener('keydown', function(event) {
    if (event.keyIdentifier == "Down") {
        event.preventDefault()
    }
}, false);
</script> 
```

这是来自 Webkit 的文档，其中我得到了上述内容：

[http://trac.webkit.org/wiki/Styling%20Form%20Controls](http://trac.webkit.org/wiki/Styling%20Form%20Controls)

也许可以扭转并使其显示日期选择器，但问问自己是否希望每次在页面上漫游鼠标时每个日历控件都飞出？

这个答案也很有帮助：

[https://stackoverflow.com/a/15107073/451969](https://stackoverflow.com/a/15107073/451969)

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2018-11-26T14:59:58.833

**编辑 2020：** chrome 似乎发生了变化，以前的答案不再起作用。

我做了一个 hacky 解决方法，您可以根据自己的需要进行调整。

这种新方法增加了日历图标的大小以溢出它的**输入**容器以完全覆盖它。您可以通过调整以下参数来调整位置和大小：

```
 top: -150%;
  left: -150%;
  width: 300%;
  height: 300%; 
```

越大越稳定。但仍然是黑客之上的黑客

* * *

# 2020 年 7 月更新 - 适用于新 Chrome 的日历选择器

```
label {
  display: inline-block;
  position: relative;
  line-height: 0;
}
input {
  position: absolute;
  opacity: 0;
  width: 100%;
  height: 100%;
  border: 0;
  overflow: hidden;
  cursor: pointer;
}
input::-webkit-calendar-picker-indicator {
  position: absolute;
  top: -150%;
  left: -150%;
  width: 300%;
  height: 300%;
  cursor: pointer;
}
input:hover + button {
  background-color: silver;
}
```

```
<label>
  <input type="date">
  <button id="calendar_text">Search Date </button>
</label>
```

There's still an issue in Firefox, when a date is selected and you click near the right border, the input will clear, because the input's clear button is right there.

* * *

我[对 cinatic 的解决方案](https://stackoverflow.com/a/31413985/3163120)进行了调整，使其可以在 Chrome 上运行，并根据 2020 年 Chrome 的最新变化调整了[Andy 的技巧](https://stackoverflow.com/a/45461709/3163120)

[安迪的技巧](https://stackoverflow.com/a/45461709/3163120)：通过输入扩展 Chrome 的日期选择器的箭头

[cinatic 的解决方案](https://stackoverflow.com/a/31413985/3163120)：将输入隐藏在另一个元素的顶部

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2015-06-17T14:54:20.603

诀窍是在输入元素上触发`F4`KeyboardEvent：

```
function openPicker(inputDateElem) {
    var ev = document.createEvent('KeyboardEvent');
    ev.initKeyboardEvent('keydown', true, true, document.defaultView, 'F4', 0);
    inputDateElem.dispatchEvent(ev);
}

var cal = document.querySelector('#cal');
cal.focus();
openPicker(cal); 
```

这是jsfiddle：http: [//jsfiddle.net/v2d0vzrr/](http://jsfiddle.net/v2d0vzrr/)

顺便说一句，chrome 中有一个有趣的错误。如果您在单独的选项卡中打开 jsfiddle，日历弹出窗口将显示在当前选项卡上。已经[报道](https://code.google.com/p/chromium/issues/detail?id=501357)了。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2020-12-04T06:08:11.947

参考[Andy 的回答](https://stackoverflow.com/questions/15530850/method-to-show-native-datepicker-in-chrome#answer-45461709)，我将整个区域设为可点击并移除了日历图标。

Andy 片段中的结果在左侧有一个不可点击的小区域。（铬 87.0.4280.66）

```
input.picker[type="date"] {
  position: relative;
}

input.picker[type="date"]::-webkit-calendar-picker-indicator {
  position: absolute;
  top: 0;
  right: 0;
  width: 100%;
  height: 100%;
  padding: 0;
  color: transparent;
  background: transparent;
}
```

```
<input class="picker" type="date">
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-03-08T15:59:19.010

对于桌面（和移动），将输入放置在具有相对定位和图标的 div 中，输入样式如下：

```
input {
  position: absolute;
  opacity: 0;

  &::-webkit-calendar-picker-indicator {
    position: absolute;
    width: 100%;
  }
} 
```

这会将选取器指示器拉伸到完整的父 div 上，以便在您点击父 div 的图标和/或文本时始终显示日期控件。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-07-14T18:00:18.760

我认为人们经常希望使用另一个图标或元素来打开本机日期选择器框。

我发现带有“click() & .focus()”的 javascript 解决方案仅**适用**于 webkit 和其他一些桌面浏览器，但**不幸的是不适用于 FireFox**。

但是可以通过另一种方式，通过将 inputField 覆盖在图标元素（或您想要使用的任何内容）上，并通过不透明度 0 使其无敌。

这在**移动设备上****非常有用**，对于桌面设备，我建议您将 onclick 事件添加为后备 "$('.dateInpuBox').click().focus()"

 **```
 .myBeautifulIcon {
      position: relative;
      width: 50px;
    }
    .dateInputBox {
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      opacity: 0;
    }
```

```
<div class="myBeautifulIcon">
  ICON
  <input class="dateInputBox" type="date" />
</div>
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-09-30T16:24:00.497

2021 年 Firefox / Chrome 更新[Madacol](https://stackoverflow.com/a/53483852/646056)回复。

受到其他回复的启发，当您单击按钮右侧（重置输入）时，我进一步推动了[Madacol 的解决方案](https://stackoverflow.com/a/53483852/646056)，以消除 Firefox 下的不良行为。这里是。

```
.datepicker{
  display: inline-flex;
  position: relative;
  overflow: clip;
}
.datepicker:focus-within {
    outline: black auto 2px;
}
.datepicker > input[type=date] {
  position: absolute;
  top: 0;
  left: 0;
  width: 300%;
  height: 100%;
  opacity: 0;
    cursor:pointer;
}
.datepicker > input[type=date]::-webkit-calendar-picker-indicator {
  position: absolute;
  top: -150%;
  left: -150%;
  width: 300%;
  height: 300%;
  cursor: pointer;
}
```

```
<!-- Tested on 2021-09 under latest chrome and firefox -->
<label class="datepicker">

  <input type="date" value="2021-09-30" />  
</label>
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2022-01-04T11:33:32.573

Chrome 99 应该通过添加一个`showPicker()`方法来解决这个问题。从 Chrome 97（发布日期 2021-01-04）开始，它也可用于开发测试（即在功能标志后面）。

[https://chromestatus.com/feature/5692248021794816](https://chromestatus.com/feature/5692248021794816)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-09-22T00:55:32.280

您可以创建另一个本机触发浏览器日期选择器的标签。在火狐上测试：

```
<input type="date" id="started[date]" name="started[date]">
<label class="btn btn-info btn-date" type="button" for="started[time]">
    <i class="far fa-calendar-alt"></i>
</label> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-12-24T10:11:49.073

我只想为任何寻求更简单、更快的解决方案的人添加我的答案。`.onfocus`我只在输入中使用两个事件`.onblur`

```
<input type="text" name="date_picked" onfocus="(this.type='date')" onblur="(this.type='text')"> 
```

据我所知，适用于所有浏览器。**

# vim - 为什么组合重映射 到 使用 startinsert 启动 vim 时导致自动插入奇怪的字符？

> ID：15530851
> 
> 赞同：0
> 
> 时间：2013-03-20T17:38:58.573
> 
> 标签：vim

这是我的.vimrc：

```
inoremap <esc> <nop> 
```

当我开始使用 vim 时`vim +startinsert`，我得到一个缓冲区，其中自动插入了以下奇怪的字符（并且，是的，我处于插入模式，光标位于 'c' 之后）：

```
[?1;2c 
```

关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T05:42:27.930

`t_RV`设置选项时，*VIM*使用它来向终端询问自身。*终端通常会回复一个以 Esc 开头的序列，而您的插入映射会干扰这个响应序列：最初的 Esc 是“吃掉的”，其余的被Vim*视为正常的用户输入。

您是否将*rxvt*用于终端仿真器？*您的输出与Vim*源代码指示*rxvt*发送以响应 xterm-default`t_RV`查询（即使在 时，Vim 也使用该查询）的序列相匹配`TERM=rxvt`。

您可以清除`t_RV`（例如在您的 中`~/.vimrc`）以避免此特定问题。

```
set t_RV= 
```

* * *

但是，您对 Esc 的（取消）映射可能会使使用任何非 ASCII 键变得特别困难：几乎所有其他键（箭头、Home、End、Page Up/Down、F1–F12 等）都发送以 Esc 开头的序列. 你的映射可能会干扰*Vim*识别这些键发送的序列。

你可能对*Vim*的“简单模式”( `vim -y`) 感兴趣；它会自动以插入模式启动并添加映射和其他设置，使*Vim*模式像“单击并键入”编辑器。查看`:help -y`and `:help evim-keys`（如果您卡在插入模式，您可能需要先输入 Co）。如果您打算避免使用*Vim*的模式，您可能只是想研究一种不同风格的编辑器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T19:19:13.033

我不能说为什么要插入这些字符，但`<Esc>`它是*所有*或几乎所有序列的第一个字符，用于将除了用户输入从终端 [emulator] 传输到 vim 之外的任何数据。Escape 开始用于讲述鼠标点击的序列，`F1`...<code>F12 按键，有时`<Del>`或`<BS>`（高度依赖于终端，通常终端为此输出其他内容），箭头键，`<PageUp>`/ `<PageDown>`，有关大小变化的信息，...。一些数据作为常规用户输入处理（注意：在**任何**情况下，终端都将使用它用来传递输入的相同流，只是在处理此输入的 C 代码中的层有所不同）。当它是并且您重新映射逃逸时，您会看到这些奇怪的字符。

请注意，如果您尝试设置始终处于插入模式的 vim 配置，则需要`&insertmode`设置，而不是`:startinsert`. 但是如果你忘记 vim 会更好，如果你不希望普通模式成为默认模式，你就不需要 vim。

# c# - CompareTo 方法不起作用，它不会从 Album 类中获取 AlbumName - 我认为是 IComparable 问题

> ID：15530854
> 
> 赞同：1
> 
> 时间：2013-03-20T17:39:08.810
> 
> 标签：c#, error-handling, icomparable

我试图让我的 CompareTo 方法从 Artist 类中工作，但是它不会从 Album 类中获取 AlbumName 。我很确定这是专辑类上的 IComparable 的问题。请帮助提供代码特定的答案，谢谢。

错误 1“Assignment.Album”未实现接口成员“System.IComparable.CompareTo(object)”

专辑类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Assignment
{
    class Album : IComparable
    {
        public string albumName;

        public Album(string albumName)//constructors
        {
            this.albumName = albumName;

        }

        public string AlbumName
        {
            get { return albumName; }
            set { albumName = AlbumName; }
        }
    }
} 
```

艺人类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
namespace Assignment
{
    public class Artist : IComparable
    {
        private String name;
        int members = 4;//default number of members
        //string albumName;

        LinkedList<Artist> albums = new LinkedList<Artist>();

        public override string ToString()//to make my own toString method
        {
            return ("Name: " + name + "Number of Members: " + members);
        }

        public Artist(string name, int members)//constructors
        {
            this.name = name;
            this.members = members;
        }

        public string Name
        {
            get { return name; }
            set { name = Name; }
        }

        public int Members
        {
            get { return members; }
            set { members = value; }
        }

        public int CompareTo(object obj)
        {
            if (obj is Artist) //compare by name
            {
                Artist other = (Artist)obj;
                return name.CompareTo(other.name);//artist name
            }
            if (obj is string) //compare against list of album titles
            {
                string other = obj.ToString();

                    if (obj.Equals(name.AlbumName))
                        return 0;

                return -1;
            }
            else
                return -999;  //indicates can’t make a comparison    
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:42:31.680

您发布的错误消息说您的 Album 类中没有 Compare(object) 方法。您的代码证实了这一点。所以……加一个！

编辑

好的，让我们分解一下。你显然学到了很多东西，并尝试了很多新东西。那太棒了。对你的目标和工具有一个扎实的想法很有帮助，所以让我们来谈谈这些。

根据您的评论，很明显您打算`IComparable`用于订购和保证表单的唯一性。通常`IComparable`不用于唯一性，但您有“业务需求”来使用它，所以......

让我们谈谈手头的工具。我想你只需要明白什么`IComparable`意思。这意味着实现它的类具有自然顺序，例如列表中的数字或（咳咳）名称。具体来说，它保证了三个非异常结果：

1.  `this`是“小于”参数：返回一些小于 0 的数字
2.  `this`是“大于”参数：返回大于 0 的数字
3.  `this`与参数的顺序相同：返回 0。

而已。

使用接口的东西往往是对项目进行排序的集合。他们用这个数字来指导他们的分类。他们唯一关心的是这个数字是小于、大于还是等于零。返回编号不代表任何其他内容，因此`-999`您返回并不会告诉任何人任何有用的信息。如果您真正拥有的任何东西都无法比较，那么正确的做法是抛出异常。

所以希望你对如何使用有所了解`IComparable`，让我们谈谈它通常是如何实现的。

你听说过泛型吗？它是 .NET 的一项基本功能，它将根据类型指导代码的编译和执行。如果一个接口是通用的，这意味着你可以实现多次，每次指定不同的类型。有一个通用版本`IComparable`: `System.IComparable<T>`。如果你的类需要比较字符串，它应该实现和你有什么`IComparable<string>`一样好`IComparable<Artist>`。如果这样做，您的课程将如下所示：

```
public class Artist : IComparable<string>, IComparable<Artist>
{
    // your code here

    public int Compare(string name)
    {
        // your code here
    }

    public int Compare(Artist artist)
    {
        // your code here
    }
} 
```

如果您正在使用需要非通用`IComparable`接口的旧技术（如 Windows 窗体），您也可以实现它，如下所示：

```
public int Compare(object obj)
{
    if (obj == null) return -1; // maybe you want to throw an exception instead?
    if (obj is string) return Compare((string) obj);
    if (obj is Artist) return Compare((Artist) obj);

    throw new ArgumentException("wtf, unexpected type");
} 
```

最后，为什么你的艺术家名单是专辑类的？想想需要在哪里检查唯一性。当用户*输入表单*时会发生这种情况，对吗？你不认为列表也属于那里吗？

# ios - 以编程方式获取 iPad 设备信息

> ID：15530855
> 
> 赞同：1
> 
> 时间：2013-03-20T17:39:10.433
> 
> 标签：ios, objective-c, ipad, ios6

有没有办法使用公共框架或 API 来获取有关特定 iPad 设备的信息，即“设置”应用程序的“常规”选项卡的“关于”下列出的信息？我知道我可以使用 UIDevice 类来获取 UDID（现在在 iOS 5.0 中已弃用）和设备名称。我想知道我是否可以提取更多信息。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:45:31.627

[你可以从UIDevice](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIDevice_Class/Reference/UIDevice.html)类中获得很多关于设备的信息：

*   姓名
*   项目清单
*   系统名称
*   系统版本
*   模型
*   本地化模型
*   用户界面成语
*   供应商标识符
*   方向
*   电池电量
*   电池状态

我建议您阅读[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIDevice_Class/Reference/UIDevice.html)以查看您可以检索的所有信息。

您还应该查看 erica 的这个扩展：[https ://github.com/erica/uidevice-extension](https://github.com/erica/uidevice-extension)

希望能帮助到你！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T17:55:37.607

这是我用来确定设备的东西：

```
#import <sys/utsname.h> 
```

然后检查设备：

```
struct utsname systemInfo;
uname(&systemInfo);
NSString *modelName = [NSString stringWithCString:systemInfo.machine encoding:NSUTF8StringEncoding];

if ([modelName isEqualToString:@"iPhone4,1"]) {
    // act accordingly
} 
```

[请参阅http://theiphonewiki.com/wiki/Models](http://theiphonewiki.com/wiki/Models)上的“标识符”列以查看可能的设备。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T17:44:19.637

有许多有用的类别使用公共、半私有和私有 API（主要是 IOKit），您可以（或不能，需要上下文）使用它们。请参阅[此 GitHub 存储库](https://github.com/erica/uidevice-extension)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T18:24:43.393

您可以使用 sysctl 系统库的东西，我记得无法提取[sysctl 手册页](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man3/sysctl.3.html)中记录的所有信息，但我记得能够提取相当多的信息

让我知道是否需要清理

# solr - solr 如何检查调用了哪个查询解析器？

> ID：15530859
> 
> 赞同：0
> 
> 时间：2013-03-20T17:39:21.133
> 
> 标签：solr

我想知道是否有办法检查/调试在 Solr 中调用了哪个查询解析器？我添加了一个自定义查询解析器，同时我想使用“edismax”排名。我最终使用“qt”参数来选择“edismax”排名，并使用“defType”参数来选择查询解析器，但它看起来不像我期望的那样。似乎我的自定义查询解析器根本没有被调用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T17:53:56.383

您可以[`debugQuery=true`](http://wiki.apache.org/solr/CommonQueryParameters#debugQuery)在查询字符串中添加 a 以查看 solr 如何计算分数和所有内容。它还应该具有用于​​计算分数的不同处理程序。

# google-profiles-api - Google Profile API 用户模型（

> ID：15530861
> 
> 赞同：0
> 
> 时间：2013-03-20T17:39:26.327
> 
> 标签：google-profiles-api

我正在尝试创建一个基于 AS3 的配置客户端，没有 php。现在我正在创建用户管理部分，由此我从我们的域接收所有用户信息，这是成功的，但我现在坚持为谷歌用户构建客户端模型，为此我需要所有属性，可以由谷歌提供。为此，有人可以给我一个链接，我可以检查从[https://www.google.com/m8/feeds/profiles/domain/](https://www.google.com/m8/feeds/profiles/domain/) {domain}/full/{user}收到的用户的数据模型地址？与此类似：[https ://developers.google.com/+/api/latest/people](https://developers.google.com/+/api/latest/people) 我相信我尽一切努力寻找，也许答案很明显，但我找不到任何解决方案（除了逐个处理原子提要，并根据该属性创建对象，但这也不是足够了，因为如果没有填写信息，它就不会存在于提要中）

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T04:55:11.350

[来自提要https://www.google.com/m8/feeds/profiles/domain/](https://www.google.com/m8/feeds/profiles/domain/) {domain}/full/{user}的 Google Apps 用户配置文件的数据模型从[Profiles API 页面](https://developers.google.com/google-apps/profiles/)开始记录，然后您将需要访问[Contact kind](https://developers.google.com/gdata/docs/2.0/elements#gdContactKind)和[Profile kind](https://developers.google.com/gdata/docs/2.0/elements#gdProfileKind)的核心 Contacts 参考信息。

# mysql - Drupal 数据库结构 - 高效/低效？

> ID：15530862
> 
> 赞同：2
> 
> 时间：2013-03-20T17:39:26.397
> 
> 标签：mysql, data-structures, database-design, drupal, database-normalization

我当然不是 Drupal 专家，但我之前已经计划和构建了一些数据库，所以我对第 3 方团队正在研究的数据库结构感到困惑，我让 Sequel Pro'd 进入以添加一些虚拟内容。我认为如果使用 Drupal 的后端 GUI，结构不会很明显，但我没有凭据，只有 ftp 和 ssh 访问权限。

我有点惊恐地看到不是我所期望的单个表，比如一个组织，其中包含 ID、名称、地址、电子邮件、邮政编码等列。

相反，每一位数据都有一个表格。也就是说，对于名称、地址、电子邮件、邮政编码等，有一个单独的表。

从逻辑的角度来看，这似乎是非常低效的。例如，当一个组织页面加载时，为该组织加载的每一位数据都从不同的表中调用并聚合，而不是通过调用单个表的方式，并且从一行中提取所有数据。

我是一无所知（是的，但是......）还是这是 Drupal 独有的一些数据库结构特性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:43:58.203

是的。Drupal 将字段内容存储在单独的表中，以便最大限度地灵活（例如，如果您想稍后在“组织”之外的其他内容类型上重用这些字段），它已经在多连接表中。权衡是性能，Drupal 通过缓存等来弥补（例如，当加载该组织节点时，它会缓存它，以便在该页面请求中再次加载它时不需要再次从这些表中读取，例如例子）。由于它是一个功能强大的 CMS，可让您构建、重新构建和重新组织您存储内容和字段的方式，它可以更灵活地存储数据。

# java - Java 回溯与硬币

> ID：15530863
> 
> 赞同：1
> 
> 时间：2013-03-20T17:39:27.787
> 
> 标签：java, backtracking

下午好，

我目前正在开发一个程序，该程序应该使用回溯算法来找到达到一定数量所需的硬币总数的解决方案。

程序的基本布局是这样的

```
User is prompted for an amount (ie. 123)
 int amount = input.nextInt();

User is prompted for number of coins (ie. 6)
 int numCoins = input.nextInt();

User is prompted for coin values (ie. 2, 4, 32, 51, 82)
 int[] array = new array[] {2, 4, 32, 51, 82}; 
```

根据这些信息，我将开发一种回溯算法来输出解决方案。
我试图查找回溯信息无济于事。对我来说，这一切似乎都不清楚我应该从算法开始的地方。

任何帮助表示赞赏。

编辑

这是我目前一直在做的事情......目前无法正常工作

```
public class coins
{

public static int[] coinValues;
public static int currentAmount = 0;

public static void main(String[] args)
{
    ArrayList<Integer> temp = new ArrayList<>();
    Scanner input = new Scanner(System.in);

    System.out.println("Please enter the amount: ");
    int amount = input.nextInt();

    System.out.println("Please enter the number of coins: ");
    int numCoins = input.nextInt();
    coinValues = new int[numCoins];

    for (int i = 0; i < numCoins; i++)
    {
        System.out.println("Please enter coin value of " + i + " :");
        int value = input.nextInt();
        coinValues[i] = value;
    }

    for (int i = 0; i < coinValues.length; i++)
    {
        System.out.print("Coin Value: " + i + " " + coinValues[i] + "\n");
    }

    tryThis(temp, amount);

    for (int i = 0; i < temp.size(); i++)
    {
        System.out.println(temp.get(i) + " " + " ");
    }
}

public static ArrayList<Integer> tryThis(ArrayList<Integer> list, int amount)
{
    if (isValid(list, amount) == false)
    {
        while (amount > currentAmount && (amount > 0))
        {
            for (int i = 0; i < coinValues.length; i++)
            {
                for (int k = coinValues.length - 1; k > 0; k--)
                {
                    list.add(coinValues[k]);
                    int currentCoin = list.get(i);

                    if (amount > currentAmount)
                    {
                        amount = amount - currentCoin;
                        System.out.println("Amount: " + amount);
                    }

                    tryThis(list, amount);
                }
            }
        }
    }

    return new ArrayList<>();
}

public static boolean isValid(ArrayList list, int amount)
{
    boolean keepGoing = true;
    if (amount > currentAmount)
    {
        return keepGoing = false;
    }
    else
    {
        return keepGoing;
    }
}
} 
```

问候，迈克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T20:34:51.183

您的基本算法将如下所示：

```
For a given amount
  For each coin type
    Add the coin to a set
    If the set exceeds the amount, discard that set.
    If the set contains more coins than it should, discard the set.
    If the set equals the amount, add that set to the set of valid possibilities.
    Otherwise run the algorithm on each set you've created. 
```

通过回溯，您通常会保留在算法的每次迭代中分配的剩余数量（因此是“回溯”，因为您正在尝试为越来越小的数量寻找解决方案）。例如，假设我正在寻找 0.07 美元的硬币、镍和便士：

```
I start with empty sets.
I add a dime to one set. 
I subtract '10' from my amount.
This is a negative number, so I discard that set: it is invalid.
I add a nickel to another (empty) set.
I subtract '5' from my amount.
This equals 2; so I'll have to keep working on this set. 
Now I'm working with sets that already include one nickel.
I add a dime to one set.
I subtract '10' from my amount.
This is a negative number, so I discard that set: it is invalid.
I repeat this with a nickel; I discard this possibility because (2 - 5) is also negative.
I repeat this with a penny; this is valid but I still have 1 left.
I repeat this whole process again with a starting set of one nickel and one penny, 
  again discarding a dime and nickel, 
  and finally adding a penny to reach an amount of 0: this is a valid set.
Now I go back to empty sets and repeat starting with a nickel, then pennies. 
```

请注意，此算法应产生多个结果：

```
[nickel, penny, penny]
[penny, nickel, penny]
[penny, penny, nickel]
[penny, penny, penny, penny, penny, penny, penny] 
```

函数式语言自然适合这种递归工作，但您可以用任何语言复制此算法。

这将是一个已实现代码的示例，不包括优雅的重复修剪：

```
import java.util.*;

public class Backtrack {

  private static List<List<Integer>> findSets(int amount, List<Integer> coinTypes, int numberOfCoins) {
    List<List<Integer>> results = new ArrayList<List<Integer>>();

    for (Integer coin : coinTypes) {
      List<Integer> result = new ArrayList<Integer>();
      result.add(coin);
      int currentAmount = amount - coin;
      if (currentAmount >=0) { //only continue if we haven't overshot
        if (currentAmount == 0) {
          results.add(result);//this is a valid solution, add it to result set
        } else {//still some value to make up
          if ((numberOfCoins - 1) > 0){//otherwise we shouldn't recurse
            List<List<Integer>> recurseResults = findSets(currentAmount, coinTypes, (numberOfCoins - 1));
            for (List<Integer> recurseResult : recurseResults) {//Have to add this layer's coin in to each result
              recurseResult.add(coin);
            }
            results.addAll(recurseResults);
          }
        }
      }
    }

    return results;
  }

  public static void main(String[] args) {
    // TODO Auto-generated method stub
    int amount = 7;
    List<Integer> coinTypes = new ArrayList<Integer>();
    coinTypes.add(Integer.valueOf(1));
    coinTypes.add(Integer.valueOf(5));
    coinTypes.add(Integer.valueOf(10));
    int numberOfCoins = 3;

    List<List<Integer>> results = findSets(amount, coinTypes, numberOfCoins);
    System.out.println("Number of results: " + results.size());
    for (List<Integer> result : results) {
      System.out.print("Result: ");
      for (Integer coin: result) {
        System.out.println(result.toString() + ",");
      }
    }
  }
} 
```

# google-app-engine - Google App Engine 中的 Windows 错误

> ID：15530866
> 
> 赞同：2
> 
> 时间：2013-03-20T17:39:34.980
> 
> 标签：google-app-engine, python-2.7

这是我在 GAE 中的第一个程序。我正在使用最新的 GAE SDK 和 Windows XP 32 位上的 Python 2.7。一切正常；但令我惊讶的是，我收到以下错误：

```
2013-03-20 22:48:26 运行命令：“['C:\\Python27\\pythonw.exe', 'C:\\Program Files\\Google\\google_appengine\\dev_appserver.py', '- -skip_sdk_update_check=yes', '--port=9080', '--admin_port=8001', u'B:\\AppEngg\\huddle-up']"
INFO 2013-03-20 22:48:27,236 devappserver2.py:401] 跳过 SDK 更新检查。
警告 2013-03-20 22:48:27,253 api_server.py:328] 无法初始化图像 API；您可能缺少 Python “PIL” 模块。
INFO 2013-03-20 22:48:27,283 api_server.py:152] 启动 API 服务器：http://localhost:1127
INFO 2013-03-20 22:48:27,299 api_server.py:517] 应用所有待处理事务并保存数据存储
INFO 2013-03-20 22:48:27,299 api_server.py:520] 保存搜索索引
回溯（最近一次通话最后）：
  文件“C:\Program Files\Google\google_appengine\dev_appserver.py”，第 194 行，在
    _run_file(__file__, globals())
  _run_file 中的文件“C:\Program Files\Google\google_appengine\dev_appserver.py”，第 190 行
    execfile(script_path, globals_)
  文件“C:\Program Files\Google\google_appengine\google\appengine\tools\devappserver2\devappserver2.py”，第 545 行，在
    主要的（）
  文件“C:\Program Files\Google\google_appengine\google\appengine\tools\devappserver2\devappserver2.py”，第 538 行，在 main
    dev_server.start（选项）
  文件“C:\Program Files\Google\google_appengine\google\appengine\tools\devappserver2\devappserver2.py”，第 513 行，开始
    self._dispatcher.start(apis.port, request_data)
  文件“C:\Program Files\Google\google_appengine\google\appengine\tools\devappserver2\dispatcher.py”，第 95 行，开始
    servr.start()
  文件“C:\Program Files\Google\google_appengine\google\appengine\tools\devappserver2\server.py”，第 827 行，开始
    self._watcher.start()
  文件“C:\Program Files\Google\google_appengine\google\appengine\tools\devappserver2\win32_file_watcher.py”，第 74 行，开始
    提高 ctypes.WinError()
WindowsError：[错误 6] 句柄无效。
2013-03-20 22:48:27（进程退出，代码 1）

```

我用谷歌搜索了它；但似乎大多数收到此错误的人在`PATH`配置或 x64 Windows 中都有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T03:28:40.577

我将 GAE SDK 从 1.7.5 更新到 1.7.6，从那时起我开始收到此错误。我恢复到 1.7.5，应用程序运行正常 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T19:12:34.607

我对 GAE SDK 1.7.6 也有同样的问题，降级到 1.7.5 也为我解决了这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T02:41:37.477

根据这个线程，新的应用服务器已在 1.7.6 中作为默认推送，尽管仍然存在重大问题。[http://www.mail-archive.com/google-appengine@googlegroups.com/msg67459.html](http://www.mail-archive.com/google-appengine@googlegroups.com/msg67459.html)

尽管我没有遇到与您相同的问题，但我*遇到*了与 python 鸡蛋提取相关的致命错误，这意味着我无法使用新的 SDK。在这一点上最好的事情可能是恢复到早期的：http: [//googleappengine.googlecode.com/files/GoogleAppEngine-1.7.5.msi](http://googleappengine.googlecode.com/files/GoogleAppEngine-1.7.5.msi)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-01T05:27:03.140

可能是您的“GOPATH”环境变量指向一个不存在的目录。要准确发现有问题的目录是什么，请对 win32_file_watcher.py 进行以下编辑（大约第 60 行）：

```
 """Start watching the directory for changes."""
+ print("Watching " + self._directory + "\n")
  self._find_change_handle = ( 
```

当您再次运行该脚本时，您应该会看到它试图监控更改的最后一个目录的打印输出。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-20T14:06:09.853

我在 Windows 8 上使用 SDK 1.99 时遇到了完全相同的问题。我正在从 Google Go 自己的工作目录运行测试脚本 .yaml 和 .go 文件。将我的代码移动到它自己的子目录解决了这个问题。

# iphone - 与 UITableView 大小和 NSLayoutConstraints 斗争

> ID：15530868
> 
> 赞同：1
> 
> 时间：2013-03-20T17:39:37.037
> 
> 标签：iphone, ios, ipad

我有一个容器视图，它位于主 UIViewConroller 的左侧。这个容器视图由底部的几个按钮构成，中间的 UITableView 显示用户数据，顶部的另一个 UITableView 显示*选定*的用户数据。我想要这个顶级 UITableView 的行为，如果没有选定的数据，它就会消失，如果有，它会达到 200 的最大高度。选择的每个数据项将等同于表中的一个条目。

看看照片。在它运行的图片中，我加载了一个名为“test”的选定数据项：

![在此处输入图像描述](../Images/ce37f291760dada292fd90d2ae5a9cdf.png) ![在此处输入图像描述](../Images/5ff045f12b4817de6e4fa6727d1e7db7.png)

无论如何，我遇到的问题与 Interface Builder 创建的布局约束有关。以下是我为动态调整数据表和选定数据表大小而采取的步骤。

我已将最顶部的 TableView 设置为 <= 200，将中间的保留为默认值，然后添加此代码来调整顶部表格的大小：

```
-(void)setSelectedFacets:(NSArray *)selectedFacets{
    _selectedFacets = selectedFacets;
    [self.selectedFacetsTableView reloadData];

    CGRect frame = self.selectedFacetsTableView.frame;
    frame.size.height = 10 ;//36 * selectedFacets.count;
    self.selectedFacetsTableView.frame = frame;
    [self.selectedFacetsTableView setNeedsDisplay];
    [self.view setNeedsDisplay];
} 
```

上面的代码片段确实执行（在视图控制器完全加载后），但对实际高度没有影响。

有没有人有这方面的经验？

我知道您可以将 IBOutlet 添加到 NSLayoutConstraints （以获取对它们的引用），然后在运行时删除它们。这似乎比应该做的工作更多。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T08:18:29.263

如果您使用自动布局，则不应设置框架。仅添加/删除/修改布局约束。

通过使用“Pin”和“Align”等按钮，确保您在 IB 中仅使用 NSLayoutConstraints。在源代码中使 tableView 高度的约束可访问：

`@property (weak, nonatomic) IBOutlet NSLayoutConstraint *tableViewHeightConstraint;`

实际设置高度的片段应该在`updateViewContraints`

```
- (void)updateViewConstraints {
    CGFloat height = MAX(200.0f, 36.0f * selectedFacets.count);
    [self.tableView removeConstraint:self.tableViewHeightConstraint];
    NSLayoutConstraint *lc = [NSLayoutConstraint constraintWithItem:self.tableView attribute:NSLayoutAttributeHeight relatedBy:NSLayoutRelationEqual toItem:nil attribute:NSLayoutAttributeNotAnAttribute multiplier:0.0 constant:height];
    [self.tableView addConstraint:lc];
    self.tableViewHeightConstraint = lc;
    [super updateViewConstraints];
} 
```

在`setSelectedFacets:`刚打电话`[self updateViewConstraints]`

# python - 在 Python 3 中为我的班级创建哈希表

> ID：15530873
> 
> 赞同：0
> 
> 时间：2013-03-20T17:40:03.763
> 
> 标签：python, dictionary

我创建了一个包含多个成员的类。

我想创建哈希表，包含此类的“对象”并能够搜索（使用哈希图:)）

据我所知，我应该重载`__eq__`运算符

我应该从那里去什么？

我无法找到在 python 中创建哈希表的任何参考资料......尤其是“我的班级”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T17:41:56.080

您需要实现[`.__hash__()`方法](http://docs.python.org/3/reference/datamodel.html#object.__hash__)以及`.__eq__()`方法。

该方法应该返回一个整数，并且对于返回的任何两个对象，*必须*`.__eq__()`返回相同的整数值。`True``.__hash__()`

 *完成此操作的最简单方法是对实例的每个属性使用内置[`hash()`函数](http://docs.python.org/2/library/functions.html#hash)，使其独一无二，并返回这些值的异或结果。

例子：

```
class Foo(object):
    def __init__(self, bar, baz):
        self.bar = bar
        self.baz = baz

    def __eq__(self, other):
        if isinstance(other, type(self)):
            return self.bar == other.bar and self.baz == other.baz
        return False

    def __hash__(self):
        return hash(self.bar) ^ hash(self.baz) 
```

演示：

```
>>> foo1 = Foo('ham', 'eggs')
>>> foo2 = Foo('ham', 'eggs')
>>> foo3 = Foo('spam', 'vikings')
>>> foo1 == foo2
True
>>> foo1 == foo3
False
>>> hash(foo1)
1838536788654183919
>>> hash(foo1) == hash(foo2)
True
>>> hash(foo1) == hash(foo3)
False
>>> mapping = {}
>>> mapping[foo1] = 'Monty Python'
>>> foo1 in mapping
True
>>> foo2 in mapping
True
>>> foo3 in mapping
False
>>> mapping[foo2]
'Monty Python' 
```*

# javascript - 我想从我的位置获取谷歌路线到地图上点击的标记

> ID：15530874
> 
> 赞同：-3
> 
> 时间：2013-03-20T17:40:09.170
> 
> 标签：javascript, google-maps

```
src="http://www.google.com/jsapi?key=AIzaSyBkplC2WJePplXwHeSeiYCPh1QtHrLE_Oo"
if (navigator.geolocation) {enableHighAccuracy: true,
    navigator.geolocation.watchPosition(function(position){
        var latitude = position.coords.latitude;
        var longitude = position.coords.longitude;
        var coords = new google.maps.LatLng(latitude, longitude);
        var mapOptions = {
            zoom: 13,
            center: coords,
            mapTypeControl: true,
            navigationControlOptions: {
                style: google.maps.NavigationControlStyle.SMALL
            },
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById("mapContainer"), mapOptions);
        //mylocation as a marker on the map
        var marker1 = new google.maps.Marker({
            position: coords,
            draggable: false,
            map: map,
            title: "Your current location!"
        });
        //the circle radius on the marker 
        var myCity = new google.maps.Circle({
            center:coords,
            radius:2000,
            strokeColor:"#0000FF",
            strokeOpacity:0.5,
            strokeWeight:1,
            fillColor:"#0000FF",
            fillOpacity:0.1
        });

        myCity.setMap(map);
    });
    enableHighAccuracy: true;
}else {
    alert("Geolocation API is not supported in your browser.");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T06:19:19.167

这个工作示例[HERE](http://www.geocodezip.com/v3_GoogleEx_geolocation_directionsA.html)可能会回答您的问题。尝试单击给定地图上的任何标记，它将为您提供当前位置的方向。

# spring - RequestMapping定义了参数时Spring如何确定Handler

> ID：15530875
> 
> 赞同：0
> 
> 时间：2013-03-20T17:40:16.717
> 
> 标签：spring, spring-mvc

我为控制器的方法定义了以下@RequestMapping。

```
@RequestMapping(value = "{transactionId}/continue", params = "submitButton=enterApplication") 
```

在 JSP 中，我定义了以下按钮：

```
<button type="submit" name="submitButton" id="button.enterApplication" value="enterApplication">
Enter Application
</button> 
```

现代浏览器一切正常。在请求中提交以下内容：

```
submitButton=enterApplication 
```

但它看起来像 IE7（可能更早），浏览器正在提交按钮标签的内容而不是 value 属性。因此，在这种情况下，它提交以下内容：

```
submitButton=Enter+Application 
```

请注意“+”符号而不是空格（使用 Fiddler，我能够检查请求并看到上面的参数/值中有“+”）。我很确定这是我的问题所在 - 但我不知道该怎么做。我尝试使用以下@RequestMapping 添加另一种方法：

```
@RequestMapping(value = "{transactionId}/continue", params = "submitButton=Enter+Application") 
```

但这似乎不起作用。我继续收到以下错误：

```
javax.servlet.ServletException: No adapter for handler [...]: Does your handler implement a supported interface like Controller? 
```

有没有办法确定 Spring 正在执行什么逻辑来将请求中提交的内容与 @RequestMapping 中定义的参数进行比较？我认为比较空格或“+”字符肯定有问题。

*注意：问题可能不一定是加号 - 这只是我最初的想法。如果我能弄清楚 Spring 是如何确定处理程序的，我也许能够弄清楚它为什么不匹配。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T18:55:02.623

您可以在表单上放置一个隐藏字段，而不是使用提交按钮值来发送参数。`value="enterApplication"`从提交按钮中删除并在表单上放置如下内容：

```
<input type="hidden" value="enterApplication" name="myParameterName"/> 
```

然后只需将参数添加到您的控制器方法签名中：

```
@RequestMapping(value = "{transactionId}/continue")
public void myControllerMethod(@RequestParam String myParameterName)
.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T20:54:47.057

将 a`paramValue.equals(request.getParameter(paramName))`用于“paramName=paramValue”形式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T17:41:30.613

Sotirios Delimanolis 的回答是正确的。我不完全确定为什么它最初不起作用。

回顾一下，以下 RequestMapping 是正确的。

@RequestMapping(value = "{transactionId}/continue", params = "submitButton=Enter Application")

此外，为了支持较旧的浏览器并且不必创建具有不同 RequestMappings 的多个方法，我们决定删除 value 属性并依赖按钮标签的内容。

所以，按钮现在看起来像这样。

```
<button type="submit" name="submitButton" id="button.enterApplication">
Enter Application
</button> 
```

# drools - 流口水来统治excel表

> ID：15530877
> 
> 赞同：5
> 
> 时间：2013-03-20T17:40:20.873
> 
> 标签：drools, rule-engine

只是想有没有办法使用 Drools API 将 drl 文件转换为 excel 工作表？

我们目前在 Drools 5.3 但可以使用任何版本。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-07T20:53:24.663

不，没有 API（至少 JBoss 支持）来做你正在寻找的东西。您可以尝试自己解析规则并创建 CSV 或 XLS 文件，但没有开箱即用的支持。

希望能帮助到你，

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-08T20:09:54.217

[http://docs.jboss.org/drools/release/5.2.0.CR1/drools-expert-docs/html/ch05.html#d0e6019](http://docs.jboss.org/drools/release/5.2.0.CR1/drools-expert-docs/html/ch05.html#d0e6019) - 见 5.11.4 - Excel 可以读取 xml 文件...

# macos - Mac OS X：如何静默启动“命令行工具”类型的应用程序

> ID：15530879
> 
> 赞同：1
> 
> 时间：2013-03-20T17:40:30.487
> 
> 标签：macos, command-line

使用 Xcode 4.6，我创建了一个“命令行工具”应用程序（我们称之为 toolA）。在该应用程序中，我想执行另一个“命令行工具”应用程序（toolB）。我使用如下的 system() 函数：

```
system("open \"/usr/bin/toolB\""); 
```

它运行良好，只是在执行 toolB 时会弹出一个终端窗口。如何隐藏终端窗口或使用其他方式调用 toolB，使其根本不显示终端窗口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:44:26.130

尝试：

```
system('command &'); 
```

`&`将一个进程置于后台。

下次花几秒钟[谷歌搜索](https://www.google.com/search?q=php+system+silent)（第二个结果）。

# html - HTML5 Canvas + 本地字体

> ID：15530883
> 
> 赞同：0
> 
> 时间：2013-03-20T17:40:35.820
> 
> 标签：html, canvas, fonts, truetype

我正在尝试在 HTML5 中创建一个字体查看器，用户在他们的 PC 上选择一种真正的字体，我的代码将加载它，然后在画布上呈现文本。

我有文件选择工作，它返回`c:\fakepath\myfont.ttf`

我已经将文本渲染到画布上。

但我很难将所选字体实际加载为画布字体。所以我正在寻找一种从文件中加载字体并将其设置为画布字体的方法，有什么想法吗？

我注意到 css @font-face 可以指定自定义字体，但可以在游戏加载后在运行时更改吗？

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:18:14.967

您正在寻找`context.font`房产（[http://www.w3.org/html/wg/drafts/2dcontext/html5_canvas/#dom-context-2d-font](http://www.w3.org/html/wg/drafts/2dcontext/html5_canvas/#dom-context-2d-font)）

您必须使用在 @font-face 声明中声明的名称。

示例：

`context.font = 'italic 400 12px/2 Unknown Font, sans-serif';`

使用前需要设置字体`fillText`。您将无法“替换”已经写在画布上的字体，因为它不再被视为文本而是位图数据。

编辑：好的，您在问题中谈论了太多事情，这让我感到困惑。

你只需要上传（如果你想异步，你可以试试 HTML5 API）。然后服务器需要返回您将插入到样式元素中的@font-face 声明（您可以动态创建它）。

然后你只需要使用我告诉你的字体。这很简单：

*   上传字体
*   插入好的@font-face
*   使用字体

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:44:46.703

您实际上需要一种客户端 Javascript 方式来动态地将您的字体文件操作到画布上。

看看 Cufon 字体：

[https://github.com/sorccu/cufon/wiki/about](https://github.com/sorccu/cufon/wiki/about)

# backbone.js - Backbone.js 如何：当一个属性被设置时，自动更新另一个

> ID：15530885
> 
> 赞同：1
> 
> 时间：2013-03-20T17:40:38.210
> 
> 标签：backbone.js, backbone-events

人们想知道以下情况的最佳实践和 API 详细信息。

假设我们有一个模型选择：

```
Selection = Backbone.Model.extend({
  defaults: {
    value : null,
    related: null,
    other: null,
    stuff: null
  }
} 
```

如果我们只更改“值”而不设置“相关”，那么我们希望将“相关”设置为空——一种级联更新。

当 'value' 改变时，还有其他侦听器需要查看 'related' 的更新值。因此，我们希望保证当调用任何这些侦听器时，“相关”会相应更新。

因此，也许我们可以让 Selection 模型本身监听“change:value”，并在必要时设置“related”。但是 Backbone 是否保证该侦听器会在任何其他“change:value”侦听器之前被调用？同样，是否保证合格事件将在通用事件之前触发，所以在“更改”之前“更改：值”？

依靠事件系统来做这件事似乎很脆弱，所以我们寻找了一些钩子。我们能找到的最接近的东西是 _validate/validate 方法，我们可以在其中添加到我们的选择模型中，例如：

```
// Use _validate as a "before-set call" to set 'related' if necessary
_validate: function(attrs, options) {
  if (!_.has(attrs, 'related') && _.has(attrs, 'value') && 
      !_.isEqual(attrs.value, this.attributes.value)) {
    attrs.related = null;
  }
  return true;
} 
```

当然，这违背了“验证”所隐含的语义。

非常感谢任何指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:54:26.820

由于 Backbone.Model 设置方法支持传递多个属性，我建议重写它。

类似的东西（抱歉使用 CoffeeScript -`super`这里有点简单）：

```
class myView extends Backbone.View
   set: (attributes, options) ->
       if attributes.value == "something"
             attributes.related = null
             #set all the cascade updates in the attributes object
       super(attributes,options) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:59:01.610

您可以覆盖[Model.set](http://backbonejs.org/docs/backbone.html#section-41)并包含您的测试。

沿着这些思路：

```
var Selection = Backbone.Model.extend({
    defaults: {
        value : null,
        related: null,
        other: null,
        stuff: null
    },

    set: function(key, val, options) {
        var attrs;

        //nothing to set
        if (key == null) return this;

        if (typeof key === 'object') {
           // setting a hash
            attrs = key;
            options = val;
        } else {
           // setting a key-value pair
            (attrs = {})[key] = val;
        }

        // set related values
        if (!_.has(attrs, 'related') && _.has(attrs, 'value') &&  
                  !_.isEqual(attrs.value, this.attributes.value)) {
            attrs.related = null;
        }

        // call the parent
        Backbone.Model.prototype.set.call(this, attrs, options);
    }
}); 
```

还有一个小提琴[http://jsfiddle.net/nikoshr/KSHwc/](http://jsfiddle.net/nikoshr/KSHwc/)

# java - Mvn 安装或 Mvn 包

> ID：15530886
> 
> 赞同：145
> 
> 时间：2013-03-20T17:40:40.040
> 
> 标签：java, maven, myeclipse

我是 Maven 新手，我有一个基于 Java 的 Web 项目，在我的 MyEclipse 中配置了 maven。
现在，如果我修改了任何 java 文件，那么我需要做吗`Run as -> Mvn install`？`Mvn package`

* * *

## 回答 #1

> 赞同：171
> 
> 时间：2013-03-20T17:56:36.237

来自[http://maven.apache.org/guides/getting-started/maven-in-five-minutes.html](http://maven.apache.org/guides/getting-started/maven-in-five-minutes.html)

> `package`：获取已编译的代码并将其打包成可分发的格式，例如 JAR。
> 
> `install`：将包安装到本地存储库中，作为本地其他项目的依赖项

因此，您的问题的答案是，这取决于您是否希望将其安装到本地存储库中。安装也将运行包，因为它在目标阶段堆栈中更高。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-03-20T17:51:05.220

`mvn install`是最常用的选项。
`mvn package`很少使用，仅当您正在调试 maven 构建过程的某些问题时。

请参阅：[http ://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html)

注意`mvn package`只会创建一个jar文件。
`mvn install`如果其他代码依赖于这些 jar ，将执行此操作**并将**jar（和类等）文件安装在适当的位置。

我通常做一个`mvn clean install`；这将删除`target`目录并在该位置重新创建所有 jar。
清洁有助于处理不需要或移除的东西，这些东西有时会妨碍您。
而不是调试（有时）只是从头开始。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-04-22T17:06:38.887

从[Lifecycle reference](https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Lifecycle_Reference)中，*install*将运行项目的集成测试，而*package*不会。

如果您确实不需要安装生成的工件，请至少使用*verify*。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-07-29T20:48:55.760

另外你应该注意，如果你的项目是由几个相互依赖的模块组成的，你应该使用“install”而不是“package”，否则你的构建会失败，因为当你使用 install 命令时，模块 A 将被打包并部署到本地存储库，然后如果模块 B 需要模块 A 作为依赖项，它可以从本地存储库访问它。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-12-03T15:46:02.303

如果您*不*使用*远程*存储库（如工件），请使用普通旧的： `mvn clean install`

很老的话题，但 AFAIK，如果您运行自己的存储库（例如：使用 artifactory）在团队之间共享 jar，您可能想要使用

`mvn clean deploy`

反而。

这样，您的持续集成服务器可以确保所有依赖项都正确推送到您的远程存储库中。如果您错过了一个，mvn 将无法在您的 CI 本地 m2 存储库中找到它。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-02-24T06:13:24.740

package - 获取编译后的代码并将其打包成可分发的格式，例如 JAR 或 WAR 文件。install - 将包安装到本地存储库中，作为本地其他项目的依赖项

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-05-13T23:25:02.107

**正确的**方法是`mvn package`，如果您为构建的核心部分正确执行了操作，则无需在本地存储库中安装软件包。

此外，如果您使用 Travis，您可以“缓存”您的依赖项，因为`$HOME.m2/repository`如果您将包用于自己的项目，它不会触及您的依赖项。

实际上，如果您甚至尝试执行 a `mvn site`，您通常需要先执行 a `mvn install`。要么有太多的错误，要么`site`有许多维护不善的插件。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-21T06:04:59.080

这取决于您在更改 Java 文件后要实现的目标。在您想测试 maven 进程之前，您永远不需要做任何事情。Eclipse/MyEclipse 将构建必要的内容并将输出放在项目中的适当位置。您还可以运行或部署它（例如，如果它是一个 Web 项目），而无需使用 maven 显式执行任何操作。最后，要在 maven 存储库中安装您的项目，您需要进行 maven 安装。您可能还希望执行其他 maven 目标，而 MyEclipse 不会自动执行这些目标。

正如我所说，这取决于你想做什么。

# excel - 结果为单个值时 Excel 关闭数组公式模式

> ID：15530891
> 
> 赞同：0
> 
> 时间：2013-03-20T17:40:50.297
> 
> 标签：excel

我有以下工作表数组公式

```
{=MMULT(INDEX(Range1,1,{2,3,4}), Range2)} 
```

其中`Range1`是 1x4 矩阵，`Range2`是 3x1 矩阵。我想要水平向量和垂直向量的和积。

如果我的目标范围是单个单元格，Excel 会去掉数组模式，并返回`#VALUE`错误，因为`INDEX`在常规模式下返回 1x1。

如果我的目标范围是多单元格范围，它会正确计算总和并在整个范围内重复。

有没有什么办法解决这一问题？并摆脱错误的优化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:59:17.697

> 我想要水平向量和垂直向量的和积。

您可以使用以下公式代替您的公式：

```
=MMULT(OFFSET(Range1,0,1,1,3), Range2) 
```

它不需要以数组公式的形式输入，但如果您这样做是可以接受的。

# java - 创建正确的 HTTP POST 数据

> ID：15530895
> 
> 赞同：1
> 
> 时间：2013-03-20T17:40:52.163
> 
> 标签：java, android, http, post

我是 android 开发的新手，现在我需要创建和使用 POST 请求。根据这篇[文章](https://stackoverflow.com/questions/4543894/android-java-http-post-request/4544026#4544026) ，我试图把我的数据：

```
 List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(13);
            nameValuePairs.add(new BasicNameValuePair("SelectedCode", "25"));
            nameValuePairs.add(new BasicNameValuePair("Phone", "1234567"));
            nameValuePairs.add(new BasicNameValuePair("Text", "1234"));
            nameValuePairs.add(new BasicNameValuePair("IsTranslit", "false"));
            nameValuePairs.add(new BasicNameValuePair("IsShedule", "false"));
            nameValuePairs.add(new BasicNameValuePair("LastDate", ""));
            nameValuePairs.add(new BasicNameValuePair("LastDateHour", "00"));
            nameValuePairs.add(new BasicNameValuePair("LastDateMinuts", "00"));
            nameValuePairs.add(new BasicNameValuePair("DateSendBefore", ""));
            nameValuePairs.add(new BasicNameValuePair("DateSendBeforeHour", "00"));
            nameValuePairs.add(new BasicNameValuePair("DateSendBeforeMinuts", "00"));
            nameValuePairs.add(new BasicNameValuePair("CaptchaDeText", "h3Vcjwk2moLagspo7lnKpg%3D%3D"));
            nameValuePairs.add(new BasicNameValuePair("CaptchaInputText", "4myin2"));
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs)); 
```

但**它不起作用**。然后我尝试使用此代码（对不起，很长的一行）

```
 httppost.setEntity(new StringEntity("SelectedCode=25&Phone=1234567&Text=123&IsTranslit=false&IsShedule=false&LastDate=&LastDateHour=00&LastDateMinuts=00&DateSendBefore=&DateSendBeforeHour=00&DateSendBeforeMinuts=00&CaptchaDeText=h3Vcjwk2moLagspo7lnKpg%3D%3D&CaptchaInputText=4myin2")); 
```

**它**有效。有人可以解释有什么区别或我做错了什么吗？

**更新：**

不起作用我的意思是服务器不认为这个帖子请求是正确的。例如，如果我在 NameValuePair 列表中添加不正确的值，就会发生这种情况。但是从我的角度来看，第一段代码和第二段代码中的名称和值是相同的。这让我想知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T20:15:47.853

vmirionov 的[评论](https://stackoverflow.com/questions/15530895/creating-correct-http-post-data#comment-22001181)解决了这个问题。改变`h3Vcjwk2moLagspo7lnKpg%3D%3D`以`h3Vcjwk2moLagspo7lnKpg==`制造诡计。

# javascript - 如何用 angularjs 嵌套表单？

> ID：15530896
> 
> 赞同：0
> 
> 时间：2013-03-20T17:40:52.740
> 
> 标签：javascript, forms, angularjs, javascript-framework

我正在制作一个不是 100%“单页”驱动的应用程序。当我轻松学习这个新的 JS 框架时，我只使用 angular 作为“助手”。我的很多应用程序仍然由普通的 get 和 post 控制，而不是 angular 资源或任何东西。

我有一个由 rails 创建的外部形式（它有一个 action="" 等）。

在这个表单中，我有三个“列表”，有点像 3 种不同类型的待办事项列表，但都在一个表单中，当他们提交时将发送到 Rails。

在其中一个列表中，用户将看到一个可以添加新任务的文本框。我正在尝试使用户可以在文本框中点击“输入”并将其添加到模型中，但不提交父表单。

我读过我可以`ngForm`用 angular 来做到这一点（让它看起来像嵌套形式），但我不确定如何做到这一点或有什么问题。这是我的代码：

main.js.coffee

```
app = angular.module("Messenger", [])

app.factory "NewTasks", ->
  NewTasks = []

@processNewCtrl = ["$scope", "NewTasks", ($scope, NewTasks) ->
  $scope.tasks = NewTasks

  $scope.addTask = ->
    task = $scope.newTask
    task.timestamp = new Date().getTime()
    $scope.tasks.push(task)
    $scope.newTask = {}
]

@processTomorrowCtrl = ["$scope", ($scope) ->
] 
```

视图.html.erb

```
<form action="/stuff">
    <!-- ... boring code-->
    <div ng-controller="processNewCtrl">
        <!-- ... ng-repeat unordered list here for task in tasks -->
        <div class="task">
          <angular ng-form ng-submit="addEntry()">
            <input checked="checked" disabled="disabled" type="checkbox">
            <input ng-model="newTask.description" type="text" autocomplete="off" placeholder="Additional Task description">
          </angular>
        </div> 
    </div>
    <!-- ... -->
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T23:16:12.367

`ng-form`一起使用`ng-submit=mySaveCallback()`

`mySaveCallback()`应该处理数据排序，然后手动发布到后端（使用`$http`或`$resource`或其他东西）。

通常，您不会`<form action="submit.html">`在 AngularJS 中使用传统的，因为您通常希望在发送数据之前对其进行处理，或者也以某种方式更新 AngularJS。使用传统的表单请求也会使您更改页面，这也可能是不可取的。

现在，如果您正在谈论保持传统方法（更改页面和传递 POST 数据），老实说，我不知道如何在 Javascript 中完成这一点（因为这不是特定于 Angular 的问题）。

但在我看来，你最好完全转换为使用 AngularJS 和`ng-submit`. 将来也会更容易使用。

# postgresql - 在 postgres 中插入语句用于没有时区 NOT NULL 的数据类型时间戳，

> ID：15530899
> 
> 赞同：27
> 
> 时间：2013-03-20T17:40:59.410
> 
> 标签：postgresql, pg

数据库新手警报：我正在尝试插入 postgres 表。我要插入的字段称为`make_date`.

字段类型是`timestamp without time zone NOT NULL`，如何在其中插入今天的日期？比如现在的日期和时间？类似于下面的内容，但我无法为 dateTime.now 获得正确的数据类型插入格式

```
insert into inventory_tbl (make_date) values (dateTime.now) 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-20T17:48:11.997

使用`now()`或`CURRENT_TIMESTAMP`。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-03-21T16:10:17.773

除了 C. Ramseyer 的解决方案（这是正确的），如果您总是（甚至通常）想要`make_date`成为记录创建的日期，您可以将其默认设置为`now()`：

```
alter table inventory_tbl alter make_date set default now(); 
```

然后，如果您不将其包含在插入的列列表中，它将自动设置为`now()`：

```
test=> insert into inventory_tbl ( name ) values ('brick'), ('sand'), ('obsidian') returning *;
         make_date          |   name   
----------------------------+----------
 2013-03-21 09:10:59.897666 | brick
 2013-03-21 09:10:59.897666 | sand
 2013-03-21 09:10:59.897666 | obsidian
(3 rows)

INSERT 0 3 
```

# java - 带有实数的后缀中缀

> ID：15530901
> 
> 赞同：-1
> 
> 时间：2013-03-20T17:41:09.640
> 
> 标签：java

我正在尝试做一个允许将中缀转换为后缀快递的应用程序。我只能对一位数执行此操作，但是当我对整个实数执行此操作时，它会显示错误！

```
public String doTrans() {
    for (int j = 0; j < input.length(); j++) {
        char ch = input.charAt(j);
        theStack.displayStack("For " + ch + " ");
        switch (ch) {
        case '+':
        case '-':
            gotOper(ch, 1);
            break;
        case '*':
        case '/':
            gotOper(ch, 2);
            break;
        case '(':
            theStack.push(ch);
            break;
        case ')':
            gotParen(ch);
            break;
        default:
            if (input.charAt(j + 1) != '+' || input.charAt(j + 1) != '-'
                    || input.charAt(j + 1) != '/'
                    || input.charAt(j + 1) != '('
                    || input.charAt(j + 1) != ')')
                number = number + ch;
            else
                output = output + number;
            break;
        }
    }
    while (!theStack.isEmpty()) {
        theStack.displayStack("While ");
        output = output + theStack.pop();
    }
    theStack.displayStack("End ");
    return output;
} 
```

这就是错误！

```
Exception in thread "main" java.lang.StringIndexOutOfBoundsException: String index out of range: 14
    at java.lang.String.charAt(String.java:658)
    at InToPost.doTrans(InToPost.java:33)
    at InfixApp.main(InfixApp.java:15) 
```

`if (input.charAt(j + 1) != '+' || input.charAt(j + 1) != '-'...`

整个程序很长，这里不能发！

最后编辑

```
default:
                if (j != input.length() - 1) {
                    if (input.charAt(j + 1) != '+'
                            || input.charAt(j + 1) != '-'
                            || input.charAt(j + 1) != '/'
                            || input.charAt(j + 1) != '('
                            || input.charAt(j + 1) != ')')
                        number = number + ch;
                    else
                        output = output + number;
                } else
                    output = output + number;
                break; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:43:09.317

你的循环这样做：

```
for (int j = 0; j < input.length(); j++) {
    ... 
```

后来你做

```
if (input.charAt(j + 1) != '+' || input.charAt(j + 1) != '-' 
```

为此，您的循环必须以 结束`input.length() - 1`，否则您将`StringIndexOutOfBoundsException`在最后一次迭代中得到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:48:58.730

```
 if (input.charAt(j + 1) != '+' || input.charAt(j + 1) != '-'
                    || input.charAt(j + 1) != '/'
                    || input.charAt(j + 1) != '('
                    || input.charAt(j + 1) != ')') 
```

上面的代码查找下一个字符是否是运算符。

你的for循环一直到input.length（），所以只需让for循环比END少一个位置，如下所示：

for(int j = 0; j < input.length()-1; j++) // 这样循环代码就可以安全地引用最后一个字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T17:44:19.157

在这一行

```
if (input.charAt(j + 1) != '+' || input.charAt(j + 1) != '-' 
```

您正在检查下一个字符。但是如果你已经到了最后呢？这就是你如何从`String`. 在测试下一个字符之前，您需要单独检测这种情况（字符串结尾）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T17:46:47.123

```
 if (input.charAt(j + 1) != '+' || input.charAt(j + 1) != '-'
                || input.charAt(j + 1) != '/'
                || input.charAt(j + 1) != '('
                || input.charAt(j + 1) != ')')
            number = number + ch;
        else
            output = output + number; 
```

一个简单的元规则是 || 这里应该是 && 因为 !=。

大概都应该是：

```
number += ch; 
```

# objective-c - 提前 NSPredicate 查询？

> ID：15530905
> 
> 赞同：0
> 
> 时间：2013-03-20T17:41:27.363
> 
> 标签：objective-c, core-data, nspredicate

我想知道是否可以使用 NSPredicate 执行此操作：

```
NSArray *letters = [[table.Letters componentsSeparatedByString:@","] mutableCopy];
NSArray *searched = [[searchString componentsSeparatedByString:@","] mutableCopy];
for (int i = 0; i<searched.count-1; i++) 
{
     if([letters[i] intValue] == [searched[i] intValue])
          //return the record
     else
          break;
} 
```

基本上我所做的是获取每个字符串，用逗号分隔，并创建一个整数数组（它们总是整数），然后将两者作为整数而不是字符串进行比较，以使其更快。

有什么办法可以做到这一点`NSPredicate`吗？或者有什么方法可以用 CoreData 做到这一点？

显然这些都不重要，这是我的 Fetch 请求。

```
-(void)titles:(NSString *)toMatch
{
    // THIS IS ALL SETTING UP THE STRING TO BE MATCHED AGAINST THE DATABASE

    NSMutableArray *retval = [[NSMutableArray alloc] init];
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    lineIDArray = [[NSMutableArray alloc] init];
    NSString *LabelText =toMatch;
    NSString *compareString = @"";
    for (int i = 0; i<LabelText.length; i++)
    {
        int letter = [LabelText characterAtIndex:i];
        NSString *firstLetters;
        if(letter<100)
        {
            firstLetters = [NSString stringWithFormat:@"0"];
            firstLetters = [blah stringByAppendingFormat:@"%d", letter];
        }
        else
            firstLetters = [NSString stringWithFormat:@"%d", letter];
        compareString= [compareString stringByAppendingString:firstLetters];
        compareString = [compareString stringByAppendingString:@","];
    }
    //ALL THE WAY UP TO HERE

    //SETTING UP QUERY
    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    NSPredicate *predicate;

    //CHECKING WHICH TYPE OF SEARCH THE USER HAS SELECTED, MATCHING THE STRING FROM THE BEGINNING OR SEEING IF WHAT THEY SEARCHED ARE PRESENT IN THE FIRST LETTERS OF THE STRING
    if ([defaults boolForKey:@"FLS"])
        predicate = [NSPredicate predicateWithFormat:@"first_letter_start BEGINSWITH %@", compareString];
    else
        predicate = [NSPredicate predicateWithFormat:@"first_letter_start CONTAINS %@", compareString];

    //SETTING UP REQUEST
    [request setPredicate:predicate];
    [request setReturnsObjectsAsFaults:NO];
    [request setFetchBatchSize:100];
    [request setEntity:entity];
    [request setPropertiesToFetch:[NSArray arrayWithObjects:@"gurmukhi", @"shabad_id", nil]];
    NSError *error;

    //FETCHING
    fetchedObjects = [managedObjectContext executeFetchRequest:request error:&error];
    for (Gurbani *shabad in fetchedObjects)
    {
        [retval addObject:shabad.gurmukhi];
        [lineIDArray addObject:[NSString stringWithFormat:@"%i", shabad.shabad_id]];
    }
    searchResults = retval;
    [searchResultsTable reloadData];
}; 
```

这是模型： ![我经常搜索的任何内容都会被编入索引，包括我现在正在搜索的内容。](../Images/298925a37dcb1ecd51a521174e9a2e88.png)

这是我使用参数得到的输出`-com.apple.CoreData.SQLDebug 1`：

```
2013-03-20 16:53:57.316 GurbaniKhoj[955:907] CoreData: sql: SELECT 0, t0.Z_PK FROM ZSHABAD t0 WHERE  NSCoreDataStringSearch( t0.ZFIRST_LETTER_START, ?, 8, 0) 
2013-03-20 16:53:59.982 GurbaniKhoj[955:907] CoreData: annotation: sql connection fetch time: 2.6653s
2013-03-20 16:53:59.983 GurbaniKhoj[955:907] CoreData: annotation: total fetch execution time: 2.6667s for 92 rows.
2013-03-20 16:53:59.988 GurbaniKhoj[955:907] CoreData: sql: SELECT t0.Z_ENT, t0.Z_PK, t0.ZGURMUKHI, t0.ZSHABAD_ID FROM ZSHABAD t0 WHERE  t0.Z_PK IN  (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)   LIMIT 100
2013-03-20 16:54:00.058 GurbaniKhoj[955:907] CoreData: annotation: sql connection fetch time: 0.0692s
2013-03-20 16:54:00.059 GurbaniKhoj[955:907] CoreData: annotation: total fetch execution time: 0.0717s for 92 rows. 
```

我对此很陌生，所以也许这会有所帮助，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:50:28.637

你在浪费时间。

```
 NSDate *date = [NSDate date];
  NSArray *letters = [[@",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,," componentsSeparatedByString:@","] mutableCopy];
  NSArray *searched = [[@",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,," componentsSeparatedByString:@","] mutableCopy];
  for (int i = 0; i<searched.count-1; i++)
  {
    if([letters[i] intValue] == [searched[i] intValue])
    {

    }
//      NSLog(@"same");
  }

  NSLog(@"ints: %f", [date timeIntervalSinceDate:[NSDate date]]);

  date = [NSDate date];
  for (int i = 0; i<searched.count-1; i++)
  {
    if([letters[i] isEqualToString:searched[i]])
    {

    }
//      NSLog(@"same");
  }
  NSLog(@"strings: %f", [date timeIntervalSinceDate:[NSDate date]]); 
```

整数：0.006064

字符串：0.000979

# hadoop - 为什么这段代码不会两次遍历 reducer 值？

> ID：15530906
> 
> 赞同：2
> 
> 时间：2013-03-20T17:41:27.950
> 
> 标签：hadoop, mapreduce, hdfs

我有这个代码：

```
public void reduce(Text key, Iterable<Text> values, Context context) 
        throws IOException, InterruptedException 
        {
            String name = null; 
            String sid = null;
            String predicate = null;
            String oid = null;
            String id = null;
            String outKey = null;
            String outVal = null;

            LinkedList<Text> valuesList = new LinkedList<Text>();
            Iterator<Text> ite = values.iterator();
            while(ite.hasNext()) {
                Text t = ite.next();
                String[] entities = t.toString().split("#-#-#-#");
                        if(entities[entities.length-1].equalsIgnoreCase("topic_name"))
                {
                    name = entities[0];
                }
                valuesList.add(t);
            }
            Iterator<Text> ite2 = valuesList.iterator();
            while(ite2.hasNext()) { 
                Text t2 = ite2.next(); 
                String[] entities = t2.toString().split("#-#-#-#");
                if(!entities[entities.length-1].contains("topic_name"))
                {
                     if(name!=null) {
                     outKey = entities[0]+"\t"+entities[1]+"\t"+name;
                }
                else 
                {
                    outKey = entities[0]+"\t"+entities[1]+"\t"+key.toString();
                }
                context.write(new Text(outKey), null);
                }
            }
        } 
```

我看到当我再次遍历这些值时，它总是取缓存副本中的最后一个值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T19:01:20.360

第一个迭代器实际上总是返回相同的`Text`对象，它只是在每次调用之前用不同的字符串填充它。这样做是为了节省实例化对象的时间。所以你实际上是在构建一个`List<Text>`包含同一对象的许多副本的。要解决此问题，您应该将值保存到`List<String>`包含实际“未装箱”值的 a 中。像这样：

```
 LinkedList<String> valuesList = new LinkedList<String>();
        Iterator<Text> ite = values.iterator();
        while(ite.hasNext()) {
            Text t = ite.next();
            String[] entities = t.toString().split("#-#-#-#");
                    if(entities[entities.length-1].equalsIgnoreCase("topic_name"))
            {
                name = entities[0];
            }
            valuesList.add(t.toString());
        }
        Iterator<String> ite2 = valuesList.iterator();
        while(ite2.hasNext()) { 
            String t2 = ite2.next(); 
            String[] entities = t2.split("#-#-#-#");
            if(!entities[entities.length-1].contains("topic_name"))
            {
                 if(name!=null) {
                 outKey = entities[0]+"\t"+entities[1]+"\t"+name;
            }
            else 
            {
                outKey = entities[0]+"\t"+entities[1]+"\t"+key.toString();
            }
            context.write(new Text(outKey), null);
            }
        } 
```

# java - 如何从 Spring Web 服务中删除 Soap 消息中的正文元素

> ID：15530911
> 
> 赞同：1
> 
> 时间：2013-03-20T17:41:39.703
> 
> 标签：java, spring, soap, spring-ws

我有以下拦截器来修改soap响应的标头。我也想清除肥皂响应的主体，但我找不到任何关于这样做或解决它的方法的文档。建议？

```
 public class LisResponseInterceptor extends EndpointInterceptorAdapter {

        @Override
        public boolean handleResponse(MessageContext messageContext, Object endpoint) {
            return true;
        }

        @Override
        public boolean handleRequest(MessageContext messageContext, Object endpoint) {
            return true;
        }

        @Override
        public boolean handleFault(MessageContext messageContext, Object endpoint) {

            SoapMessage response = (SoapMessage) messageContext.getResponse();
            SoapHeader header = response.getSoapHeader();
            header.addHeaderElement(new QName("ims","imsx_syncRequestHeaderInfo"));

            SoapBody body = response.getSoapBody();

                    // clear body

            return true;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T18:06:57.343

修复

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
   <SOAP-ENV:Header>
      <imsx_syncRequestHeaderInfo xmlns="ims"/>
   </SOAP-ENV:Header>
   <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>

public class LisResponseInterceptor extends EndpointInterceptorAdapter {

    @Override
    public boolean handleResponse(MessageContext messageContext, Object endpoint) {
        return true;
    }

    @Override
    public boolean handleRequest(MessageContext messageContext, Object endpoint) {
        return true;
    }

    @Override
    public boolean handleFault(MessageContext messageContext, Object endpoint) {

        SoapMessage response = (SoapMessage) messageContext.getResponse();
        SoapHeader header = response.getSoapHeader();
        header.addHeaderElement(new QName("ims","imsx_syncRequestHeaderInfo"));

        SoapBody body = response.getSoapBody();

        Transformer identityTransform = null;

    try {
        identityTransform = TransformerFactory.newInstance().newTransformer();
    } catch (TransformerConfigurationException e) {
        e.printStackTrace();
    } catch (TransformerFactoryConfigurationError e) {
        e.printStackTrace();
    }

    try {
        identityTransform.transform(new DOMSource(null), body.getPayloadResult());
    } catch (TransformerException e) {
        e.printStackTrace();
    }

        return true;
    }
} 
```

# git - git push non-master 到远程

> ID：15530915
> 
> 赞同：2
> 
> 时间：2013-03-20T17:41:50.993
> 
> 标签：git

在这被标记为重复之前，我想澄清一下，在谷歌搜索和尝试一天之后，我仍然在我开始的地方，所以这个问题是关于如何调试为什么我没有从其他类似问题中得到预期的结果。

我的仓库有一个“开发”分支，我正在尝试设置一个登台服务器，我可以将这个分支推送到该服务器进行测试。实时服务器已经设置了一个裸 repo 和 post-receive 挂钩，以将 master 分支检出到 web 根目录。它工作得很好，所以我开始以同样的方式设置登台服务器。我的问题是登台服务器上的 Web 根始终获取主分支。

根据我所读到的内容，这是**应该**对我有用的解决方案：接收后是

```
#! /bin/sh
GIT_WORK_TREE=/path/to/web/root git checkout -f 
```

我的本地仓库的配置有这个远程

```
[remote "staging"]
    url = path/to.git
    push = +develop:master 
```

这个想法是，当我运行`git push staging`我的本地开发分支时，我的本地开发分支被推送到远程主分支，并且该主分支被检出到 Web 根目录。

* * *

我尝试过的其他事情：

在适用的情况下，我尝试过使用和不使用前导 +s 和 -f 标志。

如果远程 repo 是问题，我删除了远程 repo 和 web root 并`git init --bare`从头开始运行

在我的本地配置中没有推送行，我更改了挂钩以签出开发分支

```
#! /bin/sh
GIT_WORK_TREE=/path/to/web/root git checkout -f develop 
```

以及在`git push staging develop`本地运行

我通过 SSH 连接到远程并`GIT_WORK_TREE=/path/to/web/root git checkout -f develop`从裸仓库运行。这导致了`Switched to branch 'develop'`，但是 web 根目录中的文件仍然反映了主文件。

在这一点上，我要么错过了一些小细节，要么我快疯了。我相信很多人都有这样的工作流程设置，你能告诉我我错过了什么吗？

* * *

**更新**

根据@VonCs 评论，我将分支名称添加回钩子并将远程本地配置设置为`push = +refs/heads/develop:refs/heads/develop`. 现在，当我推送时，我的本地开发分支将转到远程开发分支，并且在检查哈希后`git log`，我知道推送正在工作。但是，如果我然后运行`git status`返回是：

```
# On branch develop
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#       modified:   a/file/I/modified/locally 
```

所以钩子没有正确执行。如果我通过 SSH 运行 hooks/post-receive 文件的内容，它会正确检查并且我的登台站点很好。那么现在我如何确定为什么钩子不会执行以及它是否与同一个问题有关？

为了澄清，我的钩子目前看起来像：

```
#! /bin/sh
GIT_WORK_TREE=/path/to/web/root git checkout -f develop 
```

# javascript - 从 WinJS 发送邮件

> ID：15530916
> 
> 赞同：2
> 
> 时间：2013-03-20T17:41:54.773
> 
> 标签：javascript, windows-8, winjs, carriage-return

我在标准的 Windows 8 Javascript Store 应用程序中有以下代码：

```
var test = document.getElementById("testButton");
test.addEventListener("click", function () {
var mailto = new Windows.Foundation.Uri("mailto:?to=my.address@here.com" + "&subject=test" + "&body=Hello,<br>How are you?");
Windows.System.Launcher.launchUriAsync(mailto); 
```

我遇到的问题是，无论我做什么，我都无法在`Hello,`and之间获得回车`How are you?`。我试过`\n`& `\r\n`。我需要插入什么来获得回车？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T18:38:17.033

由于它是 URL，因此您必须使用 URL 编码字符：

```
var mailto = new Windows.Foundation.Uri("mailto:?to=my.address@here.com" + "&subject=test" + "&body=Hello,%0dHow are you?"); 
```

# java - 如何在 WSDL 中添加 xsd

> ID：15530918
> 
> 赞同：0
> 
> 时间：2013-03-20T17:42:01.097
> 
> 标签：java, web-services, soap, wsdl, axis2

我的要求是在 WebSphear 上创建一个网络服务。我想将我的 xsd 文件添加到 WSDL 中。为此，我在下面编写了我的 xsd 文件-

```
<xsd:element name="getAppDate" ></xsd:element>
    <xsd:element name="getAppDateResponce"></xsd:element>

   <xsd:complexType name="getAppDate">
  <xsd:sequence>
  <xsd:element name="appdate" type="xsd:string" minOccurs="0"></xsd:element>
  <xsd:element name="uuName" type="xsd:string" minOccurs="0"></xsd:element>
</xsd:sequence>
 </xsd:complexType>

<xsd:complexType name="getAppDateResponce">
 <xsd:sequence>
  <xsd:element name="return" type="xsd:boolean" minOccurs="0"></xsd:element>
 </xsd:sequence>
</xsd:complexType>
   </xsd:schema> 
```

现在我在下面为 JAX-WS 编写了一个接口——

```
 public interface BookAppointment {

String getAppDate(String date,String uuname);
boolean getAppDateResponce(String date,String uuname);
       } 
```

下一步：我正在执行 Java2WSDL 命令来生成 wsdl -

```
 java org.apache.axis.wsdl.Java2WSDL -o ..\appointmentbooking.wsdl -C C:\Users\px00395
   \IBM\rationalsdp\workspace\PeoplesoftWS\bin\servicecenter.xsd -l 
    http://localhost:9081/AxisServlet/services/appointmentbook  
    com.ubs.peoplesoft.BookAppointment 
```

但我收到消息：已指定为 C:\Users\px00395\IBM\rati onalsdp\workspace\PeoplesoftWS\bin\servicecenter.xsd。它不能再次指定为 com.ubs.peoplesoft.BookAppointment。请让我知道我在这里做错了什么以及如何将 xsd 添加到 WSDL 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:07:25.480

您可以**将**您的架构包含在 wsdl 中，例如

```
<include schemaLocation="C:\Users\px00395
   \IBM\rationalsdp\workspace\PeoplesoftWS\bin\servicecenter.xsd" /> 
```

或者您可以**导入**架构，如下所示：

```
<import namespace="mynamespace"
        schemaLocation="C:\Users\px00395
   \IBM\rationalsdp\workspace\PeoplesoftWS\bin\servicecenter.xsd" /> 
```

如果你在一个团队中工作，你最好使用一些本地服务器来托管你的模式，而不是本地文件系统。这样您就不必将 .xsd 同步并复制到所有开发人员的计算机上。

* * *

请参考 WSDL 2.0 规范以获得更详细的解释。

# javascript - 具有完整 JavaScript 支持的无头浏览器

> ID：15530921
> 
> 赞同：0
> 
> 时间：2013-03-20T17:42:07.753
> 
> 标签：javascript, python, automation, web-testing, webautomation

我一直在使用 HTMLUnit，它很好，但它不适用于所有站点，并且在测试新站点时，我总是不确定它是否可以工作。有没有“完整”的 JS 支持？就像真正的浏览器一样的东西？我可以接受它无法在 Java 上运行。Python也会很好。只要我可以将结果记录到我的 pgsql 数据库中，任何语言都可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:43:27.897

如果您正在测试 javascript，我建议您使用 javascript 测试框架，例如[Jasmine](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDIQFjAA&url=http://pivotal.github.com/jasmine/&ei=PPVJUZHrL8SPrge6zIDQCg&usg=AFQjCNF4Wr8sKnlkSNq0v1Cf61ywuJXNlQ&bvm=bv.44011176,d.bmk)或[Phantom.js](http://phantomjs.org/)。

# facebook - 使用 Facebook api 确定访问令牌的范围

> ID：15530932
> 
> 赞同：3
> 
> 时间：2013-03-20T17:42:42.823
> 
> 标签：facebook, facebook-graph-api

我想确定我拥有的访问令牌的范围。

[Access Token Debugger](https://developers.facebook.com/tools/debug/access_token/)为我提供了该信息，但我无法弄清楚使用的是什么 api。

我知道在前端你可以只调用 api，如果你已经有了范围，什么都不会发生，但我想在后端以编程方式进行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:42:42.823

如所述：[https ://developers.facebook.com/docs/howtos/login/debugging-access-tokens/#step1](https://developers.facebook.com/docs/howtos/login/debugging-access-tokens/#step1)

您可以使用

```
https://graph.facebook.com/debug_token?input_token=INPUT_TOKEN&access_token=ACCESS_TOKEN 
```

其中 access_token 是您的[应用访问令牌](https://developers.facebook.com/docs/concepts/login/access-tokens-and-types/)

# jsf - 在面板中包含换行符

> ID：15530934
> 
> 赞同：0
> 
> 时间：2013-03-20T17:42:48.380
> 
> 标签：jsf, escaping, newline, panel

如何在下面的输出文本中尽可能在面板中包含换行符？

```
<h:outputText value="&lt;br/&gt;" escape="false" /> 
```

这在面板中不起作用，因为面板没有`escape`属性。

我尝试包括`<br />`or `\n`，但这也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T18:02:28.500

在 JSF 中，`h:panelGrid`tag 用于生成 HTML 表格标签，将 JSF 组件按行列布局，从左到右，从上到下。例如，如果您想要以下内容：

```
<table>
<tbody>
<tr>
<td>
    Enter a number : 
</td>       
<td>
    <h:inputText id="number" value="#{dummy.number}" 
        size="20" required="true"
        label="Number" >
        <f:convertNumber />
    </h:inputText>
</td>
<td>
    <h:message for="number" style="color:red" />
</td>
</tr>
</tbody>
</table> 
```

你可以`h:panelGrid`像下面这样使用：

```
<h:panelGrid columns="3">

<h:outputText value="Enter a number :"/> 

<h:inputText id="number" value="#{dummy.number}" 
    size="20" required="true"
    label="Number" >
    <f:convertNumber />
</h:inputText>

<h:message for="number" style="color:red" />

</h:panelGrid> 
```

因此，`<br/>`在任何行中仅作为表数据添加没有任何意义，就像添加

```
 <h:outputText value="&lt;br/&gt;" escape="false" /> 
```

(or `<br/>`)in`h:panelGrid`也没有任何意义！

有关详细信息，您可以查看[此](http://www.mkyong.com/jsf2/jsf-2-panelgrid-example/)。

# xml - 在 xsd 验证期间将特殊符号视为文本

> ID：15530935
> 
> 赞同：0
> 
> 时间：2013-03-20T17:42:55.957
> 
> 标签：xml, tags, xsd

我有多个想要使用 XSD 验证的 XML 文件。问题是有人设计了这样的标签：

```
<name> Teststring <120> test <25> </name> 
```

我希望标签 <120> 和 <25> 在验证期间被视为文本 - 是否有可能在不修改 XML 的情况下使用 XSD？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:46:01.260

这不是有效的 XML。这些“标签”没有关闭，标签名称不能以数字开头。试图将无效的 XML 塞进 XML 验证器是从错误的角度攻击问题。修复 XML。

```
<name> Teststring &lt;120&gt; test &lt;25&gt; </name>
<name><![CDATA[ Teststring <120> test <25> ]]></name> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T17:46:35.953

使用 CDATA 语法

> <name><![CDATA[ TestString <120> test <25>]]> </name>

# internationalization - 在 Pyramid 中拥有 i18n-ed 电子邮件模板的最佳方式

> ID：15530941
> 
> 赞同：2
> 
> 时间：2013-03-20T17:43:16.940
> 
> 标签：internationalization, pyramid, chameleon

我想保持电子邮件的模板国际化。我默认使用 Pyramid 1.4 和 Chameleon。

我尝试过直接使用 TranslationString 作为 PageTextTemplate 的主体：

```
 default_email_body=r"""
Hello${salutation}${letter_comma}

... full text with several ${data.attributes} ...

Cordialment,
${sender.name}."""

    email_body_template = PageTextTemplate(_('proposed-email-body',
                                             default_email_body,
                                             mapping=params))
    email_body = email_body_template.render() 
```

但是`email_body`被分配了 msgid 而不是默认值，并且当我这样做时`python setup.py extract_messages`，不会自动插入默认文本。

我需要做一些特别的事情来连接我的翻译域吗？

有没有更好的方法来实现这一点？

## 一点上下文

我现实世界的要求是从几个对象创建一封电子邮件。用户导航到一个页面，该页面除了返回一个普通的 HTML 页面外，还会创建一封电子邮件，其中的文本会自动发送给审阅者，审阅者要么将其重新发送给客户端，要么将其拒绝。在这种情况下，对于电子邮件文本，i18n 有两个可能的要求：

1.  使用网站用户的语言，
2.  或使用收件人（客户）的语言

到目前为止，我们选择第一个，如果时间允许并且客户推动它，请执行第二个选项。

带有变色龙的i18n[金字塔文档](http://docs.pylonsproject.org/projects/pyramid/en/1.4-branch/narr/i18n.html#chameleon-template-support-for-translation-strings)仅指 ZPT 模板，而不是 TXT 模板。但是我们的电子邮件文本是纯文本。

因此，在如何为纯文本模板执行 i18n 的文档中存在空白。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T04:33:20.070

大多数这些问题都可以通过了解 Pyramid 的[i18n 文档](http://docs.pylonsproject.org/projects/pyramid/en/1.4-branch/narr/i18n.html#chameleon-template-support-for-translation-strings)来解决。

几件事。首先，Chameleon 环境需要配置一个定位器。当您通过调用使用默认的 Chameleon 设置时，Pyramid 会为您执行此操作`render('templates/my_email.pt', opts, request=request)`。如果您直接使用 Chameleon 的 API，我认为不会找到本地化程序。此外，您还需要一个语言环境协商者来确定本地化人员应该使用的语言环境。有一个默认的协商器，但如果您在请求之外执行此操作，则可能无法正确配置用户的区域设置。

无论如何，我的建议是坚持使用 Pyramid 的渲染器，而不是直接使用 Chameleon，因为你失去了 Pyramid 在这方面为你做的很多有用的配置。

If you cannot use one of Pyramid's renderers for some reason, the i18n docs I linked show how the underlying system works. You need a `localizer`. Pyramid uses gettext. You then create a `TranslationString` instance and invoke `result = localizer.translate(ts)`. This is all happening behind the scenes using the default renderers.

# matlab - 将 2 matlab fig 合并为 1 - 如何使用 copyobj 使用颜色、线宽等

> ID：15530943
> 
> 赞同：2
> 
> 时间：2013-03-20T17:43:23.540
> 
> 标签：matlab, plot

我想加载 2 个图形并将它们合并为一个。

我知道我可以通过从一个图形复制粘贴到另一个图形来做到这一点，但是通过脚本？

我看到了[这个](https://stackoverflow.com/questions/13276009/load-two-matlab-fig-figures-and-merge-them-in-one-file)，但它产生了 2 个数字。我怎样才能将它们合并为一个（比如使用 hold on）？另外，我可以从一个图形更改轴尺寸吗？只使用其尺寸的一部分吗？还有，如何改变颜色、样式等？

- - 更新 - - - - - - - - - - - - - -

我现在的代码是：

```
fig1=open('fig13.fig');
fig2=open('fig14.fig');

ax1=get(fig1,'Children');
ax2=get(fig2,'Children');

for i = 1 : numel(ax2) 

   ax2Children = get(ax2(i),'Children');
   tri=get(ax1(i),'Children');
   hold on;
   first=copyobj(tri, ax1(i));
   second=copyobj(ax2Children, ax1(i));

end

set(first,'color','g','marker','circle');
set(second,'color','b');
legend(first, {'first'}, 'Location','NorthWest', 'Color','g');
legend(second, {'second'}, 'Location','NorthWest', 'Color','b'); 
```

1）如何指定线宽、标记等。因为使用 set(first,'marker','circle') 例如不起作用。

2）例如，我怎样才能只使用 fig14 的轴尺寸的一部分。例如（x 轴）的 fig13 是（-8,4），而在 fig14 中是（-2 ,10）。如何将图合并到（-8,8）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:43:58.687

您必须使用：

设置（第一，'颜色'，'g'，'标记'，'o'）；

至于轴，您必须从原始代码中生成新图形。

# mysql - MySQL查询查找每个部门最年轻员工的姓名和年龄

> ID：15530947
> 
> 赞同：1
> 
> 时间：2013-03-20T17:43:33.403
> 
> 标签：mysql, database

鉴于此架构：

```
Emp(eid: integer,ename: string,age: integer,salary: real)
Works(eid:integer,did: integer,pct_time: integer)
Dept(did:integer,budget: real,managerid:integer) 
```

我想出了这个：

```
SELECT w.did, MIN(e.age) AS Youngest
FROM Works w INNER JOIN Emp e USING (eid)
GROUP BY w.did 
```

其中列出了每个部门的最小年龄。但是，我不知道如何获取每个列出年龄的人的姓名。我不能只将 ename 添加到此查询中的 SELECT 列表中，因为这会返回错误的名称。

我刚刚尝试过这样的事情，但它不起作用。

```
SELECT e2.ename, e2.age, w2.did
FROM Emp e2 INNER JOIN Works w2 USING (eid),
    (
    SELECT w.did, MIN(e.age) AS Youngest
    FROM Works w INNER JOIN Emp e USING (eid)
    GROUP BY w.did
    ) MyTable
WHERE e2.eid = eid AND e2.age = Youngest 
```

它列出了同一部门的多人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:47:00.260

这应该这样做。您需要创建一个具有 did 和 minimum age 的 subQuery，然后使用它来加入您现有的 emp 表

```
SELECT w.did, ename, e.age AS Youngest
FROM Works w 
    INNER JOIN (SELECT did, MIN(age) minage
            FROM emp e INNER JOIN works w ON e.eid = w.eid
            GROUP BY did) ea
    INNER JOIN Emp e ON w.did = ea.did AND e.age = ea.minage 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T18:29:05.577

尝试：

```
SELECT e2.ename, e2.age, w2.did
FROM Emp e2 
JOIN Works w2 USING (eid)
JOIN (SELECT w.did, MIN(e.age) AS Youngest
      FROM Works w 
      INNER JOIN Emp e USING (eid)
      GROUP BY w.did) sq
  ON w2.did = sq.did and e2.age = sq.Youngest 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-13T15:08:25.770

试试这个来显示来自每个本地的最年轻的员工：

`select p.Nativeplace, p.Name, p.Dobirth from personal p having p.Dobirth=(select max(Dobirth) from personal p2 where p.Nativeplace=p2.Nativeplace group by p2.Nativeplace);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-30T10:30:15.353

我认为这会起作用：

```
SELECT e1.ename, e1.age, FROM Emp as e1, (SELECT eid, MinAge.did, MinAge.minage FROM Works, (SELECT did, MIN(age) as minage FROM Emp, Works where Emp.eid = Works.eid GROUP BY did) as MinAge WHERE Works.did = MinAge.did) as temp WHERE e1.eid = temp.eid AND e1.age = temp.minage; 
```

# spring - spring cron作业表达式帮我理解

> ID：15530952
> 
> 赞同：2
> 
> 时间：2013-03-20T17:43:49.120
> 
> 标签：spring, cronexpression

Spring java cron 作业。

我有以下 spring cron 工作表达式，但我不明白这是什么意思

请看一下，`*/15 * 0,2-23 * * *`我只了解每 15 秒后的第一部分？还有什么 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T18:14:36.823

此[链接](http://javahunter.wordpress.com/2011/05/05/cronscheduler-in-spring/)对字段及其含义有一些很好的描述。

1.  第一个是秒，就像你说的，你明白这意味着每 15 秒。
2.  第二个字段是分钟，它是每小时的每一分钟。
3.  第三个字段是小时，它建议第 0 小时（午夜）和 2-23 小时。这基本上是每小时，但凌晨 1 点。
4.  其余字段不限制任何内容，因此它将是每天……其余时间。

所以我们在这里看到的是一个表达式，它将在凌晨 2 点和第二天凌晨 1 点之间（连续 23 小时）每 15 秒安排一次事件。从凌晨 1 点到凌晨 2 点，此事件不会发生。这将无限期地每天发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-20T19:09:18.487

Spring cron 序列是 6 个字段的序列，每个字段由空格分隔。从左到右的描述如下“秒、分、时、日、月、日”。

示例模式：

```
"0 0 * * * *" = the top of every hour of every day.
"*/10 * * * * *" = every ten seconds.
"0 0 8-10 * * *" = 8, 9 and 10 o'clock of every day.
"0 * 6,19 * * *" = 6:00 AM and 7:00 PM every day.
"0 0/30 8-10 * * *" = 8:00, 8:30, 9:00, 9:30 and 10 o'clock every day.
"0 0 9-17 * * MON-FRI" = on the hour nine-to-five weekdays
"0 0 0 25 12 ?" = every Christmas Day at midnight 
```

这个[url](http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/support/CronSequenceGenerator.html)很有帮助，也可以参考 spring [docs](https://docs.spring.io/spring/docs/current/spring-framework-reference/html/scheduling.html)。

# ios - UILabel 内容未刷新

> ID：15530956
> 
> 赞同：0
> 
> 时间：2013-03-20T17:43:55.440
> 
> 标签：ios, objective-c

我正在调用 json/rest 服务并将返回的数据传递给屏幕上的 UILabel。我的屏幕由一个静态分组表组成，其中包含许多带有标题和详细信息的单元格。使用返回的内容设置 uilabel.text 后，屏幕不会显示该值，但如果我点击 UILabel 则会显示该值。似乎我缺少刷新屏幕的命令。在回调块中从 json/rest 服务接收数据后，从 viewDiDLoad 方法调用下面的代码。

```
 [MEUser retrieveLoggedUserDetails:^(MEUser *meUser, NSError *error) {
        if (meUser) {
            dispatch_async(dispatch_get_main_queue(), ^{
                self.email.text = meUser.email;
                self.firstName.text = meUser.firstName;
                self.lastName.text = meUser.lastName;
                self.phone.text = meUser.phone;

            });
        }
    }]; 
```

任何帮助将不胜感激。

非常感谢，马科斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:48:59.857

设置文本后试试这个。

```
[self.firstname setNeedsDisplay]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:48:24.257

答案在于您的代码本身。当您 dispatch_async 时，{ } 中的代码不会快速执行。相反，您的 viewDidLoad 将立即返回。有时之后，会出现以下行：

```
self.firstname.text = meUser.firstname; 
```

根据您的描述，我猜这可能会发生：当您单击（点击）标签时，您正在强制主队列清除其待处理的任务，其中之一可能是上面的代码。所以它将值放入标签中，并将其显示给您。

您需要确定您希望标签何时刷新，然后只期望它保存更新的文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T00:43:12.273

我最终将 UILabel 组件切换到 UITextfield 并且神秘地它完美地工作。

# wcf - EndpointDispatcher 处的 WCF 和 ContractFilter 不匹配

> ID：15530958
> 
> 赞同：2
> 
> 时间：2013-03-20T17:43:58.403
> 
> 标签：wcf, wcf-binding

我得到了以下错误..有什么问题？

由于 EndpointDispatcher 的 ContractFilter 不匹配，接收方无法处理带有 Action '' 的消息。这可能是因为合约不匹配（发送方和接收方之间的操作不匹配）或发送方和接收方之间的绑定/安全不匹配。检查发送方和接收方是否具有相同的合同和相同的绑定（包括安全要求，例如消息、传输、无）。

1.  WSModules.svc

    ```
    <%@ ServiceHost language="C#" Service="WS.Modules.ServiceContracts.WSModules"%> 
    ```

2.  WS模块

    ```
    namespace WS.Modules.ServiceContracts
    {
        [ServiceBehavior(AddressFilterMode = AddressFilterMode.Any)]
        public class WSModules : IWSModules
        {  
            public string XmlData(string id)
            {
                return "You requested product" + id;
            }
        }
    } 
    ```

3.  IWS 模块

    ```
    namespace WS.Interfaces.ServiceContracts
    {
            [ServiceContract]
            public interface IWSModules
            {
                    [OperationContract]
                    [WebGet(UriTemplate = "XmlData?id={id}")]
                    string XmlData(string id);
            }
    } 
    ```

4.  网页配置

    ```
    <system.serviceModel>   
    <behaviors>
    <serviceBehaviors>       
            <!-- ### WSModules -->
            <behavior name="WSModulesBehavior">
              <serviceMetadata httpGetEnabled="True" />
              <serviceDebug includeExceptionDetailInFaults="true" />
              <serviceThrottling maxConcurrentCalls="24" maxConcurrentSessions="24" />
            </behavior>
          </serviceBehaviors>
          <endpointBehaviors>
            <behavior name="web">
              <webHttp/>
            </behavior>
          </endpointBehaviors>      
        </behaviors>
    <services>   
          <!--  ### WSModules Service-->
          <service behaviorConfiguration="WSModulesBehavior" name="WS.Modules.ServiceContracts.WSModules">
            <endpoint address="" binding="webHttpBinding" contract="WS.Interfaces.ServiceContracts.IWSModules"/>       
                    <host>
                      <baseAddresses>
                        <add baseAddress="http://xxx.xxx.xxx/commonwebsol/wswsdl" />
                      </baseAddresses>
                    </host>
                  </service>
                </services>
                <serviceHostingEnvironment multipleSiteBindingsEnabled="True"/>
              </system.serviceModel> 
    ```

5.  我打开浏览器并输入 [http://xxx.xxx.xxx/commonwebsol/WSWSDL/WSModules.svc](http://xxx.xxx.xxx/commonwebsol/WSWSDL/WSModules.svc) - 工作正常。我得到了“svcutil.exe [http://xxx.xxx.xxx/commonwebsol/WSWSDL/WSModules.svc?wsdl](http://xxx.xxx.xxx/commonwebsol/WSWSDL/WSModules.svc?wsdl) 然后如果我点击” [http://xxx.xxx.xxx/commonwebsol/WSWSDL/WSModules.svc? wsdl](http://xxx.xxx.xxx/commonwebsol/WSWSDL/WSModules.svc?wsdl) " 我得到了 xml

6.  但是，如果我在浏览器中输入 [http://xxx.xxx.xxx/commonwebsol/WSWSDL/WSModules.svc?XmlData?id=123](http://xxx.xxx.xxx/commonwebsol/WSWSDL/WSModules.svc?XmlData?id=123) 我收到以下错误...

    ```
    <Text xml:lang="en-US">The message with Action '' cannot be processed at the receiver, due to a ContractFilter mismatch at the EndpointDispatcher. This may be because of either a         contract mismatch (mismatched Actions between sender and receiver) or a binding/security         mismatch between the sender and the receiver. Check that sender and         receiver have the same contract and the same binding (including security requirements, e.g. Message, Transport, None).</Text> 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-18T05:07:50.517

更改您的端点属性，如下所示

```
endpoint address="" binding="webHttpBinding" behaviorConfiguration="web" contract="WS.Interfaces.ServiceContracts.IWSModules" 
```

这将正常工作。

# bash - 是否有命令行选项将 GCC 结果传送到控制台？还是重击？

> ID：15530963
> 
> 赞同：0
> 
> 时间：2013-03-20T17:44:15.940
> 
> 标签：bash, gcc, command-line, pipe

关于标题的说明：我想知道是否有`gcc`选项或 bash 选项可以将结果输出到控制台而不是文件？

我对 bash 脚本不是很精通，我怀疑肯定有答案……我已经搜索了 GCC 手册，但找不到任何确定的东西。

**例子**

`~$ clang ~/program_name.c -S -emit-llvm -o -` 将中间表示输出到控制台。

**我想出的最好的是：**

`~$ gcc -Wall program_name.c -o program_name.o && nano program_name.o`它有效，但实际打印会很好。

* * *

如果*大多数* `gcc`编译都可以打印到控制台，那就太好了... from `gcc -Wall program_name.c`to `gcc -fdump-tree-ssa program_name.c`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T20:56:16.680

这似乎适用于 Linux：

```
g++ -Wall program_name.c -o /dev/fd/1 
```

# java - 获取哈希图中所有元素的最佳方法是什么？

> ID：15530966
> 
> 赞同：0
> 
> 时间：2013-03-20T17:44:19.013
> 
> 标签：java, list, map, hashmap

我知道我可以自己使用`.values()`和`.keyset()`获取各自的键/值（来自哈希图）。我正在尝试将它们放在一起并在 get 方法中返回。

我可以`entryset()`用来获取一个条目，但是在循环中执行它以生成一个条目集的数组列表然后返回它吗？不确定这是否是最好的方法。有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T17:47:02.133

该[`entrySet()`](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html#entrySet%28%29)方法已经返回映射中所有条目（键/值对）的集合，而不仅仅是单个条目。我认为您只想调用一次并使用它返回的集合，而不是在循环中调用它并填充列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T17:53:40.987

entrySet() 返回 HashMap 的所有条目的 Set。

```
import java.util.HashMap;

import java.util.Set;

public class HashMapEntrySet {

public static void main(String[] arr) {

/* Create object of HashMap */

HashMap<Integer, String> obHashMap = new HashMap<Integer, String>();

/* Strore value in HashMap */

obHashMap.put(new Integer(1), "AAA");

obHashMap.put(new Integer(2), "BBB");

obHashMap.put(new Integer(3), "CCC");

obHashMap.put(new Integer(4), "DDD");

obHashMap.put(new Integer(5), "EEE");

/* Create a set of keys of hashmap */

Set obEntrySet = obHashMap.entrySet();

System.out.println("Set of entries : " + obEntrySet); } } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T17:48:23.563

使用获取 中的一组 ALL`entrySet()`条目。如果需要进行其他操作，您可以返回整个集合或对其进行迭代。`Map``Map`

# mysql - 在终端mac中打开mamp mysql

> ID：15530971
> 
> 赞同：0
> 
> 时间：2013-03-20T17:44:28.847
> 
> 标签：mysql, terminal, mamp

我试图陷入 MySQL 中，但似乎在第一个障碍中落下。

我已经在我的 Mac 上设置并运行了 mamp，当我进入终端并键入`mysql`以尝试调出“欢迎使用 MySQL 监视器”介绍时，我收到以下错误：

```
-bash: mysql: command not found 
```

我认为这是因为我从未告诉过它要找到 mysql 或将其链接到 mamp，但我不确定这是否正确，这里还有什么我遗漏的吗？只是为了清楚我打开终端等待它加载并输入命令，没有别的。

我的 mamp/mysql 文件夹位于 applications/mamp/db/mysql

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T07:19:59.223

您需要从正确的位置初始化它。首先确保您从正确的位置找到文件，然后按照以下几行键入一些内容：

```
/Applications/MAMP/db/mysql -uroot -proot 
```

*或者，如果您想通过键入mysql*来调用它，也可以设置一个别名。

# javascript - Breeze 是否消除了单页应用程序中对 DTO 的需求？

> ID：15530974
> 
> 赞同：5
> 
> 时间：2013-03-20T17:44:32.333
> 
> 标签：javascript, design-patterns, dto, breeze, single-page-application

我正在构建我的第一个 SPA，并且我已经为我的每个实体构建了 DTO，但我刚刚发现轻而易举，它似乎负责将您的更改序列化为最小包以优化更新/添加/等等

我构建 DTO 的原因是为了“扁平化”我的数据并限制我将多少数据放在网络上，但我想知道如果 Breeze 处理它，我是否还需要这个开销。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T21:03:28.523

DTO 是有原因的。“扁平化数据”*不是*其中之一。“限制我在网络上传输的数据量”也不是。

Breeze 在对象图方面做得很好。想象一下为客户发送 100 个订单。您不想在每个订单 DTO 上重复客户名称。使用 Breeze，您可以查询客户订单（使用“扩展”），您会获得一份客户副本和与之配套的订单。

```
var 查询 = 新微风.EntityQuery.from('客户')
           .where('Id', 'eq', 42)
           .expand('订单');

```

另一方面，如果您只需要客户名称列表，请使用“投影”：

```
var query = new browse.EntityQuery.from('Customers') // 所有客户
           .select('id, companyName'); // 投影到一个匿名的 2-property 对象中

```

偶尔使用服务器端 DTO 来构建您无法从客户端轻松创建的东西（例如，Customer-and-total-current-year-order-dollars）。

关键是您可以混合 DTO、投影和实体查询以满足您的需求。您不必一路走下去（在我看来）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-30T08:16:59.757

我们目前正在评估从 Knockout 到 Angular 和 Breeze 的更改，以摆脱我们编写的大部分 DTO 和 DTO 映射代码（服务器和客户端代码）。我们所做的不是公开 DAO，而是为所有实体创建 DTO。最后发生的事情是，在许多情况下（不是全部）我们有看起来 90% 与数据库对象相似的类。这使我们得出这样的结论：在我们的案例中，DTO 没有意义，我们所花费的开销是浪费精力，我们需要用更好的方法来摆脱这个问题。所以必须开始一轮重构:-)

由于这里我们有两位专家（@John 和@Ward）在一个地方，我也将借此机会回答这个问题，并进一步提出一个关于实施的问题，到目前为止我还没有完全回答我自己，也许是 John Ward 可以澄清这一点，因为我认为如果仍然需要 DTO，这是问题的重要方面。

看着微风，它似乎对避免大量 DTO 和 DTO 映射代码有很大帮助，我完全同意使用 DTO 来减少与微风一起通过电线的使用是没有意义的，因为这是完美处理的事情如上所述，通过微风在客户端进行查询。这是我可以完全确认并且有道理的事情。像我们一样创建许多不同的 DTO 类也不是最好的方法。Breeze 用更少的代码做得更好。

使用 DTO 和 DTO 映射代码来分离关注点我仍然认为是一个好主意和原则，但它也带来了很多开销，在许多情况下可能不需要。因此，要利用微风，您当然可以在客户端创建 DTO 并写入/生成元数据，但这不是微风的基本理念。你可以这样使用它，但是你在 DAO 上停留的时间越长，你需要编写的代码就越少，你的项目就越快。但是，breeze 允许您这样做，因此该框架也可以与 DTO 一起使用，但这并不是编写 BREW 的基本思想。两者的混合（DAO 和 DTO 的暴露）可能是最好的方法。

但是什么时候使用 DTO 呢？

*   安全
*   复杂逻辑（计算）或当您因为过于复杂而无法使用简单的 CRUD 方法时，您不会或不能（安全）在客户端公开。

在安全的情况下，我实际上不是 100% 确定，这就是我在这里写信并想问两位专家的原因。我们在服务器端使用 EF，最好的主意是在服务器端使用投影以确保安全。但是怎么做呢？

我提出这个问题是因为我认为如果仍然需要 DTO，能够回答这个问题是最重要的。

我们以 EF 的以下代码结束（在我们的评估演示中）：

```
private IQueryable<News> RestrictFields(IQueryable<News> query)
    {
        return query
            .ToList() // This seemd to be needed, otherwhise I cannot use new News()
            .Select(t => new News()
                {
                    Id = t.Id,
                    Text = t.Text,
                    Title = t.Title,
                    Date = t.Date
                })
            .AsQueryable();
    } 
```

正如您在上面看到的，我们有一个 EF 查询。所以我们尝试的第一个方法就是使用 new News() 进行投影。这不起作用，因为 EF 不允许您在投影中使用相同的 DAO 类，只能使用 DTO 对象或匿名对象。所以我们使用了 ToList() 和 AsQueryable() 的解决方法。但这似乎不正确，而且很可能来自客户端的查询参数不会发送到数据库，并且可能因此某些参数无法正常工作，例如“扩展”。

那么出于安全原因在服务器端进行投影的最佳方法是什么，以便最终真正摆脱对 DTO 的需求？@John：我看到了你的帖子，你说你在演示项目中为你的培训课程（Angular 和 Breeze）使用了扬声器上的投影，但我找不到它在哪里实现。

在这里我真的被困住了，这对我来说是了解是否仍然需要 DTO 以及它如何与 Breeze 完美配合的缺失环节。

我希望我的回答有助于回答您的一些问题，此外，我希望它还为您 Jake 提供了一些非常重要的有关使用微风以及是否仍然需要 DTO 的链接。

亲切的问候，

克里斯

# php - kirby .htaceess 和 GET 变量

> ID：15530976
> 
> 赞同：2
> 
> 时间：2013-03-20T17:44:37.723
> 
> 标签：php, apache, .htaccess, kirby

我目前正在[Kirby](http://getkirby.com/)建立一个画廊，并且有一个有效地具有两种模式的专辑页面：1）画廊列表，显示所有项目。2) 单幅图像。我正在传递一个`GET`像这样的变量：

```
/gallery/album-name?p=03.jpg 
```

我真正想要的是这样的网址：

```
/gallery/album-name/03.jpg 
```

Kirby 已经在其默认`.htaccess`文件中进行了一些 url 重写，如下所示：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*) index.php [L] 
```

`/index.php/gallery/album-name?p=03.jpg`它从这个删除部分重写了 url `index.php`。

现在，我确实认为我可以简单地让它重写任何具有如下 get 变量的 URL：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)/([A-Za-z0-9-]+)?$ index.php?p=$1 [L] 
```

但这似乎不起作用。

我的问题是：这可以做到吗？如果是这样，该`GET`变量是否仍可用于我的脚本？

非常感谢！

* * *

我目前的完整重写规则

```
<IfModule mod_rewrite.c>

RewriteEngine on
RewriteBase /

#//www. vs //
RewriteCond %{HTTPS} !=on
    RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
    RewriteRule ^ http://%1%{REQUEST_URI} [R=301,L]

# block text files in the content folder from being accessed directly
RewriteRule ^content/(.*)\.(txt|md|mdown)$ error [R=301,L]

# block all files in the site folder from being accessed directly
RewriteRule ^site/(.*) error [R=301,L]

# block all files in the kirby folder from being accessed directly
RewriteRule ^kirby/(.*) error [R=301,L]

# make panel links work
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^panel/(.*) panel/index.php [L]

# make gallery links work
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^gallery/(.*)/([A-Za-z0-9-]+\.jpg)?$ index.php?p=$2 [L]

# make site links work
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*) index.php [L]

</IfModule> 
```

这适用于一切，但我在（例如）这个网址上得到一个 404：`/gallery/my-gallery-name/01.jpg`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:49:57.730

试试这个，它会工作

```
RewriteRule ^our-wedding/(.*)$ index.php?p=$1 [L] 
```

现在您可以通过以下方式访问它

```
/gallery/our-wedding/03.jpg 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T21:29:46.930

你[`RewriteRule`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)有一个由两部分组成的[正则表达式](http://httpd.apache.org/docs/current/rewrite/intro.html#regex)

```
^(.*)/([A-Za-z0-9-]+)?$
  |    |
  $1   $2 
```

`$1`是图库部分，`$2`是可选的图片部分。无论您需要什么，您都可以只使用其中一个或两个部分。如果你只想使用图片部分，你必须`$2`在你的重写规则中使用

```
RewriteRule ^(.*)/([A-Za-z0-9-]+)?$ index.php?p=$2 [L] 
```

虽然，您的图像部分正则表达式*不*匹配`03.jpg`。如果要匹配，则必须`.`在字符类中包含一个点`[...]`或为其添加扩展名

```
[A-Za-z0-9-]+\.jpg 
```

# grammar - ANTLR 4 java.g4 -> 奇怪的语法规则

> ID：15530981
> 
> 赞同：1
> 
> 时间：2013-03-20T17:44:46.437
> 
> 标签：grammar, lexer, antlr4

这是我在 java.g4 中看到的规则之一：

DecimalLiteral : ('0' | '1'..'9' '0'..'9'*) IntegerTypeSuffix? ;

为什么不这样写：

DecimalLiteral : ('0'..'9'+) IntegerTypeSuffix? ;

有什么我想念的吗？感谢您的反馈意见

问候菲利普弗兰克森

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T17:59:01.683

目的是要有`0`a ，但所有其他整数都以be a`DecimalLiteral`开头。`0``OctalLiteral`

我更喜欢使用这样的一对规则：

```
OctalLiteral : '0'+ [1-7] [0-7]* IntegerTypeSuffix?;
DecimalLiteral : [0-9]+ IntegerTypeSuffix?; 
```

然后将无效八进制整数的验证（这对规则仍将作为 a 接受`DecimalLiteral`）推迟到解析过程的后续步骤。

# sql-server-ce - 使用 Sync Framework 2.1 的 SQL Server Compact Edition 到 SQL Azure 同步

> ID：15530983
> 
> 赞同：0
> 
> 时间：2013-03-20T17:44:47.607
> 
> 标签：sql-server-ce, azure-sql-database, microsoft-sync-framework

需要使用 Sync Framework 2.1 将 SQL Server Compact Edition 同步到 SQL Azure 同步的示例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T23:58:55.697

查看框架附带的文档，其中包含演练/教程。

这是在线版本：[教程：同步 SQL Server 和 SQL Server Compact](http://msdn.microsoft.com/en-us/library/ee617382.aspx)

示例应用程序：

[数据库同步：SQL Server 和 SQL Compact 2 层](http://code.msdn.microsoft.com/Database-Sync-SQL-Server-de6c8ff8)

[数据库同步：SQL Server 和 SQL Compact N 层与 WCF](http://code.msdn.microsoft.com/Database-Sync-SQL-Server-7e88adab)

# html - 使用 additionalType 模式道具

> ID：15530985
> 
> 赞同：1
> 
> 时间：2013-03-20T17:44:47.957
> 
> 标签：html, schema.org

我对 additionalType 属性有疑问。我想知道两件事。首先，我在这两个示例中都正确编码。其次，最好不要使用它，而是在每个实例中简单地使用不同的类型。例如，本地业务信息每页至少重复 4 次，我每次都可以简单地使用不同的类型。与所提供服务的描述相同。任何意见是极大的赞赏。

```
<section itemscope itemtype="http://schema.org/LocalBusiness">
    <link itemprop="additionalType" href="http://schema.org/SportsActivityLocation"/>
    <link itemprop="additionalType" href="http://schema.org/ExerciseGym"/>
    <header>
        <h5 class="Bold DarkBlue TextCenter MyriadFont"><span class="DarkRed" itemprop="telephone">Call 201-230-2036</span><br />
        </header>
        <span itemprop="name">Martial Arts School Name</span><br />
        <div itemprop="address" itemscope itemtype="http://schema.org/PostalAddress">
            <span itemprop="streetAddress">24 Bortker Street</span>
            <span itemprop="addressLocality">Brentwood</span>,
            <span itemprop="addressRegion">Ca</span>
            <span itemprop="postalCode">07565</span>
        </div>
    </h5>
    <br />
    <br />
</section>

<section itemscope itemtype="http://schema.org/LeisureTimeActivity">
    <link itemprop="additionalType" href="http://schema.org/AnaerobicActivity"/>
    <link itemprop="additionalType" href="http://schema.org/StrengthTraining"/>
    <header>
        <h5 itemprop="BusinessFunction" class="DarkBlue MyriadFont">Try These Martial Arts Programs FREE for 30 Days:</h5>
    </header>
    <br />
    <div class="TextNormal" style="padding-left:50px;">
        <hgroup>
            <h1 class="Bold" itemprop="BusinessFunction" >Gracie Brazilian Jiu-Jitsu</h1>
            <p>Learn the single most effective self-defense system on Earth (and the official hand-to-hand combat system of the U.S. Military) from a Gracie-trained Black Belt with multiple champion titles ... Click Here For The Best <a itemprop="URL" href="//www.martialarts.com/brazilian-jiujitsu.html" class="Bold DarkRed"><u> BJJ In Broter County CA</u></a></p>
            <br /><br />
        </hgroup>
    </div>
</section> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-16T18:18:26.863

有关使用附加类型的说明，请参阅[嵌套模式](https://stackoverflow.com/questions/13031826/nesting-schemas#answer-13032625)。它基本上像 itemtype 一样工作。

# apache-flex - 如何设置 Spark DataGrid 的标题样式

> ID：15530986
> 
> 赞同：2
> 
> 时间：2013-03-20T17:44:48.467
> 
> 标签：apache-flex, flex-spark

如何更新 Spark DataGrid 中标题部分的外观？这是一个如何设置 Spark DataGrid 的标题背景颜色、标题文本颜色、列分隔符和排序箭头指示器符号颜色的社区 wiki 帖子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T18:38:10.620

我在网上找到了一些关于如何设置 Spark DataGrid 标头样式的示例，但不是按照我所描述的方式。所以这就是我的做法。

**MXML**：

```
<s:DataGrid /> 
```

**CSS**：

```
 s|DataGrid {
        symbolColor:#FF0000; /* defines the sort indicator color */
    }

    s|GridItemRenderer {
        color:#0000FF;       /* defines the header text color */
        chromeColor:#00FF00; /* defines the header background color */
    } 
```

就是这样。嗯，不完全是。GridItemRenderer 使用渐变。如果您不想要这些，除了上述之外，您还必须做一些额外的工作。

**第 II 部分**
要删除渐变，我们必须创建两个新的皮肤类。基于 spark.skins.spark.DataGridSkin 的新数据网格皮肤和基于 spark.skins.spark.DefaultGridHeaderRenderer 的新数据网格标题皮肤。第一个皮肤扩展了 DataGridSkin。第二个皮肤是 DefaultGridHeaderRenderer 的副本。

**MXML**：

```
<s:DataGrid skinClass="view.skins.AbstractDataGridSkin"/> 
```

**抽象数据网格皮肤**：

```
<?xml version="1.0" encoding="utf-8"?>
<spark:DataGridSkin 
    xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" 
    xmlns:mx="library://ns.adobe.com/flex/mx"
    xmlns:fb="http://ns.adobe.com/flashbuilder/2009"
    xmlns:spark="spark.skins.spark.*" 
    xmlns:skins="view.skins.*"
    >

    <fx:Declarations>
        <fx:Component id="headerRenderer">
            <skins:AbstractDataGridHeaderSkin />
        </fx:Component>

    <!--- Change the look of the column separator  -->
    <fx:Component id="columnSeparator">
        <s:Line>
            <s:stroke>
                <s:SolidColorStroke color="0xA6A6A6" weight="1" caps="square"/>
            </s:stroke>
        </s:Line>
    </fx:Component>

    <!--- Defines the look of the header column separator -->
    <fx:Component id="headerColumnSeparator">
        <s:Line>
            <s:stroke>
                <s:SolidColorStroke color="0x00FF00" weight="1" caps="square" />
            </s:stroke>
        </s:Line>
    </fx:Component>
    </fx:Declarations>
</spark:DataGridSkin> 
```

此类指向新的 DataGridHeaderSkin。

**AbstractDataGridHeaderSkin**：

DefaultGridHeaderRenderer 中有很多代码我不想粘贴到这个示例中，所以我只展示更改的内容。

首先删除除“第 2 层填充”之外的所有 Rect 层。接下来，将“第 2 层填充”更新为纯色填充，如下所示：

```
<s:GridItemRenderer minWidth="21" minHeight="21"
                xmlns:fx="http://ns.adobe.com/mxml/2009" 
                xmlns:s="library://ns.adobe.com/flex/spark" 
                xmlns:mx="library://ns.adobe.com/flex/mx">

<!-- ...original code here.. -->

<!-- layer 2: fill -->
<!--- @private -->
<!---  Set left and right to -1 to fill out header width 
<s:Rect id="fill" left="0" right="0" top="0" bottom="-1"> -->
<s:Rect id="fill" left="-1" right="-1" top="0" bottom="0">
    <s:fill>
        <s:SolidColor color="0xFFFFFF" color.hovered="0xBBBDBD" color.down="0xAAAAAA" alpha="1" >   
        </s:SolidColor>
    </s:fill>
</s:Rect>

<!-- ...original code here.. -->

</s:GridItemRenderer> 
```

我们还必须更新 sortIndicatorArrow 以从那里删除梯度。

```
<fx:Component id="defaultSortIndicator">
    <s:Path data="M 3.5 7.0 L 0.0 0.0 L 7.0 0.0 L 3.5 7.0" implements="spark.components.gridClasses.IGridVisualElement">
        <fx:Script>
            <![CDATA[
                import spark.components.DataGrid;
                import spark.components.Grid;

                /**
                 *  @private
                 */
                public function prepareGridVisualElement(grid:Grid, rowIndex:int, columnIndex:int):void
                {
                    const dataGrid:DataGrid = grid.dataGrid;
                    if (!dataGrid)
                        return;

                    const color:uint = dataGrid.getStyle("symbolColor");
                    arrowFill.color = color;
                }
            ]]>
        </fx:Script>

        <s:fill>
            <s:SolidColor id="arrowFill" color="0" />
        </s:fill>
    </s:Path>
</fx:Component> 
```

就是这样。

**注意**：如果您使用镀铬颜色，它会转换标题填充背景。您可以将填充添加到排除项（更新 updateDisplayList 方法），也可以像这样设置填充 alpha 值。

```
<!-- layer 2: fill -->
<!--- @private -->
<!---  Set left and right to -1 to fill out header width 
<s:Rect id="fill" left="0" right="0" top="0" bottom="-1"> -->
<s:Rect id="fill" left="-1" right="-1" top="0" bottom="0">
    <s:fill>
        <s:SolidColor alpha="1" 
                      alpha.hovered=".95"
                      alpha.down="1"/>
    </s:fill>
</s:Rect>

or add this to updateDisplayList and set the colors on the fill (chromeColor would not need to be set then)
var exclusions:Array = [fill, labelDisplay, sortIndicatorInstance]; 
```

在某些时候，这些常见的样式有望在 Spark DataGrid 上可用。Spark 可以更灵活地定义组件的外观和感觉，这很好，但随后将样式值硬编码到 Flex SDK 附带的默认皮肤类中。现在由开发人员来查找和修改这些并不总是那么容易。

要删除垂直列线或任何其他非必需的皮肤部件，请在初始化事件中将部件的属性设置为 null，如下所示：

**抽象数据网格皮肤**：

```
<?xml version="1.0" encoding="utf-8"?>
<spark:DataGridSkin 
    xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" 
    xmlns:mx="library://ns.adobe.com/flex/mx"
    xmlns:fb="http://ns.adobe.com/flashbuilder/2009"
    xmlns:spark="spark.skins.spark.*" 
    xmlns:skins="view.skins.*"
    initialize="caretIndicator = null;columnSeparator=null"
    /> 
```

要设置标题的高度，请将其设置在 headerComponent 属性上：

```
 <fx:Component id="headerRenderer">
        <skins:AbstractDataGridHeaderSkin height="36" />
    </fx:Component> 
```

资料来源： [http ://ramblingdeveloper.com/ramblings/2011/9/25/skinning-a-flex-spark-datagrid-header.html](http://ramblingdeveloper.com/ramblings/2011/9/25/skinning-a-flex-spark-datagrid-header.html)

# c# - 如何使用属性避免 EF4.4 设计中的循环引用？

> ID：15530989
> 
> 赞同：0
> 
> 时间：2013-03-20T17:44:57.357
> 
> 标签：c#, entity-framework, ef-code-first

我有三个表：**PropertyOwner**、**Property**和**Address**。

一个**PropertyOwner**有很多**Properties**。

一个**PropertyOwner**有一个**Address**。

每个**属性**也有一个**地址**。

这是 Entity Framework 4.4 的代码：

```
Table: PropertyOwner

[Key]
[DatabaseGenerated(DatabaseGeneratedOption.None)]
[Required]
public Guid PropertyOwnerId { get; set; }

[Required]
[ForeignKey("Address")]
public Guid AddressId { get; set; }
public virtual Address Address { get; set; }

Table: Property

[Key]
[DatabaseGenerated(DatabaseGeneratedOption.None)]
[Required]
public Guid PropertyId { get; set; }

[Required]
[ForeignKey("PropertyOwner")]
public Guid PropertyOwnerId { get; set; }
public virtual PropertyOwner PropertyOwner { get; set; }

[Required]
[ForeignKey("Address")]
public Guid AddressId { get; set; }
public virtual Address Address { get; set; }

Table: Address

[Key]
[DatabaseGenerated(DatabaseGeneratedOption.None)]
[Required]
public Guid AddressId { get; set; }

[Required]
[StringLength(64)]
public string AddressLine1 { get; set; } 
```

当我尝试创建此数据库时，出现以下错误：

```
The referential relationship will result in a cyclical reference that is not allowed. [ Constraint name = FK_dbo.PropertyOwner_dbo.Address_AddressId ] 
```

数据库是否认为**Property**的**Address**和**PropertyOwner**的**Address**是同一条记录？

如何在**Property**需要拥有自己的地址并且**PropertyOwner**也需要拥有自己的**Address**的属性中将其拼写出来？

谢谢。

# c# - MVC 框架未调用自定义 AuthorizeAttribute

> ID：15530991
> 
> 赞同：9
> 
> 时间：2013-03-20T17:45:02.117
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, asp.net-web-api, authorize-attribute

我一直在互联网上试图找出为什么我的自定义 AuthorizeAttribute 在我的 MVC WebApi 中不起作用。我见过有人在 SO 上询问这种事情，但没有什么能帮助我解决我的问题：

```
 [AttributeUsage(AttributeTargets.Method, AllowMultiple = false, 
                 Inherited = false)]
    public sealed class CustomAuthorization : AuthorizeAttribute
    {

        //...

         protected override bool AuthorizeCore(HttpContextBase httpContext)
        { 
           // custom auth logic, returns true if authorized, false otherwise
        }
    } 
```

我`System.Web.Mvc`从而不是扩展`System.Web.Http`。但是，我`AuthorizeCore(HttpContextBase httpContext)`的从未被调用。

我的`CustomAuthorization`类中有一个构造函数，它接受`params string[]`一个特定操作所需的自定义权限的名称，例如：

```
[CustomAuthorization("Some Permission")]
[System.Web.Http.HttpGet]
public CustomResponse SomeAction()
{
   //...
} 
```

我希望实现的是，每当对使用该`[CustomAuthorization]`属性装饰的操作发出请求时，都会触发我的授权代码。如果授权失败，我还希望能够返回更具描述性的身份验证失败消息。不只是：

```
{"Message":"Authorization has been denied for this request."} 
```

我相信这涉及到覆盖`HandleUnauthorizedRequest`，但我怎样才能提供我自己的 JSON 响应将序列化的对象？

总而言之，即使我用我的`[CustomAuthorization]`属性装饰动作，框架也不会调用我的授权代码。它只是直接执行动作中的代码。

其次，如何实现未经授权的响应来序列化自定义 JSON 对象？

提前感谢您的帮助，非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T22:16:59.073

好的，我最终解决了它，这就是：

```
public override void OnAuthorization(HttpActionContext actionContext) {

    ....

    if (!authorized) {

       actionContext.Response =    
                  actionContext.Request.CreateResponse(
                                   HttpStatusCode.Unauthorized, 
                                   new  Dictionary<string, string> { 
                                                { "hello", "world" } 
                                   }
                  );

    } 
```

}

产生结果：

```
{"hello":"world"} 
```

Dictionary 对象是任意的，它只是说明一个类型将成功序列化为 Response。

如果您不设置，`actionContext.Response`则请求将继续执行目标操作 - 即。它被认为是被这个过滤器授权的。

希望对处于这个位置的其他人有所帮助。

# javascript - Onload 事件在一个页面上起作用，但在另一个页面上不起作用

> ID：15530996
> 
> 赞同：0
> 
> 时间：2013-03-20T17:45:12.167
> 
> 标签：javascript, asp.net, alert, onload

我有一个正在构建的网站，我想创建一个 onload 事件。

我创建了一个名为 first_load() 的函数，我想将其作为 onload 事件运行。我在 JavaScript 目录中名为 NewsScroller.js 的外部文件中有这个。

```
function first_load() {
    alert("hello");
} 
```

我的主 asp.net 页面中有以下内容：

```
<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <title>MIS portal</title>
    <link href="Styles.css" type="text/css" rel="Stylesheet" />
    <script type="text/javascript" src="JavaScript/jquery-1.9.1.js"></script>
    <script type="text/javascript" src="JavaScript/NewsScroller.js"></script>
</head>
<body onload="first_load()">
    <form id="Form1" runat="server">
        <div id="topbanner">
            <Homemade:WarningBar runat="server" ID="WarningLine" />
        </div>
        <div id="secondbanner">
            <asp:contentplaceholder id="CPH1" runat="server">
            </asp:contentplaceholder>
        </div>
    </form>
</body>
</html> 
```

当我将 default.aspx 加载到 contentplaceholder 时，会弹出警报。当我单击 default.aspx 文件中的链接将我带到我的contact.aspx 页面时，警报无法弹出，并且我在 IE9 中收到“预期对象”错误消息。

谁能告诉我为什么它在一页而不是另一页中工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T18:20:07.970

几乎 100% 可以肯定，我可以说您的 contact.aspx 页面没有引用该`first_load()`方法所在的 javascript 文件。

检查事项：

1.  你真的在引用它吗？
2.  如果你*这样认为*，路径是否正确？

如果您从母版页引用它，并且contact.aspx 页面与母版页不在同一目录中，并且您使用的是母版页的相对路径，那么您可能做得不对，需要切换到根相对路径。

# html - 如何使用 CSS 而不是 HTML 显示这些图像？

> ID：15530997
> 
> 赞同：0
> 
> 时间：2013-03-20T17:45:20.197
> 
> 标签：html, css, image

我正在尝试在我的博客的侧边栏中添加一些社交图标。在我的侧边栏中，我将一些主题组织在一个列表中。在此列表的末尾，我希望有一个显示我的社交图标的列表项。我设法通过使用标签来实现这一点，并得到了这样的东西：

```
<!-- Social icons -->
<li>
<img src="/images/Twitter.png"><a href="http://twitter.com"></a></img>
<img src="/images/Github.png"><a href="http://github.com"></a></img>
<img src="/images/Quora.png"><a href="http://quora"></a></img>
<img src="/images/LinkedIn.png"><a href="http://linkedin.com"></a></img>
<img src="/images/Google.png"><a href="http://google.com"></a></img>
<img src="/images/Flickr.png"><a href="http://flickr.com"></a></img>
<img src="/images/Vimeo.png"><a href="http://vimeo.com"></a></img>
<img src="/images/YouTube.png"><a href="http://youtube.com"></a></img>
</li> 
```

但是，我不喜欢这种方法，因为

*   链接由于某种原因不起作用
*   我无法调整图像的大小（它们像这样大）
*   我将无法获得悬停效果

因为我刚开始使用 CSS，所以我不知道如何解决这个问题。我尝试使用一些 div 容器和 ids 和类，但我无法让它工作。所以这是给你们所有 CSS 专家的：

如何使用 CSS 调整图像大小、内联显示、带有链接和悬停效果并摆脱这些标签？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:46:34.877

链接不起作用，因为标签嵌套不正确：`<a href="..."><img src="..." /></a>`。

要使用 CSS 显示图像，您将删除`img`标记并向元素添加`background-image`CSS 样式`<a>`（以及一些填充等，以便文本不会重叠）。[这是一个分步示例](http://ran.ge/2009/11/11/css-trick-turning-a-background-image-into-a-clickable-link/)。

还有一些其他阅读材料如何增强这种情况：[CSS sprites](http://css-tricks.com/css-sprites/)（将所有这些图标合并到一个下载中以加快速度）和[CSS Data URI](http://css-tricks.com/data-uris/)（将图标直接嵌入到 .css 文件中以减少下载次数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:48:17.720

你可以使用css背景。

```
.class{
background-image:url('image.png');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T19:42:32.200

上面的答案是您问题的一个很好的例子

对于这样的链接使用——

```
<a href="http://twitter.com"> <img src="/images/Twitter.png" /> </a>
<a href="http://github.com"> <img src="/images/Github.png" /> </a>
<a href="http://quora.com"> <img src="/images/Quora.png" /> </a> 
```

对于悬停效果使用

```
li a:hover{color:#ff0000} as css 
```

这将在悬停时显示红色。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T17:56:34.420

使用您的第一个示例，格式如下：

```
<a href= "http://twitter.com">
<img src= "/images/Twitter.png" />
</a> 
```

对于悬停，如果您将链接分配给一个类，您也应该能够设置悬停质量。

[http://kyleschaeffer.com/user-experience/pure-css-image-hover/](http://kyleschaeffer.com/user-experience/pure-css-image-hover/)

# python - 从文件中删除，Python

> ID：15530998
> 
> 赞同：2
> 
> 时间：2013-03-20T17:45:22.320
> 
> 标签：python

需要创建数据库，我正在努力从 txt 文件中删除。

我不知道如何让它从读取变量中删除 nameToFind。有人建议我使用字典？这是我到目前为止所拥有的：

```
def displayMenu():
    print ("1 - Add item")
    print ("2 - Delete item")
    print ("3 - Find item using name")
    print ("4 - Find item using score")
    print ("5 - Update score")
    print ("9 - Quit")

def getMenuChoice():
    try:
        choice = int(input("Please enter your choice:"))
    except Exception:
        return 0
    else:
        return choice

def addItem(newName, newScore, datafile):
    myFile = open(datafile, "a")
    myFile.write(newName + ":" + newScore + "\n")
    myFile.close()

def deleteItem(nameToFind, datafile):
    deletedword = str(nameToFind)
    myFile = open("datafile.txt", "r")
    read = myFile.read()
    for line in read:
        lines = line.split(":")
        #if lines == deletedword:
            #deleted = read.remove(deletedword)
            #print(deleted)
    myFile.close()
    deleted = read.remove[nameToFind]
    print(deleted)
    myFile1 = open("datafile.txt", 'w')
    myFile1.write(deleted)
    myFile1.close()    

def findItemUsingName(nameToFind, datafile):
    scores = {}
    myFile = open("datafile.txt", 'r')
    for line in myFile:
        lineValues = line.split(":")
        scores[lineValues[0]] = lineValues[1]
    myFile.close()          

highestScores = {}

choice = 0
while choice in [1, 2, 3, 4, 5, 0]:

    displayMenu()
    choice = getMenuChoice()

    if choice == 0:
        print ("Please enter 1, 2, 3, 4, 5 or 9")

    elif choice == 1:
        newName = input("Please enter the new name:")
        try:
            newScore = int(input("Please enter score for " + newName + ":"))
        except Exception:
            print("You must enter an integer for score")
        else:
            addItem(newName, str(newScore), "datafile.txt")

    elif choice == 2:
        print("Delete item")
        nameToFind = input("What is the name to delete? ")
        deleteItem(nameToFind, "datafile.txt")
    elif choice == 3:
        print("Find item using name")
        nameToFind = input("What is the name to find? ")
        findItemUsingName(nameToFind, "datafile.txt")
    elif choice == 4:
        print("Find item using score")
    elif choice == 5:
        print("Update score") 
```

您还需要一个名为“datafile”的 .txt 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T18:05:27.510

## 过程

*   将数据读入内存，
*   过滤掉不需要的数据，
*   用内存中的数据写出文件。

不是工业实力数据库，但你明白了。例如，您可以决定写入临时文件并在成功时重命名。

## 代码

```
def read_database(datafile):
    with open(datafile, "r") as myFile:
        return dict(line.rstrip().split(':') for line in myFile)

def write_database(datafile, data):
    with open(datafile, "w") as myFile:
        myFile.write("".join("%s:%s\n" % (k, v) for k, v in data.iteritems()))

def deleteItem(nameToFind, datafile):
    data = read_database(datafile)
    data.pop(nameToFind, None)
    write_database(datafile, data)

if __name__ == '__main__':
    datafile = "datafile.txt"
    data = {
        "Smith": 89,
        "Jones": 58,
        "Kozicki": 100,
    }
    write_database(datafile, data)
    deleteItem("Jones", datafile) 
```

## 原语

使用这些原语，您可以稍微重写您的代码：

```
def addItem(newName, newScore, datafile):
    data = read_database(datafile)
    data[newName] = newScore
    write_database(datafile, data)

def findItemUsingName(nameToFind, datafile):
    data = read_database(datafile)
    return data.get(nameToFind) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:49:27.343

我会打开`datafile`一个临时文件，读入内容`datafile`并检查您删除的单词，如果该行很好，请将其写入临时文件。读完整个文件后，将其删除并复制`temp`以替换它。

中的功能[`shutil`](http://docs.python.org/2/library/shutil.html)对文件删除/移动有好处（并`os`具有`unlink`删除文件的功能）。

```
import os, shutil

# read one file whilst writing to an intermediate file
with open("datafile.txt", "r") as io, open('temp', 'w') as oo:
    for line in io.readlines():
        if deletedWord not in line.split(':'):
            oo.write('%s' % line)

# delete the original file
os.unlink("datafile.txt")  

# move your new file sans deleted word over to datafile
shutil.move('temp', "datafile.txt") 
```

# maven - 在多个 SVN 存储库中的 Maven 项目上使用 SCM 引导

> ID：15530999
> 
> 赞同：0
> 
> 时间：2013-03-20T17:45:28.277
> 
> 标签：maven, version-control

我有一个项目分成大量模块，这些模块被分成几十个 SVN 存储库。（嘿，办公室政治，我能说什么呢？）

无论如何，我想使用 Maven SCM 插件来检查父项目，然后运行引导例程来检查其余模块（然后可能运行 Eclipse 插件来创建 Eclipse 配置）。如果现有资源已经存在，我还希望可以选择更新它们。

该文档提示我可以通过定义多个执行来实现这一点，但似乎缺乏实际的实现细节。

有没有人得到这个工作，他们可以分享这些知识吗？

杰森