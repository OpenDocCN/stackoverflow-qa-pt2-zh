# StackOverflow 问答 14690000-14690999

# html - 如何嵌入 PDF？

> ID：14690000
> 
> 赞同：50
> 
> 时间：2013-02-04T15:33:11.900
> 
> 标签：html, pdf

我正在尝试在 HTML 文档中嵌入 PDF，但这似乎仅适用于 Chrome。其他浏览器似乎要么需要插件，要么需要用户单击我不想要的链接。这是我尝试过的：

```
<object data="pdfFiles/interfaces.pdf" type="application/pdf">
    <embed src=" pdfFiles/interfaces.pdf" type="application/pdf">&nbsp;</embed>
                    alt :<a href="pdfFiles/interfaces.pdf">
</object> 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-02-04T16:15:59.900

以下是可用于每个浏览器的代码：

```
<embed src="pdfFiles/interfaces.pdf" width="600" height="500" alt="pdf" pluginspage="http://www.adobe.com/products/acrobat/readstep2.html"> 
```

在 Firefox 和 chrome 上测试

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2015-04-28T15:00:14.360

```
<iframe src="http://docs.google.com/gview?url=http://domain.com/pdf.pdf&embedded=true" 
style="width:600px; height:500px;" frameborder="0"></iframe> 
```

Google 文档允许您通过 iframe 链接到它们的服务来嵌入 PDF、Microsoft Office 文档和其他应用程序。其用户友好、用途广泛且具有吸引力。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2016-05-09T14:20:54.523

这完美地工作，这是官方的html5。

```
<object data="https://link-to-pdf"></object> 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2017-03-06T23:52:51.970

你知道[http://mozilla.github.io/pdf.js/](http://mozilla.github.io/pdf.js/)它是 mozila 的一个项目，使用画布在你的 html 中呈现 pdf。它使用起来超级简单。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-02-04T16:20:41.827

我建议使用[PDFObject](http://pdfobject.com/)进行 PDF 插件检测。

如果用户的浏览器不能直接显示 PDF，这将只允许您显示替代内容。例如，对于大多数用户来说，PDF 将在 Chrome 中正常显示，但如果他们使用的是 Firefox 或 Internet Explorer，则需要安装 Adob​​e Reader 之类的插件。

如果他们的浏览器尚未安装 PDF 插件，至少 PDFObject 将允许您显示一条消息，其中包含下载 Adob​​e Reader 和/或 PDF 文件本身的链接。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-10-03T03:21:33.317

FlexPaper 可能仍然是用于此类内容的最佳查看器。它在 Flash 和 html5 中都有一个传统的查看器和一个更翻页/翻书样式的查看器

[http://flexpaper.devaldi.com](http://flexpaper.devaldi.com)

# oracle - 将oracle中的数据提取到excel中的多张工作表中

> ID：14690004
> 
> 赞同：0
> 
> 时间：2013-02-04T15:33:29.073
> 
> 标签：oracle, excel, oracle11g

有什么方法可以将 Oracle 表中的数据提取到 Excel 中的多个工作表中？

例如：我有两张桌子`checkpoints`和`hold`. 我想要数据 from `checkpoints`to go to`sheet1`和`MS excel`data from `hold`to go to `sheet2`。

这可以在oracle中实现吗？

`Oracle version: Oracle 11G`

*   **编辑：** 我想使用 PL/SQL 来实现它。此代码将作为批处理作业执行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T05:07:59.667

如果您要生成的电子表格*非常*简单（即只有包含数据的单元格和多张工作表），您可以尝试[Alexandria PL/SQL 库](http://code.google.com/p/plsql-utils/)中的 Excel 生成 API - 只需抓取`XLSX_BUILDER_PKG`及其依赖项（我认为没有很多) 它应该可以完成这项工作。

我自己用它来生成 XLSX 格式的简单电子表格，并且全部使用 PL/SQL。它以 BLOB 形式返回结果，如果您需要数据库服务器上的结果，库中有另一个例程用于使用 UTL_FILE 将其吐出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T16:03:53.263

当然这是可能的，但这取决于您希望如何完成。

1) 如果您有报告工具（Jasper Reports、Oracle BI），您可以使用该工具创建报告并导出数据。

2) 如果您有开发工具（Toad、SQL Developer），您可以“手动”导出这两个表。

3) 如果您知道如何编写代码，那么您可以使用 API 创建 Excel 文件并用数据填充它。您可以使用 PL/SQL、PHP、C、C++ 或几乎任何其他语言，它只需要一个 Oracle API 和一个 Excel API。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-01-09T14:01:15.213

有一个 PL/SQL 包可以创建带有多个工作表的 Excel 文档，并将 SQL 查询中的数据放到单独的工作表中。

请看下面的例子：

```
BEGIN  
    ORA_EXCEL.new_document;  

    ORA_EXCEL.add_sheet('Employees');  
    ORA_EXCEL.query_to_sheet('select * from employees');  

    ORA_EXCEL.add_sheet('Departments');  
    ORA_EXCEL.query_to_sheet('select * from departments', FALSE);  

    ORA_EXCEL.add_sheet('Locations');  
    ORA_EXCEL.query_to_sheet('select * from locations');  

    -- EXPORT_DIR is an Oracle directory with at least  
    -- write permission  
    ORA_EXCEL.save_to_file('EXPORT_DIR', 'example.xlsx');  
END; 
```

您可以在此处找到更多详细信息： [http ://www.oraexcel.com/examples/pl-sql-excel-query-to-sheet-export](http://www.oraexcel.com/examples/pl-sql-excel-query-to-sheet-export)

# iphone - 从 iPhone 的通讯录中选择一个联系人并在其中添加一个新的电话号码

> ID：14690006
> 
> 赞同：4
> 
> 时间：2013-02-04T15:33:34.310
> 
> 标签：iphone, ios, objective-c, cocoa-touch

我的场景是从 iPhone 的通讯录中选择一个联系人并将其姓名和第一个电话号码显示到文本字段中，同时以编程方式在其 KABOtherLabel 属性中添加一个电话号码。

我正在使用此代码以编程方式添加联系人；

```
-(IBAction)addContactToAddressBook:(id)sender
{
    CFErrorRef error = NULL;

    ABAddressBookRef iPhoneAddressBook = ABAddressBookCreateWithOptions(NULL, NULL);

    ABRecordRef newPerson = ABPersonCreate();

    ABRecordSetValue(newPerson, kABPersonFirstNameProperty, (__bridge CFTypeRef)(contactName.text), &error);

   ABMutableMultiValueRef multiPhone = ABMultiValueCreateMutable(kABMultiStringPropertyType);
ABMultiValueAddValueAndLabel(multiPhone, (__bridge CFTypeRef)(phoneNumber.text), kABPersonPhoneMobileLabel, NULL);
   ABMultiValueAddValueAndLabel(multiPhone, @"1-123-456-7890", kABPersonPhoneIPhoneLabel, NULL);
   ABMultiValueAddValueAndLabel(multiPhone, @"1-987-654-3210", kABOtherLabel, NULL);

   ABRecordSetValue(newPerson, kABPersonPhoneProperty, multiPhone,nil);
   CFRelease(multiPhone);

  ABAddressBookAddRecord(iPhoneAddressBook, newPerson, &error);
  ABAddressBookSave(iPhoneAddressBook, &error);

  if (error != NULL)
  {

    NSLog(@"Some error...");

  }

} 
```

此代码完美运行。

我使用以下代码来获取联系人并将其显示在文本字段中；

```
-(IBAction)pickContact:(id)sender
{
    ABPeoplePickerNavigationController *picker =

    [[ABPeoplePickerNavigationController alloc] init];

    picker.peoplePickerDelegate = self;

    [self presentViewController:picker animated:YES completion:nil];
}

//called when user presses the cancel button in the Address book view controller

- (void)peoplePickerNavigationControllerDidCancel:(ABPeoplePickerNavigationController *)peoplePicker

{
    [self dismissViewControllerAnimated:YES completion:nil];
}

//called when user pics up a contact from the phone's address book

- (BOOL)peoplePickerNavigationController:

 (ABPeoplePickerNavigationController *)peoplePicker

      shouldContinueAfterSelectingPerson:(ABRecordRef)person {

    [self displayPerson:person]; //calls displayPerson:(ABRecordRef)person to show contact's information in the app

    [self dismissViewControllerAnimated:NO completion:NULL];
}

- (void)displayPerson:(ABRecordRef)person
{
    NSString* name = (__bridge_transfer   NSString*)ABRecordCopyValue(person,kABPersonFirstNameProperty); //Extracts the contact's first name from address book & assigns it to a string value
    //NSString* lastName = (__bridge_transfer NSString*)ABRecordCopyValue(person,kABPersonLastNameProperty); //Extracts the contact's last name from address book & assigns it to a string value

    self.contactName.text = name;

    NSString* phone = nil;

    //Extracts the first phone number among multiple contact numbers from address book & assigns it to a string value
   ABMultiValueRef phoneNumbers = ABRecordCopyValue(person,kABPersonPhoneProperty);

    if (ABMultiValueGetCount(phoneNumbers) > 0)
    {
      phone = (__bridge_transfer NSString*)

      ABMultiValueCopyValueAtIndex(phoneNumbers, 0);

    }
    else
   {
       phone = @"[None]";
   }

   self.phoneNumber.text = phone;

} 
```

此代码也可以完美运行，并且我在所需的文本字段中获得了值。

但是，当我结合这两个代码时，即在 displayPerson() 方法的末尾编写以下代码或从 shouldContinueAfterSelectingPerson 调用它

我用来在现有联系人中添加详细信息的代码如下；

```
 CFErrorRef error = NULL;

   ABAddressBookRef myAddressBook = ABAddressBookCreateWithOptions(NULL, NULL);

   ABMutableMultiValueRef multiPhone = ABMultiValueCreateMutable(kABMultiStringPropertyType);

   ABMultiValueAddValueAndLabel(multiPhone, @"1-987-654-3210", kABPersonPhoneIPhoneLabel, NULL);

   ABRecordSetValue(person, kABPersonPhoneProperty, multiPhone,nil);
   CFRelease(multiPhone);

   ABAddressBookAddRecord(myAddressBook, person, &error);
   ABAddressBookSave(myAddressBook, &error);

   if (error != NULL)
   {

     NSLog(@"Some error");

   }

   return NO; 
```

}

问题是只有这个号码被添加到联系人中，而所有其他现有条目都被删除。即这个数字会覆盖所有其他现有条目。请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T19:56:03.150

`ABRecordSetValue()` *将*记录的属性设置为您给它的值，覆盖所述属性的任何现有值。因为您用于`ABMultiValueCreateMutable()`创建一个新的空值列表，所以您实际上忽略了任何`kABPersonPhoneProperty`可能已经存在于`ABRecord`.

相反，您编辑现有记录的过程应该是：

*   调用`ABRecordCopyValue()`所选记录以获取现有值列表
*   调用`ABMultiValueCreateMutableCopy()`以获取可变值列表
*   将所需的电话号码添加到可变值列表中`ABMultiValueAddValueAndLabel()`
*   将带有电话号码的可变值列表写入记录中`ABRecordSetValue()`

# reporting-services - “收据信息”的 SSRS 参数

> ID：14690007
> 
> 赞同：1
> 
> 时间：2013-02-04T15:33:35.653
> 
> 标签：reporting-services

我有一份“收据信息报告”。例如

```
ID         Name                Date             Createtor        Payment Date

1          Bob               12.12.2012           bb               01.01.2013

2          Smith             15.01.2010           smt              15.02.2011

3          Peter             21.02.2011           ptr                  null       

4          Sarah             18.06.2012           srh              23.07.2012 
```

我想像这样在这个报告中添加一个参数；

*   列出所有收据（然后它会列出上面的报告）

*   列出所有由 Sarah 创建的收据

*   列出所有已付款的收据。

*   列出所有未付款的收据。

我创建了没有参数的报告。如何将这些参数调整到我的报告中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T06:52:54.140

您可以按如下方式参数化您的查询：

```
IF @PAYMENTSTATUS = 'ALL'
BEGIN
SELECT ID, NAME, [DATE], CREATOR, PAYMENTDATE FROM RECEIPT 
WHERE NAME = CASE @NAME WHEN 'ALL' THEN NAME ELSE @NAME END 
END
IF @PAYMENTSTATUS = 'PAID'
BEGIN
SELECT ID, NAME, [DATE], CREATOR, PAYMENTDATE FROM RECEIPT 
WHERE NAME = CASE @NAME WHEN 'ALL' THEN NAME ELSE @NAME END 
AND PAYMENTDATE IS NOT NULL
END
IF @PAYMENTSTATUS = 'UNPAID'
BEGIN
SELECT ID, NAME, [DATE], CREATOR, PAYMENTDATE FROM RECEIPT 
WHERE NAME = CASE @NAME WHEN 'ALL' THEN NAME ELSE @NAME END 
AND PAYMENTDATE IS NULL
END 
```

如果不是我无法在 SQL where 子句中正确判断日期列的大小写，那么它可能会更简单，那么您将不需要 3 个 if 语句。

接下来，您可以在参数属性中使用不同的数据集，从查询中获取值，以填充您的 @Name 参数，例如

```
select 'ALL' 
UNION
SELECT DISTINCT NAME FROM RECEIPT 
```

最后，您可以简单地使用@PAYMENTSTATUS 参数的可用值并指定值'ALL'、'PAID'、'UNPAID'。

# php - 在 MySQL 中存储更长的文本

> ID：14690008
> 
> 赞同：0
> 
> 时间：2013-02-04T15:33:36.300
> 
> 标签：php, mysql, compression, storage

在我的一张表中，我有一个可以包含更长文本的字段。每次有人向该表中插入一些东西时，都会调用一个简单的触发器。我的问题是这给了我一个错误：#1436 - 线程堆栈溢出：[...]

我认为这可以通过某种文本压缩来解决。

我应该为此使用什么样的压缩？我需要能够“解压缩”它。请注意，这不是为了提高安全性，而是为了尽量减少数据量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:42:58.803

看起来 TheVedge 链接到可能解决您的 MySQL 配置问题的帖子。但是，如果您仍想通过压缩 blob 列中的文本数据来节省空间（如果您的数据量过多和/或网络托管计划的数据限制较低，则可取），MySQL 包含[内置的压缩​​/解压缩功能](http://dev.mysql.com/doc/refman/5.6/en/encryption-functions.html)。查看 COMPRESS() 和 UNCOMPRESS()。这些基于标准 zlib。

# .net - 在使用具有非默认命名空间和 XSL 文件的 XML 文件时，编写 .NET 可以理解的 XPath 表达式的正确方法是什么？

> ID：14690009
> 
> 赞同：0
> 
> 时间：2013-02-04T15:33:41.163
> 
> 标签：.net, xml, xslt, xpath, xslcompiledtransform

我知道当涉及到 .NET（或者至少是我正在使用的 .NET 版本）时，如果我想从具有非默认命名空间的 XML 文档中查询数据，我至少有两个选择：

```
1\. use the local-name() function before referencing a
node in the xpath expression.

2\. work with the XmlNamespaceManager class and assign prefixes
that then need to be referenced in the xpath expression. 
```

最近我一直在使用 XSLCompiledTransform 类，并且在从具有非默认命名空间的 XML 文件中读取数据时遇到了类似的问题。

由于将编写实际 XSL 文件的人可能不知道他们需要使用 local-name() 函数，并且无法控制他们将使用的 XML 文件，所以我可以按代码顺序做些什么忍受 XSLCompiledTransform 类正确解释 (/node0/node1/node2/etc) 形式的 xpath 表达式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T15:46:06.917

通常，正确的做法是为将要使用的命名空间分配前缀并使用它们，无论是在 XSLT 中还是在 XmlNamespaceManager 中。当你不需要时使用`local-name()`绕过命名空间是相当hackish。

我对您问题的后半部分和您的要求感到有些困惑。您将在 XslCompiledTransform 类中使用哪种 XPath？您指的是 XSLT 本身中的 XPaths 吗？

关于命名空间的事情是，只要 URI 匹配，前缀可以是任何东西。因此，您对“无法控制他们将使用的 XML 文件”的评论可能是不必要的担忧。例如，如果输入 XML 如下所示：

```
<aa:root xmlns:aa="http://my.namespace.com">
   <aa:child>Hello!</aa:child>
</aa:root> 
```

您可以拥有这样的 XSLT：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:bb="http://my.namespace.com">
    <xsl:template match="bb:root">
       <xsl:value-of select="bb:child" />
    </xsl:template>
</xsl:stylesheet> 
```

一切都会正常工作，因为命名空间 URI 匹配。这比在 XSLT 中散布`local-name()`s 更可取。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T16:30:10.587

如果编写 XSLT 代码的人不知道在 XML 实例中将使用哪些名称空间，那么他们就是在黑暗中工作——这与不知道将使用哪些本地名称大致相同（实际上完全相同），因为元素名称由两个部分组成，一个 URI 和一个本地名称，您需要知道这两个部分。如果您事先不知道全名，您始终可以通过通配符选择元素并发现它们的名称——这本质上就是您使用 local-name() 时所做的事情——但这是一项艰苦的工作。

# bash - Bash：让程序认为 stdout 是一个交互式终端

> ID：14690010
> 
> 赞同：8
> 
> 时间：2013-02-04T15:33:42.383
> 
> 标签：bash, shell, pipe

我想通过管道运行程序的输出，但是当它检测到`stdout`不是交互式外壳时，它的行为显然不同。

我怎样才能像在正常情况下一样欺骗它通过管道写入？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-04T20:24:59.937

我假设程序将调用 glibc 函数`isatty()`来检查 stdout 是否是终端。这对于在终端上使用彩色输出或 ANSI 终端的其他功能（如光标定位或行擦除/重绘）的程序很常见。

您可以使用 LD_PRELOAD 环境变量来欺骗程序。LD_PRELOAD 由 ELF 链接器处理，并告诉动态库应该在所有其他库**之前加载。**使用此功能可以覆盖库函数，在您的情况下是 glibc 函数`isatty()`。例如，您可以关注这篇[文章](http://www.ibm.com/developerworks/linux/library/l-glibc/index.html)。

我为你准备了一个例子：

首先创建文件*libisatty.c*：

```
/**
 * Overrides the glibc function. Will always return true.
 *
 * Note: Although this should be ok for most applications it can
 * lead to unwanted side effects. It depends on the question
 * why the programm calls isatty()
 */
int isatty(int param) {
    return 1;
} 
```

并将其编译为共享库：

```
gcc -shared -o libisatty.so  libisatty.c 
```

它应该构建良好。

现在是测试库的时候了。:) 我已经使用该命令`ls --color=auto`进行测试。`ls`调用`isatty()`来决定它是否应该着色它的输出。如果输出被重定向到文件或管道，它将不会被着色。您可以使用以下命令轻松测试：

```
ls --color=auto        # should give you colorized output
ls --color=auto | cat  # will give you monochrome output 
```

现在我们将使用 LD_PRELOAD 环境变量再次尝试第二个命令：

```
LD_PRELOAD=./libisatty.so ls --color=auto | cat 
```

您应该看到彩色输出。

顺便说一句很酷的用户名：uʍopǝpısdn !!:D

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-02T15:38:21.823

使用`script`对我有用：

```
script outputfile.txt yourcommand
# any output ends up in outputfile.txt 
```

我猜你可以用它来管道：

```
script out.txt yourcommand ; cat out.txt | nextcommand 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T15:39:16.960

你可能想试试这个：

```
./script.sh < `tty` > output 
```

如果程序正在做类似的事情`isatty(0)`，这可能就足够了。

# git - 如何在初始化后立即撤消从空存储库中拉取的操作？

> ID：14690018
> 
> 赞同：1
> 
> 时间：2013-02-04T15:34:02.620
> 
> 标签：git

所以我向刚刚初始化的本地存储库添加了一个远程的空存储库，并在提交本地更改之前犯了拉取错误：

```
git init
git remote add origin <URL>
git add *
git pull origin master 
```

现在我所有的文件都被删除了，因为 git 将空的 repo 写入了本地文件。

通常，在拉取时，如果有需要提交的未暂存的本地更改，git 会拒绝合并。我很惊讶这与初始提交不同。

`git log`仅显示初始提交，因为我从未提交本地更改，因此我无法使用`git reset --hard`. 有没有办法恢复我的文件，如果有，怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T15:54:35.920

从您上面给出的工作流程来看，您似乎已经暂存了文件。那应该会留下一些悬空的斑点，您应该能够恢复。

```
git fsck --lost-found 
```

这应该将更改提交到 .git/lost-found 中的文件。那里可能会出现一些东西。

进一步讨论：[git pull 后](https://stackoverflow.com/questions/11107593/recover-file-after-git-pull)恢复[文件，执行 git reset --hard HEAD^ 后恢复添加的文件](https://stackoverflow.com/questions/1108853/recovering-added-file-after-doing-git-reset-hard-head)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-04T15:52:18.407

如果您丢失的更改没有提交，git 不会意识到它们并且无法恢复它们。在采取可能修改工作目录状态的操作之前，始终提交或存储未提交的更改。

# iphone - UIScrollView 与许多表并排，分页

> ID：14690019
> 
> 赞同：2
> 
> 时间：2013-02-04T15:34:06.067
> 
> 标签：iphone, ios, uitableview, uiscrollview

我想并排实现具有不同表的滚动视图。类似于 YouTube 应用程序中的“关于”、“建议”和“评论”的不同表格。我尝试通过首先将单个 tableViews 添加到 UIScrollView 来做到这一点。在这种情况下，即使我启用了分页，父母的 scrollView 也没有横向滚动。在我的第二次尝试中，我尝试制作一个包含 2 个部分的 tableView。但是在这里，不同的单元格只是作为行添加而不是添加到单独的“页面”或“列”中。有谁知道我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:46:57.693

您是否将“外部”滚动视图的内容大小设置为正确的尺寸？

例如，如果您要嵌套 3 个表格视图的水平设置（如您的问题中所述：“关于”、“建议”和“评论”），那么`contentSize`UIScrollView 的属性必须设置为宽度的 3 倍您的嵌套视图（即 3 UITableViews）。

查看[UIScrollView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html)和`contentSize`属性的文档。也许还可以查看 Apple 的[ScrollViewSuite](http://developer.apple.com/library/ios/#samplecode/ScrollViewSuite/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008904)示例。

# plsql - dbms_output 语句中的单引号？

> ID：14690022
> 
> 赞同：3
> 
> 时间：2013-02-04T15:34:16.167
> 
> 标签：plsql, oracle11g

我需要在 dbms_output 语句中包含单引号。我试过这个：

```
 dbms_output.put_line('\''first_name||'\''); 
```

这里 first_name 是**`variable`**; 我需要在单引号内显示​​它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-04T15:40:10.143

你会通过加倍逃脱：

```
 dbms_output.put_line('''' || first_name || ''''); 
```

或使用[q-quote](http://www.oracle-developer.net/display.php?id=311)机制：

```
 dbms_output.put_line(q'[']'||first_name||q'[']'); 
```

例如：

```
SQL> var b1 varchar2(30)
SQL> exec :b1 := 'this is a test';

PL/SQL procedure successfully completed.

SQL> exec  dbms_output.put_line(q'[']'||:b1||q'[']');
'this is a test'

PL/SQL procedure successfully completed.

SQL> exec  dbms_output.put_line(''''||:b1||'''');
'this is a test'

PL/SQL procedure successfully completed.

SQL> exec  dbms_output.put_line(chr(39)||:b1||chr(39));
'this is a test'

PL/SQL procedure successfully completed. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-20T10:03:40.577

请注意，这仅适用于 PL/SQL，并且必须处于活动状态。

```
begin
DBMS_OUTPUT.PUT_LINE('DELETE FROM MYTABLE WHERE MYFIELD <> ''A'';');
end;
/ 
```

假设你想匹配一个`CHAR`'A'。

# java - 如何优化外部 Java 库的资源使用？

> ID：14690026
> 
> 赞同：4
> 
> 时间：2013-02-04T15:34:46.233
> 
> 标签：java, performance, memory-management, garbage-collection, bytecode

我有一个我构建的实用程序，作为一个如此小的专用实用程序，当我在测试期间注意到它使用 150mb 内存时，我感到非常惊讶。我以 1MB 的堆设置运行它，但它仍然占用了超过 50MB。

在分析并花了一天时间试图找出我错在哪里之后，我决定测试一个理论。我的实用程序连接到专有应用程序。该连接需要应用程序供应商提供的外部库。

我使用该库编写了一个小型 Hello World 并注意到以下内容：

1) 从供应商库中声明一个新对象会立即将内存使用量增加到 50MB（主要是 permgen 空间）

2) 实际尝试连接到应用服务器会将内存使用量增加到 150MB。

就我而言，这简直是愚蠢的。

我想知道是否有任何驯服野兽的潜在方法。也许以某种方式卸载我知道不必要或永远不会被引用的类。供应商不会很快改变事情。

或者仅在必要时加载供应商的库怎么样？这样，它在与应用服务器通信时只会消耗这么多内存。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T15:37:42.830

JVM 只加载您实际使用的类。事实上，它只加载您实际使用的方法。例如，如果您在不使用的方法中有字节码错误，您将不知道。;)

减少供应商库大小的最佳方法是要求他们改进它，或者自己编写。

不幸的是，分配适当的应用程序对资源不是很友好。他们的首要任务是正确性。:j

顺便说一句：150 MB 内存的成本约为 6 美元，所以我不会花太多时间来修复它。

# ajax - 如何使用长轮询自动刷新网页

> ID：14690027
> 
> 赞同：0
> 
> 时间：2013-02-04T15:34:52.137
> 
> 标签：ajax, cgi, long-polling

我试图弄清楚如何使用长轮询来触发网页刷新（整个页面而不是单个部分）。尽管只更新页面的一部分而不是单个部分会更好，但我宁愿只完成初始页面刷新部分，然后从那里继续。话虽如此，我想知道是否有人能够指出我如何去做这件事的正确方向？我一直在网上搜索长轮询的例子，但不幸的是还没有找到类似的东西。几乎我会有一个网页，我可以根据服务器上的某些条件使用长轮询远程刷新（debian 上的 apache），例如，如果我有一个基于 bash 脚本的 cgi 页面，该页面根据服务器时间显示 am 或 pm ,

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T15:55:56.163

好吧，首先。如果您执行长轮询请求，您需要记住，在浏览器中查看的每个页面都将与您的服务器建立开放连接。这要求您的服务器基础架构能够在不消耗大量内存的情况下处理此问题，并且不会耗尽可用连接来处理长轮询请求。

我不认为你使用 php，但这是一个很好的例子：所以如果你有 apache 和 php 模块，一方面通过 apache 的配置限制最大连接，另一方面对于每个连接整个 php如果您有很多页面视图，则加载的模块会占用大量内存。如果你使用 php-fpm 作为 fcgi，还有一个可用客户端的最大数量，你也不想增加这个数量超过一定的限制。

所以通常我建议不要对公共网站使用长轮询请求，如果你没有一个好的服务器后端，它有一些很好的逻辑来处理这个。

根据您可以考虑以下解决方案的要求，如果您知道该页面应该在哪个时间间隔检查刷新：

你可以添加一个属性`data-check-for-refresh-at`和`data-modified-at`你的 html 节点：

```
<html data-check-for-refresh-at='2013-02-04 12:00:00 GMT' data-modified-at='2013-01-01 12:00:00 GMT'> 
```

用 javascript 解析它，然后在这个`modified-at`时候用那个请求提交时间进行刷新检查。如果内容发生更改，您将提交新内容，下次客户端应检查更新。

另一件很重要的事情是，您应该由客户端在此刷新时间上添加一个随机偏移量，否则您可能会自己进行 DDOS。因为所有客户端都会同时发送刷新请求。

**编辑（基于评论）**

首先简要解释一下如何在实际系​​统中完成：

服务器不应为每个连接使用一个线程或进程，而应使用事件驱动的方法（注册回调以通知流是否准备好读取或写入）。然后，如果一个长轮询请求到达，服务器将存储有关客户端想要通知哪些更改的信息。然后连接正在*休眠*在需要通知客户端之前，不再为该连接浪费 cpu 圈，而且内存使用率也很低。然后，如果 url 发生更改，将通知服务器应该通知所有侦听此 url 更改的客户端。然后服务器将响应提交给客户端（发布订阅系统）。根据要通知的客户端数量，通知可能应该排队并以智能方式处理，以便您可以更好地平衡传出流量。使用这种方法，您更有可能遇到最大允许的 openports/filedescriptor 问题，然后遇到 cpu 或内存使用问题。

当然，这是一个非常简单的描述，但我认为足以了解它是如何实现的。

**Quick&Dirty 解决方案** 它是伪代码而不是真实代码，因此这不适用于复制和过去，还假设服务器`$notificationFile`在任何长轮询请求到达之前创建文件）：

长轮询请求将调用这样的 php 脚本：

```
set_time_limit(0);

/*
$urlToCheck and  $modificationTimeToCheckAgainst should be initialized by the values send by client as parameter for the long polling request
$someTime should be the maximum time the long polling request should be keept alive
*/
$forceResponseTimeout =  microtime(true) + $someTime;
$urlToCheck = "the/url/to/observe.html"; 
$modificationTimeToCheckAgainst = "2013-02-05 00:00:00"; //should be the time in seconds (not a real date)

$notificationFile = "./tmp/observer-file-".sha1($urlToCheck);

$responseStatus = "did-not-change";
while( microtime(true) < $forceResponseTimeout ) {
   clearstatcache(); //need to clear cache otherwise we don't have the right modification date (also not the beast idea to keep cpu usage low)
   if( filemtime(".update-check-file-".sha1($pathToCheck)) > $modificationTimeToCheckAgainst ) {
        $responseStatus = "changed";
        break;
   }
   usleep(100); //this is a bad idea because it creates a high cpu usage, even with the sleep
}

echo $responseStatus;  //here some json response should be created, the client then gets the information if it should resend the long polling request or if it should do a refresh. 
```

更新脚本应如下所示：

```
 $urlThatIsUpdated = "the/url/to/observe.html";

 //doing the update of the file

 $notificationFile = "./tmp/observer-file-".sha1($urlThatIsUpdated);

 touch($notificationFile); //updates the modification time of the notification file, which should be recognized by the script above. 
```

# javascript - gRaphael 折线图绘制轴以外的值

> ID：14690029
> 
> 赞同：3
> 
> 时间：2013-02-04T15:34:52.853
> 
> 标签：javascript, linechart, graphael

当使用 gRaphael 沿 x 轴以毫秒为单位绘制折线图时，我通常会在数据点的位置上出现不一致。最常见的初始数据点位于 y 轴的左侧（如下面的小提琴所示），有时最后一个数据点将超出视图框的右侧/超过 x 轴的终止.

有谁知道：1）为什么会发生这种情况，2）如何防止它，和/或 3）如何检查它（如果我知道它何时发生/多少，我可以使用变换来移动线/点） .

我的代码：

```
var r = Raphael("holder"),
txtattr = { font: "12px sans-serif" };
var r2 = Raphael("holder2"),
txtattr2 = { font: "12px sans-serif" };

var x = [], y = [], y2 = [], y3 = [];

for (var i = 0; i < 1e6; i++) {
    x[i] = i * 10;
    y[i] = (y[i - 1] || 0) + (Math.random() * 7) - 3;
}
var demoX = [[1, 2, 3, 4, 5, 6, 7],[3.5, 4.5, 5.5, 6.5, 7, 8]];
var demoY = [[12, 32, 23, 15, 17, 27, 22], [10, 20, 30, 25, 15, 28]];

var xVals = [1288885800000, 1289929440000, 1290094500000, 1290439560000, 1300721700000,   1359499228000, 1359499308000, 1359499372000];
var yVals = [80, 76, 70, 74, 74, 78, 77, 72];
var xVals2 = [1288885800000, 1289929440000];
var yVals2 = [80, 76];

var lines = r.linechart(10, 10, 300, 220, xVals, yVals, { nostroke: false, axis: "0 0 1 1", symbol: "circle", smooth: true })
.hoverColumn(function () {
    this.tags = r.set();

    for (var i = 0, ii = this.y.length; i < ii; i++) {
        this.tags.push(r.tag(this.x, this.y[i], this.values[i], 160, 10).insertBefore(this).attr([{ fill: "#fff" }, { fill: this.symbols[i].attr("fill") }]));
        }
    }, function () {
        this.tags && this.tags.remove();
        });

lines.symbols.attr({ r: 3 });

var lines2 = r2.linechart(10, 10, 300, 220, xVals2, yVals2, { nostroke: false, axis: "0 0 1 1", symbol: "circle", smooth: true })
.hoverColumn(function () {
    this.tags = r2.set();

    for (var i = 0, ii = this.y.length; i < ii; i++) {
        this.tags.push(r.tag(this.x, this.y[i], this.values[i], 160, 10).insertBefore(this).attr([{ fill: "#fff" }, { fill: this.symbols[i].attr("fill") }]));
        }
    }, function () {
        this.tags && this.tags.remove();
        });

lines2.symbols.attr({ r: 3 }); 
```

我必须使用 gRaphael 并且 x 轴必须以毫秒为单位（稍后标记为带有自定义日期字符串）

主要示例小提琴：http: [//jsfiddle.net/kcar/aNJxf/](http://jsfiddle.net/kcar/aNJxf/)

次要示例小提琴（页面上的第 4 个示例经常显示两个轴错误）：http: [//jsfiddle.net/kcar/saBnT/](http://jsfiddle.net/kcar/saBnT/)

根本原因是 snapEnds 函数（第 718 行 g.raphael.js），它所做的舍入虽然在某些情况下很好，但在其他情况下是从日期添加或减去年份。

在这一点之后还没有一直走下去，但是由于每次舍入变得疯狂时数据点都放错了位置，而不是当它没有时，我将继续并假设这会导致计算图表列出现问题，在被发送到 snapEnds 之前，这些值也只是为了确认它不仅仅是接收到错误计算的数据。

该函数的代码来自 g.raphael.js

```
snapEnds: function(from, to, steps) {
    var f = from,
        t = to;

    if (f == t) {
        return {from: f, to: t, power: 0};
    }

    function round(a) {
        return Math.abs(a - .5) < .25 ? ~~(a) + .5 : Math.round(a);
    }

    var d = (t - f) / steps,
        r = ~~(d),
        R = r,
        i = 0;

    if (r) {
        while (R) {
            i--;
            R = ~~(d * Math.pow(10, i)) / Math.pow(10, i);
        }

        i ++;
    } else {
        if(d == 0 || !isFinite(d)) {
            i = 1;
        } else {
            while (!r) {
                i = i || 1;
                r = ~~(d * Math.pow(10, i)) / Math.pow(10, i);
                i++;
            }
        }

        i && i--;
    }

    t = round(to * Math.pow(10, i)) / Math.pow(10, i);

    if (t < to) {
        t = round((to + .5) * Math.pow(10, i)) / Math.pow(10, i);
    }

    f = round((from - (i > 0 ? 0 : .5)) * Math.pow(10, i)) / Math.pow(10, i);
    return { from: f, to: t, power: i };
}, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T20:31:17.547

从 snapEnds 中删除了舍入的废话，没有更多问题，没有注意到图表的任一轴或任何其他区域的任何不利之处。如果你看到一个我很乐意听到它。

现在来自 g.raphael.js 的该函数的代码：

```
snapEnds: function(from, to, steps) {
     return {from: from, to: to, power: 0};       
}, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T17:48:19.373

嗨，如果您对此发表评论：

```
 if (valuesy[i].length > width - 2 * gutter) {
            valuesy[i] = shrink(valuesy[i], width - 2 * gutter);
            len = width - 2 * gutter;
        }

        if (valuesx[i] && valuesx[i].length > width - 2 * gutter) {
            valuesx[i] = shrink(valuesx[i], width - 2 * gutter);
        } 
```

在g.line.js中，似乎解决了这个问题，也解决了y轴上的值类似的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T10:27:35.233

从 v0.50 升级到 v0.51 为我解决了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T17:54:47.320

仍然不确定它为什么会发生，添加透明集合并不是一个理想的选择。检查数据点是否在图形之外呈现的最简单方法似乎是获取轴集的边界框和数据点的边界框，并检查 x 和 x2 值之间的差异。

如果有人可以帮助我扩展数据点集，或者弄清楚如何使这种情况根本不发生，我仍然会很高兴地感谢/支持投票答案

```
//assuming datapoints  is the Raphael Set for the datapoints, axes is the 
//Raphael Set for the axis, and datalines is the Raphael Set for the 
//datapoint lines
var pointsBBox = datapoints.getBBox();
var axesBBox = axes.getBBox();
var xGapLeft = Math.ceil(axesBBox.x - pointsBBox.x); 
//rounding up to integer to simplify, and the extra boost from y-axis doesn't 
//hurt, <1 is a negligible distance in transform
var xGapRight = Math.ceil(axesBBox.x2 - pointsBBox.x2);
var xGap = 0;
if(xGapLeft > 0){
     datapoints.transform('t' +xGapLeft +',0');
     datalines.transform('t' +xGapLeft +',0');
     xGap = xGapLeft;
}else if (xGapRight < 0) { //using else if because if it is a scale issue it will
//be too far right & too far left, meaning both are true and using transform will
//just shift it right then left and you are worse off than before, using 
//set.transform(scale) works great on dataline but when using on datapoints scales
// symbol radius not placement
     if (xGapLeft < 0 && xGapRight < xGapLeft) { xGapRight = xGapLeft; }  
//in this case the initial point is right of y-axis, the end point is right of 
//x-axis termination, and the difference between last point/axis is greater than
//difference between first point/axis

     datapoints.transform('t' +xGapRight +',0');
     datalines.transform('t' +xGapRight +',0');
     xGap = xGapRight;
}
rehookHoverOverEvent(xGap);  //there are so many ways to do this just leaving it
//here as a call to do so, if you don't the hover tags will be over the original 
//datapoints instead of the new location, at least they were in my case. 
```

# primefaces - 如何使用 primefaces 3.2 在 BarChart 中添加水平滚动条

> ID：14690033
> 
> 赞同：0
> 
> 时间：2013-02-04T15:35:07.937
> 
> 标签：primefaces, scrollbar, bar-chart

> 如何使用 primefaces 3.2 在 BarChart 中添加水平滚动条，我的 x 轴时间维度显示 52 周或 8 周周数据，它基于用户选择的过滤值

在这里我的问题是我想将宽度 800 和高度的条形图的大小固定为 300px 但是当我选择 52weeks 条形图时，它会显示非常细的条形线，其中显示超过 130 个条形并且用户无法正确看到条形，有什么方法可以在条形图中添加滚动条，使整体宽度相同，但我们可以滚动所有 52 周的数据并显示适当的条形宽度......如果有人可以指导如何向条形图添加滚动条，我将不胜感激

```
 <p:panel  id="pnl1" header="Trend" style="width:930;height:360px;"  toggleable="true" closable="true" toggleSpeed="500" closeSpeed="500" widgetVar="panel1">

<p:barChart id="BarChart1"  value="#{Test1.chartModel}"  widgetVar="bar1" legendPosition="n" barPadding="5"   barMargin="10"  style="width:800px;height:300px;" 
title="week over week trend"  />
 </p:panel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T09:12:11.337

此组件中没有任何滚动解决方案，但您可以将其放在 div 中，或者有其他建议来解决此问题；试试这个缩放示例： [jq plot zooming](http://www.jqplot.com/deploy/dist/examples/zoomProxy.html)

祝你好运！

# arrays - 不是数组类型的值

> ID：14690034
> 
> 赞同：0
> 
> 时间：2013-02-04T15:35:09.307
> 
> 标签：arrays, lisp, common-lisp, let

我创建了一个应该具有类型词法变量的函数`ARRAY`：

```
(defun give-rank-vec (dir-1 dir-2 file-1 file-2)
  (let* ((cm-size (array-dimension (Swc (make-ff-array dir-1 file-1)
                                        (make-ff-array dir-2 file-2)) 
                                    0))
         (rank-dump-vec (make-array `(,cm-size)))     
         (Swc' (Swc (make-ff-array dir-1 file-1)
                    (make-ff-array dir-2 file-2))) 
         (Sbc' (Sbc (make-ff-array dir-1 file-1) 
                    (make-ff-array dir-2 file-2))))
    (dotimes (j cm-size) 
      (setf (svref rank-dump-vec j) 
            (/ (get-element Sbc' j j) 
               (get-element Swc' j j))))   
   rank-dump-vec))  

(defun Sbc (cmatrix1 cmatrix2)
  (add-matrices (Si cmatrix1) 
                (Si cmatrix2)))

(defun add-matrices (A B)
  (let ((C (make-array (array-dimensions A))))
    (dotimes (i (array-dimension A 0))
      (dotimes (j (array-dimension A 1))
        (setf (aref C i j) (+ (aref A i j) (aref B i j)))))
    C)) 
```

但是，当我对这个函数进行 SLIME 时，我得到了错误：

```
The value
  (SBC (MAKE-FF-ARRAY DIR-1 FILE-1)
       (MAKE-FF-ARRAY DIR-2 FILE-2))
is not of type
  ARRAY.
   [Condition of type TYPE-ERROR] 
```

`Swc`工作正常，因为它似乎返回了一个数组- 但是`Sbc`没有 - 我`Sbc`用小型和巨大的（wc 13000 65000 627677）平面文件进行了测试，并且在 SLIME 中调用它时返回了一个数组，但是在这种情况下它不起作用。表达式似乎写对`let*`了-我不确定我在这里做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T18:22:36.560

单引号字符`'`是 Common Lisp 中的终止宏字符。请参见[Hyperspec 中的图 2-7](http://www.lispworks.com/documentation/HyperSpec/Body/02_ad.htm#charsyntaxtypesinstdsyntax)。

如果你想在一个符号中使用这个字符，你必须用反斜杠或一对竖线来引用它：

```
CL-USER 65 > '(quote-at-the-end-\' |QUOTE-AT-THE-END-'| quote-at-the-end-|'|)
(QUOTE-AT-THE-END-\' QUOTE-AT-THE-END-\' QUOTE-AT-THE-END-\') 
```

# javascript - 在谷歌地图中正确定位邮政编码标签

> ID：14690035
> 
> 赞同：1
> 
> 时间：2013-02-04T15:35:11.493
> 
> 标签：javascript, google-maps, google-maps-api-3, zipcode, centroid

我正在谷歌地图中绘制一个邮政编码区域列表，并且我正在尝试在该区域上写一个带有邮政编码的标签。我可以做到这一点，除了我使用区域的质心来定位标签，但有些区域的形状不规则，质心落在区域本身之外。这是我的意思的一个例子：

![在此处输入图像描述](../Images/e4cf00d5e3f33efa9ad90d880a3e0223.png)

观看邮政编码 81151，它如何显示在邮政编码 81123 的区域顶部，而不是显示在他自己的区域顶部。

有谁知道更好的算法将邮政编码正确定位在不规则区域的顶部，而不是使用该区域的质心？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:18:44.100

您可以使用 google.maps.geometry.poly.containsLocation 和 google.maps.geometry.spherical.interpolate 函数。

例如。获取多边形的边界点和中心点并使用函数“ **google.maps.geometry.spherical.interpolate ({centerpoint}, {bundaypoint}, {distance})** ”然后验证结果点是否在该区域中具有' **google.maps.geometry.poly.containsLocation({resultPoint}, {polygonObject})** '函数的多边形。

GetBounds 函数：

```
if (!google.maps.Polygon.prototype.getBounds) {
            google.maps.Polygon.prototype.getBounds = function (latLng) {
                var bounds = new google.maps.LatLngBounds();
                var paths = this.getPaths();
                var path;
                for (var p = 0; p < paths.getLength() ; p++) {
                    path = paths.getAt(p);
                    for (var i = 0; i < path.getLength() ; i++) {
                        bounds.extend(path.getAt(i));
                    }
                }
                return bounds;
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T23:22:43.380

几周前我遇到了类似的问题，但没有找到任何算法（也许没有）。

最后我找到了一个包含所需数据的 fusionTable（我也使用了 fusionTable 来存储边界，因此很容易合并表）。

也许您也可以这样做，快速搜索得到以下结果：[https ://www.google.com/fusiontables/DataSource?docid=1VwApbjvZ--YKE6fRT_StuJ7jd2o0r2jLUmGwQnI](https://www.google.com/fusiontables/DataSource?docid=1VwApbjvZ--YKE6fRT_StuJ7jd2o0r2jLUmGwQnI)

例如，对于 zip 81151，坐标位于更靠西的位置，也许这​​张桌子适合您的需要

# ios - iOS 上 MeCab Japanese tokenizer 的选项？

> ID：14690036
> 
> 赞同：3
> 
> 时间：2013-02-04T15:35:14.440
> 
> 标签：ios, tokenize, cjk, mecab

我正在使用位于[https://github.com/FLCLjp/iPhone-libmecab](https://github.com/FLCLjp/iPhone-libmecab)的 MeCab 的 iPhone 库。我很难让它标记所有可能的单词。具体来说，我无法将“吉本兴业”分为“吉本”和“兴业”两部分。有什么选项可以用来解决这个问题吗？iPhone 库没有公开任何内容，但它在objective-c 包装器下使用C++。我认为必须有某种设置我可以更改以提供更细粒度的控制，但我不知道从哪里开始。

顺便说一句，如果有人想标记这个“mecab”，那可能是合适的。我还不允许创建新标签。

更新：iOS 库正在调用 libmecab.cpp 中定义的 mecab_sparse_tonode2()。如果有人可以向我指出该文件上的一些英文文档，那可能就足够了。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-05T02:45:09.627

这没有任何特定于 iOS 的内容。您与 mecab 一起使用的字典（可能是 ipadic）包含公司名称吉本兴业的条目。尽管名称的两个部分也被列为单独的名词，但 mecab 强烈倾向于将复合名称标记为一个单词。

Mecab 缺少允许用户选择是否应将化合物拆分为多个部分的功能。请注意，这样的功能通常很难实现，因为并不是每个人都同意哪些化合物可以拆分，哪些化合物不能拆分。例如容疑者是容疑和者的复合词吗？从纯粹的形态学角度来看可能是的，但对于大多数实际应用来说可能不是。

如果您有一个想要分割的化合物列表，一个快速的解决方法是为它们所包含的部分创建一个用户字典，并让 mecab 除了使用主字典之外还使用它。

[这里](http://mecab.googlecode.com/svn/trunk/mecab/doc/dic.html)有关于如何执行此操作的日语文档。对于您的特定示例，它将涉及以下步骤。

1.  制作一个包含两个条目的用户字典，一个是吉本，一个是兴业：

    ```
    吉本,,,100,名詞,固有名詞,人名,名,*,*,よしもと,ヨシモト,ヨシモト
    興業,,,100,名詞,一般,*,*,*,*,こうぎょう,コウギョウ,コウギョウ 
    ```

    我怀疑这两个条目已经存在于默认字典中，但是通过将它们添加到用户字典并指定一个相对较低的特异性指标（我都使用`100`过 - 越低，越有可能被拆分），您可以获得mecab 倾向于偏爱部分而不是整体。

2.  编译用户字典：

    ```
    $> $MECAB/libexec/mecab/mecab-dict-index  -d /usr/lib64/mecab/dic/ipadic -u mydic.dic -f utf-8 -t utf-8 ./mydic 
    ```

    您可能需要调整命令。以上假设：

    1.  Mecab 是从`$MECAB`. 如果您使用由包管理器安装的 mecab，您可能很难找到该`mecab-dict-index`工具。最好从源安装。

    2.  默认字典在`/usr/lib64/mecab/dict/ipadic`. 这不是 mecab 包的一部分；它是一个单独的包（例如[this](http://code.google.com/p/mecab/downloads/detail?name=mecab-ipadic-2.7.0-20070801.tar.gz&can=2&q=)），您可能也很难找到它。

    3.  `mydic`是在步骤 1`mydic.dic`中创建的用户字典的名称。是您将作为输出获得的编译字典的名称（不需要存在）。

    4.  系统字典（`-t`选项）和用户字典（`-f`选项）都以 UTF-8 编码。这可能是错误的，在这种情况下，您稍后会在使用 mecab 时收到错误消息。

3.  修改mecab配置。在系统范围的安装中，这是一个名为`/usr/lib64/mecab/dic/ipadic/dicrc`或类似的文件。在您的情况下，它可能位于其他地方。将以下行添加到配置文件的末尾：

    ```
    userdic = home/myhome/mydic.dic 
    ```

    确保上面编译的字典的绝对路径是正确的。

如果您随后针对您的输入运行 mecab，它将将该化合物拆分为多个部分（我对其进行了测试，在 Linux 系统上使用 mecab 0.994）。

更彻底的解决方法是获取默认字典的来源并手动删除要拆分的所有复合名词，然后重新编译字典。作为一般评论，在较长一段时间内将 CJK 标记器用于生产模式中的严肃应用程序通常需要定期进行一定量的字典维护（添加/删除条目）。

# ios - 从单独的类推送新的 UIViewController

> ID：14690041
> 
> 赞同：0
> 
> 时间：2013-02-04T15:35:25.807
> 
> 标签：ios, objective-c, delegates, uinavigationcontroller, appdelegate

我目前为我的应用程序编写了一个滑块（类似于 Facebook 应用程序）。滑块顶部是一个搜索框，控制搜索功能的方法也在应用程序委托中。

同样，我在一个单独的类 (SliderMenuViewController) 中有控制滑块表格视图的方法。

我正在寻找一种方法让滑块（搜索框或表格视图单元格）能够告诉 RootViewController（或当前可见的任何 viewController）推送一个新的 ViewController（在 UINavigationController 内）。

这就是我试图做的（这段代码在 AppDelegate 中）：

```
-(void)searchBarSearchButtonClicked:(UISearchBar *)searchBar{
NSLog(@"Searching for: \"%@\"",searchBar.text);
[searchBar resignFirstResponder];
IndexAndSearch *vc = [[IndexAndSearch alloc]initWithNibName:nil bundle:nil];
[self.navigationController pushViewController:vc animated:YES];
} 
```

但它不起作用（它写入日志，但不推送新的 ViewController）。我还尝试向 RootViewController 发送消息，如下所示：

```
-(void)searchBarSearchButtonClicked:(UISearchBar *)searchBar{
NSLog(@"Searching for: \"%@\"",searchBar.text);
[searchBar resignFirstResponder];
RootViewController *vc = [[RootViewController alloc]initWithNibName:nil bundle:nil];
[vc performSearchFromDelegateSlider];
} 
```

在 RootViewController 的实现文件中使用以下代码：

```
-(void)performSearchFromDelegateSlider{
NSLog(@"Searching");
IndexAndSearch *vc = [[IndexAndSearch alloc]initWithNibName:nil bundle:nil];
[self.navigationController pushViewController:vc animated:YES];
} 
```

但又一次，它只写入日志，而不是推送 viewController。

我在 Google 和 SO 上看了很多遍，但找不到任何有用的东西。[这个问题](https://stackoverflow.com/questions/7803408/pushviewcontroller-from-another-class)与我的类似，但没有任何合适的答案。我知道答案可能涉及委派，但我无法解决这个问题。

**重要提示：**应用程序中几乎每个 ViewController 都可以使用此滑块，这意味着无论我实施什么解决方案，都必须能够为每个类推送一个新的 ViewController。这就是为什么我不能使用这样的解决方案[（](http://www.kickasslabs.com/2009/07/03/uinavigationcontroller-tricks/)我必须将 NavigationDelegate 代码输入到每个 ViewController 中，这在我这样大的应用程序中不起作用）。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T02:58:53.690

我不相信这是最好的解决方案，但我能够使用**通知**来完成这项工作。对于任何感兴趣的人，这是我所做的：

### 第1步

第一步是在 RootViewController 的 viewDidLoad 方法中注册通知：

```
-(void)viewDidLoad{
    [super viewDidLoad];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(didReceiveNavSliderSearchNotification:) name:@"navSliderSearchNotification" object:nil];
} 
```

### 第2步

然后，当从滑块执行搜索时，我需要触发通知。searchBar 代码位于我的 AppDelegate 中，如下所示：

```
-(void)searchBarSearchButtonClicked:(UISearchBar *)searchBar{
    //Write to the log
    NSLog(@"Searching for: \"%@\"",searchBar.text);
    //Dismiss the keyboard
    [searchBar resignFirstResponder];
    //Post the notification (to be used by the RootViewController
    [[NSNotificationCenter defaultCenter] postNotificationName:@"navSliderSearchNotification" object:self];
} 
```

### 第 3 步

然后我需要编写*didReceiveNavSliderSearchNotification类（在发布和接收**navSliderSearchNotification*通知时将在 RootViewController 中调用）：

```
-(void)didReceiveNavSliderSearchNotification:(NSNotification *) notification {

    if ([[notification name] isEqualToString:@"navSliderSearchNotification"])
    NSLog (@"Successfully received the search notification!");    

    //Push the next ViewController when the *navSliderSearchNotification* is received
    IndexAndSearch *vc = [[IndexAndSearch alloc]initWithNibName:@"IndexAndSearch" bundle:nil];
    [self.navigationController pushViewController:vc animated:YES];
} 
```

And that is how I managed to push new viewControllers from a separate class (in this case the App Delegate, but I also have it working from other classes as well).

### Final step (optional)

My slider is accessible from everywhere in the app, so I did not unregister from my notifications in the RootViewController (meaning these methods will continue to fire even if the user has been pushed to another viewController). If you do not want this functionality, **make sure to unregister from these notifications** using the following code (it would go in the RootViewController):

```
-(void)viewWillDisappear:(BOOL)animated{
    [[NSNotificationCenter defaultCenter] removeObserver:self name:@"navSliderSearchNotification" object:nil];
} 
```

Like I said, I am not entirely convinced this is the best method. If you have another solution that you prefer, please feel free to post it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:43:03.573

您是否尝试过这样做：

在您的 AppDelegate 中创建一个 UIViewController 变量，该变量始终引用屏幕上的当前 UIViewController（您可能需要在每次创建视图控制器时设置当前控制器）一旦这一切都完成了。在您的 AppDelegate 中使用

```
[self.currentViewController.navigationController pushViewController:anotherNewViewController animated:YES]; 
```

# iphone - 我的 iOS 设备是否需要互联网 (wifi/3g) 才能更新 GPS 位置？

> ID：14690047
> 
> 赞同：1
> 
> 时间：2013-02-04T15:35:41.967
> 
> 标签：iphone, ios, ipad, gps, cllocationmanager

> **可能重复：**
> [是否可以在没有任何互联网连接/禁用蜂窝网络的情况下使用核心位置/GPS？](https://stackoverflow.com/questions/14326890/is-it-possible-to-use-core-location-gps-without-any-internet-connection-disa)

我需要知道我的 iOS 设备（iPhone、iPad、iPod touch）是否需要互联网来更新当前位置，或者 GPS 是否会独立运行，我想知道，因为我的 iPad 不会在没有任何互联网的情况下更新当前位置，并且我想确定是真是假，或者可能是 GPS 位置错误或其他什么。

谢谢，我只是在没有 MKMapKit 的情况下使用 CoreLocation。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:39:47.450

您对 iPad 的看法是正确的，所有支持 3G 或 4G 的设备也将配备完整的 GPS 接收器。因此，他们没有有效的互联网连接来获取位置。

另一方面，如果您的设备有一个活跃的互联网连接，ti 将能够通过 wifi 和手机信号塔信息的三角测量更快地为您提供位置。当设备尝试通过 GPS 获得更准确的位置时，您将首先收到此位置。

# amazon-web-services - 标准和 Spot 实例彼此之间的负载平衡

> ID：14690053
> 
> 赞同：0
> 
> 时间：2013-02-04T15:35:48.513
> 
> 标签：amazon-web-services, amazon-ec2

我一直在阅读 Spot 实例，但仍然找不到一种足够安全且无需停机的方法。如果我启动一个普通实例和一个现货实例然后在它们之间进行负载平衡，是否有可能？

还有其他建议吗？:) ，我不介意使用 Spot 实例，但问题是它在关闭之前没有发出警告。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T02:20:48.043

It is absolutely possible to load balance between spot instances and on demand instances. I'm doing it right now. I'm using two auto scaling (AS) groups. One for Spot and the other for On Demand. The load balancer is specified when you create an AS group. You can specify the number of instances you want or choose to scale based on load. Auto Scaling is not available in the AWS Console at this time, so there may be a learning curve to get yourself up and running with the API.

# sql - 在sql中对case语句DESC进行排序

> ID：14690062
> 
> 赞同：0
> 
> 时间：2013-02-04T15:36:26.660
> 
> 标签：sql, sorting, sql-server-express

我想将我的 ArticleID 向下排序（DESC）。我该如何编辑此代码来做到这一点？太感谢了

```
ORDER  BY CASE 
        WHEN @order = 'AddArticleType.ArticleID' THEN CONVERT(nvarchar,AddArticleType.ArticleID) 
        WHEN @order = 'Title' THEN CONVERT(nvarchar, Title) 
        WHEN @order = 'family' THEN CONVERT(nvarchar, family)
        WHEN @order = 'AddArticleType.ArticleType' THEN 
         CONVERT(nvarchar, AddArticleType.ArticleType ) 
      END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T15:43:53.583

回到您之前帖子中@Gordon 的好答案，这应该有效：

```
ORDER  BY 
   CASE WHEN @order = 'AddArticleType.ArticleID' THEN AddArticleType.ArticleID END DESC,
   CASE WHEN @order = 'Title' THEN Title END,
   CASE WHEN @order = 'family' THEN family END,
   CASE WHEN @order = 'AddArticleType.ArticleType' THEN AddArticleType.ArticleType END 
```

我已经简化了您的测试代码：

[http://sqlfiddle.com/#!3/8a2d3/9](http://sqlfiddle.com/#!3/8a2d3/9)

祝你好运。

# c# - 使用服务器生成的 id 和相关实体在 SQL Server CE 数据库中快速批量插入

> ID：14690063
> 
> 赞同：0
> 
> 时间：2013-02-04T15:36:29.873
> 
> 标签：c#, entity-framework, sql-server-ce, bulkinsert

> **可能重复：**
> [使用 sql CE 的 sqlbulkcopy](https://stackoverflow.com/questions/1606487/sqlbulkcopy-using-sql-ce)

我正在尝试将大量数据从 C# 插入 SQL Server CE 数据库。目前我正在使用实体框架、pocos 和 poco 配置类，因为 pocos 的属性名称与数据库中的列名称不匹配。

我已经阅读了很多关于这个主题的文章和博客文章，但没有一篇完全符合我的服务器生成的 id 和外键的问题。

```
public class Country
{
    public int    Id   { get; set; }
    public string Name { get; set; }
}

public class City
{
    public int    Id      { get; set; }
    public string ZipCode { get; set; }
    public string Name    { get; set; }

    //Foreign Keys
    public int CountryId { get; set; }
}

public class Address
{
    public int Id        { get; set; }
    public string Name   { get; set; }
    public string Number { get; set; }

    //Foreign Keys
    public int CityId    { get; set; }
}

public class Customer
{
    public int Id            { get; set; }
    public string FirstName  { get; set; }
    public string SecondName { get; set; }

    //Foreign Keys
    public int AddressId { get; set; }
}

public class EmailAddress
{
    public int Id       { get; set; }
    public string Email { get; set; }

    //Foreign Keys
    public int CustomerId { get; set; }
} 
```

那是我的 pocos，ID 是服务器生成的。那么在 SQL Server CE 数据库`Customers`中插入大量数据的最快方法是什么`Addresses`？`EmailAddresses`

# sql - Oracle XE 11g 表未正确显示

> ID：14690064
> 
> 赞同：1
> 
> 时间：2013-02-04T15:36:34.180
> 
> 标签：sql, database, oracle11g

我是 Oracle 新手，我在运行 Windows 8 操作系统的笔记本电脑上安装了 Oracle Express Edition 11g。有人告诉我，企业版当然不是免费的，它包含一个名为 EMP 的预定义表。我在大学电脑上看到过这张桌子。但是 XE 并没有附带它。所以我用谷歌搜索了一个包含所有预定义表的脚本（.sql 脚本）。我使用 @ *filepath/filename.sql*导入了它们。但是当我使用

```
 select * from emp; 
```

它错误地显示了表格。我不是指表格的记录，而是表格的格式。

现在查看 DEPTNO 和 EMPNO 列。

[http://postimage.org/image/sut6axlhr/](http://postimage.org/image/sut6axlhr/)

sql脚本中的代码如下

```
--
-- Copyright (c) Oracle Corporation 1988, 1999\.  All Rights Reserved.
--
--  NAME
--    demobld.sql
--
-- DESCRIPTION
--   This script creates the SQL*Plus demonstration tables in the
--   current schema.  It should be STARTed by each user wishing to
--   access the tables.  To remove the tables use the demodrop.sql
--   script.
--
--  USAGE
--       SQL> START demobld.sql
--
--

SET TERMOUT ON
PROMPT Building demonstration tables.  Please wait.
SET TERMOUT OFF

CREATE TABLE BONUS
        (ENAME VARCHAR2(10),
         JOB   VARCHAR2(9),
         SAL   NUMBER,
         COMM  NUMBER);

CREATE TABLE EMP
       (EMPNO NUMBER(4) NOT NULL,
        ENAME VARCHAR2(10),
        JOB VARCHAR2(9),
        MGR NUMBER(4),
        HIREDATE DATE,
        SAL NUMBER(7, 2),
        COMM NUMBER(7, 2),
        DEPTNO NUMBER(2));

INSERT INTO EMP VALUES
        (7369, 'SMITH',  'CLERK',     7902,
        TO_DATE('17-DEC-1980', 'DD-MON-YYYY'),  800, NULL, 20);
INSERT INTO EMP VALUES
        (7499, 'ALLEN',  'SALESMAN',  7698,
        TO_DATE('20-FEB-1981', 'DD-MON-YYYY'), 1600,  300, 30);
INSERT INTO EMP VALUES
        (7521, 'WARD',   'SALESMAN',  7698,
        TO_DATE('22-FEB-1981', 'DD-MON-YYYY'), 1250,  500, 30);
INSERT INTO EMP VALUES
        (7566, 'JONES',  'MANAGER',   7839,
        TO_DATE('2-APR-1981', 'DD-MON-YYYY'),  2975, NULL, 20);
INSERT INTO EMP VALUES
        (7654, 'MARTIN', 'SALESMAN',  7698,
        TO_DATE('28-SEP-1981', 'DD-MON-YYYY'), 1250, 1400, 30);
INSERT INTO EMP VALUES
        (7698, 'BLAKE',  'MANAGER',   7839,
        TO_DATE('1-MAY-1981', 'DD-MON-YYYY'),  2850, NULL, 30);
INSERT INTO EMP VALUES
        (7782, 'CLARK',  'MANAGER',   7839,
        TO_DATE('9-JUN-1981', 'DD-MON-YYYY'),  2450, NULL, 10);
INSERT INTO EMP VALUES
        (7788, 'SCOTT',  'ANALYST',   7566,
        TO_DATE('09-DEC-1982', 'DD-MON-YYYY'), 3000, NULL, 20);
INSERT INTO EMP VALUES
        (7839, 'KING',   'PRESIDENT', NULL,
        TO_DATE('17-NOV-1981', 'DD-MON-YYYY'), 5000, NULL, 10);
INSERT INTO EMP VALUES
        (7844, 'TURNER', 'SALESMAN',  7698,
        TO_DATE('8-SEP-1981', 'DD-MON-YYYY'),  1500, NULL, 30);
INSERT INTO EMP VALUES
        (7876, 'ADAMS',  'CLERK',     7788,
        TO_DATE('12-JAN-1983', 'DD-MON-YYYY'), 1100, NULL, 20);
INSERT INTO EMP VALUES
        (7900, 'JAMES',  'CLERK',     7698,
        TO_DATE('3-DEC-1981', 'DD-MON-YYYY'),   950, NULL, 30);
INSERT INTO EMP VALUES
        (7902, 'FORD',   'ANALYST',   7566,
        TO_DATE('3-DEC-1981', 'DD-MON-YYYY'),  3000, NULL, 20);
INSERT INTO EMP VALUES
        (7934, 'MILLER', 'CLERK',     7782,
        TO_DATE('23-JAN-1982', 'DD-MON-YYYY'), 1300, NULL, 10);

CREATE TABLE DEPT
       (DEPTNO NUMBER(2),
        DNAME VARCHAR2(14),
        LOC VARCHAR2(13) );

INSERT INTO DEPT VALUES (10, 'ACCOUNTING', 'NEW YORK');
INSERT INTO DEPT VALUES (20, 'RESEARCH',   'DALLAS');
INSERT INTO DEPT VALUES (30, 'SALES',      'CHICAGO');
INSERT INTO DEPT VALUES (40, 'OPERATIONS', 'BOSTON');

CREATE TABLE SALGRADE
        (GRADE NUMBER,
         LOSAL NUMBER,
         HISAL NUMBER);

INSERT INTO SALGRADE VALUES (1,  700, 1200);
INSERT INTO SALGRADE VALUES (2, 1201, 1400);
INSERT INTO SALGRADE VALUES (3, 1401, 2000);
INSERT INTO SALGRADE VALUES (4, 2001, 3000);
INSERT INTO SALGRADE VALUES (5, 3001, 9999);

COMMIT;

SET TERMOUT ON
PROMPT Demonstration table build is complete. 
```

我使用*ed*命令来使用记事本并粘贴代码并保存它。然后我使用*运行*命令导入表。现在我的问题是解决这个问题。提前致谢。:) 这是我在任何论坛的第一篇文章，如果我没有正确发布，请见谅。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T15:42:53.320

你的 linesize 太小了。在 sql*plus 中运行它：

```
set linesize 200 
```

在您从表格中选择之前

# javascript - 自动用 if/else 替换条件运算符？

> ID：14690067
> 
> 赞同：3
> 
> 时间：2013-02-04T15:36:43.820
> 
> 标签：javascript, regex, replace, conditional-operator

特定的 JS 解析器（不在我的控制范围内）不理解嵌套的条件运算符语法，如下所示：

```
return num === 1 ? condition ? condition : something : something; 
```

因此，我想**用 if/else blocks 替换文件中的所有条件运算符（简单和嵌套）**。我该怎么做？（Textmate 或类似的正则表达式会很有帮助。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T17:10:04.727

> 我该怎么做？（Textmate 或类似的正则表达式会很有帮助。

我认为正则表达式不可能做到这一点——你需要用它们解析整个 JS 表达式语法。当然，您可以使用它们来查找三元运算符的外观，但需要手动替换它们。

这是因为条件运算符构成表达式，而 if/else 结构是语句。这意味着您需要在 if-else 周围取消包含三元运算符的语句。改造一般有两种解决方案

> *<some statement* ( *condition* `?` *then-expression* `:` *else-expression* ) *>*

1.  > `if (` *（健康）状况* `) {`
    > 
    > *<一些语句然后表达式>*
    > 
    > `} else {`
    > 
    > *<some statement else-expression>*
    > 
    > `}`

2.  > `var helper;`
    > 
    > `if (` *（健康）状况* `)`
    > 
    > `helper =` *然后表达式*`;`
    > 
    > `else`
    > 
    > `helper =` *其他表达式*`;`
    > 
    > *<一些声明* `helper`*>*

选择哪一个取决于*some 语句*的复杂性（对于您的`return`-statement，我会选择 #1）。而且由于替换带来了自己的语法规则，您甚至可能需要调整周围的块。所有这一切都不是一件容易的事，而且只有当你已经有一个解析的 AST 来转换时，imho 才能自动化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-17T07:19:48.600

一种想法是转变`x ? y : z`为`(x && y) || z`. 您可能仍然需要进行一些相当花哨的解析才能找到三元运算符，但至少您可以将它们保留为表达式而不是语句，这意味着所需的更改范围要小得多。但是请注意，在某些情况下，这两个值可能不完全等效（例如，如果`y`为 0），因此请谨慎使用此方法，并且仅当您可以控制将应用到哪些代码时。

的想法`(x && y) || z`是，当 x 为真时，它的计算结果为 y，当 x 为假时，它的计算结果为 z。这是由于 JavaScript 处理非布尔值短路的方式中的一些边缘情况。这是标准布尔算术的一种概括。本质上，JavaScript 将返回它需要检查以执行操作的最后一个值。所以`true && (stuff)`返回`stuff`，而`false && (stuff)`返回`false`。同样`true || (stuff)`返回`true`，而`false || (stuff)`返回`stuff`。

有两种情况需要检查以表明`(x && y) || z`（大部分）做了我们想要的：

## 案例 1：x 为真

由于 x 为真，`(true && y) || z`计算结果为`y || z`。如果 y 也是真实的，那么这将评估为 y 并且我们得到我们想要的行为。如果 y 不真实，则操作失败，我们得到 z！

## 案例 2：x 是假的

由于 x 是假的，因此`(false && y) || z`计算结果为`false || z`，而后者又计算为`z`。在这里，我们很幸运，并且无论 y 总是得到所需的行为。

## 例子

这是 chrome 控制台中所需行为的示例：

```
> var x1 = "a" //truthy
> var x2 = "" //falsey
> var y = "y"
> var z = "z"
> (x1 && y) || z
"y"
> (x2 && y) || z
"z" 
```

请注意`y`不真实的情况！

```
> var y2 = 0
> (x1 && y2) || z
"z" 
```

# java - 基于 Java 的 Android 加密库

> ID：14690069
> 
> 赞同：1
> 
> 时间：2013-02-04T15:36:51.600
> 
> 标签：java, android, encryption

我正在为 Android 寻找基于 java 的加密库。我知道 Android 提供的内置加密。不想要它。谷歌打破了从一种操作系统到另一种操作系统的兼容性。我的应用程序不能依赖它。我还查看了 Bouncy Castle，这是 Android 内部使用但经过修改的。然而，占用空间相当大，约为 1.5 兆。Spongy Castle 可用，但只是具有相同足迹的 Bouncy Castle 的包装。

任何人都知道任何其他库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T16:44:29.753

从 Java 的角度来看，城里几乎仅有的两个游戏是内置的 JCE 提供程序和 BouncyCastle。由于 Oracle 的 JCE 东西不在 Android 中，您可以使用修改后的内置 BoucnyCastle 或 SpongyCastle。

还有其他几个选项（GNU 有一个作为其类路径库的一部分，这可能会达不到您的足迹要求），但老实说，我对使用另一个密码库会非常不安。它们被一小部分人使用（几乎所有不使用内置 JCE 提供程序的人都在使用 BouncyCastle），它们不太可能经过严格的安全审查，因此您可能应该避免使用他们。

如果您担心内置 API 中的 api 中断，我会坚持使用 SpongyCastle。老实说，1.5mb 的占用空间并不大。

# c# - 如何在不在本地机器上安装消息队列的情况下从远程机器读取 MSMQ 消息？

> ID：14690070
> 
> 赞同：4
> 
> 时间：2013-02-04T15:36:52.660
> 
> 标签：c#, .net, msmq

有一台远程机器（我们称之为 MSMQ 机器）安装了 MSMQ 并被其他几个进程使用。我想从我的本地机器上读取 MSMQ 机器的给定私有队列上的消息 - 但是，我想避免在我的机器上安装消息队列，因为我需要的只是检查和监视消息。我不会发送或接收消息（至少不会存储它们），我只是想“偷看”它们。

有没有办法做到这一点？我现在有一个更像这样的代码：

```
public string CheckMessageQueue(machine, queue)
{
    StringBuilder Ret = new StringBuilder();
    var path = machine "\Private$\" + queue;
    try
    {
        MessageQueue mq = new MessageQueue(path);
        Message msg = new Message();
        msg = mq.Peek();
        Console.WriteLine(msg.ToString());
    }
    catch (Exception e)
    {
        Console.WriteLine(e.Message);
    }
} 
```

如果我运行上面的代码，我会收到错误消息

> “此计算机上尚未安装消息队列。”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T09:52:29.127

不，除了在本地计算机上安装 MSMQ 之外别无他法。客户端库使用本地服务器与远程服务器通信。

# android - 按下时的 ImageButton 状态不显示

> ID：14690074
> 
> 赞同：2
> 
> 时间：2013-02-04T15:37:05.587
> 
> 标签：android, selector, imagebutton

我正在尝试创建一个具有默认图像的按钮，但是当按下它时它会切换到新图像。我已经使用[`this tutorial`](http://vimaltuts.com/android-tutorial-for-beginners/android-custom-button)了，[`this question`](https://stackoverflow.com/questions/3996418/android-custom-image-on-off-button)但它不会工作。

这是我的`info_button_selector.xml:`

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true"
          android:drawable="@drawable/ic_menu_info_details2" /> <!-- pressed -->
    <item android:state_focused="true"
          android:drawable="@drawable/ic_menu_info_details2" /> <!-- focused -->
    <item android:drawable="@drawable/ic_menu_info_details" /> <!-- default -->
</selector> 
```

这是我的 ImageButton 的代码：

```
 <ImageButton
                    android:id="@+id/apModeInfoButton"
                    android:layout_width="0dip"
                    android:background="@null"
                    android:layout_height="match_parent"
                    android:layout_weight="1.15"
                    android:clickable="true"
                    android:src="@drawable/info_button_selector" /> 
```

按钮始终保持初始状态`ic_menu_info_details`。

我将`info_button_selector.xml`文件更改为：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true"
          android:drawable="@drawable/ic_menu_info_details2" /> <!-- pressed -->
    <item android:state_focused="true"
          android:drawable="@drawable/ic_menu_info_details2" /> <!-- focused -->
    <item android:drawable="@drawable/ic_menu_info_details2" /> <!-- default -->
</selector> 
```

图像一直显示，这`ic_menu_info_details2`是意料之中的。这表明按钮正在使用 XML 文件作为其可绘制资源，但为什么按钮在按下时不会更改其图像？

**编辑**

使用下面乔斯的回答，图像仍然没有改变，现在以一种奇怪的方式拉伸。注意：两个图像完全相同，只是第二个图像被缩放为大小的 60%。这可能意味着它正在工作，但由于视图被拉伸，我无法判断。

```
 <ImageButton
                    android:id="@+id/apModeInfoButton"
                    android:layout_width="0dip"
                    android:layout_height="match_parent"
                    android:layout_weight="1.15"
                    android:clickable="true"
                    android:background="@drawable/info_button_selector" /> 
```

我使用了这两个版本的 XML 文件以及图像的不同组合，所有组合都导致相同大小的图像永远不会改变。

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true"
          android:drawable="@drawable/ic_menu_info_details" /> <!-- pressed -->
    <item android:state_focused="true"
          android:drawable="@drawable/ic_menu_info_details" /> <!-- focused -->
    <item android:drawable="@drawable/ic_menu_info_details" /> <!-- default -->
</selector>

<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true"
          android:drawable="@drawable/ic_menu_info_details2" /> <!-- pressed -->
    <item android:state_focused="true"
          android:drawable="@drawable/ic_menu_info_details2" /> <!-- focused -->
    <item android:drawable="@drawable/ic_menu_info_details2" /> <!-- default -->
</selector> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T15:40:30.600

将该可绘制对象设置为 ImageButton**背景**而不是**src**。

```
 <ImageButton
          android:id="@+id/apModeInfoButton"
          android:layout_width="0dip"
          android:background="@drawable/info_button_selector"
          android:layout_height="match_parent"
          android:layout_weight="1.15"
          android:clickable="true" /> 
```

**编辑以跟进失真问题：**

那么你可以做的就是将图层分开。

因为背景是可拉伸的，所以将其设置为背景，并将不应拉伸的图像分开并将其设置为 SRC。

```
<ImageButton
         android:id="@+id/apModeInfoButton"
         android:layout_width="0dip"
         android:src="@drawable/non_scaleable_image"
         android:background="@drawable/gradient_bg"
         android:layout_height="match_parent"
         android:layout_weight="1.15"
         android:clickable="true" /> 
```

这样，您可以将背景作为渐变并使其拉伸而不会降低质量，并且 SRC 图像不会调整大小和扭曲。

这才是真正应该使用 ImageButton 的目的。

或者，按照我在第一个答案中的建议进行操作，但使用 Button 代替。让我知道这是否有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T16:10:34.020

您应该尝试使用完整的不同图像来获取详细信息2，并查看图像是否实际上正在更改，但没有重新调整大小。我不希望有状态按钮重新调整大小，也许使用两个不同的图像并设置可见性。

# c++ - 如何使一个函数在 Qt 中暂时成为一个插槽？

> ID：14690078
> 
> 赞同：3
> 
> 时间：2013-02-04T15:37:17.980
> 
> 标签：c++, qt, slot

要使类的函数成为槽，该类必须继承自 QObject。但是，QObject 占用了相当多的内存。我不确定它是多少，以及内存是否适用于每个类或每个对象。我的代码有很多小数据，它们的功能有时可能是一个槽。我想知道在使用它时是否有一种方法可以使类的功能暂时成为一个插槽。使用后，slot cost的内存将被删除。以下代码说明了要求。

```
class SmallData // size of 2 or 3 integers.
{
public:
    virtual void F(); // use it as a slot.
    virtual QMenu* createMenu(); // use this to create the context menu with
                                 // an action connected to F()
    ...
};

// use the small data
vector<SmallData> vec(1000000); // the vector is put at a tree view. When an
                                // item in the tree view is selected, a context
                                // menu pop up with an action to run F().
SmallData* data = treeView.selectedItem();    
connect(action, SIGNAL(triggered()), data, SLOT(F())); // How to make F() to be
                                                       // a slot just here.
                                                       // The action is from 
                                                       // data->createMenu(). 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T16:18:06.227

如果您可以使用 Qt5，您可以[将信号连接到普通函数和静态方法](http://qt-project.org/wiki/New_Signal_Slot_Syntax)（本质上是有趣的普通函数）：

```
connect(action, &QAction::triggered, 
        &SmallData::statF); 
```

where`action`是一个`QAction`实例，并且`SmallData::statF`是 的静态方法`SmallData`。

根据 Christian Rau 的评论进行编辑，以调用特定实例，您还可以连接到 lambda：

```
connect(action, &QAction::triggered,
        [data]() { data->F(); }); 
```

已经使用 Qt4，您可以使用[`QSignalMapper`](http://qt-project.org/doc/qt-5.0/qtcore/qsignalmapper.html#details)更多的对象来实现几乎相同的效果。它允许您添加一个参数（在这种情况下，可能是您的整数索引`vec`）来发出信号，基于哪个对象发出它。但是在 Qt4 中，receiver 仍然必须始终是一个 QObject。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T15:59:57.883

对于使用信号槽机制，您将无法绕过`QObject`，但您可以做的是创建一个临时对象，该对象具有调用您的函数的槽。您只需要注意正确释放对象即可。就像是：

```
class Callback : public QObject
{
    Q_OBJECT

public:
    typedef std::function<void()> FunctionType;

    Callback(FunctionType fn, bool oneShot = true, QObject *parent = nullptr)
        : QObject(parent), fn_(std::move(fn)), oneShot_(oneShot) {}

public slots:
    void call()
    {
        fn_();        //delegate to callback
        if(oneShot_)
            deleteLater();  //not needed anymore
    }

private:
    FunctionType fn_;
    bool oneShot_;
};

Callback* makeCallback(FunctionType fn, bool oneShot = true, QObject *parent = nullptr)
{
    return new Callback(std::move(fn), oneShot, parent);
} 
```

`Callback`然后，您只需在每次需要时创建一个（或多或少是临时的）对象：

```
SmallData* data = treeView.selectedItem();
connect(action, SIGNAL(triggered()), 
        makeCallback(std::bind(&SmallData::F, data)), SLOT(call())); 
```

使用该`oneShot`参数，您可以控制插槽是否应在触发后自动解散。

唯一的问题是，如果这个插槽从未被调用过，你就会有泄漏`Callback`。为了适应这一点，您可以将一些有意义的东西传递给`parent`参数，以便 Qt 至少在以后的某个时间点关心正确的删除：

```
SmallData* data = treeView.selectedItem();
connect(action, SIGNAL(triggered()), 
        makeCallback(std::bind(&SmallData::F, data), true, this), SLOT(call())); 
```

通过这种方式，您还可以将回调对象（以及信号槽连接）的生命周期绑定到其他对象（例如，动作本身以及在未选择任何项目时删除动作，或类似的东西）。

或者，您还可以记住`Callback`当前选定项目的对象，并在删除后自行正确删除。

**免责声明：**请注意，上面的示例包含大量 C++11，但我没有心情为 C++03 重写它。同样，这个解决方案是否可以进一步改进，也许使用模板仿函数而不是 a `std::function`（但如果我没记错的话，Qt 元对象系统不太喜欢模板）。

* * *

**编辑：最后，***弗兰克奥斯特菲尔德*在他的评论中提出的解决方案可能比我上面过于通用的对象生命周期疯狂更简单得多：只需将操作连接到更高级别对象的单个插槽（您的主小部件或可能是包含数据向量的项目模型）并调用`F`当前选定的项目：

```
connect(action, SIGNAL(triggered()), this, SLOT(callF()));
...
void MyController::callF()
{
    treeView.selectedItem()->F();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T15:46:32.967

我认为您尝试做的事情在 Qt 中是不可能的。

如果你真的不想继承 QObject，那么我建议你看看[boost 信号和槽机制](http://www.boost.org/doc/libs/1_52_0/doc/html/signals2.html)。

# web-applications - 按下时突出显示命令按钮 jsf 2.1

> ID：14690079
> 
> 赞同：0
> 
> 时间：2013-02-04T15:37:23.453
> 
> 标签：web-applications, jsf-2, java-ee-6

我正在使用 JSF 2.1 编写 Web 应用程序。我想使用 2 个按钮将我带到传递参数的两个不同视图。但默认情况下，我“按下”了一个按钮，因此它应该在视图中“按下”。我怎么能表现出这种行为？这是我有两个按钮的一小段代码：

```
 <h:outputLabel value="Color:" />
                                    <!--blue button is highlighted as pressed by default -->
                                    <h:commandButton  value ="blue" action="#{bean.update}" >
                                        <f:setPropertyActionListener target="#{bean.color}" value="blue" />
                                    </h:commandButton>

                                    <!--green button is highlighted as pressed when clicked -->
                                    <h:commandButton value ="green" action="#{bean.update}" >
                                            <f:setPropertyActionListener target="#{bean.color}" value="de" />
                                    </h:commandButton> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T19:12:53.160

您可以像添加普通按钮一样向 h:commandButton 添加任何类型的样式。例如，要让按钮感觉被禁用，您可以默认设置第一个按钮的不透明度。

```
<h:commandButton  value ="blue" action="#{bean.update}" 
                  style="opacity: 0.65" >
                 <f:setPropertyActionListener target="#{bean.color}" value="blue" />
</h:commandButton> 
```

`styleClass`或者只是使用属性将 css 类添加到您的按钮

```
<h:commandButton  value ="blue" action="#{bean.update}" 
                  styleClass="pressedButtonStyle" >
                 <f:setPropertyActionListener target="#{bean.color}" value="blue" />
</h:commandButton> 
```

要更改第二个按钮的类，您可以使用 onClick 函数向按钮添加新的 css 样式：

```
<h:commandButton value ="green" action="#{bean.update}" onClick="$(this).addClass("pressedButtonStyle")" >
    <f:setPropertyActionListener target="#{bean.color}" value="de" />
</h:commandButton> 
```

如果您想在返回页面后保持按钮的状态，您可以根据以下条件应用这些类：

```
<h:commandButton  value ="blue" action="#{bean.update}" style="opacity : #{bean.color eq 'blue' ? 0.65 : 1}">
      <f:setPropertyActionListener target="#{bean.color}" value="blue" />
</h:commandButton>

<!--green button is highlighted as pressed when clicked -->
<h:commandButton value ="green" action="#{bean.update}"  style="opacity : #{bean.color eq 'de' ? 0.65 : 1}" >
      <f:setPropertyActionListener target="#{bean.color}" value="de" />
</h:commandButton> 
```

# clojure - 如何检查一个值是否是一个承诺？

> ID：14690082
> 
> 赞同：3
> 
> 时间：2013-02-04T15:37:28.867
> 
> 标签：clojure

有：

```
(def x (promise)) 
```

如何检查 x 的类型是一个承诺？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T15:45:01.870

我会说你一般不能。因为 promise 是由`reify`几个接口创建的：`IDeref`, `IBlockingDeref`, `IPending`, `IFn`. 但是您可以检查 value 是否实现其中之一：`clojure.lang.IPending`.

```
(defn promise? [v]
  (instance? clojure.lang.IPending p)) 
```

或者甚至全部：

```
(defn promise? [v]
  (every? #(instance? % v) 
         [clojure.lang.IPending 
          clojure.lang.IFn 
          clojure.lang.IBlockingDeref 
          clojure.lang.IDeref])) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T15:44:45.780

我会去

```
(defn promise? [p]
  (isa? (class p) clojure.lang.IPending)) 
```

# android - 每次 invalidate() 在surfaceView上保存更改

> ID：14690086
> 
> 赞同：0
> 
> 时间：2013-02-04T15:37:38.713
> 
> 标签：android, android-canvas, android-view

我有一个扩展 SurfaceView 并实现 SurfaceHolder.Callback 的类。使用 onDraw() 方法我在画布上绘制了一些位图。在按下按钮后，我正在向画布添加新图像，调用 invalidate()。是否有可能保存我对之前的每个 invalidate() 所做的所有更改，以便在 new invalidate() 之后添加新图像，而不是删除之前的图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:55:00.673

据我了解，您将要保存绘制的图像及其位置？通过使用我提供的代码，您将拥有一个包含图像和位置的列表。列表是无序的；如果你想要一个有序列表，你可以使用 a`LinkedList`代替。

创建一个新类，您可以将其命名为任何名称。

```
public class ImageHolder {
    private int mX;
    private int mY;
    private int mDrawableResource;
    private String mBitmapFilePath;

    public ImageHolder(int x, int y, int drawableResource, String bitmapFilePath) {
        mX = x;
        mY = y;
        mDrawableResource = drawableResource;
        mBitmapFilePath = bitmapFilePath;
    }

    public int getX() {
        return mX;
    }

    public int getY() {
        return mY;
    }

    public int getDrawableResource() {
        return mDrawableResource;
    }

    public String getBitmapFilePath() {
        return mBitmapFilePath;
    }
} 
```

然后在您的 SurfaceView 中，每次绘制到列表时都将其添加为持有人。请注意，这是最少的代码，因此没有添加同步。

```
private void customDrawMethod() {
        mImageHolders.add(new ImageHolder(x, y, drawableResource, bitmapFilePath));

        Canvas canvas = getHolder().lockCanvas();

        canvas.drawBitmap(bitmap, matrix, paint);

        getHolder().unlockCanvasAndPost(canvas);
    } 
```

我添加了 Bitmap 和 Drawable，因为我不确定您使用的是什么。我无法发布更多代码，因为我不知道您想对保存的图像做什么。更多信息可以进一步帮助您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T03:51:51.083

这是使用位图存储您以前的画布的非常简单的案例。只需将位图附加到您的画布上。在绘制之前，将旧位图保存到类似“prevBitmap”的位置，然后在上面绘制。您可以通过调用 canvas.drawBitmap(prevBitmap); 重绘之前的 Bitmap；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T10:58:40.897

您可以将旧图纸保存在画布上，添加新图片时不要再次绘制它们。当您需要将具有左上点坐标 (x, y) 和大小 (sizeX, sizeY) 的新图像添加到视图的画布时，只需调用 invalidate(x, y, x+sizeX, y+sizeY) 即可。即将将所有图像保存在您已经得到答案的数组中。PS对不起我的英语，希望它有帮助

# matlab - 支持（x）函数

> ID：14690090
> 
> 赞同：0
> 
> 时间：2013-02-04T15:38:00.583
> 
> 标签：matlab

我正在尝试编写一个`matlab`找到*模糊集*支持的函数。

首先，要知道什么`support(x)`意思，它是：一个包含隶属度> 0元素的清晰集合

一个隶属函数的例子在[这里](http://www.mathworks.fr/fr/help/fuzzy/trapmf.html)。

例如，如果我在 matlab 中运行以下命令（请注意， trapmf 是模糊逻辑工具箱的一部分，以防它不与您一起运行）

```
>> x=1:5

x =

     1     2     3     4     5

>> y=trapmf(x,[1 3 4 5]);
>> y

y =

         0    0.5000    1.0000    1.0000         0 
```

因此，`support(x)`这里将是：`2,3,4`，因为这些是具有非零成员值的元素。

有了这个想法，我尝试将其作为 matlab 函数（.m 文件）执行，如下所示：

```
function support(x)
   y = trapmf(x,[1 3 4 5]);
for i=1:length(y)
    if(y(i) == 0)
        x(i)
    end   
end 
```

但是，当我运行它时，我得到以下信息：

```
>> support(x)

ans =

     1

ans =

     5 
```

这是为什么？我应该在代码中修复什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:45:26.273

不确定您的代码在做什么，但是如何使用它：

```
function s = support(x)
   y = trapmf(x,[1 3 4 5]);
   s = x(y~=0) 
```

# java - Handler.postAtTime 与 Handler.postDelayed

> ID：14690093
> 
> 赞同：6
> 
> 时间：2013-02-04T15:38:07.917
> 
> 标签：java, android

android [Handler](http://developer.android.com/reference/android/os/Handler.html)类包含这个方法：

```
public final boolean postAtTime (Runnable r, Object token, long uptimeMillis) 
```

在给定时间发布 Runnable。由于此方法`token`，以后可以使用 来`r`从消息队列中删除回调：

```
public final void removeCallbacks (Runnable r, Object token) 
```

Handler类**中不存在**以下方法

```
public final boolean postDelayed (Runnable r, Object token, long delay) 
```

是否有充分的理由不提供这种方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T16:08:23.133

看了源码，token对象最终传递给Message：

```
public final boolean postAtTime(Runnable r, Object token, long uptimeMillis)
308    {
309        return sendMessageAtTime(getPostMessage(r, token), uptimeMillis);
310    }

private static Message getPostMessage(Runnable r, Object token) {
608        Message m = Message.obtain();
609        m.obj = token; 
```

和 postDelay

```
 public final boolean postDelayed(Runnable r, long delayMillis)
330    {
331        return sendMessageDelayed(getPostMessage(r), delayMillis);
332    } 
```

如果你想要的是

```
public final boolean postDelayed (Runnable r, Object token, long delay) 
```

那为什么不直接使用

```
public final boolean postAtTime (Runnable r, Object token, long uptimeMillis) 
```

因为它是一样的。

**更新，忘了添加这个：**

```
public final boolean sendMessageDelayed(Message msg, long delayMillis)
442    {
443        if (delayMillis < 0) {
444            delayMillis = 0;
445        }
446        return sendMessageAtTime(msg, SystemClock.uptimeMillis() + delayMillis);
447    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T16:33:08.717

查看 Handler 源代码，似乎有：

```
private final Message getPostMessage(Runnable r, Object token) {
    Message m = Message.obtain();
    m.obj = token;
    m.callback = r;
    return m;
} 
```

可以根据您的需要复制哪个：而不是调用`postDelayed`，将您的可运行文件包装在这样的消息中

```
sendMessageDelayed(getPostMessage(r, token), delayMillis); 
```

然后你可以使用`removeCallbacks()`with token 作为参数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-22T17:58:40.077

这是一个老问题，但在 API **28**`postDelayed`中添加了以令牌作为参数的方法版本：参见[https://developer.android.com/reference/android/os/Handler#postDelayed(java.lang.Runnable,% 20java.lang.Object,%20long)](https://developer.android.com/reference/android/os/Handler#postDelayed(java.lang.Runnable,%20java.lang.Object,%20long))

 **`postAtTime`对于较旧的 API 版本，如果需要令牌以稍后删除回调，则仍然必须使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T15:41:57.190

要从处理程序 H 中删除 postDelayed 可运行 r，只需调用 H.removeCallbacks(r)。为什么需要令牌？**

# objective-c - Xcode 在构建 Mac 应用程序以进行发布时显示错误

> ID：14690097
> 
> 赞同：3
> 
> 时间：2013-02-04T15:38:34.200
> 
> 标签：objective-c, xcode, macos, cocoa

我正在使用核心数据为 OS X 编写应用程序。构建和运行它进行调试是没有问题的，但是当我切换到发布或尝试归档它时，它会抛出错误

```
'/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/System/Library/Frameworks/CoreData.framework/Headers/NSFetchRequestExpression.h:15:39: Attempting to use the forward class 'NSExpression' as superclass of 'NSFetchRequestExpression' 
```

当我从代码中删除所有获取请求时，它工作正常。有谁知道这可能是什么问题？谢谢你。

这是标题：

```
#import <Cocoa/Cocoa.h>
#import <CoreData/CoreData.h>
#import "EFMainController.h"

@interface EF_AppDelegate : NSObject
{
    IBOutlet NSMenu *statusMenu;
    NSStatusItem *statusItem;
    NSWindow *window;

    NSPersistentStoreCoordinator *persistentStoreCoordinator;
    NSManagedObjectModel *managedObjectModel;
    NSManagedObjectContext *managedObjectContext;
    EFMainController *mainController;
    NSTabView *tabView;
    IBOutlet NSImageView *dockTileView;
}

@property (nonatomic, retain) IBOutlet NSWindow *window;
@property (nonatomic, retain) IBOutlet EFMainController *mainController;
@property (assign) IBOutlet NSTabView *tabView;

- (NSPersistentStoreCoordinator *)persistentStoreCoordinator;
- (NSManagedObjectModel *)managedObjectModel;
- (NSManagedObjectContext *)managedObjectContext;
- (IBAction)saveAction:sender;

@end 
```

和

```
#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>

@interface EFMainController : NSObject  {
    /* some variables */
}

/* some properties and actions */
@end 
```

我发表评论的东西与核心数据无关

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T13:22:09.687

我有一个程序，我遇到了同样的问题，到目前为止我还不能真正解决它，但我能够在某种程度上构建它以供发布。所以我想这不是一个真实/完整的答案，但对我来说，它可以使用 Product > Build For > Archiving。

# php - 检索循环中的所有值并将其格式化为 json

> ID：14690098
> 
> 赞同：0
> 
> 时间：2013-02-04T15:38:37.937
> 
> 标签：php, json

我正在尝试构建一个查询我的数据库然后格式化输出的页面，以便另一个`webservice/page`可以访问数据。

理想情况下，我想探索 JSON 格式的数据，但这不起作用。我遇到的另一个比 JSON 不工作更重要的问题是，如果我有 3 条记录`$reportsResult`，则只显示最后一条。

请任何有帮助的人。哦，我还需要`print_r`外部网页来检索数据还是有更好的方法？

```
class Pupil {
    public $FirstName = "";
    public $LastName  = "";
}

foreach($reportsResult->getRecords() as $reportRecord) {
    $Pupil = new Pupil();
    $Pupil->FirstName = $reportRecord->getField('FName');
    $Pupil->LastName = $reportRecord->getField('SName');
}
json_encode($Pupil); 
```

OK 设法弄清楚如何从循环中获取所有记录，但是当我执行 print_r 时它仍然没有以 json 格式显示 - 我错过了什么吗？

```
$AllPupils = array();

foreach($reportsResult->getRecords() as $reportRecord)
{

$Pupil = new Pupil();
$Pupil->FamID = $reportRecord->getField('FName');
$Pupil->ChildName = $reportRecord->getField('SName');

array_push($AllPupils, $Pupil);
}

json_encode($AllPupils); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T15:45:37.117

每次您的 foreach 循环再次开始时，它都会覆盖您的`$Pupil`变量。尝试使用数组：

```
$Pupil = array()
$i = 0;
foreach($reportsResult->getRecords() as $reportRecord) {
    $Pupil[$i] = new Pupil();
    $Pupil[$i]->FirstName = $reportRecord->getField('FName');
    $Pupil[$i]->LastName = $reportRecord->getField('SName');
    $i++;
}
echo json_encode($Pupil); 
```

编辑：**mikemackintosh 的**解决方案也应该可以工作，并且可能会更快一些（取决于你的 foreach 循环的大小）。

要显示您需要`echo`的数据的结果（不仅`json_encode`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:46:10.677

您可能会遇到问题，因为`json_encode`不会处理整个对象。为此，您可能需要序列化`$Pupil`对象。

不过，像下面这样的东西可能对你有用。它将值分配给返回的数组，这将允许`json_encode`优雅地执行：

```
class Pupil {
    public $FirstName = "";
    public $LastName  = "";

    public function getAttr(){
        return array("FirstName" => $this->FirstName, "LastName" => $this->LastName);
    }
}

$json = array();

foreach($reportsResult->getRecords() as $reportRecord) {
    $Pupil = new Pupil();
    $Pupil->FirstName = $reportRecord->getField('FName');
    $Pupil->LastName = $reportRecord->getField('SName');

    $json[] = $Pupil->getAttr();
}

echo json_encode($json); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T15:50:54.713

我不确定你为什么要定义那个类，但你知道你的 for each 中有什么类似的东西

```
foreach ($reportsResult->getRecords() as $key => $record) {
  $data[$key]['firstname'] = $record->getField('Fname');
  $data[$key]['lastname'] = $record->getField('Sname');
} 
```

然后您可以使用 print_r 检查最终数组，在输出时您可以简单地执行 print json_encode($data)，它将为您提供数据数组中所有项目的 json 字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T15:55:26.367

在 php 中（至少）， json_encode 将数组作为参数。
因此，您应该向您的类添加一个构造函数

```
function __construct($first, $last)
{
    this.$FirstName = $first;
    this.$LastName = $last;
} 
```

一个用于将全名作为一个数组，准备好被 jsoned

```
function getNameArray()
{
    $nameArray = array();
    $nameArray['firstName'] = this.$FirstName;
    $nameArray['lastName'] = this.$LastName;

    return $nameArray;
} 
```

然后在那个 foreach 你用所有学生构建另一个数组

```
$pupils = array();
foreach (bla bla)
{
    $first = $reportRecord->getField('FName');
    $last = $reportRecord->getField('SName');
    $Pupil = new Pupil($first, $last);

    array_push($pupils, $pupil.getNameArray());
} 
```

最后，你已经准备好了一切

```
json_encode($pupils); 
```

我确定还有其他方法可以调试您的东西，我也主要使用 print_r 。

# iphone - [viewcontroller_name tableView:cellForRowAtIndexPath:]: 无法识别的选择器发送到实例 0x7b3a630'

> ID：14690100
> 
> 赞同：0
> 
> 时间：2013-02-04T15:38:41.853
> 
> 标签：iphone, ios, uitableview

![在此处输入图像描述](../Images/2c2bccafbd67a0b58da4e03c19e4b70a.png)

我有一个应用程序，它有一个 UITableViewController 这是我的设置页面。我正在使用 self.navigationController （使用情节提要 ID）推送带有 presentModalViewController 的 UITableViewController。但是每次我尝试查看该页面时，它都会显示异常。在阅读了几篇文章后，我尝试实现两种方法

```
- (NSInteger)tableView:(UITableView*)tableView numberOfRowsInSection:(NSInteger)section
{
return 3;
}

- (UITableViewCell*)tableView:(UITableView*)tableView cellForRowAtIndexPath:(NSIndexPath  *)indexPath
{
UITableViewCell *cell = [super tableView:tableView
                   cellForRowAtIndexPath:indexPath];
return cell;
}
**my .h File**

@interface Setting : UITableViewController<UITableViewDelegate,UITableViewDataSource> 
```

我已经在 IB 中完成了所有 UI 设置，所以我没有更改上述两种实现方法中的任何内容。

在我将视图推送到 UITableViewController 的 mainviewcontroller 中，我使用以下代码

```
Setting *nextController = [[self storyboard] instantiateViewControllerWithIdentifier:@"setting"];
[self presentModalViewController:nextController animated:YES];
Setting *dvc = [[Setting alloc] init];
[self.navigationController pushViewController:dvc animated:YES]; 
```

![IB中的所有用户界面](../Images/3754e19a461aaf55d622259504703e1c.png)

由于我已经在 IB 中设置了所有 UI，为什么我需要实现这些方法？至少我可以正确地看到视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T18:30:19.127

看起来您正在尝试两次初始化同一个 viewController。你不需要`alloc] init]`追你`instantiateViewControllerWithIdentifier.`至少，根据我的经验，你不需要。尝试这个：

```
Setting *nextController = [[self storyboard] instantiateViewControllerWithIdentifier:@"setting"];
[self.navigationController pushViewController:nextController animated:YES]; 
```

这会将`nextController`带有`storyBoardID`“设置”的“推”从右侧“推”到您现有的`NavigationController`.

但是，根据我的直觉，我相信您想以模态方式呈现一个设置视图，它有自己的`NavigationController`. 在这种情况下，请尝试以下代码，它将 Settings 包装`ViewController`到 a`NavigationController`中，并以模态方式呈现整个内容，以便您可以在设置中导航：

```
Setting *nextController = [self.storyboard instantiateViewControllerWithIdentifier:@"setting"];
UINavigationController *navcont = [[UINavigationController alloc] initWithRootViewController:nextController];
navcont.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
[self presentViewController:navcont animated:YES completion:nil]; 
```

或者，您可以在情节提要本身中完成所有这些操作。选择您的设置视图控制器，然后转到编辑器菜单 > 嵌入... > 导航控制器。然后`segue`从您的按钮到包含设置控制器的导航控制器。将 segue 设置为“Modal”，就完成了。

# ms-office - Powerpoint - 使加载项与更多版本的 PowerPoint 兼容

> ID：14690107
> 
> 赞同：0
> 
> 时间：2013-02-04T15:39:23.777
> 
> 标签：ms-office, add-in, powerpoint

我正在编写简单的 powerpoint 插件，它在幻灯片更改时发送 xmlhttp 请求。是否可以创建一个与更多版本的 powerpoint 兼容的加载项？还是我必须为每个版本单独开发它？如何在不安装所有 MS Office 的情况下为更多版本的 MS Office 开发加载项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:52:37.033

你没有提到你使用什么工具来开发插件。我的理解是，如果你想使用 Visual Studio 为多个版本的 PPT 编写，你或多或少不走运，除非你有多台计算机或多个 VM 等等。

如果您使用的是 VBA，那么编写一个与早在 2000 年的所有版本兼容的加载项并不是特别困难。它有一些技巧，如果您不使用 PowerPoint 97，它会变得简单得多混合。

# nginx - 代码部署后如何强制浏览器重新加载静态资产？

> ID：14690113
> 
> 赞同：2
> 
> 时间：2013-02-04T15:40:12.763
> 
> 标签：nginx, varnish

我正在运行以下设置：haproxy -> web traffic -> varnish -> nginx（提供静态资产）-> node.js（动态内容）和 haproxy -> websockets -> node.js

如何在代码部署后强制浏览器刷新静态资产（JavaScript、CSS、..）？（过期/清除缓存？）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T15:42:16.670

您可以使用修订号将查询字符串添加到文件中。增加修订号将强制所有资产返回到浏览器。

```
<script type="text/javascript" src="jquery.min.js?r=223"></script> 
```

# .net - 同时使用 VS 2010 和 VS 2012

> ID：14690124
> 
> 赞同：0
> 
> 时间：2013-02-04T15:40:52.813
> 
> 标签：.net, visual-studio-2010, visual-studio-2012

我需要知道是否可以在同一台机器上同时使用 VS 2010 和 VS 2012。

*   这意味着，我的项目使用 vs 2010 运行 MVC 2。

*   那么当我在我的机器上安装 vs 2012 时，它会影响我在 vs 2010 上运行的项目。

*   换句话说，我需要不时地工作这两个版本。根据项目。

*   我不知道将 MVC 2 项目转换为 MVC 4 或与 vs 2012 兼容。

*   当我需要使用 vs 2010 项目时，我必须拥有这种自由。

那么在我的笔记本电脑上安装 vs 2012 后我可以这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T15:43:44.480

我发现 VS2010 和 VS2012 在同一台机器上共存就好了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T15:50:52.147

不，它不会影响任何项目。

是的，据我所知，您可以使用 VS 2012 打开您的项目，VS 2010 和 VS 2012 之间没有代码更改。

是的，您可以在同一台机器上使用这两个版本，我也在这样做。

确保在出现任何问题之前备份您的资料。

# java - 如何使用更新的空对象启动数组？

> ID：14690125
> 
> 赞同：1
> 
> 时间：2013-02-04T15:40:54.780
> 
> 标签：java

我有一个（相当静态的）类，例如：

```
class Test
{
    private Planet gault;
    private Planet irtok;
    private Planet ktaris;

    /* problem:
    private Planet [] planets = {
        this.gault, this.irtok, this.ktaris
    };
    */

    Test() {

    }

    public void doTest() {
        this.gault  = new Planet("Klingon", 1322);
        this.irtok  = new Planet("Ferengi", 1213);
        this.ktaris = new Planet("Ktarian", 16512);
    }
} 
```

我想要的（如果可以的话）是有一个指向每个行星的数组 - .

```
private Planet [] planets = {
    this.gault, this.irtok, this.ktaris
}; 
```

这样我就`doTest()`可以执行以下操作：

```
for (Planet p: in planets)
    p.printInfo(); 
```

从我尝试过的各种方式来看，我总是以`p`NULL 告终；

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T15:43:40.837

> 从我尝试过的各种方式来看，我总是以 p 为 NULL 结束；

这很可能是因为以下字段是`null`您复制它们时的

```
private Planet [] planets = {
   this.gault, this.irtok, this.ktaris
}; 
```

我建议制作这些行星`final`。

```
private final Planet gault  = new Planet("Klingon", 1322);
private final Planet irtok  = new Planet("Ferengi", 1213);
private final Planet ktaris = new Planet("Ktarian", 16512); 
```

使用调试器是检查这一点的简单方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T15:45:03.563

您的行星默认为空。`doTest()`您只需在方法中初始化它们。但是初始化行星数组的行很久以前就执行过：在构造测试对象时。所以此时，所有的行星仍然是空的，因为`doTest()`还没有被调用。

数组应该在行星之后立即初始化。一切都应该在构造函数中完成，而不是在`doTest()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T15:46:08.367

创建一个引用行星的类`PlanetHolder`：

```
public class PlanetHolder {
    Planet p
} 
```

现在将您的代码更改为以下内容：

```
class Test {
    private PlanetHolder gault = new PlanetHolder();
    private PlanetHolder irtok = new PlanetHolder();
    private PlanetHolder ktaris = new PlanetHolder();

    private PlanetHolder [] planets = {
        this.gault, this.irtok, this.ktaris
    };

    public void doTest() {
        this.gault.p  = new Planet("Klingon", 1322);
        this.irtok.p  = new Planet("Ferengi", 1213);
        this.ktaris.p = new Planet("Ktarian", 16512);
    }
} 
```

现在您可以遍历行星并打印它们：

```
for (PlanetHolder p : planets) {
    p.p.printInfo();
} 
```

# javascript - 禁用 (Ctrl+U) 键盘脚本以防止查看源代码

> ID：14690127
> 
> 赞同：-3
> 
> 时间：2013-02-04T15:41:00.467
> 
> 标签：javascript, jquery, keyboard

我正在寻找禁用键盘脚本以保护隐藏内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T15:42:44.917

这是**不可能的**。用户将始终能够查看您的源代码，因为他需要下载它才能呈现页面。

查看源代码的方法比您试图阻止的方法更多：

*   使用萤火虫
*   使用 wget
*   右键单击内容选择“查看源代码”
*   使用菜单选项
*   通过中间的人
*   可能更多...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:51:00.103

这不是很复杂，但完全不可靠。它与所有其他 Javascript 保护相同。
首先诀窍（IE不兼容）：

```
function denyKey(event) {
    var code = event.keyCode;  
    if(event.ctrlKey) {
      if(code==85) 
        return false;
    }
}
window.addEventListener("keydown", denyKey); 
```

我的代码只是草稿，它不是跨浏览器。这是[获取 keyCodes](http://www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes)的地方。我没有在代码上投入太多精力，因为我想阻止您使用它。
一旦您将数据发送给用户，他**就可以读取数据**，除非您在不给他密钥的情况下对其进行加密。这意味着任何：

1.  Javascript 身份验证
2.  秘密加载页面
3.  Javascript“等待下载...”
4.  被阻止的鼠标按钮

..可以并且将被**用户绕过。**

例如，我有一个小[书签](http://en.wikipedia.org/wiki/Bookmarklet)可以解锁鼠标按钮。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-04T15:43:04.597

这是不可能的，即使是这样，那也是一种可怕的保护。甚至我也可以编写一个简单的脚本来获取任意页面的源代码。客户看到的所有内容都可以“查看源代码”（有人对其进行编辑）。只有服务器端代码是安全的。即使只能通过真正的浏览器查看您的页面（但您不能这样做），您也可能会忽略加速键或其他快捷方式。如果您不希望客户看到某些代码，**请不要将其提供给他！**将其保留在服务器端（而不是在`.txt`文件中，也可以访问）或不保留它。

# image - swf 在 Flash 中相互叠加加载

> ID：14690128
> 
> 赞同：0
> 
> 时间：2013-02-04T15:41:01.057
> 
> 标签：image, actionscript-3, flash, image-gallery

我有一个 Flash 文件（横幅广告），我需要一个图片库和一个 flv 播放器，我有。为了节省空间，我使用了一个加载器通过他们的 swf 文件使用一个按钮来调用它们。但是当我这样做时，它会在我的主 Flash 页面顶部调用 swf，不断地将越来越多的页面叠加在一起。

这是我的加载程序代码：

```
var loadedSWF:Loader = null;
var req:URLRequest = new URLRequest("imagegallery.swf");
loadedSWF = new Loader();
loadedSWF.load(req);

function loadSWF(file:String, container:MovieClip=null):void
{
if(container == null) container = MovieClip(root);

// removes the previously loaded SWF
if(loadedSWF != null)
{
    if(loadedSWF.parent) loadedSWF.parent.removeChild(loadedSWF);
}

addChild(loadedSWF);
}
imageGallery_btn.addEventListener(MouseEvent.CLICK, _click);
function _click(e:MouseEvent):void
{
  loadSWF("imagegallery.swf");
} 
```

这是我在这个网站上找到的一些代码。

![这是问题的图像：](../Images/e5d5a1861d098dbb4afeea1f60aa7c6f.png)

# .net - .NET Layout 事件的关系

> ID：14690131
> 
> 赞同：1
> 
> 时间：2013-02-04T15:41:12.953
> 
> 标签：.net, winforms, events, layout

是否存在简明的树或图来显示哪些表单事件由哪些其他事件触发？

例如：`Control.SizeChanged`打电话`Control.Layout`但确实`Control.BackgroundImageChanged`打电话`Layout`或`BackgroundImageLayout`？等等

我问的原因（这不重要）是：我试图捕捉与表单调整大小、移动和图像更改相关的几个事件。我不想加倍处理微软决定为诸如[`control.resize`和`control.sizechanged`](https://stackoverflow.com/questions/7441431/difference-between-resize-and-sizechanged-events).

# java - Robotium - 在执行测试用例之前执行任务

> ID：14690134
> 
> 赞同：0
> 
> 时间：2013-02-04T15:41:15.357
> 
> 标签：java, android, testing, robotium

我刚刚开始学习 Robotium，并且我已经编写了一个测试用例来重置我的应用程序中记录的统计信息。我想知道是否有一种方法可以自动创建统计数据，而不必在每次运行测试时自己手动创建它们。

谢谢

编辑：

在运行第一个测试之前，我现在已经在数据库中添加了一些随机值。但是，这会导致 NullPointerException。

这是我用来创建一些统计信息的方法：

```
private void createStats() {
    Context context = getInstrumentation().getTargetContext();
    mDbAdapter = new PlayDbAdapter(context);
    mDbAdapter.updateViews(8, 5);
    mDbAdapter.updateViews(7, 3);
    mDbAdapter.updatePrompts(7, 2);
    mDbAdapter.updateCompletions(8, 1);
    mDbAdapter.close();
} 
```

这个方法在我运行我的第一个测试时被调用。updateViews 方法如下：

```
public boolean updateViews(long rowId, int views) {
    ContentValues args = new ContentValues();
    args.put(KEY_VIEWS, views);
    return mDb.update(DB_TABLE, args, KEY_ROWID + "=" + rowId, null) > 0;
} 
```

NullPointer 发生在上述方法的 return 语句中。任何想法为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:35:25.487

我看不到您的所有代码，但我猜您收到此错误是因为您没有正确打开数据库。

如果不是这样，我将需要查看更多代码以了解正在发生的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:35:34.960

我发现了为什么我得到了 NullPointer。我忘记在访问数据库之前打开我的适配器。如此愚蠢的错误！

# oauth - 无法通过 API 访问 Google 协作平台，但可以通过 Oauth Playground。为什么？

> ID：14690140
> 
> 赞同：0
> 
> 时间：2013-02-04T15:41:30.187
> 
> 标签：oauth

我有一个用于向 Google 授权的有效 OAuth 流程。我的应用程序可以从只有用于授权的帐户才能访问的区域从 Google Sites API 获取数据，所以我知道很多工作都在发挥作用。麻烦在于通过 API 创建新数据。尝试 POST 到端点时，我始终收到“未知授权标头”。当我尝试使用 Google Oauth Playground 时，真正的挫败感出现了。我输入了我拥有的凭据，输入了相同的端点和相同的请求正文，然后在那里尝试——一切都很完美。

我在 API 端使用 Ruby 1.9.3，并且尝试过使用 oauth-ruby 和 Google 编写的 signet 客户端。两者都做同样的事情。我已经验证并重新验证了凭据是否符合我的预期（两者都只是检查，并在 Oauth Playground 中使用相同的凭据并看到它们工作）。

我不知道为什么会发生这种情况，因为来自 Google 的 API 的关于我的请求到底出了什么问题的信息很少。

为了记录，我正在使用；Ruby 1.9.3 oauth-ruby and signet for clients OAuth 1.0 HMAC-SHA1 hashing 3-legged authentication

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T19:24:41.600

事实证明，问题是因为我未能在请求中包含 Content-Type 标头。是的，考虑到错误消息，这对我来说也没有任何意义，但就是这样。

# pygame - 尝试使用碰撞检测pygame防止玩家类从地面类中掉下来

> ID：14690141
> 
> 赞同：0
> 
> 时间：2013-02-04T15:41:35.567
> 
> 标签：pygame, collision

到目前为止，我有一个玩家类，对于每个更新方法都没有重力作用，现在我所有的重力方法都是检查玩家是否与地面碰撞，如果没有碰撞，那么玩家 yVel += 1 ，但从不超过 13（每帧下落不超过 13 像素），但问题是如果我的播放器正好在地面上方并且掉到地面 (13) 像素，他会卡在地面中间并且不能跳回来。有什么办法可以解决这个问题，还是我需要完全重写我的播放器类中的所有内容？

```
 import pygame
import time  # lint:ok
from pygame.locals import *

char = 'ball.png'
char_jump = 'ball_jump.png'

ball = pygame.image.load(char)
ballJump = pygame.image.load(char_jump)

class Player(pygame.sprite.Sprite):
    def __init__(self, screen, image, xPos, yPos, xVel, yVel, checkGroup):
        pygame.sprite.Sprite.__init__(self)
        self.xPos = xPos
        self.yPos = yPos
        self.xVel = xVel
        self.yVel = yVel
        self.image = image
        self.screen = screen
        self.rect = self.image.get_rect()
        self.isInAir = True
        self.checkGroup = checkGroup

    def draw(self, screen):
        screen.blit(self.image, self.rect)

    def update(self):
        self.gravity()
        self.xPos += self.xVel  # updates x and y based on velocities
        self.yPos += self.yVel  # updates rect
        self.rect.topleft = (self.xPos, self.yPos)  # updates sprite rectangle

        if self.xPos > 440:  # keeps player from going to far right and left
            self.xPos = 440
        if self.xPos < -3:  # #########
            self.xPos = -3

    def gravity(self):
        if self.checkCollision(self.checkGroup) is True:
            self.yVel = 0
        elif self.checkCollision(self.checkGroup) is False:
            self.yVel = 50

    def jump(self):
        if self.isInAir is False:
            print('jump')
            self.yVel -= 20
            self.image = ballJump

    def moveRight(self):
        self.xVel = 3

    def moveLeft(self):
        self.xVel = -3

    def stopLeft(self):
        self.xVel = 0
        self.image = ball

    def stopRight(self):
        self.xVel = 0
        self.image = ball

    def stopJump(self):
        self.image = ball
        if self.yVel < 0:  # if player is still jumping up
            self.yVel = 1  # make y Velocity positive (fall down)

    def checkCollision(self, group):
        if pygame.sprite.spritecollideany(self, group):
            return True
        elif not pygame.sprite.spritecollideany(self, group):
            return False 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:07:56.700

首先，您的碰撞检查是多余的：

```
def checkCollision(self, group):
    if pygame.sprite.spritecollideany(self, group):
        return True
    elif not pygame.sprite.spritecollideany(self, group):
        return False 
```

`spritecollideany`如果没有碰撞，则调用两次。你可以只使用：

```
def checkCollision(self, group):
    return pygame.sprite.spritecollideany(self, group) 
```

* * *

相同的

```
def gravity(self):
    if self.checkCollision(self.checkGroup) is True:
        self.yVel = 0
    elif self.checkCollision(self.checkGroup) is False:
        self.yVel = 50 
```

它可以重写为

```
def gravity(self):
    self.yVel = 0 if self.checkCollision(self.checkGroup) else 50 
```

* * *

现在解决您的问题：

您检查您的播放器是否与某物发生碰撞，如果是，则停止移动。这会导致您描述的问题，因为您不会检查您移动的每个像素的碰撞，而只检查每个第 n 个像素，其中 n 是您的行进速度。一种常见的方法是使用称为 CCD（连续碰撞检测）的东西，但这超出了此答案的范围。

一种更简单的方法如下：

首先检查 x 轴的碰撞，然后检查 y 轴的碰撞。如果您注册了碰撞，请检测导致碰撞的对象。然后将玩家的位置更改为该对象的顶部。[你可以在这里](http://www.nandnor.net/?p=64)找到一个完整的例子。

```
def collide(self, xvel, yvel, platforms):
        for p in platforms:
            if sprite.collide_rect(self, p):
                ...
                if xvel > 0: self.rect.right = p.rect.left
                if xvel < 0: self.rect.left = p.rect.right
                if yvel > 0:
                    self.rect.bottom = p.rect.top # <- relevant line
                    ...
                    self.yvel = 0
                if yvel < 0: self.rect.top = p.rect.bottom 
```

如果你有一个简单的游戏，大多数时候这是一个足够好的方法。

# linux - GCC 错误：在 C99 模式外使用的“for”循环初始声明

> ID：14690142
> 
> 赞同：3
> 
> 时间：2013-02-04T15:41:47.633
> 
> 标签：linux, gcc, makefile

当我`error: 'for' loop initial declaration used outside C99 mode`尝试用`make`. 我找到了一个[wiki](http://cplusplus.syntaxerrors.info/index.php?title=%27for%27_loop_initial_declaration_used_outside_C99_mode)，上面写着

> 将 -std=c99 放入编译行：`gcc -std=c99 foo.c -o foo`

问题是我不知道如何在`make`. 我打开*Makefile*，找到`CC = gcc`并将其更改为`CC = gcc -std=c99`没有结果。有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-04T15:43:49.527

将 CFLAGS=-std=c99 放在 Makefile 的顶部。

要在不使用 C99 的情况下消除错误，您只需在 for 循环所在的块的顶部声明迭代器变量。

代替：

```
for (int i = 0; i < count; i++)
{

} 
```

采用：

```
int i;
//other code
for (i = 0; i < count; i++) 
{

} 
```

# google-maps-api-3 - 自定义谷歌商店定位器

> ID：14690143
> 
> 赞同：0
> 
> 时间：2013-02-04T15:41:49.530
> 
> 标签：google-maps-api-3

我正在使用谷歌商店定位器（[http://storelocator.googlecode.com/git/examples/custom.html](http://storelocator.googlecode.com/git/examples/custom.html)）来展示体育赛事。

现在我想自定义来自谷歌的消息。我想隐藏“此区域内没有商店。但是，离您最近的商店在下面列出”的消息。如果缩放区域中没有事件。我想在面板中的孔线上放置一个链接以重定向到特定的 url。

是否有任何选项可以根据我的意愿自定义商店定位器？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:51:47.523

源是可用的。下载并更改它以执行您想要的操作。这些消息在[此文件](http://storelocator.googlecode.com/git/js/panel.js)中定义。

# android - 我在哪里可以找到 FragmentTabHost 库

> ID：14690145
> 
> 赞同：1
> 
> 时间：2013-02-04T15:41:58.553
> 
> 标签：android, fragment

好的，这就是我错过图书馆时看到的：

```
import android.support.v4.app.FragmentTabHost; 
```

我在哪里可以找到它，我需要如何将这个库添加到我的项目中？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T15:55:42.753

在 Eclipse 中：右键单击您的项目 > Android 工具 > 添加支持库...

[http://developer.android.com/tools/extras/support-library.html](http://developer.android.com/tools/extras/support-library.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T15:46:46.823

看`PATH_TO_ANDROID_SDK\extras\android\support\v4`，如果这个库没有帮助，更新你的 sdk view sdk manager

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T12:10:46.140

无论哪种方式，您都可以执行以下操作。在您的 SDK 文件夹中，转到 - android-sdk >> extras >> android >> support >> v4 复制该库并将其粘贴到您的 android 项目的“libs”文件夹中。

好吧，您可以通过右键单击您的android项目并单击“属性”来检查它。单击 Java 构建路径 >> Android 依赖项

# fortran - 解决 OpenMP 中的分段错误的最佳方法

> ID：14690146
> 
> 赞同：3
> 
> 时间：2013-02-04T15:42:00.647
> 
> 标签：fortran, openmp, fortran90

我正在尝试使用 OpenMP 在 Fortran90 中并行化一个大程序。

我一直收到分段错误错误。我想知道是否有任何简单的方法可以修复它们。如果出现分段错误错误怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T15:56:00.687

首先将您的代码回滚到其原始的、无与伦比的版本。你确实有这个版本控制，不是吗？

非常仔细地检查您的串行程序不会导致任何分段错误。请特别注意[英特尔在本文档中](http://software.intel.com/en-us/articles/determining-root-cause-of-sigsegv-or-sigbus-errors)提出的问题。即使您不使用英特尔 Fortran 编译器，也请阅读本文。采取它建议的纠正措施。

现在，并行化您的第一个构造。如果可以的话，选择一个简单的、非嵌套的循环。重新测试你的程序。想想你做了什么，并确保你明白发生了什么。选择另一个简单的构造进行并行化。完成简单的任务后，继续进行更复杂的任务，边做边做测试，边做边学。

因此，要回答您的问题：解决此类故障的最佳方法是一开始就不要制造它们。您报告说您一直遇到分段错误，这向我表明您在走路之前尝试过跑步。

并回答另一个问题：不，没有简单的方法可以解决它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T18:07:06.887

正如 HPM 建议的那样，只有在使用 OpenMP 编译时，还是在没有 OpenMP 的情况下才会出现分段错误？

我建议使用编译器提供的所有调试选项进行编译。您的编译器可能能够识别出一些问题并将它们作为 Fortran 问题而不是内存访问问题报告给您。例如，运行时下标检查将识别可能导致分段错误的非法下标。其他编译器选项可以强制执行良好的编码实践，从而降低错误的可能性。你用的是什么编译器？

# android - 在 Android 上解析谷歌天气

> ID：14690150
> 
> 赞同：0
> 
> 时间：2013-02-04T15:42:22.803
> 
> 标签：android, android-xml

嘿，我正在尝试从谷歌解析天气状况。但它一直给我“错误”消息，这是我在 try catch 块上定义的。我在下面打印为异常。

我已经调试了我的应用程序并找出了

```
xr.parse(new InputSource(website.openStream())); 
```

在那条线上，我的应用程序可以捕获。但不确定是什么问题。

```
public void onClick(View v) {

        String c = city.getText().toString();
        String s = state.getText().toString();
        StringBuilder URL = new StringBuilder(baseURL);
        URL.append(c + "," + s);
        String fullUrl = URL.toString();

        try {
            URL website = new URL(fullUrl);

            // getting xml reader to parse data
            SAXParserFactory spf = SAXParserFactory.newInstance();
            SAXParser sp = spf.newSAXParser();
            XMLReader xr = sp.getXMLReader();
            XmlHandler doingWork = new XmlHandler();
            xr.setContentHandler(doingWork);
            xr.parse(new InputSource(website.openStream()));
            String information = doingWork.getInformation();
            tv.setText(information);
        } catch (Exception e) {

            tv.setText("error");
        } 
```

xml处理程序.java

```
public class XmlHandler extends DefaultHandler {

    private XmlData info = new XmlData();

    public String getInformation() {

        return info.dataToString();
    }

    @Override
    public void startElement(String uri, String localName, String qName,
            Attributes attributes) throws SAXException {

        if (localName.equals("city")) {
            String city = attributes.getValue("data");
            info.setCity(city);
        } else if (localName.equals("temp_f")) {
            String t = attributes.getValue("data");
            int temp = Integer.parseInt(t);
            info.setTemp(temp);
        }
    }

} 
```

xmlData.java

```
public class XmlData {

    int temp = 0;
    String city = null;

    public void setCity(String c) {
        city = c;
    }

    public void setTemp(int t) {
        temp = t;
    }

    public String dataToString() {
        return "In " + city + " The Current temp in F is" + temp + " degrees";
    }
} 
```

这是 LogCat

```
02-04 17:46:16.124: W/System.err(647): java.io.FileNotFoundException: http://www.google.com/ig/api?weather=lincoln,nebraska
02-04 17:46:16.124: W/System.err(647):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:1162)
02-04 17:46:16.124: W/System.err(647):  at java.net.URL.openStream(URL.java:653)
02-04 17:46:16.124: W/System.err(647):  at com.android.WeatherXMLParsing.onClick(WeatherXMLParsing.java:61)
02-04 17:46:16.124: W/System.err(647):  at android.view.View.performClick(View.java:2408)
02-04 17:46:16.124: W/System.err(647):  at android.view.View$PerformClick.run(View.java:8816)
02-04 17:46:16.124: W/System.err(647):  at android.os.Handler.handleCallback(Handler.java:587)
02-04 17:46:16.124: W/System.err(647):  at android.os.Handler.dispatchMessage(Handler.java:92)
02-04 17:46:16.124: W/System.err(647):  at android.os.Looper.loop(Looper.java:123)
02-04 17:46:16.124: W/System.err(647):  at android.app.ActivityThread.main(ActivityThread.java:4627)
02-04 17:46:16.124: W/System.err(647):  at java.lang.reflect.Method.invokeNative(Native Method)
02-04 17:46:16.124: W/System.err(647):  at java.lang.reflect.Method.invoke(Method.java:521)
02-04 17:46:16.124: W/System.err(647):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
02-04 17:46:16.124: W/System.err(647):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
02-04 17:46:16.134: W/System.err(647):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:55:34.813

当我尝试打开该 URL 时，我收到此消息

> 我们很抱歉...
> 
> ...但您的计算机或网络可能正在发送自动查询。为了保护我们的用户，我们现在无法处理您的请求。

而不是获得 XML 响应。确保您获得适当的 API 密钥（如果有），以便服务器不会返回此响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T16:35:00.047

很遗憾地报告该 API 已在不久前被删除。

更多信息[在这里](http://thenextweb.com/google/2012/08/28/did-google-just-quietly-kill-private-weather-api/)。它在当时引起了一些不安，但毕竟它是一个（非常好的）**私有**API……从来没有任何文档或支持它。

# java - 在 Spring 集成中使用拦截器发送日志消息

> ID：14690156
> 
> 赞同：0
> 
> 时间：2013-02-04T15:42:54.343
> 
> 标签：java, spring, logging, spring-integration

是否可以在 Spring Integration 中配置拦截器来指定日志消息？

这与使用窃听器将消息发送到日志通道适配器订阅的日志通道形成对比。这种方法的问题是日志记录通道具有确切记录内容的表达式。在我的用例中，我想使用全局通道拦截器来指定日志消息并将其发送到日志通道适配器，而不必为我可能想要的每个可能的日志消息定义一个日志通道适配器。

有那么一刻，我想我可以使用 SpEL 表达式定义一个服务激活器，以在通道拦截器定义中生成字符串日志消息（以及所需日志通道的输出通道），但它正在寻找一个输入通道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T17:37:05.960

您可以制作您感兴趣的频道，而不是使用窃听器`<publish-subscribe-channel/>`。

将适当的转换器订阅到通道（使用`output-channel`日志适配器）。

`order`您可以使用转换器和其他订阅者的属性来控制日志是在真实订阅者之前还是之后发生。

另一种选择是在消息中添加标头的全局拦截器

```
MessageBuilder.fromMessage(message).setHeader('foo', routeForThisMessageType).build() 
```

然后将其发送到 a `<header-value-router/>`，然后路由到适当的转换器，然后路由到单个日志记录通道适配器。

当然，如果您愿意，您可以将路由和/或转换直接组合到拦截器中。

# c# - 以编程方式关闭 USB 端口的电源

> ID：14690157
> 
> 赞同：7
> 
> 时间：2013-02-04T15:42:55.357
> 
> 标签：c#, .net, c#-4.0

我有一个正在处理的项目，我想使用这些： [http ://www.woot.com/blog/post/usb-powered-woot-off-lights-2](http://www.woot.com/blog/post/usb-powered-woot-off-lights-2)

然而，看起来他们只有开/关开关。它们不是您可以通过编程方式与之交互的东西。

所以我在想，如果我能找到一种方法来切断 USB 端口的电源，那我就可以用我的应用程序打开和关闭灯。但是我找不到任何方法来切断 USB 端口的电源。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-08-08T10:16:40.720

我遇到了类似的问题并使用 DevManView.exe（免费软件）解决了它：

1.  下载 DevManView.exe 并将 .exe 文件放在某处： [http ://www.nirsoft.net/utils/device_manager_view.html](http://www.nirsoft.net/utils/device_manager_view.html)

2.  转到您的设备管理器并确定您必须启用/禁用哪个 USB 控制器，以便您的设备不再通电/不通电。对我来说，禁用“USB 串行转换器”确实会切断所有 USB 插槽的电源。

[设备管理器中的 USB 串行转换器](https://i.stack.imgur.com/H8kpd.png)

3.  在 C# 中，创建并启动一个用于禁用设备的新进程（使用 USB 控制器的名称）。

    ```
    Process devManViewProc = new Process();
    devManViewProc.StartInfo.FileName = @"<path to DevManView.exe>\DevManView.exe";
    devManViewProc.StartInfo.Arguments = "/disable \"USB Serial Converter\"";
    devManViewProc.Start();
    devManViewProc.WaitForExit(); 
    ```

4.  并再次启用它。

    ```
    devManViewProc.StartInfo.Arguments = "/enable \"USB Serial Converter\"";
    devManViewProc.Start();
    devManViewProc.WaitForExit(); 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-11T15:26:06.513

编辑：不幸的是，这家公司的产品似乎[不再销售了](https://www.tindie.com/stores/madeintheusb/items/)。

* * *

power-woot-off-lights-2 是通过一个普通的 USB 插头供电的，这意味着它们是 5 伏的，并且每个都有一个灯和一个电机。

我找不到需要多少安培，但我知道如果 200 mA 用于一个供电的 woot-off-lights 就足够了，那么这个扩展将是完美的。

[USB 控制器扩展](https://i.stack.imgur.com/x8z8N.jpg)

C# 或 VB.NET 代码看起来像这样。

```
// On
nusbio.GPIOS[NusbioGpio.Gpio0].DigitalWrite(true);
nusbio.GPIOS[NusbioGpio.Gpio1].DigitalWrite(true);
// Off
nusbio.GPIOS[NusbioGpio.Gpio0].DigitalWrite(false);
nusbio.GPIOS[NusbioGpio.Gpio1].DigitalWrite(false); 
```

查看[Nusbio 的网站](http://madeintheusbwebsite.azurewebsites.net/)，我认为扩展程序在他们的商店中。我自己使用了类似的 nusbio 扩展。

[打开/关闭我的 USB 风扇和电池供电的小灯](https://i.stack.imgur.com/EDKQY.jpg)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T15:46:02.597

如果您具有管理员权限，请运行以下命令：

```
Microsoft.Win32.Registry.SetValue(@"HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\USBSTOR", "Start", 4, Microsoft.Win32.RegistryValueKind.DWord); 
```

# character-encoding - ASCII 码实际上是 7 位还是 8 位？

> ID：14690159
> 
> 赞同：130
> 
> 时间：2013-02-04T15:42:56.203
> 
> 标签：character-encoding, ascii

我的老师告诉我 ASCII 是一种 8 位字符编码方案。但它仅针对 0-127 代码定义，这意味着它可以适合 7 位。所以不能说ASCII实际上是一个7位代码吗？

当说 ASCII 完全是 8 位代码时，我们到底想说什么？

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2013-02-04T16:07:21.433

[ASCII](https://en.wikipedia.org/wiki/ASCII)最初确实被设想为 7 位代码。这在 8 位字节无处不在之前就已经完成了，甚至到 1990 年代，您也可以找到假设它可以将每个文本字节的第 8 位用于其自身目的的软件（“不是 8 位干净”）。现在人们*认为它*是一个 8 位编码，其中字节 0x80 到 0xFF 没有定义的含义，但这是一个[retcon](https://en.wikipedia.org/wiki/Retcon)。

有几十种使用第 8 位的文本编码；它们可以分为与 ASCII 兼容或不兼容，以及固定宽度或可变宽度。ASCII 兼容意味着*无论上下文如何*，具有从 0x00 到 0x7F 值的单个字节对它们在 ASCII 中的相同字符进行编码。如果可以避免的话，您不想与非 ASCII 兼容的文本编码有任何关系；期待 ASCII 的幼稚程序往往会以灾难性的、经常破坏安全的方式误解它们。如今它们已被弃用，以至于（例如）HTML5 禁止在公共 Web 上使用它们，不幸的是[UTF-16](https://en.wikipedia.org/wiki/UTF-16)例外。我不会再谈论他们了。

固定宽度编码意味着它听起来的样子：所有字符都使用相同的字节数进行编码。为了与 ASCII 兼容，fixed-with 编码必须仅使用一个字节对其所有字符进行编码，因此它不能超过 256 个字符。如今，最常见的此类编码是[Windows-1252 ，它是](https://en.wikipedia.org/wiki/Windows-1252)[ISO 8859-1](https://en.wikipedia.org/wiki/ISO/IEC_8859-1)的扩展。

现在只有一种可变宽度的 ASCII 兼容编码值得了解，但它非常重要：[UTF-8](https://en.wikipedia.org/wiki/UTF-8)，它将所有 Unicode 打包成与 ASCII 兼容的编码。如果您可以管理它，您真的很想使用它。

最后一点，现在“ASCII”的*实际*定义来自 Unicode，而不是其原始标准（ANSI X3.4-1968），因为历史上 ASCII 127 字符的曲目有几十种变体——例如，一些标点符号可以用重音字母代替，以方便法语文本的传输。所有这些变体都已过时，当人们说“ASCII”时，他们的意思是值为 0x00 到 0x7F 的字节编码 Unicode 代码点 U+0000 到 U+007F。如果您发现自己正在编写技术标准，这可能只会对您有意义。

如果您对 ASCII 的历史及其之前的编码感兴趣，请从论文“字符代码的演变，1874-1968”开始（samizdat 副本位于[http://falsedoor.com/doc/ascii_evolution-of- character-codes.pdf](http://falsedoor.com/doc/ascii_evolution-of-character-codes.pdf)），然后寻找它的参考资料（我很遗憾地说，其中许多都不能在线获得，即使可以访问大学图书馆也可能很难找到）。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-02-04T16:06:42.083

在 Linux 上[`man ascii`](https://linux.die.net/man/7/ascii)说：

> ASCII 是美国信息交换标准代码。它是一个 7 位代码。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-09-02T23:50:43.940

原始的 ASCII 表是**7 位**编码的，因此它有 128 个字符。

如今，大多数读者/编辑使用“扩展”ASCII 表（来自*[ISO 8859-1](https://en.wikipedia.org/wiki/ISO/IEC_8859-1)*），该表以**8 位**编码，包含 256 个字符（包括*Á*、*Ä*、*Œ*、*é*、*è*和其他对欧洲语言有用的字符以及数学字形和其他符号）。

虽然[UTF-8](https://en.wikipedia.org/wiki/UTF-8)使用与基本 ASCII 表相同的编码（在两种代码中`0x41`都是*A*），但它对于“Latin Extended-A”块并不共享相同的编码。这有时会导致奇怪的字符出现在*à la carte*或*piñata*等单词中。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-03-04T01:13:13.707

ASCII 编码是 7 位的，但实际上，以 ASCII 编码的字符不会以 7 位为一组存储。相反，一个 ASCII 存储在一个字节中，MSB 通常设置为 0（是的，它在 ASCII 中被浪费了）。

您可以通过在文本编辑器中输入 ASCII 字符集中的字符串、将编码设置为 ASCII 并查看二进制/十六进制来验证这一点：
[![在此处输入图像描述](../Images/a8c2e97272e85853418ded41f8ee26f1.png)](https://i.stack.imgur.com/OmIK7.png)

顺便说一句：现在不常见使用（严格）ASCII 编码，支持 UTF-8（它*不会*浪费上面提到的 MSB - 事实上，MSB 为 1 表示代码点被编码为超过 1 个字节）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-19T12:11:03.917

原始的 ASCII 码提供了 128 个不同的字符，编号从 0 到 127。ASCII 和 7 位是同义词。由于 8 位字节是通用存储元素，ASCII 为 128 个附加字符留出了空间，这些字符用于外语和其他符号。

但是 7 位代码是在 8 位代码之前制作的。ASCII 代表美国信息交换标准代码。在早期的 Internet 邮件系统中，它只支持 7 位 ASCII 码。

这是因为它可以在这样的系统上执行程序和多媒体文件。这些系统使用 8 位字节，但随后必须使用[MIME](https://en.wikipedia.org/wiki/MIME)、[uucoding](https://en.wikipedia.org/wiki/Uuencoding)和[BinHex](https://en.wikipedia.org/wiki/BinHex)等编码方法将其转换为 7 位格式。这意味着 8 位字符已转换为 7 位字符，这会增加额外的字节来对它们进行编码。

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2018-07-24T16:04:15.950

当我们将 ASCII 称为 7 位代码时，最左边的位用作符号位，因此使用 7 位我们最多可以写入 127。

这意味着从-126到127，因为ASCII的最大值是0到255。如果最后一位被认为是符号位，则只有7位的参数才能满足。

# ruby - 如何在 ruby 中使用 map 方法调用方法链？

> ID：14690166
> 
> 赞同：9
> 
> 时间：2013-02-04T15:43:36.120
> 
> 标签：ruby

我将如何调用块以`_id.to_s`在 ruby​​ 中使用？

```
category_ids = categories.map(&:_id.to_s) 
```

我正在破解它并立即执行以下操作：

```
category_ids = []
categories.each do |c|
  category_ids << c.id.to_s
end 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-04T15:48:19.037

您可以传递一个块来映射并将您的表达式放在块内。可枚举的每个成员都将连续产生块。

```
category_ids = categories.map {|c| c._id.to_s } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-04T16:32:50.627

```
category_ids = categories.map(&:_id).map(&:to_s) 
```

测试：

```
categories = ["sdkfjs","sdkfjs","drue"]
categories.map(&:object_id).map(&:to_s)
=> ["9576480", "9576300", "9576260"] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-01T09:41:34.930

如果你真的想链接方法，你可以覆盖 Symbol#to_proc

```
class Symbol
  def to_proc
    to_s.to_proc
  end
end

class String
  def to_proc
    split("\.").to_proc
  end
end

class Array
  def to_proc
    proc{ |x| inject(x){ |a,y| a.send(y) } }
  end
end

strings_arr = ["AbcDef", "GhiJkl", "MnoPqr"]
strings_arr.map(&:"underscore.upcase")
#=> ["ABC_DEF", "GHI_JKL", "MNO_PQR"]

strings_arr.map(&"underscore.upcase")
#=> ["ABC_DEF", "GHI_JKL", "MNO_PQR"]

strings_arr.map(&["underscore", "upcase"])
#=> ["ABC_DEF", "GHI_JKL", "MNO_PQR"] 
```

* * *

```
category_ids = categories.map(&"id.to_s") 
```

[Ruby & 和冒号快捷方式](https://stackoverflow.com/questions/1961030/ruby-ampersand-colon-shortcut)

[内陆税收局](https://repl.it/repls/CharmingEvenBookmark)

# java - 检查java中的行是否为空？

> ID：14690169
> 
> 赞同：10
> 
> 时间：2013-02-04T15:43:45.390
> 
> 标签：java, string

> **可能重复：**
> [如何检查 Java 字符串是否全部为空格](https://stackoverflow.com/questions/3247067/how-to-check-that-java-string-is-not-all-whitespaces)

```
Scanner kb = new Scanner(System.in);
String random;

System.out.print("Enter your word: ");
random = kb.nextLine();

if (random.isEmpty()) {     
    System.out.println("No input detected!");                   
} else {
    System.out.println(random);
} 
```

上面的代码没有考虑用户何时腾出空间。当用户输入空格并按回车键时，它仍会打印空行。

我该如何解决？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-04T15:44:33.130

您可以使用方法修剪空格[`String#trim()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#trim%28%29)，然后进行测试：-

```
if (random.trim().isEmpty()) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T15:45:55.667

另一种解决方案可以是使用空字符串进行修剪和等于。

```
if (random.trim().equals("")){       
            System.out.println("No input detected!");                   
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T15:51:06.270

另一种解决方案

```
if (random != null || !random.trim().equals(""))
   <br>System.out.println(random);
<br>else
   <br>System.out.println("No input detected!"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T15:54:37.327

这就是 Apache Commons[的做法](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.commons/commons-lang3/3.3.2/org/apache/commons/lang3/StringUtils.java#StringUtils.isBlank%28java.lang.CharSequence%29)：

```
public static boolean isBlank(String str) {
    int strLen;
    if (str == null || (strLen = str.length()) == 0) {
        return true;
    }
    for (int i = 0; i < strLen; i++) {
        if ((Character.isWhitespace(str.charAt(i)) == false)) {
            return false;
        }
    }
    return true;
} 
```

# css - CSS - Firefox 背景位置对我不起作用

> ID：14690170
> 
> 赞同：-1
> 
> 时间：2013-02-04T15:43:49.167
> 
> 标签：css

我正在尝试在 Firefox 中担任工作背景职位，但没有成功。在谷歌浏览器中它可以工作。这是我在 google 中工作的 css，但 Firefox 不接受 background-position-y: 37px;

```
{
padding-top: 14px;
height: 50px;
background: url('image.png') repeat-x;
background-position-y: 37px;
text-align: center;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T15:45:50.673

没有像 cross-browser 这样的东西`background-position-y`。它根本不适用于任何地方，因此不应使用。您必须在`background-position`.

请看一下这个帖子：我在回答中提到的[背景位置和链接](https://stackoverflow.com/questions/14475055/css-background-position/14475199#14475199)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T15:47:04.950

Firefox 不知道`background-position-y`属性。

尝试使用[`background-position`](https://developer.mozilla.org/en-US/docs/CSS/background-position)带有两个参数的正则：

```
background-position: 0% 37px; 
```

# apache - 无法在 XAMPP 中进行 301.htaccess 重定向

> ID：14690174
> 
> 赞同：0
> 
> 时间：2013-02-04T15:43:54.283
> 
> 标签：apache, .htaccess, rewrite

我的实时服务器上一个简单的工作 301 .htaccess 重定向如下所示：

```
Options +FollowSymLinks
RewriteEngine on

redirect 301 /test.php /index.php 
```

但我不能让它在我的 XAMPP 安装中工作。我在 http.conf 文件中启用了 mod_rewrite.so，但我看不出它为什么不重定向。已重新启动 apache 但没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:04:49.473

[通过使用Apache Virtual Hosts](http://www.survivethedeepend.com/zendframeworkbook/en/1.0/creating.a.local.domain.using.apache.virtual.hosts#zfbook.creating.a.local.domain.using.apache.virtual.hosts.conclusion)创建本地域使其工作。设置本地域后，重定向代码就像在实时服务器上一样工作：

```
redirect 301 /test.php /test2.php.php 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:50:56.327

只是为了让您知道 Apache 的`redirect`指令来自 mod_alias 模块而不是来自 more_rewrite 模块。在此处查看文档：[https ://httpd.apache.org/docs/2.2/mod/mod_alias.html#redirect](https://httpd.apache.org/docs/2.2/mod/mod_alias.html#redirect)

如果您想通过 mod_rewrite 处理它，请像这样使用它：

```
RewriteEngine on
RewriteRule ^test\.php$ /index.php [L,NC,R=301] 
```

或者启用 mod_alias 模块以使其`redirect`工作。

# javascript - 阻止现代 IE？

> ID：14690175
> 
> 赞同：14
> 
> 时间：2013-02-04T15:43:56.063
> 
> 标签：javascript, internet-explorer, browser-detection

阻止 IE 绝对不是最佳实践，但这是我对现有应用程序的要求。由于条件注释在 IE 10[中不可用](http://msdn.microsoft.com/en-us/library/ms537512.aspx)，最有效的方法是什么？对于 IE 9 及以下版本，这将起作用：

```
<!--[if IE]>
<script type="text/javascript">
window.location = "/IEblocked.html";
</script>
<![endif]--> 
```

假设有一个最佳实践 JavaScript 解决方案，我*会*发现什么问题？我想知道是否可能存在以下问题：

*   事件触发顺序
*   `iframe`超出我控制范围的元素
*   JS 解决方案在其他`<script>`标签上下文中的优先级
*   `document.write('<script type="text/javascript" src="foo.js"></script>');`通过该方法加载的脚本。

我有一种感觉，很多人可能会被迫大喊*“使用 Modernizr”*和*“你疯了吗，不要那样把脚本放在 DOM 中！”* ，不幸的是，该应用程序很大，此时一些增强功能超出了范围。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-04T15:59:25.953

好吧，IE 是唯一支持客户端 VBScript 的浏览器。

因此，只需将其添加到您的页面：（当然除了 IEblocked.html 本身）

```
<script type="text/vbscript">
Document.Location = "IEblocked.html"
</script> 
```

我知道它在 IE9 及以下版本中工作。[这条评论](https://stackoverflow.com/questions/14690175/blocking-modern-ie/14690499#comment20541290_14690499)几乎证明了它在 IE10 中仍然可以正常工作，至于未来，我遇到了 Eric Lippert 的这篇博客文章：[VBScript 死亡的谣言被大大夸大](http://blogs.msdn.com/b/ericlippert/archive/2004/04/09/110508.aspx)了，其中包含以下段落：

> **在可预见的未来，我们将继续支持 VBScript 和 JScript**。显然 VBScript、JScript、WSH 等必须永远随操作系统一起提供，因为大量现有的关键业务代码依赖于它们。将其描述为“慢慢死去”过于夸张。我们预计非托管 COM 脚本语言将继续有用很多很多年。Visual Studio 持续工程团队目前负责 VBScript、JScript、Windows Script Components、Windows Script Host 等。

尽管 8 年前发布，但我坚信我们在 Windows 核心中仍然存在多年的 VBScript，并且未来版本的 Internet Explorer 将继续使用它。

总而言之，我直接联系了 Eric 并询问“在 Internet Explorer 版本中，VBScript 作为客户端语言将支持多长时间？”。作为回应，他说：

> 仍然有许多企业客户在浏览器中依赖 VBScript，所以 MSFT 放弃对它的支持是愚蠢的。支持非常便宜，即使失去少数客户的好感也是昂贵的。

他不再在微软工作，所以他的回答不是官方的，但这是我能得到的最接近的答案，而不是多年前的博客文章，而是直接来自源头。考虑到所有因素，我可以得出结论，使用上面的代码将在未来很多年里工作。:)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-04T15:56:59.770

你的客户疯了。但是，如果他们为此付钱，那么……嗯，随便。

如果您使用的是 jQuery，它提供了浏览器检测功能。它已被弃用，因此您可能希望避免使用最新版本，但它确实有效：

```
if ($.browser.msie) { ....do crazy stuff here.... } 
```

如果您不使用 jQuery，或者您不想使用已弃用的功能，则可以通过以下方式进行：

*   解析用户代理字符串：

    ```
    if(!!navigator.userAgent.match(/MSIE/)) { .... do crazy stuff .... } 
    ```

*   使用 Javascript 条件注释（我相信仍然支持）：

    ```
    if(Function('/*@cc_on return document.documentMode > 0@*/')()){ .... do crazy stuff .... } 
    ```

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T21:41:30.600

供将来参考这里是 ie 在 javascript 中的所有检测

```
<script type="text/javascript">

// if I am opera I need to not enter this function
if (!!(window.opera && window.opera.version)) {
    // ok now am I IE (opera is the only other browser that will do this
    if (document.all) {
        // Now lets look at the versions, use the ones you want

        // ie 5
        if (!(document.compatMode != undefined)) {
            // do ie 5 thing
        }
        else if ((document.compatMode != undefined) && (window.XMLHttpRequest == undefined)) {
            // do ie 6 thing
        }
        else if ((document.XMLHttpRequest != undefined) && (document.querySelector == undefined)) {
            // do ie 7 thing
        }
        else if ((document.querySelector != undefined) && (document.addEventListener == undefined)) {
            // do ie 8 thing
        }
        else if ((document.addEventListener != undefined) && (window.atob == undefined)) {
            // do ie 9 thing
        }
        else if (window.atob) {
            // do ie 10+ thing
        }
        else {
            // do ie 4 thing
        }
    }
} 
```

# angularjs - Angular.js - 指令被调用但无处使用

> ID：14690186
> 
> 赞同：0
> 
> 时间：2013-02-04T15:44:21.717
> 
> 标签：angularjs, main, directive

尽管我没有在该文件之外的某个地方找到 authDemoApplication，但以下代码正在工作，不在 *.js 中，也不在 .html 文件中。

```
angular.module('angular-auth-demo', ['http-auth-interceptor','content-mocks'])
  .directive('authDemoApplication', function() {
  }); 
```

那么，这个指令是如何工作的，在哪里可以了解这种调用方法呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T16:06:02.503

指令以 camelCase 命名，但使用连字符分隔的名称引用。您是否搜索过`<div auth-demo-application>`类型语法？

# java - Rectangle2D#getCenterY 导致不相关的迭代器抛出 CME

> ID：14690187
> 
> 赞同：0
> 
> 时间：2013-02-04T15:44:30.103
> 
> 标签：java, multithreading, concurrency, concurrentmodification

我目前正在开发一款多线程游戏，一个线程运行游戏更新，一个线程重新绘制正在玩游戏的面板。在编辑了一些负责敌人向玩家发射射弹的代码后，我注意到我从迭代器中获得了 ConcurrentModificationException，该迭代器正在迭代所有实体并更新它们。我在这里将问题与此语句隔离：

```
getMyBounds2D().getCenterY(); 
```

因为当我将语句更改为：

```
getMyBounds2D().getY(); 
```

更新迭代器不再抛出异常。getMyBounds2D() 方法只返回一个代表实体边界框的 Rectangle2D，有没有人可以解释为什么更改上面的语句会导致 CME 以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:58:46.393

您不能在 EDT（事件调度线程）之外处理 awt/swing 对象。各种 gui 对象旨在以单线程方式处理，仅由该线程处理。如果您有多个线程处理这些对象，那么这将导致各种问题，CME 等等。

# gradle - 嵌套设置.gradle

> ID：14690192
> 
> 赞同：1
> 
> 时间：2013-02-04T15:44:38.057
> 
> 标签：gradle

是否可以为多模块项目嵌套多个 settings.gradle 文件？

例如，项目 A 的 settings.gradle 应该包括项目 A_a 的 settings.gradle

```
A (include ':A_a',':A_b')
A_a (include 'A_a_1','A_a_2','A_a_3')
A_a_1
A_a_2
A_a_3
A_b 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T15:48:54.497

不，构建的根项目中应该只有一个 settings.gradle。Gradle 期望它是这样的，这就是它的构建方式。它会

请参阅gradle的[Build Lifecycle文档以获取完整说明。](http://gradle.org/docs/current/userguide/build_lifecycle.html)特别是*初始化*章节。

# javascript - || 创建 jQuery 插件时 JavaScript 中的（或运算符）

> ID：14690197
> 
> 赞同：1
> 
> 时间：2013-02-04T15:44:54.200
> 
> 标签：javascript, jquery, jquery-plugins, operators

也许我现在太累了，但是我找不到插件开发人员使用以下构造的原因：

```
jQuery.<myPlugin> || (function($)) {

    var $.<myPlugin> = {

        // plugin code goes here...

    }

})(jQuery); 
```

当然这是一个常见的结构，除了使用`||`（OR 运算符，据我所知），我不明白。

你能告诉我为什么开发人员使用`||`?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-04T15:46:27.397

它将首先检查是否`jQuery.<myPlugin>`存在，如果不存在，它将继续构建函数。

# vim - 对错误运行 vim 命令？

> ID：14690199
> 
> 赞同：0
> 
> 时间：2013-02-04T15:44:58.030
> 
> 标签：vim, macvim

好的，所以这个问题与我之前的一个问题隐约相关：

[我希望 Vim 在缓冲区方面能够像 Photoshop 一样保存和关闭？](https://stackoverflow.com/questions/13573942/i-want-vim-to-be-able-to-save-and-close-similarly-to-photoshop-in-regards-to-buf/13580809#comment18615191_13580809)

基本上我找到的解决方案（或非常接近我想要的）是一个名为 BufOnly 的插件，它基本上关闭了所有尚未修改的缓冲区。所以当我有很多缓冲区打开并且我想关闭时，我只是运行它，然后只关心我还没有的所有内容。它运作良好。

但我很贪心。我希望它在需要时自动执行。基本上我希望这样，如果我运行 qa，如果 qa 遇到 -->

```
E73: No write since list change (add ! to override) 
```

然后我想跑

```
:BufOnly<CR>:bd <cr> 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T16:03:39.237

您可以使用 vim 的 try-catch 机制编写函数。例子：

```
 function! Funk()
    try
        execute "qa"
        let yes = 1
    catch /^Vim\%((\a\+)\)\=:E37/   
            execute "BufOnly"
            execute "bd"
    endtry
endfunction 
```

这将捕获错误`:E37`并执行您想要的命令。我没有安装那个插件，因此我没有使用 BufOnly 进行测试。我用“ `h gg`”测试过，它显示了帮助页面`gg`

要调用命令， type `:call Funk()`，当然您可以为该函数调用创建映射。

# mysql - 使用 MySQL Workbench 的存储过程

> ID：14690200
> 
> 赞同：5
> 
> 时间：2013-02-04T15:44:59.263
> 
> 标签：mysql, stored-procedures, delimiter

对环境非常陌生，我对添加到代码末尾的一行有疑问。我遵循的指南是：

[http://net.tutsplus.com/tutorials/an-introduction-to-stored-procedures/](http://net.tutsplus.com/tutorials/an-introduction-to-stored-procedures/)

如果有人对 MySQL 存储过程有更好的了解，我会全力以赴。

**在我问之前，这是我正在使用的环境：操作系统：Windows 7 / WAMP (MySQL 5.5.24) / MySQL Workbench**

我被指示定义一个分隔符；就我而言，我坚持使用默认的“$$”。

我创建的存储过程是：

```
DELIMITER $$
CREATE PROCEDURE test.`p2` ()
LANGUAGE SQL
DETERMINISTIC
COMMENT 'Adds "nson" to first and last names in the record.'
BEGIN
SELECT 'Hello World';
END $$ 
```

当我应用此存储过程并获得审查屏幕时，我看到添加了一行新代码；

在底部：

```
DELIMITER ; 
```

这条纬线；添加它是因为 DELIMITER 语句宣布了一个可以在其中使用定义的分隔符 ($$) 的块，因此最终关闭了该块？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T17:15:33.860

使用内置过程编辑器时，MySQL Workbench 添加了一些额外的命令：

```
USE `test`; // <----------
DROP procedure IF EXISTS `p2`;  // <----------

DELIMITER $$
USE `test`$$ // <----------
CREATE PROCEDURE test.`p2` ()
LANGUAGE SQL
DETERMINISTIC
COMMENT 'Adds "nson" to first and last names in the record.'
BEGIN
SELECT 'Hello World';
END $$

DELIMITER ; // <---------- 
```

这些命令与存储过程语法并不严格相关，它们只是一种商品——其他 MySQL 客户端（例如 HeidiSQL 或官方命令行实用程序）不会添加它们。最后的分隔符更改可能是重置，以避免在同一连接上的未来语句中出现问题。

您需要更改定界符以告知客户端程序代码的开始和结束位置。问题是过程主体通常是 SQL 语句的集合，因此省略分隔符更改会使 MySQL 认为您正在尝试运行一系列语句，其中第一个语句是：

```
CREATE PROCEDURE test.`p2` ()
LANGUAGE SQL
DETERMINISTIC
COMMENT 'Adds "nson" to first and last names in the record.'
BEGIN
SELECT 'Hello World'; 
```

`DELIMITER $$`你告诉 MySQL 你的完整语句从`CREATE`到`END`。它只是语法糖：`DELIMITER`甚至不是 SQL 关键字。例如，HeidiSQL 提供了一个带有文本框的 GUI，您可以在其中编写过程主体，因此您不需要 DELIMITER 解决方法。

# kendo-ui - MVVM 绑定到剑道网格非常慢？

> ID：14690203
> 
> 赞同：2
> 
> 时间：2013-02-04T15:45:07.527
> 
> 标签：kendo-ui, kendo-grid

我正在尝试将 ViewModel 绑定到 Kendo DataSource，然后将其提供给 Kendo Grid。在这一点上没有什么太花哨的。

它有点工作，但非常慢！我收到一条警报，通知我在 2 秒内收到了我的 json 数据（700 行），但更新视图模型大约需要 15 秒。

我究竟做错了什么？

谢谢

```
 $(document).ready(function () {

        // create the viewmodel we use as the source for the list
        var viewModel = kendo.observable({
            items: [],
            total: function () {
                return this.get("items").length;
            }
        });

        var dataSource2 = new kendo.data.DataSource({
            data: viewModel,
            pageSize: 50
        });

        // create the grid
        $("#grid").kendoGrid({
            dataSource: dataSource2,
            height: 500,
            scrollable: {
                virtual: true
            },
            columns: [
                { field: "ID_ORDER", title: "ID", width: 80 },
                { field: "CREATION_DATE", title: "Creation Date" },
                { field: "STATUS", title: "STATUS", width: 80 },
                ** more columns (around 10) **
            ]
        });

        // pass this on to initialise
        APPS.View.Orders.Initialise(viewModel);

    }); 
```

然后在我的打字稿中，我正在处理传入 viewModel 的 Initialise 调用：

```
 module APP.View.Orders {

        export var _Scope: string = "Orders";
        var _viewModelOrders: any;

        export var Initialise = function (viewModelOrders: any) {

            _viewModelOrders = viewModelOrders;

            var orderdetails = {
                userid: APP.Core.userID,
                context: "DEAL"
            };

            // retrieve all orders
            $.getJSON("/api/omsapi/GetOrders", orderdetails, function (mydata) {

                try {

                    alert("item count (1): " + mydata.length);

                    jQuery.each(mydata, function () {

                        var newItem = this;
                        _viewModelOrders.items.push(newItem);

                    });

                    alert("item count (2): " + _viewModelOrders.items.length);

                }
                catch (e) {
                    alert(e.message);
                }
            });
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:07:51.760

尝试构建项目数组，然后将其分配到模型中。

就像是：

```
// retrieve all orders
$.getJSON("/api/omsapi/GetOrders", orderdetails, function (mydata) {
    try {
        alert("item count (1): " + mydata.length);
        var items = [];
        jQuery.each(mydata, function () {
            items.push(this);
        });
        _viewModelOrders.items = items;
        alert("item count (2): " + _viewModelOrders.items.length);
    }
    catch (e) {
        alert(e.message);
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-02T15:52:30.383

您可以通过执行以下操作暂时挂起 observable：

```
$.getJSON("/api/omsapi/GetOrders", orderdetails, function (mydata) {
     try {
        var simpleArray = viewModel.items();  // get a reference to the underlying array instance of the observable
        jQuery.each(mydata, function () {
            items.push(this);
        });

        viewModel.items.valueHasMutated(); // let the observable know it's underlying data has been updated
     }
     catch (e) {
        alert(e.message);
    }
} 
```

执行上述技术可以显着提高加载时间。我已经在合理的时间内测试了这个加载几千行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-24T15:21:19.783

为了进一步解释，这是由于以下行：

```
_viewModelOrders.items.push(newItem); 
```

每次将项目推送到数组中时，它都会触发一个`change`事件，Grid 会看到并更新它自己。所以如果你推入 700 个项目，你真的会导致网格更新 DOM 700 次。

最好将所有项目聚合到一个数组中，然后将该数组分配给 DataSource，例如：

```
$.getJSON("/api/omsapi/GetOrders", orderdetails, function (mydata) {
    datasource2.data(mydata); 
```

# google-bigquery - BigQuery 加载时出现“后端错误”

> ID：14690204
> 
> 赞同：0
> 
> 时间：2013-02-04T15:45:17.717
> 
> 标签：google-bigquery

在加载数据文件时，我们在 BigQuery 方面遇到了许多后端错误。后端错误似乎很正常，在我们每小时运行的加载作业中每天发生一两次。在过去的三天里，我们遇到了大约 200 个后端错误。这在我们的系统中引起了级联问题。

直到过去三天，系统一直稳定。该错误是一个简单的“后端错误，请重试”。通常加载作业在再次运行时会起作用，但在过去三天里，问题变得更糟了。如果您需要我提供任何其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T19:54:45.700

周五我们确实遇到了一个问题，所有加载作业都在几个小时内返回后端错误，但这应该已经解决了。如果您从那时起看到后端错误，请告诉我们并发送失败作业的作业 ID。

# facebook - Facebook 关注按钮插件不允许在个人资料中使用句点

> ID：14690206
> 
> 赞同：0
> 
> 时间：2013-02-04T15:45:23.637
> 
> 标签：facebook, button, plugins, profile, period

尝试在此处使用 Facebook 的插件设置关注按钮：

[https://developers.facebook.com/docs/reference/plugins/follow/](https://developers.facebook.com/docs/reference/plugins/follow/)

我发现我输入的任何包含句点的个人资料网址（例如[http://www.facebook.com/John.Smith](http://www.facebook.com/John.Smith)）都会返回错误。

从我收到的错误控制台

```
Failed to load resource: The requested URL was not found on this server. 
```

插件的 HTML5、iframe 和 URL 版本会发生这种情况。出于好奇，我尝试使用 %2E 对句点进行编码，并且还尝试使用数字配置文件 ID，但均未成功。

我可以尝试其他任何技巧来完成这项工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T21:46:52.303

我不认为这是社交插件的问题。请输入个人资料[https://www.facebook.com/michael.kamleitner](https://www.facebook.com/michael.kamleitner)进行测试 - 一切都很好。

如果我打开 John Smith 的个人资料网址，我会收到一个错误（“找不到页面”） - 所以恕我直言，个人资料是受限制的/根本不公开。如果它受到隐私限制，则不能将其用于后续插件。如果您可以访问 John Smith 的帐户，请仔细检查他的关注者设置：[https ://www.facebook.com/settings?tab=followers](https://www.facebook.com/settings?tab=followers)

# c++ - 是否存在不应将 C4172 Visual C++ 警告视为错误的情况？

> ID：14690213
> 
> 赞同：13
> 
> 时间：2013-02-04T15:45:40.720
> 
> 标签：c++, visual-c++, compiler-warnings

当函数返回本地或临时地址或对局部变量的引用时，会出现 C4172 Visual C++警告[。](http://msdn.microsoft.com/en-us/library/d0ws2xs1%28v=vs.71%29.aspx)

像这样的东西：

```
int& fun()
{
    int var;
    return var; //C4172
} 
```

现在看起来使用`#pragma warning`使 Visual C++ 将 C4172 视为错误并中断编译是一个好主意。

是否存在 C4172 实际上不是错误的合理场景？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-04T15:53:46.743

我不确定为什么有人会想要这样做：

```
int * stackTester()
{
    int dummy;
    return &dummy;
}

bool stackGoesUp()
{
    int dummy;
    return stackTester() > &dummy;
} 
```

但一般来说，您应该将警告视为错误。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-04T16:32:14.430

这是 1 级警告，很难忽​​视。但是编译器在这里遵循语言标准，不禁止调用 UB。这是一个非常常见的错误，而且经常会以一个好的结果结束。只要您不进行任何函数调用，指向的堆栈位置就会保持稳定。

处理这个问题的最好方法是始终将警告变成错误。使用 /WX 编译，IDE 中的“将警告视为错误”设置。如果您随后有意抑制警告，那么#pragma 警告会向所有人清楚地表明正在发生的一些可疑的事情是经过深思熟虑的，而不是意外。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-04T16:27:26.340

未使用的代码

```
class base
{
   virtual blah& makeBlah() 
}

class red : public base
{
    blah& makeBlah() { return blah(); } // there are no red blahs, never called
}

class blue : public base
{
    blah& makeBlah() { actual code to make a blah }
} 
```

# android - 设备解锁时的处理意图

> ID：14690215
> 
> 赞同：0
> 
> 时间：2013-02-04T15:45:44.480
> 
> 标签：android

我想在收到一些广播时开始我的活动：1.如果设备打开 - 立即（这里没问题） 2\. 如果设备关闭 - 当设备打开时（并且已解锁）

第二点我不知道如何实现。我正在查看 PendingIntents 和 AlarmManager，但这不考虑设备锁定。一旦设备唤醒并解锁，我想以某种方式“qeueu”意图并处理它们。

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:52:08.453

您需要使用此系统意图：

1) [http://developer.android.com/reference/android/content/Intent.html#ACTION_BOOT_COMPLETED](http://developer.android.com/reference/android/content/Intent.html#ACTION_BOOT_COMPLETED)
2) [http://developer.android.com/reference/android/content/Intent.html#ACTION_USER_PRESENT](http://developer.android.com/reference/android/content/Intent.html#ACTION_USER_PRESENT)

很抱歉，我没有遇到您的第二个问题。
你能提供更多信息吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:52:35.870

有一个广播，`android.intent.action.USER_PRESENT`但据我所知，它*不会*被可靠地触发，因为当用户在场时，您总是会被告知。我已经看到这在解锁时被解雇了。但话又说回来，我可以将我的设备配置为不强迫我解锁它。

除此之外，很抱歉我在这个方向上没有找到任何东西；也许这足以满足您的目的。您还可以根据您的需要收听设置的更改、插入的电话等。尽管如此，我还是觉得 Android 中缺少一些东西。

# linux - “此 MIB 视图中没有剩余变量”是什么意思（Linux）？

> ID：14690216
> 
> 赞同：11
> 
> 时间：2013-02-04T15:45:45.300
> 
> 标签：linux, ubuntu, snmp

在 Ubuntu 12.04 上，我尝试使用以下命令获取管理值的子树：

```
snmpwalk -v 2c -c public localhost 
```

输出的最后一行是

```
iso.3.6.1.2.1.25.1.7.0 = No more variables left in this MIB View (It is past the end of the MIB tree) 
```

这是一个错误吗？一个警告？子树在那里结束吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-01-26T19:36:07.080

这里发生的事情比你想象的要多。我在我构建的每一个新的 Ubuntu 机器上都会遇到这个问题，我确实认为这是一个问题（不是错误，而是一个问题 - 更多关于这个的进一步说明）。

这是技术上正确的解释（为什么这不是“错误”）：

“此 MIB 视图中没有剩余变量”并不是特别错误；相反，它是关于您的请求的声明。该请求从一些简单的东西开始，比如“.1.3”，然后继续请求“下一个”词典 OID。它在最后一个之前获得了“下一个”OID，此时代理已通知您没有什么可看的了；不要打扰问。

现在，这就是我认为这是一个问题的原因（在这个问题的背景下）：

安装“snmpd”并运行它的目的是收集有关盒子的有意义的信息；通常，此信息是面向性能的。例如，我需要了解的三个常规信息是网络接口信息（IF-MIB::ifHCInOctets 和 IF-MIB::ifHCOutOctets）、磁盘信息（UCD-SNMP-MIB::dskUsed 和 UCD-SNMP- MIB::dskTotal）和 CPU 信息（UCD-SNMP-MIB::ssCpuRawIdle、UCD-SNMP-MIB::ssCpuRawWait 等）。

默认的 Ubuntu “snmpd” 配置明确拒绝了此配置的所有有用信息（限制访问仅足以告诉您该框是 Linux 框的信息）：

```
view systemonly included .1.3.6.1.2.1.1
view systemonly included .1.3.6.1.2.1.25.1
rocommunity public default -V systemonly 
```

此配置将盒子锁定，如果它位于不安全的网络上且几乎没有可用的 SNMP 管理知识，这可能是“安全的”。

但是，我要做的第一件事是删除“rocommunity”设置的“-V systemonly”部分；这将允许通过公共字符串“public”访问（只读）所有可用的 SNMP 信息。

如果你这样做，那么你可能会看到你所期望的，这是你可以用来衡量你的机器性能的一页又一页的 SNMP 信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-10T21:49:28.890

简而言之，这不是错误，实际上，当您“走上”代理上的所有 OID 时，它会显示您的这一行> 有时，它不会向您显示这一行，因为最后一个 OID 不在您的代理上（您已经了解了代理上的所有 OID，但还没有了解所有 OID）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-11T14:34:07.880

```
$ snmpwalk -v 2c -c public localhost NET-SNMP-EXTEND-MIB::nsExtendObjects
NET-SNMP-EXTEND-MIB::nsExtendObjects = No more variables left in this MIB View (It is past the end of the MIB tree) 
```

您也可能会收到此错误，而您可以尝试查看已执行的脚本我修复了该问题以添加

```
view all    included  .1                               80 
```

重新`snmpd.conf`启动服务

比你会看到你的输出对于两个输入都会改变

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-21T09:39:43.853

我知道这个线程可能很旧，我修复它是为了使用： ***rocommunity public***

那应该可以解决问题。

# php - 尽管一切都正确，但 MySql 查询语法错误

> ID：14690217
> 
> 赞同：0
> 
> 时间：2013-02-04T15:45:47.867
> 
> 标签：php, mysql

所有服务器详细信息都正确放置，并且连接确实发生了，我似乎找不到输出中显示的语法错误。

```
<?php
    ob_start();
    $phn=$_GET['phn'];
    $con = mysql_connect("<server>","<user>","<pass>") or die('error' . mysql_error());
    $db_selected = mysql_select_db('<db name>', $con);
    if (!$db_selected) {
        die ('Can\'t use user : ' . mysql_error());
    }
    $characters = 'abcdefghijklmnopqrstuvwxyz0123456789';
     $key= '';
     for ($i = 0; $i < 9; $i++) {
          $key.= $characters[rand(0, strlen($characters) - 1)];
     }
     echo $key;
    $sql="INSERT INTO buser (phone, key) VALUES (".$phn.",'".$key."')";
    if($result = mysql_query($sql ,$con) or die ('Error: '.mysql_error ()))
    {
    $q="SELECT * FROM buser WHERE phone=$phn";
    $idd=mysql_query($q,$con) or die ('Error: '.mysql_error ());
    while($row = mysql_fetch_assoc($idd))
      {
      $id=$row['bid'];
      }
    }
     ?> 
```

输出：

> 错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'key) VALUES (9999,'ywfjj2dtc')' 附近使用正确的语法

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T15:46:41.883

`KEY`是[MySQL 保留关键字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)。您必须将其括在反引号中才能将其用作列或表标识符。

```
$sql="INSERT INTO buser (phone, `key`) VALUES (".$phn.",'".$key."')"; 
```

您的脚本容易受到当前形式的 SQL 注入的攻击。至少，您*必须*调用`mysql_real_escape_string()`的值`$phn`。

```
$phn = mysql_real_escape_string($_GET['phn']); 
```

从长远来看，考虑切换到支持预处理语句的 API，如 MySQLi 或 PDO。

# c# - 无法跨 AppDomain 访问加载的程序集

> ID：14690222
> 
> 赞同：1
> 
> 时间：2013-02-04T15:46:00.540
> 
> 标签：c#, appdomain

**给出这个加载汇编代码：**

```
public class LoadAssembly : MarshalByRefObject, ILoadAssembly
{
    private readonly AppDomain currentDomain;
    public LoadAssembly()
    {
        currentDomain = AppDomain.CurrentDomain;
    }

    public void LoadFromFile(string filePath)
    {
        //currentDomain has no assemblies:
        Assembly.LoadFrom(filePath);
        //currentDomain has assemblies:

    }
} 
```

**给定以下测试：**

```
var appDomain = AppDomain.CreateDomain("test", null,
new AppDomainSetup
{
    ConfigurationFile = AppDomain.CurrentDomain.SetupInformation.ConfigurationFile,
    ApplicationBase = AppDomain.CurrentDomain.BaseDirectory,
    ShadowCopyFiles = "false"
});
var t = typeof(LoadAssembly);

//appDomain has no assemblies.
var loader = (ILoadAssembly)appDomain.CreateInstanceFromAndUnwrap(t.Assembly.Location, t.FullName);

loader.LoadFromFile("some path to a correct dll.");

//issue appDomain still has no assemblies. 
```

我正在尝试将程序集加载到新的 AppDomain 中。

然后断言它们的所有程序集都已加载到新的 AppDomain 中。

我可以看到在 LoadAssembly.LoadFromFile 内部，currentDomain 有我加载的程序集；

但是，当我尝试在我的 LoadAssembly 类之外使用 appDomain 时，它没有我期望的加载程序集。有任何想法吗？

* * *

var 应用程序域；手册（代理）没有我的程序集，在类的实例之外。

# java - 如何使用 Selector 对象和 DatagramChannel 进行非阻塞数据包接收

> ID：14690226
> 
> 赞同：3
> 
> 时间：2013-02-04T15:46:07.743
> 
> 标签：java, android, sockets, udp, nio

我有使用非阻塞 IO 来获取 UDP 数据包的工作代码，如下所示：

```
DatagramChannel channel = DatagramChannel.open();
channel.socket().bind(new InetSocketAddress(AUDIO_PORT));
channel.configureBlocking(false);

while(true){
   ByteBuffer packet = ByteBuffer.allocate(MAX_PACKET);
   if(channel.receive(packet) != null){
      //Got something!
      ...
   }
   ...
} 
```

这完美无缺。现在我正在尝试做同样的事情，只是这次我想使用选择器，如下所示：

```
//Create a datagram channel, bind it to port, configure non-blocking:

DatagramChannel channel = DatagramChannel.open();
channel.socket().bind(new InetSocketAddress(AUDIO_PORT));
channel.configureBlocking(false);

//Create a selector and register it:

Selector selector = Selector.open();
channel.register(selector, SelectionKey.OP_READ);

//Spin

while(true){

   //If there's a packet available, fetch it:

   if(selector.selectNow() >= 1){

       //**CODE NEVER REACHES THIS POINT**

       ByteBuffer packet = ByteBuffer.allocate(MAX_PACKET);
       channel.receive(packet);
       ...
   }
   ...
} 
```

由于我正在制作的应用程序，我真的需要它是非阻塞 IO（即使在我的示例中看起来我只是在旋转），并且用短暂的超时阻塞是行不通的。我也真的必须使用选择器。问题是，即使我有一个服务器主动向设备的 AUDIO_PORT 端口发送数据包，select() 操作总是返回 0。我知道服务器应用程序正在工作，因为第一个片段工作正常。我是否设置了选择器错误？我猜我错过了一些步骤，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T23:02:21.983

正如我相信我们之前在其他线程中讨论过的那样，如果第一个代码有效而第二个代码无效，则必须在 Android 中破坏选择器。您的代码是正确的（只要您每次获得非零返回时清除 Selector 的选定键集）。您可以通过在 Java 平台上运行它来验证这一点。

您可能会考虑更改`select() == 1`为以`select() > 0`获得更大的通用性，然后像您在所有示例中看到的那样循环选择键集，但这不应影响此代码的正确性。

我也相信我们已经讨论过，您可以尝试使用短读取超时而不是选择器的阻塞模式。

注意你不是在旋转，你是永远阻塞在`select().`

# batch-file - 如何将此原始字节输出转换为 GB？

> ID：14690230
> 
> 赞同：4
> 
> 时间：2013-02-04T15:46:14.147
> 
> 标签：batch-file

我正在使用以下代码输出 C: 驱动器上的当前可用空间。如何使用批处理将输出从字节转换为 GB？

```
@echo off
for /f "usebackq delims== tokens=2" %%x in (`wmic logicaldisk where "DeviceID='C:'" get       FreeSpace /format:value`) do set FreeSpace=%%x
echo %FreeSpace% 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T15:50:27.277

Batch 不支持浮点运算。这将是一个很好的解决方法：

```
@setlocal enableextensions enabledelayedexpansion
@echo off

for /f "usebackq delims== tokens=2" %%x in (`wmic logicaldisk where "DeviceID='C:'" get       FreeSpace /format:value`) do set FreeSpace=%%x

echo !FreeSpace:~0,-10!,!FreeSpace:~2,-8!GB 
```

它仅在您以管理员身份运行 .bat 时才有效。它只是在右边的 9 位之后插入一个点，并修剪最后 7 位。这与 windows 的值不完全匹配，因为 1k 在这里是 1000 而不是 1024

更好但更复杂的解决方案是使用 VBScript，如下文所述：[文章](http://www.celticproductions.net/articles/11/batch+files/add+floating+point+numbers+in+batch+file.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T15:50:37.657

这是一个以整数形式给出 GB 的解决方案。可能不是您想要的，但它很容易做到，并且可以满足您的需要。使用 wmic 我无法真正让它为我工作，但 wmic 可能比 dir 更好。

```
@setlocal enableextensions enabledelayedexpansion
@echo off
for /f "tokens=3" %%a in ('dir c:\') do (
    set bytesfree=%%a
)
set bytesfree=%bytesfree:,=%
endlocal && set bytesfree=%bytesfree%

rem truncating end. loses precision
set /a kb=%bytesfree:~0,-3%
set /a mb = kb/1024
set /a gb = mb/1024
echo %gb% 
```

嗯，好吧，这里使用 wmic 也是一样的。

```
@setlocal enableextensions enabledelayedexpansion
@echo off
for /f "usebackq delims== tokens=2" %%x in (`wmic logicaldisk where "DeviceID='C:'" get       FreeSpace /format:value`) do set FreeSpace=%%x

rem truncating end. losing precision
set /a kb=%FreeSpace:~0,-4%
set /a mb = kb/1024
set /a gb = mb/1024
echo %gb% 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T02:23:40.640

必须使用批处理命令吗？不能使用 PowerShell 吗？

```
[System.IO.DriveInfo]::GetDrives() | Where {$_.Name -eq 'C:\'} |
Select {$_.AvailableFreeSpace/1GB} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-13T17:03:43.230

```
REM ECHO Disk Storage

for /f "tokens=1" %%d in (
 'wmic logicaldisk where drivetype^=3 get deviceid ^| find ":"') do ( 
    for /f "usebackq delims== tokens=2" %%x in (`wmic logicaldisk where "DeviceID='%%d'" get Size /value`) do set Size=%%x
    echo VolumeSize on %%d Partition = !Size:~0,-10!,!Size:~2,-8! GB >output.txt
    for /f "usebackq delims== tokens=2" %%x in (`wmic logicaldisk where "DeviceID='%%d'" get FreeSpace /value`) do set FreeSpace=%%x
    echo Freespace on %%d Partition = !FreeSpace:~0,-10!,!FreeSpace:~2,-8! GB >> output.txt
    echo.
    )
) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-28T16:09:52.190

可以使用[`StrFormatByteSize64()`API 函数](https://msdn.microsoft.com/en-us/library/windows/desktop/bb759971(v=vs.85).aspx)将 long int 转换为人类可读的大小。`cmd`与截断以满足环境的 32 位限制相比，这会产生更准确的值。此 API 函数支持从字节和千字节到 PB 和 EB 范围内的值。

（此脚本是 Batch + PowerShell 混合脚本。使用**.bat**扩展名保存它。）

```
<# : batch portion
@echo off & setlocal

for /f "tokens=2 delims==" %%x in (
    'wmic logicaldisk where "DeviceID='C:'" get FreeSpace /value'
) do call :int2size FreeSpace %%x

echo %FreeSpace% free on C:

rem // end main runtime
exit /b

rem // batch int2size function
:int2size <return_varname> <int>
setlocal
set "num=%~2"
for /f "delims=" %%I in (
    'powershell -noprofile "iex (${%~f0} | out-string)"'
) do endlocal & set "%~1=%%I" & goto :EOF

: end batch / begin PowerShell #>
Add-Type @'
using System.Runtime.InteropServices;
namespace shlwapi {
    public static class dll {
        [DllImport("shlwapi.dll")]
        public static extern long StrFormatByteSize64(ulong fileSize,
            System.Text.StringBuilder buffer, int bufferSize);
    }
}
'@

$sb = new-object Text.StringBuilder 16
[void][shlwapi.dll]::StrFormatByteSize64($env:num, $sb, 16)
$sb.ToString() 
```

# php - 在会话被销毁后诱导函数

> ID：14690233
> 
> 赞同：0
> 
> 时间：2013-02-04T15:46:28.263
> 
> 标签：php, javascript

我想在会话被销毁后引发一个函数（即用户关闭浏览器）。此函数会将我数据库中的值从 true 更改为 false。那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:51:28.937

我猜你想弄清楚用户是否在线（或类似的东西？）“知道”（阅读：猜测）会话已死的唯一方法是存储用户的时间上次活动，然后将该时间与当前时间进行比较。然后，根据您的需要，您可以决定***假设***某个已闲置 30 分钟的用户处于离线状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:52:49.477

做到这一点的唯一方法是使用 Javascript 检测关闭并使用 Ajax 请求（`XMLHttpRequest`例如使用）到您的 PHP 页面（处理注销部分）。

有关关闭部分的更多信息，请参阅[使用 javascript（或任何其他语言）的浏览器/选项卡关闭检测。](https://stackoverflow.com/questions/9941354/browser-tab-close-detection-using-javascript-or-any-other-language)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T16:03:16.520

我建议你在你的数据库中注册用户的最后一个活动，这样它是 100% 准确的。然后通过将注册日期与当前时间进行比较，您可以决定用户何时处于活动状态。

如果你真的想知道用户是否还在你的页面上，你也可以做一些事情，但你应该避免它：在客户端，做一个 javascript 循环，例如每分钟，告诉你的服务器客户端是还在那里。当客户端关闭他的页面时，循环不会进行任何新的查询。

# flash - 在没有 adobe flash 的情况下编译 flash 代码

> ID：14690238
> 
> 赞同：-2
> 
> 时间：2013-02-04T15:46:45.480
> 
> 标签：flash, actionscript, adobe

我有一个用 AS2 编写的 adobe flash 的 flash 项目，当然我有 .fla 文件。该程序具有一种身份验证来更改编写代码时使用的参数。这意味着我写了类似的东西：

```
if (userEnteredPassword == "xyz")
{
//login success logic
} 
```

现在我给用户的唯一东西就是 .exe 文件。我希望用户能够更改密码。我怎样才能做到这一点？编译时如何更改上述代码中的“xyz”？我想我可以散列密码并存储在 .exe 文件旁边的文件中；并检查哈希字符串以进行身份​​验证。我可以制作一个简单的哈希函数。这可能吗？如何处理文件？谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T16:44:34.230

如果您的 Flash 是用 AS2（而不是 AS3）编写的，并且您拥有所有 ActionScript 源代码，则可以使用[MTASC](http://www.mtasc.org/)编译器，但这可能会很棘手，具体取决于应用程序的编写方式。如果你没有源代码，你就必须反编译SWF，祈祷反编译器能全面解构一切。不幸的是（谢天谢地），我看到的那些无法解构可重构的 Flash。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T23:41:44.703

如果没有 FLA 文件，很难为您提供具体的解决方案。我只能给你一句话。您的初始编译仍需要 Flash，您可以轻松获得 60 天的试用期。

解决方案之一是在 AS 类中将此密码外部化，但仍将其与 SWF 一起编译以获得更好的安全性（但不会太多，因为反编译器可以轻松找到密码）。

您需要找到密码编码的区域，假设它是一个带有 ActionScript 块的框架。假设声明就像

```
if (userEnteredPassword == "xyz")
{
    //login success logic
} 
```

您可以将其重写为

```
if (userEnteredPassword == appsetting.Settings.password )
{
    //login success logic
} 
```

*然后在appsetting*文件夹中创建一个 AS 文件 Settings.as ：

```
class appsetting.Settings
{
    public static var password:String = "xyz";
} 
```

将 FLA 编译成 SWF，并确保没有错误。随后，您的 SWF 可能会在没有 Flash IDE 的情况下由 MTASC 更新。

因此，假设 SWF 和密码 AS 文件位于同一目录中，您的 MTASC 命令看起来像

mtasc.exe -swf your_swf_file.swf -cp ./ -out your_swf_with_new_password.swf

**安全考虑** 正如我之前所说，以纯文本形式存储的密码是错误的。一种轻微的方法是使用单向加密（如 MD5）对密码进行加密，然后您需要将加密的用户输入与加密的密码进行比较。这还需要加密库，您需要一些 Flash 知识才能这样做。

最好的解决方案是让服务器验证密码。您可以进行 http 调用并让服务器验证密码是否匹配，这样您就不会以任何形式公开密码。这种方法涉及更多。

# c# - 如何查看 ListView 是单击还是选择（鼠标右键单击）？

> ID：14690243
> 
> 赞同：1
> 
> 时间：2013-02-04T15:47:02.850
> 
> 标签：c#, xaml, windows-runtime

我有一个 ListView，我想做以下事情：

*   当您进行正常单击时，我想获取该事件，但不应更改列表并且不应选择该项目
*   当我选择一个项目时（在非触摸屏设备上，这是鼠标右键）我想选择该项目并获得一个事件

但是如何在`ListView`C# 中捕获这两个不同的事件？

我试过了：`listView1_RightTapped`但是当我点击一个项目时，这没有反应`ListView`

我也厌倦了`listView1_SelectionChanged`这应该是第一个问题，但是我不想选择的项目也被选中（例如，具有其他背景）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T18:27:31.697

您可以`SelectionChanged`用于选择和`ItemClick`单击（使用`IsItemClickEnabled="True"`）。

# c# - 如何将选定的选项卡存储在 RadTabStrip 上，单击后退按钮可以返回

> ID：14690249
> 
> 赞同：2
> 
> 时间：2013-02-04T15:47:05.247
> 
> 标签：c#, javascript, ajax, telerik

我目前使用一个隐藏的输入字段，它通过javascript分配了刚刚选择的选项卡的值，如下所示：

```
function onTabSelecting(sender, args) {
    var tab = args.get_tab(); //get selected tab
    document.getElementById("MainContent_hdnPreviousTab").value = tab.get_text(); //assign value to hidden field
    if (tab.get_pageViewID()) { //ignore
    tab.set_postBack(false);
    }
} 
```

然后，当页面返回到客户端（ajax）PageLoad（）事件时，我使用这个分配的值：

```
<script type="text/javascript" language="javascript">
    var runOnce = false;
    function pageLoad() {
        if (!runOnce) {
            var lastTab = document.getElementById("<%= hdnPreviousTab.ClientID %>");
            if (lastTab.value) {
                if (tabStrip) {
                    var tab = tabStrip.findTabByText(lastTab.value);
                    if (tab) {
                        tab.click();
                    }
                }
            }
            runOnce = true;
        }
    }
</script> 
```

目前在 IE 中这工作正常（我知道对吗？），之前在 javascript 中设置的值仍然存在，我能够找到用户离开页面的选项卡。但是在 FF、Chrome 等中，我没有这样的运气。无论是否使用视图状态，隐藏字段都会返回到它的空状态（值 = ""）。

非常好奇是否有人有适合这种情况的替代方法。如果不清楚，请告诉我。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:59:06.283

您可以使用本地存储。

`localStorage.setItem('tab', value);`

# android - MediaPlayer 停止流式音频播放

> ID：14690258
> 
> 赞同：7
> 
> 时间：2013-02-04T15:47:43.160
> 
> 标签：android, audio-streaming, android-mediaplayer

我使用 MediaPlayer 通过 http 播放 mp3 流。在某些特定设备上，它不会太频繁地到达流的末尾。只是停下来。它只发生在 2.3.x 上，在 Jelly Bean 上无法捕捉到这个问题。logcat 中唯一奇怪的行：

```
02-04 17:34:14.379: ERROR/HTTPStream(95): recv failed, server is gone, total received: 54683 bytes
02-04 17:34:14.379: ERROR/HTTPStream(95): recv failed, errno = 9 (Bad file number)
02-04 17:34:14.379: ERROR/NuCachedSource2(95): source returned error -1004 
```

`OnCompletionListener`被称为（太早）

似乎它只下载了 5MB 的流并且没有尝试下载更多。

主要发生在三星 Galaxy Ace 设备上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-01T05:43:16.667

您可以在 android 中尝试 [使用音频流链接（即 2%、4%...100% 然后在线收音机开始播放）的这个 android 媒体播放器连接状态](https://stackoverflow.com/questions/20051803/android-media-player-connecting-status-with-audio-streaming-linkie-2-4-100)

这完美地通过 http 播放流媒体 mp3。或者只是去 [http://coderfriend.blogspot.com/](http://coderfriend.blogspot.com/)博客。

# elisp - 在elisp中如何从变量中提取值

> ID：14690259
> 
> 赞同：0
> 
> 时间：2013-02-04T15:47:50.580
> 
> 标签：elisp, emacs23

我在第一个练习部分（Emacs Lisp Intro），但我没有得到它；3.12 练习：

编写一个函数来测试 `fill-column' 的当前值是否大于传递给函数的参数，如果是，则打印适当的消息。

我有：

```
(defun is-fill-equal (number)
   "Is fill-column greater than the argument passed to the function."
   (interactive "p")
(if (= fill-column number)
    (message "They are equal.")
  (message "They are not equal.")) 
```

无论我尝试什么，我都会收到此错误：

调试器进入--Lisp 错误: (void-variable number)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T15:55:18.093

你最后少了一个括号。尝试：

```
(defun is-fill-equal (number)
   "Is fill-column greater than the argument passed to the function."
   (interactive "p")
   (if (= fill-column number)
       (message "They are equal.")
     (message "They are not equal."))) 
```

错误消息的原因是您可能`C-x e`在函数定义的末尾。由于您缺少一个括号，Emacs 认为您要评估的表达式在该上下文中是`(if (= fill-column number) ...)`并且未绑定。`number`

# sql - 从汇总函数中删除 NULL

> ID：14690260
> 
> 赞同：1
> 
> 时间：2013-02-04T15:47:53.527
> 
> 标签：sql, sql-server, rollup

我正在使用 Rollup 功能，我几乎达到了我所需要的完美点，只需要删除一个小东西。

```
declare @FromDate datetime
declare @ToDate datetime
declare @StoreNumber varchar(10)
declare @AllStores varchar(1)
set @FromDate = '1/1/12'
set @ToDate = '1/1/13'
set @StoreNumber = '01'
set @AllStores = 'y'

If @AllStores = 'Y'
Begin
select 
CASE WHEN (GROUPING(s.StoreID) = 1) THEN 'All Stores' ELSE ISNULL(s.StoreID, 'UNKNOWN') END as 'Store #',
CASE WHEN (GROUPING(b.currencydesc) = 1) THEN 'Store #' + s.StoreID + ' TOTAL' ELSE ISNULL(b.currencydesc, 'UNKNOWN') END as 'Tender Type', SUM(amount) as Total
from RPTrs s 
join rpPay p on s.storeid = p.StoreID and s.ReceiptNO = p.ReceiptNo
join Currencies b on b.POSCurrency = LEFT(p.paytype,1)
where trsdate between @FromDate and @ToDate
group by s.storeid, b.currencydesc with rollup
End
Else
Begin
select 
s.StoreID as 'Store #',
CASE WHEN (GROUPING(b.currencydesc) = 1) THEN 'Store #' + s.StoreID + ' TOTAL' ELSE ISNULL(b.currencydesc, 'UNKNOWN') END as 'Tender Type', SUM(amount) as Total
from RPTrs s 
join rpPay p on s.StoreID = p.StoreID and s.ReceiptNO = p.ReceiptNo
join Currencies b on b.POSCurrency = LEFT(p.paytype,1)
where trsdate between @FromDate and @ToDate
and s.StoreID = @StoreNumber
group by grouping sets((s.StoreID),(s.StoreID, b.CurrencyDesc)) 
End 
```

有了这个输出。

```
Store # Tender Type Total
01  Amex    250.00
01  C.Card  3138.00
01  Cash    53553.17
01  Gift Card   1595.35
01  MasterCard  813.10
01  Off Line C.Card 247.53
01  Str Cr  -544.45
01  Visa/MC 437.35
01  Store #01 TOTAL 59490.05
02  Cash    238.15
02  Store #02 TOTAL 238.15
All Stores  NULL    59728.20 
```

如何使所有商店中的 NULL 总计消失？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:57:13.247

一种方法是将查询包装在 a 中`SELECT`，然后`COALESCE`在要替换`null`值的列上使用：

```
SELECT [store #], 
       COALESCE([tender type], '') [Tender Type], 
       total 
FROM   
(
    SELECT 
        CASE 
            WHEN ( Grouping(s.storeid) = 1 ) 
            THEN 'All Stores' 
            ELSE Isnull(s.storeid, 'UNKNOWN') 
        END         AS [Store #], 
        CASE 
            WHEN ( Grouping(b.currencydesc) = 1 ) 
            THEN 'Store #' + s.storeid + ' TOTAL' 
            ELSE Isnull(b.currencydesc, 'UNKNOWN') 
        END         AS [Tender Type], 
        Sum(amount) AS Total 
    FROM   rptrs s 
    JOIN rppay p 
        ON s.storeid = p.storeid 
        AND s.receiptno = p.receiptno 
    JOIN currencies b 
        ON b.poscurrency = LEFT(p.paytype, 1) 
    WHERE  trsdate BETWEEN @FromDate AND @ToDate 
    GROUP  BY s.storeid, b.currencydesc WITH rollup
) src 
```

或者您可以将列包装在`COALESCE()`没有子查询的 a 中：

```
SELECT 
    CASE 
        WHEN ( Grouping(s.storeid) = 1 ) 
        THEN 'All Stores' 
        ELSE Isnull(s.storeid, 'UNKNOWN') 
    END               AS [Store #], 
    COALESCE(CASE 
                WHEN ( Grouping(b.currencydesc) = 1 ) 
                THEN 'Store #' + s.storeid + ' TOTAL' 
                ELSE Isnull(b.currencydesc, 'UNKNOWN') 
            END, '') AS [Tender Type], 
    Sum(amount)       AS Total 
FROM   rptrs s 
JOIN rppay p 
    ON s.storeid = p.storeid 
    AND s.receiptno = p.receiptno 
JOIN currencies b 
    ON b.poscurrency = LEFT(p.paytype, 1) 
WHERE  trsdate BETWEEN @FromDate AND @ToDate 
GROUP  BY s.storeid, b.currencydesc WITH rollup 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T16:05:47.937

您的问题似乎在以下行：

```
CASE WHEN (GROUPING(b.currencydesc) = 1) THEN 'Store #' + s.StoreID + ' TOTAL' ELSE ISNULL(b.currencydesc, 'UNKNOWN') END as [Tender Type], 
```

考虑一下：

```
SELECT '1' + NULL 
```

这将返回 NULL。改用 COALESCE：

```
SELECT COALESCE('1' + NULL,'') 
```

这将返回''。我想 StoreId 在您的上述情况下为 NULL 。这是完整的代码：

```
CASE WHEN (GROUPING(b.currencydesc) = 1) THEN COALESCE('Store #' + s.StoreID + ' TOTAL','') ELSE ISNULL(b.currencydesc, 'UNKNOWN') END as [Tender Type], 
```

祝你好运。

# ipad - 闪烁或突出显示多个 UITableView 单元格

> ID：14690263
> 
> 赞同：1
> 
> 时间：2013-02-04T15:48:08.103
> 
> 标签：ipad, ios5, uitableview

**当前情况：**我已经实现了拖放功能，用户可以将项目从一个地方拖放到 UITableView 中任何允许的行上。例如，用户只能将项目拖放到第一个单元格或前 3 个单元格上。其他单元格无效。这工作正常。

**问题：**在我的实现中，用户对放置项目的位置感到困惑。我想闪烁或突出显示用户可以按需放置项目的所有单元格（我的意思是当用户有项目要放置时，前 3 个单元格将开始闪烁或突出显示）。简而言之，无论如何我都可以在需要时手动闪烁多个单元格，然后稍后将它们重置为原始状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T18:18:31.587

在这种情况下，我建议您对单元格或其 contentView 实现闪烁效果。在动画块中，您需要使用计时器来切换 alpha。[您可以从此问题](https://stackoverflow.com/questions/7820232/blink-hidden-and-using-blocks)中获取示例代码，您可以对其进行修改以将其放入计时器并应用于您的单元格。

```
[UIView transitionWithView:cell.contentView
       duration:0.6f
       options:UIViewAnimationOptionCurveEaseInOut | UIViewAnimationOptionRepeat | UIViewAnimationOptionAutoreverse
       animations:^{ cell.contentView.layer.alpha = 0.4f; }
       completion:NULL]; 
```

# image-processing - DFT频率分量Opencv

> ID：14690265
> 
> 赞同：3
> 
> 时间：2013-02-04T15:48:20.913
> 
> 标签：image-processing, opencv, computer-vision

我使用以下链接了解如何在 Opencv 中使用 DFT

```
 http://docs.opencv.org/doc/tutorials/core/discrete_fourier_transform/discrete_fourier_transform.html 
```

我了解如何从 Dft 中提取幅度。但是，我想知道每个幅度代表什么频率，以了解高频和低频的存在。你能帮我解释一下吗？每个幅度是什么频率的系数？

我想在不绘图的情况下知道这一点，因为我想自主使用这些数据，而不是从绘图中手动引用。请帮我

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T09:26:12.207

听起来你需要一个信号处理课而不是计算机视觉课。您从 DFT 中得到的是一个复杂组件的矩阵，与您放入其中的图像一样大。这些对应于从 0（左上角）到采样频率（右下角）的频率分量。频率等于采样频率的分量是周期为 1 个像素的分量。水平和垂直周期为 4 个像素的分量的频率是采样频率的四分之一，因此可以在位置 [rows/4, cols/4] 找到，因为周期长四倍意味着频率小四倍。

假设您正在寻找水平周期为 10 像素，垂直周期为 6 像素的组件。这个分量可以在 DFT 结果的 [rows/6, cols/10] 位置找到。

# python - 如何测试某个日志消息是否记录在 Django 测试用例中？

> ID：14690267
> 
> 赞同：34
> 
> 时间：2013-02-04T15:48:34.183
> 
> 标签：python, django, unit-testing, testing, python-unittest

我想确保我的代码中的某个条件导致将日志消息写入 django 日志。我将如何使用 Django 单元测试框架来做到这一点？

有没有一个地方可以让我检查记录的消息，就像我可以检查已发送的电子邮件一样？我的单元测试扩展了`django.test.TestCase`.

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-02-04T16:07:36.250

使用[`mock`](http://www.voidspace.org.uk/python/mock/)模块来模拟日志模块或记录器对象。完成后，检查调用日志记录函数的参数。

例如，如果您的代码如下所示：

```
import logging

logger = logging.getLogger('my_logger')

logger.error("Your log message here") 
```

它看起来像：

```
from unittest.mock import patch # For python 2.x use from mock import patch

@patch('this.is.my.module.logger')
def test_check_logging_message(self, mock_logger):
    mock_logger.error.assert_called_with("Your log message here") 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2017-11-03T08:58:41.520

您也可以`assertLogs`使用`django.test.TestCase`

当你的代码是

```
import logging

logger = logging.getLogger('my_logger')

def code_that_throws_error_log():
    logger.error("Your log message here") 
```

这是测试代码。

```
with self.assertLogs(logger='my_logger', level='ERROR') as cm:

    code_that_throws_error_log()

    self.assertIn(
        "ERROR:your.module:Your log message here",
        cm.output
    ) 
```

这使您可以避免只为日志打补丁。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-01-27T12:29:18.733

模拟 logger 对象的常用方法（请参阅出色的小伙 Simeon Visser 的回答）有点棘手，因为它需要测试来模拟它完成的所有地方的日志记录。如果日志记录来自多个模块，或者在您不拥有的代码中，这会很尴尬。如果日志记录来自的模块更改名称，它将破坏您的测试。

出色的 ' [testfixtures](https://testfixtures.readthedocs.io/en/latest/logging.html) ' 包包括添加日志处理程序的工具，该处理程序捕获所有生成的日志消息，无论它们来自何处。捕获的消息稍后可以通过测试进行询问。最简单的形式：

假设正在测试的代码，其中记录：

```
import logging
logger = logging.getLogger()
logger.info('a message')
logger.error('an error') 
```

对此的测试将是：

```
from testfixtures import LogCapture
with LogCapture() as l:
    call_code_under_test()
l.check(
    ('root', 'INFO', 'a message'),
    ('root', 'ERROR', 'an error'),
) 
```

`logging.getLogger()`“root”一词表示日志记录是通过使用（即没有参数）创建的记录器发送的。如果您将 arg 传递给 getLogger（`__name__`常规），则该 arg 将用于代替“root”。

测试不关心哪个模块创建了日志记录。它可能是我们的被测代码调用的子模块，包括第 3 方代码。

测试断言所生成的实际日志消息，而不是模拟技术，后者断言所传递的参数。如果 logging.info 调用使用 '%s' 格式字符串和您不扩展自己的附加参数（例如，使用`logging.info('total=%s', len(items))`而不是`logging.info('total=%s' % len(items))`，您应该这样做。这不是额外的工作，并允许假设的未来日志聚合服务，例如'Sentry' 正常工作 - 他们可以看到 "total=12" 和 "total=43" 是同一日志消息的两个实例。这就是 pylint 警告后一种`logging.info`调用形式的原因。）

LogCapture 包括用于日志过滤等的工具。它的父 'testfixtures' 包由另一个出色的小伙 Chris Withers 编写，包括许多其他有用的测试工具。文档在这里： http: [//pythonhosted.org/testfixtures/logging.html](http://pythonhosted.org/testfixtures/logging.html)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-01-05T18:38:22.087

Django 有一个很好的上下文管理器函数，叫做`patch_logger`.

```
from django.test.utils import patch_logger 
```

然后在您的测试用例中：

```
with patch_logger('logger_name', 'error') as cm:
    self.assertIn("Error message", cm) 
```

在哪里：

*   `logger_name`是记录器名称（duh）
*   `error`是日志级别
*   `cm`是所有日志消息的列表

更多细节：

[https://github.com/django/django/blob/2.1/django/test/utils.py#L638](https://github.com/django/django/blob/2.1/django/test/utils.py#L638)

对于 django < 2.0，它应该与 python 版本无关（只要它受 dj 支持）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-23T17:42:46.727

如果您正在使用测试类，则可以使用以下解决方案：

```
import logger

from django.test import TestCase

class MyTest(TestCase):
    @classmethod
    def setUpClass(cls):
        super(MyTest, cls).setUpClass()
        cls.logging_error = logging.error
        logging.error = cls._error_log

    @classmethod
    def tearDownClass(cls):
        super(MyTest, cls).tearDownClass()
        logging.error = cls.logging_error

    @classmethod
    def _error_log(cls, msg):
      cls.logger = msg

    def test_logger(self):
        self.assertIn('Message', self.logger) 
```

此方法仅出于测试目的将模块的`error`功能替换为`logging`您的自定义方法，并将 stdout 放入`cls.logger`变量中，该变量可通过调用在每个测试用例中使用`self.logger`。最后，它通过将模块中的`error`功能放回原处来恢复更改。`logging`

# c# - 无效字符

> ID：14690269
> 
> 赞同：0
> 
> 时间：2013-02-04T15:48:38.740
> 
> 标签：c#, sql, clr

我正在为 sql server 创建 CLR 程序集，它将一些数据从数据库保存到 excel 文件中。在我从数据库中收到无效字符错误之前，它可以正常工作：

> System.ArgumentException：''，十六进制值 0x04，是无效字符。

问题是文件保持锁定状态，直到下次执行此 CLR 过程才能删除它。发生错误甚至删除文件时如何解锁文件？

另一个问题？我可以保存无效字符的excel文件吗？

```
using System;
using System.Data;
using System.Data.SqlClient;
using System.Data.SqlTypes;
using Microsoft.SqlServer.Server;
using ClosedXML.Excel;

[System.Security.Permissions.PermissionSet(System.Security.Permissions.SecurityAction.Assert, Name = "FullTrust")]
public partial class StoredProcedures
{
    [Microsoft.SqlServer.Server.SqlProcedure]
    public static void createExcel(SqlString procName, SqlString fileName, SqlString filePath, SqlXml xmlParams, out SqlBoolean result)
    {
        result = false;
        DataSet exportData = new DataSet();

        if (procName.Value == string.Empty)
            throw new Exception("Procedure name value is missing.");

        if (filePath.Value == string.Empty)
            throw new Exception("Missing file path location.");

        if (fileName.Value == string.Empty)
            throw new Exception("Missing name of file.");

        using (SqlConnection conn = new SqlConnection("context connection=true"))
        {
            using (SqlCommand getOutput = new SqlCommand())
            {

                getOutput.CommandText = procName.ToString(); ;
                getOutput.CommandType = CommandType.StoredProcedure;
                getOutput.CommandTimeout = 300;
                getOutput.Connection = conn;

                conn.Open();
                using (SqlDataAdapter da = new SqlDataAdapter(getOutput))
                {
                    da.AcceptChangesDuringFill = false;//drugače da pokliče na koncu AcceptChanges in hasChanges je vedno false
                    da.Fill(exportData);
                    conn.Close();
                    da.Dispose();

                    try
                    {
                        if (exportData.HasChanges())
                        {
                            using (XLWorkbook xlWb = new XLWorkbook(XLEventTracking.Disabled))
                            {
                                xlWb.Worksheets.Add(exportData.Tables[0]);
                                xlWb.SaveAs(filePath.ToString() + fileName.ToString());
                                result = true;
                            }
                        }
                    }
                    finally
                    {
                        exportData.Dispose();
                    }
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:13:23.787

真正的解决方案是清理数据。尝试在返回数据的存储过程中执行此操作，我相信这是最好的方法。

如果这不可能，您可能希望在 CLR 程序集中执行此操作：使用 a`SqlDataReader`而不是`SqlDataAdapter`，清理每个检索到的值并逐个单元格地添加这些值。

# python - 在不同的类中创建小部件

> ID：14690270
> 
> 赞同：0
> 
> 时间：2013-02-04T15:48:51.297
> 
> 标签：python, pyqt, pyqt4

我在“DataClass”中有主窗口。如何在另一个类（HelloClass）中创建小部件

测试.py

```
import sys
import label
from PyQt4 import QtGui, QtCore

class DataClass(QtGui.QMainWindow):
    def __init__(self):
        super(DataClass, self).__init__()
        self.window()

    def window(self):
        ex=label.HelloClass(self)
        ex.print_label()

def main():
    app = QtGui.QApplication(sys.argv)
    ob=DataClass()
    ob.show()
    sys.exit(app.exec_())

if __name__=='__main__':
    main() 
```

这是'label.py'文件：

```
import sys
from PyQt4 import QtGui, QtCore

class HelloClass(QtGui.QMainWindow):

    def print_label(self):
        self.la=QtGui.QLabel("hello",self)
        self.la.move(300,100)
        self.la.show()

import sys
from PyQt4 import QtGui, QtCore

class HelloClass(QtGui.QMainWindow):

    def print_label(self):
        self.la=QtGui.QLabel("hello",self)
        self.la.move(300,100)
        self.la.show() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:59:00.960

你不能有两个类，你不应该从on`QMainWindow`继承。如果您将 parent 设置为 label ，则将其设置为 your which is your 。`QMainWindow``HelloClass``DataClass``QMainWindow`

```
class HelloClass(object):
    def print_label(self, parent):
        self.la = QtGui.QLabel("hello", parent)
        self.la.move(300, 100)
        self.la.show()

class DataClass(QtGui.QMainWindow):
    def __init__(self):
        super(DataClass, self).__init__()
        self.window()

    def window(self):
        ex = label.HelloClass()
        ex.print_label(self) 
```

但老实说，使用 PyQt 创建 GUI 的最佳方式是使用 QtDesigner。使用 QtDesigner 创建 .ui 文件，然后使用 command 创建 .py 文件`pyuic4 your.ui -o ui_your.py`。

--**更新**--

使用 QtDesigner 创建的 gui 的控制器类如下所示：

```
from ui_objects import Ui_Objects  # this is class created with QtDesigner, name of class is a 'Ui_' + name of main Object in QtDesigner    

class Objects(QtGui.QWidget):

    def __init__(self):
        QtGui.QWidget.__init__(self)
        self.ui = Ui_Objects()
        self.ui.setupUi(self)

    # then you can add your own code, in example connect your own methods to actions for widgets 
```

# excel - Excel VBA 对象需要错误

> ID：14690271
> 
> 赞同：0
> 
> 时间：2013-02-04T15:48:51.137
> 
> 标签：excel, vba

我有两行看起来非常简单的代码，但是 excel 不断给我这个编译错误，告诉我需要对象？

所以基本上我想获取当前时间，并用下划线替换空格，这样我就可以使用这个字符串作为我的日志时间的名称。

```
Dim name As String

'EXCEL GIVE ME compile error: object required
name = Replace(FormatDateTime(Now, DateFormat.LONGTIME), " ", "_") 
```

怎么了？！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:56:59.277

将 DateFormat.LONGTIME 替换为 'vbLongTime' 对我有用。

```
name = Replace(FormatDateTime(Now, vbLongTime), " ", "_") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T15:53:52.670

您需要调用 Now 因为它不是变量而是过程

```
var now = str(Now());
name = Replace(FormatDateTime(now, DateFormat.LONGTIME), " ", "_") 
```

应该修复它

# android - 监控 Android 活动生命周期回调

> ID：14690272
> 
> 赞同：0
> 
> 时间：2013-02-04T15:48:53.293
> 
> 标签：android

我希望能够从程序启动任意应用程序（例如，通过执行命令“am start”，然后在应用程序活动中的生命周期回调（例如 onStart、onStop）以某种方式通知程序是叫。

问题是我不能依赖拥有应用程序的源代码，因此不能修改它以将代码添加到应用程序的这些回调的实现中。

有没有办法在不修改 Android 活动管理器或编写自定义活动管理器的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:51:42.117

常规活动管理器可以为您提供正在运行的任务的名称（getRunningTasks），但恐怕没有您可以实现在任务启动/停止时获取回调的接口。

# csv - 在 Windows 中合并 CSV 文件（最好是 .cmd 或 .bat 文件）

> ID：14690276
> 
> 赞同：0
> 
> 时间：2013-02-04T15:49:05.697
> 
> 标签：csv, batch-file

我可能在不同时间有需要合并的 .csv 文件。它们具有相同的标题和列布局。我只需要一种简单的方法在 Windows 7 中组合它们。用户可能并不总是安装 excel。

.cmd 宏会很棒，但我在网上找到的宏不起作用。

到目前为止，我得到的最好的是：

“打开命令窗口（“cmd.exe”）并键入以下两行（无括号）

```
cd "Desktop\[csv-files]"
type *.csv > my-new-file.csv"

Where the files to be combined are in Desktop\[csv-files]. 
```

但是 - 它似乎创建了组合条目的重复（或在某些情况下为三次）。例如，我有 2 个文件分别测试了 23 个和 26 个唯一条目。我得到了一个包含 100 个条目的文件，并且至少有一个条目重复了 3 次。

现在我正在测试的 .csv 文件只有大约 25 个条目长，但随着时间的推移，它们可能有数千个或更多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T22:28:50.343

听起来您在使用`*.csv`输出并将输出重定向到`.csv`同一文件夹中的文件时遇到问题。DOS 似乎正在查找该`my-new-file.csv`文件，`*.csv`并且正在将其*键入*自身...您可以使用不同的输出文件扩展名，直到`type`命令完成后，然后您可以重命名输出文件...类似于：

```
cd "Desktop\[csv-files]"
type *.csv > my-new-file.txt
ren my-new-file.txt my-new-file.csv 
```

您还可以在第一个文件之后跳过每个文件的标题，这样您就不会在输出文件的中间出现文件标题。尝试以下操作：

```
@echo off

setlocal ENABLEDELAYEDEXPANSION

set cnt=1
cd "Desktop\[csv-files]"

for %%i in (*.csv) do (
  if !cnt!==1 (
    for /f "delims=" %%j in ('type "%%i"') do echo %%j >> my-new-file.txt
  ) else (
    for /f "skip=1 delims=" %%j in ('type "%%i"') do echo %%j >> my-new-file.txt
  )
  set /a cnt+=1
)

endlocal

ren my-new-file.txt my-new-file.csv 
```

解释：

我曾经`ENABLEDELAYEDEXPANSION`确保`cnt`正确评估变量。启用延迟扩展后，您可以使用`!`来区分变量而不是`%`. 因此，要评估`cnt`变量，请使用`!cnt!`而不是`%cnt%`. 延迟扩展使其等待评估 的值，`cnt`直到使用它的那一刻。有时，但并非总是如此，如果您使用`%cnt%`，它将等于上一次迭代的值。如果启用延迟扩展和使用`!cnt!`，它将**始终**评估正确的当前值。

通过设置`cnt`为，我们可以为处理的第一个文件`1`运行不同的代码。`.csv`该代码包括第一个文件的所有行，但跳过所有后续文件`.csv`的第一行。`.csv`

我使用了嵌套`for`循环。外部`for`循环遍历`.csv`当前文件夹中的所有文件。内部`for`循环执行`type "%%i"`命令，其中`%%i`是`.csv`文件名。文件的每一行都被单独处理为`%%j`，传递给`echo %%j`命令。 `echo`通常会将值打印`%%j`到命令提示符窗口。`>`但是，您可以使用或将输出重定向到文件`>>`。重定向器用新`>`值覆盖输出文件。重定向器将`>>`新值附加到输出文件。由于每个文件的每一行，每个文件都是单独处理的，我们必须使用`>>`重定向器将所有内容推送到单个文件中。

使用该`for /f`命令时，输出会使用指定的分隔符分成单独的部分。默认分隔符是空格。如果我不包括`"delims="`，那么文本`This is fun`将分为以下内容：

```
%%j = This
%%k = is
%%l = fun 
```

我们想`.csv`一次性处理文件中的整行。通过将分隔符设置为空（`"delims="`），可以使用 处理整行`%%j`。

有关`for`命令如何工作的更具体帮助，请`for /?`在命令提示符处键入。

`endlocal`将环境恢复到`setlocal`使用时的状态。您声明的所有变量都将被删除，并且扩展名将设置回其先前的值。

# java - 在Java中一次维护5个线程

> ID：14690278
> 
> 赞同：1
> 
> 时间：2013-02-04T15:49:14.290
> 
> 标签：java, multithreading

我有一个 java 应用程序，它向服务器发送请求并返回响应。每个请求都在单独的线程上运行。

我想要做的是一次维护 5 个线程（因此，一次有 5 个请求）。此外，如果一个线程完成，我想启动一个新线程，以便始终运行 5 个线程。

最初我以为我可以在调用线程时使用 join，但意识到这会阻塞我的主线程。

有没有办法做到这一点？我没有太多使用 Java 编程，并且愿意接受任何建议/建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T15:51:14.253

我会使用 ExecutorService

```
Executor exec = Executors.newFixedThreadPool(5);

for(String url: urls) 
   exec.submit(new UrlTask(urls));

// when finished
exec.shutdown(); 
```

这将一次执行多达 5 个任务。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T15:50:41.407

看来您正在寻找具有固定线程池的[ExecutorService 之类的东西。](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)

```
ExecutorService  pool = Executors.newFixedThreadPool(5); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T15:50:31.587

您不应该尝试使用`Thread`.

我建议设置一个`Executor`池并[使用](http://www.javabeat.net/2012/06/implementing-producer-consumer-scenario-using-blockingqueue-java/)`BlockingDeque`.

# git - github非快进错误

> ID：14690280
> 
> 赞同：1
> 
> 时间：2013-02-04T15:49:19.483
> 
> 标签：git, github

我知道这已被问过很多次，但我的问题似乎略有不同

```
To https://github.com/sr/foo.git
08a86ab..3d1ece2  master -> master
! [rejected]        y_dev -> y_dev (non-fast-forward)
error: failed to push some refs to 'https://github.com/sr/foo.git' 
```

好的，所以我需要从 y_dev 进行拉动，我尝试过：

```
git pull origin y_dev
From https://github.com/sr/foo
* branch            y_dev  -> FETCH_HEAD
Already up-to-date. 
```

这让我很困惑。我认为拉动应该为我解决这个问题，但有些事情我不明白。解释/修复赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T18:07:39.550

您正在将分支拉`y_dev`入当前已签出的分支，这很可能是`master`. 因此，您实际上并没有使本地`y_dev`更新您的`git-pull`.

尝试：

```
git checkout y_dev
git pull origin y_dev
git push origin y_dev 
```

# iphone - 表格中的单元格标签不刷新

> ID：14690286
> 
> 赞同：0
> 
> 时间：2013-02-04T15:49:31.693
> 
> 标签：iphone, ios, objective-c, xcode, ipad

我试图在 viewDidAppear 方法访问中调用我的表行上的 reloadData。但是，我的单元格没有刷新它们的值，我不知道为什么，因为似乎所有内容都按照预期的顺序访问。更奇怪的是，实际上 1 行确实会刷新，但其他行都不会。

这是我的代码...

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{     
  // Set up the cell...
  static NSString *CellWithIdentifier = @"Cell";
  UITableViewCell *cell = (UITableViewCell *)[tableView dequeueReusableCellWithIdentifier:CellWithIdentifier];
  NSLog(@"generating cell contents");
if (cell == nil)
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellWithIdentifier];
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    cell.textLabel.text = [_tableGroup.options objectAtIndex:rowcount];
    rowcount++;

    //label for currently selected/saved setting
    _currentSetting = [[UILabel alloc] initWithFrame:CGRectMake(160, 8, 115, 25)];
    [_currentSetting setFont:[UIFont systemFontOfSize:14]];
    _currentSetting.backgroundColor = [UIColor clearColor];
    _currentSetting.textColor = [UIColor blueColor];
    _currentSetting.textAlignment = NSTextAlignmentRight;

    [cell.contentView addSubview:_currentSetting];
    NSLog(@"added new label to cell");
}

//depending on the setting, set the label in the cell to what is currently selected
if (indexPath.section == 1 && indexPath.row == 0) {
    _currentSetting.text = [NSString stringWithFormat:@"%@ %@",[settings.mapDistance stringValue], NSLocalizedString(@"MILES_IDENTIFIER", nil)];
    NSLog(@"setting map distance label: %@", settings.mapDistance);
}
else if(indexPath.section == 1 && indexPath.row == 1)
{
    _currentSetting.text = [NSString stringWithFormat:@"%@ %@",[settings.maxCustomers stringValue], NSLocalizedString(@"ITEMS_IDENTIFIER", nil)];
    NSLog(@"setting max customers: %@", settings.maxCustomers);
}
else if(indexPath.section == 2)
{
    _currentSetting.text = [NSString stringWithFormat:@"%@ %@",[settings.maxProducts stringValue], NSLocalizedString(@"ITEMS_IDENTIFIER", nil)];
    NSLog(@"setting max products: %@", settings.maxProducts);
}

return cell;
} 
```

基于这段代码，我用我的 NSLOGS 得到这个输出。

这是创建视图时单元格的第一次运行。它生成 4 个单元格，在每个单元格中放置标签，并在其中 3 个标签中放入一个值。

```
 generating cell contents
 added new label to cell
 generating cell contents
 added new label to cell
 setting map distance: 15
 generating cell contents
 added new label to cell
 setting max customers: 250
 generating cell contents
 added new label to cell
 setting max products: 150 
```

在这一点上，我点击了一行，转到另一个屏幕，现在已经返回。如您所见，地图距离是不同的。尽管没有显示任何更改，即使在重新加载过程中访问了更改标签文本的代码。

```
 reloading data
 generating cell contents
 generating cell contents
 setting map distance: 25
 generating cell contents
 setting max customers: 250
 generating cell contents
 setting max products: 150 
```

再次，我不知所措，因为最后一行确实刷新了。但其他人都没有。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:55:48.897

第二次，您可以看到“ `added new label to cell`”没有被调用，因此您正在重新使用旧的 tableViewCell。

请注意，您不会`_currentSetting`在重新使用单元格时进行设置，仅在创建新单元格时进行设置。So`_currentSetting`设置为创建的最后一个新单元格，很可能是表中的最后一个单元格。

您需要确保设置`_currentSetting`为正确的标签（可能通过使用`viewWithTag:` 或类似的东西）。

(e:f;b)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:55:55.703

当你重新加载你的 tableView 时，单元格已经存在并从 tableView 中出列，所以条件`if (cell == nil)`返回 false，并且单元格创建代码没有执行。

在该单元格创建代码中，您正在为其分配一个值`_currentSetting`，然后假设该值是正确的，然后继续执行该代码。但是，当未执行单元格创建代码时，该值指向最新创建的单元格，因此不会更新。

要解决此问题：将 _currentSetting 设为局部变量并将代码更改为如下所示：

（您实际上并不需要将其设为局部变量，但它更合适，因为您实际上不需要引用离开此方法后创建的最后一个标签）

```
UILabel *_currentSetting = nil;
if (cell == nil) {
    _currentSetting = ...
    _currentSetting.tag = 123;
}
else
    _currentSetting = [cell.contentView viewWithTag:123];

... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T16:14:42.207

这里的问题是第二次（当你重新加载视图时）_currentSetting 没有有效的内存。所以最好实现一个自定义单元并完成这项工作

最好参考这个[优秀的指南](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451-CH7-SW1)

# c# - 如何将字符串添加在一起？

> ID：14690290
> 
> 赞同：-2
> 
> 时间：2013-02-04T15:49:40.767
> 
> 标签：c#, string, winforms, math

```
public void button1_Click(object sender, EventArgs e)
{
    if (cushioncheckBox.Checked)
    {
        decimal totalamtforcushion = 0m;

        totalamtforcushion = 63m * cushionupDown.Value;
        string cu = totalamtforcushion.ToString("C");
        cushioncheckBox.Checked = false;
        cushionupDown.Value = 0;
    }

    if (cesarbeefcheckBox.Checked)
    {
        decimal totalamtforcesarbeef = 0m;
        totalamtforcesarbeef = 1.9m * cesarbeefupDown.Value;
        string cb = totalamtforcesarbeef.ToString("C"); 
        cesarbeefcheckBox.Checked = false;
        cesarbeefupDown.Value = 0;

    }
} 
```

所以我有这些代码。我如何将两个字符串 cb 和 cu 加在一起？我试过做

```
decimal totalprice;
totalprice = cu + cb; 
```

但它说该名称在上下文中不存在。我应该怎么办？？

我正在使用 Windows 表单顺便说一句

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T15:59:07.280

您在这里有几个问题：

首先，您`string cu`在`if`范围内声明。它不会存在于该范围之外。如果需要在 的范围之外使用，请在外面`if`声明。

其次，数学运算不能应用于`string`s。为什么要将数值转换为字符串？您的代码应该是：

```
decimal totalamtforcushion = 0m;

if (cushioncheckBox.Checked)
{
    totalamtforcushion = 63m * cushionupDown.Value;
    //string cu = totalamtforcushion.ToString("C"); You don't need this
    cushioncheckBox.Checked = false;
    cushionupDown.Value = 0;
}

decimal totalamtforcesarbeef = 0m;
if (cesarbeefcheckBox.Checked)
{
    totalamtforcesarbeef = 1.9m * cesarbeefupDown.Value;
    //string cb = totalamtforcesarbeef.ToString("C");  you don't need this either
    cesarbeefcheckBox.Checked = false;
    cesarbeefupDown.Value = 0;

}

var totalprice = totalamtforcushion + totalamtforcesarbeef; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:58:46.733

通常，要“添加”两个字符串（您实际上是在尝试查找两个数字的总和）：

1.  将您的两个字符串转换为数字。
2.  添加数字。
3.  将总和转换为字符串。

很简单；但如果您有任何其他问题，请随时询问。

# oracle - 使用本机查询更改会话以进行单个 JPA 查询

> ID：14690293
> 
> 赞同：3
> 
> 时间：2013-02-04T15:49:49.527
> 
> 标签：oracle, hibernate, jpa

我被迫使用某个 NLS_LANGUAGE 来访问数据库，并且不想更改 user.locale 以避免影响应用程序的其余部分。这样的事情可以做还是会导致意想不到的问题？

另外，会议的范围有多大？这会仅影响单个查询，还是使用相同 entityManager 的每个调用，甚至整个应用程序？

```
@Stateless
@Local
public class myDAOImpl implements MyDAO{

    @PersistenceContext(unitName = "MyUnit" )
    protected EntityManager em;

    public List<Object> getSomeData(){
        em.createNativeQuery("alter session set nls_language = 'AMERICAN'").executeUpdate();    
        Query q = em.createNativeQuery("Select * from my_view");
        return q.getResultList();
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T19:36:30.890

oracle 上的更改会话将影响该连接上的所有未来请求。因此，如果您应该使用连接池，这将影响在同一连接上打开的所有未来会话。

# java - 在 Java 应用程序中执行“sp_msforeachdb”

> ID：14690295
> 
> 赞同：2
> 
> 时间：2013-02-04T15:49:52.693
> 
> 标签：java, sql-server, stored-procedures, jdbc, sp-msforeachdb

嗨 StackOverflow 社区 :)

我来找你分享我的一个问题......

我必须提取**SQL Server 实例的每个数据库中每个表的列表**，我发现了这个查询：

```
EXEC sp_msforeachdb 'Use ?; SELECT DB_NAME() AS DB, * FROM sys.tables' 
```

它在 Microsoft SQL Server Management Studio 上完美运行，但是当我尝试**在我的 Java 程序**（包括 SQL Server 的 JDBC 驱动程序）中执行它时，它说它**不返回任何结果**。

我的 Java 代码如下：

```
this.statement = this.connect.createStatement(); // Create the statement
this.resultats = this.statement.executeQuery("EXEC sp_msforeachdb 'Use ?; SELECT DB_NAME() AS DB, * FROM sys.tables'"); // Execute the query and store results in a ResultSet

this.sortie.ecrireResultats(this.statement.getResultSet()); // Write the ResultSet to a file 
```

感谢任何愿意帮助我的人， ***祝你有美好的一天:)***

**编辑 1：**

我不确定 SQL Server 的 JDBC 驱动程序是否支持我的查询，所以我将尝试以另一种方式实现我的目标。

我想要得到的是**SQL Server 实例上每个数据库的所有表的列表**，输出格式如下：

```
+-----------+--------+
| Databases | Tables |
+-----------+--------+ 
```

所以现在我问有人可以帮助我**通过 Java 的 JDBC for SQL Server driver 使用 SQL 查询**来获得该解决方案。

我还要感谢[Tim Lehner](https://stackoverflow.com/users/880904/tim-lehner)和[Mark Rotteveel](https://stackoverflow.com/users/466862/mark-rotteveel)给我的快速答复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T19:37:11.233

如果一个语句不能返回或返回**多个**结果，则不应使用`executeQuery`，而是[`execute()`](http://docs.oracle.com/javase/7/docs/api/java/sql/Statement.html#executeQuery(java.lang.String))此方法返回一个`boolean`指示第一个结果的类型：

*   `true`: 结果是`ResultSet`
*   `false`: 结果是更新计数

如果结果是`true`，则使用[`getResultSet()`](http://docs.oracle.com/javase/7/docs/api/java/sql/Statement.html#getResultSet%28%29)检索`ResultSet`，否则[`getUpdateCount()`](http://docs.oracle.com/javase/7/docs/api/java/sql/Statement.html#getUpdateCount%28%29)检索更新计数。如果更新计数是`-1`，则意味着没有更多结果。请注意，更新计数也将`-1`是当前结果为`ResultSet`. `getResultSet()`如果没有更多结果或者结果是更新计数，那么知道应该返回 null 也很好。

现在，如果您想检索更多结果，请调用[`getMoreResults()`](http://docs.oracle.com/javase/7/docs/api/java/sql/Statement.html#getMoreResults%28%29)（或其兄弟接受`int`参数）。的返回值`boolean`与 的含义相同`execute()`，`false`不代表没有结果！

如果`getMoreResults()`返回 false 并`getUpdateCount()`返回，则只有没有更多结果`-1`（如 Javadoc 中所述）

本质上，这意味着如果您想正确处理所有结果，您需要执行以下操作：

```
boolean result = stmt.execute(...);
while(true)
    if (result) {
        ResultSet rs = stmt.getResultSet();
        // Do something with resultset ...
    } else {
        int updateCount = stmt.getUpdateCount();
        if (updateCount == -1) {
            // no more results
            break;
        }
        // Do something with update count ...
    }
    result = stmt.getMoreResults();
} 
```

注意：这个答案的一部分是基于我对[Java SQL 的回答：Statement.hasResultSet()?](https://stackoverflow.com/a/14413141/466862)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T09:47:32.827

**更新**

**我找到了解决方案！**

在阅读[了一篇关于 sp_spaceused 与 Java 一起使用的文章](http://bryanpendleton.blogspot.fr/2009/05/spspaceused-and-multiple-jdbc-result.html)后，我发现我也遇到了同样的情况。

我的最终代码如下：

```
this.instances = instances;
for(int i = 0 ; i < this.instances.size() ; i++)
{
    try
    {
        Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
        this.connect = DriverManager.getConnection("jdbc:sqlserver://" + this.instances.get(i), "tluser", "result");

        this.statement = this.connect.prepareCall("{call sp_msforeachdb(?)}");
        this.statement.setString(1, "Use ?; SELECT DB_NAME() AS DB, name FROM sys.tables WHERE DB_NAME() NOT IN('master', 'model', 'msdb', 'tempdb')");
        this.resultats = this.statement.execute();

        while(true)
        {
            int rowCount = this.statement.getUpdateCount();
            if(rowCount > 0)
            {
                this.statement.getMoreResults();
                continue;
            }
            if(rowCount == 0)
            {
                this.statement.getMoreResults();
                continue;
            }

            ResultSet rs = this.statement.getResultSet();
            if(rs != null)
            {
                while (rs.next())
                {
                     this.sortie.ecrireResultats(rs); // Write the results to a file
                }
                rs.close();
                this.statement.getMoreResults();
                continue;
            }
            break;
        }
        this.statement.close();
    }
    catch(Exception e)
    {
        e.printStackTrace();
    }
} 
```

它试过了，我的文件里有我想要的一切。

***谢谢大家的帮助 ！:)***

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T16:19:19.277

如果您没有收到错误，一个问题可能是`sp_msforeachdb`将为每个数据库返回一个单独的结果集，而不是一个包含所有记录的结果集。在这种情况下，您可以尝试一些动态 SQL 来合并所有行：

```
-- Use sys.tables
declare @sql nvarchar(max)
select @sql = coalesce(@sql + ' union all ', '') + 'select ''' + quotename(name) + ''' as database_name, * from ' + quotename(name) + '.sys.tables'
from sys.databases
select @sql = @sql + ' order by database_name, name'
exec sp_executesql @sql 
```

我有时也会使用 INFORMATION_SCHEMA 视图，因为它更容易查看模式名称，除其他外：

```
-- Use INFORMATION_SCHEMA.TABLES to easily get schema name
declare @sql nvarchar(max)
select @sql = coalesce(@sql + ' union all ', '') + 'select * from ' + quotename(name) + '.INFORMATION_SCHEMA.TABLES where TABLE_TYPE = ''BASE TABLE'''
from sys.databases
select @sql = @sql + ' order by TABLE_CATALOG, TABLE_SCHEMA, TABLE_NAME'
exec sp_executesql @sql 
```

请注意，这种字符串连接方法 ( `select @sql = foo from bar`)[可能无法通过链接服务器按您的预期工作](https://stackoverflow.com/questions/13019624/why-do-i-get-these-different-results-from-two-sql-queries)（它只会抓取最后一条记录）。只是一个小警告。

# processing - 处理中，窗口变形

> ID：14690300
> 
> 赞同：0
> 
> 时间：2013-02-04T15:50:16.477
> 
> 标签：processing

刚刚在使用 Windows 7 64 位的笔记本电脑上下载了处理。这是在处理本身内部完成的第一个也是基本的工作。

到目前为止，我正在尝试从网站上的处理教程重新创建示例： [处理示例。](http://processing.org/learning/drawing/)

在做这个简单的例子时，只要我在这张图片中看到以下内容，我的窗口就会变得扭曲：

![处理窗口错误](../Images/bf5e347349eb9f3508d94cb926c4457a.png)

我完全不确定为什么会发生这种情况，有时一旦发生，即使将椭圆移动到另一个区域，我也无法让它消失。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T23:21:33.977

你有两个标签在那里。与更传统的 IDE 不同，Processing 将所有选项卡中的所有代码都视为同一草图的一部分，因此它将运行您在这些选项卡中拥有的所有代码。不仅是 size/rect/ellipse 调用，还包括“测试”选项卡中的所有内容。启动一个新的处理实例，只需添加大小/矩形/椭圆调用（或删除测试选项卡）。如果它不做奇怪的调整大小，发现问题。

# sql - 如何将此用于生成菜单层次结构的过程 SQL 代码转换为基于 SET 的方法？

> ID：14690302
> 
> 赞同：3
> 
> 时间：2013-02-04T15:50:19.170
> 
> 标签：sql, sql-server-2008-r2, hierarchy, procedural, set-based

我有一个 SQL Server 2008 R2 数据库表，其中包含以下格式的层次结构信息：

```
MarketID    Time                    menuPath                                                       SID  MarketName
107397507   2012-11-18 13:00:00.000 \Project 1\Phase 1\Project Mgmt\Date 18 November\Requirements   1   Meeting
107397508   2012-11-18 13:00:00.000 \Project 1\Phase 1\Project Mgmt\Date 18 November\Requirements   1   Plan
145556789   2012-11-20 12:00:00.000 \Project 2\Phase 3\Training\Date 20 November                    3   Verbal
145686775   2012-11-20 15:00:00.000 \Project 2\Phase 4\Testing\Date 20 November                     3   Structural
145686776   2012-11-20 15:00:00.000 \Project 2\Phase 4\Testing\Date 20 November                     3   Optical 
```

所需的层次结构输出是这样的：

```
ID  ParentID    Depth   Name          MarketID
1   0           0       Project 1        NULL
2   1           1       Phase 1          NULL
3   2           2       Project Mgmt     NULL
4   3           3       18 November      NULL
5   4           4       Requirements     NULL
6   5           5       Meeting          107397507
7   5           5       Plan             107397508
8   0           0       Project 2        NULL
9   8           1       Phase 3          NULL
10  9           2       Training         NULL
11  10          3       20 November      NULL
12  11          4       12:00 Verbal     145556789
13  8           1       Phase 4          NULL
14  13          2       Testing          NULL
15  14          3       20 November      NULL
16  15          4       15:00 Structural 145686775
17  15          4       15:00 Optical    145686776 
```

注意：“日期”一词已从节点“11 月 18 日”中删除

*   **编辑**：仅输出唯一的父子节点，例如，只有一个“Project 1\Phase 1”节点，但有两个“11 月 20 日”节点：一个是“Training\20 November”，另一个是“Testing\ 11 月 20 日”。
*   **编辑**：对于 SID = 3 的所有节点，必须将时间添加到最后一个节点，例如“测试\11 月 20 日\15:00 光学”
*   **编辑**： menuPath 字段中包含的确切深度可能会有所不同。

我已经能够创建以下过程 SQL 查询来完成此操作，但是有人知道我如何将其转换为基于等效集合的方法吗？

```
/* Begin build of Menu table */
Declare @marketid int
Declare @Time DATETIME

DECLARE @StrMenu NVARCHAR(MAX)
DECLARE @SID INT

DECLARE @StrMarketName NVARCHAR(MAX)

DECLARE @selection VARCHAR(MAX)
DECLARE @parentname VARCHAR(MAX)
DECLARE @parentid INT
DECLARE @depth INT
DECLARE @boolDate INT
DECLARE @EIND INT 

DECLARE @Part NVARCHAR(MAX)
DECLARE @IND    INT

DECLARE cur CURSOR LOCAL for
    SELECT MarketID, Time, menuPath, SID, MarketName FROM test.dbo.Markets

OPEN cur
fetch next from cur into @marketid, @Time, @StrMenu, @SID, @StrMarketName

while @@FETCH_STATUS = 0 BEGIN
    SET @IND = CHARINDEX('\',@StrMenu)
    -- if the last character is not a \ then append it to the string
    IF RIGHT(@StrMenu,1) != '\'
        BEGIN
            SET @StrMenu = @StrMenu + '\'
        END

    IF @SID = 3
        BEGIN
        -- IF SID = 3 then append the Time to the MarketName
            SET @StrMarketName = (convert(varchar(5), @Time, 108)) + ' ' + @StrMarketName
        END

    SET @StrMenu = @StrMenu + @StrMarketName + '\'

    Set @EIND = 0
    SET @boolDate = 0
    SET @depth = 0

    WHILE(@IND != LEN(@StrMenu))
        BEGIN
            SET  @EIND = ISNULL(((CHARINDEX('\', @StrMenu, @IND + 1)) - @IND - 1), 0)
            SET @selection = (SUBSTRING(@StrMenu, (@IND  + 1),  @EIND))

            IF @depth = 0
                BEGIN
                    SET @parentid = 0
                END
            IF @depth > 0
                BEGIN
                    SET @parentid = (SELECT TOP 1 ID FROM test.dbo.Menu WHERE NAME = @parentname ORDER BY ID DESC )
                END

            IF (@selection LIKE '%Date%')
                BEGIN
                    SET @boolDate = 1
                    SET @selection = REPLACE(@selection, 'Date ', '')
                    SET @parentid = (SELECT ID FROM test.dbo.Menu WHERE NAME = @parentname )
                    -- insert values into the menu table
                    IF NOT EXISTS (SELECT NAME FROM test.dbo.Menu WHERE NAME = @selection AND ParentID = @parentid)
                        INSERT INTO test.dbo.Menu (ParentID, Depth, Name)
                        Values (@parentid, @depth, @selection)
                END

            -- only continue if the selection and its parent combination does not already exist
            IF NOT EXISTS (SELECT ID FROM test.dbo.Menu WHERE NAME = @selection AND ParentID = @parentid) AND @boolDate = 0
                BEGIN                   
                    IF (LEN(@StrMenu) = @EIND + @IND + 1)
                        BEGIN
                            -- If the current loop is the last loop then insert the MarketID
                            INSERT INTO test.dbo.Menu (ParentID, Depth, Name, MarketID)
                            Values (@parentid, @depth, @selection, @marketid)
                        END
                    Else
                        BEGIN
                            -- Otherwise only insert the basic info into the menu table
                            INSERT INTO test.dbo.Menu (ParentID, Depth, Name)
                            Values (@parentid, @depth, @selection)
                        END
                END

            SET @boolDate = 0
            -- increment the index values and set the parent name for the next loop
            SET @IND = ISNULL(CHARINDEX('\', @StrMenu, @IND + 1), 0)
            SET @depth = @depth + 1
            SET @parentname = @selection
        END
    fetch next from cur into @marketid, @Time, @StrMenu, @SID, @StrMarketName
END

close cur
deallocate cur 
```

我编写了这个 SQL 来从`menuPath`列中提取层次结构信息。根据 SID 编号，`MarketName`信息和`Time`列也附加到此`menuPath`，例如，如果 SID = 1，则仅`MarketName`附加，但如果 SID = 3，则同时附加 the`Time`和 the `MarkeName`。

`MarketID`仅添加到`MarketName`节点的菜单表中。

下面是我正在使用的表架构和数据的示例：

```
 USE [test]
GO

CREATE TABLE [dbo].[Markets](
    [MarketID] [int] PRIMARY KEY NOT NULL,
    [Time] [datetime] NULL,
    [menuPath] [varchar](255) NULL,
    [SID] [int] NULL,
    [MarketName] [varchar](255) NULL
    )

CREATE TABLE [dbo].[Menu](
    [ID] [int] PRIMARY KEY IDENTITY,
    [ParentID] [int] NOT NULL,
    [Depth] [int] NOT NULL,
    [Name] [varchar] (255) NOT NULL,
    [MarketID] [int] NULL
 )

INSERT Markets (MarketID, Time, menuPath, SID, MarketName)
SELECT 107397507, '2012-11-18 13:00:00.000', '\Project 1\Phase 1\Project Mgmt\Date 18 November\Requirements', 1, 'Meeting'
UNION ALL SELECT 107397508, '2012-11-18 13:00:00.000', '\Project 1\Phase 1\Project Mgmt\Date 18 November\Requirements', 1, 'Plan'
UNION ALL SELECT 107397509, '2012-11-18 13:00:00.000', '\Project 1\Phase 1\Project Mgmt\Date 18 November\Requirements', 1, 'Write Up'
UNION ALL SELECT 107397513, '2012-11-18 13:00:00.000', '\Project 1\Phase 1\Project Mgmt\Date 18 November\Building 1', 1, 'Plan'
UNION ALL SELECT 107397514, '2012-11-18 13:00:00.000', '\Project 1\Phase 1\Project Mgmt\Date 18 November\Building 1', 1, 'Write Up'
UNION ALL SELECT 107397533, '2012-11-19 14:30:00.000', '\Project 1\Phase 1\Project Mgmt\Date 19 November\Building 2', 1, 'Plan'
UNION ALL SELECT 107397537, '2012-11-19 14:30:00.000', '\Project 1\Phase 1\Project Mgmt\Date 19 November\Building 2', 1, 'Write Up'
UNION ALL SELECT 107398573, '2012-11-20 09:00:00.000', '\Project 1\Phase 1\Installation\Date 20 November\Building 3', 1, 'Plan'
UNION ALL SELECT 107398574, '2012-11-20 09:00:00.000', '\Project 1\Phase 1\Installation\Date 20 November\Building 3', 1, 'Write Up'
UNION ALL SELECT 108977458, '2012-11-21 10:00:00.000', '\Project 1\Phase 2\Setup\Date 21 November\Building 4', 1, 'Prep'
UNION ALL SELECT 108977459, '2012-11-21 10:00:00.000', '\Project 1\Phase 2\Setup\Date 21 November\Building 4', 1, 'Clear'
UNION ALL SELECT 145556788, '2012-11-20 12:00:00.000', '\Project 2\Phase 3\Training\Date 20 November', 3, 'Written'
UNION ALL SELECT 145556789, '2012-11-20 12:00:00.000', '\Project 2\Phase 3\Training\Date 20 November', 3, 'Verbal'
UNION ALL SELECT 145686775, '2012-11-21 15:00:00.000', '\Project 2\Phase 4\Testing\Date 21 November', 3, 'Structural'
UNION ALL SELECT 145686776, '2012-11-21 15:00:00.000', '\Project 2\Phase 4\Testing\Date 21 November', 3, 'Optical' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T16:36:22.040

我会使用 XML 扩展将路径拆分为其组件部分，您还可以使用 xml 扩展来获取每个 xml 元素的位置，结合`ROW_NUMBER`（以考虑开始时的空节点）为您提供您的`depth`字段：

```
WITH Menus AS
(   SELECT  m.MarketID,
            [Name] = y.value('.', 'nvarchar(max)'),
            [Depth] = ROW_NUMBER() OVER(PARTITION BY MarketID ORDER BY y.value('for $i in . return count(../*[. << $i]) + 1', 'int')) - 1
    FROM    Markets m
            CROSS APPLY (VALUES (CAST('<x><y>' + REPLACE(menuPath, '\', '</y><y>') + '</y><y>' + CASE WHEN SID = 3 THEN CONVERT(VARCHAR(5), [Time], 8) + ' ' ELSE '' END +  marketName + '</y></x>' AS XML))) a (x)
            CROSS APPLY x.nodes('/x/y') b (y)
    WHERE   y.value('.', 'nvarchar(max)') != ''
)
SELECT  MarketID,
        [Name] = CASE WHEN LEFT(Name, 5) = 'Date ' THEN STUFF(Name, 1, 5, '') ELSE Name END,
        Depth
FROM    Menus 
```

**[SQL Fiddle 上的拆分示例](http://www.sqlfiddle.com/#!3/5d6aa/2)**

就像旁注一样，您的表结构最终会包含冗余信息，可以通过计算返回顶级父级的递归次数来获得深度，或者如果 marketID 存储在所有行中，则可以通过以下方式获得顶级父级找到深度 = 0。因此，上述查询的输出应该为您提供所需的一切。但我会继续下去。

第一步是将所有项目插入到`0`作为父级的菜单表中。

```
WITH Menus AS
(   SELECT  m.MarketID,
            [Name] = y.value('.', 'nvarchar(max)'),
            [Depth] = ROW_NUMBER() OVER(PARTITION BY MarketID ORDER BY y.value('for $i in . return count(../*[. << $i]) + 1', 'int')) - 1
    FROM    Markets m
             CROSS APPLY (VALUES (CAST('<x><y>' + REPLACE(menuPath, '\', '</y><y>') + '</y><y>' + marketName + '</y></x>' AS XML))) a (x)
            CROSS APPLY x.nodes('/x/y') b (y)
    WHERE   y.value('.', 'nvarchar(max)') != ''
)
INSERT Menu (ParentID, Depth, Name, MarketID) 
SELECT  [ParentID] = 0,
        Depth,
        [Name] = CASE WHEN LEFT(Name, 5) = 'Date ' THEN STUFF(Name, 1, 5, '') ELSE Name END,
        MarketID
FROM    Menus 
```

然后使用正确的父 ID 更新市场表

```
UPDATE  Menu
SET     ParentID = p.ID
FROM    Menu c
        INNER JOIN 
        (   SELECT  ID, MarketID, Depth
            FROM    Menu 
        ) p
            ON c.MarketID = p.MarketID
            AND c.Depth = p.Depth + 1 
```

最后一步是将除基本菜单之外的所有菜单的 Market ID 设置为 null：

```
WITH CTE AS
(   SELECT  *,  
            [maxDepth] = MAX(Depth) OVER(PARTITION BY MarketID)
    FROM    Menu
)
UPDATE  CTE
SET     MarketID = NULL
WHERE   MaxDepth != Depth; 
```

瞧，你有你想要的结果。

**[SQL Fiddle 示例](http://www.sqlfiddle.com/#!3/74ed0/1)**

* * *

**附录**

这似乎有效：

```
CREATE TABLE #TempMenu (MarketID INT, Name VARCHAR(200) NOT NULL, Depth INT NOT NULL);
WITH Menus AS
(   SELECT  m.MarketID,
            [Name] = y.value('.', 'nvarchar(max)'),
            [Depth] = ROW_NUMBER() OVER(PARTITION BY MarketID ORDER BY y.value('for $i in . return count(../*[. << $i]) + 1', 'int')) - 1
    FROM    Markets m
             CROSS APPLY (VALUES (CAST('<x><y>' + REPLACE(menuPath, '\', '</y><y>') + '</y><y>' + CASE WHEN SID = 3 THEN CONVERT(VARCHAR(5), [Time], 8) + ' ' ELSE '' END +  marketName + '</y></x>' AS XML))) a (x)
            CROSS APPLY x.nodes('/x/y') b (y)
    WHERE   y.value('.', 'nvarchar(max)') != ''
)
INSERT #TempMenu (MarketID, name, Depth)
SELECT  MarketID,
        [Name] = CASE WHEN LEFT(Name, 5) = 'Date ' THEN STUFF(Name, 1, 5, '') ELSE Name END,
        Depth
FROM    Menus;

CREATE TABLE #TempPaths 
(   ID          INT NOT NULL, 
    ParentID    INT NOT NULL, 
    Depth       INT NOT NULL, 
    Name        VARCHAR(200) NOT NULL, 
    MarketID    INT NULL, 
    ParentPath  VARCHAR(200) NULL, 
    CurrentPath VARCHAR(200) NULL
);

WITH Paths AS
(   SELECT  MarketID,
            [Name] = CASE WHEN LEFT(Name, 5) = 'Date ' THEN STUFF(Name, 1, 5, '') ELSE Name END,
            Depth,
            [MaxDepth] = MAX(Depth) OVER(PARTITION BY MarketID),
            [ParentPath] = (    SELECT  '/' + Name
                                FROM    #TempMenu p
                                WHERE   p.MarketID = c.MarketID
                                AND     p.Depth < c.Depth
                                FOR XML PATH(''), TYPE
                            ).value('.', 'nvarchar(max)'),
            [CurrentPath] = (   SELECT  '/' + Name
                                FROM    #TempMenu p
                                WHERE   p.MarketID = c.MarketID
                                AND     p.Depth <= c.Depth
                                FOR XML PATH(''), TYPE
                            ).value('.', 'nvarchar(max)')
    FROM    #TempMenu c
), Paths2 AS
(   SELECT  DISTINCT [ParentID] = 0, Depth, Name, [MarketID] = NULL, [ParentPath], [CurrentPath]
    FROM    Paths
    WHERE   MaxDepth != Depth
    UNION 
    SELECT  0, Depth, Name, MarketID, [ParentPath], [CurrentPath]
    FROM    Paths
    WHERE   MaxDepth = Depth
)
-- USE MERGE CONDITION THAT WILL NEVER MATCH, ALLOWS ACCESS TO VALUES NOT BEING INSERTED IN THE OUTPUT CLAUSE
MERGE INTO Menu m USING Paths2 p ON 1 = 0  
WHEN NOT MATCHED THEN
    INSERT (ParentID, Depth, Name, MarketID)
    VALUES (p.ParentID, p.Depth, p.Name, p.MarketID)
    OUTPUT inserted.ID, inserted.ParentID, inserted.Depth, inserted.Name, inserted.MarketID, p.ParentPath, p.CurrentPath INTO #TempPaths;

UPDATE  Menu
SET     ParentID = rel.ParentID
FROM    Menu
        INNER JOIN
        (   SELECT  [ChildID] = c.ID, [ParentID] = p.ID
            FROM    #TempPaths c
                    INNER JOIN #TempPaths p
                        ON c.ParentPath = p.CurrentPath
        ) rel
            ON rel.ChildID = Menu.ID;

DROP TABLE #TempMenu, #TempPaths; 
```

为了大致解释发生了什么，我使用与上述相同的方法将路径拆分为它们的组成部分，将它们放入临时表中（出于性能原因），然后将拆分路径再次组合成完整路径并放入另一个临时表，这些路径稍后将用于匹配父子记录。

下一部分使用合并语句将记录插入菜单表，这是因为插入的标识需要与完整路径匹配，并且使用时`INSERT`只`OUTPUT`允许访问插入的值，而不是其他列从源头上。

最后，一旦插入所有记录，路径的临时表就可用于匹配父子记录（基于路径），并更新菜单表。

这似乎是一个相当复杂的方法，但它完全是基于集合的，因此应该优于程序方法。

# linux - 如何访问 OID 变量的含义（Linux）？

> ID：14690303
> 
> 赞同：0
> 
> 时间：2013-02-04T15:50:22.623
> 
> 标签：linux, ubuntu, snmp

我`snmpwalk`用来派生管理值的子树。例如，其中一行内容如下：

```
iso.3.6.1.2.1.25.1.5.0 = Gauge32: 10 
```

但是这是什么意思？什么设备/功能，...对应于 OID `iso.3.6.1.2.1.25.1.5.0`，数字“10”代表什么？

如何找出任何 OID 的完全通用性（不仅仅是这个示例性的）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:01:48.123

您可以使用以下`snmptranslate`命令：

```
$ snmptranslate iso.3.6.1.2.1.25.1.5.0
HOST-RESOURCES-MIB::hrSystemNumUsers.0 
```

或者您可以使用以下方法进行反向查找`-On`：

```
$ snmptranslate -On HOST-RESOURCES-MIB::hrSystemNumUsers.0
.1.3.6.1.2.1.25.1.5.0 
```

*（请注意，`iso.`第一次查找中的`.1.`表示与反向翻译显示的相同）*

如评论中所述，是的，您需要安装 MIB 才能进行这些查找，请向您的设备供应商咨询 MIB 文件下载。从我看到的一般安装的 net-snmp 中，你得到了大部分你已经在寻找的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T16:12:20.323

`iso.3.6.1.2.1.25.1.5.0` OID 提供登录用户信息的数量。

`Gauge32`是 OID 类型，Gauge32 您可以预期数据会根据它试图提供的真实世界信息而增加和减少

`10`表示当前登录系统的用户数。

# sql - PostgreSQL 数据库的 Hibernate 逆向工程

> ID：14690314
> 
> 赞同：0
> 
> 时间：2013-02-04T15:50:50.573
> 
> 标签：sql, hibernate, postgresql, hibernate-mapping, postgresql-9.2

我在使用**Hibernate**为使用**CamelCase notation编写的****PostgreSQL**数据库生成 DAO/POJO 代码时遇到了一些麻烦。在代码生成时间之前一切正常：只生成我的小写表！

 **如果我有一个名为 的表`Person`，Hibernate 配置视图将显示它但没有任何属性。假设我有另一个表，`car`它将显示它的所有属性。此外，在代码生成时，`car`将出现在目标包中，而 CamelCase 表不会出现，因为它被完全忽略了。

[我找到了一种](https://hibernate.onjira.com/browse/HBX-1000?focusedCommentId=38018&page=com.atlassian.jira.plugin.system.issuetabpanels%3acomment-tabpanel#comment-38018)覆盖默认元数据生成类 ( `JDBCMetaDataDialect`) 的方法，但它不起作用。即使它确实有效，我认为我的 POJO/DAO 对象也不起作用，因为`PostgreSQLDialect`方言会以错误的方式处理小写表（和属性？）。

我该如何解决这个问题？它看起来像一个错误，但我不确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:52:22.810

我最终总是从我的生成方法返回 true：

```
public boolean needQuote(String name) {
    return true;
} 
```**

# ios - 我如何确定地触摸一个按钮？

> ID：14690315
> 
> 赞同：2
> 
> 时间：2013-02-04T15:50:51.220
> 
> 标签：ios, ruby, cucumber, calabash

我刚刚开始使用葫芦，在过去的几个月里和 Capybara 一起工作。

当按钮处于弹出窗口或打开选项卡时，我似乎无法牢牢锁定按钮。

有时单次触摸效果很好，有时需要两次触摸，有时是 x,y 坐标而不是名称，有时以上都不是。

使用 capybara，wait 和 delay 在缓解这种情况方面取得了巨大的成功。葫芦没有这样的运气。

有没有人知道如何提高按下按钮的成功率？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T17:06:00.643

问题可能是当您尝试按下按钮时该按钮尚未出现在屏幕上。

最安全的做法是找出按钮的 id，然后执行以下操作：

```
performAction('wait_for_view_by_id', button_id)
performAction('press', 'button_id') 
```

或更高级别：

```
I wait for the view with id "button_id" to appear
I press "button_id" 
```

# c# - javascript数组枚举器

> ID：14690318
> 
> 赞同：1
> 
> 时间：2013-02-04T15:50:55.730
> 
> 标签：c#, javascript, next, ienumerator

我正在考虑推出我自己的解决方案，看看我是否可以使用 moveNext、Reset、Current 以及您可以在 C# 中与 IEnumerator 一起使用的所有其他功能来扩展可观察数组。问题是我无法在 javascript 数组中获得对原语的引用。所以我不得不基于当前的索引。但是，我遇到了一个问题，如果数组被更改，那么我无法判断枚举器应该在数组的哪个元素上。

例如这里是一个数组

[1,3,3,3,3,5]

假设当前是 [2] 的索引

如果删除 [3] 或 [4] 的索引，则 current 将不受影响，但它也与删除 [1] 或 [2] 没有区别。因为我无法记录引用，所以我必须按索引进行，但如果数组中的元素数量发生变化，则枚举器无法判断删除是在当前之前还是之后。甚至在记录阵列的最后一个版本时也是如此。关于如何做到这一点的任何想法，以便电流可以保持准确？如果 current 恰好是被移除的元素，那么让 current 指向下一个元素？

# c# - 以编程方式 (C#) 确定（在 Win 7 框中）本地审计策略“审计帐户登录事件”是否设置为“无审计、成功或失败”

> ID：14690321
> 
> 赞同：1
> 
> 时间：2013-02-04T15:50:56.300
> 
> 标签：c#, .net

我正在尝试以编程方式确定“审核帐户登录事件”的本地安全策略设置是否有任何设置，以及是否已设置成功或失败。

我正在尝试创建一个有助于监控操作系统硬度的 win-service。

感谢您的时间！

# ruby-on-rails - 通过应用程序控制器和自定义 rake 任务设置 Time.zone

> ID：14690323
> 
> 赞同：0
> 
> 时间：2013-02-04T15:51:02.633
> 
> 标签：ruby-on-rails, timezone, rake

在我的`User`模型中，我有一种显示时间的方法：

```
def display_time
    puts "Time is: #{Time.zone.now}"
end 
```

我`Time.zone`在应用程序控制器的前置过滤器中为每个用户设置，然后调用该`display_time`方法：

```
def my_before_filter
    Time.zone = current_user.time_zone
    current_user.display_time
end 
```

我还在`Time.zone`我的 rake 任务（每小时 cron 作业）中为每个用户设置一个循环，然后调用相同的方法：

```
Users.all.each do |user|
    Time.zone = user.time_zone
    user.display_time
end 
```

如何确保两个时区设置不会相互干扰？

我希望该`display_time`方法始终`Time.zone`通过应用程序控制器使用该集合，除非从 cron 任务的循环中调用它。我怎样才能做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:02:52.950

使 display_time 带上时间参数。

```
def my_before_filter
  Time.zone = current_user.time_zone
  current_user.display_time(Time.zone.now)
end

# app/models/user.rb
def display_time(current_time)
  puts "Time is: #{current_time}"
end 
```

从您的 rake 任务中，发送`current_time`您想要的。

# jquery - 如何使用 jQuery 临时存储数据

> ID：14690327
> 
> 赞同：1
> 
> 时间：2013-02-04T15:51:19.960
> 
> 标签：jquery, ajax, storage

我有一个问题，由于我对 js 不是很熟练，我会很感激任何建议。

基本上，我在文章页面上每 x 秒执行一次 ajax 调用，它连接到数据库并检查评论编号。

现在，在每次通话后，我需要检查最后一次通话返回的号码是否大于上一次通话（检查号码评论是否增加）。

我无法弄清楚如何正确存储单个呼叫的数据，这些数据在与下一个呼叫比较后将被删除，当然会被新数据覆盖。

现在，我可以使用并且知道如何使用两种方法：cookie 和将数据存储在不可见元素内部的 dom 中，但这是最佳解决方案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T15:54:26.220

您不需要使用 cookie 或 dom 来存储这些数据。只需使用闭包*！

```
var old = null;

$.get(url, function(d){
   if(old == null){
     old = d;
   }
   if(old.something > d.something){
      //do something else
   }
}); 
```

闭包是它起作用的原因，如果 javascript 没有它们，你将无法修改函数`old`中的外部 var `$.get`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T15:59:14.503

使用超出评论获取/呈现函数范围的变量：

```
var CommentsModule = (function(){
    var me = {},
        numComments = null;

    function renderComments(comments){
        //render logic here
        for(i=numComments || 0; i<comments.length;i++){ //the || 0 handles the initial load when the numComments === null
            //append new comments
        }
        //reset your 'cached' variable to the current # of comments
        numComments = comments.length;
    }

    me.getComments = function() {
        //do $.get or $.ajax
        $.ajax("myURL",
            success: function(msg) { 
                if(msg.length > numComments) {
                    renderComments(msg);
                }
            }
        });
    }

    return me;
}()); 
```

在您的页面中：

```
setInterval(CommentsModule.getComments, 5000);
//....or something 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T16:01:46.023

本地存储：

```
localStorage.setItem('lastUpdate','2013-02-04');

var lastUpdate = localStorage.getItem('lastUpdate'); 
```

或使用您评论的数据属性，例如：

```
$('#comments').data('lastUpdate', '2013-02-04'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T15:57:05.183

您提到的两种方法是正确的 - 我通常将数据存储在 DOM 中的一个不可见元素中。

您可能想要研究的另外三个：

1) 现代浏览器现在有 HTML5 本地存储，它在功能上等同于 cookie，除了它存储在浏览器存储中。这在 IE9 中不存在，并且仍在现代浏览器中开发，所以不要使用它，除非您知道用户的浏览器有这个（IE9 还不支持它）。[http://www.w3schools.com/html/html5_webstorage.asp](http://www.w3schools.com/html/html5_webstorage.asp)

2) 如果您使用 jQuery，则有 jQuery 数据：[http](http://api.jquery.com/jQuery.data/) ://api.jquery.com/jQuery.data/ ，它允许您将数据附加到特定元素。该链接比我在这里解释得更好。

3）根据您的javascript设置方式，您可以简单地将先前评论的数量存储在javascript中的变量中吗？然后，当您的 AJAX 调用返回时，您可以将结果变量与之前的计数变量进行比较。如果可能的话，我会选择这个解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-23T00:35:10.087

您可以使用此代码。它需要 JQuery 的 cookie 插件。它不用于临时存储。

```
 function GetData(key)
    {
        var sonuc = "";
        if (typeof (localStorage)!="undefined")
        {
            //İkinci html5 localStorage desteği varmı ona bakılır
            if (localStorage[key] != null)
            {
                sonuc= localStorage[key];
            }
        }
        else
        {
            //son olarak cookie desteği varmı ona bakılır
            sonuc=$.cookie(key);
        }
        return sonuc;
    }

    function SetData(key,value)
    {
        if (typeof (localStorage) != "undefined")
        {
            //ikinci önce html5 localStorage desteği varmı ona bakılır
            try
            {
                localStorage.setItem(key, value);
                return true;
            } catch (e)
            {
                return false;
            }

        }
        else
        {
            //son olarak cookie desteği varmı ona bakılır
            try
            {
                $.cookie(key, value);
                return true;
            } catch (e)
            {
                return false;
            }
        }
    }

    /*this plugin is to add cookie function to jquery*/
    /*Copyright (c) 2006 Klaus Hartl (stilbuero.de)*/
    jQuery.cookie = function (name, value, options) {
        if (typeof value != 'undefined') { // name and value given, set cookie
            options = options || {};
            if (value === null) {
                value = '';
                options.expires = -1;
            }
            var expires = '';
            if (options.expires && (typeof options.expires == 'number' || options.expires.toUTCString)) {
                var date;
                if (typeof options.expires == 'number') {
                    date = new Date();
                    date.setTime(date.getTime() + (options.expires * 24 * 60 * 60 * 1000));
                } else {
                    date = options.expires;
                }
                expires = '; expires=' + date.toUTCString(); // use expires attribute, max-age is not supported by IE
            }
            var path = options.path ? '; path=' + (options.path) : '';
            var domain = options.domain ? '; domain=' + (options.domain) : '';
            var secure = options.secure ? '; secure' : '';
            document.cookie = [name, '=', encodeURIComponent(value), expires, path, domain, secure].join('');
        } else { // only name given, get cookie
            var cookieValue = null;
            if (document.cookie && document.cookie != '') {
                var cookies = document.cookie.split(';');
                for (var i = 0; i < cookies.length; i++) {
                    var cookie = jQuery.trim(cookies[i]);
                    // Does this cookie string begin with the name we want?
                    if (cookie.substring(0, name.length + 1) == (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }
    };
    /*end of jquery plugin*/ 
```

# mysql - MySQL存储过程动态sql结果

> ID：14690333
> 
> 赞同：1
> 
> 时间：2013-02-04T15:51:35.563
> 
> 标签：mysql

我知道在 MySQL (>=5.0.13) 上的用户定义存储过程中可以有动态 SQL。所以如果我们有这样的事情：

```
CREATE PROCEDURE test()
BEGIN

    SET @query = "SELECT * FROM temp";
    PREPARE stmt FROM @query;
    EXECUTE stmt;       

END 
```

我的问题是：如何使用执行的动态语句的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:11:00.870

如果结果是单个值，您可以将其加载到变量中。如果您的查询检索到多个记录的结果集，您可以将它们加载到游标中并逐条记录循环以进行进一步处理。见[http://dev.mysql.com/doc/refman/5.0/en/cursors.html](http://dev.mysql.com/doc/refman/5.0/en/cursors.html)

# c++ - 如何将“int X::*”的内部typedef作为模板函数参数传递？

> ID：14690335
> 
> 赞同：1
> 
> 时间：2013-02-04T15:51:40.830
> 
> 标签：c++, templates, c++03

在这段代码中，我想将 的地址`x.y`作为模板参数传递`typename Name::Type leValue`。

```
#include <iostream>
using std::cout;
using std::endl;

struct X {
   X() : y(123) {}
   const int y;
};

template<typename Name, typename Name::Type leValue>
void print() { cout << *leValue << endl; }

struct Foo {
   typedef int X::* Type;
};

int main() {
    X x;
    print<Foo, &x.y>();  // What is the right syntax here?
} 
```

但是，使用 gcc 4.7.2，我收到以下错误：

> source.cpp：在函数'int main（）'中：
> source.cpp：22：5：错误：模板参数列表中的解析错误
> source.cpp：22：22：错误：没有调用'print（）'的匹配函数
> source.cpp:22:22: 注意: 候选是:
> source.cpp:11:6: 注意: 模板 void print()
> source.cpp:11:6: 注意: 模板参数推导/替换失败:
> source.cpp:22 :22: 错误：模板参数 2 无效

如果我改为将 typedef 更改为`typedef int Type;`，并将 print 调用更改为`print<Foo, 3>();`，那么它可以工作。我通过查看错误消息尝试了几件事，但无法获得正确的语法。我也在这里搜索过，发现了一些处理模板类的有用帖子，但没有处理模板函数。我尝试使用这些答案，但没有帮助。

您能帮我解决一下这个语法吗，或者向我解释一下接下来我应该尝试做什么来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T15:57:55.340

这是否接近您正在寻找的内容？

```
#include <iostream>
using std::cout;
using std::endl;

struct X {
   X() : y(123) {}
   const int y;
};

template<typename Name, typename Type, Type Name::*Member>
void print(Type& obj) { cout << obj.*Member << endl; }

int main() {
    X x;
    print<X, const int, &X::y>(x);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T16:00:26.753

的地址`x.y`在编译时是未知的。您可以将指向成员的指针`y`作为模板参数，但是，您必须在运行时传递对象实例的地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T15:59:45.587

当您将其更改为 int 时它会起作用，因为您允许将 const ints 作为模板参数传递。模板不允许您将值作为参数传递，因为它们需要在编译时解析。

# c# - PropertyChanged 事件始终引用 null

> ID：14690336
> 
> 赞同：0
> 
> 时间：2013-02-04T15:51:41.247
> 
> 标签：c#, nullreferenceexception, inotifypropertychanged

我希望它`figSpeed`总是反映`pSpeed`，但是当我在`onChangeX`方法中绑定时，我总是得到一个`System.NullReferenceException`

任何人都可以帮助我吗？似乎参考是正确的，情况也是如此。

`PointsToPathConverter`班级：

```
[ValueConversion(typeof(List<Point>), typeof(Geometry))]
public class PointsToPathConverter : IValueConverter
{
    #region IValueConverter Members
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        List<Point> points = (List<Point>)value;

        if (points.Count > 0)
        {
            Point start = points[0];
            List<LineSegment> segments = new List<LineSegment>();

            for (int i = 1; i < points.Count; i++)
            {
                segments.Add(new LineSegment(points[i], true));
            }

            PathFigure figure = new PathFigure(start, segments, false); // true if closed
            PathGeometry geometry = new PathGeometry();
            geometry.Figures.Add(figure);
            return geometry;
        }
        else
        {
            return null;
        }
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotSupportedException();
    }
    #endregion
} 
```

`dataProjectorVM`班级：

```
public class dataProjectorVM : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    public Path figSpeed;
    public List<Point> pSpeed;

    public dataProjectorVM()
    {
        pSpeed = new List<Point>();
        pSpeed.Add(new Point(0, 0));
        Binding bind;

        bind = new Binding("pSpeed")
        {
            Source = this,
            Mode = BindingMode.OneWay,
            Converter = new PointsToPathConverter(),
            UpdateSourceTrigger = UpdateSourceTrigger.PropertyChanged
        };

        figSpeed = new Path()
        {
            Stroke = Brushes.Black,
            StrokeThickness = 1
        };

        figSpeed.SetBinding(Path.DataProperty, bind);
    }

    public void onChangeX()
    {
        pSpeed.Clear();
        double pm = -2;

        foreach (dataPacket dp in appMain.dataMgr.retrive.result)
        {
            double _pm = appMain.dataMgr.projector.getX(dp.pm);

            if (_pm > pm + 1)
            {
                pm = _pm;
                pSpeed.Add(new Point(pm, appMain.dataMgr.projector.getSpeedY(dp.speed)));
            }
        }

        this.PropertyChanged.Invoke(this, new PropertyChangedEventArgs("pSpeed"));
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:54:11.760

如果`PropertyChanged`事件没有任何处理程序，`this.PropertyChanged`则为空。

你需要检查一下。

# bash - sed 与 regexp 用于不同的情况

> ID：14690342
> 
> 赞同：1
> 
> 时间：2013-02-04T15:51:54.930
> 
> 标签：bash, sed, awk

我有一个简单的任务：

从这样的输出：

```
[root@localhost:~]# racoonctl -s /var/racoon/racoon.sock ss isakmp
Destination            Cookies                           Created
89.208.102.86.500      d0a641ed0aa7bfe9:7ae3428b08fab146 2013-02-04 15:32:18 
```

只需要获取 IP 地址字符串和日期字符串（在不同的请求中）。

对于 IP，我写了以下正则表达式：

```
[root@localhost:~]# racoonctl -s /var/racoon/racoon.sock ss isakmp | sed -ne 's/^\(\([0-9]\{1,3\}\.\)\{3\}[0-9]\{1,3\}\).*/\1/p'
89.208.102.86 
```

但是对于日期不起作用

```
[root@localhost:~]# racoonctl -s /var/racoon/racoon.sock ss isakmp | sed -ne 's/^.*\([0-9]\{4\}\(\-[0-9]\{2\}\)\{2\}\  \([0-9]\{2\}:\)\{2\}[0-9]\{2\}\)$/\2/p'
[root@localhost:~]# 
```

无法理解错误在哪里？

我也想使用标志 -r 更改 /(expression/) 和 /{expression/}，但不知道该怎么做

先感谢您

PS我也知道替代变体：

```
[root@localhost:~]# racoonctl -s /var/racoon/racoon.sock ss isakmp |awk -F\. '/[0-9]/ {print $1"."$2"."$3"."$4}' 
89.208.102.86

[root@localhost:~]# racoonctl -s /var/racoon/racoon.sock ss isakmp | awk '/[0-9]/ {print $3 " " $4}'
2013-02-04 15:32:18 
```

但我想在 sed 上做这件事，以完成我未来的任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T16:00:57.337

您可以使用以下 sed：

```
sed -ne 's/^.*\([0-9]\{4\}\(\-[0-9]\{2\}\)\{2\} \)/\1/p' 
```

得到你的约会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T16:03:35.040

怎么样：

```
# IP 
$ sed -rn '2s/\.[0-9]+ .*//p' file
89.208.102.86

# Date and time
$ sed -rn '2s/(\S+\s+){2}//p' file
2013-02-04 15:32:18

# Just date
$ sed -rn '2s/(\S+\s+){2}(\S+).*/\2/p' file
2013-02-04 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T16:07:54.010

对于像 1.2.3.4 这样的 IP，它是：

```
sed -n 's%\([0-9.]+\).*%\1%p'
sed -rn 's%([0-9.]+).*%\1%p' 
```

日期是：

```
sed -n 's%.*\ \([0-9-]\+\ [0-9:]\+\)%\1%p'
sed -rn 's%.* ([0-9-]+ [0-9:]+)%\1%p' 
```

如果 IP 总是像 1.2.3.4.5（所以，有第五个字段，显然是端口号），sed 命令是：

```
sed -n 's%\([0-9.]\+\)\.[0-9]\+.*%\1%p'
sed -rn 's%([0-9.]+)\.[0-9]+.*%\1%p' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T17:49:38.640

假设 cookie 中没有空格，一个简单的`while read`循环就可以了：

```
racoonctl ... | while read -r ip cookies date; do
    # do something with "ip" and "date"
    echo $ip
    echo "$date"
done 
```

如果你想扔掉标题行

```
racoonctl ... | {
    read header
    while read -r ip cookies date; do
        # do something with "ip" and "date"
        echo $ip
        echo "$date"
    done
} 
```

# command-line - 子项目的 gradle 命令行属性

> ID：14690361
> 
> 赞同：1
> 
> 时间：2013-02-04T15:53:05.810
> 
> 标签：command-line, properties, gradle

我有一个多项目 gradle 构建，其顶层具有以下内容：

```
subprojects {
  apply plugin: 'war'
  httpPort = hasProperty('jettyPort') ? jettyPort.toInteger() : 8080
} 
```

如果我从命令行运行`gradle -PjettyPort=9000 war`调用`hasProperty`返回`null`，但如果我将`hasProperty`检查移到`subprojects`闭包之外，那么它返回`true`。

这是设计的行为，还是我应该能够`subprojects`像上面尝试的那样从闭包中访问属性。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T17:50:59.697

这行得通吗？

```
subprojects {
  apply plugin: 'war'
  httpPort = project.hasProperty('jettyPort') ? jettyPort.toInteger() : 8080
} 
```

# python - 获取条形图matplotlib的颜色

> ID：14690363
> 
> 赞同：2
> 
> 时间：2013-02-04T15:53:10.053
> 
> 标签：python, matplotlib, wxpython

我在 matplotlib 中构建了一个条形图，并将其嵌入到 wxpython 中。目前我已经能够通过使用获得积分`event.artist.get_bbox().get_points()`。我想获得特定栏的颜色。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T01:53:59.890

你只想要一个 rgba 元组吗？

如果是这样，只需使用`event.artist.get_facecolor()`.

作为一个简单的例子（看到你似乎正在处理挑选事件......）：

```
import matplotlib.pyplot as plt

def on_pick(event):
    print event.artist.get_facecolor()

fig, ax = plt.subplots()
bars = ax.bar(range(10), range(10), picker=5)

fig.canvas.mpl_connect('pick_event', on_pick)

plt.show() 
```

# ruby-on-rails - 回形针：附加已上传的文件

> ID：14690365
> 
> 赞同：0
> 
> 时间：2013-02-04T15:53:15.670
> 
> 标签：ruby-on-rails, ruby, paperclip, activeadmin

如果可以将已上传的文件附加到新的 activerecord 实例，我很感兴趣？例如，我上传了很多图片，想从中选择一张。甚至可以使用`paperclip`吗？我`Ckeditor` [知道](https://github.com/gregbell/active_admin/wiki/Ckeditor-integration)与`activeadmin`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:54:52.130

您可以将本地路径传递给文件，以从服务器可访问的位置触发存储处理。

```
User.attribute_that_is_attachment = File.new('/local/path/to/file.txt') 
```

# ruby-on-rails - 排序规则，因此排序不能与 postresql 一起正常工作

> ID：14690368
> 
> 赞同：3
> 
> 时间：2013-02-04T15:53:19.727
> 
> 标签：ruby-on-rails, macos, postgresql

我正在开发一个包含土耳其语内容的 Rails 应用程序。我使用 Postgresql 9.2.2 作为我的数据库后端。一切正常（没有奇怪的字符问题等），除了正确的排序。

例如，当我尝试列出一些按城市排序的项目时，我希望得到类似“Adana, Bursa, İstanbul, Giresun, Zonguldak ..”的内容。

相反，我总是在列表的末尾/开头得到土耳其语特定字符。（即“阿达纳、布尔萨、吉雷松、宗古尔达克、伊斯坦布尔”）

我已经用命令初始化了我的 postgres 数据库：`initdb /usr/local/var/postgres -E utf8 --locale=tr_TR`

当我`\l`在 psql 控制台中时，我得到了预期。

```
 Name              Owner         Encoding   Collate   Ctype
 ----------------+-------------+----------+---------+-------+ 
 app_development | app         | UTF8     | tr_TR   | tr_TR |
 app_production  | app         | UTF8     | tr_TR   | tr_TR |
 app_test        | app         | UTF8     | tr_TR   | tr_TR |
 postgres        | monkegjinni | UTF8     | tr_TR   | tr_TR | 
```

我还尝试使用`LC_CTYPE="tr_TR.UTF-8"`and手动创建数据库`LC_COLLATE="tr_TR.UTF-8"`，但同样没有进展。

关于我的开发环境的一些信息：

*   使用 Macbook Pro 7.1 运行 Mountain Lion 10.8.2

*   `psql --version` : 9.2.2

*   `rails --version`: 3.2.11

`$ locale`：

*   LANG="tr_TR.UTF-8"
*   LC_COLLATE="tr_TR.UTF-8"
*   LC_CTYPE="tr_TR.UTF-8"
*   LC_MESSAGES="tr_TR.UTF-8"
*   LC_MONETARY="tr_TR.UTF-8"
*   LC_NUMERIC="tr_TR.UTF-8"
*   LC_TIME="tr_TR.UTF-8"
*   LC_ALL=

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:33:40.963

OS X 上的 UTF-8 语言环境已损坏。您可以尝试使用非 UTF-8 语言环境 (tr_TR.ISO8859-9)，但它似乎在这方面也被破坏了。所以这行不通。

# dynamics-crm-2011 - 功能区上的活动按钮不起作用

> ID：14690374
> 
> 赞同：1
> 
> 时间：2013-02-04T15:53:31.843
> 
> 标签：dynamics-crm-2011

出于某种原因，当我单击功能区上的“活动”按钮时，它没有下拉可用活动列表。这发生在我尝试过的两种形式中，即帐户和服务案例。我没有收到脚本错误或任何其他错误。

我们的环境已经更新到 rollup 11。

无论如何我可以调试发生了什么？我似乎无法使用内置的 IE 开发人员工具走得太远。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:09:14.427

您可以通过按下进行调试，`F12`但这并不像听起来那么有趣。此外，这种行为似乎很奇怪。我无法重现它。你介意张贴截图吗？

![在此处输入图像描述](../Images/bcc31fd745a0ff41cf92349816dc10c2.png)

# php - 访问 XML 文件中节点的索引号

> ID：14690376
> 
> 赞同：0
> 
> 时间：2013-02-04T15:53:39.087
> 
> 标签：php, xml, simplexml

对于诸如

```
SimpleXMLElement Object
(
    [id] => https://itunes.apple.com/us/rss/topfreeapplications/limit=2/genre=6014/xml
    [title] => iTunes Store: Top Free Applications in Games
    [updated] => 2013-02-04T07:18:54-07:00    
    [icon] => http://itunes.apple.com/favicon.ico
    [entry] => Array
        (
            [0] => SimpleXMLElement Object
                (
                    [updated] => 2013-02-04T07:18:54-07:00
                    [id] => https://itunes.apple.com/us/app/whats-word-new-quiz-pics-words/id573511269?mt=8&uo=2
                    [title] => What is the Word? - new quiz with pics and words - RedSpell
                )

            [1] => SimpleXMLElement Object
                (
                    [updated] => 2013-02-04T07:18:54-07:00
                    [id] => https://itunes.apple.com/us/app/temple-run-2/id572395608?mt=8&uo=2
                    [title] => Temple Run 2 - Imangi Studios, LLC
                )
        )

) 
```

我正在使用以下代码来定位`entry`节点，因为每个`entry`节点都代表一个游戏。

```
$xml = simplexml_load_file('the path to file');
foreach ($xml->entry as $val)
{                   
   $gameTitle = $val->title;    
   $gameLink = $val->id;
} 
```

### 我在寻找什么

以节点的索引为目标`entry`，即`0`, `1`,`2`等；IE

```
[0] => SimpleXMLElement Object // <-- this fella here, capture 0
(
     [updated] => 2013-02-04T07:18:54-07:00
     [id] => https://itunes.apple.com/us/app/whats-word-new-quiz-pics-words/id573511269?mt=8&uo=2
     [title] => What is the Word? - new quiz with pics and words - RedSpell                  
)
[1] => SimpleXMLElement Object // <-- this fella here, capture 1
(
     [updated] => 2013-02-04T07:18:54-07:00
     [id] => https://itunes.apple.com/us/app/temple-run-2/id572395608?mt=8&uo=2
     [title] => Temple Run 2 - Imangi Studios, LLC
) 
```

无论我做什么，我似乎都无法获得当前节点的索引。

## 更新

只是为了让你们测试一下[Code Viper](http://codepad.viper-7.com/aMO4RT)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T00:44:30.923

您正在寻找一个名为[`iteator_to_array`](http://php.net/iterator_to_array)将第二个参数设置为的函数`false`：

```
$entries = iterator_to_array($xml->entry, false);
foreach ($entries as $index => $val)
{
    $gameTitle = $val->title;
    echo "<p>$gameTitle</p><p>Index = $index</p>";

} 
```

[演示](http://codepad.viper-7.com/8PLFZH)。实际上，您不必使用该功能，也可以只计算*：*

```
$index = 0;
foreach ($xml->entry as $val)
{
    echo "<p>{$val->title}</p><p>Index = $index</p>";
    $index++;
} 
```

默认情况下`$key`（在您的示例代码中）是 XML 元素的标记名。所以你不能默认使用它作为索引号。

# javascript - 将所有发布数据发送到 Jquery AJAX

> ID：14690382
> 
> 赞同：1
> 
> 时间：2013-02-04T15:53:58.570
> 
> 标签：javascript, jquery, ajax, forms

是否可以通过 ajax 将所有发布数据发送到 PHP 脚本？我知道我可以这样做：

```
 $.ajax({
    type: 'post',
    url: 'myurl/',
    data: {
       post1 : post_data_1
       post2 : post_data_2
       post3 : post_data_3
       ***
       ***
    }
  }); 
```

有没有办法将所有具有名称属性的表单数据发送到 php 脚本而不使用**数据指定每个元素：{ *** }**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T15:56:03.557

您可以使用`$('#FormID').serialize()`. 它基本上会根据您在 HTML 中使用的名称自动生成表单数据。

[文档在这里。](http://api.jquery.com/serialize/)

# android - 1080p 手机的资源限定符是什么？

> ID：14690386
> 
> 赞同：1
> 
> 时间：2013-02-04T15:54:16.217
> 
> 标签：android, android-layout, android-resources

我正在尝试为 HTC 宣布的 1080p 设备准备我们的最新应用程序。

当 320ppi 设备问世（例如 Galaxy Nexus）时，Google 添加了 xhdpi 限定符。

包括已发布的 HTC 设备在内的新一代设备的屏幕密度明显更高。在这种情况下，设备约为 440ppi。对于这些设备，我们是继续使用 xhdpi 限定符并考虑缩放，还是有不同的限定符可供使用，例如 xxhdpi？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T16:07:19.577

我的印象是我们现在会继续使用 xhdpi，但根据[Google 的兼容性定义](http://source.android.com/compatibility/4.1/android-4.1-cdd.pdf)，Android 4.1 已经支持 xxhdpi。（滚动到链接 PDF 中的第 7.1.1 节。）

此外，可以在[此处](http://developer.android.com/reference/android/util/DisplayMetrics.html#DENSITY_XXHIGH)找到对新存储桶的 API 支持。

由于 1080p 手机刚刚问世，这种密度桶并未被广泛讨论，但它支持并列出了约 480ppi 范围内的手机密度。440 比 320 更接近 480，因此 xxhdpi 将是这些 1080p 手机根据兼容性指南落入的桶。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T16:13:50.440

用于表示 dp 中最小宽度的新标准`sw`似乎是使用所有陌生组合进行复制的方法。

# java - 更改 WheelView 的 TextView

> ID：14690393
> 
> 赞同：0
> 
> 时间：2013-02-04T15:54:43.550
> 
> 标签：java, android, fonts, textview

我在我的项目中使用[Yuri Kanivets 的 WheelView](http://code.google.com/p/android-wheel/)。

出于翻译目的，我制作了一个带有自定义字体的自定义 TextView。WheelView 使用 TextView 来显示文本。我想在 Wheelview 中使用自定义 Textview，以便它以自定义字体显示文本。我怎么做？

我不想更改wheelview 的原始来源，以防我必须将其用于其他应用程序。

轮视适配器的代码：

```
/**
* Adapter for string based wheel. Highlights the current value.
*/
private class DateArrayAdapter extends ArrayWheelAdapter<String> {
   // Index of current item
   int currentItem;
   // Index of item to be highlighted
   int currentValue;

   /**
    * Constructor
    */
   public DateArrayAdapter(Context context, String[] items, int current) {
       super(context, items);
       this.currentValue = current;
       setTextSize(16);
   }

   @Override
   protected void configureTextView(TextView view) {
       super.configureTextView(view);
       if (currentItem == currentValue) {
           view.setTextColor(getResources().getColor(R.color.holo_blue));
       }
       view.setTypeface(Typeface.SANS_SERIF);
       view.setTextSize(18);
   }

   @Override
   public View getItem(int index, View cachedView, ViewGroup parent) {
       currentItem = index;
       return super.getItem(index, cachedView, parent);
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T16:04:32.550

使用您自己的视图创建布局 xml。让我们说它是`layout_item.xml`。将视图（自定义文本视图）的 id 设置为文本使用`android:id="@+id/text"`

在您的适配器上使用它：

```
adapter.setItemResource(R.layout.layout_item);
adapter.setItemTextResource(R.id.text); 
```

我想现在应该可以了

# c++ - 如何在不使用信号槽连接的情况下触发动作？

> ID：14690394
> 
> 赞同：1
> 
> 时间：2013-02-04T15:54:46.027
> 
> 标签：c++, qt

触发 Qt 动作的常用方法是使用信号槽连接。由于我的功能不是插槽，因此还有其他方法吗？比如一些直接调用？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-04T16:00:26.393

您可以使用 Qt 5 中的新语法将信号连接到非插槽方法`QObject::connect`。它看起来像这样：

```
connect(action, &QAction::triggered, this, &MyClass::doSomeFunction); 
```

在这个例子中，`MyClass::doSomeFunction`不需要是一个插槽。[这里有更深入的解释](http://qt-project.org/wiki/New_Signal_Slot_Syntax)。

如果你真的想触发一个 QAction，你可以直接这样做，而不使用信号或槽：

```
action->trigger(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:57:51.000

您可以添加将与信号连接的插槽，并且可以在其中调用您的函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-16T07:24:47.063

如果在 main() 中连接，它可以是这样的：

```
void windowAbout(){
   QMessageBox aboutMB(QMessageBox::NoIcon, "About", "This is a weather forcast !");
   aboutMB.setIconPixmap(QPixmap(":/icon.ico"));
   aboutMB.exec();
}
int main(){
   ......
   QObject::connect(aboutAction, &QAction::triggered, &app, &windowAbout);
   ......
} 
```

# java - java类不通信？

> ID：14690395
> 
> 赞同：2
> 
> 时间：2013-02-04T15:54:46.520
> 
> 标签：java, class, parameters

我正在为一个班级制作一个非常简单的文本 RPG 类游戏。我觉得一切都很好，但是当我运行以下类时，出现编译器错误。

这是我的“房间”课程：

```
import java.io.*;
import java.util.*;

public class Room {

    public static int size;

    public static void Room(int n) {
        size = n;
    }

    public static void showSize() {
        System.out.println(size);
    }
} 
```

这是调用它的类：

```
import java.io.*;
import java.util.*;

public class Dungeon {
    public static void main(String [] args) {
        int mySize = 10;
        Room a = new Room(mySize);

        a.showSize();
    }
} 
```

奇怪的是，如果我在 Room() 构造函数中不带任何参数运行它，那很好，但是当我尝试传入一个大小（在变量中或显式使用 int）时，我得到了这个：

```
Dungeon.java:8: cannot find symbol
symbol  : constructor Room(int)
location: class Room
        Room a = new Room(mySize);
                 ^
1 error 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T15:55:54.923

```
public static void Room(int n){
    size = n;
} 
```

不是构造函数，它是静态方法。所以，当你尝试

```
Room a = new Room(mySize); 
```

Java 查找带参数的构造函数并显示编译时错误。

将其更改为：

```
public Room(int n){
        size = n;
    } 
```

[在此处](http://docs.oracle.com/javase/tutorial/java/javaOO/constructors.html)阅读有关构造函数的更多信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-04T15:57:10.783

您正在尝试调用`Room`构造函数，但尚未定义任何构造函数。你有这个：

```
public static void Room(int n){
    size = n;
} 
```

...但这只是一个静态 void 方法，而不是构造函数 - 它设置了一个*静态*字段。我怀疑你真的希望你的`Room`班级看起来像这样：

```
public class Room {
    private final int size;

    public Room(int size) {
        this.size = size;
    }

    public void showSize() {
        System.out.println(size);
    }
} 
```

请注意，我已经制作`size`了`private`和`final`。如果你真的希望你的房间能够在建造后改变大小，那么你*可以*删除`final`，但我强烈建议你保留字段`private`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-04T15:56:28.987

这不是您声明构造函数的方式：

```
public static void Room(int n){
    size = n;
} 
```

改用这个：

```
public Room(int n){
    size = n;
} 
```

并使`size`非静态。

### 解释：

您实际上已经声明`static`了不特定于**实例**但属于**该类**的方法和变量。您要创建 Room 的实例，因此必须为每个实例指定的构造函数和成员不能是静态的。

如果您在没有任何参数的情况下运行它可以正确编译的原因是，如果您不指定任何构造函数，就像您在此处所做的那样，编译器会提供一个默认的无参数构造函数。

有关类和实例成员的更多信息，请查看[官方教程的这个页面](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-04T15:57:52.720

问题是构造函数不能是 void 和静态类型，所以改变：

```
public static void Room(int n){
    size = n;
} 
```

到

```
public Room(int n){
    size = n;
} 
```

它会起作用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-04T15:57:03.930

你`public static void Room(int n){`不是构造函数将其更改为`public Room(int n){`

您可能还想将大小字段更改为非静态

你可以在你的主要测试`System.out.println(new Room().size);`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-04T15:57:14.630

```
public static void Room(int n) {
        size = n;
    } 
```

这似乎是您正在尝试创建构造函数，但它不是创建方式。

使您的构造函数和大小变量非静态。

```
public class Room{    
   private int size;
   public Room(int n){
      size = n;
   }
} 
```

`Static`size 会破坏 Room Object 的封装，它应该是私有的。

```
Room a = new Room(mySize); 
```

[参考](http://docs.oracle.com/javase/tutorial/java/javaOO/constructors.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-04T16:41:42.073

构造函数不返回任何内容，因此将 p 更改`public static void Room(int n)`为`Room(int n)`or`public Room(int n)`并记住您不能将返回类型放在构造函数中，例如 int、String、void、double、byte、short、Graphics2D 等

# python - 简单的条形图，用 for 循环填充数据

> ID：14690398
> 
> 赞同：1
> 
> 时间：2013-02-04T15:54:53.513
> 
> 标签：python, reportlab

例如，我有一个 python 应用程序，它接收文本并生成前 10 个最常用单词的列表，这部分工作正常但是我想使用 reportlab 生成一个 pdf 图表，我有以下代码生成一个图表：

```
data = [[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]]
axis = []
d = Drawing(400, 400)

for word, frequency in top_words:
    axis.append(word)

chart = VerticalBarChart()
chart.width = 350
chart.height = 260
chart.x = 20
chart.y = 60
chart.data = data
chart.categoryAxis.categoryNames = axis
chart.valueAxis.valueMin = 0

d.add(chart)
d.save(fnRoot='Top Words', formats=['pdf']) 
```

该轴是从 for 循环（即单词）中填充的，但是对于频率，我希望使用类似的方法来使用单词的频率填充“数据”列表，但是在执行时我似乎遇到了各种错误这个..

任何关于如何最好地解决这个问题的建议都会很棒！

# php - 自定义 404 页面 - 是否需要 404 标头？

> ID：14690399
> 
> 赞同：1
> 
> 时间：2013-02-04T15:54:57.257
> 
> 标签：php, header, http-status-code-404

在我的项目中，我将所有请求路由到 index.php。然后我检查`$_SERVER['REQUEST_URI']`白名单并显示相关内容。

现在，如果 与`$_SERVER['REQUEST_URI']`我的白名单中的任何内容都不匹配，我会显示一些“找不到页面”文本。实际上，它是一个自定义的 404 错误页面。

我的问题是：我需要`header('HTTP/1.0 404 Not Found');`在输出 HTML 之前编写吗？它实际上是做什么的？无论如何都会显示我的错误页面，所以在这种情况下它很重要吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-04T15:55:40.740

是的。搜索引擎和其他人使用该标题来了解页面的状态并采取相应的行动。（例如从他们的索引中删除该页面等）

# c# - 城堡单轨电车魔术

> ID：14690400
> 
> 赞同：1
> 
> 时间：2013-02-04T15:54:59.613
> 
> 标签：c#, localization, castle-monorail, nvelocity, resourcemanager

我正在从事的项目支持多种语言环境。该解决方案基于使用一些 Castle Monorail 机制。相应的控制器类标记如下：

> [资源（“pageResx”，“...Controllers.Static”）]

其中 StaticTemplate 是 Controller 名称前缀，资源文件放置在 '..\Resources\Controllers\StaticTemplate*' 中。

另一方面，StatiController 继承自 BaseController 类，其标记如下：

> [LocalizationFilter(RequestStore.Session, "locale")]

因此，用户的语言环境存储在会话中。就是这样。最后一步是 NVelocity vm-file，其中适当的资源如下所示：

> $pageResx.Buttons_Download

这样，对于 locale='de' 的用户，ID = 'Buttons_Download' 的资源字符串取自文件 '..\Resources\Controllers\Static.de.resx'。

但是，项目中还有另一个地方进行本地化 - 构建电子邮件。在那里实现了以下逻辑：

```
public class EmailPersonalizer : IEmailPersonalizer
{
    ...
    printJobResourceManager = new ResourceManager("...Resources.PrintJob", 
                                        typeof (EmailPersonalizer).Assembly);
    public string ToLocalizedString(string resourceId, VendorUser user, 
          params object[] args)
    {
        ...
        var resourceString = printJobResourceManager.GetString(resourceId, 
                                    culture);
        ...
    }
    ...
} 
```

给定参数的值，resourceString 被正确评估。但...

魔术师来了。有一个巴西语言环境的资源文件。它有后缀“pt-BR”。还有葡萄牙语区域​​设置，但没有适当的资源文件 - 没有“pt”文件。在查看页面方面，Monorail 从 pt-BR 文件为 pt-user 获取本地化资源。但是实现电子邮件构造的逻辑却没有做同样的事情。取而代之的是从“en”过去的基本资源中获取本地化字符串。

我阅读了有关映射资源的 .NET 机制（[http://msdn.microsoft.com/en-us/library/sb6a8618.aspx](http://msdn.microsoft.com/en-us/library/sb6a8618.aspx)）。但未能找到单轨铁路的描述。

问题是单轨列车（或任何人）如何将“pt”映射到“pt-BR”？我应该怎么做才能在外面实现相同的逻辑？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T09:43:08.263

我假设这是在访问者网络环境之外运行的？为了让 .NET 从您的资源中获取适当的字符串，您需要更改当前线程的区域性：

```
var culture = CultureInfo.CreateSpecificCulture( "pt" );
System.Threading.Thread.CurrentThread.CurrentUICulture = culture; 
```

我看到您在通话中传递了文化：

```
 var resourceString = printJobResourceManager.GetString(resourceId, 
                                culture); 
```

您是说即使您发送了适当的文化，此调用也会返回磨损的结果？

# highcharts - Highcharts 加载图像

> ID：14690401
> 
> 赞同：4
> 
> 时间：2013-02-04T15:55:00.013
> 
> 标签：highcharts

使用[http://api.highcharts.com/highcharts#loading](http://api.highcharts.com/highcharts#loading)

是否可以将图像作为显示的叠加层的一部分？特别是“加载” gif 图像？

我试过使用 labelStyle 部分，但到目前为止还没有运气！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T16:25:36.697

在检查 API 之后。这似乎是可能的。

`labelStyle`接受任何有效的 CSS。通常带有连字符的属性会删除连字符，并将下一个字母大写。这意味着我们可以使用类似的东西`background-image`来提供背景图片（比如加载`.gif`）。

```
var chart = new Highcharts.Chart({
    // ...

    loading: {
        labelStyle: {
            backgroundImage: 'url("http://jsfiddle.net/img/logo.png")',
            display: 'block',
            width: '136px',
            height: '26px',
            backgroundColor: '#000'
        }
    },

    // ...
}); 
```

[示例小提琴在这里](http://jsfiddle.net/86nuH/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-30T12:58:11.080

查看此示例以进行自定义加载

```
$(function () {
    // the button handler
    var isLoading = false,
        $button = $('#button');
    $button.click(function() {
        if (!isLoading) {
            chart.showLoading();
            $button.html('Hide loading');
        } else {
            chart.hideLoading();
            $button.html('Show loading');
        }
        isLoading = !isLoading;
    });

    // create the chart
    var chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container'
        },
        xAxis: {
            categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
        },

        series: [{
            data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]        
        }]
    });
});
```

```
.highcharts-loading {
  opacity: 1!important;
}
.highcharts-loading-inner {
  display: block;
}

.highcharts-loading-inner,
.highcharts-loading-inner:before,
.highcharts-loading-inner:after {
  background: #dfdfdf;
  -webkit-animation: load1 1s infinite ease-in-out;
  animation: load1 1s infinite ease-in-out;
  width: 1em;
  height: 4em;
}
.highcharts-loading-inner {
  color: #dfdfdf;
  text-indent: -9999em;
  margin: 0 auto;
  top: 50%!important;
  position: relative;
  font-size: 11px;
  -webkit-transform: translate3d(-50%, -50%, 0);
  -ms-transform: translate3d(-50%, -50%, 0);
  transform: translate3d(-50%, -50%, 0);
  -webkit-animation-delay: -0.16s;
  animation-delay: -0.16s;
}
.highcharts-loading-inner:before,
.highcharts-loading-inner:after {
  position: absolute;
  top: 0;
  content: '';
}
.highcharts-loading-inner:before {
  left: -1.5em;
  -webkit-animation-delay: -0.32s;
  animation-delay: -0.32s;
}
.highcharts-loading-inner:after {
  left: 1.5em;
}
@-webkit-keyframes load1 {
  0%,
  80%,
  100% {
    box-shadow: 0 0;
    height: 4em;
  }
  40% {
    box-shadow: 0 -2em;
    height: 5em;
  }
}
@keyframes load1 {
  0%,
  80%,
  100% {
    box-shadow: 0 0;
    height: 4em;
  }
  40% {
    box-shadow: 0 -2em;
    height: 5em;
  }
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="http://code.highcharts.com/highcharts.js"></script>

<div id="container" style="height: 400px"></div>
<button id="button">Show loading...</button>

<!-- Spinners -->
<!-- https://projects.lukehaas.me/css-loaders/ -->
```

# ruby-on-rails-3 - 在浏览器中加载页面时，Rails 3.2.11 JavaScript 资产陷入循环

> ID：14690405
> 
> 赞同：3
> 
> 时间：2013-02-04T15:55:18.187
> 
> 标签：ruby-on-rails-3, asset-pipeline

在本地，当我建立我的 rails 项目 ( `rails s`) 并查看我的日志文件时，我最初可以看到我的 javascript 资产加载得很好

```
Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-02-04 09:46:56 -0600
Served asset /jquery.js - 304 Not Modified (26ms) 
```

但由于某种原因，资产开始尝试重新加载自己，这是重新加载时的输出：

```
Started GET "/assets/jquery.js?body=1&_=1359992817255" for 127.0.0.1 at 2013-02-04 09:46:57 -0600
Served asset /jquery.js - 200 OK (0ms) 
```

我无法弄清楚，我的应用程序中没有任何改变导致这种情况。还有其他人遇到这个问题吗？

另外，这是我的 GemFile：

```
source 'https://rubygems.org'

gem 'rails', '3.2.11'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'mysql2'
gem 'devise'
gem 'omniauth', '1.1.0'
gem 'omniauth-oauth2', '1.0.1'
gem 'carrierwave'
gem 'fog'
gem 'mini_magick' #need to install imagemagick for this to work
gem 'therubyracer'
gem 'execjs'
gem 'activeadmin'
gem 'meta_search', '>= 1.1.0.pre'
gem 'awesome_print'
gem 'aws-s3', :require => 'aws/s3'
gem "friendly_id", "~> 4.0.1"
gem 'feedzirra'
gem 'rabl'
gem 'bigdecimal'
gem 'rails_autolink'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
    gem "bootstrap-sass", '~> 2.0.4.0'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platform => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

# Use unicorn as the app server
# gem 'unicorn'
gem 'thin'

# Deploy with Capistrano
gem 'capistrano'
gem "typhoeus"
# To use debugger
# gem 'ruby-debug19', :require => 'ruby-debug'
gem "gibbon"

group :development, :test do 
  gem "rspec-rails", ">= 2.5.0"
  gem "capybara", ">= 0.4.1.2"
  gem "launchy", ">= 0.4.0"
  gem "database_cleaner", ">= 0.6.7"
  gem "factory_girl_rails", ">= 1.2"
  gem 'spork-rails'
  gem 'guard-rspec'
  gem 'guard-spork'
  gem 'guard-livereload'
  gem 'growl'
  group :darwin do
    gem 'rb-fsevent', :require => false
  end
end

group :test do
  gem "cucumber-rails", ">= 0.4.1"
end 
```

这个问题是在我更新到最新的 Rails 后开始的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:26:18.420

解决方案是这最终成为一个糟糕的 jQuery 正则表达式。

# emacs - 为什么我的自动缩进 emacs 脚本不适用于 .cu 文件

> ID：14690406
> 
> 赞同：0
> 
> 时间：2013-02-04T15:55:20.777
> 
> 标签：emacs, lisp

我刚开始学习emacs。我使用[这个 Lisp 脚本](http://www.cslab.pepperdine.edu/warford/BatchIndentationEmacs.html)批量缩进我的 c++ 代码，但奇怪的是它不适用于 .cu 文件**，除非我将 %.cu 重命名为 %.cpp**。为什么？我需要在 .emacs 中明确设置任何 emacs 变量以使格式化规则适用于 .cu 文件吗？感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T16:14:03.877

该变量`auto-mode-alist`包含有关应在哪些主要模式文件中打开的信息。

例如，您可以使用以下内容：

```
(add-to-list auto-mode-alist '("\\.cu\\'" . 'c++-mode)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T23:42:33.080

更改 auto-mode-alist 是所有 *.cu 文件的最佳解决方案，但对于 adhoc 模式，您可以`-*-mode-*-`像 // 一样放在第一行，`-*-c++-*-`并且每个文件都有效。

# python - 动态生成漂亮的基于 Web 的图表/图形

> ID：14690411
> 
> 赞同：1
> 
> 时间：2013-02-04T15:55:29.937
> 
> 标签：python, graph

我正在使用 Python 开发具有数据可视化元素的 Web 应用程序。基本上，它将收集有关用户音乐目录的数据，并允许他们将其可视化并根据数据告诉他们的内容采取行动。我几乎完全需要条形图来实现我想要的可视化。鉴于应用程序的动态特性，该程序包需要支持动态创建图表——本质上是响应用户的命令和他们的数据以快速呈现新图表。

问题是，像 PyCha 这样的一些更轻量级的包创建的图表在视觉上并不吸引人，也不适合基于消费者的网络应用程序。我研究过 Fusion Charts，但这对我的目的来说似乎有点重，而且它使用 Flash，我想避免使用它。

是否有一个不错的中间地带可以让我根据用户输入创建相当漂亮的图表，但又不会因为 Flash 包袱和企业级的大量功能而使我的服务器陷入困境？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T17:00:52.493

我会推荐很棒的 d3.js 包，你可以用它做任何事情，它会产生漂亮的交互式图表。

# ios - 在 iOS 中打开另一个应用程序

> ID：14690417
> 
> 赞同：0
> 
> 时间：2013-02-04T15:55:43.167
> 
> 标签：ios, objective-c, xcode, url

当您使用 URL 从您的应用程序中打开另一个应用程序时。是否可以在该应用程序中放置一个后退按钮以返回您的应用程序？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T16:23:33.857

对于两个相互合作的应用程序，这应该是可能的：

应用程序 A 打开`appBschema://whatever?back=appAschema%3a%2f%2fdontcare` 并实现“后退”按钮应用程序 B 可以打开`appAschema://dontcare`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T15:59:06.610

在任何正常情况下，不，它是别人的应用程序，你不能对它做任何事情。

但是，如果另一个应用程序是您的，并且您希望在它们之间进行交换，您可以在另一个应用程序中执行此操作，但在该应用程序中而不是您要打开的应用程序中。

# javascript - 如何使用 document.getElementByTagName 和目标特定的类名

> ID：14690425
> 
> 赞同：0
> 
> 时间：2013-02-04T15:55:59.393
> 
> 标签：javascript, jquery, html, css

我这里有代码。

```
<div class="container">
<div class="accordionHeader">
<h1 onclick="test()"></h1>
</div>
<div class="accordionContent" style="display:none">
<div class="contents"></div>
<div class="contents"></div>
<div class="contents"></div>
</div>
</div> 
```

我想定位并显示/隐藏 class="accordionContent"。我试过使用 document.getElementByTagName 但我不知道如何定位 class="accordionContent"。我不允许使用 id。

希望你能帮助我。尝试搜索但没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T15:57:15.770

你可以用 jquery 做这样的事情

```
$('.accordionContent').show(); //to show

$('.accordionContent').hide(); //to hide 
```

甚至切换可以工作:)

```
$('.accordionContent').toggle(); //to hide and show 

$('.accordionContent').slideToggle(); //toggle with Animatation

$('.accordionContent').fadeIn(); //fadeIn with Animatation
$('.accordionContent').fadeOut(); //FadeOut with Animatation 
```

选择任何一个，只要你觉得舒服:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T16:10:16.577

您可以使用**getElementByClassName**和隐藏/显示手风琴内容 div，如下所示：

```
document.getElementsByClassName('accordionContent')[0].style.display="show";  // to show

document.getElementsByClassName('accordionContent')[0].style.display="show";  // to hide 
```

# dynamic - 方案静态定义的数据结构和动态定义的数据结构

> ID：14690427
> 
> 赞同：0
> 
> 时间：2013-02-04T15:56:00.443
> 
> 标签：dynamic, static, scheme

我试图了解静态定义的数据结构和动态定义的数据结构之间的方案有什么不同。

我知道静态定义的数据结构是在编译时创建的，而动态定义的数据结构是在运行时创建的，但这在实践中意味着什么？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T01:06:29.717

你的问题有点模糊和不精确。

回答您的问题需要清楚地了解“静态定义的数据结构”与“动态定义的数据结构”的含义。毕竟，在实践中，大多数数据结构实例都是在运行时*创建*的（不管它们是否被分配了静态结构类型或者是动态定义的记录的混合体）。因此，至少根据您问题中的最后一条陈述，这似乎与您对何时创建此类结构的理解相矛盾。

在尝试推断出您的意思之后，我决定将 Scheme 和某些其他知名语言进行比较，因为这似乎是我们最有可能对“静态定义”应该是什么意思达成共识的领域.

## 静态定义的数据结构（以 C 语言为例）

Scheme（如在[R5RS](http://www.schemers.org/Documents/Standards/R5RS/)中）并不是特别以数据结构的静态定义而闻名，至少与其他语言（如 Pascal、C 和 C++）相比。（作为对词法作用域和[静态名称解析](http://en.wikipedia.org/wiki/Name_resolution#Static_versus_dynamic)的严格遵循，它在许多方面比 Perl 或 Python 等其他语言*更加静态。）*

在像 Pascal 或 C 这样的语言中，通常在独立的声明中写出显式的结构或类定义。这样的显式定义*静态*（即在编译时）定义：

*   分配多少字节的内存来表示结构的每个实例，以及

*   从实例中提取时，如何解释结构的每个实例的成员/字段。

因此，在 C 中，声明如下：

```
typedef struct coordinate coord_t;
struct coordinate {
   intptr_t x;
   intptr_t y;
   coord_t *next;
}; 
```

是一种告诉编译器您希望该类型`struct coordinate`表示占用 3 个字的内存块的方法：一个机器字用于每个`x`and `y`，第三个机器字用于保存指向另一个坐标的指针（我们假设我们'重新将这些记录链接到一个列表中）。该声明还表明`x`和`y`表示有符号整数（在字长允许的范围内），而`next`表示指向坐标的指针。

（指针，即内存地址，与任意整数完全不同，尽管在某些语言的语法和实现中双关语在某些上下文中将指针和整数混为一谈。）

另一个重要的细节是，每个标识符都[*明显*受限](http://c2.com/cgi/wiki?StaticTyping)于它允许保存的值的类型。对于结构字段（`x`、`y`和`next`以上）以及参数和局部变量都是如此，如下面的函数定义`sum_coords`所示。

将每个坐标解释为二维平面中的向量，可以将所有坐标添加到坐标列表中，如下所示：

```
coord_t sum_coords(coord_t *coords)
{
    coord_t c;
    c.x = 0;
    c.y = 0;
    c.next = NULL;

    while (coords != NULL) {
        c.x += coords->x;
        c.y += coords->y;
        coords = coords->next;
    }

    return c;
} 
```

请注意，`coords`显然仅限于持有`coord_t*`并且`c`显然仅限于持有`coord_t`aka `struct coordinate`。如果我试图在不明确使用类型转换的情况下违反该约束，编译器可能会拒绝编译我的程序，如下所示：

```
coord_t sum_coords(coord_t *coords)
{
    coord_t c;
    c = coords; // <-- compiler error: incompatible types in assignment
    ...
 } 
```

到目前为止，一切都很好。但是，当然，您的问题是关于 Scheme 的。

## 动态定义的数据结构（在 Scheme 中有一个例子）

典型的 R5RS 方案代码不像上面那样工作。在 R5RS 方案中，没有写出单独的声明以由方案编译器/解释器解释，描述与数据类型的每个实例相关联的内存量，或者应该如何解释实例的内存块中的字节。

在 R5RS 方案中，不是使用上述结构定义来创建复合数据，而是分配对、向量、字符串或过程对象。（Scheme 中的列表是由对组成的。）在许多 Scheme 实现中，每对只占用两个单词，而向量和字符串每个都有一个单独的大小，在分配它们的时候提供。（过程对象实例所需的内存高度依赖于 Scheme 运行时以及它如何表示闭包和词法环境。）关键是，您通常甚至不会*考虑*数据使用的机器字数结构实例；相反，您首先要专注于解决手头的问题，然后再担心字节数，直到您确定有必要这样做。

无论如何，重点是，在 R5RS 方案中，不需要告诉编译器/解释器坐标结构是如何表示的；至少，不是在仅为该目的添加的孤立的运行时解析声明中。

相反，人们可能会这样写：

```
;; A Coordinate is a (list Number Number)

;; A CoordinateList is one of:
;; - '()
;; - (cons c cl), where c is a Coordinate and cl is a CoordinateList

;; sum-coords: CoordinateList -> Coordinate
(define (sum-coords l)
  (cond ((null? l) (list 0 0))
        (else (let ((c (car l))
                    (sum-of-rest (sum-coords (cdr l))))
                (list (+ (list-ref c 0) (list-ref sum-of-rest 0))
                      (+ (list-ref c 1) (list-ref sum-of-rest 1)))))))

 ;; Below is in the REPL:

 > (sum-coords '((1 4) (2 3) (3 2) (4 1)))
 (10 10) 
```

一些区别：

*   在这里，数据如何布局的描述在 Scheme*注释*中，而不是代码中。这样的注释是很好的 Scheme 风格，因为即使方案编译器/解释器不需要这样的注释，阅读您的代码的其他人几乎肯定*会*需要它们。（有关此主题的更多信息，请参阅文本[如何设计程序](http://www.htdp.org)。）

*   不需要明确声明表示 a 的列表的元素`Coordinate`是数字；Scheme 运行时将在必要时携带该信息（以便您可以使用谓词`number?`来查看携带的值是否为数字）。

Scheme 的类型安全实现将在必要时检查操作，例如`+`提供的参数是数字（而不是对对的引用，或对向量的引用等）；但是，R5RS 报告本身说：“向操作提供未指定处理的参数是错误的”；根据报告的约定，不一定会检测到此类错误，并且未指定后续行为。

*   同样，变量`c`并没有*明显*地被限制为只能保存两个元素列表。也就是说，此过程并不固有地规定由 表示的值`c`必须始终看起来像与我们的数据定义匹配的坐标。只有通过编程*约定*，我们才会尝试确保这样的约束成立；编程语言与它无关。

*   在 R5RS 方案中，不将类型与一对或向量的子组件相关联；*任何*值都可以被一对或向量的任何元素`car`引用。`cdr`将此与 C 代码进行比较，在 C 代码中，我们只能将`intptr_t`值放入 的`x`和`y`字段中`struct coordinate`，并且只能将`struct coordinate*`（即指向坐标的指针）放入`next`字段中。

最后一点是区分动态与静态的一个关键区别：在像上面这样的 Scheme 程序中，您在使用列表（对）和向量时获得了很大的自由度，因为您可以将任何类型的值放入其中。这种自由可以提供很大的力量和灵活性。但是你也放弃了一些东西：你失去了编译器的帮助，当你将*错误*类型的值放入一对或向量中时会告诉你，从而破坏了你所依赖的其他代码的假设。

例如，考虑以下变体`sum-coords`：

```
(define (sum-coords l)
  (cond ((null? l) (list 0 0))
        (else (let* ((c (car l))
                     (s (sum-coords (cdr c))))
                (list (+ (car (car l)) (car c))
                      (+ (car (cdr c)) (car (cdr s)))))))) 
```

我故意混淆了这个版本。有一个错误；当我运行它时，我得到一个错误：

```
> (sum-coords '((1 4) (2 3) (3 2) (4 1)))
Error: cdr: 4 is not a pair. 
```

这个 bug 有点难找（尽管如果按照[设计秘诀](http://www.htdp.org/)，就永远不会写出上面的代码）。但是有人可能会声称，在 Scheme 中这个错误很容易犯，*因为*该语言鼓励使用列表和对来表示所有内容，因此并不总是有保护措施阻止您将 Coordinate（一种列表）传递给一个点需要一个 CoordinateList （另一种列表）。（Scheme 的一些方言，例如[Typed Racket ，为用户提供了](http://docs.racket-lang.org/ts-guide/)*静态*定义数据类型的方法，以便编译器可以再次提供此类帮助。）

当然，在像 C 这样的语言中，类型系统主要是为了告诉编译器如何在内存中布局对象。在 C 中使用 typecast 来传递一个期望的`struct coordinate*`地方是非常简单的`intptr_t`，而且你不太可能得到一个很好的消息

```
 > (sum-coords '((1 4) (2 3) (3 2) (4 1)))
 Error: +: (4 1) is not a number. 
```

所以你应该对两者之间的这种所谓的“区别”持保留态度。“类型安全”和“静态类型”之间存在[很大差异](https://stackoverflow.com/questions/13345145/type-safe-vs-static-typing)。（简而言之，R5RS Scheme 和 C 都不是类型安全的，尽管 R5RS Scheme 的几个实现*是*类型安全的，或者试图是类型安全的。）

*   另一个可以区分动态和静态的地方：我可能选择这样编写数据定义：

    `;; A Coordinate is a (list Number Number Any ...)`

    `;; interpretation: A Coordinate (list x y payload ...) is a point at location <x,y> on a 2D plane, with a metadata payload also associated with the point.`

现在，sum-coords 的原始实现仍然适用于这个定义。用户可以自由地将任何额外信息（可能是颜色，或点上的标签）作为额外元素添加到列表中，我们仍然可以总结 X 和 Y 分量。这与上述一点有关，它`c`并没有明显地限制为仅包含两个数字元素列表。

（当然，在像 C++ 这样的语言中，可以通过子类化实现大致相同的目标，在 C 中也可以通过在其前三个单词中定义具有相同布局的另一个结构来实现 layout `struct coordinate`，然后在构建链表时进行类型转换。在这一点上，在*任何*这些语言中，您都有效地回到了更加动态的数据结构定义风格；这只是您在极端之间的范围内走多远的问题。）

## 关于 Scheme 代码和结构抽象的注释

尽管不需要进行单独的结构声明，但定义一小组处理数据类型的过程并将它们用作所有其他操作都打算使用的抽象接口可能是一种很好的风格。在这种情况下，我们可能会尝试这样做：

```
;; coord : Number Number -> Coordinate
(define (coord x y) (list x y))

;; coord-x : Coordinate -> Number
(define (coord-x c) (list-ref c 0))

;; coord-y : Coordinate -> Number
(define (coord-y c) (list-ref c 1)) 
```

这并不完美（这是一个泄漏的抽象），但它是一个开始；当然，人们也可以修改`sum-coords`以使用这些过程，而不是直接访问`Coordinate`.

## 关于从 C 音译（或没有音译）到 Scheme 的注释

请注意，Scheme 代码*并不是*C 代码的精确逐字模拟。

例如，C 代码中的每个坐标由三个机器字组成；坐标结构中的第三个单词携带下一个元素的链接字段。在 Scheme 中更直接地编写它的一种方法是数据定义，例如

```
;; A Coordset is one of '(), or (vector Number Number Coordset) 
```

这将导致对上面编写的 C 代码进行更忠实的逐字音译，但不太忠实于 Scheme 的精神，其中将坐标结构和链接结构解耦更为惯用。

## 通过语法扩展和其他方案方言的结构定义

尽管 R5RS Scheme 没有用于声明结构的特殊形式，但 R5RS 确实定义了一个宏系统，可以在其中定义此类[记录语法](http://srfi.schemers.org/srfi-9/srfi-9.html)。

[此外， Racket](http://docs.racket-lang.org/reference/define-struct.html)和[Chez](http://www.scheme.com/csug7/objects.html#./objects:h12)等几种 Scheme 方言提供了语言扩展，用于定义称为记录的结构化数据。即使在后两种情况下，记录仍然是一个潜在的动态实体：*可以*动态创建新的记录类型，而不必在编译时预先提供所有所需的记录类型。但仅仅因为某些事情可以动态完成并不意味着它应该是，正如 Chez 手册中所解释的：

> 过程接口比句法接口更灵活，但这种灵活性会导致程序的可读性降低，并损害编译器生成高效代码的能力。只要够用，程序员就应该使用语法接口。

## 结论

用 C 和 Scheme 等语言定义数据结构的方式有很多不同。在 C 语言中，您需要预先说明数据结构中出现了多少条目，以及它们的类型是什么；对于参数和局部变量也是如此。在 Scheme 中，您可以在评论中说多少就说多少，然后相应地编写代码。

# magento - 如何在 magento 更新脚本中获取基础货币？

> ID：14690429
> 
> 赞同：2
> 
> 时间：2013-02-04T15:56:06.677
> 
> 标签：magento

我尝试在更新脚本中获取基础货币代码，以创建一些特殊产品。如果我尝试使用

```
Mage::app()->getStore()->getBaseCurrencyCode(); 
```

我得到了“美元”，这是默认的默认货币。看起来商店还没有初始化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T16:49:42.763

我发现有一个在初始化之后运行的“数据更新”脚本，它被称为 data-upgrade-versionfrom-versionto.php。

见 Mage_Core_Model_Resource_Setup::applyDataUpdates()

# bash - Bash：当前目录中匹配正则表达式的文件总大小

> ID：14690431
> 
> 赞同：1
> 
> 时间：2013-02-04T15:56:16.850
> 
> 标签：bash, shell, sh

```
ls | grep -P "$1" | awk '{ x += $5 } END { print "total bytes:" x }' 
```

此代码使用“[0-9]”作为 reg expr 返回 0，在当前文件夹中有 2 个文件名为：“1”和“6”，每个文件的大小为 138 字节。

任何人都可以帮我找到问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T16:02:05.723

`du`可以帮助你；它有一个`-c`用于显示“总计”的标志。它导致最后一行包含总大小，后跟单词total。因此，以下内容应为您提供以字节为单位的总大小供您选择：

```
du -bc yourFilePattern | awk 'END {print $1}' 
```

编辑：

如果类似的东西`*pattern*`还不够，而你想要一个正则表达式，只需使用：

```
ls | grep -P "$regex" | xargs du -bc | awk 'END {print $1}' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T16:05:44.153

您只是`-l`缺少`ls`.

```
ls -l | grep -P "$1" | awk '{ x += $5 } END { print "total bytes:" x }' 
```

# apache-httpclient-4.x - httpclient 4.x 重复查询字符串参数

> ID：14690433
> 
> 赞同：0
> 
> 时间：2013-02-04T15:56:21.083
> 
> 标签：apache-httpclient-4.x

谢谢阅读。

我正在尝试调用需要重复查询字符串参数的 IBM REST API。在这种特殊情况下，执行搜索需要您为每个条件传入“条件”查询字符串参数。

例如，

http://.../rest/search?condition=name|NotEquals|sublimemm&condition=age|LessThan|30

在最新的 apache http 客户端中使用 URIBuilder，可以这样完成：

```
 URIBuilder builder = new URIBuilder();
    builder.setScheme("http").setHost(host).setPort(port).setPath(restPath + searchUri)
    .setParameter("condition", "taskActivityName|RouteHumanTask")
    .setParameter("condition", "taskStatus|NotEquals|Closed");

    HttpPost post = getHttpPostMethod(builder.build()); 
```

问题是 URIBuilder 会在查询字符串参数“条件”中添加一个值，然后用第二个值覆盖它。它在内部使用了一个映射，该映射与参数名称无关，因此似乎不可能将此类用于此特定用例。

难道我做错了什么？我可以在 URIBuilder 上设置一个选项来解决这个问题吗？有任何想法吗？

感谢 StackOverflow，Sublimemm

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T09:33:38.220

使用`URIBuilder#addParameter`而不是`URIBuilder#setParameter`.

# css - 为什么此选择器未应用于给定标签？

> ID：14690435
> 
> 赞同：1
> 
> 时间：2013-02-04T15:56:27.280
> 
> 标签：css, css-selectors

这个选择器没有像我预期的那样工作：

```
<style type="text/css">
    .someClass p, b {
        color:red;
        cursor : pointer;
    } 
</style>
<p>This is a test</p>
<p>This is another <b>test</b></p>
<p class="someClass">This is a test with someClass</p>
<p>This is another <b class="someClass">test</b></p> 
```

**结果和[jsFiddle](http://jsfiddle.net/K238Z/4/)：** 非样式段落和样式的文本显示为黑色。带有类“someClass”的文本`p`没有显示为红色文本，但是`b`带有类“someClass”的文本确实显示为红色。

**问题：** 为什么`p`class="someClass" *（第三段）*没有显示为红色，而`b`class="someClass" *（第四段）*显示为红色？

两个标签都包含在 someClass 选择器中。我在通过搜索找到答案时运气不佳，并且[文档](http://www.w3.org/TR/CSS2/selector.html#class-html)似乎没有解决这个确切的情况

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T15:57:43.897

如果您希望您的样式适用于`b`带有 class 的段落和元素`someClass`，请使用

```
p.someClass, b.someClass {
    color: red;
    cursor: pointer;
} 
```

您现有的选择器目标

*   任何`b`元素
*   具有 class 的元素内的段落`someClass`。

这段代码：

```
.someClass p, b { something } 
```

是相同的

```
.someClass p { something }
b { something } 
```

# javascript - How to redirect while prompt is still active?

> ID：14690438
> 
> 赞同：2
> 
> 时间：2013-02-04T15:56:43.517
> 
> 标签：javascript, redirect, prompt

So say I have the following code:

```
window.prompt('Redirecting');
location.href = '/'; 
```

(I know this isn't useful code, but wait one sec) I can't figure out how to make it so that prompt doesn't 'freeze' the whole browser so that the redirect is forced to happen. So that in essence what I want is the prompt to come up and immediately for the page to redirect. (without user pressing anything)

I can't seem to find any documentation on how to have a timer on prompt to stop it after a while and/or to stop it from some other method. Anyone have any thoughts?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:58:48.863

You can not have a timer to close a prompt, alert, confirm, etc.

If you want to do something like that you are going to have to build something using layers in JavaScript. Look at libraries like [jQuery UI dialog](http://jqueryui.com/dialog/#modal-message), [YUI's](http://developer.yahoo.com/yui/container/dialog/), dojos, or any other library out there.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T16:01:11.910

How alert, prompt, etc behave is up to the browser. Mostly, they are fully modal, so they block all input. I'd suggest a framework such as FancyBox to show a popup that isn't modal and isn't under the browser's control.

# jboss - 如何在 JBoss 7 中升级 HornetQ 版本

> ID：14690444
> 
> 赞同：3
> 
> 时间：2013-02-04T15:56:58.737
> 
> 标签：jboss, hornetq

我正在使用 jboss-as-7.1.1.Final，它嵌入了 hornetQ 服务器版本 2.2.13.Final。我想将hornetQ的版本升级到2.3.0 CR1。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T13:54:35.663

如以下链接所述：

[https://community.jboss.org/message/796065#796065](https://community.jboss.org/message/796065#796065)

最好的选择是等待即将到期并使用 CR1 的 AS7.2。

# c++ - 使用后推的 SEGV

> ID：14690450
> 
> 赞同：0
> 
> 时间：2013-02-04T15:57:07.420
> 
> 标签：c++

```
vector<char*> *v =new vector<char*>[size];
for(i=0;i<size;i++)
{
    char *buf=new char[1024];
    ------
    ------
    ind=****;
    v[ind].push_back(buf); // i am sure ind is not our of bounds.
} 
```

我使用 new 运算符声明了一个向量数组并将其填充到一个循环中。但它遇到了一个SEGV。我不知道它是怎么发生的。我的 GDB 回溯为我提供了“.....include/c++/4.4.5/ext/new_allocator.h:105”的最后一个堆栈函数。代码片段如下所述。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T16:02:09.957

我有一种你真正想要的感觉

```
auto vv = vector<vector<string>>(size/*, vector<string>(1024)*/); 
```

然后使用它

```
for(auto v& : vv)
{
    v.push_back("ola");
} 
```

等等

# oop - 您将如何通过从现实世界到编程表示的简洁示例向非程序员解释类和对象的概念？

> ID：14690456
> 
> 赞同：0
> 
> 时间：2013-02-04T15:57:17.903
> 
> 标签：oop, class, object

在面试过程中，数据的状态和行为等答案分别是数据成员和方法。这种答案将不受欢迎！那么无论如何我可以用非常简单的方式和吸引人的方式向人们解释。！！！??

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T17:56:02.320

这是另一个来自 Java 的 Dummies [Link](http://www.dummies.com/how-to/content/refining-your-understanding-of-classes-and-objects.html)示例：

“花点时间环顾一下你的房间。（如果你现在不在房间里，那就假装吧。）

房间里有几把椅子，每把椅子都是一个物体。这些对象中的每一个都是被称为椅子类的空灵事物的一个示例。这就是它的工作原理——课堂是椅子的概念，每把椅子都是一个物体。

一个类并不完全是事物的集合。相反，类是某种事物背后的想法。当我们谈论你房间里的椅子类别时，我们谈论的是每把椅子都有腿、座位、颜色等等的事实。房间里不同椅子的颜色可能不同，但这没关系。当你谈论一类事物时，你关注的是每一种事物所拥有的属性。

将对象视为类的具体实例是有意义的。事实上，官方的用语与这种想法是一致的。如果你编写一个 Java 程序，在其中定义了一个 Chair 类，那么每把实际的椅子（你坐的椅子、你旁边的空椅子等等）都被称为 Chair 类的一个实例。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T16:00:47.827

我使用了一个关于出租车的练习作为 OOP 和类的一个很好的例子。你有一个 Taxi 接口，它有一些数据对象来包含它的乘客和它的目的地，也许还有一些出租车司机的帮助方法（getter/setter 目的地，计算 $）。然后，您可以使用不同类别的出租车来实现它以提供不同的功能。

*   一辆小出租车有一个阵列，只能容纳 X 人和只有 1 个目的地。
*   更大的出租车有一个可以存放更多乘客的清单
*   公共汽车可以容纳更多的人，并且可以有多个位置。

您可以定制不同的出租车以满足您要解释的内容。您可以将它们设置为不同的颜色，以便在“初始化”出租车时添加更多属性以进行自定义，您可以使用不同的覆盖函数来决定出租车到达的下一个沿线站点（因此驾驶员知道去哪里），等等

# jquery - 如何在表单中创建动态输入？

> ID：14690459
> 
> 赞同：0
> 
> 时间：2013-02-04T15:57:27.380
> 
> 标签：jquery, forms

```
<form id="myForm">

<select name="team_home" id="team_home_0">
    <option></option>
    <option value="italy">italy</option>
    <option value="spain">spain</option>
    <option value="germany">germany</option>
    <option value="france">france</option>
    <option value="portugal">portugal</option>
    <option value="england">england</option>
</select>
<input type="text" id="result_0" />
<select name="team_visit" id="team_visit_0">
    <option></option>
    <option value="italy">italy</option>
    <option value="spain">spain</option>
    <option value="germany">germany</option>
    <option value="france">france</option>
    <option value="portugal">portugal</option>
    <option value="england">england</option>
</select>
</form> 
```

关键是得到这样的输出：

![在此处输入图像描述](../Images/f63ab508d82caa5aa8ef58ad1f0d9959.png)

每次完成一整行输入时，都应该“出现”一个新的空输入行来执行相同的过程。它永无止境（动态创造），因此团队和结果可以无限重复。

我知道我应该使用 jQuery，但我不知道该怎么做。

[小提琴](http://jsfiddle.net/6hLy9/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:46:19.907

这是一个开始。您需要对其进行增强以增加组 ID、重置输入等。

[http://api.jquery.com/clone](http://api.jquery.com/clone)

[http://jsfiddle.net/6hLy9/9](http://jsfiddle.net/6hLy9/9)

```
<div id="wrapper">
    <div id="group1" class="group">
        <select name="team_home" class="team_home" id="team_home_0">
            <option></option>
            ...
        </select>
        <input type="text" class="result" id="result_0" />
        <select name="team_visit" class="team_visit" id="team_visit_0">
            <option></option>
            ...
        </select>
    </div>
</div>

$('select, input').on('change', function () {
    var emptyEls = false;
    var thisEl = $(this).parents('.group');
    $(this).siblings().each(function () {
        if ($(this).val() == '') {
            emptyEls = true;
        }
    });
    if (emptyEls == false) {
        $(thisEl).clone().appendTo('#wrapper');
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T18:00:50.153

这是一个关于ID增量的一些开始的小提琴。您可以查看这是否有助于您入门。

[http://jsfiddle.net/kmd97/Vk5xJ/](http://jsfiddle.net/kmd97/Vk5xJ/)

```
function appendTo(index) {
     var s = a new row of inputs with dynamic index
     $("#container").append(s);
     addClick(index);
 } 
```

# matlab - 将结构转换为标量

> ID：14690460
> 
> 赞同：0
> 
> 时间：2013-02-04T15:57:29.100
> 
> 标签：matlab, structure

我有一个看起来像这样的结构：

```
Stats(1).Area = 12
Stats(2).Area = 27... 
```

等等

当我在命令窗口中执行以下操作时：

```
vec = [Stats.Area]; 
```

它工作正常，我得到一个包含`Area`结构大小的所有字段值的向量`Stats`。

但是函数内的同一行代码返回：

```
Dot name reference on non-scalar structure. 
```

知道为什么这可以从命令窗口而不是在函数中工作吗？

非常感谢！

# python - 扩展 Django 用户模型：ForeignKey 错误

> ID：14690461
> 
> 赞同：2
> 
> 时间：2013-02-04T15:57:39.137
> 
> 标签：python, django

我正在尝试扩展 Django 用户模型以包含另一个字段。如文档中所述，我对该字段进行了如下扩展：

```
 class Employee(models.Model):
    # This field is required.
    user = models.OneToOneField(User)
    manager_id = models.ForeignKey(User, related_name='employees') 
```

我希望 manager_id 能够自我引用并与用户相关（而不是定义新的经理表），并且只需在一般用户页面中显示新字段。为此，按照文档中的说明，我还添加了以下内容：

```
class EmployeeInline(admin.StackedInline):
    model = Employee
    can_delete = False
    verbose_name_plural = 'employee'

# Define a new User admin
class UserAdmin(UserAdmin):
    inlines = (EmployeeInline, )

# Re-register UserAdmin
admin.site.unregister(User)
admin.site.register(User, UserAdmin) 
```

但是，我收到以下异常：

```
<class 'dhtmlScheduler.models.Employee'> has more than 1 ForeignKey to <class 'django.contrib.auth.models.User'> 
```

任何人都可以提供任何指示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T17:25:51.457

如果您真的想`manager_id`自我参照，那么 Aamir 对您的问题的评论就是您要走的路。

如果您想`manager_id`以示例代码中的方式引用`User`模型，则需要告知`EmployeeInline`要使用哪个外键。

像这样：

```
class EmployeeInline(admin.StackedInline):
    model = Employee
    can_delete = False
    verbose_name_plural = 'employee'
    fk_name = 'manager_id' 
```

这将在他/她的管理页面上显示用户的员工。[Django 文档](https://docs.djangoproject.com/en/1.4/ref/contrib/admin/#working-with-a-model-with-two-or-more-foreign-keys-to-the-same-parent-model)有更多细节。

# r - ggplot2 叠加散点图

> ID：14690464
> 
> 赞同：0
> 
> 时间：2013-02-04T15:57:44.367
> 
> 标签：r, ggplot2

我有一个格式为的文本文件

```
Date,ufov_mean,ufov_stdev,ufov_cov,ufov_int_pl,ufov_int_min,ufov_diff,ufov_nema_int,ufov_nema_dif,cfov_mean,cfov_stdev,cfov_cov,cfov_int_pl,cfov_int_min,cfov_diff,cfov_nema_int,cfov_nema_dif
24/01/11,5187.10,110.10,2.12,8.48,-6.46,7.25,7.40,3.76,5177.55,104.03,2.01,8.68,-6.29,7.25,7.40,3.76                
26/01/11,5182.35,106.65,2.06,6.50,-6.36,7.87,6.42,4.09,5170.29,100.45,1.94,6.45,-5.42,7.54,5.91,3.92                
28/01/11,5183.88,104.99,2.03,7.31,-6.48,9.63,6.87,5.06,5178.99,101.03,1.95,6.16,-6.39,9.08,6.28,4.76                
31/01/11,5183.55,98.35,1.90,5.66,-6.30,7.92,6.00,4.12,5172.41,96.00,1.86,5.71,-5.81,7.92,5.76,4.12                
02/02/11,5183.16,104.20,2.01,6.83,-6.43,7.47,6.61,3.88,5176.24,98.74,1.91,6.06,-5.65,7.47,5.84,3.88                
03/02/11,5184.14,106.77,2.06,8.16,-5.98,7.89,6.99,4.11,5179.31,100.62,1.94,7.45,-5.89,7.89,6.62,4.11 
```

我想做的是在给定日期范围内的散点图中绘制其中几个参数。我可以很容易地绘制其中一个使用

```
qc<-data.frame(read.csv("tc_h1_qc", header=T))
qc$Date = as.Date(qc$Date, format='%d/%m/%y')
Sys.Date()
Sys.Date()-30

p <- ggplot(qc,aes(x=Date,y=cfov_cov)) + geom_point(shape=1,colour="red") + geom_line(colour="red") + theme_bw() + scale_x_date(labels = date_format("%d/%m/%y"), limits = c(Sys.Date()-30, Sys.Date())) 
```

如何覆盖其他参数，每个参数都具有不同的 geom_point 颜色并创建适当的图例（样式类似于[http://docs.ggplot2.org/0.9.3/facet_grid-27.png](http://docs.ggplot2.org/0.9.3/facet_grid-27.png)的图例虽然我看不到我如何在我的数据框结构中使用构面）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T16:24:28.993

听起来您只想在一个散点图上绘制几个变量，每个变量都用颜色编码。使用 'ggplot2' 和 'reshape2' 包很容易做到这一点。

**第 1 步**：融合数据，使所有值都在一列中。在这种情况下，我只是选择 [Date] 列（作为键）和第 4 到 7 列进行绘图，因为它们具有相似的值范围。

```
library(reshape2)    
plot_Data <- melt(qc[,c(1,4:7)], id="Date") 
```

这看起来像这样：

```
 Date     variable value
1  2011-01-24     ufov_cov  2.12
2  2011-01-26     ufov_cov  2.06
3  2011-01-28     ufov_cov  2.03
4  2011-01-31     ufov_cov  1.90
5  2011-02-02     ufov_cov  2.01
6  2011-02-03     ufov_cov  2.06
7  2011-01-24  ufov_int_pl  8.48
8  2011-01-26  ufov_int_pl  6.50
9  2011-01-28  ufov_int_pl  7.31
10 2011-01-31  ufov_int_pl  5.66
11 2011-02-02  ufov_int_pl  6.83
12 2011-02-03  ufov_int_pl  8.16
13 2011-01-24 ufov_int_min -6.46
14 2011-01-26 ufov_int_min -6.36
15 2011-01-28 ufov_int_min -6.48
16 2011-01-31 ufov_int_min -6.30
17 2011-02-02 ufov_int_min -6.43
18 2011-02-03 ufov_int_min -5.98
19 2011-01-24    ufov_diff  7.25
20 2011-01-26    ufov_diff  7.87
21 2011-01-28    ufov_diff  9.63
22 2011-01-31    ufov_diff  7.92
23 2011-02-02    ufov_diff  7.47
24 2011-02-03    ufov_diff  7.89 
```

**第 2 步**：现在，我们可以轻松地绘制数据，将 [Date] 列用作“x”值，将 [value] 列用作“y”值。我们拆分组，为它们着色，并通过将颜色指定为 来添加图例`col=variable`，如下所示：

```
library(ggplot2)
ggplot(plot_Data, aes(x=Date, y=value, col=variable)) + geom_point() 
```

您应该能够从这里进行调整以满足您的需求。

# c# - DataContext 似乎正在从数据库中提取相同记录的 2 个副本

> ID：14690468
> 
> 赞同：0
> 
> 时间：2013-02-04T15:57:52.957
> 
> 标签：c#, linq, linq-to-sql, datacontext

我有一个 DataContext 似乎有两个从数据库中提取相同记录的两个副本。数据库中只有一条此类记录。

这是执行此操作的代码：

```
dataAccessContext =
                    new DataAccessDataContext("Data Source=" + SettingsManager.OpsMgrSettings.DBDIR +
                                              ";default lock timeout=10000"); 
```

当我在调用上述代码后调试 dataAccessContext 时，我看到了一个名为 JobNumbers 的实体。在该实体内部，还有另一个名为 SafetyIssues 的实体，它有 2 条记录而不是 1 条记录。它们是完全相同的记录。数据库只显示一条记录，但有些是如何在 dataAccessContext 中两次提取相同的记录。

即使我稍后绑定到列表框，它也会在列表框中显示相同的记录两次。如果我单击一个，它们都会被选中。

这是 JobNumbers 实体的 dbml 设计（如果有帮助的话）：

```
 <Table Name="JobNumber" Member="JobNumbers">
    <Type Name="JobNumber">
      <Column Name="JobID" AutoSync="OnInsert" Type="System.Int32" DbType="Int NOT NULL" IsPrimaryKey="true" CanBeNull="false" />
      <Column Name="Jobno" Type="System.String" DbType="nVarChar(50)" CanBeNull="true" />
      <Column Name="LocnID" Type="System.String" DbType="nChar(2)" CanBeNull="true" />
      <Column Name="Date" Type="System.DateTime" DbType="DateTime" CanBeNull="true" />
      <Column Name="version" Type="System.Int32" DbType="Int NOT NULL" CanBeNull="false" />
      <Column Name="NumJobNo" Type="System.Int32" DbType="Int" CanBeNull="true" />
      <Column Name="SQ3Username" Type="System.String" DbType="nVarChar(50)" CanBeNull="true" />
      <Column Name="SQ3Done" Type="System.Boolean" DbType="Bit" CanBeNull="true" />
      <Column Name="OrigJobNo" Type="System.String" DbType="NVarChar(20)" CanBeNull="true" />
      <Column Name="Updated" Type="System.Byte" DbType="Bit" CanBeNull="true" />
      <Column Name="Modified" Type="System.Int16" DbType="tinyint" CanBeNull="false" />
      <Column Name="JobTargetSafetySubmissions" Type="System.Int32" DbType="int" CanBeNull="false" />
      <Column Name="SQ3Completed" Type="System.Int16" DbType="smallint" CanBeNull="false" />
      <Column Name="Conflict" Type="System.Boolean" DbType="bit" CanBeNull="false" />
      <Association Name="JobNumber_EAC_Personnel" Member="EAC_Personnels" ThisKey="JobID" OtherKey="JobID" Type="EAC_Personnel" />
      <Association Name="JobNumber_La_Personnel" Member="LA_Personnel" ThisKey="JobID" OtherKey="JobID" Type="La_Personnel" />
      <Association Name="JobNumber_GWD_Header2" Member="GWD_Header2s" ThisKey="JobID" OtherKey="jobid" Type="GWD_Header2" Cardinality="One" />
      <Association Name="JobNumber_MonitorInfo" Member="MonitorInfos" ThisKey="JobID" OtherKey="JobID" Type="MonitorInfo" Cardinality="One" />
      <Association Name="JobNumber_NA_Salesman" Member="NA_Salesmans" ThisKey="JobID" OtherKey="JobID" Type="NA_Salesman" Cardinality="One" />
      <Association Name="JobNumber_NA_WRdetail" Member="NA_WRdetails" ThisKey="JobID" OtherKey="JobID" Type="NA_WRdetail" Cardinality="One" />
      <Association Name="JobNumber_NA_BillingCompany" Member="NA_BillingCompanies" ThisKey="JobID" OtherKey="JobID" Type="NA_BillingCompany" Cardinality="One" />
      <Association Name="JobNumber_NA_Header" Member="NA_Headers" ThisKey="JobID" OtherKey="JobID" Type="NA_Header" Cardinality="One" />
      <Association Name="JobNumber_Subcontractor" Member="Subcontractors" ThisKey="JobID" OtherKey="JobID" Type="Subcontractor" Cardinality="One" />
      <Association Name="JobNumber_NA_Holedetail" Member="NA_Holedetails" ThisKey="JobID" OtherKey="JobID" Type="NA_Holedetail" Cardinality="One" />
      <Association Name="JobNumber_NA_WL_Company" Member="NA_WL_Companies" ThisKey="JobID" OtherKey="JobID" Type="NA_WL_Company" Cardinality="One" />
      <Association Name="JobNumber_Rpt_Detail" Member="Rpt_Details" ThisKey="JobID" OtherKey="JobID" Type="Rpt_Detail" Cardinality="One" />
      <Association Name="JobNumber_NA_RigDetail" Member="NA_RigDetails" ThisKey="JobID" OtherKey="JobID" Type="NA_RigDetail" Cardinality="One" />
      <Association Name="JobNumber_EAC_Header" Member="EAC_Headers" ThisKey="JobID" OtherKey="JobID" Type="EAC_Header" Cardinality="One" />
      <Association Name="JobNumber_SafetyIssue" Member="SafetyIssues" ThisKey="JobID" OtherKey="JobID" Type="SafetyIssue" />
      <Association Name="JobNumber_SafetyIssueTotals" Member="SafetyIssueTotals" ThisKey="JobID" OtherKey="JobID" Type="SafetyIssueTotals" Cardinality="One" />
      <Association Name="JobNumber_JobService" Member="JobServices" ThisKey="JobID" OtherKey="JobID" Type="JobService" />
      <Association Name="JobNumber_NA_InvoiceHeader" Member="NA_InvoiceHeaders" ThisKey="JobID" OtherKey="JobID" Type="NA_InvoiceHeader" />
      <Association Name="JobNumber_JobSQ" Member="JobSQs" ThisKey="JobID" OtherKey="JobID" Type="JobSQ" />
      <Association Name="JobNumber_LA_Header" Member="LA_Headers" ThisKey="JobID" OtherKey="JobID" Type="LA_Header" Cardinality="One" />
      <Association Name="JobNumber_LA_Invoice" Member="LA_Invoices" ThisKey="JobID" OtherKey="JobID" Type="LA_Invoice" />
      <Association Name="JobNumber_FE_extra" Member="FE_extras" ThisKey="JobID" OtherKey="JobID" Type="FE_extra" Cardinality="One" />
      <Association Name="JobNumber_FE_Header" Member="FE_Headers" ThisKey="JobID" OtherKey="JobID" Type="FE_Header" />
      <Association Name="JobNumber_FailEquipList" Member="FailEquipLists" ThisKey="JobID" OtherKey="JobID" Type="FailEquipList" />
      <Association Name="JobNumber_JobPricing" Member="JobPricings" ThisKey="JobID" OtherKey="JobID" Type="JobPricing" />
      <Association Name="JobNumber_Equip" Member="Equips" ThisKey="JobID" OtherKey="JobID" Type="Equip" />
      <Association Name="JobNumber_SafetyIssuesTotals" Member="SafetyIssuesTotals" ThisKey="JobID" OtherKey="JobID" Type="SafetyIssuesTotals" Cardinality="One" />
      <Association Name="JobNumber_EAC_Invoice" Member="EAC_Invoices" ThisKey="JobID" OtherKey="JobID" Type="EAC_Invoice" />
      <Association Name="JobNumber_RunningMode" Member="RunningModes" ThisKey="JobID" OtherKey="JobID" Type="RunningMode" Cardinality="One" />
      <Association Name="JobNumber_CorrectionsApplied" Member="CorrectionsApplieds" ThisKey="JobID" OtherKey="JobID" Type="CorrectionsApplied" Cardinality="One" />
      <Association Name="JobNumber_JobInvoice" Member="JobInvoices" ThisKey="JobID" OtherKey="JobID" Type="JobInvoice" />
      <Association Name="JobNumber_GWDRunSummaryData" Member="GWDRunSummaryDatas" ThisKey="JobID" OtherKey="jobid" Type="GWDRunSummaryData" Cardinality="One" />
      <Association Name="JobNumber_InvoiceReportingTable" Member="InvoiceReportingTables" ThisKey="JobID" OtherKey="JobID" Type="InvoiceReportingTable" />
      <Association Name="Location_JobNumber" Member="Location" ThisKey="LocnID" OtherKey="LocnID" Type="Location" IsForeignKey="true" />
    </Type>
    </Table> 
```

这里是 SateyIssues 实体的 dbml（如果有帮助的话）：

```
 <Table Name="SafetyIssues">
    <Type Name="SafetyIssue">
      <Column Name="JobID" Type="System.Int32" DbType="Int" CanBeNull="true" />
      <Column Name="JobSafetyNo" Type="System.String" DbType="nVarChar(50) NOT NULL" CanBeNull="false" />
      <Column Name="SafetyCategory" Type="System.Int32" DbType="Int NOT NULL" CanBeNull="false" />
      <Column Name="IssueDate" Type="System.DateTime" DbType="DateTime NOT NULL" CanBeNull="false" />
      <Column Name="CorrectiveActionRefNo" Type="System.String" DbType="nVarChar(50) NOT NULL" CanBeNull="false" />
      <Column Name="SafetyInitiative" Type="System.String" DbType="nVarChar(50) NOT NULL" CanBeNull="false" />
      <Column Name="Topic_Summary" Type="System.String" DbType="nVarChar(4000) NOT NULL" CanBeNull="false" />
      <Column Name="Feedback_FollowUp" Type="System.String" DbType="nVarChar(4000) NOT NULL" CanBeNull="false" />
      <Column Name="LinkID" Type="System.Int32" DbType="Int NOT NULL IDENTITY" IsPrimaryKey="true" IsDbGenerated="true" CanBeNull="false" />
      <Association Name="SafetyIssue_SafetyIssueEngineer" Member="SafetyIssueEngineers" ThisKey="LinkID" OtherKey="LinkID" Type="SafetyIssueEngineer" />
      <Association Name="JobNumber_SafetyIssue" Member="JobNumber" ThisKey="JobID" OtherKey="JobID" Type="JobNumber" IsForeignKey="true" />
      <Association Name="SafetyCategory_SafetyIssue" Member="SafetyCategory1" ThisKey="SafetyCategory" OtherKey="SafetyCategoryID" Type="SafetyCategory" IsForeignKey="true" />
    </Type>
  </Table> 
```

我写的dbml部分类代码：

```
 partial class SafetyIssue
    {

        partial void OnLoaded()
        {
            JobNumber.CalculateSafetyIssueTotals();  
        }

    }

    partial class SafetyIssueTotals
    {
       public void RefreshTotals(List<SafetyIssue> safetyIssues)
       {
           TotalSubmissions = safetyIssues.Count(c => c.SafetyCategory == 1);
           TotalInductions = safetyIssues.Count(c => c.SafetyCategory == 2);
           TotalSafetyMeetings = safetyIssues.Count(c => c.SafetyCategory == 3); 
           TotalToolboxTalk = safetyIssues.Count(c => c.SafetyCategory == 4);
           TotalRecognitions = safetyIssues.Count(c => c.SafetyCategory == 5);
           TotalIncidents = safetyIssues.Count(c => c.SafetyCategory == 6);
           ActualSafetySubmissions = safetyIssues.Count(c => c.JobSafetyNo.Trim() != "");
       }

    }

    partial class JobNumber:IDataErrorInfo
    {

        public void CalculateSafetyIssueTotals()
        {
            if (SafetyIssuesTotals == null)
                SafetyIssuesTotals = new SafetyIssuesTotals();

/* If I comment the part below out, it works.  Seems like if I use the SafetyIssues entity at all (in this case SafetyIssues.Count() to  assign things, the problem happens */

            SafetyIssuesTotals.TotalActualSafetySubmissions = SafetyIssues.Count;
            SafetyIssuesTotals.TotalIncidents =
                SafetyIssues.Count(s => s.SafetyCategory1 != null && s.SafetyCategory1.SafetyCategoryID == 6);
            SafetyIssuesTotals.TotalInductions =
                SafetyIssues.Count(s => s.SafetyCategory1 != null && s.SafetyCategory1.SafetyCategoryID == 2);
            SafetyIssuesTotals.TotalRecognitions =
                SafetyIssues.Count(s => s.SafetyCategory1 != null && s.SafetyCategory1.SafetyCategoryID == 5);
            SafetyIssuesTotals.TotalSafetyMeetings =
                SafetyIssues.Count(s => s.SafetyCategory1 != null && s.SafetyCategory1.SafetyCategoryID == 3);
            SafetyIssuesTotals.TotalSubmissions =
                SafetyIssues.Count(s => s.SafetyCategory1 != null && s.SafetyCategory1.SafetyCategoryID == 1);
            SafetyIssuesTotals.TotalToolboxTalk =
                SafetyIssues.Count(s => s.SafetyCategory1 != null && s.SafetyCategory1.SafetyCategoryID == 4);

    //////////////////////////////////////////////////////////////////////////////////////
        }

        public bool NoReportedSafetyIssues
        {
            get
            {
                _noReportedSafetyIssues = SafetyIssues.Count == 0;
                return _noReportedSafetyIssues;
            }
            set
            {
                _noReportedSafetyIssues = value;
                SendPropertyChanged("NoReportedSafetyIssues");
            }
        }

    } 
```

我只是不明白为什么它要提取同一记录的 2 个副本。希望大家能帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T22:23:44.510

好吧，我解决了这个问题。问题出在我的 dbml 代码中。我想我是在工作有机会完成加载之前计算我的总数，所以当我将计算移到工作完成加载之后，它起作用了。这是我更改的代码：

**前**

```
 partial class SafetyIssue
    {

        partial void OnLoaded()
        {
            JobNumber.CalculateSafetyIssueTotals();  // I needed to move this to the JobNumber partial class
        }

    }

    partial class SafetyIssueTotals
    {
       public void RefreshTotals(List<SafetyIssue> safetyIssues)
       {
           TotalSubmissions = safetyIssues.Count(c => c.SafetyCategory == 1);
           TotalInductions = safetyIssues.Count(c => c.SafetyCategory == 2);
           TotalSafetyMeetings = safetyIssues.Count(c => c.SafetyCategory == 3); 
           TotalToolboxTalk = safetyIssues.Count(c => c.SafetyCategory == 4);
           TotalRecognitions = safetyIssues.Count(c => c.SafetyCategory == 5);
           TotalIncidents = safetyIssues.Count(c => c.SafetyCategory == 6);
           ActualSafetySubmissions = safetyIssues.Count(c => c.JobSafetyNo.Trim() != "");
       }

    }

    partial class JobNumber:IDataErrorInfo
    {

        public void CalculateSafetyIssueTotals()
        {
            if (SafetyIssuesTotals == null)
                SafetyIssuesTotals = new SafetyIssuesTotals();

            SafetyIssuesTotals.TotalActualSafetySubmissions = SafetyIssues.Count;
            SafetyIssuesTotals.TotalIncidents =
                SafetyIssues.Count(s => s.SafetyCategory1 != null && s.SafetyCategory1.SafetyCategoryID == 6);
            SafetyIssuesTotals.TotalInductions =
                SafetyIssues.Count(s => s.SafetyCategory1 != null && s.SafetyCategory1.SafetyCategoryID == 2);
            SafetyIssuesTotals.TotalRecognitions =
                SafetyIssues.Count(s => s.SafetyCategory1 != null && s.SafetyCategory1.SafetyCategoryID == 5);
            SafetyIssuesTotals.TotalSafetyMeetings =
                SafetyIssues.Count(s => s.SafetyCategory1 != null && s.SafetyCategory1.SafetyCategoryID == 3);
            SafetyIssuesTotals.TotalSubmissions =
                SafetyIssues.Count(s => s.SafetyCategory1 != null && s.SafetyCategory1.SafetyCategoryID == 1);
            SafetyIssuesTotals.TotalToolboxTalk =
                SafetyIssues.Count(s => s.SafetyCategory1 != null && s.SafetyCategory1.SafetyCategoryID == 4);

        }

    } 
```

**后**

```
 partial class SafetyIssue
    {

    }

    partial class SafetyIssueTotals
    {
       public void RefreshTotals(List<SafetyIssue> safetyIssues)
       {
           TotalSubmissions = safetyIssues.Count(c => c.SafetyCategory == 1);
           TotalInductions = safetyIssues.Count(c => c.SafetyCategory == 2);
           TotalSafetyMeetings = safetyIssues.Count(c => c.SafetyCategory == 3); 
           TotalToolboxTalk = safetyIssues.Count(c => c.SafetyCategory == 4);
           TotalRecognitions = safetyIssues.Count(c => c.SafetyCategory == 5);
           TotalIncidents = safetyIssues.Count(c => c.SafetyCategory == 6);
           ActualSafetySubmissions = safetyIssues.Count(c => c.JobSafetyNo.Trim() != "");
       }

    }

    partial class JobNumber:IDataErrorInfo
    {

        partial void OnLoaded()
        {
           CalculateSafetyIssueTotals(); //moved the call to the function here. 
        }

        public void CalculateSafetyIssueTotals()
        {
            if (SafetyIssuesTotals == null)
                SafetyIssuesTotals = new SafetyIssuesTotals();

            SafetyIssuesTotals.TotalActualSafetySubmissions = SafetyIssues.Count;
            SafetyIssuesTotals.TotalIncidents =
                SafetyIssues.Count(s => s.SafetyCategory1 != null && s.SafetyCategory1.SafetyCategoryID == 6);
            SafetyIssuesTotals.TotalInductions =
                SafetyIssues.Count(s => s.SafetyCategory1 != null && s.SafetyCategory1.SafetyCategoryID == 2);
            SafetyIssuesTotals.TotalRecognitions =
                SafetyIssues.Count(s => s.SafetyCategory1 != null && s.SafetyCategory1.SafetyCategoryID == 5);
            SafetyIssuesTotals.TotalSafetyMeetings =
                SafetyIssues.Count(s => s.SafetyCategory1 != null && s.SafetyCategory1.SafetyCategoryID == 3);
            SafetyIssuesTotals.TotalSubmissions =
                SafetyIssues.Count(s => s.SafetyCategory1 != null && s.SafetyCategory1.SafetyCategoryID == 1);
            SafetyIssuesTotals.TotalToolboxTalk =
                SafetyIssues.Count(s => s.SafetyCategory1 != null && s.SafetyCategory1.SafetyCategoryID == 4);

        }

    } 
```

# android - GL_MAX_TEXTURE_SIZE 较低的 Android 设备上的纹理不好

> ID：14690473
> 
> 赞同：3
> 
> 时间：2013-02-04T15:58:01.120
> 
> 标签：android, opengl-es, textures, libgdx

我最近在几台 Android 设备上测试了我的一款游戏。在那期间，我遇到了与 Galaxy S2 的奇怪遭遇。当我启动游戏时，除了背景之外，整个游戏都运行良好。游戏的背景显示为黑色，而不是预期的纹理。在互联网上搜索时，我遇到了[这个论坛](http://www.java-gaming.org/index.php?topic=27795.0)，并意识到这是 Galaxy S2 上的一个糟糕的纹理问题，因为游戏的背景图像包含在一个单独且非常大的精灵表 (4096) 中，而其余的演员则为游戏包含在一个较小的游戏中。由此，我认为这与GL_MAX_TEXTURE_SIZE有关。

现在我的问题是：像[Google Nexus 10](http://www.google.com.pk/nexus/10/specs/)（宽度为 2560 ）这样具有大显示屏的设备是否有可能具有 2048 的 GL_MAX_TEXTURE_SIZE ？

此外，Android 设备上最常见的 GL_MAX_TEXTURE_SIZE 是什么？如果您还希望您的应用程序为具有非常大分辨率的设备提供服务，如何解决此类问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T18:45:36.833

是的，不幸的是，这是可能的。

移动设备之间可能会有所不同。OpenGL ES 2.0 规范说 GL_MAX_TEXTURE_SIZE 的最小值只有 64！因此，检查游戏中的硬件上限是一个好习惯。供应商只需要支持最低限度的规格，其余的是他们的选择。

有关 opengl ES 2.0 最低上限的一些信息，请参阅[http://www.khronos.org/opengles/sdk/docs/man/xhtml/glGet.xml](http://www.khronos.org/opengles/sdk/docs/man/xhtml/glGet.xml)。

这里： http: [//developer.apple.com/library/ios/#documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/DeterminingOpenGLESCapabilities/DeterminingOpenGLESCapabilities.html](http://developer.apple.com/library/ios/#documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/DeterminingOpenGLESCapabilities/DeterminingOpenGLESCapabilities.html) 有信息：

> PowerVR MBX 图形硬件支持最大 1024 x 1024 大小的纹理，而 PowerVR SGX 软件支持最大 2048 x 2048 的纹理；两种尺寸都大大超过了 64 x 64，这是 OpenGL ES 规范中要求的最小尺寸。如果您的应用程序的需求超过了 OpenGL ES 规范要求的最低能力，它应该查询实现以检查硬件的实际能力并优雅地失败；您可以加载较小的纹理或选择不同的渲染策略。

这是来自 iPhone……但同样的硬件也可以在 Android 设备上找到。

在 OpenGL ES 3.0 上，GL_MAX_TEXTURE_SIZE 的最小值是 2048 [http://www.khronos.org/opengles/sdk/docs/man3/xhtml/glGet.xml](http://www.khronos.org/opengles/sdk/docs/man3/xhtml/glGet.xml)

**那该怎么办？** OpenGL 提供了一个体面且统一的软件层，可用于制作您的应用程序。但是平台和硬件之间仍然存在一些差异。通常在游戏引擎中，我们检查给定的能力，然后做一些“回退”以确保它即使在最低要求下也能正常工作。你的问题没有单一的答案。这取决于问题。

对于纹理大小，我认为您可以将大纹理切割成一些较小的部分，然后使用几个矩形/四边形显示它

# c - 将节点插入双重列表时出现段错误

> ID：14690475
> 
> 赞同：0
> 
> 时间：2013-02-04T15:58:01.737
> 
> 标签：c

```
void ins_after(struct node *node, struct node *new_node)
{
    new_node -> next = node -> next; 
    node -> next = new_node; 
    new_node -> next -> prev = new_node;
    new_node -> prev = node;
} 
```

当我尝试将节点插入双重列表时，上面的代码给出了段错误。知道为什么吗？=/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T16:00:10.120

您必须`NULL`检查指针，考虑如果 位于`node`列表的开头或结尾会发生什么情况，这在通过重复追加构建列表时经常发生。

“孤独”列表项通常同时具有`prev`和`next`等于`NULL`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T16:20:47.703

当您的列表包含时处理条件

1.  什么都没有（当节点是`NULL`）
2.  只有一个节点，其中节点`prev`和`next`指向`NULL`

# mpi - 如何知道作为 MPI 中通信器一部分的处理器的所有等级？

> ID：14690481
> 
> 赞同：1
> 
> 时间：2013-02-04T15:58:23.917
> 
> 标签：mpi

无论如何，我可以通过它了解作为通信器一部分的所有进程吗？假设总共有 16 个 MPI 进程，MPI_Comm comm 有 4 个进程作为一个组。仅给定通信器 comm 我们可以知道属于通信器的所有进程的等级吗？

谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T16:53:00.157

每个通信器都有一个关联的进程组，可通过调用`MPI_COMM_GROUP`（`MPI_Comm_group`在 C 绑定中）获得。获得进程组`comm`后，可以使用`MPI_GROUP_TRANSLATE_RANKS`将组中的等级列表转换为组中`comm`的相应等级`MPI_COMM_WORLD`。必须经过翻译过程，因为在 组内`comm`，参与过程的等级从`0`到`MPI_COMM_SIZE(comm)-1`。

这是一个示例实现：

```
void print_comm_ranks(MPI_Comm comm)
{
   MPI_Group grp, world_grp;

   MPI_Comm_group(MPI_COMM_WORLD, &world_grp);
   MPI_Comm_group(comm, &grp);

   int grp_size;

   MPI_Group_size(grp, &grp_size);

   int *ranks = malloc(grp_size * sizeof(int));
   int *world_ranks = malloc(grp_size * sizeof(int));

   for (int i = 0; i < grp_size; i++)
      ranks[i] = i;

   MPI_Group_translate_ranks(grp, grp_size, ranks, world_grp, world_ranks);

   for (int i = 0; i < grp_size; i++)
      printf("comm[%d] has world rank %d\n", i, world_ranks[i]);

   free(ranks); free(world_ranks);

   MPI_Group_free(&grp);
   MPI_Group_free(&world_grp);
} 
```

这是一个示例用法：

```
int rank;
MPI_Comm comm;

MPI_Comm_rank(MPI_COMM_WORLD, &rank);
MPI_Comm_split(MPI_COMM_WORLD, rank % 2, rank, &comm);

if (rank == 0)
{
   printf("Rank 0 view:\n");
   print_comm_ranks(comm);
}
else if (rank == 1)
{
   printf("Rank 1 view:\n");
   print_comm_ranks(comm);
} 
```

和对应的输出有 7 个进程：

```
Rank 0 view:
comm[0] has world rank 0
comm[1] has world rank 2
comm[2] has world rank 4
comm[3] has world rank 6
Rank 1 view:
comm[0] has world rank 1
comm[1] has world rank 3
comm[2] has world rank 5 
```

（分裂后排名`0`和`1`最终在不同的传播者中）

Note that you can only enumerate the contents of a communicator that the current process knows about, because communicators are referred by their handles and those are local values to each process.

# windows - 在启动 Windows 服务之前更改注册表项

> ID：14690482
> 
> 赞同：0
> 
> 时间：2013-02-04T15:58:28.587
> 
> 标签：windows, service, batch-file, startup

在重新启动后启动特定的 Windows 服务之前，我必须找到一种方法来更改一些注册表项。

服务启动设置为自动，我的解决方案只需要在系统启动时运行（嗯......它也可以在手动服务启动时执行，但这不是强制性的）。

我知道可以使用批处理文件和 .reg 文件设置我的注册表项，但如果我希望在我的服务之前执行它，我想知道如何以及何时触发批处理文件。

对我来说，最简单的解决方案总是最好的，但如果没有其他选择，我可以在 .net 中写一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T16:24:12.080

您可以使用[服务依赖](http://support.microsoft.com/kb/193888)项：创建您自己的服务来做任何您想做的事情（在您的情况下操作注册表），并将目标服务的依赖项添加到您的新服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T16:06:28.147

一个简单的解决方案是将服务设置为手动，设置您的注册密钥，然后启动服务。

```
reg add HKLM\yourkeys
net start yourservice 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T19:07:33.017

我会尝试 powershell 启动脚本，它可以更改注册表项，然后启动您的服务。

[http://msdn.microsoft.com/en-us/library/windowsazure/jj130675.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/jj130675.aspx)

[http://technet.microsoft.com/en-us/library/dd315270.aspx](http://technet.microsoft.com/en-us/library/dd315270.aspx)

[http://www.computerperformance.co.uk/powershell/powershell_service_start.htm](http://www.computerperformance.co.uk/powershell/powershell_service_start.htm)

# iphone - 为什么 AVCaptureStillImageOutput ::captureStillImageAsynchronouslyFromConnection:completionHandler 永远不会被调用？

> ID：14690484
> 
> 赞同：7
> 
> 时间：2013-02-04T15:58:29.957
> 
> 标签：iphone, ios, avfoundation, capture

我尝试构建一个应用程序，它从 iPhone 相机中捕获帧并对这些帧进行一些处理。我尝试了一些在 Internet 上找到的代码，例如这里：[如何在 iOS 中不显示预览的情况下捕获图像](https://stackoverflow.com/questions/10053197/how-to-capture-image-without-displaying-preview-in-ios)

最后我得到了以下代码：

```
-(IBAction)captureNow{
    AVCaptureConnection *videoConnection = nil;
    for (AVCaptureConnection *connection in stillImageOutput.connections)
    {
        for (AVCaptureInputPort *port in [connection inputPorts])
        {
            if ([[port mediaType] isEqual:AVMediaTypeVideo] )
            {
                videoConnection = connection;
                break;
            }
        }
        if (videoConnection) { break; }
    }

    //  NSLog(@"about to request a capture from: %@", stillImageOutput);
    [stillImageOutput captureStillImageAsynchronouslyFromConnection:videoConnection completionHandler: ^(CMSampleBufferRef imageSampleBuffer, NSError *error)
     {
         CFDictionaryRef exifAttachments = CMGetAttachment( imageSampleBuffer, kCGImagePropertyExifDictionary, NULL);
         if (exifAttachments)
         {
             // Do something with the attachments.
             NSLog(@"attachements: %@", exifAttachments);
         }
         else
             NSLog(@"no attachments");

         NSData *imageData = [AVCaptureStillImageOutput jpegStillImageNSDataRepresentation:imageSampleBuffer];
         UIImage *image = [[UIImage alloc] initWithData:imageData];

         //  do the processing with the image       
         } 
```

但是，应用程序永远不会进入 captureStillImageAsynchronouslyFromConnection 方法的处理程序代码块，因此我永远不会从帧中获取图像。我是否以错误的方式做某事？感谢您的建议！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-02-11T13:28:38.953

我发现在自动引用计数模式下，指向的指针`AVCaptureSession`没有正确保留。`AVCaptureStillImageOutput`

这意味着您有两个选择：

*   [禁用自动引用计数](https://stackoverflow.com/questions/7778356/how-to-enable-disable-automatic-reference-counting "禁用自动引用计数")，或

*   保留指向您`AVCaptureSession`自己的指针（例如，通过将其分配给控制器中的强属性）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-14T12:58:10.273

您可能需要检查`NSError`*error 参数。它为您提供有关成功拍摄照片的信息。`AVFoundation`错误代码在[这里](https://developer.apple.com/library/mac/documentation/AVFoundation/Reference/AVFoundation_ErrorConstants/Reference/reference.html)。我希望这有帮助。

此外，您可能想阅读有关[此](https://stackoverflow.com/questions/12445403/avcapturestillimageoutput-never-calls-completition-handler)内容的信息，他解释说在同一位置拥有会话代码可能会导致问题。

# android - ArrayAdapter 不断引发微调器错误

> ID：14690485
> 
> 赞同：-1
> 
> 时间：2013-02-04T15:58:36.660
> 
> 标签：android, android-arrayadapter

我的代码：

```
public class SpeedZonesFragment extends Fragment implements OnItemSelectedListener {

    Spinner spinner;

... // Declaring onCreate and so on

    spinner = (Spinner) view.findViewById(R.id.chosen_zone);
    ArrayAdapter<CharSequence> adapter = new ArrayAdapter<CharSequence>(MainActivity.this, R.array.speed_zones, android.R.layout.simple_spinner_item);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner.setAdapter(adapter);
    spinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() // the program continues 
```

引发错误： `No enclosing instance of the type MainActivity is accessible in scope`

我知道它为什么这样做，但不知道如何解决它。我有`MainActivity`which 除了处理 ViewPager 的选项卡之外什么都不做。

我试过使用`.createFromResource`没有运气。

我知道解决方案可能是基本的，但经过几个小时的浏览解决方案并尝试不同的方法来实现后，`OnItemSelectedListener`我根本找不到答案。`MainActivity`对于以不同方式确定适配器范围或实现适配器（以使其正常工作） ，我缺少什么`Listener`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T15:59:41.553

而不是`MainActivity.this`，您可以`getActivity()`在您的片段中执行此操作。

# sharepoint-2010 - 基于过滤器的加入数据视图列表计数 - sharepoint 2010

> ID：14690489
> 
> 赞同：0
> 
> 时间：2013-02-04T15:58:50.283
> 
> 标签：sharepoint-2010, count, dataviewwebpart

我有一个显示一组列表项（文章）的 DataView Webpart。在显示的每个项目（文章）中，我想显示另一个列表中的项目计数器，这些项目链接到第一个列表的唯一 ID。我的第二个列表由评论组成。本质上，我希望每篇文章都有一个评论计数器。

预先感谢您的回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T17:04:43.090

这在 SharePoint 2010 中非常简单。

您必须在要保留文章的列表（例如 artiLeList ）中创建一个数字/整数类型列（例如 CommentCounter ）。您提到您的文章列表中有一个唯一的 ID。因此，当您在 CommentList 中创建项目时，您必须通过按此唯一 ID 进行过滤来增加 artilceList 的 CommentCounter。您可以通过工作流程轻松完成。

更多详情：

1.  在 articleList 中创建一个名为 CommentCounter 的列。

2.  打开 SharePoint 设计器并创建一个列表工作流。

3.  选择应在其上运行此工作流的 commentList。

4.  创建一个变量说 currentCC 并设置值，currentCC = commentCounter[articleList:id==current:id]

5.  用 currentCC 将 1 添加到一个新变量中，比如 newCC。

6.  用 newCC 更新 commentCounter。（

您现在可以轻松地在 DataView WebPart 中显示此值。

如需更多信息，请再次查询。

谢谢你。

# xcode - Xcode plist 搜索后自动跳转到顶部

> ID：14690497
> 
> 赞同：1
> 
> 时间：2013-02-04T15:59:11.057
> 
> 标签：xcode, search, plist

我`foo.plist`在 Xcode 项目中有一个文件。plist 很长。我按 command-F 并在搜索框中输入“bar”。Xcode 适时为我找到了文本“bar”。我需要将其更改为“fubar”。但是无论我接下来做什么，我都无法开始在该字段中输入内容。如果我点击我的搜索结果，Xcode 会滚动到顶部。如果我删除搜索文本，Xcode 也会跳到顶部。

有没有办法告诉它把焦点放在搜索结果上，让我用它做点什么？

我唯一知道的是将 plist 编辑为源代码。这确实有效，但它很笨重。我宁愿将其编辑为 plist。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T16:22:10.943

我也看到过这种行为，我认为 Apple 不打算让 Xcode 这样做。这是我做的解决方法：

*   按 ⌘F 开始新的搜索，然后在搜索字段中输入您的查询。
*   单击 .plist 文件正文中的任意位置。忽略 Xcode 不会选择您单击的内容，而是选择第一行（`Root`字典）并滚动到它的事实。
*   按 ⌘G 快速返回到搜索文本的第一个实例。Xcode 将正常运行，直到您执行新的搜索。

# android - videoView 进度条显示错误的时间

> ID：14690505
> 
> 赞同：0
> 
> 时间：2013-02-04T15:59:44.060
> 
> 标签：android

问题是我的视频有 8 分钟，而进度条只显示 1,20 分钟！

```
public class MainActivity extends Activity {

VideoView v;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

  v = (VideoView) findViewById(R.id.videoview);
  String url = "android.resource://"+getPackageName()+"/" + R.raw.gozosos;
  v.setVideoURI(Uri.parse(url));
  v.setMediaController(new MediaController(this));
  v.start();
  v.requestFocus();

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:07:54.573

我解决了将视频转换为 3gp 格式的问题。

# c# - 上传文件错误到 IIS7 + PHP 服务器

> ID：14690507
> 
> 赞同：0
> 
> 时间：2013-02-04T15:59:51.700
> 
> 标签：c#, php, iis-7, webclient

我在带有 PHP 5.4 的 Windows Server 2008 R2 上运行 IIS7。我创建了一个带有 SSL 加密的网站，其中包含上传和下载文件的 PHP 脚本。我还使用 Visual Studio 2012 (C#) 创建了一个客户端应用程序，该应用程序使用 WebClient 对象来执行上传/下载。下载工作完美。但是，当我尝试上传文件（使用 WebClient）时，会发生 WebException：

```
Message: The remote server returned an error: (500) Internal Server Error.
Status: System.Net.WebExceptionStatus.ProtocolError
InnerException: null; 
```

PHP上传脚本目前是空白的（文件要上传到服务器的临时目录，然后自动删除）。我应该补充一点，我能够在我的浏览器中运行 PHP 脚本而不会出现任何错误（即不上传任何内容）。一开始我以为可能是IIS服务账号没有访问临时目录的权限，但是添加显式权限并没有解决问题。有任何想法吗？

我的 C# 代码如下：

```
public static void UploadFile(Uri uri)
{
    try
    {
        using (WebClient client = new WebClient())
        {
            // Ignore SSL warnings due to unsigned certificate.
            ServicePointManager.ServerCertificateValidationCallback = new RemoteCertificateValidationCallback(delegate { return true; });

            client.Credentials = CredentialCache.DefaultNetworkCredentials;

            // Get a path/name of a new temporary file.
            String tempFile = Path.GetTempFileName();

            // Create a 1KB temporary file.
            using (var fileStream = new FileStream(tempFile, FileMode.Create, FileAccess.Write))
            {
                fileStream.SetLength(1024);

            }

            // Upload the file to the server.
            client.UploadFile(uri, tempFile);

            // Delete temporary file.
            File.Delete(tempFile);

        }

    }
    catch (WebException ex)
    {
        MessageBox.Show(ex.ToString());

    }

} 
```

**更新 1 - IIS 日志文件**

```
2013-02-04 17:05:05 155.14.123.53 POST /Archive/uploadTest.php - 443 - 155.14.123.208 - 401 2 5 0
2013-02-04 17:05:05 155.14.123.53 POST /Archive/uploadTest.php - 443 HYPER\JOHNSD 155.14.123.208 - 500 0 0 15 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T17:35:18.950

哦，男孩……我真的觉得自己很愚蠢。这**是**临时文件夹的权限问题。我确实将 IIS 服务帐户添加到临时文件夹的安全设置中，但我忘记添加权限。=P

# berkeley-db-je - 只有内存才有可能？

> ID：14690511
> 
> 赞同：1
> 
> 时间：2013-02-04T16:00:00.607
> 
> 标签：berkeley-db-je

Oracle Berkeley Java 版是否总是需要一个文件路径来存储数据？我是否总是必须在文件系统上设置环境主页？没有“内存”只能存储吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-03T09:26:01.773

Berkeley DB Java 版中只能进行“内存中”存储。需要使用“je.log.memOnly”参数设置为“true”来创建环境。此参数必须在创建 EnvironmentConfig 之前设置，因为它是不可变的。

```
Properties properties = new Properties();
// sets the DB to work "In Memory"
properties.put(EnvironmentConfig.LOG_MEM_ONLY, "true");
// create an enviroment configuration object with the immutable parameter   
EnvironmentConfig configuration = new EnvironmentConfig(properties);
File envHome = new File("/db_location");
// create the environment
persistEnvironment = new Environment(envHome, configuration); 
```

必须指定环境目录，但它不需要存在。

“je.log.memOnly”参数的描述可以在 EnvironmentConfig Javadoc 的“LOG_MEM_ONLY”下找到：

[EnvironmentConfig 类 Javadoc](http://docs.oracle.com/cd/E17277_02/html/java/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-24T07:55:50.563

为什么需要用于内存存储的数据库？如果您不需要持久数据，您可以切换到 Java 拥有的任何其他数据结构或创建自己的类。

# javascript - 用AngularJS中的只读文本替换输入字段

> ID：14690512
> 
> 赞同：3
> 
> 时间：2013-02-04T16:00:02.160
> 
> 标签：javascript, html, angularjs

我目前设置了一些 jQuery 来从视图中删除输入字段并将输入字段的值作为纯文本写入范围内，但是我想知道 AngularJS 将如何处理这个问题。该事件在提交表单时发生，该部分也已通过 ajax 完成。这不仅仅是一个输入，而是所有输入都在表单上，​​因此您可以看到刚刚提交的结果。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-04T17:51:15.370

在每个输入字段及其相关文本等效项上使用[ng-show和/或 ng-hide。](http://docs.angularjs.org/api/ng.directive%3angShow)

当你提交表单时，切换一些 $scope 属性：

```
<input type="text" ... ng-model='text1' ng-show="editMode">
<span ng-hide="editMode">{{text1}}</span> 
```

在您的控制器中，将 editMode 初始化为 true。在您的提交函数中，将其设置为 false。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-04T16:28:04.900

尝试在调用 .js 函数的 html 中添加任何这些函数

```
 <script>
    $(function() {

 $('#fieldName').attr("readonly","readonly");

 });
</script> 
```

或者

```
 <script>
    $(function() {

 $('#fieldName').attr("readonly", true);

 });
</script> 
```

`#fieldName`输入字段的 id 在哪里。

# c - argv[0] 通过 linux 内核更改阻塞或日志记录

> ID：14690514
> 
> 赞同：3
> 
> 时间：2013-02-04T16:00:08.053
> 
> 标签：c, linux, linux-kernel, kernel

是否可以在 linux 中阻止覆盖 argv[0] 变量的可能性，例如 strcpy(argv[0], "test", strlen(argv[0]))？我想阻止或至少记录此更改。

PS 我急于改变内核，只是帮助我在内核源代码中找到我可以“捕捉”这个变化的调用或函数。我注意到虽然 argv[0] 发生了变化，但 /proc/_pid_cmdline 的内容也发生了变化，我尝试在 fs/proc/base.c 中将一个简单的日志记录到 proc_pid_cmdline() 但它并没有起作用我想了。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T16:18:00.290

通常，解决方案是将包含参数的内存页面设置为只读，这会在尝试更改内容时导致内存访问冲突。通过修改 C 运行时存根或 Linux 内核，人们可以抓住它并决定之后要做什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T16:16:33.100

只“修复”内核不暴露`argv`via会更容易/更好`/proc/$pid/cmdline`；可以说，这实际上是一个危险的安全漏洞，暴露了属于该进程的私有内存。例如，这是一个愚蠢的例子，但是一个符合标准的程序可以在使用完参数后将密码、加密密钥等存储在其参数字符串先前占用的空间中。

如果您确实想允许但将更改记录到`cmdline`，那将变得更加困难。您必须将数据安排在初始只读页面中，并捕获对其的写入，允许写入但在发生写入尝试时记录更改。我认为这将非常脆弱且难以维护。

# java - Android MotionEvent onTouch 即使我的手指还在一点上也会跳

> ID：14690516
> 
> 赞同：-1
> 
> 时间：2013-02-04T16:00:17.310
> 
> 标签：java, android, device, ontouchlistener

最近我尝试在视图上使用 ontouch 事件，我意识到即使我的手指静止，X 轴也会随机跳跃超过 5 或 10 像素，是硬件问题吗？我读到 ontouch 移动事件是不精确的，然后我想知道我怎样才能做到精确。

```
case MotionEvent.ACTION_DOWN:

    lastmovex = (int) event.getX();
    lastmovey = (int) event.getY();

    break;

case MotionEvent.ACTION_MOVE:

    int x = (int) event.getX(pointerindex) - lastmovex;
    int y = (int) event.getY(pointerindex) - lastmovey;
    Log.d(TAG,"move x="+x+" y="+y);
    break; 
```

这告诉我（手指仍然在一点）：

```
move x=0 y=0
move x=-2 y=0
move x=0 y=0
move x=1 y=0
move x=-5 y=0
move x=3 y=0
move x=1 y=0
move x=0 y=0 
```

那么，我怎样才能获得更高的精度，或者我的设备是否有这个问题？谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T16:16:51.427

```
int x = (int) (event.getX(pointerindex) * event.getXPrecision()  - lastmovex);
int y = (int) (event.getY(pointerindex) * event.getXPrecision()  - lastmovey); 
```

试着用这个来衡量？

# android - Android 中始终可见的视图

> ID：14690517
> 
> 赞同：2
> 
> 时间：2013-02-04T16:00:17.770
> 
> 标签：android

在 iOS 中，我们可以将子视图添加到 UINavigationController 视图，该视图将始终在应用程序中保持可见，并且在推送/弹出视图时不会与视图一起滑动。

我试图在 Android 中完成同样的事情，但看不到这样做的方法。我已经看到了诸如将视图添加到每个活动的解决方案，但这并没有给我想要的结果。

我要做的是为页脚添加一个图像，该图像始终位于应用程序的底部，并且在转换时不会随活动滑动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T16:04:04.327

现代 Android 导航方法基于在`Fragments`单个主机内部使用`Activity`。这使您可以将`Activity`用作多个`Fragments`. 通常`Fragments`会占用所有`Activity`空间，但在您的情况下，您可以为在整个应用程序生命周期中应该保持可见的视图留出一些位置，并将剩余空间用作`Fragments`. 希望这个想法很清楚。

# neo4j - 使用密码删除neo4j中的所有节点和关系超出堆空间

> ID：14690522
> 
> 赞同：13
> 
> 时间：2013-02-04T16:00:34.413
> 
> 标签：neo4j, cypher

我一直在尝试按照 neo4j 谷歌组和其他在线资源中的建议运行此查询：

START n = node(*) MATCH n-[r?]-() WHERE ID(n)>0 DELETE n, r;

为了删除测试之间的所有节点和关系。当我从控制台执行此操作时，我用完了 java 堆空间。当我从 python 执行此操作时（使用新出现的 graph_db.clear()，它使用相同的查询），我得到一个“SystemError：None”，我认为这是相同的 java 堆空间错误。我有一个包含 500k 个节点、只有 5k 个关系和 7M 个属性的数据库。我正在使用 neo4j-1.8.1 的 Mac 笔记本电脑 (10.6.8) 上运行 8GB RAM。我想我有点惊讶删除节点（基本上没有关系，所以非常小的子图）会超过 java 堆空间，但我对 neo4j 的工作原理非常天真。任何有关如何前进的建议表示赞赏。我确实知道数据目录中的 rm -rf 并从头开始会起作用，但我认为可能有一个不那么激烈的解决方案。

[交叉发布到 neo4j 谷歌群组]

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-04T16:50:25.343

上面的 cypher 语句导致所有节点（除了 ID 为 0 的根节点）在一个事务中在删除之前被实例化。当使用 500k 个节点时，这会占用太多内存。

尝试将要删除的节点数量限制在 10k-50k 左右，例如：

```
START n = node(*) 
MATCH n-[r?]-() 
WHERE (ID(n)>0 AND ID(n)<10000) 
DELETE n, r;

START n = node(*) 
MATCH n-[r?]-() 
WHERE (ID(n)>0 AND ID(n)<20000) 
DELETE n, r; 
```

等等

但是，删除整个数据库目录并没有错，这是一种很好的做法。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-05-28T13:40:07.257

根据 neo4j 文档，删除图形是通过以下方式完成的：

```
MATCH (n)
OPTIONAL MATCH (n)-[r]-()
DELETE n,r; 
```

为避免 java 堆空间错误，我将此代码与 LIMIT 结合使用：

```
MATCH (n)
OPTIONAL MATCH (n)-[r]-()
WITH n,r LIMIT 100000 DELETE n,r; 
```

它可以减少节点数量，最终让我们使用第一个、推荐的和更通用的代码。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-09-17T05:33:49.787

问号不再起作用。使用可选匹配..下面应该工作。

```
 START n = node(*) 
               OPTIONAL MATCH n-[r]-() 
               WHERE (ID(n)>0 AND ID(n)<10000) 
               DELETE n, r; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-04-22T02:18:25.070

从 Neo4j 2.3.3 开始，引入了一种删除节点和关系的新方法。请参阅[2.3.3 文档](http://neo4j.com/docs/2.3.3/query-delete.html)。

例如，您可以这样做：

```
MATCH(n) DETACH DELETE n; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-08-01T10:30:44.820

我在 Neo4J 知识库 [1] 中找到了更好的解决方案：

```
CALL apoc.periodic.iterate(
    "MATCH (n) RETURN n",
    "DETACH DELETE n",
    {batchSize:1000}
)
YIELD batches, total RETURN batches, total 
```

[1] - [https://neo4j.com/developer/kb/large-delete-transaction-best-practices-in-neo4j/](https://neo4j.com/developer/kb/large-delete-transaction-best-practices-in-neo4j/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-07T07:50:25.453

您可以增加`neo4j`属性中的堆空间并启用 gc 日志并观察堆空间的上升（如果它真的接近上限）。页面缓存大小需要根据您的初始大小减少或增加。...减少/增加它并检查对加载时间的影响。 `neo4j`是否需要内存...需要尽可能大的堆大小。

# jquery - markItUp bbcode 编辑器，预览不渲染

> ID：14690523
> 
> 赞同：0
> 
> 时间：2013-02-04T16:00:43.367
> 
> 标签：jquery, jquery-plugins

我正在使用 MarkitUp bbcode 编辑器，但我不知道如何使用预览系统。当我在编辑器上写作时，我想显示像 stackoverflow 显示的预览。

这是 MarkitUp 的链接：http: [//markitup.jaysalvat.com/documentation/](http://markitup.jaysalvat.com/documentation/)

这是我尝试过的：

```
var mySettings = {
    onShiftEnter:   {keepDefault:false, replaceWith:'<br />\n'},
    onCtrlEnter:    {keepDefault:false, openWith:'\n<p>', closeWith:'</p>'},
    onTab:          {keepDefault:false, replaceWith:'    '},
    markupSet:  [   
        {name:'Bold', key:'B', openWith:'(!(<strong>|!|<b>)!)', closeWith:'(!(</strong>|!|</b>)!)' },
        {name:'Italic', key:'I', openWith:'(!(<em>|!|<i>)!)', closeWith:'(!(</em>|!|</i>)!)'  },
        {name:'Stroke through', key:'S', openWith:'<del>', closeWith:'</del>' },
        {separator:'---------------' },
        {name:'Bulleted List', openWith:'    <li>', closeWith:'</li>', multiline:true, openBlockWith:'<ul>\n', closeBlockWith:'\n</ul>'},
        {name:'Numeric List', openWith:'    <li>', closeWith:'</li>', multiline:true, openBlockWith:'<ol>\n', closeBlockWith:'\n</ol>'},
        {separator:'---------------' },
        {name:'Picture', key:'P', replaceWith:'<img src="[![Source:!:http://]!]" alt="[![Alternative text]!]" />' },
        {name:'Link', key:'L', openWith:'<a href="[![Link:!:http://]!]"(!( title="[![Title]!]")!)>', closeWith:'</a>', placeHolder:'Your text to link...' },
        {separator:'---------------' },
        {name:'Clean', className:'clean', replaceWith:function(markitup) { return markitup.selection.replace(/<(.*?)>/g, "") } },       
        {name:'Preview', className:'preview',  call:'preview', previewPosition: 'after'}
    ]
} 
```

预览设置在底部，但不起作用;-(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-28T20:30:52.967

我认为您需要在 mySettings 变量中设置 previewParserPath 。我相信默认是：previewParserPath: "~/sets/bbcode/preview.php",

# java - 与 jboss 轮询

> ID：14690535
> 
> 赞同：-1
> 
> 时间：2013-02-04T16:01:33.093
> 
> 标签：java, jboss, polling

我想在 JBOSS 上部署一个 Java 应用程序，该应用程序在部署后启动，每“X”秒后在文件中写入一个文本行，并在 JBOSS 停止时停止。

我知道如何创建一个可运行的 jar，但我不知道如何在 jboss 中创建一个 war 文件。

```
while(true){
    count ++;
    System.out.println("Hello - " + count);
    Thread.sleep(this.properties.getSleep_time() *1000);
} 
```

我已经编写了一个每 10 秒轮询一次数据库表的方法，并且运行良好。我已经将它嵌入到一个 servlet 中，只是为了将它部署在 jboss 上（使用 init 方法和计时器）。除非 JBOSS 关闭，否则一切正常，因为它无法取消部署我的 servlet。可以使用 servlet 进行轮询吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T17:30:02.110

我认为您需要从[Java EE 教程](http://docs.oracle.com/javaee/6/tutorial/doc/)开始了解 Java EE（如 JBoss As）是什么。

[计时器服务](http://docs.oracle.com/javaee/6/tutorial/doc/bnboy.html)是您需要查看的部分进行大头针调度（规范在任何线程操作中放置“不应该”。（提示：如果进程持续时间可以类似于滴答时间，请使用手动触发器`@Schedule`）

您的问题确实触发了一些警报，您应该查看 Java EE 教程和其他 Java EE 文档，以评估 Java EE 是否是您的应用程序的正确解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-01T11:59:42.520

我通过在我的 servle 中插入这两种方法解决了我的问题：

```
@Override
public void contextInitialized(ServletContextEvent event) {
    // Do your job here during webapp startup.
}

@Override
public void contextDestroyed(ServletContextEvent event) {
    // Do your job here during webapp shutdown.
} 
```

因此，当**调用 contextDestroyed**时，我会停止轮询调度程序。

# c# - 易失的，互锁的：试图破坏代码

> ID：14690536
> 
> 赞同：6
> 
> 时间：2013-02-04T16:01:35.950
> 
> 标签：c#, multithreading, thread-safety, volatile

首先，我试图找出 using 是否`Interlocked`仍然需要`volatile`字段定义，这是我真正的问题。

但。由于懒得分析生成的 MSIL，我决定在实践中检查它。

我正在尝试[使用](http://msdn.microsoft.com/en-us/library/x13ttww7.aspx)[MSDN 示例，以便`volatile`](http://msdn.microsoft.com/en-us/library/x13ttww7.aspx)在代码应该在发布版本中中断并进行优化时使用。什么都没有。代码工作正常（在这种情况下 - 主线程优雅地终止），优化开启和关闭。

1.  `volatile`当我从一个线程使用`Interlocked`并从另一个没有锁的线程读取时，我是否仍然需要在字段上使用关键字？
2.  来自第一个问题的代码的简单示例在哪里`volatile`有区别？
3.  为什么当我删除`volatile`关键字并内置发布时，MSDN 示例仍然有效？

用于说明问题 1 的代码片段。

```
class Example
{
    volatile int val;

    void Do()
    {
        Task.Run(() => { while (val == 0) Console.WriteLine("running"); });

        Thread.Sleep(1000);
        Interlocked.Increment(ref val);
        Console.WriteLine("done.");
        Console.ReadLine();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T17:12:42.400

如果变量未标记为`volatile`，则读取它的代码无法知道它可能被其他线程修改。所以 JIT 编译器不会知道将值保存在寄存器中可能是不安全的。

`volatile`是告诉 JIT 编译器其他线程可以修改该值的方式。更改值时其他线程可能使用`Interlocked`的无关紧要，因为 JITer 甚至可能不知道其他代码存在！

可能是您的简单示例有效，因为 JIT 编译器可以看到所有代码。如果这两个代码位在不同的方法甚至完全不同的程序集中，情况可能会有很大不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T17:42:37.120

好吧，我设法生成了`volatile`确实有所作为`Interlocked`但无济于事的代码。您应该在没有调试器的情况下运行发布版本来测试它。

```
public class Example
{
    private volatile int val = 0;

    public static void Main()
    {
        var example = new Example();

        Task.Run(() => Interlocked.Increment(ref example.val));

        while (example.val == 0) ;
        // this never happens if val is not volatile
        Console.WriteLine("done.");
        Console.ReadLine();
    }
} 
```

如果没有更详细的信息，我将接受@JimMischel 的回答，因为它有一些解释。

更新：还发现[这篇博客文章](http://igoro.com/archive/volatile-keyword-in-c-memory-model-explained/)解释了一些细节。

# c - 如何将相同的值写入x86中的连续位置

> ID：14690537
> 
> 赞同：3
> 
> 时间：2013-02-04T16:01:38.803
> 
> 标签：c, performance, optimization, x86-64, sse

我需要使用 x86 机器内在高效地实现以下代码。有人可以提出解决方案吗？

```
uint64_t array[8];
array[0] = SOME_VALUE;
array[1] = SOME_VALUE;
array[2] = SOME_VALUE;
array[3] = SOME_VALUE;
array[4] = SOME_VALUE;
array[5] = SOME_VALUE;
array[6] = SOME_VALUE;
array[7] = SOME_VALUE; 
```

由于相同的值被写入连续的位置，如果向量/SSE 内在函数可以有效地做到这一点，我想尝试一下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T23:50:09.390

尽管我不了解向量/SSE 指令，但我发现有时查看生成的代码表明编译器知道最佳机器代码，并且您会发现它已经生成了您希望的内容。值得看看生成的代码来看看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T00:30:05.857

使用`memset`. glibc 将为您进行优化。如果你认为你可以做得更好，你应该向邮件列表提交一个补丁。

此外，“指令速度”不太可能是这里的瓶颈。这可能是内存带宽。不幸的是，除了“减少对内存的读写”之外，没有降低它的灵丹妙药。

# java - JDBC Sybase 到 MySQL 转换器

> ID：14690543
> 
> 赞同：0
> 
> 时间：2013-02-04T16:02:02.907
> 
> 标签：java, jdbc, sybase

我正在尝试将 Sybase 数据库转换为 MySQL。我在 Sybase 列中有一个空字符串。如果我在 sybase 中执行此查询：

```
Select Length(Name) From Adr; 
```

我得到结果= 0

如果我在java中执行以下操作：

```
ResultSet rs = stmt.executeQuery("Select Name From Adr")
rs.getString("Name").length(); 
```

我得到结果 1

谁能告诉我如何处理这个？

谢谢西蒙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T17:48:07.697

[Oracle 文档](http://docs.oracle.com/javase/7/docs/api/java/sql/ResultSet.html)说，结果集首先指向第一行之前。因此，您的代码需要修改为：

```
ResultSet rs = stmt.executeQuery("Select Name From Adr");
rs.next();
rs.getString("Name").length(); 
```

# javascript - 淘汰赛困难

> ID：14690548
> 
> 赞同：1
> 
> 时间：2013-02-04T16:02:10.963
> 
> 标签：javascript, knockout.js

我试图做一个例子，使用`Knockout.js`which 不起作用。我创建了一个创建对象的函数

```
var makeproduto = function (id, nome, preco, quantidade) {
    this.Id = ko.observable(id);
    this.Nome = ko.observable(nome);
    this.Preco = ko.observable(preco);
    this.Quantidade = ko.observable(quantidade);

    this.ValorTotal = ko.computed(function () { 
        return this.Quantidade() * this.Preco();
    }, this);

    return this;
}; 
```

另一个填充产品实体的函数

```
var productListTemp = function () {
    this.produtos = ko.observableArray([]);
    this.produtos.push(produto.makeproduto(1, 'Pão', 045, 100));
    this.produtos.push(produto.makeproduto(2, 'leite', 135, 100));
    this.produtos.push(produto.makeproduto(3, 'ovos', 035, 96));
    this.produtos.push(produto.makeproduto(4, 'guarana', 425, 100));
    this.produtos.push(produto.makeproduto(5, 'fanta', 425, 100));
    this.produtos.push(produto.makeproduto(6, 'coca cola', 500, 100));
    this.produtos.push(produto.makeproduto(7, 'torta pedaço', 215, 60));
    this.produtos.push(produto.makeproduto(8, 'torta inteira', 990, 10));
    this.produtos.push(produto.makeproduto(9, 'sorvete - frutale', 225, 100));
    this.produtos.push(produto.makeproduto(10, 'sorvete - magnum white / black', 500, 50));
    this.produtos.push(produto.makeproduto(11, 'sorvete - magnum gold', 600, 25));
    this.produtos.push(produto.makeproduto(12, 'bolo de cenora', 995, 100));
    return this.produtos();
}; 
```

然后`DataBind`不处理屏幕上的任何数据。

```
MountList = function () {
    var temp = productListTemp();
    this.vm = ko.observableArray(temp),
    this.quant == ko.computed(function () {
        return this.vm().length;
    }, this);
},

DatabindFunction = function () {
    ko.applyBindings(new MountList());
}; 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T16:15:39.633

您必须使用`new`关键字在`productListTemp`函数中创建对象：

```
this.produtos.push(new produto.makeproduto(1, 'Pão', 045, 100)); 
```

当您只是调用函数时，`this`指针有另一个上下文 -`window`您将所有属性添加到它而不是新对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T16:21:31.407

```
 var makeproduto = function (id, nome, preco, quantidade) {
        this.Id = ko.observable(id);
        this.Nome = ko.observable(nome);
        this.Preco = ko.observable(preco);
        this.Quantidade = ko.observable(quantidade);

        this.ValorTotal = ko.computed(function () { 
            return this.Quantidade() * this.Preco();
        }, this);
    }
        , productListTemp = function () {
        this.produtos = ko.observableArray([]);
        this.produtos.push(new makeproduto(1, 'Pão', 045, 100));
        this.produtos.push(new makeproduto(2, 'leite', 135, 100));

        return this.produtos();
    }; 
```

你也可以考虑 ko.mapping 插件，它从纯 JSON 中创建具有可观察属性的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-23T18:22:04.807

确保去掉多余的“=”

```
this.quant = ko.computed(function () {
            return this.vm().length;
        }, this); 
```

您还可以在 Knockout 3.2.0 及更高版本中使用 Pure Computed 它将提供性能和内存优势

```
this.quant = ko.pureComputed(function () {
            return this.vm().length;
        }, this); 
```

# ios - 如何在每个应用程序视图的 NavigationBar 上添加带有动态内容的标签？

> ID：14690550
> 
> 赞同：0
> 
> 时间：2013-02-04T16:02:18.677
> 
> 标签：ios, cocoa-touch, uinavigationcontroller, uinavigationbar

我有这样一个问题：我在后台线程中的应用程序每秒都在服务器上寻找新的用户消息，如果有新的传入消息 - 应用程序会通知用户。（我在应用程序委托中实现的消息查找逻辑）。我在应用程序中有 9 个视图，每个视图都有一个导航栏，我想在这个导航栏上显示一个带有新消息计数器的标签（只是一个整数计数器新的未读消息）。问题我不知道如何创建标签并将其与应用程序委托连接。这是我想要的图像： ![在此处输入图像描述](../Images/725f9b0aebbcbb1cf0b56433450cdd43.png)

在标签中有 13 条新消息给用户。这个按钮必须在所有 9 个应用程序的视图上。

首先我的想法是在 AppDelegate 文件中创建一个 UILabel，然后使用 customView 创建 UIBarButtonItem。但是如何在我的应用程序中每个视图的导航栏上添加这个按钮呢？（我在导航栏上还有其他按钮）

可能这个问题有点模糊，但我希望专家能理解它。我真的需要帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T16:37:11.387

如果我对您的问题的理解正确，一个选项是`Singleton Design Pattern`在[这里](http://www.galloway.me.uk/tutorials/singleton-classes/)查看详细信息。

因此，使用单例，您将设置一个全局实例，然后在需要时调用它。

右键单击您的代码并添加一个 Objective-c 类名称为 SingletonClass，使其成为 NSObject 的子类

下面的示例是`integer` 根据需要将其更改为 a`string`或任何类型，

在你的 SingletonClass.h n 你的 SingletonClass.h

```
#import <Foundation/Foundation.h>

@interface SingletonClass : NSObject

@property int thisIsCounter;

+ (SingletonClass *)sharedInstance;

@end 
```

在你的 SingletonClass.m

```
#import "SingletonClass.h"

@implementation SingletonClass

@synthesize thisIsCounter=_thisIsCounter;

+ (SingletonClass *)sharedInstance
{
    static SingletonClass *sharedInstance = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        sharedInstance = [[SingletonClass alloc] init];
        // Do any other initialisation stuff here
    });
    return sharedInstance;
}

- (id)init {
    if (self = [super init]) {

        // set a singleton managed object , variable in your case
        _thisIsCounter=self.thisIsCounter;

    }
    return self;
}

@end 
```

并在你的情况下将你的单例类导入你想要的类中它的所有类

```
#import "SingletonClass.h"
//in your app delegate when you fetch data increase singleton variable or decrease it if you want , basically you have a global variable that you can use in your all classes
-(IBAction)plus 
{

    SingletonClass *sharedInstance = [SingletonClass sharedInstance];
    sharedInstance.thisIsCounter =sharedInstance.thisIsCounter + 1;
} 
```

代码未经测试，根据需要对其进行改进。

**//现在看着我！！！！！**

上面将设置您的全局实例，现在每秒在您的视图控制器中调用它（这很棘手，因为您可能需要使用主线程并且它会受到 UI 事件的干扰）您需要：

[如何在 iOS 上定期更新标签（每秒）？](https://stackoverflow.com/questions/6229759/how-update-a-label-periodically-on-ios-every-second)

[UILabel 文本未更新](https://stackoverflow.com/questions/6835472/uilabel-text-not-being-updated)

```
- (void)viewDidLoad
{
    [super viewDidLoad];
NSTimer* timer = [NSTimer timerWithTimeInterval:1.0f target:self selector:@selector(updateLabel) userInfo:nil repeats:YES];
[[NSRunLoop mainRunLoop] addTimer:timer forMode:NSRunLoopCommonModes];
}
-(void) updateLabel
{
   SingletonClass *sharedInstance = [SingletonClass sharedInstance];
   self.button.text= sharedInstance.thisIsCounter;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T16:33:20.857

如果我错了，请纠正我，但我是这样理解的：

您的 AppDelegate 管理 9 个 ViewController。每个都有自己的 NavigationBar。您希望每个 NavBar 都有一个带有不同文本的 UILabel，文本来自您的 AppDelegate。

我实现这一点的想法是从 UIViewController 创建一个新的子类，我们将其命名为`MySuperViewController`：标题：

```
@interface MySuperViewController : UIViewController{
    UILabel *headerLabel;
}
@property(nonatomic, retain)UILabel *headerLabel;
@end 
```

执行：

```
@implementation MySuperViewController
@synthesize headerLabel;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
        headerLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, self.view.frame, 44)];
        headerLabel.backgroundColor = [UIColor clearColor];
        headerLabel.numberOfLines = 2;
        headerLabel.font = [UIFont boldSystemFontOfSize: 14.0f];
        headerLabel.shadowColor = [UIColor colorWithWhite:0.0 alpha:0.5];
        headerLabel.textAlignment = UITextAlignmentCenter;
        headerLabel.textColor = [UIColor whiteColor];
        headerLabel.text = @"whatever";
        self.navigationItem.titleView = label;
    }
return self;
}
@end 
```

现在你让你的 9 个视图（我希望你是 ViewControllers）从你的新类继承`MySuperViewController`：

```
#import "MySuperViewController.h"
@class MySuperViewController; 
```

`@interface YourView1 : MySuperViewController{ }` 等等...

您现在可以从您的 AppDelegate 访问您的每个 ViewControllers headerLabel 并将其文本设置为您喜欢的任何内容。

请注意，此代码未经测试，因此可能存在错误。

编辑：我刚刚看到你对图片的更新，当然你可以用你的按钮做同样的事情。

希望能帮助到你！

# c# - 我在这个我没有看到的 IL 中犯了错误吗？

> ID：14690551
> 
> 赞同：8
> 
> 时间：2013-02-04T16:02:19.737
> 
> 标签：c#, reflection.emit, il

我正在使用 编译器`System.Reflection.Emit`，并且遇到了我无法弄清楚的 JIT 限制错误。问题出现在我的函数句柄实现中。即生成代码

```
function foo() { }
f = foo;
f(); 
```

`f`由于规范超出了我的控制范围，语言是动态类型的，所以我不知道在编译时需要多少参数。为了解决这个问题，我没有发出`Ldftn`for `foo`，而是生成了一个新方法 ，`λfoo`它接受调用表达式中给出的参数数组并将它们推送到 for 的 eval 堆栈中`foo`。这在 CLR 中是否允许？

我现在得到的是“JIT 遇到内部限制”异常（或者“CLR 检测到无效程序”，如果我保存程序集并运行它而不是从内存中调用它），堆栈跟踪显示它发生在`λfoo`. 这是我正在生成的 IL。

```
.method private instance class [MylibInterop]MylibInterop.MylibValue 
        'λfoo'(class [MylibInterop]MylibInterop.MylibValue[] A_1) cil managed
{
  // Code size       90 (0x5a)
  .maxstack  10
  .locals init (int32 V_0,
           int32 V_1)
  IL_0000:  ldarg.1
  IL_0001:  call       instance int32 [mscorlib]System.Array::get_Length()
  IL_0006:  stloc.0
  IL_0007:  ldloc.0
  IL_0008:  ldc.i4     0x0
  IL_000d:  ble        IL_001d
  IL_0012:  ldstr      "Too many arguments to lambda call"
  IL_0017:  newobj     instance void [mscorlib]System.Exception::.ctor(string)
  IL_001c:  throw
  IL_001d:  ldarg.0
  IL_001e:  ldc.i4.0
  IL_001f:  stloc.1
  IL_0020:  ldloc.0
  IL_0021:  newobj     instance void [MylibInterop]MylibInterop.MylibValue::.ctor(int32)
  IL_0026:  ldloc.1
  IL_0027:  ldloc.0
  IL_0028:  bge        IL_003d
  IL_002d:  ldarg.1
  IL_002e:  ldloc.1
  IL_002f:  ldelem     [MylibInterop]MylibInterop.MylibValue
  IL_0034:  ldloc.1
  IL_0035:  ldc.i4.1
  IL_0036:  add
  IL_0037:  stloc.1
  IL_0038:  br         IL_0026
  IL_003d:  ldloc.0
  IL_003e:  stloc.1
  IL_003f:  ldloc.1
  IL_0040:  ldc.i4     0x0
  IL_0045:  bge        IL_0054
  IL_004a:  ldnull
  IL_004b:  ldloc.1
  IL_004c:  ldc.i4.1
  IL_004d:  add
  IL_004e:  stloc.1
  IL_004f:  br         IL_003f
  IL_0054:  call       instance class [MylibInterop]MylibInterop.MylibValue debug.Program::foo(class [MylibInterop]MylibInterop.MylibValue)
  IL_0059:  ret
} // end of method Program::'λfoo' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T17:08:55.820

@leppie 在评论中得到了它：堆栈需要是确定性的；它不在我生成的代码中（即使我知道它正在推送正确数量的参数）。我能够解决这个问题，因为编译器有足够的信息来展开循环（因此生成的 IL 中的常量），从而产生一个确定性堆栈。

# wpf - 将每个对象的两个成员绑定到单个 ListBox

> ID：14690552
> 
> 赞同：0
> 
> 时间：2013-02-04T16:02:30.627
> 
> 标签：wpf, binding

我有一个`ListBox`已绑定到`ObservableCollection`我的自定义租户对象的一个​​，它具有包括 startDate 和 endDate 的属性。

但是，我希望`ListBox`显示每个`ListBoxItem`表单：

```
01/01/2001 - 22/12/2012 
```

所以这是两个绑定属性和中间的一个子字符串。

如何`ItemSource`以这种方式格式化输出？我明白`DisplayMemberPath`指向我想要的属性，但我需要两个`DisplayMemberPaths`，对吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T16:10:02.977

您可以制作自定义 ItemTemplate 来实现此外观：

```
<ListBox ItemsSource="{Binding MyItems}">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <TextBlock>
                <Run Text="{Binding StartDate}"/><Run Text=" - " /><Run Text="{Binding EndDate}" />
            </TextBlock>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T16:11:09.887

`DisplayMemberPath``ItemTemplate`只是说应该只是一个 TextBlock的快捷方式，它的 Text 绑定到 DisplayMemberPath 项。

如果您希望`ItemTemplate`更详细，可以覆盖该`ItemTemplate`属性。

例如，

```
<ListBox.ItemTemplate>
    <DataTemplate>
        <TextBox>
            <TextBlock.Text>
                <MultiBinding StringFormat="{0:M/d/yy} - {1:M/d/yy}">
                    <Binding Path="StartDate " />
                    <Binding Path="EndDate" />
                 </MultiBinding>
             </TextBlock.Text>
        </TextBox>
    </DataTemplate>
</ListBox.ItemTemplate> 
```

# c# - .NET MVC 模型绑定：什么都没有发生

> ID：14690553
> 
> 赞同：0
> 
> 时间：2013-02-04T16:02:35.777
> 
> 标签：c#, .net, asp.net-mvc-3

您好，这是我第一次使用 .NET MVC 3

我有一个控制器应该更改登录用户的密码：

```
public ActionResult ChangeUserPassword(string userId)
{
    ChangePasswordModel model = new ChangePasswordModel() { Id = userId };
    return View(model);
}

[HttpPost]
public ActionResult ChangeUserPassword(ChangePasswordModel model)
{
    if (ModelState.IsValid)
    {
        // ChangePassword will throw an exception rather
        // than return false in certain failure scenarios.
        bool changePasswordSucceeded = true;
        try
        {
            changePasswordSucceeded = userDetailsService.ChangeUserPassword(model.Id, model.OldPassword, model.NewPassword);
        }
        catch (Exception)
        {
            changePasswordSucceeded = false;
        }

        if (changePasswordSucceeded)
        {
            return View("ChangePasswordSuccess");
        }
        else
        {
            ViewBag.Message = "The current password is incorrect or the new password is invalid.";
            ModelState.AddModelError("", "The current password is incorrect or the new password is invalid.");
        }
    }
    // If we got this far, something failed, redisplay form
    return View();
}

public ActionResult ChangePasswordSuccess()
{
    return View();
} 
```

视图如下：

```
@model MVCApp.Models.ChangePasswordModel

@{
    ViewBag.Title = "Change User Password";
}

<h2>Change User Password</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Change Password</legend>

        @Html.HiddenFor(model => model.Id)

        <div class="editor-label">
            @Html.LabelFor(model => model.OldPassword)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.OldPassword)
            @Html.ValidationMessageFor(model => model.OldPassword)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.NewPassword)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.NewPassword)
            @Html.ValidationMessageFor(model => model.NewPassword)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.ConfirmPassword)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.ConfirmPassword)
            @Html.ValidationMessageFor(model => model.ConfirmPassword)
        </div>

        <p>
            <input type="submit" value="Save" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

当我单击“保存”按钮时，什么也没有发生。如果我做错了什么或者如何捕捉和显示错误，你能建议我吗？

编辑：当我提交表单时，调试器没有发现任何错误

编辑：（图片因不相关而被删除）

我改变了控制器：

```
if (changePasswordSucceeded)
                {
                    return View("ChangePasswordSuccess");
                }
                else
                {
                    return View("ChangePasswordFailed");
                } 
```

但它不会将我重定向到任何地方......我真的不明白会发生什么

**编辑**：我认为模型是空的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T17:04:40.823

`model`如果您有任何模型错误，您不会在控制器操作中将您的 as 重载传递给您的视图。

```
If(ModelState.IsValid)
{
     //your code
}
else
{
    return View(model);//You did not pass this 
} 
```

同样在你看来，你从来没有`ViewBag.Message`看到你`changePasswordSucceeded`是否失败过。正如您所说，控制器没有显示任何可能失败的内容。

您应该`@ViewBag.Message`在您的视图中使用以检查是否有任何错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T16:53:51.257

如果您怀疑它可能是 Firefox 做的（该对话框弹出），请尝试使用 Chrome。在 Chrome 中导航到您尝试调试的页面，在您点击 [提交] 之前，点击 F12 以调出开发人员工具，然后切换到网络选项卡。在打开切换包到页面并点击提交之后，确保您在那里看到一个条目，它试图联系服务器。如果确实如此，您可以在服务器上的操作中调试问题，如果“网络”选项卡中没有显示任何内容，那么客户端验证可能认为它无效并阻止它提交到服务器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T16:06:47.607

在 BeginForm 中提及您的操作和控制。

```
@Html.BeginForm("action","controller", FormMethod.Post); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T17:12:25.193

删除尝试。看看有没有什么坏处。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T18:48:39.390

当我现在发现问题时，我回答了我自己的问题：代码是正确的，问题出在 Action 链接中，它没有向Controller发送正确的**UserId 。**

`ViewBag.Message = UserId`我通过传递给**View**发现了问题，所以我意识到它是空的。固定的

# javascript - Node.js Socket.io、socket.emit 不起作用

> ID：14690554
> 
> 赞同：2
> 
> 时间：2013-02-04T16:02:49.967
> 
> 标签：javascript, node.js, socket.io

我在这里很新。在这种情况下，我尝试使用 emit 函数，但没有运气:(。

服务器端：

```
socket.on('newUser', function(msg){
    ConnectedSockets ++;
    var player;
    player = new Player();

    player.CreatePlayer(msg.id, msg.name, msg.status);
        socket.id=msg.id;
        socket.name=msg.name;
        sockets[socket.id] = socket;

        for(i in sockets){
            var myVar=sockets[i].name;
            socket.emit('listing',{name: myVar} );
        }
}) ; 
```

客户端：

```
socket.on('listing', function(msg){ 
    $('#list').val($('#list').val() + "\n"+msg.name);
}) ; 
```

当我在 node.js 控制台上发送 newUser 事件时，没有消息出现在响应中。`sys.puts("socket name:"+ myVar)`如果我在 for 循环中写入，所有套接字名称都会按我的预期出现。

为什么客户端没有收到任何答案（没有错误消息或任何类型的警告）？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T10:34:00.930

有问题的线路：

```
socket.id=msg.id; 
```

在 Socket.io`socket.id`中有一个预定义的值，它不能被改变。这导致了错误。

# sml - SML `o` 运算符是否仅对单参数函数有用？

> ID：14690556
> 
> 赞同：16
> 
> 时间：2013-02-04T16:03:01.203
> 
> 标签：sml, smlnj, ml

`o`组合运算符（例如`val x = foo o bar`，where`foo`和are 两个函数）是否`bar`仅可用于单参数函数和/或具有相同数量参数的函数？如果不是，例如`foo(x,y)`用`bar(x)`.组成的语法是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-04T19:14:17.057

正如迈克尔已经说过的，是的，SML 只有单参数函数。不过，我想详细说明一下。

以下功能：

```
fun foo (x,y) = x + y 
```

有以下类型：

```
fn : int * int -> int 
```

这意味着第一个参数是两个整数的元组。因此，您可以执行以下操作：

```
(sign o foo) (4,~5) 
```

这会给你一样的`sign (foo (4,~5))`。

好的，但是这样的事情呢？

```
fun bar x y = x + y 
```

它具有以下类型：

```
fn : int -> int -> int 
```

这意味着 bar 实际上只接受一个整数，并返回一个函数。所以你不能这样做：

```
(sign o bar) 4 ~5 
```

因为 bar 返回一个函数，而 sign 需要一个整数。不过，您可以这样做：

```
(sign o bar 4) ~5 
```

因为`bar 4`是一个将数字加 4 的函数。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-04T16:07:17.333

SML 只有单参数函数；`foo(x,y)`是一个`foo`采用单个参数的函数，元组`(x, y)`。因此，不需要特殊处理，并且`bar(x)`需要返回一个适当类型的元组来组合它`foo`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-15T15:52:54.103

我见过一些标准 ML 代码（特别是 Poly/ML 代码 Isabelle/Pure），它们将额外的组合运算符放入处理这种情况的顶级环境中。例如：

```
fun (f oo g) x y = f (g x y)
fun (f ooo g) x y z = f (g x y z)
fun (f oooo g) x y z w = f (g x y z w) 
```

通常，应该谨慎使用这些东西（四个或更多的 o 有点傻），但至少有它是非常有用的`oo`。

# wpf - 重新获得对 Web 浏览器控制问题的控制

> ID：14690557
> 
> 赞同：0
> 
> 时间：2013-02-04T16:03:03.497
> 
> 标签：wpf, vb.net, webbrowser-control

我有一个 Windows 表单项目（vs2010 - vb.net）在页面加载一个 url 加载到 web 浏览器控件中。然后，用户在控件中填写大约 6 页的表单。一旦他们到达表单的末尾，他们就会单击 Windows 表单上的按钮继续。

这样做的目的如下：

```
For Each dElement As HtmlElement In iqbrowser.Document.GetElementsByTagName("p")
        If dElement.InnerText.Contains("(Saved Quotation Identifier ") Then
            rqid = dElement.InnerText.ToString
        End If
    Next 
```

但是，一旦单击按钮，就找不到任何元素？就像控制失去了焦点一样。我试过 .focus、.select、.bringtofront 但没有骰子！有人有想法么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T00:07:40.553

不用担心，问题是 html 在我忘记的框架中，这在我引用框架后立即解决了问题

# scala - 处理不可变类中的超时

> ID：14690558
> 
> 赞同：7
> 
> 时间：2013-02-04T16:03:09.900
> 
> 标签：scala, thread-safety, timeout, immutability

我想要一个线程安全（不可变）的 Scala 类来完成一项长期工作。对于某些极端情况，任务需要很长时间，所以我想实现超时。在不可变类中实现这一点的最佳方法是什么？

我的第一次尝试是使用这样的隐式参数：

```
class Worker(val input: String) {

  def start: String = {
    implicit val startTimeStamp = new TimeStamp
    doSomething1 + doSomething2
  }

  def doSomething1()(implicit startTimeStamp: TimeStamp): String = { ... }

  def doSomething2()(implicit startTimeStamp: TimeStamp): String = {
    ... 
    checkTimeout 
    ...
   }
}

class TimeStamp { val start = System.currentTimeMillis } 
```

这应该可以，但是仍然有很多带有隐式参数的样板代码。（在实际代码中，我`doSomething`在工人类中有数百个深度嵌套的函数。）在 Scala 中有没有更漂亮的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T16:24:56.260

听起来你在寻找未来。在 scala 2.9.x 中，我建议您为此使用 akka 库，从 2.10.0 开始就有这个`scala.concurrent.Future`特性。

2.10 的示例：

```
import concurrent._
import concurrent.duration._
import ExecutionContext.Implicits.global

val f = future {
  blocking {
    // long running task
  }
}

try {
  val res = Await.result(f, 100 millis)
} catch {
  case e: java.util.concurrent.TimeoutException =>
    // handle timeout
} 
```

**编辑：**`blocking`按照 Viktor Klang 的建议添加呼叫。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T16:10:04.550

使用[Hystrix](https://github.com/Netflix/Hystrix)。它是一个 Java 库，可以完全满足您的要求。与 Scala 配合得很好，并获得了很好的文档。

例子：

```
class LongOperation(...) extends HystrixCommand[Result](
  HystrixCommandProperties.Setter()
    .withExecutionIsolationThreadTimeoutInMilliseconds(60 * 1000))
{
  override protected def run: Result = {
    // your code
  }
} 
```

如何同步执行：

```
val result = new LongOperation(...).execute() 
```

# java - 使用 Hudson 时 ANT 无法正确构建 WAR？

> ID：14690562
> 
> 赞同：0
> 
> 时间：2013-02-04T16:03:25.407
> 
> 标签：java, ant, hudson

我有一个 Ant 构建的脚本，可以很好地从 Eclipse 构建一个 WAR 文件，并从命令行使用 ant。

当我尝试从 Hudson 构建 WAR 时，WAR 已组装，但某些文件不在正确的位置。

这可能是什么原因造成的？

根据我的要求，我正在使用 ANT 1.8.2 和 Hudson 3.0.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:03:25.407

对我来说，似乎有两个问题：

**1)** “basedir”需要从 Hudson 传递到我的 ANT 构建脚本。为此，我必须确保我的项目中的所有项目文件夹和文件引用都以“basedir”变量为前缀，然后我将 Hudson 配置为在其 ANT 启动配置中设置此变量：

在 Hudson 中添加以下内容：作业配置 | 构建 | 调用 ANT | 特性：

```
basedir=${WORKSPACE} 
```

**2）**如果已经存在，我需要更改我的一些 ANT“复制”任务以显式覆盖文件：

这似乎有效：

```
<copy todir="${target.war.dir}/WEB-INF/classes"> 
...
</copy> 
```

变成：

```
<copy todir="${target.war.dir}/WEB-INF/classes" failonerror="true" overwrite="true" force="true"> 
...
</copy> 
```

# javascript - 每次加载下一张图片之前，第一张图片都会变得可见

> ID：14690563
> 
> 赞同：4
> 
> 时间：2013-02-04T16:03:26.430
> 
> 标签：javascript, jquery

这是我的网站[http://www.alienchela.com/portfolio.html](http://www.alienchela.com/portfolio.html)。

首先单击任何客户端图像就可以了。

但是，如果您每次都单击**下一步按钮，则可以看到。**首先是上一张图片，然后加载下一张图片。

这是代码：

```
var ticker = $('.img_wrap');
            $('.next').click(function () {
                $('.img_panel:visible').fadeOut(1000, function() {
                        $(this).appendTo(ticker);
                        ticker.children().first().show(function(){
                            var artit = $(this).attr('title');
                            $(this).load(artit+'.txt');
                });
                    });
                $(ticker).hide().delay(1500).fadeIn(1000);
            }); 
```

我做了一个黑客。我做了一些延迟的过渡。

```
$(ticker).hide().delay(1500).fadeIn(1000); 
```

我不太擅长的是JS。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T09:06:22.873

干得好：

**分析**

*1.初始状态*

```
<div class="img_wrap">
    <div class="img_panel" title="pixi">pixi</div>
    <div class="img_panel" title="mus">mus</div>
    <div class="img_panel" title="flash">flash</div>
    <div class="img_panel" title="dir">dir</div>
    <div class="img_panel" title="rpi">rpi</div>
    <div class="img_panel" title="ac">ac</div>
    <div class="img_panel" title="css">css</div>
    <div class="img_panel" title="nagraj">nagraj</div>
</div> 
```

*2.点击“交流”*

```
<div class="img_wrap">
    <div class="img_panel" title="pixi">
        <img src="img/clients/ac/ac_top.jpg" width="1040" height="217" alt="aucourant"><img src="img/clients/ac/ac1.jpg" width="1040" height="502" alt="aucourant">
    </div>
    <div class="img_panel" title="mus">
        <img src="img/clients/ac/ac_top.jpg" width="1040" height="217" alt="aucourant"><img src="img/clients/ac/ac1.jpg" width="1040" height="502" alt="aucourant">
    </div>
    <div class="img_panel" title="flash">
        <img src="img/clients/ac/ac_top.jpg" width="1040" height="217" alt="aucourant"><img src="img/clients/ac/ac1.jpg" width="1040" height="502" alt="aucourant">
    </div>
    <div class="img_panel" title="dir">
        <img src="img/clients/ac/ac_top.jpg" width="1040" height="217" alt="aucourant"><img src="img/clients/ac/ac1.jpg" width="1040" height="502" alt="aucourant">
    </div>
    <div class="img_panel" title="rpi">
        <img src="img/clients/ac/ac_top.jpg" width="1040" height="217" alt="aucourant"><img src="img/clients/ac/ac1.jpg" width="1040" height="502" alt="aucourant">
    </div>
    <div class="img_panel" title="ac" style="display: block;">
        <img src="img/clients/ac/ac_top.jpg" width="1040" height="217" alt="aucourant"><img src="img/clients/ac/ac1.jpg" width="1040" height="502" alt="aucourant">
    </div>
    <div class="img_panel" title="css">
        <img src="img/clients/ac/ac_top.jpg" width="1040" height="217" alt="aucourant"><img src="img/clients/ac/ac1.jpg" width="1040" height="502" alt="aucourant">
    </div>
    <div class="img_panel" title="nagraj">
        <img src="img/clients/ac/ac_top.jpg" width="1040" height="217" alt="aucourant"><img src="img/clients/ac/ac1.jpg" width="1040" height="502" alt="aucourant">
    </div>
</div> 
```

**解释**

每个`img_panel`都有“AC”的标题图像。而且他们没有 CSS `display:none;`，这意味着这些 div 是可见的。执行时，

```
$('.img_panel:visible').fadeOut(1000, function() {
    $(this).appendTo(ticker);
    ticker.children().first().show(function(){
        var artit = $(this).attr('title');
        $(this).load(artit+'.txt');
}); 
```

当前项目被隐藏并显示下一个项目。在过渡期间，当前和下一个项目都将部分隐藏，并显示背景 div 中的图像。

**有问题的代码**

```
$('.work li').click(function(){
    var clientitle = $(this).attr('title');
    $('.work').fadeOut(500), $('.big_images').delay(500).fadeIn();
    $('.img_panel[title="'+clientitle+'"]').fadeIn();
    var cltxt = clientitle+'.txt'
    $('.img_panel').load(cltxt);
}); 
```

**解决方案**

```
// Only load data to active div
$('.img_panel[title="' + clientitle + '"]').load(cltxt); 
```

此外，最好这样做：

```
// Hide all divs
$('.img_panel').hide();
// Load and unhide active div
$('.img_panel[title="' + clientitle + '"]').load(cltxt).show(); 
```

* * *

**问题 2**

当您单击“AC”然后单击`Next`时，代码变为：

```
<div class="img_wrap" style="display: block;">
    <div class="img_panel" title="pixi" style="display: block;">...</div>
    <div class="img_panel" title="mus">...</div>
    <div class="img_panel" title="flash">...</div>
    <div class="img_panel" title="dir">...</div>
    <div class="img_panel" title="rpi">...</div>

    <div class="img_panel" title="css">...</div>
    <div class="img_panel" title="nagraj">...</div>
    <div class="img_panel" title="ac" style="display: none;">...</div>
</div> 
```

看，`ac`元素到最后，使得下一次迭代的顺序错误。

**解决方案**

无需重新排列`div`元素。只需使用标题数组和处理程序的索引`next`和`prev`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T20:26:31.067

建议...当您第一次访问它时，将一个类添加`active`到活动`.img_panel`中，然后使用类似这样的东西进行导航：

```
var ticker = $('.img_wrap');
$('.next').off('click').click(function () {
   ticker.fadeOut(500,function(){
   var $current = $('.img_panel.active');
   var nextIndex = ($current.index()+1)<$('.img_panel').length?$current.index()+1:0;
   var $next = $('.img_panel').eq(nextIndex);
   $current.hide().removeClass('active');
   $next.show(function(){
      var artit = $(this).attr('title');
      $(this).load(artit+'.txt',function(){
         ticker.fadeIn(500)}).addClass('active');
      });
   });             
}); 
```

对于以前的功能只需更改

```
var nextIndex = ($current.index()+1)<$('.img_panel').length?$current.index()+1:0; 
```

至

```
var nextIndex = ($current.index())>0?$current.index()-1:$('.img_panel').length-1; 
```

我认为这将完成工作和循环......（它在我测试它时做到了）只要记住`active`当没有任何活动时从每个元素中删除类......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-04T20:19:15.063

```
var ticker = $('.img_wrap');
$('.next').click(function () { //When the next button is clicked
  $('.img_panel:visible').fadeOut(1000, function() { //Fade out the current active image
    $(this).appendTo(ticker); //And move its div to the bottom of ticker
    ticker.children().first().show(function(){ //Then show the first div in ticker
      var artit = $(this).attr('title');
      $(this).load(artit+'.txt');
    });
  });
  $(ticker).hide().delay(1500).fadeIn(1000);
}); 
```

默认顺序是：pixi mus flash dir rpi ac css nagraj。

您的代码的问题在于，当页面重新加载并从菜单中选择图像时，它会将您带到那里。它假定，一旦将您带到那里，活动 div 位于顶部，而它可能位于任何位置，包括中间。

为了解决这个问题，您希望将所有 div`ticker`移到底部，以便保留 pixi mus flash dir rpi ac css nagraj 的原始顺序，但处于活动状态的应该位于顶部。

当从菜单中选择一个项目时，您的相关代码实际上就在这里：

```
$('.work li').click(function(){
  var clientitle = $(this).attr('title');
  $('.work').fadeOut(500), $('.big_images').delay(500).fadeIn();
  $('.img_panel[title="'+clientitle+'"]').fadeIn();
  var cltxt = clientitle+'.txt'
  $('.img_panel').load(cltxt);
}); 
```

这样的事情应该可以解决问题：

```
$('.work li').click(function(){
  var clientitle = $(this).attr('title');
  $('.work').fadeOut(500), $('.big_images').delay(500).fadeIn();
  $('.img_wrap').children().each(function() {
    if ($(this).attr('title') == clientitle) {
      return false;
    }
    $(this).appendTo($('.img_wrap'));
  });
  $('.img_panel[title="'+clientitle+'"]').fadeIn();
  var cltxt = clientitle+'.txt'
  $('.img_panel').load(cltxt);
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-21T12:11:42.847

您似乎错过了在代码中启动空 div 转换的事实。转换完成后，您开始将内容加载到该 div 中。

所以你应该做这样的事情：

```
var ticker = $('.img_wrap');
$('.next').click(function () {
    $('.img_panel:visible').fadeOut(1000, function(){
        $(this).appendTo(ticker);
        var placeholder = ticker.children().first();
        var artit = placeholder.attr('title');
        placeholder.load(artit+'.txt', function(){$(this).show()});
    });
}); 
```

不确定上面的代码是否会立即工作，但你明白了。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-17T06:30:07.847

它一定是错误或跨浏览器问题，因为它在 IE-8 和 mozilla 18.0.2 中运行良好。第一个图像加载仅发生在第一轮下一个按钮，之后它正确显示。此处提到的 .children() 函数中可能存在一个错误 - [JavaScript 中的 children 和 childNodes 有什么区别？](https://stackoverflow.com/questions/7935689/what-is-the-difference-between-children-and-childnodes-in-javascript)

# c# - Entity Framework 5.0 PostgreSQL (Npgsql) 默认连接工厂

> ID：14690567
> 
> 赞同：9
> 
> 时间：2013-02-04T16:03:33.080
> 
> 标签：c#, .net, database, entity-framework-5, postgresql-9.2

我试图让 EF 5.0 代码首先与 PostgreSQL（Npgsql 提供程序）一起使用。我通过 NuGet 安装了 Npgsql 2.0.12.1（尽管引用的程序集是 2.0.12.0）。我在 app.config 中声明了 Npgsql（默认连接工厂和提供程序工厂）：

```
<entityFramework>   
    <defaultConnectionFactory type="Npgsql.NpgsqlFactory, Npgsql, Version=2.0.12.0, Culture=neutral, PublicKeyToken=5d8b90d52f46fda7" />
 </entityFramework>
 <system.data>
        <DbProviderFactories>
          <add name="Npgsql Data Provider"
                invariant="Npgsql"
                description="Data Provider for PostgreSQL"
                support="FF"
                type="Npgsql.NpgsqlFactory, Npgsql, Version=2.0.12.0, Culture=neutral, PublicKeyToken=5d8b90d52f46fda7"/>
        </DbProviderFactories>
 </system.data> 
```

我有以下测试成功运行：

```
[Test]
public void DatabaseConnection_DatabaseFactoryTest()
{
    var factory = DbProviderFactories.GetFactory("Npgsql");
    var conn = factory.CreateConnection();
    conn.ConnectionString = _connectionString;
    var npg = (NpgsqlConnection)conn;
    var result = TestConnectionHelper(npg); // scalar select version(), nothing particular
    Assert.AreEqual(result, "PostgreSQL 9.2.2, compiled by Visual C++ build 1600, 64-bit");            
} 
```

这意味着至少数据库实例正在运行并且提供程序已成功配置。现在我想要的是使用从 DbContext 继承的自定义数据库上下文，它将绑定到同一个提供程序并通过连接字符串初始化：

```
public class InventoryContext : DbContext
{
    public InventoryContext(string nameOrConnectionString) : base(nameOrConnectionString)
    {
    }
    // mappings and properties, cut for conciseness
} 
```

以下测试失败：

```
[Test]
public void DatabaseConnection_DatabaseContextTest()
{
    using (var ctx = new InventoryContext(_connectionString))
    {
        //var db = ctx.Database;
        ctx.InventoryObjects.Add(_inventoryObject); // exception here
        ctx.SaveChanges();
    }
} 
```

它说

```
Failed to set Database.DefaultConnectionFactory to an instance of the 'Npgsql.NpgsqlFactory, Npgsql, Version=2.0.12.0, Culture=neutral, PublicKeyToken=5d8b90d52f46fda7' type as specified in the application configuration. See inner exception for details. 
```

内部异常是 InvalidOperationException ：

```
{"Constructor for type \"Npgsql.NpgsqlFactory\" is not found."} 
```

我猜连接字符串有问题（它不包含 Npgsql 提供程序）：

```
"Server=127.0.0.1;Port=5432;User Id=postgres;Password=p4ssw0rd;Database=InventoryDatabase;"; 
```

以编程方式解决这个问题的最优雅的方法是什么？刚刚尝试将 app.config 中的 connectionString 传递给上下文的构造函数，它可以工作。
**编辑**
上传的测试项目到 Dropbox - [VS2012 解决方案，10 mb](https://dl.dropbox.com/u/14800693/Median.Inventory.zip)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T14:07:32.487

深入挖掘问题，发现它是由 Npgsql 引用 EntityFramework 4.4.0 程序集这一事实引起的。解决如下：

1.  为测试项目添加了 EF Nuget 包（针对 FW 4.5 构建）；
2.  在 Npgsql2010 项目中手动添加了对 EntityFramework.dll 版本 5 的引用（Nuget 默认添加 4.4.0）；
3.  将 Npgsql app.config 中的程序集绑定更改为***"EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"*** ;
4.  通过将构造函数公开，修复了上述***“类型为“Npgsql.NpgsqlFactory”的构造函数未找到***错误；
5.  通过在 NpgsqlFactory 上实现 IDbConnectionFactory 接口修复了以下错误***“无法将 NpgsqlFactory 转换为 IDbConnectionFactory”***：

    使用 System.Data.Entity.Infrastructure；
    ...
    公共密封类 NpgsqlFactory : DbProviderFactory, IServiceProvider, IDbConnectionFactory
    ...
    public DbConnection CreateConnection(string nameOrConnectionString)
    {
    return new NpgsqlConnection(nameOrConnectionString);
    }
    d

现在我遇到与 EF 相关的“错误：3F000：模式“dbo”不存在”。我已经映射到 DbContext 的 OnModelCreating 中的 PostgreSQL 标准公共模式：modelBuilder.Entity().ToTable("TableName", "public") 虽然。期待解决这个问题。

# jquery - jQuery悬停效果触发其他列表项

> ID：14690571
> 
> 赞同：0
> 
> 时间：2013-02-04T16:03:47.287
> 
> 标签：jquery, jquery-animate

我为正在构建的网站的首页创建了一个菜单，该菜单有 8 个按钮，如下所示。我编写了一小段 jQuery，它会导致所有菜单项的不透明度与悬停的项目不同。这是我的代码：

HTML：

```
<div class="row-fluid" id="home_page_icons">
                <div class="span12">                    
                    <a href="<?php echo JURI::root() . 'index.php/news-events' ?>">News & Events</a>
                    <a href="<?php echo JURI::root() . 'index.php/news-events' ?>">Facilities</a>
                    <a href="<?php echo JURI::root() . 'index.php/news-events' ?>">Membership</a>
                    <a href="<?php echo JURI::root() . 'index.php/news-events' ?>">Pay As You Play</a>
                    <a href="<?php echo JURI::root() . 'index.php/news-events' ?>">Health & Fitness</a>
                    <a href="<?php echo JURI::root() . 'index.php/news-events' ?>">Exercise Classes</a>
                    <a href="<?php echo JURI::root() . 'index.php/news-events' ?>">Children's Activities</a>
                    <a class="last" href="<?php echo JURI::root() . 'index.php/news-events' ?>">Lane 9 Cafe</a>                                     
                </div>
            </div> 
```

jQuery：

```
jQuery('#home_page_icons div a').hover( function() {            
        jQuery(this).siblings().fadeTo("fast", 0.3);
        },
        function() {
            jQuery(this).siblings().fadeTo("fast", 1.0);
        }) 
```

我还创建了一个 JSFiddle 来显示我的问题：

[http://jsfiddle.net/2zeF8/](http://jsfiddle.net/2zeF8/)

当您将鼠标悬停在菜单项上时，它可以正常工作（所有其他项目都会更改不透明度），但是如果您将鼠标悬停在菜单项之间，例如在最左侧和最右侧之间，则会激活其间所有项目的动画，从而导致闪烁效果.

有没有人对我如何解决这个问题有任何想法？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T16:06:49.743

尝试这个：

```
jQuery('#home_page_icons div a').hover(function () {
    jQuery(this).siblings().stop().fadeTo("fast", 0.3);
},

function () {
    jQuery(this).siblings().stop().fadeTo("fast", 1.0);
}); 
```

**演示 - [http://jsfiddle.net/bBtZp/](http://jsfiddle.net/bBtZp/)**

我在`stop()`之前添加了一个`fadeTo()`，它将停止队列中的任何动画，然后播放当前动画。这可以消除您所说的闪烁效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T16:10:43.940

您可能想尝试使用该`on`方法

```
jQuery('#home_page_icons div').on('mouseenter','a',function () {
        jQuery(this).siblings().stop().fadeTo("fast", 0.3);
}).on('mouseleave','a',function () {
        jQuery(this).siblings().stop().fadeTo("fast", 1.0);
}) 
```

它将处理 div 上的所有悬停，并且仅在它位于锚点时才执行某些操作

[工作小提琴](http://jsfiddle.net/2zeF8/7/)

编辑：是的，您需要添加 stop() 停止方法-我现在知道您发生了什么

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T16:09:01.050

我看到的唯一问题是，如果您从一个快速移动到另一个，那么其他项目会在它们再次消失之前闪烁，这看起来有点傻。但这很容易解决。将您的淡出线更改为：

```
jQuery(this).siblings().stop().fadeTo("fast", 0.3); 
```

这将阻止任何待处理的淡入。

# c# - 根据某些参数过滤 Linq 查询

> ID：14690572
> 
> 赞同：0
> 
> 时间：2013-02-04T16:03:51.717
> 
> 标签：c#, linq, entity-framework

我有以下方法可以为我返回一些数据：

```
public List<Document> GetDocumentsList(Guid sessionID, bool includeValid, bool includeExpired, bool includeAboutToExpire)
{
   using (DB db = new DB())
   {
       // get the active documents
       var docs = db.Documents
                  .Where(d =>
                      db.EmployeeStatuses
                     .Any(s => s.EmpID == d.EmpID && s.StatusEndDate == null && s.Status == "Active")
                        );

        // how to filter the result depending on includeValid, includeExpired and includeAboutToExpired parameters?

        return docs.ToList()
    }
} 
```

这里的问题是，我想根据`bool`参数过滤结果，例如，如果`includeValid`为 true，则将包含有效文档，如果为 true，则将包含`includeExpired`过期文档等等，我可以同时拥有这三个真实的或其中一两个是真实的。我不想多次调用数据库。有没有一种逻辑可以通过一个电话来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T16:07:26.377

[LinQ to entity 推迟执行，直到结果被枚举](http://msdn.microsoft.com/en-us/library/bb738633.aspx)。因此，添加后续`.Where()`语句不会导致多次调用 db

```
var docs = db.Documents
                  .Where(d =>
                      db.EmployeeStatuses
                     .Any(s => s.EmpID == d.EmpID && s.StatusEndDate == null && s.Status == "Active")
                        );

if (includeValid)
   docs = docs.Where(x => [condition]);

//... and so on.

return docs.ToList(); // <- This is where the query is actually executed. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T16:14:37.947

您可以使用该[`PredicateBuilder`](http://www.albahari.com/nutshell/predicatebuilder.aspx)实现。使用此类，您可以在 linq 查询上应用一些过滤器。像这样的东西：

```
public IEnumerable<Document> GetDocumentsList(Guid? sessionID, bool? includeValid, bool? includeExpired, bool?  includeAboutToExpire)
{
    var query = db.Documents;

    if (sessionID.HasValue)
       query = query.And(x => x.SessionID = sessionID.Value);

    if (includeValid.HasValue && includeValid.Value)
       query = query.And(x => x.IncludeValid = includeValid.Value);

    // others parameters...

    return query.ToList();
} 
```

## PredicateBuilder 实现

```
using System;
using System.Linq;
using System.Linq.Expressions;
using System.Collections.Generic;

public static class PredicateBuilder
{
  public static Expression<Func<T, bool>> True<T> ()  { return f => true;  }
  public static Expression<Func<T, bool>> False<T> () { return f => false; }

  public static Expression<Func<T, bool>> Or<T> (this Expression<Func<T, bool>> expr1,
                                                      Expression<Func<T, bool>> expr2)
  {
    var invokedExpr = Expression.Invoke (expr2, expr1.Parameters.Cast<Expression> ());
    return Expression.Lambda<Func<T, bool>>
          (Expression.OrElse (expr1.Body, invokedExpr), expr1.Parameters);
  }

  public static Expression<Func<T, bool>> And<T> (this Expression<Func<T, bool>> expr1,
                                                       Expression<Func<T, bool>> expr2)
  {
    var invokedExpr = Expression.Invoke (expr2, expr1.Parameters.Cast<Expression> ());
    return Expression.Lambda<Func<T, bool>>
          (Expression.AndAlso (expr1.Body, invokedExpr), expr1.Parameters);
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T16:16:39.963

看起来您需要加入文档和状态。条件`(!includeValid || d.Valid)`还可以让您过滤有效文档，只有 id`includeValid`是`true`：

```
public List<Document> GetDocumentsList(Guid sessionID, 
       bool includeValid, bool includeExpired, bool includeAboutToExpire)
{
   using (DB db = new DB())
   {
       // get the active documents
       var docs = from d in db.Documents
                  join s in db.EmployeeStatuses on d.EmpID equals s.EmpID
                  where s.StatusEndDate == null &&
                        s.Status == "Active" &&
                        (!includeValid || d.Valid) &&
                        (!includeExpired || d.Expired) &&
                        (!includeAboutToExpired || d.AboutToExpired)
                  select d;

        return docs.ToList()
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T11:55:45.743

what about something like this? (I'm making assumptions on how those flags are supposed to be evaluated of course).

```
public List<Document> GetDocumentsList(Guid sessionID, bool includeValid, bool includeExpired, bool includeAboutToExpire)
{
   using (DB db = new DB())
   {
       // get the active documents
       var docs = db.Documents
                  .Where(d =>
                      db.EmployeeStatuses
                     .Any(s => s.EmpID == d.EmpID 
                               && s.StatusEndDate == null 
                               && (s.Status == "Active"
                                 || (includeValid && s.Status == "Valid")
                                 || (includeExpired && s.Status == "Expired")
                                 || (includeAboutToExpired && s.Status == "AboutToExpired") ))
                        );

        // how to filter the result depending on includeValid, includeExpired and includeAboutToExpired parameters?

        return docs.ToList()
    }
} 
```

# python - Python：maketrans/translate 相当于将 3 个字符的代码解码为 1 个字符

> ID：14690574
> 
> 赞同：0
> 
> 时间：2013-02-04T16:03:54.033
> 
> 标签：python, decoding

我需要将如下所示的字符串翻译`TAGGGC`成`fa`( `TAG->f`, `GGC->a`，其中加密的值不仅可以是字母，还可以是一些特殊字符)。我知道，`string.maketrans()`但`translate()`这些仅适用于 1-1 解码。

在这种情况下我可以使用任何其他本机 Python 模块/函数还是应该只编写自己的函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:11:22.923

你有没有尝试过：

```
mystring.replace("TAG","f").replace("GGC","a") 
```

如果有额外的限制，那么您可能需要依靠`re.sub`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T16:35:03.353

如果它比您的示例更复杂，您可以定义一个基于`re.sub`dict 的小函数作为输入。

```
In [98]: def repl(d, s):
     ...:     p = re.compile('|'.join(d))
     ...:     return p.sub(lambda m:d[m.group()], s)

In [99]: d = {'TAG':'f',
              'GGC':'a'}

In [100]: repl(d,'TAGGGC')
Out[100]: 'fa' 
```

# android - 每次都重新加载片段的 Android ActionBar

> ID：14690579
> 
> 赞同：-1
> 
> 时间：2013-02-04T16:04:14.720
> 
> 标签：android, android-actionbar

我有一个带有操作栏、选项卡和一些片段的主要活动。每次我切换标签时，都会重新创建完整的片段。在某些片段上，我有一个列表视图，其中包含从 Web 服务加载的内容，我不希望从 Web 服务中调用它...列表视图是单击列表视图，因此您可以浏览它。

片段是最好的选择，还是我需要其他东西来保持内容的活力。例如来自 iOS 的标签栏，每个视图控制器都保持活动状态。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T17:16:15.627

我不知道是否可以更改行为以使`Fragment`s 持久保存在内存中，但我确实记得在使用时需要自己做类似的事情，可以指定适配器`FragmentPagerAdapter`的最大 s 数`Fragment`在它开始破坏它们之前，它会留在内存中。但是，这是我出于特殊原因所做的一个例外情况。

正确的“Android 方式”是设计您`Fragment`的 s 和`Activity`类，以便它们能够例行地处理创建/销毁周期，在这样做时持久化和调用它们的状态。您最好不要尝试更改破坏和创建行为，而是`Fragment`使用为该目的而设计的现有生命周期方法从 s 中持久保存您的状态数据。从 Web 服务加载的数据应根据数据类型适当缓存在某处。应该意识到的是`Fragment`/`Activity`类也确实需要能够应对在设备旋转等事件期间被破坏的情况。如果设备进入睡眠状态，或者应用程序进入后台等，也会发生这种情况。因此，很难摆脱在`onDestroy()`/`onCreate()`周期之间保持状态和 Web 服务数据的需要。

# stream - 使用 Wowza 或 Red5 我将获得多少个 viwers

> ID：14690580
> 
> 赞同：1
> 
> 时间：2013-02-04T16:04:14.950
> 
> 标签：stream, red5, rtmp, wowza

如果我有 100 个向下和 10 个向上的互联网连接，并且我以 2000 kps 和 30 比特率从我的服务器流式传输一个频道，我将获得多少个 viwers？10 up 互联网连接的限制是多少？我该如何计算呢？我正在考虑使用 RTMP 流式传输谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T19:01:17.267

我猜上游除以频道流是绝对最大值，在您的情况下为 10/2 = 5 个观众。在实践中可能更少...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T04:26:55.963

您最多将获得 4 个用户。

首先，您需要先将数据流缩减到 700-800 kbps，因为 2 mbit 对于互联网来说太高了。

其次，您需要在主机上租用至少 100 mbit 连接的服务器，以将用户数提高到 100-200

# jquery - 使用 jQuery 修改单元格后刷新数据表插件内容

> ID：14690581
> 
> 赞同：1
> 
> 时间：2013-02-04T16:04:17.443
> 
> 标签：jquery, jquery-plugins, datatables

我正在使用[Datatables jQuery 插件。](http://www.datatables.net) 当我用 jQuery 修改一个单元格时，可以说是这样的：

```
$(this).html('Error!'); 
```

然后数据表似乎没有更新，因为过滤功能不适用于具有该修改单元格的那一行。

有没有办法让数据表知道这种变化，以便能够仍然使用过滤？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:20:06.063

您应该使用`fnUpdate`方法更新数据表。这是[文档中的使用示例](http://www.datatables.net/examples/api/editable.html)

# c# - 带有列表导航的 ASP.NET C# 如何在活动导航页面上设置 id="current"？

> ID：14690583
> 
> 赞同：3
> 
> 时间：2013-02-04T16:04:21.823
> 
> 标签：c#, asp.net

我仍在学习 asp.net，想知道是否有一种简单的方法可以将 id="current" 设置为导航栏，以便根据用户所在的页面突出显示该页面。我的模板设置为使用 id="current" 来更改链接的样式，并且我有 i 类来设置每个选项卡的样式。

这是我的 Site.Master 中的代码

```
<nav id="navigation" class="style-1">

<div class="left-corner"></div>
<div class="right-corner"></div>

<ul class="menu" id="responsive">

    <li><a href="home.aspx" id="current"><i class="home"></i> Home</a></li>

    <li><a href="Calendar.aspx"><i class="calendar"></i>Calendar</a></li>

    <li><a href="Bill.aspx"><i class="list"></i>Bills</a></li>

</ul>
</nav> 
```

就像我说的，我还在学习，所以我不确定将它放在 ContentPlaceHolder 中是否更好。我试图只请求 URL 并执行 if 语句，但我不确定如何设置 id=。

任何帮助都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T16:22:34.953

您应该考虑设置`class`菜单项的 ，而不是`id`以将其显示为突出显示。

你可以这样做。为您的每个链接
添加一个`id`和：`runat="server"`

```
<li><a href="home.aspx" id="HomeLink" runat="server"><i class="home"></i> Home</a></li>
<li><a href="Calendar.aspx" id="CalendarLink" runat="server"><i class="calendar"></i>Calendar</a></li>
<li><a href="Bill.aspx" id="BillLink" runat="server"><i class="list"></i>Bills</a></li> 
```

然后在您的母版页的代码隐藏中，您可以将类设置为每个导航到的类：

```
protected void Page_Load(object sender, EventArgs e)
{
    SetCurrentPage();
}

private void SetCurrentPage()
{
    var pageName = GetPageName();

    switch (pageName)
    {
        case "home.aspx":
            HomeLink.Attributes["class"] = "current";
            break;
        case "Calendar.aspx":
            CalendarLink.Attributes["class"] = "current";
            break;
        case "Bill.aspx":
            BillLink.Attributes["class"] = "current";
            break;
    }
}

private string GetPageName()
{
    return Request.Url.ToString().Split('/').Last();
} 
```

这会将与您当前页面匹配的链接类别设置为`current`. 当然，您需要在样式表中定义该类。但这应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T16:18:07.303

在控件中以编程方式设置 id 不是一个好习惯……这取决于您要如何确定“当前”或活动状态。

如果您使用的是 ASP.NET 表单，则可以考虑使用菜单 ASP.NET 控件，该控件将一个类分配给“活动”项，并且可以与 ASP.NET 站点地图配对/数据绑定。

如果您不想使用 ASP.NET 表单，您可以在 href 标记中放置函数评估，并在 ASP.NET Master Page 的代码后面声明该函数。就像是

```
<a href="home.aspx" class="<% CurrentOrNot("home") %>"> ... 
```

然后声明一个返回字符串的函数：

```
public void CurrentOrNot(string navItem)
{
    //Do evaulation on URL to determine if we're on the current one or not.
    //pseudocode: if(navItem == Current.Url) return "mycssclassthatiscurrentnav"; else "";

} 
```

在您自己动手之前检查 ASP.NET 菜单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T16:19:14.213

这可能不是最好的答案，但我最近尝试做一些类似于你正在尝试的事情。首先我设置一个变量来表示每个菜单链接的 css 类，然后我获取当前文件路径并检查它是否包含位置，然后根据页面是否为活动页面来设置 css 类。

```
 @{
            //some how find out what page we are on so we can set the active attribute
            var HomeClass = "non-active";
            var AboutClass = "non-active";

            string path = HttpContext.Current.Request.FilePath;
            if (path.Contains("Home"))
            {
                HomeClass = "active";
            }
            if (path.Contains("About"))
            {
                AboutClass = "active";
            }

    } 
```

然后对于菜单，我为类属性做了这个

```
<a href="/home" class="@HomeClass"></a>
< a href="/about" class=@AbouitClass"> </a> 
```

# javascript - 删除 div 中的 div 中的最后一个 div

> ID：14690584
> 
> 赞同：0
> 
> 时间：2013-02-04T16:04:22.247
> 
> 标签：javascript, jquery, css, ajax

我有以下结构

```
<div id="BigBox">
    <div class="SmallBox">
             <div class="ele"></div>
             <div class="ele"></div>
             <div class="ele"></div>
    </div>
    <div class="SmallBox">
             <div class="ele"></div>
             <div class="ele"></div>
             <div class="ele"></div>
    </div>
    <div class="SmallBox">
             <div class="ele"></div>
             <div class="ele"></div>
             <div class="ele"></div>
    </div>
</div> 
```

目前我`ele`用这个获取新的div：

```
setInterval(function() {
                $.ajax({
                    url: "update.html",
                    cache: false
                }).done(function( html ) {
                            $("#BigBox").html(html);
                            })
                        });
            }, 60000); 
```

此更新替换 BigBox 的所有内容并`update.html`返回

```
 <div class="SmallBox">
             <div class="ele highlight"></div>//new ele
             <div class="ele"></div>
             <div class="ele"></div>
    </div> 
```

* * *

我现在想要做的是有一种方法来告诉有多少新`ele`的进来，然后从下往上删除那个数字并从上到下推动新`ele`的，所以当新`ele`的被推到`SmallBox`只能容纳的顶部时3，那个小框中的最后一个 div 被推到下一个`SmallBox`，依此类推，直到最后一个从页面中消失的地方`SmallBox`。`ele`这是可能的还是替换整个`html`是更好的方法？

我希望这是有道理的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:13:58.327

这是获取响应中行数的代码。

```
setInterval(function() {
                $.ajax({
                    url: "update.html",
                    cache: false
                }).done(function( html ) {

                            //number of ele rows added
                            var eleCount = $('.ele', $(html)).length;

                            $("#BigBox").html(html);
                            })
                        });
            }, 60000); 
```

在删除和添加内容方面，如果您知道要删除的内容的索引，则可以使用 jquery 删除和添加元素。例如你可以这样做：

```
$('.ele:nth-child(4)', $(html)).remove(); 
```

这将从列表中删除第四个元素。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T16:22:23.113

我假设您只想保留 3 个`SmallBox`es，每个容量为 3。以下在顶部添加新元素，并在底部删除额外元素。

```
.done(function( html ) {
    var numBoxes = 3;
    var capacity = 3;

    $eles = $(html);
    $('#BigBox').find('.SmallBox').unwrap();
    $('#BigBox').prepend($eles);
    for (var i = 0; i < numBoxes; i++ ) {
        var s = i * capacity;
        $("#BigBox").find("div.ele")
                    .slice( s, s + capacity )
                    .wrapAll("<div class='SmallBox' />");
    }
    $('div.ele').not('div.SmallBox > div').remove();
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T17:51:35.717

像[这样的小提琴](http://jsfiddle.net/wT4E9/9/)？

```
// save fixed elements/data
var $bigBox = $('#BigBox'),
    $smallBox = $bigBox.children().first().clone().empty(),
    capacity = 3;

done = function(html) {
    var $newElems = $(html),
        $currentElems = $bigBox.find('.ele');

    $currentElems.unwrap().slice(-$newElems.length).remove();
    $bigBox.prepend($newElems);
    $currentElems = $bigBox.children();

    var numBoxes = Math.ceil($currentElems.length / capacity);

    for(var i = 0; i < numBoxes; i++) {
        $smallBox.clone()
          .appendTo($bigBox)
          .append($currentElems.splice(0, capacity));
    }
};

done('<div class="ele highlight">10</div>');
done('<div class="ele highlight">11</div><div class="ele highlight">12</div>'); 
```

请注意，使用此代码，您可以选择一个 smallBox 应该包含多少元素，并且可以完全自由地添加多少元素，它可以构建尽可能多的容器来包装所有`.ele`元素。

# python - 我想在重新定义的函数中阅读字典

> ID：14690586
> 
> 赞同：-1
> 
> 时间：2013-02-04T16:04:23.700
> 
> 标签：python, dictionary

我想改变我的函数读取代码的方式，这样我就可以导入一个具有更简单的托管变量的类。

我已经导入了所有要编辑的库。

```
class http_request(object):

  def __init__(self, website_address, valuedictionary):
   self.website_address = website_address
   self.valuedictionary = valuedictionary

  def get(self):
    return requests.get(website_address, params=valuedictionary)

  def post(self):
    return requests.post(website_address, data=valuedictionary)

def postContext(self):
    return requests.post(website_address, data=valuedictionary).context  
def getContext(self):
    return requests.get(website_address, params=valuedictionary).context

htay = http_request(web_add, payload)

print str(htay.postContext) 
```

我得到这个作为我的回应：“< **main** .http_request object at 0x8735cec>> 的绑定方法 http_request.get”

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T16:07:46.833

我假设您想调用该方法：

```
print str(htay.postContext())
#                         ^^ Need parenthesis to call a method 
```

当然，这可能会给您一个关于 a`global website_address not defined`或类似内容的错误，因为在方法中，您需要通过以下方式获取实例属性`self`：

```
def postContext(self):
    return requests.post(self.website_address, data=self.valuedictionary).context 
```

您还需要对其他方法进行类似的更改。

# javascript - JQuery Mobile 和 Cordova 页面模板

> ID：14690590
> 
> 赞同：3
> 
> 时间：2013-02-04T16:04:35.833
> 
> 标签：javascript, json, jquery-mobile, cordova

我的任务是为我们的中型学校董事会创建一个移动应用程序来宣传我们的学校。最初，这看起来很简单——我抓住了 Cordova 和 Eclipse，把 jQuery Mobile 库扔进去，并为我的第一所学校设置了几个页面（我认为总共 5 个）。复制/粘贴/编辑内容/更新其他 17 个链接。

然后我的老板说“用每所学校的颜色制作页面”。再次，简单易行。后来上了几节 CSS 课，一百多页都很漂亮，与学校相匹配。

然后是重磅炸弹。到目前为止，所有数据都是本地的 - .htm 文件，这些文件将与应用程序一起安装，并在用户单击它们时由应用程序加载：不需要数据连接。今天早上，有人问我是否可以在不更新应用程序的情况下即时更改信息。我傻傻地但如实地说“不”——你可以猜到下一个请求是什么。

所以，我需要一种方法来实现这一点。我现在的想法是在服务器端运行一些接收某种 id 号的东西（appdata.schoolbord.web/123），它会返回一个包含数据的 JSON 对象——可能是一个标题，一个名字页面模板（这样我可以将我的 93 页减少到只有几个），一些 CSS（只是为了停止下一个请求），然后将数据滑入模板。

有没有使用 Cordova 和 jQuery Mobile 的简单方法来做到这一点？任何方向的指针都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T16:26:13.200

这是一个简单的例子。我创建了一个 jQM 登录页面，您需要输入用户名和密码。此数据将用于检查用户名是否存在于数据库中，如果存在则返回 true，否则返回 false。我建议您创建一个更好的数据库读取逻辑，这是一个简单的解决方案，容易发生 SQL 注入，但它对您的分配很有效。

**索引.php：**

```
<!DOCTYPE html>
<html>
<head>
    <title>jQM Complex Demo</title>
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0"/>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <style>
        #login-button {
            margin-top: 30px;
        }        
    </style>
    <script src="http://www.dragan-gaic.info/js/jquery-1.8.2.min.js"></script>    
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
    <script src="js/custom.js"></script>
</head>
<body>
    <div data-role="page" id="login">
        <div data-theme="a" data-role="header">
            <h3>Login Page</h3>
        </div>

        <div data-role="content">
            <label for="username">Enter your username:</label>
            <input type="text" value="" name="username" id="username"/>
            <label for="password">Enter your password:</label>
            <input type="password" value="" name="password" id="password"/>  
            <a data-role="button" id="login-button" data-theme="b">Login</a>
        </div>

        <div data-theme="a" data-role="footer" data-position="fixed">

        </div>
    </div>
    <div data-role="page" id="index">
        <div data-theme="a" data-role="header">
            <h3></h3>
        </div>

        <div data-role="content">
            Here goes content
        </div>

        <div data-theme="a" data-role="footer" data-position="fixed">
            <h3>Page footer</h3>
        </div>
    </div>    
</body>
</html> 
```

**json.php：**

```
<?php
    $var1 = $_REQUEST['action']; // We dont need action for this tutorial, but in a complex code you need a way to determine ajax action nature
    $jsonObject = json_decode($_REQUEST['outputJSON']); // Decode JSON object into readable PHP object

    $username = $jsonObject->{'username'}; // Get username from object
    $password = $jsonObject->{'password'}; // Get password from object

    mysql_connect("localhost","root","");  // Conect to mysql, first parameter is location, second is mysql username and a third one is a mysql password
    @mysql_select_db("test") or die( "Unable to select database"); // Connect to database called test

    $query = "SELECT * FROM users WHERE user_name = '".$username."' and user_pass = '".$password."'";
    $result=mysql_query($query);
    $num = mysql_numrows($result);

    if($num != 0) {
        echo "true";
    } else {
        echo "false";        
    }
?> 
```

**自定义.js：**

```
$(document).on('pagebeforeshow', '#login', function(){ 
    $('#login-button').on('click', function(){
        if($('#username').val().length > 0 && $('#password').val().length > 0){
            userObject.username = $('#username').val(); // Put username into the object
            userObject.password = $('#password').val(); // Put password into the object
            // Convert an userObject to a JSON string representation
            var outputJSON = JSON.stringify(userObject);
            // Send data to server through ajax call
            // action is functionality we want to call and outputJSON is our data
            ajax.sendRequest({action : 'login', outputJSON : outputJSON});
        } else {
            alert('Please fill all nececery fields');
        }
    });    
});

$(document).on('pagebeforeshow', '#index', function(){ 
    if(userObject.username.length == 0){ // If username is not set (lets say after force page refresh) get us back to the login page
        $.mobile.changePage( "#login", { transition: "slide"} ); // In case result is true change page to Index  
    }
    $(this).find('[data-role="header"] h3').append('Wellcome ' + userObject.username); // Change header with wellcome msg
    //$("#index").trigger('pagecreate');
});

// This will be an ajax function set
var ajax = {
    sendRequest:function(save_data){
        $.ajax({url: 'http://localhost/JSONP_Tutorial/json.php',
            data: save_data,
            async: true,
            beforeSend: function() {
                // This callback function will trigger before data is sent
                $.mobile.showPageLoadingMsg(true); // This will show ajax spinner
            },
            complete: function() {
                // This callback function will trigger on data sent/received complete
                $.mobile.hidePageLoadingMsg(); // This will hide ajax spinner
            },
            success: function (result) {
                if(result == "true") {
                    $.mobile.changePage( "#index", { transition: "slide"} ); // In case result is true change page to Index
                } else {
                    alert('Login unsuccessful, please try again!'); // In case result is false throw an error
                }
                // This callback function will trigger on successful action
            },
            error: function (request,error) {
                // This callback function will trigger on unsuccessful action                
                alert('Network error has occurred please try again!');
            }
        });
    }
}

// We will use this object to store username and password before we serialize it and send to server. This part can be done in numerous ways but I like this approach because it is simple
var userObject = {
    username : "",
    password : ""
} 
```

如果需要，请通过我的电子邮件与我联系（您可以在 ma profile 中找到它），我将向您发送带有源代码和使用过的 sql 脚本的项目。

# api - 基于 XML API 调用创建 Guzzle 服务定义

> ID：14690593
> 
> 赞同：3
> 
> 时间：2013-02-04T16:04:47.097
> 
> 标签：api, http, httpclient, guzzle

我是 Guzzle 的新手，我正在尝试利用它的服务定义。我能够像这样对 eBay API 进行基本调用。

```
$request = $client->post('', [
        'X-EBAY-API-COMPATIBILITY-LEVEL' => '807',
        'X-EBAY-API-DEV-NAME' => 'my-dev-name',
        'X-EBAY-API-APP-NAME' => 'my-app-name',
        'X-EBAY-API-CERT-NAME' => 'my-cert-name',
        'X-EBAY-API-SITEID' => '0',
        'X-EBAY-API-CALL-NAME' => 'GeteBayOfficialTime',
    ],
    '<?xml version="1.0" encoding="utf-8"?>
    <GeteBayOfficialTimeRequest xmlns="urn:ebay:apis:eBLBaseComponents">
    <RequesterCredentials>
    <eBayAuthToken>AgAAAA**AQAAAA**</eBayAuthToken>
    </RequesterCredentials>
    </GeteBayOfficialTimeRequest>'
); 
```

下一步是将其转换为服务定义。通过阅读文档、论坛等，我能够想出这个。

```
{
    "name": "eBay example",
    "apiVersion": "2012-10-14",
    "baseUrl": "https://api.sandbox.ebay.com/ws/api.dll",
    "description": "it's the eBay API",
    "operations": {
        "GeteBayOfficialTime": {
            "httpMethod": "POST",
            "uri": "",
            "responseClass": "GeteBayOfficialTime",
            "summary": "Gets the official time according to eBay",
            "data": {
                "xmlRoot": {
                    "name": "GeteBayOfficialTime"
                }
            },
            "parameters": {
                "RequesterCredentials": {
                    "location": "xml",
                    "type": "string"
                }
            }
        }
    },
    "models": {
        "GeteBayOfficialTime": {
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "TiemStamp": {
                        "location": "xml",
                        "type": "string"
                    }
                }
            }
        }
    }
} 
```

但这是不正确的。我希望更开明的人可以帮助完成此示例以供参考。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-15T21:49:15.720

这是参数的外观：

```
 "parameters": {
            "RequesterCredentials": {
                "location": "xml",
                "type": "array",
                "items: {
                    "name" = "eBayAuthToken",
                    "type" = "string" 
                }
             }
           } 
```

这将是你的命令

```
 $command = $client->getCommand("GeteBayOfficialTime", array("RequesterCredentials" => array("AgAAAA**AQAAAA**"))); 
```

# php - 如何修复 jQuery 移动和 Codeigniter 重定向问题？

> ID：14690594
> 
> 赞同：0
> 
> 时间：2013-02-04T16:04:51.497
> 
> 标签：php, jquery, codeigniter, jquery-mobile

我正在使用 jQuery 移动框架和 php Codeigniter 框架构建一个移动站点。在网站的主页上，我要求用户在表单中选择几个选项并提交。在提交表单时，我正在检查使用 Codeigniter input->post() 方法提交的值，然后重定向到特定页面。

所以例如当前页面是

```
www.xyz.com 
```

然后在提交表单时，我被重定向到

```
www.xyz.com/list 
```

我使用的codeigniter下的重定向代码是

```
redirect(base_url()."list"); 
```

现在出现的问题是，我的重定向很好，但地址栏中的页面 URL 仍然是主页 URL。因此，如果我尝试刷新此**列表**页面，它将加载主页。这似乎是 jquery 框架 ajax 方法的一些不当行为。

任何建议如何解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T16:09:49.607

尝试以这种形式重定向：

```
redirect('controller_name/function_name'); 
```

你可以试试这个表格

```
redirect('list'); 
```

如果列表是类的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-10T18:46:54.953

问题来自表单声明。您必须将 data-ajax=false 设置为表单。会是这样

`<form method="post" accept-charset="utf-8" **data-ajax="false"**>`

# c# - 是否可以阻止 Sitecore 执行发布操作？

> ID：14690596
> 
> 赞同：2
> 
> 时间：2013-02-04T16:04:56.760
> 
> 标签：c#, sitecore, publishing

如果我在 Sitecore 桌面的整个内容树上单击“发布”，我将看到一个对话框，告诉我已处理了多少项目。有时我知道这个操作会花费很长时间（例如一个小时）。没有办法阻止这个过程。当然，我可以关闭对话并继续使用 Sitecore，但发布仍在后台进行。在完成之前，我无法发布任何其他内容。

回收应用程序池将终止发布，但它对在 Sitecore 中工作的用户非常具有破坏性。

**是否可以在不回收应用程序池的情况下以编程方式或其他方式终止发布操作？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T16:14:41.570

您应该查看[Advanced Publish Dialog](http://marketplace.sitecore.net/en/Modules/Advanced_Publish_Dialog.aspx)模块，它具有您需要的附加功能。[开发人员博客](http://sitecoregadgets.blogspot.ca/2011/09/advanced-publish-dialog.html)上有一段描述这些功能的视频。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-04T16:06:22.153

在托管 CMS 的服务器上回收 CMS 的应用程序池。

这将在发布过程中终止发布并强制 CMS 重新启动。

# javascript - $(document).ready(function() 不起作用

> ID：14690600
> 
> 赞同：-1
> 
> 时间：2013-02-04T16:05:15.973
> 
> 标签：javascript, jquery

我对 HTML 代码中的 jQuery 代码有疑问。

如果我在我的 HTML 代码中编写以下代码，它可以完美运行（出现警告说“hello world”）：

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src="jquery.js"> </script>
<script>
      alert("hello world");
</script>
</head>
</html> 
```

但是当我编写以下代码（使用 $(document).ready 函数）时它不起作用，我不知道为什么：

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src="jquery.js"> </script>
<script>
$(document).ready(function() {
alert("hello world");
});
</script>
</head>
</html> 
```

谁能告诉我这里发生了什么？

提前致谢。

*编辑：抱歉缺少括号，这只是一个错字*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T16:06:50.280

`>`您在 jQuery 的`<script>`标签中缺少一个结束符：

```
<script type="text/javascript" src="jquery.js"> </script>
                                              ^
 missing bracket here ------------------------| 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T16:06:25.457

`>`您的脚本标签中缺少引号和开始标签的关闭，这意味着它已损坏，因此脚本无法加载。

```
<script type="text/javascript" src="jquery.js"> </script> 
```

* * *

您编辑的问题显示更正的`script`标签。如果它仍然不起作用，那么您到`jquery`图书馆的路径可能是错误的。

编码时，您应该保持浏览器的开发者控制台打开。它会显示正在发生的错误。可能有一个*ReferenceError*说明它`$`是`undefined`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T16:07:40.253

`<script>`包含 jQuery的标签格式错误：

```
<script type=text/javascript src="jquery.js" </script> 
```

它应该如下所示：

```
<script type="text/javascript" src="jquery.js"></script> 
```

这是假设 jQuery 库位于与您的 HTML 页面相同的目录中名为“jquery.js”的文件中。

# java - 如何在 Xvfb 上开始 mvn 测试阶段？

> ID：14690603
> 
> 赞同：5
> 
> 时间：2013-02-04T16:05:22.400
> 
> 标签：java, unit-testing, maven, junit, xvfb

我使用[fest](http://code.google.com/p/fest/)进行了一些单元测试，现在我需要在无头系统上使用 maven 运行 mvn 我的测试。我想使用 Xvfb 运行测试，但我需要帮助来配置 maven 以在测试之前启动 Xvfb 并在所有完成后停止它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T16:36:40.840

与`exec-maven-plugin`：

您必须定义两个执行，一个用于启动服务器，一个用于停止它。您必须将这些执行配置与适当的 maven 阶段联系起来——在测试阶段之前启动 Xvfb，并在测试阶段之后停止 Xvfb。

```
 <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>exec-maven-plugin</artifactId>
            <version>1.2.1</version>

            <executions>
                <execution>
                    <id>exec-at-test-compile</id>
                    <phase>test-compile</phase> <!-- runs right before 'test' -->
                    <goals>
                        <goal>exec</goal>
                    </goals>
                    <configuration>
                        <executable>/home/anew/bin/manage-xvfb.sh</executable>
                        <arguments>
                            <argument>start</argument>
                        </arguments>
                    </configuration>
                </execution>
                <execution>
                    <id>exec-at-prepare-package</id>
                    <phase>prepare-package</phase> <!-- runs right after 'test' -->
                    <goals>
                        <goal>exec</goal>
                    </goals>
                    <configuration>
                        <executable>/home/anew/bin/manage-xvfb.sh</executable>
                        <arguments>
                            <argument>stop</argument>
                        </arguments>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

这是`manage-xvfb.sh`脚本的内容：

```
#!/bin/bash

XVFB_CMD="sudo /usr/bin/Xvfb :15 -ac -screen 0 1024x768x8"

function stop_xvfb {
  XVFB_PID=`ps ax | pgrep "Xvfb"`
  if [ "${XVFB_PID}" != "" ]; then
    sudo kill ${XVFB_PID}
  fi
}

if [ "${1}" == "start" ]; then
  stop_xvfb
  ${XVFB_CMD} &
elif [ "${1}" == "stop" ]; then
  stop_xvfb
fi 
```

请注意，您需要`NOPASSWD`在 sudoers 文件中进行设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T11:08:26.417

实际上我使用这个插件配置：

```
<plugin>
    <artifactId>maven-antrun-plugin</artifactId>
    <executions>
        <execution>
            <id>start-xvfb</id>
            <phase>process-test-classes</phase>
            <goals>
                <goal>run</goal>
            </goals>
            <configuration>
                <tasks>
                    <echo message="Starting xvfb ..." />
                    <exec executable="Xvfb" spawn="true">
                        <arg value=":1" />
                    </exec>
                </tasks>
            </configuration>
        </execution>
        <execution>
            <id>shutdown-xvfb</id>
            <phase>test</phase>
            <goals>
                <goal>run</goal>
            </goals>
            <configuration>
                <tasks>
                    <echo message="Ending xvfb ..." />
                    <exec executable="killall">
                            <arg value="Xvfb" />
                    </exec>
                </tasks>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

好处是您获得了一个后台进程（使用`spawn = "true"`），并且您可以终止 Xvfb 进程（使用`killall`）而无需编写任何脚本。此外，在我的 Ubuntu 发行版中，我不必在我的 sudoers 文件中设置任何特殊设置来让它工作。

shutdown-xvfb 执行在测试阶段结束时执行，但如果测试失败则不执行（这里是问题）。如果要重新启动另一个测试，这不是问题（旧的 Xvfb 仍在运行，新的无法运行，但这不是问题），但问题是 Xvfb 仍然忙于资源。解决此问题的方法可能是添加`testFailureIgnore = "true"`到 maven-surefire-plugin 的配置中，但这样我就无法轻松查看某些测试是否失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-28T10:34:01.963

这项工作可以通过[selenium-maven-plugin](http://search.maven.org/#artifactdetails%7Corg.codehaus.mojo%7Cselenium-maven-plugin%7C2.3%7Cmaven-plugin)轻松完成：

```
<plugin>
  <groupId>org.codehaus.mojo</groupId>
  <artifactId>selenium-maven-plugin</artifactId>

  <executions>
    <execution>
      <id>setup-xvfb</id>
      <phase>pre-integration-test</phase>
      <goals>
        <goal>xvfb</goal>
      </goals>
    </execution>
  </executions>
</plugin> 
```

不幸的是，这个插件似乎没有维护。它是[mojohaus 项目](http://www.mojohaus.org/)`codehaus.org`的一部分，该项目最近从`github.com`. 似乎还没有人将其移植`selenium-maven-plugin`到 github，因此 mojohaus 的 github 页面上目前没有可用的资源和文档。

但是，JAR 在[Maven Central](http://search.maven.org/#artifactdetails%7Corg.codehaus.mojo%7Cselenium-maven-plugin%7C2.3%7Cmaven-plugin)上可用，并且插件仍然可以使用。如果您需要查找更多配置参数，可以在 github 上找到源代码和站点的分支[。](https://github.com/sonatype/selenium-maven-plugin)

# gcc - 为什么 GCC 内联汇编器要求您按位置和约束指定输入/输出？

> ID：14690604
> 
> 赞同：5
> 
> 时间：2013-02-04T16:05:23.187
> 
> 标签：gcc, assembly, inline-assembly

GCC 内联汇编器要求您分别列出输入和输出约束。但是它还要求您在输出约束之前指定“=”，根据[手册](http://gcc.gnu.org/onlinedocs/gcc/Modifiers.html)表示“此操作数是只写的”。没有修饰符意味着只读。现在，在我看来，只读/只写和输入/输出之间存在细微差别，因此它们的处理方式不同。但是如果它们不相同，gcc 如何实际区分“输入”和“只读”？是否存在将“=”放在输入约束上或在输出约束上省略它的情况？对于“+”（读取和写入）参数，将此参数放在输入和输出部分是否有区别？将参数指定为“+”约束与将其指定如下有区别吗？

```
"some instruction" : "=r" : 0 : 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T17:42:07.127

gcc-4.7.2 的 texinfo 手册指出“=”对于输出约束是强制性的，并且输出操作数中的“+”意味着它也可以是输入。规则有些复杂，请仔细阅读手册。

据我了解，输入上的“=”毫无意义（*仅限书面* **输入**？！）。如果修改了输入，请将其列为输出（可能有多个！），也许将其与垃圾变量相关联，并通过数字约束将其与输出联系起来。

是的，这一切都相当令人困惑。约束来自 GCC 用来描述操作的内部语言，并且随着时间的推移而演变（一些向后兼容性引发了它的趣味性）。采用一些风格，并坚持下去。请记住，编译器将您的`asm()`代码段视为一个黑盒，通过替换告知的参数来复制，就像处理预处理器宏一样。它*没有*检查您的指令的寻址模式是否有意义，如果指令适用于您当前的机器，则没有。只是要宏扩展并复制到程序集输出中的文本。仔细检查你说的是什么意思（希望像指令的寻址模式允许的那样自由，你不希望编译器通过扭曲来遵守不必要的限制；但不允许指令不能处理的东西）。检查生成的程序集！

# c++ - 为什么编译器不会抱怨错误的枚举值

> ID：14690607
> 
> 赞同：4
> 
> 时间：2013-02-04T16:05:32.287
> 
> 标签：c++

```
#include <iostream>

enum IsOptionAEnum
{
    IsOptionA_YES,
    IsOptionA_NO
};

enum IsOptionBEnum
{
    IsOptionB_YES,
    IsOptionB_NO
};

void TestFunc(IsOptionAEnum optionA, IsOptionBEnum optionB)
{
    if (optionA == IsOptionA_YES || optionA == IsOptionB_YES) // typo
    {
        // ...
    }

    //if (optionA == IsOptionA_YES || optionB == IsOptionB_YES) // correct one
    //{
    //}

} 
```

Question>`optionA`是 type`IsOptionAEnum`并且没有`IsOptionB_YES`. 为什么VS2010的编译器没有发现这个错误？

如果是编译器找不到错误的情况，有没有办法可以强制执行此限制，以便编译器可以找到错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T16:12:35.800

在 C++11 之前，枚举类型不提供您正在寻找的类型安全性，并且本质上是漂亮的整数。

你想要强类型枚举类：
[http ://www.cprogramming.com/c++11/c++11-nullptr-strongly-typed-enum-class.html](http://www.cprogramming.com/c++11/c++11-nullptr-strongly-typed-enum-class.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-04T16:13:24.520

虽然标准不会将此视为错误（枚举实际上是整数的语法），但这肯定是编译器可以检测到的。[Clang](http://clang.llvm.org)，用 编译`-Wenum-compare`，给出：

```
Bonsai:~ adamw$ clang++ test.cpp 
    test.cpp:15:45: warning: comparison of two values with different enumeration
      types ('IsOptionAEnum' and 'IsOptionBEnum') [-Wenum-compare]
    if (optionA == IsOptionA_YES || optionA == IsOptionB_YES) // typo
                                    ~~~~~~~ ^  ~~~~~~~~~~~~~ 
```

默认情况下，Visual C++ 可能不会对此发出警告。尝试`/Wall`在编译器上设置标志，这将启用所有警告。如果仍然没有警告，您可以向 VC 编译器团队提出请求。

编辑：正如其他答案和评论所提到的，如果你有一个 VC11，你可以使用[Strongly typed enums](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2007/n2347.pdf)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T16:19:37.317

非 C++11 的解决方案是使用`struct`s

```
struct IsOptionAEnum
{
    int val;
    static IsOptionAEnum IsOptionA_YES;
    static IsOptionAEnum IsOptionA_NO;

    IsOptionAEnum( int v ): val(v) {}
};

IsOptionAEnum::IsOptionA_YES(0);
IsOptionAEnum::IsOptionA_YES(1);

if( optionA == IsOptionAEnum::IsOptionA_YES ) // this is type-safe
    // etc. 
```

如果不需要，可以删除内部值（您需要禁用复制，始终通过引用传递并比较结构的地址）。

在 C++11 中，您可以使用Prashant 建议的[类型化枚举。](http://www.cprogramming.com/c++11/c++11-nullptr-strongly-typed-enum-class.html)

# haskell - 为什么 Haskell 中没有 Nums Ords？

> ID：14690608
> 
> 赞同：18
> 
> 时间：2013-02-04T16:05:32.640
> 
> 标签：haskell, typeclass

我知道对于具有类型类实例的`Num`类型，必须有一个 from`Eq`和`Show`

```
class (Eq a, Show a) => Num a 
```

我想知道为什么需要它`Eq`而不是`Ord`. `Eq`数字类型在 in但不在 in是否有意义`Ord`？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-04T16:08:48.413

例如，复数可以进行加法、减法、乘法和相等性测试，但不能排序。请参阅[`Complex a`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Data-Complex.html#t:Complex)基础中的 Data.Complex。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-02-04T16:23:29.087

请注意，`Eq`and`Show`约束也被广泛认为是错误特征。例如，它们会阻止`Num`包含函数的事物的完全有效实例。在最新版本的 GHC 中，这些约束也被删除，`Num`完全没有超类约束。

# eventbrite - 没有从事件明亮中取回事件明亮 JSON 数据

> ID：14690610
> 
> 赞同：-1
> 
> 时间：2013-02-04T16:05:38.723
> 
> 标签：eventbrite

我正在尝试在我的页面上显示事件明亮的 json，但无法正常工作，请指出正确的方向。这是我下面的代码

$(document).ready(function () { var EVENT_JSON = " [http://www.eventbrite.com/json/user_list_events?app_key=MyAPPKEY&user_key=MYuserKEy&event_statuses=live,started](http://www.eventbrite.com/json/user_list_events?app_key=MyAPPKEY&user_key=MYuserKEy&event_statuses=live,started) ";

```
 function AppViewModel() {
            var self = this;
            self.MaxEvents = ko.observableArray(null);

            $.getJSON(EVENT_JSON , function (data) {

                for (i = 0; i < data.events.length; i++) {

                    var rawDate = new Date(data.events[i].event.start_date.substring(0, 10));

                    data.events[i].event.start_date = rawDate.format("m/dd/yy");
                }

                self.MaxEvents(ko.mapping.fromJS(data));
                //  $(".description-text").find('span[style]').css("color", "blue");

            });

        }

        // Activates knockout.js
        ko.applyBindings(new AppViewModel());
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:54:42.547

看起来您已经在使用 jQuery。我会尝试添加这个库：[https ://github.com/ryanjarvinen/Eventbrite.jquery.js](https://github.com/ryanjarvinen/Eventbrite.jquery.js)

这是一个小演示：http: [//jsfiddle.net/ryanj/mDc7p/](http://jsfiddle.net/ryanj/mDc7p/)

这样的事情应该记录每个事件：

```
Eventbrite({'app_key': "YOUR_API_KEY"}, function(eb){   
  var options = {
    'id'    : "561037966"
  };
  eb.organizer_list_events( options, function( response ){
    eb.utils.eventList( response, function(event){
      console.log(event);
    });
  });
}); 
```

请参阅 Organizer_list_events 文档以了解`options`接受的内容。

# android - 从库构建的两个版本的应用程序导致“完整操作”

> ID：14690613
> 
> 赞同：0
> 
> 时间：2013-02-04T16:05:45.093
> 
> 标签：android, android-intent

我已将现有应用程序提取到库项目中，因此可以构建多个目标。应用程序使用动作名称而不是显式的类名称连接在一起。每个目标显然都有自己的 AndroidManifest.xml 文件，其中动作名称映射到类名称。

不幸的是，当同一设备上有两个这样的构建目标时，执行一个操作意味着提示用户是使用 App A 还是 App B 完成该操作。

我怎样才能阻止这种情况发生？我尝试将活动定义导出属性设置为 false。这似乎没有帮助。

我想我可以用包前缀限定 action android:name 属性，但这感觉不对。当然有一种方法可以限制它，以便只解析当前应用程序中定义的操作，或者更确切地说，给定名称的操作不会暴露在应用程序之外？

```
 <activity android:exported="false"
         android:name="uk.myco.activities.EditChildFieldsActivity" 
         android:label="@string/app_name">
        <intent-filter>
            <action android:name="EditChildFields" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T12:01:31.950

根据上述评论，在我的情况下添加

```
intent.setPackage(getApplicationContext().getPackageName()) 
```

已经达到了预期的效果。

# html - 像网格一样排列多个复选框。没有桌子？

> ID：14690621
> 
> 赞同：11
> 
> 时间：2013-02-04T16:06:07.433
> 
> 标签：html, css, forms, layout, checkbox

我目前正在研究一个带有很多复选框的大型公式。有没有办法像网格一样显示它们，例如 4 列？

我知道你可以用表格来做到这一点，但如果不是真的需要的话，我真的不想用它们来设置样式。那么有没有办法使用 CSS 呢？

示例：
[]text []text []text []text
[]text []text []text []text
...

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-02-04T16:21:10.287

这是一个解决方案，带有完整的复选框标记和**CSS**以及一个工作示例。

```
.checkbox-grid li {
  display: block;
  float: left;
  width: 25%;
}
```

```
<ul class="checkbox-grid">
  <li><input type="checkbox" name="text1" value="value1" /><label for="text1">Text 1</label></li>
  <li><input type="checkbox" name="text2" value="value2" /><label for="text2">Text 2</label></li>
  <li><input type="checkbox" name="text3" value="value3" /><label for="text3">Text 3</label></li>
  <li><input type="checkbox" name="text4" value="value4" /><label for="text4">Text 4</label></li>
  <li><input type="checkbox" name="text5" value="value5" /><label for="text5">Text 5</label></li>
  <li><input type="checkbox" name="text6" value="value6" /><label for="text6">Text 6</label></li>
  <li><input type="checkbox" name="text7" value="value7" /><label for="text7">Text 7</label></li>
  <li><input type="checkbox" name="text8" value="value8" /><label for="text8">Text 8</label></li>
</ul>
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T16:37:29.653

columns 属性是这个任务的一个很好的选择，因为你可以很容易地让它响应。

[http://jsfiddle.net/FmV9k/1/](http://jsfiddle.net/FmV9k/1/)（不包括前缀）

```
.checkboxes {
    columns: 4 8em;
}

<ul class="checkboxes">
    <li><label><input type="checkbox" name="text1" value="value1" />Text 1</label></li>
    <li><label><input type="checkbox" name="text2" value="value2" />Text 2</label></li>
    <li><label><input type="checkbox" name="text3" value="value3" />Text 3</label></li>
    <li><label><input type="checkbox" name="text4" value="value4" />Text 4</label></li>
    <li><label><input type="checkbox" name="text5" value="value5" />Text 5</label></li>
    <li><label><input type="checkbox" name="text6" value="value6" />Text 6</label></li>
    <li><label><input type="checkbox" name="text7" value="value7" />Text 7</label></li>
    <li><label><input type="checkbox" name="text8" value="value8" />Text 8</label></li>
</ul> 
```

我们指定了 4 列，但它们的宽度必须至少为 8em。如果所有 4 列都没有足够的空间，那么它将根据需要删除列以确保满足最小宽度。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-04T16:13:27.527

试试 ul li

```
<div>
<ul class="chk">
<li>checkbox</li>
<li>checkbox</li>
<li>checkbox</li>
<li>checkbox</li>

<li>checkbox</li>
<li>checkbox</li>
<li>checkbox</li>
<li>checkbox</li>

</ul>
</div>

.chk 
{
  width:100%;
}
.chk li
{
   display:inline-block;
   width:25%;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-04T17:49:31.007

尝试使用“ `float:left;display:table-cell`”和伪类“ `:nth-child`”和“ `float:none`”

看看这个：http: [//jsfiddle.net/7gdgQ/1/](http://jsfiddle.net/7gdgQ/1/)（已评论）

还有祝你好运！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-04T16:20:40.830

你当然可以使用 div 之类的来这样做，不过不要害怕表格。它们确实有相关的应用程序，如果您尝试做的事情需要使用它们，您应该使用它们。

这是一个基于 div 的 css 解决方案：http: [//jsfiddle.net/XugFX/](http://jsfiddle.net/XugFX/)

**HTML**

```
<div class="row">
    <div class="col"><input type="checkbox" /><label>Box 1</label></div>
    <div class="col"><input type="checkbox" /><label>Box 2</label></div>
    <div class="col"><input type="checkbox" /><label>Box 3</label></div>
    <div class="col"><input type="checkbox" /><label>Box 4</label></div>
</div>
<div class="row">
    <div class="col"><input type="checkbox" /><label>Box 5</label></div>
    <div class="col"><input type="checkbox" /><label>Box 6</label></div>
    <div class="col"><input type="checkbox" /><label>Box 7</label></div>
    <div class="col"><input type="checkbox" /><label>Box 8</label></div>
</div> 
```

**CSS**

```
.row {
    border: 1px solid red;
    overflow: hidden;
    padding: 5px;
}

.col {
    border: 1px solid blue;
    float: left;
    padding: 5px;
    margin-right: 5px;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-04T16:08:24.243

您可以浮动复选框并将每个复选框的宽度设为父容器的 25%。

# javascript - 它用咖啡脚本调用生成的javascript

> ID：14690622
> 
> 赞同：0
> 
> 时间：2013-02-04T16:06:08.403
> 
> 标签：javascript, jquery, backbone.js, coffeescript

本机javascript：

```
var Person;
Person = Backbone.Model.extend({}); 
```

如果我在 google chrome 控制台中编写，此代码工作正常`var person = new Person;`

我的`main.coffee`

```
Person = Backbone.Model.extend({}) 
```

生成的`main.js`

```
// Generated by CoffeeScript 1.4.0
(function() {
  var Person;

  Person = Backbone.Model.extend({});

}).call(this); 
```

如果我在谷歌浏览器控制台中写：

```
var person = new Person;
ReferenceError: Person is not defined 
```

**如何使用生成的 javascript 而不是本机 javascript 从控制台创建实例？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T16:10:52.290

CoffeeScript 默认将所有代码包装在一个函数中，以避免污染全局命名空间。`-b`您可以使用/标志编译代码`--bare`以避免此包装器，或使用`window.Person = Backbone.Model.extend({})`手动使其成为全局，这是在 CoffeeScript 中执行您想要的操作的常用方法。

# algorithm - Tarjan算法中的交叉链接

> ID：14690625
> 
> 赞同：1
> 
> 时间：2013-02-04T16:06:24.083
> 
> 标签：algorithm, graph, tarjans-algorithm

我正在阅读[Tarjan 关于 scc 的论文](http://www.cs.ucsb.edu/~gilbert/cs240a/old/cs240aSpr2011/slides/TarjanDFS.pdf)。

在论文中，给定顶点的低链接定义为：

> *LOWLINK (v) 是与 v 位于同一组件中的最小顶点，可以通过遍历零个或多个树弧后跟最多一个叶子或交叉链接来到达。*

我无法通过交叉链接边缘从给定 scc 中的两个顶点的路径想出任何情况，因为整个 scc 应该位于由 dfs 搜索派生的一棵树中。谁能解释一下？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T07:59:50.503

The idea is simple:

You index the graph as you traverse it, when you are returning from the recursion, you note for each node, which least index is reachable from it. To reach lower index than the specified node already has, there has to be a cross link or a frond link. Because when you reach an yet open node with lower index, it means that you have found a node in the same scc, it is easy to follow, that all nodes with the same lowlink are in the same component ([visualization of the algorithm](http://en.algoritmy.net/article/44220/Tarjans-algorithm)).

# ruby-on-rails - 带有 Net::HTTP 和 Rails 的 REST 客户端示例

> ID：14690626
> 
> 赞同：0
> 
> 时间：2013-02-04T16:06:24.390
> 
> 标签：ruby-on-rails, ruby, net-http

通过所有谷歌我找到了这个例子： [http ://adam.heroku.com/past/2008/8/8/ruby_libs_for_making_web/](http://adam.heroku.com/past/2008/8/8/ruby_libs_for_making_web/)

我找不到更多关于这个主题的教程：一步一步的很好的教程，教如何使用 Net::HTTP 和 Rails 来创建 REST 客户端。即使它是 RailsCast 或书中的章节以很好的方式解释这一点，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T17:22:44.273

没有真正的标准方式，因为据我所知，没有真正标准化的 REST Web 服务发现方式？如果您自己编写 WS，那么这取决于您。[这里](http://www.rubyinside.com/nethttp-cheat-sheet-2940.html)有一些方便的`Net:HTTP`东西。甚至还有一节介绍 RESTful 方法。

如果愿意，可以编写自己的接口类`Net:HTTP`。

# gwt - 树的 SmartGwt 错误

> ID：14690628
> 
> 赞同：0
> 
> 时间：2013-02-04T16:06:26.390
> 
> 标签：gwt, smartgwt

当我使用 smartgwt 2.2 时，我的 smartgwt 工作正常，但是当我使用 smartgwt 4.0b（夜间构建）时，我遇到了错误：

```
00:00:48,253 [ERROR] Uncaught exception escaped
com.google.gwt.core.client.JavaScriptException: (null) @com.smartgwt.client.widgets.tree.Tree::create()([]): null   at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:249)    at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)    at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:571)  at com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:279)    at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)   at com.smartgwt.client.widgets.tree.Tree.create(Tree.java)  at com.smartgwt.client.core.BaseClass.getOrCreateJsObj(BaseClass.java:120)  at com.smartgwt.client.widgets.tree.TreeGrid.setData(TreeGrid.java:2393)    at pl.fizzycomp.departments.gwt.client.DepartmentsMainView.setModelData(DepartmentsMainView.java:175)   at com.test.departments.gwt.client.DepartmentsMainPresenter.setDepartments(DepartmentsMainPresenter.java:208)   at com.test.gwt.client.DepartmentsApp$2.onSuccess(DepartmentsApp.java:80)   at com.test.gwt.client.DepartmentsApp$2.onSuccess(DepartmentsApp.java:1) 
```

我不知道有什么问题这是我在 DepartmentsMainView 中的代码：

```
tree = new Tree();
tree.setModelType(TreeModelType.PARENT);
tree.setNameProperty(DepartmentTreeNode.NAME_FIELD);
tree.setParentIdField(DepartmentTreeNode.PARENT_ID_FIELD);
tree.setIdField(DepartmentTreeNode.ID_FIELD);

tree.setData(nodes.toArray(new DepartmentTreeNode[nodes.size()]));          

grid.setData(tree); 
```

和我的部门树节点：

```
public class DepartmentTreeNode extends TreeNode implements IDepartmentTreeNode {
    public static final String ID_FIELD = "idField";
    public static final String NAME_FIELD = "nameField";
    public static final String CODE_FIELD = "codeField";
    public static final String DESCRIPTION_FIELD = "descriptionField";
    public static final String PARENT_ID_FIELD = "parentId";
    public static final String VERSION_FIELD = "versionField";

    public DepartmentTreeNode(DepartmentDto dto) {
        setTitle(dto.getName());

        setAttribute(ID_FIELD, dto.getId());
        setAttribute(PARENT_ID_FIELD, dto.getParentId());
        setDepartmentName(dto.getName());
        setAttribute(CODE_FIELD, dto.getCode());
        setAttribute(DESCRIPTION_FIELD, dto.getDescription());
        setAttribute(VERSION_FIELD, dto.getVersion());
    } 
```

所以它看起来一切都很好，我正在通过 sysout ant 检查对象 DepartmentTreeNode，它很好。那么有什么问题呢？

* * *

在智能 gwt 控制台结果中，我只得到了信息：

```
16:03:28.801:INFO:Log:initialized
16:03:28.848:WARN:Log:NOTE: Firebug is enabled. Firebug greatly slows the performance of applications that make heavy use of JavaScript. Isomorphic highly recommends Firebug for troubleshooting, but Firebug and other development tools should be disabled when assessing the real-world performance of SmartClient applications.
16:03:31.717:WARN:Log:New Class ID: 'DataView' collides with ID of existing object with value 'function DataView() {
    [native code]
}'.  Existing object will be replaced.
This conflict would be avoided by disabling ISC Simple Names mode.  See documentation for further information.
16:03:32.782:INFO:Log:isc.Page is loaded 
```

我还清理了我的项目 mvn clean install，我认为这不是夜间构建的问题。因为如果我使用 smartgwt2.5 我会收到此错误：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:19:19.983

夜间构建错误确实属于 SmartGWT 论坛。这很可能是一个错误。

您应该确保的另一件事是您的项目没有旧的生成代码。可以肯定的是，删除您的 war 目录中所有旧的生成代码。

最后，使用 SmartGWT 控制台： [http](http://www.smartclient.com/smartgwt/javadoc/com/smartgwt/client/docs/Debugging.html) ://www.smartclient.com/smartgwt/javadoc/com/smartgwt/client/docs/Debugging.html - 它有时会使这些神秘错误更加清晰

# qt - 检查 ComboBox 中的文本是否与其他 ComboBox 相同

> ID：14690633
> 
> 赞同：0
> 
> 时间：2013-02-04T16:06:36.100
> 
> 标签：qt, qcombobox

我有 8 个组合框，标签为 channel_1 ... channel_8。

我想检查用户是否在其中 2 个选项中选择了相同的选项，除了第一个选项是“无”。

我已经创建了这个插槽，但是创建的`final_a`和`final_b`变量无法识别。

```
// Slot to check if there's two channels with the same option choosed
void gui::check_channels_options()
{
    for (int a = 1; a <= 8; a++)
    {
        for (int b = 1; b <= 8; b++)
        {
            if(a != b)
            {
                QString A, B;
                A.setNum(a);
                B.setNum(b);

                QString Na, Nb;
                Na = "channel_";
                Na += A;
                Nb = "channel_";
                Nb += B;

                QByteArray bytes_a = Na.toAscii();
                char* final_a = bytes_a.data();

                QByteArray bytes_b = Nb.toAscii();
                char* final_b = bytes_b.data();

                if((ui->final_a->currentText() == ui->final_b->currentText()) &&
                        (ui->final_a->currentIndex() != 0 && ui->fnal_b->currentIndex() != 0))
                {
                    QMessageBox::warning(this,"Error","Channel " + a + " has the same option as channel " + b,QMessageBox::Ok);
                }

                else
                {

                }
            }     
        }
    }
} 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T16:17:02.133

您在堆栈上声明`final_a`and `final_b`，但随后将它们称为`ui->final_a`and `ui->final_b`。尝试`ui->`从那些中删除“”。

不过，总的来说，我认为您的方法可以简化。例如，假设您有一个指向组合框的指针，这些指针存储在一个名为`comboBoxes`. 然后你可以这样做：

```
// create the combo boxes somewhere in your program, perhaps like this:
QComboBox *comboBoxes[8];
for (int i = 0; i < 8; ++i)
{
    comboBoxes[i] = new QComboBox;
}

// Slot to check if there's two channels with the same option choosed
void gui::check_channels_options()
{
    for (int a = 0; a < 8; ++a)
    {
        for (int b = 0; b < 8; ++b)
        {
            if (a == b ||
                comboBoxes[a]->currentText() == "none" ||
                comboBoxes[b]->currentText() == "none")
                continue; // no need to test these for equality
            else if (comboBoxes[a]->currentText() == comboBoxes[b]->currentText)
                // issue warning
            else
                // they are OK
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T16:18:34.730

ui->final_a->currentText()，我不认为你可以通过这种方式访问​​ UI 元素。UI 中没有 *final_a* 元素，但据我所知，会有一些 channel_1、channel2、元素。

ps：请给变量起一个有意义的名字，

# c - 缓冲区空终止

> ID：14690635
> 
> 赞同：1
> 
> 时间：2013-02-04T16:06:41.630
> 
> 标签：c

我正在尝试使用以下代码向我的缓冲区添加空终止。但我似乎无法传递我的空终止符。这是正确的方法吗？当我 strlen 缓冲区时，值是 10，但我只键入了 9 个字符。

```
char buffer[256];
int n;

bzero(buffer,256);
fgets(buffer,255,stdin);
buffer[n-1]="\0"; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T16:09:39.990

您正在分配一个字符串而不是一个 char `buffer[n-1] = "\0";`。
试试 `buffer[n-1] = '\0';` 吧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T16:19:03.207

你的右手值有错误的类型（`char *`当需要转换的东西时`char`）。

正确的方法是：

```
buffer[n - 1] = '\0'; 
```

这也可以写成：

```
buffer[n - 1] = 0; 
```

但第一个清楚地表明我们正在处理角色。我假设`n`也设置在某个地方。

如果`buffer`是一个数组并且你想确保它的最后一个字符设置为零，你可以使用：

```
buffer[sizeof buffer - 1] = '\0'; 
```

这使用`sizeof`运算符来避免重复常量等。请注意，它仅在`buffer`是一个正确的数组时才有效，如果您只有一个指针 ( `char *buffer;`)，它不会做预期的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-27T09:02:33.443

```
char buffer[256] = {'\0' }; 
```

解决您的问题。

# mfc - 在 Visual C++ 中通过 MSComm 进行 Modbus 输入

> ID：14690639
> 
> 赞同：0
> 
> 时间：2013-02-04T16:06:48.480
> 
> 标签：mfc, serial-port, modbus, mscomm32

我对 Modbus 协议完全陌生。我的设置由三个具有不同地址的设备组成。它们都通过 RS232 连接到 COM1。我使用 Modbus Poll 来检查输入数据，它工作正常。我现在要做的是读取 vc++ (MFC) 应用程序中的保持寄存器。对于串行通信，我使用 MSComm 类。我写了一些代码，但我根本没有输入。

我目前的代码：

```
BOOL Crs232test4Dlg::OpenConnection ()
{
    char error [513];

    try
    {
        if (! m_MSComm.GetPortOpen ())
        {
            m_MSComm.SetCommPort (1);
            m_MSComm.SetSettings ("9600,N,8,1");
            m_MSComm.SetInputLen (4);
            // Receive Data as Text
            m_MSComm.SetInputMode (0);
            m_MSComm.SetPortOpen (true);
            m_MSComm.SetCommID (1);
           return m_MSComm.GetPortOpen ();
        }
        AfxMessageBox ("Success!!!!", MB_OK);
        return TRUE;
    }

    catch (CException *e)
    {
        e->GetErrorMessage (error, 512);
        AfxMessageBox (error, MB_OK);
        return FALSE;
    }
}

void Crs232test4Dlg::OnVaisalaComm ()
{
    if (m_MSComm.GetCommEvent () == 2)
    {
        COleVariant in_dat;
        in_dat = m_MSComm.GetInput ();
        Sleep (100);
        CString strInput (in_dat.bstrVal);
        m_Input = m_Input + strInput;
        UpdateData (FALSE);
    }
} 
```

我现在想推出 m_Input，但它并没有改变一点。在设置 SetCommID 时，我也会收到警告（属性是只读的），我认为这并不重要。

谁能指导我，因为我现在真的一无所知。

问候

编辑：根据一个通信示例，我试图像处理文件一样处理设备。

```
m_hCom = CreateFile(m_sComPort, 
        GENERIC_READ | GENERIC_WRITE,
        0, // exclusive access
        NULL, // no security
        OPEN_EXISTING,
        0, // no overlapped I/O
        NULL); // null template
// :(colon) Address=1 Function=3 Starting register= 40001 (To write 400001 or 0?)
Registers to read=4 checksum CR LF
char    strASCII[] = "3A 30 31 30 33 30 30 30 30 30 30 30 34 46 38 0D 0A";

bWriteRC = WriteFile (m_hCom, strASCII, strlen(strASCII), &iBytesWritten, NULL);

memset(sBuffer,0,sizeof(sBuffer));
// Reading output of the M3
bReadRC = ReadFile (m_hCom, &sBuffer, 1, &iBytesRead, NULL);

if (bReadRC && iBytesRead > 0)
    {
        sResult = sBuffer;
    }
    else
    {
        sResult = "Read Failed";
        dwError = GetLastError();

        sprintf(sMsg, "Read length failed: RC=%d Bytes read=%d, "
                "Error=%d ",
                bReadRC, iBytesRead, dwError);
        AfxMessageBox(sMsg);
    } 
```

我收到读取长度失败错误。strASCII 不正常分离，现在只是为了更好地概述。我已经检查了 Modbus Poll 中的通信。我的输出是正确的，但它似乎没有得到数据。

编辑：我明白了。非常感谢您的帮助。我输入了错误的校验和。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-12T11:41:49.663

MODBUS 远比通过串口读取简单数据要复杂得多。Is 是一种面向复杂数据包的协议，具有复杂的同步特性。它指定了主从操作。通过使用 MSComm 或超级终端，您不会从 MODBUS 设备中得到任何东西。MODBUS 协议已经有很好的文档记录，但实现起来并不容易。也存在许多变化。可能需要几千行代码才能获得基础知识。一个已知且成熟的商业图书馆可能是更好的方法，这还包括技术支持，这对于这类产品至关重要。例如，[SuperCom](http://adontec.com/pmodbus_e.htm)，一个商业软件库，为串行和 TCP 数据通信提供 MODBUS，还支持 MFC。还包括客户端（主）和从属功能。它为知名编译器提供了许多示例。那里肯定存在更多的商业解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T17:45:00.740

不是答案，而是解决问题的指南。

*   你最好的朋友应该是：

    1) 空调制解调器 232female<->232female 电缆与第二台具有 com 端口的计算机（或带 USB-> 串行转换器的笔记本电脑）......通过您自己的线对线焊接电缆可能是最好的解决方案。

    2) Windows 超级终端简单但可靠的应用程序预装在大多数 Windows 上...以 comPort 模式启动，具有与模块相同的比特率/奇偶性/停止位参数。

* * *

*   首先通过在 comps 和“聊天”几句上运行 hterm 来检查连接和电缆是否正常
*   第二次检查您的程序是否正常，方法是在第一个 comp 上运行它，然后在其他 comp 上运行 hterm
*   Modbus 模块有时在 Master 发送对模块地址的一些查询之前不发送任何内容，因此您的程序可能需要先发送一些内容（对于该调查，您可以记录您的 modbusPool 与连接的其他 comp 而不是 MBUS 模块）

...关于 Windows 信号队列和 MSCOmm 类的所有方面可能没问题，但是为了消除项目启动中通信失败的所有可能原因，也许你应该更喜欢简单的威胁 COM 端口作为文件，并在一些 while 循环中读取它...[此示例](http://www.ontrak.net/mfc.htm)的一些简短版本...在启动时设置串行参数并读取名为 comX.

上面的链接在下载时具有良好的 cSerialClass 实现，但没有任何错误检查的简单入门[在 pastebin](http://pastebin.com/Pcc828yy)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T11:34:23.497

这里有两个问题：

1/ 您不能将三个设备通过 RS232 连接在一起。RS232 是点对点的，这意味着只能将两个设备连接在一起。

2/ 从站仅在主站查询时发送数据。如果主机不先发送 MODBUS 请求，您将永远不会收到从机的回复。

PS：我感觉 m_MSComm.SetCommID() 应该在端口打开之前调用，而不是之后。

为了创建正确的请求，您可以参考标准：

*   [http://modbus.org/docs/Modbus_Application_Protocol_V1_1b3.pdf](http://modbus.org/docs/Modbus_Application_Protocol_V1_1b3.pdf)
*   [http://modbus.org/docs/Modbus_over_serial_line_V1_02.pdf](http://modbus.org/docs/Modbus_over_serial_line_V1_02.pdf)

第一个文档将指导您如何构建请求 (PDU)，而第二个文档详细说明了如何将请求封装在适合串行通信的“传输”帧 (ADU) 中。

最常见的请求是“读取保持寄存器”（功能#3）。如果您的从设备具有地址 5，并且您想读取从地址 10 开始的两个寄存器，那么您的请求将类似于：0x05 0x03 0x000A 0x0002 0x???? （其中 '????' 是 CRC16 值，我懒得计算）。

# sql-server - 更改 SQL Server 2008 R2 数据库主密钥是否会无缝更改依赖键？

> ID：14690643
> 
> 赞同：0
> 
> 时间：2013-02-04T16:06:50.827
> 
> 标签：sql-server, sql-server-2008-r2, tde

在 SQL Server 2008 R2 中，如果我更改数据库主密钥，我是否必须对更改用户数据库加密密钥的证书进行任何更改。我有年度更新要求。

所以如果我这样做：

```
USE [Master];
ALTER MASTER KEY REGENERATE WITH ENCRYPTION BY PASSWORD = 'blah((blah&something';
GO 
```

1.  它还会更新为用户数据库加密密钥创建的所有证书的加密密钥吗？

2.  是否存在数据丢失风险？

有很多关于如何做出改变的例子，但我很难找到关于这种特定情况的点评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T16:11:27.770

重新生成 DBMK 将重新加密使用 DBMK 加密的所有密钥，以及使用 DBMK 加密的一些内部内容（例如，服务代理会话端点会话密钥）。没有数据丢失的风险。如果旧的 DBMK 无法打开（例如未知密码），则 ALTER 语句将失败。在这种情况下，如果使用 FORCE 选项，那么如果旧的 DBMK 加密是唯一可用的并且在强制重新生成中丢失，则*可能会发生数据丢失。*

不清楚“用户数据库加密密钥”是什么意思。物理存储在数据库中的所有密钥（这包括任何数据库范围的证书，其私钥使用主密钥加密）将被重新加密。但是，例如，透明数据库加密密钥不会被重新加密，因为它们没有存储在它们加密的数据库中。

# java - JasperFillManager 填充导出的文件

> ID：14690647
> 
> 赞同：0
> 
> 时间：2013-02-04T16:07:12.177
> 
> 标签：java, jasper-reports, export-to-excel, export-to-pdf

我正在尝试导入 net.sf.jasperreports.engine.export 以导出汽车的所有详细信息（编号、客户端、构造函数、类型、颜色......）。所有信息都存储在数据库中。

事实上，我已经成功生成了不同类型的文件（XML、doc、docx、pdf ..），名称命名正确，大小设置为 A4，文件可以位于正确的位置。但是所有的行都是空的，我想填充里面的数据。我想使用方法 fill() 并使用 JasperFillManager 来填补空白。但它不起作用。我不知道如何使用 JasperFillManager 来查找所有信息。有人可以帮助我吗？

```
 /**
 * Initializes this method. 
 * 
 * @param model
 * @param pageType
 * @param orientation
 * @param outputType
 * @param destination
 */
private void init(ExportModel model, PAGE_TYPE pageType, 
        PAGE_ORIENTATION orientation,  OUTPUT_TYPE outputType,
        String destination){
    this.model = model;
    this.printerData = new PrinterData();
    this.printerData.setUseSql(false);
    this.printerData.setPageFormat(pageType);
    this.printerData.setPageOrientation(orientation);
    this.printerData.setOutputType(outputType);
    this.printerData.setDestination(destination);

} 
```

这是班级的开头。我想写一个函数：

```
 public static void fill()
{
    try
    {
        JasperFillManager.fillReportToFile("static.jasper",null,new JREmptyDataSource());   

    } catch(JRException e)
    {
        e.printStackTrace();
    }
} 
```

}

非常感谢你！如果有一些示例代码会更好！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:37:14.067

您正在将 a 传递`JREmptyDataSource`给填充管理器。这实际上是不向报告传递任何数据。您应该使用其他数据源之一，可能是`JRResultSetDataSource`. 您可以在此处获得常用数据源的概述：[链接](http://jasperreports.sourceforge.net/sample.reference/datasource/index.html#datasources)。

如果您已经查询了数据库并获得了 a `java.sql.ResultSet`，则可以使用它来构造 a`JRResultSetDataSource`并将其传递给填充管理器。

或者，您可以将数据库连接（作为`java.sql.Connection`）传递给填充管理器，并将您的 SQL 查询放入报表设计中。

# android - 扩展微调器项目

> ID：14690658
> 
> 赞同：1
> 
> 时间：2013-02-04T16:07:45.267
> 
> 标签：android, spinner

我目前正在 Android 中实现一个 Spinner，并且无法将两个数组与 Spinner 链接——一个用于当 Spinner 未展开时，一个用于当它展开时。

所以微调器在未展开时会如下所示： ![小陀螺](../Images/6439b7687ce3a7434c4cb5d2b3a9d034.png)

当它展开时，链接到它的数组从字符串的缩短版本变为长版本。 ![扩展的微调器](../Images/e0b9f62589daef4218e211b69db9e550.png)

我曾考虑在触摸 Spinner 时更改数组，然后在取消时将其更改回来，但我认为这最终会变得混乱，或者创建一个看起来像微调器的按钮，这会打开一个自定义 ListView 对话框充当自定义微调器，但这似乎有点矫枉过正。有没有更简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T16:12:59.910

你可以实现自己的适配器来达到这个效果。覆盖返回“展开”视图的 getView() 和返回“折叠”视图的 getDropDownView()。不要忘记利用 convertView。

```
 ArrayAdapter<String> adapter = new ArrayAdapter<String>(getActivity(), 0, objects) {
        @Override
        public View getDropDownView(int position, View convertView, ViewGroup parent) {
            //inflate and return the view you want to see as the non-expanded droplist
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            //inflate and return the expanded view
        }
    }; 
```

# wcf - 高度可维护的 Web 服务并添加新的命令/查询处理程序

> ID：14690660
> 
> 赞同：1
> 
> 时间：2013-02-04T16:07:51.693
> 
> 标签：wcf, cqrs

我从[这个项目](http://solidservices.codeplex.com/)开始尝试学习 CQRS 并编写可维护的 WCF 服务。但是，我有一些关于 WCF 的一般性问题。每次添加命令/查询处理程序合同和处理程序时，我都会构建项目，然后在 Visual Studio 中右键单击客户端上的服务引用并选择“更新服务引用”。这通常使我可以毫无问题地使用新命令/查询。

但是，我不得不实际删除整个服务引用，然后再将其添加回来，这比我想的更频繁。这是我可以解决此错误的唯一方法：

> 尝试序列化参数 [http://tempuri.org/:query](http://tempuri.org/:query)时出错。InnerException 消息是 'Type 'Contract.Queries.Countries.GetCountriesStartingWithLetterQuery' 与数据合同名称 'GetCountriesStartingWithLetterQuery: [http://schemas.datacontract.org/2004/07/Contract.Queries.Countries](http://schemas.datacontract.org/2004/07/Contract.Queries.Countries) ' 不是预期的。考虑使用 DataContractResolver 或将任何静态未知的类型添加到已知类型列表中 - 例如，通过使用 KnownTypeAttribute 属性或将它们添加到传递给 DataContractSerializer 的已知类型列表中。有关更多详细信息，请参阅 InnerException。

然后有时，即使我删除服务引用并重新添加它，我也永远无法让新命令/查询工作。如果我尝试在注册已知类型的 WCF 服务代码中添加断点，它永远不会被命中。似乎服务引用失败，因为新命令/查询未注册为已知类型。

在此 CQRS WCF 模型中刷新服务的正确方法是什么？谢谢。

* * *

更新 1：我所有的麻烦都来自 EF 生成代理对象并尝试通过 WCF 服务发送它们。该服务不知道代理，只知道 POCO。

@Peter - 我使用的是 EF 5 Code First。我所有的 POCO 都在一个单独的项目中。我使用存储库模式从数据库中检索实体。当我说 countryRepository.GetById(myId) 时，检索的是代理对象，而不是 POCO。如果我禁用 ProxyCreation，则会返回一个 POCO，但导航属性始终为空，同时填充了它们各自的外键 ID。从存储库中获取某些内容时，也许我只需要使用 .Include 作为导航属性？我明天必须检查，因为我现在无法访问代码。

或者，我已经阅读了很多关于 AutoMapper 的内容。这可以用来将我的代理对象映射到 POCO 吗？只是一个想法，但这似乎并不正确。

* * *

编辑 2：原来我可以使用 ValueInjector 很容易地将我的动态代理对象映射到 POCO。然后我可以毫无问题地通过网络发送 POCO。[请参阅此帖子](https://stackoverflow.com/questions/14708997/how-to-get-ef-pocos-from-system-data-entities-dynamicproxies)以获取更多参考。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T20:34:33.177

不要使用添加服务参考。您可以使用通道工厂并且没有服务参考。这假设您可以通过添加项目（或 dll）引用与客户端共享您的数据和服务合同。

添加对客户端的引用。然后建立一个渠道工厂。这是来自[MSD How to: Use the ChannelFactory的简单文章](http://msdn.microsoft.com/en-us/library/ms734681.aspx)

如果您无法分享您的参考资料，您可以查看如何实现通用合同解析器[WCF 可扩展性 –](http://blogs.msdn.com/b/carlosfigueira/archive/2011/09/21/wcf-extensibility-data-contract-resolver.aspx)来自 Carlos Figueira 的数据合同解析器。

编辑1：

您可以将[POCO 模式与 EF](http://blogs.msdn.com/b/adonet/archive/2010/01/25/walkthrough-poco-template-for-the-entity-framework.aspx)一起使用来获取导航属性并将自己与 EF 细节分开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T17:15:06.053

您不应该通过网络发送实体。创建特定于服务方法的 DTO/消息对象，并将它们从/映射到服务内的实体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-12T20:59:00.693

该问题可能是由 Visual Studio 的编辑和继续功能引起的。Visual Studio 使用 WCF 服务启动 IIS Express 或 Cassini 实例，当第一次访问时，WCF 服务会初始化（这是创建容器和`GetKnownTypes`调用方法的时间）。

但是在添加新类型和重新编译时，Visual Studio 会更改 WCF 服务的程序集，但不会重新启动该 AppDomain，从而保持 Web 服务处于初始化状态（因为初始化只发生一次）但配置无效。

您可以通过在每次开始调试时终止 IIS Express 实例来解决此问题，但这当然很烦人。也许您可以自动执行此操作，但至少该问题在生产中永远不会存在，因为没有编辑和继续。

现在，我通常不再将我的命令和查询作为 WCF 合同的一部分公开。客户端和服务器现在只是来回发送 JSON 对象，而 WCF 服务所关心的只是一个字符串。事实证明，通过网络发送 JSON 对我非常有益，因为：

*   JSON.NET 的序列化器比 WCF 的 SoapSerializer 灵活得多（这简直太痛苦了）。JSON.NET 可以序列化/反序列化不可变对象、集合、字典，以及您所需要的一切。
*   不公开命令和查询对象作为 WCF 合同的一部分完全消除了完整的编辑和继续问题。

# angularjs - 注册和注销 Angular JS 手表

> ID：14690661
> 
> 赞同：3
> 
> 时间：2013-02-04T16:07:52.677
> 
> 标签：angularjs, watch

在我的应用程序中，我想为用户提供一个复选框，以切换应用程序是否定期在后台轮询新数据。我已经设置了一个手表来进行数据轮询。而且我知道如果我在创建时为该手表分配一个变量，我可以调用该变量并且手表将被禁用/取消注册。我的问题是，当用户单击文本框时，我希望手表恢复活力。我还没有找到完成这项工作的最佳方法。这是我的示例[小提琴](http://jsfiddle.net/Vbahole22/Gdfyc/)，它在一定程度上说明了这个问题。我想如果我能让它在那里工作，我可以把它的其余部分组装起来。不工作的部分是手表需要重新上线的部分：

```
 if ($scope.counter === 15) {
        $scope.$watch('counter', theWatchFunction);
        $scope.test = "back on";
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T16:22:50.960

您不能简单地取消注册观察者并等待它自动重新注册。你运行`myWatch()`里面的所有东西的那一刻`theWatchFunction`将永远不会再运行。您可以注册一个新的观察者，但**不能**在`theWatchFunction`.

You can, for example, re-register the `counter` watcher on the `time` watcher: [http://jsfiddle.net/bmleite/Lw3Lp/](http://jsfiddle.net/bmleite/Lw3Lp/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T16:22:43.407

你很接近，你的 jsfiddle 不工作的原因是因为在柜台 7，你取消了手表。由于您重新打开手表的代码位于 WatchFunction 中，因此它永远不会被调用，因为手表已被禁用，因此该功能不再被执行。

我已经在超时功能中检查了计数器以重新打开手表，它似乎工作正常。

```
 $timeout(function () {
        $scope.time = new Date();
        $scope.counter++;
        if ($scope.counter === 15) {
           myWatch = $scope.$watch('counter', theWatchFunction);
        }
    }, 1000); 
```

我已经分叉了一个[小提琴](http://jsfiddle.net/5bWfP/)，演示了一个可以让你上路的工作版本。希望有帮助！

# google-app-engine - Google App Engine 数据存储区“不同”在开发服务器或生产环境中不起作用

> ID：14690663
> 
> 赞同：3
> 
> 时间：2013-02-04T16:07:56.260
> 
> 标签：google-app-engine, google-cloud-datastore

以下代码在生产和开发服务器上运行良好：

`outstanding_qs = models.SitePerformanceTrackingAnswers.all().run(projection=('questionnaire',))`

但是，在`distinct`调用时添加参数后`run`（根据文档应该是可能的）：

`outstanding_qs = models.SitePerformanceTrackingAnswers.all().run(projection=('questionnaire',), distinct=True)`

在开发和生产中都会生成以下错误：

`TypeError: Unknown configuration option ('distinct')`

我究竟做错了什么！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T19:59:11.333

似乎这是一个错误。你可以通过查询选项`.all()`来做同样的事情。（并且检查，这似乎*没有*记录在案......我相当确定它可以工作）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T19:13:38.320

你在用ndb吗？我在 db 类文档中看到了“distinct”，但在 ndb 文档中没有。

# javascript - jQuery代码不起作用

> ID：14690666
> 
> 赞同：-2
> 
> 时间：2013-02-04T16:08:01.743
> 
> 标签：javascript, jquery, html

我是 jQuery 新手，但对编程并不陌生。我仍然无法找出这段简单的代码有什么问题：

```
$(document).ready(function() {
    $('.footer').click(function() {
        $('.footer').fadeOut('slow');
    });
}); 
```

它在我自己的网站上不起作用，但在我使用 codeacademy 时它确实起作用。这有什么问题？

编辑：不久前我提出了这个问题。当我开始 jQuery 时，这是一件我当时不明白的简单事情。解决方案是先导入库，然后再在 javascript 中执行任何其他操作。该代码确实在 codeacedemy 中工作，因为该库是自动导入的。对于每个初学者来说，了解这一点非常重要，但这条信息在网络上随处可见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T16:09:54.867

几个检查站...

确保将 jQuery 库包含在`<head>`.

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script> 
```

如果没关系，你有这个类的元素`.footer`吗？如果不是，它是一个`ID`？在这种情况下，您需要添加以下内容：

```
$(document).ready(function() {
    $('#footer').click(function() {
        $('#footer').fadeOut('slow');
    });
}); 
```

实际上，这可以通过另一种最佳方式来完成：

```
$(document).ready(function() {
    $('#footer').click(function() {
        $(this).fadeOut('slow');
    });
}); 
```

# function - gzip压缩功能的单一测试？

> ID：14690667
> 
> 赞同：0
> 
> 时间：2013-02-04T16:08:06.793
> 
> 标签：function, testing, gzip

给定 gzip 规范的实现，如何测试它是否根据规范进行压缩，即有效的 gzip 文件？

我的单一测试压缩输入然后解压缩，将输入与解压缩的输出进行比较。我认为这不足以保证它满足规范。

任何人都知道测试 gzip 压缩功能的有效策略吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:17:15.597

您可以针对另一个实现测试您的实现，例如命令行`gzip`工具：

*   使用您的实现压缩一些数据，然后将结果解压缩`gunzip`并与原始数据进行比较
*   反之亦然，用 压缩一些数据`gzip`，然后用你的实现解压缩并比较

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T16:29:54.713

只需使用[zlib](http://zlib.net/)的 inflate 来测试输出。出于安全原因，inflate 非常小心地拒绝无效的 deflate 数据。

但是请注意，这只会测试您通过它运行的流。您需要制定许多测试，以确保您运用了平减指数可以产生的所有可能类型的输出。

# javascript - Google Chrome 扩展程序自动更新

> ID：14690673
> 
> 赞同：2
> 
> 时间：2013-02-04T16:08:41.493
> 
> 标签：javascript, html, json, google-chrome, google-chrome-extension

[正如谷歌在这里](http://developer.chrome.com/extensions/autoupdate.html)所说，如果你在谷歌服务器中托管你的 Chrome 应用程序，你不必指定任何东西。但是为什么我分析的所有扩展在他们的 manifest.json 中都有这个代码。我是否也应该在我的 chrome 扩展清单中编写此代码？

```
"update_url": "http://clients2.google.com/service/update2/crx", 
```

正如我所说，我将使用 chrome 网上商店上传和分享我的应用程序

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T16:13:54.697

您应该从 manifest.json 中删除“update_url” Chrome 会自动从 Web Store 更新您的扩展程序。所以你应该把你的扩展上传到网上商店。

# ios - 在 posix 线程上创建自动释放池

> ID：14690677
> 
> 赞同：0
> 
> 时间：2013-02-04T16:09:03.053
> 
> 标签：ios, objective-c, pthreads, nsthread, nsautoreleasepool

我`GTMLogger`在我的应用程序中使用格式化日志记录的功能。此应用程序创建实时 posix 线程（音频数据包处理）。有时我们需要从这些非 Cocoa 线程中执行日志记录。`GTMLogger`创建自动释放的对象，我想在函数中的调用上放置一个`@autoreleasepool`块`GTMLogger`，从非 Cocoa 线程记录，但我担心它会影响性能。

我的问题是 - 我可以以某种方式创建自动释放池并将其与当前的 posix 线程相关联，因此每个线程只创建一次池，而不是每次调用日志函数时创建池？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T19:31:08.657

在 ARC 下，使用`@autoreleasepool`速度非常快。如果您担心那里的性能，我会更担心首先避免不必要的日志记录调用，而不是自动释放池。

如果线程是长期存在的，则通常不能创建与“线程”关联的池。您需要定期排空池，如果您只是将整个线程主函数括在一个`@autoreleasepool{}`或任何类似的东西中，就不会发生这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T20:09:29.737

好吧，如果您无法控制线程的主函数，那么我想您能做的最好的事情就是将自动释放池放置在该库“调用”到您控制的代码中的位置。

# sqlite - 获取 QSqlQuery 的结果的性能非常慢

> ID：14690679
> 
> 赞同：2
> 
> 时间：2013-02-04T16:09:14.053
> 
> 标签：sqlite, qt

我在 Qt 的 sqlite 数据库中看到莫名其妙的缓慢行为。下面代码中的查询，当从同一数据库上的 sqlite 命令行实用程序执行时，会立即完成。

```
qDebug() << "Beginning" << QDateTime::currentDateTime ().toString(Qt::ISODate);
QSqlQuery q(QSqlDatabase::database(mFilename));
q.prepare( "select TextFormIndex.Id from TextFormIndex,MorphologicalAnalysisMembers,Allomorph on TextFormId=Id and AllomorphId=Allomorph._id where LexicalEntryId=:Id;" );
q.bindValue(":Id", id);

QSet<qlonglong> textFormIds;
if( !q.exec()  )
{
    qWarning() << "DatabaseAdapter::lexicalEntryTextForms" << q.lastError().text() << q.executedQuery();
    return textFormIds;
}

qDebug() << "Before while" << QDateTime::currentDateTime ().toString(Qt::ISODate);
int nResults = 0;
while( q.next() )
{
    qDebug() << nResults++ << QDateTime::currentDateTime().toString(Qt::ISODate);
    q.value(0).toLongLong();
}
qDebug() << "After while"; 
```

此代码的调试输出为：

```
Beginning "2013-02-04T20:31:24" 
Before while "2013-02-04T20:31:26" 
0 "2013-02-04T20:31:26" 
1 "2013-02-04T20:31:27" 
2 "2013-02-04T20:31:41" 
3 "2013-02-04T20:31:44" 
After while 
```

不知何故，第三个电话需要十四秒钟。

这是大型项目中的单一方法。在此之前，我的所有查询都没有执行缓慢。

```
create table if not exists TextFormIndex ( TextName text, LineNumber integer, Id integer );
create table if not exists MorphologicalAnalysisMembers ( _id integer primary key autoincrement, TextFormId integer, AllomorphId integer, AllomorphOrder integer );
create table if not exists Allomorph ( _id integer primary key autoincrement, LexicalEntryId integer, WritingSystem integer, Form text ); 
```

MorphologicalAnalysisMembers.AllomorphId 对应于 Allomorph._id。TextFormIndex.Id 对应于 MorphologicalAnalysisMembers.TextFormId。

MorphologicalAnalysisMembers 有 4082 行 TextFormIndex 有 17710 行 Allomorph 有 1660 行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:02:18.840

您的 Qt 中使用的 SQLite 版本似乎太旧了。

更新到最新的 Qt，或者[使用更新的 SQLite 重新编译 Qt](http://doc.qt.digia.com/stable/sql-driver.html#qsqlite-for-sqlite-version-3-and-above)。

# iphone - 触发 NSFetchedResultsChangeUpdate 而不是 NSFetchedResultsChangeDelete

> ID：14690681
> 
> 赞同：9
> 
> 时间：2013-02-04T16:09:29.703
> 
> 标签：iphone, ios, core-data, nsfetchedresultscontroller

我有一个 NSFetchedResultsController 以下列方式启动：

```
NSEntityDescription *myEntity = [NSEntityDescription entityForName:@"MyEntity" inManagedObjectContext:managedObjectContext];
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
[fetchRequest setEntity:myEntity];
[fetchRequest setFetchBatchSize:10];
[fetchRequest setPredicate:[NSPredicate predicateWithFormat:@"wasDeleted == %@", [NSNumber numberWithBool:NO]]];

NSSortDescriptor *sortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"name" ascending:YES selector:@selector(caseInsensitiveCompare:)];

[fetchRequest setSortDescriptors:[NSArray arrayWithObject:sortDescriptor, nil]];

myFetchedResults = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:managedObjectContext sectionNameKeyPath:nil cacheName:nil];
myFetchedResults.delegate = self;
[myFetchedResults performFetch:nil]; 
```

一些事实：

*   wasDeleted 是 MyEntity 的 NSNumber 属性 (BOOL)

*   如果我将此属性更新`[NSNumber numberWithBool:YES]`为 NSFetchedResultsControllerDelegate 调用 didChangeObject 但触发**NSFetchedResultsChangeUpdate**而不是**NSFetchedResultsChangeDelete**。

*   但是，如果我弹出视图并再次初始化获取的结果控制器，则该对象不再存在，表明它`[fetchRequest setPredicate:[NSPredicate predicateWithFormat:@"wasDeleted == %@", [NSNumber numberWithBool:NO]]];`有效。

*   在此 NSFetchedResultsChangeUpdate 之后，当调用 cellForRow 时，我打印 wasDeleted 并将其设置为 YES。

这里有什么问题？

（换句话说，如果对象仍然存在于上下文中但不适合谓词，则可以调用 NSFetchedResultsChangeDelete？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:00:45.407

我和你有*完全相同的*问题。

不要`wasDeleted`用作您的属性名称。`deleted`在处理 CoreData 对象时，您不应该使用 的变体。

我将我的属性重命名为`hidden`，并将其用作谓词。一切都如你所料。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T14:26:56.100

当然`changeUpdate`不是`changeDelete`。您只更新了一个值，并没有删除整个项目。如果您从数据库中删除该项目，那么它将调用`changeDelete`. 并且它不会在新的 init 之后显示，因为您的表是基于此属性进行过滤的。

`NSFetchedResultsChangeUpdate`如果属性`wasDeleted`更改，您将需要在那里侦听并检查。如果是这样，请根据您的需要更新您的表格视图，例如。删除特定行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T12:48:05.053

我在我的应用程序中做同样的事情，并注意到`-controller:didChangeObject:atIndexPath:forChangeType:newIndexPath:newIndexPath`委托首先被调用，更改类型为 ，`NSFetchedResultsChangeDelete`然后是第二次调用，更改类型为`NSFetchedResultsChangeUpdate`.

这`NSFetchedResultsChangeUpdate`可能是预期的行为，但无法解释的是为什么第一次调用 with`NSFetchedResultsChangeDelete`丢失。你能确认你正确地处理了这个案子吗？

# ruby - 使用 bundler install --deployment 将文件放在 git 中吗？

> ID：14690685
> 
> 赞同：1
> 
> 时间：2013-02-04T16:09:37.250
> 
> 标签：ruby, git, version-control, gem, bundler

所以我知道，如果我运行 bundler install --deployment ，它会将 gem 放在我的应用程序的 vendor 文件夹中，这对于我无法安装系统范围 gem 的共享主机之类的东西很有用。我的问题是，我应该把这个文件夹放到源代码控制（git）中，还是捆绑器需要在不同的系统上安装 gems，比如我们是在 mac 上开发并部署到 linux 上？

谢谢！克雷格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T16:25:34.467

您不应该将您的捆绑程序目录放入源代码管理中。您应该使用共享服务器目录来存储捆绑数据。

如果您使用的是 capistrano，请使用内置捆绑器 capistrano 任务：

（在您的 config/deploy.rb 中）：

```
require 'bundler/capistrano' 
```

如果没有，您应该创建一个在不同版本之间持续存在的共享包目录，即：/data/project/shared/bundle

```
bundle install --deployment --path /data/project/shared/bundle 
```

编辑：每个代码库/项目应该有一个捆绑目录，而不是在项目之间共享。例如，每个 capistrano 部署目录都有自己的共享区域，该区域在版本之间共享，但不在部署的应用程序/代码库之间共享。

# sql-server - t-sql 中出现奇怪的语法错误

> ID：14690696
> 
> 赞同：1
> 
> 时间：2013-02-04T16:10:10.050
> 
> 标签：sql-server, tsql

我正在尝试编写一个查询，从一个表中删除记录并将删除的记录输出到另一个类似（但不相同）的表中。

这段代码是我想要做的：

```
delete from MyServer.dbo.t1
output deleted.colA into MyServer.dbo.t2.colA 
```

它引发错误，*在 sys.servers 中找不到服务器“MyServer”。*

但是，我能够运行这个（基本上没有操作）代码（使用有效的服务器名称）：

```
delete from MyServer.dbo.t1
output deleted.* into MyServer.dbo.t1 
```

所以基本上t-sql的错误信息似乎没有意义——所以我不知道该怎么办。

1.  为什么 t-sql 会抛出这个奇怪的错误？为什么它有时可以“看到” sys.servers 中的 MyServer 而其他时候却看不到？

2.  将特定列的已删除值输出到新表中的正确语法是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T16:12:16.667

当您`.`在语法中使用 3 时，您正在指定`server.database.schema.table`. 您正在尝试在不起作用的末尾添加列。摆脱`.colA`.

# python - socket.io，发送数据（node.js）

> ID：14690699
> 
> 赞同：0
> 
> 时间：2013-02-04T16:10:16.923
> 
> 标签：python, django, node.js, socket.io

我应该在 /node_api (python+djnago) 上发送数据，我使用 node.js 和 socket.io：

```
socket.on('send_message', function (message) {
        values = querystring.stringify({
            comment: message, // not null
            sessionid: socket.handshake.cookie['sessionid'],
        });

        var options = {
            host: 'localhost',
            port: 8000,
            path: '/node_api',
            method: 'POST',
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded',
                'Content-Length': values.length
            }
        };

        var req = http.get(options, function(res){
            res.setEncoding('utf8');

            res.on('data', function(message){
                if(message != 'work'){
                    console.log('Message: ' + message);
                }
            });
        });

        req.write(values);
        req.end(); 
```

但在我的views.py中没有发送数据：

```
request.POST.get('comment','null') # null 
```

请求没问题，但为什么 POST 是空的？

如果我 console.log(req) 我看

```
 method: 'GET',
  path: '/node_api',
  _events: { response: [Function] },
  _headers: 
   { 'content-type': 'application/x-www-form-urlencoded',
     'content-length': 52,
     host: 'localhost:8000' },
  _headerNames: 
   { 'content-type': 'Content-Type',
     'content-length': 'Content-Length',
     host: 'Host' },
  _header: 'GET /node_api HTTP/1.1\r\nContent-Type: application/x-www-form-urlencoded\r\nContent-Length: 52\r\nHost: localhost:8000\r\nConnection: keep-alive\r\n\r\n', 
```

我不知道，但方法是 GET ......和 ​​GET null 太

请帮我！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T20:44:01.713

你检查错误代码了吗？可能是 CSRF 检查问题。

```
from django.views.decorators.csrf import csrf_exempt

@csrf_exempt
def my_api_view(request):
    return HttpResponse("text") 
```

你能试试这个吗？

# ios - 相机方向

> ID：14690703
> 
> 赞同：0
> 
> 时间：2013-02-04T16:10:34.443
> 
> 标签：ios

我正在做一个与相机方向相关的项目。我想通过以编程方式更改 UIDevice 方向来知道，相机方向是否也会改变？或者还有其他一些方法可以以编程方式更改相机方向，或者仅物理旋转设备是唯一的选择。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:51:54.353

使用 AVCaptureConnection 你应该能够设置方向。

# android - 数据从单独的异步任务传递到片段

> ID：14690704
> 
> 赞同：1
> 
> 时间：2013-02-04T16:10:36.820
> 
> 标签：android

我有一个单独的 asynctask 类，它为我创建了一个 url。我尝试使用 onPostExecute 中的接口将 url 发送到我的片段，但无法管理它。通过强制在 onAttach 中实现接口，我总​​是在片段中执行相同的过程。

在 myTask.execute() 之后，我只需在屏幕上显示进度对话框即可等待结果。在调用接口的回调方法之前一切正常。（nullpointerexception）

如何强制片段使其实现接口？（我需要将数据直接发送到片段，而不是通过活动）

非常感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T16:19:43.707

您可以尝试制作一个接口，并在您的 asynctask 中有一个方法或构造函数来接受所述侦听器。

在您的片段中创建侦听器并为您设置异步任务。

```
public class Example extends AsyncTask<Void, Void, Void> {
AsyncListener listener;
Object result;

@Override
protected Void doInBackground(Void... params) {
    return null;
}

@Override
protected void onPostExecute(Void result) {
    this.result = result;
    super.onPostExecute(result);
    if(listener != null)
        listener.onComplete(result);
}

public void setListener(AsyncListener listener) {
    this.listener = listener;
}

public Object getResult() {
    return result;
}

public interface AsyncListener {
    public void onComplete(Object object);
}
}

public class ExampleFragment extends Fragment implements AsyncListener {
private Example task;

public static ExampleFragment newInstance(Example task) {
    this.task = task;
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    Object object;
    if((object = task.getResult()) == null)
        task.setListener(listener);
    else
        onComplete(object);

    return super.onCreateView(inflater, container, savedInstanceState);
}

public void onComplete(Object object) {

}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:19:20.040

好吧，我终于发现了我的错误。正如 ePeace 在他的回答中提到的那样。在我的 Asyntask 类中，我创建了一个构造函数，它抛出 nullpointerexception 是侦听器为空。

```
AsyncListener listener;
public ReportFactory(AsyncListener a)
{
    if(a == null)
    {
        throw new NullPointerException("Listener cant be null");
    }

    this.setListener(a);
}

public interface AsyncListener {
    public void onComplete(String url);
}

public void setListener(AsyncListener listener) {
    this.listener = listener;
} 
```

之后，在片段类中，我创建了一个监听器。（在类中有一个对监听器的全局引用，这样你就可以在片段生命周期的其他地方使用它）

```
@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);

  listener = new AsyncListener()
{

    @Override
    public void onComplete(String url)
    {
        URL = url;          
        webview.loadUrl(URL);         
    }
};      
} 
```

最后，在 onCreate 方法中，我创建了我的 Asyntask 并将侦听器作为参数。

```
ReportFactory factory = new ReportFactory(listener);
factory.execute(usr, designFile); 
```

希望它对以后可能需要它的你有用。非常感谢您抽出时间 ePeace。

# spring - 弹簧 3 + JSF 2 + WEBLOGIC 10 错误

> ID：14690710
> 
> 赞同：1
> 
> 时间：2013-02-04T16:10:51.453
> 
> 标签：spring, weblogic-10.x

我需要你的帮助来解决我的 proyect spring 3 和 weblogic 服务器中的这个错误，

```
java.lang.NoSuchMethodError: javax.el.ELResolver.invoke(Ljavax/el/ELContext;Ljava/lang/Object;Ljava/lang/Object;[Ljava/lang/Class;[Ljava/lang/Object;)Ljava/lang/Object;
at com.sun.el.parser.AstValue.getValue(AstValue.java:111)
at com.sun.el.parser.AstValue.getValue(AstValue.java:163)
at com.sun.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:219) 
```

我尝试添加 el-api-2.2 和 el-impl-2.2 并没有任何反应并修改我的 weblogic-application.xml

```
 <wls:application-param>
    <wls:param-name>webapp.encoding.default</wls:param-name>
    <wls:param-value>UTF-8</wls:param-value>
</wls:application-param>

<wls:prefer-application-packages>
    <wls:package-name>javax.el.*</wls:package-name>
    <wls:package-name>com.sun.el.*</wls:package-name>
            <wls:package-name>javax.faces.*</wls:package-name>
            <wls:package-name>com.sun.faces.*</wls:package-name>
    <wls:package-name>org.springframework.*</wls:package-name>
    <wls:package-name>antlr.*</wls:package-name>
</wls:prefer-application-packages> 
```

并在我的 web.xml 中添加这个段

```
<context-param>
    <param-name>com.sun.faces.expressionFactory</param-name>
    <param-value>com.sun.el.ExpressionFactoryImpl</param-value>
</context-param> 
```

请提供任何帮助，我将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:12:33.003

如果您使用的是 Spring + JSF 集成，则需要将 JSF EL 更改为 Spring：将以下代码添加到`faces-config.xml`

```
<application>
        <el-resolver>
            org.springframework.web.jsf.el.SpringBeanFacesELResolver
        </el-resolver>
</application> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T19:04:31.640

该错误是因为 weblogic 库包含 jsf 和 el，为了解决此错误，需要在 weblogic.xml 中添加此段，并且任何描述都应设置为 false

```
<container-descriptor>
    <prefer-application-packages>
        <package-name>javax.el.*</package-name>
        <package-name>com.sun.el.*</package-name>
        <package-name>javax.faces.*</package-name>
        <package-name>com.sun.faces.*</package-name>
        <package-name>org.springframework.*</package-name>
        <package-name>antlr.*</package-name>
    </prefer-application-packages>
</container-descriptor> 
```

谢谢大家

# html - HTML 锚点：移动焦点而不跳跃

> ID：14690712
> 
> 赞同：1
> 
> 时间：2013-02-04T16:11:05.913
> 
> 标签：html, accessibility, lightbox

我在页面中有一些锚点以方便访问。它基本上是左侧的一长串值，每个值在右侧打开一个 div。

为避免键盘用户在所有剩余的左侧链接之间切换，使用锚点将焦点移动到右侧的适当元素。但是屏幕会“向下”跳跃，因此目标锚点位于顶部。

这通常很好，但是我在灯箱中打开了页面（通过 jQuery）。因此，如果目标位于灯箱的中间，则父页面会跳转——将一半的灯箱移出站点。

您无法取回它，因为主页没有滚动条。这些在盒子实现中被删除，否则鼠标滚轮的用户在使用滚轮时会使盒子烦人地滚动到视野之外。

# javascript - 我应该从对象的实现中引用对象变量的名称吗？

> ID：14690715
> 
> 赞同：-1
> 
> 时间：2013-02-04T16:11:10.080
> 
> 标签：javascript, this, object-literal

（设置属性值）与：

```
var obj = {
    getData: function ()
    {
        this.age = 34      //notice this
    }
}
obj.getData();
alert(obj.age) //34 
```

对比

```
var obj = {
    getData: function ()
    {
        obj.age = 34     //notice obj
    }
}
obj.getData();
alert(obj.age) //34 
```

我应该什么时候使用每个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T16:13:10.063

前者是（恕我直言）强烈首选，尽管在这些有限的情况下两者都“工作”。

在任何可能的情况下，一个对象都不应该通过它在声明中给出的名称来引用它自己。

Using`this`确保如果对象被分配了另一个别名并被`obj`重新使用，该对象仍然正确地引用它自己。同样，如果您决定重命名`obj`- 您只需更改一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T16:15:05.253

这样做：

```
getData: function ()
{
    this.age = 34      //notice this
} 
```

具有以下优点：

1.  如果您需要重命名`obj`为其他名称，您的函数不必更改，因为它们将对象称为`this`.

2.  它更便携；如果您在其他地方需要相同的功能，在另一个对象中，复制/粘贴会更容易。

**关于点击处理程序**

话虽如此，当您的代码在点击处理程序中使用时必须小心。例如：

```
var obj = {
    value: 'hello world',
    doSomething: function ()
    {
        alert(this.value);
    }
}

// find first <div> on the page and attach click handler
var firstDiv = document.getElementsByTagName('div')[0];
firstDiv.addEventListener('click', obj.doSomething, false); 
```

单击时`<div>`，它将调用`obj.doSomething`，但`this`现在引用该`window`对象，这是意外的，您的代码将警告“未定义”。

要修复它，您需要编写一个辅助函数：

```
firstDiv.addEventListener('click', function() {
    obj.doSomething();
}, false); 
```

# sql - 自动修改关系中的 id 值

> ID：14690717
> 
> 赞同：0
> 
> 时间：2013-02-04T16:11:14.883
> 
> 标签：sql, primary-key, auto-increment, relation

我有一个关于数据库的问题。假设我有 id 列，它是主键。和4行。一旦我删除第 0 行，第一行必须成为该表中的第 0 行。一旦你将表 ID 设置为 auto_increment，它会这样做吗？此致

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T16:21:36.827

简而言之，不。

也就是说，一旦为自动增量列分配了一个值，它就会永远保持分配的值。

想想看；假设您有一个表，其中包含一百万行。如果您删除 ID 为 0 的行，然后想要重新编号剩余的行，您不仅必须更新剩余的百万行中的每一行，还必须将这些更新级联到其他表中的引用外键。您刚刚要求重写数据库的很大一部分。这对并发性、日志文件使用以及其他几乎所有事情都是不利的（每个提到仍然存在行的 ID 号的报告都已过时）。想想如果您的银行帐号在其他人关闭他们的帐户时发生变化，您会发生什么！

填补你似乎在询问的空白通常是没有必要的。

# python - 解包清单，同时投射

> ID：14690722
> 
> 赞同：7
> 
> 时间：2013-02-04T16:11:24.447
> 
> 标签：python, list, casting

我有一长串需要作为整数传递给函数的字符串。我现在正在做的是：

```
my_function(int(list[0]), int(list[1]), int(list[2]), int(list[3])...) 
```

但我知道我可以通过解压缩列表来进行更短的函数调用：

```
my_function(*list) 
```

我想知道是否有一种方法可以将`int()`cast 与 list unpacking结合起来`*`，如下所示：

```
my_function(*int(list))  #Doesn't work 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-04T16:12:53.543

使用内置方法`map`，例如

```
my_function(*map(int, list)) 
```

或者，尝试列表理解：

```
my_function(*[int(x) for x in list]) 
```

顺便提一句：

请不要`list`用作局部变量的名称，这将隐藏内置方法`list`。

通常使用为变量名附加下划线，否则会隐藏内置方法/与关键字冲突。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T16:12:48.027

映射是答案：

```
map(int, my_list) 
```

# php - CodeIgniter 性能多次加载视图与视图中的循环

> ID：14690727
> 
> 赞同：3
> 
> 时间：2013-02-04T16:11:46.350
> 
> 标签：php, performance, codeigniter, templates, variable-assignment

我正在尝试解决可能的扩展性能问题。这两种情况是否有更明显的性能优势：

## 场景一：

多次调用以加载视图并每次传递少量数据

控制器

```
public function index()
{
    $this->load->view('header');
    $this->load->view('table_head');
    $results = $this->db->select('*')->from('table')->get()->result_array();
    foreach ($results as $key)
    {
        $this->load->view('table_row', $key);
    }
    $this->load->view('table_foot');
    $this->load->view('footer');
} 
```

查看 table_head

```
<table>
    <thead>
        <tr>
            <th>...</th>
            <th>...</th>
            ...
        </tr>
    </thead>
    <tbody> 
```

查看 table_row

```
 <tr>
            <td><?php echo $var_a; ?></td>
            <td><?php echo $var_b; ?></td>
            ...
        </tr> 
```

查看 Table_foot

```
 </tbody>
    <tfoot>
        <tr>
            <td>...</td>
            <td>...</td>
            ...
        </tr>
    </tfoot>
</table> 
```

## 场景二：

进行 1 次调用以加载视图并传递大量数据

控制器

```
public function index()
{
    $this->load->view('header');
    $this->data['results'] = $this->db->select('*')->from('table')->get()->result_array();
    $this->load->view('table', $this->data);
    $this->load->view('footer');
} 
```

查看表

```
...
<table>
    <thead>Header Info...</thead>
    <tbody>
        <?php foreach ($results as $key): ?>
            <tr>echo row information as needed</tr>
        <?php endforeach; ?>
    </tbody>
<table>
... 
```

我一直在使用场景 1，因为它有助于保持我的应用程序模块化并通过在控制器中保持逻辑循环来保持 MVC 格式。但是如果说 SQL 调用的结果是 1000 个条目，甚至更多，这两种场景之间是否存在明显的性能差异？我是否试图让我的应用程序过于模块化？我确实尝试尽可能多地回收我的代码，因此我的更多方法将至少加载 8 个视图。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T17:47:29.580

好吧，为了这些测试目的，我崩溃并编写了一个小脚本来为我的表充气。这是我的小测试的结果。为了保持测试等效，我只更改我正在显示的视图。

## 方案 1

控制器：

```
public function results()
{
    $this->load->view('headers/header', $this->default_lib->viewdata());
    $this->load->view('body_bits/bodyopen');
    $this->title['title'] = 'Testing Tesults';
    $this->title['link'] = 'tests';
    $this->title['link_text'] = 'Back to Tests';
    $this->load->view('body_bits/page_title', $this->title);
    $this->load->view('tests/results_open');

    $results = $this->db->select('*')->
        from('test_results')->
        where('software', 'nwralpha')->
        order_by('time', 'ASC')->
        //limit('10')->
        get()->result_array();
    foreach ($results as $key)
    {
        $this->data['name'] = ucwords($this->ion_auth->user($key['user_id'])->row()->username);
        $this->data['time_taken'] = $key['time'];
        $this->data['test_taken'] = $key['test_type'];
        $this->data['common'] = ($key['common_codes'] == 1) ? 'Common Code List' : 'Full Code List';
        $this->data['date'] = $key['date'];

        $this->load->view('tests/results', $this->data);
    }

    $this->load->view('tests/results_close');
    $this->load->view('body_bits/bodyclose');
    $this->load->view('footers/footer');
} 
```

看法

```
<tr>
    <td><?php echo $name; ?></td>
    <td><?php echo $time_taken; ?></td>
    <td><?php echo $test_taken; ?></td>
    <td><?php echo $common; ?></td>
    <td><?php echo $date; ?></td>
</tr> 
```

## 方案 2

控制器：

```
public function results()
{
    $this->load->view('headers/header', $this->default_lib->viewdata());
    $this->load->view('body_bits/bodyopen');
    $this->title['title'] = 'Testing Tesults';
    $this->title['link'] = 'tests';
    $this->title['link_text'] = 'Back to Tests';
    $this->load->view('body_bits/page_title', $this->title);
    $this->load->view('tests/results_open');

    $results = $this->db->select('*')->
        from('test_results')->
        where('software', 'nwralpha')->
        order_by('time', 'ASC')->
        //limit('10')->
        get()->result_array();

    $this->data['results'] = $results;
    $this->load->view('tests/resultsloop', $this->data);

    $this->load->view('tests/results_close');
    $this->load->view('body_bits/bodyclose');
    $this->load->view('footers/footer');
} 
```

看法

```
<?php foreach ($results as $key): ?>
<tr>
    <td><?php echo ucwords($this->ion_auth->user($key['user_id'])->row()->username); ?></td>
    <td><?php echo $key['time']; ?></td>
    <td><?php echo $key['test_type']; ?></td>
    <td><?php echo $key['common_codes']; ?></td>
    <td><?php echo $key['date']; ?></td>
</tr>
<?php endforeach; ?> 
```

### 结果

我用 1004 个结果和 11004 个结果测试了这两个示例，这是我使用 CodeIgniter 的内置 Profiler 发现的

**1004 个结果**

场景1平均加载时间：1.94462秒
场景2平均加载时间：1.1723秒

**11004 个结果**

场景1平均加载时间：19.78867秒
场景2平均加载时间：11.81502秒

## 这意味着什么

对于只想知道答案而不是阅读整篇文章的其他人：
虽然逻辑和 HTML 的分离是 MVC 框架的重点，但在某些可接受的情况下，您可以使用逻辑来确定如何显示信息。在这种情况下，我只使用了一个循环来根据需要不断吐出统一的信息。该测试表明，进行最少的视图调用更有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T20:26:27.597

恕我直言，控制器将相关资产移交给正确的视图。例如，如果您没有得到任何结果——“无结果”条件的操作过程——应该发生在控制器中。（而不是检查 $results 是否存在于您的视图中）

逻辑——我们如何显示结果？-- 发生在视图中。控制器传递 $results，然后视图负责如何显示这些结果。对于场景 #1，您必须进入控制器，以更改页面设计。

当 $results 太大时......然后使用分页。

# apache - .htaccess 重写不存在的文件

> ID：14690728
> 
> 赞同：2
> 
> 时间：2013-02-04T16:11:56.067
> 
> 标签：apache, .htaccess

我在网上看到了一些例子，在 stackoverflow 上也看到了一些答案。我还没有找到任何适合我需要的东西。首先让我说我对 .htaccess 的经验很少，我正在通过在线阅读教程和示例对其进行更多研究。

希望有人可以解释我在这里做错了什么......我不希望文件发送重定向标头，而是使用另一个 URL 掩盖他们要去的 URL（如果它不存在）。

例子：

我转到不存在的页面（例如 404）：

```
http://example.com/hello-everyone 
```

而不是显示 404，我宁愿它显示来自的内容

```
http://example.com/?/hello-everyone 
```

注意*我不想要重定向标头，因为我不希望人们必须看到 ?/ 前缀。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T16:32:19.020

你可以试试这个：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI}  /([^/]+)/?$  [NC]
RewriteRule .*   index.php?key=%1  [L] 
```

静默地图

`http://www.mywebsite.com/val`

到

`http://www.mywebsite.com/index.php?key=val`

任何固定键名在哪里`key`，“val”是传入 URL 中的变量值。

`/val`必须是传入 URL 中的最后一个字符串，规则才能起作用。

对于永久和可见的重定向，替换`[L]`为`[R=301,L]`

使用这种类型的传入 URL`http://www.mywebsite.com/val`可能会让您在未来停止使用目前使用的更难记住的 URL `http://www.mywebsite.com/?/val`。

# python - 如何获取 Python 线程中异常的完整信息？

> ID：14690729
> 
> 赞同：2
> 
> 时间：2013-02-04T16:11:58.930
> 
> 标签：python, multithreading, exception-handling, python-2.7

当线程中发生异常时，而不是获取包含异常行号的完整异常信息，我得到以下信息：

```
Unhandled exception in thread started by <function get_artist at 0x0000000002C2FEB8> 
```

我可以手动编写 try, catch 程序来打印出有关异常的缺失信息吗？

我努力了：

```
except Exception:
    traceback.print_exc() 
```

但是，它仍然只打印上述消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T16:20:15.153

您是否尝试过使用 as 获取异常？像这样的东西...

```
try:
    raise Exception('MONSTER!')
except Exception as ex:
    print 'The error is a %s' % ex

>>> The error is a MONSTER! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T23:38:49.957

要获取行号：

```
import sys

if __name__ == '__main__':
    try:
        raise Exception('MONSTER!')
    except Exception as ex:
        print sys.exc_traceback.tb_lineno 
```

# android - 通过应用程序向 facebook 添加新的对象图对象

> ID：14690735
> 
> 赞同：0
> 
> 时间：2013-02-04T16:12:26.003
> 
> 标签：android, facebook, facebook-graph-api

我正在创建一个应用程序，允许人们分享他们在 Android 应用程序中创建的自行车路线。

当用户保存路线时，它应该出现在他们的时间线上，就像使用创建的一样

我在 Heroku 应用服务器上添加了一个代表路由对象的页面，其中包含示例元数据。问题是它只有一页，因此任何上传的路由都具有与路由 html 文件中包含的相同示例名称。

我想我需要为每条上传的路线创建一个新的 HTML 页面，然后将其提交给 facebook，但我不知道一个简单的方法来做到这一点。

我是否必须让我的 Android 应用程序创建一个新的 HTML 页面，填写元数据然后将其上传到 heroku 服务器？

谢谢

编辑：这是我正在使用的 HTML 页面：

```
<?php

$params = array();
if(count($_GET) > 0) {
    $params = $_GET;
} else {
    $params = $_POST;
}
// defaults
if($params['title'] == "") $params['title'] = "Route";
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
    <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# APP_NAME_SPACE: http://ogp.me/ns/fb/APP_NAME_SPACE#">
    <title></title>        
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <!-- Open Graph meta tags -->
    <meta property="fb:app_id" content="APP_ID" /> 
    <meta property="og:type"   content="APP_NAME_SPACE:route" /> 
        <meta property="og:url" content="https://APP_NAME.herokuapp.com/route.html?title=<?php echo $params['title']; ?>"/>
    <meta property="og:title" content="<?php echo $params['title']; ?>"/>
    <meta property="og:image"  content="LINK_TO_IMAGE" />
    </head>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T00:46:46.363

发现这个教程有一个很好的例子来设置动态对象：

```
http://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/publish-open-graph-story/ 
```

# php - PHP重定向/加载另一个页面

> ID：14690738
> 
> 赞同：0
> 
> 时间：2013-02-04T16:12:29.397
> 
> 标签：php, api

我知道如何使用此代码重定向/加载'

```
header('Location: http://www.someURL.com'); 
```

但是使用字符串呢？

```
$edit_invoice = $invoice->invoice->links->edit;
header( 'Location: '.$edit_invoice.' ) ; 
```

如果您想知道，我正在使用 Freshbooks API 库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T16:14:48.700

你有一个额外的撇号。header('位置：'.$edit_invoice);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T16:14:23.173

您现在设置字符串版本的方式不起作用，因为您在调用`header()`函数结束时开始了一个新字符串。

```
header('Location: ' . $edit_invoice); 
```

应该可以，只要`$edit_invoice`是有效的链接。

# oracle10g - Oracle 10g 插入查询作为查询与过程执行不一致，并且不时执行不同

> ID：14690751
> 
> 赞同：0
> 
> 时间：2013-02-04T16:13:14.267
> 
> 标签：oracle10g

我面临一个非常奇怪的问题，我在一个过程中有一个插入语句......几乎

```
 inert
    into oracle_Table
    SELECT cr.a AS a,       
           cr.b AS b,
           cr.c AS c,
           max(d.column_name) as d
    FROM "table 1"@Pmo.World Cr,
          table2@Pmo.World       d
     WHERE d."a" = cr."column name"
     GROUP BY cr.a,
              cr.b,
              cr.c 
```

@Pmo.World 是 MSSQL 的数据库链接...

我现在遇到的问题是，每次我将此插入作为查询运行时。一切都按应有的方式工作...但是，当我将此插入程序放入程序时，它什么也没有插入...

考虑字符转换问题，我将程序更改为

```
inert
into oracle_Table
SELECT to_char(cr.a) AS a,       
       to_char(cr.b) AS b,
       to_char(cr.c) AS c,
       max(d.column_name) as d
  FROM "table 1"@Pmo.World Cr,
       table2@Pmo.World       d
 WHERE d."a" = cr."column name"
 GROUP BY cr.a,
          cr.b,
          cr.c 
```

然后这个插入器在程序中工作......但是当我用不需要 to_char 的原始版本恢复它时......它仍在工作......然后我让它运行了几天......因为它每次运行一次一天，它在前两天工作，然后在第三天停止工作......我验证了源表，每次运行这个程序时，源表都不为空......这太令人困惑了，因为如果我手动运行作为查询插入，每次我运行它时它都会工作......但是如果我把它放入一个过程中，它会不时工作......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T04:04:10.500

a,b,c 的类型为 varchar2 并且我确实在插入后立即提交...例如，如果我有一个测试程序

```
declare 
-- Local variables here
i integer;
begin
inert
into oracle_Table
SELECT cr.a AS a, 
cr.b AS b,
cr.c AS c,
max(d.column_name) as d
FROM "table 1"@Pmo.World Cr,
table2@Pmo.World d
WHERE d."a" = cr."column name"
GROUP BY cr.a,
cr.b,
cr.c
end;
commit; 
```

什么都不能插入

# couchdb - 每个文档中同一实体的多个数据

> ID：14690755
> 
> 赞同：0
> 
> 时间：2013-02-04T16:13:33.890
> 
> 标签：couchdb, couchbase, couchapp

我正在为客户创建一个文档，其中要求每个特定客户在访问时具有多个输入时间戳。例如，每次客户访问商店时，它都会存储时间和日期以及访问目的。我只是对这种行为感到好奇，如果它是现有客户，添加相同数据的多个条目是否有意义，或者在 nosql 逻辑中如何工作？如果我想在同一个文档上使用相同的冗余数据，我有点困惑，我应该如何实现它？或者数组可能是一个不错的选择？

谢谢。

# php - 在 php 中使用 if 语句来判断变量的值

> ID：14690764
> 
> 赞同：-2
> 
> 时间：2013-02-04T16:14:06.303
> 
> 标签：php, variables, if-statement

我有一个 if 语句，我在 php 中使用它作为 foreach 循环的一部分。

id 喜欢做的是使 if 语句成为一个变量，这样我就可以调用该变量。像这样的东西

```
$best_xml = if ($wh_odds_attrib['oddsDecimal'] < $lad_odds_attrib['oddsDecimal']) {
    $lad_odds_attrib['oddsDecimal'];
  }

  else {
    $wh_odds_attrib['oddsDecimal'];
  }; 
```

但是当我运行它时，我一直收到这个错误 - Parse error: syntax error, unexpected 'if' (T_IF) in /Applications/MAMP/htdocs/event.php on line 74（第 74 行是开始 $best_xml 的第一行）

这可能吗/这是正确的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T16:15:23.723

试试这个：

```
$best_xml = ($wh_odds_attrib['oddsDecimal'] < $lad_odds_attrib['oddsDecimal']) ? $lad_odds_attrib['oddsDecimal']:$wh_odds_attrib['oddsDecimal']; 
```

`$best_xml`然后将保留（如果为`$lad_odds_attrib['oddsDecimal']`真）或`$wh_odds_attrib['oddsDecimal']`（如果为假）的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T16:15:29.510

`if`语句不会评估为 PHP 中的可分配值。您不能将 if 语句分配给变量。

但是，您可以使用[三元运算符](http://php.net/manual/en/language.operators.comparison.php#language.operators.comparison.ternary)：

```
$best_xml = $wh_odds_attrib['oddsDecimal'] < $lad_odds_attrib['oddsDecimal'] ? 
  $lad_odds_attrib['oddsDecimal'] : $wh_odds_attrib['oddsDecimal']; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T16:16:39.623

不，你不能这样做，但你可以使用这个：

```
$best_xml = ($wh_odds_attrib['oddsDecimal'] < $lad_odds_attrib['oddsDecimal']) ? $lad_odds_attrib['oddsDecimal'] : $wh_odds_attrib['oddsDecimal']; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T17:12:24.777

是的，事实上你*可以*用这些被称为“函数”的新东西来做到这一点。你的应该看起来像：

```
function myFunction($var1, $var2) {
    if ($var1 < $var2) {
        return $var1;
    } else {
        return $var2;
    }
}

$best_xml = myFunction($wh_odds_attrib['oddsDecimal'], $lad_odds_attrib['oddsDecimal']); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T16:16:39.950

`if`不返回值，您必须*手动*分配值：

```
$best_xml = null;
if ($wh_odds_attrib['oddsDecimal'] < $lad_odds_attrib['oddsDecimal']) {
    $best_xml = $lad_odds_attrib['oddsDecimal'];
} else {
    $best_xml = $wh_odds_attrib['oddsDecimal'];
}; 
```

或者您可以使用三元运算符：

```
$best_xml = $wh_odds_attrib['oddsDecimal'] < $lad_odds_attrib['oddsDecimal'] ? 
            $lad_odds_attrib['oddsDecimal'] : $wh_odds_attrib['oddsDecimal']; 
```

# jquery - Fabcybox 1.3.4 - 悬停时的缩略图标题

> ID：14690765
> 
> 赞同：1
> 
> 时间：2013-02-04T16:14:17.303
> 
> 标签：jquery, fancybox, hover

嗨，我正在尝试使用 Fancybox 1.3.4 为我的图片库的缩略图添加标题，但我不确定如何执行此操作。到目前为止，这是我的代码。

```
<script>
    !window.jQuery && document.write('<script src="jquery-1.4.3.min.js"><\/script>');
</script>

<script type="text/javascript" src="scripts/jquery.fancybox-1.3.4/fancybox/jquery.mousewheel-3.0.4.pack.js"></script>
    <script type="text/javascript" src="scripts/jquery.fancybox-1.3.4/fancybox/jquery.fancybox-1.3.4.pack.js"></script>
    <link rel="stylesheet" type="text/css" href="scripts/jquery.fancybox-1.3.4/fancybox/jquery.fancybox-1.3.4.css" media="screen" />
<script type="text/javascript">
        $(document).ready(function() {

                $("a[rel=example_group]").fancybox({
                'transitionIn'      : 'none',
                'transitionOut'     : 'none',
                'titlePosition'     : 'over',
                'titleFormat'       : function(title, currentArray, currentIndex, currentOpts) {
                    return '<span id="fancybox-title-over">Image ' + (currentIndex + 1) + ' / ' + currentArray.length + (title.length ? ' &nbsp; ' + title : '') + '</span>';
                }
            });

        });
    </script>

<div id="content">
<div id="content_wrapper">
<a rel="example_group" href="images/gallery/big/winter_big.jpg" title="Winter - Personal"><img id="thumb" alt="" src="images/gallery/thumbs/winter_small.jpg" /></a> 
```

这是我如何从图库中编码一张图像和缩略图的示例

# c# - 方法存在时不包含定义

> ID：14690768
> 
> 赞同：0
> 
> 时间：2013-02-04T16:14:32.217
> 
> 标签：c#, visual-studio-2012, csla, codesmith

我在 csla 框架中使用 Visual Studio 2012 和 Codesmith 工具。

我最近重新生成了我的课程，现在我遇到了最奇怪的错误。在我的一个 aspx.cs 文件中，在构建之后，它说

> “X 不包含 Y 的定义”

然而，在 X 类中有一个 Y 的定义。事实上，我可以右键单击该方法并导航到它，它确实存在。Visual Studio 建议为它生成一个方法，我这样做了。但是现在错误说

> “X 已经定义了一个名为 Y 的成员，具有相同的参数类型”

即该方法已经存在。

这是没有意义的，因为这些类文件并没有随着重新生成而改变。我知道这一点，因为我们的文件处于颠覆之下。

有没有人以前见过这个问题并对如何解决它有任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:14:07.200

对于将来发现此问题的任何人。问题在于使用codesmith“Entities.csp”重新生成。原来 Class X 在再生之前是可编辑的根，但不知何故设法变成了可编辑的孩子。尽管代码仍然存在，但 X.cs、X.DataAccess 和 X.generated 的组合没有缺少的方法。

# entity-framework - 实体框架 - 在实体尚未提交到数据库时添加关系

> ID：14690770
> 
> 赞同：1
> 
> 时间：2013-02-04T16:14:38.857
> 
> 标签：entity-framework, entity-relationship

我在两个表之间有一个多对多的关系：**[User]**和**[Group]**（PK 被称为 ID，它是一个 IDENTITY 列）。该关系在数据库中被规范化为一个名为**[UserGroup]**的表，其中包含两列：UserID 和 GroupID。

到目前为止，EF 模型（使用数据库优先）对**[UserGroup]**表进行了抽象，它并未显示为显式表。

我现在应该指出，**[User]**和**[Group]**表还包含一个 OrganisationID 列，并且所有用户和组（及其关系）都驻留在特定的组织中）

我现在需要将 OrganisationID 字段添加到**[UserGroup]**以提高数据库的性能（以便**[UserGroup]**按 OrganisationID 进行聚类）。因此，在从数据库执行刷新后，**[UserGroup]**现在显示为一个不同的实体，它破坏了我用来将用户分配到组的现有 C# 代码。

以前，如果我必须创建一个组并将其分配给用户，我会使用：

```
user.Groups.Add(group); 
```

即使组和用户对象刚刚创建并且尚未为其分配数据库键，EF 通过在**SaveChanges** ( ）。

现在**[UserGroup]**作为 EF 模型中的显式表存在，此代码不起作用（原因：还必须显式添加 OrganisationID）但我不知道如何创建**[UserGroup]**对象并将其与将其链接到新创建的**[User]**和**[Group]**行。

我得到的最接近的是：

```
GroupUser gu = new GroupUser { GroupID = group.ID, OrganisationID = nOrganisationID, UserID = u.ID };
u.GroupUsers.Add( gu ); 
```

...但它不会起作用，因为 user.ID 和 group.ID 仍然是 0。任何人都可以就此提出建议。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T22:44:17.060

您应该将两个导航属性添加到`UserGroup`：

```
public virtual Group Group { get; set; }
public virtual User User { get; set; } 
```

并使用新的组和用户设置它们。EF 将找出插入数据的正确顺序并及时设置原始外键值。

您可以将其映射为

```
HasRequired(p => p.Group).WithMany().HasForeignKey(p => p.GroupId); 
```

在一个`UserGroupMapping`班级 ( `EntityTypeConfiguration<UserGroup>`)。

# java - 什么时候调用枚举构造函数？

> ID：14690771
> 
> 赞同：1
> 
> 时间：2013-02-04T16:14:39.773
> 
> 标签：java

我正在将一副纸牌实现为单例，使用枚举，以便我可以从程序中的任何地方通用访问该纸牌。作为枚举构造函数的一部分，它用每张卡片洗牌一个数组列表并将它们全部推入堆栈（这似乎象征性地合适）。

什么时候调用构造函数？它是在运行时构建的吗？编译时间？我第一次打电话给枚举？我可以期望每次我运行程序时，这副纸牌都会正确随机化吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T16:19:06.733

我认为你设计它的方式是错误的。表示一`enum`组不应该具有全局功能的有限值。它们只是常量，可以为它们中的每一个提供功能，但再多的东西都不值得这样做。

**直接在枚举构造函数（在任何情况下都会为每个常量调用**）中将洗牌功能带到甲板上似乎不是正确的方法。

更好的解决方案是拥有 4 个不同的类，例如：

```
enum Suit {
  HEARTS,
  CLUBS,
  ..
}

enum Value {
  ACE,
  TWO,
  ..
}

class Card {
  Suit suit;
  Value value;
}

class Deck {
  List<Card> cards;

  public void shuffle() { .. }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T16:20:14.663

您不应该为此使用单例。

但是要回答这个问题，构造函数是在类加载器加载枚举类（Deck）并初始化时调用的。因此，在任何代码行可以调用 Deck 类的任何方法之前，deck 将被洗牌。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T16:20:47.840

对于每个枚举类型，构造函数在第一次按顺序初始化 Enum 类时被调用。

# c# - 设置列表 如果返回的行为 NULL，则项目为空

> ID：14690777
> 
> 赞同：2
> 
> 时间：2013-02-04T16:15:04.070
> 
> 标签：c#, sql-server, entity-framework

我需要填充一个`List<string>`，但是当我的查询返回一个空值时，在这个列表中没有创建空字符串。

```
var maskObj = (from m in context.sistema_DocType_Index
               join n in context.sistema_Indexes on m.indexId equals n.id
               where m.id == docTypeId
               select new maskModel
               {
                    mask = n.mask
               }).ToList();

return Content(""+maskObj.Count()); 
```

如果此查询返回 3 行，并且全部为`NULL`，则列表中需要 3 个空字符串。有什么办法可以做到这一点？

我知道对于 Sql Server，NULL 是没有价值的。即使 NULL == NULL 也返回 false，那么我该如何继续呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T16:17:00.067

我认为您想要以下内容：

```
mask = n.mask ?? string.Empty 
```

这使用[null 合并运算符](http://msdn.microsoft.com/en-us/library/ms173224.aspx)来使用`string.Empty`if `n.mask`is null。

实体框架生成的SQL应该是这样的：

```
COALESCE(MASK, '') 
```

我的回答假设当您说“如果此查询返回 3 行，并且它们全部为 NULL”时，您`mask`正在谈论的是存在。`null`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-04T16:18:43.317

在查询中添加另一个 where 子句。

```
.Where(maskModel => !string.IsNullOrEmpty(maskModel)); 
```

# google-finance - Google-Finance：信息 URL

> ID：14690780
> 
> 赞同：0
> 
> 时间：2013-02-04T16:15:21.337
> 
> 标签：google-finance

我知道谷歌已经停止了他们的金融 API。但是，似乎仍然存在某种 API。

例如，这些 URL 都有效：

[http://www.google.com/finance/info?q=TTWO](http://www.google.com/finance/info?q=TTWO)
[http://www.google.com/finance/getchart?q=TTWO](http://www.google.com/finance/getchart?q=TTWO)

是否有任何关于存在哪些 URL 以及它们的参数是什么的文档？

他们在输出中添加了//，我不知道为什么；但是，将其过滤掉应该不是什么大问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T18:02:23.427

这是之前有效的链接：[http ://code.google.com/apis/finance/developers_guide_protocol.html](http://code.google.com/apis/finance/developers_guide_protocol.html)

我建议您在[http://archive.org/中尝试一下](http://archive.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T18:33:35.067

从我在[这个](https://groups.google.com/forum/?fromgroups=#!topic/google-finance-apis/oogTGDO2p6E)线程中看到的内容来看，这些 URL 从未被记录在案，因为它们不是供公众使用的。我想我会接受我从那里得到的东西，至少它是一些东西:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-09T13:11:12.560

这里还有一些 URL 信息：http: [//www.networkerror.org/component/content/44.html?task=view](http://www.networkerror.org/component/content/44.html?task=view)

# wcf - InnerException 消息是“传递给 W 服务时使用数据合同名称的类型”

> ID：14690783
> 
> 赞同：3
> 
> 时间：2013-02-04T16:15:25.517
> 
> 标签：wcf

我有一个 WCF 服务，其运营合同为

```
void AddQuery(IQuery Query); 
```

我的 IQuery 是这样的

```
public interface IQuery
{
    Guid                Id { get; set; }        
    string              QueryNo { get; set; }
    string              Status { get; set; }
    IData               data { get; set; }
} 
```

IQuery 的实现在

```
[Serializable]
public class Query : IQuery
{
    Guid                Id { get; set; }        
    string              QueryNo { get; set; }
    string              Status { get; set; }
    IData               data { get; set; }
} 
```

当我试图从客户端发送我的对象时

```
 public void AddQuery(IQuery query)
  {
      try
      {
          // I am sure that the query object is not null and it is implemented
          objServiceClient.AddEnquiry(query);
      }
      catch (Exception ex)
      {
      }
  } 
```

但我得到了一个例外

> 尝试序列化参数时出错。InnerException 消息是 'Type 'ViewModels.Query' ，数据合同名称为 'Query: [http://schemas.datacontract.org/2004/07/ViewModels](http://schemas.datacontract.org/2004/07/ViewModels) ' 不是预期的。考虑使用 DataContractResolver 或将任何静态未知的类型添加到已知类型列表中 - 例如，通过使用 KnownTypeAttribute 属性或将它们添加到传递给 DataContractSerializer 的已知类型列表中。有关更多详细信息，请参阅 InnerException。

谁能建议我解决此错误的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T16:21:54.293

考虑序列化具体类。您不能序列化接口。参考这个答案：[https ://stackoverflow.com/a/4659289/860243](https://stackoverflow.com/a/4659289/860243)

我从 bing 中找到了一些有用的链接：

[http://www.danrigsby.com/blog/index.php/2008/03/07/xmlserializer-vs-datacontractserializer-serialization-in-wcf/](http://www.danrigsby.com/blog/index.php/2008/03/07/xmlserializer-vs-datacontractserializer-serialization-in-wcf/)

上面的文章讨论了您的情况和使用`[KnownType]`派生类的示例

**更新：**

基于此[链接](https://stackoverflow.com/questions/153775/wcf-and-interfaces-as-parameters)，请检查以下更新：

```
public interface IQuery 
{ 
    Guid Id { get; set; }
    string QueryNo{ get; set; } 
    string Status { get; set; } 
    IData data {get; set;}
} 
```

您的 Query 类使用 Data contract 序列化器实现您的接口`IQuery`

```
[DataContract]
public class Query : IQuery
{
    [DataMember]
    public Guid Id { get; set; };
    [DataMember]
    public string QueryNo { get; set; };
    [DataMember]
    public string Status { get; set; };
    [DataMember]
    public Data data { get; set; }; //Make sure you serialize Data class as well
} 
```

对于您的服务合同：

```
[ServiceContract]
public interface IMyQueryService
{
      [OperationContract]
      [ServiceKnownType(typeof(Query))]
      void AddQuery(IQuery query);
} 
```

这`[ServiceKnownType(typeof(Query))]`将使您的操作合同允许`Query`作为输入。另请注意，您需要指定所有`IQuery`需要作为参数传递给具有`ServiceKnownType`属性的操作合同的实现。

此外，如果您希望多个（或所有）操作合同将它们作为参数，请分别指定`ServiceKnownType`属性`ServiceContract`而不是每个操作合同。

希望这可以帮助！

# c++ - c ++队列多线程等待作业完成

> ID：14690784
> 
> 赞同：1
> 
> 时间：2013-02-04T16:15:29.260
> 
> 标签：c++, multithreading, queue, jobs

是否有一个 c++ 多线程库，其中有一个队列可以包含必须等待其他作业完成的作业。线程池正在处理队列中的所有作业。

我想编写一个多线程 c++ 程序来生成和使用放置在队列中的作业，只有当其他一些作业已经处理时，才能处理其中的一些作业。

类似于在 qsub（网格队列管理器）中，您可以将作业放入队列中，并且必须保持直到其他作业完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T20:13:08.177

找到了我要找的东西：

在英特尔线程构建模块中实现的任务窃取： [http ://en.wikipedia.org/wiki/Intel_Threading_Building_Blocks](http://en.wikipedia.org/wiki/Intel_Threading_Building_Blocks)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T18:32:09.793

您可能想研究所谓的信号量。 [http://en.wikipedia.org/wiki/Semaphore_（编程）](http://en.wikipedia.org/wiki/Semaphore_(programming))

例如，您可以使用 Boost Threading 模块编写信号量。我希望这可以帮助您解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T22:17:23.453

看看 Herb Sutter 的这个演讲。他给出了一个 C++11 风格工作的实现。

[Herb Sutter - C++ 并发](http://channel9.msdn.com/Shows/Going+Deep/C-and-Beyond-2012-Herb-Sutter-Concurrency-and-Parallelism)

# c# - 如何使用 Asp.net C# 在 sqlserver 中触发两个插入命令

> ID：14690786
> 
> 赞同：-7
> 
> 时间：2013-02-04T16:15:31.693
> 
> 标签：c#, asp.net

```
if (dpsessional.SelectedItem.Text.ToString().Equals("1"))
{

if (lengthofbatch == 1)
              {

                 com = new SqlCommand("insert into Attendence_Stu_Main(st_id,st_rollno,st_name,branch_name,sem_no,batch_year,batch_name,scode,sess_no,attendence,total) values (@Stid,@Strollno,@Stname,@Stbranch,@Ssemno,@Syear,@Sbatch,@Scode,@Ssessno,@Satt,@Stotal)", con);
              }
              else
              {
                  if (lbsubjecttype.Text.Equals("L"))

                  {
                      com = new SqlCommand("insert into Attendence_Stu_Main(st_id,st_rollno,st_name,branch_name,sem_no,batch_year,batch_name,scode,sess_no,attendence,total) values (@Stid,@Strollno,@Stname,@Stbranch,@Ssemno,@Syear,firstchar,@Scode,@Ssessno,00,00)", con);

                      com = new SqlCommand("insert into 
```

Attendence_Stu_MainL1(st_id,st_rollno,st_name,branch_name,sem_no,batch_year,batch_name,scod e,sess_no,attendence,total) 值

(@Stid,@Strollno,@Stname,@Stbranch,@Ssemno,@Syear,@Sbatch,@Scode,@Ssessno,@Satt,@Stotal)",

缺点）；} 别的

```
 { 
```

com = new SqlCommand("插入

Attendence_Stu_MainL1(st_id,st_rollno,st_name,branch_name,sem_no,batch_year,batch_name,scod

e,sess_no,attendence,total) 值

(@Stid,@Strollno,@Stname,@Stbranch,@Ssemno,@Syear,@Sbatch,@Scode,@Ssessno,@Satt,@Stotal)",

缺点）；

```
 }

                }
          }

               com.Parameters.AddWithValue("@Stid", g1.Cells[0].Text); 
```

com.Parameters.AddWithValue("@Strollno", g1.Cells[1].Text); com.Parameters.AddWithValue("@Stname", g1.Cells[2].Text);

com.Parameters.AddWithValue("@Stbranch", g1.Cells[3].Text);

```
 com.Parameters.AddWithValue("@Ssemno", g1.Cells[4].Text);

            com.Parameters.AddWithValue("@Syear", g1.Cells[5].Text);

            com.Parameters.AddWithValue("@Sbatch", label1);

            com.Parameters.AddWithValue("@Scode", label2);

            com.Parameters.AddWithValue("@Ssessno", label3);

            com.Parameters.AddWithValue("@Satt", textbox);

            com.Parameters.AddWithValue("@Stotal", textbox1);

            com.ExecuteNonQuery();

            con.Close();
        }

        catch (SqlException ex)
        {

            Label5.Text = ex.Message;

            Label5.Visible = true;
        }

    }

} 
```

..................................................... .........................................................

com = new SqlCommand("插入到 Attendence_Stu_Main(st_id,st_rollno,st_name,branch_name,sem_no,batch_year,batch_name,scode, sess_no,attendence,total) 值 (@Stid,@Strollno,@Stname,@Stbranch,@Ssemno,@ Syear,firstchar,@Scode,@Ssessno,00,00)", con);

com = new SqlCommand("插入

Attendence_Stu_MainL1(st_id,st_rollno,st_name,branch_name,sem_no,batch_year,batch_name,scod

e,sess_no,attendence,total) 值

(@Stid,@Strollno,@Stname,@Stbranch,@Ssemno,@Syear,@Sbatch,@Scode,@Ssessno,@Satt,@Stotal)",

缺点）；

从插入命令的 2 中，只有一个被触发，另一个没有被触发..我尝试过使用

调试，显示清晰遍历但无法存储在表中

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T16:27:00.377

尽管这是人类最难以理解的问题，但我将尝试回答这个问题。如果您可以使您的问题易于阅读和简洁，并让我们知道您的期望，那就去做吧。

你不断地覆盖你的命令。

```
com = new SqlCommand("insert into Attendence_Stu_Main(st_id,st_rollno,st_name,branch_name,sem_no,batch_year,batch_name,scode,sess_no,attendence,total) values (@Stid,@Strollno,@Stname,@Stbranch,@Ssemno,@Syear,firstchar,@Scode,@Ssessno,00,00)", con); 
```

然后，在没有实际将更改*提交*到数据库的情况下，您将覆盖它：

```
com = new SqlCommand("insert into Attendence_Stu_MainL1(st_id,st_rollno,st_name,branch_name,sem_no,batch_year,batch_name,scode,sess_no,attendence,total) values (@Stid,@Strollno,@Stname,@Stbranch,@Ssemno,@Syear,@Sbatch,@Scode,@Ssessno,@Satt,@Stotal)", 
```

我会让它们成为两个不同的`SqlCommand`实例。

顺便说一句，您正在进行的数据库表和列命名方案并不那么漂亮。

# jakarta-ee - 为不同的模块但相同的门户部署多个战争

> ID：14690789
> 
> 赞同：0
> 
> 时间：2013-02-04T16:15:37.393
> 
> 标签：jakarta-ee, struts, maven-3, jboss7.x, ear

我有一个基于 struts（1.2）并部署在 JBOSS AS 7 上的遗留项目。

几年前，该项目开始时很小，只针对一种产品，但现在有几个部分。我们希望将它们分解为 maven 模块并从中生成单独的战争并部署它们 - 这样任何需要更改的模块都将使用 Jboss 管理控制台重新发布。

想法是将所有模块打包为 EAR 中的自给自足战争并进行部署。但是，我看到如果我将所有内容打包在一个 EAR 中，则无法热部署它的一部分，即其中的单一战争。EAR甚至可以吗？

此外，所有模块都将有一个共同的登录前端 - 有没有办法进行共同的仅登录战争，然后可以在保持会话的同时重定向到其他战争？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T17:16:54.913

您可以创建公开的存档，因此您可以独立更新每次战争或任何 lib/*jar 文件的战争。

您应该查看[此处](https://docs.jboss.org/author/display/AS7/Application+deployment)以了解如何触发展开的存档的部署。

但这将作为一个应用程序触发，并且每次您进行修改时都会重新部署整个耳朵。（规范要求没有真正的热部署）

另一种选择是将依赖关系放在不同的 JBoss 模块中（[例如此处](http://www.javacodegeeks.com/2011/09/jboss-modules-example-modular-web.html)），然后您可以与模块中的共享 jar 进行独立战争。但这将是完全不同的应用程序，您将无法在不同的应用程序之间共享 EJB 或 CDI bean。

这个[答案](https://stackoverflow.com/questions/8289813/best-practice-for-loading-3rd-party-jars-in-jboss-as7-standalone-deployment)有更多关于用于处理共享依赖的模块的详细信息。

# jquery - jQuery：为什么元素存在于文档准备好的页面上？

> ID：14690790
> 
> 赞同：0
> 
> 时间：2013-02-04T16:15:38.387
> 
> 标签：jquery, events, click, chain, insertafter

我很好奇为什么下面的代码会在页面上显示“为什么这个文本出现在加载时”？

```
<!DOCTYPE html>
<html lang="en">
<head>
<title>Hello title</title>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
<script>
$(function() {
    $('<h4>Why this text appears on load</h4>').click(function() {
        alert('3');
    }).insertAfter($('h1'));
});
</script>
</head>
<body>
    <h1>H</h1>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T16:19:14.587

`DOMContentLoaded`在 jquery.js 中，jQuery 通过使用事件或事件来侦听准备就绪的 DOM `document.onreadystatechange`。一旦 dom 准备就绪，所有传递给的回调都将`.ready()`被触发，之后对它的任何调用`.ready()`都会立即执行。

注：`$(function(){})`相当于`$(document).ready(function(){})`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T16:18:40.507

`$('<h4>Why this text appears on load</h4>')``insertAfter($('h1'));`在[document.ready()](http://api.jquery.com/ready/)之后插入

`$(function() {})``document.ready(function() {})`是页面中的 html 元素可用时立即执行的缩写形式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-04T16:20:05.450

`$(function(){})`是 的简写`$(document).ready(function(){})`。因此，当文档（DOM）准备就绪时，您的代码就会运行。

You create an `<h4>` element, assign a click handler to it, then append it after each `<h1>` on the page.

# html - 歌剧溢出问题 css/html

> ID：14690798
> 
> 赞同：0
> 
> 时间：2013-02-04T16:16:15.497
> 
> 标签：html, css, opera

我的渐变有问题。**渐变在歌剧**中没有显示 wel 。我究竟做错了什么？有关更多代码，请参见 jsfiddle :)

[http://jsfiddle.net/KtDTK/7/](http://jsfiddle.net/KtDTK/7/)

```
<div class="product_1">   
  <div class="product_block">
    <div class="block-gradient">
</div>
  <div class="block-top">
    <div class="text">
  <h4>kenmerk header</h4>
  <div class="kenmerk">
    kenmerk
  </div>
</div>
  </div>
  <div class="block-mid">
    <div class="intro">
  Introduction
</div>
  </div>
  <div class="block-footer">
    <a class="meerinfo" href="/empty.php?p=meerinfo&menuID=1">info</a>
  </div>
</div>  
<div class="order">
  <p><a class="order_text" href="#">Bestellen</a></p>
</div>
</div>` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:58:54.273

降低高度而不是`margin-top: -43px;`在您的`.block-gradient`div 中使用。

```
.block-gradient { 
border-radius: 253px 33% 304% 0;
height: 107px;
/*margin-top: -43px;*/
opacity: 0.4;
width: 204px;
z-index: 1;
} 
```

# c# - 将 WinForm 分解为另一个 Form

> ID：14690800
> 
> 赞同：1
> 
> 时间：2013-02-04T16:16:16.747
> 
> 标签：c#, winforms, graphics

[我正试图让我的 winForms 像Manhole](https://www.youtube.com/watch?v=YyOTq1EpV5o)那样相互溶解。所有表格都在屏幕中央打开。任何帮助将不胜感激。

这就是我目前打开和关闭表单的方式：

```
private void storyChooser_Click(object sender, EventArgs e)
{
    switch (userChoice)
    {
        case Choice.Son:
            this.Close();
            form2.Show();
            form2.label1.Text = "Son has been choosen.";
            break;
        case Choice.Dad:
            this.Close();
            form2.Show();
            form2.label1.Text = "Dad has been choosen.";
            break;
        case Choice.Mom:
            this.Close();
            form2.Show();
            form2.label1.Text = "Mom has been Choosen.";
            break;
        default:
            break;
    }
} 
```

为了阻止应用程序关闭，我从一开始就运行了所有表单，但未显示。我无法获得内存效率更高的工作方式，所以我现在将其用作解决方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T16:33:37.567

您想要的称为交叉淡入淡出。您拍摄一张图像并将每个像素从一张图像插入到另一张图像。

这是直截了当的。假设时间从 0（所有第一张图像）到 1.0（所有最后一张图像），那么您将执行以下操作：

```
public Color Lerp(Color c1, Color c2, float t)
{
    return Color.FromArgb(Lerp(c1.R, c2.R, t), Lerp(c1.G, c2.G, t), Lerp(c1.B, c2.B, t));
}

public int Lerp(int a, int b, float t)
{
    float tp = 1.0f - t;
    return (int)(tp * a + t * b);
} 
```

您的流程将是：

1.  [将 form1 渲染为位图](https://stackoverflow.com/questions/1784295/rendering-form-to-bitmap)
2.  将 form2 渲染为位图
3.  分配临时位图
4.  对于从 0 到 1 的 t，例如 0.1，在 form1 位图和 form2 位图之间的每一个 (x, y) 处进行 Lerp，并将该像素设置在暂存区
5.  显示划痕

现在，您可以编写此代码，并且您应该确保它有效。如果性能足够好，那就顺其自然吧。

我认为您实际上并不想使用此代码（我以编写图像处理代码为生）。在 .NET 中进行所有像素修改的开销可能会让您陷入困境。您最好从位图中获取原始字节字节并对它们进行 lerp，而不是执行 get/get/set 像素。此外，每个颜色分量的这三个浮点运算也会拖累你，所以如果是我，如果我对字节进行运算，我会在定点上完成工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T16:27:33.230

第一：WinForms 不是创建游戏的最佳选择。

但是，如果您想或必须这样做，您可能不应该为此任务使用多种形式。

您可以以一种形式创建多个面板，然后使用计时器操作它们的不透明度。

如果您创建大型游戏，则必须动态创建屏幕。

**样本**

这是一个如何动态创建控件的示例。您可以开始为不同的场景创建自己的控件（例如为问题的不同答案提供 n 个组合框的控件）。然后你可以开始用步骤来定义你的故事，然后每个步骤都会创建正确的控件，比如一个“决策步骤”，它提出一个问题并根据答案选择下一步。

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        var newButton = new Button { Text = "Click me", Dock = DockStyle.Top };
        newButton.Click += new EventHandler(newButton_Click);
        this.panel1.Controls.Add(newButton);
    }

    void newButton_Click(object sender, EventArgs e)
    {
        MessageBox.Show("I was clicked");
        var button = sender as Button;
        button.Click -= new EventHandler(newButton_Click);
        this.panel1.Controls.Remove(button);
    }
} 
```

# mysql - MySQL在文本文件上写入

> ID：14690803
> 
> 赞同：3
> 
> 时间：2013-02-04T16:16:22.283
> 
> 标签：mysql, macos, file-io, mysql-workbench

我正在尝试在装有 Mountain Lion OS 10.8.2 的 Macbook Pro 中的 MySQL 工作台 5.2.45 上的文本文件中写入数据；我得到以下错误：

“错误代码：1\. 无法创建/写入文件'/Users/JohnnyDahdah/Desktop/datos2'（错误代码：13 - 权限被拒绝）0.001 秒”

我的代码如下：

```
select * from Datos into outfile '/Users/JohnnyDahdah/Desktop/datos2.txt'; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T16:27:48.163

除非服务器以*您*的身份运行，否则它无权写入您的主目录。您可能可以安排*您*和*它*共享一个组，但最好让它写信`/tmp`并避免整个问题。

# php - 如何 preg_match url 与 http 和没有它

> ID：14690806
> 
> 赞同：0
> 
> 时间：2013-02-04T16:16:37.173
> 
> 标签：php, url-shortener

我正在编写一个短脚本，当 http:// 与 URL 一起传递时遇到了问题。

**问题：**如果用户没有在其中提供带有 http:// 的链接，则脚本无法处理它并返回无效的 url 错误，而不是应该发生的事情，因为 preg_match 应该解析 http、https 和没有其中任何一个的链接。

这是负责检查http的代码片段

```
$url = $_REQUEST['url'];  

  if(!preg_match("/^[a-zA-Z]+[:\/\/]+[A-Za-z0-9\-_]+\\.+[A-Za-z0-9\.\/%&=\?\-_]+$/i", $url)) {  
    $html = "<h1 id='upc' style='padding:8px 8px;text-align:center;'>Error: invalid URL</h1>";  
  } else {  
    $url = $_REQUEST['url']; 
```

修复它并允许解析 http 和 https 以及解析没有 http 或 https 的链接的最佳方法是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:46:44.563

你可以使用[`filter_var()`](http://www.php.net/manual/en/function.filter-var.php)：

```
if (filter_var($url, FILTER_VALIDATE_URL)) {
    // $url is valid
} else {
    // $url is NOT valid
} 
```

它不检查协议是否有效（因此`foo://www.foo.com/bar`验证但`foo:/\www.foo.com/bar`不验证），但这是一个开始。根据文档，[`parse_url()`](http://www.php.net/manual/en/function.parse-url.php)并不意味着验证 URL。

# jquery - jQuery数据表鼠标悬停在单元格上

> ID：14690812
> 
> 赞同：1
> 
> 时间：2013-02-04T16:16:54.420
> 
> 标签：jquery, datatables

我有这个：

```
<!doctype html>
<html lang="tr">
 <head>
    <meta charset="utf-8">
    <link href="http://127.0.0.1/HCAWebApp/bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen">
    <title>Binalar</title>

        <style type="text/css" title="currentStyle">
            /* Twitter Bootstrap temalı tablo için */

            div.dataTables_length label {
                float: left;
                text-align: left;
            }

            div.dataTables_length select {
                width: 75px;
            }

            div.dataTables_filter label {
                float: right;
            }

            div.dataTables_info {
                padding-top: 8px;
            }

            div.dataTables_paginate {
                float: right;
                margin: 0;
            }

            table.table {
                clear: both;
                margin-bottom: 6px !important;
                max-width: none !important;
            }

            table.table thead .sorting, table.table thead .sorting_asc, table.table thead .sorting_desc, table.table thead .sorting_asc_disabled, table.table thead .sorting_desc_disabled {
                cursor: pointer;
                *cursor: hand;
            }

            table.table thead .sorting {
                background: url('../images/sort_both.png') no-repeat center right;
            }
            table.table thead .sorting_asc {
                background: url('../images/sort_asc.png') no-repeat center right;
            }
            table.table thead .sorting_desc {
                background: url('../images/sort_desc.png') no-repeat center right;
            }

            table.table thead .sorting_asc_disabled {
                background: url('../images/sort_asc_disabled.png') no-repeat center right;
            }
            table.table thead .sorting_desc_disabled {
                background: url('../images/sort_desc_disabled.png') no-repeat center right;
            }

            table.dataTable th:active {
                outline: none;
            }

            /* Scrolling */
            div.dataTables_scrollHead table {
                margin-bottom: 0 !important;
                border-bottom-left-radius: 0;
                border-bottom-right-radius: 0;
            }

            div.dataTables_scrollHead table thead tr:last-child th:first-child, div.dataTables_scrollHead table thead tr:last-child td:first-child {
                border-bottom-left-radius: 0 !important;
                border-bottom-right-radius: 0 !important;
            }

            div.dataTables_scrollBody table {
                border-top: none;
                margin-bottom: 0 !important;
            }

            div.dataTables_scrollBody tbody tr:first-child th, div.dataTables_scrollBody tbody tr:first-child td {
                border-top: none;
            }

            div.dataTables_scrollFoot table {
                border-top: none;
            }

            /*
             * TableTools styles
             */
            .table tbody tr.active td, .table tbody tr.active th {
                background-color: #08C;
                color: white;
            }

            .table tbody tr.active:hover td, .table tbody tr.active:hover th {
                background-color: #0075b0 !important;
            }

            .table-striped tbody tr.active:nth-child(odd) td, .table-striped tbody tr.active:nth-child(odd) th {
                background-color: #017ebc;
            }

            table.DTTT_selectable tbody tr {
                cursor: pointer;
                *cursor: hand;
            }

            div.DTTT .btn {
                color: #333 !important;
                font-size: 12px;
            }

            div.DTTT .btn:hover {
                text-decoration: none !important;
            }

            ul.DTTT_dropdown.dropdown-menu a {
                color: #333 !important; /* needed only when demo_page.css is included */
            }

            ul.DTTT_dropdown.dropdown-menu li:hover a {
                background-color: #0088cc;
                color: white !important;
            }

            /* TableTools information display */
            div.DTTT_print_info.modal {
                height: 150px;
                margin-top: -75px;
                text-align: center;
            }

            div.DTTT_print_info h6 {
                font-weight: normal;
                font-size: 28px;
                line-height: 28px;
                margin: 1em;
            }

            div.DTTT_print_info p {
                font-size: 14px;
                line-height: 20px;
            }

            /*
             * FixedColumns styles
             */
            div.DTFC_LeftHeadWrapper table, div.DTFC_LeftFootWrapper table, table.DTFC_Cloned tr.even {
                background-color: white;
            }

            div.DTFC_LeftHeadWrapper table {
                margin-bottom: 0 !important;
                border-top-right-radius: 0 !important;
                border-bottom-left-radius: 0 !important;
                border-bottom-right-radius: 0 !important;
            }

            div.DTFC_LeftHeadWrapper table thead tr:last-child th:first-child, div.DTFC_LeftHeadWrapper table thead tr:last-child td:first-child {
                border-bottom-left-radius: 0 !important;
                border-bottom-right-radius: 0 !important;
            }

            div.DTFC_LeftBodyWrapper table {
                border-top: none;
                margin-bottom: 0 !important;
            }

            div.DTFC_LeftBodyWrapper tbody tr:first-child th, div.DTFC_LeftBodyWrapper tbody tr:first-child td {
                border-top: none;
            }

            div.DTFC_LeftFootWrapper table {
                border-top: none;
            }

        </style>

    <script src="http://127.0.0.1/HCAWebApp/DataTables-1.9.4/media/js/jquery.js"></script>
    <script type="text/javascript" language="javascript" src="http://127.0.0.1/HCAWebApp/DataTables-1.9.4/media/js/jquery.dataTables.js"></script>

    <style>
        body {
            padding: 15px 30px;
        }
        .alignleft {
            float: left;
            vertical-align: text-bottom;
        }
        .alignright {
            float: right;
            vertical-align: text-bottom;
        }
        td {
            width: 25%
        }
    </style>

        <script type="text/javascript" charset="utf-8">
            /* Set the defaults for DataTables initialisation */
            $.extend(true, $.fn.dataTable.defaults, {
                "sDom" : "<'row-fluid'<'span6'l><'span6'f>r>t<'row-fluid'<'span6'i><'span6'p>>",
                "sPaginationType" : "bootstrap",
                "oLanguage" : {
                    "sLengthMenu" : "_MENU_ records per page"
                }
            });

            /* Default class modification */
            $.extend($.fn.dataTableExt.oStdClasses, {
                "sWrapper" : "dataTables_wrapper form-inline"
            });

            /* API method to get paging information */
            $.fn.dataTableExt.oApi.fnPagingInfo = function(oSettings) {
                return {
                    "iStart" : oSettings._iDisplayStart,
                    "iEnd" : oSettings.fnDisplayEnd(),
                    "iLength" : oSettings._iDisplayLength,
                    "iTotal" : oSettings.fnRecordsTotal(),
                    "iFilteredTotal" : oSettings.fnRecordsDisplay(),
                    "iPage" : oSettings._iDisplayLength === -1 ? 0 : Math.ceil(oSettings._iDisplayStart / oSettings._iDisplayLength),
                    "iTotalPages" : oSettings._iDisplayLength === -1 ? 0 : Math.ceil(oSettings.fnRecordsDisplay() / oSettings._iDisplayLength)
                };
            };

            /* Bootstrap style pagination control */
            $.extend($.fn.dataTableExt.oPagination, {
                "bootstrap" : {
                    "fnInit" : function(oSettings, nPaging, fnDraw) {
                        var oLang = oSettings.oLanguage.oPaginate;
                        var fnClickHandler = function(e) {
                            e.preventDefault();
                            if (oSettings.oApi._fnPageChange(oSettings, e.data.action)) {
                                fnDraw(oSettings);
                            }
                        };

                        $(nPaging).addClass('pagination').append('<ul>' + '<li class="prev disabled"><a href="#">&larr; ' + oLang.sPrevious + '</a></li>' + '<li class="next disabled"><a href="#">' + oLang.sNext + ' &rarr; </a></li>' + '</ul>');
                        var els = $('a', nPaging);
                        $(els[0]).bind('click.DT', {
                            action : "previous"
                        }, fnClickHandler);
                        $(els[1]).bind('click.DT', {
                            action : "next"
                        }, fnClickHandler);
                    },

                    "fnUpdate" : function(oSettings, fnDraw) {
                        var iListLength = 5;
                        var oPaging = oSettings.oInstance.fnPagingInfo();
                        var an = oSettings.aanFeatures.p;
                        var i, ien, j, sClass, iStart, iEnd, iHalf = Math.floor(iListLength / 2);

                        if (oPaging.iTotalPages < iListLength) {
                            iStart = 1;
                            iEnd = oPaging.iTotalPages;
                        } else if (oPaging.iPage <= iHalf) {
                            iStart = 1;
                            iEnd = iListLength;
                        } else if (oPaging.iPage >= (oPaging.iTotalPages - iHalf)) {
                            iStart = oPaging.iTotalPages - iListLength + 1;
                            iEnd = oPaging.iTotalPages;
                        } else {
                            iStart = oPaging.iPage - iHalf + 1;
                            iEnd = iStart + iListLength - 1;
                        }

                        for ( i = 0, ien = an.length; i < ien; i++) {
                            // Remove the middle elements
                            $('li:gt(0)', an[i]).filter(':not(:last)').remove();

                            // Add the new list items and their event handlers
                            for ( j = iStart; j <= iEnd; j++) {
                                sClass = (j == oPaging.iPage + 1) ? 'class="active"' : '';
                                $('<li ' + sClass + '><a href="#">' + j + '</a></li>').insertBefore($('li:last', an[i])[0]).bind('click', function(e) {
                                    e.preventDefault();
                                    oSettings._iDisplayStart = (parseInt($('a', this).text(), 10) - 1) * oPaging.iLength;
                                    fnDraw(oSettings);
                                });
                            }

                            // Add / remove disabled classes from the static elements
                            if (oPaging.iPage === 0) {
                                $('li:first', an[i]).addClass('disabled');
                            } else {
                                $('li:first', an[i]).removeClass('disabled');
                            }

                            if (oPaging.iPage === oPaging.iTotalPages - 1 || oPaging.iTotalPages === 0) {
                                $('li:last', an[i]).addClass('disabled');
                            } else {
                                $('li:last', an[i]).removeClass('disabled');
                            }
                        }
                    }
                }
            });

            /*
             * TableTools Bootstrap compatibility
             * Required TableTools 2.1+
             */
            if ($.fn.DataTable.TableTools) {
                // Set the classes that TableTools uses to something suitable for Bootstrap
                $.extend(true, $.fn.DataTable.TableTools.classes, {
                    "container" : "DTTT btn-group",
                    "buttons" : {
                        "normal" : "btn",
                        "disabled" : "disabled"
                    },
                    "collection" : {
                        "container" : "DTTT_dropdown dropdown-menu",
                        "buttons" : {
                            "normal" : "",
                            "disabled" : "disabled"
                        }
                    },
                    "print" : {
                        "info" : "DTTT_print_info modal"
                    },
                    "select" : {
                        "row" : "active"
                    }
                });

                // Have the collection use a bootstrap compatible dropdown
                $.extend(true, $.fn.DataTable.TableTools.DEFAULTS.oTags, {
                    "collection" : {
                        "container" : "ul",
                        "button" : "li",
                        "liner" : "a"
                    }
                });
            }

            /* Table initialisation */
            var asInitVals = new Array();
            $(document).ready(function() {
                var oTable = $('#binalar').dataTable({
                    "sDom" : "<'row-fluid'<'span6'l><'span6'f>r>t<'row-fluid'<'span6'i><'span6'p>>",
                    "sPaginationType" : "bootstrap",
                    "sAjaxSource" : "../index.php/getbuildings",

                    "aoColumnDefs" : [{
                        "sClass" : "ilhan",
                        "aTargets" : [1]
                    }],

                    "oLanguage" : {
                        "sLengthMenu" : "_MENU_ records per page",
                        "sSearch" : "Search all columns:"
                    },

                });

                $("tfoot input").keyup(function() {
                    /* Filter on the column (the index) of this element */
                    oTable.fnFilter(this.value, $("tfoot input").index(this));
                });

                /*
                 * Support functions to provide a little bit of 'user friendlyness' to the textboxes in
                 * the footer
                 */
                $("tfoot input").each(function(i) {
                    asInitVals[i] = this.value;
                });

                $("tfoot input").focus(function() {
                    if (this.className == "search_init") {
                        this.className = "";
                        this.value = "";
                    }
                });

                $("tfoot input").blur(function(i) {
                    if (this.value == "") {
                        this.className = "search_init";
                        this.value = asInitVals[$("tfoot input").index(this)];
                    }
                });

            });

        </script>
 </head>
 <body>
                   <div class="navbar">
              <div class="navbar-inner">
                <div class="container">
                  <a class="btn btn-navbar" data-toggle="collapse" data-target=".navbar-responsive-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                  </a>
                  <div class="nav-collapse collapse navbar-responsive-collapse">
                    <ul class="nav">
                    <li class='active'><a href="binalar">Binalar</a></li>
                    <li ><a href="cihazlar">Cihazlar</a></li>
                    <li ><a href="kullanicilar">Kullanıcılar</a></li>
                    <li ><a href="gruplar">Gruplar</a></li>

                    </ul>
                    <ul class="nav pull-right">
                      <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">test <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                          <li><a href="#">Veritronik</a></li>
                          <li><a href="#">Seller</a></li>
                          <li class="divider"></li>
                          <li><a href="kullanicilar/logout">Çıkış</a></li>
                        </ul>
                      </li>
                    </ul>
                  </div><!-- /.nav-collapse -->
                </div>
              </div><!-- /navbar-inner -->
            </div><!-- /navbar --><div class='fdfg'>
    <div id="baslik">
        <h1 style="margin-bottom:-15px" class="alignleft">Binalar</h1>
        <h3 style="margin-bottom:-15px" class="alignright">+ Bina Ekleme</h3>   </div>
    <div style="clear: both;"></div>
    <hr>

    <table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered" id="binalar">
        <thead>
            <tr>
                <th>Adı</th>
                <th>Ölçüm Tipi</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td colspan="2" class="dataTables_empty">Veriler sunucudan yükleniyor.</td>
            </tr>
        </tbody>

        <tfoot>
            <tr>
                <th>
                <input type="text" name="search_engine" value="Search engines" class="search_init" />
                </th>
                <th>
                <input type="text" name="search_browser" value="Search browsers" class="search_init" />
                </th>
            </tr>
        </tfoot>

    </table>

</div>

<script src="../bootstrap/js/bootstrap.min.js"></script>
</body>
</html> 
```

而且我尝试了各种方法来在类名为“ilhan”的单元格（第二列）中打印文本，但我没有成功。简单地 onmouseover 不会触发。我认为这是因为该表创建得很晚。我试图将 on 鼠标放在 on ready 中，但它也不起作用。我现在必须做什么？

我正在尝试添加此代码：

```
<script>
    $(".ilhan").hover(
        function () {
            $(this).append($("<span style='font-size:80%;'> <a href='#'>Edit</a> | <a href='#'>Delete</a></span>"));
        },
        function () {
            $(this).find("span:last").remove();
        }
    );
    //li with fade class
    $("li.fade").hover(function(){$(this).fadeOut(100);$(this).fadeIn(500);});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:27:10.160

您是否尝试过使用 jQuery 的`on()`功能？我不确定这就是您要查找的内容，但它允许您将侦听器附加到页面加载后创建的元素。

这是文档中的代码示例：

```
$("#dataTable tbody").on("click", "tr", function(event){
  alert($(this).text());
}); 
```

文档：[http ://api.jquery.com/on/](http://api.jquery.com/on/)

请注意，如果您使用的是旧版本的 jQuery，您将需要使用`bind()`、`delegate()`或`live()`函数。

# delphi - Delphi 编辑器中的全局书签

> ID：14690819
> 
> 赞同：2
> 
> 时间：2013-02-04T16:17:13.177
> 
> 标签：delphi, ide, editor, delphi-xe

有没有办法让书签不仅能记住行，还能记住 Delphi IDE 中的文件？可能有提供此类功能的专家（插件）吗？

我可以使用断点或 TODO 来解决这个问题，但是，我需要的是书签，这样它们就不会干扰调试，并且不会像 TODO 那样持久。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T16:30:51.840

[CnPack](http://www.cnpack.org/)有一个书签浏览器，这正是您正在寻找的

# java - Hibernate Result Transformer 无法实例化结果类

> ID：14690822
> 
> 赞同：3
> 
> 时间：2013-02-04T16:17:16.097
> 
> 标签：java, sql, hibernate

我有一个要映射到类的 SQL 查询。我正在使用 Hibernate 的 createSQLQuery，然后对我想映射到的类使用 Result Transformer。但是 Hibernate 抛出了这个错误：

```
ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[localhost].[/mypackage].[MyPackageServlet]] 
Servlet.service() for servlet MyPackageServlet threw exception org.hibernate.HibernateException: 
Could not instantiate resultclass: com.myapp.mypackage.context.report.MonthlyReportContext$MonthlyReport        
at org.hibernate.transform.AliasToBeanResultTransformer.transformTuple(AliasToBeanResultTransformer.java:69) 
```

据我所知，这意味着我的构造函数是错误的。它设置为公开，它是空的。不知道我还需要在这里做什么？

```
public class MonthlyReport
{
       /**  Some private properties defined here **/
       public MonthlyReport(){}  
       /** setters and getters for all properties here **/
    } 
```

从 pgadmin 运行时，SQL 查询工作正常。在这里，我使用 addScalar 设置所有字段，因为类属性是驼峰式的。然后我使用 setResultTransformer：

```
 Query query = this.getSession().createSQLQuery(sql)
            .addScalar("policy", Hibernate.STRING)
            .addScalar("memberName", Hibernate.STRING)
            .addScalar("premium", Hibernate.BIG_DECIMAL)
            .addScalar("effectiveDate", Hibernate.DATE)
            .addScalar("newOrRenewal", Hibernate.CHARACTER)
            .addScalar("auditPayment", Hibernate.BIG_DECIMAL)
            .addScalar("auditRecieveable", Hibernate.BIG_DECIMAL)
            .addScalar("associationDues", Hibernate.BIG_DECIMAL)
            .addScalar("expenseConstant", Hibernate.BIG_DECIMAL)
            .addScalar("nsfFees", Hibernate.BIG_DECIMAL)
            .addScalar("lossControl", Hibernate.BIG_DECIMAL)
            .addScalar("premiumPayment", Hibernate.BIG_DECIMAL)
            .addScalar("totalPaid", Hibernate.BIG_DECIMAL)
            .addScalar("month", Hibernate.STRING)
            .addScalar("installment", Hibernate.STRING)
            .setResultTransformer(new AliasToBeanResultTransformer(MonthlyReport.class));
    List<MonthlyReport> monthlyReport = query.setString("month", month)
            .setString("startPayDate", month + "/" + cal.getActualMinimum(Calendar.DAY_OF_MONTH) + "/" + year)
            .setString("endPayDate", month + "/" + cal.getActualMaximum(Calendar.DAY_OF_MONTH) + "/" + year)
            .setString("fundYear", fundYear)
            .list(); 
```

任何帮助是极大的赞赏。我继承了这个项目，之前从未使用过 Java 或 Hibernate，这是一个庞大的代码库。这很可能是我犯的一个菜鸟错误。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-06-26T18:12:26.077

确实，只有当实例化的类不是内部类时才能进行这种实例化......

您可以将内部类重构为普通类或使其成为静态类。

希望这有所帮助 ：）！

# php - 使用 LOAD DATA LOCAL INFILE 在 mysql 中成功导入 CSV 后没有 SQL 查询结果

> ID：14690823
> 
> 赞同：2
> 
> 时间：2013-02-04T16:17:17.290
> 
> 标签：php, mysql, sql, load-data-infile

在 mysql db 中成功导入 .csv 文件的内容后，我遇到了一个奇怪的问题。csv 文件中的数据已成功导入 db 表，但如果我在表上运行任何带有 Condition 的 SQL 查询，则不会返回任何查询结果。我能够运行查询：

```
select * from mst_question 
```

但如果指定条件且满足条件则不返回结果

```
select * from mst_question where qtype='single' 
```

该表具有列 qtype 包含条件文本“single”但不返回任何结果的行。

**奇怪的是，如果我编辑表中的“qtype”列内容并通过键入“single”替换测试“single”，则返回该行......**对于我编辑的每一行！

**我的 .csv 文件：**

```
que_id,test_id,que_desc,ans1,ans2,ans3,ans4,true_ans,qtype
,11,In which year is the HTML specification supposed to be complete and finalized?,2012,2015,2020,2022,D,single
,11,Which of the following doctypes was introduced by HTML5?,<!doctype xhtml>,<!doctype html>,"<!doctype html PUBLIC ""-//W3C//DTD HTML 5.0 Transitional//EN"">","<!doctype html5 PUBLIC ""-//W3C//DTD HTML 5.0 Transitional//EN"">",B,single
,11,How do you stop crawlers from following links to sites you don't want to be associated with?,"<a href=""#"" rel=""nofollow""> ","<a href=""#"" rel=""dontgo""> ","<a href=""#"" rel=""nogo""> ","<a href=""#"" rel=""noassociation"">",A,single
,11,Which tag is used to define a section of the page that has content that is related but not critical to the main content in HTML5?,<article> ,<sidesection> ,<aside> ,<section> ,C,single
,11,The <article> is used to contain a main article. What is the tag used to break it into sections?,<article> ,<time> ,<aside> ,<section> ,D,single 
```

**我的 LOAD DATA LOCAL INFILE 语法：**

```
LOAD DATA LOCAL INFILE 'quest.csv' INTO TABLE mst_question FIELDS TERMINATED BY "," OPTIONALLY ENCLOSED BY """" IGNORE 1 LINES 
```

**执行 LOAD DATA LOCAL INFILE 后的输出：**

```
(5 row(s)affected)
(0 ms taken) 
```

**我的 SQL 查询（给出结果）：**

```
select * from mst_question 
```

*结果*：

```
(5 row(s)returned)
(0 ms taken) 
```

**我的 SQL 查询条件简单（没有结果）：**

```
select * from mst_question where qtype='single' 
```

*结果 ：*

```
(0 row(s)returned)
(0 ms taken) 
```

我究竟做错了什么 ？？？？

找不到……请指教……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T16:21:47.383

我的猜测是您的文件有 Windows 换行符：

```
...0,2022,D,single\r\n 
```

您没有指定`LINES TERMINATED BY '\r\n'`子句，因此 MySQL 可能默认为 Unix 样式 ( `\n`)，因此它实际上会导入`single\r`您的列。

您可以使用 . 检查确切的列内容`HEX()`。

# xml - 断言无效、错位或经常发生

> ID：14690824
> 
> 赞同：5
> 
> 时间：2013-02-04T16:17:45.060
> 
> 标签：xml, testing, xsd, assert

我在尝试生成我的 XSD 时遇到了这个错误，但无法弄清楚我做错了什么；我的代码如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
targetNamespace="http://www.w3schools.com"
xmlns="http://www.w3schools.com"
elementFormDefault="qualified">
<xs:element name="FICH">
<xs:complexType>

<xs:sequence>
<xs:element name="cabeza">
<xs:complexType>
<xs:sequence>
<xs:element name="VERSION_ORIG" type="Version"/>

</xs:sequence>
</xs:complexType>
</xs:element>

<xs:element name="DATA_MAJ">
<xs:complexType>
<xs:sequence>
<xs:element name="DATA1" maxOccurs="unbounded">
<xs:complexType>
<xs:sequence>

<xs:element name="VERSION_SIT_NOM" type="Version"/>

</xs:sequence>
</xs:complexType>
</xs:element>
</xs:sequence>
</xs:complexType>
</xs:element>
</xs:sequence>

<xs:assert test="CABEZA/VERSION_ORIG = DATA_MAJ/VERSION_SIT_NOM"/>

</xs:complexType>
</xs:element>
<xs:simpleType name="YYMM">
<xs:restriction base="xs:integer">
<xs:pattern value="[0-9]{2}[01|02|03|04|05|06|07|08|09|10|11|12]"/>
</xs:restriction>
</xs:simpleType>
<xs:simpleType name="Version">
<xs:restriction base="xs:string">
<xs:pattern value="[0-9]{2}.[0-9]{2}.[0-9]{2}"/>
</xs:restriction>
</xs:simpleType>
<xs:simpleType name="emptyString">
<xs:restriction base="xs:string">
<xs:enumeration value=""/>
</xs:restriction>
</xs:simpleType>
</xs:schema> 
```

这个想法是元素 CABEZA/VERSION_ORIG 必须等于 DATA_MAJ/VERSION_SIT_NOM。我已经寻找了一些解决方案，但对我来说一切似乎都很好。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:58:03.060

你做错了几件事。让我们从更正的 XSD 和匹配的示例 XML 开始。

**XSD：**

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- XML Schema generated by QTAssistant/XSD Module (http://www.paschidev.com) -->
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" targetNamespace="http://www.w3schools.com" xmlns="http://www.w3schools.com" xmlns:tns="http://www.w3schools.com" elementFormDefault="qualified">
    <xs:element name="FICH">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="cabeza">
                    <xs:complexType>
                        <xs:sequence>
                            <xs:element name="VERSION_ORIG" type="Version"/>
                        </xs:sequence>
                    </xs:complexType>
                </xs:element>
                <xs:element name="DATA_MAJ">
                    <xs:complexType>
                        <xs:sequence>
                            <xs:element name="DATA1" maxOccurs="unbounded">
                                <xs:complexType>
                                    <xs:sequence>
                                        <xs:element name="VERSION_SIT_NOM" type="Version"/>
                                    </xs:sequence>
                                </xs:complexType>
                            </xs:element>
                        </xs:sequence>
                    </xs:complexType>
                </xs:element>
            </xs:sequence>          
            <xs:assert test="tns:cabeza/tns:VERSION_ORIG = tns:DATA_MAJ/tns:DATA1/tns:VERSION_SIT_NOM"/>
        </xs:complexType>
    </xs:element>
    <xs:simpleType name="YYMM">
        <xs:restriction base="xs:integer">
            <xs:pattern value="[0-9]{2}[01|02|03|04|05|06|07|08|09|10|11|12]"/>
        </xs:restriction>
    </xs:simpleType>
    <xs:simpleType name="Version">
        <xs:restriction base="xs:string">
            <xs:pattern value="[0-9]{2}.[0-9]{2}.[0-9]{2}"/>
        </xs:restriction>
    </xs:simpleType>
    <xs:simpleType name="emptyString">
        <xs:restriction base="xs:string">
            <xs:enumeration value=""/>
        </xs:restriction>
    </xs:simpleType>
</xs:schema> 
```

**无效的 XML：**

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<!-- Sample XML generated by QTAssistant (http://www.paschidev.com) -->
<FICH xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.w3schools.com">
    <cabeza>
        <VERSION_ORIG>22.22.22</VERSION_ORIG>
    </cabeza>
    <DATA_MAJ>
        <DATA1>
            <VERSION_SIT_NOM>22.22.23</VERSION_SIT_NOM>
        </DATA1>
    </DATA_MAJ>
</FICH> 
```

**错误信息：**

```
Error while loading [], line 12 position 8
cvc-assertion.3.13.4.1: Assertion evaluation ('tns:cabeza/tns:VERSION_ORIG = tns:DATA_MAJ/tns:DATA1/tns:VERSION_SIT_NOM') for element 'FICH' with type '#anonymous' did not succeed. 
Document1.xml is XSD 1.1 invalid. 
```

说明：

*   您很可能正在使用 XSD 1.0 处理器来验证 XSD 1.1。注释掉断言并查看错误是否消失。
*   除非您的 XSD 没有目标名称空间，否则您必须提供一个别名，例如上面我的示例 XSD 中的 xmlns:tns，以匹配您的目标名称空间；确保 XPath 正确使用前缀。这是有原因的，Xerces（正如@CMSperbergMcQueen 提到的）似乎也非常想要它们。
*   你把 XPath 弄错了。名称区分大小写，因此 cabeza 不是 CABEZA，而且您的 XSD 中还有一个与 XPath 不匹配的额外级别；更具体地说，您缺少 DATA1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T18:47:07.350

您的模式文档对我来说看起来不错（更重要的是，对于 Saxon 9 来说也是如此）。

因此，您的错误消息最可能的原因是 (1) 您正在使用 XSD 1.0 处理器来处理 XSD 1.1 模式文档，以及 (2) 在这种情况下您的处理器没有提供世界上最好的错误消息。目前（2013 年初）Saxon 和 Xerces J 的 beta 版本支持 XSD 1.1。如果您使用其他 XSD 验证器，您可能需要联系供应商或开发人员，询问他们何时支持 XSD 1.1。（如果他们认为他们的用户不在乎，没有人会迁移到 1.1。）

# wpf - 删除后无法从列表框中选择相同的项目

> ID：14690831
> 
> 赞同：0
> 
> 时间：2013-02-04T16:18:08.020
> 
> 标签：wpf, listbox

我有一个列表框，谁的 itemsource 绑定到一个具有 SelectionMode="Single" 的列表。我的列表框还为其设置了 ItemContainerStyle，如下所示：

```
<ListView.ItemContainerStyle>
    <Style TargetType="{x:Type ListViewItem}">
        <Style.Resources>
            <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="Transparent" />
            <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" Color="Transparent" />
        </Style.Resources>
        <Style.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="Background" Value="Blue" />
            </Trigger>
        </Style.Triggers>
    </Style>
</ListView.ItemContainerStyle> 
```

当我从列表中删除一个项目时，我无法重新选择该项目，除非我选择一个不同的项目然后返回它。任何人都可以对此提供意见吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T17:39:32.437

根据您从列表中删除项目的方式，删除`ListView`后可能会失去焦点，这可能会`Highlight Color`影响`SelectedItem`. 该项目实际上是`Selected`但对用户来说似乎不是，因为`ListView`它不是活动控件。例如，如果您单击表单上其他位置的按钮以从`ListView`.

尝试在删除操作后调用`Focus()`您的实例。`ListView`

# telerik - Radgrid 添加新记录数据检查

> ID：14690832
> 
> 赞同：0
> 
> 时间：2013-02-04T16:18:13.443
> 
> 标签：telerik, radgrid

在 Radgrid 中，当有人单击保存按钮并检查以确保数据全部格式正确或有效时，如何使添加新记录保持打开状态？在我告诉他们数据无效并保留他们已经输入的值后，我希望添加新记录保持打开状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T18:09:00.207

在 Grid 的编辑模板中，您始终可以使用 Validators。如果验证者没有通过，编辑表单将不会发布。

你可以看看下面的演示：

[http://demos.telerik.com/aspnet-ajax/grid/examples/dataediting/validation/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/grid/examples/dataediting/validation/defaultcs.aspx)

添加新记录时 - 请注意 UnitPrice 是必填字段。如果您不输入更新按钮将不会触发回发。

希望这是有用的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-05T13:45:26.893

弄清楚了。

```
protectedvoidrdgdr1_InsertCommand(objectsender, GridCommandEventArgs e)
{
    GridEditableItem editItem = (GridEditableItem)e.Item;
    TextBox OrderText=(TextBox)editItem["UniqueName"].Controls[0]

    if(OrderText.Text=="correct")
    {

        //insert the data in the database
    }
    else
    {
        e.Canceled = true;  
    }
} 
```

# ios - 目标 C 中的通知机制，设备方向

> ID：14690835
> 
> 赞同：0
> 
> 时间：2013-02-04T16:18:35.727
> 
> 标签：ios, xcode

我有一个 iPad 应用程序，其中包含许多视图控制器，它们都以编程方式从一个 mainViewcontroller 加载。当方向从纵向变为横向时，我会更改一些 UI。到目前为止，我一直在 mainVC 中处理该通知。我的问题是：Objective C 如何处理通知生成过程？它是否从 mainVC 开始，然后向下渗透到子 UIControls？我应该观察所有视图控制器中的 UIInterfaceOrientation 变化，还是只观察主要的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:24:10.833

主VC应该负责轮换事件的管理。我通常以这种方式工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T16:24:23.047

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
```

是提供有关设备方向更改通知的代表。我认为您可以在所有视图控制器中实现这一点。

但还要注意它是特定于视图控制器的，它不依赖于父级

# ibm-sbt - “未实现未连接的套接字”是什么意思？

> ID：14690838
> 
> 赞同：0
> 
> 时间：2013-02-04T16:18:41.070
> 
> 标签：ibm-sbt

我正在按照[本教程](http://tinyurl.com/azkmhg4)设置从温室活动流中读取的能力。但是我得到了这个堆栈跟踪，我不知道它意味着什么或从这里去哪里。有人可以为我指出正确的方向以使其正常工作吗？

```
java.net.SocketException: Unconnected sockets not implemented
javax.net.SocketFactory.createSocket(SocketFactory.java:7)
org.apache.http.conn.ssl.SSLSocketFactory.createSocket(SSLSocketFactory.java:288)
org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:119)
org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:147)
org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:108)
org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:415)
org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:641)
org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:576)
org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:554)
net.oauth.client.httpclient4.HttpClient4.execute(HttpClient4.java:100)
net.oauth.client.OAuthClient.access(OAuthClient.java:325)
net.oauth.client.OAuthClient.invoke(OAuthClient.java:306)
net.oauth.client.OAuthClient.invoke(OAuthClient.java:262)
net.oauth.client.OAuthClient.getRequestTokenResponse(OAuthClient.java:192)
net.oauth.client.OAuthClient.getRequestToken(OAuthClient.java:150)
com.ibm.xsp.extlib.sbt.security.oauth_10a.util.OADance._perform3LegsDance(OADance.java:149)
com.ibm.xsp.extlib.sbt.security.oauth_10a.util.OADance.perform3LegsDance(OADance.java:138)
com.ibm.xsp.extlib.sbt.security.oauth_10a.OAProvider._acquireToken(OAProvider.java:292)
com.ibm.xsp.extlib.sbt.security.oauth_10a.OAProvider.acquireToken(OAProvider.java:260)
com.ibm.xsp.extlib.sbt.security.oauth_10a.OAProvider.acquireToken(OAProvider.java:248)
com.ibm.xsp.extlib.sbt.security.oauth_10a.OAProvider.acquireToken(OAProvider.java:240)
com.ibm.xsp.extlib.sbt.services.client.endpoints.OAuthEndpointBean.initialize(OAuthEndpointBean.java:145)
com.ibm.xsp.extlib.sbt.services.client.ClientService._execRequest(ClientService.java:385)
com.ibm.xsp.extlib.sbt.services.client.ClientService.execRequest(ClientService.java:358)
com.ibm.xsp.extlib.sbt.services.client.ClientService.execRequest(ClientService.java:328)
com.ibm.xsp.extlib.sbt.services.client.ClientService.get(ClientService.java:257)
com.ibm.xsp.extlib.sbt.activitystreams.ActivityStreamDataSource$ASJsonAccessor.loadBlock(ActivityStreamDataSource.java:112)
com.ibm.xsp.extlib.model.DataBlockAccessor.findBlockByIndex(DataBlockAccessor.java:344)
com.ibm.xsp.extlib.model.DataBlockAccessor.prefetchData(DataBlockAccessor.java:292)
com.ibm.xsp.extlib.model.DataAccessorModel.getRowCount(DataAccessorModel.java:93)
com.ibm.xsp.component.UIPager$PagerState.<init>(UIPager.java:76)
com.ibm.xsp.component.UIPager$PagerState.<init>(UIPager.java:71)
com.ibm.xsp.component.UIPager.createPagerState(UIPager.java:540) 
```

*更新：我在插件的 Activator 类的 start 方法中添加了以下内容：

```
Security.setProperty("ssl.SocketFactory.provider", "com.ibm.jsse2.SSLSocketFactoryImpl") 
```

这是我的面孔配置文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<faces-config>
  <managed-bean id="OAuth Security Store">
  <managed-bean-name>NSFStore</managed-bean-name>
  <managed-bean-class>com.ibm.xsp.extlib.sbt.security.oauth_10a.store.OAuthNSFTokenStore</managed-bean-class>
  <managed-bean-scope>application</managed-bean-scope>
    <managed-property>
      <property-name>database</property-name>
      <value>websecurity.nsf</value>
    </managed-property>
  </managed-bean>
<managed-bean id="Greenhouse Endpoint">
  <managed-bean-name>greenHouse</managed-bean-name>
  <managed-bean-class>com.ibm.xsp.extlib.sbt.services.client.endpoints.OAuthEndpointBean</managed-bean-class>
  <managed-bean-scope>application</managed-bean-scope>
  <managed-property>
    <property-name>url</property-name>
    <value>https://greenhouse.lotus.com</value>
  </managed-property>
  <managed-property>
    <property-name>serviceName</property-name>
    <value>Greenhouse</value>
  </managed-property>
  <managed-property>
    <property-name>appId</property-name>
    <value>rpdPlayground</value>
  </managed-property>
  <managed-property>
    <property-name>tokenStore</property-name>
    <value>NSFStore</value>
  </managed-property>
  <managed-property>
    <property-name>forceTrustSSLCertificate</property-name>
    <value>true</value>
  </managed-property>
  <managed-property>
    <property-name>proxyEnabled</property-name>
    <value>true</value>
  </managed-property>
</managed-bean>
  <!--AUTOGEN-START-BUILDER: Automatically generated by IBM Domino Designer. Do not modify.-->
  <!--AUTOGEN-END-BUILDER: End of automatically generated section-->
</faces-config> 
```

这是在带有 com.ibm.xsp.extlibx 插件版本 8.5.3.20121217-1354 的 Domino 9.0 上运行的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:53:33.020

请参阅：[HTTPClient-java.net.SocketException：未实现未连接的套接字抛出](https://stackoverflow.com/questions/1739063/httpclient-java-net-socketexception-unconnected-sockets-not-implemented-thrown)

似乎与与 Apache HTTP 客户端的 SSL 连接有关。因此，您可以尝试设置 System 属性，或者，作为测试选项，您可以尝试通过将属性 forceTrustSSLCertificate 设置为 bean 来禁用端点中的 SSL 检查。

# javascript - 如何在 Javascript 中使用 Gtk.Plug？

> ID：14690839
> 
> 赞同：1
> 
> 时间：2013-02-04T16:18:41.540
> 
> 标签：javascript, gtk

我正在尝试扩展 gnome-sushi，它是使用新的基于 GIntrospection 的 Javascript 绑定编写的。现在，我正在尝试创建一个 Gtk.Plug 对象：

```
this._gtkPlug = new Gtk.Plug({ socket_id: xid }); 
```

然而，这只会导致

```
JS ERROR: !!!   Exception was: Error: No property socket_id on this GObject GtkPlug 
```

我还没有找到*任何*文档如何将 GTK 对象映射到 Javascript 属性。谁能指出我正确的文档或告诉我如何确定正确的属性？

# node.js - 确保最准确的同步

> ID：14690841
> 
> 赞同：1
> 
> 时间：2013-02-04T16:18:44.143
> 
> 标签：node.js, timer, synchronization, timestamp

首先，我将解释我的问题：我有一个 node.js 服务器和许多通过 socket.io 接收事件的 JS 客户端。Web 应用程序将结束日期（时间戳）发送到 node.js 服务器，并且 node.js 将此时间戳广播给所有客户端。然后客户从现在到给定日期启动一个计时器......

我的问题：我的客户想要一个完全同步的应用程序，因此每个客户端在每个时刻都必须具有相同的计时器计数......但是每个客户端没有相同的当前日期，因此存在不同的计时器计数。

我的第一个解决方案：我的网络应用程序随每个请求发送他当前的时间戳，因此 node.js 广播这个时间戳。然后，每个客户端将他当前的时间戳与服务器的时间戳进行比较，并将差异应用于他的计时器......

结果：更好但并不完美。一些计时器不是同步的（由于我认为请求延迟），我看到了一些毫秒（不到一秒）的差异。

那么，您有改进计时器的建议吗？

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T18:20:02.873

由于网络中节点之间的传输延迟不可知，分组交换网络上的时间同步是一个难题。我的建议是：不要试图自己解决这个问题。只需要求服务器和所有客户端都运行具有良好配置的 NTP，使它们能够与良好可靠的来源同步时间。让 NTP 担心这个问题。

# mysql - MySQL - 同时对相同类型的字段进行排序

> ID：14690844
> 
> 赞同：2
> 
> 时间：2013-02-04T16:18:52.880
> 
> 标签：mysql, sql-order-by

这是我的问题。

我有一个带有书籍数据库的网站，可以使用预定义的关键字进行搜索。在数据库中，对于每本书，我们最多可以为一本书添加 20 个不同的关键字（如“管理”、“领导力”等），每个关键字都有一个相关值（从 1 到 5）。At this time, when choosing a specific keyword, I'm able to sort all books which have that keyword stored as a theme.

在数据库中，每个关键字有 1 个字段，每个值有 1 个字段，因此 20 个关键字有 40 个字段。

我的问题是，书籍是根据关键字添加到书中的顺序（从第一个到第 20 个）以一种奇怪的方式排序的，相关性值仅逐个字段考虑（第一个关键字与第一个等） .

我想要的是能够像这样对它们进行排序：首先，关键字值为 5 的书籍，然后是 4 等到 1，无论它是为该书添加的第一个关键字还是最后一个关键字。实际上，这实际上意味着“通过相关性”。

我尝试使用“ORDER BY CONCAT”，但它没有改变任何东西。

以下是使用特定关键字的查询示例：

```
SELECT *,
        IF(id_theme_1=13,id_theme_deg_1,0) AS isInDeg_1,
        IF(id_theme_2=13,id_theme_deg_2,0) AS isInDeg_2,
        IF(id_theme_3=13,id_theme_deg_3,0) AS isInDeg_3,
        IF(id_theme_4=13,id_theme_deg_4,0) AS isInDeg_4,
        IF(id_theme_5=13,id_theme_deg_5,0) AS isInDeg_5,
        IF(id_theme_6=13,id_theme_deg_6,0) AS isInDeg_6,
        IF(id_theme_7=13,id_theme_deg_7,0) AS isInDeg_7,
        IF(id_theme_8=13,id_theme_deg_8,0) AS isInDeg_8,
        IF(id_theme_9=13,id_theme_deg_9,0) AS isInDeg_9,
        IF(id_theme_10=13,id_theme_deg_10,0) AS isInDeg_10,
        IF(id_theme_11=13,id_theme_deg_11,0) AS isInDeg_11,
        IF(id_theme_12=13,id_theme_deg_12,0) AS isInDeg_12,
        IF(id_theme_13=13,id_theme_deg_13,0) AS isInDeg_13,
        IF(id_theme_14=13,id_theme_deg_14,0) AS isInDeg_14,
        IF(id_theme_15=13,id_theme_deg_15,0) AS isInDeg_15,
        IF(id_theme_16=13,id_theme_deg_16,0) AS isInDeg_16,
        IF(id_theme_17=13,id_theme_deg_17,0) AS isInDeg_17,
        IF(id_theme_18=13,id_theme_deg_18,0) AS isInDeg_18,
        IF(id_theme_19=13,id_theme_deg_19,0) AS isInDeg_19,
        IF(id_theme_20=13,id_theme_deg_20,0) AS isInDeg_20
FROM mng_ouvrages
WHERE lang='fr' AND publish=1
ORDER BY CONCAT(isInDeg_4,isInDeg_2,isInDeg_3,isInDeg_1,isInDeg_5,isInDeg_6,isInDeg_7,isInDeg_8,isInDeg_9,isInDeg_10,
                isInDeg_11,isInDeg_12,isInDeg_13,isInDeg_14,isInDeg_15,isInDeg_16,isInDeg_17,isInDeg_18,isInDeg_19,isInDeg_20) DESC 
```

有了这个，我首先得到关键字存储在第 4 个字段（相关性为 3）的书，然后是关键字存储在第一个字段（相关性为 5）的书。

有谁知道是否有办法进行这种排序？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:28:36.303

您可以使用 MySQL 的[`GREATEST()`](http://dev.mysql.com/doc/refman/5.5/en/comparison-operators.html#function_greatest)函数来获取所有关键字的最大相关值：

```
ORDER BY GREATEST(COALESCE(keyword_1_value,0), COALESCE(keyword_2_value,0),
    COALESCE(keyword_3_value,0, ..., COALESCE(keyword_20_value,0)) DESC 
```

# kdb - 如何通过脚本终止远程 KDB+ 会话？

> ID：14690856
> 
> 赞同：6
> 
> 时间：2013-02-04T16:19:24.130
> 
> 标签：kdb

我需要终止一个远程 KDB+ 会话。这可以通过多种方式完成，但我更喜欢使用 IPC 处理程序。

我开始一个 KDB+ 会话：

```
$ q -p 5000
KDB+ 3.0 2012.11.13 Copyright (C) 1993-2012 Kx Systems 
```

然后我开始另一个 KDB 会话，我成功地终止了服务器：

```
$ q
KDB+ 3.0 2012.11.13 Copyright (C) 1993-2012 Kx Systems

q)h: hopen `::5000
q)h(exit;0)
'close
q)\\ 
```

但是，如果我使用上面的说明创建一个脚本（test.q），它会失败：

```
$ cat test.q 
h: hopen `::5000
h(exit;0)
\\

$ q test.q 
KDB+ 3.0 2012.11.13 Copyright (C) 1993-2012 Kx Systems

k){0N!x y}
'close
@
"q"
"h(exit;0)"
q)) 
```

有任何想法吗？我真的很感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T03:08:02.067

您正在向远程服务器发出同步请求，这意味着您正在等待响应。问题是您的请求导致远程服务器立即关闭并关闭连接，从而导致错误并导致 q 进入调试模式。

如果您只想向远程服务器发送退出而不导致错误，您可以使用连接句柄的负值异步发送请求（注意缺少“关闭错误”）：

```
q)h: hopen `::5000
q)(neg h) (exit;0)
q)\\ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T22:27:55.730

我设法通过使用[受保护的评估](http://code.kx.com/q4m3/10_Execution_Control/#1018-protected-evaluation)来解决这个问题：

在**test.q**文件中：

```
h: hopen `::5000
@[h; "exit 0"; {}]
\\ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-12T14:14:57.017

您可以选择显式关闭会话并丢弃句柄：

```
h: hopen `:hostname:port  <BR>
h <BR>
h:hclose <BR>
h<BR> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-19T09:11:32.183

您可能想尝试异步。此外，如果需要，您可以尝试延迟异步 (neg h) ({exit 0};`)[]

# java - 如何阻止应用程序/服务被破坏？

> ID：14690857
> 
> 赞同：0
> 
> 时间：2013-02-04T16:19:25.413
> 
> 标签：java, android, service, android-activity, ondestroy

我有一个应用程序，它有一个带有“开始记录”按钮的屏幕，它可以启动一项服务。按下后，按钮变为“停止记录”按钮并停止 onClick 服务。该服务基本上每分钟抓取一些数据并将其写入几个 SQLite 表。

该应用程序旨在打开，开始记录......然后最小化并留在后台运行。但是，问题是，一段时间后，Android 销毁/停止进程/服务/活动，使其不再记录数据，并且当重新打开应用程序时，屏幕重置，再次显示“开始记录”而不是“停止记录”，因为应用程序已重新启动。

我正在寻找能够在后台运行并尽可能长时间地收集数据的应用程序/服务，并且让活动保持打开状态或处于打开状态时，我可以停止记录而不是重置屏幕。基本上，应用程序在记录时永远最小化，而不是关闭。

感谢您的任何帮助或建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T16:27:34.260

你应该实现前台。

要请求您的服务在前台运行，请调用 startForeground()。该方法有两个参数：唯一标识通知的整数和状态栏的通知。欲了解更多信息，请访问：

[http://developer.android.com/guide/components/services.html#Foreground](http://developer.android.com/guide/components/services.html#Foreground)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T16:25:18.363

您正在寻找的是粘性[startService](http://developer.android.com/reference/android/content/Context.html#startService(android.content.Intent))。这将允许服务运行，直到系统内存不足。有关服务的更多信息，请查看[此处](http://developer.android.com/guide/components/services.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T16:25:27.820

问题是当操作系统耗尽内存时，如果它在后台，它会破坏你的服务。这就是为什么不能停止的服务（如播放mp3）是前台服务。因此，如果您绝对想让服务保持活力，您可以让服务在前台运行。我知道这可能不是你想要的，但感觉你别无选择。我认为，将服务置于前台是告诉 Android 不能杀死您的服务的方法。

# coldfusion - ColdFusion：如何将饼图的每个部分链接到特定的 URL？

> ID：14690868
> 
> 赞同：0
> 
> 时间：2013-02-04T16:19:53.383
> 
> 标签：coldfusion, pie-chart, cfchart

我有一个基本的饼图，其中包含这样的值

```
 <cfchartdata item="January" value="503100">
    <cfchartdata item="February" value="720310">
    <cfchartdata item="March" value="688700"> 
```

我想将饼图的每一块链接到特定的 URL - 我不需要将任何变量发布到 URL。

我尝试过这样的事情；

```
<cfchartdata item="January" value="503100" url="januarydata.cfm"> 
```

但 URL 不是“cfchartdata”的有效属性

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T16:26:01.873

该`url`属性属于[CFChart](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=Tags_c_05.html)标签，而不是[CFChartData](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=Tags_c_06.html)标签

网址：

> 如果用户单击数据系列中的项目，则打开 URL；onClick 目标页面。
> 
> 您可以在 URL 字符串中指定变量；ColdFusion 传递变量的当前值。
> 
> *   $VALUE$：所选行的值。如果没有，则该值为空字符串。
>     
>     
> *   $ITEMLABEL$：所选项目的标签。如果没有，则该值为空字符串。
>     
>     
> *   $SERIESLABEL$：所选系列的标签。
>     
>     
> *   如果没有，则该值为空字符串，例如：“somepage.cfm?item=$ITEMLABEL$&series=$SERIESLABEL$&value=$VALUE$
>     
>     
> *   “javascript:...”：执行客户端脚本。

如果要进行动态搜索，可以将上述动态值与静态值和其他 CF 值混合使用。例如：

```
<cfchart url="someSearchPage.cfm?param1=Static Text&param2=#form.ColdFusionFormVariable#&param3=$ITEMLABEL$" ...> 
```

在此示例中，$ITEMLABEL$ 会自动转换为标签。

**免责声明**

* * *

在回答您的实际问题之前，我应该指出，这不是一个好的做法，并且违背了动态网站的全部目的。您应该考虑一个接受参数并根据该参数从数据库中提取数据的页面。例如`monthlyData.cfm?month=january`

* * *

最简单的方法是将项目标签放在文件名中，正如您在评论中确认的那样。

```
<cfchart url = "$itemLabel$data.cfm" ...> 
```

如果您需要在发送用户之前进行更多测试，您可以将他们发送到单个 ColdFusion 页面并使用`CFSWITCH`/`CFCASE`或 good old `CFIF`/`CFELSE`如果没有那么多组合。

**-或者-**

您可以使用 javaScript: 选项并根据单击的系列运行使用 window.location 的函数。

```
javaScript:goto($itemSeries$,$seriesLabel$) 
```

js 函数可能如下所示：

```
function goto(item,label){
  if(item == "..." && label== "..."){
   document.location = "..."; 
  }else{
   etc...;
  }
} 
```

# c# - 从 C# 中的串行工具解析带有随机换行符的文本

> ID：14690870
> 
> 赞同：0
> 
> 时间：2013-02-04T16:19:56.670
> 
> 标签：c#, parsing, serial-port

这是来自串行工具运行 6 次以上的数据。我必须能够一致地解析每一行数据。

有没有人对我如何修复这些数据有建议，以便我可以确保它的完整性？

`\r\n`第一行的末尾确实有一个。有时它会破坏排队，有时它会在随机位置破坏它。我什至不能确定它不会侵蚀数据包编号后面的十六进制的重要数据。如果我能确保数据是健全的，我就可以做类似的事情`value.Split(':')[1].Split(' ')[1]`并完成它。我只是想不出任何方法将它拼接在一起。此外，需要明确的是，整个数据集都在一个字符串中，因为它必须从工具中读取。所以，我只是在做`string[] values = message.Split('\n');`然后用`foreach`循环迭代。

```
Packe
t 0: 1A064140084243440842555803EE (overlay)
Packet 1: 1A06414258404643440842585503EE
Packet 2: 1D0608054203EE
Packet 3: 1D0608427273747571505703EE
...

Packet 0: 1A064140084243440842555803EE (overlay)
Packet 1: 1A06414258404643440842585503EE
Packet 2: 1D0608054203EE
Packet 3: 1D0608427273747571505703EE
...

P
acket 0: 1A064140084243440842555803EE (overlay)
Packet 1: 1A06414258404643
Packet 2: 1D0608054203EE
Packet 3: 1D0608427273747571505703EE
...

Packet 0
: 1A064140084243440842555803EE (overlay)
Packet 1: 1A06414258404643440842585503EE
Packet 2: 1D0608054203EE
Packet 3: 1D0608427273747571505703EE
...

Pack
et 0: 1A064140084243440842555803EE (overlay)
Packet 1: 1A06414258404643440842585503EE
Packet 2: 1D0608054203EE
Packet 3: 1D0608427273747571505703EE
...

Packet 0: 1A064140084243440842555803EE (overlay)
Packet 1: 1A06414258404643440842585503EE
Packet 2: 1D0608054203EE
Packet 3: 1D0608427273747571505703EE
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:57:46.963

对 Offler 提到的内容 +1：

1.  去除 \r\n 的变体
2.  正则表达式按“数据包#：”分组。在此之后直到下一个数据包条目的所有内容都是您想要的。
3.  Regex.Split 分组
4.  根据需要清理数据

这是一个粗略的划痕程序来说明：

```
 var reader = new StreamReader("Test.txt");
        var contents = reader.ReadToEnd();
        var strippedContents = contents.Replace("\r\n", "").Replace("\r", "").Replace("\n", "");
        var regex = new Regex(@"(?<packet>Packet \d+: )");
        var matches = regex.Split(strippedContents); 
```

Test.txt 只是结合了第一和第三部分“Packe\r\n”和“P\r\n”的数据，但我保持信息的顺序，部分之间没有任何空格。

上面的数字 4 不在临时程序中，但数据在数组的每个奇数索引处都有 Packet 部分，索引 0 是一个空字符串 ("")。**它并不优雅，但**您实际上是在告诉 Regex“匹配除此之外的所有内容”。

这可能不是最终的解决方案，但它至少应该让你开始。

# python - 使用 wget 避免卸载限制

> ID：14690879
> 
> 赞同：0
> 
> 时间：2013-02-04T16:20:27.810
> 
> 标签：python, download, wget

我需要从网上下载几个网页。我正在使用 wget(URL) 下载它们，但我发现在下载一定数量（少于 100 秒）后它不会下载并给出错误。

谁能告诉我下载许多网页的最佳方式，这些网页的网址在一个文件中。

```
Query1='"http://scholar.google.com/scholar?q=%22'+a+'%22&btnG=&hl=en&as_sdt=0%2C24"'
        URL1='wget --user-agent Chrome '+Query1+' -O '+file1
        os.system(URL1) 
```

这是我正在使用的代码

谢谢

# codeigniter - 自定义模块化路由 PyroCMS

> ID：14690880
> 
> 赞同：1
> 
> 时间：2013-02-04T16:20:32.650
> 
> 标签：codeigniter, routing, pyrocms

我有一个名为**user**的自定义模块，位于 addons/shared_addons 中。在我的 config/routes.php 我有...

```
$route['user/admin(:any)?']     = 'admin$1';
$route['user/(:any)?'] = 'user/index/$1';

//and this is my custom route
$route['user/login'] = 'user/login'; 
```

无论我尝试什么，它总是会给我一个 404 错误。我可以在 system/pyrocms 中设置自定义路由......但由于某种原因，相同的方法不适用于 shared_addons 目录。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T16:21:57.983

我不相信您可以拥有带有标题的自定义模块，`User`因为那是核心模块

# javascript - 将全宽项目插入同位素布局

> ID：14690882
> 
> 赞同：0
> 
> 时间：2013-02-04T16:20:39.277
> 
> 标签：javascript, jquery, jquery-isotope

我正在尝试在被单击的项目下直接添加一个全宽项目。我尝试了两种方法（[在这里小提琴](http://jsfiddle.net/JBenjaminsson/pk29D/1/)）。

这是可能吗？

我尝试的第一种方法是在单击项目后直接插入新项目。如果单击的项目不是该行的最后一个项目，这会在单击的项目之后产生空白。

```
 // First try (looks at DOM)
    if (currentPosition.y === nextPosition.y) {
        insertStudentContent($puff.next());
    } else {

        $puff.after($studentContent);
        $container.isotope('reloadItems').isotope({ sortBy: 'number' });
    } 
```

第二种方法是直接在单击项的行的最后一项之后插入该项。这种方法也不是万无一失的。有时项目会在被点击的项目和被添加的项目之间出现。

```
 $container.find('.puff').each(function (index) {
        // is the item (.puff) on the same row as the one being clicked?
        if ($(this).data('isotope-item-position').y === currentPosition.y) {
            // The last item on the row of the clicked item will be $puff
            $puff = $(this);
        }
    });
    $puff.after($studentContent);
    $container.isotope('reloadItems').isotope({ sortBy: 'number' }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:31:25.277

我想通了，答案是很多 if 语句：

```
 var insertStudentContent = function ($puff) {
    var currentPosition = $puff.data('isotope-item-position');
    var upToClickedFlag = 0;
    $container.find('.puff').each(function (index) {
        if (currentPosition.y === $(this).data('isotope-item-position').y && $(this).height() === 300) {
            $(this).removeClass('big').addClass('small');
        }

        if (upToClickedFlag && currentPosition.y === $(this).data('isotope-item-position').y) {
            if ($(this).prev().data('isotope-item-position').y === $(this).data('isotope-item-position').y) {
                $puff = $(this);
            }
        }

        if ($(this)[0] === $puff[0]) {
            upToClickedFlag = 1;
        }

    });
    $puff.css('opacity', '.5');

    $puff.after($studentContent);
    $container.isotope('reloadItems');
    $container.isotope({ sortBy: 'original-order' }).isotope('reLayout');
}; 
```

有了新功能。这不像我想的那样百分百有效。140x140px 的项目在技术上可以是 dom 中的最后一个项目，但在砌体中排在第二位。当 140x10 的项目是该行的最后一个项目时，这会产生一个小的（140 像素）间隙。为了解决这个问题，我必须改变同位素工作原理的基本原理，所以这不是替代方案。[一个更新的小提琴。](http://jsfiddle.net/JBenjaminsson/pk29D/2/)

# jquery-ui - 如何在可排序的 JQuery UI 中更改新删除的项目，或者我如何知道删除的项目何时是新的？

> ID：14690888
> 
> 赞同：0
> 
> 时间：2013-02-04T16:20:50.797
> 
> 标签：jquery-ui

我正在使用 JQuery UI 在 javascript 中创建一个简单的汇编语言编辑器。我希望能够从指令集中拖动指令并将它们放入可排序的程序中。

但是，我需要将指令集显示为单词列表（操作码），然后在删除它们时更改它们，以便获得可编辑的参数（操作数）。

我尝试在可拖动指令集中使用自定义助手，但是虽然指令一被拖动就会改变，但它会在放下后恢复到原来的形式。现在我正在尝试在可排序中使用删除事件，例如“更新”，以更新删除指令的 DOM，但我找不到仅在指令是新指令而不只是重新排序时执行此操作的方法。

简而言之，我需要知道如何更改可排序中新删除项目的 DOM。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T16:48:24.507

您是否尝试过使用[接收](http://api.jqueryui.com/sortable/#event-receive)事件？

```
$('#list1').sortable({
  connectWith:'#list2',
  receive: function(e, ui){
    ui.item.addClass('new');
  }
}); 
```

我创建了[这个小提琴](http://jsfiddle.net/jHRFq/)来展示如何将一个类添加到正在接收的元素中。

如果你将一个元素`#list2`拖到`#list1`它上面，它会得到一个新的类/蓝色背景。但是，如果您只是对现有项目重新排序，则它什么也不做。重新排序新项目也不会对它做任何事情，即。它将保持类/蓝色背景颜色。我选择添加一个类，因为它作为示例更容易，但您可以做任何您需要的事情，例如在收到项目后创建一个输入字段来输入操作数。

这有帮助吗？

编辑：如果您需要将原始元素保留在列表中，试试[这个](http://jsfiddle.net/jHRFq/1/)

```
$('#list2').sortable({
  connectWith:'#list1',
  remove: function(e, ui){
    ui.item.clone().appendTo('#list1').addClass('new');
    $(this).sortable('cancel');
  }
}); 
```

它将项目添加到列表的末尾（附加），但我相信通过一些研究，您可以弄清楚如何正确放置它。

# php - Xdebug：来自任何主机的连接

> ID：14690891
> 
> 赞同：12
> 
> 时间：2013-02-04T16:21:06.570
> 
> 标签：php, xdebug

我在虚拟机（Ubuntu 来宾）上使用 Xdebug。我正在使用[Vagrant](http://www.vagrantup.com/)来管理这些 VM，并且我正在配置一个“模式”操作系统来克隆它以进行 Web 开发。问题是我想将这个 ubuntu 来宾配置为接受来自任何主机的 xdebug 连接（xdebug 显然在来宾操作系统中）。

这些说明不起作用：

```
zend_extension=/usr/lib/php5/20090626+lfs/xdebug.so
xdebug.remote_enable=1
xdebug.remote_handler="dbgp"
xdebug.remote_connect_back=1
xdebug.remote_port=9000 
```

唯一的方法似乎是添加一行：

```
xdebug.remote_host=sdurzu 
```

“sdurzu”是主机的主机名，但我想为 xdebug 创建一个“通用”配置，而不是基于主机名或 IP。

有没有办法使用通配符（*）或类似的东西？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-04T17:20:14.480

根据[Xdebug 设置文档](https://xdebug.org/docs/all_settings)，`remote_host`如果您已`remote_connect_back`启用，则会被忽略。

> xdebug.remote_connect_back
> 类型：布尔值，默认值：0，在 Xdebug >= 2.1 中引入
> 
> 如果启用，xdebug.remote_host 设置将被忽略，Xdebug 将尝试连接到发出 HTTP 请求的客户端。它检查 $_SERVER['HTTP_X_FORWARDED_FOR'] 和 $_SERVER['REMOTE_ADDR'] 变量以找出要使用的 IP 地址。
> [...]

此外，`remote_connect_back` *应该*允许任何设备连接到可以访问您的 Web 服务器的 Xdebug。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-05T20:26:40.267

如果启用了 remote_connect_back，则 remote_host 将被忽略，因此将 remote_host 设置为主机名没有意义。当然，除非你使用非常旧的 Xdebug 版本。为了找出幕后发生的事情，您需要打开 xdebug.remote_log - 这会将连接尝试写入日志文件并让您知道它是否也无法连接。

# css - 澄清样式重置的目的

> ID：14690894
> 
> 赞同：0
> 
> 时间：2013-02-04T16:21:19.180
> 
> 标签：css, reset

CSS 重置是在随后的 CSS 样式更改之上还是之下运行？换句话说，一个随机的例子：

如果重置将所有浏览器的字体标准化为 Times New Roman 和 12 号字体，但我会应用一个自定义 CSS，使所有标签都以粗体显示。

因此，CSS 重置的目的实际上是在您未自定义样式的元素上强加跨浏览器的一致性？如果我理解正确，请告诉我。

提前感谢所有答案！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T16:30:32.520

CSS 重置的目的是帮助使您的页面在所有浏览器中看起来一致。这是Eric Meyer 撰写的关于该主题的非常[详细的文章。](http://meyerweb.com/eric/thoughts/2007/04/18/reset-reasoning/)

基本上所有浏览器都有不同的 CSS 表示默认值，但这些默认值并不相同。CSS 重置文件尝试在所有浏览器中创建一致的基线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T16:31:31.293

CSS 重置是为了尽可能标准化不同浏览器中 HTML 元素的呈现。它创建了一个共同点，您可以在此基础上构建各种样式。重置放置在所有其他样式表之前，因此自定义样式生效。但是，您拥有的自定义样式可能无法涵盖浏览器默认在元素上具有的每个属性，并导致浏览器不一致。

在您的示例中，您有“粗体标签”，因此您有粗体文本，而不是只有“Times New Roman 和 12 号字体”，但您没有指定元素的`margin`or `line-height`。如果不同的浏览器对那些未涵盖的样式有不同的解释，并且您没有使用 CSS 重置，您将看到影响您的布局和样式的不一致。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T16:32:15.877

你几乎回答了你自己的问题。除了像在您的示例中那样重置字体之外，它还将边距和填充重置为 0。这有助于构建布局，因为不使用重置样式表留下的边距和填充会导致布局关闭等。

它可以标准化每个元素，为您的自定义样式做准备。如果您不打算自定义样式，那么您不应该使用它。

还有一种更新的方法，称为 normalize.css。它是重置样式表的替代方法。它不是将所有内容都重置为 0，而是将所有内容预先设置为业内大多数人在一定程度上遵循的标准。

总结和纠正您上面的陈述：“因此，CSS 重置的目的实际上是在所有元素上强制跨浏览器的一致性，以便为自定义样式做准备。”

# sharepoint - Sharepoint 2010 搜索结果和作者

> ID：14690902
> 
> 赞同：0
> 
> 时间：2013-02-04T16:21:53.473
> 
> 标签：sharepoint, search, metadata, search-server-2010

我想从 Authors 属性中删除 CreatedBy。我们正在上传要编制索引和创建的文档，其永远不会是该文档的作者。元数据作者应该是唯一出现在搜索结果和优化面板中的作者。

我能够为核心结果修改 XSL，只是将作者从显示中删除。现在，我的问题是优化面板列出了由用户创建的作者。

我已删除 CreatedBy 元数据属性并尝试修改 Author(Text) 属性以仅包含 metadataAuthor，但没有成功。

这里有什么建议吗？- 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T20:23:48.983

我最终修改了 Core Results XSL 以排除第一作者：

```
<xsl:template name="DisplayAuthors">
  <xsl:param name="author" /> 
  <xsl:if test="string-length($author) &gt; 0"> 
   <xsl:value-of select="$Authors" />
   <xsl:choose>
   <xsl:when test="string-length(author_multival) &gt; 0"> 
   <xsl:for-each select="author_multival">
    <xsl:variable name="p" select="position()"/>
    <xsl:if test="$p &gt; 1">
       <xsl:value-of select="."/>
       <!--<xsl:text disable-output-escaping="yes">&#44;</xsl:text> 
       <xsl:text disable-output-escaping="yes">&#32;</xsl:text> -->
    </xsl:if>
  </xsl:for-each>
  </xsl:when>
  <xsl:otherwise>
   <xsl:value-of select="author"/>      
  </xsl:otherwise>
  </xsl:choose>
  </xsl:if>
</xsl:template> 
```

对于细化面板，我为作者添加了一个自定义过滤器，因为列表是非常静态的。不在列表中的任何作者都被排除在细化列表之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T01:04:23.660

你也许可以做到这一点。因为爬取的财产两者兼而有之。

```
Office:4(Text) =Author, MetadataAuthor 
```

您可以使用自定义爬网属性来实现这一点。

# java - 我可以使用 fastxml 将日期写为 ISODate 以使用过期的 mongodb 索引吗？

> ID：14690906
> 
> 赞同：2
> 
> 时间：2013-02-04T16:22:03.857
> 
> 标签：java, mongodb, serialization, mapping, fasterxml

我正在使用[FasterXML](http://wiki.fasterxml.com/)将我的对象映射到 MongoDB

我想使用[过期索引](http://docs.mongodb.org/manual/tutorial/expire-data/#expire-data-from-collections-by-setting-ttl)，但为此，我需要在文档中使用 ISODate 字段。

如果我的 java 类有一个 Date 字段，它会被数字或字符串序列化，使用`DateSerializer`如下所述：[http ://wiki.fasterxml.com/JacksonFAQDateHandling](http://wiki.fasterxml.com/JacksonFAQDateHandling)

我追踪到这个功能：

```
/**
 * Method that will handle serialization of Date(-like) values, using
 * {@link SerializationConfig} settings to determine expected serialization
 * behavior.
 * Note: date here means "full" date, that is, date AND time, as per
 * Java convention (and not date-only values like in SQL)
 */
public final void defaultSerializeDateValue(Date date, JsonGenerator jgen)
    throws IOException, JsonProcessingException
{
    // [JACKSON-87]: Support both numeric timestamps and textual
    if (isEnabled(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS)) {
        jgen.writeNumber(date.getTime());
    } else {
        jgen.writeString(_dateFormat().format(date));
    }
} 
```

这两条路径都没有最终编写标准的 mongodb 日期类型，因此我的索引不起作用。

有没有办法像从 mongo shell 创建文档时那样强制对 java`Date`类型进行序列化？或者，我可以通过“触发器”或类似的方式自动添加该字段吗？（目的是完全绕过序列化器）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-06-09T14:13:29.433

我对新版本的 FasterXML 有完全相同的问题。(2.7.3)。FasterXML 现在有一个“编解码器”来处理对象，除了序列化器。我使用使编解码器无效的序列化程序解决了该问题，因此日期对象无需触摸即可到达 mongo 驱动程序。

```
private static class MongoDateSerializer extends JsonSerializer<Date> {

    public void serialize(Date value, JsonGenerator jgen, SerializerProvider provider) throws IOException {
        TokenBuffer buffer = (TokenBuffer) jgen;
        ObjectCodec codec = buffer.getCodec();
        buffer.setCodec(null);

        buffer.writeObject(value);

        buffer.setCodec(codec);
    }
} 
```

看这条线`buffer.writeObject(value)`，这就是旧版本的 FasterXML 的做法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-22T08:35:11.843

您可以通过调用 setDateFormat() 使用自己的 DateFormat 初始化 ObjectMapper。

例如：

```
public static void main(String[] args) throws JsonGenerationException, JsonMappingException,
        IOException {
    ObjectMapper mapper = null;
    mapper = new ObjectMapper();
    SimpleDateFormat sdf = new SimpleDateFormat("yyyy~MM~dd");
    mapper.setDateFormat(sdf); // 1.8 and above
    //mapper.getSerializationConfig().setDateFormat(sdf); // for earlier versions (deprecated for 1.8+)
    Map<String, Date> data = new HashMap<>();
    data.put("Key", new Date());
    System.out.println(mapper.writeValueAsString(data));
} 
```

注意：SimpleDateFormat 不是线程安全的。

或者您可以使用 JsonSerialize 注释 bean。

例如：

```
public static class User {

    private int id;

    private Date createTime;

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    @JsonSerialize(using = DateJsonSerializer.class)
    public Date getCreateTime() {
        return createTime;
    }

    public void setCreateTime(Date createTime) {
        this.createTime = createTime;
    }
} 
```

这是 DateJsonSerializer。

```
public class DateJsonSerializer extends JsonSerializer<Date> {

    @Override
    public void serialize(Date date, JsonGenerator jgen, SerializerProvider provider)
            throws IOException, JsonProcessingException {
        jgen.writeString("generate ISODate yourself");
    }
} 
```

# php - PHP MySQL maxTime 查询

> ID：14690907
> 
> 赞同：0
> 
> 时间：2013-02-04T16:22:05.977
> 
> 标签：php, mysql, timestamp

我有一个例程，每隔几个小时运行一次，并记录用户配置的备份作业。每个作业都会在表中创建一个条目，条目数可以是从 0 到无穷大的任意值（完全取决于用户拥有的作业数）。

在下面的示例中，用户当前配置了三个备份作业，但我使用的 SQL 查询是从一周前的数据提取中提取备份。我不知道如何调整我的查询，以便我只从最近的时间戳中获取条目而不执行 LIMIT（我不能使用 LIMIT，因为我永远不知道将出现的条目数）：

```
SELECT BACKUP_SET_ID, BACKUP_SET_TYPE, Max(SNAPSHOT_TIME) maxTime
FROM TABLE_snapshots_backupsets
WHERE ACCOUNT_ID='6000001'
GROUP BY BACKUP_SET_ID; 
```

输出：

```
+---------------+----------------------------------+---------------------+  
| BACKUP_SET_ID | BACKUP_SET_TYPE                  | maxTime             |  
+---------------+----------------------------------+---------------------+  
| 1359127993672 | FILE                             | 2013-02-04 08:00:01 |  
| 1359145357475 | FILE                             | 2013-02-04 08:00:01 |  
| 1359145395067 | VMware Virtualization            | 2013-02-04 08:00:01 |  
| 1359145404910 | Microsoft Windows Virtualization | 2013-01-27 12:00:01 |  
+---------------+----------------------------------+---------------------+  
4 rows in set (0.00 sec) 
```

因此，在上述情况下，我想要的是查询不提取“Microsoft Windows 虚拟化”条目，因为用户在最近的数据提取中不再配置该条目。它应该只提取具有最新时间戳的条目。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:29:39.353

如果您只想要共享相同时间戳的最新条目，请重新排列逻辑：

```
SELECT BACKUP_SET_ID, 
       BACKUP_SET_TYPE, 
       SNAPSHOT_TIME
FROM TABLE_snapshots_backupsets
WHERE SNAPSHOT_TIME = (SELECT Max(SNAPSHOT_TIME) 
                       FROM TABLE_snapshots_backupsets 
                       WHERE ACCOUNT_ID = '6000001')
; 
```

或者，如果您需要“时间范围”解决方案，请在 snapshot_time 上添加额外的 WHERE 子句

```
WHERE ACCOUNT_ID='6000001' AND SNAPSHOT_TIME > CURTIME() - INTERVAL 7 DAY 
```

对于其他日期操作选项：[http ://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-add](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-add)

# android - 用于android的java中的新文件夹

> ID：14690908
> 
> 赞同：0
> 
> 时间：2013-02-04T16:22:06.230
> 
> 标签：android, explorer

如何创建新活动？

我已经尝试过这段代码，但是当我启动它时我的应用程序崩溃了......

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.newfolder:
    startActivity(new Intent(this, Newfolder.class));
    return true;
    default:
    return super.onOptionsItemSelected(item);
    }
} 
```

LogCat 错误：

```
02-04 18:48:07.987: E/AndroidRuntime(839): FATAL EXCEPTION: main
02-04 18:48:07.987: E/AndroidRuntime(839): android.content.ActivityNotFoundException: Unable to find explicit activity class {com.example.androidexplorer/com.example.androidexplorer.Newfolder}; have you declared this activity in your AndroidManifest.xml?
02-04 18:48:07.987: E/AndroidRuntime(839):      at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1508)
02-04 18:48:07.987: E/AndroidRuntime(839):      at android.app.Instrumentation.execStartActivity(Instrumentation.java:1384)
02-04 18:48:07.987: E/AndroidRuntime(839):      at android.app.Activity.startActivityForResult(Activity.java:3190)
02-04 18:48:07.987: E/AndroidRuntime(839):      at android.app.Activity.startActivity(Activity.java:3297)
02-04 18:48:07.987: E/AndroidRuntime(839):      at com.example.androidexplorer.MainActivity.onMenuItemSelected(MainActivity.java:105)
02-04 18:48:07.987: E/AndroidRuntime(839):      at com.android.internal.policy.impl.PhoneWindow.onMenuItemSelected(PhoneWindow.java:950)
02-04 18:48:07.987: E/AndroidRuntime(839):      at com.android.internal.view.menu.MenuBuilder.dispatchMenuItemSelected(MenuBuilder.java:735)
02-04 18:48:07.987: E/AndroidRuntime(839):      at com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:149)
02-04 18:48:07.987: E/AndroidRuntime(839):      at com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:874)
02-04 18:48:07.987: E/AndroidRuntime(839):      at com.android.internal.view.menu.ListMenuPresenter.onItemClick(ListMenuPresenter.java:163)
02-04 18:48:07.987: E/AndroidRuntime(839):      at android.widget.AdapterView.performItemClick(AdapterView.java:292)
02-04 18:48:07.987: E/AndroidRuntime(839):      at android.widget.AbsListView.performItemClick(AbsListView.java:1058)
02-04 18:48:07.987: E/AndroidRuntime(839):      at android.widget.AbsListView$PerformClick.run(AbsListView.java:2514)
02-04 18:48:07.987: E/AndroidRuntime(839):      at android.widget.AbsListView$1.run(AbsListView.java:3168)
02-04 18:48:07.987: E/AndroidRuntime(839):      at android.os.Handler.handleCallback(Handler.java:605)
02-04 18:48:07.987: E/AndroidRuntime(839):      at android.os.Handler.dispatchMessage(Handler.java:92)
02-04 18:48:07.987: E/AndroidRuntime(839):      at android.os.Looper.loop(Looper.java:137)
02-04 18:48:07.987: E/AndroidRuntime(839):      at android.app.ActivityThread.main(ActivityThread.java:4424)
02-04 18:48:07.987: E/AndroidRuntime(839):      at java.lang.reflect.Method.invokeNative(Native Method)
02-04 18:48:07.987: E/AndroidRuntime(839):      at java.lang.reflect.Method.invoke(Method.java:511)
02-04 18:48:07.987: E/AndroidRuntime(839):      at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
02-04 18:48:07.987: E/AndroidRuntime(839):      at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
02-04 18:48:07.987: E/AndroidRuntime(839):      at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:31:20.600

Logcat 会在这里受到欢迎......但我猜你忘了在你的清单中添加你的 newFolder 活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T16:31:30.253

试试这个，首先创建菜单文件夹，然后编写 menu.xml 文件。您必须为每个项目提供 id。

菜单.xml

```
 <menu xmlns:android="http://schemas.android.com/apk/res/android" >

<item
    android:id="@+id/newfolder"
    android:orderInCategory="100"
    android:showAsAction="never"
    android:title="@string/un_subscribe">
</item> 
```

在您的 java 代码中编写此代码。

```
 @Override
public boolean onMenuItemSelected(int featureId, MenuItem item) {
    // TODO Auto-generated method stub
    super.onMenuItemSelected(featureId, item);
    switch (item.getItemId()) {
    case R.id.newfolder:
         startActivity(new Intent(this, Newfolder.class));

    default:
        return super.onOptionsItemSelected(item);
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T16:26:26.107

你的`Newfolder`扩展活动吗？您是否在 AndroidManifest.xml 中
声明了活动？（[在此处查看](https://stackoverflow.com/questions/3832619/add-a-new-activity-to-the-androidmanifest)如何操作）`Newfolder`

发布您的堆栈跟踪！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-04T16:26:13.393

android中最常见的错误是使用`this`关键字。`startActivity(new Intent(this, Newfolder.class));`在这一行中，我认为您应该使用`startActivity(new Intent(YourActivityName.this, Newfolder.class));`，因为`this`这很可能是一个事件侦听器对象。

# c# - 使用多对多和 Table-Per-Type 映射 EF fluent API

> ID：14690911
> 
> 赞同：0
> 
> 时间：2013-02-04T16:22:14.173
> 
> 标签：c#, entity-framework-4, ef-code-first

我有以下课程：

```
public class Account
{
   public int Id {get; set;}
   public ICollection<AccountAddress> Addresses {get; set;}
}

public class Address 
{
   public int Id {get; set;}
   public string Street1 {get; set;}
   ... //Other address properties
}

public class AccountAddress : Address
{
   public int AccountId {get; set;}
   public DateTime BeginDate {get; set;}
   public DateTime PurgeDate {get; set;}
   public bool IsPrimary {get; set;}
} 
```

在我流利的 ​​api 配置中，我有以下内容：

```
public AccountConfiguration()
{
    ToTable("accounts");
    HasKey(m => m.Id);
    Property(m => m.Id).HasColumnName("accountid");
    ...
    //This is wrong because it does not allow many to many
    HasMany(m => m.Addresses).WithRequired().HasForeignKey(m => m.AccountId);
}

public AddressConfiguration()
{
   ToTable("addresses");
   HasKey(a => a.Id);
   Property(a => a.Id).HasColumnName("addressid");
   ...
}

public AccountAddressConfiguration()
{
   ToTable("acctaddrs");
   HasKey(m => new {m.Id, m.AccountId});
   ...
} 
```

我正在尝试将我的 AccountConfiguration 上的关系编辑为多对多关系，但我正在努力弄清楚如何定义它。

这背后的想法是账户可以有多个地址，一些账户可以绑定到同一个地址。

感谢您对此的帮助！

**编辑** 所以这是我需要完成的。我有一个表（地址），它有一个 Id 字段并存储您所有的典型地址信息。还有许多其他表具有指向 Addresses 表中的地址的 AddressId 字段。单个地址可以被许多不同的关系重用。

现在，一个帐户有许多地址，但也有关于一个地址的附加数据。我想要完成的是将地址数据存储在 Addresses 表中，并将附加数据存储在单独的表中。再一次，帐户可以共享地址，但不能共享其他地址数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:57:12.107

您不能将其建模为多对多关联（使用透明联结表），因为联结表`AccountAddress`不仅包含主键值。

作为一个真正的联结表`AccountAddress`还应该包含`AddressId`：

```
public class AccountAddress : Address
{
   [ForeignKey("Account"]] // Or fluent mapping
   public int AccountId {get; set;}
   public virtual Account Account {get; set;}

   [ForeignKey("Address"]] // Or fluent mapping
   public int AddressId {get; set;}
   public virtual Address Address {get; set;}

   public DateTime BeginDate {get; set;}
   public DateTime PurgeDate {get; set;}
   public bool IsPrimary {get; set;}
} 
```

并且您的帐户和地址类都应该有一个`ICollection<AccountAddress>`.

您将其映射为`Address 1 - n AccountAddress n - 1 Account`.

要获取例如帐户地址，请执行以下操作：

```
Accounts.Select(a => a.AccountAddresses
                     // .Where(a => a.IsPrimary // for instance
                      .Select(aa => aa.Address)) 
```

# html - 强制firefox下载视频

> ID：14690912
> 
> 赞同：0
> 
> 时间：2013-02-04T16:22:16.997
> 
> 标签：html, firefox

我需要向用户提供下载链接以下载视频。当我使用 Firefox 访问该链接时，它开始播放而不是下载。

如何强制firefox下载它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T16:28:52.190

您必须设置一些 HTTP 标头。PHP 中的示例：

```
header("Content-Disposition: attachment; filename=" . urlencode($file));    
header("Content-Type: application/force-download");
header("Content-Type: application/octet-stream");
header("Content-Type: application/download"); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-04T17:33:25.727

大声笑右键单击链接而不是左键单击并选择选项将链接另存为..

# android-layout - 我应该为这个 android UI 使用什么布局

> ID：14690913
> 
> 赞同：-1
> 
> 时间：2013-02-04T16:22:19.023
> 
> 标签：android-layout, android-scrollview

我想在android中做这样的事情

```
-----------------------------
|                            |
|                            |
|        arrow up here       |
|----------------------------|
|                            |
|     scroll-able with       |
|     components             |
|----------------------------|
|        arrow down here     |
|                            |
|                            |
----------------------------- 
```

中间的可滚动不能使用 ScrollView？向上的箭头应该向上滚动中间的可滚动（如果此布局确实是滚动视图），向下但向下的箭头相同

背景应该是固定的，中间滚动应该只滚动组件是不可能的？我应该使用什么布局？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T01:17:50.140

如果您真的想使用滚动视图（而不是 ListView），这就是您的布局。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:onClick="up"
        android:text="UP" />

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="vertical" >

            <!-- ADD YOUR COMPONENTS HERE -->

        </LinearLayout>
    </ScrollView>

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:onClick="down"
        android:text="DOWN" />

</LinearLayout> 
```

这就是如何管理活动中的“向上”和“向下”事件。添加这些方法：

```
public void up(View v) {
    ScrollView scrollView = (ScrollView) findViewById(R.id.scrollView1);
    scrollView.scrollBy(0, +20);
}

public void down(View v) {
    ScrollView scrollView = (ScrollView) findViewById(R.id.scrollView1);
    scrollView.scrollBy(0, -20);
} 
```

在这个例子中，我只是滚动了 20 个像素。调整这些值以获得您想要的（例如在滚动视图的中间滚动，或滚动可见滚动视图高度的一半）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T01:15:15.457

取决于你在中间需要什么。您可以`<ScrollView>`在滚动视图中创建并构建 xml。或者您可以按照建议进行操作并使用 listView。如果没有更多信息，就很难进一步指导您。

# javascript - 我们可以通过jsp中的anchor标签发送一个JavaScript变量吗

> ID：14690916
> 
> 赞同：0
> 
> 时间：2013-02-04T16:22:22.730
> 
> 标签：javascript, xml, jsp, anchor

我需要通过锚标签将 userid 变量从一个页面传递到另一个页面`<a>`。登录后，此用户 ID 将显示在每个页面中。这里我附上了代码

代码：

```
<td colspan="2" align="right"><div align="center">User Id</div></td>
<td><input class="textbox" type="text" id="userid" ><a href="access.jsp?userid='+userid'" 
"></a></td></tr>
 Javascript:
       var  userid =document.getElementBy("userid"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T16:30:44.383

您需要`href`使用 javascript 操作属性才能插入值。例如，您可以通过使用`onclick`事件处理程序来实现这一点：

```
<a href="access.jsp" onclick="appendUserId(this)">

<script>
function appendUserId(e){
    e.href = e.href + "?userid=" + document.getElementById('userId').value;
}
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T16:31:48.040

最基本的方法是将 JavaScript 设置`window.location`为该 URL。

```
<input class="textbox" type="text" id="userid" />
<a href="javascript:window.location='access.jsp?userid=' + encodeURIComponent(document.getElementBy('userid'))">link</a> 
```

或者

```
<input class="textbox" type="text" id="userid" />
<a href="#" onclick="window.location='access.jsp?userid=' + encodeURIComponent(document.getElementBy('userid'))">link</a> 
```

但是，通常的方法是为此使用一个表单，这样参数在 URL 中“自动”结束，而不需要基于 JS 的讨厌的 hack/解决方法：

```
<form action="access.jsp">
    <input class="textbox" type="text" name="userid" />
    <input type="submit" value="submit" />
</form> 
```

如果您主要关心按钮的样式，只需添加一些 CSS 使其看起来像一个链接。

请注意，这一切都与 JSP 完全无关，因为它只是一个 HTML/CSS/JS 代码生成器。在其他也产生 HTML/CSS/JS 的服务器端视图技术（例如 PHP、ASP 等）中，您会遇到完全相同的问题。

# iphone - 每次用户滚动时保存 UITextField

> ID：14690919
> 
> 赞同：-1
> 
> 时间：2013-02-04T16:22:28.010
> 
> 标签：iphone, ios, objective-c, uiscrollview

我的问题是，我有 5 个 UIViewController 放在一个 UIScrollView 中。在每个视图控制器中，我都有一些 UITextField，我需要将文本保存到 NSUserDefaults。我可以使用按钮来完成它，但是每次用户滚动到下一个视图时我如何保存它？（没有任何按钮？）谢谢..这是我用于第一个视图控制器的工作代码

```
- (void)save:(id)sender {
    NSString *a_name1 = [name text];
    NSString *a_address = [address text];
    NSString *a_address2 = [address2 text];
    NSString *a_age = [age text]

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:a_name1 forKey:@"name"];
    [defaults setObject:a_address forKey:@"address"];
    [defaults setObject:a_address2 forKey:@"address2"];
    [defaults setObject:a_age forKey:@"age"];
    [defaults synchronize];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:30:07.573

您需要为滚动视图设置一个委托并实施`scrollViewDidEndDecelerating:`或`scrollViewDidScroll:`检查 contentOffset 以查看您是否更改了页面。

如果此时您检测到您更改了页面，那么您可以做任何您需要做的事情

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T16:30:08.917

您可以使用滚动视图的`contentoffset`属性来查找当前可见视图（或 VC）并使用它来执行该过程

与滚动视图委托一起实现，您可以实现这一点

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-04T16:42:38.077

为每个 UITextField 创建一个 ViewController 似乎不是很有用。如果我正确理解了你的问题，你只需要 UIViewController 实例。在 viewController 实例的 view 属性上添加 UITextField 对象（覆盖 viewDidLoad 方法或在 Interfacebuilder 中添加它们。如果您的部署目标 iOS 6 实现 viewDidDisapear: 方法并使用上面的 NSUserDefaults 代码覆盖该方法。如果您的部署比 iOS 6 更旧的版本可以覆盖 viewDidUnload 方法。

# java - Google 海拔 API 和限制率

> ID：14690920
> 
> 赞同：3
> 
> 时间：2013-02-04T16:22:29.480
> 
> 标签：java, android, google-maps

为了获得几个点的高度，我使用了谷歌提供的 Elevation API。我面临的问题是我经常收到一条`OVER_QUERY_LIMIT`错误消息，当然是因为我以过高的速度询问高度。

谷歌文档谈到了这样的限制，但没有给出任何价值。有谁知道这个最高审讯率设置在什么水平？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T16:29:19.473

[Google Elevation](https://developers.google.com/maps/documentation/elevation/)页面为您提供：

*使用限制*

*Google Elevation API 的使用限制为每天 2,500 个请求（Maps API for Business 用户每天最多可以发送 100,000 个请求）。在每个给定请求中，您最多可以查询 512 个位置的海拔高度，但每天的总位置数不得超过 25,000 个（Maps API for Business 用户为 1,000,000 个）。强制执行此限制是为了防止滥用和/或重新利用 Elevation API，并且此限制将来可能会更改，恕不另行通知。此外，我们强制执行请求速率限制以防止滥用服务。如果您超过 24 小时限制或以其他方式滥用服务，Elevation API 可能会暂时停止为您工作。如果您继续超过此限制，您对 Elevation API 的访问可能会被阻止。*

如果您在 Google 上搜索过，您可以自己找到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T07:11:47.820

您可能每分钟发出太多请求；这被称为速率限制，但每分钟的实际限制并未在任何地方公布。我看到一些关于每秒 10 个请求（即每分钟 600 个）的限制作为所有 Google API 的绝对限制的讨论。

对于他们的免费 API（例如您正在使用的 API）和他们的地理编码 API，他们只是说他们认为*每分钟的请求数量是合理的*。这可能会根据服务器负载和/或一天中的时间而上升和下降。

[最近的这篇文章](http://lathedeveloper.wordpress.com/2013/02/08/google-geocoder-queries-per-second/)似乎暗示您需要在 10 个请求的批次之间延迟 1 秒，其中 10 个请求中的每一个单独分开 0.1 秒。

这个问题的答案也支持上述内容： [如何在没有收到 OVER_QUERY_LIMIT 响应的情况下对 20 个地址进行地理编码？](https://stackoverflow.com/questions/2419219/how-do-i-geocode-20-addresses-without-receiving-an-over-query-limit-response)

# mysql - 在 VB 中重新排列日期

> ID：14690927
> 
> 赞同：2
> 
> 时间：2013-02-04T16:22:51.107
> 
> 标签：mysql, vb.net, date

我正在使用 Visual Studio 2012 在 VB 中构建预订服务，它使用数据库。我想知道如何将日期从 VB 格式（“MM-dd-yyyy”）重新排列为 MySQL 日期格式（“yyyy-MM-dd”）。任何建议将不胜感激 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T16:24:07.590

该`Date.ToString`方法允许您指定格式：

```
Dim d = Date.Now
d.ToString("yyyy-MM-dd") 
```

但是，最好使用带有实际`Date`变量的参数化命令并让系统为您转换，因为您需要的实际字符串格式将取决于您当前的文化。例如：

```
Dim d = Date.Now
Using command As IDbCommand = connection.CreateCommand()
    command.CommandText = "UPDATE Table SET Column = @ColumnValue"
    Dim parameter As IDbDataParameter = command.CreateParameter()
    parameter.ParameterName = "@ColumnValue"
    parameter.Value = d
    command.Parameters.Add(parameter)
    command.ExecuteNonQuery()
End Using 
```

# javascript - 我可以运行多个 javascript onload 吗？

> ID：14690928
> 
> 赞同：1
> 
> 时间：2013-02-04T16:23:05.217
> 
> 标签：javascript

我有一个使用modernizr.js 的页面，该页面在页面加载时运行。在我添加这个之前，我运行了一个简单的 js 时钟脚本来显示页面加载时也加载的时间，但是，因为将它们同时添加到页面会使其中一个或另一个停止工作。

我对 javascript 还很陌生，并且正在掌握规则（自学）。是否可以让两个脚本在负载时运行，如果可以，如何？或者，我是不是找错了树，如果是，我的代码有问题吗？

这就是我所拥有的...

```
<script>
window.onload = function() {
   if(window.FileReader && Modernizr.draganddrop){
      window.location = "http://www.dentaldigs.co.uk/image_upload.php"

   }
};
</script>

<script>
      // add a zero in front of numbers<10
      function checkTime(i)
      {
      if (i<10)
        {
          i="0" + i;
        }
      return i;
      }

      function clock()
      {
      var today=new Date();
      var h=today.getHours();
      var m=today.getMinutes();
      var s=today.getSeconds();
      m=checkTime(m);
      s=checkTime(s);
      document.getElementById('clock_div').innerHTML=h+":"+m+":"+s;
      t=setTimeout(function(){clock()},500);
      }  

</script>

<body onLoad="clock()">
</body> 
```

使用时钟脚本，modernizr.js 不起作用。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T16:30:25.303

`window.onload`您应该使用 绑定事件，而不是直接分配给`addEventListener`。这样您就可以分配多个功能。

```
window.addEventListener('load', function(){
    console.log('first onload');
});

window.addEventListener('load', function(){
    console.log('second onload');
}); 
```

演示：http: [//jsfiddle.net/jjqCX/](http://jsfiddle.net/jjqCX/)

**更新**：如果您使用的是 IE < 9，则需要使用`attachEvent`.

```
function loaded = function(){
    console.log('first onload');
}

function loaded2 = function(){
    console.log('second onload');
}

if (window.addEventListener) {
    window.addEventListener('load', loaded, false); 
    window.addEventListener('load', loaded2, false); 
}
else if (window.attachEvent)  {
    window.attachEvent('onload', loaded);
    window.attachEvent('onload', loaded2);
} 
```

演示：http: [//jsfiddle.net/jjqCX/1/](http://jsfiddle.net/jjqCX/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T16:29:59.010

为什么不在调用 Modernizr 脚本后`clock();`直接添加：`window.onload`

```
<script>
window.onload = function() {
   // loading modernizr
   if(window.FileReader && Modernizr.draganddrop){
      window.location = "http://www.dentaldigs.co.uk/image_upload.php"
   }
   // calling your clock script
   clock();
};
</script>
<body>
   ...
</body> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T16:31:19.390

用这个

```
function myFunctions() {
  function1();
  function2();
}
window.onload = myFunctions; 
```

# html - PDF 页面溢出

> ID：14690929
> 
> 赞同：0
> 
> 时间：2013-02-04T16:23:13.267
> 
> 标签：html, css, pdf, wkhtmltopdf

我正在使用 WKHTMLTOPDF 为客户 pdf 搜索引擎优化报告。但是，我无法阻止每一页的内容溢出到下一页。所以单词的一半显示在第 1 页，其余的显示在第 2 页的顶部。

我曾尝试使用 CSS 分页符，但似乎没有任何影响。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:43:45.460

将这些规则添加到您的样式表中：

```
div.alwaysbreak { page-break-before: always; }
div.nobreak:before { clear:both; }
div.nobreak{ page-break-inside: avoid;
  /* http://code.google.com/p/wkhtmltopdf/issues/detail?id=9#c21 */
} 
```

然后用`<div class="nobreak">`. 这甚至适用于表格行。

# c# - 为什么没有本地字符串方法来更改字符串标题大小写？

> ID：14690930
> 
> 赞同：2
> 
> 时间：2013-02-04T16:23:15.507
> 
> 标签：c#, string, function

在处理最近的项目时一直困扰着我的事情；为什么 C# 没有将字符串更改为标题大小写的本机函数？

例如

```
string x = "hello world! THiS IS a Test mESSAGE";
string y = x.ToTitle(); // y now has value of "Hello World! This Is A Test Message" 
```

我们有`.ToLower`and `.ToUpper`，我很感激您可以使用`System.Threading.Thread.CurrentThread.CurrentCulture.TextInfo.ToTitleCase`或创建一个 TextInfo 对象（相同的过程），但它实在是太……丑陋了。

有人知道原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T16:24:54.203

实际上它有：[TextInfo.ToTitleCase](http://msdn.microsoft.com/en-us/library/system.globalization.textinfo.totitlecase.aspx)

为什么它在那里？因为套管取决于当前的文化。例如，土耳其文化对于“i”和“I”字符有不同的大写和小写。[在此处](http://www.siao2.com/2004/12/03/274288.aspx)阅读有关此内容的更多信息。

更新：实际上我同意@Cashley 的观点，他说课堂上缺少的`ToTitleCase`方法`String`看起来像是对微软的疏忽。如果您看一下，`String.ToUpper()`或者`String.ToLower()`您会看到两者都在`TextInfo`内部使用：

```
public string ToUpper()
{
    return this.ToUpper(CultureInfo.CurrentCulture);
}

public string ToUpper(CultureInfo culture)
{
    if (culture == null)    
        throw new ArgumentNullException("culture");

    return culture.TextInfo.ToUpper(this);
} 
```

所以，我认为应该有相同的方法`ToTitleCase()`。也许 .NET 团队决定`String`只将那些最常用的方法添加到类中。`ToTitleCase`我看不出有任何其他远离的理由。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T16:31:39.103

```
 Dim myString As String = "wAr aNd pEaCe"

  ' Creates a TextInfo based on the "en-US" culture.
  Dim myTI As TextInfo = New CultureInfo("en-US", False).TextInfo

  ' Changes a string to titlecase.
  Console.WriteLine("""{0}"" to titlecase: {1}", myString, myTI.ToTitleCase(myString)) 
```

或者

```
 string myString = "wAr aNd pEaCe";

  // Creates a TextInfo based on the "en-US" culture.
  TextInfo myTI = new CultureInfo("en-US", false).TextInfo;

  // Changes a string to titlecase.
  Console.WriteLine("\"{0}\" to titlecase: {1}", myString, myTI.ToTitleCase(myString)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T16:29:08.193

[这里有一个扩展方法](http://www.java2s.com/Tutorial/CSharp/0140__Class/Addtitlecasetostringclass.htm)，但它不是特定于文化的。

可能更好的实现只是像 String.ToUpper 一样包装 CurrentCulture.TextInfo：

```
class Program
{
    static void Main(string[] args)
    {
        string s = "test Title cAsE";
        s = s.ToTitleCase();
        Console.Write(s);
    }
}
public static class StringExtensions
{
    public static string ToTitleCase(this string inputString)
    {
        return CultureInfo.CurrentCulture.TextInfo.ToTitleCase(inputString);
    }

    public static string ToTitleCase(this string inputString, CultureInfo ci)
    {
        return ci.TextInfo.ToTitleCase(inputString);
    }
} 
```

# php - Facebook 帖子提要 API 缩略图丢失

> ID：14690934
> 
> 赞同：0
> 
> 时间：2013-02-04T16:23:21.733
> 
> 标签：php, facebook

我有两个不同的域，它们使用相同的 Facebook API 在我的墙上发布提要。代码如下：

```
function postToFeed() 
{
// calling the API ...
var obj = {
  method: 'feed',
  link: '<?php echo "http://".$_SERVER['HTTP_HOST'].Yii::app()->baseUrl."/index.php?r=campaign/view&id=$model->campaign_id";?>',
  picture: '<?php echo "http://".$_SERVER['HTTP_HOST'].Yii::app()->baseUrl."/$model->campaign_image";?>',
  name: '<?php echo $model->campaign_title;?>',
  caption: 'Demo',
  description: '<?php echo $model->campaign_description;?>'
};

function callback(response) 
{
    if (response && response.post_id) 
    {
        fbs_click(<?php echo $myid;?>,<?php echo $model->campaign_id;?>);
    } 
    else 
    {
        alert('Post was not published.');
    }
}

FB.ui(obj, callback); 
```

}

在这两个域上，帖子提要都有效。但在其中一个域中，缩略图不会显示。我想知道是不是因为文件权限问题？

![在此处输入图像描述](../Images/ea5f798df6a1d9345a6b0980aa04e41b.png)

![在此处输入图像描述](../Images/404358276a91295df4d30d97c9975653.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T17:45:30.027

检查您是否可以从外部访问图像，如果图像是本地的，则 Facebook 不会获取它，

# php - 从 mysql 数据库获取时间戳并让 php 以天、小时、分钟为单位计算时间？

> ID：14690938
> 
> 赞同：-2
> 
> 时间：2013-02-04T16:23:35.890
> 
> 标签：php, mysql, date, datetime

> **可能重复：**
> [PHP：格式化时间 Stackoverflow 或 Apple Mail 样式](https://stackoverflow.com/questions/11941888/php-formatting-time-stackoverflow-or-apple-mail-style)

嗨，有人可以帮助我，我在 mysql 表中回显时间戳，但我希望 php 以天/小时/分钟计算时间戳。

这可能吗，我对 php 和 mysql 还是新手并且正在学习，所以有人可以指导我正确的方向或告诉我如何做到这一点。谢谢你

```
<? echo "{$news['date_added']}";?> 
```

我希望输出为秒数：12 秒前添加或 3 分钟前添加或 4 天前添加或 4 个月前添加

我认为脚本应该如下所示是否正确：

```
function nicetime($date)
{
    if(empty($date)) {
        return "No date provided";
    }

    $periods         = array("second", "minute", "hour", "day", "week", "month", "year", "decade");
    $lengths         = array("60","60","24","7","4.35","12","10");

    $now             = time();
    $unix_date         = strtotime($date);

       // check validity of date
    if(empty($unix_date)) {   
        return "Bad date";
    }

    // is it future date or past date
    if($now > $unix_date) {   
        $difference     = $now - $unix_date;
        $tense         = "ago";

    } else {
        $difference     = $unix_date - $now;
        $tense         = "from now";
    }

    for($j = 0; $difference >= $lengths[$j] && $j < count($lengths)-1; $j++) {
        $difference /= $lengths[$j];
    }

    $difference = round($difference);

    if($difference != 1) {
        $periods[$j].= "s";
    }

    return "$difference $periods[$j] {$tense}";
}

$date = "{$news['content']}";
$result = nicetime($date); // 2 days ago ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T16:37:04.650

```
$datetime1 = new DateTime();
$datetime2 = new DateTime('2013-02-03 19:13:00');
$interval = $datetime1->diff($datetime2);
echo $interval->format('%h hours %i minutes'); 
```

[看到它在行动](http://3v4l.org/priuP)

参考

*   [约会时间](http://www.php.net/manual/en/class.datetime.php)
*   [日期间隔](http://www.php.net/manual/en/class.dateinterval.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T16:31:16.323

如果您在 MySQL 表中的时间戳，您可以使用**[FROM_UNIXTIME](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_from-unixtime)**函数以适当的格式获取它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T16:25:59.523

查看`date()`手册中的功能。[http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

```
<?php echo date("Y-m-d",$news['date_added']); ?> 
```

将打印例如：

```
2013-02-04 
```

# algorithm - 旅行推销员将贬值物品运送到不同的市场

> ID：14690939
> 
> 赞同：5
> 
> 时间：2013-02-04T16:24:01.503
> 
> 标签：algorithm, estimation, traveling-salesman

什么是一个很好的启发式来解决以下挑战？

> Quality Blimps Inc. 正在寻求将他们的销售扩展到其他城市 (N)，因此他们聘请您作为推销员飞往其他城市销售飞艇。飞艇旅行可能很昂贵，因此您需要确定每次旅行要带多少飞艇，以及何时返回总部以获得更多飞艇。Quality Blimps 提供无限量的飞艇。
> 
> 您将只能在您访问的每个城市出售一个飞艇，但您不需要访问每个城市，因为有些城市的旅行费用很高。每个城市都有飞艇出售的初始价格，但随着出售更多飞艇（并且新奇感消失），价格会下降一定比例。找到一条利润最大化的好路线。

[https://www.hackerrank.com/codesprint4/challenges/tbsp](https://www.hackerrank.com/codesprint4/challenges/tbsp)

这个挑战类似于标准的旅行推销员问题，但有一些额外的曲折：推销员需要跟踪他自己的旅行费用和飞艇的费用。每个城市都有不同的飞艇售价，但这些价格会随着他的旅程而下降。什么是用于最大化利润的快速算法（即 n log n ）？

以某种方式运输物品的价格使 TSP 更简单。如果业务员在A市，想去B市，他可以比较直接去B市的成本和先回总部接更多飞艇的成本。即，通过 A 乘坐额外的飞艇到 B 或在两者之间返回是否更便宜。此检查将创建一系列循环旅行，然后销售人员可以按照收入最高的顺序进行循环。但是首先确定这些循环的好方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T18:43:22.917

这是一个搜索问题。假设网络比蛮力解决的要大，最好的算法是[蒙特卡洛树搜索](http://sander.landofsand.com/publications/Monte-Carlo_Tree_Search_-_A_New_Framework_for_Game_AI.pdf)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T11:32:22.610

此类问题的算法通常是“多次运行解决方案，选择最好的”类型。此外，要选择下一步尝试的解决方案，请使用先前迭代的结果。

至于特定算法，请尝试使用修剪、模拟退火、禁忌搜索、遗传算法、神经网络进行回溯（按照我认为相关的顺序）。此外，Tyler Durden 提出的蒙特卡罗树搜索想法看起来很酷。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T12:03:55.670

这看起来像是一个经典的优化问题，我知道可以使用模拟退火算法来处理（我认为这是模拟退火的第一个商业用途，即早在 1980 年代的 Wintek 电子 CAD 自动放置程序）。大多数优化算法可以处理像您这样的许多变量的问题——问题是正确设置适应度算法，以便获得最佳解决方案（在您的情况下，成本最低）。

其他优化算法可能值得一看——我只是有实现模拟退火算法的经验。

*（如果您走模拟退火路线，您可能想要获得 PJ van Laarhoven 和 EH Aarts 的“模拟退火：理论与应用（数学及其应用）”，但您必须寻找它，因为它已绝版（它甚至可能是我在 1980 年代使用的书）。）*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T02:31:24.907

我已阅读原始问题。由于城市数量众多，因此不可能得到确切的答案。逼近算法是唯一的选择。正如@maniek 提到的，AA 有很多选择。如果你以前有过 AA 的经验，那最好，你可以选择一个你熟悉的，然后得到一个大概的答案。但是，如果您之前没有进行 AA，也许您可​​以从带有修剪的回溯开始。

至于这个问题，你可以很容易地得到这些剪枝规则：

1.  带上尽可能少的飞艇。也就是说，当你从总部出发，访问城市A，B，C......，然后返回总部（你可以将其视为一个回合），你带来的飞艇数量与你将访问的城市相同.
2.  随着销售价格越来越低，当它低于旅行费用时，这个城市将永远不会被访问。这给出了回溯方法的结束。

您甚至可以先应用 KNN 来聚类附近的几个城市。然后从总部出发，参观各个小组。

总而言之，这确实是一个悬而未决的问题。没有**最佳答案**。也许在情况 1 中，使用回溯给出了最好的答案，而在情况 2 中，模拟退火是最好的。只需计算近似答案就足够了，实现这一目标的方法有很多。总而言之，真正**最好的方法**是尽可能多地编写 AA，然后比较这些结果并输出最好的结果。

# java - 调整窗口大小时调整组件大小

> ID：14690944
> 
> 赞同：-1
> 
> 时间：2013-02-04T16:24:13.720
> 
> 标签：java, swing, user-interface, layout-manager

当用户调整窗口大小时，我需要调整组件大小。

我认为这很容易`GridBagLayout`，同时使用 weight 属性和 fill 属性。

但是，我想知道我可以在其他布局中做同样的事情吗？

有人知道在所有布局中调整组件大小的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T17:29:56.227

[您可以比较此处](https://stackoverflow.com/q/14587999/230513)显示的两个对比示例。两者都使两个侧面边框的大小与中央面板成比例。

*   第一，[用途](https://stackoverflow.com/a/14588568/230513)`GridBagLayout`。

*   第二[个](https://stackoverflow.com/a/14588506/230513)使用`ComponentListener`.

# php - javascript 无法从 HTML 输入标记中分配隐藏的输入元素

> ID：14690957
> 
> 赞同：0
> 
> 时间：2013-02-04T16:24:59.217
> 
> 标签：php, javascript, mysql, ajax

我正在尝试从我拥有的表单中获取隐藏的输入值。表单正确传递所有元素，除了隐藏元素。我知道它们已被声明，因为如果我在页面上选择“查看源代码”，它会向我显示正确的值（基本上是用户凭据）。

```
<form name="addExperienceForm" id="addExperienceForm" style="display:none;">
                Title:<input type="text" name="title" id="title" />
                From:<input type="text" name="startDate" id="startDate" />
                To:<input type="text" name="endDate" id="endDate" />
                Description:<textarea type="message" name="description" id="description"></textarea>
                <input type="button" value="Submit" onclick="addUserExp()"/>
                <input type="hidden" value="<?=$_SESSION['userID']?>" id="userID" />
                <input type="hidden" value="<?=$_SESSION['email']?>" id="email" /> 
```

```
function addUserExp(){

    //get info
    var title = document.getElementById('title').value;
    var startDate = document.getElementById('startDate').value;
    var endDate = document.getElementById('endDate').value;
    var userID = document.getElementById('userID').value;
    var email = document.getElementById('email').value;
    var description = document.getElementById('description').value;

    //construct POST string with name value pair
    var str = "title="+title+"start="+startDate+"end="+endDate+"userID="+userID+"email="+email+"desc="+description;

    //establish XMLHTTP object
    var req = getXMLHTTP();

    if(req){

        req.onreadystatechange = function(){
            if (req.readyState == 4) {
                // only if "OK"
                if (req.status == 200) {                        
                    document.getElementById('addNewExp').innerHTML=req.responseText;    

                } else {
                    alert("There was a problem while using XMLHTTP:\n" + req.statusText);
                }
            }
        }
    }
    req.open("post", "addExperience.php", true);
    req.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    req.send(str);
} 
```

PHP

```
 <?php

$title = $_POST['title'];
$startDate = $_POST['start'];
$endDate = $_POST['end'];
$userID = $_POST['userID'];
$email = $_POST['email'];
$description = $_POST['desc'];

$sql = "INSERT INTO `user_experience`(`user_id`, `email`, `experience_title`, `experience_desc`, `start_date`, `end_date`) 
            VALUES ('$userID', '$email', '$title', '$startDate', '$endDate', '$description')";

echo $sql;

?> 
```

我正在回显 MYSQL 语句，因此您可以看到这些字段没有被填充。当数据输入到表单中时，上面的输出会产生以下结果：

```
INSERT INTO `user_experience`(`user_id`, `email`, `experience_title`, `experience_desc`, `start_date`, `end_date`) VALUES ('', '', 'test', 'Feb-2013', 'May-2013', 'test') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T16:44:01.947

从一开始我就可以看出一些事情是错误的。

(1)`<type="text" name="endDate" id="endDate" />`

我猜这应该是`<input type="text" name="endDate" id="endDate" />`。

(2) 您的输入没有`name`属性。`id`属性非常适合样式化和收集值。但是，`name`进行提交的表单只能识别属性。

(3) 您的表单上没有`method`属性。默认情况下，浏览器将使用`GET`. 但是，您正在期待`POST`. 要么更改`PHP`使用`$_GET`，`$_POST`要么（更好的选择）为表单提供`method`属性。

需要注意的几件事（以及我的一些烦恼）：

`method`(1) 指定form 属性总是一个好主意。浏览器应该默认设置，`GET`但只是为了让任何可能跟随您脚步的人清楚，很高兴看到清晰。

(2) 请，请，请不要使用 PHP`<?`短标签。一是不清楚，二不是所有的 PHP 安装都支持它，因为它基于 PHP`.ini`文件设置，三是您必须添加另外三个字符。我们不要成为懒惰的人。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T16:30:59.773

1.  不要自己构建那个 sql-string，请使用准备好的语句，这对您的安全性会更好；）
2.  出于兼容性原因，最好使用 ajax 库（如 jquery）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T16:28:05.433

```
 <?php

$title = $_POST['title'];
$startDate = $_POST['start'];
$endDate = $_POST['end'];
$userID = $_POST['userID'];
$email = $_POST['email'];
$description = $_POST['desc'];

$sql = "INSERT INTO `user_experience`(`user_id`, `email`, `experience_title`, `experience_desc`, `start_date`, `end_date`) 
            VALUES ('$userID', '$email', '$title', '$startDate', '$endDate', '$description')";

echo $sql;

?> 
```

全部更改`$_POST`为`$_GET`，您应该通过。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T16:29:39.630

您需要在表单中添加“名称”属性

```
<input type="hidden" name="userID" value="<?=$_SESSION['userID']?>" id="userID" />
<input type="hidden" name="email" value="<?=$_SESSION['email']?>" id="email" /> 
```

你有sql注入，使用：

```
array_map('mysql_real_escape_string',$_POST); 
```

# excel - Excel：如果（单元格 C2 不在 A 列中的任何位置或不在 B 列中的任何位置）然后在单元格 D2 中返回单元格 C2

> ID：14690958
> 
> 赞同：0
> 
> 时间：2013-02-04T16:24:59.397
> 
> 标签：excel, match

我已经检查了很多公式`INDEX`，`MATCH`但是如果有人可以指出我正确的方向以将 C 列中的一个单元格与 A 列和 B 列中的所有单元格进行比较，并且如果两者都不在 D2 中输入 C2 所以我无法确定这一点我有一个不在 A 列或 B 列中的数字列表。

所以我的想法是我检查每个 C 列单元格与其他两列并显示在 netiher 中的 C 单元格。

希望这个伪代码有助于解释：如果（单元格 C2 不在 A 列中的任何位置或不在 B 列中的任何位置）然后在单元格 D2 中返回单元格 C2

这适用于一列检查： `=INDEX(C$2:C$23,MATCH(C2,A$2:A$23,0))`

但我需要两列检查，但下面对我不起作用，因为它只是说 #N/A 即使对于上面的单列检查公式工作的行也是如此。我想知道我是否可以在两场比赛的中间放一个 OR，或者你可以用不同的方式提出建议。

`=INDEX(C$2:C$23,MATCH(C2,A$2:A$23,0),MATCH(C2,B$2:B23,0))`

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T16:40:47.523

尝试像这样使用 COUNTIF

`=IF(COUNTIF(A$2:B$23,C2)=0,C2,"")`

或者如果列不相邻

`=IF(COUNTIF(A$2:A$23,C2)+COUNTIF(B$2:B$23,C2)=0,C2,"")`

如果它不在任一列中，它们将返回 C2 值....否则为空白

....如果你真的想使用 MATCH 试试这个版本....

`=IF(COUNT(MATCH(C2,A$2:A$23,0),MATCH(C2,B$2:B$23,0))=0,C2,"")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T16:46:00.913

还有一个版本使用`VLOOKUP`：

```
=IF(AND(ISERROR(VLOOKUP($C$2,$A:$A,1,0)),ISERROR(VLOOKUP($C$2,$B:$B,1,0))),"",$C$2) 
```

# wpf - WPF：在执行操作之前等待情节提要动画完成的正确方法是什么

> ID：14690960
> 
> 赞同：9
> 
> 时间：2013-02-04T16:25:04.717
> 
> 标签：wpf, wpf-controls

我有一个故事板，我重复使用它来制作一些图片的动画，我想在每个动画之后执行一些操作，其中包括一些计算，然后运行另一个动画，所以我相信我应该使用 StoryBoard 的 Completed Event`MyStoryboard.Completed += storyboard_Com​pleted;`

我很好奇的是，我应该在当前 StoryBoard 中开始下一个动画`Storyboard_Completed Event`吗？而且，如果我使用 Application.Current.Dispatcher 对象在单独的线程中启动第一个动画，会有什么影响吗？

如果我使用 Application.Current.Dispatcher 在单独的线程中调用 StoryBoard.Begin()，是否还会在 UI 线程中调用 Storyboard_Completed 事件？在这种情况下，我还需要将 Next Animation 包装在另一个 Dispatcher Invoke 中吗？

```
private void Story_Completed(object sender, EventArgs e)
{
    Application.Current.Dispatcher.Invoke((Action)delegate()
    {
       SomeNewStoryBoardAnimation.Begin();
    }
} 
```

这个对吗？或者有没有更好的方法来检查故事板是否已经结束并在此之后立即开始下一组计算和故事板动画？

我曾想过使用单个后台工作人员按顺序处理所有动画和计算，但我也想知道如何在开始下一组计算和动画之前“等待”动画完成。BackGroundWorker`Thread.sleep`在等待动画完成时是否正常？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-04T20:55:29.960

您可以将 Storyboard 包装在[Task](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx)对象中并[等待](http://msdn.microsoft.com/en-us/library/vstudio/hh156528.aspx)其完成。

下面是一段很好的示例代码，说明了如何做到这一点，取自 Morten Nielsen 的[博客文章](http://www.sharpgis.net/post/2012/09/05/Running-a-Storyboard-as-a-Task.aspx)：

```
public static class StoryboardExtensions
{
    public static Task BeginAsync(this Storyboard storyboard)
    {
        System.Threading.Tasks.TaskCompletionSource<bool> tcs = new TaskCompletionSource<bool>();
        if (storyboard == null)
            tcs.SetException(new ArgumentNullException());
        else
        {
            EventHandler<object> onComplete = null;
            onComplete = (s, e) => {
                storyboard.Completed -= onComplete; 
                tcs.SetResult(true); 
            };
            storyboard.Completed += onComplete;
            storyboard.Begin();
        }
        return tcs.Task;
    }
} 
```

本质上，您正在创建一个扩展方法，该方法返回一个表示故事板完成的 Task 对象。通过这种方式，您可以获得一些不错的流畅语法，如下所示：

```
//Start the storyboard and asynchronously await completion...
await myStoryboard.BeginAsync();

//Do my other stuff here, after the storyboard completes... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T06:23:11.983

使用 Storyboard.Completed 事件应该可以满足您的目的。Storyboard.Completed 事件处理程序应该在 UI 线程上触发，因此您不需要调用 Application.Current.Dispatcher.Invoke 来触发第二个 Storyboard。

如果您使用 Application.Current.Dispatcher.Invoke 调用原始 Storyboard.Begin，则应该没有任何影响。这不会在新线程上启动情节提要动画。它将在主 UI 线程上异步调用动画。不管是自己在UI线程上调用Begin，还是使用Application.Current.Dispatcher.Invoke来做，最终的结果应该是一样的。当情节提要完成时，您完成的事件处理程序将触发，您可以执行计算并触发下一个情节提要。

有关故事板过去被用作计时器的一些讨论，请参阅以下问题，因为它在 UI 线程上运行：

[使用 Storyboard 作为计时器有什么意义？](https://stackoverflow.com/questions/3178100/what-is-the-point-of-using-storyboard-as-timer)

此外，对于您所描述的特定情况，这可能是矫枉过正，但如果您需要编排一堆顺序的异步操作，您可以使用 Reactive Extensions：

[http://msdn.microsoft.com/en-us/data/gg577609.aspx](http://msdn.microsoft.com/en-us/data/gg577609.aspx)

下面的文章包括一个顺序故事板示例（尽管文章已经足够老，语法可能已经改变）：

[http://www.wintellect.com/cs/blogs/jlikness/archive/2010/08/22/coroutines-for-asynchronous-sequential-workflows-using-reactive-extensions-rx.aspx](http://www.wintellect.com/cs/blogs/jlikness/archive/2010/08/22/coroutines-for-asynchronous-sequential-workflows-using-reactive-extensions-rx.aspx)

# arm - __irq 在 ARM 系统编程中的作用是什么？

> ID：14690966
> 
> 赞同：1
> 
> 时间：2013-02-04T16:25:22.513
> 
> 标签：arm, interrupt, bare-metal

我了解**__irq**用于为 ARM7(v4) 架构定义*中断服务程序功能。*但是它对功能有什么改变呢？

根据[ARM 信息中心](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0491c/BABICJBC.html)：

> __irq 关键字允许将 C 或 C++ 函数用作中断例程。__irq 是一个函数限定符。它影响函数的类型。

**ARM 编译器对使用__irq**函数限定符定义的例程提供了什么样的特殊处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T21:35:24.490

The compiler modifies the function exit/entry. This means adjusting lr, changing processor mode after return and saving & restoring registers that are not normally saved across function calls (normally r0-r3 and r12). Here is a short example:

```
void func()
{
    ...
} 
```

Generated Assembler:

```
/* void func() */
    stmfd   sp!, {r4, lr}
    ...
    ldmfd   sp!, {r4, lr}
    bx  lr 
```

Same function as IRQ:

```
/* void __attribute__ ((interrupt ("IRQ"))) func() */
    sub lr, lr, #4
    stmfd   sp!, {r0, r1, r2, r3, r4, r5, ip, lr}
    ...
    ldmfd   sp!, {r0, r1, r2, r3, r4, r5, ip, pc}^ 
```

And as FIQ:

```
/* void __attribute__ ((interrupt ("FIQ"))) func() */
    sub lr, lr, #4
    stmfd   sp!, {r0, r1, r2, r3, r4, lr}
    ...
    ldmfd   sp!, {r0, r1, r2, r3, r4, pc}^ 
```

Note that the exact register list also depends on some external parameters such as the ABI.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T17:23:59.167

来自[gcc 手册](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html)

> > 当此属性存在时，编译器生成适用于中断处理程序的函数进入和退出序列。

我相信 armcc 也是如此，您可以使用它`objdump`来查看创建的二进制文件中的差异。

从您引用的页面：

> > 除浮点寄存器外的所有损坏的寄存器都将被保留，而不仅仅是那些通常在 AAPCS 下保留的寄存器。必须使用默认的 AAPCS 模式。

# tidesdk - 有没有办法让 TideSDK 窗口在屏幕中居中？

> ID：14690970
> 
> 赞同：2
> 
> 时间：2013-02-04T16:25:37.790
> 
> 标签：tidesdk

使用 TideSDK 窗口时，您可以控制它们在屏幕中的位置。但是，我找不到任何方法来检索屏幕的大小，也找不到使窗口居中的方法。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T14:45:34.033

`window.screen.width`您可以使用和访问用户的屏幕尺寸`window.screen.height`。您可以使用它们使窗口居中：

```
var app_window = Ti.UI.currentWindow;
app_window.setX((window.screen.width-app_window.getWidth())/2);
app_window.setY((window.screen.height-app_window.getHeight())/2); 
```

请注意，`window`这里的对象不是一个实例，`Ti.UI.UserWindow`而是通常的浏览器`window`对象。

# tomcat - Tomcat 战争部署到 webapps/appname/appname

> ID：14690971
> 
> 赞同：0
> 
> 时间：2013-02-04T16:25:44.387
> 
> 标签：tomcat

我们正在部署一个 Tomcat 应用程序 (.war)

一旦部署，它只能在

http:\localhost\appname\appname

并不是

http:\localhost\appname <---- 这是我们更喜欢的...

如果我们通过将文件夹复制到 \tomcat\webapp\ 来移动 Webapp，我们将无法启动应用程序。它似乎只有放在子文件夹中才有效..

这是 Web.xml 中的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:53:01.110

检查 web.xml 中的 servlet 映射。

这是一个例子：

```
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/appname/*</url-pattern>
</servlet-mapping> 
```

可以替换为：

```
<servlet-mapping>
     <servlet-name>Faces Servlet</servlet-name>
     <url-pattern>*.jsf</url-pattern>
</servlet-mapping> 
```

servlet 名称也可以是“面孔”。如果您将其替换为“*.jsf”，请确保您使用以下 URL 访问应用程序：http:\localhost\appname\index.jsf

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T08:09:56.867

也许你的战争文件夹太多了？
它不应包含 appname 文件夹。
当 TC 分解 XX.war 时，它会自己创建一个 XX 文件夹。

# c# - 如果 XElement 为 Null，如何防止添加 XML 元素？

> ID：14690972
> 
> 赞同：1
> 
> 时间：2013-02-04T16:25:47.727
> 
> 标签：c#, xml, linq-to-xml, xelement

我有一个简单的 XML 文档，如下所示：

```
<Person>
  <LastName>LastName1</LastName>
  <FirstName>FirstName1</FirstName>
  <MiddleName>MiddleName1</MiddleName>
  <Suffix>Suffix1</Suffix>
</Person> 
```

但是，我有一个限制，不允许我*添加*空标签。因此，如果该`Suffix`值不存在，我将无法使用`<Suffix />`或验证将失败。

我正在使用来自不同类的对象组成 XML 结构，这些对象通过方法返回的对象`XElement`返回各自的 XML 。我需要检查*每个元素*以查看返回的 XElement 是否为. 如果是这样的话，它必须就像那条线从未存在过。我正在尝试使用运营商，但我收到了错误***？？******左操作数永远不会为 null***。我的代码如下：`XElement``.ToXML()`*`null``??`*

 **```
public XElement ToXML()
{
  return new XElement("Employee",
    new XElement(this.LastName.ToXML()) ?? null,
    new XElement(this.FirstName.ToXML()) ?? null,
    new XElement(this.MiddleName.ToXML()) ?? null,
    new XElement(this.Suffix.ToXML()) ?? null);
} 
```

如何检查每个 XML 节点以查看`XElement`返回的对象是否为空，如果是则忽略添加/组合该节点一起？任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T16:30:13.583

您应该改用此代码：

```
public XElement ToXML()
{
    var children = new[]
    {
        this.LastName.ToXML(),
        this.FirstName.ToXML(),
        this.MiddleName.ToXML(),
        this.Suffix.ToXML()
    };

    return new XElement("Employee", children.Where(x => x != null));
} 
```

请注意，您的代码有几个问题：

1.  空合并运算符 (??) 是一个运算符，它在左侧值为 时返回右侧值`null`。制作右手值`null`是完全没用的。
2.  将`new`语句与 ?? 运算符也是完全没用的，因为`new`will never be的结果`null`。
3.  这`new XElement`部分似乎也没什么用。我假设`ToXML`已经返回一个`XElement`，那么为什么要创建一个新实例呢？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T16:30:45.953

C# 中的构造函数要么返回对对象的非空引用，要么抛出异常。它不会返回 null*。

至于你的问题，为什么不：

```
return new XElement("Employee",
    this.LastName.ToXML(),
    this.FirstName.ToXML(),
    this.MiddleName.ToXML(),
    this.Suffix.ToXML()); 
```

如果不存在这些`ToXML`方法中的每一个就返回`null`？

或者，如果您的情况是属性本身为空：

```
return new XElement("Employee",
    this.LastName != null ? this.LastName.ToXML() : null, /* null is ignored */
    this.FirstName != null ? this.FirstName.ToXML() : null,
    this.MiddleName != null ? this.MiddleName.ToXML() : null,
    this.Suffix != null ? this.Suffix.ToXML() : null); 
```

我也刚刚意识到，也许你总是得到一个`XElement`，但它可能是*空*的，在这种情况下：

```
var elements = new[] { this.LastName.ToXML(), this.FirstName.ToXML(), ...

// use IsEmpty to filter out those that are <Element/>
return new XElement("Employee",
    elements.Where(ee => ee != null && !ee.IsEmpty)); 
```

[*我相信有一个有趣的边缘情况，您可以从 COM 接口实例化中获得它，但我们将忽略所有“奇怪”的编码。]**

# c# - 在mvc3中将blob图像对象从列表显示到网页

> ID：14690973
> 
> 赞同：0
> 
> 时间：2013-02-04T16:25:48.513
> 
> 标签：c#, asp.net, asp.net-mvc-3, blob

我正在做一个项目，我从数据库中加载 12 个长 blob 图像并将它们保存在一个列表中。

在 html 页面中，我必须显示图像，但在尝试将 blob 转换为图像时出现错误。

`Parameter is not valid`使用内存流时出现错误。无论我做出什么改变，都无法摆脱那个错误。

下面是代码：

```
 public Image getProduct_Image(byte[] imagebytes)
    {
        byte[] byteArray = new byte[imagebytes.Length];

        MemoryStream ms = new MemoryStream(byteArray);
        ms.Position = 0;

        ms.Read((byteArray, 0, byteArray.Length);
        ms.ToArray();
        ms.Seek(0, SeekOrigin.Begin);
        System.Drawing.Image returnImage = Image.FromStream((Stream) ms);
             Bitmap bmp = new Bitmap(returnImage);
             return bmp;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T17:47:37.643

扩展我的评论：

您可以使用 .ashx 处理程序在几行代码中将图像从字节写入 HTML，但由于您使用的是 MVC，因此实际上非常简单。

首先，您只需设置一个控制器操作 - 假设您的图像可基于整数 ID 进行识别。将这些字节作为内容返回只是一行。

```
public FileContentResult SomeImage(int id)
{
    byte[] bytes = GetImageBytesFromDatabase(id);
    return File(bytes, "image/jpeg");
} 
```

您的标记只是一个图像标记，其源作为此控制器操作：

```
<img src="@Url.Action("SomeImage", "Home", new { id = 123 })" /> 
```

这实际上会创建以下内容，具体取决于您是否对路由进行了特殊处理：

```
<img src="/Home/SomeImage/123" />
or possibly
<img src="/Home/SomeImage?id=123" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T16:30:56.700

我没有看到你实际上在任何地方用数据填充你的 byteArray ！

另外，为什么首先创建 byteArray 变量？您已经将 blob 数据作为输入变量 imagebytes 中的字节 []。删除 byteArray 并使用 imagebytes。

```
public Image getProduct_Image(byte[] imagebytes)
{
    try
    {
        if(imagebytes == null || imagebytes.Length == 0)
            throw new InvalidDataException("The blob does not contain any data");  

        MemoryStream ms = new MemoryStream(imagebytes);
        ms.Position = 0;
        ms.Read((imagebytes, 0, imagebytes.Length);
        ms.ToArray();
        ms.Seek(0, SeekOrigin.Begin);

        System.Drawing.Image returnImage = Image.FromStream((Stream) ms);
        return new Bitmap(returnImage);
    }
    catch(Exception ex)
    {
        // deal with the exception
    }
} 
```

# ruby-on-rails - 为什么多场映射不适用于弹性搜索的轮胎宝石？

> ID：14690975
> 
> 赞同：2
> 
> 时间：2013-02-04T16:25:53.017
> 
> 标签：ruby-on-rails, ruby, mapping, elasticsearch, tire

我正在使用弹性搜索来增强我的应用程序中的搜索功能。搜索工作完美，但排序不适用于包含多个单词的字段。

当我尝试按日志“消息”对搜索进行排序时，出现错误：

“无法对每个文档具有多个值或每个字段多个标记的字符串类型进行排序”

我用谷歌搜索了这个错误，发现我可以在 :message 字段上使用多字段映射（一个已分析，另一个未分析）对它们进行排序。所以我这样做了：

```
class Log < ActiveRecord::Base
  include Tire::Model::Search
  include Tire::Model::Callbacks

  tire.mapping do
    indexes :id, index: :not_analyzed
    indexes :source, type: 'string'
    indexes :level, type: 'string'
    indexes :created_at, :type => 'date', :include_in_all => false
    indexes :updated_at, :type => 'date', :include_in_all => false
    indexes :message, type: 'multi_field', fields: { 
      analyzed: {type: 'string', index: 'analyzed'},
      message: {type: 'string', index: :not_analyzed} 
    }
    indexes :domain, type: 'keyword'
  end
end 
```

但是，由于某种原因，没有将此映射传递给 ES。

```
rails console
Log.index.delete #=> true
Log.index.create #=> 200 : {"ok":true,"acknowledged":true}
Log.index.import Log.all #=> 200 : {"took":243,"items":[{"index":{"_index":"logs","_type":"log","_id":"5 ... ...

# Index mapping for :message is not the multi-field 
# as I created in the Log model... why?

Log.index.mapping
=> {"log"=>
  {"properties"=>
    {"created_at"=>{"type"=>"date", "format"=>"dateOptionalTime"},
     "id"=>{"type"=>"long"},
     "level"=>{"type"=>"string"},
     "message"=>{"type"=>"string"},
     "source"=>{"type"=>"string"},
     "updated_at"=>{"type"=>"date", "format"=>"dateOptionalTime"}}}}

# However if I do a Log.mapping I can see the multi-field
# how I can fix that and pass the mapping correctly to ES? 

Log.mapping
=> {:id=>{:index=>:not_analyzed, :type=>"string"},
 :source=>{:type=>"string"},
 :level=>{:type=>"string"},
 :created_at=>{:type=>"date", :include_in_all=>false},
 :updated_at=>{:type=>"date", :include_in_all=>false},
 :message=>
  {:type=>"multi_field",
   :fields=>
    {:message=>{:type=>"string", :index=>"analyzed"},
     :untouched=>{:type=>"string", :index=>:not_analyzed}}},
 :domain=>{:type=>"keyword"}} 
```

那么，`Log.index.mapping`ES 中的当前映射不包含我创建的多字段。我错过了什么吗？为什么多字段显示在`Log.mapping`而不是`Log.index.mapping`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T18:48:52.773

我已经改变了工作流程：

```
Log.index.delete; Log.index.create; Log.import 
```

至

```
Log.index.delete; Log.create_elasticsearch_index; Log.import 
```

使用`MyModel.create_elasticsearch_index`模型定义的正确映射创建索引。请参阅轮胎的问题[#613](https://github.com/karmi/tire/issues/613)。

# java - 即使 dataSource.getActive() 返回 0，“连接太多”错误？

> ID：14690976
> 
> 赞同：-1
> 
> 时间：2013-02-04T16:25:54.937
> 
> 标签：java, mysql, tomcat

我非常确定我正在关闭 finally 块中的 con,rs,stmt。但似乎在第 4 次尝试执行更新时出现“连接过多”错误。

```
public boolean setUserSettings(UserSettings userSettings)
{
    ResultSet rs = null;
    Connection con = null;
    PreparedStatement stmt = null;
    String _query;

    try
    {
        System.out.println("total current connections: " + dataSource.getActive());
        con = dataSource.getConnection();
        _query = Util.readIn("/sql/select/selectUserSettingsCount.sql", MySqlPersistence.class);
        stmt = con.prepareStatement(_query);
        stmt.setString(1, userSettings.user);

        rs = stmt.executeQuery();
        boolean found = rs.next() && rs.getInt(1) == 1;

        if (!found)
        {
            _query = Util.readIn("/sql/insert/setUserSettings.sql", MySqlPersistence.class);
            stmt = con.prepareStatement(_query);
            stmt.setString(1, userSettings.user);
            stmt.setBoolean(2, userSettings.isActive);
            stmt.setString(3, userSettings.phone);
            stmt.setString(4, userSettings.phone2);
            stmt.setString(5, userSettings.phone3);
            stmt.setString(6, userSettings.contact_strategy);
        }
        else
        {               
            _query = Util.readIn("/sql/update/updateUserSettings.sql", MySqlPersistence.class);
            stmt = con.prepareStatement(_query);
            stmt.setString(1, userSettings.phone);
            stmt.setString(2, userSettings.phone2);
            stmt.setString(3, userSettings.phone3);
            stmt.setString(4, userSettings.user);
        }

        int success = stmt.executeUpdate();
        if (found && success == 1)
        {
            return true;
        }
        else
        {                
            return false;
        }
    }
    catch (Exception e)
    {            
        e.printStackTrace();
        return false;
    }
    finally
    {
        try { if (rs != null) System.out.println("closing rs"); rs.close(); } catch (SQLException e) { }
        try { if (stmt != null) System.out.println("closing stmt"); stmt.close(); } catch (SQLException e) { }
        try { if (con != null) System.out.println("closing con"); con.close(); } catch (SQLException e) { }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T16:54:23.930

您为每个方法调用创建 2 个语句，但只关闭 1 个。在进入第一个大块之前`if`，您应该关闭现有语句。

更新：

经过进一步思考，我注意到您的代码中存在另一个错误。这种模式被打破了：

```
if (con != null) System.out.println("closing con"); con.close(); 
```

事实上，这是一个很好的例子，说明了为什么你应该总是在 if 块中使用大括号。重新格式化，这段代码是：

```
if (con != null) 
    System.out.println("closing con"); 
con.close(); 
```

但是，您真正想要的是：

```
if (con != null) {
    System.out.println("closing con"); 
    con.close();
} 
```

# ms-access - DLookup：需要能够添加到最近的条目

> ID：14690980
> 
> 赞同：0
> 
> 时间：2013-02-04T16:26:12.313
> 
> 标签：ms-access, vba

我有一个表单，用于创建具有不同顺序字段的条目。我目前正在使用 DLookup 来执行此操作，但我遇到了一些问题。

```
 Me.txtProgramID.Value = DLookup("ProgramID", "tblMain", "Program = Forms!Form2!Combo.Value") + 1
 Me.txtProgramNumber.Value = DLookup("Number", "tblMain", "Program = Forms!Form2!Combo.Value") + 1
 Me.txtSequence2.Value = DLookup("Sequence2", "tblMain", "Program = Forms!Form2!Combo.Value") + 1
 Me.txtSequence1.Value = DLookup("Sequence1", "tblMain", "Program = Forms!Form2!Combo.Value") + 1 
```

有四个不同的值：ProgramID、ProgramNumber、Sequence1 和 Sequence2。每次添加新记录时，根据 Combo 的内容，新字段的内容应该是前一个字段 + 1。

假设 Combo 的内容是 A，并且 ProgramID、ProgramNumber、Sequence 1 和 Sequence 2 的值都是 1。A 的新记录应该将它们都作为 2。我遇到的问题是，而不是 DLookup找到最近的条目，它正在捕获原始条目，这意味着我没有 1、2、3、4 等，而是有 1、2、2、2。

我真正需要知道的是如何让 DLookup 获取有关各自配置文件的最新记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T19:01:49.863

您也许可以摆脱 DMax，但一旦您拥有多个用户，所有赌注都将被取消：

```
Me.txtProgramID.Value = DMax("ProgramID", "tblMain", _
     "Program = Forms!Form2!Combo.Value") + 1 
```

ProgramID 应该是一个自动编号，所以不需要获取下一个编号，它会自动处理。但是，不能保证自动编号是前一个数字 +1。我不确定你为什么会有一个 programID 和一个程序编号。

正确的序号是一个但更复杂的：[Access VBA: Find max number in column and add 1](https://stackoverflow.com/questions/11949603/access-vba-find-max-number-in-column-and-add-1/11950647#11950647)

# c# - 显示来自数据库查询的结果 - 我需要绑定吗？

> ID：14690986
> 
> 赞同：1
> 
> 时间：2013-02-04T16:26:30.300
> 
> 标签：c#, asp.net, .net

我正在显示我从数据库中获取的属性列表。我习惯于在经典 ASP 中工作，只需创建与数据库的连接，然后循环遍历结果并像这样显示它们。

我的问题是，我应该在 .NET 中做同样的事情还是应该将数据绑定到元素？我更喜欢循环遍历结果，因为我想在带有样式的 div 中显示结果。

这是我的代码：

```
 SqlConnection conn = new SqlConnection(
        "Data Source=xxxx;Initial Catalog=Rets_Full_local;Integrated Security=True");
        SqlDataReader rdr = null;

       try
       {
           conn.Open();

           // 3\. Pass the connection to a command object
           SqlCommand cmd = new SqlCommand(
               "select * from RETS_Listings_full" +
               " WHERE 1 =1 " + sqlWhere
               , conn);

           rdr = cmd.ExecuteReader();

           String resultsDiv = "";

           while (rdr.Read())
           {
               String rdr_MLSNUM = (rdr["MLSNUM"]).ToString();
               String rdr_SYSID = (rdr["SYSID"]).ToString();
               String rdr_LISTPRICE = (rdr["LISTPRICE"]).ToString();
               String rdr_PropType = (rdr["PROPTYPE"]).ToString();
               String rdr_Beds = (rdr["beds"].ToString());
               String rdr_BathsFull = (rdr["BATHSFULL"].ToString());
               String rdr_BathsHalf = (rdr["BATHSHALF"].ToString());
               String rdr_AREA = (rdr["AREA"]).ToString();
               String rdr_STREETNUM = (rdr["STREETNUM"]).ToString();
               String rdr_STREETNAME = (rdr["STREETNAME"]).ToString();
               String rdr_City = (rdr["CITY"]).ToString();
               String rdr_View = (rdr["VIEWDESC"]).ToString();

               resultsDiv += "<div class='row-fluid'>";
               resultsDiv += "<div class='span4'>";
                resultsDiv += " <img src='http://www.hiltonheadrealestates.com/listings/Photo" + rdr_SYSID + "-1.jpeg' width='250px'>";
            resultsDiv += "</div>";
            resultsDiv += " <div class='span8' >";
                resultsDiv += "List Price:  $" + rdr_LISTPRICE +"<br />";
                resultsDiv += "Property Type: " + rdr_PropType +"<br />";
                resultsDiv += "Address : " + rdr_STREETNUM + " " + rdr_STREETNAME + "<br />";
                resultsDiv += "Location : " + rdr_City + "<br />";
                resultsDiv += "Area : " + rdr_AREA + "<br />";
                resultsDiv += "Bedrooms: " + rdr_Beds  + "<br />";
                resultsDiv += "Full Baths: " +rdr_BathsFull+    "<br />";
                resultsDiv += "Half Baths: " +rdr_BathsHalf+"<br />";
                resultsDiv += "View: " + rdr_View + "<br />";
            resultsDiv += "   </div>";
            resultsDiv += "   </div> <hr>";

           }

           // print results to div
           if (rdr == null || !rdr.HasRows)
           {
               div_Results.Text = "No Results - Please click <a href='/'>here</a> to search again";
           }
           else
           {
               div_Results.Text = resultsDiv;
           }
           // End print results to div

       }
       finally
       {
           // close the reader
           if (rdr != null)
           {
               rdr.Close();
           }

           // 5\. Close the connection
           if (conn != null)
           {
               conn.Close();
           }
       }
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T16:32:37.960

您应该使用可绑定控件。将大部分业务逻辑保留在代码隐藏（.aspx.cs 文件）中，并将表示逻辑保留在 aspx（.aspx 文件）中

Repeater 是最简单的控件，用于显示集合并保持对标记的完全控制。

欢迎使用 ASP.NET

# php - PHP 和 MySQL：使用列值作为表导入 CSV

> ID：14690987
> 
> 赞同：0
> 
> 时间：2013-02-04T16:26:35.087
> 
> 标签：php, mysql, database, csv, import

我已将我当前的代码（不多）放在此页面上供您参考（当然要减去真实密码）： http: [//mafgiftshop.org/MAF/queue/MP/for-reference.php](http://mafgiftshop.org/MAF/queue/MP/for-reference.php)

```
 $delimiter = ',';
$db = new mysqli('localhost', 'mafgifts_mp', '******', 'mafgifts_mp');

if (($handle = fopen("mpdata.csv", "r")) !== FALSE) {
    while (($data = fgetcsv($handle, 1000, $delimiter)) !== FALSE) {
        foreach($data as $i => $content) {
            $data[$i] = $db->real_escape_string($content);
        }
        echo $data[$i]."";
        $db->query("INSERT INTO `MP` 
                      (GiftAmount,GoalAmount,GiftDate,FundID,FundDescription) 
                      VALUES('" . implode("','", $data) . "');");
    }
    fclose($handle);
}

//THE ABOVE CODE PROPERLY PUTS ALL THE DATA INTO THE MySQL DATABASE, BUT I'M NOT 
//ABLE TO DO THE CALCULATIONS I WANT AND INSERT ONLY THE RESULTING DATA. 
```

所以我有一个包含 5 列信息的 CSV 文件。没有空白值。例如：

GiftAmount,GoalAmount,GiftDate,FundID,FundDescription（此行不在CSV中；仅供参考）

*   "$10","$500","1/1/2012","8008","8008 基金说明"
*   "$20","$500","2/10/2012","8008","8008 基金说明"
*   "$62","$500","1/12/2012","8008","8008 基金说明"
*   "$38","$1,000","3/31/2012","9102","9102 基金说明"
*   "$21","$1,000","4/6/2012","9102","9102 基金说明"

我需要做的是在 FundID 相同时添加“GiftAmount”列，并将结果放入 MySQL 数据库。因此，对于上述数据，这将是生成的 MySQL 表：

*   “92 美元” | “500 美元” | 《8008》 | “8008基金说明”（注意不再需要GiftDate）
*   "$59" | “1,000 美元” | “9102” | 《9102基金说明》

我正在使用 PHP 来完成此操作，PHP 文件将每天在 Cron 作业中运行，因为 CSV 文件将根据不同基金的新礼物每天更改。

顺便说一句，CSV 文件目前有 8,794 行和很多很多 FundID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T16:36:33.947

我会将 FundID 设为 MYSQL 中的唯一键，然后使用[INSERT INTO ... ON DUPLICATE KEY UPDATE](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)查询。

```
 $db->query("INSERT INTO `MP` (GiftAmount,GoalAmount,GiftDate,FundID,FundDescription) VALUES('" . implode("','", $data) . "') ON DUPLICATE KEY UPDATE GiftAmount=GiftAmount+".intval($data[0]).";"); 
```

这假设 GiftAmount 是一个数字列，并且您没有将其存储为字符串。

# c++ - C++中的自定义阻塞函数

> ID：14690990
> 
> 赞同：1
> 
> 时间：2013-02-04T16:26:40.423
> 
> 标签：c++, model-view-controller, events, sdl

我正在使用基于`while(true)`阻塞函数的三个线程创建应用程序模型。

1.  事件线程 - 等待用户输入，被 SDL_WaitEvent 阻塞
2.  Socked 线程 - 等待来自服务器的数据，被阻塞套接字阻塞。
3.  渲染线程 - 从缓冲区渲染数据，而不是阻塞。

我在渲染线程时遇到了问题——我需要一个阻塞函数，例如，它会阻塞直到某个绘制事件（由我定义并在其他两个线程之一中调度）发生。
但我不知道阻塞函数是如何工作的。当然，我可以创建一个`sleep()`循环，但这样的循环固定 FPS 占用资源，即使没有发生任何事情（我已经在[此处](https://stackoverflow.com/questions/14666812/prevent-sdl-program-from-consuming-extra-resources)详细阐述了该主题）。另一方面，它不会立即显示数据。这对 GUI 应用程序不利。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T17:42:26.493

如果您使用的是 C++11，则可以使用`std::condition_variable`and `std::mutex`：

```
void
waitForEvent()
{
    std::unique_lock<std::mutex> lock( myMutex );
    while ( ! externalCondition ) {
        myConditionVariable.wait( lock );
    }
} 
```

要触发事件：

```
void
setEvent()
{
    std::unique_lock<std::mutex> lock( myMutex );
    setExternalCondition();
} 
```

另一方面，您提到了 GUI 和渲染器。您 *不能*等待 GUI 线程中的外部条件。如果您需要在 GUI 线程中进行渲染，则必须了解如何在 GUI 管理器中创建 GUI 事件，并发布 GUI 事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T16:41:56.957

> 看起来不错。有多平台版本吗？或者至少，相当于linux，所以我可以自己写一个？

看看这个线程：[WaitForSingleObject 和 WaitForMultipleObjects 等效于 linux](https://stackoverflow.com/questions/2719580/waitforsingleobject-and-waitformultipleobjects-equivalent-in-linux)

坚持使用 pthread_cond_timedwait 并使用 clock_gettime。例如：

```
struct timespec ts;
clock_gettime(CLOCK_REALTIME, &ts);
ts.tv_sec += 10; // ten seconds
while (!some_condition && ret == 0)
    ret = pthread_cond_timedwait(&cond, &mutex, &ts); 
```

# command-line - 显示帐户到期日期 - Windows Server 2003

> ID：14690991
> 
> 赞同：0
> 
> 时间：2013-02-04T16:26:45.960
> 
> 标签：command-line, active-directory, windows-server-2003

我正在使用以下命令：

```
dsquery user -limit 0 | dsget user -display  –samid –acctexpires –disabled 
```

但我收到了这条信息

> “此命令的目标对象”的值格式不正确

什么是正确的语法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-28T22:01:34.883

我一直遇到这些问题。这是因为在 AD 中创建对象的人没有遵循 Microsoft 认为的对象命名和正确放置对象的标准。为了解决这个问题，我通常要做的就是将其分解成多个部分并迭代地处理它。例如上面我将通过这样做创建一个仅包含 DSQuery 命令的文本文件：

```
DSQUERY user limit 0 > Results.txt 
```

现在您已经在文本文件中拥有了所有用户对象，您可以使用以下命令运行上述命令：

```
Type Results.txt | Dsget user -display  –samid –acctexpires –disabled > NewList.txt 
```

通过查看 Newlist.txt 的最底部，您可以看到检索到的最后一条“成功”记录。返回记事本中的 Results.txt 文件并搜索该记录并查看其下方的记录。您将需要删除记录（或在 AD 中进行更改并重新开始）。如果您删除记录，只需运行上面相同的 DSGet 命令并继续运行，直到它一直运行且没有错误。

# templates - create_account_success 删除标准地址 zencart

> ID：14690992
> 
> 赞同：0
> 
> 时间：2013-02-04T16:26:47.240
> 
> 标签：templates, zen-cart, webshop

我想删除`create_account_success`zencart 网上商店页面上的“标准地址”字段集...

有没有人知道我可以在应用程序文件中删除它的位置？或者知道我可以在哪里设置这个地址？显示的字段集没有任何内容...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T16:50:44.027

从最纯粹的意义上说，您可以从 tpl_create_account_success_default.php 模板文件中破解该代码。

但真正的问题不是模板。真正的问题是您没有要显示的地址，这永远不会发生。所以这告诉我你还有很多其他的变化，你没有在这里披露。

# asp.net - 我的应用程序 sql 语句中的逻辑错误

> ID：14690993
> 
> 赞同：-2
> 
> 时间：2013-02-04T16:26:48.567
> 
> 标签：asp.net

我的应用程序（除了患者编号）然后使用 VisitNumbers 填充访问的下拉列表。每次访问都会为患者生成一个访问编号。当我单击搜索按钮时，获取患者的 visitNumber 并填充我得到的下拉列表并出现错误：

```
Line 35:                 {
Line 36:                     con.Open();
Line 37:                     SqlDataReader reader = cmd.ExecuteReader();
Line 38:                     
Line 39:                     reader = cmd.ExecuteReader();

Stack Trace:

[SqlException (0x80131904): Incorrect syntax near '.'.
Incorrect syntax near 'a'.]
System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean  breakConnection, Action`1 wrapCloseInAction) +1753346

HERE IS MY CODE:

 public List<string> Get_VisitNumber()
    {
        List<string> visitnum = new List<string>();
        string patient_number = txtPatientNumber.Text;

        string connect =       
 System.Configuration.ConfigurationManager.ConnectionStrings["db_connection"].ToString();
        SqlConnection con = new SqlConnection(connect);
        string select_statement = "SELECT Visit_Number FROM Patient a ,Visit b"
          + "WHERE a.Patient_Number=b.Patient_Number";

        SqlCommand cmd = new SqlCommand(select_statement, con);

        cmd.Parameters.AddWithValue("@b.Patient_Number", patient_number);

        using (con)
        {
            con.Open();
            SqlDataReader reader = cmd.ExecuteReader();

            reader = cmd.ExecuteReader();
            while (reader.Read())
            {
                if (reader["Patient_Number"] != DBNull.Value)
                {
                    string VID = reader["Visit_Number"].ToString();
                    visitnum.Add(VID);
                }
                else
                {
                    Response.Write("<script language=javascript>alert('Patient Number not Found.');</script>");

                }

            }//   end while

        } // end using 

        return visitnum;
    }

    protected void btn_search_Click(object sender, EventArgs e)
    {
        DropDownList1.DataSource = Get_VisitNumber();

        DropDownList1.DataBind();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T17:36:14.763

我将首先针对数据库测试您的 SQL，以确保您的语法正确，然后再尝试使其在代码中工作。

就像是

```
declare @patient_number int
set @patient_number = 1

SELECT b.Visit_Number 
FROM Patient a
join Visit b on (a.patient_number = b.patient_number)

WHERE a.Patient_Number = @Patient_Number 
```

一旦你知道你的 SQL 可以工作，你就可以将它恢复到代码中

# aptana - Aptana 3 代码折叠

> ID：14690996
> 
> 赞同：1
> 
> 时间：2013-02-04T16:26:56.647
> 
> 标签：aptana, code-folding

我今天开始使用 Aptana 3 并且非常喜欢它，

但是，我正在努力找出是否可以将代码折叠到特定级别。

例如，我可以按 Ctrl+Shift+Divide 并折叠所有可以想象的东西。

包括班级。

可以说我的文档如下：

```
class Kill_model extends Game_Model{

    function shoot(){
       //code
       //code
       //code
       //code
       //code
    }

    function respawn(){
       //code
       //code
       //code
       //code
       //code
    }

    function spectate(){
       //code
       //code
       //code
       //code
       //code
    }

} 
```

默认将折叠到

```
class Kill_model extends Game_Model{} 
```

我过去一直在使用 PHPEdit，并且喜欢“折叠到第 2 级”

这给了我的外观

```
class Kill_model extends Game_Model{

    function shoot(){}

    function respawn(){}

    function spectate(){}

} 
```

我想知道是否可以折叠到 2 级，到 2 级我认为这意味着 2 级深。级别 1 = 类，级别 2 = 内的功能。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T20:11:45.693

好的，所以在 Aptana 中可以使用级别折叠，它只是没有内置到 PHP 编辑中，只有源代码编辑。要将其添加到 PHP，您可以转到`Commands > Source > Edit this Bundle`，`Commands > PHP > Edit this Bundle`然后复制`Source/commands/folding.rb`到`PHP/commands/folding.rb`（这将是一个新文件）。如果您没有 Option 和 Command 键（我相信是 Mac），您需要将此文件中的键绑定更改为其他内容，例如 Control 和 Alt。您会在 fold.rb 文件中找到键绑定，如下所示：

```
with_defaults :input => :none, :output => :discard, :key_binding => "OPTION+COMMAND+0" do 
```

第二次是这样的：

```
cmd.key_binding = "CONTROL+ALT+" + level.to_s 
```

只需将 OPTION 更改为 CONTROL，将 COMMAND 更改为 ALT，一旦重新启动 Aptana，您将拥有一个新的 Ctrl+Alt+ 快捷方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T17:24:07.140

*请参阅我的第二个答案以获取更直接的信息...我想我会留下这个以防万一它可以帮助遇到类似但不完全相同问题的人...*

我不能说键盘快捷键，因为我不知道 numpad_divide 在我的笔记本电脑上的位置（没有 numpad） - 但如果你往下看`Window > Preferences > Aptana Studio > Editors > PHP`，你可以选择最初折叠“这些元素” - 如果你选中“ `Functions`”我认为你可能会得到你正在寻找的折叠。但是，我认为这种偏好不会影响`Ctrl+Shift+Divide`aka Collapse All 的行为。

还有一个命令可以折叠当前块（`Ctrl+Numpad_minus`），但我认为这对您来说用处不大。

如果您正在寻找文件中可用类和函数的简短概述，您可能还会发现快速大纲很有帮助。这可以通过`Ctrl+O`（或右键单击 > 快速大纲）访问。

**编辑：**今天我在玩 Aptana 时发现，在`Commands > Source > Folding > Toggle Foldings at Level > Level <x>`. 每个级别似乎都有一个快捷方式，Alt+1、Alt+2 等，但它对我不起作用。我也没有看到为这些命令配置快捷方式的选项，但理论上你可以[自己制作](https://wiki.appcelerator.org/display/tis/Modifying+your+shortcut+keys).